# StackOverflow 问答 14539000-14539999

# wordpress - WP：使用 WP-Permalinks 和 PageTemplate 显示来自另一个数据库的产品？

> ID：14539003
> 
> 赞同：0
> 
> 时间：2013-01-26T16:34:26.190
> 
> 标签：wordpress, apache, mod-rewrite, permalinks

很想得到你的帮助。

**我的 IS 情况：** 所以我让我的用户创建他们自己的产品。可以说它是一套包含领带、衬衫和鞋子的服装。我允许他们保存这件衣服。我的脚本将图片和有关服装的更多信息保存在未连接到 wordpress 的数据库中。在我的数据库中，每件衣服都有自己唯一的 ID。它也有一个名字。

**我的未来情况：** 首先，我希望将那套服装的姓名和 ID 放入 URL 中。
所以我的用户将能够链接到他新创建的装备。
所需的 URL 架构是：

```
http://www.mydomain.com/outfits/funky-shirt-blue-tie-outfit/o12345 
```

或者 ：

```
http://www.mydomain.com/outfits/{%outfitTitle%}/o{%outfitID%} 
```

其次，我想使用 wordpress 页面或帖子模板来显示服装图片。

**我的问题：** - 我不想为每件衣服创建一个页面/帖子。
- 每件服装都不会作为页面或帖子存储在 wordpress 数据库中。

**到目前为止我发现了什么：** 我找到了一个 mod 重写工具[http://www.generateit.net/mod-rewrite/](http://www.generateit.net/mod-rewrite/)
我阅读了那些文档[http://codex.wordpress.org/Function_Reference/register_post_type](http://codex.wordpress.org/Function_Reference/register_post_type)
和[http://codex .wordpress.org/Template_Hierarchy](http://codex.wordpress.org/Template_Hierarchy)但无处可去。

有谁能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T22:16:20.867

您将不得不处理自定义重写规则和自定义 query_vars。否则很简单。

首先，创建自定义页面模板。创建 php 文件很简单，其中至少包含以下代码：

```
<?php /* Template Name: Outfit */ ?> 
```

您可以在 WP 管理员中创建一个页面并将其分配给您的新页面模板。记下此页面 ID。你以后会需要它的！

现在，让我们注册自定义重写规则。要注册自定义重写规则，您必须将此代码添加到您的 functions.php

```
add_action( 'generate_rewrite_rules', 'outfit_rewrite_rules' );
function outfit_rewrite_rules( $wp_rewrite )
{
    $outfit_page_id = 3; //get ID of your page with custom template for displaying outfit
    $wp_rewrite->rules = array(
        'outfit/?([a-zA-Z0-9]{1,})/?([0-9]{1,})/?$' => $wp_rewrite->index . '?page_id='. $outfit_page_id .'&outfit_ename=' . $wp_rewrite->preg_index( 1 ) . '&outfit_id=' . $wp_rewrite->preg_index( 2 ),
    ) + $wp_rewrite->rules;
} 
```

此代码将使用自定义页面模板将 URL 中包含服装的所有流量重写到您在步骤 1 中创建的自定义页面，并将在 -URL 中包含“outfit_name”和“outfit_id”。但是要访问这些变量，您必须注册自定义查询变量。通过这段代码，再次在模板的 functions.php 中

```
add_filter( 'query_vars', 'outfit_query_vars' );
function outfit_query_vars( $vars ) {
    $vars[] = 'outfit_name';
    $vars[] = 'outfit_id';
    return $vars;
} 
```

然后，您将能够通过以下代码在自定义页面模板中访问它们：

```
$outfit_id = get_query_var('outfit_id');
$outfit_name = get_query_var('outfit_name'); 
```

连接到您的数据库并获得所需的条目很容易，不是吗？您输入数据库的 PHP 代码将在您的装备页面模板中 - 打开评论后。

# c# - 在 Windows Phone 上将 base64 字符串转换为 C# 中的图像

> ID：14539005
> 
> 赞同：5
> 
> 时间：2013-01-26T16:34:29.697
> 
> 标签：c#, .net, base64, windows-phone

我有一个 base64 字符串，我想将其转换为图像并将图像控件的源设置为结果。

通常我会使用 来做到这一点`Image.FromStream`，类似于：

```
Image img;
byte[] fileBytes = Convert.FromBase64String(imageString);
using(MemoryStream ms = new MemoryStream())
{
    ms.Write(fileBytes, 0, fileBytes.Length);
    img = Image.FromStream(ms);
} 
```

但是，该`Image.FromStream`方法**在 Windows Phone 上不存在**，随便搜索只会找到依赖于该方法的结果。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-26T16:34:29.697

您可以使用这样的方法：

```
 public static BitmapImage base64image(string base64string)
    {
        byte[] fileBytes = Convert.FromBase64String(base64string);

        using (MemoryStream ms = new MemoryStream(fileBytes, 0, fileBytes.Length))
        {
            ms.Write(fileBytes, 0, fileBytes.Length);
            BitmapImage bitmapImage = new BitmapImage();
            bitmapImage.SetSource(ms);
            return bitmapImage;
        }
    } 
```

将图像添加到 XAML，例如：

```
 <Image x:Name="myWonderfulImage" /> 
```

然后您可以设置源，如下所示：

```
myWonderfulImage.Source = base64image(yourBase64string); 
```

# php - 我什么时候需要序列化对象以存储在会话中？

> ID：14539010
> 
> 赞同：1
> 
> 时间：2013-01-26T16:34:56.943
> 
> 标签：php, session, serialization

我知道有[serialize()/unserialize()](http://php.net/manual/en/oop4.serialization.php)来存储具有[魔术 __sleep 和 __wakeup 方法](http://au.php.net/manual/en/language.oop5.magic.php#language.oop5.magic.sleep)的对象。但我有一个项目，其中存储对象`$_SESSION`没有任何问题。

现在我想知道什么时候需要使用序列化？

是为了交叉引用吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-26T16:44:04.470

当您将对象放入内部时， PHP 在内部使用`serialize`/等价物，因此只要您遵守规则（不要尝试序列化资源，为反序列化提供类定义），它就会自动运行，正如您已经看到的那样。`unserialize``$_SESSION`

仅当您打算使用某些自定义机制保留值时，您才需要显式使用`serialize`/ 。`unserialize`

# c# - 如何格式化日期时间

> ID：14539011
> 
> 赞同：0
> 
> 时间：2013-01-26T16:34:57.443
> 
> 标签：c#, visual-studio-2010, datetime

我目前正在遍历一个 csv 文件，该文件在不同的行上有许多日期，我已经设法拆分和提取我想要的内容，但是我有一个 DateTime 格式问题。这是我的代码行：

```
current = DateTime.ParseExact(line[0], "dd/MM/yyyy HH:mm:ss.fff", null); 
```

从 csv 中拆分和读取的实际字符串是：

```
"20/12/2012 13:08:18.980" 
```

我正在计算两个 DateTimes 之间的差异（以毫秒为单位）。当我调试并查看本地人时，这就是 DateTime“当前”出现的内容：

```
 current    {20/12/2012 13:08:18}   System.DateTime 
```

正如你所看到的，它没有给我毫秒，因此我的 TimeSpan 差异计算被阻止了。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T16:41:34.870

毫秒就在那里。您可以使用以下代码对其进行验证：

```
 Console.Out.WriteLine("current = {0}", current.Millisecond); 
```

当您从调试器查看变量时，它使用`.ToString()`的只是不显示毫秒。

# php - PHP - 如何通过比较两个不同的子数组值对多维数组进行排序

> ID：14539013
> 
> 赞同：1
> 
> 时间：2013-01-26T16:35:01.373
> 
> 标签：php, arrays, sorting

我厌倦了寻找对这个多维数组进行排序的方法。我已经尝试过`usort()`，但它没有按照我想要的方式排序。或者只是也许我无法弄清楚要使用的正确逻辑。`usort()`对我来说似乎很难理解。

我想对我的数据进行排序（下面的示例），首先找到每个子数组的值较高（*在键 a 和 b 之间*）。然后从其键 a 或 b 中具有最高值的子数组将位于顶部。

例如这个数组：

```
Array
(
    [0] => Array
        (

         [a]=>5
         [b]=>
         [c]=>apple

        )

    [1] => Array
        (

         [a]=>5
         [b]=>7
         [c]=>guava

        )

    [2] => Array
        (

         [a]=>6
         [b]=>
         [c]=>banana

        )
    [3] => Array
        (

         [a]=>5
         [b]=>
         [c]=>avocado

        )

) 
```

应该这样排序：

```
Array
(
    [0] => Array
        (

         [a]=>5
         [b]=>7
         [c]=>guava

        )

    [1] => Array
        (

         [a]=>6
         [b]=>
         [c]=>banana

        )

    [2] => Array
        (

         [a]=>5
         [b]=>
         [c]=>apple

        )
    [3] => Array
        (

         [a]=>5
         [b]=>
         [c]=>avocado

        ) 
```

那么我究竟是如何做到这一点的呢？我很困惑如何使用 usort。对此进行排序的最佳 PHP 函数是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T17:07:15.550

有效的方法`usort()`是它需要一种方法来比较数组的元素来决定先出现什么。您为其提供一个函数，它会为输入数组中的每个元素对调用该函数。如果函数返回负值，则表示第一个参数小于第二个参数，并且在排序数组中应该排在它之前。如果它返回正值，则相反。

假设您正在比较两个子数组`s1`和`s2`. 使用您提供的逻辑，`s1`是“小于” `s2`- 也就是说，`s1`应该在`s2`- if之前`max(s1.a,s1.b) > max(s2.a,s2.b)`。因此，如果这是真的，排序函数应该返回一个负值。如果你从 ' 的最大值中减去`s1`' 的`s2`最大值，这应该会产生正确的结果。

尝试这个：

```
function sort_function(array $arr1, array $arr2) {
    $arr1_val = max($arr1['a'],$arr1['b']);
    $arr2_val = max($arr2['a'],$arr2['b']);
    return $arr2_val - $arr1_val;
}

usort($arr,sort_function); 
```

假设`$arr`是你的数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T17:00:55.417

您的比较功能：

```
function cmp($a,$b){
    // clean up the keys so they don't cause weird cross-type comparisons
    (empty($a['a']) ? $a['a'] = 0 : NULL;
    (empty($a['b']) ? $a['b'] = 0 : NULL;
    (empty($b['a']) ? $b['a'] = 0 : NULL;
    (empty($b['b']) ? $b['b'] = 0 : NULL;

    /// figure out the pertinent value to compare
    $value_from_a_to_compare = max($a['a'],$a['b']);
    $value_from_b_to_compare = max($b['a'],$b['b']);

    if($value_from_a_to_compare ==  $value_from_b_to_compare) {
        return 0;
    }

    if($value_from_a_to_compare >  $value_from_b_to_compare) {
        return 1;
    } else {
       return -1;
    }

} 
```

从 usort 调用这个

```
usort($your_array,'cmp');
var_dump($your_array); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-26T17:03:58.687

有几种方法，包括编写 dethtron5000 编写的函数，使您能够使用 usort。

我将描述一个不同的建议：创建一个辅助数组，将第一个数组中的最高数字放入其中，然后使用`array_multisort`辅助数组中的值对两者进行排序。

```
$helper = array();
foreach ($data as $value)
{
    $helper[] = max($value['a'],$value['b']);
}
array_multisort($helper,$data); 
```

# python - 在调用 DateField 的验证器之前更改 field.data？

> ID：14539015
> 
> 赞同：3
> 
> 时间：2013-01-26T16:35:55.833
> 
> 标签：python, flask, wtforms, flask-wtforms

我的问题很简单，这是一个基本的例子：

```
class F(Form):
  date_test = DateField('Test', validators=[Required()], format='%d/%m/%Y') 
```

我需要在调用验证器之前更改用户发送的值。在不失去使用 WTForms 的好处的情况下，最简单的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T01:11:08.803

Actualy "filters" was nice but it was not exactly what I was trying to do. I made a custom field and it's working.

```
class MyDateField(DateField):
    def __init__(self, label='', validators=None, transform_data=False, **kwargs):
        super(MyDateField, self).__init__(label, validators, **kwargs)
        self.transform_data = transform_data

    def process_formdata(self, valuelist):
      if self.transform_data:
        data = str(valuelist[0])
        # transform your data here. (for example: data = data.replace('-', '.'))

      super(MyDateField, self).process_formdata([data])

class F(Form):
    date_test = MyDateField('Test', validators=[Required()], format='%d/%m/%Y', transform_data=True]) 
```

If you want to modify the value directly in the user field you need to override _value().

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T18:19:54.310

所有 WTForm 字段都应该支持[`filters`](http://wtforms.simplecodes.com/docs/1.0.2/fields.html#the-field-base-class)关键字参数，这是一个将在输入数据上运行的可调用对象列表：

```
def transform_data(data):
    # do something with data here
    return data

class F(Form):
    date_test = DateField('Test', validators=[Required()], format='%d/%m/%Y',
                              filters=[transform_data]) 
```

# java - 我应该在 vm 中使用多少个线程？

> ID：14539022
> 
> 赞同：-5
> 
> 时间：2013-01-26T16:36:46.637
> 
> 标签：java, linux, multithreading

在我们的项目中，我创建了很多 java 线程来做一些连续的工作。

**在大多数情况下，这些线程都处于休眠状态，因此总 CPU 成本很低。**

带`1168`螺纹，`system overload`应低于 0.20

但后来我注意到，如果我用 jvm 创建超过 1000 个线程，那么我会得到

`fork: retry: Resource temporarily unavailable`

当我想连接`vm`（我的意思是**虚拟机**，不是`jvm`）时`ssh`，这似乎是一个关于系统资源的严重问题..

而且我非常担心我的程序中会发生什么..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T16:48:01.353

这么多线程看起来不像是一个好的设计。我建议在一个循环中接收当前唤醒您的线程的所有事件，这些事件可以立即将它们转换为[Future](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Future.html)或 Runnables 并发布到某个[ExecutorService](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html)。该服务可以为您管理一个线程池。ServerSocket 和 Socket 的标准方法就是以这种方式实现的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T16:41:14.800

[正如这里](https://stackoverflow.com/q/344203/507519)提到的，Linux 系统上的线程和进程的*总数*是有限的，直接*和*间接通过其他资源限制。您显然超出了该限制，并且`fork()`创建新 SSH 会话所需的调用失败。

无论如何，您为什么要创建这么多线程？

当线程数显着超过可用处理器内核数时，您很少获得任何性能优势，并且每个线程确实具有*不可*忽略的最小内存要求集。

如果您正在处理某种形式的[C10K](http://www.kegel.com/c10k.html)问题，您应该考虑将多个线程与异步 I/O 的使用结合起来。

# oracle - Java EE Web 应用程序，优化查询

> ID：14539023
> 
> 赞同：-1
> 
> 时间：2013-01-26T16:37:00.137
> 
> 标签：oracle, jakarta-ee, optimization

我正在使用 Servlet 构建 Java EE Web 应用程序。

在 servlet 中，我需要对 Oracle 数据库执行一系列 (30) 查询。

查询都是这种类型：**count(*) from TABLE where CONDITIONS**。

每个查询需要 1 秒，不算多，但总时间为 30-35 秒：太多了！

您知道如何提高查询的性能吗？

有没有办法并行运行它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T20:33:52.397

您可以尝试对 30 个进行查询：

```
select
  (select count(*) from tbl_table1 where ...) as table1_cnt,
  (select count(*) from tbl_table2 where ...) as table2_cnt,
  ...
  (select count(*) from tbl_table30 where ...) as table30_cnt
from dual; 
```

如果这没有帮助并且您无法更改数据库，则剩下一件事。在 Java 端缓存查询结果，在缓存中跟踪 Java 应用程序执行的插入/删除操作，并使用调度程序在后台从数据库中逐次刷新缓存。

# ios - 检索后无法使用缓存的 NSData 对象

> ID：14539025
> 
> 赞同：-1
> 
> 时间：2013-01-26T16:37:05.510
> 
> 标签：ios, caching, uiimage, nsdata

我正在缓存一个`NSData`包含从网络检索到的图像数据的对象。图像在缓存前正确显示。当我从缓存中检索数据对象时，即使数据对象相同，数据也不能再用于创建 UIImage。

请在下面查看我的代码的相关片段

```
NSData *webData= [NSData dataWithContentsOfURL:webPath]; //retrieve from web
UIImage *webImage = [UIImage imageWithData:webData]; //works fine

[webData writeToURL:filePath atomically:YES]; //cache
NSData *cacheData = [NSData dataWithContentsOfURL:filePath]; //get from cache
if ([cacheData isEqualToData:webData]) NSLog(@"Equal"); //Data objects are equal

UIImage *cacheImage = [UIImage imageWithData:cacheData]; //cacheImage is nil 
```

我可以通过更改将数据存储到缓存的方式来解决问题

```
NSData *temp = UIImageJPEGRepresentation(webImage, 1.0):
[temp writeToURL:filePath atomically:YES]; 
```

现在`webData`and`cacheData`不再相等，但`cacheImage`不是 nil 并且可以正确显示。

编辑 - 经过更多测试，我意识到我也遇到了同样的问题`UIImageJPEGRepresentation`。

有谁知道为什么会这样？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T01:52:19.730

找出问题是我试图在我的视图控制器完全加载之前完成所有这些工作。

# python - 模型方法在第一次调用后停止正常工作

> ID：14539027
> 
> 赞同：0
> 
> 时间：2013-01-26T16:37:12.327
> 
> 标签：python, django, django-models, model

我为零售商及其库存中的物品定义了两种模型。产品在另一个应用程序中定义。我定义了两个模型方法来获取和添加库存项目。这是代码的相关部分：

```
class Retailer(models.Model):
    name = models.CharField(max_length=100)
    @property
    def stock_items(self):
        return StockItem.objects.filter(retailer__id=F('id'))

    def add_stock_item(self, product_id):
        try:
            print "Checking if it's already in stock"
            self.stock_items.get(product__id=product_id)
            print "It's already in stock"
        except ObjectDoesNotExist:
            try:
                print "Adding item to stock"
                product = Product.objects.get(pk=product_id)
                StockItem.objects.create(retailer=self, product=product)
                print "Added to stock"
            except Product.DoesNotExist:
                print "Such product doesn't exist"
    def __unicode__(self):
        return self.name

StockItem(models.Model):
    retailer = models.ForeignKey(Retailer)
    product = models.ForeignKey(Product)
    def __unicode__(self):
        return "%s - %s %s" % (self.retailer, self.product.brand, self.product) 
```

当我想使用这些模型方法时，会发生一些奇怪的事情。添加第一项后，它们停止正常工作（在这些示例中，产品 1 是 16 GB iPhone，产品 2 是 32 GB iPhone）。

首先让我们将一些产品添加到我们的库存中：

```
>>> r = Retailer.objects.get(pk=1)
>>> r.stock_items
[]
>>> r.add_stock_item(1)
Checking if it's already in stock
Adding item to stock
Added to stock
>>> r.add_stock_item(2)
Checking if it's already in stock
Adding item to stock
Added to stock 
```

到目前为止，一切都很好。现在让我们再次尝试添加产品，看看它是如何处理错误的：

```
>>> r.add_stock_item(1)
Checking if it's already in stock
It's already in stock
>>> r.add_stock_item(2)
Checking if it's already in stock
Adding item to stock
Added to stock 
```

什么？为什么又添加了产品 2。它应该显示类似于产品 1 的消息。让我们看看我们的库存：

```
>>> r.stock_items
[<StockItem: hh - Apple iPhone 4S 16GB>] 
```

产品 2 发生了什么？是否无法将其添加到数据库中？

```
[<StockItem: hh - Apple iPhone 4S 16GB>, <StockItem: hh - Apple iPhone 4S 32GB>, <StockItem: hh - Apple iPhone 4S 32GB>] 
```

显然不是。它已添加到数据库中，但不知何故我们的程序无法正确检查它。调用 r.stock_items 仅显示添加到库存的第一个产品。重新启动 shell 也不会改变这种情况，所以我想原因不可能是因为函数被评估的时候。

为什么会发生这种情况，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T16:50:54.977

尝试删除`@property`并将方法更改为：

```
def stock_items(self):
    return self.stockitem_set.all() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T17:15:12.387

您的方法失败的原因是该表达式没有按照您的想法执行。该`F()`语法用于比较*同一行中的*值：因此该表达式正在检查相关的零售商 ID 是否与当前行的 ID 相同。碰巧这对于第一个项目是正确的，但对于任何后续项目都不会是这样，因为行 ID 随着新项目的增加而增加，但零售商 ID 保持不变。

# javascript - canvas.toDataURL("image/jpeg") 在图像末尾创建黑色区域

> ID：14539028
> 
> 赞同：1
> 
> 时间：2013-01-26T16:37:16.783
> 
> 标签：javascript, canvas

我正在使用[qr.js (http://neocotic.com/qr.js)](http://neocotic.com/qr.js)创建**QRCodes**。我想让我的用户能够下载这些二维码，因此我需要使用 toDataURL 函数从画布元素创建一个图像**。**使用“image/png”函数执行它没有问题，但是当我尝试创建 JPEG 图像时，它会在图像末尾添加一个黑色区域： ![在此处输入图像描述](../Images/8bd35176fcd098124b16c4861ab00e44.png)
是否有其他人也遇到过这个问题并且知道解决方案或有出现此问题的可能原因是什么？

**浏览器**：谷歌浏览器 24.0.1312.56、Mozilla Firefox 18.0.0.1

# java - SimpleDateFormat：字符串转换为日期，然后转换回字符串，日期更改

> ID：14539037
> 
> 赞同：-2
> 
> 时间：2013-01-26T16:38:14.067
> 
> 标签：java

我正在尝试将生日从字符串转换为日期，以便添加到数组列表联系人中。然后从联系人中读取以显示生日。但是 05/02/1990 变为 365/12/1990，06/12/1991 变为 365/12/1991（即 DD 和 MM 不正确）。非常感谢你的帮助！

```
ArrayList<Person> contacts = new ArrayList<Person>();
...
String firstName = sc.next();
String lastName = sc.next();
String email = sc.next();
String birthdayStr = sc.next();
SimpleDateFormat formatter = new SimpleDateFormat("DD/MM/YYYY");
try{

    Date birthday = formatter.parse(birthdayStr); 
    Person s = new Person(firstName, lastName, email, birthday);
    contacts.add(s);
    Date b = s.getBirthday();
    System.out.println(formatter.format(b));

}catch(ParseException e){

   System.out.println( e.getMessage());
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T16:40:30.680

`D`是一年中的一天，您需要小写`d`月份的一天。也使用小写`y`。

```
new SimpleDateFormat("dd/MM/yyyy") 
```

大写的使用与`Y`周年[有关](http://docs.oracle.com/javase/7/docs/api/java/util/GregorianCalendar.html#week_year)：

> 一周年与 WEEK_OF_YEAR 周期同步。第一周和最后一周（含）之间的所有周都具有相同的周年值。因此，一周年的第一天和最后一天可能具有不同的日历年值。
> 
> 例如，1998 年 1 月 1 日是星期四。如果 getFirstDayOfWeek() 为 MONDAY 且 getMinimalDaysInFirstWeek() 为 4（ISO 8601 标准兼容设置），则 1998 年的第 1 周从 1997 年 12 月 29 日开始，到 1998 年 1 月 4 日结束。最后三天的一周年份为 1998 年1997 日历年。但是，如果 getFirstDayOfWeek() 是 SUNDAY，则 1998 年的第 1 周从 1998 年 1 月 4 日开始，到 1998 年 1 月 10 日结束；1998 年的前三天是 1997 年第 53 周的一部分，他们的周年是 1997 年。

为了避免对年份的这种“副作用”，`y`可以使用小写字母。

# angularjs - ngRepeat 在 AngularUI 引导对话框中不起作用

> ID：14539038
> 
> 赞同：1
> 
> 时间：2013-01-26T16:38:14.270
> 
> 标签：angularjs, angular-ui

有谁知道如何让我的代码工作。我正在尝试创建一个用户创建对话框并希望使用 ngResource 发送帖子数据，我已经配置了我的 PHP 后端并且它按预期工作。现在，我的问题是在对话框上附加错误，我尝试添加虚拟数据，但 ngRepeat 对我不起作用。我还尝试了调试问题的不同步骤，但对我没有任何作用。我也在研究这个问题，但没有运气。这是我的代码：

```
<div name="errors" id="errors" class="alert alert-error">
        <li ng-repeat="error in dialog.errors">{{ error }}</li>
</div> 
```

尝试查看链接 [http://jsfiddle.net/QCQrF/](http://jsfiddle.net/QCQrF/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-26T17:31:39.790

@Ryan 在您的 jsFiddle 中发生了很多事情，但最重要的问题是您指定对话框模板的方式。模板可以指定为字符串（使用`template`属性）或部分 ( `templateUrl`)。

如果您将模板移动到部分模板，您可以按如下方式指定它：

```
var dialogOpts = {
        backdrop: true,
        keyboard: true,
        backdropFade: true,
        backdropClick: true,
        templateUrl:  'login-dialog.html',
        controller: 'DialogCtrl',
        resolve: { dialogScope : {
          errors : ['error1', 'error2'],
          title :'Add User',
          btnTxt : 'Create User'
        }}
    }; 
```

`resolve`此外，IMO 使用属性而不是使用对话框的实例更容易传递要在对话框范围内公开的数据。

我已将您的小提琴转换为 plunk 以显示这一点：[http ://plnkr.co/edit/iGIwPBj9zBPgX3IUwBNj?p=preview](http://plnkr.co/edit/iGIwPBj9zBPgX3IUwBNj?p=preview)

您可能会发现 $dialog 的服务附加文档有助于进一步探索此服务：[https ://github.com/angular-ui/bootstrap/blob/master/src/dialog/README.md](https://github.com/angular-ui/bootstrap/blob/master/src/dialog/README.md)

作为最后一句话，我注意到您正在将`$event`参数传递给事件处理程序（全部调用`preventDefault()`它们），而这是不必要的。

# c++ - C++ 的简单多线程混淆

> ID：14539042
> 
> 赞同：4
> 
> 时间：2013-01-26T16:38:35.003
> 
> 标签：c++, multithreading, qt, qthread

我正在开发一个`C++`应用程序`Qt`。我有一个非常基本的疑问，如果这太愚蠢了，请原谅我......

我应该创建多少个线程才能在最短的时间内在它们之间划分任务？

我问这个是因为我的笔记本电脑是第三代*i5*处理器（3210m）。因此，由于它是*双核*和`NO_OF_PROCESSORS` *环境变量*，因此向我展示了**4**。我在一篇文章中读到，应用程序的动态内存仅适用于启动该应用程序的处理器。那么我应该只创建**1 个**线程（因为 env 变量说 4 个处理器）还是**2 个**线程（因为我的处理器是双核和 env 变量可能暗示核心数）还是**4 个**线程（如果那篇文章是错误的）？请原谅我，因为我是一个尝试学习 Qt 的初级程序员。谢谢你 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T16:44:47.780

虽然超线程有点谎言（你被告知你有 4 个核心，但你实际上只有 2 个核心，另外两个只运行在前两个不使用的资源上，如果有这样的话），正确的做法仍然是*使用尽可能多的`NO_OF_PROCESSORS`线程*。

请注意，英特尔并不是唯一对您撒谎的公司，在最近的 AMD 处理器上更糟糕的是，您拥有 6 个所谓的“真正”内核，但实际上只有 4 个内核，它们之间共享资源。

然而，大多数时候，它或多或少都有效。即使没有显式阻塞线程（在等待函数或阻塞读取上），也总会有一个核心停止的点，例如由于缓存未命中而访问内存时，这会释放出可以被超线程核心。

因此，如果您有很多工作要做，并且可以很好地并行化，那么您应该拥有与广告内核一样多的工作人员（无论它们是“真实的”还是“超级”）。这样，您可以最大限度地利用可用的处理器资源。

理想情况下，应在应用程序启动的早期创建工作线程，并有一个任务队列将任务交给工作人员。由于同步通常是不可忽略的，因此任务队列应该相当“粗略”。在最大核心使用率和同步开销之间存在折衷。

例如，如果您在一个数组中有 1000 万个元素要处理，您可能会推送引用 100,000 或 200,000 个连续元素的任务（您*不会*想要推送 1000 万个任务！）。这样，您可以确保平均而言没有内核处于空闲状态（如果一个内核提前完成，它会拉另一个任务而不是什么都不做），并且您只有大约一百个同步，其开销或多或少可以忽略不计。

如果任务涉及文件/套接字读取或其他可能无限期阻塞的事情，那么产生另外 1-2 个线程通常是没有错误的（需要一些实验）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T16:46:20.840

这完全取决于您的工作负载，如果您的工作负载非常密集，您应该更接近您的 CPU 拥有的线程数（在您的情况下为 4 - 2 核 * 2 用于超线程）。少量的超额订阅也可以，因为这可以补偿您的一个线程等待锁定或其他东西的时间。
另一方面，如果您的应用程序不依赖于 cpu 并且大部分时间都在等待，您甚至可以创建比 cpu 计数更多的线程。但是，您应该注意到创建线程可能是相当大的开销。唯一的解决方案是衡量您的瓶颈是否存在并朝该方向进行优化。

另请注意，如果您使用的是 c++11，您可以使用`std::thread::hardware_concurrency`一种可移植的方式来确定您拥有的 cpu 内核数量。

关于你关于动态内存的问题，你一定误解了那里的东西。通常你创建的所有线程都可以访问你在应用程序中创建的内存。另外，这与C++无关，超出了C++标准的范围。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T16:47:08.497

`NO_OF_PROCESSORS`显示 4，因为您的 CPU 具有超线程。超线程是英特尔的技术商标，它使单个内核能够或多或少地同时执行同一应用程序的 2 个线程。只要一个线程正在获取数据而另一个线程正在访问 ALU，它就可以工作。如果两者都需要相同的资源并且指令无法重新排序，则一个线程将停止。这就是您看到 4 个核心的原因，即使您有 2 个。

动态内存仅可用于其中一个内核，IMO 不太正确，但寄存器内容和有时缓存内容是正确的。驻留在 RAM 中的所有内容都应该可供所有 CPU 使用。

比 CPU 更多的线程可以提供帮助，具体取决于您的操作系统调度程序的工作方式/您访问数据的方式等。要找到您必须对代码进行基准测试。其他一切都只是猜测。

除此之外，如果您正在尝试学习 Qt，那么担心这可能不是正确的事情......

**编辑：**

回答您的问题：如果您增加线程数，我们无法真正告诉您程序运行的速度有多慢/多快。取决于你在做什么，这会改变。例如，如果您正在等待来自网络的响应，则可以更多地增加线程数。如果您的线程都使用相同的硬件，4 个线程的性能可能不会比 1 个更好。最好的方法是简单地对您的代码进行基准测试。

在*理想*的世界中，如果您“只是”在运行 4 或 8 个线程时处理数字不应该有什么不同，那么净时间应该是相同的（忽略上下文切换的时间等），只是响应时间会有所不同。问题是没有什么是理想的，我们有缓存，你的 CPU 都在同一条总线上访问相同的内存，所以最终它们会竞争对资源的访问。然后，您还有一个操作系统，它可能会或可能不会在给定时间安排线程/进程。

您还要求解释同步开销：如果您的所有线程都访问相同的数据结构，您将不得不进行一些锁定等操作，以便在更新时没有线程访问处于无效状态的数据。

假设你有两个线程，都做同样的事情：

```
int sum = 0; // global variable

thread() {
    int i = sum;
    i += 1;
    sum = i;
} 
```

如果同时启动两个线程执行此操作，则无法可靠地预测输出：它可能会像这样发生：

```
THREAD A : i = sum; // i = 0
           i += 1;  // i = 1
**context switch**
THREAD B : i = sum; // i = 0
           i += 1;  // i = 1
           sum = i; // sum = 1
**context switch**
THREAD A : sum = i; // sum = 1 
```

最后`sum`是`1`，`2`即使你启动了两次线程。为避免这种情况，您必须同步`sum`对共享数据的访问。通常，您可以通过根据需要阻止访问来做到这一点`sum`。同步开销是线程等待资源再次解锁、什么都不做的时间。

如果每个线程都有离散的工作包并且没有共享资源，则应该没有同步开销。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T21:57:26.480

在 Qt 中开始在线程之间划分工作的最简单方法是使用 Qt Concurrent 框架。示例：您想要对 QList 中的每个项目执行一些操作（很常见）。

```
void operation( ItemType & item )
{
  // do work on item, changing it in place
}

QList<ItemType> seq;  // populate your list

// apply operation to every member of seq
QFuture<void> future = QtConcurrent::map( seq, operation );
// if you want to wait until all operations are complete before you move on...
future.waitForFinished(); 
```

Qt 自动处理线程...无需担心。QFuture[文档](http://qt-project.org/doc/qt-4.8/qfuture.html "QFuture 文档")描述了如何在`map`需要时使用信号和槽不对称地处理完成。

# .net - 美分让 LevelMatchFilter 工作

> ID：14539045
> 
> 赞同：0
> 
> 时间：2013-01-26T16:38:57.127
> 
> 标签：.net, log4net

我创建了一个自定义附加程序来使用 EF 将错误记录到数据库中。我还有一个 RollingFileAppender，我想记录所有内容。这是我的配置部分：

```
 <log4net>
    <appender name="RollingFileAppender"
          type="log4net.Appender.RollingFileAppender" >
      <param name="File" value="c:\logs\log-file.txt" />
      <param name="MaximumFileSize" value="1MB" />
      <layout type="log4net.Layout.PatternLayout" value="%date [%thread] %-5level %logger [%ndc] - %message%newline"/>
    </appender>
    <appender name="LogToDBAppender" type="Common.Appender.LogToDBAppender">
      <filter type="log4net.Filter.LevelMatchFilter">
        <levelToMatch value="ERROR"/>
      </filter>
    </appender>
    <root level="ALL">      
      <appender-ref ref="RollingFileAppender" />
      <appender-ref ref="LogToDBAppender" />
    </root>    
  </log4net> 
```

这里的问题是以下代码：

```
logger.Info("Entering LoadAllUsers"); 
```

调用 LogToDBAppender 类，当然它会失败，因为它需要一个异常参数。

任何帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T16:59:53.000

您需要在`DenyAllFilter`之后添加`LevelMatchFilter`

```
<appender name="LogToDBAppender" type="Common.Appender.LogToDBAppender">
  <filter type="log4net.Filter.LevelMatchFilter">
    <levelToMatch value="ERROR"/>
  </filter>
  <filter type="log4net.Filter.DenyAllFilter" />
</appender> 
```

第一个过滤器接受所有 ERROR 消息，第二个过滤器拒绝所有其他消息。如果没有第二个过滤器，其他消息也会被接受。

# c - 监视linux内核中上下文切换次数的最有效方法是什么？

> ID：14539051
> 
> 赞同：7
> 
> 时间：2013-01-26T16:39:36.893
> 
> 标签：c, linux-kernel, profiling, arm, embedded-linux

我想获得以下总统计数据：

1.  发生了多少`softirq`？
2.  发生了多少`interrupts`？
3.  发生了多少`context switches`？

我知道你可以使用[`pidstat`](http://www.cyberciti.biz/open-source/command-line-hacks/linux-monitor-process-using-pidstat/),`cat /proc/interrupts`和`/cat/proc/softirqs`. 但是使用它们的开销太大。

*   **如何在`{1-3}`不使用的情况下`/proc`以最快的方式获得底线值？**

*   **我可以使用[ftrace](http://www.mjmwired.net/kernel/Documentation/trace/ftrace.txt)来帮助我跟踪事件吗？**

我将使用高分辨率计时器来监控系统：

*   [LWN 文章](http://lwn.net/Articles/167897/)
*   [IBM 开发人员](http://www.ibm.com/developerworks/linux/library/l-timers-list/index.html)
*   [计时器](https://export.writer.zoho.com/public/rreginelli/Chapter-5---High-Resolution-Timers-Final1/fullpage)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-27T12:48:51.323

使用[perf](https://perf.wiki.kernel.org/index.php/Tutorial)，例如：

```
# perf stat -B dd if=/dev/zero of=/dev/null count=1000000

1000000+0 records in
1000000+0 records out
512000000 bytes (512 MB) copied, 0.956217 s, 535 MB/s

 Performance counter stats for 'dd if=/dev/zero of=/dev/null count=1000000':

            5,099 cache-misses             #      0.005 M/sec (scaled from 66.58%)
          235,384 cache-references         #      0.246 M/sec (scaled from 66.56%)
        9,281,660 branch-misses            #      3.858 %     (scaled from 33.50%)
      240,609,766 branches                 #    251.559 M/sec (scaled from 33.66%)
    1,403,561,257 instructions             #      0.679 IPC   (scaled from 50.23%)
    2,066,201,729 cycles                   #   2160.227 M/sec (scaled from 66.67%)
              217 page-faults              #      0.000 M/sec
                3 CPU-migrations           #      0.000 M/sec
               83 context-switches         #      0.000 M/sec
       956.474238 task-clock-msecs         #      0.999 CPUs

       0.957617512  seconds time elapsed 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-26T21:18:51.157

检查 Linux 的[perf 子系统](https://perf.wiki.kernel.org/index.php/Main_Page)，这是您从 Linux 系统获得软或硬性能计数器所需的方式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-27T00:28:03.123

您可以通过某种程度的分辨率获取所有这些信息`/proc`，如果您需要更多 rez，您可以调整嵌入式系统的内核。

可以监视您想要的信息`$ vmstat 1`，您可以检查 vmstat 的源代码，以了解他们是如何从以下位置读取信息`/proc`的[`http://procps.sourceforge.net.`](http://procps.sourceforge.net)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-26T21:09:46.187

也许您应该考虑编写一个 Linux 内核模块 (LKM)。

这里有一个教程：[http ://www.tldp.org/LDP/lkmpg/2.6/html/](http://www.tldp.org/LDP/lkmpg/2.6/html/)

如果您需要一个准确的分析系统，您可以将您的内核模块附加到某个中断或任何其他有效的入口点*，并保存（没有太多指令！）您需要考虑的内容。然后，在中断之后，定期收集和分析该数据。

您可以通过文件系统中的特殊文件（通过 mknode 在用户空间中创建或使用 MKDEV/register_chrdev 在初始化中创建）以与其他模块相同的方式导出信息。

上面的链接中有一些信息。

`*`例如，您可以将您的模块附加到 read 系统调用（用您的包装实际读取），或导出文件并捕获打开/关闭尝试。

后者的使用示例如下：

```
void f() {
  int fd_prof;
  fd_prof = open("/dev/profiler", O_RDONLY);
  /* Do whichever thing you want to profile */
  close(fd_prof);
  /* Read profiled data from /dev/profiled_data or wherever you want
   * to export it to */ 
```

请注意，在编译 LKM 时，您无法访问标准 C 库，因为内核空间中不存在 libc。

不用担心，您仍然可以在内核空间中实现 sprintf 之类的功能，当然，您可以直接访问（无需上下文切换）任何系统调用（读、写...）

# javascript - JavaScript：无法替换 NodeList 中的元素

> ID：14539053
> 
> 赞同：0
> 
> 时间：2013-01-26T16:39:53.493
> 
> 标签：javascript, bubble-sort, nodelist

这是对两个并行节点列表进行排序的冒泡排序的一部分，`payRates`并且`txlis`.

```
for(var index=0; index < payRates.length; index++){
    if(payRates[index] < payRates[index+1]){
        var temp = payRates[index];
        payRates[index] = payRates[index+1];
        payRates[index+1] = temp;

        temp = txlis[index];
        txlis[index] = txlis[index+1];
        txlis[index+1] = temp;
        bubbled = true;
} 
```

`payRates`是浮点对象的 NodeList。`txlis`是一个 LI 元素的 NodeList。我可以覆盖其中的元素，`payRates`但无论我尝试什么，其中的元素都`txlis`保持原来的顺序。

我已经像这个例子一样尝试过，我已经尝试过`list.parentNode.replaceChild()`（`list`UL 元素是从哪里`txlis`派生的），我已经尝试从头开始创建新的 LI 元素，但没有任何效果。

我究竟做错了什么？

# asp.net - 实体框架：如果不存在则生成特定表？

> ID：14539055
> 
> 赞同：6
> 
> 时间：2013-01-26T16:40:03.087
> 
> 标签：asp.net, asp.net-mvc, entity-framework, ef-code-first

我有一些旧表，我通过逆向工程将它们添加到项目中，以将它们用作`code first`.

像这样的东西：

```
public class User
{
    public string Name { get; set; }
    public int Id { get; set; }
}

public class Profile
{
    [Key, ForeignKey("User")]
    public int  Id { get; set; }
    public string Name { get; set; }

    public virtual User User { get; set; }
}

public class EFDbContext : DbContext
{
    public DbSet<User> Users{ get; set; }
    public DbSet<Profile> Profiles { get; set; }
} 
```

在这里，如果我的旧表`User`存在，那么 Entity Framework 不会创建其他表，例如`Profile`表。

**我的问题**如果不存在，我如何指定应该创建哪个**表？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T18:55:22.963

你检查过这个答案吗？

[EF4代码首先创建新表](https://stackoverflow.com/questions/7047900/ef4-code-first-create-new-table)

除非您删除并重新创建完整的数据库，否则我认为这是不可能的。

> 设置初始化策略
> 
> 在下一节中，我们将开始更改我们的模型，这反过来意味着数据库模式也需要更改。目前没有“开箱即用”的解决方案来发展您现有的模式。数据库演进是我们目前正在进行的工作，最近的设计博客文章中提供了我们前进方向的示例。
> 
> 但是，在 AppDomain 中第一次使用上下文时，可以运行一些自定义逻辑来初始化数据库。如果您想为测试运行插入种子数据，这很方便，但如果模型已更改，重新创建数据库也很有用。在 CTP5 中，我们包含了一些您可以插入的策略，但您也可以编写自定义策略。
> 
> 在 Program.cs 的顶部添加 System.Data.Entity.Database 的 using 语句

```
using System.Data.Entity.Database; 
```

> 对于演练，我们只想在模型发生更改时删除并重新创建数据库，因此在我的 Program 类的 Main 方法的顶部，我添加了以下代码

```
DbDatabase.SetInitializer<ProductContext>(
new DropCreateDatabaseIfModelChanges<ProductContext>()); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-17T18:09:08.980

我有同样的问题。我使用 DbMigration 类的 Sql 方法解决了它。像这样的东西

```
 public partial class userToTblUsersMapping : DbMigration
{
    public override void Up()
    {
        this.Sql(@"IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[tblUsers]') AND type in (N'U'))
BEGIN
CREATE TABLE [dbo].[tblUsers](
[UserID] [varchar](50) NOT NULL,
[UserIDNo] [int] IDENTITY(1,1) NOT NULL,
CONSTRAINT [PK_tblUsers] PRIMARY KEY CLUSTERED 
([UserID] ASC)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF,            ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
END"
    }
   public override void Down()
   {
      DropTable("dbo.tblUsers");
   }
} 
```

# android - 如何制作水平显示项目的操作栏下拉菜单？

> ID：14539057
> 
> 赞同：1
> 
> 时间：2013-01-26T16:40:05.963
> 
> 标签：android, drop-down-menu, android-actionbar

我想制作一个水平显示项目（图标）的操作栏下拉菜单。像这样：

![在此处输入图像描述](../Images/f8b71710530745863a5d60ea3e335fef.png)

这应该是一个带有下拉菜单的操作栏，您可以在其中选择颜色。

所以它应该水平显示图标（颜色）并且图标应该是可点击的。到目前为止，我只设法制作了一个垂直列表。

如果可能的话，我想在 XML 中执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T17:10:38.963

ActionBar 不是为这样的用例而设计的。ActionBar 按钮旨在替换旧设备（HC/ICS 之前）上可以用单独的硬件按钮触发的旧选项菜单。当没有足够的空间来显示所有按钮时使用您在草图中绘制的溢出按钮（带有 3 个点的按钮）（Android 框架会自动处理这一点），因此这些按钮将被分组到溢出菜单。覆盖此行为是一个坏主意（如果可能的话）。

相反，您应该考虑另一种方法：将一个 ActionButton 添加到用于处理颜色选择器的 ActionBar。单击此按钮时，最好的解决方案是显示一个 AlertDialog（您可以轻松地在此处插入显示您想要的颜色的视图），因为即使按钮​​隐藏在溢出菜单中，这也会发挥最佳作用。

或者，您可以触发[PopupMenu](http://developer.android.com/reference/android/widget/PopupMenu.html)或实现一些 QuickAction 来处理颜色选择器（如果您的按钮隐藏在溢出菜单中，这可能会很糟糕，并且还会导致非常混乱的 UI）。

# mql4 - 如何使用命令行工具编译 MQL4 文件？

> ID：14539064
> 
> 赞同：8
> 
> 时间：2013-01-26T16:40:32.430
> 
> 标签：mql4, metatrader4

现在我正在将我的 MetaTrader**`.mq4`**文件编译为**`.ex4`**带有`MetaEditor`.

但是我的`.mq4`文件是由 Java 进程生成的，我想自动化编译过程。

是否有可以以编程方式调用的命令行编译器工具？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2015-09-08T13:30:36.213

要从命令行编译源代码文件，您可以使用 MetaEditor。例如：

```
metaeditor.exe /compile:"C:\Program Files\Platform\MQL5\Scripts\myscript.mq5" 
```

^(改为使用 64 位`metaeditor64.exe`。)

在 Linux/macOS 中，这可以使用[Wine](https://www.winehq.org/)来实现，例如：

```
wine metaeditor.exe /compile:"MQL4/Experts/MACD Sample.mq4" 
```

对于批量编译，您可以指定文件夹，例如：

```
metaeditor.exe" /compile:"MQL5\Scripts" 
```

要使用包含文件指定自定义 MQL5/MQL4 文件夹，您可以使用`/inc`参数，例如：

```
metaeditor.exe /compile:"./Scripts" /inc:"C:\Program Files\TradingPlatform 2\MQL5" 
```

有关编译过程的更多信息，您可以使用`/log`：

```
metaeditor.exe /compile:"C:\Program Files\Platform\MQL5\Scripts\myscript.mq5" /log 
```

^(要仅检查语法，请添加额外的`/s`.)

如果编译失败，`MQL4.log`将在平台文件夹中创建包含相关详细信息的文件。它将采用 UTF-16 格式，因此您可能需要一个特殊的工具来处理它（例如 Vim、Ruby[或](https://stackoverflow.com/q/54729247/55075)[`findstr`](https://stackoverflow.com/a/41840337/55075)）[`rg`](https://stackoverflow.com/a/54236525/55075)。

要指定自定义编译日志文件，请使用`/log:file.log`参数，例如

```
metaeditor.exe /log:errors.log /compile:. 
```

注意：[不支持显示到标准输出](https://stackoverflow.com/q/41580912/55075)（尽管在 Linux 上您可以使用：）`/log:CON`。

有关更多信息，请查看：[从命令行编译](http://www.metatrader5.com/en/metaeditor/help/development/compile)

* * *

前段时间您可以下载独立于 MetaEditor 运行的 MQL4/MQL5 程序编译器 — `MQL.exe`. 它与终端分开分发，您可以在以下地址下载它：

> [https://download.mql5.com/cdn/web/metaquotes.software.corp/mt5/mql.exe](https://download.mql5.com/cdn/web/metaquotes.software.corp/mt5/mql.exe)
> 
> [https://download.mql5.com/cdn/web/metaquotes.software.corp/mt5/mql64.exe](https://download.mql5.com/cdn/web/metaquotes.software.corp/mt5/mql64.exe)

用法（根据 2015 年 7 月 2 日起的 MQL4/MQL5 编译器 build 1162）：

```
mql.exe [<flags>] filename.mq5
        /mql5     - compile mql5 source
        /mql4     - compile mql4 source
        /s        - syntax check only
        /i:<path> - set working directory
        /o        - use code optimizer 
```

然而，独立编译器被有意删除，所以现在链接指向安装程序以支持 MetaEditor。

* * *

在 build 600 之前的许多旧版本 MetaTrader 已`metalang.exe`包含在平台中。

然而，在构建 616 中，MetaQuotes 有意从标准 MetaTrader 安装中删除了编译器 ( `mql.exe`/ )。`mql64.exe`

这意味着如果您升级您的 MT 平台 (>616)，编译器可执行文件将被删除。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-24T12:02:01.260

这有点晚了，但由于我为 UltraEdit/UEStudio 编写了一个小脚本，并且从 stackoverflow 获得了大量帮助，所以这是我的脚本。它编译然后将 ex4 复制到许多测试 MT4 安装：

UE 上的“编译”按钮可以：

```
"MT4Compile.bat" "%FilePath" "%FileName"
Start in path eg: D:\Development\MQ4 (Location of MT4Compile.bat) 
```

通常我的源代码在 D:\Development\MQ4[Group][ExpertName][FileName].mq4 下的库树中

D:\Development\MQ4\MT4Compile.bat 的内容：

```
@echo off
rem Version: 1.1
rem Date:   24 Sep 2013
rem Author: Shawky
rem Refer to HELP: for info

SET XC=xcopy /D /Y /V /F /I
SET PROGDIR=D:\Development\Go Pro Demo (MQ4 Testing)
SET DSTPATH=%PROGDIR%\experts

SET SIMPATH1=G:\Apps\MT4\BackTest IC (Recent)\experts
SET SIMPATH2=G:\Apps\MT4\BackTest IC (All)\experts
SET SIMPATH3=G:\Apps\MT4\BackTest Go (All)\experts
SET DEPLOYPATH=D:\Development\Deployment\experts

SET SRCPATH=%1
SET SRCPATH=%SRCPATH:"=%
IF "%SRCPATH%"=="" (
    SET SRCPATH=[Arg1]
)

SET APPNAME=%2
SET APPNAME=%APPNAME:"=%
IF "%APPNAME%"=="" (
    SET APPNAME=[Arg2]
)

SET SRCFILE=%APPNAME%.mq4
SET DSTFILE=%APPNAME%.ex4

SET CMD="%PROGDIR%\metalang.exe" "%SRCFILE%" "%DSTFILE%"

IF "%SRCPATH%"=="[Arg1]"  GOTO HELP
IF "%APPNAME%"=="[Arg2]"  GOTO HELP

cd %SRCPATH%

IF NOT EXIST "%SRCFILE%"  (
    SET ERROR=Error: File "%SRCFILE%" does not exist in %SRCPATH%
    GOTO HELP
)

echo .
echo Compiling %SRCFILE% to %DSTPATH%\%DSTFILE%
echo .
DEL *.log
%CMD%
IF EXIST "%DSTFILE%" (
    echo .
    echo Distributing executable to SIM and Deployment paths
    %XC% "%DSTFILE%" "%DSTPATH%\"
    IF EXIST "%SIMPATH1%"   %XC% "%DSTFILE%" "%SIMPATH1%\"
    IF EXIST "%SIMPATH2%"   %XC% "%DSTFILE%" "%SIMPATH2%\"
    IF EXIST "%SIMPATH3%"   %XC% "%DSTFILE%" "%SIMPATH3%\"
    IF EXIST "%DEPLOYPATH%" copy /B /Y "%DSTFILE%" "%DEPLOYPATH%\%APPNAME% (Dev).ex4"
)

goto END

:HELP
echo .  Metatrader 4 Command Line utility for compiling MT4 programmes.
echo .
echo .  This batch files allows MT4 applications to be compiled from a directory other than .\experts.
echo .  The output will be copied to experts after compilation.
echo .
echo .  [Arg1] = Path to MT4 application directory
echo .  [Arg2] = Name (without extension) of the main MQ4 source code to compile.
echo .
echo .  Example:
echo .      MT4Compile.bat "D:\Development\MQ4\MyExpert\" "PrimaryMQ4FileName"
echo .
echo .  Programme Directory: %PROGDIR%
echo .  Source Path:         %SRCPATH%
echo .  Source File:         %SRCFILE%
echo .  Destination File:    %DSTFILE%
echo .  Target Path:         %DSTPATH%
echo .
echo .  Argument 1:          %SRCPATH%
echo .  Argument 2:          %APPNAME%
echo .
echo .  Commands to execute would be:
echo .
echo .      %CMD%
echo .      %XC% "%DSTFILE%" "%DSTPATH%\"
echo .
echo .  %ERROR%
echo .

pause

:END 
```

祝一切顺利。

肖基

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T16:19:50.197

是的，终端的安装目录中有一个可执行文件。它被称为metalang.exe。

# java - 将文件中的行拆分为不同的子字符串

> ID：14539067
> 
> 赞同：0
> 
> 时间：2013-01-26T16:40:54.050
> 
> 标签：java, split, indexof

我需要帮助才能在 IndexOf 的帮助下将一些单独的行拆分为不同的子字符串。

子字符串用 * 分隔，例如：

> Question*Answer*AnswerA*AnswerB*CorrectAwnser

如何拆分字符串以获得 Answer、AnswerA、AnswerB 和 CorrectAnswer？

这是我的代码的一部分。`getQuestion()`使用 getAnserA、getAnserB 和 getCorrectAnswer后我能做什么

```
try {
  InputStream is = context.getAssets().open(questionFile);
  BufferedReader reader = new BufferedReader(new InputStreamReader(is));
  // Skips lines
  for (int i = 0; i< questionCount; i++) {
    reader.readLine();
  }
  question = reader.readLine();
} catch (IOException e) {
  e.printStackTrace();
}

public String getQuestion() {
  return question.substring(0, question.indexOf("*"));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T16:46:52.237

使用[StringTokenizer](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/StringTokenizer.html)将字符串拆分为 n 个字符串。你需要通过分隔符。

例如

```
 String questiongString = "Question1*Question2*Question3";
     StringTokenizer splitter = new StringTokenizer(questionString, "*");
     while (splitter.hasMoreTokens()) {
              String question = splitter.nextToken();
       } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T16:46:54.223

你不需要 indexOf，String 有一个有用的 split 方法：

```
String[] parts = question.split("\\*");

String q = parts[0];
String answer = parts[1];
String answerA = parts[2];
String answerB = parts[3];
String correctAnswer = parts[4]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T16:48:30.910

```
int indexOfFirstStar = question.indexOf('*');
int indexOfSecondStar = question.indexOf('*', indexOfFirstStar + 1);
int indexOfThirdStar = question.indexOf('*', indexOfSecondStar + 1);
... 
```

一旦你有了所有的索引，你只需要使用子字符串。阅读[字符串 javadoc](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html)。

# zend-server - Zend 服务器 CE - 不会加载 .php 文件而是下载它

> ID：14539071
> 
> 赞同：1
> 
> 时间：2013-01-26T16:41:14.893
> 
> 标签：zend-server

我在 Windows 8 上安装了 Zend Server CE。当我尝试在浏览器中加载 .php 文件时，它不会加载，而是下载 php 文件。

我的服务器根目录是 C:\Program Files (x86)\Zend\Apache2\htdocs\

我在网上到处找，但没有文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T18:47:12.343

由于所有安全性，我建议不要将您的文档根放在程序文件中。在程序文件之外重新安装它，它可能/可能会起作用。

你如何调用文件？您不能在那里使用完整的 Windows 路径，即：c:\Zend\apache2\etc.. 但可能是 localhost/yourfile.php 或 127.0.0.1/yourfile.php。可以在localhost:100081打开zend的界面吗？

如果您很好地收到内部服务器错误，那么它会提供 php 文件。现在在 php.ini 中启用错误并找出可能是某个路径的错误。您收到一个 php 错误，它们被设置为不显示，因此您收到服务器错误。这确实意味着 php 文件由 apache 解析而不是下载。这个[问题](https://stackoverflow.com/questions/3905860/lamp-display-php-errors)在这里几乎有你需要配置的东西。

只记得你有 zend-framework 标签，这样你就可以在 application.ini 中检查错误处理设置。

# java - java.lang.NoClassDefFoundError: org/hamcrest/SelfDescribeing

> ID：14539072
> 
> 赞同：122
> 
> 时间：2013-01-26T16:41:16.407
> 
> 标签：java, eclipse, junit, noclassdeffounderror, hamcrest

在运行`junit`测试时，`eclipse`我得到了这个`Exception`：

```
java.lang.NoClassDefFoundError: org/hamcrest/SelfDescribing 
```

我添加了`junit.jar`库文件。

我试过不同版本的 junit.jar: `4.4`, `4.8`, 等等。

如何修复此异常？

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2013-09-28T08:14:36.813

添加`hamcrest-all-X.X.jar`到您的**类路径**。

截至 2015 年 2 月的最新版本是 1.3： [http ://code.google.com/p/hamcrest/downloads/detail?name=hamcrest-all-1.3.jar&can=2&q=](http://code.google.com/p/hamcrest/downloads/detail?name=hamcrest-all-1.3.jar&can=2&q=)

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2013-12-20T13:47:06.860

根据 JUnit GitHub 团队网站 ( [https://github.com/junit-team/junit/wiki/Download-and-Install](https://github.com/junit-team/junit/wiki/Download-and-Install) )，在使用 JUnit 4.11 时`junit.jar`，`hamcrest-core.jar`两者都需要在类路径中。

这是包含 junit 和 hamcrest 的 Maven 依赖块。

```
<dependency>
    <groupId>junit</groupId>
    <artifactId>junit</artifactId>
    <version>4.1.2</version>
    <scope>test</scope>
</dependency>
<!-- Needed by junit -->
<dependency>
    <groupId>org.hamcrest</groupId>
    <artifactId>hamcrest-all</artifactId>
    <version>1.3</version>
    <scope>test</scope>
</dependency> 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2013-06-23T10:36:39.150

您必须遵循以下几个步骤：

1.  右键单击项目。
2.  选择 Build Path 然后从其菜单中选择 Add Libraries。
3.  选择 JUnit，然后单击下一步。
4.  选择 JUnit4 然后完成。

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2014-04-09T22:29:35.560

适合我：IntelliJ IDEA 13.1.1、JUnit4、Java 6

我更改了项目路径中的文件：[PROJECT_NAME].iml

替换：

```
 <library>
    <CLASSES>
      <root url="jar://$APPLICATION_HOME_DIR$/lib/junit-4.11.jar!/" />
    </CLASSES>
    <JAVADOC />
    <SOURCES />
  </library> 
```

经过：

```
 <library name="JUnit4">
    <CLASSES>
      <root url="jar://$APPLICATION_HOME_DIR$/lib/junit-4.11.jar!/" />
      <root url="jar://$APPLICATION_HOME_DIR$/lib/hamcrest-core-1.3.jar!/" />
      <root url="jar://$APPLICATION_HOME_DIR$/lib/hamcrest-library-1.3.jar!/" />
    </CLASSES>
    <JAVADOC />
    <SOURCES />
  </library> 
```

所以最终的 .iml 文件是：

```
<?xml version="1.0" encoding="UTF-8"?>
<module type="JAVA_MODULE" version="4">
  <component name="NewModuleRootManager" inherit-compiler-output="true">
    <exclude-output />
    <content url="file://$MODULE_DIR$">
      <sourceFolder url="file://$MODULE_DIR$/src" isTestSource="false" />
      <sourceFolder url="file://$MODULE_DIR$/tests" isTestSource="true" />
    </content>
    <orderEntry type="inheritedJdk" />
    <orderEntry type="sourceFolder" forTests="false" />
    <orderEntry type="module-library">
      <library name="JUnit4">
        <CLASSES>
          <root url="jar://$APPLICATION_HOME_DIR$/lib/junit-4.11.jar!/" />
          <root url="jar://$APPLICATION_HOME_DIR$/lib/hamcrest-core-1.3.jar!/" />
          <root url="jar://$APPLICATION_HOME_DIR$/lib/hamcrest-library-1.3.jar!/" />
        </CLASSES>
        <JAVADOC />
        <SOURCES />
      </library>
    </orderEntry>
  </component>
</module> 
```

PS：保存文件，不要让 IntelliJ Idea 重新加载它。就一次。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-01-27T17:19:01.357

您需要 junit-dep.jar 因为 junit.jar 具有旧 Hamcrest 类的副本。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-10-28T11:08:35.463

万一有人在这里使用netbeans并且遇到同样的问题，你所要做的就是

*   右键单击测试库
*   点击添加库
*   选择 JUnit 并单击添加库
*   重复该过程，但这次单击 Hamcrest，然后单击添加库

这应该可以解决问题

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-07-28T16:44:17.700

您需要将 hamcrest-core JAR 添加到类路径中，如下所述：[https ://github.com/junit-team/junit4/wiki/Download-and-Install](https://github.com/junit-team/junit4/wiki/Download-and-Install)

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-06-08T02:18:58.487

这个问题是因为你的类路径错过了 hamcrest-core-1.3.jar。要解决此问题，请在将 junit-4.XX.jar 添加到类路径时添加 hamcrest-core-1.3.jar。

一开始我也遇到这个问题，但是参考[官网](https://github.com/junit-team/junit4/wiki/Getting-started)，用命令行将hamcrest-core-1.3.jar添加到classpath中后，终于可以正常使用了。

```
javac -d ../../../../bin/ -cp ~/libs/junit-4.12.jar:/home/limxtop/projects/algorithms/bin  MaxHeapTest.java 

java -cp ../../../../bin/:/home/limxtop/libs/junit-4.12.jar:/home/limxtop/libs/hamcrest-core-1.3.jar org.junit.runner.JUnitCore com.limxtop.heap.MaxHeapTest 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-01-27T17:42:21.960

作为一般规则，始终确保 hamcrest 在类路径上的任何其他测试库之前，因为许多此类库包含 hamcrest 类，因此可能与您正在使用的 hamcrest 版本冲突。这将解决您所描述类型的大多数问题。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2017-02-01T09:43:51.960

开始解决问题的最简单方法是将最新版本的 hamcrest-code.jar 复制到您的 CLASSPATH 中，这是您存储编译和运行应用程序所需的其他 .jar 文件的文件。

例如：C:/ant/lib

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-01-26T16:59:50.183

这听起来像是一个类路径问题，所以有几种不同的方法可以解决它。org/hamcret/SelfDescribeing 来自哪里？那是你的课还是在不同的罐子里？

尝试转到您的项目构建路径，然后在库选项卡上，添加一个库。您应该能够为您的项目选择 JUnit。这与在您的项目中仅包含 JUnit jar 文件有点不同。

在 JUnit 测试的运行配置中，检查类路径。您可以通过添加确保您的 Classpath 可以在那里看到 SelfDescribeing 类来解决此问题。Eclipse 中的 Run 选项为 JUnit 选项提供了一组不同的选项。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2013-09-12T14:19:20.190

如果在 RCP 项目中出现此问题，可能是因为已显式导入 JUnit。

检查`plugin.xml`下`Dependencies`选项卡的编辑器，`org.junit`从 Imported Packages 中删除并添加`org.junit`到 Required Plug-ins。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2020-10-18T20:36:04.540

**maven 存储库中可用的 hamcrest-core-1.3.jar 已弃用。**

`hamcrest-core-1.3.jar`从官方[Junit4 github 链接](https://github.com/junit-team/junit4/wiki/Getting-started)下载工作。如果要从 maven 存储库下载，请使用 latest `hamcrest-XX.jar`.

```
<dependency>
    <groupId>org.hamcrest</groupId>
    <artifactId>hamcrest</artifactId>
    <version>2.2</version>
    <scope>test</scope>
</dependency> 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2016-03-10T09:19:04.977

问题是当您将 eclipse 设置为指向**JRE**而不是**JDK**时。JRE`junit4.jar`在`lib/ext`文件夹中，但没有`hamcrest.jar`:) 所以解决方案是在 Eclipse 中检查已安装的 JRE，删除现有的 JRE，然后创建一个指向您的**JDK**的新 JRE 。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2019-05-21T06:05:59.017

有一个更好的答案来解决这个问题。添加依赖

```
<dependency>
    <groupId>org.hamcrest</groupId>
    <artifactId>hamcrest-all</artifactId>
    <version>1.3</version>
    <scope>test</scope>
</dependency> 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2018-02-22T00:44:16.600

当您通过命令行运行 Ant 时会发生这种情况。隐式用户依赖项添加到最后的类路径中，并优先于项目添加的类路径。运行带有**`-nouserlib`**标志的 Ant。隐式依赖项将从类路径中排除。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2013-09-17T22:01:54.997

我有同样的问题，解决方法是在jar org.hamcrest.core_1xx 中添加构建路径/插件，你可以在eclipse/plugins 中找到它。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2019-10-28T12:59:58.063

您必须遵循以下几个步骤：

*   右键单击项目。
*   选择构建路径，然后从其菜单中选择添加库。
*   选择 JUnit，然后单击下一步。
*   选择 JUnit4 然后完成。

这对我有用...

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2021-03-03T06:24:56.563

尝试手动添加 jar 文件或尝试使用最新的 hamcrest.jar 强制更新

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2021-02-18T18:47:11.913

“java.lang.SecurityException: class”org.hamcrest.Matchers“的签名者信息与同一个包中其他类的签名者信息不匹配”

这样做：右键单击您的包，单击 Build Path -> Configure Build Path 单击 Libraries 选项卡 Remove JUnit Apply 并关闭 Ready。

# tomcat - 在 /static/* 上下文中提供静态资源，同时保持我的 servlet 处理 /* 上下文

> ID：14539076
> 
> 赞同：2
> 
> 时间：2013-01-26T16:41:36.143
> 
> 标签：tomcat, servlets, servlet-container

我的问题很简单。我想让我的静态资源在`/static/*`上下文中服务，但我的特定 servlet 服务于`/*`上下文。因为`/static/*`是`/*`它的一个子集不起作用。我的 web.xml 看起来像这样：

```
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
 <display-name>template-guice-jersey-tomcat</display-name>
 <session-config>
     <session-timeout>30</session-timeout>
 </session-config>
 <welcome-file-list>
     <welcome-file>index.jsp</welcome-file>
 </welcome-file-list>

 <!-- set up Google Guice Servlet integration -->
 <filter>
    <filter-name>guiceFilter</filter-name>
    <filter-class>com.google.inject.servlet.GuiceFilter</filter-class>
 </filter>
 <filter-mapping>
    <filter-name>guiceFilter</filter-name>
    <url-pattern>/*</url-pattern>
 </filter-mapping>

 <servlet-mapping>                                                                                                                               
   <servlet-name>default</servlet-name>                                                                                                          
   <url-pattern>/static/*</url-pattern>                                                                                                          
 </servlet-mapping>                                                                                                                              

 <listener>                                                                                                                                      
     <listener-class>de.danbim.templateguicejerseytomcat.GuiceServletConfig</listener-class>                                                     
 </listener>                                                                                                                                     
</web-app> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T08:21:24.587

Here's very clean solution to this problem: [http://www.kuligowski.pl/java/rest-style-urls-and-url-mapping-for-static-content-apache-tomcat,5](http://www.kuligowski.pl/java/rest-style-urls-and-url-mapping-for-static-content-apache-tomcat,5):

> Unfortunately after looking into DefaultServlet source I found that DefaultServlet takes only pathInfo part of requested URL, so if your request is /static/styles.css, container translates it into /styles.css. Servlet part is omitted by the DefaultServlet. If you want to access such css file you should use /static/static/styles.css request url.
> 
> The simple solution of our problem is to write DefaultFilter class and place it at the beginning of web.xml file. This filter will forward all static content calls to DefaultServlet.

Define a filter which will dispatch the request to the default servlet:

```
public class DefaultFilter implements Filter {  

    private RequestDispatcher defaultRequestDispatcher;  

    @Override  
    public void destroy() {}  

    @Override  
    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain)   
          throws IOException, ServletException {  
        defaultRequestDispatcher.forward(request, response);  
    }  

    @Override  
    public void init(FilterConfig filterConfig) throws ServletException {  
        this.defaultRequestDispatcher =   
            filterConfig.getServletContext().getNamedDispatcher("default");  
    }  
} 
```

Add the filter (ahead of the other filters) to web.xml:

```
<filter>  
    <filter-name>default</filter-name>  
    <servlet-name>default</servlet-name>  
    <filter-class>pl.kuligowski.example.DefaultFilter</filter-class>  
</filter>  
<filter-mapping>  
    <filter-name>default</filter-name>  
    <url-pattern>/static/*</url-pattern>  
    <url-pattern>*.ico</url-pattern>  
</filter-mapping> 
```

> Only static content calls are matched to DefaultFilter, which simply breaks the filter chain and forwards the request to the DefaultServlet.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-08T01:19:51.193

对我来说，这适用于 Tomcat 8.5（我什至没有 web.xml 了）：

```
@WebServlet(urlPatterns = "/*")
public class MainServlet {}

@WebServlet(urlPatterns = { "/static/*", "/gwt/*" })
public class StaticServlet extends org.apache.catalina.servlets.DefaultServlet {} 
```

更具体的 url 模式似乎会自动获得优先权。要扩展 catalina 默认 servlet，请将`org.apache.tomcat > tomcat-catalina`具有范围的 maven 依赖项添加`provided`到您的项目中。

您可能（像我一样）会立即遇到这样的问题，即仅对应用程序上下文的请求在解析 html 中的相对路径时存在问题（例如，对于样式表和 javascripts）。

我通过主 servlet 中的重定向解决了这个问题：

```
 @Override
  protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    if(request.getPathInfo() == null) {
      // redirect http://localhost:8080/test -> http://localhost:8080/test/ (add trailing slash)
      // because only then are the relative paths to the gwt scripts correctly resolved
      getResponse().sendRedirect(getRequest().getContextPath() + "/");
      return;
    }

    //...
  } 
```

# c - 如果未释放 hostent 中的指针，gethostbyname_r 会泄漏内存吗？

> ID：14539077
> 
> 赞同：3
> 
> 时间：2013-01-26T16:41:42.223
> 
> 标签：c, linux, networking, posix, gethostbyaddr

的原型`gethostbyname_r`是：

```
int gethostbyname_r(const char *name,
    struct hostent *ret, char *buf, size_t buflen,
    struct hostent **result, int *h_errnop); 
```

为了避免不可重入`gethostbyname`，我写了这些东西：

```
int host2addr(const char *host, struct in_addr *addr) {
    struct hostent he, *result;
    int herr, ret, bufsz = 512;
    char *buff = NULL;
    do {
        char *new_buff = (char *)realloc(buff, bufsz);
        if (new_buff == NULL) {
            free(buff);
            return ENOMEM;
        }   
        buff = new_buff;
        ret = gethostbyname_r(host, &he, buff, bufsz, &result, &herr);
        bufsz *= 2;
    } while (ret == ERANGE);

    if (ret == 0 && result != NULL) 
        *addr = *(struct in_addr *)he.h_addr;
    else if (result != &he) 
        ret = herr;
    free(buff);
    return ret;
} 
```

这与[GNU 文档](http://www.gnu.org/software/libc/manual/html_node/Host-Names.html)中的示例以及 eglibc-2.15 中的`gethostname`.

但我注意到，有`h_name`, `h_aliases`,`h_addr_list`在 a `struct hostent`：

```
struct hostent {
   char  *h_name;            /* official name of host */
   char **h_aliases;         /* alias list */
   int    h_addrtype;        /* host address type */
   int    h_length;          /* length of address */
   char **h_addr_list;       /* list of addresses */
} 
```

因此，我想知道释放这些指针所指的内容是否真的无关紧要。是否有其他机制处理这些记忆？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T17:02:58.233

您应该打印出该结构中指针的值以找出问题的答案。您会发现它们都指向您分配的缓冲区内的数据。

因此，`free`您只需释放所有内存即可。

**但这**也意味着在您完成使用或复制您感兴趣的任何数据之前，您不得释放该分配。您在代码中释放得太早了。

# ruby-on-rails - Rails：“Where” - 具有多个参数的函数 - 安全格式

> ID：14539081
> 
> 赞同：-1
> 
> 时间：2013-01-26T16:41:57.763
> 
> 标签：ruby-on-rails, rails-activerecord

我有一个简单的问题：

我正在使用此查询来查找 ID 为 2、5 和 6 且附加参数为 false 的多个对象：

```
Reply.where(:event_id => [2, 5, 6], :looked_at => false) 
```

这非常有效，但我认为它在 SQL 注入方面确实不安全。我将如何将其重新格式化为更安全的查询？

我知道如何用一个参数来做到这一点，但是一旦我传入一个数组，它就不再起作用了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T17:14:34.543

`Reply.where(:event_id => untrusted_array, :looked_at => false)`是安全的。 `Reply.where("event_id IN (#{untrusted_array.join(','}) AND looked_at = FALSE")`不安全

> Ruby on Rails 有一个针对特殊 SQL 字符的内置过滤器，它将转义 ' 、 " 、 NULL 字符和换行符。使用 Model.find(id) 或 Model.find_by_some thing(something) 会自动应用此对策。但在 SQL片段，尤其是在条件片段（where("...")）、connection.execute() 或 Model.find_by_sql() 方法中，必须手动应用。

# c# - 在当前窗口中插入另一个项目

> ID：14539082
> 
> 赞同：0
> 
> 时间：2013-01-26T16:42:03.550
> 
> 标签：c#, wpf, plugins, reflection

我正在创建一个带有菜单的 WPF 应用程序，当单击 menuItem 时，我想在我的窗口（插件）中显示 NQueens（另一个项目）。我在我的 CurrentDirectory 中放置了一个 NQueens.dll 来使用。为了完成这项工作，我创建了一个程序集对象来加载类并创建了一个 Nqueens.Nqueen 实例并调用了这些方法。

NQueens 项目由一个类 NQueen.cs 和一个 MainWindow 组成。

```
namespace NQueens
{
public class NQueen
{
   public static bool berekenQueens(int Row, int N, bool[,] bord)
   {
       if (Row >= N) return true;  //stopconditie

       for (int Col = 0; Col < N; Col++)
       {
           //Q toevoegen
           bord[Row, Col] = true;

           //Q + Q volgende Row  controleren
           if (bordValidatie(Row, Col, bord, N) && berekenQueens(Row + 1, N, bord))
           {
               return true;
           }

           //Q verwijderen indien niet door controle
           bord[Row, Col] = false;

       }
       return false;
   }

   private static bool bordValidatie(int currentRow, int currentCol, bool[,] currentBord, int N)
   {
       int colstep = 1;
       for (int i = currentRow - 1; i >= 0; i--)
       {
           //rechte lijn 
           if (currentBord[i, currentCol])
               return false;

           //linker diagonaal
           if (currentCol - colstep >= 0)
           {
               if (currentBord[i, currentCol - colstep])
                   return false;
           }
           //rechter diagonaal
           if (currentCol + colstep < N)
           {
               if (currentBord[i, currentCol + colstep])
                   return false;
           }
           colstep += 1;
       }
       return true;
   }
}
} 
```

主窗口.xaml.cs

```
namespace NQueens
{
public partial class MainWindow : Window
{
    public int iN { get { return Convert.ToInt32(txtN.Text); } set { txtN.Text = "" + value; } }
    private bool[,] spelbord;

    public MainWindow()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {
        spelbord = new bool[iN, iN];
        NQueen.berekenQueens(0, iN, spelbord);

        visualise(iN, spelbord);
    }

    private void visualise(int N, bool[,] bord)
    {
        gridTekenen();

        for (int row = 0; row < N; row++)
        {
            for (int col = 0; col < N; col++)
            {
                Rectangle rect = new Rectangle();
                rect.Stretch = Stretch.Fill;

                TextBlock txtB = new TextBlock();

                if (spelbord[row, col])
                {
                    SolidColorBrush mySolidColorBrush = new SolidColorBrush();
                    mySolidColorBrush.Color = Colors.LightGreen;
                    rect.Fill = mySolidColorBrush;

                    txtB.Text = "Q";
                }

                rect.SetValue(Grid.ColumnProperty, col);
                rect.SetValue(Grid.RowProperty, row);

                txtB.SetValue(Grid.ColumnProperty, col);
                txtB.SetValue(Grid.RowProperty, row);

                gridPaneel.Children.Add(rect);
                gridPaneel.Children.Add(txtB);
            }
        }
    }

    private void gridTekenen()
    {
        gridPaneel.ShowGridLines = true;
        int grooteGrid = int.Parse(txtN.Text);

        RowDefinition rowDef;
        ColumnDefinition colDef;

        for (int i = 0; i < grooteGrid; i++)
        {
            rowDef = new RowDefinition();

            GridLengthConverter myGridLengthConverter = new GridLengthConverter();
            GridLength gl1 = (GridLength)myGridLengthConverter.ConvertFromString(150 + "*");
            rowDef.Height = gl1;

            colDef = new ColumnDefinition();
            colDef.Width = gl1;

            gridPaneel.RowDefinitions.Add(rowDef);
            gridPaneel.ColumnDefinitions.Add(colDef);
        }
    }
}
} 
```

单击 menuItem 时 WPF 应用程序中的代码。

```
private void MenuItem_Click(object sender, RoutedEventArgs e)
    {
        // Create an assembly object to load our classes
        string path = System.Environment.CurrentDirectory + "\\NQueens.dll";
        Assembly ass = Assembly.LoadFile(path);
        Console.WriteLine(path);

        Type objType = ass.GetType("NQueens.NQueen");

        // Create an instace of NQueens.NQueen
        var instance = Activator.CreateInstance(objType);

        // public static bool berekenQueens(int Row, int N, bool[,] bord)
        var result = objType.InvokeMember("berekenQueens",BindingFlags.InvokeMethod | BindingFlags.Static | BindingFlags.Public,
        null, instance, new object[] {   1, /* Row */ 1, /* N */ new bool[,] { {true,false} } /* bord */
        });

        // private static bool bordValidatie(int currentRow, int currentCol, bool[,] currentBord, int N)
        var result2 = objType.InvokeMember("bordValidatie", BindingFlags.InvokeMethod | BindingFlags.Static | BindingFlags.NonPublic,
        null, instance, new object[] {   1, /* Row */ 1, /* N */ new bool[,] { {true,false} } /* bord */, 1
        });
    } 
```

我不知道现在该怎么办。单击 menuItem 时，如何在当前窗口中显示 NQueen 程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T21:01:04.377

所以你应该实例化*NQueens.MainWindow*而不是*NQueens.NQueen*并调用*Show*方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T17:13:59.703

NQueen 类应该是任何一种 wpf 控件的后代。如果它是一个简单的类，它不能与它的容器通信。

# c# - 在 Windows Phone 8 中通过 NFC 设置手机铃声

> ID：14539084
> 
> 赞同：0
> 
> 时间：2013-01-26T16:42:16.473
> 
> 标签：c#, windows-phone-8, nfc

是否可以使用 Windows Phone 8 API 通过 NFC 关闭手机铃声或更好地设置自定义配置文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T23:41:02.323

这不是 WP8 的内置功能。您可以构建一个添加铃声的应用程序。首先，您需要为您的应用程序[创建一个自定义协议](http://www.developer.nokia.com/Community/Wiki/What%27s_new_in_Windows_Phone_8#App2app%3a_Custom_protocols)（例如“addRingtone://foo”）。接下来，您需要添加拦截该深层链接并调用[SaveRingTask](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh394008%28v=vs.105%29.aspx)。

# perl - 如何水平划分wxPanel？

> ID：14539087
> 
> 赞同：1
> 
> 时间：2013-01-26T16:42:47.813
> 
> 标签：perl, layout, wxwidgets, wxperl

我正在为控制台应用程序构建布局，[这](http://postimage.org/image/4hct8rd01/)就是我想要实现的目标。到目前为止我所拥有的是[这个](http://postimage.org/image/nsi56nv25/)。我的主窗口是从 wxFrame 派生的。我使用 wxSplitterWindow 将窗口拆分为两个窗口：左边的一个 - wxTreeCtrl，右边的一个是 wxPanel。我的问题是如何实现以下目标：一个水平列表（可能是一个网格？），它显示来自数据库的类似记录，但带有滚动，因此只显示 20-30，以及该表下方的简单文本区域（网格？）。

我试图拆分 wxPanel，就像我对 Frame 所做的那样，但它不起作用。当我尝试将面板更改为框架时，它可以工作，但框架是在新窗口中打开的。所以现在我要问要使用哪些元素以及如何定位它们，以便我有一个可滚动的表格、一条水平线，然后是一个简单的文本区域。水平线应位于左侧面板的中间。到目前为止，这是我的右侧面板代码： package RightPanel;

```
use strict;

use base qw(Wx::Panel);
use Wx qw(:everything);
sub new {
    my ($class, $parent_window) = @_;
my ($self) = $class->SUPER::new($parent_window);

    return $self;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T17:50:07.863

A`wxSplitterWindow`用于在运行时可以拆分和不拆分的窗口。文本编辑器通常具有这种功能，因此它们可以提供同一文档的两个独立视图。

我假设您总是希望框架中有三个独立的窗口？您应该简单地分别创建三个窗口并进行算术以对齐它们。听起来你想要一个`wxScrolledWindow`在顶部，一个`wxPanel`在底部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-16T21:28:35.457

为窗口创建一个带有 wxHORIZONTAL 标志的 BoxSizer。

在这个 BoxSizer 中，创建一个 Panel（您的左侧区域）和另一个 BoxSizer（带有 wxVERTICAL 标志）作为您的右侧区域。（上面的 wxHORIZONTAL 标志将把这两个并排放置）。

在右侧的 BoxSizer 中，创建一个 ScrolledWindow（顶部）和一个 Panel（底部）。右侧 BoxSizer 中的 wxVERTICAL 标志将垂直堆叠这些。

如果您以前从未玩过 Sizer，那么您很难理解它们......这可能会有所帮助： [Sizer and Layout](http://www.wxperl.it/p/sizers-and-layout.html)

# ember-data - 用于侧载修订版 11 的 ember-data 映射

> ID：14539088
> 
> 赞同：1
> 
> 时间：2013-01-26T16:43:00.013
> 
> 标签：ember-data

关于侧载，到修订版 11 ember-data 的映射发生了什么？

我有以下 2 个模型类：

```
WZ.Exercise = WZ.Model.extend
  name: DS.attr 'string'
  description: DS.attr 'string'
  group: DS.belongsTo('WZ.Group', {key: 'groups'})  #I don't think the key does anything

WZ.Group = WZ.Model.extend
  name: DS.attr 'string'
  exercises: DS.hasMany('WZ.Exercise') 
```

以前我在适配器上有一个映射属性，它似乎不再做任何事情：

```
WZ.Store = DS.Store.extend
  revision: 11
  adapter: DS.RESTAdapter.create
    bulkCommit: false
    mappings:
      groups: WZ.Group 
```

侧载代码期望侧载的根 json 属性与属性名称相同：

```
for (var prop in json) {
  if (!json.hasOwnProperty(prop)) { continue; }
  if (prop === root) { continue; }
  if (prop === this.configOption(type, 'meta')) { continue; }

  sideloadedType = type.typeForRelationship(prop); 
```

无论如何，我认为无法解决这个问题。要么 json 处于代码预期的状态，要么它将不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T20:34:23.423

这就是我侧载数据的方式：

```
DS.RESTAdapter.configure('App.Groups', {
    sideloadAs: 'groups'
});

App.Store = DS.Store.extend({   
    revision: 11,
    adapter: DS.RESTAdapter.create({})   
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T17:28:33.857

我遇到了类似的问题，并在 ember_data_example 项目中找到了为我解决的映射。就我而言，ticketEntries: hasMany('App.TicketEntry') 没有加载。

```
    // 准备我们的全局 Ember 数据“存储”
    App.RESTSerializer = DS.RESTSerializer.extend({
      初始化：函数（）{
        this._super();

        this.map('App.Ticket', {
          创建者：{嵌入：'always'}，
          ticketEntries：{嵌入：'always'}
        });
      }
    });

    App.Adapter = DS.RESTAdapter.extend({
      批量提交：假，
      序列化器：App.RESTSerializer.create()
    });

    App.Store = DS.Store.extend({
      修订：11，
      适配器：App.Adapter.create()
    });

    App.store = App.Store.create(
    );

```

# android - 不允许省电

> ID：14539089
> 
> 赞同：0
> 
> 时间：2013-01-26T16:43:01.740
> 
> 标签：android

> **可能重复：**
> [强制屏幕打开](https://stackoverflow.com/questions/2131948/force-screen-on)

当我的应用程序运行时，我需要阻止设备的保存电源。如果屏幕关闭没问题（我的应用程序是音频应用程序）。我阅读了有关电源管理器的信息，并发现了这一点（保持屏幕打开）。当我的应用程序运行时，如何禁止为设备省电？

```
getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T16:54:14.437

[正如文档](http://developer.android.com/reference/android/os/PowerManager.html)中所讨论的，[您](http://developer.android.com/reference/android/os/PowerManager.html)需要*小心*使用部分。当您的音频开始播放时它，当音频停止时它。`WakeLock`[`PowerManager`](http://developer.android.com/reference/android/os/PowerManager.html)`acquire()``release()`

# css - 无法操纵 Facebook Like 按钮的宽度

> ID：14539092
> 
> 赞同：0
> 
> 时间：2013-01-26T16:43:33.203
> 
> 标签：css, facebook, facebook-like, reflow

我有一个 200px 宽的侧边栏，我放在里面的 Facebook Like 按钮在 DIV 的边界之外运行。是否有任何解决方法可以让 Like 框文本识别 200px 标记并在需要时重排到新行上？

我正在使用此代码：http: [//jsfiddle.net/tKkpm/2/](http://jsfiddle.net/tKkpm/2/)

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
var js, fjs = d.getElementsByTagName(s)[0];
if (d.getElementById(id)) return;
js = d.createElement(s); js.id = id;
js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=437745402932329";
fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<div class="fb-like" data-href="http://www.facebook.com/google" data-send="false"
 width="200" data-show-faces="false"></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T17:08:51.877

我会把我的评论作为答案......

[Facebook Like Button 文档](https://developers.facebook.com/docs/reference/plugins/like/)指出最小宽度必须为 225 像素。

有时它可能少于此的原因是因为您可以使用*iframe*。尽管不完全支持较小的宽度，但它似乎确实有效！

```
<iframe src="//www.facebook.com/plugins/like.php?href=http%3A%2F%2Fwww.facebook.com%2Fgoogle&amp;send=false&amp;layout=standard&amp;width=200&amp;show_faces=false&amp;font&amp;colorscheme=light&amp;action=like&amp;height=35" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:200px; height:35px;" allowTransparency="true"></iframe> 
```

请注意，您必须在两个不同的位置设置宽度！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-12T13:10:49.237

类似框的宽度是个问题。我在 CSS 中使用了 overflow:hidden 以使其在[http://www.mineoppskrifter.no](http://www.mineoppskrifter.no)的左侧边栏中工作。这里的问题是图像被剪切了，但至少宽度还可以。

```
#sidebar-left .fb-like-box  {
width: 187px !important;
overflow:hidden;
} 
```

将#sidebar-left 更改为您的div 的名称。

# python - 用于 MIDI 到乐谱（注释）和/或音频翻译的纯 python 库

> ID：14539093
> 
> 赞同：3
> 
> 时间：2013-01-26T16:43:38.170
> 
> 标签：python, pygame, midi

我想要一些可以抽象出 midi 事件的东西，以提取/合成音符的音高/持续时间/动态/开始（例如，第 4 拍上响亮的 D# 四分音符）。

fluidsynth 和 timidity 工作，但我更喜欢纯 python 库。[我在这里](http://wiki.python.org/moin/PythonInMusic "这里")找不到除了绑定之外的任何东西。

midiutil 制作 midis 和 pygame 播放它们，但我想要一些既可以合成原始音频数据又可以量化音符的东西（即它们将在乐谱中表示，而不是作为 midi 事件/脉冲/“音高”/等）。

编辑这些并不完全这样做（不是在 python 中，或者太低级，或者“自己做”）：
[从 MIDI 文件获取音符数据](https://stackoverflow.com/questions/3660964/get-note-data-from-midi-file?rq=1)
[Python：midi 到音频流](https://stackoverflow.com/questions/4354963/python-midi-to-audio-stream)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T21:20:13.747

您可能想要的是一个称为“量化”的过程，它将 midi 事件与最接近的音符长度相匹配。

我在 C 1999 中编写了这样一个应用程序：

[http://www.findthatzipfile.com/search-3558240-hZIP/winrar-winzip-download-midi2tone.zip.htm](http://www.findthatzipfile.com/search-3558240-hZIP/winrar-winzip-download-midi2tone.zip.htm)

（我没有资源了，抱歉）

这个过程本身并不是很复杂。我只是蛮力强迫不同的音符长度来找到最接近的匹配。MIDI 事件音高本身直接映射到音符，因此不需要对话。

MIDI 格式本身并不是很复杂，所以我建议你找一个纯 Python 的 MIDI 阅读库，然后在上面应用算法。

[https://github.com/vishnubob/python-midi](https://github.com/vishnubob/python-midi)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T01:40:03.497

你试过明格斯吗？它与 py FluidSynth [http://code.google.com/p/mingus/wiki/tutorialFluidsynth](http://code.google.com/p/mingus/wiki/tutorialFluidsynth)

# mysql - 从可能有更多单词的列中选择第一个单词

> ID：14539095
> 
> 赞同：0
> 
> 时间：2013-01-26T16:43:50.980
> 
> 标签：mysql

可以说我有一个`table`简单的：

```
id    |    name
1     |    one_word
2     |    two words
3     |    here we have four 
```

所以，我想只获取包含一个单词的行，在上面的示例中，它只会记录为 id `2`。

我确实[阅读了文档](http://dev.mysql.com/doc/refman/5.1/en/pattern-matching.html)并尝试了各种版本：

```
SELECT * FROM `table` WHERE name REGEXP '(.*?)\s'; 
```

所以，请告诉我我在哪里做错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T16:59:38.023

如果您要从可能有更多单词的列中查找第一个单词，则可以使用[SUBSTRING_INDEX](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_substring-index)：

```
SELECT SUBSTRING_INDEX("here we have four", " ", 1) 
```

要提取没有空格的行，您可以使用以下示例：

*   `name NOT REGEXP '\s'`
*   `name NOT LIKE '% %'`
*   `LOCATE(' ', name) = 0`

如果您的列可以在字符串的开头或结尾包含空格，您也可以使用[TRIM](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_trim)：

```
SELECT SUBSTRING_INDEX(TRIM("  here we have four  "), " ", 1) 
```

*   `TRIM(name) NOT REGEXP '\s'`
*   `TRIM(name) NOT LIKE '% %'`
*   `LOCATE(' ', TRIM(name)) = 0`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T16:52:16.503

感谢草莓的评论，我想出了这个：

```
SELECT * FROM `table` WHERE name NOT REGEXP '\s' 
```

效果很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T16:55:02.800

那这个呢？在这两种情况下`LIKE '% %'`，`REGEXP`性能都很差。但我认为`LIKE`表现最差。

```
SELECT * FROM `table` WHERE name NOT LIKE '% %' 
```

# c# - 如何通过数据网格操作数据库

> ID：14539098
> 
> 赞同：0
> 
> 时间：2013-01-26T16:44:13.390
> 
> 标签：c#, database, datagrid

伙计们，这是我想出的，我不知道是什么问题不允许我更新数据库中的表

伙计们，我需要你的帮助我需要使用 c# 通过数据更新我的数据库`grid`，但我所能做的就是我能够看到我直接放入的 sql server 中的值。

```
string sConnectionString = "Data Source=localhost;Initial Catalog=ScratchCardSystem2;Integrated Security=True;pooling=true";
SqlConnection objConn = new SqlConnection(sConnectionString);
objConn.Open();
string query = "SELECT * FROM store_adj_note_detail_1";
SqlDataAdapter dAdapter = new SqlDataAdapter(query,objConn);
//dAdapter.SelectCommand= new SqlCommand(query, objConn);
SqlCommandBuilder cBuilder = new SqlCommandBuilder(dAdapter);
DataTable dTable = new DataTable();
//fill the DataTable
dAdapter.Fill(dTable);
dataGridView1.DataSource = dTable;

dAdapter.Update(dTable); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T16:59:08.180

```
 OleDbCommandBuilder commandBuilder = new OleDbCommandBuilder(dAdapter); 
```

不见了。MSDN 说：

```
//Without the OleDbCommandBuilder this line would fail.
dAdapter.Update(dTable); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T17:02:15.280

您缺少将 datagridview 绑定到数据表的内容。这里的诀窍是您需要一个 BindingSource。

在“//填充数据表”行之前添加以下内容

```
BindingSource bindSrc = new BindingSource(); 
```

然后更改您的 datagridview 的数据源并将源添加到您的绑定源，如下所示：

```
dataGridView1.DataSource = bindSrc;  
bindSrc.DataSource = dTable; 
```

编辑：我忘了提一件小事：要更新，您现在必须参考作为 bindingSrouce 来源的数据表，这就是我的做法：

```
dAdapter.Update((DataTable)bindSrc.DataSource); 
```

仅使用常规更新（dTable）可能有可能，但如果没有，这可能会修复它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T23:30:22.093

所以这基本上是我用于我自己的表单的。在建立连接时，连接打开，它用来自 store_adj_note_detail_1 的数据填充了我的 datagridview1。
~~请注意，我从未声明我的 bindingSource ......我也不知道原因，但我尝试与其他人（全局）和本地声明它，两者都使代码中断：/~~

BindingSource 的声明发生在表单的设计视图中 - 只需将其从表单顶部的工具箱中拖动，它就会显示为 FileDialogs 和 Menustrips 之类的图标。我个人只更改了 Name 属性，并没有添加任何事件。

它应该为您提供打开连接所需的一切概览，使用 bindingsource 链接您的 datagridview 和您的 dataTable，并更新您的数据库。

我通过编辑用于访问数据库的自己的代码获得了此代码，但 SQL 数据库的工作方式似乎完全相同，只是使用不同的实体（sqlDataAdapter 等而不是 OleDb ...）。

希望这对你有帮助！

```
public partial class FrmDatabaseConnection : Form
{
    // Connection, Adapter, DataTable, CommandBuilder, Bindingsource and command
    private SqlDataAdapter adap;
    private DataTable dataTable;
    private SqlCommandBuilder commandBuilder;
    private string sqlCommand = "SELECT * FROM store_adj_note_detail_1";
    private SqlConnection conDB = new SqlConnection();

    //To open connection and fill datagridview1
    private void establishConnection()
    {
        try
                {
                    conDB.ConnectionString = "Data Source=localhost;Initial Catalog=ScratchCardSystem2;Integrated Security=True;pooling=true";
                    conDB.Open();

                    // Set adapter, commandbuilder, datatable and bindingsource
                    adap = new SqlDataAdapter(sqlCommand, conDB.ConnectionString);
                    commandBuilder = new SqlCommandBuilder(adap);
                    bindSrc = new BindingSource();
                    dataTable = new DataTable();

                    // Fill it!
                    adap.Fill(dataTable);
                    dataGridView1.DataSource = bindSrc;
                    bindSrc.DataSource = dataTable;

                }
                catch (Exception ex)
                {
                    MessageBox.Show("Unable to Open database, " + ex.Message,);
                    conDB.Close();
                }

    }

    private bool saveToDatabase()
    {
        try
                {
                    adap.Update((DataTable)bindSrc.DataSource);
            }
        catch (Exception ex)
                {
                    MessageBox.Show("Unable to Update database, " + ex.Message);
                    return false;
                }

    }

} 
```

# search - SOLR - 优化搜索结果的相关性

> ID：14539101
> 
> 赞同：1
> 
> 时间：2013-01-26T16:44:25.150
> 
> 标签：search, optimization, solr, feedback

我知道我在问一个困难的问题，但未来属于大胆的人！

**问题：** SOLR 是否提供了一种方法来考虑过去的搜索和用户操作，以便下次完成相同的查询时，排名会稍微改变其他用户的选择？

**边问：**如何优化查询，使结果字段的长度更接近准确的查询，省略多余的词？

## 背景：

当用户搜索特定的葡萄酒（比如说：“chateau latour”）时，solr 总是首先给出错误的结果，例如：

1.  Château Triniac Côtes du Roussillon Villages Latour Latour de France
2.  Château Latour Beerenauslese 品牌 - 扬特维尔
3.  Château Latour Grand Vin - 波亚克
4.  Château Latour à Pomerol

## 应该是什么：

理想情况下，第 3 款酒应该是这个查询的第一个，因为超过 80% 的人在搜索这些词时会选择这个。搜索“chateau latour pomerol”的人肯定会选择第四个。

## 我对它的理解：

似乎第一名的排名很好，因为“Latour”的冗余是完全错误的。由于未知原因，第二名的排名高于第三名。搜索仅针对这些葡萄酒的标题，没有其他字段。

关于如何将用户过去对结果的行为反馈给 SOLR 的任何想法？谢谢！

*注意：在 boose 相关主题上工作和编程非常棒；）*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T22:39:25.470

> SOLR 是否提供了一种方法来考虑过去的搜索和用户操作，以便下次完成相同的查询时，排名会稍微改变其他用户的选择？

不是开箱即用。但是您可以做的是`popularity`定期注册这些选择并相应地更新文档（例如，有一个名为 的字段）。其余的就像[添加 boost](http://wiki.apache.org/solr/SolrRelevancyFAQ#How_can_I_change_the_score_of_a_document_based_on_the_.2Avalue.2A_of_a_field_.28say.2C_.22popularity.22.29)一样简单。

> 如何优化查询，使结果字段的长度更接近准确的查询，省略多余的词？

您需要将相似性算法从[默认 (TF-IDF)](https://builds.apache.org/job/Lucene-Artifacts-4.x/javadoc/core/org/apache/lucene/search/similarities/TFIDFSimilarity.html)更改为您的自定义算法。

> 当用户搜索特定的葡萄酒（比如说：“chateau latour”）时，solr 总是首先给出错误的结果，例如：
> 
> 1.  Château Triniac Côtes du Roussillon Villages Latour Latour de France
> 2.  Château Latour Beerenauslese 品牌 - 扬特维尔
> 3.  Château Latour Grand Vin - 波亚克
> 4.  Vin - Pauillac Château Latour à Pomerol

我手头没有 Solr，所以我[在 Lucene 中为您的场景建模](http://pastebin.com/GL1Yr7WH)，使用`StandardAnalyzer`. 我得到的顺序略有不同：在链接的示例中，结果是：4、1、2 和 3（最后两个得分相同）。你用的是哪款分析仪？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T05:36:22.993

```
how to optimise queries so that the length of the result field is closer to the exact query? 
```

该`omitNorms`字段是否设置为true？您可以设置`omitNorms=false`并尝试按什么顺序对结果进行排序吗？（我的猜测是 4、3、2、1。）[在此处](https://stackoverflow.com/questions/6830795/solr-what-are-the-benefits-of-length-normalization-omitnorms-false)查看@Mike 的答案。

# c# - 如何通过 Windows Phone 7 将数据传递给 Asp.net Web API

> ID：14539104
> 
> 赞同：3
> 
> 时间：2013-01-26T16:45:03.417
> 
> 标签：c#, windows-phone-7, asp.net-web-api, webclient, query-parameters

我想知道在使用 Windows Phone 7 和 asp.net web api 时如何来回发送数据？

我的 webapi 中有这个方法

```
public HttpResponseMessage Get(VerifyUserVm vm)
{
    if (ModelState.IsValid)
    {
        userService.ValidateUser(vm.Email);

        if (userService.ValidationDictionary.IsValid)
        {
            HttpResponseMessage reponse = Request.CreateResponse(HttpStatusCode.OK, userService.ValidationDictionary.ModelState["Success"]);
            return reponse;
        }
        else
        {
            return Request.CreateResponse(HttpStatusCode.BadRequest, userService.ValidationDictionary.ModelState);
        }
    }

    return Request.CreateErrorResponse(HttpStatusCode.BadRequest, ModelState);
}

public class VerifyUserVm
{
    [Required]
    public string Email { get; set; }
} 
```

和我的 WP7 中的这段代码

```
private void btnSignIn_Click(object sender, RoutedEventArgs e)
{
    string urlPath = String.Format(WebApiHelp.ApiUrl,"user","get");            
    UriBuilder uri = new UriBuilder(urlPath);
    uri.Query = "email=" + txtEmail.Text;
    webclient.OpenReadAsync(uri.Uri);
} 
```

得到的网址是这样的：`http://localhost:50570/api/user/get?email=c`

但 Vm 始终为空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T17:01:15.307

Web.Api 以会话方式绑定来自 URL 的简单参数（int、string 等）和来自请求正文的复杂类型（任何其他自定义类型）。

如果您想`VerifyUserVm`从 url 绑定复杂类型（例如：查询字符串），您需要使用以下注释来注释参数`FromUriAttribute`：

```
public HttpResponseMessage Get([FromUri]VerifyUserVm vm)
{
     //..
} 
```

还有一件事：属性的大小写应该匹配：

在您的 VM 中，您`Email`使用大写字母`E`，但发送`email`时使用小写字母`e`。

所以你需要像这样构建你的参数：

```
uri.Query = "Email=" + txtEmail.Text; 
```

进一步阅读：[WebAPI 如何进行参数绑定](http://blogs.msdn.com/b/jmstall/archive/2012/04/16/how-webapi-does-parameter-binding.aspx)

# xml - 表行颜色在列更改时更改，而不是每隔一行

> ID：14539105
> 
> 赞同：-1
> 
> 时间：2013-01-26T16:45:03.607
> 
> 标签：xml, xslt

使用 XSLT，每次`id`元素中的值更改时，我如何交替（2 种颜色）表中的行颜色。每隔一行交替很简单。不幸的是，当`for-each`过期时，变量超出范围。

这是我的xml：

```
<guests>
  <guest>
    <name>bob</name>
    <id>1</id>
  </guest>
  <guest>
    <name>tom</name>
    <id>2</id>
  </guest>
  <guest>
    <name>peter</name>
    <id>2</id>
  </guest>
  <guest>
    <name>jim</name>
    <id>4</id>
  </guest>
  <guest>
    <name>jake</name>
    <id>3</id>
  </guest>
  <guest>
    <name>dave</name>
    <id>3</id>
  </guest>
  <guest>
    <name>steve</name>
    <id>5</id>
  </guest>
  <guest>
    <name>joe</name>
    <id>5</id>
  </guest>
  <guest>
    <name>............</name>
    <id>...........</id>
  </guest>
</guests> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T17:03:25.173

XSLT 没有行、列或颜色。我猜你的意思是说你正在从这个 XML 生成一个 HTML 表，并且想要控制行颜色？请提供您到目前为止所做的事情以及为什么它不起作用，也许然后有人会看看它。如果您需要提示，您可以考虑在 id 更改时`class='changed-id'`向元素添加一个属性`tr`，您可以通过类似`@id != preceding:name/@id`. 然后在你的 CSS 中你可以做`.changed-id { color: pink; }`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T17:39:01.120

我认为分组是解决这个问题的好方法，例如：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" indent="yes"/>
  <xsl:key name="kGuest" match="guest" use="id"/>

    <xsl:template match="guests">
      <div>
        <xsl:apply-templates 
           select="guest[generate-id() = generate-id(key('kGuest', id)[1])]"
           mode="splitGroups" />
      </div>
    </xsl:template>

  <xsl:template match="guest" mode="splitGroups">
    <xsl:apply-templates select="key('kGuest', id)">
      <xsl:with-param name="class" 
                      select="concat('row-type', (position() - 1) mod 2 + 1)" />
    </xsl:apply-templates>
  </xsl:template>

  <xsl:template match="guest">
    <xsl:param name="class" />
    <div class="{$class}">
      <xsl:value-of select="concat(id, ' - ', name)" />
    </div>
  </xsl:template>
</xsl:stylesheet> 
```

在您的示例上运行时，这会产生：

```
<div>
  <div class="row-type1">1 - bob</div>
  <div class="row-type2">2 - tom</div>
  <div class="row-type2">2 - peter</div>
  <div class="row-type1">4 - jim</div>
  <div class="row-type2">3 - jake</div>
  <div class="row-type2">3 - dave</div>
  <div class="row-type1">5 - steve</div>
  <div class="row-type1">5 - joe</div>
  <div class="row-type2">........... - ............</div>
</div> 
```

如您所见，在 id 更改为新值`class`之间`type1`以及何时切换。`type2`

# tomcat - 在 Mac 上的 Xampp 中在何处以及如何安装 Tomcat

> ID：14539106
> 
> 赞同：2
> 
> 时间：2013-01-26T16:45:05.080
> 
> 标签：tomcat, xampp

我已经在我的计算机上安装了 Mac 版本的 xampp，现在还想安装 Tomcat 以在沙箱中运行 Java 应用程序。谁能帮我在 Xampp 中安装？我找不到任何文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-04T17:35:07.637

Tomcat 仍然不是 OSX 的 XAMPP 包的一部分。该软件包仅包括 Apache、FTP (ProFTPD) 和 MySQL。

[您可以从http://tomcat.apache.org/download-80.cgi](http://tomcat.apache.org/download-80.cgi)下载 Tomcat 。设置说明：[https](https://tomcat.apache.org/tomcat-8.0-doc/setup.html) ://tomcat.apache.org/tomcat-8.0-doc/setup.html 。OSX 特定安装方法：[https ://wolfpaulus.com/jounal/mac/tomcat8/](https://wolfpaulus.com/jounal/mac/tomcat8/)

# bash - linux算术表达式

> ID：14539107
> 
> 赞同：-1
> 
> 时间：2013-01-26T16:45:10.800
> 
> 标签：bash, awk

使用包含的文本文件

> aa bb,bb dd,cc dd,dd dd,0,5

我执行

```
 y=$(awk -F"," -v pt=$test pe=$test1 '{if($1==pt && $2==pa) print $5}' alpha.txt)
 x=$(awk -F"," -v pt=$test pe=$test1 '{if($1==pt && $2==pa) print $6}' alpha.txt)
 add=$((x + var))
 add1=$((y + var)) 
```

一个错误说

> expr：非整数参数

对于 $add 并且只有 $add1 可以工作。我回显 x 并发现它包含该值，但是当我添加“A”来测试输出时，我发现只显示了 A。当我在文本中添加 1 个字段时

> aa bb,bb dd,cc dd,dd dd,0,5,6

它适用于所有人。所以我决定在我的文本文件的最后一列中再添加 1 列字段，使用

```
awk -F"," '{$(NF+1)=++i;}1' OFS ="," alpha.txt 
```

但似乎没有添加任何内容。谁能指出原因或为我提供一些更好的方法来实现我的需要？非常感谢。我怀疑这可能是由于在没有分隔符的情况下提取了 6 美元。我正在尝试使用我的 $var 将我的 0 增加到 3 和 5 到 8。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T12:23:18.473

建立@steve 的代码，试试这个：

```
y=$(awk -F, -v pt="$test" -v pe="$test1" '{print ($1==pt && $2==pe) ? $5 : 0}' alpha.txt)
x=$(awk -F, -v pt="$test" -v pe="$test1" '{print ($1==pt && $2==pe) ? $6 : 0}' alpha.txt)
add=$((x + var))
add1=$((y + var)) 
```

因为我认为您的问题只是 x 和 y 有时未设置，而且您设置了“pe”但测试了“pa”。

我假设 var 在您的代码前面设置为某个整数值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T09:20:51.737

我怀疑（尽管我不能肯定地说，因为您没有说明或给出`pt`,`pe`和的值的示例`var`）但我认为您面临的问题涉及引用传递给`awk`. 我还对您的代码进行了一些清理，使其看起来更加笨拙。以下内容当然未经测试，但它应该适合您：

```
y=$(awk -F, -v pt="$test" -v pe="$test1" '$1==pt && $2==pa { print $5 }' alpha.txt)
x=$(awk -F, -v pt="$test" -v pe="$test1" '$1==pt && $2==pa { print $6 }' alpha.txt) 
```

`echo "$y"`和的结果是`echo "$x"`什么？错误信息是什么？

# jquery - 向用户提供文件

> ID：14539111
> 
> 赞同：0
> 
> 时间：2013-01-26T16:45:29.293
> 
> 标签：jquery, file

我有以下代码：

```
$.post("./test.php", {
    record:id,
    opt:'code'
  },
  function(data){$('#div').html('').queue(function() {
    $('#div').html(data).dequeue();
  });
}); 
```

`data`返回文件名，例如“test.xlx”。如何将此文件提供给用户？

**算法：**

1.  用户点击按钮；

2.  函数生成文件（示例 test.xlx）；

3.  创建文件时，将文件下载到用户的计算机；

4.  结束。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T00:26:00.367

要将 charlietfl 的建议与您的代码集成：

```
$.post("./test.php", {
    record:id,
    opt:'code'
  },
  function(data){
      window.location=data;
  });
}); 
```

试试看！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T17:45:02.823

尝试这个：

```
window.location=data; 
```

将重定向到 url，因为是下载应该强制下载而不是离开页面

# visual-studio - Zen 编码支持 Web Essentials 2012 for Visual Studio 中的 CSS

> ID：14539119
> 
> 赞同：4
> 
> 时间：2013-01-26T16:46:21.333
> 
> 标签：visual-studio, emmet, web-essentials

我已经为 VS2012 安装了 Web Essentials 2012。但它似乎不支持 css 的 zen 编码？还是我错过了什么？请帮忙..谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T21:09:32.663

Web Essentials 仅支持 ZenCoding for HTML。由于 CSS 编辑器丰富的智能感知和片段支持，我决定等待 CSS 实现。他们很可能会与 ZenCoding 发生冲突

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-30T15:59:35.360

这是一个尝试的示例：

```
h1{Good Example}#test.classname+#sibling1{div sibling1 text}+#sibling2{div sibling2 text}+h2{header2 text}+ul>li>a[href="http://stackoverflow.com"]{stackoverflow link}^li>a[href="http://codeproject.com"]{codeproject link} 
```

**按 [TAB] 键展开**

输入示例后记得按 [tab] 键，将 zen 代码扩展为真正的 HTML。

上面的示例将扩展为以下内容：

![Zen代码扩展html视图](../Images/e41ed7296faf4daf73e6d4f436583ea4.png)

它将在浏览器中呈现如下所示：

![Zen 代码 html 渲染视图](../Images/08179007e069ebd17144d4c582386003.png)

# html - 如何在窗口调整大小时清除绝对定位的项目？

> ID：14539120
> 
> 赞同：0
> 
> 时间：2013-01-26T16:46:23.107
> 
> 标签：html, css, window-resize

因此，默认情况下，如果调整窗口大小，绝对定位的 div 将不在视野范围内，但只有 div 的左侧。是否有可能达到同样的效果？

我的意思可以在这里找到：http: [//diabetes.connectionsquad.com](http://diabetes.connectionsquad.com)

如果您将浏览器窗口的大小调整为低于 1010 像素，您会注意到导航栏的左侧消失了，但如果您向右滚动，导航栏的右侧将保持原位。

基本上我有设置为 1000px 的内容 div。我的导航栏是 1050，它以绝对位置居中在该内容 div 中，因此它在每边 25px 的内容 div 上方悬挂。当浏览器大小低于 1050 像素时，我希望 25 像素的区域折叠并且不可见。默认情况下，浏览器在左侧执行此操作，但不在右侧执行此操作。

您可以像清除左侧一样清除右侧吗？我试着研究它，但我得到了一堆垃圾，因为搜索词被歪曲了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T17:27:04.613

你的布局不需要任何绝对定位，它会让你头疼。

您可以使用灵活的外边距或外边距，而不是在中心使用固定宽度的 div。

```
/*Mobile*/
.outermargin {padding:0% 0% }

    /*Screen*/
    @media only screen
    and (min-width : 700px) {
        .outermargin { padding: 0% 7%; }
    }
    @media only screen
    and (min-width : 1400px) {
        .outermargin { padding: 0% 20%; }
    } 
```

根据您的需要使用边距或填充... 这种 CSS 结构是一种在您习惯后变得更加流畅和轻松的方法。

或者您可以使用以下方式将其全部居中：

```
 #mycontainer { 
       margin: 0 auto; max-width:30em; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T17:03:53.487

通过“视野之外”，我认为您的意思是超出了*您*设定的内容宽度。

看看负面定位。**左：-20px；右：-20px**

```
 <style type="text/css">
   div { position:absolute; left:-20px; right:-20px }
 </style> 
```

希望有所帮助，

抢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T16:52:59.580

我在 Chrome 上看不到问题。但是，您没有设置`top`or `left`，它默认为顶部和左侧的 0,0，因此它附加到其相对父级的左上角。如果你想让它附在右上角，你可以给它

```
right: 0;
top: 0; /* Don't need this, it's the default; 
```

# javascript - 在一些 jQuery.ajax 执行后执行 Angular JS 代码

> ID：14539125
> 
> 赞同：0
> 
> 时间：2013-01-26T16:47:02.033
> 
> 标签：javascript, jquery, ajax, angularjs

我想用一些 jQuery ajax 调用返回的数据更新 Angular 范围。我想从 Angular 外部调用 Ajax 的原因是 a) 我希望调用尽快返回，因此它甚至应该在 document.ready 之前开始 b) 有多个调用为多个初始化一个复杂模型-页面网络应用程序；这些调用之间存在依赖关系，我不想在多个 Angular 控制器中复制任何逻辑。

这是来自控制器的一些代码。请注意，代码稍微简化以适合此处。

```
$scope.character = {};
$scope.attributeArray = [];
$scope.skillArray = []; 
```

这样做的原因是角色的属性和技能以对象的形式出现，但我使用 ng-repeat 显示它们，所以我需要它们作为数组。

```
$scope.$watch('character',function(){
  $scope.attributeArray = getAttributeArray($scope.character);
  $scope.skillArray = getSkillArray($scope.character);
}); 
```

理论上，当 $scope.character 发生变化时，这段代码会更新这两个数组。现在是困难的部分。我尝试以两种方式更新 $scope.character ：

```
characterRequestNotifier.done(function() { // this is a jQuery deferred object
  $scope.$apply(function(){ // otherwise it's happening outside the Angular world
    $scope.character = CharacterRepository[characterId]; // initialized in the jquery ajax call's return function
  });
}); 
```

这有时会导致`$digest is already in progress`错误。第二个版本使用我编写的服务：

```
repository.getCharacterById($routeParams.characterId, function(character){
  $scope.character = character;
}); 
```

， 在哪里

```
.factory('repository', function(){
  return {
    getCharacterById : function(characterId, successFunction){
      characterRequestNotifier.done(function(){
        successFunction( CharacterRepository[characterId] );
      });
    }
  };
}); 
```

这并不总是触发 $watch。

所以最后，问题是：我怎样才能完成这项任务（没有我无法识别来源的随机错误）？我的方法有什么根本错误吗？

编辑：

在这里试试这个 jsfiddle：http: [//jsfiddle.net/cKPMy/3/](http://jsfiddle.net/cKPMy/3/) 这是我的代码的简化版本。有趣的是，当 deferred 被解决时，它永远不会触发 $watch。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T17:06:49.010

It is possible to check whether or not it is safe to call $apply by checking `$scope.$$phase`. If it returns something truthy--e.g. `'$apply'` or `'$digest'`--wrapping your code in the `$apply` call will result in that error message.

Personally I would go with your second approach, but use the `$q` service--AngularJS's promise implementation.

```
.factory('repository', function ($q) {
  return {
    getCharacterById : function (characterId) {
      var deferred = $q.defer();

      characterRequestNotifier.done(function () {
        deferred.resolve(CharacterRepository[characterId]);
      });

      return deferred.promise;
    }
  };
}); 
```

Since AngularJS has native support for this promise implementation it means you can change your code to:

```
$scope.character = repository.getCharacterById(characterId); 
```

When the AJAX call is done, the promise is resolved and AngularJS will automatically take care of the bindings, trigger the `$watch` etc.

**Edit after fiddle was added**

Since the jQuery promise is used inside the service, Angular has no way of knowing when that promise is resolved. To fix it you need to wrap the resolve in an `$apply` call. [Updated fiddle](http://jsfiddle.net/cKPMy/4/). This solves the fiddle, I hope it solves your real problem too.

# ssrs-2008 - 直接报告的内存不足异常

> ID：14539128
> 
> 赞同：3
> 
> 时间：2013-01-26T16:47:25.953
> 
> 标签：ssrs-2008, reporting-services, reportingservices-2005

我正在尝试运行 SSRS 报告。这是一个简单的报告，只是为了呈现大约 80K 记录的表中的数据。

报表中不进行聚合或数据处理。大约有 50 列以及 19 个报告参数。我只需在报告中显示这 50 列（无数据透视表）。

通常在我们的开发服务器上呈现此报告大约需要 5 分钟（非高峰时段）。我们的生产服务器也是如此，但是用户经常遇到“内存不足”异常，并且报告参数标准没有被使用（这是我从用户那里得到的抱怨）。

尽管渲染需要很长时间，但我可以毫无问题地在本地过滤条件。

1.  即使报告很简单，为什么要花这么长时间来呈现报告？

2.  当我在 VS 2008 上按 F5 时，报告运行良好，但是当我点击“预览”选项卡时，有时会出现内存不足的异常。

3.  某些列的名称带有“#”字符。如果我在报告中包含此类列，则会引发“内存不足异常”（尤其是在预览模式下）。这是真的吗：SSRS 不喜欢带有“#”的列名吗？例如，我的列名是“KLN#”。

4.  我在表上创建了一个非聚集索引，但这对我没有多大帮助。

5.  在预览模式下运行报告与在 VS 2008 上按 F5 有什么区别？按F5虽然需要5分钟也没问题，但是预览模式有问题。

重新设计的空间不大（因为它是一个直截了当的报告），也许我只能删除报告参数。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-05-10T14:58:25.610

除了已经发布的答案以及关于报表设计器或报表管理器中的预览问题之外，还有另一种可能的解决方案：避免在第一个报表页面上显示过多数据！

它可以通过分页到小记录量来完成，即通过带有分页符的自定义组或有时自动（参见 done_merson 的答案）或通过添加简单的封面页来完成。这些解决方案在开发阶段特别有用，如果您打算将报告结果呈现为 Excel 或 PDF。

我有一个类似的情况，内存不足异常，并且从不返回带有简单报告及其包含大约 70k 记录的数据集的报告。该查询在大约 1-2 分钟内执行，但报表设计器和我们的开发 SSRS 2008R2 服务器（报表管理器）都无法显示生成的报表预览。最后，我怀疑 HTML 预览是瓶颈，并通过添加带有简单文本框的封面来避免它。下一个报表执行大约需要 2 分钟，并成功显示了带有封面的 HTML 预览。将完整的结果呈现到 Excel 只需要 30 秒。

希望这对其他人有所帮助，因为如果您搜索 SSRS 内存不足异常，此页面仍然是热门帖子之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T15:14:29.213

> 为什么渲染需要这么长时间...？
> 我在表上创建了一个非聚集索引，但这对我没有多大帮助。

因为（AFAIK）SSRS 将在呈现之前构建报表的内存模型。知道 SSRS 将采取三个步骤来创建报告：

1.  检索数据。
2.  通过组合报告和数据来创建内部模型。
3.  将报告呈现为适当的格式（预览、html、xls 等）

您可以检查[ExecutionLog2 视图](http://blogs.msdn.com/b/robertbruckner/archive/2009/01/05/executionlog2-view.aspx)以查看每个步骤需要多少时间。第 1 步可能已经相当快（几秒钟），所以添加的索引并没有解决瓶颈。可能第 2 步和第 3 步会花费大量时间，并且需要大量 RAM。

> SSRS 不喜欢带有#?? 的列名 我的专栏名称是 KLN#。

据我所知，这应该不是问题。更有可能删除该列*足以*使报告再次运行。

> 没有什么需要重新设计的（因为它是一个直接的报告），例如我可以删除报告参数。

SSRS 并不是解决此问题的正确工具。因此，您的问题没有真正的“解决方案”，只有替代方案和解决方法。

**解决方法：**

*   正如@glh 在他的回答中提到的那样，为 SSRS 提供更多 RAM 可能“有帮助”。
*   要求用户使用参数过滤数据（即不允许用户选择*所有*这些行，只选择他需要的行）。
*   在安静的时刻（当有足够的可用 RAM 时）安排报告并[缓存报告](http://msdn.microsoft.com/en-us/library/ms155927.aspx)。

**备择方案：**

*   创建一个从数据库读取并输出 Excel 的小型自定义应用程序。
*   使用[SSIS](http://msdn.microsoft.com/en-us/library/ms141026.aspx)，它（我认为）更适合这种任务（数据转换和迁移）。
*   重新考虑您的设置。你没有提到你的报告的上下文，但也许你有一个[XY 问题](https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem)。也许您的用户想要整个报告但只需要几个关键行，或者他们只将其用作备份机制（有更好的选择），或者......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T12:01:07.983

尝试增加你的内存，看到这个帖子类似的错误：

[需要 SSRS 矩阵来显示超过 40 万条记录](https://stackoverflow.com/q/14169095/1685810)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-28T21:23:14.267

我们刚刚遇到了类似的情况，并将 Tablix 属性/常规/分页选项中的“如果可能的话保持在一页上”选项设置为关闭，并且效果很好。

# cocoa - 山狮分享菜单

> ID：14539130
> 
> 赞同：3
> 
> 时间：2013-01-26T16:47:54.970
> 
> 标签：cocoa, osx-mountain-lion

与[可以使用 NSSharingServicePicker 创建的共享按钮](https://stackoverflow.com/questions/11815077/how-to-show-the-share-button-in-mountain-lion)类似，是否可以像在 Safari 中那样拥有共享菜单 -![显示 Safari 共享菜单的图像](../Images/cfdaee0f1fa475dcf4cb88e4ac731c46.png)在我自己的应用程序中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T17:53:13.247

几秒钟的谷歌搜索产生了这个：

`NSArray *sharingServices = [NSSharingService sharingServicesForItems:items];`

...然后您可以浏览每个服务并为它们构建菜单项。取自[此代码示例](https://gist.github.com/4132533)。

# r - R数据表：遍历/比较行

> ID：14539134
> 
> 赞同：2
> 
> 时间：2013-01-26T16:48:16.580
> 
> 标签：r, data.table

我正在使用 R 中的大型数据表，并尝试遍历整个表并根据单独列中*前一行的值设置给定列中的行值。*

我试图在一个有 200K 行的表上运行这个循环，它的移动非常缓慢。我怀疑我没有利用所有 data.table 的效率，但不知道我可以在哪里改进。

我的代码在下面。我的表是“DATA”，我的键是“x”和“y”列，我试图遍历所有行并将第 6 列中的行的值设置为 1 ，前提*是*该行在第 2 列中的值不是等于第 2 列中前一行的值。

```
setkey(DATA,x,y)
for (i in 2:nrow(DATA)) {

    if (DATA[i,2]!=DATA[i-1,2]){
        DATA[i, 6] = 1
    }

} 
```

同样，这有效，但对于大型表来说非常慢。任何帮助将不胜感激 - 谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-26T16:55:18.727

在没有看到数据的情况下，这是一个刺（不使用`data.table`）：

```
DATA[c(0, diff(DATA[,2]))!=0, 6] <- 1 
```

如果第一行被认为“不相等”：

```
DATA[c(1, diff(DATA[,2]))!=0, 6] <- 1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-26T16:55:24.867

想想向量，而不是循环：

```
DATA[,6] <- c(0,as.numeric(diff(DATA[,2]) != 0)) 
```

我在第一行放了 0，因为我不知道该放什么，但如果更合适，您可以将其更改为其他内容。

# jquery - 蒙面 div 上的 jQuery mousemove 处理程序

> ID：14539135
> 
> 赞同：1
> 
> 时间：2013-01-26T16:48:18.323
> 
> 标签：jquery, mouseover, mask, mousemove, mouseenter

这是我的 HTML：

```
<div id="one"><div id="element1"></div></div>
<div id="two">some stuff</div> 
```

div`one`和`two`是相同宽度和高度的矩形

这是CSS：

```
#one { position: relative; width: 390px; height: 482px; }
#two { position: relative; z-index: 100; top: -482px; width: 390px; height: 482px; } 
```

如您所见， div`two`位于`one`用作遮罩的 div 上方

我需要做这样的事情：

```
$('#element1').mouseover(function(e){ alert('Hello') }); 
```

我`mousemove`在 div上使用并`two`检查鼠标位置是否介于（相对于父 div ）和.`x``x + width``element1``one``y`

该解决方案有效，但当我申请时出现`-webkit-transform:rotate(45deg);`问题`element1`

我是新手，无法发布图片，但很容易理解`mousemove`on div处理的区域在旋转时`two`与 div 不对应。`element1`

我怎么知道鼠标何时移到上面`element1`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T17:29:35.927

基本上你的问题是 div`two`覆盖了另一个元素，不允许在被覆盖的元素中注册任何事件。

您可以通过将 CSS`pointer-events:none;`应用于 div`two`以允许在 div 下方注册事件来解决此问题。

* * *

[**演示**](http://jsfiddle.net/Wmdkh/)-`pointer-events:none;`在 div 上`two`

* * *

DEMO 使用您发布的确切代码，并添加以下视觉表示和旋转：

```
#one{
    border: 1px solid red;
}

#element1{
    background-color: blue;
    border: 1px solid blue;
    transform:rotate(45deg);
    -webkit-transform:rotate(45deg);
    -ms-transform:rotate(45deg);
    -moz-transform:rotate(45deg);
    height: 5px;
} 
```

并且 CSS 更改为`#two`：

```
#two { 
    position: relative; 
    pointer-events:none; 
    z-index: 100; 
    top: -482px; 
    width: 390px; 
    height: 482px; 
} 
```

# c - 在linux中读取字符设备

> ID：14539136
> 
> 赞同：1
> 
> 时间：2013-01-26T16:48:19.167
> 
> 标签：c, linux, character, linux-device-driver, device-driver

我在终端中通过键入 cat /dev/hidraw0 读取设备文件 /dev/hidraw0 ，因为 hidraw0 是 USB 鼠标，输出是一系列字符。这个序列是在我移动鼠标、单击和滚动时生成的。

然后我还用 C 程序尝试了这个。代码是，

```
include<stdio.h>

    int main()
    {
            FILE *ptr_file;
            char buf[1000];

            ptr_file =fopen("/dev/hidraw0","r");
            if (!ptr_file)
                return 1;

            char c;
            while (1)
            {
                c=fgetc(ptr_file);
                if(c != NULL)
                    printf("%c",c);
                else
                    printf(""); 
            }           

        fclose(ptr_file);
            return 0;
    } 
```

这也产生了相同的（我想）字符序列。但是以非常异步的方式。它没有像 cat /dev/hidraw0 命令那样快速更新。

为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T16:53:56.233

尝试通过调用with来禁用`ptr_file`缓冲。[`setvbuf()`](http://www.cplusplus.com/reference/cstdio/setvbuf/)`_IONBF`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T17:58:58.497

如果您在 printf, 之后刷新标准输出是否有帮助`fflush(stdout);`？

# achartengine - 线程中的 AChartEngine

> ID：14539139
> 
> 赞同：2
> 
> 时间：2013-01-26T16:48:47.320
> 
> 标签：achartengine

我在我的项目中使用 AChartengine。我正在显示带有数据库数据的用户图表。我实际上使用的是 1.0.0 版本的 AChartEngine。

我想将我的应用程序中的显示图表功能更改为线程。

一切正常，但是......我有一个问题。可运行线程显示的图表没有缩放的可能性。

在处理程序上，我检查了 GraphicalView 是否已启用。它是。我尝试了很多选择。这是 AChartEngine 的问题吗？

我正在使用这个渲染器选项：

```
 renderer.setXLabels(7);
        renderer.setYLabels(10);
        renderer.setLegendHeight(60);
        renderer.setShowGrid(true);
        renderer.setXLabelsAlign(Align.CENTER);
        renderer.setYLabelsAlign(Align.RIGHT);
        renderer.setZoomButtonsVisible(false);
        renderer.setZoomEnabled(true);
        renderer.setExternalZoomEnabled(true);
        renderer.setApplyBackgroundColor(true);
        renderer.setBackgroundColor(Color.WHITE);
        renderer.setLabelsColor(Color.BLACK);
        renderer.setMarginsColor(Color.WHITE);
        renderer.setChartTitle("");
        renderer.setMargins(new int[] { 15, AChartMarginLeft, 20, 15 });
        renderer.setPanLimits(new double[] { x.get(0)[0].getTime(),
                x.get(0)[(ileC - 1)].getTime() + (1 * 24 * 60 * 60 * 1000),
                minvalY, maxY });
        renderer.setZoomLimits(new double[] { x.get(0)[0].getTime(),
                x.get(0)[(ileC - 1)].getTime() + (1 * 24 * 60 * 60 * 1000),
                minvalY, maxY });
        renderer.setPointSize(4);
        renderer.setShowAxes(false);
        renderer.setAxisTitleTextSize(AChartAxisTitleTextSize);
        renderer.setLabelsTextSize(AChartsetLabelsTextSize);
        renderer.setLegendTextSize(AChartsetLegendTextSize); 
```

因此启用了缩放。

处理程序中的 mChartView 显示 mChartView 已启用缩放。

```
 private final Handler myHandler = new Handler();

final Runnable updateRunnable = new Runnable() {
    public void run() {
        Log.d("updateRunnable","RUNNABLE");
        if (mRenderer.isZoomEnabled()) { 
        Log.d("ZOOM ENABLED","ENABLED");
        } else {
            Log.d("NO","NO ZOOMING");

        }
    }
}; 
```

**解决方案**

*编辑：*

我找到了我的问题的答案。我尝试了很多东西。这不是缩放/平移边距。我将这部分从线程移动到处理程序，现在缩放工作。如果这部分在线程中，图表还可以，但就像我说的那样，缩放不起作用。

```
mChartView = ChartFactory.getBarChartView(getApplicationContext(),
          ChartFunctions.buildBarDataset(titles, values), 
              renderer,type.DEFAULT); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T16:58:41.717

您正在设置一些缩放限制，这些限制似乎正是您的图表值范围。这意味着您不能在该范围之外进行缩放。

# performance - 证明平衡二叉搜索树的高度为 log(n)

> ID：14539141
> 
> 赞同：23
> 
> 时间：2013-01-26T16:48:55.230
> 
> 标签：performance, tree, binary-search-tree

二进制搜索算法需要 log(n) 时间，因为树的高度（具有 n 个节点）将是 log(n)。

你将如何证明这一点？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-12-21T06:15:04.167

现在在这里我不给出数学证明。尝试使用 log to base 2 来理解问题。 Log [2]是计算机科学中 log 的正常含义。

首先，了解它是二进制对数（log [2] n）（以 2 为底的对数）。例如，

*   1的二进制对数为0
*   2的二进制对数是1
*   3的二进制对数是1
*   4的二进制对数是2
*   5、6、7的二进制对数是2
*   8-15的二进制对数是3
*   16-31的二进制对数为4，以此类推。

对于每个高度，完全平衡树中的节点数为

```
    高度节点日志计算
      0 1 对数2 1 = 0
      1 3 对数2 3 = 1
      2 7 对数2 7 = 2
      3 15 对数2 15 = 3

```

考虑一个具有 8 到 15 个节点（任意数量，比如说 10）的平衡树。它总是高度 3，因为从 8 到 15 的任何数字的log [2都是 3。]

在平衡二叉树中，每次迭代要解决的问题的大小减半。因此，大约需要 log [2] n 次迭代才能获得大小为 1 的问题。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-26T17:50:32.237

让我们首先假设树是完整的——它有 2^N 个叶子节点。我们试图证明你需要 N 个递归步骤来进行二分搜索。

在每个递归步骤中，您将候选叶节点的数量精确地减少了一半（因为我们的树是完整的）。这意味着在 N 次减半操作之后，只剩下一个候选节点。

由于我们的二进制搜索算法中的每个递归步骤都对应于一个高度级别，因此高度正好是 N。

推广到所有平衡二叉树：如果树的节点少于 2^N，我们肯定不需要*更多*的减半。我们可能需要更少或相同的数量，但永远不会更多。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-09-23T02:21:20.830

假设我们有一个完整的树可以使用，我们可以说在深度 k 处有^(2k)个节点。您可以使用简单的归纳来证明这一点，基于这样的直觉，即向树添加额外的级别将使整个树中的节点数增加前一层中的节点数乘以 2。

树的高度 k 是 log(N)，其中 N 是节点数。这可以表述为

> 日志[2] (N) = k,

它相当于

> N = 2^千

为了理解这一点，这里有一个例子：

> 16 = 2 ⁴ => 对数[2] (16) = 4

树的高度和节点的数量*呈指数*关系。记录节点数量的日志只允许您向后工作以找到高度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T16:54:53.160

只需查看 Knuth, Volume 3 - Searching and Sorting Algorithms 中的严格证明……他做的比我能想到的任何人都严格得多。

[http://en.wikipedia.org/wiki/The_Art_of_Computer_Programming](http://en.wikipedia.org/wiki/The_Art_of_Computer_Programming)

你可以在任何好的计算机科学图书馆和许多（非常）老极客的书架上找到它。

# regex - 在vim中的空格后轻松对齐字符

> ID：14539143
> 
> 赞同：9
> 
> 时间：2013-01-26T16:49:02.950
> 
> 标签：regex, vim, text-cursor

我想创建一个映射的 vim 命令，帮助我跨多行对齐变量的分配。想象一下，我在文件中有以下文本：

```
foo                     = 1;
barbar            = 2;
asdfasd    = 3;
jjkjfh                = 4;
baz              = 5; 
```

如果我选择多行并使用下面的正则表达式，请注意第 10 列在所有行的空格中，则第 10 列之后的杂散空格将被删除直到等号。

```
:'<,'>s/^\(.\{10}\)\s*\(=.*\)$/\1\2/g 
```

结果如下：

```
foo       = 1;
barbar    = 2;
asdfasd   = 3;
jjkjfh    = 4;
baz       = 5; 
```

有没有办法在执行可视块选择并在正则表达式中使用该列时获取当前光标位置（特别是列位置）？

或者，如果可以找到所选行上任何等号的最大列并插入空格，以便所有等号按列对齐，这比解决前面的问题更可取。想象一下快速转换：

```
foo = 1;
barbar = 2;
asdfasd = 3;
jjkjfh = 4;
baz = 5; 
```

至：

```
foo     = 1;
barbar  = 2;
asdfasd = 3;
jjkjfh  = 4;
baz     = 5; 
```

带有块选择和组合键。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-02T10:19:42.640

对 Tabular 和 Align 并不完全满意，我最近构建了另一个类似但更简单的插件[vim-easy-align](http://github.com/junegunn/vim-easy-align)。

查看演示截屏视频：[https ://vimeo.com/63506219](https://vimeo.com/63506219)

对于第一种情况，只需视觉选择线条并输入命令`:EasyAlign=`即可。

如果您定义了一个映射，例如，

```
vnoremap <silent> <Enter> :EasyAlign<cr> 
```

您只需两次击键即可执行相同操作：`Enter`和`=`

你在评论中提到的案例，

```
final int foo = 3;
public boolean bar = false; 
```

可以使用“:EasyAlign*\”命令轻松对齐，或者使用上述映射、Enter、`*`和空格键，产生

```
final  int     foo = 3;
public boolean bar = false; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2020-05-30T00:53:04.937

## 没有插件

在这种情况下

```
foo = 1
fizzbuzz = 2
bar = 3 
```

您可以使用宏添加许多空格：

`0``f``=``1``0``i``SPACE``ESC``j`

其中 10 是一个任意数字，只是为了增加足够的空间。

应用宏 M 次（对于 M 行）并得到

```
foo           = 1
fizzbuzz           = 2
bar           = 3 
```

然后使用删除所有字符的宏删除过多的空格，直到某个列 N：

`0``f``=``d``1``2``|``j`

其中 12 是要对齐的列号，`|`是竖线 ( `SHIFT + \`)。一起`1``2``|`是“转到第 12 列”命令。

对每一行重复并得到

```
foo        = 1
fizzbuzz   = 2
bar        = 3 
```

您可以将这两个宏合二为一：

`0``f``=``1``0``i``SPACE``ESC``d``1``1``|``j`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-26T17:48:28.493

为此有两个插件：较早的[Align - Help people to align text、eqns、声明、表格等](http://www.vim.org/script.php?script_id=294)，或[Tabular](https://github.com/godlygeek/tabular)。

# c - 如何使用 C 在 Windows 中创建可中断的睡眠？

> ID：14539144
> 
> 赞同：6
> 
> 时间：2013-01-26T16:49:18.583
> 
> 标签：c, windows, multithreading, winapi

我希望当前线程在给定时间内休眠。但是，另一个线程应该能够中断它并提早唤醒它。`sleep`在 unix 中，使用+相当简单`pthread_kill`。在 Windows 中有`SleepEx`和`SleepConditionVariableCS`。SleepEx 似乎实际上并没有导致线程睡眠，因为它仍在处理事件，那么在条件变量上睡眠会是更好的解决方案吗？此外，我还不清楚如何唤醒使用 SleepEx 休眠的线程。这个问题的正确解决方案是什么，`SleepEx`或者`SleepConditionVariableCS`？（另外，你能指出如何唤醒一个正在睡觉的线程`SleepEx`吗？MSDN 文档非常混乱。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-26T16:52:24.110

创建一个手动重置[事件](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686915%28v=vs.85%29.aspx)并等待它[`WaitForSingleObject`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687032%28v=vs.85%29.aspx)- 有一个超时参数。有关详细信息，请参阅 MSDN。

# jquery - 通过 jquery 显示来自 mysql 的值

> ID：14539146
> 
> 赞同：1
> 
> 时间：2013-01-26T16:49:37.633
> 
> 标签：jquery, mysql, json

我在显示我之前通过 json 从 mysql 下载的数据时遇到问题。我的问题是仅在父输入中显示值。此代码运行良好，但我只需要更改父输入值：

```
 function wstaw(nazwa,vat,cena)
{ 
$("#netto").val(cena);
$("#towar").val(nazwa);
$("#vat").val(vat);
        };

$('.rezultaty', parent).append('<a href="#" onclick="wstaw(' + val.name + ',' + val.id + ',' + val.vat + ')">' + val.name + '</a><br />'); 
```

我写了那个代码，但我对'和'有问题，你能帮我解决这个问题吗？

```
 $('.rezultaty', parent).append('<a href="#" onclick="'('towar', parent).val(' + val.name + ') ('netto', parent).val(' + val.id + ') ('vat', parent).val(' + val.vat + ')'">' + val.name + '</a><br />'); 
```

对不起我的床英语:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T16:59:15.990

对于第一个语句使用这个

```
$('.rezultaty', parent).append("<a href='#' onclick='wstaw(" + val.name + "," + val.id + "," + val.vat + ")' >" + val.name + "</a><br />"); 
```

最后一条语句使用这个

```
$('.rezultaty', parent).append("<a href='#' onclick='"+("towar", parent).val(" + val.name + ") ("netto", parent).val(" + val.id + ") ("vat", parent).val(" + val.vat + ")+"'>" + val.name + "</a><br />"); 
```

# c# - 未找到 ConnectManager.Load

> ID：14539147
> 
> 赞同：0
> 
> 时间：2013-01-26T16:49:39.883
> 
> 标签：c#, windows-phone-7, xna

正在播放音频文件并计划播放两个并行播放的文件，因此选择“SoundEffect”播放音频文件。

[Microsoft.Xna.Framework.Audio.SoundEffect](http://msdn.microsoft.com/en-us/library/bb197848.aspx)

```
 SoundEffect back;
        back = ContentManager.Load<SoundEffect>("/Sounds/Background/bkm.mp3") 
```

'没有得到那个 Load 对象。

收到此错误-->

> 非静态字段、方法或属性“Microsoft.Xna.Framework.Content.ContentManager.Load(string)”需要对象引用

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T17:02:50.170

试试这个也许：

```
SoundEffect back;
var Cm= new ContentManager();
back = Cm.Load<SoundEffect>(@"/Sounds/Background/bkm.mp3") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T17:10:32.560

> 非静态字段、方法或属性“Microsoft.Xna.Framework.Content.ContentManager.Load(string)”需要对象引用

所以，创建一个实例：

```
var contentManager = new ContentManager();
var back = contentManager.Load<SoundEffect>("/Sounds/Background/bkm.mp3"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T16:53:59.447

内容加载必须发生在主 Game 类的`LoadContent()`方法中。把你的第二行放在那里并尝试运行它。

您的文件路径也包含错误。它必须看起来像这样：

`"\\Sounds\\Background\\bkm"`

或像这样：

`@"\Sounds\Background\bkm"`.

不要`\`在内容管理器的路径中包含文件扩展名并使用反斜杠。

如果您偶然发现`File not found`异常，最好先运行此检查：

```
if (System.IO.File.Exists("\\Sounds\\Background\\bkm.mp3"))
{
    // if you can step into this, it means the file exists
} 
```

# excel - 将值从表 1 复制到表 2 并使用 vba 将其粘贴到所需位置

> ID：14539152
> 
> 赞同：0
> 
> 时间：2013-01-26T16:50:15.367
> 
> 标签：excel, vba

我的目标是从工作表 1“B5”开始的单元格中复制值并将其粘贴到工作表 2“C11”以后，代码无法正常工作

```
Sub SCMPROCUREMENT()

' SUPPLY CHAIN MANAGEMENT PROCUREMENT

Worksheets("Sheet1").Select

Range("B5:B100000").Select

finalrow = Cells(Rows.Count, 2).End(xlUp).Row

For x = 5 To finalrow

If Worksheets("sheet1").Cells(x, 2).Font.Bold = False Then

Worksheets("sheet1").Select

Cells(x, 2).Select

Selection.Copy

ThisWorkbook.Worksheets("Sheet2").Range("C11").Select

ActiveSheet.Paste

End If
Next x

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T22:23:51.360

a）您的*ThisWorkbook.Worksheets("Sheet2").Range("C11")*不能那样工作

b）您需要第二个列表的计数器，否则您将继续覆盖 C11

```
Sub SCMPROCUREMENT()

    ' SUPPLY CHAIN MANAGEMENT PROCUREMENT

    Dim count As Integer

    For x = 5 To Worksheets("Sheet1").Cells(Rows.count, 2).End(xlUp).Row

        If Worksheets("Sheet1").Cells(x, 2).Font.Bold = False Then

            Worksheets("Sheet1").Cells(x, 2).Copy

            Worksheets("Sheet2").Cells(11 + count, 3).Select
            ActiveSheet.Paste

            count = count + 1

        End If
    Next x

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T11:09:49.553

```
Sub SCMPROCUREMENT()

    ' SUPPLY CHAIN MANAGEMENT PROCUREMENT

    Application.ScreenUpdating = False

    Dim count As Integer

    With Worksheets("Sheet1")

        For x = 5 To .Cells(Rows.count, 2).End(xlUp).Row

            If .Cells(x, 2).Font.Bold = False Then

                .Cells(x, 2).Copy Worksheets("Sheet2").Cells(11 + count, 3)
                count = count + 1
            End If
        Next x

    End With

    Application.ScreenUpdating = True

End Sub 
```

# c - C查找作为参数传递的列表的最后一个元素

> ID：14539153
> 
> 赞同：0
> 
> 时间：2013-01-26T16:50:24.173
> 
> 标签：c, list

我有一个全局列表

```
typedef struct center {
  char center_name[100];
  char hostname[100];
  int port;

  struct center *next_center;
} center; 
```

所以当我开始时：

```
int main(int argc, char** argv) {
  center *head = null;
  parse(argv, &head);
} 
```

在哪里解析：

```
 void parser (char** argv, center **head) {
   //read a file amd add the elements to a newCenter
   addToCenterList(newcenter, head);
 } 
```

其中 addToCenterList：

```
void addToCenterList(center *newcenter, center **head) {
  center *newNode = malloc(sizeof(center));
  strcpy(newNode->center_name, newcenter->center_name);                
  strcpy(newNode->hostname, newcenter->hostname);
  newNode->port = newcenter->port;
  newcenter->next_center = NULL;    

  if (*head == NULL)       
    *head = newNode; 
  else {
    //problem starts here, it never adds after the first element
    center **iterator; 
    center ite; 
    iterator = head; 
    ite = **iterator;

    while(1){
      if(ite.next_center == NULL){
        *ite.next_center = *newNode; 
        break; 
      }                  
    }
} 
```

我的问题从 else 开始：我正在传递列表头的地址。所以我知道我需要一个允许在列表中移动的变量。我已经尝试了很多东西，但没有任何工作。我想到了：遍历列表并将每个“节点”的地址存储在某个变量中，如果该地址的内容（节点！）其 next_center 是 == NULL，那么我将停止查找，因为那是最后一个元素。之后我会为 next_center 地址分配一个新内容。

这就是我想要做的。我不知道如何使它工作....

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T18:29:34.727

```
void addToCenterList(center *newcenter, center **head) {
  center *newNode ;

  while  (*head )       { head = &(*head)->next_center;  }

  *head = newNode = malloc(sizeof *newNod);
  strcpy(newNode->center_name, newcenter->center_name);
  strcpy(newNode->hostname, newcenter->hostname);
  newNode->port = newcenter->port;
  /* Note the next line:
   ** the OP assigned not to newNode, but to newcenter,
   ** which appears to be
   ** "read-only" source data element
   */
  newNode->next_center = NULL; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T17:05:50.973

```
while(1){
     if(ite.next_center == NULL){
         *ite.next_center = *newNode; 
         break; 
     }                   
} 
```

这个循环考虑如果你的迭代器是最后一个元素怎么办，但不是如果不是怎么办。您需要添加 a`else { ite = ite->next;}`或其他内容来实现该效果，以便您不断迭代列表直到找到结尾。

第二个问题，也许更关键，是您正在修改列表的副本。

```
center ite; 
...
ite = **iterator; 
```

这将创建列表元素的副本。然后你分配给这个副本，副本在块的末尾被销毁。

用

```
center *ite; 
...
ite = *iterator; 
```

这将插入第二个元素（修复 while(1) 循环中的语法），然后插入第三个元素将由于第一个提到的问题而导致无限循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T16:54:58.633

删除 addToCenterList 最后几行中的星号，看看会发生什么。

```
item *k = &head;
while (*k != NULL)
    k = &((*k)->next);
item e = calloc(1, sizeof(struct element));
if (!e) {// calloc didn't work
    // error handling
}
e->value = value;
*k = e; 
```

请注意，它`item`是指针类型：

```
struct element {
    int value;
    struct element * next;
};

typedef struct element * item; 
```

您必须针对您的实施对其进行调整（在此处添加一些星号并在此处删除一些）。

星号声明是因为它会导致错误 afaik: You can't assign whole `structs`，这就是为什么你应该用指针来代替。

# tags - 要求 bbpress 中的成员至少输入一个标签

> ID：14539155
> 
> 赞同：1
> 
> 时间：2013-01-26T16:50:53.050
> 
> 标签：tags, bbpress

我想要求我的论坛成员在创建新主题时**在“标签”行中输入至少一个词。**

在探索 bbpress 的 php 文件时，我将最后两行添加到**bb_post.php**中的以下代码段：

```
 $topic = trim( $_POST['topic'] );
$tags  = trim( $_POST['tags']  );

if ('' == $topic)
    bb_die(__('Please enter a topic title'));

if ('' == $tags)
    bb_die(__('Please enter tags')); 
```

据我了解，这应该可以解决问题-但仍然没有。还是我使用了错误的文件？

我的安装在 buddypress 中使用 bbpress。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T10:51:22.637

我在 Wordpress 答案下发布了相同的问题，并得到了解决问题的答案。见这里：[https ://wordpress.stackexchange.com/questions/82956/require-tags-for-bbpress-topics/83734#83734](https://wordpress.stackexchange.com/questions/82956/require-tags-for-bbpress-topics/83734#83734)

# arrays - 在有序数组 A[1..n] 中找到两个整数，使得 a = 3b - 7 在 O(n) 时间和 O(1) 空间内

> ID：14539161
> 
> 赞同：1
> 
> 时间：2013-01-26T16:51:20.553
> 
> 标签：arrays, algorithm

A[1..n] 只有正元素。

我有一个 O(n) 的解决方案：

```
B = new Array()

for i=1 to n
    B[i] = 3A[i]-7

C = merge(A,B) such that C is also sorted

for i=1 to n-1
    if (C[i] == C[i+1])
        return TRUE

return FALSE 
```

O(1) 的方法是什么？顺便说一句，我有一个（可能是错误的）草图，上面说我们可以使用两条扫描线找到它，但我也不明白。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T16:59:49.113

将两个索引 i1 和 i2 初始化为已排序数组的开头。

现在循环：

获取 i1 处的值，并计算 3b-7。

现在从 i2 向前搜索，直到值 >= 搜索值。如果是=，你已经找到了这两个整数。如果是 > 则推进 i1 并循环。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T17:07:41.807

从左到右扫描数组，维护两个指针：一个指向当前候选 for `b`，一个指向当前候选 for `a`。这是一个伪代码实现（也恰好是可运行的 Python）：

```
def find(l):
  i, j = 0, 0
  while i < len(l) and j < len(l):
    b = l[i]
    a = 3 * b - 7
    while j < len(l) and l[j] < a:
      j += 1
    if j < len(l) and l[j] == a:
      return i, j
    i += 1
  return None

l = [1, 3, 5, 8, 10, 27, 45]
print find(l) 
```

这是 O(1) 空间和 O(n) 时间（因为它从不超过两次查看元素）。

# function - Chrome 扩展：使用 options.js 上的函数到 background.js

> ID：14539162
> 
> 赞同：0
> 
> 时间：2013-01-26T16:51:32.287
> 
> 标签：function, google-chrome, google-chrome-extension

是否可以从 background.js（作为扩展的背景页面执行）调用位于 options.js（在扩展的选项页面执行）的函数？

特别需要的是这个函数返回一个需要作为变量传递的值（字符串）。如果函数是本地的，我可以这样做：

```
myvar = myfun(); 
```

但是如果 myvar 是 background.js 中需要的变量并且 myfun() 是 options.js 的函数，我将如何将从 myfun() 返回的值分配给 myvar？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T17:21:19.263

我认为你需要使用`chrome.extension.getViews()`函数。它将返回所有打开的扩展页面的窗口对象。您可以通过检查一些变量轻松过滤掉选项页面。[请参阅此处](http://developer.chrome.com/extensions/extension.html#method-getViews)的文档。

# .net - 为什么重写 Gtk.Widget.OnActivate() 会改变 Widget 的行为？

> ID：14539166
> 
> 赞同：1
> 
> 时间：2013-01-26T16:52:08.317
> 
> 标签：.net, mono, widget, overriding, gtk#

我正在尝试从中派生一个类[`Gtk.Button`](http://docs.go-mono.com/monodoc.ashx?link=T%3aGtk.Button)。我遇到了一个可以解决的障碍（根本不使用`OnActivate`），但我无法解释，因此解决它可能不安全。

似乎覆盖继承自的[`OnActivate`方法](http://docs.go-mono.com/monodoc.ashx?link=M%3aGtk.Widget.OnActivate%28%29)会改变按钮的行为。`Gtk.Button``Gtk.Widget`

**为什么会这样，我该如何预防？**

实现这种效果的唯一方法是一些丑陋的基于反射的检查。

* * *

这正是我所做的，您可以尝试什么来重现该问题：

这是一个包含自定义按钮类和该类的一个实例的小型 Gtk# 应用程序示例。`OnActivate`在自定义按钮类中没有被覆盖。

```
using System;

using Gtk;

namespace ButtonOnActivateExample
{
    class Program
    {
        private class MyButton : Button
        {
            public MyButton()
            {
            }

            public MyButton(IntPtr raw)
            {
            }
        }

        [STAThread]
        public static void Main(string[] args)
        {
            Application.Init();
            using (Window win = new Window("OnActivate Test")) {
                win.SetSizeRequest(300, 200);
                win.Hidden += delegate(object sender, EventArgs e) {
                    Application.Quit();
                };

                MyButton btn = new MyButton();
                btn.Clicked += delegate {
                    Console.WriteLine("clicked");
                };
                win.Add(btn);

                win.ShowAll();
                Application.Run();
                win.Destroy();
            }
        }
    }
} 
```

*单击按钮时，单击*的单词将添加到控制台中的新行中。如果按钮被聚焦（通常是这种情况，因为它是窗口中唯一可聚焦的元素），并且用户按下空格键，同样会发生预期的情况（即触发[`Clicked`事件）。](http://docs.go-mono.com/monodoc.ashx?link=E%3aGtk.Button.Clicked)

* * *

在这个修改后的版本中，有一个细微的变化：`MyButton`该类现在覆盖了该`OnActivate`方法，但被覆盖的版本除了调用该方法的继承版本之外什么都不做：

```
using System;

using Gtk;

namespace ButtonOnActivateExample
{
    class Program
    {
        private class MyButton : Button
        {
            public MyButton()
            {
            }

            public MyButton(IntPtr raw)
            {
            }

            protected override void OnActivate()
            {
                base.OnActivate();
            }
        }

        [STAThread]
        public static void Main(string[] args)
        {
            Application.Init();
            using (Window win = new Window("OnActivate Test")) {
                win.SetSizeRequest(300, 200);
                win.Hidden += delegate(object sender, EventArgs e) {
                    Application.Quit();
                };

                MyButton btn = new MyButton();
                btn.Clicked += delegate {
                    Console.WriteLine("clicked");
                };
                win.Add(btn);

                win.ShowAll();
                Application.Run();
                win.Destroy();
            }
        }
    }
} 
```

这在语义上应该与第一个版本相同。然而，它并没有 - 莫名其妙地，应用程序的行为发生了变化！

[文档](http://docs.go-mono.com/index.aspx?link=M%3aGtk.Widget.OnActivate%28%29)只是说： “`OnActivate`在子类中覆盖此方法以在小部件被激活时得到通知，通常是在用户在键导航期间按 Enter 或 Space 时。”

单击该按钮仍会触发该`Clicked`事件。但是，按空格键不再起作用；控制台中什么也没有出现。

我可以使用 Gtk# for .NET、Windows 7 上的 Mono 和 Ubuntu 上的 Mono 始终如一地重现这种行为。

**这里发生了什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T23:53:49.210

这是一个有趣的问题。不幸的是，我无法就确切原因给出明确的答案。尽管我查看了 gtk# 源代码，但我很快就迷失在了默认信号处理程序、类和 gtypes 的丛林中。

但是，如果您只是在寻找解决方案，我可以告诉您：您应该覆盖该`OnActivated`方法（最后带有 a `d`）。

# doctrine-orm - 使用 FPNTagBundle 轻松标记您的 Doctrine 实体

> ID：14539167
> 
> 赞同：1
> 
> 时间：2013-01-26T16:52:09.910
> 
> 标签：doctrine-orm, symfony-2.1

我正在尝试在 sf2.1 项目中使用[https://github.com/FabienPennequin/FPNTagBundle包。](https://github.com/FabienPennequin/FPNTagBundle)全部作为文档（带有注释）完成，但我收到此错误：

> 可捕获的致命错误：传递给 DoctrineExtensions\Taggable\TagManager::loadTagging() 的参数 1 必须是 DoctrineExtensions\Taggable\Taggable 的实例，Acme\TagBundle\Entity\Document 的实例，在 /project/src/Acme/TagBundle 中调用/Controller/DocumentController.php 在第 111 行并在 /project/vendor/fpn/doctrine-extensions-taggable/lib/DoctrineExtensions/Taggable/TagManager.php 第 201 行中定义

另外，当我发送 php app/console dictionary:generate:entities Acme 我得到这个：

> 为命名空间“Acme”生成实体
> 
> [错误异常]
> 
> 运行时注意事项：Acme\TagBundle\Entity\Tagging::setTag() 的声明应与 /projects/bazar/project/ 中的 DoctrineExtensions\Taggable\Entity\Tagging::setTag(DoctrineExtensions\Taggable\Entity\Tag $tag) 兼容src/Acme/TagBundle/Entity/Tagging.php 第 22 行

你能帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-14T03:48:05.350

至于第二个问题，请删除您的标记和标记实体（Acme\TagBundle\Entity\Tagging...）的功能。不要为您的标签包生成实体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T22:53:13.763

在您的 Document 实体中实现 Taggable 接口

```
Class Document implement Taggable{
...
} 
```

# java - Jena SDB ClassNotFoundException

> ID：14539168
> 
> 赞同：0
> 
> 时间：2013-01-26T16:52:11.457
> 
> 标签：java, jena

我是 Jena SDB 的新手。我已将 SDB-1.2.3.jar 包含在类路径中，并且数据库在线并使用此连接字符串。但是程序在第一行就崩溃了。请帮助我，并给我一些关于 SDB-Jena 的有用教程链接。我已经在他们的官方网站上试过了。我的代码来自网站“http://jena.apache.org/documentation/sdb/javaapi.html”

```
StoreDesc storeDesc = new StoreDesc(LayoutType.LayoutTripleNodesHash,
                                       DatabaseType.MySQL ) ;
   JDBC.loadDriverMySQL();
   String jdbcURL = "jdbc:mysql:localhost:3306/test?username=root&password=1&database=test";
   SDBConnection conn = new SDBConnection(jdbcURL, null, null) ;
   Store store = SDBFactory.connectStore(conn, storeDesc) ; 
```

但是编译器给了我以下异常

```
Exception in thread "main" java.lang.NoClassDefFoundError: com/hp/hpl/jena/sparql/ARQException
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:791)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:449)
    at java.net.URLClassLoader.access$100(URLClassLoader.java:71)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:361)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    at jenasdb.JenaSDB.main(JenaSDB.java:45)
Caused by: java.lang.ClassNotFoundException: com.hp.hpl.jena.sparql.ARQException
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    ... 13 more
Java Result: 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T17:02:24.043

arq-jar 文件不在您的类路径中。它应该与 jena 一起分发，因此请尝试在 lib 目录中查找。

# computer-science - 顶点覆盖 vs 支配集

> ID：14539174
> 
> 赞同：26
> 
> 时间：2013-01-26T16:52:29.883
> 
> 标签：computer-science, graph-theory

我试图了解顶点覆盖和支配集之间的区别。

据了解，在支配集合中，集合 D 包含与不在 D 中的其他顶点相邻的顶点（对于 V 中的每个 v，v 要么在 D 中，要么与 D 中的一个相邻）。

在顶点覆盖中，D 中的所有顶点都覆盖了所有边，但是这样做它们与其他顶点相邻，它们不在 D 中 - 那么为什么它不是一个支配集呢？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-01-30T00:52:21.947

我在 Wikipedia 的 Domination Set 文章中找到了一些图表来说明这种差异。

![](../Images/6febeace92f12ee2c80565b6a8cff7e5.png)

这些示例显示了不是顶点覆盖的主导集（红色），与您稍后在问题中提出的相反。(VD) 中的边防止它们成为顶点覆盖。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2016-01-28T14:56:16.237

以前的答案很好，但是最简单的例子还没有写在这里，所以：

[![在此处输入图像描述](../Images/0d955d616daf6a4681b35b70260864ad.png)](https://i.stack.imgur.com/NoDtk.png)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2020-03-28T20:05:48.310

我不能很快地从给定的答案中理解顶点覆盖和支配集之间的区别，所以我查了一下。

# 定义顶点覆盖：

[根据维基百科](https://en.wikipedia.org/wiki/Vertex_cover)：

> “图的顶点覆盖是一组顶点，包括图的每条边的至少一个端点。”

因此，简单来说，对于每一行，2 个点/节点中的 1 个（连接到线的末端）必须在点/节点的集合中。

# 定义支配集：

[根据维基百科：](https://en.wikipedia.org/wiki/Dominating_set)

> 图 G = (V, E) 的支配集是 V 的子集 D，使得不在 D 中的每个顶点都与 D 的至少一个成员相邻。

简而言之：所有点/节点必须在（点/节点的）集合中，或者通过单条线/边连接到集合。

# 给定示例的解释

这就是为什么在@Daniel 给出的示例中： [![图片由@Daniel 上传](../Images/0d955d616daf6a4681b35b70260864ad.png)](https://i.stack.imgur.com/NoDtk.png)

每2个节点是一个顶点覆盖，单个节点不能是一个顶点覆盖，因为与所选节点相对的线没有“顶点覆盖集中至少1个节点”。

# 差异的可视化

区别如下图所示： [![为什么 1 个节点（在 3 个中）不是顶点覆盖的示例。](../Images/d3136ef58c23affb7063068a7c56f374.png)](https://i.stack.imgur.com/vpG4E.png)

然而，1 个节点是一个支配集，因为在这种情况下，所有节点要么：在集合中，要么通过 1 条线连接到集合。（这里的 1 条线是距离明智的，如果有 2 条线并联连接到主导集，也可以很好，只要它不仅仅是 2 条串联/彼此后面的线，连接到主导集） .

下面添加了一个示例来可视化为什么单个节点是 3 个节点中的支配集：

[![关于为什么单个节点是 3 节点全连接图中的支配集的示例。](../Images/ae6626f63048102d4d46e8651d59ce0f.png)](https://i.stack.imgur.com/GyrZR.png)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-12-28T21:26:34.527

1.  如果您在顶点覆盖之外有零度顶点，则顶点覆盖可能不是支配集。顶点覆盖“覆盖”所有边，但零度顶点不与顶点覆盖相邻。

2.  如果存在边，例如 e = (u,v)，则支配集可能不是顶点覆盖，其中 u 和 v 都在支配集之外。这是可能的，如果 u 和 v 都与其他边的支配集中的顶点相邻。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-11-08T21:59:40.930

您只需要考虑四个顶点上的路径即可区分这两个概念。设 a,b,c,d 是这样一条路径的连续顶点。那么 {a,d} 是一个支配集，但不是一个顶点覆盖（因为它不能覆盖边 bc）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-12-04T17:39:10.983

每个顶点覆盖都是一个支配集，但反之则不然。例如，如果你有一个图 G=(V,E) G={a,b,c,d,e} 和 E={(a,b),(b,c),(c,d),( e,a),(e,b)}，则支配集 DS={b,e} 不是 G 的顶点覆盖。边 (c,d) 没有被覆盖。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-05-16T19:02:23.190

对于连通图，顶点覆盖必须是支配集。对于孤立节点，您需要将其包含在支配集中，但不需要将其包含在顶点覆盖中。但是，支配集是更大的类，它们不必是顶点覆盖，如[本回复](https://stackoverflow.com/a/14594930/3173664)中的示例所示。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-11-05T16:14:37.653

我认为主要区别在于顶点覆盖，边缘必须在顶点覆盖集中至少有一个端点。然而，对于支配集，它满足当一个节点要么在集中，要么它的直接邻居在集中，因此有可能边的两个端点都不在集中（只有当它们都在集中时才会发生）连接到集合中的节点）。希望这能澄清一点。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-12-02T19:33:19.967

*   **顶点覆盖：**您可以将它们视为关注任何通道（边缘）的策略。这样，他们可以关注除孤立节点之外的任何节点，因为节点不是他们关心的问题。它们必须涵盖所有段落。

*   **支配集：**这些是关注任何节点的策略。通道并不重要，因此如果其中一个通过边监视节点，则连接到该节点的其他边可能不会被覆盖，因为通道不是这些策略的关注点。

检查此答案的图像[https://stackoverflow.com/a/14594930/2651073](https://stackoverflow.com/a/14594930/2651073)

# .net - 输入提示隐藏

> ID：14539182
> 
> 赞同：0
> 
> 时间：2013-01-26T16:53:06.180
> 
> 标签：.net, windows-phone-7, windows-phone

我正在尝试使用[Coding4Fun Windows Phone Toolkit 的 InputPrompt 类](http://coding4fun.codeplex.com/wikipage?title=InputPrompt&referringTitle=Documentation)。我的 XAML 结构如下：

```
PivotItem
-User Control 1
--Subclass of ProgressOverlay 
```

在我的 ProgressOverlay 子类中，我试图创建一个输入提示，然后在点击按钮时显示它。我遇到的问题是，当我调用`Show`提示时，它会显示一秒钟然后再次消失，使其无法使用。我错过了什么吗？

我正在创建这样的提示：

```
var ﻿prompt = new InputPrompt() {
    Title = "Add Section"
};
prompt.Completed += addPrompt_Completed;
prompt.Show(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T10:30:36.507

我最终通过简化我的 Views 和 ViewModel 解决了这个问题，因此屏幕上只有两个嵌套而不是三个。

# c - 函数 ptrs 数组上的 realloc() 导致 SIGABRT

> ID：14539184
> 
> 赞同：0
> 
> 时间：2013-01-26T16:53:08.430
> 
> 标签：c, arrays, pointers, function-pointers, realloc

在我当前的项目中，我在运行程序的主要部分之前进行了一些函数-ptr 收集。

一些代码：

```
typedef void(*ShutdownFunctionPtr)(void);
static ShutdownFunctionPtr  *shutdown_functions;
static unsigned int         shutdown_functions_cnt;

/* some stuff */
shutdown_functions      = (ShutdownFunctionPtr*) malloc(sizeof(ShutdownFunctionPtr));
shutdown_functions_cnt  = 0;

/* a function to put a functionptr into the array */
void put(void (*func)(void)) { 
    shutdown_functions = (ShutdownFunctionPtr*))realloc(shutdown_functions, sizeof(ShutdownFunctionPtr) * shutdown_functions_cnt+1);
/* put the function and increment shutdown_functions_cnt  */
} 
```

最后一行使一切崩溃。我目前使用 MALLOC_CHECK_=1 或更高版本运行程序以获得良好的回溯。但我无法弄清楚问题出在哪里。我调试过，这`shutdown_functions`是一个无效的指针，但仅在`put()`函数的第二次调用时。第一个电话工作正常！

问候！

编辑：当然，我不会在`put()`!

编辑：

正如你想要一个例子

```
typedef void(*ShutdownFunctionPtr)(void);
static ShutdownFunctionPtr *funcs;

static void foo(void);
static void bar(void);
static void register(void (*func)(void));

static void register(void (*func)(void)) {
    funcs = realloc(funcs, sizeof(ShutdownFunctionPtr) * (cnt+1));
    funcs[cnt] = func;
    cnt++;
}

int main(void) {
    funcs = malloc(sizeof(ShutdownFunctionPtr));
    register(foo);
    register(bar);
}

/* foo and bar somewere */ 
```

这就是真正的代码的样子。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T17:01:11.893

至少存在以下问题：

```
sizeof(ShutdownFunctionPtr) * shutdown_functions_cnt+1 
```

你可能是说

```
sizeof(ShutdownFunctionPtr) * (shutdown_functions_cnt+1) 
```

# python - 截断小数点后的所有数字

> ID：14539186
> 
> 赞同：9
> 
> 时间：2013-01-26T16:53:15.493
> 
> 标签：python, decimal

如何在 Python 3 中截断小数点后的所有数字？

例如，将 3.444 截断为 3。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-26T16:53:44.167

通过将其转换为`int`：

```
>>> num = 3.444
>>> int(num)
3 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-26T17:21:18.257

```
>>> import math
>>> num = 3.4444
>>> math.trunc(num)
3 
```

# ios - 将子视图添加到子视图，但来自另一个类

> ID：14539199
> 
> 赞同：1
> 
> 时间：2013-01-26T16:54:08.167
> 
> 标签：ios, cocoa-touch, cocoa, class, subclass

我有一个名为 FirstController 的 ViewController，它有 3 个按钮，每次触摸其中一个按钮时，它都会打开 SecondController（我的另一个 ViewController）。但即使所有三个按钮都打开同一个 ViewController，我也不希望 ViewController 完全相同，但它会有不同的对象，具体取决于按下的按钮。我在 SecondController 中有一个 ScrollView，我想根据按下的按钮将不同的图像作为子视图添加到 ScrollView 中。

这是我到目前为止得到的：

* * *

```
#import "FirstController.h"
#import "SecondController.h"

@interface Level1 ()

@end

@implementation FirstController

- (IBAction) button1 {
UIStoryboard *mainStoryboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
SecondController *ViewForButton1 = [mainStoryboard instantiateViewControllerWithIdentifier:@"View2"];
}
- (IBAction) button2 {
UIStoryboard *mainStoryboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
SecondController *ViewForButton2 = [mainStoryboard instantiateViewControllerWithIdentifier:@"View2"];
}
- (IBAction) button3 {
UIStoryboard *mainStoryboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
SecondController *ViewForButton3 = [mainStoryboard instantiateViewControllerWithIdentifier:@"View2"];
}

@end 
```

* * *

我知道如何将图像添加为孔视图的子视图，但我需要它位于 ScrollView 中！我现在如何为此类实现 ScrollView 并向其添加子视图？

PS：我有超过 3 个按钮，但在这个例子中我只使用了 3 个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T17:02:32.073

按照您编写它的方式，您的 mainStoryboard 对象都已实例化，并且仅在创建它们的各个方法内具有范围。您的 ViewForButton_ 对象也是如此。他们有不同的名字这一事实是无关紧要的。

这使得它们，仅凭这一事实，就成为彼此不同的对象。它们可以有自己的内部状态，该状态不同于同一类的任何其他对象。

## 更新

在每个按钮方法中试试这个：

```
- (IBAction) button1 {
UIStoryboard *mainStoryboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
SecondController *ViewForButton1 = [mainStoryboard instantiateViewControllerWithIdentifier:@"View2"];
... create views to add to the second view controller here
... add he views that you created to the second view controller

} 
```

在某些时候，我猜您想显示与第二个视图控制器关联的视图。我将把它留给你，但我假设你会用同样的方法做到这一点。

顺便说一句，这与 AppDelegate 本身没有任何关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T16:58:17.493

当点击按钮时给`Tag`每个`UIButton`并获取标签，并将此标签传递给`YourSecondViewController`您要根据点击的按钮显示的图像的放置条件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T17:48:09.603

我会建议以不同的方式来做到这一点。在您的滚动视图中放置不同的视图应该在 SecondController 的 viewDidLoad 方法中完成。要将项目添加到滚动视图，您需要一个 IBOutlet 到该滚动视图，并且在您第一次从 FirstController 实例化控制器时尚未设置。因此，我将只有一个按钮方法，并使用它来实例化 SecondController，并在其中设置一个属性（在我的示例中称为 buttonTag），该属性取决于按下的按钮的标记。

```
-(IBAction)goToSecondController:(UIButton *)sender {
    SecondController *second = [self.storyboard instantiateViewControllerWithIdentifier:@"Next"];
    second.buttonTag = sender.tag;
    [self.navigationController pushViewController:second animated:YES];
} 
```

然后在 SecondController 中，在 switch 语句中使用该属性来添加你想要的东西：

```
- (void)viewDidLoad {
    [super viewDidLoad];

    switch (self.buttonTag) {
        case 1:
            [self.scrollView addsubview:someView];
            break;
        case 2:
            [self.scrollView addsubview:someOtherView];
            break;
        case 3:
            [self.scrollView addsubview:anotherView];
            break;
        default:
            break;
    }
} 
```

# c++ - C++：读取 .txt 内容并存储到二维数组中

> ID：14539200
> 
> 赞同：2
> 
> 时间：2013-01-26T16:54:14.180
> 
> 标签：c++, arrays, matrix, filestream

所以我和我的队友突然手头有一些离合器。我被分配了一个导入函数，该函数读取一个看起来像这样的文本文件，并将其存储到一个二维数组中： ![在此处输入图像描述](../Images/6f9ae986438fe9945e5a3cb4aff53c6e.png)

列是制表符分隔的。当这突然出现时，我没有整个项目文件，而且我离我的旧可信赖者还很远，我尝试以最通用的方式将其变出：

```
void signal::import_data(string filename){
    ifstream file;

    file.open(filename.c_str());

    if(file.fail()){
        cerr << "file open fail" << endl;
    }else{
        while(!file.eof)
        {
            for(int j = 0; j < NumCols; j++){
                for(int i = 0; i < NumRows; i++){
                    file >> _data[j][i];
                }
            }
        }
    }
    file.close();
} 
```

我这样做对吗？我不太确定这样的流媒体是否可以绕过标签，或者可以吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T16:58:33.767

我认为这段代码：

```
while(!file.eof)
{
   for(int j = 0; j < NumCols; j++){
       for(int i = 0; i < NumRows; i++){
              file >> _data[j][i];
      }
   }
} 
```

应该替换为：

```
for(int j = 0; j < NumCols; j++)
{
   for(int i = 0; i < NumRows; i++)
   {
         if ( !(file >> _data[j][i]) ) 
         {
             std::cerr << "error while reading file";
             break;
         }
   }
   if ( !file ) break;
} 
```

也就是说，如果您希望`NumCols * NumRows`文件中存在条目，为什么要显式检查文件结尾？让它阅读，直到你阅读`NumCols * NumRows`条目被阅读。一旦读取，它将自动退出循环。

*但是您必须在读取条目之前* 检查文件是否结束`NumCols * NumRows`，这就是我这样做的原因：

```
if ( !(file >> _data[j][i]) ) 
{
    std::cerr << "error while reading file";
    break;
} 
```

如果文件在完成读取条目之前达到*eof*字符或其他一些读取失败，则条件将评估为，它将打印错误消息并中断循环，它也会中断外循环，因为表达式将评估为。`NumCols * NumRows``if``true``!file``true`

有关如何使用 C++ 流读取文件的详细说明，请阅读以下主题的答案：

*   [从 C++ 文件中读取行的首选模式是什么？](https://stackoverflow.com/questions/7219062/whats-preferred-pattern-for-reading-lines-from-a-file-in-c)
*   [为什么循环条件内的 iostream::eof 被认为是错误的？](https://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong)

# html - phonegap/cordova 可以使用本机 GUI 吗？

> ID：14539214
> 
> 赞同：16
> 
> 时间：2013-01-26T16:55:46.170
> 
> 标签：html, user-interface, cordova, native

可能听起来很愚蠢，但 phonegap/cordova 可以使用设备的原生 GUI 吗？我知道它是一个网络包装器，但我知道您可以访问一些本地调用（如相机/联系人等）

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-08-02T00:06:52.893

[AppGyver Steroids](http://www.appgyver.com/steroids)将 PhoneGap 和 Native UI 巧妙地结合在一起。

基本上，使用 Steroids，您可以非常轻松地将本机选项卡、本机导航栏、本机动画和过渡、本机模式窗口、本机“Facebook 风格”抽屉/面板等内容添加到您的 PhoneGap 应用程序。

这是它如何工作的演示：http: //youtu.be/oXWwDMdoTCk?t= [20m17s](http://youtu.be/oXWwDMdoTCk?t=20m17s)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-03-04T18:57:57.797

您可以查看[Project Ace](http://microsoft.github.io/ace/)，我认为这是迄今为止（ios 和 android cordova-phonegap 应用程序）的最佳选择，并且它得到了 Microsoft 的支持。

一些优点：

*   极大的灵活性和独立性，
*   调用本机代码，
*   将原生组件与 html 混合搭配，
*   编写特定于平台的代码（ios & android），
*   用于ui设计和布局管理的出色对接系统，
*   创建 Android 小部件，
*   很棒的文档，
*   适用于任何移动混合框架（例如 Ionic）。

> 更新：*截至 2016 年 12 月，此项目不再由 Microsoft 维护。*

但仍然在 github 上，当然它是开源的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-11-25T02:06:45.247

我刚刚发现了类似于 AppGyver 的 Monaca 框架，他们为本地 ui 转换构建了科尔多瓦插件。Monaca 的原生 ui 代码在 GitHub 上，您可以免费下载并将其安装在您现有的 phoengap 项目中或使用他们的云集成系统。

[http://monaca.mobi/](http://monaca.mobi/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-26T17:44:23.293

从技术上讲，可以使用插件来使用任何原生的东西。有关更多信息，请参阅[插件开发指南](http://docs.phonegap.com/en/2.3.0/guide_plugin-development_index.md.html)。需要注意的是，必须为所有目标平台编写此插件。

但是，使用本机 GUI 违背了使用 Cordova 的目的，除非在极少数情况下绝对需要显示本机组件（例如，您可以使用的对话框[`notification.alert`](http://docs.phonegap.com/en/1.0.0/phonegap_notification_notification.md.html#notification.alert)）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-27T04:50:34.060

是的，在你开始写你自己之前..检查它是否还没有完成:)

[phonegap / phonegap 插件](https://github.com/phonegap/phonegap-plugins)

希望能帮助到你。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-02T12:04:56.417

当然，您可以编写本机控件。您可以使用插件以编程方式创建。并且还可以使用 xml 文件（如 android 本机应用程序使用）来创建控件，但为此您必须使用cordova webview。

# javascript - 检查参数是否存在并且在数组中，或者设置为默认值

> ID：14539215
> 
> 赞同：2
> 
> 时间：2013-01-26T16:55:48.200
> 
> 标签：javascript

我正在尝试清理一些旧代码，并且想知道是否有一个干净的单行解决方案来处理类似以下内容。

```
function dates(format) {
    var formats = ['DD/MM/YYYY','MM/DD/YYYY'];
    // is there a one liner for something like this? If format is undefined this will throw an error when evaluating formats.indexOf(format)
    format = (typeof format !== 'undefined' && formats.indexOf(format) >= 0) ? format : 'MM/DD/YYYY';

    // ... 
```

格式是一个函数的参数，我想做一些初步检查以确保输入是给定的，并且符合在数组中的标准。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T17:10:44.127

你的代码对我来说看起来不错，除了`==undefined`检查是多余的。

```
function dates(format) {
    var formats = ['DD/MM/YYYY','MM/DD/YYYY'];
    format = formats.indexOf(format) >= 0 ? format : 'MM/DD/YYYY';
} 
```

请注意，如果您根本没有参数调用，这*不会*引发异常。`dates()`

如果你有很多这样的代码，你可以考虑使用一个实用函数，比如

```
function oneOf(item /*, args */) {
    args = [].slice.call(arguments, 1)
    return args.indexOf(item) >= 0 ? item : args[0];
} 
```

进而：

```
function dates(format) {
    format = oneOf(format, 'MM/DD/YYYY', 'DD/MM/YYYY')
} 
```

如果您决定按照 Felix 的建议使用一个对象，最好像这样构造它：

```
var formats = {
    'DD/MM/YYYY': 'DD/MM/YYYY',
    'MM/DD/YYYY': 'MM/DD/YYYY',
}; 
```

乍一看，这看起来很愚蠢，但有两个重要的优点。首先，`in`检查很简单

```
 format = formats[format] || 'DD/MM/YYYY' 
```

其次，您可以扩展它以为您的值提供别名：

```
var formats = {
    'DD/MM/YYYY': 'DD/MM/YYYY',
    'MM/DD/YYYY': 'MM/DD/YYYY',
    'english': 'M/D/YYYY'
    'german':   'DD.MM.YYYY'
};

dates('german') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T17:00:45.137

您可以使用地图使存在测试更容易一些：

```
var formats = {
    'DD/MM/YYYY': true,
    'MM/DD/YYYY': true
};

// somewhere

format = formats.hasOwnProperty(format) ? format : 'MM/DD/YYYY'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T17:03:27.380

如果您可以更改`formats`数组的内容，例如：

```
var formats = ["MM/DD/YYYY", "DD/MM/YYYY"]; 
```

然后你总是可以通过以下方式重写你的代码：

```
format = formats[Math.max(0, formats.indexOf(format))]; 
```

但是，如果您不知道是否`format`定义了变量（作为变量），最好`typeof format !== "undefined"`在第一次操作之前添加检查。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T17:12:49.643

换成`formats`一个对象，就变得简单多了：

```
function dates(format) {
    // value does not matter
    var formats = {'DD/MM/YYYY': 0, 'MM/DD/YYYY': 0 };

    format = format in formats ? format : 'MM/DD/YYYY';
} 
```

[http://jsfiddle.net/6jvVA/](http://jsfiddle.net/6jvVA/)

请注意，对象属性的值并不重要，因为我们只是将对象用作列表。

# java - ScrollView：将触摸事件传递给孩子

> ID：14539216
> 
> 赞同：5
> 
> 时间：2013-01-26T16:55:57.090
> 
> 标签：java, android, scrollview

我用`ImageView`. 它在一个`ScrollView`.

它可以在没有垂直运动的情况下工作，`ScrollView`但在内部`ScrollView`不会接收`TouchEvents`到垂直运动。

如何阻止`ScrollView`阻止触摸事件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-26T17:15:24.920

您将需要根据需要打开和关闭它..

获取父母（）。[requestDisallowInterceptTouchEvent](http://developer.android.com/reference/android/view/ViewParent.html#requestDisallowInterceptTouchEvent%28boolean%29) (true)。

我不确定为什么你在滚动视图中有操纵杆，操纵杆是否也应该随着视图滚动？如果这是预期的，那么上面的路线将是最好的解决方案。如果它不应该随着视图滚动，我会帮助您制定一个更好的方法，将操纵杆包含在您的视图中。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-16T22:46:00.640

我在[这里](https://stackoverflow.com/questions/2646028/android-horizontalscrollview-within-scrollview-touch-handling)找到了解决方案。

我创建了一个自定义 ScrollView 类，它有一个布尔值指示它是否被锁定。onInterceptTouchEvent 方法被覆盖：

```
@Override
public boolean onInterceptTouchEvent(MotionEvent ev) {
    if (!mScrollable) return false;
    return super.onInterceptTouchEvent(ev);
} 
```

当操纵杆被触摸时（ACTION_DOWN），自定义的 ScrollView 被锁定。在 ATCTION_UP 事件中，它被解锁。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-12-23T13:24:20.260

简单的答案在这里： [https ://stackoverflow.com/a/34436589/3818437](https://stackoverflow.com/a/34436589/3818437)

通过使用声明您的 ScrollView 不可点击/可聚焦

```
android:clickable="false" and android:focusable="false" 
```

或者

`v.setClickable(false) and v.setFocusable(false)`.

现在应该将点击事件分派给 ScrollView 的父级。

# google-app-engine - Windows 8 中的 Google 应用引擎性能影响

> ID：14539219
> 
> 赞同：0
> 
> 时间：2013-01-26T16:56:24.553
> 
> 标签：google-app-engine, windows-8

直到今天，我一直在使用 eclipse 和谷歌应用引擎服务器，一切都完美而快速。我今天安装了 Windows 8，当我执行删除或放置等数据库操作时速度非常慢。有谁知道这可能是什么原因？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T20:34:03.100

最后我发现影响性能的是后端，即使在 HelloWorld 简单项目中，数据存储性能也很差。我放开了后端，现在只使用前端，因为 devappserver2 目前似乎不稳定。

为谷歌打开了一个问题：

[http://code.google.com/p/googleappengine/issues/detail?id=8732&thanks=8732&ts=1359318724](http://code.google.com/p/googleappengine/issues/detail?id=8732&thanks=8732&ts=1359318724)

# rdf - 在 OSX 上从 Source 构建 raptor RDF

> ID：14539224
> 
> 赞同：2
> 
> 时间：2013-01-26T16:56:56.570
> 
> 标签：rdf, redland, autogen

我正在尝试构建 Raptor RDF 语法库。

我可以使用自制软件成功安装它，但想从源代码构建。

然而，

```
LIBTOOLIZE=/usr/bin/glibtoolize ./autogen.sh 
autogen.sh: Looking for programs: automake aclocal autoconf autoheader libtoolize gtkdocize
autogen.sh: automake program 'automake' V 011200 (min 011102) in /usr/bin
autogen.sh: aclocal program 'aclocal' V 011200 (min 011102) in /usr/bin
autogen.sh: autoconf program 'autoconf' V 026900 (min 026200) in /usr/local/bin
autogen.sh: autoheader program 'autoheader' V 026900 (min 026200) in /usr/local/bin
autogen.sh: libtoolize program '/usr/bin/glibtoolize' V 020210 (min 020200) in environment
autogen.sh: gtkdocize program '' V 0 (min 010300) in 
autogen.sh: ERROR: You must have `gtkdocize' installed to compile this package.
     (version 010300 or newer is required) 
```

gtkdocize 似乎是一个 Linux 程序。我该如何解决这个问题？

谢谢，并为这个相当愚蠢的问题道歉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T20:48:01.250

您应该从已发布的 tarball 构建它，因为这样您就不必处理 autotools 套件。它也是一个经过测试和支持的 tarball。最新的总是从[猛禽主页链接](http://librdf.org/raptor/)

但是，如果您想使用 autotools 路线，您将需要 gtkdocize 之类的东西。它可以在 gtk-doc-tools 包 (Debian)、gtk-doc (Redhat) 和 gtk-doc（OSX 上的自制软件）中找到

# c++ - 将线程标识为“远程线程”

> ID：14539225
> 
> 赞同：4
> 
> 时间：2013-01-26T16:57:09.427
> 
> 标签：c++, windows, multithreading

我正在研究一个分析另一个过程的过程。
它检查 CPU、内存使用、线程创建和死亡等。不幸的是，我的计算机上安装了一个防病毒软件，它在我检查的进程中创建了一个远程线程。这个远程线程并不是进程的一部分，所以我想在检查进程时完全忽略这个线程。

有没有办法（在 C++ 中）允许我们将线程识别为“远程线程”？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-26T20:23:32.917

如果你愿意去内核模式，你可能会对[PsSetCreateThreadNotifyRoutine](http://msdn.microsoft.com/en-gb/library/windows/hardware/ff559954%28v=vs.85%29.aspx)感兴趣。根据[Uninformed的说法，它是在](http://uninformed.org/index.cgi?v=8&a=2&p=18)**“正在创建或终止线程”**的进程的上下文中调用的。[我在其他地方](http://www.osronline.com/showThread.CFM?link=123263)也看到过这个建议。

我开始测试这个，它工作正常。*您应该注意，您会看到一些误报，因为 Windows（不出所料）自己会进行一些注入。*<EDIT>**这实际上是因为在创建第一个线程时创建进程时，它将在父进程的上下文中完成**。简单地消除第一个线程创建，这给出了一个很好的指示。</编辑>

主要缺点（除了必须编写驱动程序）是您需要看到创建发生，因此您的过程需要首先启动。

或者，如前所述，涉及堆栈跟踪、加载的模块和所有好东西的启发式方法开始发挥作用。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-26T20:18:02.950

`CreateThread`在内部，使用创建的线程和使用创建的线程之间没有区别`CreateRemoteThread`。（实际上，`CreateThread`基本上作为目标进程调用`CreateRemoteThread`和传递`GetCurrentProcess()`。）如果要区分线程，则必须使用启发式方法。

# ruby-on-rails - 部署到 heroku 时清理捆绑器缓存

> ID：14539232
> 
> 赞同：33
> 
> 时间：2013-01-26T16:57:51.360
> 
> 标签：ruby-on-rails, heroku, bundler, heroku-san

每当我部署到 Heroku（使用 heroku_san gem 的 Ruby on Rails 应用程序）时，它都会显示以下内容：

```
Cleaning up the bundler cache.
Would have removed sitemap_generator (2.0.1.pre1)
Would have removed newrelic_rpm (3.5.5.38)
Would have removed httparty (0.10.0)
Would have removed thor (0.16.0)
Would have removed ckeditor (3.7.1)
Would have removed fog (1.8.0)
Would have removed rake (0.9.2.2)
Would have removed dalli (2.6.0) 
```

（或我以前部署中可能拥有的任何其他旧 gem）如何清理 Heroku 应用程序中的捆绑程序缓存？我试图运行：

```
heroku run bundle clean --force 
```

但它没有帮助。

谁能告诉我如何清理 Heroku 中的捆绑程序缓存？或者我是否应该忽略此消息？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-04T23:48:29.747

这是由于最近在 Bundler 中引入的更改。我们（Heroku）需要追踪为什么它认为它在`--dry-run`模式下运行并修复它。

同时，这无害，也不应该引起任何问题。不幸的是，如果您担心的话，没有办法手动清除缓存。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-01T00:19:09.480

我也可以在我部署的每个 Heroku 应用程序上得到这个，并且还没有遇到问题。

**这就是我认为您不必担心的原因：**

*   在他们的服务器上有一堆存储的 gem 不应该减慢你的应用程序。哎呀，即使您将一堆不需要的 gem 放入 Gemfile，明显的性能损失也可能是应用程序的初始启动时间和随后的内存使用。如果这些 gem*不在*您的 Gemfile 中，那么对您的应用程序的性能影响应该为零。
*   虽然 Heroku 对免费帐户的 slug 有 100MB 的软限制，但我自己的轶事证据表明这不包括您从 Gemfile 中删除的 gem（如果下面的疯狂猜测是正确的，这是有道理的）。

**以下是关于 Heroku 为何不清理捆绑器缓存的疯狂猜测：**

内存比硬盘空间更昂贵，因此虽然大多数 gem 可能会在硬盘上占用微不足道的空间，但如果必须将大量 gem 加载到内存中，它们可能会加起来。但是，如果 gem 不在您的 Gemfile 中，它就不会在内存中。而且，删除（并且可能稍后重新下载）gem 很可能比将其存储在驱动器上更昂贵，以防万一您以后改变主意并想要将其重新添加到 Gemfile 中。

# c#-4.0 - 获取特定帖子 ID 的分享数

> ID：14539237
> 
> 赞同：0
> 
> 时间：2013-01-26T16:58:27.743
> 
> 标签：c#-4.0, facebook-graph-api, facebook-c#-sdk, facebook-fql

我试图检索这样的特定 id 的共享数量，但不工作返回 null：

```
private JsonArray SharesData(string id, string token)
    {
        JsonObject da;
        var url = string.Format("https://graph.facebook.com/{0}/shares?access_token={1}&limit=100000", id, token);
        da = (JsonObject)fb.Get(url);
        return (JsonArray)da["data"];
    } 
```

这适用于喜欢和评论：

```
 public JsonArray LikesData(string id, string token)
    {
        JsonObject da;
        var url = string.Format("https://graph.facebook.com/{0}/likes?access_token={1}&limit=100000", id, token);
        da = (JsonObject)fb.Get(url);
        return (JsonArray)da["data"];
    }

 public JsonArray CommentsData(string id, string token)
    {
        JsonObject dat = new JsonObject();
        var url = string.Format("https://graph.facebook.com/{0}/comments?access_token={1}&limit=100000", id, token);
        dat = (JsonObject)fb.Get(url);
        return (JsonArray)dat["data"];
    } 
```

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T12:01:01.917

facebook 实体中没有实体“共享”（有关实体列表，请参见[https://developers.facebook.com/docs/reference/fql/ ）](https://developers.facebook.com/docs/reference/fql/)

`link_stat`但是，您可以使用表获取给定链接的所有统计信息（包括共享数量） 。

见[https://developers.facebook.com/docs/reference/fql/link_stat/](https://developers.facebook.com/docs/reference/fql/link_stat/)

# amazon-ec2 - EC2：在外部地址上连接到自己的 mysql 服务器

> ID：14539239
> 
> 赞同：2
> 
> 时间：2013-01-26T16:58:38.893
> 
> 标签：amazon-ec2, amazon-vpc

我们有几台服务器在 Amazon VPC 中运行。服务器私有 IP 地址会在我们升级它们等时定期更改，因此我们希望使用分配给这些的外部 IP 地址 (EIP) 作为 mysql 和其他服务的连接点。我读到指向同一网络上两台计算机的外部 IP 的流量会自动路由到内部网络。真实而伟大！

唯一的复杂之处似乎是服务器需要在自己的外部 IP 上与 mysql 或其他服务进行通信。如果安全设置是完全开放的，那么这可以正常工作。但是一旦不是这种情况 - 虽然同一安全组中的其他计算机可以毫无问题地相互连接到其他外部 IP，但似乎服务器无法毫无问题地连接到自身。

有什么想法可以解决这个问题，而不必参考 VPC 中实例的私有内部 IP 地址？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T20:31:45.110

您可以尝试以下一些方法：

*   域名系统。您可以使用[Route 53](http://aws.amazon.com/route53/)（或任何其他 DNS 提供商）创建指向您当前实例 IP 地址的 DNS 记录。
*   [辅助弹性网络接口](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-eni.html)可以从一个实例移动到另一个实例，因此升级后您只需将 NIC 移动到新的生产实例，而无需更改任何 IP 地址。

# java - Android 自定义组件：未找到 layout_width 属性

> ID：14539257
> 
> 赞同：1
> 
> 时间：2013-01-26T17:00:06.657
> 
> 标签：java, android, components, android-linearlayout

我有一个自定义组件。

我总是收到“您必须提供 layout_width 属性”。通过组件的构造函数后出错。也许你可以帮助我。

组件的类：

```
public class UndoBar extends LinearLayout {

    private TextView messageTextView;
    private Button undoButton;

    public UndoBar(Context context) {
        this(context, null);
    }

    public UndoBar(Context context, AttributeSet attrs) {
        super(context, attrs);

        final LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        inflater.inflate(R.layout.undobar, this);

        messageTextView = (TextView) findViewById(R.id.undobar_message);
        undoButton = (Button) findViewById(R.id.undobar_button);

        setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT)); // here I set the height/width!!
        setOrientation(HORIZONTAL);
        setVisibility(GONE);
        setPadding(4, 4, 4, 4); // todo muss dp sein
        setBackgroundColor(Color.BLUE);
        setGravity(Gravity.BOTTOM | Gravity.CENTER_HORIZONTAL);
    }

    public Button getUndoButton() {
        return undoButton;
    }

    public TextView getMessageTextView() {
        return messageTextView;
    }

    public void setOnClickListener(OnClickListener l) {
        undoButton.setOnClickListener(l);
    }

} 
```

组件的 XML 文件：

```
<merge xmlns:android="http://schemas.android.com/apk/res/android" >

    <TextView
        android:id="@+id/undobar_message"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Deleted"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textColor="#fff" />

    <Button
        android:id="@+id/undobar_button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="30dp"
        android:background="#808080"
        android:drawableLeft="@drawable/ic_revert"
        android:text="Undo"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textColor="#fff" />

</merge> 
```

这是嵌入组件的位置（我也尝试在这里设置组件的宽度/高度，没有运气）：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    ...

    <de.myapp.android.UndoBar
        android:id="@+id/undobar" />

</RelativeLayout> 
```

日志猫：

```
01-26 17:48:19.921: E/java.lang.RuntimeException(5832): Binary XML file line #50: You must supply a layout_width attribute.
01-26 17:48:19.921: E/java.lang.RuntimeException(5832): java.lang.RuntimeException: Binary XML file line #50: You must supply a layout_width attribute.
01-26 17:48:19.921: E/java.lang.RuntimeException(5832):     at android.content.res.TypedArray.getLayoutDimension(TypedArray.java:491)
01-26 17:48:19.921: E/java.lang.RuntimeException(5832):     at android.view.ViewGroup$LayoutParams.setBaseAttributes(ViewGroup.java:5631)
01-26 17:48:19.921: E/java.lang.RuntimeException(5832):     at android.view.ViewGroup$MarginLayoutParams.<init>(ViewGroup.java:5773)
01-26 17:48:19.921: E/java.lang.RuntimeException(5832):     at android.widget.RelativeLayout$LayoutParams.<init>(RelativeLayout.java:1154)
01-26 17:48:19.921: E/java.lang.RuntimeException(5832):     at android.widget.RelativeLayout.generateLayoutParams(RelativeLayout.java:992)
01-26 17:48:19.921: E/java.lang.RuntimeException(5832):     at android.widget.RelativeLayout.generateLayoutParams(RelativeLayout.java:70)
01-26 17:48:19.921: E/java.lang.RuntimeException(5832):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:748)
01-26 17:48:19.921: E/java.lang.RuntimeException(5832):     at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
01-26 17:48:19.921: E/java.lang.RuntimeException(5832):     at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
01-26 17:48:19.921: E/java.lang.RuntimeException(5832):     at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
01-26 17:48:19.921: E/java.lang.RuntimeException(5832):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:270)
01-26 17:48:19.921: E/java.lang.RuntimeException(5832):     at android.app.Activity.setContentView(Activity.java:1881)
01-26 17:48:19.921: E/java.lang.RuntimeException(5832):     at de.innosoft.android.activity.Einsaetze.onCreate(Einsaetze.java:61)
01-26 17:48:19.921: E/java.lang.RuntimeException(5832):     at android.app.Activity.performCreate(Activity.java:5104)
01-26 17:48:19.921: E/java.lang.RuntimeException(5832):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
01-26 17:48:19.921: E/java.lang.RuntimeException(5832):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2258)
01-26 17:48:19.921: E/java.lang.RuntimeException(5832):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2354)
01-26 17:48:19.921: E/java.lang.RuntimeException(5832):     at android.app.ActivityThread.access$600(ActivityThread.java:150)
01-26 17:48:19.921: E/java.lang.RuntimeException(5832):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1244)
01-26 17:48:19.921: E/java.lang.RuntimeException(5832):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-26 17:48:19.921: E/java.lang.RuntimeException(5832):     at android.os.Looper.loop(Looper.java:137)
01-26 17:48:19.921: E/java.lang.RuntimeException(5832):     at android.app.ActivityThread.main(ActivityThread.java:5191)
01-26 17:48:19.921: E/java.lang.RuntimeException(5832):     at java.lang.reflect.Method.invokeNative(Native Method)
01-26 17:48:19.921: E/java.lang.RuntimeException(5832):     at java.lang.reflect.Method.invoke(Method.java:511)
01-26 17:48:19.921: E/java.lang.RuntimeException(5832):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:795)
01-26 17:48:19.921: E/java.lang.RuntimeException(5832):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:562)
01-26 17:48:19.921: E/java.lang.RuntimeException(5832):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T17:03:26.260

在 Xml 中添加`layout_width`和自定义视图后尝试：`layout_height`

```
<de.myapp.android.UndoBar
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:id="@+id/undobar" /> 
```

# file-get-contents - php file_get_contents 请稍候加载

> ID：14539258
> 
> 赞同：1
> 
> 时间：2013-01-26T17:00:07.750
> 
> 标签：file-get-contents

我正在使用 php 使用 file_get_contents 执行远程 url。如果 file_get_contents 检索到的内容不为空，那么我会回显一条消息说完成。

但是，远程 url 有时可能需要一些时间来加载，因此整个 php 页面需要很长时间才能加载。所以我想知道是否有办法在 php file_get_contents 执行此操作时加载请等待消息显示。以及何时完成显示结果为完成或错误

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T17:06:21.987

这可以通过 js/ajax 来完成，而不是直接通过 php。

您使您的 php 页面在没有慢速功能的情况下正常加载，然后您对某些 php 脚本进行 ajax 回调以执行慢速功能并将结果返回到主页，在等待结果时您可以显示类似“请稍等”。

# robots.txt - 通过 robots.txt 阻止属于另一个网站的子目录的影响

> ID：14539259
> 
> 赞同：-1
> 
> 时间：2013-01-26T17:00:12.063
> 
> 标签：robots.txt

我在 hostgator 上有托管设置，它在主站点的子目录中创建插件域。所以结构是

```
public_html
    - main_site
        - main_site_folders
        - addon_site1
        - addon_site2 
```

等等。如果我在主站点中禁止 robots.txt 中的 addon_site1 和 addon_site2 会阻止搜索引擎索引插件站点吗？我无法找到对此的直接答案，如果有人可以指给我一份文件，可以毫不含糊地解释这个概念，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T17:12:22.413

如果你挡住`/main_site/addon_site`了，那么机器人就不会去`www.main_site.com/addon_site`。但是，这并不妨碍他们直接前往`www.addon_site.com`。

如果你想阻止它们被索引`www.addon_site.com`，你需要在`addon_site`文件夹中放置一个 robots.txt 文件：

```
User-agent: *
Disallow: / 
```

你需要在你的问题中澄清你想要做什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T17:06:28.107

是的：

```
Disallow: /main_site/addon_site1
Disallow: /main_site/addon_site2 
```

...假设 robots.txt 在您的 public_html 目录中。

如果您的站点根目录位于 /public_html/main_site 中（例如：[http](http://example.com/) ://example.com/指向 /public_html/main_site），您可以将 robots.txt 放入 /public_html/main_site 中，其中包含以下内容：

```
Disallow: /addon_site1
Disallow: /addon_site2 
```

# android - 为什么 http 响应在我的 android 设备中不能与 3G 一起使用？

> ID：14539263
> 
> 赞同：0
> 
> 时间：2013-01-26T17:00:21.947
> 
> 标签：android

我在 android 中编写了一些代码，我正在尝试从网站获取 http 响应。我做到了，但是当我将应用程序上传到我的 android 设备时，来电时我无法读取响应。实际上，我想在来电时在屏幕上显示 http 响应。请帮助我谢谢......

我的 HTTPPOST 和阅读代码

```
 StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();

    StrictMode.setThreadPolicy(policy); 

    InputStream is = null;
     String result = "";
     ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();

     try 
     {  HttpParams params = new BasicHttpParams();
     params.setParameter(CoreProtocolPNames.PROTOCOL_VERSION, HttpVersion.HTTP_1_1);
           HttpClient httpclient = new DefaultHttpClient(params);
           HttpPost httppost = new HttpPost("http://www.whois118.com/broadcast.php");
           nameValuePairs.add(new BasicNameValuePair("telefon",tlf));
           nameValuePairs.add(new BasicNameValuePair("hash", hash));
           httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
           HttpResponse response = httpclient.execute(httppost);
           HttpEntity entity = response.getEntity();

           is = entity.getContent();
           int length;
      }

      catch (Exception e)
      {
       Log.e("log_tag", "Error in http connection " + e.toString());
      }
  // convert response to string
      try 
      {
           BufferedReader reader = new BufferedReader(new InputStreamReader( is, "iso-8859-1"), 8);
           StringBuilder sb = new StringBuilder();
           String line = null;

       while ((line = reader.readLine()) != null) 
       {
           sb.append(line + "\n");
       }

        is.close();
        result = sb.toString();

       Log.v("log","Result :"+result);
  } 
  catch (Exception e)
  {
   Log.v("log", "Error converting result " + e.toString());
  }

    return result;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T17:23:26.330

确保您在 manifest.xml 中有足够的权限：`<uses-permission android:name="android.permission.INTERNET" />`

# database - 什么数据库更适合存储大量小数据

> ID：14539264
> 
> 赞同：0
> 
> 时间：2013-01-26T17:00:33.127
> 
> 标签：database

我需要以`id:time:value`.

每小时一次，我计划收集这些信息以绘制图表。什么数据库更适合？

我想到了nosql。但是有太多的认识，我无法决定从哪里开始。或者也许还有另一种方式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T17:03:37.287

此数据很容易映射到按小时分区的单个关系表（或将小时作为聚集索引中的第一列）。它完美地映射到关系模型上。

如果您想使用多台机器来扩展负载，请使用 NoSQL。NoSQL 风格的数据库使这变得容易得多。

对于每秒 1666 条记录，任何旧的 RDBMS 就足够了。顺序批量插入速度从每个 CPU 内核每秒 10K 到 200K 行不等（4 个内核 => 每秒 800K 行）（请谨慎对待这些数字）。

# int - 为什么 Maple 不评估这个积分？

> ID：14539266
> 
> 赞同：0
> 
> 时间：2013-01-26T17:00:47.037
> 
> 标签：int, integration, limits, maple

```
restart;
assume(alph>0);
assume(alph,real);
f_exp:=exp(-alph*r^2);
ff_deriv:=simplify(r^2*f_exp^2);
ff:=simplify(int(ff_deriv,r=0..infinity)); 
```

它似乎理解我要集成的内容，但是当我尝试找到 ff 时，它会出现一个充满 erf 函数的可怕表达式，并且`lim r--> infinity`在前面带有 a。然而，在 wolfram alpha 上，我得到了我想要的答案：`sqrt(pi/2)/(8*alpha^(3/2))`.

谁能帮我这个？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T20:40:16.137

第二个假设调用消除了第一个假设。由于属性 > 0 意味着真实，因此只需放弃第二个假设。

```
assume(alph>0);
f_exp:=exp(-alph*r^2);
ff_deriv:=simplify(r^2*f_exp^2);
ff:=simplify(int(ff_deriv,r=0..infinity)); 
```

会给你你想要的答案：(1/16)*sqrt(2)*sqrt(Pi)/alph^(3/2)

如果您需要其他属性，也可以使用 Additional(alph,)。

# php - 如何找到从我的服务器请求 iframe 的域并将域保存在数据库中

> ID：14539267
> 
> 赞同：3
> 
> 时间：2013-01-26T17:00:50.630
> 
> 标签：php, html, iframe

我有一组不同的网站`iframe`出于各种原因从我的服务器请求一个 html 文件

是否可以跟踪`onload`哪个域请求`iframe`，然后将其保存在数据库中。

如果域已经存在，则不要将其添加到数据库中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T17:04:45.047

请求 iframe 内容的不是域，而是用户的浏览器。

有一点机会看到这个 iframe 在哪个页面上：引用者（在标准文档中被错误地拼写为“引用者”，所以每个浏览器都必须复制这个错字），在 PHP 中通过 $_SERVER['HTTP_REFERER'] 可用。

您可以尝试从那里解析域，最好使用[parse_url()](http://de1.php.net/parse-url)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T17:06:17.110

您可以结合使用 jQuery 的[`post()`](http://api.jquery.com/jQuery.post/)功能和 PHP 的[`$_SERVER`](http://php.net/manual/en/reserved.variables.server.php)变量：

```
$.post("collect.php", { source: "<?=$_SERVER['HTTP_REFERER']?>" } ); 
```

然后，您的收集脚本可以检查数据库以查看对源的现有引用，并在需要时输入新引用。使用 PDO 的示例：

```
if (isset($_POST['source']) && $source = $_POST['source']) {

   $db = new PDO('mysql:host=localhost;dbname=testdb;charset=UTF-8', 'username', 'password');

   // Be sure to sanitize $source

   if ($db->query("SELECT * FROM table WHERE source = $source")->rowCount() == 0) {
      $stmt = $db->prepare("INSERT INTO table(`time`, `source`) VALUES(?, ?)");
      $stmt->execute(array(time(), $source));
   }

} 
```

# mysql - MySQL 根据每日时间戳范围选择

> ID：14539268
> 
> 赞同：2
> 
> 时间：2013-01-26T17:00:53.327
> 
> 标签：mysql, sql, select, timestamp, unix-timestamp

我正在尝试根据时间戳（存储为 int(10)）从表中选择数据。时间戳对应于 unix 时间戳。我正在使用 MySQL 5。

**问题**：如何根据以下规则选择数据：获取所有记录，其中时间戳是从 9 点到 10 点。没有其他的。时间戳可能是 70 年代或今天。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T17:02:38.127

使用[`HOUR()`](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_hour)（假设列被称为`timestamp`）

```
WHERE HOUR(FROM_UNIXTIME(`timestamp`)) = 9 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T17:05:12.893

如果您将值存储为 UNIX 时间戳，则需要在使用 HOUR 函数之前将该值转换为 MySQL 的时间戳格式。

```
WHERE HOUR(FROM_UNIXTIME(`timestamp`)) = 9 
```

# ruby-on-rails - Nginx、独角兽和 Heroku

> ID：14539272
> 
> 赞同：4
> 
> 时间：2013-01-26T17:01:13.543
> 
> 标签：ruby-on-rails, heroku, nginx, unicorn

我对 ROR 开发相当陌生，目前我正在使用 Herokuo（带有 Thin）来运行我的 Web 应用程序。

我一直在阅读零停机时间部署，我遇到了 nginx 和 unicorn。

谁能向我解释一下 Nginx 到底是什么，它是否与 Heroku 结合使用？独角兽也一样？

用它代替薄有什么好处和坏处？

提前非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T17:30:47.460

nginx 是一个网络服务器；在 Ruby on Rails 应用程序的上下文中，它接收来自用户的请求并将其交给应用程序服务器。现在流行的应用服务器：

*   薄的
*   网砖
*   彪马
*   独角兽

在 Heroku 的上下文中，您可以选择应用程序服务器，但不能选择 Web 服务器。

当您自己托管时，使用独角兽与瘦身可以帮助您实现零停机部署。但是，heroku 可以帮助您使用 Thin/puma/unicorn 中的任何一种自行进行零停机部署。

对于 heroku 上零停机时间的实验性支持：[https ://devcenter.heroku.com/articles/labs-preboot/](https://devcenter.heroku.com/articles/labs-preboot/)

# hyperlink - 单击链接时在页面上的特定位置打开页面？

> ID：14539275
> 
> 赞同：0
> 
> 时间：2013-01-26T17:01:41.643
> 
> 标签：hyperlink

我试图找到一种方法，当用户单击链接时，页面将在页面上的某个位置打开？

有谁知道如何做到这一点？

谢谢。

我已经尝试过了，但它只是正常打开页面。

```
<p id="card">

content

</p>

<a href ="link.php#card">link</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T17:03:37.857

尝试在标签中更改`id`为：`name``<p>`

```
<p name="card">
  content
</p>

<a href="link.php#card">link</a> 
```

**根据评论编辑：**

那么您使用的网址是这个吗？

```
http://localhost/ptb1/profile.php#card?id=4 
```

URL 参数的位置不正确。应该是这个。这些`anchor`标签总是排在最后。[这个网站](http://www.asymmetrics.com/appending-anhors-to-urls-code.asp)有一个很好的解释：

```
http://localhost/ptb1/profile.php?id=4#card 
```

# c# - 在 Metro 应用程序中打印

> ID：14539276
> 
> 赞同：2
> 
> 时间：2013-01-26T17:01:55.007
> 
> 标签：c#, xaml, windows-8, printing, windows-runtime

是否有任何从 C# Windows 8 Metro 应用程序中的 TextBox 控件打印的简单示例？

我的意思是我已经阅读了文档并下载了打印示例，但是由于同一解决方案中有几个不同的示例，因此无法弄清楚它们，这非常令人困惑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T21:59:03.587

几天前有一篇关于打印的文章/博客文章。也许它会帮助你：

[http://blogs.u2u.be/diederik/post/2013/01/20/Printing-from-MVVM-XAML-Windows-8-Store-apps.aspx](http://blogs.u2u.be/diederik/post/2013/01/20/Printing-from-MVVM-XAML-Windows-8-Store-apps.aspx)

# javascript - 检测网页中的鼠标光标类型变化

> ID：14539280
> 
> 赞同：7
> 
> 时间：2013-01-26T17:02:31.223
> 
> 标签：javascript, html, dom-events

当鼠标光标悬停在不同的页面元素上时，是否会触发任何事件？

理想情况下是这样的事件：

```
window.onmousecursorchange = function(e) {
    // e would contain information about the cursor
    // eg. e.type could contain 'text','pointer', etc..
} 
```

**注意：该解决方案不应涉及 jQuery 或其他库**

**更新**：

“可能重复”问题用 jQuery 标记，事实上所有答案（都没有解决问题）基于 jQuery。我正在寻找一个纯 JavaScript 解决方案。如果版主认为这不足以让这个问题保持开放，请随时关闭。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T12:45:22.710

你可以试试这个：

```
document.addEventListener('mouseover',function(e){
    var cursor = e.target.style.cursor;
    console.log(cursor);
}); 
```

它使用事件冒泡来提高性能并节省代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T17:06:41.760

是的，有活动`onmouseenter`

```
$('*').mouseenter(function(){
    var currentCursor = $(this).css('cursor') ;
    console.log( currentCursor );
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T17:10:44.190

```
$(function(){

    $('*').hover(function(){
        $(this).data('hover',1); //store in that element that the mouse is over it
    },

    function(){
        $(this).data('hover',0); //store in that element that the mouse is no longer over it
    });

    window.isHovering = function (selector) {
        return $(selector).data('hover')?true:false; //check element for hover property
    }
}); 
```

# glassfish - Glassfish 没有看到我的 handler-chain.xml

> ID：14539296
> 
> 赞同：0
> 
> 时间：2013-01-26T17:04:16.583
> 
> 标签：glassfish, config

在设置我的第一个处理程序链时，我遵循了许多指南，但其中只有一些特定于将 handler-chain.xml 放在哪里。规范在类路径中说。

因此，我尝试将它们与我的网络服务甚至我的根目录放在同一个目录中，但我不断得到：

未找到处理程序文件 handler-chain.xml。

我正在使用 GlassFish 3.1.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T17:04:16.583

在复制并粘贴我的 handler-chain.xml 之后，我发现如果我将文件放入 web pages/WEB-INF/classes 它就可以了

# xcode - 断点在错误的行中断

> ID：14539300
> 
> 赞同：8
> 
> 时间：2013-01-26T17:04:42.613
> 
> 标签：xcode, breakpoints

![断点错行](../Images/f0dd4a31d2215a59476b27af881c8c1e.png)

屏幕截图应该是不言自明的，但我在确保我的`viewDidAppear`方法被调用时遇到了问题。当我设置断点时，它会中断`viewDidLoad`.

作为旁注，我`NSLog()`的 s 也没有写入控制台。

正如我在其他地方看到的那样，我确实清理了我的构建目录，但没有任何乐趣。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T17:45:18.617

解决方案是（如最初怀疑的那样......缓存数据错误。但是看错了地方。iOS模拟器中的某个人，该应用程序没有被更新并且正在耗尽旧数据。

从模拟器中删除了应用程序（重置内容和设置），一切都很好。

在 Finder 中和通过 Xcode 手动杀死派生数据并没有给出完整的解决方案。

感谢所有快速响应的人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T17:07:37.720

可能有两个原因...

1.你的程序在断点之前的那一行本身就崩溃了。

2.编译后删除了6行，所以断点后面显示6行。

**在代码中放置断点时，切勿输入或删除空行。您不会在正确的行获得断点。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T17:07:21.973

尝试在 [super viewDidLoad] 行添加断点；然后删除它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-26T17:13:33.683

按**command+alt+b**查看所有断点。

选择要删除的断点，然后按删除。

如果问题没有解决，那么请执行以下操作

在项目目标下的“构建设置”中，将“调试”的“优化级别”更改为“无”。

**或者**

**在 xCode4 中：**

您的项目名称 -> 编辑方案信息选项卡（在运行配置中）将构建配置设置为“调试”，调试器 - 设置为“LLDB”（之前是“GDB”）运行你的项目..

# intellij-idea - 来自 checkstyle 配置的 IntelliJ IDEA 代码格式

> ID：14539313
> 
> 赞同：43
> 
> 时间：2013-01-26T17:06:31.913
> 
> 标签：intellij-idea, code-formatting, checkstyle

我决定为 android maven 插件做出贡献。

他们使用非常特定的代码样式格式。我需要一些时间来修改 IDEA 代码格式规则以满足他们的要求。

幸运的是有 checkstyle 配置。我已经为 IDEA 安装了 check-style 插件，并立即查看我当前的格式错误在哪里。

不幸的是，我没有找到将 checkstyle 配置导入 IDEA 格式规则的方法。

如果可能的话，我很感兴趣。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2016-02-08T15:57:57.143

最后有一点：

checkstyle-IDEA 自 4.24.0 起具有 checkstyle 配置的导入功能。

> 现在有一个解决方案：
> 
> 1.  请安装 CheckStyle-IDEA 插件 ( [http://plugins.jetbrains.com/plugin/1065?pr=idea](http://plugins.jetbrains.com/plugin/1065?pr=idea) )，它可以通过插件存储库 (Settings|Plugins|Browse repositories) 找到。
>     
>     
> 2.  转到设置|编辑器|代码样式，选择要导入 CheckStyle 配置的代码样式。
>     
>     
> 3.  点击Manage...|Import..，选择“CheckStyle Configuration”，选择对应的CheckStyle配置文件。单击确定。
>     
>     
> 
> 最后，您将看到一条消息“CheckStyle 配置设置已导入...方案”。
> 
> 如果遇到任何问题，可以在这里为 CheckStyle 插件创建一个新问题：[https](https://github.com/jshiell/checkstyle-idea/issues) ://github.com/jshiell/checkstyle-idea/issues 。这个问题实际上是[https://github.com/jshiell/checkstyle-idea/issues/126](https://github.com/jshiell/checkstyle-idea/issues/126)的副本。
> 
> 该功能可用的 CheckStyle 插件版本为 4.24.0

复制自 [https://youtrack.jetbrains.com/issue/IDEA-61520#comment=27-1292600](https://youtrack.jetbrains.com/issue/IDEA-61520#comment=27-1292600)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-01-26T17:31:14.503

**更新**：自 4.24.0 插件版本开始支持，[详情见这里](https://youtrack.jetbrains.com/issue/IDEA-61520#comment=27-1292600)。

* * *

2013年的原始答案：

[尚不可能](http://youtrack.jetbrains.com/issue/IDEA-61520)，请加注星标/投票以跟踪问题的进展。

[GitHub 上的插件](https://github.com/jshiell/checkstyle-idea)

[如何设置](https://checkstyle-addons.thomasjensen.com/run.html#run-intellij)

[![安装插件](../Images/876d9bfbb627c27e633a1bd6684b4646.png)](https://i.stack.imgur.com/5cJIp.png)

[![在 intellij 中的外观示例](../Images/d9f622e5dcf8050a11faec402718385e.png)](https://i.stack.imgur.com/351s7.png)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-11-04T11:46:27.160

我可以忍受一个丑陋的解决方法：

首先将 Checkstyle 格式导入 Eclipse，如下所述： [How to generate an Eclipse formatter configuration from a checkstyle configuration？](https://stackoverflow.com/questions/984778/how-to-generate-an-eclipse-formatter-configuration-from-a-checkstyle-configurati)

然后从 Eclipse 中导出格式（通过 Windows --> Preferences --> Java --> Code Style --> Formatter -> Edit -> Export 并将生成的 *.xml 文件导入 IntelliJ IDEA

当然，这有点疯狂，特别是如果你身边没有人在运行 Eclipse，因为你必须安装它才能将 checkstyle 格式“翻译”成 IntelliJ 可以读取的格式；但如果每个项目只需执行一次，它可能比手动调整格式要好一些。

# jquery-ui - Jquery 可排序：列表中的列表。子列表不能混合

> ID：14539315
> 
> 赞同：0
> 
> 时间：2013-01-26T17:06:45.263
> 
> 标签：jquery-ui, jquery-ui-sortable

我在列表中有 jquery 可排序列表。在下面的示例中，我想对水果和汽车进行相互排序，但汽车可能不会与水果混合。

此外，Cars 和 Fruit 类别也应该是可排序的，以便 Cars 可以移动到 Fruits 上方。在这种情况下，如果你移动水果，苹果和香蕉应该随之移动。

```
Fruits
    apples
    bananas
Cars
    ford
    volvo 
```

我有：

```
<ul id="sortable">
    <li>Fruits
        <ul id="sortable" > 
          <li > Apples  </li> 
          <li >bananas  </li> 
        </ul>
    </li> 
    <li >Cars
        <ul id="sortable" > 
          <li > Ford  </li> 
          <li >Volvo  </li> 
        </ul>
    </li> 
</ul> 
```

汽车和水果可以正常移动，随身携带物品，但水果和汽车不会与自己的同类呆在一起。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T17:30:26.903

我想到了。

如果我这样做，那么列表会混合：

```
 $( "#sortable" ).sortable(); 
```

但是如果我在整个事情周围放置一个 id = "my_id" 的 div 然后做

```
$( "#my_id ul" ).sortable(); 
```

另一种方法是用 div 包围每个 ul。然后他们可以有相同的ID。

另一种方法是为列表提供不同的 id：

```
 $( "#sortable1",  "#sortable2" ,  "#sortable3").sortable(); 
```

# android - 如何重置 GridView 中的所有 ImageView 背景？

> ID：14539317
> 
> 赞同：1
> 
> 时间：2013-01-26T17:06:50.207
> 
> 标签：android, gridview

在我的应用程序中，我使用带有几个随机放置的 ImageView 的 GridView。用户应该选择一个图像。为了标记选定的，我使用 setBackgroundColor() 作为视图。我的问题是，如果用户现在想选择另一个图像，则必须重置先前选择的图像（或网格中的所有图像）的背景（或设置为白色）。知道怎么做吗？

或者，是否有另一种可能性来实现它，以便突出显示网格中的选定图像？

编辑：感谢您在评论中的所有提示。下面的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T17:14:38.587

再次设置适配器

```
 @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.grid_layout);

        Context context = this;

        gridView = (GridView) findViewById(R.id.grid_view);

        gridView.setAdapter(new ImageAdapter(this));

        gridView.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView parent, View v,
                    int position, long id) {
            gridView.setAdapter(new ImageAdapter(context));
            v.setBackgroundColor(Color.CYAN);
            }
        });
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T19:07:49.033

好的，我检查的一个可能的工作解决方案（Rachel Gallen 的链接之一）是使用

```
gridView.getChildAt(previous).setBackgroundColor(Color.WHITE); 
```

我使用的另一个解决方案是在静态变量中保存前一个视图的脏 hack：

```
...
View previousView = null;
...
 @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.grid_layout);

        gridView = (GridView) findViewById(R.id.grid_view);

        gridView.setAdapter(new ImageAdapter(this));

        gridView.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView parent, View v,
                    int position, long id) {

            if (previewView != null) {
                previewView.setBackgroundColor(BACKGROUNDCOLOR);
            }
            previewView = v;
            v.setBackgroundColor(HIGHLIGHTCOLOR);
            }
        });
    } 
```

# python - python编码器和解码器

> ID：14539319
> 
> 赞同：1
> 
> 时间：2013-01-26T17:07:02.470
> 
> 标签：python, encoding, decode

我想使用文本编码构建一个编码器和解码器。

字符串“AAABBBBCDDDDDDDDDDEEDDDD”作为输入，返回字符串“A3B4C1D10E2D4”，其中每个字母符号后跟其在字符串中的频率。解码器反转该过程。

想要帮助开始使用python。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T17:18:55.333

检查这个问题不是你想要的，但它可以帮助你尝试做到这一点

[确定密文的字母频率](https://stackoverflow.com/questions/992408/determining-letter-frequency-of-cipher-text-in-python)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T17:46:49.737

该解决方案可以通过不同的方式进行处理，并且作为基于循环的解决方案非常容易，并且留给您作为练习

为了让您体验 Python 电池的强大功能，我提出了一个使用 groupby 的解决方案

```
>>> ''.join("{}{}".format(k, sum(1 for e in v))
        for k,v in groupby("AAABBBBCDDDDDDDDDDEEDDDD"))
'A3B4C1D10E2D4' 
```

该解决方案的显着特点

1.  [itertools.groupby](http://docs.python.org/2/library/itertools.html#itertools.groupby)将相似的连续数据分组为一个键值对，其中键是重复元素，值是重复的组
2.  由于该组是一个生成器，因此[len](http://docs.python.org/2/library/functions.html#len)在这里可能不起作用，但计算任何非序列可迭代长度的一种可能方法是使用[sum](http://docs.python.org/2/library/functions.html#sum)
3.  [str.join](http://docs.python.org/2/library/stdtypes.html#str.join)连接一个可迭代对象以生成一个带有任何提供的分隔符的字符串，在这种情况下它是一个空字符串

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T17:14:04.197

我将从查看 python[字符串](http://docs.python.org/2/library/string.html)文档开始，特别是从那里查找或计数和工作。尽管我不确定如果字符串中的实际内容以这种方式很重要，您是否真的可以解码您编码的任何内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T17:22:02.587

cnoder 的一种可能解决方案是简单地遍历字符串并计算字符出现次数，不是很花哨，而是 O(n)。

```
def encode(s):
    last  = s[0]
    count = 0
    for c in s:
        if last != c:
            yield '%s%i' % (last, count)
            last = c
            count = 0
        count += 1
    yield '%s%i' % (last, count) 
```

对于解码器，您可以使用正则表达式为您很好地拆分字符串，无需编写自己的解析器。

```
import re

def decode(s):
    for c, n in re.findall(r'(\w)(\d+)', s):
        yield c * int(n) 
```

给定您的测试输入

```
s = 'AAABBBBCDDDDDDDDDDEEDDDD'

encoded = ''.join(encode(s))
print encoded

decoded = ''.join(decode(encoded))
print decoded 
```

结果是

```
A3B4C1D10E2D4
AAABBBBCDDDDDDDDDDEEDDDD 
```

还要注意，这里没有真正的理由使用 yield，当然你也可以先在 en-/decode 函数中构建字符串，然后返回。

# php - PHP对大量数据的自然排序内存问题

> ID：14539320
> 
> 赞同：0
> 
> 时间：2013-01-26T17:07:12.083
> 
> 标签：php, mysql, sorting, memory, natural-sort

我正在使用 php 的自然排序算法`natsort`，但我考虑了内存使用情况。

事情就是这样。脚本从 mysql 中提取数据并将结果放入数组中，然后`natsort`对其进行应用。但这就是问题所在。行的文本可能很长，可能有数百行。

示例代码：

```
$array = array();
while ($row = $db->getResults()) {
  $array[$row->code] = $row->text;
}

if (empty($array)) {
  uksort($array, "strnatcmp");
} 
```

我想知道这对记忆有何影响？这是适当的方法还是我应该做一些更有效、更愉快的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T18:36:57.107

您可以做的一件事是存储一个新列，该列复制您要排序的列，但以转换格式存储，当使用常规排序算法时，该格式将自然排序。

从概念上讲，您可以通过将零填充数字序列的长度与字符串中可能出现的最长数字序列一样长来做到这一点。

我的解决方案并不完全坚固，但如果你的字符串只有已知最大长度的数字序列，那么你可以用零填充它们到已知的最大长度。例如，如果您的 cd 曲目标题中嵌入了曲目编号，例如：

```
1 Foo
2 Bar
...
10 Baz 
```

也许您决定可能的最长数字序列是 3（999 个可能的轨道），因此您可以填充数字序列，例如

```
001 Foo
002 Bar
...
010 Baz 
```

这适用于具有多个数字序列的字符串。

示例 php 代码，尽管您可以编写一个 mysql 存储函数来执行此操作，然后在表上使用插入和更新触发器，以便透明地维护它。

```
$input = 'a44b1c399d4';
$nat = preg_replace_callback('#\d+#', function($m) {
    return str_pad($m[0], 3, '0', STR_PAD_LEFT);
}, $input);
echo $nat; // a044b001c399d004 
```

然后只需通过 mysql 排序

```
order by natsort_column 
```

这还允许您在该列上放置索引，从而为您提供良好的排序性能。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-26T17:10:59.647

您需要使用 MySQL `WHERE`、`GROUP BY`和`ORDER BY`子句，这样您就不会在 PHP 级别浪费时间来解析数千条不需要的记录。

# comparison - 如何在 Smalltalk 中比较集合

> ID：14539326
> 
> 赞同：8
> 
> 时间：2013-01-26T17:07:37.390
> 
> 标签：comparison, set, identity, smalltalk

有人告诉我必须将它们排序到 SortedCollection，但 Set 元素不可比较（只有身份比较，我不知道如何用于排序）。

**那么像 set1 = set2 那样比较它们是否安全，或者我是否需要对它们进行排序（身份如何？）。**

我在考虑这样的排序块： [:pre :succ | pre OID < succ OID]，这行得通吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-26T17:56:53.213

怎么样

```
(set1 size = set2 size) and: [set1 includesAllOf: set2] 
```

根据 Smalltalk 实现，您还可以使用`=`. 例如，在 Squeak 中，它是这样实现的：

```
= aSet
    ...
    self size = aSet size ifFalse: [^ false].
    self do: [:each | (aSet includes: each) ifFalse: [^ false]].
    ^ true 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-26T18:26:52.127

如果要比较两组，可以放心使用`set1 = set2`. 使用相等比较集合的元素。如果两个集合包含相等的对象，则它们是相等的。

对它们进行排序对于相等比较没有意义。

请注意 Set 相等的实现（大致）如下：

*   如果两组大小相等
*   如果 set2 的所有元素都包含在 set1 中

-> 因为它们具有相同的大小并且 set1 的所有元素都在 set2 中，所以它们必须相等。

# java - 如何从另一个类中获取字符串？

> ID：14539328
> 
> 赞同：1
> 
> 时间：2013-01-26T17:07:42.740
> 
> 标签：java, string, class

到处搜索试图找到如何做到这一点。我想从一个类中获取一个字符串，我在进入第二个类之前设置了变量，并允许我在这个类中将它用作字符串。

基本上有一个名为 LastName 的字符串，我想在另一个类中使用它。

如果需要，这是我的代码。

首次登录类：

```
import java.util.Scanner;

public class Login {
public void LoginScreen() {

    Agent AgentObject = new Agent();
    Citizen CitizenObject = new Citizen();

    String FirstName;
    String LastName;

    Scanner input = new Scanner(System.in);

    System.out.println("Welcome!");
    System.out.print("Please Enter Last Name: ");
    LastName = input.next();
    System.out.print("Please Enter First Name: ");
    FirstName = input.next();
    System.out.println("Hello " + FirstName + " " + LastName);

    System.out.print("Enter Password: ");
    String userinput = input.next();
    if (userinput.equals("Timmo")) {
        AgentObject.WelcomeAgent();
    } else {
        CitizenObject.WelcomeCitizen();
    }

}
} 
```

第二代理类：

```
public class Agent {
public void WelcomeAgent() {
    Welcome WelcomeObject = new Welcome();
    Login LoginObject = new Login();

    System.out.println("Access Granted");
    System.out.print("Loading Data  ");
    int progress = 0;
    while (progress <= 100) {
        System.out.print(progress + " ");
        progress++;
    }
    System.out.println("    Data Loaded");

    System.out.println("Welcome Agent " + LastName);
    LoginObject.LoginScreen();
}
} 
```

非常感谢任何帮助。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T17:14:09.093

我可以看到您可能对 Java 很陌生 - 所以您可能缺乏一些基础知识。

在您的情况下，最好将字符串作为参数传递给方法，例如

```
public void WelcomeAgent(String lastName) { 
```

并且当您调用该方法时，将该值发送到例如

```
AgentObject.WelcomeAgent(userinput); 
```

顺便说一句，一些约定提示。变量和函数应该以小写字母开头。例如

```
String lastName; 
```

和

```
Citizen citizen = new Citizen(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T17:22:20.143

您想访问 Agent 类中 LastName 的值吗？

如果你这样改怎么办

```
public class Login {

 String FirstName, LastName;

public void LoginScreen() {

Agent AgentObject = new Agent();
Citizen CitizenObject = new Citizen();
....
LastName = input.next();
 ...
 }

 public String getLastName()
 { return LastName; } 
```

并在课堂代理

您可以使用 LoginObject.getLastName() 来获取它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T17:28:59.310

为你的班级写一个`getter`方法。在类中设置值后，将此类对象的引用发送到您要使用的其他类。最后调用该方法并使用它。`lastName``Login``Login``onject.getLastName()`

**例子：**

假设`Login`类和`Agent`类在 Login 类中声明，然后将 Login 类的引用传递给 Agent 类，并使用我上面`lastName`所述的方法从 Agent 类访问它。`getter`

# c++ - 存档没有索引；运行 ranlib 在 Dev C++ 中添加一个

> ID：14539331
> 
> 赞同：0
> 
> 时间：2013-01-26T17:08:07.333
> 
> 标签：c++

我`mysqlclient.lib to mysqlclient.a`使用**ar**命令进行了转换

```
ar rcs mysqlclient.a mysqlclient.lib 
```

现在我不断收到这个错误 `Archive has no index; run ranlib to add one`

我运行**ranlib**，`mysqlclient.a` 但仍然出现上述无索引错误:(不知道如何解决这个问题，所以需要帮助

```
ranlib libmysqlclient.a 
```

我正在为我的项目使用 dev c++

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T00:57:09.767

Unix`libxyz.a`是`ar(1)`对象 ( `.o`) 文件的存档，其索引由`ranlib(1)`（AFAIU，GNU`ar(1)`无需额外步骤即可创建索引）创建。您正在从单个`*.lib`文件创建“库”，因此`ar(1)`不会创建索引（看不到`.o`文件）。

`.lib`来自哪里？这是什么环境？

# cassandra - 控制 Cassandra 中的主要压缩

> ID：14539333
> 
> 赞同：1
> 
> 时间：2013-01-26T17:08:20.830
> 
> 标签：cassandra

我对 Cassandra 比较陌生，所以如果我遗漏了一些明显的东西，我会提前道歉。因此，我在单节点集群中使用 cassandra 1.0.12 并进行大量写入和删除（大约 1000/秒）。由于我的磁盘空间不断增加，写入比删除更频繁。如果我理解正确，压缩将帮助我实现这一目标（主要和次要）。所以我将 setGc_grace_seconds 更改为 0 并将 setMin_compaction_threshold 更改为 2。即使在设置这些值之后，我看到该列族的 SSTable 计数为 4 ，当 SSTable 计数为 2 时它不应该启动压缩吗？此外，主要压缩何时开始以及如何控制它（我想更频繁地运行它）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-27T16:46:10.593

如果你使用 Size-tiered compaction，minor compaction 有时会在磁盘上至少创建 min_compaction_threshold**类似大小**的 SSTables 后自动触发。因此，在您的情况下，有时在创建了两个类似大小的 SSTable 之后，小型压缩将启动并将这两个 SSTable 合并到一个新的 SSTable 中。 [大小分层压缩的调整选项](http://www.datastax.com/docs/1.0/operations/tuning)

主要压缩是通过[nodetool](http://www.datastax.com/docs/1.0/references/nodetool)手动触发的。*“对于键空间中的每个列族，这会将所有现有的 SSTable 压缩到一个 SSTable 中”。*

# c# - 备份和恢复数据库

> ID：14539334
> 
> 赞同：-3
> 
> 时间：2013-01-26T17:08:42.240
> 
> 标签：c#, sql-server-2008, sql-server-ce, backup, database-backups

我是`c#`最近 3 个月学习的新手，我使用 sql server 作为我的数据库。我转到菜单并创建一个基于服务的数据库，并在那里制作表格我正在处理 winform 我有菜单 datagridview，它以指定的形式显示数据。现在我想知道：我可以在特定文件夹或文件中制作数据库副本吗？可能吗？我听说我可以将 csv 文件加载到 datagriview 中。如何制作 csv 文件或其他文件，`.mdf`以便在意外删除数据后恢复。还有其他方法吗？

我从中得到了一些提示，[但](https://stackoverflow.com/questions/6114046/how-to-create-and-restore-backup-of-database-using-winform)它是不完整的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T17:25:01.927

为什么不用sql server（ms sql management studio）自带的备份工具？您可以在服务器上对定期备份进行编程（与执行或不执行客户端程序无关。

是的，您可以导出为 csv 或其他文本格式，但这不是推荐的方式。如果您正在处理事务怎么办：您应该复制该数据吗？还是丢弃它？如果您从客户端对备份进行编程，则必须考虑最终的恢复过程。你也想写一个恢复程序吗？您应该记住表的恢复顺序。如果您将来更改数据库的结构怎么办？

结论：使用标准流程来备份/恢复您的数据库，除非您有充分的理由不这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T17:44:40.513

使用 SQL Server Management Studio 制作和恢复备份。请下载SQL server management studio，google一下很容易找到。然后创建或附加您的数据库。右键单击数据库有一个数据库上下文菜单，然后选择所有任务。您应该能够看到备份还原和其他选项。请关注有关此主题的一些 YouTube 视频，这些视频应该可以帮助您入门。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T17:48:23.977

看看下面的链接。这完全是关于在 SQL Compact Edition 中维护数据库。查看最后的“备份/恢复/删除”部分：

[http://technet.microsoft.com/en-us/library/ms172411(v=sql.100).aspx](http://technet.microsoft.com/en-us/library/ms172411(v=sql.100).aspx)

# windows - 将上一个输出批量用于下一个命令

> ID：14539335
> 
> 赞同：0
> 
> 时间：2013-01-26T17:08:50.863
> 
> 标签：windows, batch-file, cmd, output

我想为下一个命令使用输出，所以我在 DESKTOP 上找到 ZIP 文件：

```
dir [DESKTOP PATH] /b /s /a-d | findstr .zip 
```

所以.. 输出是 ZIP DESTINATION ：

```
C:\Users\[Profile]\Desktop\forexample.zip
C:\Users\[Profile]\Desktop\forexample2.zip 
```

我使用带有 cmd 选项的特殊软件使用以下命令删除 ZIP 中带有 *.exe 扩展名的文件：

```
zip [ZIP DESTINATION] -d *.exe 
```

是否可以为下一个命令使用第一个输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T17:50:59.030

我想你可以使用：

```
for /f %%i in ('dir /b /s /a-d %userprofile%\desktop\*.zip') do zip %%i -d *.exe 
```

# methods - NSMutableArray.count 始终为零，但对象存在并且可以使用

> ID：14539337
> 
> 赞同：0
> 
> 时间：2013-01-26T17:08:55.090
> 
> 标签：methods, count, nsmutablearray, zero

我正在使用一种方法来填充数组。在我返回数组之前，我可以用 friendsArray.count 计算对象的数量，我得到 3。在我使用数组的方法中，我用下面的代码调用它。

```
 userHomeDetails   *friendsInstance =[[userHomeDetails alloc] init];
     self.friendsImageInstance = [friendsInstance getFriendsImage:1];
     NSLog(@"size of array %d", friendsImageInstance.count); 
```

userHomeDetails 是一个 NSObject，我在其中保存了调用数据库的方法。getfriendsImage 是我调用数据库的方法，在返回数组之前，我可以看到我的计数为 3。friendsImageInstance 是一个声明、分配和初始化的 NSMutableArray，这是我要计数的数组。

当我检查friendsImageInstance.count 的计数时，它返回0。但是它有数据，我可以使用它并填充我的表没有问题。

任何线索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T06:22:22.117

知道了。很简单我没有合成friendsImageInstance。完成并且所有工作。感谢 iNailuY 看一看我的问题，不胜感激。

# json - 如何验证 JSON 数据是否满足 JSON Schema 规范？

> ID：14539338
> 
> 赞同：4
> 
> 时间：2013-01-26T17:08:59.537
> 
> 标签：json, jsonschema

我在一个名为的文件`B.json`和另一个具有名为`BSchema.json`.

我想知道如何验证 JSON 数据是否满足 JSON Schema 规范，例如，在 Ubuntu 和 Windows 中，我可以使用`xmllint`命令行中的程序来验证相同的内容，使用以下命令：`xmllint --schema XMLSchemaFile.xsd --noout DataFile.xml`. 那么，这个命令（在 Linux 或 Windows 中）是否有任何替代方法允许我**输入这两个文件**并检查 JSON 数据是否满足 JSON Schema？

注意：如果在 MacOS 中还有其他类似的命令，请添加到您的答案中，以便问题对所有平台的用户都有用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-09-02T07:12:27.607

从 2.4 版开始，[jsonschema](https://github.com/Julian/jsonschema)包含一个命令行程序，用于根据另一个文件中指定的模式检查一些输入 json 文件。

你可以这样称呼它：

```
jsonschema -i B.json BSchema.json 
```

这是我将对象放置在数组应放置的位置时的一些示例输出：

> {u'description': u'Doubles 资源集合。'}: {u'description': u'Doubles 资源集合。'} 不是 u'array' 类型

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-16T12:22:49.190

There are lot of command-line tools available that will allow you to validate a json against json schema

If it is a one-time thing , you can look at [json-spec](https://github.com/johnnoone/json-spec). But I found it lacking in following references in json schema.

But if you need a CI tool and you use node.js/grunt as your dev environment, use [tv4](https://github.com/geraintluff/tv4) and its grunt job [grunt-tv4](https://github.com/timbeadle/grunt-tv4)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-14T20:43:01.600

在 Powershell Core 中有一个内置方法可以让您进行验证`test-json`。PowerShell 语法：`Test-Json [-Json] <String> [[-Schema] <String>]`. 有关更多信息，请查看此处：[https ://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.utility/test-json](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.utility/test-json)

在问题中还询问了环境。Powershell Core v.7.0+ 是跨平台的，因此可以在任何地方进行此验证。如果你不能或不想使用 PowerShell，你可以试试这样的 Python 工具：[Validate JSON file syntax in shell script without install any package](https://stackoverflow.com/questions/42385036/validate-json-file-syntax-in-shell-script-without-installing-any-package/47289898)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-01-17T15:37:11.213

这是一个基于 Web 的工具，它看起来可以做你想做的事：http: [//jsonschemalint.com/](http://jsonschemalint.com/)

它看起来是基于这个库：[https ://github.com/garycourt/JSV](https://github.com/garycourt/JSV)

我希望这有帮助！

# jquery - 如何正确地动态添加一个复选框并用jquery定位它

> ID：14539349
> 
> 赞同：1
> 
> 时间：2013-01-26T17:10:47.260
> 
> 标签：jquery, checkbox, dynamically-generated

我正在尝试使用 jquery 来：

1-动态添加一个复选框 2-正确定位它。

到目前为止，我可以做 1 或 2，但不能做 1 和 2。

这是我的 HTML 代码：

```
<!-- language: lang-html -->
<body>   
 <div id='myDiv'></div>
 <div id='myOtherDiv'>
 <button id='myButton'>my button</button>
 </div> 
</body> 
```

这是我的js代码：

```
<!-- language: lang-js -->
jQuery(document).ready(

function ($)
{
  jQuery.noConflict();

function createCheckbox()
{
var   $myCheckbox   = $('<input id="myCheckbox" type="checkbox"></input><label for="myCheckbox">my checkbox</label>');
 $('#myDiv').append($myCheckbox);

 /*                                                                                                                                                          
  The following line fixes the "button displayed as unpressed" problem                                                                          
  but it breaks the .position call                                                                                                                           
 */
 // $myCheckbox = $('#myDiv > input');                                                                                                                       

    /* myCheckbox */
   $myCheckbox.button({
                      text: false,
                      icons: { primary: "ui-icon-refresh"}
      });

  $myCheckbox.change(
      function()
              {
                  if($myCheckbox.is(":checked"))
                  { alert('checked'); }
        else
                  {   alert('unchecked');}
              }
    );

var $myButton = $('#myButton');
$myCheckbox.position({my:"left", at:"right", of:$myButton });
}

createCheckbox();

}); 
```

上面的代码有效，但是在单击复选框并单击“已选中”警报上的“确定”后，即使实际复选框已选中，jquery 复选框按钮仍显示为未选中。

通过反复试验，我通过在追加后重新选择我的复选框来解决该问题。我不确定为什么会这样。

```
$myCheckbox = $('#myDiv > input'); 
```

当我取消注释上面的行时，复选框会正常运行并在选中时显示为选中状态。但是随后对 .position 的调用无法正确定位复选框按钮。

见：http: [//jsfiddle.net/roumbaba/uM3sS/1/](http://jsfiddle.net/roumbaba/uM3sS/1/)

注意：仅当我动态添加输入/复选框时才会出现此问题。如果我只添加一个简单的按钮（使用普通按钮而不是位置和检查显示状态都可以正常工作。

在整个过程的运作方式中，我显然遗漏了一些重要的东西。特别是我不明白为什么用该行重新选择我的复选框

```
 $myCheckbox = $('#myDiv > input'); 
```

更改检查状态按钮的行为。为什么我这样做后位置不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T17:39:30.177

如评论中所述。`.position` **不接受任何论据**。

我发现以下方法更可靠和**可读**：

```
$(document).ready(function() {
  $('checkbox').live('change', function() {
    if($('#myCheckbox').is(":checked"))
      { alert('checked'); }
    else
      { alert('unchecked'); }
  });
  createCheckbox();
}

function createCheckbox() {
  $('<input/>', {
    id: 'myCheckbox',
    type: 'Checkbox'
  }).appendTo('#myDiv');

  $('<label/>', {
    for: 'myCheckbox',
    text: 'my checkbox'
  }).appendTo('myCheckbox');

  $('<button/>', {
    text: false, // Necessary?
    icons: { primary: "ui-icon-refresh" }
  }.appendTo('myCheckbox');
} 
```

希望我已经正确理解您要做什么。正如其他人所提到的，我肯定会使用 CSS 来进行正确定位，而不是 jQuery。`myDiv`放置在 的右侧应该相当简单`myOtherDiv`。只需切换它们的顺序并使用`float: left`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T19:11:49.590

位置问题是我在复选框上使用了 .position 但应该在复选框的标签上使用它。显然 jqueryui 使用复选框的标签而不是复选框本身来显示它的按钮。

```
<!-- language: lang-js --> 
var $myCheckboxLabel = $("label[for='myCheckbox']");
$myCheckboxLabel.position({my:"left", at:"right", of:$myButton }); 
```

这解决了位置问题，同时仍保持复选框状态正常工作。

我仍然不清楚为什么我必须首先将我的复选框附加到 dom，然后再次选择它，以便在调用 .button 后拥有一个正常工作的复选框/按钮。

# ruby-on-rails - 在 Ruby / Rails 中使用 if/then 创建当前状态的范围

> ID：14539353
> 
> 赞同：0
> 
> 时间：2013-01-26T17:11:26.720
> 
> 标签：ruby-on-rails, ruby, if-statement, scope

我试图弄清楚如何为“迟到”的工作创造一个范围。

“迟到”的工作将是状态为 :in_progress 的工作，其中 :due 日期早于今天。

（我没有使用任何状态宝石，而是使用 Postgres 作为数据库）。

这就是我到目前为止所做的。我对 if then 语句相当陌生，并且到目前为止只创建了基本范围。关于如何在我的模型中解决这个问题的任何想法？

＃ 状态

```
 STATES = %w[bids in_progress complete canceled]
  delegate :bids?, :in_progress?, :complete?, :canceled?, to: :current_state

  def current_state
    (events.last.try(:state) || STATES.first).inquiry
  end 
```

＃ 范围

```
 def self.late
    if @current_state_jobs == :in_progress?
      where('due < ?', Time.now) 
    else
      nil 
    end
  end 
```

我可以在后期范围中使用第一个 current_state 范围吗？我不知道

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T18:35:11.483

我不确定我是否完全理解您的设置，但我当然可以帮助您朝着正确的方向前进。

我不相信您的委托声明会起作用，因为据我所知，它需要将`:on`选项设置为某种对象而不是方法。就您而言，我认为您需要委托给的是`state.inquiry`. 可能有办法做到这一点，但恐怕我不知道如何。

以下是对我很有帮助的关于代表的快速讨论：

[http://www.simonecarletti.com/blog/2009/12/inside-ruby-on-rails-delegate/](http://www.simonecarletti.com/blog/2009/12/inside-ruby-on-rails-delegate/)

考虑到这一点，这些委托方法仍然是实例方法，并且作用域需要类方法。

我不确定`@current_state_jobs`应该是什么，但这是一个实例变量，你在一个类函数中，所以我认为它不起作用。我认为你真正要找的只是`where(state: "in_progress")`.

接下来，您要查询实际上有点棘手的日期。如果您不小心，`Time.now`在第一次加载模块时会被绑定。为防止这种情况，您需要使用`lambda`函数来确保时间基于函数被调用的时间。

此外，您在描述中说您希望该方法包含“比今天更早”的任何内容，但您的查询所做的是“比现在更早”的任何内容。

总而言之，我认为您需要这样的东西：

```
scope :late, lambda { where("state=? and due < ?", "in_progress", Date.today) } 
```

如果是我，我可能会将它分成两个不同的范围，例如`in_progress`然后`overdue`只有`:late`be `in_progress.overdue`，但如果你不打算使用其他两个范围中的任何一个，那么它是不必要的。

我希望这会有所帮助。

# java-7 - 将参数-vm改成其他jdk,SOS时MyEclipse 10.7启动失败

> ID：14539355
> 
> 赞同：0
> 
> 时间：2013-01-26T17:11:31.843
> 
> 标签：java-7, myeclipse, jvm-arguments

**为什么我无法更改 myeclipse 10.7 64bit 配置文件：myelispse.ini，更改配置参数“-vm”将无法启动。顺便说一下，我的操作系统是 win8 64bit，我的 jdk 工作没有任何问题。**

## 有人可以告诉我原因并帮助我解决问题，非常感谢！

好的配置就是这样：

```
#utf8 (do not remove)
#utf8 (do not remove)
-startup
../Common/plugins/org.eclipse.equinox.launcher_1.2.0.v20110502.jar
--launcher.library
../Common/plugins/org.eclipse.equinox.launcher.i18n.win32.win32.x86_64_4.2.0.v201201111650
-install
G:/Program Files/MyEclipse/MyEclipse 10
-vm
G:/Program Files/MyEclipse/Common/binary/com.sun.java.jdk.win32.x86_64_1.6.0.013/bin/javaw.exe
-vmargs
-Xmn512m
-Xms1024m
-Xmx1024m
-XX:SurvivorRatio=4
-XX:PermSize=256m
-XX:ReservedCodeCacheSize=128m
-Xverify:none
-Xnoclassgc
-XX:+UseParNewGC
-XX:+UseConcMarkSweepGC
-XX:MaxTenuringThreshold=10
-XX:ParallelGCThreads=4
-XX:CMSInitiatingOccupancyFraction=85
-XX:+DisableExplicitGC
-Dosgi.nls.warnings=ignore 
```

* * *

错误的配置：

```
#utf8 (do not remove)
#utf8 (do not remove)
-startup
../Common/plugins/org.eclipse.equinox.launcher_1.2.0.v20110502.jar
--launcher.library
../Common/plugins/org.eclipse.equinox.launcher.i18n.win32.win32.x86_64_4.2.0.v201201111650
-install
G:/Program Files/MyEclipse/MyEclipse 10
-vm
G:/Program Files/Java/jdk1.7.0_09/bin/javaw.exe
-vmargs
-Xmn512m
-Xms1024m
-Xmx1024m
-XX:SurvivorRatio=4
-XX:PermSize=256m
-XX:ReservedCodeCacheSize=128m
-Xverify:none
-Xnoclassgc
-XX:+UseParNewGC
-XX:+UseConcMarkSweepGC
-XX:MaxTenuringThreshold=10
-XX:ParallelGCThreads=4
-XX:CMSInitiatingOccupancyFraction=85
-XX:+DisableExplicitGC
-Dosgi.nls.warnings=ignore 
```

错误日志：

```
!SESSION 2013-01-26 23:51:39.452 -----------------------------------------------
eclipse.buildId=unknown
java.version=1.7.0_09
java.vendor=Oracle Corporation
BootLoader constants: OS=win32, ARCH=x86_64, WS=win32, NL=zh_CN
Command-line arguments:  -os win32 -ws win32 -arch x86_64

!ENTRY org.eclipse.equinox.app 0 0 2013-01-26 23:51:41.347
!MESSAGE Product com.genuitec.myeclipse.product.ide could not be found.

!ENTRY org.eclipse.osgi 2 0 2013-01-26 23:51:50.086
!MESSAGE One or more bundles are not resolved because the following root constraints are not resolved:
!SUBENTRY 1 org.eclipse.osgi 2 0 2013-01-26 23:51:50.086
!MESSAGE Bundle reference:file:../Common/plugins/com.genuitec.eclipse.core_10.7.0.me201211011550.jar was not resolved.
!SUBENTRY 2 com.genuitec.eclipse.core 2 0 2013-01-26 23:51:50.087
!MESSAGE Missing host null_0.0.0.
!SUBENTRY 1 org.eclipse.osgi 2 0 2013-01-26 23:51:50.087
!MESSAGE Bundle reference:file:../Common/plugins/com.genuitec.eclipse.jniwrapper_9.0.0.me201105051700.jar was not resolved.
!SUBENTRY 2 com.genuitec.eclipse.jniwrapper 2 0 2013-01-26 23:51:50.087
!MESSAGE Missing host null_0.0.0.
!ENTRY org.eclipse.osgi 2 0 2013-01-26 23:51:52.696
!MESSAGE The following is a complete list of bundles which are not resolved, see the prior log entry for the root cause if it exists:
!SUBENTRY 1 org.eclipse.osgi 2 0 2013-01-26 23:51:52.696
!MESSAGE Bundle com.genuitec.eclipse.aspphp.core_9.0.0.me201108091322 [1224] was not resolved.
!SUBENTRY 2 com.genuitec.eclipse.aspphp.core 2 0 2013-01-26 23:51:52.696
!MESSAGE Missing required bundle com.genuitec.eclipse.core_0.0.0.
!SUBENTRY 1 org.eclipse.osgi 2 0 2013-01-26 23:51:52.696
!MESSAGE Bundle com.genuitec.eclipse.aspphp.ui_9.0.0.me201108091322 [1225] was not resolved.
!SUBENTRY 2 com.genuitec.eclipse.aspphp.ui 2 0 2013-01-26 23:51:52.696
!MESSAGE Missing required bundle com.genuitec.eclipse.core_0.0.0.
!SUBENTRY 2 com.genuitec.eclipse.aspphp.ui 2 0 2013-01-26 23:51:52.696
!MESSAGE Missing required bundle com.genuitec.eclipse.aspphp.core_0.0.0.
!SUBENTRY 2 com.genuitec.eclipse.aspphp.ui 2 0 2013-01-26 23:51:52.696
!MESSAGE Missing required bundle com.genuitec.eclipse.webdesigner3_0.0.0.
!SUBENTRY 2 com.genuitec.eclipse.aspphp.ui 2 0 2013-01-26 23:51:52.696
!MESSAGE Missing required bundle com.genuitec.eclipse.core.common_0.0.0.
!SUBENTRY 1 org.eclipse.osgi 2 0 2013-01-26 23:51:52.696
!MESSAGE Bundle com.genuitec.eclipse.ast.deploy.core_10.1.0.me201211011550 [1226] was not resolved.
!SUBENTRY 2 com.genuitec.eclipse.ast.deploy.core 2 0 2013-01-26 23:51:52.696
!MESSAGE Missing required bundle com.genuitec.eclipse.j2eedt.core_0.0.0.
...................so many erorr......................... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T21:59:44.743

如果从 1.7 JDK 开始，MyEclipse 10.7 就可以正常工作。我看不出您的配置有任何问题 - 快速健全性检查，您确定您指向的 1.7 虚拟机是 64 位虚拟机吗？您可以通过转到命令行上的 bin 文件夹并键入“java -version”来确认它是否报告了 64 位 VM。

您有什么特别的原因要从 1.7 虚拟机开始吗？即使您将默认 VM 参数保留在 ini 文件 (1.6) 中，您仍然可以在 JRE 首选项页面上配置 1.7 JRE / JDK 并在您的应用程序中使用它和/或将其设置为工作区默认 JRE。

# android - android - 自定义ListView、getView方法

> ID：14539356
> 
> 赞同：2
> 
> 时间：2013-01-26T17:11:32.917
> 
> 标签：android, android-listview, android-inflate

好吧，我投票删除了我以前的类似问题以保持清洁。问题：我正在尝试使用自定义`ListView`在聊天应用程序中显示消息。我现在设法根据用户的输入设置文本，但我在`getView()`方法上遇到了一些问题。您可以在下面的图片中看到问题：在错误的位置添加了膨胀的布局。

![在此处输入图像描述](../Images/8ac5675e24794b66eb7aa3471e8c0d48.png)

这应该以 test 开始，以 test5 结束。我想该`getView()`方法应该被调用 6 次，因为 6 行被膨胀了？但是我在这个方法中添加了一个日志，发现它被调用了 20 多次！为什么这样？

![在此处输入图像描述](../Images/16b1646210cedf809b7c53e178fcbd0b.png)

我的代码如下：

适配器类：

```
public final class ChatAdapter extends BaseAdapter {
private Context context;
ViewHolder holder;

private ArrayList<String> messages;

public ChatAdapter(Context context, ArrayList<String> chat) {

    this.context = context;
    this.messages = chat;
    Log.d("ChatAdapter", "called constructor");

}

public int getCount() {
    return messages.size();
}

public Object getItem(int position) {
    return messages.get(position);
}

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView, ViewGroup viewGroup) {

    if (convertView == null) {
        LayoutInflater inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        convertView = inflater.inflate(R.layout.row, null);

        holder = new ViewHolder();
        holder.message = (TextView) convertView
                .findViewById(R.id.tvMessage);
        holder.timestamp = (TextView) convertView.findViewById(R.id.tvTS);
        holder.indicator = (ImageView) convertView
                .findViewById(R.id.imgInd);

        String message = (String) getItem(position);
        holder.message.setText(message);
        holder.timestamp.setText(generateTimestamp());

        convertView.setTag(holder);

    } else {
        holder = (ViewHolder) convertView.getTag();

    }
    Log.d("ChatAdapter", "called getView");
    return convertView;
}

@SuppressLint("SimpleDateFormat")
public String generateTimestamp() {
    SimpleDateFormat sdf = new SimpleDateFormat("HH:mm");
    String ts = sdf.format(new Date());

    return ts;
}

public static class ViewHolder {
    public TextView message;
    public TextView timestamp;
    public ImageView indicator;
} 
```

聊天活动：

```
public class ChatActivity extends ListActivity {

private EditText input;
private String tmpMessage;
ListView lv;
ChatAdapter adapter;
ArrayList<String> messages;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.lis);
    Button send = (Button) findViewById(R.id.btnSend);
    input = (EditText) findViewById(R.id.etInput);
    lv = getListView();

    messages = new ArrayList<String>();
    Log.d("Chat", "arrayList created");
    adapter = new ChatAdapter(this, messages);
    lv.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
            // TODO
        }
    });

    lv.setAdapter(adapter);

    send.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            sendMessage();
        }
    });
}

public void sendMessage() {

    tmpMessage = input.getText().toString();
    input.setText("");

    messages.add(tmpMessage);

    adapter.notifyDataSetChanged();

} 
```

我错过了什么（除了一些大脑）？任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T17:27:23.630

> 我想 getView() 方法应该被调用 6 次，因为 6 行被夸大了？但是我在这个方法中添加了一个日志，发现它被调用了 20 多次！为什么这样？

`getView()`强制多次调用的一个常见原因是使用`wrap_content`ListView 的高度。

此代码也在`getView()`：

```
String message = (String) getItem(position);
holder.message.setText(message);
holder.timestamp.setText(generateTimestamp()); // You will need to make a permanent timestamp someday 
```

应该在 if-else 块之外以支持滚动。

# user-interface - 如何在使用 GUI 构建的 Google Apps 脚本 UI 上更改模式对话框的背景颜色？

> ID：14539358
> 
> 赞同：2
> 
> 时间：2013-01-26T17:11:50.143
> 
> 标签：user-interface, google-apps-script, google-sheets, styling

我正在尝试在使用 GUI 构建的谷歌电子表格应用程序中更改模式弹出窗口的背景颜色。.setStyleAttribute() 似乎在这里不起作用。我还尝试在加载 GUI 组件后设置样式 - 没有骰子。

```
var app = UiApp.createApplication().setHeight("400") // - works fine, height of modal-dialog is pushed by UiApp height
.setStyleAttribute("background", "black"); // works for Ui element - not for outermost modal-dialog 
  //load the GUI component
  app.add(app.loadComponent("GradeChallengesGUI")); 
```

也许无法更改模态对话框的背景？嵌套在下面的元素很容易修改。我只是无法到达 UI 的最高父级。在这一点上，我假设这是不可能的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T15:13:12.723

当您加载在 GUI Builder 中创建的 UI 时，您可以在此处设置背景颜色。选择顶部组件并设置背景颜色属性。

如果您更喜欢代码，可以执行以下操作：

`app.getElementById("Component1").setStyleAttribute("background", "black");`

“Component1”是 GUI Builder 中第一个顶部元素的默认 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T17:30:31.140

可以将所有内容添加到面板类型，设置面板的 bg，将其添加到应用程序。

# pycharm - pycharm 从快捷方式中查找操作

> ID：14539359
> 
> 赞同：5
> 
> 时间：2013-01-26T17:11:52.927
> 
> 标签：pycharm

Pycharm 具有动作（命令）“查找动作”。给定一个动作名称，它将报告该动作的快捷方式以及您应该发出它的上下文，例如在编辑窗口中。将其视为操作-> 快捷方式。它还有一个有用的插件“Key Promoter”，它将报告您在调用菜单操作时可能使用的快捷方式。最后，您可以在“设置”>“键盘映射”按钮“按快捷方式搜索”（或类似的东西）中搜索给定快捷方式（这是我想要的）的操作。将此视为快捷方式-> 操作。最后的问题是：是否有一个 pycharm 命令可以让我搜索快捷方式 -> 操作，而无需深入了解设置？我经常这样做，以至于我想要一个快速的解决方案。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T17:40:06.873

恐怕不去键盘映射设置是不可能的，[添加了一个新的功能请求](http://youtrack.jetbrains.com/issue/IDEA-99850)，因为我发现自己也缺少这个功能，请投票。

# python - 将列表传递给 PyCrypto 中的 AES 密钥生成器

> ID：14539360
> 
> 赞同：0
> 
> 时间：2013-01-26T17:11:54.467
> 
> 标签：python, encryption, cryptography, pycrypto

我正在尝试使用 Pycrypto 生成 AES 密钥，但收到以下错误：

> TypeError: 'list' 不支持缓冲区接口

对于以下声明：

```
aescipher = AES.new(mykey, AES.MODE_ECB) 
```

`mykey`, 是类型`list`并且包含`[1885434739, 825373440, 0, 0]`

有谁知道我如何转换`mykey`为正确的`AES.new`函数类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T18:10:39.497

You should not supply any kind of list/array when creating an AES key. The raw key bytes are normally supplied using a byte array of `keysize / 8` bytes. For AES, the only key sizes that are supported are 128, 192 and 256 bits or 16, 24 and 32 bytes respectively.

Note that padding keys until they fit may lead to major cryptographic vulnerabilities. So is using ECB mode instead of a more secure mode like CBC (or one that also provides authentication/integrity protection such as GCM of course).

# backbone.js - 骨干下划线从模型更改更新 ui

> ID：14539361
> 
> 赞同：0
> 
> 时间：2013-01-26T17:11:57.080
> 
> 标签：backbone.js, underscore.js

我使用带下划线的骨干。我有一个按钮 <%= model.testButtonText %>

此按钮使用模板在我的视图的渲染功能中渲染。

我想知道是否有办法在 model.testButtonText 更改时自动更新按钮的文本？

或者我是否必须通过绑定到 model.testButtonText 更改来专门处理它，然后执行一些 jquery 来查找元素并以这种方式更新文本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T17:35:38.093

如果您不想将每个元素绑定到模型更改事件，您可以使用此插件：[http ://rivetsjs.com](http://rivetsjs.com)

本机 Backbone 不支持 ui 绑定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T19:21:41.330

由于它与`model`自身相关联，因此您可以侦听视图中的更改以重新渲染它。

```
view.listenTo(this.model, 'change', this.render); 
```

`model`更改时重新创建视图的有用扩展- [Backbone.ModelBinder](https://github.com/theironcook/Backbone.ModelBinder)。

# ajax - XMLHttpRequest.send() 将上传的文件发送到哪里？

> ID：14539362
> 
> 赞同：1
> 
> 时间：2013-01-26T17:11:59.003
> 
> 标签：ajax, file-upload, xmlhttprequest

我的网站有点问题。我正在为我的一个朋友建立一个网站，让她可以在上面上传她的图画。由于 XMLHttpRequest 对象的 .send() 方法，我使用异步上传。这是我的 JS 脚本：

```
var f             = file;
var name          = f.name;
var filesize      = f.size;

xhr.addEventListener("load" , function(e){
        location.reload();
});

xhr.open("post", 'import.php', true);
xhr.setRequestHeader('content-type', 'multipart/form-data');
xhr.setRequestHeader('type', f.type);
xhr.setRequestHeader('filename', name);
xhr.setRequestHeader('path', '<?php echo $path ?>');
xhr.send(f); 
```

这是我保存上传文件的 PHP 页面：

```
extract($_SERVER);
$file = $HTTP_FILENAME;
$newPath = $HTTP_PATH;
$extension = explode('.',$file);
$extension = $extension[1];

if($extension == 'jpg' || $extension == 'zip'){

    exec('cd '.IMG_ROOT);
    $handle   = fopen($newPath.$file, "w+");
    /*
      Adding line after line the source file datas in the destination file
    */
    // Get the uploaded file
    $uploadedFile = fopen("php://input", "r+");

    if($uploadedFile)
    {
      while ($buffer = fgets($uploadedFile))
      {
        fwrite($handle, $buffer);
      }
    }
    fclose($handle);
    if($extension == 'zip'){
        $unzip = exec('which unzip');
        exec($unzip.' '.$newPath.$file);

        $rm = exec('which rm');
        exec('rm '.$newPath.$file);
    }
} 
```

我的问题是，当我在 localhost 但不是在线测试它时，它工作得非常好......似乎该文件从未发送过......谁能告诉我我是否做错了什么？和/或将我重定向到解释 send() 方法和文件发送位置的内容？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T17:15:04.197

您的目标目录是可写的吗？

# android - TextView1 无法解析为类型

> ID：14539365
> 
> 赞同：1
> 
> 时间：2013-01-26T17:12:09.333
> 
> 标签：android, android-layout, android-widget

我正在尝试完成在 main.xml 中声明的可编辑文本的教程，

日食 说：

> -TextView1 无法解析为类型
> 
> -TextView2 无法解析为类型
> 
> -TextView1 无法解析为变量
> 
> -TextView2 无法解析为变量
> 
> -TextView1 无法解析
> 
> -TextView2 无法解析

这是我的代码：

```
package marco.prova;

import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

public class Main extends Activity {
    private TextView1 textView1;
    private TextView2 textView2;

    /** Called when the activity is first created.*/

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        TextView1 = (TextView) findViewById(R.id.testo1);
        TextView1.setText("Testo modificato tramite codice 1");

        TextView2 = (TextView) findViewById(R.id.testo2);
        TextView2.setText("Testo modificato tramite codice 2");
    }
} 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T17:13:11.917

`TextView1`并且`TextView2`不是 Android 类，但是`TextView`是。所以首先修复你的变量声明：

```
private TextView textView1;
private TextView textView2; 
```

然后修复你的变量赋值和变量使用（注意小写）：

```
textView1 = (TextView) findViewById(R.id.testo1);
textView1.setText("Testo modificato tramite codice 1");

textView2 = (TextView) findViewById(R.id.testo2);
textView2.setText("Testo modificato tramite codice 2"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-26T17:13:15.803

改变

```
private TextView1 textView1;
private TextView2 textView2; 
```

到

```
private TextView  textView1;
private TextView  textView2; 
```

# jquery - 悬停后保持子菜单处于活动状态

> ID：14539366
> 
> 赞同：-1
> 
> 时间：2013-01-26T17:12:20.943
> 
> 标签：jquery, html, css, navigation, hover

我很好奇如何在链接悬停后保持子菜单处于活动状态？我的意思是，即使您将鼠标移到别处，它也会保持活动状态，因此总是回到那里并悬停不会很烦人。

这是导航菜单的示例：--将其删除，因为它是固定的--

我很确定我必须使用 jQuery 来实现这一点？不过，我对 jQuery 不是很有经验。或者它实际上也可以使用纯 css 和 html 吗？

这是我的导航 CSS 代码：

```
nav {
    width: 1000px;
    height: 45px;
    margin-bottom: 45px;
    float: left;
    border-radius: 2px;
    line-height: normal;
    -webkit-box-shadow: 0 0 4px rgba(0, 0, 0, 0.2), inset 0 0 50px rgba(0, 0, 0, 0.1);
    -moz-box-shadow: 0 0 4px rgba(0, 0, 0, 0.2), inset 0 0 50px rgba(0, 0, 0, 0.1);
    box-shadow: 0 0 5px rgba(0, 0, 0, 0.2), inset 0 0 50px rgba(0, 0, 0, 0.1);
    position: relative; }

    nav ul li {
        height: 19px;
        padding: 13px 10px;
        color: #0f41a4;
        float: left;
        text-decoration: none; }

        nav ul li:hover ul { display: block; }

        nav ul li ul:hover { display: block; }

        nav ul li ul {
            width: 999px;
            display: none;
            position: absolute;
            margin-top: 13px;
            background: #F6F6F6;
            background: rgba(250, 250, 250, .5);
            border-bottom-left-radius: 5px;
            border-bottom-right-radius: 5px;
            border: 1px solid #FAFAFA;
            border-bottom: 1px solid #ccc;
            z-index: 9999;
            left: 0px;
            float: left; }

            nav ul li ul li {
                padding: 8px 10px;
                float: left; }

        nav ul li:hover {
            text-decoration: underline;
            background: rgba(0, 0, 0, .03); } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T17:21:49.880

如果您只想让子菜单始终处于活动状态，那么为什么将它们设置为不显示，并在悬停时显示。你在这里需要 javascript/jquery。

```
$(".page-item").click(function() {
   $(this).children().find(".children").show();
}); 
```

# jquery - 自下而上的砌体堆栈

> ID：14539368
> 
> 赞同：9
> 
> 时间：2013-01-26T17:12:26.217
> 
> 标签：jquery, jquery-masonry

我想从下往上堆叠砌体砖。

这个问题之前已经回答过了，但是 Masonry 的修改和分叉现在使用了一个非常旧的脚本版本。新版本的 Masonry 有我需要的错误修复。

那么有谁知道如何将旧解决方案应用于新脚本？

[这是旧的解决方案。](https://stackoverflow.com/questions/5206376/jquery-masonry-from-bottom-up)

```
var position = (opts.fromBottom) ? {
  left: props.colW * shortCol + props.posLeft,
  bottom: minimumY
} : {
  left: props.colW * shortCol + props.posLeft,
  top: minimumY
}; 
```

这是一个[带有较新 Masonry 脚本的小提琴](http://jsfiddle.net/PATLZ/)。我在第 74 行添加了 fromBottom 选项。有问题的代码在第 285 行左右。

***这个问题在最新版本的 Masonry 中已经过时（现在是标准选项）。***

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-30T08:03:54.603

替换它（从第 287 行开始）：

```
var position = {
  top: minimumY + this.offset.y
}; 
```

有了这个：

```
var position = (this.options.fromBottom) ? {
  bottom: minimumY + this.offset.y
} : {
  top: minimumY + this.offset.y
}; 
```

[演示](http://jsfiddle.net/jefferyto/GEH6n/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T21:15:39.353

使用堆叠粘合时，在应用新层之前让砌体干燥非常​​重要。因此，最好是逐行堆叠，而不是先上后侧，这样您就可以随时控制总堆叠的级别。不时将堆叠键与一层运行键交错是一种很好的做法和装饰性。

# ios - 使用 CoreMidi 的 iOS / osX midi 连接

> ID：14539369
> 
> 赞同：1
> 
> 时间：2013-01-26T17:12:46.820
> 
> 标签：ios, macos, controller, midi, coremidi

我正在制作一个 iOS 通用的可定制 MIDI 和 DMX 控制器。该控制器将 MIDI 数据发送到托管系统。

在 Windows 中，我创建了一个虚拟 midi 驱动程序并通过 TCP 将其与 iOS 应用程序连接。到目前为止，一切都很好。

现在在 OSX 中。我一直在尝试使用 coremidi。我创建了一个 MIDINetworkHost（来自 Audio Midi 设置中的 OSX 设置）、一个 MIDINetworkConnection，然后将其添加到 MIDINetworkSesion。

以下是步骤：

*   我创建了一个 MIDINetworkHost
*   我基于主机创建了一个 MIDINetworkConnection
*   我将它添加到 MIDINetworkSession。
*   我用 MIDICreateClient 创建了一个客户端
*   我用 MIDIOutputPortCreate 创建了一个输出端口
*   当我想发送数据时，我使用 MIDIPacketListInit 创建一个数据包，使用 MIDIPacketListAdd 添加数据，从 MIDINetworkSession 获取目标端点，然后使用输出端口使用 MIDISend 发送缓冲区。

似乎什么都没有发送。我错过了什么？

谢谢。

# delphi - TImage图片在阅读其画布时消失？

> ID：14539371
> 
> 赞同：1
> 
> 时间：2013-01-26T17:12:54.827
> 
> 标签：delphi, canvas, delphi-xe2, timage

我`TImage`在表单上有一个简单的控件。我在设计时分配了一个位图图像。运行时，我使用`TImage.Picture.Bitmap.Canvas`. 一切正常。然后，我在设计时加载 JPEG 图像。然而，现在当我读到这幅画布时，画面突然消失了。

为什么会发生这种情况，我该如何避免？

```
procedure TForm1.Image1MouseMove(Sender: TObject; Shift: TShiftState; X, Y: Integer);
var
  Canvas: TCanvas;
begin
  Canvas:= Image1.Picture.Bitmap.Canvas;
  //Do something with Canvas, but canvas is empty and image disappeared
end; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-26T17:20:03.247

这是意料之中的，因为 JPG 图像根本不是位图 (BMP) 图像。

您必须将其转换为位图才能对其进行处理：

```
var
  bm: TBitmap;
begin
  bm := TBitmap.Create;
  try
    bm.Assign(Image1.Picture.Graphic);
    bm.Canvas.DoSomethingReallyAwesome(ttExtraAwesome);
    bm.SaveToFile('C:\Users\Andreas Rejbrand\Desktop\test5.bmp');
  finally
    bm.Free;
  end; 
```

# java - 节点类中的下一个节点

> ID：14539373
> 
> 赞同：0
> 
> 时间：2013-01-26T17:13:05.827
> 
> 标签：java, class

我有这个节点类，我想知道程序如何识别下一个节点实际上是下一个节点？为什么我要把它分配给 null 呢？详细解释将不胜感激。

```
package LinearNode;
import dataobjects.*;

public class Node
{

public Node next;
public AnyClass obj;

public Node(AnyClass newObj)
{
    next = null; 
    obj = newObj;
}

public void show()
{
    System.out.println(obj.getData());
}

public void editNode()
{
    obj.editData();
}

public Node getNext()
{
    return next;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T17:16:30.960

Node 通常用在链表中，下一个节点为空的节点是列表的最后一个（因为它没有任何下一个节点）。

节点的下一个节点将是您初始化的节点，方法是

```
someNode.next = someOtherNode; 
```

请注意，默认情况下字段应该是私有的，并且几乎不应该是公共的。使用方法来修改对象的状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T17:22:42.373

程序员有责任正确地组装和使用他选择的数据结构。该`next`节点指向链接列表中假定为“下一个”节点的引用，但 Java 无法告诉您是否正确链接了它们。`null`通常用于表示列表的结尾（与循环链表相反，在这种情况下，可以使用头指针和尾指针而不是 null）。可以在[Wikipedia](http://en.wikipedia.org/wiki/Linked_list)和[此处](http://www.thegeekstuff.com/2012/08/c-linked-list-example/)找到有关链表数据结构的文档，尽管示例是用 C 编写的。

# xcode - 在 Xcode 上的 UILabel 中显示货币符号

> ID：14539377
> 
> 赞同：2
> 
> 时间：2013-01-26T17:13:23.100
> 
> 标签：xcode, unicode, uilabel, currency, urlencode

我正在尝试使用 html 格式或 unicode 格式来显示货币的字形。通过使用前者，我尝试了各种操作，包括：、、、，但`stringWithUTF8String`没有一个成功地将 € 变成欧元符号。使用 Unicode，问题会稍微好一些，因为：`decodeFromPercentEscapeString``CFURLCreateStringByReplacingPercentEscapesUsingEncoding``stringByReplacingPercentEscapesUsingEncoding`

```
NSString *aStr = [NSString stringWithUTF8String:[@"\u20ac" UTF8String]]; 
```

实际上打印一个欧元符号，但由于我不明白，如果我提供字符串作为方法的结果，则会显示 unicode 代码。

在 UILbel 中显示欧元、美元或英镑符号的标准方式是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T17:27:17.860

UILabel 自动解析 unicode 字符串，无需解码：

```
label.text = @"\u0024"; // dollar
label.text = @"\u20ac"; // euro 
```

有关编码名称，请参阅[fileformat.info](http://www.fileformat.info/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-26T17:23:07.453

直接将这些字符复制并粘贴到字符串中怎么样：

```
NSString *aStr = @"Euro-€, Dollar-$, Pound-£";
label.text=aStr; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-27T13:38:59.590

我找到了一个非常简单的解决方案：

```
float fareValue=/*float value*/;
NSNumber* fareNumber=[NSNumber numberWithFloat:fareValue];
NSString* formatted=[NSNumberFormatter localizedStringFromNumber:fareNumber numberStyle:NSNumberFormatterCurrencyStyle]; 
```

感谢大家

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-24T03:56:08.597

**斯威夫特 3**

```
"\u{00A3}" 
```

不再需要“@”

# javascript - 尝试使当前幻灯片的 div 显示在顶部的 js 滑块问题

> ID：14539382
> 
> 赞同：0
> 
> 时间：2013-01-26T17:13:41.957
> 
> 标签：javascript, html, css

对于 js 滑块，我们使用跨度“slider_link”将整个包含的 div 变成可点击的链接。问题是第一个 div 似乎保持原位，因此即使幻灯片发生链接也永远不会改变。我们希望每张幻灯片的链接都与该幻灯片一起出现。

[问题演示](http://www.abacusnyc.com/newsite/)

HTML 摘录：

```
<div class="slider1">
<div class="slider-text slider-text1">
<a href="http://www.abacusnyc.com/about-us/overview"><span class="slider_link"></span></a>
<h1><span>Differentiate.</span> Shouldn't your recruitment firm stand out as much as you do.</h1>
<p>Human Resourcefulness is finding the right people, right now.</p>

</div>
</div> 
```

CSS 摘录：

```
.slider_link { 
    float:left;
     position:absolute;
     width:100%;
     height:100%;
     top:0;
     left: 0;

  /* edit: added z-index */
      z-index:inherit;

  /* edit: fixes overlap error in IE7/8, 
     make sure you have an empty gif */
     background-image: url('../images/empty.gif');
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T01:48:51.040

将相对定位放在包装器 div 中！

# php - 获取值并根据类别显示数据的 GET 方法

> ID：14539383
> 
> 赞同：0
> 
> 时间：2013-01-26T17:13:42.887
> 
> 标签：php, filtering, categories, http-get

我正在开发一个在线菜单订购系统，我想根据其类别过滤数据。我试图让它与这段代码一起工作，但它只显示一个类别。

```
**<li><?php echo "<a href='clubmarumenu.php?choice=".$category."'>"?> Scotch/Bourbon</a></li>
<li><?php echo "<a href='clubmarumenu.php?choice=".$category."'>"?> Brandy/Cognac</a></li>
<li><?php echo "<a href='clubmarumenu.php?choice=".$category."'>"?> Vodka/Gin/Tequila/Apertifs/Liqueur</a></li><br>
<li><?php echo "<a href='clubmarumenu.php?choice=".$category."'>"?> Beer/Softdrinks</a></li>
<li><?php echo "<a href='clubmarumenu.php?choice=".$category."'>"?> Cocktails</a></li>** 
```

^ 基本上这些是类别，下面是如何显示它们。**

```
<?php
$category = $_GET['choice'];
$category = str_replace('%', ' ', $category);
$query = "SELECT * FROM product_drinks WHERE drinks_cat = '" . $category . "'";
$result = mysql_query($query);
$total_records = mysql_num_rows($result); // the number of records in your result set
$num_cols = 2; // the number of columns
$num_rows = ceil($total_records / $num_cols); // the number of rows
$num = 0; // don't change this value, this is the first number of each record inside a record set
echo "<table style= 'cellpadding:8 width:100'>\n";
// next the loop for the table rows
for ($rows = 0; $rows < $num_rows; $rows++) {
    echo "<tr bgcolor='black'>\n";
    // this is the loop for the table columns
    for ($cols = 0; $cols < $num_cols; $cols++) {
        if ($num < $total_records) { // show records if available (reduce by one because the first record is no. "0" (zero)
            // first create variables with the values of the current record
            $title = mysql_result($result, $num, "drinks_name");
            $clean_name = str_replace('_', ' ', $title);

            $price = mysql_result($result, $num, "drinks_shot");
            $price2 = mysql_result($result, $num, "drinks_bottle");
            $category = mysql_result($result, $num, "drinks_cat");
            $description = mysql_result($result, $num, "drinks_image");
            $title = str_replace(' ', '%', $title);
            echo "<td class='label'><a class='fancybox fancybox.ajax' href='food.php?drink=" . $title . "'>         
                    <img src='" . mysql_result($result, $num, 'drinks_image') . "'  class='masterTooltip' title= '" . $category . "'</a><br>";
            echo "<td style='width:50%' class='desc'><b>" . $clean_name . "</b><br> Shot:<font style='color:#0072bc'> Php " . $price . "</font><br> Bottle: <font style='color:#724c0e'>Php " . $price2 . "</font></td>\n";

        } else { // show an empty cell
            echo "<td>&nbsp;</td>\n";
        }
        $num++; // raise the number by one for the next record
    }
    echo "</tr>\n"; // there are no more cols in this row, close the table row tag
}
echo "</table>\n"; // end of the region = closing tag for the table element
?>
** 
```

我希望我能翻过这堵墙。请帮忙~

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T17:21:15.097

第一件事。

```
<?php echo "<a href='clubmarumenu.php?choice=".$category."'>"?> 
```

1.  在第一段代码中，您对所有链接使用相同的变量。您是否在此处为 $category 传递不同的值。我相信你不是！因此所有的链接都指向同一个 url。

2.  您应该使用 urldecode 而不是 str_replace('%', ' ', $category)。(http://in2.php.net/urldecode)

3.  请缩进您的代码，以便可以轻松阅读和理解:)

# android - 由于 NullPointerException，应用程序意外停止

> ID：14539387
> 
> 赞同：0
> 
> 时间：2013-01-26T17:14:08.210
> 
> 标签：android, textview

我正在尝试将字符串的值显示到 java 类中的文本视图中。但是当我运行我的应用程序时，它显示我的应用程序已意外停止。它无法正常工作，请建议我最好的方法来做到这一点。

我的代码：

```
protected void onListItemClick(ListView l, View v, int position, long id){
    currentPosition = position;
    playSong(MEDIA_PATH + songs.get(position));

    //Toast.makeText(getApplicationContext(), songs.get(position).toString(), Toast.LENGTH_SHORT).show();

    Intent in = new Intent(this, current_song.class);
    startActivity(in);

    //Toast.makeText(getApplicationContext(), "End of Song List", Toast.LENGTH_SHORT).show();
    final String songName = songs.get(position).toString();
    final TextView textchange = (TextView)findViewById(R.id.current_song_name);
    textchange.setText(songName);

} 
```

布局xml：

```
 <?xml version="1.0" encoding="utf-8"?>
     <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="match_parent"
     android:layout_height="match_parent"
     android:orientation="vertical" >

<Button 
    android:id="@+id/play_btn"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Play"
    />

<TextView 
    android:id="@+id/current_song_name"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    />

    </LinearLayout> 
```

日志：

```
01-26 22:29:16.599: I/Process(531): Sending signal. PID: 531 SIG: 9
01-26 22:29:28.679: D/AndroidRuntime(602): Shutting down VM
01-26 22:29:28.679: W/dalvikvm(602): threadid=1: thread exiting with uncaught exception (group=0x40015560)
01-26 22:29:28.750: E/AndroidRuntime(602): FATAL EXCEPTION: main
01-26 22:29:28.750: E/AndroidRuntime(602): java.lang.NullPointerException
01-26 22:29:28.750: E/AndroidRuntime(602):  at    com.example.musicplayer.MainActivity.onListItemClick(MainActivity.java:71)
01-26 22:29:28.750: E/AndroidRuntime(602):  at android.app.ListActivity$2.onItemClick(ListActivity.java:319)
01-26 22:29:28.750: E/AndroidRuntime(602):  at android.widget.AdapterView.performItemClick(AdapterView.java:284)
01-26 22:29:28.750: E/AndroidRuntime(602):  at android.widget.ListView.performItemClick(ListView.java:3513)
01-26 22:29:28.750: E/AndroidRuntime(602):  at android.widget.AbsListView$PerformClick.run(AbsListView.java:1812)
01-26 22:29:28.750: E/AndroidRuntime(602):  at android.os.Handler.handleCallback(Handler.java:587)
01-26 22:29:28.750: E/AndroidRuntime(602):  at android.os.Handler.dispatchMessage(Handler.java:92)
01-26 22:29:28.750: E/AndroidRuntime(602):  at android.os.Looper.loop(Looper.java:123)
01-26 22:29:28.750: E/AndroidRuntime(602):  at android.app.ActivityThread.main(ActivityThread.java:3683)
01-26 22:29:28.750: E/AndroidRuntime(602):  at java.lang.reflect.Method.invokeNative(Native Method)
01-26 22:29:28.750: E/AndroidRuntime(602):  at java.lang.reflect.Method.invoke(Method.java:507)
01-26 22:29:28.750: E/AndroidRuntime(602):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
01-26 22:29:28.750: E/AndroidRuntime(602):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
01-26 22:29:28.750: E/AndroidRuntime(602):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T17:15:58.427

嗯，如果这三行在 中`onListItemClick()`，请尝试：

```
final TextView textchange = (TextView) v.findViewById(R.id.current_song_name);
// Scope findVIewById to the the View ^^^ 
```

（如果这不是答案，请指出哪一行是 71。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T17:36:18.560

也试试这个：

```
final String songName = songs.get(position).toString(); 
```

并确保“位置”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T18:14:47.463

您正在尝试从您的列表活动中执行此操作，

```
final TextView textchange = (TextView)findViewById(R.id.current_song_name);
textchange.setText(songName); 
```

但是这个视图是在你在`current_song.java`Activity 中使用的 xml 中声明的。

您不能将一个活动的视图对象用于其他活动。

`songName`将with bundle extras的值传递给`current_song`有意图的活动，然后`songName`在您的`current_song`活动中设置它。

**从您的列表活动中：**

```
protected void onListItemClick(ListView l, View v, int position, long id){
    currentPosition = position;
    final String songName = songs.get(position).toString();
    playSong(MEDIA_PATH + songs.get(position));
    Intent in = new Intent(this, current_song.class);
    in.putExtra("song_name",songName );
    startActivity(in);
} 
```

**在您的 current_song 活动中：**

```
Bundle extras = getIntent().getExtras();

if (extras != null) {
    String songName = extras.getString("song_name");
    TextView textchange = (TextView)findViewById(R.id.current_song_name);
    textchange.setText(songName);
} 
```

# c++ - c++链表不释放内存——寻找快速代码审查

> ID：14539389
> 
> 赞同：0
> 
> 时间：2013-01-26T17:14:26.313
> 
> 标签：c++, memory

我已经实现了一个简单的链表，但是在删除我使用的所有指针后，它似乎并没有释放内存。我希望有人能指出我在这里缺少的东西。我正在使用活动监视器查看 xcode 的内存使用情况，也许这是查看内存使用情况的不准确方法？我不确定。这是代码：

```
#include <iostream>
struct node {
    int data;
    node *next;
};

//function to traverse linked list
void traverse(node *root){
    node *trav;

    std::cout << "The list is as follows:\n";
    //traverses through lists
    trav = root;
    do{
        std::cout << (*trav).data << "\n";
        trav = trav->next;
    }while(trav != NULL);
    std::cout << "\n";

    delete trav;
}

void addToList(node *root){
    node *tmp;
    tmp = root;
    if(tmp->next != NULL){
        while(tmp->next !=0){
            tmp = tmp->next;
        }
    }

    //adds new nodes to list
    for(int i = 0 ; i<1000000 ; i++){
        tmp->next = new node;
        tmp = tmp->next;
        tmp->data = i;  
    }
    tmp->next = NULL;

    delete tmp;
}

int main(int argc, const char * argv[])
{   
    node *root;         //this is the root node. it will not change

    //sets up root node
    root = new node;    //root points to a node structure (this is a memory address)
    root->next=NULL;       //next pointer is now "0"
    root->data = 5;     //data in this node = 5

    //print initial list
    traverse(root);
    //add to list
    addToList(root);
    //print new list
    traverse(root);

    delete root;
    return 0;
} 
```

===================编辑 - 美国东部标准时间上午 9:28，1 月 27 日===================== ===========

感谢大家在这里的精彩反馈。我知道我做错了很多事情（这是我对 C++ 和动态内存分配的介绍。感谢您的帮助！）

请在下面找到更新的代码。我遇到了以下问题： *1 - 再次，活动监视器报告的实际内存使用情况没有从运行它的进程中释放（从终端运行和 xcode 都显示这个）。当发生以下故障时会发生这种情况，而且当我将 addToList 中的 for 循环设置为远低于 65514 时也会发生这种情况*。--> 已修复 - 这不再是一个问题（缺少一对括号，导致我的代码无法正确删除。哎呀！）

2 -- 在 data = 65514 的节点，我得到： ~node 第一行的 EXC_BAD_ACCESS (code 2) -- 为什么？Xcode 提供以下内容：

```
Exception State Registers       
trapno  unsigned int    
err unsigned int    
faultvaddr  unsigned long   
Floating Point Registers        
fctrl   unsigned short  
fstat   unsigned short  
ftag    unsigned char   
fop unsigned short  
fioff   unsigned int    
fiseg   unsigned short  
fooff   unsigned int    
foseg   unsigned short  
mxcsr   unsigned int    
mxcsrmask   unsigned int    
stmm0   <invalid>   
stmm1   <invalid>   
stmm2   <invalid>   
stmm3   <invalid>   
stmm4   <invalid>   
stmm5   <invalid>   
stmm6   <invalid>   
stmm7   <invalid>   
xmm0    <invalid>   
xmm1    <invalid>   
xmm2    <invalid>   
xmm3    <invalid>   
xmm4    <invalid>   
xmm5    <invalid>   
xmm6    <invalid>   
xmm7    <invalid>   
xmm8    <invalid>   
xmm9    <invalid>   
xmm10   <invalid>   
xmm11   <invalid>   
xmm12   <invalid>   
xmm13   <invalid>   
xmm14   <invalid>   
xmm15   <invalid>   
General Purpose Registers       
rax unsigned long   
rbx unsigned long   0x0000000000000000
rcx unsigned long   
rdx unsigned long   
rdi unsigned long   
rsi unsigned long   
rbp unsigned long   0x00007fff6ca0c210
rsp unsigned long   0x00007fff6ca0c1c0
r8  unsigned long   
r9  unsigned long   
r10 unsigned long   
r11 unsigned long   
r12 unsigned long   0x0000000000000000
r13 unsigned long   0x0000000000000000
r14 unsigned long   0x0000000000000000
r15 unsigned long   0x0000000000000000
rip unsigned long   0x000000010d60cb96
rflags  unsigned long   
cs  unsigned long   
fs  unsigned long   
gs  unsigned long 
```

我认为这与无符号短路的限制有关，如在某些寄存器中所见，但是，我没有使用无符号短路。？？？！？！

这是我当前的代码：

```
#include <iostream>
struct node {
    long data;
    node *next;
    node():next(NULL){} //just to be safe, initialize as null to start
    //destructor used to clean up list nodes
    ~node(){
        std::cout << data << "  ";
        if(next != NULL){ 
            std::cout << data << ": deleted\n";
            delete next;
            next = NULL;
        }
    } 
};

//function to traverse linked list
void traverse(node *root){
    node *trav;

    std::cout << "The list is as follows:\n";
    //traverses through lists
    trav = root;
    do{
        std::cout << (*trav).data << "\n";
        trav = trav->next;
    }while(trav != NULL);
    std::cout << "\n";
}

void addToList(node *root){
    node *tmp;
    tmp = root;
    if(tmp->next != NULL){
        while(tmp->next !=0){
            tmp = tmp->next;
        }
    }

    //adds new nodes to list
    for(long i = 0 ; i<100000 ; i++){
        tmp->next = new node;
        tmp = tmp->next;
        tmp->data = i;  
    }
    tmp->next = NULL;    
}

int main(int argc, const char * argv[])
{   
    node *root;         //this is the root node. it will not change

    //sets up root node
    root = new node;    //root points to a node structure (this is a memory address)
    root->next=NULL;       //next pointer is now "0"
    root->data = 5;     //data in this node = 5

    //print initial list
    //traverse(root);
    //add to list
    addToList(root);
    //print new list
    //traverse(root);

    delete root;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T17:18:14.717

您不会删除您创建的所有节点，您必须遍历所有节点列表，从根节点开始，然后一个接一个地删除它们（应该考虑为此创建一个删除功能）

类似的东西：

```
node *actual, *next;
actual = root;

while (actual != null)
{
   next = actual->next;
   delete actual;
   actual = next;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T17:19:31.073

问题是您删除了根节点，但这并不会自动删除直接和间接链接到它的所有节点。

如果您希望发生这种情况，您可以为指针指向的对象创建一个析构函数`node`，`delete`如果`next`this 不是`NULL`。这将展开一系列析构函数调用，最终将删除链接到您要删除的节点的所有节点。

或者，如果您愿意，您甚至可以手动向后遍历列表和`delete`每个节点，但我不建议这样做 - 它不必要地复杂且容易出错。

另一个（不相关，但如果不是更糟的话同样糟糕）问题是在`addToList()`. 你不应该这样做：

```
delete tmp; 
```

它将删除仍然由列表中的前一个节点指向的对象。这会创建一个悬空指针（即，似乎指向某个现有对象但实际上没有指向的非 NULL 指针）。

`traverse()`正如@us2012 正确指出的那样，类似的考虑适用于 function ：

```
delete trav; 
```

该`delete`指令不会创建任何悬空指针，但没有用，因为当输入指针是（这是你的情况）`delete`时，操作员什么都不做。`NULL`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T17:19:41.263

进行以下修改

```
struct node {
    int data;
    node *next;
    node():next(NULL){} //just to be safe
    ~node(){if(next != NULL) delete next;} 
}; 
```

问题是您只删除了根而不删除其他元素。此更改将确保当您删除一个节点时，它也会删除下一个节点（如果存在）。

不是最传统的解决方案，而是以自己的方式相当优雅..（如果列表太长，可能会导致堆栈问题，ppetrov 所示的 while 循环没有这个问题，还是尾递归？）

`delete`你还应该修复别人提到的其他多余的s。

这个实现接近于一个叫做[Resource Acquisition Is Initialization](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)的概念，这是一个帮助智能指针和库的其他部分工作的概念。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T17:35:35.147

一般指南是，如果您的代码包含`delete`，那么您几乎可以肯定这样做是非常非常错误的。

```
struct node {
    int data;
    std::unique_ptr<node> next;
}; 
```

现在每个都`node`将`node`在链中的下一个被销毁时销毁，这意味着列表会自行清理。您可以在堆栈上分配第一个`node`，允许它在超出范围时被释放，或者使用另一个`unique_ptr`.

您也绝对不想在遍历列表时删除它。

# mysql - 如果值超出索引最大值，我的 Sql 查询会很慢

> ID：14539390
> 
> 赞同：0
> 
> 时间：2013-01-26T17:14:28.653
> 
> 标签：mysql, indexing

昨晚我遇到了 mysql 的一个特殊问题。所以我有一个有四列的表`( A text, B text, C text , D number)`。我创建了 D 作为我的`index( B-Tree Mysql Index with innodb engine)`.

假设在表中插入数据后：D的最大值为100，最小值为0；

在字段 D 上查询时：

*   `where D = 25`. 查询立即执行

*   `where D = 125`（即表中不存在值）。查询按年龄执行

据我了解，索引足够聪明，可以识别该值包含在表中，并且应该像其他值一样快速执行。我查看了解释查询计划，它显示对键“字段 D”进行了 50% 的表扫描。我不明白为什么要花这么多时间来执行第二个查询？

我的表大约有 2000 万行。
PS：我用数字只是为了解释。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T17:23:23.617

您可以尝试使用`not exists`以下查询吗？

```
SELECT  *
FROM    mytable a
WHERE   NOT EXISTS
        (
        SELECT  null 
        FROM    mytable b
        WHERE   a.id = b.id
        AND b.id = 125
        ); 
```

# python - 在 Python 中加载 15GB 文件

> ID：14539392
> 
> 赞同：2
> 
> 时间：2013-01-26T17:14:29.667
> 
> 标签：python, file, dictionary, loading

我有一个包含 25000 行的 15GB 文本文件。我在 Python 中创建了一个形式为：dict1 = {'':int}，dict2 = {'':dict1} 的多级字典。

我必须在我的程序中多次使用整个 dict2（大约 1000 次……在一个 for 循环中）。谁能告诉一个好的方法来做到这一点。

相同类型的信息存储在文件中（25000 个图像的不同 RGB 值的计数。每行 1 个图像）例如：文件的 1 行将类似于：image1：255,255,255-70；234,221,231-40；112,13,19-28；图片2：5,25,25-30；34,15,61-20；102,103,109-228；等等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T17:43:12.510

最好的方法是使用分块。

```
def read_in_chunks(file_object, chunk_size=1024):
    """Lazy function (generator) to read a file piece by piece.
    Default chunk size: 1k."""
    while True:
        data = file_object.read(chunk_size)
        if not data:
            break
        yield data

f = open('really_big_file.dat')
for piece in read_in_chunks(f):
    process_data(piece) 
```

请注意，当您开始处理大型文件时，移动到 map-reduce 习惯用法可能会有所帮助，因为您将能够独立处理单独的分块文件，而无需将完整的数据集拉入内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T17:34:30.600

在 python 中，如果你使用一个文件对象作为迭代器，你可以逐行读取一个文件，而无需在内存中打开整个文件。

```
for line in open("huge_file.txt"):
    do_something_with(line) 
```

# function - MatLab fmin 函数

> ID：14539399
> 
> 赞同：1
> 
> 时间：2013-01-26T17:15:16.450
> 
> 标签：function, matlab, fminsearch

我在 matlab 中有一个名为 .m 的文件，其中有`PowerMinimiser`两个函数

```
function PowerMinimiser
    PowerOut = fmin(minFunction,0,100);
    display(PowerOut)
end 
```

和

```
function PowerOut = minFunction(varargin)
    RunMode = 2;
    ThresholdValue = 10;
    if nargin > 0
        ThresholdValue  = varargin{1};
    end
    %Receive PowerOut value from .main file and pass in ThresholdValue and
    %RunMode values:
    [PowerOut] = main(ThresholdValue,RunMode);
end 
```

现在我想做的是使用 matlab`fmin`函数，这样我就可以找到变量的值，`ThresholdValue`这将为变量提供可能的最低值`PowerOut`。for 的值`ThresholdValue`是一个介于 1 和 100 之间的数字，并被传递到一个函数中，在该函数中`main.m`进行了许多计算，然后`PowerOut`输出一个 for 的值。

使用该`minFunction`函数，我可以使用该行接收和传递变量

```
 [PowerOut] = main(ThresholdValue,RunMode); 
```

但我不确定如何使用该`fmin`函数来`ThresholdValue`获取`PowerOut`. 我希望在完成必要的计算`ThresholdValue`后显示该值。`fmin`我怎样才能做到这一点？任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T17:40:12.317

您应该使用 function ，它在较新版本的 Matlab[`fminbnd`](http://www.mathworks.com/help/optim/ug/fminbnd.html)中替换了function 。[`fmin`](http://www.weizmann.ac.il/matlab/techdoc/ref/fmin.html)将函数作为参数传递给函数名之前`fminbnd`使用`@`，如下所示：

```
PowerOut = fmin( @minFunction, 0, 100 ); 
```

# java - Cling：getBaseURL 在某些设备上返回 null 并在其他设备上工作

> ID：14539401
> 
> 赞同：0
> 
> 时间：2013-01-26T17:15:26.540
> 
> 标签：java, android, upnp

我正在开发一个应用程序，它将使用 Cling 应用程序扫描网络上的设备。我尝试对其进行修改，以便我也可以使用 getBaseURL 方法查看设备的 IP 地址。但是，当我扫描设备时，其中一些显示为 IP，而另一些则返回 null。有没有办法解决这个问题？

```
 @Override
    public String toString() {

        String name =
                device.getDetails() != null && device.getDetails().getFriendlyName() != null
                        ? device.getDetails().getFriendlyName() +device.getDetails().getBaseURL()
                        : device.getDisplayString(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T12:31:07.233

有趣的是，`org.teleal.cling.model.meta.DeviceDetails`它有许多构造函数，但只有两种类型：一种得到`friendlyName`但没有`baseURL`（因此它被保留为空）和另一种（只有两种）两者都得到。`baseURL`是最终私有的，所以你以后没有机会设置它。我个人不理解设计决策（为什么`friendlyName`认为 的知识会取代 的知识`baseURL`）但 IMO 存在问题。`DeviceDetails`在（唯一设置私有成员的）的最后一个构造函数中放置一个断点并观察它从哪里被调用（以及通过哪个特定的构造函数重载）。每个 UPnP 设备都有一个 baseURL，它在其 NOTIFY 消息的 LOCATION 标头中告诉它。所以事实是`DeviceDetails`不提供它是 Cling 对它不感兴趣的问题（即不调用接受它的构造函数）。

# jquery - 如何使用 Jquery 动态选择特定链接？

> ID：14539403
> 
> 赞同：3
> 
> 时间：2013-01-26T17:15:29.937
> 
> 标签：jquery, ruby-on-rails, jquery-ui, jquery-ui-dialog

我正在尝试选择某个链接并打开一个对话框。

```
 $('#edit').click(function(e) {
    var url = $(this).attr('href');
    var dialog_form = $('<div id="dialog-form">Loading form...</div>').dialog({
      autoOpen: false,
      width: 520,
      modal: true,
      open: function() {
        return $(this).load(url + ' #content');
      },
      close: function() {
        $('#dialog-form').remove();
      }
    });
    dialog_form.dialog('open');
    e.preventDefault();
  }); 
```

在具有多个编辑链接的页面上

```
<a href="articles/edit/1" id="edit">edit</a>
<a href="articles/edit/2" id="edit">edit</a> 
```

但该代码仅在只有一个编辑链接时才有效。

如何动态选择我点击的确切链接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T17:18:55.630

`ID`属性必须是唯一的，即无效的 HTML。浏览器将始终返回第一次出现。

您可以改用类名。

```
<a href="articles/edit/1" class="edit">edit</a> 
```

而且，您需要修改选择器以`.edit`按类名查找元素。

```
$('.edit').click(function(e) {
  ... 
}); 
```

从 HTML5 开始，您还可以使用`data-*`属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T17:18:33.377

首先，**不要使用重复的 ID 属性**——它们应该对于 DOM 中的每个元素都是唯一的。如果您想要一个选择器，请改用类名：

```
<a href="articles/edit/1" class="edit">edit</a>
<a href="articles/edit/2" class="edit">edit</a> 
```

其次，使用[`on()`](http://api.jquery.com/on/)代替`click()`：

```
$('.edit').on('click', function(e) {
    var url = $(this).attr('href');
    var dialog_form = $('<div id="dialog-form">Loading form...</div>').dialog({
      autoOpen: false,
      width: 520,
      modal: true,
      open: function() {
        return $(this).load(url + ' #content');
      },
      close: function() {
        $('#dialog-form').remove();
      }
    });
    dialog_form.dialog('open');
    e.preventDefault();
  }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T17:19:34.443

具有相同 id 的两个元素是无效的 HTML。改用类。

# windows-phone-8 - Windows Phone 8：如何使用 MediaElement 类播放音频文件？

> ID：14539405
> 
> 赞同：1
> 
> 时间：2013-01-26T17:15:40.440
> 
> 标签：windows-phone-8, mediaelement

我正在使用 MediaElement 类并尝试播放我在解决方案资源管理器中添加的音频文件 (.mp3)（见下图）。

我在构造函数中使用以下代码

```
// Constructor
public MainPage()
{
    InitializeComponent();

    // Set the data context of the listbox control to the sample data
    DataContext = App.ViewModel;

    MediaElement el = new MediaElement();
    el.Source = new Uri("horse.mp3", UriKind.RelativeOrAbsolute);
    el.Play();
} 
```

我还在下面添加了一个屏幕截图，只是为了了解 horse.mp3 文件所在的位置。

请帮我解决这个问题。

![在此处输入图像描述](../Images/aa724502d8c61161bdb05fb813c274db.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T23:36:19.780

MP3 文件的构建操作是什么？对于您使用的 URI 格式，它应该是 Build Action = Content。

此外，您实际上并没有将 MediaElement 添加到您的页面。MediaElement 是一种视觉控件，需要成为视觉树的一部分才能进行操作。如果你想在 WP7/WP8 上做简短的音效，你应该使用 XNA 的 SoundEffect。您必须非常具体地预先格式化您的音轨，但您将受益于它与用户当前播放的音频重叠并且不需要将其添加到视觉树中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-23T23:02:40.483

在xml中：

```
<Button x:Name="PlayFile"
            Click="PlayFile_Click_1"
            Content="Play mp3" /> 
```

在代码中：

```
MediaElement MyMedia = new MediaElement();
// Constructor
public MainPage()
{
    InitializeComponent();

    this.LayoutRoot.Children.Add(MyMedia);

    MyMedia.CurrentStateChanged += MyMedia_CurrentStateChanged;
    MyMedia.MediaEnded += MyMedia_MediaEnded;
}

void MyMedia_MediaEnded(object sender, RoutedEventArgs e)
{
    System.Diagnostics.Debug.WriteLine("Ended event " + MyMedia.CurrentState.ToString());
    // Set the source to null, force a Close event in current state
    MyMedia.Source = null;
}

void MyMedia_CurrentStateChanged(object sender, RoutedEventArgs e)
{

    switch (MyMedia.CurrentState)
    {
        case System.Windows.Media.MediaElementState.AcquiringLicense:
            break;
        case System.Windows.Media.MediaElementState.Buffering:
            break;
        case System.Windows.Media.MediaElementState.Closed:
            break;
        case System.Windows.Media.MediaElementState.Individualizing:
            break;
        case System.Windows.Media.MediaElementState.Opening:
            break;
        case System.Windows.Media.MediaElementState.Paused:
            break;
        case System.Windows.Media.MediaElementState.Playing:
            break;
        case System.Windows.Media.MediaElementState.Stopped:
            break;
        default:
            break;
    }

    System.Diagnostics.Debug.WriteLine("CurrentState event " + MyMedia.CurrentState.ToString());
}

private void PlayFile_Click_1(object sender, RoutedEventArgs e)
{
    // Play Awesome music file, stored as content in the Assets folder in your app
    MyMedia.Source = new Uri("Assets/AwesomeMusic.mp3", UriKind.RelativeOrAbsolute);
    MyMedia.Play();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-27T06:46:30.817

您必须添加

```
el.AutoPlay=true 
```

希望这有帮助。

# c# - Background Changer 应用程序占用太多内存

> ID：14539408
> 
> 赞同：0
> 
> 时间：2013-01-26T17:16:07.853
> 
> 标签：c#, image, memory, background, slideshow

我正在开发一个背景更改应用程序。该应用程序的一部分是带有 3 个图像预览（3 个图像框）的幻灯片。上一个、当前和下一个图像。问题是每次计时器滴答时，应用程序都会占用大约 8 MB 的内存空间。我知道它最有可能是由图像绘制类引起的，但我不知道如何处理我不使用的图像。

更新：非常感谢。我需要对您提供的代码进行一些调整，但它现在可以工作了。当我在完全不同的对象上使用 dispose 方法之前尝试使用它时。谢谢你。

它按以下顺序工作。

1.  加载多张图片
    *   检索图像路径
2.  设置更改图像的时间间隔
3.  启动计时器
4.  随着每个计时器滴答声，计时器执行以下操作

    ```
    pictureBoxCurr.BackgroundImage = Image.FromFile(_filenames.ElementAt(_currNum));
    pictureBoxPrev.BackgroundImage = Image.FromFile(_filenames.ElementAt(_currNum - 1));
    pictureBoxNext.BackgroundImage = Image.FromFile(_filenames.ElementAt(_currNum + 1)); 
    ```

每次显示新预览时，内存使用量都会再占用 8MB 左右。我不知道究竟是什么占用了那个空间。

如果您知道导致问题的原因或有任何线索，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T17:23:22.757

在更改图像之前，我建议在每个计时器滴答声中调用以下代码。

```
pictureBoxCurr.BackgroundImage.Dispose();
pictureBoxPrev.BackgroundImage.Dispose();
pictureBoxNext.BackgroundImage.Dispose(); 
```

这将立即释放非托管图像资源，而不是等待垃圾收集器。

# r - R - How to make a subset of columns based on values in a row in a data frame

> ID：14539419
> 
> 赞同：12
> 
> 时间：2013-01-26T17:17:14.990
> 
> 标签：r, dataframe, subset

I have a matrix that I would like to subset and eventually use to make a plot. The data is a list of counts for specific blood markers for each patient in a population. It looks like this:

```
 df <- data.frame(MarkerID=c("Class","A123","A124"),
             MarkerName=c("","X","Y"),
             Patient.1=c(0,1,5),
             Patent.2=c(1,2,6),
             Patent.3=c(0,3,7),
             Patient.4=c(1,4,8)) 
```

I would like to make a data frame of all of the patients (columns 3-6) that have a class value of zero (1st row) and a second data frame of all of the patients with a class value of 1.

In the past I have used the subset function to select rows based on the values in a column, is it possible to select a subset of columns based on the values in a row?

I've tried this:

```
x <- subset(data, data[1,] == 0) 
```

however, when I do `dim(x)` the number of columns is the same as `dim(data)` but the number of rows is different. Any ideas on how I can make this return just those columns whose value in row 1 is 0?

Roland, Yes. You're example df is what the data frame looks like. There are ~30,000 markers and >400 patients in the data frame so I didn't post the `dput(head(data))`. Thanks for the reshaping tip, I'll give that a try.

Your example code did work to subset the columns based on the rows

```
data[,c(TRUE,TRUE,data[1,-(1:2)]==1)] 
```

on the data I was then able to get a data frame with all of the rows and only the columns with the indicated class.

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-26T17:39:21.093

Your data is nor arranged in a good way. It would be better to reshape it.

In absence of input data this is just a guess:

```
df <- data.frame(MarkerID=c("Class","A123","A124"),
                 MarkerName=c("","X","Y"),
                 Patient.1=c(0,1,5),
                 Patent.2=c(1,2,6),
                 Patent.3=c(0,3,7),
                 Patient.4=c(1,4,8))

#  MarkerID MarkerName Patient.1 Patent.2 Patent.3 Patient.4
#1    Class                    0        1        0         1
#2     A123          X         1        2        3         4
#3     A124          Y         5        6        7         8

df[,c(TRUE,TRUE,df[1,-(1:2)]==0)]

#  MarkerID MarkerName Patient.1 Patent.3
#1    Class                    0        0
#2     A123          X         1        3
#3     A124          Y         5        7 
```

Here `c(TRUE,TRUE,df[1,-(1:2)]==0)` creates a logical vector, which is `TRUE` for the first two columns and for those columns, which have a 0 in the first row. Then I subset the columns based on this vector.

```
df[,c(TRUE,TRUE,df[1,-(1:2)]==1)]

#  MarkerID MarkerName Patent.2 Patient.4
#1    Class                   1         1
#2     A123          X        2         4
#3     A124          Y        6         8 
```

This would reshape your data into a more common format (for statistical software):

```
library(reshape2)  
df2 <- merge(melt(df[1,],variable.name="Patient",value.name="class")[-(1:2)],
             melt(df[-1,],variable.name="Patient"),all=TRUE)

#    Patient class MarkerID MarkerName value
#1  Patent.2     1     A123          X     2
#2  Patent.2     1     A124          Y     6
#3  Patent.3     0     A123          X     3
#4  Patent.3     0     A124          Y     7
#5 Patient.1     0     A123          X     1
#6 Patient.1     0     A124          Y     5
#7 Patient.4     1     A123          X     4
#8 Patient.4     1     A124          Y     8 
```

You could then use `subset`:

```
subset(df2,class==0)

#    Patient class MarkerID MarkerName value
#3  Patent.3     0     A123          X     3
#4  Patent.3     0     A124          Y     7
#5 Patient.1     0     A123          X     1
#6 Patient.1     0     A124          Y     5 
```

# c++ - 控制台主输入

> ID：14539420
> 
> 赞同：2
> 
> 时间：2013-01-26T17:17:18.133
> 
> 标签：c++, input, console

好吧，有些人可能还记得我之前的样子，我对编程还很陌生，所以我可能看起来比不上许多其他人。但是，此刻，我非常卡住。

```
int main(int argc, char* argv[]) {
    string temp,input,output;//store input from file, and get which file//

    ofstream out("output.txt");

    if(argc == 3)
    {
        if(ifstream(argv[2]))
        {
            input = argv[2];
            ifstream in(input);
            while(in.good())
            {
                in >> temp;
                ReverseWord(temp);
                cout << temp << endl;
                out << temp << endl;
            }
            out.close();
            in.close();
        }
    }

} 
```

此处的代码旨在通过键入“revstr < input.txt”（其中 input.txt 为文件名）来反转从文件中获取的单词的字母顺序。但是目前程序只是立即打开和关闭，没有任何事情发生，也没有在控制台中输入任何内容。有谁知道如何解决这一问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T17:38:39.513

如果你调用你的程序作为`revstr < input.text`你的`main()`函数将被调用（在通常的平台上）：

```
argv = { "revstr", NULL }
argc = 1 
```

在这种情况下，您可以`input.txt`通过读取 std::cin 来获取 的内容。这就是“输入重新定向”的含义：您的标准输入流被重定向以从文件而不是键盘（又名终端）设备中读取。在这种情况下无需处理文件名。

要将文件名作为参数传递，请使用`revstr input.txt`. 那应该`main()`调用

```
argv = { "revstr", "input.txt", NULL }
argc = 2 
```

所以文件名将作为`argv[1]`.

前一种情况的行为通常是由于命令 shell 将“<”视为重定向指令（结束前面的命令）。你可能期望得到

```
argv = { "revstr", "<", "input.txt", NULL }
argc = 3 
```

为此，您需要应用某种形式的引用或转义来禁用 shell 行为，例如`revstr "<" input.txt`or `revstr \< input.txt`。但据我了解你来自哪里，你想要重定向。在这种情况下，忘记 argc 和 argv 并简单地从`std::cin`.

# xml - 如何使用 XDocument 选择元素名称

> ID：14539421
> 
> 赞同：0
> 
> 时间：2013-01-26T17:18:01.393
> 
> 标签：xml, linq, linq-to-xml

我需要为此示例货币名称 EURUSD、EURGBP ...动态选择所有元素名称：

```
<broker name="MBT Free EXN">
<EURUSD b="1.34565" a="1.34608" s="4.3"/>
<EURGBP b="0.85151" a="0.85227" s="7.6"/>
<EURAUD b="1.29048" a="1.29157" s="10.9"/>
<EURJPY b="122.229" a="122.281" s="5.2"/>
<EURCHF b="1.24661" a="1.24749" s="8.8"/>
<EURCAD b="1.35341" a="1.35429" s="8.8"/>
<USDJPY b="90.828" a="90.844" s="1.6"/>
<USDCHF b="0.92618" a="0.927" s="8.2"/>
<USDCAD b="1.0057" a="1.00609" s="3.9"/>
<GBPUSD b="1.57935" a="1.58059" s="12.4"/>
<GBPJPY b="143.461" a="143.569" s="10.8"/>
<GBPCHF b="1.46327" a="1.46464" s="13.7"/>
<GBPAUD b="1.51486" a="1.51633" s="14.7"/>
<GBPCAD b="1.58829" a="1.5903" s="20.1"/>
<AUDUSD b="1.04202" a="1.04298" s="9.6"/>
<AUDJPY b="94.659" a="94.738" s="7.9"/>
<AUDCAD b="1.04799" a="1.04918" s="11.9"/>
<AUDNZD b="1.24304" a="1.24592" s="28.8"/>
<AUDCHF b="0.96537" a="0.96653" s="11.6"/>
<NZDUSD b="0.83728" a="0.83833" s="10.5"/>
<NZDJPY b="76.052" a="76.142" s="9"/>
<CADJPY b="90.274" a="90.327" s="5.3"/>
<CHFJPY b="97.985" a="98.087" s="10.2"/>
</broker> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T17:21:38.860

怎么样：

```
var names = doc.Root.Elements().Select(e => e.Name.LocalName); 
```

初始化`doc`的`XDocument`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T17:28:29.837

提这个：

```
XElement element = XElement.Parse(xml); // if you have xml as string or
// XElement element = XElement.Load(File.Open(path, FileMode.Open)) if xml in file
var nameList = element.Elements().Select(e=>e.Name.LocalName).ToList(); 
```

# python - 4个列表到一个元组列表中

> ID：14539422
> 
> 赞同：2
> 
> 时间：2013-01-26T17:18:08.287
> 
> 标签：python, list, tuples

我有 4 个清单；

```
[1,3,6][1,5,9][1,2,4]['A','B','C'] 
```

我想像这样创建一个元组列表

```
[(1,1,1,'A'),(3,5,2,'B'),(6,9,4,'C')] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-26T17:20:17.750

使用内置的 zip 功能：

```
>>> zip([1,3,6],[1,5,9],[1,2,4],['A','B','C'])
[(1, 1, 1, 'A'), (3, 5, 2, 'B'), (6, 9, 4, 'C')] 
```

它也适用于其他迭代。

# python - 遍历字符串列表的Pythonic方式？

> ID：14539424
> 
> 赞同：2
> 
> 时间：2013-01-26T17:18:15.690
> 
> 标签：python

目前，我有以下方法将字符放在一种可视文本映射中的字典中。不过，我想知道，是否有一种非常简洁的pythonic方式来进行这种双重迭代。有任何想法吗？

```
lines = ['abc','456','xyz']
chars = {}
for i, row in enumerate(lines):
    for j, c in enumerate(row):
        chars[i,j] = c 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T17:20:10.987

您可以将其表示为字典理解：

```
chars = {(i, j): c for i, row in enumerate(lines) for j, c in enumerate(row)} 
```

它基本上是相同的迭代，只是表达方式略有不同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-26T17:38:05.347

使用 dict 理解。阅读嵌套推导的关键： ***“就像普通循环一样阅读它们，首先描述“大循环”，随后的循环嵌套在其中”*** ^([1](http://rhodesmill.org/brandon/2009/nested-comprehensions/))

```
In [1]: lines = ['abc','456','xyz']

In [2]: {(i,j): c for i, row in enumerate(lines) for j, c in enumerate(row)}
Out[2]: 
{(0, 0): 'a',
 (0, 1): 'b',
 (0, 2): 'c',
 (1, 0): '4',
 (1, 1): '5',
 (1, 2): '6',
 (2, 0): 'x',
 (2, 1): 'y',
 (2, 2): 'z'} 
```

* * *

您可以将理解拆分为多行，以使其更具可读性。如果*仔细观察*，它实际上与常规循环*非常相似*，只有最后一行被带到了开头。

除此之外，我建议阅读 Brandon Rhodes 的一篇博文：[“我终于理解了嵌套推导”](http://rhodesmill.org/brandon/2009/nested-comprehensions/)

```
# Comprehension                       # Regular for loop

{(i,j):c                              # chars = {}
    for i, row in enumerate(lines)    # for i, row in enumerate(lines):
        for j, c in enumerate(row)}   #     for j, c in enumerate(row):
                                      #          chars[i,j] = c 
```

# jquery - 多次单击 JQuery slideToggle() - 防止动画

> ID：14539430
> 
> 赞同：12
> 
> 时间：2013-01-26T17:18:38.473
> 
> 标签：jquery, slidetoggle, jsfiddle

我已经搜索了一段时间的解决方案，但似乎找不到。我想也许在我的小提琴中使用 JQuery `.clearQueue()`，但它不起作用。

这是[小提琴](http://jsfiddle.net/xj3Py/)。

需要明确的是：我希望 sideToggle() 执行，但是一旦再次单击它并且第一个 slideToggle() 尚未完成，它应该停止第一个动画并向上滑动。使用该`.clearQueue()`方法它确实可以单击两次，但是当单击例如三次时，该框消失并且高度不知何故搞砸了。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-26T17:32:27.923

使用 jquery [`.stop()`](http://api.jquery.com/stop/)api 可以解决问题。

[工作示例。](http://jsfiddle.net/xj3Py/2/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-07-24T14:13:46.243

在动画期间使用 stop() 可能会导致无法再达到原始高度的不良情况。

另一种选择是强制动画在单击可以再次触发之前完成：

```
function clickFunc() {
    var $this=$(this);
    if($this.hasClass('toggling')){return;}
    $this.addClass('toggling')
    $this.stop().slideToggle(300,function(){
        $this.removeClass('toggling');
    });
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-26T17:34:46.240

有一个插件可以用来暂停和恢复非 jQuery 原生的动画：http: [//tobia.github.com/Pause/](http://tobia.github.com/Pause/)

如果您不需要对动画进行*如此*精细的调整，那么您可以使用`.finish`（添加 jQuery 1.9）而不是`.clearQueue`. 问题是它突然结束了动画，这看起来有点奇怪。

问题是 jQuery 不跟踪原始高度（只是`$("div").data('originalHeight', $("div").height())`自己做这个）。这将通过在动画中间清除队列来防止高度被搞砸：

[http://jsfiddle.net/xj3Py/3/](http://jsfiddle.net/xj3Py/3/)

这仍然不是完美的，因为它会通过 3 次或更多点击跳跃，但至少高度不会搞砸。

# javascript - 在页面加载时显示 div

> ID：14539432
> 
> 赞同：0
> 
> 时间：2013-01-26T17:18:44.680
> 
> 标签：javascript, html

我正在从一个 html 页面的查询字符串中传递 div 名称，并在另一个 html 页面上检索该 div 名称。现在我想在页面上显示特定的 div。我的代码是

```
function onLoad()
{    
    var divname=window.location.search.substring(1);    
    document.getElementById(divname).style.display="block";    //error is in this line
} 
```

但我收到“预期对象”错误。请帮我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T17:30:20.767

该[`window.location.search`](https://developer.mozilla.org/en-US/docs/DOM/window.location)属性返回`?`符号后面的 URL 部分，包括`?`符号。

因此，例如它可能会返回`?paramname=paramvalue`. 当您调用`substring(1)`它时，您会`paramname=paramvalue`得到传递给`document.getElementById`函数的内容，这显然是错误的，因为您的 DOM 上不存在此类元素。

您可以使用[`following javascript function`](https://stackoverflow.com/a/901144/29407)来读取查询字符串参数值：

```
function onLoad() {    
    var divname = getParameterByName('divname');    
    document.getElementById(divname).style.display = 'block';
} 
```

这假设您有一个名为的查询字符串参数名称`divname`：

```
?divname=some_div_name 
```

`getParameterByName`如果查询字符串参数的调用方式不同，请调整传递给函数的参数。

您可能还想在代码中引入错误检查以使其更加健壮：

```
function onLoad() {    
    var divname = getParameterByName('divname');    
    var divElement = document.getElementById(divname);
    if (divElement != null) {
        divElement.style.display = 'block';
    } else {
        alert('Unable to find an element with name = ' + divname);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T17:54:51.810

我的建议是将您`js`放在代码的末尾`html`（`</body>`标签之前）。不要使用函数。

```
<html>
    ...
    ...
    ...
    <body>
    ...
    ...
    ...
        <script>
            var divname=window.location.search.substring(1);    
            document.getElementById(divname).style.display="block"; 
        </script>
    </body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T18:26:28.080

我已经重新编写了我的函数并且它正在工作，代码是这样的

```
function load()  
{  
    var divname = window.location.search.substring(1);  
    var params=divname.split('=');  
    var i=1;  
    alert(params[i].substring(0));  
    document.getElementById(params[i].substring(0)).style.display='block';  
} 
```

# android - 如何在通过按钮移动时检测事件？

> ID：14539438
> 
> 赞同：0
> 
> 时间：2013-01-26T17:19:17.587
> 
> 标签：android, ontouchlistener

我正在尝试在android中开发一个乐器应用程序。我为每个按钮都实现了OnTouchListener，只点一个按钮就没有问题。但是当我触摸一个按钮并将手指移动到下一个按钮时，不会调用该按钮的 OnTouchListener 并且不会播放它的声音。如何在不抬起手指的情况下在按钮上滑动手指时播放声音？（我读了很多问题，但它们没有用）

我对每个按钮的简单 OnTouchListener ：

```
final ImageButton img_1 = (ImageButton) findViewById(R.id.img_1);
img_1.setOnTouchListener(new View.OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {
              if( event.getAction() ==  MotionEvent.ACTION_DOWN )   {
                snd.play_s_l_1(); 
              }
             return true;
        } 

 }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T18:13:27.287

检查 MotionEvent.MOVE：

```
private Rect rect;    // Variable rect to hold the bounds of the view

public boolean onTouch(View v, MotionEvent event) 
{
    if(event.getAction() == MotionEvent.ACTION_DOWN)
    {
        // Construct a rect of the view's bounds
        rect = new Rect(v.getLeft(), v.getTop(), v.getRight(), v.getBottom());
    }
    if(event.getAction() == MotionEvent.ACTION_MOVE)
    {
        if(!rect.contains((int)event.getX(), (int)event.getY()))
        {
            // User moved outside bounds
        }
    }
    return false;
} 
```

# python - 多机械化交易错误

> ID：14539439
> 
> 赞同：0
> 
> 时间：2013-01-26T17:19:19.833
> 
> 标签：python, linux, performance, performance-testing

我正在使用 multi-mechanize 和 urllib2 在网络服务器上运行示例

```
#!/usr/bin/env python

import urllib2
import time
import random

class Transaction(object):
    def __init__(self):
        pass

    def run(self):
        start_timer = time.time()
        resp = urllib2.urlopen('http://192.168.16.114/1.html')
        content = resp.read()
        latency = time.time() - start_timer

        self.custom_timers['Example_Homepage'] = latency
        assert (resp.code == 200), 'Bad Response: HTTP %s' % resp.code
        assert ('Example Web Page' in content), 'Text Assertion Failed'

if __name__ == '__main__':
    trans = Transaction()
    trans.run()
    print trans.custom_timers 
```

运行项目后，我可以看到每个交易的错误，但不确定是什么错误，因为我可以看到网络服务器正确响应请求，有人可以建议吗？

```
[root@dev1-proxy3 scripts]# multimech-run k1_testrun

  user_groups:  2
  threads: 6

[================100%==================]  30s/30s   transactions: 23879  timers: 23879  errors: 23879

analyzing results...

transactions: 23888
errors: 23888

test start: 2013-01-26 12:59:23
test finish: 2013-01-26 12:59:53

created: ./k1_testrun/results/results_2013.01.26_12.59.23/results.html

done. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-03T05:49:05.320

您可以在配置文件中启用详细日志记录（默认情况下它是关闭的），然后您可以在日志文件中找到您要查找的信息。它对我的情况有所帮助。

```
console_logging = on 
```

# java - 添加/保存的数据无效 (addPerson)

> ID：14539442
> 
> 赞同：1
> 
> 时间：2013-01-26T17:19:27.790
> 
> 标签：java, loops, if-statement, validation

```
Scanner sc = new Scanner(System.in);
Boolean valid =  true;
do{
    valid = true;
    //get first name input and valid
    System.out.print("Enter your First Name > ");
    String firstName = sc.nextLine();
    if(firstName.trim().length() > 25){
        valid = false;
    }
    //get last name input and valid
    System.out.print("Enter your Last Name > ");
    String lastName = sc.nextLine();
    if(lastName.trim().length() > 25){
        valid = false;
    }
    //get email input and valid
    System.out.print("Enter your Email > ");
    String email = sc.nextLine();
    if(email.trim().length() > 40){
        valid = false;
    }
      ctrl.addPerson(email, firstName, lastName);

}while(valid == false); 
```

不断提示用户输入无效输入，但仍添加/保存无效数据 (addPerson)。我可以理解为什么保存无效，但我应该如何正确使用 if ？感谢您的帮助！

* * *

我已经阅读了大家的建议和建议，以下是编辑后的代码。希望它会更好。

```
Scanner sc = new Scanner(System.in);
boolean valid =  true;
String firstName = null;
String lastName = null;
String email = null;
Date birthday = null;

        do{
            System.out.print("Enter your First Name > ");
            firstName = sc.nextLine();
        }while(firstName.trim().length() > 25);

        do{     
            System.out.print("Enter your Last Name > ");
            lastName = sc.nextLine();
        }while(lastName.trim().length() > 25);

        do{     
            System.out.print("Enter your Email > ");
            email = sc.nextLine();
        }while(email.trim().length() > 40);

        ctrl.addPerson(email, firstName, lastName); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T17:21:25.557

您需要将方法`addPerson`置于以下条件下

```
if(valid) {
    ctrl.addPerson(email, firstName, lastName);
} 
```

我还建议您使用原始类型（`boolean`而不是`Boolean`），这里没有理由使用它的对象表示。

# javascript - 使用 RaphaelJS 矢量图形库 - 帮助示例

> ID：14539443
> 
> 赞同：1
> 
> 时间：2013-01-26T17:19:29.723
> 
> 标签：javascript, raphael, vector-graphics

我正在查看此[http://raphaeljs.com/australia.html](http://raphaeljs.com/australia.html)示例的源代码，并尝试解释为使用 RaphaelJS 图形库创建类似项目所做的工作。

但是，我对部分代码感到困惑。具体来说，作者在 for 循环内的函数中使用了一个参数“st”，之前没有定义，而第二个参数“state”有。我不确定我错过了什么，但有人可以解释一下这里发生了什么吗？这是通用参数还是对特定内容的调用？

```
for (var state in aus) {
            aus[state].color = Raphael.getColor();
            (function (st, state) {
                st[0].style.cursor = "pointer";
                st[0].onmouseover = function () {
                    current && aus[current].animate({fill: "#333", stroke: "#666"}, 500) && (document.getElementById(current).style.display = "");
                    st.animate({fill: st.color, stroke: "#ccc"}, 500);
                    st.toFront();
                    R.safari();
                    document.getElementById(state).style.display = "block";
                    current = state;
                };
                st[0].onmouseout = function () {
                    st.animate({fill: "#333", stroke: "#666"}, 500);
                    st.toFront();
                    R.safari();
                };
                if (state == "nsw") {
                    st[0].onmouseover();
                }
            })(aus[state], state);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T10:29:38.997

`st`是周围闭包的命名参数：

```
(function (st, state) {
    // ...
})(aus[state], state); 
```

这称为*立即调用函数表达式*（通常称为*自执行块*或*临时范围*），用于通过从周围上下文中提取代码来“保存”状态。

为了从闭包外部引入变量，可以将它们作为参数传递给尾括号（这里`aus[state], state`），并在函数的签名中命名它们（这里`st, state`）。

### 参考

*   [](http://ejohn.org/apps/learn/#58)*John Resig 的*Learning Advanced JavaScript*交互式教程[*中的临时范围*](http://ejohn.org/apps/learn/#58)、[*闭包和循环*](http://ejohn.org/apps/learn/#59)*
***   [](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Closures)*Mozilla 开发者网络[*关闭*](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Closures)***

 **### 延伸阅读

*   [](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)*Ben Alman 在他的博客上的[*立即调用函数表达式*](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T17:33:20.683

使用值`aus[state]`和调用该函数`state`（查看倒数第二行）。所以它相当于：

```
for (var state in aus) {
        aus[state].color = Raphael.getColor();

        var st = aus[state]; // This line replaces the function

        st[0].style.cursor = "pointer";
        st[0].onmouseover = function () {
            current && aus[current].animate({fill: "#333", stroke: "#666"}, 500) && (document.getElementById(current).style.display = "");
            st.animate({fill: st.color, stroke: "#ccc"}, 500);
            st.toFront();
            R.safari();
            document.getElementById(state).style.display = "block";
            current = state;
        };

        st[0].onmouseout = function () {
            st.animate({fill: "#333", stroke: "#666"}, 500);
            st.toFront();
            R.safari();
        };

        if (state == "nsw") {
            st[0].onmouseover();
        }
    } 
```***

# sql-server - 将列从 VARCHAR(MAX) 更改为 VARBINARY(MAX)

> ID：14539445
> 
> 赞同：17
> 
> 时间：2013-01-26T17:19:32.073
> 
> 标签：sql-server

我有一个包含一`VARCHAR(MAX)`列的表，我需要将其更改为`VARBINARY(MAX)`.

我尝试使用命令

```
ALTER TABLE TableName ALTER COLUMN ColumnName VARBINARY(MAX) 
```

但我得到了错误

> *消息 257，级别 16，状态 3，第 1 行
> 不允许从数据类型 varchar(max) 到 varbinary(max) 的隐式转换。
> 使用 CONVERT 函数运行此查询。*

该表没有数据，所以我不明白为什么它抱怨数据转换。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-26T17:32:12.400

您不能使用`ALTER TABLE`语句执行此转换，因为[从`varchar(max)`to`varbinary(max)`转换需要显式转换](http://msdn.microsoft.com/en-us/library/ms187928.aspx)。因此，您应该按照以下步骤更改您的表格：

1.  用新列更改表`VARBINARY(MAX)`
2.  如果`VARCHAR(MAX)`列中有现有数据，请使用更新语句将数据添加到`VARBINARY`列中
3.  更改表以删除`VARCHAR(MAX)`列
4.  `varbinary`将列重命名为`varchar`名称（[@Ben Thul](https://stackoverflow.com/questions/14539445/change-column-from-varcharmax-to-varbinarymax#comment20281873_14539582)的每条评论）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-08-14T16:58:23.917

转换`Varchar`为`Int`，然后更改`Int`为`Binary`.

# windows-phone-8 - Windows Phone - 如何使用 AccentColors.dll

> ID：14539447
> 
> 赞同：0
> 
> 时间：2013-01-26T17:19:36.687
> 
> 标签：windows-phone-8, windows-phone

我的应用程序需要来自 Windows Phone 8 的新强调色。我在目录 C:\Program Files (x86)\Microsoft SDKs\Windows Phone\v8.0\Design\AccentColors 中找到了 AccentColors.dll。

我怎样才能使用这个库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T23:28:39.347

AccentColors.dll 不适合第 3 方开发人员使用。它可能是为 Blend 添加的设计时支持的一部分。

你到底想做什么？

所有默认强调色都列在该文件夹中的文件中。您可以使用 PhoneAccentColor/PhoneAccentBrsh 获得活跃的口音。您可以通过更改应用程序 c'tor 中的 App.Resources 来覆盖 PhoneAccentColor。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-27T03:25:57.180

如果您需要在代码中使用颜色，您可以添加一个模仿 Colors 类的新类。然后你就可以轻松使用它了。

```
public sealed class AccentColors
{
    public static Color Cobalt { get { return Color.FromArgb(255, 0, 80, 239); } }
    public static Color Lime { get { return Color.FromArgb(255, 164, 196, 0); } }
    public static Color Green { get { return Color.FromArgb(255, 96, 169, 23); } }
    public static Color Emerald { get { return Color.FromArgb(255, 0, 138, 0); } }
    public static Color Teal { get { return Color.FromArgb(255, 0, 171, 169); } }
    public static Color Cyan { get { return Color.FromArgb(255, 27, 161, 226); } }
    public static Color Indigo { get { return Color.FromArgb(255, 106, 0, 255); } }
    public static Color Violet { get { return Color.FromArgb(255, 170, 0, 255); } }
    public static Color Pink { get { return Color.FromArgb(255, 244, 114, 208); } }
    public static Color Magenta { get { return Color.FromArgb(255, 216, 0, 115); } }
    public static Color Crimson { get { return Color.FromArgb(255, 162, 0, 37); } }
    public static Color Red { get { return Color.FromArgb(255, 229, 20, 0); } }
    public static Color Orange { get { return Color.FromArgb(255, 250, 104, 0); } }
    public static Color Amber { get { return Color.FromArgb(255, 240, 163, 10); } }
    public static Color Yellow { get { return Color.FromArgb(255, 216, 193, 0); } }
    public static Color Brown { get { return Color.FromArgb(255, 130, 90, 44); } }
    public static Color Olive { get { return Color.FromArgb(255, 109, 135, 100); } }
    public static Color Steel { get { return Color.FromArgb(255, 100, 118, 135); } }
    public static Color Mauve { get { return Color.FromArgb(255, 118, 96, 138); } }
    public static Color Sienna { get { return Color.FromArgb(255, 122, 59, 63); } }
} 
```

在你的项目中，你可以做

```
var coblat = AccentColors.Cobalt; 
```

如果您想向用户显示颜色，这里有一个简单的示例。首先添加一个将强调色转换为集合的方法。

```
public static IEnumerable<Color> AsEnumerable()
{
    yield return Cobalt;
    yield return Lime;
    yield return Green;
    yield return Emerald;
    // and the rest
} 
```

然后创建一个 ListBox 来显示颜色。

```
<ListBox x:Name="ColorPicker">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <Rectangle Fill="{Binding}" Width="100" Height="100"/>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

最后将 ItemsSource 设置为颜色

```
// In code behind
ColorPicker.ItemsSource = AccentColors.AsEnumerable(); 
```

# java - 如何使用简单的 HttpClient 示例下载文件？

> ID：14539453
> 
> 赞同：0
> 
> 时间：2013-01-26T17:19:56.800
> 
> 标签：java, apache-httpclient-4.x

我是 Java 和 HttpClient 的新手，我正在尝试从 Dropbox 文件中进行简单下载，但我得到以下异常：

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/commons/logging/LogFactory
    at org.apache.http.impl.client.AbstractHttpClient.<init>(AbstractHttpClient.java:187)
    at org.apache.http.impl.client.DefaultHttpClient.<init>(DefaultHttpClient.java:146)
    at downlaodtest.DownlaodTest.main(DownlaodTest.java:23)
Caused by: java.lang.ClassNotFoundException: org.apache.commons.logging.LogFactory
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    ... 3 more
Java Result: 1 
```

为什么会抛出异常？

```
public class DownlaodTest {
  public static void main(String[] args) throws IOException {
    HttpClient httpclient = new DefaultHttpClient();
    HttpGet httpget = new HttpGet("https://dl.dropbox.com/s/ex4clsfmiu142dy/test.zip");
    HttpResponse response = httpclient.execute(httpget);
    System.out.println(response.getStatusLine());
    HttpEntity entity = response.getEntity();
    if (entity != null) {
      InputStream instream = entity.getContent();
      try {
        BufferedInputStream bis = new BufferedInputStream(instream);
        String filePath = "C:/@Victor";
        BufferedOutputStream bos = new BufferedOutputStream(new FileOutputStream(new File(filePath)));
        int inByte;
        while ((inByte = bis.read()) != -1 ) {
          bos.write(inByte);
        }
        bis.close();
        bos.close();
      } catch (IOException ex) {
        throw ex;
      } catch (RuntimeException ex) {
        httpget.abort();
        throw ex;
      } finally {
        instream.close();
      }
      httpclient.getConnectionManager().shutdown();
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T17:32:58.963

如果我将文件路径更改为有效路径并将它需要的所有库添加到类路径中，它在我的机器上工作正常。

```
String filePath = "d:\\test.zip"; 
```

图书馆：

```
commons-codec-1.6.jar
commons-logging-1.1.1.jar
fluent-hc-4.2.3.jar
httpclient-4.2.3.jar
httpclient-cache-4.2.3.jar
httpcore-4.2.2.jar
httpmime-4.2.3.jar 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T17:32:08.917

我认为你必须添加下面的行来保存你的文件。

```
response.addHeader(“Content-Disposition”, “attachment;filename=\”" + file.getName() + “\”");
response.addHeader(“Content-Transfer-Encoding”, “binary”);`
response.setContentType(“application/octet-stream”);`
response.setContentLength((int) file.length());`
response.getOutputStream().write(buffer);`
response.getOutputStream().flush();` 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T18:21:08.413

首先，如果您是 Java 新手，您必须了解管理 Java 依赖项。

要么下载带有依赖项的二进制发行版，然后将它们全部复制到项目中并添加到 Eclipse，要么学习使用**maven**。

例如，您添加依赖项：

```
<dependency>
    <groupId>org.apache.httpcomponents</groupId>
    <artifactId>httpclient</artifactId>
    <version>4.0-alpha4</version>
</dependency> 
```

并且 maven 正在为您做所有其他事情（下载所有依赖项及其依赖项）。

# qt - 如何将 QPushButton 添加到 QTabWidget 标头？

> ID：14539455
> 
> 赞同：1
> 
> 时间：2013-01-26T17:20:04.107
> 
> 标签：qt, qt4, qt4.8, qpushbutton

我创建了标签：

```
ui->tabWidget->addTab(widgetTab,"Title"); 
```

我想在标签文本“标题”之后添加一个刷新按钮。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T17:45:14.013

我不相信你可以直接。的`QTabBar`元素`QTabWidget`只能通过`tabBar()`受保护的成员函数访问。并且`QTabBar`'`setTabButton`不会在选项卡小部件的界面中以其他方式公开。

你可以通过子类化来做到这一点`QTabWidget`。就像是：

```
class MyTabWidget: public QTabWidget
{
    Q_OBJECT

    public:
        MyTabWidget(QWidget *parent = 0)
            : QTabWidget(parent)
        {
            addTab(new QLabel("foo"), "foo");
            addTab(new QLabel("bar"), "bar");
            QPushButton *b1 = new QPushButton("<");
            QPushButton *b2 = new QPushButton(">");
            tabBar()->setTabButton(0, QTabBar::LeftSide, b1);
            tabBar()->setTabButton(1, QTabBar::RightSide, b2);
        }
}; 
```

# ruby-on-rails - 将变量传递给带有内容的 Rails 中的 Fancybox

> ID：14539459
> 
> 赞同：1
> 
> 时间：2013-01-26T17:20:32.540
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, fancybox

我在 Rails 中有这个链接：

```
<%= link_to "Add to Journal", add_post_journal_path(post), :method => :put %> 
```

但是，我想转换此链接以显示一个精美的框，其中包含列出我要选择的内容的内容。首先，我使用以下代码：

```
<%= link_to "fancy", "#add_post", :class=>"fancybox" %> 
```

但我有错误，因为我想将实际的帖子传递给fancybox，所以我使用这个代码：在`add_post.html.erb`：

```
<h1>Escolha o Jornal que deseja adicionar:</h1>
<ul>
<% current_user.journals.each do |journal| %>
  <li><%= link_to journal.name,add_post_complete_journal_path(journal),:remote=>true %> </li>
<% end %>
</ul> 
```

我的控制器是：

```
def add_post
  @journal_post = JournalsPosts.new
  session[:post_add] = params[:id]
end

def add_post_complete
  @journal_post = JournalsPosts.create(:post_id => session[:post_add],:journal_id => params[:id])

  respond_with @journal_post
end 
```

如何转换此代码以在我的幻想框中使用我的内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T17:31:49.090

在您的操作 add_post 上添加下一个使用 js 的响应：

```
def add_post
    @journal_post = JournalsPosts.new
    session[:post_add] = params[:id]
    respond_to do |format|
      format.js
    end
  end 
```

在您的视图中添加一个文件，`add_post.js.erb`其中包含以下内容：

```
$.fancybox('<%= escape_javascript(render(:partial => 'path_to/add_post'))%>',
  {
    openEffect: "fade",
    closeEffect: "fade",
    autoSize: true,
    minWidth: 480,
    scrolling: 'auto',
  }); 
```

例如，您`_add_post.html.erb`在视图上添加了一个部分。现在在这个部分中，您可以编写代码视图：

```
#code for your view inside partial `add_post.html.erb`
<%= @journal_post %>
<h1>Escolha o Jornal que deseja adicionar:</h1>
<ul>
 .
 . 
```

问候！

# google-app-engine - 谷歌云如何通过虚拟化实现可扩展性？

> ID：14539460
> 
> 赞同：0
> 
> 时间：2013-01-26T17:20:34.010
> 
> 标签：google-app-engine, virtualization

我有一个关于 Google 应用引擎如何通过虚拟化实现可扩展性的问题。例如，当我们将云应用程序部署到 Goodle 应用程序引擎时，当我们应用程序的用户数量增加时，我认为 Google 会自动生成一个新的虚拟服务器来处理用户请求。最初，云应用程序运行在一个虚拟服务器上，现在它运行在两个虚拟服务器上。谷歌通过虚拟化实现了可扩展性，因此谷歌基础设施中的任何一个系统都可以运行应用程序的代码——即使发布到同一个应用程序的两个连续请求也可能不会发送到同一个服务器

有谁知道应用程序如何在 Google 的两个虚拟服务器上运行。它如何向两个虚拟服务器发送请求并同步数据，使用 CPU 资源，...？

谷歌是否有任何文件指出这个问题和虚拟化实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T17:36:33.967

现在这是一个具体的答案，因为我们不知道谷歌是如何做到这一点的。但我可以解释负载均衡器在 Apache 中的工作原理，它以类似的概念运行。哎呀，也许谷歌正在使用 Apache 负载平衡的变量。[在这里阅读更多。](http://www.openlogic.com/wazi/bid/188013/Load-Balancing-Using-Apache-s-mod_proxy_balancer)

基本上，一个简单的 Apache 负载平衡结构至少包含 3 个服务器：1 个头部负载平衡器和 2 个镜像服务器。负载均衡器基本上是外部世界流量的交通警察。对使用负载平衡的网站发出的任何公共请求实际上都是在请求“头”机器。

在那台负载平衡机器上，配置选项基本上决定了幕后哪些从服务器将内容发送回负载平衡器进行传送。这些“从属”机器基本上是常规的 Apache Web 服务器，它们的 IP 可能仅限于将内容传送到主负载平衡器机器。

所以假设负载平衡结构中的两个从服务器是 100% 相同的。负载均衡器将随机选择一个来抓取内容，如果它可以在合理的时间内抓取内容，那么“从属”现在成为源。如果由于某种原因从属机器很慢，负载均衡器然后决定，“太慢了，继续！” 并转到下一台机器。它基本上会为每个请求做出类似的决定。

最终结果是更快和更易于访问的服务器是首先提供的。但是由于内容都代理在公共访问的负载均衡器后面，所以外界没有人知道其中的区别。

现在假设负载均衡器后面的站点流量如此之大，以至于需要将更多服务器添加到集群中。没问题！只需将现有的从站设置克隆到尽可能多的新机器上，调整负载均衡器以了解这些从站的存在并让它管理代理。

现在最困难的部分是真正让所有机器保持同步。这完全取决于站点需求和使用情况。因此，一个数据库重的网站可能会为每台机器上的每个数据库使用 MySQL 镜像。或者可能有一个完全独立的数据库服务器，它本身可能正在镜像和集群到其他数据库。

尽管如此，谷歌成功的关键是平衡他们的负载平衡基础设施的工作方式。这并不容易，我不知道他们在做什么。但我确信上面概述的基本概念以某种方式应用。

# java - Android 对话框。使用对话框中的单选按钮，用户必须单击一个

> ID：14539472
> 
> 赞同：1
> 
> 时间：2013-01-26T17:21:41.480
> 
> 标签：java, android, android-dialog

我正在使用带有 2 个单选按钮的对话框来让用户对对象进行分类。如果用户明确单击其中一个单选按钮，则此方法有效，但如果他们直接按 OK，则无效。我该如何处理这种情况？

```
case DIALOG_OBJECT_CLASSIFICATION:
        return new AlertDialog.Builder(DrawNewPlans.this)
                .setIcon(R.drawable.alert_dialog_icon)
                .setTitle("What Object are you drawing?")
                .setSingleChoiceItems(R.array.types_of_object, 0,
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog,
                                    int whichButton) {
                                makeToast("WhichButton = "+whichButton);
                                switch (whichButton) {
                                    case 0:
                                        makeToast("User Picked Room");
                                        isRoom = true;
                                        isFurniture = false;
                                        return;
                                    case 1:
                                        makeToast("User Picked Furniture");
                                        isRoom = false;
                                        isFurniture=true;
                                        return;
                                }
                                /* User clicked on a radio button do some stuff */
                            }
                        })
                .setPositiveButton("Ok",
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog,
                                    int whichButton) {
                                makeToast("classOfRoom is "+classOfRoom);
                                makeToast("isRoom = "+isRoom);
                                makeToast("isFurniture = "+isFurniture);
                                if (isRoom == true && isFurniture == false) {
                                    classOfRoom="Room";
                                } else if (isRoom == false && isFurniture == true) {
                                    classOfRoom="Furniture";
                                }
                                /* User clicked Yes so do some stuff */
                                isClassified=true;
                                methodWhichStartsDialogs();
                            }
                        })
                .setNegativeButton("Cancel",
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog,
                                    int whichButton) {

                                /* User clicked No so do some stuff */
                            }
                        }).create(); 
    } 
```

我刚刚添加了 Toasts 进行调试。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T17:25:43.213

您可以将一个单选按钮默认设置为 true，即即使用户没有选择任何内容，该选项也会默认被选中。

或者，否则，您可以检查当用户按下确定时是否至少选择了一个单选按钮。如果未选择任何内容，请不要关闭对话框。

# java - 使用适用于 Amazon S3 存储桶的 Java 开发工具包下载大量文件

> ID：14539475
> 
> 赞同：3
> 
> 时间：2013-01-26T17:21:46.143
> 
> 标签：java, amazon-web-services, amazon-s3, download, amazon

我有大量需要从 S3 存储桶下载的文件。我的问题与[本文](https://stackoverflow.com/questions/1051275/downloading-a-large-number-of-files-from-s3)类似，只是我尝试在 Java 中运行它。

```
public static void main(String args[]) {
        AWSCredentials myCredentials = new BasicAWSCredentials("key","secret");
        TransferManager tx = new TransferManager(myCredentials);
        File file = <thefile>
        try{
        MultipleFileDownload myDownload = tx.downloadDirectory("<bucket>", null, file);
        System.out.println("Transfer: " + myDownload.getDescription());
        System.out.println("  - State: " + myDownload.getState());
        System.out.println("  - Progress: " + myDownload.getProgress().getBytesTransfered());

        while (myDownload.isDone() == false) {
           System.out.println("Transfer: " + myDownload.getDescription());
           System.out.println("  - State: " + myDownload.getState());
            System.out.println("  - Progress: " + myDownload.getProgress().getBytesTransfered());
            try {
                // Do work while we wait for our upload to complete...
                Thread.sleep(500);
            } catch (InterruptedException ex) {
                ex.printStackTrace();
            }
         }
         } catch(Exception e){
          e.printStackTrace();
         }

      } 
```

这改编自 TransferManager 类示例，用于多次上传。此存储桶中有超过 100,000 个对象。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-03T20:37:41.013

请使用 list() 方法获取文件列表，然后使用 get() 方法获取每个文件。

```
class S3 extends AmazonS3Client {

    final String bucket;

    S3(String u, String p, String Bucket) {
        super(new BasicAWSCredentials(u, p));
        bucket = Bucket;
    }

    String get(String k) {
        try {
            final S3Object f = getObject(bucket, k);
            final BufferedInputStream i = new BufferedInputStream(f.getObjectContent());
            final StringBuilder s = new StringBuilder();
            final byte[] b = new byte[1024];
            for (int n = i.read(b); n != -1; n = i.read(b)) {
                s.append(new String(b, 0, n));
            }
            return s.toString();
        } catch (Exception e) {
            log("Cannot get " + bucket + "/" + k + " from S3 because " + e);
        }
        return null;
    }

    String[] list(String d) {
        try {
            final ObjectListing l = listObjects(bucket, d);
            final List<S3ObjectSummary> L = l.getObjectSummaries();
            final int n = L.size();
            final String[] s = new String[n];
            for (int i = 0; i < n; ++i) {
                final S3ObjectSummary k = L.get(i);
                s[i] = k.getKey();
            }
            return s;
        } catch (Exception e) {
            log("Cannot list " + bucket + "/" + d + " on S3 because " + e);
        }
        return new String[]{};
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-20T01:31:23.557

TransferManager 在内部使用 countdownlatch ，这让我相信是并发下载（这似乎是正确的方法）。使用它比依次获取一个文件更有意义吗？

# r - R中矩阵的符号逆

> ID：14539476
> 
> 赞同：1
> 
> 时间：2013-01-26T17:21:46.447
> 
> 标签：r, matrix-inverse, symbolic-computation

如何在 R 中找到矩阵的符号逆；例如：

```
Matrix.test <- function(x) matrix(c(x, x^2, x^3, x^4, x^5, x^6, x^7, x^8, x^9, 2*x, 3*x, 4*x, 2*x^2, 3*x^3, 4*x^4, 5*x^5), 4, 4) 
```

我知道有一个名为“Ryacas”的包，它是“yacas”的接口，但我无法应用它来进行此类计算。'yacas' 是一个用于对数学表达式进行符号操作的程序。请参阅[链接](http://yacas.sourceforge.net/homepage.html)了解更多详情。

谢谢你

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-26T17:52:31.570

这对我来说可以：

```
> library(Ryacas)
> x <- Sym('x')
> M <- List(List(1,x),List(x,1))
> PrettyForm(M)
/              \
| ( 1 ) ( x )  |
|              |
| ( x ) ( 1 )  |
\              /
> PrettyForm(Inverse(M))
/                        \
| /   1    \ / -( x ) \  |
| | ------ | | ------ |  |
| |      2 | |      2 |  |
| \ 1 - x  / \ 1 - x  /  |
|                        |
| / -( x ) \ /   1    \  |
| | ------ | | ------ |  |
| |      2 | |      2 |  |
| \ 1 - x  / \ 1 - x  /  |
\                        / 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-26T18:05:25.317

并遵循：

```
M2 <- List(List(  x,     x^2,  x^3,  x^4),
           List(  x^5,   x^6,  x^7,  x^8),
           List(  x^9, 2*x  ,3*x  ,  4*x),
           List(2*x^2, 3*x^3, 4*x^4, 5*x^5))
Inverse(M2) 
```

不过，答案相当复杂（我只能费心重新格式化前四行）：

```
{{(x^6*3*x*5*x^5-x^6*4*x*4*x^4+x^8*2*x*4*x^4-x^7*2*x*5*x^5+
   x^7*4*x*3*x^3-x^8*3*x*3*x^3)/(x^7*3*x*5*x^5-x^7*4*x*4*x^4-
   x^8*2*x*5*x^5+x^8*4*x*3*x^3-x^9*3*x*3*x^3+x^9*3*x*3*x^3+
   x^8*2*x*5*x^5-x^8*4*x*3*x^3-x^7*3*x*5*x^5+x^7*4*x*4*x^4-
   x^19*4*x^4+x^19*4*x^4+x^18*5*x^5-x^9*4*x*2*x^2-x^18*5*x^5+x^9*4*x*2*x^2-x^11*2*x*2*x^2+x^11*2*x*2*x^2),(x^4*3*x*3*x^3-x^4*2*x*4*x^4+x^3*2*x*5*x^5-x^3*4*x*3*x^3-x^2*3*x*5*x^5+x^2*4*x*4*x^4)/(x^7*3*x*5*x^5-x^7*4*x*4*x^4-x^8*2*x*5*x^5+x^8*4*x*3*x^3-x^9*3*x*3*x^3+x^9*3*x*3*x^3+x^8*2*x*5*x^5-x^8*4*x*3*x^3-x^7*3*x*5*x^5+x^7*4*x*4*x^4-x^19*4*x^4+x^19*4*x^4+x^18*5*x^5-x^9*4*x*2*x^2-x^18*5*x^5+x^9*4*x*2*x^2-x^11*2*x*2*x^2+x^11*2*x*2*x^2),0,(x^10*3*x-x^9*4*x-x^10*3*x+x^9*4*x-x^11*2*x+x^11*2*x)/(x^7*3*x*5*x^5-x^7*4*x*4*x^4-x^8*2*x*5*x^5+x^8*4*x*3*x^3-x^9*3*x*3*x^3+x^9*3*x*3*x^3+x^8*2*x*5*x^5-x^8*4*x*3*x^3-x^7*3*x*5*x^5+x^7*4*x*4*x^4-x^19*4*x^4+x^19*4*x^4+x^18*5*x^5-x^9*4*x*2*x^2-x^18*5*x^5+x^9*4*x*2*x^2-x^11*2*x*2*x^2+x^11*2*x*2*x^2)},{(x^5*4*x*4*x^4-x^5*3*x*5*x^5-x^17*4*x^4+x^16*5*x^5-x^7*4*x*2*x^2+x^8*3*x*2*x^2)/(x^7*3*x*5*x^5-x^7*4*x*4*x^4-x^8*2*x*5*x^5+x^8*4*x*3*x^3-x^9*3*x*3*x^3+x^9*3*x*3*x^3+x^8*2*x*5*x^5-x^8*4*x*3*x^3-x^7*3*x*5*x^5+x^7*4*x*4*x^4-x^19*4*x^4+x^19*4*x^4+x^18*5*x^5-x^9*4*x*2*x^2-x^18*5*x^5+x^9*4*x*2*x^2-x^11*2*x*2*x^2+x^11*2*x*2*x^2),(3*x^2*5*x^5-4*x^2*4*x^4+x^13*4*x^4-x^4*3*x*2*x^2-x^12*5*x^5+x^3*4*x*2*x^2)/(x^7*3*x*5*x^5-x^7*4*x*4*x^4-x^8*2*x*5*x^5+x^8*4*x*3*x^3-x^9*3*x*3*x^3+x^9*3*x*3*x^3+x^8*2*x*5*x^5-x^8*4*x*3*x^3-x^7*3*x*5*x^5+x^7*4*x*4*x^4-x^19*4*x^4+x^19*4*x^4+x^18*5*x^5-x^9*4*x*2*x^2-x^18*5*x^5+x^9*4*x*2*x^2-x^11*2*x*2*x^2+x^11*2*x*2*x^2),0,(x^8*4*x-x^9*3*x+x^9*3*x-x^8*4*x)/(x^7*3*x*5*x^5-x^7*4*x*4*x^4-x^8*2*x*5*x^5+x^8*4*x*3*x^3-x^9*3*x*3*x^3+x^9*3*x*3*x^3+x^8*2*x*5*x^5-x^8*4*x*3*x^3-x^7*3*x*5*x^5+x^7*4*x*4*x^4-x^19*4*x^4+x^19*4*x^4+x^18*5*x^5-x^9*4*x*2*x^2-x^18*5*x^5+x^9*4*x*2*x^2-x^11*2*x*2*x^2+x^11*2*x*2*x^2)},{(x^5*2*x*5*x^5-x^5*4*x*3*x^3+x^17*3*x^3-x^15*5*x^5+x^6*4*x*2*x^2-x^8*2*x*2*x^2)/(x^7*3*x*5*x^5-x^7*4*x*4*x^4-x^8*2*x*5*x^5+x^8*4*x*3*x^3-x^9*3*x*3*x^3+x^9*3*x*3*x^3+x^8*2*x*5*x^5-x^8*4*x*3*x^3-x^7*3*x*5*x^5+x^7*4*x*4*x^4-x^19*4*x^4+x^19*4*x^4+x^18*5*x^5-x^9*4*x*2*x^2-x^18*5*x^5+x^9*4*x*2*x^2-x^11*2*x*2*x^2+x^11*2*x*2*x^2),(4*x^2*3*x^3-2*x^2*5*x^5-x^13*3*x^3+x^11*5*x^5-x^2*4*x*2*x^2+x^4*2*x*2*x^2)/(x^7*3*x*5*x^5-x^7*4*x*4*x^4-x^8*2*x*5*x^5+x^8*4*x*3*x^3-x^9*3*x*3*x^3+x^9*3*x*3*x^3+x^8*2*x*5*x^5-x^8*4*x*3*x^3-x^7*3*x*5*x^5+x^7*4*x*4*x^4-x^19*4*x^4+x^19*4*x^4+x^18*5*x^5-x^9*4*x*2*x^2-x^18*5*x^5+x^9*4*x*2*x^2-x^11*2*x*2*x^2+x^11*2*x*2*x^2),(x^7*5*x^5-x^9*3*x^3+x^9*3*x^3-x^7*5*x^5)/(x^7*3*x*5*x^5-x^7*4*x*4*x^4-x^8*2*x*5*x^5+x^8*4*x*3*x^3-x^9*3*x*3*x^3+x^9*3*x*3*x^3+x^8*2*x*5*x^5-x^8*4*x*3*x^3-x^7*3*x*5*x^5+x^7*4*x*4*x^4-x^19*4*x^4+x^19*4*x^4+x^18*5*x^5-x^9*4*x*2*x^2-x^18*5*x^5+x^9*4*x*2*x^2-x^11*2*x*2*x^2+x^11*2*x*2*x^2),(x^9*2*x-x^7*4*x-x^9*2*x+x^7*4*x-x^19+x^19)/(x^7*3*x*5*x^5-x^7*4*x*4*x^4-x^8*2*x*5*x^5+x^8*4*x*3*x^3-x^9*3*x*3*x^3+x^9*3*x*3*x^3+x^8*2*x*5*x^5-x^8*4*x*3*x^3-x^7*3*x*5*x^5+x^7*4*x*4*x^4-x^19*4*x^4+x^19*4*x^4+x^18*5*x^5-x^9*4*x*2*x^2-x^18*5*x^5+x^9*4*x*2*x^2-x^11*2*x*2*x^2+x^11*2*x*2*x^2)},{(x^5*3*x*3*x^3-x^5*2*x*4*x^4-x^16*3*x^3+x^15*4*x^4-x^6*3*x*2*x^2+x^7*2*x*2*x^2)/(x^7*3*x*5*x^5-x^7*4*x*4*x^4-x^8*2*x*5*x^5+x^8*4*x*3*x^3-x^9*3*x*3*x^3+x^9*3*x*3*x^3+x^8*2*x*5*x^5-x^8*4*x*3*x^3-x^7*3*x*5*x^5+x^7*4*x*4*x^4-x^19*4*x^4+x^19*4*x^4+x^18*5*x^5-x^9*4*x*2*x^2-x^18*5*x^5+x^9*4*x*2*x^2-x^11*2*x*2*x^2+x^11*2*x*2*x^2),(2*x^2*4*x^4-3*x^2*3*x^3+x^12*3*x^3-x^11*4*x^4+x^2*3*x*2*x^2-x^3*2*x*2*x^2)/(x^7*3*x*5*x^5-x^7*4*x*4*x^4-x^8*2*x*5*x^5+x^8*4*x*3*x^3-x^9*3*x*3*x^3+x^9*3*x*3*x^3+x^8*2*x*5*x^5-x^8*4*x*3*x^3-x^7*3*x*5*x^5+x^7*4*x*4*x^4-x^19*4*x^4+x^19*4*x^4+x^18*5*x^5-x^9*4*x*2*x^2-x^18*5*x^5+x^9*4*x*2*x^2-x^11*2*x*2*x^2+x^11*2*x*2*x^2),(x^8*3*x^3-x^7*4*x^4-x^8*3*x^3+x^7*4*x^4-x^9*2*x^2+x^9*2*x^2)/(x^7*3*x*5*x^5-x^7*4*x*4*x^4-x^8*2*x*5*x^5+x^8*4*x*3*x^3-x^9*3*x*3*x^3+x^9*3*x*3*x^3+x^8*2*x*5*x^5-x^8*4*x*3*x^3-x^7*3*x*5*x^5+x^7*4*x*4*x^4-x^19*4*x^4+x^19*4*x^4+x^18*5*x^5-x^9*4*x*2*x^2-x^18*5*x^5+x^9*4*x*2*x^2-x^11*2*x*2*x^2+x^11*2*x*2*x^2),(x^7*3*x-x^8*2*x+x^8*2*x-x^7*3*x)/(x^7*3*x*5*x^5-x^7*4*x*4*x^4-x^8*2*x*5*x^5+x^8*4*x*3*x^3-x^9*3*x*3*x^3+x^9*3*x*3*x^3+x^8*2*x*5*x^5-x^8*4*x*3*x^3-x^7*3*x*5*x^5+x^7*4*x*4*x^4-x^19*4*x^4+x^19*4*x^4+x^18*5*x^5-x^9*4*x*2*x^2-x^18*5*x^5+x^9*4*x*2*x^2-x^11*2*x*2*x^2+x^11*2*x*2*x^2)}}; 
```

# html - DIV:hover 改变另一个 DIV 的属性

> ID：14539482
> 
> 赞同：0
> 
> 时间：2013-01-26T17:22:21.220
> 
> 标签：html, css

我试图改变一个`div`从另一个`div`悬停的属性。两个 div 都有自己的唯一 ID，我想知道这是否可能。

这是 jsfiddle 链接：http: [//jsfiddle.net/Ngx5D/](http://jsfiddle.net/Ngx5D/)

这是示例代码：

```
body {
    background-color:lightgrey;
}

#div_one, #div_two{
    background-color:darkred;
    display:block;
    width:300px;
    text-align:center;
    padding:30px;
    margin:10px;
    color:white;
    -webkit-transition: 0.3s ease;
    -moz-transition: 0.3s ease;
    -ms-transition: 0.3s ease;
    -o-transition: 0.3s ease;
    transition: 0.3s ease;  
}

#div_one:hover {
    background-color:red;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T17:24:21.840

像这样写：

```
#div_one:hover + #div_two{
    background-color:red;
} 
```

检查这个[http://jsfiddle.net/Ngx5D/1/](http://jsfiddle.net/Ngx5D/1/)

# java - Java (Regex) - 获取一个句子中的所有单词

> ID：14539484
> 
> 赞同：6
> 
> 时间：2013-01-26T17:22:33.357
> 
> 标签：java, regex, string, split

我需要将一个 java 字符串拆分为一个单词数组。假设字符串是：

```
"Hi!! I need to split this string, into a serie's of words?!" 
```

目前我正在尝试使用它`String[] strs = str.split("(?!\\w)")`，但是它保留了诸如！在数组中，它还保留诸如“Hi！”之类的字符串。在数组中也是如此。我要拆分的字符串总是小写的。我想要的是生成一个如下所示的数组： `{"hi", "i", "need", "to", "split", "this", "string", "into", "a", "serie's", "of", "words"}`- 请注意保留撇号。

如何更改我的正则表达式以不包含数组中的符号？

抱歉，我会将一个单词定义为仅由字母数字字符组成的序列，但如果它在上述上下文中，例如“it's”，则包含 ' 字符，而不是用于引用诸如“'its'”之类的单词. 此外，在这种情况下，“hi”或“hi-person”不是单词，但“hi”和“person”是。我希望能澄清这个问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-26T17:40:49.817

您可以删除所有`?!`符号，然后拆分为单词

```
str = str.replaceAll("[!?,]", "");
String[] words = str.split("\\s+"); 
```

结果：

`Hi, I, need, to, split, this, string, into, a, serie's, of, words`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-26T18:45:13.660

Should work for what you want.

```
String line = "Hi!! I need to split this string, into a serie's of words?! but not '' or ''' word";
String regex = "([^a-zA-Z']+)'*\\1*";
String[] split = line.split(regex);
System.out.println(Arrays.asList(split)); 
```

Gives

```
[Hi, I, need, to, split, this, string, into, a, serie's, of, words, but, not, or, word] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-26T17:27:38.347

如果将单词定义为非空白字符序列（由 定义的空白字符`\s`），则可以沿空格字符拆分：

```
str.split("\\s+") 
```

请注意`";.';.@#$>?>@4"`，`"very,bad,punctuation"`, 和`"'goodbye'"`是上述定义下的词。

然后另一种方法是将单词定义为来自一组允许字符的字符序列。如果您想允许`a-z`, `A-Z`, 和`'`作为单词的一部分，您可以拆分其他所有内容：

```
str.split("[^a-zA-Z']+") 
```

不过，这仍然允许`"''''''"`被定义为一个词。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-26T17:33:39.847

所以你想要的是拆分任何不是单词字符 [a-zA-Z] 并且不是 ' 这个正则表达式会这样做 "[^a-zA-Z'] *\s* " 如果该字符串包含在 ' 中引用的引号

我通常使用这个页面来测试我的正则表达式' [http://www.regexplanet.com/advanced/java/index.html](http://www.regexplanet.com/advanced/java/index.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-26T17:30:48.220

您可以过滤掉您认为是“非单词”字符的字符：

```
String[] strs = str.split("[,!? ]+"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-26T17:33:06.270

我会用`str.split("[\\s,?!]+")`. 您可以在括号内添加要拆分的任何字符`[]`。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-26T17:36:18.950

```
myString.replaceAll("[^a-zA-Z'\\s]","").toLowerCase().split("\\s+"); 
```

`replaceAll("[^a-zA-Z'\\s]","")`方法用空（ ）替换所有不是`a-z`或`A-Z`或`'`或a的字符，然后方法使从方法返回的所有字符小写。最后，我们根据空白字符来处理字符串。更具可读性；`whitespace``""``toLowerCase``replaceAll``split`

```
myString = myString.replaceAll("[^a-zA-Z'\\s]","");
myString = myString.toLowerCase();
String[] strArr = myString.split("\\s+"); 
```

# android - 如何通过与会者电子邮件过滤日历事件

> ID：14539486
> 
> 赞同：2
> 
> 时间：2013-01-26T17:22:45.597
> 
> 标签：android, filter, android-calendar

我的目标是从我的日历中取出所有日历事件，并由我正在寻找的与会者过滤它。换句话说，我希望 Mayer 先生参加的所有活动我已经解决了这个问题以获取我的活动。我的光标中有它们 curCalendar 但是如何通过与会者电子邮件过滤 curCalendar？我正在考虑创建一个包含所有事件 ID 的数组，或者我是否可以删除光标 curCalendar 的行。嗯，我需要帮助。如何通过特殊的与会者电子邮件过滤我的 curCalendar...

if(!strEmailFilter.isEmpty()){

```
 //there is an Email Filter - look for a special Attendee within all Events...
            curCalendar.moveToFirst();
            index = curCalendar.getColumnIndex(CalendarContract.Events._ID);
            strEventId = curCalendar.getString(index);
            strEmail = openCalendar.getEmailfromAttendee(this, strEventId);
            Integer i= 0;
            if (strEmail.equals(strEmailFilter)){
                //Attendee email is equal to filter email
                //Add row to CurCalendarGefiltert
                strEventsGefiltert [i] = strEventId;

            }
            while (curCalendar.moveToNext()) {
                i = i +1;
                index = curCalendar.getColumnIndex(CalendarContract.Events._ID);
                strEventId = curCalendar.getString(index);
                strEmail = openCalendar.getEmailfromAttendee(this, strEventId);
                if (strEmail.equals(strEmailFilter)){
                    strEventsGefiltert [i] = strEventId;
                //  curCalendarGefiltert.

                }
            }

        }

                 MyCalendarAdapter myCalendaradapter = new MyCalendarAdapter (
                          this,
                          R.layout.terminzeile_google,
                          curCalendar,
                          new String[] {CalendarContract.Events.TITLE, CalendarContract.Events.DESCRIPTION},
                          new int[] {R.id.textViewTitle, R.id.textViewProjekt}

                          );

        /*
        myClientsadapter.setViewBinder(new MyDataAdapter.ViewBinder() {
            public boolean setViewValue(View view, Cursor cursor, int columnIndex) {

                if(columnIndex == 13) {
                        String strBeginn = cursor.getString(columnIndex);
                        CheckBox cb = (CheckBox) view;
                        int intbezahlt = cursor.getInt(13);
                        cb.setChecked(intbezahlt > 0);
                        return true;
                }

                String str = cursor.getString(columnIndex);
                return false;
            }
        });

        */
        listViewTermine.setAdapter(myCalendaradapter); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T01:46:50.080

根据找到的每个事件的 eventId，使用内容 URI“CalendarContract.Attendees.CONTENT_URI”搜索参加者表。只需在找到匹配项时捕获事件的值。

因此，简而言之，您需要编写一个与您编写的方法类似的方法来通过 CalendarContract 读取事件。

查看此链接以获取有关如何访问与会者表的更多详细信息： [https ://android-dot-google-developers.appspot.com/reference/android/provider/CalendarContract.Attendees.html](https://android-dot-google-developers.appspot.com/reference/android/provider/CalendarContract.Attendees.html)

# php - 教义2数组集合计数（）php

> ID：14539490
> 
> 赞同：0
> 
> 时间：2013-01-26T17:23:06.783
> 
> 标签：php, doctrine, doctrine-orm, arraycollection

我有以下代码：

```
 $countries = $em->getRepository("country")->findAll();
        $array = array();
        $count = 0;
        foreach($countries as $country){
            if(is_object($country)){
                if($country->getCompaniesCount() > 0)
                $array[$count] = $country;
                $count++;
            }
        } 
```

调用的“getCompaniesCount”函数如下所示：

```
 public function getCompaniesCount(){
        return $this->_comapanies->count();
    } 
```

但它会产生一个我无法理解的错误。

“country”中有国家，有与国家相关的“公司”。所以国家和公司是多对多关系。并且“country”中的属性“_companies”被初始化为 ArrayCollection 来保存公司。

但是每次我运行此代码时，都会出现以下错误：

```
Catchable fatal error: 
Argument 1 passed to   Doctrine\ORM\Mapping\DefaultQuoteStrategy::getJoinTableName() must be an array, null given, 
called in /usr/share/pear/Doctrine/ORM/Persisters/BasicEntityPersister.php on line 965 
and defined in /usr/share/pear/Doctrine/ORM/Mapping/DefaultQuoteStrategy.php on line 86 
```

有谁知道为什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T17:27:15.757

哦不。我觉得很愚蠢。只是一个错误的外键名-.-。

解决了。

# opencv - 将 Mat 对象的类型从 CV_32F 更改为 CV_8U

> ID：14539498
> 
> 赞同：37
> 
> 时间：2013-01-26T17:23:50.403
> 
> 标签：opencv, floating-point, mat

我尝试使用 imshow 函数显示 CV_32F 类型的图像，但它显示了一个**WHITE 图像**。在[文档](http://docs.opencv.org/modules/highgui/doc/user_interface.html)中，考虑到浮点图像将被映射到 0-255 并显示，但它只显示一个白色图像。我尝试使用将其转换为 CV_8U

> 垫A=垫::ones(300,300,CV_32FC1)*1000;
> 
> 做一些处理 - 将浮点值分配给 A 中的像素
> 
> ……
> 
> 垫B；
> 
> A.convertTo(B,CV_8U)

当我显示“B”时，我得到一张黑白图像，**没有灰色阴影**。A 中的浮点值像素是否正确映射到 0-255 ？我做错什么了吗？

A 中很少有值在初始化时是 1000，其余的是在处理过程中分配的一些浮点数。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-01-26T17:39:52.147

在 OpenCV 中，如果图像是浮点类型，则只有那些像素可以使用 可视化`imshow`，其值从 0.0 到 1.0，如果值大于 1.0，则显示为白色像素，如果小于 0.0 ，它将显示为黑色像素。要可视化浮点图像，请将其值缩放到 range `0.0 - 1.0`。

至于转换部分......当与默认参数一起使用时，该`cv::Mat::convertTo`函数只是创建一个指定类型的矩阵，然后从源矩阵复制值，然后将它们四舍五入到目标数据类型的最接近的可能值。如果该值超出范围，则将其限制为最小值或最大值。

在 的文档中`imshow`写道：

> 如果图像是 32 位浮点，则像素值乘以 255。即取值范围 [0,1] 映射到 [0,255]。

这意味着只有 0.0 到 1.0 范围内的值会被映射到 0 到 255。如果一个值大于 1.0，再乘以 255，它将变得大于 255。然后它将被钳制在`CV_8U`和最终它也会变成255。

在您的示例中，所有 1000 的值将在目标矩阵中变为 255，因为目标类型是`CV_8U`，最大可能值为 255。所有浮点值都将被`floor`编辑。没有进行自动映射。

为了将值适当地映射到函数`CV_8U`的第三个和第四个参数的使用范围`cv::Mat::convertTo`，以便在转换完成之前对值进行缩放。

假设矩阵`A`具有最小值和最大值`Min`，并且`Max`，其中`Min!=Max`。

要正确地将值从 0 缩放到 255，您可以执行以下操作：

```
if (Min!=Max){ 
    A -= Min;
    A.convertTo(B,CV_8U,255.0/(Max-Min));
} 
```

您也可以像这样直接执行此操作：

```
if (Min!=Max)
    A.convertTo(B,CV_8U,255.0/(Max-Min),-255.0*Min/(Max-Min)); 
```

（编辑考虑到zhangxaochen的评论）

# java - 如何计算算法的加密和解密运行时间

> ID：14539501
> 
> 赞同：0
> 
> 时间：2013-01-26T17:24:00.093
> 
> 标签：java, rsa

我正在尝试使用 Java 中的以下两个函数来实现 RSA 算法：

```
time_one = 0    
private void encrypt()    
{   
    M = new BigInteger(64,random);   
    C = M.modPow(e,N);  
}  
time_encrypt = time_now-time_one  

time_two = 0   
private void decrypt()   
{   
    Mp = C.modPow(dp, p);   
    Mq = C.modPow(dq, q);   
    MM =    Mp.multiply(q).multiply(q.modInverse(p))).add(Mq.multiply(p).multiply(p.modInverse(q)))).mod(N);  
}  
time_decrypt = time_now-time_two 
```

如何确定`encrypt()`数据大小为 1kb 和 2kb 到 10kb 所需的时间？如何表示不同大小的数据？

计算运行时间的方法是否可以比较`encrypt()`和的速度运行时间`decrypt()`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T17:51:20.800

一旦 JIT 启动，您将看到截然不同的结果。通常，您应该做的是通过使用加密/解密大约 10 万次而不计量它们来启动 JVM。这将允许 JIT 启动并将必要的部分编译为本机代码之后，您可以通过 System.nanoTime() 以纳秒为单位开始基准测试。使用这种方法至少可以让您对代码的性能有所了解。但是，我强烈建议您阅读以下演示文稿：[http ://www.azulsystems.com/presentations/art-of-java-benchmarking](http://www.azulsystems.com/presentations/art-of-java-benchmarking)

并且还关注一些博客，其中知道自己在做什么的人执行微基准测试。其中一些是例如：

[http://mechanical-sympathy.blogspot.co.uk/2011/09/adventures-with-atomiclong.html](http://mechanical-sympathy.blogspot.co.uk/2011/09/adventures-with-atomiclong.html) 或[http://mentablog.soliveirajr.com/?s=benchmark](http://mentablog.soliveirajr.com/?s=benchmark)

PS。为什么需要自己实现 RSA？一般来说，密码学的指导原则是——“除非你像 Bruce Schenier 或世界著名的密码学家一样优秀，否则不要尝试发明新的密码算法，否则它们很可能是不安全的”。如果是出于学习目的，那么一定要去做。

# javascript - 根据鼠标的位置更改图像位置我怎样才能让它在ie中工作？

> ID：14539503
> 
> 赞同：1
> 
> 时间：2013-01-26T17:24:09.473
> 
> 标签：javascript, jquery

我想知道是否有人可以解释为什么它不能在 ie 8 或 9 上工作。它在 chrome 和 firefox 上工作得很好。

这是我的代码：

```
var image_src = {

            middle: "background-position: 730px 0px;",
        left: "background-position: 730px 480px;",
        topleft: "background-position: 730px 960px",
        top: "background-position:730px 1440px;",
        topright: "background-position:730px 1920px;",
        right: "background-position: 730px 2400px",
            bottomright: "background-position: 730px 2880px;", 
        bottom: "background-position:730px 3360px;",
        bottomleft: "background-position: 730px 3840px;"

    };

    var Hsection = $(document).width() / 3;
    var Vsection = $(document).height() / 3;

    console.log(Hsection);
    console.log(Vsection);

    $(document).mousemove(function(event){
            var mloc = {
                x: event.pageX,
                y: event.pageY
            };

            // TOP ROW
            if( 
                (mloc.x < Hsection) &&
                (mloc.y < Vsection)
            ){
                $(".tryme").attr("style", image_src.topleft);
            }else if( 
                (mloc.x > Hsection && mloc.x < Hsection * 2) &&
                (mloc.y < Vsection)
            ){
                $(".tryme").attr("style", image_src.top);
            }else if( 
                (mloc.x > Hsection * 2 && mloc.x < Hsection * 3) &&
                (mloc.y < Vsection)
            ){
                $(".tryme").attr("style", image_src.topright);
            }

            // MIDDLE ROW
            else if( 
                (mloc.x < Hsection) &&
                (mloc.y > Vsection && mloc.y < Vsection * 2)
            ){
                $(".tryme").attr("style", image_src.left);
            }else if( 
                (mloc.x > Hsection && mloc.x < Hsection * 2) &&
                (mloc.y > Vsection && mloc.y < Vsection * 2)
            ){
                $(".tryme").attr("style", image_src.middle);
            }else if( 
                (mloc.x > Hsection * 2 && mloc.x < Hsection * 3) &&
                (mloc.y > Vsection && mloc.y < Vsection * 2)
            ){
                $(".tryme").attr("style", image_src.right);
            }

            // BOTTOM ROW
            else if( 
                (mloc.x < Hsection) &&
                (mloc.y > Vsection * 2 && mloc.y < Vsection * 3)
            ){
                $(".tryme").attr("style", image_src.bottomleft);
            }else if( 
                (mloc.x > Hsection && mloc.x < Hsection * 2) &&
                (mloc.y > Vsection * 2 && mloc.y < Vsection * 3)
            ){
                $(".tryme").attr("style", image_src.bottom);
            }else if( 
                (mloc.x > Hsection * 2 && mloc.x < Hsection * 3) &&
                (mloc.y > Vsection * 2 && mloc.y < Vsection * 3)
            ){
                $(".tryme").attr("style", image_src.bottomright);
            }

    }); 
```

这是此代码的[演示](http://jsfiddle.net/gkgHk/5/)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T17:34:15.143

Internet Explorer 与 console.log() 不兼容...

```
if (typeof (console) !== "undefined"){
console.log(Hsection);
console.log(Vsection);
} 
```

[http://jsfiddle.net/gkgHk/6/](http://jsfiddle.net/gkgHk/6/)

# php - 使用 PHP 正确验证电子邮件地址

> ID：14539506
> 
> 赞同：-2
> 
> 时间：2013-01-26T17:24:27.750
> 
> 标签：php, validation, email

我正在尝试编写一个执行以下操作的脚本：将用户消息打印到屏幕并将其通过电子邮件发送给他们。

这是我的代码 出于某种原因，当它是有效的电子邮件地址时，它告诉我我的电子邮件地址无效，有什么建议吗？我错过了什么？:-\

```
<?php
  if(strtolower($_SERVER['REQUEST_METHOD']) == 'post');

  $errors = null;
  $success = true;

  function checkEmail($email){
      return filter_var($email, FILTER_VALIDATE_EMAIL);
}

 if($_POST){
$errors = array();
$to = $_POST['email'];
$subject = 'Your Comment';
$message = $_POST['message'];
$headers = 'From: blahblah69@gmail.com' . "\r\n" . 'Reply-To:
     mitides.constantin@gmail.com' . "\r\n" .
            'X-Mailer: PHP/' .phpversion();

if(!$to || !$message){
    $errors[] ="Please fill in both a email and a message.";
} else if(!checkEmail($to) && $_POST['message'] = filter_var($_POST['message'],
   FILTER_SANITIZE_STRING));{
    $errors[]= print ('You did not enter a valid email, please try again.');
 }
 if($errors || !$_POST){

    if($errors){
        foreach($errors as $error){
            echo $error. "<br />";
        }
    }
}
if(!$errors && $success){
    mail($to, $subject, $message, $headers) && print($_POST['message']);

  } ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T18:24:25.243

首先将 else if 部分放在这样的括号中 ($_POST['message'] = filter_var($_POST['message'],FILTER_SANITIZE_STRING))

# operating-system - Cassandra 节点内存使用不平衡

> ID：14539507
> 
> 赞同：0
> 
> 时间：2013-01-26T17:24:29.627
> 
> 标签：operating-system, cassandra

我在 centos 上使用 Cassandra 1.2 和新的 MurMur3Partitioner。

在一个 2 节点集群上都设置了`num_tokens=256`

在使用 CQL3 插入几百万行后，我看到一个节点使用的内存比另一个节点多得多。

当我运行`free`命令时，它在第二个节点上显示 6GB 使用量，在种子节点上显示 1GB。

但是，运行时

`ps -e -o pid,vsz,comm= | sort -n -k 2`

它显示了在每个节点上使用大约 6.8GB 的​​ java 进程。

请注意，我有 MAX_HEAP_SIZE="4GB" HEAP_NEWSIZE="400M"

在`cassandra-env.sh`每个节点上设置。

谁能提供一些见解？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T14:34:40.973

这很可能与在 Linux 中报告准确内存利用率的一般困难有关，尤其是与 Java 进程有关时。由于 Java 进程会自动保留和分配内存，因此操作系统看到的内容可能会产生误导。了解 Java 进程在做什么的最好方法是使用 JMX 来监控堆利用率。VisualVM 和 jconsole 等工具可以很好地解决这个问题。

# macos - 如何在 OSX 上的 ipython 中设置默认文件路径

> ID：14539509
> 
> 赞同：1
> 
> 时间：2013-01-26T17:24:41.027
> 
> 标签：macos, configuration, ipython, ipython-notebook

我刚刚开始尝试为课程作业学习 Python。我们的老师要求使用 iPython 笔记本，所以我在我的 Mac 上安装了 Enthought Python 和 ipython。

iPython 主目录是 /users/me/.ipython

我已经使用 ipython profile create 命令来创建文件

.ipython/profile_default/ipython_config.py

但我不知道如何访问此文件或放入其中的内容。我的目标是将默认文件路径设置为：

/users/me/documents/classes/analytics/hw1

这样我的 ipython 笔记本中的代码就会自动知道在哪里查找数据文件。

请帮忙！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T13:08:11.157

您可以更改笔记本文件的默认路径。搜索`ipython_notebook_config.py`设置`notebook_dir`。

访问文件的默认文件夹是您的笔记本所在的文件夹。如果您需要更改它，请在笔记本的开头添加如下命令：

```
%cd /users/me/documents/classes/analytics/hw1 
```

# ffmpeg - 使用ffmpeg从mp4文件中解复用音频（AMR_WB）和视频（H264）

> ID：14539510
> 
> 赞同：0
> 
> 时间：2013-01-26T17:24:45.570
> 
> 标签：ffmpeg, h.264

我想从 mp4 文件中解复用音频（AMR_WB）和视频（H264）。我需要编写一个使用 ffmpeg 库执行此操作的程序。

在`demuxing.c`FFMPEG 示例中的文件中，我只能获得原始格式作为输出。

我可以以某种方式修改该代码以从 mp4 文件中获取编码格式的 H264 和 AMR_WB 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T18:51:08.053

运行 ffmpeg 两次，每次指定只有 1 个轨道被复制到输出。

diff mp4 上的示例将提供您需要为容器中的相应视频/音频适应您的特定轨道类型的大部分想法......

MP4 示例：解复用 h264 和 aac 轨道以分离输出（tout1，tout2）

输入是什么？

```
Input #0, mov,mp4,m4a,3gp,3g2,mj2, from 'phoneCam_20120902_112701.mp4':
  Metadata:
    major_brand     : isom
    minor_version   : 0
    compatible_brands: isom3gp4
    creation_time   : 2012-09-02 18:27:14
  Duration: 00:00:12.65, start: 0.000000, bitrate: 8011 kb/s
    Stream #0:0(eng): Video: h264 (Baseline) (avc1 / 0x31637661), yuv420p, 1280x720, 7707 kb/s, SAR 65536:65536 DAR 16:9, 28.64 fps, 29.83 tbr, 90k tbn, 180k tbc
    Metadata:
      creation_time   : 2012-09-02 18:27:14
      handler_name    : VideoHandle
    Stream #0:1(eng): Audio: aac (mp4a / 0x6134706D), 48000 Hz, mono, s16, 96 kb/s 
```

通过 1，只需获取 Vid

> ffmpeg -i phoneCam_20120902_112701.mp4 -map 0:0 -c 复制 tout1.mp4

Pass2 只需获取 aud

> ffmpeg -i phoneCam_20120902_112701.mp4 -map 0:1 -c aac -ar 48000 -ab 48000 -strict -2 tout2.3gp

在您的程序中，只需从 CLI 运行 ffmpeg 或在 ffmpeg.c 中调用 main()

# php - 如何在单独的窗口中打开图像？

> ID：14539511
> 
> 赞同：0
> 
> 时间：2013-01-26T17:24:50.837
> 
> 标签：php, jquery, html, ajax, mysqli

我在下面有一个表格，其中列出了每个问题的每个图像。

```
 <table id="tableqanda" cellpadding="0" cellspacing="0">
        <thead>
        <tr>
            <th width="5%" class="questionno">Question No.</th>
            <th width="11%" class="image">Image</th>
        </tr>
        </thead>
        </table>
        <div id="tableqanda_onthefly_container">
        <table id="tableqanda_onthefly" cellpadding="0" cellspacing="0">
        <tbody>
            <?php
              foreach ($arrQuestionId as $key=>$question) {
            echo '<tr class="tableqandarow">'.PHP_EOL
echo '<td width="5%" class="questionno">'.htmlspecialchars($arrQuestionNo[$key]).'</td>' . PHP_EOL;
            echo '<td width="11%" class="imagetd">';
            if (empty($arrImageFile[$key])) {
                echo '&nbsp;';
            } else {
                echo '<ul class="qandaul"><li>';
                echo implode("</li>\n<li>", array_map(function($imgitem){
                return htmlspecialchars($imgitem);
            },  $arrImageFile[$key]));
                echo '</li></ul>';
            }
            echo '</td>';
            echo '</tr>'.PHP_EOL;
            }
    ?>
        </tbody>
        </table>
        </div> 
```

现在它只是在项目符号列表中列出图像文件名。但我想做的是我想将每个文件设置为超链接，这样如果用户单击图像链接，它将在单独的页面中显示该图像（将打开一个单独的窗口）显示图像本身

我的问题是如何做到这一点，我需要执行以下哪些步骤？如果有人可以告诉我如何逐步编码，那么我也可以将它用于音频和视频。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T18:14:55.097

Okay, I've been thinking about what you want to do and I think you want to show a list of images as thumbnails or something, and then click an image and show it (within your layout) on a new page (previewimage.php).

You have a lot of options... but they all boil down to passing some information through the URL (example.com/previewimage.php).

First, let's examine 2 typical ways to pass information through an URL

**$_GET Request**

Sometimes you'll see a website pass add information to a URL, like

```
example.com/previewimage.php?var=xxx 
```

This allows you to pass some information to your PHP script via the $_GET superglobal.

**Htaccess**

If you want to get kind of fancy, you can use htaccess to make a clean URL

```
RewriteRule ^([a-zA-Z0-9]+)/$ previewimage.php?var=$1 
```

This will let you have an URL like example.com/xxx and the server will act like you went to example.com/previewimage.php?var=xxx.

Now that you know how to hand information off to the url, we can look into some methods for using the $_GET['var'] to show the image.

The easiest approach is to simply pass the name of the file... for this example let's call it example.png.

If you're using the basic $_GET Request method above, you would have an URL like example.com/previewimage.php?var=example.png.

Then, in previewimage.php, you simply do something like

```
<img src="<?php echo $_GET['var'] ?>"/> 
```

This will output

```
<img src="example.png"/> 
```

However, this is not a very safe method, as anyone can load anything they want. A better option might be using an array or a database, and then passing a key of some sort and retrieving the filename.

I think this will set you on the right path (and I hope it answers your question).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T17:32:54.220

假设这个问题是如何在新选项卡中打开链接。用这个包围你喜欢的任何东西，在这种情况下是图像。

```
<a href="/linktoimage.png" target="_blank"><img src="/linktoimage.png" alt="my image"></a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T17:54:39.320

这是如何做到这一点的示例。刚刚对内部“If else”循环进行了编辑

将 YOUR_BASE_URL_FOR_IMAGES_HERE_ENDING_WITH_A_DASH 替换为服务器上图像的目录路径。

```
if (empty($arrImageFile[$key])) {
    echo '&nbsp;';
} else {
    echo '<ul class="qandaul"><li>';
    echo implode("</li>\n<li>", array_map(function($imgitem) {
                        return '<a href="YOUR_BASE_URL_FOR_IMAGES_HERE_ENDING_WITH_A_DASH' . htmlspecialchars($imgitem) . '" target="_blank">' . htmlspecialchars($imgitem) . '</a>';
                    }, $arrImageFile[$key]));
    echo '</li></ul>';
} 
```

# python - 动态实例化不同的python类

> ID：14539512
> 
> 赞同：0
> 
> 时间：2013-01-26T17:24:57.030
> 
> 标签：python, class, instantiation

假设我有两个不同的类，它们的参数数量不同：

```
class A(object):
    def __init__(self, arg1, arg2, arg3)
    ...

class B (object):
    def __init__(self, arg1, arg2)
    .... 
```

考虑到参数的数量不同，有没有办法动态实例化这些类？

我会在这里给你更大的图景。我创建了一个 XML 解析器，它成功解析了 XML 文档中的所有信息，并将它们缓存到一个列表中，基于标签名称（`<room>`将进入 self.room，`<item>`将进入 self.item 等......）

我不知道这是否真的是做事的方式，但我想做的是从他们尊重的列表中的每个单独的 XML 元素中获取所有信息，从该信息创建 Python 对象，然后将它们存储到字典。

```
# From XMLParser class
def objectify(self, iterator):
    dict = {}
    # I used elementtree to parse XML documents, 2nd argument of getattr
    # ends up being a capitalized string of iterator's tag name.
    # Ex, <room> becomes 'Room'
    Object = getattr(sys.modules[__name__], iterator.tag.capitalize())
    for element in iterator:
        dict[element.attrib['id']] = Object(...) 
```

那么如何在动态实例化上面列出的不同类时输入不同数量的参数呢？

我是否在正确的轨道附近？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T17:31:21.710

这应该很容易：

```
klass = A
args = (a, b, c)
obj = klass(*args) 
```

您可以将所有这些放入工厂函数或类中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T17:29:36.750

我想`*args`是你的朋友在这里。它表示一个参数列表，因此可以处理两个类的创建。

# android - android 小部件未显示在小部件列表中 - jellybean

> ID：14539516
> 
> 赞同：2
> 
> 时间：2013-01-26T17:25:18.470
> 
> 标签：android, android-widget

我正在使用 android 应用程序中的主屏幕小部件。当我在 nexus 10 平板电脑中安装它时，小部件未显示在小部件列表中，并且我在 logcat 中收到以下错误。

```
AppsCustomizedPagedView   “Widget ComponentInfo(com.abc.yyy/com.abc.yyy.widgetProvider) cannot fit on this device(1400, 1200)” 
```

它仅在 nexus 10 上发生。在三星和摩托罗拉等其他平板电脑中（两者都有 ics）工作正常

我们尝试了以下方法来获取小部件列表中的小部件

1.  检查它是否安装在平板电脑的内存或SD卡中。它存在于平板电脑的内存中。

2.  创建了一个启动器活动。启动器在应用列表中可见，但小部件在小部件列表中不可见。

3.  在 widgetprovider.xml 中添加了 android:widgetCategory="home"

4.  添加了来自 MainActivity 的发送广播，如下面的链接所示

[Android 4.0：小部件没有出现？](https://stackoverflow.com/questions/8794952/android-4-0-widgets-not-appearing/8866791#8866791)

```
sendBroadcast(new Intent(Intent.ACTION_MAIN).addCategory(Intent.CATEGORY_HOME)); 
```

没有任何想法。为什么小部件未显示在小部件列表中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-18T12:12:08.727

为我工作：-

如果应用程序安装在 SD 上，它会以某种方式导致小部件列表出现问题，只需安装在手机存储中并显示其将显示在小部件列表中

# android - Android Logcat Rotation Size 和 Number of Rotation 参数

> ID：14539519
> 
> 赞同：11
> 
> 时间：2013-01-26T17:25:50.700
> 
> 标签：android, logging, android-logcat

嗨安卓开发者！

我试图弄清楚 logcat utilitiy 的 -r 和 -n 参数是什么意思。当我的日志文件大小超过 -r 千字节数时；它会删除我的日志文件的全部内容，使其为空或创建一个新文件以继续记录过程？-n 到底是什么意思，ofc？

提前感谢您的回复，伊尔克

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-02-04T18:29:16.793

![在此处输入图像描述](../Images/8c54efd573b2729aaddfe2ac026590af.png)

[资源](http://developer.android.com/tools/help/logcat.html)

因此，在文件大小达到使用`-r`选项指定的限制后，将创建新文件并将日志重定向到该文件。要创建的此类文件的数量由`-n`选项指定。当达到 n 个计数时，您的第一个文件将被覆盖。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-09T08:42:28.307

**-n**指定旋转日志的最大数量
**-r**指定日志文件应该旋转的大小

有关详细信息，请参阅[http://developer.android.com/tools/debugging/debugging-log.html](http://developer.android.com/tools/debugging/debugging-log.html)。

# php - 提交时用php隐藏表单？

> ID：14539522
> 
> 赞同：2
> 
> 时间：2013-01-26T17:26:56.863
> 
> 标签：php, javascript

我有一个简单的 php - 基于有效表单的密码保护/登录。PHP 代码在页面“secure.php”中，当用户 + 密码正确时包含 html 文件“accessed.html”。

但是我希望在显示隐藏页面（accessed.html）时隐藏表单。我尝试将表单包装在 div 中并使用 javascript 和 display: none 隐藏，但它不起作用 - 不是本地或服务器上的。

我究竟做错了什么？登录后不必是js隐藏表单..

PHP 在顶部

```
 <?php
$user = $_POST['user'];
$pass = $_POST['pass'];

if($user == "a"
&& $pass == "a")
{
        include("accessed.html");
         echo "<script>
                    document.getElementById('wrap').style.display = 'none';
                </script>";
}

if(isset($_POST))
?> 
```

以及正文中的形式：

```
 <div id="wrap">
    <form method="POST" action="secure.php">
        User <input type="text" name="user"></input>
        Pass <input type="text" name="pass"></input>
        <input type="submit" name="submit" value="access page"></input>
    </form>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T17:29:01.773

将`<script>`移到显示 " "的位置*之后*`#wrap`

如果您想在服务器端（PHP）执行此操作，只需使用`if`语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T17:47:54.643

我想这就是你要找的我的朋友

```
<html>
<body>

<div id="wrap">
    <form method="POST" action="temp.php" target = "hidden">
       <input type="text" name="user">User</input>
       <input type="text" name="pass">Pass</input>
        <input type="submit" name="submit" value="access page" onclick = "closediv()"></input>
    </form>
</div>

<iframe name = "hidden" id = "hidden" style = "display: none"></iframe>

<script>

function closediv(){
    document.getElementById("wrap").style.display = "none";
    }

</script>

</body>
</html> 
```

使用上面的代码，您需要在当前页面上进行 PHP 处理。如果这没有按照您的意愿做，并且我误读了您的问题，请告诉我，我们可以解决您的困境。

# php - 在 Wordpress 中提供 REST 服务

> ID：14539524
> 
> 赞同：0
> 
> 时间：2013-01-26T17:27:06.727
> 
> 标签：php, wordpress, restler

我有一个围绕 Wordpress 构建的应用程序。它是相当定制的，但我仍然利用并欣赏 Wordpress 附带的很多东西。现在我要做的是提供一个 RESTful API，它可以脱离 Wordpress 数据库。[我正在使用一个名为Restler](https://github.com/Luracast/Restler)的开源产品，到目前为止我对它非常满意，这使得使用 PHP 提供这项服务非常容易，但我想让这个 PHP 加载 Wordpress 机器，以便我可以利用我已经构建的代码更容易以及方便的 Wordpress 功能。

使用 Restler，您有一个定义接口的 PHP 类文件；我在开头添加了导入以加载 WP 环境：

```
<?php
include "AddWordpress.php"; // loads wordpress in AJAX mode

/**
 * All actions that the system will process through this service.
 *
 * @package lg-api
 * @return  json    LG_JSON_Activity    
*/
class Actions {
    /**
    * LIST action types
    *
    * List all the action-types available
    *
    * @url GET /
    */
    function list_actions() {
        $actions = new LG_TAX_Action();
        $action_list = $actions->dataset();
        return "\n" . json_encode($action_list) . "\n\n";
    }

} 
```

AddWordpress.php 在哪里（为开发环境设置调试）：

```
<?php
error_reporting(E_ALL);
$site_name='yoursite';
$site_domain='www.yoursite.com';

/**
* Construct a fake $_SERVER global to get WordPress to load a specific site.
* This avoids alot of messing about with switch_to_blog() and all its pitfalls.
*/
$_SERVER=array(
'HTTP_HOST'=>$site_domain,
'REQUEST_METHOD'=>'GET',
'REQUEST_URI'=>"/{$site_name}/",
'SERVER_NAME'=>$site_domain,
);

// Remove all our bespoke variables as they'll be in scope as globals and could affect WordPress
unset($site_name,$site_domain);

// Pretend that we're executing an AJAX process. This should help WordPress not load all of the things.
define('DOING_AJAX',true);

// Stop WordPress doing any of its normal output handling.
define('WP_USE_THEMES',false);

// turn on debugging
define('WP_DEBUG', true);
define('WP_DEBUG_LOG', true);

// Load WordPress - intentionally using an absolute URL due to issues with relative paths on the CLI.
include "/[path-to-root-www]/wp-load.php"; 
```

这种方法非常适合在跳转到实际代码并通过浏览器进行测试之前创建命令行测试文件，但由于某种原因，当我使用 Restler 运行它时，我遇到了一系列错误，例如：

```
Notice:  is_404 was called incorrectly. Conditional query tags do not work before the query is run. Before then, they always return false. Please see Debugging in WordPress for more information. (This message was added in version 3.1.) in /[path-to-www-root]/wp-includes/functions.php on line 294
Notice:  is_home was called incorrectly. Conditional query tags do not work before the query is run. Before then, they always return false. Please see Debugging in WordPress for more information. (This message was added in version 3.1.) in /[path-to-www-root]/wp-includes/functions.php on line 2944
Notice:  is_search was called incorrectly. Conditional query tags do not work before the query is run. Before then, they always return false. Please see Debugging in WordPress for more information. (This message was added in version 3.1.) in /[path-to-www-root]/wp-includes/functions.php on line 2944
Notice:  is_archive was called incorrectly. Conditional query tags do not work before the query is run. Before then, they always return false. Please see Debugging in WordPress for more information. (This message was added in version 3.1.) in /[path-to-www-root]/wp-includes/functions.php on line 2944
Notice:  is_404 was called incorrectly. Conditional query tags do not work before the query is run. Before then, they always return false. Please see Debugging in WordPress for more information. (This message was added in version 3.1.) in /[path-to-www-root]/wp-includes/functions.php on line 2944
Notice:  is_tag was called incorrectly. Conditional query tags do not work before the query is run. Before then, they always return false. Please see Debugging in WordPress for more information. (This message was added in version 3.1.) in /[path-to-www-root]/wp-includes/functions.php on line 2944
Notice:  is_search was called incorrectly. Conditional query tags do not work before the query is run. Before then, they always return false. Please see Debugging in WordPress for more information. (This message was added in version 3.1.) in /[path-to-www-root]/wp-includes/functions.php on line 2944
Notice:  is_category was called incorrectly. Conditional query tags do not work before the query is run. Before then, they always return false. Please see Debugging in WordPress for more information. (This message was added in version 3.1.) in /[path-to-www-root]/wp-includes/functions.php on line 2944 
```

如果我只是将以下代码添加到类文件的底部，然后从命令行运行它，它就可以正常工作：

```
 $foo = new Actions();
 echo $foo->list_actions(); 
```

任何人都可以就为什么会发生这种情况给出任何指示吗？

***更新***

我更改了错误处理以给我一个堆栈跟踪并获得以下信息：

```
#0 /[path-to-www-root]/wp-includes/query.php(708): _doing_it_wrong('is_404', 'Conditional que...', '3.1')
#1 /[path-to-www-root]/wp-content/themes/pagelines/includes/library.functions.php(68): is_404()
#2 /[path-to-www-root]/wp-content/themes/pagelines/includes/library.options.php(43): is_pagelines_special(Array)
#3 /[path-to-www-root]/wp-content in /[path-to-www-root]/wp-includes/functions.php on line 2944 
```

所以最初的调用似乎来自我的主题调用 query.php。这是更多信息，但我不确定它真正提供了多少洞察力，因为我很确定解决这个问题的方法是解决为什么导入的初始状态在从命令行运行与尝试追溯所有问题之间会有所不同发生在它开始时的贫穷状态。

# c# - 如何在 ubuntu/linux 上运行 asmx webservice？

> ID：14539525
> 
> 赞同：0
> 
> 时间：2013-01-26T17:27:14.493
> 
> 标签：c#, linux, web-services, ubuntu, asmx

我有一个正在运行的带有 ubuntu 的网络服务器。（在 ec2 实例上）

我还有一个用 c# 创建的 asmx webservice。

我想使用这个设置来连接网络服务器和 couchbase。（但它对问题本身并不是很重要）

1.  是否有可能（我猜是的）加载 asmx（让我们称之为文件）在 ubuntu 上运行？

2.  在 ubuntu 上部署 asmx webservice 的最佳工具/框架是什么？

3.  有什么理由我不应该这样做，而是将它部署在基于 Windows 的服务器上？（如性能、易用性等）

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T17:36:40.893

> 1）是否有可能（我猜是的）加载那个asmx（让我们称之为文件）在ubuntu上运行？

是的，您可以使用[`Mono`](http://www.mono-project.com/Main_Page).

> 2) 在 ubuntu 上部署 asmx webservice 的最佳工具/框架是什么？

很难谈论最好的工具或框架。但你可以[`run ASP.NET application on Apache`](http://www.mono-project.com/ASP.NET)。

> 3）有什么理由我不应该这样做，而是将它部署在基于 Windows 的服务器上？（如性能、易用性等）

是的，.NET 应用程序的原生家园是 Windows。Mono 只能遵循 Windows 上的 .NET 框架中引入的演变和新功能。

# c++ - 我无法构建和运行简单的 Qt 5 应用程序，

> ID：14539529
> 
> 赞同：3
> 
> 时间：2013-01-26T17:27:25.043
> 
> 标签：c++, qt, qt5

我在 Windows 7 上下载并安装了 Qt 5。
我打开了 QtCreator 2.6.1 并创建了一个新的简单 GUI 应用程序。

当我尝试运行它时，它说：

> “C:\Qt\Qt5.0.0\5.0.0\msvc2010\include\QtCore\qglobal.h:46: 错误: C1083: 无法打开包含文件: 'stddef.h': 没有这样的文件或目录”</p >

有什么问题，我该如何解决？我的编译器是：**MSVC2010 32 位**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T17:35:50.413

谷歌搜索产生以下结果：

[http://qt-project.org/forums/viewthread/10255](http://qt-project.org/forums/viewthread/10255)

此线程指出，当您没有安装 Microsoft 平台 SDK 并且您使用的是 Visual Studio 时会发生此错误。考虑到这`stddef.h`是标准头文件之一（通常包含 using `<cstddef>`，但查看 qtcore/global.h 的源代码，它似乎确实包含为`<stddef.h>`）。因此，如果尚未安装平台 SDK，请尝试安装它。

如果您已经拥有 sdk，则可能没有正确配置。[这个答案](https://stackoverflow.com/questions/6043531/cant-compile-qt-with-microsoft-compiller)说你需要按照微软[在这里](http://msdn.microsoft.com/en-us/library/f2ccy3wt.aspx)给出的说明来正确地进行命令行构建。我认为 Qt Creator 可能从命令行执行编译器，所以这可能会有所帮助。

如果这仍然不起作用，请尝试安装[MinGW](http://www.mingw.org/)编译器并使用它。我看到一些参考资料说，在 Windows 下使用 MinGW 更容易为 Qt 编译。

# video - 阻止流播放器中的视频下载

> ID：14539530
> 
> 赞同：-2
> 
> 时间：2013-01-26T17:27:32.547
> 
> 标签：video, video-streaming, flowplayer

我有一个结构简单的 Web 应用程序。教师从后端上传视频，学生使用各自的登录名在前端查看它们。我正在使用 flowplayer 在前端显示视频。

当教师上传视频时，它被存储在一个网络目录中，它的指针（文件名）被保存在数据库中。在前端，查询获取文件名并将视频 url 提供给 flowplayer。

很直？现在可以通过某种方式从前端下载这些视频。考虑到我的应用程序的结构，实际上有没有办法防止下载视频？我发现 flowplayer api 有一些用于安全流媒体的插件。但我在这个应用程序中所做的是流式传输？如果没有，我该如何防止视频下载？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T16:15:58.897

如果视频可以传送到播放器，那么您将无法阻止确定的用户下载它。您可以使用 API 来（例如）标记化和时间限制 URL 或将视频分成许多较小的部分并逐步浏览它们，但它不会保护这些资产。一个更复杂/更昂贵的解决方案是使用像 PlayReady 或 Widevine 这样的 DRM 许可系统，它允许您颁发可以与用户关联并锁定特定业务规则的许可证。如果这很重要，我建议查看 Voped.com 等 3rd 方提供商或实施基于 Wowza 的解决方案 - 但它不像您今天拥有的解决方案那么简单

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T16:09:24.527

你不能，如果不允许客户端下载视频，播放器就不能显示它们。

安全流媒体只是下载视频的一种复杂方法，它不是阻止下载的神奇方法。

# c++ - makefile 不适用于 c++ zkcm-library - 找不到 mpfr-functions

> ID：14539535
> 
> 赞同：1
> 
> 时间：2013-01-26T17:28:16.787
> 
> 标签：c++, makefile, mpfr, zkcm

我有一个用于使用 zkcm 库的某些程序的 makefile，包括以下对象行：

```
zkcm_c.o: zkcm_c.cpp zkcm_c.h config.h
     g++ -c zkcm_c.cpp -lgmp -lgmpxx -lmpfr 
```

编译器抱怨有一个“未定义的对 '_ *imp* _mpfr__inits2' 的引用”，并且每次使用 mpfr 函数时都是一样的。奇怪的是，makefile 中还有其他对象使用 mpfr 函数没有问题，例如主程序（第一行）：

```
SpMC: SpMC.cpp MCutility.h HPutility.h wfs.h MC_funcs.h $(ZKCMOBJECTS)  $(ZKCMHFILES)
     g++ SpMC.cpp -lgmp -lmpfr -lmpc -o SpMC $(ZKCMOBJECTS) 
```

在这两种情况下，我都`#include<mpfr.h>`在源代码中，如您所见，使用`-lmpfr`. 任何想法为什么这适用于 SpMC.cpp 但不适用于 zkcm_c.cpp？

# java - 防止打印小程序安全警告

> ID：14539539
> 
> 赞同：0
> 
> 时间：2013-01-26T17:28:30.460
> 
> 标签：java, security, printing, applet

我有一个弹出消息的应用程序：

```
Security warning
The applet has requested access to the printer
Do you want to allow this action? 
```

如果我添加这一行：权限 java.lang.RuntimePermission "queuePrintJob";`

手动归档：

```
C:\program files\Java\jre.1.5.0\lib\security 
```

没有更多消息显示..

我该如何解决这个问题？喜欢签名的小程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T17:36:16.110

> 我该如何解决这个问题？喜欢签名的小程序？

是的。对代码进行数字签名，然后在加载（之前）提示时说服用户确定它，并且小程序应该能够执行进一步的安全操作（打印、访问个人信息、删除用户的磁盘或安装从属机器人.. ) 自发的。

我个人更愿意在被我的特定命令调用时（永远不会）在小程序进入打印时被提示显式打印。但也许只有我。

# php - 从 PHP 中几个相互关联的函数中获取变量

> ID：14539541
> 
> 赞同：0
> 
> 时间：2013-01-26T17:28:48.923
> 
> 标签：php, arrays, function

我试图在 XML 解析期间从几个相互关联的函数中获取**变量**并将它们放入**数组**中。代码是：

```
function readChapters($reader) {
    while($reader->read()) {
        if( /* condition here */ ) {
            $chapter = readValue($reader);
        }
        if( /* condition here */ ) {
            readModules($reader);
        }
        if( /* condition here */ ) {
            return;
        }
    }
}

function readModules($reader) {
    while($reader->read()) {
        if( /* condition here */ ) {
            readModule($reader);
        }
        if( /* condition here */ ) {
            return($reader);
        }
    }
}

function readModule($reader) {
    while($reader->read()) {
        if( /* condition here */ ) {
            $topic = readValue($reader);
        }
        if( /* condition here */ ) {
            $description = readValue($reader);
        }
    }
}

function readValue($reader) {
    while($reader->read()) {
        if( /* condition here */ ) {
            return $reader->readInnerXML();
        }
    }
}

$reader = new XMLReader();
$reader->open('example.xml');

$current = 0;
$topics_list = array();

$chapterName = "";          // want to add $chapter
$topicName = "";            // want to add $topic
$descriptionText = "";      // want to add $description

while($reader->read()) {
    if(// condition here) {
        readChapters($reader);
    }
    $topics_list[$current] = array();
    $topics_list[$current]['chapter'] = $chapterName;
    $topics_list[$current]['topic'] = $topicName;
    $topics_list[$current]['description'] = $descriptionText;
}
$reader->close();
print_r($topics_list); 
```

**问题：**如何从这些函数之外获取*$chapter*、*$topic*、*$description*变量以便将它们放入数组中？提前致谢。

**更新：** XML 文档结构在[这里](http://i.stack.imgur.com/tyB1U.png)，以及 Array() 的预期结构：

```
Array (
            [0] => Array (
                    [chapter] => Chapter_name1
                    [topic] => Topic_name1
                    [description] => Content_of_the_topic1
                )
            [1] => Array (
                    [chapter] => Chapter_name1
                    [topic] => Topic_name2
                    [description] => Content_of_the_topic2
                )
            [2] => Array (
                    [chapter] => Chapter_name2
                    [topic] => Topic_name2
                    [description] => Content_of_the_topic2
            )
            .....
        ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T17:56:04.243

您实际上是在使用一组函数来使用来自 XML 对象的数据来构建数据结构。这意味着每个函数都应该返回它命名的数据结构：readChapters() 应该返回一个章节结构（并且可能应该命名为 readChapter()，因为我认为它只阅读一章，对吗？），等等。我不知道你的 XML 是什么样的，或者你想要的数据结构是什么样的，但你会想要这样的东西：

```
function readChapter($reader) {
    $chapter = array();
    while (// condition) {
         if (// something)
              $chapter['chapter'] = readValue($reader);
         elseif (// something else)
              $chapter['topic'] = readValue($reader);
         // etc
    }

    return $chapter;
} 
```

然后在你下面的主循环中，你可以有这个：

```
while ($reader->read()) {
    if (// condition here) {
        $topics_list[] = readChapter($reader);
    }
} 
```

希望这能让你更接近你可以建造的东西！

# objective-c - Xcode - 我无法从 AppDelegate 运行整个方法

> ID：14539558
> 
> 赞同：0
> 
> 时间：2013-01-26T17:30:24.043
> 
> 标签：objective-c, xcode, methods, url-scheme, appdelegate

我正在使用自定义 URL 方案打开我的应用程序，然后获取链接并在方法中运行。但我无法真正运行该方法。

例如，我无法加载 Web 视图或更改标签或文本字段。那么如何加载网页视图和更改标签？

`AppDelegate.m`：

```
- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url {    
    if (!url) {  return NO; }
    NSString *URLopen= [[url host] stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
    ViewController *vc = [[ViewController alloc]init];
    vc.URLschemeLink = URLopen;
    [vc URLscheme];   
    return YES;
} 
```

`ViewController.h`：

```
@interface ViewController : UIViewController<MFMailComposeViewControllerDelegate> {
    NSString *URLschemeLink;
}

-(void)URLscheme;

@end 
```

`ViewController.m`：

```
@implementation ViewController
@synthesize URLschemeLink;

-(void)URLscheme {
    //for example:
    label.text = @"Hello"; //nothing will happen
    [webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.google.com"]]]; //Nothing will happen

    NSLog ("Method Works Perfect"); //will happen

    UIAlertView *alert = [[UIAlertView alloc]
                               initWithTitle:@"Title:"
                                     message:[NSString stringWithFormat:@"%@", URLSchemeLink]
                                    delegate:nil
                           cancelButtonTitle:@"OK"
                           otherButtonTitles:nil];
    [alert show];
    //UIAlertView will work perfectly and show the URLschemeLink from AppDelegate.
} 
```

好的 无论如何如何加载标签/webview？我测试从应用程序委托传递一个名为 runURLscheme (=true) 的布尔值。然后我在 ViewDidLoad 中写道：

```
if(runURLscheme==true) {
    [self URLScheme];
} 
```

但这不起作用，它不会运行 URLscheme 方法。无论如何，我如何加载标签/网络视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T18:18:35.187

与视图控制器关联的主视图通常是延迟加载的。仅仅因为视图控制器被初始化，并不意味着它已经加载了它的主视图。您的视图只有`viewDidLoad`在被调用后才能安全访问。

一般来说，这种模式效果很好：

*   独立于显示它的任何视图存储您的数据。
*   当您的自定义 URL 方案运行时，更新此数据。
*   在您的视图控制器上有一个方法，可以根据这些数据更新其视图。
*   从 调用此方法`viewDidLoad`。

如果在你的视图已经加载后这些数据有可能被更新（例如，如果你从网络接收数据），那么使用通知或 KVO 再次调用你的视图更新方法。

# mysql - MySQL 我需要表 X 中的一行来返回表 Y 中的一行

> ID：14539562
> 
> 赞同：0
> 
> 时间：2013-01-26T17:30:32.987
> 
> 标签：mysql

所以我有2张桌子：

包含我所有玩家的“玩家”表：

```
Players | stuff1| stuff2
----------------------------
1       | x1   | y1
2       | x2   | y2
3       | x3   | y3
...     | ... | ... 
```

等等

然后我有我的“禁令”表，其中包含哪些人被禁止：

```
Id | Players
------------
1  | 2
2  | 5 
```

现在，从目前“bans”的内容来看，应该说占据“玩家”表索引 2 和 5 的玩家被禁止。

我需要的是一种让我做类似'SELECT bans WHERE id = 1'的方法，它会在'players'中返回玩家2，如{2，x2，y2}，我不知道我会怎么做。

帮助表示赞赏！

编辑：对不起，我的格式有点疯狂。现在应该可以阅读了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T18:11:01.773

You want a join:

```
select playersTable.* from banTable
inner join playersTable on banTable.players = playersTable.players
where banTable.id = 1 
```

You should really rename your `players` column to something else. The cells of this column don't contain players, but a player ID. I would rename it `player_id`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T17:40:29.243

如果你需要所有被禁玩家

```
select p.* from players p, banned b where p.Players = b.Players 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T17:40:51.323

您是否需要从 Players 中拉出玩家并显示谁被禁止？

```
SELECT Players.*, CASE WHEN Banned.Players IS NOT NULL THEN 'YES' ELSE NO END AS [Banned] 
FROM Players
LEFT JOIN Banned ON Players.Players = Banned.Players 
```

这将返回所有玩家，并指示哪些玩家被禁止。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T17:35:37.400

我认为你需要这个::

```
Select Players from Table where ID=? /*2 in this case*/ 
```

# iphone - UITextField 没有编辑，但用于复制/粘贴

> ID：14539563
> 
> 赞同：2
> 
> 时间：2013-01-26T17:30:46.113
> 
> 标签：iphone, xcode, copy, uitextfield, paste

> **可能重复：**
> [在 UITextField 上启用复制和粘贴而不使其可编辑](https://stackoverflow.com/questions/1920541/enable-copy-and-paste-on-uitextfield-without-making-it-editable)

我需要禁用 UITextField 上的编辑，但保留复制/粘贴功能

当我使用

```
textField.enabled = NO; 
```

然后禁用复制/粘贴功能；

```
textField.editing = NO; 
```

Xcode 写“不允许使用‘readonly’属性分配给属性

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T17:37:01.887

你可以在[这里](https://stackoverflow.com/questions/1920541/enable-copy-and-paste-on-uitextfield-without-making-it-editable)找到帮助：

这是 UILabel 的子类，你可以用 UITextField 做类似的事情。并将类从 UITextField 更改为这个类。

```
@implementation CopyableLabel

- (BOOL)canPerformAction:(SEL)action withSender:(id)sender {
    if(action == @selector(copy:)) {
        return YES;
    }
    else {
        return [super canPerformAction:action withSender:sender];
    }
}

- (BOOL)canBecomeFirstResponder {
    return YES;
}

- (BOOL)becomeFirstResponder {
    if([super becomeFirstResponder]) {
        self.highlighted = YES;
        return YES;
    }
    return NO;
}

- (void)copy:(id)sender {
    UIPasteboard *board = [UIPasteboard generalPasteboard];
    [board setString:self.text];
    self.highlighted = NO;
    [self resignFirstResponder];
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
    if([self isFirstResponder]) {
        self.highlighted = NO;
        UIMenuController *menu = [UIMenuController sharedMenuController];
        [menu setMenuVisible:NO animated:YES];
        [menu update];
        [self resignFirstResponder];
    }
    else if([self becomeFirstResponder]) {
        UIMenuController *menu = [UIMenuController sharedMenuController];
        [menu setTargetRect:self.bounds inView:self];
        [menu setMenuVisible:YES animated:YES];
    }
}

@end 
```

# c - Vim 中的自动关闭和自动缩进冲突

> ID：14539573
> 
> 赞同：0
> 
> 时间：2013-01-26T17:31:26.200
> 
> 标签：c, vim, editor, vi

所以我使用一个工具在 C 文件中的括号后自动缩进：

```
filetype plugin indent on 
```

但是，我还想在键入它们的第一部分时自动关闭括号、括号和其他代码分隔符。为此，我将其添加到我的 vimrc 中：

```
inoremap ( ()<Left>
inoremap { {}<Left> 
```

但是，现在，当我在创建的两个括号之间按 Enter 键时，我的代码不再自动缩进。如果禁用了自动完成括号功能，它可以正常工作，但我必须手动关闭我的括号。我也尝试过使用 DelimiterMate 来达到同样的效果。有没有办法解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T19:48:40.103

[这个 Vim Tips Wiki 页面](http://vim.wikia.com/wiki/Automatically_append_closing_characters)包含对该主题的完整讨论，从像您这样的简单映射开始。因为有很多角落情况和它应该*工作*的区域，我推荐一个插件。提到的页面有一个完整的插件列表。（我偶尔会使用Karl Guertin 的*AutoClose*。）

# ruby-on-rails - 我应该如何为包含大量内容更新的动态页面设置 dalli？

> ID：14539581
> 
> 赞同：1
> 
> 时间：2013-01-26T17:32:12.083
> 
> 标签：ruby-on-rails, ruby-on-rails-3, dalli

我知道`dalli`（缓存）对于提高静态站点的性能非常有用。
但是经常更新的动态站点呢？
正确的设置方法是什么`dalli`？

例如，我遇到的一个问题：`dalli`使用分页时将不同的 params[:page] 识别为同一页面:(

`dalli`两者都使用时，你们将如何设计系统

*   经常更新的页面
*   不会经常更新的页面

我现在的代码就是这样。这就是为什么我在使用缓存时面临分页问题......

**控制器**

```
caches_page :index, :show 
```

**配置/环境/development.rb**

```
config.consider_all_requests_local       = true
config.action_controller.perform_caching = true
config.cache_store = :dalli_store 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T18:35:42.187

我遇到了同样的问题，并决定视图中的片段缓存是一个更好的选择。

片段的缓存键基于模型，并且每次更新模型时都会更改。

这是我在haml中的一个观点的摘录。

```
 - @content_pages.each do |content_page|
          - cache(content_page.get_cache_key('home_page_content_page')) do
            ...Render ContentPage model 
```

它基于此处 37Signals 推荐的方法 [How-based cache expiration works](http://37signals.com/svn/posts/3113-how-key-based-cache-expiration-works)

我在我的网站上完整地写了这个方法

[Rails 缓存策略使用基于键的方法](http://mark.stratmann.me/content_items/rails-caching-strategy-using-key-based-approach)

希望这可以帮助

# java - 有什么区别：JScrollBar 和 AdjustmentEvent 中的 getValueIsAdjusting()？+ 如何监听 JScrollBar 的按钮？

> ID：14539583
> 
> 赞同：3
> 
> 时间：2013-01-26T17:32:17.680
> 
> 标签：java, swing, listener, jscrollbar

它们实际上是*两个*问题：

第**一个问题：** [JScrollBar](http://docs.oracle.com/javase/7/docs/api/javax/swing/JScrollBar.html#getValueIsAdjusting%28%29)和[AdjustmentEvent](http://docs.oracle.com/javase/7/docs/api/java/awt/event/AdjustmentEvent.html#getValueIsAdjusting%28%29)`getValueIsAdjusting()`有什么区别

我用一些代码尝试了它们以测试是否有任何区别，但我没有得到任何！这是显示我如何测试它们的代码。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class ScrollTest extends JPanel
{
    JPanel panel;
    JScrollBar scroll;

    public ScrollTest()
    {
        scroll = new JScrollBar(JScrollBar.HORIZONTAL, 0, 6, 0, 300);
        scroll.addAdjustmentListener(ScrollListener);
        panel = new JPanel(new GridLayout(1, 0));
        panel.add(scroll);
        this.setLayout(new BorderLayout());
        this.add(panel);
    }

    AdjustmentListener ScrollListener = new AdjustmentListener()
    {
        @Override
        public void adjustmentValueChanged(AdjustmentEvent e)
        {
           if(e.getValueIsAdjusting())
           {
               System.out.println("AdjustmentEvent");
           }

           if(scroll.getValueIsAdjusting())
           {
              System.out.println("JScrollBar");
           }

        }
    };

    private static void createAndShowGUI()
    {
        JFrame frame;
        frame = new JFrame("Scroll Test");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(880, 100);
        frame.add(new ScrollTest(), BorderLayout.CENTER);
        frame.setVisible(true);
    }

    public static void main(String[] args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                UIManager.put("swing.boldMetal", Boolean.FALSE);
                createAndShowGUI();
            }
        });
    }
} 
```

上面的代码将依次打印“AdjustmentEvent”和“JScrollBar”字符串。他们之间似乎没有区别！

**重要的一点是何时/使用什么？**

* * *

第二**个**问题：

如何收听 JScrollBar 按钮？如果您测试了上面的代码，它会在您移动旋钮或单击条带时打印字符串，但当您单击 JScrollBar 的按钮时不会打印！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T17:53:01.570

[在](http://www.java2s.com/Code/Java/Swing-JFC/ListeningforScrollbarValueChangesinaJScrollPaneContainer.htm)`adjustmentValueChanged`of`AdjustmentListener`类中再添加一个事件（如此处所述） 。

如果事件类型是`AdjustmentEvent.TRACK`则也打印一个语句。

```
 if(e.getValueIsAdjusting())
 {
   System.out.println("AdjustmentEvent");
 }

 if(scroll.getValueIsAdjusting())
 {
   System.out.println("JScrollBar");
 }

 if(e.getAdjustmentType() == AdjustmentEvent.TRACK) 
 { 
   System.out.println("The button in scrollbar clicked");
 } 
```

这将捕获`JScrollBar`.

# c# - ASP.NET 4.0 C#“状态信息对此页面无效，可能已损坏。” MasterPage->Aspx->Ascx

> ID：14539585
> 
> 赞同：2
> 
> 时间：2013-01-26T17:32:27.673
> 
> 标签：c#, ajax, state

这是我的第一个 SO 帖子，所以请原谅任何失礼。我觉得好像我已经尝试了与此错误相关的每个帖子的所有内容（禁用视图状态、noCache 等），但我束手无策。

我有一个带有一个母版页、一个页面和一个控件的空白项目。

页面 (aspx) 使用母版页加载。这工作正常。页面上有一个按钮，可将控件（ascx）加载到名为 divRightMainView 的部分中的 aspx 上。这也可以正常工作（这是我的问题似乎与我发现的所有其他问题不同的地方......）。ascx 上有一个按钮，它应该调用 ascx 的代码隐藏 - 这是我得到“状态信息”错误的地方。

这是aspx：

```
 <%@ Page Title="" Language="C#" MasterPageFile="~/Site.Master"                   EnableEventValidation="false" AutoEventWireup="true" CodeBehind="Outer.aspx.cs"   Inherits="TestProject.Outer" %>
    <asp:Content ID="Content1" ContentPlaceHolderID="HeadContent" runat="server">
    <script  type="text/javascript">
        function loadUserView(viewToLoad) {
            PageMethods.RenderControl(viewToLoad, onSuccess, onError);
        }

        function onSuccess(results) {
            alert(results);
            var command = results.split('##')[0];

            if (command == 'loadView') {
                var htmlToLoad = results.split('##')[1];
                $get('divRightMainContentView').innerHTML = htmlToLoad;
            }
        }

        function onError(error) {
            alert('error ' + error);
        }

    </script>
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
    <asp:ScriptManager ID="ScriptMgr" runat="server" EnablePageMethods="true">
    </asp:ScriptManager>
     <div id="leftSideContent">
         <input type='button' id="clickToLoadASCX" value="Click Me" onclick="loadUserView('/inner.ascx');"/>
         This is the "Outer.aspx" page which will hold the ascx after the button is clicked
     </div>
     <div id="divRightMainContentView">

     </div>
</asp:Content> 
```

背后的 Aspx 代码（呈现 ascx）

```
 [WebMethod]
    public static string RenderControl(String controlName)
    {

        Page page = new Page();
        Control control = page.LoadControl(controlName);
        HtmlForm form = new HtmlForm();
        form.Controls.Add(control);
        page.Controls.Add(form);
        StringWriter writer = new StringWriter();
        HttpContext.Current.Server.Execute(page, writer, false);
        return "loadView##" + writer.ToString();
    } 
```

这是名为 inner.ascx 的 ascx

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="inner.ascx.cs" Inherits="TestProject.inner" %>

<div>
    This is the inner text. When I click the button below I should proceed to inner.ascx.cs to the "PageBehindCall_Submit".
    <asp:Button ID="innerButton" runat="server" onclick="PageBehindCall_Submit" Text="Submit"/> 
</div> 
```

最后，ascx 代码隐藏

```
protected void PageBehindCall_Submit(object sender, EventArgs e)
{
    string str = "This call does not work!";
} 
```

我希望能够使用“PageBehindCall_Submit”来处理数据，从 ascx 获取输入等。让我知道是否有办法实现这一点，或者其他可能的解决方法？任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T17:52:33.977

为什么不在 ascx 的页面加载时加载 ascx 而是关闭可见性而不是手动呈现用户控件 html。这很奇怪，因为控件属于 ascx，所以它没有与 ascx 中的事件挂钩。但我认为您应该将它添加到 aspx 中，然后在需要时尝试打开可见性。

# ios - 使用字典数组填充 UITableview 中的部分

> ID：14539588
> 
> 赞同：0
> 
> 时间：2013-01-26T17:32:55.303
> 
> 标签：ios, uitableview, nsarray, nsdictionary

我对 iOS 很陌生，但我已经到了那里，但遇到了一个问题，我很确定我只是不知道要使用的语法。

如何使用字典数组填充 UITableview，并使用字典中的特定项目来填充两个部分？例如，我从网站读取了一个 plist 文件，它是一个字典数组。在字典项目中是一个称为“类型”的标识符。有两个不同的“类型”变量。一个表示“链接”，一个表示“显示”。我要做的是在一个部分中有一个带有“链接”的分区表，而在另一部分中有一个“显示”。

这是我拥有的代码，它将读取整个数组并将其放入一个部分，但我怎样才能让它分为两个部分？

这是 plist 的示例。注意“类型”，一个是“weblink”，一个是“show”。

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<array>
    <dict>
        <key>Title</key>
        <string>Faceboook</string>
        <key>Type</key>
        <string>weblink</string>
        <key>MapAddress</key>
        <string></string>
        <key>Address</key>
        <string></string>
        <key>Date</key>
        <string></string>
        <key>Link</key>
        <string>http://www.facebook.com/myfacebook</string>
    </dict>
    <dict>
        <key>Title</key>
        <string>Bernardo Winery</string>
        <key>Type</key>
        <string>show</string>
        <key>MapAddress</key>
        <string>321+Lombard+St,+San+Francisco,+CA</string>
        <key>Address</key>
        <string>321 Lombard St, San Francisco, CA</string>
        <key>Date</key>
        <string>Nov 2nd and 3rd.</string>
        <key>Link</key>
        <string></string>
    </dict>
</array>
</plist> 
```

这是它将 plist 读入 NSMutableArray TableData 的地方。

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];

if(self)
{
    NSError *error = nil;

    NSString *URLString = [NSString stringWithContentsOfURL:[NSURL URLWithString:@"http://www.mywebsite.com/ShowList.plist"]
                                                   encoding:NSUTF8StringEncoding
                                                      error:&error];
    URLString = nil;

    if(error == nil)
    {
        TableData = [[NSMutableArray alloc]initWithContentsOfURL:[NSURL URLWithString:@"http://www.mywebsite.com/ShowList.plist"]];
    }
    else
    {
        NSString *errorString = @"No internet connection, these links may not work!";

        UIAlertView *av = [[UIAlertView alloc] initWithTitle:@"Error"
                                                     message:errorString
                                                    delegate:nil
                                           cancelButtonTitle:@"OK"
                                           otherButtonTitles: nil];
        [av show];

        NSString *plistPath = [[NSBundle mainBundle] pathForResource:@"ShowList" ofType: @"plist"];
        TableData = [[NSMutableArray alloc] initWithContentsOfFile:plistPath];
    }
}
return self;
} 
```

这里是 TableData 被输入到 tableView 的地方。

```
-(UITableViewCell *)tableView:(UITableView *)tv cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
UITableViewCell *cell = [tv dequeueReusableCellWithIdentifier:@"cell"];

//    NSLog(@"The count: %i", [TableData count]);
//    NSLog(@"Terms array %@",TableData);
//    NSLog(@"value at index %i is %@", 1, [TableData objectAtIndex:1]);

NSDictionary *tmpDic = [[NSDictionary alloc] initWithDictionary:[TableData objectAtIndex:[indexPath row]] copyItems:YES];

if (cell == nil)
{
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"UITableViewCell"];
}

[[cell textLabel] setText:[tmpDic objectForKey:@"Title"]];

return cell;

} 
```

预先感谢您的帮助。温德尔

编辑：我实施了以下 -

```
if ([[tmpDic objectForKey:@"Type"] isEqualToString:@"weblink"]) {
    if(indexPath.section==0)
    {
        [[cell textLabel] setText:[tmpDic objectForKey:@"Title"]];
    }
}

if ([[tmpDic objectForKey:@"Type"] isEqualToString:@"show"]) {
    if(indexPath.section==1)
    {
        [[cell textLabel] setText:[tmpDic objectForKey:@"Title"]];
    }
} 
```

但以下情况正在发生：

![第 0 节](../Images/81825d910ec966f2f7764e70cc645b7b.png) ![第 1 节](../Images/a30d499af66949021a0f054257581635.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T19:23:47.630

我会将您拥有的数据转换为数组数组，然后以通常的方式为分区表填充表：

```
@implementation TableController {
    NSMutableArray *tableData;
}

- (void)viewDidLoad {
    [super viewDidLoad];
    [self.tableView registerClass:[UITableViewCell class] forCellReuseIdentifier:@"Cell"];

    NSString *plistPath = [[NSBundle mainBundle] pathForResource:@"ShowList" ofType: @"plist"];
    NSArray *array = [[NSArray alloc]initWithContentsOfFile:plistPath];
    NSMutableArray *showArray = [NSMutableArray array];
    NSMutableArray *webArray = [NSMutableArray array];
    for (NSDictionary *dict in array) {
        if ([dict[@"Type"] isEqualToString:@"weblink"]) {
            [webArray addObject:dict];
        }else if ([dict[@"Type"] isEqualToString:@"show"]) {
            [showArray addObject:dict];
        }
    }
    tableData = [NSMutableArray arrayWithObjects:webArray,showArray nil];
    NSLog(@"%@",tableData);
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return tableData.count;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return [tableData[section] count];
}

-(NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {
    if (section == 0) {
        return @"Web Links";
    }else if (section == 1) {
        return @"Show Locations";
    }
    return nil;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];
    cell.textLabel.text = tableData[indexPath.section][indexPath.row][@"Title"];
    return cell;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T17:41:37.987

你应该使用：

```
 - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
 {
return 2;
}

-(UITableViewCell *)tableView:(UITableView *)tv cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
UITableViewCell *cell = [tv dequeueReusableCellWithIdentifier:@"cell"];

NSDictionary *tmpDic = [[NSDictionary alloc] initWithDictionary:[TableData objectAtIndex:[indexPath row]] copyItems:YES];

if (cell == nil)
{
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"UITableViewCell"];
}
if(indexPath.section==0)
{
[[cell textLabel] setText:[tmpDic objectForKey:@"Title"]];
}else
{
[[cell textLabel] setText:[tmpDic objectForKey:@"Link"]];
}

return cell;

} 
```

# jquery - 在图像上显示加载 gif

> ID：14539596
> 
> 赞同：0
> 
> 时间：2013-01-26T17:33:36.813
> 
> 标签：jquery, html, css

我正在制作一个网站，通过单击*下一步*按钮，浏览器从服务器请求一个新的图像 URL 并使用 jQuery 加载图像。当请求发生时，我想在旧图像之上显示加载图像（如 Facebook）。

**HTML**

```
<div1>
    <img id="rel" src="http://localhost/images/original.jpg" height="400" width="500"></img>
    <div2>
        <img id="rel" src="http://localhost/images/loading.jpg" height="40" width="50"></img>
    </div2>
</div1> 
```

**CSS**

```
div1
{
    position:relative;
}

div2
{
    position:absolute;
    top:50%;
    left:50%;
} 
```

当我在 jsFiddle 中尝试此操作时，图像不会出现在其他图像上。我只知道基本的 CSS。原谅上面代码中的任何错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T17:36:45.323

定义 DIV 的宽度和高度。像这样写：

```
.div2
{
  position:absolute;
  top:50%;
  left:50%;
  margin-left:-25px;
  margin-top:-20px;
  width:50px;
  height:40px;
} 
```

例如检查这个[http://jsfiddle.net/JYduU/](http://jsfiddle.net/JYduU/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T17:42:56.983

标记不正确

```
 <div1><img id="rel" src="http://localhost/images/original.jpg" height="400" width="500"/>
    <div2><img id="rel" src="http://localhost/images/loading.jpg" height="40" width="50"/>
    </div2></div1> 
```

应该像

```
 <div id="div1"><img id="rel1" src="http://localhost/images/original.jpg" height="400" width="500"/>
   <div id="div2"><img id="rel2" src="http://localhost/images/loading.jpg" height="40" width="50"/>
   </div></div> 
```

你的 CSS

```
 <style type="text/css">
   #div1 { position:relative; }
   #div2 { position:absolute; top:50%; left:50%; }
 /* some answers here have some tips on better positioning center */

 </style> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T17:37:55.297

`div1`将您的html 更改`div2`为

```
<div class=div1><img id="rel" src="http://localhost/images/original.jpg" height="400" width="500">      </img>
<div class=div2><img id="rel" src="http://localhost/images/loading.jpg" height="40" width="50"></img>
</div2></div1>

.div1
{
  position:relative;
 }
.div2
{
  position:absolute;
  top:50%;
  left:50%;
} 
```

如果您使用 id 作为图像标签，请不要同时提供相同的 id

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T17:38:26.523

```
<div id="parentDiv">
   <img id="rel1" src="http://localhost/images/original.jpg" height="400" width="500" />
   <img id="rel2" src="http://localhost/images/loading.jpg" height="40" width="50" />
</div> 
```

**CSS：**

```
#parentDiv
{
   position:relative;
}

#rel2
{
   position:absolute;
   top:50%;
   left:50%;
} 
```

您的代码有一些错误：

```
<img></img> should be <img /> 
```

你不应该有两个相同的ID`rel`

您必须将两个图像放在同一个**Parent Div**中，给它一个`position:relative;`，以便第二个图像被认为是这个 Parent Div 的绝对值，而不是整个页面。

检查这个[http://jsfiddle.net/Kfxha/](http://jsfiddle.net/Kfxha/)

要将第二张图像定位在中心，您必须进行一些数学计算。

```
top = ( rel1.height - rel2.height ) / 2 =  ( 400 - 40 ) / 2 = 180px
left = ( rel1.width - rel2.width ) / 2 = ( 500 - 50 ) / 2 = 225px 
```

# python - 从 pyw 文件运行 cmd 命令而不弹出窗口

> ID：14539607
> 
> 赞同：0
> 
> 时间：2013-01-26T17:35:02.003
> 
> 标签：python, subprocess, os.system

所以我正在编写一个应该在后台持续运行的python脚本，并且偶尔会ping一个站点以查看我的路由器是否出现故障。无论如何，因为它是一个 python 脚本，所以我将它作为一个 pyw 文件运行，但无论我尝试以何种方式调用 ping 命令，总是会弹出一个窗口（即使只有一毫秒）。到目前为止我尝试过的（但没有奏效）：

```
subprocess.call("ping google.com", stdout = IGNORE, stderr = IGNORE)

subprocess.check_output("ping google.com", stdout = IGNORE, stderr = IGNORE)

os.system("ping google.com") 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T20:48:24.327

您可以将 ping 输出保存到文件中，然后打印文件内容

```
os.system("ping google.com>google.log") 
```

# nltk - In the NLTK, how to interface to Boxer?

> ID：14539609
> 
> 赞同：1
> 
> 时间：2013-01-26T17:35:27.470
> 
> 标签：nltk, semantic-analysis

I want to be able to use Boxer as a semantic extractor inside NLTK.

I am testing with the following code:

```
#!/bin/env python
import nltk
x = nltk.sem.boxer.Boxer()
x.interpret("The capital of Spain is Madrid .") 
```

The failure is the following:

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
    File "/usr/lib/python2.7/site-packages/nltk/sem/boxer.py", line 83, in interpret
        d, = self.batch_interpret_multisentence([[input]], discourse_ids, question, verbose)
      File "/usr/lib/python2.7/site-packages/nltk/sem/boxer.py", line 140, in batch_interpret_multisentence
          drs_dict = self._parse_to_drs_dict(boxer_out, use_disc_id)
            File "/usr/lib/python2.7/site-packages/nltk/sem/boxer.py", line 241, in _parse_to_drs_dict
                line = lines[i]
                IndexError: list index out of range 
```

From the nltk code, I found at [http://nltk.org/_modules/nltk/sem/boxer.html#Boxer](http://nltk.org/_modules/nltk/sem/boxer.html#Boxer) that in the _parse_to_drs_dict(self, boxer_out, use_disc_id) function, it does a `i += 4` that I haven't been able to understand.

Am I feeding something bad to the Boxer?

Did anyone manage to make it work?

Manually debugging step-by-step, the NLTK actually gets the output from candc and boxer.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T03:13:41.700

It seems that the newer version available in GitHub works seamlessly.

In the 2.0.4 code the `i += 4` line is probably a bug.

In order to get NLTK working, download the source code from GitHub and `python setup.py install` it.

Be sure to set `CANDCHOME` variable to the `bin/` dir of your `candc` and `boxer` tools, and the models at the previous folder (the path should be `$CANDCHOME/../models`).

# asp.net - asp.net 成员资格真的为 Web 应用程序的登录、身份验证、授权提供了安全且强大的解决方案吗？

> ID：14539614
> 
> 赞同：1
> 
> 时间：2013-01-26T17:35:42.410
> 
> 标签：asp.net, asp.net-mvc-3, asp.net-membership, membership-provider, custom-membershipprovider

听说asp.net会员的哈希算法是sha-1，但是我在大多数文章中看到它不再安全，我也想知道大多数专业开发人员是否使用asp.net会员或者他们在登录、身份验证、系统/项目授权方面提出自己的解决方案/实施。

asp.net 成员资格真的为 Web 应用程序的登录、身份验证、授权提供了安全且强大的解决方案吗？:)

我问的原因是我想知道开发人员是否真的在他们的项目中使用它。

先生/女士，您的回答会很有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T17:40:00.550

.NET 4.0 中的[`default hash algorithm`](http://www.asp.net/whitepapers/aspnet4/breaking-changes#0.1__Toc256770148)更改为 SHA256。因此，如果您使用的是 .NET 4.0，您将非常安全。

您还可以在 web.config 中指定哈希算法：

```
<system.web>
    <machineKey validation="SHA256" />
    <membership defaultProvider="myMembership" hashAlgorithmType="SHA256">
    ...
</system.web> 
```

实际上，这是 .NET 4.0 中的一个重大变化。因此，如果您在 .NET 3.5 中有一个现有应用程序并升级到 .NET 4.0，则使用 SHA1 散列的密码可能不再在 .NET 4.0 中使用，除非您将算法类型改回 SHA1。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-26T17:49:23.377

如果我正在编写用户数量不多的内部应用程序，那么我通常依赖 asp.net memberhsip。它很熟悉，我知道如何快速启动和运行。其他开发人员也相当了解它，因此不需要解释。组织通常也希望控制用户帐户。

另一方面，如果您正在创建一个公共站点并且需要在做出贡献之前对用户进行身份验证（例如堆栈溢出），您可能需要考虑实现[OpenId](http://openid.net/)，这样用户就不必使用您的域创建新帐户。他们可以改用 Google/Facebook/Twitter。有一些[图书馆](http://nuget.org/packages?q=openid)可以帮助您入门。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-26T17:54:58.380

并不真地。ASP.NET 成员资格提供程序是设计失败的。

1.  它强制您使用预定义的域模型实体，而不是使用您自己的。
2.  不可轻松互换（每家公司使用不同的提供商或不同形式的身份验证）
3.  预定义的 MembershipProvider 抽象是一个失败的类设计。（输出参数？ - 是的，请测试它）

去实现你自己的提供者。对于密码，请选择您的哈希算法（sha1、sha512...）。

完成实现后，使用 FormsAuthentication 类将其与您的提供程序集成。

# android - 如何从 DialogFragment 读取/写入首选项？

> ID：14539615
> 
> 赞同：9
> 
> 时间：2013-01-26T17:35:49.863
> 
> 标签：android, android-preferences, android-alertdialog, android-dialogfragment

我想从 DialogFragment 中的首选项文件中读取。如果我这样做：

```
prefs = getSharedPreferences("numberPicker.preferences", 0); 
```

然后我得到一个编译时错误，因为 getSharedReference 是一个 ContextWrapper 方法，但 DialogFragment 不是一个 ContextWrapper （顺便说一下，我使用 android.support.v4.app.DialogFragment 来实现向后兼容性）。

如果或者，作为“解决方法”，我使用在类 InitSpel 中创建的 SharedPreferences 对象首选项（这是一个 FragmentActivity，因此是一个 ContextWrapper），那么我没有收到错误（无论是在编译时还是在运行时）但是值不是存储（下次我启动应用程序时，值 baan1 和 baan2 仍为 0）。

怎么解决？

```
package mypackage;

import android.app.Activity;
import android.app.AlertDialog;
import android.app.Dialog;
import android.content.ComponentName;
import android.content.DialogInterface;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.support.v4.app.DialogFragment;
import android.support.v4.app.FragmentActivity;
import android.view.LayoutInflater;
import android.view.View;
import android.widget.EditText;

public class VraagBanenDialogFragment extends DialogFragment {

    private View v;
    private EditText editText1; 
    private EditText editText2; 
    //private ArrayList<Baan> baanNummers;
    private int[] oldBanen;
    private int[] currentBanen;
    private SharedPreferences prefs;

    /*  public VraagBanenDialogFragment(ArrayList<Baan> baanNummers) {
        this.baanNummers = baanNummers;
    }
*/
    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
        // Restore preferences
        //prefs = InitSpel.prefs;
        prefs = getSharedPreferences("numberPicker.preferences", 0);
        int baan1 = prefs.getInt( "BAAN_01", 0 );
        int baan2 = prefs.getInt( "BAAN_02", 0 );
        //oldBanen = new int[InitSpel.aantalParallel];
        oldBanen = new int[2]; 
        oldBanen[0] = baan1;
        oldBanen[1] = baan2;

        // Get the layout inflater
        LayoutInflater inflater = getActivity().getLayoutInflater();

        // Inflate and set the layout for the dialog
        // Pass null as the parent view because its going in the dialog layout
        v = inflater.inflate(R.layout.vraag_banen, null);
        // velden vullen met opgeslagen waarden
        editText1 = (EditText) v.findViewById(R.id.editText1); 
        editText2 = (EditText) v.findViewById(R.id.editText2); 
        editText1.setText(String.valueOf(baan1));
        editText2.setText(String.valueOf(baan2));
        //editText1.setText(String.valueOf(baanNummers.get(0).getBaanNummer()));
        //editText2.setText(String.valueOf(baanNummers.get(1).getBaanNummer()));
        builder.setView(v)
        // Add action buttons
        .setPositiveButton(R.string.dialog_ok, new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int id) {

               int baan1 = Integer.valueOf(editText1.getText().toString());
               int baan2 = Integer.valueOf(editText2.getText().toString());
               InitSpel.setBaanNummer(0, baan1);
               InitSpel.setBaanNummer(1, baan2);

               // en banen nog bij de preferences op schijf opslaan...
               // We need an Editor object (prefs.edit()) to make preference changes.
               // All objects are from android.context.Context
               prefs.edit().putInt("BAAN_01", baan1);
               prefs.edit().putInt("BAAN_02", baan2);

               // Commit the edits!
               prefs.edit().commit();
            }
        })
        .setNegativeButton(R.string.dialog_cancel, new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int id) {
               // TODO cancel;
            }
        });      
        return builder.create();
    }   
 } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-26T17:42:56.147

使用`getActivity()`因为`Activity`extends `Context`，并且`Context`有一个[`getSharedPreferences()`](http://developer.android.com/reference/android/content/Context.html#getSharedPreferences%28java.lang.String,%20int%29)方法。

```
prefs = getActivity().getSharedPreferences("numberPicker.preferences", 0); 
```

我还建议保留对 Editor 对象的引用以确保正确保存。

```
SharedPreferences.Editor editor = prefs.edit();
editor.putInt("BAAN_01", baan1);
editor.putInt("BAAN_02", baan2);

// Commit the edits!
editor.commit(); 
```

或链：

```
prefs.edit()
  .putInt("BAAN_01", baan1)
  .putInt("BAAN_02", baan2)
  .commit(); 
```

# networking - 服务器 -> 许多客户端：同时发生的事件

> ID：14539617
> 
> 赞同：0
> 
> 时间：2013-01-26T17:35:52.770
> 
> 标签：networking, client-server

*不确定这个问题属于哪一类；也许是一般的网络/设计/算法。*

对于一个项目，我正在考虑拥有一台服务器和多个连接的客户端。一段时间后，当所有客户端都连接后，服务器应该向每个客户端发送一条消息，指示它们采取一些行动。我需要保证每个客户端将在**完全相同的时间**执行此操作。从理论上讲，如何做到这一点？我会遇到哪些实际并发症？我的目标平台是移动的。

我能想到的一种解决方案；

*   服务器主动且持续地跟踪每个客户端的往返延迟。如果这种延迟不会随时间变化太快，那么服务器应该能够补偿每个客户端的延迟并向每个客户端发送消息，以便它们**几乎**在同一时间开始执行。有没有更好的办法？

一个不相关的问题：[客户端和服务器端事件未同时触发](https://stackoverflow.com/questions/11593456/client-side-and-server-side-events-not-firing-simultaneously)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T17:46:28.600

它可以很容易地完成。

您不关心延迟，也不需要在客户端使用相同的机器时间。这里的关键是创建一个精确的约会。

由于客户端与服务器通信，反之亦然（尽管您没有说任何关于它的内容）。我可以给你以下解决方案：

当客户端连接到服务器时，它应该发送他们的本地时间。

当服务器认为是时候设置事件了。它应该向每个客户发送一个**约会事件，其中包含他们的****当地时间**。服务器可以计算这个。

然后，每个客户都可以通过设置一个计时器来知道他们何时**需要**做某事，直到他们的约会时间到来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T17:46:37.803

理论上可以，但在现实生活中不行。至少您应该添加一些**有效时隙**。所有动作都应在该**预定义的时间段内**，以使该**动作**有效。

所以基本上**“同一时刻”** = **“预定义的时隙”**。预定义的**时隙**可以是**接近同一时刻或实时的****任何值**。

# java - 如何将变量值放在另一个变量名中

> ID：14539622
> 
> 赞同：1
> 
> 时间：2013-01-26T17:36:19.867
> 
> 标签：java, android, variables

我正在研究 Eclipse ADT。我遇到了需要检查多个 EditText 字段的任务，因此我决定可以使用 FOR 循环以更少的编码检查所有这些字段。

例如我有：

```
EditText editTxt1 = (EditText) findViewById(R.id.editText1);
EditText editTxt2 = (EditText) findViewById(R.id.editText2);
EditText editTxt3 = (EditText) findViewById(R.id.editText3);
EditText editTxt4 = (EditText) findViewById(R.id.editText4);
... 
```

我想用 for 循环检查它们，如下所示：

```
int x;

for (x=3; x<=4; x++) {
    if (editTxt"x".getText().toString().equals("something")) do smthng...
} 
```

有没有可能，或者我必须经历很长的编码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T18:01:17.533

正如 Quoi 指出的那样，您可以通过反射来做到这一点，但这通常不是一个好主意。

将对象添加到列表或地图会更好：

```
List<EditText> list = new ArrayList<EditText>();
EditText editTxt1 = (EditText) findViewById(R.id.editText1);
list.add(editTxt1);
EditText editTxt2 = (EditText) findViewById(R.id.editText2);
list.add(editTxt2);
EditText editTxt3 = (EditText) findViewById(R.id.editText3);
list.add(editTxt1);
EditText editTxt4 = (EditText) findViewById(R.id.editText4); 
```

现在我们可以循环浏览列表并使用索引来检查正在调用的编辑文本。

```
int i = 0;
for (EditText e : list) {
    if(e.getText().toString().equals("something")) {
        System.out.println("editText" + i + " equals something");
        // do stuff
    }
    i++;
} 
```

您也可以使用 Map 来执行此操作，这将允许您针对对象使用名称值，以帮助您更好地参考来检查正在调用的对象。这需要更多的工作，但可能会使用

```
Map<EditText, String> map = new HashMap<EditText, String>();
EditText editTxt1 = (EditText) findViewById(R.id.editText1);
map.put(editTxt1, "editTxt1");
EditText editTxt2 = (EditText) findViewById(R.id.editText2);
list.add(editTxt2, "editTxt2");

for (Entry<String, String> e : map.entrySet()) {
    if(e.getValue().equals("something")) {
        System.out.println(e.getKey() + " was equal to somethihng");
    }
} 
```

[PS - 永远不要`==`用来比较字符串，它不会总是有效的！](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T18:45:32.117

您必须使用函数 getIdentifier(); 就像是：

```
int id = getResources().getIdentifier("editText" + x, "id", this.getPackageName());
EditText editTxt = (EditText) findViewById(id);

if (editTxt.getText().toString().equals("something")) do smthng... 
```

此外，使用类似的东西`editTxt`代替`editText`不是一个好主意：为了只保存一个字符，您在代码中添加了很多可能的混淆。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T19:11:55.660

我受到 Anton 的 Kovalenko 评论的启发，寻找他建议的解决方案。在我看来，这种方式更干净，编码更少。

除了此处列出的其他解决方案之外，我还将其共享。

```
EditText[] editTextArr;
editTextArr = new EditText[4];

editTextArr[0] = (EditText) findViewById(R.id.editText1);
editTextArr[1] = (EditText) findViewById(R.id.editText2);
editTextArr[2] = (EditText) findViewById(R.id.editText3);
editTextArr[3] = (EditText) findViewById(R.id.editText4); 
```

现在我们可以使用 FOR 循环检查 edittext 字段，如下所示：

```
int i;
for (i=0; i<12; i++) {
    if (editTextArr[i].getText().toString().equals("something")) do smthng....
} 
```

# java - 无法启动活动 ComponentInfo

> ID：14539623
> 
> 赞同：4
> 
> 时间：2013-01-26T17:36:22.067
> 
> 标签：java, android, eclipse, listview

我正在尝试将其作为我的主要活动来打开另一个活动（ListAtivity）。但是，当我单击按钮时应用程序崩溃并出现以下异常：

```
01-26 17:12:58.341: E/AndroidRuntime(790): FATAL EXCEPTION: main
01-26 17:12:58.341: E/AndroidRuntime(790): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.slideoutmenu/com.example.slideoutmenu.ListViewActivity}: android.os.NetworkOnMainThreadException
01-26 17:12:58.341: E/AndroidRuntime(790):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
01-26 17:12:58.341: E/AndroidRuntime(790):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
01-26 17:12:58.341: E/AndroidRuntime(790):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
01-26 17:12:58.341: E/AndroidRuntime(790):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
01-26 17:12:58.341: E/AndroidRuntime(790):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-26 17:12:58.341: E/AndroidRuntime(790):  at android.os.Looper.loop(Looper.java:137)
01-26 17:12:58.341: E/AndroidRuntime(790):  at android.app.ActivityThread.main(ActivityThread.java:5039)
01-26 17:12:58.341: E/AndroidRuntime(790):  at java.lang.reflect.Method.invokeNative(Native Method)
01-26 17:12:58.341: E/AndroidRuntime(790):  at java.lang.reflect.Method.invoke(Method.java:511)
01-26 17:12:58.341: E/AndroidRuntime(790):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-26 17:12:58.341: E/AndroidRuntime(790):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-26 17:12:58.341: E/AndroidRuntime(790):  at dalvik.system.NativeStart.main(Native Method)
01-26 17:12:58.341: E/AndroidRuntime(790): Caused by: android.os.NetworkOnMainThreadException
01-26 17:12:58.341: E/AndroidRuntime(790):  at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
01-26 17:12:58.341: E/AndroidRuntime(790):  at java.net.InetAddress.lookupHostByName(InetAddress.java:385)
01-26 17:12:58.341: E/AndroidRuntime(790):  at java.net.InetAddress.getAllByNameImpl(InetAddress.java:236)
01-26 17:12:58.341: E/AndroidRuntime(790):  at java.net.InetAddress.getAllByName(InetAddress.java:214)
01-26 17:12:58.341: E/AndroidRuntime(790):  at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:137)
01-26 17:12:58.341: E/AndroidRuntime(790):  at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
01-26 17:12:58.341: E/AndroidRuntime(790):  at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
01-26 17:12:58.341: E/AndroidRuntime(790):  at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
01-26 17:12:58.341: E/AndroidRuntime(790):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
01-26 17:12:58.341: E/AndroidRuntime(790):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
01-26 17:12:58.341: E/AndroidRuntime(790):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
01-26 17:12:58.341: E/AndroidRuntime(790):  at com.example.slideoutmenu.JSONParser.getJSONFromUrl(JSONParser.java:34)
01-26 17:12:58.341: E/AndroidRuntime(790):  at com.example.slideoutmenu.ListViewActivity.onCreate(ListViewActivity.java:57)
01-26 17:12:58.341: E/AndroidRuntime(790):  at android.app.Activity.performCreate(Activity.java:5104)
01-26 17:12:58.341: E/AndroidRuntime(790):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
01-26 17:12:58.341: E/AndroidRuntime(790):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144) 
```

以下是主要活动：

```
import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.util.DisplayMetrics;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.animation.Animation;
import android.view.animation.TranslateAnimation;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import android.widget.Button;
import android.widget.FrameLayout;
import android.widget.ImageView;
import android.widget.LinearLayout;
import android.widget.RelativeLayout;
import android.widget.TextView;

public class LayerStack extends Activity {

    //Declare
    private LinearLayout slidingPanel;
    private boolean isExpanded;
    private DisplayMetrics metrics; 
    private WebView webView;
    private RelativeLayout headerPanel;
    private RelativeLayout menuPanel;
    private int panelWidth;
    private ImageView menuViewButton;
    private Button button;
    private TextView menubutton1;

    FrameLayout.LayoutParams menuPanelParameters;
    FrameLayout.LayoutParams slidingPanelParameters;
    LinearLayout.LayoutParams headerPanelParameters ;
    LinearLayout.LayoutParams listViewParameters;

    @Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_layer_stack);

        //Initialize
        metrics = new DisplayMetrics();
        getWindowManager().getDefaultDisplay().getMetrics(metrics);
        panelWidth = (int) ((metrics.widthPixels)*0.75);

        headerPanel = (RelativeLayout) findViewById(R.id.header);
        headerPanelParameters = (LinearLayout.LayoutParams) headerPanel.getLayoutParams();
        headerPanelParameters.width = metrics.widthPixels;
        headerPanel.setLayoutParams(headerPanelParameters);

        menuPanel = (RelativeLayout) findViewById(R.id.menuPanel);
        menuPanelParameters = (FrameLayout.LayoutParams) menuPanel.getLayoutParams();
        menuPanelParameters.width = panelWidth;
        menuPanel.setLayoutParams(menuPanelParameters);

        slidingPanel = (LinearLayout) findViewById(R.id.slidingPanel);
        slidingPanelParameters = (FrameLayout.LayoutParams) slidingPanel.getLayoutParams();
        slidingPanelParameters.width = metrics.widthPixels;
        slidingPanel.setLayoutParams(slidingPanelParameters);

        menubutton1 = (TextView) findViewById(R.id.menu_item_1);
        menubutton1.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Intent i = new Intent(getApplicationContext(), ListViewActivity.class);
                startActivity(i);

            }
        });

        webView = (WebView) findViewById(R.id.webView1);
        webView.setWebViewClient(new WebViewClient() {
            @Override
            public boolean shouldOverrideUrlLoading(WebView view, String url){
                view.loadUrl(url);
                return true;
            }
        }); 
        webView.loadUrl("http://www.google.com.br");

        button = (Button) findViewById(R.id.button1);
        button.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Intent i = new Intent(getApplicationContext(), ListViewActivity.class);
                startActivity(i);               
            }
        });

        //Slide the Panel   
        menuViewButton = (ImageView) findViewById(R.id.menuViewButton);
        menuViewButton.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                if(!isExpanded){
                    isExpanded = true;                                              

                    //Expand
                    new ExpandAnimation(slidingPanel, panelWidth,
                    Animation.RELATIVE_TO_SELF, 0.0f,
                    Animation.RELATIVE_TO_SELF, 0.75f, 0, 0.0f, 0, 0.0f);                                       
                }else{
                    isExpanded = false;

                    //Collapse
                    new CollapseAnimation(slidingPanel,panelWidth,
                    TranslateAnimation.RELATIVE_TO_SELF, 0.75f,
                    TranslateAnimation.RELATIVE_TO_SELF, 0.0f, 0, 0.0f, 0, 0.0f);

                }              
            }
        });

    }       
} 
```

这里是我要打开的列表视图

```
package com.example.slideoutmenu;

import java.util.ArrayList;
import java.util.HashMap;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.ListActivity;

import android.content.Intent;

import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;

import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import android.widget.TextView;

public class ListViewActivity extends ListActivity {

    // url to make request
    private static String url = "http://api.androidhive.info/contacts/";

    // JSON Node names
    private static final String TAG_CONTACTS = "contacts";
    private static final String TAG_ID = "id";
    private static final String TAG_NAME = "name";
    private static final String TAG_EMAIL = "email";
    private static final String TAG_ADDRESS = "address";
    private static final String TAG_GENDER = "gender";
    private static final String TAG_PHONE = "phone";
    private static final String TAG_PHONE_MOBILE = "mobile";
    private static final String TAG_PHONE_HOME = "home";
    private static final String TAG_PHONE_OFFICE = "office";
    JSONArray contacts = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_layer_2);

        ArrayList<HashMap<String, String>> contactList = new ArrayList<HashMap<String, String>>();

        JSONParser jParser = new JSONParser();

        JSONObject json = jParser.getJSONFromUrl(url);

        try {
            contacts = json.getJSONArray(TAG_CONTACTS);

            for(int i = 0; i < contacts.length(); i++){
                JSONObject c = contacts.getJSONObject(i);

                String id = c.getString(TAG_ID);
                String name = c.getString(TAG_NAME);
                String email = c.getString(TAG_EMAIL);
                String address = c.getString(TAG_ADDRESS);
                String gender = c.getString(TAG_GENDER);

                JSONObject phone = c.getJSONObject(TAG_PHONE);
                String mobile = phone.getString(TAG_PHONE_MOBILE);
                String home = phone.getString(TAG_PHONE_HOME);
                String office = phone.getString(TAG_PHONE_OFFICE);

                HashMap<String, String> map = new HashMap<String, String>();

                map.put(TAG_ID, id);
                map.put(TAG_NAME, name);
                map.put(TAG_EMAIL, email);
                map.put(TAG_PHONE_MOBILE, mobile);

                contactList.add(map);
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }

        ListAdapter adapter = new SimpleAdapter(this, contactList,
                R.layout.list_item,
                new String[] { TAG_NAME, TAG_EMAIL, TAG_PHONE_MOBILE }, new int[] {
                        R.id.name, R.id.email, R.id.mobile });

        setListAdapter(adapter);

        ListView lv = getListView();

        lv.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {

                String name = ((TextView) view.findViewById(R.id.name)).getText().toString();
                String cost = ((TextView) view.findViewById(R.id.email)).getText().toString();
                String description = ((TextView) view.findViewById(R.id.mobile)).getText().toString();

                Intent in = new Intent(getApplicationContext(), SingleMenuItemActivity.class);
                in.putExtra(TAG_NAME, name);
                in.putExtra(TAG_EMAIL, cost);
                in.putExtra(TAG_PHONE_MOBILE, description);
                startActivity(in);

            }
        });

    }

} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-26T17:42:34.457

```
Caused by: android.os.NetworkOnMainThreadException 
```

[您无法](https://stackoverflow.com/q/13475198/1267661)在最近的 API 中对主线程执行网络操作（请参阅[NetworkOnMainThreadException](https://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)）。您需要将获取 JSON 对象的代码移动到另一个[Thread](https://developer.android.com/reference/java/lang/Thread.html)，可能使用[AsyncTask](https://developer.android.com/reference/android/os/AsyncTask.html)。

# c++ - C++ 中的内存管理模式

> ID：14539624
> 
> 赞同：8
> 
> 时间：2013-01-26T17:36:23.253
> 
> 标签：c++, design-patterns, memory-management

我认为我在正常（功能性）设计模式方面有相当多的经验，如[四本书的帮派中所述](http://www.amazon.co.uk/Design-patterns-elements-reusable-object-oriented/dp/0201633612)，我主要在 java 和 C# 中使用。在这些“托管”语言中，这几乎是您完成工作所需了解的所有内容。

但是，在 C++ 世界中，开发人员还可以控制如何分配、传递和删除所有对象。我了解这些原则（我在其他文本中阅读[了 Stroutrup](https://rads.stackoverflow.com/amzn/click/com/0201889544)），但我仍然需要付出很多努力才能确定哪种机制最适合给定场景 - 这就是与内存相关的设计模式组合有用的地方。

例如，昨天我必须创建一个 class `Results`，它是一些对象的容器和另一种对象的集合（在本例中为 std::vector）。所以有一些设计问题我无法真正回答：

1.  我应该通过值还是通过智能指针返回这个类？
2.  在类内部，向量和对象应该是普通成员，还是应该再次存储为智能指针？
3.  在向量中，我应该直接存储对象，还是再次存储指向它们的智能指针？
4.  我的Results 类上定义的getter 应该返回什么（即值、引用或智能指针）？

当然，智能指针很酷，但它们会造成语法混乱，我不相信对每个对象使用 malloc 是否是最佳方法。

我将不胜感激上述具体点的答案，但更希望获得一些关于内存相关设计模式的更长更一般的文本 - 这样我就可以解决我在星期一也会遇到的问题！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-26T18:03:04.103

你所有问题的答案最终都是一样的：**这取决于你是否需要引用语义或值语义**（需要考虑一些*警告）。*

如果您需要**引用语义**，这是在 Java 和 C# 等语言中默认使用`class`关键字声明的 UDT（用户定义的数据类型）所具有的，那么您将不得不使用智能指针。在这种情况下，您希望多个客户端为特定对象保存*安全别名，其中**安全*一词封装了这两个要求：

1.  避免悬空引用，这样您就不会尝试访问不再存在的对象；
2.  避免使用比对它们的所有引用都寿命更长的对象，这样您就不会泄漏内存。

这就是**智能指针**的作用。*如果您需要引用语义*（并且如果您的算法不会在需要共享所有权的情况下使引用计数的开销显着增加），*那么您应该使用智能指针*。

例如，当您希望同一个对象成为多个集合的一部分时，您确实需要引用语义。当您更新一个集合中的对象时，您希望所有其他集合中的同一对象的表示得到一致更新。在这种情况下，您将智能指针存储到这些集合中的对象。智能指针封装对象的*标识*而不是其值。

但是如果你不需要创建别名，那么*值语义*可能是你应该依赖的。当您声明一个具有自动存储功能的对象（即在堆栈上）时，这就是您在 C++ 中默认获得的内容。

需要考虑的一件事是 STL 集合存储*值*，因此如果您有`vector<T>`，那么的*副本*将`T`存储在您的`vector`. 总是假设您不需要引用语义，如果您的对象很大且复制成本很高，这可能会成为开销。

为了限制这种情况的可能性，C++11 提供了*移动*操作，当不再需要对象的旧副本时，它可以通过值有效地传输对象。

* * *

我现在将尝试使用上述概念更直接地**回答您的问题。**

1）*我应该通过值还是通过智能指针返回这个类？*

这取决于您是否需要引用语义。该函数对该对象有什么作用？该函数返回的对象是否应该由许多客户端共享？如果是这样，那么通过智能指针。如果没有，是否可以定义一个有效的移动操作（几乎总是如此）？如果是这样，那么按价值计算。如果没有，通过智能指针。

2）*在类内部，向量和对象应该是普通成员，还是应该再次存储为智能指针？*

最有可能作为普通成员，因为向量通常在概念上是对象的一部分，因此它们的生命周期与嵌入它们的对象的生命周期绑定。在这种情况下，您很少需要引用语义，但如果需要，请使用智能指针。

3）*在向量中，我应该直接存储对象，还是再次存储指向它们的智能指针？*

与第 1 点的答案相同）：您需要共享这些对象吗？您是否应该为这些对象存储别名？您是否希望在引用这些对象的代码的不同部分中看到对这些对象的更改？如果是这样，则使用共享指针。如果没有，是否可以有效地复制和/或移动这些对象？如果是这样（大部分时间），请存储值。如果没有，存储智能指针。

4)*我的Results 类上定义的getter 应该返回什么（即值、引用或智能指针）？*

与第 2 点相同的答案）：这取决于您打算如何处理返回的对象：您是否希望它们被代码的许多部分共享？如果是，则返回一个智能指针。如果它们应仅由一个部分独占，则按价值返回，除非移动/复制这些对象太昂贵或根本不允许（不太可能）。在这种情况下，返回一个智能指针。

* * *

作为旁注，请注意 C++ 中的智能指针比 Java/C# 引用要复杂一些：首先，您有两种主要的智能指针风格，具体取决于是否需要*共享所有权*( `shared_ptr`) 或*唯一所有权*( `unique_ptr`)。其次，您需要避免 的循环引用`shared_ptr`，这会创建使彼此保持活动状态的对象岛，即使您正在运行的代码无法访问它们。这就是*弱指针*( `weak_ptr`) 存在的原因。

这些概念自然地导致了管理对象生命周期或（更一般地）管理已用资源的**责任概念。**例如，您可能想了解 RAII 习语（Resource Acquisition Is Initialization），以及一般的异常处理（编写异常安全代码是这些技术存在的主要原因之一）。

# java - android 应用程序在手机上测试时停止

> ID：14539629
> 
> 赞同：0
> 
> 时间：2013-01-26T17:36:58.253
> 
> 标签：java, android, google-api

我已经在 Eclipse 中完成了我的应用程序，它在模拟器中运行良好 - 没有错误。当我在手机上尝试它时，它正常打开，两个微调器从数据库正常填充，但是当我单击一个在后台有一些谷歌地图操作的菜单按钮时，我收到以下消息：

```
"Unfortunately, XXXX has stopped." 
```

我现在能做什么？有没有什么程序可以调试或登录到手机上？我正在为 android 版本 2.3.3（Google api 的 API lvl 10）构建我的应用程序，我正在 android 4.0 上对其进行测试，这可能是个问题吗？

**编辑：** LogCat 显示 android 2.3.3 没有错误，我不知道如何在 android 4.0 模拟器上启动它 - 似乎它避免在 4.0 配置模拟器上运行 - 当我点击运行时，它总是打开一个新的 avd 4.0 模拟器机器没有别的了。应用程序没有启动，LogCat 也没有显示任何错误。

**EDIT2：** 我在 android 2.3.3 移动设备上对其进行了测试，效果很好。我认为问题出在不同的 Google 地图 API（版本 2 和新版本 3）中。如何使我的应用程序与新旧 Google 地图 api 兼容？有什么建议、链接、教程吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T17:44:16.170

如果您使用的是 eclipse，您可以通过转到 Window>>Show View>>Other>> 并在 Android 下选择 LogCat 来查看 LogCat 日志。日志将显示崩溃和相应的错误代码。

LogCat 信息可以在这里找到：http: [//developer.android.com/reference/android/util/Log.html](http://developer.android.com/reference/android/util/Log.html)

# model - XNA 中多网格模型的边界框

> ID：14539634
> 
> 赞同：0
> 
> 时间：2013-01-26T17:37:48.647
> 
> 标签：model, 3d, xna, collision-detection, mesh

我想在我的 XNA 项目中进行碰撞，我尝试使用 BoundingBoxes。我想与房子的墙壁发生碰撞，所以我使用这段代码为模型中的每个网格制作 BoundingBox：

```
public void CreateBB()
    {
        Model model = Game1.ModelRes[nazwaModelu];
        Matrix worldTransform = world;

        foreach (ModelMesh mesh in model.Meshes)
        {
            Vector3 min = new Vector3(float.MaxValue, float.MaxValue, float.MaxValue);
            Vector3 max = new Vector3(float.MinValue, float.MinValue, float.MinValue);
            foreach (ModelMeshPart meshPart in mesh.MeshParts)
            {
                int vertexStride = meshPart.VertexBuffer.VertexDeclaration.VertexStride;
                int vertexBufferSize = meshPart.NumVertices * vertexStride;

                float[] vertexData = new float[vertexBufferSize / sizeof(float)];
                meshPart.VertexBuffer.GetData<float>(vertexData);

                for (int i = 0; i < vertexBufferSize / sizeof(float); i += vertexStride / sizeof(float))
                {
                    Vector3 transformedPosition = Vector3.Transform(new Vector3(vertexData[i], vertexData[i + 1], vertexData[i + 2]), worldTransform);

                    min = Vector3.Min(min, transformedPosition);
                    max = Vector3.Max(max, transformedPosition);
                }
            }
            Game1.boxory.Add(new BoundingBox(min, max));
        }
    } 
```

我收到了 6 个相等的边界框。每个 BoundingBox 都是相同的，因此碰撞仅适用于一面墙。是这段代码的问题吗？（或者可能是导出具有许多网格的模型）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T18:52:19.767

> meshPart.VertexBuffer.GetData(vertexData);

所有 ModelMeshPart 都引用相同的 vertexBuffer，其中包含整个模型的数据，而不仅仅是那个 ModelMeshPart。每个 ModelMeshPart 在该缓冲区中都有自己的起始索引和它使用的顶点数。因此，每次调用时`GetData()`，都会从 VB 的开始（第零个元素/索引）而不是 ModelMeshPart 的开始索引填充浮点数组。

# android - webview.load（等待进度条）

> ID：14539637
> 
> 赞同：1
> 
> 时间：2013-01-26T17:37:56.167
> 
> 标签：android

我需要从用户单击“播放”开始使用进度条，直到音频准确播放。现在播放按钮暂停（1/2 秒）并听到音频。如何检查音频何时准确播放？

```
 webView1 = (WebView)findViewById(R.id.webView1);     
                webView1.getSettings().setJavaScriptEnabled(true);
                webView1.getSettings().setPluginsEnabled(true);
                webView1.getSettings().setAllowFileAccess(true);
                webView1.getSettings().setPluginState(PluginState.ON);
                webView1.getSettings().setJavaScriptEnabled(true);
                webView1.loadUrl("http://link.swf"); 
```

# joomla3.0 - 在覆盖的模块模板中显示类别图像

> ID：14539638
> 
> 赞同：0
> 
> 时间：2013-01-26T17:37:56.470
> 
> 标签：joomla3.0, joomla-module

我正在尝试覆盖模块中类别列表的默认布局模板

> mod_articles_categories

这样做的原因是能够显示与在每个类别的参数中设置的每个类别相关联的图像。

我发现显示这些图像的代码是

> json_decode($item->params)->image

但它不起作用，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T18:45:10.880

“官方”方式是在`foreach ($list as $item) :`

```
<?php
$params = new JRegistry();
$params->loadString($item->params);
$image = $params->get('image');
if ($image) : ?>
    <img src="<?php echo $image; ?>" />
<?php endif; ?> 
```

但是您的代码也应该可以工作。至少当我在本地测试它时是这样。我发布的代码将允许您为参数设置默认值。喜欢`$params->get('image', 'foo/bar.png');`。除此之外，它的作用大致相同。

# r - 以间隔格式重塑宽数据集

> ID：14539640
> 
> 赞同：6
> 
> 时间：2013-01-26T17:38:15.900
> 
> 标签：r, reshape

我正在研究一个“宽”数据集，现在我想使用一个特定的包（`-msSurv-`用于非参数多状态模型），它需要区间形式的数据。

我当前的数据集的特点是每个人都有一行：

```
dat <- read.table(text = "

   id    cohort   t0    s1     t1     s2      t2     s3    t3
    1      2      0      1     50      2      70     4     100
    2      1      0      2     15      3      100    0     0   

", header=TRUE) 
```

其中`cohort`是时间固定的协变量，并且`s1`-`s3`对应于随时间变化的协变量`s = 1,2,3,4`所占用的值（它们是个体随时间访问的不同状态）。日历时间由`t1`-定义，每个人的`t3`范围从`0`到。`100`

因此，例如，个人 1 保持状态 = 1 直到日历时间 = 50，然后他保持状态 = 2 直到时间 = 70，最后他保持状态 = 4 直到时间 100。

我想获得的是“间隔”形式的数据集，即：

```
id   cohort  t.start    t.stop   start.s   end.s          
1      2        0         50        1        2
1      2       50         70        2        4
1      2       70        100        4        4
2      1        0         15        2        3
2      1       15        100        3        3 
```

我希望这个例子足够清楚，否则请告诉我，我会尽力进一步澄清。

您将如何使这种重塑自动化？考虑到我有相对大量的（模拟）个体，大约 100 万。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-26T17:51:19.720

我想我明白。这行得通吗？

```
require(data.table)
dt <- data.table(dat, key=c("id", "cohort"))
dt.out <- dt[,  list(t.start=c(t0,t1,t2), t.stop=c(t1,t2,t3), 
                     start.s=c(s1,s2,s3), end.s=c(s2,s3,s3)), 
                     by = c("id", "cohort")]

#    id cohort t.start t.stop start.s end.s
# 1:  1      2       0     50       1     2
# 2:  1      2      50     70       2     4
# 3:  1      2      70    100       4     4
# 4:  2      1       0     15       2     3
# 5:  2      1      15    100       3     0
# 6:  2      1     100      0       0     0 
```

如果您显示的输出确实正确并且是您所需要的，那么您可以再获得两行（可能不是最好的方法，但它应该很快）

```
# remove rows where start.s and end.s are both 0
dt.out <- dt.out[, .SD[start.s > 0 | end.s > 0], by=1:nrow(dt.out)]
# replace end.s values with corresponding start.s values where end.s == 0
# it can be easily done with max(start.s, end.s) because end.s >= start.s ALWAYS
dt.out <- dt.out[, end.s := max(start.s, end.s), by=1:nrow(dt.out)]
dt.out[, nrow:=NULL]

> dt.out
#    id cohort t.start t.stop start.s end.s
# 1:  1      2       0     50       1     2
# 2:  1      2      50     70       2     4
# 3:  1      2      70    100       4     4
# 4:  2      1       0     15       2     3
# 5:  2      1      15    100       3     3 
```

# simulation - VHDL/ModelSim - 找不到实体

> ID：14539642
> 
> 赞同：1
> 
> 时间：2013-01-26T17:38:28.257
> 
> 标签：simulation, vhdl, fpga, modelsim

我正在尝试模拟我的 VHDL 文件，但遇到以下错误：

```
# ** Error: (vcom-11) Could not find work.lab1.
# 
# ** Error: (vcom-1195) Cannot find expanded name "work.lab1".
# 
# ** Error: Unknown expanded name.
# ** Error: VHDL Compiler exiting
# ** Error: c:/altera/12.1/modelsim_ase/win32aloem/vcom failed.
# Error in macro ./DE2_TOP_run_msim_rtl_vhdl.do line 8
# c:/altera/12.1/modelsim_ase/win32aloem/vcom failed.
#     while executing
# "vcom -93 -work work" 
```

在尝试仿真之前，我通过 Quartus II 和 ModelSim 编译器成功编译了代码。我的代码中确实有一个 lab1 实体和架构（我什至可以在 Quartus Project Navigator 的 Design Units 选项卡中看到它），所以我不太理解这个错误。有谁知道这是什么原因造成的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-26T17:47:34.013

当模拟器编译顶层（DE2_TOP）时，它想知道使用的组件是什么样的。因此，您应该在编译上层组件之前编译下层组件。

我大多数时候解决这个问题的方法是以正确的顺序编译所有组件，然后使用 Modelsim 的“vmake”（“vmake -work work > work.vmake”）命令从库中生成一个 makefile（工作） . 一旦你有了makefile，你就可以使用（make -f work.vmake）来执行它。所有文件将按顺序编译。

注意：Verilog 在这些方面要轻松得多......

# javascript - mysql 用 node.js 插入

> ID：14539643
> 
> 赞同：1
> 
> 时间：2013-01-26T17:38:33.800
> 
> 标签：javascript, mysql, node.js

我正在尝试使用 node.js，并且正在使用[node-mysql](https://github.com/felixge/node-mysql)来处理连接。

到目前为止，我正在关注 github 页面的基本用法，但由于某种原因，我什至无法获得最简单的功能连接。

```
var mysql = require('mysql');

var db_host = 'localhost';
var db_user = 'root';
var db_pass = 'pass';
var db_name = 'mydb';

var client = mysql.createConnection({
  host: db_host,
  user: db_user,
  password: db_pass,
  database: db_name
});

console.dir(client); // prints a whole bunch of connection object data

client.connect(function(err) {
  // connected! (unless `err` is set)
  console.dir('got here!');  // prints nothing!
  if (err) console.dir(err);  // prints nothing!
});

client.query('SELECT 1', function(err, rows) {
  console.log('here'); // print nothing!
  console.dir(err); // prints nothing!
  console.dir(rows); // prints nothing!
});

client.end();
process.exit(); 
```

我对节点很陌生，所以我确定我遗漏了一些明显的东西，但这似乎很简单，我什至无法以一种明显的方式打破它——它不会打印任何错误——基本上什么都没有发生.

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T17:43:30.533

Node 是异步的，所以它不会线性地执行它的动作。通过做这个：

```
client.connect //...
client.end // ... 
```

您正在启动初始连接过程，然后在有时间连接之前立即关闭客户端连接。您需要异步执行任务。

```
client.connect(function(err) {
  // connected! (unless `err` is set)
  console.dir('got here!');  // prints nothing!
  if (err)console.dir(err);  // prints nothing!

  client.query('SELECT 1', function(err, rows) {
    console.log('here'); // print nothing!
    console.dir(err); // prints nothing!
    console.dir(rows); // prints nothing!

    client.end();
    process.exit();
  });
}); 
```

# ruby-on-rails-3 - 在 Rails 上执行系统命令 - 不能在生产中工作

> ID：14539647
> 
> 赞同：0
> 
> 时间：2013-01-26T17:39:21.020
> 
> 标签：ruby-on-rails-3

在开发中，一切都很好。然而，在生产中，控制器中的这行代码不起作用：

```
 output = `mclines #{paramFileName} #{logFileName} #{outputFileName}` 
```

其中 mclines 是 ac 程序，其余是文件名。mclines 不在生产服务器上执行，但在我的笔记本电脑上执行。我不知道要解决什么问题。几个小时以来一直在尝试不同的事情，但事实是我很迷茫。在生产中启用 ssl，这是唯一的主要区别。

如果我在 shell 上执行命令，它就会被执行。当我说它没有被执行是因为它应该做的第一件事是在文件中打印一些信息，但它没有。服务器 - 作为我的笔记本电脑 - 正在运行 ubuntu，但我不知道哪些日志可能对阅读有用。systemlog 没有任何用处。

欢迎任何可以找到罪魁祸首的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T17:45:43.280

确保`mclines`在生产服务器上确实存在，并使用`mclines`可执行文件的完整路径，如

```
output = `/full/path/to/mclines #{paramFileName} #{logFileName} #{outputFileName}`. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T17:44:17.563

参考[这个](http://tech.natemurray.com/2007/03/ruby-shell-commands.html)

尝试将您的退出状态代码打印为：

```
$?.to_i 
```

命令后...

或者正如在此链接中指出的那样，您始终可以使用 popen3/popen4 更好地处理系统命令的输入/输出......

# php - PHP如何检查2条语句只发送一条消息之间没有重复

> ID：14539649
> 
> 赞同：0
> 
> 时间：2013-01-26T17:39:24.403
> 
> 标签：php, mysql

我一直在尝试为很久以前为论坛制作的个人资料墙脚本编写通知系统。我遇到的麻烦是，我试图只向符合 PM 标准的人发送一个 PM，但我在 MYSQL 中也有 2 个选择语句来查找应该被 PM 的人。

`log_statuses`我有 2个表可供选择......`log_status_replies`
我正在努力实现这一目标。我希望它通知所有只评论过一次的人！还有它所属的人物墙和在人物墙上写状态的人，但如果你写了它，则不是你自己。有点复杂，这就是为什么我努力做到这一点......

这是我的代码，用于搜索评论者并向他们发送 PM。如果他们也发表了评论，我将如何检查谁写了状态以及谁是墙，而不发送重复的 PM。

否则，他们会收到 PM，因为他们发表了评论，并且因为他们的状态/墙。我希望你明白这一点，有点难以解释。

这是我的源代码..我会喜欢任何可以提供帮助的人..

```
$query = $smcFunc['db_query']('', '
    SELECT id_member, id_poster
    FROM {db_prefix}log_statuses
    WHERE id_status = {int:id_status}',
    array(
        'id_status' => $status,
    )
);
   list($id_member,$id_poster) = $smcFunc['db_fetch_row']($query);

if ($id_poster != $ucomment || $id_member != $ucomment)
{   

    $query2 = $smcFunc['db_query']('', '
        SELECT DISTINCT id_member
        FROM {db_prefix}log_status_replies
        WHERE id_status = {int:id_status}',
        array(
            'id_status' => $status,
        )
    );

    while ($row = $smcFunc['db_fetch_assoc']($query2)) {
        if ($row['id_member'] != $ucomment)
        {
            $pm_recipients = array(
                'to' => array($row['id_member']),
                'bcc' => array(),
            );

            require_once($sourcedir . '/Subs-Post.php');

            $notify_body = $txt['status_body'] . '[iurl]' .$scripturl . '?action=profile;area=showstatus;s=' . $status . '[/iurl]';
            $notify_body = str_replace("%poster",$context['user']['name'],$notify_body);

            $pm_from = array(
                        'id' => $ucomment,
                        'username' => '',
                        'name' => '',
                    );

            sendpm($pm_recipients,$txt['status_subject'] , $notify_body,false,$pm_from);
        }       
    }           
} 
```

$id_member 是人墙，$id_poster 是在墙上发帖的人。$ucomment 是发帖的人..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T19:32:01.557

Solved.. I built an array from the while, then checked if the value exists from the comments table when checking the other table to see who to PM also..

```
 $id_comment = array();
            while ($row = $smcFunc['db_fetch_assoc']($query2)) {
            $id_comment[] = $row['id_member'];
    }

if (!in_array($id_poster, $id_comment) && !in_array($id_member, $id_comment)) {
     //Send PM
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-26T17:40:56.337

使用`UNION`：

例如：：

```
Select column1 from table1 where condition1=true
UNION
Select column1 from table1 where condition2=true 
```

结果集不会有重复的记录。

碰巧，如果您需要包括重复项在内的所有值，请使用`UNION ALL`

# javascript - 显示图像时出现AngularJS错误？

> ID：14539650
> 
> 赞同：13
> 
> 时间：2013-01-26T17:39:24.760
> 
> 标签：javascript, angularjs

我正在`<img src=`使用 AngularJS 填写标签，所以我的 html 中的网址是：

```
<img src='[[profile.image]]'> 
```

当我加载页面时，图像会显示，但 Javascript 控制台中也会出现错误：

```
GET [[profile.image]] 404 (NOT FOUND) 
```

所以浏览器试图在 Angular 插入值之前获取图像，对吗？然后当 Angular 设置浏览器再次获取的值时，这一次显示图像。

我怎样才能让 Angular 更早地执行此操作，或者让浏览器等待？我不喜欢暴露错误。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-26T17:41:16.873

Angular 有一个专门针对这种情况的指令：http://docs.angularjs.org/api/ng.directive: [ngSrc](http://docs.angularjs.org/api/ng.directive:ngSrc)

```
<img ng-src="{{profile.img}}" /> 
```

# jsf - JSF 按钮不向 bean 发送数据

> ID：14539660
> 
> 赞同：0
> 
> 时间：2013-01-26T17:40:44.500
> 
> 标签：jsf

我有一些 JSF 页面和一些 bean，因为它正在编辑当前元素，我使用更新，否则我使用保存方法。

我试图调试并认为按钮上的方法永远不会执行

这是我的 JSF 页面：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:c="http://java.sun.com/jsp/jstl/core">
    <h:head>
        <title>Manage panel</title>
    </h:head>
    <h:body>
        <h3>Add/edit patient</h3>
        <h:form>           
            <c:set var="patient" value="#{manageBean.patient}" />
            <c:choose>
                <c:when test="#{patient!=null}">
                    <p:panel id="panel1" header="Patient" style="margin-bottom:10px;">  
                        <h:panelGrid columns="2">  
                            <h:outputLabel for="name" value="First  name" />  
                            <p:inputText id="firstName" required="true" value="#{patient.firstName}" />  

                            <h:outputLabel for="name" value="Family  name" />  
                            <p:inputText id="familyName" required="true" value="#{patient.familyName}" />  

                            <h:outputLabel for="name" value="Sex" />  
                            <p:selectOneMenu id="sex" value="#{patient.sex}">  
                                <f:selectItems value="#{manageBean.sex}"/>
                            </p:selectOneMenu>  

                            <h:outputLabel for="name" value="Birthday date" />  
                            <p:calendar value="#{patient.birthdayDate}" mode="inline" id="birthdayDate"/>  

                            <h:outputLabel for="name" value="Nationality" />  
                            <p:selectOneMenu id="nationality" value="#{patient.nationality}">  
                                <f:selectItems value="#{manageBean.nationality}"/>
                            </p:selectOneMenu>  

                            <h:outputLabel for="name" value="Adress" />  
                            <p:inputText id="adress" required="true" value="#{patient.adress}" />  

                            <h:outputLabel for="name" value="Phone number" />  
                            <p:inputMask id="phoneNumber" required="true" value="#{patient.phoneNumber}" mask="(999) 999-9999"/>
                        </h:panelGrid>  
                    </p:panel>  
                    <p:commandButton value="Update" type="submit" action="#{manageBean.update(patient)}" />  
                </c:when>   
                <c:otherwise>
                    <p:panel id="panel2" header="Patient" style="margin-bottom:10px;">  
                        <h:panelGrid columns="2">  
                            <h:outputLabel for="name" value="First  name" />  
                            <p:inputText id="firstName" required="true" value="" />  

                            <h:outputLabel for="name" value="Family  name" />  
                            <p:inputText id="familyName" required="true" value="" />  

                            <h:outputLabel for="name" value="Sex" />  
                            <p:selectOneMenu id="sex" value="">  
                                <f:selectItems value="#{manageBean.sex}"/>
                            </p:selectOneMenu>  

                            <h:outputLabel for="name" value="Birthday date" />  
                            <p:calendar mode="inline" id="birthdayDate"/>  

                            <h:outputLabel for="name" value="Nationality" />  
                            <p:selectOneMenu id="nationality" value="">  
                                <f:selectItems value="#{manageBean.nationality}"/>
                            </p:selectOneMenu>  

                            <h:outputLabel for="name" value="Adress" />  
                            <p:inputText id="adress" required="true" value="" />  

                            <h:outputLabel for="name" value="Phone number" />  
                            <p:inputMask id="phoneNumber" required="true" value="" mask="(999) 999-9999"/>
                        </h:panelGrid>  
                    </p:panel>  
                    <p:commandButton value="Save" action="#{manageBean.save(firstName, familyName, sex, birthdayDate, nationality, adress, phoneNumber)}" />  
                </c:otherwise>
            </c:choose>
        </h:form>      
    </h:body>
</html> 
```

这是我的bean方法：

```
 public String update(Patient patient) {       
        Session session = factory.openSession();
        Transaction tx = null;
        try {
            tx = session.beginTransaction();
            session.update(patient);
            tx.commit();
        } catch (HibernateException ex) {
            if (tx != null) {
                tx.rollback();
            }
            ex.printStackTrace();
        } finally {
            session.close();
        }
        return "go_home";
    }

    public String save(String fitstName, String familyName, Sex sex, Date birthdayDate, Nationality nationallity, String adress, String phoneNumber){
        Session session = factory.openSession();
        Transaction tx = null;
        try {
            tx = session.beginTransaction();
            Patient patient = new Patient();
            patient.setFirstName(fitstName);
            patient.setFamilyName(familyName);
            patient.setSex(sex);
            patient.setBirthdayDate(birthdayDate);
            patient.setNationality(nationallity);
            patient.setAdress(adress);
            patient.setPhoneNumber(phoneNumber);
            session.save(patient);            
            tx.commit();
        } catch (HibernateException ex) {
            if (tx != null) {
                tx.rollback();
            }
            ex.printStackTrace();
        } finally {
            session.close();
        }
        return "go_home";
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T17:56:42.300

一旦你在你的输入标签中给出了 value 属性，它就会直接将给定的值绑定到 java 类。在您的 java 类中创建类变量并绑定输入标签。EX：- 在您的 bean 类中创建变量，例如

```
private String firstName 
```

并创建 getter 和 setter 方法

```
<f:view>

    <h3>Add/edit patient</h3>

    <h:form>           
                <p:panel id="panel1" header="Patient" style="margin-bottom:10px;">  

                    <h:panelGrid columns="2">
                        <h:outputLabel for="name" value="First  name" />
                        <p:inputText id="firstName" required="true" value="#{manageBean.firstName}" />

                        <h:outputLabel for="name" value="Family  name" />  
                        <p:inputText id="familyName" required="true" value="#{manageBean.familyName}" />  

                        <h:outputLabel for="name" value="Sex" />  
                        <p:selectOneMenu id="sex" value="#{manageBean.sex}">  
                            <f:selectItems value="#{manageBean.sex}"/>
                        </p:selectOneMenu>  

                        <h:outputLabel for="name" value="Birthday date" />  
                        <p:calendar value="#{manageBean.birthdayDate}" mode="inline" id="birthdayDate"/>  

                        <h:outputLabel for="name" value="Nationality" />  
                        <p:selectOneMenu id="nationality" value="#{manageBean.nationality}">  
                            <f:selectItems value="#{manageBean.nationality}"/>
                        </p:selectOneMenu>  

                        <h:outputLabel for="name" value="Adress" />  
                        <p:inputText id="adress" required="true" value="#{manageBean.adress}" />  

                        <h:outputLabel for="name" value="Phone number" />  
                        <p:inputMask id="phoneNumber" required="true" value="#{manageBean.phoneNumber}" mask="(999) 999-9999"/>
                    </h:panelGrid>  
                </p:panel>  
                <p:commandButton value="Update" type="submit" action="#{manageBean.update}" />  

                    </h:form> 
```

创建一个新的 jsp 页面并将这些代码复制粘贴到 body 标记中。在您的 java 类中创建变量和 getter setter 方法。更新应该是一个返回字符串的方法。

# ios - 更快地启动 iOS 应用程序

> ID：14539665
> 
> 赞同：5
> 
> 时间：2013-01-26T17:41:33.757
> 
> 标签：ios, performance, ios6, iphone-4

我发现一些 iOS 应用程序的启动速度非常快（例如 YouTube-来自 google、Skype、iTunes）。

我创建了一个空应用程序（使用标准选项卡式应用程序模板），我根本没有更改任何代码，只是添加了启动图像。当我测试时（尝试同时对开发人员和 Ad-Hoc 配置文件进行签名以检查是否有任何差异），它的启动速度不如上述应用程序。

当我点击设备上的应用程序图标时，应用程序图标会变暗约 0.2-0.5 秒，然后开始显示启动画面。

我的问题是如何让我的应用程序启动得非常快，有没有什么技巧可以快速显示启动图像？（我想知道我的空应用程序如何启动比上述应用程序慢？）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T17:51:16.320

我认为你也可能中了一个诡计：至少对于 iTunes 应用程序，Apple 正在用运行时看起来非常像应用程序的图像覆盖启动图像，这会产生应用程序立即加载的错觉。试试看：

启动 iTunes（或“音乐”）并开始播放，然后执行其他操作以使系统尽可能多地交换进程（例如，浏览一些繁重的网站）。然后重新启动 iTunes 并立即尝试暂停音频。在我的 iPhone 4 上，控件赶上之前大约需要 3 秒：位置指示器会跳到正确的位置，在此之前，“播放”按钮处于非活动状态 - 您无法暂停音频。您看到的启动画面旨在让您认为应用程序正在立即启动，即使它确实需要几秒钟才能启动。

我还注意到 iOS 版 Chrome 也在做同样的事情。我实际上不喜欢这个设计决定，因为它表明应用程序在您可以对其进行任何操作之前就已准备就绪。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T18:21:54.433

> 我根本没有更改任何代码只是添加了启动图像

加载图像不是为了显示启动图像，它们是为了显示应用程序界面的静态版本，以产生应用程序加载速度比实际速度更快的错觉。

Apple 在 HIG 中特别警告了飞溅图像。

停止滥用加载图像来显示启动图像，开始正确使用它们，您的应用程序看起来好像加载得更快了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T17:59:07.527

链接到尽可能少的框架，我们在 WWDC 上进行了尝试，链接到许多框架甚至在调用 main() 方法之前就会产生明显的延迟！

无论您的代码本身有多快！

# vb.net - 打开 FontDialog 并突出显示特定字体

> ID：14539669
> 
> 赞同：0
> 
> 时间：2013-01-26T17:42:18.990
> 
> 标签：vb.net, winforms, visual-studio

如果我打开标准保存文件对话框或打开文件对话框，我可以为文件夹和文件类型设置默认值。
有什么方法可以使用当前选择的字体调用字体对话框，它打开的高度是我的选择之一？换句话说，如果出于某种原因我希望它以 Lucinda Calligraphy 作为突出显示的字体打开，那么这就是它作为当前选择打开的内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T17:49:12.567

```
Private Sub button1_Click(sender As Object, e As System.EventArgs)
      Dim fontDialog1 As FontDialog = New FontDialog;
      fontDialog1.Font = new Font("Lucida Calligraphy", 10.0F)

      If fontDialog1.ShowDialog() <> DialogResult.Cancel Then
          textBox1.Font = fontDialog1.Font
          textBox1.ForeColor = fontDialog1.Color
      End If
  End Sub 'button1_Click 
```

# linux - 将文件行排列成表格形式

> ID：14539678
> 
> 赞同：0
> 
> 时间：2013-01-26T17:43:11.927
> 
> 标签：linux, shell, unix, command-line

这是我文件中的示例行：

```
42001232  2011-07-01  51  100001  0  100002  0  2011-07-02  51  100003  0  100004  0 
```

我如何安排它看起来像这样

```
42001232  2011-07-01  51  100001  0
42001232  2011-07-01  51  100002  0
42001232  2011-07-02  51  100003  0
42001232  2011-07-02  51  100004  0 
```

除了第一列之外，所有列都以日期开头重复。我需要以表格形式组织它。另外，这里的分隔符是TAB。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T08:16:58.007

这是使用`awk`. 像这样运行：

```
awk -f script.awk file 
```

内容`script.awk`：

```
BEGIN {
    FS=OFS="\t"
}
{
    for(i=2;i<=NF;i++) {
        if ($i ~ /^[0-9]{4}-[0-9]{2}-[0-9]{2}$/) {
            for (j=i+2;j<=NF;j+=2) {
                if ($j ~ /^[0-9]{4}-[0-9]{2}-[0-9]{2}$/) {
                    break
                }
                else {
                    print $1, $i, $(i+1), $j, $(j+1)
                }
            }
        }
    }
} 
```

结果：

```
42001232    2011-07-01  51  100001  0
42001232    2011-07-01  51  100002  0
42001232    2011-07-02  51  100003  0
42001232    2011-07-02  51  100004  0 
```

或者，这是单线：

```
awk 'BEGIN { FS=OFS="\t" } { for(i=2;i<=NF;i++) if ($i ~ /^[0-9]{4}-[0-9]{2}-[0-9]{2}$/) for (j=i+2;j<=NF;j+=2) if ($j ~ /^[0-9]{4}-[0-9]{2}-[0-9]{2}$/) break; else print $1, $i, $(i+1), $j, $(j+1) }' file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T06:59:39.503

这适用于给定的数据：

```
#!/usr/bin/env perl
use strict;
use warnings;
use English qw( -no_match_vars );

$OFS = qq"\t";

while (<>)
{
    chomp;
    my(@fields) = split /\s+/, $_;
    my $col1 = shift @fields;
    my $date = shift @fields;
    my $col3 = shift @fields;
    while (scalar(@fields) > 1)
    {
        if ($fields[0] =~ /^\d{4}-\d\d-\d\d$/)
        {
            $date = shift @fields;
            $col3 = shift @fields;
            next;
        }
        else
        {
            my $col4 = shift @fields;
            my $col5 = shift @fields;
            print $col1, $date, $col3, $col4, "$col5\n";
        }
    }
    print STDERR "oops - debris $fields[0] left over\n" if (scalar(@fields) != 0);
} 
```

我得到的输出是：

```
42001232        2011-07-01      51      100001  0
42001232        2011-07-01      51      100002  0
42001232        2011-07-02      51      100003  0
42001232        2011-07-02      51      100004  0 
```

这是一个必须解析的非常可怕的格式。例如，我不得不对处理重复的方式做出一些假设，以便日期之后的列固定到下一个日期。

# xaml - Windows 8 - 单击项目内的按钮时，GridView 不返回 SelectedItem

> ID：14539681
> 
> 赞同：1
> 
> 时间：2013-01-26T17:43:38.093
> 
> 标签：xaml, gridview, windows-8

我正在开发一个 Win8 Metro 应用程序。我正在使用 GridView。在 GridView 的 ItemTemplate 中，我有 3 个按钮（Button1、Button2、Button3）。因此，在我的屏幕上，如果我一次有 5 个 GridView 项，那么我将看到 5x3 = 15 个按钮。

问题是，如果单击这些按钮中的任何一个，我将无法跟踪父 GridView 项。

在 GridView 的属性中，有“SelectedIndex”（或 SelectedItem）属性。但是，它的值是在单击 GridView 项目时设置的（而不是在单击 GridViewItem 内的按钮时）。因此，单击按钮时，SelectedIndex 保持为 -1。

如何在 ButtonClick 上找出谁是此按钮的父项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T14:30:11.023

通过阅读您在评论中的回复，您似乎想要获取对基础数据项而不是网格项本身的引用。在这种情况下，请在您的按钮单击处理程序中执行以下操作...

```
Void Button_Click(sender, e)
{
    var btn = (Button)sender;
    var dc = btn.DataContext as MyBoundType;  // don't forget to check for null!
    var itemId = dc.Id; // assuming your object has an Id field
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T22:36:00.660

将按钮的绑定[`CommandParameter`](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.ui.xaml.controls.primitives.buttonbase.commandparameter.aspx)到父项，如下所示：

```
<Button 
    Command="{Binding RemoveCommand}"
    CommandParameter="{Binding RelativeSource=
        {RelativeSource FindAncestor, AncestorType={x:Type UserControl}}}" 
    /> 
```

# .net - 可选锁的延续是否受竞争条件的影响？

> ID：14539687
> 
> 赞同：1
> 
> 时间：2013-01-26T17:44:08.690
> 
> 标签：.net, concurrency, task-parallel-library

我刚刚开始使用任务并行库。所讨论的任务是以尽可能并行的方式处理结果，但要保持结果的顺序。

此外，可以随时添加一个项目，直到设置标志表示不再接受更多项目。

此外，一旦完成所有结果，将需要通知一些客户（只有在没有更多项目被接受时才会发生这种情况）。

我想出了下面的简化示例，它似乎在我的所有测试中都运行良好。

```
class Program
{
    static void Main(string[] args)
    {
        for (int i = 1; i < random.Next(5, 21); ++i)
        {
            AddItem(i);
        }

        finishedAddingItems = true;

        completion.Task.Wait();
        Console.WriteLine("Finished");
        Console.ReadKey();
    }

    static TaskCompletionSource<bool> completion = 
                            new TaskCompletionSource<bool>();

    static bool finishedAddingItems = false;

    static Random random = new Random();

    class QueueResult
    {
        public int data;
        public int IsFinished;
    }

    static ConcurrentQueue<QueueResult> queue = 
                           new ConcurrentQueue<QueueResult>();

    static object orderingLockObject = new object();

    static void AddItem(int i)
    {
        var queueItem = new QueueResult { data = i, IsFinished = 0 };

        queue.Enqueue(queueItem);

        Task.Factory
            .StartNew(() => 
            { 
                for (int busy = 0; 
                     busy <= random.Next(9000000, 90000000); 
                     ++busy) 
                { }; 
                Interlocked.Increment(ref queueItem.IsFinished); 
            })
            .ContinueWith(t =>
            {
                QueueResult result;

                //the if check outside the lock is to avoid tying up resources
                //needlessly, since only one continuation can actually process
                //the queue at a time.
                if (queue.TryPeek(out result) 
                    && result.IsFinished == 1)
                {
                    lock (orderingLockObject)
                    {
                        while (queue.TryPeek(out result) 
                               && result.IsFinished == 1)
                        {
                            Console.WriteLine(result.data);
                            queue.TryDequeue(out result);
                        }

                        if (finishedAddingItems && queue.Count == 0)
                        {
                            completion.SetResult(true);
                        }
                    }
                }
            });
    }
} 
```

但是，我无法说服自己是否存在潜在的竞争条件，即项目可能无法得到处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T18:57:18.657

我认为您的代码可能无法正常工作，因为您没有声明`IsFinished`为`volatile`并且您直接在锁之外访问它。无论如何，正确使用[双重检查锁定](http://en.wikipedia.org/wiki/Double-checked_locking)是很困难的，所以除非你真的必须这样做，否则你不应该这样做。

此外，您的代码也很混乱（将所有内容都放在一个类中，使用`int`而不是`bool`，不必要的`ContinueWith()`，......）并且至少包含一个线程安全问题（`Random`不是线程安全的）。

因此，我建议您了解 TPL 更高级的部分。在您的情况下，PLINQ 听起来像是正确的解决方案：

```
var source = Enumerable.Range(1, random.Next(5, 21)); // or some other collection

var results = source.AsParallel()
                    .AsOrdered()
                    .WithMergeOptions(ParallelMergeOptions.NotBuffered)
                    .Select(i => /* perform your work here */);

foreach (int i in results)
    Console.WriteLine(i); 
```

# c# - 如何对mapreduce结果进行排序？

> ID：14539688
> 
> 赞同：0
> 
> 时间：2013-01-26T17:44:14.573
> 
> 标签：c#, mongodb, mapreduce

我在 C# 中编写了一个从 mongoDB 检索推文的方法，并希望按转推数对作者进行计数和排序。

现在，该方法已经执行了 map 和 reduce 并通过以下方式返回未排序的结果：

```
public void RetweetsCount()
        {
            string wordMap = @"function wordMap() {

                            var usernameOrigin = this.text.match(/\brt\s*@(\w+)/i);

                            if (usernameOrigin === null) {
                                return;
                            }

                            // loop every word in the document
                            emit(usernameOrigin[1], { count : 1 });
                        }";

            string wordReduce = @"function wordReduce(key, values) {
                            var total = 0;
                            for (var i = 0; i < values.length; i++) {
                                total += values[i].count;
                            }
                            return { count : total };
                        }";

            var options = new MapReduceOptionsBuilder();
            options.SetOutput(MapReduceOutput.Inline);

            var results = collection.MapReduce(wordMap, wordReduce, options);

            foreach (var result in results.GetResults())
            {
                Console.WriteLine(result.ToJson());
            }
        } 
```

有谁知道如何通过递减计数值（转推数）对结果进行排序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T13:09:31.527

这是解决方案。从 MapReduce 检索结果后，我首先将 IEnumerable 转换为列表，然后按以下方式对列表进行排序：

```
 var results = collection.MapReduce(wordMap, wordReduce, options);
            IEnumerable<BsonDocument> resultList = results.GetResults();
            List<BsonDocument> orderedList = resultList.ToList().OrderByDescending(x => x[1]).ToList(); 
```

# python - Python - 异常：连接到设备端口 1999 失败

> ID：14539695
> 
> 赞同：-1
> 
> 时间：2013-01-26T17:44:54.693
> 
> 标签：python, ios, shell, unix, posix

我正在阅读[The iOS Hacker's Handbook](https://rads.stackoverflow.com/amzn/click/com/1118204123)并同时学习 python。我设法在越狱的 iPhone 4 上构建、加载和启动我的自定义 ramdisk (iOS 5.1.1 (9A405))。我已连接设备，并运行[脚本](http://code.google.com/p/iphone-dataprotection/source/browse/usbmuxd-python-client/tcprelay.py?r=1eae3bba5cd2713a372f6eff64e2778ba9d864e4)将本地端口 2222 和 1999 转发到远程端口 22 和分别是 1999 年（我想我几乎明白那里发生了什么）。

本书的下一步是运行暴力攻击来破解锁屏（我将其设置为 0000，以使生活相对容易）。但是当我运行脚本时[`python demo_bruteforce.py`](http://code.google.com/p/iphone-dataprotection/source/browse/python_scripts/demo_bruteforce.py?r=a51cb728fba0819419e612c99c211b5a5e52a014)，我得到以下输出：

```
Thomas-MacBook:python_scripts thomas$ python demo_bruteforce.py
Connecting to device : b5c981d7e83707d80c1240e1969428c85e572694
Traceback (most recent call last):
  File "demo_bruteforce.py", line 76, in <module>
    bf_system()
  File "demo_bruteforce.py", line 19, in bf_system
    client = RamdiskToolClient()
  File "/Users/thomas/Downloads/iphone-dataprotection/python_scripts/util/ramdiskclient.py", line 47, in __init__
    self.connect(udid)
  File "/Users/thomas/Downloads/iphone-dataprotection/python_scripts/util/ramdiskclient.py", line 70, in connect
    raise Exception("Connexion to device port %d failed" % self.port)
Exception: Connexion to device port 1999 failed 
```

整个项目可以在[这里](http://code.google.com/p/iphone-dataprotection/)找到。正如我所提到的，我是 Python 新手，最近才将它安装在我的笔记本电脑上。可能缺少一些模块，但我不确定如何从这个输出中找到它。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T18:00:10.297

此函数内部的连接失败。它不会在任何导入上失败，因此您似乎没有缺少任何必需的模块。

```
 def connect(self, udid=None):
            mux = usbmux.USBMux()
            mux.process(1.0)
            if not mux.devices:
                    print "Waiting for iOS device"
                    while not mux.devices:
                            mux.process(1.0)
            if not mux.devices:
                    print "No device found"
                    return
            dev = mux.devices[0]
            print "Connecting to device : " + dev.serial
            try:
                    self.s = mux.connect(dev, self.port)
            except:
                    raise Exception("Connexion to device port %d failed" % self.port) 
```

问题是最后一行吞下了实际的异常消息并引发了更通用的异常消息。如果我正在调试这个问题，我会打开一个 Python shell 并手动遍历这个函数。然后至少我可以看到正在引发的真正异常并且可能有机会修复它。

# javascript - 如何使用 jquery 检测 url 路径并更改 css

> ID：14539697
> 
> 赞同：2
> 
> 时间：2013-01-26T17:44:59.477
> 
> 标签：javascript, jquery, css, tumblr

所以我正在研究一个 Tumblr 主题，我希望 tumblr 的索引（或主页）页面显示一个我不希望用户在以下索引页面上看到的 div。

例如，我希望**“myblog.tumblr.com”**有一个高大的splash div（我们称之为给它一个id“homesplash”），而**“myblog.tumblr.com/page/”**下的任何页面都隐藏这个 div 以便用户可以首先看到帖子。所以像**"myblog.tumblr.com/page/2"**、**"myblog.tumblr.com/page/3"**等等。

我如何用 jquery 做到这一点？如何检测包含**“myblog.tumblr.com/page/”**的任何 url并隐藏该 div？欣赏任何见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T17:47:11.940

不使用 jQuery 本身，但你可以使用`window.location.pathname`.

```
if (window.location.pathname.indexOf('page') > 0) {
   $("#splash").hide();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T17:46:30.327

JavaScript 有答案。然后使用 jQuery 将结果挂钩到一些逻辑中。更多[细节在这里](https://stackoverflow.com/questions/406192/how-to-get-the-current-url-in-jquery)。

```
var pathname = window.location.pathname; 
```

# scala - scala 类型不匹配错误，需要 GenTraversableOnce[?]

> ID：14539701
> 
> 赞同：11
> 
> 时间：2013-01-26T17:45:19.713
> 
> 标签：scala

为什么这段代码会导致编译错误

> 类型不匹配; 发现：（Int，Char）需要：scala.collection.GenTraversableOnce[?]

?

```
val n = Map(1 -> 'a', 4 -> 'a')
def f(i: Int, c: Char) = (i -> c) 
n.flatMap (e => f(e._1, e._2)) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-26T17:51:01.050

改用`map()`：

```
n.map (e => f(e._1, e._2)) 
```

`flatMap()`假设您正在返回值的集合而不是单个元素。因此，这些将起作用：

```
n.flatMap (e => List(f(e._1, e._2))
n.flatMap (e => List(f(e._1, e._2), f(e._1 * 10, e._2))) 
```

第二个例子很有趣。对于每个 [key, value] 对，我们返回两个对，然后将它们合并，因此结果是：

```
Map(1 -> a, 10 -> a, 4 -> a, 40 -> a) 
```

# c# - 实体框架代码生成策略 - Nullable varchar vs. Non-Nullable varchar

> ID：14539702
> 
> 赞同：2
> 
> 时间：2013-01-26T17:45:27.057
> 
> 标签：c#, visual-studio-2012, entity-framework-5

使用 EF 5.0.0、VS 2012 和 .NET 4.5，当我从现有 SQL Server 2012 数据库添加新的 ADO.NET 实体数据模型时，生成的代码不会区分可空和不可空 varchar。例如，TTITLE 是不可为空的，但 CITY 在我的数据库中是可空的，但它们最终会像在生成的代码中一样 - 这反过来又会产生验证问题。TITLE 属性不应该`[Required]`默认由 EF 的属性修饰吗？它确实生成了可空和不可空 int 之间的准确区分。

```
public partial class AWARD
{
    public int ID { get; set; }
    public int PERSON_ID { get; set; }
    public string TITLE { get; set; }
    public string CITY { get; set; }
    public Nullable<int> STATE_PROVINCE { get; set; }
    public Nullable<int> COUNTRY { get; set; }
    public string ORGANIZATION { get; set; }
    public int YEAR { get; set; }
    public Nullable<int> MONTH { get; set; }

    public virtual PERSON PERSON { get; set; }
    public virtual V_COUNTRY V_COUNTRY { get; set; }
    public virtual V_USA_STATE V_USA_STATE { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T18:14:21.650

Apparently, the default code-generation strategy for Entity Framework does not generate Data Annotation attributes like `Required`. However, you can use a custom T4 template in conjunction with your entity model in order to do this. See the related answer here: [Where are the Entity Framework t4 templates for Data Annotations?](https://stackoverflow.com/questions/2748619/where-are-the-entity-framework-t4-templates-for-data-annotations)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T20:04:53.027

C# 有值类型和引用类型。String 是一种引用类型，本质上已经可以为 null。另一方面，Int 是一种值类型，没有 null 的概念。所以 C# 引入了一个可以为空的类型结构，它包装了值类型，System.Nullable。换句话说，如果您有一个可能需要为 null 的 int，则需要将其声明为`Nullable<int>`（或`int?`简称为）。但是，由于 String 是一种引用类型并且已经可以为 null，因此没有理由声明`Nullable<string>`.

这不是试图将类型与您的数据库空约束匹配的问题；如果需要，这只是允许属性为空的问题。

Luksan 的回答已经解决了缺少 [Required] 注释的问题；我只是想澄清为什么 EF 似乎区分整数而不是字符串的空值。

# android - 更改 tabhost 上字符串的文本大小

> ID：14539706
> 
> 赞同：1
> 
> 时间：2013-01-26T17:45:53.043
> 
> 标签：android, android-tabhost, text-size

我想更改 uyari_str 的文本大小，但我不能。我的代码是：

```
tabHost.addTab(spec);     
    view = new MyView(this, R.drawable.res_tab_uyar);

    spec = tabHost.newTabSpec("uyar").setIndicator(buildIndicator(R.string.uyari_str)).setContent(new TabHost.TabContentFactory(){

        @Override
        public View createTabContent(String tag) {
            return tv;
        }       
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-07T10:42:02.390

例如，您的 tabhost 在相对布局中包含 4 个项目。

毕竟，您可以使用`getTabWidget().getTabCount()`来获取标签计数..

```
for (int i = 0; i < 4; i++) {
    RelativeLayout rl = (RelativeLayout) tabHost.getTabWidget().getChildAt(i);
    TextView textView = (TextView) rl.getChildAt(1);

    textView.setTextSize(15); // for example.
    } 
```

您可以使用此代码或类似的东西。:)

此致。

# ruby-on-rails-3 - Rails 3 中的自定义进程栏

> ID：14539707
> 
> 赞同：0
> 
> 时间：2013-01-26T17:46:01.520
> 
> 标签：ruby-on-rails-3, progress-bar

我需要实现一个自定义流程栏（不是进度条）来通过多步骤客户端项目序列映射进度。它必须是图形的，而不仅仅是面包屑路径，类似于以下内容：

```
--- O --- O --- O --- O --- O

  label label label label label 
```

上面的每个`0`代表图形按钮，它们将具有单独的状态，`:hover`并`:active`成为流程每个页面的链接，以便客户端可以跳过而不需要遵循线性流程。

项目控制器应该处理页面视图，第一个由静态页面控制器处理`'/start_project'`。这是因为客户需要`/start_project`在他们实际在数据库中创建记录之前接受页面上的条款和条件。

我需要知道是否有办法在 Rails 3 中实现这样的流程栏，沿途的每一步都会对其各自的状态做出反应。例如，第一步，INTRO，应该`/projects/new_intro.html.erb`动态映射到页面。每个页面都会有一个`form_for`元素填充数据库的另一部分。

我想要一个动态的解决方案来避免开发 11 个单独的图形。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T18:02:40.260

经过一番研究，我发现我正在实现的是一个多步骤表单映射。那里有几个资源，包括展示如何在本地实现多步骤表单的截屏视频，或者有一个 wicked gem 可以做同样的事情。

我将首先尝试实现本机方法，因为我希望在每个步骤完成时将信息保存到数据库中，而不仅仅是在表单末尾。这应该允许我实现同时拥有 [save] 按钮和 [continue] 按钮的要求，第一个按钮保存信息但允许继续编辑，第二个按钮保存信息并将用户移动到下一步表格。

# url - 如何测试 Selenium IDE 是否存在链接？

> ID：14539709
> 
> 赞同：0
> 
> 时间：2013-01-26T17:46:12.947
> 
> 标签：url, selenium, ide, hyperlink, selenium-ide

我是 Selenium IDE 的初学者。我需要帮助来创建一个测试用例，作为输入获取主页的 URL，并在主页和所有内页的所有链接存在时循环运行测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T07:14:33.117

您可以使用非常简单的定位器来识别链接，例如。链接=主页或链接=注销等。

# android - bottone1 无法解析或不是字段

> ID：14539719
> 
> 赞同：1
> 
> 时间：2013-01-26T17:47:14.987
> 
> 标签：android, android-layout, android-widget

和以前一样，我正在做一些教程，但我认为我重写的那个我在重写代码时犯了一些错误。在指南的这一部分中，我应该添加两个按钮。我已经完成了所有步骤，但是：

> bottone1 无法解析或不是字段
> bottone2 无法解析或不是字段

这是代码：

```
package marco.prova;
import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;
import android.widget.Button;
import android.view.View;

public class Main extends Activity {
    private TextView textView1;
    private Button bottone1;
    private Button bottone2;
    /** Called when the activity is first created.*/
    @Override
    protected void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.activity_main);
      textView1 = (TextView) findViewById(R.id.testo1);
      textView1.setText("Testo modificato tramite codice 1");
      bottone1 = (Button) findViewById(R.id.bottone1);
      bottone2 = (Button) findViewByid(R.id.bottone2);
      bottone1.setOnClickListener(new View.OnClickListener() {
        public void onClick (View view) {
          textView1.setText("E' stato premuto il bottone 1");
        }
      });
      bottone2.setOnClickListener(new View.OnClickListener() {
        public void onClick (View view) {
          textView1.setText("E' stato premuto il bottone 1");
        }
      });
    }
  } 
```

希望得到一些帮助。谢谢你。

这里是layout.xml

```
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:orientation="vertical" 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"> >

    <TextView
        android:text="Testo di default TextView1"
        android:id="@+id/testo1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content">

    </TextView>

    <Button
        android:text="Bottone1"
        android:id="@+id/bottone1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content">

    </Button>   

    <Button
        android:text="Bottone2"
        android:id="@+id/bottone2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content">

    </Button>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T17:48:30.130

**`Project -> Clean`**是您遇到此类错误时的解决方案。

清理您的项目并重新构建它。

或者如果仍然不起作用，请删除生成的 R.java 并重新构建项目以从头开始创建生成的代码。

此外，`setContentView(R.layout.<filename>);`您的 XML 文件的名称是`<filename>.xml`在其中定义按钮的。

# php - 如何在php中将一个巨大的整数转换为十六进制？

> ID：14539727
> 
> 赞同：10
> 
> 时间：2013-01-26T17:48:09.983
> 
> 标签：php, hex, decimal

我怎样才能转换这个：

```
9312660682897061594767289296453011313180604726492752614962349778735928598708212386406555876878916185094145420038141655929349984786756296776268556142401047 
```

以 16 为基数？

我发现了这个递归函数：

```
function bcdechex($dec) {
            $last = bcmod($dec, 16);
            $remain = bcdiv(bcsub($dec, $last), 16);

            if($remain == 0) {
                return dechex($last);
            } else {
                return bcdechex($remain).dechex($last);
            }
        } 
```

但是嵌套级别达到了 100，即使我的 php.ini 配置文件中有 xdebug.max_nesting_level = 1000。

我的 xdebug 配置如下所示：

```
;Xdebug
zend_extension = "${path}\php\php546x121216181946\php_xdebug-2.2.1-5.4-vc9.dll"
xdebug.default_enable=1
xdebug.remote_enable=1
xdebug.remote_host=127.0.0.1
xdebug.remote_port=9000
xdebug.remote_handler=dbgp
xdebug.remote_mode=req
xdebug.remote_autostart = false
xdebug.dump_globals=1
xdebug.dump=COOKIE,FILES,GET,POST,REQUEST,SERVER,SESSION
xdebug.dump.SERVER=REMOTE_ADDR,REQUEST_METHOD,REQUEST_URI
xdebug.show_local_vars=1
xdebug.show_mem_delta=1
xdebug.collect_includes=1
xdebug.collect_vars=1
xdebug.collect_params=4
xdebug.collect_return=1
xdebug.auto_trace=0
xdebug.trace_options=0
xdebug.trace_format=0
xdebug.trace_output_dir="${path}\xdebug\trace"
xdebug.trace_output_name="trace.%t"
xdebug.profiler_enable=0
xdebug.profiler_append=1
xdebug.profiler_enable_trigger=1
xdebug.profiler_output_dir="${path}\xdebug\profiler"
xdebug.profiler_output_name="cachegrind.out.%s.%t"
xdebug.max_nesting_level = 1000
;/Xdebug 
```

是否有人具有与此不同的功能或有关如何转换此整数的任何提示？

谢谢你！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-26T18:20:01.317

修改您发现的迭代而不是递归的函数非常容易：

```
function bcdechex($dec) {
    $hex = '';
    do {    
        $last = bcmod($dec, 16);
        $hex = dechex($last).$hex;
        $dec = bcdiv(bcsub($dec, $last), 16);
    } while($dec>0);
    return $hex;
} 
```

您`$bignum`转换为十六进制的示例是： `b1cf5653e79bef001acfb0f99d1f34487d16a8253e3a9971e98d46382114e8ac81b5102ab3c56be1f77d0eb754f566c0dacb23d64755e823f35411f9e14c5617`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-01-18T21:43:11.233

第一个答案非常好（这让我们可以比较结果），但我无法安装 BCMath。所以，我发现了这个功能：

```
function my_base_convert($numstring, $frombase, $tobase) 
{
  $chars = "0123456789abcdefghijklmnopqrstuvwxyz";
  $tostring = substr($chars, 0, $tobase);

  $length = strlen($numstring);
  $result = '';
  for ($i = 0; $i < $length; $i++)
  {
      $number[$i] = strpos($chars, $numstring{$i});
  }
  do
  {
    $divide = 0;
    $newlen = 0;
    for ($i = 0; $i < $length; $i++)
    {
        $divide = $divide * $frombase + $number[$i];
        if ($divide >= $tobase)
        {
            $number[$newlen++] = (int)($divide / $tobase);
            $divide = $divide % $tobase;
        } elseif ($newlen > 0)
        {
            $number[$newlen++] = 0;
        }
    }
    $length = $newlen;
    $result = $tostring{$divide} . $result;
  } while ($newlen != 0);
  return $result;
}

echo my_base_convert($bignum, 10, 16); 
```

您的示例 $bignum 转换为十六进制与第一个答案中的相同：b1cf5653e79bef001acfb0f99d1f34487d16a8253e3a9971e98d46382114e8ac81b5102ab3c56be1f77d0eb754f566c0dacb23d64755e823f16541

函数在这里找到[https://magp.ie/2015/09/30/convert-large-integer-to-hexadecimal-without-php-math-extension/](https://magp.ie/2015/09/30/convert-large-integer-to-hexadecimal-without-php-math-extension/)（但示例中有一个小错误：“16, 10”而不是 "10, 16")

# admob - Milkmangames Admob 扩展错误

> ID：14539728
> 
> 赞同：0
> 
> 时间：2013-01-26T17:48:14.233
> 
> 标签：admob

执行闲置代码时：
var testDevices:Vector.; testDevices=AdMob.getTestDeviceIDs(); AdMob.showAd(AdMobAdType.BANNER,AdMobAlignment.CENTER,AdMobAlignment.TOP,testDevices); ...安装在我的 IPAD 上的应用程序崩溃了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T06:11:19.693

只需完全删除 testDevices 垃圾并以这种方式尝试。这是一个专门用于使用该 ANE 进行测试的功能。但是，如果这是导致您的错误的原因，请将其丢弃。

尝试这个：

AdMob.showAd(AdMobAdType.BANNER,AdMobAlignment.CENTER,AdMobAlignment.TOP,null);

（记得同时删除变量 testDevices）

# android - 提高 Android SDK 模拟器速度

> ID：14539730
> 
> 赞同：18
> 
> 时间：2013-01-26T17:48:23.717
> 
> 标签：android, sdk, virtual-device-manager

如何提高 Eclipse SDK for Android 应用程序开发中虚拟设备模拟器的速度？我一直在互联网上搜索以了解如何加快这件事，但我似乎找不到真正适合我的修复程序。我遇到的另一个问题是我无法获得超过 1024MB 的 RAM。

感谢所有的帮助。我现在已经确定了速度。对于遇到相同问题的任何人，请确保选中此框。

![在此处输入图像描述](../Images/22aa7705eb0c8e53e35fa37007bc4e57.png)

但是，我的 RAM 仍然无法超过 1024 MB。解决办法是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-26T18:04:02.383

我发现在我用于开发的笔记本电脑和台式机上都可以使用的方法是，当您创建或编辑 Android 模拟器 (AVD) 时，底部附近有一个选项，显示使用主机 GPU。

![使用主机 GPU](../Images/bbf5eb386c6ab9c6b28a6c5a77dbca7c.png)

我发现这适用于所有 Android 版本

**更新** 我错过了有关 RAM 问题的信息。您还没有说内存问题是否存在错误，但是如果您看到 failed to allocate memory: 8 那么您需要修改 AVD 配置。

转到 C:\Users\your_name.android\avd\avd_name\config.ini 并找到 hw.ramSize 并确保 MB 位于数字的末尾。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-26T17:54:13.717

如果您使用带有 Intel 系统映像的 Android 虚拟设备，您可以启用 HAXM（硬件加速执行管理器）来加速代码执行。看看这篇文章：http: [//developer.android.com/tools/devices/emulator.html#acceleration](http://developer.android.com/tools/devices/emulator.html#acceleration)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-26T18:07:18.187

我建议将模拟器的分辨率降低到 320x480 并删除它的皮肤（并学习热键）。

如果硬件加速可以在您的机器上运行，请尝试一下。我启用了它，但从未注意到任何区别。

如果这不符合您的需求，您可以使用其他替代方案，它们更快，但功能较少，而且我没有对它们进行太多测试：

1.  [VirtualBox](https://www.virtualbox.org/)和[androidx86](http://www.android-x86.org/) - 只有一个我在其上测试和调试过应用程序，但那是很久以前的事了。
2.  [Bluestacks](http://www.bluestacks.com/) - 有很多错误，但看起来很有希望。
3.  [WindowsAndroid](http://www.androidcentral.com/windowsandroid-ics-running-your-windows-box-we-go-mouse) - 新的，有效，但我不知道如何通过 adb 连接。
4.  与 #1 相同，但使用[androidvm](http://androvm.org/blog/download/)而不是 androidx86。
5.  [**Genymotion**](https://cloud.genymotion.com/page/product/) - 替代模拟器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-10T06:50:35.963

尝试使用 Genymotion。我认为这将是一个不错的选择。[https://cloud.genymotion.com/page/customer/login/?next=/page/launchpad/download/](https://cloud.genymotion.com/page/customer/login/?next=/page/launchpad/download/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-26T17:59:52.757

**您可以将其更改为至少：**

![在此处输入图像描述](../Images/45287d44e166f2791e498ccbe5fd3d1c.png)

也： **并从这里更改屏幕坐标：**

![在此处输入图像描述](../Images/de991f4fe9a7df4a26e4faca2c914c18.png)

**注意：第一步选择编辑，第二步选择开始**

![在此处输入图像描述](../Images/7ba4cdca283d3a27dbc296ebe52ac0d2.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-24T10:07:29.710

初学者也可以在这里找到完整的加速 android 模拟器解决方案：

[加速慢速 Android 模拟器](http://www.developer.com/ws/android/development-tools/haxm-speeds-up-the-android-emulator.html)

这个解决方案在我的 i3 机器上运行良好。几天来，我已经测试了许多解决方案和模拟器，但这个对我来说是最快和最好的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-04-08T10:16:06.843

按照以下步骤使 android 仿真几乎**与真实设备一样快。**

*   启动 AVD 管理器并创建一个新的 AVD，目标值为 Android **4.0.3**（API 级别 15），修订版 3**或更高版本**（并像往常一样选择其他设置）。

    1.  在 Eclipse 中，单击您的 Android 项目文件夹，然后选择 Run > Run Configurations...

    2.  在 Run Configurations 对话框的左侧面板中，选择您的 Android 项目运行配置或创建新配置。

    3.  单击目标选项卡。

    4.  选择您在上一个过程中创建的 AVD。
    5.  在 Additional Emulator Command Line Options 字段中，输入： `-gpu on`
    6.  使用此运行配置运行您的 Android 项目。

我已经尝试过了，我确认结果是一个明显快的模拟器（有时比真实设备快）。

参考 - [http://developer.android.com/tools/devices/emulator.html#acceleration](http://developer.android.com/tools/devices/emulator.html#acceleration)

# textmate - Textmate：查找和添加数值

> ID：14539733
> 
> 赞同：1
> 
> 时间：2013-01-26T17:48:32.557
> 
> 标签：textmate

我想在我的 html 文件中查找和替换数字，如下所示：href="#1" 到 href="#12"。基本上我想在现有值上加 10

```
 from
 <p><a href="#2">bla bla</a>
 <p><a href="#3">bla bla</a>
 to
 <p><a href="#chapter12">bla bla</a>
 <p><a href="#chapter13">bla bla</a> 
```

我怎么能在 textmate 中做到这一点？

# vhdl - 如何在不使用加法器的情况下制作数字的 2 补码

> ID：14539734
> 
> 赞同：5
> 
> 时间：2013-01-26T17:48:35.633
> 
> 标签：vhdl, verilog, fpga, twos-complement

在用二补码来反转数字的符号时，您通常只需将每一位取反并加 1。例如：

```
011 (3)
100 + 1 = 101 (-3) 
```

在 VHDL 中是：

```
a <= std_logic_vector(unsigned(not(a)) + 1); 
```

以这种方式，合成器使用 N 位加法器。

不使用加法器是否有另一种更有效的解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T19:18:46.790

我想没有更简单的方法可以做到这一点，但加法器可能没有你想象的那么糟糕。

如果您要说反转 32 位数字，则综合工具可能会从 32 位加法器结构开始。然而，当看到`B`输入总是绑定到 1 时，由于未使用的门（与门的一个引脚接地，或门的一个引脚连接到逻辑 1 等），它可以“挖空”很多结构）。

所以我想你剩下的将是一个相当有效的逻辑块，它只是增加一个输入数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T10:12:00.533

如果您只是想创建一个二进制补码位模式，那么一元`-`也可以。

```
a = 3'b001 ; //        1
b = -a     ; //3'b111 -1
c = ~a + 1 ; //3'b111 -1 
```

Tim 还正确地指出，仅仅因为您使用 a`+`或通过一元 - 来暗示一个 -，综合工具就可以自由地对此进行优化。

全加器有 3 个输入（A、B、Carry_in）和 2 个输出（Sum Carry_out）。由于我们使用的第二个输入只有 1 位宽，并且在 LSB 处没有进位，我们不需要“全加器”。

具有 2 个输入（A、B）和 2 个输出（Sum Carry）的半加器在这里是完美的。

对于 LSB，半加器 B 输入将为高电平，即`+1`. B 输入的其余位将用于传播前一位的进位。

There is no way that I am aware of to write in verilog that you want a half adder, but any size number plus 1 bit only requires a half adder rather than a fulladder.

# javascript - Javascript - 存储父值和子值

> ID：14539735
> 
> 赞同：0
> 
> 时间：2013-01-26T17:48:50.220
> 
> 标签：javascript, structure, parent

我需要一些帮助...使用 Javascript 我正在尝试为列表创建父子关系，但我不确定如何实现这一点。

目标是具有如下所示的结构：

父对象 1

1.  PO1 列表项
2.  PO1 列表项
3.  PO1 列表项
4.  PO1 列表项

父对象 2

1.  P02 列表项
2.  P02 列表项
3.  P02 列表项
4.  P02 列表项

...

我不是在找人为我编写代码，我只是在寻找社区的指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T18:03:36.410

您可以使用数组作为属性来创建对象。

所以

```
var parent = {
    childlist = [1,2,3,4,5];

} 
```

然后，您可以访问子元素以`parent.childlist[index]`在列表的索引位置获取子元素。您可以将新项目 x 添加到列表中`parent.childlist.push(x)`

如果您想简化多次创建它，您可以使用构造函数，像这样。

```
var Parent = function(){
    this.childlist = [];
}

var parent1 = new Parent();

var parent2 = new Parent(); 
```

# sql-server - 插入记录并为每个运行更新语句的存储过程

> ID：14539742
> 
> 赞同：3
> 
> 时间：2013-01-26T17:49:34.837
> 
> 标签：sql-server, sql-server-2005, stored-procedures

我想要一个存储过程，它将行插入到一个表中（从另一个表的选择查询中检索），并且对于每个新插入的行获取它的标识并使用标识更新原始表

伪代码-

```
records = select id,city,state,country from USER where name=@name

for each record in records  // for each rows selected
   insert into LOCATION(city,state,country) values(@record.city,@record.state,@record.country); //inserts a value into LOCATION table
   @id = SCOPE_IDENTITY(); // gets the identity of the newly inserted row
   update USER set LocationId=@id where Id=@record.id //updates the new id back to old table's column
end 
```

这是一个数据迁移任务，我们希望将 LOCATION 从 USER 表中分离出来

提前感谢您为此线程付出的时间和精力。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T18:08:44.757

你可以这样做：

```
DECLARE @InsertedValues TABLE (ID INT, City VARCHAR(50), State VARCHAR(50), Country VARCHAR(50))

INSERT INTO dbo.Location(City, State, Country)
  OUTPUT Inserted.ID, Inserted.City, Inserted.State, Inserted.Country INTO @InsertedValues(ID, City, State, Country)
    SELECT City, State, Country
    FROM dbo.YourSourceTable 
```

有了这个，您现在在表变量中拥有插入的值 -**包括**新定义的标识值，`@InsertedValues`您现在可以根据需要更新源表。

```
UPDATE dbo.YourSourceTable
SET 
   Col1 = iv.Col1,
   Col2 = iv.Col2,  -- etc. - do whatever you nee to do here!
FROM @InsertedValues iv
WHERE  .........  -- here, you need some condition to link the inserted values to the original table 
```

这根本不需要任何游标或任何其他混乱的 RBAR（逐行）处理 - 一切都很好地基于集合并且尽可能快。

`OUTPUT`在 MSDN [SQL Server 联机丛书](http://msdn.microsoft.com/en-us/library/ms177564.aspx)中了解有关该子句的更多信息- 您也可以`OUTPUT`在插入、更新甚至删除语句中使用该子句！

# javascript - 将对象属性复制到新的 - 不是通过引用

> ID：14539746
> 
> 赞同：0
> 
> 时间：2013-01-26T17:49:58.030
> 
> 标签：javascript, jquery

我有一个 JavaScript 对象数组，它用一些值初始化。我想将这些值复制到一个新的对象数组中，但不引用原始对象，因此我可以操作新对象。

我在这个示例代码中尝试过`objectOptions.concat()`，但它也删除了引用的原始对象：

```
var objectOptions = [{option1: 'value1', someOption: 'value2'}];

function objectClean(){
    var newObjectOptions = objectOptions.concat();

    for(var i in newObjectOptions ) {
        delete newObjectOptions[i]['someOption'];
    }

    return newObjectOptions ;
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T18:22:49.587

如果您的对象足够简单且与[JSON 兼容](http://www.json.org/js.html)（即，仅包含对象、数组和原语，没有 DOM 引用，没有 Regex 对象，没有循环引用等），最简单的克隆方法是：

```
var clone = JSON.parse(JSON.stringify(original)); 
```

否则，您将需要一个深拷贝功能，例如在[此答案](https://stackoverflow.com/a/122190/825789)中找到的功能*：

```
function clone(obj){
    if(obj == null || typeof(obj) != 'object')
        return obj;

    var temp = obj.constructor(); // changed

    for(var key in obj)
        temp[key] = clone(obj[key]);
    return temp;
} 
```

[* 当心！该问题的公认答案是仅 jQuery 的解决方案，并且被严重高估了！]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T17:55:52.163

```
var copyme = {/*object with properties which are to be copied in another object*/};
var copy = {};
for (var attr in copyme) {
  if (copyme.hasOwnProperty(attr)) copy[attr] = clone(copyme[attr]);
} 
```

# three.js - 每个灯光中的三个.js 阴影贴图条纹（现在简化了，并且使用 jsfiddle！）

> ID：14539747
> 
> 赞同：0
> 
> 时间：2013-01-26T17:50:00.843
> 
> 标签：three.js

我正在尝试动态地创建、修改和更新（目前仅是定向的）灯光和阴影贴图。当我四处移动灯光或更改阴影属性时，灯光、阴影和阴影相机助手会正确更新，除了从灯光的角度来看，原点 (0,0,0) 后面的所有东西都无缘无故地被阴影了。

截图：

[http://i.imgur.com/n4AHvle.png](http://i.imgur.com/n4AHvle.png)

[http://i.imgur.com/l0uaZHD.jpg](http://i.imgur.com/l0uaZHD.jpg)

[http://i.imgur.com/brKwCof.jpg](http://i.imgur.com/brKwCof.jpg)

[http://i.imgur.com/a6dqMGo.jpg](http://i.imgur.com/a6dqMGo.jpg)（新，带聚光灯）

您可以看到有汽车和一块地面的场景，它们属于使用 ColladaLoader 导入的几何图形。问题在于阴影贴图，汽车正确地投射阴影，但地面上仍有条纹阴影，尽管除了汽车遮挡光线之外没有别的东西。

如果我添加更多类似的灯，它们也有相同的 4 条条纹。他们也出现在聚光灯下。如果我更改阴影贴图分辨率，条纹的大小会相对于彼此发生变化，但似乎总是有四个，从中心到两个方向间隔开。

编辑：这里的 JSFiddle：http: [//jsfiddle.net/cL3hX/1/](http://jsfiddle.net/cL3hX/1/)场景中不应该有任何阴影，除非在阴影相机平截头体内引入了一些新的几何体。

小提琴上的几个音符：

*   我有 r55，但演示是 r54，因为 jsfiddle 显然还没有 r55。

*   我只能用 Collada 文件重现它。所以它可能与模型有关。我在 Sketchup 8 中创建了一个简单的立方体，并尝试使用各种 collada 选项将其导出。

*   在 JSFiddle 中，我只能通过启用“双面”设置导出的文件来重现该错误。在我自己的应用程序代码中，在启用或未启用该设置的情况下创建的模型上确实存在相同的错误，但在小提琴中，似乎只有在导出“双面”时才会触发该错误。无论如何，我确实需要以某种方式显示脸部的背面，因为我正在开发的工具必须与 Sketchup 导出一起使用，而且很难在 Sketchup 中制作模型而不会看到混乱的正面/背面。

*   非常简单的 Collada 文件作为 javascript 变量包含在 JSFiddle 中。这是同一文件的下载链接：[https ://dl.dropbox.com/u/14489569/shadowmapdemo.dae](https://dl.dropbox.com/u/14489569/shadowmapdemo.dae)

 `* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T22:58:31.797

问题是您的 Collada 模型。

您的“平面”实际上是单个几何图形中背靠背的多个共面面。

难怪有文物。

将其替换为 THREE.CubeGeometry。`

# css - Rails 和 SCSS 一起工作

> ID：14539751
> 
> 赞同：0
> 
> 时间：2013-01-26T17:50:26.837
> 
> 标签：css, ruby-on-rails-3.2, sass

如果我采用这种编码风格，我将其添加到 applications.html.erb 中的“产品”脚手架：

```
<body class = '<%= controller.controller_name %> ' > 
```

然后在 products.css.scc 的样式表中，我为“products”定义了这样的嵌套：

```
.products {
  table {
    border-collapse: collapse;
  }

  table tr td {
    padding: 5px;
    vertical-align: top;
  }

  .list_image {
    width:  60px;
    height: 70px;
  }

  .list_description {
    width: 60%;

    dl {
      margin: 0;
    }

    dt {
      color:        #244;
      font-weight:  bold;
      font-size:    larger;
    }

    dd {
      margin: 0;
    }
  }
// .... continued... 
```

然后在**products/index/index.html.erb**例如我可以有类似的东西 `<td class = "list_description" >` ，...

所以我的问题是我是否需要某种完全限定的命名来访问该 css 文件中的嵌套类？或者我可以在没有层次结构的情况下命名它们？

我在 DHH 的敏捷书中看到了这种做 CSS 的方式——好吧，他创建了 Rails！- 但在 Michael Hartl 的书中，他正在做的是更传统的 CSS 嵌入。那么哪个更好呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T17:56:23.060

这更像是一个 CSS 问题。

嵌套 CSS 选择器是针对 CSS3 提出的，但 Sass 现在会处理它们。他们正在做的是他们在不同的元素下“命名空间”选择器：所以`class="list_description"` *只要它在一个元素内，你就可以使用* `class="products"`

换句话说，Sass 会将上面的内容翻译成这个等价的规则：

```
.products .list_description {
  width:60%;
} 
```

这将匹配这个：

```
<div class="products">
  <div class="list_description">Matches</div>
</div> 
```

但不是这个：

```
<div class="products"></div>
<div class="list_description">Does not match: not inside a "products" classed element.</div> 
```

# python - 用 Python 写一个 CSV 文件

> ID：14539752
> 
> 赞同：-2
> 
> 时间：2013-01-26T17:50:31.957
> 
> 标签：python, csv

我有一个看起来像这样的字符串：

```
 text = "Text1 Text2 Text3 Text4 Text5\n
         Here comes more test text\n
         and even more1 more2 more3\n
         tex text textt te tex\n
         1 2 3 4 5
         ..." 
```

如您所见，数据由一个空格字符分隔（并且一行中正好有 5 个“文本”（我的意思是字符串）。我想写一个 CSV 表来使数据看起来不错。所以它看起来像那：

```
 Col1    2     3     4     5
 Text1 Text2 Text3 Text4 Text5
 Here  comes more  test  text
 and   even  more1 more2 more3
 tex   text  textt te    tex
 1     2     3     4     5 
```

应该有 5 列，每个字符串都应该在一个单元格中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T18:02:26.627

你试试这个

```
text = "Text1 Text2 Text3 Text4 Text5\n\
Here comes more test text\n\
and even more1 more2 more3\n\
tex text textt te tex\n\
1 2 3 4 5"
filecsv = open('csvfile.csv', 'w+')
filecsv.write(text.replace(' ', ';'))
filecsv.close() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T18:03:29.167

此代码会将数据写入`csv`文件。

```
text = """Text1 Text2 Text3 Text4 Text5\n
         Here comes more test text\n
         and even more1 more2 more3\n
         tex text textt te tex\n
         1 2 3 4 5"""

data = [x.strip() for x in text.split("\n") if x.strip() != ""]

columns = ["Col1", "2", "3", "4", "5"]

# Write dictionary list to file
outfile = "d2.csv"

with open(outfile, "w") as fp:
    for key in columns:
        fp.write(key + ", ")

    fp.write("\n")

    for line in data:
        l = ", ".join(line.split())
        print l
        fp.write(l)
    fp.write("\n") 
```

输出：

```
Col1, 2, 3, 4, 5, 
Text1, Text2, Text3, Text4, Text5
Here, comes, more, test, text
and, even, more1, more2, more3
tex, text, textt, te, tex
1, 2, 3, 4, 5 
```

# javascript - JavaScript - 内存友好的脚本

> ID：14539757
> 
> 赞同：7
> 
> 时间：2013-01-26T17:51:11.160
> 
> 标签：javascript, memory-management

JavaScript中是否有类似内存友好的脚本？我应该注意的某些原则？我问这个是因为我有一个站点，其中 a`#div`充满了大量数据，并且我使用原语执行此操作`.innerHTML = i_hold_lots_of_data;`我想知道 a是否与 C`.innerHTML = '';`中的 a 具有相同的效果`free()`？

所以我的问题可以缩小到这个问题：在 JavaScript 中处理大字符串是否存在内存管理方面的最佳实践？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T18:27:10.173

如果您想深入了解您的内存配置文件，您应该使用 Google Chrome 控制台（选项卡配置文件）之类的工具。它显示了哪些对象使用了多少内存。

一般来说，您应该知道 javascript 变量是对内存中事物的引用，并且当不再引用它时（在不久的将来的某个时候），该内存将被释放。因此，如果您有大型物品，请确保仅在必要时握住它们。如果您只需要在一个地方使用某些东西，请确保它具有本地范围而不是使用全局变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T19:00:32.117

正如我所看到的，Javascript 在现代浏览器中被编译成机器代码，带有 V8、Chakra 等引擎，我怀疑内存管理可能因引擎而异。

如果你想对你的代码运行内存检查，你可以使用 chrome 的泄漏查找器。 [http://google-opensource.blogspot.de/2012/08/leak-finder-new-tool-for-javascript.html](http://google-opensource.blogspot.de/2012/08/leak-finder-new-tool-for-javascript.html)

我发现一篇文章对 Javascript 中的内存管理非常有用 [http://coding.smashingmagazine.com/2012/11/05/writing-fast-memory-efficient-javascript/](http://coding.smashingmagazine.com/2012/11/05/writing-fast-memory-efficient-javascript/)

# ruby-on-rails-3 - 您通过 :github 作为 gem 'spree_gateway' 的选项，但它是无效的

> ID：14539759
> 
> 赞同：2
> 
> 时间：2013-01-26T17:51:18.157
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.2, spree

当我尝试在新应用上安装 spree 时，出现此错误：

您通过 :github 作为 gem 'spree_gateway' 的选项，但它是无效的。

我在 Windows 7 机器上使用 rails 3.2.11。

```
D:\Dropbox\web\rails_projects\testapp>spree install
Would you like to install the default gateways? (Recommended) (yes/no) [yes] y
Would you like to install the default authentication system? (yes/no) [yes] y
Would you like to run the migrations? (yes/no) [yes] y
Would you like to load the seed data? (yes/no) [yes] y
Would you like to load the sample data? (yes/no) [yes] y
     gemfile  spree
     gemfile  spree_gateway
     gemfile  spree_auth_devise
         run  bundle install from "."
←[31mYou passed :github as an option for gem 'spree_gateway', but it is invalid.←[0m 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T10:20:29.343

*TL;DR：升级到更高版本的 Bundler。*

您可能有旧版本的 Bundler。例如，在我的测试中，这个版本给了我这个错误：

```
$ bundle --version
Bundler version 1.0.21 
```

在我的机器上运行的版本是：

```
$ bundle --version
Bundler version 1.2.3 
```

我没有仔细观察，但很明显，捆绑器在某些时候发生了变化，增加了对该选项的支持。这两者之间有一个版本，它将开始工作。这可能是您看到的问题。

# c++ - 寻求不工作

> ID：14539760
> 
> 赞同：1
> 
> 时间：2013-01-26T17:51:18.883
> 
> 标签：c++, file, visual-c++, mfc

我正在使用 Visual C++ 2010 开发 MFC 应用程序

我正在读取一个文件的数据，但似乎 seekg 不起作用

这是我的代码

```
//Transaction is a class i have defined before

void displayMessage(CString message)
{
    MessageBox(NULL,message,L"error",MB_OK | MB_ICONERROR);
}

///////////////////////////////
    ifstream input;

    input.open("test.dat" , ios::binary );
    if( input.fail() )
    {
        CString mess;
        mess = strerror( errno );
        mess.Insert(0,L"Error\n");
        displayMessage(mess);
    }

    Transaction myTr(0,myDate,L"",0,0,L""); // creating an object of transaction
    unsigned long position = 0;
    while(input.read( (char *) &myTr , sizeof(Transaction)))
    {
        if(myTr.getType() == 400 )
            position = (unsigned long)input.tellg() - sizeof(Transaction);
    }

    CString m;
    m.Format(L"Pos : %d",position);
    displayMessage(m);

    input.clear();//I also tried removing this line
    input.seekg(position,ios::beg );

    m.Format(L"get pos: %d",input.tellg());
    displayMessage(m);
    input.close(); 
```

第一个 displayMessage 显示这个：`Pos : 6716`但第二个显示：`get pos: 0`

为什么 seekg 不工作？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T19:03:51.227

问题是它`CString.Format()`是一个可变参数函数并`basic_istream::tellg()`返回一个`pos_type`不是可以作为可变参数参数传递的类型，因此您会得到未定义的行为。

如果您想将获得的位置传递`tellg()`给`CString::Format()`您，则需要对其进行转换或将其放入临时的中间变量中：

```
 unsigned long new_pos = input.tellg();
    m.Format(L"get pos: %d", new_pos); 
```

# android - 类型 MapFragment 的 getSupportFragmentManager() 方法未定义

> ID：14539764
> 
> 赞同：3
> 
> 时间：2013-01-26T17:51:28.247
> 
> 标签：android, android-maps-v2, supportmapfragment

我正在尝试实现谷歌地图显示，下面是我的代码：

```
package com.fragments;

import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.SupportMapFragment;

public class MapFragment extends SherlockMapFragment {

    private GoogleMap mMap;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View root = super.onCreateView(inflater, container, savedInstanceState);
        SupportMapFragment mapFrag= (SupportMapFragment)getSupportFragmentManager().findFragmentById(R.id.fragment_map);
        mMap = mapFrag.getMap();
        return root;
    }
} 
```

我收到一个错误，即未定义类型 MapFragment 的 getSupportFragmentManager()。但是我有点困惑，因为我已经导入了 com.google.android.gms.maps.SupportMapFragment。这种方法不应该来自那里吗？我是否错过了让这种方法发挥作用的一些步骤？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-26T17:59:14.297

如果您正在使用这个[SherlockMapFragment](https://stackoverflow.com/a/13727539/1267661)，请尝试：

```
getSherlockActivity().getSupportFragmentManager(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-23T07:08:51.850

伙计，我花了几个小时阅读这个问题和你的其他两个问题（以及其他问题），因为我遇到了完全相同的问题。我有一个运行 ABS+GMapsV2.0+FragmentActivity 的应用程序，但是因为我听说很多将它全部放在片段中是一个好习惯，我开始将它移植到片段和 FragmentActivity 作为容器。

当我移植地图时，发生的情况完全相同，getSupportFragmentManager() 无法识别，而且我不太喜欢创建 SherlockMapFragment 破坏 ABS 库的建议解决方案，所以我一直在挖掘。

很可能您此时已经知道，但我刚刚意识到您（以及 10 分钟前的我）正在尝试处理在 xml 中定义但尚未创建（索引）的片段。

查看检查片段方法中调用顺序的[文档](http://developer.android.com/guide/components/fragments.html)，我在 onCreateView() 之后尝试了其他方法中的代码...并更改 getSupportFragmentManager() 为 getFragmentManager() 甚至遵循使用 getSherlockActivity().getSupportFragmentManager( ) 我可以处理那些已经存在的片段。

```
public class MapsFragment extends SherlockFragment {

private SupportMapFragment mSupportMapFragment;
private GoogleMap map;
private Marker spotAMarker;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    return inflater.inflate(R.layout.maps_fragment, container, false);
}

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    mSupportMapFragment = (SupportMapFragment) getFragmentManager().findFragmentById(R.id.map_fragment_test); //THIS ONE
    mSupportMapFragment = (SupportMapFragment) getSherlockActivity().getSupportFragmentManager().findFragmentById(R.id.map_fragment_test); //OR THIS ONE
    if(mSupportMapFragment != null) {
        map = mSupportMapFragment.getMap(); 

        if(map != null) {

            spotAMarker = map.addMarker(new MarkerOptions().position(new LatLng(4.651904,-74.057352)).
                    title(getString(R.string.spot_a_title)).snippet(getString(R.string.spot_a_subtitle)).
                    icon(BitmapDescriptorFactory.fromAsset("images/spot_a.png")));
            spotAMarker.setDraggable(true);

        } else {
            Toast.makeText(this.getActivity(), getString(R.string.no_map_error), Toast.LENGTH_LONG).show();
        }

    } else {
        Toast.makeText(this.getActivity(), "No Map Fragment", Toast.LENGTH_LONG).show();
    }
    super.onActivityCreated(savedInstanceState);
}
} 
```

可能您已经有了解决该问题的方法，但我想与其他陷入同一问题的人分享我的经验。

# algorithm - 随机游走以找到成本更高的路径

> ID：14539774
> 
> 赞同：1
> 
> 时间：2013-01-26T17:52:56.807
> 
> 标签：algorithm, graph-theory

我有一个无环有向图，有一个开始顶点和一个结束顶点，中间有一些未知数量的顶点。路径从起始顶点开始，在结束顶点结束。已知起始顶点和结束顶点之间的任意路径上的顶点数<100，但可能的顶点数可能非常大。每个顶点都有一个分配给它的成本，路径的成本是中间顶点成本的总和。有没有办法使用随机游走或任何其他方式（这是为了避免探索所有顶点）来找到成本最高（或接近最高）的路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T19:02:52.183

这个问题在 Geekviewpoint.com 上得到了详细的解释。它增强了 Dijkstra 的算法。[http://www.geekviewpoint.com/java/graph/dijkstra_constrained](http://www.geekviewpoint.com/java/graph/dijkstra_constrained)

编辑：占每条路径之间的 100 个顶点。

最初你的问题是在开始和结束顶点之间有 100 条路径。但是通过您的更正，它实际上是路径上的 100 个顶点。在这种情况下，使用 DFS 可以直接进行优化。

当您尝试组装路径时，请跟踪您看到的顶点数。如果数字达到 99 并且没有从头到尾链接，请中止该路径并尝试另一个单元，如果存在，您会得到答案。您需要修改的算法是用于循环检测的 DFS。任何算法教科书都会有其中之一。由于您还需要在找到的路径中选择最佳路径，因此您还应该查看[http://www.geekviewpoint.com/java/graph/count_paths](http://www.geekviewpoint.com/java/graph/count_paths)。

我不知道我是否应该告诉您如何做显而易见的事情，但是您将跟踪您找到的过去路径，类似于您如何找到数组中的最大元素。代码不难，你只要结合几个小想法：

*   DFS（类似于循环检测和[计数路径](http://www.geekviewpoint.com/java/graph/count_paths)，两者重叠）

*   跟踪你见过的最佳路径：一个入口地图，其中的想法是地图，如果你找到更短的路径，你会不断替换它。

# jsf - 在 JSF 中显示法语错误

> ID：14539775
> 
> 赞同：0
> 
> 时间：2013-01-26T17:52:56.133
> 
> 标签：jsf, localization, error-handling

在 JSF 2.0 中，我正在开发一个支持英语和法语的站点。除错误消息外，一切正常。如果在登录表单中未输入用户名，则会显示“必填字段”错误。

我希望当我选择法语时，在网站中错误消息也应该是法语。任何人都可以指导我如何将错误消息的语言环境更改为法语？

# wpf - 获取图像/矩形的可见正方形

> ID：14539780
> 
> 赞同：1
> 
> 时间：2013-01-26T17:53:15.590
> 
> 标签：wpf, silverlight

![图片](../Images/eeebd7ae7994853bd0705e1f9bd2aee2.png)

有一个画布（灰色），上面有一个图像（蓝色）。我对图像进行了一些操作，并希望在操作后找到图像的可见部分（红色）。

为此，我使用这种方法：

```
 private double GetSquare()
            {
                Rect rect = GetBounds(Image, Canvas);
                var canvasRect = RootGeometry.Rect;
                canvasRect.Intersect(rect);
                return canvasRect.Height * canvasRect.Width;
            }
  private static Rect GetBounds(FrameworkElement of, FrameworkElement from)
        {

            // Might throw an exception if of and from are not in the same visual tree
            GeneralTransform transform = of.TransformToVisual(from);
            return transform.TransformBounds(new Rect(0, 0, of.ActualWidth, of.ActualHeight));

        } 
```

XAML：

```
<Canvas Grid.Row="1" x:Name="ImageCanvas" Background="Gray">
            <Canvas.Clip>
                <RectangleGeometry x:Name="RootGeometry"/>
            </Canvas.Clip>
            <Image  x:Name="Image" Stretch="Fill"
                   ManipulationStarted="OnManipulationStarted"
                   ManipulationDelta="OnManipulationDelta"
                   ManipulationCompleted="OnManipulationCompleted" Source="{...}" 
                   ImageOpened="OnImageOpened">
                    <Image.RenderTransform>
                        <TransformGroup>
                            <MatrixTransform x:Name="previousTransform" />
                            <TransformGroup x:Name="currentTransform">
                                <ScaleTransform x:Name="scaleTransform" />
                                <RotateTransform x:Name="rotateTransform" />
                                <TranslateTransform x:Name="translateTransform" />
                            </TransformGroup>
                        </TransformGroup>

                    </Image.RenderTransform>

                </Image>
        </Canvas> 
```

该方法适用于二维图片。但是对于第 3 幅图像，该方法返回不正确的结果。也许有人可以解释为什么该方法返回不正确的结果，并解释如何获取图像的可见部分（3-th）？

# html - 删除div内图片下方的白色填充

> ID：14539784
> 
> 赞同：-1
> 
> 时间：2013-01-26T17:53:54.397
> 
> 标签：html, css

在此[网站上](http://www.posterlion.com)，每个缩略图下方都有一个大约 5 像素的白色填充。然而，我不知道它来自哪里。当我通过 Google Inspect 进行调查时，我没有看到可能导致它的填充。我如何删除这个白色填充？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T17:56:36.960

为图像添加样式：display:block；

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-26T17:58:42.923

您还可以将此`height`属性添加到`#iri`：

`height: 160px;`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T17:58:08.323

这是一个常见的问题。放：

```
display: block; 
```

对于[此处指示](https://stackoverflow.com/questions/7473857/unwanted-margin-below-image)的图像的 CSS 。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-26T18:29:01.170

这不完全是与填充或边距相关的问题。这是锚标记的默认行为。通常锚标记只包含文本，并且大多数情况下它们都带有下划线，因此每当呈现锚标记时，底部会自动添加一个小空间，通常用于小写字母，如“j”、“y”和“q”。

基线下方的空间称为“下降空间”，因为这是绘制小写字母下降的地方。所以当锚标签包含图像时，就会出现这个问题。您可以通过添加样式来解决此问题`img { display:block; }`

# r - 如何将 x 和 y 轴的截距放置在 (0 , 0) 并将 x 和 y 轴延伸到绘图的边缘

> ID：14539785
> 
> 赞同：18
> 
> 时间：2013-01-26T17:54:07.567
> 
> 标签：r, plot, curve, axes

假设我想绘制`x^2`. 我可以使用`curve()`如下。

```
curve(x^2, -5, 5) 
```

![在此处输入图像描述](../Images/49b191c4f6c66c234456dc1b24189bd5.png) 但是，我希望轴通过 (0, 0)。我可以做如下事情：

```
curve(x^2, -5, 5, axes=FALSE)
axis(1, pos=0)
axis(2, pos=0)
abline(h=0)
abline(v=0) 
```

我最终得到了类似下面的东西，看起来不错。但我唯一的抱怨是，这种绘制轴的方式使实际轴 - 例如 x 轴的 -4 和 4 之间的段 - 比右侧和左侧的段厚。y轴也是如此。我想知道是否有更好的方法来绘制坐标轴。谢谢！

![在此处输入图像描述](../Images/9cd6068dc4b9543a4763500812a07635.png)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-26T18:18:04.953

默认情况下，axis() 自动计算刻度线位置，但您可以使用`at`参数手动定义它们。所以解决方法可能是这样的：

```
curve(x^2, -5, 5, axes=FALSE)
axis(1, pos=0, at=-5:5)
axis(2, pos=0) 
```

这使 ：

![在此处输入图像描述](../Images/f75eaa3cd17f3f463b3bf963ffafcc67.png)

问题是您必须手动确定每个刻度线的位置。更好的解决方案是使用`axTicks`函数（默认使用的函数）计算它们，但使用自定义`axp`参数调用此函数，该参数允许您分别指定轴中刻度的最小、最大和间隔数：

```
curve(x^2, -5, 5, axes=FALSE)
axis(1, pos=0, at=axTicks(1,axp=c(-10,10,10)))
axis(2, pos=0) 
```

这使 ：

![在此处输入图像描述](../Images/0c4bfd58f8ea77efd6e27e2eff03fd1b.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T08:54:51.823

绘图周围的参数`yaxs`和`xaxs`控制间距。设置`"i"`为省略此：

```
curve(x^2, -5, 5, yaxs = "i") 
```

另请参阅：[https ://stackoverflow.com/a/12300673/567015](https://stackoverflow.com/a/12300673/567015)

# c - 模拟 ARM 代码

> ID：14539787
> 
> 赞同：9
> 
> 时间：2013-01-26T17:54:14.530
> 
> 标签：c, linux, ubuntu, arm

我想模拟ARM代码。例如，我想运行这样的代码：

```
MOV    R0, #5
ADD    R0, R0, #1
//somehow output R0 
```

它会在我的 Ubuntu 上的某些软件上输出 6。是否可以？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-27T17:28:53.470

[Keil MDK](http://www.keil.com/arm/mdk.asp)可用于模拟 ARM 代码。它提供了一个[Simulate/Debug](http://www.keil.com/support/man/docs/gsac/GSAC_startDebugging.htm)透视图，可用于探测 ARM 寄存器集、内存内容等……

MDK-Lite 评估版免费提供，最大代码大小为 32KB。

Linux 版本的 MDK 不可用。但是 Keil MDK在 Ubuntu 中可以在[WINE上完美运行。](https://help.ubuntu.com/community/Wine)

* * *

## 在 WINE 上安装 Keil uVision MDK：

***第 1 步：在 Ubuntu 上安装 wine***

打开终端并输入：

```
sudo apt-get install wine 
```

***第 2 步：下载[Keil MDK](https://www.keil.com/demo/eval/arm.htm)。***

***第 3 步：安装 MDK***

右键单击*MDK*可执行文件并选择“*使用 Wine Windows 程序加载器打开*”选项。

***第 4 步：在 Ubuntu 上调用 Keil uVision MDK***

打开终端并输入：

```
wine ~/.wine/drive_c/Keil/UV4/Uv4.exe 
```

***第 5 步：安装 Flash Magic（可选）***

Flash Magic 是一款用于下载 Keil 板卡软件的工具。下载[Flash Magic 软件](http://www.flashmagictool.com/)并将其安装在 wine 上（参考前面的步骤）。

创建到串行端口的 COM1 链接。打开终端并输入：

```
ln -s /dev/ttyS0 ~/.wine/dosdevices/COM1 
```

* * *

## Keil uVision MDK 项目创建和调试：

***第 1 步：为 ARM7 目标创建 Keil UVision 项目。***

在 Keil UVision 工具栏中选择*Project --> New Project*。

导航到要创建此项目的位置。

输入项目名称并单击*Save*。

选择*ARM --> ARM7(Little Endian)*作为 Target 的设备。单击确定。

***第 2 步：为目标创建程序集源文件***

在 Keil UVision 工具栏中选择*File --> New*。将以下代码添加到新创建的文件中：

```
 AREA text, code, readonly
    ENTRY

    MOV    R0, #5
    ADD    R0, R0, #1

    END 
```

如上所述，在每个汇编语句之前提供制表符空间。*使用“.s”*扩展名保存文件。

***第 3 步：将源文件添加到项目中***

在项目窗口（位于 UVision 左侧）中，右键单击*Source Group 1*并选择“ *Add Files to Group Source Group 1* ”选项。

选择*test.s*并点击*'Add'*。（选择文件类型作为*ASM 源文件*）

![在此处输入图像描述](../Images/313fdf93c2f1666a76aa5c6aeb862a76.png)

***第 4 步：构建源文件***

在 Keil UVision 工具栏中选择*Project --> Build target*或按*F7*编译源文件。

***第 5 步：模拟/调试应用程序***

在 Keil UVision 工具栏中选择*Debug--> Start/Stop Debug Session*或按*Ctrl + F5*。

调试透视图打开，左侧有一个寄存器视图，中间有代码视图，右下角有内存视图，等等......

![在此处输入图像描述](../Images/dc0d1d3ce3413afbee9d98307601850d.png)

使用调试键执行代码：

![在此处输入图像描述](../Images/bdbdb8bc5ec2c03123ef8699324a7bfe.png)

在程序执行结束时观察寄存器视图：

![在此处输入图像描述](../Images/f0100bc0a353d6b88b950ff4beaf2003.png)

在 Keil UVision 工具栏中选择*Debug--> Start/Stop Debug Session*或按*Ctrl + F5*退出 Debugging Perspective。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-26T17:58:10.523

如果你将它构建成一个实际的可执行文件，那么你可以使用[QEMU](http://qemu.org/)的 ARM 模拟器来运行它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-26T18:06:27.973

您可以通过作为模拟器的 QEMU 运行 arm 代码，但我认为您不能直接输出到另一个软件，因为 QEMU 也是一个软件，但您可以使用共享内存甚至文件之类的东西（警告并发访问文件可能需要互斥体）将结果从模拟器传递到主机软件并返回，即使它可能有点慢

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-29T06:38:53.293

本文逐步介绍了使用 QEMU 模拟裸机 ARM 代码： [http ://balau82.wordpress.com/2010/02/28/hello-world-for-bare-metal-arm-using-qemu/](http://balau82.wordpress.com/2010/02/28/hello-world-for-bare-metal-arm-using-qemu/)

当然你不需要照顾 C 的东西，可以直接将你的程序集放在 startup.s

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-04T11:57:56.873

我想您所追求的是一种`printf`从 C 程序获取 ARM 汇编函数返回值的方法。您可以使用**arm-elf-gcc**`arm-elf-run`工具链提供的命令行模拟器来执行此操作。您可以从[http://www.gnuarm.com/bu-2.16.1_gcc-4.0.2-c-c++_nl-1.14.0_gi-6.4_x86-64.tar.bz2](http://www.gnuarm.com/bu-2.16.1_gcc-4.0.2-c-c++_nl-1.14.0_gi-6.4_x86-64.tar.bz2)下载工具链。（只需将存档解压缩到某个文件夹中，并可选择附加到系统的变量中）**`<path>/gunarm-4.0.2/bin/``PATH`**

 **首先，您需要将您的 ARM 代码安排到汇编 (.s) 文件中的汇编函数中，例如`myasm.s`. 现在您需要用 C（`test.c`例如）编写一个测试代码来调用汇编函数并使用我们熟悉的`printf()`. 您可以在下面找到源代码：

myasm.s:

```
 .align
                .global myasmfunc       @ Required, so that this func can be 
                                        @ accessed from main() in test.c

                                        @ A sample asm function that 
                                        @ returns the value 6
myasmfunc:      MOV     R0, #5
                ADD     R0, R0, #1      @ Now R0 contains 6.
                                        @ By the default ARM calling convention, 
                                        @ R0 will be used to pass return values
                                        @ to the calling function

                MOV     PC, LR          @ Return from myasmfunc() 
```

测试.c：

```
#include <stdio.h>

int myasmfunc(void);

int main()
{
    int retval = myasmfunc();           // The value that was in R0 now 
                                        // gets copied into retval

    printf("retval = %d\n", retval);    // And print it..

    return 0;
} 
```

准备好这两个文件后，您可以使用以下命令将它们构建为 ARM 二进制文件`arm-elf-gcc`

```
arm-elf-gcc -Wall test.c myasm.s -o test.out 
```

然后使用运行二进制文件`arm-elf-run`

```
arm-elf-run ./test.out 
```

`retval = 6`这将在您的 Ubuntu 终端上打印一个:)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-26T20:54:09.853

您可以使用此 git 存储库中的代码作为起点：

[https://github.iu.edu/geobrown/c335-assembly-examples](https://github.iu.edu/geobrown/c335-assembly-examples)

正如其他人所提到的，您首先需要安装 QEMU 来模拟 ARM 硬件，并且您需要有一些编译代码的方法（我推荐[CodeSourcery Lite Edition Toolchain](http://www.mentor.com/embedded-software/sourcery-tools/sourcery-codebench/editions/lite-edition/)）。然后编辑文件中的`TOOLROOT`条目`Makefile.common`以指向工具链的安装位置，并`make test`在编写汇编代码并将其外部化到 C 测试文件后简单地运行命令。

此存储库中的代码提供了一堆示例，您可以根据自己的目的进行调整，C 测试文件将允许您调用汇编代码并将结果输出到 Ubuntu 中的终端。:)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-04T16:03:27.503

我总是使用小型 qemu ARM VM 来测试 ARM 程序。

您可以从[debian](http://people.debian.org/~aurel32/qemu/armel/)下载它，然后运行它：（[更多信息](http://www.red-lang.org/2012/03/setting-up-arm-virtual-machine.html)）

```
qemu-system-arm  -localtime -m 256 -M versatilepb -kernel vmlinuz-2.6.32-5-versatile -initrd initrd.img-2.6.32-5-versatile -hda debian_squeeze_armel_standard.qcow2 -append "root=/dev/sda1" $@ 
```

由于它模拟了一个完整的 arm 系统，您可以在上面编写程序（例如使用 vim + gcc），然后在那里进行测试。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-29T06:55:20.290

安装qemu，为arm交叉编译，然后使用

```
qemu-system-arm ./a.out 
```

在您的终端上

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-02-04T13:39:24.020

不知道为什么还没有人提到它，但你可以使用**[Raspberry pi获得一个](http://www.raspberrypi.org/)*****“真实”且价格合理的 arm 平台***来进行试验。

默认情况下，Ubuntu 不附带它，据[我所知，它附带一个名为 Raspbian 的 Debian remix *（但也可以运行 Fedora、Arch 或 Debian plain）*](http://www.raspberrypi.org/downloads)。

当谈到对该平台的支持时，有相应的[书籍](http://www.amazon.co.uk/Raspberry-Pi-Assembly-Language-Beginners/dp/148112790X/ref=sr_1_1?ie=UTF8&qid=1359985103&sr=8-1)，它甚至还有[自己的 Stack Exchange 子社区](https://raspberrypi.stackexchange.com/)。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-09-22T23:09:54.037

如果您打算用 C 编写一个 ARM 仿真器，您可以使用此存储库中的代码作为起点。 [https://github.com/omufeed/ARMAssemblyEmulatorWithC](https://github.com/omufeed/ARMAssemblyEmulatorWithC) 它有一个大小为 4 的管道。实现了数据处理指令，它处理溢出和进位标志。还实现了分支和中断。它接受汇编指令作为输入，并在指令完成后模拟最终的内存状态。添加了一些示例输入作为代码注释。[在http://www.omidmufeed.com/arm-assembler-emulator-with-c/](http://www.omidmufeed.com/arm-assembler-emulator-with-c/)阅读更多内容**

# google-app-engine - GAE 中的 Google 帐户自定义

> ID：14539789
> 
> 赞同：1
> 
> 时间：2013-01-26T17:54:24.650
> 
> 标签：google-app-engine, google-account

好吧，这个问题是关于 GAE 中应用程序的身份验证系统的。我已经阅读了几篇文章，发现管理用户身份验证的最佳方法是使用 Google Accounts 服务。我已经阅读了一些建议（[这里](https://stackoverflow.com/questions/4972788/gae-new-google-account-interface)是其中之一），但它们并没有真正解决问题。

这是我想做的：我将使用 Google Accounts 服务，我想知道是否有办法更改登录和创建帐户页面，这样我就不必将用户重定向到 Google Sign -in form，而是将用户重定向到我自己的登录表单，然后将这些数据转发到 Google 服务器。我想对注册表做同样的事情。总之，我需要用户感觉她正在使用我的应用程序的登录名，但实际上是在使用 Google Accounts 服务。

这是我想做的一个例子：[这个](http://login.unal.edu.co/sso/auth.htm)网页使用谷歌帐户服务，但登录表单是一个自定义表单，然后（我想）将数据转发到谷歌服务器，然后让用户登录。

# java - 为什么我不能在 Java 中删除空格？

> ID：14539791
> 
> 赞同：0
> 
> 时间：2013-01-26T17:54:40.517
> 
> 标签：java, string, whitespace

我拼命地试图从字符串中删除空格（那晚我希望能够转换为 int），但我似乎无法做到这一点。

```
String input;
if(GamePlay.GameStart == true){
    input = Terminal.askString("Welcome to MASTERMIND! \n Please Give in Your Game Attributes \n");
            input.replaceAll("\\s","");
}else
    input = Terminal.askString(""); 
if (input.equals("Quit") || input.equals("quit")){
    Quit();

}
else if(GamePlay.GameStart == true){

    System.out.println(input); .......(code follows) 
```

你能告诉我，我做错了什么吗？PS：我也试过 \W" 和 \S"

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-26T17:55:37.243

代替

```
input.replaceAll("\\s",""); 
```

和

```
input = input.replaceAll("\\s",""); 
```

它将起作用，因为字符串是不可变的，因此`replaceAll()`不会更改您的字符串对象，它将返回一个新对象。因此，您将变量分配给`input`由返回的字符串`input.replaceAll("\\s","");`

此外，您应该尝试遵循 Java 命名约定，并让您的字段和变量以小写字母开头。

而且，您还可以更换

```
if(GamePlay.GameStart == true) { 
```

和

```
if(GamePlay.GameStart) { 
```

因为在您的版本中，您比较了`GamePlay.GameStart`with的值`true`，并且仅在评估为 时才执行该`if`块`true`，而在我的版本中，如果是`ìf`则执行该块（尽管编译器可能无论如何都会对其进行优化）。`GamePlay.GameStart``true`

另一方面，您也可以替换

```
if (input.equals("Quit") || input.equals("quit")){ 
```

和

```
if (input.equalsIgnoreCase("Quit")) { 
```

因为，我认为这很明显。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-26T17:55:43.573

字符串是不可变的。您需要分配由`String`返回的新创建的结果`replaceAll`：

```
input = input.replaceAll("\\s",""); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T17:55:38.647

`input.replaceAll("\\s","");`返回删除了空格的字符串。但是，如果您不保留对它的引用，您将无法看到结果。你可能的意思是：

```
input = input.replaceAll("\\s",""); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-26T17:57:53.637

对于初学者来说，这是一个非常常见的错误。

正如其他人所提到的，您需要知道它[`replaceAll`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)返回一个新字符串并且不会更改当前字符串，因为字符串在 Java 中是不可变的。

所以使用：

```
input=input.replaceAll("\\s",""); 
```

如果您愿意，您可以使用助手插件来帮助您解决此类错误，例如[**findBugs**](http://marketplace.eclipse.org/content/findbugs-eclipse-plugin)和[**codePro**](https://developers.google.com/java-dev-tools/download-codepro)。

# c# - 在表单的所有元素都已加载并在 C# 中可见之后，如何运行代码？

> ID：14539793
> 
> 赞同：0
> 
> 时间：2013-01-26T17:54:47.740
> 
> 标签：c#, .net, winforms

我知道这可能已经被问过了，但我不确定要搜索什么。我有一个 Windows 窗体应用程序，我想在所有内容都加载并可见后运行一些代码。我的应用程序只有一个标签。我想在您阅读标签并显示窗口后运行此代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T17:58:24.597

您可以订阅和使用[Form.Shown](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.shown.aspx)事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T17:59:13.783

使用[表单显示的事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.shown.aspx)。

```
public MainForm()
{
    this.Shown += new System.EventHandler(this.MainForm_Shown);
}
private void MainForm_Shown(object sender, EventArgs e)
{
    MessageBox.Show("Everything is loaded");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T18:24:45.160

您可以使用`Form.Shown`-Event （已经提到）或使用 a`Thread`来完成您想要的。我更喜欢线程，因为`Form`当它在后台运行代码时，你是负责任的。

查看[本](http://www.albahari.com/threading/)教程以获取更多信息`Threading`。

所以你的代码应该是这样的：

```
public MainForm()
{
        Thread t = new Thread (myMethodWithCode);          
        t.Start();                               
}
private void myMethodWithCode()
{
    //MY CODE
} 
```

# perl - 无法安装 CPAN 模块

> ID：14539795
> 
> 赞同：0
> 
> 时间：2013-01-26T17:54:54.337
> 
> 标签：perl, module, cpan

我正在尝试安装 CPAN 模块 Statistics::ChiSquare。我在我的 Windows 7 机器上运行 Strawbwerry perl 和 Padre。首先我安装了 cpan.pm。然后尝试安装模块，但收到以下错误：

```
C:\Windows\System32>cpan App::cpanminus

C:\Windows\System32>perl -MCPAN -e 'install Statistics::ChiSquare'
Set up gcc environment - 4.4.3
Can't find string terminator "'" anywhere before EOF at -e line 1. 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T17:56:01.513

对于 Windows，您必须在命令行上使用双引号：

```
perl -MCPAN -e "install Statistics::ChiSquare" 
```

或者干脆

```
cpan Statistics::ChiSquare 
```

# asp.net - .NET 库以编程方式与网页交互

> ID：14539798
> 
> 赞同：1
> 
> 时间：2013-01-26T17:55:27.500
> 
> 标签：asp.net, .net, asp.net-mvc, ui-automation

我需要从网站解析一些信息。

我知道有一些测试工具可以做到这一点，但我需要从 ASP.NET 网页代码实时完成。所以我想，我需要一个 .NET 库。

以前我只能生成一个特定的 URL 并解析 HTML，但现在我必须从表单点击后由 AJAX 调用生成的页面获取信息。所以我必须产生这些点击，对吧？

顺便说一句，我只有（有限的）服务器端 ASP.NET 经验。也许最佳解决方案与我怀疑的完全不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T17:59:17.510

你可以看看[`WatiN`](http://watin.org/)。

从主页：

> *   轻松自动化所有主要的 HTML 元素
> *   通过多个属性查找元素
> *   对页面和控制模型的本机支持。
> *   支持AJAX网站测试
> *   支持创建网页截图
> *   支持框架（跨域）和 iframe
> *   处理弹出对话框，如警报、确认、登录等。
> *   支持 HTML 对话框（模态和非模态）
> *   易于与您喜欢的（单元）测试工具集成
> *   适用于 Internet Explorer 6、7、8、9 和 FireFox 2 和 3
> *   可与任何 .Net 语言一起使用
> *   在 Apache 许可证 2.0 下获得许可
> *   下载次数超过 120.000 次。
> *   而且由于它是开源的，您可以自己添加和贡献新功能！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T17:58:20.850

看看[海狸鼠](https://github.com/featurist/coypu)。它包装了 WatiN 和 Selenium，为您提供帮助方法，使这种工作变得更加容易。

# javascript - Google gAnnounce.js 在 IE8 中不起作用

> ID：14539802
> 
> 赞同：0
> 
> 时间：2013-01-26T17:55:42.353
> 
> 标签：javascript, internet-explorer-8

我正在开发一个由其他人开发的网站。主页 (index.php) 运行 Google Announce 脚本 - gAnnounce.js。

该网站的所有者报告说该脚本“突然无法在 IE8 中运行”。该脚本适用于我尝试过的所有其他浏览器。但它在 IE8 中不起作用。

这是我在 IE8 中测试时收到的错误；

*此页面上的脚本出现错误。行：14 字符：1 错误：'v_content[...].0' 为空或不是对象代码：0 URL：[http](http://teleco4.com/js/gAnnounce.js) ://teleco4.com/js/gAnnounce.js *

该网站的所有者发誓它以前工作过。

有没有人对此公告滚动脚本问题有任何见解或经验？

在此先感谢大家。

**iogen70**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T18:20:30.013

查看正在使用此脚本的页面，即[teleco4.com](http://teleco4.com/)，您的问题似乎在于**第 401 行**`v_content`的数组终止。问题**不在***gAnnounce.js*脚本中。这是您的代码的相关部分：

 *****```
v_content=[['','\"Without the helpful, knowledgeable people at Teleco,
I would be lost.\" <br> <strong>Carol Coote, NYC Law
Department</strong>',''],['','\"Bravo Teleco. They did a great job for
us, with good communications and stayed until problem fixed. Thanks.\"
<br> <strong>Jay Brill ABC Training Center</strong>',''],['','\"Your
response time was remarkable – as was the good service – with NO down
time whatsoever,\" <br> <strong>Scott Rovner Vendor Lease Management
Group</strong>',''],] 
```

**注意最后声明的嵌套数组后面的附加逗号？！删除那个逗号，你应该没问题。**当数组未正确终止时，似乎 IE 有问题。您的代码应该是：

```
v_content=[['','\"Without the helpful, knowledgeable people at Teleco,
I would be lost.\" <br> <strong>Carol Coote, NYC Law
Department</strong>',''],['','\"Bravo Teleco. They did a great job for
us, with good communications and stayed until problem fixed. Thanks.\"
<br> <strong>Jay Brill ABC Training Center</strong>',''],['','\"Your
response time was remarkable – as was the good service – with NO down
time whatsoever,\" <br> <strong>Scott Rovner Vendor Lease Management
Group</strong>','']] 
```

我已经在本地测试了这个解决方案，它确实在 Internet Explorer 8 中开始正常工作。请自己查看：http: [//jsfiddle.net/2rZb5/](http://jsfiddle.net/2rZb5/)

干杯!*****

# java - Postgres中的COPY FROM和C3PO连接池

> ID：14539804
> 
> 赞同：8
> 
> 时间：2013-01-26T17:55:44.743
> 
> 标签：java, postgresql, jdbc, c3p0

我的 JAVA 程序中有以下代码，它允许我将文件中的数据复制到我的 Postgres 数据库中：

```
Connection con = DriverManager.getConnection("jdbc:postgresql://localhost:####/myDb", 
                                                   "myuser", "mypassword"); 
CopyManager cm = new CopyManager((BaseConnection) con);
cm.copyIn("COPY prices FROM STDIN WITH DELIMITER AS ','", 
             new BufferedReader(new FileReader(filepath)), buffersize); 
```

此代码工作正常，但我想使用连接池来管理我的连接，因为我有此代码运行许多文件。所以我使用[了 C3P0](http://www.mchange.com/projects/c3p0/)。

```
public static final ComboPooledDataSource cpds = new ComboPooledDataSource();

public class MyPooledConnection {
MyPooledConnection() throws PropertyVetoException {
    cpds.setDriverClass("org.postgresql.Driver"); 
    cpds.setJdbcUrl("jdbc:postgresql://localhost:5432/myStockDatabase"); 
    cpds.setUser("myUserName"); 
    cpds.setPassword("myPassword"); 
    cpds.setInitialPoolSize(4);
    cpds.setMinPoolSize(4);
    cpds.setMaxIdleTime(30);
    cpds.setMaxPoolSize(MAX_CONNECTIONS);
}

public static Connection getConnection() {
    return cpds.getConnection();
}
} 
```

但是，当我从上面的连接池中获得连接并尝试将其与 CopyManager 一起使用时，如下例所示，代码不起作用

```
Connection pooled_con = MyPooledConnection.getConnection();
CopyManager cm = new CopyManager((BaseConnection) pooled_con);
cm.copyIn("COPY prices FROM STDIN WITH DELIMITER AS ','", 
             new BufferedReader(new FileReader(filepath)), buffersize); 
```

我猜问题出在连接上，但我似乎无法弄清楚它有什么不同。我试过用 SQLException 和 IOException 来捕捉错误，但它也没有捕捉到。有没有人遇到过这个？

----***更新***----

感谢 a_horse_with_no_name 对此的指导。以下代码对我有用

```
// Cast the connection as a proxy connection
C3P0ProxyConnection proxycon = (C3P0ProxyConnection)cpds.getConnection();
try {

    // Pass the getCopyAPI (from PGConnection) to a method
    Method m = PGConnection.class.getMethod("getCopyAPI", new Class[]{});
    Object[] arg = new Object[] {};

    // Call rawConnectionOperation, passing the method, the raw_connection, 
    // and method parameters, and then cast as CopyManager
    CopyManager cm = (CopyManager) proxycon.rawConnectionOperation(m,
                                         C3P0ProxyConnection.RAW_CONNECTION,arg);
    cm.copyIn("COPY prices FROM STDIN WITH DELIMITER AS ','", new BufferedReader(new 
                                                FileReader(filepath)), buffersize);
} catch (NoSuchMethodException | IllegalAccessException 
                        | IllegalArgumentException | InvocationTargetException e) {
    // Deal with errors here
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T18:26:19.130

池不给你“本机”连接，它总是分发一个代理对象：

从手册：

> *C3P0 将这些对象包装在代理后面，因此您不能将 C3P0 返回的连接或语句强制转换为特定于供应商的实现类*

您可能无法通过 C3P0 使用 CopyManager。我不确定，但也许您可以使用此处描述的解决方法：[http ://www.mchange.com/projects/c3p0/#raw_connection_ops](http://www.mchange.com/projects/c3p0/#raw_connection_ops)

如果这不起作用，您可能想要使用不同的连接池（例如新的[Tomcat 7 JDBC-Pool](https://tomcat.apache.org/tomcat-7.0-doc/jdbc-pool.html#Getting_the_actual_JDBC_connection)），它可以让您访问底层的本机连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-05T14:33:59.603

```
CopyManager cm = new CopyManager(cpds.getConnection().unwrap(PgConnection.class)) 
```

为我工作。

# ajax - ajax POST的奇怪问题

> ID：14539805
> 
> 赞同：0
> 
> 时间：2013-01-26T17:55:50.050
> 
> 标签：ajax, django, jquery, post

我有这个带有表单的 html 页面

```
 <form  method="post" id="form1" name="form1" action="/status_comment/save">
 //Some text inputs
 <input type="text" name="new_comment" id="new_comment" onkeydown="post_comment(event,'13')" >
 </form> 
```

这是我执行 POST 调用的 javascript 函数

```
 function post_comment(event,item_id)
    {
     var keyCode = ('which' in event) ? event.which : event.keyCode;
     if(parseInt(keyCode)==13 && event.shiftKey!=1)
     {
       var str = $('#form1').serialize(); // Gets all the filled details
       $.post('/status_comment/save',
       str,
       function(data){
       alert(data);
       });
    }} 
```

后端是使用 Django 完成的，这是返回语句

```
data=simplejson.dumps(data)
return HttpResponse(data, mimetype='application/json') 
```

推荐网址是“/xyz”。

问题是，在提交表单后，它会自动重定向到“/status_comment/save”页面，而不是留在同一页面上。我尝试了 get 方法，它工作正常，但不是 POST 方法。

我尝试调试它，因此将 post call 中的 url 更改为引用 url，然后它刷新页面而不是什么都不做。

上面函数中的 alert() 命令也不起作用，所以它可能没有被输入。

我注意到有趣的事情，当查看 Web 开发人员控制台时，此页面中 POST 调用的发起者显示为“其他”，而 GET 调用和 POST 调用的发起者（在其他页面中，它的工作位置）是“ jquery-1.8.0.min.js:2"

有什么想法吗？谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T18:35:13.027

`enter`首先，如果可以避免，您真的不应该尝试捕获它。使用`submit`绑定。它使您的开发人员伙伴的一切变得更加明显和容易（我敢打赌，我不是唯一一个认为“ KeyCode 13*到底是什么？”的人）。*

我想知道是否更明确可能会有所帮助。你试过打电话`preventDefault`和`stopImmediatePropagation`吗？

```
$('#form1').submit(function(evt) {
    evt.preventDefault();
    evt.stopImmediatePropagation();
    // serialize and be AJAXy yada yada yada 
```

如果这不起作用，或者由于某种原因您更喜欢自己处理捕获`enter`，那么除了 keydown 处理程序之外，您可能还需要上面的代码。所以它会是：

```
<input type="text" name="new_comment" id="new_comment" onkeydown="post_comment(event,'13')" > 
```

...

```
$('#form1').submit(function(event) {
    event.preventDefault();
    event.stopImmediatePropagation();
}

function post_comment(event,item_id)
{
    event.preventDefault();
    event.stopImmediatePropagation();
  var keyCode = ('which' in event) ? event.which : event.keyCode;
  if(parseInt(keyCode)==13 && event.shiftKey!=1)
  {
    var str = $('#form1').serialize(); // Gets all the filled details
    $.post('/status_comment/save',
    str,
    function(data){
      alert(data);
    });
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T18:04:47.833

首先从输入中删除`onkeydown`属性：

```
<form method="post" id="form1" name="form1" action="/status_comment/save">
    //Some text inputs
    <input type="text" name="new_comment" id="new_comment" />
</form> 
```

然后只需使用 jquery 订阅`.submit()`此表单的事件并在其中执行 AJAX 请求。不要忘记从中返回 false 以确保取消默认操作并且浏览器保持在同一页面上：

```
$('#form1').submit(function() {
    var str = $(this).serialize(); // Gets all the filled details
    $.post(this.action, str, function(data) {
        alert(data);
    });
    return false; // <!-- that's the important part
}); 
```

# python - 将 UTF-8 字符串作为内容的 unicode 转换为 str

> ID：14539807
> 
> 赞同：10
> 
> 时间：2013-01-26T17:55:50.593
> 
> 标签：python, utf-8, python-2.x, mojibake, pyquery

我正在使用 pyquery 来解析页面：

```
dom = PyQuery('http://zh.wikipedia.org/w/index.php', {'title': 'CSS', 'printable': 'yes', 'variant': 'zh-cn'})
content = dom('#mw-content-text > p').eq(0).text() 
```

但我得到的`content`是一个带有 utf-8 编码内容的 unicode 字符串：

```
u'\xe5\xb1\x82\xe5\x8f\xa0\xe6\xa0\xb7\xe5\xbc\x8f\xe8\xa1\xa8...' 
```

我怎样才能在`str`不丢失内容的情况下将其转换为？

说清楚：

我想`conent == '\xe5\xb1\x82\xe5\x8f\xa0\xe6\xa0\xb7\xe5\xbc\x8f\xe8\xa1\xa8'`

不是`conent == u'\xe5\xb1\x82\xe5\x8f\xa0\xe6\xa0\xb7\xe5\xbc\x8f\xe8\xa1\xa8'`

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-26T18:18:30.247

如果您有一个`unicode`带有 UTF-8 字节的值，请编码为 Latin-1 以保留“字节”：

```
content = content.encode('latin1') 
```

因为 Unicode 代码点 U+0000 到 U+00FF 都与 latin-1 编码一对一地映射；因此，这种编码将您的数据解释为文字字节。

对于您的示例，这给了我：

```
>>> content = u'\xe5\xb1\x82\xe5\x8f\xa0\xe6\xa0\xb7\xe5\xbc\x8f\xe8\xa1\xa8'
>>> content.encode('latin1')
'\xe5\xb1\x82\xe5\x8f\xa0\xe6\xa0\xb7\xe5\xbc\x8f\xe8\xa1\xa8'
>>> content.encode('latin1').decode('utf8')
u'\u5c42\u53e0\u6837\u5f0f\u8868'
>>> print content.encode('latin1').decode('utf8')
层叠样式表 
```

`PyQuery`使用`requests`或`urllib`来检索 HTML，在 的情况下`requests`，使用`.text`响应的属性。这会根据单独在标头中设置的编码自动解码响应数据`Content-Type`，或者如果该信息不可用，则`latin-1`用于此（用于文本响应，但 HTML 是文本响应）。你可以通过传入一个`encoding`参数来覆盖它：

```
dom = PyQuery('http://zh.wikipedia.org/w/index.php', encoding='utf8',
              {'title': 'CSS', 'printable': 'yes', 'variant': 'zh-cn'}) 
```

此时您根本不必重新编码。

# iis-7 - 我在 IIS7 旁边安装了 ActivePerl64 5.16.1

> ID：14539819
> 
> 赞同：0
> 
> 时间：2013-01-26T17:56:50.443
> 
> 标签：iis-7, activeperl, otrs

我在 SBS2008 上与 IIS7 一起安装了 ActivePerl64 5.16.1

当我浏览该网站时，我收到 403 权限错误。

我已经检查了站点根文件夹的所有权限和所有登录凭据。

如果我打开所有目录浏览，我可以浏览文件夹，上一级。

该站点是 OTRS 的一个实例。

感激地收到任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:31:20.817

您应该确保`IIS_IUSRS`对 OTRS 文件夹具有“所有者”权限，这样您实际上有权查看 OTRS 文件夹中的内容，并且还允许您安装软件包。

# sql - 替换 Where 子句中的 concat 操作

> ID：14539821
> 
> 赞同：2
> 
> 时间：2013-01-26T17:57:13.603
> 
> 标签：sql, oracle

我们需要根据模式名称和表名称的组合查询 ALL_TABLES 视图。

有两个模式“A”和“B”，它们都有相同的表“TAB1”，这里我的要求是选择与模式A关联的表而不是模式B。

目前，我们正在对表名和所有者名进行连接操作，以实现如下所示

在单个查询中将有多个所有者和表名组合可用

```
select table_name from all_tables where concat(owner_name,table_name) in ('ATAB1','ATAB2','BTAB2','CTAB1') 
select table_name from all_tables where concat(owner_name,table_name) not in ('ATAB1','ATAB2','BTAB2','CTAB1') 
```

这里有三个模式 A、B 和 C 及其各自的表名组合

我们如何在不使用 CONCAT 函数的情况下获得相同的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T18:29:18.753

```
WHERE 0=1
 OR (owner_name = 'A' AND table_name = 'T1')
 OR (owner_name = 'B' AND table_name = 'T2')
 OR (owner_name = 'A' AND table_name = 'T3') 
```

奇怪`0=1`的是使下面的行在语法上相同，以便于维护和/或代码生成。优化器将其删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T18:56:41.667

您可以将需要匹配的字符串值排列到虚拟表中，然后在连接中使用该表作为过滤器：

```
SELECT t.*
FROM all_tables t
INNER JOIN (
  SELECT 'A' AS owner_name, 'TAB1' AS table_name FROM DUAL
  UNION ALL SELECT 'A', 'TAB2' FROM DUAL
  UNION ALL SELECT 'B', 'TAB2' FROM DUAL
  UNION ALL SELECT 'C', 'TAB1' FROM DUAL
) s
 ON t.owner_name = s.owner_name
AND t.table_name = s.table_name
; 
```

我希望这会给查询规划器比您目前的方法更多的优化空间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T19:13:03.370

Oracle 允许在一个条件中使用多个列（有关更多示例，`IN`请参阅[文档）。](http://docs.oracle.com/cd/B19306_01/server.102/b14200/expressions014.htm#i1033664)

```
select table_name
  from all_tables
 where (owner_name, table_name) in
         (('A','TAB1'), ('A','TAB2'), ('B','TAB2'), ('C','TAB1')) 
```

就性能而言，这可能等同于[usr 的答案](https://stackoverflow.com/a/14540125/249624)。

# objective-c - 为以编程方式创建的 UIButton 添加布局约束

> ID：14539823
> 
> 赞同：2
> 
> 时间：2013-01-26T17:57:16.177
> 
> 标签：objective-c, uiview, autolayout

我以编程方式创建了一个 UIButton，我想添加约束，以便它从底部保持相同的长度，因此它在 iPhone 4 和 5 上看起来都正确。

我知道如何在 Interface Builder 中执行此操作，但不知道如何以编程方式执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T18:31:26.250

将以下行放入**.pch**文件中

```
#define IS_IPHONE_5 ( fabs( ( double )[ [ UIScreen mainScreen ] bounds ].size.height - ( double )568 ) < DBL_EPSILON ) 
```

并编写`iPhone 5`如下代码

```
if( IS_IPHONE_5 )
      // Set Fram/ code for iPhone 5
else
     // Set Fram/ code for iPhone 4 
```

# java - Spring MVC：Bean 名称“POJO”的 BindingResult 和普通目标对象都不能用作请求属性

> ID：14539825
> 
> 赞同：0
> 
> 时间：2013-01-26T17:57:40.610
> 
> 标签：java, spring, spring-mvc

我的主页有两个超链接

```
<body>
<pre>

    <font face="Times New Roman" size="20"><a href="logincontrol.htm">Login</a></font>

    <font face="Times New Roman" size="20"><a href="registercontrol.htm">Register</a></font>

</pre> 
```

处理这个页面的控制器是......

```
package core;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.springframework.web.servlet.ModelAndView;
import org.springframework.web.servlet.mvc.multiaction.MultiActionController;

public class MainController extends MultiActionController {

    public ModelAndView logincontrol(HttpServletRequest request,
            HttpServletResponse response) throws Exception {
        System.out.println("Add method called");
        return new ModelAndView("LoginPage");
    }

    public ModelAndView registercontrol(HttpServletRequest request,
            HttpServletResponse response) throws Exception {
        System.out.println("Register method called");
        return new ModelAndView("RegisterPage");
    }
} 
```

然后当我点击主页上的超链接登录时，它会抛出异常

我的 LoginPage.jsp 文件

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>

<%@ taglib prefix="f" uri="http://www.springframework.org/tags/form"%>
<body>

<f:form method="post" commandName="POJO">
    <pre>
        User Name : <f:input path="username" />
        Password : <f:input path="password" />
    </pre>
</f:form>

<%-- <div>The request scope is: ${requestScope}</div>
<div>The command is: ${requestScope.POJO}</div> --%>
</body>
</html> 
```

我的控制器代码

```
package core;

import org.springframework.web.servlet.ModelAndView;
import org.springframework.web.servlet.mvc.SimpleFormController;

public class LoginController extends SimpleFormController{

    public LoginController() {
//      // TODO Auto-generated constructor stub
        setCommandClass(LoginPojo.class);
        setCommandName("POJO");
    }

@Override
protected ModelAndView onSubmit(Object command) throws Exception {

    System.out.println("Inside mainController "+command.toString());    
    return new ModelAndView("LoginPage");

}   

} 
```

我有一个名为 LoginPojo 的 Pojo 类

```
package core;

public class LoginPojo {

    String username;
    String password;

    public String getUsername() {
        return username;
    }
    public void setUsername(String username) {
        this.username = username;
    }
    public String getPassword() {
        return password;
    }
    public void setPassword(String password) {
        this.password = password;
    }

} 
```

在移动到 LoginPage.jsp 时，我收到 BindingResult 错误。帮助....

错误：

```
Jan 27, 2013 12:02:00 AM org.springframework.web.servlet.tags.RequestContextAwareTag doStartTag
SEVERE: Neither BindingResult nor plain target object for bean name 'POJO' available as request attribute
java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name 'POJO' available as request attribute
    at org.springframework.web.servlet.support.BindStatus.<init>(BindStatus.java:141)
    at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getBindStatus(AbstractDataBoundFormElementTag.java:178)
    at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getPropertyPath(AbstractDataBoundFormElementTag.java:198)
    at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getName(AbstractDataBoundFormElementTag.java:164)
    at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.autogenerateId(AbstractDataBoundFormElementTag.java:151)
    at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.resolveId(AbstractDataBoundFormElementTag.java:142)
    at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.writeDefaultAttributes(AbstractDataBoundFormElementTag.java:126)
    at org.springframework.web.servlet.tags.form.AbstractHtmlElementTag.writeDefaultAttributes(AbstractHtmlElementTag.java:421)
    at org.springframework.web.servlet.tags.form.InputTag.writeTagContent(InputTag.java:142)
    at org.springframework.web.servlet.tags.form.AbstractFormTag.doStartTagInternal(AbstractFormTag.java:102)
    at org.springframework.web.servlet.tags.RequestContextAwareTag.doStartTag(RequestContextAwareTag.java:79)
    at org.apache.jsp.view.LoginPage_jsp._jspx_meth_f_005finput_005f0(LoginPage_jsp.java:157)
    at org.apache.jsp.view.LoginPage_jsp._jspx_meth_f_005fform_005f0(LoginPage_jsp.java:118)
    at org.apache.jsp.view.LoginPage_jsp._jspService(LoginPage_jsp.java:79)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:433)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:389)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:333)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:471)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:402)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:329)
    at org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:238)
    at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:262)
    at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1180)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:950)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:405)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:964)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:515)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:304)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T18:19:56.497

`LoginPojo`使用 attributeName 向模型添加一个实例`POJO`。这将允许 Spring 标记建立数据绑定。即使您显示一个空白表单来插入记录，模型仍然需要包含一个可用于数据绑定的对象。

```
public class MainController extends MultiActionController {
    public ModelAndView logincontrol(HttpServletRequest request,
            HttpServletResponse response) throws Exception {
        System.out.println("Add method called");
        return new ModelAndView("LoginPage", "POJO", new LoginPojo());
    }
    //...
} 
```

# java - 如何在编辑期间获取 JTable 单元格的值

> ID：14539827
> 
> 赞同：2
> 
> 时间：2013-01-26T17:57:54.723
> 
> 标签：java, swing, jtable, listener

到目前为止我看到的解决方案是听单元格变化，即

```
 TableModelListener tableModelListener = new TableModelListener() {

        @Override
        public void tableChanged(TableModelEvent e) {
            if (e.getType() == TableModelEvent.UPDATE) {

                row = e.getFirstRow();
                col = e.getColumn();

                // do something
            }
        }
    }; 
```

但我需要在输入时和按回车之前获取单元格值、selectedRow 和 selectedColumn。怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T19:27:21.440

在您的, 此处显示[中](https://stackoverflow.com/a/10067560/230513)使用 a [`DocumentListener`](http://docs.oracle.com/javase/tutorial/uiswing/events/documentlistener.html),[此处](https://stackoverflow.com/a/8302423/230513)说明或 a [`DocumentFilter`](http://docs.oracle.com/javase/tutorial/uiswing/components/generaltext.html#filter), seen [here](https://stackoverflow.com/a/9611820/230513)。[`TableCellEditor`](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T19:11:25.243

暗示 ：

```
 if (jTable1.getCellEditor() == null) {
                    System.out.println("Not Edited");

                } else {

            System.out.println(jTable1.getValueAt(jTable1.getSelectedRow(),jTable1.getSelectedColumn()));
    } 
```

其中 jTable1 是您的 JTable 名称

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T18:14:35.833

使用[TableCellListener](http://tips4java.wordpress.com/2009/06/07/table-cell-listener/)来监听`TableModel`. 通过使用它，您可以获得表格中已编辑单元格的`row-index`、和。`column-index``old-value``new-value`

# javascript - chrome.windows.onRemoved 在窗口关闭后触发

> ID：14539835
> 
> 赞同：1
> 
> 时间：2013-01-26T17:58:52.240
> 
> 标签：javascript, google-chrome-extension

我正在开发一个 chrome 扩展程序，遇到了一个场景，其中 chrome 窗口已经创建，并且一堆侦听器附加到窗口上，这些侦听器一直在监视窗口。现在，如果我用浏览器窗口的取消按钮关闭窗口，我需要清理侦听器，然后关闭窗口。

`chrome.windows.onRemoved.addListener(function(integer windowId) {...});` [所以，我使用http://developer.chrome.com/extensions/windows.html#event-onRemoved](http://developer.chrome.com/extensions/windows.html#event-onRemoved)添加了一个监听器。但问题来了。如果我关闭窗口，流程是`[Closing the window]`->`[Firing the event]`但我想要相反`[Firing the event]`->`[Closing the event]`以便我可以清理侦听器然后关闭窗口。

我在这里缺少什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T05:31:40.060

您是否尝试过页面上的[beforeunload](https://developer.mozilla.org/en-US/docs/Mozilla_event_reference/beforeunload)或[unload](https://developer.mozilla.org/en-US/docs/Mozilla_event_reference/unload)事件。

# 参考

*   [卸载前](https://developer.mozilla.org/en-US/docs/Mozilla_event_reference/beforeunload)
*   [卸下](https://developer.mozilla.org/en-US/docs/Mozilla_event_reference/unload)

# javascript - 如何在 HTML5 画布中绘制带有文本的圆圈

> ID：14539837
> 
> 赞同：8
> 
> 时间：2013-01-26T17:59:06.060
> 
> 标签：javascript, jquery, html, canvas, html5-canvas

看起来很简单，可以在 HTML5 画布中绘制圆圈和文本，但我得到了非直观的行为。圆圈画得漂亮漂亮，然后我画的圆圈越多，***旧的***圆圈变得越来越八角形。对我来说很奇怪......此外，文本从旧圆圈中消失，只出现在最后绘制的圆圈上。使用画布执行此操作的正确方法是什么？

```
 $("#circles_container").on("click", "#circles_canvas", function(event) {
        var canvas = document.getElementById('circles_canvas');
        if (canvas.getContext) {
            var ctx = canvas.getContext("2d");
            var w = 16;
            var x = event.pageX;
            var y = Math.floor(event.pageY-$(this).offset().top);
            ctx.fillStyle = "rgb(200,0,0)";
            ctx.arc(x, y, w/2, 0, 2 * Math.PI, false);
            ctx.fill();

            ctx = canvas.getContext("2d");
            ctx.font = '8pt Calibri';
            ctx.fillStyle = 'white';
            ctx.textAlign = 'center';
            ctx.fillText('0', x, y+3);
        }
    }); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-26T18:02:15.753

只需在函数开头附近添加它：

```
ctx.beginPath(); 
```

你画的路总是更长。

### Stack Snippets 和[JS Fiddle中](http://jsfiddle.net/dystroy/sfkdJ/) *的演示（单击画布）*

```
var canvas = document.getElementById('circles_canvas');
canvas.addEventListener("click", function(event) {
  if (canvas.getContext) {
    var ctx = canvas.getContext("2d");
    var w = 16;
    var x = Math.floor(event.pageX-this.offsetLeft);
    var y = Math.floor(event.pageY-this.offsetTop);

    ctx.beginPath();
    ctx.fillStyle = "rgb(200,0,0)";
    ctx.arc(x, y, w/2, 0, 2 * Math.PI, false);
    ctx.fill();

    ctx.font = '8pt Calibri';
    ctx.fillStyle = 'white';
    ctx.textAlign = 'center';
    ctx.fillText('0', x, y+3);
  }
})
```

```
canvas {
  border: 1px solid black;
}
```

```
<h1>Click Canvas Below</h1>
<canvas id="circles_canvas"></canvas>
```

# c++ - C++ Getter/Setter（替代品？）

> ID：14539838
> 
> 赞同：8
> 
> 时间：2013-01-26T17:59:06.203
> 
> 标签：c++

好的，几乎在我阅读的所有地方，我都读到 getter/setter 是“邪恶的”。现在，作为一名经常在 PHP/C# 中使用 getter/setter 的程序员，我看不出它们是如何存活的。我读过它们破坏了封装等，但是，这是一个简单的例子。

```
class Armor{

  int armorValue;
public:
  Armor();
  Armor(int); //int here represents armor value
  int GetArmorValue();
  void SetArmorValue(int);
}; 
```

现在，让我们说 getter 和 setter 是“邪恶的”。您应该如何在初始化后更改成员变量。

例子：

```
Armor arm=Armor(128); //armor with 128 armor value

//for some reason I would like to change this armor value
arm.SetArmorValue(55); //if i do not use getters / setters how is this possible? 
```

可以说，无论出于何种原因，上述情况都不好。如果我的游戏将护甲值限制在 1 到 500 之间怎么办。（没有盔甲可以有一件盔甲超过 500 或少于 1 的盔甲）。

现在我的实现变成了

```
void Armor::SetArmor(int tArmValue){
      if (tArmValue>=1 && tArmValue<=500)
         armorValue=tArmValue;
      else
         armorValue=1;
} 
```

那么，如果不使用 getter/setter，我还能如何施加这个限制呢？如果不使用 getter/setter，我还能如何修改属性？armourValue 是否应该只是案例 1 中的公共成员变量，以及案例 2 中使用的 getter/setter？

好奇的。多谢你们

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-26T18:03:28.963

你误解了一些东西。*不*使用 getter/setter 会破坏封装并暴露实现细节，并且对于某些邪恶的定义可以被认为是“邪恶的”。

我想它们在某种意义上可以被认为是邪恶的，如果没有适当的 IDE/编辑器支持，用 C++ 编写它们有点乏味......

C++ 的一个陷阱是创建非常量引用 getter，它也允许修改。这与返回指向内部数据的指针相同，并将锁定内部实现的那部分，并且实际上并不比公开字段更好。

编辑：根据评论和其他答案，您听到的可能是指*始终为**每个*字段 创建非私有 getter 和 setter 。但我也不会称之为邪恶，只是愚蠢;-)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-26T19:02:34.103

稍微逆向：是的，getter 和 setter（又名 accessors 和 mutators）大多*是*邪恶的。

IMO，这里的邪恶不在于“破坏封装”，而在于简单地将变量定义为一种类型（例如，`int`），而实际上它*根本不是*那种类型。查看您的示例，您将 Armor an 称为`int`，但实际上并非如此。虽然它无疑是一个整数，但它肯定*不是*一个`int`，它（除其他外）定义了一个范围。虽然您的类型是整数，但它根本不打算支持与 a 相同的范围`int`。如果您想`Armor`成为 type `integer from 1 to 500`，请定义一个类型来直接表示它，并将其定义`Armor`为该类型的实例。在这种情况下，由于您要强制执行的不变量被定义为类型本身的一部分，因此您不需要

```
template <class T, class less=std::less<T> >
class bounded {
    const T lower_, upper_;
    T val_;

    bool check(T const &value) {
        return less()(value, lower_) || less()(upper_, value);
    }

    void assign(T const &value) {
        if (check(value))
            throw std::domain_error("Out of Range");
        val_ = value;
    }

public:
    bounded(T const &lower, T const &upper) 
        : lower_(lower), upper_(upper) {}

    bounded(bounded const &init) 
        : lower_(init.lower), upper_(init.upper), val_(init.val_)
    { }

    bounded &operator=(T const &v) { assign(v);  return *this; }

    operator T() const { return val_; }

    friend std::istream &operator>>(std::istream &is, bounded &b) {
        T temp;
        is >> temp;

        if (b.check(temp))
            is.setstate(std::ios::failbit);
        else
            b.val_ = temp;
        return is;
    }
}; 
```

有了这个，定义一些范围为 1..500 的盔甲变得非常简单：

```
bounded<int> armor(1, 500); 
```

根据情况，您可能更喜欢定义（例如）一个`saturating`类型，尝试分配超出范围的值是可以的，*但*实际分配的值将只是范围内最接近的值。

```
saturating<int> armor(1, 500);

armor = 1000;

std::cout << armor;  // prints "500" 
```

当然，我上面给出的也有点简单。`-=`对于您的装甲类型，支持（并且可能）可能会很方便，`+=`因此攻击最终会像`x.armor -= 10;`.

底线：getter 和 setter 的（或至少“一个”）主要问题是，它们通常指向您已将变量定义为一种类型，而您确实希望其他类型恰好在几种方法。

现在，确实有些语言（例如Java）未能为程序员提供编写此类代码所需的工具。在这里，我相信您使用 C++ 标签来表明您确实想编写 C++。C++ 确实为您提供了必要的工具，并且（至少在 IMO）您的代码将更好地利用它提供的工具，以便您的类型强制执行所需的语义约束，同时仍然使用干净、自然、可读的语法。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-26T18:03:41.620

简而言之：它们并不邪恶。

*只要*它们不泄露内部表示，它们就没有问题。我认为这里没有问题。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-03-26T10:42:11.923

对 get/set 函数的一个常见批评是它们可能被客户端代码滥用来执行逻辑上应该封装在类中的操作。例如，假设客户想要“抛光”他们的盔甲，并决定效果是“价值”增加 20，所以他们做他们的小获取和设置并且很高兴。然后其他地方的其他客户端代码决定生锈的盔甲应该将值降低 30，他们会尽自己的一份力量。同时，客户端代码中的其他十几个地方也允许对装甲进行抛光和生锈效果 - 以及说“加固”和“开裂”，并直接实施它们。对此没有中央控制... Armor 类的维护者没有能力做以下事情：

*   每件盔甲最多应用一次生锈、抛光、加固和开裂效果

*   为特定的逻辑效果调整添加到值或从值中减去的数字

*   确定新的“皮革”装甲类型不会生锈，并忽略客户试图让它生锈的尝试

另一方面，如果第一个客户端想要使盔甲生锈，但无法通过接口实现，他们会去找盔甲类的维护者说“嘿，给我一个函数来做这个”，然后其他人可以开始使用逻辑级别的“rust”操作，如果以后做我上面描述的那种事情变得有用，它们可以在 Armor 类中轻松集中地实现（例如，通过一个单独的布尔值来表示是否盔甲生锈了，或者是记录生锈效果的单独变量）。

因此，get/set 函数的问题在于它们阻碍了逻辑功能 API 的自然演变，而是将逻辑分布在整个客户端代码中，导致*极端*情况下无法维护的混乱局面。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-26T18:03:56.517

你的 getter/setter 看起来不错。

getter/setter 的替代方法是将成员变量公开。更准确地说，将变量分组到没有成员函数的结构中。并在你的班级内对这个结构进行操作

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-26T18:08:01.260

授予成员访问权限会减少封装，但有时这是必要的。最好的方法是使用 getter 和 setter。有些人在不需要此类访问时实施它们，只是因为他们可以并且这是一种习惯。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-26T18:31:22.843

吸气剂是邪恶的，只要：

1.  他们直接访问类的数据成员
2.  每次向类添加数据时都必须添加新的 getter
3.  每个 getter 中的数据行为不同

因此，好的吸气剂会执行以下操作：

1.  他们将请求转发给其他对象或从多个地方收集数据
2.  只需一个 getter 即可获取大量数据
3.  您获取的所有数据都以相同的方式处理

另一方面，二传手总是邪恶的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-26T18:08:06.570

> 在不使用 getter/setter 的情况下，我还能如何施加此限制？如果不使用 getter/setter，我还能如何修改属性？

您可以检查从变量中读取的内容，如果其值超出范围，请改用预定义值（如果可能）。

您还可以诉诸肮脏的技巧，例如保护变量下面的内存不被写入，捕获写入尝试以及禁止/忽略具有无效值的那些。这将是繁琐的实施和昂贵的执行。不过，它可能对调试有用。

# java - 错误的日期（）输出java

> ID：14539842
> 
> 赞同：-2
> 
> 时间：2013-01-26T17:59:14.507
> 
> 标签：java, date

首先让我说我知道 Date() 已被弃用，我在这里查看了其他问题，每个人都这么说。

我正在做一个涉及使用 Java Swing 开发 GUI 的作业，GUI 的一部分是出生日期字段，其中三个 JComboBox 分别代表日、月和年。

我有代码从每三个中获取所选项目，然后确定日期：

```
Integer day = (Integer) dobDay.getSelectedItem();
Integer month = (Integer) dobMonth.getSelectedItem();
Integer year = (Integer) dobYear.getSelectedItem();

Date dob = new Date(day, month, year); 
```

但是正确的日期不是输出的，我得到类似的东西

> 出生日期：1919 年 10 月 11 日星期六 00:00:00 GMT

如果我从组合框中选择 14、4 和 1900。

我不知道如何纠正这个问题，而且我很困惑，因为我有一个`controllerConsole`类来测试我的类和 Date() 工作的输入，

```
int dobD = 14;
int dobM = 4;
int dobY = 1990;

Employee e = new Employee("Gethin", 'M', new Date(dobD, dobM, dobY), "02",
    new Date(9, 9, 2011)); 
```

尽管 Date() 已被弃用，但从中我得到了我想要的输出：1990 年 4 月 14 日（我的 Date 类中有一个 monthAsString 构造函数，用于将月份编号转换为月份名称）。

我真的很感激这方面的任何帮助！由于 Date() 已被弃用，我已经看到提到的 Calendar 类作为对此的答案，但我的作业要求使用 Date() 类，我不确定如果我选择使用 Calendar 代替他们会怎么想.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T18:03:32.493

```
new Date(1990, 3, 14) 
```

返回：

```
Sat Apr 14 00:00:00 CEST 1990 
```

这是你所期望的。一切都在[文档](http://docs.oracle.com/javase/7/docs/api/java/util/Date.html#Date(int,%20int,%20int))中进行了解释（注意参数和有效值的顺序）：

> 公共日期（整数年，整数月，整数日期）
> 
> ### 参数：
> 
> *   year - 减去 1900 的年份。
> *   月 - 0-11 之间的月份。
> *   日期 - 1-31 之间的月份中的日期。

顺便说一句：

> 首先让我说我知道 Date() 已被弃用

不，这不对。它的设计很糟糕（可变的，令人困惑`toString()`的，并不真正代表... [date](http://en.wikipedia.org/wiki/Calendar_date)），但没有被弃用。只有您（错误地）使用的构造函数被弃用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T18:03:51.577

**不要使用过时的方法。**

它是`Date(year, month, day)`，而不是相反。

除此之外，年份值会自动添加 1900（因此，要获得 1999，该`year`值必须为 99），然后您就得到了。

**不要使用过时的方法。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T18:03:08.840

[Date 构造函数](http://docs.oracle.com/javase/6/docs/api/java/util/Date.html#Date%28int,%20int,%20int%29)按此顺序期望年、月和日。你通过日、月和年。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T18:05:25.747

如果您可以为月份提供字符串值，那么您可以使用 SimpleDateFormat 将字符串格式化为日期。使用串联，您可以获取格式为“2012 年 11 月 25 日”的日期。检查此链接以获取更多信息[http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)

# iphone - 永远移动的球

> ID：14539843
> 
> 赞同：0
> 
> 时间：2013-01-26T17:59:17.357
> 
> 标签：iphone, cocos2d-iphone, box2d, game-physics

如何创建一个会在屏幕上弹跳的身体 [A ball Body]，无论它在 cocos2d-box2d 中击中什么，都不会失去或获得速度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T19:09:07.940

将夹具的恢复设置为 1，将摩擦设置为 0。

Box2D 手册说：

> 恢复原状用于使物体反弹。恢复值通常设置在 0 和 1 之间。考虑将球放在桌子上。<...> 值 1 表示将准确反映球的速度。这被称为完全弹性碰撞。
> 
> 摩擦值为 0 会关闭摩擦

**没有摩擦和完美的弹性碰撞，你的球会在屏幕上弹跳，在静态环境中**永远不会失去或加速。如果环境不是静态的，那么与运动物体碰撞会改变球的速度。

为了解决这个问题，我建议下一个技巧。设置接触侦听器，并在 PostSolve 方法中正确的球速度如下：

```
void PostSolve(b2Contact* contact, const b2ContactImpulse* impulse)
{  
   if(contact->GetFixtureA()->GetBody() == YOUR_BALL_BODY ||
      contact->GetFixtureB()->GetBody() == YOUR_BALL_BODY)
   {
       float speed = YOUR_BALL_BODY->GetLinearVelocity().Length();
       float koef = YOUR_NEEDED_SPEED / speed;
       YOUR_BALL_BODY->SetLinearVelocity(koef * YOUR_BALL_BODY->GetLinearVelocity());
   }
} 
```

如何设置联系监听器见[那里](https://www.iforce2d.net/b2dtut/collision-callbacks)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T17:52:32.833

周期性地将物体的速度乘以标量`t/v.length`，其中 t 是目标速度。

另一个答案可能比您需要的要复杂一些。

# php - 如何用存储在另一个数组中的实际值替换数组中的 id 值？

> ID：14539848
> 
> 赞同：2
> 
> 时间：2013-01-26T17:59:56.177
> 
> 标签：php, arrays

我有两个关联数组，一个包含有关州（或省）的数据，一个包含不同国家/地区的数据。我从关系数据库中获取值，因此 states 数组不包含国家名称，而是包含国家 ID。

状态数组：

```
array(3) {
  array {
    'name' => 'Alabama',
    'country' => 1},
  array {
    'name' => 'Alberta',
    'country' => 2},
  array {
    'name' => 'Minnesota',
    'country' => 1}
} 
```

国家数组：

```
array(2) {
    1 => 'United States',
    2 => 'Canada'
} 
```

我想要的结果是：

```
array(3) {
  array {
    'name' => 'Alabama',
    'country' => 'United States'},
  array {
    'name' => 'Alberta',
    'country' => 'Canada'},
  array {
    'name' => 'Minnesota',
    'country' => 'United States'}
} 
```

我搜索和搜索并没有找到回答这个特定问题的问题。我确定我不是唯一拥有此类数据的人。也许我不是在寻找合适的条款。我确实在我的 Country 模型类中编写了一个函数来解决这个问题，但我认为必须有一种更有效的方法。

* * *

我目前的解决方案（它有效，但可能有更好的方法，对吧？）：

```
function replaceKeyValues($replaceArray,$replaceKey)
  {
  $countries = $this->get_countries();
  foreach ($replaceArray as &$itm) {
    if (isset($itm[$replaceKey])) {
      if (in_array($itm[$replaceKey], array_flip($countries))) {
        $itm[$replaceKey] = $countries[$itm[$replaceKey]];
      }
    }
  }
  return $replaceArray;
}

//called like this (for example)
$states = $this->Country->replaceKeyValues($states,'country'); 
```

* * *

**编辑：**我最终使用了 Jon 的建议，并稍微修改了原始函数以使其足够通用，以至于我的模型类中不再需要它。它现在在我的一个助手类中，我添加了另一个输入参数，即“主数据”数组。希望这可以帮助某人:-)

```
function replaceKeyValues($masterArray,$replaceArray,$replaceKey)
{
    foreach ($replaceArray as &$itm) {
        if (isset($itm[$replaceKey])) {
            if (isset($masterArray[$itm[$replaceKey]])) {
                $itm[$replaceKey] = $masterArray[$itm[$replaceKey]];
            }
        }
    }
    return $replaceArray;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T18:03:19.763

除了这个事实

```
if (in_array($itm[$replaceKey], array_flip($countries))) 
```

写成这样会好得多

```
if (isset($countries[$itm[$replaceKey]])) 
```

以及嵌套条件可以被取消嵌套的事实，这是基本的，没有真正的改进机会。

您当然可以替换`foreach`with`array_walk`和 lambda，但这不会有任何“更好”。

# objective-c - 创建 UINavigationController 以仅推送一个 VC 时遇到问题

> ID：14539849
> 
> 赞同：1
> 
> 时间：2013-01-26T18:00:08.113
> 
> 标签：objective-c, xcode, uiviewcontroller

我在 XCode 中诸如琐碎但基本的概念上遇到了麻烦。

我只想能够从头开始创建一个应用程序，并提供我的根视图控制器，并推送和弹出一些 VC 以供练习。

相信我，我看了很多帖子，但似乎没有一个能奏效。

所以我的步骤是，我创建了一个新的 xcode 项目，并创建了一个空应用程序。我想地狱，让我们在这里学习，而不是创建一个单一的视图应用程序。

我去了新文件，然后添加了一个 obj-c 类并用它创建了 XIB。我称它为 RootViewController。

所以这是我的应用程序委托 h 文件。

```
#import <UIKit/UIKit.h>
#import "RootViewController.h"

UINavigationController *navVC;

@interface VCTestAppDelegate : UIResponder <UIApplicationDelegate>

@property (strong, nonatomic) UIWindow *window;
@property (retain, nonatomic) UINavigationController *navVC;

@property (readonly, strong, nonatomic) NSManagedObjectContext *managedObjectContext;
@property (readonly, strong, nonatomic) NSManagedObjectModel *managedObjectModel;
@property (readonly, strong, nonatomic) NSPersistentStoreCoordinator *persistentStoreCoordinator;

- (void)saveContext;
- (NSURL *)applicationDocumentsDirectory;

@end 
```

请注意，我正在创建自己的 UINavigationController，名为 navVC。

然后这是我的appledelegate m文件的开头和相关部分......

```
#import "VCTestAppDelegate.h"

@implementation VCTestAppDelegate

@synthesize managedObjectContext = _managedObjectContext;
@synthesize managedObjectModel = _managedObjectModel;
@synthesize persistentStoreCoordinator = _persistentStoreCoordinator;
@synthesize navVC;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

    UIViewController *VC1 = [[UIViewController alloc]initWithNibName:@"RootViewController" bundle:nil];
    navVC = [[UINavigationController alloc]initWithRootViewController:VC1];

    [[self window] setRootViewController:navVC];
    [self.window makeKeyAndVisible];
    return YES;
} 
```

我刚刚在那个根 VC 上创建了一个标签来验证它的显示。嗯，不。没有语法错误也没有崩溃，模拟器只是显示黑屏。我和我到底在做什么？然后，一旦我弄清楚这一点，我想练习推送和弹出视图控制器。

我不敢相信我无法弄清楚这一点。我最近发布了自己的应用程序，但使用了故事板。我现在想继续进行另一个项目，但我希望在不使用情节提要的情况下获得更扎实的基础知识。我不想只限制 iOS 5 及更高版本的用户。

顺便说一句，我什至尝试启动一个单视图应用程序并添加一个 VC，当我单击我的按钮时，它“应该”；推第二个VC。我知道它的语法，但是当我测试我正在弄乱的另一个应用程序时，它会进入按钮的 IBAction 块，但它不会推动那个 VC....

我尝试了 [self navigationController] pushview... 我什至只尝试了 [navVC pushview...] 没有任何效果。

我不明白我缺少什么以及人们如何手动制作应用程序（在故事板之前以编程方式）。

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T20:59:05.897

您需要创建窗口。如果您查看空应用程序的默认代码，它将具有以下行：

```
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]]; 
```

如果您正在创建一个简单的练习应用程序，那么您将如何处理核心数据内容？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T18:43:48.513

我唯一能想到的是`UIWindow *window`您的应用程序当前需要的是`nil`.

您说您制作了一个 XIB：尝试将“窗口”和“导航控制器”插座与 XIB 中的正确控制器相关联。

Control+单击从控制器到窗口视图。它应该为您提供单击“窗口”的选项。这应该将窗口与控制器相关联。尝试对 UINavigationController 的控制器和视图执行相同的操作。

# php - Excel - 从每个工作表中获取指定的行

> ID：14539852
> 
> 赞同：0
> 
> 时间：2013-01-26T18:00:44.013
> 
> 标签：php, phpexcel

我有一个 20 张的 Excel 文件。每张工作表有 61 行（1 行用于标题，60 行用于数据）。
我想创建一个重复文件，只使用原始文件每张纸的 **第二**行和**最后一行**

所以在我的新文件中，一张纸上有 40 行

我已经尝试过 PHPExcel，但没有一种方法可以帮助我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T20:39:28.650

使用 PHPExcel：读取文件是合乎逻辑的第一步，然后循环遍历每个工作表并使用 removeRow() 方法删除您不想要的行，然后保存文件......非常简单。

```
require_once 'Classes/PHPExcel.php';

$objReader = PHPExcel_IOFactory::createReader('Excel2007');
$objPHPExcel = $objReader->load("myFileName.xlsx");

// Iterate through each of the 20 worksheets
foreach ($objPHPExcel->getWorksheetIterator() as $worksheet) {
    // Remove rows 3-60 (58 rows starting from row 3)
    // This will move the last row (61) up to row 3
    $worksheet->removeRow(3,58);
    // Remove row 1
    $worksheet->removeRow(1);
}

$objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'Excel2007');
$objWriter->save('myFileName.xlsx'); 
```

# css - 如何将第三方网站的页面与自定义样式集成？

> ID：14539854
> 
> 赞同：0
> 
> 时间：2013-01-26T18:00:50.973
> 
> 标签：css

我的一个客户页面（例如搜索页面和联系页面）托管在第三方网站上，不允许在页面上添加自定义样式，选项非常有限。有没有办法将页面与网站整合，使其风格与其他页面风格最匹配？我尝试使用 iframe 但这并不能解决目的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T19:58:11.323

[同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)不允许您更改第三方网站。如果他们不允许直接在他们的页面上插入样式或脚本，那么你就不走运了。如果他们提供其他方式来访问页面内容 (API)，您需要与他们核实。

# jquery - 似乎无法让 jquery $.load 工作

> ID：14539855
> 
> 赞同：1
> 
> 时间：2013-01-26T18:01:02.540
> 
> 标签：jquery

```
$(function() {
    $("#delete").click(function() {
        var r= confirm("Are you sure you want to delete these servers?");
        if(r == true){
                var inputs = document.getElementsByTagName('input');
                for (var i=0, iLen=inputs.length; i<iLen; i++) {
                if (inputs[i].type == 'checkbox'){
                    if(inputs[i].checked && inputs[i].name != "checkall"){
                        $("#modifyserver").load("deleteserver.php?ip=" + inputs[i].name);
                    }
                }
            }
            document.location.reload(true)
        }
    });
}); 
```

以上是我的代码..我似乎无法让它工作。它只是不会加载页面，但如果我在 if 语句中添加警报，它会说它会提醒我。意思`$("#modifyserver").load("deleteserver.php?ip=" + inputs[i].name);`是，这是不工作的部分。

# algorithm - 功能性“除一个之外的所有”

> ID：14539857
> 
> 赞同：1
> 
> 时间：2013-01-26T18:01:22.603
> 
> 标签：algorithm, functional-programming, sml

*我如何声明接受数字和数字列表的函数，如果列表中没有这样的数字，则返回 NONE，否则返回没有*这个数字的列表选项（Haskell 中的“可能”）？如果有多个这样的数字，函数必须只删除其中的第一个。

```
all_except_one : 'a * 'a list -> 'a list option 
```

我不知道该怎么做：\我问任何语言的任何代码，只是一些关于函数式算法的提示（最初我必须在 SML 中解决这个问题）。我也不能在我的任务中使用高阶函数。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-26T18:18:00.047

这个解决方案怎么样？

```
fun all_except_one(s, lst) =
    let
        fun helper e =
            case e of
                ([], _) => NONE
               |(x::xs, acc) => if x = s
                                then SOME (acc @ xs)
                                else helper(xs, x :: acc)
    in helper(lst, []) end 
```

没有辅助函数和没有尾递归也是如此。

```
fun all_except_one (_, []) = NONE
  | all_except_one (s, x::xs) = if x = s
                                then SOME xs
                                else case all_except_one(s, xs) of
                                           NONE => NONE
                                         | SOME ys => SOME (x::ys) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T18:09:53.827

怎么样（Haskell语法）：

```
allbutone n xs
    | n `elem` xs = Just (filter (!=n) xs)
    | otherwise   = Nothing 
```

# c++ - 尝试初始化 wregex 对象时缩小 boost 的 regex_traits_defaults.hpp 中的转换警告

> ID：14539859
> 
> 赞同：0
> 
> 时间：2013-01-26T18:02:00.173
> 
> 标签：c++, regex, boost, widestring

第一行编译正常。第二个也产生工作EXE，但另外我得到这个大错误：

```
In file included from d:\boost/boost/regex/v4/regex_traits.hpp:35:0,
                 from d:\boost/boost/regex/regex_traits.hpp:27,
                 from d:\boost/boost/regex/v4/regex.hpp:39,
                 from d:\boost/boost/regex.hpp:31,
                 from test.cpp:4:
d:\boost/boost/regex/v4/regex_traits_defaults.hpp: In instantiation of 'const charT* boost::re_detail::get_escape_R_string() [with charT = wchar_t]':
d:\boost/boost/regex/v4/basic_regex_parser.hpp:804:54:   required from 'bool boost::re_detail::basic_regex_parser<charT, traits>::parse_extended_escape() [with charT = wchar_t; traits = boost::regex_traits<wchar_t>]'
d:\boost/boost/regex/v4/basic_regex_parser.hpp:308:36:   required from 'bool boost::re_detail::basic_regex_parser<charT, traits>::parse_extended() [with charT = wchar_t; traits = boost::regex_traits<wchar_t>]'
d:\boost/boost/regex/v4/basic_regex_parser.hpp:134:10:   required from 'void boost::re_detail::basic_regex_parser<charT, traits>::parse(const charT*, const charT*, unsigned int) [with charT = wchar_t; traits = boost::regex_traits<wchar_t>]'
d:\boost/boost/regex/v4/basic_regex.hpp:215:7:   required from 'void boost::re_detail::basic_regex_implementation<charT, traits>::assign(const charT*, const charT*, boost::re_detail::basic_regex_implementation<charT, traits>::flag_type) [with charT = wchar_t; traits = boost::regex_traits<wchar_t>; boost::re_detail::basic_regex_implementation<charT, traits>::flag_type = unsigned int]'
d:\boost/boost/regex/v4/basic_regex.hpp:661:4:   required from 'boost::basic_regex<charT, traits>& boost::basic_regex<charT, traits>::do_assign(const charT*, const charT*, boost::basic_regex<charT, traits>::flag_type) [with charT = wchar_t; traits = boost::regex_traits<wchar_t>; boost::basic_regex<charT, traits>::flag_type = unsigned int]'
d:\boost/boost/regex/v4/basic_regex.hpp:382:33:   required from 'boost::basic_regex<charT, traits>& boost::basic_regex<charT, traits>::assign(const charT*, const charT*, boost::basic_regex<charT, traits>::flag_type) [with charT = wchar_t; traits = boost::regex_traits<wchar_t>; boost::basic_regex<charT, traits> = boost::basic_regex<wchar_t, boost::regex_traits<wchar_t> >; boost::basic_regex<charT, traits>::flag_type = unsigned int]'
d:\boost/boost/regex/v4/basic_regex.hpp:367:48:   required from 'boost::basic_regex<charT, traits>& boost::basic_regex<charT, traits>::assign(const charT*, boost::basic_regex<charT, traits>::flag_type) [with charT = wchar_t; traits = boost::regex_traits<wchar_t>; boost::basic_regex<charT, traits> = boost::basic_regex<wchar_t, boost::regex_traits<wchar_t> >; boost::basic_regex<charT, traits>::flag_type = unsigned int]'
d:\boost/boost/regex/v4/basic_regex.hpp:336:7:   required from 'boost::basic_regex<charT, traits>::basic_regex(const charT*, boost::basic_regex<charT, traits>::flag_type) [with charT = wchar_t; traits = boost::regex_traits<wchar_t>; boost::basic_regex<charT, traits>::flag_type = unsigned int]'
test.cpp:15:37:   required from here
d:\boost/boost/regex/v4/regex_traits_defaults.hpp:329:73: warning: narrowing conversion of ''\37777777605'' from 'char' to 'const wchar_t' inside { } [-Wnarrowing]
d:\boost/boost/regex/v4/regex_traits_defaults.hpp:331:64: warning: narrowing conversion of ''\37777777605'' from 'char' to 'const wchar_t' inside { } [-Wnarrowing] 
```

代码 ：

```
#include <iostream>
#include <boost/regex.hpp>

int main() {
  boost::regex narrow_str_regex("a+");
  boost::wregex wide_str_regex(L"a+");
} 
```

提升：http: [//sourceforge.net/projects/boost/files/boost/1.52.0/boost_1_52_0.7z](http://sourceforge.net/projects/boost/files/boost/1.52.0/boost_1_52_0.7z)

编译器：http: [//sourceforge.net/projects/mingwbuilds/files/host-windows/releases/4.7.2/32-bit/threads-posix/sjlj/x32-4.7.2-release-posix-sjlj-rev7。 7z](http://sourceforge.net/projects/mingwbuilds/files/host-windows/releases/4.7.2/32-bit/threads-posix/sjlj/x32-4.7.2-release-posix-sjlj-rev7.7z)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T20:12:51.960

这是一个[已知的错误](https://svn.boost.org/trac/boost/ticket/7263)，具体影响：

*   提升 1.51 / 1.52
*   GCC 4.7.2
*   启用 C++11

使用 32 位编译器时，这似乎是编译器包含的库中的一个错误。

# reflection - Object.class.getMethod("equals", Object.class) 不适用于 BeanShell

> ID：14539863
> 
> 赞同：1
> 
> 时间：2013-01-26T18:02:21.530
> 
> 标签：reflection, beanshell

Object.class.getMethod(methodName, Object.class);

没有被 bsh.Interpreter 执行并抛出异常

```
 Typed variable declaration : reflection error: bsh.ReflectError: Method getMethod( java.lang.String, java.lang.Class ) not found in class'java.lang.Class' 
```

知道如何解决这个问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T12:44:10.410

Beanshell 不支持可变参数，因此您需要按照 Java 语言的旧版本将其放入数组中。

```
Object.class.getMethod("equals", new Class[] { Object.class } ); 
```

# php - IE（所有版本）在使用 $.post(JSON) 加载内容时添加“未定义”

> ID：14539866
> 
> 赞同：0
> 
> 时间：2013-01-26T18:02:28.590
> 
> 标签：php, jquery, ajax, json, internet-explorer

当我单击一个链接时，它会重定向到一个 PHP 文件。内容以 JSON 格式加载和获取并显示。那里没有问题。

但是，在所有版本的 IE 中，内容都会在`"undefined"`内容之前显示一个字符串，该字符串以`$.post(JSON)`.

***注意：***在请求的 PHP 文件中，数据以`json_encode()`.

**jQuery代码：**

```
$(".letter").click(function(e){
    e.preventDefault();
    $.ajaxSetup({cache:false});
    var letter= $(this).text();
    $.post("http://localhost/ajax.php/", {letter:letter},function(data) {
       var listdata;
       $.each(data, function(i,item) {
            listdata += "<tr>";
            listdata += "<td>"+item.book_name+"</td>";
            listdata += "<td>"+item.author+"</td>";
            listdata += "</tr>";
       });
      $("#result").empty();
      $("#result").html(listdata);
    },"json"
   );
}); 
```

**HTML 代码：**

```
<div id="letters">
  <span class="letter">A</span>
  <span class="letter">B</span>
  <span class="letter">C</span>
  <span class="letter">D</span>
</div>
<h3>My Books </h3>
<table id="result"> </table> 
```

**在 IE 浏览器中，显示如下：**

```
My Books 
undefined  

| Science and Tech | Author1 |
| Web Development  | Author2 | 
```

我该如何解决这个 IE 问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T18:06:29.817

默认情况下，您必须初始化`listdata`为一个空字符串`var listdata = '';`，它是未定义的。

# c++ - 如何在纯 C/C++ (cout/printf) 中显示进度指示器？

> ID：14539867
> 
> 赞同：93
> 
> 时间：2013-01-26T18:02:30.073
> 
> 标签：c++, c, user-interface, c++11, io

我正在用 C++ 编写一个控制台程序来下载一个大文件。我知道文件大小，我启动了一个工作线程来下载它。我想显示一个进度指示器，让它看起来更酷。

如何在 cout 或 printf 中在不同时间但在同一位置显示不同的字符串？

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2013-01-26T18:11:11.070

With a fixed width of your output, use something like the following:

```
float progress = 0.0;
while (progress < 1.0) {
    int barWidth = 70;

    std::cout << "[";
    int pos = barWidth * progress;
    for (int i = 0; i < barWidth; ++i) {
        if (i < pos) std::cout << "=";
        else if (i == pos) std::cout << ">";
        else std::cout << " ";
    }
    std::cout << "] " << int(progress * 100.0) << " %\r";
    std::cout.flush();

    progress += 0.16; // for demonstration only
}
std::cout << std::endl; 
```

[http://ideone.com/Yg8NKj](http://ideone.com/Yg8NKj)

```
[>                                                                     ] 0 %
[===========>                                                          ] 15 %
[======================>                                               ] 31 %
[=================================>                                    ] 47 %
[============================================>                         ] 63 %
[========================================================>             ] 80 %
[===================================================================>  ] 96 % 
```

Note that this output is *shown* one line below each other, but in a terminal emulator (I think also in Windows command line) it will be printed *on the same line*.

At the very end, don't forget to print a newline before printing more stuff.

If you want to remove the bar at the end, you have to overwrite it with spaces, to print something shorter like for example `"Done."`.

Also, the same can of course be done using `printf` in C; adapting the code above should be straight-forward.

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2013-01-26T18:05:55.227

您可以使用没有换行符 (\n) 的“回车”(\r)，并希望您的控制台做正确的事情。

* * *

## 回答 #3

> 赞同：55
> 
> 时间：2016-03-30T17:33:36.927

对于`C`具有可调节进度条宽度的解决方案，您可以使用以下内容：

```
#define PBSTR "||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||"
#define PBWIDTH 60

void printProgress(double percentage) {
    int val = (int) (percentage * 100);
    int lpad = (int) (percentage * PBWIDTH);
    int rpad = PBWIDTH - lpad;
    printf("\r%3d%% [%.*s%*s]", val, lpad, PBSTR, rpad, "");
    fflush(stdout);
} 
```

它将输出如下内容：

```
 75% [||||||||||||||||||||||||||||||||||||||||||               ] 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2013-01-26T21:28:05.917

看看 boost progress_display

[http://www.boost.org/doc/libs/1_52_0/libs/timer/doc/original_timer.html#Class%20progress_display](http://www.boost.org/doc/libs/1_52_0/libs/timer/doc/original_timer.html#Class%20progress_display)

我认为它可能会满足您的需求，并且我相信它只是一个标头库，因此无需链接

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2013-01-26T18:05:41.957

您可以打印回车符 ( `\r`) 以将输出“光标”移回当前行的开头。

对于更复杂的方法，请查看 ncurses（基于控制台文本的界面的 API）之类的东西。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2016-03-20T19:42:30.820

我知道我回答这个问题有点晚了，但我做[了一个简单的课程，完全符合你的要求。](https://github.com/ETCG/pBar)（请记住，我`using namespace std;`在此之前写过。）：

```
class pBar {
public:
    void update(double newProgress) {
        currentProgress += newProgress;
        amountOfFiller = (int)((currentProgress / neededProgress)*(double)pBarLength);
    }
    void print() {
        currUpdateVal %= pBarUpdater.length();
        cout << "\r" //Bring cursor to start of line
            << firstPartOfpBar; //Print out first part of pBar
        for (int a = 0; a < amountOfFiller; a++) { //Print out current progress
            cout << pBarFiller;
        }
        cout << pBarUpdater[currUpdateVal];
        for (int b = 0; b < pBarLength - amountOfFiller; b++) { //Print out spaces
            cout << " ";
        }
        cout << lastPartOfpBar //Print out last part of progress bar
            << " (" << (int)(100*(currentProgress/neededProgress)) << "%)" //This just prints out the percent
            << flush;
        currUpdateVal += 1;
    }
    std::string firstPartOfpBar = "[", //Change these at will (that is why I made them public)
        lastPartOfpBar = "]",
        pBarFiller = "|",
        pBarUpdater = "/-\\|";
private:
    int amountOfFiller,
        pBarLength = 50, //I would recommend NOT changing this
        currUpdateVal = 0; //Do not change
    double currentProgress = 0, //Do not change
        neededProgress = 100; //I would recommend NOT changing this
}; 
```

如何使用的示例：

```
int main() {
    //Setup:
    pBar bar;
    //Main loop:
    for (int i = 0; i < 100; i++) { //This can be any loop, but I just made this as an example
        //Update pBar:
        bar.update(1); //How much new progress was added (only needed when new progress was added)
        //Print pBar:
        bar.print(); //This should be called more frequently than it is in this demo (you'll have to see what looks best for your program)
        sleep(1);
    }
    cout << endl;
    return 0;
} 
```

注意：我公开了所有类的字符串，以便可以轻松更改栏的外观。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2015-02-27T14:00:20.857

另一种方法可能是显示“点”或您想要的任何字符。下面的代码将每隔 1 秒将进度指示器 [加载的排序...] 打印为点。

PS：我在这里使用睡眠。如果担心性能，请三思。

```
#include<iostream>
using namespace std;
int main()
{
    int count = 0;
    cout << "Will load in 10 Sec " << endl << "Loading ";
    for(count;count < 10; ++count){
        cout << ". " ;
        fflush(stdout);
        sleep(1);
    }
    cout << endl << "Done" <<endl;
    return 0;
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-12-24T10:30:54.510

这是我做的一个简单的：

```
#include <iostream>
#include <windows.h>

using namespace std;

int barl = 20;

int main() {
   system("color 0e");  
   cout << "[";     
   for (int i = 0; i < barl; i++) {         
      Sleep(100);       
      cout << ":";  
   }
   cout << "]";
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-08-01T17:36:31.767

可能这段代码会帮助你 -

```
#include <iostream>
#include <string>
#include <thread>
#include <chrono>
#include <cmath>

using namespace std;

void show_progress_bar(int time, const std::string &message, char symbol)
{
    std::string progress_bar;
    const double progress_level = 1.42;

    std::cout << message << "\n\n";

    for (double percentage = 0; percentage <= 100; percentage += progress_level)
    {
        progress_bar.insert(0, 1, symbol);
        std::cout << "\r [" << std::ceil(percentage) << '%' << "] " << progress_bar;
        std::this_thread::sleep_for(std::chrono::milliseconds(time));       
    }
    std::cout << "\n\n";
}

int main()
{
    show_progress_bar(100, "progress" , '#');
} 
```

# excel - 使用宏打开特定表的默认 Excel 数据表单

> ID：14539871
> 
> 赞同：0
> 
> 时间：2013-01-26T18:02:59.380
> 
> 标签：excel, excel-2010, vba

我正在处理一个包含多个大表的电子表格，这些表的信息是通过我创建的基于电子表格的用户表单输入的，因为我不熟悉或不习惯使用 vba 用户表单，我正在尝试调用条目以进行编辑。

我能想到的最简单的方法是打开默认的 excel 数据表单。我需要知道的是；有没有办法为已经输入标准的特定表打开这个数据表单？

例如。我需要编辑产品表，所以我已经知道我正在编辑产品表并且我知道产品的名称。我有一个小用户表单，同样基于电子表格，我在其中选择条目类型（在本例中为产品），然后输入产品名称。我想要做的是使用该信息打开产品表的数据表单，其中已填写名称的条件字段，以减少搜索条目所花费的时间，因为这些表有数百个条目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T00:15:58.563

对于这个简单的示例，我将您的工作表与产品一起称为“产品”。有两列，A 列中的名称和 B 列中的 ID

在用户窗体上，我放置了两个名为

*   文本框_产品名称

*   TextBox_ProductID

然后，我将以下代码添加到 Userform 中，只要产品名称文本框的值发生更改并且失去焦点，就会触发该代码。

```
Private Sub TextBox_Productname_Change()

    ' Clear the content of all Textboxes but the Productname
    TextBox_ProductID.Value = ""

    ' Analyse the Cells in the Worksheet called "Products"
    With Worksheets("Products")

        ' Assume in the first row are the headers so start
        ' looking at the second row and go to the final one
        For i = 2 To .UsedRange.Rows.Count

            ' check whether the value in the first column
            ' matches the value of the Textbox_Productname
            If .Cells(i, 1) = TextBox_Productname.Value Then

                ' If there is a match copy the values of all
                ' the other columns to the textboxes
                TextBox_ProductID.Value = .Cells(i, 2)
            End If

        Next i

    End With

End Sub 
```

# .net - 将图像从 Windows（电话）运行时组件 (c++/cx) 传递到本机 c++ 算法

> ID：14539876
> 
> 赞同：0
> 
> 时间：2013-01-26T18:03:19.237
> 
> 标签：.net, windows-8, windows-runtime, windows-phone-8

我正在寻找有关如何将图像从 Windows 运行时组件传递到本机算法的演示/教程。

1）我应该将路径传递到系统上的文件并让我的天真的库加载图像吗？

2）我应该传递字节数组吗？

我可以处理它以同时使用文件系统和来自摄像机的实时流吗？

评论：我可能遗漏了一些信息，抱歉，用于处理图像的算法是 c++ 中的跨平台实现。我想将此暴露给 WP8 和 Win8 应用程序。因此，我需要将图像从 UI 获取到运行时组件，然后再到 c++ 库。我同意我不想多次解码它。我只需要一些建议/示例这在代码中的外观。我同意以某种方式将指针传递给运行时组件（算法和应用程序之间的 API）。

因此，如果有任何方法可以处理图像的内存布局如何在应用程序中呈现，这样它也适合算法设计。OpenCV 等将具有用于 1x3 像素 rgb 图像的 BGRBGRBGR 布局。（我希望这能让我的问题更清楚）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T18:57:47.267

C++/CX 是本机代码，不需要将在 C++/CX 程序集之间传递的数据复制到纯 C++ 程序集。最好避免对压缩图像进行两次解码，因为这需要一些时间，所以这就是为什么我建议将指针传递给位图数据而不是复制字节的主要原因，除非确实有必要并且图像不是太大。理想情况下，您将使用可用于显示图像（如果要显示图像）和处理字节的位图格式，例如使用 WriteableBitmap 来显示图像并访问像素来处理它或使用 DirectX两个都。在决定复制位图之前，请注意您的位图使用了多少内存——一张解码的 8MP 照片可能使用大约 32MB 的内存。

编辑*（更多细节）

我相信 Silverlight 通常使用 PRGBA 像素格式，包括您通常用于图像处理的 WriteableBitmap。由于您既没有提到 Silverlight 也没有提到 DirectX，所以我假设您将 Silverlight API 用于您的应用程序。在这种情况下，您的简单选择是仅使用 Silverlight 显示图像并使用库中的 WIC 使用正确的像素格式再次将其解码为位图缓冲区，以便您可以将其传递给图像处理算法库，然后再次使用 WIC将其编码回（最有可能为 png 或 jpg）。更好的解决方案可能是使用[DirectX 互操作](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj207012%28v=vs.105%29.aspx)以避免每次要处理图像并将其显示在屏幕上时都需要经过解码/编码/解码（...）序列。我认为您可以使用 WIC 将图像解码到缓冲区，然后使用 DirectX 显示它，因为我认为 DirectX 应该能够显示图像，而不管使用的像素格式如何。

# php - Wordpress 插件动态错误页面

> ID：14539884
> 
> 赞同：1
> 
> 时间：2013-01-26T18:03:42.740
> 
> 标签：php, plugins, filter, wordpress

我可以在 Wordpress 插件中使用什么操作或过滤器来动态替换 404 错误页面的**内容**（即不是页眉或页脚）？

基本上，我正在寻找与`the_content` [filter](http://codex.wordpress.org/Plugin_API/Filter_Reference/the_content)等效的 404 错误页面，它将过滤现有页面的内容。

感谢您的时间。

**注意：**我知道我可以手动修改当前主题的 404 错误页面，但这不是我想要达到的效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T19:09:49.620

解决方案取决于 404.php 文件的内容。如果此文件包含静态文本，例如

```
_e( 'It seems we can&rsquo;t find what you&rsquo;re looking for...', 'twentyeleven' ); 
```

您可以添加自己的过滤器

```
apply_filters( 'my_404_content', 'Default 404 message' ); 
```

并在functions.php（或插件中）

```
add_filter( 'my_404_content', 'replace_404_message' );
function replace_404_message($message) {
    return 'Error 404 - '.$message;
} 
```

如果 404.php 使用内置的 WP 功能来显示页面内容，您应该检查它们支持哪些过滤器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T19:14:41.810

您也许可以添加`the_content`带有条件[`is_404`](http://codex.wordpress.org/Function_Reference/is_404)部分的过滤器：

```
function content_404($content) {
  if (is_404()) {
    // do some stuff with $content
  }
  // no matter what,
  return $content;
} 

add_filter( 'the_content', 'content_404' ); 
```

请注意，这确实假定`404.php`页面模板具有`the_content`适当的模板标签。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T19:31:06.477

来自这个 WordPress 答案：[如何在不修改主题的情况下控制自定义帖子类型的输出？](https://wordpress.stackexchange.com/a/75728/12615)

插件文件：

```
<?php
/*
Plugin Name: Plugin 404 Page
Plugin URI: http://stackoverflow.com/questions/14539884
Description: Use the plugin's template file to render a custom 404.php
Author: brasofilo
Author URI: https://wordpress.stackexchange.com/users/12615/brasofilo
Version: 2013.26.01
License: GPLv2
*/
class Universal_Template
{
    public function __construct()
    {       
        $this->url = plugins_url( '', __FILE__ );   
        $this->path = plugin_dir_path( __FILE__ );
        add_action( 'init', array( $this, 'init' ) );
   }

    public function init() 
    {
        add_filter( 'template_include', array( $this, 'template_404' ) );
    }

    public function template_404( $template ) 
    {
        if ( is_404() )
            $template = $this->path . '/404.php';

        return $template;
    }
}

$so_14539884 = new Universal_Template(); 
```

在插件文件夹中，有一个名为`404.php`：

```
<?php
/**
 * The template for displaying 404 pages (Not Found).
 *
 * @package WordPress
 * @subpackage Twenty_Twelve
 * @since Twenty Twelve 1.0
 */

get_header(); ?>

    <div id="primary" class="site-content">
        MY 404!
    </div><!-- #primary -->

<?php get_footer(); ?> 
```

# php - 过滤掉多行中的mysql重复记录

> ID：14539886
> 
> 赞同：0
> 
> 时间：2013-01-26T18:03:56.223
> 
> 标签：php, mysql, database, xampp, wamp

伙计们急需帮助！

好吧，我有一个 mysql 数据库，它有超过 158,000 条记录，其中有一些重复的数据。我希望列出这些重复的数据为了更清楚我到底在寻找什么：

mysql 表名是**postal**。列是 id、street、zipcode、locality 和 city

1.  id:1，邮政编码：123456，街道：street1，地点：locality1，城市：cityA

2.  id:2，邮编：123456，街道：street2，地点：locality1，城市：cityA

3.  id:3，邮编：123456，街道：street3，地点：locality1，城市：cityA

4.  id：4，邮政编码：123457，街道：street4，地点：locality1，城市：cityA

5.  id：5，邮政编码：123458，街道：street5，地点：locality1，城市：cityA

6.  id：6，邮政编码：166666，街道：street6，地区：locality26，城市：cityDE

7.  id：7，邮政编码：177777，街道：street7，地点：locality38，城市：cityEF

这些值是允许的！这是已输入 mysql db 表的数据的粗略草图：**邮政**

*相同的* **邮政编码**（例如：id=1,2,3）将具有不同的**街道**值，但它们**只允许使用一个地区名称**。此外，*不同的* **邮政编码**（例如：id=3,4,5）可能有也可能没有不同的**locality**。请不要对此感到困惑。我面临的问题是，我发现了一些这样的记录：

1.  id:11，邮政编码：111111，街道：street1，地点：locality1，城市：cityA

2.  id:25，邮编：111111，街道：street2，地点：locality2，城市：cityA

3.  id：56，邮政编码：111111，街道：street3，地点：locality3，城市：cityA

您会注意到*相同的* **邮政编码**（例如：id=11,25,56）具有完全不同的**位置**值，这是不允许的。同一邮政编码只允许使用一个位置值。

请向我建议用于过滤掉包含不同位置值的邮政编码的 sql 查询字符串。请不要有超过 150,000 条记录。

注意：我不是要求可以根据 pincode 对值进行排序的 sql 查询，我正在寻找一种方法来查找具有不同**位置**值的**邮政编码。**

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T18:07:57.417

尝试这个：

```
SELECT 
    postal.*
FROM 
    postal 
GROUP BY 
    zipcode
HAVING
    COUNT(DISTINCT(locality)) > 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T18:56:02.327

```
SELECT id,locality,zipcode,locality,city
FROM postal t1
WHERE EXISTS (

SELECT id,locality,zipcode,locality,city
FROM postal t2
WHERE t2.id <> t1.id
AND t2.zipcode = t1.zipcode
AND t2.locality != t1.locality
)
LIMIT 0,30 
```

帮我整理了这个。！现在它的工作！**

# android - Android ListView 不会填充

> ID：14539888
> 
> 赞同：0
> 
> 时间：2013-01-26T18:03:56.753
> 
> 标签：android, android-listview

我正在尝试使用字符串数组中的值填充我的 ListView。字符串数组中有值，我已经检查过以确保。我使用的代码，从我以前的搜索中看到的，是正确的。我正在通过 Android 模拟器运行该应用程序，并尝试创建一个新的模拟器、清理项目并重新启动 Eclipse。但是当应用程序启动时，列表中仍然没有数据。

我正在使用运行 Android 4.2 的 Galaxy Nexus 模拟器。

MainActivity.java：

```
public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    ListView redditView = (ListView) findViewById(R.id.redditView);
    String[] redditList = readRedditFeed();

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(
            this, android.R.layout.simple_list_item_1, redditList);

    redditView.setAdapter(adapter);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

public String[] readRedditFeed()
{

    return output;
}
} 
```

活动主.xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<ListView
    android:id="@+id/redditView"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true" >

</ListView>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T18:47:34.340

您正在主线程中解析数据，它可能会导致 ANR。

**使用线程和处理程序或 AsyncTask。**

从线程获取解析结果后，使用处理程序在列表中设置适配器或使用**AsyncTask** doInbackground() 方法接收和解析数据并在列表中设置 onPostExecute() 适配器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T16:38:48.583

只需使用 asyncTask 来完成后台工作而不会阻塞 UI。

```
private LoadingStuffTask task;
private String [] redditList;
private ArrayAdapter<String> adapter;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    ListView redditView = (ListView) findViewById(R.id.redditView);
     task = new LoadingStuffTask();
    task.execute("Process started!");

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

    private class LoadingStuffTask extends
            AsyncTask<String, String, String> {

        @Override
        protected String doInBackground(String... params) {
            redditList=readRedditFeed()
        }

        @Override
        protected void onProgressUpdate(
                String... values) {
        }

        @Override
        protected void onPostExecute(String result) {
            pdia.dismiss();
            adapter = new ArrayAdapter<String>(
            this, android.R.layout.simple_list_item_1, redditList);
            redditView.setAdapter(adapter);

        }
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pdia = new ProgressDialog(classificaA.this);
            pdia.setMessage("Doing background..");
            pdia.show();
        }

    }

public String[] readRedditFeed()
{
    ArrayList<String> redditList = new ArrayList<String>();

    try
    {   
        URL url = new URL("http://www.reddit.com/.json");
        InputStream in = url.openStream();
        DataInputStream din = new DataInputStream(new BufferedInputStream(in));

        String line = "";
        String lines = "";
        while((line = din.readLine()) != null)
            lines += line;

        JSONObject json = (JSONObject) new JSONTokener(lines).nextValue();
        json = (JSONObject) json.getJSONObject("data");
        JSONArray jsonArr = (JSONArray) json.getJSONArray("children");

        for(int i = 0; i < 5; i++)
        {

            json = jsonArr.getJSONObject(i);
            json = (JSONObject) json.getJSONObject("data");
            redditList.add(json.get("title").toString().replaceAll("\"", ""));
        }

    }
    catch (Exception e)
    {}

    String[] output = new String[redditList.size()];
    redditList.toArray(output);
    return output;
}
} 
```

# mysql - 从连接表中获取每个外键的第一条记录，没有重复的主键

> ID：14539892
> 
> 赞同：1
> 
> 时间：2013-01-26T18:04:15.150
> 
> 标签：mysql, sql, sql-server, tsql

我有以下表结构：

```
Tags:
Tag_ID | Name
1      | Tag1
2      | Tag2
3      | Tag3
4      | Tag4
5      | Tag5
6      | Tag6

Posts:
Post_ID | Title | Body
1       | Post1 | Post1
2       | Post2 | Post2
3       | Post3 | Post3
4       | Post4 | Post4
5       | Post5 | Post5
6       | Post6 | Post6
7       | Post7 | Post7
8       | Post8 | Post8
9       | Post9 | Post9
10      | Post10| Post10

TagsPosts:
Tag_ID | Post_ID
1      | 1
1      | 2
1      | 3
1      | 4
1      | 5
1      | 10
1      | 1
2      | 1
2      | 2
2      | 6
2      | 7
3      | 4
3      | 8
3      | 9
4      | 7
5      | 1
5      | 2
5      | 3
5      | 4
5      | 5
5      | 6
5      | 7
6      | 2 
```

我需要从查询中返回的是`Posts`最常见的前 3 名和其余的`Tag`前 1名，而不提供任何重复。`Post``Tags``Posts`

```
Desired Output:
Tag_ID | Post_ID
5      | 1
5      | 2
5      | 3
1      | 10
2      | 6
3      | 9
4      | 7 
```

到目前为止，我能够确定`Posts`最常用的前 3 名`Tag`：

```
SELECT Top(3) t.Tag_ID, p.Post_ID FROM Tags as t
INNER JOIN TagsPosts as tp ON t.Tag_ID = tp.Tag_ID
INNER JOIN Posts as p ON tp.Post_ID = p.Post_ID
WHERE t.Tag_ID IN (
    SELECT TOP(1) Tag_ID FROM TagsPosts GROUP BY Tag_ID ORDER BY COUNT(Tag_ID) DESC)

Result:
Tag_ID | Post_ID
5      | 1
5      | 2
5      | 3 
```

我还确定了`Post`其余`Tags`使用的前 1 个：

```
SELECT t.Tag_ID, p.Post_ID FROM Tags as t
INNER JOIN (
    SELECT t.Tag_ID, Max(p.Post_ID) as Post_ID FROM Tags as t
INNER JOIN TagsPosts as tp ON t.Tag_ID = tp.Tag_ID
INNER JOIN Posts as p ON tp.Post_ID = p.Post_ID
WHERE t.Tag_ID NOT IN (
        SELECT TOP(1) Tag_ID FROM TagsPosts GROUP BY Tag_ID ORDER BY COUNT(Tag_ID) DESC)
    AND
p.Post_ID NOT IN (
        SELECT Top(3) p.Post_ID FROM Tags as t
    INNER JOIN TagsPosts as tp ON t.Tag_ID = tp.Tag_ID
    INNER JOIN Posts as p ON tp.Post_ID = p.Post_ID
    WHERE t.Tag_ID IN (
        SELECT TOP(1) Tag_ID FROM TagsPosts GROUP BY Tag_ID ORDER BY COUNT(Tag_ID) DESC))
    GROUP BY t.Tag_ID) as s ON t.Tag_ID = s.Tag_ID
INNER JOIN Posts as p ON s.Post_ID = p.Post_ID

Result:
Tag_ID | Post_ID
1      | 10
2      | 7
3      | 9
4      | 7 
```

这几乎就在那里，但如您所见，它返回 duplicate `Posts`。

顺便说一句，我使用 SQL Server 2008 Express 进行测试，因为我不熟悉 MySQL，但我被要求确定可以应用于 MySQL 数据库的 SQL 查询。我想如果我在 T-SQL 中获得基本查询，那么将其转换为 MySQL 使用的任何 SQL 都会相当简单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T16:15:57.693

我会使用一个窗口函数，将其存储在 CTE 中，然后在谓词中引用它。像这样（使用可以从 SSMS 中按原样运行的数据的简化版本）。您列出了 SQL-Server，但没有列出版本。我相信表函数可以在 SQL Server 2005 及更高版本上运行，但不确定。

```
declare @Tag table ( tagid int identity, name varchar(8));

insert into @Tag values ('Tag1'),('Tag2'),('Tag3'),('Tag4'),('Tag5'),('Tag6');

declare @Posts table (postid int identity, tagid int, postbody varchar(32));

insert into @Posts values (1,'Blah'),(1, 'Blahblah'),(2, 'Blahblah'),(3, 'Blahbodyblah'),(4, 'Blahblahblah'),(4, 'Blahbodyblah'),(4, 'Blah'),(5, 'Blah'),(5, 'Blahblah'),(6, 'Blahblah');

-- use a CTE
with a as 
    (
    select 
        p.postbody
    ,   count(t.tagid) as TimesTagged
        /* You stated you wanted a return of posts based on their occurrence.  I am counting a position 
        of the COUNTS OF TAGID's descending (greatest first) starting from one.  If you have a tie and want to 
        do those I would consider using DENSE_RANK.  You would have to insert more values where you get a third 
        occurence to become a TIE to see how Rank, Dense_Rank, and Row_number differ.  They all have their 
        purposes but the user should know what they want before determining which they use.
        */
    ,   row_number() over(order by count(t.tagid) desc) as PositionOfCountsTaggedByGreatestOrderFirst
    ,   Rank() over(order by count(t.tagid) desc) as PositionOfCountsTaggedByGreatestOrderFirst_Ranking
    ,   Dense_Rank() over(order by count(t.tagid) desc) as PositionOfCountsTaggedByGreatestOrderFirst_DenseRanking
    from @Tag t 
        join @Posts p on t.tagid = p.tagid
    group by p.postbody
    )
select *
from a
-- I only use Row_Number, you can change to use one of the other predicates above if you wish.
where PositionOfCountsTaggedByGreatestOrderFirst <= 3

/*
You are stating you only want the top three counts
windowed functions are better than using top IMHO as you can specify lists 'in', medians, and all other types
explicitly defined rather than having to repeating nested selects.  The only downer is you can not use 
a predicate on a windowed function directly.  Yout must create it and then in a nested select, CTE (as shown)
, a table variable, temp table, etc...  define a predicate on it.
*/ 
```

# logging - 会在heroku部署日志中删除..

> ID：14539894
> 
> 赞同：16
> 
> 时间：2013-01-26T18:04:18.760
> 
> 标签：logging, deployment, heroku

几天前我开始看到

```
 Would have removed best_in_place (2.0.2)
 Would have removed thor (0.16.0) 
```

在我的 heroku 部署输出中。

它曾经说它移除了宝石。

有谁知道这是怎么回事？

**更新**

heroku 更新到最新的 ruby​​ 1.9.3 并且 bundler 缓存清理得很好。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-12T13:31:44.077

这是 Heroku 部署配置中的一个错误。它写入一个文件 .bundle/config ，其中有一行：

```
BUNDLE_DRY_RUN: false 
```

当 bundler 加载这个全局配置文件时，它会将其转换为 :dry_run => "false" 当它检查这个设置时，它会检查 settings[:dry_run]，它是一个字符串，其计算结果为 true。

您可以通过一些 shell 命令（heroku run bash）删除此行：

```
mv -f .bundle/config .bundle/config.orig
sed '/BUNDLE_DRY_RUN/d' < .bundle/config.orig > .bundle/config 
```

然后运行

```
bundle clean 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-05T22:28:42.900

这是 bundler gem 中的一个错误——本质上是额外的调试信息被转储到屏幕上。它应该在下一个版本中进行修补。删除将来自缓存，很可能是因为有更新的版本可用（最新版本是`best_in_place`2.0.3、0.17.0 `Thor`）。这些可以安全地忽略。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-12T06:15:54.717

经过一番研究，这似乎不是一个错误，而是一个功能！

正如你在这里看到的那样[https://github.com/carlhuda/bundler/pull/2237](https://github.com/carlhuda/bundler/pull/2237)

已经实施了一个`dry_run`标志，就像宝石已被移除一样，而不是移除它们，它只是打印

实际代码在[这里](https://github.com/carlhuda/bundler/blob/master/lib/bundler/runtime.rb#L168)

```
 if Bundler.settings[:dry_run]
          Bundler.ui.info "Would have removed #{output}"
        else
          Bundler.ui.info "Removing #{output}"
          FileUtils.rm_rf(gem_dir)
        end 
```

如您所见，如果 dry_run 打印就是这样。否则它会移除宝石

因此，由于这是一项功能而不是错误，因此不会很快得到修复。这给heroku（我正在等待答复）留下一个问题，即他们为什么使用dry_run..

请注意那些不知道的人-这个膨胀的`slug`大小

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-14T12:25:30.743

@Roman 的解释是正确的。

如果你有一个自定义的 buildpack（或者你可以很容易地 fork 并使用它），它可以在一行中修复

[https://github.com/heroku/heroku-buildpack-ruby/blob/master/lib/language_pack/ruby.rb](https://github.com/heroku/heroku-buildpack-ruby/blob/master/lib/language_pack/ruby.rb)

第 408-409 行从

```
puts "Cleaning up the bundler cache."
pipe "bundle clean" 
```

到

```
puts "Cleaning up the bundler cache."
pipe "bundle config --delete dry_run"
pipe "bundle clean" 
```

bundle config --delete 删除配置（注意下划线），默认`dry-run`为 false。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-12T04:23:01.070

这个问题现在已经在 Bundler 1.3.2 的发布中得到修复，它现在在最新的官方 Ruby buildpack 中的 Heroku 上使用。

# c# - 如何使用 LINQ to XML 获取属性值？

> ID：14539897
> 
> 赞同：14
> 
> 时间：2013-01-26T18:04:39.283
> 
> 标签：c#, xml, linq, linq-to-xml

```
<Employees>
  <Employee>
    <EmpId>1</EmpId>
    <Name>Sam</Name>
    <Sex>Male</Sex>
    <Phone Type="Home">423-555-0124</Phone>
    <Phone Type="Work">424-555-0545</Phone>
  </Employee>
</Employees> 
```

* * *

```
private void Window_Loaded(object sender, RoutedEventArgs e)
{
    emplyeeDetails = XDocument.Load(Directory.GetParent(Directory.GetCurrentDirectory()).Parent.FullName + "\\LinqToXml\\Xmls\\" + "Employees.xml");
    var emplyees = from emp in emplyeeDetails.Descendants("Employee").Take(10)
                   orderby emp.Element("EmpId").Value ascending
                   select new
                   {
                       Id = emp.Element("EmpId").Value,
                       Name = emp.Element("Name").Value,
                       Sex = emp.Element("Sex").Value,
                       WorkPhone=emp.Element("Phone").Attribute("Type").Value,
                       HomePhone = emp.Element("Phone").Attribute("Type").Value,                               
                   };
    DgrdEmployeeDetails.ItemsSource = emplyees.ToList();
} 
```

使用上面的代码，我可以得到以下结果： ![在此处输入图像描述](../Images/910f9dee0fd6ed833632bd3ac2c857a2.png)

但我需要 column`WorkPhone`的 value`424-555-0545`而不是`Home`column`HomePhone`的 value`423-555-0124`而不是`Home`.

我该怎么做？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-26T18:07:30.247

使用`Where`方法：

对于*家庭*电话号码：

```
emp.Elements("Phone").Single(phoneElement => phoneElement.Attribute("Type").Value == "Home").Value 
```

对于*工作*电话号码：

```
emp.Elements("Phone").Single(phoneElement => phoneElement.Attribute("Type").Value == "Work").Value 
```

*   `emp.Elements("Phone")`是所有“电话”元素的可枚举`emp`。
*   `Single`将获取满足指定属性的元素（如果有 0 个或多于 1 个满足该属性的元素，则会引发错误）。
*   `phoneElement.Attribute("Type").Value`是属性“Type”的值（即“Home”或“Work”）

然后，您的代码应该是：

```
var emplyees = from emp in emplyeeDetails.Descendants("Employee").Take(10)
                orderby emp.Element("EmpId").Value ascending
                select new
                {
                    Id = emp.Element("EmpId").Value,
                    Name = emp.Element("Name").Value,
                    Sex = emp.Element("Sex").Value,
                    WorkPhone = emp.Elements("Phone").Single(phoneElement => phoneElement.Attribute("Type").Value == "Home").Value,
                    HomePhone = emp.Elements("Phone").Single(phoneElement => phoneElement.Attribute("Type").Value == "Work").Value,
                }; 
```

如果元素`emp`可能没有*工作*电话或*家庭*电话号码，则上述代码将在`Single`. 要处理这种情况，您必须将代码更改为：

```
(string)emp.Elements("Phone").SingleOrDefault(phoneElement => phoneElement.Attribute("Type").Value == "Home") 
```

`SingleOrDefault``null`如果没有 "Phone" 元素满足条件并且`string`对 a`XElement`的强制转换等于`XElement.Value`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-26T18:14:14.910

即使`Phone`员工存在任何元素，此代码也将起作用：

```
var emplyees = 
    from emp in emplyeeDetails.Descendants("Employee").Take(10)
    let phones = emp.Descendants("Phone")
    orderby (int)emp.Element("EmpId")
    select new
    {
        Id = (int)emp.Element("EmpId"),
        Name = (string)emp.Element("Name"),
        Sex = (string)emp.Element("Sex"),
        WorkPhone = (string)phones.FirstOrDefault(p => (string)p.Attribute("Type") == "Work"),
        HomePhone = (string)phones.FirstOrDefault(p => (string)p.Attribute("Type") == "Home")                               
    }; 
```

使用转换元素到`string`,`int`等而不是访问`Value`属性。为什么？因为如果您的 xml 中缺少某些元素或属性，那么您将获得一个`NullReferenceException`. 但是强制转换将返回默认值。因此，上面的代码甚至会像这样解析 xml：

```
<Employees>
  <Employee>
    <EmpId>1</EmpId>
    <Name>Sam</Name>
    <Phone Type="Home">423-555-0124</Phone>
    <Phone>524-777-1234</Phone>
  </Employee>
</Employees> 
```

# makefile - 通过 ocamlbuild 使用外部库

> ID：14539899
> 
> 赞同：6
> 
> 时间：2013-01-26T18:04:49.047
> 
> 标签：makefile, ocaml, ocamlbuild

我正在尝试使用`ocamlbuild`而不是`make`，但我无法将我的目标文件与外部`.cma`库正确链接。似乎`ocamlbuild`首先尝试确定依赖关系，然后忽略`-L/path/to/lib.cma`. `make`我只是将所有必要的目录与`-I`和`-L`标志一起传递给，`ocamlc`但这些似乎不起作用`ocamlbuild`-`ocamlc`因为找不到必要的库，所以一直失败。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-26T21:26:41.190

您至少有 2 种方法可以将参数传递给 ocamlbuild，以便它考虑您的库：

1.  可以使用 ocamlbuild 的命令行参数：

    ```
    $ ocamlbuild -cflags '-I /path/to/mylibrary' -lflags '-I /path/to/mylibrary mylibrary.cma' myprogram.byte 
    ```

    替换为本`.cma`机`.cmxa`可执行文件。

2.  使用 myocamlbuild.ml 文件让 ocamlbuild “了解”该库，并在 _tag 文件中标记需要它的文件：

    在`myocamlbuild.ml`：

    ```
    open Ocamlbuild_plugin
    open Command

    dispatch begin function
      | After_rules ->
           ocaml_lib ~extern:true ~dir:"/path/to/mylibrary" "mylibrary"
      | _ -> () 
    ```

    在`_tags`：

    ```
    <glob pattern>: use_mylibrary 
    ```

    中的`ocaml_lib`指令`myocamlbuild.ml`告诉工具名为“mylibrary”的库（特定实现以`.cma`or`.cmxa`或其他结尾 - 分析、插件）位于目录“/path/to/mylibrary”中。

    项目目录中对应的所有文件`glob pattern`都将与“mylibrary”的使用相关联`ocamlbuild`，并使用ad hoc参数进行编译（因此您无需担心本机或字节目标）。前任：

    ```
    <src/somefile.ml>: use_mylibrary 
    ```

注意：如果库位于编译器已知的路径中（通常是`/usr/lib/ocaml`或`/usr/local/lib/ocaml`），则路径前缀可以安全地替换为`+`符号，因此`/usr/lib/ocaml/mylibrary`变为`+mylibrary`.

# delphi - 为什么 COMMON_APPDATA 在 Windows XP 上返回为空字符串

> ID：14539909
> 
> 赞同：2
> 
> 时间：2013-01-26T18:06:18.163
> 
> 标签：delphi, winapi

我在一所大型大学的一个用户（我想，大学 IT 部门通常在他们的计算机上使用的激进的安全设置）正在获得 Windows XP 返回的*空字符串*，用于 CSIDL_COMMON_APPDATA 或 CSIDL_PERSONAL。（我不确定其中哪个返回了空字符串，因为我还没有检查他的计算机以查看他是如何安装软件的，但我很确定它是 COMMON_APPDATA ......）

有没有人遇到过这个问题或对如何处理这个问题有建议？

这是我用来检索值的 Delphi 代码：

```
Function GetSpecialFolder( FolderID: Integer):String;
var
  PIDL: PItemIDList;
  Path: array[0..MAX_PATH] of Char;
begin
  SHGetSpecialFolderLocation(Application.Handle, FolderID, PIDL);
  SHGetPathFromIDList(PIDL, Path);
  Result := Path;
end;  { GetSpecialFolder }

ShowMessage(GetSpecialFolder(CSIDL_COMMON_APPDATA));  <--- This is an empty string 
```

编辑：

弄清楚这个 API 让我觉得自己在追赶我的尾巴——我绕着圈子试图找到正确的调用。据说这种方法和其他类似方法已被 Microsoft 弃用（以及该问题的早期发布者（@TLama？），后来删除了该帖子。）但是，似乎我们大多数人，包括我，经常并安全地忽略该状态。

在我的搜索中，我从前一段时间在 SO 上找到了一个很好的答案，包括不推荐使用的示例代码*：*是[什么导致了这个错误 'Unable to write to application file.ini'](https://stackoverflow.com/questions/11222132/what-causes-this-error-unable-to-write-to-application-file-ini)。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-26T18:15:32.350

如果您想找出 API 调用失败的原因，您需要检查返回值。这就是此代码中缺少的内容。

您需要根据自己的优点来对待每个功能。阅读 MSDN 上的文档。在 的情况下`SHGetSpecialFolderLocation`，返回值为`HRESULT`。为`SHGetPathFromIDList`你找回一个`BOOL`. 如果是这样，`FALSE`那么呼叫失败。

这里可能的罪魁祸首是`SHGetSpecialFolderLocation`接收 CSIDL 的代码，但您必须在调用 Windows API 函数时检查错误。

看一下文档，[`CSIDL`](http://msdn.microsoft.com/en-gb/library/windows/desktop/bb762494.aspx)我们会看到：

> **CSIDL_COMMON_APPDATA**
> 
> *5.0 版*。包含所有用户的应用程序数据的文件系统目录。典型路径是 C:\Documents and Settings\All Users\Application Data。此文件夹用于存储非用户特定的应用程序数据。例如，应用程序可以在 CSIDL_COMMON_APPDATA 文件夹中存储拼写检查字典、剪贴画数据库或日志文件。此信息不会漫游，任何使用计算机的人都可以使用。

如果机器的 shell 版本低于 5.0，`CSIDL`则不支持此值。这是该`CSIDL`值唯一记录在案的故障模式。我认为这不适用于您的情况，因此您只需要查看`HRESULT`状态代码的内容即可。

# c# - 来自文本框的gridviewitem

> ID：14539913
> 
> 赞同：0
> 
> 时间：2013-01-26T18:06:42.067
> 
> 标签：c#, wpf, windows, windows-8

现在我正在创建一个 gridview，我想用从 textbox 生成的字符串项填充这个网格视图，但是使用我自己的 GridviewItem 模板，我如何将 gridviewitem 模板中的文本块与从文本框中添加的字符串绑定

```
private void onTapped(object sender, TappedRoutedEventArgs e)
{
    Taglist.Items.Add(tagBox.Text);         
    tagBox.Text = "";
} 
```

这是 Xaml ：

```
<DataTemplate x:Key="listitemTemplate">
        <Grid Height="164" Width="651">
            <Grid.Background>
                <ImageBrush ImageSource="Assets/new design/tags.PNG"/>
            </Grid.Background>
            <TextBlock HorizontalAlignment="Left" TextWrapping="Wrap" Text="{Binding Text}" VerticalAlignment="Top" Margin="136,49,0,0" Height="69" Width="406" FontSize="48"   />
        </Grid>
</DataTemplate> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T18:09:14.857

ok I found my mistake , I should write in the binding , `Text = "{Binding}"` that's it

the correct xaml is :

```
<DataTemplate x:Key="listitemTemplate"> 
    <Grid Height="164" Width="651"> 
        <Grid.Background> 
            <ImageBrush ImageSource="Assets/new design/tags.PNG"/> 
        </Grid.Background> 
        <TextBlock HorizontalAlignment="Left" TextWrapping="Wrap" Text="{Binding}" 
            VerticalAlignment="Top" Margin="136,49,0,0" Height="69" Width="406" FontSize="48" /> 
    </Grid> 
</DataTemplate> 
```

# android - 使用带有重复警报的日历

> ID：14539914
> 
> 赞同：0
> 
> 时间：2013-01-26T18:06:53.593
> 
> 标签：android, calendar, alarmmanager, repeatingalarm

我正在尝试使用日历将警报管理器设置为每周日响起。当我打开应用程序时，闹钟会立即启动并每天重复，而不是每周日重复一次。

代码：

```
Calendar calendar = Calendar.getInstance();
         calendar.set(Calendar.DAY_OF_WEEK, 1);
         calendar.set(Calendar.HOUR_OF_DAY, 12);
         calendar.set(Calendar.MINUTE, 00);
         calendar.set(Calendar.SECOND, 00);

         am.setRepeating(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), 24*60*60*1000, pi); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T18:10:02.660

我认为你有一个数学问题。改成：

```
24*60*60*1000*7 
```

从以前开始，您每 24 小时重复一次

> 24*60*60*1000 = 86400000 毫秒 = 24h
> 
> 24*60*60*1000*7 = 24h * 7 = 1 周

# ftpwebrequest - FtpClient 和 FtpWebRequest — 有什么区别？

> ID：14539917
> 
> 赞同：0
> 
> 时间：2013-01-26T18:07:06.217
> 
> 标签：ftpwebrequest

我已经使用 FtpClient 连接到 FTP 服务器，上传文件并从 FTP 服务器下载文件。我发现 FtpWebRequest 与 FtpClient 具有相同的功能。

谁能告诉我这两者之间的区别。哪个是最好用的。

谢谢阿米特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T18:10:21.690

there is many tools in FtpClient and you can use it easily, by the way FtpClient is using FtpWebRequest.
FtpWebRequest is better for advanced user

# authentication - 如何为我的网站一实施 OAuth 并将其用于网站二

> ID：14539920
> 
> 赞同：0
> 
> 时间：2013-01-26T18:07:24.687
> 
> 标签：authentication, oauth, openid, oauth-provider, openid-provider

我想为**网站一实现 OAuth/OpenID 并在****网站二**中使用它。

**我为网站一**创建注册、登录、注销、个人资料功能/页面，并希望在**网站二**中使用身份验证，如 Facebook 或 Twitter 身份验证。

作为附加信息，如果您有兴趣可以访问[**网站一**](http://tiksn.somee.com/)和[**网站二**](http://stoze.somee.com/)的试用网站。请不要期望完整或正确的功能，因为正如我上面所说，它们还只是试用版。

**PS** 我决定使用 OAuth。忘记 OpenID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T18:46:14.110

我看了你的网站。它不是这样工作的。

您希望 STOZE 使用来自 TIKSN 的身份验证吗？好吧，您必须将 STOZE 配置为“oAuth 资源服务器”，以便它保留受保护的资源，并配置为仅使用他从 TIKSN 获得的令牌，该令牌将被配置为“oAuth 身份提供者”。

阅读一些关于 oAuth 的内容...

OpenID 是另一回事 - 然后，您必须将 TIKSN 配置为“OpenID 提供者”，并配置 STOZE 以使其能够与 OpenID 提供者一起使用（因此 TIKSN 将是其中之一，但您也可以使用 Google，雅虎等）

阅读一些关于 OpenID 的内容...

高温高压

# html - 更改特定表格背景

> ID：14539922
> 
> 赞同：0
> 
> 时间：2013-01-26T18:07:46.567
> 
> 标签：html, css

在 CSS 中，我有

```
table {
    max-width:100%;
    background-color:transparent;
    border-collapse:collapse;
    border-spacing:0
} 
```

在 HTML 中，我有

```
<table class="table">
        <tr>
           <td>
               <img width="90px" src="logo.png">
           </td>

           <td>
               <div class="page-header">Header
           <td>
        </tr>
</table> 
```

如何在不更改CSS 文件`<td>`中其他**table**的情况下更改第二个的背景颜色？`<td>`

请注意，我使用 Bootstrap 作为我的基础 CSS。而且在修改代码时有点复杂。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T18:24:38.957

将类添加到所需的`<td>`元素。

在那里`class`，指定所需的`background`

[有关工作示例，请参见此处](http://jsfiddle.net/7uFZm/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-26T18:18:39.333

使用 CSS 你可以像

```
 table tr:first-child td:nth-child(2){
         background:red;
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-26T18:18:09.113

向要更改的 td 添加一个类（例如，使用 'headerTd'）：

```
<table class="table">
    <tr>
    <td><img width="90px" src="logo.png"></td>

    <td class="headerTd"><div class="page-header">Header<td>
    </tr>
</table> 
```

然后将以下规则添加到您的 css 中：

```
.headerTd{
    background-color:red;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T18:12:37.387

You can go for styling only the 2nd simply give the style attribute.

```
style="color:red" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-26T18:16:57.367

```
.secondTD {
    background:red;
}

<table class="table">
        <tr>
        <td><img width="90px" src="logo.png"></td>

        <td class="secondTD"><div class="page-header">Header<td>
        </tr>
</table> 
```

但是如果你想不上课，那么

```
table:tr:td {
    background:red;
}

<table class="table">
        <tr>
        <td><img width="90px" src="logo.png"></td>

        <td><div class="page-header">Header<td>
        </tr>
</table> 
```

如果每一行都有第一个 td：

```
table>tr:td {
    background:red;
} 
```

# android - 如何在 C++ OpenCV 中显示带有 putText 的计时器结果？

> ID：14539924
> 
> 赞同：0
> 
> 时间：2013-01-26T18:07:51.687
> 
> 标签：android, c++, opencv, native

如何在我的 OpenCV Android 应用程序中显示带有 putText 的计时器的结果？它是从相机检测视图上的特征，主要算法和计时器是用 C++ 编写的。我的 C++ JNI 文件的完整代码：

```
#include <jni.h>
#include <opencv2/core/core.hpp>
#include <opencv2/imgproc/imgproc.hpp>
#include <opencv2/features2d/features2d.hpp>
#include <vector>

using namespace std; 
using namespace cv;

extern "C" {
JNIEXPORT void JNICALL  
Java_org_opencv_samples_tutorial3_Sample3View_FindFeatures(JNIEnv* env, jobject, jint 
width, jint height, jbyteArray yuv, jintArray bgra)   
{
jbyte* _yuv  = env->GetByteArrayElements(yuv, 0);
jint*  _bgra = env->GetIntArrayElements(bgra, 0);

Mat myuv(height + height/2, width, CV_8UC1, (unsigned char *)_yuv);
Mat mbgra(height, width, CV_8UC4, (unsigned char *)_bgra);
Mat mgray(height, width, CV_8UC1, (unsigned char *)_yuv);

//Please make attention about BGRA byte order
//ARGB stored in java as int array becomes BGRA at native level
cvtColor(myuv, mbgra, CV_YUV420sp2BGR, 4);

vector<KeyPoint> v;

OrbFeatureDetector  detector(1);
double t = (double)getTickCount();
detector.detect(mgray, v);
t = ((double)getTickCount() - t)/getTickFrequency();
putText(mbgra, t+" detection time", Point2f(100,100), FONT_HERSHEY_PLAIN, 2, Scalar(0,0,255,255), 2);
for( size_t i = 0; i < v.size(); i++ )
    circle(mbgra, Point(v[i].pt.x, v[i].pt.y), 10, Scalar(0,0,255,255));
env->ReleaseIntArrayElements(bgra, _bgra, 0);
env->ReleaseByteArrayElements(yuv, _yuv, 0); }} 
```

问题与 putText 一致：我收到错误“'double' 和 'char const [15]' 类型的无效操作数到二进制 'operator+'”。我的计时器好吗？我还能如何显示它的结果？我会很感激你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-11T09:56:13.350

't' 属于 double 类，常量“检测时间”被视为字符串。String + double 是编译器不理解的东西，这就是它向你吐槽的原因。

相反，请尝试这种方法：

```
std::stringstream s;
s << t;
s << " detection time";

putText(mbgra, s.str(), Point2f(100,100), FONT_HERSHEY_PLAIN, 2, Scalar(0,0,255,255), 2); 
```

在上面的代码中，stringstream 类具有内置于“<<”运算符的所有重载，因此它知道如何处理双精度数、整数和字符串以及如何将它们混合在一起。通过对各种属性进行更多研究，您可以将其格式化为小数点等的精度。

# android - SupportMapFragment 或 GoogleMap 为空

> ID：14539929
> 
> 赞同：2
> 
> 时间：2013-01-26T18:08:08.390
> 
> 标签：android, android-maps-v2, supportmapfragment

设法使代码无错误，但是在启动时，我总是在行 mMap = mapFrag.getMap(); 处得到一个空指针异常；

为什么会这样？我错过了一些进口或一些步骤吗？我不确定是 SupportMapFragment 还是 GoogleMap 对象导致了问题。

```
package com.fragments;

import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.SupportMapFragment;

public class MapFragment extends SherlockMapFragment {

    private GoogleMap mMap;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View root = super.onCreateView(inflater, container, savedInstanceState);
        SupportMapFragment mapFrag= (SupportMapFragment)getSupportFragmentManager().findFragmentById(R.id.fragment_map);
        mMap = mapFrag.getMap(); //null pointer is here
        return root;
    }
} 
```

**编辑**：这是基于此问题[here中给出的解决方案的实施的一部分](https://stackoverflow.com/questions/13721929/using-actionbarsherlock-with-the-new-supportmapfragment)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T19:07:05.680

请注意，您不必使用自定义`Fragment`子类来使用 Maps V2。如果您的片段只是纯粹的地图，您可以从活动创建`MapFragment`or`SupportMapFragment`并在那里配置它。

您甚至不需要创建某种`SherlockMapFragment`地图就可以让地图成为基于 ActionBarSherlock 的应用程序的一部分。常规`SupportMapFragment`工作正常。

如果您确实希望在您的片段中拥有更多的业务智能，*并且*如果您正在使用 ActionBarSherlock，*并且*有问题的业务逻辑需要执行与 ActionBarSherlock 相关的事情（例如，将操作项贡献给操作栏），*那么*并且只有这样做你需要担心有某种`SherlockMapFragment`.

我可以确认[这个要点](https://gist.github.com/4392030)包含一个工作`SherlockMapFragment`. 请注意，它进入了`com.actionbarsherlock.app`包，因为它需要对 ActionBarSherlock 的其余部分进行一些受包保护的访问。

然后，您可以对其进行子类化，例如创建一个`MyMapFragment`：

```
public class MyMapFragment extends SherlockMapFragment {
  @Override
  public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);

    if (getMap() != null) {
      Log.d(getClass().getSimpleName(), "Map ready for use!");
    }
  }
} 
```

你必须对调用的时间有点小心`getMap()`——太快了，它会返回`null`。`onActivityCreated()`似乎是一个相当安全的时间，尽管你可以自由地尝试。

然后，您只需使用`MyMapFragment`您会使用的任何地方`SupportMapFragment`：

```
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/map"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    class="com.commonsware.android.mapsv2.sherlock.MyMapFragment"/> 
```

这是包含上述代码[的完整项目。](https://github.com/commonsguy/cw-omnibus/tree/master/MapsV2/Sherlock)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-23T07:13:57.453

不需要实现额外的类，例如 SherlockMapFragment。您可以在 Fragment 或 SherlockFragment 类代码中处理 SupportMapFragment。看看[这个](https://stackoverflow.com/a/17803561/1755300)。

# javascript - HTML + JS + CSS 转换器

> ID：14539930
> 
> 赞同：2
> 
> 时间：2013-01-26T18:08:09.430
> 
> 标签：javascript, html, css

我有一个带有 JS (jQuery) 和 CSS 的 HTML 文件。我想要一个转换器，它可以转换所有文件，将其最小化，然后将其全部放在 index.html 中。谷歌似乎正在使用它，他们没有外部文件，甚至没有图像，一切都在一个文件中，我确信在发布之前已经预编译。

这也是个好主意吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T18:11:55.560

This is not a good idea, in general.

Splitting out your CSS and JavaScript files means that they can be cached independently. You will likely be using a common CSS and JavaScript across many pages. If you don't allow those to be cached, and instead store them in each page, then the user is effectively downloading a new copy of those files for every page they visit.

Now, it *is* a good idea to served minified versions of these files. Also make sure to add gzip or deflate transfer encoding so that they are compressed. Text compresses nicely... usually around a ratio of 1/8.

*(I should note that there has been one occasion where I have loaded everything into a single file. I was working on a single-page web application for the Nintendo Wii, which had no caching capability at all. This is about the only instance where putting everything into a single file made sense. Even then, it is only worth the effort if you automate it server-side.)*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T18:11:53.957

I don't recommend to concat CSS with JS. Just put your css at the top of the page and js at the bottom.

To minify your CSS and JS you have to use [gruntjs](http://gruntjs.com/)

Also I recommend you to read this article: [Front-end performance for web designers and front-end developers](http://csswizardry.com/2013/01/front-end-performance-for-web-designers-and-front-end-developers/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T18:15:53.590

If your intention is to load the pages faster:

1.  **For images:** try to use image sprites or images from different domains because browsers love downloading resources from different domains instead of just one domain.

2.  **For scripts as well as css:** use online minifiers that can reduce white-spaces and reduce the size (if you are on a web hosting, your host may be already compressing the scripts for you using gzip etc)

3.  **For landing pages like index pages:** If you have less styles then try inserting them inside the `<style></style>` tag, this will make the page load very fast, Facebook mobile does it that way.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-26T18:16:47.453

如果这不是一个好主意，谷歌就不会使用它！

如果您将所有内容都放在一个文件中，那么当浏览器检查是否有新版本的文件可用时，您会收到更少的 HTTP 请求。

您还会看到一些资源没有刷新的问题，这对于“普通”开发人员来说是个令人头疼的问题，但在 AJAX 应用程序中却是一场灾难。

我不知道有任何公开可用的工具可以做到这一切，谷歌肯定有自己的。另请注意，例如在 GWT 中，许多此类嵌入是由编译器完成的。

你可以做的是搜索：

**CSS 图像**嵌入器- 用于将图像编码为 CSS

**CSS 和 JS 缩小器**- 用于构建单个 CSS/JS 并将其最小化

而且您需要一些简单的工具将其嵌入到 HTML 中。

# json - 如何用 Json.net 解析这个 Json？

> ID：14539931
> 
> 赞同：0
> 
> 时间：2013-01-26T18:08:13.813
> 
> 标签：json, windows-phone-7, json.net

我有这个json：

{ "Message": "请求无效。", "ModelState": { "Email": [ "Email 字段为必填项。" ] } }

我想找到 ModelState（如果它存在），然后遍历那里的所有错误。

我可以弄清楚如何做到这一点。我不想创建一个具体的类，因为数据可能会根据服务器上发生的情况而改变。

我也可以像在 WPF7 上一样使用动态

```
 JObject jsonObj = JObject.Parse(response.Content);

            foreach (var j in jsonObj)
            {
               var t = j.Value;

            } 
```

这就是我到目前为止所拥有的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T18:15:38.653

```
JObject jsonObj = JObject.Parse(response.Content);
var modelState = jsonObj["ModelState"];
if (modelState != null)
{
    // The JSON contains a property called ModelState
    // so we can start looping through it:
    foreach (JProperty item in modelState)
    {
        Console.WriteLine(item.Name);
        foreach (JValue error in item.Values())
        {
            Console.WriteLine(error);
        }
    }
} 
```

# python - 如何将json字符串转换为普通字符串？

> ID：14539932
> 
> 赞同：0
> 
> 时间：2013-01-26T18:08:15.420
> 
> 标签：python, json, datetime, python-2.7, python-dateutil

我有一个较早的问题，我已将其删除以支持这个问题。因为我错误地假设它与 dateutil 版本有关。

```
test1 = dateutil.parser.parse("2013-01-24T16:50:42+00:00") 
```

这工作正常，我得到一个日期时间。

但

```
dthandler = lambda obj: obj.isoformat() if isinstance(obj, datetime.datetime) else None
test2 =  json.dumps(event.due_date_time, default=dthandler) 
```

`print test2`-->`"2013-01-24T16:50:42+00:00"`

这在我看来就像一个普通的字符串

```
test3 = dateutil.parser.parse(test2) 
```

这崩溃说`ValueError: unknown string format`

那么如何将 json 字符串转换为“普通”字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T18:13:17.173

您忘记了 JSON 在字符串周围加上引号。您具有以下值：

```
jsonvalue = '"2013-01-24T16:50:42+00:00"' 
```

注意那里的*双引号*。

您需要`json.loads()`再次使用该方法加载该值，在这种情况下，它只是再次删除引号：

```
>>> print json.loads(jsonvalue)
2013-01-24T16:50:42+00:00 
```

请注意，现在引号又消失了。`.strip('"')`如果你有一个混合，你也可以去掉引号：

```
>>> print jsonvalue.strip('"')
2013-01-24T16:50:42+00:00 
```

但既然您期待 JSON 数据，为什么不*将其视为 json 数据*并为此使用`json`模块将其转回 Python 数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T18:13:54.230

引号*在*字符串中（打印不添加它们）。

所以`test3 = dateutil.parser.parse(test2[1:-1])`会起作用。

# javascript - Cannot deselect all tabs in Phonegap's TabBar UI

> ID：14539938
> 
> 赞同：1
> 
> 时间：2013-01-26T18:09:21.063
> 
> 标签：javascript, iphone, ios, xcode, cordova

I'm using the TabBar plugin with PhoneGap and everything is working successfully. However I wish to deselect all tabs at the end of a function.

On the console log I can see that the functions are all successful until the line `window.uicontrols.selectTabBarItem('');` whereupon the function finishes and - worst of all - the tab is still selected.

I have tried selecting a different tab (in case it was my syntax) but this will not work either: `window.uicontrols.selectTabBarItem("foo");`

How can I make the tabs all deselect - or at least regain *some* control over these tabs? Because it seems as though I have none...

# c++ - c++ overloading operator << of ofstream for Report/Logger class

> ID：14539944
> 
> 赞同：1
> 
> 时间：2013-01-26T18:10:04.150
> 
> 标签：c++

I'm trying to create a report/logger Class in c++.

I want to have in the main an object called Report and apply to this class the operator << to write to file multiple strings just like ofstream does.

So instead of using the following code:

```
 ofstream myfile ("d://example.txt");
  if (myfile.is_open())
  {
    myfile << "This is a line.\n" << "Heya!!!" << endl;
    myfile.close();
  } 
```

I would like to have something like the following :

```
 Report rLogger ("d://example.txt"); // Report C'tor (const string& s)
  logger << "This is a line.\n" << "Heya!!!" << endl;
// the destructor of rLogger will close the file when it dies... 
```

I just can't find out a way to write the operator << as a member function which seems exactly what I need here. The only way I can use the operator << is as friend which isn't helpful in this case. Can someone give me an idea how can I implement it as above?

Thank in advance, Guy

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T18:14:11.840

Try the following:

```
class Report {
    public:
        Report() {}

        Report(std::string _str) : stream(_str) {}

        Report& operator <<(std::string str) {
            if (stream.is_open())
                stream << str;

            return *this;
        }

        ~Report() { stream.close(); }

        std::ofstream stream;
}; 
```

For the above you must also include the `<string>` header.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-26T18:58:25.240

It seems you want to create a stream-like type. Do **not** create a stream like type by overloading the output operator `<<`! The way to create a new stream-like type is to create a stream buffer (i.e., a type derived from `std::streambuf`) and use this to initialize an `std::ostream` object, probably by using `std::ostream` as a base class.

The other approaches for overloading `operator<<()` won't work for manipulators like `std::endl`: the manipulator `std::endl` is a function template and for deducing it template arguments when being used it is necessary to have an overload which can be used to deduce the type correct. The `std::ostream` class does this by providing suitable special overloads.

I realize that this isn't answering your question about how to overload `operator<<()` as a member but I think it is the wrong approach and it will probably yield better results changing the way the problem is addressed. I would provide more detail on how to create the corresponding classes but there isn't sufficient context given.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-26T18:40:22.460

It seems like your problems stem from needing to insert different types to your report, such as `"Heya!!!"` or `std::endl`.

One flexible solution is to **do this with templates.**

You may implement it as a member function, where the `Report` is pointed to by `this`:

```
class Report {
    public:

        template < typename T >
        Report& operator <<( const T &data ) { ... }

}; 
```

Or as a friend function, where there is no `this` and `Report` is instead explicitly mentioned and named:

```
class Report {
    public:

        template < typename T >
        friend Report& operator <<( Report &r, const T &data ) { ... }

}; 
```

Or as a stand-alone function, if the `Report` has enough public methods to do the job.

```
template < typename T >
Report& operator <<( Report &r, const T &data ) { ... } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-26T18:31:41.110

To implement it as a member function and be able to concatenate several streams you just have to return a reference to the object at the end of the function, e.g.:

```
class Report {
public:

    // ...

    Report& operator<<(const char *text) {
        // write text to file...

        return *this;
    }

}; 
```

Here is a very simple example that prints to standard output instead of a file: [http://codepad.org/S8QeJZ1x](http://codepad.org/S8QeJZ1x)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-26T19:00:08.367

If all you want is to make sure the file is closed after use, class `Report` is unnecessary. `std::ofstream`'s destructor already closes its file.

The other answers so far, which try to define a templated `operator<<` have a problem: They won't work with some manipulators including `std::endl`, since it's actually a function template, and the compiler can't figure out what sort of instantiation it should use.

If the purpose of class `Report` is to add or modify something in the data going through, that's more easily and more correctly done by defining your own streambuf. [This article](http://gabisoft.free.fr/articles/fltrsbf1.html) by James Kanze describes how to do that.

# jquery - IE 8 CSS li's are showing incorrectly

> ID：14539945
> 
> 赞同：1
> 
> 时间：2013-01-26T18:10:17.430
> 
> 标签：jquery, css, internet-explorer, html-lists, carousel

I'm using a Carousel in the link below under the section "PROPERTY DOCUMENTS". In IE 8 the li's are looking weird they aren't wide like they look in modern browsers.

Is there a simple fix on this so that it can look good in IE8? Right now I have the following custom attributes on the li's but am having no luck. They aren't showing up at all in IE7 so I'm hoping that this fix will have them show up in IE7 also.

```
 .boutique img{

    }

    .boutique a {

    }

    .boutique li {

    } 
```

I just recently took out the css I had. It was making things worse.

Here is the jQuery...

```
<script>
$(document).ready(function(){
    $('#boutique').boutique({
    container_width:    200,
    front_img_width:     58,
    front_img_height:    72,
    starter:              3,
    speed:              900,
    hovergrowth:        0.2,
    behind_opacity:     0.3,
    back_opacity:         1,
    frames:               3,
    autoplay:         false,
    hovergrowth:          0,
    freescroll:       false,
    move_on_hover:    false,
    text_front_only:   true,
    });
}); 
```

and the link to the jQuery file. [http://landpros.turnpostinteractive.com/javascripts/jquery.boutique.js](http://landpros.turnpostinteractive.com/javascripts/jquery.boutique.js)

Here is the HTML to the boutique.

```
<div id="parent">
            <img id="prev-boutique" src="images/details-page/prev.png" onclick="boutique_previous()" />
            <img id="next-boutique" src="images/details-page/next.png" onclick="boutique_next()" />
            <!-- The Boutique HTML: -->
            <ul id="boutique">
                <li>
                    <a href="#frame1">
                        <img src="images/details-page/round-about.jpg">
                        <span>Optional description.</span>
                    </a>
                </li>
                <li>
                    <a href="#frame1">
                        <img src="images/details-page/round-about.jpg">
                        <span>Optional description.</span>
                    </a>
                </li>
                <li>
                    <a href="#frame1">
                        <img src="images/details-page/round-about.jpg">
                        <span>Optional description.</span>
                    </a>
                </li>           
            </ul>
        </div> 
```

[http://landpros.turnpostinteractive.com/LandPros_Details2_1.html](http://landpros.turnpostinteractive.com/LandPros_Details2_1.html)

Here is a link to what its doing in ie8... [http://imgur.com/5LWsXal](http://imgur.com/5LWsXal)

Any help would be awesome! Thank you!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T18:47:26.033

我刚刚检查了`<li>`代码的元素。看起来您使用的 javascript 不是 IE8 优化的。它在所有浏览器`width:58px`中设置元素，但在 IE8 中`<li>`设置宽度。`6px`你能给出你用于图像的 jQuery 代码的链接吗？

**编辑#1**

`width:25%`为所有`<li>`元素添加一个属性。为以下 javascript定义一个`.dummy`具有属性的类。`width:36%`

然后添加这个javascript：

```
var liElements = document.getElementsByTagName("li");
for (var i = 0; i < liElements.length; i++) {
  var liElement = liElements[i];
  if (liElement.style.top == "0px" && liElement.style.left == "0px") {
    liElement.className += "dummy"; 
  }
  else{
  liElement.className -= "dummy";
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-13T07:30:15.557

对我来说，它通过在 style.css 中添加它来工作：#boutiqueinit .boutique-frame {border: 1px solid #ffffff;} 在 IE8 中没有这个，li 的显示不正确。该行来自[http://friquemag.net/demos/boutique/index2.html?v=152](http://friquemag.net/demos/boutique/index2.html?v=152)示例 2的 demo.css

# angularjs - AngularJS：访问指令与父控制器的隔离范围

> ID：14539947
> 
> 赞同：32
> 
> 时间：2013-01-26T18:10:31.993
> 
> 标签：angularjs

我想编写一个具有隔离范围的指令，但也想让该范围可用于父范围的控制器。我找到了这个解决方案：

```
<div ng-controller="Main">
  <popupbutton directive-scope="popup"></popupbutton>
</div>

app.directive('popupbutton', [function() {
  return {
    restrict:   "E",
    scope:      {    
      directiveScope: "="
    },
    link:       function(sc, el, attrs) {
      sc.directiveScope = sc;
      sc.testvalue = 'foo';
    }
  };  
}]);

app.controller('Main', function($scope) {
  alert($scope.popup.testvalue);  // Where did the property 'popup' come from?!?
}); 
```

请参阅[Plunker](http://plnkr.co/edit/M9EWGGGqSPvEUGn1EMcB?p=preview)。

我觉得这有点难看，因为它涉及在 HTML 中编写一个属性，并且在控制器的代码中你无法分辨范围属性的来源。有一个更好的方法吗？

**编辑：**

此外，似乎 $scope.popup 在控制器“Main”运行时甚至都不可用。指令的链接功能还没有执行？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-01-27T06:56:23.047

为了保持适当的关注点分离，您不应该混合范围。更不用说它会很难同步。总结一下：你的指令不应该知道*任何*关于父作用域（或其控制器）的信息，你的控制器不应该知道*任何*关于指令内部的信息。它们是不同层中的独立组件。

在控制器和指令之间进行通信的正确方法是通过指令属性。例如，在弹出窗口的情况下，这可以通过一个简单的布尔值来完成。

控制器和指令：

```
app.directive('popupbutton', [function() {
  return {
    restrict: "E",
    scope: { isOpen: "=" },
    template: '<a ng-click="isOpen = !isOpen">Toggle</a><div>Open? {{isOpen}}'
  };
}]);

app.controller('MainCtrl', function($scope) {
  $scope.isOpen = false;
}); 
```

和标记：

```
<popupbutton is-open="isOpen"></popupbutton> 
```

这种方法不需要逻辑，开箱即用，并保持关注点的清晰分离。这是一个更新的 plunker：[http ://plnkr.co/edit/otIaGCLmiNdGcYEgi60f?p=preview](http://plnkr.co/edit/otIaGCLmiNdGcYEgi60f?p=preview)

# android - Android Test project setup in eclipse

> ID：14539960
> 
> 赞同：0
> 
> 时间：2013-01-26T18:12:44.783
> 
> 标签：android, eclipse, eclipse-juno

When I try to set up an "Android Test Project" in eclipse Juno, on the Select Test Target window, I don't see a browse button to choose AUT.

Anyone else encountered this issue?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T18:25:49.100

选择***File -> New -> Other... -> Android Test Project***后，系统会提示您输入项目名称，然后您可以选择一个目标项目

![在此处输入图像描述](../Images/88a55e6f13c094230a2f603f0cbba86a.png)

# xaml - 右对齐 ListBox 中的内容

> ID：14539961
> 
> 赞同：6
> 
> 时间：2013-01-26T18:13:00.040
> 
> 标签：xaml, windows-phone-8, windows-phone

我想以某种`ListBox` `ItemTemplate`方式右对齐某些内容，使其位置不会根据剩余`ItemTemplate`元素的宽度而改变。

这是我想要实现的屏幕截图：

![右对齐图标](../Images/d065f2614f3784c17cb974adb5c2a13b.png)

这是我尝试使用的 XAML：

```
<ListBox.ItemTemplate>
    <DataTemplate>
        <StackPanel Orientation="Horizontal">
            <Grid Margin="12 12 0 0" 
                  Width="60" Height="60" 
                  VerticalAlignment="Top"
                  Background="{StaticResource PhoneAccentBrush}">
                <Image Source="/Assets/Mystery.png" />
            </Grid>
            <StackPanel x:Name="ParentStackPanel">
                <TextBlock Text="{Binding Name}" Style="{StaticResource PhoneTextLargeStyle}" x:Name="NameText" />
                <TextBlock Text="{Binding Owner, StringFormat='by {0}'}"
                           Style="{StaticResource PhoneTextSmallStyle}" />
                <Grid HorizontalAlignment="Left" x:Name="FixedWidthGrid" >
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Width="18"
                                   Text="{Binding ContainerSize, Converter={StaticResource ContainerSizeConverter}}"
                                   Style="{StaticResource PhoneTextNormalStyle}" />
                        <TextBlock Margin="0" Text="{Binding Difficulty, StringFormat='{}{0:N1}'}"
                                   Style="{StaticResource PhoneTextNormalStyle}" />
                        <TextBlock Margin="0" Text="/"
                                   Style="{StaticResource PhoneTextNormalStyle}" />
                        <TextBlock Margin="0" Text="{Binding Terrain, StringFormat='{}{0:N1}'}"
                                   Style="{StaticResource PhoneTextNormalStyle}" />
                    </StackPanel>
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                        <Image Source="/Assets/Favorite.png" Height="24" />
                    </StackPanel>
                </Grid>
            </StackPanel>
        </StackPanel>
    </DataTemplate>
</ListBox.ItemTemplate> 
```

在片段中，我将遇到问题的元素命名为 as `FixedWidthGrid`。使用上面的 XAML，图标在 内右对齐`ParentStackPanel`，其宽度取决于`NameText`，即其中最宽的元素。在上图中，图标将与单词的结尾对齐`Ukova`。如果文本太宽而无法容纳，图标甚至可能会被推出屏幕。

我可以通过将固定宽度设置为来解决这个问题，`FixedWidthGrid`但由于我希望我的页面在纵向和横向模式下都可以工作，所以我不能这样做。而且我什至没有用 WP8 支持的不同分辨率测试它。

有没有办法绑定`FixedWidthGrid`相对于页面宽度的宽度，以便每次页面宽度发生变化时它都会改变（因为方向切换）？还是有另一种方法可以让图标按照我的意愿对齐？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-27T02:12:40.037

[这个答案](https://stackoverflow.com/questions/11016806/c-sharp-windows-phone-alignment-in-xaml-listbox-itemtemplate/11018672#11018672)描述了使用 ListBox 一直向右显示数据的主要问题。对于您的示例，我不会在外部使用 StackPanel 而是使用定义了三列的 Grid ，这使得中间列占用尽可能多的空间

```
<DataTemplate>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="Auto"/>
        </Grid.ColumnDefinitions> 
```

在第一列中放置您的 60x60 图像。在第二列中放置您的文本。这可以是 StackPanel。在第三列中放置您的小图像。这种对齐方式与更改 ListBoxItem 的 Horizo​​ntalAlignment 相结合，将呈现您想要的效果。

# c++ - C++ Classes versus utility functions

> ID：14539967
> 
> 赞同：3
> 
> 时间：2013-01-26T18:13:33.203
> 
> 标签：c++

So I may want various functions that operate on a line:

```
inline float yIntercept(const vec2& ptA, const vec2& ptB, float x);
inline float xIntercept(const vec2& ptA, const vec2& ptB, float y);
inline bool lineIntersection(const vec2& ptA0, const vec2& ptB0, const vec2& ptA1, const vec2& ptB1); 
```

The functions takes 2 points for each line representing the line.

Or I can write a line class that has those 2 points and various useful line related methods.

```
struct Line {
    ... stuff

    inline float xIntercept(float y);
    inline float yIntercept(float x);

    inline bool lineIntersection(const Line& other);

    vec2 m_point[2];
}; 
```

One thing I was thinking about is performance of creating an instance of this line class every time I need to call one of these functions just given 2 points.

I may be operating on a point list representing a polygon and don't actually have any line objects instantiated.

At any time I may either call

```
yIntercept(somePointA, somePointB, 3.0f); 
```

Or

```
Line(somePointA, somePointB).yIntercept(3.0f);  //I think this would compile 
```

I like the idea of having classes for these kinds of things rather than C style functions, but I was wondering if there's some performance penalty of creating an instance of the class like this rather than just passing the points right into a function. Maybe the compiler does some optimization?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T18:37:22.557

> 我正在考虑的一件事是每次我需要调用这些函数之一时创建这个行类的实例的性能，只给了 2 分。

如果这确实是您的应用程序中的问题，那么您可能“做错了”。我的意思是，如果做得对，创建这个对象的代码应该是非常轻量级的。即使那样，您是否真的需要创建很多这些对象 - 做构成线条的“事情”不会随着时间的推移而存在，因此结构 Line 可以以某种方式成为覆盖对象的一部分。

例如，在多边形中，您可以从点列表中创建 Line 对象，并保留这些对象。

我也会先编写一个通用的、运行良好的代码库，然后在一切正常时进行优化。如果你必须重写一些东西，那就这样吧。希望您已经使您的接口足够通用，以至于您不必重写太多其他代码。

每当性能优化时，请确保您测量、再次测量并记录您为更改它所做的工作。我有时在电子表格中有几百行“尝试修改 X”、“在函数 A 中使用巧妙的技巧”以及结果 - 有时结果是“丢失 5%”（或“丢失 500%”），但在至少你知道结果是什么。使用“我认为编译器会这样做”需要大量使用任何给定编译器的经验。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T18:57:36.960

根据其他因素选择您的解决方案。可能涉及的努力或可读性。

采用这种方法的原因是因为您在这两种情况之间进行选择：

1.  产生创建`Line`对象的额外工作。
2.  导致将更多参数传递给您的函数的额外工作。

编译器可以对 1\. 或 2\. 进行优化。它可能会。或不。它可能会有所帮助。或不。

请参阅本文以了解有关像您这样的优化决策的更多信息。作者还行。

[http://www.codinghorror.com/blog/2009/01/the-sad-tragedy-of-micro-optimization-theater.html](http://www.codinghorror.com/blog/2009/01/the-sad-tragedy-of-micro-optimization-theater.html)

# asp.net-mvc - 使用 MVCContrib 在 gridview 列中显示图像

> ID：14539971
> 
> 赞同：0
> 
> 时间：2013-01-26T18:14:07.500
> 
> 标签：asp.net-mvc

我想在 MVCContrib gridview 的列中显示图像（物理上位于服务器的 Image 文件夹中，并且它们的路径存储在 db 中）。我正在使用以下代码，但它只返回图像路径，但我想在网格列中显示图像。

代码

```
 <%=Html.Grid(Model.ImageGridView).Columns(columns=>{
     columns.For(x=>x.ImageID);
     columns.For(x=>x.ImageTitle);
     columns.For(x=>x.ImagePath);

 })%> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T18:42:46.720

您可以定义一个部分 ( `_Image.ascx`) 将被强类型为字符串并包含图像：

```
<%@ Control 
    Language="C#" 
    Inherits="System.Web.Mvc.ViewUserControl<string>" 
%>
<img src="<%= Model %>" alt="" /> 
```

进而：

```
<%= Html
    .Grid(Model.ImageGridView)
    .Columns(columns => {
        columns.For(x => x.ImageID);
        columns.For(x => x.ImageTitle);
        columns.For(x => Html.Partial("_Image", x.ImagePath));
    }
) %> 
```

显然，如果`ImagePath`属性指向服务器上图像的物理位置，则不能直接将其传递给`<img>`标签。您需要将其转换为相对 url。理想情况下，这应该在将模型传递给视图之前在服务器上完成。

# ios - 滚动时如何禁用 UITableView 的单元格重新加载？

> ID：14539977
> 
> 赞同：2
> 
> 时间：2013-01-26T18:14:26.423
> 
> 标签：ios, objective-c, cocoa-touch, uitableview

当我向上和向下滚动 UITableView 时不需要重新加载其单元格时，我遇到了这个问题。简而言之，我创建了自定义单元格，其中包含用户可以通过单击展开的内容。例如，我有一个`UILabel`包含很多文本，但没有完全显示，但用户可以单击按钮并展开文本，从而展开标签。这一切我都是通过`[tableview beginUpdates]`and来实现的`[tableview endUpdates]`。但是当我单击按钮并展开文本或图像并向下滚动到其他单元格然后向上`UITableView`当然重新加载我的单元格的内容并且文本再次隐藏但单元格保持相同的大小并且这看起来很难看。我可以以某种方式自定义`UITableView`回收机制或更新内部单元缓存吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-26T18:19:33.947

您不能禁用重新加载。正确的解决方案是确保您保存每个单元格的状态（扩展与否），因此当单元格由于滚动需要重新加载时，您可以为当前状态提供适当的高度和内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T20:41:05.027

你有几个选择。

许多人忽略的一个是不要使用 UITableView，而是使用 UIScrollView。只需将您的每个“单元格”创建为 UIView 子类并将它们放置在 UIScrollView 中您想要的位置。唯一的问题是你必须自己让它看起来像一个表格视图，在每个单元格的子视图和/或背景之间有分隔符。

另一种选择可能是保留您自己对每个 Cell 的引用并告诉 UITableView 不要重用它们。就像是：

```
- (void) initializeMyCells {
  self.cellArray = [NSMutableArray arrayWithCapacity:5];
  for ( int i = 0; i < 5; ++i ) {
     MyCellType *cell = [[MyCellType alloc] initWithStyle: UITableViewCellStyleDefault reuseIdentifier:nil]];
     [self.cellArray addObject:cell];
  }
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
  return self.cellArray[indexPath.row];
} 
```

# .htaccess - 需要 3000 个页面的 htaccess 重定向帮助

> ID：14539980
> 
> 赞同：0
> 
> 时间：2013-01-26T18:14:45.253
> 
> 标签：.htaccess, http-status-code-301

需要帮助，因为我们有一个 joomla 网站，现在 1.5 岁，当我们进行 seo 审核时，意外地发现超过 3000 个页面中的 url 未定义

ex-1 不正确的网址：

`www.example.com/undefined/index.php?option=com_usedcar&view=search&Itemid=3`

正确的网址 -

`www.example.com/index.php?option=com_usedcar&view=search&Itemid=3`

ex-2 不正确的网址：

`www.example.com/undefined/index.php?option=com_forms&view=pages&layout=shop&Itemid=2`

正确的网址 -

`www.example.com/index.php?option=com_forms&view=pages&layout=shop&Itemid=2`

术语**“未定义”**只是搞砸了，因为导致所有重复的内容有没有办法对未定义的页面进行 301 重定向，没有未定义的页面，其余的 url 保持不变

谢谢，期待

**更新**

更新，我尝试使用此代码但仍然无法达到预期的结果

```
 RewriteEngine On
  RewriteBase /
  RewriteCond %{REQUEST_URI} ^.*/undefined.*$
  RewriteRule .*  /     [L,R=301,DPI] 
```

通过在 htaccess 原始 url 中使用上面的代码 -

```
 http://www.xxx.com/undefined/index.php?option=com_easyblog&view=entry&id=42&Itemid=91 
```

更改为新网址 -

```
 http://www.xxx.com/?option=com_easyblog&view=entry&id=42&Itemid=91 
```

如果您看到，虽然 undefined 已删除，但新的 url 从实际正确的 url 中缺少 index.php，任何人都可以帮助解决这个问题.. thnx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T02:54:18.157

tried hit n trial seems its solved by replacing * with index.php

# pushsharp - notification with pushsharp

> ID：14539982
> 
> 赞同：0
> 
> 时间：2013-01-26T18:14:52.550
> 
> 标签：pushsharp

I want to implement notification in web application with pushsharp.

I found some sample projects on github for pushspharp they are working.

please help me in getting start to develop small app on notifications with pushsharp.

thanks in advance

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T06:47:35.070

公共类 PushNotificationService { 私有 PushService _pushService;

```
 public string MessageDetails { get; set; }
   // public RecipientDeliveryStatus MessageDeliveryStatus { get; set; }

    public PushNotificationService()
    {
        _pushService = new PushService();
        _pushService.Events.OnDeviceSubscriptionExpired += Events_OnDeviceSubscriptionExpired;
        _pushService.Events.OnDeviceSubscriptionIdChanged += Events_OnDeviceSubscriptionIdChanged;
        _pushService.Events.OnChannelException += Events_OnChannelException;
        _pushService.Events.OnNotificationSendFailure += Events_OnNotificationSendFailure;
        _pushService.Events.OnNotificationSent += Events_OnNotificationSent;
        _pushService.Events.OnChannelCreated += Events_OnChannelCreated;
        _pushService.Events.OnChannelDestroyed += Events_OnChannelDestroyed;

    }

    public void SendAppleNotification(string deviceToken, string message)
    {
        var appleCert = File.ReadAllBytes(Path.Combine(AppDomain.CurrentDomain.BaseDirectory, "../../../Resources/PushSharp.Apns.Sandbox.p12"));
        _pushService.StartApplePushService(new ApplePushChannelSettings(appleCert, "pushsharp"));
        _pushService.QueueNotification(NotificationFactory.Apple()
         .ForDeviceToken(deviceToken)
         .WithAlert(message)
         .WithSound("default")
         .WithBadge(7));
        _pushService.StopApplePushService();

    }

    public void SendAndroidNotification(string message, string deviceRegId)
    {
        _pushService.StartGoogleCloudMessagingPushService(new GcmPushChannelSettings("Config.AnrodidSenderId", "Config.AndroidAuthToken", "Config.AndroidApplicationId"));

        _pushService.QueueNotification(NotificationFactory.AndroidGcm()
                                           .ForDeviceRegistrationId(deviceRegId)
                                           .WithCollapseKey("NONE")
                                 .WithJson("{\"alert\":\"" + message + "\",\"badge\":\"7\"}"));
        _pushService.StopGoogleCloudMessagingPushService();
    }

    public void SendWindowsNotification()
    {
        _pushService.StartWindowsPhonePushService(new WindowsPhonePushChannelSettings());
        //Configure and start Windows Notifications
        _pushService.StartWindowsPushService(new WindowsPushChannelSettings("677AltusApps.PushSharpTest",
            "ms-app://s-1-15-2-397915024-884168245-3562497613-3307968140-4074292843-797285123-433377759", "ei5Lott1HEbbZBv2wGDTUsrCjU++Pj8Z"));

        //Fluent construction of a Windows Toast Notification
        _pushService.QueueNotification(NotificationFactory.Windows().Toast().AsToastText01("This is a test").ForChannelUri("YOUR_CHANNEL_URI_HERE"));
        _pushService.StopWindowsPhonePushService();
    }
    void Events_OnDeviceSubscriptionIdChanged(PlatformType platform, string oldDeviceInfo, string newDeviceInfo, Notification notification)
    {

      //  MessageDeliveryStatus = RecipientDeliveryStatus.Undeliverable;
        MessageDetails = "Device subscription id has changed";
    }

    void Events_OnNotificationSent(Notification notification)
    {

        //MessageDeliveryStatus = RecipientDeliveryStatus.Sent;
        MessageDetails = "Message Sent";
    }

    void Events_OnNotificationSendFailure(Notification notification, Exception notificationFailureException)
    {

        //MessageDeliveryStatus = RecipientDeliveryStatus.Undeliverable;
        MessageDetails = notificationFailureException.Message;
    }

    void Events_OnChannelException(Exception exception, PlatformType platformType, Notification notification)
    {

       // MessageDeliveryStatus = RecipientDeliveryStatus.Undeliverable;
        MessageDetails = exception.Message;
    }

    void Events_OnDeviceSubscriptionExpired(PlatformType platform, string deviceInfo, Notification notification)
    {

       // MessageDeliveryStatus = RecipientDeliveryStatus.Undeliverable;
        MessageDetails = "Device Subscription Expired";
    }

    void Events_OnChannelDestroyed(PlatformType platformType, int newChannelCount)
    {
       // MessageDeliveryStatus = RecipientDeliveryStatus.Undeliverable;
        MessageDetails = "Channel Descrtroyed";
    }

    void Events_OnChannelCreated(PlatformType platformType, int newChannelCount)
    {
        //MessageDeliveryStatus = RecipientDeliveryStatus.Undeliverable;
        MessageDetails = "Channel Created";
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-24T22:11:03.133

我有一个 .net 3.5 应用程序，我需要使用`PushSharp`，所以我最终`WebApi`围绕 pushSharp 创建了一个包装器，以便它可以像一个简单的`RESTful`api 一样使用。

我已将代码放在 GitHub 上，以防有人需要。`PushSharp.Web`

[https://github.com/has-taiar/PushSharp/tree/master/PushSharp.Web](https://github.com/has-taiar/PushSharp/tree/master/PushSharp.Web)

# reference - Xtext DSL 语法范围定制

> ID：14539985
> 
> 赞同：4
> 
> 时间：2013-01-26T18:15:13.730
> 
> 标签：reference, grammar, dsl, xtext, scoping

**我知道有一个简单的解决方案，**但我不知道如何实现它。

我正在寻找如何实现答案而不是我需要做的事情。一半的答案已经在这个页面上： [Xtext 交叉引用和范围](https://stackoverflow.com/questions/11693120/xtext-cross-referencing-and-scoping)

我的问题是下面的语法：

```
DomainModel:
    "DOMAINMODEL" name=ID "{"
        "ENTITYS" "{"
            (Entitys+=Entity)*
        "}"
        "ENTITY_RELATIONSHIP" "{"
            (Relationships+=Relationship)*
        "}" 
    "}";

Entity:
    name=ID "{"
        (Attributes+=Attribute)*
    "}";

Attribute:
    StringAttribute | NumberAttribute | ImageAttribute;

StringAttribute:
    "STRING" name=ID;

NumberAttribute:
    "NUMBER" name=ID;

ImageAttribute:
    "IMAGE" name=ID;

// Relationship = [new table name] : [shared key name] -> ref_table(ref_id)
Relationship:
    name=ID ":" newEntityName=ID "->" refEntityName=[Entity|ID]"("refName=[Attribute|ID]")"; // <- Problem here 
```

当我编写模型时，我无法让“refName=[Attribute|ID]”来引用实体内的属性。在下面的代码中

```
DOMAINMODEL auctionHouse{
    ENTITYS {

       lots{      
          NUMBER id0
          NUMBER lotNo
          STRING name
          STRING priceEstimate
          STRING description
       }  
       auctions{
          NUMBER id1
          NUMBER date
          STRING description
       }
       auction_lots{
          NUMBER id2
          STRING lot_id
          NUMBER auction_id
       }

    }

    ENTITY_RELATIONSHIP {
        auction_lots : lot_id -> lots(id0) // <- Will not find 'id0'
        auction_lots : auction_id -> auctions(id1) // <- Will not find 'id1'
    }

} 
```

如何扩大范围？如何区分名称相同但范围不同的两个属性？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T13:15:13.830

引用的问题在于它们根本无法在该范围内找到，您可以做的是引入一个限定名称并在您的交叉引用中使用它并相应地更改您的语法，即：-

```
QualifiedName:
    ID ('.' ID)*;

Relationship:
    name=ID ":" newEntityName=ID "->" refName=[Attribute|QualifiedName]; 
```

现在应该可以使用限定 ID 进行引用：

```
ENTITY_RELATIONSHIP {
    auction_lots : lot_id -> auctionHouse.lots.id0
    auction_lots : auction_id -> auctionHouse.auctions.id1
} 
```

如果您不能像这样更改语法以使用 Xtext 处理名称的默认方式，那么您需要考虑提供您自己的限定名称，一篇很棒的文章就是这篇[Qualified Names Article](http://christiandietrich.wordpress.com/2011/07/16/iqualifiednameproviders-in-xtext-2-0/)

# hosting - How to build and host a yesod web application

> ID：14539986
> 
> 赞同：2
> 
> 时间：2013-01-26T18:15:21.257
> 
> 标签：hosting, yesod

What is the best way to build and host yesod applications? I have already tried different tutorials but without success.

Kind regards Joachim

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T21:37:20.723

我相信推荐的部署过程是通过[keter](https://github.com/snoyberg/keter/blob/master/README.md)。我自己也使用并享受这种方法。

# python - 熊猫在时间范围之外丢弃行

> ID：14539992
> 
> 赞同：17
> 
> 时间：2013-01-26T18:15:35.187
> 
> 标签：python, pandas

我正在尝试遍历 DataFrame 索引中的每一行并删除不在特定时间之间的所有行。

我一直在寻找解决方案，但它们都没有将日期与时间分开，我想做的就是删除时间范围之外的行。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-26T19:08:54.680

您可以[`between_time`](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.between_time.html)直接使用该功能：

```
ts.between_time(datetime.time(18), datetime.time(9), include_start=False, include_end=False) 
```

* * *

*原答案：*

您可以使用该`indexer_between_time` `Index`方法。

例如，要*包括*上午 9 点到下午 6 点（*含*）之间的时间：

```
ts.ix[ts.index.indexer_between_time(datetime.time(9), datetime.time(18))] 
```

做相反的事情并*排除*下午 6 点到上午 9 点之间的那些时间（*独家*）：

```
ts.ix[ts.index.indexer_between_time(datetime.time(18), datetime.time(9),
                                    include_start=False, include_end=False)] 
```

*注意：`indexer_between_time`的参数`include_start`和`include_end`默认情况下`True`，设置`include_start`为`False`意味着时间部分精确的日期时间`start_time`（第一个参数），在这种情况下是下午 6 点，将不包括在内。*

例子：

```
In [1]: rng = pd.date_range('1/1/2000', periods=24, freq='H')

In [2]: ts = pd.Series(pd.np.random.randn(len(rng)), index=rng)

In [3]: ts.ix[ts.index.indexer_between_time(datetime.time(10), datetime.time(14))] 
Out[3]: 
2000-01-01 10:00:00    1.312561
2000-01-01 11:00:00   -1.308502
2000-01-01 12:00:00   -0.515339
2000-01-01 13:00:00    1.536540
2000-01-01 14:00:00    0.108617 
```

注意：相同的语法（使用[`ix`](http://pandas.pydata.org/pandas-docs/dev/indexing.html#advanced-indexing-with-labels)）适用于 DataFrame：

```
In [4]: df = pd.DataFrame(ts)

In [5]: df.ix[df.index.indexer_between_time(datetime.time(10), datetime.time(14))]
Out[5]: 
                            0
2000-01-03 10:00:00  1.312561
2000-01-03 11:00:00 -1.308502
2000-01-03 12:00:00 -0.515339
2000-01-03 13:00:00  1.536540
2000-01-03 14:00:00  0.108617 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-28T21:53:05.733

你也可以这样做：

```
﻿rng = pd.date_range('1/1/2000', 周期=24, 频率='H')
ts = pd.Series(pd.np.random.randn(len(rng)), index=rng)
ts.ix[datetime.time(10):datetime.time(14)]
输出[4]：
2000-01-01 10:00:00 -0.363420
2000-01-01 11:00:00 -0.979251
2000-01-01 12:00:00 -0.896648
2000-01-01 13:00:00 -0.051159
2000-01-01 14:00:00 -0.449192
频率：H，数据类型：float64

```

DataFrame 的工作方式相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-11T13:19:31.977

如果您不是在寻找就地功能，那么`between_time`就像@AndyHayden 所说的那样。

对于那些寻找就地版本的人，我在这里留下这个评论：如果您希望选择就地（直接应用于 pandas.DataFrame `df`），您可以使用：

```
df.drop(numpy.setdiff1d(df.index, df.between_time(start_time=dt.time(hours=8,minute=0),
                                               end_time=dt.time(hours=18, minute=0),
                                               include_start=True, 
                                               include_end=False).index)
       ,inplace=True) 
```

日期时间在哪里`dt`。

在这里，我们找到不在时间范围内的索引并将其删除。

# facebook - Facebook Comments Plugin Not Working

> ID：14539994
> 
> 赞同：4
> 
> 时间：2013-01-26T18:15:45.627
> 
> 标签：facebook, comments

I integrated the HTML5 code onto my code:

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/de_DE/all.js#xfbml=1&appId=MY_APP_ID";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

and

```
<div class="fb-comments" data-href="http://mydomain.com" data-width="470" data-num-posts="2"></div> 
```

It is being displayed correctly and I can comment, BUT every Comment seems to stay "local". Meaning, when one User comments, only he can see his comments and no one else. I tried it with a few different users and each user only sees his own comments. What might be the issue?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-13T07:04:06.057

“MY_APP_ID”可能与当前处于沙盒模式的应用程序有关。此类应用程序的活动仅向相关用户、管理员、测试人员等显示。检查该属性的 APP 设置并禁用沙盒模式。

# php - CodeIgniter HMVC 架构 404 错误

> ID：14539997
> 
> 赞同：0
> 
> 时间：2013-01-26T18:16:27.070
> 
> 标签：php, codeigniter, http-status-code-404, codeigniter-2

我有 CodeIgniter 2.1.3 扩展了下面的 HMVC[插件](https://bitbucket.org/wiredesignz/codeigniter-modular-extensions-hmvc)，我一直跟着它到最后，让它在基本示例中没有问题地工作。但是现在我想使用 BitAuth 身份验证库扩展我的应用程序，并且我想将它作为一个模块来实现。

所以我已经根据插件的文档完成了所有步骤：
我创建了一个带有控制器和视图的文件夹 auth，它带有 BithAuth 库，并调用了模块控制器和方法，但这给了我一个 404 错误。

**例如，当我打电话时，我注意到测试模块和我的 bithauth 模块之间存在一个差异**

```
<?php Modules::run('module/controller/method'); ?> 
```

**this 在测试模块上，然后访问 localhost/home/index 页面显示主页视图并呈现模块视图**。但是，当我在我的 bitauth 模块上调用它并访问时，`localhost`我被重定向到`localhost/bithauth_controller/bitauth_method`并引发 404 错误。

我的文件夹结构：

```
->application  
-->controllers  
-->views  
-->models  
--->modules/auth/controllers  
--->modules/auth/vews/examples  
--->modules/auth/models 
```

我的家庭控制器映射到家庭 url：localhost

```
class Home extends MX_Controller {
    public function index()
    {
        $this->load->view('home');
    }
} 
```

及其视图文件：

```
<html>
    <head>
        <title>Shop: index</title>
    </head>
    <body>
        <?php Modules::run('auth/Example/index'); ?>
    </body>
</html> 
```

现在在 auth 文件夹中，我有 bithauth 控制器：

```
class Example extends MX_Controller
{

    /**
     * Example::__construct()
     *
     */
    public function __construct()
    {
        parent::__construct();

        $this->load->library('bitauth');

        $this->load->helper('form');
        $this->load->helper('url');

        $this->load->library('form_validation');
        $this->form_validation->set_error_delimiters('<div class="error">', '</div>');
    }

    public function index()
    {
        if( ! $this->bitauth->logged_in())
        {
            $this->session->set_userdata('redir', current_url());
            redirect('example/login');
        }

        $this->load->view('example/users', array('bitauth' => $this->bitauth, 'users' => $this->bitauth->get_users()));
    }

} 
```

以及 auth/views 中的视图：一个简单的形式

```
<body>
    <?php

        echo '<table border="0" cellspacing="0" cellpadding="0" id="table">';
        echo '<caption>BitAuth Example: Users</caption>';
        echo '<tr><th width="1">ID</th><th>Username</th><th>Full Name</th><th>Actions</th></tr>';
        if( ! empty($users))
        {
            foreach($users as $_user)
            {
                $actions = '';
                if($bitauth->has_role('admin'))
                {
                    $actions = anchor('example/edit_user/'.$_user->user_id, 'Edit User');
                    if( ! $_user->active)
                    {
                        $actions .= '<br/>'.anchor('example/activate/'.$_user->activation_code, 'Activate User');
                    }

                }

                echo '<tr>'.
                    '<td>'.$_user->user_id.'</td>'.
                    '<td>'.$_user->username.'</td>'.
                    '<td>'.$_user->fullname.'</td>'.
                    '<td>'.$actions.'</td>'.
                '</tr>';
            }
        }
        echo '</table>';

        echo '<div id="bottom">';
        echo anchor('example/logout', 'Logout', 'style="float: right;"');
        echo anchor('example/groups', 'View Groups');
        if($bitauth->is_admin())
        {
            echo '<br/>'.anchor('example/add_user', 'Add User');
        }
        echo '</div>';

    ?>
</body> 
```

我注意到重定向发生是由于我解决`if()`了方法中的语句，`index()`但现在我没有显示我的模块视图，也没有收到任何错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T19:55:18.803

> 我没有显示我的模块视图，也没有收到任何错误。

试试这个：

```
<?php echo Modules::run('module/controller/method'); ?> 
```

但最好使用这种方式（Codeigniter 输出类）：

```
<?php $this->output->append_output( Modules::run('module/controller/method') ); ?> 
```

我希望这有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-29T22:03:50.003

因此，如果你们中的任何人在这里，在您的路线上使用 (GET/POST/DELETE/PUT) 时寻找解决方案`REQUEST_METHOD`，并面临 404 错误，这里是解决方案：显然，CodeIgniter 的 HMVC 插件忘记考虑处理不同的路由请求的类型，不像它的本机版本。实际上，当您为特定类型的请求定义路由时，它无法加载关联的模块。所以，我继续调整模块类。如果您按照上面其他人的规定维护了代码结构，则需要转到`application/third_party/MX/Modules.php`第 234 行并将以下内容添加到行：

```
 $method = $_SERVER['REQUEST_METHOD'];
            $val = is_array($val) ?(empty($val[$method]) ?'' :$val[$method]) :$val; 
```

# wordpress - 子主页与 WordPress Genesis Child Theme 上的主题完全不同

> ID：14539999
> 
> 赞同：0
> 
> 时间：2013-01-26T18:16:42.157
> 
> 标签：wordpress

我即将在创世纪儿童主题上执行此操作。我*真的*尝试过选择我的客户喜欢的主题，但项目即将完成时，他们突然将自己的艺术作品放在我的身上，并希望将它用于主页。所以我的网站快要上线了，她把她自己的作品发给了我，她想成为主页。这是一个完整的页面，与网站的其他部分有不同的背景，没有侧边栏或小部件区域，只有三个按钮。

这是我为此找到的解决方案。

[如何在 wordpress 上集成自定义登录页面？](https://stackoverflow.com/questions/5860947/how-to-integrate-a-custom-landing-page-on-wordpress/5890227#5890227)

我是否需要在每次升级时重新添加此解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T18:52:14.400

不，你不会的。自定义页面模板是标准的 WP 功能。您应该只为主页设置适当的模板。