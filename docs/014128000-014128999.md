# StackOverflow 问答 14128000-14128999

# r - 求解涉及输入为向量的函数的不等式

> ID：14128002
> 
> 赞同：0
> 
> 时间：2013-01-02T19:33:47.450
> 
> 标签：r

如果这个问题看起来很抽象，请道歉。我已经付出了很大的努力来清晰地呈现它。

设为长度`S(n,L)`为 的条目的向量集，例如和。`{0,1,2,...,n}``L``S(1,2) = {0,0|0,1|1,0|1,1}``S(5,1) = {0|1|2|3|4|5}`

我有一个函数`F`，它接收元素`S(n,L)`并输出 0 到 100 之间的实数。

我想知道，给定一个`r`介于 0 到 100 之间的实数，我如何确定以下“相当小”的集合`n`和`l`：

`S'(n,L,r) = {v in S(n,L)| F(v) >= r}`

到目前为止，我所能做的就是`S(n,L)`通过以下代码生成：

```
f = function(n,L){

h = rep(list(0:n),L)

do.call(expand.grid,h)} 
```

我对 R 中的这种东西非常陌生，所以任何帮助都将不胜感激。干杯

编辑：`l`已更改`L`为避免歧义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T19:50:14.743

我认为这会起作用：

```
# Test values
n<-6
l<-3
r<-0

S.n.l<-f(n,l) # Generate the series
F<-function(x) rnorm(1) # Your function is more complicated
S.n.l [apply(S.n.l,1,F) >= r,] # Check if any value exceeds r and return. 
```

但是如果`F`是矢量化的，那么你就不需要`apply`了，你的功能会快得多。例如，如果`F`只是简单地将这些值相加，那么您可以`F(S.n.l)`一次计算所有值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T19:54:34.737

您要描述的第一件事称为集合的排列。在 R 中，用于`foo<- 0:n`创建源向量。 `expand.grid`很好——尽管包中可能有一些`plyr`执行得更快的工具。

另一方面，您的函数`F`对这些值的实际作用确实很重要。如果您只是碰巧需要一些随机排列，那么 `sample`每次调用它时都会给您一个随机选择的排列，而无需每次都创建整个集合。如果您需要执行`F`每个可能的排列（大概只有一次！），那么您最好还是循环遍历排列而不是创建一个相对较大的数据对象。

# php - 测试一个对象是否属于一个或另一个实例

> ID：14128003
> 
> 赞同：0
> 
> 时间：2013-01-02T19:33:52.237
> 
> 标签：php, phpunit

这听起来像一个简单的问题，我是 PHPUnit 的新手，但是我已经查看了文档，但似乎不知道该怎么说：

```
assert($class instanceof MongoClient || $class instanceof Mongo); 
```

那是伪代码，但希望它是有意义的。

我发现最接近它的是：[http ://www.phpunit.de/manual/current/en/writing-tests-for-phpunit.html#writing-tests-for-phpunit.assertions.assertContainsOnlyInstancesOf](http://www.phpunit.de/manual/current/en/writing-tests-for-phpunit.html#writing-tests-for-phpunit.assertions.assertContainsOnlyInstancesOf)

所以我认为这在 PHPUnit 中是不支持的。有没有好的解决方法或者我需要自己做这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T19:36:17.317

`assert`在 PHPUnit 中只需要一个布尔值。

您在伪代码中的内容非常好。

# javascript - 如何使用javascript从输入中连接字符串？

> ID：14128004
> 
> 赞同：-1
> 
> 时间：2013-01-02T19:34:06.247
> 
> 标签：javascript, html

我有 3 个字段：姓名、姓氏和连接。

我要做的是将字段名称的第一个字符与姓氏连接起来。正如我所写，Concat 领域正在发生变化。

我现在有这个：

```
<p>Name</p><input type="text" id="name"  onChange="document.getElementById('concat').value=this[0].value;" />
<p>Last name</p><input type="text" id="last_name" document.getElementById('txt').value=document.getElementById('txt').value + this.value;"/>
<p>Concat</p>
<input type="text" id="concat"  /> 
```

但是第一个字符似乎不起作用，我认为问题可能出在 this[0].value; 或者我如何获得第一个聊天者，还有其他功能可以做到吗？

谢谢，提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T19:37:52.950

您在 First-Name 文本框中使用`[0]`on `this`，但它应该是实际值：

```
onChange="document.getElementById('concat').value=this.value[0];" 
```

或者，您可以明确并用于`.substring()`获取第一个字符：

```
onChange="document.getElementById('concat').value=this.value.substring(0, 1);" 
```

这将获得输入的第一个字符。虽然写/读的时间有点长，但它会传达你的确切目的。

*注意：*如果您的输入为空，那么当您使用 as 时，您将在文本框中`undefined`插入一个值，好吧，没有. 使用不会给出这样的文本（如果它是一个问题）。`concat``this.value[0]``[0]``.substring(0, 1)`

此外，您的第二个姓氏文本框有两个拼写错误（基于您的示例代码），因为它不包含`onchange=`属性*并且*它使用 id`txt`而不是`concat`. 此外，它不会尝试获取名字文本框的子字符串。

尝试将您的完整代码块更新为以下内容：

```
<p>Name</p>
<input type="text" id="name" onchange="document.getElementById('concat').value=this.value.substring(0, 1);" />
<p>Last name</p>
<input type="text" id="last_name" onchange="document.getElementById('concat').value=document.getElementById('name').value.substring(0, 1) + this.value;"/>
<p>Concat</p>
<input type="text" id="concat"  /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T19:37:57.227

```
this[0].value 
```

如果您想要输入字段值的第一个字符，那不是您应该做的。

`this`是输入字段。`this.value`是您想要的第一个字符的字符串。并且`this.value[0]`会给你字符串第一个字符。

所以：

```
this.value[0] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T19:38:38.760

你犯了一些错误，这是你更正的代码

```
<p>Name</p><input type="text" id="name"    onChange="document.getElementById('concat').value=this.value[0];" />
<p>Last name</p><input type="text" id="last_name" onChange="document.getElementById('concat').value=document.getElementById('name').value[0] + ' '    + this.value;"/>
<p>Concat</p>
<input type="text" id="concat"  />​​​​​​​​​​​​​​​​​​​​​​ 
```

请与您自己的代码进行比较！

# c# - 如何选择当前节点的所有属性？(XPATH)

> ID：14128009
> 
> 赞同：0
> 
> 时间：2013-01-02T19:34:16.853
> 
> 标签：c#, xpath

我正在尝试选择当前节点的所有属性，然后将它们显示在屏幕上。

这将具有导航器的功能，它将告诉您您所在节点内的所有属性。

我正在尝试使用“. *”“@* ”“.@”，但似乎没有任何效果。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T19:35:43.047

使用`@*`选择器选择所有属性：

```
element.Select("@*"); 
```

# c++ - boost::container::vector 比 std::vector 快吗？为什么？

> ID：14128012
> 
> 赞同：5
> 
> 时间：2013-01-02T19:34:31.580
> 
> 标签：c++, boost, vector, std

我对 boost 向量和 std 向量做了一个有趣的测试，如下所示

```
int N = 10000;
{
    boost::timer::auto_cpu_timer t;
    std::vector<int> v;
    for (int i = 0; i < N; ++i)
    {
        v.insert(v.begin(), i);
    }
}

{
    boost::timer::auto_cpu_timer t;
    boost::container::vector<int> v;
    for (int i = 0; i < N; ++i)
    {
        v.insert(v.begin(), i);
    }
} 
```

win32发布，vc2010编译，/O2 /Oy-

对于 N = 10000

对于标准向量：0.140849s 墙，0.140401s 用户 + 0.000000s 系统 = 0.140401s CPU (99.7%)

f 提升向量：0.056174s 墙，0.062400s 用户 + 0.000000s 系统 = 0.062400s CPU (111.1%)

对于 N = 100,000

标准：14.050757s 墙，14.055690s 用户 + 0.000000s 系统 = 14.055690s CPU (100.0%)

提升：5.585048s 墙，5.584836s 用户 + 0.000000s 系统 = 5.584836s CPU (100.0%)

将 Reserve(N) 添加到两者时，CPU 时间几乎没有变化。

他们之间有什么区别吗？Boost比std快得多，为什么？谢谢。

检查 sizeof()，std::vector 16，而 boost::container::vector 12。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T20:08:32.853

请记住，所有代码的速度会因编译器和编译器版本而异。标准库提供的代码可以在平台之间移植，但很难保证速度。

如果您只是在自己的机器上运行此代码，那么您应该选择更快的选项，如果这是您想要的。如果你问这个问题是因为你想做出一个普遍更快的选择，那么我认为没有办法知道测试它的不足之处。

自然地，当一个人以一般的方式想知道速度时，就像你看起来的那样，你会想要评估插入许多不同数量的对象，运行许多重复测试，并使用各种对象（类，双打，字符等）。您也可以选择使用不同数量的可用堆栈空间来完成所有这些操作。如果您不考虑所有因素，那么默认情况下您的问题会变成“为什么在我的特定情况下会存在速度差异？” 通常很难说。

一个更好的问题可能是，“我在各种测试条件下观察到这两个功能相似的代码之间的速度差异。它们之间是否存在一些架构差异可以解释这一点？” 答案是也许。

[cplusplus.com 在 std::vector 上](http://www.cplusplus.com/reference/vector/vector/)

> 在内部，向量使用动态分配的数组来存储它们的元素。当插入新元素时，可能需要重新分配该数组以增加大小，这意味着分配一个新数组并将所有元素移至该数组。就处理时间而言，这是一项相对昂贵的任务，因此，向量不会在每次将元素添加到容器时重新分配。
> 
> 相反，向量容器可能会分配一些额外的存储空间以适应可能的增长，因此容器的实际容量可能大于包含其元素所严格需要的存储空间（即其大小）。库可以实施不同的增长策略来平衡内存使用和重新分配，但无论如何，重新分配应该只发生在对数增长的大小间隔上，以便可以为向量末尾的单个元素插入提供摊销常数时间复杂性（参见 push_back）。

从这里我们看到，您看到的行为取决于您使用的特定版本的 STL 库，并且增长应该是对数的，并且增长通常需要大量复制。双[端队列](http://www.cplusplus.com/reference/deque/)不需要大量复制，因此它可以在您的测试中更好地扩展。

据推测，`boost::container`功能类似。我不知道，因为我找不到关于它的文章。但我确实找到[了这个](http://www.boost.org/doc/libs/1_52_0/doc/html/container/move_emplace.html)：

> Boost.Container 提供的所有容器都实现了放置插入，这意味着可以从用户参数直接将对象构建到容器中，而无需创建任何临时对象。对于不支持可变参数模板的编译器，最多可以模拟有限 (10) 个参数的位置插入。

如果 std::vector 不使用类似的架构而是创建一个临时对象，这可能会导致运行时的差异。但这可能不适用于`int`类型。也许其他人可以找到不同的架构差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-26T23:36:20.697

boost::container 中的容器类大量使用了扩展分配器，它们不仅允许分配和解除分配、构造和解构，而且如果可能的话还可以扩展分配的内存块。这意味着在许多情况下复制更少，并且本质上与您在 c 中可以做的 c++ 等效：

```
char * data;
char * newdata = malloc(newdatasize);
memcpy(newdata,data,datasize);
swap(data,newdata);
free(newdata); 
```

[https://www.boost.org/doc/libs/1_68_0/doc/html/container/extended_allocators.html](https://www.boost.org/doc/libs/1_68_0/doc/html/container/extended_allocators.html) 当插入 int 时，没有任何“放置插入”优化是相关的，因为 int 的构造很简单。

# android - 制作一个 ListAdapter-recycleable Resizable View

> ID：14128018
> 
> 赞同：5
> 
> 时间：2013-01-02T19:34:53.097
> 
> 标签：android, android-listview, layoutparams

我正在创建一个具有展开和压缩状态的自定义视图——在压缩状态下，它只会显示一个标签和一个图标，在展开状态下，它会在其下方显示一条消息。这是到目前为止它如何工作的屏幕截图：

![截屏](../Images/3690d30a123f2e916c0c99c8c6750d9d.png)

一旦测量，它本身会保留压缩和扩展状态的`View`大小值，因此在两种状态之间进行动画处理很简单，并且在正常实践中使用视图时（例如在 a 中`LinearLayout`），一切都按预期工作。通过调用来更改视图大小`getLayoutParams().height = newHeight; requestLayout();`

但是，在 a 中使用它时`ListView`，视图会被回收并保持其先前的高度。因此，如果视图在隐藏时展开，则在为下一个列表项回收时它将显示为展开状态。即使我在`ListAdapter`. 我考虑使用具有两种不同视图类型（扩展和压缩）的回收器，但大小会根据消息的大小而有所不同。当视图重新附加到`ListView`? 或者您对如何处理这个问题有其他建议？

编辑：这就是我确定视图的扩展和压缩高度的方式：

```
@Override
protected void onLayout(boolean changed, int l, int t, int r, int b) {
    super.onLayout(changed, l, t, r, b);
    if(r - l > 0 && b - t > 0 && dimensionsDirty) {
        int widthSpec = MeasureSpec.makeMeasureSpec(r - l, MeasureSpec.EXACTLY);
        messageView.setVisibility(GONE);
        measure(widthSpec, MeasureSpec.UNSPECIFIED);
        condensedHeight = getMeasuredHeight();

        messageView.setVisibility(VISIBLE);
        measure(widthSpec, MeasureSpec.UNSPECIFIED);
        expandedHeight = getMeasuredHeight();

        dimensionsDirty = false;
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-03T03:51:55.747

**编辑**：固定的两个调用的参数顺序`makeMeasureSpec`。奇怪的是，它的工作方式不正确，所以我几乎想知道我是否在做一些多余的事情。无论哪种方式，只是想指出——下面要下载的项目没有这些更正。

好的，所以我无法弄清楚这一点真的很困扰我，所以我决定更熟悉布局和测量系统，这就是我想出的解决方案。

1.  托管单个直接子级的自定义`ViewGroup`扩展（例如.）`FrameLayout``ScrollView`
2.  `ListAdapter`处理跟踪每个列表项的展开/折叠状态的自定义。
3.  `OnItemClickListener`处理在折叠和展开状态之间动画的请求的自定义。

![调整布局屏幕截图](../Images/262fe3182423e368bc2fb6163096b499.png)

我想分享这段代码，以防其他人发现它有用。它应该相当灵活，但我毫不怀疑存在错误和可以改进的东西。一方面，我在以编程方式滚动时遇到了问题`ListView`（似乎没有一种方法可以实际滚动内容而不仅仅是视图），所以我使用`smoothScrollToPosition(int)`了对视图大小的每次更改。这有一个硬编码的 400ms 持续时间，这是不必要的，所以将来我可能会尝试编写我自己的持续时间为 0 的版本（即`scrollToPosition(int)`）。

一般用途如下：

1.  您的列表项 XML 应该将您`ResizeLayout`作为层次结构的根，并且您可以从那里构建您想要的任何布局结构。基本上只需将您的正常列表项布局包装在`ResizeLayout`标签中。

2.  在您的布局中，您应该有一个带有 id 的视图`collapse_to`。这是布局将包裹到的视图（即哪个视图确定折叠高度）。

3.  如果您通过列表适配器进行回收，重要的事情要做：

    *   `reuse()`检索回收视图时始终调用（例如`convertView`）
    *   总是`setIsExpanded(boolean)`在返回回收视图之前调用；否则它会保留它被回收之前的状态

我最终可能会将其放入 git repo 中，但现在这里是代码：

# ResizeLayout.java

这是大部分代码。我还将包括我的`Activity`和`Adapter`用于进一步测试的。它们非常通用，但它们有效地说明了使用。

```
import android.content.Context;
import android.util.AttributeSet;
import android.util.Log;
import android.view.View;
import android.view.ViewGroup;
import android.view.animation.*;
import android.widget.FrameLayout;

/*
 * ResizeLayout
 * 
 * Custom ViewGroup that allows you to specify a view in the child hierarchy to wrap to, and 
 * allows for the view to be expanded to the full size of the content.
 * 
 * Author:  Kevin Coppock
 * Date:    2013/03/02
 */

public class ResizeLayout extends FrameLayout {
    private static final int PX_PER_SEC = 900; //Pixels per Second to animate layout changes
    private final LayoutAnimation animation = new LayoutAnimation();
    private final int wrapSpec = MeasureSpec.makeMeasureSpec(LayoutParams.WRAP_CONTENT, MeasureSpec.UNSPECIFIED);

    private int collapsedHeight = 0;
    private int expandedHeight = 0;
    private boolean contentsChanged = true;
    private State state = State.COLLAPSED;

    private OnLayoutChangedListener listener;

    public ResizeLayout(Context context) { super(context); }
    public ResizeLayout(Context context, AttributeSet attrs) { super(context, attrs); }
    public ResizeLayout(Context context, AttributeSet attrs, int defStyle) { super(context, attrs, defStyle); }

    @Override
    protected void onLayout(boolean changed, int left, int top, int right, int bottom) {
        if(getChildCount() > 0) {
            View child = getChildAt(0);
            child.layout(0, 0, child.getMeasuredWidth(), child.getMeasuredHeight());
        }

        //If the layout parameters have changed and the view is animating, notify listeners
        if(changed && animation.isAnimating()) {
            switch(state) {
                case COLLAPSED: fireOnLayoutCollapsing(left, top, right, bottom); break;
                case EXPANDED:  fireOnLayoutExpanding(left, top, right, bottom); break;
            }
        }
    }

    /**
     * Reset the internal state of the view to defaults. This should be called any time you change the contents
     * of this ResizeLayout (e.g. recycling through a ListAdapter)
     */
    public void reuse() {
        collapsedHeight = expandedHeight = 0;
        contentsChanged = true;
        state = State.COLLAPSED;
        requestLayout();
    }

    /**
     * Set the state of the view. This should ONLY be called after a call to reuse() as it does not animate
     * the view; it simply sets the internal state. An example of usage is in a ListAdapter -- if the view is
     * recycled, it may be in the incorrect state, so it should be set here to the correct state before layout.
     * @param isExpanded whether or not the view should be in the expanded state
     */
    public void setIsExpanded(boolean isExpanded) {
        state = isExpanded ? State.EXPANDED : State.COLLAPSED;
    }

    /**
     * Animates the ResizeLayout between COLLAPSED and EXPANDED states, only if it is not currently animating.
     */
    public void animateToNextState() {
        if(!animation.isAnimating()) {
            animation.reuse(state.getStartHeight(this), state.getEndHeight(this));
            state = state.next();
            startAnimation(animation);
        }
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        int width = MeasureSpec.getSize(widthMeasureSpec);
        int height = MeasureSpec.getSize(heightMeasureSpec);
        int widthMode = MeasureSpec.getMode(widthMeasureSpec);
        int heightMode = MeasureSpec.getMode(heightMeasureSpec);

        if(getChildCount() < 1) { //ResizeLayout has no child; default to spec, or padding if unspecified
            setMeasuredDimension(
                widthMode ==  MeasureSpec.UNSPECIFIED ? getPaddingLeft() + getPaddingRight() : width,
                heightMode == MeasureSpec.UNSPECIFIED ? getPaddingTop() + getPaddingBottom() : height
            );
            return;
        }

        View child = getChildAt(0); //Get the only child of the ResizeLayout

        if(contentsChanged) { //If the contents of the view have changed (first run, or after reset from reuse())
            contentsChanged = false;
            updateMeasurementsForChild(child, widthMeasureSpec, heightMeasureSpec);
            return;
        }

        //This state occurs on the second run. The child might be wrap_content, so the MeasureSpec will be unspecified.
        //Skip measuring the child and just accept the measurements from the first run.
        if(heightMode == MeasureSpec.UNSPECIFIED) {
            setMeasuredDimension(getWidth(), getHeight());
        } else {
            //Likely in mid-animation; we have a fixed-height from the MeasureSpec so use it
            child.measure(widthMeasureSpec, heightMeasureSpec);
            setMeasuredDimension(child.getMeasuredWidth(), child.getMeasuredHeight());
        }
    }

    /**
     * Sets the measured dimension for this ResizeLayout, getting the initial measurements
     * for the condensed and expanded heights from the child view.
     * @param child the child view of this ResizeLayout
     * @param widthSpec the width MeasureSpec from onMeasure()
     * @param heightSpec the height MeasureSpec from onMeasure()
     */
    private void updateMeasurementsForChild(View child, int widthSpec, int heightSpec) {
        child.measure(widthSpec, wrapSpec); //Measure the child using WRAP_CONTENT for the height

        //Get the View that has been selected as the "collapse to" view (ID = R.id.collapse_to)
        View viewToCollapseTo = child.findViewById(R.id.collapse_to);

        if(viewToCollapseTo != null) {
            //The collapsed height should be the height of the collapseTo view + any top or bottom padding
            collapsedHeight = viewToCollapseTo.getMeasuredHeight() + child.getPaddingTop() + child.getPaddingBottom();

            //The expanded height is simply the full height of the child (measured with WRAP_CONTENT)
            expandedHeight = child.getMeasuredHeight();

            //Re-Measure the child to reflect the state of the view (COLLAPSED or EXPANDED)
            int newHeightMeasureSpec = MeasureSpec.makeMeasureSpec(state.getStartHeight(this), MeasureSpec.EXACTLY);
            child.measure(widthSpec, newHeightMeasureSpec);
        }
        setMeasuredDimension(child.getMeasuredWidth(), child.getMeasuredHeight());
    }

    @Override
    public void addView(View child) {
        if(getChildCount() > 0) {
            throw new IllegalArgumentException("ResizeLayout can host only one direct child.");
        } else {
            super.addView(child);
        }
    }

    @Override
    public void addView(View child, int index, ViewGroup.LayoutParams params) {
        if(getChildCount() > 0) {
            throw new IllegalArgumentException("ResizeLayout can host only one direct child.");
        } else {
            super.addView(child, index, params);
        }
    }

    @Override
    public void addView(View child, ViewGroup.LayoutParams params) {
        if(getChildCount() > 0) {
            throw new IllegalArgumentException("ResizeLayout can host only one direct child.");
        } else {
            super.addView(child, params);
        }
    }

    @Override
    public void addView(View child, int width, int height) {
        if(getChildCount() > 0) {
            throw new IllegalArgumentException("ResizeLayout can host only one direct child.");
        } else {
            super.addView(child, width, height);
        }
    }

    /**
     * Handles animating the view between its expanded and collapsed states by adjusting the
     * layout parameters of the containing object and requesting a layout pass.
     */
    private class LayoutAnimation extends Animation implements Animation.AnimationListener {
        private int startHeight = 0, deltaHeight = 0;
        private boolean isAnimating = false;

        /**
         * Just a default interpolator and friction I think feels nice; can be changed.
         */
        public LayoutAnimation() {
            setInterpolator(new DecelerateInterpolator(2.2f));
            setAnimationListener(this);
        }

        /**
         * Sets the duration of the animation to a duration matching the specified value in
         * Pixels per Second (PPS). For example, if the view animation is 60 pixels, then a PPS of 60
         * would set a duration of 1000ms (i.e. duration = (delta / pps) * 1000). PPS is used rather
         * than a fixed time so that the animation speed is consistent regardless of the contents
         * of the view.
         * @param pps the number of pixels per second to resize the layout by
         */
        private void setDurationPixelsPerSecond(int pps) {
            setDuration((int) (((float) Math.abs(deltaHeight) / pps) * 1000));
        }

        /**
         * Allows reuse of a single LayoutAnimation object. Call this before starting the animation
         * to restart the animation and set the new parameters
         * @param startHeight the height from which the animation should begin
         * @param endHeight the height at which the animation should end
         */
        public void reuse(int startHeight, int endHeight) {
            reset();
            setStartTime(0);
            this.startHeight = startHeight;
            this.deltaHeight = endHeight - startHeight;
            setDurationPixelsPerSecond(PX_PER_SEC);
        }

        /**
         * Applies the height transformation to this containing ResizeLayout
         * @param interpolatedTime the time (0.0 - 1.0) interpolated based on the set interpolator
         * @param t the transformation associated with the animation -- not used here
         */
        @Override
        protected void applyTransformation(float interpolatedTime, Transformation t) {
            getLayoutParams().height = startHeight + (int)(deltaHeight * interpolatedTime);
            requestLayout();
        }

        public boolean isAnimating() {
            return isAnimating;
        }

        @Override
        public void onAnimationStart(Animation animation) {
            isAnimating = true;
        }

        @Override
        public void onAnimationEnd(Animation animation) {
            isAnimating = false;
        }

        @Override
        public void onAnimationRepeat(Animation animation) {
            /*Not implemented*/
        }
    }

    /**
     * Interface to listen for layout changes during an animation
     */
    public interface OnLayoutChangedListener {
        public void onLayoutExpanding(int l, int t, int r, int b);
        public void onLayoutCollapsing(int l, int t, int r, int b);
    }

    /**
     * Sets a listener for changes to this view's layout
     * @param listener the listener for layout changes
     */
    public void setOnBoundsChangedListener(OnLayoutChangedListener listener) {
        this.listener = listener;
    }

    private void fireOnLayoutExpanding(int l, int t, int r, int b) {
        if(listener != null) listener.onLayoutExpanding(l, t, r, b);
    }

    private void fireOnLayoutCollapsing(int l, int t, int r, int b) {
        if(listener != null) listener.onLayoutCollapsing(l, t, r, b);
    }

    protected enum State {
        COLLAPSED{
            @Override
            public State next() {
                return EXPANDED;
            }

            @Override
            public int getEndHeight(ResizeLayout view) {
                return view.expandedHeight;
            }

            @Override
            public int getStartHeight(ResizeLayout view) {
                return view.collapsedHeight;
            }
        },
        EXPANDED{
            @Override
            public State next() {
                return COLLAPSED;
            }

            @Override
            public int getEndHeight(ResizeLayout view) {
                return view.collapsedHeight;
            }

            @Override
            public int getStartHeight(ResizeLayout view) {
                return view.expandedHeight;
            }
        };

        public abstract State next();
        public abstract int getStartHeight(ResizeLayout view);
        public abstract int getEndHeight(ResizeLayout view);
    }
} 
```

# 我的活动.java

只是一个简单`ListActivity`的，我用于这个例子的目的。`main.xml`只是`LinearLayout`带有`ListView`子 XML的泛型`ListActivity`。

```
import android.app.ListActivity;
import android.content.Context;
import android.graphics.Color;
import android.graphics.drawable.ColorDrawable;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.BaseAdapter;
import android.widget.TextView;

import java.util.HashSet;
import java.util.Set;

public class MyActivity extends ListActivity implements ResizeLayout.OnLayoutChangedListener, AdapterView.OnItemClickListener {
    private MyAdapter myAdapter;
    private int clickedItemPosition;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        myAdapter = new MyAdapter(this);
        setListAdapter(myAdapter);
        getListView().setOnItemClickListener(this);
        getListView().setSelector(new ColorDrawable(Color.TRANSPARENT));
    }

    @Override
    public void onLayoutExpanding(int l, int t, int r, int b) {
        //Keep the clicked view fully visible if it's expanding
        getListView().smoothScrollToPosition(clickedItemPosition);
    }

    @Override
    public void onLayoutCollapsing(int l, int t, int r, int b) {
        //Not handled currently
    }

    @Override
    public void onItemClick(AdapterView<?> adapterView, View view, int i, long l) {
        clickedItemPosition = i;
        myAdapter.toggleExpandedState(i);
        ((ResizeLayout) view).animateToNextState();
    }

    private class MyAdapter extends BaseAdapter {
        private LayoutInflater inflater;
        private Set<Integer> expanded = new HashSet<Integer>();

        public MyAdapter(Context ctx) {
            inflater = LayoutInflater.from(ctx);
        }

        @Override
        public int getCount() {
            return 100;
        }

        @Override
        public Object getItem(int i) {
            return i + 1;
        }

        @Override
        public long getItemId(int i) {
            return i;
        }

        public void toggleExpandedState(int position) {
            if (expanded.contains(position)) {
                expanded.remove(position);
            } else {
                expanded.add(position);
            }
        }

        @Override
        public View getView(int i, View convertView, ViewGroup viewGroup) {
            ResizeLayout layout = (ResizeLayout) convertView;
            TextView title;

            //New instance; no view to recycle.
            if (layout == null) {
                layout = (ResizeLayout) inflater.inflate(R.layout.list_item, viewGroup, false);
                layout.setOnBoundsChangedListener(MyActivity.this);
                layout.setTag(layout.findViewById(R.id.title));
            }

            //Recycling a ResizeLayout; make sure to reset parameters with reuse()
            else layout.reuse();

            //Set the state of the View -- otherwise it will be in whatever state it was before recycling
            layout.setIsExpanded(expanded.contains(i));

            title = (TextView) layout.getTag();
            title.setText("List Item #" + i);

            return layout;
        }
    }
} 
```

# list_item.xml

基本列表项布局示例。只是在顶部有一个图标和一个标题（图标设置为`collapse_to`视图）和下面对齐的消息视图。

```
<?xml version="1.0" encoding="utf-8"?>
<com.example.resize.ResizeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    >

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:padding="10dp">

        <ImageView
            android:id="@+id/collapse_to"
            android:src="@drawable/holoku"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:scaleType="centerInside"
            android:layout_alignParentTop="true"
            android:layout_alignParentLeft="true"
            android:contentDescription="@string/icon_desc"
            tools:ignore="UseCompoundDrawables"
            />

        <TextView
            android:id="@+id/title"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_alignTop="@id/collapse_to"
            android:layout_alignBottom="@id/collapse_to"
            android:layout_toRightOf="@id/collapse_to"
            android:gravity="center_vertical"
            android:paddingLeft="20dp"
            android:textSize="20dp"
            android:textColor="#198EBC"
            />

        <TextView
            android:id="@+id/text"
            android:layout_marginTop="10dp"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:textSize="12dp"
            android:textColor="#444444"
            android:layout_below="@id/collapse_to"
            android:text="@string/message"
            />
    </RelativeLayout>
</com.example.resize.ResizeLayout> 
```

现在我还没有在 API 17 之前的任何东西上测试过它，但是运行 lint 检查 NewApi 问题表明这应该可以追溯到 2.2（API 8）。

如果您想下载示例项目并自己玩，您可以[在此处](https://www.dropbox.com/sh/50kxcr29831t854/WzYnLf58Gs/ResizeLayout.zip)下载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T19:56:18.313

您能否覆盖适配器的 getView 方法，并检查 convertView 变量（它是第二个参数，至少在我正在查看的 ArrayAdapter 中）。您应该能够在其上调用 getLayoutParames 以获取其高度，并根据位置变量进行相应调整。

# c# - 通过 XmlSerializer 序列化类工作正常，但反序列化 ObservableCollection 非常慢

> ID：14128021
> 
> 赞同：1
> 
> 时间：2013-01-02T19:34:59.257
> 
> 标签：c#, observablecollection, xmlserializer

```
 [Serializable]
    public class GraphViewModel : ViewModelBase
    {    
        public GraphViewModel()
        {
            //Constructor
        }

        public bool bool1 { get; set; }
        public bool bool2 { get; set; }
        public bool bool3 { get; set; }
        public ObservableCollection<Foo> Foos { get; set; }
    } 
```

使用上面的示例类，我可以毫无问题地序列化并插入二进制数据库字段。当我反序列化时，一切正常，但速度很慢（从 3 到 25 秒）。注意：列表中只有 5 个项目。

我已将问题缩小到 ObservableCollection。当我设置属性 [XmlIgnore] 时，反序列化的速度非常好，因为列表不包含在 xml 输出中。

我更喜欢使用 ObservableCollection 并改进我的设置以更有效地处理这种情况，但无法在线找到解决方案。

**编辑：** 我尝试了以下属性：

```
[XmlArray(ElementName = "Foos")]
[XmlArrayItem(ElementName = "Foo")]
public ObservableCollection<Foo> Foos { get; set; } 
```

它使 Xml 更具可读性，但不会提高反序列化速度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T19:42:01.177

反序列化速度很可能是由于可观察集合引发的事件。

在这种情况下，我所做的是将有问题的属性标记为 XMLIgnore，然后添加一个可序列化但类型更简单的伪属性，例如 List<>。在新属性的 getter 和 setter 中，只需将数据移入和移出不可序列化的属性。

编辑：

我意识到最初的建议与当前的反序列化具有相同的性能损失，因此我修改了概念以允许将一系列记录添加到可观察集合中，同时抑制否则会引发的事件。

首先，我们需要创建一个继承自 ObservableCollection 的特殊类：

```
public class FooCollection : ObservableCollection<Foo>
{
} 
```

在这个类中，我们需要添加一个允许我们添加一系列记录的方法，在本例中为 List<> 形式，并表明我们不希望在添加记录时发生通知：

```
 private bool m_fSuppressNotifications;

    public void AddRange(List<Foo> cItems)
    {
        if ((cItems == null) || (cItems.Count == 0)) {
            this.Clear();
        } else {
            try
            {
                // Keep events from being fired
                m_fSuppressNotifications = true;
                foreach (var oFoo in cItems)
                {
                    this.Add(oFoo);
                }
            }
            finally
            {
                m_fSuppressNotifications = false;
                // Raise the event to notify any listeners that the data has changed
                this.OnCollectionChanged(new NotifyCollectionChangedEventArgs(NotifyCollectionChangedAction.Reset))
            }
        }
    } 
```

最后，我们需要覆盖 CollectionChanged 相关的元素并抑制或手动执行相关事件：

```
 public override event NotifyCollectionChangedEventHandler CollectionChanged;

    protected override void OnCollectionChanged(NotifyCollectionChangedEventArgs e)
    {
        // Prevent infinite loop that could occur if handler changes the collection
        using (BlockReentrancy())
        {
            if (!m_fSuppressNotifications)
            {
                // Get the current event
                var oCollectionChangedEvent = this.CollectionChanged;
                if (oCollectionChangedEvent != null)
                {
                    foreach (EventHandler oHandler in oCollectionChangedEvent.GetInvocationList())
                    {
                        // Execute the handler
                        oHandler(this, e);
                    }
                }
            }
        }
    } 
```

最后，我们需要稍微更改 GraphViewModel 内部的实现，以抑制 FooCollection 的序列化并添加一个可序列化的 List<> 属性：

```
public class GraphViewModel
{
    [XmlIgnore]
    public FooCollection Foos { get; set; }

    [XmlArray(ElementName = "Foos")]
    [XmlArrayItem(ElementName = "Foo")]
    public List<Foo> FoosSerializable
    {
        get
        {
            return this.Foos.ToList<Foo>();
        }
        set
        {
            this.Foos.AddRange(value);
        }
    }

} 
```

# kendo-ui - 在 Kendo NumericTextBox 中为百分比添加 % 符号

> ID：14128029
> 
> 赞同：1
> 
> 时间：2013-01-02T19:35:23.180
> 
> 标签：kendo-ui, kendonumerictextbox

尝试将 % 符号添加到 Kendo NumericTextBox 中的数字。他们建议这样转义 % 符号：

```
$("#numeric").kendoNumericTextBox({
    format: "# \%"
}); 
```

但是当我给它一个 3 的值时，它仍然给我 300%！

从剑道文档：

> "%" - 百分比占位符 将一个数字乘以 100 并在结果字符串中插入一个本地化的百分比符号。注意：'%' 符号被解释为格式字符串中的格式说明符。如果您需要防止这种情况发生，您需要在 '%' 符号前加上一个反斜杠 - `'kendo.toString(12, "# \%")'`-> 12 % (en-us)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-05-06T11:55:31.593

我在 .cshtml 文件中的网格列中工作，对我来说，以下工作：

```
 Format("{0:#.## \\'%'}"); 
```

注意 % 符号周围的两个单引号。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-02T23:10:07.123

你看到[这个](http://www.kendoui.com/forums/ui/numeric-textbox/numeric-formats.aspx)论坛帖子了吗？看起来你需要用两个斜线来逃避它......

[http://jsbin.com/aruqeh/1/](http://jsbin.com/aruqeh/1/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-07-17T20:23:45.260

```
$("#numeric").kendoNumericTextBox({
  format: "# \\%"
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-14T16:56:25.813

作为此处其他答案的补充，我想补充一点，如果您使用带有 ASP.NET Razor 视图语法的 Kendo UI，并且您的格式字符串必须从输入标签本身传入，您将需要将 Kendo UI 格式字符串转换为字符串文字，否则 JavaScript 最终会转义您的转义字符。例如，在我现在正在处理的应用程序中，我们有一个自定义数据字段，用于 html 助手用来创建 Kendo NumericTextBox 的格式。

例子：

```
<input data-custformat="##.##\\%" value="12"/> 
```

无法正确呈现格式。输出看起来像 1200\%，因为双反斜杠被转义为单反斜杠，并且该字段保持默认的 Kendo 百分比行为，即将该字段的值乘以 100。

然而，

```
<input data-custformat=@(@"##.##\%") /> 
```

正确格式化数字，并覆盖默认的剑道百分比行为。请注意，在字符串文字中，仅使用了一个反斜杠。

这是一个小众且微妙的问题，但在尝试将 Kendo UI 与 ASP.NET MVC 集成时引起了一些挫败感。

# php - 在 wordpress 循环中显示帖子的类别？

> ID：14128030
> 
> 赞同：3
> 
> 时间：2013-01-02T19:35:29.373
> 
> 标签：php, wordpress

好的，所以我创建了一个 Wordpress 模板，它只显示与“锻炼”类别相关联的帖子。在显示这些的循环中，我希望列出特定帖子的类别。

我在想这样的事情会起作用：

```
$id = get_the_ID();
$cats = wp_get_post_categories($id); 
```

但后来我不知道如何在屏幕上回显这个。任何人都知道如何在循环中显示每个帖子的类别？我看过的所有文章都只展示了如何显示所有类别，而不是显示与特定帖子关联的类别。

这是我的循环：

```
<div class="query">
<b><a href="<?php the_permalink() ?>"><?php the_title(); ?></a></b>
    <?php 
        $id = get_the_ID();
        $cats = wp_get_post_categories($id);
    ?>
</div>
<?php endwhile; ?> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-02T19:40:55.653

获取类别对象：

```
$cats = get_the_category($id); 
```

* * *

只需呼应名称：

```
echo $cats[0]->name; 
```

* * *

如果要输出链接，请使用：

```
<a href="<?php echo get_category_link($cats[0]->cat_ID); ?>">
    <?php echo $cats[0]->name; ?>
</a> 
```

**注意：**代替`wp_get_post_categories($id)`，您可以只使用`get_the_category()`。

* * *

**更新：**如果要显示所有类别，只需循环它们：

```
<?php foreach ( $cats as $cat ): ?>

    <a href="<?php echo get_category_link($cat->cat_ID); ?>">
        <?php echo $cat->name; ?>
    </a>

<?php endforeach; ?> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-11-05T22:34:17.657

谢谢约瑟夫。我已经扩展了您的代码，以便在有多个类别时将“类别”一词更改为“类别”。可能有更好的方法可以做到这一点，但我在任何地方都找不到它:)

```
<p>
    <?php 
    $id = get_the_ID();
    $cats = get_the_category($id);
    echo ( count($cats) == 1  ? 'Category: ' : 'Categories: ');
    $c = 0; $n = 0;
    $c = count($cats);
    foreach ( $cats as $cat ):
        $n++; ?>
        <a href="<?php echo get_category_link($cat->cat_ID); ?>">
            <?php echo $cat->name; echo ( $n > 0 && $n < $c ? ', ' : ''); ?>
        </a>
    <?php endforeach; ?>
</p> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-06-15T14:17:09.983

如果其他人需要帮助，您可以在帖子循环中使用它：

```
<p><?php _e( 'Category: ', 'themename' ); the_category(', '); // Separated by commas ?></p> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-09-27T08:36:16.117

**如果您有自定义 post_type，请获取帖子类别**

```
<?php
$categories = get_the_terms( $post->ID, 'taxonomy' );
// now you can view your category in array:
// using var_dump( $categories );
// or you can take all with foreach:
foreach( $categories as $category ) {
    echo $category->term_id . ', ' . $category->slug . ', ' . $category->name . '<br />';
} ?> 
```

[点击这里查看详细信息](https://developer.wordpress.org/reference/functions/get_the_category/)

# java - 在 3D 应用程序中集成卫星图像或地图

> ID：14128032
> 
> 赞同：1
> 
> 时间：2013-01-02T19:35:35.933
> 
> 标签：java, 3d, gis, google-earth

我正在创建一个 3d 应用程序来表示空域，并且我想以某种方式可视化由纬度/经度框指定的地球区域。

所以我可以对该区域进行 2D 或 3D 可视化，并在我的应用程序中使用它。我不介意它是否只是可以用作可视化中的“背景”的 2d 图像。

我对 3d 编程和这类事情还很陌生。

据我了解，我需要某种 GIS，谷歌地球似乎是理想的或 OSSIM，但我的应用程序是 Java，不是 Web 应用程序，所以我认为我也不能使用？

他们是否有任何替代库可以在 Java 中做类似的事情（使用 Jmonkey 引擎）？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T20:52:52.467

开始查看[NASA WorldWind](http://worldwind.arc.nasa.gov/java/) Java API，它是一个开源、高性能的 3D 虚拟地球 API 和 SDK。

您可以使用 World Wind 框架构建一个基于 Java 的应用程序——它提供了类似于“google-earth”的地图和 API，可以在地图上绘制您想要的任何内容。

您可以浏览示例应用程序库以了解您可以创建什么。 [http://goworldwind.org/demos/](http://goworldwind.org/demos/)

还有[OpenMap](http://openmap.bbn.com/)，但只支持2d。

# c# - HTML表格单元格中的下拉选择，使用selenium webdriver和C#

> ID：14128040
> 
> 赞同：2
> 
> 时间：2013-01-02T19:36:03.150
> 
> 标签：c#, selenium, html-table, webdriver, cell

我的 HTML 表格在第 5 列中有一个单元格，其中包含值“1”、“2”和“3”的下拉菜单；

到目前为止，我可以到达那个单元格：

```
ICollection<IWebElement> table = driver.FindElements(By.Id("highVolumeSearchResults_group"));
List<IWebElement> elements = table.ToList();                
ICollection<IWebElement> cell_action = driver.FindElements(By.XPath(".//tbody/tr/td[5]")); 
```

`Cell_action`- 是一个包含下拉选项/值“1”、“2”、“3”的变量。我不确定如何继续，但我需要能够从下拉菜单中选择任何值。
任何人都可以给我一个提示吗？

它背后的代码：

```
 </table>
      <table id="highVolumeSearchResults_group" class="highVolumeSearchResults">
      <thead>
      <tbody>
        <tr>
         <td class="title letter" rowspan="1">W</td>
         <td>
            <a id="group-name-244" href="/Portal/Workgroup/Details?id=244">WorkGroup_Cats</a>
         </td>
         <td>0</td>
         <td>12/28/2012 4:14:01 PM</td>
         <td>
           <select id="244" onchange="CommitAction(244, this.options[this.selectedIndex].value, this)">
              <option value="">------</option>
              <option value="edit">Edit Users</option>
              <option value="rename">Rename</option>
              <option value="delete">Delete</option>
           </select>
        </td>
      </tr>
 </tbody>
 </table> 
```

问题是 'select id="244" ' 部分 - 是动态生成的，所以我不应该使用 id。我需要想出 DropdownBox 选项，但还不知道怎么做。我也尝试继续：

```
IWebElement cell_action1 = cell_action.First(); and then 
SelectElement DropDownBox_action = 
    new SelectElement(cell_action1.FindElement(
        By.XPath("//select[contains(, 'CommitAction')]"))); 
```

这对我不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T17:09:11.050

使用`SelectElement`它实际上非常简单：

```
var dropdown = driver.FindElement(By.XPath(".//tbody/tr/td[5]/select"));

var selectElement = new SelectElement(dropdown);

selectElement.SelectByValue("rename"); // or another value (ex: edit, delete) 
```

* * *

### 更新

如果要获取属性`<select>`中包含字符串的元素`"CommitAction"`，请`onchange`使用以下 XPath 表达式：`"//select[contains(@onchange, 'CommitAction')]"`

# python - 使用 Python 或 Django 处理收到的电子邮件？

> ID：14128041
> 
> 赞同：5
> 
> 时间：2013-01-02T19:36:07.297
> 
> 标签：python, django

我了解如何通过 Django 发送电子邮件，但我希望用户能够回复电子邮件。如果他们发送（和我收到）的电子邮件包含与某个字符串匹配的消息，我将调用一个函数。

我已经做了一些谷歌搜索，但除了自己制作脚本之外似乎没有好的解决方案。如果有什么可以做到这一点，请纠正我；否则，我可以用什么来开始编写自己的脚本来做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T20:21:41.790

我们通过配置 postfix 在接收到特定域的电子邮件时执行 HTTP 请求来进行 plone 类似的操作。使用 django 也应该很容易做到这一点，因此您只需配置您的服务器并在 django 中编写一个接收电子邮件的视图。

你可以这样做：

1) 设置您的 DNS，以便域的 MX 记录指向您的服务器。

2）配置后缀虚拟别名`/etc/postfix/virtual`：

```
example.com anything
django@example.com django-mail-in 
```

3）和`/etc/aliases`：

```
django-mail-in: "|/usr/local/bin/mta2django.py http://127.0.0.1:8000/mail-inbound" 
```

4)`/usr/local/bin/mta2django.py`由 postscript 调用并将邮件发送到`mail-inbound`django 视图。这`mta2django.py`应该有效：

```
#!/usr/bin/python

import sys, urllib
import os

def post_message(url, recipient, message_txt):
    """ post an email message to the given url
    """

    if not url:
        print "Invalid url."
        print "usage: mta2django.py url <recipient>"
        sys.exit(64)

    data = {'mail': message_txt}
    if recipient and len(recipient) > 0:
        data ['recipient'] = recipient

    try:
        result = urllib.urlopen(url, urllib.urlencode(data)).read()
    except (IOError,EOFError),e:
        print "error: could not connect to server",e
        sys.exit(73)

    try:
        exitcode, errormsg = result.split(':')
        if exitcode != '0':
            print 'Error %s: %s' % (exitcode, errormsg)
            sys.exit(int(exitcode))
    except ValueError:
        print 'Unknown error.'
        sys.exit(69)

    sys.exit(0)

if __name__ == '__main__':
    # This gets called by the MTA when a new message arrives.
    # The mail message file gets passed in on the stdin

    # Get the raw mail
    message_txt = sys.stdin.read()

    url = ''
    if len(sys.argv)>1:
        url = sys.argv[1]

    recipient = ''
    # If mta2django is executed as external command by the MTA, the
    # environment variable ORIGINAL_RECIPIENT contains the entire
    # recipient address, before any address rewriting or aliasing
    recipient = os.environ.get('ORIGINAL_RECIPIENT')

    if len(sys.argv)>2:
        recipient = sys.argv[2]

    post_message(url, recipient, message_txt) 
```

5) 编写一个 django 视图`/mail-inbound`来接收邮件并做你需要它做的事情。在您的请求中：

*   `mail`- 完整的电子邮件信息
*   `recipient`- 原始收件人（当您没有捕获特定电子邮件地址而是整个域/子域时很有用）

`email`您可以使用 python模块解析电子邮件：

```
import email

msg = email.message_from_string(request.get('mail')) 
```

`/etc/postfix/virtual`由于我不是后缀专家，我不确定编辑`/etc/aliases`是否足够。有关详细信息，请参阅 postfix 文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T07:57:54.717

使用邮枪。

您需要为 MailGun 提供一个用于 POST 的 URL，然后您就可以解析电子邮件。

[http://documentation.mailgun.net/quickstart.html#receiving-and-parsing-email](http://documentation.mailgun.net/quickstart.html#receiving-and-parsing-email)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T20:25:10.537

Django 不提供任何电子邮件接收支持。

[如果](http://lamsonproject.org/)你需要比使用`poplib`.

# c# - 过滤 Context.GetTable 使用 BaseClass 虚拟属性

> ID：14128048
> 
> 赞同：1
> 
> 时间：2013-01-02T19:36:22.680
> 
> 标签：c#, generics, linq-to-sql, base-class

我们有一个相当广泛的 LINQ-to-SQL 映射，后端数据库包含大约 150 个表。几乎所有的表都有一个共同的属性，称为`CompanyCode`which 作为跨所有表的一种分区。

我目前正在实现一个验证工具，`context.GetTable<T>`用于检索特定实体类型的记录。我想过滤`CompanyCode`，但一般来说，例如：

```
context.GetTable<T>().Where(t => t.CompanyCode == "1234").ToList(); 
```

因为，我们已经有一个名为的自定义抽象基类`CPSQLEntityBase`，所以我的想法是添加一个自定义虚拟属性`CompanyCode`，该属性将在 LINQ 类中被覆盖，如[**本文所述**](http://blogs.msdn.com/b/dinesh.kulkarni/archive/2007/11/09/linq-to-sql-how-to-2-base-class-for-all-entities.aspx)：

```
public abstract class CPSQLEntityBase
{
    public virtual string CompanyCode { get; set; }
} 
```

我正在使用一个自定义脚本，用于`SqlMetal`动态生成我们的 DataContext 类。所以添加一个命令来查找/替换所有实例是微不足道的`public string CompanyCode`，`public override string CompanyCode`这样它们就会覆盖基类中的虚拟属性。例如，以下是其中一个的样子：

```
public partial class Employee : CPSQLEntityBase, INotifyPropertyChanging, INotifyPropertyChanged
{
    ...
    [global::System.Data.Linq.Mapping.ColumnAttribute(Storage="_CompanyCode", DbType="VarChar(4) NOT NULL", CanBeNull=false, UpdateCheck=UpdateCheck.Never)]
    [global::System.Runtime.Serialization.DataMemberAttribute(Order=124)]
    public override string CompanyCode
    {
        get
        {
            return this._CompanyCode;
        }
        set
        {
            ...
        }
    }

    ...
} 
```

综上所述，我在 LINQPad 中编写了一个小测试脚本，它应该能够`Employee`使用通用方法请求实体，但通过`CompanyCode`. 这是我的示例脚本：

```
void Main()
{
    ...
    Test<Employee>(context);
}

public void Test<T>(MyDataContext context)
    where T : CPSQLEntityBase
{
    var result = context.GetTable<T>().Where(t => t.CompanyCode == "1234").ToList();
} 
```

但是，当我执行上面的代码时，我得到一个异常：

> 类成员 CPSQLEntityBase.CompanyCode 未映射。

自从写了那篇博客文章后，有什么变化吗？我错过了什么？

# asp.net-mvc - 创建电子邮件验证链接的最佳实践？

> ID：14128049
> 
> 赞同：1
> 
> 时间：2013-01-02T19:36:23.300
> 
> 标签：asp.net-mvc

目前我写了一个电子邮件验证码，它发送一个链接，其中用户的 GUID 作为他的验证码。我认为这不安全，所以我想听听您的意见，创建验证码的最佳和最简单的方法是什么？

我认为最简单的方法是创建某种散列并将其放入数据库中，当用户单击他的链接时，它将链接值与我的数据库中的散列进行比较。但是为什么我的数据库中需要一个只使用一次的列呢？那是浪费空间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T19:45:43.627

通常，您会创建一个随机值（Guid 对此很好），它是一个重置密码代码。代码应该过期并且只能使用一次。您不希望有人阅读包含密码重置的旧邮件并能够重置代码（因为使用 UserID Guid 时代码总是相同的）。

在 SO 上查看[基于表单的网站身份验证的权威指南](https://stackoverflow.com/questions/549/the-definitive-guide-to-forms-based-website-authentication)，它有很多有用的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T19:41:34.613

我想说您可以对用户的 GUID（可能使用 SALT）进行简单的[对称加密](http://www.superstarcoders.com/blogs/posts/symmetric-encryption-in-c-sharp.aspx)，然后简单地解密用户的 GUID 作为验证。

# javascript - 复杂的 Javascript 数组 - 对值求和并将值插入表单

> ID：14128050
> 
> 赞同：0
> 
> 时间：2013-01-02T19:36:24.443
> 
> 标签：javascript, arrays, forms, sum

试图适应相当复杂的数组代码。基本上，我想添加输入的总小时数，然后将值返回到输入名称 =“total_hrs”，但卡住了！也将不胜感激任何帮助简化/清理脚本！谢谢。这是脚本：

```
<script language="JavaScript" type="text/javascript">
<!--
function subCalc(the_form) 
{
var subtotal = 0;
var subtemp = 0;
var totalHrs = 0;

// put the calories and form fields into parallel arrays.
var calorie_array = new Array()
calorie_array[0] = 72;
calorie_array[1] = 86;
calorie_array[2] = 100;
calorie_array[3] = 126;
calorie_array[4] = 130;
calorie_array[5] = 180;
calorie_array[6] = 156;
calorie_array[7] = 182;
calorie_array[8] = 210;
calorie_array[9] = 250;
calorie_array[10] = 270;
calorie_array[11] = 390;
calorie_array[12] = 390;
calorie_array[13] = 546;

var time_array = new Array()
time_array[0] = the_form.sleeping_time;
time_array[1] = the_form.TV_time;
time_array[2] = the_form.sit_time;
time_array[3] = the_form.cook_time;
time_array[4] = the_form.stand_time;
time_array[5] = the_form.wash_time;
time_array[6] = the_form.walk_S_time;
time_array[7] = the_form.house_time;
time_array[8] = the_form.walk_M_time;
time_array[9] = the_form.gard_time;
time_array[10] = the_form.danc_time;
time_array[11] = the_form.stairs_time;
time_array[12] = the_form.jog_time;
time_array[13] = the_form.sqsh_time;

var sub_array = new Array()
sub_array[0] = the_form.cal0;
sub_array[1] = the_form.cal1;
sub_array[2] = the_form.cal2;
sub_array[3] = the_form.cal3;
sub_array[4] = the_form.cal4;
sub_array[5] = the_form.cal5;
sub_array[6] = the_form.cal6;
sub_array[7] = the_form.cal7;
sub_array[8] = the_form.cal8;
sub_array[9] = the_form.cal9;
sub_array[10] = the_form.cal10;
sub_array[11] = the_form.cal11;
sub_array[12] = the_form.cal12;
sub_array[13] = the_form.cal13;

for(i = 0; i < calorie_array.length; i++) 
{
// Give subtemp the value or the calorie times the time.
subtemp = (calorie_array[i] * time_array[i].value);

// Put the converted string into the form field.
sub_array[i].value = checkAmount(subtemp);

// Add the converted number value to subtotal.
subtotal += roundFloat(subtemp);

}
for(i = 0; i < time_array.length; i++) 
{
hours = (time_array[i].value);
totalHrs += roundFloat(hours);
} 

return subtotal;
}

function totalCalc() {
var form;
var subtotal;
var total;
var totalHrs;
var hours;

form = document.calc_form;
// get the value of subtotal from totalCalc.
subtotal = subCalc(form);
totalHrs = subCalc(form);

// Add the NUMBER values and subtotal.
total = subtotal;

// Convert this number into a string and display.
form.total.value = checkAmount(total);

// Adds total hours.
hours = totalHrs
form.total_hrs.value = checkAmount(hours);
}

function roundFloat(num) {
num = parseFloat(num);
num = Math.round(100*num)/100

return num
}

function checkAmount(num) {
// Convert into a floating point number.
num = parseFloat(num)
// Round the number off.
num = Math.round(100*num)/100
// Turn into a string.
num = String(num)
// Return the converted string.
return num
}

//-->
</script> 
```

和html：

```
<form name="calc_form" id="form" method="post">
<table width="310" border="0" bgcolor="#EAEAEA">
<tr>
<th width="95"><h2>Activity</h2></th><th width="70"><h2>Time <br>(in hours)</h2></th>
<th width="101"><h2>Calories used per hour</h2></th>
</tr>
<tr class="table-text">
<td class="right"><p class="table-text">Sleeping</p></td>
<td width="70">
<p class="table-text">
<input name="sleeping_time" type="text" id="sleeping_time" size="2" maxlength="2" onchange="subCalc(document.calc_form);" />
hrs</p></td>
<td width="101">
<p class="table-text">
<input name="cal0" type="text" id="cal0" size="6" maxlength="6" />
kcals</p></td>
</tr>
<tr>
<td class="right"><p class="table-text">Eating/Reading/<br>Watching TV</p></td>
<td width="70"><p class="table-text">
<input name="TV_time" type="text" id="TV_time" size="2" maxlength="2" onchange="subCalc(document.calc_form);" />
hrs</p></td>
<td width="101"><p class="table-text">
<input name="cal1" type="text" id="cal1" size="6" maxlength="6" />
</span>kcals</td>
</tr>
<tr>
<td class="right"><p class="table-text">Sitting</p></td>
<td width="70"><p class="table-text">
<input name="sit_time" type="text" id="sit_time" size="2" maxlength="2" onchange="subCalc(document.calc_form);" />
hrs</p></td>
<td width="101"><p class="table-text">
<input name="cal2" type="text" id="cal2" size="6" maxlength="6" />
kcals</p></td>
</tr>
<tr>
<td class="right"><p class="table-text">Cooking</p></td>
<td width="70"><p class="table-text">
<input name="cook_time" type="text" id="cook_time" size="2" maxlength="2" onchange="subCalc(document.calc_form);" />
hrs</p></td>
<td width="101"><p class="table-text">
<input name="cal3" type="text" id="cal3" size="6" maxlength="6" />
kcals</p></td>
</tr>
<tr>
<td class="right"><p class="table-text">Standing</p></td>
<td width="70"><p class="table-text">
<input name="stand_time" type="text" id="stand_time" size="2" maxlength="2" onchange="subCalc(document.calc_form);" />
hrs</p></td>
<td width="101"><p class="table-text">
<input name="cal4" type="text" id="cal4" size="6" maxlength="6" />
kcals</p></td>
</tr>
<tr>
<td class="right"><p class="table-text">Washing &amp; Dressing</p></td>
<td width="70"><p class="table-text">
<input name="wash_time" type="text" id="wash_time" size="2" maxlength="2" onchange="subCalc(document.calc_form);" />
hrs</p></td>
<td width="101"><p class="table-text">
<input name="cal5" type="text" id="cal5" size="6" maxlength="6" />
kcals</p></td>
</tr>
<tr>
<td class="right"><p class="table-text">Walking Slowly</p></td>
<td width="70"><p class="table-text">
<input name="walk_S_time" type="text" id="walk_S_time" size="2" maxlength="2" onchange="subCalc(document.calc_form);" />
hrs</p></td>
<td width="101"><p class="table-text">
<input name="cal6" type="text" id="cal6" size="6" maxlength="6" />
kcals</p></td>
</tr>
<tr>
<td class="right"><p class="table-text">Light housework</p></td>
<td width="70"><p class="table-text">
<input name="house_time" type="text" id="house_time" size="2" maxlength="2" onchange="subCalc(document.calc_form);" />
hrs</p></td>
<td width="101"><p class="table-text">
<input name="cal7" type="text" id="cal7" size="6" maxlength="6" />
kcals</p></td>
</tr>
<tr>
<td class="right"><p class="table-text">Walking moderately</p></td>
<td width="70"><p class="table-text">
<input name="walk_M_time" type="text" id="walk_M_time" size="2" maxlength="2" onchange="subCalc(document.calc_form);" />
hrs</p></td>
<td width="101"><p class="table-text">
<input name="cal8" type="text" id="cal8" size="6" maxlength="6" />
kcals</p></td>
</tr>
<tr>
<td class="right"><p class="table-text">Light gardening</p></td>
<td width="70"><p class="table-text">
<input name="gard_time" type="text" id="gard_time" size="2" maxlength="2" onchange="subCalc(document.calc_form);" />
hrs</p></td>
<td width="101"><p class="table-text">
<input name="cal9" type="text" id="cal9" size="6" maxlength="6" />
kcals</p></td>
</tr>
<tr>
<td class="right"><p class="table-text">Dancing</p></td>
<td width="70"><p class="table-text">
<input name="danc_time" type="text" id="danc_time" size="2" maxlength="2" onchange="subCalc(document.calc_form);" />
hrs</p></td>
<td width="101"><p class="table-text">
<input name="cal10" type="text" id="cal10" size="6" maxlength="6" />
kcals</p></td>
</tr>
<tr>
<td class="right"><p class="table-text">Walking up stairs</p></td>
<td width="70"><p class="table-text">
<input name="stairs_time" type="text" id="stairs_time" size="2" maxlength="2" onchange="subCalc(document.calc_form);" />
hrs</p></td>
<td width="101"><p class="table-text">
<input name="cal11" type="text" id="cal11" size="6" maxlength="6" />
kcals</p></td>
</tr>
<tr>
<td class="right"><p class="table-text">Jogging</p></td>
<td width="70"><p class="table-text">
<input name="jog_time" type="text" id="jog_time" size="2" maxlength="2" onchange="subCalc(document.calc_form);" />
hrs</p></td>
<td width="101"><p class="table-text">
<input name="cal12" type="text" id="cal12" size="6" maxlength="6" />
kcals</p></td>
</tr>
<tr>
<td class="right"><p class="table-text">Squash</p></td>
<td width="70"><p class="table-text">
<input name="sqsh_time" type="text" id="sqsh_time" size="2" maxlength="2" onchange="subCalc(document.calc_form);" />
hrs</p></td>
<td width="101"><p class="table-text">
<input name="cal13" type="text" id="cal13" size="6" maxlength="6" />
kcals</p></td>
</tr>

<tr>
<td><p class="table-text">&nbsp;</p></td>
<td width="70"><p class="table-text"></p></td>
<td width="101"><p class="table-text"></p></td>
</tr>

<tr>
<td><p class="table-text"><strong>Totals = </strong></p></td>
<td width="70"><p class="table-text">
<input name="total_hrs" type="text" id="total_hrs" size="3" />
hrs</p></td>
<td width="101"><p class="table-text">
<input name="total" type="text" id="total" size="6" />
kcals</p></td>
</tr> 

<tr> 
<td colspan="2"><INPUT name="reset" value="Reset" TYPE="reset"> </td>
<td colspan="2"><input name="Calculate Total" type="button" id="Calculate Total" value="Calculate Total" onclick="totalCalc();" /></td>
</tr>
</table>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T20:49:44.533

检查这一行

```
subtotal = subCalc(form);
totalHrs = subCalc(form); 
```

如果您查看 subCalc 函数，它总是返回小计，因此第二行不正确。

您可以将此功能一分为二。一个返回总计，另一个返回小时数。

祝你的项目好运！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T20:32:35.830

我在这里修改了你的代码：http: [//pastebin.com/7L7i7dSk](http://pastebin.com/7L7i7dSk)

请注意，为方便起见，我将您的脚本和 HTML 合并到一个文档中，没有其他原因，您可以根据需要将它们分开。

以下内容已更改：

*   第 68 行。添加了`+`将值强制转换为数字的类型

*   第 72 行。函数`subCalc`现在返回一个数组，如下所示：

    `return [subtemp, subtotal, totalHrs]`

    （我不知道你是否真的打算使用 subtemp，但我已经包含了它。）

*   `totals`第 81 行，声明了一个名为的新数组

*   第 85 行，新数组填充了返回值 `subCalc`

*   第 89-90 行。`subtotal`并被`totalHrs`赋予各自的价值。（据我所知，这是您原始代码中的问题，它们都被赋予了相同的值；总卡路里）。

# php - 在 $_GET 中传递变量，我有额外的 %% 符号......我如何摆脱它们？

> ID：14128052
> 
> 赞同：-3
> 
> 时间：2013-01-02T19:36:31.520
> 
> 标签：php, get

这是我的数组：

```
<?php echo "<td><a href='" . matry::base_to('test/trace', array('patient_id' => $patient->id,'cellphone' => $patient->cellnumber)) . "'><ul class='controls'>
                <li id='check_orders'><span class='symbols'>L</span><span class='label'>Skip Trace</span></li>
                </ul></a></td>";?> 
```

我应该使用：

```
$url = urldecode($url); 
```

如果是这样，我如何在数组中使用它？

```
index.php?q=test/trace&patient_id=ADSMAN+S01&cellphone=%28444%29444-4444

$_GET['CELLNUMBER'] = $patient->cellnumber; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T20:25:09.650

一个技巧是使用 Replace 函数来摆脱 %% ，以下是你如何做到的：

1）从您的查询字符串中获取您的变量，即`cellphone`从上述问题的示例中：

```
$myvar = $_GET['cellphone']; 
```

`%`2）现在通过使用`str_replace`函数摆脱

```
$search = "%";
$replace = "";
$subject = $myvar;

echo str_replace( $search, $replace, $subject ); 
```

注意：$subject 可以是变量或数组

我希望它能解决你的问题。

# ruby-on-rails - 为什么我在使用 CanCan 时出现名称错误

> ID：14128054
> 
> 赞同：4
> 
> 时间：2013-01-02T19:36:36.907
> 
> 标签：ruby-on-rails, ruby-on-rails-3, cancan

首先，我在 [http://example--site.com/shop/walmart/order/1](http://example--site.com/shop/walmart/order/1)
登录 如果我按下由这样的代码创建的编辑按钮。

```
 <%= link_to t('.edit', :default => t("helpers.links.edit")),
              edit_community_order_path(@community, @order), :class => 'btn' %> 
```

它返回此错误。为什么？

**日志错误（名称错误！）**

```
Started GET "/shop/walmart/order/1/edit"Processing by OrdersController#edit as HTML
  Parameters: {"community_id"=>"walmart", "id"=>"1"}
  [1m[36mCommunity Load (0.5ms)[0m  [1mSELECT `communities`.* FROM `communities` WHERE `communities`.`community_name` = 'walmart' AND (`communities`.`deleted_at` IS NULL) LIMIT 1[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 AND (`users`.`deleted_at` IS NULL) LIMIT 1
Completed 500 Internal Server Error in 74ms

NameError (uninitialized constant Ability::Order):
  app/models/ability.rb:26:in `initialize'
  app/controllers/application_controller.rb:21:in `new'
  app/controllers/application_controller.rb:21:in `current_ability' 
```

这是我的代码。

**app/models/ability.rb:26:in `initialize'**

```
 if user
        can :read, :all 
        can [:create, :destroy], Comment, {:user_id => user.id}
        can [:create, :update], Community, {:user_id => user.id}
26>     can [:create, :update], Order, {:user_id => user.id}
        can [:create, :update], CommunityTopic, {:user_id => user.id}
    else
        can :read, :all

    end 
```

**app/controllers/application_controller.rb:21:in `new' app/controllers/application_controller.rb:21:in`current_ability'**

```
 #CanCan
    private 
    def current_ability 
21>     @current_ability ||= Ability.new(current_user) 
    end 
```

**路线.rb**

```
resources :communities, :path => "shop", do
    resources :orders, :path => "order"
end 
```

**订单控制器.rb**

```
load_and_authorize_resource :community, :find_by => :community_name
load_and_authorize_resource :through => :community, :shallow => true
…..
  # GET /orders/1/edit
  def edit
  end 
```

更新：

**模型/订单.rb**

```
class Order < ActiveRecord::Base

  attr_accessible :deleted_at, :code, :community_id, :greeting, :user_id, :visible
  belongs_to :user
  belongs_to :community

  acts_as_paranoid

end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T20:28:44.477

```
# is there a models/order.rb?
class Order
end 
```

# html - 设计缺陷？一页网站，加载内容的选项卡

> ID：14128060
> 
> 赞同：0
> 
> 时间：2013-01-02T19:37:12.337
> 
> 标签：html, ajax, web-applications

我有一个带有许多选项卡的简单 Web 应用程序。当用户单击选项卡时，使用 AJAX 加载选项卡内容。但是，它需要`< 1s`加载一些选项卡，因此从用户的角度来看，一开始没有内容（只是将通过 AJAX 填充的空输入）

```
$('#my-tab').on('click', function() {
   // load content
});

$('#another-tab').on('click', function() {
   // load some different content
}); 
```

为了解决这个问题，我可以：

1) 使用一些 AJAX 微调器通知用户有内容但即将加载

2) 改用 HTML 表单，以便在没有 AJAX 的情况下加载内容

什么是正确/最佳/常见的解决方案？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T19:51:27.077

这是一篇[很好的文章](http://www.nngroup.com/articles/response-times-3-important-limits/)，总结了您的要求。

> 在优化 Web 和应用程序性能时，需要牢记 3 个主要时间限制（由人类感知能力决定）。

根据为普通用户加载内容所需的大致时间，您可以应用此做法：

> 0.1 秒大约是让用户感觉到系统在瞬间做出反应的极限，这意味着除了显示结果之外不需要特殊的反馈。
> 
> 1.0 秒大约是用户思维流保持不间断的极限，即使用户会注意到延迟。正常情况下，在大于 0.1 秒小于 1.0 秒的延迟期间不需要特殊的反馈，但用户确实会失去直接对数据进行操作的感觉。
> 
> 10 秒大约是让用户的注意力集中在对话上的极限。对于更长的延迟，用户将希望在等待计算机完成时执行其他任务，因此应向他们提供反馈，指示计算机何时完成。如果响应时间可能变化很大，则延迟期间的反馈尤其重要，因为用户将不知道会发生什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T19:44:15.950

使用微调器。始终向用户显示有关操作的一些反馈。即使他需要等待，他也想知道。如果您不显示任何内容，则用户认为他或网站有问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T19:49:39.813

我更喜欢微调器，但缺点是由于 AJAX，用户将无法为选定的选项卡添加书签。如果您不使用 AJAX，而是使用提交的表单（通过 GET）或只是简单的链接，那么它可以被正确地添加书签。

# android - 将不在“jni”目录中的 C++ 源文件添加到 Eclipse android 项目

> ID：14128063
> 
> 赞同：1
> 
> 时间：2013-01-02T19:37:26.507
> 
> 标签：android, eclipse, android-ndk, adt, eclipse-cdt

我有一个带有 java 和本机代码的 android 项目。一切正常，直到今天我只是使用 eclipse 来编辑和构建 java 应用程序，从命令行使用 ndk-build 和 ndk-gdb，并在 eclipse 之外管理/编辑 c++ 源代码。

现在我安装了 adt ndk 插件，并且我可以在 eclipse 中正确构建我的原生库，我正在考虑一种将 c++ 源代码添加到 android 项目的方法，以便我可以浏览它们、执行搜索和代码完成蚀。我有很多不在 android 项目的 jni 目录中的源，我无法移动它们。

然后我在项目属性中看到 - 在“C/C++ General -> Paths and Symbols”下 - 一个“包含”选项卡列出了包含目录（我猜它们是从 android.mk 中提取的），并在“源位置选项卡”中我添加了一个指向“外部”源目录的链接，将其命名为 NativeSrc。我确实可以在项目导航器中浏览源代码，但是当我打开它们时，它们似乎充满了“无法解析字段 XXX”之类的错误。

我认为我还缺少其他东西，也许很明显，但我看不到。或者也许我的方法是完全错误的。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T19:29:50.513

哦，好吧，我明白了。我必须右键单击导航器中的项目并选择

```
Index -> Rebuild 
```

在上下文菜单中，然后等待一段时间，然后从同一菜单中选择

```
Index -> Freshen All Files 
```

# twitter-bootstrap - Twitter Bootstrap html 模板

> ID：14128066
> 
> 赞同：0
> 
> 时间：2013-01-02T19:37:34.097
> 
> 标签：twitter-bootstrap

我想为我的网站使用下面链接中的 twitter 引导模板之一，但我不知道如何获取代码。这是链接： [HTML模板](http://twitter.github.com/bootstrap/getting-started.html#html-template)

有没有办法使用这些模板？

我会很感激你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T19:54:05.107

看看以下内容：[http ://webdesign.tutsplus.com/tutorials/complete-websites/twitter-bootstrap-101-introduction/](http://webdesign.tutsplus.com/tutorials/complete-websites/twitter-bootstrap-101-introduction/)

希望这可以帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T19:54:50.797

您可以在 github 上找到最新示例的来源：

[https://github.com/twitter/bootstrap/tree/master/docs/examples](https://github.com/twitter/bootstrap/tree/master/docs/examples)

或浏览标签的任何版本：

[https://github.com/twitter/bootstrap/tags](https://github.com/twitter/bootstrap/tags)

# android - SharedPreferences 读取旧值

> ID：14128080
> 
> 赞同：11
> 
> 时间：2013-01-02T19:38:32.463
> 
> 标签：android, sharedpreferences

我使用 SharedPreferences 在我的应用程序的不同活动中写入和稍后读取值。它过去可以正常工作，但最近它似乎没有被sincronized。我的意思是，我写了一个值，但其他活动仍然读取旧值。有时它可以正常工作。任何的想法？

编辑：这是一个示例代码：

首先，从一个线程：

```
SharedPreferences prefs = getSharedPreferences("MyPrefs", Context.MODE_PRIVATE);
SharedPreferences.Editor editor = prefs.edit();
editor.putInt("ComandToDo", value);
editor.commit();
... some code later:
alarmmanager.set(AlarmManager.RTC_WAKEUP, Miliseconds, sender); 
```

在警报接收器中：

```
SharedPreferences prefs = contexto.getSharedPreferences("MyPrefs", Context.MODE_PRIVATE);
int value = prefs.getInt("ComandToDo", -1); 
```

问题来了，因为“值”不是线程中写入的值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-04-14T06:22:18.993

这是我遇到的以及我为解决它所做的事情。

我正在从 Activity 触发警报，并且在该警报的 Broadcast-Receiver 中，我正在更新每次启动应用程序时都会读取的 Shared-Preferences。

触发警报后，无论何时启动应用程序，它都会获取仅从该活动设置的旧值。没有反映广播接收器的更改。

这里的技巧是将 Shared-Preferences 设置为**MODE_MULTI_PROCESS**

一般我们使用 MODE_PRIVATE，但做如下：

```
SharedPreferences prefs = this.getSharedPreferences("Preferences", MODE_MULTI_PROCESS); 
```

注意：在代码中更改模式后，建议清除应用程序的数据，以避免调试时出现问题。

编辑：MODE_MULTI_PROCESS 需要最小 API 11

在 API 11 之前，我能想到的解决方法是创建一个包含 2 列 KEY 和 VALUE 的数据库。这可以从其他模块访问。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T21:22:24.863

1.  SharedPreferences 被记录为不能跨进程工作， http: [//developer.android.com/reference/android/content/SharedPreferences.html](http://developer.android.com/reference/android/content/SharedPreferences.html)，“注意：目前这个类不支持跨多个进程使用。这将在以后添加。”

2.  此答案建议将数据封装到内容提供程序中，并且讨论还考虑了一些其他选项，包括共享 SQLite：[https ://stackoverflow.com/a/5265556/1665128](https://stackoverflow.com/a/5265556/1665128)

3.  您在文件系统中也有普通的旧文件。我们在几个项目中使用了它们，带有锁定，没有任何问题。也可能是您的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T22:55:54.413

您正在写入“MyPrefs”首选项文件，然后尝试从“PerfilDeSonidoPreferencias”文件中读取。请从同一个首选项文件中读/写。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-10T08:11:52.407

只需使用**IntentService**代替 BroadcastReceiver。这对我有用。

服务类：

```
public class ServiceClass extends IntentService {

    public NotificationPopupService(String name) {
        super(name);
    }

    public NotificationPopupService(){
        super("YOU_DEFAULT_NAME");
    }

    @Override
    protected void onHandleIntent(Intent intent) {
        SharedPreferences sp = PreferenceManager.getDefaultSharedPreferences(getApplicationContext());

        do magic...
    }
} 
```

在应用程序标记中的 AndroidManifest.xml 文件中：

```
<service android:name="ServiceClass"/> 
```

创建警报：

```
intent = new Intent(context, ServiceClass.class);
pendingIntent = PendingIntent.getService(context, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);
// magic after 2 seconds after the creation of alarm
alarmManager.set(AlarmManager.RTC_WAKEUP, System.currentTimeMillis() + 2000, pendingIntent); 
```

# javascript - 轨迹球控件行为异常

> ID：14128082
> 
> 赞同：2
> 
> 时间：2013-01-02T19:38:34.917
> 
> 标签：javascript, controls, three.js, webgl, trackball

所以我一直在使用轨迹球控件，最近我发现我敢说一个奇怪的错误。如果您平移然后缩小新位置，控件会开始非常奇怪地动作，拉动原点的方向（平移越大，问题越严重）。

我整理了一个演示这个问题的[小提琴。](http://jsfiddle.net/z52dP/ "拨弄我的木材")只需平移远离球（右键单击 + 鼠标移动）。然后缩小。

我不是 100% 确定这不是我的错，但我觉得这个例子非常简单和万无一失。

以下是我启用的一些设置：

```
var controls = new THREE.TrackballControls(this.camera, this.renderer.domElement);
var radius = 14;// scalar value used to determine relative zoom distances
controls.rotateSpeed = 1;
controls.zoomSpeed = 1.2;
controls.panSpeed = 1;

controls.noZoom = false;
controls.noPan = false;

controls.staticMoving = false;
controls.dynamicDampingFactor = 0.3;

controls.minDistance = radius * 1.1;
controls.maxDistance = radius * 25;

controls.keys = [ 65, 83, 68 ]; // [ rotateKey, zoomKey, panKey ] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T20:14:27.497

1.  轨迹球控件是示例的一部分，而不是库，因此您可以随意破解它。

2.  我认为正在发生的事情是“平移后缩小”工作正常，直到您达到最大距离 - 然后相机“滑动”。

3.  您可以在这个更新的小提琴中更清楚地看到这一点，它显示了内部和外部球体：http: [//jsfiddle.net/z52dP/1/](http://jsfiddle.net/z52dP/1/)

4.  如果您认为可以改进代码，请在 three.js github 站点上提出建议。

三.js r.54

```
. 
```

# c - Linux semaphore_init：函数“semaphore_init”的错误隐式声明

> ID：14128084
> 
> 赞同：1
> 
> 时间：2013-01-02T19:38:42.093
> 
> 标签：c, linux-kernel, linux-device-driver

我最近将 Ubuntu 从 10.04 更新到 12.04，这将 linux 内核从 2.6.35-30-server 更改为 3.0.0-29-server。更新后，我目前在编译驱动程序代码时遇到错误。

> 错误：函数 'semaphore_init' [-Werror=implicit-function-declaration] 的隐式声明。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T19:43:27.937

除非`semaphore_init`是您自己制作的功能，否则我认为您会想要`sema_init`。

# php - Zend Framework 2 模块在控制器 onBootstrap 之间共享变量

> ID：14128085
> 
> 赞同：5
> 
> 时间：2013-01-02T19:38:44.613
> 
> 标签：php, zend-framework2

是否可以在 Module.php 中创建变量甚至共享对象（如 DB 适配器）以用于所有视图控制器？（Zend 框架 2）

例如：

```
class Module 
{
    public function onBootstrap(MvcEvent $e)
    {

        $moduleConfig = $e->getServiceManager()->get('Config')
    }
} 
```

在控制器中，以某种方式访问​​使用：

```
$this->moduleConfig['db'] 
```

在上面，我知道这只是 db 适配器的配置数组，但它是如何工作的呢？

我看到可以在控制器操作中执行此操作：

```
$config = $this->getServiceLocator()->get('Config')
$dba = new DbAdapter($config['db']); 
```

我不想在我需要配置的每个地方都这样做。我怎样才能使它像： $this->config ？因此它可用于所有操作。更好的是，如何在整个模块中做到这一点？我知道这一切都错了，但在 ZF1 中，我们使用 Zend_Registry::get() 来处理类似这样的简单事情。我正在阅读文档和各种各样的 tuts，但总是有一些假设，我只是迷路了。所以我真正想要的是：A）全局可访问的配置项，B）全局可访问的数据库适配器

我只想在我的控制器中调用 $this->db 或 $this->config->item。这可能吗？我知道我错过了一些完全简单的东西。

我也尝试使用 $this->getServiceLocator()->get('Config'); 在我的 __construct 中设置 $this->config 但我知道在构建期间服务定位器尚不可用。我尝试通过在模块的 onBootstrap 中设置 preDispatch 来做类似的事情，但我似乎无法将这些项目放入我的控制器中。

仅供参考，我的 global.php 中确实有这个（不，它不会留在那里，只是示例）：

```
'db' => array(
        'driver' => 'Pdo',
        'dsn'   => 'mysql:dbname=mydb;host=localhost;',
        'username' => 'root',
        'password' => '',
        'driver_options' => array(
            PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES \'UTF8\''
        ),

    ), 
```

我可以使用 getServiceLocator() 在任何操作中访问该项目和其他项目。我希望这些项目可以作为我的控制器属性在 $this->config->item 中使用。

我很感激任何指导！谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-03T19:34:06.483

好的...多部分答案。

## 1.添加配置变量，站点范围。（以及如何在控制器中访问）

这很容易，一旦我看到它起作用。但取决于下面的 preDispatch。在您的应用程序根目录中，将文件放入 config/autoload. 调用它：things.config.local.php

在这个文件中，我们只返回一个带有配置项的数组。

```
<?php
return array(
    'things' => array(
        'avalue' => 'avalue1',
        'boolvalue' => true,
        ),

); 
```

所以我想在我的控制器中访问它。假设您在控制器中创建了一个配置属性，您可以通过这种方式访问​​它。（您在下面的 preDispatch 中设置该属性以使其工作）在我的系统中，我希望像这样检索该值：

```
$this->config['things']['boolvalue']; 
```

但是，您可以通过如下操作调用它：

```
$config = $this->getServiceLocator()->get('Config');
echo $config['things']['boolvalue']; 
```

这实际上很容易。不知道如何使用 ini 文件来做到这一点，但在我的情况下，它不需要，而且我的 ini 文件直接移动到数组中并不是什么大问题。问题1为我解决了！

## 2.如何在控制器中获取preDispatch（因为__construct不会加载配置）

我的另一个问题是我可以在全局级别访问某些对象和/或值，并在初始化控制器和操作时加载它们。据我了解，无法在控制器的 __construct 中访问服务管理器配置。

```
$this->getServiceLocator()->get('Config'); 
```

以上是行不通的。我相信因为在控制器类的构造过程中 ServiceManager 还不可用。说得通。

不过，还有几个额外的步骤，我可以让 preDispatch 工作，类似于 ZF1。 *然后*配置的东西工作。以及访问全局对象，如数据库。

在控制器中添加以下方法：

```
protected function attachDefaultListeners()
{
    parent::attachDefaultListeners();
    $events = $this->getEventManager();
    $this->events->attach('dispatch', array($this, 'preDispatch'), 100);
    $this->events->attach('dispatch', array($this, 'postDispatch'), -100);
} 
```

然后添加 pre 和 post 方法。

```
public function preDispatch (MvcEvent $e)
{
    // this is a db convenience class I setup in global.php
    // under the service_manager factories (will show below)
    $this->db = $this->getServiceLocator()->get('FBDb');
    // this is just standard config loaded from ServiceManager
    // set your property in your class for $config  (protected $config;)
    // then have access in entire controller
    $this->config = $this->getServiceLocator()->get('Config');
    // this comes from the things.config.local.php file
    echo "things boolvalue: " . $this->config['things']['boolvalue'];
}

public function postDispatch (MvcEvent $e)
{
    // Called after actions
} 
```

问题2解决了！初始化控制器。

## 3.如何使用上面的ServiceManager来加载一个DB对象供Controller使用

好的，我想要的最后一件事是全局访问我的数据库。我希望它在控制器范围内，所以我可以在任何地方调用 $this->db->fetchAll。

在 global.php 中首先设置服务管理器。
另外，请记住，我不会像在我的 global.php 文件中那样完全保留它。但它现在有效。将这些数组添加到 global.php 中的返回数组中：

```
'db' => array(
    'driver' => 'Pdo',
    'dsn'   => 'mysql:dbname=mydb;host=localhost;',
    'username' => 'root',
    'password' => '',
    'driver_options' => array(
        PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES \'UTF8\''
    ),

),
'service_manager' => array(
    'factories' => array(
        'Zend\Db\Adapter\Adapter'
                => 'Zend\Db\Adapter\AdapterServiceFactory',
        'db-adapter' => function($sm) {
                $config = $sm->get('config');
                $config = $config['db'];
                $dbAdapter = new Zend\Db\Adapter\Adapter($config);
                return $dbAdapter;
             },
        'FBDb'  => function($sm) {
                $dba= $sm->get('db-adapter');
                $db = new FBDb\Db($dba);
                return $db;
             },

    ),
), 
```

在上面，我设置了 db 配置，然后 service_manager 有一些工厂，这些工厂在应用程序的其余部分需要时可用。就我而言，我想要一些方便以向后兼容我的一些旧 ZF1 代码，所以我添加了一个名为 FBDb 的自定义模块。我发现了 Fabrizio Balliano 的一个很棒的 wrapper/bridge-to-zf1-style-db 类，叫做 ZFBridge。非常适合我的需求，您可以在这里找到： [https ://github.com/fballiano/zfbridge](https://github.com/fballiano/zfbridge)

我接受了它，对其进行了一些修改，然后制作了一个模块。所以 FBDb 对象在我的控制器中作为我的数据库连接可用。如果我想在其他地方使用它，则与“db-adapter”相同。

无论如何，在我的控制器中，我设置了“受保护的 $db;” 在课程开始时，我可以使用该属性。然后如上面的#2 所示，我有 preDispatch 将 FBDb 数据库对象分配给 $this->db。

```
$this->db = $this->getServiceLocator()->get('FBDb'); 
```

然后在我的操作方法中，如果需要，我可以使用以下命令调用记录集或数据库值：

```
$sql = 'select * from customer where cust_nbr between ? and ?';
$rs = $this->db->fetchResults($sql, array('120400', '125250')); 
```

或者，对于返回的数组：

```
$rs = $this->db->fetchAll($sql, array('120400', '125250')); 
```

（我将 fetchResults 添加到 ZFBridge 以仅从 db 查询中返回 PDO\Results 对象，以便稍后在 foreach 中使用。）

我知道其中一些可能是糟糕的设计或“糟糕的 OOP”，但它对我有用，我喜欢它。我个人不喜欢使用纯基于对象的数据实体来处理所有事情，只是一些事情。很多时候，我只想放入一个结果集并完成它。:)

问题解决了。目前。如果你习惯了 ZF1，现在让 ZF2 变得更加友好。

# .net - x64 中的编组错误

> ID：14128093
> 
> 赞同：1
> 
> 时间：2013-01-02T19:39:20.690
> 
> 标签：.net, 64-bit, marshalling

尝试从托管代码调用 DeviceIoControl 函数。有几个这样定义的结构：

```
[StructLayout(LayoutKind.Explicit)]
public struct PARTITION_INFORMATION_UNION
{
    [FieldOffset(0)]
    public PARTITION_INFORMATION_MBR Mbr;
    [FieldOffset(0)]
    public PARTITION_INFORMATION_GPT Gpt;
}

[StructLayout(LayoutKind.Sequential)]
public struct PARTITION_INFORMATION_MBR
{
    public byte PartitionType;
    public bool BootIndicator;
    public bool RecognizedPartition;
    public UInt32 HiddenSectors;
}

[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Unicode)]
public struct PARTITION_INFORMATION_GPT
{
    public Guid PartitionType;
    public Guid PartitionId;
    [MarshalAs(UnmanagedType.U8)]
    public UInt64 Attributes;
    [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 36)]
    public String Name;
} 
```

如果我在 x86 中构建我的应用程序可以正常工作，但如果为 x64 构建应用程序并显示以下错误消息，则会在运行时失败：

> 未处理的异常：System.TypeLoadException：无法从程序集“Test，Version=1.0.0.0，Culture=neutral，PublicKeyToken=null”加载类型 PARTITION_INFORMATION_UNION，因为它包含偏移量 0 处的对象字段，该对象字段不正确地对齐或重叠-对象字段。

知道我在做什么错吗？

**更新**：据我了解，问题在于 PARTITION_INFORMATION_GPT 中定义的最后一个字符串。如果我用 9 个 8 字节的数字替换它，或者简单地注释掉并将硬编码的大小放入结构属性中 - 一切正常。

# html - 在 div 元素中呈现 XML 内容

> ID：14128098
> 
> 赞同：3
> 
> 时间：2013-01-02T19:40:03.290
> 
> 标签：html, css, xml

我有一个表示餐厅菜单的 XML 文件，我想在 HTML 文件的 div 元素中呈现它的内容。我必须只使用 HTML5 和 CSS3。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T19:50:31.450

### 试试这个：

```
<embed src="file.xml" /> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T20:08:43.060

扩展 Praveen 的答案（主要是为了提供更完整的代码示例），实际上可以使用以下咒语显示 XML 内容并使用 CSS 对其进行样式设置：

### `foo.html`

```
<head>
    <title>test</title>
</head>

<body>
    <object data="foo.xml" />
</body>

</html> 
```

### `foo.xml`

```
<?xml-stylesheet type="text/css" href="foo.css"?>
<foo>
    abc
    <bar>def</bar>
    ghi
</foo> 
```

### `foo.css`

```
bar {
    color: red;
} 
```

您可能不得不忍受这种不适用于所有浏览器的情况，因为我知道没有标准方法可以在不使用编程语言的情况下从 HTML 中转入 XML 文档。（尽管上述方法适用于 FF、Chrome 和 IE。）

也就是说，除非将 XML 复制粘贴到 HTML 文档的正文中。（严格来说，这在技术上不包括 XML，而是一堆“无效”的 HTML 标签，恰好看起来很像 XML。这是可能的，因为为了向前兼容，HTML 明确允许未知标签，从 HTML5 开始为了与 XHTML 兼容，允许一些 XMLisms，如自封闭标签。）即以下是完全合法的，并且应该与上面的示例相同，尽管它仍然让我隐约感到不舒服：

### `foo2.html`

```
<html>

<head>
    <title>test</title>
    <style type="text/css">
    bar {
        color: red;
    }
    </style>
</head>

<body>
    <!-- Contents of foo.xml go here -->
    <foo>
        abc
        <bar>def</bar>
        ghi
    </foo>
</body>

</html> 
```

也就是说，这两种方式在 IMO 上都没有使用 XSLT 愚蠢，因为实际上可以弄清楚发生了什么。

# android - 如何从 XML 中创建的 SupportMapFragment 获取 GoogleMap 对象？API 8 级

> ID：14128099
> 
> 赞同：1
> 
> 时间：2013-01-02T19:40:08.917
> 
> 标签：android, android-layout, fragment

我正在尝试`GoogleMap`从对象中获取`SupportMapFragment`对象。因为我也希望在 API 级别 8 上进行这项工作，所以像这样的解决方案`findFragmentById`对我不起作用..

我有这个 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
   xmlns:tools="http://schemas.android.com/tools"
   android:layout_width="match_parent"
   android:background="#fff"
   android:id="@+id/map_view"
   android:layout_height="match_parent" >
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
   xmlns:map="http://schemas.android.com/apk/res-auto"
      android:id="@+id/map"
      android:layout_width="match_parent"
      android:layout_height="match_parent"
      android:name="com.google.android.gms.maps.SupportMapFragment"
      map:cameraZoom="11"
      map:cameraTargetLat="32.1275701"
      map:cameraTargetLng="34.7983432"
      map:uiZoomControls="false"/>

   <ImageView
        android:id="@+id/button_image"
        android:layout_width="match_parent"
        android:layout_height="50dp"
        android:gravity="bottom"    
        android:contentDescription="@string/back"    
        android:layout_alignParentBottom="true"
        android:clickable="true"
        android:onClick="returnToMain"
        android:background="@drawable/return_button" />
    </RelativeLayout> 
```

**更新：**

Java 代码：

```
public void category(View v){
    if(isNetworkAvailable()){
        if(viewMap==null){
            setContentView(R.layout.map_view);
            viewMap=(RelativeLayout)findViewById(R.id.map_view);
            Fragment ssmf=getFragmentManager().findFragmentById(R.id.map);
            mapObject=((SupportMapFragment) getFragmentManager().findFragmentById(R.id.map)).getMap();
            mapObject.addMarker(new MarkerOptions()
            .position(new LatLng(32.1275701, 34.7983432))
            .title("Hello world"));
        }
        else{
            setContentView(viewMap);
        }
    }
} 
```

我收到了这个错误：

无法将表单`Fragment`转换为`SupportMapFragment`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T11:21:42.320

使用 SupportFragment 时使用 getSupportFragmentManager()。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T19:54:53.130

> 因为我也希望在 API 级别 8 上进行这项工作，所以 findFragmentById 之类的解决方案对我不起作用。

是的，它会。从你的`FragmentActivity`, 在你对上面的布局进行膨胀之后，调用`findFragmentById(R.id.map)`，将结果转换为 a `SupportMapFragment`，然后调用`getMap()`它来检索你的`GoogleMap`对象。

# java - RESTful 畅玩！2.0 框架

> ID：14128103
> 
> 赞同：2
> 
> 时间：2013-01-02T19:40:21.370
> 
> 标签：java, rest, playframework-2.0

不久前的这篇文章： [RESTful on Play！框架](https://stackoverflow.com/questions/4379485/restful-on-play-framework) 说明了一种非常优雅的在 Play 上设计 RESTful Web 服务的方法！1.x 与 Java。

我正在与 Play 合作！v2 并且想知道将这种方法迁移到新版本有多么容易。马上我看到渲染方法不再存在，所以我想知道框架中的任何主要架构更改是否会阻止使用此过程。

这篇文章： [Play 2.0 RESTful request post-processing](https://stackoverflow.com/questions/11065487/play-2-0-restful-request-post-processing) 说明了一些基于 2.0 的处理，但它是在 Scala 中完成的，我正在花时间解析它

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T19:44:46.510

Play 2.0 中的整个过程将非常相似，唯一的*细微*差别在于语法，请查看文档。

`routes`

```
# REST actions
GET     /user/:id    controllers.Rest.user(id: Int)
POST    /user        controllers.Rest.createUser
PUT     /user/:id    controllers.Rest.updateUser(id: Int)
DELETE  /user/:id    controllers.Rest.deleteUser(id: Int) 
```

编辑：

当然，您可以使用`Accept`标头代替`format`参数，但是参数只是...更易于设置。你也可以使用ie。`user.scala.xml`视图的名称，并在控制器中使用：`return ok(views.xml.user.render(user).body());`

我在 GitHub 上发布了该示例并进行了一些修复，因此您可以自己尝试：[play-simple-rest](https://github.com/biesior/play-simple-rest)

请注意，您需要保留`Rest.java`控制器（及其路由），而应用程序中的所有内容仅用于显示和演示（即在控制器中进行 GET/POST/PUT/DELETE 调用）。

# objective-c - 按下输入时自定义 UITextView 调整大小

> ID：14128105
> 
> 赞同：0
> 
> 时间：2013-01-02T19:40:24.310
> 
> 标签：objective-c, ios, uitableview, resize, uitextview

我有一个 UIViewController，里面有一个自定义 UITextView（CodeTextView），在这个文本视图的左边我有一个自定义 UITableView（LinesTableView）。LinesTableView 包含与 CodeTextView 对齐的行号。

当我开始编辑 CodeTextView 并出现键盘时，我编辑了两个视图的大小：

```
- (void)keyboardAppears:(NSNotification *)notification
{
    [_codeTextView setFrame:CGRectMake(30, 0, 290, self.view.frame.size.height - 216.0f)];
    [_linesTableView setFrame:CGRectMake(0, 0, 30, self.view.frame.size.height - 216.0f)];
} 
```

编辑 CodeTextView 并按下按钮时，我会更新 LinesTableView：

```
- (void)updateLines
{
    NSString *plainText = self.text;
    NSArray *components = [plainText componentsSeparatedByString:@"\n"];
    int lines = components.count;
    if([[components lastObject] isEqualToString:@""]) lines--;
    _linesTableView.lines = lines;
    [_linesTableView reloadData];
} 
```

但是，当显示键盘并按 Enter 键时，CodeTextView 会调整为原始高度！当我注释掉 [_linesTableView reloadData] 时，一切正常。因此，当我重新加载 LinesTableView 时，LinesTableView 和 CodeTextView 以某种方式恢复了它们的原始高度。

我不知道如何解决这个问题。我认为这并不难，但我想不出办法做到这一点。谁能帮我解决这个问题？

提前致谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T19:47:10.443

快速而肮脏的方法是将这两个东西放在包装它们的 UIView 中，这样您就可以调整 UIView 的大小并使其剪辑它的内容，而不是调整实际表格的大小。这样，当重新加载数据时，即使视图再次放大，它也会保持裁剪状态。在我看来，如果您使用 UIScrollView 并将 2 个非滚动组件放入其中，它会更好看。这样，键盘占据的位置就不会那么破坏体验。

# php - PHP - 将变量从文件加载到 php 变量

> ID：14128106
> 
> 赞同：0
> 
> 时间：2013-01-02T19:40:25.853
> 
> 标签：php, parsing

我想将变量从文本文件导入 PHP 变量：我的 txt 文件如下所示：

```
var1=80
var2=130
var3=250 
```

我想将它们作为变量加载到 php 中，如下所示：

```
<?php
$var1=80;
$var2=130;
$var3=250;
?> 
```

我试过explode("=", $file); 但那会打印

```
Array ( [0] => var1 [1] => 80 var2 [2] => 130 var3 [3] => 250 ) 
```

编辑：我想要这样的输出：

```
Array ( [var1] => 80 [var2] => 130 [var3] => 250 ) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T19:44:06.810

```
$vars = parse_ini_file('filename');
extract($vars); 
```

虽然我会通过省略`extract()`部分将它们保持在数组中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T19:44:21.260

使用内置的[parse_ini_file](http://php.net/manual/en/function.parse-ini-file.php)函数从外部文件加载变量。

# asp.net - ASP 推送通知：限制时间响应

> ID：14128107
> 
> 赞同：0
> 
> 时间：2013-01-02T19:40:29.707
> 
> 标签：asp.net, timeout, push-notification

我正在开发一个 .NET 应用程序，它通过事件源与 JS 客户端通信。

它工作得很好，但我有一个问题：

如果客户端在服务器写入时断开连接，服务器会一直卡住 10 秒，最后给我一个错误：

```
The remote host closed the connection. The error code is 0x80070079. 
```

这个错误是正常的，我抓住了它，但我想避免 10 秒或至少将其限制在 1 或 2 秒。

我的代码是这样的：

```
 if (ctx.Response.IsClientConnected)
 {
      ctx.Response.Write("data: " + e.json + "\n\n");
 } 
```

我尝试了，`<httpRuntime executionTimeout="3"/>`但它不起作用......

任何想法？

瓦伦丁 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T20:10:57.833

I think there might be a need for a minimum timeout based on connections' unreliability.

I don't know your code logic and architecture exactly but you can convert your operations to work asynchronously.

# jquery - 使用表单向导插件使 jquery 验证工作？

> ID：14128110
> 
> 赞同：2
> 
> 时间：2013-01-02T19:40:59.480
> 
> 标签：jquery, forms, validation, jquery-form-wizard

我正在使用 jquery 验证插件以及我发现的另一个插件来创建一种表单向导。我遇到的问题是在表单向导的下一个按钮上触发验证插件，因此每个步骤过程都得到验证，而不仅仅是在提交按钮上。

这是jsfiddle：http: [//jsfiddle.net/DHNPz/](http://jsfiddle.net/DHNPz/)

javascript 部分包含我为表单编写的代码以及 formtowizard JS。我假设我需要编辑这部分代码：

```
 function createNextButton(i) {
        var stepName = "step" + i;
        $("#" + stepName + "commands").append("<a href='#' id='" + stepName + "Next'><button class='next' type='button'>Next Step</button></a>");

        $("#" + stepName + "Next").bind("click", function(e) {
            $("#" + stepName).hide();
            $("#step" + (i + 1)).show();
            if (i + 2 == count)
                $(submmitButtonName).show();
            selectStep(i + 1);
        });
    } 
```

点击函数内部。我只是不确定如何在这里调用验证触发器

请帮忙！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T20:09:51.873

首先，您需要添加类似

```
ignore: ':hidden' 
```

到您的`validate`选项，以便它只验证可见字段。这样，您可以仅验证每个步骤中可见的字段，一旦它们有效就转到下一步。然后，您可以随时通过运行检查验证

```
$('#RMAForm').validate().form() 
```

当有人单击下一步按钮时触发验证。您将像这样更新上面粘贴的代码：

```
function createNextButton(i) {
    var stepName = "step" + i;
    $("#" + stepName + "commands").append("<a href='#' id='" + stepName + "Next'><button class='next' type='button'>Next Step</button></a>");

    $("#" + stepName + "Next").bind("click", function(e) {
        // run the validation and check if the form is valid
        if ($('#RMAForm').validate().form()) {
            $("#" + stepName).hide();
            $("#step" + (i + 1)).show();
            if (i + 2 == count)
                $(submmitButtonName).show();
            selectStep(i + 1);
        } else {
            return false; // prevent moving on if the form is invalid
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T20:40:29.377

好吧，它是anserwed，但我也找到了这个。

Idee 是用验证选项扩展 nextButton 。像这样：

```
function createNextButton(i) {
    var stepName = "step" + i;
    $("#" + stepName + "commands").append("<a href='#' id='" + stepName + "Next' class='next'>Next</a>");

    $("#" + stepName + "Next").bind("click", function (e) {
        if (options.validationEnabled) {
            var stepIsValid = true;
            $("#" + stepName + " :input").each(function (index) {
                checkMe = element.validate().element($(this));
                //stepIsValid = !element.validate().element($(this)) && stepIsValid;
                stepIsValid = checkMe && stepIsValid;
            });

            if (!stepIsValid) {
                return false;
            };
        };

        $("#" + stepName).hide();
        $("#step" + (i + 1)).show();
        if (i + 2 == count)
            $(submmitButtonName).show();
        selectStep(i + 1, 'next');
    });
} 
```

所以在下一步之前，它会检查当前字段集中的所有元素。来源：[在字段集之间验证](https://stackoverflow.com/questions/4396801/validate-between-fieldsets)

PS 不要忘记在创建向导时启用验证：

```
$("#RMAForm").formToWizard({
     submitButton: 'submitMe',
     validationEnabled: true
}); 
```

# magento - Magento：attributes.phtml 控制的块的参考名称是什么？（使用 EasyTabs）

> ID：14128115
> 
> 赞同：0
> 
> 时间：2013-01-02T19:41:08.497
> 
> 标签：magento, magento-1.7

我正在使用带有 EasyTabs 扩展的 Magento。我有一个自定义的 attributes.phtml 我想用于某些产品，我正在尝试使用设计更新 XML 来切换默认的 attributes.phtml，以便仅在某些产品上进行自定义。我正在尝试找出该块的正确参考名称。

该块的模板提示显示：

```
frontend/default/MY_THEME_NAME/template/easytabs/attributes.phtml 
```

我试图用于布局更新的 XML 是：

```
<reference name="[REFERENCE NAME???]">
<action method="setTemplate"><template>[CUSTOM ATTRIBUTES.PHTML]</template></action>
</reference> 
```

我试过了：

```
product.info.attributes 
product_info_attributes 
product.attributes 
product_attributes
easytabs.attributes
easytabs_attributes
product.view.attributes
product_view_attributes 
```

这些都不起作用。使用 EasyTabs 时，此块的正确参考名称是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T20:40:49.543

我不知道“EasyTabs”是什么，但如果您临时编辑`attributes.phtml`以包含以下内容

```
<?php var_dump($this->getNameInLayout()); ?> 
```

块的名称将输出到屏幕上。

# security - 点对点安全通信：任何可用的解决方案？

> ID：14128121
> 
> 赞同：0
> 
> 时间：2013-01-02T19:41:35.347
> 
> 标签：security

我检查了类似的帖子，但我认为这里的问题可能略有不同。

问题是在两个对等点（例如，A 和 B）之间提供安全通信，这两个对等点之前可能没有，怎么说呢，“强耦合”（比如 A 将其公钥保存在 B 上，诸如此类）。

信任基于执行初始身份验证的公共信令服务器（例如，XMPP）。假设 A 和 B 都登录到该服务器。他们将如何进行安全和直接的通信？我猜想相关的关键字，使用 XMPP 示例，将是 XMPP secure socks5（到目前为止，该主题在 doc 中未发现）。感谢您对我如何开始实施的建议，最好使用工作量较少的可用库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T21:11:29.080

要查看的一种协议是[Off the Record](http://en.wikipedia.org/wiki/Off-the-Record_Messaging)，它已在很多项目中与 XMPP 一起使用。您将面临的挑战是用户如何相互验证，以抵抗中间人攻击。OTR 使用 Diffie-Hellman 交换 AES 密钥以进行批量加密和 SHA256-HMAC。然后，用户可以使用共享密钥（如密码）相互验证，或在带外比较公钥指纹。

我不知道它是否算作“强耦合”，但另一种方法是使用由受信任的第 3 方签名的证书。如果 A 有一个你签名的证书，B 有一个你签名的证书，那么 A 和 B 可以安全地通信，而不需要先验的彼此密钥。

# c - 在 base 64 中编码 c 样式字符串的副作用

> ID：14128124
> 
> 赞同：0
> 
> 时间：2013-01-02T19:42:00.227
> 
> 标签：c

我的应用程序通常将二进制消息记录到文件中。它在 base64 中对二进制消息进行编码，并在每条消息中存储一些基于字符串的元数据以使其可搜索。现在，我们要记录纯 C 风格字符串的消息。如果 c 样式的字符串可以进行 base 64 编码，是否有任何副作用/陷阱？

# android - 服务，唤醒锁

> ID：14128126
> 
> 赞同：16
> 
> 时间：2013-01-02T19:42:10.293
> 
> 标签：android, service, wakelock

在查看 Stackoverflow 中关于`WakefulIntentService`. 我只是想获得一些关于这个主题的知识，以确保我的理解是正确的，如果我错了，请随时纠正我。

我构建了一个小型应用程序，其中我使用的背景`Service`是在用户摇动手机时不断播放音乐。我在设备锁定并关闭屏幕后进行了测试，它按预期工作。

1.  我从[这个论坛](https://stackoverflow.com/questions/9309044/service-pauses-on-screen-lock?rq=1)听到的消息，一旦设备进入睡眠状态，服务可能会关闭。真的吗？就我而言，它总是有效，我错过了什么吗？

2.  需要什么`WakeFulIntentService`？我们什么时候需要使用`WakefulIntentService`？

3.  我尝试在 a 中运行计时器`Service`，尽管设备已锁定并且屏幕已关闭并且我的计时器正在运行，但我可以肯定地说。因为我曾经在我的计时器跳闸时收到通知。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-02T19:53:42.223

> 我从这个论坛听到的消息是，一旦设备进入睡眠状态，服务可能会关闭。真的吗？

是的。

> 就我而言，它总是有效

然后，您设备上的其他东西会阻止设备入睡。也许**`adb shell dumpsys power`**用来看看有什么`WakeLocks`出色的。

> WakeFulIntent 服务需要什么？我们什么时候需要使用 WakefulIntentService？

如果用户处于非活动状态并且没有任何东西使设备保持清醒，则设备可能会进入睡眠状态。A`WakeLock`用于确保设备保持唤醒状态。对于事务类型的工作（例如，下载文件），`WakefulIntentService`结合 an`IntentService`和 a`WakeLock`以使设备在必要时（并且*仅*在必要时）保持唤醒相对容易。

`WakefulIntentService`不适合与需要无限期运行的服务一起使用，例如音乐播放器。对于那些，管理你自己的`WakeLock`.

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-02T19:59:43.800

我在应用程序中使用了下面的代码。

确保您的服务具有粘性：

```
@Override
public int onStartCommand(Intent intent, int flags, int startId)
{
    //this service will run until we stop it

    return START_STICKY;
} 
```

如果您希望您的手机始终处于唤醒状态，您可以使用以下代码：

```
private WakeLock wl;

PowerManager pm = (PowerManager)getSystemService(Context.POWER_SERVICE);
    wl = pm.newWakeLock(PowerManager.FULL_WAKE_LOCK | PowerManager.ACQUIRE_CAUSES_WAKEUP, "whatever");
    wl.acquire(); 
```

不要忘记清单中的权限。

```
<uses-permission android:name="android.permission.WAKE_LOCK" /> 
```

# java - Android：创建列表>

> ID：14128130
> 
> 赞同：0
> 
> 时间：2013-01-02T19:42:18.777
> 
> 标签：java, android

有人可以帮我解决我的问题，如何`List<Map<Integer, List<MyType>>`在循环中创建。我正在从数据库中选择数据，我想添加对象，这些对象完成 select 的 where 条件到 List 中，然后将它放入`Map<Integer, List<MyType>`where 映射键在我的情况下是来自数据库列 order_num 的整数。最后我想将所有创建的地图添加到列表中。方法的返回值为`List<Map<Integer, List<MyType>>>`.

这是我的部分来源：

```
while (cursor.moveToNext) {
       int id = cursor.getInt(cursor.getColumnIndex("item_id"));
       int orderNum = cursor.getInt(cursor.getColumnIndex("order_num"));
       String name = cursor.getString(cursor.getColumnIndex("item_name"));

       list.add(new Item(id, orderNum, name);
   } 
```

现在我想将此列表添加到 Map 其中 key`orderNum`和 value 是`List<Item>`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T19:54:37.107

我会在循环外声明一个 orderNum 变量，这样你就可以在循环结束时使用它：

```
int orderNum;
for ( cursor.moveToFirst; !cursor.isAfterLast(); cursor.moveToNext )
{
    int id = cursor.getInt( cursor.getColumnIndex( "item_id" ) );
    orderNum = cursor.getInt( cursor.getColumnIndex( "order_num" ) );
    String name = cursor.getString( cursor.getColumnIndex( "item_name" ) );

    list.add( new Item( id, orderNum, name ) );
}

map.put( orderNum, list ); 
```

我猜整个块也会处于某种循环中，所以当那个循环结束时，你可以做

```
masterList.add( map ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T19:54:37.987

Ty 使用 hashmap 代替。我不确定这是否有效，但您至少可以尝试一下。

```
HashMap<Integer, ArrayList<MyClass>> myMap = new HashMap<Integer, ArrayList<MyClass>>(); 
```

也许这也有帮助： [http ://www.roseindia.net/javatutorials/javahashmap.shtml](http://www.roseindia.net/javatutorials/javahashmap.shtml)

# c# - ASP.NET - 欧盟 cookie 立法的开箱即用解决方案？

> ID：14128132
> 
> 赞同：4
> 
> 时间：2013-01-02T19:42:22.677
> 
> 标签：c#, asp.net, .net, cookies

有没有人有一套开箱即用的 .NET 文件来支持欧盟 cookie 立法？快速、简单且可适度定制的东西会很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-01-15T10:58:51.883

我用这个

控制器：

```
public ActionResult ClearAllCookiesAndRedirect()
        {
            HttpCookie aCookie;
            string cookieName;
            int limit = Request.Cookies.Count;
            for (int i = 0; i < limit; i++)
            {
                cookieName = Request.Cookies[i].Name;
                aCookie = new HttpCookie(cookieName);
                aCookie.Expires = DateTime.Now.AddDays(-1);
                Response.Cookies.Add(aCookie);
            }

            return View();
        } 
```

鉴于：

```
 HttpCookie cookie = Request.Cookies["AcceptCookiesEULaw"];
    if (cookie == null)
    {
         //your html code here
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-26T16:14:16.427

晚会有点晚了，但我创建了这个：
[https](https://github.com/hudo/EUCookiesNET)
://github.com/hudo/EUCookiesNET 你也可以在 nuget 上找到它。OWIN 版本即将发布。

# objective-c - Iphone App中目标c客户端和服务器中的网络

> ID：14128136
> 
> 赞同：-2
> 
> 时间：2013-01-02T19:42:42.253
> 
> 标签：objective-c

我想在iphone上做一个简单的应用程序有一个客户端和服务器应用程序应该让我从客户端发送更新到服务器并从服务器发送更新到客户端问题是......我应该读什么来学习主要和重要的东西开始做这个应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T19:46:41.473

查看游戏套件。连接到游戏网络将允许您的应用程序相互通信，来回发送小数据包。

[http://imagineric.ericd.net/2011/04/20/ios-gamekit-iphone-to-iphone-communication/](http://imagineric.ericd.net/2011/04/20/ios-gamekit-iphone-to-iphone-communication/)

或者您可以使用 TCP 套接字设置并以这种方式进行通信。

[http://www.raywenderlich.com/3932/how-to-create-a-socket-based-iphone-app-and-server](http://www.raywenderlich.com/3932/how-to-create-a-socket-based-iphone-app-and-server)

如果 ios 设备在同一个网络上，它可以从一个到另一个工作。

如果他们在其他网络上，您将需要一个中央服务器。

# actionscript - 查看图片计时器 actionscript3,0(FLASH BUILDER)

> ID：14128137
> 
> 赞同：1
> 
> 时间：2013-01-02T19:42:44.147
> 
> 标签：actionscript, time, timer

我想在几秒钟后查看每张图片。功能显示在程序中滚动。请添加必要的代码。我无法理解动作脚本的计时器功能。

```
 function display(q:int):void{
            if(q ==0)
            {
                ue.visible= true;
                migi.visible= false;
                shita.visible= false;
                hidari.visible= false;
            }
            else if(q ==1)
            {

                ue.visible= false;
                migi.visible= true;
                shita.visible= false;
                hidari.visible= false;
            }
            else if(q ==2)
            {
                ue.visible= false;
                migi.visible= false;
                shita.visible= true;
                hidari.visible= false;
            }
            else
            {
                ue.visible= false;
                migi.visible= false;
                shita.visible= false;
                hidari.visible= true;
            }
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T02:03:34.307

试试下面的。我试图包括评论来解释我在做什么：

```
import flash.utils.Timer;
import flash.events.TimerEvent;

// Put all the clips in an array to manage
var pictures:Array = [this.ue, this.migi, this.shita, this.hidari];

// Store the current image index
var currentPicture = 0;

// Delay in milliseconds to wait between each image
var delay = 1000; 

// We can reuse the same timer instance throughout cycle
var timer:Timer = new Timer(this.delay, 1);
timer.addEventListener(TimerEvent.TIMER_COMPLETE, timerCompleteHandler);

// Hide all the pictures in the array
function hidePictures():void 
{
    for (var i:int = 0; i < this.pictures.length; i ++)
    {
        MovieClip(this.pictures[i]).visible = false;
    }
}

function showPicture():void 
{
    // Show the current image
    MovieClip(this.pictures[this.currentPicture]).visible = true;

    // Now start the pause on the current image
    timer.start();
}

function timerCompleteHandler(event:TimerEvent):void
{
    // Hide the old image
    MovieClip(this.pictures[this.currentPicture]).visible = false;

    // Increment current picture index unless we're at the end in which case loop
    this.currentPicture = (this.currentPicture < this.pictures.length - 1)
        ? this.currentPicture + 1 : 0;

    // Show the next picture
    showPicture();
}   

hidePictures();
showPicture(); 
```

# image-processing - 对 x264 和编码视频帧感到困惑

> ID：14128144
> 
> 赞同：1
> 
> 时间：2013-01-02T19:43:12.707
> 
> 标签：image-processing, video-streaming, h.264, libavcodec, libx264

我构建了一个测试驱动程序，用于对我捕获的一系列图像进行编码。我正在使用 libx264 并基于这个人的回答来驱动我的驱动程序：

[StackOverflow 链接](https://stackoverflow.com/questions/2940671/how-does-one-encode-a-series-of-images-into-h264-using-the-x264-c-api)

在我的情况下，我首先读取 JPG 图像并转换为 YUV，然后在循环中一遍又一遍地将同一帧传递给 x264 编码器。

我的期望是，由于帧相同，编码器的输出将非常小且恒定。

相反，我发现 NAL 有效负载从几个字节到几个 KB 不等，并且根据我在编码器参数中指定的帧速率变化很大。

显然我不懂视频编码。为什么输出大小变化如此之大？

```
int main() 
{
  Image image(WIDTH, HEIGHT);
  image.FromJpeg("frame-1.jpg");

  unsigned char *data = image.GetRGB();

  x264_param_t param;

  x264_param_default_preset(&param, "fast", "zerolatency");
  param.i_threads = 1;
  param.i_width = WIDTH;
  param.i_height = HEIGHT;
  param.i_fps_num = FPS;
  param.i_fps_den = 1;

  // Intra refres:
  param.i_keyint_max = FPS;
  param.b_intra_refresh = 1;

  //Rate control:
  param.rc.i_rc_method = X264_RC_CRF;
  param.rc.f_rf_constant = FPS-5;
  param.rc.f_rf_constant_max = FPS+5;

  //For streaming:
  param.b_repeat_headers = 1;
  param.b_annexb = 1;

  x264_param_apply_profile(&param, "baseline");

  // initialize the encoder
  x264_t* encoder = x264_encoder_open(&param);
  x264_picture_t pic_in, pic_out;
  x264_picture_alloc(&pic_in, X264_CSP_I420, WIDTH, HEIGHT);
  // X264 expects YUV420P data use libswscale 
  // (from ffmpeg) to convert images to the right format
  struct SwsContext* convertCtx =
        sws_getContext(WIDTH, HEIGHT, PIX_FMT_RGB24, WIDTH, HEIGHT,
                       PIX_FMT_YUV420P, SWS_FAST_BILINEAR,
                       NULL, NULL, NULL);

  // encoding is as simple as this then, for each frame do:
  // data is a pointer to your RGB structure
  int srcstride = WIDTH*3; //RGB stride is just 3*width
  sws_scale(convertCtx, &data, &srcstride, 0, HEIGHT,
            pic_in.img.plane, pic_in.img.i_stride);
  x264_nal_t* nals;
  int i_nals;
  int frame_size =
        x264_encoder_encode(encoder, &nals, &i_nals, &pic_in, &pic_out);

  int max_loop=15;
  int this_loop=1;

  while (frame_size >= 0 && --max_loop)
  {
      cout << "------------" << this_loop++ << "-----------------\n";
      cout << "Frame size = " << frame_size << endl;
      cout << "output has " << pic_out.img.i_csp << " colorspace\n";
      cout << "output has " << pic_out.img.i_plane << " # img planes\n";

      cout << "i_nals = " << i_nals << endl;
      for (int n=0; n<i_nals; n++)
        cout << "nal[" << n << "] payload size = "
             << nals[n].i_payload << endl;

      // clean this input frame and grab another
      x264_picture_clean(&pic_in);
      x264_picture_alloc(&pic_in, X264_CSP_I420, WIDTH, HEIGHT);
      sws_scale(convertCtx, &data, &srcstride, 0, HEIGHT,
                pic_in.img.plane, pic_in.img.i_stride);

      frame_size=
        x264_encoder_encode(encoder, &nals, &i_nals, &pic_in, &pic_out);
  }

  delete [] data;
  return 0;
} 
```

我正在阅读的原始 JPG 图像是 320x240，磁盘上大约有 9KB。通过编码器运行相同图像的输出如下所示：

```
x264 [warning]: ref > 1 + intra-refresh is not supported
x264 [info]: using cpu capabilities: MMX2 SSE2Fast SSSE3 FastShuffle SSE4.2 AVX
x264 [info]: profile Constrained Baseline, level 1.3 
------------1-----------------
Frame size = 17412
output has 3 colorspace
output has 2 # img planes
i_nals = 4 
nal[0] payload size = 26
nal[1] payload size = 8 
nal[2] payload size = 610 
nal[3] payload size = 16768
------------2-----------------
Frame size = 11
output has 3 colorspace
output has 2 # img planes
i_nals = 1 
nal[0] payload size = 11
------------3-----------------
Frame size = 11
output has 3 colorspace
output has 2 # img planes
i_nals = 1 
nal[0] payload size = 11
------------4-----------------
Frame size = 16
output has 3 colorspace
output has 2 # img planes
i_nals = 1 
nal[0] payload size = 16
------------5-----------------
Frame size = 104 
output has 3 colorspace
output has 2 # img planes
i_nals = 1 
nal[0] payload size = 104 
------------6-----------------
Frame size = 973 
output has 3 colorspace
output has 2 # img planes
i_nals = 1
nal[0] payload size = 973
------------7-----------------
Frame size = 4576
output has 3 colorspace
output has 2 # img planes
i_nals = 1
nal[0] payload size = 4576
------------8-----------------
Frame size = 4040
output has 3 colorspace
output has 2 # img planes
i_nals = 1
nal[0] payload size = 4040
------------9-----------------
Frame size = 3917
output has 3 colorspace
output has 2 # img planes
i_nals = 1
nal[0] payload size = 3917
------------10-----------------
Frame size = 3799
output has 3 colorspace
output has 2 # img planes
i_nals = 1
nal[0] payload size = 3799
------------11-----------------
Frame size = 2454
output has 3 colorspace
output has 2 # img planes
i_nals = 1
nal[0] payload size = 2454
------------12-----------------
Frame size = 1641
output has 3 colorspace
output has 3 colorspace
output has 2 # img planes
i_nals = 1
nal[0] payload size = 1641
------------13-----------------
Frame size = 1121
output has 3 colorspace
output has 2 # img planes
i_nals = 1
nal[0] payload size = 1121
------------14-----------------
Frame size = 247
output has 3 colorspace
output has 2 # img planes
i_nals = 1
nal[0] payload size = 247 
```

如果我将 FPS 设置为 10 而不是 30，那么输出大小会发生巨大变化：

```
x264 [warning]: ref > 1 + intra-refresh is not supported
x264 [info]: using cpu capabilities: MMX2 SSE2Fast SSSE3 FastShuffle SSE4.2 AVX
x264 [info]: profile Constrained Baseline, level 1.1 
------------1-----------------
Frame size = 60120
output has 3 colorspace
output has 2 # img planes
i_nals = 4 
nal[0] payload size = 25
nal[1] payload size = 9 
nal[2] payload size = 609 
nal[3] payload size = 59477
------------2-----------------
Frame size = 10
output has 3 colorspace
output has 2 # img planes
i_nals = 1 
nal[0] payload size = 10
------------3-----------------
Frame size = 151 
output has 3 colorspace
output has 2 # img planes
i_nals = 1 
nal[0] payload size = 151 
------------4-----------------
Frame size = 2329
output has 3 colorspace
output has 2 # img planes
i_nals = 1 
nal[0] payload size = 2329
------------5-----------------
Frame size = 1466
output has 3 colorspace
output has 2 # img planes
i_nals = 1 
nal[0] payload size = 1466
------------6-----------------
Frame size = 539 
output has 3 colorspace
output has 2 # img planes
i_nals = 1
nal[0] payload size = 539
------------7-----------------
Frame size = 311
output has 3 colorspace
output has 2 # img planes
i_nals = 1
nal[0] payload size = 311
------------8-----------------
Frame size = 291
output has 3 colorspace
output has 2 # img planes
i_nals = 1
nal[0] payload size = 291
------------9-----------------
Frame size = 302
output has 3 colorspace
output has 2 # img planes
i_nals = 1
nal[0] payload size = 302
------------10-----------------
Frame size = 287
output has 3 colorspace
output has 2 # img planes
i_nals = 1
nal[0] payload size = 287
------------11-----------------
Frame size = 11937
output has 3 colorspace
output has 2 # img planes
i_nals = 4
nal[0] payload size = 25
nal[1] payload size = 9
nal[2] payload size = 9
nal[3] payload size = 11894 
```

你能启发我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T04:09:55.700

Rhe 问题主要是由于“速率控制”参数。移除 CRF 速率控制并使用恒定量化器。恒定量化器不是推荐的操作模式，但在您的情况下（相同的图像重复）会产生相似大小的帧。

消除：

```
param.b_intra_refresh = 1;

//Rate control:
param.rc.i_rc_method = X264_RC_CRF;
param.rc.f_rf_constant = FPS-5;
param.rc.f_rf_constant_max = FPS+5; 
```

然后加：

```
 param.rc.i_qp_constant = 18; 
 param.rc.i_qp_min = 18; 
 param.rc.i_qp_max = 18; 
```

# mysql - 在 Flash Builder 的 DataGrid 中显示某些记录

> ID：14128148
> 
> 赞同：0
> 
> 时间：2013-01-02T19:43:32.057
> 
> 标签：mysql, apache-flex, adobe, flash-builder

我有一个带有 a 的应用程序，`DataGrid`它的数据/服务来自服务器`MySQL`中继的数据库`ColdFusion`。我有一个包含以下列的表：`name`、`tstamp`、`store`和`dept`。这是我的问题：

单击按钮时，我希望能够显示在单击按钮之前选择的名称的最新 tstamp（作为标签）。此标签将根据用户选择的名称而变化。我尝试在`.cfc`文件中编写 MySQL 查询，并且我也尝试使用直接`Flex`代码来完成它，但没有任何运气。有没有人有任何提示可以给我指出正确的方向？提前致谢。

`.cfc`由于不知道如何根据用户选择的名称更改结果，因此文件中的代码不完整。

```
<cffunction name="recent_timestamp" output="false" access="remote" returntype="any" >
    <cfset var qAllItems="">
    <cfquery name="qAllItems" datasource="TimeClock">
        SELECT * FROM tbl_timestamps 
        WHERE tstamp = (select max(tstamp) from tbl_timestamps where store = "Dodge")
    </cfquery>
    <cfreturn qAllItems>
</cffunction> 
```

我也尝试使用`Flex`代码，但我不知道如何从`Data Service`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T21:26:08.373

经过一番讨论，解决方案是在登录时通过 join 获取 necc 数据。这个问题被绕过了。

# java - 试图获得一个按钮来显示测试学习，没有危险信号错误，只是混乱？

> ID：14128149
> 
> 赞同：0
> 
> 时间：2013-01-02T19:43:49.570
> 
> 标签：java, eclipse, gxt

使用 GXT 和 Java 尝试学习。只是通过 eclipse 测试它会让我进入一个没有按钮的空白页面，我使用了 sencha 的按钮示例，它显示在那里，然后当我采取到目前为止我学到的必要的东西时，我仍然无法生成单个文本按钮。

```
package com.custom.test.client;

import com.google.gwt.core.client.EntryPoint;
import com.google.gwt.core.client.GWT;
import com.google.gwt.user.client.ui.HorizontalPanel;
import com.google.gwt.user.client.ui.VerticalPanel;
import com.sencha.gxt.cell.core.client.ButtonCell.ButtonScale;
import com.sencha.gxt.core.client.resources.ThemeStyles;
import com.sencha.gxt.widget.core.client.ContentPanel;
import com.sencha.gxt.widget.core.client.ContentPanel.ContentPanelAppearance;
import com.sencha.gxt.widget.core.client.FramedPanel.FramedPanelAppearance;
import com.sencha.gxt.widget.core.client.box.AlertMessageBox;
import com.sencha.gxt.widget.core.client.button.CellButtonBase;

/**
 *  Entry point classes define <code>onModuleLoad()</code>.
 */
public class Test implements EntryPoint {
    @Override
    public void onModuleLoad() {
        VerticalPanel vp = new VerticalPanel();
        ContentPanel cp = new ContentPanel();
        vp.setSpacing(10);
        vp.setWidth("400px");
        HorizontalPanel hp = new HorizontalPanel();
        hp.setSpacing(5);
        Buttons b = new Buttons();
        CellButtonBase<?> small = b.createButton(Buttons.Category.NORMAL, Buttons.Type.TEXT);
        b.configureButton(small, Buttons.Type.TEXT, ButtonScale.SMALL);
        hp.add(small);
        vp.add(hp);
        cp = new ContentPanel(GWT.<ContentPanelAppearance> create(FramedPanelAppearance.class));
        cp.addStyleName("margin-10");
        cp.setPixelSize(500, 400);
        cp.getBody().getStyle().setBackgroundColor("white");
        cp.getBody().addClassName(ThemeStyles.getStyle().border());
        cp.add(vp);
        cp.show();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T04:49:03.927

不确定这是否需要，但试试这个

```
 cp.add(b); 
```

? 也许 ？

编辑：

```
package com.custom.test.client;

import com.google.gwt.core.client.EntryPoint;
import com.google.gwt.core.client.GWT;
import com.google.gwt.user.client.ui.HorizontalPanel;
import com.google.gwt.user.client.ui.VerticalPanel;
import com.sencha.gxt.cell.core.client.ButtonCell.ButtonScale;
import com.sencha.gxt.core.client.resources.ThemeStyles;
import com.sencha.gxt.widget.core.client.ContentPanel;
import com.sencha.gxt.widget.core.client.ContentPanel.ContentPanelAppearance;
import com.sencha.gxt.widget.core.client.FramedPanel.FramedPanelAppearance;
import com.sencha.gxt.widget.core.client.box.AlertMessageBox;
import com.sencha.gxt.widget.core.client.button.CellButtonBase;

/**
 *  Entry point classes define <code>onModuleLoad()</code>.
 */
public class Test implements EntryPoint {
    @Override
    public void onModuleLoad() {
        VerticalPanel vp = new VerticalPanel();
        ContentPanel cp = new ContentPanel();
        vp.setSpacing(10);
        vp.setWidth("400px");
        HorizontalPanel hp = new HorizontalPanel();
        hp.setSpacing(5);
        Buttons b = new Buttons();
        CellButtonBase<?> small = b.createButton(Buttons.Category.NORMAL, Buttons.Type.TEXT);
        b.configureButton(small, Buttons.Type.TEXT, ButtonScale.SMALL);
        hp.add(small);
        vp.add(hp);
        vp.add(b); //you are adding everything except the actual button
        cp = new ContentPanel(GWT.<ContentPanelAppearance> create(FramedPanelAppearance.class));
        cp.addStyleName("margin-10");
        cp.setPixelSize(500, 400);
        cp.getBody().getStyle().setBackgroundColor("white");
        cp.getBody().addClassName(ThemeStyles.getStyle().border());
        cp.add(vp);
        cp.show();
    }
} 
```

# javascript - 如何识别 Grip 应用程序模板中的特定属性？

> ID：14128151
> 
> 赞同：0
> 
> 时间：2013-01-02T19:43:59.887
> 
> 标签：javascript, html, windows-8, visual-studio-2012, winjs

我正在为 Windows Store 开发一个应用程序，并且我对*data.js*中的第一个代码进行了一些更改：

```
var sampleItems = [
        { group: sampleGroups[0], itemClass: "item2", title: "Pupusas:", subtitle: "Item Subtitle: 1", description: itemDescription, content: itemContent, backgroundImage: "/images/dishes/horizontal/comidas.jpg" },
        { group: sampleGroups[0], itemClass: "item", title: "Atol Shuco:", subtitle: "Item Subtitle: 2", description: itemDescription, content: itemContent, backgroundImage: "/images/dishes/thumbnails/bebidas/atol_shuco.jpg" },
        { group: sampleGroups[0], itemClass: "item", title: "Pan con Pollo:", subtitle: "Item Subtitle: 3", description: itemDescription, content: itemContent, backgroundImage: "/images/dishes/thumbnails/comidas/pan_pollo.jpg" },
        { group: sampleGroups[0], itemClass: "item", title: "Nuegados de Huevo:", subtitle: "Item Subtitle: 4", description: itemDescription, content: itemContent, backgroundImage: "/images/dishes/thumbnails/postres/nuegados.jpg" },
        { group: sampleGroups[0], itemClass: "item", title: "Frijoles Borrachos:", subtitle: "Item Subtitle: 5", description: itemDescription, content: itemContent, backgroundImage: "/images/dishes/thumbnails/comidas/frijoles_borrachos.jpg" }]; 
```

如您所见，我添加了一个名为*itemClass*的属性，它确定了我将要使用的 CSS 类，结果如下： [http ://social.msdn.microsoft.com/Forums/getfile/214473](http://social.msdn.microsoft.com/Forums/getfile/214473)

我知道它很好用，但我的问题是你看到的所有图片都是项目，我需要大的必须是*组*，我有 groupedItem.js 的组和项目的代码，虽然我不知道如何合并它们，这是代码，两者都必须在 *else中的**_initializeLayout: function (listView, viewState)*中：这是针对项目的：

 *```
 listView.itemDataSource = Data.items.dataSource;
            listView.groupDataSource = Data.groups.dataSource; 
```

这是针对团体的：

```
 listView.itemDataSource = Data.groups.dataSource;
        listView.groupDataSource = null; 
```

我想知道，如何识别“item2”？并选择项目内的组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T22:35:46.333

使用`args.detail.itemIndex` 项目索引。这是获取索引的正确方法；您从`getAt`调用中获得的项目是您的数据项，除非您在其上放置索引，否则它不会具有索引属性。*

# cakephp - 树行为给新的孩子 lft 和 rght 值 0

> ID：14128154
> 
> 赞同：0
> 
> 时间：2013-01-02T19:44:02.187
> 
> 标签：cakephp, cakephp-2.0

我有一个使用 CakePHP 中的 TreeBehavior 的 MPTT。树验证但是当我添加一个新的根节点时它可以工作。当我尝试通过`$this->{Model}->save($data)`where `$data`now has `['{Model}']['parent_id']`set 将子节点添加到该节点时，它会更新父节点`lft`和`rght`字段以容纳新子节点，但新子节点`lft`的`rght`值为 0。

知道我可能会出错的地方吗？

我尝试将 lft 和 rght 设置为 null 以及取消设置，但无济于事。

***模型***

```
`class Image extends AppModel {

public $displayField = 'title';

    public $actsAs = array('Polymorphic', 'Tree');

    public $imageResource = false;

    // Define virtual fiels at runtime
        public function __construct($id=false,$table=null,$ds=null){
            parent::__construct($id,$table,$ds);
            $this->virtualFields = array(
                'path' => "CONCAT('db/', {$this->alias}.uuid, '.', {$this->alias}.ext)"
                );
            $categories = $this->ImageCategory->find('list', array('fields' => array('ImageCategory.id')));
            $this->order = array('FIELD('.$this->alias.'.image_category_id, '.String::toList($categories, ', ').')');
        }

    public function save($data = null, $validate = true, $fieldList = array()) {
        if($this->imageResource === false) {
            if(!$this->loadImage(APP.'webroot'.DS.$this->path)) {
                if(!$this->loadImage(APP.'webroot'.DS.'db'.DS.$this->uuid.'.'.$this->ext)) {
                    if(!$this->loadImage(APP.'webroot'.DS.'db'.DS.$data['Image']['uuid'].'.'.$data['Image']['ext'])) {
                        // Image doesn't exist so we create a new one.
                        //die('failed to load GD Library image resource');
                        //$this->saveNew($data, $validate, fieldList);
                        //$this->uses[] = 'OrigionalImage';
                        $this->loadImage(APP.'webroot'.DS.'img'.DS.'db'.DS.$this->data['Image']['uuid'].'.'.$this->data['Image']['ext']);
                    }
                }
            }
        }

        $data['Image']['width'] = $this->getWidth();
        $data['Image']['height'] = $this->getHeight();

        $this->writeToDisk(APP.'webroot'.DS.'img'.DS.'db'.DS.$this->uuid.'.jpg');
        //pr($data);exit;
        return parent::save($data, $validate, $fieldList);
    }

    public function saveNew($data = null, $validate = true, $fieldList = array()) {
            $parentId = $data['Image']['parent_id'];
            $this->recursive = -1;
            $parentData = $this->readDataOnly(null, $parentId);
            unset($parentData[$parentData['Image']['class']]);
            if(!empty($parentData)) {

                $data = array();

                $data['Image']['parent_id'] = $parentId;

                $data['Image']['class'] = $parentData['Image']['class'];
                $data['Image']['foreign_id'] = $parentData['Image']['foreign_id'];
                $data['Image']['title'] = $parentData['Image']['title'];
                $data['Image']['alt'] = $parentData['Image']['alt'];
                $data['Image']['image_category_id'] = $parentData['Image']['image_category_id'];
                $data['Image']['image_type_id'] = $parentData['Image']['image_type_id'];

                $data['Image']['ext'] = 'jpg';

                $data['Image']['id'] = null;

                $data['Image']['uuid'] = $this->uuid = String::uuid();
                return $this->save($data, $validate, $fieldList);
            }

        return false;
    }

    public function saveToDB($data = null, $validate = true, $fieldList = array()) {
        if($this->imageResource !== false) {
            $data['Image']['width'] = $this->getWidth();
            $data['Image']['height'] = $this->getHeight();
        }

        return parent::save($data, $validate, $fieldList);
    }

    public function read($fields = null, $id = null) {
        if(parent::read($fields, $id)) {
            $this->loadImage(APP.'webroot'.DS.'img'.DS.$this->data['Image']['path']);
            return parent::read($fields, $id);
        }
        return false;
    }

    public function readDataOnly($fields = null, $id = null) {
            return parent::read($fields, $id);
    }

    public function create($data = array(), $filterKey = false) {
            if(parent::create($data, $filterKey)) {
                $this->uuid = $this->data['Image']['uuid'] = String::uuid();
                return true;
            } else {
                return false;
            }
    }

    public function delete() {
        unlink(APP.'webroot'.DS.'img'.DS.'db'.DS.$this->data['Image']['uuid'].'.'.$this->data['Image']['ext']);
        return parent::delete();
    }

    public function loadImage($fileString) {
            if(!file_exists($fileString)) {
                throw new NotFoundException('File: "'.$fileString.'" not found');
                return false;  
            }
            //if(empty($this->ext))
            $this->ext = strtolower(pathinfo($fileString, PATHINFO_EXTENSION));
            // create useing the correct function
            switch($this->ext) {
                case 'jpg':
                    $this->imageResource = imagecreatefromjpeg($fileString);
                    break;
                case 'jpeg':
                    $this->imageResource = imagecreatefromjpeg($fileString);
                    break;
                case 'png':
                    $this->imageResource = imagecreatefrompng($fileString);
                    break;
                case 'gif';
                    $this->imageResource = imagecreatefromgif($fileString);
                    break;
                default:
                    throw new NotFoundException('File "'.$fileString.'" not found');
                    return false; // just in case
                    break; // just in case
            }
            imagealphablending($this->imageResource, true);
            return true;
    }

    public function handelUpload($data = array()) {
        $this->file = $data['Image']['file'];

        if ($this->file['error'] == false) {

            if(
                    $this->file['type'] == 'image/jpeg' ||
                    $this->file['type'] == 'image/jpg' ||
                    $this->file['type'] == 'image/png' ||
                    $this->file['type'] == 'image/gif'
               ) {

                $this->uuid = String::uuid();
                $this->set('uuid', $this->uuid);
                $this->ext = strtolower(pathinfo($this->file['name'], PATHINFO_EXTENSION));
                $this->set('ext', $this->ext);

                $fileLocation = APP.'webroot'.DS.'img'.DS.'db'.DS.$this->uuid.'.'.$this->ext;
                if (move_uploaded_file($this->file['tmp_name'], $fileLocation)) {
                    $this->loadImage($fileLocation);
                    $this->set('width', $this->getWidth());
                    $this->set('height', $this->getHeight());
                    return true;
                }
                return false;
            }
        }
    }

    public function resizeCrop($newWidth, $newHeight) {

        $origWidth = $this->getWidth();
        $origHeight = $this->getHeight();

        $origRatio = $origWidth / $origHeight;
        $desired_aspect_ratio = $newWidth / $newHeight;

        if ($origRatio > $desired_aspect_ratio) {
           /*
            * Triggered when source image is wider
            */
           $temp_height = $newHeight;
           $temp_width = (int)($newHeight * $origRatio);
        } else {
           /*
            * Triggered otherwise (i.e. source image is similar or taller)
            */
           $temp_width = $newWidth;
           $temp_height = (int)($newWidth / $origRatio);
        }

        /*
        * Resize the image into a temporary GD image
        */

        $temp_gdim = imagecreatetruecolor($temp_width, $temp_height);
        imagecopyresampled($temp_gdim, $this->imageResource, 0, 0, 0, 0, $temp_width, $temp_height, $origWidth, $origHeight);

        /*
        * Copy cropped region from temporary image into the desired GD image
        */

        $x0 = ($temp_width - $newWidth) / 2;
        $y0 = ($temp_height - $newHeight) / 2;
        $desired_gdim = imagecreatetruecolor($newWidth, $newHeight);
        imagecopy($desired_gdim, $temp_gdim, 0, 0,$x0, $y0,$newWidth, $newHeight);
        $this->imageResource = $desired_gdim;
        return true;
}

    public function crop($startX, $startY, $newWidth, $newHeight) {
        $image_p = imagecreatetruecolor($newWidth, $newHeight);
        $transparent = imagecolorallocatealpha($image_p, 255, 255, 255, 127);
        imagealphablending($image_p, false);
        imagesavealpha($image_p,true);
        imagefilledrectangle($image_p, 0, 0, $newWidth, $newHeight, $transparent);
        imagecopyresampled($image_p, $this->imageResource, 0, 0, $startX, $startY, $newWidth, $newHeight, $newWidth, $newHeight);
        $this->imageResource = $image_p;
        return true;
}

public function resizePercent($percent) {

        (float)$percent = $percent/100;

        // Get new dimensions
        list($width, $height) = $this->getimageResourcesize($image);
        $new_width = $width * $percent;
        $new_height = $height * $percent;

        // Resample
        $image_p = imagecreatetruecolor($new_width, $new_height);
        imagealphablending($image_p, false);
        imagesavealpha($image_p,true);
        imagecopyresampled($image_p, $image, 0, 0, 0, 0, $new_width, $new_height, $width, $height);
        $this->imageResource = $image_p;
        return true;
}

public function stream($quality = 100) {
        switch(strtolower($this->ext)) {
                case 'jpg':
                    header("Content-Type: image/jpeg");
                    imagejpeg($this->imageResource, null, $quality);
                    break;
                case 'jpeg':
                    header("Content-Type: image/jpeg");
                    imagejpeg($this->imageResource, null, $quality);
                    break;
                case 'png':
                    header("Content-Type: image/png");
                    imagepng($this->imageResource, null, $quality);
                    break;
                case 'gif';
                    header("Content-Type: image/gif");
                    imagegif($this->imageResource, null, $quality);
                    break;
                default:
                    throw new NotFoundException('File "'.$fileString.'" not found');
                    return false; // just in case
                    break; // just in case
        }
        return true;
}

public function writeToDisk($location = null, $quality = 100) {
        if(!isset($this->ext) || empty($this->ext)) $this->ext = 'jpg';
        if($location == null) $location = APP.'webroot'.DS.'img'.DS.'db'.DS.$this->uuid.'.'.$this->ext;

        switch(strtolower($this->ext)) {
                case 'jpg':
                    imagejpeg($this->imageResource, $location, $quality);
                    break;
                case 'jpeg':
                    imagejpeg($this->imageResource, $location, $quality);
                    break;
                case 'png':
                    imagepng($this->imageResource, $location, (($quality-100)/10));
                    break;
                case 'gif';
                    imagegif($this->imageResource, $location, $quality);
                    break;
                default:
                    throw new NotFoundException('File "'.$fileString.'" not found');
                    return false; // just in case
                    break; // just in case
        }

        return TRUE;
}

private function turnAlphaBlendingOFF() { imagealphablending($im, false); }

    private function getImageResourceSize() {
        $dim = array();
        $dim[] = $this->getWidth($this->imageResource);
        $dim[] = $this->getHeight($this->imageResource);
        return $dim;
    }

    public function getWidth() {
    return imagesx($this->imageResource);
}

public function getHeight() {
    return imagesy($this->imageResource);
}

public $validate = array(
    'original_image_id' => array(
        'numeric' => array(
            'rule' => array('numeric'),

        ),
    ),
    'uuid' => array(
        'uuid' => array(
            'rule' => array('uuid'),

        ),
    ),
    'ext' => array(
        'notempty' => array(
            'rule' => array('notempty'),

        ),
    ),
    'class' => array(
        'notempty' => array(
            'rule' => array('notempty'),

        ),
    ),
    'foreign_id' => array(
        'numeric' => array(
            'rule' => array('numeric'),

        ),
    ),
    'title' => array(
        'notempty' => array(
            'rule' => array('notempty'),

        ),
    ),
    'image_category_id' => array(
        'numeric' => array(
            'rule' => array('numeric'),

        ),
    ),
    'image_type_id' => array(
        'numeric' => array(
            'rule' => array('numeric'),

        ),
    ),
    'width' => array(
        'numeric' => array(
            'rule' => array('numeric'),

        ),
    ),
    'height' => array(
        'numeric' => array(
            'rule' => array('numeric'),

        ),
    ),
);

public $hasOne = array(
    'OriginalImage' => array(
        'className' => 'Image',
        'foreignKey' => 'id',
                    'conditions' => array('OriginalImage.parent_id' => 'OriginalImage.id', 'OriginalImage.id' => NULL),
    ),
            'PrimaryImage' => array(
        'className' => 'Image',
        'foreignKey' => 'id',
                    'conditions' => array('PrimaryImage.primary' => 1),
    )
);

public $belongsTo = array(
    'ImageCategory' => array(
        'className' => 'ImageCategory',
        'foreignKey' => 'image_category_id'
    ),
    'ImageType' => array(
        'className' => 'ImageType',
        'foreignKey' => 'image_type_id'
    )
); 
```

***控制器***

```
class ImagesController extends AppController {

public $paginate = array(
    'limit' => 8,
    'order' => 'Image.created DESC',
);

public $helpers = array('Js' => array('Jquery'));

public function admin_index() {
    $this->Image->recursive = 0;

            // Keywords
            if(isset($this->passedArgs['Image.search']) && $this->passedArgs['Image.search'] != '') {
                $keywords = $this->passedArgs['Image.search'];
                $this->paginate['conditions'][] = array(
                    'OR' => array(
                        'Image.title LIKE' => "%$keywords%",
                        'Image.alt LIKE' => "%$keywords%",
                    )
                );
                $this->Image->data['Image']['Search'] = $keywords;
                $title[] = __('Search',true).': '.$keywords;
            }

            // Width 
            if(isset($this->passedArgs['Image.width']) && $this->passedArgs['Image.width'] != '') {
                $width = $this->passedArgs['Image.width'];
                $this->paginate['conditions'][] = array(
                        'Image.width BETWEEN ? AND ?' => array($width-5, $width+5),
                );
                $this->Image->data['Image']['width'] = $width;
                $title[] = __('Search',true).': '.$width;
            }

            // Height 
            if(isset($this->passedArgs['Image.height']) && $this->passedArgs['Image.height'] != '') {
                $height = $this->passedArgs['Image.height'];
                $this->paginate['conditions'][] = array(
                        'Image.height BETWEEN ? AND ?' => array($height-5, $height+5),
                );
                $this->Image->data['Image']['height'] = $height;
                $title[] = __('Search',true).': '.$height;
            }

            // class 
            if(isset($this->passedArgs['Image.class']) && $this->passedArgs['Image.class'] != '') {
                $class = $this->passedArgs['Image.class'];
                $this->paginate['conditions'][] = array(
                        'Image.class LIKE' => $class,
                );
                $this->Image->data['Image']['class'] = $class;
                $title[] = __('Search',true).': '.$class;
            }

            $this->set('count', $this->Image->find('count'));
            $this->set('images', $this->paginate('Image', null, array('limit' => 8)));

}

public function admin_view($id = null) {
    $this->Image->id = $id;
    if (!$this->Image->exists()) {
        throw new NotFoundException(__('Invalid image'));
    }
    $this->set('image', $this->Image->readDataOnly(null, $id));
            if($this->Image->data['Image']['parent_id'] == null) {
                $this->set('related', $this->Image->children($id, false, null, null, null ,1, 0));
            } else {
                $this->set('related', $this->Image->children($this->Image->data['Image']['parent_id'], false, null, null, null ,1, -1));
            }
}

public function admin_add() {
        $this->uses[] = 'Image';
            $this->Image->create();
            if($this->request->is('post')) {
                if($this->Image->handelUpload($this->request->data) && $this->Image->saveToDB($this->request->data)) {
                    // Make thumbnails
                    if(true) {
                        $newParentId = $this->Image->getLastInsertID();
                        $this->Image->read(null, $newParentId);
                        $sizes = Configure::read('Image.thumbs.'.$this->Image->data['Image']['class']);
                        $numberOfResizes = 0;
                        foreach($sizes as $w => $h) {
                            if($this->Image->data['Image']['width']!=$w && $this->Image->data['Image']['height']!=$h) {
                                $this->Image->read(null, $newParentId);
                                $this->Image->resizeCrop($w, $h);

                                $this->request->data['Image']['parent_id'] = $this->Image->data['Image']['id'];
                                if($this->Image->saveNew($this->request->data)) {
                                    $numberOfResizes++;
                                } else {
                                    $this->Session->setFlash(__('A resized image could not be saved.'));
                                }
                            }
                        }
                    }
                } else {
                    $this->Session->setFlash(__('The original image could not be saved. Please, try again.'));
                }
                $this->Session->setFlash(__('The image has been saved with '.$numberOfResizes.' resize(s)!'));
                $this->redirect(array('controller' => 'images', 'action' => 'add', 'admin' => true));
            }

            $imageCategories = $this->Image->ImageCategory->generateTreeList(null,null,null,'-> ');
    $imageTypes = $this->Image->ImageType->find('list');
    $this->set(compact('imageSubcategories', 'imageTypes', 'imageCategories'));
}

public function admin_edit($id = null) {
    $this->Image->id = $id;
    if (!$this->Image->exists()) {
        throw new NotFoundException(__('Invalid image'));
    }
    if ($this->request->is('post') || $this->request->is('put')) {
                if(!empty($this->request->data['Image']['file'])) {
                    $children = $this->Image->children($this->request->data['Image']['id']);
                    pr($children);exit;
        if($this->Image->handelReUpload($this->request->data) && $this->Image->saveToDB($this->request->data)) {
                        // Make thumbnails
                        if(true) {
                            $this->Image->read(null, $this->Image->data['Image']['id']);

                            foreach($sizes as $w => $h) {
                                if($this->Image->data['Image']['width'] != $w && $this->Image->data['Image']['height'] != $h){
                                    $this->Image->resizeCrop($w, $h);
                                    unset($this->Image->data['Image']['modified']);
                                    if($this->Image->data['Image']['parent_id'] == NULL) {
                                        $this->request->data['Image']['parent_id'] = $this->Image->id;
                                        if($this->Image->save($this->request->data)) {
                                            $this->Session->setFlash(__('The image has been saved!'));
                                            $this->redirect(array('controller' => 'images', 'action' => 'add', 'admin' => true));
                                        }
                                        $this->Session->setFlash(__('The image could not be saved. Please, try again.'));
                                    }
                                }
                            }
                        }
            $this->redirect(array('action' => 'view', $this->Image->id));
        } else {
            $this->Session->setFlash(__('The image could not be saved. Please, try again.'));
        }
                } else {

                }
            }
    $imageCategories = $this->Image->ImageCategory->find('list');
    $imageTypes = $this->Image->ImageType->find('list');
            $this->request->data = $image = $this->Image->read(null, $id);
    $this->set(compact('imageCategories', 'imageTypes', 'image'));
}

public function admin_delete($id = null) {
    if (!$this->request->is('post')) {
        throw new MethodNotAllowedException();
    }
    $this->Image->id = $id;
    if (!$this->Image->exists()) {
        throw new NotFoundException(__('Invalid image'));
    }
            $this->Image->readDataOnly(null, $id);
    if ($this->Image->delete()) {

        $this->Session->setFlash(__('Image deleted'));
        $this->redirect($this->referer());
    }
    $this->Session->setFlash(__('Image was not deleted'));
    $this->redirect(array('action' => 'index'));
}

    public function admin_recover() {
            $this->Image->recover('parent');
            /*
            $condidtions[] = array('Image.parent_id !=' => null);

            $this->Image->recursive = -1;
            $images = $this->Image->find('all', array('conditions' => $condidtions, 'order' =>array('Image.id'), 'fields' => array('id', 'title', 'width', 'height')));
            pr($images);

            foreach($images as $id => $title) {
                    $this->Image->readDataOnly(null, $id);
                    $this->Image->delete();
            }
             *
             */
    }

    public function admin_verify() {
        pr($this->Image->verify());
        exit;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T12:38:56.513

您不应在保存中指定`lft`/`rght`字段。

### 错误的

```
$this->save(array(
    'parent_id' => 123,
    'lft' => 0,
    'rght' => 0
)); 
```

### 正确的

```
$this->save(array(
    'parent_id' => 123
)); 
```

`$this->create();`不要忘记在保存前打电话。

# objective-c - 是否可以制作没有圆边的 UITextField？

> ID：14128157
> 
> 赞同：4
> 
> 时间：2013-01-02T19:44:09.197
> 
> 标签：objective-c, xcode, uitextfield, rounded-corners

圆润的边缘有点过时了，我希望我的程序有一个现代的边缘。知道如何做到这一点吗？

澄清一下：我想要***没有***圆角的 UITextField 的确切功能。

编辑：对不起，我是个笨蛋。我找不到按钮，因为没有选择文本框。

{在此处插入掌心表情符号}

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-04-05T00:59:25.713

只是为了帮助仍然遇到此问题的任何人，因为还不够清楚，您可以使用 Storyboard/Xib Interface Builder：

![在此处输入图像描述](../Images/fd1ec6dc93bc10cd5a02fcdb9fbdaac9.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T19:45:50.617

您可以更改 UITextfield 的borderStyle 属性，或通过设置 backgroundImage 属性来提供您自己的背景图像，这里是一个 ref [UITextField 参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextField_Class/Reference/UITextField.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T07:53:12.077

子类 UITextfield 并覆盖**drawrect:**方法。我认为这应该可以解决您的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-08T18:20:02.237

您可以在 viewDidLoad 中修改在 Interface Builder 中创建的标准 UITextView，如下所示：

```
[_textField setBorderStyle:UITextBorderStyleNone];
[_textField setBackgroundColor:[UIColor whiteColor]]; 
```

这也可以直接在Interface Builder中设置边框样式和背景颜色。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-06-13T06:29:56.080

您需要设置背景图像和背景颜色。

```
UITextField *txtSearchField = [self.searchDisplayController.searchBar valueForKey:@"_searchField"];
[txtSearchField setBackgroundColor:[UIColor whiteColor]];
[txtSearchField setBackground:[[UIImage alloc]init]]; 
```

# php - 如何在 ActiveRecord-Model 中设置 Relation 属性？

> ID：14128161
> 
> 赞同：0
> 
> 时间：2013-01-02T19:44:15.073
> 
> 标签：php, yii

我尝试使用来自**belongsTo**关系的相关类的实例来设置 activeRecord 模型的相关属性，但是当我调用该`save()`方法时，我得到一个错误，因为无效的外键约束。

我应该手动将 id 设置为相关记录吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T01:26:32.397

您是否在模型中将属于主 ActiveRecord 的列定义为外键？否则，您将无法保存这些记录，因为无法将这两条记录绑定在一起。

[http://www.yiiframework.com/doc/guide/1.1/en/database.arr#declaring-relationship](http://www.yiiframework.com/doc/guide/1.1/en/database.arr#declaring-relationship)

# asp.net - 启用页面缓存后，如何阻止特定用户控件缓存？

> ID：14128163
> 
> 赞同：1
> 
> 时间：2013-01-02T19:44:30.670
> 
> 标签：asp.net, caching, user-controls

我有一个带有用户控件的母版页。

我有一个使用上述母版页的页面，我正在缓存这个页面。但我不想缓存用户控件。

我需要为用户控件申请什么代码才能每次加载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T19:53:37.177

看看下面的文章： http: [//msdn.microsoft.com/en-us/library/ms227429 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms227429(v=vs.100).aspx)

# java - 在我的网站上查看小程序更新时遇到问题

> ID：14128166
> 
> 赞同：0
> 
> 时间：2013-01-02T19:45:01.007
> 
> 标签：java, upload, web, applet

所以我有一个网站，我在上面放了一个小程序，每隔一段时间，我就会更新并重新上传那个小程序。但是，我似乎无法仅查看我对 Applet 所做的更改。我能够更新并重新上传 index.html 文件，并且我可以立即查看更改，但是我需要一天的时间才能看到我对 Applet 所做的更新。

奇怪的是，我的朋友能够立即看到我对 Applet 所做的更改，所以我知道上传确实有效。

是的，我已尝试清除缓存并重新启动浏览器，但这似乎不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T08:14:19.310

打开[Java 控制台](http://www.java.com/en/download/help/javaconsole.xml)并刷新类缓存，然后刷新页面。

要获得更可靠和可控的更新，请使用[Java Web Start](https://stackoverflow.com/tags/java-web-start/info)部署小程序。为了获得更好的体验，请部署应用程序。作为`JFrame`使用 JWS。

# javascript - dojo mobile，动态边缘到边缘列表，css不更新？解析器需要运行

> ID：14128167
> 
> 赞同：1
> 
> 时间：2013-01-02T19:45:02.723
> 
> 标签：javascript, css, mobile, dynamic, dojo

我正在 dojo mobile 中制作动态边缘到边缘列表。我动态地将 li 添加到我的主要 ul 中。Dojo mobile 负责处理初始的 li 标记集，使它们的样式正确，并应用 dojo mobile 需要的所有类。但是，当 javascript 删除旧的 li 并制作新的时，dojo mobile 无法识别新标签并为其设置样式。有没有办法让dojo mobile返回并添加它的样式？我认为我只需要弄清楚如何重新运行解析器。这是我到目前为止所拥有的以及它的样子：

```
 function changeToCategoryNav()
{
    $("#browseLabel").hide();
    $("#CategoryLabel").show();
    $("#navList").html("");
    $("#navList").append(
    "<li data-dojo-type='dojox.mobile.ListItem' data-dojo-props='moveTo:" + '"general"' + "'> Boxes & Covers </li>" + 
    "<li data-dojo-type='dojox.mobile.ListItem' data-dojo-props='moveTo:" + '"wifi"' + "' onclick='changeToSectionNav();'> EMT </li>" + 
    "<li data-dojo-type='dojox.mobile.ListItem' data-dojo-props='moveTo:" + '"general"' + "'> Enclosures & Wireway </li>" + 
    "<li data-dojo-type='dojox.mobile.ListItem' data-dojo-props='moveTo:" + '"wifi"' + "'> Fittings </li>" + 
    "<li data-dojo-type='dojox.mobile.ListItem' data-dojo-props='moveTo:" + '"general"' + "'> Liquidite </li>" + 
    "<li data-dojo-type='dojox.mobile.ListItem' data-dojo-props='moveTo:" + '"wifi"' + "'> PVC </li>"
    );
}

function changeToSectionNav()
{
    $("#SectionLabel").show();
    $("#navList").html("");
    $("#navList").append(
    "<li data-dojo-type='dojox.mobile.ListItem' data-dojo-props='moveTo:" + '"general"' + "'> Diecast </li>" + 
    "<li data-dojo-type='dojox.mobile.ListItem' data-dojo-props='moveTo:" + '"wifi"' + "'> Elbows </li>" + 
    "<li data-dojo-type='dojox.mobile.ListItem' data-dojo-props='moveTo:" + '"general"' + "'> Steel Compression </li>" + 
    "<li data-dojo-type='dojox.mobile.ListItem' data-dojo-props='moveTo:" + '"wifi"' + "'> Steel Compression Insulated </li>" + 
    "<li data-dojo-type='dojox.mobile.ListItem' data-dojo-props='moveTo:" + '"general"' + "'> Steel Compression Raintight </li>" + 
    "<li data-dojo-type='dojox.mobile.ListItem' data-dojo-props='moveTo:" + '"wifi"' + "'> Steel Set Screw </li>"
    );
}

<ul id="navList" data-dojo-type="dojox.mobile.EdgeToEdgeList" data-dojo-props='transition:"flip"'>
                    <li data-dojo-type="dojox.mobile.ListItem"
                        data-dojo-props='moveTo:"general"'>
                        Conduit & Raceway
                    </li>
                    <li data-dojo-type="dojox.mobile.ListItem"
                        data-dojo-props='moveTo:"wifi"'>
                        Control & Automation
                    </li>
                    <li data-dojo-type="dojox.mobile.ListItem"
                        data-dojo-props='moveTo:"general"'>
                        Datacom
                    </li>
                    <li data-dojo-type="dojox.mobile.ListItem"
                        data-dojo-props='moveTo:"wifi"'>
                        Distribution Equipment
                    </li>
                    <li data-dojo-type="dojox.mobile.ListItem"
                        data-dojo-props='moveTo:"general"' onclick="changeToCategoryNav();">
                        Fittings & Boxes
                    </li>
                    <li data-dojo-type="dojox.mobile.ListItem"
                        data-dojo-props='moveTo:"wifi"'>
                        Fuses
                    </li>
                </ul> 
```

![第一个列表 - 我希望它看起来如何](../Images/c58f10ed6edfc3a4010756cd91e4e911.png) ![单击选项后，新列表已填充 - 样式不正确](../Images/d63bc7a8c09c56f6b7a35779242ee66c.png)

# flash - 将 FDT 添加到闪存 AS 选项

> ID：14128177
> 
> 赞同：0
> 
> 时间：2013-01-02T19:46:00.267
> 
> 标签：flash, fdt

如何让 flash Professional Creative Suite 6 在 FDT 而不是 Flash Builder 中编辑 Actionscript 文件？我可以使用 jsfl 脚本来执行此操作吗？使用蚂蚁？ [闪屏 http://flashcamphawaii.com/flash_screen.png](http://flashcamphawaii.com/flash_screen.png) ![闪屏][1]

基本上我想为“FDT”添加一个选项

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T19:58:15.850

我认为这是不可能的：/ 我假设这个 b/c 应用程序 GUI 需要更新以反映这一点。您也许可以编写脚本以在 FDT 中打开文件；但是，我认为它不能通过这个 GUI 获得。

（意识到我之前的评论应该是一个答案）

# javascript - 在 Javascript 的 facebook 评论中设置 data-href

> ID：14128178
> 
> 赞同：-2
> 
> 时间：2013-01-02T19:46:01.507
> 
> 标签：javascript, html, facebook, dom, facebook-comments

我正在使用免费的站点构建和主机，它提供了 HTML 编辑，其中包含 $TITLE$、$HOME_PAGE-LINK$ 等代码，但不提供获取当前 http 地址的代码。Facebook评论框需要http地址，设置它的唯一方法是JavaScript。但是怎么做呢？评论框使用第一个加载后值，通过 JS 中的属性设置更改它不起作用。

也许你能帮忙？

更新：我使用的是 html5 框，而不是 xfbml。

更新 2：您可以在那里看到正在工作的网站 - armanx64.tk，但它仅限于俄语。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T19:49:57.560

如果您有权访问 Facebook JavaScript SDK，您将能够使用此功能 -

```
FB.XFBML.parse(); 
```

引用[文档](https://developers.facebook.com/docs/reference/javascript/FB.XFBML.parse/)，

> 此函数动态解析和呈现文档中的 XFBML 标记。

您所要做的就是[加载 JavaScript SDK](https://developers.facebook.com/docs/reference/javascript/)，并在更改`href`属性后调用`FB.XFBML.parse();`. 它将重新渲染元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T21:01:08.037

问题解决了。我在html中使用了这段代码：

```
<div class="fb-comments" id="fbcomments" width="800pt" data-href="" data-num-posts="10" data-colorscheme="dark"></div><script>initfbcm();</script> 
```

其中 initfbcm() 设置 data-href。如果你做的很快，在注释块初始化后，data-href 将正常解决，没有 FB.XFBML.parse()，这可能会在 initfbcm() 调用后导致一些问题。

# actionscript-3 - AS3 MouseEvent.CLICK 不同索引的交互

> ID：14128181
> 
> 赞同：0
> 
> 时间：2013-01-02T19:46:18.930
> 
> 标签：actionscript-3

我目前正在学习 Lynda.com 上的 AS3 游戏教程，并且遇到了 MouseEvent.CLICK 和子索引的问题。游戏是一个简单的傻瓜射击游戏，玩家必须在接近的敌人之前射击所有接近的敌人。它最初可以工作，但是我添加的自定义光标显示在敌人后面。但是，当我尝试调整索引时（我使用了 addChildAt 函数并将 addChild(cursor) 代码行移动到敌人容器初始化程序下方），点击交互（应该在点击时移除敌人）不会不工作。

我的文档类：

```
package {
import flash.display.*;
import flash.utils.*;
import flash.events.*;
import flash.ui.*;

public class Game extends MovieClip {
    public var cursor:Cursor;
    public var enemy:Enemy;
    public var numberOfEnemies:uint;
    public var enemyContainer:MovieClip;
    public var enemyTimer:Timer;

    public function Game() {
        addEventListener(Event.ADDED_TO_STAGE, init);
        Mouse.hide();
    }

    public function init(event:Event):void {
        cursor = new Cursor;
        addChild(cursor);
        stage.addEventListener(MouseEvent.MOUSE_MOVE, dragCursor);

        numberOfEnemies = 10;
        enemyTimer = new Timer(1000, numberOfEnemies);
        enemyContainer = new MovieClip();
        addChild(enemyContainer);

        enemyTimer.addEventListener(TimerEvent.TIMER, createEnemies);
        enemyTimer.start();
    }

    public function dragCursor(event:MouseEvent) {
        cursor.x = this.mouseX;
        cursor.y = this.mouseY;
    }

    public function createEnemies(event:TimerEvent):void {
        enemy = new Enemy();
        enemy.x = 25 + Math.random() * (stage.stageWidth - 75);
        enemy.y = 25 + Math.random() * (stage.stageHeight - 75);
        enemyContainer.addChild(enemy);
        enemy.timerStart();
    }
}
} 
```

我的敌人阶级：

```
package {
import flash.display.MovieClip;
import flash.utils.Timer;
import flash.ui.Mouse;
import flash.events.*;

public class Enemy extends MovieClip {
    public var scaleObj:Number = 0.50;
    public var growTimer:Timer;

    public function Enemy() {
        scaleX = scaleObj;
        scaleY = scaleObj;
        addEventListener(MouseEvent.CLICK, shootEnemy);
    }

    public function timerStart() {
        growTimer = new Timer(50);
        growTimer.addEventListener(TimerEvent.TIMER, objectGrow);
        growTimer.start();
    }

    public function objectGrow(event:TimerEvent):void {
        if(scaleObj <= 1.0) {
            scaleObj += 0.01;
            scaleX = scaleObj;
            scaleY = scaleObj;
        }
        else {
            killEnemy();
        }
    }

    public function killEnemy():void {
        this.parent.removeChild(this);
        growTimer.stop();
    }

    public function shootEnemy(event:MouseEvent):void {
        killEnemy();
    }
}
} 
```

还有一个游标类，但是除了包和类定义器之外没有代码。如果您有任何问题或意见，请告诉我，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T20:00:03.560

将您的 Cursor 实例设置为不接收鼠标事件本身，因为它会阻止单击事件到达其后面的对象。代码将类似于

```
cursor = new Cursor;
cursor.mouseEnabled = false;
cursor.mouseChildren = false; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T20:01:51.100

Cursor 对象很可能正在拦截鼠标单击，因为它位于 Enemy 对象上方。

您可以通过在游标类中进行设置来阻止游标拦截鼠标事件：

```
this.mouseEnabled = false;
this.mouseChildren = false; 
```

此外，理想情况下，您应该使用本机鼠标光标，而不是手动创建自己的光标。查看[此 Adob​​e 教程](http://www.adobe.com/devnet/flashplayer/articles/native-mouse-cursors.html)以获取示例。

# java - SoftReferences vs Weakreferences / OutOfMemoryError

> ID：14128182
> 
> 赞同：6
> 
> 时间：2013-01-02T19:46:19.583
> 
> 标签：java, reference, memory-leaks, out-of-memory, weak

我在处理软引用和弱引用时遇到了问题。代码有一个标志，可以在软引用和弱引用之间切换所有逻辑。虽然使用弱引用似乎一切正常，但使用软引用我一直得到 OutOfMemoryError。MacOSX 上的 JDK7 和 JDK6 以及 Debian 上的 IcedTea6 都会发生这种情况。但是，带有 G1 收集器的 JDK7 是我发现使用软引用的设置，我尝试过的所有其他操作（串行/并行 GC、-client/-server 等）都未能引发异常。

代码有点大，但我试图在保留问题的同时尽可能缩小范围。
我在上面留下了大量评论，更详细地描述了如何重现该问题。

```
/*
 *
 * Leakling.java
 *
 *
 * Issue:
 *
 *
 *   This code throws OutOfMemoryError when using soft references, whereas weak references
 *   work ok. Moreover, with JDK7 G1 garbage collector soft references work as well. Other
 *   collectors seem to fail. Code was tested with MacOSX 10.8.2 JDKs 1.7.0_10-b18 and
 *   1.6.0_37-b06-434-11M3909, with Debian 6.0 IcedTea6 1.8.13.
 *   Various command line options including -Xmx, -client/-server, -XX:+UseParallelOldGC,
 *   -XX:+UseSerialGC were tested.
 *
 *
 * Examples:
 *
 *
 * 1\. Default options, weak references, this works, counters go up and down,
 *    but everything keeps going just as expected:
 *
 *   java -Xmx50m Leakling \
 *       --loop-delay=10 --min-chunk-size=1000 --max-chunk-size=100000 --use-soft-references=false
 *
 *
 * 2\. Default options, soft references, this eventually throws the exception:
 *
 *   java -Xmx50m Leakling \
 *       --loop-delay=10 --min-chunk-size=1000 --max-chunk-size=100000 --use-soft-references=true
 *
 *
 * 3\. G1 collector (IcedTea6 doesn't support it), weak references, this works, but it did anyway:
 *
 *   java -XX:+UseG1GC -Xmx50m Leakling \
 *       --loop-delay=10 --min-chunk-size=1000 --max-chunk-size=100000 --use-soft-references=false
 *
 *
 * 4\. G1 collector, soft references, this works with JDK7.
 *    JDK6 seems to just stop after having hit memory limit (with no message whatsoever).
 *
 *   java -XX:+UseG1GC -Xmx50m Leakling \
 *       --loop-delay=10 --min-chunk-size=1000 --max-chunk-size=100000 --use-soft-references=true
 *
 *
 * jarek, 02.01.2013
 *
 *
 */

import java.lang.ref.*;
import java.util.*;

public class Leakling {
  private static final String TAG = "memory-chunk-";

  class Chunk {
    final String name;
    final int size;
    final private byte[] mem;

    Chunk(String name, int minSize, int maxSize, Random randomizer) {
      int currSize = minSize;
      if (maxSize > minSize) {
        currSize += randomizer.nextInt(maxSize - minSize + 1);
      }
      this.size = currSize;
      this.mem = new byte[currSize];
      this.name = name;
      log(this + " has been created (" + currSize + " bytes)");
    }

    @Override
    public void finalize() throws Throwable {
      log(this + " is finalizing");
    }

    @Override
    public String toString() {
      return name + " of " + getReadableMemorySize(size);
    }
  }

  class WeakChunk extends WeakReference<Chunk> {
    final String name;

    public WeakChunk(Chunk chunk, ReferenceQueue<Chunk> queue) {
      super(chunk, queue);
      this.name = chunk.name;
    }

    @Override
    public String toString() {
      return "weak reference of " + name + " is " + ((get() == null) ? "null" : "alive");
    }
  }

  class SoftChunk extends SoftReference<Chunk> {
    final String name;

    public SoftChunk(Chunk chunk, ReferenceQueue<Chunk> queue) {
      super(chunk, queue);
      this.name = chunk.name;
    }

    @Override
    public String toString() {
      return "soft reference of " + name + " is " + ((get() == null) ? "null" : "alive");
    }
  }

  // Logging as implemented here gives extra timing info (secs.milis starting from the initialization).
  private final long start = System.currentTimeMillis();
  private final Formatter formatter = new Formatter(System.err);
  private final String formatString = "%1$d.%2$03d %3$s\n";

  // I found this be better synchronized...
  synchronized void log(Object o) {
    long curr = System.currentTimeMillis();
    long diff = curr - start;
    formatter.format(formatString, (int) (diff / 1000), (int) (diff % 1000), o.toString());
  }

  private final ArrayList<Chunk> allChunks = new ArrayList<Chunk>();
  private final ReferenceQueue<Chunk> softReferences = new ReferenceQueue<Chunk>();
  private final ReferenceQueue<Chunk> weakReferences = new ReferenceQueue<Chunk>();
  private final HashSet<Reference<Chunk>> allReferences = new HashSet<Reference<Chunk>>();
  private final Random randomizer = new Random();

  private int loopDelay = 200;
  private int minChunkSize = 100;
  private int maxChunkSize = 1000;
  private int chunkCounter = 0;
  private boolean useSoftReferences = false;
  private long minMemory = 10 * 1024 * 1024;  // Default range is 10-30MB
  private long maxMemory = 3 * minMemory;
  private long usedMemory = 0;

  private String getReadableMemorySize(long size) {
    if (size >= 1024 * 1024) {
      return (float) (Math.round((((float) size) / 1024f / 1024f) * 10f)) / 10f + "MB";
    }
    if (size >= 1024) {
      return (float) (Math.round((((float) size) / 1024f) * 10f)) / 10f + "kB";
    } else if (size > 0) {
      return size + "B";
    } else {
      return "0";
    }
  }

  private void allocMem() {
    Chunk chunk = new Chunk(TAG + chunkCounter++, minChunkSize, maxChunkSize, randomizer);
    allChunks.add(chunk);
    Reference ref = useSoftReferences
            ? (new SoftChunk(chunk, softReferences)) : (new WeakChunk(chunk, weakReferences));
    allReferences.add(ref);
    log(ref);
    usedMemory += chunk.size;
  }

  private void freeMem() {
    if (allChunks.size() < 1) {
      return;
    }
    int i = randomizer.nextInt(allChunks.size());
    Chunk chunk = allChunks.get(i);
    log("freeing " + chunk);
    usedMemory -= chunk.size;
    allChunks.remove(i);
  }

  private int statMem() throws Exception {
    for (Reference ref; (ref = softReferences.poll()) != null;) {
      log(ref);
      allReferences.remove(ref);
    }
    for (Reference ref; (ref = weakReferences.poll()) != null;) {
      log(ref);
      allReferences.remove(ref);
    }
    int weakRefs = 0;
    int softRefs = 0;
    for (Iterator<Reference<Chunk>> i = allReferences.iterator(); i.hasNext();) {
      Reference<Chunk> ref = i.next();
      if (ref.get() == null) {
        continue;
      }
      if (ref instanceof WeakChunk) {
        weakRefs++;
      }
      if (ref instanceof SoftChunk) {
        softRefs++;
      }
    }
    log(allChunks.size() + " chunks, "
            + softRefs + " soft refs, "
            + weakRefs + " weak refs, "
            + getReadableMemorySize(usedMemory) + " used, "
            + getReadableMemorySize(Runtime.getRuntime().freeMemory()) + " free, "
            + getReadableMemorySize(Runtime.getRuntime().totalMemory()) + " total, "
            + getReadableMemorySize(Runtime.getRuntime().maxMemory()) + " max");
    if (loopDelay > 1) {
      Thread.sleep(loopDelay);
    }
    return (int)((100 * usedMemory) / maxMemory); // Return % of maxMemory being used.
  }

  public Leakling(String[] args) throws Exception {
    for (String arg : args) {
      if (arg.startsWith("--min-memory=")) {
        minMemory = Long.parseLong(arg.substring("--min-memory=".length()));
      } else if (arg.startsWith("--max-memory=")) {
        maxMemory = Long.parseLong(arg.substring("--max-memory=".length()));
      } else if (arg.startsWith("--min-chunk-size=")) {
        minChunkSize = Integer.parseInt(arg.substring("--min-chunk-size=".length()));
      } else if (arg.startsWith("--max-chunk-size=")) {
        maxChunkSize = Integer.parseInt(arg.substring("--max-chunk-size=".length()));
      } else if (arg.startsWith("--loop-delay=")) {
        loopDelay = Integer.parseInt(arg.substring("--loop-delay=".length()));
      } else if (arg.startsWith("--use-soft-references=")) {
        useSoftReferences = Boolean.parseBoolean(arg.substring("--use-soft-references=".length()));
      } else {
        throw new Exception("Unknown command line option...");
      }
    }
  }

  public void run() throws Exception {
    log("Mem test started...");

    while(true) {
      log("going up...");
      do {// First loop allocates memory up to the given limit in a pseudo-random fashion.
          // Randomized rate of allocations/frees is about 4:1 as per the 10>=8 condition.
        if (randomizer.nextInt(10) >= 8) {
          freeMem();
        } else {
          allocMem();
        }
      } while (statMem() < 90); // Repeat until 90% of the given mem limit is hit...

      log("going down...");
      do {// Now do the reverse. Frees are four times more likely than allocations are.
        if (randomizer.nextInt(10) < 8) {
          freeMem();
        } else {
          allocMem();
        }
      } while (usedMemory > minMemory);
    }
  }

  public static void main(String[] args) throws Exception {
    (new Leakling(args)).run();
  }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T19:58:21.607

首先，不要将终结器与参考混合。两者都会影响从内存中删除对象的速度，并且使用终结器可以执行的所有操作都可以使用适当的引用类型更好地完成。

其次，正如我所提到的，可能存在与使用引用相关的 gc 延迟。至少对于“常见的” gc 算法，弱/软引用的对象可能会在完全回收之前进行额外的 gc 运行。弱引用和软引用之间的本质区别在于，弱引用被积极地 gc'ed 并且软引用通常被“尽可能长地”持有。这很可能是你得到的。

当你使用弱引用的对象运行时，东西会随着你去清理，让你避免 OOME。

当您使用软引用的对象运行时，所有软引用的对象都会被*保留，直到您接近 limit*。然后，当内存变得紧张时，gc 会尝试开始释放软引用的对象，但它需要的时间太长（因为它可能需要多次 gc 传递才能完全回收内存）并且你最终会得到一个 OOME。

我对 G1 gc 只了解肤浅的知识，所以我不知道为什么它在那个场景中“有效”。

总之，软引用有点好，但由于回收延迟，它们并不总是像您希望的那样工作。此外，这是一篇[很棒的文章](http://www.kdgregory.com/index.php?page=java.refobj)，其中包含一些额外的有用细节。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-02T20:00:59.587

摆脱终结者。

对象终结发生在一个单独的线程中，直到终结完成后才能真正回收内存。在您的终结器中，您正在进行系统调用（输出），这将在该线程中引入等待。这很容易，当您处于内存限制时，任何终结器都会等待导致 OOM。

至于软引用与弱引用的区别：我们的引用将在次要收集期间被回收，而软引用不会（我没有检查过；可能是控制软引用生命周期的标志只会允许它存在在多个次要集合上）。您的终结器线程很可能能够跟上丢弃的弱引用对象。

# ajax - 这些额外的参数从何而来？

> ID：14128185
> 
> 赞同：0
> 
> 时间：2013-01-02T19:46:37.620
> 
> 标签：ajax, wcf

我在这里查看这篇 MSDN 文章：http: [//msdn.microsoft.com/en-us/library/bb924552.aspx](http://msdn.microsoft.com/en-us/library/bb924552.aspx)

在文件后面的代码中，他们创建了一个名为 CostOfSandwiches 的函数，该函数接受一个名为数量的 int 参数。

当他们引用函数客户端时，他们传递 4 个参数。我想知道这些额外参数是在哪里定义的，它们的用途等等。

这是服务器端代码：

```
public class CostService
{
    [OperationContract]
    public double CostOfSandwiches(int quantity)
    {
        return 1.25 * quantity;
    }

// Add more operations here and mark them with [OperationContract]
} 
```

这是客户端调用：

```
function Button1_onclick() {
   var service = new SandwichServices.CostService();
   service.CostOfSandwiches(3, onSuccess, null, null);
   }

function onSuccess(result){
   alert(result);
   } 
```

是否有一些可以传递的可选参数的标准列表？记录此内容的链接？

编辑：在与同事询问后，他给我发了这个。任何人都知道这是在哪里产生的以及由什么产生的？

```
 function Sys$Net$WebServiceProxy$_invoke(servicePath, methodName, useGet, params, onSuccess, onFailure, userContext) { 
        /// <summary locid="M:J#Sys.Net.WebServiceProxy._invoke" /> 
        /// <param name="servicePath" type="String"></param> 
        /// <param name="methodName" type="String"></param> 
        /// <param name="useGet" type="Boolean"></param> 
        /// <param name="params"></param> 
        /// <param name="onSuccess" type="Function" mayBeNull="true" optional="true"></param> 
        /// <param name="onFailure" type="Function" mayBeNull="true" optional="true"></param> 
        /// <param name="userContext" mayBeNull="true" optional="true"></param> 
        /// <returns type="Sys.Net.WebRequest" mayBeNull="true"></returns> 
        var e = Function._validateParams(arguments, [ 
            {name: "servicePath", type: String}, 
            {name: "methodName", type: String}, 
            {name: "useGet", type: Boolean}, 
            {name: "params"}, 
            {name: "onSuccess", type: Function, mayBeNull: true, optional: true}, 
            {name: "onFailure", type: Function, mayBeNull: true, optional: true}, 
            {name: "userContext", mayBeNull: true, optional: true} 
        ]); 
        if (e) throw e; 
        onSuccess = onSuccess || this.get_defaultSucceededCallback(); 
        onFailure = onFailure || this.get_defaultFailedCallback(); 
        if (userContext === null || typeof userContext === 'undefined') userContext = this.get_defaultUserContext(); 
        return Sys.Net.WebServiceProxy.invoke(servicePath, methodName, useGet, params, onSuccess, onFailure, userContext, this.get_timeout(), this.get_enableJsonp(), this.get_jsonpCallbackParameter()); 
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T20:28:53.240

当您将服务引用添加到“CostOfSandwiches.svc”时，您的同事发送给您的代码是由 Visual Studio 的工具生成的。

当 VS 生成您的客户端代理时，它会为您包装实际的服务调用，允许您控制服务的调用方式以及完成后的反应方式。

# css - 如何使用 Susy 将两个网格项目放在一起？

> ID：14128186
> 
> 赞同：0
> 
> 时间：2013-01-02T19:46:39.697
> 
> 标签：css, responsive-design, susy-compass

我有一个用[Susy](http://susy.oddbird.net/)创建的 CSS 网格，有两个边和一个内容部分，如下所示：

```
|1| |2| |content|
        |content|
        |content| 
```

`push()`源顺序是 content-1-2，但上面使用and很容易`pull()`。

在较窄的屏幕上，我希望边线彼此上方，如下所示：

```
|1| |content|
|2| |content|
    |content| 
```

我可以将它们拉到同一列，但它们只会重叠。我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T22:47:29.640

我不会使用推/拉来实现您的基本安排。相反，只需将您的内容设置为“欧米茄”，它就会向右浮动，留出空间让边线 1 和 2 自动堆叠或浮动。只要有可能，将对象保持在自然“流动”中是一个非常好的主意，在这种情况下它可以解决您的问题。:)

# radio-button - joomla 2.5 注册表单中的单选按钮

> ID：14128188
> 
> 赞同：0
> 
> 时间：2013-01-02T19:46:44.407
> 
> 标签：radio-button, joomla2.5, registration

我使用本教程[链接为 Joomla 2.5 制作了一个用户配置文件插件](http://www.inmotionhosting.com/support/edu/joomla-25/user-profile/copy-user-profile-plugin)

它很好用，但我需要添加的自定义字段是单选按钮而不是文本，因为它是“男性/女性”选项。

这是 /plugins/user/profile10/profiles/profile.xml 中的样子：

```
 <field
            name="gender"
            type="text"
            id="gender"
            description="Male or Female?"
            filter="string"
            label="Male or Female?"
            message="PLG_USER_PROFILE_FIELD_WEB_SITE_MESSAGE"
            size="30"
        /> 
```

和插件/用户/profile10/profile10.xml：

```
<field name="register-require_gender" type="list"

                description="Your gender"
                label="Male or female?"
            >
                <option value="2">JOPTION_REQUIRED</option>
                <option value="1">JOPTION_OPTIONAL</option>
                <option value="0">JDISABLED</option>
</field> 
```

我注意到行***type="text"***但我不确定我将其替换为什么以及将这两个选项放在哪里。

有谁知道该怎么做？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T20:25:20.007

根据[标准表单字段类型](http://docs.joomla.org/Standard_form_field_types)的 Joomla 文档，您想使用[Radio](http://docs.joomla.org/Radio_form_field_type)类型。在这种情况下，类型将为“radio”，您将为指定的每个值添加选项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-20T03:11:56.217

这是我使用的代码：

```
<field
  name="gender"
  type="radio"
  id="gender"
  label="PLG_USER_TESTPROFILE_FIELD_GENDER_LABEL"
  default="m">
  <option value="m">Male</option>
  <option value="f">Female</option>
</field> 
```

# d3.js - 如何在 D3 的返回语句中插入换行符

> ID：14128195
> 
> 赞同：1
> 
> 时间：2013-01-02T19:47:11.887
> 
> 标签：d3.js, line-breaks

我有以下代码 d3 代码：

```
tooltip.select("#popupCount").text(function(){

if (varToGraph == "rough_top_cost"){
return " " + textValue + ": $" + addCommas(allCountyData[countyName][varToGraph]) + "\n" +
"Count:"
}}) 
```

我希望字数出现在新行上。但是，上面的代码导致所有内容都在一行上。我怎样才能让输出在两行上？

谢谢，啊

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T23:53:00.190

未经测试的答案，但 FWIW 这可能会接近；

```
tooltip.select("#popupCount").html(function(){
if (varToGraph == "rough_top_cost"){
return " " + textValue + ": <br/>$" + addCommas(allCountyData[countyName][varToGraph]) + "\n" +
"Count:"
}}) 
```

[从D3 Tips and Tricks](http://www.d3noob.org/p/d3noob-downloads.html)第 80 页提供的示例开始工作，其中包括带有换行符的工具提示。

使用 html 元素而不是允许换行符的文本。查看文档以获取更多详细信息。

# ruby-on-rails - rake db:migrate 错误参数数量错误（5 比 4）

> ID：14128196
> 
> 赞同：0
> 
> 时间：2013-01-02T19:47:13.660
> 
> 标签：ruby-on-rails, migration

这是我的迁移文件：

```
class AddSeoMetaInfoToArticles < ActiveRecord::Migration
  def self.up
    add_column :articles, :seo_title, :string, { :default => "", :null => false }
    add_column :articles, :seo_description, :string, { :default => "", :null => false }
    add_column :articles, :seo_keywords, :string, :string, { :default => "", :null => false }
  end

  def self.down
    remove_column :articles, :seo_keywords
    remove_column :articles, :seo_description
    remove_column :articles, :seo_title
  end
end 
```

当我尝试运行“rake db:migrate”时，出现以下错误

```
$ rake db:migrate
AddSeoMetaInfoToArticles: migrating =======================================
-- add_column(:articles, :seo_title, :string, {:default=>"", :null=>false})
   -> 0.0341s
-- add_column(:articles, :seo_description, :string, {:default=>"", :null=>false})
   -> 0.0100s
-- add_column(:articles, :seo_keywords, :string, :string, {:default=>"", :null=>false})
rake aborted!
An error has occurred, this and all later migrations canceled:

wrong number of arguments (5 for 4)

Tasks: TOP => db:migrate
(See full trace by running task with --trace) 
```

我对rails比较陌生，我不确定我做错了什么。这是 Rails 3.0.9 和 Postgres 数据库（如果有区别的话）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T19:52:03.497

```
add_column :articles, :seo_keywords, :string, :string, { :default => "", :null => false } 
```

有`:string`两次，所以你最终会传递 5 个参数而不是 4 个。

您可能还想考虑编写您的迁移`change`- 您的迁移相当于

```
class AddSeoMetaInfoToArticles < ActiveRecord::Migration
  def change
    change_table :articles do |t|
      t.string :seo_title, :default => "", :null => false
      t.string :seo_description, :default => "", :null => false
      t.string :seo_keywords, :default => "", :null => false
    end
  end
end 
```

我觉得这更容易。它还有一个优点，您可以传递 :bulk => true `change_table`，它将所有 3 列添加合并到 1 个 alter table 语句中，这通常要快得多。

当然，这两种方式都行得通。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T19:51:47.670

您`:string`在这一行中给出了两次参数：

```
 add_column :articles, :seo_keywords, :string, :string, { :default => "", :null => false } 
```

# python - 用于播放不同声音的音频的python线程，似乎没有正确锁定，并且在线程调用后返回函数的开头

> ID：14128199
> 
> 赞同：1
> 
> 时间：2013-01-02T19:47:20.790
> 
> 标签：python, multithreading, locks

我正在研究根据键盘输入从计算机播放声音的代码。声音存储为 wav 文件并使用 PyAudio 播放。然而，两次连续的键盘敲击播放的声音之间的延迟太慢了，所以我试图添加线程来加快 I/O 时间。但是，音频现在发出沙哑的声音，我认为线程上的锁不起作用。以下是相关代码：

```
while threading.activeCount() < NUM_THREADS:
   message, delta_time = midi_in.get_message()
   if message:
    if message[2] == 0:
     continue
    elif message and (str(message[1]) == "108" or str(message[1]) == "107"):
     break
    else:
     t = threading.Thread(target=play, args=(message,))
     lock = threading.Lock()

     lock.acquire()
     t.start()
     lock.release()

def play(message):

  WAVE_FILENAME = "final"+str(message[1]) + '.wav'
  CHUNK = 1024
  wf = wave.open(WAVE_FILENAME)
  p = pyaudio.PyAudio()

  stream = p.open(format=p.get_format_from_width(wf.getsampwidth()),
                 channels = wf.getnchannels(),
             rate = wf.getframerate(),
                 output = True)
  data = wf.readframes(CHUNK)
  while data != '':
   stream.write(data)
   data = wf.readframes(CHUNK)

  stream.stop_stream()
  stream.close()

  p.terminate() 
```

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T19:55:35.643

> 我认为线程上的锁不起作用

原因是以下创建了一个新锁：

```
lock = threading.Lock() 
```

换句话说，您没有在循环的迭代中使用相同的锁；每次迭代都有自己的锁。因此，不会发生同步。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T19:57:05.493

我假设您必须将锁传递给您的工作线程，如下所示：

```
def play(message, lock):
    lock.acquire()
    # do something with a restricted ressource 
    lock.release() 
```

然后启动一个线程并传入锁：

```
t = threading.Thread(target=play, args=(message, lock)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T20:08:38.090

# c - C 大型二维数组创建

> ID：14128209
> 
> 赞同：2
> 
> 时间：2013-01-02T19:48:18.190
> 
> 标签：c, arrays, multidimensional-array, malloc

****C新手！****

我在 Windows 7（64 位版本）上运行 Dev-C++ 4.9.9.2 我的电脑有 39GB 的物理内存。

我正在尝试创建一个大型二维数组。我已经创建了代码，告诉我它有多少维度，以及每个维度中有多少项目。

举个例子，假设数组是二维的：100 万条长，6 条宽：

```
[1,2,3,4,5,6],
[1,2,3,4,5,6],
[1,2,3,4,5,6],
...and on to one million items. 
```

我试过了：

```
float MyArray[1000000][6]; 
```

但这会使 Dev-C 崩溃。当我尝试初始化一个大于：

```
float Myarray[86486][6]; 
```

我想我正在经历一个“堆栈溢出”，这让我很开心，因为这就是这个网站的名称。

我一直在挖掘，看来我需要使用 malloc 来帮助 C 了解要保留多少内存。我已经看到了如何使用它来设置一维数组的好例子，但**我非常感谢如何使用二维数组设置它的示例代码。**

我在这里看到了这个例子：[Initializing a large two dimensional array in C](https://stackoverflow.com/questions/9813882/initializing-a-large-two-dimensional-array-in-c)

但恐怕我对 c 语言太初学者了，无法理解简短的解释。作为背景：我来自 python，你可以通过声明 MyArray=[] 来创建一个（几乎）任何大小或维度的数组，然后用你想要的任何内容填充它。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T20:04:44.663

是的，您正在遇到单个堆栈帧大小的限制。

这是一种方法：

```
#include <stdlib.h>
...
int main(void)
{
  /**
   * declare myArray as a *pointer* to a 6-element array of float
   */
  float (*myArray)[6];
  /**
   * dynamically allocate space for 1 million objects of type
   * "6-element array of float"
   */
  myArray = malloc(sizeof *myArray * 1000000);
  ...
  myArray[i][j] = ...;
} 
```

为什么这样有效：

下标操作`a[i]`被解释为`*(a + i)`; 也就是说，我们计算（数组的基地址）之后的第`i`' 个元素（**不是字节）的地址并取消引用它。**`a`由于`myArray`是指向 的 6 元素数组的指针`float`，`myArray[i]`因此为我们提供了after的第`i`' 个 6 元素数组的地址。`float``myArray`

这种方法的优点是内存分配在一个连续的块中，您可以`myArray`像任何二维数组一样下标。

# jquery - 客户端文件大小验证

> ID：14128211
> 
> 赞同：0
> 
> 时间：2013-01-02T19:48:32.380
> 
> 标签：jquery, asp.net, asp.net-mvc, asp.net-mvc-4

我想在客户端执行文件大小验证。我非常接近这一点。我实际上验证本身工作正常，但是当我点击提交时消息被隐藏了。

```
$(document).ready(function () {
    $(".fileToUpload").change(function () {
        validate_recipe_image_upload(this);
    });
    $("form").submit(function () {
        $.each($(this).find(".fileToUpload"), function(i, v) {
            validate_recipe_image_upload(this);
        });
    });
});

String.prototype.format = function() {
    var s = arguments[0];
    for (var i = 0; i < arguments.length - 1; i++) {
        var reg = new RegExp("\\{" + i + "\\}", "gm");
        s = s.replace(reg, arguments[i + 1]);
    }

    return s;
};

function validate_recipe_image_upload(field) {
    var isValid = validate_image_size(field) &&
        validate_image_format(field);

    if (isValid)
        remove_error_message(field);
}

function validate_image_format(field) {
    var ext = $(field).val().split('.').pop().toLowerCase();
    var acceptabelExtensions = $(field).data("acceptableFormats").toLowerCase().split(',');
    if ($.inArray(ext, acceptabelExtensions) == -1) {
        var msg = String.prototype.format($(field).data("errorMsgFileFormat"), acceptabelExtensions.join(', '));
        append_error_message(field, msg);
        return false;
    } else {
        return true;
    }
}

function validate_image_size(field) {
    if (field.files[0].size > $(field).data("maxSize")) {
        append_error_message(field, $(field).data("errorMsgMaxSize"));
        return false;
    } else {
        return true;
    }
}

function append_error_message(field, msg) {
    var f = $(field);
    var sib = f.siblings();
    $.each(sib, function (i, v) {
        var name1 = $(v).data("valmsgFor");
        var name2 = f.attr("name");
        if (name1 == name2) {
            $(v).attr("class", "field-validation-error");
            $(v).text(msg);
            return;
        }
    });
}

function remove_error_message(field) {
    var f = $(field);
    var sib = f.siblings();
    $.each(sib, function (i, v) {
        var name1 = $(v).data("valmsgFor");
        var name2 = f.attr("name");
        if (name1 == name2) {
            $(v).attr("class", "field-validation-valid");
            return;
        }
    });
} 
```

在cshtml中：

```
<div class="editor-label">
            @Html.LabelFor(model => model.Photo)
            @*<label for="file">Filename:</label>*@
        </div>
        <div class="editor-field">
            <input type="file" id="Photo" name="Photo" accept="image/*" class="fileToUpload" data-error-msg-max-size="--Max size is 1MB" data-error-msg-file-format="--Only image files acceptable: {0}." data-max-size="1500000" data-acceptable-formats="jpg,jpeg,gif,png"/>
            @Html.ValidationMessageFor(model => model.Photo)
        </div> 
```

基本上，当我选择一个大于 1MB 的文件时，我会收到类似于 MVC 中原始文件的错误消息。到目前为止一切顺利，但是当我单击提交按钮时，此消息会消失（因为它对 MVC 验证器有效）。

有一个聪明的技巧来处理这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T19:54:56.967

如果您`false`从表单提交侦听器返回，它将阻止表单提交：

```
$("form").submit(function () {
    var isValid = true;
    $(".fileToUpload", this).each(function(i, v) {
        isValid = isValid && validate_recipe_image_upload(this);
    });
    return isValid;
});

function validate_recipe_image_upload(field) {
    var isValid = validate_image_size(field) &&
        validate_image_format(field);

    if (isValid)
        remove_error_message(field);

    return isValid;
} 
```

# php - 如何在 Symfony 2.1 中自定义实体字段类型，使其使用特定的存储库方法？

> ID：14128214
> 
> 赞同：0
> 
> 时间：2013-01-02T19:49:22.653
> 
> 标签：php, forms, symfony, repository, entity

我是 symfony (2.1) 的新手，我有一个简单的问题，我想改变“实体字段类型”在表单中的选择标签中生成选择列表的方式。

在我的 categoryType.php 中，在 buildForm 方法中我有这样的东西：

```
$builder
   ->add('parent', 'entity', array(
   'class' => 'TestAdvBundle:Category',
   'property' => 'name',
   'label'  => 'label.parent',
))
; 
```

这很好用，所有保存在 db 中的 Category 实体都以生成的形式出现在 select 标记中。但我想做的是稍微改变这个生成的选择列表。实际上，我想要一个代表“根类别”的列表中的“假”选择，并且我不希望在此处列出我编辑的对象（此字段是父 ID，它指向与编辑对象相同的对象类型等。这个字段是我编辑的类别的父类别，所以实际上我不希望能够选择 self 作为父类别）。

我猜这个“实体字段类型”使用`findAll()`存储库方法来获取它的结果。所以我做了特定的`findAllForList()`方法，我返回想要的数组。但是我找不到告诉“实体字段类型”使用我的存储库方法而不是`findAll()`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T21:16:18.020

您可以使用实体字段类型提供的 Querybuilder 选项和 empty_field 方法。 [http://symfony.com/doc/master/reference/forms/types/entity.html#query-builder](http://symfony.com/doc/master/reference/forms/types/entity.html#query-builder)

查询构建器在“对实体使用自定义查询”下的链接 URL 中进行了说明

# jquery - 在议程周+完整日历的一个单元格上的悬停效果

> ID：14128222
> 
> 赞同：6
> 
> 时间：2013-01-02T19:49:41.213
> 
> 标签：jquery, css, hover, fullcalendar, timeslots

嗨，我正在使用 Adam Shaw 的 FullCalendar ( [http://arshaw.com/fullcalendar/](http://arshaw.com/fullcalendar/) )。我正在使用一个月和议程周视图。当用户将鼠标悬停在月视图中的日期或议程周视图中的时间段上时，我想设置悬停效果。我试图改变css如下：

```
.fc-widget-content:hover {
        background-color: red;
    } 
```

这适用于月视图。附加文件 ![悬停在 1 月 16 日](../Images/0b8cda55def78463cd274308a3103891.png)

但是，当我只需要突出显示一个时间段时，相同的代码会选择议程周视图中的整行。

下面的示例图片显示了每天突出显示的整个下午 1:00 时段，而不是鼠标光标所在的星期三 02-01 中的时段。

![悬停在整行而不是一个时间段](../Images/920674ea0d10f2c254aad8999b57464c.png)

任何想法如何实现这一目标。

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T09:11:47.457

您并不孤单：FullCalendar 的许多用户希望看到开箱即用支持的单个时间段的突出显示。Google Code 上有一个[问题](http://code.google.com/p/fullcalendar/issues/detail?id=144)。

该问题源于 2009 年 10 月，因此我们似乎不应该抱有太大希望，但一些用户提出了不同的解决方法。其中之一在我的代码中成功运行，因此可能值得一试。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T20:46:02.693

this is not something that can be achieved with just css. the issue is that the week grid is being created by superimposing two tables together, both with no background, therefore giving the impression of a grid, but not a true grid. the lengthwise portion of the grid is the higher z-index, so it will always appear on top, and therefore no hover event will ever fire for the height. I played around with ways to trick the user in to seeing the box as highlighted, however, without the ability to know where you are vertically in the grid, it's not really possible. it may be something that could be done with jquery, but i would think the effort involved would not be worth it.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-21T18:43:20.730

将此代码粘贴到 $('#calendar').fullCalendar( ... ); 之后 这将在表中创建附加 TD :)

```
$("table.fc-agenda-slots th").each(function () {
    $(this).width(50);
});
$("table.fc-agenda-slots td.fc-widget-content").each(function () {
    $(this).width(($("table.fc-agenda-days thead th.fc-col0").width()));
    $(this).after("<td class=\"fc-widget-content\"><div style=\"position:relative\"></div></td>");
    $(this).after("<td class=\"fc-widget-content\" style=\"width:" + $("table.fc-agenda-days thead th.fc-col5").width() + "px\"><div style=\"position:relative\"></div></td>");
    $(this).after("<td class=\"fc-widget-content\" style=\"width:" + $("table.fc-agenda-days thead th.fc-col4").width() + "px\"><div style=\"position:relative\"></div></td>");
    $(this).after("<td class=\"fc-widget-content\" style=\"width:" + $("table.fc-agenda-days thead th.fc-col3").width() + "px\"><div style=\"position:relative\"></div></td>");
    $(this).after("<td class=\"fc-widget-content\" style=\"width:" + $("table.fc-agenda-days thead th.fc-col2").width() + "px\"><div style=\"position:relative\"></div></td>");
    $(this).after("<td class=\"fc-widget-content\" style=\"width:" + $("table.fc-agenda-days thead th.fc-col1").width() + "px\"><div style=\"position:relative\"></div></td>");
}); 
```

这是悬停的样式 css：

```
table.fc-agenda-slots td.fc-widget-content
{
    border-right: 1px #DDD solid;
}
table.fc-agenda-slots td.fc-widget-content:hover
{
    background-color: #F1F1F1;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-21T14:11:28.827

在日历加载后添加：

```
$("table.fc-agenda-slots td.fc-widget-content div").each(function () {
                $(this).html("&lt;table cellspacing=\"0\" style=\"width:100%\"&gt;&lt;tr&gt;&lt;td&gt;&lt;div&gt;&lt;/div&gt;&lt;/td&gt;&lt;td&gt;&lt;div&gt;&lt;/div&gt;&lt;/td&gt;&lt;td&gt;&lt;div&gt;&lt;/div&gt;&lt;/td&gt;&lt;td&gt;&lt;div&gt;&lt;/div&gt;&lt;/td&gt;&lt;td&gt;&lt;div&gt;&lt;/div&gt;&lt;/td&gt;&lt;td&gt;&lt;div&gt;&lt;/div&gt;&lt;/td&gt;&lt;td&gt;&lt;div&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;");
            }); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-08-07T17:20:38.413

也许 css3 属性`pointer-events:none`可以帮助你。你可以在这里看到一个演示：http: [//jsfiddle.net/rNWpz/](http://jsfiddle.net/rNWpz/)

**HTML**

```
<div id="a"></div>
<div id="b"></div> 
```

**CSS**

```
#a {
    border:1px dashed red;
    width:100px;
    height:100px;
}

#b {
    border:1px dashed blue;
    width:100px;
    height:100px;
    position:absolute;
    top:0;
    left:0;
    pointer-events:none;
} 
```

**jQuery**

```
$('#a').hover(function() {
    $(this).css('backgroundColor','red');
  },
  function () {
    $(this).css('backgroundColor','white');
  }
); 
```

# c# - 输入字符

> ID：14128223
> 
> 赞同：0
> 
> 时间：2013-01-02T19:49:44.603
> 
> 标签：c#, input, int

问题是我必须制作一个控制台应用程序，在其中输入一个数字并写出符号“|” 我插入了多少。例如，如果我插入数字 6，它会写出 ||||||。它一直在询问，直到我插入 0 并关闭。到目前为止，输入是这样的：

```
int input;

Console.Write("\n\n Insert an number ---> ");
input = Convert.ToInt32(Console.ReadLine()); 
```

我尝试过使用 char 数组，但没有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T19:55:23.183

实际上[有一个构造](http://msdn.microsoft.com/en-us/library/xsa4321w.aspx)函数用给定的`string`字符初始化一个字符串一定次数：

`string s = new string('|', 10);`

`s`将是字符串`"||||||||||"`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T19:56:36.463

循环是如此 2012 :)

```
using System;
using System.Linq;

internal class Program
{
  private static void Main(string[] args)
  {
    Enumerable.Range(0, Int32.MaxValue)
      .Select(i => Int32.TryParse(Console.ReadLine(), out i) ? i : -1)
      .Where(i => i >= 0)
      .TakeWhile(i => i > 0)
      .Select(i => {
         Console.WriteLine(String.Join("", Enumerable.Repeat("|", i)));
         return 0;})
      .Count();
  }
} 
```

描述（即使答案很不严肃）：

*   `Enumerable.Range`是允许半无限（正如 Chris Sinclair 指出的那样，它只有 2,147,483,647 次）可以在单个语句中枚举大部分代码。
*   首先`Select`逐行读取输入并将有效输入转换为整数，其余为 -1（请注意，在此示例中，-1 是“无效输入”的可能值，通常会返回`Tuple<int, bool>`或`int?`表示无效值
*   `Where`过滤掉“无效”输入（正确输入的负数以及之前报告为 -1 的所有非数字`Select`）。
*   `TakeWhile`为 0 提供终止条件。
*   第二次`Select`打印结果。请注意，要从同一字符的多个副本构造字符串，应该使用正确的`new String("|", count)`构造函数，但它不那么有趣。
*   finally`Count`强制立即迭代查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T19:58:30.327

伪代码

```
 is read line a number
   until read line is 0
       for 1 to the number
           print |
     is read line a number
     if not a number go back at asking the number saying it is not a number
 if not a number go back at asking the number saying it is not a number 
```

现在有乐趣做你的作业

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T20:06:37.407

两个你应该知道的基本概念

**for循环：**

```
for(int i=0; i<input; i++)
{
    // do stuff
} 
```

这是做某事`input`次数的常见模式，因此如果`input`等于`6`，则它将执行`//do stuff`6 次。

* * *

**控制台.Write**

```
Console.Write('|'); 
```

`Console.Write`将文本写入控制台**而不**在末尾添加新行。

* * *

我相信您可以以某种方式组合其中一些语言功能来满足您的要求。

# mysql - MySQL 选择、加入、比较日期失败

> ID：14128225
> 
> 赞同：0
> 
> 时间：2013-01-02T19:49:47.003
> 
> 标签：mysql

我有这两张表：

```
DateRanges

some_id   start_date    end_date
---------------------------------
1         2012-12-01   2012-12-15
1         2013-01-01   2013-01-15
3         2013-01-03   2013-01-10

Items

id      name
----------------
1     Some name
2     Other name
3     So on... 
```

我试图实现的是为`Items`表中的每个元素获取最大的`start_date`（忽略该项目的较小日期/日期范围）并检查当前日期是否在该范围内，就像在下一个表中一样（假设今天的 02 2013 年 1 月）：

```
id       name          TodayIsInTheRange
---------------------------------------------
1      Some name             true
2      Other name            false
3      So on...              false 
```

我试图通过下一个查询获取第三张表：

```
SELECT A.*, (B.`start_date` <= CURRENT_DATE AND CURRENT_DATE <= B.`end_date`) AS `TodayIsInTheRange`                                            
FROM `Items` as A                                                
LEFT JOIN `DateRanges` as B ON                                            
A.id = B.some_id
SORT BY B.`end_date` DESC 
```

但是通过这个查询，我的项目会重复自己，因为我有两个`DateRanges`相同项目的记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T20:14:20.617

我使用 SQL Server，但我认为这样的事情应该非常接近：

```
SELECT 
    I.Id, 
    I.Name,
    (DR.start_date <= CURRENT_DATE AND CURRENT_DATE <= DR.end_date) AS `TodayIsInTheRange`
FROM `Items` AS I
    LEFT JOIN 
        (SELECT Some_Id, MAX(Start_Date) as MaxStartDate 
        FROM `DateRanges`
        GROUP BY Some_ID) AS HDR ON I.Id = HDR.Some_Id
    LEFT JOIN `DateRanges` AS DR ON HDR.Some_Id = DR.Some_Id AND HDR.MaxStartDate = DR.Start_Date 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T19:54:07.840

```
select * from items join date_ranges dr0 on items.id = dr0.some_id
  where start_date = 
       (select max(start_date) from date_ranges dr1 where dr0.some_id = dr1.some_id); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T20:17:44.840

```
SELECT 
  a.*, 
  ( b.start_date <= CURRENT_DATE 
  AND CURRENT_DATE <= b.end_date ) AS TodayIsInTheRange 
FROM 
    Items AS a 
  LEFT JOIN 
    ( SELECT some_id, MAX(start_date) AS start_date
      FROM DateRanges
      GROUP BY some_id
    ) AS m
    JOIN 
      DateRanges AS b 
        ON b.some_id = m.some_id
      ON a.id = m.some_id
ORDER BY b.end_date DESC ; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T20:04:35.337

尝试使用`GROUP BY`和`MAX`功能。第一个为每个 item.id 仅提供一行，第二个告诉您范围内是否至少有一个日期

```
SELECT A.*, MAX(B.`start_date` <= CURRENT_DATE AND CURRENT_DATE <= B.`end_date`) AS `TodayIsInTheRange`                                            
FROM `Items` as A                                                
LEFT JOIN `DateRanges` as B ON                                            
A.id = B.some_id
GROUP BY A.id
ORDER BY B.`end_date` DESC 
```

# jquery - SlideToggle 独立切换多个元素

> ID：14128232
> 
> 赞同：0
> 
> 时间：2013-01-02T19:50:14.163
> 
> 标签：jquery, slidetoggle

我需要一些有关 SlideToggle 的帮助。

HTML：

```
<ul>
    <li>
        <figure class="left"><img src="images/slider/img3.jpg" alt="" width="270" height="152" /><a href="#" class="image-overlay"></a></figure>
        <div class="meta">
            <h2>Superior Double Room</h2>
            <p>Prices are per room<br />20 % VAT Included in price</p>
            <p>Non-refundable<br />Full English breakfast $ 24.80 </p>
            <a href="javascript:void(0)" title="more info" class="more-info">+ more info</a>
        </div>
        <div class="room-information">
            <div class="row">
                <span class="first">Max:</span>
                <span class="second"><img src="images/ico/person.png" alt="" /><img src="images/ico/person.png" alt="" /></span>
            </div>
            <div class="row">
                <span class="first">Price:</span>
                <span class="second">$ 55</span>
            </div>
            <div class="row">
                <span class="first">Rooms:</span>
                <span class="second">01</span>
            </div>
            <a href="#" class="gradient-button" title="Book">Book</a>
        </div>
        <div class="more-information">
            <p>Stylish and individually designed room featuring a satellite TV, mini bar and a 24-hour room service menu.</p>
            <p><strong>Room Facilities:</strong> Safety Deposit Box, Air Conditioning, Desk, Ironing Facilities, Seating Area, Heating, Shower, Bath, Hairdryer, Toilet, Bathroom, Pay-per-view Channels, TV, Telephone</p>
            <p><strong>Bed Size(s):</strong> 1 Double </p>
            <p><strong>Room Size:</strong>  16 square metres</p>
        </div>
    </li>

        <li>
        <figure class="left"><img src="images/slider/img3.jpg" alt="" width="270" height="152" /><a href="#" class="image-overlay"></a></figure>
        <div class="meta">
            <h2>Superior Double Room</h2>
            <p>Prices are per room<br />20 % VAT Included in price</p>
            <p>Non-refundable<br />Full English breakfast $ 24.80 </p>
            <a href="javascript:void(0)" title="more info" class="more-info">+ more info</a>
        </div>
        <div class="room-information">
            <div class="row">
                <span class="first">Max:</span>
                <span class="second"><img src="images/ico/person.png" alt="" /><img src="images/ico/person.png" alt="" /></span>
            </div>
            <div class="row">
                <span class="first">Price:</span>
                <span class="second">$ 55</span>
            </div>
            <div class="row">
                <span class="first">Rooms:</span>
                <span class="second">01</span>
            </div>
            <a href="#" class="gradient-button" title="Book">Book</a>
        </div>
        <div class="more-information">
            <p>Stylish and individually designed room featuring a satellite TV, mini bar and a 24-hour room service menu.</p>
            <p><strong>Room Facilities:</strong> Safety Deposit Box, Air Conditioning, Desk, Ironing Facilities, Seating Area, Heating, Shower, Bath, Hairdryer, Toilet, Bathroom, Pay-per-view Channels, TV, Telephone</p>
            <p><strong>Bed Size(s):</strong> 1 Double </p>
            <p><strong>Room Size:</strong>  16 square metres</p>
        </div>
    </li>

</ul> 
```

查询：

```
$(document).ready(function () {
$(".more-information").slideUp();
        $(".more-info").click(function() {
        var txt = $(".more-information").is(':visible') ? '+ more info' : ' - less info';
        $(".more-info").text(txt);
        $(".more-information").slideToggle("slow");
    });
}); 
```

通过单击“更多信息”链接，我需要打开“更多信息”div。现在它一次全部切换，我怎样才能实现独立切换？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T19:55:11.147

给你”[小提琴](http://jsfiddle.net/jvVNX/1)

JavaScript：

```
$(document).ready(function () {
$(".more-information").slideUp();
$(".more-info").click(function() {
    var moreinformation = $(this).closest("li").find(".more-information");
        var txt = moreinformation.is(':visible') ? '+ more info' : ' - less info';
        $(this).text(txt);
        moreinformation.slideToggle("slow");
    });
});​ 
```

因为 roXon 要求：

```
moreinformation.stop(true, true).slideToggle("slow"); 
```

快速连续多次单击链接时将防止坏事发生。

# asp.net - 显示与 loginview 相同的内容

> ID：14128238
> 
> 赞同：0
> 
> 时间：2013-01-02T19:50:38.457
> 
> 标签：asp.net

我有一个启用了用户登录的 asp.net 网页。在我的 loginview 控制器中，我有我的匿名和登录代码。是否可以在两者中使用相同的代码，但例如只需在登录视图中添加一个按钮。我想要做的就是当用户登录时显示相同的信息，除非登录时显示一个按钮，当用户匿名时不显示。任何帮助将不胜感激，谢谢。我已经尝试将相同的代码放入匿名和登录中，但我收到一条错误消息，提示框已包含该名称的定义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T19:59:30.703

您可以尝试在代码中重用模板，因为您可以创建自己的模板实例，但这确实不值得。最好只复制标记并更改 ID。我知道这很痛苦...

您会遇到命名冲突，因为它将模板实例定义为单个实例，并且每个实例都在控制树中实现（即使它可能未呈现）。

# java - 是否可以用 Java Swing 程序替换鼠标？

> ID：14128241
> 
> 赞同：3
> 
> 时间：2013-01-02T19:50:51.670
> 
> 标签：java, swing

程序员新年快乐！

想象一下在带有两只鼠标的计算机上运行的两人 Java Swing 游戏。是否可以为每个玩家分配一只鼠标并依次锁定每只鼠标然后交换活动鼠标？两只老鼠将共享相同的 MouseListener 方法。

我看不到有关这种可能性的互联网参考，但我觉得这种情况以前曾被访问过。

乔治FK

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T20:03:24.863

问题在于底层操作系统层的设备处理。大多数系统将输入合并到一个虚拟鼠标中，这就是为什么您可以同时激活触控板和 USB 鼠标的原因。当然，当您尝试同时使用两者时，会导致指针移动发生冲突。

我认为您实现这一点的方式是通过直接与特定鼠标设备对话的本机方法。因此，您将使用其中两个对象来轮询每个鼠标并控制屏幕上的游戏控件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T20:07:05.533

这是可能的，但当然不是在纯 Java 中，因此您必须使用一些[JNI](http://en.wikipedia.org/wiki/Java_Native_Interface)。

查看[ManyMouse](http://icculus.org/manymouse/)。

> ManyMouse 是一个库，它将对多个鼠标输入的处理抽象为一个微型的跨平台 API。它旨在用于具有独特输入需求的游戏和非传统应用程序。在大多数平台上，它至少可以使所有 USB 鼠标可用，但在许多情况下，也可以使串行鼠标和内置笔记本电脑触控板可用。

这是源代码和所有内容，由于某些或其他原因，它在实际网站上不可用：

*   [http://hg.icculus.org/icculus/manymouse/file/b9b3d0efe3c8/](http://hg.icculus.org/icculus/manymouse/file/b9b3d0efe3c8/)

*   [http://hg.icculus.org/icculus/manymouse/file/b9b3d0efe3c8/contrib/java](http://hg.icculus.org/icculus/manymouse/file/b9b3d0efe3c8/contrib/java)（java的东西）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T20:16:14.490

一个有趣的问题。整个[MSDN 鼠标输入手册](http://msdn.microsoft.com/en-us/library/ff468874%28v=vs.85%29.aspx)没有提到控制信号来自哪个鼠标。

当然，它有 BIOS 命令，但因此您的代码仅适用于特定计算机。

所以，如果你想要一个通用的解决方案，你应该编写自己的“双鼠标驱动程序”。或者在网上找这样的。

# php - 使用 PHP 和多个 HTML 下拉框从多个表（包括“id”参考表）中查询 MySQL 结果

> ID：14128242
> 
> 赞同：1
> 
> 时间：2013-01-02T19:50:58.093
> 
> 标签：php, mysql, drop-down-menu, html-table

表结构：

测试链接

*   ID
*   来源
*   投影
*   客户编号
*   质量保证
*   stg
*   产品
*   用户名
*   密码

项目

*   ID
*   项目名
*   客户编号
*   项目介绍
*   专案经理
*   出价
*   醋栗
*   日期
*   目标发布日期
*   地位

产品

*   ID
*   产品名称
*   项目经理用户ID

测试链接产品

*   ID
*   testlinksid
*   产品ID

客户

*   ID
*   客户名称
*   客户经理

我的目标是创建一个系统来输入测试链接，并使用户能够根据他们可以在一系列下拉框中选择的多个选项来拉取适当的测试链接。

我已经设置了 PHP 和 HTML 页面以将数据输入到上面列出的表格中。现在我正在尝试设置将数据拉入网页所需的 MySQL 查询和 PHP。

我希望用户能够根据 1）projects.id 2）testlinks.source 3）products.id 4）clients.id 查询结果

这些将从 4 个单独的下拉框中选择

我很容易能够根据 projects.id 和 testlinks.source 成功提取结果，因为这两个表有共同的“projectid”。但是，我现在在基于“productid”提取结果时遇到问题，因为产品与测试链接相关联，而不是与项目相关联。'testlinksproducts' 表处理产品与 testlinks 的关联，但我不知道如何将其添加到查询中，因为当我运行查询时，我得到的行重复了几次并且没有达到我想要的结果。

这是我的 PHP 文件，它用于基于 project.id 和 testlinks.source 拉取测试链接——

```
$query = "SELECT testlinks.id,
                 testlinks.source,
                 testlinks.projectid,
                 testlinks.clientid,
                 testlinks.qa,
                 testlinks.stg, 
                 testlinks.prod, 
                 testlinks.username,
                 testlinks.password, 
                 projects.id, 
                 projects.projectname 
          FROM testlinks , projects 
          WHERE testlinks.projectid = projects.id 
            AND (testlinks.projectid='$projectid' 
                 OR testlinks.source='$source')
          ;"; 

$result = mysql_query($query) or die(mysql_error()); 

echo "<table class=\"zebra\">"; 
echo "<thead><tr>
    <th>ID</th>
    <th>Source</th>
    <th>Project Name</th>
    <th>QA</th>
    <th>STG</th>
    <th>Prod</th>
    </tr></thead>";
while($row = mysql_fetch_array($result))
{
    echo "<tr>"; 
    echo "<td>".$row['id']."</td>
        <td>".$row['source']."</td>
        <td>".$row['projectname']."  </td>
        <td>"."<a href=\"".$row['qa']."\" target=\"new\">
            <button>QA</button></a></td>
        <td>"."<a href=\"".$row['stg']."\" target=\"new\">
            <button>STG</button></a></td>
        <td>"." <a href=\"".$row['prod']."\" target=\"new\">
            <button>PROD</button></a></td>
        </tr>";
}
echo "</table>"; 
```

有人可以帮助添加查询功能以根据 productid（包含在“testlinksproducts”表中）提取测试链接吗？

非常感谢您对此的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T20:29:39.803

查询可能类似于：

```
SELECT testlinks.id,
                 testlinks.source,
                 testlinks.projectid,
                 testlinks.clientid,
                 testlinks.qa,
                 testlinks.stg,
                 testlinks.prod,
                 testlinks.username,
                 testlinks.password,
                 projects.id,
                 projects.projectname
          FROM testlinks , projects , TESTLINKSPRODUCTS
          WHERE testlinks.projectid = projects.id
            AND testlinks.id = TESTLINKSPRODUCTS.testlinksid
            AND (testlinks.projectid='$projectid'
                 OR testlinks.source='$source'
                 OR TESTLINKSPRODUCTS.productsid = '$productid')
          GROUP BY testlinks.id 
```

注意：如果测试链接只能在一个项目、产品和客户端中，则可能不需要分组。`group_concat()`如果测试链接在多个项目中， A可能会有所帮助。

# nginx - 别名环境中的 nginx path_info

> ID：14128245
> 
> 赞同：0
> 
> 时间：2013-01-02T19:51:06.597
> 
> 标签：nginx, php, pathinfo

我需要使用 php-fpm 在 nginx 上运行它：

```
example.com/studip/dispatch.php/admin/user/ 
```

问题似乎是， /studip 不是根目录下的子文件夹，而是 /usr/local/studip/public/ 的别名

这是没有（非工作）path_info foo 的配置：

```
server {
    listen 80;
    server_name  example.com;

    root /var/www/example.com/htdocs;
    index index.php

    # Here are a few other subfolders hosted
    # ...
    # ...

    # and now studip:

    location /studip {
        alias /usr/local/studip/public/;
        index index.php;
        location ~ /studip/(.*\.php)$ {
            fastcgi_pass    unix:/var/www/sockets/studip.socket;
            fastcgi_index   index.php;
            fastcgi_param   SCRIPT_FILENAME    $document_root$1;
            include fastcgi_params;
        }
    }
} 
```

还有 fastcgi_params：

```
fastcgi_param   QUERY_STRING            $query_string;
fastcgi_param   REQUEST_METHOD          $request_method;
fastcgi_param   CONTENT_TYPE            $content_type;
fastcgi_param   CONTENT_LENGTH          $content_length;

fastcgi_param   SCRIPT_FILENAME         $request_filename;
fastcgi_param   SCRIPT_NAME             $fastcgi_script_name;
fastcgi_param   REQUEST_URI             $request_uri;
fastcgi_param   DOCUMENT_URI            $document_uri;
fastcgi_param   DOCUMENT_ROOT           $document_root;
fastcgi_param   SERVER_PROTOCOL         $server_protocol;

fastcgi_param   GATEWAY_INTERFACE       CGI/1.1;
fastcgi_param   SERVER_SOFTWARE         nginx/$nginx_version;

fastcgi_param   REMOTE_ADDR             $remote_addr;
fastcgi_param   REMOTE_PORT             $remote_port;
fastcgi_param   SERVER_ADDR             $server_addr;
fastcgi_param   SERVER_PORT             $server_port; 
fastcgi_param   SERVER_NAME             $server_name;

fastcgi_param   HTTPS                   $https;

# PHP only, required if PHP was built with --enable-force-cgi-redirect
fastcgi_param   REDIRECT_STATUS         200;

fastcgi_buffers 8 16k;
fastcgi_buffer_size 32k; 
```

我尝试了一个子域，其中 root 指向 /usr/local/studip/public/ 并让它与这个参数一起工作：

```
location / {
    try_files $uri $uri/ /index.php;
}

location ~ \.php {
    fastcgi_split_path_info ^(.+\.php)(/.+)$;

    fastcgi_param  PATH_INFO          $fastcgi_path_info;
    fastcgi_param  PATH_TRANSLATED    $document_root$fastcgi_path_info;

    fastcgi_param  QUERY_STRING       $query_string;
    fastcgi_param  REQUEST_METHOD     $request_method;
    fastcgi_param  CONTENT_TYPE       $content_type;
    fastcgi_param  CONTENT_LENGTH     $content_length;

    fastcgi_param  SCRIPT_NAME        $fastcgi_script_name;
    fastcgi_param  SCRIPT_FILENAME    $document_root$fastcgi_script_name;
    fastcgi_param  REQUEST_URI        $request_uri;
    fastcgi_param  DOCUMENT_URI       $document_uri;
    fastcgi_param  DOCUMENT_ROOT      $document_root;
    fastcgi_param  SERVER_PROTOCOL    $server_protocol;

    fastcgi_param  GATEWAY_INTERFACE  CGI/1.1;
    fastcgi_param  SERVER_SOFTWARE    nginx;

    fastcgi_param  REMOTE_ADDR        $remote_addr;
    fastcgi_param  REMOTE_PORT        $remote_port;
    fastcgi_param  SERVER_ADDR        $server_addr;
    fastcgi_param  SERVER_PORT        $server_port;
    fastcgi_param  SERVER_NAME        $server_name;

    fastcgi_pass   unix:/var/www/sockets/www.socket;
    fastcgi_index  index.php;
} 
```

但我不知道如何将其移植到子文件夹。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-05T11:19:46.147

所以这就是你要做的：

对于 FCGI，请勿按照建议将 fix_pathinfo 设置为 0！这会导致访问被拒绝状态。相反，请确保此 cgi.fix_pathinfo=1 或在您的 php.ini 文件中被注释掉。

接下来，使用此高级位置块代替输入到您的 nginx 站点配置文件中的位置块：

```
location ~ [^/]\.php(/|$) {
    fastcgi_split_path_info ^(.+?\.php)(/.*)$;
    if (!-f $document_root$fastcgi_script_name) {
        return 404;
    }

    fastcgi_pass unix:/var/run/php5-fpm.sock;
    fastcgi_index index.php;
    include fastcgi_params;
    fastcgi_param  PATH_INFO $fastcgi_path_info;
} 
```

如果您不是通过套接字传递而是通过本地 IP 传递，请改用这个 fastcgi_pass：

fastcgi_pass 127.0.0.1:9000;

在您的 fastcgi_params 版本中，从 SCRIPT_FILENAME 变量前面删除 $document_root。即使有子目录也没有必要。

那应该这样做。用 PHP5 在 Ubuntu 13.10 上为我做了。

# hbase - HBase 最新版本取决于时间戳值或实时添加？

> ID：14128248
> 
> 赞同：0
> 
> 时间：2013-01-02T19:51:15.580
> 
> 标签：hbase

在 HBase 中，您可以设置最小版本和最大版本以保持价值。该时间戳是否控制将保留的内容？

就像，如果我将第一行的时间戳修改为 100，然后，我插入第二行，时间戳为 99，最大版本值设置为 1，第一行（最新时间戳）还是第二行（最新插入时间）是否保留？

非常感谢您的回答。

如果它不保留时间戳为 100 的行，是否有数据库可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T20:04:32.897

在这种情况下，时间戳 100 行将是顶行。时间戳并不是真正的时间戳，您可以插入任何内容来代替它，并且具有最高值的行将被视为最新的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T20:14:32.993

通过操纵时间戳，您似乎可以操纵版本。如果我正确理解了您的问题，如果您必须使用时间戳 99 和 100 完全相同的键值限定符。我想会保留最新的。在这种情况下，时间戳为 100 的键值。我可能会实现它并稍后回复您！

# c# - 使用 Entity Framework 4 将 Linq 缓存到实体执行计划

> ID：14128250
> 
> 赞同：2
> 
> 时间：2013-01-02T19:51:31.820
> 
> 标签：c#, entity-framework-4, linq-to-entities, dbcontext

我正在分析一个 ASP.NET Web 应用程序，我注意到我的 EF4 执行计划没有被缓存。每次加载页面时，都会重新编译所有 Linq 表达式，如下面的屏幕截图所示。

![点跟踪](../Images/c2e5decffa1d504ff18c31cb08779a29.png)

有什么方法可以告诉 EF4 缓存这些执行计划吗？

编辑：

这就是我的查询的样子：

```
var objs = db.Table
    .Include("OtherTable")
    .Where(g =>
        (someId != null || g.ID == someId) &&
        (g.ObjType == someType) &&
        (/* etc */))
    .ToList(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T19:57:38.117

看看[查询计划缓存](http://msdn.microsoft.com/en-us/library/bb738562.aspx)。如果您的查询创建效率低下，它们可能不会被缓存。

此外，每个执行计划都按应用程序域缓存。所以在 ASP.Net 中，这与 AppPool 相同，如果 AppPool 关闭或重新启动，缓存将被清除。

# python - 当从不调用 issubclass() 时，Python 在 issubclass() 上抛出 TypeError

> ID：14128251
> 
> 赞同：9
> 
> 时间：2013-01-02T19:51:35.697
> 
> 标签：python, numpy, python-2.7

我有一段代码在大多数情况下都能完美运行，但每隔一段时间我就会在回溯中得到这个错误：

```
File "/path/to/somefile.py", line 272, in somefile
    sm = -0.5 * (wv[0]**2\. / sm2 + numpy.log(2\. * numpy.pi * sm2))
TypeError: issubclass() arg 2 must be a class or tuple of classes 
```

我知道是什么`issubclass()`并且理解错误，但我从未调用它；代码中的那一行是纯算术，所以我不知道为什么`TypeError`首先会提出这个问题。我唯一的理论是 Numpy 在幕后调用它，但是回溯应该在 Numpy 源代码中显示有问题的行，对吗？这是怎么回事？

**更新：**

`wv`是一个浮点数组并且`sm2`是一个浮点标量。该错误实际上是由 引发的`numpy.log`，即（新）行

```
tmp = numpy.log(2\. * numpy.pi * sm2) 
```

但是，错误消息中没有提供更多信息。

**更多更新：**

我当前版本的 Numpy（来自 Python 提示符）：

```
>>> import numpy
>>> numpy.__version__
'1.6.2' 
```

我将问题行更改为

```
try:
    tmp = numpy.log(2\. * numpy.pi * sm2)
except TypeError:
    print type(sm2), 2\. * numpy.pi * sm2 
```

并得到了输出

```
<type 'numpy.float64'> 0.0 
```

所以会有*某种*错误是有道理的，但是如果我这样做（在 Python 提示符下）

```
>>> import numpy
>>> numpy.log(0.) 
```

我得到了我期望的错误（并且已经通过`warning`模块在有问题的代码中处理）：

```
__main__:1: RuntimeWarning: divide by zero encountered in log
-inf 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T22:27:27.083

毕竟这是我的代码中的一个错误......正如@seberg 指出的那样，这段代码可以正常工作：

```
>>> import numpy
>>> import warnings
>>> numpy.log(0.)
__main__:1: RuntimeWarning: divide by zero encountered in log
-inf
>>> warnings.simplefilter("error", RuntimeWarning)    # not "RuntimeWarning"
>>> try:
...     numpy.log(0.)
... except RuntimeWarning:
...     print "caught"
...
caught 
```

[`numpy.seterr`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.seterr.html#numpy-seterr)但是，提供了一种处理`RuntimeWarning`这种方式的替代方法：

```
>>> import numpy
>>> numpy.seterr(all='raise')
{'over': 'warn', 'divide': 'warn', 'invalid': 'warn', 'under': 'ignore'}
>>> try:
...     numpy.log(0.)
... except FloatingPointError:
...     print "caught"
... 
caught 
```

无论哪种方式，它都有效，尽管 Python*确实*应该抛出某种异常来将字符串而不是类传递给`warnings.simplefilter`.

# javascript - 画布旋转计算：如何计算新位置？

> ID：14128256
> 
> 赞同：0
> 
> 时间：2013-01-02T19:51:50.937
> 
> 标签：javascript, canvas, rotation, position

我尝试绘制一条旋转的线，并在旋转后在该线的起点和终点绘制一个点。

这是我的代码（不能正常工作）

```
<!-- language: lang-html -->
<html><head><title>test</title></head><body>

    <canvas id="canvas" width="100" height="100"></canvas>

    <script type="text/javascript">

        var _context = document.getElementById("canvas").getContext('2d');

        var x = 40;
        var y = 40;
        var angle = 0.2;

        _context.beginPath();
        _context.translate( x, y);

        //rotate and draw line
        _context.rotate( angle );
        _context.moveTo( 0, 0);
        _context.lineTo( 0, 40);
        _context.stroke();

        //calculate the new x,y position from line
        x = x * Math.cos( angle ) - y * Math.sin( angle );
        y = x * Math.sin( angle ) + y * Math.cos( angle );

        //draw a point to this coords
        _context.save();
        _context.fillStyle = "orange";
        _context.beginPath();
        _context.arc( x, y, 4, 0, 2*Math.PI, true);
        _context.fill();

    </script>
</body></html> 
```

jsFiddle 演示：http: [//jsfiddle.net/UT29j/](http://jsfiddle.net/UT29j/)

有人有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T20:03:02.553

旋转和平移适用于绘制的所有内容。您不需要自己操作坐标。

```
<html><head><title>test</title></head><body>

    <canvas id="canvas" width="100" height="100"></canvas>

    <script type="text/javascript">

        var _context = document.getElementById("canvas").getContext('2d');

        var angle = 0.2;

        // rotate and translate
        _context.translate(40, 40);
        _context.rotate( angle );

        // draw line
        _context.beginPath();
        _context.moveTo( 0, 0);
        _context.lineTo( 0, 40);
        _context.stroke();

        //draw a point to this coords
        _context.save();
        _context.fillStyle = "orange";
        _context.beginPath();
        _context.arc(0, 40, 4, 0, 2*Math.PI, true);
        _context.arc(0, 0, 4, 0, 2*Math.PI, true);
        _context.fill();
    </script>
</body></html> 
```

# android - Android 软键盘示例

> ID：14128258
> 
> 赞同：0
> 
> 时间：2013-01-02T19:51:54.193
> 
> 标签：android, licensing

所以我有一个简单的问题，合法地允许从 Android 中的软键盘演示或 Android 软键盘源代码中获取源代码，在 Android 本身中，然后修改一些东西并将这个键盘集成到我的项目中，如我没有开发键盘应用程序，但我需要一个软键盘作为输入法服务，谷歌允许吗？,

谢谢 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T19:54:15.580

回复在这里：http: [//source.android.com/source/licenses.html](http://source.android.com/source/licenses.html)

Android 在 Apache 2.0 许可下，所以答案是肯定的。

# opengl - Compiz 和 OpenGL 窗口

> ID：14128259
> 
> 赞同：2
> 
> 时间：2013-01-02T19:51:58.887
> 
> 标签：opengl, window, freeze, compiz

我通过 GLX 在 Linux 中编写了一个 OpenGL 应用程序。它使用带有 glXSwapBuffers 的双缓冲和通过 NVIDIA X 服务器设置设置的同步到 VBlank。我正在使用 Compiz 并且窗口平滑移动并且没有撕裂（在 Compiz 设置中启用了同步到 VBlank）。但是当我

1.  尝试移动或调整 OpenGL 窗口的大小或

2.  通过 OpenGL 窗口占用的区域移动其他窗口

系统卡顿并冻结 3-4 秒。将其他窗口移到 OpenGL 窗口占用的区域之外是一如既往的顺畅。此外，仅当 OpenGL 应用程序处于生成动画帧的循环中并因此交换缓冲区时，才会出现问题。如果内容是静态的并且应用程序没有交换缓冲区没有问题，则移动各个窗口是平滑的。可能是我的应用程序和 Compiz 之间的同步问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T00:31:15.350

不知道是不是还是和几年前一样，但是……</p>

您的描述与 Compiz SNAFU 非常匹配。每次调整窗口大小都会触发重新创建将接收窗口内容的纹理。纹理创建是一项昂贵的操作，因此应该避免。不幸的是，Compiz 开发人员似乎不是最聪明的人，因为他们没有意识到有一个明显的解决方案可以解决这个问题：X11 中的 Windows 可以在没有太多成本的情况下重新设置父级（每个窗口管理器都会这样做几次），这称为堆叠。Compiz*是*一个窗口管理器。

那么为什么 Compiz 不保留一个桌面大小的窗口，在它周围重新设置那些即将调整大小的窗口，从那里获取其恒定大小的窗口纹理，并在完成调整大小操作后将窗口重新设置为它的装饰框架？

我不知道为什么会这样。无论如何，Compiz 做的一些事情并不是很聪明。

如果你想解决这个问题，好吧：Compiz 是开源的，我刚刚描述了该怎么做。

# javascript - JQuery AJAX JSONP 标签无效

> ID：14128262
> 
> 赞同：0
> 
> 时间：2013-01-02T19:52:26.953
> 
> 标签：javascript, jquery, ajax, json, jsonp

我知道有人问过这个问题，但我无法让它发挥作用。

我执行以下 AJAX 请求：

```
function dislikeMeme(memeId) {
    $.ajax({
        dataType: "jsonp",
        url: "http://<url>.com/dislike/" + memeId,
        data: { 
            u: "username",
            p: "password"
        },
        jsonpCallback: 'successCallback'
    });
}

function successCallback(data) {
    alert("Test"); // Not firing because of previous 'Invalid label' error
}; 
```

查看萤火虫，我看到请求成功，但是有一个`Invalid Label`错误触发了请求的错误回调。请求的响应如下：

```
{
    "id":6220673,
    "myScore":-1,
    "msg":"Not loved"
} 
```

我看到括号导致 JavaScript 将响应解释为一个对象，但我知道这是我正在检索的格式，在它导致错误之前是否有解析它？

我还看到返回此信息的页面的 URL 是：

```
http://<url>.com/dislike/123456?callback=successCallback&u=username&p=password&_123456789 
```

除此`Invalid label`错误外，一切正常。有没有人有任何想法？

提前谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T19:58:32.330

可以处理 JSONP 的服务器获取回调参数（可以是不同的参数，具体取决于 WS）并在响应中传递它。所以服务器的响应应该是：

```
successCallback({
"id":6220673,
"myScore":-1,
"msg":"Not loved"
}) 
```

如果您无法控制服务器，则唯一的路由是代理。有关绕过同源策略的信息，请参阅我的跨域答案。 [是什么阻止我使用 $.ajax 加载另一个域的 html？](https://stackoverflow.com/questions/8944656/what-prevents-me-from-using-ajax-to-load-another-domains-html/8944743#8944743)

# iphone - iOS 多图像分页和缩放问题

> ID：14128264
> 
> 赞同：1
> 
> 时间：2013-01-02T19:52:34.053
> 
> 标签：iphone, objective-c, ios, uiscrollview

有一些与此问题相关的线程，但找不到可靠的解决方案。任何帮助，将不胜感激。如果你给它一个图像，这个代码就很好用。放大完美。你给它两个滚动的图像会很好地抛出图像，但是当你放大它时，它总是会放大第一张图像？不确定为什么 viewForZoomingInScrollView 方法无法确定您在哪个视图上。代码贴在下面

PagedScrollViewController.h

```
#import <UIKit/UIKit.h>
@interface PagedScrollViewController : UIViewController <UIScrollViewDelegate>
@property (nonatomic, strong) IBOutlet UIScrollView *scrollView;
@property (nonatomic, strong) IBOutlet UIPageControl *pageControl;
@property (nonatomic, strong) IBOutlet UIButton *cancelButtonClicked;
@property (nonatomic, strong) IBOutlet UILabel *headerTitle;
@property (nonatomic, strong) IBOutlet NSString *headerTitleS;
@property (nonatomic, strong) IBOutlet NSMutableArray *pageImages;
@property (nonatomic, strong) IBOutlet UITextView *caption;
@property (weak, nonatomic) IBOutlet UINavigationBar *navigationBar;
@property (nonatomic, strong) NSMutableArray *captionArray;

-(IBAction)cancelButtonClicked:(id)sender;

@end 
```

PagedScrollViewController.m

```
@interface PagedScrollViewController ()
@property (nonatomic, strong) NSMutableArray *pageViews;

- (void)loadVisiblePages;
- (void)loadPage:(NSInteger)page;
- (void)purgePage:(NSInteger)page;
@end

@implementation PagedScrollViewController
@synthesize scrollView = _scrollView;
@synthesize pageControl = _pageControl;
@synthesize pageImages = _pageImages;
@synthesize pageViews = _pageViews;
@synthesize cancelButtonClicked = _cancelButtonClicked;
@synthesize headerTitle = _headerTitle;
@synthesize headerTitleS = _headerTitleS;
@synthesize caption = _caption;
@synthesize captionArray = _captionArray;

- (void)loadVisiblePages {
    // First, determine which page is currently visible
    CGFloat pageWidth = self.scrollView.frame.size.width;
    NSInteger page = (NSInteger)floor((self.scrollView.contentOffset.x * 2.0f + pageWidth) 
    / (pageWidth * 2.0f));

    // Update the page control
    self.pageControl.currentPage = page;

    NSObject *captionObject = [self.captionArray objectAtIndex:page];
    NSString *captionString = [NSString stringWithFormat:@"%@", [captionObject 
    valueForKey:@"caption"]]; 
    self.caption.text = captionString;

    // Work out which pages we want to load
    NSInteger firstPage = page - 1;
    NSInteger lastPage = page + 1;

    // Purge anything before the first page
    for (NSInteger i=0; i<firstPage; i++) {
        [self purgePage:i];
    }
        for (NSInteger i=firstPage; i<=lastPage; i++) {
        [self loadPage:i];
    }
    for (NSInteger i=lastPage+1; i<self.pageImages.count; i++) {
        [self purgePage:i];
    }
}

- (void)loadPage:(NSInteger)page {
    if (page < 0 || page >= self.pageImages.count) {
        // If it's outside the range of what we have to display, then do nothing
        return;
    }

    // Load an individual page, first seeing if we've already loaded it
    UIView *pageView = [self.pageViews objectAtIndex:page];
    if ((NSNull*)pageView == [NSNull null]) {
        CGRect frame = self.scrollView.bounds;
        frame.origin.x = frame.size.width * page;
        frame.origin.y = 0.0f;

        UIImageView *newPageView = [[UIImageView alloc] initWithImage:[self.pageImages 
        objectAtIndex:page]];

        newPageView.contentMode  = UIViewContentModeScaleAspectFit;
        newPageView.frame = CGRectMake((page*320), 0, 310, 320);
        self.scrollView.maximumZoomScale = 1.3;
        self.scrollView.contentSize = CGSizeMake(320*[self.pageImages count],389);
        self.scrollView.frame = CGRectMake(320*(self.pageControl.currentPage), 44, 310, 
        370);
        [self.scrollView addSubview:newPageView];
        [self.pageViews replaceObjectAtIndex:page withObject:newPageView];
    }
 }

- (void)purgePage:(NSInteger)page {
 if (page < 0 || page >= self.pageImages.count) {
    // If it's outside the range of what we have to display, then do nothing
    return;
}

// Remove a page from the scroll view and reset the container array
UIView *pageView = [self.pageViews objectAtIndex:page];
    if ((NSNull*)pageView != [NSNull null]) {
        [pageView removeFromSuperview];
        [self.pageViews replaceObjectAtIndex:page withObject:[NSNull null]];
     }
 }

-(UIView *) viewForZoomingInScrollView:(UIScrollView *)scrollView {
      self.scrollView.contentSize = CGSizeMake(320*[self.pageImages count],389);
     return [self.scrollView.subviews objectAtIndex:self.pageControl.currentPage];
}

- (void)viewDidLoad {
    [super viewDidLoad];
    self.scrollView.delegate = self;
    self.headerTitle.text = self.headerTitleS;
    // Set up the image we want to scroll & zoom and add it to the scroll view
    NSInteger pageCount = self.pageImages.count;

    // Set up the page control
    self.pageControl.currentPage = 0;
    self.pageControl.numberOfPages = pageCount;

    // Set up the array to hold the views for each page
    self.pageViews = [[NSMutableArray alloc] init];
    for (NSInteger i = 0; i < pageCount; ++i) {
    [self.pageViews addObject:[NSNull null]];
    }
}

- (void)viewWillAppear:(BOOL)animated {
   [super viewWillAppear:animated];
   // Load the initial set of pages that are on screen
   [self loadVisiblePages];
}

- (void)viewDidUnload {
   [super viewDidUnload];
   self.scrollView = nil;
   self.pageControl = nil;
   self.pageImages = nil;
   self.pageViews = nil;
}

- (void)scrollViewDidScroll:(UIScrollView *)scrollView {
  [self loadVisiblePages];
}

-(IBAction)cancelButtonClicked:(id)sender{
   [self dismissViewControllerAnimated:YES completion:nil];
}

@end 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-05T18:05:47.113

这就是我发现的工作。支持具有分页和缩放的多个图像。享受！

```
#define VIEW_FOR_ZOOM_TAG (1)

@implementation SVViewController

- (void)viewDidLoad {
    [super viewDidLoad];

    UIScrollView *mainScrollView = [[UIScrollView alloc] initWithFrame:self.view.bounds];
    mainScrollView.pagingEnabled = YES;
    mainScrollView.showsHorizontalScrollIndicator = NO;
    mainScrollView.showsVerticalScrollIndicator = NO;

    CGRect innerScrollFrame = mainScrollView.bounds;

    for (NSInteger i = 0; i < 3; i++) {
    UIImageView *imageForZooming = [[UIImageView alloc] initWithImage:[UIImage imageNamed:  
    [NSString stringWithFormat:@"page%d", i + 1]]];
    imageForZooming.tag = VIEW_FOR_ZOOM_TAG;

    UIScrollView *pageScrollView = [[UIScrollView alloc] initWithFrame:innerScrollFrame];
    pageScrollView.minimumZoomScale = 1.0f;
    pageScrollView.maximumZoomScale = 2.0f;
    pageScrollView.zoomScale = 1.0f;
    pageScrollView.contentSize = imageForZooming.bounds.size;
    pageScrollView.delegate = self;
    pageScrollView.showsHorizontalScrollIndicator = NO;
    pageScrollView.showsVerticalScrollIndicator = NO;
    [pageScrollView addSubview:imageForZooming];

    [mainScrollView addSubview:pageScrollView];

    if (i < 2) {
        innerScrollFrame.origin.x += innerScrollFrame.size.width;
    }
    }

    mainScrollView.contentSize = CGSizeMake(innerScrollFrame.origin.x + 
    innerScrollFrame.size.width, mainScrollView.bounds.size.height);

    [self.view addSubview:mainScrollView];
   }

 - (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView {
  return [scrollView viewWithTag:VIEW_FOR_ZOOM_TAG];
}

 - (NSUInteger)supportedInterfaceOrientations {
 return UIInterfaceOrientationMaskPortrait;
} 

- (BOOL)shouldAutorotate {
 return NO;
}

@end 
```

# android - 从Android中的外部本机可执行文件调用java代码

> ID：14128266
> 
> 赞同：4
> 
> 时间：2013-01-02T19:52:47.783
> 
> 标签：android, reflection, android-ndk, java-native-interface, libusb

所以这就是我想要做的。我有一个由我的活动生成的第三方本机可执行文件。Activity 和本机可执行文件通过 TCP 进行通信。问题是 - 第三方应用程序正在使用**libusb**，因此需要 root。所以我认为实际上可以编写一个与原始**libusb**具有相同接口但使用 Android USB Host API的包装器**libusb-java 。**因此，我可以将我正在运行的可执行文件与我的**libusb-java**链接而不更改它，它将使用 Android USB Host API。问题是如果我想写**libusb-java********，我需要能够从库内部访问 JVM（它将在第三方可执行文件启动时动态加载），但由于这不会在 Java 端链接，我无法访问它。有没有一种简单的方法可以从未链接到 Activity 的本机可执行文件中调用一些 java 代码（可能是反射？）。有任何想法吗？******

 ******例如：如果我的原生二进制文件调用 *libusb_open()*，它实际上会从 libusb-java 调用 *libusb_open()*，而**libusb-java**又应该调用**android.hardware.usb.UsbManager的***openDevice()*而不是原来的直接原生实现. （我过于简单化了，但这是基本思想）

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T22:43:19.660

简单的回答：不，没有。您可以启动自己的 Dalvik VM 并可能调用它，但它不会作为 Activity 存在于 Android 系统中，因此很难使用许多平台服务。

您最好尝试重构本机代码以作为由 DVM 以正常 Android 方式加载的库作为活动或服务托管进程运行。有时这几乎可以像从静态 jni 子例程调用它的 main() 一样简单，但请注意进程级静态数据中潜在的不一致，因为 Android 通常会在旧进程中启动新实体。

或者，您可以通过 TCP、[使用一些技巧] Binder 或其他 IPC 机制代理您的模拟 API 调用。********

# c++ - 如何在字符串中的每个字符后添加反斜杠？

> ID：14128267
> 
> 赞同：-2
> 
> 时间：2013-01-02T19:53:00.930
> 
> 标签：c++, winapi, visual-studio-2012

我需要将文字文件路径 (C:/example.txt) 转换为与各种 WinAPI 注册表函数 (C://example.txt) 兼容的文件路径，但我不知道如何去做。

我已将其分解为必须在某个字符之后添加反斜杠（在本例中为 / ），但在那之后我完全被卡住了。

指导和代码示例将不胜感激。

我正在使用 C++ 和 VS2012。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T20:00:37.683

\\ 不是两个字符，是一个字符：

```
for(size_t i = 0, sz = sPath.size() ; i < sz ; i++)
    if(sPath[i]=='/')  sPath[i] = '\\'; 
```

但请注意，有些 API 与 \ 一起使用，而有些与 / 一起使用，因此您需要检查在哪些情况下使用此替换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T20:11:56.040

在 C++ 中，字符串由单个字符组成，例如`"foo"`. 字符串可以由可打印字符（如字母表中的字母）或不可打印字符（如回车键或其他控制字符）组成。

在填充字符串时，您不能以正常方式键入这些不可打印字符之一。例如，如果您想要一个包含“foo”、然后是制表符、然后是“bar”的字符串，则不能通过键入以下内容来创建它：

`foo``TAB``bar`

因为这只会插入那么多空格——它实际上不会插入`TAB`字符。

您可以通过“转义”它们来指定这些不可打印的字符。这是通过插入反斜杠字符 ( `\`) 后跟字符代码来完成的。在上面的字符串`TAB`由转义序列表示的情况下`\t`，你可以写：`"foo\tbar"`。

该字符`\`本身不是不可打印的字符，但 C++（和 C）认为它是特殊的——它总是表示转义序列的开始。要在字符串中包含字符“\”，它本身必须被转义，使用`\\`.

因此，在 C++ 中，如果您想要一个包含以下内容的字符串：

> c:\windows\foo\bar

您使用转义序列对此进行编码：

```
string s = "c:\\windows\\foo\\bar" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T20:12:48.807

*如果用两个*反斜杠替换每次出现的正斜杠确实是您想要的，那么这应该可以完成工作：

```
size_t i = str.find('/');
while (i != string::npos)
{
    string part1 = str.substr(0, i);
    string part2 = str.substr(i + 1);
    str = part1 + R"(\\)" + part2; // Use "\\\\" instead of R"(\\)" if your compiler doesn't support C++11's raw string literals
    i = str.find('/', i + 1);
} 
```

**编辑：**

PS如果我误解了这个问题，而您的意图实际上是用*一个*反斜杠替换每次出现的正斜杠，那么有一个更简单、更有效的解决方案（正如@RemyLebeau 在评论中指出的那样）：

```
size_t i = str.find('/');
while (i != string::npos)
{
    str[i] = '\\';
    i = str.find('/', i + 1);
} 
```

或者，甚至更好：

```
std::replace_if(str.begin(), str.end(), [] (char c) { return (c == '/'); }, '\\'); 
```

# dart - 在 DartFlash 上处理键盘事件的问题

> ID：14128275
> 
> 赞同：3
> 
> 时间：2013-01-02T19:53:40.757
> 
> 标签：dart

我在处理 DartFlash 上的键盘事件时遇到了麻烦。我不知道我在这里做错了什么。有人可以帮助我吗？我的目的是创建一个非常简单的行走角色，每次我按下一个键，它都会在 x 和 y 方向移动，只是为了开始了解 DartFlash API。这是完整的源代码：

```
 class Character extends Sprite
 {
   TextureAtlas _atlas;
   Bitmap _currentBitmap;
   int _direction;

   String _name;

   Character(this._name, this._atlas)
   {
     this._direction=Direction.down;
     this._currentBitmap=this.getBitmap("stand", this._direction);
     addChild(this._currentBitmap);
   }

   String get name => this._name;

   Bitmap getBitmap(String name, [int direction, int number])
   {
     if(direction == null)
     {
       return new Bitmap(this._atlas.getBitmapData(name));
     } else if (number == null) 
     {
       return new Bitmap(this._atlas.getBitmapData("${name}-${Direction.getDirectionName(direction)}"));
     }
     return new Bitmap(this._atlas.getBitmapData("${name}-${Direction.getDirectionName(direction)}-${number}"));
   }
 }

 Character dk;

 void keyboardListener(KeyboardEvent ke) {
   print("Key code: ${ke.keyCode}");
   dk.x+=1;
   dk.y+=1;
 }

 void main()
 {
   Stage mainStage = new Stage("mainStage", html.document.query("#mainStage"));
   RenderLoop renderLoop = new RenderLoop();
   renderLoop.addStage(mainStage);
   Resource resource=new Resource();
   resource.addTextureAtlas("DarkKnight", "resources/DarkKnight.json", TextureAtlasFormat.JSONARRAY);
   resource.load().then((res)
   {
     print(resource.toString());
     dk=new Character("DarkKnight", resource.getTextureAtlas("DarkKnight"));
     dk.x=10;
     dk.y=10;
     mainStage.addChild(dk);
     dk.addEventListener(KeyboardEvent.KEY_DOWN, keyboardListener, false);
     mainStage.focus=dk;
     print("${mainStage.focus.name}");
   });
 } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T22:07:46.300

有一个简单的解决方法。只需将“tabindex”属性添加到画布元素，然后您将收到键盘事件。如果未设置“tabindex”，则画布不会接收键盘事件。

```
<canvas id="stage" width="800" height="600" tabindex="1"></canvas> 
```

画布也需要焦点。您可以通过单击画布或有问题地设置焦点来获得焦点：

```
query('#stage').focus(); 
```

# java - 将 int 迭代器传递给在 for 循环中定义的新 Runnable

> ID：14128276
> 
> 赞同：1
> 
> 时间：2013-01-02T19:53:40.743
> 
> 标签：java, multithreading, concurrency

> **可能重复：**
> [for循环中的最终计数器？](https://stackoverflow.com/questions/9682942/a-final-counter-in-a-for-loop)

下面是我目前正在运行的代码。我希望能够将迭代器 i 传递到新的 Runnable() 代码中。我知道我通常需要 make 变量 final 才能传递给内部类，但这会破坏迭代器的效果。我知道通常我可以尝试使 Runnable 内部类成为真正的类（请原谅我缺乏术语），但是我会失去 CountDownLatches 的效果。

```
private long generateThreads(int cores){
    if (cores <= 0)
        cores = Runtime.getRuntime().availableProcessors();

    System.out.println("Using " + cores + " threads for processing");

    final ExecutorService exec = Executors.newFixedThreadPool(cores);
    final CountDownLatch ready = new CountDownLatch(cores);
    final CountDownLatch start = new CountDownLatch(1);
    final CountDownLatch done = new CountDownLatch(cores);

    for (int i = 1; i <= cores; i++){
        exec.execute(new Runnable(){

            public void run(){
                ready.countDown();
                try{
                    start.await();
                    //do work
                    }
                } catch (InterruptedException e){
                    Thread.currentThread().interrupt();
                } finally{
                    done.countDown();
                    exec.shutdown();
                }
            }
        });
    }

    long startTime = 0;
    try{
        ready.await();
        startTime = System.nanoTime();
        start.countDown();
        done.await();
    } catch (InterruptedException e){
        e.printStackTrace();
    }
    return System.nanoTime() - startTime;
} 
```

有谁知道给每个线程一个迭代器的方法，或者创建一个显示所有外部类成员的类，特别是 CountDownLatches？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T20:02:35.723

只需将值`i`赋给循环内的最终变量。

```
for (int i = 1; i <= cores; i++){
    final int iFinal = i;

    exec.execute(new Runnable(){

        public void run(){
            ready.countDown();
            try{
                start.await();
                System.out.println( "i=" + iFinal );
            } catch (InterruptedException e){
                Thread.currentThread().interrupt();
            } finally{
                done.countDown();
                exec.shutdown();
            }
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T19:58:38.080

如果我理解正确，您希望可运行对象保留对迭代器的“引用”，以便它可以观察增量。一种线程安全的方法是使用`AtomicInteger`：

```
final AtomicInteger i = new AtomicInteger(1); 
for (; i.get() <= cores; i.incrementAndGet()){
    exec.execute(new Runnable(){

        public void run(){
            //you can access i here
            int j = i.get();
        }
    });
} 
```

请注意，这假设您仅从`i`Runnables 中读取 - 如果您还编写它，则条件的行为`i.get() <= cores`可能是意外的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T19:59:24.637

你可以使用这个技巧：

```
final int[] holder = new int[1]; // the array is final, not its contents

for (int i = 1; i <= cores; i++){
    holder[0] = i;
    exec.execute(new Runnable(){

        public void run(){
            int i = holder[0]; // compiles
            ready.countDown();
            try{
                start.await();
                //do work
                }
            } catch (InterruptedException e){
                Thread.currentThread().interrupt();
            } finally{
                done.countDown();
                exec.shutdown();
            }
        }
    });
} 
```

编译的原因是数组*引用*是`final`，但数组的*内容*可以更改。

我不确定这会有多大用处，因为虽然我没有彻底阅读您的代码，但它似乎不是线程安全的 - 线程的执行顺序是不确定的，所以当 Runnable 实际执行时，您的迭代值可能是任何东西.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T21:55:20.703

这与您的问题背道而驰，但另一种解决方案是使用 Java 的一些函数式编程库。我讨厌编写线程，这些库让你可以简单地写出你试图用高阶逻辑解决的问题，并在幕后处理并发优化。

Guava 和 lambdaJ 很容易使用。

# jquery-ui - 带有 url 更改器的 jquery 滑块

> ID：14128278
> 
> 赞同：0
> 
> 时间：2013-01-02T19:53:44.367
> 
> 标签：jquery-ui, jquery

> **可能重复：**
> [如何在不离开页面的情况下更改浏览器中的 URL？](https://stackoverflow.com/questions/8560617/how-to-change-url-in-browser-without-navigating-away-from-page)

我见过一些网站，你点击下一页，旧页面滑出，新页面滑入，并且url也发生了变化。我只是想知道这是怎么做到的。我可以给你一个网站的例子，但我不确定我可以在这里发布网址。

# ios - 核心数据：executeFetchRequest:error：返回没有 managedObjectContext 的对象

> ID：14128281
> 
> 赞同：2
> 
> 时间：2013-01-02T19:54:04.517
> 
> 标签：ios, core-data, nsmanagedobjectcontext

我遇到了一个问题，即`NSManagedObjectContext`'s返回一个尚未插入上下文`executeFetchRequest:error:`的数组。`NSManagedObjects`

我的方法：

```
- (NSArray *)deleteAllObjectsWithEntityName:(NSString *)entityName {
    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    NSEntityDescription *entityDesc = [NSEntityDescription entityForName:entityName inManagedObjectContext:self.managedObjectContext];
    fetchRequest.entity = entityDesc;
    NSError *error = nil;
    NSArray *managedObjects = [self.managedObjectContext executeFetchRequest:fetchRequest error:&error];

    // [[self.managedObjectContext registeredObjects] count] : 0
    // [[self.managedObjectContext insertedObjects] count] : 0
    //
    // managedObjects.count : 1
    // error : nil
    //
    // managedObjects[0] : <Foo: 0xe98c1d0>
    // managedObjects[0].isDeleted : NO
    // managedObjects[0].isFault : NO
    // managedObjects[0].isInserted : NO
    // managedObjects[0].managedObjectContext : nil
    //
    // [NSThread isMainThread] : YES
    //
    // self.managedObjectContext : <NSManagedObjectContext: 0xe97d840>
    //

    for (NSManagedObject *anObject in managedObjects) {
        [self.managedObjectContext deleteObject:managedObject];
    }

    [self.managedObjectContext save:&error];

    // error : Error Domain=NSCocoaErrorDomain Code=134030 \
    // "The operation couldn’t be completed. (Cocoa error 134030.)" UserInfo=0x8b6d260 \
    // {NSAffectedObjectsErrorKey=(
    //     "<Foo: 0x10464910> (entity: Foo; id: 0x10464950 <x-coredata:///Job/tE5188F9B-9DC4-4EA2-8636-7790587E114F242> ; data: {...})"
    // ), \
    // NSUnderlyingException=Cannot update object that was never inserted.},
} 
```

我已经验证了`self.managedObjectContext`它总是在主线程上创建的。

根据[NSManagedObjectContext Class Reference](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/CoreDataFramework/Classes/NSManagedObjectContext_Class/NSManagedObjectContext.html)，该对象会自动注册到获取的 managedObjectContext 中，所以我觉得`registeredObjects`返回一个空集很可疑。

我很难过，所以希望有人能发现我的代码有问题，或者知道我错过的一些问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T02:55:18.410

这是在删除托管对象并保存其上下文后更新托管对象的症状。

我在视图控制器中保留了对 Foo 实例的引用。我从托管对象上下文中删除了所有 Foo 对象，然后更新了 Foo 实例，然后再次尝试删除所有 Foo 对象。

这个问题帮助我找到了原因：[如何判断 `NSManagedObject` 是否已被删除？](https://stackoverflow.com/questions/4340445/how-can-i-tell-whether-an-nsmanagedobject-has-been-deleted).

# sql-server - 如何将此 SQL 内部联接查询转换为 LINQ 语法？

> ID：14128287
> 
> 赞同：0
> 
> 时间：2013-01-02T19:54:23.900
> 
> 标签：sql-server, linq, entity-framework, sql-to-linq-conversion

我对LINQ不太熟悉。我需要将此查询转换为 LINQ 语句，以便在我的 C# 项目中使用。

谢谢

```
SELECT Galleries.GalleryTitle, Media.*
FROM Galleries 
INNER JOIN Media ON Galleries.GalleryID = Media.GalleryID
WHERE (Galleries.GalleryID = 100) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T19:57:19.347

```
var query = from g in db.Galleries
            join m in db.Media on g.GalleryID equals m.GalleryID into gm
            where g.GalleryID == 100
            select new { g.GalleryTitle, Media = gm }; 
```

属性`Media`将包含加入的媒体实体列表。此外，如果您在 Gallery 实体中定义了导航属性，则：

```
var gallery = db.Galleries.Include("Media")
                .FirstOrDefault(g => g.GalleryID == 100); 
```

# entity-framework - AngularJs，MVC 4，嵌套模型 - 重复被忽略

> ID：14128289
> 
> 赞同：1
> 
> 时间：2013-01-02T19:54:33.360
> 
> 标签：entity-framework, asp.net-mvc-4, angularjs

我正在尝试增强以下 Angular/MVC 4 示例： [https ://github.com/danielcsgomes/AngularJS-NetPonto](https://github.com/danielcsgomes/AngularJS-NetPonto)

我使用的代码是相同的，保存（1）将流程类名称更改为“产品”，以及（2）添加一个“供应商”类，作为产品的关联类，（并且供应商拥有产品集合） .

API 中的一切都很好。

但是，如果我通过 Product 类及其关联的 Vendor，则具有相同 Vendor 的那些产品将不会出现在列表中。但是，如果我让 API 返回一个匿名类型并传递一个名为 VendorName 的变量，则会出现重复项。自然，我不想使用匿名类型，所以有解决方案吗？

**图表 A：直截了当的 context.Products.Include("Vendors")：** ![在此处输入图像描述](../Images/68467c049ef1ad9d066761dc3fde9316.png)

**Exihbit B：作为匿名类型返回：**

![在此处输入图像描述](../Images/8d3cc82d1fab359b1949333257b366bf.png)

**以下是 (1) 我的角度控制器来获取所有产品，(2 & 3) 显示数据的模板** ![在此处输入图像描述](../Images/b6680311e365d3b34232b5aa3d38177e.png)

**没有匿名类型返回的模板：** ![在此处输入图像描述](../Images/9902bafd39e936d59e411284cde08998.png)

**具有匿名类型返回的模板：** ![在此处输入图像描述](../Images/376a8c88c38194dbf0fa3e23b1eb3bbb.png)

所以我的问题是：

**如何让 Angular 接受相应产品的重复供应商名称，而无需将数据作为匿名类型返回？**

# asp.net - asp.net - 网络应用程序与网站 - 代码背后

> ID：14128291
> 
> 赞同：1
> 
> 时间：2013-01-02T19:54:35.117
> 
> 标签：asp.net, code-behind

我有一个不久前建立的 asp.net 网站。我已经完成了使用 Visual Studio 将其转换为 Web 应用程序的过程。现在我已经转换了它，我在使用添加到项目中的类库中的类时遇到了一些问题。后面的代码略有不同（如下）。谁能给我一个解决方案的建议。

--澄清一点我有3个视觉工作室项目

1个类库（数据访问层）1个类库（业务逻辑层）1个网站（表示层）->我将其转换为Web应用程序项目。与此类似的过程（[此处](http://blogs.msdn.com/b/webdev/archive/2009/10/29/converting-a-web-site-project-to-a-web-application-project.aspx)）

我在业务逻辑层中有一个静态方法，我无法再从表示层后面的代码访问它。

---- 网站 -- /Profile/Default.aspx

```
using MyBusinessLogic;
public partial class Profile_Default : System.Web.UI.Page
{

    protected void Page_Load(object sender, EventArgs e)
    {
        MyBusinessLogic.Profiles.GetUserInfo(UserName);
    }
} 
```

---- Web 应用程序 -- /Profile/Default.aspx

```
using MyBusinessLogic;
namespace WebApplication1.Profile
{
    public partial class Default : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            MyBusinessLogic.Profiles.GetUserInfo(UserName); <---ERROR "can not access method on namespace"----------------------
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T21:02:15.093

我在转换中遇到过类似的问题。请检查类似的命名空间（Mybusinesslogic.Profiles），如果你有更清晰的，只需编写 profile.getuserinfo 并检查它是否解析为正确的业务逻辑程序集，或者当前命名空间中存在另一个重复项。

# python - wsadmin 脚本中未处理的异常后的误导性错误消息

> ID：14128294
> 
> 赞同：2
> 
> 时间：2013-01-02T19:54:44.453
> 
> 标签：python, websphere, jython, wsadmin, jacl

我正在开发一个自动化框架，并且我遇到了`wsadmin`工具的奇怪行为。这个问题在 WAS 6.1、7.0 和 8.0 中是可重现的（我没有尝试过是 8.5）。

我想知道这是否是 wsadmin 中的一个错误（很奇怪，还没有人注意到它，可能是从 WAS 5 开始！）...

示例脚本可以针对任何 WAS 环境安全地执行而不会造成任何损害。

```
try:
    # this line throws WAS exception
    AdminConfig.list('NonExistentType')
except:
    # exception is being handled
    print 'Handled wsadmin exception'
print 'Raising another exception'
# eventually the script throws a non-WAS exception
x = 1/0 
```

如果我理解正确，上面的脚本在零除时失败。但是`wsadmin`输出有点混乱：

```
Handled wsadmin exception
Raising another exception
WASX7017E: Exception received while running file "ex.py"; exception information: com.ibm.websphere.management.exception.InvalidConfigDataTypeException
com.ibm.websphere.management.exception.InvalidConfigDataTypeException: ADMG0007E: The configuration data type NonExistentType is not valid. 
```

真正有趣的是，Jacl 似乎也有同样的问题：

```
if [catch { puts [$AdminConfig list NonExistentType] } result] {
    puts "Handled wsadmin exception"
}
puts "Raising another exception"
set x [expr 1 / 0] 
```

`wsadmin`也不会打印有关终止脚本的实际异常的任何信息：

```
Handled wsadmin exception
Raising another exception
WASX7017E: Exception received while running file "ex.jacl"; exception information: com.ibm.websphere.management.exception.InvalidConfigDataTypeException
com.ibm.websphere.management.exception.InvalidConfigDataTypeException: ADMG0007E: The configuration data type NonExistentType is not valid. 
```

稍微更改两个脚本后（以避免抛出 WAS 异常），两个脚本的输出都是正确的。

```
try:
    # this line does not throw any exception
    AdminConfig.list('Cell')
except:
    # exception is being handled
    print 'Handled wsadmin exception'
print 'Raising another exception'
# eventually the script throws a non-WAS exception
x = 1/0 
```

如果脚本没有抛出/处理 WAS 异常，则输出看起来如预期：

```
Raising another exception
WASX7017E: Exception received while running file "ex1.py"; exception information: com.ibm.bsf.BSFException: exception from Jython:
Traceback (innermost last):
  File "<string>", line 9, in ?
ZeroDivisionError: integer division or modulo 
```

与 Jacl 相同：

```
if [catch { puts [$AdminConfig list Cell] } result] {
    puts "Handled wsadmin exception"
}
puts "Raising another exception"
set x [expr 1 / 0] 
```

`wsadmin`输出以下内容，这也是意料之中的：

```
wdrCell(cells/wdrCell|cell.xml#Cell_1)
Raising another exception
WASX7017E: Exception received while running file "ex1.jacl"; exception information: com.ibm.bsf.BSFException: error while eval'ing Jacl expression:
divide by zero
    while executing
"expr 1 / 0"
    invoked from within
"set x [expr 1 / 0]" 
```

我必须承认一点：我问这个问题的原因是我实际上向 WebSphere Support 报告了这个问题。不过，我对他们的答复并不完全满意。Wsadmin/Jython/Jacl/Python/Tcl 专家：您对此有何看法？

难道我做错了什么？

它是一个错误`wsadmin`吗？

这是预期的行为？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T23:13:36.070

该问题将在即将推出的 WSAS 6.1、7.0、8.0 和 8.5 的 FixPack 中得到解决。

IBM Support 有点担心破坏与以前实现的兼容性（嗯，这是有争议的，但一些脚本可能依赖于这个错误），因此需要使用`com.ibm.ws.scripting.exceptionPropagation=thrown`JVM 属性显式启用正确的行为。

我知道将此属性传递给 wsadmin 的 JVM 的两种方法：

*   `javaOption`环境变量
*   `javaoption`选项

环境变量方式：

```
export javaOption=-Dcom.ibm.ws.scripting.exceptionPropagation=thrown
./wsadmin.sh -lang jython -f script.py 
```

命令行选项方式：

```
./wsadmin.sh -javaoption -Dcom.ibm.ws.scripting.exceptionPropagation=thrown-lang jython -f script.py 
```

该修复解决了 Jython 和 Jacl 的问题。

官方文档链接：[http ://www-01.ibm.com/support/docview.wss?uid=swg1PM80400](http://www-01.ibm.com/support/docview.wss?uid=swg1PM80400)

# c++ - 在 C++ 11 中使用自制软件、gcc 和 llvm

> ID：14128298
> 
> 赞同：15
> 
> 时间：2013-01-02T19:54:57.613
> 
> 标签：c++, gcc, c++11, llvm, homebrew

这是我的问题：我想使用 gcc 或 clang 提供的 C++11 功能。但是，我有这些要求：

1.  我正在使用 mac
2.  我依赖于自制软件提供的一堆库（并且*真的*不想自己编译它们）。特别是 OSG，它本身依赖于大量其他库。和提升，虽然我总是可以自己编译。

Homebrew 似乎只想使用 gcc（如果我错了，请纠正我）。我找不到任何切换到 LLVM 的选项。虽然我知道这可能是由于并非所有库都与 LLVM 兼容，但这对于那些兼容的库来说仍然是一个不错的功能。

gcc 的 mac 上预装的 gcc 版本是 4.2。gcc 4.2 没有所需的 c++11 功能。我已经通过自制软件安装了 4.7，但是搜索如何设置自制软件来使用它都说不要这样做（mac 上的 gcc 4.2 不是香草版本，所以我得到的 4.7 版本将无法编译一些东西）。

我的问题是：是否有人为解决此问题而实施了任何建议或修复？我应该放弃 Homebrew 吗？有谁知道 Homebrew 是否有计划在未来切换到 LLVM？有没有人有任何升级计划来解决这些不兼容问题？

从长远来看，我看不出自制软件如何继续依赖 gcc 4.2，但还没有找到任何关于这个问题的真正讨论。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-26T17:00:02.783

Mac 上的默认 GCC 不是真正的 GNU GCC。它实际上是 LLVM-GCC，它是 GCC 的一个分支。几年前，LLVM-GCC 被终止，取而代之的是[DragonEgg](http://dragonegg.llvm.org)，这是一个使用 LLVM 作为 GCC 后端的 GCC 插件。

LLVM-GCC 只是一个编译器前端，它的作用是使用 GCC 前端将源代码转换为 LLVM IR[ [LLVM](http://www.aosabook.org/en/llvm.html) 11.3 简介]。一旦 IR 生成，LLVM 后端将使用它来生成二进制代码。这一步与 GCC 无关。

上述目标从 10.7 完全实现，其组件全部由 LLVM 提供的前端 clang 编译。

但是 Apple 仍然保留了 LLVM-GCC 和 GCC 运行时库。我猜它的目的可能是提供一个机会来编译一些代码 GCC ONLY。

现在让我们回答您的问题：

*   如果您想使用 C++11 功能，请`clang++ -stc=c++11 -stdlib=libc++`改用。而且[clang 可能已经支持所有 c++11 特性](https://github.com/llvm-mirror/clang/commit/e6e68b53778bb5a15c10a73a5bf18d8ab73f75e3)。
*   如果您希望自制软件支持 LLVM，它已经支持，至少在后端。
*   如果您想要使用 clang 作为编译器前端的自制软件，这取决于自制软件社区的时间表。例如，你可以附加`--with-c++11`参数来使用clang编译boost。但是你不能在`brew install autoconf`. 实际上，clang 可能无法正确编译某些组件。
*   如果你知道它可以被 clang 编译，但 homebrew 还不支持，你必须在`$HOMEBREW_ROOT/Library/Formula`目录中破解相应的 ruby​​ 脚本。幸运的是，在大多数情况下，替换`./configure blablabla`为`./configure blablabla CXX=clang++ -stc=c++11 -stdlib=libc++`效果很好。顺便说一句，如果您的 hack 成功，请向[homebrew](https://github.com/mxcl/homebrew)提出拉取请求。

所以，试试看，玩得开心。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-03T05:13:04.867

我有一个 OS X Mountain Lion 环境并使用 C++11。在这个答案中，我将打破您不编译自己的东西的要求。

我使用 Homebrew，我必须说，我建议你放弃依赖它来为你提供 clang 和 libc++ 以及所有用它们构建的公式。

我所做的，我喜欢的，是

*   从存储库中克隆 llvm、clang 和 libc++。
*   安装到`/opt/local`并放在`/opt/local/bin`上面`/etc/paths`。
*   用我的新 clang 构建我的开发工具。
*   让 Homebrew 安装像 git 这样的工具和我不会开发的东西，只是使用。

我已按照 clang 构建说明将其安装到`/opt/local`.

对于 libc++，一个细节：运行`buildit`脚本后，我将包含目录符号链接到`/opt/local/lib/c++/v1`（clang on`/opt/local`将其视为默认目录），并将库符号链接到`/opt/local/lib/`（但看起来二进制文件不会自动链接到 libc++ 上`/opt/local/lib`。你必须为此使用[install_name_tool](https://stackoverflow.com/q/16205714)）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T04:41:51.877

利用

```
clang++ -std=c++11 -stdlib=libc++ 
```

您还可以从 homebrew-dups 安装最新的 gcc

```
brew install [flags] https://raw.github.com/Homebrew/homebrew-dupes/master/gcc.rb 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T16:55:55.970

对于 LLVM `brew install --HEAD llvm`，. 要使用 clang 或 brew 安装的 gcc，请添加`--with-clang`或`--with-gcc=gcc-x.x`xx 是您想要的版本。

# ios - 使用 OALSimpleAudio 停止音频

> ID：14128301
> 
> 赞同：0
> 
> 时间：2013-01-02T19:55:09.523
> 
> 标签：ios, xcode, audio

如果我在 XCODE 中使用 OALSimpleAudio 在“touch down”上循环播放声音，并希望在“touch up”时停止该音频，那么代码看起来如何？我试过“stopBg”方法——但这会停止我所有的声音，而且我有多个声音在运行，我只希望它停止“sample001”。任何帮助将不胜感激！谢谢！

-(IBAction)sample001Touch {

```
[[OALSimpleAudio sharedInstance] playEffect:sample001 loop:TRUE]; 
```

}

-(IBAction)sample001Release {

```
NSLog(@"Stop Please"); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T20:06:03.850

根据[http://kstenerud.github.com/ObjectAL-for-iPhone/documentation/interface_o_a_l_simple_audio.html](http://kstenerud.github.com/ObjectAL-for-iPhone/documentation/interface_o_a_l_simple_audio.html)

-(id < ALSoundSource > )playEffect:loop: 返回id< ALSoundSource >，并且根据[http://kstenerud.github.com/ObjectAL-for-iPhone/documentation/protocol_a_l_sound_source-p.html](http://kstenerud.github.com/ObjectAL-for-iPhone/documentation/protocol_a_l_sound_source-p.html) ALSoundSource 已经停止。只需保存参考，然后您就可以停止它：

```
@property (nonatomic, strong) id<ALSoundSource> source; 
```

--

```
- (IBAction)sample001Touch {
    self.source = [[OALSimpleAudio sharedInstance] playEffect:sample001 loop:YES];
}

-(IBAction)sample001Release {
    [self.source stop];
    self.source = nil;
} 
```

# c# - 从字符串中解析 int 的更好方法

> ID：14128303
> 
> 赞同：0
> 
> 时间：2013-01-02T19:55:14.867
> 
> 标签：c#, string, string-parsing

我正在尝试查看是否有一种不同/更好的方式来解析我拥有的字符串。

字符串是“#def xyz[timer=50, fill=10]”。我试图从这个字符串中检索计时器和填充值。

我目前拥有的代码是：

```
string def = "#def xyz[timer=50, fill=10]";
string _timer = def.Remove(def.IndexOf(","));
_timer = _timer.Remove(0, _timer.IndexOf("=", _timer.IndexOf("timer")) + 1);

string _fill = def.Remove(def.IndexOf("]"));
_fill = _fill.Remove(0, _fill.IndexOf("=", _fill.IndexOf("fill")) + 1);

int timer = Int32.Parse(_timer);
int fill = Int32.Parse(_fill); 
```

有什么建议么？

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T20:00:27.103

我可能会使用正则表达式。例如：

```
using System;
using System.Text.RegularExpressions;

class Test
{
    static void Main()
    {
        // You can create the regex once and reuse it, of course. Adjust
        // as necessary if the name isn't always "xyz" for example.
        Regex regex = new Regex(@"^#def xyz\[timer=(\d+), fill=(\d+)\]$");
        string input = "#def xyz[timer=50, fill=10]";
        Match match = regex.Match(input);
        if (match.Success)
        {
            int fill = int.Parse(match.Groups[1].Value);
            int timer = int.Parse(match.Groups[2].Value);
            Console.WriteLine("Fill={0}, timer={1}", fill, timer);
        }
    }
} 
```

笔记：

*   这只处理非负整数
*   如果值超出范围，它将失败（有一个例外）`int`

我会说它比那些电话更清楚地表明你在做什么`Remove`......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T20:00:47.700

```
 Match m = Regex.Match("#def xyz[timer=50, fill=10]", "timer=([0-9]+?), fill=([0-9]+?)[]]");

      string timer = m.Result("$1");
      string fill = m.Result("$2"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T18:45:25.337

我喜欢尽可能使用 split，在大多数情况下它比正则表达式快得多——我没有测试，但我希望它在这里会更快。当然，这段代码几乎没有错误检查。

```
void Main()
{
  string def = "#def xyz[timer=50, fill=10]";

  string [] inBracket = def.Split("[]".ToCharArray());

  string [] elements = inBracket[1].Split(",".ToCharArray());

  int timer = int.Parse(elements[0].Split("=".ToCharArray())[1]);

  int fill = int.Parse(elements[1].Split("=".ToCharArray())[1]);

  Console.WriteLine("timer = "+timer.ToString());
  Console.WriteLine("fill = "+fill.ToString());

} 
```

# tidesdk - 使用“scons debug=1”构建潮汐dk时，我不断收到“资源暂时不可用”？

> ID：14128306
> 
> 赞同：0
> 
> 时间：2013-01-02T19:55:19.677
> 
> 标签：tidesdk

有没有人经历过这种情况并且可能有解决方法：

g++ -arch i386 -o build/osx/runtime/libtideutils.dylib -m32 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.7.sdk -syslibroot,/Applications /Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.7.sdk -lstdc++ -mmacosx-version-min=10.7 -install_name libtideutils.dylib -dynamiclib build/osx/objs/libtideutils/utils /app_manifest.os build/osx/objs/libtideutils/utils/application.os build/osx/objs/libtideutils/utils/boot_utils.os build/osx/objs/libtideutils/utils/data_utils.os build/osx/objs/libtideutils /utils/environment_utils.os build/osx/objs/libtideutils/utils/file_utils.os build/osx/objs/libtideutils/utils/platform_utils.os build/osx/objs/libtideutils/utils/url_utils.os build/osx/objs /libtideutils/utils/poco/KDigestEngine。os build/osx/objs/libtideutils/utils/poco/KMD5Engine.os build/osx/objs/libtideutils/utils/osx/boot_utils_osx.os build/osx/objs/libtideutils/utils/osx/file_utils_osx.os build/osx/ objs/libtideutils/utils/osx/osx_utilscons：*** [build/osx/runtime/libtideutils.dylib] 资源暂时不可用 s.os build/osx/objs/libtideutils/utils/osx/platform_utils_osx.os build/osx/objs/libtideutils/utils/posix/file_utils_posix.os build/ osx/objs/libtideutils/utils/posix/posix_utils.os -Lbuild/osx -Lthirdparty-osx-x86-v2/boost/lib -Lthirdparty-osx-x86-v2/poco/lib -lboost_system-mt -lboost_thread-mt - lPocoFoundation -lPocoNet -lPocoUtil -lPocoXML -lPocoZip -lPocoData -lPocoSQLite -framework Foundation -framework IOKit -framework Cocoa -framework SystemConfiguration -framework CoreServices scons：构建因错误而终止。

在 10.8.2 上使用最新的 scons 和当前的“开发”分支进行构建。它以前可以工作，但突然之间，它现在每次都开始给我上述错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T21:01:02.813

我们建议您从 TideSDK master 构建。正如“开发”名称所暗示的那样，这是一个不稳定的开发分支，也不支持用户。

TideSDK 是一个复杂的软件，这个分支被 SDK 的开发人员使用，他们通常使用 c++ 和 python 工作。软件中正在发生重大和实质性的变化。如果您有兴趣为 SDK 的开发做出贡献，请访问 freenode 上的#tidesdk。

# arrays - 为什么 Array 的 :+ 在内部无法理解？

> ID：14128316
> 
> 赞同：3
> 
> 时间：2013-01-02T19:56:23.053
> 
> 标签：arrays, scala, append

```
val tagsArray = tags.split(",")
var trimmedTagsArray: Array[String] = Array()
for(tag <- tagsArray) {
  trimmedTagsArray :+ tag.trim
} 
```

*trimmedTagsArray*之后是空的，即使*tagsArray*包含元素，即使我省略了*trim*调用。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T20:17:45.107

您需要了解 :+ 运算符。:+ 实际上不是修改现有的 trimmedTagsArray 变量，而是返回一个新数组，并将表达式“tag.trim”的结果附加到末尾。由于您既没有返回这个结果，也没有将它分配到任何地方，所以这个值被丢弃了。

我相信您实际上正在寻找的是用以下内容替换您的理解中的行。

trimmedTagArray = trimmedTagArray :+ tag.trim

虽然这将完成您想要的，但是，它不是迄今为止最好的解决方案。相反，请尝试以下...

```
val trimmedTagsArray = for(tag <- tagsArray) yield {
  tag.trim
} 
```

以上将创建一个 val（在 Scala 中优于 var），它具有所需的值，同时避免可变状态。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T19:59:03.173

有用。只是 for(...) {} 返回 Unit。你要 ：

```
for(tag <- tagsArray) yield {
  trimmedTagsArray :+ tag.trim
} 
```

# javascript - 基于 javascript 的技能计算器在 Firefox 中不起作用

> ID：14128317
> 
> 赞同：2
> 
> 时间：2013-01-02T19:56:25.673
> 
> 标签：javascript

我对 JavaScript 很陌生，只是真正研究了它在基于 Web 的技能计算器中的用途。我遇到了一个示例并根据我的需要对其进行了调整，但是在几种不同的浏览器中对其进行测试时，我注意到在 Firefox 中单击按钮时计数器不会上升或下降，单击 10 次后我仍然收到消息“你已经最大化出那个技能！” 然后再次右键单击 10 次，我会收到消息“您已将技能发挥到极致！” 正如我所料，但柜台本身并没有改变。

是否有一个简单的解决方法可以让它在 Firefox 中运行，还是我应该走另一条路？

CSS：

```
.skillbutton {
  background:url() no-repeat;
  cursor:pointer;
  width: 250px;
  height: 12px;
  border: none;
  color: transparent;
}

#skill1counter {
  margin-left: auto ;
  margin-right: auto ;
  font-size:0.6em;
}

#skill1 {
  width: 250px ;
  height: 12px ;
  margin-left: auto ;
  margin-right: auto ;
  background-image:url(images/skill/skill1.png);
  background-repeat:no-repeat;
} 
```

的HTML：

```
<div id='skill1'>
<input type="button" class="skillbutton" onclick="SkillManager.increase('skill1')" oncontextmenu="SkillManager.decrease('skill1'); return false;" value="S1" />
</div>
<div id='skill1counter' style="font-weight: bold">0</div> 
```

剧本：

```
<script type="text/javascript">

var SkillManager = (function() {
var max = 50,
    skills = {
        skill1: {
            cur: 0,
            max: 10
        },
        skill2: {
            cur: 0,
            max: 10
        },
        skill3: {
            cur: 0,
            max: 10
        }
    },
    totalUsed = 0;

var increase = function(skill) {
    if (totalUsed < max && skills[skill].cur < skills[skill].max) {
        skills[skill].cur++;
        totalUsed++;
        updateDisplay(skill, skills[skill].cur, max - totalUsed);
    } else if(skills[skill].cur === skills[skill].max) {
        alert("You have maxed out that skill!");
    } else {
        alert("You have used all your skill points!");
    }
};

var decrease = function(skill) {
    if (skills[skill].cur > 0) {
        skills[skill].cur--;
        totalUsed--;
        updateDisplay(skill, skills[skill].cur, max - totalUsed);
    } else {
        alert("You can't decrease a skill with 0 points in it!");
    }
};

var updateDisplay = function(skill, value, totalRemaining) {
    document.getElementById(skill + "counter").innerText = value;
    document.getElementById("remainingPoints").innerText = totalRemaining;
};

return {
    decrease: decrease,
    increase: increase
};
}());

</script> 
```

另外作为一个附带问题，我将如何添加一个 if 语句，说明“如果技能 1 = 小于 10，则技能 2 不能增加”或技能 2 增加，技能 1 必须为 10？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T20:11:32.613

首先，您缺少`remainingPoints`HTML 中的元素。

```
<div id='remainingPoints'></div> 
```

其次，在 Firefox 中，替换`innerText`为`textContent`它应该可以正常工作，如下[所述](http://blog.coderlab.us/2005/09/22/using-the-innertext-property-with-firefox/)：

```
var updateDisplay = function(skill, value, totalRemaining) {
    if(document.all){
        document.getElementById(skill + "counter").innerText = value;
        document.getElementById("remainingPoints").innerText = totalRemaining;
    } else {
        document.getElementById(skill + "counter").textContent = value;
        document.getElementById("remainingPoints").textContent = totalRemaining;
    }

}; 
```

[在这里](http://jsfiddle.net/yh7C6/1/)拉小提琴。

# javascript - 没有服务器的Javascript下载图像

> ID：14128318
> 
> 赞同：1
> 
> 时间：2013-01-02T19:56:27.023
> 
> 标签：javascript, jquery, html

> **可能重复：**
> [在内存中创建一个文件供用户下载，而不是通过服务器](https://stackoverflow.com/questions/3665115/create-a-file-in-memory-for-user-to-download-not-through-server)

我的设置是我有一张包含带有图像的 html 页面的 cd。我希望能够在按下时通过链接或按钮保存这些图像。我不确定这是否可能，因为我知道您可以通过修改标头来做到这一点，但我正在寻找一种 javascript 方式，因为这需要与大多数浏览器一起使用，并且没有直接来自磁盘的服务器。

欢迎任何帮助和建议。

# c# - VS 2010如何开发MS Outlook插件？

> ID：14128321
> 
> 赞同：1
> 
> 时间：2013-01-02T19:56:39.900
> 
> 标签：c#, winapi, outlook-addin

任何人都可以给我一些很好的参考或教程链接，以使用 Visual Studio 开发 Outlook 插件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T21:08:34.143

您可以轻松地为 Microsoft Outlook 创建 VSTO（Visual Studio Tools for Office）加载项。

我将使用 Office 和 Visual Studio 2010 作为示例：

在 Visual Studio 中：

选择文件 -> 新建项目 -> Office -> Outlook 2010 插件

将 ThisAddIn_Startup 替换为以下内容：

```
private void ThisAddIn_Startup(object sender, System.EventArgs e)
    {
        System.Windows.Forms.MessageBox.Show("Outlook starting up...");
    } 
```

运行该应用程序将启动 Outlook 显示该消息。

既然您知道如何在项目中创建新的插件，请查看以下资源：

1) [Outlook 开发者视频中心](http://msdn.microsoft.com/en-US/office/gg263356)

2)[面向开发人员的 Outlook](http://msdn.microsoft.com/en-US/office/aa905455) - 此 MSDN 页面专门为 Microsoft Office Outlook 开发人员提供，包含数百个示例，我相信您会发现此站点上的文章和示例非常有用，并且如果您遇到困难，就像您在帖子中提到的那样在某个地方，您可以随时在 SO 上发布问题。

# php - 从注册页面将行插入 MySQL 数据库

> ID：14128323
> 
> 赞同：0
> 
> 时间：2013-01-02T19:56:43.327
> 
> 标签：php, database

我正在用 PHP 编写一个脚本来将用户插入数据库中的表中。这是代码：

```
<?php
$email      = check_input($_POST['EmailAddress'], "Enter your email address");
$pass       = check_input($_POST['Password'], "Enter a password");
$first_name = check_input($_POST['FirstName'], "Enter your first name");
$last_name  = check_input($_POST['LastName'], "Enter your last name");
$gender     = check_input($_POST['Gender']);
$dobmonth   = check_input($_POST['dobmonth']);
$dobday     = check_input($_POST['dobday']);
$dobyear    = check_input($_POST['dobyear']);
$dob        = $dobmonth.'/'.$dobday.'/'.$dobyear;
$phone      = check_input($_POST['CellPhone']);
$fanmail    = check_input($_POST['FanMail']);

if (verify($email) === true) { 
```

从这里编辑：

```
$link = new mysqli("localhost","263764","Corvette88", "256764 ");
if ($mysqli->connect_errno) {
    echo "Failed to connect to MySQL: (" . $mysqli->connect_errno . ") " . $mysqli->connect_error;
} else {
    echo 'connected to db table ';
}
echo $mysqli->host_info . "\n";

$query = "INSERT INTO 68_users VALUES ('$email','$pass','$first_name','$last_name','$dob','$gender','$phone','$fanmail')" or die(mysql_error());
if ( !mysqli_query($link, $query) ) {
echo 'error: '.mysqli_error($link);
exit();
}

echo "1 record added ";

mysqli_close($link); 
```

到这里..

```
echo"connection closed";
} else {echo'unverifiable email address ';
    echo $email;
}

function check_input($data, $problem='') {
$data = trim($data);
$data = stripslashes($data);
$data = htmlspecialchars($data);
if ($problem && strlen($data) == 0) {
    die($problem);
}
return $data;
}

function conntodb() {

}

function verify($email){
$isValid = true;
$atIndex = strrpos($email,'@');
if (is_bool($atIndex) && !$atIndex) {
    return false;
} else {
    $domain = substr($email,$atIndex+1);
    $local = substr($email, $atIndex);
}
$localLen = strlen($local);
$domainLen = strlen($domain);
if($localLen < 1 || $localLen > 64) {
    return false;
}else if ($domainLen < 1 || $domainLen > 255) {
    return false;
}
if ($local[0] == '.' || $local[$localLen-1] == '.') {
    return false;
} elseif (preg_match('/\\.\\./', $local)) {
    return false;
}
if(!preg_match('/^[A-Za-z0-9\\-\\.]+$/', $domain)) {
    return false;
} else if (preg_match('/\\.\\./', $domain)) {
    return false;
} else if (!(checkdnsrr($domain,"MX") || checkdnsrr($domain, "A"))) {
    return false;
}
return $isValid;
}

?> 
```

我已经为代码设置了检查点，以显示它是否出错以及是否成功。

我的问题是：它告诉我它已成功地将行添加到数据库中，但是当我检查我的数据库时，它没有显示数据库以任何方式被填充。我不知道我哪里出错了，因为它正在通过我的检查点..有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T19:58:33.170

您没有检查查询中的错误：

```
mysql_query ("INSERT INTO 68_users (email, pass, first_name, last_name, dob, gender,     phone, fanmail)
VALUES ('$email','$pass','$first_name','$last_name','$dob','$gender','$phone','$fanmail')"); 
```

改为这样做：

```
mysql_query ("INSERT INTO 68_users (email, pass, first_name, last_name, dob, gender,     phone, fanmail)
VALUES ('$email','$pass','$first_name','$last_name','$dob','$gender','$phone','$fanmail')") or die(mysql_error()); 
```

此外，您甚至不应该使用 mysql_*。请改用 PDO 或 MySQLi。看到[这个](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers;)

尝试改变

```
mysqli_query($link, $query); 
```

至：

```
if ( !mysqli_query($link, $query) )
{
    echo 'error: '.mysqli_error($link);
    exit();
} 
```

# c# - 使用包含大量数据的文本框恢复 WinForm

> ID：14128325
> 
> 赞同：10
> 
> 时间：2013-01-02T19:57:07.890
> 
> 标签：c#, winforms, textbox, restore, repaint

我在 C# (VS2010) 中创建了一个表单，其中包含（除其他外）一个文本框控件。文本框在某些时候可能包含大量数据（约 300 万个字符）。

滚动或移动表单时没有遇到任何问题，但是当表单最小化并再次恢复时，会触发重绘序列（我相信），这会导致表单重绘大约 5-10 秒的大延迟。

我已经尝试了几种解决方案：

1.  使用双缓冲——根据我的阅读，双缓冲仅适用于表单本身，而不适用于其控件

    `this.SetStyle(ControlStyles.DoubleBuffer, true);` `this.SetStyle(ControlStyles.AllPaintingInWmPaint, true);` `this.SetStyle(ControlStyles.UserPaint, true);`

2.  一旦最小化使用禁用文本框重绘：`SendMessage(this.my_textBox.Handle, WM_SETREDRAW, false, 0);` 并在表单恢复后启用。我注意到如果我**不重新启用文本框 repaint** ，表格 repaint lag 也存在。

3.  使用位图的手动双缓冲 - 与 #1 类似的结果。

我在某处读到此问题可能与尝试缩小或调整数据量的文本框控件有关，但无法覆盖它。

我之前在 MFC 中有过相同的项目，但没有遇到任何重绘或滞后问题。

请告诉我如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T20:33:31.120

发现问题了！！！问题与文本框锚属性有关。一旦我删除它，窗口恢复是立即的。顺便说一句，不需要新的自定义类

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T22:03:53.163

有可能我不理解某些东西（或者你不能这样做是有原因的），但你不能就这样派生出你自己的 TextBox 类吗？

```
public class MyTextBox : TextBox
{
    public MyTextBox() : base()
    {
        SetStyle(ControlStyles.AllPaintingInWmPaint |
            ControlStyles.OptimizedDoubleBuffer, true);
        SetStyle(ControlStyles.ResizeRedraw, false); 
    }
} 
```

然后用它代替常规文本框？

# mvvm - 我应该将模型的视图特定属性放在 MVVM 集合中的哪里（特别是 Knockout.js）？

> ID：14128331
> 
> 赞同：0
> 
> 时间：2013-01-02T19:57:44.360
> 
> 标签：mvvm, knockout.js

假设我有一个 ko.observableArray 的 Person 模型（如下）：

```
// Model
var Person = function () {
    this.name = ko.observable();
    this.age = ko.observable();
};

// View Model
var viewModel = {
    people: ko.observableArray([
        new Person("Bob", 21),
        new Person("Bill", 25)
    ])
}; 
```

使用以下 HTML：

```
 <ul data-bind="foreach: people">
    <li>
        <span data-bind="text: name"></span>
        <ul data-bind="visible: isVisible">
            <li>
                <span data-bind="text: age"></span>
            </li>
        </ul>
    </li>
</ul> 
```

我应该放在哪里`isVisible`？

**模型**- 将它放在模型上似乎是错误的，因为它与人无关。

**视图模型**- 我需要每个人都有，所以把它放在视图模型上是行不通的。

[小提琴](http://jsfiddle.net/mdavis/LkqTU/6873/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T20:55:28.553

在 JavaScript 中没有模型。只要有一个视图模型。您的模型应该只存在于您实际存储对象的服务器上。

在这种情况下，Person 确实是一个视图模型。然后，您可以在主视图模型中放置大量 Person 对象，但每个人仍然是一个视图模型。

因此，将您的 isVisible 属性放在您的 Person 视图模型上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T20:05:37.720

我认为您在 Model 和 ViewModel 之间感到困惑。在您的情况下，Model 是 ViewModel，而您所说的 viewModel 是 ViewModel 的一个实例，即，一旦您使用 ko.observables 定义对象，它就是仅在客户端使用的 ViewModel。您需要的任何数据绑定属性都应该在 ViewModel 上定义。因此，总而言之，您应该根据您的要求将 Person 对象定义中的 isVisible 定义为可观察值或计算值。

# architecture - 持久性无知的报告策略

> ID：14128333
> 
> 赞同：1
> 
> 时间：2013-01-02T19:57:56.177
> 
> 标签：architecture, reporting, persistence-ignorance

我需要有关报告策略的建议。我们目前使用 Crystal Reports，但这在这里可能无关紧要……如果技术选择是问题，我们可以使用不同的东西。

我正在构建一个可以处理相当复杂的发票的应用程序，但归根结底，它们都是`GetTotals`. 持久性无知进展顺利，我正在隔离测试，以后可以存储所有内容。

但现在说我要报告发票总额。生成这些总数是应用程序的一部分，而不是数据库。我不想在数据库中复制该逻辑。过去，我会从一开始就将发票逻辑构建到数据库中，但这迫使我在应用程序方面采用相当脆弱的策略。

我该如何解决这个冲突？

谢谢你的建议，

——伊桑·尼尔森

# html - 带有表格单元格显示的 div 宽度

> ID：14128338
> 
> 赞同：0
> 
> 时间：2013-01-02T19:58:25.507
> 
> 标签：html, css

我想在 div 中垂直对齐我的按钮。我正在使用“显示：表格单元”和“垂直对齐：中间”。问题是包含的 div 被缩小到两个按钮的大小，而不是保持其原始宽度。

jsFiddle：[我的表格单元演示](http://jsfiddle.net/8WVCA/)

html:

```
<div class="container">
<div class="bar">
<input type="button" value="Click Me">
<input type="button" value="Click Me">
</div>
<div>​ 
```

CSS：

```
.container{ width: 600px;}
.bar{
background-color: blue;
    //width: 100%;
    height: 100px;
    display:table-cell;

    vertical-align: middle;
}.bar input{height: 60px;}
​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T20:05:13.963

您可以应用`display:table-row`到容器：

来源： http: [//jsfiddle.net/Ktnq9/](http://jsfiddle.net/Ktnq9/)
演示：http: [//jsfiddle.net/Ktnq9/show](http://jsfiddle.net/Ktnq9/show)

```
.container {
    width: 600px;
    table-layout: fixed;
    display: table-row;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T20:07:19.810

添加`display: table;`到`.container`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T20:53:43.800

如果您不关心它们具有可变高度的容器或容器，您还可以通过向容器添加相同大小的边距并删除表格单元格引用来实现这一点：

```
.bar input{margin: 30px 0;} 
```

[http://jsfiddle.net/8WVCA/11/](http://jsfiddle.net/8WVCA/11/)

# git - 如何找到源代码转储的 git 版本？

> ID：14128342
> 
> 赞同：2
> 
> 时间：2013-01-02T19:58:32.280
> 
> 标签：git, version-control

一家商业公司已经分叉了一个开源项目并添加了他们自己的命令行选项。我的问题是分叉是很久以前的事了，我想更新代码以利用新功能。

鉴于他们已遵守 GPL 并发布了修改后的源的存档，我怎样才能**最好**地确定他们分支的 git 版本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T08:36:13.163

由于您只需要针对 tarball 找到它，因此对 fork-point 的最佳猜测是找到与您的 tarball 差异最小的提交。

如果您认为您的 fork 是从某个已发布的标记版本开始的，您可以使用以下命令：

1.  将你的 tarball 导入到某个分支（当然你不需要在任何地方发布它）
2.  切换到那个分支
3.  运行此命令：

> `eval "`git for-each-ref --shell --format 'echo -n %(objectname) " "; git diff %(objectname) --minimal | wc -l' refs/tags`" | sort -n -k 2 -r | tail`

此命令将在第一列中打印提交名称，在第二列中更改行数（大约，因为它也计算 diff 的标题，但应该不会有太大变化），按更改行数排序。您的分叉点应该是那里的最后一行。

它是如何工作的：它在每个标签和你的 tarball 输入之间运行 git diff，具有统一的格式，没有任何上下文和这个差异的计数行。然后它按更改的行数排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T20:37:43.123

假设您可以访问原始开源项目和商业分支的 Git 存储库，您可以使用`git merge-base`：

```
git merge-base original_project/master commercial_fork/master 
```

这将找到两者最近的共同祖先`original_project/master` `commercial_fork/master`。该命令的输出是当前派生分支的 Git 修订版。您可以使用`git describe`或`git tag --contains`尝试识别与该 Git 修订相对应的项目版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T20:01:41.803

在您的公司开始编辑之前查看最后一个提交 id（分叉点）。

然后在 os repo 中找到该提交 ID。

然后我建议区分两个存储库的最新提交，修补您公司存储库中的更改并尝试将其应用于新分支中的操作系统存储库。修复一些冲突，测试，测试，测试，希望你的好！

# facebook - 将发布的照片 与应用页面链接

> ID：14128344
> 
> 赞同：6
> 
> 时间：2013-01-02T19:58:38.453
> 
> 标签：facebook, facebook-graph-api, photo, facebook-apps

我正在设计一个面向照片的 Facebook 应用程序，它可以让用户以特定于应用程序的方式讲述故事，并通过发布一张最好是大的“封面”照片来宣传这些故事。照片发布由应用程序完成，希望看到故事的人需要一种简单而明显的方式来重定向到相应的应用程序生成的页面。所以这就是问题所在。

Facebook 应用程序是否可以代表用户发布一张最大（列宽）的照片，以便当其他人（包括非用户）点击照片时，它会将他们带到与该照片相关的特定页面应用程序而不是默认放大照片？如果没有，最好的解决方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T20:10:09.893

要在新闻提要上获得最大的大照片，您应该查看[用户生成的照片](https://developers.facebook.com/docs/opengraph/usergeneratedphotos/)，这需要您添加到打开图形操作中的两个附加参数，以指示用户生成的照片应该在新闻提要和股票代码中具有最大的照片显示。

OG POST 示例：

> [https://graph.facebook.com/me/nyccookbook:cook](https://graph.facebook.com/me/nyccookbook:cook)？
> 
> 食谱=http://www.yourdomain.com/pizza.html&
> 
> 图片[0][url]=http://www.yourdomain.com/images/my_camera_pizza_pic.jpg&
> 
> 图片[0][user_generated]=true&
> 
> access_token=YOUR_ACCESS_TOKEN

如果照片不是用户生成的，那么[显式共享](https://developers.facebook.com/docs/technical-guides/opengraph/explicit-sharing/)是在新闻提要和股票代码上获得最大显示尺寸的替代方法，前提是您遵循显式共享的所有要求和准则。

> 当其他人（包括非用户）点击照片时，它会将他们带到与应用程序相关的特定页面，而不是默认放大照片

这是不可能的，因为 FB 用户希望在单击照片时会放大照片。如果点击照片会启动一个 URL，这是一种糟糕的用户体验，因为这不是任何人在点击 FB 上的照片时所期望的。

我能想到的最好的解决方法是编辑图像的描述，并带有指向您应用程序上特定页面的链接，这样当 FB 用户看到图片时，他们可以单击描述中的链接去您想要的地方。

# linux - sendmsg() 中的辅助数据如何工作？

> ID：14128345
> 
> 赞同：10
> 
> 时间：2013-01-02T19:58:41.373
> 
> 标签：linux, network-programming

sendmsg() 允许将辅助数据发送到另一个套接字，我想知道这是如何工作的。

1) 辅助数据是否与普通消息一起打包？

2）如果是这样，远程接收套接字如何知道如何解析这个？

3) 远程接收客户端如何检索这些辅助数据？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-06-30T21:54:14.230

辅助数据不在网络上发送 - 从不。对于 Unix 域套接字，辅助数据用于在进程之间发送或接收文件描述符以共享或负载平衡任务。注意：Unix 域套接字在同一台机器上运行的进程之间传输信息，而不是在不同机器上运行的进程之间传输信息。

同样，如果进程在不同机器上运行：您的数据包不使用任何辅助概念将与在发送机器（或接收机器）上应用辅助概念时的数据包完全相同。因此，辅助数据不是您的数据包附带的东西。

辅助数据用于接收从内核到用户空间应用程序的*额外*数据包相关服务/信息，否则无法使用。例如，假设机器 B 在线接收到一些数据包，并且您想知道数据包从哪个入口接口到达？你怎么会知道这个？辅助数据来拯救。

辅助数据是在辅助控制缓冲区中设置的一种标志，并在调用 sendmsg()/recvmsg() 时传递给内核，它告诉内核当数据包发送或到达时，要为应用程序调用提供哪些额外的服务/信息电话。

辅助数据是内核和用户空间应用程序之间的通信方式，或者在 UNIX 套接字的情况下是同一台机器上的进程之间的通信。这不是电线上的数据包所具有的东西。

供您参考，请[在此处](https://drive.google.com/open?id=0B56H_R1fVFZXUlc5RlIwdVpYOXc)下载在我的 ubuntu 机器上完美运行的代码示例。辅助数据概念在`src/igmp_pkt_reciever.c`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-02T20:04:12.583

您只能以几种选择方式使用辅助数据：

*   您可以使用它来获取接收接口（IPv4）
*   您可以使用它来指定跃点限制（对于 IPv6）
*   您可以使用它来指定流量类别（同样，IPv6）
*   ……
*   **您可以使用它来传递/接收文件描述符或用户凭据（Unix 域）**

这三种情况只是通过`recvmsg(2)`. *最后一个是最有趣的：实际发送*辅助数据的唯一情况是使用 Unix 域套接字，其中所有事情都发生在内核中，因此实际上没有任何东西进入网络。

# websocket - IIS 7.5 上的 SignalR WebSockets

> ID：14128347
> 
> 赞同：24
> 
> 时间：2013-01-02T19:59:04.090
> 
> 标签：websocket, iis-7.5, real-time, signalr

在我的 IIS 7.5 上，我的 SignalR 应用程序总是使用长轮询。根据我的搜索，IIS 7.5 还不支持 WebSockets。

我希望，我错过了一些在 IIS 7.5 中启用 WebSockets 的工具或配置。还是我没有？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-01-02T22:20:34.467

您不能在 IIS 7.5（换句话说，在 Windows Server 2008 R2 或 Windows 7）上使用 WebSocket，因为它需要 HTTP.sys 级别更改 AFAIK。因此，您需要 IIS 8.0 和 Windows Server 2012 或 Windows 8 组合来利用 WebSocket。此外，IIS Express 8.0 也支持 WebSockect，但如果您使用的操作系统低于 Windows 8 或 Windows Server 2012，您仍然无法利用它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-15T01:02:39.280

IIS 8 Express 支持 websockets[新特性](http://www.iis.net/learn/extensions/introduction-to-iis-express/iis-80-express-readme#Changes)

Windows 7 被视为低级操作系统，不支持 Web 套接字。[已知问题和限制](http://www.iis.net/learn/extensions/introduction-to-iis-express/iis-80-express-readme#KnownIssues)

如果您想支持 Web 套接字，是时候升级到 Windows 8 了！

* * *

## 回答 #3

> 赞同：-19
> 
> 时间：2013-03-24T08:42:20.513

下面总结了使用 IIS 7.5 在 Windows 2008r2 上托管所需的设置步骤：

[更新 SignalR 应用程序的 web.config 文件](http://blogs.msdn.com/b/timlee/archive/2013/03/21/hosting-a-signalr-application-on-windows-2008r2-and-iis-7-5.aspx#config)以启用“为所有请求运行所有托管模块”（简而言之，这是 RAMMFAR 设置）。

更新使用 SignalR与服务器通信[的网页：添加对 json2.js 库的引用。](http://blogs.msdn.com/b/timlee/archive/2013/03/21/hosting-a-signalr-application-on-windows-2008r2-and-iis-7-5.aspx#htmlpage)添加一个标签，强制内容以最近的浏览器模式显示。

[使用 IIS 7.5 设置 Windows Server 2008r2，](http://blogs.msdn.com/b/timlee/archive/2013/03/21/hosting-a-signalr-application-on-windows-2008r2-and-iis-7-5.aspx#winserver)如下所示： 安装 SignalR 应用程序所需的 .NET Framework 版本。创建一个站点并将其与适当的应用程序池相关联。

**更新 Signalr 应用程序的 Web.config 文件**

在 SignalR 应用程序的 web.config 文件中，添加 RAMMFAR 设置以启用为所有请求运行所有托管模块。需要此设置才能让 SignalR 示例应用程序在所有浏览器中的 Windows 2008r2 和 IIS 7.5 上运行。

```
<system.webServer>
   <modules runAllManagedModulesForAllRequests="true">
   </modules>
</system.webServer> 
```

**更新使用 SignalR 的网页**

在使用 SignalR 与服务器通信的应用程序网页中，添加以下代码。

添加对 json2.js JSON 解析器库的引用。该脚本为以前没有它的浏览器版本提供了 JSON 解析器。您可以通过以下两种方式之一添加脚本：将 NuGet 包 json2.js 添加到您的项目中，然后在您的网页中引用它：

或者作为替代方案，在 CDN 上引用 json2.js：

在页面的 head 部分添加以下标记。此标记（特别是 IE=edge 值）强制 Internet Explorer 以可用的最新版本显示内容，而不是阻止 SignalR 代码工作的早期模式（例如 IE7）。

**设置 Windows Server 2008r2 和 IIS 7.5**

如前所述，我在 .NET 4 上的 SignalR 入门教程中构建了示例 SignalR 应用程序。这是 Windows 2008r2 和 IIS 7.5 上的常见托管方案。该服务器是 Windows Server 2008r2 和 IIS 7.5 的新默认默认安装。

安装所需的 .NET Framework 版本。在这种情况下，我安装了 .NET Framework 4。在 IIS 管理器中创建一个新站点，并将该站点与应用程序池相关联。使用集成模式应用程序池，SignalR 不支持经典模式。对于这个应用程序，我使用了 ASP.NET v4.0 应用程序池。

完成上述设置步骤后，我能够将基于 .NET Framework 4 版本的 SignalR 入门示例部署到服务器，它在 IE（版本 8、9 和 10）、Chrome 和Firefox，即使它使用后备传输方法（IE 中的永久帧，以及其他浏览器中的服务器发送事件）。SignalR 开发人员的有趣之处在于，除了上述步骤之外，我无需在应用程序中的任何位置更改任何一行 SignalR 代码即可完成这项工作。

这是一个简单的案例，但表明当服务器上的 websockets 支持不可用时，SignalR 确实支持“自动回退”到早期的传输机制。

# jquery - Kendo UI Mobile - 本地视图上的刷新页面显示空白屏幕

> ID：14128350
> 
> 赞同：1
> 
> 时间：2013-01-02T19:59:11.093
> 
> 标签：jquery, kendo-ui

假设我在 example.com 上有一个网站

它包含两个本地视图，“数据库”和“年份”

最初，加载数据库视图。

用户导航到“年”视图。

地址栏（至少在 android 2.3 中）现在显示为 example.com#Year

然后用户决定出于任何原因刷新页面。

地址 example.com#Year 被刷新，用户会看到一个空白的白色屏幕。

有人对如何处理这种情况有任何建议吗？显然，无论用户在哪个视图，如果刷新，我希望它显示..

谢谢！

**更新：**

这是一些有助于描述我的问题的代码：

html:

```
<div data-role="view" id="Database">
    <div data-role="content">
        <p><strong>This is the Database view</strong></p>
        <a data-role="button" id="databaseButton" href="#Year">Go to Year View</a>
    </div>
</div>

<div data-role="view" id="Year">
    <div data-role="content">
        <p><strong>This is the Year view</strong></p>
        <a data-role="button" id="yearButton">Refresh Page</a>
    </div>
</div>​ 
```

脚本：

```
var app = new kendo.mobile.Application($(document).body, {
    initial: "Database"
});

$("#yearButton").click(function() {
    // location.reaload();
    // cannot simulate page refresh by the user in jsfiddle

    // the current browser address is example.com/index.html#Year
    // reloading this address produces a blank white screen
    // because of the #Year parameter
}); 
```

[http://jsfiddle.net/VUN3g/16/](http://jsfiddle.net/VUN3g/16/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T20:06:13.407

您能否确认您使用的是最新版本的 Kendo UI (2012.3.1114) 和 jQuery 1.8.2？

我无法使用您的代码复制问题并使用以下 URL 在 Android 2.3 上进行测试...

[http://jsbin.com/aqireb/1](http://jsbin.com/aqireb/1)

# sql-server-2008 - 使用外部数据库部署 Web 应用程序

> ID：14128351
> 
> 赞同：0
> 
> 时间：2013-01-02T19:59:13.917
> 
> 标签：sql-server-2008, web-deployment, web-application-project

我有一个使用 SQL Server 数据库的 Web 应用程序（网站）。

我计划创建一些克隆站点，因此希望将数据库放在主项目文件夹之外的自己的文件夹中。

这是我第一次部署 Web 应用程序，所以我有几个问题。

1) 将数据库定位在项目之外是一种可接受的共享数据库的方式吗？

2）我的本地机器和远程机器之间的连接字符串会有所不同。远程有Sql2008 Web版和我的本地机器SQL Server Express。目录结构也将有所不同，因为它不是虚拟的。这些是我能做些什么来自动化这个还是纯粹是一个手动小提琴？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T20:04:55.487

1.  如果您不希望将数据库绑定到项目，那么您需要一个可以被其他项目/站点访问的中心位置

2.  使用存储在中央位置的连接字符串，例如每个 Web 应用程序的 Web.Config。您可以创建多个具有不同名称的连接字符串，指向不同的数据库源，例如 RemoteConnection 和 LocalConnection。

例子

```
<add name="ApplicationServices"
     connectionString="Local DB"
     providerName="System.Data.SqlClient" />

<add name="ApplicationServices_2"
         connectionString="Remote DB"
         providerName="System.Data.SqlClient" /> 
```

在本地服务器和远程服务器之间切换时，请确保正确的连接名称为“ApplicationServices”，您无需更改代码

# git - 将提交的一部分（按行号）重新提交到 git 中的另一个提交

> ID：14128353
> 
> 赞同：0
> 
> 时间：2013-01-02T19:59:29.503
> 
> 标签：git, commit

假设我在一大堆文件中提交了一大堆行作为提交 A 并带有消息“提交 A”

假设我想将提交 A 的一部分（按行号）重新提交为带有消息“提交 B”的新提交

我如何在 git 中实现这一点？（此外，我尝试重新提交的提交部分由行号标识，并且同一文件中还有我不想重新提交的其他行）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T20:29:25.590

目前尚不清楚您要问什么，但我假设您想将提交拆分为两个提交。如果是这样，您可以使用交互式变基来执行此操作。请参阅 中的“拆分提交”部分`git help rebase`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T21:47:38.883

如果您想提交*大部分*行，则更简单的路线可能会`git cherry-pick --no-commit`在您之前进行适当的编辑`git commit`。但是，如果您要提交的部分位于较小的一端，`git rebase -i`则在执行 a 之前将所需更改与不需要的更改分开`git cherry-pick`可能会更容易。如果您确实想保留原始提交，请确保首先创建一个临时分支。

# php - 使用带有未知数量参数的 bind_parameters

> ID：14128355
> 
> 赞同：0
> 
> 时间：2013-01-02T19:59:30.643
> 
> 标签：php, mysql, sql-like

我正在将 php 与 mysqli 一起用于 Web 项目。

假设我们需要找到标题为“She is like the wind”的歌曲。
如果我们确定用户会输入歌曲的歌​​词以便我们可以这样做（伪代码）：

```
get input and apply explode()
concat each word with % between them
and execute query 
```

使用此输入：“she the wind”，将转换为“%she%the%wind%”，即可找到歌曲。
但是当输入是这样的：“wind like”->“%wind%like%”时，就找不到歌曲了。

我想通过添加`like %?% and`与单词数组长度一样多的次数来制作 $query 字符串。这样 $query 字符串就准备好了。

问题出现在绑定参数 $vars 参数上。
同样，$types 字符串可以通过以下方式连接：

```
$types .= "s"; //again, the number of times as the length of the array. 
```

但是代表单词的变量呢？如果有 2 个单词，函数调用将类似于：

```
bind("ss", $word1, $word2) 
```

要使用多少个 $word 变量？

我们可以设置要搜索的最大单词数，在示例 5 中，但这里我们遇到了另一个问题。不会使用的变量的内容是什么？例如，如果输入是 2 个单词，最后 3 个变量将包含什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T20:03:39.903

对于可变数量的绑定参数，您可以将它们绑定在一个循环中，一次一个。

但是，在您目前的情况下，您实际上只有一个要绑定的变量。因此，只需将您的搜索字符串变为变量，然后将其绑定到查询。

# c# - 使用 join、group-by 和 where 将 sql 转换为 linq

> ID：14128357
> 
> 赞同：3
> 
> 时间：2013-01-02T19:59:37.443
> 
> 标签：c#, linq, join, group-by, aggregate

我有以下 sql，我想将其转换为 linq

```
SELECT Contrato.finca, SUM(Pago.Importe_subtotal)
FROM Pago, Contrato
WHERE Pago.Contrato = Contrato.ID AND Pago.pagado = 1
GROUP BY Contrato.finca
ORDER BY 2 DESC
GO 
```

我现在在 linq 中的内容如下，但 group by 不起作用。

```
var x = from contrato in ctx.Contratos 
        join pago in ctx.Pagos
        on contrato.ID equals pago.Contrato 
        where pago.pagado == true 
        group contrato by contrato.finca
        select contrato.Finca1; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T20:25:35.033

认为这应该有效：

```
ctx.Pagos.Where(m=>m.pagado==true).GroupBy(m=>m.Contrato.finca) 
    .Select(m=> new { Id= m.Key, Val= m.Sum(n => n.Importe_subtotal)}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T20:10:08.877

Try

```
var x = from contrato in ctx.Contratos 
        join pago in ctx.Pagos
        on contrato.ID equals pago.Contrato 
        where pago.pagado == true 
        group new {contrato, pago} by contrato.finca into g
        select new {
            key = g.Key, 
            sum = g.Sum(p => p.pago.Importe_subtotal)
        }; 
```

# javascript - 如何阻止 HTTP 请求？

> ID：14128359
> 
> 赞同：1
> 
> 时间：2013-01-02T19:59:42.613
> 
> 标签：javascript, jquery, html, css

我正在制作一个响应式网站，因此我想在移动浏览器上隐藏某些图像。

如何阻止对这些隐藏图像的 HTTP 请求？

另外，如何阻止对背景图像（或任何图像）的请求并显示不同的图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T20:09:09.173

It is not possible to block the requests. However there are ways of insuring that different images are sent to mobile browsers.

Here are some alternate approaches to the problem of sending different images to mobile browsers:

*   [Adaptive Images](http://adaptive-images.com/)
*   [the srcset attribute](http://www.w3.org/html/wg/drafts/srcset/w3c-srcset/)
*   [HiSRC](https://github.com/teleject/hisrc#readme)
*   [picturefill](https://github.com/scottjehl/picturefill)
*   [Responsive Enhance](https://github.com/joshje/Responsive-Enhance)
*   [SenchaIO](http://www.sencha.com/products/io)
*   [rwdImages](https://github.com/stowball/jQuery-rwdImages)
*   [Responsive Images](https://github.com/filamentgroup/Responsive-Images)
*   [Use media queries](http://christianheilmann.com/2012/12/19/conditional-loading-of-resources-with-mediaqueries/?utm_source=html5weekly&utm_medium=email)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T20:10:37.163

You can try either of the approaches or a combination of both:

1) Use Javascript/JQuery to load all background images and assets after page loads as needed by the layout. Media queries will not stop the browser from loading all images/assets.

2) You can look into setting up a file stream on the server with say PHP, in which you can check the user agent and determine if it is a valid request then stream the file to the browser. This approach will also give you better control over external links and downloads.

Hope this helps. Good Luck.

# visual-studio-2010 - VB当文件存在时，改变文件名

> ID：14128363
> 
> 赞同：0
> 
> 时间：2013-01-02T20:00:07.057
> 
> 标签：visual-studio-2010, file-io

只是在这方面寻求一些帮助。我尝试了一些不同的东西，我很困惑。我正在尝试检查目录中是否存在文件，如果存在，那么我想重命名添加`- Copy`到文件名。然后它应该再次检查是否存在冲突，如果没有冲突，它应该移动文件。听起来很简单，但它根本不起作用。由于我无法从`String`to转换`DirectoryInfo`，我必须声明多个变量，而且感觉不对。我能做些什么来解决这个问题？

```
Dim fileExt As String = ""

Dim oldFileName As String = file.FullName
Dim newFileName As String = oldFileName
Dim newFileLocation = Environment.GetSpecialFolder(Environment.SpecialFolder.MyPictures) + "\" + file.Name

While FileIO.FileSystem.FileExists(newFileLocation) 'While File exists in new directory
    'Add copy to filename
    fileExt = fileType.Replace("*", "")
    newFileName = newFileName.Remove(newFileName.LastIndexOf("."), (newFileName.Length - newFileName.LastIndexOf(".")))
    newFileName += " - Copy"
    newFileName += fileExt

    'Rename file
    FileSystem.Rename(oldFileName, newFileName)

    'Declare a new DirInf variable because I can't use a string to set one
    Dim newFile As New DirectoryInfo(newFileName)

    'Move the new file to 
    newFile.MoveTo("C:\Users\" + Environ("USERNAME") + "\Pictures\")
    ProgressBar.Value += 1
End While 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T20:03:24.740

您正在寻找`File.Move()`，它需要两个字符串。

还有，`"C:\Users\" + Environ("USERNAME") + "\Pictures\"`是非常错误的；许多用户没有`C:`驱动器。
你应该打电话`Environment.GetSpecialFolder(Environment.SpecialFolder.MyPictures)`

# delphi - Delphi - 用于在单元之间复制/移动组件和相关事件代码的 IDE 插件/扩展

> ID：14128364
> 
> 赞同：4
> 
> 时间：2013-01-02T20:00:09.520
> 
> 标签：delphi, vcl

是否有任何扩展允许我在单元/表单之间复制或移动组件，包括分配给其事件的所有代码？例如......`TButton`在其`OnClick`事件中包含一些代码，它应该复制组件和事件中的代码。

编辑：修复了“它”/“它的”，由编辑我的问题文本的 mod 错误地修改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T20:58:11.900

作为一个选项：如果你的代码真的独立于表单，创建数据模块，放置 TActionList ，将数据模块单元添加到使用子句，将动作分配给控件的 Action 属性（在这种情况下，你可以从一个复制控件表单到另一个）或从事件调用该操作（在这种情况下，您必须编辑代码，但事件处理程序将仅包含一行代码）

# macros - 如何为属性扩展创建宏

> ID：14128371
> 
> 赞同：1
> 
> 时间：2013-01-02T20:00:35.387
> 
> 标签：macros, haxe

我想编写自己的宏来在 Haxe 中创建类似对象的属性。这个问题与其说是关于属性，不如说是关于编写宏。（可能 NME 已经有一个宏）。

在haxe上这门课

```
class Foo {
    @:property var bar:String;
} 
```

我喜欢这个被扩展成

```
class Foo {
    private var bar:String;

    public function setBar(_val:String):void {
        this.bar = _val;
    }

    public function getBar():String {
        return this.bar;
    }
 } 
```

我阅读了相应的文档，但老实说，我发现它们非常令人困惑。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T21:36:09.043

您可能想看看 tinkerbell 如何解决相同的问题：[https ://github.com/back2dos/tinkerbell/wiki/tink_lang#wiki-accessors](https://github.com/back2dos/tinkerbell/wiki/tink_lang#wiki-accessors)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-17T17:38:59.790

[在Haxe 手册](http://haxe.org/manual/)中找到的这个[类型生成器示例](http://haxe.org/manual/macro-type-building.html)（粘贴在下面以供参考，但在链接中有更好的描述）是一个很好的、简单的向类添加函数的示例。

添加属性将大致相同。我添加了一个 trace(field) 循环来帮助了解它们是如何定义的：

**主文件.hx**

```
@:build(TypeBuildingMacro.build("myFunc"))
class Main {
  static public function main() {
    trace(Main.myFunc); // my default
  }
} 
```

**TypeBuildingMacro.hx**

```
import haxe.macro.Context;
import haxe.macro.Expr;

class TypeBuildingMacro {
  macro static public function build(fieldName:String):Array<Field> {
    var fields = Context.getBuildFields();
    for (field in fields) { trace(field); }
    var newField = {
      name: fieldName,
      doc: null,
      meta: [],
      access: [AStatic, APublic],
      kind: FVar(macro : String, macro "my default"),
      pos: Context.currentPos()
    };
    fields.push(newField);
    return fields;
  }
} 
```

请注意，Main.hx 必须使用`@:build`元数据调用宏，因此编译器知道在处理 Main 类本身之前运行宏（添加函数）。

# visual-studio-2008 - 在 Visual Basic 2008 中定义 NAN

> ID：14128373
> 
> 赞同：3
> 
> 时间：2013-01-02T20:00:46.217
> 
> 标签：visual-studio-2008, nan

我想知道是否有人知道如何在 math.h 中为 Visual Basic 2008 Express 定义 NAN？

我试图用它编译 SciDAVis，但我收到 MuParserScripting.h 的错误，它显示错误 C2065 : 'NAN' : Undeclared Identifier。

当我检查文件夹 C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\include\math.h 时，我看到没有声明 NAN。我添加了以下代码：

```
#ifdef _MSC_VER
#define INFINITY (DBL_MAX+DBL_MAX)
#define NAN (INFINITY-INFINITY)
#endif 
```

但这给了我很多错误说：错误C2065：'DBL_MAX'：未声明的标识符。

有人有什么建议吗？

感谢！

# performance - 无论如何，一次调用即可获取 node.js 中的文件/目录列表

> ID：14128376
> 
> 赞同：1
> 
> 时间：2013-01-02T20:00:48.370
> 
> 标签：performance, node.js, fs

在 node.js (fs) 中，我们可以使用 获取所有文件+目录的列表`fs.readdir()`，现在为了将文件/目录分开，我们需要`stat = fs.stat()`在结果调用`stat.isDirectory()`或`stat.isFile()`每个返回值（路径）上调用。

有没有更好的（性能方面）方法来做到这一点？

# c# - TreeView空白区域点击事件

> ID：14128378
> 
> 赞同：0
> 
> 时间：2013-01-02T20:01:01.643
> 
> 标签：c#, treeview, contextmenu

要确定我的上下文菜单的内容，我需要检测用户何时单击树视图的空白区域。但是，the`Click`和`MouseClick`events 都不会触发。是否可以通过派生来实现所需的功能`TreeView`？如果没有，我该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T20:11:33.607

您可以使用即使在空白区域也会触发的 MouseDown 事件。

```
private void treeView1_MouseClick(object sender, MouseEventArgs e)
{
   // MessageBox.Show("treeView1_MouseClick");
}

private void treeView1_Click(object sender, EventArgs e)
{
   // MessageBox.Show("treeView1_Click");
}

private void treeView1_MouseDown(object sender, MouseEventArgs e)
{
    MessageBox.Show("treeView1_MouseDown");
} 
```

# c++ - 产品/消费者 - 什么是最佳信号模式

> ID：14128380
> 
> 赞同：4
> 
> 时间：2013-01-02T20:01:10.987
> 
> 标签：c++, windows, performance, synchronization

我正在构建一个需要两个函数来同步线程的高性能应用程序

```
void wake_thread(thread)

void sleep_thread(thread) 
```

该应用程序有一个线程（我们称之为 C），它可能会通过调用 sleep_thread 进入睡眠状态。有多个线程会调用wake_thread。当 wake_thread 返回时，它必须保证 C 正在运行或将被唤醒。wake_thread 绝不能阻塞。

简单的方法当然是使用这样的同步事件：

```
hEvent = CreateEvent(NULL, FALSE, TRUE, NULL);

void wake_thread(thread) {

  SetEvent(hEvent);
} 
```

和：

```
void sleep_thread(thread)
{
  WaitForSingleObject(hEvent);
} 
```

这提供了所需的语义，并且没有场景的竞争条件（只有一个线程在等待，但可以发出多个信号）。我将它包含在这里以显示我正在尝试调整的内容。

但是，我想知道在 Windows 下对于这种非常具体的情况有一种更快的方法。**wake_thread**可能会被多次调用，即使 C 没有休眠。这会导致对 SetEvent 的大量调用，但它们什么都不做。是否有更快的方法来使用手动重置事件和引用计数器来确保仅在实际需要设置某些内容时才调用 SetEvent。

在这种情况下，每个 CPU 周期都很重要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T20:52:34.377

`SetEvent()`将引入一些延迟，因为它必须进行系统调用（`sysenter`触发从用户模式到内核模式的切换），以便对象管理器检查事件的状态并调度它（通过调用`KeSetEvent()`）。我认为即使在您的情况下，系统调用的时间也可能被认为是可以接受的，但这是推测。可能会引入大部分延迟的地方是事件的接收方。换句话说，从 a 中唤醒线程[`WaitFor*Object()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687069%28v=vs.85%29.aspx)比发出事件信号要花费时间。Windows 调度程序试图通过将优先级“提升”给等待返回的线程来帮助更快地到达线程，但这种提升只能起到这么多的作用。

为了解决这个问题，您应该确保仅在必要时等待。执行此操作的典型方法是，在您的使用者中，当您收到信号时，使用您可以使用的每个工作项，而无需再次等待事件，然后在完成后拨打电话`sleep_thread()`

我应该指出，`SetEvent()`/`WaitFor*Object()`几乎肯定比不消耗 100% CPU 的所有东西都快，即使这样，由于任何锁定对象需要保护您的共享数据，它也可能会更快。

通常，我会推荐使用[ConditionVariable](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682530%28v=vs.85%29.aspx)但与您的技术相比，我没有测试过它的性能。我怀疑它可能会更慢，因为它也有输入 CRITICAL_SECTION 对象的开销。您可能必须以不同的方式衡量绩效——当有疑问时，衡量、衡量、衡量。

我能想到的唯一另一件事是，MS 确实承认调度和等待事件可能很慢，尤其是在重复执行时。为了解决这个问题，他们将[`CRITICAL_SECTION`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682530%28v=vs.85%29.aspx)对象更改为在用户模式下多次尝试以在实际等待事件之前获取锁。他们称之为[旋转计数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683476%28v=vs.85%29.aspx)。虽然我不推荐它，但您也许可以做类似的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T02:24:54.517

我还没有测试过这个（除了确保它编译之外），但我认为这应该可以解决问题。诚然，这比我最初想象的要复杂一些。请注意，您可以进行一些明显的优化；为了清楚起见，我将其保留为未优化的形式，并帮助进行任何可能需要的调试。我也省略了错误检查。

```
#include <intrin.h>

HANDLE hEvent = CreateEvent(NULL, TRUE, FALSE, NULL);
__declspec(align(4)) volatile LONG thread_state = 2;
    // 0 (00): sleeping
    // 1 (01): sleeping, wake request pending
    // 2 (10): awake, no additional wake request received
    // 3 (11): awake, at least one additional wake request

void wake_thread(void)
{
    LONG old_state;

    old_state = _InterlockedOr(&thread_state, 1);
    if (old_state == 0)
    {
        // This is the first wake request since the consumer thread
        // went to sleep.  Set the event.

        SetEvent(hEvent);
        return;
    }
    if (old_state == 1)
    {
        // The consumer thread is already in the process of being woken up.
        // Any items added to the queue by this thread will be processed,
        // so we don't need to do anything.

        return;
    }
    if (old_state == 2)
    {
        // This is an additional wake request when the consumer thread
        // is already awake.  We've already changed the state accordingly,
        // so we don't need to do anything else.

        return;
    }
    if (old_state == 3)
    {
        // The consumer thread is already awake, and already has an
        // additional wake request registered, so we don't need to do
        // anything.

        return;
    }
    BigTrouble();
}

void sleep_thread(void)
{
    LONG old_state;

    // Debugging only, remove this test in production code.
    // The event should never be signaled at this point.

    if (WaitForSingleObject(hEvent, 0) != WAIT_TIMEOUT)
    {
        BigTrouble();
    }

    old_state = _InterlockedAnd(&thread_state, 1);
    if (old_state == 2)
    {
        // We've changed the state from "awake" to "asleep".
        // Go to sleep.

        WaitForSingleObject(hEvent, INFINITE);

        // We've been buzzed; change the state to "awake"
        // and then reset the event.

        if (_InterlockedExchange(&thread_state, 2) != 1)
        {
            BigTrouble();
        }
        ResetEvent(hEvent);
        return;
    }
    if (old_state == 3)
    {
        // We've changed the state from "awake with additional
        // wake request" to "waking".  Change it to "awake"
        // and then carry on.

        if (_InterlockedExchange(&thread_state, 2) != 1)
        {
            BigTrouble();
        }
        return;
    }
    BigTrouble();
} 
```

基本上，这使用手动重置事件和两位标志来重现自动重置事件的行为。如果你画一个状态图可能会更清楚。线程安全取决于关于允许哪些函数进行哪些转换的规则，以及何时允许事件对象发出信号。

作为社论：我认为将同步代码分离为 wake_thread 和 sleep_thread 函数，这让事情有点尴尬。如果将同步代码移到队列实现中，它可能会更自然、更高效，并且几乎可以肯定更清晰。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T02:41:51.800

就像是：

```
void consumer_thread(void)
{
   while(1)
   {
      WaitForSingleObject(...);

      // Consume all items from queue in a thread safe manner (e.g. critical section)
   }
}

void produce()
{
   bool queue_was_empty = ...; // in a thread safe manner determine if queue is empty
   // thread safe insertion into queue ...
   // These two steps should be done in a way that prevents the consumer 
   // from emptying the queue in between, e.g. a spin lock.  
   // This guarantees you will never miss the "edge"
   if( queue_was_empty )
   {
      SetEvent(...);
   }
} 
```

一般的想法是只在从空到满的**转换上设置SetEvent。**如果线程具有相同的优先级，Windows 应该让生产者继续运行，因此您可以最小化每个队列插入的 SetEvent 调用次数。我发现这种安排（在同等优先级的线程之间）可以提供最佳性能（至少在 Windows XP 和 Win7 下，YMMV 下）。

# reporting-services - 如何使用 Reporting Services 表达式从前一个值中减去一行的值？

> ID：14128384
> 
> 赞同：0
> 
> 时间：2013-01-02T20:01:43.847
> 
> 标签：reporting-services, reportingservices-2005

使用以下 SQL 查询：

```
SELECT     
   TOP (100) PERCENT 
   ID_BADGE, 
   LEFT(RIGHT('000000' + CAST(TIME_TRX AS varchar), 6), 2) 
     + ':' + SUBSTRING(LEFT(RIGHT('000000' + CAST(TIME_TRX AS varchar), 6), 4), 3, 2) AS ClockTime, 
   DATE_TRX, SEQ_REC, ROWID
FROM
   omi.TAHIST_ZERO
WHERE     
   (ID_BADGE = '     ' + @Badge) 
   AND (DATE_TRX BETWEEN @Date AND @Date2) 
   AND (SEQ_REC IN ('0', '1000')) 
   AND (CODE_TRX IN ('100', '101'))
ORDER BY 
   DATE_TRX, TIME_TRX 
```

我创建了下表：

![ssrs表截图](../Images/4287084057449744b0de90f36f8b8a5c.png)

使用**Reporting Services 表达式**我想从 ClockTime 的第三个值中减去 ClockTime 的第二个值。

我查看了 VB 函数，我能找到的只有 First、Last、Min 和 Max，而不是第二或第三。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T02:45:53.443

我认为您可以使用 SSRS Previous 功能实现此目的：

[http://msdn.microsoft.com/en-us/library/ms156372(v=sql.90).aspx](http://msdn.microsoft.com/en-us/library/ms156372%28v=sql.90%29.aspx)

# php - 在 php 和 sql 中更新

> ID：14128389
> 
> 赞同：-1
> 
> 时间：2013-01-02T20:02:00.137
> 
> 标签：php, mysql, sql, updates, updating

我有这个功能

```
function update_job($title, $type, $salary, $country,
                    $city, $state, $category,$date,
                    $description, $responsabilities,
                    $requirements, $id_job ) {

  $HOST_DB ="localhost";
  $NAME_DB="jobs";
  $USER_DB ="root";
  $PWD_DB="";

  $connect = mysql_connect($HOST_DB, $USER_DB, $PWD_DB);
  $db=mysql_select_db($NAME_DB);    

  $requete_insert_tem = "UPDATE employment  SET title = $title , type = $type , salary = $salary , country = $country , city = $city , state = $state , category = $category , date = $date , description = $description , responsabilities = $responsabilities ,
                requirements = $requirements where id = $id_job ";
  mysql_query($requete_insert_tem)
    or die(mysql_error());    
} 
```

但出现错误“'street, category = informatique, date = 01/07/2013, description = nothing'附近的语法错误”

1.  为什么我有这个错误？
2.  如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T20:04:23.460

您需要在字符串周围使用单引号。下面我假设您的所有列都是某种字符串类型。您还需要`mysql_`立即停止使用函数，[因为它们已被正式弃用](https://wiki.php.net/rfc/mysql_deprecation)。看到[**红框**](http://j.mp/Te9zIL)了吗？改为了解[*准备好的语句*](http://j.mp/T9hLWi)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](http://j.mp/QEx8IB)将帮助您决定使用哪个。

```
$requete_insert_tem = "UPDATE employment SET title = '$title' , type = '$type' , salary = '$salary' , country = '$country' , city = '$city' , state = '$state' , category = '$category' , date = '$date' , description = '$description' , responsabilities = '$responsabilities' , requirements = '$requirements' where id = '$id_job'"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T20:09:52.230

我想问题是因为您没有在 set 子句中对非数字值使用单引号。
试试这个：

```
$requete_insert_tem  ="UPDATE employment  SET title = '$title' , type = '$type' , salary = '$salary' , country = '$country' , city = '$city' , state = '$state' , category = '$category' , date = '$date' , description = '$description' , responsabilities = '$responsabilities' ,
                requirements = '$requirements' where id = $id_job "; 
```

您可能还想检查变量值以删除可能的单引号或使用 addlashes 函数来确保查询安全。

# video - 如何流式传输/播放视频但阻止保存？

> ID：14128394
> 
> 赞同：0
> 
> 时间：2013-01-02T20:02:31.617
> 
> 标签：video, stream, video-streaming

我正在计划午餐一个在线培训网站。

在我们的网站中，我们将放置许多视频文件，用户应该拥有高级帐户才能观看我们的视频。

我们的挑战是用户保存视频文件，我们不希望用户可以保存我们的视频并且他们应该在线观看，所以我们希望流式传输我们的视频，这样用户就无法保存视频文件，有没有更好的解决方案来应对这个挑战？我们应该为流媒体做什么？因为 YouTube 视频也是流媒体，但用户可以保存 YouTube 视频。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T04:13:32.213

查看 flow player 或 jwplayer 和 flash RTMP 流。您可以进一步查看 DRM、签名的 URls 等。

# java - 在 Java 按钮中将新数据添加到 mysql 数据库中

> ID：14128396
> 
> 赞同：-3
> 
> 时间：2013-01-02T20:02:31.990
> 
> 标签：java, swing, variables, jdbc, final

我想从我的 Java GUI 向我的 mysql 数据库添加新信息。我有 3 个文本字段，它们从用户那里获取信息并有 1 个复选按钮。我必须添加这些数据，但是我有一个查询。

```
String query="insert into buses (busId,custname,custsurname,custid,seats)
values('"+busId+"','"+textfield_1.getText()+"','"+textfield_2.getText()+
"','"+textfield_3.getText()+"','"+checkbox[1].getName()+"')"; 
```

当我用Java按钮编写它时，编译器给我一个这样的错误我该`(busId should be final)` 如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T20:06:18.470

```
compiler give me a error like this(busId should be final) 
```

我假设您在匿名内部类中使用此变量。正如错误所暗示的那样，您所要做的就是声明`busId`为`final`，例如

```
final int busId = 0; 
```

# c# - 自定义 WPF 控件的默认值

> ID：14128404
> 
> 赞同：1
> 
> 时间：2013-01-02T20:03:29.590
> 
> 标签：c#, wpf, custom-controls, dependency-properties

这是我的问题。我最近创建了一个自定义控件，效果很好。但是我在使用的时候有一个问题，我有一个小问题：

在我的控制下，我创建了一个名为 Value 的属性，定义如下：

```
 public static readonly DependencyProperty ValueProperty = DependencyProperty.Register("Value", typeof(int), typeof(NumericUpDown), new PropertyMetadata(1000));
    public int Value
    {
        get
        {
            return (int)GetValue(ValueProperty);
        }
        set
        {
            SetValue(ValueProperty, value);
            this.ValueText.Text = value.ToString();
        }
    } 
```

当我对该值进行数据绑定时，绑定有效，但默认值设置为 1000，因此它首先打印 1000。但实际上，绑定到 Value 的属性不等于 1000。我想`ValueText.Text`在创建 Value 属性时绑定属性的值。

编辑：问题很简单，如何删除该默认值并直接打印绑定属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T20:26:28.157

您应该能够`PropertyChanged`在 DependancyProperties 元数据中设置一个事件，以便在更改`ValueText`时进行更新`Value`。

像这样的东西：

```
public static readonly DependencyProperty ValueProperty =
    DependencyProperty.Register("Value", typeof(int), typeof(NumericUpDown),
    new PropertyMetadata(1000, (sender, e) => (sender as NumericUpDown).ValueText.Text = e.NewValue.ToString()));

public int Value
{
    get { return (int)GetValue(ValueProperty); }
    set { SetValue(ValueProperty, value); }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T20:06:51.637

当事情通过 WPF 的数据绑定发生变化时，不会调用属性设置器，因此这种技术将不起作用。

默认的初始值将始终为 1000，但数据绑定可能会覆盖它。您将需要添加一个[回调](http://msdn.microsoft.com/en-us/library/system.windows.propertychangedcallback.aspx)，以便在更改依赖项属性值时适当地通知您。

有关详细信息，请参阅[依赖属性回调](http://msdn.microsoft.com/en-us/library/ms745795.aspx#Coerce_Value_Callbacks_and_Property_Changed_Events)页面以了解如何正确实现属性更改回调。这是设置其他 ( `ValueText`) 属性的合适位置。

# android - Android 管理 SQLite 数据库连接

> ID：14128405
> 
> 赞同：0
> 
> 时间：2013-01-02T20:03:34.457
> 
> 标签：android, database, sqlite

我有一个使用 sqlite 数据库的应用程序。对于每个查询（10 个查询选择 10 种不同的方法），我打开数据库。在应用程序启动时打开db并在应用程序关闭时关闭它是一个不错的选择？例如，在 MyApplication 类（扩展 Application）中创建对我的 DB 对象的静态引用。

感谢您的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T20:16:12.963

创建一个静态单例，它保留对数据库和其他常用资源的引用，例如：

```
class Global {
    private static SQLiteDatabase _db = null;

    public static SQLiteDatabase getDb() {
        if( _db == null ) {
            ... assign & open _db
        }

        return _db;
    }
} 
```

其他地方，仅供参考`Global.getDb()`

# vb.net - 对 System.Reactive 中的变化做出反应

> ID：14128406
> 
> 赞同：2
> 
> 时间：2013-01-02T20:03:35.393
> 
> 标签：vb.net, system.reactive

System.Reactive 的新手，但据我了解，我们可以订阅任何可观察的集合，如果那里发生了什么，我会收到通知。

但是当我正在寻找一个可以帮助我安排任务的框架时，如果只有一个已经充满数据的可观察集合，按时间过滤它们并让它们在某些条件匹配时立即引发 onnext 事件，那将是巨大的.

假设我们有课

```
Public Class Appointment
    Property Notification As DateTime
End Class 
```

然后我们有 a`List<IObservable>`并订阅它，然后我们指定类似 a 的内容`where`，但不是在添加新内容时，而是在匹配内容时。在这种情况下，当前日期时间`Now()`和任何约会

```
src.WhenWhere(x => x.Notification < Now()) 
```

还是应该使用自定义的 observable 来完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T21:34:22.577

你可以做这样的事情......请注意，你必须在约会上放置一些标志来表示通知已发送并将其添加到 where 子句中，否则，一旦约会时间为 < DateTime.Now，它将一遍又一遍地发送结果。

```
void Main() {
    var appointments = new List<Appointment> { 
       new Appointment { Id = 1, Notification = DateTime.Now.AddMilliseconds(4000) },
       new Appointment { Id = 2, Notification = DateTime.Now.AddMilliseconds(7000) }
    };

    var q = from t in Observable.Generate(DateTime.Now, _ => true, _ => _, _ => DateTime.Now, _ => TimeSpan.FromSeconds(1))
        from a in appointments
        where a.Notification < t
        select new { a.Id, a.Notification };

q.Dump(); 
```

}

```
public class Appointment {
    public int Id { get; set; }
    public DateTime Notification { get; set; }
} 
```

# php - 尽管没有重复，但在 mySQL/phpMyAdmin 中收到 #1062 重复错误

> ID：14128409
> 
> 赞同：0
> 
> 时间：2013-01-02T20:04:00.307
> 
> 标签：php, mysql, database, phpmyadmin, key

我目前有一个名为`Spreadsheet`2291 行的数据库，每行有 6 列。

我还有一个 .csv 文件，其中包含 1000 多个具有相同 6 列的行，尽管其中三个被设置为默认值`NULL`（与我数据库中的一些数据相同，这意味着，一些也被设置为 NULL 作为默认值）。我试图将它们（不是`replace`）导入现有数据库。

第一列是`primary key`，我知道 .csv 和数据库都没有重复的主键。主键看起来像这样：`0015000000b0Y2u`

我的问题是：如何在`primary keys`不出现 #1062 错误的情况下将这 1000 多行（它们本身具有唯一性）导入到预先存在的 2291 行中？

```
SQL query:

INSERT INTO  `Spreadsheet` (  `accountID` ,  `accountName` ,  `website` ,  `rating` ,  `imageURL` ,  `comments` ,  `category` ) 
VALUES (

'0015000000b0Y3z',  'Kittredge and Associates Inc',  'kittredgeandassociates.com', NULL ,  'kittredgeandassociates.com.jpg', NULL , NULL
)
MySQL said: 

#1062 - Duplicate entry '0015000000b0Y3z' for key 'PRIMARY' 
```

上面附上的是我收到的 #1062 错误，尽管我 100% 确定我没有`PRIMARY`.

我不想让 mySQL 自动增量，因为我已经研究过了，这不是我正在寻找的解决方案。

我曾尝试更改重复的条目违规者密钥，但无济于事，同样的错误。有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T20:21:52.633

我怀疑问题在于您的主键是一个字符列，其排序规则不区分大小写（例如`latin1_swedish_ci`）。如果是这样，小写和大写字母被认为是“相等的”，这将导致重复。

这是一个演示。注意 collat​​ion_name 值的不同：

```
CREATE TABLE t3 (mycol VARCHAR(4) COLLATE latin1_swedish_ci PRIMARY KEY );
INSERT INTO t3 VALUES ('A'),('a');

-- Error Code: 1062
-- Duplicate entry 'a' for key 'PRIMARY'

CREATE TABLE t4 (mycol VARCHAR(4) COLLATE latin1_bin PRIMARY KEY );
INSERT INTO t4 VALUES ('A'),('a');

-- 2 row(s) affected 
```

* * *

如果您需要 MySQL 认为大写和小写字母不相等，那么您需要为该列指定区分大小写或二进制排序规则，而不是不区分大小写的排序规则。

（注意：MySQL 名称排序规则不区分大小写，`_ci`排序规则名称末尾带有 a，例如`latin1_swedish_ci`.）

如果列当前是`latin1`字符集和`latin1_swedish_ci`排序规则，您可能希望将列上的排序规则更改为`latin1_general_cs`or 或`latin1_bin`。

例如

```
ALTER TABLE t3 CHANGE mycol mycol VARCHAR(4) COLLATE latin1_general_cs ; 
```

* * *

[http://dev.mysql.com/doc/refman/5.5/en/case-sensitive.html](http://dev.mysql.com/doc/refman/5.5/en/case-sensitivity.html)

[http://dev.mysql.com/doc/refman/5.5/en/adding-collat​​ion.html](http://dev.mysql.com/doc/refman/5.5/en/adding-collation.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T20:11:31.157

Not sure how you would get this error if you are correct that the PK and any other unique indexes are not being violated. A solution might be to use [ON DUPLICATE KEY UPDATE](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html) or the [IGNORE](http://dev.mysql.com/doc/refman/5.5/en/insert.html) keyword.

# python - 当父母在python中崩溃时杀死子进程

> ID：14128410
> 
> 赞同：13
> 
> 时间：2013-01-02T20:04:03.773
> 
> 标签：python, process, subprocess

我正在尝试编写一个 python 程序来测试用 C 编写的服务器。 python 程序使用`subprocess`模块启动编译的服务器：

```
pid = subprocess.Popen(args.server_file_path).pid 
```

这工作正常，但是如果 python 程序由于错误而意外终止，则生成的进程将继续运行。我需要一种方法来确保如果 python 程序意外退出，服务器进程也会被终止。

更多细节：

*   仅限 Linux 或 OSX 操作系统
*   服务器代码不能以任何方式修改

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-02T20:09:11.743

I would [`atexit.register`](http://docs.python.org/2/library/atexit.html) a function to terminate the process:

```
import atexit
process = subprocess.Popen(args.server_file_path)
atexit.register(process.terminate)
pid = process.pid 
```

Or maybe:

```
import atexit
process = subprocess.Popen(args.server_file_path)
@atexit.register
def kill_process():
    try:
        process.terminate()
    except OSError:
        pass #ignore the error.  The OSError doesn't seem to be documented(?)
             #as such, it *might* be better to process.poll() and check for 
             #`None` (meaning the process is still running), but that 
             #introduces a race condition.  I'm not sure which is better,
             #hopefully someone that knows more about this than I do can 
             #comment.

pid = process.pid 
```

* * *

Note that this doesn't help you if you do something nasty to cause python to die in a non-graceful way (e.g. via `os._exit` or if you cause a `SegmentationFault` or `BusError`)

# ruby-on-rails - 删除孩子在真实应用程序中确实有效，但在测试中无效

> ID：14128411
> 
> 赞同：0
> 
> 时间：2013-01-02T20:04:09.827
> 
> 标签：ruby-on-rails, rspec, count, tdd, associations

我一生都无法弄清楚这里出了什么问题。我有一个客户模型和一个发票模型。

**客户端.rb**

```
has_many :invoices, dependent: :destroy 
```

**发票.rb**

```
belongs_to :client 
```

我有以下客户端规格：

```
it "destroys its children upon destruction" do
  i = FactoryGirl.create(:invoice) # As per the factory, the :client is the parent of :invoice and is automatically created with the :invoice factory

  lambda {
    i.client.destroy
  }.should change(Invoice.all, :count).by(-1)
end 
```

这是我的工厂：

**客户工厂**

```
FactoryGirl.define do
  factory :client do
    city "MyString"
  end
end 
```

**发票厂**

```
FactoryGirl.define do
  factory :invoice do
    association :client
    gross_amount 3.14
  end
end 
```

如果我这样做`i = FactoryGirl.create(:invoice)`，然后`i.client.destroy`在控制台中手动操作，发票实际上已被销毁。但由于某种原因，测试失败，给我“计数应该被-1改变，但被改变了0”。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T21:17:32.877

的返回值`Invoice.all`是一个数组，因此数据库操作不会影响它。当您销毁记录时，该*数组*不会更改，并且`should change(receiver, message)`只会发送`message`到相同的`receiver`. 尝试：

```
lambda {
  i.client.destroy
}.should change(Invoice, :count).by(-1) 
```

或者

```
lambda {
  i.client.destroy
}.should change{Invoice.all.count}.by(-1) 
```

# c# - 从列表中创建逗号分隔的引号字符串

> ID：14128421
> 
> 赞同：3
> 
> 时间：2013-01-02T20:04:38.997
> 
> 标签：c#, list

我有一个名为 user 的类，其中包含一个字符串组列表（A 组、B 组、C 组）

```
public class User
    {

        public string FirstName { get; set; }
        public string LastName { get; set; }

        public User()
        {
            Groups = new List<string>();
        }

    } 
```

然后我使用 json 反序列化器来创建用户和组的列表。但是，我希望能够为每个用户获取具有这种格式的组字符串：

“A组”、“B组”、“C组”

我试过这个：

```
string[] AllGroups;
AllGroups = (string[])usrList[0].Groups.ToArray();
return string.Join(",", AllGroups); 
```

但是它给了我一个这种格式的列表（没有引号）：

A组、B组、C组

知道我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-02T20:06:31.533

> 知道我在这里做错了什么吗？

那么你没有在任何地方添加引号 - 所以你没有得到它们。

您可以自己轻松地用引号将每个项目括起来：

```
return string.Join(", ", usrList[0].Groups.Select(x => "\"" + x + "\"")); 
```

假设您使用的是 .NET 4 或更高版本 - 如果您使用的是 .NET 3.5（它没有那么好的`string.Join`支持），您需要创建一个数组，但您不需要将其转换为`string[]`（如`ToArray`已经返回一个数组）...

```
return string.Join(", ", usrList[0].Groups
                                   .Select(x => "\"" + x + "\"")
                                   .ToArray()); 
```

考虑到您的问题，我还在逗号分隔符后添加了一个空格-我怀疑您当前的代码*确实*给了您`Group A,Group B,Group C`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T20:26:01.040

假设您想在`""`没有值时得到结果，您可以这样做：

```
 return "\"" + string.Join("\", \"", AllGroups) + "\""; 
```

请注意，这**不是**一个空字符串 - 它是一个包含两个引号的字符串。

如果要使用此代码返回 null 或空字符串，则需要先检查大小`AllGroups`。

```
var AllGroups = usrList[0].Groups;
if (AllGroups.Count() == 0) return null;
else return "\"" + string.Join("\", \"", AllGroups) + "\""; 
```

# sammy.js - Sammy.js 拦截所有点击事件

> ID：14128424
> 
> 赞同：3
> 
> 时间：2013-01-02T20:04:49.297
> 
> 标签：sammy.js

我正在一起使用淘汰赛和萨米。我有一个我声明的移动页面

```
$.sammy('#portal', function(){.....}). 
```

在“#portal”之外，我有一个固定的主播

```
<a href="otherpage.html">friends</a>. 
```

问题是，当我单击锚点时，URL 会更新，但页面仍停留在我加载了 sammy 的原始页面上……我认为只有当事件来自“#portal”时，sammy 才会触发。有人知道为什么页面被锁定而不是重定向吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T11:45:36.467

尝试使用`'/'`而不是`''`您的 sammy 默认路由。

# ruby-on-rails - 如何使变量可用于每个 Rails 操作的结果？

> ID：14128426
> 
> 赞同：0
> 
> 时间：2013-01-02T20:04:57.160
> 
> 标签：ruby-on-rails, facebook, ruby-on-rails-3

假设您有一个 facebook 应用程序 ID 的配置变量定义为：

```
TestSiteRails::Application.configure do
  config.facebook_app_id = '123146123188122'
end 
```

您希望此变量在每个操作中都可用，以便在主布局 application.html.haml 中可用：

```
!!! html
%html
  %head
  %body
    #fb-root
    :javascript
      window.fbAsyncInit = function() {
        // init the FB JS SDK
        FB.init({
          appId      : '#{@facebook_app_id}', // Configured facebook app id
          channelUrl : '//WWW.YOUR_DOMAIN.COM/channel.html', // Channel File for x-domain communication
          status     : true, // check the login status upon init?
          cookie     : true, // set sessions cookies to allow your server to access the session?
          xfbml      : true  // parse XFBML tags on this page?
        });

    = yield :contents 
```

与其在每个控制器操作中重复执行此操作的代码，不如我如何使每个操作都可以使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T20:15:39.460

您可以将其放入 ApplicationController 中，以便所有控制器都继承它：

```
class ApplicationController
  before_filter :set_facebook_app_id

  private

  def set_facebook_app_id
    @facebook_app_id ||= Rails.configuration.facebook_app_id
  end
end 
```

或者，如果您也需要它可以访问视图，作为辅助方法：

```
class ApplicationController
  def facebook_app_id
    Rails.configuration.facebook_app_id
  end
  helper_method :facebook_app_id
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T20:14:58.323

您可以在 application_controller 中使用[before_filter](http://guides.rubyonrails.org/action_controller_overview.html#filters)，但我认为如果您要使用它来获得常量 id，您可以使用常量。

# c# - 如何从 .lnk 获取 .ico 文件的路径

> ID：14128430
> 
> 赞同：1
> 
> 时间：2013-01-02T20:05:16.317
> 
> 标签：c#, ico, lnk

> **可能重复：**
> [从 Windows .lnk（快捷方式）文件中提取图标](https://stackoverflow.com/questions/343200/extract-icon-from-windows-lnk-shortcut-file)

例如，我有一个快捷方式 (.LNK) 文件，其图标为 C:\Foo\bar.ico。仅在 C# 中提供快捷方式文件时，如何获取图标 (C:\Foo\bar.ico) 的路径？

我尝试使用 WshShortcut，但 WshShortcut.IconLocation 仅在图标是外部 .ico 文件时才返回空白字符串。我不想要图标的索引，只想要 .ico 文件的路径。

# javascript - 手动调用 PDFJS 函数。PDFView.open 渲染后调用什么函数

> ID：14128433
> 
> 赞同：1
> 
> 时间：2013-01-02T20:05:48.710
> 
> 标签：javascript, pdf.js

在文档中找不到下一步该做什么。

来电：

```
PDFView.open('/MyPDFs/Pdf1.pdf', 'auto', null) 
```

我可以看到空白页、加载程序以及文档获取我的 PDF 的页数。

唯一缺少的是渲染。有谁知道我接下来应该叫什么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T10:38:35.903

```
$(document).ready(function () {
    PDFView.initialize();

    var params = PDFView.parseQueryString(document.location.search.substring(1));

    //#if !(FIREFOX || MOZCENTRAL)
    var file = params.file || DEFAULT_URL;
    //#else
    //var file = window.location.toString()
    //#endif

    //#if !(FIREFOX || MOZCENTRAL)
    if (!window.File || !window.FileReader || !window.FileList || !window.Blob) {
        document.getElementById('openFile').setAttribute('hidden', 'true');
    } else {
        document.getElementById('fileInput').value = null;
    }
    //#else
    //document.getElementById('openFile').setAttribute('hidden', 'true');
    //#endif

    // Special debugging flags in the hash section of the URL.
    var hash = document.location.hash.substring(1);
    var hashParams = PDFView.parseQueryString(hash);

    if ('disableWorker' in hashParams)
        PDFJS.disableWorker = (hashParams['disableWorker'] === 'true');

    //#if !(FIREFOX || MOZCENTRAL)
    var locale = navigator.language;
    if ('locale' in hashParams)
        locale = hashParams['locale'];
    mozL10n.setLanguage(locale);
    //#endif
    if ('textLayer' in hashParams) {
        switch (hashParams['textLayer']) {
            case 'off':
                PDFJS.disableTextLayer = true;
                break;
            case 'visible':
            case 'shadow':
            case 'hover':
                var viewer = document.getElementById('viewer');
                viewer.classList.add('textLayer-' + hashParams['textLayer']);
                break;
        }
    }

    //#if !(FIREFOX || MOZCENTRAL)
    if ('pdfBug' in hashParams) {
        //#else
        //if ('pdfBug' in hashParams && FirefoxCom.requestSync('pdfBugEnabled')) {
        //#endif
        PDFJS.pdfBug = true;
        var pdfBug = hashParams['pdfBug'];
        var enabled = pdfBug.split(',');
        PDFBug.enable(enabled);
        PDFBug.init();
    }

    if (!PDFView.supportsPrinting) {
        document.getElementById('print').classList.add('hidden');
    }

    if (!PDFView.supportsFullscreen) {
        document.getElementById('fullscreen').classList.add('hidden');
    }

    if (PDFView.supportsIntegratedFind) {
        document.querySelector('#viewFind').classList.add('hidden');
    }

    // Listen for warnings to trigger the fallback UI.  Errors should be caught
    // and call PDFView.error() so we don't need to listen for those.
    PDFJS.LogManager.addLogger({
        warn: function () {
            PDFView.fallback();
        }
    });

    var mainContainer = document.getElementById('mainContainer');
    var outerContainer = document.getElementById('outerContainer');
    mainContainer.addEventListener('transitionend', function (e) {
        if (e.target == mainContainer) {
            var event = document.createEvent('UIEvents');
            event.initUIEvent('resize', false, false, window, 0);
            window.dispatchEvent(event);
            outerContainer.classList.remove('sidebarMoving');
        }
    }, true);

    document.getElementById('sidebarToggle').addEventListener('click',
      function () {
          this.classList.toggle('toggled');
          outerContainer.classList.add('sidebarMoving');
          outerContainer.classList.toggle('sidebarOpen');
          PDFView.sidebarOpen = outerContainer.classList.contains('sidebarOpen');
          PDFView.renderHighestPriority();
      });

    document.getElementById('viewThumbnail').addEventListener('click',
      function () {
          PDFView.switchSidebarView('thumbs');
      });

    document.getElementById('viewOutline').addEventListener('click',
      function () {
          PDFView.switchSidebarView('outline');
      });

    document.getElementById('previous').addEventListener('click',
      function () {
          PDFView.page--;
      });

    document.getElementById('next').addEventListener('click',
      function () {
          PDFView.page++;
      });

    document.querySelector('.zoomIn').addEventListener('click',
      function () {
          PDFView.zoomIn();
      });

    document.querySelector('.zoomOut').addEventListener('click',
      function () {
          PDFView.zoomOut();
      });

    document.getElementById('fullscreen').addEventListener('click',
      function () {
          PDFView.fullscreen();
      });

    document.getElementById('openFile').addEventListener('click',
      function () {
          document.getElementById('fileInput').click();
      });

    document.getElementById('print').addEventListener('click',
      function () {
          window.print();
      });

    document.getElementById('download').addEventListener('click',
      function () {
          PDFView.download();
      });

    document.getElementById('pageNumber').addEventListener('change',
      function () {
          PDFView.page = this.value;
      });

    document.getElementById('scaleSelect').addEventListener('change',
      function () {
          PDFView.parseScale(this.value);
      });

    document.getElementById('first_page').addEventListener('click',
      function () {
          PDFView.page = 1;
      });

    document.getElementById('last_page').addEventListener('click',
      function () {
          PDFView.page = PDFView.pdfDocument.numPages;
      });

    document.getElementById('page_rotate_ccw').addEventListener('click',
      function () {
          PDFView.rotatePages(-90);
      });

    document.getElementById('page_rotate_cw').addEventListener('click',
      function () {
          PDFView.rotatePages(90);
      });

    //#if (FIREFOX || MOZCENTRAL)
    //if (FirefoxCom.requestSync('getLoadingType') == 'passive') {
    //  PDFView.setTitleUsingUrl(file);
    //  PDFView.initPassiveLoading();
    //  return;
    //}
    //#endif

    //#if !B2G

    PDFView.open(file, 0);
    //#endif
}); 
```

在调用 PDFView.open 之前必须先初始化系统！谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:05:47.657

在 viewer.js 中，我在文档下载后添加了对 updateViewarea() 的调用。

```
 ... PDFJS.getDocument(parameters).then(
  function getDocumentCallback(pdfDocument) {
    self.load(pdfDocument, scale);
    self.loading = false;
    updateViewarea();
  }, ... 
```

# asp.net - 显示不分页的 Crystal 报表

> ID：14128435
> 
> 赞同：1
> 
> 时间：2013-01-02T20:05:59.997
> 
> 标签：asp.net, .net, crystal-reports, crystal-reports-2010

我正在将现有的 Web 应用程序从迁移`.Net 1.1`到`.Net 4.0`

该应用程序最初使用 Crystal Reports 11，在迁移过程中，我们正在升级这些报表以使用 Crystal Reports 13 (CRVS 2010) SP3。

对于其中一个报表，要求是在单个页面中显示整个数据（报表查看器控件已关闭）。我只是无法让它在迁移的报告中工作。

Thr 属性集为：

`DisplayToolbar`：（`false`水晶报表查看器控件）

`SeparatePages`：（`false`水晶报表查看器控件）

`Keep Together`在所有部分：（`true`在 rpt 文件中）

`Suppress Blank Section`：`true`

因为我没有太多的页脚，所以我设置了`Reserve Minimum Page`footer 属性。我也设置`Clamp Page footer`属性

但是，当我的报告显示在页面中时，我观察到内容之间的空白行，如下面的示例所示。 ![在此处输入图像描述](../Images/186679a8c4c327352ec83f5f0d94ed54.png)

如果我启用了分页，这些间隙就会出现在我会出现分页符的地方。这使我的报告在网页上看起来很奇怪。对于使用以前版本 CR 的旧应用程序，情况并非如此。有没有办法可以解决这个问题而不必恢复到分页？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T08:34:28.157

显然这是当前实现中的一个缺陷。相反，我们决定恢复到不存在此问题的 12.x。提到这个问题已经在新的SP中修复了，但我们没有尝试过。

参考 SAP 支持论坛： [http ://scn.sap.com/thread/3284720](http://scn.sap.com/thread/3284720)

# xml - 黑莓：解析 XML 时如何获取 Node 的原始内容

> ID：14128443
> 
> 赞同：0
> 
> 时间：2013-01-02T20:06:44.030
> 
> 标签：xml, blackberry, java-me

我试图从通过 SOAP Web 服务调用返回的一些 XML 中提取一个 html 字符串。我的 Node 对象属于以下类：

`org.w3c.dom.Node`

这是我用来遍历节点的循环的代码示例：

```
for(int t = 0; t < elements; t++)
{

         Element myElement = (Element)elements.item(t);

         NodeList childNodes = myElement.getChildNodes();
         int numChildren = childNodes.getLength();

         for(int counter = 0; counter < numChildren; counter++)
         {
             Node currentNode = childNodes.item(counter);
             NodeList currentNodeChildNodes = currentNode.getChildNodes();

             int numCurrentNodeChildren = currentNodeChildNodes.getLength();
             Node firstChild = currentNodeChildNodes.item( 0 );
         }
} 
```

现在，其中一些节点包含原始 html。这当然让他们看起来像有孩子。我想获取这些 html 节点并将其所有内容直接放入`String`. 我试过`currentNode.getTextContent()`了，它只会产生一个`java.lang.NullPointerException`.

有没有一种方法可以用来获取节点并将其原始内容作为字符串获取，无论它是否包含子节点？

**编辑：这是带有 html 内容的 XML 示例**

```
<?xml version="1.0" encoding="utf-16"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xmlns:xsd="http://www.w3.org/2001/XMLSchema"
      xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <GetInfoResponse xmlns="http://www.mycompany.com/">
      <GetInfoResult>
        <infoList>
          <Info>
            <iso>US</iso>
            <country_name>United States</country_name>
            <title>This is the title</title>
            <html_string><strong>NEWS</strong><h1>This is a section header</h1><p>Here is some information</p></html_string>
            <last_update_date>2013-01-01 00:00:00</last_update_date>
          </Info>
        </infoList>
        <faultResponse>
          <faultOccurred>boolean</faultOccurred>
          <faultDescription>string</faultDescription>
        </faultResponse>
      </GetInfoResult>
    </GetInfoResponse>
  </soap:Body>
</soap:Envelope> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T01:05:54.830

混合 html 和 xml 内容通常是个坏主意。虽然 html*可以*像 xml (xhtml) 一样格式化，但通常不是。通过混合这两者，当您的 html 碰巧不是有效的 xml 时，您将面临导致 xml 解析失败的风险。相反，您应该将您的 html 内容编码为有效的 xml 元素值。如果你这样做，那么你可以使用对元素的`Node.getTextContent()`调用来获取 java 中的数据。`html_string`

# jquery - 使用 jQuery 插件设计模式调用方法

> ID：14128446
> 
> 赞同：11
> 
> 时间：2013-01-02T20:07:07.923
> 
> 标签：jquery, boilerplate

我一直在使用 jQuery Boilerplate 开发插件，而我不知道的一件事是如何从插件外部调用方法。

作为参考，这里是我正在谈论的样板代码：http: [//jqueryboilerplate.com/](http://jqueryboilerplate.com/)

在我的小提琴中，

[http://jsfiddle.net/D9JSQ/2/](http://jsfiddle.net/D9JSQ/2/)

这是代码：

```
;(function ( $, window, document, undefined ) {

    var pluginName = 'test';
    var defaults;

    function Plugin(element, options) {
        this.element = element;

        this.options = $.extend( {}, defaults, options) ;

        this._name = pluginName;

        this.init();
    }

    Plugin.prototype = {
        init: function() {
            this.hello();
        },
        hello : function() {
            document.write('hello');
        },
        goodbye : function() {
            document.write('goodbye');
        }
    }

    $.fn[pluginName] = function ( options ) {
            return this.each(function () {
                if (!$.data(this, 'plugin_' + pluginName)) {
                    $.data(this, 'plugin_' + pluginName, 
                    new Plugin( this, options ));
                }
            });
    }

})( jQuery, window, document );

$(document).ready(function() {
    $("#foo").test();
    $("#foo").test('goodbye');
}); 
```

我正在尝试使用以下语法调用再见方法：

```
$("#foo").test('goodbye') 
```

我如何实现这一目标？提前致谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-02T20:10:17.880

您必须获得对该类的引用才能使用该插件结构调用它的方法。

[http://jsfiddle.net/D9JSQ/3/](http://jsfiddle.net/D9JSQ/3/)

```
$(document).ready(function() {
    var test = $("#foo").test().data("plugin_test");
    test.goodbye();
}); 
```

为了做你想做的事，你必须摆脱 document.write 来测试它。

[http://jsfiddle.net/D9JSQ/8/](http://jsfiddle.net/D9JSQ/8/)

```
;
(function($, window, document, undefined) {

    var pluginName = 'test';
    var defaults;

    function Plugin(element, options) {
        this.element = element;

        this.options = $.extend({}, defaults, options);

        this._name = pluginName;

        this.init();
    }

    Plugin.prototype = {
        init: function(name) {
            this.hello();
        },
        hello: function(name) {
            console.log('hello');
        },
        goodbye: function(name) {
            console.log('goodbye');
        }
    }

    $.fn[pluginName] = function(options) {
        return this.each(function() {
            if (!$.data(this, 'plugin_' + pluginName)) {
                $.data(this, 'plugin_' + pluginName, new Plugin(this, options));
            }
            else if ($.isFunction(Plugin.prototype[options])) {
                $.data(this, 'plugin_' + pluginName)[options]();
            }
        });
    }

})(jQuery, window, document);

$(document).ready(function() {
    $("#foo").test();
    $("#foo").test('goodbye');
});​ 
```

查看控制台以获取信息。

# python - 如何使用 python 操作数据？

> ID：14128447
> 
> 赞同：-4
> 
> 时间：2013-01-02T20:07:11.073
> 
> 标签：python, csv, import-from-csv

我正在处理大量 CSV 文件形式的数据。目前它的形式是：

```
543,674,345,547,a
788,474,687,290,b
44,567,1,89,c
... 
```

我需要使用 python 将数据转换/操作为一个新文件，将其更改为：

```
a 1:543 2:674 3:345 4:547
b 1:788 2:474 3:687 4:290
c 1:44 2:567 3:1 4:89
... 
```

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T20:32:42.040

虽然不是最优雅的解决方案，但它可以满足您的描述。

```
import csv
with open('test.csv', 'rb') as myFile:
    reader = csv.reader(myFile, delimiter=',', quotechar='|')
    for row in reader:
            print row[4] + ' 1:' + row[0] + ' 2:' + row[1] + ' 3:' + row[2] + ' 4:' + row[3] 
```

输出：

```
a 1:43 2:674 3:345 4:547
b 1:788 2:474 3:687 4:290
c 1:44 2:567 3:1 4:89 
```

# cocoa-touch - Xcode：创建一组插座

> ID：14128450
> 
> 赞同：0
> 
> 时间：2013-01-02T20:07:19.573
> 
> 标签：cocoa-touch, xcode4, iboutlet

这只是一个简单的问题，我的代码中有很多出口需要最初隐藏，我想做到这一点，以便在我的 viewDidLoad 中我只需要说一些类似的东西，`colourObjects.hidden = YES;`而不是单独经历并声明是否它们是否隐藏，即`redColourObject.hidden = YES; blueColourObjects.hidden = YES; greenColourObjects.hidden = YES;`我会非常感激知道这是否可能以及您是如何做到的！

感谢您的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T20:15:25.133

IBOutletCollection 是您所需要的：

```
@property (nonatomic, strong) IBOutletCollection(UIView) NSArray *stuff; 
```

您可以在其中拖动任意数量的插座，它们就会在那里。您还可以将原始参考资料保留用于其他目的。然后

```
for (UIView *view in self.stuff) {
    [view setHidden:YES];
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-02T20:13:17.763

抱歉，没有办法做到这一点。您必须单独声明。

你能做什么我把它们全部放在一个 UIView 中，然后隐藏 UIView，这会隐藏 UIView 中的所有内容。

# php - 未完全搜索 NetBeans 包含路径，无论是项目、全局还是 PHP

> ID：14128451
> 
> 赞同：1
> 
> 时间：2013-01-02T20:07:39.387
> 
> 标签：php, netbeans, include-path

我在使用 PHP 和包含路径的 NetBeans 7.2.1 时遇到了很多麻烦。这可能与 NetBeans PHP 包含路径相关，也可能不相关，[似乎未使用项目或全局](https://stackoverflow.com/questions/14106104/netbeans-php-include-path-seems-unused-either-project-or-global)，我声明 NetBeans 未使用其项目或全局包含路径。但是，在这种情况下，NetBeans 不会搜索整个 PHP Include_Path 变量。

PHP Include_Path 列在错误消息中。文件 AutoloaderFactory.php 位于 D:\PHP\zf2-tutorial\vendor\zendframework\zendframework\library\Zend\Loader；

但是，当我尝试使用 NetBeans/Tools/Create PHPUnit Tests 时，我收到一系列警告和错误消息，提示找不到 AutoloaderFactory.php。这些消息仅搜索三个提供的库，它们不包括具有所需类的库。

作为一个 NetBeans 菜鸟，我显然不了解它。但是，我无法构建我的项目，因为无论我做什么，它都找不到所需的类，包括使用 Project、Globabl 和 PHP 包含路径。有人能帮我吗？

错误消息包括在下面。谢谢...RG

```
PHPUnit Skeleton Generator 1.2.0 by Sebastian Bergmann.

Warning: include(D:\Program Files (x86)\Zend\ZendServer\share\ZendFramework\library\Zend\Loader\AutoloaderFactory.php): failed to open stream: No such file or directory in D:\PHP\zf2-tutorial\init_autoloader.php on line 38

Call Stack:
    0.0007     321856   1\. {main}() K:\phpunit-skelgen:0
    0.0062     472944   2\. SebastianBergmann\PHPUnit\SkeletonGenerator\Command::main() K:\phpunit-skelgen:45
    0.0167     980480   3\. ReflectionClass->newInstanceArgs() K:\pear\SebastianBergmann\PHPUnit\SkeletonGenerator\Command.php:171
    0.0167     980936   4\. SebastianBergmann\PHPUnit\SkeletonGenerator\TestGenerator->__construct() K:\pear\SebastianBergmann\PHPUnit\SkeletonGenerator\Command.php:171
    0.0178     987216   5\. include_once('D:\PHP\zf2-tutorial\module\Album\src\Album\Controller\AlbumController.php') K:\pear\SebastianBergmann\PHPUnit\SkeletonGenerator\TestGenerator.php:125
    0.0213     993680   6\. require_once('D:\PHP\zf2-tutorial\init_autoloader.php') D:\PHP\zf2-tutorial\module\Album\src\Album\Controller\AlbumController.php:4

Warning: include(): Failed opening 'D:\Program Files (x86)\Zend\ZendServer\share\ZendFramework\library\Zend\Loader\AutoloaderFactory.php' for inclusion (include_path='D:\PHP\Includes;D:\PHP\zf2-tutorial;D:\PHP\ZendProjects\htdocs\Includes;D:\PHP\zf2-tutorial\vendor\zendframework\zendframework\library;D:\Program Files (x86)\Zend\ZendServer\share\ZendFramework\library;K:\pear') in D:\PHP\zf2-tutorial\init_autoloader.php on line 38

Call Stack:
    0.0007     321856   1\. {main}() K:\phpunit-skelgen:0
    0.0062     472944   2\. SebastianBergmann\PHPUnit\SkeletonGenerator\Command::main() K:\phpunit-skelgen:45
    0.0167     980480   3\. ReflectionClass->newInstanceArgs() K:\pear\SebastianBergmann\PHPUnit\SkeletonGenerator\Command.php:171
    0.0167     980936   4\. SebastianBergmann\PHPUnit\SkeletonGenerator\TestGenerator->__construct() K:\pear\SebastianBergmann\PHPUnit\SkeletonGenerator\Command.php:171
    0.0178     987216   5\. include_once('D:\PHP\zf2-tutorial\module\Album\src\Album\Controller\AlbumController.php') K:\pear\SebastianBergmann\PHPUnit\SkeletonGenerator\TestGenerator.php:125
    0.0213     993680   6\. require_once('D:\PHP\zf2-tutorial\init_autoloader.php') D:\PHP\zf2-tutorial\module\Album\src\Album\Controller\AlbumController.php:4

Fatal error: Class 'Zend\Loader\AutoloaderFactory' not found in D:\PHP\zf2-tutorial\init_autoloader.php on line 39

Call Stack:
    0.0007     321856   1\. {main}() K:\phpunit-skelgen:0
    0.0062     472944   2\. SebastianBergmann\PHPUnit\SkeletonGenerator\Command::main() K:\phpunit-skelgen:45
    0.0167     980480   3\. ReflectionClass->newInstanceArgs() K:\pear\SebastianBergmann\PHPUnit\SkeletonGenerator\Command.php:171
    0.0167     980936   4\. SebastianBergmann\PHPUnit\SkeletonGenerator\TestGenerator->__construct() K:\pear\SebastianBergmann\PHPUnit\SkeletonGenerator\Command.php:171
    0.0178     987216   5\. include_once('D:\PHP\zf2-tutorial\module\Album\src\Album\Controller\AlbumController.php') K:\pear\SebastianBergmann\PHPUnit\SkeletonGenerator\TestGenerator.php:125
    0.0213     993680   6\. require_once('D:\PHP\zf2-tutorial\init_autoloader.php') D:\PHP\zf2-tutorial\module\Album\src\Album\Controller\AlbumController.php:4 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T22:04:58.780

我完全清除了 NetBeans 并重新安装了它。这包括在卸载 NetBeans 后进行注册表清理。此时，正在搜索 PHP Include_Path。我不知道是否正在搜索 NetBeans Include_Path，但这是另一个问题，我什至不确定我为什么要关心，因为这在实施后并不重要。我很高兴听到更好的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-09T20:35:15.097

重新启动 Netbeans 后，搜索对我有用，Netbeans 7.4。

# python - Twisted - 向选定的客户端发送数据

> ID：14128455
> 
> 赞同：3
> 
> 时间：2013-01-02T20:07:51.353
> 
> 标签：python, networking, twisted

我用 Twisted 制作了这个服务器，它从客户端接收字符串并将其发送到所有其他连接的客户端。但是有没有办法将字符串发送给发件人想要发送给的客户？如果是这样，我该如何在代码中做到这一点？这就是我到目前为止所做的（注意我是 Python 中的一个完整的菜鸟。我只需要为我的 iOS 应用程序构建一个服务器，所以如果问题很愚蠢，我很抱歉）：

```
from twisted.internet.protocol import Protocol, Factory
from twisted.internet import reactor

class IphoneChat(Protocol):
    def connectionMade(self):
        #self.transport.write("""connected""")
        self.factory.clients.append(self)
        print "clients are ", self.factory.clients

    def connectionLost(self, reason):
        self.factory.clients.remove(self)

    def dataReceived(self, data):
        #print "data is ", data
        a = data.split(':')
        if len(a) > 1:
            command = a[0]
            content = a[1]

            msg = ""
            if command == "iam":
                self.name = content
                msg = "iam" + self.name + " has joined"

            elif command == "msg":
                msg = self.name + ": " + content

            elif command == "img":
                msg = command + ":" + content + ":" + command

            elif command == "img2":
                msg = content

            elif command == "img3":
                msg = content

            print msg

            for c in self.factory.clients:
                c.message(msg)

    def message(self, message):
        self.transport.write(message + '\n')

factory = Factory()
factory.protocol = IphoneChat
factory.clients = []

reactor.listenTCP(53080, factory)
print "Iphone Chat server started"
reactor.run() 
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T21:41:10.617

```
self.factory.clients[24].transport.write("You are client 24!") 
```

我认为应该工作

# android - 在 Rhomobile 应用程序上未连接到 Internet 时找不到本地主机页面

> ID：14128463
> 
> 赞同：1
> 
> 时间：2013-01-02T20:08:21.983
> 
> 标签：android, rhomobile, rhodes

我有一个使用 Rhodes 构建的应用程序，可以在多种设备中运行良好。

但是，在带有 Android 3.2 的三星 GalaxyTab 中，它有一个问题 (GT-P6210)。

该设备没有3G，只有Wi-Fi。

启用 Wi-Fi 后，它工作正常。

当 Wi-Fi 被禁用时，它会工作几分钟，因此它会显示一个页面，上面写着“网页不可用”并显示的 URL (http://localhost:53899/app/....) 与出现的屏幕完全相同在 Android 的默认浏览器上找不到 URL。

如果我复制 URL 并转到浏览器并尝试访问它，以便页面正常加载。

有人知道会发生什么吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-13T15:01:37.387

在 Launchpad 上，目前有解决此问题的概念证明： [https ://developer.motorolaso​​lutions.com/message/11817#11817](https://developer.motorolasolutions.com/message/11817#11817)

# ruby-on-rails - RoR Password Protect Assets

> ID：14128469
> 
> 赞同：1
> 
> 时间：2013-01-02T20:08:44.883
> 
> 标签：ruby-on-rails, routing, asset-pipeline, basic-authentication

I am trying to password protect the fonts sub-directory in my assets directory because of licensing etc. I have tried a few ideas for routing, but I haven't been able to figure one out yet.

As of now, if you use the route assets/* you can access the file, however I am trying to make it go to an http_basic_auth. I have tried setting up a controller called asset_controller with the http_basic_auth in it, but I can't seem to get the routing correct. Here is my code so far:

**routes.rb** (this obviously does not work...)

```
match '/assets/', to: 'assets#show' 
```

**asset_controller.rb**

```
class AssetController < ApplicationController
  http_basic_authenticate_with :name => "admin", :password => "secret"
end 
```

Also, this approach may be wrong. So, if there is a better solution please suggest one!

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-02T20:12:20.140

您需要在资产管道之外提供您的字体。我建议创建一个`FontsController`为您想要使用的任何身份验证机制背后的字体资产提供服务的服务。提供二进制资产和控制器的密码保护操作是很好解决的问题。

# php - How to set 'FROM' property using Swiftmailer with Gmail?

> ID：14128472
> 
> 赞同：5
> 
> 时间：2013-01-02T20:08:47.047
> 
> 标签：php, email, gmail, swiftmailer

```
<?php
require_once 'lib/swift_required.php';
$transport = Swift_SmtpTransport::newInstance('smtp.gmail.com', 465, 'ssl')
  ->setUsername('username@gmail.com')
  ->setPassword('password')
  ;
$mailer = Swift_Mailer::newInstance($transport);
$message = Swift_Message::newInstance('HomeWork')
  ->setFrom(array('exampleFROM@gmail.com' => 'NAME'))
  ->setTo(array('exampleTO@gmail.com'=> 'NAME'))
  ->setBody('Test Message Body')
  ;
$mailer->send($message);
?> 
```

It works but sender is 'username@gmail.com'. How can I specify any other email address in order to send fake email?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-02T20:16:16.107

Gmail 不允许覆盖 FROM 名称，但您向 gmail 证明您拥有的经过验证的电子邮件地址除外。选择不同的电子邮件服务器或转到您的 gmail 设置并将其更改为您可以从中接收电子邮件的另一个有效电子邮件地址。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T20:12:47.903

您需要在 gmail 中设置外发电子邮件地址。如果电子邮件地址不在您可以发送的电子邮件地址列表中，Gmail 会将电子邮件地址更改为您的 gmail 中的地址。

Gmail -> 设置 -> 将邮件发送为 -> 添加您拥有的另一个电子邮件地址

# javascript - What would the Target Name for open.window be for tabpage_1?

> ID：14128477
> 
> 赞同：0
> 
> 时间：2013-01-02T20:09:14.287
> 
> 标签：javascript, tabs, targets

The code I show below is just sample, non working, to see if you can help with target naming conventions. I just can't seem to understand how you name the target. The actual code nicely creates a tabset on the page and all I'm trying to do is have the click event on a given tab open the URL desired in the tabpage corresponding to the tab selected. It seems like it would be so simple, but nothing I've tried for a target(including _parent, _self etc.) works and I can't find any examples of how naming conventions work for specific target locations in a document.

```
<!DOCTYPE html>
<html>
<head>
<title>Networks</title>
  <script>
    function open_tp1()
        {
      window.open("http://www.ficticious1.com","#tabpage_1") //What is the target name to use insead of #tabpage_1
    }
    function open_tp2()
    {
      window.open("http://www.ficticious2.com","#tabpage_2") //What is the target name to use insead of #tabpage_2
    }
  </script>
</head>
<body>
  <script src="tabs-soc.js"></script>
  <form id="form1" name="form1">
    <div id="wrapper" style="width: 934px">
      <div id="tabContainer" style="width: 903px">
        <div id="tabs">
        <ul>
          <li id="tabHeader_1">
          <img src="image1.png" alt="Image1"  onclick="open_tp1()"  /></li>
          <li id="tabHeader_2">
          <img src="image2.png" alt="Image2" onclick="open_tp2()" /></li>
        </ul>
        </div>
        <div id="tabscontent">
          <div class="tabpage" id="tabpage_1">

          </div>
          <div class="tabpage" id="tabpage_2">

          </div>
        </div>
      </div>
    </div>
  </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T20:13:18.980

您不能定位 HTML 元素，只能定位框架或窗口。`window.open`只允许你定位一个窗口。

如果您想替换 H​​TML 元素的内容，那么您必须使用 JavaScript 来获取数据（例如通过[XMLHttpRequest](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Using_XMLHttpRequest)），然后[操作 DOM](http://www.w3.org/wiki/Creating_and_modifying_HTML)将其插入到页面中。

由于您在不同的域上使用绝对 URI，因此您将受制于[相同的来源策略](http://en.wikipedia.org/wiki/Same_origin_policy)，因此您需要使用其中一种[解决方法](https://stackoverflow.com/questions/3076414/ways-to-circumvent-the-same-origin-policy)。

或者，忘记使用 JavaScript 并在文档中放置[一个。`iframe`](http://www.w3.org/TR/html4/present/frames.html#edef-IFRAME)然后使用链接上的[`target`属性](http://www.w3.org/TR/html4/present/frames.html#adef-target)定位它。

# c++ - 如何重定向 cout 和 cin？

> ID：14128478
> 
> 赞同：1
> 
> 时间：2013-01-02T20:09:22.380
> 
> 标签：c++, cout, cin

我正在使用以下命令执行我的程序： `./myProgram -i test.in -o test.out`

这两个文件都是合法的并且存在。

```
// run all over the arguments and set the cin and cout if needed
for (int i = 1; i < argc; i= i+2)
{
    int j = i+1;

    // loop over each pairs of arguments
    do
    {
        // set cin
        if(argv[i] == "-i")
        {
            static std :: ifstream s_inF(argv[j]);
            std :: cin.rdbuf(s_inF.rdbuf());
            break;
        }

        //set cout
        if(argv[i] == "-o")
        {
            std::ofstream out(argv[j]);
            std::cout.rdbuf(out.rdbuf());
            break;
        }

        // in order to search for the other case
        // (example:X.out -i)
        int temp = i;
        i = j;
        j = temp;
    }while(i>j);
} 
```

我写这个块是`main`为了重定向`cin`并`cout`根据`char **argv`. `cin`工作得很好，但`cout`没有。当我这样认为它有效时：

```
// run all over the arguments and set the cin and cout if needed
for (int i = 1; i < argc; i= i+2)
{
    int j = i+1;

    // loop over each pairs of arguments
    do
    {
        // set cin
        if(argv[i] == "-i")
        {
            static std :: ifstream s_inF(argv[j]);
          std :: cin.rdbuf(s_inF.rdbuf());
          break;
        }

        //set cout
        if(argv[i] == "-o")
            break;

        // in order to search for the other case
        // (example:X.out -i)
        int temp = i;
        i = j;
        j = temp;
    }while(i>j);
}

std::ofstream out(argv[4]);
std::cout.rdbuf(out.rdbuf()); 
```

是什么导致了问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T21:42:49.627

安装流缓冲区的流在安装流缓冲区后立即`std::cout`被破坏：

```
std::ofstream out(argv[j]);
std::cout.rdbuf(out.rdbuf()); 
```

第一行需要阅读

```
static std::ofstream out(argv[j]); 
```

可能还有其他错误，但这是我发现的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T20:14:06.950

它不起作用，因为您需要 j 才能`i+1`使输出重定向起作用。试一试——如果你先通过第一个样本`-o`然后通过`-i`第一个样本会发生什么？

改变这个：

```
 int temp = i;
        i = j;
        j = temp; 
```

对此：

```
 int temp = i;
        i = j;
        j = temp + 1; 
```

您还必须在 while 条件下工作。

顺便说一句，你为什么需要`j`？您只能使用 i 执行此操作，而不是使用 i+1 进行重定向。我相信这也会使代码更容易理解。

# java - How do I detect a memory leak that is not showing up while profiling in Netbeans?

> ID：14128483
> 
> 赞同：2
> 
> 时间：2013-01-02T20:10:05.703
> 
> 标签：java, memory, netbeans, memory-leaks, profiling

The total memory used by the program is not **nearly** recorded by Netbeans' built-in profiler. There are some very large objects that are not showing up, such as a WriteableRaster (which I'll be doing away with soon). In terms of magnitude: if the profiler doesn't account for garbage collection, I'll get a total of ~2.5GB from the profiler while the program is using ~6GB. If the profiler *does* account for garbage collection, then it will display ~100MB being used (live memory), while the program is still using ~6GB. Is there any way to track larger objects with the profiler or will I have to use a different tool?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T20:37:10.060

任务管理器显示的数量是堆的总大小，可能大部分是空闲/未使用的。所以它可能与泄漏无关。

如果你想使用更少的内存，你可以减少最大堆大小参数，但你可能会在某个阶段耗尽内存......

# android - Android - 测试应用内计费，不确定如何启用产品并使用测试帐户进行测试

> ID：14128486
> 
> 赞同：0
> 
> 时间：2013-01-02T20:10:18.950
> 
> 标签：android, android-billing

我已经使用 adb 工具在我自己的设备上进行了测试，该程序似乎工作正常。

我创建了一个测试帐户，并将其添加到我的开发者控制台中。但是当我尝试使用我的测试帐户登录开发者控制台时，Google play 试图让我支付 25 美元以注册为开发者。所以我认为我做错了什么。如何使用我的测试帐户登录我的设备？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T20:15:01.287

要使用您的测试帐户登录您的设备，您必须进行出厂数据重置，然后在启动时指定您的测试帐户并询问您的帐户信息。

当您没有专用的测试设备时，您会感到非常痛苦。

有关详细信息，请参阅[测试应用内计费](http://developer.android.com/google/play/billing/billing_testing.html#billing-testing-real)。

# c# - JSP中ASP.Net的Page Load方法的等效方法是什么

> ID：14128489
> 
> 赞同：1
> 
> 时间：2013-01-02T20:10:48.287
> 
> 标签：c#, asp.net, jsp, servlets

在处理 ASP.NET 项目时，我真的很喜欢为每个页面或 web 窗体创建一个类的概念，我可以在其中编写我想要的所有方法和操作，更重要的是，页面加载方法。

每个人都说我们应该避免在 ASP 或 JSP 中使用 scriplets。

而且我认为页面加载对我们来说已经存在，因此我们不再使用 scriplets。

因为我听到和读过很多次，我们无法知道这些脚本何时会运行，但是在 Page Load 方法中，我们确切地知道代码将如何运行以及页面将如何呈现。

但是在 JSP 中，据我所知，我们没有为每个页面设置这种类型的服务器端类。

相反，我们有一个叫做servelts的东西，每个人都鼓励使用它。

但从技术上讲，servlet 独立于普通的 JSP 页面。

因此，我仍然在我的 JSP 页面中使用 scriplets，尽管我试图尽可能减少它们，但我仍然使用一些 scriplets 来检查 Session 和一些 URL 参数。

JSP中的页面加载（ASP）没有类似的想法或方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T20:27:42.193

BalusC 说您将苹果与橙子进行比较是正确的。JSF 是为响应 asp.net 而创建的。（[来源](http://www.youtube.com/watch?v=9ei-rbULWoA)@ 47 分钟）它已经独立发展，您可能会很好地研究所有不同的框架和范例。虽然 JSF 的工作方式与 asp.net 类似，但仍有许多值得探索的替代方案。在 .NET 中，您可能想研究 MVC4。在 Java 中有 Tapestry、Spring MVC、Seams 等。

我将从 wiki 比较开始，然后从那里开始。在你的游戏阶段，我会选择一个并尝试熟悉它，而不是尝试另外两个来做同样的事情。

[http://en.wikipedia.org/wiki/Comparison_of_web_application_frameworks#Java_2](http://en.wikipedia.org/wiki/Comparison_of_web_application_frameworks#Java_2)

# arrays - load NxNxN fortran binary matrix into matlab and retaining same ijk ordering

> ID：14128493
> 
> 赞同：-1
> 
> 时间：2013-01-02T20:11:07.017
> 
> 标签：arrays, matlab, fortran, reshape

If I write out a fortran NxNxN array in binary then read it back into matlab and use

```
array = RESHAPE(inputdata,[N N N]) 
```

will it retain the same structure? i.e. will array(i,j,k) in Matlab correspond to array(i,j,k) in Fortran? Or do I have to change the ordering? Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T22:30:14.600

Matlab 和 Fortran 都使用以列为主的存储顺序，所以如果你只是做了类似的事情`write(iounit) array`，你发布的例子应该没​​问题。

# loops - VBA Excel循环每个主题/记录的多个观察结果

> ID：14128494
> 
> 赞同：0
> 
> 时间：2013-01-02T20:11:09.593
> 
> 标签：loops, excel, vba

我有一个关于使用 VBA 将单元格从一张纸复制到另一张纸的问题。

**问题背景：**

excel 电子表格的 Sheet1 包含标题和来自多个测试对象的一些测试观察结果。每行是对每个受试者一次试验的观察。每个测试对象都有静态数量的观察，即 15 行。我需要从指定的行中选择一个单独的单元格并将它们复制到同一工作簿的 sheet2 中，每个主题为 1 行。表 2 也将包含标题。作为 VBA 的新手，以及一般的编程/脚本，我在如何做到这一点上遇到了一些问题。下面是我试图操作的数据的类似示例。下面的数据集包含 5 列。主题编号为 1111 和 2222。Variable() 的每个标题包含 1 个字母，例如 VariableOne = "a"、VariableTwo = "b" 等。

**主题 - 变量一 - 变量二 - 变量三 - 变量四**

第1111章

第1111章

第1111章

第1111章

第2222章

第2222章

第2222章

第2222章

例如，表 2 的第 2 行（由于标题）将包括主题编号 1111 和来自 VariableOne 的值“m”、来自 VariableTwo 的“f”、来自 VariableThree 的“c”和来自 VariableFour 的“l”。表 2 的第 3 行将包含主题 #2222 和列在与主题 1111 相同位置的值（这些值将不同，但它们在数据集中的位置将相同）。

我认为代码应该包含 2 个循环；一个遍历主题，另一个遍历实际数据。我不太确定如何去做，所以如果有人以前做过，我将不胜感激。

此外，我刚刚阅读了“Microsoft Excel VBA 编程绝对初学者”一书，这是对 VBA for excel 的一个很好的介绍，但它并没有帮助我为我的个人 VBA/excel 需求制定任何解决方案。有没有人知道更好的资源，例如一本书，以更加熟悉用于 excel 的 VBA 脚本语言？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T17:45:20.247

您的问题向我表明，您希望将第一张表上 m、f、c 和 l 位置的值复制到第二张表上每个主题的单行中。以下就是这样做的（并假设您已经手动将标题复制到与第一页相同的列中）。如果我对您的问题的理解有误，请告诉我，我将尝试相应地调整代码示例。

```
Sub CopyMySubjectsVariables()

    'I find making worksheet variables helps make code easier to understand
    Dim sheetOne, sheetTwo As Worksheet
    Set sheetOne = Worksheets("Sheet1")
    Set sheetTwo = Worksheets("Sheet2")

    'For the same reason, I set the column numbers to variables when possible
    Dim subjectCol, variableOneCol, variableTwoCol, variableThreeCol, variableFourCol As Integer
    subjectCol = 1
    variableOneCol = 2
    variableTwoCol = 3
    variableThreeCol = 4
    variableFourCol = 5

    'In your example table there are only four observations per subject 
    Dim numObservationsPerSubject As Integer
    numObservationsPerSubject = 4

    'Since Sheet Two also contains headers, the first subject will start on Row 2
    Dim subjectRowOnSheetTwo As Integer
    subjectRowOnSheetTwo = 2

    'Loop through all used rows of sheet one "stepping" from one subject to the next
    Dim subjectStartingRowOnSheetOne As Integer 'This variable is usually called "i" but I wanted to clarify it a bit
    For subjectStartingRowOnSheetOne = 2 To sheetOne.UsedRange.Rows.Count Step numObservationsPerSubject

        'Copy Subject Number/Name/Whatever From Sheet One to Sheet Two
        sheetTwo.Cells(subjectRowOnSheetTwo, subjectCol).Value = sheetOne.Cells(subjectStartingRowOnSheetOne, subjectCol).Value

        'Copy Variable One From the Fourth Row (startingRow+3) of the Subjects Observations ("m"'s position in your example)
        sheetTwo.Cells(subjectRowOnSheetTwo, variableOneCol).Value = sheetOne.Cells(subjectStartingRowOnSheetOne + 3, variableOneCol).Value

        'Copy Variable Two From Second Row (startingRow+1) of Subjects Observations ("f"'s position in your example)
        sheetTwo.Cells(subjectRowOnSheetTwo, variableTwoCol).Value = sheetOne.Cells(subjectStartingRowOnSheetOne + 1, variableTwoCol).Value

        'Copy Variable Three From First Row (startingRow) of Subjects Observations ("c"'s position in your example)
        sheetTwo.Cells(subjectRowOnSheetTwo, variableThreeCol).Value = sheetOne.Cells(subjectStartingRowOnSheetOne, variableThreeCol).Value

        'Copy Variable Three From Third Row (startingRow+2) of Subjects Observations ("l"'s position in your example)
        sheetTwo.Cells(subjectRowOnSheetTwo, variableFourCol).Value = sheetOne.Cells(subjectStartingRowOnSheetOne + 2, variableFourCol).Value

        'Increment the Starting Row on Sheet Two so the next subject starts on a new Row
        subjectRowOnSheetTwo = subjectRowOnSheetTwo + 1

    Next subjectStartingRowOnSheetOne

End Sub 
```

在您的示例表上运行此代码后，工作表二具有以下内容：

1111 毫升

2222 毫升

# android - opengl android time too fast

> ID：14128496
> 
> 赞同：0
> 
> 时间：2013-01-02T20:11:29.980
> 
> 标签：android, opengl-es, time

I'm trying to get the time using android and open gl for my racing game.

My code now is:

```
 deltaTime = (System.currentTimeMillis() + startTime) / 1000000000000.0f;
 startTime = System.currentTimeMillis();
 tickTime += deltaTime;
 DecimalFormat dec = new DecimalFormat("#.##");
 Log.d("time", dec.format(tickTime/100)); 
```

but it's a bit too fast.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T20:56:28.483

您可能想看一下 Android Breakout：

[http://code.google.com/p/android-breakout/source/browse/src/com/faddensoft/breakout/GameState.java#1001](http://code.google.com/p/android-breakout/source/browse/src/com/faddensoft/breakout/GameState.java#1001)

计算类似，但请注意它使用`System.nanoTime()`，它使用单调时钟。您不想使用`System.currentTimeMillis()`，它使用挂钟。如果设备连接到网络，则可以更新挂钟，这可能会导致向前或向后大幅跳跃。

该代码还包括一个（禁用的）帧速率平滑实验，这似乎并不重要。

正如我认为您发现的那样，这种方法的关键是要认识到帧之间的时间间隔不是恒定的，您需要根据实际经过的时间来更新游戏状态，而不是显示更新频率的固定概念。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T20:20:06.933

由于您以毫秒为单位工作，您不应该除以 1000f 而不是 1000000000000.0f 吗？

# android - Android - 如何在不使应用上线的情况下创建应用内产品？

> ID：14128506
> 
> 赞同：0
> 
> 时间：2013-01-02T20:12:13.687
> 
> 标签：android

我在这里阅读说明：http: [//developer.android.com/training/in-app-billing/test-iab-app.html](http://developer.android.com/training/in-app-billing/test-iab-app.html)

它说要上传您的应用程序（我这样做了），然后我就可以为其创建计费项目。但我看不到创建供用户购买的项目的方法。有人可以列出执行此操作的步骤吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T20:21:22.860

注意：我使用的是开发者控制台的“旧”/“当前”版本，而不是新版本。

1.  在开发者控制台的主页上，点击“应用内商品”![显示应用内产品链接位置的屏幕截图](../Images/1f7c920e1ae29ed0eeb7a267ba4ddd8a.png)
2.  点击“添加应用内商品”按钮
3.  填写必要的字段

我没有在未发布的应用程序上尝试过这个，所以我不确定这些步骤在应用程序初始发布之前是否有所不同。

# visual-studio - create a folder in a grandparent dir vb.net

> ID：14128511
> 
> 赞同：1
> 
> 时间：2013-01-02T20:12:53.497
> 
> 标签：visual-studio, vb.net-2010, dir

I want to create a dir (named with a varible `Utilities._Name`)located two levels from the exe file,

My exe file is in `C:\SGEA\SGEA\bin` How can I do it so I get `C:\SGEA\theNewDir` without using full path, just relative paths?

```
If Not System.IO.Directory.Exists(Utilities._Name) Then
   System.IO.Directory.CreateDirectory(Utilities._Name)
Else
   MessageBox.Show("There is already a dir named: " & Utilities._Name, "SGEA", MessageBoxButtons.OK, MessageBoxIcon.Information)
End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T20:17:56.920

If you have the path to the exe file, you can use the [System.IO.Path Class](http://msdn.microsoft.com/en-us/library/system.io.path.aspx) to navigate easily:

```
Dim folder = Path.GetDirectoryName(theExeFile)
Dim grandparent = Path.GetDirectoryName(Path.GetDirectoryName(folder)) ' Up two directories

Dim newFolder = Path.Combine(grandparent, "theNewDir") ' Use this to create the new folder name cleanly

Utilities._Name = newFolder 
```

# c# - 到数据库的 C# 连接和非查询执行

> ID：14128514
> 
> 赞同：0
> 
> 时间：2013-01-02T20:13:07.277
> 
> 标签：c#, sql-server, tsql, sqlconnection, sqlcommand

只是想知道在使用这种形式的数据库命令/连接时是否存在任何典型问题。有什么“更好”的吗？任何其他可能帮助我提高我的 TSQL/C# 技能的东西都将不胜感激！谢谢！

```
private void Approval_Status(object sender, EventArgs e)
    {
        Button Approval = (Button)sender;
        /*
         * Boolean determining if the request was approved or denied
         */
        Boolean Status = false;

        if (ValidateApproval(Approval.Text.Trim().ToUpper()) == true)
        {
            SqlCommand cmd0 = new SqlCommand();
            cmd0.Connection = db.con(user.Authority);
            cmd0.CommandType = CommandType.Text;
            cmd0.CommandText = "UPDATE [TBL_REQUEST] " +
                "SET [TBL_REQUEST].[REQUEST_STATUS]=@Status, [TBL_REQUEST].[APPROVED_BY]=@Approver, " +
                "[TBL_REQUEST].[DATE_APPROVED]=@Date, [TBL_REQUEST].[PRINTED_NAME]=@Name, " +
                "[TBL_REQUEST].[TITLE]=@Title, [TBL_REQUEST].[PTO_USED]=@Used " +
                "WHERE [TBL_REQUEST].[ID]=@ID; ";
            if (Approval.Text.ToUpper() == codes.RequestApproved)
            {
                cmd0.Parameters.AddWithValue("@Status", SqlDbType.VarChar).Value = codes.RequestApproved;
                Status = true ;
            }
            else
            {
                cmd0.Parameters.AddWithValue("@Status", SqlDbType.VarChar).Value = codes.RequestDenied;
                Status = false;
            }
            cmd0.Parameters.AddWithValue("@Approver", SqlDbType.VarChar).Value = user.User;
            cmd0.Parameters.AddWithValue("@Date", SqlDbType.Date).Value = DateTime.Today.ToShortDateString();
            cmd0.Parameters.AddWithValue("@Name", SqlDbType.VarChar).Value = txtApproval.Text.Trim();
            cmd0.Parameters.AddWithValue("@Title", SqlDbType.VarChar).Value = user.Title;
            cmd0.Parameters.AddWithValue("@Used", SqlDbType.Float).Value = (float)nudUsed.Value;
            cmd0.Parameters.AddWithValue("@ID", SqlDbType.VarChar).Value = txtID.Text.Trim();
            /*
             * Execute our non-query
             */
            db.conEstablished.Open();
            cmd0.ExecuteNonQuery();
            db.conEstablished.Close();
            /*
             * Dispose our resources
             */
            cmd0.Dispose();
            ClearRequestsPanel();
            /*
             * Inform our user of a successful update
             */
            if (Status == true)
            {
                MessageBox.Show(msg.RequestApproved);
            }
            else if (Status == false)
            {
                MessageBox.Show(msg.RequestDenied);
            }
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T20:17:49.807

看起来您很可能正在尝试创建自己的连接池。不要这样做：

*   对所有一次性资源使用`using`声明。这包括`SqlConnection`和`SqlCommand`。这样，即使抛出异常，资源也会被释放
*   为每个数据库操作创建一个新`SqlConnection`的，并让系统管理池化*真实*网络连接。

目前尚不清楚什么`db.con(...)`和`db.conEstablished`是，但*听起来*您很可能只有一个连接 - 这意味着您无法在多线程环境中安全地使用此代码。有一个帮助方法来创建一个 是很好的`SqlConnection`，但它应该每次都创建一个新的，然后在操作完成时处理它。

此外，您应该开始遵循 .NET 命名约定和以下代码：

```
if (Status == true)
{
    MessageBox.Show(msg.RequestApproved);
}
else if (Status == false)
{
    MessageBox.Show(msg.RequestDenied);
} 
```

...最好写成：

```
MessageBox.Show(Status ? msg.RequestApproved : msg.RequestDenied); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T20:23:06.293

`using`是处理 SqlConnection 等一次性对象的“正确”方式。

您的代码的部分问题是，如果查询导致异常，则将跳过此行，因为异常会中断方法：

```
cmd0.Dispose(); 
```

使用`using`dispose 时将始终调用，即使异常退出块（在内部它只是将代码包装在 a 中`try/catch`并将调用`.Dispose()`放在 catch 块中。）

您还应该注意，`SqlConnection`该类在内部处理池。它实际上不是与数据库的单个开放网络连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T10:54:51.437

您的代码应该看起来像这样。显然我在这里有在别处定义的变量，但希望这能让你更好地了解如何使用`using`

```
using(var dbconn = new SqlConnection(connectionString))
{
    using (var dbcmd = new SqlCommand(storedProcedure, dbconn))
    {
        dbcmd.CommandType = CommandType.StoredProcedure;
        dbcmd.Parameters.AddRange(sqlParameters.ToArray());
        dbconn.Open();
        return dbcmd.ExecuteNonQuery();
    }
} 
```

# python - 生产 Web 应用程序上的 NLTK

> ID：14128520
> 
> 赞同：5
> 
> 时间：2013-01-02T20:14:18.563
> 
> 标签：python, pyramid, nltk

我想将自定义标记器合并到我正在开发的 Web 应用程序（在 Pyramid 上运行）中。我使用 NLTK 在我的本地机器上让标记器工作正常，但我读到 NLTK 的生产速度相对较慢。

似乎存储标记器的标准方法是腌制它。在我的机器上，加载 11.7MB 的 pickle 文件需要几秒钟。

1.  NLTK 是否适用于生产？我应该看[scikit-learn](http://scikit-learn.org/)还是像 Mahout 这样的东西？

2.  如果 NLTK 足够好，那么确保它正确使用内存等的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T00:34:58.430

我运行[文本处理](http://text-processing.com)及其相关的[NLP API](https://www.mashape.com/japerk/text-processing)，它使用大约 2 打不同的腌制模型，这些模型由 Django 应用程序（nginx 后面的 gunicorn）加载。模型会在需要时立即加载，一旦加载，它们就会保留在内存中。这意味着每当我重新启动 gunicorn 服务器时，需要模型的第一个请求必须等待几秒钟才能加载，但每个后续请求都会使用已经缓存在 RAM 中的模型。仅当我部署新功能时才会重新启动，这通常涉及更新模型，因此无论如何我都需要重新加载它们。因此，如果您不希望经常更改代码，并且对一致的请求时间没有强烈要求，那么您可能不需要单独的守护程序。

除了初始加载时间之外，主要的限制因素是内存。我目前只有1个工作进程，因为当所有模型都加载到内存中时，单个进程最多可以占用1GB（YMMV，对于单个11MB的pickle文件，你的内存需求会低得多）。使用已加载的模型处理单个请求足够快（通常 <50 毫秒），我目前不需要超过 1 个工作人员，如果需要，最简单的解决方案是添加足够的 RAM 来运行更多工作进程。

如果您担心内存，请查看 scikit-learn，因为等效模型使用的内存比 NLTK 少得多。但是，它们不一定更快或更准确。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T22:21:41.733

减少启动延迟的最佳方法是将标记器作为守护程序（持久服务）运行，您的 Web 应用程序会将文本片段发送到标记。这样，您的标记器仅在系统启动时以及如果/当​​需要重新启动守护程序时加载。

只有您可以决定 NLTK 是否足够快以满足您的需求。加载标记器后，您可能已经注意到 NLTK 可以标记多页文本而没有明显的延迟。但是资源消耗和并发用户的数量可能会使事情复杂化。

# sql - 替换 Access 中的信息

> ID：14128525
> 
> 赞同：0
> 
> 时间：2013-01-02T20:14:32.873
> 
> 标签：sql, forms, ms-access, vba

我在 Access 中有一个类似于此的表：

```
ProductID - ClientID - ProductName - Description
118       -  5       - Full Search - xxxx
35        -  2       - Update      - xxxx
105       -  7       - O & E       - xxxx 
```

我希望能够调用 ProductID 并让它返回 ProductName 字段。

```
ProductID = Forms!Orders.Product.Value() 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T21:21:32.010

您可以使用[DLookUp](http://support.microsoft.com/kb/208786)：

```
 DlookUp("ProductName","Products","ProductID=" & SomeNumericID) 
```

还有其他方法，但你需要说出你来自哪里，要去哪里。

# ios - 更改大型应用程序中每个 UILabel 的字体

> ID：14128526
> 
> 赞同：3
> 
> 时间：2013-01-02T20:14:35.117
> 
> 标签：ios, fonts, skinning, swizzling

这是一个有趣的问题：

我们正在重新设计整个应用程序，其中包含超过 100,000 行代码和近 100 个 XIB 文件。新设计要求（几乎）应用程序中的每个标签都使用新的自定义字体，而旧应用程序使用 Helvetica Neue 的默认字体。

尽可能多地更改 UILabel 的最有效方法是什么？我们不想手动更改代码和 XIB 中的数千个标签（这尤其困难，因为我们使用的是非系统字体）。

我们已经讨论了将 UILabel 的创建方法调整为默认使用新的自定义字体，这仍然允许在创建后自定义 Helvetica Neue 中保留的少数标签。

想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T20:44:52.033

看看 NUI [https://github.com/tombenner/nui](https://github.com/tombenner/nui)。您可以使用类似 CSS 的样式表自定义很多控件，并通过子类或类别实现它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T20:27:01.787

您可能应该继承 UILabel 并覆盖`init`您选择的方法，或者`awakeFromNib`，并在那里设置自定义字体。然后你可以`xib`手动浏览，或者在文本编辑器中打开它并添加一行

```
<string key="X.CustomClassName">YourCustomLabelClass</string> 
```

将指定的标签设置为您的自定义标签类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T20:24:38.980

Swizzling 是一个不错的选择。如果您想以其他方式执行此操作并且遇到自定义字体问题，我通常会创建一个简单的 UILabel 子类，它会在 awakeFromNib 中为每种自定义字体更改它的字体，以便我可以在界面构建器中布置它们。

但是......我想到了：[[UILabel 外观] setFont:xxx];

不过，我不确定您将如何处理保持大小。也许 swizzle 是最好的选择

# c++ - 如何使用 C++ 编辑已创建文件中的文本？

> ID：14128528
> 
> 赞同：-1
> 
> 时间：2013-01-02T20:14:41.160
> 
> 标签：c++, visual-studio-2008

我是 C++ 编程的新手。我想：
i）在我的程序中打开一个已经创建的文本文件
ii）读取其内容以匹配某些特定的字符串
iii）在同一个文件中用一些新的字符串值替换内容

我试图从谷歌找到任何解决方案，但失败了。任何帮助将不胜感激......这是我打算做的一个例子......

```
#include<iostream>
#include<iomanip>
#include<string>
#include<fstream>
using namespace std;
void main()
{
    string name="ABC";
    string designation="Student";
    int age=19;
    fstream outfile;
    outfile.open("Data.txt,ios::in|ios::out|ios::app");
        outfile<<setw(10)<<name<<setw(10)<<designation<<setw(10)<<age;
    outfile>>name;
    if(name=="ABC")
    {
            name="XYZ";
            outfile<<name;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T20:19:57.627

呃，你需要读取文件，进行更改，然后写入文件。如果您所做的替换长度不同，那么您需要在修改后重写文件的内容，以便将它们向下移动。

# mvvm - 事件处理 MVVM WinRT

> ID：14128538
> 
> 赞同：4
> 
> 时间：2013-01-02T20:15:11.833
> 
> 标签：mvvm, windows-8, microsoft-metro, windows-runtime

您如何在 Metro 应用程序中处理 MVVM 中的事件？我在 WPF 中使用了来自 MVVM 灯的交互类和 EventToCommand，但在 WinRT 中似乎没有交互。也没有触发器，所以我必须“使用丑陋的方式”吗？（后面的代码和

`(this.DataContext as ViewModel).Command.Execute()`

例如？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T20:30:34.317

到目前为止，我发现的 EventToCommand 的最佳替代方案是附加的命令解决方案，该解决方案已在此[CodeProject 文章](http://www.codeproject.com/Articles/319855/Attached-Command-for-Windows-8-Metro-Style-in-C)中演示。

这就是它的使用方式。

```
<Button Content="Test Button"
 local:AttachedCommand.RoutedEvent="PointerEntered"
 local:AttachedCommand.Command="{Binding TestCommand}"/> 
```

另一种选择是[模仿](http://dotnetbyexample.blogspot.ch/2012/07/a-winrt-behavior-to-mimic-eventtocommand.html)Joost van Schaik 的 EventToCommand 行为，但考虑到所需的依赖关系，它对我来说太重了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T15:26:04.250

使用与 Silverlight 中相同的方法附加命令，除了绑定到视图模型将使用接口和实现它的类。此类应用作数据上下文中的定位器，并在 app.xaml.cs 文件中声明它。如果您需要更多详细信息，请告诉我。

# r - 我可以使用 geom_rug 将第三个变量添加到图形中吗？

> ID：14128541
> 
> 赞同：3
> 
> 时间：2013-01-02T20:15:24.460
> 
> 标签：r, ggplot2

我有运动数据集，它显示了球队的结果、输赢、累积比赛和联赛排名。这样就产生了一个简单的游戏位置图

```
df<- data.frame(played=c(1:5), 
        result=c("W","L","D","D","L"), 
        position=c(1,3,4,4,5))
ggplot() + 
     geom_line(data=df,aes(x=played,y=position)) + 
     scale_y_reverse() 
```

我想在 x 轴上为每个结果添加一个不同颜色的地毯，比如`W`绿色、`L`红色和`D`蓝色，但似乎无法使用`geom_rug`或添加`geom_bar`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T20:22:08.053

这应该可以解决问题：

```
##The data frame df is now inherited by
##the other geom's
ggplot(data=df,aes(x=played,y=position)) + 
  geom_line() +
  scale_y_reverse() +
  geom_rug(sides="b", aes(colour=result)) 
```

在`geom_rug`函数中，我们指定我们只想要底部的地毯，并且我们应该根据结果为线条着色。要更改颜色，请查看`scale_colour_*`功能。对于您的特定颜色，请尝试：

```
+ scale_colour_manual(values=c("blue","red", "green")) 
```

![在此处输入图像描述](../Images/a5ab4bf2344ef4a010b369cef6909c52.png)

# ruby-on-rails - Rails 将视图拆分为单独页面的方法是什么？

> ID：14128545
> 
> 赞同：5
> 
> 时间：2013-01-02T20:15:36.827
> 
> 标签：ruby-on-rails

在我的显示操作/视图中，我显示了很多我想分成单独页面的数据（在这种情况下总共三页）。我可以通过为每个附加页面添加一个新的操作和视图来轻松地做到这一点，但这是在 Rails 中做到这一点的“正确”方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T23:37:24.387

好问题！

> 我可以通过为每个附加页面添加一个新的操作和视图来轻松地做到这一点，但这是在 Rails 中做到这一点的“正确”方式吗？

我怀疑您不确定是否违反 REST？

我不知道您正在显示什么数据，但最终对您（代码方面）和您的用户（设计方面）来说最清晰和最简单的解决方案应该会获胜，如果这意味着添加一个新操作，那就这样吧。避免仅仅为了新的表演动作而添加新的控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T04:39:12.730

您在寻找分页解决方案吗？如果是这样，我会建议[kaminari](https://github.com/amatsuda/kaminari)或[will_paginate](https://github.com/mislav/will_paginate)。此外，如果您在设置方面需要任何帮助，他们每个人都有 railscast。

# spring - spring:bind 在列表中使用时抛出错误

> ID：14128552
> 
> 赞同：0
> 
> 时间：2013-01-02T20:16:48.277
> 
> 标签：spring, spring-mvc

我有一个包含用户的列表。我正在尝试在 JSP 中打印它，但有些我无法让它使用`spring:bind`. 我得到一个例外。我尝试使用的原因`spring:bind`是引入 @Formatting 注释。

JSP 中的代码

```
<c:forEach items="${users}" var="user" varStatus="status">
   <spring:bind path="users[${status.index}].name">
      <c:out value="${status.value}" />
   </spring:bind>
</c:forEach> 
```

控制器

```
ModelAndView modelAndView = new ModelAndView("go_some_JSP_page");
List<UserEntity> users = userManager.getAllObjects();
modelAndView.addObject("users", users); 
```

顺便说一句，UserEntity 有名称字段。如果我删除绑定并尝试`user.name`使用`<c:out value="user.name" />`它打印值

测试示例代码位于[https://github.com/hth/StatusInvoke.git](https://github.com/hth/StatusInvoke.git)

请看一下[landing.jsp](https://github.com/hth/StatusInvoke/blob/master/WebContent/WEB-INF/jsp/landing.jsp)第35行

如果您在部署它时遇到任何问题，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T21:45:27.847

我可以让它工作的唯一方法是，如果您绑定到的 bean 路径在基本命令 bean 中。就我而言，我使用的是 MyForm，它为用户提供了 getter 和 setter。spring bind 标记似乎在基本表单命令 bean 之外不起作用。

因此，您的控制器方法需要更改为 .

```
@RequestMapping(method = RequestMethod.GET)
public ModelAndView loadForm() {
    ModelAndView modelAndView = new ModelAndView("landing");
    MyForm myForm = new MyForm();
    myForm.setUsers(populate());
    modelAndView.addObject("myForm", myForm);
    return modelAndView;
} 
```

在你的jsp中有以下内容。

```
<form:form commandName="myForm">
    <c:forEach var="user" items="${myForm.users}" varStatus="status">
        <tr>
            <td><spring:bind path="users[${status.index}].loginName">
                    <c:out value="${status.value}" />
                </spring:bind></td>
            <td><spring:bind path="users[${status.index}].balance">
                    <c:out value="${status.value}" />
                </spring:bind></td>
        </tr>
    </c:forEach>
</form:form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T01:10:57.110

调用 @NumberFormat 注释的正确答案是使用`spring:eval expression`标签

```
<spring:eval expression="user.balance" /> 
```

# java - Android - 在RelativeLayout 的网格中排列imageViews？

> ID：14128555
> 
> 赞同：0
> 
> 时间：2013-01-02T20:16:54.437
> 
> 标签：java, android, algorithm, imageview, margin

我试图找出一些在具有边距的 RelativeLayout 中的网格中排列 ImageViews 的方法。我不想使用 GridView 或 GridLayout，因为我想稍后更改 ImageViews 的位置。

谢谢，

山姆

# android - 在 Android 中发生 OnClickEvent 时激活 CAB 菜单

> ID：14128558
> 
> 赞同：4
> 
> 时间：2013-01-02T20:17:10.867
> 
> 标签：android, android-actionbar, android-gridview, android-menu, contextual-action-bar

从 ActionBar 单击 MenuItem 时尝试激活 CAB 菜单。这是我设置 GridView 以收听多选的方法。当我长按 GridView 中的任何项目时，multiModeChoiceListener 工作正常。它工作正常。现在我需要在按下操作栏中的菜单项时激活 CAB 菜单。按下后，CAB 菜单应显示选择了 0 个项目。之后，它应该允许我通过单击从 GridView 中选择项目。我怎样才能实现这个功能？

GridView 设置监听器：

```
gv.setChoiceMode(GridView.CHOICE_MODE_MULTIPLE_MODAL); 
gv.setMultiChoiceModeListener(new MultiChoiceModeListener()); 
```

MultiChoiceModeListener.java

```
public class MultiChoiceModeListener implements
    GridView.MultiChoiceModeListener {  

public boolean onCreateActionMode(ActionMode mode, Menu menu) {
    mode.getMenuInflater().inflate(R.menu.featured_multiselect, menu);
    MenuItem mi = menu.findItem(R.id.close);
    mi.setIcon(R.drawable.cancel);
    mode.setTitle("Select Items");
    return true;
}

public boolean onPrepareActionMode(ActionMode mode, Menu menu) {    
    return true;
}

public boolean onActionItemClicked(ActionMode mode, MenuItem item) {
    Toast.makeText(getApplicationContext(), item.getTitle(),
            Toast.LENGTH_SHORT).show();
    if (item.getTitle().toString().equalsIgnoreCase("Close")) {
        mode.finish();
    }
    return true;
}

public void onDestroyActionMode(ActionMode mode) {
    new ChangeNotifier().changeOnFavoriteStore = true;
    new AddFavorites().execute("add", device_id, dataArray);
    if (notify == true) {
        Toast.makeText(getApplicationContext(),
                "Selected items are added to Favorites",
                Toast.LENGTH_SHORT).show();
        notify = false;
    }
}

public void onItemCheckedStateChanged(ActionMode mode, int position,
        long id, boolean checked) {
    int selectCount = gridView.getCheckedItemCount();
    if (selectCount > 0) {
        notify = true;              
        dataArray.add(position);
        switch (selectCount) {
        case 1:
            mode.setSubtitle("One item added to favorites");
            break;
        default:
            mode.setSubtitle("" + selectCount
                    + " items added to favorites");
            break;
        }
    } 

   } 
```

OnMenuItemClick 方法：

```
 public boolean onPrepareOptionsMenu(final Menu menu) {

    final MenuItem editItem = menu.findItem(R.id.editit);

    editItem.setOnMenuItemClickListener(new OnMenuItemClickListener() {

        @Override
        public boolean onMenuItemClick(MenuItem item) {
            //the CAB menu should be activated here. So that it reads that 0 items are selected in ActionBar

            return false;
        }

    }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T16:23:15.913

根据您的问题，我了解到您正试图`GridView`通过单击其中一个菜单项来启动关联的 CAB。我不知道您是否可以这样做（但我可能弄错了），因为`MultiChoiceModeListener`期望检查一个项目才能开始。根据您的布局和 的整体外观，我认为您可以在（不显示内容）`GridView`末尾有一个虚拟项目（作为适配器中的额外项目）并用于启动CAB。当然，你需要有额外的逻辑来处理你的额外项目：`GridView``setItemChecked(dummyItemPosition, true)``GridView``MultiChoiceModeListener`

```
 public void onItemCheckedStateChanged(ActionMode mode, int position,
        long id, boolean checked) {
    if (position == theDummyPosition)
         return; // so we start the CAB but there aren't any items checked
    }
    int selectCount = gridView.getCheckedItemCount();
    if (selectCount > 0) {
        notify = true;              
        dataArray.add(position);
        // if you select another item you'll have two selected items(because of the dummy item) so you need to take care of it 
        switch (selectCount) {
        case 1:
            mode.setSubtitle("One item added to favorites");
            break;
        default:
            mode.setSubtitle("" + selectCount
                    + " items added to favorites");
            break;
        }
    } 

   } 
```

上面的解决方案是一个 hack，很可能会更容易丢失`MultiChoiceModeListener`并简单地启动一个`ActionMode`你可以在这两种情况下操作的。

# jquery - 循环浏览 Jquery 选项卡

> ID：14128560
> 
> 赞同：0
> 
> 时间：2013-01-02T20:17:21.240
> 
> 标签：jquery, html, css

我有下面的代码，我添加了循环 jQuery 组件，但似乎无法循环。不确定我是否需要不同的脚本或代码库。

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>
<script type="text/javascript">
/* <![CDATA[ */
$(document).ready(function(){
$("#tabs li").click(function() {
    //  First remove class "active" from currently active tab
    $("#tabs li").removeClass('active');

    //  Now add class "active" to the selected/clicked tab
    $(this).addClass("active");

    //  Hide all tab content
    $(".tab_content").hide();

    //  Here we get the href value of the selected tab
    var selected_tab = $(this).find("a").attr("href");

    //  Show the selected tab content
    $(selected_tab).fadeIn();

    //  At the end, we add return false so that the click on the link is not executed
    return false;
});
});
/* ]]> */
</script>
<script type="text/javascript" src="http://malsup.github.com/jquery.cycle.all.js"></script>
<script type="text/javascript">
$(function() {
$(' #tabs li').cycle({
    fx:     'fade',
    speed:  'fast',
    timeout: 300,
    //pager:  'a',
    //      slideExpr: 'img'
    });
});
</script> 
```

这是选项卡结构。选项卡目前完美运行，我们只想在格式中添加一个 10 秒的自动循环。

```
 <div id="tabs_content_container">
    <!--- Start Tab One ---> 
            <div id="tab1" class="tab_content" style="display: block;"> 
                <div id="tab1Content" style="font-size: 1em; font-family:" trebuchet="" ms",="" arial,="" helvetica,="" sans-serif;"="">
                <img src="chasers-b.jpg" style="float:left; margin-right:15px;" width="100">
                    <h3>Chasers Revealed!</h3>
                    <p>chasers revealed!<br><br>
                   <a href="#">Click to read more...</a>
                    <br clear="all">
                </br...<></p></div>
             </div>

            <!--- Start Tab Two --->
            <div style="display: none;" id="tab2" class="tab_content">        
                <div id="tab2Content" style="font-size: 1em; font-family:" trebuchet="" ms",="" arial,="" helvetica,="" sans-serif;"="">
               <img src="hot2013-01-01at34901AM.png" style="float:left; margin-right:10px;" width="100"><h3>First Look at Valentine's 2013</h3>
                    <h5>Valentine's Day 2013.<br><br>  </h5>
                    <a href="#">Click to read more...</a>
                    <br clear="all">
                </div>
            </div>

            <!--- Start Tab Three --->
            <div style="display: none;" id="tab3" class="tab_content"> 
                <div id="tab3Content" style="font-size: 1em; font-family:" trebuchet="" ms",="" arial,="" helvetica,="" sans-serif;"="">
                <img src="Sale.jpg" style="float:left; margin-right:15px;" width="100">
                 <h3>What's on Sale?</h3>
                    <h5><div align="center">  </div><br>Content on sale...</h5>
                    <a href="#">Click to read more...</a>
                    <br clear="all">
                </div>
            </div>

</div>
<div id="tabs_container">
    <ul id="tabs"> <li class="active"><a href="#tab1"><img src="chasers-b.jpg" alt="Chasers Revealed!" style="float:left; margin-right:10px;" height="100" width="100"></a></li>
<li><a href="#tab2"> <img src="Screenshot2013-01-01at34901AM.png" alt="First Look at Valentine's 2013" style="float:left; margin-right:15px;" height="100" width="100"></a></li>
        <li class=""><a href="#tab3"> <img src="Sale.jpg" alt="What's on Sale?" style="float:left; margin-right:15px;" height="100" width="100"></a></li>

    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T18:16:45.377

从[循环插件的页面示例](http://jquery.malsup.com/cycle/)中，我看到您需要传递其子元素将循环的元素的 id。在您的情况下，这将是`ul`id，以便`li`孩子们循环。所以试试：

```
$('#tabs').cycle({
   fx:     'fade',
   speed:  'fast',
   timeout: 300
}); 
```

代替`$('#tabs li')`

此外，我会检查 javascript 控制台（Ffox/Chrome 中的 Ctrl+Shift+j）是否有任何可能阻碍其余代码执行的 javascript 错误。

# php - for 循环中的 .POST 的返回顺序与发送顺序不同

> ID：14128569
> 
> 赞同：0
> 
> 时间：2013-01-02T20:17:52.910
> 
> 标签：php, mysql, post

我在 forloop 中做了几个 .post 调用。.post 的返回数据被附加到 div 容器中。正在循环的数据被排序。我希望 post 调用以与我发送它们相同的顺序返回数据。但这种情况并非如此...

```
for(i = 0; i<data.length;i++){
    $.post('test.php',{variables},function(data1){
                $('#wrapper').append(data1);
            });
} 
```

有没有办法让 .post 以相同的顺序返回？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T20:19:11.657

AJAX 是异步的。

如果您希望按顺序调用它们，则必须等待 ajax 调用完成，然后再调用下一个。

* * *

您可以尝试将其放入[队列](http://api.jquery.com/queue/)中：

```
var $q = $({});

for(var i = 0; i < data.length; ++i) {
    $q.queue(function(next){
        $.post('test.php',{variables},function(data1){
            $('#wrapper').append(data1);
            next(); //call next fn
        });
    });
} 
```

# java - 你能定义一个同时具有下限和上限的通用界限吗？

> ID：14128571
> 
> 赞同：11
> 
> 时间：2013-01-02T20:17:57.263
> 
> 标签：java, generics

是否可以定义一个通用界限：

*   实现一个接口`SomeInterface`
*   是某个类的超类`MyClass`

就像是：

```
Collection<? extends SomeInterface & super MyClass> c; // doesn't compile 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T20:29:43.203

根据[spec](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.5.1)，答案是否定的（你可以拥有`super`or `extends`，但不能同时拥有）：

> ```
> 类型参数：
>     < 类型参数列表 >
> 
> 类型参数列表：
>     类型参数
>     类型参数列表，类型参数
> 
> 类型参数：
>     参考类型
>     通配符
> 
> 通配符：
>     ? 通配符边界选择
> 
> 通配符边界：
>     扩展参考类型
>     超级参考类型
> ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T20:29:38.250

`T`声明变量时，您不能将泛型类型（在您的情况下）与边界一起使用。

它应该是通配符 ( `?`)，或者只使用类的完整泛型类型。

例如

```
// Here only extends is allowed
class My< T extends SomeInterface >
{

  // If using T, then no bounds are allowed
  private Collection<T> var1;

  private Collection< ? extends SomeInterface > var2;

  // Cannot have extends and super on the same wildcard declaration
  private Collection< ? super MyClass > var3;

  // You can use T as a bound for wildcard
  private Collection< ? super T > var4;

  private Collection< ? extends T > var5;

} 
```

在某些情况下，您可以通过向类（或方法）添加额外的泛型参数并在该特定参数上添加绑定来收紧声明：

```
class My <
  T extends MyClass< I >,
  I extends SomeInterface 
>
{
} 
```

# java - 弹簧和带选择的表格

> ID：14128572
> 
> 赞同：0
> 
> 时间：2013-01-02T20:17:58.527
> 
> 标签：java, spring, data-binding

我正在使用 Spring 来填充表单中的项目，使用控制器和视图之间传递的对象：

# 领域对象

```
public class Client {
private String name;
private int id;
private Bar bar;
// getters and setters omitted
}

public class Bar {
private Integer id;
private String name;
// getters and setters omitted

} 
```

# 控制器

```
@RequestMapping(method = RequestMethod.GET, value = "/")
public String index(Model m) {
m.addAttribute("Client", new Client());
Bar o1 = new Bar();
o1.setName("n 1");
o1.setId(1);
Bar o2 = new Bar();
o2.setName("n 2");
o2.setId(2);
Bar o3 = new Bar();
o3.setName("n 3");
o3.setId(3);
Bar o4 = new Bar();
o4.setName("n 4");
o4.setId(4);
Bar o5 = new Bar();
o5.setName("n 5");
o5.setId(5);
List<Bar> orders = new ArrayList<Bar>();
orders.add(o1);
orders.add(o2);
orders.add(o3);
orders.add(o4);
orders.add(o5);
m.addAttribute("ordersList", orders);
return "index";
}

@RequestMapping(method = RequestMethod.POST, value = "/")
public String indexPost(@ModelAttribute("Client") Client g, BindingResult r) {
log.info(g.getId() + " " + g.getName());
log.info(g.getBar().getName());
return "index";
} 
```

# 查看 (index.jsp)

```
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@ taglib uri="http://www.springframework.org/tags/form" prefix="form"%>
<html xmlns="http://www.w3.org/1999/xhtml">
<body>
<form:form method="POST" modelAttribute="Client">
<form:label path="name">Name</form:label>
<form:input path="name" />
<form:label path="id">Id</form:label>
<form:input path="id" />
<form:label path="orders">Order</form:label>
<form:select path="bar" items="${ordersList}" />    
<form:button>Insert</form:button>
</form:form>
</body>
</html> 
```

# 问题

当我填写表格并提交时，控制器抛出 NullPointerException`log.info(g.getBar().getName());` 我认为这是因为 getBar() 返回`null`。这个数据绑定我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T20:24:09.957

您正在`Client`为模型设置一个新对象，但该对象是空的。首先尝试创建完整的`Client`对象，然后在`index()`方法中将其设置为模型。

**编辑：** 因此您需要该字段的属性编辑器。调整以下方法并将其添加到您的控制器：

```
@InitBinder
protected void initBinder(WebDataBinder binder) {

    binder.registerCustomEditor(Bar.class, "bar", new PropertyEditorSupport(Bar.class) {
        @Override
        public String getAsText() {
            if(null != getValue()) {
                return ((Bar) getValue()).getId();
            } else {
                return StringUtils.EMPTY;
            }
        }
        @Override
        public void setAsText(String text) {
            if(!StringUtils.isEmpty(text)) {
                setValue(UtilityClassUtils.getBarById(text));
            }
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T20:39:18.323

我认为`form:select`标签没有正确定义。你能试试这个吗？

```
 <form:select path="bar"> 
  <form:options items="${ordersList}" itemValue="id" itemLabel="name" />
 </form:select> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T06:43:10.680

首先，您的表单只会将所选酒吧的 ID 发布回您的服务器端。因此，如果没有额外的工作，Spring 将无法自动填充 Bar 的名称字段。

其次，为了帮助 Spring 将 ID 转换为 Bar 或 Bar 转换为 ID，您需要将 Bar 对象存储在某个地方。您可以将 Bar 保存在缓存、会话、数据库或 HTML Form 的隐藏输入等中。假设我们将 Bar 存储在服务器端，存储的接口定义如下：

```
package com.example;

public interface BarStore {

    Bar getBar(Integer id);

    void putBar(Bar bar);

} 
```

并将您的 Bar 对象存储在您的公共字符串索引（模型 m）方法中，如下所示：

```
...
@Autowired
private BarStore barStore;
...
@RequestMapping(method = RequestMethod.GET, value = "/")
public String index(Model m) {
    ...
    barStore.putBar(o1);
    barStore.putBar(o2);
    barStore.putBar(o3);
    barStore.putBar(o4);
    barStore.putBar(o5);
    ...
} 
```

最后，您可以注册一些转换器来将 Bar 转换为 ID 并将 ID 转换为 Bar。这是一个例子：

```
package com.example;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.beans.factory.annotation.Configurable;
import org.springframework.core.convert.converter.Converter;
import org.springframework.format.FormatterRegistry;
import org.springframework.format.support.FormattingConversionServiceFactoryBean;

@Configurable
public class ApplicationConversionServiceFactoryBean extends FormattingConversionServiceFactoryBean {

    @Autowired
    private BarStore barStore;

    public Converter<Bar, String> getBarToStringConverter() {
        return new Converter<Bar, String>() {
            public String convert(Bar bar) {
                return new StringBuilder().append(bar.getId()).append(' ').append(bar.getName()).toString();
            }
        };
    }

    public Converter<Integer, Bar> getIdToBarConverter() {
        return new Converter<Integer, Bar>() {
            public Bar convert(Integer id) {
                return barStore.getBar(id);
            }
        };
    }

    public Converter<String, Bar> getStringToBarConverter() {
        return new Converter<String, Bar>() {
            public Bar convert(String id) {
                return getObject().convert(getObject().convert(id, Integer.class), Bar.class);
            }
        };
    }

    public void installLabelConverters(FormatterRegistry registry) {
        registry.addConverter(getBarToStringConverter());
        registry.addConverter(getIdToBarConverter());
        registry.addConverter(getStringToBarConverter());
    }

    public void afterPropertiesSet() {
        super.afterPropertiesSet();
        installLabelConverters(getObject());
    }

} 
```

# php - UTC 和 Etc/UTC 时区之间有区别吗？

> ID：14128574
> 
> 赞同：66
> 
> 时间：2013-01-02T20:18:22.817
> 
> 标签：php, datetime, timezone, utc

在 PHP 文档[中，支持的时区列表](http://php.net/manual/en/timezones.others.php)列出`UTC`了两次：

*   `UTC`
*   `Etc/UTC`

这两者之间有什么概念上的区别，还是它们只是同义词？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2016-01-27T07:42:45.440

首先，回答这个问题：和时区
之间没有区别。`UTC``Etc/UTC`

`Etc/UTC`是 Olson-timezone-database ( [tz 数据库](https://en.wikipedia.org/wiki/Tz_database)) 中的一个时区，也称为[IANA-timezones-database](https://www.iana.org/time-zones)，其中所有时区都符合统一的命名约定：`Area/Location`.

由于某些时区不能归属于世界上的任何区域（即大陆或海洋），因此引入了特殊区域`Etc`（[Etcetera](https://www.ietf.org/timezones/data/etcetera)）。这主要适用于行政时区，例如`UTC`.
因此，为了符合命名约定，通用协调时间（区域）`Etc/UTC`在 tz 数据库中命名。

对于 UTC 以外的管理时区（例如`GMT+4`, `GMT-8`），tz 数据库在区域名称中使用[POSIX 样式的符号。](http://www.ibm.com/developerworks/aix/library/au-aix-posix/index.html#10.UnderstandthePOSIXformat%7Coutline)POSIX 对格林威治后面（格林威治以西）的区域有积极迹象，对格林威治之前（格林威治以东）的地区有负面迹象。

[时区中的 POSIX 样式标志与当今广泛使用且最常用的ISO 8601](https://en.wikipedia.org/wiki/ISO_8601#Time_offsets_from_UTC)中的时区定义相反。在 ISO 8601 时区格式中，负号表示区域在 UTC（格林威治以西）之后，正号表示区域在 UTC（格林威治以东）之前。这已成为当今的标准用法。

POSIX 中相反定义的可能原因是：

*   POSIX 是 UNIX 的一部分，它是在美国开发的，它落后于 UTC（格林威治西部）。POSIX 格式允许将美国时区表示为 EST5、PST8，即省略 (+) 号。
*   通常，计算机程序和操作系统在内部以 UTC 时间做所有事情。使用 POSIX 样式的标志，您可以添加时间和时区以获得 UTC 时间。示例：“03:30 PST8”或“03:30 GMT+8”表示它是“11:30 UTC”。

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2013-03-20T11:14:32.020

`Etc/UTC`是显示名称为 的时区`UTC`。也就是说，根据[IANA 的时区数据库](ftp://ftp.iana.org/tz/data/etcetera)，它们是同一时区的长名称和短名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-03T13:12:43.590

ETC/GMT+4 与 GMT-4 相同。

```
public static void main(String[] args) {
    TimeZone tz = TimeZone.getTimeZone("Etc/GMT-7");
    System.out.println(tz);

    tz = TimeZone.getTimeZone("GMT+7");
    System.out.println(tz);

} 
```

你可以自己测试一下。

但是我不知道ETC是什么意思..

# excel - 选择范围时对象'_Global'的方法'范围'失败错误VBA

> ID：14128578
> 
> 赞同：0
> 
> 时间：2013-01-02T20:18:54.180
> 
> 标签：excel, vba

所以我使用这个宏来只提取我需要执行回归的数据，并且样本集包含相当多的无用信息以满足我的需求。当我尝试从 CCDetail 工作簿中选择列时，我收到“对象 '_Global' 失败的'范围'”错误。关于为什么会这样的任何想法？

```
Sub ExtractCCDetail()

Dim WorkbookName As String
Dim CCDetail As Workbook
Dim Harvester As Workbook
Dim RAWData As Worksheet
Set CCDetail = Workbooks(2)
Set Harvester = ThisWorkbook

WorkbookName = CCDetail.Name
CCDetail.Activate
Set RAWData = Worksheets("Department Totals")
RAWData.Select
    'This is where the code will break
    Range( _
        "D:D,E:E,F:F,M:M,X:X,Y:Y,Z:Z,AA:AA,AC:AC,AD:AD,AE:AE,AF:AF,BD:BD,BF:BF," _
        ).Select
        Selection.Copy
    Harvester.Activate
    Sheets.Add After:=Sheets(Worksheets.Count), Count:=1
    ActiveSheet.Name = WorkbookName
    ActiveSheet.Paste
End Sub 
```

*作为旁注 - 我已经手动测试过，我没有问题。我也试过打电话

`ActiveSheet.Range (wanted Range)`

`RAWData.Range (wanted range)`

但这些都没有奏效。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T20:23:45.050

问题是您的 Range 参数中有一个额外的逗号。试试这个：

```
Range("D:D,E:E,F:F,M:M,X:X,Y:Y,Z:Z,AA:AA,AC:AC,AD:AD,AE:AE,AF:AF,BD:BD,BF:BF").Copy 
```

如果您想稍微清理一下代码并避免`Selects`此类情况，请尝试以下操作：

```
Sub ExtractCCDetail()

Dim WorkbookName As String
Dim CCDetail As Workbook
Dim Harvester As Workbook
Dim RAWData As Worksheet

Set CCDetail = Workbooks(2)
Set Harvester = ThisWorkbook

WorkbookName = CCDetail.Name

Set RAWData = CCDetail.Worksheets("Department Totals")

RAWData.Range("D:D,E:E,F:F,M:M,X:X,Y:Y,Z:Z,AA:AA,AC:AC,AD:AD,AE:AE,AF:AF,BD:BD,BF:BF").Copy

Dim wksCopy As Worksheet
Set wksCopy = Harvester.Sheets.Add(After:=Sheets(Worksheets.Count), Count:=1)

With wksCopy
    .Paste
    .Name = WorkbookName
End With

End Sub 
```

# iphone - 使用应用程序 MapView ios 6 使用当前位置显示前往目的地的路线

> ID：14128582
> 
> 赞同：0
> 
> 时间：2013-01-02T20:19:33.527
> 
> 标签：iphone, xcode4.5, ios6-maps

我正在尝试使用应用内的 MapView 查找如何提供到某个位置的路线。我希望我的应用程序拉取用户当前位置（我已经完成），然后我希望 MapView 使用该信息来提供到某个目的地的转弯方向。这甚至可以使用 iOS SDK 6.0 和 xcode 4.5 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T06:06:10.903

你可以使用`Google` `Directional`Map `api`.simply 实现

```
CLLocationCoordinate2D coordinate = CLLocationCoordinate2DMake([_iLat doubleValue],[_iLong    doubleValue]);

 MKPlacemark* placeMark = [[MKPlacemark alloc] initWithCoordinate:coordinate  addressDictionary:nil];
 MKMapItem *destination =  [[MKMapItem alloc] initWithPlacemark:placeMark];

 if([destination respondsToSelector:@selector(openInMapsWithLaunchOptions:)])
{
    //using iOS6 native maps app
    [destination openInMapsWithLaunchOptions:@{MKLaunchOptionsDirectionsModeKey:MKLaunchOptionsDirectionsModeDriving}];

} 
```

# facebook - 我可以通过 OpenGraph API 创建 Facebook 生活事件吗？

> ID：14128583
> 
> 赞同：1
> 
> 时间：2013-01-02T20:19:34.587
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph

是否可以通过 Open Graph API 创建 Facebook 生活事件？是吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T22:52:44.083

不，这是不可能的。如果它不在路线图中并且不在文档中（文档现在应该反映对 API 的最新更改，它是动态更新的），那么它不可用。

# cordova - Sencha Touch 2：使用cordova显示简单警报消息时出错

> ID：14128584
> 
> 赞同：0
> 
> 时间：2013-01-02T20:19:39.157
> 
> 标签：cordova, sencha-touch, sencha-touch-2, cordova-2.0.0

**背景**：我使用 sencha 2.1 开发了一个 SenchaTouch 应用程序。现在我正在尝试使用cordova 2.2.0 js 显示一个简单的警报消息。

**我的基本疑问是“我可以在 google chrome 上使用 'navigator.notification.alert' 显示警报框，还是必须在模拟器上运行它才能看到警报框**？”

我已按照以下步骤操作。

*   在我的工作区中包含了cordova 2.2.0 js，并从 index.html 中引用了它。我可以在 Google Chrome 的网络选项卡中看到加载的文件。

*   下面是我的代码，它只是在单击按钮时显示本机警报框。

    ```
    alertDismissed : function() {
        console.log('This function is called');
    }

    onLoginNoteCommand: function () {

        console.log('onLoginNoteCommand');

        navigator.notification.alert(
            'Please Select a Car',  // message
             this.alertDismissed,         // callback
             ' '            // title
         );
    } 
    ```

**错误发生**

我收到“ `Uncaught TypeError: Cannot call method 'alert' of undefined`”错误。

任何想法我在哪里做错了？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T19:43:39.313

当我将我的代码与 PhoneGap 集成并在设备上运行时，我能够看到本机警报框。因此，我对上述解决方案的发现是，在将导航器对象与 PhoneGap 集成后，您只能在设备上使用导航器对象，而不能在浏览器上使用。

谢谢

# c# - wcf配置问题

> ID：14128585
> 
> 赞同：1
> 
> 时间：2013-01-02T20:19:42.147
> 
> 标签：c#, asp.net, wcf

我还是 WCF 的新手，并且对为什么在 WCF 中需要某些部分（如果需要）有一些疑问：

1) 我有一个使用 WCF 服务与数据库通信的应用程序。我在本地机器上设置了一个测试 SSL 证书，并将 WCF 服务的 web.config 设置为：

```
 <wsHttpBinding>
    <binding name="MyService" maxReceivedMessageSize="2147483647">
      <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647"
        maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
      <security mode="TransportWithMessageCredential">
        <transport clientCredentialType="Windows" />
        <message clientCredentialType="UserName"/>
      </security>
    </binding>
  </wsHttpBinding> 
```

因为我有 SSL 设置，我读过我必须有传输安全性，通过将 clientCredentialType 设置为 Windows 有什么作用？SSL 不是负责来回传递数据的安全性吗？我得到的消息，因为我设置了一个自定义类来验证用户。我只是不明白为什么我需要它来传输，如果我不需要它，当它设置到 Windows 时它会做什么，这是否意味着公司网络内的所有消息都很好，但如果该网络之外的任何消息试图与它被阻止的服务交谈？

2) 对于本节：

```
<serviceMetadata httpGetEnabled="false" httpsGetEnabled="true" /> 
```

当我去生产时，两者都应该设置为错误正确吗？因此，任何其他尝试设置对生产 url 的服务引用的应用程序都将被阻止，或者无法构建代理类？

3) includeExceptionDetailInFaults，我应该始终将其保留为假吗？目前，当 WCF 服务中发生错误时，我让代码抛出一个新的 FaultException，然后传播到 Web 应用程序中的方法，该方法正在向我发送包含错误消息的电子邮件，用户只会收到一般错误页。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T20:27:06.033

1.如果你在内部使用你的服务，那么你可以使用这个配置，但是客户端和服务器都应该在同一个域上。Windows 凭据是必需的，因为某些证书放置在 Windows 的用户级证书存储中，要对其进行身份验证，您需要提供用户凭据。

2.如果您不希望任何人创建代理，请继续。

```
<serviceMetadata httpGetEnabled="false" httpsGetEnabled="true" /> 
```

Indicates, that the user can see the WSDL metadata only on https connection and not on http. So if some needs to create proxy, they have to use the https url of your service.

3.Depends on your requirement, If you don't want your user to see the error details. then it's OK. This is required only for debugging. So you are right.

[More details on Transport Security](http://msdn.microsoft.com/en-us/library/ms729700.aspx)

```
<security mode="Transport">
    <transport clientCredentialType="Windows" />
</security> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T20:33:12.743

Much useful info here: [http://msdn.microsoft.com/en-us/library/aa354508.aspx](http://msdn.microsoft.com/en-us/library/aa354508.aspx)

and here: [http://msdn.microsoft.com/en-us/library/ms789011.aspx](http://msdn.microsoft.com/en-us/library/ms789011.aspx)

1) Transport Security is just handling the Network-level security; when you specify Message+Transport, you're saying you want the message itself to require authentication as well; just having a valid SSL config isn't enough. ClientCredential Windows, means to attempt to use the effective windows credential of the running process.

> By default, the wsHttpBinding binding provides HTTP communication. When configured for transport security, the binding supports HTTPS communication. HTTPS provides confidentiality and integrity protection for the messages that are transmitted over the wire. However the set of authentication mechanisms that can be used to authenticate the client to the service is limited to what the HTTPS transport supports. Windows Communication Foundation (WCF) offers a TransportWithMessageCredential security mode that is designed to overcome this limitation. When this security mode is configured, the transport security is used to provide confidentiality and integrity for the transmitted messages and to perform the service authentication. However, the client authentication is performed by putting the client credential directly in the message. This allows you to use any credential type that is supported by the message security mode for the client authentication while keeping the performance benefit of transport security mode.

2) Whether or not you allow HTTP "GET" operations is entirely up to you and your security preferences; it does obscure your service a bit, but makes it less easy to use.

3) Whether you include exception details in your response depends largely on how much you trust the consumers of your service. When consumers have the exception they'll be better able to react to their own mistakes, but also have more information about your service's implementation.

# php - 我有 2 个 php 文件，我想将一个变量从一个传递到另一个

> ID：14128592
> 
> 赞同：0
> 
> 时间：2013-01-02T20:20:25.723
> 
> 标签：php, mysql

我看到有一个问题：[PHP Pass variable to next page](https://stackoverflow.com/questions/871858/php-pass-variable-to-next-page)

但这对我不起作用。

例如，我想将 $variable 解析为另一个 php 文件，并且它必须位于 href 属性中。

我有一个“while”，当用户单击链接时，我必须将当前值存储在一个变量中以将其解析到另一个文件。

我已经尝试过使用会话变量，但就我而言，我有一个包含很多行的查询，并且我有一个放置数据的变量。因此，对于每一行，用户都会看到一个链接。当他点击时，我必须将变量解析为另一个 php 文件。

以防万一，我把代码留在这里

```
 <div class="container">
  <!-- Obtengo datos -->
    <?php 
  $conexion=mysql_connect('localhost','root','root') or die('No hay conexión a la base de datos');
    $db=mysql_select_db('carpe',$conexion)or die('no existe la base de datos.');

    $id= $_SESSION['id'];

$consulta=mysql_query("select * from(select * from messages m where 1> (select count(*) from messages m1 where m.id<m1.id and m.idm=m1.idm))c
    where id_from='".$id."' or id_to='".$id."'");
    while($filas=mysql_fetch_array($consulta)){
        $idm=$filas['idm'];
        $id=$filas['id'];
        $id_to=$filas['id_to'];
        $id_from=$filas['id_from'];
        $status=$filas['status'];
        $text=$filas['text'];
        $time=$filas['time'];

    $consulta2=mysql_query("select * from users where id='".$id_from."'");
    while($filas2=mysql_fetch_array($consulta2)){
        $Nombre_enviador=$filas2['username'];
    }

    $consulta3=mysql_query("select * from users where id='".$id_to."'");
    while($filas3=mysql_fetch_array($consulta3)){
        $Nombre_receptor=$filas3['username'];
    }

    $username= $_SESSION['username'];   

    $_SESSION['idm'] = $idm;
    echo "mensaje id: ".$idm;   

    ?>
            <div class="maincontent">
            <h3><a href="#">Asunto: <?php echo $idm?></a></h3>
            <span class="postInfo">Enviado por: 
            <?php
            if($Nombre_enviador==$username){
                ?> <a href="#">Ti</a>
            <?php
            }else{
            ?><a href="#"><?php echo $Nombre_enviador ?></a>
            <?php } ?>
             A 
             <?php
             if($Nombre_receptor==$username){
                ?> <a href="#">Ti</a>
                <?php
            }else{
            ?><a href="#"><?php echo $Nombre_receptor ?></a>
            <?php } ?>               
              - <?php echo $time ?></span>
            <p><?php echo $text ?></p>

            <a class="more" href="conversacion.php?a=register">Responder</a>

            <?php
             if(isset($_GET['a']) /*you can validate the link here*/){
                $_SESSION['link']=$_GET['a'];
            }
            ?>

            <hr>
            <?php } ?>
            <hr>
        </div> 
```

希望您能理解，万分感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T20:33:05.973

根据您的代码和您的问题，我不能 100% 确定您要做什么，但我确实注意到的一件似乎是一个很好的 segway：

```
<a class="more" href="conversacion.php?a=register">Responder</a>

<?php
if(isset($_GET['a']) /*you can validate the link here*/){
    $_SESSION['link']=$_GET['a'];
}
?> 
```

上面的代码创建了一个超链接，其目的地为`conversacion.php`. 此外，您的链接还提供了一条附加信息，在这种情况下，它是一个标`a`有 值的变量`register`。您在该链接下方的 PHP 代码尝试检查您是否提供了一个 GET 方法变量，该变量基于您的链接，这将是变量`a`。Using`$_GET`将尝试访问已通过 GET 方法传递给当前 URL 的任何变量，在这种情况下，就像附加查询字符串一样简单。

我不希望这个答案能完全解决您的问题，因为坦率地说，我不太确定问题是什么，因为您提供的代码应该能够处理您的请求（至少是适当应用的技术方面）。希望以上上下文应该有所帮助。

# elasticsearch - django-haystack 中带有 more_like_this 的弹性搜索异常

> ID：14128593
> 
> 赞同：2
> 
> 时间：2013-01-02T20:20:49.723
> 
> 标签：elasticsearch, django-haystack

我在使用 elasticsearch 配置 django-haystack 的 more_like_this 函数时遇到问题 - 出于某种原因，它在控制台中返回了一些奇怪的错误。这是python中的代码：

```
from haystack.query import SearchQuerySet
sqs= SearchQuerySet().filter(django_ct__exact='myapp.mymodel')
similar_items= sqs.more_like_this(myapp.mymodel.object) 
```

这实际上返回了所有模型的结果，尽管过滤（这是一个肮脏的把戏，我知道，对不起）

另外日志中有一条消息：

```
Failed to fetch More Like This from Elasticsearch for document 'myapp.mymodel.21': Non-OK response returned (500):
u'SearchPhaseExecutionException [
Failed to execute phase [query],
total failure;
shardFailures {
[GKAIomI1QXedjKQOh5dcbw][haystack][0]: RemoteTransportException[[Amina Synge] [inet[/192.168.1.100:9302]][search/phase/query]];
nested: SearchParseException [[haystack][0]: from[20],
 size[-1]: Parse Failure [
     Failed to parse source [
         {"from":20,
          "size":-10,
          "query":{
              "bool":{
                  "must_not":{"term":{"_uid":"modelresult#myapp.mymodel.21"}},
                  "should":[{"mlt_field":{"django_id":{"like_text":"21"}}},
                            {"mlt_field":{"text":{"like_text":"<mymodel.textfield content>"}}},
                            {"mlt_field":{"user":{"like_text":"<mymodel.instance.username>"}}},
                            {"mlt_field":{"mymodel.instance_id":{"like_text":"21"}}},
                            {"mlt_field":{"id":{"like_text":"myapp.mymodel.21"}}}]}}}]]];
nested: SearchParseException[[haystack][0]: from[20],size[-1]: Parse Failure [size is set to [-10] and is expected to be higher or equal to 0]]; } 
```

我是弹性搜索的新手，所以，我真的不明白这个异常意味着什么，以及如何改变`size`。根本无法在手册中找到它。按短语搜索完美无缺，只会`more_like_this`产生此错误。

任何帮助，任何提示都非常感谢，对可能蹩脚的问题感到抱歉

# algorithm - 通过利用机器词计算 DAG 上的传递闭包的算法？

> ID：14128595
> 
> 赞同：3
> 
> 时间：2013-01-02T20:21:06.573
> 
> 标签：algorithm, matrix, graph-theory, transitive-closure

设 G 为 DAG，n 个顶点和 m 个边由邻接矩阵给出。我还需要以矩阵的形式计算它的闭包。我们有一台计算机，每个单词都是 b 位。我需要找到一种算法来计算传递闭包`(n^2+nm/b)`

我不太确定我理解什么`bits`意思以及如何使用它

添加寻找 dag 的传递闭包的算法：

```
TransitiveForDAG (Graph G)
int T[1...n,1...n] ={0,...,0}
List L <- TopologicalSort(G)
For each v in reverse(L)
   T[v,v]<-1
    For each u in Adj[v]
       for j<-1,...,n do
         T[v,j]<-T[v,j] or T[u,j] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T11:37:46.250

你说你不知道*位*是什么意思，所以让我们从那个开始。

*   **位**是数字信息的最小单位 - 0 或 1
*   **字**是计算机一次处理的数据单位。处理器不会占用和处理单个位，而是其中的一小部分。当今大多数计算机体系结构都使用 32 位或 64 位字。

现在，如何处理二进制数据的单词？在大多数编程语言中，您将使用数值数据类型来存储数据。为了操作它们，大多数语言都提供[按位运算符](http://en.wikipedia.org/wiki/Bitwise_operation)——这里需要按位*或*( )。`|`

那么，如何让你的算法更快呢？查看 T 矩阵。它只能有 0 或 1 的值——一个比特就足以存储该信息。您正在一一处理矩阵的字段；每次处理算法的最后一行时，您只使用第 v 行的一位和第 u 行的一位。

如前所述，处理器必须读取整个字才能读取和处理这些位中的每一个。那是无效的；大多数情况下你不会关心这样的细节，但这里它处于一个关键的地方——最后一行在最里面的循环中，将被执行很多次。

现在，如何更有效？更改存储数据的方式 - 使用具有单词长度的类型作为矩阵的数据类型。将原始矩阵中的 b 值存储在新矩阵的每个值中 - 这称为打包。由于您的算法的工作方式，您需要按行存储它们 - 第*i*行中的第一个值将包含原始矩阵第*i行中的第一个**b*值。

 *除此之外，您只需要更改算法的最内层循环 - 该循环将迭代单词而不是单个字段，并且在内部您将使用按位*或一次处理整个单词*

```
T[v,j]<-T[v,j] | T[u,j] 
```

循环是产生算法时间复杂度的原因。您现在已经设法减少了 b 次迭代，因此复杂性变为`(n^2+nm/b)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T21:42:21.997

对于一个简单的图，邻接矩阵中的每个条目要么是 0，要么是 1，并且可以用一位来表示。`b`这允许通过将条目打包到每个计算机字中来紧凑地表示矩阵。接下来的挑战是使用正确的位操作运算符来实现矩阵乘法（计算闭包）。*

# php - Joomla 在 mySQL 调用中使用 DISTINCT

> ID：14128596
> 
> 赞同：1
> 
> 时间：2013-01-02T20:21:12.307
> 
> 标签：php, mysql, joomla

我正在尝试使用 DISTINCT 从我的数据库中的列中获取城市列表。

```
function cityData() {
    $db =& JFactory::getDBO();
    $query = "SELECT DISTINCT MSTCITY FROM " . $db->nameQuote('#__mls') . " ORDER BY MSTCITY;";
    $db->setQuery($query);
    $tbl = $db->loadObjectList();
    return $tbl;
} 
```

有类似的东西`loadObjectList()`我可以使用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T20:30:21.703

有几个选项可用于使用数据库对象获取数据。您可以查看此链接 - [http://docs.joomla.org/Accessing_the_database_using_JDatabase/1.5](http://docs.joomla.org/Accessing_the_database_using_JDatabase/1.5)

在您的情况下，您可以使用`loadResultArray()`它来代替。`loadObjectList`它将城市列表作为数组的值返回。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-30T17:18:05.150

这是 2.5 和 3.x 版的修订版 joomla 资源页面 [使用 JDatabase 选择数据](https://docs.joomla.org/Selecting_data_using_JDatabase)。另外，由于您已经在使用*loadObjectList()*函数，因此最好将这个问题问为

> 如何一起使用 DISTINCT 和 JDatabase

[这篇文章由](http://forum.joomla.org/viewtopic.php?t=783135)*Janga_Jack*提供了一个很好的解决方案，但对于您的示例，这里有一个 Joomla 3.x 方法来完成您需要的，它允许您使用方便的方法`quote()`or `q()`，`quoteName()`or `qn()`，尤其是`escape()`or `e()`。

```
function cityData() {
    $db =& JFactory::getDBO();
    $query = $db->getQuery(true);

    $fieldlist = $db->qn(array('mls.MSTCITY')); // add the field names to an array
    $fieldlist[0] = 'distinct ' . $fieldlist[0]; //prepend the distinct keyword to the first field name  

    $query->select($fieldlist);
        ->from($db->qn('#__mls', 'mls'))
        ->order($db->qn('mls.MSTCITY'));

    $db->setQuery($query);
    $tbl = $db->loadObjectList();
    return $tbl;
} 
```

# asp.net - 更新 Sitecore Fieldrender Control 的值

> ID：14128597
> 
> 赞同：2
> 
> 时间：2013-01-02T20:21:18.383
> 
> 标签：asp.net, sitecore, sitecore6, page-editor

我在网页上有一个 Sitecore FieldRender 控件，该控件仅在用户处于页面编辑器模式时显示。此 FieldRender 控件显示 CheckList 内容项的“原始值”。（它显示了在 CheckList 中检查的 ID 的管道分隔列表。）

当用户处于页面编辑器的编辑模式时，我能否以编程方式更新（添加/删除 URI 值）显示在 FieldRender 中？我不想自动写入数据库，因为用户总是可以选择单击关闭按钮而不保存他们的更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T22:58:21.963

在我看来，这是一个使用编辑框的完美场所：

[http://briancaos.wordpress.com/2011/11/28/using-sitecore-editframe-in-pageedit/](http://briancaos.wordpress.com/2011/11/28/using-sitecore-editframe-in-pageedit/)

# backbone.js - 无法在 Backbone.js 应用程序中关闭 websocket

> ID：14128600
> 
> 赞同：3
> 
> 时间：2013-01-02T20:21:23.887
> 
> 标签：backbone.js, websocket

我正在构建一个 Backbone 应用程序，其中 Flask/Python 服务器通过 websocket 将纬度和经度数据发送到前端。然后将使用 D3 实时绘制每个位置。我想要一个启动和停止按钮来打开和关闭 websocket。我不知道如何让 websocket 关闭。我已经检查过停止按钮实际上是在触发 locMap.model.stream.socket.close();。我对 Backbone 很陌生，也不确定我为启动和停止应用程序而编写的 jQuery 应该去哪里。这是我的代码（删除了一些不相关的 D3 代码）：

```
// Initialize the websocket and wrap it in a Backbone Event
LocationStream = function () {
    this.addr = "ws://" + document.domain + ":5000/websocket";
    _.extend(this, Backbone.Events);
    var self = this;

    self.socket = new WebSocket(this.addr);
    console.log("Using a standard websocket");

    self.socket.onopen = function(e) {
        self.trigger('open',e);
        console.log('socket opened');
    };

    self.socket.onerror = function (e) {
         self.trigger('error', e);
    };

    self.socket.onmessage = function (e) {
        self.trigger('message', e);
        self.trigger('data', e.data);
        self.trigger('point', JSON.parse(e.data))
    };

    self.socket.onclose = function (e) {
        self.trigger('close', e);
        console.log("socket closed");
    };
    self.socket.onerror = function (e) {
        self.trigger('error', e);
    };
 };

// Models

// Create a Backbone model to keep track of streaming location data
LocationSequence = Backbone.Model.extend({
    initialize: function (opts) {
        this.stream = opts.stream;
        var self = this;
        this.stream.on('point', function (pt) {
            var points = self.get('points');
            var updated = (new Date()).getTime();
            var coordinates = projection([pt.long, pt.lat]);
            points.push([updated, coordinates]);
            self.set({points: points, last_update: updated});
        });
     },
            defaults: {
                points: []
            }
     });

// Views

// Add a #locations 'g' element to the SVG containing the map of the US
// location points will be appended to this element
var LocationMap = Backbone.View.extend({
         initialize: function () {
         d3_map.append("svg:g")
             .attr("id", "locations");
         this.model.on('change', this.render, this);
     },
         render: function () {
         var locations = d3_map.select("#locations").selectAll('circle')
             .data(this.model.get('points'),
                 function (d) { return d[0]; });
         locations.enter()
            .append("svg:circle")
             .attr("id", "circle")
             .attr("cy", function(d) { return d[1][1]; })
             .attr("cx", function(d) { return d[1][0]; })
             .attr("r", 4.5);
     },
 });

 $("#start").click(function () {
     var locStream = new LocationStream();
     var locations = new LocationSequence({stream: locStream});
     var locMap = new LocationMap({model: locations});
     console.log("start triggered");

     $("#stop").click(function () {
         locMap.model.stream.socket.close();
     });
 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-31T21:42:28.753

我是密集还是不会这样做：

locStream.socket.close();

对不起，我刚看到这个，想知道你是否得到了答案。我什至没有排名可以评论，所以我不得不做出这个“答案”。

让我们知道你是否解决了它！

# android - 不明白为什么新的android项目会自动出现语法错误？

> ID：14128607
> 
> 赞同：0
> 
> 时间：2013-01-02T20:22:31.433
> 
> 标签：android

当我创建一个新的 android 项目时（按照以下步骤操作：http: [//developer.android.com/training/basics/firstapp/creating-project.html](http://developer.android.com/training/basics/firstapp/creating-project.html)）我会自动收到语法错误，但我不明白。我附上了问题的照片。请帮忙。我下载了我需要的所有内容，并且在旧版本中，一切正常。

![http://imgur.com/istF4 <-- 我的显示器上显示的照片](../Images/cb8b334eb4cfd71c8463343431809f98.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T20:24:04.887

你导入错了`R`。你应该做

```
import com.chatnexttofriends.R; 
```

代替

```
import com.android.R; 
```

如果您在创建自动生成的文件之前使用了“*组织导入*”选项，或者因为您的资源中有错误阻止创建自动生成的文件，则可能会发生这种情况。

如果您打算使用两个`R`s 中的资源，那么您将必须*完全限定*其中一个。我建议*对 Android 的 R*进行排位赛。*即*：

```
setContentView(android.R.layout.activity_list_item); 
```

尽管我怀疑您是否要将您的内容设置为`Activity`表示`Activity`a 中的项目的内容`ListView`。

# c++ - 我需要什么类型的数据结构来链接到多个参数

> ID：14128611
> 
> 赞同：1
> 
> 时间：2013-01-02T20:23:04.433
> 
> 标签：c++, class, data-structures, map

例如我有一堂课

```
Class foo {
    key  &KEY;
    element 1 v1;
    element 2 v2;
    element 3 v3;
}; 
```

我想使用 Key 对类的迭代器进行排序/遍历，并从 1-3 中检索 Class 元素。最好的方法是什么？我可以使用类似的东西吗

```
multimap <int, unsigned, string, unsigned>;
multimap < Key, element 1, element 2, element 3> m; 
```

或者类似的东西来实现上面提到的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T20:30:35.340

只需将您的`foo`实例存储在 a `set`or`multiset`与仅通过键进行比较的比较运算符中。然后您可以正常迭代以使它们按排序顺序排列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T20:29:36.817

当您希望映射中的一个键指向多个值，所有值都属于同一类型时，可以使用 Multimap。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T20:38:20.127

这是一个想法：

```
struct Foo_Values
{
  element1 e1;
  element2 e2;
  element3 e3;
};

struct Foo
  : public Foo_Values
{
  key Key;
};

typedef std::map<key, Foo_Values> Map_Type; 
```

要插入地图：

```
Map_Type my_map;
key some_key;
//...
Foo_Values v;
key k = some_key.Key;
v = static_cast<Foo_Values>(k); // Copy the elements.
my_map[k] = v; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T20:38:45.987

您可以使用 multiset 而不是 multimap，因为 key 是您的课程的一部分：

```
class foo {
    friend bool operator < (const foo & l, const foo & r) 
    {
       return l.KEY < r.KEY;
    }

    key  &KEY;
    element 1 v1;
    element 2 v2;
    element 3 v3;
};

multiset<foo> MySet;

// Assigning values to MySet . . .

// Traversing the elements in the set:
multiset<foo>::iterator  it = MySet.begin();
for(;it != MySet.end() ; it++) {
    cout<< "element 1 = "<<it->v1<< ", element 2 = "<<it->v2<<", element 3 = "<<it->v3<<endl;
} 
```

# javascript - 使用 onClick 按钮事件在 IE 中未关闭灯箱

> ID：14128614
> 
> 赞同：1
> 
> 时间：2013-01-02T20:23:06.637
> 
> 标签：javascript, jquery, lightbox

使用 Leandro Vieira Pinho 的 Lightbox v 0.5 代码。有一个部分设置用于关闭灯箱的点击事件。此代码在 Chrome 和 Firefox 中运行良好。但是当在 IE 中使用时，按钮什么都不做。请参阅此处的相关代码。

```
<script type="text/javascript">

//****MISC UNRELATED CODE****//
            // Assigning click events in elements to close overlay
            $('#jquery-overlayFinancial,#jquery-lightboxFinancial').click(function () {
                _finish();
            });

        function _finish() {
            $('#jquery-lightboxFinancial').remove();
            $('#jquery-overlayFinancial').fadeOut(function () { $('#jquery-overlayFinancial').remove(); });
            // Show some elements to avoid conflict with overlay in IE. These elements appear above the overlay.
            $('embed, object, select').css({ 'visibility': 'visible' });
}

function closelightboxFinancial() {
    $('#jquery-overlayFinancial').click();
}
//****MISC UNRELATED CODE****//
</script> 
```

关闭另一个页面上的按钮代码：

```
 <script type="text/javascript">

    function CloseMyPlan() {
        try {
            parent.closelightboxFinancial();
        }
        catch (err) {

            txt = "There was an error on this page.\n\n";
            txt += "Error description: " + err.description + "\n\n";
            txt += "Click OK to continue.\n\n";

        }
    }

</script> 
```

表单控制页面上的关闭按钮 IMG 标签：

```
<img alt="Close" style="cursor: pointer" src="<%=_imageServerPath%>images/close_btn.jpg"
        onclick="javascript:CloseMyPlan();" /> 
```

# visual-studio-2012 - 每个项目的 TargetPlatformVersion 在哪里？

> ID：14128618
> 
> 赞同：1
> 
> 时间：2013-01-02T20:23:21.067
> 
> 标签：visual-studio-2012, windows-phone, windows-phone-8

我有一个带有 Windows Phone 8 C# 项目和 Windows Phone 8 C++ 库的 Visual Studio 2012 解决方案。我已将其移至另一台计算机。现在，当我尝试打开解决方案时，库项目无法加载并在控制台中显示以下消息：

```
MyLib.vcxproj : error  : Unable to read the project file "MyLib.vcxproj".  
MyLib.vcxproj(620,3): The imported project "C:\Program Files (x86)\MSBuild\Microsoft\WindowsPhone\v7.0\Microsoft.Cpp.WindowsPhone.7.0.targets" was not found. Confirm that the path in the <Import> declaration is correct, and that the file exists on disk. 
```

当我查看项目文件时，我在第 620 行找到以下内容：

```
<Import Project="$(MSBuildExtensionsPath)\Microsoft\WindowsPhone\v$(TargetPlatformVersion)\Microsoft.Cpp.WindowsPhone.$(TargetPlatformVersion).targets" /> 
```

所以看起来环境变量的值在`TargetPlatformVersion`某种程度上是关闭的。

然后我在这台机器上创建了另一个解决方案，也是 C#/C++ 组合。那个打开并编译并运行，不正确。查看新创建的库中的项目文件，它`<Import>`的末尾有一条相同的行。

现在，解决方案复制可能并不完美。我没有复制所有文件 - 只是我认为相关的文件 - .sln、.vcxproj.，但不是 .sdf 和 .suo。

似乎缺少某些内容 -`TargetPlatformVersion`未复制在解决方案或项目级别定义值的文件，现在 Visual Studio 选择了错误的默认值。不用说，WP7.0和它无关，都是WP8。

知道这个设置可以放在哪里吗？在项目和解决方案中都没有提到 TargetPlatformVersion。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T15:30:16.820

在几次重新打开和其他无意义的操作后，它自行消失了。好可怕的东西。不知道为什么。SVN 不会检测到项目文件的任何更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T21:57:28.700

我也遇到了这个问题，解决方法是在电脑上安装最新的Windows Phone SDK（此时SDK V8.0）（显然它有以前的版本或根本没有安装）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-26T01:47:04.637

```
第 1 步：将 .vcxproj 文件中每次出现的 $(MSBuildExtensionsPath) 替换为 8.0
步骤 2：重新启动 Visual Studio

->然后您将收到错误“找不到 v120 (Platform Toolset = 'v120') 的构建工具”

要解决这个问题：
如果您使用的是 Visual 2012，请右键单击项目名称 -> 属性 -> 配置属性 -> 常规 -> 平台工具集 -> Visual Studio 2012 (v110) 或 wp-v110

你会很高兴去的！

注意：如果需要，您可以在项目文件中将更改从 8.0 恢复为 $(MSBuildExtensionsPath)。（错误原因是在vs2013中打开vs2012项目或其依赖项时）

```

# objective-c - 在 iPhone 上可用？

> ID：14128619
> 
> 赞同：1
> 
> 时间：2013-01-02T20:23:25.143
> 
> 标签：objective-c, ios, security

我正在尝试在运行时访问应用程序的代码设计信息。我知道可以使用 SecRequirementRef.h 在 Mac 上访问该信息，这里甚至还有一个[类别](http://oleb.net/blog/2012/02/checking-code-signing-and-sandboxing-status-in-code/)。

我正在 iPhone 上寻找类似的东西，只是为了验证哪个代码签名身份用于应用程序。

谢谢！

# java - ResultSet.getNext() 不适用于 PreparedStatement

> ID：14128621
> 
> 赞同：0
> 
> 时间：2013-01-02T20:23:28.500
> 
> 标签：java, oracle, jdbc, plsql

我试图弄清楚为什么 ResultSet.next() 在我执行 SQL 查询后编写的 Java 代码中永远不会为真，该 SQL 查询将 Oracle 11g 表中的结果返回到该 ResultSet ......似乎代码没有在 java.sql.Connection 中使用 PreparedStatement 时正确获取返回的 ResultSet 的内容。任何帮助表示赞赏，以下是详细信息：

桌子：

```
 CREATE TABLE "SHANDB"."ABSCLOBS" 
   (    "ID" NUMBER, 
    "XMLVAL" "XMLTYPE", 
    "IDSTRING" VARCHAR2(20 BYTE)
   ) 
```

数据：

```
INSERT INTO absclobs VALUES ( 1, 
   xmltype('<?xml version="1.0"?>
               <EMP>
                  <EMPNO>221</EMPNO>
                  <ENAME>John</ENAME>
               </EMP>', '1'));

INSERT INTO absclobs VALUES (2, 
   xmltype('<?xml version="1.0"?>
               <PO>
                  <PONO>331</PONO>
                  <PONAME>PO_1</PONAME>
               </PO>', '2')); 
```

我正在运行 Java 代码以从上面获取值以测试代码：

```
 public static void main(String[] args) throws Exception {
    try {
      String url = "jdbc:oracle:thin:@//localhost:1521/xe";
      String driver = "sun.jdbc.odbc.JdbcOdbcDriver";
      String user = "shandb";
      String password = "test";
      Class.forName(driver);
      connection = DriverManager.getConnection(url,user, password);
      String selectID1 = "SELECT a.xmlval.getClobval() AS poXML FROM absclobs a where idstring=? and id=? ";      
      PreparedStatement preparedStatement = connection.prepareStatement(selectID1);

      preparedStatement.setString(1, "1"); 
      preparedStatement.setInt(2, 1); 

      rowsUpdated = preparedStatement.executeQuery(); 
      while(rowsUpdated.next()){
          String clobxml = rowsUpdated.getString(1);
          System.out.println(clobxml);
      }
    } catch (ClassNotFoundException cnfe) {
      System.err.println(cnfe);
    } catch (SQLException sqle) {
      System.err.println(sqle);
    }
    finally{
        System.out.println("Rows affected: " + rowsUpdated);
        connection.close();     
    }

  } 
```

上面这部分代码永远不会运行，我不明白：

```
 while(rowsUpdated.next()){
      String clobxml = rowsUpdated.getString(1);
      System.out.println(clobxml);
  } 
```

...但是最后的打印语句显示 ResultSet 不为空：

```
Rows affected: oracle.jdbc.driver.OracleResultSetImpl@15f157b 
```

有谁知道为什么我不能显示实际检索到的 XML clob 内容，和/或为什么上面的 while 块永远不会是真的？

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T20:29:53.523

您的诊断不正确 - 这是：

```
Rows affected: oracle.jdbc.driver.OracleResultSetImpl@15f157b 
```

不显示结果集是非空的。它只是表明 的值`rowsUpdated`是对 的实例的引用`oracle.jdbc.driver.OracleResultSetImpl`，它不会覆盖`toString()`。那很容易为空。

我怀疑问题只是您的`WHERE`子句与任何记录都不匹配。为了诊断起见，我建议您将其更改为：

```
String selectID1 = "SELECT a.xmlval.getClobval() AS poXML FROM absclobs a"; 
```

（当然，摆脱参数设置调用）。这样，您应该能够看到*所有*表格的值。然后，您可以努力找出您的`WHERE`条款没有按预期工作的原因。

（顺便说一句，不清楚为什么你没有声明`connection`或`rowsUpdated`在问题的代码中。它们绝对应该是局部变量......）

# objective-c - 无法覆盖简单的方法

> ID：14128622
> 
> 赞同：1
> 
> 时间：2013-01-02T20:23:28.500
> 
> 标签：objective-c, ios, xcode, uiviewcontroller

我创建了一个带有两个 ViewController 的新项目，并导入了一个`ViewController`从右向左推送的类，而不是 LTR，但无法使用它。我可以看到`pushViewController`UIRightToLeft.m 内部没有被调用，我不明白为什么。我的主要目标是让它与 RTL animation 一起工作。

```
#import "UIRightToLeft.h"

@implementation UIRightToLeft

- (id)initWithRootViewController:(UIViewController *)rootViewController
{
    self = [super initWithRootViewController:rootViewController];
    if (!self)
        return nil;
    return self;
}

- (void)pushViewController:(UIViewController *)viewController animated:(BOOL)animated
{
    NSLog(@"pushViewController");
    // Add the viewController and a fake controller without animation. Then pop the fake controller with animation.
    UIViewController *fakeController = [[UIViewController alloc] init] ;
    [super setViewControllers:[[self viewControllers] arrayByAddingObjectsFromArray:[NSArray arrayWithObjects:viewController, fakeController, nil]] animated:NO];
    [super popViewControllerAnimated:animated];
}

- (void)popViewControllerAnimatedStep2:(UIViewController *)viewController
{
    // Push the new top controller with animation
    [super pushViewController:viewController animated:YES];
    // Remove the view that should have been popped
    NSMutableArray *arr = [NSMutableArray arrayWithArray:[self viewControllers]];
    [arr removeObjectAtIndex:[[self viewControllers] count]-2];
    [super setViewControllers:[NSArray arrayWithArray:arr] animated:NO];
}

- (UIViewController *)popViewControllerAnimated:(BOOL)animated
{
    NSLog(@"popViewControllerAnimated");

    if (animated)
    {
        // Save the controller that should be on top after this pop operation
        UIViewController *newTopController = [[self viewControllers] objectAtIndex:[[self viewControllers] count]-2];
        // Remove it from the stack. Leave the view that should be popped on top
        NSMutableArray *arr = [NSMutableArray arrayWithArray:[self viewControllers]];
        [arr removeObjectAtIndex:[[self viewControllers] count]-2];
        [super setViewControllers:[NSArray arrayWithArray:arr] animated:NO];
        // Schedule the next step
        [self performSelector:@selector(popViewControllerAnimatedStep2:) withObject:newTopController afterDelay:0];
        return [arr objectAtIndex:[arr count]-1];
    }
    return [super popViewControllerAnimated:NO];
}

@end 
```

**视图控制器.m：**

```
#import "ViewController.h"
#import "UIRightToLeft.h"
#import "SecondViewController.h"
@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (IBAction)pressMe:(UIButton *)sender {
    SecondViewController *next = [[SecondViewController alloc]init];
    [self.navigationController pushViewController:next animated:YES];    
}

@end 
```

**视图控制器.h：**

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController
- (IBAction)pressMe:(UIButton *)sender;

@end 
```

（在我`ViewController`只有一个按钮被拖到第二个`ViewController`按钮）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T14:19:11.967

查看您的错误日志后，我认为您实际上需要将导航控制器子类化为 UIRightToLeft。

如果您使用的是故事板，请选择您的导航控制器并将自定义类设置为 UIRightToLeft。

# cassandra - Cassandra二级索引使用集合类型

> ID：14128625
> 
> 赞同：3
> 
> 时间：2013-01-02T20:23:32.193
> 
> 标签：cassandra, cql3

这是一个 cassandra 表：

```
CREATE TABLE Account(
id uuid,
userRef uuid,
name map<text, text>,
dataStatus text,
dataVisibility text,
...
PRIMARY KEY( id, dataStatus, dataVisibility, userRef)
)
CREATE INDEX idx_xxx_account_name ON Account (name); 
```

“名称”是（集合）类型“地图”的 cql3 列。我的问题是：是否可以在地图类型（即名称）上创建二级索引？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-23T08:20:15.040

从 Cassandra 1.2.6 开始，支持集合上的自定义索引。

[https://git-wip-us.apache.org/repos/asf?p=cassandra.git;a=blob_plain;f=CHANGES.txt;hb=refs/tags/cassandra-1.2.6](https://git-wip-us.apache.org/repos/asf?p=cassandra.git;a=blob_plain;f=CHANGES.txt;hb=refs/tags/cassandra-1.2.6)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-12T19:17:42.117

你的问题很老了。在 cassandra 2.1 中，有效的语法是

`CREATE INDEX on Account(keys(name));`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T12:08:40.650

没有反应？我决定将表格改写如下：

```
CREATE TABLE Account(
id uuid,
userRef uuid,
**main_name text,**
**other_name map<text, text>,**
dataStatus text,
dataVisibility text,
...
PRIMARY KEY( id, dataStatus, dataVisibility, userRef)
)
CREATE INDEX idx_xxx_account_name ON Account (main_name); 
```

*_name 可以是任何东西，例如电子邮件、电话等。例如，main_name 可以是强制性的，而 other_name 可以是可选的。

无论如何，现在我可以将 main_name 索引为“文本”类型，而不是文本值的映射。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-27T10:59:03.917

要回答您最初的问题：

> 尚不支持集合上的二级索引。具体来说，您可以将一组标签与用户相关联，但您还不能按用户的标签自动索引用户。添加该支持已明确在路线图上，但仍有待实施。 [1.2 中的到来：CQL3 中的集合支持](http://www.datastax.com/dev/blog/cql3_collections)

另外，我不太明白你为什么使用地图？为什么不是一个简单的集合或列表？看看下面提供的参考。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-01T15:03:31.247

```
create index idx_name on Account(ENTRIES(name)) 
```

这是为了访问地图中具有特定条目的行。

# jaxb - 如何使用具有默认值 pugin 和 jdk 1.6 的最新 jaxb

> ID：14128627
> 
> 赞同：3
> 
> 时间：2013-01-02T20:23:46.753
> 
> 标签：jaxb, jdk1.6

从 jdk 1.6 开始，包含 jaxb-xjc 相关的 jars 并在使用**java**命令时由 JVM 自动加载。我目前正在尝试以下列方式使用 xjc 默认值插件：

```
java -Djava.endorsed.dirs=C:\workspace\javalibs\xjc -classpath C:\apache-ant-1.8.3\lib\ant.jar;c:\workspace\javalibs\xjc\cxf-xjc-dv-2.6.1.jar com.sun.tools.xjc.XJCFacade -d test -extension -Xdv -verbose test.xsd 
```

该`java.endorsed.dirs`属性应该允许您使用更高版本的完整版本覆盖 jdk 版本的 jaxb。jdk 1.6 中使用的版本是**2.1.10**。因此，我将 jaxb **2.2**相关的 jars 放在了认可的 dirs 目录中。尽管如此，执行**java**命令时出现以下错误：

```
Exception in thread "main" java.lang.LinkageError: loader constraint violation:
loader (instance of <bootloader>) previously initiated loading for a different type with name "com/sun/tools/xjc/outline/Outline"
    at org.apache.cxf.xjc.dv.DefaultValuePlugin.run(DefaultValuePlugin.java:105)
    at com.sun.tools.xjc.addon.apache_cxf.dv.DefaultValuePlugin.run(DefaultValuePlugin.java:59)
    at com.sun.tools.xjc.model.Model.generateCode(Model.java:290)
    at com.sun.tools.xjc.Driver.run(Driver.java:343)
    at com.sun.tools.xjc.Driver.run(Driver.java:191)
    at com.sun.tools.xjc.Driver._main(Driver.java:116)
    at com.sun.tools.xjc.Driver.access$000(Driver.java:74)
    at com.sun.tools.xjc.Driver$1.run(Driver.java:96) 
```

然后我用 jdk 1.5 测试了插件，并且这些类是由 xjc 正确生成的，没有故障。原因是 jdk 1.5 不包含与 jaxb-xjc 相关的 jar，因此它们没有预加载，因此没有链接错误冲突。我的问题是如何让 jdk 1.6 使用我提供的 jaxb jar（通过`java.endorsed.dirs`或其他方式），而不是预打包的，以便我可以正确使用插件？

# android - 当wifi打开时，android中的Mac地址是否始终可用？

> ID：14128628
> 
> 赞同：1
> 
> 时间：2013-01-02T20:23:50.013
> 
> 标签：android, mac-address

我的应用程序在安卓上运行。如果没有 wifi，它就无法工作，甚至无法安装在此类系统上。该应用程序通过 WIFI 连接到服务器，并且必须向其传递唯一的设备标识符。该应用程序可能在同一部手机/平板电脑上安装了其他应用程序，并且每当它们中的任何一个连接到服务器时，它们都应该传递相同的唯一标识符。

鉴于运行应用程序的先决条件，Mac 地址似乎是最佳选择。

所以问题是我可以相信当 WIFI 可用且打开时，mac 地址将始终可用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T20:29:57.470

任何使用 WIFI 的设备都必须具有 MAC 地址才能使其工作，所以是的，我认为（但我不会保证）您可以相信 MAC 地址始终可用于 WIFI。

似乎它也应该适用于您的情况，因为您需要 WIFI 来安装应用程序，它对于每台设备都是独一无二的。

# android - Android：以百分比宽度居中按钮

> ID：14128632
> 
> 赞同：0
> 
> 时间：2013-01-02T20:24:17.983
> 
> 标签：android, android-layout

我在我的 Android 应用中有一个相当简单的 Activity，它显示三个按钮，每个按钮启动一个不同的 Activity。目前，我使用RelativeLayout 将中间按钮水平和垂直居中，然后将顶部和底部按钮与中间按钮相距30dp（并且水平居中）。

然而，我想做的是让按钮拉伸到屏幕宽度的一定百分比。我不知道如何做到这一点并保持按钮居中。是否有一个好的对象可以用作按钮两侧的 LinearLayout 中的“填充物”（所以我可以设置权重）？或者有没有一种不涉及LinearLayout的方法？

布局的 XML 是：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/button2"
        android:layout_centerHorizontal="true"
        android:layout_marginBottom="30dp"
        android:onClick="button1Callback"
        android:text="@string/button1Label" />

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:onClick="button2Callback"
        android:text="@string/button2Label" />

    <Button
        android:id="@+id/button3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/button2"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="30dp"
        android:text="@string/button3Label" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T20:57:00.717

当然。查看或框架都可以工作。

```
<LinearLayout android:orientation="horizontal"
    android:layout_width="match_parent"
    android:layout_height="wrap_content">
    <View android:layout_height="0dp"  
    android:layout_width="0dp"
    android:layout_weight="60" />
   <Button android:layout_height="wrap_content"  
    android:layout_width="0dp"
    android:layout_weight="20" />
   <View android:layout_height="0dp"  
    android:layout_width="0dp"
    android:layout_weight="20" />
 </LinearLayout> 
```

作为垫片工作得很好，据我所知似乎完全无害。我在我的应用程序中经常使用它（尽管老实说，我的大多数按钮都是固定宽度的）。

有一次，我实际上编写了一个具有比例布局的自定义视图。但最后我根本没有使用它。在几乎所有情况下，您都可以在线性布局中明智地应用权重来获得等效的比例布局。

# android - 是否有权检查设备一次可以处理的接触点数量？

> ID：14128635
> 
> 赞同：1
> 
> 时间：2013-01-02T20:24:31.070
> 
> 标签：android, events, touch, multi-touch

我正在开发一个需要能够同时处理多达 5 个触摸事件的应用程序（本质上是一次用所有 5 个手指在屏幕上的任何位置单击），但我意识到我的测试设备（HTC Rezound，4.0\. 3) 一次只能处理 4 次触摸。

我知道其他 android 设备至少可以处理 5 次，那么**是否有权限或可以添加到我的 AndroidManifest 中以确保设备可以处理 5 次触摸**？这样做的原因是为了确保不允许某些无法处理触摸的设备安装该应用程序（因为显然它无法正常工作）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T20:30:34.667

如果你去这里[http://developer.android.com/guide/topics/manifest/uses-feature-element.html](http://developer.android.com/guide/topics/manifest/uses-feature-element.html)有谈论：

```
android.hardware.faketouch.multitouch.jazzhand
android.hardware.touchscreen.multitouch.jazzhand 
```

其中提到需要 5 个接触点。所以我相信你会在清单中这样做：

```
<uses-feature 
    android:name="android.hardware.touchscreen.multitouch.jazzhand"
    android:required="true" /> 
```

# gcc - Libshout-2.3.1 出错

> ID：14128637
> 
> 赞同：0
> 
> 时间：2013-01-02T20:24:37.640
> 
> 标签：gcc, makefile, libtool

我正在尝试从 Linux 中的源代码构建 libshout，但遇到了一个我似乎无法解决的错误。我的 ./configure 命令运行没有错误，但是当我运行 make 时出现以下错误：

```
/usr/bin/sed: can't read =/usr/lib/libogg.la: No such file or directory
libtool: link: `=/usr/lib/libogg.la' is not a valid libtool archive
make[3]: *** [libshout.la] Error 1 
```

如果我尝试在另一台 Linux 机器上构建源代码，libogg 路径名前面的那个额外的 '=' 不会出现。我无法弄清楚为什么'='在那里。我唯一的怀疑是编译器是不同的。在不工作的机器上：

```
gcc --version
gcc (GCC) 4.5.3 20110311 (prerelease) 
```

在正在工作的机器上：

```
gcc --version
gcc (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3 
```

Libogg.la 确实存在于 /usr/lib 中，所以我需要做的就是弄清楚如何摆脱“=”。我尝试过旧版本的 libshout，结果相同。有没有人见过类似的东西并遇到过解决方案？提前致谢。

# javascript - 如何在提交时获取表单以检查 Google Checkout 按钮的条款

> ID：14128640
> 
> 赞同：0
> 
> 时间：2013-01-02T20:24:53.083
> 
> 标签：javascript, html, forms, google-checkout, html-input

我正在使用 Google Checkout，但 onsubmit 功能有问题。

我有一个“同意条款”复选框，以便用户在继续结帐之前必须接受条款。我在 HTML 表单元素上调用一个函数......

```
function preCheckout() {
        if( !document.getElementById('terms').checked ) {
            // Requirements not accepted.
            $('.warning').animate({top: -$('.warning').outerHeight()}, 500);
            return false;
        }
    } 
```

其中包含谷歌结帐按钮，如下所示：

```
<form method="POST"
        action="https://sandbox.google.com..."
            accept-charset="utf-8" onsubmit="preCheckout();">

        <div>
            <input type="checkbox" id="terms" name="accept_terms" value="" />
            <p>I agree to all the terms and requirements...</p>
        </div>

        <input type="hidden" name="item_name_1" value="Simple Notes Monthly Subscription"/>
        <input type="hidden" name="item_description_1" value=""/>
        <input type="hidden" name="item_quantity_1" value="1"/>
        <input type="hidden" name="item_price_1" value=""/>
        <input type="hidden" name="item_currency_1" value="USD"/>
        <input type="hidden" name="shopping-cart.merchant-private-data" value="" />

        <input type="hidden" name="tax_rate" value="0.065"/>
        <input type="hidden" name="tax_us_state" value="UT"/>

        <input type="hidden" name="_charset_"/>

        <input type="hidden" name="continue-shopping-url" value="/thankyou.php" />

        <input type="image" name="Google Checkout" id="google-btn" alt="Fast checkout through Google"
        src="https://checkout.google.com/buttons/checkout.gif?merchant_id=id&w=180&h=46&style=trans&variant=text&loc=en_US"
        height="46" width="180"/>
    </div>
</form> 
```

但是，无论是否选中复选框，页面都会继续。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T15:05:32.870

仅供参考[这是我真正想问的问题](https://stackoverflow.com/questions/5195933/with-form-validation-why-onsubmit-return-functionname-instead-of-onsubmit)

当你直接进入`onsubmit`它自己的行时，你分别返回`true`or `false`，对吗？像这样：

`onsubmit="return false;"`

好吧，让我们分解一下您的代码中实际发生的事情。因为您可能会返回`false`您的代码，所以这是提交时可能发生的两种可能性。

```
onsubmit="false" // form is a success and performs form action
onsubmit="" // form is a success and performs form action 
```

但是您真正要寻找的是`onsubmit="return false;"`左右`onsubmit="return true;"`，这就是您需要做的：

```
function preCheckout() {
    if( !document.getElementById('terms').checked ) {
        // Requirements not accepted.
        $('.warning').animate({top: -$('.warning').outerHeight()}, 500);
        return false;
    }

    // return true if everything is fine
    return true;
} 
```

然而，**最重要**的部分是：

```
<!-- all I did was add a "return" to your onsubmit -->
<form method="POST" action="https://sandbox.google.com..." accept-charset="utf-8" onsubmit="return preCheckout();"> 
```

# jquery - 如何关闭跳转功能 Jquery tab

> ID：14128641
> 
> 赞同：-2
> 
> 时间：2013-01-02T20:25:01.680
> 
> 标签：jquery, tabs

我在互联网上找到了这段代码，一切正常。但是我想打开跳转到网页上某个位置的跳转功能。

```
<script type="text/javascript" src="js/jquery-1.4.2.min.js"></script>
<script type="text/javascript">

$(document).ready(function(){
    // Hide all tab conten divs by default
    $(".tabContents").hide(); 

    // Show the first div of tab content by default
    $(".tabContents:first").show(); 

    //Fire the click event
    $("#tabContaier ul li a").click(function(){ 

        // Catch the click link
        var activeTab = $(this).attr("href"); 

        // Remove pre-highlighted link
        $("#tabContaier ul li a").removeClass("active"); 

        // set clicked link to highlight state
        $(this).addClass("active");         

        // hide currently visible tab content div
        $(".tabContents").hide(); 

        // show the target tab content div by matching clicked link.
        $(activeTab).fadeIn(); 
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T20:28:07.150

我的代码中有这个功能：

```
function addToHistory(historyid)  {
    var nojump = $("<a>").attr("id", historyid);

    nojump.prependTo($("body", document));

    window.location.hash = historyid;

    nojump.remove();
} 
```

如果 div 的 id 是`#blah`并且 urls 是，那应该是这样，当使用此函数更改哈希时`myUrl.com/#blah`，它不仅会出现在页面上。`#blah`

# java - 内存泄漏 ram java 程序与 opencv 和处理

> ID：14128648
> 
> 赞同：1
> 
> 时间：2013-01-02T20:25:50.243
> 
> 标签：java, opencv

我在java中有这段代码，ram中的内存几乎在几秒钟内就爆炸了。我发布了 IplImage “imagensMedia”。为什么？？

编辑：此功能每秒运行多次

```
int largura=1280;
int altura=800;

IplImage[] imagens = new IplImage[5];
IplImage imagensSoma=cvCreateImage(cvSize(largura,altura), 32, 3);
int indiceImagem=0;

for(x=0; x<imagens.length;x++)
   imagens[x]=cvCreateImage(cvSize(largura,altura), 8, 3);

public void imageArrayBuilder() //Constroi Array de Imagens e a Sua Media
{
    int z;
    IplImage imagensMedia =cvCreateImage(cvSize(largura,altura), 8, 3);

    cam.read();
    opencv.copy(cam.get());

    if(imagemTotalFlag)
    {
        cvSub(imagensSoma,imagens[indiceImagem],imagensSoma, null);
        cvAcc(opencv.Buffer, imagensSoma, null);
        cvConvertScale(imagensSoma, imagensMedia, 1.0/imagens.length,0);
        cvCopy(opencv.Buffer,imagens[indiceImagem],null);
        indiceImagem++;
        if(indiceImagem==imagens.length)
            indiceImagem=0;
        opencv.copy(imagensMedia);    
    }
    else
    {
        if(indiceImagem<imagens.length)
        {
            cvCopy(opencv.Buffer,imagens[indiceImagem],null);
            indiceImagem++;
            if(indiceImagem==imagens.length)
            {
                imagemTotalFlag=true;
                for(z = 0; z < imagens.length; z++)
                    cvAcc(imagens[z], imagensSoma, null);
                cvConvertScale(imagensSoma, imagensMedia, 1.0/imagens.length,0);
                indiceImagem=0;
                opencv.copy(imagensMedia);
            }
        }
    }
    cvReleaseImage(imagensMedia);   
} 
```

请有人帮我...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T21:36:53.963

我不认为“内存泄漏”的概念真的适用于 java，因为它是一种垃圾收集语言（当没有其他对象引用它们时，引用会自动删除）。评论给出了一些关于内存使用位置的可能性；我建议研究垃圾收集的工作原理（请参阅[此链接](http://javarevisited.blogspot.com/2011/04/garbage-collection-in-java.html)了解初学者）。如果一切都失败了，调用`System.gc()`将运行垃圾收集器，或者更具体地说：

> 调用 gc 方法表明 Java 虚拟机花费精力回收未使用的对象，以便使它们当前占用的内存可用于快速重用。当控制从方法调用返回时，Java 虚拟机已尽最大努力从所有丢弃的对象中回收空间。

除此之外，检查无限循环或无限递归。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-13T20:35:16.387

据我了解，OpenCV 的 Java 包装器`Mat`占用空间很小。底层的本机对象可能正在使用千兆字节的内存（在我的情况下），而 GC 对此一无所知。

仅有的两个选项是：

*   使用`Mat.release()`.
*   经常调用`System.gc()`以强制对未引用的`Mat`包装器对象进行垃圾收集。请注意，如果您使用类似`VideoCapture`读取帧的方法，您绝对不希望调用`System.gc()`每帧读取，因为它会破坏性能。我在我的应用程序中大约每 20 秒调用一次。

# c# - 向 MemoryStream XML 添加新属性

> ID：14128649
> 
> 赞同：1
> 
> 时间：2013-01-02T20:25:53.157
> 
> 标签：c#, xml, xml-namespaces

我想添加

`xsi:noNamespaceSchemaLocation="FullModeDataset.xsd"`

和

`xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"`

作为我的根节点“ApplicationData”的属性，所以根节点看起来像这样..

```
 <ApplicationData
  xsi:noNamespaceSchemaLocation="FullModeDataset.xsd"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" /> 
```

我正在从一个字符串创建 xml，并使用此代码输出一个正确的 xml 字符串。

```
var doc = new XmlDocument();
            doc.LoadXml(myInputXmlString);
            var ms = new MemoryStream();
            var tx = XmlWriter.Create(ms,
                        new XmlWriterSettings
                        {
                            OmitXmlDeclaration = false,
                            ConformanceLevel = ConformanceLevel.Document,
                            Encoding = UTF8Encoding.UTF8
                        });
            doc.Save(tx);

              //I TRIED THE COMMENTED CODE BELOW BUT WITH NO SUCCESS
             //XmlAttribute newAttr = doc.CreateAttribute("xsi:noNamespaceSchemaLocation");
             //newAttr.Value = "FullModeDataset.xsd";

            //XmlElement applicationNode = doc.DocumentElement["AppicationData"];
            //applicationNode.Attributes.Append(newAttr);
            //doc.Save(tx);

            var xmlString = UTF8Encoding.UTF8.GetString(ms.ToArray()); 
```

如何将这些属性添加到我的 xml 字符串中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T20:34:45.500

您需要使用带有前缀和要创建的属性的命名空间 URL 的重载来创建属性，如下所示：

```
public class StackOverflow_14128649
{
    public static void Test()
    {
        string myInputXmlString = @"<ApplicationData>
                                        <something>else</something>
                                    </ApplicationData>";
        var doc = new XmlDocument();
        doc.LoadXml(myInputXmlString);

        XmlAttribute newAttr = doc.CreateAttribute(
            "xsi", 
            "noNamespaceSchemaLocation", 
            "http://www.w3.org/2001/XMLSchema-instance");
        newAttr.Value = "FullModeDataset.xsd";
        doc.DocumentElement.Attributes.Append(newAttr);

        var ms = new MemoryStream();
        XmlWriterSettings ws = new XmlWriterSettings
        {
            OmitXmlDeclaration = false,
            ConformanceLevel = ConformanceLevel.Document,
            Encoding = UTF8Encoding.UTF8
        };
        var tx = XmlWriter.Create(ms, ws);
        doc.Save(tx);
        tx.Flush();

        var xmlString = UTF8Encoding.UTF8.GetString(ms.ToArray());
        Console.WriteLine(xmlString);
    }
} 
```

# php - Wordpress 中的事件管理和自定义时事通讯

> ID：14128652
> 
> 赞同：0
> 
> 时间：2013-01-02T20:26:24.330
> 
> 标签：php, events, joomla, wordpress

我有一个 Joomla 1.5.26 网站，我在其中发布公司规定的活动和会议。这些是按类别（城市）处理的。

到目前为止，我遵循以下工作流程：

*   使用称为简单日历的组件发布事件（通过输入新注册表）或复制条目（如果适用）。它在前端为每个事件创建一个页面并按类别处理这些事件。

*   然后，由于我的模板的自定义，我不得不在首页发布一篇文章，包含时事的所有信息。双重工作。

*   最后：转到我创建的用于管理时事通讯的系统（基于 php 并连接到我的 joomla 数据库）。我必须在 TinyMCE 字段中再次写入事件的所有信息，然后在选择框中按状态选择用户组（我覆盖了 jos_user 数据库并添加了“状态”字段。我还覆盖了注册页面，所以用户可以选择他们的原产国）。

在那个系统中，我还创建了一个页面，让我可以向jos_user中的**所有用户发送简报。**

**我需要的：**

我需要简化这个工作流程。我想继续使用 CMS（我正在考虑使用 Wordpress）。

我需要迁移在 Joomla 中注册的所有用户（使用它的自定义字段）。

我想一次性发布这些事件，并有可能向特定用户组或所有用户发送即将发生的事件或类别即将发生的事件的时事通讯。

**我试过的：**

Wordpress + Event Espresso：这个解决方案对我不起作用，因为它不允许我根据需要处理时事通讯。

**我不需要的东西：**

*   一个支付系统。
*   参会经理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T08:25:48.000

你可能想试试这个我已经工作了很长时间的[***插件。***](http://wordpress.org/extend/plugins/events-manager/)这是完成工作的好插件。

# c# - 通过 Socket 需要有关字节的帮助

> ID：14128657
> 
> 赞同：1
> 
> 时间：2013-01-02T20:26:39.400
> 
> 标签：c#, .net, sockets, buffer, byte

我试图通过套接字发送几个数据，所以它被转换为字节，然后返回到服务器上的字符串。但我显然只能做一个。

服务器代码：

```
static void Read(IAsyncResult ar)
{
    int fileNameLen = 1;
    //int userNameLen = 9;

    State newState = (State)ar.AsyncState; //gets state of Socket
    Socket handler = newState.Socket_w; //passes Socket to handler

    int bytesRead = handler.EndReceive(ar); //terminates Data Receive from Socket.

    if (bytesRead > 0)
    {
        if (flag == 0)
        {
            fileNameLen = BitConverter.ToInt32(newState.buffer, 0); //gets filename length
            fileName = Encoding.UTF8.GetString(newState.buffer, 4, fileNameLen); //gets filename
            //userNameLen = BitConverter.ToInt32(newState.buffer, 8);
            //getUsername = Encoding.UTF8.GetString(newState.buffer, 8, fileNameLen);

            flag++;
        }
    }    
} 
```

客户端代码：

```
internal static void uploadFile(string host, string username, string getGame, string filename, string filepath)
{
    byte[] m_clientData;
    Socket clientSock = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
    byte[] fileName = Encoding.UTF8.GetBytes(username + "_" + filename);
    byte[] fileData = File.ReadAllBytes(filepath);
    byte[] fileNameLen = BitConverter.GetBytes(fileName.Length);
    //byte[] sendUsername = Encoding.UTF8.GetBytes(username);
    //byte[] sendUsernameLen = BitConverter.GetBytes(sendUsername.Length);
    //byte[] sendGame = Encoding.UTF8.GetBytes(getGame);
    //byte[] sendGameLen = BitConverter.GetBytes(sendGame.Length);

    m_clientData = new byte[4 + fileName.Length + fileData.Length];

    fileNameLen.CopyTo(m_clientData, 0);
    fileName.CopyTo(m_clientData, 4);
    fileData.CopyTo(m_clientData, 4 + fileName.Length);

    //sendUsernameLen.CopyTo(m_clientData, 0);
    //sendUsername.CopyTo(m_clientData, 4);

    //sendGameLen.CopyTo(m_clientData, 0);
    //sendGame.CopyTo(m_clientData, 4);

    clientSock.Connect(host, 8889);
    clientSock.Send(m_clientData); //tofix exception
    clientSock.Close();
} 
```

我似乎无法在服务器上正确解密它。任何人都可以帮我解决缓冲区大小之类的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T20:37:02.983

`Read`对发送的内容一无所知；TCP 基本上只是一个流 - 所以**绝对没有什么**可以说您在一次调用中拥有所有数据`Read`；你可以有：

*   正是您发送的数据量
*   一封邮件的一部分
*   17 条信息
*   一条消息的结束和下一条消息的开始
*   消息中的 1 个单独字节

您需要设计某种成帧协议，让接收者知道他们何时拥有完整的消息。这可以像长度前缀一样简单，也可以更复杂。然后，您应该在内存中缓冲数据（或逐渐处理它），直到获得整个消息。*一次*调用`Read`不太可能代表一条完整的消息。实际上，如果消息大于您的 ，则保证不会出现这种情况，但即使对于小消息和大缓冲区，您也可以获得相同的结果。*`newstate.buffer`*

# java - GSON - 不转义 unicode char

> ID：14128658
> 
> 赞同：3
> 
> 时间：2013-01-02T20:26:51.817
> 
> 标签：java, json, gson

我正在使用 GSON 序列化我的对象。但出于某种原因，它并没有转义某些 unicode 字符。

```
 Gson gson =  new Gson();
    System.out.println(gson.toJson("Â™&quot;));
    System.out.println(Character.codePointAt("Â™&quot;, 0) );
    System.out.println(Character.codePointAt("Â™&quot;, 1) ); 
```

输出：

> “™”
> 
> 194
> 
> 8482

是否有确保字符被转义的设置？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T20:27:52.883

没有理由转义 unicode 字符，因为它们在 JSON 字符串中是允许的。

来自[json.org](http://json.org/)：

![在此处输入图像描述](../Images/eab28b13275ae43f138329355496419b.png)

如果您在将 JSON 发送到浏览器时遇到问题，请检查您的 HTTP 标头是否设置为 UTF-8。

如果您真的想像在 Java 中那样转义 unicode 字符，您可以使用[apache commons 的 StringEscapeUtils#escapeJava](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringEscapeUtils.html)，但您可能不应该这样做。

# iphone - 如何将xcode项目导入xcode？

> ID：14128665
> 
> 赞同：-1
> 
> 时间：2013-01-02T20:27:22.180
> 
> 标签：iphone, ios, cocos2d-iphone

我下载了适用于 iOS 的 SwiffCore (https://github.com/musictheory/SwiffCore)，演示项目包含一个主要的 SwiffCore xcode 项目，其中包含所有必要的库。

现在我想在我的项目中使用 SwiffCore。

如何在我的项目中导入 xcode 项目？

我试着往里面拖，但它并没有复制所有文件。

我在其他 xcode 示例中看到了很多。

问候米尔扎

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T21:49:13.290

从我在 github 存储库中看到的内容来看，您只需将 Source 文件夹拖到您的项目中，然后使用文档中指示的类。

# xml - Rails 将 xml 发布到 iframe

> ID：14128667
> 
> 赞同：1
> 
> 时间：2013-01-02T20:27:35.333
> 
> 标签：xml, ruby-on-rails-3, post, iframe

我正在与需要我将 xml 发布到 iframe 的第三方合作。我最初试图使用数据 URI，但这似乎是一个糟糕的方法。据我了解，数据 URI 与 IE 不兼容，不适合较长的文档。我已经开始实现 java 方法，但想知道是否有人使用 Rails 做过类似的事情，或者是否有人看到这样做有什么好处。

# selenium - Python可以用来读取网页网格类的数据吗？

> ID：14128668
> 
> 赞同：0
> 
> 时间：2013-01-02T20:27:36.487
> 
> 标签：selenium, python-2.7, beautifulsoup, selenium-webdriver

我目前正在开发第三方应用程序。现在有一些网页的数据位于网格中。那么是否可以从网页中读取这些网格内容并将其存储到 excel 表中？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T12:32:01.347

你不需要做任何编程。Excel 能够直接从 HTML 表中检索数据。

[http://office.microsoft.com/en-gb/excel-help/create-edit-and-manage-connections-to-external-data-HA010167227.aspx](http://office.microsoft.com/en-gb/excel-help/create-edit-and-manage-connections-to-external-data-HA010167227.aspx)

简而言之：

1.  转到数据选项卡
2.  点击“来自网络”
3.  导航到您的页面
4.  选择感兴趣的表。

然后，您可以通过刷新数据连接来刷新它。

如果您想自己抓取它，那么您可以使用您在问题中使用的所有标签来完成它。只要学习所有这些东西，答案就会很明显。

# hotkeys - 我可以使用 InputBox 输入热键吗？

> ID：14128671
> 
> 赞同：0
> 
> 时间：2013-01-02T20:27:44.490
> 
> 标签：hotkeys, autohotkey, inputbox

我想使用 InputBox 输入随后将用于激活热键的键虽然我可以使用下面的脚本输入数据，但我不知道将其作为热键使用

```
InputBox, UserID, UserID, Enter your UserID,,150, 120
If ErrorLevel
    Exit
InputBox, password, Password, Enter your Password, HIDE, 150, 120 
If ErrorLevel
    Exit
Prompt := "Create your shortcut using any`ncombination of keys including `n^ for Ctrl`n# for Windows`n! for Alt`nin combination with another key."
InputBox, Shortcut, Shortcut, %Prompt%,,220, 220
If ErrorLevel
    Exit
else
MsgBox, %UserID%, %Password%, %Shortcut%
Exit

%Shortcut%::
MsgBox, It worked. 
```

可能很容易做到，但我看不到。有可能吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T09:30:30.797

这就是我解决它的方法。可能不理想，但它对我有用。

```
!Esc::
SplashTextOn, 250,200,Power Options,1 = Arentheem Ouders`n`r2 = Arentheem Brian`n`rS = Sleep`n`rR = Reboot`n`rP = Power down`n`rW = Wait`n`rEsc = keep working`n`rL = Loop`n`rD = Display Off`n`rC = Compress MP3's and sleep`n`rB = Back-up and sleep`n`r`n`rPC will automatically go to sleep after 10 seconds if no key is pressed!
SetTimer, GoToSleep, Off
Input, CI_KeyVar, I L1 T10
SplashTextOff
if ErrorLevel = Timeout
{
    GoSub, NetBackup
    return
}
if (CI_KeyVar = "c")
{

  ;SplashTextOn, 250,30,Shift+Esc = Finish Options,Sleep = default
  run "C:\Program Files (x86)\AutoHotkey\AutoHotkey.exe" "C:\Users\Robert\AppData\Roaming\Microsoft\Windows\Start Menu\Lemon Juice\Compress.ahk"
  SetTimer, MySplashTexOff, -60000 ; Remove splashText after 1 minute -60000 = run timer once
  Return
}
if (CI_KeyVar = "d")
{
  SetTimer MonitorOff, 1000 ; Turn the monitor off
  Return
}

if (CI_KeyVar = "l")
{
  GoSub, MyScreenLoop
  Return
}
if (CI_KeyVar = "1")
{
  Sleep, 500
  Send, {Esc}
  Sleep, 100
  Send, ABC{TAB}XYZ{Enter}
  Return
}
if (CI_KeyVar = "2")
{
  Sleep, 500
  Send, {Esc}  
  Sleep, 100
  Send, XYZ{TAB}ABC{Enter}
  Return
}

if (CI_KeyVar = "q")
{
  Return
}
if (CI_KeyVar = "s")
{
  DllCall("PowrProf\SetSuspendState", "int", 0, "int", 0, "int", 0)
  Return
}
if (CI_KeyVar = "b")
{
  GoSub, NetBackup
  Return
}
if (CI_KeyVar = "r")
{
  run, Shutdown.exe /r /t 1 ; Reboot PC
  Return
}
if (CI_KeyVar = "p")
{
  run, Shutdown.exe /s /t 0 ; Shutdown PC
  Return
}
if (CI_KeyVar = "w")
{
SleepTime+=1
inputbox, Sleeptime, Minutes,,,400,110,,,,,%Sleeptime%
Sleeptimer+=%Sleeptime%
MySleeptimer:=Sleeptimer * 60000 ; 60`000 = 1 minute
if MySleeptimer = 0
{
  Return
}
TrayTip, Count Down,`n`nSleeping in %Sleeptimer% minutes`n`nPress Alt + Esc to cancel,10,1
SetTimer, GoToSleep, %Mysleeptimer%
}
Return 
```

# xpath - 在 HtmlXPathSelectors 中使用变量

> ID：14128675
> 
> 赞同：0
> 
> 时间：2013-01-02T20:28:04.310
> 
> 标签：xpath, scrapy

我正在使用 Scrapy，并且遇到了一些使用变量会很好的地方，但我不知道如何使用。这意味着如果我有一些长字符串，最好将它存储在一个变量中`long_string`，然后为它选择：`hxs.select('\\div[@id=long_string]')`。我确信 Scrapy 支持这一点，但我无法弄清楚，因为你总是必须硬编码字符串是没有意义的。

更新：所以对于下面的示例文本，我想提取 div where `id="footer"`：

```
<div id="footer">
    <div id="footer-menu">
        <div class="region-footer-menu">
            <div id="block-menu-menu-footer-menu" class="block-menu">
                <div class="content">
                    <ul class="menu">
                        <li class="first leaf"><a href="/faq" title="">FAQs</a></li>
                        <li class="leaf"><a href="/media" title="">Media</a></li>
                        <li class="leaf"><a href="/partners" title="">Partners</a></li>
                        <li class="last leaf active-trail"><a href="/jobs" title="" class="active-trail active">Jobs</a></li>
                    </ul>
                </div>
            </div>
            <div id="block-block-52" class="block block-block">
                <div class="content">
                    <p>SUPPORT</p>
                </div>
            </div>
        </div>
    </div>
</div> 
```

`hxs = HtmlXPathSelector(response)`我们为以下所有段进行初始化。以下代码仅选择第一个 div： `hxs.select('//div[@id=concat("foot","er")]')`

此代码什么都不选择，但没有给出错误： `hxs.select('//div[@id="foot"+"er"]')`

下面的两个代码段都没有选择任何内容并且没有给出错误：

```
long_string = "foot"
hxs.select('//div[@id=concat(long_string,"er")]')
hxs.select('//div[@id=long_string]') 
```

我希望能够执行下面两种方法中的任何一种并返回所需的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:25:46.473

假设 + 适用于 Scrapy 中的字符串连接，这应该有效：

```
hxs.select('//div[@id="' + long_string + '"]') 
```

我不熟悉 Scrapy，但我认为您无法选择不存在的 div。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T13:10:11.387

你有没有尝试过？

```
hxs.select('\\div[@id="' + long_string_variable + '"]') 
```

# iphone - CGContextShowTextAtPoint 在 Retina 设备上产生非 Retina 输出

> ID：14128678
> 
> 赞同：1
> 
> 时间：2013-01-02T20:28:07.143
> 
> 标签：iphone, ios, core-graphics

我正在尝试向 an 添加文本，`UIImage`并且得到一个像素化的绘图。

我尝试了其他一些没有成功的答案：

*   [使用 CoreGraphics 在视网膜显示器上绘图 - 图像像素化](https://stackoverflow.com/questions/6965873/drawing-on-the-retina-display-using-coregraphics-image-pixelated?lq=1)
*   [Retina 显示核心图形字体质量](https://stackoverflow.com/questions/5414631/retina-display-core-graphics-font-quality)
*   [使用 Core Graphics 绘图在 Retina 显示屏上看起来很厚实](https://stackoverflow.com/questions/5291510/drawing-with-core-graphics-looks-chunky-on-retina-display)

我的代码：

```
-(UIImage *)addText:(UIImage *)imgV text:(NSString *)text1
{
   int w = self.frame.size.width * 2;
   int h = self.frame.size.height * 2;
   CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
   CGContextRef context = CGBitmapContextCreate
         (NULL, w, h, 8, 4 * w, colorSpace, kCGImageAlphaPremultipliedFirst);

   CGContextDrawImage(context, CGRectMake(0, 0, w, h), imgV.CGImage);    
   CGContextSetRGBFillColor(context, 0.0, 0.0, 1.0, 1);

   char* text = (char *)[text1 cStringUsingEncoding:NSASCIIStringEncoding];
   CGContextSelectFont(context, "Arial", 24, kCGEncodingMacRoman);

   // Adjust text;

   CGContextSetTextDrawingMode(context, kCGTextInvisible);
   CGContextShowTextAtPoint(context, 0, 0, text, strlen(text));

   CGPoint pt = CGContextGetTextPosition(context);
   float posx = (w/2 - pt.x)/2.0;
   float posy = 54.0;    
   CGContextSetTextDrawingMode(context, kCGTextFill);
   CGContextSetRGBFillColor(context, 255, 255, 255, 1.0);

   CGContextShowTextAtPoint(context, posx, posy, text, strlen(text));

   CGImageRef imageMasked = CGBitmapContextCreateImage(context);
   CGContextRelease(context);
   CGColorSpaceRelease(colorSpace);

   return [UIImage imageWithCGImage:imageMasked];
} 
```

![锯齿状图像的示例](../Images/caaefae7f8d2926a77febb1cbe36dad0.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T12:58:10.743

就像彼得说的，使用`UIGraphicsBeginImageContextWithOptions`. 您可能希望将 image.scale 传递给 scale 属性（其中 image.scale 是您正在绘制的图像之一的比例），或者简单地使用 [UIScreen mainScreen].scale。

这段代码总体上可以变得更简单。尝试类似：

```
// Create the image context
UIGraphicsBeginImageContextWithOptions(_baseImage.size, NO, _baseImage.scale);

// Draw the image
CGRect rect = CGRectMake(0, 0, _baseImage.size.width, _baseImage.size.height);
[_baseImage drawInRect:rect];

// Get a vertically centered rect for the text drawing
rect.origin.y = (rect.size.height - FONT_SIZE) / 2 - 2;
rect = CGRectIntegral(rect);
rect.size.height = FONT_SIZE;

// Draw the text
UIFont *font = [UIFont boldSystemFontOfSize:FONT_SIZE];
[[UIColor whiteColor] set];
[text drawInRect:rect withFont:font lineBreakMode:NSLineBreakByClipping alignment:NSTextAlignmentCenter];

// Get and return the new image
UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
return image; 
```

`text`NSString 对象在哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T23:07:25.017

我面临着完全相同的问题，昨晚发布了一个没有人回答的问题。我在以下问题中将 fnf 的建议更改与 Clif Viegas 的回答结合起来： [CGContextDrawImage 在传递 UIImage.CGImage 时将图像倒置](https://stackoverflow.com/questions/506622/cgcontextdrawimage-draws-image-upside-down-when-passed-uiimage-cgimage)

想出解决方案。我的 addText 方法与您的方法略有不同：

+(UIImage *)addTextToImage:(UIImage *)img text:(NSString *)text1{

```
int w = img.size.width;
int h = img.size.height;

CGSize size = CGSizeMake(w, h);
if (UIGraphicsBeginImageContextWithOptions != NULL) {
    UIGraphicsBeginImageContextWithOptions(size, NO, 0.0);
} else {
    UIGraphicsBeginImageContext(size);
}
CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();

CGContextRef context = UIGraphicsGetCurrentContext();
CGContextTranslateCTM(context, 0,h);
CGContextScaleCTM(context, 1.0, -1.0);

CGContextDrawImage(context, CGRectMake(0, 0, w, h), img.CGImage);

CGContextSetRGBFillColor(context, 0.0, 0.0, 1.0, 1);

char* text = (char *)[text1 cStringUsingEncoding:NSASCIIStringEncoding];// \"05/05/09\";

CGContextSelectFont(context, "Times New Roman", 14, kCGEncodingMacRoman);
CGContextSetTextDrawingMode(context, kCGTextFill);

CGContextSetRGBFillColor(context, 0, 0, 0, 1);

//rotate text

CGContextSetTextMatrix(context, CGAffineTransformMakeRotation( -M_PI/8 ));

CGContextShowTextAtPoint(context, 70, 88, text, strlen(text));

CGColorSpaceRelease(colorSpace); 
```

UIGraphicsEndImageContext();
返回新图片；

}

总之，我所做的是添加

```
if (UIGraphicsBeginImageContextWithOptions != NULL) {
    UIGraphicsBeginImageContextWithOptions(size, NO, 0.0);
} else {
    UIGraphicsBeginImageContext(size);
} 
```

消除

// CGContextRef context = CGBitmapContextCreate(NULL, w, h, 8, 4 * w, colorSpace, kCGImageAlphaPremultipliedFirst);

并放

```
CGContextRef context = UIGraphicsGetCurrentContext(); 
```

反而。但这会导致图像颠倒。因此我把

```
CGContextTranslateCTM(context, 0,h);
CGContextScaleCTM(context, 1.0, -1.0); 
```

就在 CGContextDrawImage(context, CGRectMake(0, 0, w, h), img.CGImage);

这样你就可以使用 CG 函数而不是使用 drawInRect 等。

不要忘记

UIGraphicsEndImageContext

在最后。希望这可以帮助。

# xml - 请求 Apple UK RSS 提要时，Sinatra 出现“对等连接重置”错误

> ID：14128679
> 
> 赞同：0
> 
> 时间：2013-01-02T20:28:08.203
> 
> 标签：xml, rss, sinatra, net-http

这是我用来从 Apple 的 UK Top 10 rss 提要中获取 xml 数据的代码：

```
xml = Net::HTTP.get_response(URI.parse('http://ax.itunes.apple.com/WebObjects/MZStoreServices.woa/ws/RSS/topsongs/limit=10/xml')).body 
```

辛纳屈回归`Errno::ECONNRESET at / - Connection reset by peer`。我用于此的 RSS url 是从 Apple RSS 生成器生成[的](http://itunes.apple.com/rss)。其他国家/地区的 RSS 提要会出现此错误，但此处的默认提要（美国）不会出现[此](http://www.apple.com/rss/)错误。回溯如下：

```
/usr/lib/ruby/1.9.1/net/protocol.rb in read_nonblock
        @rbuf << @io.read_nonblock(BUFSIZE)
/usr/lib/ruby/1.9.1/net/protocol.rb in rbuf_fill
        @rbuf << @io.read_nonblock(BUFSIZE)
/usr/lib/ruby/1.9.1/net/protocol.rb in readuntil
          rbuf_fill
/usr/lib/ruby/1.9.1/net/protocol.rb in readline
      readuntil("\n").chop
/usr/lib/ruby/1.9.1/net/http.rb in read_status_line
        str = sock.readline
/usr/lib/ruby/1.9.1/net/http.rb in read_new
        httpv, code, msg = read_status_line(sock)
/usr/lib/ruby/1.9.1/net/http.rb in block in transport_request
          res = HTTPResponse.read_new(@socket)
/usr/lib/ruby/1.9.1/net/http.rb in catch
      res = catch(:response) {
/usr/lib/ruby/1.9.1/net/http.rb in transport_request
      res = catch(:response) {
/usr/lib/ruby/1.9.1/net/http.rb in request
      res = transport_request(req, &block)
/usr/lib/ruby/1.9.1/net/http.rb in request_get
      request(Get.new(path, initheader), &block)
/usr/lib/ruby/1.9.1/net/http.rb in block in get_response
          return http.request_get(uri.request_uri, &block)
/usr/lib/ruby/1.9.1/net/http.rb in start
          return yield(self)
/usr/lib/ruby/1.9.1/net/http.rb in get_response
        new(uri.hostname, uri.port).start {|http|
/home/sinatra/little.rb in block in <top (required)>
    xml = Net::HTTP.get_response(URI.parse('https://itunes.apple.com/gb/rss/topsongs/limit=5/xml')).body
/usr/lib/ruby/1.9.1/webrick/httpserver.rb in service
      si.service(req, res)
/usr/lib/ruby/1.9.1/webrick/httpserver.rb in run
          server.service(req, res)
/usr/lib/ruby/1.9.1/webrick/server.rb in block in start_thread
          block ? block.call(sock) : run(sock) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T17:43:21.717

自己解决了这个问题。原来我使用了错误的 Net:HTTP 命令。本来应该`Net::HTTP.get('itunes.apple.com','/gb/rss/topsongs/limit=10/xml')`

# routes - ServiceStack：路由和参数

> ID：14128684
> 
> 赞同：1
> 
> 时间：2013-01-02T20:28:55.427
> 
> 标签：routes, servicestack

上个月刚发现 ServiceStack，我真的很喜欢使用这个很棒的框架。真的受够了 WCF 设置和静态方法原型！

我有个问题 ！

我创建了一个类：允许使用以下路由显示一个或一个事件列表的事件：

```
[Route("/events")]
[Route("/events/{Id}")]
public class Event
{
    public ushort Id { get; set; }   
    public string FromDate { get; set; }
    public string ToDate { get; set; }
} 
```

但我也想使用相同的路线列出两个日期之间的事件。实际上，该路线仅将 Id 作为参数，但我想添加另一条指定 FromDate 的路线：我认为这样的事情会起作用：/events/01-01-2012/10-01-2012 以便获取两个日期之间的所有事件，但是这没用。

是否可以定义允许基于不同参数（取自 DTO）定义不同路由的路由？

我是管理路线的新手，我真的很想知道如何根据不同的参数定义不同的过滤方式。

谢谢您的帮助 ！很棒的工作德米斯！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T20:43:36.800

怎么样`[Route("/events/from/{FromDate}/to/{ToDate}")]`？

虽然我目前的思维方式会将它们分成两个请求

```
[Route("/events/{Id}")]
public class GetEventById
{
    public ushort Id { get; set; }
}

[Route("/events/between/{FromDate}/{ToDate}")]
public class GetEventsBetweenDates
{   
    public string FromDate { get; set; }
    public string ToDate { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T08:23:09.923

在我的 OnGet() 函数上，我想确定参数是否设置为 NULL。当我添加一个“？” 除了请求数据类型之外，我在尝试访问我的服务时遇到了“错误请求”异常。

这是否意味着所有 REQUEST 参数对于字符串为空，数字为 0，日期为 01-01-000 等，这就是我应该在 OnGet 上测试以确定输入 Querystring 参数的值？

# wordpress - Wordpress query_posts orderby 元查询

> ID：14128685
> 
> 赞同：1
> 
> 时间：2013-01-02T20:29:00.630
> 
> 标签：wordpress, posts

这应该很简单，但我无法找到正确语法的一个很好的例子来做到这一点。

**我想按 meta_queries 过滤我的帖子，但按指定的 meta_key 对它们进行排序。**

当我按原样运行代码时，它会导致无限循环。我只包含了问题代码，其他代码是您运行 query_post 的基本循环代码。

此外，所有 PHP 变量都是正确的，不是问题。

```
 $args2 = array(
            'meta_key' => '_count-views_all',
            //'meta_value' => $id,
            'orderby' => 'meta_value_num',
            'order' => $sortOrder,
            'posts_per_page' => 9,
            'paged' => $paged,
            'meta_query' => array(  
                        'relation' => 'OR',
                        array(
                            'key' => 'contributorid1',
                            'value' => $id,
                            'compare' => '='
                            ),

                        array(
                            'key' => 'contributorid2',
                            'value' => $id,
                            'compare' => '='
                            )
                        )
        );
        $posts = query_posts($args2); 
    } 
```

这是另一个完全没有交叉引用问题的查询。两者在同一页面上运行，但嵌套在 if else 语句中

```
 $args1 = array(
            //'meta_key' => 'contributorid1',
            //'meta_value' => $id,
            'order' => $sortOrder,
            'orderby' => 'title',
            'posts_per_page' => 9,
            'paged' => $paged,
            'meta_query' => array(
                        'relation' => 'OR',
                        array(
                            'key' => 'contributorid1',
                            'value' => $id,
                            'compare' => '='
                            ),

                        array(
                            'key' => 'contributorid2',
                            'value' => $id,
                            'compare' => '='
                            )
                        )
        );
        $posts = query_posts($args1); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T20:48:35.653

The query looks reasonable to me. The only method by which I see this running into an infinite loop is if this query runs within the post loop. When you use query_posts as you are, it will change the state of the global $wp_query, which is used for the pointer in the main posts loop.

If it kept hitting query_posts within the loop, it would continually change the state of the global $wp_query object, and reset the pointer for the current post to the first post of that new query, which would ultimately create the infinite loop.

If this code is being used within the loop, I'd recommend instead using something like

```
$query = new WP_Query($args2);
if ($query->have_posts()) { ... etc; } 
```

If you need to then set up global post data within it, be sure to use `wp_setup_postdata` or `$query->the_post()` and `wp_reset_postdata` or `wp_reset_query` appropriately when you are finished using that post as the global post information.

# android - 从下载的应用程序获取日志信息

> ID：14128690
> 
> 赞同：1
> 
> 时间：2013-01-02T20:29:32.727
> 
> 标签：android, debugging, google-play, logcat

我在谷歌市场上传了一个安卓应用程序。

我被用户报告了一个错误，该错误仅在特定设备中发生。这不是崩溃，应用程序只是无法完全按预期工作。我尝试使用具有他正在使用的确切 android 版本的模拟器重现该错误，并且它工作正常。

如果我可以访问 Logcat 条目，我确信我可以确定问题。

我想答案是否定的，但是用户可以通过任何方式获取这些条目并将它们发送给我吗？（当然我不能告诉他安装 eclipse 或 adb 来收集日志条目）。

将应用程序上传到市场后，从应用程序中获取错误信息的最佳做法是什么？（我并不是说android可以发送错误报告的崩溃，只是它没有按预期工作）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T21:09:01.377

android 市场上有几个应用程序允许获取日志并通过电子邮件发送它们或将它们上传到保管箱......我使用了这个：[https://play.google.com/store/apps/details?id=com。 xtralogic.android.logcollector](https://play.google.com/store/apps/details?id=com.xtralogic.android.logcollector)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T21:48:48.597

应用程序 aLogcat 可以解决问题。

[https://play.google.com/store/apps/details?id=org.jtb.alogcat&feature=nav_result#?t=W251bGwsMSwxLDMsIm9yZy5qdGIuYWxvZ2NhdCJd](https://play.google.com/store/apps/details?id=org.jtb.alogcat&feature=nav_result#?t=W251bGwsMSwxLDMsIm9yZy5qdGIuYWxvZ2NhdCJd)

我在我的 4.1.1 设备上对其进行了测试。

（我不知道如何将其发布为评论而不是答案）

# javascript - 从外部 json 文件中获取对象数组并在 javascript 中存储为数组

> ID：14128700
> 
> 赞同：0
> 
> 时间：2013-01-02T20:29:59.450
> 
> 标签：javascript, jquery, json

如何将 javascript 数组分配给外部 json 文件中的对象数组？

这是我尝试过的。

**JavaScript 代码段**

```
var i = 0;
var testjson = $.getJSON('/TestJSON');
jsonObj = JSON.parse(testjson);

$("#testJSONBtn").click(function () {
    while (i <= jsonObj.events.length) {
        $("#JSONOutput").append(jsonObj.events[i].title + ", " + jsonObj.events[i].date + ", " + jsonObj.events[i].explanation + "<br/>")
        i += 1;
    }
}); 
```

**JSON 文件内容**

```
{
"events":
[
    {"title":"Okmulgee Public Schools Starts 3rd Quarter" , "date":"1-2-2013" , "explanation":"Okmulgee Public Schools begins its third quarter."}
    {"title":"Okmulgee Public Schools-Closed in Observance of Martin Luther King Jr. Holiday" , "date":"1-21-2013" , "explanation":"The Okmulgee Public Schools will be closed in observance of the Martin Luther King Jr. holiday."}
    {"title":"Okmulgee Public Schools County Professional Day" , "date":"2-1-2013" , "explanation":"Okmulgee Public Schools County Professional Day is today."}
]
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T20:32:24.410

AJAX 函数**没有数据返回值**，它们只是返回一个 AJAX 对象。

您需要使用回调。

试试这个：

```
$.getJSON('/TestJSON', function(jsonObj){
    $("#testJSONBtn").click(function () {
        for(var i = 0; i < jsonObj.events.length; ++i) {
            $("#JSONOutput").append(jsonObj.events[i].title + ", " + jsonObj.events[i].date + ", " + jsonObj.events[i].explanation + "<br/>")
        }
    });
}); 
```

更好的：

```
var btn = $("#testJSONBtn"); //cache the element
var output = $("#JSONOutput"); // ^^^
$.getJSON('/TestJSON', function(jsonObj){
    btn.click(function () {
        var val = "";
        for(var i = 0; i < jsonObj.events.length; ++i) {
            val += jsonObj.events[i].title + ", " + jsonObj.events[i].date + ", " + jsonObj.events[i].explanation + "<br/>";
        }
        output.append(val);
    });
}); 
```

* * *

侧点：

我不知道这是否是故意的，但在您的 OP 中，JSON 文件看起来不合法，您缺少逗号。（[来源](https://stackoverflow.com/questions/14128700/get-an-array-of-objects-from-an-external-json-file-and-store-as-an-array-in-java/14128734#comment19560739_14128700)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T20:32:10.727

你的问题在这里：

```
var testjson = $.getJSON('/TestJSON');
jsonObj = JSON.parse(testjson); 
```

`$.getJSON`已经将 JSON 解析为 JavaScript 对象，并将其传递给您的回调。

改用这个：

```
$.getJSON('/TestJSON', function (jsonObj) {
    $("#testJSONBtn").click(function () {
        $.each(jsonObj.events, function (){
             $("#JSONOutput").append(this.title + ", " + this.date + ", " + this.explanation + "<br/>");
        });
    });
}); 
```

**PS**为了性能，请考虑缓存您的选择器，然后一口气将其全部附加。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T21:12:10.623

您的问题的标题表明您希望“从外部 json 文件获取对象数组并在 javascript 中存储为数组”，因此我提出的解决方案涉及将数据存储在数组中。

```
var i;
// Prepare an empty array to store the results
var array = [];
// $.getJSON() is a wrapper for $.ajax(), and it returns a deffered jQuery object
var deferred = $.getJSON('/TestJSON');

deferred.done(function (response) {
    // Any code placed here will be executed if the $.getJSON() method
    // was completed successfully.
    for ( i = 0 ; i < response.length ; i++ ) {
        array.push({ 
            title: response.title, 
            date: response.date,
            explanation: response.explanation
        });
    }
}); 
```

您可以了解有关[$.getJSON()](http://api.jquery.com/jQuery.getJSON/)函数的返回值以及使用[延迟](http://api.jquery.com/category/deferred-object/)对象的更多信息。

# mysql - 在mysql中对大量使用按位

> ID：14128701
> 
> 赞同：1
> 
> 时间：2013-01-02T20:30:06.417
> 
> 标签：mysql, bit-manipulation

我需要存储提供者名称和他们能够提供服务的国家/地区。有 92 个县。我不想存储多达 92 行，而是存储 2^91，所以如果它们仅在 1 和 2 县提供，我会存储 3。

我遇到的问题是最大的数字是`2475880078570760549798248448`，这对于最大的 BigInt 来说太大了。

在过去，当我的选择数量较少时，我能够做类似的事情......

```
SELECT * FROM tblWhatever WHERE my_col & 2; 
```

如果 my_col 存储了 2、3、6 等（任何带有位 2 的内容），它将被找到。

我想我不确定两件事......如何存储以及如何查询是否以 INT 以外的方式存储。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T20:37:24.613

您可以`BINARY(13)`用作存储最多 94 位的数据类型。但是 MySQL 位运算符只支持`BIGINT`64 位。

因此，如果您想使用按位运算符，则必须将您的县位域存储在两`BIGINT`列（或者可能是一列`BIGINT`和一列`INT`）中，并在应用程序代码中确定要搜索的两列中的哪一列。这似乎很尴尬。

但是，我要指出一个性能考虑：使用按位运算符进行搜索不是很有效。您不能使用索引进行搜索，因此每个查询都被迫执行表扫描。随着数据的增长，这将变得越来越昂贵。

`LIKE '%word%'`这与使用 搜索子字符串或使用一个月中的给定日期搜索所有日期相同的问题。

所以我建议毕竟将每个县存储在单独的行中。您不必为每个服务提供商存储 92 行 - 您只需存储与他们服务的县的数量一样多的行。没有一行表示该县没有服务。

# jsp - Struts2中显示表每次迭代后行的唯一名称

> ID：14128702
> 
> 赞同：0
> 
> 时间：2013-01-02T20:30:12.087
> 
> 标签：jsp, struts2, radio-button, displaytag

我正在尝试在 Struts 应用程序中实现调查功能。对于每个调查问题，用户从优秀、非常好、好、满意或差中选择一个选项。

所以，我想要实现的是我需要在 questionList 的每次迭代中都有“唯一名称”，以便用户每个问题只能选择一个选项。

这是我粘贴的jsp部分：

```
<s:form id="screeningForm" action="submitSurvey" >
    <display:table uid="row" name="${questionList}"   >
        <display:column  property="statement" title="STATEMENT" />
        <display:column   title="EXCELLENT" >
            <s:radio name=?? list="{..}"></s:radio>
        </display:column>
        <display:column  title="VERY GOOD">
            <s:radio name=?? list="{..}"></s:radio>
        </display:column>
        <display:column  title="GOOD">
            <s:radio name=?? list="{..}"></s:radio>
        </display:column>
        <display:column   title="SATISFACTORY">
            <s:radio name=?? list="{..}"></s:radio>
        </display:column>
        <display:column  title="POOR">
            <s:radio name=?? list="{..}"></s:radio>
        </display:column>
    </display:table> 
```

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T04:27:22.340

您将为唯一的名称添加索引或计数。像这样

```
<s:iterator status="status" value='{0, 1}'>
      Index: <s:property value="%{#status.index}" /> <br />
      Count: <s:property value="%{#status.count}" /> <br />  
   </s:iterator> 
```

请参阅此[链接](http://struts.apache.org/2.3.4/struts2-core/apidocs/org/apache/struts2/views/jsp/IteratorStatus.html#getCount%28%29)。

希望这对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T15:47:25.883

我通过在操作类 ( ) 中添加一个列表来解决这个问题，并将`private List select;`每个单选按钮命名为`name="select[%{#attr.row_rowNum - 1}]"`

```
<display:table uid="row" name="${questionList}"  requestURI=""  frame="" >
    <display:column  property="statement" title="STATEMENT" />
    <display:column   title="EXCELLENT" >
        <s:radio name="select[%{#attr.row_rowNum - 1}]" theme="simple" list="#{'1':''}"></s:radio>
    </display:column>
    <display:column  title="VERY GOOD">
        <s:radio name="select[%{#attr.row_rowNum - 1}]" theme="simple" list="#{'2':''}"></s:radio>
    </display:column>
    <display:column  title="GOOD">
        <s:radio name="select[%{#attr.row_rowNum - 1}]" theme="simple" list="#{'3':''}" ></s:radio>
    </display:column>
    <display:column   title="SATISFACTORY">
        <s:radio name="select[%{#attr.row_rowNum - 1}]"  theme="simple" list="#{'4':''}" ></s:radio>
    </display:column>
    <display:column  title="POOR">
        <s:radio name="select[%{#attr.row_rowNum - 1}]" theme="simple" list="#{'5':''}"></s:radio>
    </display:column>
</display:table> 
```

# database - 同步数据库和外部支付服务

> ID：14128703
> 
> 赞同：1
> 
> 时间：2013-01-02T20:30:18.667
> 
> 标签：database, finance, currency

是否有任何与处理重要财务操作相关的“设计模式”，以便本地数据库不会因为某些错误而变得不同步？

*例子：*

在本地数据库中创建金融交易记录，然后向远程支付 API 端点发送请求以向客户收费。伪代码：

```
record = TransactionRecord.create(timestamp=DateTime.now, amount=billed_amount, status=Processing)
response = Request.post(url=remote_url, data=record.post_data)
if response.ok:
    record.mark_as_ok()
else:
    record.mark_failed() 
```

现在，即使我处理了可以由远程支付服务返回的错误，许多其他不好的事情仍然可能发生：数据库服务器可能会关闭，网络连接可能会关闭等，在任意时间点。

在上面的代码中，数据库服务器可能在创建交易记录后立即变得不可访问，因此即使金融交易本身已由远程服务成功执行，也可能无法将该记录标记为正常。换句话说：向客户收费，但我们没有预订..

这可以通过多种方式解决 - 通过定期与远程服务同步，通过调查`TransactionReturn`正在处理但早于例如 10 分钟或一小时的 -s。

但我的问题是，是否有一些成熟的模式来处理这种情况（涉及金钱，所以一切都应该“一直”正常工作）？

PS。我不确定我应该为这个问题使用什么标签，请随时重新标记它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T20:45:24.973

我认为没有任何“设计模式”可以解决您的场景中发生的数据库连接断开或网络连接断开等情况。这两种情况中的任何一种都是重大故障事件，很可能需要人工干预。

除了通过进行适当的错误检查、提供适当的通知以支持和自动禁用不起作用的功能（如果应用程序检测到支付服务已关闭，则“提交支付”按钮应该被禁用）。

如果您进行正确的错误处理和状态管理，您将能够显着减少支持。在您的情况下，事务记录必须将其状态从 Pending -> Submitted -> Processed 或 Rejected 或类似的东西更改。

此外，并非每个服务都提供同步功能。

# ruby-on-rails - 如何修复 mailcatcher 550 错误？

> ID：14128705
> 
> 赞同：1
> 
> 时间：2013-01-02T20:30:21.797
> 
> 标签：ruby-on-rails, email

我正在运行[mailcatcher](http://mailcatcher.me/)以查看通过 smtp 在 Rails 项目上发送的邮件，但是在我的机器上，当我发送电子邮件时，我收到了：

```
Net::SMTPFatalError (550 Message rejected) 
```

该消息仍显示在 mailcatcher 中，但看起来文本显示为附件而不是 html。

如果我在前台以详细模式运行 mailcatcher `mailcatcher -f -v`，我会得到以下堆栈跟踪：

```
 Exception: undefined method `match' for nil:NilClass
    Backtrace:
       /Users/matt/.rvm/gems/ruby-1.9.3-p194@merchant_messaging/gems/mail-2.4.4/lib/mail/utilities.rb:104:in `unbracket'
       /Users/matt/.rvm/gems/ruby-1.9.3-p194@merchant_messaging/gems/mail-2.4.4/lib/mail/part.rb:29:in `cid'
       /Users/matt/.rvm/gems/ruby-1.9.3-p194@merchant_messaging/gems/mailcatcher-0.5.10/lib/mail_catcher/mail.rb:51:in `block in add_message'
       /Users/matt/.rvm/gems/ruby-1.9.3-p194@merchant_messaging/gems/mailcatcher-0.5.10/lib/mail_catcher/mail.rb:48:in `each'
       /Users/matt/.rvm/gems/ruby-1.9.3-p194@merchant_messaging/gems/mailcatcher-0.5.10/lib/mail_catcher/mail.rb:48:in `add_message'
       /Users/matt/.rvm/gems/ruby-1.9.3-p194@merchant_messaging/gems/mailcatcher-0.5.10/lib/mail_catcher/smtp.rb:45:in `receive_message'
       /Users/matt/.rvm/gems/ruby-1.9.3-p194@merchant_messaging/gems/eventmachine-1.0.0/lib/em/protocols/smtpserver.rb:532:in `process_data_line'
       /Users/matt/.rvm/gems/ruby-1.9.3-p194@merchant_messaging/gems/eventmachine-1.0.0/lib/em/protocols/smtpserver.rb:196:in `receive_line'
       /Users/matt/.rvm/gems/ruby-1.9.3-p194@merchant_messaging/gems/eventmachine-1.0.0/lib/em/protocols/linetext2.rb:64:in `receive_data'
       /Users/matt/.rvm/gems/ruby-1.9.3-p194@merchant_messaging/gems/eventmachine-1.0.0/lib/em/protocols/linetext2.rb:65:in `receive_data'
       /Users/matt/.rvm/gems/ruby-1.9.3-p194@merchant_messaging/gems/eventmachine-1.0.0/lib/em/protocols/linetext2.rb:65:in `receive_data'
       /Users/matt/.rvm/gems/ruby-1.9.3-p194@merchant_messaging/gems/eventmachine-1.0.0/lib/em/protocols/linetext2.rb:65:in `receive_data'
       /Users/matt/.rvm/gems/ruby-1.9.3-p194@merchant_messaging/gems/eventmachine-1.0.0/lib/em/protocols/linetext2.rb:65:in `receive_data'
       /Users/matt/.rvm/gems/ruby-1.9.3-p194@merchant_messaging/gems/eventmachine-1.0.0/lib/eventmachine.rb:187:in `run_machine'
       /Users/matt/.rvm/gems/ruby-1.9.3-p194@merchant_messaging/gems/eventmachine-1.0.0/lib/eventmachine.rb:187:in `run'
       /Users/matt/.rvm/gems/ruby-1.9.3-p194@merchant_messaging/gems/mailcatcher-0.5.10/lib/mail_catcher.rb:134:in `run!'
       /Users/matt/.rvm/gems/ruby-1.9.3-p194@merchant_messaging/gems/mailcatcher-0.5.10/bin/mailcatcher:4:in `<top (required)>'
       /Users/matt/.rvm/gems/ruby-1.9.3-p194@merchant_messaging/bin/mailcatcher:19:in `load'
       /Users/matt/.rvm/gems/ruby-1.9.3-p194@merchant_messaging/bin/mailcatcher:19:in `<main>' 
```

显然我不是唯一一个有这个问题的人。有关更多信息，请参阅此 github 问题[https://github.com/sj26/mailcatcher/issues/73](https://github.com/sj26/mailcatcher/issues/73)。

# cocoa - - (NSWindow *)window 不能在 loadWindow 时显示窗口

> ID：14128710
> 
> 赞同：1
> 
> 时间：2013-01-02T20:30:40.423
> 
> 标签：cocoa, nswindowcontroller

我试图在我的 MainMenu.xib 中按下一个按钮时打开一个名为 EasyWindow.xib 的 nib 文件。我将按钮连接到此 IBAction 方法，但是当我单击该按钮时，它没有打开。当我将此初始化部分中的“窗口”更改为“loadWindow”时，它工作得非常好，但是 Mac 开发人员库说“你永远不应该直接调用这个方法”。如何使窗口方法起作用？

```
- (IBAction)loadEasyWindow:(id)sender
{
    [[[NSWindowController alloc] initWithWindowNibName:@"EasyWindow"] window];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T01:40:29.703

`- (NSWindow *)window`只为您提供对管理的实际窗口对象的引用`NSWindowController`。它实际上并没有对那个窗口做任何事情。它更像是一个吸气剂。

同时，`-loadWindow`当您的程序实际从 nib 文件加载窗口时调用的方法与打开、关闭和显示窗口几乎没有关系。这就是为什么你不应该调用它。我猜它会起作用，因为副作用是窗口显示自己。

您正在寻找的可能`NSWindowController`是`- (IBAction)showWindow:(id)sender`. [[参考]](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSWindowController_Class/Reference/Reference.html#//apple_ref/doc/uid/20000031-showWindow_)它应该完全符合您的要求：

> 显示与接收器关联的窗口

# flash-builder - Flash Builder 4.7 损坏的工作区

> ID：14128711
> 
> 赞同：1
> 
> 时间：2013-01-02T20:31:00.660
> 
> 标签：flash-builder, corruption

在 OS 10.8.2 和使用最新的 Flash Builder 4.7 上，我似乎不能多过几天就会遇到编译错误。

90% 的时间这些都与我的工作空间变得腐败有关。

修复起来很简单，但是每次创建新工作区时都必须重新应用我的所有设置、插件等，这很痛苦。

任何人都可以提出任何避免工作空间腐败的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T16:09:09.657

很好的问题，我真的希望有人能回答它。与此同时，我找到了一种从崩溃中恢复的方法，而无需重新构建所有项目配置等，这非常乏味。这是在 OSX 10.8.4、Flash Builder 4.5 上，希望它也适用于 FB 4.7...

*   确保FB关闭
*   将所有项目文件移出 {workspace_fb}.metadata/.plugins/org.eclipse.core.resources/.projects 文件夹。
*   启动 FB 然后再次关闭它。
*   将项目文件夹移回 .projects 文件夹。
*   开始FB。

# yui - 是否可以在 Liferay 中升级 YUI 的版本？

> ID：14128712
> 
> 赞同：0
> 
> 时间：2013-01-02T20:31:01.403
> 
> 标签：yui, liferay-6

我正在使用 Liferay 6.1.1GA2，其中包括 YUI 3.4.0。截至本文发布时，YUI 库当前版本为 3.8.0。

有没有办法在 Liferay 中升级这个库，这样我就不必在我部署的每个 portlet 中包含更新的版本？我可以看到在 Liferay 版本之上包含当前版本会很快[导致问题。](https://www.liferay.com/forums/-/message_boards/message/11071590/maximized)

# asp.net-mvc - 有没有办法可以使用 Model 类过滤值？

> ID：14128715
> 
> 赞同：0
> 
> 时间：2013-01-02T20:31:29.130
> 
> 标签：asp.net-mvc, linq, razor, model, querying

我是 ASP.NET MVC4 的新手，我有一个搜索/过滤器表单，您可以在其中过滤多个参数

所以这是我的控制器

```
public ActionResult Index(string page, int? neighborhoodID, int? accommodationType) {
...
} 
```

我刚在想。我正在使用 Model 类为我的登录/注册使用数据注释和验证。

有没有办法可以使用 Model 类过滤值？

现在我只查看请求的参数并在我的 linq 查询中使用它们来获取过滤后的记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T02:02:50.353

我认为你应该创建一个`IndexViewModel`类

```
public class IndexViewModel
{
    public int? NeighbourhoodId { get; set; }
    public int? AccomodationType { get; set; }  
} 
```

然后添加`@model IndexViewModel`到您的视图顶部

似乎来自下拉列表，因此将 viewModel 属性映射到这些下拉`neigbourhoodId`列表`accomodationType`

然后控制器方法将是这样的：

```
public ActionResult Index(string page, IndexViewModel model) 
{
    // You can use model.NeighbourhoodId and model.AccomodationType the same way you did with parameters
} 
```

# javascript - 下载附件后onbeforeunload不起作用

> ID：14128716
> 
> 赞同：1
> 
> 时间：2013-01-02T20:31:29.067
> 
> 标签：javascript

我有一个 jsp 页面 home.jsp，它分为两个框架 Header 和 Content。在我的内容框架中，我有一个链接，它调用这样的 servlet

```
<a href="downloadAttach">download</a> 
```

JavaScript 函数 doloadAttach 具有以下行：

```
window.location="RetrieveFile.display"; 
```

RetrieveFile 是一个 servlet，它从共享位置获取文档并将其写入输出流，以便我可以选择保存/取消/打开附件

此外，内容框架中的所有页面都有以下代码行，以确保页面不缓存在浏览器中：

```
window.onbeforeunload=function(){window.location.replace("<%= request.getcontextPath()%>/home.jsp")} 
```

此外，我的 home.jsp 中有以下脚本，以确保在卸载 home.jsp 时显示警告消息。脚本是这样的：

```
window.onbeforeunload=function(){return "sure you want to go away"}; 
```

现在假设我在google然后移动到home.jsp，然后点击下载附件链接。附件已正确下载。之后，我对导致页面刷新的 jsp 执行任何操作，例如提交表单或关闭表单，然后按浏览器返回，我的 home.jsp 卸载并且我被带到谷歌，并且弹出消息没有显示。如果我执行完全相同的步骤并刷新或关闭浏览器，则会出现消息。我还尝试在 servlet 中设置标头以进行缓存控制，但没有任何区别。我用的是ie8

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-13T21:04:42.633

我发现这个 Jquery 适用于我的类似问题：

```
$(window).bind('beforeunload', function() { 
 return "sure you want to go away";
}); 
```

# jquery - 获得对启动 jQuery 对话框的按钮的引用

> ID：14128717
> 
> 赞同：3
> 
> 时间：2013-01-02T20:31:30.540
> 
> 标签：jquery, jquery-ui, button

我有一个页面，其中包含动态生成的可变数量的表。每个表都列出了一组用户可以添加/编辑/删除的“产品”。每张桌子下面都有一个按钮。我希望每个按钮将其上方表格中的产品保存到一个“包”中，这只是一组产品。单击该按钮时，我希望它启动一个 jQuery 对话框表单，用户可以在其中输入他们正在创建的包的名称和描述。

有没有办法让我在对话框的“按钮”功能范围内首先引用启动 jQuery 对话框的按钮？这样，当用户单击对话框中的“保存”按钮时，我既可以提交对话框本身包含的表单（名称和描述），也可以提交页面中最近的表格中包含的产品数据用户单击以启动表单的特定按钮的标记？

**编辑：**我忘了提到整个页面（所有表格）已经包含在一个表单元素中。这是因为用户还可以将三个表中的所有产品保存为“机会”，即一组产品组。这是一个显示布局的小伪 html：

```
<form>
    <table>
    </table>
    <table>
    </table>
    <table>
    </table>
</form> 
```

为了允许用户将所有表中的所有产品保存到“机会”，我需要将所有三个表都包裹在一个表单标签中。但是，当用户单击特定表下的“保存包”按钮时，我只想提交该表中的数据以及用户在对话框中输入的名称和描述。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T21:54:59.410

在 js 中定义一个全局变量，如果单击其中一个按钮，则设置其值。
在本例中，使用了“id”。

```
$('.button').click(function(){
   id = $(this).index();
   $('#dialog').fadeIn('1000');
    return false;
}); 
```

也许这会有所帮助：http:
[//jsfiddle.net/Vm7PL/1/](http://jsfiddle.net/Vm7PL/1/)

您也可以使用 jquery-ui 对话框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T21:26:46.310

不确定您使用的是什么类型的按钮，但这里是标准的 html 输入提交按钮

```
$(document).ready(function () {
    $("input[type='submit']").click(function () {
        var btn = $(this);

        //get the TR the button is in
        var tr = btn.parent().parent(); // first parent will be the TD, second will be TR, third would be the TABLE

        // find other elements in the TR
        tr.find('#someElement').each(function(){
            //do something with the elements
         });
    });
}); 
```

# joomla - jUpgrade Extension 在更新到 Joomla 2.5.8 期间卡住

> ID：14128719
> 
> 赞同：1
> 
> 时间：2013-01-02T20:31:44.630
> 
> 标签：joomla, joomla2.5, joomla1.5, joomla-extensions

**我对 Joomla 的jUpgrade**扩展有问题。我有一个内置于 Joomla 1.5.26 的网站，我希望将其升级到 Joomla 2.5.8。我正在使用**jUpgrade**。当我点击开始升级时，它开始并下载并解压缩内容，但它卡在迁移过程中。这个快照更好地显示了我想说的，见下文：

![在此处输入图像描述](../Images/59cb3e8438b478b7c5efa25c0f3b86fd.png)

我在 xampp 中启用了 curl。并且还清除我的缓存并重新启动服务器。我尝试过的所有事情都等待它至少 30 分钟，但没有任何反应。任何人都可以建议如何解决这个问题。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T04:20:29.280

您是否在插件管理器中启用了 mootools？

您正在使用哪个浏览器进行此过程。请使用 chrome。因为它可能发生在其他浏览器中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T04:41:41.090

首先卸载 jupgrade，然后删除表 jupgrade_categories、jupgrade_menus、jupgrade_modules、jupgrade_steps。同时删除新 joomla 创建的所有表，然后清除缓存并安装 jupgrade 插件。点击升级中的设置按钮然后设置

跳过检查 - 是，启用迁移调试 - 是，启用 Mootools 版本调试 - 是

然后开始升级......

我认为这会奏效...

# ruby-on-rails - 如何正确地将集合选择放在 form_tag 中？

> ID：14128721
> 
> 赞同：3
> 
> 时间：2013-01-02T20:31:46.557
> 
> 标签：ruby-on-rails, ruby-on-rails-3, view

我有一个名为**Genre的模型**

里面已经有很多记录了。
我试图从流派表中获取所有记录，并在选择中显示它们。请参阅下面我在我的视图中编码的内容。
但这会返回这样的错误。我该如何解决这个问题？

> :id:Symbol 的未定义方法“map”

**我的观点**

```
 <%= form_tag communities_path, :method => :get, :class => 'form-search' do %>
   <div class="input-append">
    <%= form.collection_select :id, Genre.all, :id, :name %>
    <button type="submit" class="btn">Search</button>
   </div>
  <% end %> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-02T21:26:53.430

`collection_select`需要一个标识符作为第一个参数，并且在提供的示例`form`中未设置变量。因此代码应为：

```
<%= form_tag communities_path, :method => :get, :class => 'form-search' do %>
 <div class="input-append">
  <%= collection_select :genre, :id, Genre.all, :id, :name %>
  <button type="submit" class="btn">Search</button>
 </div>
<% end %> 
```

# java - Eclipse——进度窗口不再显示

> ID：14128723
> 
> 赞同：14
> 
> 时间：2013-01-02T20:31:53.523
> 
> 标签：java, eclipse

我曾经在它们自己的单独窗口中看到构建和清洁操作，我可以等待它们完成后再继续。几周前我一定是点击了“在后台运行”，因为现在进度只出现在一个小的、模糊的进度视图中。

![不太好。](../Images/80c3edbbaeaf1df2e52dd7d826d666dd.png)

如何设置 Java Build 和 Clean 之类的进度以再次出现在弹出对话框中？

![好的。](../Images/494829f6f2c022e579781c16c2c6f8a0.png)

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-02T20:34:55.003

打开 Eclipse Preferences，`General`你会看到`Always run in background`，取消选中它，你应该没问题。

![在此处输入图像描述](../Images/ea57a9a3ea3efa51a99342f58c94208c.png)

# javascript - document.getElementById() 不起作用 - 可能是因为页面尚未加载？

> ID：14128727
> 
> 赞同：1
> 
> 时间：2013-01-02T20:32:09.877
> 
> 标签：javascript

> **可能重复：**
> [为什么 jQuery 或诸如 `getElementByID` 之类的 DOM 方法找不到元素？](https://stackoverflow.com/questions/14028959/why-does-jquery-or-a-dom-method-such-as-getelementbyid-not-find-the-element)

在 HTML 标记之前，我运行了一些 php 代码。在此期间，我需要包含一些 javascript 行，例如

```
..php code...
..javascript code...
..php code..
<html>
<head>
</head>
<body>
<input type="file" name="file" id="file">
</body>
</html> 
```

在 javascript 代码中，我想隐藏文件元素。

这没有任何作用：

```
..php code
?>
<SCRIPT LANGUAGE="JavaScript">
 document.getElementById('file').style.display = 'none';
</script>
<?php 
```

...php代码

如果我在那里发出警报，则会**显示**。

如果我将该行放入`<head></head>`块中的一个函数中并从例如按钮的 onClick 事件中调用它，则文件元素将被隐藏，因此该行很好。也许`document.getLementByID`在 html 标签之外是无效的？或者问题可能是页面尚未加载，因此没有具有该 ID 的元素？如果是这种情况，我该怎么办？

**解决方案**

我在 php 代码中添加了一个变量 $int = 1; （和 $int = 0; 其他地方，但仍然在页面加载之前）。然后在`<head></head>`块中：

```
window.onload = selectChoose;
function selectChoose() 
{
    if (<?php echo $int ?> == 0) {
        showChoose();
    }
    else {
        hideChoose();
    }
}

function showChoose() 
{
    document.getElementById('file').style.display = 'inline';
}

function hideChoose() 
{
    document.getElementById('file').style.display = 'none';
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T20:35:15.770

就像你说的那样，它只是还没有加载。

影响特定元素的 JavaScript 必须被延迟（`window.onload`在事件​​处理程序上，等等），或者放在它试图修改的元素*之后。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T20:39:07.307

Window onload 将为您解决这个问题。像这样：

```
window.onload = function(){
     document.getElementById('file').style.display = 'none';
    } 
```

这意味着一旦加载了整个站点`then`，它将执行 style.display 命令:)

# encoding - 什么字符编码的 e 带有 0xCCA9 的重音？

> ID：14128729
> 
> 赞同：3
> 
> 时间：2013-01-02T20:32:11.167
> 
> 标签：encoding, character-encoding

我正在尝试读取文件，但无法弄清楚字符编码。文件中有两个我知道值的字符，我在十六进制编辑器中看到的十六进制值如下：

```
0xCCA9  é
0xCCBB  ê
0xCCC1  á 
```

任何想法这是什么编码？

所有英文字符在文件中都是 ASCII 编码的。如果有任何用处，我有类似的文件在mac中欧编码，也许它们被不小心编码了不止一次。

**编辑：**

在 Python 2.7 中查找映射的代码：（参见上面 Esailija 的回答）。

`find_mappings(...)`是一个生成器，它被赋予了一个字符映射字典。它遍历所有可用的字符集并产生符合条件的字符集。

```
import pkgutil
import encodings

def get_encodings():
    false_positives = set(["aliases"])
    found = set(name for imp, name, ispkg in pkgutil.iter_modules(encodings.__path__) if not ispkg)
    found.difference_update(false_positives)
    return found

def find_mappings(maps):
    encodings = sorted(get_encodings())
    for f in encodings:
        for g in encodings:
            try:
                if all([k.decode(f).encode(g) == v for k,v in maps.items()]):
                    yield (f,g)
            except:
                # Couldn't encode/decode
                pass

for mapping in find_mappings({'\xCC': '\xC3', '\xBB': '\xAA', '\xA9': '\xA9', '\xC1': '\xA1'}):
    print(mapping) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T15:20:09.420

它不是任何编码，而是混乱的编码转换的结果。在 UTF-8 中会如何：

```
0xC3A9  é
0xC3AA  ê
0xC3A1  á 
```

所以我认为最初发生的事情是 UTF-8 数据在 ASCII 兼容的代码页 X 中处理，然后将结果编码到 Mac 中欧的文件中。

要获取原始数据，您将在 Mac Central Europe 中解释文件，在代码页 X 中重新编码结果，并在 UTF-8 中解释重新编码的结果。

我不知道代码页 X 是什么，但鉴于上述情况属实，它必须具有以下属性：

*   编码`©`为`0xA9`; 与 Mac、Windows 和 ISO 编码相同
*   编码`Ő`为`0xC3`; 排除任何 DOS 代码页
*   编码`Ľ`为`0xAA`
*   编码`Ń`为`0xA1`
*   是否兼容 ASCII；排除任何 EBCDIC 代码页

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T20:55:29.770

在我的计算机中，没有映射到这些字符的编码，但是您可以在您的计算机中尝试以下程序，它应该会告诉您是否有任何匹配的编码：

```
public class StackOverflow_14128729
{
    public static void Test()
    {
        string expectedString = "éêá";
        byte[] dataBigEndian = new byte[] { 0xCC, 0xA9, 0xCC, 0xBB, 0xCC, 0xC1 };
        byte[] dataLittleEndian = new byte[] { 0xA9, 0xCC, 0xBB, 0xCC, 0xC1, 0xCC };
        byte[] shortData = new byte[] { 0xA9, 0xBB, 0xC1 };
        bool found = false;
        foreach (var encodingInfo in Encoding.GetEncodings())
        {
            Encoding encoding = encodingInfo.GetEncoding();
            foreach (var data in new byte[][] { dataLittleEndian, dataBigEndian, shortData })
            {
                try
                {
                    string str = encoding.GetString(data);
                    if (str == expectedString)
                    {
                        Console.WriteLine("Encoding is {0} - {1} - {2}", encodingInfo.CodePage, encodingInfo.Name, encodingInfo.DisplayName);
                        found = true;
                        break;
                    }
                }
                catch (Exception)
                {
                    // not this one, try next
                }
            }

            if (found)
            {
                break;
            }
            else
            {
                byte[] bytes = encoding.GetBytes(expectedString);
                string byteString = string.Join(" ", bytes.Select(b => string.Format("0x{0:X2}", (int)b)));
                //Console.WriteLine("{0} - {1}", encodingInfo.CodePage, byteString);
            }
        }

        if (!found)
        {
            Console.WriteLine("Encoding not found");
        }
    }
} 
```

# visual-studio-2010 - 重新建立 TFS 源代码控制绑定

> ID：14128730
> 
> 赞同：66
> 
> 时间：2013-01-02T20:32:13.523
> 
> 标签：visual-studio-2010, version-control, tfs

我有十几个我一直在处理的 Visual Studio 2010 项目在 TFS 存储库中进行版本控制。最近我去度假并将我的电脑操作系统升级到 Windows 7 64 位。

我已经重新安装了 Visual Studio，并且可以连接到我的 Team Foundation Server 并查看我的项目……只是我的绑定无法正常工作。大多数时候，我的所有文件似乎都不受源代码控制，但在几个项目中，我的源代码控制绑定在根文件夹中正常，但在项目根目录下的子文件夹中不起作用。

我试过撤消绑定，从源代码管理打开，删除文件夹并获取最新版本。这些都没有解决问题。

关于恢复我的绑定有什么想法吗？

**更新**

在四处寻找之后，我可以看到在我的“无效”项目的路径中似乎有一个额外的文件夹......我不知道它是如何进入那里的，但这似乎正在抛弃我的映射。

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2013-01-02T20:49:49.290

您说您已尝试撤消绑定，但您是否尝试重新绑定回源代码控制？

在 Visual Studio 中：

*   打开有问题的解决方案
*   在解决方案资源管理器中选择解决方案
*   选择**File->Source Control->Change Source Control**
    Visual Studio 2013/2015：**File->Source Control->Advanced->Change Source Control**
*   取消绑定任何已绑定但无法正常工作的项目。
*   绑定所有现在未绑定的项目。

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2014-04-11T11:06:32.890

当您的绑定无效并且解除绑定/绑定项目不起作用时，请尝试以下操作：

1.  在 Change Source Control 中取消绑定项目
2.  在解决方案资源管理器中卸载项目（对于网站项目，“卸载项目”不在上下文菜单中，而是在“网站”菜单中）
3.  在解决方案资源管理器中重新加载项目

一直为我工作...

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-01-02T22:40:51.990

我同意乔尔的观点——通常解除绑定和重新绑定会修复它。

但是，如果重新绑定不起作用，您可以尝试直接编辑解决方案文件。我见过两次 TFS 绑定在解决方案文件中的实例，并且无论出于何种原因似乎都不准确 - 他们可能有错误的项目数量和设置为空但仍列在解决方案文件中的项目。

当这种情况发生时（非常罕见），我会编辑文件并按照应有的方式制作它们。例如，我将删除第二组 TFS 绑定 (GlobalSection(TeamFoundationVersionControl) 或修复我看到的任何其他差异。然后我重新加载解决方案，这通常可以解决问题。我肯定只会使用该修复作为最后的手段尽管。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-11-17T13:59:56.670

当我第一次在新安装的 Visual Studio 中打开现有（并且以前工作的）解决方案时，我看到了这个问题，并带有一个新制作的工作区。

解除绑定和重新绑定并没有解决我的问题。但是当我做了一个获取最新版本时它就消失了。TFS 将文件显示为冲突，我通过覆盖本地副本解决了冲突。然后将先前无效的绑定显示为有效。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-10-15T12:14:42.123

如果您仍在与 TFS 绑定无效状态作斗争，我在这里报告我在旧的（2005 年）MSDN 论坛（[https://social.msdn.microsoft.com/Forums/en-US/801b2490 ）中找到的“宝石” -776d-43a8-afef-adcedd78f02d/vsts-change-source-control-status-invalid?forum=tfsgeneral](https://social.msdn.microsoft.com/Forums/en-US/801b2490-776d-43a8-afef-adcedd78f02d/vsts-change-source-control-status-invalid?forum=tfsgeneral)）：

> 这是由于在验证代码中用于绑定的启发式方法。启发式对项目中的所有文件进行存在性检查，并且仅在源代码控制存储库中存在至少一半文件时才返回“有效”。由于 Web 项目没有项目文件，因此驻留在 Web 项目文件夹中的任何文件都被视为“项目的一部分”。显然，您有足够的非受控文件将受控项目文件的百分比倾斜到 50% 以下，从而导致无效状态。

换句话说，如果您的项目中有许多不受控制的文件（当您选择退出签入 web 项目中的 node_modules 或 public 等文件夹时尤其如此）并且这些文件的数量超过 50%文件夹中的文件总数，无论您做什么，TFS 绑定状态都是**无效的。**

我可以验证此规则，只需删除正确数量的文件，直到绑定状态变为无效，然后添加一个新文件（不受控制）即可获得无效状态。

此行为在 VS 2019 6.3 (Azure DevOps) 中仍然存在。

我不知道是否有办法禁用这种启发式，但我很确定这是一个假的无效状态，即 tfs 绑定实际上工作正常，这只是一个错误消息。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-11-29T20:25:20.157

我将在此处添加此内容，因为我遇到了此内容的变体并且必须自己找到解决方案。

**TLDR::**
**1)**确保项目未绑定。
**2）**手动选择项目的所有文件并将它们添加到源控制（不是项目本身） - 这应该在 TFS 下创建有问题的项目的根文件夹
**3）**在源控制资源管理器中，导航到有问题的项目的根文件夹并手动添加其 .csproj 到源代码控制

以及我如何/为什么到达那里的完整故事：

如果以上所有答案都不起作用（* adospace 的答案可能与此有关 - 但我不太明白：P）

我的解决方案中有 9 个项目中有 2 个是纯资源项目。当我将整个东西带入 tfs 并将其映射到源代码控制时，它们将坚决保留无效绑定（只是两个资源项目），我没有修复它。当我最终尝试手动将项目单个文件添加到 tfs（.resx）时，TFS 会发出有关文件被忽略的警告，就像 .exes 一样，这是它在添加 - 重新映射 - 修复我的解决方案时从未做过的事情。该警告允许我将文件添加到 TFS 中，同时它创建了完整的项目文件夹结构，而项目本身仍然坚决未绑定。但是从那里我能够手动将每个 .csproj 添加到 TFS 并且神奇地这些项目现在已正确绑定并处于源代码控制之下。一世'

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-07-09T13:10:33.133

当我重命名我的解决方案时，我也遇到了这个错误。我尝试了以上所有方法，但并没有解决问题。

**对我来说，实际解决方案是使用新的解决方案名称编辑构建定义**

1.  我的构建 > 右键单击​​构建定义 > 编辑我的构建定义 > 流程
2.  请注意，“1\. 必需 > 构建解决方案”是指旧的解决方案名称。
3.  单击“构建解决方案”旁边的“...”，
4.  找到您的新解决方案。点击它
5.  保存构建定义
6.  重建

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-06-01T11:12:33.943

有完全相同的问题，但后来在 Visual Studio 2017 中。

解除绑定和重新绑定对我不起作用。最后，我通过取消绑定解决方案中的所有项目 + 解决方案文件本身来解决它，然后为整个分支执行“获取最新版本”。这导致了一系列冲突：'本地已存在同名的非版本控制文件或可写文件'。通过选择“覆盖本地文件管理器或文件夹选项”解决了这些错误最后这为我解决了

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-10-17T13:20:55.773

我在这里看到许多提供不同解决方案的答案。我过去曾发生过几次这种情况，通常解除绑定/重新绑定就可以了。但是，我最近刚刚解决了这个问题，但似乎没有任何效果。

所以，我只是删除了我机器上的解决方案目录，然后从源代码中获取最新的。像魅力一样工作。但是，我的所有更改都已签入，因此我不必担心丢失任何东西。YMMV。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2016-07-04T20:23:08.813

确保您的解决方案已添加到源代码管理：文件 > 源代码管理 > 将解决方案添加到源代码管理。

# facebook - 如何通过图形资源管理器为页面检索长期访问令牌？

> ID：14128732
> 
> 赞同：0
> 
> 时间：2013-01-02T20:32:18.567
> 
> 标签：facebook, facebook-graph-api, facebook-php-sdk, facebook-access-token

我想允许应用程序作为页面发布，所以我使用图形 api 来获取页面的访问令牌，但它有一个小时的有效期。

有没有办法通过图形 api 检索长期访问令牌？

PS 我尝试使用端点将短期访问令牌与长期令牌交换，并收到 OAuth 错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T21:07:12.610

您可以为您的粉丝页面设置一个永不过期的令牌。遵循简单的步骤：

1.  获取管理员（即您的）扩展令牌（有效期为 2 个月）。通过链接获取扩展令牌。完美工作：

    [自offline_access弃用以来如何延长访问令牌的有效性](https://stackoverflow.com/questions/8982025/how-to-extend-access-token-validity-since-offline-access-deprecation/9035036#9035036)

2.  使用此令牌，获取页面/应用程序列表-

    ```
    $facebook->api("/USER_ID/accounts"); 
    ```

3.  获取任何页面的永不过期的访问令牌-

    ```
    $facebook->api("/PAGE_ID?fields=access_token"); 
    ```

（您可以使用[Facebook 的调试工具](https://developers.facebook.com/tools/debug)来检查令牌的有效性。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-29T09:52:50.940

**您可以通过以下代码获得 60 天的 access_token。**

```
$user = $facebook->getUser(); 
$facebook->setExtendedAccessToken(); //long-live access_token 60 days
$access_token = $facebook->getAccessToken(); 
```

# c# - 使用正则表达式检查字符串的格式是否与所需的格式匹配

> ID：14128733
> 
> 赞同：1
> 
> 时间：2013-01-02T20:32:21.900
> 
> 标签：c#, regex, string, visual-studio-2010

我正在尝试编写将采用给定字符串并将其与某种格式进行比较的代码。这就是我正在使用的：

```
private static readonly Regex phoneNumber = new Regex(@"\d{3}-\d{3}-\d{4}");

public static bool VerifyPhoneNumber(string pNumber)
{
    return phoneNumber.IsMatch(pNumber);
} 
```

格式为`000-000-0000`，与 比较时返回 true `555-555-5555`。我也有一个`MessageBox`显示`pNumber`和`phoneNumber`比较的目的。消息框显示：`pNumber = 555-555-5555`和`phoneNumber = \d{3}-\d{3}\d{4}`

但这不是我想要的格式。我想使用这种格式（000）000-0000。为了使用这种格式，我将 phoneNumber 更改为：

```
private static readonly Regex phoneNumber = new Regex("(" + @"\d{3}" +  ")" + @"\d{3}-\d{4}"); 
```

但是当我运行这段代码并与之比较`(555)555-5555`时，它返回 false。`MessageBox`为此显示：`pNumber = (555)555-5555`和`phoneNumber = (\d{3})\d{3}-\d{4}`

现在我还不够了解`Regex`自己解决这个问题。根据我迄今为止的研究， () 导致了这个问题。我相信它是因为 () 用于正则表达式而破折号不是。所以，破折号不会搞砸任何事情。我的问题是如何更改代码以满足我的需要？如何在没有问题的情况下获得代码中的 ()？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T20:35:39.840

`\(`用and转义括号`\)`。

```
private static readonly Regex phoneNumber = new Regex(@"\(\d{3}\)\d{3}-\d{4}"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T20:35:53.070

"(" 对于正则表达式是特殊的。如果您要匹配文字括号，请确保它前面有一个反斜杠。

# c++ - 如何忽略 LNK2038（定义不匹配）？

> ID：14128739
> 
> 赞同：2
> 
> 时间：2013-01-02T20:32:32.737
> 
> 标签：c++, visual-studio, linker-errors

> **可能重复：**
> [LNK2038，迭代器不匹配错误，需要忽略](https://stackoverflow.com/questions/7572636/lnk2038-iterator-mismatch-error-need-to-ignore)

我有一个第三方静态库，它也与 C/C++ 运行时静态链接。我只有这个库的发布版本。

当我尝试将此库链接到我的应用程序的调试版本时，链接器抱怨静态库 (0) 的迭代器调试级别与我的应用程序 (2) 的级别不匹配。

有没有办法强制链接器忽略这个错误？我希望能够在调试模式下使用该库添加的功能，并且无法获得该库的调试版本。

顺便说一句，我无法立即想到这种定义不匹配会引起的任何问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T20:41:14.833

该标准说“迭代器在容器更改后未定义”之类的东西。一些调试模式 STL 会检查这个错误，而大多数发布模式 STL 不会检查。在调试模式下的容器或迭代器类中有额外的成员变量来实现这些检查。

因此混合调试和发布 STL 版本将不起作用，因为容器或迭代器类中的字节数可能不同。对于在调试模式和发布模式之间具有不同成员变量的任何类，都会发生同样的情况。

# mysql - 带有 Rand 查询顺序的 Sql INNER JOIN

> ID：14128740
> 
> 赞同：0
> 
> 时间：2013-01-02T20:32:34.083
> 
> 标签：mysql, sql

我需要重新优化这个查询，它很慢。

```
SELECT al.alias_title, al.title, al.hits, al.created_on, 
       u.first_name, u.surname, 
       uf.real_name, uf.user_name, 
       T.guid_id 
FROM album al 
INNER JOIN (SELECT imx.id, aix.album_id, imx.guid_id 
            FROM image imx 
            INNER JOIN album_image aix 
                       ON imx.id = aix.image_id 
            ORDER BY FLOOR(RAND() * (SELECT COUNT(1) 
                                     FROM image))) AS T 
          ON al.id = T.album_id
LEFT JOIN user u 
          ON al.user_id = al.id
LEFT JOIN user_flickr uf 
          ON u.id = uf.user_id
WHERE al.approved ='Yes' 
      AND al.visible ='1' 
GROUP BY T.album_id 
ORDER BY al.title; 
```

我需要一个随机图像来每次显示每个画廊。存在多对多关系——图像、专辑和专辑图像。我需要每个专辑的随机图像，然后按标题排序专辑。我认为内部查询和 rand 函数非常慢。我查看了临时表，但不确定这是否是最好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T21:03:58.323

随机排序不是一个好习惯。最好使用 LIMIT 子句，从应用程序生成一个随机值（甚至可以是一个 sql 变量），然后请求一条记录。例子

```
SELECT * FROM table LIMIT ?, 1; 
```

或者

```
SELECT * FROM table LIMIT ?, ?+1; 
```

警察：“？” 可以是变量或输入参数

# magento - Magento：在管理面板中创建自定义表单时使用产品选择器小部件

> ID：14128744
> 
> 赞同：1
> 
> 时间：2013-01-02T20:32:45.450
> 
> 标签：magento, admin, product

我正在开发一个 Magento (1.7.0.2) 模块，它在管理面板中有自己的管理区域。

此区域包含用于更新某些设置的表单，其中包括用于输入产品 ID 的文本字段。而不是这个文本字段，我想使用产品选择器小部件，因为检查正确的产品 ID，然后在表单中手动输入找到的 ID 是一种痛苦。

目前，上述文本字段的代码如下所示：

```
$fieldset->addField(
    'product_id', 
    'text', 
    array(
        'label'     => $helper->__('Product'),
        'class'     => 'required-entry',
        'required'  => true,
        'name'      => 'product_id'
    )
); 
```

有没有一种简单的方法来显示产品选择器小部件而不是文本字段？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T00:01:58.553

这种方法可能是一种选择： [http ://andreitara.com/2012/02/using-magento-product-chooser-widget-in-youre-own-module/](http://andreitara.com/2012/02/using-magento-product-chooser-widget-in-youre-own-module/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-04T22:56:25.013

这个问题很老了，但我要把它放在这里给那些仍然有这个问题的人。

我建议尝试这个模块：[Extendix_AdminFormChooserButton](http://ceckoslab.com/magento/extension-admin-form-chooser-selector-button/)。它的[GitHub 在这里](https://github.com/extendix/Extendix_AdminFormChooserButton)。这不仅仅是将字段类型更改为“product_chooser”，但它比我迄今为止遇到的任何其他解决方案都容易。

保存后它无法自动设置我的值，并且在页面加载时加载为空。要解决此问题，您可以编辑 Extendix/AdminFormChooserButton/Helper/Chooser.php 并添加

```
if (isset($config['value'])){
    $element->setValue($config['value']);
} 
```

后

```
$element->setValue($dataModel->getData($element->getId())); 
```

然后你应该能够在配置定义中定义你自己的“价值”

需要注意的是，该模块不支持一个字段选择多个产品。如果您想要多个产品，则需要多个字段。

# css - Kendo UI Dropdown，使下拉面板比控件更宽

> ID：14128753
> 
> 赞同：5
> 
> 时间：2013-01-02T20:33:12.307
> 
> 标签：css, kendo-ui

在 Kendo UI Dropdown 中，是否可以使下拉面板比控件更宽？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T21:49:34.503

另一种可能的方法：

```
var dropdownlist = $("#titles").data("kendoDropDownList");

// set width of the drop-down list
dropdownlist.list.width(400); 
```

代码片段取自官方示例（[链接](http://demos.kendoui.com/web/dropdownlist/template.html)）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T22:46:29.910

如果是`id`，则需要将 CSS 样式定义为：`dropDownList``drop`

```
#drop-list { 
    width: 300px !important;
} 
```

用于覆盖 KendoUI 计算的宽度并将其设置为（在本例中）`300px`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-03T18:31:59.413

实际上，有一个命令：

`$("#idOfMyDropDownList").data("kendoDropDownList").list.width("auto");`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-05T17:26:22.903

另一种可能的解决方案：

```
$("[data-role=dropdownlist]").each(function () {
  $(this).data("kendoDropDownList").list.width(300);
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-12T13:46:22.637

您可以在定义控件时直接设置：

```
.AutoWidth(true) 
```

IE

```
@(Html.Kendo().DropDownList()
  .Name("ddl")
  .DataTextField("Text")
  .DataValueField("Value")
  .AutoWidth(true)
  .BindTo(Model.list)) 
```

# jquery - JQuery Safari .load 图像缓存问题

> ID：14128758
> 
> 赞同：1
> 
> 时间：2013-01-02T20:33:57.843
> 
> 标签：jquery, image, caching, safari, load

我这几天一直在做这件事，需要帮助。我知道如果图像缓存在 Safari 中，则不会调用 .load() 事件，所以我想出了下面的代码。

它可以判断图像是否已缓存，但无法获取缓存图像的宽度和高度。它出现为零（在 Safari 中）。任何见解将不胜感激。谢谢。

```
 var $_item = $('<div id="'+(name+itemIndex)+'" class="box" ><div class="image_back"><img src="'+ image_back +'" id="backcolor" /></div><div class="image_outline"><img src="'+ image_outline +'" /></div></div>').appendTo('body');

         if( $('#backcolor', $_item)[0].complete ) {
            el_w = $('#backcolor', $_item).width();
            el_h = $('#backcolor', $_item).height();
            console.log("cache*****" +":"+el_w+":"+":"+$('#backcolor', $_item)[0].width);

        } else {

            $('#backcolor', $_item).load( function() {
                el_w = $('#backcolor', $_item).width();
                el_h = $('#backcolor', $_item).height();
                console.log("load*****" + this+":"+el_w);

            });

        } 
```

# objective-c - 使用 GCD 的 FIFO 串行队列

> ID：14128759
> 
> 赞同：31
> 
> 时间：2013-01-02T20:34:13.630
> 
> 标签：objective-c, objective-c-blocks, grand-central-dispatch, fifo

我正在尝试为我工作的公司创建一个（网络）同步阵列。虽然网络部分工作正常，但我已经陷入了一个问题。

我的愿望是使用创建一个新队列`dispatch_create_queue`，我将添加两个**不在**主线程上运行但以串行方式运行的块，这意味着首先第一个块必须运行，然后是第二个，并且永远不会在平行线。

我已经阅读了苹果文档，但至少可以说令人困惑。

*   当我使用创建队列`dispatch_queue_create`然后使用添加块（在它们被定义之后）`dispatch_sync`时，我发现该块仍在主线程上执行。

*   使用`dispatch_async`时，即块不在主线程上执行。

*   当我尝试使用它们添加两个块时，`dispatch_sync`它们会被永久阻止。

*   两个块似乎都运行良好并且脱离主线程的唯一一次是在调用`dispatch_async`.

然而，我之所以选择 GCD 和同步方法，是因为我的印象是我正在创建一个新队列（因此​​是一个新线程），并且向该队列添加块只会阻塞一个，直到另一个完成执行。不是这样，还是创建队列并不能保证代码不会在主线程上运行？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-01-02T20:39:39.143

这是 GCD 中的 FIFO 队列：

```
dispatch_queue_t serialQueue = dispatch_queue_create("com.blah.queue", DISPATCH_QUEUE_SERIAL);

...
dispatch_async(serialQueue, ^{
    //block1
});

dispatch_async(serialQueue, ^{
    //block2
}); 
```

# python - 如何找到2个序列之间的重叠，并返回它

> ID：14128763
> 
> 赞同：16
> 
> 时间：2013-01-02T20:34:55.033
> 
> 标签：python, algorithm

我是 Python 新手，已经花了很多时间来解决这个问题，希望有人能帮助我。我需要找到两个序列之间的重叠。重叠在第一个序列的左端和第二个序列的右端。我希望函数找到重叠并返回它。

我的序列是：

```
s1 = "CGATTCCAGGCTCCCCACGGGGTACCCATAACTTGACAGTAGATCTC"
s2 = "GGCTCCCCACGGGGTACCCATAACTTGACAGTAGATCTCGTCCAGACCCCTAGC" 
```

我的函数应该命名为

```
def getOverlap(left, right) 
```

作为`s1`左序列，作为右序列`s2`。

结果应该是

```
‘GGCTCCCCACGGGGTACCCATAACTTGACAGTAGATCTC’ 
```

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-02T20:46:53.867

Have a look at the [`difflib`](http://docs.python.org/3.3/library/difflib.html) library and more precisely at [`find_longest_match()`](http://docs.python.org/3.3/library/difflib.html#difflib.SequenceMatcher.find_longest_match):

```
import difflib

def get_overlap(s1, s2):
    s = difflib.SequenceMatcher(None, s1, s2)
    pos_a, pos_b, size = s.find_longest_match(0, len(s1), 0, len(s2)) 
    return s1[pos_a:pos_a+size]

s1 = "CGATTCCAGGCTCCCCACGGGGTACCCATAACTTGACAGTAGATCTC"
s2 = "GGCTCCCCACGGGGTACCCATAACTTGACAGTAGATCTCGTCCAGACCCCTAGC"

print(get_overlap(s1, s2)) # GGCTCCCCACGGGGTACCCATAACTTGACAGTAGATCTC 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-02T20:45:30.800

You could use [`difflib.SequenceMatcher`](http://docs.python.org/2/library/difflib.html#sequencematcher-objects):

```
d = difflib.SequenceMatcher(None,s1,s2)
>>> match = max(d.get_matching_blocks(),key=lambda x:x[2])
>>> match
Match(a=8, b=0, size=39)
>>> i,j,k = match
>>> d.a[i:i+k]
'GGCTCCCCACGGGGTACCCATAACTTGACAGTAGATCTC'
>>> d.a[i:i+k] == d.b[j:j+k]
True
>>> d.a == s1
True
>>> d.b == s2
True 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-02T20:43:49.637

[Knuth-Morris-Pratt](http://en.wikipedia.org/wiki/Knuth%E2%80%93Morris%E2%80%93Pratt_algorithm)算法是一种在另一个字符串中查找一个字符串的好方法（因为我看到了 DNA，我猜你希望这个扩展到......数十亿？）。

```
# Knuth-Morris-Pratt string matching
# David Eppstein, UC Irvine, 1 Mar 2002

from __future__ import generators

def KnuthMorrisPratt(text, pattern):

    '''Yields all starting positions of copies of the pattern in the text.
Calling conventions are similar to string.find, but its arguments can be
lists or iterators, not just strings, it returns all matches, not just
the first one, and it does not need the whole text in memory at once.
Whenever it yields, it will have read the text exactly up to and including
the match that caused the yield.'''

    # allow indexing into pattern and protect against change during yield
    pattern = list(pattern)

    # build table of shift amounts
    shifts = [1] * (len(pattern) + 1)
    shift = 1
    for pos in range(len(pattern)):
        while shift <= pos and pattern[pos] != pattern[pos-shift]:
            shift += shifts[pos-shift]
        shifts[pos+1] = shift

    # do the actual search
    startPos = 0
    matchLen = 0
    for c in text:
        while matchLen == len(pattern) or \
              matchLen >= 0 and pattern[matchLen] != c:
            startPos += shifts[matchLen]
            matchLen -= shifts[matchLen]
        matchLen += 1
        if matchLen == len(pattern):
            yield startPos 
```

[我获得 KMP python 代码的链接](http://code.activestate.com/recipes/117214-knuth-morris-pratt-string-matching/)（和一个内置函数，由于运行时常量，它对于小问题会更快）。

对于前沿性能，使用字符串的前缀表和散列窗口作为基数 4 整数（在生物学中，您将它们称为 k-mers 或 oligos）。; )

祝你好运！

**编辑：**还有一个不错的技巧，您可以对包含第一个字符串中的每个前缀（总共 n 个）和第二个字符串中的每个前缀（总共 n 个）的列表进行排序。如果它们共享最大的公共子序列，那么它们在排序列表中一定是相邻的，因此从排序列表中最接近的另一个字符串中找到元素，然后取完全匹配的最长前缀。:)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-02T20:38:42.447

[最长公共子串](http://en.wikibooks.org/wiki/Algorithm_implementation/Strings/Longest_common_substring)

```
def LongestCommonSubstring(S1, S2):
  M = [[0]*(1+len(S2)) for i in xrange(1+len(S1))]
  longest, x_longest = 0, 0
  for x in xrange(1,1+len(S1)):
    for y in xrange(1,1+len(S2)):
        if S1[x-1] == S2[y-1]:
            M[x][y] = M[x-1][y-1] + 1
            if M[x][y]>longest:
                longest = M[x][y]
                x_longest  = x
        else:
            M[x][y] = 0
  return S1[x_longest-longest: x_longest] 
```

# haskell - 如何导入 Repa

> ID：14128766
> 
> 赞同：4
> 
> 时间：2013-01-02T20:35:25.990
> 
> 标签：haskell, repa

我对 Haskell 世界真的很陌生，所以请原谅我这个愚蠢的问题。我安装了 Haskell 平台，我执行`cabal install repa`然后尝试在 WinGHCi 中使用此代码加载文件

```
import qualified Data.Array.Repa as R
:m + Data.Array.Repa 
```

但我明白了：

```
Could not find module `Data.Array.Repa'
Perhaps you meant
  Data.Array.Base (from array-0.4.0.0)
  Data.Array.IO (from array-0.4.0.0)
  Data.Array.ST (from array-0.4.0.0) 
```

有人可以告诉我如何解决找不到模块的问题吗？非常感谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T12:23:46.427

我不确定是否是这种情况，但实际上，您是否查看了`cabal`尝试安装时返回的状态消息`repa`？

在我的 Windows 系统上最新的（截至今天，2012.4.0.0）Haskell 平台无法安装最新的（3.2.3.1）版本`repa`，例如`cabal install repa`不起作用，说它会导致重新安装某些系统包，从而可能会破坏系统。如果我尝试安装（使用`cabal install repa --force-reinstalls`），无论如何它都会失败，并显示一条神秘的状态错误消息。如果您有任何机会没有注意到安装失败的事实，并且无论如何尝试导入它，我认为您收到的错误消息将与您所拥有的完全一样（“找不到模块...”） .

但是，我能够安装 的早期版本，`repa`即`3.2.1.1``cabal install repa-3.2.1.1`

我还没有尝试过使用它，但至少导入并且`:m + Data.Array.Repa`似乎工作得很好。

# c++ - C++ 从文件读入指针向量

> ID：14128772
> 
> 赞同：0
> 
> 时间：2013-01-02T20:35:52.260
> 
> 标签：c++, pointers, vector

我的问题是我有一个基类和 3 个子类，我想制作一个向量，我可以在其中放置代表所有 3 个子类的所有元素。这是处理从文件中读取的代码部分

```
vector<Robot*> robots;
vector<Mac> mac;
vector<Eco> eco;
vector<Pro> pro;
vector<int> charge;
vector<int> deliver;

try {
    string s;
    ifstream f;

    do {
        cout << "Add meg a filenevet" << endl;
        cin >> s;
        f.open(s.c_str());
    } while (!f.good());

    cout << "adatok beolvasasa..." << endl;

    int napok;
    if (!(f >> napok)) throw 1;
    charge.resize(napok);
    deliver.resize(napok);

    for (int i = 0; i<napok; i++) {
        if (!(f>>charge[i])) throw 1;
        if (!(f>>deliver[i])) throw 1;
    }

    string type, name;
    int battery;
    int m = 0; int e = 0; int p = 0;
    std::string line;
    while (std::getline(f, line)) {
      stringstream ss(line);
      if (ss >> type && ss >> name && ss >> battery) {

            if (type=="Mac") {
                cout << "mac" << endl;
                Mac r = Mac(name,battery);
                mac.push_back(r);
                robots.push_back(&mac[m]);
                m++;
            };
            if (type=="Eco") {
                cout << "eco" << endl;
                Eco r = Eco(name,battery);
                eco.push_back(r);
                robots.push_back(&eco[e]);
                e++;
            }
            if (type=="Pro") {
                cout << "pro" << endl;
                Pro r = Pro(name,battery);
                pro.push_back(r);
                robots.push_back(&pro[p]);
                p++;
            };
        }
    } 
```

到目前为止，这有效，它可以编译并且也可以运行，但是当我尝试访问某个函数时`robots[i].getBattery();` ，程序会冻结。似乎指针只是指向无处，但我不知道为什么:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T20:48:58.223

问题是您有两种独立的方式来访问您的对象，而两者之间没有任何同步。

如果您将一个项目推入向量中，然后获取指向它的指针，则该指针仅在向量的存储未移动或无效时才有效。在您的情况下，重复的 push_back() 调用很可能会触发向量重新分配，并且不能保证这会发生，因此元素可能会移动到新的内存位置，但显然指针没有更新。因此，您最终会得到指向无处的指针。

有一组容器来保存数据，而另一个容器只保存指向所述数据的指针，这对我来说看起来是非常糟糕的设计。正如我所看到的，您有两种选择来改进代码并解决您遇到的问题。在这两种情况下，您只需要一个容器来保存指向多态元素的指针，这就是您声明容器的方式：

1) 使用 a`boost::ptr_vector`来存储指向多态对象的指针。该容器旨在保存指针（`std::vector`不是，后者具有值语义）并负责其中包含的对象的生命周期管理。

2) 如果不能使用 boost，请使用 a`std::vector<std::shared_ptr<Robot> >`来保存指向多态对象的指针。

在这两种情况下，您都取消了按值保存项目的容器，并且在您的 if 语句中，您在堆上分配对象，然后将指针放入容器中。

# javascript - 改变功能参数

> ID：14128777
> 
> 赞同：2
> 
> 时间：2013-01-02T20:36:20.453
> 
> 标签：javascript, node.js, google-apps-script

想检查传递给函数的参数并替换未指定的参数或“我不喜欢”的参数。为此，我做了以下事情（我想使用的原因`arguments`是我想要一个通用函数）（与 node.js 的结果相同，只需将 Logger 更改为控制台）：

```
function argtest (x,y,z) {
  Logger.log ("at begin x="+x+", y="+y+", z="+z);
  arguments.length=3; // found this somewhere, doesn't help
  arguments[0]="a";
  arguments[1]="b";
  arguments[2]="c";
  Logger.log ("arguments now:");
  for (var i in arguments) {
    Logger.log ("arguments["+i+"]="+arguments[i]);
  }
  Logger.log ("at end x="+x+", y="+y+", z="+z);
}
function callArgTest () {
  argtest ();
  argtest (1,2,3);
} 
```

所以调用的结果`callArgTest`是：

```
Logger.log([at begin x=undefined, y=undefined, z=undefined, []])
Logger.log([arguments now:, []])
Logger.log([arguments[0]=a, []])
Logger.log([arguments[1]=b, []])
Logger.log([arguments[2]=c, []])
Logger.log([at end x=undefined, y=undefined, z=undefined, []])
Logger.log([at begin x=1, y=2, z=3, []])
Logger.log([arguments now:, []])
Logger.log([arguments[0]=a, []])
Logger.log([arguments[1]=b, []])
Logger.log([arguments[2]=c, []])
Logger.log([at end x=a, y=b, z=c, []]) 
```

因此，参数 x,y,z 仅在最初指定时发生变化。在第一种情况下（`argtest`不带参数调用），即使在为参数赋值之后，它们仍然是未定义的。那么这里缺少什么使它起作用呢？请注意，我不想触摸 x,y,z。相反，在最终实现中，我想将参数传递给对它们起作用的函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T23:30:54.200

问题是，在调用 时`argtest()`，`arguments`实际上并没有`"0"`要引用的属性`x`，或者`"1"`for`y`等：

```
argtest()      => arguments = { "length": 0 }
argtest(1,2,3) => arguments = { "length": 3, "0": x, "1": y, "2": z } 
```

该引用的定义在[ES5 10.6](http://es5.github.com/#x10.6)`11.c`的步骤中进行了描述，该步骤为 的每个“索引”定义了 getter 和 setter ，但受到命名参数的数量和传递的参数数量的限制。`arguments`

关于您的意图：

> *我想在函数的开头加入一个现有的实现，调用一个函数，该函数只接受参数和一些默认值作为参数，例如`defaults (arguments, "string=nana", "number=4")`*

你可能会发现这样的事情更容易：

```
function argTest(x, y, z) {
    x = typeof x !== 'undefined' ? x : ...;
    y = typeof y !== 'undefined' ? y : ...;
    // etc.
} 
```

ES5 可以实现您想要做的事情，但这意味着使用 getter 和 setter 为每个“索引”和命名参数定义您自己的“参数”对象，无论是否通过[`Object.create`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/create)/[`Object.defineProperties`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperties)或[`get`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/get)/传递值[`set`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/set)- 而且，我会不要“*简单地*”考虑这个：

```
function argtest(x, y, z) {
    defaults({
        length: argtest.length,

        get '0'() { return x; },
        set '0'(val) { x = val; },

        get '1'() { return y; },
        set '1'(val) { y = val; },

        get '2'() { return z; },
        set '2'(val) { z = val; }
    }, ...);

    // ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T20:45:07.843

后

```
arguments[0]="a";
arguments[1]="b";
arguments[2]="c"; 
```

为什么不添加

```
x = arguments[0];
y = arguments[1];
z = arguments[2]; 
```

? 我想这不符合你的目标是有原因的，但我想我需要一个更现实的例子来看看什么真正能满足你的目标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T23:21:39.073

也许你可以做这样的事情：

```
var args = Array.prototype.slice.call(arguments); 
```

然后与`args`? 您可以根据需要传递`args`到其他功能。让我知道这是否对您有所帮助，或者我是否在吠叫错误的树。

# html - 使用 Perl Mechanize Firefox 上传文件

> ID：14128778
> 
> 赞同：0
> 
> 时间：2013-01-02T20:36:28.317
> 
> 标签：html, perl, upload, mechanize

我正在使用 WWW::Mechanize::Firefox 并且在上传表单时遇到问题。谁能告诉我如何使用该模块将文件提交到这样的表单？

```
<form action="http://www.cs.tut.fi/cgi-bin/run/~jkorpela/echo.cgi"
enctype="multipart/form-data" method="post">
<p>
Type some text (if you like):<br>
<input type="text" name="textline" size="30">
</p>
<p>
Please specify a file, or a set of files:<br>
<input type="file" name="datafile" size="40">
</p>
<div>
<input type="submit" value="Send">
</div>
</form> 
```

编辑:: 更具体地说，我必须单击这样的按钮

```
<B><FONT SIZE=2>Then click...</FONT></B><A HREF="Javascript:CheckPortfolioUpload('Portfolio - Select Portfolio - Upload ? Go ~ Results')"><IMG NAME=GoBtn SRC=/images/button/GreenGo.gif BORDER=0 TITLE='Upload'  CLASS=Clickable></IMG></A>
</TABLE> 
```

我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T04:31:21.303

> $mech->follow_link( url_regex => qr/CheckPortfolioUpload/ );

# android - Android：actionbarsherlock 4.2 选项菜单和谷歌地图 v2 滞后

> ID：14128785
> 
> 赞同：2
> 
> 时间：2013-01-02T20:36:56.347
> 
> 标签：android, actionbarsherlock, google-maps-android-api-2, android-support-library, fragmentpageradapter

# 设置

我遇到了一个非常奇怪的滞后错误。使用 ABS 4.2，支持库 v4 修订版 11，以及新的 SupportMapFragment 和嵌套片段。此错误出现在 Android 4.2 上的 nexus 4 和 2.3.6 上的 nexus 1 上。

我有这些片段：

＃1“MainContainer”，带有一个包含片段页面适配器的视图页面。

#2 此片段页面适配器中的“SupportMapFragment”。我扩展了 SupportMapFragment 但同样的错误适用于它的默认实现。

#3 一个额外的片段（只是根据偏好调整设置，所以没什么特别的）

# 做过：

1.  让片段#2 运行并单击选项菜单项（在溢出菜单中），它将片段事务运行到片段#3。这会将旧片段 MainContainer 添加到 backstack。

2.  单击后退按钮，弹出 #3 并将 #1 (MainContainer) 和 #2 (SupportMapFragment) 再次显示。

# 预期的：

平滑运行的地图片段。

# 发生：

地图视图非常慢，几乎没有功能。我在整个应用程序中看不到任何其他滞后。

# 奇怪的部分：

尽管我在整个生命周期更改中执行了任何片段事务，但延迟仍然如此，除非重新创建活动或片段被破坏：ed（MainContainer 始终在片段管理器中）。但是，如果我按下溢出按钮以查看我在步骤 1 中按下的实际按钮（仅显示溢出菜单中的项目），地图会突然运行顺畅。

从逻辑上讲，这表明仅通过显示更改的溢出菜单中的项目来更改某些内容。由于所有这些组件中涉及的代码太多，除了在另一个片段（getChildFragmentManager() ）中使用 SupportMapFragment 之外，我真的找不到任何不寻常的东西，如果你问什么片段可能会更好代码可能很有趣，我会用它更新。

请帮忙，因为我要疯了......

# grid - GXT3如何获取已编辑单元格的行

> ID：14128786
> 
> 赞同：1
> 
> 时间：2013-01-02T20:36:56.610
> 
> 标签：grid, gxt

在 GridInlineEditing 网格中编辑单元格后，我想要做的是获取刚刚编辑的行的模型（或记录，不关心哪个）。

我尝试将 ValueChangeHandler 附加到编辑器，但 ValueChangeEvent 没有上下文，并且无论我编辑哪一行，源似乎都是相同的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T06:37:30.310

```
 List<> selectedItems =  editorGrid.getSelectionModel().getSelection();
       //iterate selected items
      int index = editorGrid.getStore().indexOf(selectedItem); 
```

# html - HTML中的任意换行符？

> ID：14128787
> 
> 赞同：24
> 
> 时间：2013-01-02T20:36:59.873
> 
> 标签：html, control-characters

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-02T22:11:07.560

*要指示单词之间不应*出现换行符的位置，请在单词之间使用 NO-BREAK SPACE 或 ' `。任何正常的空间*都是*易碎的。所以你可以写例如

```
Hello,&nbsp;my&nbsp;name is&nbsp;foo. 
```

如果您更愿意指出允许的换行符（根据您下面的评论），您可以将文本包装在一个`nobr`元素内（非标准，但就像一个魅力）或您设置的任何元素内`white-space: nowrap`，从而禁止换行符，除非明确强制或允许。然后，您将在空格后使用`<wbr>`标签（非标准，但是...）或字符引用`&#8203;`或`&#x200b;`（对于冰零宽度空格）*以*允许换行，例如

```
<nobr>Hello, <wbr>my name <wbr>is foo.</nobr> 
```

`<wbr>`和零宽度空间之间的选择是一个[棘手的问题](http://www.cs.tut.fi/~jkorpela/html/nobr.html)，主要是由于 IE 的奇怪之处。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-02T20:42:54.603

你可以使用[`<wbr>`](http://www.w3.org/TR/html5/text-level-semantics.html#the-wbr-element)标签。

编辑：如评论中所述，您可以使用[零宽度空间](http://en.wikipedia.org/wiki/Zero-width_space)：（`&#8203;`另请参阅：[nbsp 的对立面是什么？](https://stackoverflow.com/questions/2046530/whats-the-opposite-of-a-nbsp)）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-02T20:42:29.110

我不认为有任何本地方法可以做到这一点，但这是我在真正需要这种东西时一直在使用的一种技巧：

```
var str = "Hello,<br>My name is foo.";

str = str.replace(/ /g, '&nbsp;').replace(/<br>/g, ' '); 
```

基本上，使用不间断的空格来分隔您不想中断的单词。

在这里查看它的实际操作：http: [//jsfiddle.net/5xmt6/](http://jsfiddle.net/5xmt6/)（调整窗口大小以查看它的反应）。

* * *

**注意：**这*非常*hacky，并引入了自己的一组问题；即：如果视口变得非常窄，则文本的其余部分将不会换行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-03-18T13:13:35.720

这是一种仍然有效的技术：使用`inline-block`.

[https://jsfiddle.net/mindplay/7aeyp3hs/](https://jsfiddle.net/mindplay/7aeyp3hs/)

[![例子](../Images/e3dfa3f4686d2973367547a017c71f2d.png)](https://i.stack.imgur.com/ojdKv.gif)

请注意，我正在使用`@media`规则在非常小的设备上关闭此效果，在这些设备上，文本将像文本正常流动一样流动。

# php - Auth 库与单个控制器

> ID：14128790
> 
> 赞同：0
> 
> 时间：2013-01-02T20:37:08.383
> 
> 标签：php, codeigniter

这是关于 Codeigniter 应用程序的。我很难理解为所有身份验证任务创建身份验证库而不是创建包含其特定任务的单个控制器的好处。

任何人都可以解释一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T22:31:46.083

库使代码重用成为可能。您抽象出身份验证任务的功能，然后您可以在任何控制器、方法、模型等中加载和使用这些功能。

**更新**

控制器（在 CodeIgniter 中）只是响应请求，而库是主力。例如，在 auth 库中，控制器可能有一个名为`login`. 此方法实际上并不让用户登录。相反，它会检查是否有任何`$_POST`可用的变量。如果用户尚未输入用户名/密码，则该`$_POST`数组将为空。然后控制器将调用一个`login`视图，该视图将向用户显示登录表单。然后，用户将输入用户名/密码并将该表单提交回`login`身份验证控制器的方法。

由于现在有`$_POST`变量，因此 auth 控制器将调用 auth 库（可能是类似的方法`check_auth_credentials`并尝试登录用户。

基本上，控制器“控制”请求。他们根据请求是什么以及随请求发送的内容来确定要做什么。相比之下，库是一组管理一组任务的相关方法。控制器是**用户**交互的对象，库是**控制器**交互的对象。

# c# - 如何使用数据集计算 wpf datagrid 列的总数

> ID：14128796
> 
> 赞同：2
> 
> 时间：2013-01-02T20:37:40.427
> 
> 标签：c#, wpf, dataset, wpfdatagrid, calculated-columns

我想弄清楚在 wpf 中计算 DataGrid 列总值的最佳方法是什么。

*   我正在使用数据集在我的 DataGrid 中显示来自 sql 的数据（以及用于更新的 tableApter）
*   我希望在 DataGrid 中编辑数字时动态更新信息
*   我希望总和显示在 DataGrid 下方的标签/文本框或页脚中

这样做的最佳做法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T21:39:59.077

您可以侦听将导致列中的值更改的各种事件，然后在触发事件时通过调用下面的“calculateTotal()”之类的方法来计算总数。

DataTables 事件在这里定义：[here](http://msdn.microsoft.com/en-us/library/w9y9a401.aspx)

```
private int colTotal = 0; // class level

public Myclass()
{ 
    // Add a ColumnChanged event handler for the table.
    MyDataTable.ColumnChanged += new DataColumnChangeEventHandler(Column_Changed);
    // wire up more event handlers here..
}

private static void Column_Changed(object sender, DataColumnChangeEventArgs e )
{
   calculateTotal();
}

// calculate total of specified column
void calculateTotal()
{
   colTotal = myDataSet.Tables["myTable"].Compute("SUM(myColumnName)", String.Empty);
} 
```

colTotal 将是绑定到您的文本框或标签的公共属性

```
public int ColTotal
{
    get 
    { 
      return colTotal; 
    }
    set
    {
      colTotal= value;
      OnPropertyChanged("ColTotal");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T20:51:42.833

您必须在 DataSet Table Row 或 DataGrid 中使用 for 循环或 while，将其求和并在标签中显示结果

或者

您可以`Compute`在数据集表列上使用

# smlnj - 如何使用 SML 模块中的中缀运算符？

> ID：14128799
> 
> 赞同：5
> 
> 时间：2013-01-02T20:37:59.550
> 
> 标签：smlnj

我有以下代码，我使用 SML/NJ：

```
signature STACK=
sig

    type 'a Stack

    val empty :'a Stack
    val isEmpty : 'a Stack -> bool

    val cons : 'a*'a Stack -> 'a Stack
    val head : 'a Stack ->'a
    val tail : 'a Stack -> 'a Stack
    val ++ : 'a Stack * 'a Stack -> 'a Stack
end
structure List : STACK = 
 struct
 infix 9 ++
type 'a Stack = 'a list

val empty = []
fun isEmpty s = null s

fun cons (x,s) = x::s
fun head s = hd s
fun tail s = tl s
fun xs ++ ys = if isEmpty xs then ys else cons(head xs, tail xs ++ ys)    

end 
```

我想使用解释器中的 ++ 运算符，但是当我编写 s1 List.++ s2 where s1 和 s2 堆栈类型时，我得到的消息是运算符不是函数。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T21:01:21.653

您已`++`在结构内部声明为中缀，并且该声明仅限于结构的范围（内部`struct...end`）。您可以在顶层将其声明为中缀，或将其用作前缀，但在 SML 中，中缀声明不是签名的一部分。

```
- List.++ ([1], [2,3]);
val it = [1,2,3] : int Stack

- infix 9 ++;
infix 9 ++
- open List;
...
- [1] ++ [2,3];
val it = [1,2,3] : int Stack 
```

看看这里有没有一些有趣的技巧：[http ://www.mlton.org/InfixingOperators](http://www.mlton.org/InfixingOperators)

# php - 更改/包装 php 函数

> ID：14128800
> 
> 赞同：-1
> 
> 时间：2013-01-02T20:38:01.930
> 
> 标签：php

我应该更改 php 函数吗？我正在从头开始创建一个论坛，我不确定是否应该更改任何函数。一些流行的软件会更改一些 mysql 函数和其他函数，所以我问我应该更改函数还是保留它们照原样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T20:51:15.953

是的，当然，编写包装器始终是一个好习惯。特别是如果你知道你在做什么。
奇怪的是，在这个 Stack Overflow 的网站上，没有人鼓励这种做法。每个人都坚持使用 PDO 等现成的解决方案。虽然每个 API 都不能按原样使用，**但应该**包装成可用的东西。

# android - 带有 AlarmManager 建议的 Android 服务

> ID：14128801
> 
> 赞同：2
> 
> 时间：2013-01-02T20:38:08.530
> 
> 标签：android, alarmmanager

目前我有一个应用程序，它设置在两个部分中，活动部分将任务和任务完成时间添加到数据库中，然后我有一个在后台运行的服务，轮询数据库并在达到任务完成时间时处理任务。

目前我的服务正在使用扩展线程的私有内部类，并且我正在使用 thread.sleep 重新运行任务处理方法。这个内部类是从服务类中的 onStartCommand() 调用的。thread.sleep 设置为 15 分钟，或者如果需要在此之前处理任务，它将休眠直到需要处理该任务的时间。此时一切正常，但是我遇到了一些问题。

1.  该服务需要在特定时间运行，这些时间总是根据需要完成任务的时间而变化，即使手机进入睡眠状态也是如此。

2.  我需要确保对电池的影响尽可能小。

现在通过研究，我发现通过使用警报管理器，我只能在需要时启动此服务，这很好，但是因为我会根据必须处理某些任务的时间不断改变时间间隔，我不是肯定这是正确的做法。

我还阅读了有关唤醒锁的信息，除非我绝对需要，否则我真的不想使用。

我或多或少地在寻找关于我应该如何在我的应用程序中构建服务以及它如何处理这些任务的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T21:35:15.450

> 现在通过研究，我发现通过使用警报管理器，我只能在需要时启动此服务，这很好，但是因为我会根据必须处理某些任务的时间不断改变时间间隔，我不是肯定这是正确的做法。

`AlarmManager`绝对是正确的解决方案。始终保持服务处于活动状态，主要是看时钟滴答作响，这是非常浪费 RAM 的。

您不会“不断地更改时间间隔”，因为您只会有一个警报事件，设置为每当下一个任务发生时。那将是一次性警报，而不是重复警报。当事件发生时，除了做工作之外，您还要安排下一个事件。唯一的边缘情况是，如果用户添加的任务比以前最快的任务完成得更快，在这种情况下，您将需要取消并重新安排该警报事件。

> 我还阅读了有关唤醒锁的信息，除非我绝对需要，否则我真的不想使用。

`AlarmManager`如果您想确保可以不间断地进行定期工作，您没有选择，对于您的当前或实施。目标是仅`WakeLock`在实际工作脉冲期间激活，并在该`WakeLock`工作脉冲完成时释放并关闭服务。您可以[在`WakefulIntentService`](https://github.com/commonsguy/cwac-wakeful).

# android - 安卓。TabWidget 现在总是在最前面？

> ID：14128806
> 
> 赞同：3
> 
> 时间：2013-01-02T20:38:40.677
> 
> 标签：android, tabs, fragment, tabwidget, android-fragmentactivity

我正在研究使用片段处理标签。我想知道如何将 TabWidget 放在页面底部。

我正在研究 FragmentTab.java 示例（支持库 v4）。

有一个 XML 布局：

```
<android.support.v4.app.FragmentTabHost
xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@android:id/tabhost"
android:layout_width="match_parent"
android:layout_height="match_parent">

<LinearLayout
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <TabWidget
        android:id="@android:id/tabs"
        android:orientation="horizontal"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="0"/>

    <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:layout_weight="0"/>

    <FrameLayout
        android:id="@+id/realtabcontent"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"/>

</LinearLayout> 
```

无论我做什么 TabWidget 仍然是最重要的。实际上我可以完全删除 TabWidget 标签，但项目仍然会成功启动，并且 TabWidget 会再次出现在顶部。

这是否意味着现在使用 FragmentActivity 和 FragmentTabHost 我只能将 TabWidget 放在首位？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T20:56:15.097

您快到了！我认为这里缺少的是您`TabWidget` **之前** `FrameLayout`放置的内容。此外，我认为您不能将 0dp 宽度和高度设置为您的`@android:id/tabcontent`，它是需要可见并具有`layout_weight="1"`. 试试这个（编辑）：

```
<android.support.v4.app.FragmentTabHost
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <LinearLayout
        android:orientation="vertical"
        android:layout_width="match_parent"
        android:layout_height="match_parent">

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"/>
       <!--
        <FrameLayout
            android:id="@+id/realtabcontent"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="1"/>
       -->
        <TabWidget
            android:id="@android:id/tabs"
            android:orientation="horizontal"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="0" />

    </LinearLayout>
</android.support.v4.app.FragmentTabHost> 
```

# .net - 如何处理 32 位和 64 位环境之间的互操作？

> ID：14128809
> 
> 赞同：1
> 
> 时间：2013-01-02T20:38:43.553
> 
> 标签：.net, com, interop, registry, 32bit-64bit

简短的 2 个问题，我在阅读了几个主题/页面后找不到明确的答案。

1.  如果我将一些互操作 dll 复制到我的计算机，它会构建到 AnyCpu（使用 .net 反射器检查），如果我想在 64 位的应用程序构建中引用它（现在我得到一个例外） - 将其注册为 64 位是足够了（使用 regasm）——或者我们没有注册互操作——只有 COM？

2.  如果我有互操作 dll - 我可以获得创建此互操作的原始 COM（这对于创建另一个互操作（例如，对于 64 位环境）很有用）？

**编辑**：在@David 回复之后，我又检查了一个选项，出乎意料地它起作用了，但现在我不确定这对这个讨论和解决方案意味着什么。任何人都可以帮助解决这个问题吗？

**我做了什么**：我按照[这里](http://www.gfi.com/blog/32bit-object-64bit-environment/)的说明进行操作，现在来自 COM 的对象确实适用于我的 64 位应用程序！对所有对象（数百个在互操作中）手动执行此操作可能会很棘手 - 这是处理我的互操作的正确方法吗？

问候，乔特贝克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T20:43:29.497

COM 服务器 (DLL) 是本机代码，因此它们不能跨越位数边界，即 32 位到 64 位。您的 .NET 代码需要编译为 x86（好吧，至少启动代码是这样）才能有一个 32 位进程来加载 COM DLL（除非 COM DLL 本身是 64 位的，在这种情况下您的启动代码需要编译为 x64）。

互操作 DLL 只是一个 .NET 程序集，其中包含调用 COM 对象上的方法的胶水。知道互操作 DLL 用于哪个 COM DLL 将不允许您生成具有不同位数的工作互操作 DLL。

# objective-c - 在删除一对一关系的核心数据期间发现 NSManagedObject 的问题

> ID：14128815
> 
> 赞同：0
> 
> 时间：2013-01-02T20:39:17.053
> 
> 标签：objective-c, cocoa, cocoa-touch, core-data

**更新**：下面的 Martin R 提供了一个非常清晰（简洁！）的答案，*几乎可以*回答我的问题。我想我应该改写：

`prepareForDeletion`考虑到这些对象与被删除的对象一对一地连接，您能想到为什么在调用时无法获取连接到另一个 NSManagedObject 的 NSManagedObjects 的任何原因吗？

我需要能够调用`prepareForDeletion`，以便在决定是否应该删除对象的子对象之前运行一些实体检查。

* * *

当它是一对一关系时，在Core Data中删除对象的子对象有什么技巧吗？

我有一个相当复杂的核心数据模型，其中删除单个 NSManagedObject 还应该通过`prepareForDeletion`. 在删除之前立即运行一系列调试 NSLog 语句表明所有关系都已正确设置。然而，当实际尝试删除对象时，似乎许多（尽管不是全部）这些关系已经丢失，因为尝试通过 NSFetchRequest 获取这些对象中的一些（但同样，不是全部）返回空数组。

我似乎无法弄清楚我如何获取找到的对象与未找到的对象之间的任何区别，除了那些找到的对象是反向的多对关系，而那些找不到的对象是一对多的关系-一种关系：-/

要删除“主”对象，我只需调用`[managedObjectContext deleteObject:mainObject];`，并在主对象的私有 API 中覆盖`prepareForDeletion`如下：

```
- (void)prepareForDeletion
{
//    [super prepareForDeletion]; // commented but uncommenting doesn't change results
    [MyDataManager deleteChildOneForMainObject:self];
    [MyDataManager deleteChildrenTwoForMainObject:self];
    [MyDataManager deleteChildrenThreeForMainObject:self];
} 
```

哪里`MyDataManager`是一个只包含类方法的自定义 NSObject。MyDataManager 然后通过类似于以下内容在托管对象上下文中搜索相应的 NSManagedObjects：

```
- (BOOL)deleteChildOneForMainObject:(MainObject *)mainObject
{
    NSFetchRequest *fetch = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"ChildOne" inManagedObjectContext:managedObjectContext];
    [fetch setEntity:entity];
    [fetch setPredicate:[NSPredicate predicateWithFormat:@"(mainObject == %@)", mainObject]];
    NSError *error;
    NSArray *childOnesToDelete = [managedObjectContext executeFetchRequest:fetch error:&error];
    if (childOnesToDelete.count > 1)
    {
        NSLog(@"[WARNING] More than one ChildOne for mainObject found; deleting all");
    }
    NSLog(@"[TEST] Deleting %i ChildOnes", childOnesToDelete.count);
    for (ChildOne *childOne in childOnesToDelete)
    {
        [managedObjectContext deleteObject:childOne];
    }
    if ([managedObjectContext save:&error]) return YES;
    else NSLog(@"[WARNING] Save error for function [deleteChildOneForMainObject:]");
    return NO;
} 
```

同样，每个“MainObject”类型的 NSManagedObject 与“ChildOne”具有一对一关系，与“ChildTwo”和“ChildThree”具有一对多关系。“Child One”、“ChildTwo”和“ChildThree”都与“MainObject”具有一对一的关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T21:29:12.897

如果您正确设置关系的“删除规则”，Core Data 可以自动处理删除“依赖”对象。在这种情况下，您可以设置

*   删除从*MainObject*到*ChildX*到 "Cascade" 的关系规则，
*   删除从*ChildX*到*MainObject*到“Nullify”的反向关系规则。

这意味着

*   如果*MainObject*被删除，则相关的*ChildX*对象也会被删除。
*   如果删除*ChildX*对象，则相关*MainObject*的关系值设置为 NULL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T06:57:32.190

所以我终于让 IRC 为我工作了！#iphonedev 频道上的一位乐于助人的人提供了以下见解：

• （就像Martin R 所说）我应该忍受构建我的核心数据模型的可视化界面，并使用提供的“删除规则”下拉菜单来创建我的删除逻辑。（在“实用程序”右侧窗格中，第三个选项卡看起来像一块奶酪。）“级联”和“无效”是最有用的值。

• “删除规则”是单向的并且对每个关系都是唯一的，因此您有相当程度的控制权。

• 无需获取与提供的 NSManagedObject 具有一对一关系的 NSManagedObject，只需使用该属性即可。使用 fetch 作为“保护”机制是愚蠢和不必要的，因为根据定义，这种关系是一对一的。所以如果我有`Ying`and`Yang`对象，我应该只执行`[managedObjectContext deleteObject:ying.yang]`or `[managedObjectContext deleteObject:yang.ying]`。

根据 Martin R 的回答，最终`prepareForDeletion`仅与级联删除有关。

# php - 将 Android 连接到 MySQL 数据库

> ID：14128816
> 
> 赞同：-5
> 
> 时间：2013-01-02T20:39:17.463
> 
> 标签：php, android, mysql, database

是时候将我的应用程序挂接到网站的数据库中了。不幸的是，我对这个主题的了解绝对为零，PHP 更是如此。到目前为止，我只需要具备基本功能，即登录和退出服务器，以及从网站上的用户个人资料中上传和下载图像。

你们都知道任何写得很好的教程，我可以在其中找到一些这些信息吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T20:40:45.503

> 你们都知道任何写得很好的教程，我可以在其中找到一些这些信息吗？

这通常不是我回答问题的风格，但[你](http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/)去吧。很详细的教程。它向您展示了如何执行基本的 CRUD 操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T20:43:34.757

如果您的应用程序是用 Java 编写的，则可以使用 JDBC 连接到任何数据库。请注意，默认情况下，Android 的 Java 版本不附带 JDBC。您需要将其包含在您的 APK 中。

# ios - 代码签名地狱！- 应用程序代码签名验证失败

> ID：14128818
> 
> 赞同：1
> 
> 时间：2013-01-02T20:39:23.393
> 
> 标签：ios, xcode, certificate, code-signing

在尝试上传到应用商店时，我遇到了各种代码签名问题，我尝试通过删除所有证书和配置文件并再次尝试来解决，但似乎没有任何效果，我尝试再次删除所有内容，这样更容易为您提供帮助。

这是我现在拥有的：

![1](../Images/ea3c11ee34f016770fd6e7c61b76b7a2.png)

![2](../Images/ce9a0e64d911c3eef203152727f91b51.png)

![在此处输入图像描述](../Images/0571dca7c3de1e3febaaa2da61a181f3.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T20:49:40.147

您收到的警告说明了一切。

您正在尝试使用开发配置文件提交您的应用程序——您需要创建一个分发配置文件并使用它来提交。开发证书只能用于开发（显然）和临时构建。

查看此 Apple 文档以了解如何创建一个。 [http://developer.apple.com/library/ios/#recipes/ProvisioningPortal_Recipes/CreatingaDistributionProvisioningProfile/CreatingaDistributionProvisioningProfile.html](http://developer.apple.com/library/ios/#recipes/ProvisioningPortal_Recipes/CreatingaDistributionProvisioningProfile/CreatingaDistributionProvisioningProfile.html)

完成此操作后，请确保将代码签名身份切换到该分发配置文件并尝试再次提交。

如果您正确设置了所有内容，它应该可以正常运行。

# asp.net - 在数据库中发送用户名

> ID：14128831
> 
> 赞同：0
> 
> 时间：2013-01-02T20:41:07.827
> 
> 标签：asp.net, vb.net

我有一个详细信息视图，其中启用了“编辑/新建”。在“新”上，连同将进入数据库行的其他额外信息，我也在尝试发送当前登录的用户名。目前，它保持为空。

这是我的代码：

```
<asp:DetailsView ID="DetailsView1" runat="server" Height="50px" Width="700px" 
        AutoGenerateRows="False" DataKeyNames="ID" 
        DataSourceID="AccessDataSource2" AllowPaging="True" CssClass="mdtlstblwithhlines">
        <Fields>
            <asp:TemplateField HeaderText="Rating" SortExpression="Rating">
                <EditItemTemplate>
                    <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("Rating") %>'></asp:TextBox>
                </EditItemTemplate>
                <InsertItemTemplate>
                    <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("Rating") %>'></asp:TextBox>
                </InsertItemTemplate>
                <ItemTemplate>
                 <asp:Rating ID="Rating1" CurrentRating= '<%# Bind("Rating") %>'
                        runat="server" EmptyStarCssClass="EmptyStar" 
                        FilledStarCssClass="FilledStar" StarCssClass="Star" 
                        WaitingStarCssClass="WaitingStar" AutoPostBack="True" Enabled="True" 
                        EnableTheming="True" ReadOnly="True">
                    </asp:Rating>

                </ItemTemplate>
            </asp:TemplateField>
            <asp:BoundField DataField="TheGood" HeaderText="TheGood" 
                SortExpression="TheGood" />
            <asp:BoundField DataField="TheBad" HeaderText="TheBad" 
                SortExpression="TheBad" />
            <asp:BoundField DataField="TheBottomLine" HeaderText="TheBottomLine" 
                SortExpression="TheBottomLine" />
            <asp:BoundField DataField="DatePosted" HeaderText="DatePosted" 
                SortExpression="DatePosted" />
            <asp:BoundField DataField="LastUpdate" HeaderText="LastUpdate" 
                SortExpression="LastUpdate" />
            <asp:TemplateField HeaderText="UserName" SortExpression="UserName" Visible="False">
                <EditItemTemplate>
                    <asp:TextBox ID="TextBox2" runat="server" Text='<%# Bind("UserName") %>'></asp:TextBox>
                </EditItemTemplate>
                <InsertItemTemplate>
                    <asp:TextBox ID="TextBox2" runat="server" Text='<%# Bind("UserName") %>' ></asp:TextBox>
                </InsertItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label1" runat="server" Text='<%# Bind("UserName") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>

            <asp:CommandField ShowEditButton="True" ShowInsertButton="True" />
        </Fields>
    </asp:DetailsView>

   </div>

<asp:AccessDataSource ID="AccessDataSource2" runat="server" 
    DataFile="~/App_Data/ReviewSite.accdb" 
    SelectCommand="SELECT * FROM [ReviewsCam] WHERE ([ItemID] = ?)" 
        DeleteCommand="DELETE FROM [ReviewsCam] WHERE [ID] = ?" 
        InsertCommand="INSERT INTO [ReviewsCam] ([ItemID], [UserID], [UserName], [Rating], [TheGood], [TheBad], [TheBottomLine], [DatePosted], [LastUpdate]) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)" 
        UpdateCommand="UPDATE [ReviewsCam] SET [ItemID] = ?, [UserID] = ?, [UserName] = ?, [Rating] = ?, [TheGood] = ?, [TheBad] = ?, [TheBottomLine] = ?, [DatePosted] = ?, [LastUpdate] = ? WHERE [ID] = ?">
    <DeleteParameters>
        <asp:Parameter Name="ID" Type="Int32" />
    </DeleteParameters>
    <InsertParameters>
        <asp:Parameter Name="ItemID" Type="Int32" />
        <asp:Parameter Name="UserID" Type="String" />
        <asp:Parameter Name="UserName" Type="String" />
        <asp:Parameter Name="Rating" Type="Int32" />
        <asp:Parameter Name="TheGood" Type="String" />
        <asp:Parameter Name="TheBad" Type="String" />
        <asp:Parameter Name="TheBottomLine" Type="String" />
        <asp:Parameter Name="DatePosted" Type="DateTime" />
        <asp:Parameter Name="LastUpdate" Type="DateTime" />
    </InsertParameters>
    <SelectParameters>
        <asp:QueryStringParameter Name="ItemID2" QueryStringField="ID" Type="Int32" />
    </SelectParameters>
    <UpdateParameters>
        <asp:Parameter Name="ItemID" Type="Int32" />
        <asp:Parameter Name="UserID" Type="String" />
        <asp:Parameter Name="UserName" Type="String" />
        <asp:Parameter Name="Rating" Type="Int32" />
        <asp:Parameter Name="TheGood" Type="String" />
        <asp:Parameter Name="TheBad" Type="String" />
        <asp:Parameter Name="TheBottomLine" Type="String" />
        <asp:Parameter Name="DatePosted" Type="DateTime" />
        <asp:Parameter Name="LastUpdate" Type="DateTime" />
        <asp:Parameter Name="ID" Type="Int32" />
    </UpdateParameters>
</asp:AccessDataSource> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T21:01:25.930

尝试这个

```
 Public Sub Page_Load(ByVal sender As Object, ByVal e As EventArgs )

        SqlDataSource1.InsertParameters("UserName").DefaultValue = User.Identity.Name

  End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T20:53:47.887

使用会话变量将用户名存储在后面的代码中，如下所示

```
Dim crntuser As String = ""
crntuser = Login1.UserName.ToString
Session.Add("User", crntuser)

<InsertParameters>
    <asp:Parameter Name="ItemID" Type="Int32" />
    <asp:Parameter Name="UserID" Type="String" />
    <asp:SessionParameter Name="UserName" SessionField="User" Type="String" />
    <asp:Parameter Name="Rating" Type="Int32" />
    <asp:Parameter Name="TheGood" Type="String" />
    <asp:Parameter Name="TheBad" Type="String" />
    <asp:Parameter Name="TheBottomLine" Type="String" />
    <asp:Parameter Name="DatePosted" Type="DateTime" />
    <asp:Parameter Name="LastUpdate" Type="DateTime" />
</InsertParameters> 
```

# c# - LINQ 根据分组填充树视图

> ID：14128834
> 
> 赞同：1
> 
> 时间：2013-01-02T20:41:15.783
> 
> 标签：c#, vb.net, linq

我在 SO 上找到了这个 C# 答案，但似乎无法正常工作： [c# populate treeview from LINQ object](https://stackoverflow.com/questions/12006957/c-sharp-populate-treeview-from-linq-object)

就我而言，假设我有一个`List(Of Report_Data)`，例如，看起来像这样：

```
Var1   Var2        
V1     Sub Item 1      
V1     Sub Item 2      
V1     Sub Item 3      
V2     Sub Item 1      
V2     Sub Item 2     
V3     Sub Item 1 
```

我希望使用 LINQ 来填充树视图，如下所示：

```
V1 (CheckBox)
-------Sub Item 1  (CheckBox)
-------Sub Item 2  (CheckBox)
-------Sub Item 3  (CheckBox)
V2 (CheckBox)
-------Sub Item 1  (CheckBox)
-------Sub Item 2  (CheckBox)
V3 (CheckBox)
-------Sub Item 1  (CheckBox) 
```

* * *

因此，在我的 Treeview 填充例程中，我创建了以下内存查询：

```
 Dim GroupedReports = From Rpt As Report_Data In ReportsToBeProcessed
                         Group Rpt By Rpt.Var1 Into Group 
```

然后我想我可以循环遍历组，然后循环分组对象以填充树视图 - 类似于以下内容：

```
 For Each Grp As Object In GroupedReports 
        ... Add Parent node ...
        For Each Rpt As Report_Data In Grp
            ... Add Child Node ...
        Next
    Next 
```

首先，我不知道我的`Grp`变量使用什么数据类型，其次它似乎没有工作......
我该如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T20:53:06.487

像这样的东西，你的意思是？

（对不起，再也不用写VB了，所以我能做的最好是C#）

```
var grped = 
    from report in reports
    group report by report.Var1 into grp
    select grp;
var treeView = new System.Windows.Forms.TreeView();
foreach(var grouping in grped)
{
    var nodeFor = treeView.Nodes.Add(grouping.Key);
    foreach(var item in grouping)
    {
        var subitem = nodeFor.Nodes.Add(item.Var2);
    }
} 
```

编辑：“分组依据”构造返回一组`IGrouping<TKey, TValue>`-您可以将其视为键值对，键是您分组的对象，值是与该键匹配的所有元素。

这是我相信的 VB.Net 代码：

```
Dim grped = From report In reports
            Group report By report.Var1 into grp
            Select grp

Dim treeView as New System.Windows.Forms.TreeView()

For Each grouping In grped
    Dim nodeFor = treeView.Nodes.Add(grouping.Key)
    For Each item In grouping
        Dim subitem = nodeFor.Nodes.Add(item.Var2)
    Next
Next 
```

# c# - c# 在代码中创建 x509 证书

> ID：14128838
> 
> 赞同：0
> 
> 时间：2013-01-02T20:41:37.033
> 
> 标签：c#, certificate, x509

我想在后面的代码中创建一个 x509 证书。据我所知，这样做的唯一方法是使用[makecert 工具](http://msdn.microsoft.com/en-us/library/bfsktky3%28v=vs.80%29.aspx)，问题是我不想在命令提示符下手动制作证书，而是在代码中。有没有办法做到这一点？我找不到任何文章或示例如何做到这一点。任何人都可以在某个地方引用我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T10:21:41.153

您可以使用 BouncyCastle 或我们的 SecureBlackbox 生成证书。比从命令行调用任何东西更容易、更灵活。

# python - 金字塔...无法在 Windows chrome 中注销应用程序

> ID：14128840
> 
> 赞同：2
> 
> 时间：2013-01-02T20:41:52.460
> 
> 标签：python, google-chrome, pyramid

我有一个带有登录系统的金字塔应用程序。在“大多数”浏览器上一切正常……用户可以毫无问题地登录和注销。但是，在 windows chrome 中，用户可以正常登录但无法注销。当我说他们无法注销时，如果用户刷新页面，那么他们仍然处于登录状态。没有给出错误。重要的是，用户可以在 Linux chrome 和 chrome for iPhone 中很好地登录和注销（我还没有在任何其他版本的 chrome 上测试过它）。我有：

# 注销视图：

```
@view_config(route_name='logout')
def logout(request):
    headers = forget(request)
    return HTTPFound(location = request.route_url('home'), headers=headers) 
```

我用谷歌搜索，但找不到任何解决 Windows chrome 问题的东西。任何帮助表示赞赏。

# ios - 我将如何重新创建 iOS 发送文本消息屏幕？

> ID：14128842
> 
> 赞同：3
> 
> 时间：2013-01-02T20:42:00.433
> 
> 标签：ios, cocoa-touch

我正在编写一个 IRC 客户端 iOS 应用程序。我希望我的“发送消息”`UIViewController`的功能基本上与内置 iOS 短信应用程序的发送消息视图完全一样。我正在谈论的视图尤其是您打开`Messages`应用程序并单击右上角的“新消息”图标时看到的视图。它看起来像这样：

[![](../Images/1b9c0ea4d61930d69a7e650eb600c6d5.png)](https://i.imgur.com/9Lfcc.png)

## 这对我来说是什么样的：

这看起来像一个在顶部`UIViewController`有一个。`UIToolbar`除此之外，我无法弄清楚其余的是什么。这看起来不像`UITableView`基于 - 的表单，因为我看不到空行分隔符，并且该区域不允许您像在表格视图中看到的那样用手指拖动它。所以这看起来像是某种容器，带有一个`UILabel`,`UITextField`和一个图像或按钮，用于那个加号。

用于键入的文本区域看起来像`UITextView`某种页脚区域的内部，它垂直增长直到到达“To：”标题的底部边缘，此时文本区域才开始滚动，而不是展开。

所选人员姓名后面的绿色。这是什么，甚至？这是定制的`UILabel`，还是绿色最有可能是图形背景图像？

## 这些东西究竟是什么？

我是 iOS 开发的初学者，所以我不太想知道这些东西是什么。此短信应用程序中使用了哪些组件？如果那不是基于表格的表格，那它是什么？我将如何制作像这样位于键盘顶部的页脚并一直增长到顶部的东西？

**澄清一下，我不需要在此之后出现的实际聊天气泡屏幕。我只是想将它重新创建为一个简单的发送消息视图。我不需要聊天气泡的预构建包。我只需要重新创造这种外观，真的。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T21:54:24.177

苹果没有针对这个问题提供任何统一的解决方案；我知道，因为我们在应用程序中面临着相同的要求。Three20 框架确实提供了一个解决方案，我们曾经使用过；但是 Three20 显然不再维护，它给我们带来了很多麻烦，我们将它从我们的构建中删除。

最终，我们从头开始构建了您正在寻找的视图（或非常相似的东西）。这很困难，我们的代码仍然不漂亮。我猜苹果在消息和邮件应用程序中的代码也不漂亮，或者他们会把它变成一个 API。也许他们有一天会这样做，但现在你已经接受了痛苦并自己做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T22:04:44.777

苹果没有针对这个问题提供任何统一的解决方案；我知道，因为我们在应用程序中面临着相同的要求。Three20 框架确实提供了一个解决方案，我们曾经使用过；但是 Three20 显然不再维护，它给我们带来了很多麻烦，我们将它从我们的构建中删除。

最终，我们从头开始构建了您正在寻找的视图（或非常相似的东西）。这很困难，我们的代码仍然不漂亮。我猜苹果在消息和邮件应用程序中的代码也不漂亮，或者他们会把它变成一个 API。也许他们有一天会这样做，但现在你已经接受了痛苦并自己做。

更新：在这里寻找另一个开源解决方案。

[http://cocoacontrols.com/platforms/ios/controls/acanichat](http://cocoacontrols.com/platforms/ios/controls/acanichat)

我根本没有评价它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T03:04:29.773

我不能确切地说出 Apple 选择使用什么来实现这些元素（我确信有很多方法可以实现其中的一些），但以下是我对每个元素的建议：

**收件人名单**：

*   A`UITextField`其框架被限制在收件人“气泡”和添加按钮之间（并且每次添加收件人时都会调整大小）
*   每个收件人“气泡”的一组自定义`UIView`容器，其中包含收件人名称，覆盖在包含绿色“气泡”`UILabel`的可拉伸顶部（有关创建可拉伸图像的帮助，请参阅[此内容）](http://idevrecipes.com/2010/12/08/stretchable-images-and-buttons/)`UIImageView`
*   A`UIButton`为添加按钮
*   所有这些都包含在 a 中`UITableViewCell`（如果您不打算同时包含消息列表，您可能不需要/不想这样做）

**消息字段**：

*   A`UITextView`用于文本输入，在添加或删除新行时调整其框架大小，并在其大小（加上键盘大小）到达工具栏顶部时开始滚动
*   A`UIButton`用于发送按钮
*   A`UIButton`为相机按钮
*   全部包含在一个 custom`UIView`中，它被实现为屏幕底部的页脚（当然是在键盘顶部）

同样，这只是我如何设计它的粗略草图——这可能不是 Apple 的做法，也不一定适用于您的用例。

# regex - 在 gvim 中搜索和替换正则表达式

> ID：14128844
> 
> 赞同：0
> 
> 时间：2013-01-02T20:42:11.010
> 
> 标签：regex, unix, vim

我正在尝试**替换/删除**模式中的几列。

模式示例如下：

```
(. xx,asdf,gh,df.) 
```

我想让它像：

```
(.asdf,gh,df.) 
```

对于搜索，我使用`/(.\zs[^,]\ze[^,^,^.)]` 了这对搜索没有帮助。这也突出了每个模式中的第一列。即 ex (. 12, 23,34.) 模式也。

我的搜索的答案是在第一个模式中突出显示 x 并在第二个模式中突出显示 1 之前的空白。

我希望我的搜索仅适用于第一个模式。搜索我的第一步没有按预期工作。

有人可以帮我吗？非常感谢您提前提供的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T21:18:44.963

```
:%s#\v(\(\.)([^,]{-},)(.{-}\.\))#\1\3#g 
```

这将进行替换：`(. xx,asdf,gh,df.)`->`(.asdf,gh,df.)`

如果您只想突出显示它（在您的情况下是 `_xx`“_ 表示空格”），您可以尝试后视：

```
/\((\.\)\@<=[^,]* 
```

**根据评论**编辑****

 **假设我们有一个文件：

```
(. xx,asdf,gh,df,foo.)
(. xx,asdf,gh,df.)
(. xx,gh,df.)
(. xx,df.)
(. xx.) 
```

在 vim 中：

```
:%s#\v(\(\.)([^,]*,)([^,]*,[^,]*,[^,\.]*\.\))#\1\3#g 
```

我们有：

```
(. xx,asdf,gh,df,foo.)
(.asdf,gh,df.)
(. xx,gh,df.)
(. xx,df.)
(. xx.) 
```**

# mysql - MySQL INNODB 优化和索引

> ID：14128845
> 
> 赞同：0
> 
> 时间：2013-01-02T20:42:16.237
> 
> 标签：mysql, database

我正在设计一个 MySQL 数据库...

1.  我有许多使用 UserID 作为主键的表。所有这些表将为每个用户保留 1 行，因此将以相同的速度增长。看到他们将通过主键（UserID）访问，我认为不需要索引这个键，因为每个键都是唯一的。

2.  我还将有许多表，它们将递增数字作为主键，而 UserID 将是第二列。对于这些表，第二列中将有多个 UserID 实例。（每个这个 UserID 都有很多朋友，每个都列在不同的行上）。我希望这些表会变得很长，但不会很宽，因此相对于 GB 来说不会很大。

问题：如果我在上面第 2 部分（UserID/第二列）中的表上添加索引，并且如果我的查询使用 UserID 进行联接（所有联接都关闭 UserID），这是否意味着联接将访问更大的表（上面的第 2 部分) 通过索引的 UserID，因此访问这些较大表的速度将类似于第 1 部分中的较小表？

使用 UserID 作为唯一主键（较短的表）或索引列（较大的表）让所有将成为联接的一部分的表 - 这似乎是合理的设计，以确保表获得良好的响应时间相当大 - 曾经达到 1 亿行吗？（不包括硬件等其他要求）。

想法？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T20:49:08.027

主键字段自动成为唯一索引的一部分，因此无需在此之上添加另一个索引。

`where`将索引放置在、`join`和/或`order by`子句中使用的任何字段上是一个很好的经验法则。

在速度方面，没有人可以肯定地说添加（或删除）索引是否会提高性能。对于简单/小型数据库，索引总是一个主要的加速。对于大型/复杂的模式，它们实际上会在某些情况下损害性能。您必须对系统进行基准测试以确保。但总的来说，索引 = 好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T21:26:29.940

如果将一列（或一组列）定义为表的主键，则将有一个与之关联的索引（它们）。[请参阅有关Primary Key](http://dev.mysql.com/doc/refman/5.6/en/optimizing-primary-keys.html)的MySQL 参考。

如果您正在实现具有`JOIN`s 的查询，那么正如 Marc B 已经指出的那样，通常在您加入的列上添加索引（在您的情况下为 userId）是一个好习惯。

> 如果我的查询使用 UserID 进行联接（所有联接都关闭 UserID），这是否意味着联接将通过索引的 UserID 访问更大的表（上面的第 2 部分）

但是，正如您所问的，不确定 MySQL 是否会使用您创建的索引。根据查询的结构和结果集中*可能的数据*，[MySQL 查询优化器](http://dev.mysql.com/doc/refman/5.1/en/controlling-optimizer.html)可能决定不使用您添加的索引。查找 MySQL 是否使用您的索引的方法是运行`EXPLAIN`查询。查看[它的语法](http://dev.mysql.com/doc/refman/5.0/en/explain.html)以及[如何使用它来优化查询](http://dev.mysql.com/doc/refman/5.0/en/using-explain.html)。您可以指导查询优化器[使用某些索引](http://dev.mysql.com/doc/refman/5.1/en/index-hints.html)这可能会节省查询计划分析和查询执行性能的时间，但我建议您运行多个测试以确保您实施的索引确实更好。您还应该记住，随着表中数据的增长，您的查询可能会降低性能，因此您应该定期检查查询的性能并安排索引。

如果查询中的第二个表将始终在 userId 字段上进行查询，那么您不妨利用MySQL 5.1 及更高版本提供的[分区支持。](http://dev.mysql.com/doc/refman/5.1/en/index-hints.html)在后台将主表中的分片记录分区为多个表，如果您遵循其规则，则可以真正提高查询的性能。

# php - 尝试运行包含文件的 cronjob 但是当我运行命令行时它继续说有错误并且文件不存在

> ID：14128846
> 
> 赞同：0
> 
> 时间：2013-01-02T20:42:15.990
> 
> 标签：php, shell, cron

好吧，我正在尝试运行一个包含一些文件的 cronjob，但是当我通过命令行运行它时，它一直说文件不存在

这是php文件：

```
include "../includes/common.php";
require_once('../anotherfile.php');
require_once '../swift/lib/swift_required.php';

//some database things 
```

这是我运行的命令行：

`/usr/local/bin/php /home/xxxxx/public_html/cron/somefile.php`

这是我得到的错误：

```
Warning: include(..includes/common.php): failed to open stream: No such file or directory in /home/xxxxx/public_html/cron/somefilek.php on line 3
Warning: include(..includes/common.php): failed to open stream: No such file or directory in /home/xxxxx/public_html/cron/somefilek.php on line 3
Warning: include(): Failed opening '..includes/common.php' for inclusion (include_path='.:/usr/lib/php:/usr/local/lib/php') in /home/xxxxx/public_html/cron/somefilek.php on line 3
Warning: require_once(..anotherfile.php): failed to open stream: No such file or directory in /home/xxxxx/public_html/cron/somefilek.php on line 4
Fatal error: require_once(): Failed opening required '..anotherfile.php' (include_path='.:/usr/lib/php:/usr/local/lib/php') in /home/xxxxx/public_html/cron/somefilek.php on line 4 
```

出于某种原因，它没有说明 swift_required.php

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T20:45:26.287

You need to "posicionate" in yor directory first or use absolute path in your includes. Try changing your command to this:

```
cd /home/xxxxx/public_html/cron && /usr/local/bin/php /home/xxxxx/public_html/cron/somefile.php 
```

# android - 为 ImageView 加载背景图像

> ID：14128848
> 
> 赞同：0
> 
> 时间：2013-01-02T20:42:20.323
> 
> 标签：android, android-layout

我在 Horizo​​ntalScrollView 中有一堆 ImageView。在获取图像时，我想在 ImageView 内显示一些加载图像，直到实际图像可用。什么/如何设置 ImageView 以使其具有加载图像？

编辑：所以我正在寻找的是一个占位符图像/动画，以指示实际的缩略图图像正在加载

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T20:50:01.240

只需将一些简单的加载 .png 存储在您的可绘制文件夹中。首次创建 ImageView 时，请使用加载图像。最终图像下载完成后，只需通过设置 imageView.setImage... 来替换它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T20:52:01.400

我会使用一个`FrameLayout`包含你的`ImageView`（最初）和一个可见`visibility="invisible"`的不确定的。`ProgressBar`完成加载后，只需隐藏`ProgressBar`并显示`ImageView`. 要使其淡入/淡出，您可以使用动画。

```
progressView.startAnimation(AnimationUtils.loadAnimation(context, android.R.anim.fade_out));
imageView.startAnimation(AnimationUtils.loadAnimation(context, android.R.anim.fade_in)); 
```

# php - 使用base64_encode方法和jquery上传图片时显示进度条

> ID：14128849
> 
> 赞同：1
> 
> 时间：2013-01-02T20:42:20.980
> 
> 标签：php, javascript, jquery, image-processing, filereader

主要进展如下所述。有人打开我的网站。之后，他/她制作 ctrl+v 并粘贴图像，但这无关紧要。接下来，jquery 将 base64_encoded 图像字符串发布到 php 文件中，然后我使用explode 来确定扩展名，并为图像生成一个随机名称。我怎么能写一个进度条呢？无论如何感谢您的帮助。

```
$("html").pasteImageReader(function(results) {
var dataURL, filename;
filename = results.filename, dataURL = results.dataURL;
$.post("clipboardup.php", { img: dataURL }, function(data) {
$("#testing").html(data);
});
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T08:27:48.213

有一些方法可以提供对*正常*文件上传的上传进度监控，例如 HTML5 [File API](http://www.w3.org/TR/FileAPI/)、基于 Flash/Silverlight/etc 的上传小部件（如[Plupload](http://www.plupload.com/)）以及内置的[PHP 文件上传进度机制](http://php.net/manual/en/session.upload-progress.php)（仅在最新版本或二）。

但是，这些都不是为*正常的非上传文件*HTTP POST 操作而构建的，这就是您在这里所做的事情。换句话说，没有办法捕获您需要捕获的数据。

# python - 如何监控在 linux/tcl/python 中打开或启动的应用程序？

> ID：14128853
> 
> 赞同：1
> 
> 时间：2013-01-02T20:42:29.733
> 
> 标签：python, linux, tcl, window-managers, window-management

我正在尝试构建一个面板应用程序，例如前卫窗口导航器或 ubuntu unity。

我的问题是，一旦我使用预定义的应用程序构建面板，我如何在应用程序打开或启动时向面板添加项目？

这是我在 tcl 中的源代码：

```
package require Tk

set items {xterm gvim firefox}
wm withdraw .
toplevel .panel
wm attributes .panel -topmost 1 ; # on top
bind .panel <Escape> {exit}
wm geometry .panel +0+0
wm overrideredirect .panel yes ; # remove window decorations

set counter 0
foreach item $items {
    incr counter
    set separator " "
    label .panel.$counter -text "$item$separator" -bg black -fg white \
    -font {-family "Fixedsys Excelsior 3.01" -size 12}
    grid .panel.$counter -column $counter -row 0
} 
```

是否有任何终端、tcl 或 python 命令可以实现这一点？

欣赏任何见解。先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T23:30:34.800

如果该`send`命令已打开（这取决于与显示器安全性相关的各种因素），您可以告诉它侦听“知名名称”，然后使用另一个小应用程序`send`发送脚本来评估.

在面板中，听一个“好”的名字：

```
package require Tk
tk appname MyExcellentPanel
proc registerItem args {
   # How to do the registration of things here
} 
```

在帮助脚本中：

```
#!/usr/bin/env wish
package require Tk
wm withdraw .                               ;  # IMPORTANT! Don't show a GUI here
send MyExcellentPanel registerItem $argv    ;  # The magic command
exit                                        ;  # IMPORTANT! Exit now 
```

现在，您可以使用 shell 脚本或任何地方的小脚本向面板发送指令以注册某些内容。就这么简单。

* * *

如果该`send`命令不存在，请尝试Tcllib 中的[comm](http://tcllib.sourceforge.net/doc/comm.html)`comm::comm send`包，它与`send`. 但是，没有什么完全一样的，`tk appname`因为没有可移植的方法来注册端口映射（comm 使用本地 TCP 通道），因此您需要找到一种方法来传达该信息（一个众所周知的地方的文件？）。唉，我对它不是很有经验，所以我不能真正提供详细的建议。

# sql - 错误“指定的字段可以引用 FROM 子句中的多个表”

> ID：14128854
> 
> 赞同：6
> 
> 时间：2013-01-02T20:42:35.117
> 
> 标签：sql, alias, ms-access-2010

我正在使用 Access 2010。

我的错误似乎是混叠的结果。

我读过的解决方案指定在每个级别都应该使用不同的别名（我已经这样做了），并且 Access 喜欢很多 SELECT * （所以我也添加了这些），但它并没有解决我的问题。

我在 ServiceZipSpec.Service_Product 上遇到错误。任何指针？谢谢！

```
SELECT DISTINCT ServiceZipSpec.Service_Product, ServiceZipSpec.Specificity, Service_Availability.Available, Service_Availability.Zip_Code, Service_Availability.State
    FROM 
    ( SELECT * FROM 
       ( SELECT * FROM Service_Availability AS C_Avail1
         INNER JOIN 
            (
              SELECT C_Avail2.Service_Product, MAX(C_Avail2.Specificity) AS Spec
              FROM Service_Availability AS C_Avail2
              WHERE (C_Avail2.State = "TX" OR C_Avail2.State = "CW")
              GROUP BY C_Avail2.Service_Product 
            ) MaxSpec
         ON C_Avail1.Service_Product = MaxSpec.Service_Product
             AND C_Avail1.Specificity = MaxSpec.Spec
       ) Service_Spec
    LEFT JOIN TABLE_ZipCodes ON Service_Spec.State = TABLE_ZipCodes.State
    ) ServiceZipSpec

    WHERE ServiceZipSpec.Available = TRUE AND (ServiceZipSpec.State = "TX" OR ServiceZipSpec.State = "CW")
    ; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T20:48:00.207

The source of your problem is that you are using `SELECT *` when joining tables that have similarly named columns. Try limiting to `SELECT table_name.*`, or simply pick out the columns you need.

For example:

```
SELECT DISTINCT ServiceZipSpec.Service_Product, ServiceZipSpec.Specificity, Service_Availability.Available, Service_Availability.Zip_Code, Service_Availability.State
  FROM 
    ( SELECT Service_Spec.*, TABLE_ZipCodes.Zip_Code FROM 
       ( SELECT C_Avail1.* FROM Service_Availability AS C_Avail1
... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T20:49:22.643

您需要`SELECT colName1, colname2`代替`SELECT *`，您在子查询中遇到冲突。此外，您的外部选择列表将来自具有别名的表`ServiceZipSpec`：

```
SELECT DISTINCT ServiceZipSpec.Service_Product, 
    ServiceZipSpec.Specificity, 
    ServiceZipSpec.Available, 
    ServiceZipSpec.Zip_Code, 
    ServiceZipSpec.State
FROM 
( 
    SELECT colName1, colname2, etc -- name your columns here
    FROM 
    ( 
        SELECT colName1, colname2, etc -- name your columns here
        FROM Service_Availability AS C_Avail1
        INNER JOIN 
        (
          SELECT C_Avail2.Service_Product, MAX(C_Avail2.Specificity) AS Spec
          FROM Service_Availability AS C_Avail2
          WHERE (C_Avail2.State = "TX" OR C_Avail2.State = "CW")
          GROUP BY C_Avail2.Service_Product 
        ) MaxSpec
        ON C_Avail1.Service_Product = MaxSpec.Service_Product
            AND C_Avail1.Specificity = MaxSpec.Spec
   ) Service_Spec
    LEFT JOIN TABLE_ZipCodes 
        ON Service_Spec.State = TABLE_ZipCodes.State
) ServiceZipSpec
WHERE ServiceZipSpec.Available = TRUE 
    AND (ServiceZipSpec.State = "TX" OR ServiceZipSpec.State = "CW"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-30T22:21:18.240

指定的字段引用可以引用 SQL 语句的 FROM 子句中列出的多个表。在以下示例中，OrderID 字段同时存在于 Orders 和 Order Details 表中：

```
SELECT OrderID 
FROM Orders, [Order Details]; 
```

由于该语句未指定 OrderID 属于哪个表，因此会产生此错误。要完成此操作，请通过添加表名来完全限定字段引用。例如：

```
SELECT Orders.OrderID 
FROM Orders, [Order Details]; 
```

# javascript - jQuery 集合/domRef 上的 Jquery 委托，但选择器字符串

> ID：14128856
> 
> 赞同：0
> 
> 时间：2013-01-02T20:42:53.443
> 
> 标签：javascript, jquery

我有一个场景，我有对 dom 元素的实际 dom 引用，并希望将事件委托给该 dom 引用。

```
var domRef = $('.selector');
// I want something like this.
$(document).on('click', domRef, function() {

}); 
```

我知道在上面的代码中以这种方式使用它是没有意义的，但我有一个我自己想要这种功能的用例。我很感激可以为我提供解决方案，而无需争论遵循这种做法的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T20:59:30.107

只需手动处理委托：

```
var domRef = $('.selector');

$(document).on('click', function(e) {
    // test if the click target is the same as your domRef
    if ($(e.target).is(domRef)) {
        // do special stuff for this node
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T21:02:08.877

从[`.on()`](http://api.jquery.com/on/).

> **`.on( events [, selector] [, data], handler(eventObject) )`**
> 
> selector：**一个选择器字符串**，用于过滤触发事件的选定元素的后代。如果选择器被`null`或省略，事件总是在到达被选元素时触发。

`selector`需要是一个字符串。如果不是，则将其视为参数`data`。[您可以通过查看](http://james.padolsey.com/jquery/#v=1.7.2&fn=jQuery.fn.on)[的源代码](http://james.padolsey.com/jquery/#v=1.7.2&fn=jQuery.fn.on)来确认这一点。[`.on()`](http://james.padolsey.com/jquery/#v=1.7.2&fn=jQuery.fn.on)

一种解决方法可能是：

```
var $domRef = $('.selector'); 
```

```
$(document).on('click', function(evt) {
  if($domRef.is(evt.target)) {
    ...
  }
}); 
```

即使，性能方面它不是那么好。

# delphi - Delphi - 暂停所有播放声音以在我的应用程序上播放特定声音

> ID：14128859
> 
> 赞同：3
> 
> 时间：2013-01-02T20:43:03.603
> 
> 标签：delphi, delphi-2010

如何暂停所有播放声音（Windows 媒体播放器或其他播放器）以在我的应用程序中播放特定声音，然后返回播放上一个暂停的声音。

也就是说，如果您想在 windows 媒体播放器等声音播放器上播放声音，我的程序会暂停此声音以播放特定声音，并在播放完特定声音后暂停声音。有人能帮我吗？

我的delphi版本是2010。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T08:14:39.050

您没有指定您所针对的 Windows 版本。如果您想控制每个应用程序的音频，这会产生很大的不同。

在 Windows 7 中，您可以控制每个应用程序的音量（嗯.. 流）。

无法像这样控制使用 ASIO 的应用程序，但如果您只关心 Windows Media Player，那应该不是问题。 ![混合器](../Images/00549902bacf8b4bec29384be7c4123f.png)

您可以通过 Core Audio API 控制流的音量（或静音）。`IAudioEndpointVolume`或`ISimpleAudioVolume`接口。

但是，我不建议弄乱混音器的音量。

Windows 具有内置的机制，可以满足您的需求。它被称为`ducking`or `stream attenuation`，用于在“通信”流开始时降低/静音所有非通信音频流的音量。

在 Windows 多媒体控制面板 (Mmsys.cpl) 中，您可以通过通信选项卡配置默认行为：

![设置](../Images/2acd8f2da046724d7ba7ea0a11ba24c3.png)

您必须找到默认的通信设备，并通过它播放音频。

这里的这个单元可以帮助你找到它： [http ://code.google.com/p/mfpack-media-foundation/source/browse/trunk/MFPACK/CoreAudio/MMDeviceAPI/MMDeviceApi.pas](http://code.google.com/p/mfpack-media-foundation/source/browse/trunk/MFPACK/CoreAudio/MMDeviceAPI/MMDeviceApi.pas)

从这里开始，如果您在播放音频时是否自动发生闪避，我不是 100%。我自己没有尝试过，但希望这能引导您朝着正确的方向前进。如果您预订任何结果，请告诉我。

ps：如果我是你，我会更深入地[研究 mfpack](http://code.google.com/p/mfpack-media-foundation)，因为它似乎是这类东西的有用库。我看到该项目有 3 个提交者（maxcmx、factoryx.code 和 peter larson）。我相信他们可以告诉你如何以正确的方式实现你的目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T12:53:05.123

在谷歌上搜索，我发现了一个 Windows XP 应用程序，它完全符合我的需要，它被称为Windows XP 的每个应用程序音量控制的**IndieVolume （**[链接在这里](http://www.indievolume.com/)）。我会测试它，看看它是如何工作的，在最坏的情况下，我必须做一个解决方法，这样你就可以做我想做的事。不，但如果有人有更好的主意，我总是愿意倾听，或者继续阅读......

# c# - 如何添加到列表 一个可能是单个字符串或字符串列表的对象

> ID：14128869
> 
> 赞同：3
> 
> 时间：2013-01-02T20:43:42.937
> 
> 标签：c#, reflection

看起来这已经为 python 回答了，但不是 C#，因为我是 python 文盲和 C# 的新手，这里是：

我正在尝试根据枚举参数（类型）从类（任务/任务）的实例中获取属性并将该属性添加到列表中。棘手的部分是我不确定属性值是字符串还是字符串列表。

所以，通常我在看类似的东西：

```
PropertyInfo propertyInfo = typeof(Task).GetProperty(type.ToString());
List<string> values = new List<string>(); 
```

那么当值是列表时我知道的东西不起作用，但说明了我的意图：

```
values.Add((string)propertyInfo.GetValue(task, null)); 
```

我有哪些选择？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T20:47:23.137

您可以使用[`PropertyInfo.PropertyType`](http://msdn.microsoft.com/en-us/library/system.reflection.propertyinfo.propertytype.aspx)来检查属性的类型 - 或者您可以只获取值`object`并从那里开始：

```
List<string> values = new List<string>();
object value = propertyInfo.GetValue(task, null);
if (value is string)
{
    values.Add((string) value);
}
else if (value is IEnumerable<string>)
{
    values.AddRange((IEnumerable<string>) value);
}
else
{
    // Do whatever you want if the type doesn't match...
} 
```

`is`或者，您可以使用`as`null 并检查结果，而不是使用和强制转换：

```
List<string> values = new List<string>();
object value = propertyInfo.GetValue(task, null);
string stringValue = value as string;
if (stringValue != null)
{
    values.Add(stringValue);
}
else
{
    IEnumerable<string> valueSequence = value as IEnumerable<string>;
    if (valueSequence != null)
    {
        values.AddRange(valueSequence);
    }
    else
    {
        // Do whatever you want if the type doesn't match...
    } 
} 
```

请注意，如果属性是任何其他类型的字符串序列，而不仅仅是`List<string>`. 它还会复制列表，因此任何进一步的更改都不会影响属性引用的现有列表。如果需要，请调整:)

Lee 的回答让我想起了一点——如果它是一个`string`具有`null`值的属性，并且您*想要*一个包含单个 null 元素的列表，则需要使用`PropertyType`. 例如：

```
if (propertyInfo.PropertyType == typeof(string))
{
    values.Add((string) propertyInfo.GetValue(task, null));
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-02T20:48:24.717

```
PropertyInfo propertyInfo = typeof(Task).GetProperty(type.ToString());
List<string> values = new List<string>();

object p = propertyInfo.GetValue(task, null);
if(p is string)
{
    values.Add((string)p);
}
else if(p is List<string>)
{
    values.AddRange((List<string>)p);
} 
```

或者你可以使用`as`：

```
string str = p as string;
List<string> list = p as List<string>;

if(str != null)
{
    values.Add(str);
}
else if(list != null)
{
    values.AddRange(list);
} 
```

# file-upload - SilverStripe 中文件的 UploadField

> ID：14128870
> 
> 赞同：0
> 
> 时间：2013-01-02T20:43:48.037
> 
> 标签：file-upload, silverstripe

我想在内容文本区域下方插入一个新字段，以保存到一个文件的链接/连接（主要是我的资产文件夹中的一个 zip 文件）。

我找不到任何文档或文件教程。只有图像。有人知道我在哪里可以找到一些帮助文件或者可以给我一些基本的代码吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T08:08:49.723

一般来说，有[UploadField 的 API Docs](http://api.silverstripe.org/3.0/framework/forms/UploadField.html)。以及[文档](http://doc.silverstripe.org/framework/en/reference/uploadfield)，虽然它们有点隐藏 - 我只是在 doc.silverstripe.org 上修复搜索。

这应该可以解决问题：

```
<?php
class Page extends SiteTree {
    static $has_one = array('MyFile', 'File');
    function getCMSFields() {
        $fields = parent::getCMSFields();
        $upload = new UploadField('MyFile');
        $upload->setConfig('allowedMaxFileNumber', 1);
        $upload->getValidator()->setAllowedExtensions(array('zip'));
        $fields->addFieldToTab('Root.Main', $upload);
        return $fields;
    }
} 
```

# python - Extracting string/values from a large text/dat file

> ID：14128880
> 
> 赞同：-3
> 
> 时间：2013-01-02T20:44:26.120
> 
> 标签：python, regex, awk, grep, pattern-matching

I want to extract the "Drops: XXXXX" from a text file whose text pattern looks something like this:

```
Pkts: 215104502  Bytes: 202537648280   Drops: 1302599
Pkts: 55330252  Bytes: 52018951784   Drops: 22086
Pkts: 46226143  Bytes: 42980694784   Drops: 0
Pkts: 52931264  Bytes: 49764764008   Drops: 0
Pkts: 60616843  Bytes: 57773237704   Drops: 1280513
Pkts: 215104502  Bytes: 202537648280   Drops: 1302599. 
```

I am open to any pattern searching methodolofy ( grep,awk,python)

Thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T20:50:12.287

谷歌搜索几分钟会发现你需要正则表达式，而答案类似于

```
re.search(r'(?<=Drops: )\d+', input_string).group(0) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T20:58:26.043

你`awk`可以这样做：

```
awk '{ print $5, $6 }' text 
```

# bash - Remove double properties in properties file using bash

> ID：14128883
> 
> 赞同：2
> 
> 时间：2013-01-02T20:44:31.887
> 
> 标签：bash

I'm currently working on a project where we have a .properties file containing thousands of kvp's. Some of these kvp's exist multiple times... so I want to remove the duplicate lines (if they are identical of course). But I'm also afraid that some keys are duplicate, but have different values.

I'm pretty sure there are much easier ways to do it, but I want to pick up bash scripting as an additional skill, but... I basically have zero bash knowledge. Nonetheless I came up with the following solution, but I highly doubt this is the most efficient way to do this. Is there an easier way to do this?

```
#! /bin/bash

# Remove unique lines (key and value are equal)
sort $1 | uniq > temporary.tmp

# Find keys that are not unique
doubleKeys=`awk -F"=" '{print $1}' temporary.tmp | sort | uniq -d` 

if [ -z $doubleKeys ] ; then
   mv temporary.tmp final.txt
   echo "Removed doubles, final file is final.txt"
else
   echo $doubleKeys > DoubleKeys.log
   rm temporary.tmp
   echo "Double keys found with different values, see DoubleKeys.log"
fi 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T21:18:23.883

到目前为止，代码看起来还不错。一些小问题

*   你可以`sort $1 | uniq`用`sort -u $1`
*   第二个`sort`不是必需的，因为`temporary.tmp`已经排序
*   替代`awk -F=`可能是`cut -d= -f1`，但我不确定它是否更有效

除非您运行多次，否则我不会花太多时间优化它。与每月等待一两分钟相比，轻松调整和摆弄花费更多。

# php - using many-to-many relationship causes exceptions

> ID：14128886
> 
> 赞同：1
> 
> 时间：2013-01-02T20:44:55.127
> 
> 标签：php, orm, many-to-many, propel

After some ORM framework research, I decided to use propel for the first time. Everything worked perfectly until I started to work on a many-to-many relationship for the caching mechanism. After struggling with getting a cache entry inserted with multiple cache tags (using transactions, without persisting all objects manually, ...) I face the problem of querying a cache entry by a given cache tag. Using filterByTag (which causes the use of a useTagQuery and so on) always ends in an Exception

`Cannot fetch ColumnMap for undefined column: cache_id`

The causing piece of code:

```
/**
 * Drops all cache entries which are associated to the given tag
 * 
 * @param $tag string The tag to drop
 * @return void
 */
public function dropTag($tag) {
    $cTag = CacheTagQuery::create()->findOneByTag($tag);
    if($cTag instanceof CacheTag) {
        $cEntries = CacheQuery::create()->filterByTag($cTag)->find();
        foreach($cEntries as $cEntry) {
            if($cEntry instanceof Cache) {
                $cEntry->delete();
            }
        }
    }
} 
```

Relevant part of schema.xml:

```
<table name="tag">
    <column name="id" type="INTEGER" required="true" primaryKey="true" autoIncrement="true" />
    <column name="tag" type="VARCHAR" size="255" />
    <column name="type" type="INTEGER" inheritance="single">
        <inheritance key="1" class="Tag"/>
        <inheritance key="2" class="CacheTag" extends="Tag"/>
    </column>
    <behavior name="cachedrop" />
</table>
<table name="cache">
    <column name="id" type="INTEGER" required="true" primaryKey="true" autoIncrement="true" />
    <column name="crdate" type="TIMESTAMP" />
    <behavior name="timestampable">
        <parameter name="create_column" value="crdate" />
        <parameter name="disable_updated_at" value="true" />
    </behavior>
    <column name="lifetime" type="INTEGER" defaultValue="-1"  />
    <column name="name" type="VARCHAR" />
    <column name="content" type="CLOB" size="4294967296" required="true" />
</table>
<table name="cache_tag_mm" isCrossRef="true">
    <column name="cache_id" type="INTEGER" primaryKey="true" />
    <column name="tag_id" type="INTEGER" primaryKey="true" />
    <foreign-key foreignTable="cache">
        <reference local="cache_id" foreign="id"/>
    </foreign-key>
    <foreign-key foreignTable="tag">
        <reference local="tag_id" foreign="id"/>
    </foreign-key>
</table> 
```

For inserting I have to persist each tag manually before persisting the cache entry:

```
try {
        // create our new cache entry
    $cEntry = new Cache();
    $cEntry->setContent($content);
    $cEntry->setLifetime($lifetime);
    $cEntry->setName($cachetag);
    if(count($processedTags) > 0) {
        foreach($processedTags as $pTag) {
            $cTag = CacheTagQuery::create()->filterByTag($pTag)->findOneOrCreate();
            if($cTag->isNew()) {
                $cTag->save();
            }
            $cEntry->addTag($cTag);
        }
    }
        // finally persist the entry
    $cEntry->save();
} catch(Exception $e) {
    Logger::debugLog($e->getMessage());
} 
```

Dev Environment:

PHP 5.3.15 with Suhosin-Patch (cli) (built: Aug 24 2012 17:45:44) Copyright (c) 1997-2012 The PHP Group Zend Engine v2.3.0, Copyright (c) 1998-2012 Zend Technologies with Zend Debugger v5.2, Copyright (c) 1999-2009, by Zend Technologies

Apache/2.2.22 (Unix)

Even the Many-To-Many example (http://propelorm.org/documentation/04-relationships.html#manytomany_relationships) on propel homepage causes this problem.

# Update

TagTableMap.php

```
class TagTableMap extends TableMap
{

    /**
     * The (dot-path) name of this class
     */
    const CLASS_NAME = 'orm.map.TagTableMap';

    /**
     * Initialize the table attributes, columns and validators
     * Relations are not initialized by this method since they are lazy loaded
     *
     * @return void
     * @throws PropelException
     */
    public function initialize()
    {
        // attributes
        $this->setName('tag');
        $this->setPhpName('Tag');
        $this->setClassname('Tag');
        $this->setPackage('orm');
        $this->setUseIdGenerator(true);
        $this->setSingleTableInheritance(true);
        // columns
        $this->addPrimaryKey('ID', 'Id', 'INTEGER', true, null, null);
        $this->addColumn('TAG', 'Tag', 'VARCHAR', false, 255, null);
        $this->addColumn('TYPE', 'Type', 'INTEGER', false, null, null);
        // validators
    } // initialize()

    /**
     * Build the RelationMap objects for this table relationships
     */
    public function buildRelations()
    {
        $this->addRelation('CacheTagMm', 'CacheTagMm', RelationMap::ONE_TO_MANY, array('id' => 'tag_id', ), null, null, 'CacheTagMms');
        $this->addRelation('Cache', 'Cache', RelationMap::MANY_TO_MANY, array(), null, null, 'Caches');
    } // buildRelations()

    /**
     *
     * Gets the list of behaviors registered for this table
     *
     * @return array Associative array (name => parameters) of behaviors
     */
    public function getBehaviors()
    {
        return array(
            'cachedrop' => array(),
        );
    } // getBehaviors()

} // TagTableMap 
```

CacheTableMap.php

```
class CacheTableMap extends TableMap
{

    /**
     * The (dot-path) name of this class
     */
    const CLASS_NAME = 'orm.map.CacheTableMap';

    /**
     * Initialize the table attributes, columns and validators
     * Relations are not initialized by this method since they are lazy loaded
     *
     * @return void
     * @throws PropelException
     */
    public function initialize()
    {
        // attributes
        $this->setName('cache');
        $this->setPhpName('Cache');
        $this->setClassname('Cache');
        $this->setPackage('orm');
        $this->setUseIdGenerator(true);
        // columns
        $this->addPrimaryKey('ID', 'Id', 'INTEGER', true, null, null);
        $this->addColumn('CRDATE', 'Crdate', 'TIMESTAMP', false, null, null);
        $this->addColumn('LIFETIME', 'Lifetime', 'INTEGER', false, null, -1);
        $this->addColumn('NAME', 'Name', 'VARCHAR', false, 255, null);
        $this->addColumn('CONTENT', 'Content', 'CLOB', true, 4294967296, null);
        // validators
    } // initialize()

    /**
     * Build the RelationMap objects for this table relationships
     */
    public function buildRelations()
    {
        $this->addRelation('CacheTagMm', 'CacheTagMm', RelationMap::ONE_TO_MANY, array('id' => 'cache_id', ), null, null, 'CacheTagMms');
        $this->addRelation('Tag', 'Tag', RelationMap::MANY_TO_MANY, array(), null, null, 'Tags');
    } // buildRelations()

    /**
     *
     * Gets the list of behaviors registered for this table
     *
     * @return array Associative array (name => parameters) of behaviors
     */
    public function getBehaviors()
    {
        return array(
            'timestampable' => array('create_column' => 'crdate', 'update_column' => 'updated_at', 'disable_updated_at' => 'true', ),
        );
    } // getBehaviors()

} // CacheTableMap 
```

CacheTagMmTableMap.php

```
class CacheTagMmTableMap extends TableMap
{

/**
 * The (dot-path) name of this class
 */
const CLASS_NAME = 'orm.map.CacheTagMmTableMap';

/**
 * Initialize the table attributes, columns and validators
 * Relations are not initialized by this method since they are lazy loaded
 *
 * @return void
 * @throws PropelException
 */
public function initialize()
{
    // attributes
    $this->setName('cache_tag_mm');
    $this->setPhpName('CacheTagMm');
    $this->setClassname('CacheTagMm');
    $this->setPackage('orm');
    $this->setUseIdGenerator(true);
    $this->setIsCrossRef(true);
    // columns
    $this->addPrimaryKey('ID', 'Id', 'INTEGER', true, null, null);
    $this->addForeignKey('CACHE_ID', 'CacheId', 'INTEGER', 'cache', 'ID', false, null, null);
    $this->addForeignKey('TAG_ID', 'TagId', 'INTEGER', 'tag', 'ID', false, null, null);
    // validators
} // initialize()

/**
 * Build the RelationMap objects for this table relationships
 */
public function buildRelations()
{
    $this->addRelation('Cache', 'Cache', RelationMap::MANY_TO_ONE, array('cache_id' => 'id', ), null, null);
    $this->addRelation('Tag', 'Tag', RelationMap::MANY_TO_ONE, array('tag_id' => 'id', ), null, null);
} // buildRelations()

} // CacheTagMmTableMap 
```

Exception Backtrace:

```
13 TableMap::getColumn("cache_id")  
12 TableMap::addRelation("CacheTagMm", "CacheTagMm", 2, array, NULL, NULL, "CacheTagMms")  
11 CacheTableMap::buildRelations()  
10 TableMap::getRelations()  
9 TableMap::getRelation("CacheTagMm")  
8 BaseCacheQuery::joinCacheTagMm(NULL, "LEFT JOIN")  
7 BaseCacheQuery::useCacheTagMmQuery() 
```

# Update

Digging further into the TableMaps I figured out that each (Tag, Cache, CacheTagMm) built buildRelations() function contains wrong code. I edited those parts by doing a strtoupper() on the column mapping array passed as 4th argument. CacheTableMap example:

```
public function buildRelations()
{
    $this->addRelation('Cache', 'Cache', RelationMap::MANY_TO_ONE, array('CACHE_ID' => 'ID', ), null, null);
    $this->addRelation('Tag', 'Tag', RelationMap::MANY_TO_ONE, array('TAG_ID' => 'ID', ), null, null);
} // buildRelations() 
```

This fixed the problem! However i don't understand why propel builds the files like that. Is there an error in my schema.xml? Some problem with the default naming method? Only Problem is that i have to update those files each time i edited my schema and rebuilt the project. I downgraded phing version to 2.4.5 (as mentioned as min version in the documentation), but that didn't change anything. Any hints?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T17:16:49.853

我真的建议不要更改 propel 中生成的文件，否则当您更改架构中的某些内容时，您会非常头疼。对 tablenames 的更改是 propel 自动执行的，但除非您最初在生成的文本中进行了更改，否则列映射不应该引发错误，并且当您构建 propel 时，它应该会引发错误如果您定义的关系有问题。

您可能想尝试生成一个新的 Propel 目录，以及新生成的文件并将它们放在您拥有的文件上，然后查看您的关系是否仍然存在错误。只需做一个非常简单的查询，例如

```
 $collection = CacheQuery()::create()
          ->limit(1)
          ->findOne();

    $relationshipTest = $collection->getTag(); 
```

看看你是否仍然得到错误。一旦你开始重命名生成文件中的内容，你就会陷入困境。

如果你想覆盖 propel 的默认命名约定，你可以在你的模式中使用 phpname 属性，这将用你喜欢的任何东西覆盖 propel 的默认值（如果你想保留你的下划线）

# c# - "Removing" cookie isn't working

> ID：14128887
> 
> 赞同：2
> 
> 时间：2013-01-02T20:44:56.307
> 
> 标签：c#, asp.net, cookies

So one of my co-workers used the following code to "remove" the cookies from the browser. This should work, but checking the cookies right after loading the page the cookies are still there. Is there something wrong with this code or is there a bigger problem?

```
protected void Page_Load(object sender, EventArgs e)
{
    HttpCookie aCookie;
    string cookieName;
    int limit = Request.Cookies.Count;

    for (int i = 0; i < limit; i++)
    {
        cookieName = Request.Cookies[i].Name;
        aCookie = new HttpCookie(cookieName);
        aCookie.Expires = DateTime.Now.AddDays(-1);

        if (cookieName != "Lang")
            Response.Cookies.Add(aCookie);
    }
    FormsAuthentication.SignOut();
    Response.Redirect("/default.aspx");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T20:48:32.453

This is the code that I've used to kill the cookie and it works for me.

```
string cookieName;
    int limit = Request.Cookies.Count;

    for (int i = 0; i < limit; i++)
    {
        cookieName = Request.Cookies[i].Name;
        var cookie = new HttpCookie(cookieName);
        cookie.Value = "";
        cookie.Expires = DateTime.Now.AddDays(-3);
        //Only if HTTPS
        cookie.Secure = true;
        //Only if a domain is specified, and obviously, it should match the domain of the app
        cookie.Domain = "XYZ";

        Response.Cookies.Add(cookie);
    }
    FormsAuthentication.SignOut();
    Response.Redirect("/default.aspx"); 
```

Make sure you write the cookie to the response, which you are doing.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T20:49:20.693

您的语法看起来是正确的，但是，我认为您缺少的是将 cookie 的更改发布回系统。

您设置了 cookie 过期时间，但您需要`Response.Cookies.Add()`使用相同的名称来覆盖旧的 cookie。

# cuda - CUDA 会自动为您进行负载平衡吗？

> ID：14128895
> 
> 赞同：7
> 
> 时间：2013-01-02T20:45:48.487
> 
> 标签：cuda, load-balancing, gpgpu

我希望对 CUDA C 中负载平衡的最佳实践提供一些一般性建议和说明，特别是：

*   如果经线中的 1 个线程比其他 31 个线程花费更长的时间，它会阻止其他 31 个线程完成吗？
*   如果是这样，是否会将备用处理能力分配给另一个warp？
*   为什么我们需要 warp*和*block 的概念？在我看来，warp 只是 32 个线程的一小块。
*   所以一般来说，对于给定的内核调用，我需要什么负载平衡？
    *   每个经线中的线程？
    *   每个块中的线程？
    *   跨所有块的线程？

最后，举个例子，您将为以下功能使用哪些负载平衡技术：

1.  我有一个`x0`点向量`N`：`[1, 2, 3, ..., N]`
2.  我随机选择 5% 的点和`log`它们（或一些复杂的函数）
3.  我将结果向量`x1`（例如`[1, log(2), 3, 4, 5, ..., N]`）写入内存
4.  我重复上述 2 次操作`x1`以产生`x2`（例如`[1, log(log(2)), 3, 4, log(5), ..., N]`），然后再进行 8 次迭代以产生`x3`...`x10`
5.  我回来`x10`

非常感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T22:17:05.770

线程分为三个级别，它们的调度方式不同。Warps 利用 SIMD 来获得更高的计算密度。线程块利用多线程来实现延迟容限。网格为跨 SM 的负载平衡提供独立的、粗粒度的工作单元。

# 经线中的线程

硬件一起执行 warp 的 32 个线程。它可以执行具有不同数据的单个指令的 32 个实例。如果线程采用不同的控制流，因此它们不会都执行相同的指令，那么这 32 个执行资源中的一些将在指令执行时处于空闲状态。这在 CUDA 参考中称为*控制发散。*

如果内核表现出很大的控制分歧，那么在这个级别上重新分配工作可能是值得的。这通过使所有执行资源在一个扭曲中保持忙碌来平衡工作。您可以在线程之间重新分配工作，如下所示。

```
// Identify which data should be processed
if (should_do_work(threadIdx.x)) {
  int tmp_index = atomicAdd(&tmp_counter, 1); 
  tmp[tmp_index] = threadIdx.x;
}
__syncthreads();

// Assign that work to the first threads in the block
if (threadIdx.x < tmp_counter) {
  int thread_index = tmp[threadIdx.x];
  do_work(thread_index); // Thread threadIdx.x does work on behalf of thread tmp[threadIdx.x]
} 
```

# 块中的翘曲

在 SM 上，硬件调度会扭曲到执行单元上。一些指令需要一段时间才能完成，因此调度程序交错执行多个 warp 以保持执行单元忙碌。如果某些 warp 尚未准备好执行，则会跳过它们而不会降低性能。

在这个级别通常不需要负载平衡。只需确保每个线程块有足够的 warp 可用，以便调度程序始终可以找到准备执行的 warp。

# 网格中的块

运行时系统将块调度到 SM 上。多个块可以在一个 SM 上同时运行。

在这个级别通常不需要负载平衡。只需确保有足够的线程块可用于多次填充所有 SM。当一些 SM 空闲并且没有更多线程块准备好执行时，过度供应线程块以最小化内核结束时的负载不平衡是有用的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-03T15:30:00.730

正如其他人已经说过的那样，warp 中的线程使用称为单指令多数据 (SIMD) 的方案。SIMD 意味着硬件中有一个指令解码单元控制多个算术和逻辑单元 (ALU)。CUDA ' core'基本上只是一个浮点ALU，而不是与CPU内核相同的完整内核。虽然确切的 CUDA 内核与指令解码器的比率在不同的 CUDA Compute Capability 版本之间有所不同，但它们都使用这种方案。由于它们都使用相同的指令解码器，线程束中的每个线程将在每个时钟周期执行完全相同的指令。分配给该 warp 中不遵循当前执行代码路径的线程的内核将在该时钟周期内不执行任何操作。没有办法避免这种情况，因为这是有意的物理硬件限制。因此，如果您在一个 warp 中有 32 个线程，并且这 32 个线程中的每一个线程都遵循不同的代码路径，那么您将不会在该 warp 中从并行性中获得任何加速。它将依次执行这 32 个代码路径中的每一个。这就是为什么warp中的所有线程尽可能遵循相同的代码路径是理想的，因为warp中的并行性只有在多个线程遵循相同的代码路径时才有可能。

这样设计硬件的原因是它节省了芯片空间。由于每个内核没有自己的指令解码器，内核本身占用的芯片空间更少（并且使用更少的功率）。拥有更小的内核，每个内核使用更少的功率意味着更多的内核可以封装到芯片上。拥有这样的小内核使得 GPU 可以在每个芯片上拥有数百或数千个内核，而 CPU 只有 4 或 8 个，即使同时保持相似的芯片尺寸和功耗（和散热）水平。与 SIMD 的权衡是，您可以将更多的 ALU 打包到芯片上并获得更多的并行性，但只有当这些 ALU 都执行相同的代码路径时，您才能获得加速。对于 GPU 而言，这种折衷程度如此之高的原因 s 是 3D 图形处理中涉及的大部分计算只是浮点矩阵乘法。SIMD 非常适合矩阵乘法，因为计算结果矩阵的每个输出值的过程是相同的，只是在不同的数据上。此外，每个输出值都可以完全独立于其他输出值进行计算，因此线程根本不需要相互通信。顺便说一句，类似的模式（通常甚至矩阵乘法本身）也恰好经常出现在科学和工程应用中。这就是 GPU 上的通用处理 (GPGPU) 诞生的原因。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-02T21:49:50.263

> 如果经线中的 1 个线程比其他 31 个线程花费更长的时间，它会阻止其他 31 个线程完成吗？

是的。一旦您在 Warp 中出现分歧，调度程序需要获取所有分歧分支并一一处理。不在当前执行的分支中的线程的计算能力将丢失。您可以查看 CUDA 编程指南，它很好地解释了到底发生了什么。

> 如果是这样，是否会将备用处理能力分配给另一个warp？

不，不幸的是，这完全丢失了。

> 为什么我们需要 warp 和 block 的概念？在我看来，warp 只是 32 个线程的一小块。

因为 Warp 必须是 SIMD（单指令，多数据）才能实现最佳性能，所以块内的 Warp 可以完全发散，但是它们共享一些其他资源。（共享内存、寄存器等）

> 所以一般来说，对于给定的内核调用，我需要什么负载平衡？

我不认为负载平衡是正确的词。只要确保你总是有足够的线程一直在执行，并避免扭曲内部的分歧。同样，CUDA Programming Guide 是一本很好的读物。

现在举个例子：

您可以使用 m=0..N*0.05 执行 m 个线程，每个线程选择一个随机数并将“复杂函数”的结果放入 x1[m]。但是，在大范围内从全局内存中随机读取并不是使用 GPU 可以做的最有效的事情，因此您还应该考虑是否真的需要完全随机。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-03T01:51:29.190

其他人为理论问题提供了很好的答案。

对于您的示例，您可能会考虑按如下方式重组问题：

1.  有一个`x`点向量`N`：`[1, 2, 3, ..., N]`
2.  对 的每个元素计算一些复杂的函数`x`，产生`y`.
3.  随机抽样 的子集`y`以产生`y0`通过`y10`.

步骤 2 对每个输入元素只操作一次，而不考虑是否需要该值。如果步骤 3 的采样在没有替换的情况下完成，这意味着您将计算 2 倍于实际需要的元素数量，但您将在没有控制分歧的情况下计算所有内容，并且所有内存访问都将是一致的。这些通常是 GPU 上比计算本身更重要的速度驱动因素，但这取决于复杂功能的实际用途。

第 3 步将有一个不连贯的内存访问模式，因此您必须决定是在 GPU 上执行此操作更好，还是将其传输回 CPU 并在那里进行采样是否更快。

根据下一个计算是什么，您可能会重组第 3 步，改为在 [0,N) 中为每个元素随机绘制一个整数。如果该值在 [N/2,N) 中，则在下一次计算中忽略它。如果它在 [0,N/2) 中，则将其值与该虚拟`y*`数组的累加器相关联（或任何适合您的计算的）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-03T22:53:22.683

你的例子是展示减少的一个很好的方式。

```
I have a vector x0 of N points: [1, 2, 3, ..., N]
I randomly pick 50% of the points and log them (or some complicated function) (1)
I write the resulting vector x1 to memory (2)
I repeat the above 2 operations on x1 to yield x2, and then do a further 8 iterations to  yield x3 ... x10 (3)
I return x10 (4) 
```

说|x0| = 1024，然后您选择 50% 的点。

第一阶段可能是您必须从全局内存中读取的唯一阶段，我将向您展示原因。

512 个线程从内存中读取 512 个值（1），将它们存储到共享内存中（2），然后对于步骤（3），256 个线程将从共享内存中读取随机值并将它们也存储在共享内存中。你这样做直到你最终得到一个线程，这会将它写回全局内存（4）。

您可以通过在初始步骤让 256 个线程读取两个值或 128 个线程读取 4 个值等来进一步扩展它......

# jquery - jQuery remove() html 5 音频 mediaelementjs

> ID：14128897
> 
> 赞同：3
> 
> 时间：2013-01-02T20:45:58.563
> 
> 标签：jquery, html, firefox, audio

嗨，我有一个简单的问题，我希望有一个简单的解决方案。

我的页面上有一个 HTML 音频元素

```
<audio id='foo' control="control">
    <source id='mp3' src='somefile.mp3' type='audio/mp3'>
</audio> 
```

在 jQuery 中，我有`$('audio').remove();`，但音频播放器留在页面上。我也试过了`$('#foo').remove();`。

我正在使用 mediaelementjs 播放器，我不知道这是否是导致问题的原因。

有人知道我如何删除音频元素吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T20:53:07.190

您可以将其包装在占位符 div 中，然后执行`$("#wrapper").html("");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-22T18:59:21.083

我在`src`从 DOM 中删除元素之前删除属性时遇到了这个问题。

删除`src`autoloaded `<audio`> 元素 ( `<audio "preload"="auto" ...`) 的属性会中止某些设备上的连接（如`firefox-os`）。而不是删除`src`属性，只需清除它：

```
 try {
      $el.attr("src", "");
    } catch(error) {}

    $el.remove(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-09T11:48:42.597

这是一个解决方案（不是解决方法）包装成一个元素并这样做：

HTML

```
<div id="element">
    <audio id='foo' control="control">
        <source id='mp3' src='somefile.mp3' type='audio/mp3'>
    </audio>
</div> 
```

jQuery

```
$('#element').empty(); 
```

# ruby - 使用 Watir 在 HTML 表中迭代和填充数据的更好方法

> ID：14128901
> 
> 赞同：1
> 
> 时间：2013-01-02T20:46:03.733
> 
> 标签：ruby, selenium, watir, watir-webdriver, performance

我有一个可能包含多达 50 行和 9 列的表。但是，我用来填写表中数据的代码需要很长时间。

有没有更快的方法呢？这是我的代码

```
table = $browser.div(:id => "market").table(:id => 'tableTradeIndMarket')
  i = 3 + rand(1..table.rows.length-4)      

      table.rows[i].cells[4].select_list.select 'Buy'     
      table.rows[i].cells[5].select_list.select 'Market'          
      table.rows[i].cells[6].text_field.set ($share) 

      table.rows[i+1].cells[4].select_list.select 'Buy'       
      table.rows[i+1].cells[5].select_list.select 'Limit'     
      table.rows[i+1].cells[6].text_field.set ($share) 
      //To take out dollar sign which is found on the second column and put that value in to another column of the same row
      table.rows[i+1].cells[8].text_field.set(
        table.rows[i+1].cells[2].text[1..table.rows[i+1].cells[2].text.length]
      ) 

      table.rows[i+1].cells[9].select_list.select 'Day'  

      table.rows[i+2].cells[4].select_list.select 'Buy'       
      table.rows[i+2].cells[5].select_list.select 'Stop'      
      table.rows[i+2].cells[6].text_field.set ($share) 
      table.rows[i+2].cells[7].text_field.set ( table.rows[i+2].cells[2].text[1..table.rows[i+2].cells[2].text.length]) 
      table.rows[i+2].cells[9].select_list.select 'GTC'  

      table.rows[i+3].cells[4].select_list.select 'Buy'       
      table.rows[i+3].cells[5].select_list.select 'Stop/Limit'    
      table.rows[i+3].cells[6].text_field.set ($share) 
      table.rows[i+3].cells[7].text_field.set ( table.rows[i+3].cells[2].text[1..table.rows[i+3].cells[2].text.length]) 
      table.rows[i+3].cells[8].text_field.set ( table.rows[i+3].cells[2].text[1..table.rows[i+3].cells[2].text.length]) 
      table.rows[i+3].cells[9].select_list.select 'Day' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T22:29:13.720

您最好的选择可能是在 Nokogiri 的帮助下找到行元素。Željko Filipin 有一篇关于这样做的好博文 - [http://zeljkofilipin.com/watir-nokogiri](http://zeljkofilipin.com/watir-nokogiri)

例如，您的第 i 行的输入将是：

```
row_css = Nokogiri::HTML(browser.html).at_css("table#tableTradeIndMarket tr:nth-of-type(#{i})").css_path
row = browser.element(:css, row_css).to_subtype
row.cells[4].select_list.select 'Buy'     
row.cells[5].select_list.select 'Market'          
row.cells[6].text_field.set ($share) 
```

您可以将相同的概念应用于您正在输入的其他行。

这至少对我正在使用的测试表有所帮助。

# netty - Netty - 调用 channel.disconnect() 实际上关闭了通道

> ID：14128910
> 
> 赞同：6
> 
> 时间：2013-01-02T20:47:19.693
> 
> 标签：netty

我正在使用 Netty 版本 2.6.0.Final。

如果我正确理解 Netty 文档，在 Channel 上调用 disconnect() 应该允许我稍后调用 connect() 再次连接。但是，当我调用 disconnect() 时，我的 SimpleChannelHandler 子类的 channelDisconnected() 和 channelClosed() 都会被调用。

我在调试模式下打开它，基本上事件的顺序是：

1.  我在我的频道上调用 disconnect()
2.  Channels.disconnect() 被调用：

    ```
    public static ChannelFuture disconnect(Channel channel) {
      ChannelFuture future = future(channel);
      channel.getPipeline().sendDownstream(new DownstreamChannelStateEvent(
            channel, future, ChannelState.CONNECTED, null));
      return future;
    } 
    ```

3.  最终，NioSocketPipelineSink.eventSunk() 被调用，相关部分是：

    ```
     case CONNECTED:
            if (value != null) {
                connect(channel, future, (SocketAddress) value);
            } else {
                channel.worker.close(channel, future);
            }
            break; 
    ```

因此，由于值为 null 并且状态为 CONNECTED，因此通道将关闭（尽管根据[此处](http://docs.jboss.org/netty/3.2/api/org/jboss/netty/channel/ChannelState.html)CONNECTED 与 null 应该表示断开连接的请求，不一定关闭。

那么我在这里错过了什么吗？如果 disconnect() 只是导致通道被关闭，那么它有什么意义呢？

这不是一个大问题，因为如果我需要，我可以为我的情况创建一个新通道，但从最初的检查来看，这似乎是一个 Netty 错误，除非我只是误解了它应该如何工作或者我'我在做一些傻事。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-02T22:56:08.983

Netty 的一个目的是提供一个统一的 Channel 抽象，无论底层实现是 OIO、NIO 还是 AIO，它对于面向连接的套接字 (TCP) 和无连接套接字 (UDP) 的工作方式大致相同。由于存在很多差异，统一接口对于特定实现的某些部分看起来会有些奇怪。

断开 TCP 套接字的行为意味着关闭它（至少从 Java API 的角度来看）。但是断开一个 UDP 套接字并不意味着关闭它，只是删除了本地 ip 地址/端口和远程 ip 地址/端口之间的关联。

所以，不，你没有做任何愚蠢的事情，但我建议改为对 OPEN/CLOSE 事件采取行动，除非你真的需要在其生命周期内将 UDP 套接字“连接”到不同的远程目标。

编辑：在前一段中错过了一个重要的“不”。

# javascript - Mouseout 在嵌套元素上触发，我只希望它在离开容器时触发

> ID：14128914
> 
> 赞同：5
> 
> 时间：2013-01-02T20:47:37.907
> 
> 标签：javascript

> **可能重复：**
> [Javascript：触发了多个 mouseout 事件](https://stackoverflow.com/questions/2705182/javascript-multiple-mouseout-events-triggered)

我一直有一个问题，我希望查看鼠标何时退出容器，并且当我将鼠标悬停在容器中包含的元素上时会触发该事件。我知道 jQuery 已经用`.hover`函数解决了这个问题，但我不想使用整个库来解决单个问题。我如何在 JavaScript 中做到这一点？

我的问题与[这个问题](https://stackoverflow.com/questions/9220081/if-a-nested-element-fires-an-event-dont-let-the-container-handle-it)类似，但我没有使用 jQuery。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T21:26:38.890

Felix 在他的第一个链接中得到了正确的答案。引用[文章](http://www.quirksmode.org/js/events_mouse.html)...

> 另一个显示停止器是，当您将鼠标移动到图层中，然后移动到链接上时，浏览器会在图层上注册一个 mouseout 事件！这对我来说没有多大意义（鼠标仍在图层中），但所有浏览器都同意这一点。
> 
> 那么我们如何拒绝当鼠标实际离开层时没有发生的任何鼠标移出呢？

```
function doSomething(e) {
if (!e) var e = window.event;
var tg = (window.event) ? e.srcElement : e.target;
if (tg.nodeName != 'DIV') return;
var reltg = (e.relatedTarget) ? e.relatedTarget : e.toElement;
while (reltg != tg && reltg.nodeName != 'BODY')
    reltg= reltg.parentNode
if (reltg== tg) return;
// Mouseout took place when mouse actually left layer
// Handle event
} 
```

> 首先获取事件目标，即。鼠标移出的元素。如果目标不是 DIV（层），则立即结束函数，因为鼠标肯定没有离开层。
> 
> 如果目标是图层，我们仍然不确定鼠标是离开图层还是进入图层内的链接。因此我们要检查事件的relatedTarget/toElement，即。鼠标移动到的元素。
> 
> 我们读出这个元素，然后我们将在 DOM 树中向上移动，直到遇到事件的目标（即 DIV）或 body 元素。
> 
> 如果我们遇到目标鼠标移向层的子元素，那么鼠标实际上并没有离开层。我们停止该功能。
> 
> 当函数通过所有这些检查时，我们可以确定鼠标实际上已经离开了图层，我们可以采取适当的行动（通常使图层不可见）。

# wpf - 将我的 ViewModelBase 移动到可移植类库

> ID：14128921
> 
> 赞同：3
> 
> 时间：2013-01-02T20:48:17.583
> 
> 标签：wpf, portable-class-library

我正在尝试使用可移植类库来减少我自己的 MVVM 框架的每个平台的程序集。

所以我目前有这段代码（受@lbugnion MVVMLight 启发）

```
 public static bool IsInDesignModeStatic
    {
        get
        {
            if (!_isInDesignMode.HasValue)
            { 
```

#如果银光

```
 _isInDesignMode = DesignerProperties.IsInDesignTool; 
```

＃别的

```
 var prop = DesignerProperties.IsInDesignModeProperty;
                _isInDesignMode
                    = (bool)DependencyPropertyDescriptor
                                 .FromProperty(prop, typeof(FrameworkElement))
                                 .Metadata.DefaultValue;

                // Just to be sure
                if (!_isInDesignMode.Value
                    && Process.GetCurrentProcess().ProcessName.StartsWith("devenv", StringComparison.Ordinal))
                {
                    _isInDesignMode = true;
                } 
```

＃万一

```
 }

            return _isInDesignMode.Value;
        }
    }

} 
```

但是当我尝试在 PCL 中使用它时，它无法识别 DesignerProperties 和 FrameworkElement 等。我应该如何克服这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T21:39:59.637

你可以像我在 MVVM Light PCL fork 中那样做：

[http://mvvmlight.codeplex.com/.../GalaSoft.MvvmLight (NET35)/ViewModelBase.cs](http://mvvmlight.codeplex.com/SourceControl/network/forks/onovotny/MvvmLightPortable/changeset/view/f356af74426f#GalaSoft.MvvmLight/GalaSoft.MvvmLight%20%28NET35%29/ViewModelBase.cs)

[http://mvvmlight.codeplex.com/.../GalaSoft.MvvmLight/Helpers/DesignerPlatformLibrary.cs](http://mvvmlight.codeplex.com/SourceControl/network/forks/onovotny/MvvmLightPortable/changeset/view/f356af74426f#GalaSoft.MvvmLight/Portable/GalaSoft.MvvmLight/Helpers/DesignerPlatformLibrary.cs)

使用反射加载和调用适当的调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T11:08:12.300

我认为您不应该真正将这段代码直接包含在 PCL 中。pcl 的路线图看起来不错——但我怀疑 FrameworkElement 很快就会移植。

任何一个：

*   删除此设计时代码，
*   或抽象出此代码，以便通过特定于平台的接口调用它。请参阅 msdn 上的平台抽象技术 - [http://msdn.microsoft.com/en-us/library/gg597391.aspx#abstraction](http://msdn.microsoft.com/en-us/library/gg597391.aspx#abstraction)
*   或使用@Oren 回答中的反射技术

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-03T14:52:53.237

您真的不应该在 PCL 中使用平台相关调用。PCL 的目的是共享代码，这对所有目标平台都是通用的。
如果您必须使用某些特定于平台的调用，则使用依赖注入和 IoC 隐藏实际实现并仅在 PCL 中使用接口类型，这应该可以正常工作。

# c# - 如何将参数传递给使用 System.Action 作为输入参数的数据访问层？

> ID：14128927
> 
> 赞同：3
> 
> 时间：2013-01-02T20:48:40.477
> 
> 标签：c#, unit-testing, nsubstitute

我正在尝试为我最近继承的应用程序创建一些单元测试。目前正在使用 NSubstitute，因为这是以前的程序员使用的，但我不喜欢它。

我正在测试的方法调用 DataService 类的 Create 方法。

**调用创建方法**

```
var contactProductLink = this.dsService.Create<ContactProductLink>(x =>
{
    x.ContactRoleId = prod.RoleId;
    x.ContactId = contactViewModel.ContactId;
    x.ProductId = prod.ProductId;
    x.Active = true;
    x.InsertDate = DateTime.Now;
    x.InsertUserId = user.employeeId;
    x.UpdateDate = DateTime.Now;
    x.UpdateUserId = user.employeeId;
}); 
```

**数据服务创建方法：**

```
public TEntity Create<TEntity>(Action<TEntity> propertySetter = null) where TEntity : class
{
    var tEntity = this.Context.Create<TEntity>();
    if (propertySetter != null)
    {
        propertySetter(tEntity);
    }

    return tEntity;
} 
```

我采用的方法（也许还有更好的方法）是使用 NSubstitute 来模拟 DataService。当我在最后做我的断言时，我正在检查以确保 Create 方法被调用：

```
mockDataSupplierService.Received().Create<ContactProductLink>(Arg.Any<Action<ContactProductLink>>()); 
```

但是，我还想验证发送到该方法的输入是否正确，这就是我遇到麻烦的地方。我可以获得传递给 Create 方法的 System.Action 对象，但我不知道如何提取参数（如调用 create 方法代码片段中发布的 ContactRoleId、ContactId 等）。

所以毕竟我要问的是：

1.  如何访问这些输入参数，以便验证是否将正确的参数传递给数据服务？甚至可能吗？
2.  有没有比我目前正在尝试做的更好的方法来做到这一点？

**解决方案**

```
//Arrange
mockDataSupplierService.Create<ContactProductLink>(Arg.Do<Action<ContactProductLink>>(x=> actionToPopulateEntity = x));

//Assert
mockDataSupplierService.Received().Create<ContactProductLink>(Arg.Any<Action<ContactProductLink>>());
var entity = new ContactProductLink();
actionToPopulateEntity.Invoke(entity);
Assert.AreEqual(ExpectedContactId, entity.ContactId); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T22:31:28.427

> 如何访问这些输入参数，以便验证是否将正确的参数传递给数据服务？甚至可能吗？

本质上你不能，因为不可能从动作中提取“代码”细节（考虑当你传递一个不设置任何属性的动作时会发生什么——这是完全合法的，但会破坏假设的机制）。

但是，您可以尝试这样做：

1.  创建具有初始值的实体
2.  使用[`Arg.Invoke`](http://nsubstitute.github.com/help/actions-with-arguments/)参数，*告诉*NSubstitute 使用选择的对象作为动作参数
3.  验证实体属性值是否已更改

例如：

```
// Arrange
var entity = new ContactProductLink
{
    ContactRoleId = // ...
    // ...
};

mockDataSupplierService
    .Create<ContactProductLink>(Arg<ContactProductLink>.Invoke(entity));

// Act
// ...

Assert.That(entity.ContactRoleId, Is.EqualTo(2));
// ... 
```

# ios - 删除动画期间行数更改时 UITableView 中的内部不一致

> ID：14128928
> 
> 赞同：2
> 
> 时间：2013-01-02T20:48:45.160
> 
> 标签：ios, iphone, uitableview, cocoa-touch, uikit

**场景：** 我有一个 UITableView 显示从网络资源加载的数据。与该资源的同步可能需要一段时间才能完成，并且结果是零碎加载的。网络通信通过 NSOperationQueue 在后台发生。结果通过通知传递，控制权被转移回主线程以插入新结果。发生这种情况时，用户能够对表中的数据执行操作。

**问题：** 如果用户在同步发生时对表中的某一行执行删除操作，那么在表视图动画删除时行数很可能会发生变化（因为动画会导致多次迭代通过事件循环，并调用新结果的通知处理程序）。这会导致内部不一致异常。

同步导致对表视图上的 reloadData 调用，因为新结果是分批加载的。更重要的是，它会导致行数发生变化。

我一直无法找到一种方法来知道表格正在制作动画（或在完成时收到通知），以便我可以延迟新结果的处理。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T20:55:06.713

在 beginUpdates/endUpdates 中包含所有表更改。根据文档，这些可以嵌套，因此您不应该遇到同时插入和删除的问题。

# java - Android - 在动态创建的表行之间留出空间

> ID：14128930
> 
> 赞同：0
> 
> 时间：2013-01-02T20:48:50.603
> 
> 标签：java, android, android-layout, android-widget, android-linearlayout

我在 LinearLayout 中定义了一个表格布局，如下所示：

```
 <LinearLayout
    android:layout_width="match_parent"
    android:layout_height="fill_parent"
    android:background="#E6E6E6"
    android:orientation="vertical" >

    <TableLayout
        android:id="@+id/fbTableLayout"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_margin="10dp"
        android:background="@android:color/darker_gray"
        android:stretchColumns="*" >

    </TableLayout>
</LinearLayout> 
```

我正在向 TableLayout 添加动态行，如下所示：

```
fbTableLayout = (TableLayout) findViewById(R.id.fbTableLayout);
    for (int i = 0; i < 4; i++) {
        fbTableRow = new TableRow(this);
        fbTableRow.setBackgroundColor(Color.WHITE);
        LayoutParams layoutParams = new LayoutParams(
                LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT);
        int leftMargin=10;
        int topMargin=2;
        int rightMargin=10;
        int bottomMargin=2;

        layoutParams.setMargins(leftMargin, topMargin, rightMargin, bottomMargin);

        fbTableRow.setLayoutParams(layoutParams);

        ImageView iv = new ImageView(this);
        iv.setBackgroundDrawable(getResources().getDrawable(
                R.drawable.ic_launcher));
        iv.setLayoutParams(new LayoutParams(0, LayoutParams.WRAP_CONTENT,
                0.25f));

        TextView tv = new TextView(this);
        tv.setText("Album "+ i);
        tv.setLayoutParams(new LayoutParams(0, LayoutParams.WRAP_CONTENT,
                0.75f));

        fbTableRow.addView(iv);
        fbTableRow.addView(tv);
        fbTableLayout.addView(fbTableRow, new TableLayout.LayoutParams(
                LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT));
    } 
```

但我无法在生成的行之间生成空格。布局如附图所示。

![在此处输入图像描述](../Images/c826f087400c8877dc844180eae6a98e.png)

我已经通过 stackoverflow 中给出的许多解决方案来解决这个问题，但没有一个对我有用。不知道我错过了什么。任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T20:58:15.910

添加另一个带有空白图像的表格行（在循环中）。指定图像的大小以创建空间所需的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T20:55:07.227

您在添加表格行时是否尝试过此操作？

```
fbTableLayout.addView(fbTableRow, layoutParams); 
```

如果没有，您可以尝试在表格行中的各个视图上设置边距，但我很确定在将行添加到表格布局时，上面应该应用布局参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T21:29:06.087

setMargins 方法的文档包括以下注释：

> 需要调用 requestLayout() 以便考虑新的边距。requestLayout() 可能会根据布局方向覆盖左右边距。

...所以要尝试的一件事是`fbTableLayout.requestLayout()`在添加所有行后调用。这可能不会有什么不同，因为视图应该在您已经发布的代码中变得无效，但尝试一下不会有什么坏处。

如果这不起作用，您可以在每个表格行中使用另一个视图组（例如 FrameLayout）来包含您的 ImageView 和 TextView 并在那里设置您的填充。

# php - 使用wordpress中的复选框隐藏基于标签的帖子？

> ID：14128933
> 
> 赞同：0
> 
> 时间：2013-01-02T20:49:08.023
> 
> 标签：php, wordpress-theming, wordpress

好的，所以我正在制作一个健身网站，在我的一个页面上，我展示了所有带有“锻炼”标签的帖子。在页面的左侧，我有一个与帖子相关联的标签列表，我希望它们用作过滤器。例如，如果腹部复选框被选中，则所有没有腹部标签的帖子都会从结果中消失。

对于视觉，这是网站：[http ://wpdev.connectionsquad.com/fitness/workouts/](http://wpdev.connectionsquad.com/fitness/workouts/)

我想我知道如何使用以下代码根据标签过滤帖子：

```
<?php
$args=array(
'showposts'=>10,
'tag__not_in' => array('4','6'),
 );
query_posts($args); ?> 
```

但是我不知道如何仅在选中特定复选框时才使此代码处于活动状态。我知道如何使用 jquery 来做到这一点。我过去做过类似的事情。对于完整的效果而不仅仅是视觉效果，这正是我正在寻找的：http: [//mihealthandfitness.org/Fitness/WorkoutFinder.html](http://mihealthandfitness.org/Fitness/WorkoutFinder.html)

我为每个复选框提供的代码是

```
<li class="clearfix">
    <h4>Abdominals</h4>
    <input id="" name="" type="checkbox" value="" />
</li> 
```

我不使用 jquery，而是希望使用 php 来完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T20:54:04.793

要使用 WordPress 框架，即仅限 PHP，请尝试：

```
$YOUR_TAG = 'Abdominals';
query_posts('tag='. $YOUR_TAG .'); 
```

$YOUR_TAG 变量应与相应帖子的相应标签相对应。有关更多信息，请参阅[文档](http://codex.wordpress.org/Function_Reference/query_posts)。

# javascript - 如何在 jquery.datatables 中显示复选框？

> ID：14128939
> 
> 赞同：14
> 
> 时间：2013-01-02T20:49:32.490
> 
> 标签：javascript, jquery, datatables

我正在使用数据表，并且我有以下代码来生成表。我想显示读取、写入、执行和管理值的复选框。如果该值等于 1 ，我希望选中该复选框。如果未选中 0 个复选框。

Javascript

```
<script type="text/javascript" charset="utf-8">
            $(document).ready(function() {
                var oTable = $('#example').dataTable( {
                     "sScrollY": "500px",                                
                    "bPaginate": false,
                    "bProcessing": true,
                    "sAjaxSource": "sources/sample.json"
                } );

            } );
        </script> 
```

HTML

```
<table cellpadding="0" cellspacing="0" border="0" class="display" id="example">
                    <thead>
                        <tr>
                            <th width="20%">Browser</th>
                            <th width="25%">Read</th>
                            <th width="25%">Write</th>
                            <th width="15%">Execute</th>
                            <th width="15%">Admin</th>
                        </tr>
                    </thead>
                    <tbody>

                    </tbody>
                    </table> 
```

JSON

```
{ "aaData": [
    ["Trident","0","0","0","1"],
    ["Trident","0","1","0","0"],
    ["Trident","0","0","1","1"],
    ["Trident","0","0","1","1"],
    ["Trident","0","0","1","1"],
    ["Trident","0","0","0","0"],
    ["Gecko","1","1","1","1"],
    ["Gecko","0","0","0","1"],
    ["Other browsers","1","0","0","U"]
] } 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-03T00:08:32.577

我能够使用 datables mrenderer 让它工作

```
$(document).ready(function () {
    var oTable = $('#example').dataTable({
        "aoColumnDefs": [{
            "aTargets": [0],
            //"mData": "download_link",
            "mRender": function (data, type, full) {
                if (data == "Gecko") {
                    return '<a href="' + data + '">' + data + ' Download Gecko</a>';
                } else {
                    return '<a href="' + data + '">' + data + ' Download</a>';
                }
            }
        }, {
            "aTargets": [1],
            //"mData": "download_link",
            "mRender": function (data, type, full) {
                if (data == "1") {
                    return '<input type=\"checkbox\" checked value="' + data + '">';
                } else {
                    return '<input type=\"checkbox\" value="' + data + '">';
                }
            }
        }, {
            "aTargets": [2],
            //"mData": "download_link",
            "mRender": function (data, type, full) {
                if (data == "1") {
                    return '<input type=\"checkbox\" checked value="' + data + '">';
                } else {
                    return '<input type=\"checkbox\" value="' + data + '">';
                }
            }
        }, {
            "aTargets": [3],
            //"mData": "download_link",
            "mRender": function (data, type, full) {
                if (data == "1") {
                    return '<input type=\"checkbox\" checked value="' + data + '">';
                } else {
                    return '<input type=\"checkbox\" value="' + data + '">';
                }
            }
        }, {
            "aTargets": [4],
            //"mData": "download_link",
            "mRender": function (data, type, full) {
                if (data == "1") {
                    return '<input type=\"checkbox\" checked value="' + data + '">';
                } else {
                    return '<input type=\"checkbox\" value="' + data + '">';
                }
            }
        }],
        "bFilter": false,
        "sScrollY": "500px",
        "bPaginate": false,
        "bProcessing": true,
        "sAjaxSource": "sources/sample.json"
    });
}); 
```

# geospatial - JTS 几何 - 应用缓冲区

> ID：14128946
> 
> 赞同：5
> 
> 时间：2013-01-02T20:50:02.940
> 
> 标签：geospatial, jts

我正在尝试将 1000 米的缓冲区应用于 JTS 拓扑套件中的多边形形状。我已经确定了执行此操作的方法（请参见下面的链接），但我不确定缓冲区方法中距离参数的单位是什么。

[JTS几何缓冲法](http://tsusiatsoftware.net/jts/javadoc/com/vividsolutions/jts/geom/Geometry.html#buffer%28double%29)

感谢您查看这个。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-06T17:38:12.780

当然，距离单位与您的坐标具有相同的单位。

如果您的坐标以米为单位，那么距离也以米为单位。

# mysql - ZF2 带有 where 子句的内连接返回空结果

> ID：14128948
> 
> 赞同：0
> 
> 时间：2013-01-02T20:50:13.020
> 
> 标签：mysql, join, zend-framework2, where

当我在 send 中尝试以下 mysql 查询时，我只得到一个空的结果集（应该被填充）。

我在我的 mysql 工作台中尝试了以下查询（返回结果）

```
SELECT `websites`.*, `s`.`website_id` AS `websites.id` 
FROM `websites` 
INNER JOIN `websites_statistics` AS `s` ON `s`.`website_id` = `websites`.`id` 
WHERE `websites`.`website` = 'google.com' LIMIT 0,1 
```

这是我的 ZF2 应用程序中的一个（空结果集）

```
$sql = new Sql($this->tableGateway->getAdapter());

    $select = $sql->select();
    $select->from('websites')
           ->join(array('s' => 'websites_statistics'), 's.website_id = websites.id', array('websites.id' => 'website_id'), \Zend\Db\Sql\Select::JOIN_INNER)
           ->where(array('websites.website' => 'google.com'));

    $resultSet = $this->tableGateway->selectWith($select);

    echo $select->getSqlString();

    return $resultSet; 
```

调试结果：

```
SELECT "websites".*, 
"s"."website_id" AS "websites.id" 
FROM "websites" 
INNER JOIN "websites_statistics" AS "s" ON "s"."website_id" = "websites"."id" 
WHERE "websites"."website" = 'google.com' 
```

(!updated) 查询了一下，所以更容易。我认为第一时间出了点问题，因为我认为 "s"."website_id" AS "websites.id" 必须朝另一个方向翻转 .. "websites.id" AS "s"."website_id" 我需要website.id 按 website_id 从 website_statistics 表中获取记录。

提前致谢！

缺口

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T13:26:59.030

我得到它的工作。问题不在于它本身的查询。我必须将第二个表的字段（我加入的一个）添加到第一个表的模型（exchangeArray）中！那成功了。谢谢大家。

# java - JSP：如何检查用户是否登录？

> ID：14128950
> 
> 赞同：12
> 
> 时间：2013-01-02T20:50:21.257
> 
> 标签：java, jsp, servlets, authorization, servlet-filters

![](../Images/b3f2a8f5d97ff4215085e967f0a2529f.png)

我正在学习 Java Web，但我遇到了一些问题，需要帮助。我使用了一个 template.jsp，其中包含 header.jsp、footer.jsp、login.jsp（模板的左侧）和`${param.content}.jsp`. 对于每个名为 X.jsp 的页面，我制作了另一个具有以下内容的 jsp，因为我希望每个页面都具有相同的布局：

```
<jsp:include page="template.jsp">
    <jsp:param name="content" value="X"/>
    <jsp:param name="title" value="Start navigate"/>`enter code here`
</jsp:include> 
```

例如，当我单击 Review 链接时，我想重定向到 Review.jsp，但我遇到了一些问题。在 footer.jsp 我有这样的事情：

```
(...)
< a href =" Review.jsp "> Review </a>
(...) 
```

登录后，我尝试单击 Review，它将我发送到 Review.jsp，但它显示我没有登录。我使用 Spring Framework、Tomcat 7、Eclipse、MySQL。当我登录时，我创建了一个 cookie：

```
String timestamp = new Date().toString();
String sessionId = DigestUtils.md5Hex(timestamp);
db.addSession(sessionId, username, timestamp);
Cookie sid = new Cookie("sid", sessionId);
response.addCookie(sid); 
```

对于每种方法，我都有类似的东西（我在教程中看到过）：

```
@RequestMapping(value = "/writeReview", method = RequestMethod.GET)
public String nameMethod(@CookieValue("sid") String sid,...) 
```

使用 sid，我可以找出谁是用户。我有一个包含用户帐户和其他一些表的数据库。问题是当我点击评论或任何其他时，它显示我没有登录。我该怎么办？

**更新**：
我使用 JavaBean 作为用户和 login.jsp。具有登录文本框的 JSP，当我单击按钮登录时，我有一个 GET 方法。

```
@RequestMapping(value = "/login", method = RequestMethod.GET)
public ModelAndView createCookie(
  @RequestParam("username") String username, @RequestParam("password") String password,
  HttpServletRequest request, HttpServletResponse response) throws SQLException {
      //code for creating the cookie here, after testing if the user is in my database
} 
```

对于每个页面，我发送 sid 并且我有一个模型属性，用户名：

```
public String methodName(@CookieValue(required = false) String sid, Model model) {
    if (sid != null) {
        User user = getUserBySid(sid);
        model.addAttribute("user", user);
    }
    (..other data.)
    return "nameJSP.jsp";
} 
```

如果用户名不为空，我会检查每个 JSP，这就是我查看用户是否登录的方式。应用程序运行良好，如果我不单击页眉或页脚中的链接，它会传递参数。问题是我必须将一个参数从作为布局的实际内容的 JSP 传递给页脚引用的 JSP，这个 JSP 将是我布局的下一个内容。布局只识别内容和标题：

```
<title>${param.title}</title>
(I didn't paste all the code, I use a table <table>....)
<%@ include file="header.jsp"%>
<%@ include file="login.jsp"%>  
<jsp:include page="${param.content}.jsp"/> 
<%@ include file="footer.jsp"%> 
```

那么如何在这个 JSP 中包含一个将从另一个 JSP 接收的参数呢？它还必须由 layout.jsp 访问并发送到页脚或页眉？

```
<jsp:include page="layout.jsp">
    <jsp:param name="content" value="X"/>
    <jsp:param name="title" value="Start navigate"/>
</jsp:include> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-03T09:46:14.960

将一些参数传递给包含的 JSP：

```
<jsp:include page="somePage.jsp" >
    <jsp:param name="param1" value="someValue" />
    <jsp:param name="param2" value="anotherParam"/>
    ....
</jsp:include> 
```

你已经在做。

好的，问题的细节不是很清楚，但我明白了。
解决方案之一可能如下。

在您的*Login*操作中，**如果**身份验证成功，请创建*HttpSession并为经过身份验证的**User*设置一个属性：

```
if (/* authentication was successfull */) {
    request.getSession().setAttribute("loggedInUser", user);
    ...
} 
```

在您控制用户是否登录的代码中，只需检查是否存在适当的[*HttpSession*](http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpSession.html)属性：

```
HttpSession session = request.getSession(false);
if (session == null || session.getAttribute("loggedInUser") == null) {
    // user is not logged in, do something about it
} else {
    // user IS logged in, do something: set model or do whatever you need
} 
```

或者在您的 JSP 页面中，您可以检查用户是否使用[JSTL](https://stackoverflow.com/tags/jstl/info)标签登录，如 BalusC 在[此处](https://stackoverflow.com/a/9135813/814702)的示例中所示：

```
...
<c:if test="${not empty loggedInUser}">
    <p>You're still logged in.</p>
</c:if>
<c:if test="${empty loggedInUser}">
    <p>You're not logged in!</p>
</c:if>
... 
```

* * *

## 过滤器来拯救

但通常，您检查用户是否登录以限制对某些页面的访问（因此只有经过身份验证的用户才能访问它们）。你编写了一些实现 [*javax.servlet.Filter*](http://docs.oracle.com/javaee/7/api/javax/servlet/Filter.html)的类。

这是我的一个项目中的 LoginFilter 示例：

```
package com.example.webapp.filter;

import java.io.IOException;

import javax.servlet.Filter;
import javax.servlet.FilterChain;
import javax.servlet.FilterConfig;
import javax.servlet.ServletException;
import javax.servlet.ServletRequest;
import javax.servlet.ServletResponse;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

/**
 * The purpose of this filter is to prevent users who are not logged in
 * from accessing confidential website areas. 
 */
public class LoginFilter implements Filter {

    /**
     * @see Filter#init(FilterConfig)
     */
    @Override
    public void init(FilterConfig filterConfig) throws ServletException {}

    /**
     * @see Filter#doFilter(ServletRequest, ServletResponse, FilterChain)
     */
    @Override
    public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain) throws IOException, ServletException {
        HttpServletRequest request = (HttpServletRequest) req;
        HttpServletResponse response = (HttpServletResponse) res;

        HttpSession session = request.getSession(false);
        if (session == null || session.getAttribute("loggedInUser") == null) {
            response.sendRedirect(request.getContextPath() + "/login.jsp");
        } else {
            chain.doFilter(request, response);
        }
    }

    /**
     * @see Filter#destroy()
     */
    @Override
    public void destroy() {}

} 
```

在这个项目中，我使用了没有 Spring 的普通 servlet 和 JSP，但你会明白的。

当然，您**必须**配置**web.xml**才能使用此过滤器：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    version="3.0">
    ...
    <filter>
        <filter-name>Login Filter</filter-name>
        <filter-class>com.example.webapp.filter.LoginFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>Login Filter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>
    ...
</web-app> 
```

**注意**：
如果您使用支持 Servlet 3.0 及更高版本的[Web 容器](http://en.wikipedia.org/wiki/Web_container)或[应用程序服务器](http://en.wikipedia.org/wiki/Application_server#Java_application_servers)，则可以使用[@WebFilter](http://docs.oracle.com/javaee/7/api/javax/servlet/annotation/WebFilter.html)注释来注释过滤器类，在这种情况下，无需在[部署描述符](http://en.wikipedia.org/wiki/Deployment_descriptor)( *web.xml* )中配置过滤器. [在此处](https://stackoverflow.com/tags/servlet-filters/info)查看使用*@WebFilter*注释和更多过滤器相关信息的示例。

希望这会帮助你。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-12-30T14:46:40.237

或者只是使用：

```
String username = request.getRemoteUser(); 
```

# java - BIRT 中的 JavaScript 错误

> ID：14128959
> 
> 赞同：2
> 
> 时间：2013-01-02T20:51:15.563
> 
> 标签：java, javascript, eclipse, birt

我被指派为使用 BIRT 报告的客户清理项目。我已经解决了大部分问题，但我仍然有一份报告无法正常工作并返回错误。错误是：

```
Row (id = 1467): 
+ There are errors evaluating script "var fileName = row["Attached_File"];
params["HyperlinkParameter"].value = ImageDecoder.decodeDocs(row["Ecrash_Attach"],fileName);":
Wrapped java.lang.NullPointerException (/report/body/table[@id="61"]/detail/row[@id="70"]/cell[@id="71"]/grid[@id="1460"]/row[@id="1462"]/cell[@id="1463"]/table[@id="1464"]/detail/row[@id="1467"]/method[@name="onCreate"]#2) 
```

如果有人想要，我可以发布完整的堆栈跟踪，但现在我将省略它，因为它很长。

这是 decodeDocs 方法的来源：

```
public static String decodeDocs(byte[] source, String fileName) {
        String randName = "";
        byte[] docSource = null;
        if ( Base64.isArrayByteBase64(source) ){
            docSource = Base64.decodeBase64(source);
        }
        documentZipPath = writeByteStreamToFile(source);
        randName = writeByteStreamToFile(docSource, fileName);
        return randName;
    } 
```

我对这个很迷茫。该错误似乎告诉我脚本的第二行有一个错误，即：

```
var fileName = row["Attached_File"];
params["HyperlinkParameter"].value = ImageDecoder.decodeDocs(row["Ecrash_Attach"],fileName); 
```

这是在报表的 OnCreate 方法中编写的。任何帮助，甚至线索都将不胜感激。如果您想查看报告，请询问，我会为它发布 xml。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T16:25:02.980

我在 BIRT 中犯的一个常见错误是访问空报告参数的值。在您的情况下，可以`params["HyperlinkParameter"]`为空吗？

# php - 按国家文字显示标志

> ID：14128960
> 
> 赞同：2
> 
> 时间：2013-01-02T20:51:19.730
> 
> 标签：php

我正在寻找一个体面的 php 脚本/片段，它可以使用 PHP 显示用户所在国家/地区的标志。令人惊讶的是，似乎没有一个体面/可访问的解决方案。

这是想法：

1.  首先，标志图像应该压缩成一个单独的精灵

2.  然后脚本将根据国家代码将精灵的坐标归零。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T20:55:25.377

你可以在这里试试精灵：[Flag sprite](http://flag-sprites.com)

# php - 识别和渲染机器人

> ID：14128961
> 
> 赞同：2
> 
> 时间：2013-01-02T20:51:38.403
> 
> 标签：php, mobile, web-crawler

我们有一些过滤器来征用爬虫，或者浏览器中的机器人和渲染应该没有区别？
请求机器人应该被视为通过浏览器进行的常见访问？

我读到机器人有谷歌网页版和移动版。
我们需要确定移动机器人是不是像手机一样显示内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T20:55:49.990

`robots.txt`您可以从您的域根目录中调用的文件告诉机器人它可以访问和不能访问的内容。

你读过这个吗？

```
http://www.robotstxt.org/robotstxt.html 
```

它解释了如何允许/禁止来自您网站某些区域的机器人。

**例子：**

从部分服务器中排除所有机器人

```
User-agent: *
Disallow: /cgi-bin/
Disallow: /tmp/
Disallow: /junk/ 
```

# python - 需要在箭头/等高线图中添加“图例”

> ID：14128965
> 
> 赞同：1
> 
> 时间：2013-01-02T20:52:28.597
> 
> 标签：python, matplotlib, legend

我正在将一些标量数据绘制为等值线图`matplotlib.contourf`。最重要的是，我正在绘制一些矢量数据`matplotlib.arrow`。基本绘图已经完成，但现在我需要在绘图上放置一个带有默认大小箭头加上它对应的数据值的框，以便查看者知道他正在查看什么样的比例。例如，我需要一个带有一定长度水平箭头的框，在其下方，一些文本，如“10 cm/sec”。

首先，如果有人能给我一个简单的方法，我将不胜感激。

其次，我尝试过的方法是绘制等高线图，然后绘制箭头，然后在图中添加一个矩形，如下所示：

```
rect=pl.Rectangle((300,70),15,15,fc='white')
pl.gca().add_patch(rect) 
```

然后，最后，将我的比例箭头和文本放在这个矩形的顶部。

这不起作用，因为矩形补丁覆盖了轮廓，但它没有覆盖图中的箭头。有没有办法将补丁完全移动到其他所有东西的“前面”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T22:14:45.220

知道了。使用`pylab.quiver`和`pylab.quiverkey`功能。 `quiver`只需几行代码即可生成漂亮的矢量场，并且`quiverkey`可以轻松生成带有文本的缩放矢量。而且，由于某种原因，绘制的箭头`quiver`确实被我的矩形覆盖，因此很容易使缩放箭头非常明显。对我来说，这一切仍有一些谜团。如果有人想尝试清理它们，将非常感激。但我现在有办法在这种情况下做我需要的事情。

# c++ - 使用模板实现 C++ 哈希表类

> ID：14128970
> 
> 赞同：1
> 
> 时间：2013-01-02T20:52:57.793
> 
> 标签：c++, templates, hash, runtime, hashtable

我正在尝试在 C++ 中实现一个类似于 Java 版本的哈希表

我希望它具有以下形式

```
template <class Key, class Value> 
class hashtable {
...
} 
```

很快我注意到我需要以某种方式将 Key 转换为数字，以便我可以使用简单的哈希函数

```
int h(int hashkey) { 
    return hashkey%some_prime;
} 
```

但令人头疼的是，Key 类型仅在运行时才知道。是否可以在 C++ 中检查运行时的 Key 类型。或者我必须手动创建这个具有不同类型的哈希表类？这更容易做到但很难看。有人知道优雅的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T21:04:43.303

C++ 模板通常是鸭子类型的，这意味着您可以在模板中显式转换为整数类型，并且所有实现适当转换的类型都可以用作键。这样做的缺点是要求类以散列函数合适的方式实现转换运算符，这要求很多。

您可以改为提供函数模板

```
template<typename T> int hash (T t); 
```

除了内置类型的特化外，任何想要使用自定义类作为键的用户都只需要提供自己的特化即可。我认为这是一个不错的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T20:57:57.827

你似乎有一些误解。键类型在编译时是已知的——这就是使用模板的全部意义所在。其次，实际上不存在适用于任何类型的完全通用的散列函数。您需要使用函数重载或模板特化为不同类型实现不同的哈希函数。例如，有许多用于字符串的常用哈希函数。

最后，C++11 包含一个标准哈希表 ( [std::unordered_map](http://en.cppreference.com/w/cpp/container/unordered_map) )，您可以使用它来代替自己实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T21:50:31.327

如果你想尝试实现一个“通用”的，也许你可以从一个类似这样的骨架开始：

```
template <class T, class K>
struct HashEntry {  // you would need this to deal with collision
    T curr;
    K next;
}

template <class V, size_t n>
class HashTable {
    void insert(V v)
    {
        ...
        size_t idx = v->getHashCode(n);
        ...
    }
private:
    HashEntry <V> table_[n];

} 
```

它通常用一些指针类型实例化，要弄清楚指针应该去哪里，它需要类型实现成员函数“getHashCode”......

# java - 尝试解析 XML 流时出现 Java 错误

> ID：14128971
> 
> 赞同：-1
> 
> 时间：2013-01-02T20:52:58.647
> 
> 标签：java, xml, parsing

我创建了一个 url，它将触发我们的 GSA 返回 XML 回复。我已经仔细检查了 url 生成是否正常工作。

当我尝试使用以下代码行解析流时：

```
Document doc = (Document) db.parse(new URL(filePath).openStream()); 
```

在系统日志中，我收到以下错误：

```
Error: URI=null Line=2: Document root element "GSP", must match DOCTYPE root "null"
Error: URI=null Line=2: Document is invalid: no grammar found 
```

XML 文件看起来像这样（我使用 xxx 来清除识别信息）：

```
<GSP VER="3.2">
<TM>0.011504</TM>
<Q>xxxxxxx</Q>
<PARAM name="output" value="xml_no_dtd" original_value="xml_no_dtd"/>
<PARAM name="q" value="xxxxxxx" original_value="xxxxxxx"/>
<PARAM name="site" value="xxxxxxx" original_value="xxxxxxx"/>
<PARAM name="btn" value="" original_value=""/>
<PARAM name="ie" value="UTF-8" original_value="UTF-8"/>
<PARAM name="ip" value="xxx.xxx.xxx.xxx,xxx.xxx.xxx.xxx,xxx.xxx.xxx.xxx" original_value="xxx.xxx.xxx.xxx,xxx.xxx.xxx.xxx,xxx.xxx.xxx.xxx"/>
<PARAM name="access" value="p" original_value="p"/>
<PARAM name="sort" value="date:D:L:d1" original_value="date:D:L:d1"/>
</GSP> 
```

之前有没有人处理过这样的问题，可以提供一些指导？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T21:03:50.803

您`DocumentBuilder`启用了验证，但您没有定义 DTD（替代方案：您定义的 DTD 与实际内容不匹配）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T21:40:26.440

我现在正在工作，但我的建议是看看 Jaxb。它具有惊人的注释支持，并且经常用于处理 xml 的框架中。

可以肯定的是，Jaxb 会让您的生活更轻松。

# c# - 错误 CS0117：“System.IO.File”不包含“加密”的定义

> ID：14128972
> 
> 赞同：2
> 
> 时间：2013-01-02T20:53:03.020
> 
> 标签：c#, windows-mobile, .net

我正在使用 Microsoft Visual Studio 2008 编写移动应用程序，并且需要加密文件。我尝试使用一种`File.Encrypt`方法，但导致以下错误：

> 错误 CS0117：“System.IO.File”不包含“加密”的定义。

我该如何应对这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-02T20:56:22.427

它不起作用的原因是因为`File.Encrypt`实际上调用了本机 Win32 函数`EncryptFile(LPSTR path)`，该函数不会出现在移动设备上。

作为替代方案，我的建议是使用`System.Security.Cryptography`命名空间中存在的加密算法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T20:57:59.307

`File.Encrypt`移动 .NET 运行时中不存在。

尝试使用[`ProtectedData`类](http://msdn.microsoft.com/en-us/library/system.security.cryptography.protecteddata%28v=vs.96%29.aspx)。

# c++ - 改变对象

> ID：14128982
> 
> 赞同：0
> 
> 时间：2013-01-02T20:53:29.603
> 
> 标签：c++

在我正在处理的图表中，我从数据文件中获取国家/地区，并将其存储到 CCountry 对象中，然后将它们存储在 CContinent 对象中，这些对象存储在名为 world 的 CContinent 列表中。当我在他们添加的循环中查找有关国家/地区的信息时，它为我提供了正确的信息。但是，如果我稍后查找国家/地区信息，它会显示所有国家/地区都是同一个国家/地区（添加的最后一个国家/地区）。这是我创建国家/地区列表的代码和相关的目标代码。

```
while(line != "------")
{
    getline(filestr, line);
    CContinent *tempContinent = new CContinent(line);

    getline(filestr, line);
    while(line != "---" && line != "------")
    {
        CCountry *tempCountry = new CCountry(line);
        tempContinent->addCountry(*tempCountry);
        getline(filestr, line);
        //cout << tempCountry->getName() << flush;
    }
    world.push_back(tempContinent);
}

void CContinent::addCountry(CCountry country)
{
    (countries).push_back(&country);
}

CCountry::CCountry(string in_name)
{
name = in_name;
} 
```

请询问您想查看的任何其他代码。

根据请求，这里是我稍后尝试访问列表的地方。

```
homeCountry = NULL;     

    size_t found;
    found = line.find_first_of(",");
    string homeCountryName = line.substr(0, found);
    for (list<CContinent*>::iterator it=world.begin(); it != world.end(); it++)
    {
        list<CCountry*> tempCont = (*it)->getCountries();
        //cout << it->getName() << " " << flush;
        for (list<CCountry*>::iterator it2=tempCont.begin(); it2 != tempCont.end(); it2++)
        {
            //cout << (*it2)->getName() << flush;
            //cout << homeCountryName << flush;
            if ((*it2)->getName() == homeCountryName)
            {
                *homeCountry = **it2;
            }
        }
    } 
```

C大陆声明：

```
class CContinent
{
string name;
list<CCountry*> countries;
public:
CContinent(string in_name);
~CContinent();
void addCountry(CCountry country);
list<CCountry*> getCountries();
string getName();
}; 
```

新错误：

所以它现在运行整个程序，这很好，但我在 main 中添加了一个测试输出，看看它是否让所有邻居都正确。现在的问题是它得到了正确数量的邻居，但是当被问及他们的名字时，它只是说倒数第二个国家。有任何想法吗？

作为参考，这里是代码。

```
for (list<CContinent*>::iterator it = world.begin(); it != world.end(); it++)
{
    list<CCountry*> var1 = (*it)->getCountries();
    for (list<CCountry*>::iterator it2 = var1.begin(); it2 != var1.end(); it2++)
    {
        cout << "Country: " << (*it2)->getName() << endl;
        list<CCountry*> var2 = (*it2)->getNeighbors();
        cout << "Neighbors: ";
        for (list<CCountry*>::iterator it3 = var2.begin(); it3 != var2.end(); it3++)
        {
            cout << (*it3)->getName() << " ";
        }
        cout << endl;
    }
} 
```

新错误：

所以现在它贯穿整个程序，这是一个加号。但是，当我要求它在程序的主体中给我邻国的名称时，它给了我一个（通常）正确数量的邻国列表，以及倒数第二个国家的所有名称。不知道为什么。这是代码。

```
for (list<CContinent*>::iterator it = world.begin(); it != world.end(); it++)
{
    list<CCountry*> var1 = (*it)->getCountries();
    for (list<CCountry*>::iterator it2 = var1.begin(); it2 != var1.end(); it2++)
    {
        cout << "Country: " << (*it2)->getName() << endl;
        list<CCountry*> var2 = (*it2)->getNeighbors();
        cout << "Neighbors: ";
        for (list<CCountry*>::iterator it3 = var2.begin(); it3 != var2.end(); it3++)
        {
            cout << (*it3)->getName() << " ";
        }
        cout << endl;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T21:02:22.250

您的问题在于您如何传递指针和引用。你有`List`一个`CCountry*`：

```
list<CCountry*> countries; 
```

所以你的`addCountry`函数应该看起来更像：

```
void CContinent::addCountry(CCountry* country)
{
    countries.push_back(country);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T22:05:14.257

新的错误更新：这是与大陆的 addCountry 类似的错误。我将 CCountry 中的 addNeighbor 函数更改为看起来像 addCountry，并且它起作用了。谢谢你们的帮助！

# javascript - 右键粘贴后检索数据

> ID：14128984
> 
> 赞同：2
> 
> 时间：2013-01-02T20:53:30.437
> 
> 标签：javascript, html, onpaste

我正在尝试评估粘贴后输入到文本区域的一些数据。当我使用 onkeyup 时，它会检测是否正常，并且当用户使用 Cntl-V 粘贴时评估是否正常。当他们右键单击并选择粘贴时，它什么也不做。我将 onkeyup 更改为 onpaste，它同时检测 Cntl-V 和右键单击粘贴，但数据不存在。我知道在执行实际粘贴之前触发了 onpaste，因此我尝试使用 setTimeout() 延迟评估，但即使延迟 5 秒，它也不会在函数函数完成之前获取数据。无论我做什么，我似乎都无法计算输入的项目数量。这是我的代码：

```
function delayStart() {                                                 

  alert("delayStart() function");                                       

  var inData = " ";                                                     
  setTimeout(function()                                                 
                {inData = document.getElementById("loanNumberPaste").value},
                5000);                                                      
  var iData = inData.value;                                             
  alert("iData = " + iData);                                            
  setTimeout(fnUpdCt(iData),5000);                                      
}                                                                       

function fnUpdCt(vId) {                                  

  var strVId = vId.value;                                
  alert("fnUpdCt() function \n" +                        
          "vId = " + strVId);                              

  var i;                                                 
  var iVal = vId.value;                                  
  var vCt  = 0;                                          

  iVal     = iVal.replace(/\s/g,' ');                    
  iVal     = iVal.split('  ');                           

  for (i=0; i < iVal.length; i++) {                      
         if (iVal[i].length > 0) {vCt++;}                  
  }                                                      

  document.getElementById("loanNumberCount").value = vCt;
}                                                        

<textarea id="loanNumberPaste" rows=17 cols=37 tabindex="1"          
             onpaste="delayStart();";onkeyup="fnUpdCt(this);"></textarea> 
```

您可以提供的任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T21:06:57.593

超时不起作用，因为不是通过引用传递函数，而是立即调用它并尝试返回它的值。

只需将 fnUpdCt 包装在一个匿名函数中就可以了。

```
setTimeout(function(){fnUpdCt(iData)},5000); 
```

此外，您不需要等待 5 秒 - 这不是它等待 x 时间的事实，而是它异步的事实。

# git - 使用 git rebase -i

> ID：14128985
> 
> 赞同：0
> 
> 时间：2013-01-02T20:53:32.590
> 
> 标签：git, version-control

所以我正在尝试使用[http://www.kernel.org/pub/software/scm/git/docs/git-rebase.html中的说明拆分提交](http://www.kernel.org/pub/software/scm/git/docs/git-rebase.html)

尝试搜索“SPLITTING COMMITS”

在那里它说“用“编辑”动作标记你想要拆分的提交。“

我该怎么做

当我执行 git rebase -i 它打开一个文件

```
# Commands:
#  p, pick = use commit
#  r, reword = use commit, but edit the commit message
#  e, edit = use commit, but stop for amending
#  s, squash = use commit, but meld into previous commit
#  f, fixup = like "squash", but discard this commit's log message
#  x, exec = run command (the rest of the line) using shell
#
# These lines can be re-ordered; they are executed from top to bottom.
#
# If you remove a line here THAT COMMIT WILL BE LOST.
# However, if you remove everything, the rebase will be aborted.
#
# Note that empty commits are commented out

... 
```

我究竟如何从该对话框执行这些命令

**编辑**

所以我设法成功地变基并致力于我的本地回购......

问题是，当我尝试推送时，我收到错误消息：

```
 ! [rejected]        JJ-4322 -> JJ-4322 (non-fast-forward)
 ! [rejected]        master -> master (non-fast-forward)
error: failed to push some refs to 'url.git'
hint: Updates were rejected because the tip of your current branch is behind
hint: its remote counterpart. Merge the remote changes (e.g. 'git pull')
hint: before pushing again.
hint: See the 'Note about fast-forwards' in 'git push --help' for details. 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T20:58:10.040

这

```
rebase -i COMMIT 
```

将向您显示提交列表，您可以使用该列表中的任何内容更改默认选择命令

```
pick 6d6da13 0000, liquibase, fixing build snafu's

# Rebase c56baf2..6d6da13 onto c56baf2 
```

变成

```
edit 6d6da13 0000, liquibase, fixing build snafu's

# Rebase c56baf2..6d6da13 onto c56baf2 
```

编辑：

您的第二个问题是因为您正在重写历史并且您已经推送了现在与您当前状态冲突的旧版本。你需要做：

```
git push --force YOURBRANCH 
```

这将覆盖遥控器上的内容。

# session-timeout - 在不影响 ZK 会话超时的情况下触发事件

> ID：14128986
> 
> 赞同：4
> 
> 时间：2013-01-02T20:53:32.863
> 
> 标签：session-timeout, zk

我无法让 ZK 会话超时发生，因为我们的应用程序每隔几分钟就轮询一次服务器以获取信息。触发此轮询的代码是 Javascript，它单击隐藏按钮，向服务器发送 onClick 事件。

你知道有什么方法可以告诉 ZK 这个轮询是自动的并且不应该影响会话超时计时器吗？

非常感谢。

-伊恩

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T02:13:13.027

简短的回答是否定的。

长答案是，首先没有“ZK Session”。它只是 Servlet 规范定义的 HttpSession。其次，会话管理由 servlet Web 容器完成，因此会话超时计数器重置在请求传递给 ZK 处理之前很久就完成了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T08:21:50.200

一种解决方法是编写一个过滤器来检测请求是否是轮询请求，并在过滤器中记录“真实”请求的时间，然后如果长时间没有真实请求，则使会话无效。

样本：

**测试.zul**

```
<zk>
    <intbox id="ibx" value="1" />
    <timer delay="1000" id="pooltimer" repeats="true">
        <attribute name="onTimer"><![CDATA[
            ibx.setValue(ibx.getValue() + 1);
        ]]></attribute>
    </timer>
    <button label="click or invalidated in 20 seconds">
        <attribute name="onClick"><![CDATA[
            long lastRealRequest = (Long)Sessions.getCurrent().getAttribute("LAST_REAL_REQUEST");
            alert("only pooling request in "
                    + ((System.currentTimeMillis() - lastRealRequest) / 1000)
                    + " second(s)");
        ]]></attribute>
    </button>
</zk> 
```

**zk.xml**

```
<zk>
    <session-config>
        <session-timeout>20</session-timeout>
    </session-config>
</zk> 
```

**在 web.xml 中过滤**

```
<filter>
    <filter-name>requestFilter</filter-name>
    <filter-class>test.RequestFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>requestFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

**请求过滤器.java**

```
package test;

import java.io.IOException;
import java.util.Map;

import javax.servlet.Filter;
import javax.servlet.FilterChain;
import javax.servlet.FilterConfig;
import javax.servlet.ServletException;
import javax.servlet.ServletRequest;
import javax.servlet.ServletResponse;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpSession;

public class RequestFilter implements Filter {
    public void init(FilterConfig filterConfig) throws ServletException {

    }
    @Override
    public void doFilter(ServletRequest request, ServletResponse response,
            FilterChain chain) throws IOException, ServletException {
        HttpServletRequest req = (HttpServletRequest)request;
        Map param = req.getParameterMap();
        HttpSession sess = req.getSession();
        boolean isRealRequest = true;
        // here detect whether it is the poll request
        // initiate the LAST_REAL_REQUEST if the poll request is
        // the first request
        //
        // invalidate session if no real request within session timeout range
        for (Object key : param.keySet()) {
            if (key.toString().startsWith("cmd")
                && "onTimer".equals(((String[])param.get(key))[0])) {
                // not real request
                isRealRequest = false;
                // try get last real request time
                Long lastRealRequest = (Long)sess.getAttribute("LAST_REAL_REQUEST");
                if (lastRealRequest == null) {
                    System.out.println("init");
                    // init if no previous real request
                    lastRealRequest = System.currentTimeMillis();
                    sess.setAttribute("LAST_REAL_REQUEST", lastRealRequest);
                } else if ((System.currentTimeMillis() - lastRealRequest) > 20000) {
                    System.out.println("invalidate");
                    // invalidate session if only poll request for a long time
                    sess.invalidate();
                }
            }
        }

        // process request
        chain.doFilter(request, response);

        // update LAST_REAL_REQUEST if this is a real request
        if (isRealRequest) {
            // record last real request time
            sess.setAttribute("LAST_REAL_REQUEST", System.currentTimeMillis());
        }
    }
    @Override
    public void destroy() {}
} 
```

# matplotlib - 如何制作 MatPlotLib 补丁模式的图例或将它们添加到预先存在的图例中

> ID：14128987
> 
> 赞同：4
> 
> 时间：2013-01-02T20:53:36.267
> 
> 标签：matplotlib, legend

如何为图表上使用的补丁图案制作图例或将补丁图案的信息添加到预先存在的图例中而不影响图例中已经存在的信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T04:38:37.763

创建补丁时，请包含 kwarg `label`，例如

```
## bunch of code
ax.add_patch(mpl.patches.Rectangle(...,label='fail'))
## bunch of code
ax.plot(...,label='some line')
## bunch of code
ax.legend() 
```

它会自动添加到您的图例中。并且将为您添加标签的每个艺术家添加条目。

如果您通过 制作图例`legend(hands,labs)`，只需将补丁对象添加到`hands`列表中，就像添加`Line2D`对象一样。 `legend`真正适用于`artists`两者`patch`并`Line2D`从中派生。

# backbone.js - Backbone.js 后模型

> ID：14128990
> 
> 赞同：1
> 
> 时间：2013-01-02T20:53:49.743
> 
> 标签：backbone.js, backbone-model

我有一个模型，其**id**是必须由用户编写的代码，该代码将是数据库上的主键。

因此，要创建一个新寄存器，我需要编写代码，但是当我调用 save() 方法时，我期待一个 POST，但是因为 de idAttribute 有一个值，所以我总是得到一个 PUT。

这是我的模型非常简化

```
Course = Backbone.Model.extend({
    idAttribute: "courseCode"
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T21:23:12.030

正如杰克评论的那样，您应该使用[id](http://backbonejs.org/#Model-id)，而不是[idAttribute](http://backbonejs.org/#Model-idAttribute)。（除非我们误解了，并且`courseCode`是服务器上主键的名称；在这种情况下，继续。）

模型是使用保存`POST`还是`PUT`调用[save()](http://backbonejs.org/#Model-save)取决于[isNew() 函数](http://backbonejs.org/#Model-isNew)。默认实现将[id](http://backbonejs.org/#Model-id)与 null 进行比较，以确定模型是否已保存。您将需要实现自己的 isNew 函数来确定是创建还是更新您的记录。例如，您可以尝试这样的事情：

```
Course = Backbone.Model.extend({
    isNew: function() {
        return !this.has('uniquePropertySetByServer');
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T21:25:45.567

正如杰克所说，听起来你的第一个问题可能是`idAttribute`在你应该使用`id`. 除此之外，您的 PUT 问题可以通过两种方式解决。

第一个是告诉 Backbone 使用 POST。`isNew`正如 Asheley Ross 建议的那样，一种方法是覆盖您的模型。或者，您可以让 Backbone 使用它的本机方法，并简单地通过删除它的 ID 属性（因为本机检查只是）`isNew`来强制它将您的模型视为新模型。然后，您可以在单独的属性中传递 ID，或者作为属性（而不是属性）存储在模型上，并在将其发送到服务器之前使用模型的方法将其添加回来。`isNew``this.id == null``toJSON`

第二种方法可以让您避免除 GET 和 POST 之外的所有 HTTP 操作，即设置`Backbone.emulateHTTPBackbone = true;`. 这将使 Backbone 使用 POST 代替，并且只需传递一个`X-HTTP-Method-Override`带有实际类型的额外请求标头（例如。`PUT`）。