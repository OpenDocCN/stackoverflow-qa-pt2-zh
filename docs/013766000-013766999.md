# StackOverflow 问答 13766000-13766999

# git - 通过 git-svn 访问 SVN，均经过 LDAP 身份验证

> ID：13766007
> 
> 赞同：0
> 
> 时间：2012-12-07T15:24:54.547
> 
> 标签：git, svn, ldap, git-svn

[这个问题](https://stackoverflow.com/questions/7709474/using-ldap-as-auth-method-to-manage-git-repositories)解释了如何为 git 设置 LDAP 身份验证。

现在，git-svn 脚本是否有可能以某种方式将 LDAP 身份验证令牌传递给也使用 LDAP 支持的身份验证的 SVN？

我想要实现的是，当 git 用户推送到 git-svn 存储库（通过 LDAP 进行身份验证）时，它会使用相同的身份验证数据自动将更改提交到 SVN。

我无权访问 SVN 服务器端配置（有可能，但这不是微不足道的）。

我们当前的设置使用 git user.name 和 git-svn 服务器存储的密码来对 SVN 进行身份验证，但由于公司密码更改策略（用户需要手动更新密码，他们一直忘记），这很麻烦。

# html - 添加 3 行 HTML 的简单 CMS 解决方案？

> ID：13766011
> 
> 赞同：0
> 
> 时间：2012-12-07T15:25:17.997
> 
> 标签：html, content-management-system, image-gallery

我为朋友的摄影作品集制作了单页纸，内容基本上是这样的：

```
<ul>
 <li>
  <a href="imageThatOpensInFancyBox">
   <img thumbnail>
  </a>
  <div>title for thumbnail rollover</div>
 </li>
 ...
</ul> 
```

我希望他能够随着时间的推移添加图片（基本上向 ul 添加更多的 li），而无需他编写任何代码。有什么建议么 ？我认为 Drupal 或其他东西可能有点矫枉过正。

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T15:31:05.920

[一种可能的解决方案是在http://imgur.com](http://imgur.com)上托管图像并创建一个画廊。然后，您可以将图像库嵌入到网站中。当您上传新图像时，它们将自动添加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T15:37:48.707

你是对的，大多数 CMS 都是矫枉过正的。这取决于您的后端编程技能，最简单的方法是创建一个简单的管理页面，让用户上传/删除图像。前端循环遍历到目前为止已上传的所有项目，并将其包裹在您的 html 周围。

另一种解决方案是使用 Flickr 之类的服务，其中用户上传带有特定标签（如“portfolio”）的图像，然后您使用他们的 API 循环所有项目并用上面显示的 html 包装它。

# html - 是否可以配置必填字段以忽略空格？

> ID：13766015
> 
> 赞同：47
> 
> 时间：2012-12-07T15:25:36.387
> 
> 标签：html, required-field

HTML5 中的[required](http://www.w3.org/html/wg/drafts/html/master/forms.html#the-required-attribute)属性非常方便：

```
<input type="text" required> 
```

但它仍然只允许用户输入空白。有没有纯 HTML 的解决方案？

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2013-06-26T14:56:41.470

使用与`pattern`属性结合的`required`属性。并且一定要包含一个`title`属性，因为大多数浏览器都会将标题文本插入到验证弹出气泡中。

```
<input required pattern=".*\S+.*" title="This field is required"> 
```

该`.*\S+.*`模式需要至少一个非空白字符，但也允许在开头或结尾使用空白字符（空格、制表符、回车符等）。如果您不希望用户能够在开头/结尾放置空格，请改用：

```
<input required pattern="\S(.*\S)?" title="This field is required"> 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-08T17:28:08.130

试试[`pattern`属性](http://www.whatwg.org/specs/web-apps/current-work/multipage/common-input-element-attributes.html#the-pattern-attribute)。您需要[一个指定“至少一个字符”的正则表达式](https://stackoverflow.com/q/1051989/8655)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-10-22T23:00:26.313

你可能想要这个：

```
<input type="text" required pattern="\S(.*\S)?"> 
```

（输入的开头或结尾至少有一个非空白字符且没有空白）

* * *

或者如果开头和结尾的空格很好，那么：

```
<input type="text" required pattern=".*\S.*"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-18T03:11:46.490

## 第1步

创建一个Javascript函数：

```
function ignoreSpaces(event) {
  var character = event ? event.which : window.event.keyCode;
    if (character == 32) return false;
} 
```

## 第2步

在 HTML 中的任何文本输入字段上使用它。

```
<input type="text" id="userInput" onkeypress="return ignoreSpaces(event)"> 
```

## 工作示例：

索引.html

```
<html> 
<body>
  <input type="text" onkeypress="return ignoreSpaces(event)">

  <script>
    function ignoreSpaces(event) {
        var character = event ? event.which : window.event.keyCode;
        if (character == 32) return false;
    }
  </script>

</body>
</html>
```

# html - mp4文件不能在ipad上播放？

> ID：13766017
> 
> 赞同：0
> 
> 时间：2012-12-07T15:25:41.670
> 
> 标签：html, ipad, mp4, jwplayer

我有这个名为 bunny.mp4 的 mp4 文件，我试图在 ipad 中播放，它在 chrome 和 firefox 中运行良好，我使用 jwplayer：

我在 mp4 文件上做了 ffmpeg 来获取信息：

这就是我得到的：

```
 metadatacreator : Yet Another Metadata Injector for FLV - Version 1.4
    hasKeyframes    : true
    hasVideo        : true
    hasAudio        : true
    hasMetadata     : true
    canSeekToEnd    : true
    datasize        : 403006663
    videosize       : 321220617
    audiosize       : 80076198
    lasttimestamp   : 6376
    lastkeyframetimestamp: 6376
    lastkeyframelocation: 403034889
  Duration: 01:46:15.99, start: 0.042000, bitrate: 505 kb/s
    Stream #0:0: Video: h264 (High), yuv420p, 624x352 [SAR 1:1 DAR 39:22], 400 kb/s, 23.98 tbr, 1k tbn, 47.95 tbc
    Stream #0:1: Audio: aac, 44100 Hz, stereo, s16, 96 kb/s 
```

这些视频规格可以在 ipad 上播放吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T16:27:15.420

看起来它是一个flv文件，你可以运行ffmpeg将它转换为mp4文件。./ffmpeg -i -acodec 复制 -vcodec 复制

之后，您可能希望使用 ffmpeg 工具将其转换为快速启动文件。./qt-faststart

# javascript - 为什么 someNum - Math.floor(someNum) 给我不同的十进制数

> ID：13766018
> 
> 赞同：0
> 
> 时间：2012-12-07T15:25:42.937
> 
> 标签：javascript, floating-point

我有一些简单的javascript，我想用它来确定一个数字是否需要四舍五入。

**示例：**用户输入 1.2346，数字四舍五入为 1.235，应向用户显示一条消息，通知他们该数字已四舍五入。四舍五入不是问题，但向用户显示错误消息是问题。我需要找到小数点后的位数。

我使用以下代码检索字符串的小数位。然后我计算变量的长度以获得小数位：

`var dp = field_value - Math.floor(field_value);`

`1.23`但是，当我对此进行测试时，我输入`field_value`. 当我检查字段值的值时，它确实是`1.23`. 当我检查 Math.floor(field_value) 的值时，它确实是`1`. 但后来我检查了 dp 的值，结果是`0.22999999999999998`

为什么这种减法不能按预期方式工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T15:27:31.683

问题在于浮点数具有有限表示，看看[这里](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)，你就会明白如何以及为什么。

如果舍入问题只是为了打印该数字，您可以使用[sprintf](http://www.diveintojavascript.com/projects/javascript-sprintf) for JS 之类的东西，它允许您根据需要格式化浮点输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T15:43:02.710

试图用浮点数的*表示做任何过于精确和具体的事情总是会遇到棘手的情况。*正如其他人所指出的，这是 IEEE-754 浮点标准的属性。除了将其视为字符串并尝试分析数字之外，您还可以将其确定性地四舍五入为您想要的格式，执行以下操作：

```
function roundFloat(num, decimalPlaces) {
    multiplier = Math.pow(10, decimalPlaces);
    return Math.round(num * multiplier) / multiplier;
} 
```

# ios - 精简版和演示版有什么区别？

> ID：13766022
> 
> 赞同：4
> 
> 时间：2012-12-07T15:25:57.560
> 
> 标签：ios, policy, mac-app-store, in-app-purchase

iOS 和 Mac App Store 的指南规定不允许使用演示版本的应用程序。

据我所知，精简版（大多数情况下）只是一个带有完整版 IAP 的演示（以保持进度）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T15:44:40.027

“演示”应用程序传统上是一个功能齐全的应用程序，它只能在有限的时间内运行，或者不能让你保存任何东西，或者以某种方式被削弱以使其在演示之外无用。

“精简版”应用程序本身功能齐全。如果用户从未升级到完整版，那么精简版应用程序仍然必须做一些有用的事情，即使它相当有限。Apple 将关注的一件关键事情是，必须在精简版应用程序中禁用 UI 的任何部分。如果一些功能在精简版中不起作用，那么它根本就不能成为 UI 的一部分。

在 lite 应用程序中，您可能有一个按钮或其他 UI 元素可以让用户升级。如果用户达到了精简版所施加的一些限制，您可以通知用户如果他们愿意，他们可以升级。但永远不要突然提示用户升级。

精简版应用不需要 IAP。如果您愿意，您可以创建一对应用程序（精简版/付费）。

如果您决定使用带有 IAP 的单个应用程序进行升级，请不要将应用程序称为“Lite”。不要在图标中添加“lite”。因为如果你这样做了，一旦他们升级应用程序，你的客户就会讨厌你，而且它仍然在任何地方说“精简版”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T15:35:55.597

如果您没有对您的应用程序设置任何时间限制，或从游戏中删除功能 - 它会作为精简版传递。

“删除功能”限制是那些模棱两可的陈述之一。你不会从文本编辑器中删除“保存”功能，尽管你会在赛车游戏中没有不同型号的汽车，或者将其作为 IAP 来逃避。

这都是相当主观的

# sass - 提取正文类以在 Scss 中使用

> ID：13766023
> 
> 赞同：0
> 
> 时间：2012-12-07T15:26:10.563
> 
> 标签：sass

我正在学习 Sass，但在尝试解决问题时有点卡住。我想在不同的页面上有一个独特的背景图像和标题图像。我怎样才能从标记中提取主体类名称并在 scss 中解释它？

本质上我需要一些方法来防止不得不这样做（这完全是scss的重点吗？！）

```
body.page1 {
  background: url(../img/bkg-page1.png) left top repeat-x;

  header {
    background: url(../img/header-page1.png) center top no-repeat;
    height: 320px; 
  }

}

body.page2 {
  background: url(../img/bkg-page2.png) left top repeat-x;

  header {
    background: url(../img/header-page2.png) center top no-repeat;
    height: 320px; 
  }

} 
```

我意识到使用变量是正确的方向，但不确定如何将标记类中继到 scss。

任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T15:44:38.167

您正在寻找的是一个 @each 循环：

```
@each $class in (page1, page2, page3) {
    body.#{$class} {
        background: url(../img/bkg-#{$class}.png) left top repeat-x;

        header {
            background: url(../img/header-#{$class}.png) center top no-repeat;
            height: 320px; 
        }
    }
} 
```

这假定类名称对应于图像名称，如您的示例中所示。

```
body.page1 {
  background: url(../img/bkg-page1.png) left top repeat-x;
}

body.page1 header {
  background: url(../img/header-page1.png) center top no-repeat;
  height: 320px;
}

body.page2 {
  background: url(../img/bkg-page2.png) left top repeat-x;
}

body.page2 header {
  background: url(../img/header-page2.png) center top no-repeat;
  height: 320px;
}

body.page3 {
  background: url(../img/bkg-page3.png) left top repeat-x;
}

body.page3 header {
  background: url(../img/header-page3.png) center top no-repeat;
  height: 320px;
} 
```

如果您的类名总是在其名称的末尾有数字，则可以改用 @for 循环（这消除了对类名列表的需要）。

# java - Android 谷歌地图 V2 用户位置

> ID：13766025
> 
> 赞同：5
> 
> 时间：2012-12-07T15:26:24.110
> 
> 标签：java, android, eclipse, google-maps, geolocation

蓝点/箭头未显示在我的地图上。其他一切正常。我错过了一些权限吗？

包括 Java 类、清单和布局 XML。

```
private void setUpMap(int satelliteMode, LatLng startPoint, float zoomLevel) {

        mapView.getUiSettings().setZoomControlsEnabled(false);
        //mapView.getUiSettings().setMyLocationButtonEnabled(false);
        mapView.setMapType(satelliteMode);
        mapView.setMyLocationEnabled(true);
        mapView.moveCamera(CameraUpdateFactory.newLatLngZoom(startPoint, zoomLevel));
    } 
```

xml:

```
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/mapview"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        class="com.google.android.gms.maps.SupportMapFragment"/> 
```

显现：

```
<permission
         android:name="com.example.project.MAPS_RECEIVE"
         android:protectionLevel="signature"/>
    <uses-permission  android:name="com.example.project.MAPS_RECEIVE"/>
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
    <uses-feature android:glEsVersion="0x00020000" android:required="true"/>

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >

        <meta-data
           android:name="com.google.android.maps.v2.API_KEY"
           android:value="API_KEY"/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T23:47:04.717

您会看到单击“我的位置”按钮会在您当前的位置创建蓝点。使用位置管理器跟踪位置更新并相应地移动相机允许您也跟踪用户，而无需单击按钮。请参阅下面的片段。

```
LocationListener ll = new LocationListener() {

        @Override
        public void onLocationChanged(Location arg0) {
            Toast.makeText(getBaseContext(), "Moved to "+arg0.toString(), Toast.LENGTH_LONG).show();
            CameraPosition cp = new CameraPosition.Builder()
            .target(new LatLng(arg0.getLatitude(),arg0.getLongitude()))
            .zoom(12)
            .build();     
            map.animateCamera(CameraUpdateFactory.newCameraPosition(cp));
        }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T17:38:29.460

你好 FragmentActivity 添加实现 LocationListener

```
private LocationManager locationManager; 
```

在`onCreate(Bundle savedInstanceState)`.... 添加

```
locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);

Criteria locationCriteria = new Criteria();
locationCriteria.setAccuracy(Criteria.ACCURACY_FINE);       locationManager.requestLocationUpdates(locationManager.getBestProvider(locationCriteria, true), 1L, 2F, this); 
```

并实现了 LocationListener 的方法；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T12:27:12.363

出于某种原因，它刚刚起作用。去吃午饭，然后打开应用程序。当我返回时，蓝色箭头绘制在地图上。虽然不在正确的位置，但它在地图上。所以我发布的代码有效。它只需要位置管理器的更新。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T12:59:57.340

FWIW，我的问题与三星 Galaxy Tab 2 上的原始帖子完全相同。但是，我在爱可视 101G9 上没有这个问题。

如果我重新启动，使用 Google Maps v2 加载我的应用程序并单击右上角的“转到我的位置”按钮，Archos 会直接转到我当前的位置，但 SGT2 什么也不做。

如果我使用位置管理器手动获取当前位置并将地图设置为动画，那么它会导航。但是，单击“转到我的位置”按钮仍然没有任何作用。

使用 GPS 进行定位似乎可以解决问题。

编辑：在 SGT2 上，蓝色位置点仅在 GPS 定位时出现，但爱可视显示蓝点与移动数据/wifi 定位。

# c++ - Qt中类成员变量的内存管理

> ID：13766026
> 
> 赞同：1
> 
> 时间：2012-12-07T15:26:32.113
> 
> 标签：c++, qt, memory-management, qgraphicsscene

我正在使用基于 Qt 的 QGraphicsScene 功能的 Qt 编写图像查看器。我在一个名为 ImageModel 的类中创建每个图像的模型，并在一个名为 ImageView 的类中管理图像的显示。ImageView 类如下（只是有趣的部分）：

```
class ImageView
{
public:
    ImageView(QWidget *parent);

    QGraphicsView * getView() {return view; }

private:

    //qgraphics scene elements
    QGraphicsScene *scene;
    QGraphicsView *view;
    QGraphicsPixmapItem *curItem;

}; 
```

该类的构造函数如下：

```
ImageView::ImageView(QWidget *parent)
{

    //create scene and view with parent the main window
    //such that the memory management is done by qt
    scene = new QGraphicsScene(parent);
    view = new QGraphicsView(parent);

    view->setScene(scene);
} 
```

我在 QMainWindow 的推导中也有指向 ImageView 的指针。

我的问题是：我应该让 Qt 通过将我的主窗口设置为视图和场景的父级来进行内存管理，还是我应该自己处理内存管理（让视图和场景没有父级并在课堂上删除它们析构函数）？在这种情况下，什么是好的策略？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T14:18:09.290

让 Qt 负责删除。它方便又安全。不要保留不需要的参考。例如，添加布局并保留引用只是为了删除是不值得的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T15:48:12.493

如果你不再需要它们，你有理由让它们在父母的整个生命周期里都在身边吗？如果不是，我不明白您为什么要保留分配的内存。

如果您不再需要资源，则应该释放它，除非您有理由不这样做。请注意，无论它们是否有父级，您都可以删除它们；当您删除具有父对象的对象时，它会将自身从父对象的子列表中删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T16:02:36.043

如果您希望视图嵌套在主窗口中，则必须将*其*设为子窗口。

对于您的一般问题，这实际上归结为您想要的对象生命周期和所有权语义。如果您不想让视图/场景超过主窗口，那么是的，它们应该是孩子。您仍然可以选择在更早的时间通过其他方式删除它们。

# c++ - 在.lib 中使用#ifdef 并在链接项目中定义变量

> ID：13766029
> 
> 赞同：1
> 
> 时间：2012-12-07T15:26:40.643
> 
> 标签：c++, libraries

我正在使用 Visual Studio 2008 在 c++ 中创建一个库 (.lib)。我想设置一个变量来根据变量更改库的行为。简化了很多，像这样：

```
#ifdef OPTION1
i = 1;
#else
i = 0;
#endif 
```

但是变量（在本例中为 OPTION1）不应该在库本身中定义，而是在链接到库的代码中定义，这样只需更改变量的定义，我就可以从程序中获得不同的行为，但总是链接到同一个图书馆。

这可能吗，怎么做？还是有更优雅的方式来实现我想要的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T15:37:56.207

要实现这一点，必须将依赖于宏的代码编译为链接到库的代码的一部分，而不是作为库本身的一部分。你能做的最好的事情是这样的：

**在您的公共 .h 文件中：**

```
namespace LibraryPrivate {

void functionForOptionSet();
void functionForOptionUnset();

}

#ifdef OPTION1
inline void dependentBehaviour() {
  LibraryPrivate::functionForOptionSet();
}
#else
inline void dependentBehaviour() {
  LibraryPrivate::functionForOptionUnset();
}
#endif 
```

**在您图书馆的 .cpp 文件中：**

```
namespace LibraryPrivate {

void functionForOptionSet()
{ i = 1; }

void functionForOptionUnset()
{ i = 0; }

} 
```

也就是说，您必须在库中实现这两个选项，但您可以（部分）基于宏限制接口。有点像 WinAPI`char`对`wchar_t`函数的处理：if 提供两者`SomeFunctionA(char*)`，`SomeFunctionW(wchar_t*)`然后提供一个`SomeFunction`扩展为其中一个的宏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T16:01:06.213

简单回答是不。诸如此类的事情`#ifdef`完全由编译器处理（实际上是在编译器的预处理器阶段，甚至在它解析代码之前）；`.lib`已经编译了一个文件。

一种解决方案是以源代码形式提供库，并让客户将其编译为项目的一部分。这还有一个额外的优势，即您可以自动支持所有版本的编译器，以及所有可能的编译器选项组合。缺点是您的库将与您从未测试过的编译器版本和编译器选项一起使用，并且您甚至可能无法测试。

否则，您将需要使用变量和`if`s 和`?:`，而不是`#ifdef`. 而且您必须安排一些设置变量的方法。

最后，如果只有一个这样的变量，您可能会考虑提供两组不同的库版本：一组设置它，另一组不设置。然后客户决定他想使用哪一个。在许多方面，这是最简单的解决方案，但它绝对不能扩展——有一百个这样的变量，如果它们是独立的，你将需要`2^100`不同的变体集，而这不适合任何磁盘。

# c# - 如何在 XNA 中使用浮点值作为鼠标位置？

> ID：13766034
> 
> 赞同：0
> 
> 时间：2012-12-07T15:26:53.880
> 
> 标签：c#, xna, position, mouse

我正在编写像游戏一样的太空入侵者，我希望能够用鼠标和键盘移动玩家控制的飞船。使用键盘移动飞船时，会使用一个速度常数。用鼠标移动船时，只改变船的位置。用键盘移动飞船时，鼠标的位置也会发生变化，与飞船的位置保持一致。

我提到的常量不是 int 值，而是 float 值。这背后的原因是我想添加一个加速器来提高船的速度，它可能是也可能不是 int 类型。另外，如果玩家要求或游戏难度较大，我希望能够微调速度。问题是，MouseState 给了我一对 int 坐标，但船的位置是一对浮动坐标。所以这就是问题所在：

每一帧，我需要将飞船移动到鼠标位置（鼠标控制），每一帧我需要将鼠标位置移动到飞船（键盘控制）。由于鼠标给了我 int 坐标，因此必须将来自船位的浮点坐标转换为 int，这破坏了我之前描述的想法。有什么方法可以强制鼠标使用浮点坐标，无论是 XNA 中的解决方法还是其他一些 API（DirectX 或 WINAPI）？我也在玩弄虚拟坐标和屏幕坐标的想法，并在它们之间进行转换。

干杯，亚历克斯

编辑：添加代码片段：

```
if (_keybState.IsKeyDown(Keys.Right))
{
    Mouse.SetPosition(
    (int)(_player1.GetPlayerPosition().X + Constants.HorizontalMovementSpeed), 
    (int)(_player1.GetPlayerPosition().Y));
}
if (_keybState.IsKeyDown(Keys.Left))
{
    Mouse.SetPosition(
        (int)(_player1.GetPlayerPosition().X - Constants.HorizontalMovementSpeed),
        (int)(_player1.GetPlayerPosition().Y));
}
if (_keybState.IsKeyDown(Keys.Up))
{
    Mouse.SetPosition(
        (int)(_player1.GetPlayerPosition().X ),
        (int)(_player1.GetPlayerPosition().Y - Constants.VerticalMovementSpeed));
}
if (_keybState.IsKeyDown(Keys.Down))
{
    Mouse.SetPosition(
        (int)(_player1.GetPlayerPosition().X),
        (int)(_player1.GetPlayerPosition().Y + Constants.VerticalMovementSpeed));
}
if (_keybState.IsKeyDown(Keys.Space) && _shootKeyPressed == false)
{
    _player1.Shoot();
    _shootKeyPressed = true;
}

_shoboState = Mouse.GetState();
_player1.MovePlayerShipToPosition(new Vector2(_shoboState.X, _shoboState.Y)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T08:21:15.537

而不是像这样将鼠标和船舶位置捆绑在一起：

```
_shoboState = Mouse.GetState();
_player1.MovePlayerShipToPosition(new Vector2(_shoboState.X, _shoboState.Y)); 
```

尝试以下方式：

1.  找到鼠标和船之间的单位向量。这将使您从飞船到鼠标有 1 个单位的步长。（你应该可以很容易地找到这方面的教程）
2.  将单位向量乘以您的移动量。这为您提供了移动船的方向和距离。
3.  将新矢量应用到您的船上。
4.  将鼠标尽可能靠近您的船的新位置。

# c - C 中 Ackermann 函数的替代实现

> ID：13766037
> 
> 赞同：5
> 
> 时间：2012-12-07T15:27:21.827
> 
> 标签：c, assembly, recursion, mips

我用 C 语言编写了一个程序，它计算用户输入的 2 个非负整数的**Ackermann值。**程序检查整数是否为非负数，如果是，则计算它们的 Ackermann 值，然后请求新的输入或退出。该程序在 C 中运行良好，我对此没有任何问题。这是我的代码：

```
int ackermann(int m, int n){
        if (m == 0) return n + 1;
        if (n == 0) return ackermann(m - 1, 1);
        return ackermann(m - 1, ackermann(m, n - 1));
} 
```

但是，事实上，为了大学课程的需要，我们使用了 C 的修改版本（基本相同，但有一些不同的语法规则），它模拟了 MIPS 汇编语言的语法和规则。更具体地说，我们使用寄存器来操作除数组和结构之外的所有数据。此外，我们不能使用 for、while 或 do-while 循环，我们使用**if**和**goto**而是声明。所以我用这种语言编写了以下程序（正如我所说的，它只不过是具有不同语法的 C）。我的问题是它仅适用于 (x,0) 和 (0,y) 用户输入（x 和 y 是非负数）。它不适用于 (4,1)、(3,2) 以及通常所有不为零的输入。我知道由于这些计算的大量堆栈，它不能有效地处理像 (10,10) 这样的非常大的数字。但我希望它适用于一些简单的输入，如 Ackermann(3,1) == 13。有关 Ackermann 函数的更多信息，请参阅：[http](http://en.wikipedia.org/wiki/Ackermann_function) ://en.wikipedia.org/wiki/Ackermann_function 这是我的代码：

```
//Registers --- The basic difference from C is that we use registers to manipulate data
int R0=0,R1,R2,R3,R4,R5,R6,R7,R8,R9,R10,R11,R12,R13,R14,R15,R16,R17,R18,R19,R20,R21,
R22,R23,R24,R25,R26,R27,R28,R29,R30,R31;

int ackermann(int m, int n){

    R4 = m;
    R5 = n;

    if(R4 != 0)
        goto outer_else;
    R6 = R5 + 1;
    return R6;

    outer_else:
        if(R5 != 0)
            goto inner_else;
        R7 = R4 - 1;
        R6 = ackermann(R7, 1);
        return R6;

        inner_else:
            R8 = R5 - 1;
            R9 = ackermann(R4, R8);
            R10 = R4 - 1;
            R6 = ackermann(R10, R9);
            return R6;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T15:44:12.247

我认为您的问题是这些寄存器值被定义为全局变量，并且它们正在通过对 的内部调用进行更新`ackermann()`，而外部调用取决于这些值不会改变。例如，看一下`inner_else`您的寄存器版本中的子句`ackermann()`：它调用`ackermann(R4, R8)`，并且在下一条语句中取决于 R4 的当前值，但递归调用在到达赋值语句之前改变了 R4 的设置。

两种常见的解决方案：

1.  将您的寄存器定义为局部变量，并让编译器为您跟踪每个函数调用状态。

2.  在进入您的`ackermann()`函数时，手动保存所有寄存器的状态，然后在退出时恢复相同状态。

尽管解决方案 1 更简单，但我怀疑您的老师可能更喜欢解决方案 2，因为它说明了编译器在其生成的汇编代码中处理实际寄存器管理所使用的技术。

# php - ZF2：如何将参数传递给转发插件，然后我可以在转发它们的方法中获取这些参数？

> ID：13766039
> 
> 赞同：8
> 
> 时间：2012-12-07T15:27:23.123
> 
> 标签：php, zend-framework2, zend-framework-mvc, zend-framework-routing

我在**Foo** Controller 中有一个 Action 方法，它需要参数：

```
public function fooAction($one, $two) {
    $a = one;
    $b = $two;
} 
```

我需要从一些**Boo**控制器的其他方法转发到该方法。其中一个参数必须是引用参数。[该手册](http://zf2.readthedocs.org/en/latest/modules/zend.mvc.plugins.html#the-forward-plugin)的唯一示例是：

```
$result = $this->forward()->dispatch('Boo\Controller\Boo', array('action' => 'boo')); 
```

没有任何附加参数。但他们写道：

> $params 是一个可选参数数组，用于查看 RouteMatch 对象以用于此特定请求。

所以，我尝试了：

```
$result = $this->forward()->dispatch('Boo\Controller\Boo', array(
                                                      'action' => 'boo',
                                                      'one' => &$one,
                                                      'two' => $two,
                                                 )); 
```

但它不起作用。

有没有办法将额外的参数传递给转发控制器？

**升级版：**

这些也不起作用：

```
$result = $this->forward()->dispatch('Boo\Controller\Boo', array(
                                                      'action' => 'boo',
                                                      'params' => array(
                                                          'one' => &$one,
                                                          'two' => $two,
                                                     )));

$result = $this->forward()->dispatch('Boo\Controller\Boo', array(
                                                      'action' => 'boo',
                                                      'options' => array(
                                                          'one' => &$one,
                                                          'two' => $two,
                                                     ))); 
```

**更新 2：**

我仍然无法获得我想要的功能（通过`forward`插件传递参数），但我找到了其他解决方案。在调用`forward`插件之前，我将变量设置为`Request`对象，然后从我的**Boo\Controller\BooController的****boo** Action 中`forward`获取它们：`Request`

 ****```
// in Foo::fooAction
$this->getRequest()->one = &$one;
$this->getRequest()->two = $two;
$result = $this->forward()->dispatch('Boo\Controller\Boo', array('action' => 'boo'));

// in Boo::booAction
$a = $this->getRequest()->one;
$b = $this->getRequest()->two; 
```

愚蠢的解决方案，它不适用于 Ajax 请求。仍然对如何使用 forward 插件传递参数感兴趣。或者也许如何让他们进入**booAction**。因为`Request`如果我将它们与`forward`.

**UPD 3 和最终版本：**

我终于找到了他们决定隐藏我通过`forward`插件传递的参数的地方。他们将它们放入`RouteMatch`对象中。

- 试着猜猜我们把你的参数藏在哪里了……哦，是的`RouteMatch`，它们在里面，当然它们在那里，你不觉得吗？

`forward`并且在手册的插件部分没有任何信息！

要获得参数，我必须在我的`BooController::booAction`：

```
$param = $this->getEvent()->getRouteMatch()->getParam('nameOfParam'); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-12-07T19:27:52.117

为什么不使用 params 插件？

这对我有用：

```
public function indexAction() {

        $object = new SomeObject();

        return $this->forward()->dispatch('Application\Controller\Index', [
                'action'     => 'show',
                'myObject'   => $object,
        ]);
    }

public function showAction() {

        $object = $this->params('myObject');

        var_dump($object);

        return [];
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-08T10:35:49.040

您可以创建一个容器类并在两个控制器中使用它

在 module.conf

```
public function getServiceConfig()
{
    return array(
        'invokables' => array(
            'my_handy_container'        => 'path\container_class_name',
        )
    );
} 
```

在两个控制器中创建一个 getter：

```
public function getMyHandyContainer()
{
    if (!$this->myHandyContainer) {
        $this->myHandyContainer = $this->getServiceLocator()->get('my_handy_container');
    }
    return $this->myHandyContainer;
} 
```

并使用以下方法调用它：

```
$myContainer = $this->getMyHandyContainer()->myHandyContainer;
$myContainer->foo = 5; // set something 
```

# ZF2 使用 forward 传递变量的方法

在传递方法中：

```
return $this->forward()->dispatch('controller_name', [
    'action' => 'whatever',
    'varname' => $value,
    'varname2' => $value2
]); 
```

在调用的控制器方法中，执行：

```
$param2 = $this->params()->fromRoute('varname2',false); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-05T21:51:48.640

以为我会添加另一个适合我的选项。

您可以简单地通过 forward 函数直接传递参数，并使用 routeMatch 函数在另一端访问它们。

```
return $this->forward()
            ->dispatch('Module\Controller\Foo', array(
                                            'action' => 'bas', 
                                             'id' => 6)
                                              ); 
```

传递给**Foo**控制器，此方法中的**basAction**然后您可以使用以下代码访问 id 参数

```
$myParam = (int) $this->getEvent()->getRouteMatch()->getParam('id'); 
```

不确定这是否符合您的要求 - 但对我有用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-16T19:11:18.670

谢谢你的问题，对我帮助很大。找到了一种将所有参数传递给 forward()->dispatch(...) 的简单方法。在控制器的 action 方法中：

```
$params = $this->params()->fromRoute(); 
```

返回数组 $data 作为 $data 传递给 forward()->dispatch($controllerName, $data)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-04-17T08:04:58.897

[在官方 ZF2 文档](http://framework.zend.com/manual/current/en/modules/zend.mvc.plugins.html#forward-plugin)中，它是如何工作的：

*`$params`是一个可选的参数数组，用于为 RouteMatch 对象播种以用于此特定请求。这意味着参数将通过它们的键与配置中的路由标识符匹配（否则将忽略不匹配的键）*。

所以像这样通过：

```
$params = array(
    'foo' => 'foo',
    'bar' => 'bar'
);
$this->forward()->dispatch('My\Controller', $params) 
```

然后您可以`My\Controller`正常获取您的路线匹配参数：

```
$foo = $this->params()->fromRoute('foo');
$bar = $this->params()->fromRoute('bar'); 
```

对于那些在控制器中难以访问参数的人来说，这里有一份来自**[这个 CheatSheet](http://zf2cheatsheet.com/)**的很好的概述。

```
$this->params()->fromPost('foo');  //POST
$this->params()->fromQuery('foo'); //GET
$this->params()->fromRoute('foo'); //RouteMatch
$this->params()->fromHeader('foo');//Header
$this->params()->fromFiles('foo'); //Uploaded file 
```****

# javascript - 如何使用javascript迭代哈希表键内的列表

> ID：13766041
> 
> 赞同：0
> 
> 时间：2012-12-07T15:27:30.637
> 
> 标签：javascript, jquery, asp.net, list, hashtable

我有一个用图片填充的字符串列表（列表）（在我的代码隐藏中）。然后我将它存储在一个带有“sbPrints”键的哈希表中，然后返回给ajax调用。

但是我不知道如何在 javascript 中迭代该特定键内的列表。

包含 javascript 列表的 hastable 如下所示：`h['sbPrints'].`

我问这个的原因是因为如果我这样做

```
$('#prints').val(h['sbPrints']); 
```

然后我最终在每张图片之间添加了不需要的逗号。

编辑：如何填充哈希表

iny 我的代码隐藏：

```
[WebMethod]
public static Hashtable getPersonInfo(int personID)
{
     Hashtable h = new Hashtable();
     SqlDataReader drThumbs;
     drThumbs = comGetThumbs.ExecuteReader();
     List<string> fingerPrints = new List<string>();
     while(drThumbs.Read())
     {
          fingerPrints.Add("<div class=\"fingerprints\"><img alt='prints' src='../ShowThumbnail.ashx?BFID=" + drThumbs["BinaryFileID"].ToString() + "'/><div><label><a class=\"finger\" href='../DownloadFile.aspx?id=" + drThumbs["BinaryFileID"].ToString() + "'>" + drThumbs["FileName"].ToString() + "</label></div></div>");
     }
} 
```

然后在我的 javascript 文件中，我对该方法进行 ajax 调用，并使用来自哈希表的数据填充我的 asp 控件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T15:38:45.567

我不太明白你的意思，但是这个怎么样：

```
$.each(h['sbPrints'], function(i, v) {
  $('#prints').val(v);
}); 
```

这将遍历每个项目`h['sbPrints']`并将它们传递给`prints`选择器的 jQuery 值函数。我真的不知道您为什么要这样做，因为`$.each`将替换每次迭代中的值。

也许您的意思是这`h['sbPrints']`是一个数组，当它被字符串化时，您的浏览器将在项目之间插入逗号。如果您只想要不带逗号的列表，那么您可以这样做：

```
$('#prints').val(h['sbPrints'].join('')); 
```

# java - 添加类路径时出现 java.lang.NoClassDefFoundError

> ID：13766042
> 
> 赞同：0
> 
> 时间：2012-12-07T15:27:32.283
> 
> 标签：java, jar, classpath

代码：

```
 import org.apache.commons.codec.binary.Base64;

import java.io.UnsupportedEncodingException;
import java.security.InvalidAlgorithmParameterException;
import java.security.InvalidKeyException;
import java.security.MessageDigest;
import java.security.NoSuchAlgorithmException;
import java.security.NoSuchProviderException;
import java.security.SecureRandom;
import java.security.spec.InvalidKeySpecException;
import java.util.Arrays;

import javax.crypto.BadPaddingException;
import javax.crypto.Cipher;
import javax.crypto.IllegalBlockSizeException;
import javax.crypto.NoSuchPaddingException;
import javax.crypto.SecretKey;
import javax.crypto.SecretKeyFactory;
import javax.crypto.spec.IvParameterSpec;
import javax.crypto.spec.PBEKeySpec;
import javax.crypto.spec.SecretKeySpec;

public class AESTest 
{ 
    public static void main(String [] args)
    {
        String enc = AESEncryptToBase64("000000", "XJ5QJSVMKZGBOQO7HMSIJO5BERW2OYWDVNPM3BH32NLSWUCNJ4FIP3BML7EKUBNO");
        System.out.println(enc);
    }

    /**
     * 
     * @param secret
     * @param cleartext
     * @return encrypted b64 string
     */
    public static String AESEncryptToBase64(String secret, String clearText) {
        byte[] rawKey = new byte[32];
        java.util.Arrays.fill(rawKey, (byte) 0);
        byte[] secretBytes = secret.getBytes();
        for(int i = 0; i < secretBytes.length; i++){
            rawKey[i] = secretBytes[i];
        }

        SecretKeySpec skeySpec = new SecretKeySpec(rawKey, "AES");
        try{ 
            Cipher cipher = Cipher.getInstance("AES");
            cipher.init(Cipher.ENCRYPT_MODE, skeySpec);
            byte[] encryptedData = cipher.doFinal(clearText.getBytes());
            if(encryptedData == null) return null;
            // return "l";
            return Base64.encodeBase64String(encryptedData);
        } catch (Exception e){
            e.printStackTrace();
        }
        return null;      

    }
} 
```

编译并运行：

```
 $ javac -cp "commons-codec-1.7.jar" AESTest.java 
 $ java -cp "commons-codec-1.7.jar" AESTest
 Exception in thread "main" java.lang.NoClassDefFoundError: AESTest
 Caused by: java.lang.ClassNotFoundException: AESTest 
```

这是 apache-commons-codec： [http ://apache.mirrors.pair.com//commons/codec/binaries/commons-codec-1.7-bin.zip](http://apache.mirrors.pair.com//commons/codec/binaries/commons-codec-1.7-bin.zip)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T16:01:49.180

包含`.`到您的类路径中：`java -cp ".:commons-codec-1.7.jar" AESTest`

这将告诉 JVM 将当前文件夹中的类包含到类路径中

# mongodb - MongoVue 日期搜索将月份加 1

> ID：13766045
> 
> 赞同：7
> 
> 时间：2012-12-07T15:27:44.533
> 
> 标签：mongodb, mongovue

好的，我很确定这件事一定是一个错误......我必须输入我正在寻找的前一个月：

```
{
   "SportId":"Horse Racing",
   "Date":{$gt: new Date(2012,11,4)}
} 
```

解释输出：

```
[ 15:21:39 ]
db.Fixture.find({ "SportId" : "Horse Racing", "Date" : { "$gt" : ISODate("2012-12-04T00:00:00Z") } }).limit(50);
db.Fixture.find({ "SportId" : "Horse Racing", "Date" : { "$gt" : ISODate("2012-12-04T00:00:00Z") } }).limit(50).explain(); 
```

任何人都可以解释这一点 - 比上面更好吗？不是必需的，因为我知道我可以解决它。但这似乎是一件很奇怪的事情。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-07T15:36:08.363

基于 javascript Date 构造函数的月份为零。

[http://www.w3schools.com/js/js_obj_date.asp](http://www.w3schools.com/js/js_obj_date.asp)

[http://www.w3schools.com/jsref/jsref_setmonth.asp](http://www.w3schools.com/jsref/jsref_setmonth.asp)

# java - NetBeans 使用什么工具从数据库生成实体类？

> ID：13766050
> 
> 赞同：3
> 
> 时间：2012-12-07T15:28:01.793
> 
> 标签：java, jpa, netbeans, orm, intellij-idea

当您按下 ctrl+n 并选择“Persistance -> Genarate entity classes from Database”时，可以在 Netbeans 7.2 中找到此工具。它工作得很好。

我想在 IntelliJ 中使用它，因为 IntelliJ 使用不同的东西（持久性选项卡中的选项“生成持久网络映射 -> 按数据库模式”）从模式生成实体。生成的类没有用，因为它们只包含原始类型

例如：

我的架构的一部分：

```
create table users (
  id int not null primary key,
  login varchar(64) not null unique,
  pass char(150) not null
);

create table groups (
  login varchar(64) not null,
  group_name varchar(64) not null,
  foreign key (login) references users (login)
); 
```

IntelliJ 生成的部分实体：

```
@Entity
public class Users
{

    private Integer id;

    @javax.persistence.Column(name = "id")
    @Id
    public Integer getId()
    {
        return id;
    }

    public void setId(Integer id)
    {
        this.id = id;
    }

    private String login;

    @javax.persistence.Column(name = "login")
    @Basic
    public String getLogin()
    {
        return login;
    }

    public void setLogin(String login)
    {
        this.login = login;
    }

    private String pass;

    @javax.persistence.Column(name = "pass")
    @Basic
    public String getPass()
    {
        return pass;
    }

    public void setPass(String pass)
    {
        this.pass = pass;
    }

    @Override
    public boolean equals(Object o)
    {
        if (this == o) return true;
        if (o == null || getClass() != o.getClass()) return false;

        Users users = (Users) o;

        if (id != null ? !id.equals(users.id) : users.id != null) return false;
        if (login != null ? !login.equals(users.login) : users.login != null) return false;
        if (pass != null ? !pass.equals(users.pass) : users.pass != null) return false;

        return true;
    }

    @Override
    public int hashCode()
    {
        int result = id != null ? id.hashCode() : 0;
        result = 31 * result + (login != null ? login.hashCode() : 0);
        result = 31 * result + (pass != null ? pass.hashCode() : 0);
        return result;
    }
} 
```

NetBeans 生成的实体的一部分（我想在 IntelliJ 中使用的正确方式）

```
@Entity
@Table(name = "users", catalog = "soccerweb", schema = "public")
@NamedQueries({
    @NamedQuery(name = "Users.findAll", query = "SELECT u FROM Users u"),
    @NamedQuery(name = "Users.findById", query = "SELECT u FROM Users u WHERE u.id = :id"),
    @NamedQuery(name = "Users.findByLogin", query = "SELECT u FROM Users u WHERE u.login = :login"),
    @NamedQuery(name = "Users.findByPass", query = "SELECT u FROM Users u WHERE u.pass = :pass")})
public class Users implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @Basic(optional = false)
    @NotNull
    @Column(name = "id")
    private Integer id;
    @Basic(optional = false)
    @NotNull
    @Size(min = 1, max = 64)
    @Column(name = "login")
    private String login;
    @Basic(optional = false)
    @NotNull
    @Size(min = 1, max = 150)
    @Column(name = "pass")
    private String pass;
    @OneToMany(cascade = CascadeType.ALL, mappedBy = "userId", fetch = FetchType.LAZY)
    private List<Achievements> achievementsList;
    @OneToMany(cascade = CascadeType.ALL, mappedBy = "userId", fetch = FetchType.LAZY)
    private List<BlueTeam> blueTeamList;
    @OneToMany(cascade = CascadeType.ALL, mappedBy = "userId", fetch = FetchType.LAZY)
    private List<RedTeam> redTeamList;
    @OneToMany(cascade = CascadeType.ALL, mappedBy = "userId", fetch = FetchType.LAZY)
    private List<TournamentPlayers> tournamentPlayersList;
    @OneToMany(cascade = CascadeType.ALL, mappedBy = "userId", fetch = FetchType.LAZY)
    private List<Stats> statsList;
    @OneToMany(mappedBy = "userId", fetch = FetchType.LAZY)
    private List<TournamentStats> tournamentStatsList;
    @OneToMany(mappedBy = "userId", fetch = FetchType.LAZY)
    private List<TournamentAchievements> tournamentAchievementsList; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T16:57:17.300

IDEA 还不支持，我创建了一个新的功能请求，[请投票](http://youtrack.jetbrains.com/issue/IDEA-96978)。

您可能还对以下功能请求感兴趣：

*   [IDEA-64709](http://youtrack.jetbrains.com/issue/IDEA-64709) JPA：生成字段访问
*   [IDEA-67051](http://youtrack.jetbrains.com/issue/IDEA-67051)创建通过 Hibernate 逆向工程对 DAO 对象进行逆向工程的能力

# python - 检查该列表中的所有元素是否可以被某个给定整数整除

> ID：13766052
> 
> 赞同：1
> 
> 时间：2012-12-07T15:28:14.323
> 
> 标签：python

给定一个列表，我想检查该列表中的所有元素是否可以被某个给定整数整除。基于此，我必须返回一个布尔值。

```
l=[10,30,40,20] 
```

例如 - 这个列表的所有元素都可以被 5 整除。然后，我会返回`True`. 6，我会回来`False`的。

我能想到的一种方法是生成一个由布尔值组成的数组，然后`AND`是它们。

```
blist=[x%5==0 for x in l]
# [False, False, False, False]
# AND THE ELEMENTS 
```

但是这种方法感觉很糟糕。任何人都可以提出一个更简单`pythonic`的方法来解决这个问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T15:32:03.493

首先，您需要模除法 ( `%`)，因为您想查看它是否均匀地除以`5`，因此您检查的是余数，而不是除法的结果。

您可以使用[内置函数（它](http://docs.python.org/3/library/functions.html#all)[按照`all()`](http://docs.python.org/3/library/functions.html#all)它在锡上所说的那样做），但[您不需要生成列表，而是使用生成器表达式](http://www.youtube.com/watch?v=pShL9DCSIUw)：

```
all(x%5 == 0 for x in l) 
```

这具有懒惰的优点，因此只要一个值不可整除，它就会返回，从而节省计算量

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-07T15:30:33.003

使用列表推导是 Pythonic。你需要使用 mod 而不是 div。

使用`all`内置

```
res = all([x%5==0 for x in l]) 
```

您可以通过以下方式更有效地做到这一点

```
res = all(x%5 == 0 for x in l) 
```

它使用生成器表达式。在第一种情况下，python 生成所有 mod 值的列表，在第二种情况下，值是根据需要生成的`all`，因此只生成第一个不可分割的值。

# c# - 首先在代码中指定数据库类型

> ID：13766056
> 
> 赞同：1
> 
> 时间：2012-12-07T15:28:50.530
> 
> 标签：c#, .net, entity-framework

如何告诉数据库`Varbinary(max)`用于图像？

我正在使用带有 EF 6 的 SQL Server Compact 数据库，但无法从 SQL Server 2008 打开它

```
public class Table
{
    public int Id { get; set; }
    public DateTime DateTime { get; set; }

    public byte[] Image { get; set; }

    [NotMapped]
    public string NotMapped { get; set; }
} 
```

当我尝试保存 300,000 字节的图像时，这个异常发生在我身上

> *一个或多个实体的验证失败。有关更多详细信息，请参阅“EntityValidationErrors”属性。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T16:22:05.840

> 我正在使用带有 EF 6 的 SQL Server Compact 数据库，但无法从 SQL Server 2008 打开它

据我所知，SQL Server Compact 无法通过 Management Studio 进行管理。为此，您应该使用 Visual Studio 中的服务器资源管理器（仅限简单功能）或一些外部软件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T15:35:49.877

我阅读了 Ladislav 的以下 SO 帖子，并认为它可以开箱即用。不是吗？我没有亲自尝试过。

当然，这篇文章与 EF Code First CTP5 相关，但 CTP 通常非常接近最终功能。

[如何使用 Entity Framework Code First CTP 5 存储图像？](https://stackoverflow.com/questions/4653095/how-to-store-images-using-entity-framework-code-first-ctp-5)

我在调试时使用以下内容轻松查看验证错误： [一个或多个实体的验证失败。有关更多详细信息，请参阅“EntityValidationErrors”属性](https://stackoverflow.com/questions/7795300/validation-failed-for-one-or-more-entities-see-entityvalidationerrors-propert)

# jquery - 随机选择一个超链接

> ID：13766059
> 
> 赞同：0
> 
> 时间：2012-12-07T15:29:09.610
> 
> 标签：jquery, hyperlink, href

在我的博客上，我有 12 种不同的类型（音乐、摄影、建筑等），然后在一页上每个类型至少有 2 张不同的图像。我目前正在使用 Smoothscroll.js。当您单击摄影（例如）时，它当前将直接转到第一个超链接（X）

```
<a href="#photgraphy"> photography </a>

<a name="photography"> </a> [X]
<a name="photography"> </a> [Y] 
```

有没有一种方法，当您单击摄影时，它会**随机**选择X 或 Y，而不是转到第一个超链接 (X)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T16:11:22.507

```
<html>
<head>
    <script src="http://code.jquery.com/jquery-latest.min.js"></script>
    <script>
        $(document).ready(function(){
            // Create an array of links
            myLinks = new Array;
            myLinks[0] = "#one";
            myLinks[1] = "#two";
            myLinks[2] = "#three";

            // Slide to random link
            $("a.myRandomLink").click(function(){
                randomLink = Math.round(Math.random() * (myLinks.length-1));
                $("html, body").animate({scrollTop: $(myLinks[randomLink]).offset().top + "px"},{duration: 500, easing: "swing"});
                return false;
            });
        });
    </script>
</head>
<body>

    <a href="#" class="myRandomLink">Random link</a><br><br>

    <div id="one" style="width:100%;height:600px;background-color:#550000;"></div>
    <div id="two" style="width:100%;height:600px;background-color:#005500;"></div>
    <div id="three" style="width:100%;height:600px;background-color:#000055;"></div>
    <div id="four" style="width:100%;height:600px;background-color:#ffffff;"></div>

</body>
</html> 
```

# c# - System.Drawing.Image 缓存以获得更好的性能

> ID：13766065
> 
> 赞同：1
> 
> 时间：2012-12-07T15:29:40.203
> 
> 标签：c#, .net, caching, graphics

我正在尝试优化从磁盘读取数百个图像，处理它们并生成单个图像的图形过程，我尝试优化的过程是一遍又一遍地从磁盘读取图像，我正在考虑的选项之一正在读取和缓存内存中的图像。以最简单的形式，我想使用如下字典。

更新：

*   磁盘上的图像不会改变
*   将有一个过程使用上次访问的时间戳从缓存中过期较少使用的项目
*   现在它的单线程进程。
*   平均图像大小约为 400KB
*   物理内存大小为 16GB

这是个好主意吗？最重要的是它会起作用吗？

```
public class ImageCache
{
    protected Dictionary<string, System.Drawing.Image> ImageStore = new   Dictionary<string, System.Drawing.Image>(10000);

 public System.Drawing.Image Get(ImageReference imgRef)
 {
      System.Drawing.Image image;

        if (!ImageStore.TryGetValue(imgRef.Key, out image))
           image= CacheImageFromDisk(imageRef);
       return image;
 }

 System.Drawing.Image CacheImageFromDisk(ImageReference imgRef)
    {
      using (var f = new FileStream(imgRef.Path, FileMode.Open, FileAccess.Read, FileShare.Read))
        {
            var img=Image.FromStream(f);
            ImageStore.Add(imgRef.Key,img);
            return img;
        }
  }

    ~ImageCache()
    {
       //Dispose each item in ImageStore  and calll GC.Collect()
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T15:35:02.673

对我来说这是一个好主意，乍一看，代码似乎可以工作。无论如何考虑：

*   线程安全：如果您有多个线程在处理图像，那么您的 chache 目前不是线程安全的。
*   内存消耗：图像有时会消耗内存，注意这可能会损害进程，甚至由于内存交换而降低性能，在这种情况下你会感觉程序比打开缓存慢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T15:43:18.857

关心的是记忆。
填满内存后，您将返回磁盘 IO。
您是否有足够的内存来存储您正在构建的单个图像和所有源文件。
如果您开始将正在构建的单个映像分页到磁盘，则性能可能会降低。

为了进行优化，请查看为什么要返回文件。
您可以简化流程以一次使用单个源文件并完成它。
或者你至少可以处理一个源文件块并完成它们。

字典是管理集合的正确方法。
但是到期并不是管理规模的非常复杂的方法。
需要根据使用的内存清除字典。
如果应用程序开始分页到磁盘，那就不好了。

至于最佳内存大小，请使用性能计数器并跟踪页面文件使用情况。
但是零不是目标，因为您将进行一些分页。
我的经验是，MSSQL 会最大限度地占用内存并将其保持在那里（除非您对其进行限制）。你的应用我开始在 80% 时分页。
没有标准的百分比。

回到你的应用程序在何时使用和处理文件时不能更聪明吗？

如果您无法将所有内容都放入内存中，那么最划算的是固态磁盘。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T15:49:45.180

我会说将图像缓存在主内存中是一个非常糟糕的主意。内存可能会被用完，甚至会导致整个系统的稳定性出现问题。更高分辨率的图像可能在 20 mb 左右，你会缓存多少?

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T15:38:29.800

> 最重要的是它会起作用吗？

它可能。

> 这是一个好主意吗？

这取决于您重复使用的重复/图像有多少。缓存是内存和性能之间的权衡。您必须检查它在哪里可以显着加快速度，如果这是应用程序的瓶颈（IO 往往难以分析），则更重要的是。

# javascript - 节点的通用日志记录，快速应用程序——最佳实践？

> ID：13766066
> 
> 赞同：14
> 
> 时间：2012-12-07T15:29:50.980
> 
> 标签：javascript, node.js, express, logging, bunyan

我正在开发一个带有几十个模块并使用 bunyan 进行日志记录的 node.js 应用程序（JSON 输出，多个可配置的流）。我一直在寻找如何在所有模块中实现实例的好例子，但还没有看到我可以从中学习的看起来非常干净的例子。

下面说明了一种有效的方法，但对我来说似乎很不优雅（丑陋）。一般来说，我是 node 和 commonjs javascript 的新手，所以寻找有关如何改进它的建议。

模块：./lib/logger

```
// load config file (would like this to be passed in to the constructor)
nconf.file({ file: fileConfig});
var logSetting = nconf.get('log');

// instantiate the logger
var Bunyan = require('bunyan');
var log = new Bunyan({
    name: logSetting.name,
streams : [
        { stream  : process.stdout, 
        level : logSetting.stdoutLevel},
        {    path : logSetting.logfile, 
            level : logSetting.logfileLevel}
    ],
serializers : Bunyan.stdSerializers
});

function Logger() {
};

Logger.prototype.info = function info(e) { log.info(e) };
Logger.prototype.debug = function debug(e) { log.debug(e) };
Logger.prototype.trace = function trace(e) { log.trace(e) };
Logger.prototype.error = function error(e) { log.error(e) };
Logger.prototype.warn = function warn(e) {  log.warn(e) };

module.exports = Logger; 
```

模块：主应用

```
// create the logger
var logger = require('./lib/logger)
var log = new logger();

// note: would like to pass in options -->  new logger(options)

module: any project module using logger
// open the logger (new, rely on singleton...)
var logger = require('./lib/logger');
var log = new logger(); 
```

或[查看要点](http://gist.github.com/4233832)

有什么建议吗？

编辑：

我修改了构造函数，使单例模式显式（而不是隐式作为“要求”行为的一部分。

```
var log = null;
function Logger(option) {

// make the singleton pattern explicit
if (!Logger.log) {
    Logger.log = this;
}
    return Logger.log;
}; 
```

然后将初始化更改为采用选项参数

```
// initialize the logger 
Logger.prototype.init = function init(options) {
log = new Bunyan({
    name: options.name,
    streams : [
        { stream  : process.stdout, 
            level : options.stdoutLevel},
        {    path : options.logfile, 
            level : options.logfileLevel}
    ],
    serializers : Bunyan.stdSerializers     
    });
}; 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-12T08:46:20.880

[nodejs中的单例模式 - 需要吗？](https://stackoverflow.com/questions/13179109/singleton-pattern-in-nodejs-is-it-needed) 实际上，Node 的环境中可能不需要单例。您需要做的就是在单独的文件 logger.js 中创建一个记录器：

```
var bunyan = 要求（“bunyan”）；// 班扬依赖
var logger = bunyan.createLogger({name: "myLogger"});

module.exports = 记录器；

```

然后，从另一个模块中检索此记录器：

```
var logger = require("./logger");
logger.info("任何你喜欢的");

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T05:11:23.063

如果你在 node.js 中使用 express，那么你可以试试这个。默认情况下，Express 中禁用日志记录。您必须做一些事情才能让日志为您的应用程序工作。对于访问日志，我们需要使用Logger中间件；对于错误日志，我们将使用 Forever。希望它对您有所帮助.. 这是一个很好的示例[How to Logging Access](http://www.hacksparrow.com/express-js-logging-access-and-errors.html) and Errors in node.js

# php - 在 Wordpress 中嵌套简码会导致内部简码根本不打印出来

> ID：13766077
> 
> 赞同：3
> 
> 时间：2012-12-07T15:30:38.360
> 
> 标签：php, wordpress, shortcode

我已经安装了 _s 主题并且几乎没有开始使用它。

我正在尝试将名为“”的简码嵌套在名为“ `b`”的简码中`cb.`这是我的代码（来自`functions.php`文件）：

```
// Short Code
function box_shortcode( $atts, $content = null ) {
  extract(
      shortcode_atts(array(
          's' => '1'
          ), $atts));

  if($s == '1') { $box_classes = 'c1_4 aside'; }
  if($s == '2') { $box_classes = 'c2_4 main'; }
  if($s == '3') { $box_classes = 'c3_4'; }
  if($s == '4') { $box_classes = 'c4_4'; }

  return '<section class="' . $box_classes . '">' . $content . '</section>';
}
add_shortcode( 'b', 'box_shortcode' );

function contentblock_shortcode( $content = null ) {
  return '<div class="inner">' . do_shortcode($content) . '</div>';
}
add_shortcode( 'cb', 'contentblock_shortcode' );

add_filter('the_content', 'do_shortcode'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T17:10:32.173

```
add_filter('the_content', 'do_shortcode'); 
```

不需要。

您的两者都应该将 atts 和 content 作为属性，并且您的 OUTER（不是内部）函数应该有一个`do_shortcode`内部。最终代码应该是这样的：

```
function box_shortcode( $atts, $content = null ) {
  extract(
      shortcode_atts(array(
          's' => '1'
          ), $atts));

  if($s == '1') { $box_classes = 'c1_4 aside'; }
  if($s == '2') { $box_classes = 'c2_4 main'; }
  if($s == '3') { $box_classes = 'c3_4'; }
  if($s == '4') { $box_classes = 'c4_4'; }

  return '<section class="' . $box_classes . '">' . $content . '</section>';
}
add_shortcode( 'b', 'box_shortcode' );

function contentblock_shortcode( $atts, $content = null ) {
  return '<div class="inner">' . do_shortcode($content) . '</div>';
}
add_shortcode( 'cb', 'contentblock_shortcode' ); 
```

如果您将使用您的短代码，`[cb][b]content[/b][/cb]` 如果您想以相反的方式使用它们，请移至`do_shortcode($content)`该功能`box_shortcode( $atts, $content = null )`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T16:48:03.290

我相信问题是你的`contentblock_shortcode`函数`$content`作为它的第一个参数，而它应该是第一个参数`$atts`。将其更改为`function contentblock_shortcode($atts, $content = null)`应该允许内部`do_shortcode`仅将内容传递给`do_shortcode`内部部分中的方法。

# objective-c - FMDatabase 查询适用于 ? 但文字失败

> ID：13766078
> 
> 赞同：0
> 
> 时间：2012-12-07T15:30:40.493
> 
> 标签：objective-c, nsstring, fmdb

这是一个奇怪的问题。我找到了一种可行的解决方法，但我想了解原因，因为我怀疑它稍后会在我的代码中再次出现。这是给我的问题的方法：

```
FMDatabase *cardDatabase // initialized elsewhere
NSString *cleanChar; // this is the sanitized query string 
NSString *cardQueryString;
int cardID;

switch ([self studyLanguage])
{
    case CSStudyLanguageMandarinTraditional:
        cardQueryString = @"SELECT rowid, * FROM trad_char WHERE search = ";
        break;

// [...other cases...]

}

cardQueryString = [cardQueryString stringByAppendingString:cleanChar];

[cardDatabase open];
FMResultSet* cardSet = [cardDatabase executeQuery:cardQueryString];

BOOL foundCard = NO;

while ([cardSet next])
{ 
    foundCard = YES;
    cardID = [cardSet intForColumn:@"rowid"];
}

[cardDatabase close]; 
```

此代码给出了数据库错误：

```
DB Error 1: no such column: 意 
```

其中“意”是我在 cleanChar 中传递的字符序列，它显然被视为列而不是某种值。但是...如果我在查询步骤中添加搜索字符，如下所示：

```
cardQueryString = @"SELECT rowid, * FROM trad_char WHERE search = ?";
FMResultSet* cardSet = [cardDatabase executeQuery:cardQueryString, cleanChar]; 
```

一切正常。

所以我实际上已经解决了这个问题......但我想知道为什么，因为它会影响我想通过多个连接进行一些更复杂的查询的方式，在那里插入会更加困难最后的变量。

那么：这是 FMDatabase 中的错误吗？我只是不明白如何使用 FMDatabase 吗？还是代码有其他问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T02:42:24.507

您的查询失败，因为您没有将搜索字符串包含在单引号中（用于指定文字）。所以你需要替换这一行

```
cardQueryString = [cardQueryString stringByAppendingString:cleanChar]; 
```

有了这个：

```
cardQueryString = [NSString stringWithFormat:@"%@'%@'", cardQueryString cleanChar]; 
```

但是，这是一种不好的做法，通过使用 NSString 方法组合查询字符串和查询参数来组合查询。有几个原因是有问题的，例如参数是否包含保留字符或单词，或者转义序列会使您面临 SQL 注入问题。

相反，您应该通过 SQLite 的绑定机制提供参数，这些机制很好地包含在 FMDB 方法中。因此，您的“解决方法”实际上是最好的方法：

```
cardQueryString = @"SELECT rowid, * FROM trad_char WHERE search = ?";
FMResultSet* cardSet = [cardDatabase executeQuery:cardQueryString, cleanChar]; 
```

或在数组中发送一个或多个参数：

```
cardQueryString = @"SELECT rowid, * FROM trad_char WHERE search = ?";
FMResultSet* cardSet = [cardDatabase executeQuery:cardQueryString arguments:@[cleanChar]]; 
```

Tom
BareFeetWare

# wordpress - 如何使 WP 管理菜单响应并像 ubuntu 菜单一样，带有顶部水平菜单/快速链接？

> ID：13766079
> 
> 赞同：2
> 
> 时间：2012-12-07T15:30:41.037
> 
> 标签：wordpress, user-interface, responsive-design, dashboard, user-friendly

目标是使 WP 管理菜单看起来像：

[![1](../Images/360bd70dd03dd4b4fad65f17c5dbc40b.png)](https://i.stack.imgur.com/bUMO1.png)

顶部导航具有每个人都可以与图片相关的快速链接。

[![2](../Images/8676939877d3a6d5574670b4f62d0edb.png)](https://i.stack.imgur.com/5vNKj.png)
[（来源：[thedesignwork.com](http://cdn.thedesignwork.com/wp-content/uploads/2012/11/admin-panel-horizontal-menu.png)）]

如果通过平板电脑访问，则可轻松点击。

[![3](../Images/457c69b8f2bdf3f7346073fd174e84d8.png)](https://i.stack.imgur.com/V1f1g.png)

通知以彩色数字提供。

[![4](../Images/2f9045206663e706de998f76e5bdb2d5.png)](https://i.stack.imgur.com/QPFFB.png)
[（来源：[thedesignwork.com](http://cdn.thedesignwork.com/wp-content/uploads/2012/11/admin-popup-design.png)）]

包括自定义弹出显示。

开始的地方不是普通的分析小部件和概述，而是一个类似应用程序的地方，可以提供管理菜单所具有的所有额外“应用程序”。它必须是可定制的，用户可以决定是访问普通仪表板还是此菜单：

[![5](../Images/8bd2af21c56c28104c2f617a57cc700f.png)](https://i.stack.imgur.com/TB3FS.png)
[（来源：[alexsantidote.com](http://alexsantidote.com/wordpress/wp-content/uploads/2009/05/admin_menu.png)）]

我遇到的所有插件都只更改了 WP 徽标、管理悬停栏的颜色和一些基本的 css 内容。有人可以指出我正确的方向吗？我是 wordpress 的新手，希望这是可能的..

下一步将把它变成一个网络激活的插件（我会再问一次......）。

> [http://www.thedesignwork.com/admin-panel-psd-template/](http://www.thedesignwork.com/admin-panel-psd-template/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T20:08:20.700

一个很好的起点是 WordPress Codex 关于[创建管理主题](http://codex.wordpress.org/Creating_Admin_Themes)的页面。不过，这不会是一项微不足道的任务。只是警告你。

# mongodb - 如何有条件地在 mongo 中插入文档？

> ID：13766084
> 
> 赞同：15
> 
> 时间：2012-12-07T15:30:51.693
> 
> 标签：mongodb, pymongo

我有一个文件

```
{ key : 'key1', value : 'value1', update_time : 100 } 
```

我只想用最近（更大）的更新时间来改变。我现在正在做的是：

```
def update_key1(new_value, new_time):
    record = find_one( { key : 'key1' } )
    if not record or record['update_time'] < new_time:
        update( { key : 'key1', value : new_value, update_time : new_time }, upsert=True) 
```

显然这是到数据库的额外往返，但更重要的是文档上没有锁定，并发调用可能导致数据库中剩余的 new_time 值较低。有没有办法仅在条件为真时执行 upsert？

编辑：只是为了澄清，目的不是为每个键创建多个文档，然后对查找进行排序。虽然这可以解决我的问题，但这些值会发生很大变化并且会浪费很多空间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-06T23:01:20.463

由于无法以原子方式完成整个事情，有两种现有条件需要您进行更改，您可以以原子方式处理每一种情况：

*   不存在密钥的记录
*   密钥的记录存在且其`update_time`早于`new_time`

更新密钥的现有记录：

```
def update_if_stale(key, new_value, new_time):
    collection.update({'key': key,
                       'update_time': {'$lt': new_time}
                       },
                      {'$set': {'value': new_value,
                                'update_time': new_time
                                }
                       }
                      ) 
```

如果之前不存在 key 的记录，则插入：

```
def insert_if_missing(key, new_value, new_time):
    collection.update({'key': key},
                      {'$setOnInsert': {'value': new_value,
                                        'update_time': new_time
                                        }
                       },
                      upsert=True
                      ) 
```

（`$setOnInsert`在 MongoDB 2.4 中添加）

您也许可以将这些放在一起以获得您需要的东西，例如：

```
def update_key(key, new_value, new_time):
    insert_if_missing(key, new_value, new_time)        
    update_if_stale(key, new_value, new_time) 
```

但是，根据系统中可能的删除/插入时间尺度，您可能需要多次调用（更新/插入/更新）或其他恶作剧。

另外：如果您希望将缺少该`update_time`字段的记录视为过时记录进行更新，请更改`{'$lt': new_time}}`为`{'$not': {'$gte': new_time}}`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-10-15T16:57:02.930

如果您在 , 上添加[唯一约束](https://docs.mongodb.com/manual/core/index-unique/)`key`，则`updateOne`使用`update_time`过滤器`upsert=True`并将

1.  插入缺失的记录
2.  更新陈旧的记录
3.  尝试使用 stale input 更新时抛出错误（因为更新将不匹配过滤条件，并且插入会因约束而失败）

```
collection.updateOne({'key': key,
                      'update_time': {'$lt': new_time}
                      },
                     {'$set': {'value': new_value,
                               'update_time': new_time
                               }
                      },
                     upsert=True
                     ) 
```

您可以捕获错误并检查`code: 11000`（违反唯一约束）以专门处理那些尝试更新到过去状态的情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T19:50:20.787

如果 WPCoder 对 upsert=True 的响应不是您想要的，那么您可能需要 $setOnInsert，它尚未实现：[https](https://jira.mongodb.org/browse/SERVER-340) ://jira.mongodb.org/browse/SERVER-340 。它应该在 2.4.0 中实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T15:34:31.947

似乎您正在寻找[findAndModify](http://docs.mongodb.org/manual/reference/command/findAndModify/)。对不起，我不熟悉 python，所以我不能给你一个代码片段，但命令应该很简单。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-07T19:13:59.037

您可以进行[有条件](http://docs.mongodb.org/manual/reference/operators/)的更新：

```
db.MyObjects.update( { key : "key1", value: { $lt : aValue }},
                    { $set : { value : aValue }}); 
```

# html - 将标题元素与图像对齐

> ID：13766086
> 
> 赞同：0
> 
> 时间：2012-12-07T15:30:55.890
> 
> 标签：html, css, alignment

我有一个小菜单面板，需要包含在我的页面中，如下图所示：

![菜单面板](../Images/0210185be5e96b95eb057c847f292677.png)

[到目前为止，我在jsFiddle](http://jsfiddle.net/jezzipin/wRkdL/24/)中有代码，我知道有些图像不正确，但问题是我无法让标题整齐地对齐到图像的右侧，如图所示。

```
Any clues? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T15:50:48.390

更改了 2 个属性：

```
ul.block-with-icons span {
    display: block;
    font-size: 11px;
    line-height: 1.2em;
    position: relative;
    top: 12px;
}

h5 {
    font-size: 16px;
    position: absolute;
    left: 98px;
    top: 30px;
} 
```

[http://jsfiddle.net/wRkdL/25/](http://jsfiddle.net/wRkdL/25/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T15:39:47.577

如果您使用 HTML5 进行开发，我认为最好的选择是像这样`<h5>`在`<a>`标签内移动：

```
<li class="b1">
<a href="#">
<h5>Our background</h5>
<span>A little background info on who we are...</span>
</a>
</li> 
```

在 HTML4 中，不允许在锚点内插入块元素。

# python - 条目实例没有属性“__float__”

> ID：13766093
> 
> 赞同：2
> 
> 时间：2012-12-07T15:31:13.907
> 
> 标签：python

我正在编写一个在 python 中触发佳能的模拟，我得到了错误：

```
Traceback (most recent call last):
  File "C:\Users\Casper\Desktop\Skole\Dropbox\Skråkast\det_skraa_kast.py", line 47, in <module>
    float(speed)
AttributeError: Entry instance has no attribute '__float__' 
```

我的代码（对不起丹麦人的名字:-)：

```
#==LabelFrame==#

labelframe = LabelFrame(master, text="Parametre for affyring", bd = 3, font=("Aeria", "8", "bold"))
labelframe.pack(side = BOTTOM, expand="yes", fill="both")

#--Indtastning af fart--#

speedlabel = Label(labelframe, text="Indtast farten af kuglen", font=("Aeria", "8", "bold"))
speedlabel.pack(side = TOP)
speed = Entry(labelframe, bd = 3)
speed.pack(side = TOP)
float(speed)

#--Indtasning af vinkel--#

anglelabel = Label(labelframe, text="Indtast vinklen af kanonen", font=("Aeria", "8", "bold"))
anglelabel.pack(side = TOP)
angle = Entry(labelframe, bd = 3)
angle.pack()
float(angle)

... code creating a coordinate system ...

#==Update knap==#

def update(event=None):

        speedentry = speed.get()
        angleentry = angle.get() 
```

真的希望你能帮助我:-)

最好的问候，卡斯帕

ps 可能值得注意的是我正在运行 2.7.3（我的老师要求）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T15:33:59.073

该`Entry`对象不能 centvertible 到`float`，但它的值可能是。（我猜你正在使用 Tkinter。）试试这个：

```
float(speed.get())

#...

float(angle.get()) 
```

# c# - Server.MapPath 给出 UNC 错误

> ID：13766094
> 
> 赞同：1
> 
> 时间：2012-12-07T15:31:20.600
> 
> 标签：c#, unc, server.mappath, mappath

这是我的服务器目录（权限很好）：

```
string ServerPath = ("\\\\servername\\Public\\Intranet2007Docs"); 
```

我在这里访问它：

```
DirectoryInfo directory = new DirectoryInfo(Server.MapPath(ServerPath)); 
```

这是错误：

![在此处输入图像描述](../Images/df6645e3987d51a71925836300e9f491.png)

任何帮助都会很棒。我不明白为什么它不会映射到 UNC 的路径。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T15:32:51.823

您只能`MapPath`在 Web 应用程序内部的路径上使用。Web 应用程序之外的任何路径都没有对应的 URL。

此外，该`DirectoyInfo`方法对 URL 没有任何用处，因此您根本不应该使用`MapPath`：

```
DirectoryInfo directory = new DirectoryInfo(ServerPath); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T15:34:23.583

尝试不使用 server.MapPath：

```
DirectoryInfo directory = new DirectoryInfo("\\\\servername\\Public\\Intranet2007Docs"); 
```

# c# - 我应该在套接字接收和另一个套接字接收之间使用 Thread.Sleep 吗？

> ID：13766095
> 
> 赞同：1
> 
> 时间：2012-12-07T15:31:35.000
> 
> 标签：c#, sockets, thread-sleep

我有一个循环，我必须`N`使用套接字接收数据字节

```
int bytesRead = 0;
int offset = 0;

do
{
    var buffer = new byte[N - offset];
    bytesRead = socket.Receive(buffer, 0, buffer.Length, SocketFlags.None);
    Buffer.BlockCopy(buffer, 0, packet.Buffer, offset, bytesRead);
    offset += bytesRead;

    // Thread.Sleep(How much have I to sleep?);
}
while (offset < N); 
```

`packet.Buffer`是我存储所有数据的地方。

我应该`Thread.Sleep`在套接字接收和另一个套接字接收之间使用来等待足够的数据到达吗？如果是，多少毫秒？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T15:33:40.917

无需休眠 -`socket.Receive`调用将阻塞，直到数据可用。

从[相关的 MSDN 页面](http://msdn.microsoft.com/en-us/library/w3xtz6a5.aspx)

> ...如果没有数据可供读取，则 Receive 方法将阻塞，直到数据可用...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T22:17:09.723

当然不。这实际上是在浪费时间。接收将阻塞，直到数据或 EOS 到达，它会阻塞正确的时间长度。添加睡眠是没有意义的。

# jquery-ui - 淘汰视图实例化 JQuery Datepicker 控件 onSelect 在 JS 完成执行之前不更新 DOM

> ID：13766098
> 
> 赞同：2
> 
> 时间：2012-12-07T15:31:47.683
> 
> 标签：jquery-ui, dom, knockout.js, datepicker

我有一个完全使用 Knockout 创建的页面。在其中一个模板中，单击一个链接将显示一个 JQuery Datepicker 控件以选择一个日期。选择日期后，将使用所选日期执行功能，并且 Datepicker 关闭。这么多工作就好了。

从有人选择日期到 Datepicker 关闭可能需要几秒钟的时间。这是由于一个名为 (LoadAppointmentTimeSlots) 的函数需要同步运行并且可能需要一段时间才能完成它的工作。为了解决这个问题，我希望出现一个 DIV，向用户提供系统正在运行的反馈（“#loading”）。

问题是 DIV 直到 LoadAppointmentTimeSlots 函数执行后才会出现（此时 DIV 再次被隐藏）。我已经以多种方式尝试了 setTimeout，但没有任何效果。

以下是“违规”代码：

```
var SchedulingViewModel = function () {
  var self = this;
  ...
  self.Date_OnClick = function () {
    var selectedDate;
    $("#calendarPopup").append('<div  id="datepicker" />');
    $("#datepicker").datepicker({
      dateformat: 'mm-dd-yy',
      changeMonth: true,
      changeYear: true,
      setDate: new Date(),
      minDate: 0,
      maxDate: self.SelectedRFVInterval() - 1,
      onSelect: function (datetext, inst) {
        selectedDate = datetext;
        $("#loading").show();
        self.LoadAppointmentTimeSlots(datetext);  // function within view model that                 uses $AJAX in sync mode to return time slot data
        $("#loading").hide();
        $('#calendarPopup').dialog('close');
      }
    });
  };
  ...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T01:58:27.400

您遇到的困难是因为 show() 是异步执行的，并且由于 javascript 在单个线程中执行，这意味着它们必须等到所有同步代码（例如 LoadAppointmentTimeSlots）完成。

要获得您想要的行为，请将 show() 调用之后的所有内容放入 show 命令的回调中。这样 LoadAppointmentTimeSlots 在 show() 调用完成之前不会执行。方法如下：

```
// ... other code
$("#loading").show(function() {
    self.LoadAppointmentTimeSlots(datetext);  
    $("#loading").hide();
    $('#calendarPopup').dialog('close');
}); 
```

但是，最好将 LoadAppointmentTimeSlots 中的 ajax 调用更改为异步调用，并将 hide() 和 dialog('close') 调用移至 ajax 调用的回调。这允许 javascript 在您等待 LoadAppointmentTimeSlots 完成时继续执行其他操作。这可能看起来更像这样：

```
// ... other code
$("#loading").show()
self.LoadAppointmentTimeSlots(datetext, function() {
    $("#loading").hide();
    $('#calendarPopup').dialog('close');
});
// ... more code

function LoadAppointmentTimeSlots(datetext, alwaysCallback) {
    // Prepare request details
    $.ajax( "/myendpoint?param=foo" )
      .done(function(data) { alert("success"); }) // do something with data 
      .fail(function() { alert("error"); })
      .always(alwaysCallback); // called on both success and failure of ajax call
} 
```

# c# - 连接到示例 DBus 守护程序的 C# 程序总是得到“访问被拒绝：DBus.BusObject”

> ID：13766100
> 
> 赞同：4
> 
> 时间：2012-12-07T15:31:50.693
> 
> 标签：c#, dbus

对于我们当前的项目，我们使用 DBus (1.6.n)。它主要是在共享内存模式下从 C++ 访问的，而且效果非常好。

我现在正试图从 C# 程序访问相同的 DBus。

为了首先尝试一下，我下载了我能找到的最新版本的 dbus-sharp，并启动了下载中包含的守护进程，看看我是否可以从我的测试 C# 应用程序连接到它。

每当我建立连接时，守护程序控制台都会显示我正在与它通信，但是一旦我尝试访问连接上的任何方法，我就会收到错误消息；

'访问被拒绝：DBus.BusObject'

这是我尝试过的代码；

```
 DBus.Bus dBus = null;
        try
        {
            //input address comes from the UI and ends up as "tcp:host=localhost,port=12345";
            //dBus = new Bus(InputAddress.Text + inputAddressExtension.Text);
            //string s = dBus.GetId();
            //dBus.Close();

            //DBus.Bus bus = DBus.Bus.System;
            //DBus.Bus bus = Bus.Open(InputAddress.Text + inputAddressExtension.Text);
            //DBus.Bus bus = DBus.Bus.Session;
            //DBus.Bus bus = DBus.Bus.Starter;

            var conn = Connection.Open(InputAddress.Text + inputAddressExtension.Text);
            var bus = conn.GetObject<Introspectable>(@"org.freedesktop.DBus.Introspectable", new ObjectPath("/org/freedesktop/DBus/Introspectable"));

            bus.Introspect();

        }
        finally
        {
            if(dBus != null)
                dBus.Close();
        } 
```

注释代码最终也会产生相同的错误。

我已经逐步使用调试器，它总是在 TypeImplementer.cs 中得到以下代码；

公共类型GetImplementation（类型declType）{类型retT；

```
 lock (getImplLock)
            if (map.TryGetValue (declType, out retT))
                return retT;

        string proxyName = declType.FullName + "Proxy";

        Type parentType;

        if (declType.IsInterface)
            parentType = typeof (BusObject);
        else
            parentType = declType;

        TypeBuilder typeB = modB.DefineType (proxyName, TypeAttributes.Class | TypeAttributes.Public, parentType);

        if (declType.IsInterface)
            Implement (typeB, declType);

        foreach (Type iface in declType.GetInterfaces ())
            Implement (typeB, iface);

        retT = typeB.CreateType (); <======== Fails here ==========

        lock (getImplLock)
            map[declType] = retT;

        return retT;
    } 
```

我没有找到任何关于从 C# 访问 DBus 的有用示例或文档，而且最近似乎很少有关于此的条目，所以也许没有其他人在尝试这个。

我在与测试程序相同的文件夹中运行守护程序。当我在 Windows 上运行时，守护程序正在侦听 tcp 设置；

字符串 addr = "tcp:host=localhost,port=12345";

由于这是下载中包含的示例，我认为让它运行起来非常简单，但可惜还没有运气。

有没有其他人来过这里并知道下一个难题？

任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T10:13:28.183

在没有收到任何评论或回复后，我将使用我在询问后找到的信息来回答这个问题。

DBus 似乎没有有用的 C# 接口。（有用，我的意思是有效的！）我能找到的唯一信息或示例不是最新的，并且似乎没有花费任何精力来提供工作界面。

我决定使用编写为 Windows 服务的 C++ 实现与 DBus 进行交互，我的 C# 程序将通过该服务向 DBus 发送消息。这似乎工作正常，因此满足了业务需求。

我很失望不能让 C# 到 DBus 工作，但是有很多服务总线实现可以在 Windows 上工作，所以将来我会考虑实现这些而不是 DBus。

如果有人确实提出了一个可行的、记录在案的解决方案来从 Windows 上的 C# 访问 DBus，我仍然有兴趣看到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-04T06:29:35.600

当我创建新的测试项目并将 dbus cs 源文件添加到它的主项目程序集中时，我遇到了同样的错误。那是在动态创建的程序集中动态创建 IBusProxy 类型的时候。

```
asmB = AppDomain.CurrentDomain.DefineDynamicAssembly (new AssemblyName ("NDesk.DBus.Proxies"), canSave ? AssemblyBuilderAccess.RunAndSave : AssemblyBuilderAccess.Run);
modB = asmB.DefineDynamicModule ("NDesk.DBus.Proxies");
......
retT = typeB.CreateType (); 
```

我认为这是因为当前运行的程序集对创建的程序集不友好。就在我添加到项目编译的 NDesk.DBus.dll 时，这个错误消失了。

# data-binding - 每个带有 sqldatasource 的嵌套中继器

> ID：13766102
> 
> 赞同：1
> 
> 时间：2012-12-07T15:31:57.000
> 
> 标签：data-binding, nested, repeater, sqldatasource

```
<asp:HiddenField ID="hfOrderState" Value="1" runat="server" />
    <asp:SqlDataSource ID="ReadyOrders" runat="server" EnableCaching="true" 
                       DataSourceMode="DataSet" CacheDuration="20"
         ConnectionString="<%$ ConnectionStrings:XactCoffeeConnectionString %>" 
         SelectCommand="SELECT [Orders].* ,[Tables].table_name 
                        FROM [Orders] , [Tables]
                        WHERE order_state = @order_state
                        AND [Orders].table_id = [Tables].table_id">
         <SelectParameters>
            <asp:ControlParameter ControlID="hfOrderState" Name="order_state"
                                  PropertyName="Value" Type="Int32" />
         </SelectParameters>
    </asp:SqlDataSource>

<div id="xx" runat="server" class="sidePanel" 
    style="position: fixed; width: 57px; right: 0px; top: 15px; height: 100%; background-color: #00FF00; background-image: none;">
<p>
 جاهز     
 </p>

    <asp:Repeater ID="Repeater1" DataSourceID="ReadyOrders" runat="server">
    <ItemTemplate>
        <asp:HiddenField ID="OrderId" Value='<%# Eval("order_id") %>' runat="server"></asp:HiddenField>
        <asp:SqlDataSource ID="sqlOrderItems" runat="server"  
        EnableCaching="true" DataSourceMode="DataSet" CacheDuration="20" 
    ConnectionString="<%$ ConnectionStrings:XactCoffeeConnectionString %>" 
    SelectCommand="GetOrderItems" SelectCommandType="StoredProcedure">
    <SelectParameters>
        <asp:ControlParameter ControlID="OrderId" Name="order_id" 
            PropertyName="Value" Type="Int64" />
    </SelectParameters>
</asp:SqlDataSource>        
<br />

<table id="tbOrders"  visible="false">
<thead>
    <asp:HiddenField ID="hfOrderId" Value ='<%# Eval("order_id") %>'  runat="server" />
<asp:Button ID="Button1" CssClass ="OrderButton" OnClick="b_click" runat="server" Text='<%# Eval("table_name") %>' />
</thead>
<asp:Repeater ID="Repeater1" DataSourceID="sqlOrderItems" runat="server" >

    <ItemTemplate>
    <tr><td>
    <%# Eval("item_name") %>
    </td></tr>

    </ItemTemplate>
    </asp:Repeater>
    </table>

        <br />
  </ItemTemplate>
  </asp:Repeater> 
```

如何访问`sqlDataSource`被调用`sqlOrderItems`的子对象以便在 Button1 单击事件中重新绑定它？`sqlDataSource`我可以成功访问被调用的父级`ReadyOrders`，并且可以在后面的代码中调用`ReadyOrders.DataBind();`

另外我想说的是，被`sqlDataSource`调用的子对象`sqlOrderItems`取决于`sqlDataSource`被调用的父`ReadyOrders`对象，但显然在绑定父对象时，知道数据库中的数据已更改，页面中没有任何变化

# user-interface - Google Scripts Deploy as web app-如何在点击事件上显示不同的 gui 表单

> ID：13766108
> 
> 赞同：0
> 
> 时间：2012-12-07T15:32:22.580
> 
> 标签：user-interface, google-apps-script

我构建了一个基本上有两个 gui 屏幕的 google gui web 应用程序。第一个 gui 屏幕有一些文本输入字段，当用户单击“提交”时，它应该拉出第二个 gui 屏幕，显示一些结果。

我的第二个 gui 开始与第一个相同：

```
function displayForm2(hwEntered){
var app = UiApp.createApplication().setHeight('800').setWidth('600');;
var panel = app.createVerticalPanel();
...code and stuff...
app.add(panel);
return app;
} 
```

我如何使它作为一个网络应用程序工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T21:40:36.873

您应该在同一个 Ui 实例中构建您的 2 GUI，但在单个垂直面板内的 2 个单独面板上。然后你只需要`setVisible(true)`一个面板，而另一个面板`setVisible(false)`......你可以使用客户端处理程序或服务器处理程序来做到这一点，这是一个选择问题，但如果按钮没有其他功能，客户端处理程序会更快更简单。“父面板”（垂直或水平）将确保每个面板都显示在显示器的同一位置。

你应该很容易在这个论坛上找到一些明确的例子

# selenium - 当我在 parralel 中运行测试时，Selenium webdriver“与远程浏览器通信时出错。它可能已经死了”

> ID：13766110
> 
> 赞同：1
> 
> 时间：2012-12-07T15:32:44.567
> 
> 标签：selenium, selenium-webdriver

我在客户端工作。我创建了大约 150 个测试脚本。但是在执行过程中，在执行了一些脚本之后，Selenium 会抛出以下错误并关闭浏览器。时间不能解决这个错误。当我并行执行所有测试脚本时，它就会出现。

该错误显示在 Google Chrome 和 Firefox 浏览器上。我正在使用*selenium-server-standalone-2.26.0.jar*文件并在 FF 13.0.1 版本上执行。我也尝试过使用 FF 版本 14，但我得到了同样的错误。我的客户对此错误不满意，因为我们没有解决此问题的方法。

```
 **Error message:**
Caused by: org.openqa.selenium.remote.ErrorHandler$UnknownServerException: Error communicating with the remote browser. It may have died 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T16:12:56.200

我认为当您处理弹出窗口时会发生这种情况。

**例子**

*   在主窗口上单击某些内容会导致打开一个新的弹出窗口
*   将控件切换到弹出窗口并在弹出窗口中进行操作
*   大多数案例弹出窗口将在其中执行一些操作后自动关闭。（例如：现在大部分网站都使用 facebook 选项登录，输入用户凭据后无需关闭该弹出窗口，提交正确凭据后它将自动关闭）
*   在此之后，您需要再次将控件切换到主窗口，否则它将引发上述异常。

我认为您在没有控制窗口的情况下进行了一些操作。

# java - 在 struts-config.xml 中定位类型

> ID：13766114
> 
> 赞同：1
> 
> 时间：2012-12-07T15:33:03.050
> 
> 标签：java, struts

这是我的`struts-config.xml`

```
<action input="/jsp/admin/DocumentDetail.jsp" name="documentDetailForm" parameter="pageAction" path="/documentDetails" scope="request" type="com.company.product.web.admin.DocumentDetailsAction" validate="false">
      <set-property property="moduleCode" value="documentsAdmin"/>
      <forward name="saveDocDetails" path="/documentSave.do?pageAction=save"/>
      <forward name="openAddTagPage" path="/jsp/admin/DocumentTagList.jsp"/>
      <forward name="cancel" path="/documentList.do?pageAction=search"/>
      <forward name="success" path="/documentList.do?pageAction=search"/>
    </action> 
```

因为这个帮助生成了`DocumentDetails.jsp`，所以我有兴趣编辑帮助创建 jsp 的原始文件。我的猜测是 java 文件是，`com.company.product.web.admin.DocumentDetailsAction`但我无法在 Eclipse 的工作区中找到它。

`DocumentDetails.jsp`是_

```
<%@ taglib uri="/WEB-INF/struts-html.tld" prefix="html" %>
<%@ taglib uri="/WEB-INF/struts-bean.tld" prefix="bean" %>

<tr>
<td width="25%" class="label">&nbsp;&nbsp;<bean:message key="documentReqSign" /></td>
        <td>
            <html:checkbox property="requiredSign" /> 
                </td>
</tr> 
```

顺便说一句，这是我第一次使用 Struts，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T15:37:43.323

Ctrl + Shift + R -> DocumentDetailsAction 或 Ctrl + Shift + O -> com.company.product.web.admin.DocumentDetailsAction 不起作用？？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T15:41:53.067

寻找：`company/product/web/admin/documentDetailsAction.java` 在你的项目中

因此，正如您所说的有问题的文件是正确的操作，通常在 struts 中，所有操作类都分组在一个目录下，您可以尝试使用@pradeepsimha 快捷方式，或者您可以`ctrl+h`搜索工作区`DocumentDetails`然后选择有问题的文件。

# c# - 具有支持属性的 setter 中的 StackOverflowException

> ID：13766115
> 
> 赞同：6
> 
> 时间：2012-12-07T15:33:07.120
> 
> 标签：c#, asp.net, setter, stack-overflow

**更新：**我已经解决了我遇到的问题，但我不知道为什么该错误会生成它所做的堆栈跟踪。堆栈跟踪将我引向完全错误的方向。如果有人能解释这里发生了什么，我将不胜感激（并将您的答案标记为已接受）。请注意，我的原始帖子已被删除。

我有以下课程。它的不相关部分已被删除：

```
class ClassName {
    private string[] _accountTypes = new string[2] {"ECOM", "MOTO"};

    private Dictionary<string, string> _settleDueDateDictionary = new Dictionary<string, string>() {
        {"0", "Process immediately."},
        {"1", "Wait 1 day"},
        {"2", "Wait 2 days"},
        {"3", "Wait 3 days"},
        {"4", "Wait 4 days"},
        {"5", "Wait 5 days"},
        {"6", "Wait 6 days"},
        {"7", "Wait 7 days"},
    };

    private string _settleDueDate;

    private string _accountTypeDescription;

    public string SettleDueDate
    {
        get
        {
            DateTime today = DateTime.Today;
            long settleDueDate = Convert.ToInt64(_settleDueDate);
            return today.AddDays(settleDueDate).ToString("MM/dd/yyyy");
        }
        set
        {   
            if (!_settleDueDateDictionary.ContainsKey(value)) {
                // TODO - handle
            }
            _settleDueDate = value;
        }
    }

    public string AccountTypeDescription
    {
        get {
            //return AccountTypeDescription; // This would cause infinite recursion (not referring to backing property).
            return _accountTypeDescription; // This fixed the StackOverflowException I was faxed with
        }
        set
        {
            if (!_accountTypes.Contains(value))
            {
                // TODO - handle
            }
            _accountTypeDescription = value;
        }
    }
} 
```

我也有这个类，它采用上面类的一个实例，并使用实例中的值创建了一个 XML 字符串：

```
class SecondClass
{
    private ClassName classnameInstance;

    public SecondClass(ClassName instance)
    {
        classnameInstance = instance;
    }

    public string PrepareRequest(XMLWriter writer)
    {
        writer.WriteElementString("accounttypedescription", classnameInstance.AccountTypeDescription);
    }
} 
```

这是生成堆栈跟踪的客户端代码：

```
STPPData STPP = new STPPData();

STPP.SiteReference = _secureTradingWebServicesPaymentSettings.SiteReference;
STPP.Alias = _secureTradingWebServicesPaymentSettings.Alias;

STPP.SettleDueDate = Convert.ToString(_secureTradingWebServicesPaymentSettings.SettleDueDate);
STPP.SettleStatus = _secureTradingWebServicesPaymentSettings.SettleStatus;
STPPXml STPPXml = new STPPXml(STPP);

XmlWriterSettings settings = new XmlWriterSettings();
settings.Async = false;
var builder = new StringBuilder();

using (XmlWriter writer = XmlWriter.Create(builder, settings))
{
    string xmlRequest = STPPXml.PrepareRequest(writer);
} 
```

最后，这是堆栈跟踪：

```
mscorlib.dll!string.GetHashCode()
mscorlib.dll!System.Collections.Generic.GenericEqualityComparer<System.__Canon>.GetHashCode(SYstem.__Canon obj)
mscorlib.dll!System.Collections.Generic.Dictionary<string,string>.FindEntry(string key)
mscorlib.dll!System.Collections.Generic.Dictionary<System.__Canon,System.__Canon>.ContainsKey(System.__Canon key)
ClassName.SettleDueDate.set(string value)
ClassName.SettleDueDate.set(string value)
ClassName.SettleDueDate.set(string value)
// Infinite recursion of this call 
```

这个堆栈跟踪让我相信我错误地为 STPP.SettleDueDate 实现了 getter/setter。我检查了它们并且支持变量等是正确的（我理解 getter/setter 中循环的常见原因）。进一步调试表明，调用此行时实际上生成了堆栈跟踪`PrepareRequest()`：

```
writer.WriteElementString("accounttypedescription", STPPData.AccountTypeDescription); 
```

我发现我错误地实现了 STPPData.AccountTypeDescription 的 getter，因为我创建了一个在 setter 中使用的支持属性，但我没有在 getter 中使用支持属性：

```
public string AccountTypeDescription
{
    get {
        //return AccountTypeDescription; // This would cause infinite recursion.
        return _accountTypeDescription; // This fixed the StackOverflowException
    }
    // setter omitted for clarity (it is in the examples above)
} 
```

我的问题是：

**当错误实际上在 AccountTypeDescription.get() 中时，为什么 StackOverflowException 的堆栈跟踪将我指向 SettleDueDate.set()？**

注意：我是 C# 新手，来自 LAMP 背景。我已经稍微简化了代码，但我认为我没有删除任何重要的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T18:49:10.733

以下是一些可以缩小问题范围的简单调试步骤

*   使用 SettleDueDate 属性打开类
*   右键单击 SettleDueDate 的属性名称
*   单击菜单项“查找所有参考文献”
*   SettleDueDate 设置的每个地方，即 'SettleDueDate = "Something or other"' 添加断点
*   运行应用程序并在断点被命中时继续运行，直到连续多次命中一个断点
*   当您找到违规点并且代码位于断点上而不是继续使用 Step Out 命令和 Step over 命令来跟踪您的方式备份堆栈以找出递归分配的位置时

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T20:39:25.893

这段代码非常零碎，我不确定我是否完全理解所有的联系。我假设 ClassName == STPPData 和 SecondClass == STPPXml？尽管如此，我尝试使用 VS2010 和 .NET 4 重现此错误。我无法做到 - 堆栈跟踪仅在 AccountTypeDescription.set() 中显示无限递归。一定有什么东西不见了。

首先，堆栈跟踪中的这些行非常有趣：

```
mscorlib.dll!string.GetHashCode()
mscorlib.dll!System.Collections.Generic.GenericEqualityComparer<System.__Canon>.GetHashCode(SYstem.__Canon obj)
mscorlib.dll!System.Collections.Generic.Dictionary<string,string>.FindEntry(string key)
mscorlib.dll!System.Collections.Generic.Dictionary<System.__Canon,System.__Canon>.ContainsKey(System.__Canon key) 
```

它们似乎明确显示了 SettleDueDate.set() 的内部结构，而不仅仅是对它的无限调用。存在字典和哈希查找。你肯定有一个错误在那里的*某个地方*。但是我有一种预感，您的源代码不包含错误。参考@Bryan 的回答，您是否在 SettleDueDate 设置器中设置了断点*，*而不是在代码中*调用*它的位置？如果您使用的是 Visual Studio，您还可以使用[此功能](http://msdn.microsoft.com/en-us/library/d14azbfh.aspx)打破异常。

我看到您正在使用 Web 服务做一些事情，这立即让我想到了代理类。它们看起来很像您编写的代码，但它不是您编写的代码。他们可能会过时。你有多确定这个异常是由你编写和编译的代码引发的？

其次，Web 服务也让我想到了序列化，这个过程通常会在您不知情的情况下调用属性 getter 和 setter。过去，我在 WCF 尝试序列化 IEnumerables 时遇到过问题，并且即使*我的*代码很好，也失败了。

顺便说一句，在我的系统上，这条线没有编译：

```
if (!_accountTypes.Contains(value)) 
```

这让我想知道您使用的是 Mono 还是与我不同的 IDE。毕竟你是个灯人=）

我知道这不是一个真正的答案（还），但我想知道你对此有何看法？你还有什么可以分享的细节吗？

# php - PHP测试类实例是否存在于数组Instances中

> ID：13766118
> 
> 赞同：0
> 
> 时间：2012-12-07T15:33:17.730
> 
> 标签：php

我有一系列密切相关的对象。在将对象添加到集合之前，我想检查类实例以确保它正常。

通常，我希望集合中的所有对象都具有类似的 baseClass OR 接口，因此我可以使用类型提示，但在这种情况下，对象不是那样的。

我喜欢这种`instanceof`工作方式。我不想管理命名空间列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T15:33:17.730

使用新的 5.4 [] for array() 语法 - 创建一个有效类名数组：

```
private $validClasses = ['MyFirstClass','MySecondClass','MyThirdClass']; 
```

接下来，创建一个函数进行测试。

```
public function testClass($class){
    $arr = explode("\\", get_class($class) );
    if ( !in_array( array_pop($arr) , $this->validClasses  ) ){
    throw new \Exception('Invalid Class - Cannot be added to the Collection.');
     }
} 
```

# php - wordpress 不保存行之间的空格

> ID：13766121
> 
> 赞同：0
> 
> 时间：2012-12-07T15:33:22.157
> 
> 标签：php, wordpress

当我创建 post wordpress 时不保存行之间的空格：

代码：

```
 <div class="postas">
    <?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>
    <p><?php the_content(); ?></p>
    <?php endwhile; endif; ?>
    <!-- End Main Content -->
    </div> 
```

`&nbsp;`如果我按下双击 Enter 按钮，Wordpress 只会添加符号，但如果我第二次编辑此帖子，`&nbsp;`符号就会消失

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T17:24:59.620

你是在每篇文章之间说吗？？如果是，你应该使用 css，如果你添加另一个 div 更好

所以使用 css 你可以使用边距来设置边距

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T18:08:20.990

Wordpress 会对您的帖子进行一些自动格式化。当您保存帖子或在内容编辑器中在 HTML 和可视模式之间切换时，会发生自动格式化。

如果您尝试做一些被这种格式删除的事情，您可能想尝试禁用自动格式化 Wordpress 包含的内容。

你可以通过安装这个插件来做到这一点：[http ://wordpress.org/extend/plugins/ps-disable-auto-formatting/](http://wordpress.org/extend/plugins/ps-disable-auto-formatting/)

安装插件后，您可以在仪表板设置中选择启用/禁用格式化。

# android - 经过一段时间的地址研究不会产生结果。java.io.IOException：服务不可用

> ID：13766122
> 
> 赞同：1
> 
> 时间：2012-12-07T15:33:25.097
> 
> 标签：android, search, location, reverse-geocoding

我有一个大问题。

我编写了这段代码来获取与坐标相关的地址信息：

```
public static Address getAddressFromLocation(Context c, Location location){
        Address address = null;
        if(location!=null){
            final Double addrLat=location.getLatitude();
            final Double addrLng=location.getLongitude();
            final Geocoder geocoder = new Geocoder(c, Locale.getDefault());
            try {
                  List<Address> addresses = geocoder.getFromLocation(getRound(addrLat, 15), getRound(addrLng, 15), 1);
                  if (addresses.size() > 0) {
                      Address returnedAddress = addresses.get(0);
                      Locale locale = returnedAddress.getLocale();
                      address = new Address(locale);
                      address = returnedAddress;

                        if(address.getLocality()==null || address.getLocality().equals("")){
                            int line = address.getMaxAddressLineIndex()-1;
                            if(line<0)line=0;
                            address.setLocality(address.getAddressLine(line));
                        }

                  }else{
                      address=null;
                  }
            }catch (IOException e) {
                  address=null;
            }     
        }else{
            address=null;
        }
        return address;
    } 
```

多次执行搜索后，我没有得到地址，我不明白为什么。

我可以在一段时间后重新启动设备或进行搜索，但我再也找不到任何地址了。

错误是：

```
java.io.IOException: Service not Available 
```

哪个是问题？

# iphone - 防止“父”视图控制器旋转

> ID：13766123
> 
> 赞同：1
> 
> 时间：2012-12-07T15:33:29.433
> 
> 标签：iphone, rotation, landscape, portrait

我的 UIVewController 和旋转出现问题，我可以通过一些帮助来解决。

基本上，我有一个可以从纵向旋转到横向的视图。当它旋转到横向时，我向我的纵向视图呈现一个不同的视图（图表）......这是一个基于 UITableView 的输入视图。这一切都很好。

现在，我的纵向视图（并且只有我的纵向视图）还有一个“电子邮件”按钮，按下该按钮时，会创建并呈现 MFMailComposeViewController，以便用户可以通过电子邮件发送一些数据。

这工作正常，但如果用户在 MFMailComposeViewController 视图上将 iphone 旋转到横向，我的底层视图不会收到旋转通知，所以我知道将底层视图更改为图表视图。因此，当用户在仍处于横向时关闭邮件视图时，我会在横向中看到原始的“纵向”输入视图，该视图位置不正确且显示不正确。

那么，当 MFMailComposeViewController 显示时，我是否可以在原始肖像 ViewController 中获得旋转通知，以便在原始视图重新出现时进行基本更改？或者，当 MFMailComposeViewController 旋转时，我可以防止底层视图旋转吗？

希望这是有道理的，并感谢您的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T16:59:54.590

尝试`-(UIInterfaceOrientation)preferredInterfaceOrientationForPresentation`在您的父 ViewController 中实现并将其设置为 UIInterfaceOrientationPortrait。

您还可以查看 MFMailComposeViewController 正在做什么，但我认为您必须对其进行子类化并实现`-(void)didRotateFromInterfaceOrientation:`，然后通过通知或委托发送回信息……但您不需要使用 preferredInterfaceOrientationForPresentation。

希望这可以帮助！

# c# - 实现使用控制器保护方法的便捷方法？

> ID：13766125
> 
> 赞同：0
> 
> 时间：2012-12-07T15:33:36.733
> 
> 标签：c#, asp.net-mvc, oop, base-class

有没有什么方法可以实现一个方便的方法，它使用控制器的受保护方法而不使用基本控制器，[这里](https://stackoverflow.com/a/6119341/178757)建议不要这样做？例如，我想`ActionResult`根据是否`returnUrl`已传递查询字符串参数返回一个。我真正想要的是这样的扩展方法：

```
public static class ControllerExtensions {
    public static ActionResult RedirectReturnUrlOrDefaultAction(this Controller thisController, string returnUrl, string defaultAction) {
        if (!string.IsNullOrEmpty(returnUrl) && thisController.Url.IsLocalUrl(returnUrl)) {
            return thisController.Redirect(returnUrl);
        }
        else {
            return thisController.RedirectToAction(defaultAction);
        }
    }
} 
```

这样我就可以这样说：

```
return this.RedirectReturnUrlOrDefaultAction(Request.QueryString["returnUrl"], "Index"); 
```

...从一个`Controller`. 但是，当然，扩展方法不会编译，因为出于某种原因，像这样的方法`Redirect`（顺便说一下，`protected internal`为什么它们`protected internal`是？）

有没有一种不错的方法可以在不使用基本控制器的情况下做到这一点？如果不是，这可能是实际使用基本控制器的一个很好的理由，还是我的设计存在缺陷？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T15:54:33.363

关于什么：

```
public static class ControllerExtensions {
    public static ActionResult RedirectReturnUrlOrDefaultAction(this Controller controller, Func<string, ActionResult> returnUrlRedirectAction, Func<ActionResult> defaultAction) {
        string returnUrl = controller.Request.QueryString["returnUrl"];
        if (!string.IsNullOrEmpty(returnUrl) && controller.Url.IsLocalUrl(returnUrl)) {
            return returnUrlRedirectAction(returnUrl);
        }
        else {
            return defaultAction();
        }
    }
} 
```

然后可以在控制器中将其用作：

```
return this.RedirectReturnUrlOrDefaultAction(ret => Redirect(ret), () => RedirectToAction("Index")); 
```

# android - 两个按钮依次调用两个activity正常吗

> ID：13766133
> 
> 赞同：0
> 
> 时间：2012-12-07T15:34:06.607
> 
> 标签：android, button, android-activity, start-activity

我不知道如何正确表达这个问题，所以让我解释一下。我注意到在android平台上，当您在一个活动中快速按下两个按钮时（在活动有机会离开屏幕之前按下一个按钮然后另一个按钮），两个活动被一个接一个地调用。它在发生时不可见，但如果您按下后退按钮，则使用第二个按钮调用的活动离开（完成）并显示使用第一个按钮调用的活动。您必须再次返回才能返回调用活动。所以你必须按两次才能进入活动 2 的父活动。

所以我想知道这对其他人来说是否是一个问题，如果是这样，你将如何解决这个问题。或者你认为这不是什么大问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T15:37:45.720

您可以在此`finish()`之后调用`startActivity(your_intent);`您要离开的活动完成并进入下一个活动，因此您不必按两次即可到达它的父活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T15:56:58.847

我已经想出了如何解决这个问题。我有一个基本活动类，我的应用程序中的所有其他活动都继承自该类。我覆盖

onResume 与：

```
@Override
protected void onResume()
{
    super.onResume();
    setCanStartNewActivity(true);
} 
```

和 startActivityForResult ：

```
@Override
public void startActivityForResult(Intent intent, int requestCode)
{
    //Does not allow starting a new activity unless previous activity returned
    //This is a trick to stop multiple simultaneous button presses starting multiple 
    //activities simultaneously.
    if(!canStartNewActivity)
        return;
    setCanStartNewActivity(false);
    super.startActivityForResult(intent, requestCode);
} 
```

这基本上确保只有一个新的活动可以启动一个按钮按下。如果您同时松开两个按钮，则只有最早释放的按钮（即使是 10 微秒）会被触发，另一个仍然会发送意图，但在第一个触发的活动返回或应用程序死亡之前它不会触发。

# c++ - 计算 VST 的三角波表

> ID：13766137
> 
> 赞同：1
> 
> 时间：2012-12-07T15:34:19.310
> 
> 标签：c++, geometry, waveform, vst

我正在为一个项目创建一个 VST，并尝试创建一个振荡器产生锯齿波、脉冲、正弦波和三角波形式。我到处寻找，似乎找不到任何有用的东西（对我来说），主要是因为我很难理解它。

到目前为止，我...

```
 for (i=0;i<KWaveSize;i++)
 {
      sawtooth[i] = (float)(-1\. + (2\. * ((double)i / (double)kWaveSize)));
      pulse[i] = (i < wh) ? -1.f : 1.f;
      sine [i] (float)sin(twoPi * ((float)i /kWaveSize));
      triangle[i] = ....
 } 
```

我只是在努力使用它来创建正确的波形。

我试着做：

```
 triangle[i] = (float)(1 -((twoPi / KWaveSize) * i)); 
```

这是基于我所关注的书的有根据的猜测，但会产生失真的声音。

如果有人做过类似的事情可以提供帮助，或者向我指出一个新手教程，用于涵盖波表生成等的所有声音合成，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T16:53:37.963

你需要一个转换方向的波——它从 0 到 0 为正，从 0 到 0 为`kWaveSize/2`负`kWaveSize`。

```
triangle[i] = i < kWaveSize/2 ? -1.0 + 2.0 * i / (kWaveSize*0.5) : 1.0 - 2.0 * i / (kWaveSize*0.5); 
```

# lucene - 什么是 TermQuery 的过滤器等价物？

> ID：13766140
> 
> 赞同：0
> 
> 时间：2012-12-07T15:34:38.943
> 
> 标签：lucene

我正在使用 Lucene 4.0 进行一些复杂的查询，我的信息检索理论伙伴告诉我，我应该在任何可以使用过滤器而不是查询的地方，以提高性能。因此，我决定采用查询中一个特别复杂的组件并将其转换为过滤器。这相对简单，因为有 和 的`Filter`等价物，`BooleanQuery`但`NumericRangeQuery`似乎没有. 有一个, 但这似乎只过滤给定字段的存在，而不是该字段中的特定值。`TermFilter``TermQuery``FieldValueFilter`

我应该为此使用什么过滤器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T16:59:50.083

我相信[TermsFilter](http://lucene.apache.org/core/3_6_0/api/all/org/apache/lucene/search/TermsFilter.html)是您正在寻找的。

# ruby-on-rails - 值未保存在会话数组中

> ID：13766149
> 
> 赞同：0
> 
> 时间：2012-12-07T15:35:25.673
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在我的控制器操作中，我初始化了一个数组会话并插入值。这些值通过 ajax 来自客户端，因此在将这些值插入数组时不会刷新页面。但令人惊讶的是，每次它初始化一个新会话而不是插入到同一个定义的会话时。这是我的代码

控制器

```
def receive_tags
  parser = Yajl::Parser.new
  @hash = parser.parse(request.body.read)
  log=Logger.new(STDOUT)
  log.error(@hash)
  session[:tags]||=[]
  session[:tags] << @hash["tag"]
    unless session[:tags].empty?
    log.error(session[:tags] ) #this keeps printing the current value i was expecting it to print a list of values including the previous
    end
  render :nothing=>true
 end 
```

阿贾克斯

```
 var myobj={tag:"mytag"};
 $.ajax({
    url: 'ips/receive_tags',
    type: 'post',
    contentType: 'application/json; charset=UTF-8',
    accept: 'application/json',
    dataType: 'json',
    data:JSON.stringify(myobj),
    success: function(res) {
        if (res.ImportResponse !== void 0) {
            console.log('Success: ' + res);
        } else if (res.Fault !== void 0) {
            console.log('Fault: ' + res);
        }
    },
    error: function() {
        console.error('error!!!!');
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T16:33:35.037

这听起来像浏览器没有保存 cookie，这可以解释您在每次重新初始化会话时看到的行为。要确认这一点，您可以执行

```
print "Session ID: #{request.session_options[:id]}" 
```

在您的操作中，查看每个请求的会话 ID 是否更改。如果是，请检查您的浏览器隐私设置，看看它是否保存了任何 cookie。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T20:46:00.843

最后我想通了，问题是我在发送 ajax 调用之前没有为令牌设置请求标头，所以 Rails 接收没有令牌的数据，因此一直假设它是每个请求的新对象。你可以[在这里](https://stackoverflow.com/questions/5126721/rails-not-reloading-session-on-ajax-post)阅读更多.要设置请求头添加

```
 beforeSend: function(xhr) {
xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'));
 } 
```

下面是我的 ajax 函数

```
var myobj={tag:"mytag"};
$.ajax({
url: 'ips/receive_tags',
type: 'post',
contentType: 'application/json; charset=UTF-8',
accept: 'application/json',
dataType: 'json',
data:JSON.stringify(myobj),
 beforeSend: function(xhr) {
xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'));
 }
 success: function(res) {
    if (res.ImportResponse !== void 0) {
        console.log('Success: ' + res);
    } else if (res.Fault !== void 0) {
        console.log('Fault: ' + res);
    }
 },
 error: function() {
    console.error('error!!!!');
 }
}); 
```

# sql - 将用户角色和权限从一个数据库复制到另一个数据库

> ID：13766150
> 
> 赞同：2
> 
> 时间：2012-12-07T15:35:32.773
> 
> 标签：sql, sql-server, stored-procedures, sql-server-2008-r2, sql-server-2012

我的新数据库中的用户权限存在问题。我从不同的服务器复制了这个新数据库，那个旧服务器数据库有一些用户，被授予执行一些程序的权限。在我备份并恢复到新服务器后，所有权限都消失了。我运行 sp_helprotect 从我的旧服务器中找出用户和权限。有没有办法编写这些权限和角色的脚本？

我们现在正在运行 SQL Server 2012 版本。但是那个旧数据库在 SQL Server 2008 r2 中。这是造成问题的原因吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T19:09:03.507

当您将数据库恢复到新服务器时，即使存在相同的用户`master`，他们也没有相同的系统 ID，因此您必须从恢复的数据库中删除用户并再次将它们添加到恢复的数据库中。这样，经过身份验证的用户的系统 ID 会从`master`您的数据库流过，并且所有权限都将恢复，而无需重新编写所有权限的脚本......

例如，当我将数据库恢复到另一台服务器时，我必须为我们使用的每个登录名执行以下脚本：

```
USE [new_db_name]
GO
IF  EXISTS (SELECT * FROM sys.database_principals WHERE name = N'login_name')
DROP USER [login_name]
GO
CREATE USER [login_name] FOR LOGIN [login_name]
GO
EXEC sp_addrolemember N'My_StoredProcs', N'login_name'
GO
EXEC sp_addrolemember N'db_datareader', N'login_name'
GO
EXEC sp_addrolemember N'db_datawriter', N'login_name'
GO 
```

您可以看到登录也是某些的成员`roles`，因此也必须编写脚本。当然，您应该只添加属于每个用户的角色...！您可以通过打开 SSMS 并深入了解 DB | 下的用户来检查为用户分配了哪些角色。安全 | 用户 | 右键单击用户 | 特性。

## 编辑

顺便说一句 - 如果您的新服务器没有旧数据库中存在的用户，您必须在 master 中创建它们，然后再将它们删除并重新添加到恢复的数据库中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T19:20:09.340

如果您有这样的工具，大多数数据库比较实用程序都可以配置为迁移用户、角色成员资格和/或权限。我知道作为 Visual Studio 数据库版本（以前称为 Data Dude）一部分的架构比较工具可以做到这一点，我很确定红门工具也可以做到这一点。

我想我记得一些关于 VS 模式比较实用程序在 SQL 2012 中移动到 BIDS 等效项（我忘记了新名称是什么）的一些内容。如果您有很多要同步的对象，至少值得研究一下。

# php - 在教义 2 映射定义中使用计算列

> ID：13766155
> 
> 赞同：2
> 
> 时间：2012-12-07T15:35:48.607
> 
> 标签：php, mysql, doctrine-orm

在学说2中是否可以在映射定义中使用计算列？例如，我有一个表，其中有一列名为`quantity`和一列`unit_price`。我想`price`在映射中添加一个计算列，该列将通过乘以`quantity`和来计算`unit_price`。我知道这仅适用于 SELECT 语句。

这可以使用教义2来实现吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T00:29:59.953

这不能通过教义明确地完成。

1.  您有两种替代方法：使用在数据库中没有表示的属性自定义通过理论查询实例化的实体，并使用构造函数计算值。
2.  使用定制的保湿剂。请参阅：[在 Doctrine 中向当前表添加虚拟列？](https://stackoverflow.com/questions/4890933/adding-virtual-columns-to-current-table-in-doctrine).

# ios - 复杂应用程序中的 iOS 事件处理

> ID：13766160
> 
> 赞同：7
> 
> 时间：2012-12-07T15:36:02.223
> 
> 标签：ios, event-handling

我已经为 Android 开发了很长一段时间，现在开始学习 iOS，事情是这样的：

在 Android 上，当你有大量的事件通过应用程序时，创建和实现所有这些接口（协议）、订阅和取消订阅等等变得非常乏味。还有一些非常好的事件总线，例如 Square 的 Otto [https://github.com/square/otto](https://github.com/square/otto)

所以我想知道，iOS 是否有任何标准解决方案来处理跨各种应用程序元素的各种事件，或者它也通过实现和订阅协议来完成？或者也许有一些很酷的事件总线库，比如在 Android 上？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-08-24T09:20:49.490

或者，您可以尝试 Tolo，这是一个受 Otto 启发、同样易于使用且功能强大的 iOS 事件发布框架。简单地`SUBSCRIBE()`，或`PUBLISH()`从任何地方。

在[http://genzeb.github.io/tolo 查看](http://genzeb.github.io/tolo)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-07T18:49:53.390

`NSNotificationCenter`作为应用程序特定事件的内置分发机制。（与低级别事件相反。）

# java - 在 Java 中关闭资源

> ID：13766161
> 
> 赞同：-1
> 
> 时间：2012-12-07T15:36:06.353
> 
> 标签：java, java-6

我目前正在java中做这样的事情来释放资源。我需要在 BufferedWriter 对象上调用 close 还是在析构函数中调用它？关于 Resource1 和 Resource2，我必须恭敬地调用 release 和 free。这是嵌套尝试的正确方法吗？Python 有一个非常好的“with 语句”，它将资源与代码范围相关联。java有喜欢的吗？

```
Resource1 r1 = new Resource1();
try
{
    ...
    Resource2 r1 = new Resource2();
    try
    {
        ...
        java.io.BufferedWriter f = new java.io.BufferedWriter(new java.io.FileWriter(new java.io.File("f")));
        try
        {
           ...
        }
        finally
        {
           f.close(); 
        }
    }
    finally
    {
        r2.release(); 
    }
}
finally
{
    r1.free(); 
} 
```

**更新：** 我正在使用 Java 1.6

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T15:45:27.997

你所拥有的`BufferedWriter`是正确的。

但是，您可能希望吞下在[close](http://docs.oracle.com/javase/7/docs/api/java/io/BufferedWriter.html#close%28%29)期间发生的任何异常。这很烦人但很有必要。通常使用以下模式：

```
BufferedWriter f = null;
try {
  f = new BufferedWriter(...);
  ...
}
finally {
  try {
    if(f != null) {
      f.close();
    }
  }
  catch(IOException e) {
    // Nothing can be done, except maybe log it.
  }
} 
```

[IOUtils.finallyClose()](http://commons.apache.org/io/api-release/org/apache/commons/io/IOUtils.html#closeQuietly%28java.io.Closeable%29)可用于消除关闭时捕获的需要。

Java[没有](https://stackoverflow.com/questions/171952/is-there-a-destructor-for-java)析构函数的概念，但它确实有[finalize()](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#finalize%28%29)，当一个对象被垃圾回收时，它会调用 get 。您**永远**不应依赖`finialize()`关闭或以其他方式清理对象。

顺便说一句，Java 7[引入](http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)了一种更短的语法来关闭实现[Closeable](http://docs.oracle.com/javase/7/docs/api/java/io/Closeable.html)的对象。

```
try (BufferedWriter f = new BufferedWriter(new FileWriter(new File("f"))) {
  ...
} 
```

编辑：我终于扩展了..close。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T15:40:11.537

您需要自己关闭文件句柄和其他类似资源。依靠终结器来执行此操作是一种不好的方法。

# xaml - 如何使用 XAML 应用程序在 Windows Phone Direct3D 中最好地处理 Direct3D 渲染的方向变化

> ID：13766163
> 
> 赞同：0
> 
> 时间：2012-12-07T15:36:09.687
> 
> 标签：xaml, directx, orientation, windows-phone-8

在我的带有 XAML 的 WP8 Direct3D 应用程序中，当我旋转设备时，XAML 元素会随着方向正确旋转，但不是 Direct3D 视图。方向更改后更新 Direct3D 视图的推荐方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T15:42:55.633

查看[这篇](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj247544%28v=vs.105%29.aspx)MSDN 文章（如何从适用于 Windows Phone 8 的 Direct3D 应用程序检测屏幕方向）。一旦您检测到方向变化，我建议您使用[World Transform](http://msdn.microsoft.com/en-us/library/windows/desktop/bb206365%28v=vs.85%29.aspx)来旋转您的 Direct3D 视图。您还必须重新调整投影矩阵才能正常工作。

您还可以将新的 World 转换与您当前的 View 连接起来，并且永远不要设置 View 转换（始终为 Identity） - 这可能会在某些平台上为您带来更好的性能。

希望这可以帮助！

# php - Deadman 的开关：使用 php 从数据库中删除所有表？

> ID：13766166
> 
> 赞同：4
> 
> 时间：2012-12-07T15:36:19.660
> 
> 标签：php, mysql

我正在与一位客户合作，他给了我一些不信任他的理由（他没有遇到过这种情况）。我正在尝试创建一个“死人开关”，其中数据库中的所有表都将在提交表单时被删除（在秘密登录保护目录中）。

我不知道如何使用 PHP 从数据库中删除所有表。我知道如何删除列和行，并且确信可以删除单个表（但是有很多表），但是数据库中的所有表都超出了我的范围。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T15:39:09.933

为什么不删除整个数据库？

```
DROP DATABASE database_name 
```

示例代码

```
<?php
if(isset($_POST['delete_database'])) {
  //Code goes here
}
?>

<form method="post">
 <input type="submit" name="delete_database" value="Delete Entire Database" />
</form> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T15:39:50.763

[删除数据库](http://dev.mysql.com/doc/refman/5.0/en/drop-database.html)

```
DROP DATABASE <DATABASE_NAME> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T15:40:27.433

首先，您可以从中读取`information_schema`，它存储所有表名。
其次，您可以使用`mysql_list_tables`（已弃用）来获取数据库的所有表。第三，您可以删除整个数据库，而不是删除每个表。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-07T15:46:51.773

一种选择是使用`DROP DATABASE`：

```
DROP DATABASE db_name; 
```

[http://dev.mysql.com/doc/refman/5.0/en/drop-database.html](http://dev.mysql.com/doc/refman/5.0/en/drop-database.html)

这只会破坏数据库。另一种选择是使用该表选择数据库中的所有`information_schema`表：

```
SELECT table_name FROM INFORMATION_SCHEMA.TABLES
  WHERE table_schema = 'db_name' 
```

[http://dev.mysql.com/doc/refman/5.1/en/tables-table.html](http://dev.mysql.com/doc/refman/5.1/en/tables-table.html)

在您完全相信这个想法之前，您应该在生产站点上检查您的用户的权限。一些托管公司可能不会让您访问`information_schema`或`DROP DATABASE`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-07T15:47:00.837

您可以查询“SHOW TABLES;” 然后遍历每个结果和“DROP TABLE TABLENAME;”

但正如有人已经说过的那样，如果其他人发现并使用它。那将是糟糕的一天。我不建议这样做。

# sql - sql 按日期时间排序，然后按字符串排序

> ID：13766167
> 
> 赞同：1
> 
> 时间：2012-12-07T15:36:22.950
> 
> 标签：sql

我有一个 varchar 列，其中包含日期时间值和现在的字符串值。我需要按日期时间值排序并在底部列出所有字符串值。我有以下日期时间：

```
ORDER BY CAST(q2.[Due Date] AS DATETIME) 
```

但是我的结果在我的整个结果中都具有“保留”值。我需要将“等待”放在列表的底部。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T15:37:49.013

不确定你的平台是什么，但在 SQL Server 中你可以写：

```
SELECT q2.[Due Date]
FROM yourTable q2
ORDER BY ISDATE(q2.[Due Date]) DESC; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T15:42:08.130

如果唯一的非日期值是 'On Hold'，那么这应该适用于大多数 SQL 引擎：

```
order by (case when q2.[Due Date] = 'On Hold' then 0 else 1 end) desc,
         (case when q2.[Due Date] <> 'On Hold' then cast(q2.[Due Date] as datetime) end) 
```

不过，我建议如果您将日期存储为字符串，则使用格式“YYYY-MM-DD HH:MI:SS”。这将允许您对它们进行排序而无需进行转换。

如果它们采用这种格式，您可以使用以下内容：

```
order by (case when left([Due Date], 1) between '0' and '9' then 0 else 1 end),
         [Due Date] 
```

（在大多数情况下，仅按 [到期日期] 排序即可，因为数字在字母之前排序。但是，任意字符串可以以其他非字母字符开头。）

# javascript - 更改焦点元素时触发滚动事件

> ID：13766169
> 
> 赞同：1
> 
> 时间：2012-12-07T15:36:34.257
> 
> 标签：javascript, jquery, scroll, html-table

我有一个启用键盘导航的 html 表：表中的每个 td 都有 tabIndex="1"，我为每个 td 的 onkeydown 事件添加了处理程序。在处理程序中，我计算 keydowned 的 td 行和列号，根据按下的箭头键计算新的行/列号，然后执行 focus()。这是功能：

```
function pivotKeyDown(event, element) {
    var elementToSelect = event.srcElement ? event.srcElement : (event.target ? event.target : event.toElement);
    var row, col, t = $(elementToSelect);
    currentCol = t.index();
    currentRow = t.closest('tr').index();

    switch (event.keyCode) {
        case 37:
            t.closest('table').find('tr:nth-child(' + (currentRow + 1) + ')').find('td:nth-child(' + (currentCol) + ')').focus();
            break;
        case 38:
            t.closest('table').find('tr:nth-child(' + (currentRow) + ')').find('td:nth-child(' + (currentCol + 1) + ')').focus();
            break;
        case 39:
            t.closest('table').find('tr:nth-child(' + (currentRow + 1) + ')').find('td:nth-child(' + (currentCol + 2) + ')').focus();
            break;
        case 40:
            t.closest('table').find('tr:nth-child(' + (currentRow + 2) + ')').find('td:nth-child(' + (currentCol + 1) + ')').focus();
            break;
    }
    return false;
} 
```

表格通常太大而无法在页面上显示，因此如果表格太大，则将其放置在显示滚动条的 div 中。

现在，问题是当我使用键导航时，焦点单元格会发生变化，当我越过视口边界时，它会将表格移动到 div 内（以便新选择的单元格可见），但它不会触发滚动事件，它不会改变滚动条，因此即使选择了表格中的右下角单元格，滚动条的位置仍然就像选择左上角的单元格一样。有没有什么办法解决这一问题？或者我应该手动跟踪单元格选择并自己更新滚动位置？

# c++ - constexpr ：文字类类型复制行为

> ID：13766170
> 
> 赞同：3
> 
> 时间：2012-12-07T15:36:34.177
> 
> 标签：c++, c++11, static-members, constexpr

让我们看下面的代码：

```
class   const_int                                                                                                                                                                                                    
{                                                                                                                                                                                                                    
public:                                                                                                                                                                                                              
  constexpr const_int(int data) : data_(data) {}                                                                                                                                                                     
  constexpr const_int(const const_int &) = default;                                                                                                                                                                  
  constexpr const_int(const_int &&) = default;                                                                                                                                                                       

private:                                                                                                                                                                                                             
  int   data_;                                                                                                                                                                                                       
};

class   test                                                                                                                                                                                                         
{                                                                                                                                                                                                                    
public:                                                                                                                                                                                                              

  constexpr static const const_int      USER = 42;                                                                                                                                                                

  constexpr static const double         NATIVE = 4.2;                                                                                                                                                                
};

// constexpr const const_int test::USER;

void    pass_by_copie(double)                                                                                                                                                                                        
{                                                                                                                                                                                                                    
}

void    pass_by_copie(const_int)                                                                                                                                                                                     
{                                                                                                                                                                                                                    
}

void    pass_by_const_ref(const const_int&)                                                                                                                                                                          
{                                                                                                                                                                                                                    
}

void    pass_by_rvalue_ref(const_int&&)                                                                                                                                                                              
{                                                                                                                                                                                                                    
}

int     main(void)                                                                                                                                                                                                   
{                                                                                                                                                                                                                    

  pass_by_copie(test::NATIVE);                                                                                                                                                                                       

  pass_by_copie(test::USER);                                                                                                                                                                                         

  pass_by_const_ref(test::USER);                                                                                                                                                                                         

  pass_by_rvalue_ref(const_int(test::USER));                                                                                                                                                                         

  return (0);                                                                                                                                                                                                        
} 
```

以下两行：

```
pass_by_copie(test::USER);
pass_by_const_ref(test::USER); 
```

在下产生以下错误`g++ 4.7`：

> 未定义对“test::USER”的引用

我知道没有`test::USER`. （该行是故意注释的）

* * *

我有两个问题：

1.  为什么需要显式实例`test::USER`而无需显式实例`test::NATIVE`来调用函数`pass_by_copie`？

2.  为什么我可以`pass_by_rvalue_ref`通过显式创建临时副本来调用，而编译器在调用时`test::USER`无法（或不想）自己隐式创建相同的副本？`pass_by_copie``test::USER`

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T19:57:21.250

从 C++11 的 3.2 节开始：

> 名称显示为潜在求值表达式的变量是*odr-used*的，除非它是一个满足出现在常量表达式中的要求并且立即应用左值到右值转换的对象。

和

> 每个程序都应包含该程序中 odr 使用的每个非内联函数或变量的准确定义

所以定义是必需的，因为`test::USER`它是 odr-used，显然它是 odr-used，因为它不会立即进行左值到右值的转换。这让我感到惊讶，调用`pass_by_copie`看起来像是执行左值到右值的转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T19:31:10.837

Clang 4.1 给了我这个错误：

```
Undefined symbols for architecture x86_64:
  "test::USER", referenced from:
      _main in Untitled-gXrry2.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我假设这里发生的事情`test::NATIVE`可以简单地替换为使用`4.2`它的值，并且实际上不需要符号。但是`test::USER`，作为类的实例而不是标量，确实需要一个符号，以便所有引用都`test::USER`指向同一个对象。鉴于此，您实际上确实需要显式实例。

# java - 模糊逻辑域模型

> ID：13766171
> 
> 赞同：0
> 
> 时间：2012-12-07T15:36:41.807
> 
> 标签：java, domain-driven-design, domain-model, fuzzy-logic

我一直在从事一个涉及模糊逻辑控制器的项目，到目前为止一切顺利。

我已经成功地建模和实现了范数（S 和 T 范数）、补充、模糊命题和隶属函数。

然而，我现在面临的挑战是对 FuzzyVariable 进行建模，其中包括 FuzzySet，其中包括 UniversalSet。

我的项目适用于离散值，但我仍然想为连续值添加一些支持。

换句话说，我希望有一个类似于这个的层次结构：

```
public interface UniversalSet {
}

public abstract class DiscreteUniversalSet implements UniversalSet {
}

public abstract class ContinuousUniversalSet implements UniversalSet {
}

public interface FuzzySet {
}

public abstract class DiscreteFuzzySet implements FuzzySet {
    private DiscreteUniversalSet universalSet;
}

public abstract class ContinuousFuzzySet implements FuzzySet {
    private ContinuouUniversalSet universalSet;
} 
```

问题是，我希望离散全集能够返回离散值列表，但对于连续全集返回范围（下限和上限）。

阿尔法交叉点也是如此。我想要方法`getAlphaIntersection(double alpha)`返回离散模糊集的离散值列表和连续模糊集的范围列表。

目前，这个问题让我想起了一个方形矩形（或圆形椭圆）问题，但我不确定如何进行。

任何帮助表示赞赏：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T04:45:51.833

使用泛型：

```
public interface UniversalSet {
}

public abstract class DiscreteUniversalSet implements UniversalSet {
    public double[] getValues() {...}
}

public abstract class ContinuousUniversalSet implements UniversalSet {
    public double getLowerBound() {...}
    public double getUpperBound() {...}
}

public interface FuzzySet<T extends UniversalSet> {
    T getAlphaIntersection(double alpha);
}

public abstract class DiscreteFuzzySet implements FuzzySet<DiscreteUniversalSet> {
    public DiscreteUniversalSet getAlphaIntersection(double alpha) { ... }
}

public abstract class ContinuousFuzzySet implements FuzzySet<ContinuousUniversalSet> {
    public ContinuousUniversalSet getAlphaIntersection(double alpha) { ... }
} 
```

# javascript - jQuery 调整窗口对象的大小

> ID：13766172
> 
> 赞同：0
> 
> 时间：2012-12-07T15:36:41.453
> 
> 标签：javascript, jquery, html, css

我可以在 jQuery 中手动调整窗口对象的大小吗？我正在修改窗口宽度为 640 像素的 iPhone 上的 Web 应用程序，但我不知道它是如何导致 iPhone 屏幕宽度为 320 像素（纵向模式）的。我试图从 HTML 文档的 head 部分中删除所有元标记，但没有任何改变。知道如何解决这个问题吗？

* * *

我没有成功添加额外的元标记。主要问题是 iPhone 4 有`640x960 px`屏幕。我以前不知道这一点。所以我对 iPhone 的媒体查询设置为`320x480 px`. 但是还有另一个问题。当我切换模式时，分辨率变为`320x480 px`并保持在这些值上。我不知道为什么会发生这种情况，并且很难为这种情况设置 CSS。

客户在他们的网站上有两个元标记，我不知道为什么：

```
"meta name="viewport" content="width=device-width, initial-scale=0.5, minimum-scale=0.5, maximum-scale=1.0"
"meta name="viewport" content="initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, width=device-width" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T15:55:18.000

您的文档中有以下内容`<head>`吗？

```
<meta name="viewport" content="width=device-width, initial-scale=1"> 
```

这将阻止 ios 缩放页面。

之后，您将不得不调整/移动应用程序的内容以匹配设备，而不是相反。

CSS[媒体查询](http://cssmediaqueries.com/what-are-css-media-queries.html)将极大地帮助您将 web 应用程序调整为移动格式。

# magento - Magento，后端网格上的行组的不同背景颜色

> ID：13766173
> 
> 赞同：1
> 
> 时间：2012-12-07T15:36:45.857
> 
> 标签：magento, grid, magento-1.7

在带有网格的后端管理页面上，我需要更改行组的背景颜色。默认情况下不是逐行交替颜色，而是根据已知的列值对组进行着色。

我正在研究这个 SO 问题：在管理和其他类似页面[中更改订单网格上的行颜色的方法。](https://stackoverflow.com/q/6569386/1297603)但无法重现我需要的内容，因为这个问题是指将重复的列中的值。

我需要为不同的组使用不同的颜色，或者至少使用这些组的替代颜色。

也许是这样的：

![在此处输入图像描述](../Images/0ec60877f49657a6854c9d20479cd358.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-12T10:19:01.317

对于任何寻求解决方案的人。我在 Incho 网站上使用了本教程：[为 Magento 网格中的自定义列添加自定义渲染器](http://inchoo.net/ecommerce/magento/how-to-add-custom-renderer-for-a-custom-column-in-magento-grid/)。有一些 SO 问题也有助于理解解决方案。

我没有像最初想要的那样更改整行背景颜色，我只是在修改单元格背景。但最后，足以向用户指出这一行有些不同。我所做的是添加一个新的自定义列。在`renderer`房产上，我引用了一个新类。

```
$this->addColumn('collision_type', array(
          'header'  => $helper->__('Collision'),
          'align'   => 'center',
          'index'   => 'collision_type',
          'type'    => 'action',
          'renderer'=> new Dts_Banners_Block_Adminhtml_Collisions_Grid_Renderer_Collisiontype(),
)); 
```

我将所需的类放在一个新的子树中：

```
Grid
  └─ Renderer
        └─ Collisiontype.php 
```

这是应该呈现列的新类。要拥有不同的颜色，只需要评估`$value`变量并为相应的值应用不同的颜色样式，这就是我现在正在做的事情。

```
<?php
class Dts_Banners_Block_Adminhtml_Collisions_Grid_Renderer_Collisiontype extends Mage_Adminhtml_Block_Widget_Grid_Column_Renderer_Abstract
{
    public function render(Varien_Object $row) {
        $value =  $row->getData($this->getColumn()->getIndex());
        return '<div style="color:#FFF;font-weight:bold;background:#F55804;border-radius:8px;width:100%">'.$value.'</div>';
    }
}
?> 
```

结果：

![带有渲染列的网格屏幕截图](../Images/fd36368995a91e2f43c74e09867faaf8.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-23T09:47:49.533

就我而言，我使用了上面的代码片段。我需要在网格中为类别创建一个自定义单选列。所以我这样设置了所有条件。

```
public function render(Varien_Object $row) {
        $category = Mage::registry('current_category');
        $screenId = $category->getCategoryAttachedID();
        if($row->getId()==$screenId)$checked='checked="checked"';
        else $checked='';
        return '<input type="radio" name="screen_id" value="'.$row->getId().'" '.$checked.' >';
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-13T11:12:57.373

上面的答案很好，但有时您想在不创建新文件的情况下做同样的事情。
这是在网格文件中实现相同结果的另一种方法。

```
$this->addColumn('collision_type', array(
      'header'  => $helper->__('Collision'),
      'align'   => 'center',
      'index'   => 'collision_type',
      'type'    => 'action',
      'frame_callback' => [$this, '_formatCell']
)); 
```

然后在同一个文件中

```
public function _formatCell($value, Varien_Object $row, Mage_Adminhtml_Block_Widget_Grid_Column $column)
{
    $value =  $row->getData($column->getIndex());
    return '<div style="color:#FFF;font-weight:bold;background:#F55804;border-radius:8px;width:100%">'.$value.'</div>';
} 
```

# asp.net-mvc - 64 位 ASP.NET MVC 应用程序无法运行

> ID：13766176
> 
> 赞同：4
> 
> 时间：2012-12-07T15:36:54.747
> 
> 标签：asp.net-mvc, iis, 64-bit, badimageformatexception

首先，我之前设法让我的一个 64 位测试 Web 应用程序在这台机器上运行（回到我为这个项目设计原型的时候）。我已经在 32 位上工作了几个星期，并意识到我需要将应用程序切换到 64 位，当我这样做（在项目中将目标平台设置为 x64）并重新部署时，它停止运行。

上次我花了几天的时间才让 64 位工作，我不确定这次我错过了什么，我上次做了什么。

我在 IIS 下发布和调试。

我收到带有以下消息的 BadImageFormatException：“无法加载文件或程序集 'GEMS.Web' 或其依赖项之一。尝试加载格式不正确的程序。”

此应用程序引用 64 位和 32 位程序集。我已在 IIS 的应用程序池中将“启用 32 位应用程序”设置为 true。

我正在使用 VS.NET 2012、IIS 7.5，在 64 位 Win 7 机器上运行。

以下来自程序集负载跟踪：

```
Assembly manager loaded from:  C:\Windows\Microsoft.NET\Framework\v4.0.30319\clr.dll
Running under executable  C:\Windows\SysWOW64\inetsrv\w3wp.exe
--- A detailed error log follows. 

=== Pre-bind state information ===
LOG: User = XXXXXX\xxxxxx
LOG: DisplayName = GEMS.Web
 (Partial)
WRN: Partial binding information was supplied for an assembly:
WRN: Assembly Name: GEMS.Web | Domain ID: 2
WRN: A partial bind occurs when only part of the assembly display name is provided.
WRN: This might result in the binder loading an incorrect assembly.
WRN: It is recommended to provide a fully specified textual identity for the assembly,
WRN: that consists of the simple name, version, culture, and public key token.
WRN: See whitepaper http://go.microsoft.com/fwlink/?LinkId=109270 for more information and common solutions to this issue.
LOG: Appbase = file:///c:/inetpub/wwwroot/GEMS.Web/
LOG: Initial PrivatePath = c:\inetpub\wwwroot\GEMS.Web\bin
Calling assembly : (Unknown).
===
LOG: This bind starts in default load context.
LOG: Using application configuration file: c:\inetpub\wwwroot\GEMS.Web\web.config
LOG: Using host configuration file: C:\Windows\Microsoft.NET\Framework\v4.0.30319\aspnet.config
LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework\v4.0.30319\config\machine.config.
LOG: Policy not being applied to reference at this time (private, custom, partial, or location-based assembly bind).
LOG: Attempting download of new URL file:///C:/Windows/Microsoft.NET/Framework/v4.0.30319/Temporary ASP.NET Files/gems.web/eea5792e/72317e39/GEMS.Web.DLL.
LOG: Attempting download of new URL file:///C:/Windows/Microsoft.NET/Framework/v4.0.30319/Temporary ASP.NET Files/gems.web/eea5792e/72317e39/GEMS.Web/GEMS.Web.DLL.
LOG: Attempting download of new URL file:///c:/inetpub/wwwroot/GEMS.Web/bin/GEMS.Web.DLL.
ERR: Failed to complete setup of assembly (hr = 0x8007000b). Probing terminated. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-06-15T18:33:51.557

使用以下方法更改您的 IIS 以处理 64 位处理：**工具 | 选项 | 项目和解决方案 | 网站项目 | 使用 64 位版本的 IIS Express**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T15:40:11.583

如果您不使用任何本机 Win32 库，则应`Any CPU`针对您的程序集，不要弄乱 IIS 中的*启用 32 位应用程序*设置（将其设置为 false）。

# sass - SCSS 文件不再编译

> ID：13766178
> 
> 赞同：9
> 
> 时间：2012-12-07T15:37:06.367
> 
> 标签：sass

直到昨天，Sass 工作得还不错，现在，Sass 不再编译我的 SCSS 文件了。

这是我到目前为止尝试过的，但没有解决问题：

1.  卸载当前版本的 Sass 并安装旧版本
2.  安装最新版本的 Sass
3.  卸载 Ruby 并安装最新版本
4.  重新启动我的机器

**技术信息：**

*   Win7 64b
*   萨斯版本 3.2.3
*   指南针版本 0.12.2
*   使用的 CMD 命令：`sass --watch scss:css --style compact --compass --debug-info`
*   编辑器：崇高文本 2

**其他信息：**

发生的一些奇怪的事情是，如果我在我的`.scss`文件中写了一些不正确的东西，例如一个颜色的四位十六进制值`#f00a`，然后运行`--watch`，Sass 会立即检测到问题，并用错误重写`.css`文件。

这意味着 Sass 在某种程度上是部分工作的。

输入所有`--watch`命令后，Sass 启动通常会说：`>>> Sass is watching for changes. Press Ctrl-C to stop.`

但是，当我保存`.scss`文件时，Sass 不再编译。它只是停留在那里。

有没有其他人遇到过 Sass 停止编译的问题？

问题是现在我不能再处理我的项目了，因为再也没有办法创建 CSS 文件了，所以非常感谢任何帮助。

谢谢。

**- 更新**

我仍然无法编译。

但是，在停止之后，`--watch`我在 CMD 中得到了一个巨大的项目列表。在我家的 PC 上，Sass 工作正常，当我停止时，`--watch`我没有得到任何像这样的列表或任何东西：

```
Microsoft Windows [Version 6.1.7601]
Copyright (c) 2009 Microsoft Corporation.  All rights reserved.

c:\...\www>sass --watch scss:css --style compact --compass --debug-info --trace
>>> Sass is watching for changes. Press Ctrl-C to stop.

C:/Ruby193/lib/ruby/gems/1.9.1/gems/sass-3.2.3/lib/sass/util/multibyte_string_sc anner.rb:36:in `scan': Interrupt from C:/Ruby193/lib/ruby/gems/1.9.1/gems/sass-3.2.3/lib/sass/util/multibyte_string_scanner.rb:36:in `scan'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/sass-3.2.3/lib/sass/scss/parser.rb:1142:in `tok'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/sass-3.2.3/lib/sass/scss/parser.rb:865:in `value!'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/sass-3.2.3/lib/sass/scss/parser.rb:845:in `declaration'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/sass-3.2.3/lib/sass/scss/parser.rb:568:in `block in declaration_or_ruleset'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/sass-3.2.3/lib/sass/scss/parser.rb:1090:in `block in catch_error'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/sass-3.2.3/lib/sass/scss/parser.rb:1090:in `catch'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/sass-3.2.3/lib/sass/scss/parser.rb:1090:in `catch_error'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/sass-3.2.3/lib/sass/scss/parser.rb:567:in `declaration_or_ruleset'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/sass-3.2.3/lib/sass/scss/parser.rb:540:in `block_child'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/sass-3.2.3/lib/sass/scss/parser.rb:532:in `block_contents'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/sass-3.2.3/lib/sass/scss/parser.rb:521:in `block'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/sass-3.2.3/lib/sass/scss/parser.rb:515:in `ruleset'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/sass-3.2.3/lib/sass/scss/parser.rb:539:in `block_child'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/sass-3.2.3/lib/sass/scss/parser.rb:532:in `block_contents'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/sass-3.2.3/lib/sass/scss/parser.rb:70:in `stylesheet'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/sass-3.2.3/lib/sass/scss/parser.rb:27:in `parse'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/sass-3.2.3/lib/sass/engine.rb:342:in `_to_tree'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/sass-3.2.3/lib/sass/engine.rb:315:in `_render'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/sass-3.2.3/lib/sass/engine.rb:262:in `render'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/sass-3.2.3/lib/sass/plugin/compiler.rb:341:in `update_stylesheet'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/sass-3.2.3/lib/sass/plugin/compiler.rb:203:in `block in update_stylesheets'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/sass-3.2.3/lib/sass/plugin/compiler.rb:201:in `each'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/sass-3.2.3/lib/sass/plugin/compiler.rb:201:in `update_stylesheets'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/sass-3.2.3/lib/sass/plugin/compiler.rb:235:in `watch'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/sass-3.2.3/lib/sass/plugin.rb:107:in `method_missing'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/sass-3.2.3/lib/sass/exec.rb:444:in `watch_or_update'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/sass-3.2.3/lib/sass/exec.rb:307:in `process_result'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/sass-3.2.3/lib/sass/exec.rb:41:in `parse'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/sass-3.2.3/lib/sass/exec.rb:21:in `parse!'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/sass-3.2.3/bin/sass:8:in `<top(required)>'
    from C:/Ruby193/bin/sass:23:in `load'
    from C:/Ruby193/bin/sass:23:in `<main>'
Terminate batch job (Y/N)? 
```

CSS解析器有什么问题吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-08-03T15:34:11.620

我遇到了类似的问题，但使用 Sass 和 Compass。幸运的是，我设法通过运行`compass clean`删除`.sass-cache`文件和编译的 .css 文件的命令来解决问题。然后再次运行该`compass --watch`命令。希望这可能对其他人有所帮助。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-01-29T16:25:15.547

诚然，这**对我来说非常愚蠢**，但这确实是我在偶然发现这个 stackoverflow Q&A 时遇到的问题。

这是我非常简单的问题的简单答案：

确保您在主 style.scss 文件中 @importing 文件。

显然不是您非常复杂的问题的答案，但它可能会帮助一些与我处于相似位置的新手！

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-11T18:24:17.957

我发现了问题：我的 /scss 文件夹中的一个 .scss 文件导致 Sass 停止编译。

“有问题的”文件是项目主 .scss 文件的旧副本，但是当我将该旧版本与最新版本进行比较时，我只看到在属性、值和媒体查询底部的少数差异编码。

除此之外，“有问题”和“正确/工作”文件几乎 98% 完全相同。

在 GitHub 中的项目问题列表中阅读更广泛的答案：[https ://github.com/nex3/sass/issues/362#issuecomment-11255429](https://github.com/nex3/sass/issues/362#issuecomment-11255429)

# c# - 使用 DataGrid 绑定到 Property 和 ItemSource

> ID：13766180
> 
> 赞同：1
> 
> 时间：2012-12-07T15:37:13.680
> 
> 标签：c#, silverlight, xaml, binding

我有一个 DataGrid，它当前有一个 ItemsSource="{Binding Events}"，在我需要绑定到不属于 ItemsSource="{Binding Events}" 的属性 (OccurredOnLocal) 的列中。我该怎么做？

**EventHistoryView.xaml**

```
<sdk:DataGrid x:Name="dataGrid" Grid.Row="3" Margin="5,5" ItemsSource="{Binding Events}"  IsReadOnly="True" AutoGenerateColumns="False" IsEnabled="{Binding DataIsCurrent}">
        <i:Interaction.Behaviors>
            <behaviors:DataGridDoubleClickBehavior DoubleClickCommand="{Binding DoubleClickCommand}" CommandParameter="{Binding SelectedItem, ElementName=dataGrid}"/>
        </i:Interaction.Behaviors>
        <sdk:DataGrid.Columns>
            <sdk:DataGridTextColumn Header="Priority" Binding="{Binding Priority}" CanUserReorder="True" CanUserResize="True" CanUserSort="True" Width="auto"/>
            <sdk:DataGridCheckBoxColumn Header="Requires Ack" Binding="{Binding RequiresAcknowledgement}" Width="auto"/>
            <sdk:DataGridTextColumn Header="Occurred On" Binding="{Binding MessageTime}" CanUserReorder="True" CanUserResize="True" CanUserSort="True" Width="*"/>
            <sdk:DataGridTextColumn Header="Occurred On (Local)" Binding="{Binding OccurredOnLocal}" CanUserReorder="True" CanUserResize="True" CanUserSort="True" Width="*"/>
            <sdk:DataGridTemplateColumn Header="Alarm" Width="*">
                <sdk:DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <Border Background="{Binding DisplayColour}">
                            <TextBlock Text="{Binding EventDisplayText}" VerticalAlignment="Center"/>
                        </Border>
                    </DataTemplate>
                </sdk:DataGridTemplateColumn.CellTemplate>
            </sdk:DataGridTemplateColumn>
            <sdk:DataGridTextColumn Header="Controller" Binding="{Binding ControllerDisplayText}" CanUserReorder="True" CanUserResize="True" CanUserSort="True" Width="*"/>
            <sdk:DataGridTextColumn Header="Reader" Binding="{Binding ReaderDisplayText}" CanUserReorder="True" CanUserResize="True" CanUserSort="True" Width="*"/>
            <sdk:DataGridTextColumn Header="Card Number" Binding="{Binding BadgeId}" CanUserReorder="True" CanUserResize="True" CanUserSort="True" Width="auto"/>
            <sdk:DataGridTextColumn Header="Person" Binding="{Binding PersonDisplayText}" CanUserReorder="True" CanUserResize="True" CanUserSort="True" Width="*"/>
        </sdk:DataGrid.Columns>
    </sdk:DataGrid> 
```

**EventHistoryViewModel.cs**

```
 #region OccurredOnLocal Property
    /// <summary>
    /// The <see cref="OccurredOnLocal" /> property's name.
    /// </summary>
    public const string OccurredOnLocalPropertyName = "OccurredOnLocal";

   private TimeZoneInfo occurredOnLocal = TimeZoneInfo.Local;

    /// <summary>
    /// Gets the OccurredOnLocal property.
    /// TODO Update documentation:
    /// Changes to that property's value raise the PropertyChanged event. 
    /// This property's value is broadcasted by the Messenger's default instance when it changes.
    /// </summary>
    public TimeZoneInfo OccurredOnLocal
    {
        get
        {
            return occurredOnLocal;
        }

        set
        {
            if (occurredOnLocal == value)
            {
                return;
            }

            occurredOnLocal = value;

            RaisePropertyChanged(OccurredOnLocalPropertyName);
        }
    }
    #endregion 
```

谢谢，
杰森

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T15:45:09.297

您可以使用`RelativeSource`xaml 扩展

```
<sdk:DataGridTextColumn Header="Occurred On (Local)" Binding="{Binding DataContext.OccurredOnLocal, RelativeSource={RelativeSource AncestorType=DataGrid}}"/> 
```

# extjs4 - 在 extjs4 tbar 按钮中左对齐文本

> ID：13766181
> 
> 赞同：0
> 
> 时间：2012-12-07T15:37:15.257
> 
> 标签：extjs4, tbar

我有以下 tbar 项目。我试图左对齐按钮内的文本。但我无法这样做。有什么建议么？

```
 {
                            tbar: [
                                {
                                    xtype: 'button',
                                    text: 'Home',
                                    width: 120,
                                    align:'left',   
                                    handler: function() {
                                        document.location.href = BasePath; 
                                    }
                                }                                   

                            ]
                        },
                        {
                            tbar: [
                                {
                                    xtype: 'button',
                                    text: 'View Transfer Numbers',
                                    width: 120,                                         
                                    handler: function() {
                                        document.location.href =BasePath+'transfer'; 
                                    }
                                }                                   

                            ]
                        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T20:41:11.500

文本对齐：字符串

这就是我在上面所做的以获得我的解决方案

# listview - jQuery Mobile 中的滚动视图列表视图

> ID：13766182
> 
> 赞同：2
> 
> 时间：2012-12-07T15:37:14.850
> 
> 标签：listview, jquery-mobile, scroll

有没有办法完成以下组件：

Div 用作过滤器列表的较小尺寸的“掩码”，并作为较大尺寸的女儿滚动。

我使用滚动 iscroll 和 iscrollview 被列入名单。但不要在相应的大小上提及。解释更好的 150px div 应该包含并且列表包含更大的高度。当关注过滤器列表时会出现问题，因为列表应该在没有这些属性的情况下滚动，而不是在带有滚动和过滤器的列表中：date-tap-toggle = "false" data-position = "fixed"。以下代码：

```
<!DOCTYPE html>
<html>
<head>
<title>Test</title>
<meta name="viewport"
    content="width=device-width, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;"
    charset="UTF-8">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<link rel="stylesheet"
    href="style/jquery.mobile.structure-1.2.0.min.css" />
<link rel="stylesheet" href="style/jquery.mobile.iscrollview.css" /> 
<link rel="stylesheet" href="style/jquery.mobile.iscrollview-pull.css" /> 
</head>
<body>
<div data-role="page" id="index" data-theme="a">

        <div data-role="header" data-theme="a" data-position="fixed" data-tap-toggle="false"
            data-position="fixed" data-tap-toggle="false">
            <div data-role="navbar">
                <ul class="ui-grid-b">
                    <li class="ui-block-a"><a href="#"
                        data-href="center" id="btnCenter"
                        data-transition="none" data-theme="b">Center</a></li>
                    <li class="ui-block-b"><a href="#"
                        class="ui-btn-active" data-href="rast"
                        id="btnRast" data-transition="none" data-theme="b">Rast</a></li>
                    <li class="ui-block-c"><a href="#" data-href="help"
                        id="btnHelp" data-transition="none" data-theme="b">Help</a></li>
                </ul>
            </div>
        </div>

        <div class="content">

            <div id="listFilter" height: 150px
                style="width: 100%; margin-top: 10%; padding: 5px; margin-bottom: 5%;">

                        <ul id="listVeiculos" data-role="listview" data-theme="d"
                            data-filter-placeholder="Ve&iacute;culos" data-filter="true"
                            data-divider-theme="d" data-scroll="y">
                            <li data-role="list-divider">
                                <div class="ui-grid-c">

                                    <div class="ui-block-a">A</div>

                                    <div class="ui-block-b">B</div>

                                    <div class="ui-block-c">C</div>

                                    <div class="ui-block-d">D</div>
                                </div>
                            </li>

                            <li>
                                <div class="ui-grid-c">

                                    <div class="ui-block-a">001</div>

                                    <div class="ui-block-b">002</div>

                                    <div class="ui-block-c">003</div>

                                    <div class="ui-block-d">004</div>
                                </div>
                            </li>

                            <li>
                                <div class="ui-grid-c">

                                    <div class="ui-block-a">001</div>

                                    <div class="ui-block-b">002</div>

                                    <div class="ui-block-c">003</div>

                                    <div class="ui-block-d">004</div>
                                </div>
                            </li>
                        </ul>
            </div>

        </div>

        <div class="content_div" style="margin-top: 5%;" id="divListWithouScroll"   
            data-tap-toggle="false" data-position="fixed">

            <div>
                <ul data-role="listview" data-inset="true" id="listWithouScroll"
                    style="margin-top: 5%; border: 0px" data-theme="d"
                    data-dividertheme="d">
                    <li data-role="list-divider">1</li>
                    <li data-role="text">2</li>
                    <li data-role="text">3</li>
                    <li data-role="text">4</li>
                </ul>

            </div>
        </div>
    </div>

    <script src="js/cordova-2.2.0.js" type="text/javascript"></script>
    <script src="js/jquery-1.8.2.min.js" type="text/javascript"></script>
    <script src="js/jquery.mobile-1.2.0.min.js" type="text/javascript"></script>
    <script src="js/iscroll.js" type="text/javascript"></script>
    <script src="js/jquery.mobile.iscrollview.js" type="text/javascript"></script>
</body>
</html> 
```

我使用了以下代码行，但它剥夺了所有屏幕都可以使用该功能，并且只有这个屏幕不应该：android:windowSoftInputMode="adjustNothing"。

谢谢！

# eclipse - gyrex admin web 应用程序的用户界面使用了什么技术

> ID：13766185
> 
> 赞同：2
> 
> 时间：2012-12-07T15:37:31.340
> 
> 标签：eclipse, user-interface, web, osgi

这些天我正在努力学习osgi。我下载了一个基于 OSGi 的服务器[gyrex](http://www.eclipse.org/gyrex/)。我发现它的管理应用程序的用户界面非常丰富。我想知道使用什么技术来构建这个 Web 应用程序。HTML + Javascript？还是JSF？或 Eclipse RAP 或其他什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T15:53:05.537

它似乎是 RAP 2.0。

GIT 存储库在这里：[https](https://github.com/eclipse/gyrex-admin) ://github.com/eclipse/gyrex-admin 。

如您所见，源代码树中没有 HTML/JS/CSS，而是多次提及 RAP 2.0。

# drop-down-menu - JQuery Lava Lamp Drop Down 被幻灯片覆盖并在调整浏览器大小时错误地更改位置

> ID：13766188
> 
> 赞同：0
> 
> 时间：2012-12-07T15:37:35.667
> 
> 标签：drop-down-menu, grid, css-float, css-position, lavalamp

因此，在使用此导航解决了许多其他问题之后。我有两个最后的小问题。

第一个，更重要的是要修复，当下拉列表落下时，它会被包含在网格中的 div 切断。相反，它需要“浮动”在这个网格之外和下面的幻灯片上。不知道该怎么做。查看问题[http://lookseewatch.com/independentinsurance/](http://lookseewatch.com/independentinsurance/)

我故意将高度设置为 50px 以显示问题，如果没有高度，或者高度设置为自动，则下拉菜单甚至不显示。

这是一个代码片段

```
<div class="row">
        <div class="grid_4">
            <img src="<?php bloginfo('template_directory'); ?>/images/logo.png">
        </div>
        <div class="grid_8">
            <?php wp_nav_menu( array('items_wrap' => '<ul class="%2$s">%3$s<div id="box"><div class="head"></div></div></ul>', 'container_class' => 'menu', 'menu_class' => 'nav', 'menu' => 'Header', 'walker' => new UL_Class_Walker )); ?>
        </div>
    </div> 
```

第二个问题是您悬停的位置后面的蓝色条。它的起点绝对是位置

```
var dLeft = $('.current-menu-item a').offset().left+15;//setting default position of menu
var dWidth = $('.current-menu-item a').width();
var dTop = $('.current-menu-item a').offset().top; 
```

所以当网页加载时，它工作得很好，但是当你调整窗口大小时，“魔术线”停留在同一个地方而不是随着导航移动。当您将鼠标悬停在其他链接上时，它会转到正确的位置，但是当它返回到原始位置时，它会完全关闭，具体取决于浏览器大小的变化程度。您可以在上面的链接中看到问题，并将浏览器的一角拉进去。

如果我需要为任何一个发布任何 CSS，请告诉我。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T15:51:56.950

由于您使用的是 jQuery，因此您可以收听 window.resize。您可以初始化`dTop`，因为它不应该改变，然后在调整浏览器大小时设置其他变量：

```
var dLeft;
var dWidth;
var dTop = $('.current-menu-item a').offset().top;

$(function(){
    //listen to window.resize
    $(window).on("resize", function () {
        //update variables     
        dLeft = $('.current-menu-item a').offset().left+15;
        dWidth = $('.current-menu-item a').width();
    }).trigger("resize"); //sets variables when page loads
}); 
```

至于隐藏的下拉菜单，您只需要删除`overflow:hidden`css`.grid-8`类。

# visual-studio - 为什么 Resharper 要将骆驼案例应用于私有方法？

> ID：13766190
> 
> 赞同：7
> 
> 时间：2012-12-07T15:37:39.980
> 
> 标签：visual-studio, naming-conventions, resharper

有什么方法可以告诉 Resharper 方法应该有不同的命名约定，具体取决于例如[这里](http://en.wikibooks.org/wiki/C_Sharp_Programming/Naming#Classes_and_Structures)建议的访问修饰符？我的意思是例如：

> 私有方法 lowerCamelCase
> 
> 公共方法 UpperCamelCase
> 
> ETC...

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-08T08:58:37.360

当然，只需转到**ReSharper 选项 | 代码编辑 | C# | 命名样式**，单击**高级设置**，然后单击**添加**以添加您的自定义规则。扩展命名规则允许您定义成员可见性、是否为静态等内容。

# c# - C# 通过属性名称动态访问属性值

> ID：13766198
> 
> 赞同：16
> 
> 时间：2012-12-07T15:37:55.907
> 
> 标签：c#, dynamic, lambda

我要解决的问题是如何编写一个将属性名称作为字符串接收的方法，并返回分配给所述属性的值。

我的模型类声明类似于：

```
public class Foo
{
    public int FooId
    public int param1
    public double param2
} 
```

在我的方法中，我希望做类似的事情

```
var property = GetProperty("param1)
var property2 = GetProperty("param2") 
```

我目前正在尝试通过使用诸如

```
public dynamic GetProperty(string _propertyName)
    {
        var currentVariables = m_context.Foo.OrderByDescending(x => x.FooId).FirstOrDefault();

        var parameter = Expression.Parameter(typeof(Foo), "Foo");
        var property = Expression.Property(parameter, _propertyName);

        var lambda = Expression.Lambda<Func<GlobalVariableSet, bool>>(parameter);

    } 
```

这种方法是否正确，如果是，是否可以将其作为动态类型返回？

答案是正确的，这太复杂了。现在的解决方案是：

```
public dynamic GetProperty(string _propertyName)
{
    var currentVariables = m_context.Foo.OrderByDescending(g => g.FooId).FirstOrDefault();

    return currentVariables.GetType().GetProperty(_propertyName).GetValue(currentVariables, null);
} 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-12-07T15:41:30.270

```
public static object ReflectPropertyValue(object source, string property)
{
     return source.GetType().GetProperty(property).GetValue(source, null);
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-07T15:43:30.413

你提供的样本太过分了。

您正在寻找的方法：

```
public static object GetPropValue( object target, string propName )
 {
     return target.GetType().GetProperty( propName ).GetValue(target, null);
 } 
```

但是使用“var”和“dynamic”以及“Expression”和“Lambda”......从现在起 6 个月后，你一定会迷失在这段代码中。坚持使用更简单的书写方式

# java - 将 ActionListener 添加到自定义组件

> ID：13766204
> 
> 赞同：0
> 
> 时间：2012-12-07T15:38:21.383
> 
> 标签：java, swing, jbutton

我有一个自定义组件（其中`extends JPanel`）。

它看起来像这样：

![自定义组件](../Images/01915e180295da1e36f30cb5eedb5e6d.png)

我的问题是：当我在另一个中使用它时`JFrame`，我如何添加一个`ActionListener`，以便当我单击任何按钮时它会执行代码`actionPerformed`？

我尝试添加一个`MouseListener`，但它没有工作。

编辑：对不起，我对组件不是很清楚：它由两个`JButtons`（“-”和“+”）和一个`JTextField`. 当用户点击其中任何一个时，中间的数字会增加或减少。所有这 3 个组件都放在一个`JPanel`.

编辑2：这是源代码：

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.Font;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.SwingConstants;
import javax.swing.border.EtchedBorder;

@SuppressWarnings("serial")
public class ZoomSelector extends JPanel {
    protected JButton btnDecrement;
    protected JTextField txtNumber;
    protected JButton btnIncrement;

    private String currentValue, previousValue;

    public ZoomSelector() {
        setBorder(new EtchedBorder(EtchedBorder.LOWERED, null, null));
        initGUI();

        txtNumber.setText("12");
        currentValue = "12";

        setSize(new Dimension(125, 26));
        validate();
    }

    public boolean hasChanged() {
        if(currentValue.equals(previousValue)) {
            return true;
        }
        else {
            return false;
        }
    }

    public String getText() {
        return txtNumber.getText();
    }

    public void reset() {
        previousValue = txtNumber.getText();
        txtNumber.setText("12");
        currentValue = "12";
    }

    @Override
    public void setEnabled(boolean e) {
        btnDecrement.setEnabled(e);
        txtNumber.setEnabled(e);
        btnIncrement.setEnabled(e);
    }

    public void increment() {
        previousValue = txtNumber.getText();
        int number = Integer.parseInt(txtNumber.getText());
        if(number < 20) {
            number++;
            txtNumber.setText("" + number);
            currentValue = "" + number;
        }       
    }

    public void decrement() {
        previousValue = txtNumber.getText();
        int number = Integer.parseInt(txtNumber.getText());
        if(number > 0) {
            number--;
            txtNumber.setText("" + number);
            currentValue = "" + number;     
        }       
    }

    private void initGUI() {

        btnDecrement = new JButton("-");
        btnDecrement.setFont(new Font("Tahoma", Font.BOLD, 14));
        btnDecrement.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                decrement();
            }
        });
        setLayout(new BorderLayout(0, 0));
        add(btnDecrement, BorderLayout.WEST);

        txtNumber = new JTextField();
        txtNumber.setHorizontalAlignment(SwingConstants.CENTER);
        txtNumber.setText("0");
        txtNumber.setEditable(false);
        add(txtNumber, BorderLayout.CENTER);
        txtNumber.setColumns(2);

        btnIncrement = new JButton("+");
        btnIncrement.setFont(new Font("Tahoma", Font.BOLD, 14));
        btnIncrement.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent arg0) {
                increment();
            }
        });
        add(btnIncrement, BorderLayout.EAST);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T04:17:05.130

我在这里向自定义 Swing 组件添加了一个动作侦听器：[JCropFrame](http://java-articles.info/articles/?p=76)

您必须创建自己的`EventListener`并扩展`AWTEvent`和 `AWTEventMulticaster`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T23:43:39.083

只需使用 JSpinner。这是向上或向下移动值的简单方法。Java 教程示例： http: [//docs.oracle.com/javase/tutorialJWS/uiswing/components/ex6/SliderDemo.jnlp](http://docs.oracle.com/javase/tutorialJWS/uiswing/components/ex6/SliderDemo.jnlp)

# java - Java中数组元素的高效交换

> ID：13766209
> 
> 赞同：68
> 
> 时间：2012-12-07T15:38:34.660
> 
> 标签：java, algorithm, swap

我想知道是否有比这样做更有效的方法来交换数组中的两个元素：

```
String temp = arr[1];
arr[1] = arr[2];
arr[2] = temp; 
```

好吧，这显然还不错，甚至是错误的，但是我需要经常交换，所以我很感兴趣是否有任何库或提供更有效方法的东西？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-12-07T15:40:30.117

没有。你可以有一个函数来使它在你使用它的每个地方都更简洁，但最终，所做的工作将是相同的（加上函数调用的开销，直到/除非 HotSpot 将其移入内联 - 以帮助它，制作函数`static final`）。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-12-07T15:59:26.913

这应该使它无缝：

```
public static final <T> void swap (T[] a, int i, int j) {
  T t = a[i];
  a[i] = a[j];
  a[j] = t;
}

public static final <T> void swap (List<T> l, int i, int j) {
  Collections.<T>swap(l, i, j);
}

private void test() {
  String [] a = {"Hello", "Goodbye"};
  swap(a, 0, 1);
  System.out.println("a:"+Arrays.toString(a));
  List<String> l = new ArrayList<String>(Arrays.asList(a));
  swap(l, 0, 1);
  System.out.println("l:"+l);
} 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2017-01-28T15:13:46.867

如果您正在交换数字并且想要一种简洁的方式来编写代码，而无需创建单独的函数或使用令人困惑的 XOR hack，我发现这更容易理解，而且它也是一个单行。

```
public static void swap(int[] arr, int i, int j) {
    arr[i] = (arr[i] + arr[j]) - (arr[j] = arr[i]);
} 
```

我从一些原始基准中看到的是，性能差异也基本上可以忽略不计。

这是在不使用临时变量的情况下交换数组元素的标准方法之一，至少对于整数来说是这样。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-12-07T15:41:46.790

如果你想交换字符串。这已经是做到这一点的有效方法。

但是，如果要交换整数，可以使用 XOR 更有效地交换两个整数，如下所示：

```
int a = 1; int b = 2; a ^= b; b ^= a; a ^= b; 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-09-20T05:40:18.820

使用`Collections.swap`和`Arrays.asList`：

```
Collections.swap(Arrays.asList(arr), i, j); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-01-21T00:44:14.580

就地交换（以防您已经不知道）可以通过不创建临时变量来节省一些空间。

```
arr[i] = arr[i] + arr[j];
arr[j] = arr[i] - arr[j];
arr[i] = arr[i] - arr[j]; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-08-11T15:29:34.640

尝试这个：

```
 int lowIndex = 0;
    int highIndex = elements.length-1;

    while(lowIndex < highIndex) {
        T lowVal = elements[lowIndex];
        T highVal = elements[highIndex];
        elements[lowIndex] = highVal;
        elements[highIndex] = lowVal;

        lowIndex += 1;
        highIndex -=1;
    } 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-08-02T01:09:54.243

派对迟到了（我很抱歉），但可以实现比此处提供的更通用的解决方案（将适用于原语和非原语）：

```
public static void swap(final Object array, final int i, final int j) {
    final Object atI = Array.get(array, i);
    Array.set(array, i, Array.get(array, j));
    Array.set(array, j, atI);
} 
```

你失去了编译时的安全性，但它应该可以解决问题。

注意 I：如果给定是，你会得到一个`NullPointerException`如果给定不是数组，如果任一索引对给定无效，*你*会得到一个。`array``null``IllegalArgumentException``array`*`ArrayIndexOutOfBoundsException``array`*

 *注意二：为*每个*数组类型（`Object[]`和所有原始类型）设置单独的方法会更好（使用这里给出的其他方法），因为这需要一些装箱/拆箱。但它也需要更多的代码来编写/维护。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-06-15T21:49:39.277

对象和原始类型的解决方案：

```
public static final <T> void swap(final T[] arr, final int i, final int j) {
    T tmp = arr[i];
    arr[i] = arr[j];
    arr[j] = tmp;
}
public static final void swap(final boolean[] arr, final int i, final int j) {
    boolean tmp = arr[i];
    arr[i] = arr[j];
    arr[j] = tmp;
}
public static final void swap(final byte[] arr, final int i, final int j) {
    byte tmp = arr[i];
    arr[i] = arr[j];
    arr[j] = tmp;
}
public static final void swap(final short[] arr, final int i, final int j) {
    short tmp = arr[i];
    arr[i] = arr[j];
    arr[j] = tmp;
}
public static final void swap(final int[] arr, final int i, final int j) {
    int tmp = arr[i];
    arr[i] = arr[j];
    arr[j] = tmp;
}
public static final void swap(final long[] arr, final int i, final int j) {
    long tmp = arr[i];
    arr[i] = arr[j];
    arr[j] = tmp;
}
public static final void swap(final char[] arr, final int i, final int j) {
    char tmp = arr[i];
    arr[i] = arr[j];
    arr[j] = tmp;
}
public static final void swap(final float[] arr, final int i, final int j) {
    float tmp = arr[i];
    arr[i] = arr[j];
    arr[j] = tmp;
}
public static final void swap(final double[] arr, final int i, final int j) {
    double tmp = arr[i];
    arr[i] = arr[j];
    arr[j] = tmp;
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-09-22T10:03:47.460

```
public static final void swap (int[] a, int i, int j) {
    a[i] = a[i] + a[j];
    a[j] = a[i] - a[j];
    a[i] = a[i] - a[j];
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-08-11T01:34:28.000

这只是“hack”风格的方法：

```
int d[][] = new int[n][n];

static int swap(int a, int b) {
  return a;
}
...

in main class --> 

d[i][j + 1] = swap(d[i][j], d[i][j] = d[i][j + 1]) 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-04-24T19:14:22.057

首先你不应该写`for (int k = 0; k **<** data.length **- 1**; k++)`，因为 < 是直到 k 小于长度 -1 然后循环将运行到数组中的最后一个位置并且不会得到数组中的最后一个位置；所以你可以通过两种方式修复它：1：`for (int k = 0; k <= data.length - 1; k++)` 2：`for (int k = 0; k < data.length; k++)`然后它会正常工作！并交换您可以使用：将其中一个 int 保留在另一个地方，然后替换

```
int x = data[k]
data[k] = data[data.length - 1]
data[data.length - 1] = x; 
```

因为你不想失去一个 int 的！！

* * *

## 回答 #13

> 赞同：-3
> 
> 时间：2020-02-12T03:00:42.250

```
public class SwapElements {

public static void main(String[] args) {

    int[] arr1 = new int[5];
    int[] arr2 = {10,20,30,40};

    System.out.println("arr1 Before Swapping " + Arrays.toString(arr1));
    System.out.println("arr2 Before Swapping " + Arrays.toString(arr2));

    int temp[];
    arr1[3] = 5;
    arr1[0] = 2;
    arr1[1] = 3;
    arr1[2] = 6;
    arr1[4] = 10;

    temp = arr1;
    arr1 = arr2;
    arr2 = temp;
    System.out.println("arr1 after Swapping " + Arrays.toString(arr1));
    System.out.println("arr2 after Swapping " + Arrays.toString(arr2));
} 
```

}*

# cakephp - cakephp + ckeditor ....如何绑定keyup事件

> ID：13766213
> 
> 赞同：-1
> 
> 时间：2012-12-07T15:38:56.577
> 
> 标签：cakephp, ckeditor, cakephp-2.0

我想将 ckeditor 中的数据立即存储到使用 ajax 的文件中。我正在使用 cakephp，我的视图文件中有以下代码来测试 ckeditor 是否成功绑定到 js 事件。

```
 <?php
echo $this->Html->script('ckeditor/ckeditor');
echo $this->Form->create('Post', array('action' => 'edit'));
echo $this->Form->input('title',array('id'=>'posttitle'));
echo $this->Form->input('id', array('value'=>$originalid,'type' => 'hidden'));
echo $this->Form->input('username', array('value'=>$creator,'type' => 'hidden'));
echo $this->Form->textarea('body',array('class'=>'ckeditor','id'=>'postbody'));
echo $this->Form->end('Done Editing');

$this->Js->get('#postbody');
echo $this->Js->event('click','alert("hi")');
    ?> 
```

问题是当我将它与标题输入绑定时代码工作正常，但它不适用于包含ckeditor的textarea。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T16:34:55.783

我有点困惑，部分原因是 CakePHP JS 的东西。您想通过 keyup 事件实现什么目标？您想在发生任何更改时始终保存，还是想在每次编辑器更改时更新 textarea 内容或...？在我看来，有比这更好的方法来做这两种方法，但做什么很大程度上取决于你想要实现的目标（一些更改可能在没有 keyup 事件的情况下发生，例如考虑 undo/redo/bold/add 表）。

在 CKE 中，您不会将事件附加到底层元素，而是它有自己的事件模型，非常方便。在原生 JS 中，您会像这样收听关键事件：

```
editor.on('key', function(e)
{
    console.log("Ponies");
}); 
```

会有`editor`你的 ckeditor 实例。点击事件非常相似。

# model-view-controller - 在表单提交上多次调用相同的操作

> ID：13766214
> 
> 赞同：0
> 
> 时间：2012-12-07T15:38:57.437
> 
> 标签：model-view-controller, struts2

我需要在同一个方法调用中从操作 B 多次调用操作 A。有没有办法实现它？我可以提供一些背景。我有一个使用 struts 内部实现的产品特定 API，并且该操作只能接受一个 id 和一个文件对象。但是，我需要为多个 id 存储同一个文件。那么我是否可以使用可以接收多个 id 的自定义操作类，并在循环中调用产品附带的操作类。另外，我可以通过拦截器将表单数据传递给下一个动作类吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:53:36.323

您可以通过不同的操作名称在表单提交上多次调用相同的操作类，例如同一用户操作类上的 deleteUser、editUser、addUser。

希望，它会实现你的目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T12:21:54.260

我还没有测试它，可能没有时间尝试它。但我认为您可以尝试这种方式多次调用单个操作。在 struts.xml 中使用重定向成功到相同的操作名称。示例

```
<action name="onSubmit" class="com.example.SubmitAction" method="upload">
<result name="success" type="redirect">onSubmit</result>
<result name="error">Success.jsp</result>
</action> 
```

或者

```
<action name="onSubmit" class="com.example.SubmitAction" method="upload">
<result name="success" type="redirect">onSubmitRedirect</result>
<result name="error">Success.jsp</result>
</action>

<action name="onSubmitRedirect">
<result name="success" type="redirect">onSubmit</result>
</action> 
```

您可以使用错误条件来终止循环。试试吧，我会很高兴知道它的结果。

# cordova - phonegap 条码扫描器 iOS6 屏幕方向

> ID：13766217
> 
> 赞同：3
> 
> 时间：2012-12-07T15:39:10.460
> 
> 标签：cordova, barcode, barcode-scanner

这是我在这里的第一个问题。所以请原谅我，如果它的格式不完美。

## 目标

通过 Dreamweaver 使用 Phonegap 构建的本机应用程序包括条形码扫描仪插件 [https://github.com/phonegap/phonegap-plugins/tree/master/iPhone/BarcodeScanner](https://github.com/phonegap/phonegap-plugins/tree/master/iPhone/BarcodeScanner)

## 问题

我尝试过的所有 iOS 版本都以纵向模式显示条码扫描器，预计 iOS 6。它显示条码扫描器插件的横向方向。如果这是问题，我可以处理它，但它只会扫描，当我把它放在纵向时。

我整天在谷歌上搜索，没有任何解决方案。

这是我的 config.xml 文件：

```
<feature name="http://api.phonegap.com/1.0/device" />

<preference name="phonegap-version"     value="2.2.0" />
<preference name="orientation"          value="portrait" />
<preference name="target-device"        value="universal" />
<preference name="fullscreen"           value="false" />
<preference name="webviewbounce"            value="false" />
<preference name="ios-statusbarstyle" value="black-opaque" />

<gap:plugin name="BarcodeScanner" />
<gap:plugin name="ChildBrowser" />
<access origin="*" /> 
```

我想要一个在所有操作系统中都面向纵向的条码扫描仪。这个问题有什么解决办法吗？

## 编辑：找到解决方案

至少，我在 xcode 中加载了所有数据。下载了最新版本的条码扫描器插件。在xcode中设置它，编译它并且它工作。

问题似乎是在通过 Dreamweaver/Phonegap Webseite 创建构建时，Phonegap 使用的条形码扫描器插件的过时版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T19:01:24.867

请更新`AppDelegate.m`文件中的以下代码

添加这一行：

```
[self.window setRootViewController:self.viewController]; 
```

评论此行（或）删除此行：

```
//[self.window addSubview:self.viewController.view]; 
```

# bash - bash脚本中的执行顺序

> ID：13766221
> 
> 赞同：0
> 
> 时间：2012-12-07T15:39:22.743
> 
> 标签：bash, sequence

这些 bash 命令按什么顺序执行？第四行是否可能在第一行或第二行完成之前开始？

```
find $LOCAL_TMP -type f -exec grep -l 'operationType="ACTIVATION"' {} ';' | xargs grep -l 'serviceCode="ACC-FTTS' | xargs -ICrTopoIpnatif mmv CrTopoIpnatif $LOCAL_TOPO

find $LOCAL_TMP -type f -exec grep -l 'operationType="DEACTIVATION"' {} ';' | xargs grep -l 'serviceCode="ACC-FTTS' | xargs -ICrTopoIpnatif mmv CrTopoIpnatif $LOCAL_TOPO

echo "mmv $LOCAL_TMP/**/*.xml $REP_LOCAL" >> $LOGFILE
mmv "$LOCAL_TMP/**/*.xml" "$REP_LOCAL" >> $LOGFILE 
```

我在问，因为我在 $REP_LOCAL 中找到了文件（这是另一个脚本的池目录，文件显示在脚本的日志中），而不是在 $LOCAL_TOPO 中（脚本日志中没有任何内容）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T15:41:43.903

是顺序的。一切都按顺序发生。如果您使用以下标头运行脚本

```
#!/bin/bash -x 
```

然后你会看到每个命令的执行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T15:50:30.037

只要您在前台执行所有命令，这些命令就会按照您在脚本中指定的顺序执行。

```
command1
command2
command3 
```

一个接一个地被执行。

这里

```
command1 &
command2
command3 
```

如果 command1 比其他两个需要更多时间来完成，那么command2 和 command3*可能会在 command1 之前完成。*这是因为 command1 和 command2 以及后来的 command3 并行运行，而在第一个示例中，所有命令都按顺序在前台运行。

# jquery - 破折号 (-) 在 html 中的作用是什么？

> ID：13766232
> 
> 赞同：-2
> 
> 时间：2012-12-07T15:40:11.100
> 
> 标签：jquery, html, ajax, identifier

我遇到了问题（请参阅 2 个屏幕截图）：

# 1

![](../Images/9178b1ef67a50e9887c8868969716f05.png)

# 2

![](../Images/77c31fc6ff8478a7cd7219595f1a0e00.png)

问题是“语法错误：标识符在数字文字之后立即开始”

我试图通过 ajax 脚本发送的这些数据是 html，对吗？因为它说数据类型：html。

什么是标识符？为什么问题出现在 -4d 而不是前面的 -50？

如果我删除破折号，就没有问题。如果我在字符串周围添加引号，则没有问题。但是我不能使用这两种解决方案。我需要原样的字符串。

帮助！这一直让我发疯。似乎无法提出解决方案。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T15:42:03.623

JavaScript 中的字符串值应该用引号括起来：

```
// --------------------v                                    v---
echo 'emailAcceptLink: "' . $_SESSION['emailAcceptLink'] . '",'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T15:43:57.223

用“”包围你的变量:)所以

```
echo 'email: "'.$email.'"'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T15:44:46.667

您需要在 emailAcceptLink 和 emailAccesLinkOrgId 的值周围添加引号（单引号/双引号）。

# linux - 在一个非常大的文件的第一行进行多次替换

> ID：13766237
> 
> 赞同：1
> 
> 时间：2012-12-07T15:40:34.177
> 
> 标签：linux, replace, sed, awk, grep

我有一个巨大的文件，其第一行是：

> CHR开始末端链ref_context repeat_masked s1_smpl_context s1_c_count s1_ct_count s1_non_ct_count s1_m％s1_score s1_snp s1_indels s2_smpl_context s2_c_count s2_ct_count s2_non_ct_count s2_m％s2_score s2_snp s2_indels s3_smpl_context s3_c_count s3_ct_count s3_non_ct_count s3_m％s3_score s3_snp s3_indels ...

高达 s8。

我想用 to 替换 to 的所有实例，然后用to`s1`替换 to的所有实例。最好用或或其他方式做到这一点？`s4``L1``L4``s5``s8``W1``W4``grep``awk`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T15:46:05.860

仅在文件的第一行替换为`s[1-4]`和`L[1-4]`： `s[5-8]``W[1-4]`

```
sed -Ee '1s/s([1-4])/L\1/g' -e '1s/s([5-8])/W\1/g' -e '1y/5678/1234/' -e '1q' file 
```

演示：

> $猫文件
> 
> 字符开始端链ref_context repeat_masked s1_smpl_context s1_c_count s1_ct_count s1_non_ct_count s1_m％s1_score s1_snp s1_indels s2_smpl_context s2_c_count s2_ct_count s2_non_ct_count s2_m％s2_score s2_snp s2_indels s3_smpl_context s3_c_count s3_ct_count s3_non_ct_count s3_m％s3_score s3_snp s3_indels s4_Smpl_context s4_c_count s4_ct_count s4_non_ct_count s4_m％s4_score s4_snp s4_indels s5_smpl_context s5_c_count s5_ct_count s5_non_ct_count s5_m％s5_score s5_snp s5_indels s6_smpl_context s6_c_count s6_ct_count s6_non_ct_count s6_m％s6_score s6_snp s6_indels s7_Smpl_context s7_c_count s7_ct_count s7_non_ct_count s7_m％s7_score s7_snp s7_indels s8_smpl_context s8_c_count s8_ct_count s8_non_ct_count s8_m％s8_score s8_snp s8_indels
> 
> s1_line_2
> 
> s3_line_3
> 
> s8_line_4
> 
> $ sed -Ee '1s/s([1-4])/L\1/g' -e '1s/s([5-8])/W\1/g' -e '1y/5678/1234 /' -e '1q' 文件
> 
> 字符开始端链ref_context repeat_masked L1_smpl_context L1_c_count L1_ct_count L1_non_ct_count L1_m％L1_score L1_snp L1_indels L2_smpl_context L2_c_count L2_ct_count L2_non_ct_count L2_m％L2_score L2_snp L2_indels L3_smpl_context L3_c_count L3_ct_count L3_non_ct_count L3_m％L3_score L3_snp L3_indels L4_Smpl_context L4_c_count L4_ct_count L4_non_ct_count L4_m％L4_score L4_snp L4_indels W1_smpl_context W1_c_count W1_ct_count W1_non_ct_count W1_m％W1_score W1_snp W1_indels W2_smpl_context W2_c_count W2_ct_count W2_non_ct_count W2_m％W2_score W2_snp W2_indels W3_Smpl_context W3_c_count W3_ct_count W3_non_ct_count W3_m％W3_score W3_snp W3_indels W4_smpl_context W4_c_count W4_ct_count W4_non_ct_count W4_m％W4_score W4_snp W4_indels

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T13:11:26.707

由于您的任何替换都不会更改第一行的长度，因此您还可以选择直接修改原始文件。我认为您不能使用任何常用的 shell 命令来执行此操作，但您可以使用 Python 等编写程序来执行此操作。

但是，如果文件太大以至于您无法制作临时副本，我只会考虑此选项。

```
#!/usr/bin/env python

import os

# On windows, you need to use os.O_RDWR | os.O_BINARY
fd = os.open('modex', os.O_RDWR)
f = os.fdopen(fd)
f.seek(0)
line = f.readline()
replacements = [("s%s" % x, "L%s" % x) for x in range(1,5)] \
        + [("s%s" % (x+4), "W%s" % x) for x in range(1,5)]
for (s,r) in replacements:
    line = line.replace(s, r)
# We cannot use python file objects here, because f.write() _always_ appends,
# regardless of the seek position. So we use the raw object here.
# Mixing raw IO and python IO should be done with care, however we should be
# ok here, as we did not write anything yet.
os.lseek(fd, 0, os.SEEK_SET)
os.write(fd, line)
f.close() 
```

# php - 回调函数的xss过滤

> ID：13766242
> 
> 赞同：0
> 
> 时间：2012-12-07T15:40:58.260
> 
> 标签：php, codeigniter

据[我之前的帖子](https://stackoverflow.com/questions/13765675/codeigniter-xss-validation/13766074#13766074)了解到，调用后`xss_clean`会过滤。问题是它还会在回调函数中过滤吗？`$this->input->post('text_url')``$this->form_validation->run()``$this->input->post('textarea_content')`

谢谢

```
$this->form_validation->set_rules('text_url', 'Website link', 'trim|xss_clean|callback_minimum_fields[' . $this->input->post('textarea_content') . ']');

$this->form_validation->run();

//Filtered
$text_url = $this->input->post('text_url');

//Filtered as well?
$textarea_content = $this->input->post('textarea_content'); 
```

**打回来**

```
public function minimum_fields($url, $content)
{
    if ($url == '' && $content == '')
    {
        $this->form_validation->set_message('minimum_fields', 'Please provide info for at least one of these: "Website link" and "Content".');
        return false;
    }

    return true;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T15:48:41.200

```
//Filtered as well?
$textarea_content = $this->input->post('textarea_content'); 
```

不，您没有在表单验证中设置“准备”规则。实际上，您根本没有验证该`textarea_content`字段。

除此之外，您在设置规则时还没有运行表单验证，因此将任何 POST 数据传递给回调函数将是原始数据。

将这样的帖子数据传递到此处的回调中，其中规则只是字符串，非常危险并且可能会破坏您的脚本。考虑：

```
$_POST['textarea_content'] = ']|var_dump|exit|some_nonsense[';

$this->form_validation->set_rules(
    'text_url',
    'Website link',
    'callback_minimum_fields[' . $this->input->post('textarea_content') . ']'
);

// Produces this rule:
// callback_minimum_fields[]|var_dump|exit|some_nonsense[] 
```

这些“规则”将被注入到您的表单验证规则中，因为在这种情况下，它只是一个字符串。让您的回调直接读取 postdata 或采取其他方法可能会更好，但这非常不安全。即使你先 xss_clean 它也没关系。

再次，我敦促您花更多时间了解 XSS 是什么，然后确定在这种情况下担心是否有意义。XSS 仅发生在*output*上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T02:13:33.187

因此，显而易见的事情当然是选择一个字段，将其设为必填，然后将 required 放入验证中。但是，如果您所说的是 - 需要这些字段中的一个或另一个 - 您也可以在字段验证后将其作为单独的检查。

从可用性的角度来看，这是有道理的 - 每个字段都会进行正常验证。错误消息与该字段相关联。如果您的要求涉及多个字段 - 那么该消息应单独显示。

这里是 XSS 清理的简​​单 CI 提示，只需使用 TRUE 即可：

```
// adding TRUE means we are filtered
$text_url = $this->input->post('text_url', TRUE);
$textarea_content = $this->input->post('textarea_content', TRUE);

 // check if both fields came back blank
if( $text_url == '' && $textarea_content == '' ) 
{
// validation failed, show the form again, make your own message to pass to view
}
else
{
// its all good
} 
```

# ios - 用正弦波调制对比度梯度以生成正弦光栅

> ID：13766245
> 
> 赞同：2
> 
> 时间：2012-12-07T15:41:09.807
> 
> 标签：ios, ipad, graphics, drawing

我需要在 iPad 上生成与此类似的图像输出（来自 Wikipedia）：

[http://commons.wikimedia.org/wiki/File:SinVibr.png](http://commons.wikimedia.org/wiki/File:SinVibr.png)

我在 MATLAB 中做了类似的光栅，在 x 轴上使用带有正弦波的向量并在 y 轴上减小其幅度（对于每一行）

出于可用性原因，我在 iOS 中这样做。

使用简单的循环在 iOS 上重新实现它，然后将其呈现为图像将起作用。

然而，这似乎很不优雅，因为除了呈现图像之外，我不会使用任何绘图 API。特别是因为我可能需要快速更新图像（在可能的未来版本中至少 30 fps 或更高）

我看过 CoreGraphics 但对我来说如何实现它并不明显。我应该研究OpenGL吗？你能帮助我吗？

# asp.net-mvc-3 - getJSON 返回 null MVC3 - 4

> ID：13766246
> 
> 赞同：0
> 
> 时间：2012-12-07T15:41:21.863
> 
> 标签：asp.net-mvc-3, jquery, asp.net-mvc-4, getjson

因此，我在从我的操作中获取 json 时遇到问题，并希望有人能指出我的错误。

所以，这是我的 jQuery：

```
$("#ProductSelect").change(function () {
    $.getJSON('Admin/GetProduct?id=' + $(this).val(), function (data) {
        var json = $.parseJSON(data);
        alert(json);
    });
}); 
```

这是它调用的操作：

```
[HttpGet]
    public JsonResult GetProduct(int id)
    {
        var product = new Product();
        product.GetProductById(id);
        return this.Json(product, JsonRequestBehavior.AllowGet);
    } 
```

JS 中的警报一直显示为空。没有 JS 错误（使用 Firebug）。在 Action 上使用断点，我可以看到 Product 已正确填充。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T04:28:51.157

显然你的控制器使用了一个刚刚初始化的对象，没有任何信息。您是否忘记使用数据库对象然后找到该 id 作为主键？像这样：

```
[HttpGet]
    public JsonResult GetProduct(int id)
    {
        //private DataContext db
        return Json(db.GetProductById(id), JsonRequestBehavior.AllowGet);
    } 
```

# java - 在 WebSphere 中注入 spring 资源失败

> ID：13766252
> 
> 赞同：2
> 
> 时间：2012-12-07T15:41:42.893
> 
> 标签：java, spring, websphere, websphere-7, autowired

我一直在尝试将哈希图注入到一个类中。根据这篇文章：[Auto-wiring a List using util schema 给出了 NoSuchBeanDefinitionException](https://stackoverflow.com/questions/1363310/auto-wiring-a-list-using-util-schema-gives-nosuchbeandefinitionexception)我应该使用`@Resource`而不是`@Autowire`地图。

我的代码如下所示：

```
@Configurable
public class MyClass
{   

    @Resource(name="myMap")
    private Map<String,String> myMap = new HashMap<String, String>(); 
```

我的配置如下所示：

```
<context:annotation-config/>
<context:component-scan base-package="com.MyClass"/>

<util:map id="myMap" 
            key-type="java.lang.String"
            value-type="java.lang.String">
    <entry key="k1" value="v1"/>
    <entry key="k2" value="v2"/>
</util:map> 
```

应用程序启动正常，但是当我尝试运行引用 的代码时`MyClass`，我收到以下 WebSphere 错误：

```
CNTR0035E: EJB 容器捕获 com.ibm.wsspi.injectionengine.InjectionException：无法处理元数据的绑定
    在 com.ibm.ws.injectionengine.InjectionEngineImpl.processBindings(InjectionEngineImpl.java:529)
    在 com.ibm.ws.injectionengine.InjectionEngineImpl.processInjectionMetaData（InjectionEngineImpl.java:322）
    在 com.ibm.ws.util.ComponentNameSpaceHelper.populateJavaNameSpace(ComponentNameSpaceHelper.java:806)
...
原因：com.ibm.wsspi.injectionengine.InjectionException: CWNEN0044E: 找不到为 MyService 组件定义的以下资源引用 [myMap] 的资源引用绑定。
    在 com.ibm.wsspi.injectionengine.InjectionProcessor.collectInjectionNBindingData（InjectionProcessor.java:1042）
    在 com.ibm.ws.injectionengine.InjectionEngineImpl.processBindings(InjectionEngineImpl.java:516)
    ... 52 更多
 并抛出 com.ibm.ejs.container.ContainerException: 无法初始化 BeanMetaData 实例；嵌套异常是：
    com.ibm.wsspi.injectionengine.InjectionException：无法处理元数据的绑定。

```

有什么方法可以将地图注入我在 WebSphere 中的类中？

（使用 Spring 2.5、WebSphere 7）

* * *

早些时候，我尝试使用以下代码按名称自动装配：

```
@Configurable(autowire=Autowire.BY_NAME, preConstruction=true)
public class MyClass
{   

@Qualifier("myMap")
@Autowired(required=true)
    private Map<String,String> myMap = new HashMap<String, String>(); 
```

并使用此配置：

```
<context:annotation-config/>
<context:component-scan base-package="com.MyClass"/>

<util:map id="myMap" 
            key-type="java.lang.String"
            value-type="java.lang.String">
    <entry key="k1" value="v1"/>
    <entry key="k2" value="v2"/>
</util:map> 
```

结果是我试图自动装配的字段为空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:03:52.553

似乎 autowire byType 或 byName 有效..你试过..？？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-31T06:58:35.077

我能够通过添加让我的应用程序再次部署

忽略扫描包：foo.myapp

（用你的基础包替换 foo.myapp ；））

但是，这感觉更像是一种解决方法。另一方面，这会稍微减少应用程序的启动时间。

# delphi - Delphi冻结窗体关闭与自定义组件

> ID：13766255
> 
> 赞同：2
> 
> 时间：2012-12-07T15:41:46.280
> 
> 标签：delphi, delphi-xe, graphics32

我开发了一个组件来实现基于[Graphics32](http://graphics32.org/wiki/)的 ImgView32 的平移和缩放功能。可以将组件[放在 TImgView32 旁边](http://graphics32.org/documentation/Docs/Units/GR32_Image/Classes/TImgView32/_Body.htm)，设置我的组件的 Image 视图属性，一切都很好，并且按预期工作。但是，一旦我尝试关闭托管我的组件的表单和 ImgView32，Delphi IDE 就会冻结。我的第一个想法是仍然链接到我的组件的 ImgView32 在我的组件之前被销毁，所以我实现了 Delphi 标准通知机制。问题仍然存在。这是我的组件的源代码。该组件包含在运行时包中，而另一个设计时包正在使用运行时包并注册该组件。

更新，作为 Rob 有用的调试技巧的结果：事实证明，组件在对 Notification 方法的无休止调用中挂起。也许那是对某人的暗示。

```
unit MJImgView32PanZoom;

interface

uses Classes, Controls, Gr32, GR32_Image, GR32_Layers;

type
  TImgView32ScaleChangeEvent = procedure( OldScale, NewScale: Double ) of object;

  TimgView32PanZoom = class(TComponent)
  private
    FEnabled: Boolean;
    FMaxZoom: Double;
    FMinZoom: Double;
    FImgView32: TImgView32;
    FZoomStep: Double;
    FOrigImgMouseMove: TImgMouseMoveEvent;
    FOrigImgMouseDown: TImgMouseEvent;
    FOrigImgMouseUp: TImgMouseEvent;
    FOrigImgMouseWheel: TMouseWheelEvent;
    FOrigImgCursor: TCursor;
    FPanMouseButton: TMouseButton;
    FLastMouseDownPos : TFloatPoint;
    FPanCursor: TCursor;
    FOnScaleChanged: TImgView32ScaleChangeEvent;
    procedure imgMouseMove(Sender: TObject; Shift: TShiftState; X, Y: Integer; Layer: TCustomLayer);
    procedure imgMouseDown(Sender: TObject; Button: TMouseButton; Shift: TShiftState; X, Y: Integer; Layer: TCustomLayer);
    procedure SetImgView32(const Value: TImgView32);
    procedure imgMouseWheel(Sender: TObject; Shift: TShiftState; WheelDelta: Integer; MousePos: TPoint; var Handled: Boolean);
    procedure imgMouseUp(Sender: TObject; Button: TMouseButton; Shift: TShiftState; X, Y: Integer; Layer: TCustomLayer);
  protected
    procedure Notification(AComponent: TComponent; Operation: TOperation); override;
  public
    destructor Destroy; override;
    constructor Create(AOwner: TComponent); override;
  published
    property Enabled: Boolean read FEnabled write FEnabled;
    property MaxZoom: Double read FMaxZoom write FMaxZoom;
    property MinZoom: Double read FMinZoom write FMinZoom;
    property PanMouseButton: TMouseButton read FPanMouseButton write FPanMouseButton;
    property PanCursor: TCursor read FPanCursor write FPanCursor;
    property ZoomStep: Double read FZoomStep write FZoomStep;
    property ImgView32: TImgView32 read FImgView32 write SetImgView32;
    property OnScaleChanged: TImgView32ScaleChangeEvent read FOnScaleChanged write FOnScaleChanged;
  end;

implementation

{ TimgView32PanZoom }

constructor TimgView32PanZoom.Create(AOwner: TComponent);
begin
  inherited;
  FimgView32 := nil;
  FEnabled := True;
  FZoomStep := 0.1;
  FMaxZoom := 5;
  FMinZoom := 0.1;
  FPanMouseButton := mbLeft;
  FEnabled := True;
  FPanCursor := crDefault;
end;

destructor TimgView32PanZoom.Destroy;
begin
  ImgView32 := nil;
  inherited;
end;

procedure TimgView32PanZoom.imgMouseDown( Sender: TObject; Button: TMouseButton; Shift: TShiftState; X, Y: Integer; Layer: TCustomLayer );
begin
  if not Enabled then
    Exit;
  if ( FPanMouseButton = mbLeft ) and not( ssLeft in Shift ) then
    Exit;
  if ( FPanMouseButton = mbRight ) and not( ssRight in Shift ) then
    Exit;
  FImgView32.Cursor := FPanCursor;
  Mouse.CursorPos := Point(Mouse.CursorPos.X+1, Mouse.CursorPos.Y);   // need to move mouse in order to make
  Mouse.CursorPos := Point(Mouse.CursorPos.X-1, Mouse.CursorPos.Y);   // cursor change visible
  with FImgView32, GetBitmapRect do
        FLastMouseDownPos := FloatPoint((X - Left) / Scale,(Y - Top) / Scale);
  if Assigned(FOrigImgMouseDown) then
    FOrigImgMouseDown(Sender, Button, Shift, X, Y, Layer);
end;

procedure TimgView32PanZoom.imgMouseUp(Sender: TObject; Button: TMouseButton; Shift: TShiftState; X, Y: Integer; Layer: TCustomLayer);
begin
  FImgView32.Cursor := FOrigImgCursor;
  if Assigned(FOrigImgMouseUp) then
    FOrigImgMouseUp(Sender, Button, Shift, X, Y, Layer);
end;

procedure TimgView32PanZoom.imgMouseMove( Sender: TObject; Shift: TShiftState; X, Y: Integer; Layer: TCustomLayer );
begin
  if not Enabled then
    Exit;
  if ( FPanMouseButton = mbLeft ) and not( ssLeft in Shift ) then
    Exit;
  if ( FPanMouseButton = mbRight ) and not( ssRight in Shift ) then
    Exit;
  with FImgView32 do
    with ControlToBitmap( Point( X, Y ) ) do
    begin
      OffsetHorz := OffsetHorz + Scale * ( X - FLastMouseDownPos.X );
      OffsetVert := OffsetVert + Scale * ( Y - FLastMouseDownPos.Y );
    end;
  if Assigned( FOrigImgMouseMove ) then
    FOrigImgMouseMove( Sender, Shift, X, Y, Layer );
end;

procedure TimgView32PanZoom.imgMouseWheel( Sender: TObject; Shift: TShiftState; WheelDelta: Integer; MousePos: TPoint; var Handled: Boolean );
var
  tmpScale: Single;
  NewHoriz, NewVert: Single;
  NewScale: Single;
begin
  if not Enabled then
    Exit;
  with FImgView32 do
  begin
    BeginUpdate;
    tmpScale := Scale;
    if WheelDelta > 0 then
      NewScale := Scale * 1.1
    else
      NewScale := Scale / 1.1;
    if NewScale > FMaxZoom then
      NewScale := FMaxZoom;
    if NewScale < FMinZoom then
      NewScale := FMinZoom;
    NewHoriz := OffsetHorz + ( tmpScale - NewScale ) * FImgView32.ControlToBitmap( FImgView32.ScreenToClient( Mouse.CursorPos ) ).X;
    NewVert := OffsetVert + ( tmpScale - NewScale ) * FImgView32.ControlToBitmap( FImgView32.ScreenToClient( Mouse.CursorPos ) ).Y;
    Scale := NewScale;
    OffsetHorz := NewHoriz;
    OffsetVert := NewVert;
    EndUpdate;
    Invalidate;
  end;
  if Assigned( FOnScaleChanged ) then
    FOnScaleChanged( tmpScale, NewScale );
  if Assigned( FOrigImgMouseWheel ) then
    FOrigImgMouseWheel( Sender, Shift, WheelDelta, MousePos, Handled );
end;

procedure TimgView32PanZoom.Notification(AComponent: TComponent; Operation: TOperation);
begin
  if (Operation = opRemove) and (AComponent = FImgView32) then
  begin
    FImgView32 := nil;
  end;
end;

procedure TimgView32PanZoom.SetImgView32(const Value: TImgView32);
begin
   if Assigned(FImgView32) then
   begin
     FImgView32.RemoveFreeNotification(Self);
     FImgView32.OnMouseMove := FOrigImgMouseMove;
     FImgView32.OnMouseDown := FOrigImgMouseDown;
     FImgView32.OnMouseWheel := FOrigImgMouseWheel;
     FImgView32.OnMouseUp := FOrigImgMouseUp;
     FImgView32.Cursor := FOrigImgCursor;
   end;

   FImgView32 := Value;
   if Assigned(FImgView32) then
   begin
     FOrigImgMouseMove := FImgView32.OnMouseMove;
     FOrigImgMouseDown := FImgView32.OnMouseDown;
     FOrigImgMouseWheel := FImgView32.OnMouseWheel;
     FOrigImgMouseUp := FImgView32.OnMouseUp;
     FOrigImgCursor := FImgView32.Cursor;
     FImgView32.OnMouseDown := imgMouseDown;
     FImgView32.OnMouseMove := imgMouseMove;
     FImgView32.OnMouseWheel := imgMouseWheel;
     FImgView32.OnMouseUp := imgMouseUp;
     FImgView32.FreeNotification(Self);
   end;
end;

end. 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-07T16:16:08.403

由于 Stack Overflow 不是个人调试服务，因此我不会太仔细地查看您的代码。相反，我将解释如何自己调试它。这样，这个答案也对其他人有用，并且问题不必因为“过于本地化”而关闭。

要调试它，在调试任何东西时，请*使用 debugger*。不过，这是设计时代码，而且您的程序甚至没有运行，那么调试器在哪里发挥作用呢？在这种情况下，运行您的代码的程序是 IDE，因此将调试器附加到 IDE。

运行 Delphi，并打开包含您的组件的包项目。设置项目选项，使“主机程序”为*delphi32.exe*，或者您的 Delphi 版本的 EXE 名称恰好是什么。

运行你的包项目。Delphi 的第二个副本将开始运行。在第二个副本中，重现您要解决的问题。（即，使 Delphi 的第二个实例挂起。）使用第一个副本调试第二个副本。暂停执行、查看调用堆栈、检查变量、设置断点，并且通常执行您通常会做的任何事情来调试问题。

你在这项工作中会有点手足无措，因为你没有内部 Delphi 代码的源代码或调试符号。但是，为了完成这项任务，最好假设您要寻找的问题无论如何都在您的代码中，因此丢失的代码应该不是太大的问题。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-07T16:58:42.317

你需要调用[`inherited`](http://docwiki.embarcadero.com/RADStudio/XE3/en/Methods#Inherited)你的[`Notification`](http://docwiki.embarcadero.com/Libraries/XE3/en/System.Classes.TComponent.Notification)方法来让控制处理控制链中发生的所有通知。因此，要修复您的无限循环（正如您所描述的冻结源），请以[`Notification`](http://docwiki.embarcadero.com/Libraries/XE3/en/System.Classes.TComponent.Notification)这种方式修改您的方法：

```
procedure TimgView32PanZoom.Notification(AComponent: TComponent; 
  Operation: TOperation);
begin
  inherited;
  if (Operation = opRemove) and (AComponent = FImgView32) then
    FImgView32 := nil;
end; 
```

# javascript - 如何删除元素内的跨度？

> ID：13766256
> 
> 赞同：3
> 
> 时间：2012-12-07T15:41:49.380
> 
> 标签：javascript, jquery, css, wrapper, unwrap

以下代码向菜单 ( `.active`) 添加和删除“活动”类它还向活动链接添加了一个跨度类`<span class="filet_menu"></span>`。

如何删除此跨度类？我试过展开，但它没有删除跨度类“展开”。

这是我的代码：

```
$("#menu a").click(function() {
  $("#menu a").each(function() {
    $(this).removeClass("active");

    //Don't work :
    //$(this).unwrap('<span class="filet_menu"></span>');
    //$(this).contents().unwrap();
    //$('(this) > .active').unwrap();
  });
  $(this).addClass("active");
  $(this).wrapInner('<span class="filet_menu"></span>');
});
```

```
.active {
  color: #32c0ce !important;
}

.filet_menu {
  border-bottom: 2px solid #32c0ce;
  padding-bottom: 2px;
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<body>
  <div id="header">
    <div id="contenu_header">
      <h1>Sébastien Gicquel</h1>
      <ul id="menu">
        <li><a id="bt_diaporama" href="#diaporama">Home</a></li>
        <li><a id="bt_presentation" href="#presentation">Présentation</a></li>
        <li><a id="bt_realisations" href="#realisations">Réalisations</a></li>
        <li><a id="bt_contact" href="#contact">Contact</a></li>
      </ul>
    </div>
    <!-- fin contenu_header -->
  </div>
  <!-- fin header -->
  <div id="page">
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T16:00:34.933

您需要先获取内容才能打开包装。而且你不需要每个循环

```
$("#menu a").click(function() {         
     $("#menu a.active").removeClass("active");
     $(this).addClass("active");
     $('span.filet_menu').contents().unwrap();// get previous span contents first and unwrap
     $(this).wrapInner('<span class="filet_menu"></span>');// this wraps current anchor's contents  
 }); 
```

[http://jsfiddle.net/syXnH/](http://jsfiddle.net/syXnH/)

或者你真的需要跨度吗？为什么不只是添加/删除类

```
$("#menu a").click(function() {
    $("#menu a.active").removeClass("active filet_menu");
    $(this).addClass('filet_menu active');
});​ 
```

[http://jsfiddle.net/HwTNz/](http://jsfiddle.net/HwTNz/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T15:48:34.513

我相信你想删除跨度，但保留跨度内的数据，所以 .remove() 对你不起作用。你可以使用这个：

```
$(this).html(
    $(this).find("span.filet_menu").html()
); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T16:06:19.203

一些改进代码的建议：

*   与其添加和删除 ，不如`<span>`在加载时为每个项目创建一次。每次修改 DOM 时，浏览器都必须执行昂贵的布局计算。您可以通过 CSS 控制它的显示，具体取决于它的父`active`类。
*   您不需要迭代每个菜单项来删除`active`类，只需使用选择器

JavaScript：

```
$("#menu a").each(function() {
    $(this).wrapInner('<span class="filet_menu"></span>');
    $(this).click(function() {
        $('#menu a.active').removeClass('active');
        $(this).addClass('active');
    });
}); 
```

CSS：

```
.active
{
    color:#32c0ce !important;
}

.active .filet_menu
{
    border-bottom: 2px solid #32c0ce;
    padding-bottom:2px;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-07T16:07:26.917

```
$(".filet_menu", this).each(function () {
   $(this).replaceWith(this.childNodes);
}); 
```

[http://jsfiddle.net/LMm28/](http://jsfiddle.net/LMm28/)

另一方面，将跨度一直保留在那里并添加/删除`.filet_menu`类可能会更容易。

# php - 为什么 PHP 的 htmlentities() 不转换 – 字符？

> ID：13766258
> 
> 赞同：2
> 
> 时间：2012-12-07T15:41:53.517
> 
> 标签：php, html-entities, html-encode

我在使用 PHP 的`htmlentities()`/`htmlspecialchars()`函数时遇到了一些问题。我正在转换的字符串包含字符 –（html 等效项是 '&oelig'），但两者`htmlentities()`都`htmlspecialchars()`没有转换此字符。

当我跑去`get_html_translation_table(HTML_ENTITIES)`查看 PHP 正在使用的转换表时，我注意到该`œ`字符丢失了，但还存在其他韧带（如`æ`( `&aelig`)）。为什么是这样？我应该以不同的方式转换 – 字符吗？

作为参考，我正在运行 PHP 5.3.14，这是来自的输出`get_html_translation_table(HTML_ENTITIES)`：

```
array(100) {
  [" "]=>
  string(6) "&nbsp;"
  ["¡"]=>
  string(7) "&iexcl;"
  ["¢"]=>
  string(6) "&cent;"
  ["£"]=>
  string(7) "&pound;"
  ["¤"]=>
  string(8) "&curren;"
  ["¥"]=>
  string(5) "&yen;"
  ["¦"]=>
  string(8) "&brvbar;"
  ["§"]=>
  string(6) "&sect;"
  ["¨"]=>
  string(5) "&uml;"
  ["©"]=>
  string(6) "&copy;"
  ["ª"]=>
  string(6) "&ordf;"
  ["«"]=>
  string(7) "&laquo;"
  ["¬"]=>
  string(5) "&not;"
  ["­"]=>
  string(5) "&shy;"
  ["®"]=>
  string(5) "&reg;"
  ["¯"]=>
  string(6) "&macr;"
  ["°"]=>
  string(5) "&deg;"
  ["±"]=>
  string(8) "&plusmn;"
  ["²"]=>
  string(6) "&sup2;"
  ["³"]=>
  string(6) "&sup3;"
  ["´"]=>
  string(7) "&acute;"
  ["µ"]=>
  string(7) "&micro;"
  ["¶"]=>
  string(6) "&para;"
  ["·"]=>
  string(8) "&middot;"
  ["¸"]=>
  string(7) "&cedil;"
  ["¹"]=>
  string(6) "&sup1;"
  ["º"]=>
  string(6) "&ordm;"
  ["»"]=>
  string(7) "&raquo;"
  ["¼"]=>
  string(8) "&frac14;"
  ["½"]=>
  string(8) "&frac12;"
  ["¾"]=>
  string(8) "&frac34;"
  ["¿"]=>
  string(8) "&iquest;"
  ["À"]=>
  string(8) "&Agrave;"
  ["Á"]=>
  string(8) "&Aacute;"
  ["Â"]=>
  string(7) "&Acirc;"
  ["Ã"]=>
  string(8) "&Atilde;"
  ["Ä"]=>
  string(6) "&Auml;"
  ["Å"]=>
  string(7) "&Aring;"
  ["Æ"]=>
  string(7) "&AElig;"
  ["Ç"]=>
  string(8) "&Ccedil;"
  ["È"]=>
  string(8) "&Egrave;"
  ["É"]=>
  string(8) "&Eacute;"
  ["Ê"]=>
  string(7) "&Ecirc;"
  ["Ë"]=>
  string(6) "&Euml;"
  ["Ì"]=>
  string(8) "&Igrave;"
  ["Í"]=>
  string(8) "&Iacute;"
  ["Î"]=>
  string(7) "&Icirc;"
  ["Ï"]=>
  string(6) "&Iuml;"
  ["Ð"]=>
  string(5) "&ETH;"
  ["Ñ"]=>
  string(8) "&Ntilde;"
  ["Ò"]=>
  string(8) "&Ograve;"
  ["Ó"]=>
  string(8) "&Oacute;"
  ["Ô"]=>
  string(7) "&Ocirc;"
  ["Õ"]=>
  string(8) "&Otilde;"
  ["Ö"]=>
  string(6) "&Ouml;"
  ["×"]=>
  string(7) "&times;"
  ["Ø"]=>
  string(8) "&Oslash;"
  ["Ù"]=>
  string(8) "&Ugrave;"
  ["Ú"]=>
  string(8) "&Uacute;"
  ["Û"]=>
  string(7) "&Ucirc;"
  ["Ü"]=>
  string(6) "&Uuml;"
  ["Ý"]=>
  string(8) "&Yacute;"
  ["Þ"]=>
  string(7) "&THORN;"
  ["ß"]=>
  string(7) "&szlig;"
  ["à"]=>
  string(8) "&agrave;"
  ["á"]=>
  string(8) "&aacute;"
  ["â"]=>
  string(7) "&acirc;"
  ["ã"]=>
  string(8) "&atilde;"
  ["ä"]=>
  string(6) "&auml;"
  ["å"]=>
  string(7) "&aring;"
  ["æ"]=>
  string(7) "&aelig;"
  ["ç"]=>
  string(8) "&ccedil;"
  ["è"]=>
  string(8) "&egrave;"
  ["é"]=>
  string(8) "&eacute;"
  ["ê"]=>
  string(7) "&ecirc;"
  ["ë"]=>
  string(6) "&euml;"
  ["ì"]=>
  string(8) "&igrave;"
  ["í"]=>
  string(8) "&iacute;"
  ["î"]=>
  string(7) "&icirc;"
  ["ï"]=>
  string(6) "&iuml;"
  ["ð"]=>
  string(5) "&eth;"
  ["ñ"]=>
  string(8) "&ntilde;"
  ["ò"]=>
  string(8) "&ograve;"
  ["ó"]=>
  string(8) "&oacute;"
  ["ô"]=>
  string(7) "&ocirc;"
  ["õ"]=>
  string(8) "&otilde;"
  ["ö"]=>
  string(6) "&ouml;"
  ["÷"]=>
  string(8) "&divide;"
  ["ø"]=>
  string(8) "&oslash;"
  ["ù"]=>
  string(8) "&ugrave;"
  ["ú"]=>
  string(8) "&uacute;"
  ["û"]=>
  string(7) "&ucirc;"
  ["ü"]=>
  string(6) "&uuml;"
  ["ý"]=>
  string(8) "&yacute;"
  ["þ"]=>
  string(7) "&thorn;"
  ["ÿ"]=>
  string(6) "&yuml;"
  ["&"]=>
  string(5) "&amp;"
  ["""]=>
  string(6) "&quot;"
  ["<"]=>
  string(4) "&lt;"
  [">"]=>
  string(4) "&gt;"
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T16:00:05.493

我尝试使用 PHP 5.4.5 并正确输出 &oelig。所以我不能真正测试这个，但我猜是因为它不在默认使用的 iso-8859-1 的实际字符集中。它们在补充字符集中。尝试使用 ISO-8859-15

```
htmlentities($s,  ENT_COMPAT | ENT_HTML401, "ISO-8859-15"); 
```

# javascript - 我如何确定javascript数组中最后一项的索引值> 0

> ID：13766260
> 
> 赞同：1
> 
> 时间：2012-12-07T15:41:55.277
> 
> 标签：javascript, jquery

正如我的问题所述，我将如何确定 JavaScript 数组中最后一项的索引，其值 > 0

所以如果 myarray =`[12, 35, 56, 0, 42, 0]`

我如何找到这个数组中**最后一个正整数的索引？**即在这种情况下，答案将是 4（第 42 号）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T15:43:53.360

没有捷径，只需从`length - 1`to `0`（包括）向后循环数组并在第一个`>0`条目处停止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T15:45:22.630

试试这个：

```
var array = [12, 35, 56, 0, 42, 0];
function getLastNotZero(array){
    var t = 0, i = array.length-1;
    while(t <= 0 && i >= 0){
        t = array[--i];
    }
    return i-1;
}
getLastNotZero(array);
//Returns 4 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T15:46:24.067

希望这可以帮助：

```
for(var i=myarray.length-1; i>=0;i--){
    if(myarray[i] > 0){
       alert(i);
       break;
  }
}
if(i<0)
alert(i); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T15:57:12.427

这应该这样做：

```
var myarray = [12, 35, 56, 0, 42, 0];
var found = {};
found.value = 0;
found.index = 0;
var j = myarray.length;
for (j; j>0; j--) {
    if (myarray[j] > 0) {
        found.value = myarray[j];
        found.index = j;
        break;
    }
}
alert(found.index); 
```

编辑：注意上面不会澄清 0 索引或没有这样：

```
found.value = undefined;
found.index = undefined;
var j = myarray.length;
for (j; j>0; j--) {
    if (myarray[j] > 0) {
        found.value = myarray[j];
        found.index = j;
        break;
    }
}
alert(found.index); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-07T16:14:59.323

试试这个解决方案：

```
var myarray = [12, 35, 56, 0, 42, 0], index;
$.each(myarray,function(idx,el){
    if(el > 0){ 
        index = idx;
    }
});
alert('Index:'+index+', value:'+myarray[index]); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-04-21T11:51:02.477

`.reverse()`你可以用and得到反向索引`.findIndex`，然后做一些基本的算术来翻转它：

```
> myarray = [12, 35, 56, 0, 42, 0]
> var ridx = myarray.slice().reverse().findIndex(n => 0 < n)
1
> var idx = myarray.length - 1 - ridx
4 
```

# xml - Struts2：文档中根之后的标记必须格式正确

> ID：13766261
> 
> 赞同：1
> 
> 时间：2012-12-07T15:41:56.727
> 
> 标签：xml, struts2, filter, markup, well-formed

我只是在发现 Struts2 并且我的`web.xml`文件有问题。

它在过滤器标签附近给了我一个错误：

```
<filter>
   <filter-name>struts2</filter-name>
   <filter-class>org.apache.struts2.dispatcher.FilterDispatcher</filter-class>
</filter> 
```

错误说：在这一行找到多个注释： - 元素的开始标记`<filter>` - 根元素之后的文档中的标记必须格式正确。

问题是什么？我该如何解决？

谢谢！

感谢 Aleksander 的关注：

这是我的`web.xml`文件：

```
 `<?xml version="1.0" encoding="UTF-8"?>
<web-app>
  <display-name>struts2example</display-name>
  <welcome-file-list>
    <welcome-file>index.html</welcome-file>
    <welcome-file>index.htm</welcome-file>
    <welcome-file>index.jsp</welcome-file>
    <welcome-file>default.html</welcome-file>
    <welcome-file>default.htm</welcome-file>
    <welcome-file>default.jsp</welcome-file>
  </welcome-file-list>
</web-app>

<filter>
    <filter-name>struts2</filter-name>
    <filter-class>org.apache.struts2.dispatcher.FilterDispatcher</filter-class>
</filter>
<filter-mapping>
    <filter-name>struts2</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>` 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T16:39:14.070

您将标签放在`<web-app>`根标签之外。像这样把你的`<filter>`内心`<web-app>`

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app>
  <display-name>struts2example</display-name>
  <welcome-file-list>
   <welcome-file>index.html</welcome-file>
   <welcome-file>index.htm</welcome-file>
   <welcome-file>index.jsp</welcome-file>
   <welcome-file>default.html</welcome-file>
   <welcome-file>default.htm</welcome-file>
   <welcome-file>default.jsp</welcome-file>
  </welcome-file-list>

  <filter>
   <filter-name>struts2</filter-name>
   <filter-class>org.apache.struts2.dispatcher.FilterDispatcher</filter-class>
  </filter>
  <filter-mapping>
    <filter-name>struts2</filter-name>
    <url-pattern>/*</url-pattern>
  </filter-mapping>
</web-app> 
```

自 Struts 2.1.3 起也`org.apache.struts2.dispatcher.FilterDispatcher`已弃用，请`org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter`改用。

# java - 使用java表单的数据库滚动按钮-调用下一个方法将光标向上移动结果集对象时出错

> ID：13766262
> 
> 赞同：0
> 
> 时间：2012-12-07T15:41:56.370
> 
> 标签：java, database, forms

基本上：我在 java 表单中添加了四个按钮。这些按钮使我能够在记录中向前移动、向后移动、移动到最后一条记录以及移动到第一条记录。

我正在使用 netbeans IDE 7.2.1 和内置的 Apache Derby 网络服务器。

我正在尝试滚动浏览我的数据库记录并在文本字段中输出结果。最初，构造函数成功连接到数据库并使用 next() 方法从结果集对象加载第一行以移动光标。一切都很好，但是当我尝试通过按下表单上的下一个按钮并因此调用下一个事件方法来启动要加载的下一条记录时，我收到一条错误消息：当我尝试时，代码似乎卡在了顶部再次调用 next() 方法！任何帮助，将不胜感激。

这是我的java表单源代码：

```
package Employer;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;
import java.sql.Statement;
import java.sql.ResultSet;
import javax.swing.JOptionPane;

public class Workers extends javax.swing.JFrame {

    Connection con;
    Statement stmt;
    ResultSet rs;

    public Workers() {
        initComponents();
        DoConnect();
    }

    public void DoConnect( ) {

        try{
        String host = "jdbc:derby://localhost:1527/Employer";
        String uName = "admins";
        String uPass= "admins";

        Connection con = DriverManager.getConnection( host, uName, uPass );
//        Statement stmt = con.createStatement( );
        stmt = con.createStatement( ResultSet.TYPE_SCROLL_INSENSITIVE, ResultSet.CONCUR_UPDATABLE );

        String SQL = "SELECT * FROM WORKERS";
        ResultSet rs = stmt.executeQuery( SQL );

        rs.next( );
        int id_col = rs.getInt("ID");
        String id=Integer.toString(id_col);
        String first= rs.getString("First_Name");
        String last = rs.getString("Last_Name");
        String job = rs.getString("Job_Title");

        textID.setText(id);
        textFirstName.setText(first);
        textLastName.setText(last);
        textJobTitle.setText(job);

        }

        catch ( SQLException err ){
               System.out.println( err.getMessage( ) );

        }

    }

    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">                          
    private void initComponents() {

        jPanel1 = new javax.swing.JPanel();
        textJobTitle = new javax.swing.JTextField();
        jLabel1 = new javax.swing.JLabel();
        textID = new javax.swing.JTextField();
        textFirstName = new javax.swing.JTextField();
        textLastName = new javax.swing.JTextField();
        jPanel2 = new javax.swing.JPanel();
        btnNext = new javax.swing.JButton();
        btnLast = new javax.swing.JButton();
        btnPrevious = new javax.swing.JButton();
        btnFirst = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        textJobTitle.setToolTipText("");
        textJobTitle.setName(""); // NOI18N

        jLabel1.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        jLabel1.setText("Job Title:");

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jLabel1)
                    .addComponent(textID, javax.swing.GroupLayout.PREFERRED_SIZE, 42, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 127, Short.MAX_VALUE)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addComponent(textFirstName, javax.swing.GroupLayout.PREFERRED_SIZE, 75, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(textLastName, javax.swing.GroupLayout.PREFERRED_SIZE, 60, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addComponent(textJobTitle, javax.swing.GroupLayout.PREFERRED_SIZE, 221, javax.swing.GroupLayout.PREFERRED_SIZE)))
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(textID, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(textFirstName, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(textLastName, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(24, 24, 24)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel1)
                    .addComponent(textJobTitle, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addContainerGap(55, Short.MAX_VALUE))
        );

        textJobTitle.getAccessibleContext().setAccessibleName("");

        btnNext.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        btnNext.setText("Next");
        btnNext.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnNextActionPerformed(evt);
            }
        });

        btnLast.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        btnLast.setText("Last");

        btnPrevious.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        btnPrevious.setText("Previous");

        btnFirst.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        btnFirst.setText("First");

        javax.swing.GroupLayout jPanel2Layout = new javax.swing.GroupLayout(jPanel2);
        jPanel2.setLayout(jPanel2Layout);
        jPanel2Layout.setHorizontalGroup(
            jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel2Layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(btnFirst)
                .addGap(29, 29, 29)
                .addComponent(btnPrevious)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 59, Short.MAX_VALUE)
                .addComponent(btnNext)
                .addGap(33, 33, 33)
                .addComponent(btnLast)
                .addContainerGap())
        );
        jPanel2Layout.setVerticalGroup(
            jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel2Layout.createSequentialGroup()
                .addGap(27, 27, 27)
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(btnNext)
                    .addComponent(btnLast)
                    .addComponent(btnPrevious)
                    .addComponent(btnFirst))
                .addContainerGap(29, Short.MAX_VALUE))
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jPanel2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addContainerGap(795, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(22, 22, 22)
                .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(72, 72, 72)
                .addComponent(jPanel2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(78, Short.MAX_VALUE))
        );

        pack();
    }// </editor-fold>                        

    private void btnNextActionPerformed(java.awt.event.ActionEvent evt) {                                        
        // TODO add your handling code here:
        try {

        if ( rs.next( )) {

               int id_col = rs.getInt("ID");
                String id = Integer.toString(id_col);
                String first = rs.getString("First_Name");
                String last = rs.getString("Last_Name");
                String job = rs.getString("Job_Title");

                textID.setText(id);
                textFirstName.setText(first);
                textLastName.setText(last);
               textJobTitle.setText(job);
            }
            else {
                rs.previous( );
                JOptionPane.showMessageDialog(Workers.this, "End of File");
            }
        }
        catch (SQLException err) {
            JOptionPane.showMessageDialog(Workers.this, err.getMessage());
            System.out.println( err.getMessage( ) );
        }
    }                                       

    public static void main(String args[]) {

        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new Workers().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify                     
    private javax.swing.JButton btnFirst;
    private javax.swing.JButton btnLast;
    private javax.swing.JButton btnNext;
    private javax.swing.JButton btnPrevious;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel2;
    private javax.swing.JTextField textFirstName;
    private javax.swing.JTextField textID;
    private javax.swing.JTextField textJobTitle;
    private javax.swing.JTextField textLastName;
    // End of variables declaration 
```

以下是我从堆栈跟踪控制台窗口收到的错误消息：

> Employer.Workers.access$000(Workers.java:12) 的 Employer.Workers.btnNextActionPerformed(Workers.java:211) 的线程“AWT-EventQueue-0”java.lang.NullPointerException 中的异常 Employer.Workers$1.actionPerformed( Workers.java:139) 在 javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018) 在 javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341) 在 javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java :402) 在 javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259) 在 javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252) 在 java.awt.Component.processMouseEvent(Component.java: 6505) 在 java.awt.Component 的 javax.swing.JComponent.processMouseEvent(JComponent.java:3321)。processEvent(Component.java:6270) at java.awt.Container.processEvent(Container.java:2229) at java.awt.Component.dispatchEventImpl(Component.java:4861) at java.awt.Container.dispatchEventImpl(Container.java :2287) 在 java.awt.Component.dispatchEvent(Component.java:4687) 在 java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832) 在 java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492) 在 java .awt.LightweightDispatcher.dispatchEvent(Container.java:4422) 在 java.awt.Container.dispatchEventImpl(Container.java:2273) 在 java.awt.Window.dispatchEventImpl(Window.java:2719) 在 java.awt.Component。 dispatchEvent(Component.java:4687) 在 java.awt.EventQueue.dispatchEventImpl(EventQueue.java:723) 在 java.awt.EventQueue.access$200(EventQueue.java:103) 在 java.awt。EventQueue$3.run(EventQueue.java:682) at java.awt.EventQueue$3.run(EventQueue.java:680) at java.security.AccessController.doPrivileged(Native Method) at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain .java:76) 在 java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87) 在 java.awt.EventQueue$4.run(EventQueue.java:696) 在 java.awt.EventQueue$4.run(EventQueue.java :694) at java.security.AccessController.doPrivileged(Native Method) at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76) at java.awt.EventQueue.dispatchEvent(EventQueue.java:693) at java.awt .EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:244) 在 java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:163) 在 java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:151) 在 java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147) 在 java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139) 在 java. awt.EventDispatchThread.run(EventDispatchThread.java:97) 构建成功（总时间：18 秒）

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T21:11:13.270

你的问题是你的`ResultSet`是`null`。

你隐藏了你的变量`rs`。

您的代码（基本上）是：

```
`public class Sample {
    ResultSet rs; // is null
    public method() {
        ResultSet rs = stmt.execute(); // here the other rs is hidden
    }
}` 
```

`如果你想让你的代码工作，不要隐藏变量。也不要隐藏连接。`

 `为了更快地获得答案，请尝试减少代码并缩短示例并专注于您的实际问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-24T15:03:08.023

很简单的人。你已经声明`ResultSet rs`你只需要放

```
rs = stmt.executeQuery(sql); 
```

你的工作就完成了。`

# iphone - iOS 中的 3d 文字效果

> ID：13766268
> 
> 赞同：16
> 
> 时间：2012-12-07T15:42:08.383
> 
> 标签：iphone, ios, uikit, core-graphics, quartz-2d

我想在我的一个具有 3dish 外观的屏幕上呈现一些文本。我正在使用 UIKit 和标准视图控制器等。

效果将如下所示：

![在此处输入图像描述](../Images/8d602b15944533521578f24694f7ad68.png)

这可以通过 UIKit 和 iOS 以某种方式完成吗？通常我只会使用静态 png，但是文本是动态的，并且会根据用户数据进行更新

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-12-10T20:47:13.920

好吧，这是一个基本示例。

这个想法是您使用 x/y 1 偏移量一遍又一遍地绘制相同文本的图层以创建“深度”外观。

我创建了一个名为 UIImage+3d 的 UIImage 类别，您可以对其进行测试：

**这是头文件 (.h)**

```
//
//  UIImage+3D.h
//
//  Created by Lefteris Haritou on 12/10/12.
//  Feel Free to use this code, but please keep the credits
//

#import <UIKit/UIKit.h>

@interface UIImage (Extensions)

+ (UIImage *)create3DImageWithText:(NSString *)_text Font:(UIFont*)_font ForegroundColor:(UIColor*)_foregroundColor ShadowColor:(UIColor*)_shadowColor outlineColor:(UIColor*)_outlineColor depth:(int)_depth useShine:(BOOL)_shine;

@end 
```

**这是实现（.m）文件**

```
//
//  UIImage+3D.m
//
//  Created by Lefteris Haritou on 12/10/12.
//  Feel Free to use this code, but please keep the credits
//

#import "UIImage+3D.h"
#import <CoreText/CoreText.h>
#import <QuartzCore/QuartzCore.h>

@implementation UIImage (Extensions)

+ (UIImage *)create3DImageWithText:(NSString *)_text Font:(UIFont*)_font ForegroundColor:(UIColor*)_foregroundColor ShadowColor:(UIColor*)_shadowColor outlineColor:(UIColor*)_outlineColor depth:(int)_depth useShine:(BOOL)_shine {

    //calculate the size we will need for our text
    CGSize expectedSize = [_text sizeWithFont:_font constrainedToSize:CGSizeMake(MAXFLOAT, MAXFLOAT)];

    //increase our size, as we will draw in 3d, so we need extra space for 3d depth + shadow with blur
    expectedSize.height+=_depth+5;
    expectedSize.width+=_depth+5;

    UIColor *_newColor;

    UIGraphicsBeginImageContextWithOptions(expectedSize, NO, [[UIScreen mainScreen] scale]);
    CGContextRef context = UIGraphicsGetCurrentContext();

    //because we want to do a 3d depth effect, we are going to slightly decrease the color as we move back
    //so here we are going to create a color array that we will use with required depth levels
    NSMutableArray *_colorsArray = [[NSMutableArray alloc] initWithCapacity:_depth];

    CGFloat *components =  (CGFloat *)CGColorGetComponents(_foregroundColor.CGColor);

    //add as a first color in our array the original color
    [_colorsArray insertObject:_foregroundColor atIndex:0];

    //create a gradient of our color (darkening in the depth)
    int _colorStepSize = floor(100/_depth);

    for (int i=0; i<_depth; i++) {

        for (int k=0; k<3; k++) {
            if (components[k]>(_colorStepSize/255.f)) {
                components[k]-=(_colorStepSize/255.f);
            }
        }
        _newColor = [UIColor colorWithRed:components[0] green:components[1] blue:components[2] alpha:CGColorGetAlpha(_foregroundColor.CGColor)];

        //we are inserting always at first index as we want this array of colors to be reversed (darkest color being the last)
        [_colorsArray insertObject:_newColor atIndex:0];
    }

    //we will draw repeated copies of our text, with the outline color and foreground color, starting from the deepest
    for (int i=0; i<_depth; i++) {

        //change color
        _newColor = (UIColor*)[_colorsArray objectAtIndex:i];

        //draw the text
        CGContextSaveGState(context);

        CGContextSetShouldAntialias(context, YES);

        //draw outline if this is the last layer (front one)
        if (i+1==_depth) {
            CGContextSetLineWidth(context, 1);
            CGContextSetLineJoin(context, kCGLineJoinRound);

            CGContextSetTextDrawingMode(context, kCGTextStroke);
            [_outlineColor set];
            [_text drawAtPoint:CGPointMake(i, i) withFont:_font];
        }

        //draw filling
        [_newColor set];

        CGContextSetTextDrawingMode(context, kCGTextFill);

        //if this is the last layer (first one we draw), add the drop shadow too and the outline
        if (i==0) {
            CGContextSetShadowWithColor(context, CGSizeMake(-2, -2), 4.0f, _shadowColor.CGColor);
        }
        else if (i+1!=_depth){
            //add glow like blur
            CGContextSetShadowWithColor(context, CGSizeMake(-1, -1), 3.0f, _newColor.CGColor);
        }

        [_text drawAtPoint:CGPointMake(i, i) withFont:_font];        
        CGContextRestoreGState(context);
    }

    //if we need to apply the shine
    if (_shine) {
        //create an alpha mask from the top most layer of the image, so we can add a shine effect over it
        CGColorSpaceRef genericRGBColorspace = CGColorSpaceCreateDeviceRGB();
        CGContextRef imageContext = CGBitmapContextCreate(NULL, (int)expectedSize.width, (int)expectedSize.height, 8, (int)expectedSize.width * 4, genericRGBColorspace,  kCGBitmapByteOrder32Little | kCGImageAlphaPremultipliedFirst);
        UIGraphicsPushContext(imageContext);
        CGContextSetTextDrawingMode(imageContext, kCGTextFill);
        [_text drawAtPoint:CGPointMake(_depth-1, _depth-1) withFont:_font];
        CGImageRef alphaMask = CGBitmapContextCreateImage(imageContext);
        CGContextRelease(imageContext);
        UIGraphicsPopContext();

        //draw shine effect
        //clip context to the mask we created
        CGRect drawRect = CGRectZero;
        drawRect.size = expectedSize;
        CGContextSaveGState(context);
        CGContextClipToMask(context, drawRect, alphaMask);

        CGContextSetBlendMode(context, kCGBlendModeLuminosity);

        size_t num_locations = 4;
        CGFloat locations[4] = { 0.0, 0.4, 0.6, 1};
        CGFloat gradientComponents[16] = {
            0.0, 0.0, 0.0, 1.0,
            0.6, 0.6, 0.6, 1.0,
            0.8, 0.8, 0.8, 1.0,
            0.0, 0.0, 0.0, 1.0
        };

        CGGradientRef glossGradient = CGGradientCreateWithColorComponents(genericRGBColorspace, gradientComponents, locations, num_locations);
        CGPoint start = CGPointMake(0, 0);
        CGPoint end = CGPointMake(0, expectedSize.height);
        CGContextDrawLinearGradient(context, glossGradient, start, end, 0);

        CGColorSpaceRelease(genericRGBColorspace);
        CGGradientRelease(glossGradient);
        CGImageRelease(alphaMask);
        CGContextRestoreGState(context);
    }

    UIImage *finalImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return finalImage;
}

@end 
```

要使用它，只需导入类别扩展，然后按如下方式使用它：

```
UIImage *my3dImage = [UIImage create3DImageWithText:@"3" Font:[UIFont systemFontOfSize:250] ForegroundColor:[UIColor colorWithRed:(200/255.f) green:(200/255.f) blue:(200/255.f) alpha:1.0] ShadowColor:[UIColor blackColor] outlineColor:[UIColor colorWithRed:(225/255.f) green:(225/255.f) blue:(225/255.f) alpha:1.0] depth:8 useShine:NO];
UIImageView *imgView = [[UIImageView alloc] initWithImage:my3dImage];
[self.view addSubview: imgView]; 
```

![在此处输入图像描述](../Images/95d44c0a78599b711e5c1bbdaca9009a.png)

另一个例子是这样的：

```
UIImage *my3dImage = [UIImage create3DImageWithText:@"3D" Font:[UIFont fontWithName:@"MarkerFelt-Wide" size:180] ForegroundColor:[UIColor colorWithRed:(222/255.f) green:(100/255.f) blue:(100/255.f) alpha:1.0] ShadowColor:[UIColor blackColor] outlineColor:[UIColor colorWithRed:(216/255.f) green:(120/255.f) blue:(120/255.f) alpha:1.0] depth:6 useShine:NO];
UIImageView *imgView = [[UIImageView alloc] initWithImage:my3dImage];
imgView.center = self.view.center;
[self.view addSubview: imgView]; 
```

结果如下所示：

![在此处输入图像描述](../Images/62bf70cfc79c254fa44a3fc2b81a3946.png)

**我编辑了代码以在图像上添加光泽效果，我相信这使它看起来更酷**

```
UIImage *my3dImage = [UIImage create3DImageWithText:@"3D" Font:[UIFont fontWithName:@"MarkerFelt-Wide" size:180] ForegroundColor:[UIColor colorWithRed:(222/255.f) green:(100/255.f) blue:(100/255.f) alpha:1.0] ShadowColor:[UIColor blackColor] outlineColor:[UIColor colorWithRed:(216/255.f) green:(120/255.f) blue:(120/255.f) alpha:1.0] depth:6 useShine:YES];
UIImageView *imgView = [[UIImageView alloc] initWithImage:my3dImage];
imgView.center = self.view.center;
[self.view addSubview: imgView]; 
```

![在此处输入图像描述](../Images/d3b3303cfadaaee4cb9e50042d409cea.png)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-10T20:08:00.600

以下代码可能并不完美，但它应该是一个很好的起点。

基本上你画了两次字体，稍微改变了大小和偏移量。根据您正在处理的字体和大小，您可能需要使用`fontSize`,`fontSizeDelta`和`fontOffset`.

结果看起来有点像这样：

![在此处输入图像描述](../Images/5ecbbe7dcd747c4c7d368ca844e8686c.png)

```
- (UIImage *)imageWith3dString:(NSString *)text
{
    CGFloat fontSize = 150.0;
    CGFloat fontSizeDelta = 3.0;
    CGFloat fontOffset = 5.0;

    NSString *fontName = @"Bebas";
    UIFont *font = [UIFont fontWithName:fontName size:fontSize];
    CGSize textSize = [text sizeWithFont:font
                       constrainedToSize:CGSizeMake(CGFLOAT_MAX, CGFLOAT_MAX)];

    CGSize size = CGSizeMake(textSize.width, fontSize);

    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
    CGContextRef ctx = CGBitmapContextCreate(NULL,
                                             (int)size.width,
                                             (int)size.height,
                                             8,
                                             (int)(4 * size.width),
                                             colorSpace,
                                             kCGImageAlphaPremultipliedLast);

    // Draw with shadow
    CGContextSetShadowWithColor(ctx, CGSizeMake(0, 0), 10.0, [UIColor colorWithWhite:0.0 alpha:0.6].CGColor);

    CGContextSetRGBStrokeColor(ctx, 1.0, 1.0, 1.0, 0.6);
    CGContextSetAllowsAntialiasing(ctx, YES);  
    CGContextSetLineWidth(ctx, 2.0);
    CGContextSetTextDrawingMode(ctx, kCGTextFillStroke);

    CGContextSetRGBFillColor(ctx, 222 / 255.0, 222 / 255.0, 222 / 255.0, 1.0);
    CGContextSetCharacterSpacing(ctx, 2.6);
    CGContextSelectFont(ctx, [fontName UTF8String], fontSize - fontSizeDelta, kCGEncodingMacRoman);
    CGContextShowTextAtPoint(ctx, 0.0, 3.0 + fontOffset, [text UTF8String], text.length);

    CGContextSetShadowWithColor(ctx, CGSizeZero, 0.0, NULL); // disable shadow
    CGContextSetCharacterSpacing(ctx, 1.0);
    CGContextSelectFont(ctx, [fontName UTF8String], fontSize, kCGEncodingMacRoman);
    CGContextShowTextAtPoint(ctx, 0.0, 3.0, [text UTF8String], text.length);

    CGImageRef imageRef = CGBitmapContextCreateImage(ctx);
    UIImage *image = [UIImage imageWithCGImage:imageRef];

    CGColorSpaceRelease(colorSpace);
    CGImageRelease(imageRef);
    CGContextRelease(ctx);

    return image;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    UIImageView *imageView = [[UIImageView alloc] initWithImage:[self imageWith3dString:@"3"]];

    [self.view addSubview:imageView];
} 
```

YMMV

# objective-c - iOS 模拟器运行动画的效率会降低吗？

> ID：13766270
> 
> 赞同：2
> 
> 时间：2012-12-07T15:42:14.473
> 
> 标签：objective-c, ios, xcode

我一直在玩一些动画，碰巧我附近没有设备可以测试。我有一个简单的云在天空中移动的动画。使用此方法对云进行动画处理：

```
-(void)animateLayer:(CALayer*)layer toPosition:(CGPoint)position withDuration:(CGFloat)duration{
    // Prepare the animation from the current position to the new position
    CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@"position"];

    animation.fromValue = [layer valueForKey:@"position"];
    animation.toValue = [NSValue valueWithCGPoint:position];
    animation.delegate = self;

    animation.duration = duration;

    [animation setValue:layer forKey:@"cloudLayer"];

    // Update the layer's position so that the layer doesn't snap back when the animation completes.
    layer.position = position;

    // Add the animation, overriding the implicit animation.
    [layer addAnimation:animation forKey:@"position"];
} 
```

该层包含一个简单的部分透明图像。但是，当我运行它时，cpu 利用率比我在 MacBook Air 上预期的要高得多。有什么我做的效率低吗？还是模拟器只是在某些任务（如动画）上消耗大量资源？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T16:30:52.137

它们是有区别的。但在大多数系统上，实际上是有好处的。事情往往在计算机上运行得更好，因为改进的 RAM 和 CPU 速度实际上使事情变得更好。除非您的 RAM 高于 2 GB，否则 Macbook Air 可能不会大幅提升性能。

Wifi 也是如此，如果您有一台插入以太网的计算机，那么互联网的运行速度将比正常速度快。在开发时牢记这一点是很好的，尤其是在游戏方面。

**编辑**

正如 Minthos 所指出的，OpenGL 可能无法正常工作。但是，我无法验证这一点，因为我不使用 OpenGL 开发东西。但是，我之前的观点在其他情况下仍然有效。简单的 Cocos2D 动画应该更喜欢在模拟器上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T16:45:25.430

I've noticed that an OpenGL app I've written runs much slower on my macbook than on my iphone 4S. This may be due to different capabilities in the graphics hardware - the iPhone has a PowerVR GPU but my macbook has two nVidia GPUs. Perhaps the simulator uses software rendering?

# visual-studio-2010 - 如何在水晶报表（Visual Studio 2010）ASP.NET MVC 4 中的日期之间创建报表

> ID：13766271
> 
> 赞同：-1
> 
> 时间：2012-12-07T15:42:13.843
> 
> 标签：visual-studio-2010, crystal-reports, asp.net-mvc-4

我需要在日期之间过滤的水晶报告中创建一个报告..从一个网页我必须能够选择两个日期“从”、“到”，然后生成一个报告，在这些日期之间从数据库向我发送数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T12:02:26.773

导入 CrystalDecisions.Shared 导入 CrystalDecisions.CrystalReports.Engine

将 crTableLogonInfos 调暗为新 TableLogOnInfos 将 crTableLogonInfo 调暗为新 TableLogOnInfo 将 crConnectionInfo 调暗为新 ConnectionInfo

```
Dim crTables As Tables
Dim crTable As Table

Dim crReport As CrystalDecisions.CrystalReports.Engine.ReportClass 
```

Dim crReportDocuments As New YourReport(水晶报表) crReportDocuments.SetParameterValue("@Parameter", Parametervalue) .. ..

With crConnectionInfo ''(连接信息) .ServerName = ServerName .DatabaseName = DataBaseName If Uid <> "" Then .UserID = Uid .Password = pwd Else .IntegratedSecurity = True End If End With

```
 crTables = crReport.Database.Tables

        For Each crTable In crTables
            crTableLogonInfo = crTable.LogOnInfo
            crTableLogonInfo.ConnectionInfo = crConnectionInfo
            crTable.ApplyLogOnInfo(crTableLogonInfo)
        Next

        cry.ReportSource = crReportDocuments 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T22:57:34.047

首先，将开始日期和结束日期参数添加到报告中。然后在“选择专家”中，将其设置为让您的日期字段位于`{@Start Date}`和`{@End Date}`参数之间。

您可能希望查看此内容以帮助在 .NET 和 Crystal 之间传递参数： [Parameter to Crystal Report](https://stackoverflow.com/questions/13767814/parameter-to-crystal-report)

# android - 无法从活动组中打开 ListPreferences

> ID：13766272
> 
> 赞同：0
> 
> 时间：2012-12-07T15:42:16.040
> 
> 标签：android, android-layout, android-preferences

我有一个列表首选项，如下所示

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen  xmlns:android="http://schemas.android.com/apk/res/android" >
    <ListPreference android:key="userType"
                    android:title="User Type"
                    android:summary="This preference allows to select an item in a array"
                    android:defaultValue="Admin"
                    android:entries="@array/array_preference_userType"
                    android:entryValues="@array/array_preference_userTypeValues" />
</PreferenceScreen> 
```

Prefs 类是

```
public class PreferencesActivity extends PreferenceActivity {
 @Override
 protected void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
     addPreferencesFromResource(R.xml.preference_user_settings);
 }
} 
```

上面的课程在打开的时候被添加到活动组中。

```
Intent intent = new Intent(getParent(), PreferencesActivity.class);
ParentActivity parentActivity = (ParentActivity)getParent();
parentActivity.startChildActivity("PreferencesActivity", intent); 
```

ParentActivity 类是：

```
public class ParentActivity extends ActivityGroup {
private ArrayList<String> mIdList;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);       
    if (mIdList == null) mIdList = new ArrayList<String>();
}

 public void startChildActivity(String Id, Intent intent) {     
     Window window = getLocalActivityManager().startActivity(Id,intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP));
      if (window != null) {
          Log.i("ParentActivity", "activity started: " + Id);
          mIdList.add(Id);
          setContentView(window.getDecorView()); 
      }    
  }
   }
} 
```

但是当我单击列表首选项时，它会因错误而崩溃

```
E/AndroidRuntime(581): android.view.WindowManager$BadTokenException: Unable to add window -- token android.app.LocalActivityManager$LocalActivityRecord@44f862a8 is not valid; is your activity running? 
```

我可能会想到一个添加父上下文的解决方案，这是我在创建意图时所做的。

有什么想法吗？

提前致谢！

# python - 你能改变cartopy中的虹膜立方体投影吗

> ID：13766275
> 
> 赞同：2
> 
> 时间：2012-12-07T15:42:25.327
> 
> 标签：python, matplotlib, cartopy, python-iris

我真的很喜欢 cartopy 可以在不同的地图投影中自动绘制的想法。但是，我不知道如何处理 Iris 立方体。作为一个姊妹项目，我希望我能做到。有可能做这样的事情吗？

```
import iris as I
import cartopy.crs as ccrs
import matplotlib.pyplot as plt

someCube = I.load('someCube.pp')
ax = plt.axes(projection=ccrs.Robinson())
I.plot.contourf(someCube, transform=ccrs.Robinson())
plt.show() 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T09:15:21.690

我采用了您的伪代码，并使其可以使用 Iris 的示例数据运行：

```
import iris
import iris.plot as iplt
import cartopy.crs as ccrs
import matplotlib.pyplot as plt

fname = iris.sample_data_path('air_temp.pp')
air_temp = iris.load_cube(fname)

ax = plt.axes(projection=ccrs.Robinson())
iplt.contourf(air_temp, transform=ccrs.Robinson(central_longitude=180))
ax.coastlines()

plt.show() 
```

如果您运行此代码，您将收到以下异常：

```
Traceback (most recent call last):
  File "using_custom_projections.py", line 11, in <module>
    iris.plot.contourf(air_temp, transform=ccrs.Robinson())
  File "lib/iris/plot.py", line 452, in contourf
    result = _draw_2d_from_points('contourf', None, cube, *args, **kwargs)
  File "lib/iris/plot.py", line 263, in _draw_2d_from_points
    result = _map_common(draw_method_name, arg_func, iris.coords.POINT_MODE, cube, data, *args, **kwargs)
  File "lib/iris/plot.py", line 406, in _map_common
    assert 'transform' not in kwargs, 'Transform keyword is not allowed.'
AssertionError: Transform keyword is not allowed. 
```

哪个试图告诉您您不需要告诉它立方体在哪个“变换”（或坐标系）中。原因是虹膜立方体应该包含有关基础数据的完整元数据：坐标系是该元数据的一部分。

因此，要使示例正常工作，您只需在`contourf`调用中删除 transform 关键字参数：

```
import iris
import iris.plot as iplt
import cartopy.crs as ccrs
import matplotlib.pyplot as plt

fname = iris.sample_data_path('air_temp.pp')
air_temp = iris.load_cube(fname)

ax = plt.axes(projection=ccrs.Robinson(central_longitude=180))
iplt.contourf(air_temp)
ax.coastlines()

plt.show() 
```

![轮廓结果](../Images/b8d92aa38e0cb8a3da8739f7fd182032.png)

[在iris 库](http://scitools.org.uk/iris/docs/latest/gallery.html)中有一个类似的例子，特别是[http://scitools.org.uk/iris/docs/latest/examples/graphics/rotated_pole_mapping.html#rotated-pole-mapping-03](http://scitools.org.uk/iris/docs/latest/examples/graphics/rotated_pole_mapping.html#rotated-pole-mapping-03)（例子中的最后一个情节）。

高温下，

# jquery - jqgrid Edittype：选择不从dataurl保存值

> ID：13766276
> 
> 赞同：1
> 
> 时间：2012-12-07T15:42:29.553
> 
> 标签：jquery, web-services, jqgrid, jqgrid-asp.net

我搜索了许多论坛和帖子，但仍然无法获得 edittype: select with the editoptions: dataurl to work。

填充网格后，数据加载就很好了。当我单击编辑按钮时，下拉列表具有正确的值和名称。当我单击保存时，我收到一条错误消息，指出缺少其中一个参数。它似乎没有拉取所选选项的值。

我已经尝试了 formatter: 'select' 选项，但是当我使用该选项时，加载网格时这些列中没有显示任何内容。

这是我的代码。

```
var buildSelectFromJson = function (data) {
    var html = '<select>', d = data.d, length = d.length, i = 0, item;
    for (; i < length; i++) {
        item = d[i];
        html += '<option value=' + item.id + '>' + item.value + '</option>';
    }
    html += '</select>';
    return html;
};

$.extend($.jgrid.edit, {
    ajaxEditOptions: { contentType: "application/json" },
    recreateForm: true,
    serializeEditData: function (postData) {
        return JSON.stringify(postData);
    }
});

jQuery("#usage").jqGrid({
    url: '/vochaptracker/Services/vochapService.asmx/GetUsage',
    datatype: 'json',
    mtype: 'post',
    loadonce: true,
    ajaxGridOptions: { contentType: 'application/json; charset=utf-8' },
    serializeGridData: function (postData) {
        return JSON.stringify(postData);
    },
    jsonReader: {
        root: function (obj) { return obj.d.rows; },
        page: function (obj) { return obj.d.page; },
        total: function (obj) { return obj.d.total; },
        records: function (obj) { return obj.d.records; }
    },
    colNames: ['Date', 'Paint', 'Booth', 'Gallons Used'],
    colModel: [
        { name: 'date', index: 'date', width: 75, editable: true },
        { name: 'paint', index: 'paint', width: 300, editable: true, edittype: 'select', formatter:'select', editoptions: { dataUrl: "/vochaptracker/Services/vochapService.asmx/GetPaintsForEdit",
            buildSelect: buildSelectFromJson}
        },
        { name: 'booth', index: 'booth', width: 100, editable: true, edittype: 'select', formatter:'select', editoptions: { dataUrl: "/vochaptracker/Services/vochapService.asmx/GetBoothsForEdit",
            buildSelect: buildSelectFromJson}},
        { name: 'gallonsUsed', index: 'gallonsUsed', width: 100, editable: true }
    ],
    rowNum: 20,
    rowList: [20, 30, 40],
    pager: '#pager4',
    sortname: 'ID',
    viewrecords: true,
    sortorder: "desc",
    caption: "Daily Usage",
    height: '400',
    editurl: '/vochaptracker/Services/vochapService.asmx/EditUsage',
    ajaxSelectOptions: { contentType: "application/json", dataType: 'json', type:  "POST" }
});
jQuery("#usage").jqGrid('navGrid', "#pager4", { edit: false, add: false, del: true });
jQuery("#usage").jqGrid('inlineNav', "#pager4"); 
```

网络服务：

```
public class jqGridPaintHelper
{
    public string total;
    public string page;
    public string records;
    public List<TableRow> rows;
}

public class TableRow
{
    public string id;
    public List<string> cell;
}

public class editHelper
{
    public string id;
    public string value;
}

    [WebMethod]
    [ScriptMethod( ResponseFormat = ResponseFormat.Json )]
    public jqGridPaintHelper GetUsage( int page, int rows, string sidx, string sord )
    {
        vochapdbDataContext db = new vochapdbDataContext();
        jqGridPaintHelper helper = new jqGridPaintHelper();
        int dbCount = db.DailyUsages.Count();
        helper.total = ( ( dbCount + rows - 1 ) / rows ).ToString();
        helper.page = page.ToString();
        helper.records = dbCount.ToString();

        List<TableRow> usage = new List<TableRow>( dbCount );
        foreach ( DailyUsage row in db.DailyUsages )
        {
            usage.Add( new TableRow()
            {
                id = row.ID.ToString(),
                cell = new List<string> {
                    row.date.ToShortDateString(),
                    row.Paint.paintName.ToString(),
                    row.Booth.tag.ToString(),
                    row.gallonsUsed.ToString()
                }
            } );
        }

        helper.rows = usage;

        return helper;
    }

    [WebMethod]
    [ScriptMethod( ResponseFormat = ResponseFormat.Json )]
    public int EditUsage( string ID, string date, string paintID, string boothID, string gallonsUsed, string oper, string id )
    {
        vochapdbDataContext db = new vochapdbDataContext();

        if ( oper == "edit" )
        {
            db.updateUsage( int.Parse( ID ), DateTime.Parse( date ), paintID, int.Parse( boothID ), decimal.Parse( gallonsUsed ) );
        }
        else if ( oper == "add" )
        {
            DailyUsage newUsage = new DailyUsage();
            newUsage.date = DateTime.Parse( date );
            newUsage.paintID = paintID;
            newUsage.boothID = int.Parse( paintID );
            newUsage.gallonsUsed = decimal.Parse( gallonsUsed );

            db.DailyUsages.InsertOnSubmit( newUsage );
            db.SubmitChanges();
        }
        else if ( oper == "del" )
        {
            db.deleteUsage( int.Parse( id ) );
        }

        return 1;
    }

    [WebMethod]
    [ScriptMethod( ResponseFormat = ResponseFormat.Json )]
    public List<editHelper> GetPaintsForEdit()
    {
        vochapdbDataContext db = new vochapdbDataContext();

        List<editHelper> paints = new List<editHelper>();

        foreach ( Paint row in db.Paints )
        {
            paints.Add( new editHelper() { id = row.ID, value = row.paintName } );
        }

        return paints;
    }

    [WebMethod]
    [ScriptMethod( ResponseFormat = ResponseFormat.Json )]
    public List<editHelper> GetBoothsForEdit()
    {
        vochapdbDataContext db = new vochapdbDataContext();

        List<editHelper> booths = new List<editHelper>();

        foreach ( Booth row in db.Booths )
        {
            booths.Add( new editHelper() { id = row.ID.ToString(), value = row.tag } );
        }

        return booths;
    } 
```

这是我在编辑后尝试保存一行时遇到的错误：

```
System.InvalidOperationException: Missing parameter: paintID.
at System.Web.Services.Protocols.ValueCollectionParameterReader.Read(NameValueCollection collection)
at System.Web.Services.Protocols.HtmlFormParameterReader.Read(HttpRequest request)
at System.Web.Services.Protocols.HttpServerProtocol.ReadParameters()
at System.Web.Services.Protocols.WebServiceHandler.CoreProcessRequest() 
```

任何帮助是极大的赞赏。我已经被困了大约一个月了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T18:15:18.330

我终于弄明白了。我的下拉选择列表中有一些奇怪的值。

我在值周围添加了 " 并解决了问题。

老的：

```
html += '<option value=' + item.id + '>' + item.value + '</option>'; 
```

新的：

```
html += '<option value="' + item.id + '">' + item.value + '</option>'; 
```

# c++ - 如何测试异步代码

> ID：13766277
> 
> 赞同：5
> 
> 时间：2012-12-07T15:42:41.130
> 
> 标签：c++, testing, asynchronous, automated-tests

我已经为游戏引擎编写了自己的访问层。有一个 GameLoop 每帧都会被调用，让我处理自己的代码。我能够做具体的事情并检查这些事情是否发生。以一种非常基本的方式，它可能如下所示：

```
void cycle()
{
    //set a specific value
    Engine::setText("Hello World");

    //read the value
    std::string text = Engine::getText();
} 
```

`Engine`我想通过编写自动化测试来测试我的层是否正常工作。我在使用 Boost Unittest Framework 进行类似这样的简单比较测试方面有一些经验。

问题是，我希望引擎做的一些事情只是在调用`cycle()`. 所以直接调用`Engine::getText()`之后`Engine::setText(...)`会返回一个空字符串。如果我等到下一次调用`cycle()`正确的值会被返回。

我现在想知道如果无法在同一个周期中处理它们，我应该如何编写测试。有没有最佳实践？是否可以在这样的环境中使用 Boost Unittest Framework 给出的“传统测试”方法？是否有针对这种特殊情况的其他框架？

我在这里的所有内容都使用 C++，但我可以想象有与编程语言无关的答案。

更新：无法访问`Engine`外部`cycle()`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T16:15:27.857

在上面的示例中，`std::string text = Engine::getText();`是您想要从一个周期记住但在下一个周期执行的代码。您可以保存它以供以后执行。例如 - 使用 C++11，您可以使用 lambda 将测试包装到内联指定的简单函数中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-07T16:06:13.640

您有两种选择：

如果您拥有的库可以同步使用或使用 c++11 期货之类的设施（可以指示结果的就绪性），那么在您的测试用例中，您可以执行以下操作

```
void testcycle()
{
    //set a specific value
    Engine::setText("Hello World");
    while (!Engine::isResultReady());
    //read the value
    assert(Engine::getText() == "WHATEVERVALUEYOUEXPECT");
} 
```

如果你没有上述最好的，你可以有一个超时（虽然这不是一个好的选择，因为你可能有虚假的失败）：

```
void testcycle()
{
    //set a specific value
    Engine::setText("Hello World");
    while (Engine::getText() != "WHATEVERVALUEYOUEXPECT") {
        wait(1 millisec);
        if (total_wait_time > 1 sec) // you can put whatever max time
              assert(0);
    }

} 
```

# email - 分配数据库的 Outlook 电子邮件

> ID：13766279
> 
> 赞同：1
> 
> 时间：2012-12-07T15:42:47.763
> 
> 标签：email, outlook

我绝对不是在找人为我做这个项目，只是与一两个大师提出一些想法。

我有电子邮件进入一个由几个员工共享的全局邮箱。我需要找到一种更好的方法来分配工作。过去，它是一抢而空。今天，一名员工分配工作。

我正在尝试使用 Excel 或 Access 找到一种简单的方法，我可以复制/拖动电子邮件，它会提供谁应该处理它以及他们按周/月/年完成了多少工作。

无法使用内部票务系统，因为向此收件箱发送邮件的是非员工，因此他们无法使用内部票务系统。

设计这样的东西会很容易吗？或者这是一项更艰巨的任务？您会推荐什么软件或使用什么方法？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T16:06:30.497

我建议使用具有此类功能的 CRM/票务系统将电子邮件转换为票证。它将为您省去开发和维护自定义代码的麻烦，因为您不仅需要，而且许多其他公司都需要一个通用功能：

快速搜索“将电子邮件转换为工单”得到：

*   [https://wiki.vtiger.com/index.php/Mail_Converter](https://wiki.vtiger.com/index.php/Mail_Converter)
*   [http://community.geminiplatform.com/blogs/15/how-to-convert-emails-to-tickets-with-gemini](http://community.geminiplatform.com/blogs/15/how-to-convert-emails-to-tickets-with-gemini)

vTiger 和 Gemini 均可免费使用。

# jquery - 使用 jQuery 保持功能取消绑定复选框

> ID：13766280
> 
> 赞同：1
> 
> 时间：2012-12-07T15:42:50.100
> 
> 标签：jquery, click, toggle, bind, checkbox

我正在尝试使用我想用来显示/隐藏（切换）div但需要保留复选框值的简单复选框来解决问题，这意味着他们不能使用禁用属性，因为如果是这样，他们赢了'不提交。所以基本上我正在尝试的是禁用单击已选中的复选框以避免单击相同的复选框并切换 div。只有未选中的复选框应该是可点击的，并且通过继承 div 将切换。（我的问题是复选框，而不是 div 切换）

```
<input type="radio" id="cc_email0" name="form[cc_email]" value="0" checked="checked">
<input type="radio" id="cc_email1" name="form[cc_email]" value="1">

<div id="for_cc_mail0" style="display: block">The div content for 0</div>
<div id="for_cc_mail1" style="display: none">The div content for 1</div> 
```

提前感谢您的帮助！米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T15:48:42.940

您的输入是单选按钮而不是复选框。您可以尝试以下方法，而不是禁用输入：

```
var $div = $('div');
$('input[type=radio]').change(function(){
   $div
     .hide()
     .filter('[id="for_'+this.id+'"]')
     .show();
}) 
```

[http://jsfiddle.net/sPy2g/](http://jsfiddle.net/sPy2g/)

请注意，我已将复选框的 ID 从 更改`cc_email*`为`cc_mail*`。

# jquery - 避免在下面的绝对定位元素上发生点击事件

> ID：13766292
> 
> 赞同：4
> 
> 时间：2012-12-07T15:43:47.483
> 
> 标签：jquery, css, onclicklistener

我有 2 个元素，一个父元素及其子元素，并且两者都是绝对定位的。

我为每个元素都有一个单击处理程序，尽管当我单击子元素时，它后面的父元素也会捕获单击。

如何防止父元素接收到点击事件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T15:46:03.610

如果你想要一个纯 CSS 解决方案，你可以使用[`pointer-events: none;`](https://developer.mozilla.org/en-US/docs/CSS/pointer-events). 这将确保您的鼠标永远忽略父元素，因此请小心使用它。

另请注意，IE 或 Opera[不支持此功能。](http://caniuse.com/pointer-events)（或者至少，不是 HTML 元素，只是 SVG）

jQuery 替代方案是 e.StopPropagation，更多信息可以在[这里找到](https://stackoverflow.com/questions/3606536/how-can-i-get-jquery-to-ignore-parents-on-click)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T15:48:05.327

您可以使用 JQuery 并在父元素上简单地使用`preventDefault`or ：`return false`

```
$('#parent').click(function() {
    return false;
});

$('#child').click(function() {
    //do something
}); 
```

# c# - 使用多个循环将行插入 SQL Server 数据库

> ID：13766296
> 
> 赞同：0
> 
> 时间：2012-12-07T15:43:59.463
> 
> 标签：c#, sql-server

我正在收集要存储在数据库表中的用户列表及其信息。我在 Microsoft SQL Server Management Studio 中设置了这个数据库。数据库的主键设置为自增。当列表中没有更多用户时，我需要结束循环。我在测试帐户中有两个有效用户，但是我目前只有一个用户。我会更好使用 a`sqlDataAdapter`吗？

```
List<User> result = ims.ListUsers(req).ListUsersResult.Users;

SqlConnection connection = new SqlConnection(ConfigurationManager.ConnectionStrings["default"].ConnectionString);

for (int i = 1; i < result.Count(); i++)
{
    foreach (User user in result.Where(x => x.UserName.Contains('@')))
    {
        string sql = @"INSERT INTO UserInfo (UserID, UserName) VALUES (@UserID, @UserName)";

        using (SqlCommand command = new SqlCommand(sql, connection))
        {
            command.Parameters.AddWithValue("@UserID", i);
            command.Parameters.AddWithValue("@UserName", user.UserName);

            connection.Open();
            command.ExecuteNonQuery();
            connection.Close();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T15:45:44.173

我不明白为什么您需要外部`for-loop`来创建 ID，因为您不应该手动设置主键列。它会自动增加。完成后，您还应该始终关闭连接

这是完整的代码：

```
string sql = @"INSERT INTO UserInfo (UserName) VALUES (@UserName)";
using(var con = new SqlConnection(ConfigurationManager.ConnectionStrings["default"].ConnectionString))
using(var cmd = new SqlCommand(sql, con))
{
    con.Open();
    foreach(var user in result.Where(x => x.UserName.Contains('@')))
    {
        // you don't need to set the UserID when you've set made it an Identity column
        cmd.Parameters.AddWithValue("@UserName", user.UserName);
        cmd.ExecuteNonQuery();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T15:46:37.697

我认为您需要更换：

```
for (int i = 1; i < result.Count(); i++) 
```

和：

```
for (int i = 0; i < result.Count(); i++) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T15:47:34.733

你的问题是你有2个循环。您需要删除第一个 for 循环，而是在每次通过 foreach() 执行时增加一个 int 变量

您正在添加具有相同 UserID 的多个用户

```
int userID = 1

foreach (User user in result.Where(x => x.UserName.Contains('@')))
{
    // your code

    userID++;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T15:55:09.310

您不需要更新自增字段，它将由 SQL 服务器自动计数。试试这个代码：

```
 List<User> result = ims.ListUsers(req).ListUsersResult.Users;

        SqlConnection connection = new SqlConnection(ConfigurationManager.ConnectionStrings["default"].ConnectionString);

        foreach (User user in result.Where(x => x.UserName.Contains('@')))
        {
            string sql = @"INSERT INTO UserInfo (UserName) VALUES (@UserName)";

            using (SqlCommand command = new SqlCommand(sql, connection))
            {
                command.Parameters.AddWithValue("@UserName", user.UserName);
                connection.Open();
                command.ExecuteNonQuery();
                connection.Close();
            }
        } 
```

# java - 对于在 Google App Engine 中填充许多延迟任务的任务队列，最佳存储桶大小是多少？

> ID：13766298
> 
> 赞同：3
> 
> 时间：2012-12-07T15:44:02.847
> 
> 标签：java, python, google-app-engine, task-queue, deferred-execution

我的 Google App Engine 应用程序正在将大量[延迟任务](https://developers.google.com/appengine/docs/java/taskqueue/overview-push#Deferred_Tasks)添加到[任务队列](https://developers.google.com/appengine/docs/java/taskqueue/overview)中。这些任务计划每 x 秒运行一次。如果我正确理解了 bucket-size 属性**b**，那么高值会阻止延迟任务运行，直到添加**b**任务。但是，有一个接近实时的要求，即任务按计划运行。我不希望在达到**桶大小**之前阻止任务。相反，它们应该尽可能接近预定时间。

为了支持这个用例，我应该使用 1 的**桶大小**和 500 的**速率**（[这是当前的最大速率](https://developers.google.com/appengine/docs/java/taskqueue/overview-push#Quotas_and_Limits_for_Push_Queues)）吗？还有哪些其他方法可以支持这一点？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T19:40:54.417

存储桶大小不会阻止任务单独运行。它扮演着不同的角色。

假设您有一个空队列，其速率为每秒 500 个任务，并且有几个小时没有添加或启动任何任务。然后突然间一下子增加了大量的任务。您希望立即开始这些任务中的多少？将此数字设置为您的存储桶大小。例如，桶大小为 1000，将立即启动 1000 个任务（然后每秒 500 个）。

这是如何运作的？存储桶每秒添加 500 个令牌（队列的速率），最大为存储桶大小。当有可启动的任务时，只会在桶不为空时启动，每启动一个任务就会从桶中取出一个token。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T00:22:29.723

您不应该将任务队列 (TQ) 用于延迟任务，这些任务对于接近实时运行很重要，假设存储桶/速率设置将确保高吞吐量。在 Google 群组中有几个讨论主题是关于任务开始时间为几分钟或更长时间的罕见延迟。存储桶大小和速率不会对此产生影响——当您的高吞吐量 TQ 空闲时，您的 TQ 任务将简单地坐在那里。迄今为止，我还没有看到谷歌对为什么会发生这种情况的任何解释。同样，如果您将 TQ 用于接近实时的任务，您必须将任务在开始前延迟几分钟的罕见时间作为例外处理。（我实际上是这样做的，还没有受到负面影响，但是你必须有代码来处理结果 = 延迟任务）。

# ruby - Hstore 和 Rails

> ID：13766300
> 
> 赞同：2
> 
> 时间：2012-12-07T15:44:05.843
> 
> 标签：ruby, postgresql, activerecord, ruby-on-rails-3.2, hstore

我正在尝试使用最新版本的 activerecord-postgres-hstore gem 在 Rails 3.2.9 项目中使用 Hstore，但在使用 ActiveRecord 为 Hstore 中的值提供的 store_accessor 时遇到了一些麻烦。

我的模型如下所示：

```
class Person < ActiveRecord::Base
  serialize :data, ActiveRecord::Coders::Hstore
  attr_accessible :data, :name
  store_accessor :data, :age, :gender
end 
```

当我进入 rails 控制台时，我得到的是：

```
Loading development environment (Rails 3.2.9)
1.9.3-p327 :001 > p = Person.find(3)
  Person Load (9.8ms)  SELECT "people".* FROM "people" WHERE "people"."id" = $1 LIMIT 1  [["id", 3]]
 => #<Person id: 3, name: "Leo", data: {"age"=>"34", "gender"=>"male"}, created_at: "2012-12-07 15:01:53", updated_at: "2012-12-07 15:27:40"> 
1.9.3-p327 :002 > p.age
 => nil 
1.9.3-p327 :003 > p.age = "204"
 => "204" 
1.9.3-p327 :004 > p.save!
   (0.2ms)  BEGIN
   (0.6ms)  UPDATE "people" SET "data" = 'age=>34,gender=>male,age=>204', "updated_at" = '2012-12-07 15:28:33.097404' WHERE "people"."id" = 3
   (2.2ms)  COMMIT
 => true 
1.9.3-p327 :005 > p
 => #<Person id: 3, name: "Leo", data: {"age"=>"204", "gender"=>"male"}, created_at: "2012-12-07 15:01:53", updated_at: "2012-12-07 15:28:33">
1.9.3-p327 :006 > exit
% rails c                 12-12-07 - 10:28:35
Loading development environment (Rails 3.2.9)
1.9.3-p327 :001 > p = Person.find(3)
  Person Load (6.9ms)  SELECT "people".* FROM "people" WHERE "people"."id" = $1 LIMIT 1  [["id", 3]]
 => #<Person id: 3, name: "Leo", data: {"age"=>"34", "gender"=>"male"}, created_at: "2012-12-07 15:01:53", updated_at: "2012-12-07 15:28:33"> 
```

注意保存！确实更新了这个人。当我退出控制台并返回时，记录会返回到原始数据集。

另外，请注意，当我尝试访问它时，`age`它返回 nil。

如果有人想知道`store_accessor`ActiveRecord 中的方法是什么

**商店.rb**

```
def store_accessor(store_attribute, *keys)
  Array(keys).flatten.each do |key|
    define_method("#{key}=") do |value|
      send("#{store_attribute}=", {}) unless send(store_attribute).is_a?(Hash)
      send(store_attribute)[key] = value
      send("#{store_attribute}_will_change!") 
    end

    define_method(key) do
      send("#{store_attribute}=", {}) unless send(store_attribute).is_a?(Hash)
      send(store_attribute)[key]
    end
  end
end 
```

这很奇怪，因为当我`send(store_attribute)[key]`在控制台中执行同一行时，它可以工作：

```
1.9.3-p327 :010 >   p.send(:data)['age']
 => "34" 

1.9.3-p327 :011 > p.send(:data)['age'] = "500"
 => "500" 
1.9.3-p327 :012 > p.send("data_will_change!")
 => {"age"=>"500", "gender"=>"male"} 
1.9.3-p327 :013 > p.save!
   (0.2ms)  BEGIN
   (0.7ms)  UPDATE "people" SET "data" = 'age=>500,gender=>male', "updated_at" = '2012-12-07 15:41:50.404719' WHERE "people"."id" = 3
   (1.8ms)  COMMIT
 => true 
1.9.3-p327 :014 > p
 => #<Person id: 3, name: "Leo", data: {"age"=>"500", "gender"=>"male"}, created_at: "2012-12-07 15:01:53", updated_at: "2012-12-07 15:41:50"> 
1.9.3-p327 :015 > exit
% rails c                 12-12-07 - 10:41:57
Loading development environment (Rails 3.2.9)
1.9.3-p327 :001 > p = Person.find(3)
  Person Load (9.3ms)  SELECT "people".* FROM "people" WHERE "people"."id" = $1 LIMIT 1  [["id", 3]]
 => #<Person id: 3, name: "Leo", data: {"age"=>"500", "gender"=>"male"}, created_at: "2012-12-07 15:01:53", updated_at: "2012-12-07 15:41:50"> 
1.9.3-p327 :002 > 
```

知道这里可能会发生什么吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-07T16:24:24.003

我最终将 store_accessor 全部删除，并使用以下代码为 hstore 键添加访问器

**lib/hstore_accessor.rb**

```
module HstoreAccessor
  def self.included(base)
    base.extend(ClassMethods)
  end

  module ClassMethods
    def hstore_accessor(hstore_attribute, *keys)
      Array(keys).flatten.each do |key|
        define_method("#{key}=") do |value|
          send("#{hstore_attribute}=", (send(hstore_attribute) || {}).merge(key.to_s => value))
          send("#{hstore_attribute}_will_change!")
        end
        define_method(key) do
          send(hstore_attribute) && send(hstore_attribute)[key.to_s]
        end
      end
    end
  end
end

ActiveRecord::Base.send(:include, HstoreAccessor) 
```

**配置/初始化程序/active_record_extensions.rb**

```
require "hstore_accessor" 
```

**人**

```
class Person < ActiveRecord::Base
  hstore_accessor :data, :size, :shape, :smell
end 
```

# objective-c - iOS 子视图小部件连接到多个控制器

> ID：13766306
> 
> 赞同：1
> 
> 时间：2012-12-07T15:44:39.477
> 
> 标签：objective-c, ios, cocoa-touch

所以，我想创建一个可重用的小部件作为 xib 和子视图，可以出现在一定数量的特定屏幕上。这个小部件将有三个按钮，每个按钮都有一个动作。

我希望能够在多个视图控制器上处理这些操作。

所以说 ViewControllerA、ViewControllerD 和 ViewControllerF 可以处理三个按钮事件，每个事件都有自己的方式。

我已经创建了 nib 文件。如何将其导入特定的视图控制器，然后如何连接这些事件？

**编辑：我知道我可能会通过视图控制器设置插座，但 Apple 声明 UIViewController 仅用于全屏视图，而我的小部件仅占用屏幕的一小部分。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T16:22:47.280

你做得对。有一件事是，`iOS`它不是小部件。它是一个`UIView`.

**（对不起，我的代码中可能有任何拼写错误。我已经在 StackOverflow 中编写了自己）**

**按照以下步骤完成它..**

1）创建`xib`视图后，您需要有一个`UIView`子类文件。例如，您的`xib`名字喜欢这个`CustomView.xib`意味着然后创建一个像这样的文件`CustomView.m`和CustomView.h

2) 在您的`CustomView.xib`中，您需要将 设置`fileOwner`为您的`CustomView.h`.

3）在你的`CustomView.m`文件中，会有一个类似的方法`initWithFrame:`在那个方法中你需要像这样加载你的xib文件

```
NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"CustomView" owner:self options:0];
UIView *currentView = [topLevelObjects objectAtIndex:0];
[self addSubView:currentView]; 
```

4) 快结束了。在您的任何视图控制器中，您都可以使用此 xib

```
CustomView *newSubView = [[CustomView alloc]initWithFrame:CGRectMake(0,0,55,67)];
[self.view addSubView:newSubView]; 
```

就是这样。。继续。。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T15:53:17.510

您已经创建了一个 nib 文件，但请确保您还创建了将作为该 nib 文件控制器的 .h 和 .m 文件。您将不得不查找如何实现其他视图控制器可以捕获并以自己的方式执行的委托方法。这是一个很棒的教程，可帮助您开始使用自定义委托制作自定义类：[链接](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-custom-delegates/)

# delphi - Delphi - 运行时出现无效的流格式错误

> ID：13766310
> 
> 赞同：6
> 
> 时间：2012-12-07T15:44:51.367
> 
> 标签：delphi, networking, stream, paging

德尔福 6 教授

我们有很多应用程序。这些程序有 8-12 MB 大小。

在此期间，我们多次收到有关“无效流格式”错误的报告。

我们使用共享的 Windows（或 Linux）文件夹来存储应用程序，用户通过链接从这些目录运行它们。这意味着操作系统正在分页文件，并仅加载所需的部分。

以前我们得到 C000006 异常。据我所知，这意味着文件分页（加载）因任何网络问题（超时等）而失败。

现在我们面临“无效的流格式”错误和“无效的属性 xxxx”错误。

如果我知道的话，这两个错误都是由“分页问题”引起的，但是代码中发生了 C06，并且在 Exe 的数据区域中发生了流错误。但也许我知道错了...

无论如何，问题很奇怪。有时我们得到它，有时我们没有。

如何避免？这些错误阻止用户创建新对话框，使用程序......

（在其他地方，用户使用了 wifi - 然后我们得到了相同的副作用。）

也许你有任何想法如何预防，避免这个问题。

UPX（与防病毒软件）？将exe-s复制到本地？

该客户的系统管理员是“我们的敌人”，因为他们说：“一切正常”。问题的根源无法确定...

感谢您的每一个想法：dd

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T16:30:26.257

假设您的分析是正确的，并且问题在于可执行文件位于连接不稳定的网络驱动器上，那么就有了解决方案。您需要在可执行文件中添加 PE 标志，强制 Windows 在运行之前将文件从网络复制到本地计算机。

确保您的 .dpr 文件的 uses 子句包括`Windows`单位。然后添加这一行：

```
{$SetPEFlags IMAGE_FILE_REMOVABLE_RUN_FROM_SWAP or IMAGE_FILE_NET_RUN_FROM_SWAP} 
```

就`begin`在您的 .dpr 文件中。我们添加了`Windows`单位，以便识别这两个常数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T20:29:03.580

例如，另一种可能性是使用 upx 工具打包 exe。

[http://upx.sourceforge.net/](http://upx.sourceforge.net/)

它将在运行之前扩展内存中的整个文件。

它将节省带宽。

# autocomplete - 如何为 tcsh 中的制表符补全提供颜色？

> ID：13766313
> 
> 赞同：1
> 
> 时间：2012-12-07T15:45:07.670
> 
> 标签：autocomplete, colors, tcsh

（[交叉发布到 unix.stackexchange.com](https://unix.stackexchange.com/q/58156/28585)）

[这个问题](https://stackoverflow.com/questions/12063225/how-to-color-a-prompt-on-freebsd-cshrc)和[答案](https://stackoverflow.com/a/12063749/923794)教我们如何在 tcsh 提示中引入颜色。

[该网页](http://www.unix.com/unix-dummies-questions-answers/174664-how-change-color-when-doing-echo-tcsh.html)很好地解释了如何将颜色添加到`echo`命令的任何输出中：

```
> echo \\e[1\;30mBLACK\\e[0m
BLACK
> echo '\e[1;30mBLACK\e[0m'
BLACK 
```

上例中的“BLACK”一词以黑色（或深灰色）前景色打印（取决于整体配色方案）。

现在我想把它引入`[TAB]`到`tcsh`. 我试过：

```
complete testcmd 'p/*/`echo '"'"'\e[1;30mf834fef\e[0m'"'"'`/' 
```

我得到：

```
> testcmd [TAB]
> testcmd ^[\[1\;30mf834fef^[\[0m 
```

显然，这些字符失去了它们的特殊意义。希望我只是没有得到正确的转义。但我尝试了其他几种方法。所以任何帮助表示赞赏。

真正的用例是我有一个命令完成，它提供了三种不同类型的完成，我想在视觉上区分这些类型。备选方案也由外部命令计算。这就是为什么我需要完成以使用带有外部命令的反引号，例如`echo`. 我不关心这个命令的细节。`tcsh`如果您使用'命令使其以任何方式工作，`complete`我可能会适应（考虑`perl -pe`包装器等）。

*我认为这必须*以某种方式起作用的原因是，如果您键入`ls [TAB]`. 这在我的设置中正常工作。您也可以`ls -1F`在自动完成内部使用，并且输出的颜色`ls`也可以通过管道传输。一个例子是：

```
complete testcmd 'p/*/`ls -1F`/' 
```

更新：正如用户 mavin 指出的那样，`ls`这个例子中的着色确实没有通过管道传递。的颜色`ls`会丢失，但自动补全可以根据 LS_COLOURS 变量重新应用颜色，该变量基于 ls 添加的`/`和`*`标记结尾等提示。这可以通过执行来验证

```
complete testcmd 'p/*/`ls --color -1`/' 
```

它无法提供颜色，仅提供乱码输出。（字面意思是通过转义字符序列管道）

我在`tcsh`版本 6.13.00

有任何想法吗？指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T13:51:08.307

在您的示例中，颜色*没有*从. 即使您设置为产生单色输出，您也会发现在这里获得颜色，但如果您不使用. 发生的事情是 tcsh 正在根据添加到每个文件名末尾的符号进行自己的着色。例如：`complete testcmd 'p/*/`ls -1F`/'`*`ls``ls``-F``ls -F`*

 *```
complete testcmd 'p%*%`echo dir/ symlink@ device# socket=`%' 
```

您可以在完成生成器中利用它，例如，

```
complete testcmd 'p/*/`echo foo bar | perl -lane '"'"'print join " ", map { $_. "%" } @F'"'"'`/' 
```

问题是您最终会在完成的命令行中使用这些符号，并且每次都必须手动退格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T13:54:22.297

`tcsh`将根据其后缀为文件名着色，具体取决于`$LS_COLORS`环境变量（例如，将所有`*.gz`文件显示为红色）。您可以预先计算潜在完成列表，将它们全部放入 中`$LS_COLORS`，然后设置虚拟文件以供完成使用。如果您使用`precmd`别名，则可以在每次显示提示时自动重新计算完成。

```
complete testcmd "p#*#F:$HOME/.cache/testcmd-completions#"
alias prep-testcmd "setenv LS_COLORS '*red=01;31:*green=01;32:' && rm -r ~/.cache/testcmd-completions && mkdir -p ~/.cache/testcmd-completions && touch ~/.cache/testcmd-completions/red ~/.cache/testcmd-completions/green"
alias precmd prep-testcmd 
```

另外：最好将它与 ``-style 完成而不是 F 样式完成一起使用；这样你就不需要创建虚拟文件。但是，我在 tcsh 6.17 中尝试过，但没有成功。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T10:26:05.580

[我的这个问题有一个更新的示例 git tcsh 完成，它使用了用户 mavin 在](https://stackoverflow.com/q/12533796/923794)[他的回答](https://stackoverflow.com/a/13892780/923794)中指出的技巧。*

# linux - inode 数据结构中的数据指针

> ID：13766317
> 
> 赞同：3
> 
> 时间：2012-12-07T15:45:19.463
> 
> 标签：linux, linux-kernel, kernel

我已经浏览了`inode`linux 内核代码中的代码，但我无法弄清楚`inode`. 我知道有 15 个指针 [0-14]，其中 12 个是直接的，1 个是单间接的，1 个是双间接的，1 个是三重间接的。

有人可以找到这些数据成员吗？另外请说明你是如何找到这些的，因为我在谷歌上搜索了很多次不同的关键词，但都是徒劳的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T16:44:18.607

访问其数据取决于特定的文件系统，因此通常没有“数据指针”（某些文件系统可能是虚拟的，这意味着动态生成数据或从网络检索数据）。

如果你有兴趣`ext4`，你可以查看 ext4 特有的 inode 结构 ( `struct ext4_inode`) `fs/ext4/ext4.h`，其中一个 inode 的数据确实被 12 个直接块的索引引用，1 个单间接，1 个双间接和 1 个三间接.

这意味着 inode 数据的块 [0..11] 具有 numbers `e4inode->i_block[0/1/.../11]`，而`e4inode->i_block[12]`是一个由数据块编号本身填充的块的编号（因此它在 [12, 12 + fs- 范围内保存 inode 数据块的索引>block_size / sizeof(__le32)]. 相同的技巧适用于`i_block[13]`，只是它保存从 index 开始的双间接索引（用块的索引填充的块，这些块的索引包含保存实际数据的块列表）`12 + fs->block_size / sizeof(__le32)`，并`i_block[14]`保存三重间接索引。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-21T04:35:02.610

如此处所述：

[http://computer-forensics.sans.org/blog/2010/12/20/digital-forensics-understanding-ext4-part-1-extents](http://computer-forensics.sans.org/blog/2010/12/20/digital-forensics-understanding-ext4-part-1-extents)

Ext4 使用范围而不是块指针来跟踪文件内容。

如果您对使用内容指针的 ext3/ext2 数据结构感兴趣：

[http://www.slashroot.in/how-does-file-deletion-work-linux](http://www.slashroot.in/how-does-file-deletion-work-linux)

有很多很好的图表来详细说明它。和这里：

[http://mcgrewsecurity.com/training/extx.pdf](http://mcgrewsecurity.com/training/extx.pdf)

在第 16 页有“块指针”详细信息的示例（基本上是块号，或相对于磁盘映像开始的偏移值，1 个块通常为 512 字节）。

如果您想以物理方式遍历文件系统，例如使用 ext3 格式化的硬盘驱动器，请参阅以下内容：

[http://wiki.sleuthkit.org/index.php?title=FS_Analysis](http://wiki.sleuthkit.org/index.php?title=FS_Analysis)

但是您总是可以只使用“dd”命令来做所有事情，只需要知道从哪里开始读取和停止读取，并且 dd 命令的输入通常是硬盘映像本身的副本，原因有很多。

# wordpress - Wordpress 网站中的重定向循环错误

> ID：13766322
> 
> 赞同：0
> 
> 时间：2012-12-07T15:45:34.580
> 
> 标签：wordpress, .htaccess

我已经切换到一个新的网站设计（从静态到 wordpress），所以为了将旧页面映射到新页面，我编辑了 htacess 文件，但它导致了重定向循环，并且网站在几天后关闭了。所以我删除了htacess 文件。我应该如何进行正确的重定向。

这是来自 htacess 的重定向代码内容

```
 # BEGIN WordPress
    <IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /
    RewriteRule ^index\.php$ - [L]
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule . /index.php [L]
    </IfModule>

    # END WordPress

Redirect /test1.htm http://www.mysite.com/test1

Redirect /test2.htm http://www.mysite.com/test2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T16:03:37.550

`Redirect`是来自与 is 不同模块的命令`RewriteRule`。这会经常引起问题。

只需使用`RewriteRule`.

```
#just in case test.html still exists in the filesystem
Options -MultiViews

<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /

RewriteRule ^test1\.htm /test1 [L,R=302]
RewriteRule ^test2\.htm /test2 [L,R=302]

# BEGIN WordPress
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
# END WordPress
</IfModule> 
```

# mod-rewrite - Mod Rewrite + QSA：重写目标和查询字符串中的相同查询字符串参数 - 可以强制使用目标吗？

> ID：13766323
> 
> 赞同：2
> 
> 时间：2012-12-07T15:45:40.023
> 
> 标签：mod-rewrite, query-string

我们有以下重写规则：

```
 RewriteRule ^([A-Za-z0-9\_]+)$ index.php?rewrite=$1 [L,QSA] 
```

我们想知道是否有一种方法可以让 ?rewrite=$1 优先于通过请求 uri 中的查询字符串传递的方法？

因为就目前而言，如果点击以下网址，则由于**QSA 标志（我们确实需要它）：**

```
 http://www.domain.com/this_rewrite_will_match_the_above_rule?rewrite=some_value 
```

PHP 中 $_GET['rewrite'] 的值将是**some_value**，而不是**this_rewrite_will_match_the_above rule**。

在我们开始修改重写并添加 RewriteCond 以匹配查询字符串等之前...我们希望设置一个标志以便目标 url (index.php?rewrite=$1 在这种情况下)优先于传递的查询字符串值。

希望这是有道理的。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T21:05:58.020

有点骇人听闻

```
RewriteRule ^([A-Za-z0-9\_]+)$ index.php?%{QUERY_STRING}&rewrite=$1 [L] 
```

这是有效的，因为在 php 中，第二个会`rewrite=...`覆盖第一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T21:26:57.530

我已经搜索了一些机制来在 Apache 重写中多次且非常强烈地覆盖单个查询字符串参数，但看起来没有选择这样做，即使使用最新的 Apache 版本（撰写本文时为 2.4.3） .

但是还有一个替代方案，它利用了 PHP 查询字符串解析器仅返回多个相同查询字符串参数中的最后一个这一事实。

例子：

```
http://www.domain.com/index.php?id=123&id=456 
```

这将在 $_GET 中返回以下单个 (!) 条目：

```
array(1) {
  ["id"]=>
  string(3) "456"
} 
```

**因此，您可以通过简单地将任何覆盖参数附加**到现有查询字符串的末尾（而不在查询字符串中删除它们）来解决您的问题。重复参数的最后一次出现是使其进入 $_GET 数组的参数。

不幸的是，QSA 开关不适合这种技术，因为它总是将原始参数附加到新查询字符串的末尾。没有可以预先设置旧参数的开关。因此，您必须绕道而行，使用 RewriteCond 自己捕获并添加原始查询字符串，而不是使用 QSA：

```
RewriteCond  %{QUERY_STRING}  ^(.*)$
RewriteRule ^([A-Za-z0-9\_]+)$ index.php?%1&rewrite=$1 [L] 
```

RewriteCond 的唯一功能是捕获 %1 中的查询字符串。条件的正则表达式`(.*)`总是匹配的，所以下面的 RewriteRule 总是被执行。

使用这种技术，您的上述测试用例将重写为...

```
http://www.domain.com/index.php?rewrite=some_value&rewrite=this_rewrite_will_match_the_above_rule 
```

...这将由 PHP 查询字符串解析器解释为

```
$_GET["id"] => "this_rewrite_will_match_the_above_rule" 
```

...这就是你想要的。

请注意，这仅在您从 PHP 的 $_GET 数组中获取查询字符串值时才有效。`$_SERVER["QUERY_STRING"]`如果您解析自己的内容或使用任何其他编程语言，它不一定会起作用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T17:03:10.783

我选择创建自己的答案，因为它比 Jpsy 和 Gerben 提供的示例稍微干净一些。

应得的信用，他们的建议是让我来到这里的原因，我只对它们进行了扩展：

因此，我们的最终解决方案包括 2 条规则。

```
# check if querystring is not empty (this is the addition vs other answers)
RewriteCond %{QUERY_STRING} !^$
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([A-Za-z0-9\_]+)$ index.php?%{QUERY_STRING}&rewrite=$1 [L] 
```

如果上述查询字符串失败（主要是查询字符串为空），则将应用此规则。

```
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([A-Za-z0-9\_]+)$ index.php?rewrite=$1 [L] 
```

我选择进行这种双重规则设置的原因是为了避免在查询字符串为空时使 php 服务器变量被 "?&rewrite=...." 污染。

感谢 jpsy 和 gerben 的帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-14T08:28:18.227

我使用了以下说明：

```
RewriteRule ([^\?]*)\?(.*) $1?$2 [N]                          (1)
RewriteCond %{QUERY_STRING} (.*?)&?(rewrite=[^&]+)&?(.*)      
RewriteRule ^(.*)$ $1?%1&%3 [N]                               (2)
RewriteRule ^(.*)$ $1?domain=newValue [L,QSA]                 (3) 
```

这个技巧是由前两个规则中的 [N] 标志完成的，这会导致重写引擎重新处理输出。

规则 (1) 简单地按原样重写 url。我需要它，因为我将 mod_rewrite 与 mod_proxy_ajp 一起使用，并且在第一次迭代中，查询字符串没有从 url 中拆分出来。第一行执行后，url 不变，但引擎将从查询字符串中拆分路径。

规则 (2) 迭代并从查询字符串中删除所有出现的参数“rewrite”。

规则 (3) 设置参数的新值，并附加任何从规则 (2) 完成的替换中幸存的查询字符串。

# javascript - 在指定之前不要继续 Javascript for-loop

> ID：13766327
> 
> 赞同：5
> 
> 时间：2012-12-07T15:45:45.547
> 
> 标签：javascript, for-loop, continue

我需要暂停一个 for 循环并且在我指定之前不要继续。对于我循环遍历的数组中的每个项目，我运行一些在单独设备上运行操作的代码，并且我需要等到该操作完成后才能循环到数组中的下一个项目。

幸运的是，该代码/操作是一个光标并具有一个`after:`部分。

但是，它会立即运行整个 for 循环，这是我需要防止的。有什么办法可以防止循环继续直到指定？或者也许是不同类型的循环或我应该使用的东西？

我的第一个（糟糕的）想法是在持续运行的 for 循环中创建一个 while 循环，直到`after:`光标的部分设置`boolean`为`true`. 这只是锁定了浏览器:(正如我所担心的那样。

有什么我能做的吗？我对javascript相当陌生。不过，我一直很享受我目前的项目。

这是`while-loop`尝试。我知道它会立即运行整个循环，因为`dataCounter`from `1`to `3`（当前数组中的两个项目）会立即运行：

```
if(years.length>0){
  var dataCounter = 1;
  var continueLoop;
  for(var i=0;i<years.length;i++){
    continueLoop = false;
    baja.Ord.make(historyName+"?period=timeRange;start="+years[i][1].encodeToString()+";end="+years[i][2].encodeToString()+"|bql:select timestamp, sum|bql:historyFunc:HistoryRollup.rollup(history:RollupInterval 'hourly')").get(
        {
          ok: function (result) {
          // Iterate through all of the Columns

          baja.iterate(result.getColumns(), function (c) {
            baja.outln("Column display name: " + c.getDisplayName());
          });
        },
        cursor: {
          before: function () {
          baja.outln("Called just before iterating through the Cursor");
          counter=0;
          data[dataCounter] = [];
          baja.outln("just made data["+dataCounter+"]");
        },
        after: function () {
          baja.outln("Called just after iterating through the Cursor");
          continueLoop = true;
        },
        each: function () {

          if(counter>=data[0].length) {
            var dateA = data[dataCounter][counter-1][0];
            dateA += 3600000;
          }
          else {
            var dateA = data[0][counter][0];
          }

          var value=this.get("sum").encodeToString();
          var valueNumber=Number(value);

          data[dataCounter][counter] = [dateA,valueNumber];
          counter++;
        },
        limit: 744, // Specify optional limit on the number of records (defaults to 10)2147483647
        offset: 0 // Specify optional record offset (defaults to 0)
        }
        })
        while(continueLoop = false){
          var test = 1;
          baja.outln("halp");
        }
    dataCounter++;
  }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T15:51:55.997

不要使用 for 循环来循环每个元素。您需要在`after:`中记住您刚刚完成的数组的哪个元素，然后移动到下一个元素。

像这样的东西：

```
var myArray = [1, 2, 3, 4]

function handleElem(index) {
    module.sendCommand({
        ..., // whatever the options are for your module
        after: function() {
            if(index+1 == myArray.length) {
                return false; // no more elem in the array
            } else {
                handleElem(index+1)}  // the after section
            }
    });
}

handleElem(0); 
```

我假设你调用一个带有一些选项的函数（就像你想要的那样`$.ajax()`），并且该`after()`部分是在你的过程结束时调用的函数（比如`success()`for `$.ajax()`）

如果您调用的“模块”未在`after()`回调中正确结束，您可以使用[setTimeout()](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)延迟启动下一个元素的进程

编辑：使用您的真实代码，它将是这样的：

```
function handleElem(index) {
    baja.Ord.make("...start="+years[index][1].encodeToString()+ "...").get(
    {
        ok: ...
        after: function() {
            if(index+1 == years.length) {
                return false; // no more elem in the array
            } else {
                handleElem(index+1)}  // the after section
            }
        }
    });
} 
```

# java - 重新加载类后如何保持变量值

> ID：13766328
> 
> 赞同：0
> 
> 时间：2012-12-07T15:45:44.157
> 
> 标签：java

你好我写了一个模拟java测验的程序。该程序有 3 个嵌套类，第一类要求提供用户信息（姓名 id# 等），第二类称为此类是实际测验当用户回答所有问题或时间用完时，测验结束那一点第三班的测验得分。如果用户失败了，他可以按下一个按钮，允许他再做一次测验。when the try again choice is selected a variable that keep track of tries is implemented by one. 但是，问题是跟踪用户尝试了多少次尝试的变量被擦除了，因为我编写代码的方式程序从第 1 类开始，然后是第 2 类和第 3 类，并且出于某种原因当类第二次重新加载时，变量会回到它的初始值。有没有办法可以保存变量以使其不会被擦除？任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T15:51:59.537

我建议在文件中写入值，以便在重新加载类时从那里读取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T15:49:38.687

您应该在磁盘上为您的测验信息保留某种持久性。检查[FileOutputStream](http://docs.oracle.com/javase/6/docs/api/java/io/FileOutputStream.html)和[FileInputStream](http://docs.oracle.com/javase/6/docs/api/java/io/FileInputStream.html)以读取和写入文件。如果你用谷歌搜索的话，会有很多教程（比如[这个](http://www.javapractices.com/topic/TopicAction.do?Id=42)。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T15:58:53.857

我假设你有类似的东西

```
public class A {    
    Object value;
    public void setValue(Object value) {
       this.value = value;
    }
    public Object getValue() {
       return value;
    }
} 
```

因此，当您销毁一个实例并创建一个新实例时，该值就消失了。

作为一种学术解决方案，您可以将其`value`移至课堂级别。

所以它会是：

```
public class A {    
    static final Object[] values;
    static void setValue(Object value) {
       values[0] = value;
    }
    static Object getValue() {
       return values[0];
    }
} 
```

这种方式`value`成员属于类而不是实例。

但不要*在*现实生活中的应用程序中这样做。重新考虑你的设计。

# linux - 如何使用 sed 或 awk 从路径中提取文件名

> ID：13766329
> 
> 赞同：4
> 
> 时间：2012-12-07T15:45:45.437
> 
> 标签：sed, linux, unix, sed, awk

我正在尝试从以制表符分隔的修改后的 apache Web 访问日志条目中解析文件名：

```
/common/common/img/pictos/klArrowRight.gif    /common/common/img/pictos/klArrowRight.gif   03/Dec/2012:00:00:00    127.0.0.1   03/Dec/2012:00:00:00    us   404 
```

我希望它像这样出来：

```
klArrowRight.gif    /common/common/img/pictos/klArrowRight.gif   03/Dec/2012:00:00:00    127.0.0.1   03/Dec/2012:00:00:00    us   404 
```

我在[sed](/questions/tagged/sed "显示标记为“sed”的问题")尝试过这样的事情：

> 's:.*/::'

但是，它太贪婪了，它吃掉了我的其余部分。我一直在看帖子，但到目前为止还没有运气。有什么提示吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-02-14T21:04:13.917

当只需要从给定的绝对路径中提取文件名时，给定的答案似乎都不完全正确。因此，我在这里给出解决方案。让我们考虑在变量*文件名*中我们有完整的路径，例如*filename=/ABC/DEF/GHI* 然后，

```
echo $filename | awk 'BEGIN{FS="/"}{print $NF}' 
```

将产生文件名*GHI*。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-07T16:17:37.260

只要你告诉它不要太贪心，你就可以很容易地用 sed 做到这一点：

```
% echo '/img/pictos/klArrowRight.gif 03/Dec/2012' | sed 's,^[^ ]*/,,'
klArrowRight.gif 03/Dec/2012
% 
```

（即“从行首开始，查找最长可能的非空格字符列表，后跟斜杠”）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-07T15:56:37.423

使用 perl regexp 和 basename（我认为你没有坚持使用 sed/awk）：

```
perl -p -e 'use File::Basename;s/([^\s]+\s+)[^\s]+\s+/$1/;print basename($1)' 
```

例子：

```
echo "/common/common/img/pictos/klArrowRight.gif /common/common/img/pictos/klArrowRight.gif 03/Dec/2012:00:00:00 127.0.0.1 03/Dec/2012:00:00:00 us 404" |
   perl -p -e 'use File::Basename;s/([^\s]+\s+)[^\s]+\s+/$1/;print basename($1)'

klArrowRight.gif /common/common/img/pictos/klArrowRight.gif 03/Dec/2012:00:00:00 127.0.0.1 03/Dec/2012:00:00:00 us 404 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-07T15:54:31.553

您问题中的输入/输出格式不正确。你需要这个吗？

```
awk '{gsub(/\/.*\//,"",$1); print}' file 
```

测试

```
kent$  echo "/common/common/img/pictos/klArrowRight.gif /common/common/img/pictos/klArrowRight.gif 03/Dec/2012:00:00:00 127.0.0.1 03/Dec/2012:00:00:00 us 404"|awk '{gsub(/\/.*\//,"",$1); print}' 
```

输出：

```
klArrowRight.gif /common/common/img/pictos/klArrowRight.gif 03/Dec/2012:00:00:00 127.0.0.1 03/Dec/2012:00:00:00 us 404 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-07T16:01:46.817

```
awk 'BEGIN{FS=OFS="\t"} {sub(/.*\//,"",$1)} 1' file 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-08T12:05:40.213

一种使用方式`GNU grep`：

```
grep -oP "[^/]*\t.*" file 
```

结果：

```
klArrowRight.gif    /common/common/img/pictos/klArrowRight.gif  03/Dec/2012:00:00:00    127.0.0.1   03/Dec/2012:00:00:00    us  404 
```

# c# - 访问实例化的密封类公共成员

> ID：13766332
> 
> 赞同：0
> 
> 时间：2012-12-07T15:45:54.283
> 
> 标签：c#, .net, sealed, class-instance-variables

我正在尝试`sealed`在我的程序中建立一个公共课程，

问题是，......因为我还是新鲜[**的尚未**]开发人员，我觉得这个问题有点困难......`C# .net`

 **对于 Question 中的问题，您可以直接跳到 Program example，或阅读以下背景：

DB_Schema 是`namespace`我创建的一个助手，用于处理数据访问

（它拥有`tables`And `SP`s 的名字 ..etc'）

它的一个类（下面）处理`Stored Procedures`，这个类包含 SP 参数的名称

```
public sealed class SProc
{
    public sealed class GetCPAReport
    {
        public const string RecordNum = "@RecordNum",
                            CPAColumnName = "@CPAColumn_Name",
                            Value = "@value",
                            IsFreelance = "@isFreelance";
    }

} 
```

*   **程序中的用法：**

通过 SP 访问数据的方法内

```
private DataTable Get_RefTable_OfUsersBy(string DepartmetID)
{
    SProc.GetCPAReport SProcGetCpa = SProc.GetCPAReport();
    SP_Params.Add(new SqlParameter(SProcGetCpa.IsFreelance, 1));
} 
```

尝试访问其中一个实例 ( `SProcGetCpa`) 成员是不可能的，我尝试过的方式。

我可以只上课+它**不是**`SProc`子类，而且...`UpdateCPAReport` **`sealed`**

 ****但是**当我在搜索问题“**可以实例化密封类吗？**

好吧..答案是**肯定**的......虽然试图找到有关错误的信息：

***无法通过实例引用访问；改为使用类型名称来限定它***

不会产生任何结果，也不是**访问实例化`sealed class`公共成员**代码的示例，至少不适用于像我这样的新 .net C#arpers

## -**更新**

我想避免长行并为代表存储过程名称的字符串制作自定义短名称

代替

```
ParListEmployeeUsrs.SP_Params.Add(new SqlParameter(HTSPs.RobTC_CPA_Users_Names_JobPosition.IsFreelance, SelectedDepartmentID)); 
```

**更新 2**

对于寻求答案的这个主题的未来来者

*正如我们一位亲爱的朋友所建议的，在 StackOverflow 中*

如果你必须为你的类做一个简短的命名，在将它们用于当前 peoject 时：

把它放在你项目的`using`*s中*

```
using system...
using restOf.net
//just add your own as follows !

using shortClassName = myHelperNameSpace.MyIncrediblyUnnecessaryLongHelperClassName; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T15:47:57.500

`GetCPAReport`没有*任何*实例成员。`const`成员是隐式静态的。在 C# 中，您目前无法通过引用访问静态成员。

你只想：

```
SP_Params.Add(new SqlParameter(SProc.GetCPAReport.IsFreelance, 1)); 
```

我个人也会做`GetCPAReport`一个*静态*类。实例化它没有意义，因为它只包含常量......所以积极地防止它被实例化。****

# php - 当我将星期一定义为一周的第一天时，为什么 sql select 语句会失败？

> ID：13766339
> 
> 赞同：0
> 
> 时间：2012-12-07T15:46:07.047
> 
> 标签：php, mysql

我有一个 sql select 语句，它返回“last_edited”变量（时间戳）在本周内的所有行：

```
SELECT vote FROM votes WHERE WEEK(vote_time)=WEEK(now()) 
```

这很好用，但我希望一周从星期一而不是星期日开始，所以我尝试了这个：

```
SELECT vote FROM votes WHERE WEEK(vote_time, 1)=WEEK(now(), 1) 
```

但这没有返回任何结果。知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T16:03:34.000

尝试：

```
WEEK(timestamp, 1) 
```

查看[文档。](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_week)

# ruby-on-rails - 从控制台查看 rails 测试

> ID：13766341
> 
> 赞同：0
> 
> 时间：2012-12-07T15:46:15.797
> 
> 标签：ruby-on-rails

我正在使用一个简单的assert_select 运行我在rails 中创建的测试，它应该根据我的固定装置填充5 个div。但是每次它失败时说找到 0 个元素，而预期是 5 个。是否可以看到测试所基于的输出？

以下是给我带来麻烦的具体测试：

```
require 'test_helper'

class PostsControllerTest < ActionController::TestCase
  test "should get index" do
    get :index
    assert_response :success
    assert_select '.contentBox', minimum: 5
  end
end 
```

和错误：

> ```
> Finished tests in 0.403847s, 2.4762 tests/s, 4.9524 assertions/s.
> 
>   1) Failure:
> test_should_get_index(PostsControllerTest) [/var/www/site/test/functional/posts_controller_test.rb:7]:
> Expected at least 5 elements matching ".contentBox", found 0.
> 
> 1 tests, 2 assertions, 1 failures, 0 errors, 0 skips
> rake aborted! 
> ```

应该注意的是，当从 Rails 控制台（例如 Post.new 等）手动添加所有内容时，一切正常，我可以手动检查源代码并查看是否有适当数量的项目。所以它让我相信我在测试中做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T16:00:34.530

`puts @response.body`如果您想检查它，您应该能够使用它来打印返回的页面的正文。你也可以考虑使用 Capybara，如果你这样做了，你可以使用`put page.body`

您必须添加到测试中的是创建 5 个帖子。所以做类似的事情：

```
class PostsControllerTest < ActionController::TestCase
  test "should get index" do
    get :index
    puts @response.body #This should print what is returned from get:index
    assert_response :success
    assert_select '.contentBox', minimum: 5
  end
end 
```

更新评论中的问题：如果您的控制器中有： `@posts = Post.all`

那么在你看来，你应该有类似的东西：

```
<% @post.all do |post| %>
  <div class="contentBox">
    Title: <%= post.title %> 
  </div>
<% end %> 
```

# perl - 任何可以获取 UNIX 服务器制造商/型号和序列号的内置方法？

> ID：13766343
> 
> 赞同：3
> 
> 时间：2012-12-07T15:46:23.503
> 
> 标签：perl

我正在编写一个将在许多服务器上部署和执行的 Perl 脚本。我的一些要求是检索制造商、型号和序列号。不幸的是，我似乎无法弄清楚如何做到这一点。我没有看到任何内置库来执行此操作。

我不确定是否可以使用 Perl 不附带的库，因为当它在其他服务器上执行时我无法包含这些库。

有什么想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-07T16:07:05.050

有一个名为 perl 的模块[`Parse::DMIDecode`](http://search.cpan.org/perldoc?Parse::DMIDecode)，它将使用 Brian 指出的 dmidecode 程序。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-07T15:57:28.583

它不是 Perl 但你可以调用

```
$ sudo dmidecode 
```

从您的脚本中。这将转储 BIOS 信息并在我的机器上得到：

```
System Information
    Manufacturer: Hewlett-Packard
    Product Name: HP xw6600 Workstation
    Version:  
    Serial Number: CXC9062H43
    UUID: 53F3EB48-4CF9-DD11-BBDA-29023A11001F
    Wake-up Type: Power Switch
    SKU Number: RV725AV
    Family: 103C_53335X 
```

我不知道上面有多少是 a) 标准信息 b) 由我们的服务台在配置 PC 供我们使用时填充。但值得进一步研究。

从手册页`dmidecode`：

> dmidecode 是一种以人类可读格式转储计算机的 DMI（有人说是 SMBIOS）表内容的工具。此表包含系统硬件组件的描述，以及其他有用的信息，例如序列号和 BIOS 版本。借助此表，您可以检索此信息，而无需探查实际硬件。虽然这在报告速度和安全性方面是一个好点，但这也使得所提供的信息可能不可靠

# android - 将数据写入新 NFC 标签不起作用？

> ID：13766350
> 
> 赞同：1
> 
> 时间：2012-12-07T15:46:49.697
> 
> 标签：android, nfc, ndef

我是 NFC Android 应用程序开发的新手。我完成了应用程序开发，一切正常。作为测试的一部分，我使用 MifareClassic 和 MifareDesfire 标签进行读写。我以 Ndef 格式存储数据。最初，我将上述测试标签与 Nxp tagwriter 和 Tagstand Tagwriter 等其他应用程序一起使用，然后我与我的应用程序一起使用。所以一切正常。甚至后来我使用我的应用程序从 Sony Felica 标签（新标签）中写入和读取数据，这也很好。所以我将应用程序传递给客户进行审查，但我开始知道该应用程序不是在新标签上写的。如果它们是从其他应用程序重置的，那么它工作正常。所以我在这里做了同样的测试，发现和客户报告的问题一样。可能是什么问题？有人遇到过同样的问题吗？使用前需要格式化吗？如果是这样怎么做？有人帮助解决问题。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T23:00:16.073

有些标签不是由制造商格式化的，但可以格式化为 NDEF 存储。典型的例子是 MIFARE Classic、Ultralight 和 DESFire 标签，而 FeliCa Type 3 标签已经由制造商格式化（用户无法格式化）。

Android 提供了[`NdefFormatable`](http://developer.android.com/reference/android/nfc/tech/NdefFormatable.html)用于 NDEF 格式化的类。每当标签不支持`Ndef`该类，但支持`NdefFormatable`该类时，您可以尝试通过调用该`format()`方法来格式化该标签。但是，不能保证这会奏效。通常，供应商提供的完全空的标签将产生最佳效果。

# sql - SQL：使用 SELECT 将数据插入带有额外列的表中

> ID：13766353
> 
> 赞同：2
> 
> 时间：2012-12-07T15:46:55.063
> 
> 标签：sql, sql-server, select, insert

我有一张`Table1`有 59 列的表。`Table2`最后是`Table1`一个额外列的副本`COLUMN 60`。因此`table2`有 60 列。

我正在尝试将值从 to 复制并将`table1`额外`table2`列的值设置`table2`为“value”

像这样的东西

```
INSERT INTO Table2
   SELECT * FROM Table1, 'value' AS 'COLUMN 60' 
```

我怎样才能做到这一点？使用上面的代码给我一个错误：

> *只有在使用列列表并且 IDENTITY_INSERT 为 ON 时，才能为表“TableLocation”中的标识列指定显式值。*

我不想指定列名，因为它们太多了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-07T15:49:47.367

尝试这个：

```
SET IDENTITY_INSERT dbo.Table2 ON

INSERT INTO Table2
SELECT *, 'value' AS 'COLUMN 60' FROM Table1

SET IDENTITY_INSERT dbo.Table2 OFF 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T15:49:54.963

您知道您可以从 SSMS 中拖动列名，对吗？导航到表格，然后将列文件夹拖到查询窗口中，它将为您列出所有列

现在，如果您想保留身份值，请使用

```
SET IDENTITY_INSERT dbo.Table2 ON

--INSERT HERE
-- make sure to list all the columns, it is required

SET IDENTITY_INSERT dbo.Table2 OFF 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T15:52:48.410

真的需要在一个声明中完成吗？

```
INSERT INTO Table2
SELECT * FROM Table1

ALTER TABLE Table2
ADD Column60 varchar 
```

# typescript - TypeScript 和继承

> ID：13766355
> 
> 赞同：1
> 
> 时间：2012-12-07T15:46:59.570
> 
> 标签：typescript

我需要一点帮助`TypeScript`。如何做~~扩展方法~~继承？

假设我们有一个`MyClass`只用一个方法命名的类`Method1()`：

```
class MyClass {
   constructor () { }

   public Method1(): void {
   }
} 
```

现在我想创建一个子类，添加一个名为的新方法`Method2()`：

```
class MyClassExtension {
   public Method2(): void {
   }
} 
```

当我有接口时，我可以通过声明一个同名的新接口来做到这一点：

```
interface MyInterface {
   Method1(): void;
}

interface MyInterface {
   Method2(): void;
}

var x: MyInterface;
x.Method1(); // ok
x.Method2(); // ok 
```

但我不知道如何在课堂上做到这一点：/any1可以帮助我吗？

提前致谢！！！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-07T16:04:41.993

这是标准的类继承，所以你可以这样做：

```
class MyClassExtension extends MyClass {
   public Method2(): void {
   }
} 
```

在您的`interface`示例中，您没有声明具有相同名称的新接口，而是将`MyInterface`定义拆分为两个部分定义。接口定义是开放式的，但类不是。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T16:58:21.113

根据您对 JohnnyHK 的回答，您可以执行以下操作吗？

如果您现有的 jquery.d.ts 看起来像这样：

```
interface JQuery {
    //...OTHER MEMBERS IN JQUERY
    addClass(classNames: string): JQuery;
    addClass(func: (index: any, currentClass: any) => JQuery);

    attr(attributeName: string): string;
    attr(attributeName: string, value: any): JQuery;
    //...OTHER MEMBERS IN JQUERY
}

interface JQueryStatic {
    //...OTHER MEMBERS IN JQUERY
    parent(selector?: string): JQuery;

    parents(selector?: string): JQuery;

    parentsUntil(selector?: string, filter?: string): JQuery;
    parentsUntil(element?: Element, filter?: string): JQuery;
    //...OTHER MEMBERS IN JQUERY
}

declare var jQuery: JQueryStatic;
declare var $: JQueryStatic; 
```

然后，您需要在代码中某处做的就是定义扩展方法，例如：

**文件1.ts**

```
///<reference path='jquery.d.ts'/>
interface JQuery {
    myNewExtensionMethod() : string;
}
interface JQueryStatic {
    myNewExtensionMethod() : string;
}

jQuery.myNewExtensionMethod = () => {
    return "11";
}

$.myNewExtensionMethod = () => {
    return "11";
} 
```

然后使用它们：

**文件2.ts**

```
///<reference path='file1.ts'/>
var result = $.myNewExtensionMethod(); 
```

# c# - 从继承的类中重写虚方法，但保留基类的注释

> ID：13766357
> 
> 赞同：6
> 
> 时间：2012-12-07T15:47:00.683
> 
> 标签：c#, comments

> **可能重复：**
> [C# 的注释继承（实际上是任何语言）](https://stackoverflow.com/questions/342964/comment-inheritance-for-c-sharp-actually-any-language)

在我的应用程序中，我的基类清楚地定义了每个虚拟方法的用途。

当我继承我的基类并覆盖虚拟方法时，我不得不重新输入注释。

现在，我知道为什么默认情况下它不复制注释，这是有道理的，但是由于我有许多从我的基类继承的类，因此复制整个 XML 注释以`<para>`在注释底部添加附加内容变得令人厌烦。

这就是它的方式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T15:49:17.100

您可以使用[ReSharper](http://www.jetbrains.com/resharper/)。每当您实现任何接口时，它也会带来 XML 注释（如果您愿意的话）。

# iphone - iPhone 和 Xcode 钥匙串 - 无法删除钥匙串？

> ID：13766358
> 
> 赞同：2
> 
> 时间：2012-12-07T15:47:01.867
> 
> 标签：iphone, in-app-purchase, keychain

我有一个应用程序通过 KeyChainWrapper 写入钥匙串以验证应用内购买。一切正常，除了我似乎无法删除钥匙串项目。通过 XCode 运行时我可以删除，但是，当我从 App Store 下载应用程序时，进行实际的应用程序内购买，当我在我的应用程序中运行我的重置代码时，钥匙串不会被删除。我认为设备上安装了两种不同的钥匙串项目，一种来自实际的应用内购买，另一种来自沙盒模式。我想删除钥匙串，所以当我从应用商店下载时，我的应用恢复正常，无需应用内购买。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T16:22:53.870

我有同样的问题：在设备上测试 MKStoreKit（因为它在 iOS sim 中不起作用），购买了我的测试功能，现在它存储在设备上的钥匙串中的某个地方，我什至不知道在哪里 - MKStoreKit 会自动执行此操作.

从设备中删除应用程序不起作用。我不认为唯一的方法是重置设备...

# c++ - 对虚拟监视器使用单应性

> ID：13766361
> 
> 赞同：2
> 
> 时间：2012-12-07T15:47:04.373
> 
> 标签：c++, image-processing, augmented-reality, openframeworks, homography

我目前正在做一个项目，我需要在游戏期间创建一个虚拟屏幕以获取反馈

我的程序在跟踪位置绘制图像。我不想让这个图像跟随我的 4 个跟踪点，所以它可以缩放和旋转。

我需要的是让单应性工作，我很抱歉问这个问题，因为我知道有很多不同的文章，我一直在尝试阅读其中很多，但他们没有对我来说没有多大意义。我现在面临的问题是我不知道该怎么做。

我可以让它缩放图像的纹理或内容，但它保持相同的高度和宽度格式。它现在不旋转它，因为我还没有它的更新功能，我也不知道如何创建它。我需要它来拉伸图片本身，以便它根据跟踪的点进行缩放。

通过这篇文章，我希望你能在正确的方向上帮助我，以便相应地缩放我的图像格式，这对我来说将是一个重大突破。

我在 Windows 7 上的 Codeblocks (C++) 中使用带有 openCV 和 ofxCV 插件的 openframeworks。

ofxCv 的插件中有一些功能，我很困惑：例如，我不太了解`"imitate();"`它的工作原理和作用。这既不是：

```
 "homography = findHomography(Mat(dstPoints), Mat(srcPoints);" 
```

和：`"warpPerspective(origImg, warpImg, homography, CV_INTER_LINEAR);"`

我不确定我是否正确使用了这些，并且很难找到关于这些的适当文档，这对我来说很有意义。

我怀疑的另一件事是在这项任务中使用矩阵。

正如您可能已经知道的那样，我真的不是一个经验丰富的程序员。任何正确方向的帮助将不胜感激！

这是所有代码的粘贴：http: [//pastebin.com/MFfJqGZ1](http://pastebin.com/MFfJqGZ1) 最有趣的部分，或者我个人认为我遗漏了什么或做错了什么是在第 199-223 行之间。这是头文件： http: [//pastebin.com/XfQySAmh](http://pastebin.com/XfQySAmh)

非常感谢提前

最好的问候杰斯珀

# objective-c - 建立蓝牙连接后如何自动启动iOS应用程序？

> ID：13766362
> 
> 赞同：3
> 
> 时间：2012-12-07T15:47:04.783
> 
> 标签：objective-c, ios, bluetooth, automation, gamekit

所以基本上我想做的就像标题所说的那样，当我与我的 iOS 设备建立蓝牙连接时，应用程序应该会自动启动。我怎样才能做到这一点？

观察：GameKit 用于连接。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T15:50:41.017

如果不越狱设备并编写/安装 Springboard 插件，这在 iOS 中是不可能的。

没有 Apple 提供的用于启动应用程序的 API，开发人员只能编写在用户启动他们的应用程序时运行的代码。

# c++ - CDT 索引器找不到 std::unordered_map

> ID：13766364
> 
> 赞同：3
> 
> 时间：2012-12-07T15:47:23.177
> 
> 标签：c++, eclipse-cdt, std, unordered-map

我的 Eclipse CDT 索引器显然找不到`std::unordered_map`，**尽管编译器可以找到。**它显示以下“错误”：

![在此处输入图像描述](../Images/67eaa5ca29aa72af47a993d229e215ce.png)

我的项目的“包含”文件夹如下所示：

![在此处输入图像描述](../Images/f284e7a60672ba2faa2e00a6453b98b1.png)

我如何告诉索引器如何查找`std::unordered_map`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-08T12:01:36.800

有关 indexer-C++11-problem 的一般解决方案，请参阅此问题的答案：[Eclipse CDT indexer does not know C++11 containers](https://stackoverflow.com/questions/17131744/eclipse-cdt-indexer-does-not-know-c11-containers)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T13:51:53.470

我在 Ubuntu 12.10 上使用 Eclipse Juno CDT 和 gcc4.7 并定义了 std=c++11。索引器仍然对 unordered_map 发疯。添加 TR1 解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T16:55:42.117

**unordered_map**在std的**tr1命名空间下。**

所以你必须添加这个包含：

```
#include <tr1/unordered_map> 
```

然后你可以通过这种方式在 main 中声明你的变量：

```
std::tr1::unordered_map<int,int> mapArray[10]; 
```

# vb.net - 网络上部分路径找不到

> ID：13766365
> 
> 赞同：1
> 
> 时间：2012-12-07T15:47:28.483
> 
> 标签：vb.net, windows-services, unc

我在执行 windows 窗体应用程序的 windows server 2008 R2 服务器上构建了一个服务。这一切正常，但是当我想在共享网络位置的日志中写入错误时，我得到了错误。

但奇怪的是，当我以管理员身份从 windows 窗体项目执行可执行文件时，它正在工作，但是当我在管理员帐户下运行服务时，我得到了错误。

这是我如何写入日志文件的代码所以我首先尝试写入 L:\ 当它不起作用时我在 C:\ 中写入什么是有效的

```
 Try
        Using writer As StreamWriter = New StreamWriter("L:\subfolder\subfolder\log.txt", True)
            writer.WriteLine(Now & " - project started. Build 7-12-2012")
        End Using
    Catch ex As System.Exception
        Using writer As StreamWriter = New StreamWriter("c:\subfolder\log.txt", True)
            writer.WriteLine(Now & " - ERROR " & ex.ToString)
        End Using
    Finally
    End Try 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T15:54:18.437

映射的驱动器通常依赖于用户和会话，因此当您在桌面上运行程序时，驱动器 L 存在，但是当作为服务运行时，它的驱动器 L 可能未映射并且不存在。我建议使用完整的网络路径，比如`\\servername\sharedfolder\...`

# .net - 图形 GDI+ 上的多线程

> ID：13766368
> 
> 赞同：2
> 
> 时间：2012-12-07T15:47:34.847
> 
> 标签：.net, multithreading, graphics

我在 GDI+ 中使用绘图线/弧线在创建的图形类 .FromImage 方法上进行了一些测试。

出于性能原因，我将其划分为多线程设置（使用多种方法进行测试：New Thread(AddressOf.. or Parallel.For... or New Task..) 我注意到这并没有提高性能。但是，如果我是用测试例程（例如：计算）替换 .Graphics.DrawPath 例程，那么使用多线程时性能会得到真正的提高（见图）这是什么原因以及如何解决？

我创建了四个设置：

1.  在图形上绘图：4 个线程（或任务）上的 4 倍（单独的 graphics.fromimage 上的 40000 个元素）（时间：1 秒 76 毫秒）

2.  在图形上绘图：4x（单独 graphics.fromimage 上的 40000 个元素）串行（时间：959 毫秒）

3.  计算：4个线程（或任务）上的4x（浮点测试计算）（时间：672毫秒）

4.  计算：4x（浮点测试计算）串行（时间：2s 189msec

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T17:29:02.770

任何线程安全的大型库都使用锁来保护共享状态。这些锁通常会导致线程之间的争用，一个线程会陷入等待另一个线程释放锁的困境。

这是[艾哈迈达定律](http://en.wikipedia.org/wiki/Ahmdal%27s_Law)在起作用。

# javascript - 控制台访问 $(document).ready 函数本地的 Javascript 变量

> ID：13766371
> 
> 赞同：24
> 
> 时间：2012-12-07T15:47:38.123
> 
> 标签：javascript, jquery, console

我怎样才能访问里面的一些变量

```
$(document).ready(function(){
    var foo=0;
    var bar = 3;
}); 
```

从谷歌浏览器控制台？如果我尝试 alert(foo)，我会收到一条消息，指出它没有定义。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-12-07T15:51:02.530

使用调试器设置断点。当调试器停止时，您将获得对它们的完全访问权限。

告诉您将它们放在全局范围内的其他答案很糟糕。不要仅仅因为你不知道如何使用正确的工具而使用不好的做法。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-12-07T15:49:37.813

您无法访问这些变量，因为它们是在函数闭包中定义的。唯一可以做到的方法是在函数范围之外对它们进行全局引用。

```
var foo, bar;

$(document).ready(function(){
    foo = 0;
    bar = 3;
}); 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2015-04-08T12:14:22.717

为什么不做一个适当的暴露变量？

```
$(document).ready(function(){
    var foo=0;
    var bar = 3;

    $.exposed = {
        foo: foo,
        bar: bar
    }
}); 
```

通过执行检查您的变量

```
console.log($.exposed.bar) 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-12-07T15:50:23.450

你不能，因为它们在封闭空间中。[这里](https://stackoverflow.com/questions/111102/how-do-javascript-closures-work)解释了闭包是如何工作的（[JavaScript 闭包是如何工作的？](https://stackoverflow.com/questions/111102/how-do-javascript-closures-work)）。`$(document).ready`要访问变量，只需在函数内设置断点

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-12-07T15:52:24.747

如果您*确实*需要从代码的不同部分访问这些变量（例如，在准备好文档时对其进行初始化，然后在其他地方访问它们），那么您必须在函数闭包之外声明它们。

当且仅当情况如此时，我不喜欢弄乱全局空间。我建议您为此使用基础对象：

```
var myObj = {};

$(function() {
   myObj.foo = 0;
   myObj.bar = 3;
}); 
```

**请注意**，只有在加载文档后才会设置它们！因此`alert(myObj.foo);`（或类似的东西）在`$(function() { ... });`块之后立即放置将产生`undefined`！

如果您只需要在该上下文中访问它们，则不要*在*函数之外声明任何内容。并尝试使用其他方法调试您的代码。例如，使用 chrome`console.log`非常有帮助。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-12-07T15:49:49.660

```
$(document).ready(function(){
    window.foo=0;
    window.bar = 3;
}); 
```

您将这些变量公开到全局范围内（真的不建议）

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-07T15:50:15.800

在 $(document).ready() 之外定义它们，然后在内部也可以访问它们。

```
var foo = 0, bar = 3;
$(document).ready(function(){
    alert(foo);
}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-03-01T12:09:26.187

实际上有一个hackish方法。您可能不应该使用它。设置断点。话虽如此，这是代码：

```
$(document).ready(
    readyClosure = function(access){
        var x = 5; 
        return eval(access);
    }
);
readyClosure('x'); // returns 5 
```

# twitter-bootstrap - Twitter Bootstrap Button Dropdown 不下拉

> ID：13766372
> 
> 赞同：5
> 
> 时间：2012-12-07T15:47:52.180
> 
> 标签：twitter-bootstrap

我正在尝试使用 Twitter Bootstrap 中的简单下拉按钮。**但是，它没有显示下拉选项**。代码如下，这里是小提琴的链接：http: [//jsfiddle.net/nunos/DjHyQ/11/](http://jsfiddle.net/nunos/DjHyQ/11/)

**编辑：**发现了问题。我包括`bootstrap.js`在`<head>`. 一旦我将该行更改`<body>`为 Twiiter Bootstrap 文档实际上所说的那样，它就立即起作用了。我从没想过包含在.`<head>`或`<body>`. 现在我知道了！

```
<div class="btn-toolbar" style="margin: 0;">
    <div class="btn-group">
        <button class="btn btn-primary dropdown-toggle" data-toggle="dropdown">Action <span class="caret"></span></button>
        <ul class="dropdown-menu">
            <li><a href="#">Action</a></li>
            <li><a href="#">Another action</a></li>
            <li><a href="#">Something else here</a></li>
            <li class="divider"></li>
            <li><a href="#">Separated link</a></li>
        </ul>             
    </div>
</div>
​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T15:54:40.013

好吧，您发布的小提琴不起作用，因为您没有选择 jquery（引导小部件所需的）作为您的框架（选择框位于页面右侧的侧边栏上）。您是否在实际代码中加载 jquery？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T16:00:51.733

这是工作[小提琴](http://jsfiddle.net/uqEJz/)，加载了 jQuery 和 Bootstrap

```
<div class="btn-toolbar" style="margin: 0;">
    <div class="btn-group">
        <button class="btn btn-primary dropdown-toggle" data-toggle="dropdown">Action <span class="caret"></span></button>
        <ul class="dropdown-menu" role="menu">
            <li><a href="#">Action</a></li>
            <li><a href="#">Another action</a></li>
            <li><a href="#">Something else here</a></li>
            <li class="divider"></li>
            <li><a href="#">Separated link</a></li>
        </ul>             
    </div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T16:02:46.690

您必须将类下拉列表添加到“ul”元素。

```
<div class="btn-toolbar" style="margin: 0;">
    <div class="btn-group">
        <button class="btn btn-primary dropdown-toggle" data-toggle="dropdown">Action <span class="caret"></span></button>
        <ul class="dropdown dropdown-menu">
            <li><a href="#">Action</a></li>
            <li><a href="#">Another action</a></li>
            <li><a href="#">Something else here</a></li>
            <li class="divider"></li>
            <li><a href="#">Separated link</a></li>
        </ul>             
    </div>
</div> 
```

你可以在这里检查它是否有效。[http://jsfiddle.net/DjHyQ/13/](http://jsfiddle.net/DjHyQ/13/)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-06-14T08:18:48.977

我认为您必须忘记在脑海中链接 Jquery.js 或 Bootstrap.js，它们都是必需的。我自己有这个问题并通过添加这两个脚本链接来解决它

# asp.net-mvc - ASP.NET MVC 404 未知响应页面

> ID：13766375
> 
> 赞同：0
> 
> 时间：2012-12-07T15:48:01.987
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我的 MVC 应用程序在 404 上返回以下代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Untitled Document</title>
</head>

<body>
404
</body>
</html> 
```

问题是我不知道这个响应来自哪里。我想对页面进行一些更改，但是找不到此代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T17:22:39.347

能够通过将其添加到我的 webconfig 来解决此问题：

```
 <system.webServer>
    <httpErrors errorMode="Detailed">
      <remove statusCode="404"/>
    </httpErrors>
  </system.webServer> 
```

# abap - 更改单选按钮时隐藏强制参数

> ID：13766377
> 
> 赞同：2
> 
> 时间：2012-12-07T15:48:07.330
> 
> 标签：abap, sap-selection-screens

我有一些单选按钮，当我在它们之间进行更改时，一些块会出现/消失。

但是，如果我将参数设置为强制性或必需的，除非我填写它们，否则它们不会隐藏。我想让参数成为必需的，但是当我更改单选按钮选项时我需要隐藏它们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T23:15:41.653

估计是选择画面...

*   然后在您的屏幕上循环并检查“YOUR_RADIO_BUTTON”的值
*   启用或禁用块

    ```
    AT SELECTION-SCREEN OUTPUT.

      LOOP AT SCREEN.
    * Radio button parameter = P_RADIO
    *   hide the parameter named "to_hide" 
        IF P_RADIO EQ 'X' AND SCREEN-NAME CS 'TO_HIDE'.
          SCREEN-INPUT = 0.
          MODIFY SCREEN.
        ENDIF.

    *   display the parameter named "to_hide"
        IF P_RADIO <> 'X' AND SCREEN-NAME CS 'TO_HIDE'.
          SCREEN-INPUT = 1.
          MODIFY SCREEN.
        ENDIF.

      ENDLOOP. 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T16:10:12.877

If you use `PARAMETERS ... OBLIGATORY`, this is an unconditional statement - this parameter is required regardless of the other settings. If you need a conditional check, you have to code it for yourself:

```
PARAMETERS p_chkbuk AS CHECKBOX.
PARAMETERS p_bukrs  TYPE bukrs.

AT SELECTION-SCREEN ON p_bukrs. 
  IF p_chkbuk = abap_true AND p_bukrs IS INITIAL. 
    MESSAGE 'You need to enter something.' TYPE 'I' DISPLAY LIKE 'E'.
  ENDIF. 
```

# node.js - 从其他模块访问所需的模块

> ID：13766379
> 
> 赞同：0
> 
> 时间：2012-12-07T15:48:09.623
> 
> 标签：node.js, module

我有一个准系统 express 应用程序，正是使用`express`命令创建的应用程序。

我已经安装了 socket.io 并将其附加到我的服务器上，如下所示：

```
var app = express(),
    server = http.createServer(app),
    io = io.listen(server);

server.listen(8000); 
```

现在，我也有路由文件，其名称如下：

```
app.get('/', routes.index); 
```

在这个模块中，我有以下功能：

```
exports.index = function(req, res){
  socket.emit('news', { message: "foo" });
}; 
```

这*显然*会导致 500 引用错误，因为路由文件是一个可导出的模块，并且显然**不知道**套接字是什么，因为它位于 app.js 文件中。

**有没有办法可以从这个或任何其他文件访问这个套接字对象？**请注意，它附加到快速生成的应用程序中。这是该项目的链接：http: [//jsfiddle.net/E27yN](http://jsfiddle.net/E27yN)

* * *

额外：如何获取/设置会话数据？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T16:38:03.380

如果我没看错的话，我遇到了一个非常相似的问题：[Handling Node.js Async Returns with "require" (Node ORM)](https://stackoverflow.com/questions/10669561/handling-node-js-async-returns-with-require-node-orm)

我解决它的方法是通过对 require 进行函数调用，并在我的导出中返回该函数，然后可以通过该局部变量访问该函数。在你的情况下，我认为它会是这样的：

```
var routes = require("routes.js")(io);
console.log(routes.index()); // will log return of the function "index" in routes.js.

// in routes.js
module.exports = function(io) {
  var exports = this;
  exports.index = function(req,res,io) {
    // now io.socket is available to routes
    console.log(io); 
  }
  return exports;
} 
```

现在您可以使用该变量访问您导出的任何内容。因此，获取和设置会话数据就是将信息传入/传出适当的位置并在父文件中修改它（通常是您使用节点启动的任何内容，例如 app.js 或您拥有的任何内容）。

希望这可以帮助！

编辑：在评论中讨论这个之后，我认为问题是你试图在同一个端口上使用 express 和 socket.io。

他们在您的链接 ( [http://socket.io/#how-to-use](http://socket.io/#how-to-use) ) 中给出的示例实际上表明他们正在从 app.get("/") 提供 index.html。Index.html 包含 socket.io 脚本文件 ()，它在您启动套接字服务器时默认提供。

这看起来像这个 jsfiddle：http: [//jsfiddle.net/Lytpx/](http://jsfiddle.net/Lytpx/)

请注意，您通过 express 提供了 index.html 页面，但您的套接字服务实际上提供了 /socket.io.js ，然后它对侦听套接字服务进行连接调用（注意，您可能希望更改 io.connect 中的 localhost将 index.html 调用到您的服务器上）。

# javascript - 在 Twitter Bootstrap Scrollspy 中排除 ID

> ID：13766381
> 
> 赞同：0
> 
> 时间：2012-12-07T15:48:10.833
> 
> 标签：javascript, jquery, twitter-bootstrap

我有一个 Twitter Bootstrap 站点，其主菜单中充满了链接。我有 Scrollspy 设置来定位该菜单并且效果很好。

但是，我需要 scrollspy 来排除菜单中的最后一个链接。是否有任何简单的选项或属性可以做到这一点？每个链接都有一个 ID。

需要注意的是，最后一个菜单项被调用，“登录”有一个 ID，单击它会打开一个 Twitter 模式。但是，由于模式在代码中，即使没有加载它也会影响滚动间谍。

所以只需要一种方法来告诉排除一个 ID 所以假设是这样的：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T23:29:12.910

对于您的情况，我不知道有任何“简单”的解决方法。但是，您可以使用“激活”事件来检查 ID 并对其进行操作：

```
$('#myscrollspyID li').on('activate',  function(){
     var id = $(this).find("a").attr("href");
     if (id === "#yourlastID"){
          //do something, i.e. remove all active classes from your scrollspy object, so  none are shown as active
     }
} 
```

PS：这是我非常粗略的代码，但我修改了一些我自己使用的代码。我使用活动事件检查活动项的ID，并将导航栏的背景颜色更改为活动项对应的颜色:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T15:40:21.520

我建议您使用所需的功能扩展 ScrollSpy，例如[https://stackoverflow.com/a/13460392/1407478](https://stackoverflow.com/a/13460392/1407478)

**具有可排除 ID 的 ScrollSpy 扩展**：

```
// save the original function object
var _superScrollSpy = $.fn.scrollspy;

// add a array of id's that need to be excluded
$.extend( _superScrollSpy.defaults, {
    excluded_ids : []
});

// create a new constructor
var ScrollSpy = function(element, options) {
    _superScrollSpy.Constructor.apply( this, arguments )
}

// extend prototypes and add a super function
ScrollSpy.prototype = $.extend({}, _superScrollSpy.Constructor.prototype, {
    constructor: ScrollSpy
    , _super: function() {
        var args = $.makeArray(arguments)
        // call bootstrap core
        _superScrollSpy.Constructor.prototype[args.shift()].apply(this, args)
    }
    , activate: function (target) {
        //if target is on our exclusion list, prevent the scrollspy to activate
        if ($.inArray(target, this.options.excluded_ids)>-1) {
            return
        }
        this._super('activate', target)
    }
});

// override the old initialization with the new constructor
$.fn.scrollspy = $.extend(function(option) {
    var args = $.makeArray(arguments),
    option = args.shift()

    //this runs everytime element.scrollspy() is called
    return this.each(function() {
        var $this = $(this)
        var data = $this.data('scrollspy'),
            options = $.extend({}, _superScrollSpy.defaults, $this.data(), typeof option == 'object' && option)

        if (!data) {
            $this.data('scrollspy', (data = new ScrollSpy(this, options)))
        }
        if (typeof option == 'string') {
            data[option].apply( data, args )
        }
    });
}, $.fn.scrollspy); 
```

对于[http://twitter.github.com/bootstrap/javascript.html#scrollspy](http://twitter.github.com/bootstrap/javascript.html#scrollspy)中的示例，如果您希望 ScrollSpy 阻止显示`#mdo`，则应该像这样初始化它

```
$(".scrollspy-example").scrollspy({
    excluded_ids : ['#mdo']
}); 
```

你可以尝试将代码放在一个单独的文件中，scrollspy-addon.js，包含它并初始化你的scrollspy

```
$("#your-scrollspy-id").scrollspy({
    excluded_ids : ['#login']
}); 
```

# linux-kernel - linux/scripts/recordmcount：没有这样的文件或目录

> ID：13766383
> 
> 赞同：10
> 
> 时间：2012-12-07T15:48:13.797
> 
> 标签：linux-kernel, makefile

当我尝试`make`Linux 的内核模块时，出现以下错误消息：

```
/home/mynfs/linux/scripts/recordmcount: No such file or directory 
```

它出什么问题了？

PS：`/home/mynfs/linux/`是我的源代码树所在的目录。

```
[root@localhost yiran]# make CONFIG_NFS_ACL_SUPPORT=m -C /home/mynfs/linux M=/home/mynfs/linux/fs/nfs_common modules
make: Entering directory `/home/mynfs/linux'

  WARNING: Symbol version dump /home/mynfs/linux/Module.symvers
           is missing; modules will have no dependencies and modversions.

  CC [M]  /home/mynfs/linux/fs/nfs_common/nfsacl.o

**/bin/sh: /home/mynfs/linux/scripts/recordmcount: No such file or directory**

make[1]: * [/home/mynfs/linux/fs/nfs_common/nfsacl.o] Error 1
make: * [_module_/home/mynfs/linux/fs/nfs_common] Error 2
make: Leaving directory `/home/mynfs/linux' 
```

* * *

```
[root@localhost yiran]# ls /home/mynfs/linux/scripts | grep recordmcount

recordmcount.c

recordmcount.h

recordmcount.pl 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-09-11T07:44:57.153

我有同样的问题，只是让 recordmcount 部分解决了它。缺少其他脚本/* 模块。

以下命令构建了我缺少的所有模块：

```
 cd $(sysroot)/usr/src/linux (in your case it should be /home/mynfs/linux)
 make scripts 
```

然后构建了所有脚本模块，我在编译内核模块时没有进一步的问题。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-07T20:55:36.270

你应该通过做来建立recordmcount

> 做记录计数

在 /home/mynfs/linux/scripts

# css - 在另外两个之间定位一个 div

> ID：13766387
> 
> 赞同：-2
> 
> 时间：2012-12-07T15:48:23.210
> 
> 标签：css, css-float, sass

我垂直有3个div。第一个应该有 100% 的宽度，第二个应该有一个宽度为 283px 的图像，第三个 div 应该有 100% 的宽度。有谁知道如何将图像 div 100% 定位在另外两个 div 的中间？

我试过这个，但不适合我

```
<div class="content">
<div class="first">1</div>
<div class="third">3</div>
<div class="second">2</div>
</div>

.first{
  width:100%;
  float:left;
  background:yellow;
}
.third{
   width:100%
   float:right;
   background:pink;
}
.second{
   width:283px;
   overflow:hidden;
   background:blue;
}​enter code here 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T16:04:48.400

如果您的意图是将 div 水平放置在彼此旁边，那么您不能将它们中的任何一个设置为 100% 的宽度，因为彼此相邻的所有元素的总和只能总计 100%。

如果您的网站将是固定宽度，那么您最简单的解决方案是将左右 div 的宽度（以像素为单位）设置为（网站宽度 - 283）/ 2。然后它们将彼此相邻浮动。您也可以使用 %.

但是，如果您的网站是流动宽度，那么您需要计算所有 3 个 div 的百分比，即每个 33%，但这意味着中间不会正好是 283px。

我认为使这项工作完全按照您的意愿工作的唯一方法是在页面加载后使用 Javascript 调整元素的大小，然后可以获取浏览器尺寸并全部解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T15:57:23.727

读了几次之后，我想我得到了你想要做的。

您希望他中间的 div 居中于其他两个 div 之间。

你需要给 div 一个像这样的类：

```
 .middlediv
 {
    width: 283px;
    margin-left: auto;
    margin-right: auto;
 } 
```

也可以这样写：

```
 .middlediv
 {
    width: 283px;
    margin: 0px auto;
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T16:43:57.303

你的问题不清楚，所以我做了两种可能的解释：http: [//jsfiddle.net/EbBzY/](http://jsfiddle.net/EbBzY/)

HTML

```
<h1>Option 1</h1>
<div class="main">
    <div class="content">
        <div class="first">1</div>
        <div class="second">2</div>
        <div class="third">3</div>
    </div>
</div>

<h1>Option 2</h1>
<div class="content">
    <div class="first">1</div>
    <div class="second">2</div>
    <div class="third">3</div>
</div> 
```

CSS

```
.main{
    display:table;
    width:100%;
    margin-bottom:100px;
}
.main .content{
    display:table-row;
}
.main .content div{
    display:table-cell;
}

.first{
    background:yellow;
}
.third{
    background:pink;
}
.second{
    background:blue;
    width:283px;
    margin:auto;
} 
```

# excel - Excel - 如何将存储为文本的小时和分钟转换为 [h]:mm

> ID：13766392
> 
> 赞同：0
> 
> 时间：2012-12-07T15:48:49.407
> 
> 标签：excel, date-formatting

当我运行报告并导出到 Excel 时，小时和分钟将导出为一般文本格式。

例如：

*   13 小时 22 分钟导出为`13.22`

*   0 小时 33 分钟导出为`0.33`

等等。

问题是，当我尝试将数据转换`[h]:mm`为数据操作所需的格式时，它们没有正确转换。

`13.22`转换为`317:16`并在公式栏中显示`13/01/1900 05:16:48`

我将如何转换`13.22`为`13:22`格式`[h]:mm`以便能够操作数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T16:24:15.683

如果您将数据导入为 13.22，Excel 会将其解释为 13.22**天**- 更改格式不会改变这一点。如果您无法更改导入以便导入为 13:22，那么您可以尝试使用公式进行转换，例如 A1 中的 13.22 在 B1 中使用此公式

`=TEXT(A1*100,"00\:00")+0`

格式 B1 为 [h]:mm

# vb.net - WPF通过组合框选择在主窗口上加载不同的动画

> ID：13766393
> 
> 赞同：1
> 
> 时间：2012-12-07T15:48:57.677
> 
> 标签：vb.net, visual-studio-2010

我正在尝试在 Visual Basic 2010 WPF 主窗口中上传不同的路径动画，选择组合框中列出的动画名称。因此，在 WPF 中，我的主窗口包含一个组合框，此时包含 2 个名称，并且我还有 Window1 和 Window2，每个都有不同的 PathAnimation。我不知道程序运行时如何在主窗口中加载动画 1 或动画 2。我有点失落

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T02:44:39.647

这是我放在一起的一个简单示例，它使用 ViewBox 作为容器。看看这是否适合你

**主窗口.xmal**

```
<Window x:Class="MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="697" Width="697" xmlns:my="clr-namespace:WpfApplication1">
    <Grid>
        <Viewbox Name="TrackContainer"  VerticalAlignment="Top"  HorizontalAlignment="Stretch"></Viewbox>
        <Button Content="Button" Height="23" HorizontalAlignment="Center"  Margin="360,600,240,0" Name="Button1" VerticalAlignment="Top" Width="75" />
        <ComboBox Height="23" Name="ComboBox1" Width="120" SelectionChanged="ComboBox1_SelectionChanged" Margin="41,600,514,35">
            <ComboBoxItem Content="Daytona" />
            <ComboBoxItem Content="SecondTrack" />
            <ComboBoxItem Content="None" />
        </ComboBox>
    </Grid>
</Window> 
```

**主窗口.xaml.vb**

```
Class MainWindow 
    Private Sub Button1_Click(sender As System.Object, e As System.Windows.RoutedEventArgs) Handles Button1.Click

        Select Case CType(ComboBox1.SelectedValue, ComboBoxItem).Content.ToString
            Case "Daytona"
                CType(TrackContainer.Child, UserControl1).runPathAnimation()
            Case "SecondTrack"
                CType(TrackContainer.Child, UserControl2).runPathAnimation()

        End Select

    End Sub

    Private Sub ComboBox1_SelectionChanged(sender As System.Object, e As System.Windows.Controls.SelectionChangedEventArgs)
        Dim cmbox As ComboBox = CType(sender, ComboBox)
        Select Case CType(cmbox.SelectedValue, ComboBoxItem).Content.ToString
            Case "Daytona"
                TrackContainer.Child = New UserControl1()
            Case "SecondTrack"
                TrackContainer.Child = New UserControl2()
            Case "None"
                TrackContainer.Child = Nothing
        End Select
    End Sub
End Class 
```

# php - WordPress PHP 表单不会发送

> ID：13766395
> 
> 赞同：1
> 
> 时间：2012-12-07T15:49:09.547
> 
> 标签：php, forms, wordpress, email

我可能在这里遗漏了一些非常简单的东西，或者我的代码中有一点错字，但是我为我正在构建的 WordPress 网站创建的 PHP 表单不会发送。如果表单中存在错误，则验证有效（除非您只输入姓名），但是当您正确填写表单并单击提交时，它只会转到要处理的页面并显示“对不起，不帖子符合您的标准。'。再加上邮件发不出去。

**编辑**

开发网站的链接是[http://dev.garethdaine.com/inkframe/](http://dev.garethdaine.com/inkframe/)。

处理页面确实存在。这是我的代码：

**表格代码**

```
<form name="quick-contact" class="quick-contact" method="post" action="<?php bloginfo('url'); ?>/get-in-touch/">
    <h3>Request a Call Back</h3>
    <h4><label for="name">Name</label></h4>
    <input id="name" name="name" type="text" />
    <h4><label for="email">Email</label></h4>
    <input id="email" name="email" type="text" />
    <h4><label for="phone">Phone</label></h4>
    <input id="phone" name="phone" type="text" />
    <input id="submit" type="submit" value="Submit" />
    <input type="hidden" name="submitted" id="submitted" value="true" />
    <input type="hidden" name="required" id="required" class="required" />
</form> 
```

**PHP 代码**

```
 <?php
    /*
    * Template Name: Contact
    */
    if( isset( $_POST['submitted'] ) ) {
        $to = get_option( 'admin_email' );

        if( trim( $_POST['name'] ) === '' ) {
            $nameError = 'You did not enter your name.';
            $hasError = true;
        } else {
            $name = trim( $_POST['name'] );
        }

        if( trim( $_POST['email'] ) === '' ) {
            $emailError = 'You did not enter your email address.';
            $hasError = true;
        } else if( !preg_match( "/^[[:alnum:]][a-z0-9_.-]*@[a-z0-9.-]+\.[a-z]{2,4}$/i", trim( $_POST['email'] ) ) ) {
            $emailError = 'You entered an invalid email address.';
            $hasError = true;
        } else {
            $email = trim( $_POST['email'] );
        }

        if( trim( $_POST['phone'] ) === '' ) {
            $phoneError = 'You did not enter your telephone number.';
            $hasError = true;
        } else if( !is_numeric( $_POST['phone'] ) ) {
            $phoneError = 'You have entered an invalid phone number.';
            $hasError = true;
        } else {
            $phone = trim( $_POST['phone'] );
        }

        if( !empty( $_POST['required'] ) ) {
            $requiredError = 'You appear to be a robot. If you are human, please try again.';
            $hasError = true;
        }

        if( !isset( $hasError ) ) {
            $subject = 'Call Back Request from ' . $name;
            $body = "Name: $name \n\nEmail: $email \n\nPhone: $phone";
            $headers = 'From: ' . $name . ' <' . $emailTo . '>' . "\r\n" . 'Reply-To: ' . $email;

            wp_mail( $to, $subject, $body, $headers );
            $emailSent = true;
        }   
    }
?>
<?php get_header(); ?>
<div class="content" role="main">
    <?php if ( have_posts() ) while ( have_posts() ) : the_post(); ?>
        <div id="post-<?php the_ID(); ?>" <?php post_class(); ?>>   
            <h1 class="entry-title"><?php the_title(); ?></h1>
            <div class="entry-content">
                <?php if( isset( $emailSent ) && $emailSent == true ) { ?>
                    <p><strong>Your message has been sent successfully. Someone will be in touch shortly. Thanks.</strong></p>
                    <?php the_content(); ?>
                <?php } else { ?>
                    <?php if( isset( $hasError ) ) { ?>
                        <p class="error">Sorry, an error has occured.<p>
                        <ul>
                            <?php if( $nameError != '' ) { ?>
                                <li>
                                    <span class="error"><?php echo $nameError; ?></span>

                                </li>
                            <?php } ?>
                            <?php if( $emailError != '' ) { ?>
                                <li>
                                    <span class="error"><?php echo $emailError; ?></span>
                                </li>
                            <?php } ?>
                            <?php if( $phoneError != '' ) { ?>
                                <li>
                                    <span class="error"><?php echo $phoneError; ?></span>
                                </li>
                            <?php } ?>
                            <?php if( !empty( $requiredError ) ) { ?>
                                <li>
                                    <span class="error"><?php echo $requiredError; ?></span>
                                </li>
                            <?php } ?>
                        </ul>
                    <?php } ?>
                    <?php the_content(); ?>
                <?php } ?>
            </div>
        </div>
    <?php endwhile; ?>
</div>
<?php get_sidebar(); ?>
<?php get_footer(); ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T15:06:08.790

好了朋友们，

看来我终于找到了问题所在。所有的代码，在所有的变化中都很好并且可以工作，除了一件小事。WordPress 系统使用变量“$name”来显示博客名称，当我将其用作表单上名称字段的变量时，它会导致问题。谁知道。

无论如何，我只是将其更改为使用“$fullName”并将表单上的 id 和 name 属性更改为“全名”，一切都很好。

感谢@maiorano84 为我指出了调试问题的正确方向。

无论如何，下面是我修改后的代码，所以其他人可以使用它。

**表格代码**

```
<form name="quick-contact" class="quick-contact" method="post" action="<?php bloginfo( 'url' ); ?>/get-in-touch/">
    <h3>Request a Call Back</h3>
    <h4><label for="full-name">Full Name</label></h4>
    <input id="full-name" name="full-name" type="text" />
    <h4><label for="email">Email</label></h4>
    <input id="email" name="email" type="text" />
    <h4><label for="phone">Phone</label></h4>
    <input id="phone" name="phone" type="text" />
    <input id="submit" type="submit" value="Submit" />
    <input type="hidden" name="required" id="required" class="required" />
</form> 
```

**PHP 代码**

```
<?php
    /*
    * Template Name: Contact
    */
?>
<?php get_header(); ?>
<?php
    if( $_SERVER['REQUEST_METHOD'] == "POST" ) {
        $to = get_option( 'admin_email' );

        if( trim( $_POST['full-name'] ) === '' ) {
            $nameError = 'You did not enter your name.';
            $hasError = true;
        } else {
            $fullName = trim( $_POST['full-name'] );
        }

        if( trim( $_POST['email'] ) === '' ) {
            $emailError = 'You did not enter your email address.';
            $hasError = true;
        } else if( !preg_match( "/^[[:alnum:]][a-z0-9_.-]*@[a-z0-9.-]+\.[a-z]{2,4}$/i", trim( $_POST['email'] ) ) ) {
            $emailError = 'You entered an invalid email address.';
            $hasError = true;
        } else {
            $email = trim( $_POST['email'] );
        }

        if( trim( $_POST['phone'] ) === '' ) {
            $phoneError = 'You did not enter your telephone number.';
            $hasError = true;
        } else if( !is_numeric( $_POST['phone'] ) ) {
            $phoneError = 'You have entered an invalid phone number.';
            $hasError = true;
        } else {
            $phone = trim( $_POST['phone'] );
        }

        if( !empty( $_POST['required'] ) ) {
            $requiredError = 'You appear to be a robot. If you are human, please try again.';
            $hasError = true;
        }

        if( !isset( $hasError ) ) {
            if ( !isset( $to ) || ( $to == '' ) ) {
                $to = get_option( 'admin_email' );
            }
            $subject = 'Call Back Request from ' . $fullName;
            $body = "Name: $fullName <br />Email: $email <br />Phone: $phone";
            $headers[] = 'From: ' . $fullName . ' <' . $email . '>';
            $headers[] = 'Reply-To: ' . $email;
            $headers[] = 'Content-type: text/html; charset=utf-8';

            wp_mail( $to, $subject, $body, $headers );
            $emailSent = true;
        }
    }
?>
<div class="content" role="main">
    <?php if ( have_posts() ) while ( have_posts() ) : the_post(); ?>
        <div id="post-<?php the_ID(); ?>" <?php post_class(); ?>>   
            <h1 class="entry-title"><?php the_title(); ?></h1>
            <div class="entry-content">
                <?php if( isset( $emailSent ) && $emailSent == true ) { ?>
                    <p><strong>Your message has been sent successfully. Someone will be in touch shortly. Thanks.</strong></p>
                <?php } else { ?>
                    <?php var_dump($headers); ?>
                    <?php if( isset( $hasError ) ) { ?>
                        <p class="error">Sorry, an error has occured.<p>
                        <ul>
                            <?php if( $nameError != '' ) { ?>
                                <li>
                                    <span class="error"><?php echo $nameError; ?></span>

                                </li>
                            <?php } ?>
                            <?php if( $emailError != '' ) { ?>
                                <li>
                                    <span class="error"><?php echo $emailError; ?></span>
                                </li>
                            <?php } ?>
                            <?php if( $phoneError != '' ) { ?>
                                <li>
                                    <span class="error"><?php echo $phoneError; ?></span>
                                </li>
                            <?php } ?>
                            <?php if( !empty( $requiredError ) ) { ?>
                                <li>
                                    <span class="error"><?php echo $requiredError; ?></span>
                                </li>
                            <?php } ?>
                        </ul>
                    <?php } ?>
                <?php } ?>
                <?php the_content(); ?>
            </div>
        </div>
    <?php endwhile; ?>
</div>
<?php get_sidebar(); ?>
<?php get_footer(); ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T17:19:59.847

告诉我是否收到电子邮件，如果没有更改 $to = get_option('admin_email'); $to = your@email.com; //示例

当您更改时，请尝试告诉我它是否有效；）

# c++ - 如何释放 C++ 中加载的 DotNet 程序集

> ID：13766400
> 
> 赞同：0
> 
> 时间：2012-12-07T15:49:15.070
> 
> 标签：c++, .net, c++-cli

我在 C++ DLL 中有以下代码。它加载并调用使用 C# 构建的 DotNet DLL 中的方法。

```
Assembly^ a = Assembly::LoadFrom(gcnew String("MyDotNet.dll"));
Type^ type = a->GetType("MyAssemply.Assembly");
MethodInfo^ method = type->GetMethod("MyMethod");
Object^ obj = Activator::CreateInstance(type);
array<Object^>^ params = gcnew array<Object^>(0) {  };
Object^ ret = method->Invoke(obj, params); 
```

问题是即使我在 C++ DLL 上执行 FreeLibrary，它似乎也不会释放资源或 DLL。是否需要调用 API 或方法来释放 DLL/资源？

我正在使用 Visual Studio 2010。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T15:51:20.677

您无法从应用程序池中卸载托管程序集。您可以创建另一个应用程序池并卸载它。

这篇文章是相关的：[如何从主 AppDomain 中卸载程序集？](https://stackoverflow.com/questions/123391/how-to-unload-an-assembly-from-the-primary-appdomain)

# c# - How to access Maximum Password Age property in Active Directory, programmatically?

> ID：13766402
> 
> 赞同：0
> 
> 时间：2012-12-07T15:49:16.880
> 
> 标签：c#, asp.net, asp.net-mvc, active-directory

We're trying to implement a Password Expiration handling mechanism in a ASP.NET MVC app using Active Directory for authorization, and we need access to Maximum Password Age value to provide a correct expiration period. However, we've not been able to access the value/property via these instructions (or similar approaches), using the DirectoryEntry API:

[How can I get 'minimum password age' of user in active directory using asp.net?](https://stackoverflow.com/questions/10403711/how-can-i-get-minimum-password-age-of-user-in-active-directory-using-asp-net)

[Determine the maximum password age in Active Directory](https://stackoverflow.com/questions/2904806/determine-the-maximum-password-age-in-active-directory)

In each case we simply get a `NULL` value for property `maxPwdAge`. We also query for `MaxPwdAge`, `MaxPasswordAge`, and `MaximumPasswordAge` (some sources suggested different property names). We also searched against different domain objects, namely the root container and the Users container to no avail.

Is there any way to find the Maximum Password Age programmatically using the DirectoryEntry API. Or alternatively, the PrincipalContext API?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T23:46:44.367

So, AD allows fine grained password policies. This means that max age can vary by user depending upon the configuration of the directory. Further, there are a couple of ways to configure this (using the newer FGPP mechanism or the older per-domain policy mechanism).

Brian's advice from [this post](https://stackoverflow.com/questions/12100121/active-directory-account-password-expiration-date-with-fine-grain-password-polic) should get you going.

# c# - WinRt C# null 异常 - 使用 IAsyncOperationWithProgress 的对象范围问题

> ID：13766403
> 
> 赞同：0
> 
> 时间：2012-12-07T15:49:20.830
> 
> 标签：c#, scope, windows-runtime, nullreferenceexception

我在 WinRt 中使用 C# 和 SQLite 从 Windows 应用商店应用程序调用 WinRt 类库...对象在意外时间返回空引用错误...

我正在尝试实现一个登录服务，通过检查数据文件是否存在来检查当前用户是否已经登录，然后检查用户是否是当前登录的用户......

用户只需输入他们的 ID 并单击登录按钮即可。它创建一个包装 SQLite 数据库的 DataService 对象，然后将其“注入”到 UserStartupService 中。

UserStartupService 使用依赖注入、单例并实现 IDisposable。

问题 1）如果用户再次单击登录按钮，则 UserStartupService 对象构造函数不会运行，并且当使用内部对象时，即使它在退出 using 块后通过 dispose 方法运行，也会引发空引用错误，这迫使我停用登录按钮，这充其量是一个kluge修复。新用户必须退出程序才能以新用户身份登录。（原始代码没有实现 IAsyncOperationWithProgress，但这应该没关系...）

问题 2）我现在正在尝试实现 IAsyncOperationWithProgress 以将进度传递回 UI，并且在尝试在线使用 _dataFeedService 时会收到空引用错误：

var json = await _dataFeedService.ValidateUser(userId);

即使它按预期在 using 语句的顶部运行构造函数......

我认为这里缺少一个范围/线程问题。也许有什么明显的...

有任何想法吗？谢谢！

```
// logon button pressed...
private void LogOn_Click(object sender, RoutedEventArgs e)
{
    // Create database service for DI
    DataService _dataService = new DataService("MyData.sqlite");

    // using statement for scope control
    using (UserStartupService uss = UserStartupService.GetInstance(_dataService))
    {
        // progress bar...
        CurrentProgress.Visibility = Windows.UI.Xaml.Visibility.Visible;

        // create op and call...
        IAsyncOperationWithProgress<string, int> op;
        op = uss.SetUpUser(txtUserId.Text);

        op.Progress = (info, progress) =>
        {
            CurrentProgress.Value = progress;
        };

        op.Completed = (info, status) =>
        {
            var results = info.GetResults();
            // when completed...
            if (status == AsyncStatus.Completed)
            {
                txtMessage.Text = "Current user data already loaded...";
                CurrentProgress.Value = 100;
            } // if cancelled...
            else if (status == AsyncStatus.Canceled)
            {
                // Operation canceled - not implemented...
            }
        };
    }
    btnLogon.IsEnabled = false;
}

public sealed class UserStartupService : IDisposable
{
    #region properties

    // services
    private static DataService _dataService;
    private static DataFeedService _dataFeedService;
    private static SqliteService _sqlMAFService;
    private static SerialiseDeserialiseService _serializeService;

    private string _token = String.Empty;

    #endregion properties

    #region constructors with DI and singleton pattern

    // use this code to implement singleton patter...
    // private constructor = can't instance without GetInstance...
    private UserStartupService(DataService dataService)
    {
        // guard clause...
        if (dataService == null)
        {
            throw new ArgumentNullException("DataService");
        }
        _dataService = dataService;
        _dataFeedService = new DataFeedService();
        _sqlMAFService = new SqliteService(_dataService);
        _serializeService = new SerialiseDeserialiseService();
    }

    // implement singleton
    public static UserStartupService GetInstance(DataService dataService)
    {
        _dataService = dataService;
        return MyNestedSingletonClass.singleton;
    }

    class MyNestedSingletonClass
    {
        internal static readonly UserStartupService singleton = new UserStartupService(_dataService);

        static MyNestedSingletonClass() { }
    }

    #endregion constructors with DI and singleton pattern

    public IAsyncOperationWithProgress<string, int> SetUpUser(string userId)
    {
        return AsyncInfo.Run<string, int>((token, progress) =>
            Task.Run<string>(async () =>
            {
                progress.Report(1);

                try
                {
                    // validate user against server REST feed and get token
                    var json = await _dataFeedService.ValidateUser(userId);

                                                        // ... it never gets here due to _dataFeedService null exception
                    // ...more code ... never gets here...

                }
                catch (Exception ex)
                {
                    return ex.Message;
                }

                progress.Report(100);

                return "";
            }, token));
    }

    #region implement IDisposable
    public void Dispose()
    {
        _serializeService = null;
        _sqlMAFService.Dispose();
        _sqlMAFService = null;
        _dataFeedService.Dispose();
        _dataFeedService = null;
        _dataService.CloseConnection();
        _dataService = null;
    }
    #endregion implement IDisposable
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T16:40:47.317

该`using`块将`uss`在执行完成之前进行处理，因此这就是您的空引用异常的来源（对于这两个问题）。

如果`UserStartupService`是单例，并且可以多次使用，则不要丢弃它。

另外，我建议使用`await`而不是回调（它通常更简单），所以这样的事情应该可以工作：

```
private async void LogOn_Click(object sender, RoutedEventArgs e)
{
  btnLogon.IsEnabled = false;

  // Create database service for DI
  DataService _dataService = new DataService("MyData.sqlite");

  var uss = UserStartupService.GetInstance(_dataService);

  // progress bar...
  CurrentProgress.Visibility = Windows.UI.Xaml.Visibility.Visible;

  // create op and call...
  var op = uss.SetUpUser(txtUserId.Text)
      .AsTask(progress => { CurrentProgress.Value = progress; });
  var result = await op;

  txtMessage.Text = "Current user data already loaded...";
  CurrentProgress.Value = 100;

  btnLogon.IsEnabled = true;
} 
```

# forms - jsp形式的变音符号

> ID：13766404
> 
> 赞同：0
> 
> 时间：2012-12-07T15:49:26.137
> 
> 标签：forms, jsp, jakarta-ee, web-applications

我们在学校项目中遇到 jsp 形式的变音符号问题。我们使用 Spring 3.0。在 JSP 形式中，我们的输入可以包含带有变音符号的单词（捷克语，fe "šáříěá"）。当我开始项目并将变音符号写入这些输入并发送表单时，控制器中立即出现错误值。变音字母有奇怪的形式，例如“Ä???Ä”。以下代码是我们的表单。

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<%@taglib uri="http://www.springframework.org/tags/form" prefix="form"%>
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Nový prostor</title>
</head>
<body>
    <h1>Nový prostor</h1>
     <form:form  method="POST" commandName="PLACE" >
        <fieldset>
            <legend>Adresa prostoru</legend>
            <table>
                <tr>
                    <td><form:label path="name">Název prostoru</form:label></td>
                    <td><form:input path="name" /></td>
                </tr>
                <tr>
                    <td><form:label path="street">Ulice a č.p.</form:label></td>
                    <td><form:input path="street" /></td>
                </tr>    
                <tr>
                    <td><form:label path="zip_code">PSČ</form:label></td>
                    <td><form:input path="zip_code" /></td>
                </tr>
                <tr>
                    <td><form:label path="city">Město</form:label></td>
                    <td><form:input path="city" /></td>
                </tr>
            </table>
        </fieldset>
        <fieldset>
            <legend>Parametry prostoru</legend>
            <table>
                <tr>
                    <td><form:label path="rows">Počet řad</form:label></td>
                    <td><form:input path="rows" /></td>
                </tr>
                <tr>
                    <td><form:label path="columns">Počet sedaček v řadě</form:label></td>
                    <td><form:input path="columns" /></td>
                </tr>    
                <tr>
                    <td><form:label path="note">Poznámky</form:label></td>
                    <td><form:textarea path="note" /></td>
                </tr>
            </table>
        </fieldset>  
        <input type="submit" value="Vytvořit">     
    </form:form>
</body> 
```

这是控制器：

```
@Controller
@RequestMapping("/newPlace")
public class NewPlaceController {
@Autowired
private PlaceService placeService;
/**
 * Pri pozadavku typu get vrati nazev jsp ktere se ma renderovat, nabinduje Complex place do formualre
 * @param model
 * @return
 */
@RequestMapping(method=RequestMethod.GET)
public String showNewPlaceForm(Model model){
    model.addAttribute("PLACE", new ComplexPlace());

    return "newPlaceForm";
}
/**
 *Pri pozadavku POST ulozi data z formulare do DB
 * 
 * @param place
 * @param result
 * @return
 */
@RequestMapping(method=RequestMethod.POST)
public String createNewPlace(@ModelAttribute(value="PLACE") ComplexPlace place, BindingResult result){
    System.out.println(place.getName());
    placeService.buildPlaceService(place);
    placeService.PersistNewPlace();
    return "/index";
} 
```

}

System.out.println 在控制台上写入奇怪的值。知道问题出在哪里吗？我想说的是，我们对 Java Web 编程有一点经验。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T19:56:08.370

您不能使用除标准英语以外的任何其他语言。如果您想这样做，那么您必须使用任何标准的免费 unicode 转换器。转换您的字符并在运行时将其 unicode 字符转换为您的原始语言.. 。我希望这个对你有用。

# ios - tableCell 中的 CoreData 导致口吃/滞后 IOS/xCode

> ID：13766407
> 
> 赞同：1
> 
> 时间：2012-12-07T15:49:40.347
> 
> 标签：ios, xcode, core-data

早上好。

当我在我的设备上运行我的应用程序时遇到问题，当我在主 tableView 中滚动时它会滞后/卡顿。

我已将问题缩小到从 tableCell 内部调用核心数据

--在 indexPath 行的单元格中，人是一个自定义类，联系人管理器是我的文件，其中包含我对核心数据和操作数据的所有调用

```
 person.contactSelected = [contactManager checkContactSelectedStatus:person]; 
```

-- 在我的contactManager 文件中，调用转到了这个函数。

并仅更新联系人选择状态（当用户按下按钮以更改通话中允许或不允许通话时）

```
-(NSNumber *) checkContactSelectedStatus:(ContactPerson *)person{

SWNAppDelegate *delegate = [[UIApplication sharedApplication]delegate];

NSManagedObjectContext *context = [delegate managedObjectContext];

NSEntityDescription *entity = [NSEntityDescription entityForName:@"Contact" inManagedObjectContext:context];

NSFetchRequest *req =[[NSFetchRequest alloc]init];

[req setEntity:entity];

NSPredicate *pred =[NSPredicate predicateWithFormat:@"(recordID like %@)",[person.recordID stringValue]];

[req setPredicate:pred];

NSError *error;

NSManagedObject *checkStatus = [[context executeFetchRequest:req error:&error] objectAtIndex:0];

person.contactSelected = [checkStatus valueForKey:@"isSelected"];

return person.contactSelected;} 
```

有没有一种简单的方法可以将它放入队列中？我已阅读并试图弄清楚如何将 NSManagedObject 发送到队列，但是当我创建父 MoC 的子代时，它找不到实体“联系人”。我不知道是否有更简单的方法来做到这一点！？

感谢您的宝贵时间，以及 WhatWasITthinking!?!?!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T12:16:07.187

是的，这确实是低效的代码。提取必须进行多次，即对于每个单元格，因为它变得可见。

相反，您应该使用`NSFetchedResultsController`专为使用表视图而设计的。它将决定适当的存储次数以进行提取并优化速度和内存占用。

此外，您很可能会使用更少的代码。

此外，谓词字符串 like`recordID like %@`没有多大意义。如果您使用 ID，它们应该是唯一的，以便您可以索引它们并快速查找它们。`LIKE`，就像字符串函数`CONTAINS`比较起来很慢。

# ibm-midrange - AS400.validateSignon() 不会将失败的登录尝试重置为 0

> ID：13766412
> 
> 赞同：5
> 
> 时间：2012-12-07T15:49:48.037
> 
> 标签：ibm-midrange, jt400

当我使用 com.ibm.as400.access.AS400.validateSignon() 来验证用户的凭据并且他们通过验证并成功连接时，它不会将“失败的登录尝试”重置为 0。

输入错误密码时，“登录尝试失败”字段会增加；当成功签署“失败的登录尝试”时，仍然认为存在无效的登录。奇怪的是，“以前的登录”会更新为正确的日期和时间。

这是 as400 上的 DSPUSRPRF 转储：

```
User profile . . . . . . . . . . . . . . . : BOB
Previous sign-on . . . . . . . . . . . . . : 12/12/05 21:34:08
Password verifications not valid . . . . . : 4
Status . . . . . . . . . . . . . . . . . . : *ENABLED 
```

我设法重置“失败的登录尝试”的唯一方法是使用工具箱禁用和重新启用用户。这不是一个可行的解决方案，因为这会更新用户配置文件上的更改日期和时间。

这种行为与我们处理绿屏 telnet 会话的方式相矛盾，当用户登录到 as400 时，“失败的登录尝试”被归零。

任何建议和/或决议都将被欣然接受。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T16:07:43.767

您可以改用[QSYGETPH](http://publib.boulder.ibm.com/infocenter/iseries/v5r4/index.jsp?topic=%2Fapis%2FQSYGETPH.htm) API 吗？根据那里的文档，它说“将登录尝试无效计数重置为零。”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T08:08:32.517

使用以下 PTF 修复了此行为： V6R1 SI48759 V7R1 SI48761

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T16:08:59.807

JT400 在连接时不使用正常的登录机制……所以这种行为并不让我感到惊讶。JT400 本身并没有“登录”……它可以连接。行为略有不同。

我的问题是：为什么在通过 JT400 连接时重置有效登录计数很重要？

# .net - 覆盖 WCF 数据服务 CSDL

> ID：13766413
> 
> 赞同：1
> 
> 时间：2012-12-07T15:49:49.093
> 
> 标签：.net, web-services, sharepoint, wcf-data-services

我正在处理 SharePoint 2010 托管 WCF 数据服务的问题。所以请记住，我只能使用 .NET 3.5。为了生成用于描述我的实体的 CSDL 端点，我使用了适当的装饰器，并且我享受反射的好处来为我处理这项工作。

这是 MEX 点的代码：

```
[BasicHttpBindingServiceMetadataExchangeEndpoint]
[ServiceBehavior(IncludeExceptionDetailInFaults = true)]
public class Demarches : DataService<CacheDataContext>
{
    public static void InitializeService(DataServiceConfiguration config)
    {
        config.UseVerboseErrors = true;
        config.SetEntitySetAccessRule("*", EntitySetRights.AllRead);
        config.SetServiceOperationAccessRule("*", ServiceOperationRights.AllRead);
        config.DataServiceBehavior.MaxProtocolVersion = DataServiceProtocolVersion.V2;
    }
} 
```

这是我使用上面的代码获得的 CSDL 文件的一部分：

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
 <edmx:Edmx Version="1.0" xmlns:edmx="http://schemas.microsoft.com/ado/2007/06/edmx">
  <edmx:DataServices xmlns:m="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata" m:DataServiceVersion="1.0">
<Schema Namespace="XXX.Poco" xmlns:d="http://schemas.microsoft.com/ado/2007/08/dataservices" xmlns:m="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata" xmlns="http://schemas.microsoft.com/ado/2006/04/edm">
  <EntityType Name="Demarche">
    <Key>
      <PropertyRef Name="id" />
    </Key>
    <Property Name="id" Type="Edm.Int32" Nullable="false" />
    <Property Name="titre" Type="Edm.String" Nullable="true" />
    <Property Name="avancement" Type="Edm.String" Nullable="true" />
    <Property Name="date" Type="Edm.DateTime" Nullable="false" />
    <NavigationProperty Name="historiques" Relationship="XXX.Poco.Demarche_historiques" FromRole="Demarche" ToRole="historiques" />
    <NavigationProperty Name="proprietes" Relationship="XXX.Poco.Demarche_proprietes" FromRole="Demarche" ToRole="proprietes" />
    <Property Name="CacheDurationInSeconds" Type="Edm.Int32" Nullable="false" />
    <Property Name="CacheDurationInMinutes" Type="Edm.Int32" Nullable="false" />
    <Property Name="CacheDurationInHours" Type="Edm.Int32" Nullable="false" />
  </EntityType> 
```

我必须在“avancement”属性上放置一个标志，因为它是我的业务代码中的一个枚举，我想动态地知道，当我阅读 CSDL 端点时，枚举是什么属性以便在我开发时提供动态过滤系统客户端应用程序。例如，我应该有类似的东西`<Property Name="avancement" Type="Edm.String" Nullable="true" isFilterable="true"/>`。

首先，你知道这种修改是否会破坏一些工具解析，如 SvcUtil.exe、Jaydata.exe 吗？那么，例如，当我初始化 Web 服务配置时，是否有可能以编程方式实现此目标？

感谢您的建议。

# c# - 表单内的标签（启动画面）不显示

> ID：13766416
> 
> 赞同：0
> 
> 时间：2012-12-07T15:49:56.073
> 
> 标签：c#, winforms, splash-screen

我在 C# winforms 应用程序中制作了一个简单的闪屏。问题是表单出现了，但我的表单中有一个标签没有出现。应显示标签的位置会显示一个黑框。

我制作了一个表格，保留了属性`ShowInTaskbar=False`和`FormBorderStyle=None`. 表单`opacity`设置为 50%。然后我在这个表单中有一个标签，带有`text='Loading...'`.

我已使用此代码显示表单：

```
splashScreen splash=new splashScreen();
splash.Show(); 
```

`splash.Close()`当我想关闭它时，我已经习惯了

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T15:53:07.327

这很可能是因为您的应用太忙于加载而无法呈现标签。要在应用程序加载时响应启动屏幕，它需要是多线程的。[您可以在此处](https://stackoverflow.com/questions/48916/multi-threaded-splash-screen-in-c)找到有关如何执行此操作的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-10-16T15:06:13.957

只要它只是一个标签控件，即不需要用户或程序交互，我发现最简单的方法是创建一个临时标签，将图像扫描成 jpeg，打开 jpeg 并保存为位图。然后你在你的闪屏上要做的就是创建一个合适大小的面板，将位图作为背景导入其中，将其布局设置为拉伸，然后它将显示在闪屏中。

# objective-c - 在 UITabBarController 中监听视图控制器的编程更改

> ID：13766417
> 
> 赞同：0
> 
> 时间：2012-12-07T15:50:05.040
> 
> 标签：objective-c, ios

我需要一个选项卡式应用程序来从视图控制器 2 切换到视图控制器 1（主视图控制器），然后立即在视图控制器 1 上调用一个方法，而无需用户进行任何输入。使用`viewDidLoad`不起作用，因为（据我所知）主视图控制器一直处于加载状态；使其可见不会再次加载它。我一直在尝试使用`-(void)tabBarController: didSelectViewController:`，但它也没有被调用，我假设因为它只适用于用户启动的选择，而不是编程选择。

那么我能做什么呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T15:52:42.917

您可以使用该方法`-(void) viewWillAppear`来执行此操作。一旦视图已经加载，你可以在它出现时做任何你想做的事情！这里是：

```
- (void) viewWillAppear:(BOOL)animated {
   [super viewWillAppear:animated];
   // You code here to update the view.
} 
```

# python - Python JSON 错误

> ID：13766422
> 
> 赞同：-3
> 
> 时间：2012-12-07T15:50:21.497
> 
> 标签：python, json, python-requests

我正在尝试编写用于检查 JSON 请求的自动化测试。因此，当我运行以下代码时，出现回溯错误：

```
json1=query_link1.json
json2 = json.loads(json1) 
```

例外：

```
Traceback (most recent call last):
  File "Productapicheck.py", line 45, in <module>
    query_product_api()
  File "Productapicheck.py", line 34, in query_product_api
    json2 = json.loads(json1)
  File "/usr/lib/python2.6/json/__init__.py", line 307, in loads
    return _default_decoder.decode(s)
  File "/usr/lib/python2.6/json/decoder.py", line 319, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
TypeError: expected string or buffer 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T15:52:31.577

如果`query_link1.json`是类文件对象，则需要改用该`json.load()`函数。

`.loads()`（`s`末尾带有）要求您传入一个字符串而*不是*`query_link1.json`字符串。

 *如果您正在使用该`requests`库，则*无需*对响应中的`.json`值进行解码，当您访问该属性时，该库会自动为您解码。*

# c - 链表擦除节点

> ID：13766423
> 
> 赞同：2
> 
> 时间：2012-12-07T15:50:22.093
> 
> 标签：c, linked-list

```
CAR *removing(int *numberofstructures,CAR *first)
{
    char categorytoerase[51];
    CAR *helpnode,*actual;
    int i;
    int number_1=0;
    helpnode=(CAR*)malloc(sizeof(CAR));
    actual=(CAR*)malloc(sizeof(CAR));
    actual=first;
    number_1=*numberofstructures;
    helpnode=NULL;
    scanf("%s",categorytoerase);
    for(i=1;i<=number_1;i++)
    {
        if (actual->znacka==categorytoerase)
        {
            if (helpnode != NULL) {
                helpnode->next=actual->next;
                free((void *)actual);
                actual=helpnode->next;
            }
            else
            {
                first = actual -> next;
                free((void *)actual);
                actual = first;
            }
        }
        else{
            helpnode=actual;
            actual=actual->next;
        }
    }
    return first;
} 
```

我想创建一个从链表中删除节点的函数，首先你必须输入字符串。它应该删除具有汽车类别名称的节点，如输入的字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T03:04:40.643

这看起来很像家庭作业......所以本着不为你写答案的那个家伙的精神，我会告诉你删除节点的想法。

节点包含它们的数据和指向下一个节点的地址。

因此，既然您知道这一点，您就可以创建一个方法...

从头部开始，并具有对当前节点和前一个节点的引用

当您在列表中搜索需要删除的节点时，您会不断地循环当前和以前的节点变量。

当您找到您正在寻找的节点时，您将前一个节点的下一个地址指针设置为您尝试删除的节点的下一个地址指针。

祝楼主好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-28T09:25:35.743

AMR 是对的。如果你有一个双向链表，删除节点会更容易，所以在你的节点的结构中包含一个前一个和下一个指针。基本上，以下是伪代码中的删除方式（在您找到指向要删除的节点的指针之后）：

```
IF todelete.prev != NULL THEN
   todelete.prev.next = todelete.next
ELSE
   list.head = todelete.next
END IF
IF todelete.next != NULL THEN
   todelete.next.prev = todelete.prev
ELSE
   list.tail = todelete.prev
END IF

FREE todelete 
```

if 条件很重要；否则程序将崩溃并且逻辑不会真正起作用——你不能很好地替换不存在的东西。

# jquery - 在 Fancybox 2 中更改覆盖标题背景宽度

> ID：13766429
> 
> 赞同：0
> 
> 时间：2012-12-07T15:50:41.127
> 
> 标签：jquery, jquery-plugins, fancybox, fancybox-2

如何将`width`Fancybox 2 中的覆盖标题背景更改为图像宽度？我试图`CSS`将`.fancybox-title-overlay-wrap`宽度更改为 100%，但这并不好。

这是代码：

```
.fancybox-title-overlay-wrap {
     width: 100%;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T18:41:57.277

Fancybox title's size is calculated dynamically so you cannot set the `width` with css because the value will be overwritten anyways. You would need to calculate the the `width` of the current image and set the `title` size accordingly, using a callback.

If the `title type` is the default `float`, then use something like :

```
$(".fancybox").fancybox({
    afterShow: function() {
        var imageWidth = $(".fancybox-image").width();
        $(".fancybox-title-float-wrap .child").css({
            "width": imageWidth
        });
    }
});​ 
```

See **[JSFIDDLE](http://jsfiddle.net/hEDUp/)**

On the other hand, if the `title type` is `over`, then it's a bit more complex but you could do :

```
$(".fancybox").fancybox({
    helpers: {
        title: {
            type: "over"
        }
    },
    afterShow: function() {
        var imageWidth = $(".fancybox-image").width();
        $(".fancybox-title-over-wrap").css({
            "width": imageWidth,
            "paddingLeft": 0,
            "paddingRight": 0,
            "textAlign": "center"
        });
    }
});​ 
```

See this other **[JSFIDDLE](http://jsfiddle.net/bB2ST/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T08:29:28.613

## [**jsFiddle 演示**](http://jsfiddle.net/Hv9cN/)

每当我看到有关如何修改插件 CSS 的问题时，我都会迅速转向 Firefox，它具有独特的 CSS 实时编辑功能。

启动一个带有 Fancybox 图像的 jsFiddle，我将鼠标悬停在 Fancybox Title 区域，然后单击鼠标右键选择**Inspect Element**。一旦我看到**Inspector Panel**，然后按左侧的第二个图标以弹出 HTML 面板以查看网页上元素的 DOM 布局。

在这里，在一般标题区域中，我确实将类名`.fancybox-title`视为要定位的元素。然后我为该样式添加了一个额外的**属性**`width` `100%`，除了它没有改变黑色标题栏的视觉宽度。

但是，我确实看到一个`span`带有实际标题文本的类名为`child`. 我`Inspect`也给它一个值，`100%`并且实现了标题栏的整个宽度，但是在百分比上看起来要好得多，`93%`因为弯曲的黑色角增加了整体视觉宽度。

然后注意到，当文本太长时，它超出了 Fancybox 完整`width`标题区域。然后我明白需要***两个设置***。我将其更改为`93%` `width`，第二个设置是for选择器的值。`.fancybox-title``auto``min-width``93%``.fancybox-title .child`

**CSS：**

```
.fancybox-title {
  width: 100%;
}

.fancybox-title .child {
  width: auto;    /* Here we define width as auto, so it's always the correct size for overflowing Title text. */
  min-width: 93%; /* When text is not flowing over, the black Title bar is 93% of Fancybox width. */
} 
```

对于某些有缺陷的 CSS 问题，我使用**Firefox 3D View**，它允许您***旋转和缩放***舞台，以选择 CSS 作为**图层**。您会在右侧看到该按钮。

# javascript - 如何创建像 Researchgate 这样的 index-teaserJS 统计信息？

> ID：13766430
> 
> 赞同：0
> 
> 时间：2012-12-07T15:50:42.860
> 
> 标签：javascript

在[http://www.researchgate.net/](http://www.researchgate.net/)的首页上有加载不同用户的统计数据。我怎样才能复制它？用于创建 index-teaserJS 的工具是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T12:45:15.317

我是制作信息图的人之一。

对于图形部分，我们使用了 Raphael JS ( [http://raphaeljs.com](http://raphaeljs.com) )。我们使用 YUI3 作为我们的主要 JS 库，但在这张信息图中，它仅用于次要的 DOM 操作。

该图表的核心是基于 Raphael 的饼图示例：[http ://raphaeljs.com/pie.html](http://raphaeljs.com/pie.html)

我们使用 Raphael 而不是 D3 等解决方案的原因是浏览器支持。Raphael 有一个很好的兼容层，可以开箱即用地支持旧的 IE 版本。D3 虽然很好用，但如果您尝试支持旧版浏览器，它并不理想。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T01:37:05.543

> 他们正在使用 YUI。
> 
> 在 D3 Javascript 库中可以找到类似的实现：http: [//bl.ocks.org/4063423](http://bl.ocks.org/4063423)
> 
> 您可以通过查看该 D3 示例来了解它的工作原理。

资料来源：[http ://www.quora.com/JavaScript/How-and-with-what-was-the-statistic-analytic-overview-of-ResearchGate-created/answer/Prithviraj-Udaya](http://www.quora.com/JavaScript/How-and-with-what-was-the-statistic-analytic-overview-of-ResearchGate-created/answer/Prithviraj-Udaya)

# c# - 判断元素是否为字符串列表，其中包含子字符串

> ID：13766437
> 
> 赞同：2
> 
> 时间：2012-12-07T15:50:59.817
> 
> 标签：c#, string, list, substring

我有一个`String`s 列表。

如何检查`String`s 列表是否包含带有前缀的字符串`2#`？

我看到了这个： [在字符串列表中查找子字符串](https://stackoverflow.com/questions/10488587/find-substring-in-a-list-of-strings)

我尝试了以下方法：

```
if ((startId == item.ID.ToString())
       && (item.NextButtons.Contains(s => s.Contains("2#")))) ;
   {
     OK = false;
   } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T15:52:55.193

如果我理解正确：

```
yourList.Any(s => s.Contains("2#")) 
```

使用 LINQ`Any`方法来确定集合的任何元素是否满足条件。

条件是一个 lambda 方法，它将`string`列表中的每个元素作为输入参数并检查它是否`Contains`为 string `"2#"`。它这样做直到找到第一个，然后返回`true`or `false`。

如果你想返回实际的字符串，你可以使用`FirstOrDefault`方法而不是`Any`. `null`如果没有找到，它将返回字符串或。

编辑：如果`2#`必须在字符串的开头，请参阅@Some1.Kill.The.DJ 的答案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T15:58:05.117

你想 `2#`在他们面前..

所以，应该是

```
yourList.Any(s => s.StartsWith("2#"));
                    ----------- 
```

# c++ - 使用 C++ 中的最大似然法将 1000 个样本拟合到正态分布

> ID：13766439
> 
> 赞同：1
> 
> 时间：2012-12-07T15:51:01.287
> 
> 标签：c++, mathematical-optimization, frequency-distribution, data-fitting

我有5000个双打样本

> 样本 = {1.23, -4.67, 0.17, 1.25, 6.89, -2.03, ...}

并希望将数据拟合到参数分布，如 N(mu, sigma) 或广义学生 t(loc, scale, DoF)...

我已经有了这些分布 PDF_normal(mu, sigma)(x) 和 PDF_t(loc, scale, DoF)(x) 的 PDF，并且可以计算固定分布参数的 5000 个样本的 PDF 对数之和。

现在，我想使用一些 C++ 算法来解决非线性优化问题，以找到能够给出最大对数似然值的参数 (mu_max, sigma_max) 或 (loc_max, scale_max, DoF_max)。

用于统计计算的 R 项目正在通过以下方式解决 MASS 包中的问题：.. 使用 optim 执行对数似然的直接优化。估计的标准误差取自观察到的信息矩阵，通过数值近似计算。对于一维问题，使用 Nelder-Mead 方法，对于多维问题，使用 BFGS 方法...

不幸的是，我不能使用 R 解决方案，但必须在 Microsoft VS2010 C++ 中提出解决方案，我不想自己编写优化代码，也不想查看 R 源代码并为 C++ 重写它。 ..

有什么建议可以让我找到一个快速且经过良好测试的 C++ BFGS（或类似）实现吗？

Boost、Intel MKL 等有什么可用的吗？

谢谢你的帮助，马特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T16:40:42.727

好的，我不需要对正态分布的 MLE 进行任何优化，因为它可以以封闭形式解决，参见[1](http://de.wikipedia.org/wiki/Maximum-Likelihood-Methode)：[http ://de.wikipedia.org/wiki/Maximum-Likelihood-Methode](http://de.wikipedia.org/wiki/Maximum-Likelihood-Methode)

但我想为我只知道 PDF 的不同发行系列解决这个问题。因此，我仍然需要一个很好的非线性求解器的 C++ 实现......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T16:48:19.500

你提到的分布都有很少的参数。直接使用牛顿法可能更有用。您可以计算出对数似然函数及其梯度和 Hessian（关于参数，而不是数据）。

最后求解系统时，应使用 Cholesky 因式分解或 LDL ^T因式分解而不是高斯消元法。您将大致了解 sqrt(machine epsilon) 的所有因素，在大多数系统上为 10 ^(-7) -ish。

获得 Hessian 的 Cholesky 因式分解的一种更稳健的方法（如果它是一堆 rank-one 矩阵的总和）是使用一系列 Givens 旋转将每个新的 rank-one 矩阵合并到 Cholesky 因式分解中。这使您的精度接近机器 epsilon，但它的速度大约是形成 Hessian 矩阵然后以通常的方式进行其 Cholesky 因式分解的两倍。

这里的技术很简单，您可以自己编写代码。

我很难为你推荐一个通用的软件包。这部分是因为我对其他人的 C++ 优化库没有任何积极的经验。不过，大多数情况下，一旦你有了代码来评估梯度和 Hessian，编写牛顿的方法就没什么工作了，所以我真的觉得没有必要。

也就是说，您可能想看看[COIN-OR 项目](http://www.coin-or.org/projects/)必须提供什么。您也许可以使用[自动微分](http://www.autodiff.org/)工具来节省一些时间 ---（COIN-OR 有[一个](http://www.coin-or.org/projects/CppAD.xml)）。我想我应该提一下，我自己从未使用过 COIN-OR 的非线性优化工具或自动微分工具。

# ember.js - 如何将视图附加到视图内的 div？

> ID：13766442
> 
> 赞同：3
> 
> 时间：2012-12-07T15:51:18.647
> 
> 标签：ember.js

我正在尝试通过 id 将视图附加到占位符 div，与此处的答案一致：[如何使用 Ember 将新模板动态插入 DOM？](https://stackoverflow.com/questions/10200495/how-can-i-dynamically-insert-a-new-template-into-the-dom-with-ember).

```
insertInfoBox:function (context) {
    var infoBoxView = App.LocatorInfoBox.create({
        context:context
    });

    infoBoxView.appendTo('#infoBoxHolder');
}, 
```

我收到以下错误：未捕获的错误：

**断言失败：您不能附加到现有的 Ember.View。考虑改用 Ember.ContainerView。**

'infoBoxHolder' div 嵌套在另一个视图中，但它本身不是一个视图。如果我将 infoBoxView 设置为 parentView 的子视图（如果我将父视图更改为容器视图），我不清楚如何将视图插入子 div 'infoBoxHolder' 而不是直接插入父容器视图的根元素.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T18:14:28.993

我不确定您为什么要这样做，但您可以使用 didInsertElement 函数。就像是：

```
App.MyView = Ember.View.extend({
    didInsertElement: function() {
        $('#elementId').append(...);
    }
}); 
```

我会这样做的方式是通过一个模板，比如：

```
App.MyView = Ember.View.extend({
    template: Ember.Handlebars.compile('{{#if someCondition}}{{MyApp.MyOtherView valueBInding="..."}}{{/else}}');
}); 
```

# matplotlib - Matplotlib：图例中的水平线长

> ID：13766444
> 
> 赞同：23
> 
> 时间：2012-12-07T15:51:36.387
> 
> 标签：matplotlib

假设我正在用 matplotlib 绘制一条线并添加一个图例。在传说中它说`------ Label`。在绘制小图形进行打印时，我发现这条线的默认水平长度有点太长了。

有要设置的属性`------ Label`吗`--- Label`？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-12-07T16:41:47.303

创建图例时，添加设置“---”长度的`handlelength`关键字 [(doc) （称为句柄）。](http://matplotlib.org/api/legend_api.html#matplotlib.legend.Legend)

# java - 如何集中primefaces菜单栏？

> ID：13766446
> 
> 赞同：5
> 
> 时间：2012-12-07T15:51:41.937
> 
> 标签：java, css, jsf, primefaces

我需要集中primefaces菜单栏。我试过这个：`<p:menubar style="text-align: center !important">`但它没有用。

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T16:44:14.007

要使菜单栏中的元素居中（也就是内容居中），我认为您会这样做，因为该栏是 100% 宽度。在 facelet 中，将*“styleclass”*属性添加到菜单栏：

```
<p:menubar styleClass="centeredMenuBar"> 
```

并在 css 文件中添加：

```
.centeredMenuBar.ui-menubar {
    text-align: center;
}

.centeredMenuBar .ui-menu-list {
    display: inline-block;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T16:27:41.047

**中心菜单栏，而不是内容**（从 primefaces 展示中修改）：

```
 <p:menubar style="width: 100px; margin-left:auto; margin-right:auto;">
        <p:submenu label="Blah" icon="ui-icon-document" />
        <p:submenu label="Blah2" icon="ui-icon-document" />
        <p:menuitem value="Quit" url="http://www.primefaces.org"
            icon="ui-icon-close" />
    </p:menubar> 
```

# functional-programming - 用表查找替换函数

> ID：13766448
> 
> 赞同：11
> 
> 时间：2012-12-07T15:51:52.160
> 
> 标签：functional-programming, lookup-tables, imperative-programming

我一直在[和 Brian Beckman 一起看这个 MSDN 视频，](http://channel9.msdn.com/Shows/Going+Deep/Brian-Beckman-Dont-fear-the-Monads)我想更好地理解他所说的话：

> 每个命令式程序员都会经历这个阶段，学习可以用表查找替换函数

现在，我是一名从未上过大学的 C# 程序员，所以也许在某个地方，我错过了其他人都学会理解的东西。

布赖恩是什么意思：

> 函数可以用表查找代替

是否有这样做的实际例子，它是否适用于所有功能？他给出了 sin 函数的例子，我可以理解，但我如何更一般地理解这个？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-07T17:33:32.793

Brian 刚刚表明函数也是数据。一般来说，函数只是一个集合到另一个集合`y = f(x)`的映射：集合 {x} 到集合 {y}: 的映射`f:X->Y`。这些表也是映射：`[x1, x2, ..., xn] -> [y1, y2, ..., yn]`.

如果函数在有限集上运行（编程中就是这种情况），那么它可以替换为表示该映射的表。正如 Brian 所提到的，每个命令式程序员都会经历这个阶段，即出于性能原因，可以用表查找替换函数。

但这并不意味着所有功能都可以或应该轻松地替换为表格。这仅意味着您理论上可以为每个功能做到这一点。所以结论是函数是数据，因为表是（当然在编程的上下文中）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-07T23:11:31.940

Mathematica 中有一个可爱的技巧，它创建一个表作为评估函数调用作为重写规则的副作用。考虑经典的慢斐波那契

```
fib[1] = 1
fib[2] = 1
fib[n_] := fib[n-1] + fib[n-2] 
```

前两行为输入 1 和 2 创建表条目。这与说的完全相同

```
fibTable = {};
fibTable[1] = 1;
fibTable[2] = 1; 
```

在 JavaScript 中。Mathematica 的第三行说“请安装一个重写规则，`fib[n_]`在将模式变量替换为`n_`出现的实际参数之后，将替换任何出现的`fib[n-1] + fib[n-2]`。” 重写器将迭代此过程，并最终`fib[n]`在指数次数的重写后产生 的值。这就像我们在 JavaScript 中使用的递归函数调用形式

```
function fib(n) {
  var result = fibTable[n] || ( fib(n-1) + fib(n-2) );
  return result;
} 
```

请注意，在进行递归调用之前，它首先检查表中我们显式存储的两个值。Mathematica 求值器自动执行此检查，因为规则的呈现顺序很重要——Mathematica 首先检查更具体的规则，然后检查更一般的规则。这就是为什么 Mathematica 有两种赋值形式，`=`并且`:=`： 前者用于特定规则，其右侧可以在定义规则时进行评估；后者适用于在应用规则时必须评估其右侧的一般规则。

现在，在 Mathematica 中，如果我们说

```
fib[4] 
```

它被重写为

```
fib[3] + fib[2] 
```

然后到

```
fib[2] + fib[1] + 1 
```

然后到

```
1 + 1 + 1 
```

最后到 3，这在下一次重写时不会改变。你可以想象，如果我们说`fib[35]`，我们会产生巨大的表达式，填满内存，融化 CPU。但诀窍是用以下内容替换最终的重写规则：

```
fib[n_] := fib[n] = fib[n-1] + fib[n-2] 
```

这表示“请用一个表达式替换每个出现的值`fib[n_]`，该表达式将为值安装新的特定规则`fib[n]`并产生值。” 这个运行得更快，因为它扩展了规则库——值表！-- 在运行时。

我们可以在 JavaScript 中做同样的事情

```
function fib(n) {
  var result = fibTable[n] || ( fib(n-1) + fib(n-2) );
  fibTable[n] = result;
  return result;
} 
```

这比以前定义的 fib 运行得快得多。

这称为“自动记忆化”[原文如此——不是“记忆化”而是“记忆化”，就像为自己创建备忘录一样]。

当然，在现实世界中，您必须管理创建的表的大小。要检查 Mathematica 中的表格，请执行

```
DownValues[fib] 
```

要在 JavaScript 中检查它们，只需

```
fibTable 
```

在诸如 Node.JS 支持的 REPL 中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-07T17:49:48.073

在函数式编程的上下文中，存在引用透明性的概念。对于任何给定的参数（或参数集），可以将引用透明的函数替换为其值，而不会改变程序的行为。

[参考透明度](http://en.wikipedia.org/wiki/Referential_transparency_%28computer_science%29)

例如，考虑一个接受 1 个参数**n**的函数**F。**F 是参照透明的，因此**F(n)**可以替换为在**n**处评估的**F**值。它对程序没有任何影响。

 ******在 C# 中，这看起来像：

```
public class Square
{
    public static int apply(int n)
    {
        return n * n;
    }

    public static void Main()
    {
        //Should print 4
        Console.WriteLine(Square.apply(2));
    }
} 
```

（我对 C# 不是很熟悉，来自 Java 背景，所以如果这个例子在语法上不太正确，请原谅我）。

很明显，当使用参数 2 调用时，函数**apply**不能有任何其他值，因为它只是返回其参数的平方。函数的值*仅*取决于其参数**n**；换句话说，参考透明度。

`Console.WriteLine(Square.apply(2))`那么我问你，和之间有什么区别`Console.WriteLine(4)`。答案是，根本没有区别，因为所有意图都是目的。我们可以遍历整个程序，将 的所有实例替换为`Square.apply(n)`的返回值`Square.apply(n)`，结果将完全相同。

那么，Brian Beckman 关于用表查找替换函数调用的声明是什么意思？他指的是引用透明函数的这种属性。如果`Square.apply(2)`可以替换为`4`对程序行为没有影响，那么为什么不在第一次调用时缓存值，并将其放入由函数参数索引的表中。的值的查找表`Square.apply(n)`看起来有点像这样：

```
 n: 0 1 2 3 4  5  ...
Square.apply(n): 0 1 4 9 16 25 ... 
```

对于任何对的调用，我们可以简单地在表中找到**n**`Square.apply(n)`的缓存值，而不是调用函数，并将函数调用替换为该值。很明显，这很可能会大大提高程序的速度。******

# php - 空字节注入没有发生

> ID：13766453
> 
> 赞同：3
> 
> 时间：2012-12-07T15:52:09.240
> 
> 标签：php

这是我的代码

```
$file = $_GET['file'];
include "$file.html"; 
```

当我传递这样的 URL 时： `test.php?file=sample.php%00`由于空字节注入，文件 sample.php 应该包含在内。但相反，我收到一个错误： `Failed opening 'sample.php' for inclusion`.

我检查了文件路径并尝试给它绝对路径。

我在 Windows 上使用 PHP 5.3.8 版。我在这里想念什么？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-23T22:09:06.690

从5.3.4开始[修复](http://svn.php.net/viewvc?view=revision&revision=305507)了空字节字符串漏洞。这就是为什么它不适用于您的 5.3.8。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T15:59:24.653

你`magic_quotes_gpc`启用了吗？该设置节省了每个人的追尾，因为它转义了空字节（该设置从 5.4 开始被删除）。

# c# - 如何在 C# 中反序列化在 JQuery 中序列化的内容？

> ID：13766454
> 
> 赞同：0
> 
> 时间：2012-12-07T15:52:13.133
> 
> 标签：c#, asp.net, jquery, serialization, deserialization

. .

自从我这样做以来已经有一段时间了，我正在努力摆脱生锈。

我正在尝试使用 VS2010 在 ASP.NET 中设置 AJAX 结构。

我有一个看起来像这样的 JQuery 表单提交（出于示例目的，非常简化）：

```
function FormSubmit () {
    $.post('SomeHandler.asmx/SomeFunction', 
        $("#form1").serialize(), 
        function(data) {some data handler}
    );
} 
```

我的“SomeHandler.asmx/SomeFunction”是一个 C# 函数，它接受我的表单数据并对其进行处理。

据我所知， SomeHandler.asmx 假定 XML 反序列化，但 JQuery 将其序列化为 HTML 编码字符串，而不是 XML。

我想打个比方，一边说英语，另一边期待听到法语。

我该如何解决这个问题？（例如，假设我的表单有一个文本字段——我们称之为“txtField”和一个下拉列表——我们称之为“lstDropDown”。）

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T16:14:36.827

在您的 asmx 文件中，确保您在接受和响应 json 的 Web 方法上使用以下属性标志：

```
[WebMethod]
[ScriptMethod(ResponseFormat = ResponseFormat.Json)]
public string SomeWebMethod() 
{
  //blah
} 
```

此外，请确保 Web 服务类具有以下属性标志：

```
[System.Web.Script.Services.ScriptService]
public class MyWebService : System.Web.Services.WebService
{
...
} 
```

最后一件事：如果您在客户端序列化数据，则需要使用以下 ajax 设置：

```
 $.ajaxSetup({ contentType: "application/json; charset=utf-8" }); 
```

# symfony - 修改由 Symfony 2.0 FormBuilder 包裹的实体对象

> ID：13766460
> 
> 赞同：0
> 
> 时间：2012-12-07T15:52:34.747
> 
> 标签：symfony

这是我的代码：

```
 $form = $this->createFormBuilder($signupAttempt)
     ->add('email', 'text', array("label" => "your email:"))
     ->add('password', 'password', array("label" => "your password:"))
     ->add('passwordRepeat', 'password', array("label" => "repeat password:"))
     ->getForm();

  if ($request->isMethod('POST')) {
     $form->bindRequest($request);
     $attempt = $form->getData();
     $this->changeSomeAttributesOfSignupAttempt($attempt); // this does not work
     if ($form->isValid()) { // this is not taking into account the modification made inside changeSomeAttributesOfSignupAttempt
        return new Response("data provided are valid - u signiged up!");
     }
  } 
```

看到我的问题了吗？我想对实体进行一些更改，并希望表单能够意识到这些更改。不幸的是，我所做的更改似乎没有被察觉，因此，validaition.xml 中为类 SignupAttempt 定义的规则没有得到满足。

这是实体SignupAttempt的validation.xml：

```
 <getter property="emailInUseAlready">
     <constraint name="False">
        <option name="message">signup_attempt.whole.email_in_use</option>
     </constraint>
  </getter> 
```

和实体类本身：

```
class SignupAttempt {

   protected $id = null;
   protected $email = null;
   protected $password = null;
   protected $passwordRepeat = null;
   protected $emailInUseAlredy = true;

   public function __construct($email = null, $password = null, $passwordReapeat = null) {
      $this->email = $email;
      $this->password = $password;
      $this->passwordRepeat = $passwordReapeat;
   }

   public function getId() {
      return $this->id;
   }

   public function setId($id) {
      $this->id = $id;
   }

   public function getEmail() {
      return $this->email;
   }

   public function setEmail($email) {
      $this->email = $email;
   }

   public function getPassword() {
      return $this->password;
   }

   public function setPassword($password) {
      $this->password = $password;
   }

   public function getPasswordRepeat() {
      return $this->passwordRepeat;
   }

   public function setPasswordRepeat($passwordRepeat) {
      $this->passwordRepeat = $passwordRepeat;
   }

   public function setEmailInUseAlready($bool) {
      $this->emailInUseAlredy = $bool;
   }

   public function isEmailInUseAlready() {
      return $this->emailInUseAlredy;
   }

   public function isSecondPasswordMatching() {
      return $this->password === $this->passwordRepeat;
   }

   public function import(array $data) {
      throw new \RuntimeException("implement this");
   }
} 
```

任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T14:16:02.577

当执行`$form->isValid()`时，返回的（布尔）值实际上是在请求绑定到表单时预先评估的。

因此，更改返回的实体的值`$form->getData()`是完全没有用的，因为验证是预先发生的，并且是在实体对象最初创建时所持有的初始值上进行的。

# c++ - 一段奇怪的代码

> ID：13766479
> 
> 赞同：1
> 
> 时间：2012-12-07T15:53:34.193
> 
> 标签：c++

我写了这段奇怪的小代码。这怎么可能`type`在它的 2 之间发生变化`printf`？

提前致谢

```
int main()
{
    string label = string("faults_team_A_player_12");

    size_t f = label.find('_');

    const char *type = label.substr(0,f).c_str();
    const char team = label.at(f+sizeof("team_"));

    printf("type = %s\n",type);

    int n;
    size_t l = label.length()-label.find_last_of('_');

    int x = sscanf((char *)label.substr(label.find_last_of('_'),l).c_str(),"_%d",&n);
    printf("type = %s\n",type);
    printf("team = %c\n",team);
    printf("player = %d\n",n);

    return 0;
} 
```

输出：

```
type = faults
type = _12
team = A
player = 12 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T15:55:26.320

`type`是一个[悬空指针](http://en.wikipedia.org/wiki/Dangling_pointer)，因为它被初始化为一个临时`std::string`实例的内部成员：

```
const char *type = label.substr(0,f).c_str(); 
```

`std::string`从中获取结果的实例会`c_str()`立即被销毁。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T15:55:29.793

```
const char *type = label.substr(0,f).c_str(); 
```

指针指向临时 ( )`type`中的一段数据。`label.substr(0,f)`对该指针的任何使用都是未定义的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T15:56:23.590

`std::string`当您通过调用获得指向's 缓冲区的指针时，`.c_str()`您不会获取缓冲区。例如，当字符串对象超出范围时，指针就会失效。

# windows - 虚拟机如何检测应用程序窗口？

> ID：13766481
> 
> 赞同：1
> 
> 时间：2012-12-07T15:53:49.307
> 
> 标签：windows, winapi

这是VMware融合的截图... ![http://www.vmware.com/files/images/screens_fusion/f5/Mission-Control-Widescreen-580x363.jpg](../Images/4ed73542302937362a1c16d06641e19f.png)

如您所见，它们可以像模拟 OS X 应用程序一样模拟 Windows 应用程序。我知道背后有很多技术，但我想做的事情是：（欢迎**任何**可以解决以下问题的语言，但**更喜欢 python**。）

1.  如何检测 Windows 上正在运行多少个窗口？
2.  如何检测每个窗口的宽度和高度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T15:59:13.420

1.  调用[`EnumWindows`](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms633497.aspx)枚举顶层窗口。
2.  调用[`IsWindowVisible`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633530.aspx)每个窗口来测试窗口是否可见。
3.  打电话[`GetWindowRect`](http://msdn.microsoft.com/en-us/library/ms633519.aspx)找出窗口的位置。

在 Python 中，您可以使用`win32api`模块完成所有这些操作。

我必须承认，我无法理解 VMware Fusion 与您提出的两个问题之间的关系。

# ios - NSString 到 NSDictionary

> ID：13766482
> 
> 赞同：0
> 
> 时间：2012-12-07T15:53:51.907
> 
> 标签：ios, regex, nsstring, nsdictionary, nsregularexpression

我有一个字符串（来自 HTTP 标头）并想将其拆分为字典。

`foo = \"bar\",baz=\"fooz\", beta= \"gamma\"`

我不能保证字符串每次都相同。也许有空格，也许没有，有时双引号被转义，有时没有。

所以我用正则表达式在 PHP 中找到了解决方案。不幸的是，我无法将其转换为在 iOS 上工作。

```
preg_match_all('@('.$key.')=(?:([\'"])([^\2]+?)\2|([^\s,]+))@', $input, $hits, PREG_SET_ORDER);

foreach ($hits as $hit) {
    $data[hit[1]] = $hit[3] ? $hit[3] : $hit[4];
} 
```

谁能帮我把它转换成Objective-C？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:29:50.053

我遇到了一个有点像 RegEx 大师的人。他解释了整个事情，我在 RegEx 中得到了以下（工作！！！！）解决方案。

这给了我这样的字符串`foo="bar"`：

`(?<=[,\\s])((realm|qop|nonce|opaque)=(?:([\"'])([^\2]+?)\2|([^\\s,]+)))`

然后我使用另一个正则表达式按键和值对其进行拆分以创建字典。

# visual-studio - Git 和共享项目

> ID：13766483
> 
> 赞同：0
> 
> 时间：2012-12-07T15:53:53.933
> 
> 标签：visual-studio, git, version-control

我是 Git 新手。我在 Visual Studio 中工作。

```
Solution
- Phone App, refs Orange and Cabbage
- Shared Lib Orange
- Shared Lib Strawberry
- Shared Lib Cabbage, refs Strawberry 
```

这些中的每一个都应该位于不同的存储库中。我希望共享库触发 TeamCity 上的构建，将它们发布到 NuGet 上，以便我的其他应用程序在下一次构建时从提要中更新。

有没有一种特殊的方法可以在 Git 中管理它，或者我应该将它们全部拉入 App 解决方案并运行一个批处理文件以将它们全部提交？

我在 VS IDE 中安装了 yysun 的 Git 插件，但它只控制应用程序的存储库，因此我必须设置一个宏或固定任务栏按钮以提交所有存储库。

我的问题是：考虑到这种安排的正常日常性，我是否可以在 Git 中做一些简单的设置来支持这一点，而不必花费 20% 的编程时间以正确的顺序发出 DOS 命令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T16:11:49.510

似乎[git 子模块](http://git-scm.com/book/en/Git-Tools-Submodules)可能是一个很好的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T19:03:01.197

您可能需要查看[将 Git 与 Visual Studio 结合使用](https://stackoverflow.com/questions/507343/using-git-with-visual-studio)。

此外，如果您的工作流程只允许您处理 Git 跟踪的文件（至少在大多数情况下），那么**git commit -a**将立即在 repo 中暂存并提交所有 Git 跟踪的文件，从而减少您对每个文件的提交repo 到一个单一的、可重复的命令行命令。

# ios - google analytics ios sdk V2.0 短会话持续时间

> ID：13766486
> 
> 赞同：31
> 
> 时间：2012-12-07T15:54:11.717
> 
> 标签：ios, ipad, google-analytics

我正在开发的应用程序在零售展示的 iPad 上使用。设备已关闭自动锁定功能，应用程序将在一分钟不活动后将视频循环显示为一种屏幕保护程序。我们使用 GA iOS SDK 2.0 beta 来跟踪会话，会话超时为 60 秒。该应用程序在启动时启动会话，并且在屏幕保护程序通过触摸关闭时启动。除了我们得到的多个 0-10 秒长的会话，平均持续时间为 0:00 之外，这一切都很好。我们可以启动应用程序，经历几个 60 秒。会话，然后将这些会话与 0-10 秒的 2-3 一起报告。会议。从我可以看到该应用程序仅在应该启动会话时才开始，所以我想知道这是否与 Google 如何计算会话有关。我在文档中没有看到任何解释这一点的东西，我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-30T09:24:48.967

刚从我朋友那里找到这个答案

[http://support.google.com/analytics/bin/answer.py?hl=en&answer=1144430&topic=1011345&ctx=topic](http://support.google.com/analytics/bin/answer.py?hl=en&answer=1144430&topic=1011345&ctx=topic)

在我的应用程序中，我只有一个使用 [tracker trackView:@"my screen name"] 的视图控制器，我现在将它卡在 AppDelegate.m 中，因为我还没有开始跟踪视图/屏幕。根据链接的材料，GA 计算会话持续时间的方式是基于视图之间的时间。由于我只定义了一个视图（并且在 viewController 中没有正确定义），这可能是我得到这么多 0-10 秒会话的原因。要去探索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-14T15:52:25.870

您可能会在跟踪事件/浏览量之前启动新会话。请确保您不是每次都开始新会话。请参阅此链接 [https://developers.google.com/analytics/devguides/collection/ios/v3/sessions](https://developers.google.com/analytics/devguides/collection/ios/v3/sessions)

# c - 用内核模块（Linux）编写的中断可以通知 Qt 中正在运行的程序吗？没有用户空间程序等待/轮询？

> ID：13766494
> 
> 赞同：1
> 
> 时间：2012-12-07T15:54:48.737
> 
> 标签：c, embedded-linux, interrupt

无论如何，来自内核模块的中断是否可以通知在用户空间中运行的 Qt 嵌入式程序？不使用 ioctl 的“wait_event_interruptible()”？

我希望我的程序能够正常运行，而不必“等待”或进行轮询以检查中断是否发生。一旦中断发生，程序就会做出反应

这个问题类似于我[的内核如何通知用户空间程序发生中断](https://stackoverflow.com/questions/12899055/how-kernel-notify-a-user-space-program-an-interrupt-occurrs)但他正在使用“wait_event_interruptible()”

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T18:31:33.460

您也可以尝试使用 netlink (libnl)。在驱动程序中，您只需要单播消息的 pid 号。从应用程序中，您可以使用套接字的 recvmsg() 等待偶数发生。

*   [app]----{向驱动程序发送消息}---> [驱动程序]（驱动程序现在知道 pid 并保存它）
*   [app]------{blocking recvmsg}---------> 等待事件被引发
*   [app]<--------{带有有效负载的消息}--- [驱动程序]（将事件信息作为单播发送到 pid）

希望这可以帮助，

问候

# python - Python/Flask/Jinja url_for 格式化

> ID：13766505
> 
> 赞同：0
> 
> 时间：2012-12-07T15:55:14.877
> 
> 标签：python, flask, url-for

我正在寻找使用 Flask 的 url_for 为标签生成 URL - 但是它似乎正在用实体/url 代码“%2B”替换“+”。这使得 URL 相当难看，'+' 会更受欢迎。

所以，我的问题是，如何使用 url_for - 但让它接受 '+' 而不将其格式化为 HTML 实体？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T16:50:23.520

flask url_for 函数调用 werkzeug url_quote 函数（查看 github 上的源代码）。url_quote 函数定义为：

```
def url_quote(s, charset='utf-8', safe='/:'):
"""URL encode a single string with a given encoding.

:param s: the string to quote.
:param charset: the charset to be used.
:param safe: an optional sequence of safe characters.
"""
if isinstance(s, unicode):
    s = s.encode(charset)
elif not isinstance(s, str):
    s = str(s)
return _quote(s, safe=safe) 
```

所以可能这是你可以做一些改变的地方。

# wcf - 我们如何在 Workflow 中初始化对象（即 .xamlx）

> ID：13766507
> 
> 赞同：0
> 
> 时间：2012-12-07T15:55:16.017
> 
> 标签：wcf, msmq, workflow-foundation

我的 WCF 服务假设将调用推送到 MSMQ（队列），最终将调用另一个 WCF 服务来执行数据库操作。我为 MSMQ 操作创建了一个新项目，它有一个用于工作流的“xamlx”文件。我如何（或在哪种情况下）初始化对象，以便可以在目标 WCF 中访问它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T23:21:37.060

休提出了一个很好的观点。根据您告诉我们的内容，这里的工作流程似乎不是绝对必要的。

如果出于其他原因需要它（例如流动分布式事务），那么在您的工作流项目中，您应该能够将服务引用添加到您的目标 WCF 服务。这将为您生成与目标 WCF 服务的签名相匹配的活动。这些活动期望的对象可以通过表达式初始化，例如直接在表达式文本框中的活动上，或使用通过分配活动设置的变量。

希望有帮助，

——戴夫，WF团队

# python - 如何在 Python 中像 Linux 上的 rm -rf 一样强制删除？

> ID：13766513
> 
> 赞同：8
> 
> 时间：2012-12-07T15:55:30.853
> 
> 标签：python

我想在不关闭服务器的情况下删除我的应用服务器的一些日志文件。我可以使用什么命令使用 Python 来执行此操作，例如`rm -rf`在 Linux 系统中？

请帮忙。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-07T16:05:01.480

在这种情况下，shutil 是你的朋友。

[http://docs.python.org/2/library/shutil.html#shutil.rmtree](http://docs.python.org/2/library/shutil.html#shutil.rmtree)

```
import shutil
shutil.rmtree("/my/path/to/folder/to/destroy") 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-07T15:58:30.983

```
#!/usr/bin/env python             
import os

def nukedir(dir):
    if dir[-1] == os.sep: dir = dir[:-1]
    files = os.listdir(dir)
    for file in files:
        if file == '.' or file == '..': continue
        path = dir + os.sep + file
        if os.path.isdir(path):
            nukedir(path)
        else:
            os.unlink(path)
    os.rmdir(dir)

nukedir("/home/mb/test"); 
```

上述函数将递归删除任何目录...

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-07T18:32:40.897

您的服务器是否运行 Linux，或者这只是一个示例？

在 python 上，`shutil.rmtree()`相当于`rm -r`（正如@Alex 已经回答的那样）。所有 python 删除命令 ( `os.unlink(), os.rmdir()`) 都无需检查即可工作，因此它们始终等同于`rm -f`.

但是如果你在 Windows 上，操作系统[不会让你](http://docs.python.org/2/library/os.html#os.remove)删除一个仍然打开的文件。你会得到一个例外。AFAIK 没有特权进程对此无能为力。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T16:06:30.490

您可以使用该`subprocess`模块：

```
from subprocess import Popen, PIPE, STDOUT

cmd = 'rm -frv /path/to/dir'
p   = Popen(cmd, shell=True, stdin=PIPE, stdout=PIPE, stderr=STDOUT, close_fds=True)
out = p.stdout.read()
print out 
```

# c++ - 奇怪的枚举名称冲突

> ID：13766517
> 
> 赞同：4
> 
> 时间：2012-12-07T15:55:39.673
> 
> 标签：c++, gcc, namespaces, ffmpeg, ogre

我正在编译一个同时使用 ffmpeg 和 Ogre 的项目。现在在 Windows 上，一切正常。

但是当我想用以下代码行编译一个文件时：

```
Ogre::PixelFormat format = Ogre::PF_BYTE_RGBA; 
```

编译器给出以下错误：

```
error: ‘AVPixelFormat’ is not a member of ‘Ogre’ 
```

这在很多方面都很奇怪，因为我不仅用 :: 指定了 Ogre 命名空间，而且 Ogre 中也没有 AVPixelFormat。gcc 如何将“PixelFormat”与“AVPixelFormat”混淆？

我怎样才能摆脱它？

我很想在这里使用 int 而不是枚举，但是另一个 Ogre 函数要求格式位于 Ogre::PixelFormat 中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T15:57:26.133

首先使用 对其进行预处理`gcc -E`，然后`grep`通过文件查找`AVPixelFormat`或`PixelFormat`。我怀疑你有一个#define 或`typedef`浮动，你只需要找到发生这种情况的地方，而预编译的源文件就是这将变得明显的地方。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-29T15:31:03.087

问题出在 avutil/pixfmt.h 中：

```
#define PixelFormat AVPixelFormat 
```

这可以防止用户在他们自己的代码中的任何地方使用“PixelFormat”这个词，即使在命名空间中也是如此。

这是对仍然使用旧标识符的旧软件的兼容性破解。

如果您可以编辑代码，解决方案非常简单。只需在 C++ 代码中添加一个

```
#define FF_API_PIX_FMT 0 
```

在包含 ffmpeg 标头之前。

这将禁用 pixfmt.h 标头中的 if：

```
#if FF_API_PIX_FMT
#define PixelFormat AVPixelFormat
... 
```

来源：[https ://trac.ffmpeg.org/ticket/4216](https://trac.ffmpeg.org/ticket/4216)

PS我知道这个问题很老，但不知何故我觉得没有解决方案，我需要一个解决方案，所以我添加了它。

# android - 带有服务的 Android ContentProvider

> ID：13766519
> 
> 赞同：6
> 
> 时间：2012-12-07T15:55:48.100
> 
> 标签：android, android-service, android-contentprovider

我有一个 ContentProvider 子类来完成我所有的数据库工作，以及一个在后台运行的服务。

我似乎无法将服务绑定到 ContentProvider。我可以从 ContentProvider 中的服务调用一个方法，还是有办法绑定？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T13:34:59.333

我在 onCreate() 方法中绑定了服务

```
@Override
    public boolean onCreate() {

        mContext = getContext();

        .. do other things

        doBindService();

        return true;
    } 
```

然后使用上下文来实际绑定服务

```
void doBindService() {

        mContext.bindService(new Intent(mContext,
                SomeService.class), mConnection, Context.BIND_AUTO_CREATE);
    } 
```

我没有取消绑定服务，但它似乎工作正常

# spring - java.lang.OutOfMemoryError: Perm Gen Space..again

> ID：13766522
> 
> 赞同：1
> 
> 时间：2012-12-07T15:56:05.320
> 
> 标签：spring, jsp, out-of-memory, weblogic11g, permgen

在编译我的 JSP 时，我遵循了几篇很棒的帖子中的说明来处理这个错误，它似乎消失了 --- 有一段时间，但现在它又回来了：（首先是“规格”：

*   春季 3.1.0 发布
*   使用 WebLogic Server 10.3.5，
*   将 STS.ini 文件调整为如下：

    ```
    -Dosgi.requiredJavaVersion=1.5
    -Xmn28m
    -Xms120m
    -Xmx2048m
    -Xss1m
    -XX:PermSize=256m
    -XX:MaxPermSize=512m 
    ```

这是我在尝试查看我的页面时收到的错误：

```
java.lang.OutOfMemoryError: PermGen space
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClassCond(ClassLoader.java:630)
at java.lang.ClassLoader.defineClass(ClassLoader.java:614)
at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at java.lang.ClassLoader.loadClass(ClassLoader.java:305)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
at java.lang.ClassLoader.loadClass(ClassLoader.java:246)
at com.bea.core.repackaged.jdt.internal.compiler.ClassFile.<init>(ClassFile.java:256)
at com.bea.core.repackaged.jdt.internal.compiler.ClassFilePool.acquire(ClassFilePool.java:34)
at com.bea.core.repackaged.jdt.internal.compiler.ClassFile.getNewInstance(ClassFile.java:229)
at com.bea.core.repackaged.jdt.internal.compiler.ast.TypeDeclaration.generateCode(TypeDeclaration.java:512)
at com.bea.core.repackaged.jdt.internal.compiler.ast.TypeDeclaration.generateCode(TypeDeclaration.java:611)
at com.bea.core.repackaged.jdt.internal.compiler.ast.CompilationUnitDeclaration.generateCode(CompilationUnitDeclaration.java:358)
at com.bea.core.repackaged.jdt.internal.compiler.Compiler.process(Compiler.java:770)
at com.bea.core.repackaged.jdt.internal.compiler.Compiler.compile(Compiler.java:464)
at weblogic.jsp.internal.java.JDTJavaCompiler.generateByteCode(JDTJavaCompiler.java:104)
at weblogic.jsp.internal.java.JavaSourceFile._codeGen(JavaSourceFile.java:211)
at weblogic.jsp.internal.java.JavaSourceFile.codeGen(JavaSourceFile.java:201)
at weblogic.jsp.internal.ProxySourceFile.compileGeneratedFiles(ProxySourceFile.java:310)
at weblogic.jsp.internal.ProxySourceFile.codeGen(ProxySourceFile.java:248)
at weblogic.jsp.internal.SourceFile.codeGen(SourceFile.java:327)
at weblogic.jsp.internal.client.ClientUtilsImpl$CodeGenJob.run(ClientUtilsImpl.java:599)
at weblogic.jsp.internal.client.Job.performJob(Job.java:83)
at weblogic.jsp.internal.client.ThreadPool$WorkerThread.run(ThreadPool.java:217) 
```

一周前，在调整默认 PermSize 后错误消失了（不记得它被设置为什么）......还有什么我应该在这里寻找的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T23:17:03.967

作为乔治 D 的回答的后续：对于 weblogic，对 JVM 参数的任何更改都应该放在 $DOMAIN_HOME/bin/setDomainEnv.sh 中（这适用于 Linux，应该是 Windows 的类似路径）。

# matlab - 如何在 Matlab 中存储这个结构（整数列表）？

> ID：13766523
> 
> 赞同：3
> 
> 时间：2012-12-07T15:56:05.523
> 
> 标签：matlab, data-structures

我需要存储一个整数列表列表。例如，`X[1]`应该能够包含`[1 3 5]`，而`X[2]`可以包含`[1 2]`. 最好的解决方案是什么？单元阵列？

* * *

背后故事：

对于一个项目，我预先计算了 N 条线和 M 个立方体之间的交点。这些是通过两种方式检索的：给定一个行索引，我想要一个它通过的立方体列表，给定一个立方体索引，我想要一个通过它的行列表。

典型值为 N=2^24 和 M=2^18，这意味着交集矩阵 (NxM) 是不可能的。幸运的是，平均线仅通过 M^(1/3)=2^6 个立方体。目前，我将结构存储为 NxM^(1/3) 矩阵，因此这`X(n,:)`是第 n 行穿过的立方体向量（用零填充）。

这适用于检索给定列表索引的多维数据集，但事实证明我的代码的瓶颈是检索给定多维数据集索引的行。（我用`find(X==m)`m 是立方体索引来做。）我无法创建相反的矩阵，因为穿过单个立方体的线数可能非常高，即使它平均很低。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-07T16:15:40.123

通常，**单元阵列**是此问题的正确答案。这是最简单的情况。一些示例用途：

```
%Writes
X = {[1], [1 2 3], [1 2]};
X{4} = [1 2 3 4];

%Reads
a = X{1}
b = cat(2,X{:});
c = X([2 4]); 
```

然而，这并不是唯一的答案。

您可以使用一个**结构数组**，每个结构都有一个名为`.indexes`（或根据您的问题的适当名称）的字段。如果您希望将其他信息附加到列表列表中，这将提供更多的灵活性，例如可以将立方体位置添加为`.position`字段。示例用途：

```
%Writes
X(1).indexes = 1;
X(2).indexes = [1 2 3];
X(3).indexes = [1 2];

%Reads
a = X(1).indexes
b = cat(2,X.indexes)
c = X([2 4]); 
```

您还可以使用**containers.Map**对象。这与结构数组具有相同的优点，但在引用对象的方式上具有更大的灵活性。而当使用结构数组时，结构是通过索引引用的，使用容器。映射对象可以使用任意数字（不是接近 1 的整数）或名称（对于 2^24 情况不实用）来引用每个结构。这可能不是您的最佳答案，但参考示例如下：

```
%Writes
X = containers.Map('keyType','uint32','valueType','Any');
X(1) = [1];
X(2) = [1 2 3];
X(3) = [1 2];
X(4) = [1 2 3 4];

%Reads
a = X(1);
b = cat(2,X.values); 
```

最后，可能值得为此定义一对**自定义类**。这需要更多的工作来设置，但可能是让恒定时间查找到预先计算的值的最简单方法。下面是一些让您开始走这条路的代码。

```
%A start at cube.m.  Most of the code handles smartly reallocating the list of lines.
classdef cube < handle
    properties (SetAccess = private, GetAccess = public)
        numLines = 0
        intersectingLines = [];
    end
    methods (Access = public)
        function addLine(self, lineToAdd)
            if self.numLines == 0
                self.intersectingLines = lineToAdd;
                self.numLines = 1;
            elseif self.numLines>=length(self.intersectingLines)
                self.intersectingLines(length(self.intersectingLines)*2) = line();
                self.intersectingLines(self.numLines+1) = lineToAdd;
                self.numLines = self.numLines+1;
            else
                self.intersectingLines(self.numLines+1) = lineToAdd;
                self.numLines = self.numLines+1;
            end
        end
    end
end

%A start at line.m.  A near copy/paste of cube.m
    classdef line < handle
    properties (SetAccess = private, GetAccess = public)
        numCubes = 0
        intersectingCubes = [];
    end
    methods (Access = public)
        function addCube(self, cubeToAdd)
            if self.numCubes == 0
                self.intersectingCubes = cubeToAdd;
                self.numCubes = 1;
            elseif self.numCubes>=length(self.intersectingCubes)
                self.intersectingCubes(length(self.intersectingCubes)*2) = cube();
                self.intersectingCubes(self.numCubes+1) = cubeToAdd;
                self.numCubes = self.numCubes+1;
            else
                self.intersectingCubes(self.numCubes+1) = cubeToAdd;
                self.numCubes = self.numCubes+1;
            end
        end
    end 
end 
```

要按照编写的方式使用这些类，您需要`add`成对调用方法（以后的明显升级是正确交叉添加。同时（因为我很懒），我们将定义一个辅助函数。

```
function crossAdd(cube, line)
cube.addLine(line);
line.addCube(cube); 
```

现在示例使用是：

```
%Create two class arrays of cubes and lines
allCubes(1) = cube;
allCubes(2) = cube;
allCubes(3) = cube;
allCubes(4) = cube;

allLines(1) = line;
allLines(2) = line;
allLines(3) = line;
allLines(4) = line;

%Define links (matching above "writes" examples)
crossAdd(allCubes(1), allLines(1));
crossAdd(allCubes(2), allLines(1));
crossAdd(allCubes(2), allLines(2));
crossAdd(allCubes(2), allLines(3));
crossAdd(allCubes(3), allLines(1));
crossAdd(allCubes(3), allLines(2));
crossAdd(allCubes(4), allLines(1));
crossAdd(allCubes(4), allLines(2));
crossAdd(allCubes(4), allLines(3));
crossAdd(allCubes(4), allLines(4));

%Use linked values
aLines = allCubes(1).getLines   %Only one intersecting line
bLines = allCubes(2).getLines   %Three intersecting lines
cubesFromSecondLine = bLines(2).getCubes %Three cubes here (2, 3, 4) 
```

顺便说一句，我们实际上只是利用了`< handle`类作为传递引用的事实，因此我们可以使用复杂的、交叉链接的数据结构。

# php - 页面未显示最近的内容更新

> ID：13766525
> 
> 赞同：0
> 
> 时间：2012-12-07T15:56:10.033
> 
> 标签：php, jquery, caching

我有一个包含大量图像（大约 50 个）的页面，每个图像后跟一个表格。这是一个基本测验，其中输入使用 $.ajax 发送到 PHP 文件，并与 MySQL 数据库的内容进行匹配。

成功匹配（即正确答案）后，表格将替换为来自数据库的信息，由 PHP 脚本提供。如果一个问题先前已被正确回答，则使用 PHP 从一开始就检索该信息。

没有什么太疯狂了。

然而，虽然在页面上一切正常，但浏览器（几乎所有浏览器）似乎正在缓存内容，因此当您离开页面并稍后返回时，已回答的问题仍会以表单形式呈现，而不是内容。据我所知，浏览器会在加载时缓存内容，而不是在页面上添加的内容。我可以在数据库中看到答案就好了。

我不介意缓存图像，但每次页面加载时都需要更新内容。我怎么做？

我希望这是有道理的。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T15:59:18.423

您必须设置一个不指定缓存的标头。如果你使用 jQuery，你可以这样设置：

```
$.ajaxSetup({ cache: false }); 
```

尝试元标记：

```
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="-1">
<meta http-equiv="CACHE-CONTROL" content="NO-CACHE"> 
```

# javascript - html5画布切换绘制函数

> ID：13766528
> 
> 赞同：0
> 
> 时间：2012-12-07T15:56:11.593
> 
> 标签：javascript, html5-canvas

对于我正在做的一个项目，我需要使用 arc 函数和 lineTo 函数在画布上绘制一个太阳系，并在它们之间一键按下切换。我想我很接近我可以切换一次但我不能切换回原来的。很抱歉有大量代码，但我已经为此工作了几个小时，我不再记得什么是重要的。

```
 if (window.addEventListener) 
{
    window.addEventListener( 'load', initialise, false);
    window.addEventListener('keydown',onKeyDown, false);
}

var canvas;
var context;
var angle = 0;
var time = 20;
var paused = false;
var timer;
var drawStyle = drawArc();

function onKeyDown(event) 
{ 
    var keyCode = event.keyCode;
    switch(keyCode)
    { 
        case 80: //p
        togglePause();
        break; 
    }
    switch(keyCode)
    {
        case 75: //k
        toggleDrawStyle();
        break; 
    }
        switch(keyCode)
    {
        case 70: //f
        speedUp();
        break; 
    }
    switch(keyCode)
    {
        case 82: //r
        speedDown();
        break; 
    }
}

function toggleDrawStyle()
{
    if(drawStyle == drawArc())
    {
        drawStyle = drawLine();
    }
    else if(drawStyle == drawLine())
    {
        drawStyle = drawArc();
    }
}

function speedUp()
{
    time = time / 2;
}

function speedDown()
{
        time = time * 2;
}

function togglePause() 
{
    if (!paused)
    {
        clearInterval(timer);
        paused = true;
    }
    else 
    {
        timer = setInterval(drawArc, time);
        timer = setInterval(drawLine, time);
        paused = false;
    }
}

function initialise() 
{
    canvas = document.getElementById('canvas'); 

    if (!canvas.getContext)
    { 
        alert('Error: no canvas.getContext!'); 
        return; 
    }

    context = canvas.getContext('2d'); 
    if (!context)
    { 
        alert('Error: failed to getContext!'); 
        return; 
    }

    timer = setInterval(drawArc, time);

}

function drawArc() 
{ 
    clearCanvas();
    context.fillStyle = "#000000";
    context.fillRect(0, 0, canvas.width, canvas.height);
    incrementAngle();
    context.save();
    //draw the sun
    context.translate(canvas.width/2, canvas.height/2);
    context.rotate(convertToRadians(angle));
    circle(0, 0, 30, "#ffaa00");

    //draw mercury
    context.save();
    context.rotate(convertToRadians(angle)*1.5);
    moveCirlce(1/6, 1/6 , 30 , 30, "#555555");
    context.restore();

    //draw venus
    context.save();
    context.rotate(convertToRadians(angle)*1.25);
    moveCirlce(1/5, 1/5, 40, 40, "#aa0011");
    context.restore();

    // draw earth
    context.save();
    context.rotate(convertToRadians(angle));
    moveCirlce(0.3, 0.3, 55, 55, "#0077ff");
    context.restore();

    //draw the moon
    context.save();
    context.rotate(convertToRadians(angle));
    context.translate(55, 55);
    context.rotate(convertToRadians(angle) * 2);
    moveCirlce(1/15, 1/15, 10, 10, "#555555");
    context.restore();

    //draw mars
    context.save();
    context.rotate(convertToRadians(angle) *0.9);
    moveCirlce(1/3, 1/3, 80, 80, "#ff0000");
    context.restore();

    //draw jupiter
    context.save();
    context.rotate(convertToRadians(angle)* 0.75);
    moveCirlce(2/3, 2/3, 110, 110, "#cc8811");
    context.restore();

    //draw sautrn
    context.save();
    context.rotate(convertToRadians(angle)*0.55);
    moveCirlce(17/30, 17/30, 140, 140, "#dd7722");
    context.restore();

    //draw uranus
    context.save();
    context.rotate(convertToRadians(angle)*0.3);
    moveCirlce(14/30, 14/30, 170, 170, "#4444ff");
    context.restore();

    //draw neptune
    context.save();
    context.rotate(convertToRadians(angle)*0.2);
    moveCirlce(11/30, 11/30, 190, 190, "#9999ff");
    context.restore();
    context.restore();

}

function drawLine()
{
    clearCanvas();
    context.fillStyle = "#000000";
    context.fillRect(0, 0, canvas.width, canvas.height);
    incrementAngle();
    context.save();
    //draw sun
    context.translate(canvas.width/2, canvas.height/2);
    context.rotate(convertToRadians(angle));
    lineCircle(0, 0, 30, "#ffaa00");    

    //draw mercury
    context.save();
    context.rotate(convertToRadians(angle)*1.5);
    moveLineCirlce(1/6, 1/6 , 30 , 30, "#555555");
    context.restore();

    //draw venus
    context.save();
    context.rotate(convertToRadians(angle)*1.25);
    moveLineCirlce(1/5, 1/5, 40, 40, "#aa0011");
    context.restore();

    // draw earth
    context.save();
    context.rotate(convertToRadians(angle));
    moveLineCirlce(0.3, 0.3, 55, 55, "#0077ff");
    context.restore();

    //draw the moon
    context.save();
    context.rotate(convertToRadians(angle));
    context.translate(55, 55);
    context.rotate(convertToRadians(angle) * 2);
    moveLineCirlce(1/15, 1/15, 10, 10, "#555555");
    context.restore();

    //draw mars
    context.save();
    context.rotate(convertToRadians(angle) *0.9);
    moveLineCirlce(1/3, 1/3, 80, 80, "#ff0000");
    context.restore();

    //draw jupiter
    context.save();
    context.rotate(convertToRadians(angle)* 0.75);
    moveLineCirlce(2/3, 2/3, 110, 110, "#cc8811");
    context.restore();

    //draw sautrn
    context.save();
    context.rotate(convertToRadians(angle)*0.55);
    moveLineCirlce(17/30, 17/30, 140, 140, "#dd7722");
    context.restore();

    //draw uranus
    context.save();
    context.rotate(convertToRadians(angle)*0.3);
    moveLineCirlce(14/30, 14/30, 170, 170, "#4444ff");
    context.restore();

    //draw neptune
    context.save();
    context.rotate(convertToRadians(angle)*0.2);
    moveLineCirlce(11/30, 11/30, 190, 190, "#9999ff");
    context.restore();
    context.restore();
}

function convertToRadians(degree) 
{
    return degree*(Math.PI/180);
}

function incrementAngle() 
{
    angle++;
}

function clearCanvas()
{
    canvas.width = canvas.width;
}
function circle(x, y, r , col)
{
    context.beginPath();
    context.arc(x, y, r, 0, 2*Math.PI);
    context.fillStyle = col;
    context.fill();
}

function moveCirlce(a, b, x, y, col)
{
    context.save();
    context.translate(x, y);
    context.scale(a, b);
    circle(0, 0, 30, col);
    context.restore();
}

function lineCircle(a, b, r, col)
{
    var theta = Math.PI * 2 / 9;
    for (var i = 0; i <= 9; i = i + 1) 
    {
        var angle = theta * i;
        var x = a + r * Math.cos(angle);
        var y = b + r * Math.sin(angle);
        if (i == 0) 
        {
            context.moveTo(x,y);
        }
        else 
        {
            context.lineTo(x,y);
        }
    }
    context.fillStyle = col;
    context.fill();
}

function moveLineCirlce(a, b, x, y, col)
{
    context.save();
    context.translate(x, y);
    context.scale(a, b);
    lineCircle(0, 0, 30, col);
    context.restore();
}

initialise();
drawArc(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T16:57:52.887

你写的 switch 语句只不过是一种奇怪的方式来编写一堆，`if (condition) do_statements;` 所以这不是问题（尽管这*确实*意味着你没有按预期使用 switch 语句；如果这是一个年级的作业，这可能意味着一些扣除）。

一个明确的迹象表明，您使用`togglePause`触发`setInterval`， `drawArc`然后通过触发覆盖计时器`setInterval`id `drawLine`。这意味着每当您尝试清除Interval 时，您只会清除`drawLine`.

你也有一个`drawStyle`变量，但你并没有真正将它用于任何事情，因为 drawArc 和 drawLine 不返回任何值。

所以，一些提示...

*   为您的 drawStyle 变量分配适当的东西......无论您是否使用某些标志或实际功能本身，我都不在乎。
*   更好地处理您的 setInterval 逻辑。提示：通过一些调整，您可以在`timer = setInterval(function(){drawStyle();}, time);`任何地方使用 just use 。
*   您的加速/减速功能已损坏。你的太阳系应该通过改变时间增量来工作——也就是说，不仅仅是将角度增加 1，而是增加一些你可以改变的可变数量。
*   最后，在你搞定逻辑之后，[修复你的 switch 语句](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/switch)

# ios - 在 Xcode (iOS) 中使用 OpenGL-ES 将图像数据加载到纹理中只能以某种方式工作

> ID：13766529
> 
> 赞同：0
> 
> 时间：2012-12-07T15:56:11.997
> 
> 标签：ios, opengl-es, textures, augmented-reality

我正在尝试加载将在四个顶点之间的简单正方形上绘制的纹理。不幸的是，这似乎可行的唯一方法是，如果我将用于加载图像数据的代码放入每帧调用的函数中。我的代码最初基于 ARToolKit 函数（因此得名 drawCube）。这是我的代码的样子：

```
- (void) drawCube
{

glStateCacheEnableTex2D();
glStateCacheEnableBlend();
glStateCacheBlendFunc(GL_ONE, GL_SRC_COLOR);
glStateCacheEnableClientStateVertexArray();
glStateCacheEnableClientStateTexCoordArray();
glStateCacheEnableClientStateNormalArray();

const GLfloat cube_vertices [4][3] = {
    {-1.0f, 1.0f, -1.0f}, {1.0f, 1.0f, -1.0f}, {-1.0f, -1.0f, -1.0f}, {1.0f, -1.0f, -1.0f} };
const GLfloat texCoords [4][2] = {
    {0.0, 1.0}, {1.0, 1.0}, {0.0, 0.0}, {1.0, 0.0}
};
const GLfloat normals [4][3] = {
    {0.0, 0.0, 1.0}, {0.0, 0.0, 1.0}, {0.0, 0.0, 1.0}, {0.0, 0.0, 1.0}
};

glGenTextures(1, &texture[0]);
glBindTexture(GL_TEXTURE_2D, texture[0]);

glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER,GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER,GL_LINEAR);

NSString *path = [[NSBundle mainBundle] pathForResource:@"iTunesArtwork" ofType:@"png"];
NSData *texData = [[NSData alloc] initWithContentsOfFile:path];
UIImage *image = [[UIImage alloc] initWithData:texData];
if (image == nil)
    NSLog(@"Do real error checking here");

GLuint width = CGImageGetWidth(image.CGImage);
GLuint height = CGImageGetHeight(image.CGImage);
CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
void *imageData = malloc( height * width * 4 );
CGContextRef contextt = CGBitmapContextCreate( imageData, width, height, 8, 4 * width, colorSpace, kCGImageAlphaPremultipliedLast | kCGBitmapByteOrder32Big );
CGContextTranslateCTM (contextt, 0, height);
CGContextScaleCTM (contextt, 1.0, -1.0);
CGColorSpaceRelease( colorSpace );
CGContextClearRect(contextt, CGRectMake( 0, 0, width, height ) );
CGContextTranslateCTM(contextt, 0, height - height );
CGContextDrawImage(contextt, CGRectMake( 0, 0, width, height ), image.CGImage );

glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, width, height, 0, GL_RGBA, GL_UNSIGNED_BYTE, imageData);

CGContextRelease(contextt);

free(imageData);
[image release];
[texData release];

glPushMatrix(); // Save world coordinate system.
glScalef(20.0f, 20.0f, 20.0f);
glTranslatef(0.0f, 0.0f, 1.0f); // Place base of cube on marker surface.
glStateCacheDisableLighting();
glBindTexture(GL_TEXTURE_2D, texture[0]);
glStateCacheVertexPtr(3, GL_FLOAT, 0, cube_vertices);
glStateCacheNormalPtr(GL_FLOAT, 0, normals);
glStateCacheTexCoordPtr(2, GL_FLOAT, 0, texCoords);

glDrawArrays(GL_TRIANGLE_STRIP, 0, 4);

glStateCacheDisableClientStateNormalArray();
glStateCacheDisableClientStateTexCoordArray();
glStateCacheDisableClientStateVertexArray();

glPopMatrix();    // Restore world coordinate system.
} 
```

这段代码工作正常，唯一的问题是它被调用的每一帧都有一个 AR 标记对相机可见，这当然是不行的。但是，当我尝试将图像数据线移动到 init 函数时，我只得到一个没有纹理的白色方块。我移动的行是前 3 条 Enable Tex2D/Blend 和 BlendFunc。然后在正常坐标之后，一切都归结为[texData release]。我的代码基于我在这里阅读的教程：http: [//iphonedevelopment.blogspot.com/2009/05/opengl-es-from-ground-up-part-6_25.html](http://iphonedevelopment.blogspot.com/2009/05/opengl-es-from-ground-up-part-6_25.html)

对我来说，一切似乎都在正确的地方，但显然情况并非如此。谁能解释一下我的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T16:36:47.863

没有看到你的初始化代码，我不能确定。可能您正在运行此代码以在设置 OpenGL 上下文之前加载纹理。上下文创建是在 Apple 的 Xcode OpenGL 应用程序模板中的视图控制器的 viewDidLoad 方法中完成的。由于服务器离线，我无法从这个博客系列下载模板。也许您的模板以相同的方法创建上下文。尝试移动纹理加载代码，使其在上下文创建后运行。

顺便说一句，本教程相当陈旧。自从该博客条目发布以来，GLKit 被添加到 iOS SDK 中。GLKit 包含非常方便的纹理加载代码。

# jsp - 无法将参数从 servlet 传递给 jsp (jstl)

> ID：13766533
> 
> 赞同：1
> 
> 时间：2012-12-07T15:56:15.697
> 
> 标签：jsp, jstl, el

我正在尝试将一个`List<String[]>`对象传递给我的 jsp 页面并使用 jstl 处理它。

我的小服务程序：

```
request.setAttribute("rows", entries);
request.getRequestDispatcher("/pages/result.jsp").forward(request, response); 
```

页：

```
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
...
${rows}
<c:forEach items="${rows}" var="row">
   <tr>
      <c:forEach items="${row}" var="field">
         <td>${field}</td>
      </c:forEach>
   </tr>
</c:forEach> 
```

参数无法识别 - 意味着它们被打印为`${rows}`和`${field}`

有趣的是，当我用这种方式做同样的事情时（我理解这是不好的做法）：

```
<% 
List<String[]> entries = (List<String[]>) request.getAttribute("rows"); 
for...
%> 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T16:02:26.183

> *意味着它们被打印为 ${rows} 和 ${field}*

那么，不评估 EL 表达式？当使用的 JSTL 版本、使用的 servletcontainer 版本和 webapp 的版本之间存在版本不兼容时，就会发生这种情况`web.xml`。

首先，您需要确定目标 servlet 容器最大支持哪个 Servlet API 版本。然后您可以确定您实际需要的 JSTL 版本以及`web.xml`应该声明的版本。

想象一下，您正在使用 Tomcat 7，它是一个与 Servlet 3.0 兼容的容器，那么您应该至少使用 JSTL 1.2，并且`web.xml`应该声明它符合 Servlet 3.0。或者，如果您使用的是 Tomcat 6，它是一个与 Servlet 2.5 兼容的容器，那么您应该至少使用 JSTL 1.1，并且`web.xml`应该声明它符合 Servlet 2.5。

一个更罕见的原因，但在初学者中并不少见，是 webapp`/WEB-INF/lib`错误地被 servletcontainer 特定的 JAR 文件等混杂在一起`el-api.jar`，这只会与目标 servletcontainer 本身提供的 EL 安装冲突。

### 也可以看看：

*   [我们的 JSTL wiki 页面](https://stackoverflow.com/tags/jstl/info)- 包含版本/安装详细信息、下载链接和 web.xml 示例。

# java - Jquery/HTML5/Ajax 上传进度条？

> ID：13766534
> 
> 赞同：2
> 
> 时间：2012-12-07T15:56:21.017
> 
> 标签：java, jquery, upload

我正在开发一个简单的 S3 上传器，让它执行并做我需要做的事情；但是，我想知道是否有一个易于创建的上传进度条？

在浏览器的底部，有一条浏览器消息，上面写着“正在上传”——有没有人知道有什么文章可以用来显示加载栏？

理想情况下，该变量将传递给一个 jquery 函数，该函数在引导进度条（接受整数）中呈现百分比。

这里的目标是更美观，不一定是 100% 准确。

![这是来自浏览器的上传百分比](../Images/ab3dd4b64dc3c9472885041ec5cd281b.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T16:02:29.023

如果您使用的是 XMLHttpRequest 对象，则可以使用 onprogress 事件和事件的 lenghtcomputable 属性。仅当您的 XMLHttpRequest 支持进度时才应该这样做（test = "upload" in new XMLHttpRequest）

```
var xhr = new XMLHttpRequest();
xhr.open('POST', 'post/picture');
xhr.onload = function() {
   progress.value = progress.innerHTML = 100;
};

xhr.upload.onprogress = function (event) {
    if (event.lengthComputable) {
        var complete = (event.loaded / event.total * 100 | 0);
        progress.value = progress.innerHTML = complete;
    }
}

xhr.send(formData); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T16:03:49.417

你试过jquery UI的进度条吗？

[jQuery进度条的主要内容](http://jqueryui.com/progressbar/)

# mysql - Drupal 视图按两个标准排序

> ID：13766537
> 
> 赞同：3
> 
> 时间：2012-12-07T15:56:40.637
> 
> 标签：mysql, drupal-7, subquery, drupal-views

我想更改我的视图查询以更改我的查询视图。

所以我想添加一个查询，如：

```
<select From (select from where) order by) order by > 
```

只需订购我的数据两次。

即使不使用，还有其他方法可以做我想做的事`hook_view_query_alter`吗？

我尝试了很多方法和模块（views_php、views_raw_sql、view_field_View），也尝试了存储过程，但不知道如何在 Drupal 视图中调用它

请问有什么想法或提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T13:57:34.217

您不需要嵌套`SELECT`子句来向查询添加另一个排序条件。以下语法将执行您想要的操作：

```
SELECT ...
FROM ...
ORDER BY date1, date2 
```

这将按 date1 然后按 date2 对结果进行排序。

在视图中，只需将另一个排序条件添加到您正在编辑的视图中，就这么简单。

# ios - 将存档保存到 Documents 文件夹

> ID：13766538
> 
> 赞同：1
> 
> 时间：2012-12-07T15:56:48.987
> 
> 标签：ios, xcode, download

这是我用于下载存档并将其保存到我的 Documents 文件夹的代码：

```
NSURLRequest *request = [[NSURLRequest alloc] initWithURL:[NSURL URLWithString:resource] cachePolicy:NSURLRequestReloadIgnoringLocalAndRemoteCacheData timeoutInterval:10];

NSData *receivedData;
NSURLResponse *requestResponse;
NSError *requestError;

int i = 3;

while (i)    //Try 3 times
{
    receivedData = [NSURLConnection sendSynchronousRequest:request returningResponse:&requestResponse error:&requestError];

    if (receivedData)
    {
        i = 0;
    }
    else i--;
}

if (!receivedData)
{
    NSLog(@"************************************************");
    NSLog(@"**  Error downloading data for resource : %@  **", resource);
    NSLog(@"************************************************");
}
else
{
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0]; //Get documents folder
    NSString *dataPath;
    dataPath = [documentsDirectory stringByAppendingPathComponent:LIST_FOLDER];
    NSError *documentError;

    if (![[NSFileManager defaultManager] fileExistsAtPath:dataPath])    //Create folder
    {
        [[NSFileManager defaultManager] createDirectoryAtPath:dataPath withIntermediateDirectories:YES attributes:nil error:&documentError];
    }

    NSLog(@"saveError = %@", documentError);   //Prints out null so no problem here

    NSError *writeError;

    [receivedData writeToFile:dataPath options:NSDataWritingAtomic error:&writeError];

    NSLog(@"write error = %@", writeError); 
```

最后一个 nslog 打印出以下内容并且不会保存存档：

```
Error Domain=NSCocoaErrorDomain Code=512 "The operation couldn’t be completed. (Cocoa error 512.)" "The operation couldn’t be completed. Is a directory"} 
```

Documents 目录中的子文件夹已创建，但它是空的。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T16:01:35.340

您正在尝试将数据写入文件夹。您需要将其写入文件夹中的文件。

`dataPath`是您创建的目录。您需要将文件名附加到该路径，然后将文件写入该完整路径（带有文件名）。

# java - java - 快速排序 - ArrayList - 不工作

> ID：13766552
> 
> 赞同：0
> 
> 时间：2012-12-07T15:57:30.873
> 
> 标签：java

我无法在此排序算法中找到错误。当我将一个数组传递给排序方法时，比如 5,6,4,7,1，我得到与结果相同的数组。我一直在浏览代码，但我找不到哪里出错了。忽略 SortThread 任务，它是一个会更新进度条的参数，但我现在没有使用它。

```
class QuickSort extends Sort {

@Override
ArrayList<Integer> sort(ArrayList<Integer> array, SortThread task) {

    if (array.size() <= 1) {
        return array;
    }

    int middle = (int) Math.ceil((double) array.size() / 2);
    int pivot = array.get(middle);

    ArrayList<Integer> less = new ArrayList<>();
    ArrayList<Integer> greater = new ArrayList<>();

    for (int i = 0; i < array.size(); i++) {
        if (array.get(i) <= pivot) {
            if (i == middle) {
                continue;
            }
            less.add(array.get(i));
        } else {
            greater.add(array.get(i));
        }
    }

    return concatenate(sort(less, task), pivot, sort(greater, task));
}

private ArrayList<Integer> concatenate(ArrayList<Integer> less, int pivot, ArrayList<Integer> greater) {

    ArrayList<Integer> list = new ArrayList<>();

    for (int i = 0; i < less.size(); i++) {
        list.add(less.get(i));
    }

    list.add(pivot);

    for (int i = 0; i < greater.size(); i++) {
        list.add(greater.get(i));
    }

    return list;
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T16:34:40.670

其他人认为您可能正在打印原件，因为您的代码工作正常。

你可以试试这个，它会在原地对其进行排序，从而减少意外行为并且稍微提高效率。我所做的只是`concatenate`采用一个新参数，它应该放置它的结果。

顺便说一句：我建议你`if (i == middle) { continue; }`在比较之前拔掉 to，这也会稍微更有效率。

```
static class QuickSort {

  public static ArrayList<Integer> sort(ArrayList<Integer> array) {

    if (array.size() <= 1) {
      return array;
    }

    int middle = (int) Math.ceil((double) array.size() / 2);
    int pivot = array.get(middle);

    ArrayList<Integer> less = new ArrayList<>();
    ArrayList<Integer> greater = new ArrayList<>();

    for (int i = 0; i < array.size(); i++) {
      if (array.get(i) <= pivot) {
        if (i == middle) {
          continue;
        }
        less.add(array.get(i));
      } else {
        greater.add(array.get(i));
      }
    }

    return concatenate(sort(less), pivot, sort(greater), array);
  }

  private static ArrayList<Integer> concatenate(ArrayList<Integer> less, int pivot, ArrayList<Integer> greater, ArrayList<Integer> list) {

    list.clear();

    for (int i = 0; i < less.size(); i++) {
      list.add(less.get(i));
    }

    list.add(pivot);

    for (int i = 0; i < greater.size(); i++) {
      list.add(greater.get(i));
    }

    return list;
  }
} 
```

您可以进一步改进连接：

```
 list.clear();
    list.addAll(less);
    list.add(pivot);
    list.addAll(greater); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T16:03:27.197

您没有进行任何实际排序。您只是将所有内容放入较小的列表中，然后将它们放回较大的列表中。你需要在那里进行一些比较。

看看你的连接方法。您只是将较少的列表放回较少的列表中。您需要将该值与枢轴进行比较以确定该值应该去哪里。

编辑：我最初的想法是错误的。我测试了你的代码并且它有效。

我猜你正在打印你传入的数组？请注意，您传递给排序函数的实际数组未排序。只有一个人回来了。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-07T16:03:40.760

array.get(i) 返回一个 Integer，您需要提取包装的 int，否则您正在比较指针。

# android - monodroid/xamarin 自定义属性为空，使用获取样式属性

> ID：13766555
> 
> 赞同：8
> 
> 时间：2012-12-07T15:57:53.513
> 
> 标签：android, attributes, xamarin.android, xamarin

尝试将自定义属性从父布局传递到子布局。

从ObtainStyledAttributes() 返回的TypedArray 似乎没有我创建的自定义属性的相应自定义值，尽管我可以将它们的ID 映射到Resource.designer 中的值。

* * *

属性.xml：

```
<resources>
<declare-styleable name="HeaderView">
    <attr name="bgcolor" format="color" />
    <attr name="testing" format="string" />
</declare-styleable> 
```

主要.xaml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:custom="http://schemas.android.com/apk/res">
    <LinearLayout
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
        <views.HeaderView
            android:id="@+id/hdrWatchList"
            android:layout_width="fill_parent"
            android:layout_height="20.0dp"
            custom:bgcolor="@color/blue"
            custom:testing="testing text buddy" /> 
```

查看类：

```
 public HeaderView (Context context, IAttributeSet attrs) :
        base (context, attrs)
    {
        int[] styleAttrs = Resource.Styleable.HeaderView;
        TypedArray a = context.ObtainStyledAttributes(attrs, styleAttrs);

        string  sid = a.GetString(Resource.Styleable.HeaderView_testing);
        int  id = a.GetColor(Resource.Styleable.HeaderView_bgcolor, 555);

        Log.Info( "testing", "resource sid : " + sid); // RETURNS ''
        Log.Info( "testing", "resource id : " + id); // RETURNS DEF 555 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-08T22:12:45.673

我认为问题在于您如何指定`xmlns:custom`命名空间。您需要在您已经拥有的字符串的末尾添加您的应用程序命名空间，如下所示：

```
xmlns:custom="http://schemas.android.com/apk/res/my.awesome.namespace" 
```

您还需要`AndroidManifest.xml`为您的 Android 项目定义一个定义相同的命名空间。

还有以下几行：

```
int[] styleAttrs = Resource.Styleable.HeaderView;
TypedArray a = context.ObtainStyledAttributes(attrs, styleAttrs); 
```

对我来说有点奇怪，我只想写：

```
var a = context.ObtainStyledAttributes(attrs, Resource.Styleable.HeaderView); 
```

特别是如果您以后不使用`styleAttrs`。

**编辑：**自 Android SDK rev 17 起，可以使用：

```
xmlns:custom="http://schemas.android.com/apk/res-auto" 
```

而不必编写整个命名空间。

# objective-c - 如何在 iPad 上更改 UIImagePickerController 的大小宽度？

> ID：13766558
> 
> 赞同：3
> 
> 时间：2012-12-07T15:57:55.883
> 
> 标签：objective-c, ios, ipad, uiimagepickercontroller, uipopovercontroller

如何更改`UIImagePickerController`on的尺寸宽度`iPad`？我可以改变高度，所以它是 700，但不能改变宽度，它仍然是 320。我的代码。

```
 UIImagePickerController*  imagePicker=[[UIImagePickerController alloc]init];
 imagePicker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
 imagePicker.delegate=self;
 CGRect myRect = CGRectMake(imagePicker.view.frame.origin.x, imagePicker.view.frame.origin.y, 720, 700);
 imagePicker.view.frame = myRect;
 self.popover = [[UIPopoverController alloc] initWithContentViewController:imagePicker];
 myRect = CGRectMake(100, 880, 900, 900);
 CGRect re2 = CGRectMake(0,0,800,800);
 [self.popover setPopoverContentSize:re2.size];
 [self.popover presentPopoverFromRect:[self.view bounds] inView:self.view permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
 [self.popover presentPopoverFromRect:myRect inView:self.view permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];      
 [self.popover setPopoverContentSize:re2.size]; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-28T19:01:02.113

我遇到了同样的问题，我用 UINavigationControllerDelegate 解决了，因为 PhotoLibrary 的 UIImagePickerView 内容是一个 navigatorController。当您选择一行时，它会更改 ViewController 并且弹出框的大小也会更改。因此，在您的 willShowViewController 委托中只需输入：

```
- (void)navigationController:(UINavigationController *)navigationController willShowViewController:(UIViewController *)viewController animated:(BOOL)animated {
    viewController.contentSizeForViewInPopover = CGSizeMake(800, 800);
} 
```

这将防止调整弹出框的大小。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T16:37:17.427

这个简化的代码对我来说很好用：

```
 UIImagePickerController*  imagePicker=[[UIImagePickerController alloc]init];
    imagePicker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
    self.popover = [[UIPopoverController alloc] initWithContentViewController:imagePicker];
    [self.popover presentPopoverFromRect:CGRectMake(100, 880, 1, 1) inView:self.view permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
    [self.popover setPopoverContentSize:CGSizeMake(700, 700)]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-17T22:27:39.970

*iOS 9 及更高版本。*

另一种方法是使用**ContainerViewController**并将 UImagePickerViewController 添加到 ContainerViewController。UINavigationControllerDelegate 方法中的覆盖大小有其限制。（不能下降到低于 600pt 的高度）

```
 _imagePicker                      = [[UIImagePickerController alloc] init];
    _imagePicker.delegate             = self;
    _imagePicker.sourceType           = UIImagePickerControllerSourceTypeCamera;
    _imagePicker.preferredContentSize = CGSizeMake(320, 480);

    UIViewController *containerViewController    = [[UIViewController alloc] init];
    containerViewController.preferredContentSize = _imagePicker.preferredContentSize;
    [containerViewController addChildViewController:_imagePicker];
    [containerViewController.view addSubview:_imagePicker.view];
    [_imagePicker didMoveToParentViewController:containerViewController];

    if (!_imagePickerPopover) {
        //customize PopoverController, use your own
        _imagePickerPopover = [[PopoverController alloc] init:cnt];
    } 
```

# c++ - C++: *((SomeType*) 0 )?

> ID：13766559
> 
> 赞同：2
> 
> 时间：2012-12-07T15:57:59.127
> 
> 标签：c++, pointers, initialization

我遇到过这种句法结构几次，我想知道：

1.  这是做什么的？
2.  设计推理可能是什么？

它往往看起来像这样：

```
struct SubType : public SomeSuperType {

    SubType(int somthing) : SuperType(something), m_foo(*((FooType *)0))
    {}

    private:
    FooType m_foo;
} 
```

需要明确的是，代码有效。但目的是什么？`m_foo`没有那条线会是什么状态？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T16:28:49.443

此构造的目的是`SomeType`在您正式需要一个对象但不想要或不能声明一个真实对象的情况下模拟一个假的未命名类型对象。它有其有效的用途，不一定会导致未定义的行为。

一个经典的例子是确定某个类成员的大小

```
sizeof (*(SomeClass *) 0).some_member 
```

或 decltype 的类似应用

```
decltype((*(SomeClass *) 0).some_member) 
```

上述示例都不会导致任何未定义的行为。在未评估的上下文中，like`*(SomeClass *) 0`是完全合法和有效的。

您还可以在语言标准本身中看到这种技术用于说明目的，如 8.3.5/12

> trailing-return-type 对于在 declarator-id 之前指定更复杂的类型最有用：
> 
> ```
> template <class T, class U> auto add(T t, U u) -> decltype(t + u); 
> ```
> 
> 而不是
> 
> ```
> template <class T, class U> decltype((*(T*)0) + (*(U*)0)) add(T t, U u); 
> ```

观察`(*(T*)0) + (*(U*)0)`下如何使用表达式对类型和之间`decltype`的二元运算符的结果类型进行编译时预测。`+``T``U`

当然，同样，这些技巧仅在用于非评估上下文时才有效，如上所示。

有时它被用作“空引用”的初始化器，如

```
SomeType &r = *(SomeType *) 0; 
```

但这实际上跨越了合法的边界并产生了未定义的行为。

您在特定示例中的内容是无效的，因为它试图在评估的上下文中访问无效的“空左值”。

PS 在 C 语言中，还有规范的特殊部分，即运算符`&`和`*`相互取消，这意味着它`&*(SomeType *) 0`是有效的并且保证评估为空指针。但它没有扩展到 C++。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-07T16:03:13.017

这是做什么的？未定义的行为。

设计推理可能是什么？导致未定义行为的愿望。没有其他理由。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T20:11:56.757

我认为这个例子不一定是UB。这取决于 的定义`FooType`。假设`Foo`是一个空类，它的构造函数做了一些事情：

```
class Foo {
  public:
    Foo() { std::cout << "Hey, world! A new Foo just arrived.\n"; }
    // I think the default copy and assign constructors do nothing
    // with an empty type, but just in case:
    Foo(const Foo&) {}
    Foo& operator=(const Foo&) { return *this; }
}; 
```

现在，假设我需要一个 Foo，无论出于何种原因，我不想触发构造函数。这样做不会导致任何实际的取消引用，因为*operator* 不会取消引用*并且复制构造函数不使用其引用参数：

```
Foo(*static_cast<Foo*>(0)); 
```

# objective-c - 在“DidEnterRigon”中执行一些代码

> ID：13766561
> 
> 赞同：0
> 
> 时间：2012-12-07T15:58:07.543
> 
> 标签：objective-c, xcode, xcode4.3, monitoring, region

我想在用户输入 rigon 时执行一些代码

首先：我想进入数据库并获取一些信息然后：我想显示警报。

可能吗 ？或者我不能在“后台”执行任何类型的代码？如果有其他方法可以这样做

谢谢你

# ruby - 编写黄瓜测试用例

> ID：13766563
> 
> 赞同：1
> 
> 时间：2012-12-07T15:58:16.677
> 
> 标签：ruby, testing, cucumber, automated-tests, frank

我正在尝试学习如何为 frank 编写测试脚本（黄瓜测试脚本）。

这是我写的

```
When I navigate to "aaa"
Then I should be on the aaa screen
Then I navigate to "bob"
Then I should be on the bob screen 

When /^I navigate to "(.*?)"$/ do |aaa|
  touch "view:'UITabBarButton' marked:'aaa'"
END

Then /^I should be on the aaa screen$/ do
  check_element_exists "view:'UIImageView' marked:'xxx'"
END

Then /^navigating to "(.*?)"$/ do |bbb|
  touch "view:'UITabBarButton' marked:'bbb'"
end

Then /^I SHould be on the bbb screen$/ do
   check_element_exists "view:'UIImageView' marked:'zzz'"
end 
```

写字母而不是视图/图片名称的位置

这是我在运行脚本时得到的

/Users/janogrodowczyk/SMHI/ios/ios/Frank/features/step_definitions/test_steps.rb:14：语法错误，意外$end，期待kEND（SyntaxError）

而且我不知道自前两行以来我做错了什么

```
When I navigate to "aaa"
Then I should be on the aaa screen 
```

只有在没有其余部分的情况下运行它们时，它们才能正常工作。

此致

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T17:51:45.530

`END`并且`end`是不同的红宝石关键字。

`END`表示要在程序结束之前执行的代码。

`end`指定类、方法、控制结构等的结束。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-09T18:14:24.487

导航到“aaa”和“bbb”实际上是两种情况。在一种情况下，您无法再次“导航”。

所以，首先重构你的步骤

```
When I navigate to "aaa"
Then I should be on the aaa screen
Then I navigate to "bob"
Then I should be on the bob screen 
```

至：

```
Given blah blah
When I navigate to "aaa"
Then I should be on the aaa screen

Given blah blah
When I navigate to "bbb"
Then I should be on the bbb screen 
```

可是等等。为什么要复制？`Scenario Outline" 可以帮助您测试类似的案例。

```
Scenario Outline: Visit UI
Given blah blah
When I navigate to <link>
Then I should see <screen_name> screen

Examples:
  | link | screen_name |
  | aaa  | aaa screen  |
  | bbb  | bbb screen  |
  | ccc  | ccc screen  | 
```

# sql - 查找查询返回的列数

> ID：13766564
> 
> 赞同：7
> 
> 时间：2012-12-07T15:58:18.410
> 
> 标签：sql, sql-server

如何使用 SQL Server 获取 SQL 查询返回的列数？

例如，如果我有如下查询：

```
SELECT  *
FROM    A1, A2 
```

它应该返回表 A1 中的总列数 + 表 A2 中的总列数。但查询可能更复杂。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T16:04:05.330

这是一种方法：

```
select top 0
into _MYLOCALTEMPTABLE
from (your query here) t

select count(*)
from Information_Schema.Columns c
where table_name = '_MYLOCALTEMPTABLE' 
```

您可以通过创建视图来做类似的事情。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-07T16:38:26.337

您没有指定您的 SQL Server 版本，但我假设它不是 2012 年。但是，这个问题的未来读者可能在 2012 年以上，所以我为他们发布了这个答案。

SQL Server 2012 提供了一组过程来提供更多关于查询和参数的元数据。在这种情况下，存储过程[sp_describe_first_result_set](http://msdn.microsoft.com/en-us/library/ff878602.aspx)将提供一个方便的表格形式。

还有一个 DMO 函数[sys.dm_exec_describe_first_result_set](http://msdn.microsoft.com/en-us/library/ff878258.aspx)，可提供您希望在示例中使用的类似内容

```
DECLARE
    -- Your query goes here
    @query nvarchar(4000) = N'SELECT * FROM mdm.tblStgBatch AS TSB';

-- Tabular results
EXECUTE sys.sp_describe_first_result_set @tsql = @query;

-- Simple column count
SELECT
    COUNT(1) AS column_count
FROM
    sys.dm_exec_describe_first_result_set(@query, NULL, 0); 
```

新的元数据发现选项正在取代[FMTONLY](http://msdn.microsoft.com/en-us/library/ms173839%28v=sql.90%29.aspx)，这是在 2012 年之前解决这个问题的方法。我的 TSQL 印章显然不够强大，无法用它做任何有用的事情，相反，我不得不求助于 .NET 语言才能工作FMTONLY 的输出。

```
SET FMTONLY ON;
SELECT  *
FROM    A1, A2;
SET FMTONLY OFF; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-07T16:16:32.217

试试这个;

```
--Insert into a temp table (this could be any query)
SELECT * 
INTO #temp
FROM [yourTable]

--Select from temp table
SELECT * FROM #temp

--List of columns
SELECT COUNT(name) NumOfColumns FROM tempdb.sys.columns WHERE object_id =
object_id('tempdb..#temp');

--drop temp table
DROP TABLE #temp 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-07T16:03:18.517

丑我知道：

```
SELECT COUNT(*) +
(
    SELECT COUNT(*)
    FROM information_schema.columns
    WHERE table_name = 'A1'
)
FROM information_schema.columns
WHERE table_name = 'A2' 
```

# python - Python：作为命名元组对象的 Lambda 函数？

> ID：13766565
> 
> 赞同：4
> 
> 时间：2012-12-07T15:58:17.113
> 
> 标签：python, lambda, namedtuple

我编写了一个程序，其中我有一个相当典型的课程。在这个类中，我创建了多个 namedtuple 对象。namedtuple 对象包含许多项目，它们都工作正常，除了我尝试绑定到它的 lambda 函数。下面是一个精简的示例和我收到的错误消息。希望有人知道为什么会出错。提前致谢！

**文件：test.py**

```
from equations import *
from collections import namedtuple

class Test:
    def __init__(self, nr):
        self.obj = self.create(nr)
        print self.obj.name
        print self.obj.f1(2)

    def create(self, nr):
        obj = namedtuple("struct", "name f1 f2")
        obj.name = str(nr)  
        (obj.f1, obj.f2) = get_func(nr)
        return obj

test = Test(1) 
```

**文件：方程.py**

```
def get_func(nr):
    return (lambda x: test1(x), lambda x: test2(x))

def test1(x):
    return (x/1)

def test2(x):
    return (x/2) 
```

**错误：**

```
Traceback (most recent call last):
File "test.py", line 17, in <module>
    test = Test(1)
  File "test.py", line 8, in __init__
    print self.obj.f1(2)
TypeError: unbound method <lambda>() must be called with struct instance as first argument (got int instance instead)` 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T16:01:05.057

构造`namedtuple()`函数返回一个*类*，而不是实例本身。您正在向该类添加*方法。*因此，您的 lambda 必须接受一个`self`参数。

在任何情况下，您都应该创建您创建的命名元组类的实例。如果您不想为您的 lambdas 提供`self`第一个参数，则将它们添加到您随后创建的实例中可以正常工作：

```
from equations import *
from collections import namedtuple

Struct = namedtuple("struct", "name f1 f2")

class Test:
    def __init__(self, nr):
        self.obj = self.create(nr)
        print self.obj.name
        print self.obj.f1(2)

    def create(self, nr):
        obj = Struct(str(nr), *get_func(nr))
        return obj

test = Test(1) 
```

# javascript - 当另一个字段值发生更改时，如何使用 jQuery 更改字段

> ID：13766568
> 
> 赞同：1
> 
> 时间：2012-12-07T15:58:24.477
> 
> 标签：javascript, jquery, html, forms

我进行了搜索，甚至使用了[JQuery: Change value when value of other input field is changed 之](https://stackoverflow.com/questions/12287996/jquery-change-value-when-value-of-other-input-field-is-changed)类的答案，我一直无法弄清楚这一点。

我正在尝试根据 HTML 表单输入进行一些数学运算。当用户在第一个和第二个字段中输入数字时，我希望它自动计算到第三个字段以显示总数。

我的表单代码是：

```
<div id="makingARecurringGift">
    Enter Recurring Gift Amount: $<input type="number" min="0" name="recurringDonationValue" id="recurringDonationValue" size="15" value="0" /><br />
    I would like to make this gift for <input type="number" min="0" max="60" name="numberOfMonths" id="numberOfMonths" size="15" value="0" /> months.<br />
    Total Gift Amount of $<input type="number" min="0" value="0" name="totalRecurringDonationValue" />.
</div> 
```

我试图运行的 javascript 是：

```
function replaceRecurringDonationValue() {
    //make our variables so we don't forget
    var perDonationValue = 0;
    var numberOfMonths = 0;
    var TotalRecurringDonationValue = 0;

    //give them their correct values
    perDonationValue = $("#recurringDonationValue").val();
    numberOfMonths = $("#numberOfMonths").val();

    //ensure that the maximum number of months is enforced.
    if(numberOfMonths > 60) {
        alert("Donations can last for a maximum of 60 months.");
        $("#numberOfMonths").val(60);
    }

    TotalRecurringDonationValue = perDonationValue * numberOfMonths;

    $("#TotalRecurringDonationValue").val(TotalRecurringDonationValue);
}
$("#recurringDonationValue").change(replaceRecurringDonationValue());
$("#numberOfMonths").change(replaceRecurringDonationValue()); 
```

如果您想查看完整的主页源代码： http: [//pastebin.com/aLMqYuxc](http://pastebin.com/aLMqYuxc) 和完整的 javascript 源代码是： http: [//pastebin.com/FvviPHhj](http://pastebin.com/FvviPHhj)

对不起，如果这是一个愚蠢的问题，谢谢大家的帮助。我仍在努力解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T16:06:32.300

尝试改变这个：

```
$("#recurringDonationValue").change(replaceRecurringDonationValue()); 
```

对此：

```
 $("#recurringDonationValue").change(function(){
                                          replaceRecurringDonationValue();
                                       }); 
```

还有这个：

```
$("#numberOfMonths").change(replaceRecurringDonationValue()); 
```

对此：

```
$("#numberOfMonths").change(function(){
                               replaceRecurringDonationValue()
                               }); 
```

安德斯的好声音，

更好地结合两个选择器，例如

```
 $("#recurringDonationValue, #numberOfMonths").change(function(){
                                              replaceRecurringDonationValue();
                                           }); 
```

更少的代码保持干燥（不要重复自己）:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T16:09:11.833

三件事...

改变这个：

```
Total Gift Amount of $<input type="number" min="0" value="0" name="totalRecurringDonationValue" />. 
```

对此：

```
Total Gift Amount of $<input type="number" min="0" value="0" id="totalRecurringDonationValue" />. 
```

改变这个：

```
$("#TotalRecurringDonationValue").val(TotalRecurringDonationValue); 
```

对此：

```
$("#totalRecurringDonationValue").val(TotalRecurringDonationValue); 
```

最后，改变这个：

```
$("#recurringDonationValue").change(replaceRecurringDonationValue());
$("#numberOfMonths").change(replaceRecurringDonationValue()); 
```

对此：

```
$("#recurringDonationValue,#numberOfMonths").change(replaceRecurringDonationValue); 
```

# c++ - QLineEdit：如果用鼠标悬停，则将超长文本显示为工具提示

> ID：13766572
> 
> 赞同：4
> 
> 时间：2012-12-07T15:58:29.547
> 
> 标签：c++, qt, tooltip, qlineedit

在 Windows 下，我看到了一个不错的功能：如果我将鼠标悬停在一个短文本字段上，其中包含不完全适合该字段的过长文本，则会打开一个工具提示，显示文本字段的完整内容。

有人可以指出我使用 QLineEdit 执行此操作的代码片段吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T16:16:45.580

我会创建一个从 QLineEdit 派生的自定义类，如下所示：

```
#ifndef LINEEDIT_H
#define LINEEDIT_H

#include <QtGui>

class LineEdit : public QLineEdit
{
    Q_OBJECT

public:
    LineEdit();

public slots:
    void changeTooltip(QString);
};

LineEdit::LineEdit()
{
    connect(this, SIGNAL(textChanged(QString)), this, SLOT(changeTooltip(QString)));
}

void LineEdit::changeTooltip(QString tip)
{
    QFont font = this->font();
    QFontMetrics metrics(font);
    int width = this->width();

    if(metrics.width(tip) > width)
    {
        this->setToolTip(tip);
    }
    else
    {
        this->setToolTip("");
    }
}

#include "moc_LineEdit.cpp"

#endif // LINEEDIT_H 
```

然后只需将其添加到任何内容：

```
#include <QtGui>
#include "LineEdit.h"

int main(int argc, char *argv[])
{
    QApplication app(argc, argv);

    LineEdit edit;

    edit.show();

    return app.exec();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T16:44:23.553

这里是上面评论中提到的改进功能。

```
void LineEdit::changeTooltip(QString tip)
{
  QFont font = this->font();
  QFontMetrics metrics(font);

  // get the (sum of the) left and right borders;
  // note that Qt doesn't have methods
  // to access those margin values directly

  int lineMinWidth = minimumSizeHint().width();
  int charMaxWidth = metrics.maxWidth();
  int border = lineMinWidth - charMaxWidth;

  int lineWidth = this->width();
  int textWidth = metrics.width(tip);

  if (textWidth > lineWidth - border)
    this->setToolTip(tip);
  else
    this->setToolTip("");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T16:13:03.197

您可以尝试在每次更改文本时更改工具提示：

首先，定义一个私有插槽来响应来自 QLineEdit 的 textChanged() 信号：（在您的 QTextEdit 所属类的头文件中）

```
....
private slots:
   void onTextChanged();
.... 
```

然后，在 cpp 文件中，将 QLineEdit textChanged() 信号连接到您定义的插槽，并实现文本更改时的行为：

```
// In constructor, or wherever you want to start tracking changes in the QLineEdit
connect(myLineEdit, SIGNAL(textChanged()), this, SLOT(onTextChanged())); 
```

最后，这是插槽的样子：

```
void MainWindow::onTextChanged() {
    myLineEdit->setTooltip(myLineEdit->text());
} 
```

我假设一个名为 MainWindow 的类包含 QLineEdit。

# c++ - 一般获取所有对象的属性 C++

> ID：13766573
> 
> 赞同：1
> 
> 时间：2012-12-07T15:58:40.330
> 
> 标签：c++, c++11

有没有办法以编程方式获取对象的所有属性而不必特定于类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T16:11:37.823

是的..一开始你可以解析一个c++文件；）..看看clang..

取决于您要实现的目标-如果您正在谈论它的反射-不，它不是该语言的功能。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-07T16:03:27.847

不，没有办法做到这一点，但在大多数情况下永远不需要这样做。

# java - 在Java中，我如何找到自上次鼠标移动以来的时间？

> ID：13766579
> 
> 赞同：0
> 
> 时间：2012-12-07T15:59:03.920
> 
> 标签：java, swing, awt, mouseevent, mousemotionevent

例如，如果我在 JFrame 中绘制了一个圆圈，并且如果我将鼠标悬停在它上面三秒钟，我想在它上面绘画。

我有一个 MouseMotionListener，它告诉我光标在 JFrame 中的位置，但到目前为止就是这样。

```
public void mouseMoved(MouseEvent e)
{
  PointerInfo a = MouseInfo.getPointerInfo();
  cursorPos = a.getLocation();
  SwingUtilities.convertPointFromScreen(cursorPos, e.getComponent());
} 
```

我对动作监听器还是很陌生。如果我想测试鼠标是否*不*动，我应该添加什么？

另外，我只是好奇，为什么MouseEvent 中的[MOUSE_MOVED](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/event/MouseEvent.html#MOUSE_MOVED)被认为是一个 int？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T18:08:43.073

回顾你的问题。

> 为什么 MouseEvent 中的 MOUSE_MOVED 被认为是一个 int？

所有鼠标常量都是整数。这就是Java 1.5 之前的枚举方式。

> 如何找到自鼠标上次移动以来的时间？

在您的 mouseMoved 方法中，您将当前时间保存在 GUI 模型的某个位置。然后，您在 GUI 模型中编写一个返回空闲时间的方法。

```
idleTime = System.currentTimeMillis() - savedTimeinMillis. 
```

您将空闲时间除以 1000 秒。

# jquery - 显示下一个按钮，然后在到达底部时显示上一个按钮并再次在顶部更改

> ID：13766587
> 
> 赞同：1
> 
> 时间：2012-12-07T15:59:46.760
> 
> 标签：jquery, scroll, fadein, fadeout, scrollto

场景：我有一系列 float: none; div，需要用户向下滚动才能看到它们。我使用 Prev (up) 和 Next (down) 做了一些控制。所以基本上单击下一步会将第一个 div 滚动到页面顶部，再次单击它，下一个 div 会向上滚动。这一切都很好（仅供参考：使用[ScrollTo Plugin](http://flesler.blogspot.co.uk/2007/10/jqueryscrollto.html)）但我不能在我的生活中获得控制来执行以下操作：

问题：在顶部显示下一个（向下）按钮，直到您到达页面底部，然后淡出和淡入上一个（向上）按钮，一旦您回到顶部，淡出上一个（向上）按钮和淡入下一个（向下）按钮：

这就是我所拥有的，它几乎可以工作，但有些疯狂。

提前致谢。

```
$(window).scroll(function() {
    if ($(window).scrollTop() + $(window).height() == $(document).height()) {
        $(".next").fadeOut(100, function() {
            $(".prev").fadeIn(100);
        });

    } else {
        $(window).scroll(function(){
                if($(window).scrollTop()) {
                    $(".next").fadeOut(100, function() {
                        $(".prev").fadeIn(100);
                        });
                        }
        });
    }
}); 
```

# osgi - bndtools 激活包

> ID：13766588
> 
> 赞同：1
> 
> 时间：2012-12-07T15:59:48.443
> 
> 标签：osgi, bnd, bndtools

如何在 bndtools 中使用 Activator 创建一个简单的捆绑包？它一直在说：

```
The JAR is empty: The instructions for the JAR named com.myproj did not cause any content to be included, this is likely wrong  bnd.bnd /com.myproj Unknown Bndtools Problem Marker
Unused Private-Package instructions, no such package(s) on the class path: [com.myproj] bnd.bnd /com.myproj Unknown Bndtools Problem Marker 
```

我在 Eclipse 中创建这个项目的方式是：

1.  创建新的“Bndtools OSGi 项目”
2.  右键单击，配置 - 转换为 Maven 项目
3.  `Activator.java`在包中创建`com.myproj`。
4.  添加`com.myproj`到私人包
5.  将激活器设置为`com.Activator`

这是我的 bnd 文件：

```
Bundle-Activator: com.myproj.Activator
Private-Package: com.myproj 
```

我生成的 jar 是空的。有小费吗？

PS：这是我的 Eclipse 项目（导出为 zip 存档），以防它对事物有所启发：[https ://dl.dropbox.com/u/9162958/scraper.zip](https://dl.dropbox.com/u/9162958/scraper.zip)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T09:54:48.447

我的猜测是“转换为 Maven 项目”是个麻烦。这可能已将项目的 Eclipse 类路径从 bnd 默认 bin 文件夹更改为“target/classes”。您能否确认它可以在不转换为 Maven 的情况下工作？

bnd 可以与其他地方的 bin 文件夹一起使用，您必须设置`${bin}`属性（最好在 中`cnf/build.bnd`）。有一些关于如何在 maven 中使用 bndtools 的文章。bnd 在这里不遵循 Eclipse 设置的原因是它们在没有 Eclipse 的情况下不可用，并且 bnd 的设计目标是它可以在任何地方构建：因此 bnd 文件必须是信息的最终仲裁者。

无论如何，还有一个提示......激活器不是构建 OSGi 构建的正确方法，因为它们是一个邪恶的单例。声明式服务要优越得多，我们在设计 OSGi 时实际上应该使用类似的机制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-13T10:57:46.137

## 我的设置：

*   Eclipse Luna 4.4.0 (20140612-0600)
*   Bndtools 2.3.0.REL-20140510-023245

## 这是我如何使它工作的：

1.  我下载了你导出`scraper.zip`的。
2.  在 Eclipse 中创建并**清空工作区。**
3.  将您的项目从 ZIP 存档导入到空工作区。
4.  默认`cnf`项目是自动创建的。
5.  默认情况下，`bnd`配置为使用`bin`编译`*.class`文件的目录，而您的 Eclipse 项目配置为使用`target/classes`. `cnf/build.bnd`因此，我必须通过添加一行来更改此设置：

```
########################
## BND BUILD SETTINGS ##
########################
bin: target/classes 
```

6.  现在，在清理和重建项目之后，`bnd`创建`generated/scraper.jar`包含您的`Activator.class`.

## 笔记：

*   您也可以调整您的项目配置以使用`bin`目录而不是，`target/classes`但我假设您稍后将使用 Maven。
*   使用`bndtools`时，当您从一个空的工作区开始并逐个导入项目时，它有时会有所帮助。
*   如果每个项目有多个源目录，bndtools 2.4 中有一个错误会导致一些问题。因此，我仍在使用 2.3 版

# c# - 处理占用相同区域的不同面板的最佳方法

> ID：13766589
> 
> 赞同：2
> 
> 时间：2012-12-07T15:59:51.780
> 
> 标签：c#, winforms

我有这个应用程序：![我的应用程序](../Images/b9d4bb3843be2591d484bd854aa704b2.png)

当用户单击其中一个 navBarItems（如 Microsoft OUTLOOK）时，我想更改标记区域。我一直在做一些研究，很多人说我可以添加几个面板并在用户单击 navBarItem 时显示/隐藏它们。但是该区域将包含很多网格视图和很多其他控件。我不知道我是否想在应用程序启动时初始化所有这些，因为在 CPU 和内存上保持所有控件同时运行会很困难。而且我认为这不是这种情况的优雅解决方案。但是，如果我选择在用户单击相应的 navBarItem 时初始化控件，那么对用户来说会很迟钝。

这种情况下最好的设计方法是什么？

PS：我也可以使用商业图书馆。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T16:56:12.200

不一定要滞后。如果您先显示屏幕，然后在后台填充数据，则对用户来说可能不会太糟糕。此外，一旦特定屏幕被初始化，您可能会将其保存在内存中，以便用户随后导航到它会更快。

此外，查看您正在加载到每个控件中的数据。有些数据是一样的吗？您可以在后台预加载一些数据并保留它吗？

你有很多下拉列表吗？如果是这样，您是否可以预先填充或缓存一些下拉列表数据以提高性能？

大部分时间会使用一两个面板吗？如果是这样，您可以预加载这些面板，以便用户对他们最常导航到的面板有更好的体验。

加载数据的后台处理将使您的代码更加复杂，但这将是从您的应用程序中获得良好响应时间的最佳方式。

[下面](http://www.dreamincode.net/forums/topic/231635-how-can-i-use-a-backgroundworker-in-my-winforms-application/page__st__15)是一个使用 Task 从 UI 运行后台线程的示例。

另一个[使用](http://fernandof.wordpress.com/2007/04/04/implementing-multi-threading-in-winforms-using-the-backgroundworker-class/)BackgroundWorker。

# asp.net-mvc - ASP.NET MVC 3 Web API - 使用令牌保护

> ID：13766590
> 
> 赞同：0
> 
> 时间：2012-12-07T15:59:58.007
> 
> 标签：asp.net-mvc, asp.net-mvc-3, oauth

我试图找到为许多 ASP.NET MVC 操作实现基于令牌的身份验证的最简单方法。

Api 控制器位于 Web 应用程序旁边，因此我需要能够指定哪些操作/控制器受 Api 身份验证。

我已经有一个用于表单身份验证的成员资格提供程序，所以我想重用它来验证用户并构建返回的令牌。

我已经阅读了几篇关于实现 OAuth 的文章，但大多数看起来都非常复杂。我见过几个使用 API 密钥的示例，但我想请求一个令牌，然后将其作为参数传回，而不必作为 HTTP 标头中的值。

基本上流程需要是：

1.  用户通过传入用户名和密码的身份验证操作请求令牌。
2.  服务返回 enc 令牌
3.  用户将 enc 令牌作为参数传递给 auth

完成此操作的典型方式是什么，客户端（例如 ajax 调用）是否需要计算用户名的哈希值/传入 1）？还是纯文本可以通过 TLS/SSL？

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T18:53:05.400

你对你所描述的内容有什么担心？

你描述的过程似乎是可行的。通常，系统会在令牌的有效期内过期，之后他们需要获取新的令牌。不过，到期有很多变化（固定时间、滑动时间等）。

对于您关于用户名/密码的问题，客户端不应该对它们进行哈希处理。只需确保它们是通过安全方法 (SSL) 传输的。

# java - Android 8 或更高版本：检查 Google Play 服务

> ID：13766592
> 
> 赞同：9
> 
> 时间：2012-12-07T16:00:08.163
> 
> 标签：java, android, eclipse, google-maps, google-play

此方法一直返回 0。根据开发人员文档，如果设备获得了最新版本的 google play，则此方法应返回类似 SUCCES 的内容。有人知道如何使用这个吗？

```
@Override
    public void onResume() {
        super.onResume();

        GooglePlayServicesUtil.isGooglePlayServicesAvailable(getApplicationContext());
        System.out.println("henkie: " + GooglePlayServicesUtil.isGooglePlayServicesAvailable(getApplicationContext()));
    } 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-12-07T16:03:56.463

它正在回归`SUCCESS`。[文档](http://developer.android.com/reference/com/google/android/gms/common/GooglePlayServicesUtil.html#isGooglePlayServicesAvailable%28android.content.Context%29)清楚地指出该方法有一个 int 返回类型，并返回一个

> 指示是否有错误的状态码。ConnectionResult 中可以是以下之一：SUCCESS、SERVICE_MISSING、SERVICE_VERSION_UPDATE_REQUIRED、SERVICE_DISABLED、SERVICE_INVALID。

要检查返回的内容，请使用以下内容：

```
int status = GooglePlayServicesUtil.isGooglePlayServicesAvailable(getApplicationContext());
if(status == ConnectionResult.SUCCESS) {
    //Success! Do what you want
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-07T16:02:36.490

请阅读文档：`0`是`SUCCESS`

```
public static final int SUCCESS
The connection was successful.
Constant Value: 0 (0x00000000) 
```

[文档](https://developer.android.com/reference/com/google/android/gms/common/ConnectionResult.html#SUCCESS)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-07T16:05:58.407

简单地

```
int statusCode = GooglePlayServicesUtil.isGooglePlayServicesAvailable(getApplicationContext());
if (statusCode == ConnectionResult.SUCCESS) {
    //OK
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-10-31T13:39:35.900

```
int state = GooglePlayServicesUtil.isGooglePlayServicesAvailable(this);

        if (state == ConnectionResult.SUCCESS) {
            Toast.makeText(this, "SUCCESS", Toast.LENGTH_LONG).show();
            //goAhead();
        } else {
            Dialog dialog = GooglePlayServicesUtil.getErrorDialog(state, this, -1);
            dialog.show();
        } 
```

# iphone - 应用程序加载器噩梦

> ID：13766593
> 
> 赞同：1
> 
> 时间：2012-12-07T16:00:08.833
> 
> 标签：iphone, ios, ipad, in-app

我应该将什么样的文件拖到 Application Loader 上的这个窗口中？

ZIP 文件被接受，但如果您尝试上传会出错。文档说它必须是一个 .pkg 文件，但 Xcode 只生成 .xacrchive 不能拖到这里，苹果没有解释如何生成这个 pkg。

所以？……

![在此处输入图像描述](../Images/36858e503452a60402b4811bedd5d778.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T17:46:30.323

您需要分发存档。这里有一个类似的问题：[什么是 Application Loader 中的托管内容包？](https://stackoverflow.com/questions/12598429/what-is-hosted-content-package-in-the-application-loader)

# c# - 网络管理软件——它真正需要什么？

> ID：13766595
> 
> 赞同：0
> 
> 时间：2012-12-07T16:00:16.027
> 
> 标签：c#

我的任务是构建一个网络管理软件来管理学校网络......

我们之前构建了一个，它具有服务器 Ping'ing 和与 WMI 的 RAM 集成等内容

我们还真的想管理我们的 PC（大约 500 台左右）以及我们的移动设备，所以它需要与 AD 集成，目前它做得很好。

您认为此类软件还需要哪些其他功能？就像交换机和 AP 是否需要 SNMP（简单网络管理协议）一样？

（它是用 C# 构建的，所以这些东西需要可用于 .NET，否则我将不得不使用 P/Invoke 等）

干杯理查德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T16:02:47.227

SNMP 非常关键。它将允许您发现设备（通过 SNMP 查询 arp 缓存以发现设备并使用标准信息来确定它们是什么）。几乎所有连接到网络的东西都会以某种方式支持 SNMP。

大多数设备还将通过其 SNMP 企业 MIB 支持特定于它们的信息。例如，打印机将报告托盘、墨水量等。

如果您具有 SNMP 查询功能，我怀疑您最终会得到大量可以在闲暇时收集和显示的指标。

最后，你需要建立这个吗？存在很多[免费的解决方案](http://www.techrepublic.com/blog/five-apps/five-free-network-monitoring-tools/1342)，我研究过的解决方案可以通过插件、用户脚本等进行扩展。

# python - 在函数中导入扭曲的模块而不是在开头

> ID：13766602
> 
> 赞同：0
> 
> 时间：2012-12-07T16:00:34.480
> 
> 标签：python, twisted

我正在阅读很棒的 python 扭曲教程[http://krondo.com/?page_id=1327](http://krondo.com/?page_id=1327)有点混乱，在许多示例中，在 python 文件中而不是在开始时多次导入扭曲的反应器或其他模块。因为在 python 方式中，我们在文件开头使用导入模块。任何人都可以详细说明。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T16:58:33.943

一般来说，您是正确的——在 Python 中，与大多数语言一样，模块中的相关导入语句应该位于模块的开头，在那里很容易找到它们。在大多数情况下，这是可取的，所以这就是它的教学方式。

但像大多数规则一样，也有例外。Python 允许在函数和类定义中以及在模块级别使用 import 语句。将导入放在函数中的一个很好的理由是，某些导入实际上可能是相当昂贵且耗时的操作。

在 Twisted's 的案例中，`from twisted.internet import reactor`幕后有很多额外的工作和魔法。因此，将导入*推迟*到实际需要时更有意义——最好是在一个只会被调用一次（或在极少数情况下）的函数中。Twisted 特有的另一个原因（前面提到的“魔术”）是导入的行为`reactor`会创建该对象的单例实例，而其他代码可能会影响反应器实例的创建方式。所以我们推迟导入反应器，直到任何其他设置代码有机会执行。

有时需要使用这些内联导入的最后一个原因是循环导入的问题。除非您询问，否则我不会在这里详细介绍，但我认为您可以在此站点上找到有关该问题的其他讨论。

# sql - 我对 PostgreSQL 上的 SQL 指令有疑问

> ID：13766604
> 
> 赞同：0
> 
> 时间：2012-12-07T16:00:40.533
> 
> 标签：sql, postgresql-9.1, pgadmin

我在 PostgreSQL 上有以下说明：

```
CREATE TABLE ACTOR(
    ACT_CUIL            NUMERIC(8,0) NOT NULL,
    ACT_NOMBRE      CHARACTER VARYING(25) NOT NULL,
    ACT_APELLIDOPAT     CHARACTER VARYING(25) NOT NULL,
    ACT_APELLIDOMAT     CHARACTER VARYING(25) NOT NULL,
    ACT_NOMARTCO            CHARACTER VARYING(25) NULL,
    ACT_ROL         CHARACTER VARYING(25) NOT NULL,
    PRIMARY KEY             (ACT_CUIL),
    FOREIGN KEY            (ID_ELEN)  REFERENCES ELENCO(ID_ELEN)

); 
```

来自 ACTOR 的主键被创建；但 pgAdmin 编译器告诉我：

```
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "actor_pkey" for table "actor"
ERROR:  column "id_elen" referenced in foreign key constraint does not exist

********** Error **********

ERROR: column "id_elen" referenced in foreign key constraint does not exist
SQL state: 42703 
```

关于这个我不知道是什么问题。[我在http://www.postgresql.org/docs/8.1/static/ddl-constraints.html](http://www.postgresql.org/docs/8.1/static/ddl-constraints.html)使用官方文档

感谢和问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T16:03:51.707

这意味着 id_elen 列在 ELENCO 表中不存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T16:04:11.183

似乎有一个表“elenco”，至少有一个字段 - id_elen。这个表存在吗？

否则不允许对外关系。

# sql - 一个月的天数

> ID：13766611
> 
> 赞同：10
> 
> 时间：2012-12-07T16:01:07.697
> 
> 标签：sql, oracle, plsql, date-arithmetic

我有一个每月的金额，我需要平均分配给该月的天数。数据如下所示：

```
Month       Value
----------- ---------------
01-Jan-2012 100000
01-Feb-2012 121002
01-Mar-2012 123123
01-Apr-2012 118239 
```

我必须将 1 月的金额分摊到 31 天，2 月的金额分摊到 29 天，3 月的金额分摊到 31 天。

如何使用 PL/SQL 找出月份列中给出的月份有多少天？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-07T16:08:14.593

```
SELECT CAST(to_char(LAST_DAY(date_column),'dd') AS INT)
  FROM table1 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-10-27T11:34:19.117

使用日期进行算术运算时不要使用`to_char()`and stuff。字符串是字符串，日期是日期。请尊重数据类型并改用它：

`1+trunc(last_day(date_column))-trunc(date_column,'MM')`

的确，这是正确的。它计算当月最后一天的*值与第一天的**值*之间的差值（显然总是 1，因此我们需要再次添加这个 1）。

 *You must not forget to use the `trunc()` function if your date columns contains time, because `last_day()` preserves the time component.

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-12-07T22:39:28.757

```
SELECT EXTRACT(DAY FROM LAST_DAY(SYSDATE)) num_of_days FROM dual;
/
SELECT SYSDATE, TO_CHAR(LAST_DAY(SYSDATE), 'DD') num_of_days FROM dual
/
-- Days left in a month --
SELECT SYSDATE, LAST_DAY(SYSDATE) "Last", LAST_DAY(SYSDATE) - SYSDATE "Days left"
FROM DUAL
/ 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-12-07T16:03:26.307

您可以添加一个月并减去两个日期

```
SQL> ed
Wrote file afiedt.buf

  1  with x as (
  2      select date '2012-01-01' dt from dual union all
  3      select date '2012-02-01' from dual union all
  4      select date '2012-03-01' from dual union all
  5      select date '2012-01-31' from dual
  6    )
  7    select dt, add_months(trunc(dt,'MM'),1) - trunc(dt,'MM')
  8*     from x
SQL> /

DT        ADD_MONTHS(TRUNC(DT,'MM'),1)-TRUNC(DT,'MM')
--------- -------------------------------------------
01-JAN-12                                          31
01-FEB-12                                          29
01-MAR-12                                          31
31-JAN-12                                          31 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-07T16:08:29.693

```
select add_months(my_date, 1)-my_date from dual; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-09T09:59:51.337

```
SELECT TO_CHAR(LAST_DAY(SYSDATE), 'fmday-mon-rr dd') as LastDayOfMonth
FROM dual; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-10-11T11:54:40.497

Use the following Oracle query:

```
select to_number(to_char(last_day(sysdate),'dd')) TotalDays from dual

Date_Parameter='01-Oct-2017'
select to_number(to_char(last_day('Date_Parameter'),'dd')) TotalDays from dual 
```*

# android - 使用建议的目录结构在 Eclipse 中为 Android 创建 JUnit 测试

> ID：13766617
> 
> 赞同：0
> 
> 时间：2012-12-07T16:01:31.480
> 
> 标签：android, eclipse, junit

如果您阅读：http: [//developer.android.com/tools/testing/testing_android.html#TestProjectPaths](http://developer.android.com/tools/testing/testing_android.html#TestProjectPaths)

它会告诉您在项目中创建与 src 相同级别的测试。它没有告诉你的是如何去做。

我在这里查看了一篇关于此的帖子（http://stackoverflow.com/questions/5395216/creating-an-android-junit-test-project-in-eclipse），发现它似乎不再适用于较新的版本Eclipse（例如 Indigo）。

那么，如何按照他们的建议设置项目，以便测试目录位于原始项目中？

请注意，如果您按照链接的建议进行操作并取消选中使用默认位置，那么 Eclipse 将阻止您继续前进，因为它会抱怨您与现有项目的位置重叠。如果您尝试手动添加子目录来放置项目，那么您可以继续，但稍后您会收到一条错误消息，提示“刷新工作区时发生内部错误”并且没有创建测试项目。

当然没有办法做到这一点，或者我是否应该忽略建议的包结构并遵循 Eclipse 似乎想要做的事情？

# c# - 条件运算符 vs if then else

> ID：13766619
> 
> 赞同：-5
> 
> 时间：2012-12-07T16:01:39.753
> 
> 标签：c#, java, c++, c, conditional

如果我想实现一些可以以两种方式实现的条件代码。那么哪种方式更好的条件运算符 ?: 或 if..then..else??

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T16:06:58.320

这取决于。通常，您希望在代码结构中表示主要的活动流程。如果算法的关键点是变量`x`被初始化，那么最好的解决方案就是使用条件运算符：

```
x = condition ? f1() : f2(); 
```

如果决定是了解正在发生的事情的关键问题，那么您会更喜欢`if`. 在实践中，这意味着当两者都合理可行时，您将使用`?:`. 关键是“合理”——如果你发现你在子表达式中使用逗号运算符，子表达式有副作用，那么使用`?:`可能不是“合理”。

## 编辑：

当您使用`?:`运算符时，除了最简单的情况外，您应该完全按照您的方式格式化它`if`，例如：

```
x = condition
    ? complex_expression_1
    : complex_expression_2; 
```

我经常这样做。（有一个特殊情况，我会推送它：如果我可以将整个函数缩减为单个 return 语句。我仍然不会允许逗号运算符的副作用，但有时我会使用比其他方式更复杂的表达式将。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T16:06:05.437

**如果不完全相同，**它们非常接近。即使**字节码存在细微差别**。您始终可以进行性能测试以确定。

检查字节码检查`javap and jad`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T16:07:29.097

它取决于编译器，但在现代编译器中，if else 和三元运算符之间没有区别。不要相信“如果我使用条件运算符，编译器总是会生成更高效的代码”。

# javascript - Mongoose findByIdAndUpdate 失败且没有错误

> ID：13766620
> 
> 赞同：3
> 
> 时间：2012-12-07T16:01:39.953
> 
> 标签：javascript, mongodb, mongoose

这是我的架构：

```
var postSchema = new mongoose.Schema({
    _id: mongoose.Schema.ObjectId,
    title: String,
    body: String,
    created_at: String,
    modified_at: String
});

var Post = db.model('Post', postSchema); 
```

现在，我已经在数据库中有一个“帖子”版本。这是我正在尝试编写的内容（上述模式的一个实例）：

```
{
  title: 'Sample Post',
  body: 'this s a sample post.',
  _id: 50c208567d32d75f15000001,
  modified_at: 'Fri Dec 07 2012 10:53:42 GMT-0500 (EST)'
} 
```

ID 与数据库中的 ID 一致。这是功能：

```
Post.findByIdAndUpdate( post._id, articleObj, function(err, saved) {
  if( err || !saved ) {
    console.log("Post not updated: "+err);
  } else {
    console.log("Post updated: %s", saved);
  }

  callback(err, saved);
}); 
```

控制台返回 'post updated' 和原始 post 对象不会失败。从未写入更新，也没有任何错误。

我还尝试`findByIdAndUpdate`使用`mongoose.Types.ObjectId( )`和`new ObjectId( )`（`var ObjectId = require('mongoose').Types.ObjectId`在文件的前面）来包装 ID。

我难住了。任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T01:40:31.420

因为`articleObj`是 的一个实例`Post`，所以不能在`update`调用中使用它，因为该参数必须是纯 JavaScript 对象。

# c# - 为什么 WaitForExit 在我的 C# 代码中不是可用的方法？

> ID：13766626
> 
> 赞同：1
> 
> 时间：2012-12-07T16:02:19.960
> 
> 标签：c#, methods, process

下面的代码工作正常，但我需要添加 WaitForExit 方法。但它没有显示为可用。我错过了什么？谢谢。

```
ProcessStartInfo process = new ProcessStartInfo("cmd.exe", @"/C " + AppDomain.CurrentDomain.BaseDirectory + "Setupws.exe");
process.Verb = "runas";
process.WindowStyle = ProcessWindowStyle.Hidden;
Process.Start(process); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T16:05:51.107

`WaitForExit()`是一个实例方法，它要求您创建一个实例`Process`并运行它，而不是使用静态`Process.Start()`而不捕获 Process 返回值。

创建`Process`实例并设置实例`ProcessStartInfo`后，调用它的`Start()`实例方法，然后调用`WaitForExit()`实例。

```
ProcessStartInfo info = new ProcessStartInfo();
//Set info properties...
Process process = new Process();
process.StartInfo = info;
//set other process properties...
process.Start();
process.WaitForExit(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-07T16:06:41.940

尝试：

```
 ProcessStartInfo process = new ProcessStartInfo("cmd.exe", @"/C " +          AppDomain.CurrentDomain.BaseDirectory + "Setupws.exe");
    process.Verb = "runas";
    process.WindowStyle = ProcessWindowStyle.Hidden;
    Process p = Process.Start(process);
    p.WaitForExit(); 
```

# heroku - Heroku 控制台最大运行时间

> ID：13766638
> 
> 赞同：0
> 
> 时间：2012-12-07T16:02:49.240
> 
> 标签：heroku, heroku-toolbelt

我想通过`heroku run console`连接运行几个小时的过程。是否有我应该关注的最大运行时间或日志长度？rake 任务会更适合，还是因为连接相同而没有区别？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T18:04:30.333

Heroku 回复我：所有`heroku run`项目的时间限制为 1 小时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T17:35:54.163

我不知道有什么硬限制，但一般来说，如果你在远程控制台中运行一个长进程，最好以某种方式分离进程，这样如果出现连接问题，进程就不会终止。这也将绕过任何实际限制。如果在 Heroku dynos 上可用，请使用 screen，或者查看如何在 shell 中分离（不仅仅是后台）进程。

# mono - 什么 mplayer.exe 文件用于 linux

> ID：13766642
> 
> 赞同：-2
> 
> 时间：2012-12-07T16:03:03.610
> 
> 标签：mono, debian, mplayer

我用单声道编写了一个小程序来使用 mplayer 播放视频。为了运行视频，我使用了 mplayer.exe 作为窗口，现在我想在 debian 中使用这个程序。

有人知道我应该用什么来代替窗口 mplayer.exe。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T16:14:10.210

如果您在 Windows 上使用 mplayer，那么您可以在 Linux 上使用 mplayer。您可以使用`aptitude install mplayer`或安装它`aptitude install mplayer2`。在 Linux 上，它当然不会`.exe`作为其名称的一部分。（我假设当您说您正在使用 mplayer 时，您的意思是，而不是 Windows Media Player。Windows Media Player 不适用于 Linux。）

还有很多其他的选择。你最好的跨平台选择可能是 VLC，但你也有 Totem、Xine 等。你可以找到 Debian 打包的使用`apt-cache search`，例如，`apt-cache search video player | sort | less`提供了很多东西（包括一些不是视频播放器的东西，不幸的是）。

# html - 需要帮助创建一个向右拉的按钮组

> ID：13766649
> 
> 赞同：1
> 
> 时间：2012-12-07T16:03:26.407
> 
> 标签：html, twitter-bootstrap

我正在尝试创建一个工具栏，左侧有一组按钮，右侧有另一组按钮。

```
<div class="row">

  <div class="span1">
    <div class="btn-toolbar">
    <div class="btn-group">
      <button class="btn btn-primary" ng-click="addStudent = true"><i class="icon-plus"
                                   "icon-white"></i></button>
    </div><!-- /btn-group -->
    <div class="btn-group pull-right">
      <button class="btn"><i class="icon-chevron-right
      icon-blue"></i></button>
      <button class="btn"><i class="icon-chevron-left icon-blue"></i></button>
    </div>
    </div><!-- /btn-toolbar -->
  </div>
</div> 
```

然而，上面的代码将两个按钮组放在不同的行中，并且也没有将第二组拉到右边。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T20:29:46.687

右拉正在工作，你只是没有给按钮任何水平空间，所以它们是垂直流动的。

例如，将“span1”更改为“span10”，为 V 形按钮提供一些浮动空间。

# ruby-on-rails-3 - 如果我使用 RMagick 在 rake 任务中编辑图像，如何手动将其保存回 S3？

> ID：13766653
> 
> 赞同：1
> 
> 时间：2012-12-07T16:03:36.307
> 
> 标签：ruby-on-rails-3, image-processing, amazon-s3, carrierwave, fog

我有一个应用程序，人们可以在其中上传图片，它们使用 Carrierwave 和 Fog 组合保存在 S3 上。

我正在重写应用程序，因此在 rake 任务中，我需要遍历所有图像，调整它们的大小/裁剪它们（使用 RMagick），并将它们保存回它们最初所在的 S3。我觉得我错过了一些明显的东西，有没有一种简洁的方法可以做到这一点？如果我可以使用我已经可用的 Fog 来做到这一点，我不想再获得另一个 S3 gem。

如果有人能指出我正确的方向，我将不胜感激，谢谢！

**编辑**

使用这些说明[如何使用雾在 s3 上编辑文件？](https://stackoverflow.com/questions/8209546/how-can-i-use-fog-to-edit-a-file-on-s3)我设法从 S3 处理文件......有点。它是 type `Fog::Storage::AWS::File`，但我如何处理实际图像以便编辑它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T13:11:56.753

答案其实很简单，我没想到 CarrierWave 可以用这个`user.avatar.recreate_versions!`方法重新创建和重新保存我所有的图像！

# c - 结构成员作为函数的参数

> ID：13766658
> 
> 赞同：2
> 
> 时间：2012-12-07T16:03:47.967
> 
> 标签：c, function, arguments, structure, member

我想调用如下函数，其中第一个参数是名为 config 的结构的成员。在此示例中，该成员称为“Filter”，该成员在结构中定义为 int 并返回 char“changeConfig”以表示对其他代码的更改。

```
changeConfig = changeInt(config.Filter, 0, 9, LCD_PPM); 
```

这种格式会将我的代码减少到一个非常有限的事务状态，因为该结构有 30 多个成员，所有这些成员都需要以类似的方式单独管理和更改。

以下函数“changeInt”接收值并将它们分配给 intScroll() 所需的值 intMin、intMax 和 intval

```
unsigned char changeInt(int pointVal, int iMin, int iMax, char mode){

unsigned char configChange = 0;
dp = 0;
intMin = iMin;
intMax = iMax;
intVal = pointVal;

while(((keyPadBits & MENU) != MENU) && (timeout < TIMEOUT)){
    intScroll();

    if(keyPadBits & ENTER){
        pointVal = intVal; //config.Filter = intVal;  //config->Filter?
        confirmMin();
    }
}

return changeConfig;
} 
```

这一切都编译得很好，并且允许我更改函数 intScroll() 中的值，但是如果将“pointVal”替换为“config.Filter”或其他成员，它只会将值保存回结构配置。问题是我希望能够在函数调用中定义成员。

有什么建议么？

我是否需要开始引入指针来解决问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T16:06:07.980

传递一个指向`int`您要修改的指针：

```
unsigned char changeInt(int *pointVal, ... 
```

当需要修改值时，需要取消引用指针：

```
*pointVal = ... 
```

调用函数时，传递要修改的变量的地址：

```
changeConfig = changeInt(&config.Filter, ... 
```

# apache - Apache2 虚拟主机不工作

> ID：13766672
> 
> 赞同：1
> 
> 时间：2012-12-07T16:04:34.443
> 
> 标签：apache, configuration, apache2, webserver, virtualhost

经过几天尝试在我的本地主机上设置 apache2 虚拟主机后，我严重失去了耐心。你们能帮帮我吗？一切似乎都很好，但是当我尝试在浏览器中访问 local.droidbb.com 时，我得到了响应

> > 无法加载页面。加载 URL [http://local.droidbb.com/](http://local.droidbb.com/)时出现问题。无法连接到目的地。

这是所有相关文件（至少我是这么认为的）。

**等/主机** 文件

```
#127.0.0.1  ingress localhost.localdomain   localhost
127.0.0.1   local.droidbb.com
#127.0.1.1  debian.resnet.gre.ac.uk debian
#127.0.1.1  debian.local.droidbb.com debian

# The following lines are desirable for IPv6 capable hosts
::1     ip6-localhost ip6-loopback
fe00::0 ip6-localnet
ff00::0 ip6-mcastprefix
ff02::1 ip6-allnodes
ff02::2 ip6-allrouters 
```

**etc/apache2/ports.conf**文件

```
# If you just change the port or add more ports here, you will likely also
# have to change the VirtualHost statement in
# /etc/apache2/sites-enabled/000-default
# This is also true if you have upgraded from before 2.2.9-3 (i.e. from
# Debian etch). See /usr/share/doc/apache2.2-common/NEWS.Debian.gz and
# README.Debian.gz

NameVirtualHost *
Listen 80

<IfModule mod_ssl.c>
    # If you add NameVirtualHost *:443 here, you will also have to change
    # the VirtualHost statement in /etc/apache2/sites-available/default-ssl
    # to <VirtualHost *:443>
    # Server Name Indication for SSL named virtual hosts is currently not
    # supported by MSIE on Windows XP.
    Listen 443
</IfModule>

<IfModule mod_gnutls.c>
    Listen 443
</IfModule> 
```

**etc/apache2/sites-available/local.droidbb.com**文件

```
<VirtualHost *>

    ServerAdmin webmaster@localhost

    ServerName local.droidbb.com

    DocumentRoot /var/www/local.droidbb.com/public_html/

    <Directory />

            Options FollowSymLinks Includes -Indexes

            AllowOverride All

            Order allow,deny

            Allow from all

     </Directory>

    ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/

    <Directory "/usr/lib/cgi-bin">

        AllowOverride None

        Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch

        Order allow,deny

        Allow from all

    </Directory>

    ErrorLog ${APACHE_LOG_DIR}/error.log

    # Possible values include: debug, info, notice, warn, error, crit,

    # alert, emerg.

    LogLevel warn

    CustomLog ${APACHE_LOG_DIR}/access.log combined

</VirtualHost> 
```

问题出在哪里？哦，我应该提到我在 virtualbox 上运行 Linux Debian x64。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T17:07:11.183

Move file

```
/etc/apache2/sites-available/local.droidbb.com 
```

to

```
/etc/apache2/sites-enabled/local.droidbb.com 
```

everything in sites-available is disabled :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T16:12:44.550

阿帕奇运行良好吗？apache的error.log中有什么东西吗？听起来像 apache 工作不正常。（可能的配置问题或其他任何问题）

# javascript - jQuery 动态显示/隐藏同位素导航

> ID：13766675
> 
> 赞同：0
> 
> 时间：2012-12-07T16:04:42.080
> 
> 标签：javascript, jquery, html, show-hide, jquery-isotope

我正在构建一个动态过滤导航栏，用于我文档中的同位素项目。我的导航中有几个不同的类别，每个类别都有相关的子类别。我正在尝试构建一个导航，其中主要类别在加载时显示。

在加载时，我还使用随机顺序的所有元素填充 DOM。当您单击类别链接时，它会过滤掉结果，并组织相关元素。我还想显示过滤部分的相关子类别。然后，如果您选择不同的类别，现有的子导航会淡出，而相关的子导航会淡入。

我所有的分类以及与同位素有关的一切都很好。它是我遇到困难的子导航的智能显示/隐藏。

我的 HTML：

```
<nav id="filters">
  <div id="categories">
    <h2>Select a Category:</h2>
    <br>
    <li><a href="#" data-filter="*">All Categories</a></li>
    <li><a href="#" data-filter=".autos" data-category="autos">Autos</a></li>
    <li><a href="#" data-filter=".lifestyle" data-category="lifestyle">Lifestyle</a></li>
    <li><a href="#" data-filter=".people" data-category="people">People</a></li>
    <li><a href="#" data-filter=".tech" data-category="tech">Tech</a></li>
    <li><a href="#" data-filter=".trends" data-category="trends">Trends</a></li>
    <br>
  </div>
  <div id="autos">
    <h2>Autos:</h2>
    <li><a href="#" data-filter=".autos" data-category="autos">Show All</a></li>
    <li><a href="#" data-filter=".news" data-category="autos">News</a></li>
    <li><a href="#" data-filter=".car-tech" data-category="autos">Car Tech</a></li>
    <li><a href="#" data-filter=".fuel-economy-and-safety" data-category="autos">Fuel Economy &amp; Safety</a></li>
    <li><a href="#" data-filter=".buying-and-selling" data-category="autos">Buying &amp; Selling</a></li>
    <li><a href="#" data-filter=".autos, .everything-else" data-category="autos">Everything Else</a></li>
    <br>
  </div>
  <div id="lifestyle">
    <h2>Lifestyle:</h2>
    <li><a href="#" data-filter=".lifestyle" data-category="lifestyle">Show All</a></li>
    <li><a href="#" data-filter=".travel" data-category="lifestyle">Travel</a></li>
    <li><a href="#" data-filter=".music" data-category="lifestyle">Music</a></li>
    <li><a href="#" data-filter=".food" data-category="lifestyle">Food</a></li>
    <li><a href="#" data-filter=".shopping" data-category="lifestyle">Shopping</a></li>
    <li><a href="#" data-filter=".lifestyle, .everything-else" data-category="lifestyle">Everything Else</a></li>
    <br>
  </div>
  <div id="people">
    <h2>People:</h2>
    <li><a href="#" data-filter=".people" data-category="people">Show All</a></li>
    <li><a href="#" data-filter=".who-you-know" data-category="people">Who You Know</a></li>
    <li><a href="#" data-filter=".who-you-should-know" data-category="people">Who You Should Know</a></li>
    <li><a href="#" data-filter=".people, .everyone-else" data-category="people">Everyone Else</a></li>
    <br>
  </div>
  <div id="tech">
    <h2>Tech:</h2>
    <li><a href="#" data-filter=".tech" data-category="tech">Show All</a></li>
    <li><a href="#" data-filter=".business" data-category="tech">Business</a></li>
    <li><a href="#" data-filter=".pleasure" data-category="tech">Pleasure</a></li>
    <li><a href="#" data-filter=".tech, .everything-else" data-category="tech">Everything Else</a></li>
    <br>
  </div>
  <div id="trends">
    <h2>Trends:</h2>
    <li><a href="#" data-filter=".trends" data-category="trends">Show All</a></li>
    <li><a href="#" data-filter=".online" data-category="trends">Online</a></li>
    <li><a href="#" data-filter=".offline" data-category="trends">Offline</a></li>
    <li><a href="#" data-filter=".trends, .everything-else" data-category="trends">Everything Else</a></li>
  </div>
</nav> 
```

我的 jQuery：

```
$(document).ready(function() {

  $('#filters > div:gt(0)').hide();

  $('#filters a').click(function(){
    var selector = $(this).attr('data-filter');
    var category = $(this).attr('data-category');
    var $subnav = $('#filters').find('#'+category);

    if($subnav.is(":hidden")) {
      $subnav.fadeIn();
    } 

    if($subnav.is(":visible") && $subnav.attr("id") != category) {

    }

    $container.isotope({ filter: selector });
    return false;
  });
}); 
```

我愿意接受任何建议。无论是重组我的导航，还是以一种新的方式重新声明我的变量。我一直盯着这段代码有一段时间了，大脑正在变成糊状。我试图使用第二个`if`语句来处理非相对子导航的隐藏。

如果你喜欢，你可以跳到我的网站上展示示例：

[例子](http://preview.robabby.com/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T19:35:54.130

嗯，我想通了。HTML 没有变化。这是我更新的 JavaScript/jQuery

```
$(document).ready(function() {

  $('#filters > div:gt(0)').hide();

  $('#filters a').click(function(){
    var selector = $(this).attr('data-filter');
    var category = $(this).attr('data-category');
    var $subnav = $('#filters #'+category);

    $('#filters > div').each(function() {
      if($(this).attr('id') != category) {
        $(this).not('#categories').fadeOut();
      }
    })

    if($subnav.attr("id") === category) {
      $subnav.delay(1000).fadeIn();
    } 

    $container.isotope({ filter: selector });
    return false;
  });
}); 
```

# sharepoint - 在运行时更改语言资源

> ID：13766680
> 
> 赞同：3
> 
> 时间：2012-12-07T16:05:10.997
> 
> 标签：sharepoint, resources

我有一个共享点项目，它有不同的项目。它们每个都有自己的特定语言资源文件，例如 resource.en-us.resx、resource.de-de.resx

现在我们的客户希望能够即时更改这些资源文件中的任何文本。我们都知道这个想法有多愚蠢，但仍然必须提供解决方案。

我们可以删除资源文件并将资源存储在列表中，但这会使愚蠢的想法变得更糟。

有没有聪明的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T00:53:48.897

Sharepoint 是 ASP.NET 应用程序。可以扩展资源提供者模型。您可以将所有这些资源放入数据库，客户可以即时编辑文本。

看[这里](http://msdn.microsoft.com/en-us/library/aa905797.aspx)。

# android - InflateException：Android - 谷歌地图 - 双击缩放

> ID：13766681
> 
> 赞同：0
> 
> 时间：2012-12-07T16:05:13.063
> 
> 标签：android, google-maps

我在我的 android 应用程序中显示谷歌地图。当用户双击地图时，我想放大。

我有 xml 来显示地图

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<com.is.guide.ExtMapView
    android:id="@+id/tourMapView"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:enabled="true"
     android:clickable="true"
    android:apiKey="@string/apikey" /> 
```

和类如下

```
public class ExtMapView extends MapView {
 private Context context;
 private GestureDetector gestureDetector;

 @SuppressWarnings("deprecation")
public ExtMapView(Context c, AttributeSet attrs) {
  super(c, attrs);
  context = c;

  gestureDetector = new GestureDetector((OnGestureListener) context);
  gestureDetector.setOnDoubleTapListener((OnDoubleTapListener) context);
 }

 public boolean onTouchEvent(MotionEvent ev) {
  if (this.gestureDetector.onTouchEvent(ev))
   return true;
  else
   return super.onTouchEvent(ev);
 }
} 
```

运行应用程序时出现 view.InflateException :(

我可能错过了什么？

异常如下

```
12-07 21:26:09.788: E/AndroidRuntime(6714): java.lang.RuntimeException: 
Unable to start activity ComponentInfo{com.is.guide/com.is.TourMapActivity}:
android.view.InflateException: Binary XML file line #7: Error inflating class 
com.is.guide.ExtMapView

12-07 21:26:09.788: E/AndroidRuntime(6714): Caused by: android.view.InflateException: 
Binary XML file line #7: Error inflating class com.is.guide.ExtMapView 
```

我提到了这个链接 [http://dev.kafol.net/2011/11/how-hard-is-it-to-make-simple-zoom-in.html](http://dev.kafol.net/2011/11/how-hard-is-it-to-make-simple-zoom-in.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T17:20:48.193

覆盖所有构造函数

```
public ExtMapView(Context arg0, String arg1) {
    super(arg0, arg1);
    init(arg0);
}

public ExtMapView(Context arg0, AttributeSet arg1) {
    super(arg0, arg1);
    init(arg0);
}

public ExtMapView(Context arg0, AttributeSet arg1, int arg2) {
    super(arg0, arg1, arg2);
    init(arg0);
}

protected void init(Context c) {
    context = c;
    gestureDetector = new GestureDetector((OnGestureListener) context);
    gestureDetector.setOnDoubleTapListener((OnDoubleTapListener) context);
} 
```

如果您有以下标签，请在您的 manifest.xml 中进行验证

```
<uses-library android:name="com.google.android.maps"/> 
```

如果 xml 上的 packge 名称“*你放 com.is.guide.* ”是正确的。

# java - java Process.waitfor 是一个阻塞调用

> ID：13766682
> 
> 赞同：7
> 
> 时间：2012-12-07T16:05:20.310
> 
> 标签：java, process, event-handling, reactive-programming

我希望能够从 JVM 内部启动一个外部进程并完成它。

我可以使用 ProcessBuilder 创建一个 Process，然后执行 Process.waitFor() 以等待其完成。但是，这是一个阻塞调用，只会浪费线程资源。

通过事件处理程序和反应式编程来做到这一点会更有意义。有人会认为 JVM 可以向操作系统注册某种侦听器来侦听进程完成事件，并将其转发回程序。

是否存在这样的机制/ API？实现这一目标的任何替代方案或库？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-16T13:34:51.180

如果您只需要支持 Windows、MacOS X 和 Linux，请使用[NuProcess库。](https://github.com/brettwooldridge/NuProcess "NuProcess")它使用回调模型提供对外部进程的非阻塞访问——包括 I/O 和程序终止。 *披露：我是该图书馆的作者。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T16:27:17.853

生成将等待进程完成的新线程：

```
 final Process process = ...;
    new Thread(new Runnable() {
        @Override
        public void run() {
            try {
                process.waitFor();
            } catch (InterruptedException e) {
                // thread is interrupted, check process state
            }
            // signal main thread
        }
    }).start(); 
```

或使用执行器：

```
 Future<String> future = Executors.newSingleThreadExecutor().submit(new Callable<String>() {
        @Override
        public String call() throws Exception {
            process.waitFor();
            return "OK";
        }
    }); 
```

稍后允许您通过 Future API: `future.isDone()`, `future.cancel()`, ...检查作业状态

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T22:46:53.293

> 有人会认为 JVM 可以向操作系统注册某种侦听器来侦听进程完成事件，并将其转发回程序。

仅当 java 的所有目标操作系统都支持这种机制时。你有证据证明他们这样做吗？

# visual-studio-2012 - 我可以在 Visual Studio 2012 Page Inspector 中禁用浏览器缓存吗？

> ID：13766683
> 
> 赞同：2
> 
> 时间：2012-12-07T16:05:23.453
> 
> 标签：visual-studio-2012, page-inspector

我正在尝试更新 LESS 文件，但是当我在 Visual Studio 2012 的 Page Inspector 中刷新呈现的页面时，它不会加载我的更改。如果我在 Internet Explorer 中打开同一页面并按 Ctrl + F5，Internet Explorer 将加载我的更改，然后如果我返回到 Page Inspector 并刷新那里的更改也会显示。我尝试按住 Ctrl 然后按下 Page Inspector 中的刷新按钮，但也没有加载。

# java - Spring MVC 中的自定义授权

> ID：13766685
> 
> 赞同：4
> 
> 时间：2012-12-07T16:05:31.190
> 
> 标签：java, spring-mvc, spring-security

我们有一个应用程序，管理员可以在其中创建用户并将角色分配给特定类型的实体。

例如，如果实体被调用`Student`，则应用程序的用户具有不同级别的权限，例如：

*   查看器 - 查看学生详细信息
*   EDITOR - 编辑学生详细信息
*   EXPORTER - 导出学生详细信息

执行上述操作的 URI 如下所示：

*   `GET`-`/content/{classId}/{studentId}/view`
*   `PUT`-`/content/{classId}/{studentId}`
*   `GET`-`/content/{classId}/{studentId}/export`
*   `POST`-`/content/{classId}/{studentId}/export`

请注意，URI 是动态的。此外，`User A`可以为给定用户分配`VIEWER`角色 for`Class 1`和`EXPORTER`for `Class 2`。

在我的 spring-security 配置中，我只定义了两个权限 -`ADMINISTRATOR`和`USER`.

*   `ADMINISTRATOR`- 可以访问一切
*   `USER`- 可以访问除`/admin/*`URI 之外的所有内容。

角色`VIEWER`,不是 spring-security 角色`EDITOR`。`EXPORTER`现在我在限制用户访问他们无权访问的资源时遇到了问题。

此外，如果用户没有`EXPORTER`权限，他甚至不应该看到“*导出*”按钮（放置在应用程序的某个位置）。也许我可以使用 spring 的`security`taglib 来做到这一点。但这完全是另一个问题。

我可以让他们意识到弹簧安全性，但问题是我应该将我的阅读逻辑`{studentId}`( `@PathVariable`) 放在哪里，并将其与当前登录的用户进行匹配，以检查他是否有权访问它。

我什至想到了创建一个过滤器 /`HandlerInterceptor`来监听的想法`/content/*`。但是我将不得不做一些丑陋的事情，比如解析 URI，自己提取第二个路径参数，然后检查数据库。

有没有更优雅、更安全的方式来做到这一点？

欢迎任何想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T16:27:50.190

您可以为自己的`SecurityExpressionHandler`. 只需扩展`DefaultWebSecurityExpressionHandler`并覆盖`createSecurityExpressionRoot`. 默认情况下，此方法返回一个`WebSecurityExpressionRoot`. 您的实现可以扩展此类并添加其他方法，您将在 Spring 安全配置中使用这些方法。

以下是您如何提供自己的 SecurityExpressionHandler 实现。代码来自[spring 安全文档](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#el-method-built-in)：

```
<security:global-method-security pre-post-annotations="enabled">
    <security:expression-handler ref="expressionHandler"/>
</security:global-method-security>

<bean id="expressionHandler" class="org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler">
    <property name="permissionEvaluator" ref="myPermissionEvaluator"/>
</bean> 
```

答案是否提供了足够的信息，还是您需要进一步的帮助？

# eclipse - Eclipse 中的 Team Explorer Everywhere 警告

> ID：13766690
> 
> 赞同：0
> 
> 时间：2012-12-07T16:05:56.323
> 
> 标签：eclipse, team-explorer-everywhere

我正在使用带有 TEE 的 Eclipse Juno 进行 Android 开发，并将我的源代码存储在 Team Foundation Service 中。

在进行开发或运行代码时，我在 Eclipse 控制台中的“Team Foundation Server Messages”下收到以下错误：无法刷新源代码管理文件夹树。有关错误详细信息，请参阅程序日志文件。

应该怎么做才能解决这个错误？上面提到的程序日志文件在哪里？

更新：我通过帮助>>团队资源管理器支持检查了日志。“团队资源管理器日志”下有两条日志记录，即使它们是 5 分钟前的时间戳，它们都是空的。还有另一个名为“平台日志”的日志，它不是空的，但不包含任何关于“源代码控制树”的内容。而且很大。大约500K。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T16:12:08.577

查看日志的最简单方法是转到帮助 -> 团队资源管理器支持。日志选项卡将显示最近几次 Eclipse 调用的日志文件。

它们还存储在文件系统中：

*   视窗：`%LOCALAPPDATA%\Microsoft\Team Foundation\[version]\Logs`
*   苹果电脑：`~/Library/Application Support/Microsoft/Team Foundation/[version]/Logs`
*   Unix：`~/.microsoft/Team Foundation/[version]/Logs`

TEE 2010 和TEE 2012在哪里。您`[version]`正在寻找日志。`3.0``4.0``teamexplorer-plugin`

[如果您的日志是空白的，这通常是因为您安装了 Mylyn，并且由于Eclipse 错误 353168](https://bugs.eclipse.org/bugs/show_bug.cgi?format=multiple&id=353168)，它决定使用不写入日志文件的配置来覆盖您的公共日志配置（适用于所有 Eclipse 和所有 Eclipse 插件）. 您应该可以通过以下任一方式解决此问题：

1.  临时卸载 Mylyn，或
2.  编辑您`eclipse.ini`以传递新的系统属性：

    ```
    -Dorg.apache.commons.logging.Log=org.apache.commons.logging.impl.Log4JLogger 
    ```

如果日志中有任何其他错误消息，请告诉我们。

# hudson - 哈德森没有认识到这些变化 + clearcase

> ID：13766693
> 
> 赞同：1
> 
> 时间：2012-12-07T16:06:04.723
> 
> 标签：hudson, clearcase, hudson-plugins, clearcase-ucm

我正在为 Hudson 使用 ClearCase 插件。
我在 ClearCase 中修改了文件。
但是，当我运行 Hudson 构建时，它没有检测到任何更改。

```
> [workspace] $ cleartool lsview CKD_Delta  
* CKD_Delta            \\ofscvr0341\Views\CKD_Delta.vws   
[workspace] $ cleartool startview CKD_Delta  
[CKD_Delta] $ cleartool pwv -root  
M:\CKD_Delta  
[workspace] $ cleartool lsview CKD_Delta  
* CKD_Delta            \\ofscvr0341\Views\CKD_Delta.vws  
[workspace] $ cleartool startview CKD_Delta  
[M_CKD_Delta] $ cleartool lshistory -all -since 30-oct-12.14:55:58utc+0000 -fmt '\"%Nd\" \"%u\" \"%En\" \"%Vn\" \"%e\" \"%o\" \n%c\n' -nco '"Load \Base_VOB"'  
[workspace] $ cleartool startview CKD_Delta  
[workspace] $ cleartool catcs -tag CKD_Delta 
```

当我`cleartool lshistory since 30-oct-12.14:55:58`在命令提示符下运行时，它会在 ClearCase 中检测我修改过的文件。
请协助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T16:27:30.180

```
 * CKD_Delta \ofscvr0341\Views\CKD_Delta.vws 
```

这表示视图存储路径，用于启动的视图（如“ `*`”所示）

确保您的`pwd`（当前目录）在插件执行 lshist 时以及在命令行中使用它时相同。

还要确保在您的视野中处于一个vob中。

* * *

如果所有元素都相同（相同的路径、相同的视图、相同的 vob），请检查环境变量，特别是`CLEARCASE_PRIMARY_GROUP`必须正确设置的环境变量（到 vob 的主组或其辅助组之一）才能正确访问沃布说。

检查用于 Hudson 的帐户是否受益于与您在命令行中（成功）使用的帐户相同的环境变量。

# python - 回滚python中的随机数生成器？

> ID：13766695
> 
> 赞同：5
> 
> 时间：2012-12-07T16:06:10.807
> 
> 标签：python, random

是否可以通过指定数量的步骤将随机数生成器“回滚”到较早的状态以获得重复的随机数？

我希望能够做这样的事情：

```
print(random.random())
0.5112747213686085
print(random.random())
0.4049341374504143
print(random.random())
0.7837985890347726

random.rollback(2) #go back 2 steps

print(random.random())
0.4049341374504143
print(random.random())
0.7837985890347726 
```

我目前唯一实现这一点的想法是将所有生成的随机数存储到一个列表中以返回。但是，我个人更喜欢不涉及这样做的方法，因为我计划生成大量随机数，而此函数不会经常使用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-07T16:07:12.243

你想看看[`random.getstate()`](http://docs.python.org/3/library/random.html#random.getstate)和[`random.setstate()`](http://docs.python.org/3/library/random.html#random.setstate)。将此与跟踪生成的项目数量相结合，做您想做的事情非常简单。

`random`请注意，如果您依赖于此，则必须小心使用其他代码，因此我建议您创建一个`random.Random()`实例来避免这种情况。

> 该模块提供的函数实际上是 random.Random 类的隐藏实例的绑定方法。您可以实例化您自己的 Random 实例以获取不共享状态的生成器。

（来自文档）

示例实现：

```
from itertools import islice
import collections
from random import Random

def consume(iterator, n):
    "Advance the iterator n-steps ahead. If n is none, consume entirely."
    # Use functions that consume iterators at C speed.
    if n is None:
        # feed the entire iterator into a zero-length deque
        collections.deque(iterator, maxlen=0)
    else:
        # advance to the empty slice starting at position n
        next(islice(iterator, n, n), None)

class RewindRandom:
    def __init__(self):
        self._random = Random()
        self._state = self._random.getstate()
        self._count = 0

    def __iter__(self):
        while True:
            yield self._random.random()

    def __call__(self):
        self._count += 1
        return next(iter(self))

    def rollback(self, amount):
        self._random.setstate(self._state)
        consume(self, self._count-amount)
        self._count -= amount 
```

可以这样使用：

```
random = RewindRandom()

>>> random()
0.31276818768213244
>>> random()
0.7031210824422215
>>> random()
0.7196351574136909
>>> random.rollback(2)
>>> random()
0.7031210824422215
>>> random()
0.7196351574136909
>>> random()
0.6582894948982371 
```

# java - 如何将 java Jetty-Runner 命令输出发送到文件

> ID：13766698
> 
> 赞同：1
> 
> 时间：2012-12-07T16:06:19.517
> 
> 标签：java, unix, embedded-jetty

我试图将 java 命令输出发送到文件，而不是控制台，我试图运行 jetty runner，这是我使用的命令：

```
java -Xmx512m -XX:PermSize=64M -XX:MaxPermSize=128M -jar ../lib/jetty-runner.jar --port 4000 --log manager.log ../manager.war > manager.log &
echo "$!" > manager.pid 
```

如何将此命令的输出发送到 .log 文件，并将 PID 保存为我正在执行的操作？

美联社

# jquery - Firefox 中的内容不使用滚动条滚动

> ID：13766704
> 
> 赞同：1
> 
> 时间：2012-12-07T16:06:36.563
> 
> 标签：jquery, sharepoint, firefox, scrollbar

我最近的任务是弄清楚如何为我公司的内部 SharePoint 2010 网站维护滚动条定位。不幸的是，开箱即用的“MaintainScrollPositionOnPostBack”并没有得到我们想要的结合文本框聚焦要求的结果（包括隐藏字段中持久值的问题）。

在我最有希望的解决方案中，我在 javascript 中为滚动的 SharePoint div ('#s4-workspace') 设置滚动值，以便在按下浏览器后退/前进按钮时运行它。（在这种情况下，我将滚动值存储在 sessionStorage 中，但我仍在尝试使用其他持久媒体）。

我使用以下代码重新加载滚动位置，为共享点站点中的主可滚动 div 传入“s4-workspace”。

```
function RestoreScrollState(workspaceID) {
    var itemScrollDataIdentifier = pageScrollDataIdentifier + '-' + workspaceID;
    var coordStr = sessionStorage[itemScrollDataIdentifier];
    if (coordStr) {
        var scrollable = $('#' + workspaceID);
        var coords = $.parseJSON(coordStr);
        scrollable.scrollLeft(coords.x);
        scrollable.scrollTop(coords.y);
        return coords;
    }
    return null;
} 
```

这在 IE8、IE9 和 Chrome 中效果很好，但我在 Firefox (17.0.1) 中遇到了问题。当我调用这个函数时，滚动条被设置到正确的位置，但是's4-workspace' div 中的内容仍然滚动到顶部（换句话说，内容没有随着滚动条滚动）。有趣的是，如果我在 setTimeout 中调用此函数并等待两秒钟，它会滚动正常（但是，较短的值不会）。

```
setTimeout(function () { RestoreScrollState('s4-workspace'); }, 2000); 
```

我已经尝试搜索了一段时间，但没有发现任何有用的东西。有没有人遇到过这样的问题，除了长时间的超时之外，还有另一种解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T17:08:17.300

在将我的头撞到墙上几个小时后终于找到了解决方案：似乎问题是由于 SharePoint 仍在加载其内容的过程中（来自“sp.js”），并且因为时髦的东西它与设置滚动条有关，我的脚本驱动更改必须在 SP 滚动条完全初始化之前应用。所以这里是必须做的：

```
$(document).ready(function(){
    ExecuteOrDelayUntilScriptLoaded(runAfterSharePointIsDoneBeingStupid, 'sp.js');
});

function runAfterSharePointIsDoneBeingStupid(){
    //code to persist scrollbar position here
} 
```

请原谅我在命名中表达的任何粗鲁情绪...SharePoint 和我的关系非常复杂... ;)

# html - Visual Studio Express 2012 Express for Web 中的 DOM 资源管理器在哪里？

> ID：13766709
> 
> 赞同：0
> 
> 时间：2012-12-07T16:06:46.843
> 
> 标签：html, debugging, visual-studio-2012

我在这里看到了 Windows 8 的答案：[How do I use the DOM Explorer in Visual Studio Express 2012 RC for Windows 8](https://stackoverflow.com/questions/12692357/how-do-i-use-the-dom-explorer-in-visual-studio-express-2012-rc-for-windows-8)

但这就是我所看到的：![在此处输入图像描述](../Images/24c8cd5397987d13393fd444ec21dbc2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-17T19:26:11.497

据我所知，DOM Explorer 和 JavaScript 控制台仅适用于 Windows 8 的 Visual Studio Express 2012，不适用于 Web 或桌面。不知道完整的版本。

*   TC阿霍宁

# asp.net-mvc - 如何使用 ASP.NET MVC 从一个表创建标签并将值存储在另一个表中

> ID：13766710
> 
> 赞同：1
> 
> 时间：2012-12-07T16:06:50.080
> 
> 标签：asp.net-mvc, entity-framework, asp.net-mvc-4, asp.net-mvc-views

我的数据库中有一个名为 Field 的表和一个名为 FieldValue 的表。我的模型如下所示：

```
[Table("Field")]
public class Field
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int FieldId { get; set; }
    public string Value { get; set; }
}

[Table("FieldValue")]
public class FieldValue
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int FieldValueId { get; set; }
    public int FieldId { get; set; }
    public string Value { get; set; }
} 
```

我想将每个字段显示为标签，然后显示与该字段关联的每个 FieldValue 的文本框，但我不太确定如何处理这个问题。如果这很重要，我正在使用 MVC 4。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T16:52:11.847

您可以将连接的数组返回到视图模型类（未经语法/错别字测试）：

```
public class ViewModel
{
    public KeyValuePair<string,string> Fields { get; set; }
}

var kvps = Fields.Join(FieldValues,
    f => f.FieldId,
    fv => fv.FieldId,
    (f, fv) => 
        new KeyValuePair<string,object>(f.Value, fv.Value)
    }).ToArray();
var viewModel = new ViewModel { Fields = kvps };

return View(viewModel); 
```

然后在视图中，简单地遍历这些值：

```
@model MyNamespace.ViewModel

@foreach (var kvp in Model.Fields)
{
    <span class="field-label">@kvp.Key</span>
    <span class="field-value">@Html.TextBoxFor(_ => kvp.Value)</span>
} 
```

如果你把它放在一个表单中，那么回发也应该可以正常工作（因为它使用`TextBoxFor`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T16:40:50.200

不知道你想做什么，我不想做任何假设，但我觉得你可能走错了路。您可能知道的 MVC 具有强类型视图，因此您可以将视图“绑定”到有用的业务对象（例如 Person），然后使用类似的东西生成 HTML

Html.TextBoxFor(p => p.Name)

其中 p 是一个人

您正在尝试构建的那个东西似乎是实现这一目标的技巧。您不能只创建有意义的对象来保存您的信息，然后将它们传递给强类型视图吗？如果另一个页面具有相同的字段，则传递相同的对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T16:52:30.270

这里的答案取决于您是否会知道您预先拥有多少个字段。

如果你这样做了，那么你应该创建一个强类型模型来绑定你的 mvc 视图，并使用如下数据注释：

```
public class MyModel
{
    [Display(Name="Field name 1")
    public string Field1 { get; set; }

    [Display(Name="Field name 2")
    public string Field2 { get; set; }
} 
```

然后在您看来，您可以使用以下代码：

```
@Html.LabelFor(model => model.Field1)
@Html.TextBoxFor(model => model.Field1)

@Html.LabelFor(model => model.Field1)
@Html.TextBoxFor(model => model.Field1) 
```

但是，如果您不知道前面的字段数量，因此无法填充这样的强类型模型，那么我建议您执行以下操作：

*   向字段添加导航属性，以便您可以轻松获取值
*   编写一些代码以在数据库之间映射到可能的字典
*   在您的视图中编写一个循环并使用这样的老式 html 助手：

...

```
@for (var key in model.FieldDictionary.Keys)
{
    @Html.Label("key", model.FieldDictionary(key))
    @Html.TextBox(model.FieldDictionary(key))
} 
```

请注意，此代码未经测试，在第二个示例中，您必须弄清楚如何在发布表单时重新获取数据，但希望能给您一个起点。

希望这可以帮助！

# svn - 缺少 ~/.subversion/servers 文件？

> ID：13766714
> 
> 赞同：0
> 
> 时间：2012-12-07T16:06:58.213
> 
> 标签：svn

我一直在寻找 ~/.subversion/servers 文件，但在我的系统上似乎没有 ~/.subversion 目录。我正在运行一个 Win 7x64 系统，并尝试了原生 Windows SVN 构建（从命令提示符）以及 cygwin 移植版本。

我已经检查了 c:\users\.subversion （不存在）以及我的 cygwin 主目录 C:\cygwin\home\ （或 ~/ 在 cygwin shell 中）。

我在这两个位置都没有 .subversion 目录，并尝试运行基本的 svn 命令。

在这两种情况下我都使用 svn 1.7.5。如果服务器文件丢失，是否不再自动生成？如果我手动创建它，我能保证 svn 会读取它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T16:28:38.997

1.  Cygwin 版本是错误的选择
2.  全局 Subversion 配置文件（在 Windows 中）始终位于 /%APPDATA%/Subversion

# php - 如何将动态生成的图像保存到数据库

> ID：13766716
> 
> 赞同：1
> 
> 时间：2012-12-07T16:07:09.573
> 
> 标签：php, javascript, canvas

我的网页上有一个画布，允许用户签署他们的签名（使用[jSignature](http://willowsystems.github.com/jSignature/#/about/)）。[我使用canvasg](http://code.google.com/p/canvg/)将其转换为 png 客户端，现在需要将其提交给 Quickbase。我已经知道如何将图像上传到 quickbase，但是我的问题是将文件从我`index.html`页面中的客户端代码获取到我的服务器端代码`submit_signature.php`。

```
 $("#save").click(function(){
          var datapair = sigdiv.jSignature("getData", "svg");
          var i = new Image();
          i.src = "data:" + datapair[0] + "," + datapair[1];
          $(i).appendTo($("#outputSvg"));

          var canvas = document.getElementById("canvas");

          canvg(canvas, datapair[1]);

          var img = canvas.toDataURL("image/png");
          $("#outputRaster").append("<img src='"+img+"' name='image' />");
        }); 
```

[jsFiddle](http://jsfiddle.net/wzFpT/1/)

任何帮助将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T16:27:38.510

jSignature 的作者建议您不要将其保存为图像（[http://willowsystems.github.com/jSignature/#/about/](http://willowsystems.github.com/jSignature/#/about/)）。

> 我知道您很想从 jSignature 获得“图像”，但是，请控制自己并远离。相反，考虑捕获“base30”或“svg”数据并在后期制作、服务器端增强+渲染。

他在下面陈述了几个原因。如果这些原因对您有意义并且您可以使用 ImageMagick，您可以考虑使用 jSignature 的 svg 插件并通过 AJAX 将该结果发布到您的服务器。然后你可以使用这个问题的答案：[Rendering an SVG file to a PNG or JPEG in PHP](https://stackoverflow.com/questions/10289686/rendering-an-svg-file-to-a-png-or-jpeg-in-php)

如果您必须将图像作为 base64 编码字符串上传到数据库中，并且其他选项不可用，jSignature 有一个图像导出插件可以为您将其转换为 base64。

> 默认（EXPORT ONLY）（BITMAP）数据格式与早期版本中生成的输出格式 jSignature 兼容，当 getData 被调用时不带参数。现在，每当您使用 $obj.jSignature("getData") 时，都会默认调用“默认”（显然）。数据格式是由 Canvas 本地生成的 - data-url-formatted，base64 编码（可能是 PNG）位图数据，如下所示: data:image/png;base64,i1234lkj123;k4;l1j34l1kj3j... 此导出调用返回单个 data-url 格式的字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T16:13:27.577

我个人会使用 js将图像[发布](http://mentaljetsam.wordpress.com/2008/06/02/using-javascript-to-post-data-between-pages/)到 PHP 页面。然后，此页面会将图像保存到目录并在数据库中插入对该文件的引用。

**切勿将图像直接存储在数据库中。**这不仅会占用大量空间，还会导致大幅减速。

希望这可以帮助。

# javascript - 批量编辑 PDF 以进行分发

> ID：13766725
> 
> 赞同：1
> 
> 时间：2012-12-07T16:07:41.897
> 
> 标签：javascript, pdf, acrobat

我正在尝试编辑一个非常大的 PDF（大约 200 页），我想在分发时编辑多个字段。例如，我想设置 Acrobat，以便名称和其他一些简单字段将根据我分发 PDF 的对象而改变。我希望能够做到这一点，而无需浏览每一页并对其进行更改。我一直在对此进行一些研究，但找不到一个好的方法。我还检查了 Adob​​e XI 中的操作选项卡，但我没有看到这样做的方法。我错过了一些明显的东西吗？

做这个的最好方式是什么？感谢任何可以提供帮助的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T19:18:07.420

查看 Adob​​e 网站（此处： http: [//www.adobe.com/devnet/acrobat.html](http://www.adobe.com/devnet/acrobat.html)）上的 Acrobat SDK。

在 Acrobat 中，您可以创建操作（因为您的问题表明您已经找到）。其中一项操作允许您在文档上运行 JavaScript。我在上面向您指出的 SDK 包含有关如何编写可以操作文档的 JavaScript 的完整信息。

在该 JavaScript API（以及许多其他内容）中，您会找到一个“doc”对象，该对象具有一个名为 getField 的方法，该方法可让您按名称获取特定字段，然后操作其属性。

如果我了解您要正确执行的操作，则可以制作由操作调用的分发脚本。每个脚本将遍历文档的所有页面，获取该页面的字段并根据您的工作流程逻辑执行您需要执行的任何操作。

# android - Android [SupportMapFragment] 方法 findViewById(int) 未定义类型

> ID：13766732
> 
> 赞同：0
> 
> 时间：2012-12-07T16:08:01.100
> 
> 标签：android, android-fragments, google-play-services, supportmapfragment

```
public class PlaceMapsFragment extends SupportMapFragment {
    private GoogleMap mMap;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        View v = inflater.inflate(R.layout.fragment_place_maps, container,
                false);

        setUpMapIfNeeded();
        return v;
    }

    private void setUpMapIfNeeded() {
        if (mMap == null) {
            mMap = ((MapView) findViewById(R.id.map)).getMap();
            if (mMap != null) {
                setUpMap();
            }
        }
    }

    private void setUpMap() {
        mMap.addMarker(new MarkerOptions().position(new LatLng(0, 0)).title(
                "Marker"));
    }
} 
```

**错误**

```
The method findViewById(int) is undefined for the type PlaceMapsFragment 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T16:17:54.560

如果我没记错的话，所有片段都没有本地`findViewById()`方法。这就是您必须使用 onCreateView() 方法的原因。

这意味着您应该更改`setUpMapIfNeeded()`为`setUpMapIfNeeded(View view)`并将`onCreateView()`v 传递给您修改后的方法。您还需要更改`mMap = ((MapView) findViewById(R.id.map)).getMap();`为`mMap = ((MapView) view.findViewById(R.id.map)).getMap();`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T16:30:18.577

我不确定您是否可以将该类子`SupportMapFragment`类化。

要获取`SupportMapFragment`您调用的新实例，`SupportMapFragment.newInstance`这将返回您的对象。

例如，如果您将其子类化并调用，`PlaceMapsFragment.newInstance()`您仍将返回一个`SupportMapFragment`对象。

如果您想以编程方式操作地图，我建议您执行以下操作。

```
this.mSupportMapFragment = SupportMapFragment.newInstance();
MapHandler mMapHandler = new mMapHandler(this.mSupportMapFragment.getMap()); 
```

希望这可以帮助。

# python - Python - 给出名称错误的简单列表函数

> ID：13766733
> 
> 赞同：0
> 
> 时间：2012-12-07T16:08:12.767
> 
> 标签：python

相当简单的问题，我想......我刚刚安装了 Python 并且正在测试一些初学者教程。

我想创建一个菜单，允许您将项目添加到列表中，然后检查它们是否已添加：测试功能和过程中的列表。

```
#create empty list and define variables
firstlist = {'joe'}
additem = "test"
printthis = "test"

#create menu, add or check name
def menu():
    #print what options you have
    print "Add to list: type '1'"
    print "Check for name: type '2'"
    print "To exit program: type '3'"
    return input ("Choose your option: ")

def addmenu():
    additem = input("Name of list item: ")
    firstlist.append(additem)
    print additem, "has been appended"

def checkmenu():
    printthis = input ("What are you looking for?: ")
    if firstlist.has_key(printthis):
        print "is in the list"
    else:
        print "is not in the list"

# Perform action
loop = 1
choice = 0
while loop == 1:
    choice = menu()
    if choice == 1:
        addmenu()
    elif choice == 2:
        checkmenu()
    elif choice == 3:
        loop = 0
    elif choice > 3:
        print "You made an incorrect selection" 
```

这是我的错误：

```
Traceback (most recent call last):
  File "C:\Python27\testing python\tutorials\dictionaryselection", line 32, in <module>
    addmenu()
  File "C:\Python27\testing python\tutorials\dictionaryselection", line 15, in addmenu
    additem = input("Name of list item: ")
  File "<string>", line 1, in <module>
NameError: name 'TESTING' is not defined 
```

不知道发生了什么...任何帮助将不胜感激。

下面的工作代码：转换为 python 3.x

```
#create empty list and define variables
firstlist = ['Joe']
additem = "test"
printthis = "test"

#create menu, add or check name
def menu():
    #print what options you have
    print ("")
    print ("Add to list: type '1'")
    print ("Check for name: type '2'")
    print ("To list the whole list '3'")
    print ("To exit program: type '4'")
    print ("-------------------------")
    return input ("Choose your option: ")

def addmenu():
    additem = input("Name of list item: ")
    firstlist.append(additem)
    print (additem, "has been appended")

def checkmenu():
    printthis = input("What are you looking for?: ")
    if printthis in firstlist:
        print ("is in the list")
    else:
        print ("is not in the list")

def listlist():
    print (firstlist[1])

# Perform action
loop = 1
choice = 0
while loop == 1:
    choice = int(menu())
    if choice == 1:
        addmenu()
    elif choice == 2:
        checkmenu()
    elif choice == 3:
        listlist()
    elif choice == 4:
        loop = 0
    elif (choice > 4):
        print ("You made an incoorect selection") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T16:27:32.840

示例中有多个错误，让我们逐一分析。首先，如果你想要一个列表，那么你需要这样定义它，即：

```
l = ['joe'] # this is a list
s = {'joe'} # this is a set 
```

现在，由于您使用的是 Python 2 ，因此始终建议使用`raw_input`. `input`后者将应用于`eval`获得的字符串，因此它将输入作为 Python 代码进行评估。出于安全原因，您通常不希望这样做（我知道这是一个示例）。所以，让我们将每个更改`input`为`raw_input`. 现在的问题是，在使用 时输入表示数字`eval`的字符串，实际上会将字符串转换为数字。现在你需要做同样的事情，但是使用`raw_input`. 由于您的选项仅限于整数值，因此解决方案是`int(raw_input())`.

第三个问题与`has_key`. 如果使用的对象是 a`set`或 a `list`，则没有`has_key`为它们定义这样的方法。如果有问题的对象是 a ，那将起作用`dict`，但事实并非如此。检查给定代码中包含的正确方法是`something in A`. 在使用时执行此操作`set`比在使用时更有效`list`，并且代码保持不变（除非您需要更改`append`为`add`）。

你现在可以调整你的代码吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T16:30:00.080

使用 firstlist，您将列表的概念和字典的概念混合在一起。看起来你只是想要一个列表......

```
firstlist = ['Joe'] 
```

另外，不要使用 has_key，而是写

```
if printthis in firstlist: 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T18:12:27.047

```
#create empty list and define variables
firstlist = {}
additem = ""
printthis = ""
removeitem = ""
#create menu, add, remove or check name
def menu():
    print "Add to list: type '1'"
    print "Remove from the list: type '2'"
    print "Check for name: type '3'"
    print "To exit program: type '4'"
    return input("Choose your option: ")
def addmenu():
    additem = raw_input("Name of list item: ")
    firstlist[additem] = additem
    print additem, "has been appended"
def removemenu():
    removeitem = raw_input("Name of list item: ")
    firstlist.pop(removeitem)
    print removeitem, " has been removed"
def checkmenu():
    printthis = raw_input("What are you looking for?: ")
    if firstlist.has_key(printthis):
        print printthis, " is in the list"
    else:
        print printthis, " is not in the list"

# Perform action
loop = 1
choice = 0
while loop == 1:
    choice = menu()
    if choice == 1:
        addmenu()
    elif choice == 2:
        removemenu()
    elif choice == 3:
        checkmenu()
    elif choice == 4:
        loop = 0
    elif choice > 4:
        print "You made an incorrect selection" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T17:57:42.030

# @Ricky Mason：我对代码做了一些修改。在这里，您需要一个 dict 对象，而不是一个集合或列表。dict 对象#since 有一个键值对将很容易检索您在检查菜单中查找的值，同时 #time 您也可以从列表中删除值。我希望这有帮助。随时发布有关相同的任何进一步查询。

这是以下回复中的代码

# objective-c - 在 Windows 中运行 Objective C（通过 XCode 制作）

> ID：13766738
> 
> 赞同：2
> 
> 时间：2012-12-07T16:08:51.423
> 
> 标签：objective-c, xcode, windows, macos, libraries

我正在考虑在 Mac 上学习一些 Objective C（我的 IDE 将是 xcode）。我想知道 xcode 是否使用任何仅限 Mac 的库，因为我希望能够发布我在 Windows 中制作的东西？

简短版：我可以在 Windows 中的 xcode 上使用用目标 c 编写的项目吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T16:14:28.620

简短的回答：没有。

您可以使用一些工具和库来在 Windows 上运行 Obj-C。Cocoa 是 Apple 的库集合，不能在 Windows 上运行，但 GNUStep 和 Cocotron 是您可以使用的替代品。它们不具备 Cocoa 的所有功能。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-07T16:13:16.173

好。Objective-C 本质上是一种 Apple 独有的编程语言。因此，大多数 Objective-C 程序只能在 OS X 和 iOS 上执行。也就是说，有一些方法可以将 Objective-C 应用程序移植到 Windows，但这很可能不值得你花时间。如果你想移植，你可以看到 cocotron。现在，您可以在 Windows 上编程，但您仍然需要在 OS X 上执行您的应用程序。

总之，您可能不应该使用 Objective-C 和 Xcode 来制作 Windows 应用程序。如果您不想进行重新编码的工作，我建议您使用 Java，因为它是一种跨平台语言。祝你好运。

# javascript - 使用 jquery 函数 html() 在 td 中插入图像

> ID：13766742
> 
> 赞同：0
> 
> 时间：2012-12-07T16:09:04.700
> 
> 标签：javascript, jquery, html, symfony

我正在尝试使用 html() JQuery 函数将图像插入 td 行（请参阅[http://jsfiddle.net/R5q68/](http://jsfiddle.net/R5q68/)）。

问题是图像不显示。当我分析我的 td 时，似乎没有斜线来关闭 img 标签。

我正在使用 symfony2 和资产，这就是为什么我的图片链接是这样的。

```
<img src="{{ asset('bundles/sciforumversion2/images/design/new/submission/element_up.png') }}"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T16:10:19.427

您不能使用 jQuery 构建这样的字符串，因为 jQUery 是在客户端执行的，而 symfony2 是在服务器端执行的。

该字符串`"{{ asset('bundles/scif..."`需要由服务器解释，但在执行 jQuery 时为时已晚。您无法构建资产模板客户端。

你可以做的是插入一些标准的 HTML：

```
 td.html('<img src=http://dystroy.org/re7210/img/tartare-saumon-creme-salade-harengs-pommes-de-terre-800.jpg">');​ 
```

但是如果你用一个简单的 var 构建你的字符串

```
var image_src = "{{asset('bundles/sciforumversion2/images/design/new/submission/element_up.png')}}";

td.html('<img src="'+image_src+'">'); 
```

并且您已经执行了 symfony（即，不在 jsfiddle 中执行此操作），那么它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T13:48:05.397

我找到了一个解决方案：我必须使用图像路径创建一个全局 JavaScript 变量：

```
<script>
    var arrow_down = "{{ asset('bundles/mybundle/images/menu_down.png') }}";
</script> 
```

通过这条路径，我可以设置图像资产：

```
goes_down_td.html('<img src="'+arrow_down+'"/>'); 
```

它已经完成了。享受。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-07T16:17:35.633

检查你的图像路径并试试这个：

```
 var td = $('#test');
    img_src= '<img src="../bundles/sciforumversion2/images/design/new/submission/element_up.png" id="td_img" />;
    td.innerhtml(img_src); 
```

# facebook - facebook 图形 api 身份验证错误

> ID：13766747
> 
> 赞同：0
> 
> 时间：2012-12-07T16:09:29.707
> 
> 标签：facebook, facebook-graph-api

在我的网站中，我想使用 fb graph api。我写下一个代码

```
require_once 'facebook.php';
$fb = new Facebook(array(
'appId'  => ID,
'secret' => SECRET,
'cookie' => true
));

$user = $fb->getUser();

if($user) {
} else {
$params = array(
'scope' => 'publish_stream,,offline_access',
'fbconnect' => 1,
'redirect_uri' => 'http://'.$_SERVER['HTTP_HOST'] . $_SERVER['REQUEST_URI']
);
$url = $fb->getLoginUrl($params);

header("Location: $url");
exit();
} 
```

但是在第一次打开页面后，此代码请求访问我的应用程序，然后一次又一次地尝试获取用户。当我尝试做

```
try {
$ret_obj = $fb->api('/me');
} catch(FacebookApiException $e) {
print_r($e)
} 
```

我看到错误“必须使用活动访问令牌来查询有关当前用户的信息”。

有人知道错误在哪里吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T16:19:05.510

这是一个错误，请参阅：[facebook 访问令牌仅在一个页面上工作，](http://facebook.stackoverflow.com/questions/13745707/)昨晚已修复，因此更新您的 facebook api，您应该会很好。此外，您的范围内还有两个 ,,。它可能仍然有效，但我仍然会删除一个。

# c++ - 没有发出下载进度和完成信号？

> ID：13766748
> 
> 赞同：1
> 
> 时间：2012-12-07T16:09:40.100
> 
> 标签：c++, qt

我已经准备好我认为正确的代码来处理从我的 web 应用程序下载，但由于某种原因没有发出 downloadProgress 和 finished 信号并且没有调用相关插槽？

**更新：**我添加了`reply = manager.get(QNetworkRequest(url);`，但我不确定如何获取请求 URL，因为它不是标准 URL，它只是一个“#”，因为 PHP 生成了文件？

```
void MainWindow::unsupportedContent(QNetworkReply *reply) {

    qDebug() << "Left click - download!";
    qDebug() << "Bytes to download: " << reply->bytesAvailable();

    QString str = reply->rawHeader("Content-Disposition");

    QString end = str.mid(21);
    end.chop(1);

    qDebug() << "File name: " << end;
    qDebug() << "File type: " << reply->rawHeader("Content-Type");
    qDebug() << "File size (bytes): " << reply->bytesAvailable();
    QString defaultFileName = QFileInfo(end).fileName();
    QString fileName = QFileDialog::getSaveFileName(this, tr("Save File"), defaultFileName);
    if (fileName.isEmpty()) return;

    file = new QFile(fileName);
    if(!file->open(QIODevice::WriteOnly))
    {
        QMessageBox::information(this, "Downloader",
            tr("Unable to save the file %1: %2.")
            .arg(fileName).arg(file->errorString()));
        delete file;
        file = NULL;
        return;
    }

    downloadRequestAborted = false;

    connect(reply, SIGNAL(finished()), this, SLOT(downloadFinished()));
        connect(reply, SIGNAL(readyRead()), this, SLOT(downloadReadyRead()));
        connect(reply, SIGNAL(downloadProgress(qint64,qint64)), this, SLOT(downloadProgress(qint64,qint64)));
        connect(progressDialog, SIGNAL(canceled()), this, SLOT(cancelDownload()));
        progressDialog->setLabelText(tr("Downloading %1...").arg(fileName));
        //downloadButton->setEnabled(false);
        progressDialog->exec();

    //QFile file(fileName);
    //file.open( QIODevice::WriteOnly );
    //file.write(reply->read(reply->bytesAvailable()));
    //file.close();
}

void MainWindow::downloadProgress(qint64 bytesReceived, qint64 bytesTotal)
{
    qDebug() << bytesReceived << bytesTotal;
    if(downloadRequestAborted)
        return;
    progressDialog->setMaximum(bytesTotal);
    progressDialog->setValue(bytesReceived);
}

void MainWindow::downloadReadyRead()
{
    if(file)
        file->write(reply->read(reply->bytesAvailable()));
}

void MainWindow::downloadFinished()
{
    qDebug() << "Download finished!";
    if(downloadRequestAborted)
    {
        if(file)
        {
            file->close();
            file->remove();
            delete file;
            file = NULL;
        }
        reply->deleteLater();
        progressDialog->hide();
        //downloadButton->setEnabled(true);
        return;
    }

    downloadReadyRead();
    progressDialog->hide();
    //downloadButton->setEnabled(true);
    file->flush();
    file->close();

    if(reply->error())
    {
        //Download failed
        QMessageBox::information(this, "Download failed", tr("Failed: %1").arg(reply->errorString()));
    }

    reply->deleteLater();
    reply = NULL;
    delete file;
    file = NULL;
}

void MainWindow::cancelDownload()
{
    downloadRequestAborted = true;
    reply->abort();
    progressDialog->hide();
    //downloadButton->setEnabled(true);
} 
```

# java - 确保在 logback 中的应用程序关闭之前发送错误 SMTP

> ID：13766750
> 
> 赞同：1
> 
> 时间：2012-12-07T16:10:00.677
> 
> 标签：java, logging, logback, smtpappender

在 logback 中，SMTP 是异步发送的（显然应该如此），但是在我的测试中，如果应用程序关闭，这些电子邮件似乎会被取消。这非常不好，因为我需要通知我我的应用程序遇到了致命错误 - 这实际上是最糟糕的不接收电子邮件的时间。这该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T20:32:19.630

通过同步发送高级、重要的电子邮件而不是在单独的守护线程上实现这一点，logback 正确地默认执行。

在附加程序中：

```
 <asynchronousSending>false</asynchronousSending> 
```

# ruby-on-rails - 选择从表中填充的框

> ID：13766752
> 
> 赞同：0
> 
> 时间：2012-12-07T16:10:13.840
> 
> 标签：ruby-on-rails, ruby-on-rails-3, drop-down-menu, html-table, auto-populate

我目前有一个由几个选择框和两个单选按钮排序/过滤的表格，它工作正常。我会从表中自动填充选择框。具体来说，我想要一个从我的文章表中的州填充的州选择框。我目前有一个articles.rb 模型和state.rb 模型，并且我已经建立了关系。文章属于_to：状态，状态has_many：文章。到目前为止，这是我的代码：

**index.html.erb**

```
<%= form_tag articles_path, :method => "GET" do %>

  <%= radio_button_tag :gender_search, "M" %>
  <%= label_tag :gender_search_M, "M" %>
  <%= radio_button_tag :gender_search, "F" %>
  <%= label_tag :gender_search_F, "F" %>

  <%= select_tag :state_search, options_for_select([['Select a state', 0],['-----------', 0],['LA', 'LA'],['MS', 'MS'], ['TX', 'TX']], @prev_state) %>
  <%= select_tag :city_search, options_for_select([['Select a city', 0],['----------', 0],['Mandeville', 'Mandeville'],['Covington', 'Covington']], @prev_city) %>

  <%= submit_tag "Go" %>

<% end %>
<table class="table table-striped table-bordered span8 table-condensed" id="articles_table">
  <thead class="header">
    <tr>
      <th>ID</th>
      <th>Title</th>
      <th>Description</th>
      <th>Created_At</th>
    </tr>
  </thead>
  <tbody>
    <%= render @articles %>
  </tbody>
</table> 
```

**_article.html.erb**

```
<tr>
  <td> <%= article_counter +1 %> </td>
  <td> <%= article.Title %> </td>
  <td> <%= article.Description %> </td>
  <td> <%= article.Created_At %> </td>
</tr> 
```

**文章.rb**

```
class Article < ActiveRecord::Base
  belongs_to :state

def self.city_search(city_search)
    if city_search
      where('City LIKE ?', "%#{city_search}%")
    else
      scoped
    end
end
def self.state_search(state_search)
    if state_search
      where('State LIKE ?', "%#{state_search}%")
    else
      scoped
    end
end 
```

如果我需要发布更多代码或更多信息，请告诉我。任何可以帮助我的东西都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T16:28:53.027

值得一看

[http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html)

我认为对于州你可以做类似的事情

```
<%= collection_select :state_id, State.all, :id, :name, multiple: true, :prompt => "Please Select" %> 
```

现在这可能不准确，但它是我在我的应用程序中的操作方式和它的工作原理（尽管是国家而不是州）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T15:40:33.550

看了这个网站后： http: [//apidock.com/rails/ActionView/Helpers/FormOptionsHelper/collection_select](http://apidock.com/rails/ActionView/Helpers/FormOptionsHelper/collection_select)

我发现我实际上不需要为州和市设置模型。我需要做的就是创建一个 collection_select，从我的 Articles 表中选择 Distinct States。这是它的样子：

```
<%= collection_select :article, :state, Article.select(:state).uniq.order('state ASC'), :state, :state, {:prompt => 'Select a State'},{:name => "state_search"} %> 
```

所以我所要做的就是像网站说的那样设置collection_select，并添加**Article.select(:state).uniq.order('state ASC')**作为我的集合，以便从我的Articles 表中选择uniq 状态。

# php - 如何在 jQuery .load() 脚本中使用 PHP 变量？

> ID：13766755
> 
> 赞同：0
> 
> 时间：2012-12-07T16:10:21.320
> 
> 标签：php, jquery

我有这个带有`.load()`函数的jQuery脚本，这个脚本保存在名为`header.php`：

```
$(document).ready(function() {
    $('.my-wrapper').find(".wrapper-area").append('<div class="loadergif"></div>').load("file001.php?key=XXXXXX", function() {
    $(this).find('.wrapper-area').remove('.loadergif');
    var $container = $('.list-wrap');

    $container.imagesLoaded( function(){
        $container.masonry({
        itemSelector : '.my-wrapper'
        });
    });
}); 
```

另一方面，我在名为 body.php 的文件中有这个 PHP 变量：

```
while($row = mysql_fetch_array($result)){
    $Key = $row['key'];
    echo '<div class="wrapper-area">';
       //jQuery script will produce something here             
    echo '</div><!-- .wrapper-area -->';
} 
```

现在的问题是如何将 PHP 文件中的 $Key 变成 jQuery 脚本的 XXXXXX 部分：' `file001.php?key=XXXXXX`'

请注意 $Key 是从 WHILE 循环动态生成的。意思是，每个循环周期都有不同的值。

谢谢之前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T16:17:47.187

在 PHP 中，替换您的以下行：

```
echo '<div class="wrapper-area">'; 
```

对于这个：

```
echo '<div class="wrapper-area" data-key="'.$Key.'">'; 
```

在 jQuery 中，替换以下行：

```
$('.my-wrapper').find(".wrapper-area").append('<div class="loadergif"></div>').load("file001.php?key=XXXXXX", function() { 
```

对于这个：

```
$('.my-wrapper').find(".wrapper-area").each(function() {
   $(this).append('<div class="loadergif"></div>').load("file001.php?key"+$(this).data('key'), function() {
    ...
    ...
}); //close the each() call
}); //close document.ready() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T16:14:45.860

您的问题不太清楚，但我认为您想将负载线更改为此-

```
.load("file001.php", {key:XXXXXX}, function() { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T16:17:03.627

你可以试试这个来构建包装器：

```
while ($row = mysql_fetch_assoc($result))
{

  echo '<div class="wrapper-area" data-key="' . $row['key'] . '">';

  // ...

} 
```

这对于 jQuery：

```
$(function()
{

  $('.my-wrapper').find('.wrapper_area').each(function()
  {

    $(this).append('<div class="loadergif"></div>').load('file001.php?key=' + $(this).attr('data-key'), function()
    {
      // ...
    }
    )

  }
  )

}
) 
```

# mysql - 将列拆分为行，而不是经典的枢轴

> ID：13766756
> 
> 赞同：0
> 
> 时间：2012-12-07T16:10:25.390
> 
> 标签：mysql

**编辑：**问[元](https://meta.stackexchange.com/q/157966/192104)并决定修改我的问题，以粗体添加新内容。

我有以下查询，可以找到重叠的时间段：

```
SELECT t1.id1, t2.id1
  FROM `mytable` AS t1
  JOIN `mytable` AS t2
    ON (
        ((t1.start_date BETWEEN t2.start_date AND t2.end_date))
        OR ((t1.end_date BETWEEN t2.start_date AND t2.end_date))
       )
 WHERE t1.id1 < t2.id1; 
```

结果集是：

```
id1    id1
 6      7
 8      9
 5      11
 10     12 
```

我需要以下结果，只需将所有值添加到单个列上，**然后添加一列以显示成对的行，以便稍后我可以[在此处](https://stackoverflow.com/q/13766173/1297603)**使用该结果。应该很简单，但我无法让它工作。

```
col    pair_id
 6       1
 8       2
 5       3
 10      4
 7       1
 9       2
 11      3
 12      4 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T16:14:14.737

这是 sql 中称为“联合”的标准功能。查看您正在使用的数据库系统的文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T16:15:51.490

不确定这是否可行，但请尝试：

```
SELECT t1.id1
... snip ...
WHERE t1.id1 != t2.id1; 
```

这只是明确排除了自我重叠，并允许“7”记录显示为“6”上的重叠（根据您的示例结果）。

# objective-c - 更新 UITableViewDelegate 不在绘制

> ID：13766759
> 
> 赞同：0
> 
> 时间：2012-12-07T16:10:32.177
> 
> 标签：objective-c, ios, uitableview

我有一个类定义如下：

```
@interface ClassViewController : ContentViewController <UITableViewDelegate,
UITableViewDataSource> {
    IBOutlet UITableView* mTableView;
    NSMutableArray *feeds;
    NSMutableData *responseData;
}
@property (nonatomic, retain) UITableView* mTableView;
@property (nonatomic, strong) NSMutableArray* feeds;
@property (nonatomic, strong) NSMutableData* responseData; 
```

我正在尝试在 JSON 请求后加载内容。但是，在我操作屏幕（例如，向下滚动）之前，表格不会更新为新内容。

我用`[self->mTableView reloadData];`了没有效果。此外，在：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section 
```

我正在设置：

```
self.mTableView = tableView; 
```

否则结果根本不会传播到表中。

有什么我遗漏的东西，还是应该将该`self.mTableView`定义放在其他地方？

我是 Objective-C 和 iOS 开发的新手，所以如果我遗漏了什么，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T16:50:50.817

你应该：

(1)`mTableView`在 Interface Builder 中连接到表视图对象。

(2) 请注意，您可以只使用属性表示法`self.mTableView`而不是`self->mTableView`.

(1) 将解决您的问题。（2）只是一个风格问题（主要）。

![在此处输入图像描述](../Images/b41de7a59cd0a49712a82b52451e51f0.png)

# python - 谷歌应用引擎和谷歌云 sql 上的 Flask SqlAlchemy

> ID：13766760
> 
> 赞同：2
> 
> 时间：2012-12-07T16:10:38.903
> 
> 标签：python, google-app-engine, sqlalchemy, flask, google-cloud-sql

任何 python 示例线程，让初学者开始使用带有烧瓶和 sql 炼金术的谷歌应用引擎来访问谷歌云 sql？尤其是从配置的角度来看！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T22:19:29.373

在 SO 上回答的问题： [SQLAlchemy 可以与 Google Cloud SQL 一起使用吗？](https://stackoverflow.com/questions/10763171/can-sqlalchemy-be-used-with-google-cloud-sql)

SQLAlchemy 文档： [http ://docs.sqlalchemy.org/en/rel_0_7/dialects/mysql.html#module-sqlalchemy.dialects.mysql.gaerdbms](http://docs.sqlalchemy.org/en/rel_0_7/dialects/mysql.html#module-sqlalchemy.dialects.mysql.gaerdbms)

# flyway - Flyway servlet 初始化

> ID：13766761
> 
> 赞同：2
> 
> 时间：2012-12-07T16:10:41.553
> 
> 标签：flyway

Liquibase 有一个 servlet 选项来初始化数据库。[http://liquibase.org/manual/servlet_listener](http://liquibase.org/manual/servlet_listener)

Flyway有这样的例子吗？或者，更好的工作 servlet？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T09:58:40.650

你真正想要的是`flyway.migrate()`在启动时运行。这可以通过多种方式来实现，Servlet 监听器就是其中之一。

没有开箱即用的 servlet 侦听器，但您可以自己动手制作。

它应该看起来像这样：

```
@WebListener
public class FlywayListener implements ServletContextListener {

    public void contextInitialized(ServletContextEvent sce) {
        Flyway flyway = new Flyway();
        flyway.setDataSource(...);
        flyway.migrate();
    }

    public void contextDestroyed(ServletContextEvent sce) {
    }
} 
```

在第一个 servlet（或过滤器）调用[之前和最后一次调用](http://docs.oracle.com/javaee/7/api/javax/servlet/ServletContextListener.html#contextInitialized-javax.servlet.ServletContextEvent-)[之后](http://docs.oracle.com/javaee/7/api/javax/servlet/ServletContextListener.html#contextDestroyed-javax.servlet.ServletContextEvent-)调用实现该[`ServletContextListener`](http://docs.oracle.com/javaee/7/api/javax/servlet/ServletContextListener.html)接口的类。注释是通知您的 Servlet 容器您的预期侦听器的一种方式。有关详细信息，请参阅[此 Oracle 教程](http://docs.oracle.com/javaee/6/tutorial/doc/bnafi.html)并[搜索 Stack Overflow](https://stackoverflow.com/search?q=ServletContextListener)。[`@WebListener`](http://docs.oracle.com/javaee/7/api/javax/servlet/annotation/WebListener.html)

# c++ - 是否有可能 - 在 Win7 上使用设备而不是模拟器进行 Win Phone 8 开发

> ID：13766763
> 
> 赞同：0
> 
> 时间：2012-12-07T16:10:45.297
> 
> 标签：c++, windows-phone-8

有人可以建议是否可以使用该设备而不是模拟器在 Windows 7 操作系统上为 Windows phone 8 进行开发。

我将为该平台进行 C++ 开发。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T02:06:23.593

根本不可能，因为安装程序不会运行

系统要求[如下](http://www.microsoft.com/visualstudio/eng/products/visual-studio-express-for-windows-phone#product-express-phone-requirements)

**支持的操作系统**

*   视窗 8 (x64)

**支持的架构**

*   64 位 (x64)

**硬件要求**

*   1.6 GHz 或更快的处理器
*   4 GB 内存
*   4 GB 可用硬盘空间

**Windows Phone 8 模拟器**

*   Windows 8 专业版或更高版本
*   需要支持二级地址转换 (SLAT) 的处理器

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-07T16:35:32.430

您无法在 Windows 7 上安装所需的 SDK。您需要 Windows 8 才能安装带电话支持的 VS2012。如果您不需要模拟器，请在 VM 中运行 Win8。它运行得非常顺利。我为我设置了这个，效果很好。甚至部署到 WP8 设备和调试。

但是您很可能无法运行 WP8 模拟器，因为它是需要 Intel VT 和 Win8 Pro 存在的 Hyper-V 机器。我无法设置虚拟机将这些功能传递给托管的 Win8 实例。但是，如果您对设备很好，请试一试。我在 VMWare 播放器中运行它。但是虚拟盒子也应该可以。

# php - 试图从 sql 字段设置 php 变量

> ID：13766764
> 
> 赞同：0
> 
> 时间：2012-12-07T16:10:59.790
> 
> 标签：php, flourishlib

如果 SortingMethodId 等于 3、6 或 7，则尝试设置 show_hours 为 true 的变量。现在仅当 SortingMethodId 等于 3 时（来自 MySQL db），如下所示：

```
$this->data["show_hours"] = ($company->getSortingMethodId() == 3); 
```

所以我尝试了：

```
$this->data["show_hours"] = ($company->getSortingMethodId() == 3 OR == 6 OR == 7); 
```

并且只返回一个错误....想法？我只是一个试图在我们的应用程序中散列一些现有代码的初学者，所以要简单:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T16:12:00.100

尝试：

```
$sortingMethodId = $company->getSortingMethodId();
$this->data["show_hours"] = ($sortingMethodId == 3 || $sortingMethodId == 6 || $sortingMethodId == 7); 
```

您必须重复 var。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T16:15:31.507

也许你可以尝试类似...

```
$sortingMethodId = $company->getSortingMethodId();
$this->data["show_hours"] = $sortingMethodId == 3 ? true : ($sortingMethodId == 5 ? true : ($sortingMethodId == 7 ? true : false)); 
```

# javascript - chrome 检查器中有没有办法生成 dom 选择器

> ID：13766765
> 
> 赞同：1
> 
> 时间：2012-12-07T16:11:07.030
> 
> 标签：javascript, asp.net, google-chrome

我是否可以为要在 javascript 中操作的 html 类生成选择器语句。但是，当我尝试 top.$find('.specific_class'); 时，我看到该类存在 它返回 null 这让我相信我使用了不正确的 select 语句。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T16:26:17.840

您可以使用以下方法测试选择器是否存在`.length`- 例如：

```
if($(".specific_class").length){
    //$(".specific_class") definitely exists, so now you can do something like:
    $(".specific_class").find(function(){
        //code
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T16:13:08.593

您的 JQuery 选择器格式不正确。

尝试以下操作：

```
$(".specific_class").find(function(){                  

       // do your code here with this instance of the found .specific_class $(this)

       // get this items ID
       var id = $(this).attr("id");

}); 
```

# ios - 在 Safari 中打开应用程序页面

> ID：13766766
> 
> 赞同：0
> 
> 时间：2012-12-07T16:11:19.150
> 
> 标签：ios, facebook, facebook-apps, facebook-page

是否可以在 Safari 中从 iOS 打开应用程序页面？

当我尝试打开以下页面时，我被重定向到“**您可能喜欢的页面”页面**上的移动版 Facebook

```
[[UIApplication sharedApplication] openURL:
    [NSURL URLWithString:@"https://www.facebook.com/pages/Appinion/130580070430657"]]; 
```

我很乐意重定向到该网站的完整版本；我试过追加`?m2w`没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T16:16:05.657

通常，我通过一些实验几乎立即找到了答案

移动版页面的 URL 格式为：

```
https://m.facebook.com/pages/<APP_NAME>/<APP_ID>?id=<APP_ID>#!/profile.php?id=<APP_ID> 
```

我想这可以缩短..

# html - Soundcloud 播放器“Stratus”未出现

> ID：13766768
> 
> 赞同：0
> 
> 时间：2012-12-07T16:11:21.163
> 
> 标签：html, css, soundcloud

我已经尝试使用 Soundcloud 刚刚推出的这个新功能，基本上是您网站底部/顶部的一个小型迷你播放器。说明在这里：[http://stratus.sc](http://stratus.sc)，我遵循但该玩家拒绝出现。

**HTML**

```
<head>
<title>About</title>

<link rel="stylesheet" href="css/bootstrap.min.css" type="text/css" media="screen" />
<script type="text/javascript" src="js/jquery-1.8.3.min.js"></script>
<script type="text/javascript" src="js/bootstrap.min.js"></script>
<script type="text/javascript" src="http://www.stratus.sc/stratus.js"></script>
<script type="text/javascript">
$(document).ready(function(){
 $.stratus({
   links: 'http://soundcloud.com/wearelisten/listen_2'
 });
});
</script>  

</head> 
```

是的，我没有使用将在脚本类型部分中使用的[http://stratus.sc/stratus.js](http://stratus.sc/stratus.js)，而是打开了页面，将其复制粘贴到一个新的 .js 文件中，因为这实际上不是托管，这只是一个学校项目。我是否必须制作`div`某种东西才能让玩家出现？根据他们的网站，您唯一需要做的就是下载 jQuery（我已经完成）并将脚本添加到`<head>`部件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-08T01:28:10.337

我认为您需要降级您的 jQuery 版本。不幸的是，这与大于 jQuery 的版本不兼容`1.7.2`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T16:19:13.347

检查`stratus.js`文件后，我注意到里面有一些指向其他文件的静态链接

其中之一是`/player`您的 js 传递播放链接和设置对象的页面，因此在其他问题中您无法在本地使用播放器。

# web-services - WSDL w。复杂类型和 Mathematica 8

> ID：13766775
> 
> 赞同：3
> 
> 时间：2012-12-07T16:11:49.593
> 
> 标签：web-services, soap, wsdl, wolfram-mathematica, mathematica-8

我正在尝试让 Mathematica 8 使用我设置的网络服务。但是它拒绝并引发以下错误：

```
InstallService::typeschema: "The type schema cannot be found for ("xsd:ArrayOfString")." 
```

WSDL 验证并与其他客户端一起工作，因为它应该：

```
<?xml version="1.0" encoding="UTF-8"?>
<definitions name="TickdataService"
    targetNamespace="http://myserver.com/myWebService.wsdl"
    xmlns="http://schemas.xmlsoap.org/wsdl/"
    xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"
    xmlns:tns="http://myserver.com/myWebService.wsdl"
    xmlns:xsd="http://www.w3.org/2001/XMLSchema">

    <types>
        <schema xmlns="http://www.w3.org/2001/XMLSchema"
            targetNamespace="http://myserver.com/myWebService.wsdl"
            xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/"
            xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">

            <xsd:complexType name="ArrayOfString">
                <xsd:complexContent>
                    <xsd:restriction base="soapenc:Array">
                        <attribute ref="soapenc:arrayType"
                        wsdl:arrayType="string[]"/>
                    </xsd:restriction>
                </xsd:complexContent>
            </xsd:complexType>
            <xsd:complexType name="ArrayOfDouble">
                <xsd:complexContent>
                    <xsd:restriction base="soapenc:Array">
                        <attribute ref="soapenc:arrayType"
                        wsdl:arrayType="xsd:double[]"/>
                    </xsd:restriction>
                </xsd:complexContent>
            </xsd:complexType>
        </schema>
    </types>

    <message name="TickdataRequest">
        <part name="broker" type="xsd:string"/>
        <part name="type" type="xsd:string"/>
        <part name="startdate" type="xsd:string"/>
        <part name="enddate" type="xsd:string"/>
    </message>

    <message name="TickdataResponse">
        <part name="tick_list" type="xsd:ArrayOfString"/>
    </message>

    <portType name="Tickdata_PortType">
        <operation name="getTickList">
            <input message="tns:TickdataRequest"/>
            <output message="tns:TickdataResponse"/>
        </operation>
    </portType>

    <binding name="Tickdata_Binding" type="tns:Tickdata_PortType">
        <soap:binding style="rpc" transport="http://schemas.xmlsoap.org/soap/http"/>
        <operation name="getTickList">
            <soap:operation soapAction="urn:myWebService"/>
            <input>
                <soap:body
                encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"
                namespace="urn:myWebService"
                use="encoded"/>
            </input>
            <output>
                <soap:body
                encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"
                namespace="urn:myWebService" use="encoded"/>
            </output>
        </operation>
    </binding>

    <service name="Tickdata_Service">
        <port name="Tickdata_Port" binding="tns:Tickdata_Binding">
            <soap:address location="http://myserver.com/webservice.php"/>
        </port>
    </service>
</definitions> 
```

这是我的 Mathematica 笔记本：

```
<<Webservices`

InstallService["http://myserver.com/myWebService.wsdl"] 
```

有谁知道问题可能是什么？我非常感谢任何方向的任何提示:) 提前谢谢你！

# ruby - Ruby 需要文件（不是文件）

> ID：13766778
> 
> 赞同：0
> 
> 时间：2012-12-07T16:12:01.913
> 
> 标签：ruby, file, encryption

我有一个加密文件`file = File.new("encrypted.file", "r")`，我想在解密后在 Ruby 中使用它。我不想解密、保存、要求和删除文件。

我现在要做的是：

```
str=""
file.each do |line|
     str+=line
end#do

str = doSomeDecryption(str) 
```

我想以`require str`某种方式。有任何想法吗？`eval(str)`不是一种选择；它确实必须是“需要的”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T18:30:34.950

严格来说，require 不是加载文件，而是加载资源；使用正确的 Kernel#require 重载，您几乎可以做任何事情。有些人制作了使用 open-uri 从远程服务器加载代码的版本。如果你想在纯 Ruby 中实现它，你需要使用`eval`. 有关其实现，请参见 http_require (https://github.com/astrails/http_require)。

如果您想将此作为扩展来实现，您可能能够减少潜在的攻击面，但您仍将实现 save-to-disk-then-require 或`eval`. （严格来说，虽然我现在无法在解释器中找到代码，但`require`它本身本质上是一个`eval`.）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T16:17:59.617

是不是有一个邪恶的 eval :) 我不推荐使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T19:48:53.707

已经有各种库可以做到这一点：

*   `require`自动激活 Gems 的RubyGems 补丁
*   OCRA、Crate 和朋友补丁从加密的 SQLite 数据库等中`require`的列加载。`TEXT`

你可以在那里寻找他们如何解决这个问题。

Ruby 2.0 将有一个 API，允许您注册处理程序以挂钩到`require`进程中。

# python - 通过 Python 可以达到的最高时间精度是多少？

> ID：13766779
> 
> 赞同：0
> 
> 时间：2012-12-07T16:12:06.233
> 
> 标签：python, time, precision

考虑一个非常简单的计时器；

```
start = time.time()
end = time.time() - start 
while(end<5):
    end = time.time() - start
    print end 
```

这个计时器有多精确？我的意思是，与实时时钟相比，它的同步性和实时性如何？

现在是真正的问题；

可以用 Python 精确测量的最小时间尺度是多少？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T16:15:43.697

这完全取决于平台。使用该[`timeit.default_timer()`功能，它将](http://docs.python.org/2/library/timeit.html#timeit.default_timer)*为您的平台*返回最精确的计时器。

从文档中：

> 以特定于平台的方式定义默认计时器。在 Windows 上，`time.clock()`具有微秒粒度，但`time.time()`的粒度是 1/60 秒。在 Unix 上，`time.clock()`具有 1/100 秒的粒度，并且`time.time()`更加精确。

因此，在 Windows 上，您可以获得微秒，在 Unix 上，您将获得平台可以提供的任何精度，*通常*（远）优于 1/100 秒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T16:16:02.893

这完全取决于您运行它的系统 - 不能保证 Python 有任何跟踪时间的方式。

也就是说，假设您将在现代系统上获得毫秒精度是非常安全的，除此之外，它确实高度依赖于系统。引用[文档](http://docs.python.org/3/library/time.html)：

> 尽管此模块始终可用，但并非所有功能都适用于所有平台。该模块中定义的大部分函数都调用同名的平台 C 库函数。有时查阅平台文档可能会有所帮助，因为这些函数的语义因平台而异。

和：

> 各种实时函数的精度可能低于表达它们的值或参数的单位所建议的精度。例如，在大多数 Unix 系统上，时钟每秒只“滴答”50 或 100 次。

# web-services - AppEngine、REST 和服务器请求

> ID：13766780
> 
> 赞同：0
> 
> 时间：2012-12-07T16:12:07.640
> 
> 标签：web-services, google-app-engine, rest, optimization, request

我最近接手了一个项目，其中涉及 iOS 应用程序连接到 Restful Web 服务以发送和检索数据，我发现自己在服务器性能方面遇到了困难。

由于它是 RESTful，因此可以从不同的 URI 端点访问不同类型的数据。当用户第一次登录应用程序时（忽略注册部分），客户端必须下载该用户的所有数据。由于数据位于不同的端点，客户端向每个端点发出请求，导致向同一服务器发出许多请求以获取所有数据。

我的问题...这是一个健全的架构吗？服务器最终处理许多请求只是为了获取单个用户的数据。一个请求返回所有用户的数据不是更谨慎吗？服务器是 appengine，我正在尝试更有效地使用它的免费配额。

提前感谢您的任何见解！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T19:46:36.553

在不知道您的数据结构的情况下很难回答。

如果您在这 6-7 个请求中重新查询相同的实体，这是一个坏主意。如果您要查询不同的实体，则将其组合到一个查询中不会有显着差异。

拥有多个请求还可以让您的 UI “感觉”更具响应性，因为用户看到页面随着结果的出现而更新。对于单个请求，用户将只是等待整个请求完成。

听起来，创建该项目的人最初决定通过分离对不同类型对象的请求来保持 REST API 的简洁性。如果您想将所有与用户相关的对象统一到一个请求中，那可能是一种“更混乱”的架构。

虽然有多个请求确实有一些开销，但通常没什么大不了的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T18:30:11.587

请求时间限制为 60 秒。根据需要为单个“返回所有用户数据”请求完成的工作，这可能会起作用。

查看 Google App Engine 文档：
[https ://developers.google.com/appengine/docs/java/runtime#The_Request_Timer](https://developers.google.com/appengine/docs/java/runtime#The_Request_Timer)

# c# - 为可为空的布尔值编写代码的简洁方法

> ID：13766781
> 
> 赞同：1
> 
> 时间：2012-12-07T16:12:07.357
> 
> 标签：c#, asp.net, nullable

有没有更简洁的方法来编写这段代码。我觉得可能有，但我不知道如何。

```
 if (loadedFormData.Education.AwardedADegree==true)
    {
        this.radiobuttonNoAwarded.Checked = false;
        this.radiobuttonYesAwarded.Checked = true;
    }
    if (loadedFormData.Education.AwardedADegree == false)
    {
        this.radiobuttonNoAwarded.Checked = true;
        this.radiobuttonYesAwarded.Checked = false;
    }
    else // AwardedADegree is null
    {
        this.radiobuttonNoAwarded.Checked = false;
        this.radiobuttonYesAwarded.Checked = false;

    } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-07T16:13:42.430

问“什么时候应该`radiobutton`检查我”的问题，而不是“当我的数据为真/假/空时应该发生什么”。

```
this.radiobuttonNoAwarded.Checked = loadedFormData.Education.AwardedADegree == false;
this.radiobuttonYesAwarded.Checked =  loadedFormData.Education.AwardedADegree == true; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-07T16:15:17.997

我假设`bool?`允许该值为空。

```
this.radiobuttonNoAwarded.Checked = AwardedADegree.HasValue && AwardedADegree.Value;
this.radiobuttonYesAwarded.Checked = AwardedADegree.HasValue && !AwardedADegree.Value; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T16:24:31.353

尝试这个 ：

```
 this.radiobuttonNoAwarded.Checked = (!loadedFormData.Education.AwardedADegree) ?? false;
 this.radiobuttonYesAwarded.Checked = loadedFormData.Education.AwardedADegree ?? false; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T16:27:16.077

```
this.radiobuttonNoAwarded.Checked = (loadedFormData.Education.AwardedADegree ?? false);
this.radiobuttonYesAwarded.Checked = !(loadedFormData.Education.AwardedADegree ?? true); 
```

# c++ - C++ 的 Python 解释器

> ID：13766785
> 
> 赞同：2
> 
> 时间：2012-12-07T16:12:27.187
> 
> 标签：c++, python, c

我看到很多人展示了如何在 C++ 中使用 Python API，但是，当我包含以下内容时，似乎我还没有 API 或参考：

```
#include "Python.h" 
```

或者

```
#include <Python.h> 
```

我查看了这些网站，并提供了所有内容，除了我可以在哪里获得此参考：

*   [http://www.codeproject.com/Articles/11805/Embedding-Python-in-CC-Part-I](http://www.codeproject.com/Articles/11805/Embedding-Python-in-C-C-Part-I)
*   [http://docs.python.org/2/c-api/index.html](http://docs.python.org/2/c-api/index.html)

我已经安装了 Python 2.7，我想知道来自 python.org 的其他下载是否有我的答案。我安装了 IronPython 但没有成功。

我在哪里可以得到这个参考？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T16:55:26.370

听起来你不清楚你的编译器和链接器是如何工作的。#include 是一个预处理器指令，它将另一个文件插入到包含该语句的文件中的那个点。但是，您的编译器需要知道在哪里查找文件，因此您需要在 IDE 的包含位置列表中包含包含 Python.h 的文件夹（例如，在 Visual Studio 中，这可以在 per-项目基础，或整个 IDE），或作为操作系统中的环境变量。

如果该库是仅标头库，那么这就足够了，因为整个库都被插入到您的代码中，然后进行编译。但是，您已经指出遇到了 LINK 错误，这意味着虽然它能够在 Python.h 中找到声明，但链接器不知道在哪里可以找到已编译的定义（存储在 python27_d.h 中）。库）。因此，您还需要将该文件的位置添加到 IDE 的库位置列表中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T16:15:46.007

你可以找到它`\Python27\include\`。所以你需要设置你的包含目录让它看起来在那里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T16:52:06.627

您需要安装开发包。
在 Ubuntu 上是`python2.7-dev`

# android - Android：如何在 android 4.2 上折叠状态栏？

> ID：13766789
> 
> 赞同：8
> 
> 时间：2012-12-07T16:12:49.480
> 
> 标签：android, notifications, collapse, android-notification-bar

有没有办法在 Android 4.2 上折叠通知栏？

我使用的代码仅适用于以前的 Android 版本：

```
try{
            Object service  = c.getSystemService("statusbar");
            Class<?> statusbarManager = Class.forName("android.app.StatusBarManager");
            Method collapse = statusbarManager.getMethod("collapse");
            collapse.setAccessible(true);
            collapse.invoke(service);
        }catch(Exception ex){} 
```

请帮我...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T11:08:15.820

这很 hacky，但既然您决定走这条路，请尝试使用以下代码。

```
 if (currentApiVersion <= 16) {
            Method collapse = statusbarManager.getMethod("collapse");
            collapse.invoke(service);
        } else {
            Method collapse2 = statusbarManager.getMethod("collapsePanels");
            collapse2.invoke(service);
        } 
```

# django - 如何在 Heroku 中经济地限制使用工作进程

> ID：13766790
> 
> 赞同：0
> 
> 时间：2012-12-07T16:12:51.853
> 
> 标签：django, heroku, celery

目前，我们有一个用于学校的定制 cms 产品，它内置于 django 并通过 heroku 部署。我为我们添加的每个学校系统进行了新的部署。（我想将我的系统切换到多租户系统，但这将是一个大项目。）我最近添加了一些异步工作效果最好的功能（用于数据库密集型操作的电子邮件和异步缓存刷新）。我已经将我的后台任务编写为 celery 任务并且它们运行良好。问题是，让一个 celery worker 每天 24-7 小时运行每个应用程序将花费我 34.50/月，而实际上这些任务每天只有几分钟的非空闲时间。考虑到我目前为每个客户端使用不同实例的方式，这个成本将使使用 heroku 几乎不可行。是否有人处理过这种情况，并且可以推荐如何能够定期进行后台处理（最好使用 celery），而无需运行 24-7 工作进程。缓存刷新器需要每隔几分钟运行一次，但电子邮件程序很少运行（仅当他们向订阅者发送电子邮件时）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T17:23:55.320

如果您不需要您的员工立即参与，您可以使用[调度程序插件](https://devcenter.heroku.com/articles/scheduler)定期清除您的任务队列。

如果您需要更快的响应时间，请查看[Heroku API 的 Python 包装器。](https://github.com/heroku/heroku.py) 有了这个，您可以使用多种方法来检测何时需要运行工作程序，并动态地启动一个工作程序，并在不需要时将其重新启动。这是一项不平凡的工程任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T16:37:00.023

有趣的是，在我发布的同一天，我的 RSS 提要以博文形式回答了这个问题。

[http://heyman.info/2012/dec/6/heroku-multiple-processes-single-dyno-with-foreman/](http://heyman.info/2012/dec/6/heroku-multiple-processes-single-dyno-with-foreman/)

总之：设置你的 Procfile 来运行 Foreman，这可以在你的多个进程之间分配你的测功时间。还没有尝试过，但对于低流量或测试站点来说似乎是一种合法的方法。

# ffmpeg - 使用 FFmpeg 呈现 2 个以上的视频

> ID：13766793
> 
> 赞同：1
> 
> 时间：2012-12-07T16:12:55.360
> 
> 标签：ffmpeg

我找到了使用 Ffmpeg 组合 2 个视频的答案

```
ffmpeg.exe -i LeftInput.mp4 -vf "[in] scale=iw/2:ih/2, pad=2*iw:ih [left]; 
    movie=RightInput.mp4, scale=iw/3:ih/3, fade=out:300:30:alpha=1 [right]; 
    [left][right] overlay=main_w/2:0 [out]" -b:v 768k Output.mp4 
```

有没有办法组合2个以上？

我尝试添加`[bottom]`，`[upper]`但我无法理解叠加层的工作原理以及在哪里放置更多视频。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-08T23:40:58.977

使用 FFmpeg [hstack](http://ffmpeg.org/ffmpeg-filters.html#hstack)和[vstack](http://ffmpeg.org/ffmpeg-filters.html#vstack)过滤器：

[![在此处输入图像描述](../Images/c177c1ac8d539bb54cdfa3120d8726a3.png)](https://i.stack.imgur.com/95eFh.jpg)

```
ffmpeg -i input0 -i input1 -i input2 -i input3 -filter_complex \
"[0:v][1:v]hstack[top]; \
 [2:v][3:v]hstack[bottom]; \
 [top][bottom]vstack" \
output 
```

如果要合并音频，请添加[amerge](http://ffmpeg.org/ffmpeg-filters.html#amerge)过滤器：

```
ffmpeg -i input0 -i input1 -i input2 -i input3 -filter_complex \
"[0:v][1:v]hstack[top]; \
 [2:v][3:v]hstack[bottom]; \
 [top][bottom]vstack[v]; \
 [0:a][1:a][2:a][3:a]amerge=inputs=4[a]" \
-map "[v]" -map "[a]" -ac 2 output 
```

# oracle - PLSQL函数返回小数点前的值

> ID：13766794
> 
> 赞同：0
> 
> 时间：2012-12-07T16:12:56.830
> 
> 标签：oracle, function, plsql

我有一个函数可以返回一个人的年龄，或者如果他们已经死亡，则返回“已故”。因为它返回一个数字或已故，所以 RETURN 是一个 VARCHAR2。

返回年龄时，它会返回一个值，例如：72.93541936015413085912743681395289882628。无论如何要更改变量中的值以仅返回小数点前的字符？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T16:14:55.097

将其转换为数字：

```
floor(cast(column as float)) 
```

将其四舍五入

```
ceil(cast(column as float)) 
```

会把它四舍五入

```
round(cast(column as float)) 
```

将其四舍五入

如果您必须将其作为字符串发送回，请将其转换回

```
 cast(round(cast(column as float)) as varchar2(50)) 
```

但您可能需要检查值 'deated' ，所以使用一个案例：

```
select retVal =
case column
 when 'deceased' then 'deceased' -- pushing up daisies
 else cast(round(cast(column as float)) as varchar2(50)) --alive and kicking
end 
```

# c# - 使用 instanceContextMode = PerSession 创建 wcf Web 服务

> ID：13766795
> 
> 赞同：0
> 
> 时间：2012-12-07T16:12:57.433
> 
> 标签：c#, wcf, web-services, persistence

我有一个非常简单的服务：

```
[ServiceContract]    
public interface IPncService
{
    [System.ServiceModel.Web.WebGet(UriTemplate = "set/{val}")]
    [OperationContract]
    bool SetVariable(string val);

    [System.ServiceModel.Web.WebGet(UriTemplate = "get")]
    [OperationContract]
    string GetVariableVal();
}

[ServiceBehavior(InstanceContextMode = InstanceContextMode.PerSession)]
public class PncService : IPncService
{
    string someVariable;

    public bool SetVariable(string val)
    {
        if (string.IsNullOrWhiteSpace(val))
            return false;
        else
        {
            someVariable = val;
            return true;
        }            
    }

    public string GetVariableVal() {
        return someVariable;
    }
} 
```

为什么变量`someVariable`在每个会话中不保留其值？

换句话说，如果我这样做：

![在此处输入图像描述](../Images/da8e96f9c319c82c6043b66db65bbdeb.png)

**然后转到：**

![在此处输入图像描述](../Images/d03863c59012ab85f571525737fb4e90.png)

为什么是 的值`someVariable = null`？这是一个不同的会话吗？我在调用 set 方法后立即在同一个浏览器上调用该方法......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T16:20:19.800

您应该阅读这篇文章：http: [//blogs.msdn.com/b/wenlong/archive/2010/02/21/using-asp-net-sessions-from-wcf.aspx](http://blogs.msdn.com/b/wenlong/archive/2010/02/21/using-asp-net-sessions-from-wcf.aspx)

精简版 ：

> WCF 会话与 ASP.NET 会话非常不同。简而言之，
> 
> *   WCF 会话表示为服务实例（作为 CLR 对象），并且状态是每个服务实例的一部分。会话由调用 WCF 客户端启动。WCF 依靠特殊的上下文为会话提供关联：会话通道、安全对话、可靠消息传递等。
> *   ASP.NET 会话就像跨不同请求的共享数据存储。会话始终由服务器发起。ASP.NET 依赖 cookie 或特殊的 Uri goo 为会话提供关联。

因此 ：

> 启用会话状态 启用 ASP.NET 会话状态非常简单。您只需要在 web.config 中指定的 ASP.NET 兼容模式下运行 WCF 服务：

# objective-c - iOS - viewForAnnotation 返回而不执行

> ID：13766799
> 
> 赞同：0
> 
> 时间：2012-12-07T16:13:11.870
> 
> 标签：objective-c, ios, mkmapview

当点击 UI 元素时，我执行以下代码：

```
- (IBAction)setPoint
{
    UserAnnotationView *pinview = (UserAnnotationView*)[self.map viewForAnnotation:currentAnnotation];
    NSLog(@"droping it: %@", pinview);
    NSLog(@"stop! hammer time!");
} 
```

我的`viewForAnnotation`样子是这样的：

```
- (MKAnnotationView *) mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>) annotation
{
    NSLog(@"here !!!");
    ...
    ...
} 
```

所以，我希望控制台中的输出是：

```
here !!!
droping it: <some object representation>
stop! hammer time! 
```

但相反，我有这个：

```
2012-12-07 18:03:58.506 MyApp[16523:707] droping it: (null)
2012-12-07 18:03:58.507 MyApp[16523:707] stop! hammer time!
2012-12-07 18:03:58.607 MyApp[16523:707] here!!! 
```

怎么会`viewForAnnotation`立即返回而不执行，然后正确执行？！？！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T04:18:39.940

`viewForAnnotation`不是你应该称呼自己的东西。这是地图在需要刷新其绘图时向其代表提出的要求。您正在调用`viewForAnnotation`您的`MKMapView`，而不是实现`MKMapViewDelegate`协议的东西（您`viewController`可能实现了该协议），因此您得到`null`了响应。然后其他东西会触发地图重绘，并要求其代表提供注释，这是它打印出来的时候`here!!!`。

# android - 显示版本名称

> ID：13766803
> 
> 赞同：2
> 
> 时间：2012-12-07T16:13:29.980
> 
> 标签：android, xml, textview, android-manifest

我想在我的spalsh屏幕上显示位于android清单中的versionName（数字）。我找到了一些示例代码，但它们不起作用。这似乎是一个简单的任务，但它不显示给我

来自初始 xml 的文本视图：

```
 <TextView
        android:id="@+id/ver_name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:layout_marginBottom="33dp"
        android:layout_marginRight="30dp"
        android:text=" " /> 
```

显示方法：

```
 private void displayVersionName() {
    String versionName = "";
    PackageInfo packageInfo;
    try {
        packageInfo = getPackageManager().getPackageInfo(getPackageName(), 0);
        versionName = "ver:" + packageInfo.versionName;
    } catch (NameNotFoundException e) {
        e.printStackTrace();
    }
    TextView tv = (TextView) findViewById(R.id.ver_name);
    tv.setText(versionName);
  } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-07T16:18:59.057

也许`NameNotFoundException`会被抛出？或者当您显示版本字符串时可能会发生一些事情？

无论如何，我和你完全一样，它对我有用。您可以使用以下代码验证 getVersionInfo 返回的内容，然后才尝试显示它

```
public String getVersionInfo() {
        String strVersion = "Version:";

        PackageInfo packageInfo;
        try {
            packageInfo = getApplicationContext()
                .getPackageManager()
                .getPackageInfo(
                    getApplicationContext().getPackageName(), 
                    0
                );
            strVersion += packageInfo.versionName;
        } catch (NameNotFoundException e) {
            strVersion += "Unknown";
        }

        return strVersion;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-29T12:46:16.573

尝试这个 ：

```
 TextView tv = (TextView) findViewById(R.id.ver_name);
 tv.setText("version : " + BuildConfig.VERSION_NAME); 
```

并导入`BuildConfig`您想要 versionName 的包：

```
import com.yourpackage.BuildConfig; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T16:17:34.250

更改您的代码以使用代码获取您的应用程序版本名称

```
 private void displayVersionName() {
    String verName = "";
    try {
        verName = "ver:" + Current_Activity.this.getPackageManager().
                            "YOUR_APPLICATION_PACKAGE_NAME", 0).versionName;  
    } catch (NameNotFoundException e) {
        e.printStackTrace();
    }
    TextView tv = (TextView) findViewById(R.id.ver_name);
    tv.setText(verName);
  } 
```

# c++ - 一个类的公共变量不维护它的值并且不能在另一个类中访问

> ID：13766805
> 
> 赞同：-6
> 
> 时间：2012-12-07T16:13:37.703
> 
> 标签：c++, class, public

我有一个项目，`Class1`其公共功能`tempfunc`定义为：

```
public:
int tempvar;
public:
int tempfunc(int temparg)
{
    if (temparg>0)
    {
        tempvar=temparg;
    }
    return tempvar;
} 
```

现在`Class1`，首先我调用`tempfunc`with`tempfunc(500)`并设置`tempvar=500`。当我尝试`tempvar`在同一个内使用时`Class1`，它的值不是 500。

其次，在另一个`Class2`调用`tempfunc`of之后`Class1`，我使用以下代码：

```
int tempvar2=Class1().tempfunc(0); 
```

我预计值为`tempvar2`500，但它是一些虚拟值。

我应该怎么做才能从执行后获取`tempvar`in的值。`Class2``Class1``tempfunc`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T16:24:53.560

我将使用我的精神力量并试图找出你做错了什么。我猜（根据您在第二个问题中所说的话）您正在做这样的事情：

```
class Class1
{
 public:
  int temp;
  void tempfunc(int x) { temp = x; }
  void someOtherFunction() { std::cout << temp << std::endl; }
};

int main()
{
  Class1().tempfunc(5);
  Class1().someOtherFunction(); // Prints some garbage value, not 5
} 
```

现在我将解释为什么这不起作用。类是对该类类型的对象的描述。类本身没有`int`对象（它只是一个描述），但`Class1`类型的对象*将*.

现在，在我上面给出的代码中，`Class1()`创建了一个类型的对象，`Class1`但它是未命名的和临时的，这意味着它将在行尾被销毁。我们正在调用`tempfunc(5)`该临时对象，将其`temp`成员变量设置为 5。但随后它被销毁了。在下一行中，我们创建*另一个*新`Class1`对象并调用`someOtherFunction`它 - 但*该*对象尚未将其`temp`成员设置为 5，它只是具有一些任意未初始化的变量（这回答了您的第二个问题）。

如果您想`Class1`为这两个函数使用相同类型的对象，您需要执行以下操作：

```
Class1 obj;
obj.tempfunc(5);
obj.someOtherFunction(); 
```

这将创建一个类型对象`Class1`并为其命名`obj`。然后我们可以调用该命名对象上的函数。

* * *

编辑后：您声明`tempfunc`返回 an`int`但不返回任何内容。你需要：

```
int tempfunc(int temparg)
{
    if (temparg>0)
    {
        tempvar=temparg;
    }
    return tempvar;
} 
```

# javascript - 将 div 内容复制到 textarea 并保留代码

> ID：13766810
> 
> 赞同：1
> 
> 时间：2012-12-07T16:13:58.900
> 
> 标签：javascript, jquery

我做了这个演示：http: [//jsfiddle.net/69nxx/6/](http://jsfiddle.net/69nxx/6/)

```
<div contenteditable="true">
    <span title="&lt;test&gt;">abc &lt; &amp;lt;</span> <span></span>      
</div> 
```

我希望从文本区域内的 div 中获取确切的代码。这可能吗？

如您所见，标题中的实体已转换。

我不需要 100% 的 jquery 解决方案。我在 Firefox 中需要这个。

# java - Android按钮慢动作

> ID：13766814
> 
> 赞同：2
> 
> 时间：2012-12-07T16:14:07.903
> 
> 标签：java, android, button, android-activity, sdk

我有一个指向另一个页面的按钮。每当我单击它时，我都会在 logcat 中获得此信息代码：

```
12-07 16:09:45.073: I/ActivityManager(273): Displayed com.example.prva/.button: +1s764ms 
```

秒和毫秒当然每次在 1-3 秒之间变化。问题是我注意到该按钮打开该页面需要一段时间。它有某种暂停或其他什么，这是我在 logcat 中找到的唯一可以连接到它的相关内容。我该如何解决这个问题，为什么这个按钮动作“慢”？

这是按钮代码所在的位置：

```
 package com.example.prva;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;

public class Meni_Splash extends Activity{  

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);     

        Button btnv = (Button) findViewById(R.id.buttonv);
        btnv.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                startActivity(new Intent(Meni_Splash.this, button.class));              
            }
        });         
    }
} 
```

这是打开的课程：

```
package com.example.prva;

import android.app.Activity;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.RadioButton;

public class button extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);     
        setContentView(R.layout.button);

        //Button click sound
        final MediaPlayer MPRadio1 = MediaPlayer.create(this, R.raw.radio1);
        final MediaPlayer MPRadio2 = MediaPlayer.create(this, R.raw.radio2);
        final MediaPlayer MPRadio3 = MediaPlayer.create(this, R.raw.radio3);

        final RadioButton rb1, rb2, rb3;        

        rb1 = (RadioButton) findViewById(R.id.radio1);
        rb2 = (RadioButton) findViewById(R.id.radio2);
        rb3 = (RadioButton) findViewById(R.id.radio3);

        Button btn = (Button) findViewById(R.id.buttonplay);

        btn.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub      
                if(rb1.isChecked())
                {
                MPRadio1.start();
                }
            else
                {
                if(rb2.isChecked())
                {
                    MPRadio2.start();
                }
                    else
                    {
                        if(rb3.isChecked())
                        {
                        MPRadio3.start();
                    }
                }   
                }
            }
        }

    );}} 
```

我不知道是什么东西让这些活动变得如此缓慢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T22:42:53.213

老实说，您的代码看起来相当不错。不完全确定是什么导致它缓慢初始化。

但有两个方面值得关注。

首先，最有可能的是您的布局加载：

```
 setContentView(R.layout.button); 
```

我不认为你的布局很复杂。但是，如果页面上通常有很多嵌套视图（其他线性布局中的线性布局）或很多视图（文本视图等），那么“膨胀”布局可能需要一段时间。

或者，不太可能的是，MediaPlayer.create 需要很长时间才能加载。我建议这样做的原因是我不知道它是如何工作的，因为我以前没有使用过它。

```
 //Button click sound
    final MediaPlayer MPRadio1 = MediaPlayer.create(this, R.raw.radio1);
    final MediaPlayer MPRadio2 = MediaPlayer.create(this, R.raw.radio2);
    final MediaPlayer MPRadio3 = MediaPlayer.create(this, R.raw.radio3); 
```

最好的办法是使用 DDMS 分析器对其进行分析。或者在它周围放一个计时器，然后将结果打印到 logcat。

另外，快速说明一下，加载只需 2-3 秒吗？它试图做的事情真的那么糟糕吗？

# javascript - 在 jQuery 拖动期间自动滚动

> ID：13766827
> 
> 赞同：1
> 
> 时间：2012-12-07T16:14:51.903
> 
> 标签：javascript, jquery, jquery-ui, jquery-plugins

我正在考虑向我的 Webforms 应用程序添加拖放功能。

一种考虑是拖动源和放置目标可能彼此相距足够远而需要滚动。所以我认为一个很酷的 UI 应该是当用户开始拖动时在浏览器窗口的顶部和底部出现一个叠加层。

该叠加层将是带有箭头的阴影区域（顶部叠加层将具有向上箭头，底部叠加层将具有向下箭头）。当用户在覆盖层上拖动时，窗口会朝那个方向滚动。

问题：

1.  有没有人有这样的经验？你知道它是否可以跨浏览器可靠地完成吗？
2.  任何人都可以推荐一个可以完成繁重工作的 jQuery 插件吗？
3.  还有其他想法或建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T23:38:46.350

我也遇到了该功能的一些问题。我通过使用 and 设置可拖动元素的样式`margin: 0`并`padding: 0`使其与 a`width`和 a`height`属性一致来解决它。

我在可拖动、可排序和可放置元素上使用`margin`的属性越多，我遇到的问题就越多。`padding`

希望它会帮助你！

# android - 当用户快速/重复单击按钮时，我是否负责处理？

> ID：13766830
> 
> 赞同：0
> 
> 时间：2012-12-07T16:14:57.200
> 
> 标签：android, android-activity, android-networking

作为一名 Android 开发者，我是否负责处理用户快速重复按下按钮的情况？或者这是否被认为是用户滥用？从后端的数据角度来看，没有什么不好的事情发生。

我有一个按钮，当被选中时会进行服务器调用。一旦服务器响应，就会从返回的消息中生成一个活动（使用处理程序）。在某些情况下，如果用户反复按下按钮，重复的活动可能会开始堆叠，并可能导致糟糕的用户体验（即用户可能需要多次点击后退按钮才能返回到前一个屏幕）

**编辑**：我遗漏了一些细节。现在正在等待服务器响应时显示一个~~微调框对话框。~~这会拦截所有点击。问题在于，在某些情况下，从关闭微调器到开始新活动之间的时间足够长，用户可以进行更多点击。

现在我正在禁用按钮，但看起来~~有点像黑客~~，可能会有更好的解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T16:19:55.157

> 我是否负责处理用户快速重复按下按钮的情况？

通常是的。

> 或者这是否被认为是用户滥用？

用户的意见才是最重要的，用户可能不会认为这是对您的应用的“滥用”。

> 一旦服务器响应，就会从返回的消息中生成一个活动（使用处理程序）。一世

不要在这样的延迟后开始活动，特别是因为服务器可能永远不会响应。

> 在某些情况下，如果用户反复按下按钮，重复的活动可能会开始堆叠，并可能导致糟糕的用户体验（即用户可能需要多次点击后退按钮才能返回到前一个屏幕）

所以，换句话说，你的 UI 让用户感到沮丧。解决方案是编写更好的 UI。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-07T16:26:01.040

当您开始执行需要很长时间的操作时，最好显示 a [`ProgressDialog`](http://developer.android.com/reference/android/app/ProgressDialog.html)，然后在任务完成后将其关闭。

```
private ProgressDialog mProgressDialog;

...

mProgressDialog = new ProgressDialog(context);
mProgressDialog.setIndeterminate(true);
mProgressDialog.setMessage("Loading...");
mProgressDialog.show();

...

mProgressDialog.dismiss(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T16:17:48.790

`btn.setEnabled(false)`第一次按下后的简单解决方案。需要时重新启用。

至于你的问题：

> 作为一名 Android 开发者，我是否负责处理用户快速重复按下按钮的情况？

我会说不，我相信用户足够聪明，可以意识到如果他们滥用该应用程序，它可能无法按预期运行。尽管您显然可以使用自己的技术来缓解这个问题，但如果您愿意的话。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-07T16:28:52.373

取决于你的意图是什么。您是否试图在整个运行过程中禁止单击它两次？或者你想禁止快速点击它。

`myButton.setEnabled(false);`在第一种情况下，只需在第一次单击后禁用按钮。

如果您想在一段时间内禁用它，请使用 if 和 else on `OnClick`。将此与等待功能相结合。

就像是：

```
public void Sleeper() {
  myButton.setEnabled(false);
  wait(time);
  myButton.setEnabled(true):
} 
```

# jquery - 隐藏的 jQuery 标头

> ID：13766833
> 
> 赞同：0
> 
> 时间：2012-12-07T16:14:59.500
> 
> 标签：jquery, html, css, header

我对标题的想法正在碰壁，因为我不知道“效果”被称为什么；即使我已经看过很多次了。

我的想法是有一个隐藏的标题，当用户将光标放在屏幕顶部时，它会下拉。类似于 Windows 8 菜单，当您将光标放在屏幕一角时会出现该菜单。

如果有人能指出我正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T16:31:09.030

您可以使用`animate()`, 而不是向下滑动 div（使用`slideDown`or `slideToggle`），这实际上会移动整个 div

[http://jsfiddle.net/F6FRC/3/](http://jsfiddle.net/F6FRC/3/)

```
<div class="wrapper">
    <div class="header">
        Shazam!
    </div>

    <div class="trigger">
    </div>
</div>​

$(function(){
    $(".trigger").mouseenter(function(){
        $('.header').animate({
            top: '0px',
            }, 500, function() {
        });
    }).mouseleave(function(){
        $('.header').animate({
            top: '-20px',
        }, 500, function() {
        });
    });
});​

.wrapper   {position:relative;}
.header    {background-color: #F00; position:absolute; height: 20px; width: 100%; top: -20px; left: 0px;}
.trigger   {height: 50px; width: 100%; border: 1px solid #EFEFEF;}
​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T16:27:14.873

我会做这样的事情：http: [//jsfiddle.net/V9Cfn/2/](http://jsfiddle.net/V9Cfn/2/)

```
$(window).on('mousemove', function (e) {
   if (e.pageY < 100) {
       $("#showtop").slideDown();
   }
   else {
       $("#showtop").slideUp();        
   }
}); 
```

本质上，如果鼠标足够靠近顶部，则显示您已固定到顶部的相关 div。

# c#-4.0 - 通过类及其后代检索枚举

> ID：13766835
> 
> 赞同：1
> 
> 时间：2012-12-07T16:15:03.213
> 
> 标签：c#-4.0, reflection

我有一个我已经定义的类，并且我有许多从它派生的子类。父类有一个枚举（我们称它为“Barf”）。每个后代也有一个具有相同名称但不同值的枚举。我试图弄清楚如何做的是在祖先类中编写一个方法，该方法为实例化对象的实际类获取 Barf 的版本。因此，如果我创建 Ancestor 的实例，我希望此方法处理 Ancestor.Barf 的条目。如果我创建 Ancestor 的子类之一的实例，我希望方法处理 Childx.Barf 值。

显然这将是一个反射解决方案，但我的反射技能非常稀疏。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T01:11:53.530

只是为了好玩，这是一种可能的方法：

```
public class Ancestor {
    public enum Caffeine {
        Tea,
        Coffee
    }

    public void ProcessValues() {
        var type = GetType();
        var nestedEnums = from t in type.GetNestedTypes()
                          where t.IsEnum
                          select t;
        var nestedEnum = nestedEnums.Single();
        foreach(var val in Enum.GetValues(nestedEnum)) {
            Console.WriteLine("Drinking {0}", val);
        }
    }
}

public class Descendant : Ancestor {
    public new enum Caffeine {
        Jolt,
        RedBull
    }
}

// The following prints:
// Drinking Jolt
// Drinking RedBull
Ancestor x = new Descendant();
x.ProcessValues(); 
```

当然，您可以使用多态性来实现相同的目的：

```
public class Ancestor {
    public enum Caffeine {
        Tea,
        Coffee
    }

    protected virtual Type GetNestedEnum() {
        return typeof(Ancestor.Caffeine);
    }

    public void ProcessValues() {
        var nestedEnum = GetNestedEnum();

        foreach(var val in Enum.GetValues(nestedEnum)) {
            Console.WriteLine("Drinking {0}", val);
        }
    }
}

public class Descendant : Ancestor {
    public new enum Caffeine {
        Jolt,
        RedBull
    }

    protected override Type GetNestedEnum() {
        return typeof(Descendant.Caffeine);
    }
} 
```

然而，正如 Justin Morgan 所指出的那样，需要这种构造可能表明您的代码中存在潜在的设计问题。

# c# - Monotouch CGAffineTransform，在同一视图上同时为多个仿射变换设置动画

> ID：13766841
> 
> 赞同：1
> 
> 时间：2012-12-07T16:15:18.993
> 
> 标签：c#, ios, animation, xamarin.ios, cgaffinetransform

假设我有两个单独工作的动画，但我希望它们同时工作。

```
 public static void SlideAnimation( string name, UIView view, float xOffset, float yOffset, float duration )
    {           
        if ( view != null )
        {
            // ****** Begin Animation ****** //
            UIView.BeginAnimations(name + " SlideAnimation");
            UIView.SetAnimationDuration(duration);
            UIView.SetAnimationDelegate (view);
            CGAffineTransform move = CGAffineTransform.MakeTranslation(xOffset, yOffset);
            CGAffineTransform transforms = move;
            view.Transform = transforms;
            UIView.CommitAnimations();  
            // ****** End Animation ****** //
        }
    } 
```

和

```
 public static void GrowAnimation( string name, UIView view, float xScale, float yScale, float duration )
    {           
        if ( view != null )
        {
            // ****** Begin Animation ****** //
            UIView.BeginAnimations(name + " GrowAnimation");
            UIView.SetAnimationDuration(duration);
            UIView.SetAnimationDelegate (view);
            CGAffineTransform scale = CGAffineTransform.MakeScale(xScale, yScale);
            CGAffineTransform transforms = scale;
            view.Transform = transforms;
            UIView.CommitAnimations();  
            // ****** End Animation ****** //
        }
    } 
```

上面的两个函数都是使用 CGAffineTransform 的动画假设我想在同一时间在同一个视图上执行它们。我希望结果是同时滑动和增长的视图。

1.) 我的第一次尝试是调用一个动画，然后立即调用下一个。但那失败了。基本上，它开始为第一个动画制作动画，但是一旦移动到下一个动画，它就停止了第一个动画。结果只是动画第二个动画而完全跳过了第一个动画......几乎就像它一次只能做一个动画一样。

2.）我的第二次尝试是在它自己独特的线程中调用每个动画......这实现了让它们同时动画的目标，但我真的需要多线程来做到这一点吗？肯定有更好的办法...

PS：CGAffineTransform 是否有某种组动画，就像 CAKeyFrameAnimation 有 CAAnimationGroup 一样？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T17:34:42.217

只需创建一个转换并添加第二个：

```
CGAffineTransform composite = CGAffineTransform.MakeTranslation(xOffset, yOffset);
composite.Scale(xScale, yScale)
view.Transform = composite; 
```

# tomcat - PermGen 问题 - Groovy GString 实习生字符串吗？

> ID：13766844
> 
> 赞同：2
> 
> 时间：2012-12-07T16:15:32.433
> 
> 标签：tomcat, grails, groovy, out-of-memory, permgen

我有一个主要用作 WebService 的 Grails 应用程序。它提供了一种非常定制的缓存类型，它将对象存储在并发 hashmap 中几秒钟，并可能在它们可以被另一个线程处理之前组合类似的消息。经过几个月没有问题的运行，PermGen 空间最终达到了最大值，我需要重新启动服务器以防止出现 OOMError 异常。

我不认为我的问题与泄漏的类加载器有关，这似乎是大多数 PermGen 问题的原因。我从来没有重新部署这个应用程序。PermGen 只是从正常使用中填满。

我感觉我的问题可能是由于我的应用正在处理大量唯一字符串。我的应用在存储到 hashmap 之前大量使用 GStrings 进行日志记录和处理，如下所示：

```
mOrig.msg += mNew.msg
log.debug("Sending combined message: ${mOrig.msg}") 
```

我的问题是 GStrings 或 Hashmap Entries 是否使用 String.intern()。如果是这样，我认为这可以解释为什么我的 PermGen 空间会被填满。如果确实如此，那么最好的处理方法是什么？我已经增加了 JVM 参数中的 PermGen 空间量。然而，它只是延长了不可避免的事情。

我使用 Eclipse 内存分析器比较了使用一个月后的堆转储。虽然这并没有告诉我太多关于 PermGen 的使用情况，但很明显，两个堆之间的最大差异是字符串和 Hashmap 条目的数量。

```
Class Name                                     |   Objects | Shallow Heap
--------------------------------------------------------------------------
                                               |           |             
char[]                                         |    +1,731 |     +268,984
byte[]                                         |       +35 |     +142,240
java.util.HashMap$Entry                        |    +1,684 |      +80,832
java.lang.String                               |    +1,675 |      +67,000
org.apache.tomcat.util.buf.ByteChunk           |      +202 |      +12,928
org.apache.tomcat.util.buf.MessageBytes        |      +146 |      +11,680
org.apache.tomcat.util.buf.CharChunk           |      +162 |       +9,072
java.lang.Object[]                             |       -31 |       +7,840
java.text.DecimalFormat                        |       +32 |       +6,912
int[]                                          |       +87 |       +6,824
java.lang.String[]                             |       +68 |       +5,872 
```

有谁知道这里可能发生了什么以及如何解决它？我想避免每隔几周/几个月重新启动一次Tomcat。

谢谢！

更新：从`jmap -permstat`. 有谁知道如何阅读这个？

```
29045 intern Strings occupying 4025008 bytes.
class_loader    classes bytes   parent_loader   alive?  type

<bootstrap>     2221    12948256          null          live    <internal>
0x00002aaac0c40048      1       1952    0x00002aaabe2108a8      dead    sun/reflect/DelegatingClassLoader@0x00002aaaae276b20
0x00002aaac0c3c388      10      211456  0x00002aaac04f0cc8      dead    org/codehaus/groovy/runtime/callsite/CallSiteClassLoader@0x00002aaaaf4cf338
0x00002aaac1a2c698      1       3112    0x00002aaabe2108a8      dead    sun/reflect/DelegatingClassLoader@0x00002aaaae276b20
0x00002aaac0159380      1       3128    0x00002aaac04f0cc8      dead    sun/reflect/DelegatingClassLoader@0x00002aaaae276b20
0x00002aaac0158a28      1       3096    0x00002aaac04f0cc8      dead    sun/reflect/DelegatingClassLoader@0x00002aaaae276b20
0x00002aaac1dfa188      1       3248    0x00002aaac04f0cc8      dead    sun/reflect/DelegatingClassLoader@0x00002aaaae276b20
0x00002aaac1a2f910      1       1952    0x00002aaabe2108a8      dead    sun/reflect/DelegatingClassLoader@0x00002aaaae276b20
0x00002aaac0c6e390      12      239656    null          dead    org/codehaus/groovy/runtime/callsite/CallSiteClassLoader@0x00002aaaaf4cf338
0x00002aaac1df0a68      1       3200    0x00002aaac0afd9b8      dead    sun/reflect/DelegatingClassLoader@0x00002aaaae276b20
0x00002aaac1a2db68      1       3112    0x00002aaabe2108a8      dead    sun/reflect/DelegatingClassLoader@0x00002aaaae276b20
0x00002aaac1a36f58      1       3112    0x00002aaabe2108a8      dead    sun/reflect/DelegatingClassLoader@0x00002aaaae276b20
0x00002aaac1df9688      1       1952      null          dead    sun/reflect/DelegatingClassLoader@0x00002aaaae276b20
0x00002aaac0171e70      1       1968    0x00002aaac04f0cc8      dead    sun/reflect/DelegatingClassLoader@0x00002aaaae276b20
0x00002aaac1979200      1       1952      null          dead    sun/reflect/DelegatingClassLoader@0x00002aaaae276b20
0x00002aaac01712a8      1       1952    0x00002aaac04f0cc8      dead    sun/reflect/DelegatingClassLoader@0x00002aaaae276b20
0x00002aaac1dec140      1       3096    0x00002aaac04f0cc8      dead    sun/reflect/DelegatingClassLoader@0x00002aaaae276b20
0x00002aaac197ad80      1       1952      null          dead    sun/reflect/DelegatingClassLoader@0x00002aaaae276b20
0x00002aaac1df13e8      1       3120      null          dead    sun/reflect/DelegatingClassLoader@0x00002aaaae276b20
0x00002aaac1a2f1a0      1       1952    0x00002aaabe2108a8      dead    sun/reflect/DelegatingClassLoader@0x00002aaaae276b20
0x00002aaac197c380      1       1952      null          dead    sun/reflect/DelegatingClassLoader@0x00002aaaae276b20
0x00002aaac0c451c0      1       1952    0x00002aaabe2108a8      dead    sun/reflect/DelegatingClassLoader@0x00002aaaae276b20
0x00002aaabe2183b8      4       14192     null          dead    javax/management/remote/rmi/NoCallStackClassLoader@0x00002aaaae81ef70
0x00002aaabfd24688      1       1952    0x00002aaac04f0cc8      dead    sun/reflect/DelegatingClassLoader@0x00002aaaae276b20
0x00002aaabecd6250      2       19984   0x00002aaabe2108a8      dead    org/apache/catalina/loader/WebappClassLoader@0x00002aaaaee35f48
0x00002aaabe217da0      94      900176  0x00002aaabe210930      dead    sun/misc/Launcher$AppClassLoader@0x00002aaaae446690
0x00002aaac0170f68      1       1952    0x00002aaac04f0cc8      dead    sun/reflect/DelegatingClassLoader@0x00002aaaae276b20
0x00002aaac0c43bc0      1       1952    0x00002aaabe2108a8      dead    sun/reflect/DelegatingClassLoader@0x00002aaaae276b20
0x00002aaac0c45d60      1       3112    0x00002aaabe2108a8      dead    sun/reflect/DelegatingClassLoader@0x00002aaaae276b20
0x00002aaac1df0e68      1       1968      null          dead    sun/reflect/DelegatingClassLoader@0x00002aaaae276b20
0x00002aaac01716b8      1       1952    0x00002aaac04f0cc8      dead    sun/reflect/DelegatingClassLoader@0x00002aaaae276b20
0x00002aaac1a35c58      1       3112    0x00002aaabe2108a8      dead    sun/reflect/DelegatingClassLoader@0x00002aaaae276b20
0x00002aaac0c462e0      1       1952    0x00002aaabe2108a8      dead    sun/reflect/DelegatingClassLoader@0x00002aaaae276b20
0x00002aaac0c87750      1       1968      null          dead    sun/reflect/DelegatingClassLoader@0x00002aaaae276b20
0x00002aaac1a2e4b0      1       3112    0x00002aaabe2108a8      dead    sun/reflect/DelegatingClassLoader@0x00002aaaae276b20
0x00002aaabfd246f0      1       3128    0x00002aaac04f0cc8      dead    sun/reflect/DelegatingClassLoader@0x00002aaaae276b20
0x00002aaac1de9830      1       3136      null          dead    sun/reflect/DelegatingClassLoader@0x00002aaaae276b20
0x00002aaac1982680      1       3120      null          dead    sun/reflect/DelegatingClassLoader@0x00002aaaae276b20
0x00002aaac0171a60      1       3112      null          dead    sun/reflect/DelegatingClassLoader@0x00002aaaae276b20 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T17:32:50.717

不，Groovy 不实习字符串（无论是使用 GString 还是其他任何东西）。我建议你`jmap -permstat`用来获取一些关于你的 PermGen 吃什么的信息。

# iphone - 自定义相册中的图像保存问题以及 iphone 中的默认相机胶卷

> ID：13766845
> 
> 赞同：1
> 
> 时间：2012-12-07T16:15:36.157
> 
> 标签：iphone, objective-c, photo-gallery, alassetslibrary

我想`Custom Album`从我的应用程序中保存图像。我知道有可能`iOS 5`进进出出。

我通过[参考链接完成了这个功能](http://www.touch-code-magazine.com/ios5-saving-photos-in-custom-photo-album-category-for-download/)

从参考链接图像中成功保存，`Custom Album`但问题是该图像`Save in Custom Album as well as Camera roll`。我如何忽略保存在两个文件夹中？

有人知道吗？提前致谢 ！！！

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-12-07T20:28:25.827

您使用 UIImageWriteToSavedPhotosAlbum() 函数。

```
//ViewController.m
- (IBAction)onClickSavePhoto:(id)sender{

    UIImageWriteToSavedPhotosAlbum(imageToBeSaved, nil, nil, nil);
} 
```

在 Stackoverflow 中找到了这个 :)[如何将图像保存到相机胶卷？](https://stackoverflow.com/questions/11131050/ios-save-image-to-camera-roll)

# nosql - RavenDB 和分片再平衡

> ID：13766847
> 
> 赞同：2
> 
> 时间：2012-12-07T16:15:41.613
> 
> 标签：nosql, ravendb, sharding

RavenDB 如何处理数据的分片重新平衡/重新分配？

> var shards = new Dictionary {
> {"Asia", new DocumentStore {Url = "http://localhost:8080"}},
> {"Middle East", new DocumentStore {Url = "http://localhost:8081"}} ,
> {"美国", new DocumentStore {Url = "http://localhost:8082"}},
> };

例如，在上面摘自他们的教程的摘录中，包含亚洲的服务器受到影响，因为仅中国就有超过 1B 人。所以我需要将这些数据在 Asia1（中国）和 Asia2（其余）之间拆分。重新平衡现有数据的最佳方法是什么？

我是否需要查询原始文档存储中的所有亚洲并手动将它们移动到新分片？有更快的方法吗？这样的努力会涉及一些停机时间吗？是否需要重建新索引？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T12:31:04.570

Alwyn，通常情况下，您将添加一个 Asia-2 服务器，并更改您的分片功能以在 Asia-2 服务器中创建所有新的亚洲项目。您可以通过覆盖 ShardResolutionStrategy 中的 GenerateShardIdFor 来做到这一点。它不需要停机时间或任何新索引。

# arrays - 如何返回作为数组子类型的类型参数？

> ID：13766848
> 
> 赞同：2
> 
> 时间：2012-12-07T16:15:42.607
> 
> 标签：arrays, scala, generics, covariance, contravariance

我不明白为什么这段代码在 Scala 中是不可能的：

```
 def getColumns[T <: Array[_]] ():Array[(String,T)] ={
     Array(Tuple2("test",Array(1.0,2.0,3.0)))
  } 
```

编译器说：

> Array[(String,Array[Double])] 类型的表达式不符合预期的 Array[(String, T)] 类型

我对这段代码有同样的错误：

```
 def getColumns[T <: Array[Double]] ():Array[(String,T)] ={
     Array(Tuple2("test",Array(1.0,2.0,3.0)))
  } 
```

我的完整用例更加清楚，最后我选择了一个`Array[AnyVal]`：

```
class SystemError(message: String, nestedException: Throwable) extends Exception(message, nestedException) {
  def this() = this("", null)
  def this(message: String) = this(message, null)
  def this(nestedException : Throwable) = this("", nestedException)
}

class FileDataSource(path:String) {
   val fileCatch = catching(classOf[FileNotFoundException], classOf[IOException]).withApply(e => throw new SystemError(e))

   def getStream():Option[BufferedSource]={
     fileCatch.opt{Source.fromInputStream(getClass.getResourceAsStream(path))}
   }
}

class CSVReader(src:FileDataSource) {

  def lines= src.getStream().get
  val head = lines.getLines.take(1).toList(0).split(",")
  val otherLines = lines.getLines.drop(1).toList

  def getColumns():Array[(String,Array[_])] ={
    val transposeLines = otherLines.map { l => l.split(",").map {
      d => d match {
        case String => d
        case Int => d.toInt
        case Double => d.toDouble
      }}.transpose }

    head zip transposeLines.map {_.toArray}
  }
} 
```

你能给我一些解释或很好的链接来理解这些问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T16:28:59.593

但是，因为您的函数必须能够使用任何`T`（任何数组类型），所以它总是会返回一个`Array[(String,Array[Double])]`.

一个更简单的工作签名是：

```
def getColumns[T](): Array[(String,Array[T])] 
```

但在函数体中，您必须创建一个 type 数组`T`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T16:53:16.230

您的函数签名需要 a`T`在复合返回类型中，但您给它一个`Array[Double]`. 请注意`T <: Array[Double]`，不是相反。以下代码有效：

```
def getColumns[T >: Array[Double]] ():Array[(String,T)] ={
 Array(Tuple2("test",Array(1.0,2.0,3.0)))
} 
```

不应该是你想要的，而只是为了阐述问题。

# c# - 单声道上的 MemoryMappedFiles

> ID：13766861
> 
> 赞同：2
> 
> 时间：2012-12-07T16:16:55.587
> 
> 标签：c#, mono, fedora

我已经成功地在 windows 和 visual studio 中使用了内存映射文件，但是，我正在尝试将项目迁移到 mono 和 fedora 17 ，我的代码就像这样简单：

```
Var file = MemoryMappedFile.CreateNew(@"/home/xxx/xxx/filename", 1024*1024); 
```

与 Visual Studio 不同，在文件名中您必须放置一个现有文件。否则，你会得到一个 File NofoundException，我得到了“容量异常”，但是调用具有确切文件大小的方法我现在得到了一个新的异常：

```
Mono.Unix.UnixIOException: File exists [EEXIST].
at Mono.Unix.UnixMarshal.ThrowExceptionForLastError () [0x00000]
    in /builddir/build/BUILD/mono-2.10.8/mcs/class/Mono.Posix/Mono.Unix/UnixMarshal.cs:456
at System.IO.MemoryMappedFiles.MemoryMapImpl.Open (System.String path, FileMode mode, Int64 capacity, MemoryMappedFileAccess access) [0x0006b]
    in /builddir/build/BUILD/mono-2.10.8/mcs/class/System.Core/System.IO.MemoryMappedFiles/MemoryMappedFile.cs:133
at System.IO.MemoryMappedFiles.MemoryMappedFile.CreateFromFile (System.String path, FileMode mode, System.String mapName, Int64 capacity, MemoryMappedFileAccess access) [0x00055]
    in /builddir/build/BUILD/mono-2.10.8/mcs/class/System.Core/System.IO.MemoryMappedFiles/MemoryMappedFile.cs:475
at System.IO.MemoryMappedFiles.MemoryMappedFile.CreateNew (System.String mapName, Int64 capacity, MemoryMappedFileAccess access, MemoryMappedFileOptions options, System.IO.MemoryMappedFiles.MemoryMappedFileSecurity memoryMappedFileSecurity, HandleInheritability handleInheritability) [0x00000]
    in /builddir/build/BUILD/mono-2.10.8/mcs/class/System.Core/System.IO.MemoryMappedFiles/MemoryMappedFile.cs:525
at Unixtest.MainClass.Inicialize () [0x00009] 
    in /home/xxx/xxx/Unixtest/Main.cs:50 } 
```

我被困在这里，有什么想法吗？

# jquery - mvc4 中的 Twitter Bootstrap 和 jQuery UI 模式

> ID：13766864
> 
> 赞同：0
> 
> 时间：2012-12-07T16:17:14.777
> 
> 标签：jquery, jquery-ui, razor, twitter-bootstrap, asp.net-mvc-4

我想同时包含 Twitter Bootstrap 布局和 jQuery UI 脚本。第一部分，包括来自 jQuery UI 的模态和 datepicker 脚本在通用 MVC4 模板视图上运行良好。

今天我安装了 Twitter 视图并在 twitter 引导视图中渲染了相同的主体，没有显示日期选择器和模式，而且我收到了这些 js 错误：

```
SCRIPT438: Object doesn't support property or method 'dialog' 
```

是否可以在 twitter 引导视图中组合 jQuery UI 部分？这是我从 Twitter Bootstrap 获得的观点：

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>@ViewBag.Title</title>
         <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
      <script src="../../Scripts/bootstrap.js" type="text/javascript"></script>
      <script src="../../Scripts/jquery-ui-1.9.2.js" type="text/javascript"></script>
      <script src="../../Scripts/knockout-2.1.0.js" type="text/javascript"></script>
      <script src="../../Scripts/modernizr-2.5.3.js" type="text/javascript"></script>

    <script src="http://jqueryui.com/resources/demos/external/jquery.bgiframe-2.1.2.js"></script>
    <script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Le styles -->
    @Styles.Render("~/Content/themes/base/css", "~/Content/css")
    <link href="~/Content/bootstrap.min.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
      }
    </style>
    <link href="~/Content/bootstrap-responsive.min.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="~/Content/icons/favicon.ico">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="~/Content/icons/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="~/Content/icons/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="~/Content/icons/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="~/Content/icons/apple-touch-icon-57-precomposed.png">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="#">Project name</a>
          <div class="nav-collapse">
            <ul class="nav">
              <li class="active"><a href="#">Home</a></li>
              <li><a href="#about">About</a></li>
              <li><a href="#contact">Contact</a></li>
            </ul>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div id="body" class="container">
     @RenderSection("featured", required: false)
            <section class="content-wrapper main-content clear-fix">
                @RenderBody()
            </section>    

    </div> <!-- /container -->

    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    @Scripts.Render("~/bundles/jquery")
    <script src="~/Scripts/bootstrap.min.js"></script>
    @RenderSection("scripts", required: false)

  </body>
</html> 
```

通用视图是这样的：

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>@ViewBag.Title - My ASP.NET MVC Application</title>
        <link href="~/favicon.ico" rel="shortcut icon" type="image/x-icon" />
      <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
    <script src="http://jqueryui.com/resources/demos/external/jquery.bgiframe-2.1.2.js"></script>
    <script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
        <meta name="viewport" content="width=device-width" />
        @Styles.Render("~/Content/css")
        @Scripts.Render("~/bundles/modernizr")
 <link href="~/Content/bootstrap.min.css" rel="stylesheet">
    </head>
    <body>
        <header>
            <div class="content-wrapper">
                <div class="float-left">
                    <p class="site-title">@Html.ActionLink("your logo here", "Index", "Home")</p>
                </div>
                <div class="float-right">
                    <section id="login">
                        @Html.Partial("_LoginPartial")
                    </section>
                    <nav>
                        <ul id="menu">
                            <li>@Html.ActionLink("Home", "Index", "Home")</li>
                            <li>@Html.ActionLink("Document", "Document", "Home")</li>                            
                        </ul>
                    </nav>
                </div>
            </div>
        </header>
        <div id="body">
            @RenderSection("featured", required: false)
            <section class="content-wrapper main-content clear-fix">
                @RenderBody()
            </section>
        </div>
        <footer>
            <div class="content-wrapper">
                <div class="float-left">
                    <p>&copy; @DateTime.Now.Year - My ASP.NET MVC Application</p>
                </div>
            </div>
        </footer>

        @RenderSection("scripts", required: false)

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T16:40:40.733

没关系，底部的脚本包弄得一团糟，我删除了它，现在效果很好。对不起。

# opencv - 如何在 javacv 中找到类 FaceRecognizer 的实现？

> ID：13766865
> 
> 赞同：0
> 
> 时间：2012-12-07T16:17:13.800
> 
> 标签：opencv, javacv

我已经阅读了源代码 javaCV，文件 opencv_contrib.java 和类 FaceRecognizer。但这只是一个原型，我可以在任何地方找到这个类的实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-20T02:21:00.170

您需要调用创建识别器的静态方法之一：

```
FaceRecognizer eigenRecog =   com.googlecode.javacv.cpp.opencv_contrib.createEigenFaceRecognizer();
FaceRecognizer fischerRecog = com.googlecode.javacv.cpp.opencv_contrib.createFisherFaceRecognizer();
FaceRecognizer lbphRecog =    com.googlecode.javacv.cpp.opencv_contrib.createLBPHFaceRecognizer(); 
```

# ubuntu - 在 ubuntu 中更新心跳 mysql 资源

> ID：13766870
> 
> 赞同：1
> 
> 时间：2012-12-07T16:17:31.720
> 
> 标签：ubuntu, heartbeat

我在两台 Ubuntu 10.04 机器上安装了 HA，Heartbeat/Pacemaker 运行良好，但 mysql 资源不是最新版本。我所拥有的不包括提升/降级功能，而且我无法获得最新版本。我觉得我遗漏了一些简单的东西或者在这里做错了什么并且感觉很愚蠢，但是非常感谢您的帮助。

# objective-c - 无法将简单的 TableView 添加到 Storyboard

> ID：13766876
> 
> 赞同：-1
> 
> 时间：2012-12-07T16:17:46.123
> 
> 标签：objective-c, ios, xcode, uinavigationcontroller

![在此处输入图像描述](../Images/21df62c8212d627d7aecb205d3154946.png)

现在我的 StoryBoard 是这样的：

**X->X->X**

我希望它是这样的：

**X->Y->X->X**

Y 将是一个简单的 Tableview，一端连接到导航控制器，另一端连接到 masterviewcontroller，并将基本单元格推送到它。除此之外，我不想更改应用程序中的任何内容。

但是当我尝试这样做时，我收到了一个错误：

`ScaryBugs[1768:11303] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UITableViewController setBugs:]: unrecognized selector sent to instance 0x71d0940'`

我猜这是因为我不完全理解这 3 行在做什么。

**AppDelegate.m:**

```
UINavigationController * navController = (UINavigationController *) self.window.rootViewController;
MasterViewController * masterController = [navController.viewControllers objectAtIndex:0];
masterController.bugs = bugs; 
```

[代码来源](http://www.raywenderlich.com/1797/how-to-create-a-simple-iphone-app-tutorial-part-1)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T00:35:41.340

第三行只是将 masterController 的 bugs 属性分配给在应用程序委托中创建的具有局部变量名称 bugs 的数组。前 2 行只是获取对故事板中创建的控制器的引用。

通过将另一个控制器作为导航控制器的根视图控制器，你搞砸了引用。添加它之后，MasterController 现在甚至在您推送到它之前都不会被实例化，因此无法设置它的 bugs 属性。您的新控制器不属于那里。从你的蝙蝠、鲨鱼等列表推送到错误列表是没有意义的——通常，推送（特别是如果它来自表格视图单元格）意味着你要呈现一些信息提供有关您触摸的单元格的更多详细信息。如果您尝试扩展本教程，您确实需要更改应用程序的整体结构，这可能需要对代码进行相当多的更改。

# isabelle - 我可以命名案例分析生成的变量吗？

> ID：13766879
> 
> 赞同：4
> 
> 时间：2012-12-07T16:17:51.443
> 
> 标签：isabelle

是否可以为使用案例分析或归纳时生成的变量起自己的名字？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T16:35:47.527

如果您使用结构化证明（以`proof`关键字开头），则可以使用关键字`case`选择要证明的案例，并为案例分析/归纳创建的变量命名：

```
lemma "length (rev xs) = length xs"
proof (induct xs)
  case Nil
  then show ?case ...
next
  case (Cons x xs)
  then show ?case ...
qed 
```

这里`case (Cons x xs)`告诉 Isabelle，您要证明一个列表由一个起始元素和一个剩余列表（即归纳步骤）组成的情况，并将变量命名为`x`和`xs`。

在证明块中，您可以使用`print_cases`命令查看案例列表。

另一方面，如果您使用`apply`-style，则没有直接的方法来命名这些变量（同样，在这种情况下，您可能需要`case_tac`代替`cases`，因为您将不得不处理绑定变量而不是自由变量）。有一种方法`rename_tac`可用于重命名最外层的元量化变量。

对于大多数项目（程序验证除外，如 L4.verified 项目），常见的证明风格主要是使用结构化证明。非结构化证明用于探索并且很少变得如此复杂以至于需要重命名变量。

# html - 为什么我的缓存清单没有启动？

> ID：13766887
> 
> 赞同：0
> 
> 时间：2012-12-07T16:18:36.623
> 
> 标签：html, cache-manifest

这让我疯狂到没有尽头。我的缓存清单没有加载。我不知道为什么不。

标题如下：

```
<!DOCTYPE html>
<head>
    <html manifest="default.appcache">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="viewport" content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0"
        />
        <link rel="apple-touch-icon" sizes="114x114" href="images/splash/splash-icon.png">
        <link rel="apple-touch-startup-image" href="images/splash/splash-screen.png"
        media="screen and (max-device-width: 320px)" />
        <link rel="apple-touch-startup-image" href="images/splash/splash-screen@2x.png"
        media="(max-device-width: 480px) and (-webkit-min-device-pixel-ratio: 2)"
        />
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <title>Ez Names</title> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T20:41:38.473

解决了这个荒谬的问题。cache.manifest 必须在字段之外定义。如此愚蠢的错误。但是，如果有人遇到麻烦，请确保它在正确的位置。

# xpath - 基于包含文本的元素的 XPath 表达式

> ID：13766888
> 
> 赞同：2
> 
> 时间：2012-12-07T16:18:38.973
> 
> 标签：xpath, selenium

我的想法不多了。我已经根据包含的文本（“安全管理员”）为我的 Selenium 测试确定了一个 div。不幸的是，该 div 包含另外两个 div。请参阅示例。

```
<div class="rich-stglpanel-marker">
    <div class="rich-stglpnl-marker" id="j_id194:j_id198:2:j_id199_switch_on" style="display: none"></div>
    <div class="rich-stglpnl-marker" id="j_id194:j_id198:2:j_id199_switch_off"></div>
    security administrator 
</div>
<div class="rich-stglpanel-marker">
    <div class="rich-stglpnl-marker" id="j_id194:j_id198:2:j_id199_switch_on" style="display: none"></div>
    <div class="rich-stglpnl-marker" id="j_id194:j_id198:2:j_id199_switch_off"></div>
    technical administrator 
</div>
... and so on 
```

我试过这样的表达：

```
//div[text()='security administrator']
//div[text()='security administrator ']
//div[text()='security administrator&nbsp;']
//div[text()='security administrator${nbsp}'] (this is a special hack from selenium) 
```

没有任何效果。有任何想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T18:02:49.303

你可以试试这个：

```
//div[contains(.,'security administrator')]
System.out.println(driver.findElementByXPath("//div[contains(.,'security adm')]").getText()) 
```

给了我安全管理员

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T16:23:06.643

尝试这个

//div[@class='rich-stglpanel-marker']

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T16:39:58.903

尝试这个：`//div[@class='rich-stglpanel-marker' and text()!='']`

**编辑**

终于明白了！

用这个：`//div[@class='rich-stglpanel-marker' and normalize-space(div[last()]/following-sibling::text())='security administrator']`

我相信在这种情况下，文本“安全管理员”被算作一个节点，而不是第一个 div 节点的唯一文本值，这就是为什么`//div/text()`会给你多个返回行，然后是你正在搜索的文本，以及为什么您不能将`normalize-space()`,`translate()`或什`contains()`至应用到`div/text()`并接收结果的原因。但是，由于文本节点没有名称，这使得它成为一个时髦的 XPath，所以导航到最近的可能同级节点是我能想到的唯一选择。

# jquery - 使用 jQuery 通过 ID 名称查找类

> ID：13766890
> 
> 赞同：7
> 
> 时间：2012-12-07T16:18:46.183
> 
> 标签：jquery, class, find, clone, classname

```
<div id="calcwrapper">
    <img class="sugarcube" src="images/sugarcube.png" width="13" height="17">
    <div id="drinks">
        <a id="drink1" href=""><img src="images/drinkicon1.png" width="84" height="81"></a><div class="drink1"></div>
    </div>
</div> 
```

在上面的示例中，只有一个饮料按钮，但我的代码包含八个按钮。每个都有一个对应的同名分类 div。我正在尝试做的是“动态”获取锚标记的 id (id="drink1") 以将克隆的糖立方图像 (img class="sugarcube" ...) 附加到等效的类名 div (class =“饮料1”）。我希望这听起来不会令人困惑。也许下面的不成功尝试会让你对我想要达到的目标有所了解。

尝试 1

```
$(".sugarcube").clone().attr("class", "sugarcube" + i).appendTo($(this).parent((".drink1").attr("class"))); 
```

尝试 2（尝试通过控制台找到可行的解决方案）

```
var className = $(this).attr("id");
console.log(className);

console.log($(this).parent().children("div").hasClass(className)); 
```

我搜索了 Google 和 StackOverflow 并没有找到任何代码示例。感谢您的帮助。

这是完整的 HTML 代码上下文...

```
<!DOCTYPE html>
<html>
<head>
    <script src="http://code.jquery.com/ui/1.9.2/jquery-ui.min.js"></script>
    <script src="js/jquery-animate-css-rotate-scale.js"></script>
    <script>
        $(function() {
            $(".sugarcube").hide();
            var max = 8;
            function animateSugarcubes() {
                for (var i=1; i<=max; i++) {
                    $(".sugarcube" + i).css("position", "absolute");
                    $(".sugarcube" + i).css("top", Math.ceil(Math.random() * (50 - 20) + 20));
                    $(".sugarcube" + i).css("left", Math.ceil(Math.random() * (85 - 40) + 40));
                    $(".sugarcube" + i).hide();
                }
            }

            $("#drinks a").click(function() {

                for (var i=1; i<=max; i++) {
                    // Attempt 1
                    $(".sugarcube").clone().attr("class", "sugarcube" + i).appendTo($(this).parent().children($(this).attr("id")));

                    // Attempt 2 test code.
                    var className = $(this).attr("id");
                    console.log($(this).parent().children("div").hasClass(className));
                }

                return false;
            });
            animateSugarcubes();
        }); 
    </script>
</head> 
<body> 

<div id="calcwrapper">
    <img class="sugarcube" src="images/sugarcube.png" width="13" height="17">
    <div id="drinks">
        <a id="drink1" href=""><img src="images/drinkicon1.png" width="84" height="81"></a><div class="drink1"></div>
        <a id="drink2" href=""><img src="images/drinkicon2.png" width="84" height="81"></a><div class="drink2"></div>
        <a id="drink3" href=""><img src="images/drinkicon3.png" width="84" height="81"></a><div class="drink3"></div>
        <a id="drink4" href=""><img src="images/drinkicon4.png" width="80" height="81"></a><div class="drink4"></div>
        <a id="drink5" href=""><img src="images/drinkicon5.png" width="84" height="81"></a><div class="drink5"></div>
        <a id="drink6" href=""><img src="images/drinkicon6.png" width="84" height="81"></a><div class="drink6"></div>
        <a id="drink7" href=""><img src="images/drinkicon7.png" width="84" height="81"></a><div class="drink7"></div>
        <a id="drink8" href=""><img src="images/drinkicon8.png" width="84" height="81"></a><div class="drink8"></div>
    </div>
</div>

</body> 
</html> 
```

请注意，锚标记使用 id (id="drink1")，而 div 使用类 (class="drink1")

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T16:23:19.230

如果我从字面上回答你的问题，那么我最终可能会得到这样的结果：

```
var drinksLinks = $("#drinks a"); // get list of all a tags inside drinks
drinksLinks.each(function() {     // perform function for each element
   var element = $(this);         // get jquery object for the current element
   var id = element.attr("id");   // get the id
   var div = element.find("." + id); // find the element with class matching the id

   $(".sugarcube").clone().appendTo(div);
}); 
```

但是，如果您试图找到一个特定元素，则应尽量避免按类引用事物。我的建议是实际上只是假设像drinks1 这样的div 总是紧挨着a 标签，那么你可以这样做：

```
var sugarcube = $(".sugarcube");
var drinksLinks = $("#drinks a"); // get list of all a tags inside drinks

drinksLinks.each(function() {
   var div = $(this).next();  // get the element next to the a tag
   sugarcube.clone().appendTo(div);
}); 
```

有几件事要记住：

*   尝试使选择器尽可能窄，因为搜索 DOM 可能会很昂贵。
*   在可能的情况下尝试通过 id 搜索 DOM，因为这比旧浏览器中的类本身要快
*   如果您对同一个元素进行多次引用，请将其存储在一个变量中，就像我使用 sugarcube 元素一样。通过这种方式，您可以减少获得结果所需的页面搜索量

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T16:21:15.293

如果您使用带有标识符的元素，则使用“class”而不是“id”。“id”应该是唯一的。在给定的示例中，它用于 di 和 a 标签。

不是个好主意！<- 对不起，我以为有两个同名的 id

这对我有用。但有可能我没有正确理解你的问题

```
 $('#drink1').clone().attr('id','drink2').appendTo('#drinks') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T16:24:01.430

像这样的东西怎么样：

```
var id = $(this).attr('id');
var targetDiv = $('.' + id); 
```

Int 他的实例目标 div 将是类名与该 ID 匹配的 div

# sql-server - ColdFusion中的SQL执行计划

> ID：13766893
> 
> 赞同：2
> 
> 时间：2012-12-07T16:18:53.903
> 
> 标签：sql-server, coldfusion

我想知道 ColdFusion 是否可以从 Microsoft SQL Server 获取执行计划？甚至是估计的执行计划。最好能查询所有费用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T18:13:36.873

正如@James 发布的链接中提到的，您可以使用多种方法来检索有关执行计划的信息，使用简单的`cfquery`. 要记住几件事：

*   [`SET SHOWPLAN`](http://msdn.microsoft.com/en-us/library/ms180765%28v=SQL.105%29.aspx)选项通常应用于会话连接，这意味着如果您使用连接池（这是不可取的），它们可能会持续到当前请求之外。确保**始终**在查询结束时禁用该设置 - 即使发生错误。

*   一些`SET SHOWPLAN`选项返回多个结果集。`CFQuery`只返回一个结果集。因此它可能无法捕获所有返回的数据。

*   大多数系统视图和过程（[sys.dm_exec_sql_text](http://msdn.microsoft.com/en-us/library/ms189747.aspx)等...）都需要提升的权限。数据源用户必须被授予特殊访问权限才能使用这些对象。所以请记住安全隐患。

> ...要执行 sys.dm_exec_query_plan，用户必须是 sysadmin 固定服务器角色的成员或对服务器具有 VIEW SERVER STATE 权限。

* * *

**更新：** 正如评论中提到的@Travis，`SET SHOWPLAN`选项必须单独运行。因此，您需要单独的 cfquery 来切换`ON|OFF`主查询之前和之后的设置。这是一个快速而肮脏的例子。请注意，事务是为了确保始终使用相同的连接。这可能是矫枉过正，但不应该伤害任何东西。

```
<cftransaction>
    <cftry>
        <!--- note, SHOWPLAN_ALL does NOT execute the SQL --->
        <cfquery name="toggleStats" datasource="someDSN">
            SET SHOWPLAN_ALL ON
        </cfquery>
        <cfquery name="getQueryStats" datasource="someDSN">
            --- some sql query here 
        </cfquery>
        <cfcatch>
            <!--- rethrow and rollback automatically --->
            <cfrethrow>
        </cfcatch>
        <cffinally>
            <!--- always disable the setting --->
            <cfquery name="toggleStats" datasource="someDSN">
                SET SHOWPLAN_ALL OFF
            </cfquery>
        </cffinally>
    </cftry>
</cftransaction>

<cfif structKeyExists(variables, "getQueryStats")>
    <cfdump var="#getQueryStats#" label="Query Statistics">
</cfif> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T17:40:47.373

这似乎涵盖了您正在寻找的内容

[如何获取查询执行计划？](https://stackoverflow.com/questions/7359702/how-do-i-obtain-a-query-execution-plan)

然后把它包起来`<cfquery>`

# actionscript-3 - 在类中使用 TweenLite 补间成员变量

> ID：13766894
> 
> 赞同：0
> 
> 时间：2012-12-07T16:18:54.877
> 
> 标签：actionscript-3, flash, gsap

我有以下代码（精简）：

```
public class Character extends MovieClip
{
  var happiness:uint;

  public Character()
  {
    happiness = 0;
  }

  private function doTheTween():void
  {
    TweenLite.to(this, 3, { happiness:100, onComplete:onTweenComplete } );
  }

  private function onTweenComplete():void
  {
    // do stuff
  }
} 
```

在每帧跟踪`happiness`变量时，在调用补间后它保持为 0，并且`onTweenComplete`永远不会调用该函数。甚至可以以这种方式使用 TweenLite 还是我错过了一些愚蠢的明显东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T16:22:28.430

不，你没有，这是可能的。只需尝试将快乐变量设为 Number 类型，并将该变量公开。

# php - PHP：获取与另一个字符串数组的子字符串匹配的字符串数组的数组值

> ID：13766898
> 
> 赞同：2
> 
> 时间：2012-12-07T16:18:58.060
> 
> 标签：php, arrays, string

有两个数组：

```
$strings = array('Apple', 'Banana', 'Orange');
$substrings = array('pp', 'range'); 
```

我想得到一个包含所有字符串的数组，匹配子字符串：

```
Array
(
    [0] => Apple
    [2] => Orange
) 
```

或使用新索引：

```
Array
(
    [0] => Apple
    [1] => Orange
) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T16:24:53.637

想到一个简单的解决方案：组合[`array_filter`](http://php.net/array_filter)and [`strpos`](http://php.net/strpos);

```
$strings = array('Apple', 'Banana', 'Orange');
$substrings = array('pp', 'range');

$result = array_filter($strings, function($item) use($substrings) {
  foreach($substrings as $substring)
    if(strpos($item, $substring) !== FALSE) return TRUE;
  return FALSE;
}); 
```

要重置索引，您可以使用该[`array_values`](http://php.net/array_values)功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T16:24:11.133

```
$strings = array('Apple', 'Banana', 'Orange');
$substrings = array('pp', 'range');
$newarray = array();

foreach ($strings as $string) {
    foreach ($substrings as $substring) {
        if (strstr($string, $substring)) {
            array_push($newarray, $string);
        }
    }
} 
```

在`$newarray`你有结果

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T16:24:23.223

您可以为此使用[array_filter](http://php.net/array_filter)：

```
$strings = array('Apple', 'Banana', 'Orange');
$substrings = array('pp', 'range');

$result = array_filter($strings, function($string) use ($substrings){
    foreach($substrings as $substring)
        if(strstr($string, $substring) !== false)
            return true;
    return false;
});

// $result is the result you want. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T16:24:25.307

尝试数组搜索。以本页底部的第二个注释[http://php.net/manual/en/function.array-search.php](http://php.net/manual/en/function.array-search.php)为例。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-07T16:28:22.547

```
$arr=array();
foreach($substrings as $item)
{
    $result=array_keys($strings,$item);
    if ($result)
    {
        $arr=array_merge($arr,$result);
    }
} 
```

# facebook - 在无标题对象上设置链接？

> ID：13766901
> 
> 赞同：4
> 
> 时间：2012-12-07T16:19:05.980
> 
> 标签：facebook, facebook-opengraph, meta-tags

我想使用无标题对象（无图片），但仍链接到对象 URL。 [http://developers.facebook.com/docs/technical-guides/opengraph/titleless-objects/](http://developers.facebook.com/docs/technical-guides/opengraph/titleless-objects/)

这可能吗？

示例：“USERNAME 在 XXX 上创建了一个承诺。”

Promise 应该链接到对象 URL（但不是）

# spi - 无法使用带有 atmega2560 的 ad9833 生成频率和正弦波

> ID：13766906
> 
> 赞同：1
> 
> 时间：2012-12-07T16:19:17.123
> 
> 标签：spi

我使用的是 4 个 AD9833，其中 4 个 fsync 信号是从 atmega2560 发送的。我想从所有 4 个 AD9833 生成不同的频率，如果我对其进行编程，我会在 2 个端口引脚中获得一些频率，我无法更改频率.. 请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-22T02:13:40.777

对于 Atmega2560，您可能需要在此处查找“SPI”编程：

[http://arduino.cc/en/Main/arduinoBoardMega2560](http://arduino.cc/en/Main/arduinoBoardMega2560)

使用 SPI 库，您可以通过 SPI 接口向 AD9833 发出命令。有关详细信息，请在此处查找第 2 页：

[http://www.analog.com/static/imported-files/data_sheets/AD9833.pdf](http://www.analog.com/static/imported-files/data_sheets/AD9833.pdf)

（上面第 15 页描述了有关指定频率的详细信息）。

有关 Atmel SPI 编程的更多信息，请访问：http: [//www.atmel.com/Images/doc0943.pdf](http://www.atmel.com/Images/doc0943.pdf)

对于 Arduino 的 SPI 示例：

[http://www.youtube.com/watch?v=YE0wnom_7As](http://www.youtube.com/watch?v=YE0wnom_7As) [http://arduino.cc/en/Tutorial/BarometricPressureSensor](http://arduino.cc/en/Tutorial/BarometricPressureSensor) （查找 SPI.begin()、SPI.transfer() 等）。

对于 SPI 库规范：

[http://arduino.cc/en/Reference/SPI](http://arduino.cc/en/Reference/SPI)

# android - 如何以编程方式在 Android 4.2 上启用和禁用飞行模式？

> ID：13766909
> 
> 赞同：30
> 
> 时间：2012-12-07T16:19:25.730
> 
> 标签：android, airplane

有没有办法在 Android 4.2 上禁用或启用飞行模式？

我使用的代码仅适用于以前的 Android 版本：

```
android.provider.Settings.System.putInt(
    c.getContentResolver(),   
    android.provider.Settings.System.AIRPLANE_MODE_ON, enable ? 0 : 1
); 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-04-08T11:10:00.620

**在有根**设备上存在一个简单的解决方法。

要启用飞行模式，可以使用以下 root shell 命令：

```
settings put global airplane_mode_on 1
am broadcast -a android.intent.action.AIRPLANE_MODE --ez state true 
```

要禁用飞行模式，可以使用这些 root shell 命令：

```
settings put global airplane_mode_on 0
am broadcast -a android.intent.action.AIRPLANE_MODE --ez state false 
```

从[这里获取的信息](http://zipta.ru/2012/11/borba-s-android-4-2/)

免责声明：此信息按“原样”提供，不提供任何形式的保证。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-12-07T16:20:43.193

这不再可能，除非应用程序由固件签名密钥签名或安装在系统分区上（通常由 root 设备用户）。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-12-07T18:05:22.703

你不能，正如[官方 Android 4.2 API 文档中所写](http://developer.android.com/about/versions/android-4.2.html)

> 由 定义的一些设备设置`Settings.System`现在是只读的。如果您的应用尝试将更改写入 `Settings.System`已移至 中定义的设置`Settings.Global`，则在 Android 4.2 及更高版本上运行时，写入操作将静默失败。即使您的`android:targetSdkVersion`和 值`android:minSdkVersion`低于 17，您的应用也无法修改`Settings.Global`在 Android 4.2 及更高版本上运行时移动到的设置。

但是，如果您是 OS Developer，则可以在设置这些权限时编写

```
<uses-permission android:name="android.permission.WRITE_SETTINGS" />
<uses-permission android:name="android.permission.WRITE_SECURE_SETTINGS" /> 
```

然后写和读，

```
// To Write
Settings.Global.putString(getContentResolver(), "airplane_mode_on", "1");

// To Read
String result = Settings.Global.getString(getContentResolver(), Settings.Global.AIRPLANE_MODE_ON);
Toast.makeText(this, "result:"+result, Toast.LENGTH_SHORT).show(); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-06-04T04:33:09.160

对于 KitKat，您必须添加`android:sharedUserId="android.uid.system"`清单文件。

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.airplanesetting"
    android:versionCode="1"
    android:versionName="1.0"
    android:sharedUserId="android.uid.system" > 
```

# java - 在eclipse中提取方法似乎不起作用

> ID：13766912
> 
> 赞同：5
> 
> 时间：2012-12-07T16:19:50.037
> 
> 标签：java, eclipse, refactoring

我尝试在eclipse中做一个简单的重构（提取方法）。我选择以下代码块并执行 alt+shift+M（提取的快捷方式）。

```
 Parser parser = Parser.createParser(comment.getText(), "UTF-8");
    NodeList htmlAnchorNodes = null;
    try {
        htmlAnchorNodes = parser
                .extractAllNodesThatMatch(new TagNameFilter("a"));
    } catch (ParserException e) {
        e.printStackTrace();
    }

    int size = htmlAnchorNodes.size(); 
```

之后只使用 size 变量。

我收到错误消息：

> 不明确的返回值：所选块包含多个对局部变量的赋值。受影响的变量是：
> 
> NodeList htmlAnchorNodes
> 
> 解析器解析器
> 
> 整数大小

如何让 Eclipse 识别返回值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T18:56:51.050

在某些情况下，Eclipse 不确定您打算返回哪个变量。如果它会提示您选择一个，或者根据稍后实际使用的值进行分析，那将是理想的，但我已经通过使用大括号来解决它，以在提取方法之前限制临时值的范围。

使用您的代码，我将从

```
Parser parser = Parser.createParser(comment.getText(), "UTF-8");
NodeList htmlAnchorNodes = null;
try {
    htmlAnchorNodes = parser
            .extractAllNodesThatMatch(new TagNameFilter("a"));
} catch (ParserException e) {
    e.printStackTrace();
}

int size = htmlAnchorNodes.size(); 
```

至

```
int size;

{
    Parser parser = Parser.createParser(comment.getText(), "UTF-8");
    NodeList htmlAnchorNodes = null;
    try {
        htmlAnchorNodes = parser
                .extractAllNodesThatMatch(new TagNameFilter("a"));
    } catch (ParserException e) {
        e.printStackTrace();
    }
    size = htmlAnchorNodes.size();
} 
```

唯一在大括号范围之外产生影响的赋值是对 的更改`size`，这应该可以解决重构工具的歧义。

# iphone - 以模式动态排列图像 - iOS

> ID：13766916
> 
> 赞同：1
> 
> 时间：2012-12-07T16:20:17.857
> 
> 标签：iphone, ios, cocoa-touch, logic

我正在做一个项目，我有一个时间表，用户可以在其中单击一个月并在弹出窗口中查看该特定月份赢得的奖牌。现在，我想为程序安排奖牌图像（小视圈）。应该像这样排列，或者像这样（我并不特别关注一种特定的格式，但我只是希望它们是对称的）：

1.  1 枚奖牌 - 一个小圆圈
2.  2 枚奖牌 - 并排的两个圆圈
3.  3 枚奖牌 - 三个圆圈，两个并排，一个位于两枚奖牌的中上角
4.  4 枚奖牌 - 四个圆形组成一个正方形
5.  5 枚奖牌 - 四个圆圈在一个正方形中，第 5 个在中上。

我知道我可能不清楚我的要求，所以如果您需要更多说明，请提及。

**我需要逻辑来为奖牌绘制这个或任何其他图案。我在objective-c工作以记录**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T18:17:17.780

您可以执行以下操作：

```
int nrmedals; //number of medals
CGPoint bottompos; //position of the lower left corner of the rectangle where you want to draw
float padding; //space between medals
float diameter; //diameter of the medals
if (nrmedals%2==0) { //even
    for (int i=0; i<nrmedals; i+=2) {
        draw medal one at position (bottompos.x,bottompos.y+ i/2 * (diameter + padding));
        draw medal two at position (bottompos.x+diameter+padding ,bottompos.y + i/2 * (diameter + padding));

    }

}else {//odd
    for (int i=0; i<nrmedals-1; i+=2) {
        draw medal one at position (bottompos.x,bottompos.y+ i/2 * (diameter + padding));
        draw medal two at position (bottompos.x+diameter+padding ,bottompos.y + i/2 * (diameter + padding));

    }
draw odd medal at position (bottompos.x +diameter/2+padding/2 ,bottompos.y+diameter * (nrmedals-1)/2 +padding);
} 
```

这是基本思想（当然你可以用一个变量替换“2”，而不是每行 2 个奖牌，你有更多）

一些计算点的数学可能会关闭

# php - 将会话 cookie 重命名为 PHPSESSID 以外的其他名称

> ID：13766920
> 
> 赞同：3
> 
> 时间：2012-12-07T16:20:33.223
> 
> 标签：php, html5boilerplate

我正在阅读[https://github.com/h5bp/html5-boilerplate/blob/master/.htaccess中建议的 php.ini 更改](https://github.com/h5bp/html5-boilerplate/blob/master/.htaccess)

建议之一是：

```
# Rename session cookie to something else, than PHPSESSID
php_value session.name sid 
```

我很想知道这会如何影响我当前的网站以及这将如何提高安全性？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-07T17:10:13.720

通过更改名称，您将获得的唯一安全改进是您将不再通过 cookie 名称公开您正在使用 PHP。

如果您更改此值，对您网站的唯一副作用是所有当前登录的用户都将被注销。

*另外，你可以使用一个有趣的名字，比如`we_are_hiring_ninjas`！*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T16:22:32.923

会话 cookie 的名称可以从 php.ini 文件中更改，也可以从 Apache 配置上的主机定义中更改。

看看那里。

祝一切顺利。

# sharepoint - 我无法删除 sharepoint 2010 中的列表列

> ID：13766924
> 
> 赞同：1
> 
> 时间：2012-12-07T16:20:49.227
> 
> 标签：sharepoint, sharepoint-2010

当我尝试删除之前添加的列时，浏览器控制台中会显示以下错误。

类型错误：form.__VIEWSTATE 未定义

form.__VIEWSTATE.value = "";

任何有关解决此问题的帮助将不胜感激

# vb.net - Windows 服务文件 I/O 异常

> ID：13766925
> 
> 赞同：0
> 
> 时间：2012-12-07T16:20:51.540
> 
> 标签：vb.net, visual-studio, visual-studio-2008, windows-services

我正在尝试使用 Visual Studio 2008 在运行 64 位 Windows 的 PC 上编写 Windows 服务。在此服务中，我试图从位于同一 LAN 上的不同机器上的外部驱动器读取控制文件。从阅读机到文件的路径将通过映射的网络驱动器......（T:)。我正在使用 Microsoft.VisualBasic.FileIO 类中的 TextFieldParser 来读取位于 T:\filename 的文件。我收到了一个未找到文件的异常，但是，如果我从同一台机器上将它复制并粘贴到 Windows 资源管理器中，驱动器的路径就可以完美运行。

任何人都知道以这种方式连接是否有任何问题和/或我做错了什么？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T19:27:57.267

您需要确保运行该服务的帐户具有到 的驱动器映射`T:`，或者，最好尝试使用 UNC 路径（例如 \\server1\someshare\filename）。而且您仍然需要确保该帐户有权访问该文件。尝试使用其访问权限仅限于所需内容的帐户，而不是管理员帐户。

# java - Java Servlets - 空指针异常

> ID：13766928
> 
> 赞同：0
> 
> 时间：2012-12-07T16:21:00.083
> 
> 标签：java, exception, servlets, pointers, null

我在 servlet 中有以下代码：

```
try
{
    EntityManagerFactory emFactory = Persistence.createEntityManagerFactory("Flights_AssignmentPU");
    EntityManager em = emFactory.createEntityManager();

    Query query = em.createNamedQuery("Passengers.findByPassportNum");
    query.setParameter("passportNum", passport);
    List<Passengers> result = query.getResultList();            
    em.close();

    for(int i = 0; i < result.size(); i++)
    {
        name = result.get(i).getName();
        surname = result.get(i).getSurname();
        email_address = result.get(i).getEmail();
    }
}
catch(Exception e)
{
    response.sendRedirect("ErrorPage.html");
}

if(email_address.isEmpty() == false)
{
      //Send email using email address
} 
```

当用户在数据库中有一个电子邮件地址时，此代码可以正常工作。但是，如果数据库中的电子邮件字段为空，则 GlassFish Server 会给我一个空指针异常。

归咎于这一行的绝对是这一行：

```
 email_address = result.get(i).getEmail(); 
```

出于某种原因，当用户没有电子邮件时，这一行给了我刚刚描述的错误。我怎么解决这个问题？

**编辑**

getEmail方法是在创建实体类的时候自动生成的（我用过持久化）。

这是它的代码：

```
public String getEmail() {
    return email;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T16:22:23.910

我认为问题是这一行：

```
if(email_address.isEmpty() == false)
{
      //Send email using email address
} 
```

当数据库的电子邮件为空时，您可能会收到`null`回复。您正在`isEmpty()`对空引用调用操作，这会导致`NullPointerException`.

`null`打电话前做检查`isEmpty()`

例子：

```
if(email_address != null && email_address.isEmpty() == false)
    {
          //Send email using email address
    } 
```

# java - 调用 java.lang.Object 构造函数真的有必要吗？

> ID：13766932
> 
> 赞同：4
> 
> 时间：2012-12-07T16:21:14.677
> 
> 标签：java

我最近安装了字节码大纲 Eclipse 插件，发现我的测试类

```
public class Test {
} 
```

调用 java.lang.Object 的构造函数

```
public class Test {
  public <init>()V
   L0
    LINENUMBER 15 L0
    ALOAD 0
    INVOKESPECIAL java/lang/Object.<init>()V
    RETURN
   L1
    LOCALVARIABLE this LTest; L0 L1 0
    MAXSTACK = 1
    MAXLOCALS = 1
} 
```

`INVOKESPECIAL java/lang/Object.<init>()`V 表示调用 java.lang.Object 的构造函数

这有什么意义吗？通过 java.lang.Object 字节码判断

```
 public <init>()V
   L0
    LINENUMBER 37 L0
    RETURN
    MAXSTACK = 0
    MAXLOCALS = 1 
```

它什么也没做。刚回来。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T16:26:15.007

为了满足JVM 规范中关于结构约束的[第 4.9.2 节，它必须：](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.9.2)

> 每个实例初始化方法（第 2.9 节），除了派生自类 Object 的构造函数的实例初始化方法外，必须在访问其实例成员之前调用 this 的另一个实例初始化方法或其直接超类 super 的实例初始化方法。

现在，对于直接子类的类，可以放宽*该*`Object`规则- 但我怀疑它是否有任何好处，并且会不优雅（IMO）。如果`Object`构造函数将来*确实*执行了一些初始化怎么办？你真的想要一个允许你绕过它的规范吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T16:28:25.253

Java 编译器不应`java.lang.Object`区别于任何其他可能具有更复杂的默认构造函数的基类。因此，基类的构造函数必须从任何子类的构造函数中执行。该字节码对于将来修改基类（包括 ）也是安全的`Object`：如果有一天有人更改了基类，则不应重新编译子类的代码。

BTW changes in base class including Object are not so exotic: think about instrumentation packages. If you want to instrument the JDK and for example count all created object you want to modify byte code of `java.lang.Object`. Now, if byte code does not contain invocation of `Object` constructor your instrumented code just will not run.

# outlook - 尝试将 Outlook 2010 表单区域（.ofs 文件）添加到 Visual Studio 2012 时出现异常

> ID：13766938
> 
> 赞同：2
> 
> 时间：2012-12-07T16:21:41.410
> 
> 标签：outlook, visual-studio-2012, outlook-addin, outlook-2010

我在新表单区域向导上单击“完成”后收到此消息

> 处理文件 [文件路径].ofs 时出错
> 
> 错误：无法将 System._ComObject 类型的 COM 对象转换为接口类型 Microsoft.Vbe.Forms.UserForm。此操作失败，因为对具有 IID 的接口的 COM 组件上的 QueryInterface 调用因以下错误而失败：未注册接口（来自 HRESULT 的异常：0x80040155）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T13:06:47.190

这似乎是与 64 位版本的 Office 2010 的兼容性问题。出于绝望，我卸载了我的 64 位版本并安装了 32 位，之后我能够毫无问题地创建基于 .ofs 文件的表单区域。

# java - 为什么java中的集合有int索引？

> ID：13766939
> 
> 赞同：11
> 
> 时间：2012-12-07T16:21:42.693
> 
> 标签：java, collections

```
ArrayList(int initialCapacity) 
```

和 java 中的其他集合在`int`索引上工作。

不能有一些情况`int`不够**，**可能需要**超过**范围`int`吗？

**更新：** Java 10 或其他版本必须为此开发新的 Collection 框架。`long`与当前集合一起使用会**破坏****向后兼容性**。不是吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-07T16:22:23.763

理论上可以，但是目前JVM不支持这么大的数组（索引超出整数范围的数组），因此ArrayList也不支持。

有必要吗？这本身不是问题的一部分，但似乎出现了很多，所以无论如何我都会解决它。简短的回答是在大多数情况下，不，但在某些情况下，是的。`int`Java中an的上限值是`2,147,483,647`，略高于 20 亿。如果这是我们正在讨论的字节数组，那么就我们可以存储在数组中的字节量而言，上限略高于 2GB。早在 Java 被构想出来的时候，一台典型的机器的内存比这少一千倍并不是什么不寻常的事情，这显然不是什么大问题——但现在即使是低端（台式机/笔记本电脑）机器也有更多内存远不止于此，更不用说大型服务器了，显然它不再是任何人都无法达到的限制。（是的，我们可以将字节打包到一个包装对象中，然后将它们组成一个数组，但这不是我们在这里要解决的问题。）如果我们切换到`long`数据类型，然后将字节数组的上限推到超过 9.2 艾字节（超过 90 亿 GB）。这使我们至少在可预见的情况下坚定地回到“我们不需要明智地担心这个限制”的领域未来。

那么，Java 是否正在做出这种改变？Java 10 的计划之一是解决“大数据”问题，其中很可能包括对具有`long`基于索引的数组的支持。显然这还有很长的路要走，但 Oracle 至少在[考虑它](http://www.theregister.co.uk/2012/03/07/oracle_java_9_10_roadmap/)：

> JDK 9 的桌面是让 Java 虚拟机 (JVM) 管理程序感知以及提高其性能的举措，而 JDK 10 可以从 32 位移动到 64 位可寻址数组以用于更大的数据集。

从理论上讲，您可以通过使用您自己的集合类来解决此限制，该集合类使用多个数组来存储其数据，从而绕过 an 的隐式限制`int`- 因此，如果您现在真的需要此功能，这在某种程度上是可能的，只是目前相当混乱。

如果有这个功能，就向后兼容性而言？好吧，您显然不能只将所有`int`s 更改为`long`s，那里需要更多样板文件，并且根据实现选择，甚至可能为这些大型集合提供新的集合类型（考虑到我怀疑他们会找到自己的方式进入大多数Java代码，这可能是最好的选择。）无论如何，关键是虽然向后兼容性当然是一个问题，但有很多潜在的方法可以解决这个问题，所以它不是任何想象力的阻碍。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T16:33:27.253

事实上你是对的，像数组列表这样的集合目前只支持 int 值，但是如果你想绕过这个约束，你可以使用 Maps 和 Sets，其中 Key 可以是你想要的任何东西，因此，你可以拥有尽可能多的条目。但我个人认为 int 值对于像数组这样的结构就足够了，但如果我想获得更多，我想我会使用 Derby 表，在这种情况下数据库变得更有用。

# android - android .apk 大小增加

> ID：13766941
> 
> 赞同：3
> 
> 时间：2012-12-07T16:21:51.807
> 
> 标签：android, eclipse, apk, eclipse-adt

我注意到我的应用程序的应用程序大小，正如 android 报告的那样，相对于两个月前的同一个应用程序来说是两倍，尽管我只做了很小的修改。即使从两个月前使用的相同源代码构建 .apk，我也获得了更大的 .apk。我做了一些调查，发现 classes.dex 更大。构建环境似乎发生了一些变化。最后一个 android SDK 是否有可能导致更大的 .dex 类？是因为别的原因吗？我在 Eclipse Indigigo 中使用 android SKD：Android SDK Tools rev。21 Android SKD 平台工具修订版。16

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-21T23:20:11.293

检查您的资源，检查您是否在项目中包含或排除了一些库，检查项目中的 .jar 文件。清理并构建您的项目。

# android - 如何获得歌曲名称？安卓

> ID：13766943
> 
> 赞同：0
> 
> 时间：2012-12-07T16:21:59.250
> 
> 标签：android, mediastore

我在 SD 卡上有歌曲，我正在尝试获取该歌曲的标题：

```
File f = new File(filename);

String[] projection = { MediaStore.Audio.Media._ID, 
                        MediaStore.Audio.Media.ARTIST,
                        MediaStore.Audio.Media.TITLE,
                        MediaStore.Audio.Media.DATA, 
                        MediaStore.Audio.Media.DISPLAY_NAME,
                        MediaStore.Audio.Media.DURATION};

Cursor musiccursor = managedQuery(Uri.fromFile(f), 
                        projection, null, null, null);
musicTV.setText(musiccursor.getString(3)); 
```

但在最后一行我有`NullPointerException`。感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T16:30:55.740

你有没有看到[这个](https://stackoverflow.com/q/7768631/507120)让你达到 90%，然后[这](http://developer.android.com/guide/topics/providers/content-provider-basics.html)会让你走完剩下的路。

1.  查询设备
2.  初始化光标
3.  遍历光标

困难的部分是理解列的抽象性质。请记住，它是一个数据库表，可以可视化为电子表格。不要忘记 Catch 声明！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T16:28:11.373

如果您使用光标，当您获取一些内容时，您必须将光标移动到第一个元素，因为光标指向第一个元素之前。尝试使用：

```
Cursor musiccursor = managedQuery(Uri.fromFile(f),  projection, null, null, null);
cursor.moveToFirst();
musicTV.setText(musiccursor.getString(3)); 
```

# sql - SQL：逐记录比较两个表

> ID：13766946
> 
> 赞同：0
> 
> 时间：2012-12-07T16:22:05.583
> 
> 标签：sql, sql-server, cursor, fetch

我想通过记录比较两个表。每个表都有两个光标。代码看起来像这样

```
Declare Cursor c1 for SELECT * from Table1
OPEN c1
While @@Fetch_status=0
Begin
  Declare Cursor c2 for SELECT * from Table2
  OPEN c2
  WHILE @@Fetch_Status=0
  Begin
     /*Comparison happens here*/
  END
END 
```

当 fecthing 时，我必须指定我正在获取哪个游标，我该怎么做？

**编辑**

对于 Table1 中的每条记录，我想

*   根据主键在 Table2 中搜索该记录。
*   找到后，我想根据 table1 中的列值更新 Table2 中的额外列值。
*   当 table2 中缺少这条记录时，我想将它从 table1 复制到 table2 并设置 table2 中额外列的默认值。

打开其他解决方案（不限于游标）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T18:49:45.747

如果表具有相同的列定义，最快的方法就是使用'except'子句：

```
SELECT * from Table1
except
SELECT * from Table2 
```

也以相反的方式运行它：

```
SELECT * from Table2
except
SELECT * from Table1 
```

您将看到确切的设置差异：

**[除了和相交](http://msdn.microsoft.com/en-us/library/ms188055.aspx)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T16:31:22.590

**[Redgate 有一个很好的工具](http://www.red-gate.com/products/sql-development/sql-data-compare/)**，如果你宁愿花几美元：

您可以免费试用，看看它是否适合您的需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T17:12:16.453

你就不能...

```
SELECT * FROM Table1 LEFT JOIN Table2 ON <your matching criteria> 
```

...然后对右“一半”为 NULL 的行执行 INSERT 并为那些不是的行执行 UPDATE？

# gridview - EXTJS 4.1，网格行体 tpl 上的事件监听器

> ID：13766948
> 
> 赞同：1
> 
> 时间：2012-12-07T16:22:07.733
> 
> 标签：gridview, extjs, listener, onclicklistener, dom-events

目前我在 extjs 中面临一个问题，即我有一个带有特征 rowbody 的网格。在这个 rowbody 功能中，我渲染了一个 tpl。

这个tpl如下：

```
.
.
.
'<tpl for="datalist">' + 
  <b>{name}</b>: </tpl>
   <span class="test"><em class="test1">{number}</em></span>' + 
'</tpl>
.
.
. 
```

当用户打开 rowbody 时，会有另一个数据，其中一部分是我正在显示的内容，将会有一个这样的列表：

数据列表：111111,2222,3333.....

当用户单击其中一个数字以获取 dom 元素时，我需要获取数字并触发特殊事件，那么在不使用 dataview 的情况下如何执行此操作？我已经在 dataview 中实现了它，但是将它包含在 rowbody 功能中很重要。

请不要犹豫，询问任何其他信息......我希望这已经足够了，你可以帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T23:26:38.493

您可以在模板内添加一个 javascript onclick 事件。

```
 <tpl for="datalist">' + <b><a href=# onclick=alertName("{name}")>{name}</a></b>

function alertName(name){
    alert(name);
} 
```

# c# - 在Visual C#中匹配字符串中的字符

> ID：13766956
> 
> 赞同：3
> 
> 时间：2012-12-07T16:22:33.923
> 
> 标签：c#

我正在使用 Visual C# 来计算单词错误率我有一个文本框用于引用，这是正确的句子，一个用于错误的假设。

为了计算 WER，我需要计算： 替换：已更改的单词，这是我的第一个问题 Insert：已插入句子中的单词 Deleted：已从原始句子中删除的单词

对于 EX：

参考：这是一个 NPL 程序。假设：这是一个 NPL 酷。

它：替换是：更正一个：替换 NPL：正确程序：删除酷：插入

我尝试了 dasblinkenlight 提出的算法（顺便说一句非常感谢）我工作了，但是有一个运行时错误我无法弄清楚，在线

```
int x=  Compute(buffer[j], buffer_ref[i]); 
```

指数数组的边界之外。

这是我的代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        string [] hyp = new string[20];
        string [] refrence = new string[20];
        string [] Anser= new string[20];
        string[] buffer = new string[20];
        string[] buffer_ref = new string[20];
        int count = 0; // number of words 
        string ref2=" " ;
        string hyp2 = " ";
        string Anser2 = " ";
        string buffer2 = " ";

        int corecct_c=0;
        int corecct_d = 0;
        int corecct_i = 0;

        //====================================================================

        public Form1()
        {
            InitializeComponent();
            for (int i = 0; i <= 19; ++i)
            {
                hyp[i] = null;
                buffer[i] = null;
            }
        }

        private void textBox2_TextChanged(object sender, EventArgs e)
        {
            refrence = this.textBox2.Text.Split(' ');
            buffer_ref = this.textBox2.Text.Split(' ');

        }

        private void textBox1_TextChanged(object sender, EventArgs e)
        {
            hyp = this.textBox1.Text.Split(' ');
            buffer = this.textBox1.Text.Split(' ');
            //hyp = this.textBox1.Text;
            // fname1.Add(this.textBox1.Text);

        }

        public void correct(string[] R)
        {

            for (int i = 0; (i <= 19) && (R[i] != "."); ++i)
            {

                if (buffer[i] == refrence[i])
                { buffer[i] = "0";
                buffer_ref[i] = "0";
                    corecct_c = corecct_c + 1;
                    Anser[i] = "C";
                }
            }

        }

        // function that compute 2 strings
        public static int Compute(string s, string t)
        {
            int n = s.Length;
            int m = t.Length;
            int[,] d = new int[n + 1, m + 1];

            // Step 1
            if (n == 0)
            {
                return m;
            }

            if (m == 0)
            {
                return n;
            }

            // Step 2
            for (int i = 0; i <= n; d[i, 0] = i++)
            {
            }

            for (int j = 0; j <= m; d[0, j] = j++)
            {
            }

            // Step 3
            for (int i = 1; i <= n; i++)
            {
                //Step 4
                for (int j = 1; j <= m; j++)
                {
                    // Step 5
                    int cost = (t[j - 1] == s[i - 1]) ? 0 : 1;

                    // Step 6
                    d[i, j] = Math.Min(
                        Math.Min(d[i - 1, j] + 1, d[i, j - 1] + 1),
                        d[i - 1, j - 1] + cost);
                }
            }
            // Step 7
            return d[n, m];
        }

        public void sub(){

            for (int j = 0;j<=19;j++) 
         {
             if (buffer[j].IndexOf("0") != -1)
             {

                 for (int i = 0; i <= 19; i++)
                 {

                     if (buffer_ref[j].IndexOf("0") != -1)
                     {

                       int x=  Compute(buffer[j], buffer_ref[i]);
                       if (x > 3)
                       {
                           buffer[j] = "0";
                           Anser[j] = "S";

                       }

                     }//end if

                 } 

             }//end if 

        }//end for 

        }// end fun

        private void button1_Click(object sender, EventArgs e)
        {

            correct(refrence);
            sub();
            for (int i = 0; (i <= 19) && (refrence[i] != "."); ++i)
            {
                //loop intialize 
                ref2 = ref2 + " " + refrence[i];
                hyp2 = hyp2 + " " + hyp[i];
                Anser2 = Anser2 + " " + Anser[i];
                buffer2 = buffer2 + " " + buffer[i];
                count++;
                            }

            listBox1.Items.Add(" Refrence :" + ref2);
            listBox1.Items.Add(" HYp :" + hyp2);
            listBox1.Items.Add(" Anser:" + Anser2);
            listBox1.Items.Add(" buffer:" + buffer2);
            listBox1.Items.Add(count);

        } 

        private void Form1_Load(object sender, EventArgs e)
        {

        }

        private void label1_Click(object sender, EventArgs e)
        {

        }

        private void button2_Click(object sender, EventArgs e)
        {

        }

        private void label2_Click(object sender, EventArgs e)
        {

        }

        private void listBox1_SelectedIndexChanged(object sender, EventArgs e)
        {

        }

    }
} 
```

你能帮我吗 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T16:24:56.453

有一种内置方法可以测试两行是否相同，但没有内置方法可以判断两行是否相似。您需要实现一种测量字符串相似度的算法，例如[*Levenshtein Distance*](http://en.wikipedia.org/wiki/Levenshtein_distance) - 一种非常常见的[*编辑距离*](http://en.wikipedia.org/wiki/Edit_distance)算法。根据特定于您的要求的某些阈值，可以将具有较小编辑距离的行声明为相似。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T16:24:43.440

您需要使用一种[算法](http://en.wikipedia.org/wiki/Approximate_string_matching)来比较两个字符串之间的“距离”：

> 匹配的紧密程度是根据将字符串转换为精确匹配所需的基本操作数来衡量的。这个数字称为字符串和模式之间的编辑距离。通常的原始操作是：
> 
> ```
> insertion: cot → coat
> deletion: coat → cot
> substitution: coat → cost 
> ```

# sql-server-2008 - 在平面文件管理器 SSIS 数据流任务 sql server 2008 中导入数千个文件

> ID：13766958
> 
> 赞同：1
> 
> 时间：2012-12-07T16:22:34.190
> 
> 标签：sql-server-2008, ssis

我正在尝试使用 SSIS 包将多个制表符分隔的文件导入到 sql server 表中。我设置了平面文件源并创建了一个平面文件连接管理器，但有人告诉我我需要为此创建多个平面文件源。这不可能是真的吧？有没有我可以使用循环和源文件夹目录位置的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T16:31:35.583

只要文件都是相同的结构，您就可以使用文件类型的 for-each 循环。将其指向包含文件的文件夹，并将变量分配给文件+路径。然后将该变量用作平面文件连接管理器上的表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T18:55:13.400

这是一个显示如何执行此操作的链接：[http ://www.sqlis.com/sqlis/post/Looping-over-files-with-the-Foreach-Loop.aspx](http://www.sqlis.com/sqlis/post/Looping-over-files-with-the-Foreach-Loop.aspx)

我喜欢该页面上使用的布局和图形指示器。

# r - 插入符号包相当于 randomForest.getTree

> ID：13766960
> 
> 赞同：2
> 
> 时间：2012-12-07T16:22:37.610
> 
> 标签：r, random-forest

我一直在使用 randomForest.getTree 为我的森林中的每棵树提供文本表示，但最近切换到 caret 包来训练森林（方法='rf'）。我怎样才能获得 randomForest.getTree 理解的对象（因为据称插入符号使用相同的底层代码）或以其他类似方式打印出树？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T16:27:01.817

刚刚想通了：

```
library(caret)
.... #load data
model <- train(x,y,method='rf')
getTree(model$finalModel) 
```

# vb.net - Linq - 范围变量隐藏封闭块中的变量

> ID：13766963
> 
> 赞同：2
> 
> 时间：2012-12-07T16:22:55.080
> 
> 标签：vb.net, linq

我在公共程序中有几个 Linq 语句（这里有 2 个）：

```
'this one gets us table like this: "number of tickets, day"
Dim ticketsCreated = From ticket In CreatedTickets
   Group ticket By GroupKey = New With {Key .IssueDate = CDate(ticket.Date).Date}
   Into g = Group Select New 
       With {Key .IssuesCount = g.Count(), Key .IssueDate = GroupKey.IssueDate}

'this one gets us table like this: "number of tickets, day"
Dim ticketsClosed = From ticket In ClosedTickets
    Group ticket By GroupKey = New With {Key .IssueDate = CDate(ticket.Date).Date}
    Into g = Group Select New 
         With {Key .IssuesCount = g.Count(), Key .IssueDate = GroupKey.IssueDate} 
```

我在两个语句中都得到了关于 GroupKey 的以下错误：

```
Range variable hides a variable in an enclosing block, a previously defined range variable, 
or an implicitly declared variable in a query expression 
```

我没有在我的 Linq 语句之外的任何地方声明名为 GroupKey 的变量。

# .htaccess - .htaccess 域目录通配符重定向

> ID：13766964
> 
> 赞同：2
> 
> 时间：2012-12-07T16:22:57.520
> 
> 标签：.htaccess, mod-rewrite, url-rewriting, rewrite, http-status-code-301

我目前有 2 个域 domain1.com 和 domain2.com。我需要 [wildcard] 301 将 /reviews/ 中的所有页面从 domain1.com 重定向到 domain2.com，而其余页面仍可在 domain1.com 上访问

> domain1.com/reviews/city/New-York/ -> domain2.com/reviews/city/New-York/ domain1.com/reviews/city/Seattle/ -> domain2.com/reviews/city/Seattle/

等等等等。

这就是我现在在 domain1.com 的 htaccess 中所拥有的，但无论出于何种原因它都无法正常工作：

```
RewriteRule ^reviews/(.*)$ http://domain2.com/reviews/$1 [R=301,L] 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T16:35:18.497

`RewriteEngine on`尝试在指令上方添加以下规则：

```
RedirectMatch 301 /reviews/(.*) http://domain2.com/reviews/$1 
```

这必须在任何重写之前，并且必须在域 1 的根文件夹中的 htaccess 文件中。

# c++ - 如何启动文件/目录/URL 的关联应用程序？

> ID：13766969
> 
> 赞同：11
> 
> 时间：2012-12-07T16:23:24.147
> 
> 标签：c++, qt, winapi, cross-platform, shellexecute

**Linux**似乎很简单：`xdg-open <file/directory/URL>`.

显然，**Mac**是类似的：`open`应该使用而不是`xdg-open`. 我无法使用 Mac，因此无法对其进行测试。

对于**Windows**，我发现了 4 个不同的建议，而我尝试过的那些都失败了。

*   [是否有一种非 java、跨平台的方式来启动特定文件类型的关联应用程序？](https://stackoverflow.com/q/1480971/341970) 建议
    `start`

*   [java - 如何从Java中关注shell打开文件的默认程序？](https://stackoverflow.com/q/2765823/341970)建议
    `cmd /c start ...`

*   [如何为给定文件打开用户系统首选编辑器？](https://stackoverflow.com/q/526037/341970)
    [如何使用 Java 找出默认文件打开器？](https://stackoverflow.com/q/2211209/341970) 建议
    `RUNDLL32.exe`

*   [在 C 中使用 ShellExecute() 打开 .txt在 C++ 代码中使用 Windows 本机程序打开文件](https://stackoverflow.com/q/5127249/341970)[的正确方法是什么](https://stackoverflow.com/q/11007537/341970)
    [如何使用 ShellExecute 在 Windows 中使用 C++ 打开 html 文件？](https://stackoverflow.com/q/10737854/341970)建议
    `ShellExecute`

我已经尝试过使用`system()`and`QProcess::startDetached()`和`"http://www.stackoverflow.com"`作为参数的前 3 个，但它们都失败了；`start`虽然从命令行工作得很好。我还没试过`ShellExecute`。

**Windows 相当于`xdg-open`什么？**在我看来，是的，`start`但为什么我的尝试`start`失败了？

**是`ShellExecute`我唯一的选择吗？**

* * *

**编辑**我认为`QDesktopServices::openUrl()`仅适用于网页，因为它不适用于文件或目录。

经过一些调试，我发现如果我在 Windows 上的路径中替换`\\`为`/`，它适用于文件，但目录仍然没有打开。任何想法我做错了什么？

```
QDir dir("C:/Documents and Settings/ali");

qDebug() << "Exists? " << dir.exists();

qDebug() << dir.absolutePath();

QDesktopServices::openUrl(QUrl(dir.absolutePath()));

qDebug() << "External app called"; 
```

应用程序输出：

```
Exists?  true 
"C:/Documents and Settings/ali" 
External app called 
```

但是什么也没发生，目录没有打开。在 Linux 上，目录按预期使用默认文件管理器打开。

* * *

**解决方案：**由于 Qt 错误*和*Windows 怪癖（应用程序窗口格式错误），我最终使用`ShellExecute`. 这给了我足够的灵活性，可以以一定的代价实现我想要的……

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-07T16:33:57.113

你为什么不直接使用 Qt 的支持呢？例如：

```
QDesktopServices::openUrl(QUrl("/home/realnc/test.pdf")); 
```

这将在 Acrobat Reader 中打开文档。一般来说，它遵循我的操作系统中的首选应用程序设置，适用于所有具有一个或多个应用程序关联的文件类型。最重要的是，它独立于平台。

编辑：它在 Linux 上打开目录而不是在 Windows 上打开目录的事实闻起来像一个错误。最好在[Qt 的 bug tracker](https://bugreports.qt-project.org)上报告这一点。同时，当文件是目录时，您可以为 Windows 提供一种解决方法：

```
#ifdef Q_WS_WIN
    if (QFileInfo(path).isDir())
        QProcess::startDetached("explorer", QStringList(path));
    else
#endif
        QDesktopServices::openUrl(QUrl(path)); 
```

您也可以使用 cmd.exe 的启动命令来执行此操作，但您会在几分之一秒内弹出一个丑陋的终端：

```
QProcess::startDetached("cmd", QStringList() << "/C" << "start"
                               << QDir::toNativeSeparators(path)); 
```

# sencha-touch - 将变量传递给 setActiveItem

> ID：13766971
> 
> 赞同：0
> 
> 时间：2012-12-07T16:23:42.787
> 
> 标签：sencha-touch, sencha-touch-2

如何使用 Sencha Touch 2 的 setactiveitem 函数传递变量。

我所拥有的是（正在工作）而不是使用 setactiveitem 我正在使用 pop 和 push

```
var main = this.getMain();
    main.pop();
    main.push({
        xtype: 'carddetails',
        card: card,
        title: card.get('name'),
    }); 
```

但是我切换到带有布局卡的面板，当我激活视图时，我想传递一些变量：

```
main.setActiveItem('#carddetails',card); //something like this 
```

在这种情况下如何传递变量？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T16:42:29.733

您不能，只需创建一个功能，例如`updateViewWithData(data)`在显示之前更新视图的位置。

顺便说一句，您之前没有将数据传递给您的`push()`函数，而是通过传递一个配置对象来创建一个视图（您不再对您的`setActiveItem()`.

# javascript - HTML - 如何使用相对于 HTML 标签的选择偏移量

> ID：13766972
> 
> 赞同：0
> 
> 时间：2012-12-07T16:23:46.037
> 
> 标签：javascript, jquery, html

假设我的 HTML 看起来像这样

```
<div>
    <p> start<span>span</span>end </p>
</div> 
```

我需要能够在进行选择时获得偏移量，而不忽略跨度标签。

例如假设用户选择

```
t<span>span</span>e 
```

我希望得到 4 作为起始偏移量和 24 作为结束偏移量。通过 window.getSelection() 获得的选择对象返回 1,8，这对我来说相当无用。我显然需要处理用户只选择内部跨度或部分跨度等的所有情况。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T11:41:26.540

我最终解决了它：

```
 var range = sel.getRangeAt(0);
            // inserts two spans at the beginning and end of the range, to
            // calculate the offsets
            var div = document.createElement("span");
            div.setAttribute("class", START_NODE);
            range.insertNode(div);
            range.collapse(false);
            div = document.createElement("span");
            div.setAttribute("class", END_NODE);
            range.insertNode(div);
            // gets the offsets by looking up the location of the inserted spans
            // removes them after finding the offsets (also so the starting
            // offset won't screw up the ending offset)
            comment.startOffset = p.html().indexOf('<span class="' + START_NODE + '">');
            $("." + START_NODE).remove();
            comment.endOffset = p.html().indexOf('<span class="' + END_NODE + '">');
            $("." + END_NODE).remove();
            p.html(p.html()); 
```

基本上，我在范围选择的开头添加了一个 SPAN，然后折叠范围并在其末尾添加了一个 SPAN。然后我简单地搜索了我添加的第一个跨度的索引，以及我添加的第二个跨度的索引来查找偏移量。

# javascript - 带有数组的javascript的奇怪行为

> ID：13766973
> 
> 赞同：5
> 
> 时间：2012-12-07T16:23:45.947
> 
> 标签：javascript, arrays

让我们考虑以下 JavaScript 片段

```
var arr = [];
function pushMe()
{
      var temp = { "name": "me" };
      arr.push(temp)
      console.log(arr)
      temp["name"] = "you";
      arr.push(temp)
      console.log(arr)
} 
```

我很惊讶地看到输出为`[Object { name="you"},Object { name="you"}]`

当我们推送引用时，两者都必须引用同一个对象。但至少在第一次推送之后输出必须像`Object { name="me"}`

为什么会这样？？

谢谢 ：）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T16:25:55.907

Chrome 控制台的问题在于它不会复制您传递给它的对象。

到 Chrome 构建控制台时，它显示的对象已经改变。

如果你想看到你的“我”，试试这个：

```
 var arr = [];
  var temp = { "name": "me" };
  arr.push(temp)
  console.log(arr)
  setTimeout(function(){
      temp["name"] = "you";
      arr.push(temp)
      console.log(arr)
  }, 3000); 
```

并在不到 3 秒的时间内查看阵列内部。

小提琴：http: [//jsfiddle.net/TMDq2/](http://jsfiddle.net/TMDq2/)

有些人可能将其视为错误，有些人可能将其视为优化。这至少是一个边界实现......

# coldfusion - FW/1 中的每个子系统错误文件

> ID：13766975
> 
> 赞同：0
> 
> 时间：2012-12-07T16:23:51.610
> 
> 标签：coldfusion, error-handling, fw1

我正在尝试获取 FW/1 中的每个子系统错误文件。我知道以下不起作用。

```
variables.framework = {
...

error = getSubsystem() .error', 
... 
```

**更新**

我试过了

```
<cffunction name="onError">
<cfargument name="Exception" type="Struct" required />
<cfargument name="Event"     type="String" required />

<cfif Arguments.Exception.Type EQ 'missinginclude' >
    <cfoutput>#layout('#getSubsystem()#:default',view('login/error'))#</cfoutput>
    <cfreturn false />
</cfif>

<cfreturn super.onError(ArgumentCollection=Arguments) />
</cffunction> 
```

我得到一个错误：

**传递给 onError 函数的 EXCEPTION 参数不是 Struct 类型。**

如果组件名称被指定为此参数的一种类型，则可能无法找到组件的定义文件或无法访问。

```
The error occurred in /Applications/ColdFusion10/cfusion/wwwroot/Pluma/Application.cfc: line 189
 187 : </cffunction>    
 188 :  
 189 : <cffunction name="onError">
 190 :     <cfargument name="Exception" type="Struct" required />
 191 :     <cfargument name="Event"     type="String" required /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T19:44:30.320

您可以做的是覆盖 Application.cfc 中的**onError**方法以手动调用相关的每个子系统文件。

下面是一个在非默认子系统中使用布局处理 missinginclude 错误的示例：

```
<cffunction name="onError">
    <cfargument name="Exception" type="Struct" required />
    <cfargument name="Event"     type="String" required />

    <cfif Arguments.Exception.Type EQ 'missinginclude' >
        <cfoutput>#layout('subsys2:default',view('main:errors/404'))#</cfoutput>
        <cfreturn false />
    </cfif>

    <cfreturn super.onError(ArgumentCollection=Arguments) />
</cffunction> 
```

返回 super.onError 将导致调用标准错误处理。

为了使其完全针对每个子系统，您可以执行类似`view(getSubsystem()&':errors')`或类似的操作。

如果您正在执行潜在的复杂逻辑，请记住使用适当的 try/catch - 在错误处理中跟踪错误可能会很尴尬。

# java - Spring - 如何以编程方式引用 bean

> ID：13766976
> 
> 赞同：1
> 
> 时间：2012-12-07T16:23:57.670
> 
> 标签：java, spring, javabeans, code-injection

我以编程方式设置了我的应用程序配置，并且我正在导入这样的 bean：

```
@Configuration
@ImportResource( value= { "classpath:myBean.xml"})
public class AppConfig extends WebMvcConfigurerAdapter
{ 
```

在`myBean.xml`我有这个：

```
 <bean id="myBeanId" class="my.domain.myBeanClass">
    <property name="sessionFactory" ref="my_session_factory" />
    <property name="someOtherProperty"...
  </bean> 
```

这工作正常并被`sessionFactory`注入`myBeanClass`.

但是，如果我尝试以编程方式实例化同一个 bean，转换`ImportResource`为`Import`，我得到“没有为依赖项找到类型 [org.hibernate.SessionFactory] ​​的匹配 bean...”错误。

```
@Configuration
@Import(BeanConfig.class)
public class AppConfig extends WebMvcConfigurerAdapter
{ 
```

Bean 配置类：

```
@Configuration
public class BeanConfig
{
  @Autowired
  private SessionFactory sessionFactory;

  @Bean(name="myBeanId")
  public MyBeanClass createMyBeanClass()
  {
    MyBeanClass mbc = new MyBeanClass();
    mbc.setSessionFactory(sessionFactory);
    ....
    return mbc; 
```

编辑：肯定会创建 sessionFactory bean，如果我添加 required = false 到@Autowired，然后在加载所有内容后手动注入 sessionFactory。它工作正常。

编辑 2：我没有 web.xml，我使用的是 servlet 3，所以以编程方式声明了所有内容。这是我的 web.xml 等价物

```
@Configuration
public class WalletInitialiser implements WebApplicationInitializer
{

  @Override
  public void onStartup(ServletContext aServletContext) throws ServletException
  {
    AnnotationConfigWebApplicationContext mvcContext
      = new AnnotationConfigWebApplicationContext();

    mvcContext.register(AppConfig.class);
    mvcContext.scan("config.packages", "class.packages");
    aServletContext.addListener(new ContextLoaderListener(mvcContext));
    //add security filters, dispatcher to servlet, logback 
```

我在另一个类中配置了我的 SessionFactory，配置包中的 HibernateConfig 正在从中获取

```
mvcContext.scan("config.packages", "class.packages"); 
```

这节课的摘录是：

```
@Configuration
@EnableTransactionManagement
public class HibernateConfig
{
  @Bean(name="my_session_factory")
  public LocalSessionFactoryBean baseSessionFactory()
  {
    LocalSessionFactoryBean lsfb= new LocalSessionFactoryBean();
    lsfb.setPackagesToScan("class.packages");
    lsfb.setAnnotatedPackages("class.packages");

    //add hibernate props for datasource
    return lsfb;
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T16:06:50.443

这个问题可能与[How to make factoryBeans work...](http://forum.springsource.org/showthread.php?82677-How-to-make-factoryBeans-work-with-javaConfig)有关。尽管它不是完全匹配的[配置 Hibernate 会话工厂](http://www.java-forums.org/blogs/spring-framework/518-configuring-hibernate-sessionfactory-spring.html)可能会为解决方法提供见解。

我建议试试这个：

```
@Configuration
public class BeanConfig {
   @Autowired
   private LocalSessionFactoryBean sessionFactoryBean;

   @Bean(name="myBeanId")
   public MyBeanClass createMyBeanClass() {
      MyBeanClass mbc = new MyBeanClass();
      mbc.setSessionFactory((SessionFactory) sessionFactoryBean.getObject());
     ....
     return mbc;
   }
} 
```

可能还有其他方法可以解决这个问题，我没有跟踪 spring 源论坛中提到的 JIRA 问题，它们可能指向“标准”方式。或者，Spring 文档可能会深入了解 Java 配置中 FactoryBeans 的处理。

# java - 使用 libgdx 绘制带纹理的多边形

> ID：13766978
> 
> 赞同：4
> 
> 时间：2012-12-07T16:24:06.003
> 
> 标签：java, opengl, polygon, libgdx

我使用 libgdx 的渲染周期有问题，基本上我需要用方形纹理填充一个区域，并且该区域的最后一部分可能比纹理更小或形状不同，所以这意味着我需要渲染一个任意形状的四边形并在其上贴上纹理，切割我不需要的部分。

![基本上这是我需要绘制的多边形的形式](../Images/0ac857c485dc14fa446e1423cdab88ae.png)

我对如何做到这一点有点迷茫，到目前为止，我已经看到 PolygonRegion 和 PolygonSpriteBatch 可能会为我做这件事，但我有点担心实例化一个我只会在一个对象上使用的新重物.

有没有其他选择？也许是 Mesh 类，但我想确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T22:26:18.003

我建议使用 a`Mesh`来准确定义您想要的区域。定义顶点并将它们映射到纹理坐标有点繁琐，但很高兴知道一些更高级别的 API（如 *Batch 位）下面发生了什么。此外，*Batch API 旨在共享跨多个对象上传单个纹理的权重，这听起来可能不适用于这种情况。（另一方面，即使 Batch 对象有点“重量级”，在实践中它们实际上也可能不是问题。）

要考虑的另一种方法是将对象渲染为方形网格，但为区域外的所有像素定义具有透明像素的纹理。（我假设非方形是您可以离线知道的，并且不是动态的。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T19:52:16.517

如果您为此目的实例化 PolygonSpriteBatch，这不是什么大问题。该对象主要包含缓冲几何的几何数据。当然，您需要关心正确的渲染顺序，在需要时调用 flush 或 end。

网格是另一种选择，但它可能需要更多的工作，因为您需要在那里手动提供顶点和纹理坐标。

从性能的角度来看，使用 Mesh 渲染一个精灵会稍微快一些。我不确定在您的情况下差异是否会以某种方式影响 fps。

编辑：忘了提一下，如果您使用 SpriteBatch 渲染一个对象，请不要使用默认构造函数，它会保留大量内存。

# c# - GridView 自动生成列的数据源需要什么？

> ID：13766980
> 
> 赞同：0
> 
> 时间：2012-12-07T16:24:08.480
> 
> 标签：c#, asp.net, data-binding, gridview, autogeneratecolumn

我创建了自定义数据类型类，以我需要的方式格式化数据。我从数据库中检索到的数据是 .NET 基本类型，因此我需要遍历 DataTable，将每个项目转换为其自定义类型，并将转换后的项目放入一个新表中。我还将旧表中的列名复制到新表中。问题是，当我将 GridView 绑定到我的新表时，它会引发异常：

```
HttpException:  
The data source for GridView with id 'TestGrid' did not have any properties
or attributes from which to generate columns.  Ensure that your data source 
has content.  

Stack Trace:
at System.Web.UI.WebControls.GridView.CreateAutoGeneratedColumns(PagedDataSource dataSource)
at System.Web.UI.WebControls.GridView.CreateColumns(PagedDataSource dataSource, Boolean useDataSource)
at System.Web.UI.WebControls.GridView.CreateChildControls(IEnumerable dataSource, Boolean dataBinding)
at System.Web.UI.WebControls.CompositeDataBoundControl.PerformDataBinding(IEnumerable data)
at System.Web.UI.WebControls.GridView.PerformDataBinding(IEnumerable data)
at System.Web.UI.WebControls.DataBoundControl.OnDataSourceViewSelectCallback(IEnumerable data)
at System.Web.UI.DataSourceView.Select(DataSourceSelectArguments arguments, DataSourceViewSelectCallback callback)
at System.Web.UI.WebControls.DataBoundControl.PerformSelect()
at System.Web.UI.WebControls.BaseDataBoundControl.DataBind()
at System.Web.UI.WebControls.GridView.DataBind() 
```

我需要向我的 DataTable 添加什么才能使 autogeneratecolumns 工作？

编辑：这是数据表的代码：

```
 // Populate first DataTable with data from database.
     adapter = new DataAdapter("SELECT status, date_ordered, date_due FROM import_table", OpenConnection);
     DataTable originalTable = new DataTable();
     adapter.Fill(originalTable)

     // Second DataTable for converted table data.
     DataTable convertedTable = new DataTable();

     // The list of custom datatypes to convert to.
     Type[] newTypes = {typeof(TrackingStatus), typeof(Date), typeof(Date)};

     // Set the ColumnName and DataType on each column of the new table.
     for(int i = 0; i < originalTable.Columns.Count; i++)
     {
        convertedTable.Columns.Add();
        convertedTable.Columns[i].ColumnName = originalTable.Columns[i].ColumnName;
        if(newTypes.Length > i)
           convertedTable.Columns[i].DataType = newTypes[i];
     }

     // Convert each item from the old table and add it to the new table.
     foreach(DataRow oldRow in originalTable.Rows)
     {
        DataRow newRow = convertedTable.NewRow();

        for(int i = 0; i < convertedTable.Columns.Count; i++)
        {
           if(newTypes.Length <= i)
              newRow[i] = oldRow[i];
           else if(newTypes[i] == typeof(Date))
              newRow[i] = Date.FromObject(oldRow[i]);
           else if(newTypes[i] == typeof(TrackingStatus))
              newRow[i] = TrackingStatus.FromObject(oldRow[i]);
           else if(newTypes[i] == typeof(EmailAddress))
              newRow[i] = EmailAddress.FromObject(oldRow[i]);
        }

        convertedTable.Rows.Add(newRow);
     }

     // Bind the GridView.
     displayGrid.DataSource = convertedTable;
     displayGrid.DataBind(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T16:37:50.790

当您将每个转换为自定义类型时，不要创建新的数据表，而是创建一个新的列表并将列表绑定到数据源。例如

```
var list = new List<MyClass>();

var myType = //Convert your type
list.Add(myType);

grid.DataSource = list; 
```

当然，这一切都只是一个如何去做的想法。

更新：之后看到你的代码：

尝试这个：

创建一个名为 ImportRow 的类

```
class ImportRow
{
    private string m_Status = string.Empty;
    private DateTime m_DateOrdered;
    private DateTime m_DateDue;

    public ImportRow() { }

    public string Status
    {
        get { return m_Status; }
        set { m_Status = value; }
    }

    public DateTime DateOrdered
    {
        get { return m_DateOrdered; }
        set { m_DateOrdered = value; }
    }

    public DateTime DateDue
    {
        get { return m_DateDue; }
        set { m_DateDue = value; }
    }

} 
```

然后将其用作：

```
 var importedData = new List<ImportRow>();

        foreach (DataRow oldRow in originalTable.Rows)
        {
            var newRow = new ImportRow();

            newRow.Status = oldRow["status"].ToString();
            newRow.DateDue = Convert.ToDateTime(oldRow["date_due"].ToString());
            newRow.DateOrdered = Convert.ToDateTime(oldRow["date_ordered"].ToString());

            importedData.Add(newRow);
        } 
```

然后

```
 displayGrid.DataSource = importedData;
 displayGrid.DataBind(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T16:31:00.153

您的自定义类型需要像这样的公共属性：

```
public class Foo
{
    public int Id;
    public string Name;
} 
```

或者您需要将其`DataTable`本身用作`DataSource`.

# ios - 如何按字母顺序将 plist 数据放入表视图中

> ID：13766982
> 
> 赞同：2
> 
> 时间：2012-12-07T16:24:11.047
> 
> 标签：ios

我正在使用此代码从 plist 文件中加载一些数据：

```
self.title =@"Data"; 
NSString *path = [[NSBundle mainBundle] pathForResource:@"Data"ofType:@"plist"]; 
dict =[NSMutableDictionary dictionaryWithContentsOfFile:path]; 
sortedCountries =[[NSArray alloc]initWithArray:[dict objectForKey:@"Name"]]; 
```

我在 tableView 中显示信息：

```
cell.textLabel.text = [sortedCountries objectAtIndex:indexPath.row]; 
```

它正确显示了 plist 元素，但我需要按字母顺序显示数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T16:30:51.543

改变这一行：

```
sortedCountries =[[NSArray alloc]initWithArray:[dict objectForKey:@"Name"]]; 
```

为了这：

```
NSArray *array = [dict objectForKey:@"Name"];
sortedCountries = [array sortedArrayUsingSelector:@selector(compare:)]; 
```

# c - 如何在 C 中处理命令行参数？

> ID：13766985
> 
> 赞同：0
> 
> 时间：2012-12-07T16:24:17.903
> 
> 标签：c, testing, input, cmd, output

我想知道如何通过命令行获取其他输入？我想寻找“-w”和一个数字，所以它看起来像“-w60”和“-s”。这个输入是通过命令行给出的，所以它看起来像这样：

* * *

```
c:\用户\用户名\桌面> wrapfile.exe -w5 -s test.txt
```

输出应如下所示：

```
你好  
,  
这个  
是一个  
测试
```

* * *

-w5 和 -s 的意思是：

-w5 = 宽度（一次只能显示 5 个字符）

-s = 间距（包括间距，因此尽可能多地容纳整个单词）

我想创建一个扫描这两个字符的函数，如果有人知道如何格式化输出以便它完成它需要做的事情，那也会有所帮助。

我只是有点困惑，我已经在这个程序上工作了一段时间，我只是想了解如何正确扫描和使用这些东西。

这是我当前的代码，它从命令行接收无限数量的文本文件：

```
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char **argv)
{

    int l = 1;
    while(l != argc)
    {
        FILE *fp;    

        fp = fopen(argv[l], "rb");
        l++;

        if (fp != NULL) 
        {
        int i = 1;
        do
        {
            i = fgetc(fp);   
            printf("%c",i);
            printf(" ");
        }
        while(i!=-1);
        fclose(fp);
        }
        else
        {
        printf("Error.\n");
        }
    }
}

/*

void scanningForWS(int argc, char **argv)
{
}

*/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T16:32:41.357

如果你传递`-w5 -s test.txt`给你的程序，你的 argv 是：

```
argv[0] = "wrapfile.exe" 
argv[1] = "-w5" 
argv[2] = "-s" 
argv[3] = "test.txt" 
```

所以：

```
int l = 1;
fp = fopen(argv[l], "rb"); 
```

肯定不是你想要的。

出于说明目的...为了打印到“受限”宽度，您可以执行以下操作：

```
char * h = "this is a string longer than width"; // you'd get this from your file
int width = argv[1][2] - '0'; // you wouldn't hardcode this...
int count;

for(count = 0; count < strlen(h); count++){
    if((count % width) < width - 1)
        printf("%c", str[count];
    else
        printf("%c\n", str[count];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T17:16:38.250

我觉得`getopt`使用起来很麻烦。编写自己的测试并不太难。例如：

```
#include <string.h>
#include <stdio.h>

int main(int argc, char **argv) {
   int haveSpacing = 0;
   int haveWidth = 0;
   FILE *fp = 0;
   while (*++argv) {
      if (!strcmp(*argv, "-s")) { // check for -s switch
         haveSpacing = 1;
      }
      else if (sscanf(*argv, "-w%d", &haveWidth) == 1) { // check for -wxx
      }
      else if (**argv == '-') { // reject anything else beginning with "-"
         printf("invalid switch %s\n", *argv);
         return 1;
      }  
      else if (argv[1]) { // filenaname must be last arg, so arg[1] must be NULL
         printf("invalid arg %s\n", *argv);
         return 1;
      }
      else if (!(fp = fopen(*argv, "rb"))) { // open last arg, the filename
         perror(*argv);
         return 1;
      }
   }
   if (!fp) {
      printf("missing filename\n");
      return 1;
   }

   // ...
   return 0;
} 
```

# list - 计算正值

> ID：13766992
> 
> 赞同：0
> 
> 时间：2012-12-07T16:24:28.207
> 
> 标签：list, haskell

这是我的功能。它检查正值，将它们更改为 1 并将它们相加。

```
countPositive :: [Integer] -> Integer
countPositive xs = foldr (+) 0 $ map (^0) (filter (>0) xs) 
```

有没有更好的策略来计算正值而不使用`length`,`foldr`和？`map``filter`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-07T16:56:55.767

Foldr 似乎不在这里。你想要 foldl' 代替。这是我的解决方案：

```
countPos :: (Num a, Ord a) => [a] -> Int
countPos = length . filter (> 0) 
```

由于您出于某种原因不想使用`length`，您基本上只是重新发明它：

```
countPos xs = sum (1 <$ filter (> 0) xs) 
```

或另一种方法：

```
countPos = foldl' (\x _ -> succ x) 0 . filter (> 0) 
```

有很多很多方法可以做到这一点。如果有 100 人回答这篇文章，您可能会得到 100 种不同的方法，但最简单的方法是使用`filter`和`length`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-07T16:28:27.117

当然，只需直接计算它们`foldr`：

```
countPositive = foldr (\n count -> if n > 0 then count + 1 else count) 0 
```

或重新`length`实现`foldr`：

```
countPositive = foldr (const succ) 0 . filter (>0) 
```

# spring - 无法实例化 bean 类：未找到默认构造函数；嵌套异常是 java.lang.NoSuchMethodException

> ID：13766993
> 
> 赞同：0
> 
> 时间：2012-12-07T16:24:28.537
> 
> 标签：spring, spring-mvc

我正在尝试`@Autowired`一个简单的类，没有注释，只是一个有一些计算的类。但是，当我尝试`@Autowired`该类时，在我的控制器中出现以下错误：

控制器：

```
@Controller
public class LeituraController extends HemisphereController {

private static final String VIEW = "calculation/index";

@Autowired
private MyClass evapo;

@RequestMapping(value = "/request", method = RequestMethod.GET)
@SuppressWarnings("unchecked")
public ModelAndView leituras() {
    ModelAndView view = new ModelAndView(VIEW);
    Double valorMax = evapo.calculation();
    return view;
}} 
```

类的例子：

```
public class MyClass {

public Double calculation(){
       //implementation
    }

} 
```

错误：

```
Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: private net.pontoall.hemisphere.core.calculo.evaportranspiracao.MyClass net.pontoall.hemisphere.controller.LeituraController.evapo; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [net.pontoall.hemisphere.core.calculo.evaportranspiracao.MyClass] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:513)
at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:92)
at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:284)
... 21 more
 Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [net.pontoall.hemisphere.core.calculo.evaportranspiracao.MyClass] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoSuchBeanDefinitionException(DefaultListableBeanFactory.java:948)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:817)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:731)
at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:485)
... 23 more 
```

任何人都可以帮助我吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T16:50:07.730

注入的 MyClass 实例必须是 Spring bean。使用`@Component`或其他 bean 注释对其进行注释，或在 spring XML 配置文件中声明它。