# StackOverflow 问答 12988000-12988999

# wordpress - Wordpress 添加谷歌地图？

> ID：12988000
> 
> 赞同：-1
> 
> 时间：2012-10-20T11:33:22.830
> 
> 标签：wordpress, google-maps, map

我正在使用 WordPress 创建一个网页。我只想在我的网站中使用谷歌地图。

如下所示。

![在此处输入图像描述](../Images/ad5f91679e171c42786dd69d12c2b535.png)

我认为我们不需要这个功能的插件。我怎样才能让这发生在我的 WordPress 页面中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T10:47:53.607

Mr.SandhanaMurali.. 首先你应该学习wordpress 插件的... 许多插件用于添加googlemap .. 搜索并获取一些插件。使用插件的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T12:02:31.180

阅读这篇[文章](http://en.support.wordpress.com/google-maps/)。我会给你完整的参考你的问题。

否则在 youtube 上观看此[视频](http://www.youtube.com/watch?v=7OL9To27zZ0)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-03T22:41:41.127

绝对不是试图发送垃圾邮件，但我已经为 Wordpress 开发了一个映射插件，它具有大量功能，足以提供帮助。我有一个基本版和专业版，所以请随意试用演示。希望它有所帮助： http: [//www.mapifypro.com](http://www.mapifypro.com)

# c++ - 从不同线程写入文件的正确方法（使用 Qt c++）

> ID：12988010
> 
> 赞同：0
> 
> 时间：2012-10-20T11:34:57.647
> 
> 标签：c++, multithreading, qt, locking

我有创建线程的线程池，每个线程工作者计算一些工作，完成后将结果写入文件，只有 1 个结果文件，每个工作者线程需要写入。
现在我的问题是我如何保证不会有任何锁或丢失写入数据到分配线程试图写入单个文件的文件？这种情况的正确策略是什么？
mybe 将所有结果保存在内存中？或结果

我已经在使用 QThreadPool 框架，我需要找到解决方案。
我也徘徊，是否从工作线程写入单个文件，我将不得不使用
单例文件管理器或静态类，这是个好主意吗？对于多线程应用程序？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-20T12:05:14.707

因此，您有许多并发线程竞争一个共享资源。这需要某种同步原语，例如[mutex](http://en.wikipedia.org/wiki/Mutex)。

这是（非 Qt 特定的）代码，展示了 10 个线程同时写入单个文件。附带说明一下，C++11 引入了很多好东西，比如`std::mutex`（而且`std::thread`，这样可以帮助消除一些特定于 Qt 的线程代码）。

```
#include <fstream>   
#include <mutex>
#include <thread>    
#include <vector>

std::mutex m;
std::ofstream file;

int main() {
  file.open("file.txt");

  std::vector<std::thread> workers;
  for (int i = 0; i < 10; ++i) {       
    workers.push_back(std::thread([=i] {
      for (int j = 0; j < 10; ++j) {
        std::lock_guard<std::mutex> lock(m);
        file << "thread " << i << ": " << j << endl;
      }
    }));
  }
  for (auto& worker : workers) {
    worker.join();
  }

  file.close();
  return 0;
} 
```

当然，如果您的代码中有很多地方访问共享资源，最好将它与互斥锁一起封装在一些“访问器”类中，该类将管理对资源的所有状态修改调用。

PS 如果您不在 C++11 编译器上，则可以使用`boost::mutex`或 Qt 特定的互斥体包装器。关键是您需要*一些*与共享资源关联的同步原语。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T12:04:28.587

正如我假设的那样，您创建自己的`Runnable`，源自`QRunnable`

您可以在构建`Runnable`类时传递一些上下文信息。例如，您需要通过设备写入和`mutex`锁定设备。

```
class Runnable: public QRunnable
{
public:
    Runnable(QIOdevice* device, QMutex* mutex):_d(device), _m(mutex){}
    void run()
    {
        saveInFile();
    }

private:
    void saveInFile()
    {
        QMutexLocker lock(_m);
        //now only one thread can write to file in the same moment of time
        device->write(...);
    }

    QIOdevice* _d;
    QMutex* _m;
}; 
```

# android - Android - 工具栏的标准高度

> ID：12988011
> 
> 赞同：96
> 
> 时间：2012-10-20T11:35:02.073
> 
> 标签：android, user-interface, toolbar

我想在我的应用程序中创建一个工具栏，我想知道 android 中工具栏的标准高度是多少？

我希望它足够大，可以容纳一根手指，但不要太大。有标准尺寸吗？

* * *

## 回答 #1

> 赞同：226
> 
> 时间：2016-03-30T17:13:46.453

最好使用`?attr/actionBarSize`@Jaison Brooks 评论。

在[材料指南](https://material.io/components/app-bars-top#specs)中，建议高度为 56dp：

> 工具栏：56dp

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-10-20T12:54:36.997

可触摸元素的建议最小尺寸为 48 dp，有关更详细的指标，请参阅[此页面](http://developer.android.com/design/style/metrics-grids.html)。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-05-14T15:07:47.570

除了@vedant1811 答案之外，您还可以通过编程方式`actionBarSize`从 attrs 获取：

```
TypedValue tv = new TypedValue();
if (context.getTheme().resolveAttribute(android.R.attr.actionBarSize, tv, true))
{
    actionBarHeight = TypedValue.complexToDimensionPixelSize(tv.data, context.getResources().getDisplayMetrics());
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-07-09T10:58:10.437

您可以使用 android 中已经存在的工具栏小部件并放置高度 wrap_content ，因此最好获得它附带的默认大小。

这里

```
<android.support.v7.widget.Toolbar
    android:id="@+id/toolbar"
    android:layout_height="wrap_content"
    android:layout_width="match_parent"
    android:background="@color/dark_cerulean">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:paddingEnd="16dp"
        android:paddingStart="16dp">

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:layout_gravity="end"
        android:gravity="end"
        android:layout_marginEnd="16dp"
        android:textColor="@color/white"
        android:id="@+id/toolbar_title" />

        <ImageView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/image1"
            android:id="@+id/image"/>

    </LinearLayout>

</android.support.v7.widget.Toolbar> 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-07-19T14:29:58.927

您可以使用以下方法以编程方式获取 AppBar 高度

```
private static final int DEFAULT_TOOLBAR_HEIGHT = 56;

private static int toolBarHeight = -1;

public static int getToolBarHeight(Context context) {
        if (toolBarHeight > 0) {
            return toolBarHeight;
        }
        final Resources resources = context.getResources();
        final int resourceId = resources.getIdentifier("action_bar_size", "dimen", "android");
        toolBarHeight = resourceId > 0 ?
                resources.getDimensionPixelSize(resourceId) :
                (int) convertDpToPixel(DEFAULT_TOOLBAR_HEIGHT);
        return toolBarHeight;
    }

public static float convertDpToPixel(Context context, float dp) {
    float scale = context.getResources().getDisplayMetrics().density;
    return dp * scale + 0.5f;
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-08-18T21:28:47.253

对于**手机和****平板电脑**`56dp`等大型设备，您可能有更多空间**`64dp`**

 *** * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-08-30T10:49:44.580

这是我的 Kotlin 解决方案

```
fun getActionBarHeight(activity: Activity): Int {
        val typedValue = TypedValue()
        if (activity.theme.resolveAttribute(
                android.R.attr.actionBarSize,
                typedValue,
                true
            )
        ) return TypedValue.complexToDimensionPixelSize(
            typedValue.data,
            activity.resources.displayMetrics
        )
        return 0
    } 
```**

# vb.net - 将记录保存到数据库时显示进度条

> ID：12988015
> 
> 赞同：-2
> 
> 时间：2012-10-20T11:35:42.557
> 
> 标签：vb.net

如何在更新 ms access 数据库中的 10-30000 条记录时显示进度条。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T12:26:52.103

如果没有更多细节，我只能提供要完成的操作列表：

*   首先，您需要知道存在多少修改/插入的记录。
*   然后您应该订阅您的 OleDbDataAdapter 的事件 RowUpdated。
*   将进度条初始值设置为零，将最大值设置为修改记录的计数。
*   在 RowUpdated 事件中，您的进度条值加一。

[请参阅 MSDN 上的 OleDbDataAdapter 文档以供参考](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbdataadapter_methods%28v=vs.100%29.aspx)

# java - 过滤列表视图中的数据

> ID：12988017
> 
> 赞同：1
> 
> 时间：2012-10-20T11:35:56.190
> 
> 标签：java, android

嗨，我正在列表视图中过滤数据，有一个带有搜索功能的编辑框....

现在，如果我输入 la 并输入搜索按钮，过滤器将完成....

下面是代码

```
 double lat[] = new double[] { 32.711857, 32.80964, 32.751261, 32.753932, 32.751622, 32.769955, 32.770677, 34.304875, 32.854782, 32.761829 };
double lon[] = new double[] { -117.159901, -117.238223, -117.247137, -117.16355, -117.165782, -117.162005, -117.16561, -118.461662, -117.27464,
        -117.172343 };

double latitude, longitude;

String places[] = new String[] { "Gaslamp", "Pacific Beach", "Ocean Beach", "Uptown", "Hillcrest", "Mission Valley", "Fashion Valley",
        "La Jolla", "San Diego","North Park" };

int zipCode[] = new int[] { 92101, 92109, 92107, 92103, 92103, 92123, 92008, 92037, 92115, 92104 }; 
```

现在，当我单击 SearchImageView 时，将执行以下代码...

```
 ImageView imgSearch = (ImageView) findViewById(R.id.ivIconSearch);
    imgSearch.setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            if (adapter != null) {
                adapter.getFilter().filter(edtSearch.getText().toString());
                adapter.notifyDataSetChanged();
            }
            return true;
        }
    }); 
```

现在，当我单击列表视图时，将执行以下代码..

```
 adapter = new SimpleAdapter(PredefinedLocation.this, fillMaps, R.layout.list_item_deal, new String[]{"name"}, new int[]{R.id.name});
    // Adding data into listview
    lv.setAdapter(adapter);
    lv.setTextFilterEnabled(true);
    lv.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> arg0, View view, int position, long id) {
            // TODO Auto-generated method stu

        }
    }); 
```

在这里，我应该编写什么代码才能获得可过滤的纬度，经度，邮政编码.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T11:41:23.400

您可以将此功能添加到您的自定义适配器：

```
 @Override public Filter getFilter() {

            Filter myFilter = new Filter() {

                @Override
                protected void publishResults(CharSequence constraint, FilterResults results) {
                    // TODO Auto-generated method stub
                    if (!m_orders.isEmpty()){
                        clear();
                    }

                    for (int i = 0; i < tempList.size(); i++) {
                        if(tempList.get(i).getName().toLowerCase().startsWith(constraint.toString().toLowerCase())){
                            add(tempList.get(i));
                        }
                    }

                    notifyDataSetChanged();
                }

                @Override
                protected FilterResults performFiltering(CharSequence constraint) {
                    // TODO Auto-generated method stub
                    return null;
                }
            };  

            return myFilter;
        } 
```

您可以将此过滤器搜索绑定到您的editText：

```
et_search.addTextChangedListener(new TextWatcher() {

            @Override
            public void onTextChanged(CharSequence s, int start, int count,
                    int after) {
                // TODO Auto-generated method stub

                m_adapter.getFilter().filter(s, new FilterListener() {

                    @Override
                    public void onFilterComplete(int count) {
                        // TODO Auto-generated method stub
                        m_adapter.notifyDataSetChanged();
                    }
                });
            }

            @Override
            public void beforeTextChanged(CharSequence arg0, int arg1,
                    int arg2, int arg3) {

            }

            @Override
            public void afterTextChanged(Editable str) {

            }
        }); 
```

使用此链接：[https ://stackoverflow.com/questions/12930403/how-to-search-name-by-searchview/12930564#12930564](https://stackoverflow.com/questions/12930403/how-to-search-name-by-searchview/12930564#12930564)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T05:41:41.850

我得到了答案......

虽然我知道这不是有效的方法，但对我来说它解决了问题

在适配器中，如果我打印适配器的值，我会得到如下答案

```
 System.out.println(adapter);

  I got value like below ....

    "{name=SanDeigo}"

  based on that....

    Intent intent = new Intent(PredefinedLocation.this, MainActivity.class);
            int length = "{name=".length();
            String str = adapter.getItem(position).toString();
            if (str != null)
                if (str.length() > 0)
                    str = str.substring(length, str.length() - 1);

            for (int i = 0; i < places.length; i++) {
                if (places[i].equals(str)) {
                    intent.putExtra("nearLocation", places[i]);
                    //System.out.println("Near Location = " + places[i]);
                    intent.putExtra("latitude", lat[i]);
                    //System.out.println("LATITUDE = " + lat[i]);
                    intent.putExtra("longitude", lon[i]);
                    //System.out.println("LONGITUDE = " + lon[i]);
                    intent.putExtra("zipcode", zipCode[i]);
                    //System.out.println("ZIP CODE = " + zipCode[i]);
                    PredefinedLocation.this.startActivity(intent);
                    break;
                }
            } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T05:56:37.760

最好的方法是自定义 Adapter 类。自己写一个过滤数据数组的方法。`getView()`之后通过方法将过滤后的数据填充到您的列表视图中

# templates - Facelets：任何提供模板的库？

> ID：12988020
> 
> 赞同：-1
> 
> 时间：2012-10-20T11:36:42.777
> 
> 标签：templates, jsf-2, jar, facelets

就像标题一样，有没有像 PrimeFaces 或 RichFaces 这样的面向模板的库？

我正在构建自己的，包括一些固定/液体/弹性基础布局，但我想知道是否有人已经完成了这项无聊的工作。

**更新**

对不起，我没有解释自己。我说的是一种由模板树（和可选的bean）组成的框架上的框架。我目前正在使用这个根模板，它与一些 bean 和实体捆绑在一个 jar 文件中，用于我的所有应用程序：

```
<!DOCTYPE html>
<html lang="#{localeBean.locale.language}" 
    xmlns="http://www.w3.org/1999/xhtml" 
    xmlns:ui="http://java.sun.com/jsf/facelets" 
    xmlns:h="http://java.sun.com/jsf/html" 
    xmlns:f="http://java.sun.com/jsf/core" 
    xmlns:c="http://java.sun.com/jsp/jstl/core" 
    xmlns:p="http://primefaces.org/ui" 
    xmlns:o="http://omnifaces.org/ui" 
    xmlns:s="http://shapeitalia.com/jsf2" 
    xmlns:sc="http://java.sun.com/jsf/composite/shape">

    <f:view locale="#{localeBean.locale}">
        <h:head>
            <title><ui:insert name="module"/> - <ui:insert name="title"/></title>
            <link rel="shortcut icon" type="image/x-icon" href="#{resource['shape/favicon/shape.ico']}" />
            <h:outputStylesheet library="shape" name="css/core.css" />
            <h:outputStylesheet library="shape" name="css/fileicons.css" />
            <h:outputScript library="shape" name="js/jquery.jsPlumb-1.3.15-all.js" />
            <h:outputScript library="shape" name="js/core.js" />
        </h:head>

        <h:body>
            <ui:debug hotkey="x" />
            <p:growl id="messages" globalOnly="false" autoUpdate="true" showDetail="true" showSummary="true" />

            <p:ajaxStatus onstart="statusDialog.show();" onsuccess="statusDialog.hide();" />

            <p:dialog modal="true" widgetVar="statusDialog" header="loading..." resizable="false" closable="false">
                <h:graphicImage library="shape" name="images/ajaxloadingbar.gif" />
            </p:dialog>

            <div>
                <ui:insert name="header">
                    <h:form>
                        <s:panelGrid cellStyle="border: 0;">
                            <s:column style="text-align: left;">
                                <p:commandLink action="index" >
                                    <h:graphicImage library="shape" name="images/shape.png" height="30px" style="vertical-align: middle; float: left; border: 0"/>
                                </p:commandLink>
                            </s:column>
                            <s:column style="text-align: right;">
                                <p:menuButton rendered="#{not empty request.userPrincipal}" value="#{request.userPrincipal.name}" style="float: right">
                                    <p:menuitem actionListener="#{sessionBean.logout}" action="index" ajax="false" icon="ui-icon-power" value="#{bundle.logout}"/>
                                </p:menuButton>
                            </s:column>
                        </s:panelGrid>
                    </h:form>
                </ui:insert>
            </div>

            <h:panelGroup rendered="#{not empty request.userPrincipal}">
                <ui:insert name="content">insert content here</ui:insert>
            </h:panelGroup>

            <h:panelGroup rendered="#{empty request.userPrincipal}">
                <h:form>
                    <p:panel header="login">
                        <h:panelGrid columns="3">
                            <h:outputLabel for="login_email" value="Email:" />
                            <h:outputLabel for="login_password" value="Password:" />
                            <h:panelGroup />

                            <p:inputText id="login_email" value="#{requestScope.email}" label="email" size="32"/>
                            <p:password id="login_password" value="#{requestScope.password}" label="password" feedback="false" size="32"/>
                            <p:commandButton value="Login" action="#{sessionBean.login}" icon="ui-icon ui-icon-check" ajax="false"/>

                            <p:message for="login_email" />
                            <p:message for="login_password" />
                            <h:panelGroup />
                        </h:panelGrid>
                    </p:panel>
                </h:form>
            </h:panelGroup>

            <ui:insert name="external" />

        </h:body>
    </f:view>
</html> 
```

这只是根之一。

我想知道是否有人已经完成了这样的工作并捆绑了它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T00:56:58.947

好的，没有这样的事情。

最好的组件有`p:layout`.

# php - 如何编写自己的克隆函数

> ID：12988022
> 
> 赞同：2
> 
> 时间：2012-10-20T11:36:46.020
> 
> 标签：php, oop, clone

每一种面向对象的语言（或支持 OOP 的语言），无论是 C++、Java、Python、PHP 都有`clone`自己的函数，它可以返回对象的深拷贝或浅拷贝。谁能告诉我如何`clone`从头开始创建我自己的函数，无论是深拷贝还是浅拷贝？显然我不能使用任何语言结构`serialize`，更不用说`clone`它自己了！一个例子`PHP`会很棒，尽管任何其他语言也很好，但我需要知道如何去做，仅此而已。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T11:42:50.967

## 第1部分

```
/* memcpy example */
#include <stdio.h>
#include <string.h>

struct {
  char name[40];
  int age;
} person, person_copy;

int main ()
{
  char myname[] = "Pierre de Fermat";

  /* using memcpy to copy string: */
  memcpy ( person.name, myname, strlen(myname)+1 );
  person.age = 46;

  /* using memcpy to copy structure: */
  memcpy ( &person_copy, &person, sizeof(person) );

  printf ("person_copy: %s, %d \n", person_copy.name, person_copy.age );

  return 0;
} 
```

取自[http://www.cplusplus.com/reference/clibrary/cstring/memcpy/](http://www.cplusplus.com/reference/clibrary/cstring/memcpy/)

## 第2部分

[![1](../Images/bfb0ac0d9186476a4fde9d8e4301285a.png)](https://i.stack.imgur.com/6aelz.png)

我假设您需要复制复杂对象的所有子元素（如图 1 中复制虚构对象 A，如果您只需要复制黑色对象但保留其他对象作为参考，则可以使用我上面链接的代码, 下面的伪代码用于如果你想复制它的所有子项) 上图显示了现实和我们如何看待一个对象

```
function MyCloneRecursive(object A) : object
{
    pointer Cpy;
    allocate memory to Cpy;
    memcpy(&Cpy,&A,sizeof(A))
    //now copy all its child elements
    //assuming there is a way to do a foreach that
    //for object A there are A.B,A.C and inside A.B there is D
    //and childname={"B","C"} and inside of B childname={"D"}
    for each childname in object A 
    {
        eval("Cpy." + childname + "=MyCloneRecursive(A." + childname + ")");
    }
}

//note this is really bad programming 
//clone function is better written in the runtime
//(or its a part of the intepreter not a includable code) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T12:02:24.367

我将在这里介绍 PHP：

```
// Bad class
class Obj{
    private $_Property = 'value';
    public function __construct(){
        if(!func_num_args()){
            throw new \InvalidArgumentException('Needs arguments.');
        }
    }
}
// Instantiate
$obj = new Obj(1);
// Clone
$obj1 = clone $obj;
// Deep clone
$obj2 = unserialize(serialize($obj));
// Dump all (see it worked)
var_dump($obj);
var_dump($obj1);
var_dump($obj2);
// Now try to clone yourself
$objclass = get_class($obj);
// But you don't know the arguments for every class.
// And drama unfolds here, exceptions get thrown!
$obj3 = new $objclass(); 
```

**PHP 克隆 $obj; 和反序列化（序列化（$obj））；避开 __construct()-or**。这样，您无需将其放入烤箱即可获得烘烤的物体。要克隆自己，您需要将其放入烤箱（更新）。但是你不知道每个对象的参数和 __construct-or 可能会破坏你！

*不要重新发明核心语言轮子。你几乎不能！*

**PS**：*也有无法克隆的对象。*我现在想到了 SimpleXMLElement。您需要使用 simplexml_load_string($sxe->asXML()) 重新解析这个或导入到 DOM 节点并返回到 SXE。

# java - 包含 lastIndexOf?

> ID：12988023
> 
> 赞同：0
> 
> 时间：2012-10-20T11:36:47.673
> 
> 标签：java, list, indexing

是否可以将 java 包含与 lastIndexOf 一起使用？

我正在从文件中获取一些信息，并且需要获取它的最后一次出现。

文件看起来像这样

```
17,560.0
17,583.0
17,606.0 
```

我正在使用这样的东西。

```
System.out.println(lines.indexOf("17")); 
```

但是它不会工作，因为它会寻找正好 17，并且不会再占用了。有什么办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T11:44:32.173

假设您的行在 a`List<String> lines`或类似的东西中，我将对这些行进行反向迭代`lines`，检查它是否以所需的值开头。例如：

```
for (int i = lines.size() - 1; i >= 0; i--) {
    if (lines.get(i).startsWith("17") {
        return lines.get(i);
    }
} 
```

请注意，我们在 开始`lines.size() - 1`和结束`0`，因为`List`索引是从零开始的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T11:41:49.623

不，您需要遍历集合才能获得那种`lastIndexOf`.

就像是：

```
int li = -1, i=0;
for (line : lines) {
    if (line.startsWith("17")) {
       li = i;
    }
    i++
} 
```

然后，您将获得`li`最后一个索引的值，其中一行以`17`. 如果`li`是，则未找到`-1`以 开头的值。`17`

# php - 用javascript检测html表中的输入按钮

> ID：12988029
> 
> 赞同：0
> 
> 时间：2012-10-20T11:37:53.697
> 
> 标签：php, javascript, html

我在 html 表中插入输入按钮并使用 javascript 检测按下的按钮时遇到问题。一切正常，但是，如果我在 javascript 中提醒它，我可以看到它总是给我第一行的元素。另外，如果我按下最后一行的元素。

现在我将用代码更好地解释。通过这种方式，我用按钮填充表格并且一切正常：

```
//$shows is an array
$size = count($shows);

if ($size != 0) {   
echo "<table class='datatable'>";
echo "<thead>";
echo "<tr>";
echo "<th>ID</th>";
echo "<th>Name</th>";
echo "<th>Language</th>";
echo "<th>Add</th>";
echo "</tr>";
echo "</thead>";
echo "<tbody>"; 
}

for($i = 0 ; $i < $size; ++$i) {

echo "<tr>";
echo "<td>{$shows[$i]->id}</td>";
echo "<td>{$shows[$i]->name}</td>";
echo "<td>{$shows[$i]->language}</td>";
echo "<td>";
echo "<input type='hidden' id='add' value='yes' />";
echo "<input type='hidden' id='seriesid' value={$shows[$i]->id} />";
echo "<input type='hidden' id='lang' value={$shows[$i]->language} />";
echo "<input type='submit' id='name-submit' class='button plain' value='ADD'>";
echo "<div id='add-data'></div>";
echo "</td>";
echo "</tr>";
}

  if ($size != 0) {
  echo "</tbody>";
  echo "</table>";
  } 
```

因此，通过这种方式，我可以看到表格中的所有信息，并且还可以看到每一行的按钮。然后我想检测每一行按下的按钮，我在javascript中有这个文件：

```
$('input#name-submit').click(function() {

    var add = $('input#add').val();
    var seriesid = $('input#seriesid').val();
    var lang = $('input#lang').val();
    alert(lang);
    if ($.trim(add) != '') {

        $.post('AccessDB.php', {add:add, seriesid:seriesid, lang:lang}, function(data) {
            alert(data);
        });
    }

}); 
```

此外，通过这种方式，我可以检测到按下的按钮并向我显示带有 lang 元素的警报，但 lang 元素始终是第一行的元素。如果我按下最后一行的按钮（使用不同的 lang 元素），我总是会看到第一行的元素。例如，如果我使用 the`seriesid`或 name 元素，它始终是第一行的元素。那么，我怎样才能检测到其他行呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T11:41:06.380

您一次又一次地使用相同的 id。使用类而不是类使用

`echo "<input type='hidden' class='add' value='yes' />";`

代替

```
echo "<input type='hidden' id='add' value='yes' />"; 
```

并使用它

```
 var add = $(this).parent().find(".add").val();
    var seriesid = $(this).parent().find('.seriesid').val();
    var lang = $(this).parent().find('.lang').val(); 
```

代替

```
 var add = $('input#add').val();
    var seriesid = $('input#seriesid').val();
    var lang = $('input#lang').val(); 
```

# android - 把AnimationDrawable变成动画？

> ID：12988030
> 
> 赞同：0
> 
> 时间：2012-10-20T11:37:56.200
> 
> 标签：android, animation

我得到了一个运行良好的 AnimationDrawable，但是为了使我想要的工作正常，我必须将它变成一个动画。

这可能吗？

# javascript - 单击页面上的链接时如何在css中添加和删除背景图像

> ID：12988031
> 
> 赞同：2
> 
> 时间：2012-10-20T11:38:02.880
> 
> 标签：javascript, jquery, css, ajax, onclick

我有那个小小提琴

[http://jsfiddle.net/5XXdJ/](http://jsfiddle.net/5XXdJ/)

```
 <img src="http://placehold.it/333/fe3/img/picture2.jpg" id="bg" /><br />

    <a href="" title="Switch" class="menulink">DE</a>
<a href="" title="Switch" class="menulink2">EN</a>
<a href="" title="Switch" class="menulink3">FR</a>

$(function() {
 $('.menulink').click(function(e){
     e.preventDefault();
   $("#bg").attr('src',"http://placehold.it/333/3ef/img/picture1.jpg");
 });

$('.menulink2').click(function(e){
     e.preventDefault();
   $("#bg").attr('src',"http://placehold.it/333/fe3/img/picture2.jpg");
 });

     $('.menulink3').click(function(e){
     e.preventDefault();
   $("#bg").attr('src',"http://placehold.it/333");
 });
}); 
```

它工作正常，但我的问题是：

如果我单击页面上的另一个链接，我需要为选定/活动状态和非活动/默认状态的每个链接类添加背景图像。

例如，链接“de”具有默认的白色背景图像，如果我单击链接，背景图像将变为选定状态的黑色图像。

如果我现在单击“en”，它将使用白色背景图像将“de”链接更改回非活动状态，并将“en”bg-image-link 设置为选定的 state-imagelink，如果单击另一个链接，则会将其删除.

我希望有人有一个想法:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T12:21:17.167

你可以试试这个，我想你正在寻找这种 jquery

**$(this).css("背景图片", "url(/active.jpg)");**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T21:12:56.697

HTML：

```
<div id="container" class="menulink" style="height:300px;width:300px"></div></br>
<div id="links">
  <a href="" title="Switch" id="menulink" class="menulink">DE</a>
  <a href="" title="Switch" id="menulink2">EN</a>
  <a href="" title="Switch" id="menulink3">FR</a>
</div> 
```

CSS：

```
.menulink {
    background-image: url("http://placehold.it/333/3ef/img/picture1.jpg");
}
.menulink2 {
    background-image: url("http://placehold.it/333/fe3/img/picture2.jpg");
}
.menulink3 {
    background-image: url("http://placehold.it/333");
} 
```

JAVASCRIPT：

```
$(function() {    
    $('#links a').click(function(e){
      e.preventDefault();
      var id= $(this).attr('id');
      $('#container').attr('class', '');
      $('#links a').each(function() {
        $(this).attr('class', '');
      });
     $('#' +id).addClass(id);
     $('#container').addClass(id);       
 });
}); 
```

[http://jsfiddle.net/5XXdJ/49/](http://jsfiddle.net/5XXdJ/49/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T12:02:35.333

我可能会从 CSS 类中添加对不同图像的引用，然后在 JavaScript 中根据需要添加/删除它们。例如：

[http://jsfiddle.net/HTL2p/](http://jsfiddle.net/HTL2p/)

HTML：

```
<img src="http://placehold.it/333/fe3/img/picture2.jpg" id="bg" /><br />
<!-- same class on all 3 -->
<a href="" title="Switch" class="menulink">DE</a>
<a href="" title="Switch" class="menulink">EN</a>
<a href="" title="Switch" class="menulink">FR</a> 
```

CSS：

```
/* The default (or "not selected") style */
.menulink {
    background-image: url("http://placehold.it/333");
}

.menulink.selected {
    background-image: url("http://placehold.it/333/fe3/img/picture2.jpg");
} 
```

​ JavaScript：

```
$(function() {
    $('.menulink').click(function (e) {
        e.preventDefault();

        $('.menulink.selected').removeClass('selected');
        $(this).addClass('selected');
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T12:12:46.307

```
 <img src="http://placehold.it/333/fe3/img/picture2.jpg" id="bg" /><br />
 <div id="links">
  <a href="" title="Switch" class="menulink">DE</a>
  <a href="" title="Switch" class="menulink2">EN</a>
  <a href="" title="Switch" class="menulink3">FR</a>
 </div>

<style>
   .active{
     background-image: url("http://placehold.it/333");
   }
</style>

    $(function() {    
     $('#links a').click(function(e){
     e.preventDefault();
     var className = $(this).attr('class');
     if (className == 'menulink') {
        $("#bg").attr('src',"http://placehold.it/333/3ef/img/picture1.jpg");
    } else if (className == 'menulink2')  {
         $("#bg").attr('src',"http://placehold.it/333/fe3/img/picture2.jpg");
    } else {
         $("#bg").attr('src',"http://placehold.it/333");
    }
    $('#links a').each(function() {
        $(this).removeClass('active');
    });

     $(this).addClass('active');

 });
}); 
```

[http://jsfiddle.net/5XXdJ/38/](http://jsfiddle.net/5XXdJ/38/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-20T12:26:03.357

```
 $('.menulink').click(function(e){
        e.preventDefault();
        $("#bg").toggleClass('cls2')
    });

    $('.menulink2').click(function(e){
        e.preventDefault();
        $("#bg").toggleClass('cls3')
    });

    $('.menulink3').click(function(e){
        e.preventDefault();
        $("#bg").toggleClass('cls4')
    }); 
```

[http://jsfiddle.net/sameerast/5XXdJ/39/](http://jsfiddle.net/sameerast/5XXdJ/39/) 我对你的小提琴做了改动，这个小提琴可以帮助你。

# javascript - jQuery：如何取消对一个表列的广泛委托？

> ID：12988032
> 
> 赞同：0
> 
> 时间：2012-10-20T11:38:03.320
> 
> 标签：javascript, jquery, jquery-selectors

这是场景：

我正在一组包含名为“canEdit”的类的表格单元格上创建一个 dblclick 委托。在特定情况下，我想删除此委托，并添加一个基于列的委托来覆盖现有委托。

这是我所拥有的：

```
$('#' + tableID).delegate('tbody tr td.canEdit', 'dblclick', function () {
// Code Here
}); 
```

设置特定属性后，将运行以下内容：

```
$('#' + tableID).undelegate('tbody tr td.canEdit', 'dblclick');
$('#' + tableID).delegate('tbody tr td:nth-child(' + index + ').canEdit.select', 'dblclick', function () {
// Code Here 
}); 
```

我假设其中一个问题是我正在删除所有代表。有没有办法只覆盖和/或删除列上的第一个委托？任何解决方法的想法，而不必创建一个全新的类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T12:43:57.547

您可以使用条件在处理程序中运行不同的代码

```
$('#' + tableID).delegate('tbody tr td.canEdit', 'dblclick', function () {
   if( $(this).index()==7) ){
      /* code for 8th column*/
    }else{
      /*  code for other columns*/
    }
}); 
```

# javascript - 为什么我收到一个空的警报框？

> ID：12988041
> 
> 赞同：0
> 
> 时间：2012-10-20T11:39:43.693
> 
> 标签：javascript, forms, validation

我有提交表单的js函数

```
var bCancel = false;
var errors = new Array();
function validateNewsForm(form) {
    if (bCancel) {
        return true;
    } else {        
        errors = [];        
        var statusArray = new Array();
        statusArray.push(validateRequired(form));
        statusArray.push(validateMaxLength(form));
        statusArray.push(validateDate(form));

        for (status in statusArray) {
            if (!status) {              
                alert(errors.join('\n'));               
                return false;
            }
        }

        return true;
    }
} 
```

validateSmth() 函数工作正常。但是当我输入正确的数据时，我无法保存，因为得到空警报。我只有一条警报消息，现在所有验证功能都为真（以防数据正确）

为什么我会收到空​​警报？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T11:42:55.243

```
for (status in statusArray) {
    if (!status) { 
```

循环为您提供`for in`密钥。对于数组，这些是索引。因此，您正在有效地做`!0`,`!1`等，并`!0`评估为`true`.

你想要一个正常的`for`循环：

```
for(var i = 0; i < statusArray.length; i++) {
    if (!statusArray[i]) { 
```

此外，你正在使用`[]`和`new Array()`一起。最好在`[]`任何地方使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T11:46:46.347

因为 for `status = 0`!status 将是`true`. 修改后的代码：

```
for (var status  = 0; status < statusArray.length; status ++) {
            if (!statusArray[status] ) {              
                alert(errors.join('\n'));               
                return false;
            }
        } 
```

# php - 试图从代码点火器中删除 index.php，但不适用于 post

> ID：12988043
> 
> 赞同：0
> 
> 时间：2012-10-20T11:39:47.330
> 
> 标签：php, codeigniter

重写规则工作正常，除了我发布任何表单时 - 数据发布到的 url 是 domain/index.php/index.php/controller/method。

有任何想法吗？已经尝试过可能会在这里回复。

HT访问：

```
 # rewrite rules
    RewriteEngine On

    # ditch index.php
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ /index.php?/$1 [L] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T08:04:55.180

您可以从 $config['index_page'] = 'index.php'; 中删除 index.php 在 config.php 文件中找到的变量。完整路径 application/config/config.php。

代替

```
$config['index_page'] = 'index.php'; 
```

从

```
$config['index_page'] = ''; 
```

希望它对你有用。

# bash - 从多个服务器获取信息的脚本

> ID：12988046
> 
> 赞同：1
> 
> 时间：2012-10-20T11:40:05.803
> 
> 标签：bash, expect, remote-access

我想从许多服务器收集信息，无论它们的 grub.conf 是否包含“elevator”参数。

现在，无密码密钥身份验证是我目前无法做到的。我可以在脚本中指定密码。

有人可以帮我实现这一目标吗？

这就是我所做的：

```
#!/bin/bash

GRUB="/etc/grub.conf"
_pair="$(</home/wadhwaso/login.txt)"
Server_info="/tmp/server_info"
for e in $_pair
do
             # extract user and ips for each $e in $_pair
        IFS='@'
        set -- $e
        _user="$1"
        _ip="$2"

        sleep 2
        echo "Connecting to server '${_ip}' via SSH..."
        ssh ${_user}@${_ip} "sudo grep -q "elevator=noop" "$GRUB" >/dev/null"
        if [ $? -eq 0 ]; then
        echo "Present on ${_ip}" | tee -a "${Server_info}"
        else
        echo "not present on ${_ip}" | tee -a "${Server_info}"
        fi
done 
```

我不想每次都提供密码，并且由于我的环境中不存在无密码身份验证并且不可能，我必须在脚本本身中传递密码，这真的不会打扰我，我可以做到. 我知道它可以通过期望来完成，但每次我尝试使用它时我都搞砸了。

我尝试使用第一个答案中告诉它的方式，但我失败了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T13:18:03.640

“期望”工具听起来非常适合您的需求：[http ://expect.sourceforge.net/](http://expect.sourceforge.net/)

要安装 expect（例如在 ubuntu 上），请执行以下操作：

```
sudo apt-get install expect 
```

这是一个代码片段，向您展示了如何将期望用作 bash 脚本的一部分：

```
#!/bin/bash

IP="111.111.11.1"
login="root"
password="some_password"
dest_dir="/etc/"

expect_sh=$(expect -c "
    spawn ssh $login@$IP
    expect \"password:\"
    send \"$password\r\"
    expect \"#\"
    send \"cd $dest_dir\r\"
    expect \"#\"
    send \"chmod +x $server_side_script"
    expect \"#\"
    send \"./$server_side_script\r\"
    expect \"#\"
    send \"cd /lib\r\"
    send \"cat $file_count\r\" 
    expect \"#\"
    send \"exit\r\"
")

echo "$expect_sh" 
```

或者，您可以将逻辑放在单独的期望脚本中以获得更简洁的语法，并从您的 bash 脚本中获取它：

```
#!/usr/bin/expect

set login "root"
set addr "111.111.1.1"
set pw "root"

spawn ssh $login@$addr
expect "$login@$addr\'s password:"
send "$pw\r"
expect "#"
send "cd /etc\r"
# Then other things you need to do 
```

至于带有 RSA 密钥指纹的“第三件事”：如果连接到您以前从未见过的主机，SSH 会警告您（因为可能存在中间人攻击），理论上您应该验证指纹是否匹配您所期望的验证主机是主机声称的身份。

希望这会有所帮助=)

# c# - ZedGraph，当图形缩放时，数字聚集在数字线的区域

> ID：12988047
> 
> 赞同：0
> 
> 时间：2012-10-20T11:40:12.080
> 
> 标签：c#, zedgraph

我缩放图表，但我遇到了图像中的问题（[http://postimage.org/image/74ra418yv/](http://postimage.org/image/74ra418yv/)）。这是一个模拟窗口，所以每个 pointpairlist 都是针对每个单位时间计算的。我不会同时显示所有这些。所以我创建了CalculateScale函数来进行缩放。我需要所有列表中的最小 X,Y 和最大 X,Y。我使用CalculateScale 找到x 轴和y 轴的最小值和最大值。它工作得很好，唯一的问题是数字是在一个地区收集的。

```
public void EditScale(List<PointPairList> lists)
{
    GraphScale scale = CalculateScale(lists);
    GraphPane.XAxis.Scale.Min = scale.MinX - 20;
    GraphPane.XAxis.Scale.Max = scale.MaxX + 20;
    GraphPane.YAxis.Scale.Min = scale.MinY - 20;
    GraphPane.YAxis.Scale.Max = scale.MaxY + 20;
}

protected GraphScale CalculateScale(List<PointPairList> list)
{
    double maximaY = -10000000;
    double minimaY = 10000000;
    double maximaX = -10000000;
    double minimaX = 10000000;
    double listMinY, listMaxY, listMinX, listMaxX;
    for (int i = 0; i < list.Count; i++)
    {
        listMaxY = list[i].Max(point => point.Y);
        listMinY = list[i].Min(point => point.Y);
        if (listMaxY > maximaY)
            maximaY = listMaxY;
        if (listMinY < minimaY)
            minimaY = listMinY;
        listMaxX = list[i].Max(point => point.X);
        listMinX = list[i].Min(point => point.X);
        if (listMaxX > maximaX)
            maximaX = listMaxX;
        if (listMinX < minimaX)
            minimaX = listMinX;
    }

    return new GraphScale(minimaX, maximaX, minimaY, maximaY);
} 
```

# c++ - 非法成员初始化

> ID：12988048
> 
> 赞同：5
> 
> 时间：2012-10-20T11:40:16.673
> 
> 标签：c++, oop, constructor, member-initialization

我正在使用这个非常简单的类而不使用任何继承。

```
class A
{
  int a;
  int b;

public:
 A(int x, int y) { a = x; b = y;}
 A() :A(0,0){};
 ~A(){};
} ;

int main ()
{
  A a1, a2(5, 7) ;
} 
```

我得到这个错误。

> 错误 C2614：“A”：非法成员初始化：“A”不是基础或成员

SO上有类似的问题，但它们与继承有关。有人可以解释原因以及标准对此有何看法吗？

**编辑：**

如果有人详细说明转发构造函数和 C++11 中的此功能，那就更好了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T11:45:18.457

如果可以使用 C++11，则可以`A()`从`A(int, int)`. 这在 C++03 中是不可能的，您必须编写两个单独的构造函数。

如果您希望您的代码在 C++03 中工作，您有两种选择：

*   创建一个函数`init(int, int)`并从每个构造函数中调用它。如果您的构造函数做了很多工作，这是一个不错的选择。
*   两个构造函数中的重复行为。当您所做的只是成员初始化时，这是一个不错的选择。

您还可以从子类构造函数中调用基构造函数。例如，如果你有

```
class A {
    A(int, int);
};
class B : public A {
    B(int, int);
}; 
```

你可以写

```
B::B(int x, int y) : A(x,y) {} 
```

这就是你的编译器说的意思`A is not a base`，它期待这种情况。

所有这些都与 C++03 兼容。

您还可以升级编译器以支持 C++11 功能。如果您在 Linux 中工作并希望您的项目在 Windows 中编译，我不建议您这样做，因为 Windows 编译器没有实现 Linux 编译器所做的所有 C++ 功能（除非您为一个好的编译器付费）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T11:42:16.400

那是因为您的构造函数有问题：

从您的错误消息的外观来看，我假设您使用的是 Visual Studio（可能是 2010 年），我同意，它在 VS2010 中不起作用。

```
A:A(0,0){ } 
```

修复 VS 2010 及其前身：`A():a(0),b(0){}`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T11:44:58.080

你不能这样做，这种`A() :A(0,0){};`方式是用来初始化类基成员的。

```
A(){a=0;b=0;}; 
```

或者如果您希望`private: void set(int x, int y);`在构造函数中定义和使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T11:45:56.970

您正在尝试使用委托构造函数，这是一种仅在 中引入的语言功能`C++11`，并且尚未在每个编译器中实现。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-20T11:46:46.677

`A() :A(0,0){};` 称为构造函数链接。

您应该检查您的编译器是否接受 C++11。构造函数链接仅在 C++11 中有效。它以前不可用。

你用什么编译器？

# sed - 在命令行中复制特定文件

> ID：12988050
> 
> 赞同：0
> 
> 时间：2012-10-20T11:40:26.190
> 
> 标签：sed, awk

我想复制 10 月 16 日至 17 日最后更改的特定文件，文件类型为 java。

```
shia@ubuntu:~/code$ ls -alxo
total 96
drwx------  2 shia  4096 Oct 20 18:54 .
drwxr-xr-x 61 shia 12288 Oct 20 19:24 ..
-rw-------  1 shia 12288 Oct 16 21:52 .Reuse.java.swp
-rw-rw-r--  1 shia   746 Oct 20 11:16 Argus.class
-rw-rw-r--  1 shia   302 Oct 20 11:16 Argus.java
-rw-------  1 shia   310 Oct 16 21:30 Call.java
-rw-rw-r--  1 shia   417 Oct 17 15:20 Ordinary.class
-rw-rw-r--  1 shia   298 Oct 17 14:57 Overriding.java
-rw-rw-r--  1 shia   562 Oct 19 21:27 Package.class
-rw-rw-r--  1 shia   430 Oct 19 21:27 Package.java
-rw-------  1 shia   729 Oct 17 13:50 Reuse.java
-rw-------  1 shia   424 Oct 17 13:47 Room.java
-rw-------  1 shia   321 Oct 16 21:22 Simpleobject.java
-rw-rw-r--  1 shia  1187 Oct 17 00:04 Static.java
-rw-rw-r--  1 shia   686 Oct 17 15:20 Super.class
-rw-rw-r--  1 shia  1010 Oct 17 15:20 Super.java
-rw-------  1 shia   843 Oct 17 14:20 This.java
-rw-rw-r--  1 shia   521 Oct 17 14:51 b.java
-rw-rw-r--  1 shia    90 Oct 20 18:54 cp.awk
-rw-rw-r--  1 shia   105 Oct 20 17:19 file.txt 
```

我尝试具体说明它们，但我不知道如何复制它们。

```
shia@ubuntu:~/code$ ls -alxo|grep 'Oct 1[67].*java$'|awk '{print $8}'
Call.java
Overriding.java
Reuse.java
Room.java
Simpleobject.java
Static.java
Super.java
This.java
b.java 
```

任何帮助，非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T12:27:27.863

一种使用方式`find`：

```
find . -maxdepth 1 -type f -name "*.java" -newermt 2012-10-16 ! -newermt 2012-10-18 -exec cp '{}' /home/user/dstFolder/ \; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T11:49:23.917

您可以使用`xargs`复制找到的文件：

```
...| xargs -i cp '{}' /home/user/dstFolder/ 
```

这会将找到的所有文件复制到文件夹`/home/user/dstFolder/`中。

# java-ee-6 - 将应用程序范围的 CDI bean 注入无状态 EJB bean

> ID：12988051
> 
> 赞同：1
> 
> 时间：2012-10-20T11:40:34.360
> 
> 标签：java-ee-6, cdi, classnotfoundexception

首先，我将描述我要在这里完成的工作。我有一个 Java 应用程序，它定期读取数据并在 JBoss AS 7.1.1 上调用无状态 EJB 以进行进一步操作（计算数据并将其保存到数据库中）。然后我有使用 JSF 2.0 的前端。在作为@ApplicationScoped CDI bean 并且驻留在JSF 项目中的控制器中，我将EJB 注入其中。现在我需要 EJB 从数据库中获取数据。由于这个原因，我正在使用@ApplicationScoped CDI bean：

> 应用程序上下文在所有servlet 请求、Web 服务调用、EJB 远程方法调用、EJB 异步方法调用、EJB 超时和向在同一应用程序中执行的消息驱动 bean 的消息传递**之间共享。**当应用程序关闭时，应用程序上下文被销毁。

我只希望所有客户端使用一个 CDI bean，因为数据独立于用户。

现在我想更新 @ApplicationScoped CDI bean 中的数据，它是在 EJB bean 的帮助下在 JSF 项目下定义的，当新数据到达时执行该方法。我已经在@ApplicationScoped CDI bean 中成功使用了@Inject，我从EJB 项目中注入了EJB。现在我想反其道而行之。我试图将 JSF 项目中的 ApplicationScoped CDI bean 注入 EJB bean。但是当我写这篇文章时，我得到了@Inject 下划线作为警告：

```
@Inject
private CurrentDataController currentDataController; 
```

警告是：

> 没有 bean 有资格注入到注入点 [JSR-299 §5.2.1]

当我尝试发布项目时，我收到有关CurrentDataController 的**类未找到异常的错误。**

> 引起：java.lang.ClassNotFoundException: controllers.CurrentDataController from [Module "deployment.TestEAR.ear.TestEJB.jar:main" from Service Module Loader]

似乎 EJB 项目无法引用 JSF 项目中的类。它还在 TestEJB.jar 中而不是在 TestJSF.jar 中寻找 CurentDataController 类。我在这里缺少什么？

我整个项目的结构如下：

*   测试EAR
    *   测试EJB
    *   测试EJBClient
    *   测试JPA
    *   测试JSF

现在我认为，在修复有关未找到类定义的错误之后，我将遇到与我发布的警告相关的另一个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T08:55:58.410

在 EAR 中，EJB 模块 (jar) 在 Web 模块 (war) 上不可见。EJB 模块与 UI 无关，因此将这一层解耦是正常的。要解决您的问题，您有两种选择。

1.  将需要在 EJB 中注入的 bean 移动到一个 EJB 模块中（战争也可以注入那个 bean）
2.  将您的应用程序重构为只有战争（是的，您现在可以在战争中使用 EJB）。架构会更简单，完整的 EJB 将在 JBoss 下工作（远程 EJB 也一样）

# android - 从 ACTION_SEND 意图获取收件人

> ID：12988052
> 
> 赞同：0
> 
> 时间：2012-10-20T11:40:38.943
> 
> 标签：android, email, android-intent

在我的 Android 应用程序中，我插入了一个 ACTION_SEND 意图。

```
 Intent intent = new Intent(Intent.ACTION_SEND);

    intent.putExtra(Intent.EXTRA_EMAIL, new String[] { emailTo });
    intent.putExtra(Intent.EXTRA_CC, new String[] { emailCC });
    intent.putExtra(Intent.EXTRA_SUBJECT, defaultSubject);
    intent.setType("text/plain");
    intent.putExtra(Intent.EXTRA_TEXT, body); 
```

有没有办法让用户在发送邮件后填写收件人？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T11:44:05.277

不，对不起。您不会从`ACTION_SEND`操作中获得任何结果，包括用户可能对电子邮件收件人列表所做的任何更改。

# android - 如何在android中管理动态生成的复选框的onclick

> ID：12988060
> 
> 赞同：0
> 
> 时间：2012-10-20T11:41:22.783
> 
> 标签：android

我通过应用循环创建了多个复选框。

```
for(int l=0;l<len;l++)
{
chkBox = dynamicUiComponents.myCheckBox(context, new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT), 100+i, "Unchecked", opts[l]);
myLayout.addView(chkBox);
} 
```

显示所有复选框。但是当我在该复选框上应用 setOnCheckedChangeListener(l) 时，只有最后添加的复选框文本是打印机。这是因为每次在循环中，我都会为 chkBox 变量提供一个新的对象引用。所以在这里如何识别哪个 chechbox 被点击了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T11:53:38.717

在您的代码中，您没有创建一个数组`CheckBoxes`，您只创建了一个。所以， using`setOnCheckChangedListener(I)`不会指`checkBox`. 要么在循环内设置监听器，要么给每个唯一的 ID 以便稍后引用它并设置监听器：

```
for(int l=0;l<5;l++) { chkBox = new CheckBox(context); 
chkBox.setOnCheckChangedListener(
//your implementation
);
myLayout.addView(chkBox); } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T11:48:07.533

您可以将 id 添加到标签：

```
for(int id=0;id<5;id++) { 
 chkBox = new CheckBox(context);
 chkBox.setTag(id); 
 myLayout.addView(chkBox); 
} 
```

你可以使用：

```
Integer i = (Integer) chkBox.getTag(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T11:54:17.080

尝试以下

```
for(int l=0;l<5;l++) 
{ 
    chkBox = new CheckBox(context); 
    myLayout.addView(chkBox); 
    chkBox.setTag(""+l);
    chkBox.setOnCheckChangeListener(new ...(){   
        int x = Integer.ValueOf(chkBox.getTag());
        //do whatever you want to do here
    });
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T12:11:01.533

You can set a different tag for each Checkbox and set the listener on THIS, you activity should implement the listener and then do whatever you want when the event is trigger.

# sharepoint-2010 - 尝试在编辑表单上设置其他字段时强制用户填写某些共享点项目字段

> ID：12988062
> 
> 赞同：0
> 
> 时间：2012-10-20T11:41:39.657
> 
> 标签：sharepoint-2010, sharepointfoundation2010

尝试将其他选择字段更新为同一共享点列表项中的特定值时，如何强制用户在编辑表单中填写某些字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T03:49:05.210

我将实现一个客户端脚本，以通过编辑表单中的 xslt 样式表实现您需要的逻辑。

还有一个服务器端事件处理程序，以确保即使客户端逻辑被覆盖，您仍然可以验证服务器上的数据。例如，如果无效则抛出异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T09:38:40.600

我通过使用带有规则的列表“验证设置”来解决该问题

```
=IF([Stan przetargu]="oferowanie";IF(LogotecProj<>"";TRUE;FALSE);TRUE) 
```

# asp.net-mvc-3 - IIS 6 上的 MVC3 网站

> ID：12988064
> 
> 赞同：0
> 
> 时间：2012-10-20T11:41:54.033
> 
> 标签：asp.net-mvc-3, iis

当我尝试在 IIS 6 上部署 ASP .NET MVC 4 Web 应用程序时，我收到错误消息

**拒绝访问 web.config。**

网站应用程序池的标识：**网络服务**

文件夹 C:\inetpub\wwwroot\ *appname* 具有网络服务的**完全控制**访问权限。但我很困惑这个权限是否被递归应用。

我怎样才能让网站正常工作？

**错误截图**

![在此处输入图像描述](../Images/de4eb2998941d9f742bff165ac06d890.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T09:49:27.687

尝试将应用程序池设置设置为默认池或 .Net Frame Work 版本：4.0

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T09:31:55.023

如果你检查网站的目录安全，看看它是否设置为匿名。如果是，则授予 IISUSR 对该目录的读取权限。

如果是 Windows 身份验证或其他方法，并且 .Net 设置为模拟，您也需要授予他们访问权限。

高温高压

硅

# django - 是否有任何可靠的方法来检查 django 中的下载是否完成

> ID：12988070
> 
> 赞同：1
> 
> 时间：2012-10-20T11:42:51.657
> 
> 标签：django, nginx, django-views, download

我正在使用 nginx 通过 django 视图提供文件，我需要能够检测文件下载何时完成。有什么方法可以可靠地读取下载状态。

# java - java.io.File - 适用于虚拟和非虚拟文件的简单层次结构？

> ID：12988076
> 
> 赞同：0
> 
> 时间：2012-10-20T11:43:53.340
> 
> 标签：java, file, sync

我正在编写一个服务器/客户端程序，它与文件夹（文件夹 A 和文件夹 B，以及它们的子文件夹）进行比较。我希望能够比较我计算机中的文件夹以及远程文件夹。

因此，我将实现一个通信协议，它发送文件夹及其子文件夹的名称，以便我可以重建层次结构。

将 java 的*File*类用于远程文件夹会更好吗？还是我应该继续编写自己的小文件和文件夹类？

谢谢！

# iphone - 模拟 Push Segue 的自定义 Segue 将 VC 变成僵尸

> ID：12988081
> 
> 赞同：4
> 
> 时间：2012-10-20T11:44:28.453
> 
> 标签：iphone, objective-c, runtime-error, uistoryboardsegue, data-management

# [使事情简短明了]

我写了一个自定义的segue。

```
-(void)perform {
UIView *preV = ((UIViewController *)self.sourceViewController).view;
UIView *newV = ((UIViewController *)self.destinationViewController).view;

[preV.window insertSubview:newV aboveSubview:preV];
newV.center = CGPointMake(preV.center.x + preV.frame.size.width, newV.center.y);
[UIView animateWithDuration:0.4
 animations:^{
     newV.center = CGPointMake(preV.center.x, newV.center.y);
     preV.center = CGPointMake(0- preV.center.x, newV.center.y);}
    completion:^(BOOL finished){ [preV removeFromSuperview]; }];
} 
```

当 segue 被触发时，也不例外。但是它会**解除分配** `destinationViewController`。

当单击触发另一个 segue 的按钮时，应用程序会崩溃`destinationViewController`。

我尝试删除`[preV removeFromSuperview]` 但无济于事。

# [细节]

我最近开始使用 Object-C 并编写了一个自定义 segue 来模拟 push segue。

第一次触发时，一切正常。

但在那之后，无论触发什么 segue，应用程序都会崩溃，我会收到一个`EXC_BAD_ACCESS`错误。

* * *

我的第一个猜测是这与内存管理有关。必须释放一些东西，但我不知道它是什么。

我的第二个猜测是，这与`UIView`and提供的基础设施有关`UIWindow`。但是再一次，由于我缺乏知识和经验，我无法弄清楚真正的问题是什么。

我知道我实际上可以采取一种简单的方法并通过使用 a 并简单地隐藏导航栏来创建推送 segue `rootviewcontroller`，但我真的想知道我看似结构良好的自定义 segue 到底出了什么问题，并了解下面发生了什么代码结构。

* * *

## [更新]

感谢 Phillip Mills 和 Joachim Isaksson 的建议，在进行了一些实验并使用了断点和 Zombie 工具之后，

这就是我意识到的：

1.  自定义 segue 被按钮触发后，只有当下一个 segue 也被按钮触发时，应用才会崩溃。触发下一个 segue using`viewDidAppear`不会导致任何崩溃。

2.  崩溃的主要原因：

**一条 Objective-C 消息被发送到一个被释放的对象（僵尸）**

[#, 事件类型, refCt, Library, Caller]

```
0   Malloc  1   UIKit   -[UIClassSwapper initWithCoder:]
1   Retain  2   UIKit   -[UIRuntimeConnection initWithCoder:]
2   Retain  3   UIKit   -[UIRuntimeConnection initWithCoder:]
3   Retain  4   UIKit   -[UIRuntimeConnection initWithCoder:]
4   Retain  5   UIKit   -[UIRuntimeConnection initWithCoder:]
5   Retain  6   UIKit   -[UIRuntimeConnection initWithCoder:]
6   Retain  7   UIKit   -[UIRuntimeConnection initWithCoder:]
7   Retain  8   UIKit   -[UIRuntimeConnection initWithCoder:]
8   Retain  9   UIKit   UINibDecoderDecodeObjectForValue
9   Retain  10  UIKit   UINibDecoderDecodeObjectForValue
10  Retain  11  UIKit   -[UIStoryboardScene setSceneViewController:]
11  Retain  12  UIKit   -[UINib instantiateWithOwner:options:]
12  Release 11  UIKit   -[UINibDecoder finishDecoding]
13  Release 10  UIKit   -[UINibDecoder finishDecoding]
14  Release 9   UIKit   -[UIRuntimeConnection dealloc]
15  Release 8   UIKit   -[UIRuntimeConnection dealloc]
16  Release 7   UIKit   -[UIRuntimeConnection dealloc]
17  Release 6   UIKit   -[UIRuntimeConnection dealloc]
18  Release 5   UIKit   -[UINibDecoder finishDecoding]
19  Release 4   UIKit   -[UIRuntimeConnection dealloc]
20  Release 3   UIKit   -[UIRuntimeConnection dealloc]
21  Release 2   UIKit   -[UIRuntimeConnection dealloc]
22  Retain  3   UIKit   -[UIStoryboardSegue initWithIdentifier:source:destination:]
23  Retain  4   ProjectX    -[pushlike perform]
24  Retain  5   UIKit   -[UINib instantiateWithOwner:options:]
25  Retain  6   UIKit   +[UIProxyObject addMappingFromIdentifier:toObject:forCoder:]
26  Retain  7   UIKit   -[UIProxyObject initWithCoder:]
27  Retain  8   UIKit   -[UIRuntimeConnection initWithCoder:]
28  Retain  9   UIKit   UINibDecoderDecodeObjectForValue
29  Retain  10  UIKit   UINibDecoderDecodeObjectForValue
30  Release 9   UIKit   -[UINib instantiateWithOwner:options:]
31  Release 8   UIKit   +[UIProxyObject removeMappingsForCoder:]
32  Release 7   UIKit   -[UINibDecoder finishDecoding]
33  Release 6   UIKit   -[UIRuntimeConnection dealloc]
34  Release 5   UIKit   -[UINibDecoder finishDecoding]
35  Release 4   UIKit   -[UINibDecoder finishDecoding]
36  Release 3   ProjectX    -[pushlike perform]
37  Retain  4   libsystem_sim_blocks.dylib  _Block_object_assign
38  Retain  5   UIKit   -[UIApplication _addAfterCACommitBlockForViewController:]
39  Release 4   UIKit   -[UIStoryboardSegue dealloc]
40  Release 3   UIKit   _UIApplicationHandleEvent
41  Release 2   UIKit   -[UIStoryboardScene dealloc]
42  Retain  3   UIKit   _applyBlockToCFArrayCopiedToStack
43  Release 2   UIKit   _applyBlockToCFArrayCopiedToStack
44  Release 1   UIKit   __destroy_helper_block_739
45  Release 0   UIKit   _applyBlockToCFArrayCopiedToStack
46  Zombie  -1  UIKit   -[UIApplication sendAction:to:from:forEvent:] 
```

这意味着（*如果我没记错*的话）

`destinationViewController`自定义 segue 以某种方式触发了释放对象的某些东西，在单击触发另一个 segue 的按钮 (in ) 后，将向该对象发送一条 Objective-C 消息。

* * *

## 更多细节

没有一个`prepareForSegue`被调用，因为我不需要在视图之间传递数据。

我的 segues 都是以同样的方式触发的：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    CGRect buttonFrame = CGRectMake( 10, 40, 200, 50 );
    UIButton *button = [[UIButton alloc] initWithFrame: buttonFrame];
    [button setTitle: @"Go" forState: UIControlStateNormal];
    [button addTarget:self action:@selector(nextView) forControlEvents:UIControlEventTouchUpInside];
    [button setTitleColor: [UIColor blackColor] forState: UIControlStateNormal];
    [self.view addSubview:button]; 
}

- (void)nextView{
    [self performSegueWithIdentifier:@"push" sender:self];
} 
```

我启用了 ARC，所以我自己并没有真正进行任何释放..

* * *

**[更新 2]**

变成僵尸的对象是`destinationViewController`自定义segue的对象。

不调用`removeFromSuperview`自定义 segue 并不会阻止对象变成僵尸。

只要我使用常规模型转场或推送转场（使用 rootViewController）而不是我制作的自定义转场，就不会有任何僵尸，一切都会正常工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T08:52:09.693

您正在崩溃，只是因为您的新控制器在 segue 执行后没有保留。

你要做的是：

*   src 和 dest 控制器被实例化
*   你执行你的动画
*   完成后，您删除 src 视图
*   您的 src 控制器被释放，但窗口`rootViewController` **仍然**指向它，并且您的目标视图控制器**未**添加到窗口的层次结构中。

这将按预期工作：

```
-(void)perform {
  UIView *preV = ((UIViewController *)self.sourceViewController).view;
  UIView *newV = ((UIViewController *)self.destinationViewController).view;

  UIWindow *window = [[[UIApplication sharedApplication] delegate] window];
  newV.center = CGPointMake(preV.center.x + preV.frame.size.width, newV.center.y);
  [window insertSubview:newV aboveSubview:preV];

  [UIView animateWithDuration:0.4
                   animations:^{
                       newV.center = CGPointMake(preV.center.x, newV.center.y);
                       preV.center = CGPointMake(0- preV.center.x, newV.center.y);}
                   completion:^(BOOL finished){
                       [preV removeFromSuperview];
                       window.rootViewController = self.destinationViewController;
                   }];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T06:23:20.243

在 iOS 中，viewController 和它的 .view 之间的关系是特殊的。

所有这些运行时调用（`initWithCoder:`, `UIStoryboardSegue initWithIdentifier:source:destination:`, 等）都指向试图访问与幕后 viewController 相关的东西，而您所做的一件事是将它的主要 .view 从其父视图中预期的位置删除。

通过`removeFromSuperview`在 sourceViewController 的 .view 上执行 a，您正在招致破坏。

如果你想要一个不是 push-segue 的视图，你可以将 segue 设置为 Modal segue。这将使您不必弄乱导航栏，但可以允许 CocoaTouch 运行时为您完成 segue 的工作（以及之后的清理工作）。

如果你真的希望控制留在同一个 viewController 中，那么你可以修改你的代码来执行`[preV setHidden:YES]`或`[preV setAlpha:0]`. 它仍然会在那里，因此它不会变成僵尸，您可以通过反转您喜欢的上述两个动作中的任何一个来恢复它。

您甚至可以尝试删除（或注释掉调用）到 [preV removeFromSuperview]，并在您从 newV 中执行的任何操作返回时将其滑回。

**编辑**

要考虑的另一件事是在变量上使用[__block 存储类型](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Blocks/Articles/bxVariables.html#//apple_ref/doc/uid/TP40007502-CH6-SW1)`preV`，因为您是在本地声明它，并且由于您要离开作用域并且原始 viewController 可能会导致它消失。在完成块中，您最终可能会引用一个已经将其引用计数降至 0 并在您到达那里时将其删除的变量。 `__block`旨在防止这种情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-30T07:13:13.493

您需要保留对的引用，`destinationViewController`以免它被释放。显然，您不能在自定义 segue 中执行此操作，因为该对象在转换完成后被释放。例如，标准的 push segue 通过将视图控制器添加到`viewControllers`a 的属性来做到这一点`UITabBarController`。

在你的情况下，你可以打电话

```
[sourceViewController addChildViewController:destinationViewController]; 
```

在视图控制器之间建立正确的连接。不要忘记调用`removeFromParentViewController`你的反向搜索。

# version-control - 如何索引和搜索 CVS 存储库

> ID：12988087
> 
> 赞同：3
> 
> 时间：2012-10-20T11:45:08.410
> 
> 标签：version-control, documentation, cvs

在我的公司，我们使用 CVS 来存储所有类型的文件，从源代码到带有需求文档、演示文稿等的办公文件。基本上所有文件最终都在 CVS 存储库中。

我知道这不是一个好习惯。

无论如何，我的问题是：是否有某种工具或应用程序可以用来索引我的 CVS 存储库并提供对 doc、xls、pdf 文档等的搜索？需要是一个网络应用程序，这样我就可以在我的平板电脑或手机上使用它。

我当然发现了很多 DMS，但它们似乎都没有办法连接到 CVS 存储库，或者至少连接到文件系统中的文件夹。您需要手动上传每个文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T20:09:37.167

它不是特定于 CVS，但您可以设置[Apache Solr](http://lucene.apache.org/solr/)（它反过来使用[Apache Lucene](http://lucene.apache.org/core/)）。这是您自己的搜索引擎的 Web 前端，因此您可以让它为已签出的文件夹编制索引。

当然，如果您希望远程访问（例如从您的手机），您必须确保必要的安全措施到位。

# java - 在 EL 中访问无状态会话 bean 的简单方法？

> ID：12988089
> 
> 赞同：2
> 
> 时间：2012-10-20T11:45:13.277
> 
> 标签：java, jsf, ejb, el

EL 中是否有可能调用无状态会话 bean 的方法而不包装在支持 bean 中？将方法调用包装在一个支持 bean 中会产生冗余代码，并使执行 BU 变得很麻烦，因为必须包装每一个方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T12:45:54.033

您可以使用 CDI 的`@Named`.

例如

```
@Named
@Stateless
public class FooService {
    // ...
} 
```

设计的合理性值得怀疑。这是恕我直言的紧密耦合。我最多将这种方法用于极小的 webapps 或快速原型设计。

# ruby-on-rails - Rails 3.2.8 根据条件插入或更新

> ID：12988091
> 
> 赞同：1
> 
> 时间：2012-10-20T11:45:19.280
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我是 Rails 的新手，并使用此代码来更新或插入。

```
user = User.find_by_email(params[:email])
if user.nil?
  User.create!(params)
else
  user.save(params)
end 

// params is a hash with keys as table columns 
```

此代码不起作用。另外，我想知道 Rails 是否有一些神奇的东西可以在一行中做到这一点？

我没有声明`email`为主键，但它会是唯一的。它会帮助我将其声明为主要吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T12:03:13.877

您的代码不起作用，因为参数 to`save`是选项的哈希（例如应该运行验证），而不是对属性的更改。你可能想要`update_attributes!`。我通常会写类似的东西

```
User.where(:email => params[:email]).first_or_initialize.update_attributes!(params) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T12:09:59.890

试试这个方法

```
user = User.find_by_email(params[:email])  # if you receive email in params[:email]
unless user.present?
  @user = User.create!(params[:user]) # params[:user] replace with whatever you receive all your attributes 
else
  @user = user # here if your want to update something you can do it by using update attributes
end 
```

# javascript - js中的错误显示

> ID：12988093
> 
> 赞同：2
> 
> 时间：2012-10-20T11:45:27.223
> 
> 标签：javascript

伙计们我正在输入一段肯定是错误的java脚本代码，但我没有收到我应该收到的任何错误消息，你能解释一下为什么没有向我显示错误消息吗？

js代码是

```
document.write("num.toExponential() is " + num.toExponential()); 

alert("num.toExponential(4) is " + num.toExponential(4)); //displays 7.7123e+1

alert("num.toExponential(2) is " + num.toExponential(2)); //displays 7.71e+1

alert("77.1234.toExponential() is " + 77.1234.toExponential()); //displays 7.71234e+1

alert("77 .toExponential() is " + 77 .toExponential()); //displays 7. 
```

这应该显示一个它没有显示的错误，输出也没有显示给我，所以有错误本身没有显示给我，我应该怎么做才能看到那个错误？如果我将 num 的值更改为某个数字，它可以正常工作并显示输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T11:50:51.543

默认情况下不显示 Javascript 错误，因为这样您会在网上冲浪的任何地方弹出错误消息。

要查看 Javascript 错误，您需要更改浏览器中的设置，或打开显示错误的控制台窗口。

例如：

### 在 IE 中：

打开开发人员工具 (F12) 并转到控制台选项卡。

或者：

打开 Internet 选项，转到高级并启用“显示有关每个脚本错误的通知”

### 在火狐中：

打开 Web 控制台 (Ctrl+Shift+K)

或者

安装像 FireBug 这样的插件，打开它并转到控制台选项卡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T11:58:33.523

如果您想查看 Javascript 错误，我建议您使用类似 firebug 的工具，它不仅可以查看错误，还可以调试您的代码。

**在 Chrome**中，您只需转到工具 > 开发工具。这将在屏幕下方打开一个窗口，您可以在其中查看错误并进行调试。

# c++ - C ++中的大数字库

> ID：12988099
> 
> 赞同：37
> 
> 时间：2012-10-20T11:45:57.427
> 
> 标签：c++, biginteger

我正在做一个需要非常大的数字的项目，最多 100 位数字。我读过java支持大整数（`java.Math.BigInteger`），我想知道C++中是否有类似的东西。所以，这是我的问题：是否有实现大整数的标准或非标准 C++ 库？

**注意：**如果没有大整数的标准实现，我想要一个*简单*的非标准。提前致谢。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-20T11:53:49.903

GNU 多精度算术库可以满足您的需求[http://gmplib.org/](http://gmplib.org/)

Gnu MP 是一个 C 库，但它有一个[C++ 类接口](http://gmplib.org/manual/C_002b_002b-Class-Interface.html)，如果你只对大整数感兴趣，你可以只处理`mpz_class`. 看看下面我从[C++ Interface General页面中获取的示例](http://gmplib.org/manual/C_002b_002b-Interface-General.html)

```
 int main (void)
 {
   mpz_class a, b, c;

   a = 1234;
   b = "-5678";
   c = a+b;
   cout << "sum is " << c << "\n";
   cout << "absolute value is " << abs(c) << "\n";

   return 0;
 } 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-05-28T21:32:11.077

不幸的是，没有大数字的标准库。您说您正在寻找一个“简单”的库，我所知道的最简单的库是[InfInt](https://sercantutar.github.io/infint/)。它只包含一个头文件。它的用法相当简单。这是一个示例代码：

```
InfInt myint1 = "15432154865413186646848435184100510168404641560358";
InfInt myint2 = 156341300544608LL;

myint1 *= --myint2 - 3;
std::cout << myint1 << std::endl; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-20T13:50:46.013

你说你想要一个简单的界面/实现，这里有一个[http://www.di-mgt.com.au/bigdigits.html](http://www.di-mgt.com.au/bigdigits.html)。不过，就我个人而言，我仍然会选择 GMP。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-02-20T18:28:04.600

您将在 char 数组中输入，然后将其更改为 int 数组。数组的大小也可以改变。

```
#include<iostream>

using std::cout;
using std::cin;
using std::endl;

int main()
{
    int b, i, arrayint[100];
    char arraychar[100];

    for(i = 0; i < 100; i++)
        cin >> arraychar[i];

    for(i = 0; i < 100; i++)
        cout << arraychar[i];

    cout << endl;

    for(i = 0; i < 100; i++)
        arrayint[i] = arraychar[i] - '0';

    for(i = 0; i < 100; i++)
        cout << arrayint[i];

    return 0;
} 
```

# wpf - 无法使用样式设置 wpf 页面的 ShowsNavigationUI 属性

> ID：12988108
> 
> 赞同：0
> 
> 时间：2012-10-20T11:47:03.493
> 
> 标签：wpf, xaml

我是 WPF 的新手，我想弄清楚这个代码块有什么问题？

```
 <Style x:Key="PageStyle" TargetType="Page">
        <Setter Property="ShowsNavigationUI" Value="False" />
   </Style> 
```

VS 中的错误列表显示：调用的目标已引发异常。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T06:23:43.490

解决方案是将框架控件的 NavigatioUIVisibilty 设置为“隐藏”

# php - 为 foreach() 提供的 PDO 参数无效

> ID：12988109
> 
> 赞同：0
> 
> 时间：2012-10-20T11:47:15.570
> 
> 标签：php, mysql, foreach, pdo

如果你们能帮忙，我正在尝试切换到新的 PDO，但遇到了困难......

为什么此代码有效：

```
include ('connect.php');

$sql = "SELECT * FROM GP_2012";
$conn = $DBH->query($sql);

foreach ($conn as $row)
    {
    print $row['Prenom'] . ' ' . $row['Nom'] . '<br>' . 
    'Type: ' . $row['Type'] . '<br>' . 
    'Telephone: ' . $row['Tel'] . '<br>' .
    'Mail: ' . $row['Mail'] . '<br>' .
    'Bateau: ' . $row['Bateau'] . '<br>' .
    '<br><br>';
    } 
```

.

而不是这个：

```
include ('connect.php');

$sql = "SELECT * FROM GP_2012 WHERE Nom LIKE Pageot";
$conn = $DBH->query($sql);

foreach ($conn as $row)
    {
    print $row['Prenom'] . ' ' . $row['Nom'] . '<br>' . 
    'Type: ' . $row['Type'] . '<br>' . 
    'Telephone: ' . $row['Tel'] . '<br>' .
    'Mail: ' . $row['Mail'] . '<br>' .
    'Bateau: ' . $row['Bateau'] . '<br>' .
    '<br><br>';
    } 
```

我在 PHPMYADMIN 中尝试过，这些查询都有效，第二个查询应该显示一个结果，但我什么也没得到，在我的错误日志中我得到：为 foreach() 提供的参数无效

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T11:49:11.187

你的sql错了。

```
$sql = "SELECT * FROM GP_2012 WHERE Nom LIKE '%Pageot%'"; 
```

您可以设置异常模式，然后将在错误时抛出异常。

或者你需要检查结果，如果返回false，检查错误信息。

# jquery - 尝试在这里看到的 jsfiddle 视差图像标题：http://soworldwide.org/

> ID：12988112
> 
> 赞同：1
> 
> 时间：2012-10-20T11:47:51.047
> 
> 标签：jquery, parallax

[我尝试对http://soworldwide.org/](http://soworldwide.org/)网站上看到的 imageheader 视差效果进行 jsfiddle 处理。现在我想在开始滚动时淡出/并在大标题中。但是标题很难消失，只会平滑地淡出……我怎么能在消失时也淡出它？

[http://jsfiddle.net/NQHmw/3/](http://jsfiddle.net/NQHmw/3/)

* * *

```
$(window).scroll(function(){

       if($(window).scrollTop()<20){
             $('.headline').stop(true,true).fadeIn("slow");
       } else {
             $('.headline').stop(true,true).fadeOut("slow");
       }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-04T07:57:09.037

这似乎是一个 2 年前的问题，但 stop() 函数阻止了文本的淡入/淡出效果。在这里检查它：

```
$(window).scroll(function(){
   if($(window).scrollTop()<20){
     //$('.headline').stop(true,true).fadeIn("slow");
     $('.headline').fadeIn("slow");
   } else {
     //$('.headline').stop(true,true).fadeOut("slow");
     $('.headline').fadeOut("slow");
   }
}); 
```

[http://jsfiddle.net/NQHmw/60/](http://jsfiddle.net/NQHmw/60/)

# java - 基本 Java 帮助：如何修复我的代码？

> ID：12988117
> 
> 赞同：0
> 
> 时间：2012-10-20T11:48:36.393
> 
> 标签：java, syntax

好的，所以我有一个学校项目的以下代码。到目前为止只完成了一半。我对“居民”功能有疑问。它说我不能从静态上下文中引用非静态变量。

```
import java.util.Scanner;
class Hotel
{int noofemployees=10;
 int salary2=10000;
 int salary3=8000;
 int salary4=2000;

 String resident1="John Smith";
 String resident2="John Smith";
 String resident3="John Smith";
 String resident4="John Smith";
     String resident5="John Smith";
     String resident6="John Smith";
     String resident7="John Smith";
     String resident8="John Smith";
     String resident9="John Smith";
     String resident10="John Smith";

public static void main()
{   

    Scanner input=new Scanner(System.in);
    System.out.println("     ___o___    ");
    System.out.println("    /   |   \\  ");
    System.out.println(" __/____|____\\__");
    System.out.println("|   x   |  |||  |");
    System.out.println("|  xxx  |  ooo  |");
    System.out.println("|   x   |  |||  |");
    System.out.println("|-------|-------|");
    System.out.println("\\  []   |   $$  /");
    System.out.println(" \\  []  |  $$  /");
    System.out.println("   -----|----- ");
    System.out.println("");
    System.out.println("Welcome to the hotel automated management and guest system.");
    System.out.println("Enter 1 if you're a hotel employee.");
    System.out.println("Enter 2 if you're a resident.");
    System.out.println("Enter 3 to exit.");

    int choice=input.nextInt();
    if(choice==1)
        employee();//user is an employee
    else if(choice==2)
        resident();//user is a resident
    else if(choice==1997)
        easteregg();
    else
        {
         System.out.println("That is not a valid choice.");
        }
}

public static void employee()
    {   clearscreen();
        Scanner input=new Scanner(System.in);
        System.out.println("Enter the employee code");
        int code=input.nextInt();
        if(code==1111)
            {  clearscreen();
                System.out.println("Welcome employee.");
                System.out.println("Choose your rank.");
                System.out.println("1\. Manager");
                System.out.println("2\. Accounts");
                System.out.println("3\. Human resources");
                System.out.println("4\. Cleaner");
                System.out.println("5\. Return to main menu");

                int rank=input.nextInt();
                if(rank==5)
                    main();
                else employees(rank);
            }
        else
           { 
            System.out.println("You aren't an employee.");
            main();
           }
    }

public static void resident()
    {   clearscreen();
        System.out.println("Greetings, guest!");
        System.out.println("Press 1 to sign in.");
        System.out.println("Press 2 to query guestlist.");
        System.out.println("Press 3 to sign out.");
        System.out.println("Press 4 to return to the main menu.");
        Scanner input=new Scanner(System.in);
        int choice=input.nextInt();

        if(choice==1)
            {System.out.println("Enter your name");
             String name=input.nextLine();
             System.out.println("Enter the room you wish to occupy");
             int room=input.nextInt();

                residents(room,0,1,name);
            }
        else if(choice==2)
            {for(int i=1;i<=10;i++)
                {System.out.println(residents(i,0,0," "));
                }  
            }
        else if(choice==3)
            {
             System.out.println("Enter the resident number.");
             int resno=input.nextInt();

             residents(resno,1,0," ");   
            }

        else if(choice==4)
            {main();
            }
        main();
    }

public static void easteregg()
    {

    }

public static void employees(int rank)
    {
        clearscreen();clearscreen();
        if(rank==1)
            manager();
        else if(rank==2)
            accounts();
        else if(rank==3)
            hr();
        else if(rank==4)
            clean();
    }

public static void manager()
    {
        System.out.println("Welcome manager");
        System.out.println("1\. View wages");
        System.out.println("2\. Edit wages");
        System.out.println("3\. View guests");
        System.out.println("4\. Evict guests");
        Scanner input=new Scanner(System.in);
        int choice=input.nextInt();
        if(choice==1)
            {
            }
        else if(choice==2)
            {
            }
        else if(choice==3)
            {for(int i=1;i<=10;i++)
                {System.out.println(residents(i,0,0," "));
                }
             main();
            }
        else if(choice==4)
            {System.out.println("Enter the resident number.");
             int resno=input.nextInt();

             residents(resno,1,0," ");
             main();
            }
    }

public static void accounts()
    {

    }

public static void hr()
    {

    }

public static void clean()
    {

    }

public static String residents(int resname, int evict, int replace, String newname)
    {

     String cur="nobody";

    if(resname==1)
        {if(evict==1)
            resident1="Empty";
         if(replace==1)
            resident1=newname;
         cur=resident1;
        }
    else if(resname==2)
        {if(evict==1)
            resident2="Empty";
         if(replace==1)
            resident1=newname;
         cur=resident2;
        }
    else if(resname==3)
        {if(evict==1)
            resident3="Empty";
         if(replace==1)
            resident1=newname;
         cur=resident3;
        }
    else if(resname==4)
        {if(evict==1)
            resident4="Empty";
         if(replace==1)
            resident1=newname;
         cur=resident4;
        }
    else if(resname==5)
        {if(evict==1)
            resident5="Empty";
         if(replace==1)
            resident1=newname;
         cur=resident5;
        }
    else if(resname==6)
        {if(evict==1)
            resident6="Empty";
         if(replace==1)
            resident1=newname;
         cur=resident6;
        }
    else if(resname==7)
        {if(evict==1)
            resident7="Empty";
         if(replace==1)
            resident1=newname;
         cur=resident7;
        }
    else if(resname==8)
        {if(evict==1)
            resident8="Empty";
         if(replace==1)
            resident1=newname;
         cur=resident8;
        }
    else if(resname==9)
        {if(evict==1)
            resident9="Empty";
         if(replace==1)
            resident1=newname;
         cur=resident9;
        }
    else if(resname==10)
        {if(evict==1)
            resident10="Empty";
         if(replace==1)
            resident1=newname;
         cur=resident10;
        }
    return cur;
}

public static void clearscreen()
   {for(int i=0;i<=2;i++)
       {System.out.println("");
        System.out.println("");
        System.out.println("");
        System.out.println("");
        System.out.println("");
        System.out.println("");
        System.out.println("");
        System.out.println("");
        System.out.println("");
        System.out.println("");
        System.out.println("");
        System.out.println("");
        System.out.println("");
        System.out.println("");
        System.out.println("");
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T11:50:54.050

您必须将字符串变量设为静态才能使其正常工作：

```
 static String resident1="John Smith";
 static String resident2="John Smith";
 static String resident3="John Smith";
 static String resident4="John Smith";
 static String resident5="John Smith";
 static String resident6="John Smith";
 static String resident7="John Smith";
 static String resident8="John Smith";
 static String resident9="John Smith";
 static String resident10="John Smith"; 
```

这里更好的首选方法是使所有方法和类变量非静态创建类的*实例*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T11:56:52.543

首先：当您这样做时，您正在修改一个尚不存在的变量： `resident1="Empty";`

您需要使所有`resident`s 存在，或者通过使这些字符串静态（通常如上所述），或者在您的中创建一个新的 Hotel 对象，`main()`这将允许您修改所有居民。

You will also need to change the calls to `main();` in employee, resident etc. Replace them with: `return;`

hth

# android - 不断向列表视图添加新数据的最佳方法

> ID：12988119
> 
> 赞同：4
> 
> 时间：2012-10-20T11:48:49.330
> 
> 标签：android, android-listview

我已经成功编写了一个服务，该服务从`RSS`提要中下载数据、解析数据并将其保存到数据库中。我还有一个活动片段，它使用游标加载器技术来检索所有数据行，并将它们以水平方向显示在屏幕上，这是`listview`我从互联网上搜索出来的。

`x`我的下一个任务是修改活动，以便每次用户滚动到列表视图末尾附近时，我可以不断查询下一行，并将它们添加到`listview`. 从技术上讲，我的数据足够小，如果我在启动时显示 10 行，我可能只查询 20 行并重置适配器 - 但必须重复重新查询相同的行似乎很愚蠢。

所以基本上我的主要问题是：如何最好地将当前持有`listview`的内容与使用`Cursor/CursorAdapter`a 的新查询的结果结合起来`LoaderCallbacks`？

其次，limit 参数的正确语法是`SQLiteQueryBuilder`什么？尽管我认为一串“ `offset, maxrows`”是正确的，但我尝试了很多变体？不管我提供什么，尽管我总是从`getCount()`光标上得到 0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T12:06:14.780

在适配器中使用您的项目的 ArrayList，当您有新项目要显示时，只需创建一个方法将它们插入到 ArrayList 中。

有关 SQL 的问题，您可以在该链接[http://developer.android.com/reference/android/database/sqlite/SQLiteQueryBuilder.html](http://developer.android.com/reference/android/database/sqlite/SQLiteQueryBuilder.html)上找到 您必须在 then 方法 buildQuery 上添加限制，如果这不起作用，请粘贴这里是你的代码

# javascript - JS 从浏览器 url 行调用 OnKeyUp

> ID：12988120
> 
> 赞同：1
> 
> 时间：2012-10-20T11:48:54.960
> 
> 标签：javascript, javascript-events

我在表单中有以下脚本

onkeyup="jsf.util.chain(this,event,'return callSearchPlz(this.value);','mojarra.ab(this,event ,\'keyup\',0,\'landingForm:lp-postallandingForm: lp-ort 登陆表格：lp-postal-text\')')"

我如何在那里调用 onkeyup 事件？我想从浏览器 URL 行执行此操作。

# objective-c - 委托方法未调用

> ID：12988121
> 
> 赞同：0
> 
> 时间：2012-10-20T11:48:55.910
> 
> 标签：objective-c, delegates, push

在 iPhone 上收到 Apple 推送通知警报、声音和徽章。但不打电话：

```
-(void)application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification 
```

这个方法没有调用。我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T12:13:35.210

您可能希望将委托回调用于远程通知而不是本地通知

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo 
```

# .net - 在 T4 预处理模板的 Transformtext() 方法中调用方法

> ID：12988124
> 
> 赞同：0
> 
> 时间：2012-10-20T11:49:16.693
> 
> 标签：.net, templates, t4

我使用 T4 和 Preprocessed Template 生成一些代码。因此，当我直接在 .tt 文件中添加所有模板时，一切正常，如下所示：

```
<#@ template language="C#" #>
<html><body>
<h1>Sales for Previous Month</h2>
<table>
    <# for (int i = 1; i <= 10; i++)
       { #>
         <tr><td>Test name <#= i #> </td>
             <td>Test value <#= i * i #> </td> </tr>
    <# } #>
 </table>
This report is Company Confidential.
</body></html> 
```

但是我需要在一些方法中对代码进行分组，并在`transformText()`Method中调用方法：

MyTemplate.tt 文件如下所示：

```
<#@ template language="C#" #>
<#+ 

    private string header(){
#>
<html><body>
<h1>Sales for Previous Month</h2>

<#+ 
    return this.GenerationEnvironment.ToString();
}

private string body() {
#>
    <table>
    <#+ for (int i = 1; i <= 10; i++) { #>

     <tr><td>Test name <#= i #> </td>
         <td>Test value <#= i * i #> </td> </tr>
    <#+ } #>
 </table>
<#+ 
    return this.GenerationEnvironment.ToString();
}

private string footer(){
#>
    This report is Company Confidential ..
</body></html>
<#+ 
    return this.GenerationEnvironment.ToString();
}
#> 
```

相关的 MyTemplate.cs 文件如下：

```
// .... 

public virtual string TransformText()
    {
        return this.GenerationEnvironment.ToString();
    }
// .... 
```

所以我在`TransformText()`这样的方法中调用方法：

```
// .... 

 public virtual string TransformText()
    {
        header();
        body();
        footer();
        return this.GenerationEnvironment.ToString();
    }
// .... 
```

所以一切都还好，但是如果我更改 .tt 文件中的任何内容并保存它，.cs 文件会再次重新生成并且`TransformText()`方法返回到第一个实现（没有任何调用）？

那么如何在 Preprocessed Template 中使用一些方法并生成代码呢？你的建议是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T11:22:30.577

这行得通吗？

```
<#@ template language="C#" #>
<#
    header ();
    body ();
    foooter ();
#>
<#+ ... the rest ... #> 
```

PS。不知道你为什么在页眉、正文和页脚中调用

```
return this.GenerationEnvironment.ToString(); 
```

# function - Emacs 按键输入备忘单

> ID：12988127
> 
> 赞同：2
> 
> 时间：2012-10-20T11:49:47.970
> 
> 标签：function, emacs, map, key

当您拥有 keycombination 时`C-x`，我希望在此组合键处发生一些事件，同时等待以下输入。

例如，我想，当我按 时`C-x`，打开一个带有一些文本的新缓冲区，当后面跟着一个新命令时，假设`C-f`它只是跟随那个命令。

像这样，每次按下第一个键时，都可以打开一个备忘单以执行以下命令，然后在选择结束命令时退出。

（欢迎为这篇文章提供标签的建议，因为我不知道合适的标签）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T11:56:30.390

你有没有试过在 Cx 之后输入 Ch？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T12:22:34.273

您可以查看[Icicles](http://emacswiki.org/emacs/Icicles_-_Key_Completion)，它提供了组合键的补全功能，因此在您键入 Cx 后，您可以获得该前缀的可能补全列表。

# android - 如何从编辑视图中获取位置，然后在谷歌地图中显示？

> ID：12988128
> 
> 赞同：0
> 
> 时间：2012-10-20T11:49:49.857
> 
> 标签：android, google-maps, search

我正在使用谷歌地图。我希望用户在编辑文本中输入位置作为字符串，并将地图动画化到该位置。此外，当用户输入字符串时，我还想提供有关位置的提示。我应该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T12:02:04.517

**动画**

您必须设置一个默认点，然后当您获得新的 GeoPoint 时，您应该将其发送到 Map 控制器并调用 animateTo

```
mapController.animateTo(point) 
```

** 插入位置 **

您可以查看该链接：[How to implement google maps search by address in Android?](https://stackoverflow.com/questions/5375654/how-to-implement-google-maps-search-by-address-in-android)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-04T06:24:20.363

如果它适合您的应用，您应该使用 Google 的自动完成小部件。如果没有，您需要使用内容提供程序从[Google 地点自动完成 API](https://developers.google.com/places/android-api/autocomplete#get_place_predictions_programmatically)中获取地点，然后可以以对话框的形式显示。[在此处](http://wptrafficanalyzer.in/blog/adding-google-places-autocomplete-api-as-custom-suggestions-in-android-search-dialog/)查看示例

# java - 当他们说需要将密码哈希存储在数据库中时，您会想到什么？

> ID：12988130
> 
> 赞同：1
> 
> 时间：2012-10-20T11:50:06.240
> 
> 标签：java, encryption, hash, hashcode, password-encryption

我是 Web 开发的新手。我使用 Java 并尝试开发具有注册功能的简单试点应用程序。为了安全起见，我不想将用户密码显式存储在数据库中。

有人告诉我有必要存储密码哈希。但是，这是什么意思？ **什么是哈希？**我知道在 Java 中，每个对象都有一个唯一的哈希码。这是我需要的吗？我需要调用密码的方法[hashcode()吗？](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#hashCode%28%29)也许我只需要应用加密方法？还是先获取我密码的哈希码，然后再加密？

我认为安全存储密码有很多选择和方法。但是在这种情况下，哈希到底是什么意思呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T11:54:34.863

这意味着当用户在注册时输入密码时，您不会以纯文本形式存储用户密码，而是使用不可逆哈希算法（例如 MD5）对密码进行哈希处理，并将此值保存到数据库中。

这是一个解释如何 [生成 MD5 哈希的答案？](https://stackoverflow.com/questions/415953/generate-md5-hash-in-java)

检查密码时，使用相同的算法对用户在登录表单中输入的密码进行哈希处理，然后将其与保存在数据库中的密码进行比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T12:45:25.510

根据您需要用户密码的安全程度，您可能还需要使用[加密盐](http://en.wikipedia.org/wiki/Salt_%28cryptography%29)和拉伸。

Salt 意味着在散列之前在密码中添加一些随机字节。这样，如果两个用户选择相同的密码，那么他们将拥有不同的哈希值。将盐存储在哈希旁边，并在每次需要重新计算哈希时使用。

```
hash <- SHA256(password + salt)  // + is concatenation 
```

加盐意味着如果您的一个用户的密码被破解，那么具有相同密码的其他用户将在数据库中具有不同的哈希值，从而防止攻击者立即知道他们的密码。盐的长度可以为 16 个字节，以获得良好的安全性。

拉伸意味着重复计算很多次，因此运行大约需要 0.1 秒。十分之一秒的延迟不会影响您的用户，但意味着任何试图猜测密码的人每秒只能猜测十次。

```
hash <- SHA256(password + salt)
do 5000 times
  hash <- SHA256(hash + salt)
end do 
```

调整数字`5000`以获得您想要的延迟。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T13:08:33.297

您可能正在寻找 SQL 的 PASSWORD 函数。这是在数据库中存储任何加密密码的最简单的解决方案。

你去：[http ://dev.mysql.com/doc/refman/5.1/en/password-hashing.html](http://dev.mysql.com/doc/refman/5.1/en/password-hashing.html)

或者就在这里：[http ://www.google.com/search?q=sql+function+password+hash](http://www.google.com/search?q=sql+function+password+hash)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T22:31:25.930

我建议您查找有关 PBKDF2 的信息，而不是所有选项。PBKDF2 是用 Java 实现的。

```
byte[] salt = new byte[256 / Byte.SIZE];
SecureRandom defaultRNG = new SecureRandom();
defaultRNG.nextBytes(salt);

SecretKeyFactory f = SecretKeyFactory.getInstance("PBKDF2WithHmacSHA1");
KeySpec ks = new PBEKeySpec(password,salt,2000,256);
SecretKey s = f.generateSecret(ks);
final byte[] result = s.getEncoded(); 
```

您应该同时存储`salt`和`result`。执行相同的计算和二进制比较结果以验证密码。我使用了 256 位盐和输出大小。在 PBKDF2 中使用 SHA-1 不是问题。2000 的迭代计数应该是最小值，如果您的应用程序可以处理 CPU 要求，请使用更高的值。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-20T12:47:34.980

存储散列而不是密码（无论是明文还是加密）的主要思想是散列是不可逆的——任何人都可以访问数据库和/或加密密钥，但仍然不知道密码。这不仅仅是关于混淆/加密。哈希用于释放允许恢复密码的信息，并使其无法以任何方式识别密码。哈希是您希望使用的任何函数，它可以保证所需程度的唯一性和不可逆性 - java 哈希码很容易复制，MD5 和 SHA1 有已知的弱点。现在推荐的是例如 SHA-256。

# c++ - Qt4：用文件名将 QByteArray 写入文件？

> ID：12988131
> 
> 赞同：12
> 
> 时间：2012-10-20T11:50:10.290
> 
> 标签：c++, image, file, qt, bytearray

我在 Qt 4 中无法写入非文本文件。我有一个 QByteArray 数据，我想将它保存到特定目录中名为“some_name.ext”的文件中：“C://MyDir”。我怎样才能做到这一点？请注意，内容不是文本。

格式为“GIF”，Qt 不支持。

```
QImage mainImage; 
if (!mainImage.loadFromData(aPhoto.data)) 
    return false; 
if (!mainImage.save(imageName, imageFormat.toUtf8().constData())) 
   return false; 
```

我想以某种方式绕过这个限制！

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-10-20T19:57:31.837

将 QByteArray 写入文件：

```
QByteArray data;

// If you know the size of the data in advance, you can pre-allocate
// the needed memory with reserve() in order to avoid re-allocations
// and copying of the data as you fill it.
data.reserve(data_size_in_bytes);

// ... fill the array with data ...

// Save the data to a file.
QFile file("C:/MyDir/some_name.ext");
file.open(QIODevice::WriteOnly);
file.write(data);
file.close(); 
```

在 Qt 5（5.1 及更高版本）中，您应该在保存新的完整文件时改用[QSaveFile](https://doc.qt.io/qt-5/qsavefile.html)（而不是修改现有文件中的数据）。这样可以避免写操作失败时丢失旧文件的情况：

```
// Save the data to a file.
QSaveFile file("C:/MyDir/some_name.ext");
file.open(QIODevice::WriteOnly);
file.write(data);
// Calling commit() is mandatory, otherwise nothing will be written.
file.commit(); 
```

当然，记得检查错误。

另请注意，即使这回答了您的问题，也可能无法解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T12:06:30.497

您可以使用 QDataStream 写入二进制数据。

```
QFile file("outfile.dat");
file.open(QIODevice::WriteOnly);
QDataStream out(&file); 
```

然后使用

```
QDataStream & QDataStream::writeBytes ( const char * s, uint len ) 
```

或者

```
int QDataStream::writeRawData ( const char * s, int len ) 
```

# java - Java7 nio2 的任何可用内存中文件系统实现？

> ID：12988135
> 
> 赞同：9
> 
> 时间：2012-10-20T11:50:48.390
> 
> 标签：java, testing, filesystems, nio2

我一直在寻找内存中的 nio2 FileSystem 实现，这将使我能够更轻松地测试我的 IO 相关代码。

看起来，Java 只提供（在我的 JDK 中） a`Win32FileSystem`和 a `ZipFileSystem`。

[ShrinkWrap](http://www.jboss.org/shrinkwrap)似乎有类似的东西，但似乎主要处理 ZIP 文件系统或其他任何东西。

我猜目前，你们中的一些人已经将新的 nio FileSystem IO 合并到自己的项目中，可以帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-02-27T16:07:05.850

[https://github.com/google/jimfs](https://github.com/google/jimfs)提供了这个功能。我自己从来没有测试过。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-16T16:18:13.167

您可以尝试[https://github.com/marschall/memoryfilesystem](https://github.com/marschall/memoryfilesystem)。应该非常适合您的需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-24T11:05:08.250

[https://github.com/openCage/memoryfs](https://github.com/openCage/memoryfs)就是这样一个内存文件系统。它实现了大部分但不是全部的 nio2 API。

注：我是作者。如果您发现错误或需要功能，请告诉我。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-19T10:54:32.537

ShrinkWrap 确实有一个 NIO.2 内存文件系统实现，并且 Patrick 指出的目录报告为“错误”问题已得到修复（由他。:)）：[https ://github.com/shrinkwrap/shrinkwrap/commit /3319e64c455a5f0e601b19066318d28c4bea3df1](https://github.com/shrinkwrap/shrinkwrap/commit/3319e64c455a5f0e601b19066318d28c4bea3df1)

S, ALR

# c++ - “++”和“+= 1”运算符有什么区别？

> ID：12988140
> 
> 赞同：66
> 
> 时间：2012-10-20T11:51:12.660
> 
> 标签：c++, loops, integer, auto-increment, increment

在 C++ 的循环中，我通常会遇到使用`++`or的情况`+=1`，但我无法区分它们。例如，如果我有一个整数

```
int num = 0; 
```

然后在一个循环中我这样做：

```
num ++; 
```

或者

```
num += 1; 
```

它们都增加了 的值`num`，但它们的区别是什么？我怀疑`num++`可以比 工作得更快`num+=1`，但是如何？这种差异是否足够微妙以至于可以忽略不计？

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2012-10-20T11:53:24.973

`num += 1`相当等价于`++num`。

所有这些表达式 ( `num += 1`,`num++`和`++num`) 都将 的值加`num`一，但 的值`num++`是*在它增加之前*`num`的值。

 *插图：

```
int a = 0;
int b = a++; // now b == 0 and a == 1
int c = ++a; // now c == 2 and a == 2
int d = (a += 1); // now d == 3 and a == 3 
```

使用任何你喜欢的东西。我更喜欢`++num`，`num += 1`因为它更短。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-10-20T17:25:26.220

*前缀*和*后缀*操作是考试问题的完美候选。

```
a = 0;
b = a++;  // use the value and then increment --> a: 1, b: 0

a = 0;
b = ++a;  // increment and then use the value --> a: 1, b: 1 
```

`+=`operation 及其姐妹`-=`是更通用的解决方案，主要用于不同的数字。甚至可以说它们与 . 一起使用时是多余的`1`。与它们一起使用时，`1`它们主要充当*前缀*操作。事实上，在我的机器上，它们产生相同的机器代码。您可以使用示例程序进行尝试，例如：

```
void foo() {
    int a, b;
    a = 0;

    // use one of these four at a time
    b = a++;          // first case (different)
    b = ++a;          // second case
    b = (a += 1);     // third case
    b = (a = a + 1);  // fourth case
}

int main() {
    foo();
    return 0;
} 
```

和拆卸`gdb`其中将给出：

## 第一种情况（`a++`）（不同）

```
(gdb) disassemble foo
Dump of assembler code for function foo:
   0x00000000004004b4 <+0>:     push   %rbp
   0x00000000004004b5 <+1>:     mov    %rsp,%rbp
   0x00000000004004b8 <+4>:     movl   $0x0,-0x8(%rbp)
   0x00000000004004bf <+11>:    mov    -0x8(%rbp),%eax
   0x00000000004004c2 <+14>:    mov    %eax,-0x4(%rbp)
   0x00000000004004c5 <+17>:    addl   $0x1,-0x8(%rbp)
   0x00000000004004c9 <+21>:    pop    %rbp
   0x00000000004004ca <+22>:    retq
End of assembler dump. 
```

## 第二种情况 ( `++a`)

```
(gdb) disassemble foo
Dump of assembler code for function foo:
   0x00000000004004b4 <+0>:     push   %rbp
   0x00000000004004b5 <+1>:     mov    %rsp,%rbp
   0x00000000004004b8 <+4>:     movl   $0x0,-0x8(%rbp)
   0x00000000004004bf <+11>:    addl   $0x1,-0x8(%rbp)
   0x00000000004004c3 <+15>:    mov    -0x8(%rbp),%eax
   0x00000000004004c6 <+18>:    mov    %eax,-0x4(%rbp)
   0x00000000004004c9 <+21>:    pop    %rbp
   0x00000000004004ca <+22>:    retq   
End of assembler dump. 
```

## 第三种情况 ( `a += 1`)

```
(gdb) disassemble foo
Dump of assembler code for function foo:
   0x00000000004004b4 <+0>:     push   %rbp
   0x00000000004004b5 <+1>:     mov    %rsp,%rbp
   0x00000000004004b8 <+4>:     movl   $0x0,-0x8(%rbp)
   0x00000000004004bf <+11>:    addl   $0x1,-0x8(%rbp)
   0x00000000004004c3 <+15>:    mov    -0x8(%rbp),%eax
   0x00000000004004c6 <+18>:    mov    %eax,-0x4(%rbp)
   0x00000000004004c9 <+21>:    pop    %rbp
   0x00000000004004ca <+22>:    retq   
End of assembler dump. 
```

## 第四种情况（`a = a + 1`）

```
(gdb) disassemble foo
Dump of assembler code for function foo:
   0x00000000004004b4 <+0>:     push   %rbp
   0x00000000004004b5 <+1>:     mov    %rsp,%rbp
   0x00000000004004b8 <+4>:     movl   $0x0,-0x8(%rbp)
   0x00000000004004bf <+11>:    addl   $0x1,-0x8(%rbp)
   0x00000000004004c3 <+15>:    mov    -0x8(%rbp),%eax
   0x00000000004004c6 <+18>:    mov    %eax,-0x4(%rbp)
   0x00000000004004c9 <+21>:    pop    %rbp
   0x00000000004004ca <+22>:    retq   
End of assembler dump. 
```

正如你所看到的，即使没有打开编译器优化，它们也会产生相同的机器代码，除了第一种情况，它`addl`在`mov`s 之后。这意味着您应该使用您喜欢的任何用户，并让编译器人员完成其余的工作。

最后，请注意表亲运算符`*=`并`/=`没有对应的*后缀*和*前缀*。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-10-20T11:52:54.857

`++`前缀或后缀运算符**更改变**量值。

```
int a = 0;
int b = a++; // b is equal to 0, a is equal to 1 
```

或前缀：

```
int a = 0;
int b = ++a; // b = 1, a = 1 
```

如果像这样使用，它们是相同的：

```
int a = 0;
++a; // 1
a++; // 2
a += 1; // 3 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-10-20T11:56:45.993

这两个运算符都将 n 的值增加 1。当您将运算符与赋值运算符一起使用时，它们之间存在差异。

例如：

**第一种情况** ——后增量运算符

```
int n=5;
int new_var;

new_var=n++;

print("%d",new_var); 
```

输出=5

**第二种情况**

```
int n=5;
n+=1;
new_var=n;
print("%d",new_var); 
```

输出 =6

这与预增量运算符的结果非常相似。

**使用预增量运算符的第二种情况**

```
int n=5;

new_var=++n;
print("%d",new_var); 
```

输出 =6

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-20T23:25:41.133

这两个运算符可能看起来很相似，但它们却大不相同。

对于原始类型（指针、整数等），它们都将值加一。但是，对于 C++ 类，它们调用不同的运算符（`operator+=`vs. `operator++`）；确实，对于某些类，例如`list<T>::iterator`，`i += 1`不起作用，`i++`必须使用。

此外，它们产生不同的值。`i += 1`在递增之后产生`i`（如预递增），而在递增之前`i++`产生`i`。因此，

```
int a = 0, b = 0;
cout << (a+=1) << " " << b++ << endl; 
```

打印`1 0`。因为`i += 1`相当于一个预增量，在某些情况下，`i += 1`可能会导致与`i++`.

因此，虽然它们对于递增变量是相同的，但应该知道它们在所有情况下都不是完美的替代品。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-10-20T14:06:15.277

它们通常是相同的，没有意义来澄清它们之间的区别。但是这两个语句的执行方式其实是不同的。例如，a+=1 编译成汇编是
add a,1
而 a++ 或 ++a 是
inc a
效率上可能会有一些轻微的差异，因为它们是两种不同的 CPU 操作。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-10-20T14:51:23.910

你们中的一些人正在接近差异，但应该非常清楚地说明：

他们是非常不同的运营商。

preincrement 和 postincrement 运算符设计用于在表达式内部更改变量的值，无论是在变量的值用于包含它的任何表达式之前还是之后。当使用 postincrement 运算符时，变量的 OLD 值用于评估封闭表达式，并且只有在此之后变量才会递增。

例如：

```
i = 10;
j = i++;  // This causes j to be 10 while i becomes 11. 
```

这就是为什么它被称为后增量运算符。该变量在 POST (AFTER) 后递增，它的值用于更大的表达式（这里是赋值表达式）。

但是，如果您这样做：

```
i = 10;
j = ++i; // Now both i and j will be 11 because the increment
         // of i occurs PRE (BEFORE) its value is used in the greater expression. 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-20T15:03:39.567

我很惊讶没有人提到至少对于旧的编译器/计算机（基本上是在 C 诞生时以及一两年后）`+= 1`会*明显*慢于`++`. `++`是 CPU 很可能有一条指令的增量。`+= 1`需要将值 1 加载到寄存器中（可能会保存它的值......某处）并要求添加。我不能说当前的编译器是否优化了这一点，但我怀疑他们这样做了。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-10-20T22:48:53.537

我是 Stackoverflow 的新手，但这是我的 2 便士。

如果问题是关于 += 而不是 +=1。张贴的声明是；

> 我通常会遇到使用 ++ 或 +=1 的情况，但我无法区分它们。

我认为 1 很容易成为另一个数字，或者写成 += 更好？

就结果而言，没有区别（使用海报值）。两者都将递增 1，但是，++ 只会递增 1，而 += 将递增 coder 指定的值，在 ederman 的示例中，这恰好是 1。例如：

```
// Example 1:
num = 0;
num = ++;
// the result of num will be 1

// Example 2:
num = 0;
num = += 1;
// the result of num will be 1 the same as example 1

// Example 3:
num = 0;
num = += 2;
// the result of num will be 2.

// Example 4:
num = 0;
num = ++ 2;
// this would not compile as ++ will not except any value for the increment step it is assumed
// you will always want to increment by the value of 1 
```

因此，如果您只想将值增加 1，我会使用 ++，但如果您需要增加 1，请使用 +=

希望这是有用的。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-10-20T11:56:27.270

++ 用于将值增加 1，而使用 += 您可以增加另一个数量。*

# ios - 如何在 ios Xcode 中应用内邮件发送多个文本字段？

> ID：12988141
> 
> 赞同：1
> 
> 时间：2012-10-20T11:51:13.180
> 
> 标签：ios, forms, uitextfield, email

我喜欢为我的应用程序制作一个表单，用户可以通过邮件向我报告错误。表单已准备好，但我无法将多个设置`UITextfields`为消息正文。

这是我的代码：

。H

```
IBOutlet UITextField *ios;

IBOutlet UITextField *iDevice;

IBOutlet UITextField *jailbreakstatus;

IBOutlet UITextField *otherstuff; 
```

.m

```
MFMailComposeViewController *composer = [[MFMailComposeViewController alloc] init];

[composer setMailComposeDelegate:self];

if ([MFMailComposeViewController canSendMail]) {

    [composer setToRecipients:[NSArray arrayWithObjects:@"david.goelzhaeuser@me.com", nil]];

    [composer setSubject:@"Feedback"];

    [composer setMessageBody: ios.text,iDevice.text, jailbreakstatus.text, otherstuff.text isHTML:NO];

    [composer setModalTransitionStyle:UIModalTransitionStyleCoverVertical];

    [composer setModalPresentationStyle:UIModalPresentationFormSheet];

    [self presentModalViewController:composer animated:YES];
} 
```

我已经在网上搜索了解决方案，但没有发现任何对我有帮助的东西。现在你是我唯一的希望:)

PS：是否有可能使它像这样：

UILable：UITextfield UILable：UITextfield UILable：UITextfield UILable：UITextfield

基本上是这样的：

iOS：6.0 iDevice：iPhone 4 越狱：没有其他东西：随机

你听得懂么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T12:14:22.540

```
NSString *mBodyString = [NSSTring stringWithFormat:@"iOS:%@\n Device:%@\n Jailbreak:%@\n Other:%@",ios.text,iDevice.text,jailbreakstatus.text,otherstuff.text];

[composer setMessageBody:mBodyString isHTML:NO]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T12:15:29.780

也可以这样

```
[composer setMessageBody: [NSString stringWithFormat:@"%@ \n%@ \n%@ \n%@",ios.text,iDevice.text, jailbreakstatus.text, otherstuff.text]isHTML:NO]; 
```

# session - 会话变量对管理员中的所有访问者可见

> ID：12988144
> 
> 赞同：0
> 
> 时间：2012-10-20T11:51:55.367
> 
> 标签：session, admin, last-modified

我想为管理页面存储上次编辑的文章，这样如果多个管理员正在编辑，他们可以看到最近编辑了哪些文章。我的问题是我可以使用会话变量将最后编辑的文章 id 存储在所有管理员都可以看到的庄园中吗？如果没有，最好的方法是什么？

我正在使用 php 进行服务器端 scipting。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T14:55:35.170

我通过使用 mysql 数据库将上次编辑的文章信息存储在单独的表中来解决它。

# javascript - Plupload 在 Android 2.x 上使用错误的 MIME 发送数据

> ID：12988146
> 
> 赞同：1
> 
> 时间：2012-10-20T11:52:01.957
> 
> 标签：javascript, plupload

我在让 plupload 在 Android 2.x 设备上工作时遇到问题。仅在这些设备上，plupload 以**二进制/八位字节**MIME 类型发送文件，尽管它应该像在其他系统（桌面 chrome、FF、Android 3.x 和 4.x）上一样发送**multipart/form-data 。**所以服务器根本无法处理这些请求。

```
var uploader = new plupload.Uploader({
    runtimes : 'html5,silverlight,html4',
    silverlight_xap_url : settings.url_silverlight,
    browse_button : 'pickfiles',
    container : 'uploader',
    max_file_size : '3mb',
    url : settings.url_nailarts,
    filters : [
        {title : NF.T("img_files"), extensions : "jpg,jpeg,gif,png"}
    ], ... }); 
```

multipart: true 是默认值，但即使我将它明确地放在那里也无济于事。我能做些什么？问题出在哪里？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-29T03:58:37.633

Andorid 2.x 不发送 multipart/form-data。相反，它在正文中发送文件，因此 application/octet-stream 是正确的类型。

在您的服务器上，您需要通过保存流本身来处理这种情况。

# python - Python - CV2 改变维度和质量

> ID：12988151
> 
> 赞同：2
> 
> 时间：2012-10-20T11:52:52.790
> 
> 标签：python, dimension, computer-vision

我设法用 Python 和 CV2 库拍了一张照片，但我想改变图像的尺寸并得到一些质量不高的东西，并将其调整为 640。

我的代码是：

```
cam = VideoCapture(0)   # 0 -> index of camera
s, img = cam.read()
    if s:    # frame captured without any errors
             imwrite(filename,img) #save image 
```

我曾尝试使用该方法`set`，但它不起作用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2017-06-27T09:16:59.300

您可以使用 opencv 调整大小：

```
img = cv2.resize(img, (640, 640)) 
```

将分辨率设置为 640x640，或

```
img = cv2.resize(img, (0,0), fx = 0.5, fy = 0.5) 
```

图像的每个维度减半。

如果你想要更差的质量，你可以使用模糊（我推荐高斯）：

```
img = cv2.GaussianBlur(img, (15,15), 0) 
```

如果您想要或多或少模糊，请更改 (15,15)（即内核大小）。

如果您想了解有关图像处理的更多信息，我发现这些非常有用：

[OpenCV 教程](http://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_tutorials.html "OpenCV 教程")，

[OpenCV 图像处理](http://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_imgproc/py_table_of_contents_imgproc/py_table_of_contents_imgproc.html#py-table-of-content-imgproc "OpenCV 图像处理")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T12:38:46.407

使用 cv2 调整大小： [如何使用 OpenCV2.0 和 Python2.6 调整图像大小](https://stackoverflow.com/questions/4195453/how-to-resize-an-image-with-opencv2-0-and-python2-6)

使用 Python 图像库 (PIL) 调整大小： [如何使用 PIL 调整图像大小并保持其纵横比？](https://stackoverflow.com/questions/273946/how-do-i-resize-an-image-using-pil-and-maintain-its-aspect-ratio)

# html - 为什么链接比里面的跨度大？

> ID：12988160
> 
> 赞同：1
> 
> 时间：2012-10-20T11:53:57.423
> 
> 标签：html, css

我正在对 css sprites 进行一些试验，并且遇到了一个小问题，我追查到了以下问题。

我应用了这个简单的 HTML 和一些样式 - 请参阅下面的小提琴。

```
<a href="#"><span class="fs"></span></a> 
```

对于跨度，我定义了 16x16px 的固定大小 - 但链接区域似乎更大（我分配了不同的颜色）。为什么？我已经尝试定义相同大小的行高...

[http://jsfiddle.net/tPemb/](http://jsfiddle.net/tPemb/)

我想我需要一杯咖啡...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T12:03:34.927

只需将其更改`display`为`block`这样...

```
.fs {
    display: block;
    width: 16px;
    height: 56px;
    background: #ddd;
}​ 
```

[jsfiddle](http://jsfiddle.net/tPemb/1/)

`inline-block`使元素生成内联级块容器。内联块的内部被格式化为块框，元素本身被格式化为原子内联级框，请在[规范](http://www.w3.org/TR/CSS2/visuren.html#propdef-display)中阅读更多内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T12:00:45.190

试试`float:left;` 在`.fs`

[**提琴手**](http://jsfiddle.net/SbrcC/)

# c# - 将参数传递给屏幕保护程序

> ID：12988161
> 
> 赞同：1
> 
> 时间：2012-10-20T11:54:03.600
> 
> 标签：c#, screensaver

我想知道是否可以从代码以预览模式运行屏幕保护程序（.scr）。如果我正常运行该进程，它会使用 /s 参数运行，并且我尝试传递我自己的 /p 参数，但 Windows 似乎会覆盖它。

```
Process process = new Process();
process.StartInfo.Arguments = "/p";
process.StartInfo.FileName = "MyScreensaver.scr";
process.StartInfo.WorkingDirectory = path;
process.Start(); 
```

这样做会导致 MyScreensaver 运行时传入“/s”参数。

# hibernate - 跟踪一行的“最后更新者”

> ID：12988164
> 
> 赞同：0
> 
> 时间：2012-10-20T11:54:15.473
> 
> 标签：hibernate

我正在使用休眠，并且我有一个表，该表由登录 Web 应用程序的各种用户不断更新。我想在该表中添加“上次更新时间”和“上次更新时间”列。对于时间戳位，我可以简单地使用触发器并从 oracle 获取时间/日期，但对于“上次更新时间”，应从应用程序层获取数据。

一种方法是明确识别正在修改该实体的所有场景并添加 entity.setLastUpdatedBy(username) 或类似的东西，但这意味着我必须识别实体可能获得的所有此类场景修改的。

还有其他方法可以实现吗？

[ps：我的问题与这个问题](https://forum.hibernate.org/viewtopic.php?f=1&t=950834)惊人地相似，但我找不到答案。问题中提到的链接不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T12:04:03.460

如果您是 Spring 和 JPA 用户，那么[spring-data-jpa](/questions/tagged/spring-data-jpa "显示标记为“spring-data-jpa”的问题")正是您所需要的：[*2.6。审计*](http://static.springsource.org/spring-data/data-jpa/docs/current/reference/html/#jpa.auditing)：

> 大多数应用程序都需要某种形式的可审计性来跟踪实体的创建或修改时间以及由谁创建或修改。

你所要做的就是：

*   实现`Auditable`基本上公开修改列的接口

*   实现简单的`Auditor`接口让框架知道谁当前登录：

    ```
    public interface AuditorAware<T, ID extends Serializable> {

        T getCurrentAuditor();
    } 
    ```

# r - 是否有一个函数，给定一列 data.frame 返回与条件匹配的所有列索引的列表？

> ID：12988168
> 
> 赞同：0
> 
> 时间：2012-10-20T11:54:35.107
> 
> 标签：r

我有一列数字数据。

我跑：

```
which.min(xdata[,5]) 
```

我得到找到最小值的索引。

```
[1] 20 
```

现在，如何提取满足相同条件的列的所有索引？也许作为一个列表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T11:59:03.927

```
which(xdata[ , 5] == min(xdata[ , 5])) 
```

将工作（它返回一个向量）。

如果要将索引作为列表：

```
as.list(which(xdata[ , 5] == min(xdata[ , 5]))) 
```

# actionscript-3 - ArgumentError: 修复 removeChild 时出现的错误 #2025

> ID：12988170
> 
> 赞同：1
> 
> 时间：2012-10-20T11:54:40.090
> 
> 标签：actionscript-3, removechild

我正在尝试制作宇宙飞船游戏，当我使用该`removeChild()`方法将弹丸或敌舰移出舞台时遇到问题。

这是代码的相关部分：

```
var bulletsArr:Array = new Array();
var eShipsArr:Array = new Array();

for (var c = 0; c < eShipsArr.length; c++){
stage.addChild(eShipsArr[c]);
}
....

stage.addEventListener(KeyboardEvent.KEY_DOWN,shoot);

function shoot (e:KeyboardEvent):void{
if(e.keyCode==17){
    var pj:projectile = new projectile();
    pj.x = SShip.x;
    pj.y = SShip.y;
    stage.addChild(pj);
    bulletsArr.push(pj);
    if(bulletsArr.length >= 10){
       bulletsArr = bulletsArr.slice(1,10);
    }
}
}
stage.addEventListener(Event.ENTER_FRAME,checkHit);

function checkHit (e:Event):void{
for (var d = 0; d < bulletsArr.length; d++){
    for(var f = 0; f < eShipsArr.length; f++){
        if(bulletsArr[d].hitTestObject(eShipsArr[f])){
            trace(bulletsArr[d].parent);
            stage.removeChild(bulletsArr[d]); //ArgumentError: Error #2025!!!!
        }
    }
}
} 
```

当我使用`removeChild()`with`stage`时，跟踪返回`null`。没有它，跟踪将返回`Stage object`。在这两种情况下，相同的错误都会跳转。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T13:20:20.130

可能是您试图删除一个已经被删除的孩子吗？

您不会将其从数组中删除，因此下一个循环或下一次`checkHit`调用将包括对可能已经从阶段中删除的对象的检查。即使对象不在舞台上，检查`hitTestObject`也会返回。`true`

未经测试（请注意，子弹数组正在向后迭代，以避免在删除数组元素时出现长度问题）：

```
for (var d = bulletsArr.length - 1; d >= 0; d--){
    for(var f = 0; f < eShipsArr.length; f++){
        if(bulletsArr[d].hitTestObject(eShipsArr[f])){
            trace(bulletsArr[d].parent);
            stage.removeChild(bulletsArr[d]); 
            bulletsArr.splice(d, 1); // remove bullet from array
        }
    }
} 
```

**编辑：**这是一些未经测试（正确键入）的代码，以防单个子弹可能与两艘或更多艘船相撞，您需要做的就是移除子弹：

```
for(var f:Number = 0; f < eShipsArr.length; f ++)
{
    for(var d:Number = bulletsArr.length - 1; d >= 0; d --)
    {
        if(bulletsArr[d].hitTestObject(eShipsArr[f]))
        {
            stage.removeChild(bulletsArr[d]);
            bulletsArr.splice(d, 1);
        }
    }
} 
```

互换的循环，这样删除的项目符号不会再次检查。

如果一颗子弹有可能与两艘或更多艘船相撞，并且您计划对与子弹相撞的船做一些事情，那么试试这个：

```
 for(var d:Number = bulletsArr.length - 1; d >= 0; d --)
    {
        var bullet:DisplayObject = bulletsArr[d];
        var bulletHitSomething:Boolean = false;

        for(var f:Number = 0; f < eShipsArr.length; f ++)
        {
            if(bullet.hitTestObject(eShipsArr[f]))
            {
                if(!bulletHitSomething)
                {
                    bulletHitSomething = true;
                    stage.removeChild(bullet);
                    bulletsArr.splice(d, 1);
                }
                // do other, ship specific stuff here
            }
        }
    } 
```

当前的子弹对象引用存储在一个变量中，并且所有检查都是针对该变量而不是使用数组访问的数组中的元素完成的。与可能访问不存在的索引的数组访问方法不同，这种方式可能对同一个项目符号进行连续检查应该没问题。还有一个变量存储子弹是否已经击中某物，这样它就不会再次尝试移除该子弹。

# php - 检查 $var 是 int 还是数组

> ID：12988173
> 
> 赞同：2
> 
> 时间：2012-10-20T11:55:37.320
> 
> 标签：php, arrays

在对象的构造函数中，我希望能够传递一个 int 变量（代表一个 id 然后获取到数据库）或一个数组（当我已经获取到数据库时）

我试过这样的事情：

```
__construct($var){
     if(isset($var['id'])){ /*tried also if($var['id']) != '')*/
        $this->id = $var['id'];
     }else{
        $this->id = $var;
      }
} 
```

问题是通过将 int 值参数作为 $var 传递，它将进入 if 的第一种情况。

那么我怎样才能检查 $var 是一个（关联）数组？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T11:57:51.653

您可以使用`is_int ($var)`它来检查它是否是一个 int 以及`is_array ($var)`它是否是一个数组

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T11:57:18.483

你可以使用php`is_array()`和`is_int()`函数

```
if(is_array($var)){
        $this->id = $var['id'];
     }else{
        $this->id = $var;
      } 
```

或者

```
if(is_int($var)){
           $this->id = $var;
         }elseif(is_array($var)){           
           $this->id = $var['id'];
          } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T11:59:00.433

至少有两种不同的检查方法：
[`gettype()`](http://php.net/manual/en/function.gettype.php)，它将返回一个类型为

```
$type = gettype($var);
switch($type) {
    case 'array':
        // ....
        break;
    case 'integer':
        // ...
        break;
    // ....
} 
```

并且

[`is_int()`](http://www.php.net/manual/en/function.is-int.php), 分别返回值[`is_array()`](http://www.php.net/manual/en/function.is-array.php)，这并不奇怪。`boolean`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T12:03:30.680

试试这个：

```
if (is_array($var)) ... 
```

# emacs - 粘液 - 如何补偿最近可能发生的变化

> ID：12988179
> 
> 赞同：3
> 
> 时间：2012-10-20T11:56:48.950
> 
> 标签：emacs, common-lisp, slime, sbcl

粘液的工作方式可能有一些小/大的变化，但从那以后我很难修复它。

我习惯了一种粘液，当开始时，有一个 REPL

```
CL-USER> 
```

`*scratch*`缓冲区和所有开放缓冲区和 REPL 之间的紧密交互。

在意识到 Ubuntu 软件包系统无法再将我带到任何地方后，我使用给定的手册自己安装了 emacs24.2 和最新的 slime（cvs checkout）。

我的 ~/.emacs 文件现在看起来像这样：

```
;;slime-setup 
(load (expand-file-name "~/quicklisp/slime-helper.el"))
(setq inferior-lisp-program "sbcl") 
(add-to-list 'load-path "/home/simkoc/emacs/slime/") 
(require 'slime-autoloads) 
(slime-setup '(slime-fancy slime-asdf)) 
```

*   `(slime-setup '(slime-fancy slime-asdf))`启用要初始化的粘液 REPL 缓冲区。
*   `(load (expand-file-name "~/quicklisp/slime-helper.el"))`启用了我习惯的所有快捷方式，我通过以下方式下载了包 `(ql:quickload "quicklisp-slime-helper)`

这些步骤显然解决了所有问题，但开放缓冲区和 REPL 之间的紧密交互仍然被破坏。

例如

我习惯了打字的互动

```
(FORMAT t "foobar~%") 
```

进入缓冲区`*scratch*`，然后在其上使用 CMx，将导致 repl 打印“foobar”。相反，我收到一个错误：

```
Debugger entered--Lisp error: (void-function FORMAT)
  (FORMAT t "foobar~%")
  eval-region(291 312 t (lambda (ignore) (goto-char 312) (quote (FORMAT t "foobar~%"))))  ; Reading at buffer position 310
  apply(eval-region (291 312 t (lambda (ignore) (goto-char 312) (quote (FORMAT t "foobar~%")))))
  eval-defun-2()
  eval-defun(nil)
  call-interactively(eval-defun nil nil)
  recursive-edit() 
```

这让我在两个方面感到困惑：

1.  REPL 中没有预期的输出
2.  [考虑到该行包含错误的（可疑）假设：这不是我被 slime 使用的错误/调试屏幕，它应该看起来像这张](http://common-lisp.net/project/slime/images/more-slime.png)图片中的右上角窗口。

我得到的另一个症状是，应该扩展给定宏表达式的 cx cm 在*slime-repl sbcl*缓冲区中工作，但在任何其他缓冲区中都会出现消息“Cc RET 未定义”。

有没有其他人遇到过类似的问题并想出了如何解决它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T14:31:24.960

看起来您曾经`M-x``slime-scratch`作为 SLIME 模式的一部分启动。要恢复该功能，您可以在 .emacs 文件中执行此操作：

```
(add-hook 'slime-mode-hook 'slime-scratch)
(add-hook 'slime-repl-mode-hook 'slime-scratch) 
```

我不确定`slime-repl-mode-hook`，看看你是否真的需要它。可能你只需要第一个`*slime-scratch*`在 SLIME 启动时自动创建缓冲区。

# eclipse - 为 Eclipse EMF jar 生成 Maven 工件

> ID：12988182
> 
> 赞同：0
> 
> 时间：2012-10-20T11:56:59.590
> 
> 标签：eclipse, maven, jar, emf

我有一个使用 EMF 生成器的项目，并且依赖于一些 EMF 2.5.0 jars。特别是 Maven 依赖项：

```
org.eclipse.emf.ecore:xmi:jar:2.5.0
org.eclipse.emf:common:jar:2.5.0
org.eclipse.emf:ecore:jar:2.5.0 
```

我尝试运行以下 Maven 命令来填充我的本地存储库：

```
mvn eclipse:make-artifacts -DstripQualifier=true -DeclipseDir=./ 
```

这成功地拉入了罐子，但版本错误（2.8.0）。我尝试过使用这些，但事实证明我缺少另一个依赖项：

```
org.eclipse.equinox:org.eclipse.equinox.app:jar:1.0.0 
```

有谁知道是否有办法生成一套完整的 EMF Maven 工件？

谢谢，

乔恩

# javascript - 如何设置远程域的 cookie？

> ID：12988185
> 
> 赞同：1
> 
> 时间：2012-10-20T11:57:19.390
> 
> 标签：javascript, jquery, cookies

嗨，我需要在我的网站上为另一个域设置 cookie。我找到了一个正在做我需要做的事情的网站，但我不知道他们是如何做的。如果您清除所有 cookie 并访问[http://www.mbna.co.uk/](http://www.mbna.co.uk/)，然后查看页面加载后设置了哪些 cookie，您会看到许多不同域的 cookie 被设置，例如作为 quantserve.com 和 mcookie1.com。

如何为这些域设置 cookie？我以为出于安全原因，您只能为您所在的域设置 cookie？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T11:58:40.950

> 我以为出于安全原因，您只能为您所在的域设置 cookie？

这是正确的。您链接到的站点可能嵌入了来自其他站点的资源，例如图像或脚本。在这些请求期间，外部服务器可以设置它们的 cookie。

# apache-camel - Camel MongoDB：如何添加cutsom转换器

> ID：12988187
> 
> 赞同：0
> 
> 时间：2012-10-20T11:57:29.133
> 
> 标签：apache-camel

我查看了[文档](http://camel.apache.org/mongodb.html#MongoDB-Typeconversions)，但找不到如何为 mongoDB 添加自定义类型转换器。一个人怎么能做到？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T13:42:35.080

首先，我认为`fromAnyObjectToDBObject`默认转换器可以解决您的大多数情况。它使用**Jackson**库，您只需用正确的注释标记您的自定义类。

无论如何，如果您仍然需要自定义转换器，则应执行以下步骤：

1.  `org.apache.camel.Converter`将您的转换逻辑变白，并使用注释标记您的类和转换器方法：

    ```
    package com.acme.converters;

    @Converter
    public class CustomConverter {

      @Converter
      public static DBObject fromCustomToDBObject(CustomType object) {
        // conversion logic
      }

    } 
    ```

2.  创建以下要放置在结果 jar 中的资源文件：

**META-INF/services/org/apache/camel/TypeConverter**

并在此文件中列出您的转换器类：

*com.acme.converters.CustomConverter*

该文件将帮助**Camel**自动发现您自己的转换器。

你也可以看看：

*   `META-INF/services/org/apache/camel/TypeConverter`在**camel-mongodb-xxxjar**中查看默认转换器是如何定义的
*   `org.apache.camel.impl.converter.AnnotationTypeConverterLoader`检查转换器加载逻辑的类

# java - Java Swing 中的 HMI 分层

> ID：12988188
> 
> 赞同：2
> 
> 时间：2012-10-20T11:57:30.203
> 
> 标签：java, swing, layout-manager

我请求您的帮助，因为我想开发一个聊天界面（我正在使用 Sockets 等进行培训）。问题是（我很生气），我确切地知道我想要什么，但我做不到！

我期望的图像：

![理论案例](../Images/6a22d845f984514c72bee2647bac2090.png)

我使用不同的 JPanel 来实现不同的视图，然后我尝试将它与 GridBagLayout 混合。

我能得到的最好的就是这个（我为标题和控制台面板着色）：

![在实践中](../Images/a99f2d0ed1a2fcc5019f982eb6cd5530.png)

我在不同的类中实现了不同的面板，我在一个类中实现了主视图，所以有 mainView 代码：

```
import java.awt.Dimension;
import java.awt.FlowLayout;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.event.WindowEvent;
import java.awt.event.WindowListener;
import javax.swing.JFrame;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.JPanel;
import javax.swing.UIManager;

import com.awax.tchat.client.panels.Header;
import com.awax.tchat.client.panels.MessageBox;
import com.awax.tchat.client.panels.ServerBox;
import com.awax.tchat.client.panels.TchatBox;
import com.awax.tchat.client.panels.UsersBox;

public class TchatView extends JFrame {

private static final long serialVersionUID = 1L;

protected TchatModel tchatModel;
protected TchatController tchatController;

protected JMenuBar menuBar; // Barre des menus de la fenêtre
protected JMenu menuFichier; // Menu Fichier
protected JMenu menuAide; // Menu Aide

protected Header header; // Entête du tchat
protected MessageBox messageBox; // Boîte d'envoi des messages
protected ServerBox serverBox; // Boîte connexion au serveur
protected TchatBox tchatBox; // Affichage de la console
protected UsersBox usersBox; // Boîte d'affichage des utilisateurs connectés

public TchatView () {
    super("Tchat - v0.1 Alpha");
    this.setDefaultCloseOperation(EXIT_ON_CLOSE);
    this.setLocation(200, 100);
    this.setSize(new Dimension(1000, 800));
    try {
        UIManager.setLookAndFeel("com.sun.java.swing.plaf.windows.WindowsLookAndFeel");
    } catch (Exception e) {
        e.printStackTrace();
    }
}

/*
 * Méthodes publiques
 */

// Permet d'initialiser les différents panels de l'interface
public void initView () {
    this.header = new Header();
    this.messageBox = new MessageBox(this.tchatModel, this.tchatController);
    this.serverBox = new ServerBox(this.tchatModel, this.tchatController);
    this.tchatBox = new TchatBox(this.tchatModel, this.tchatController);
    this.usersBox = new UsersBox(this.tchatModel, this.tchatController);

    setStyle();

    this.addWindowListener(new Window_Listener());
}

/*
 * Méthodes protégées
 */

// Permet de créer les éléments de la fenêtre
protected void setStyle () {
    GridBagConstraints gbc = new GridBagConstraints();
    initMenuBar();

    this.setLayout(new GridBagLayout());

    gbc.weightx = 1.;
    gbc.weighty = 1.;
    gbc.anchor = GridBagConstraints.FIRST_LINE_START;
    gbc.fill = GridBagConstraints.HORIZONTAL;
    this.add(this.header, gbc);

    gbc.gridx = 0;
    gbc.gridy = 1;
    gbc.gridwidth = 1;
    gbc.gridheight = 2;
    gbc.anchor = GridBagConstraints.NORTHWEST;
    gbc.fill = GridBagConstraints.BOTH;
    this.add(this.tchatBox, gbc);

    gbc.gridx = 1;
    gbc.gridy = 0;
    gbc.gridwidth = 1;
    gbc.gridheight = 1;
    gbc.anchor = GridBagConstraints.FIRST_LINE_END;
    gbc.fill = GridBagConstraints.NONE;
    this.add(this.serverBox, gbc);

    gbc.gridx = 1;
    gbc.gridy = 2;
    gbc.gridwidth = 1;
    gbc.gridheight = 1;
    gbc.anchor = GridBagConstraints.PAGE_START;
    gbc.fill = GridBagConstraints.WEST;
    this.add(this.usersBox, gbc);

    gbc.gridx = 0;
    gbc.gridy = 3;
    gbc.gridwidth = 2;
    gbc.gridheight = 1;
    gbc.anchor = GridBagConstraints.FIRST_LINE_START;
    gbc.fill = GridBagConstraints.BOTH;
    this.add(this.messageBox, gbc);
}

// Permet de créer la barre des menus de la fenêtre
protected void initMenuBar () {
    JMenuItem item1, item2, item3, item4;

    this.menuBar = new JMenuBar();
    this.menuFichier = new JMenu("Fichier");
    this.menuAide = new JMenu("Aide");

    item1 = new JMenuItem("Item1");
    item2 = new JMenuItem("Item2");
    item3 = new JMenuItem("Item3");
    item4 = new JMenuItem("Item4");

    this.menuFichier.add(item1);
    this.menuFichier.add(item2);
    this.menuAide.add(item3);
    this.menuAide.add(item4);
    this.menuBar.add(this.menuFichier);
    this.menuBar.add(this.menuAide);

    this.setJMenuBar(this.menuBar);
}

/*
 * Listeners
 */

protected class Window_Listener implements WindowListener {
    @Override
    public void windowActivated (WindowEvent arg0) {
    }
    @Override
    public void windowClosed (WindowEvent arg0) {
    }
    @Override
    public void windowClosing (WindowEvent arg0) {
        tchatController.disconnectFromServer();
    }
    @Override
    public void windowDeactivated (WindowEvent arg0) {
    }
    @Override
    public void windowDeiconified (WindowEvent arg0) {
    }
    @Override
    public void windowIconified (WindowEvent arg0) {
    }
    @Override
    public void windowOpened (WindowEvent arg0) {
    }
}

/*
 * Accesseurs
 */

public TchatModel getModel () {
    return tchatModel;
}

public void setModel (TchatModel tchatModel) {
    this.tchatModel = tchatModel;
}

public TchatController getController () {
    return tchatController;
}

public void setController (TchatController tchatController) {
    this.tchatController = tchatController;
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T13:19:18.287

*   放入 JPanel 的 JComponents 默认返回自己的 PreferredSize，然后没有理由为子 JPanel 设置任何维度

*   JFrame（对所有顶级容器有效）已在 API BorderLayout 中实现（无间隙）

*   JPanel 实现了 FlowLayout，然后接受来自子级的 PreferredSize，但子级的 Size 不可调整大小，保持不变

*   其余的 JComponets 还没有实现任何布局管理器

*   不调整大小，放在那里 JComponents，GUI 将正确显示，无需对 Size 或 Dimension 进行任何额外设置（例如 JTextField(10)、JTextArea (10, 15) 等...），

*   StandardLayout manager 完全忽略 setSize() ...，默认只接受 PreferredSize

编辑/

如果您只想将一个 JComponent 放入容器并且该容器将被全部占用，则将 LayoutManager (FlowLayout) JPanel 更改为 BorderLayout 然后将 JScrollPane 放入 BorderLayout.CENTER，JTextArea 的大小将为从 JTextArea(10, 15) 计算得出，肯定要玩这些数字 :-)，对于每个 JPanel，将在一个 JFrame 中放置很多 JComponent

/编辑

例如，

![在此处输入图像描述](../Images/18587ec32f3a119a8461264395ecb419.png)

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.EventQueue;
import java.awt.GridLayout;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class NestedLayout {

    private JFrame frame = new JFrame();
    private JPanel centerParent = new JPanel();
    private JPanel centerNorth = new JPanel();
    private JPanel centerCenter = new JPanel();
    private JPanel eastParent = new JPanel();
    private JPanel eastTop = new JPanel();
    private JPanel eastBottom = new JPanel();
    private JPanel southParent = new JPanel();

    public NestedLayout() {
        centerNorth.setBackground(Color.GREEN);
        centerCenter.setBackground(Color.YELLOW);
        centerParent.setBackground(Color.GRAY);
        centerParent.setLayout(new BorderLayout(5, 5));
        centerParent.add(centerNorth, BorderLayout.NORTH);
        centerParent.add(centerCenter, BorderLayout.CENTER);
        southParent.setBackground(Color.CYAN);
        eastTop.setBackground(Color.MAGENTA);
        eastBottom.setBackground(Color.ORANGE);
        eastParent.setBackground(Color.DARK_GRAY);
        eastParent.setLayout(new GridLayout(2, 0, 5, 5));
        eastParent.add(eastTop);
        eastParent.add(eastBottom);
        frame.setLayout(new BorderLayout(5, 5));
        frame.add(centerParent, BorderLayout.CENTER);
        frame.add(southParent, BorderLayout.SOUTH);
        frame.add(eastParent, BorderLayout.EAST);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] a_args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                NestedLayout NL = new NestedLayout();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T15:12:27.067

IMO**构建 Swing 布局的最简单和最有效的方法是使用[MigLayout](http://www.miglayout.com/)**。此布局可以轻松替换 JDK 中可用的任何其他布局。

这是一个快速示例，显示您正在尝试构建的 UI。*注意：用户界面可调整大小*

![在此处输入图像描述](../Images/443dfa7b374b9f22bb8f9546f52f31a7.png)

这是相关的代码

```
import java.awt.Color;

import javax.swing.BorderFactory;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.SwingConstants;

import net.miginfocom.swing.MigLayout;

@SuppressWarnings("serial")
public class ChatPanel extends JPanel{
    public ChatPanel() {

        setLayout(new MigLayout("", "[grow][]", "[70px][grow][grow][50px]"));

        JLabel lbConsole = new JLabel("CONSOLE");
        lbConsole.setHorizontalAlignment(SwingConstants.CENTER);
        lbConsole.setBorder(BorderFactory.createLineBorder(Color.BLACK));

        JLabel lblMessageDialog = new JLabel("MESSAGE DIALOG");
        lblMessageDialog.setHorizontalAlignment(SwingConstants.CENTER);
        lblMessageDialog.setBorder(BorderFactory.createLineBorder(Color.BLACK));

        JLabel lblHeader = new JLabel("HEADER");
        lblHeader.setHorizontalAlignment(SwingConstants.CENTER);
        lblHeader.setBorder(BorderFactory.createLineBorder(Color.BLACK));

        JLabel lblServerInfos = new JLabel("SERVER INFOS");
        lblServerInfos.setVerticalAlignment(SwingConstants.TOP);
        lblServerInfos.setHorizontalAlignment(SwingConstants.CENTER);
        lblServerInfos.setBorder(BorderFactory.createLineBorder(Color.BLACK));

        JLabel lblConnectedUsers = new JLabel("CONNECTED USERS");
        lblConnectedUsers.setVerticalAlignment(SwingConstants.TOP);
        lblConnectedUsers.setHorizontalAlignment(SwingConstants.CENTER);
        lblConnectedUsers.setBorder(BorderFactory.createLineBorder(Color.BLACK));

        add(lblServerInfos, "cell 1 0 1 2,grow");
        add(lbConsole, "cell 0 1 1 2,grow");
        add(lblHeader, "cell 0 0,grow");
        add(lblConnectedUsers, "cell 1 2,grow");
        add(lblMessageDialog, "cell 0 3 2 1,grow");
    }

} 
```

# ios - 如何将已编译的 IPA 复制到我的 iOS 设备？

> ID：12988196
> 
> 赞同：3
> 
> 时间：2012-10-20T11:58:50.543
> 
> 标签：ios, ipa

我有一个开发者帐户，并且习惯于创作自己的应用程序。最近与我合作的另一位开发人员希望我在我的设备上测试他们的应用程序。他已经将我的设备 ID 添加到他的配置文件中，并为我提供了一个编译的 IPA，但是我不知道如何将这个 IPA 复制到我的 iOS 设备。XCode 的工作流程似乎不是我在使用自己的源代码时所习惯的。

他特别要求我不要使用试飞。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-15T17:21:04.013

我使用 Dropbox 与测试人员共享 Ad-Hoc 构建。流程如下：

**使用 Dropbox 分发 Ad Hoc iOS 构建：**

***确保 iOS 配置文件包含客户端/测试者设备的 UDID，否则构建将不会安装在他们的设备上，并且 Dropbox 已安装在您的 MAC 机器上。***

1.  将目标设备设置为**iOS 设备**并通过转到***Product -> Archive 准备一个 iOS App Archive***。

2.  存档完成后将打开管理器窗口，其中显示所有以前的存档（如果有）。

3.  选择最新的存档并单击***分发***，选择***Save for Enterprise 或 Ad Hoc Deployment***选项并单击下一步。

4.  选择配置文件以签署包含所有目标设备的 UDID 的 .ipa 文件，然后单击***导出***。

5.  签名完成后，会打开一个 Finder 窗口，询问保存最终 .ipa 文件的位置，选择要放置 .ipa 的**Dropbox文件夹。**在 Finder 窗口的底部，选中***Save for Enterprise Distribution***选项。选中 Save for Enterprise Distribution 后，将出现一些文本字段，在***Application URL***字段中输入虚拟 URL（例如[http://dl.myipalink.com](http://dl.myipalink.com)），在***Title***字段中输入应用程序名称，然后单击 Save。

***   转到 MAC 上的 Dropbox 文件夹，您会发现为您生成了两个文件（即 .ipa 和 .plist）。

    6.1) 右键单击​​ .ipa 文件并选择***Share Dropbox Link***，链接将被复制到剪贴板。将其粘贴到文本编辑器中，并将链接中的**www**替换为**dl** 。现在您的 .ipa 链接已准备就绪，这是 上面第 5 步中讨论的***应用程序 URL 。***

    6.2) 打开 .plist 文件并将虚拟 url 替换为我们在步骤 6.1 中准备的 .ipa 链接。

    6.3）右键单击 .plist 文件并单击***Share Dropbox Link***，将链接粘贴到某处并将**www**替换为**dl**。这与我们在步骤 6.1 中所做的相同。您的 .plist 链接已准备就绪。

    *   在保存 .ipa 和 .plist 文件的同一个 Dropbox 文件夹或 Dropbox 文件夹内的任何其他位置创建一个 .html 文件，如下所示。

    ```
    <!doctype html>
    <head>
    <title>MY APP</title>
    </head>
    <body>
    <h1><a href="itms-services://?action=download-manifest&amp;url=YOUR .PLIST LINK” > Download My App  </a></h1><br><br>
    </html> 
    ```** 

 ****将您的.PLIST LINK**替换为我们在步骤 6.3 中准备的 .plist 链接。保存 html 文件。

8.  右键单击 .html 文件并单击***Share Dropbox Link***，指向 .html 文件的链接将被复制到剪贴板。将此链接发送给客户/测试人员。保存链接以备日后使用。

9.  下次如果您想更新构建，只需将现有的 .ipa 替换为新的。

希望现在您可以分发 iOS 版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T12:01:55.693

我们所做的（在工作中）是：我们确实建立了一个带有 IPA 链接的小型网页。您单击它，设备将安装它。

非常简单，也很容易将 IPA 分发给测试人员。并且只有配置文件中的设备才能安装。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-15T17:25:29.277

让他将 ipa 放到网上并将新用户指向该 url

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T12:05:11.213

iPhone配置实用程序可以用于此-打开应用程序（我不记得您是否需要先下载它）并拖入ipa，连接您的设备，您可以在那里安装它。

您也可以使用 iTunes，但这可能不是您想在工作机器上使用个人设备执行的操作，因为您必须同步整个内容，而不仅仅是安装单个应用程序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-15T17:31:53.217

还有另一种方法可以添加`.ipa`到我们在工作中使用的设备 - 是 xCode 设备管理器 - 只需打开目标设备的应用程序部分并`.ipa`放入已安装的应用程序列表**

# mysql - MySQL 数据库结构：多列或多行

> ID：12988199
> 
> 赞同：4
> 
> 时间：2012-10-20T11:59:18.030
> 
> 标签：mysql, sql, performance

我收集人们如何用表格中的类别标记主题，例如：

```
ID | topic_id | votes_Category_1 | votes_Category_2 |.......... | votes_Category_12 
```

出于历史原因，我每小时都会转储这张桌子。假设表包含 200 万行。每小时在历史表中倾倒。

如果我想添加列 Category_13，这个解决方案不灵活，所以我正在考虑这个：

```
ID | topic_id | Category_id | vote_count 
```

该解决方案将为每个主题创建 12 行，其结构更好且更灵活，但我必须每小时转储 2400 万行。

我需要每个类别中最好的 10 个主题！我想知道在案例 2 中使用 Max on votes（其中 category_id=x 和 topic_id=y）是否会比案例 1 慢： Order by categoy_x where topic_id=y

哪个会更好只是！从性能的角度来看：

1.  拥有 200 万行 14 列
2.  拥有 4 列的 2400 万行

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T12:10:38.680

我会查看检索模式来决定方法。

1.  如果您按类别检索主题，那么我将采用第二种方法，在类别字段上定义索引，以便给定类别的所有记录连续（相对）存储在磁盘上，从而减少磁盘页数被取回。这也是因为与所有类别作为列的表相比，记录大小更小。优点是可以灵活地轻松添加更多类别，缺点是（ID，TopicID）列数据的重复会影响数据的总大小。

2.  如果您按主题检索，那么我将采用第一种方法，在该主题上定义一个索引。这将减少每个类别的 (ID, TopicID) 列值的重复，从而减少要存储的数据的总大小，并且由于行数以每小时数百万为单位，这种大小的减少必须是显着的。缺点是需要修改新类别的架构。

**编辑**：考虑您编辑的检索模式：

> 我检索每个类别的热门主题及其值，因此我在案例 1 中按 votes_Category_x 排序。

我理解为`Find the top N topics with largest number of votes in a given category`

> 在案例 2 中，我会寻找每个 topic_id 的 max(category)。

而这作为`SELECT TopicID, MAX(votes) FROM TABLE GROUP BY TopicID, Category`。

200 万行和 2400 万行的记录大小不同，但是是的，ID 和 TopicID 重复，这肯定会增加数据大小，每条记录增加 8 个字节。

第一个表存储 200 万条大小`60 bytes (4*15 ints)`的记录，第二个表存储 2400 万条大小的记录`16 bytes (4*4 ints)`。第二个表将每小时添加每个`~62`页面。`4KB`在一段时间内似乎是一个问题。由于在中间插入数据，这也会影响碎片，因为在第二种方法的情况下，索引是按类别组织的。

在继续使用其中一种表结构之前，可能值得进行一些性能测试以更好地理解这一点并权衡添加类别的频率。

# ruby - 使用rest-client ruby gem在elasticsearch中传递json数据获取请求

> ID：12988201
> 
> 赞同：4
> 
> 时间：2012-10-20T11:59:51.960
> 
> 标签：ruby, elasticsearch, rest-client

如何使用 rest 客户端执行以下查询（在[doc中给出）。](http://www.elasticsearch.org/guide/reference/api/search/request-body.html)

```
curl -XGET 'http://localhost:9200/twitter/tweet/_search' -d '{
    "query" : {
        "term" : { "user" : "kimchy" }
    }
}
' 
```

我试过这样做：

```
q = '{
    "query" : {
        "term" : { "user" : "kimchy" }
    }
}
'

r = JSON.parse(RestClient.get('http://localhost:9200/twitter/tweet/_search', q)) 
```

这引发了一个错误：

```
in `process_url_params': undefined method `delete_if' for #<String:0x8b12e18>     (NoMethodError)
    from /home/socialapps/.rvm/gems/ruby-1.9.3-p194/gems/rest-client-1.6.7/lib/restclient/request.rb:40:in `initialize'
    from /home/socialapps/.rvm/gems/ruby-1.9.3-p194/gems/rest-client-1.6.7/lib/restclient/request.rb:33:in `new'
    from /home/socialapps/.rvm/gems/ruby-1.9.3-p194/gems/rest-client-1.6.7/lib/restclient/request.rb:33:in `execute'
    from /home/socialapps/.rvm/gems/ruby-1.9.3-p194/gems/rest-client-1.6.7/lib/restclient.rb:68:in `get'
    from get_check2.rb:12:in `<main>' 
```

当我使用 做同样的事情时`RestClient.post`，它给了我正确的结果！但是弹性搜索文档`XGET`在 curl 命令中使用搜索查询而不是`XPOST`. 我如何使该`RestClient.get`方法起作用？

如果有其他/更好的方法来执行此操作，请提出建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T17:16:54.407

RestClient 无法发送带有`GET`. 你有两个选择：

将您的查询作为`source`URL 参数传递：

```
require 'rest_client'
require 'json'

# RestClient.log=STDOUT # Optionally turn on logging

q = '{
    "query" : { "term" : { "user" : "kimchy" } }
}
'
r = JSON.parse \
      RestClient.get( 'http://localhost:9200/twitter/tweet/_search',
                      params: { source: q } )

puts r 
```

...或者只是使用`POST`.

* * *

*更新：*修正了 URL 参数的错误传递，请注意`params`哈希。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-31T06:41:26.137

以防其他人发现这个。尽管不推荐，但可以使用主 API 用来创建调用的内部请求方法发送带有 GET 的请求正文。

```
RestClient::Request.execute( method: :get, 
                             url: 'http://localhost:9200/twitter/tweet/_search',
                             payload: {source: q} ) 
```

有关更多详细信息，请参见[此处](http://www.ruby-doc.org/gems/docs/w/wgibbs-rest-client-1.0.5/RestClient/Request.html)。

# javascript - 复制元素的 Onclick 事件

> ID：12988202
> 
> 赞同：4
> 
> 时间：2012-10-20T11:59:56.707
> 
> 标签：javascript, jquery

大家好，我有一个有趣的问题

是否可以复制这样的元素的 onclick 事件

```
$('#ElementId').attr('OldOnClick',$('#ElementId').attr('OnClick')); 
```

如果有任何方法可以做到这一点，请指导我。

我正在尝试禁用表单上存在的所有元素的点击事件，在某些时候我必须恢复它们，所以我试图`onclick`用其他属性名称保存它们

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T12:09:46.263

是的，您可以访问处理程序函数。在jquery中这样做的方式是这样的：

```
$('#specialbutton').click(function(){ console.log("peaches");};

var handlerFunction = $('#specialbutton').data("events").click[0].handler;

$('#specialbutton').click(); // "peaches"
handlerFunction(); // "peaches" 
```

然后，您可以将其分配给另一个元素，如下所示：

```
$('#otherelement').click(handlerFunction);
$('#otherelement').click(); // "peaches" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-11T10:13:45.667

我编写了用于复制事件的 jQuery 插件。虽然，它仅适用于动态添加的事件，但不适用于添加“on”功能的事件。

我希望这会对某人有所帮助。

参数：

eventType - “点击”、“鼠标悬停”等。

目的地 - jQuery 对象、dom 元素或选择器

clearCurrent - 如果为 true，它将清除目标处的当前处理程序 - 默认为 false

```
 (function($){
            $.fn.copyEventTo = function(eventType, destination, clearCurrent) {
            var events = [];
            this.each(function(){
                var allEvents = jQuery._data(this, "events");
                if (typeof allEvents === "object") {
                    var thoseEvents = allEvents[eventType];
                    if (typeof thoseEvents === "object") {
                        for (var i = 0; i<thoseEvents.length; i++){
                            events.push(allEvents[eventType][i].handler);
                        }           
                    }
                }
            });
            if (typeof destination === "string") {
                destination = $(destination);
            } else if (typeof destination === "object") {
                if (typeof destination.tagName === "string") {
                    destination = $(destination);
                }
            }
            if (clearCurrent === true) destination.off(eventType);
            destination.each(function(){
                for(var i = 0; i<events.length; i++) {
                    destination.bind(eventType, events[i]); 
                }
            });
            return this;
        }
    })(jQuery); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-12-04T17:23:18.727

这里有另一种方式：

```
//sw Get Element
var button = document.getElementById("mybutton");
//sw Get Click Function
var clickFunction = jQuery._data(button, "events").click[0].handler;
//sw Test Click Function
clickFunction();
//sw Copy ClickFunction to another Element
$('#anotherButton').click(clickFunction); 
```

注意：前面的代码适用于：

```
$("#mybutton").click(function() {
    //sw TODO HERE
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T13:27:10.427

听起来您可能错过了下面的第二行。当你在做副本时，你会想要做一个动作。

```
$('#ElementId').attr('oldonclick', $('#ElementId').attr('onclick') )
               .removeAttr('onclick'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-20T13:33:50.120

以下将删除元素数据中的“onclick”存储，并允许您稍后从数据中使用它。`A`使用标签的示例

演示 [http://jsfiddle.net/u4eVW/1/](http://jsfiddle.net/u4eVW/1/)

```
/* remove "onclick" and store */
$('a').each(function() {
    var onclick = $(this).attr('onclick')
    $(this).data('oldClick', onclick)
    $(this).removeAttr('onclick')

})

/* initialize handlers from data */
$('a').click(function() {
        eval($(this).data('oldClick'))
 }) 
```

如果您希望更改单个“onclick”中的某些内容，则需要将属性值视为字符串并使用正则表达式方法进行修改。

```
<a href="#" onclick="alert('foo')"> Link 1</a>

var onclick=$(selector).attr('onclick').replace('foo', 'bar') 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-07-10T22:31:33.697

显然你不应该再这样做了，

这就是你无论如何都可以做到的（感谢[这个答案](https://stackoverflow.com/a/2518441/2135941)）：

```
var handlerFunction = jQuery._data( $('#ElementId').get(0), "events" ).click[0].handler; 
```

然后，就像[ChuckE](https://stackoverflow.com/users/1396395/chucke)的回答一样：

```
$('#otherelement').click(handlerFunction);
$('#otherelement').click(); // "peaches" 
```

不要告诉任何人...

# php - 使用 FilesystemIterator 对文件夹应用尾部斜杠

> ID：12988204
> 
> 赞同：2
> 
> 时间：2012-10-20T12:00:04.333
> 
> 标签：php, filesystems, iterator, spl

具有以下代码段以递归方式映射当前目录的内容：

```
$files = new RecursiveIteratorIterator
(
    new RecursiveDirectoryIterator('./',
        FilesystemIterator::SKIP_DOTS | FilesystemIterator::UNIX_PATHS),
    RecursiveIteratorIterator::SELF_FIRST
);

$files = array_values(array_map('strval', iterator_to_array($files))); 
```

返回如下内容：

```
Array
(
    [0] => ./1.png
    [1] => ./a.php
    [2] => ./adminer
    [3] => ./adminer/adminer.css
    [4] => ./adminer/adminer.php
) 
```

有什么方法可以获取[`RecursiveDirectoryIterator`](http://php.net/manual/en/class.recursivedirectoryiterator.php)/[`FilesystemIterator`](http://php.net/manual/en/class.filesystemiterator.php)模拟函数`GLOB_MARK`中存在的行为[`glob()`](http://php.net/manual/en/function.glob.php)？从手册：

> **GLOB_MARK** - 在返回的每个目录中添加一个斜杠。

我知道我可以通过简单地模仿它：

```
foreach ($files as $key => $value)
{
    $files[$key] .= (is_dir($value) ? '/' : '');
} 
```

但这需要（不必要地？）多次访问磁盘。我正在寻找一种方法来快速确定路径是目录还是常规文件，而结尾的斜杠似乎是理想的解决方案。

我计划用这个遍历数万（如果不是数百）数千个文件，因此性能至关重要。

**奖励问题：有没有办法只获取目录（递归）？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T12:45:12.457

您可以创造自己的`GlobMarkIterator`优势：

*   将结束斜杠返回到目录，就像`GLOB_MARK`
*   无需使用`array_map`with`strval`将其转换为字符串
*   没有额外的`foreach`循环`is_dir`
*   还是和原来一样快
*   **是的，我知道我作弊了**

例子

```
$ri = new RecursiveIteratorIterator(new GlobMarkIterator('./', FilesystemIterator::SKIP_DOTS | FilesystemIterator::UNIX_PATHS), RecursiveIteratorIterator::SELF_FIRST);
$files = array_values(iterator_to_array($ri));

echo "<pre>";
print_r($files); 
```

输出

```
Array
(
    [0] => ./test/backups/ <----------- Note ending slash 
    [1] => ./test/CSV/
    [2] => ./test/CSV/abc.csv
    [3] => ./test/final/
    [4] => ./test/thumb/
    [5] => ./test/thumb/a.png
    [6] => ./test/thumb/s.svg
    [7] => ./test/thumb/sample.svg
) 
```

**奖励问题：有没有办法只获取目录（递归）？**

这应该是另一个问题，但都是一样的......*我希望你不要满意，并为此提供赏金*

解决方案 ：

```
$ri = new RecursiveIteratorIterator( new GlobMarkDirectory('./test'), RecursiveIteratorIterator::SELF_FIRST);
$dir = array_values(iterator_to_array($ri));

echo "<pre>";
print_r($dir); 
```

输出

```
Array
(
    [0] => ./test/backups/
    [1] => ./test/CSV/
    [2] => ./test/final/
    [3] => ./test/thumb/
) 
```

使用的类

`GlobMarkIterator`

```
class GlobMarkIterator extends RecursiveDirectoryIterator {
    function current() {
        return $this->isDir() ? $this->getPathname() . "/" : $this->getPathname();
    }
} 
```

`GlobMarkDirectory`班级

```
class GlobMarkDirectory  extends RecursiveFilterIterator {
    public function __construct($path) {
        parent::__construct(new GlobMarkIterator($path, FilesystemIterator::SKIP_DOTS | FilesystemIterator::UNIX_PATHS));
    }
    public function accept() {
        return $this->getInnerIterator()->isDir();
    }
    public function getChildren() {
        return new GlobMarkDirectory($this->getInnerIterator()->getPathname());
    }
} 
```

**编辑..如果您不关心并且由于速度和开销而`empty dir`不想使用这里是另一种解决方案`isDir`**

解决方案

```
$ri = new RecursiveIteratorIterator(new GlobMarkFastDirectory  (__DIR__), RecursiveIteratorIterator::SELF_FIRST);
$dir = array_values(array_unique(iterator_to_array($ri))); 
```

`GlobMarkFastDirectory`

```
class GlobMarkFastDirectory  extends RecursiveDirectoryIterator {
    function current() {
        return dirname($this->getPathname())  ."/";
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T14:32:15.907

这是我迄今为止的最大努力：

```
$files = new RecursiveIteratorIterator
(
    new RecursiveDirectoryIterator
    (
        str_replace('\\', '/', realpath('./')),
        FilesystemIterator::SKIP_DOTS | FilesystemIterator::UNIX_PATHS
    ),
    RecursiveIteratorIterator::LEAVES_ONLY
);

$files = array_keys(iterator_to_array($files));
$folders = array();

/*
foreach ($files as $key => $value) // not needed anymore
{
    $files[$key] .= (is_dir($value) === true) ? '/' : '';
}
*/

$files = array_flip($files);

foreach ($files as $key => $value)
{
    $folder = dirname($key) . '/'; // doesn't issue a stat call

    if (array_key_exists($folder, $folders) !== true)
    {
        $folders[$folder] = 0;
    }

    $folders[$folder] += $files[$key] = sprintf('%u', filesize($key));
} 
```

我可以将`$folders`数组与`$files`数组合并以准确回答问题，但区分另一个正是我的主要目标，所以这样做没有意义。

# eclipse - 未定义的属性名称（数据切换）

> ID：12988208
> 
> 赞同：4
> 
> 时间：2012-10-20T12:00:47.177
> 
> 标签：eclipse, jsp, twitter-bootstrap

我`JSP(Java Server Pages)`在 Eclipse 中使用 Twitter 引导程序。我正在尝试在导航栏（导航栏）中使用 twitter 登录/注册表单，但它会发出警告`Undefined attribute name (data-toggle)`以下代码会发出警告`data-toggle="dropdown"`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-06-02T15:48:57.433

Eclipse 无法识别此属性，但您可以配置 HTML Validation 首选项以忽略它。

在 HTML 文件的首选项 --> 验证下，有一个选项可以忽略指定的属性名称。如果需要，可以在此处输入模式，例如`data-*`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-24T09:46:01.603

Eclipse Luna 不会显示此警告，因此升级您的 Eclipse 版本应该会消除此警告。

# c# - List.Except 不起作用

> ID：12988209
> 
> 赞同：10
> 
> 时间：2012-10-20T12:00:49.920
> 
> 标签：c#, linq, list

我尝试减去 2 个列表，如下面的代码，`assignUsers`有 3 条记录并`assignedUsers`有 2 行。在`Except`方法之后我仍然得到 3 行，虽然我应该得到 1 条记录，因为 2 行`assignedUsers`类似于`assignUsers`

```
 var users = accountApp.GetUsersByAccountId(context.GetUserData().AccountId);
 List<AssignUserViewModel> assignUsers = Mapper.Map<List<AssignUserViewModel>>(users).ToList();
 var mailUsers = mailApp.GetMailAssignedByMailId(id).Select(m => new { m.UserId, m.User.Name }).ToList();
 List<AssignUserViewModel> assignedUsers = mailUsers.Select(Mapper.DynamicMap<AssignUserViewModel>).ToList();
 assignUsers = assignUsers.Except(assignedUsers).ToList(); 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-20T12:14:03.603

为了使`Except`方法按预期工作，该类`AssignUserViewModel`必须正确覆盖`GetHashCode`和方法。`Equals`

例如，如果`AssignUserViewModel`对象是由它们唯一定义的`Id`，您应该以这种方式定义类：

```
class AssignUserViewModel
{
    // other methods...

    public override int GetHashCode()
    {
        return this.Id.GetHashCode();
    }
    public override bool Equals(object obj)
    {
        if (!(obj is AssignUserViewModel))
            throw new ArgumentException("obj is not an AssignUserViewModel");
        var usr = obj as AssignUserViewModel;
        if (usr == null)
            return false;
        return this.Id.Equals(usr.Id);
    }
} 
```

否则，如果您不能/不想更改类实现，则可以实现 an`IEqualityComparer<>`并将其传递给`Except`方法，例如：

```
class AssignUserViewModelEqualityComparer : IEqualityComparer<AssignUserViewModel>
{
    public bool Equals(AssignUserViewModel x, AssignUserViewModel y)
    {
        if (object.ReferenceEquals(x, y))
            return true;
        if(x == null || y == null)
            return false;
        return x.Id.Equals(y.Id);
    }

    public int GetHashCode(AssignUserViewModel obj)
    {
        return obj.Id.GetHashCode();
    }
} 
```

那么你的最后一行将变为：

```
assignUsers = assignUsers.Except(assignedUsers, new AssignUserViewModelEqualityComparer()).ToList(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-20T12:55:10.027

为什么会这样？当您使用[集合操作](http://msdn.microsoft.com/en-us/library/bb546153.aspx)（​​Distinct、Except、Intersect、Union）时，Linq 需要比较序列元素是否相等。默认情况下，Linq 使用[Object.Equals](http://msdn.microsoft.com/en-us/library/system.object.equals.aspx)和[Object.GetHashCode](http://msdn.microsoft.com/en-us/library/system.object.gethashcode.aspx)方法来比较元素。如果这些方法没有在您的类型中被覆盖，则使用基类的实现，它通过引用相等来比较对象。默认实现保证相同引用的两个对象具有相同的哈希码（因此被认为相等）。这是你的情况。`Mapper`类创建`AssignUserViewModel`对象的新实例，这些实例具有不同的引用，并且不能被视为相等（即使所有字段值都相同）。

那么，我们能用这个做什么呢？

*   类中的覆盖`Equals`和`GetHashCode`方法。您将如何对待对象平等 - 所有字段，或只是身份，这取决于您。Linq 将使用您的方法来比较元素。

*   提供您自己的比较器（这通常是当您无法修改对象并覆盖`Equals`and时的情况`GetHashCode`。是的，所有 Linq 集操作都有两个重载 - 一个使用默认比较器，另一个接受您[`IEqualityComparer<T>`](http://msdn.microsoft.com/en-us/library/ms132151.aspx)的 .

*   使用匿名类型。所有匿名类型都已经生成了方法`Equals`and `GetHashCode`，它们使用所有属性的比较来确定对象是否相等。在这种情况下，您既不需要修改类型也不需要创建比较器。

因此，您已经有了前两种方法的样本，这是最后一种：

```
var assignUsers = accountApp.GetUsersByAccountId(context.GetUserData().AccountId)
                            .Select(u => new { u.UserId, u.Name });

var assignedUsers = mailApp.GetMailAssignedByMailId(id)
                           .Select(m => new { m.UserId, m.User.Name });

var assignUsers = assignUser.Except(assignedUsers);
// do not map until here
List<AssignUserViewModel> result = 
             assignUsers.Select(Mapper.DynamicMap<AssignUserViewModel>).ToList(); 
```

# python - all() 为同一个表达式返回不同的值

> ID：12988210
> 
> 赞同：3
> 
> 时间：2012-10-20T12:01:00.593
> 
> 标签：python

当我使用该函数时，我的 python 脚本中遇到了一个非常奇怪的问题`all()`。

控制台给了我`false`（这显然是正确的）这条线：

```
all(x == 2 for x in (8,2,2,2)) 
```

在我的脚本中，同一行返回`true`？！

这里发生了什么？是否有其他`all()`功能可以在我的脚本中覆盖它？我正在导入以下模块：

```
import os
import sys
import string
import time
from time import gmtime, strftime
from optparse import OptionParser, OptionGroup
import cx_Oracle
from pylab import *
import ROOT
from array import array
import logging
from traceback import format_exc 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T12:07:49.667

要在被粉碎时访问内置`all()`，您可以导入[`builtins`](http://docs.python.org/release/3.1.5/library/builtins.html). 例如：

```
from builtins import all 
```

`pylab`（在导入的行下方）。

或者，如果您需要访问`pylab.all()`，您可以执行以下操作：

```
import builtins

...

builtins.all() 
```

或者，更好的是，做`import pylab`而不是`from pylab import *`。

您可能还想提交错误报告`pylab`，这是非常糟糕的行为。尽管请注意，`import * from ...`出于这个原因，不鼓励使用导入。

正如 DSM 在评论中指出的那样，这是假设您使用的是 3.x，在 2.x 下，它是`__builtin__`.

# javascript - jquery ajax 正在加载整个外部 html 而不是目标 div

> ID：12988211
> 
> 赞同：0
> 
> 时间：2012-10-20T12:01:50.687
> 
> 标签：javascript, jquery

我在外部 html 文件中加载了一个简单的 ajax 请求，但它拉入了整个页面，而不仅仅是我请求的特定 div。这只适用于.load吗？

```
 $.ajax({
 url: 't3.html #test',
 success: function(data) {
 $('.incoming').append(data);
 }
 }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T12:21:41.150

使用`load()`将为您想要的选择器过滤外部页面的方法

```
$('.incoming').load('t3.html #test'); 
```

否则使用其他 AJAX 方法，您需要创建自己的过滤器，它们不会自己解析内容的 url：

```
$.ajax({
    url: 't3.html',
    success: function(data) {
        var div=$(data).find(' #test'); /* if #test not wrapped in parent use filter instead of find*/
        $('.incoming').append(div);
    }
}); 
```

[参考： http](http://api.jquery.com/load/) ://api.jquery.com/load/

# sqlite - sqlite 查询以过滤一些具有特殊条件的数据

> ID：12988212
> 
> 赞同：0
> 
> 时间：2012-10-20T12:01:54.020
> 
> 标签：sqlite

这是我拥有的数据示例：

```
-----------------------------------
 ID | Item                 | Value
  1 | Carrot               |  0
  2 | Carrot               |  1
  3 | Peas                 |  1
  4 | Peas                 |  2
  5 | Peas                 |  3
  6 | Salad                |  0
  7 | Salad                |  3
  8 | Salad                |  5
  9 | Corn                 |  0
----------------------------------- 
```

我想做一个查询，如果出现以下情况，则出现值为 0 的行：

*   它们是该项目的唯一价值
*   该项目有多个其他值

或者另一种说法是，如果出现以下情况，它们不应该出现在结果中：

*   同一个项目只有一个值

请注意，这对 (item, value) 在我的数据中是唯一的。

所以对于数据样本，查询的结果应该是这样的（只有第一行走了）：

```
-----------------------------------
 ID | Item                 | Value
  2 | Carrot               |  1
  3 | Peas                 |  1
  4 | Peas                 |  2
  5 | Peas                 |  3
  6 | Salad                |  0
  7 | Salad                |  3
  8 | Salad                |  5
  9 | Corn                 |  0
----------------------------------- 
```

最好和最有效的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T12:48:38.703

您必须按项目对数据进行分组，因此一种可能性是

```
SELECT ID, Item, Value 
FROM data 
WHERE Value <> 0
OR Item IN
  (SELECT Item FROM data
   GROUP BY Item
   HAVING COUNT(*) <> 2); 
```

[看到这个 SQLFiddle](http://sqlfiddle.com/#!7/14187/16)

# c++ - 在更大的数字上中断循环然后 unsigned long long

> ID：12988216
> 
> 赞同：2
> 
> 时间：2012-10-20T12:02:10.993
> 
> 标签：c++, c

我`type unsigned long long` 在 c/c++ 中有 n of 和一个循环

```
while( n < ULLONG_MAX ){
...
n += revert( n );
} 
```

我需要在最后一个 n 变大之前输出它，有没有办法可以验证和打破循环？因为我总是输出相同的大数字，但少于 ULLONG_MAX

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T12:03:25.250

如果`n`是，`unsigned long long`那么`n <= ULLONG_MAX`总是正确的。

如果你知道它`revert`总是返回一个正数，你可以检查是否`n + revert( n )`是`< n`（即检查环绕）。或者也检查一下`revert(n) < ULLONG_MAX - n`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T12:08:06.453

您将永远无法输出比`ULLONG_MAX`使用 a`unsigned long long`来存储您的值更大的数字。

如果你很幸运，你的函数会得到与( )`revert`完全相同的值，但尝试更高的值只会从零开始环绕值（所谓的*整数溢出*）。`n``ULLONG_MAX``std::numeric_limits<unsigned long long>::max ()`

 *您可以执行以下操作来检查包装：

```
if (n > (n + revert (n)))
  break; // max of 'n += revert (n)' found 
```

^(上面要求'revert'总是返回一个正数，当然)*

# php - 获取某个抽象类的声明子类，但不实例化它们

> ID：12988217
> 
> 赞同：2
> 
> 时间：2012-10-20T12:02:12.523
> 
> 标签：php, class, reflection

目前我正在这样做：

```
$classes = get_declared_classes();
$models = array();

foreach($classes as $class){
  $class = new \ReflectionClass($class);
  if($class->isSubclassOf('\\App\\Model'))
    $models[] = $class;
} 
```

但是正如你所看到的，我正在为每个类创建一个反射对象，以便找出哪个是我的“模型”类的孩子。

有没有更快的方法来搜索我的孩子班级？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T12:10:42.673

尝试

```
is_subclass_of($class, '\\App\\Model', true); // or is_a() 
```

如果您收到通知/警告，请弹出最后一个参数。第三个说第一个参数是一个字符串，不应该被直接拒绝*（函数默认需要对象）*。

```
is_subclass_of($class, '\\App\\Model'); // or is_a() 
```

为我工作！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T12:06:23.320

用这个

```
foreach($classes as $class){
  if($class->is_Subclass_Of($class, '\\App\\Model', true))
    $models[] = $class;
} 
```

或者你可以看到[is_subclass_of php.net](http://php.net/manual/en/function.is-subclass-of.php)

# java - 合适的数据结构

> ID：12988222
> 
> 赞同：1
> 
> 时间：2012-10-20T12:02:43.197
> 
> 标签：java, algorithm, image-processing, data-structures, kdtree

我有一个**图像**（appx 1000 x 1000）和一组每个 10 x 10 的小图像。

我创建了一个（3 维树）来存储每个图块的 HSL 值。我得到了一个图块 RGB 值的数组列表，它最接近目标图像中特定网格的 HSL。

问题是我不知道数组列表中的特定 HSL 属于哪个较小的图像。我有一个**小图像类**，它存储小图像被**重用**的次数。我需要访问这些字段以确定我可以使用哪个图块。

有没有一种方法可以获取我得到的小图像 HSL 的数组列表并获取小图像信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T13:44:01.887

您引用的[KdTree](http://code.google.com/p/java-algorithms-implementation/source/browse/src/com/jwetherell/algorithms/data_structures/KdTree.java)适用于从`KdTree.XYZPoint`. 因此，优雅的方法是从您的 tile 类派生`KdTree.XYZPoint`或创建一个派生自该类的新类，该类`KdTree.XYZPoint`具有对相应 tile 对象的引用。

# sql - 如何按另一个表列排序

> ID：12988234
> 
> 赞同：3
> 
> 时间：2012-10-20T12:03:40.793
> 
> 标签：sql, join, sql-order-by

我有 2 张桌子

1)**电影**

```
|id(pk),name|
============
|256    sdsd| 
|524    jmjm|
|122    dfdf|
|525    erer|
|952    tyyt|
|600    yunt| 
```

2)**收藏夹**

```
|fid(pk),movie_id,uid   |
=========================
|1       256      454668|
|2       524      545656|
|3       122      454668|
|4       525      454668|
|5       952      454668|
|6       256      545656|
|7       625      454668|
|8       600      454668| 
```

第一个表 id 和第二个表`movie_id`是相同的项目...

我的问题是..首先我想得到`movie_id where uid = 454668`然后使用那个`movie_id`（s）我想列出第一个表的`name`位置`'id' = 'movie_ids`（我们从最后一个查询中得到的列表）但是按第二个表排序`fid`......

我怎么去？？？

我不擅长内在和加入

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-20T12:07:00.573

你可以使用`INNER JOIN`它。

```
SELECT Name 
FROM movie m JOIN favorites f 
ON m.id = f.movie_id
WHERE f.uid = 454668 
ORDER BY f.fid 
```

[看到这个 SQLFiddle](http://sqlfiddle.com/#!2/71635/4)

# iphone - 根据字符串的大小设置行高？

> ID：12988239
> 
> 赞同：0
> 
> 时间：2012-10-20T12:04:15.957
> 
> 标签：iphone, ios, ipad

我有一个应用程序，我想根据收到的消息字符串的内容更改单元格的高度。我在表格视图的侧面 hieghtforrow 委托方法中这样做。

```
int rowHeight =0.0f;

     UITableViewCell *cell = [ self.mtableview cellForRowAtIndexPath:indexPath.row];

    CGSize size = [cell.textLabel.text  sizeWithFont:[UIFont systemFontOfSize:13.0f] constrainedToSize:CGSizeMake(300, 5000) lineBreakMode:UILineBreakModeWordWrap];// calculate the height 

    rowHeight = size.height+10; // I use 10.0f pixel extra because depend on font

    return rowHeight; 
```

但它并没有在我的应用程序中崩溃。有人可以看看这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T13:36:31.540

我想看看您的`cellForRowAtIndexPath`方法来了解您如何检索标签的文本。

您在呼叫方面处于正确的轨道上，`sizeWithFont`但您需要两件事才能成功确定这一点：

1.  标签的字体大小（您在 13.0 中硬编码）
2.  以及确定大小的文本（您试图从 UILabel 中提取）

（在 13.0 的代码中硬编码字体大小不一定是个好主意，因为如果你想为单元格更改它，你需要记住在 heightForRowAtIndexPath 和其他任何地方更改它，但这是一个不同的问题） .

与其从标签本身中提取文本，不如`UILabel`从您拥有的任何数据结构中确定文本，这些数据结构首先生成/包含文本。这就是为什么查看您的`cellForRowAtIndexPath`方法会有所帮助的原因。

不要`cellForRowAtIndexPath`从`heightForRowAtIndexPath`任何一个调用，这些方法不打算以这种方式使用。

这是一个简单的示例，我可以在您发布`cellForRowAtIndexPath`代码时对其进行改进：

```
//ASSUME that self.arrayOfStrings is your data structure where you are retrieving the label's text for each row.

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    int rowHeight =0.0f;
    NSString *stringToSize = [self.arrayOfStrings objectAtIndexPath:indexPath.row];
    CGSize size = [stringToSize  sizeWithFont:[UIFont systemFontOfSize:13.0f] constrainedToSize:CGSizeMake(300, 5000) lineBreakMode:UILineBreakModeWordWrap];
    rowHeight = size.height+10;
    return rowHeight;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell"; 
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }
    cell.textLabel.text = [self.arrayOfStrings objectAtIndexPath:indexPath.row];
    return cell;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T12:08:54.740

`UITableViewCell *cell = [ self.mtableview cellForRowAtIndexPath:indexPath.row];` 从您的代码中删除。您不需要在 HeightForRow 方法中添加单元格。

# javascript - 如何验证单选按钮？

> ID：12988247
> 
> 赞同：1
> 
> 时间：2012-10-20T12:05:33.953
> 
> 标签：javascript, validation, button, radio

我如何在复选框上进行验证？

这是我的代码：

```
<script>
function Validate(){
   var cntct = document.getElementById("contact").value;
   if (cntct.value=="")
   {
      alert("Please select contact medium");
      return false;
   }
}
</script>

<input type="radio" name="contact" id="contact" value="SMS">
<label>SMS</label> <input type="radio" name="contact" id="contact" value="CALL">
<label>CALL</label> <input type="radio" name="contact" id="contact" value="EMAIL">
<label>EMAIL</label> 
```

请帮忙..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T12:08:48.273

很简单：if(cntct == "") {

}

cntct 变量就是值！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T12:09:23.887

在复选框和单选按钮的情况下，当“checked”属性为真时检查元素：

```
function Validate(){
    var selectedValue = "";
    var cntct = document.getElementsByname("contact");
    for(var i=0;i<cntct.length;i++) {
        if (cntct[i].checked)
        {
            selectedValue = cntct.value;
        }
    }
    if(selectedValue == "") {
        alert("Please select contact medium");
        return false;
    }
    return true;
} 
```

**更新**

我刚刚注意到您有多个具有相同 ID 的元素。这是不允许的，在这种情况下，浏览器将只返回具有该 ID 的最后一个元素。您需要遍历具有相同元素的元素`name`并选择具有属性的元素`checked`。见上面的代码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T12:26:48.250

> 我如何在复选框上进行验证？

我想您的意思是“我如何确保在提交表单时检查其中一个单选按钮”（假设有一个您没有显示的表单）。

简单的方法是默认选中一个复选框，然后您知道将始终选中一个并且您不必检查，例如

```
<input type="radio" name="contact" value="CALL" checked>
<input type="radio" name="contact" value="EMAIL"> 
```

另一种方法是在提交表单（或您决定基于验证的任何事件）时循环单选按钮并确保选中一个。例如

```
function checkButton() {
  var nodes = document.getElementsByName('contact');
  for (var i=0, iLen=nodes.length; i<iLen; i++) {

    // If find a checked one, job's done
    if (nodes[i].checked) return true;
  }

  // Otherwise, none were checked
  return false;
} 
```

有一个输入类型文本，其名称为联系人，但它没有选中的属性，因此将被视为未选中的收音机。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T12:27:06.720

请试试这个：

```
<script>
function SubmitIt()
{
    if (document.forms.myform.elements.contact.value == "") 
    {
        alert("Please select contact medium..."); 
    }
}
</script>

<form name="myform" id="myform">
   <input type="radio" name="contact" id="contact" value="SMS">
   <label>SMS</label> <input type="radio" name="contact" id="contact" value="CALL">
   <label>CALL</label> <input type="radio" name="contact" id="contact" value="EMAIL">
   <label>EMAIL</label>

   <button onclick="SubmitIt();">Submit</button>
</form> 
```

# wolfram-mathematica - 如何将表达式 3*x 转换为 Mathematica 中的函数？

> ID：12988248
> 
> 赞同：0
> 
> 时间：2012-10-20T12:05:55.343
> 
> 标签：wolfram-mathematica

在 Mathematica 中执行一个程序，该程序接收一个名为 f 的表达式并将其转换为一个函数。但是命令 Function[x,f] 不起作用，我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T14:41:39.377

功能

```
f[x_]:=3*x 
```

应该做你想做的。然后，对其进行评估：

![数学图形](../Images/665eb0862075ee3ad219f00facfee063.png)

# mysql - MYSQL 5.1.61 在 utf8 中对中欧语言进行排序

> ID：12988249
> 
> 赞同：1
> 
> 时间：2012-10-20T12:05:58.870
> 
> 标签：mysql, sorting, utf-8, character-encoding, collation

我在排序 MYSQL 结果时遇到问题..

```
SELECT * FROM table WHERE something ORDER BY column ASC 
```

**列**设置为 utf8_unicode_ci..

结果，我首先得到**列**以波斯尼亚字母开头的行，然后是其他列。

```
šablabl
šeblabla
čeblabla
aaaa
bbaa
bbb
ccc 
```

MYSQL 版本是 5.1.61

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T13:05:52.253

BGI是对的。您需要使用适当的排序规则。不幸的是，MySQL 还没有中欧 unicode 排序规则。 [MariaDb](http://mariadb.org/)[是](http://blog.init.hr/?p=63)由 MySQL 的创建者维护的 MySQL 分支。

因此，您可以将文本从 utf8 转换为 latin2，然后使用中欧整理顺序进行排序。例如。

```
 SELECT * 
    FROM tab
ORDER BY CONVERT(text USING latin2) COLLATE latin2_croatian_ci 
```

看到这个小提琴：[http ://sqlfiddle.com/#!2/c8dd4/1/0](http://sqlfiddle.com/#!2/c8dd4/1/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T12:15:45.610

这是因为制作了unicode的方式。所有“正常”的拉丁字符都恢复了与 ASCII 相同的数字对应关系，之后添加了来自其他文化的其他字符。这意味着如果您的字母表包含 26 个常规 ASCII 字符之外的其他字符，则它不会以 Unicode 中的正确顺序出现。

我认为您应该尝试更改列上的排序规则（也许您还必须更改字符集，但也许不必）。

使用[中欧排序规则](http://dev.mysql.com/doc/refman/5.1/en/charset-ce-sets.html)。

祝你好运 ！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-11T13:08:35.167

较旧的问题和大量答案。

也许我处理问题的方式会对某人有所帮助。

我使用 PDO。我的数据库是 utf-8。

首先 - 我的数据库单例代码（它的相关部分）。我将所有连接的“SET NAMES”设置为“utf8”。

```
     $attrib_array = array(PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES utf8');
     如果（DB_HANDLER）
           $attrib_array[PDO::ATTR_ERRMODE] = PDO::ERRMODE_EXCEPTION;
       self::$instance = new PDO(DB_TYPE.':host='.DB_HOST.';dbname='.DB_NAME, DB_USER, DB_PASS, $attrib_array);

```

其次 - 我的排序看起来像这样 - 排序取决于语言（示例显示波兰语）：

```
      ORDER BY some_column 整理 utf8_polish_ci DESC

```

为了使事情更加精简，我使用了一个常量，我在 lang 翻译文件中定义了它，所以当文件被拉出时，会设置正确的排序规则常量。当然我有'utf8_general_ci'作为默认值。例子：

```
      定义（'MY_LOCALIZED_COLLATE'，'COLLATE utf8_polish_ci'）；

```

现在，我的（相关部分）查询如下所示：

```
      “……按 some_column 排序”。MY_LOCALIZED_COLLATE 。"DESC" ;

```

以上在大多数情况下都有效。

如果您缺少排序规则集，您可以尝试自己添加一个。

有关创建此类集合的更多详细信息 - 请参见此处：[http ://dev.mysql.com/doc/refman/5.0/en/adding-collat​​ion.html](http://dev.mysql.com/doc/refman/5.0/en/adding-collation.html)

**编辑**：

我还注意到一件事：

*   如果您有要排序的列表，例如波兰语
*   并且您必须强制进行适当的排序以进行排序（如上所述）
*   并且您使用例如 INT 列作为排序向量

...那么你最好有排序规则集（例如UTF8），否则你会得到SQL错误，例如：

```
“语法错误或访问冲突：1253 COLLATION 'utf8_polish_ci' 对 CHARACTER SET 'latin1' 无效”

```

... 奇怪，但真实

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T15:17:40.990

如果这确实是您所看到的，那么您发现了一个错误：`utf8_unicode_ci`应该认为 š 等同于 s 和 č 等同于 c！

无论如何，MySQL 确实没有很好地支持中欧语言的 utf8 排序规则：[你只会得到 Czech、Slovak 和 Slovenian](http://dev.mysql.com/doc/refman/5.1/en/charset-unicode-sets.html)。如果这些都不适合您，我想您必须[创建自己的 utf8 排序规则](http://dev.mysql.com/doc/refman/5.1/en/adding-collation-unicode-uca.html)，或者[使用非 Unicode 字符集](http://dev.mysql.com/doc/refman/5.1/en/charset-ce-sets.html)并使用那里可用的排序规则。

# python - Errors in program for calculating integrals

> ID：12988250
> 
> 赞同：5
> 
> 时间：2012-10-20T12:05:59.460
> 
> 标签：python, math

I am trying to calculate the area of a graph using integrals.

The user is supposed to give me 3 numbers:

*   x1, x2 – the bounds of the integral
*   N is in how many pieces the program will divide the function

However, I keep getting wrong results.

The first difficulty that I faced is that range accepts only integers.

Also `z=(x2-x1)/N` if I try and make it a float, I can't make it a step after, and I don't make it float it approaches to zero so Python shows me an error that the step is zero.

Also how can I summarize `(z*(f(i)+f(i+z)/2)`?

Here is my code:

```
# -*- coding: UTF-8 -*-
import math

def f(x) :
    y = (-1/6.0)*(x-1)*(x-2)*(x+2)*(x-4)
    return y 
x1=int(raw_input ('Δωστε το χ1 οπου αρχιζει η μετρηση του ολοκληρωματος \n ')) #greek letters
x2=int(raw_input ('Δωστε χ2 οπου θελετε να ολοκληρωνεται η μετρηση \n '))
N=int(raw_input('Δωστε τον αριθμο n που θα ειναι το πληθος \n των τραπεζιων που θα χρησιμοπιουνται στη προσσεγγιση  \n '))
z=(x2-x1)/N
for i in range(x1,x2,z):
    z=float(z)
    x1=float(x1)
    x2=float(x2)
    print (z*(f(i)+f(i+z))/2) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T12:28:42.367

You are reading `x1`, you cast it to an `int` (read: throw away information), then you cast it back to a float upon each iteration. The lost information will not reappear.

```
z=(x2-x1)/N 
```

Because your value are integers, it will perform an integer division, i.e. if N > (x2 - x1), `z` will be zero. And since you always want to choose a large `N`, `z` will always be zero.

Thus, `range()` cannot not work.

What you need to do instead is read the inputs as floats:

```
number = float(raw_input("Please enter a number: ")) 
```

* * *

Note that applying `float()` repeatedly doesn't do anything useful. Thus, this code is not necessary:

```
for ...
    z=float(z)
    x1=float(x1)
    x2=float(x2) 
```

* * *

> Also how can i summarise the (z*(f(i)+f(i+z)/2)?

You can't make it shorter, since `f()` isn't a linear function.

* * *

Another thing about `range()` is, that the step parameter must be an integer.

You can easily create your own range function though:

```
def frange(start, stop, steps):
    x = start
    difference = float(stop - start)
    for step in range(0, steps):
        next_x = start + difference * (1 + step) / steps
        yield x, next_x - x
        x = next_x 
```

* * *

## Working code

```
# -*- coding: UTF-8 -*-
import math

def f(x) :
    y = (-1/6.0)*(x-1)*(x-2)*(x+2)*(x-4)
    return y 
x1 = float(raw_input ('Δωστε το χ1 οπου αρχιζει η μετρηση του ολοκληρωματος \n ')) #greek letters
x2 = float(raw_input ('Δωστε χ2 οπου θελετε να ολοκληρωνεται η μετρηση \n '))
N = int(raw_input('Δωστε τον αριθμο n που θα ειναι το πληθος \n των τραπεζιων που θα χρησιμοπιουνται στη προσσεγγιση  \n '))
result = 0
for x, delta_x in frange(x1, x2, N):
    result += delta_x * (f(x)+f(x+delta_x)) / 2
print result 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T12:16:36.860

*   Let `x1`, `x2` and therefore the step size `z` be floats.
*   Instead of a `for`-loop, a `while`-loop may be easier here.

* * *

```
x1 = float(raw_input ('Δωστε το χ1 οπου αρχιζει η μετρηση του ολοκληρωματος \n ')) #greek letters
x2 = float(raw_input ('Δωστε χ2 οπου θελετε να ολοκληρωνεται η μετρηση \n '))
N = int(raw_input('Δωστε τον αριθμο n που θα ειναι το πληθος \n των τραπεζιων που θα χρησιμοπιουνται στη προσσεγγιση  \n '))
z = (x2-x1)/N
x = x1
while x < x2:
    print (z*(f(x)+f(x+z))/2)
    x += z 
```

# java - Jsoup：获取所有标题标签

> ID：12988256
> 
> 赞同：13
> 
> 时间：2012-10-20T12:06:36.160
> 
> 标签：java, jsoup

我正在尝试使用 Jsoup 解析 html 文档以获取所有标题标签。此外，我需要将标题标签分组为 [h1] [h2] 等...

```
 hh = doc.select("h[0-6]"); 
```

但这给了我一个空数组。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-21T14:10:57.767

您的选择器在这里表示*具有“0-6”属性的 h-Tag* - 不是正则表达式。但是您可以改为组合多个选择器：`hh = doc.select("h0, h1, h2, h3, h4, h5, h6");`.

**分组：**您需要一个包含所有 h-Tag 的组 + 每个 h1、h2、... 标签的组还是每个 h1、h2、... 标签的组？

这是一个如何执行此操作的示例：

```
// Group of all h-Tags
Elements hTags = doc.select("h1, h2, h3, h4, h5, h6");

// Group of all h1-Tags
Elements h1Tags = hTags.select("h1");
// Group of all h2-Tags
Elements h2Tags = hTags.select("h2");
// ... etc. 
```

如果您想为每个 h1、h2、... 标签设置一个组，您可以删除第一个选择器并替换`hTags`为`doc`其他选择器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-09T11:03:55.247

使用**doc.select("h1,h2,h3,h4,h5,h6")**获取所有标题标签。使用**doc.select("h1")**分别获取每个标签。[在http://preciselyconcise.com/apis_and_installations/jsoup/j_selector.php](http://preciselyconcise.com/apis_and_installations/jsoup/j_selector.php)中查看您可以使用 select 语句执行的各种操作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-07T08:55:53.130

这是答案的 Scala 版本，它使用 Ammonite 的语法来指定 Jsoup 的 Maven 坐标：

```
import $ivy.`org.jsoup:jsoup:1.11.3`
val html = scala.io.Source.fromURL("https://scalacourses.com").mkString
val doc = org.jsoup.Jsoup.parse(html)
doc.select("h1, h2, h3, h4, h5, h6, h7").eachText() 
```

# c# - 非线性 Icosphere

> ID：12988257
> 
> 赞同：1
> 
> 时间：2012-10-20T12:06:47.580
> 
> 标签：c#, graphics, 3d

我需要一个所有边缘长度相同的 icosphere。目前我从一个二十面体开始生成一个，然后线性插值每个三角形。我能找到的所有教程都使用相同的线性插值。后来有人建议只使用搅拌机中的 icosphere ，虽然也使用线性插值...

所以任何人都有一个关于如何制作 icosphere 并确保所有边相等的好教程？（如果您知道一个可以制作这个并将其导出为 .obj 或其他东西的程序，那也可以。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T13:06:00.147

这是不可能从等边三角形获得任意精确的球体的。如果你需要等边三角形，你能得到的最好的就是二十面体（你可能已经有了）。原因被称为“[角度缺陷](http://en.wikipedia.org/wiki/Angle_defect)”：

角度缺陷是 360 度围绕顶点的顶点角度之和。任何多面体的总顶点缺陷必须等于 720 度：

*   四面体：4*180度
*   八面体：6*120度
*   立方体：8*90度
*   二十面体：12*60度
*   十二面体：20*36度

如果五个等边三角形在一个顶点相遇，它们会累积 36 度的缺陷。如果六个等边三角形在一个顶点相遇，它们对缺陷没有任何贡献。

如果六个等边三角形在一个顶点相遇，它们必须形成

*   飞机或
*   折叠（边缘）或
*   一个马鞍。

有一个叫做 pentakis icosahedron 的多面体，有 32 个顶点，但是如果你用等边三角形制作它，你会得到一个非凸多面体。

因此，如果您想要一个任意精确的球体，则需要允许不同长度的边缘，以便角度缺陷可以在整个表面上均匀分布。具有任意精度的等边是不可能的。

# c++ - 这个“CRT 未初始化”错误是怎么回事？

> ID：12988258
> 
> 赞同：4
> 
> 时间：2012-10-20T12:06:49.343
> 
> 标签：c++, winapi, visual-studio-2012, runtime-error, crt

我在 Visual Studio 2012 Express（当然是桌面版）中创建了一个空的 C++ 项目，并添加了一些随机的基本代码：

```
#include <cstdio>
#include <cstdlib>

typedef struct examplestruct
{
    unsigned char num1;
    unsigned short num2;
    unsigned long num3;
    unsigned long long num4;
} EXAMPLESTRUCT;

void examplefunction(unsigned long *num, int num2)
{
    *num += num2;
    return;
}

int main(int nArgs, char **pszArgs)
{
    EXAMPLESTRUCT ExStructInstance = {0xFF, 0xFFFF, 0xFFFFFFFF, 0xFFFFFFFFFFFFFFFF};
    printf("%d, %d, %u, %ull\n", ExStructInstance.num1, ExStructInstance.num2, ExStructInstance.num3, ExStructInstance.num4);
    unsigned long num5 = ExStructInstance.num1 + ExStructInstance.num2;
    printf("%d\n", num5);
    examplefunction(&num5, 10);
    printf("%d\n", num5);
    system("pause");
    return 0;
} 
```

（如果您想知道这到底是怎么回事，我正在反汇编创建的可执行文件以观察优化编译器的行为，并了解有关 x86 汇编的更多信息。）

在项目设置中的链接器下，我选择`Multi-threaded (/MT)`了运行时库，因此它会静态链接它。

我编译并开始使用 F5 进行调试，并立即在消息框中收到此错误：

> 运行时错误！
> 
> 程序：C:\Users\xxxxx\Documents\P...
> 
> R6030
> 
> *   CRT 未初始化

因此，由于运行时库的一些问题，这个基本程序将无法运行，我无法弄清楚！

有任何想法吗？我只是想知道这里发生了什么。提前致谢！

编辑：仅供参考，这都是在发布模式下完成的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T13:08:56.157

使用“空项目”模板开始一个新项目有制造麻烦的诀窍。您可能更改了另一个项目设置，导致您的程序从 main() 方法而不是正常的入口点 CRT 启动函数启动。它初始化 CRT，然后调用 main()。很难猜出您是如何做到的，尤其是当您谈论更改链接器设置以获取 /MT 时。那是编译器设置。

改用 Win32 + Win2 控制台应用程序项目模板，陷入成功的坑。删除预先生成的代码，减去`#include <stdafx.h> line`顶部的。至少您现在有了一个起点，可以帮助我们帮助您解决问题。并且不要跳过“Hello world”程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T13:08:47.230

我解决了这个问题，这是我的错。

我已经在链接器设置中明确设置了入口点`main`，它应该保留默认值。

使用 CRT 的控制台程序实际上有一个名为 的入口点`_mainCRTStartup`，它在调用程序`main`函数之前初始化 CRT，这几乎是一个“伪入口点”。

如果您在链接器设置中自己设置入口点，`_mainCRTStartup`则永远不会调用，因此永远不会初始化 CRT；该程序在启动`main`并且无法执行 CRT 功能。

我只是删除了明确定义的入口点，一切正常。

你每天学习新的东西。

# c# - 如何测试按位枚举是否包含来自 C# 中另一个按位枚举的任何值？

> ID：12988260
> 
> 赞同：21
> 
> 时间：2012-10-20T12:07:10.227
> 
> 标签：c#, .net, enums, bit-manipulation

例如。我有以下枚举

```
[Flags]
public enum Stuff
{
   stuff1=1,
   stuff2=2,
   stuff3=4,
   stuff4=8
} 
```

所以我将 mystuff 设置为

```
mystuff = Stuff.stuff1|Stuff.stuff2; 
```

然后我将 hisstuff 设置为

```
hisstuff = Stuff.stuff2|Stuff.stuff3; 
```

我现在如何测试这些重叠 - 即 hisstuff 和 mystuff 都包含至少一个相同的枚举值？

如果有多种方法可以做到这一点，那么哪种方法最有效？（这是为了游戏）

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-20T12:08:43.357

简单的：

```
if((x & y) != 0) {...} 
```

这会按位“与”，然后测试任何交集。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-20T12:13:33.617

要获取在两个值中设置的值，请​​使用 and ( `&`) 运算符：

```
mystuff & hisstuff 
```

这为您提供了一个仅具有重叠值的新值，仅在您的示例中`Stuff.stuff2`。要检查是否有任何值重叠，请检查它是否非零：

```
if ((mystuff & hisstuff) != 0) ... 
```

# java - java.lang.NoClassDefFoundError：无法初始化类

> ID：12988261
> 
> 赞同：7
> 
> 时间：2012-10-20T12:07:14.360
> 
> 标签：java, scala, noclassdeffounderror

`java.lang.NoClassDefFoundError`仅在某些时候运行某些测试时出现错误***。***

设置如下：测试是用 Scala 编写的，服务是用 Scala 和 Java 编写的。也使用蚂蚁和常春藤。

**Order.scala**看起来像这样：

```
 object Order extends JdbcEnabled {

  val orderServiceClientIpAddress = Network.localIpAddress
  val PersonalOffersSaleId = "123"
  lazy val checkoutClient = new CheckoutClientImpl(YamlConfigFactory.loadConfig(
    this.getClass.getClassLoader.getResourceAsStream("core_config.yaml")
  ).getRequiredSubConfig("core").getRequiredSubConfig(Environment.HostEnv))

  val storeList = new JLinkedList[Store]()
  storeList.add(OrderHelper.getSelectedStore)
  var skuList = OrderHelper.getAvailableSkus
  val skusForInternationalOrders = skuList

  def createOrder(){...}} 
```

有许多使用 TestNG 运行的测试。有时所有的测试都没有问题地通过，但有时它们会因为这个异常而失败。

这是测试失败时如何调用 Order api 的片段。

```
val orderNumber = Order.createOrder() 
```

这是测试失败时的**整个堆栈跟踪：**

```
java.lang.NoClassDefFoundError: Could not initialize class com.api.Order$
    at com.CreateOrder.setUpOnce(CreateOrder.scala:35) 
```

该类中的第 35 行 CreateOrder.scala 是：

```
val orderNumber = Order.createOrder() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T11:25:30.280

这可能不是你的整个类路径，你必须在某处有丢失的类的名称（可能在'caused by..'之后）。也许可以将 TestNG 配置为向您显示完整的堆栈跟踪。

无论如何，初始化程序错误意味着“对象顺序”在其构造函数中抛出了异常，所以看看你在那里使用的是什么：也许 JDBC 类丢失了？还是您通过类加载器检索的配置文件？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-11-19T12:19:21.017

通常，当您的单例对象中存在未捕获的异常时，就会发生此类问题。尝试在其中放置一个 try catch 子句以获取错误的根源。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-28T07:13:43.217

我认为问题是这样的：

```
 lazy val checkoutClient = new CheckoutClientImpl(YamlConfigFactory.loadConfig(
    this.getClass.getClassLoader.getResourceAsStream("core_config.yaml")
  ).getRequiredSubConfig("core").getRequiredSubConfig(Environment.HostEnv)) 
```

正如他们所说[的here](http://As%20they%20say%20here)和[here](https://stackoverflow.com/questions/7325579/java-lang-noclassdeffounderror-could-not-initialize-class-xxx)，似乎是**getClassLoader**或类路径的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T15:54:20.273

您的 Order 课程似乎是一种代理。它没有被初始化。

# ruby-on-rails - Rails 3 中的签名 cookie

> ID：12988263
> 
> 赞同：1
> 
> 时间：2012-10-20T12:07:28.760
> 
> 标签：ruby-on-rails, ruby-on-rails-3, cookies

我设置了一个这样的签名cookie：

```
cookies.permanent.signed[:remember_me] = [user.id, user.salt] 
```

读取 cookie 时：

```
cookies.signed[:remember_me] 
```

我得到：

```
14cc5d64cd84f96f8847726a6ed0e280235025379 
```

这个值是什么意思？我怎样才能让用户`id`回来？

我使用 Rails 3.2.6。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T12:34:39.110

我认为首先你应该做

```
 cookies.permanent.signed[:remember_me] = user.id 
```

那么只有你可以通过

```
 cookies.signed[:remember_me] 
```

尽管通过签名没有人可以在客户端解密 cookie

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T12:36:09.017

无需将盐分配给 cookie...哈希由签名函数自动生成...您可以简单地使用

cookies[:remember_me] = user.id

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T12:32:08.757

只需使用 cookie[:remember_me]

# mysql - MySQL MEMORY 表是否支持多列索引？

> ID：12988270
> 
> 赞同：0
> 
> 时间：2012-10-20T12:09:06.663
> 
> 标签：mysql

我将我的 myisam 表之一复制到内存中，并且索引似乎无法正常工作。索引在 3 列上，但只有第 3 列显示基数并且查询非常慢（出于某种原因进行全表扫描）。

那么，内存表不支持多列索引吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T12:44:55.997

是的，他们有。每个索引最多 16 列，每个表最多 64 个索引，记录的总键大小不能超过 3KB 左右。

看，它[在文档中](http://dev.mysql.com/doc/refman/5.0/en/memory-storage-engine.html)。

这并不意味着索引被正确使用。它取决于查询以及索引中列的组合和顺序。

# spring - 在 Spring 控制器中接受 bot json 和常规对象的任何方式

> ID：12988273
> 
> 赞同：1
> 
> 时间：2012-10-20T12:09:24.603
> 
> 标签：spring, spring-mvc, spring-3

这有可能以任何方式实现吗？

```
@RequestMapping(value = "/test", method = RequestMethod.POST)
public String test(@RequestBody Person personJson , Person personRegular){
    Person person = personJson != null ? personJson : personRegular;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T13:00:39.683

是的，如果您发送一个 json 表示`Person`作为 POST 正文，它将绑定到 personJson，并且请求参数将绑定到`personRegular`，另一种方法可能是将 a`id`作为请求参数发送，`personRegular`通过执行数据库填充模块属性查找并注释您的personRegular`@ModelAttribute`

# twitter - 在没有 sfGuard 的 Symfony 1.4 中实现 twitter 登录

> ID：12988274
> 
> 赞同：0
> 
> 时间：2012-10-20T12:09:37.647
> 
> 标签：twitter, symfony1, symfony-1.4, twitter-oauth

我在 symfony 1.4 中有一个现有的项目。**更糟糕的是，项目没有使用 sfGuard 插件，而是实现了自定义用户身份验证。**

作为一项新功能要求，客户要求`login with twitter`在应用程序中添加支持。

我浏览了[twitter PHP 库](https://dev.twitter.com/docs/twitter-libraries#php)，如果没有一定程度的定制，它似乎不适合 symfony 1.4。

我还使用了一个 Symfony 插件（抱歉，忘记了链接），但它也不符合我的要求，因为（我猜）它与 sfGuard 紧密耦合。

我开始定制[tmhOAuth](https://github.com/themattharris/tmhOAuth)以符合我的要求，但我想问一下；**是否有任何 symfony 1.4 的 twitter 插件，不依赖于 sfGuard？**

# jenkins - 在使用 Jenkins\Hudson 自动化 QA、Stage、Prod delpoy 方面需要帮助

> ID：12988284
> 
> 赞同：1
> 
> 时间：2012-10-20T12:10:33.203
> 
> 标签：jenkins, hudson

我们使用 Hudson 作为 CI 工具。目前我们需要使用 Jenkins，将构建部署到 Stage、Prod 环境。我们应该遵循的最佳方法是什么。

我知道促进 buld 插件，但问题是身份验证。我希望无论我们需要推广要部署到 Stage 或 Prod 的构建，它都应该首先要求 netqwork 凭据。然后升级作业应使用提供的凭据执行批处理命令。目前，升级插件使用 Tomcat 服务器配置运行的凭据运行。

Build Pipeline 插件也有同样的问题。

除非提供凭据，否则我只希望开发人员甚至 hudson 管理员也不能执行升级构建。（我们有 windows 2008 r2 操作系统）

你能帮我解决这个问题吗？因此，基本上每当用户单击将构建提升到 QA\Stage\Prod 时，插件都应该要求提供凭据，或者应该使用已登录的用户凭据并仅使用已登录的用户凭据而不是使用帐户的凭据执行批处理脚本配置了tomcat服务器。

你能帮我么？

请向我们建议在 prod\stage 上进行自动化构建的最佳方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T14:42:53.150

对于部署，我通常使用 SSH，私钥/公钥负责处理通常与在其他服务器上运行命令相关的身份验证问题。

SSH 通常与基于 unix 的系统相关联，但它确实支持 windows。

最后，我建议考虑使用中间存储库将构建系统（jenkins）与执行部署的系统分离。有关详细信息，请参阅以下答案：

*   [Jenkins：如何从 Nexus 签出工件并在 Tomcat 上部署-](https://stackoverflow.com/questions/11848406/jenkins-how-to-check-out-artifact-from-nexus-and-deploy-on-tomcat/11852506#11852506)

# jquery - 创建自己的 html 属性的最佳方法是什么？

> ID：12988293
> 
> 赞同：0
> 
> 时间：2012-10-20T12:11:05.777
> 
> 标签：jquery, html, doctype

我在 HTML 标记上创建了许多属性来使用 jQuery 及其`$(selector).attr()`方法。例如，如果我有一个带有生成字段的动态表单，我将有一个`index="xxx"`属性。

在不违反 doctype 的情况下创建此类自定义属性的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T12:14:02.197

HTML 5 的`data-`属性可能适合您。它们可能是最简单的方法。

此外，[jQuery`.data()`](http://api.jquery.com/data/)本身就支持它们。

[这](http://html5doctor.com/html5-custom-data-attributes/)是一篇详细解释这个概念的文章。

那篇文章的一个例子：

```
<ul id="vegetable-seeds">
  <li data-spacing="10cm" data-sowing-time="March to June">Carrots</li>
  <li data-spacing="30cm" data-sowing-time="February to March">Celery</li>
  <li data-spacing="3cm" data-sowing-time="March to September">Radishes</li>
</ul> 
```

# java - 如何在抽象超类中定义常量/最终变量但在子类中分配它们？

> ID：12988294
> 
> 赞同：12
> 
> 时间：2012-10-20T12:11:28.000
> 
> 标签：java

我有一个抽象类，我想在其中声明最终变量。

但是，我只想在我的子类的构造函数中将值分配给这些变量。

显然，这是不可能的，因为所有“最终字段都必须初始化”。我不明白为什么，因为无论如何都不可能实例化一个抽象类。

我想要的是这样的：

```
abstract class BaseClass {
    protected final int a;
}

class SubClass extends BaseClass {
    public SubClass() {
        a = 6;
    }
} 
```

当你实现一个接口时，我想象一些类似于方法的东西。然后你也被迫实现（子）类中的方法。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-20T12:14:14.540

你应该在你的抽象类中定义一个构造函数，它接受一个值`a`并从你的子类中调用这个构造函数。这样，您将确保您的最终属性始终被初始化。

```
abstract class BaseClass {
    protected final int a;

    protected BaseClass(int a)
    {
        this.a = a;
    }
}

class SubClass extends BaseClass {
    public SubClass() {
        super(6);
    }
} 
```

# android - 从安卓设备登录到 symfony

> ID：12988295
> 
> 赞同：1
> 
> 时间：2012-10-20T12:11:38.030
> 
> 标签：android, symfony, fosfacebookbundle

我有一个用户通过 facebook 登录的 android 应用程序。我正在尝试访问我的 symfony api 而无需再次登录。是否可以仅使用我从 android 应用程序获得的访问令牌登录到 symfony？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T13:33:09.650

好的，这只是对我设法做的事情的总结。

我试图修改 fosFacebookBundle 以接受 access_tokens 但最终我不得不按照从 Zalas 获得的链接从头开始做所有事情。我通过 fosFacebookBundle 中的 FacebookProvider 类从 accesstoken 获取用户。

我不得不将 Facebook 和 FacebookProvider 注入我的 FacebookTokenListener。我什至不确定这是安全的。有人可能能够使用来自另一个站点的访问令牌登录（我还没有测试过）。访问令牌也在标头中以明文形式出现。总而言之，这不是一个很好的解决方案。

```
 $this->facebook->setAccessToken($request->headers->get("access_token"));
        $fbUid = $this->facebook->getUser();
        if(!$fbUid){
            throw new AccessDeniedHttpException("invalid access token");
        }
        $user = $this->facebookProvider->findUserByFbId($fbUid);
        $token = new FacebookTokenToken($user); 
```

感谢您的链接！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T15:24:41.880

对的，这是可能的。您需要实现一个[自定义身份验证提供程序](http://symfony.com/doc/current/cookbook/security/custom_authentication_provider.html)，可能还需要一个[自定义用户提供程序](http://symfony.com/doc/current/cookbook/security/custom_provider.html)来使用令牌对用户进行身份验证（并可能通过令牌检索他）。

# android - 从intent android拍照并发送到服务器java

> ID：12988303
> 
> 赞同：3
> 
> 时间：2012-10-20T12:12:57.407
> 
> 标签：android, android-intent, image-capture

我最近开始学习Android，我想制作一个从相机意图中拍摄照片并将其发送到服务器的应用程序，但我只能拍照。有人可以帮助我吗？现在放置代码。客户...

```
public class SendPhoto extends Activity {

private int CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE = 0;

@Override
public void onCreate(Bundle savedInstanceState) {
    int i;
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);

    File file = new File(Environment.getExternalStorageDirectory(), "temp/test.jpg");
    Uri outputFileUri = Uri.fromFile(file);

    intent.putExtra(MediaStore.EXTRA_OUTPUT, outputFileUri);
    // start the image capture Intent

    startActivityForResult(intent, CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE);

 protected void onActivityResult(int requestCode, int resultCode, Intent data) {
   int i;
    if (requestCode == CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE) {
        if (resultCode == RESULT_OK) {

                try{
                FileInputStream fis = new FileInputStream("sd/temp/test.jpg");

                Socket sock = new Socket ("hostname",3333);
                DataOutputStream os = new DataOutputStream(sock.getOutputStream());
                while ((i = fis.read()) > -1)
                    os.write(i);

                fis.close();
                os.close();
                sock.close();
                } catch (Exception e) {
                    e.printStackTrace();

                }

        }
    }
} 
```

服务器...

```
public class Server {

/**
 * @param args
 * @throws Exception 
 */
public static void main(String[] args) throws Exception {
    // TODO Auto-generated method stub

    ServerSocket socket = new ServerSocket(3333);
    System.out.println("Server started. Listening to the port 3333");
    while (true) {

        Socket clientSocket = socket.accept();

        DataInputStream dis = new DataInputStream(clientSocket.getInputStream());
        FileOutputStream fout = new FileOutputStream("output.jpg");
        int i;
        while ( (i = dis.read()) > -1) {
            fout.write(i);
        }

        DataOutputStream outToClient= new DataOutputStream(clientSocket.getOutputStream());
        outToClient.writeBytes("Hello");
        fout.flush();
        fout.close();
        dis.close();
        clientSocket.close();

}

}
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T12:18:11.853

不要对文件输出流中的文件名进行硬编码。很可能是不正确的。

利用

```
Uri uri = data.getData(); 
```

获取所拍照片的uri。“data”是onActivityResult方法的Intent参数。

或使用：

```
String[] projection = { MediaStore.Images.Media.DATA };
Cursor cursor = managedQuery(mCapturedImageURI, projection, null, null, null);
int column_index_data = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
cursor.moveToFirst();

//THIS IS WHAT YOU WANT!
String capturedImageFilePath = cursor.getString(column_index_data); 
```

# android - “不支持购买货币”在应用计费和 Google Play 中的测试用户帐户中使用

> ID：12988306
> 
> 赞同：0
> 
> 时间：2012-10-20T12:13:27.407
> 
> 标签：android, google-play, in-app-billing

我正在使用我使用信用卡号从此处创建的测试 Google 结帐帐户：[https ://developers.google.com/checkout/developer/Google_Checkout_Basic_HTML_Sandbox](https://developers.google.com/checkout/developer/Google_Checkout_Basic_HTML_Sandbox)

当我尝试使用测试帐户从未发布的应用程序（项目本身已发布）在应用程序中购买东西时，它要求我添加信用卡，如果我去下拉菜单选择现有卡，它会显示上述卡中的卡我添加了链接，但显示“不支持购买货币”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-13T20:44:05.677

来自[http://mobility.forumsee.com/a/m/s/p12-22971-0373237--solved-purchase-currency-not-supported-error-when-buying-app.html](http://mobility.forumsee.com/a/m/s/p12-22971-0373237--solved-purchase-currency-not-supported-error-when-buying-app.html)

编辑：AMEX 在 Google Play 上仅适用于以美元计价的购买。

==

我有同样的问题，切换到AMEX到VISA并且有效。

# tridion - ASCX Web 控件未存储在数据库中

> ID：12988309
> 
> 赞同：5
> 
> 时间：2012-10-20T12:13:49.057
> 
> 标签：tridion, tridion-2011, tridion-content-delivery

最近我们从 Tridion 5.3 升级到了 Tridion 2011 SP1。

在我们现有的实现中，我们有各种动态组件模板。少数 CT 的输出格式为 ASCX Web 控制，少数 CT 的输出格式为 HTML 片段。

发布后我们遇到 1) ASCX WebControls 不存储到存储数据库 (SQLServer)。在 Tridion 5.3 中它们是。2) HTML 片段被存储在数据库中。

在我们的实现中，二进制文件、页面、嵌入式组件模板存储在文件系统中，而动态组件模板存储在 SQL Sever 数据库中。

我们认为我们在 cd_storage_config 中遗漏了一些东西。请找到附加的配置文件。

```
<?xml version="1.0" encoding="UTF-8"?>
<Configuration Version="6.1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="schemas/cd_storage_conf.xsd">
<Global>
    <ObjectCache Enabled="false">
        <Policy Type="LRU" Class="com.tridion.cache.LRUPolicy">
            <Param Name="MemSize" Value="16mb"/>
        </Policy>
        <Features>
            <Feature Type="DependencyTracker" Class="com.tridion.cache.DependencyTracker"/>
        </Features>
    </ObjectCache>
    <Storages>
        <Storage Type="persistence" Id="sqlserver" dialect="MSSQL" Class="com.tridion.storage.persistence.JPADAOFactory">
            <Pool Type="jdbc" Size="5" MonitorInterval="60" IdleTimeout="120" CheckoutTimeout="120" />
            <DataSource Class="com.microsoft.sqlserver.jdbc.SQLServerDataSource">
                <Property Name="serverName" Value="local" />
                <Property Name="portNumber" Value="1433" />
                <Property Name="databaseName" Value="TridionBroker" />
                <Property Name="user" Value="TridionBrokerUser" />
                <Property Name="password" Value="mypass" />
            </DataSource>
        </Storage>
        <Storage Type="filesystem" Class="com.tridion.storage.filesystem.FSDAOFactory" Id="defaultFile" defaultFilesystem="false">
            <Root Path="d:\Inetpub\MyPortal" />
        </Storage>
        <Storage Type="filesystem" Class="com.tridion.storage.filesystem.FSDAOFactory" Id="defaultDataFile" defaultFilesystem="true" defaultStorage="true">
            <Root Path="d:\Inetpub\MyPortal\data" />
        </Storage>
        <SearchFilter Name="SearchFilter" Class="com.tridion.broker.components.meta.MsSqlSearchFilterHome" defaultStorageId="sqlserver"/>
    </Storages>
</Global>
<ItemTypes defaultStorageId="defaultDataFile" cached="false">
    <Item typeMapping="Query" storageId="sqlserver"/>
    <Item typeMapping="Page" cached="false" storageId="defaultFile"/>
    <Item typeMapping="Binary" cached="false" storageId="defaultFile"/>
    <Item typeMapping="ComponentPresentation" itemExtension=".Jsp" storageId="sqlserver"/>
    <Item typeMapping="ComponentPresentation" itemExtension=".Asp" storageId="sqlserver"/>
    <Item typeMapping="ComponentPresentation" itemExtension=".Xml" storageId="sqlserver"/>
    <Item typeMapping="ComponentPresentation" itemExtension=".Txt" storageId="sqlserver"/>
    <Item typeMapping="Metadata" cached="true" storageId="sqlserver"/>
    <Item typeMapping="XSLT" cached="true" storageId="sqlserver"/>
</ItemTypes>
<License Location="d:\Tridion\config\cd_licenses.xml"/> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-20T12:22:12.787

您的存储配置中没有任何 ascx 绑定。在 5.3 中，它曾经是 Asp 绑定。

更改以下内容：

```
<Item typeMapping="ComponentPresentation" itemExtension=".Asp" storageId="sqlserver"/> 
```

到：

```
<Item typeMapping="ComponentPresentation" itemExtension=".ascx" storageId="sqlserver"/> 
```

此外，在 tridion 2011 中，如果您希望所有内容都存储在 db 中，则无需为每种类型（如 txt、jsp 等）指定映射。

你可以简单地这样做：

```
<Item typeMapping="ComponentPresentation" storageId="sqlserver"/> 
```

# php - 为什么我们不能在 php 中创建另一个类的对象作为元素

> ID：12988311
> 
> 赞同：1
> 
> 时间：2012-10-20T12:14:01.610
> 
> 标签：php

我在论坛中看到了一些相同问题的答案..但答案仍然没有提供一个清晰的想法..

在 C# 等其他语言中执行良好。但为什么不是 PHP？

检查示例：

```
class Student
{
    public $name;
    public $age;
    private $number;
}

class ss
{
    public $obj;
    public $objs=new Student();     //generating error

    public function act()
    {
        $obj = new Student();
        $obj->study();
        $obj->studentinfo();
    }
}

$ob = new ss();
$ob->act(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T12:17:51.183

根据 PHP 文档，任何属性值都必须是常量值。

> 这个声明可能包括一个初始化，但这个初始化必须是一个常量值——也就是说，它必须能够在编译时被评估，并且不能依赖于运行时信息才能被评估。

如果你想`$objs`成为 的新实例`Student`，你应该在你的构造函数中初始化它：

```
public function __constructor()
{
    $this->objs = new Student();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T12:23:54.087

试试这个代码

```
class Student
{
    public $name;
    public $age;
    private $number;
}
class ss
{
    var $obj;
    public function __construct()
    {
        $this->obj = new Student();
        $this->obj->study();
        $this->obj->studentinfo();
    }
}

$ob=new ss();
$ob->act(); 
```

# jsp - 如何查找所有已登录用户以及访问该站点但尚未登录的用户？

> ID：12988313
> 
> 赞同：8
> 
> 时间：2012-10-20T12:14:04.317
> 
> 标签：jsp, servlets

我正在开发一个纯粹基于 JSP 和 Servlet 的项目，并且需要：

1.  显示登录用户列表
2.  并显示未登录访问该站点的用户数。

Servlet API 是否为此提供了一些解决方案？

我找到了这个[答案](https://stackoverflow.com/questions/9804331/how-to-list-out-all-the-logged-on-users-in-a-web-application-using-jsp-servlets)，这可能会回答我的第一个问题，但不够详细。

另外除了以上两个问题，我还想知道我是否可以记录访问我网站的用户的IP地址？

我仍在研究 Java EE 的各种概念，不知道如何开始，所以请记住这一点，请提供一个起点和一点细节，说明如何实现这三件事。如果您能提供有助于我理解基本概念的链接或解释，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T19:44:32.847

您链接到的答案是正确的，因为可以依靠 http 会话来跟踪已识别和匿名的用户。

您要查看的一种机制是 http 侦听器接口（请参阅[http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpSessionListener.html](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpSessionListener.html)）。这允许您在创建和销毁会话时收到通知。这将为您提供更新计数器的方法。

至于IP地址的问题，可以在request对象上调用getRemoteAddr()得到。如果您使用反向代理，则可能需要注意其配置。

# c++ - 存储指向任何成员函数的函数指针

> ID：12988320
> 
> 赞同：4
> 
> 时间：2012-10-20T12:14:40.607
> 
> 标签：c++, function, events, function-pointers

## 我的活动经理

对于事件管理器，我需要将许多指向函数的指针存储在向量中，以便在触发事件时调用它们。（我会在这个问题的最后提供 EventFunction 辅助类的源代码。）

```
// an event is defined by a string name and a number
typedef pair<string, int> EventKey;

// EventFunction holds a pointer to a listener function with or without data parameter
typedef unordered_map<EventKey, vector<EventFunction>> ListEvent;

// stores all events and their listeners
ListEvent List; 
```

可以通过调用第一个或第二个函数来注册侦听器，具体取决于您是否要接收其他数据。（此代码来自我的事件管理器类。）

```
public:
  typedef void (*EventFunctionPointer)();
  typedef void (*EventFunctionPointerData)(void* Data);

  // let components register for events by functions with or without data parameter,
  // internally simple create a EventFunction object and call the private function
  void ManagerEvent::Listen(EventFunctionPointer Function, string Name, int State);
  void ManagerEvent::Listen(EventFunctionPointerData Function, string Name, int State);

private:
  void ManagerEvent::Listen(EventFunction Function, string Name, int State)
  {
    EventKey Key(Name, State);
    List[Key].push_back(Function);
  } 
```

## 成员函数指针

该代码不起作用，因为我在我的列表中存储了函数指针而不是成员函数指针。所有这些指针都应该是成员函数指针，因为像这样的组件将使用其成员函数`ComponentSound`监听事件，以便在事件被触发时播放好听的声音。`"PlayerLevelup"``ComponentSound::PlayerLevelup`

C++ 中的成员函数指针如下所示。

```
// ReturnType (Class::*MemberFunction)(Parameters);
void (ComponentSound::*PlayerLevelup)(); 
```

问题是，任何组件类都应该能够监听事件，但是在事件管理器中存储成员函数指针需要我指定监听类。正如您在示例中看到的，我需要指定`ComponentSound`，但事件管理器应该简单地具有指向任何类的成员函数指针向量。

## 问题

对其中一个问题的回答对我有很大帮助。

*   如何在事件管理器的向量中存储指向任何成员函数的函数指针？（也许所有的监听函数都继承自一个抽象类会有所帮助`Component`。）
*   如何以另一种方式设计我的事件管理器以实现目标功能？（我想对消息使用字符串和整数键。）

我试图让我的问题保持一般性，但如果您需要更多信息或代码，请发表评论。

## 作业

在我的成员函数指针向量中，我使用 EventFunction 而不是仅使用指针来提供两种消息类型。一个有数据参数，一个没有数据参数。

```
class EventFunction
{
private: EventFunctionPointer Pointer; EventFunctionPointerData PointerData; bool Data;
public:
    EventFunction(EventFunctionPointer Pointer) : Pointer(Pointer), PointerData(NULL), Data(false) { }
    EventFunction(EventFunctionPointerData PointerData) : PointerData(PointerData), Pointer(NULL), Data(true) { }
    EventFunctionPointer GetFunction() { return Pointer; }
    EventFunctionPointerData GetFunctionData() { return PointerData; } bool IsData() { return Data; }
    void Call(void* Data = NULL){ if(this->Data) PointerData(Data); else Pointer(); }
}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T12:33:53.767

您将不得不使用[`std::function`](http://en.cppreference.com/w/cpp/utility/functional/function). 这是实现通用回调的唯一方法。一旦你涉及函数指针而不是函数对象，它就不是通用的，永远不会是通用的，也永远不能成为通用的。

```
unordered_map<string, vector<std::function<void()>>> 
```

函数指针是不好的，永远不应该在 C++ 中显式使用，只传递给像[`std::bind`](http://en.cppreference.com/w/cpp/utility/functional/bind)and`std::function`的构造函数这样的模板，成员函数指针更糟糕。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-20T12:29:04.037

您可以使用函子来实现这一点。如果你在你的成员函数周围包裹一个仿函数，你可以用仿函数制作一个向量。仿函数看起来像这样：

```
template <class T> class MyFunctor
{
private:
    T* ObjectPtr;
    void (T::*MemberFunction) ();
public:
    void operator () ()
    {
        return (*this->ObjectPtr.*this->MemberFunction)();
    }
}; 
```

所以基本上一个仿函数会覆盖 () 运算符并返回存储在仿函数类中的成员函数。如果您希望函子使用不同的签名，函子可能会非常复杂，但在本文中您可以获得更多信息。

[http://www.codeproject.com/Articles/7112/Pointers-to-Member-Functions-and-Functors](http://www.codeproject.com/Articles/7112/Pointers-to-Member-Functions-and-Functors)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-20T14:10:19.793

不是直接回应，所以请耐心等待。

*在我们开始之前：这通常被称为`Observer`模式，您可能会在网络上找到很多关于它的混淆信息，以及许多失败的实现，但谁知道您也可能会获得成功。*

好的，首先这个问题有一个基本缺陷：它没有考虑到**捕获对象引用是棘手**的，因为对象的生命周期是有限的。

因此，甚至在我们深入研究实现的细节之前，我们需要问自己*如何处理过时的引用*。有两种基本策略：

1.  没有过时的引用，这意味着已注册的对象在销毁时会自动*取消注册。*该机制可以在基类中分解。

2.  在检查它们时有办法区分好的和陈旧的引用，并懒惰地收集陈旧的引用。该机制可以使用`shared_ptr`/对来强制执行，`weak_ptr`并意识到**它们**`weak_ptr`是.**`shared_ptr`**

 **两种解决方案都是可行的，而且两种*实施*都不是完美的。基类机制假设您实际上可以修改您的类层次结构，而`weak_ptr`技巧假设所有观察都将是堆分配的，并且它们的生命周期由`weak_ptr`.

我将使用`shared_ptr`（并使用许多 C++11 工具，尽管这里没有一个是强制性的）做一个例子：

```
class EventManager {
    typedef std::unique_ptr<Observer> OPtr;
    typedef std::vector<OPtr> Observers;
public:

    // Callback observers of "name"
    // Returns the number of observers so invoked
    size_t signal(std::string const& name) const {
        auto const it = _observers.find(name);
        if (it == _observers.end()) { return 0; }

        Observers& obs = it->second;

        size_t count = 0;
        auto invoker = [&count](OPtr const& p) -> bool {
            bool const invoked = p->invoke();
            count += invoked;
            return not invoked; // if not invoked, remove it!
        };

        obs.erase(std::remove_if(obs.begin(), obs.end(), invoker), obs.end());

        if (obs.empty()) { _observers.erase(it); }

        return count;
    }

    // Registers a function callback on event "name"
    void register(std::string const& name, void (*f)()) {
        _observers[name].push_back(OPtr(new ObserverFunc(f)));
    }

    // Registers an object callback on event "name"
    template <typename T>
    void register(std::string const& name, std::shared_ptr<T> const& p, void (T::*f)()) {
        _observers[name].push_back(OPtr(new ObserverMember<T>(p, f)));
    }

private:
    struct Observer { virtual ~Observer() {} virtual bool invoke() = 0; };

    struct ObserverFunc: Observer {
        ObserverFunc(void (*f)()): _f(f) {}

        virtual bool invoke() override { _f(); return true; }

        void (*_f)();
    };

    template <typename T>
    struct ObserverMember: Observer {
        ObserverT(std::weak_ptr<T> p, void (T::*f)()): _p(p), _f(f) {}

        virtual bool invoke() override {
            std::shared_ptr<T> p = _p.lock();
            if (not p) { return false; }

            p->*_f();
            return true;
        }

        std::weak_ptr<T> _p;
        void (T::*_f)();
    };

    // mutable because we remove observers lazily
    mutable std::unordered_map<std::string, Observers> _observers;
}; // class EventManager 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-20T12:45:34.357

这是您应该使用多态性而不是函数（或成员函数）指针的典型情况。

正如您所指出的，您的组件类应该从一个公共类 Component 继承，该类包含表示事件的虚拟方法：

```
class Component
{
public:
    virtual void OnPlayerLevelUp()
    {
    }
};

class ComponentSound : public Component
{
public:
     // override it
    void OnPlayerLevelUp()
    {
        // do the actual work
    }
}; 
```

您的 ListEvent 类型现在将如下所示：

```
typedef unordered_map<EventKey, vector<Component*>> ListEvent; 
```

至于事件方法中的可选 void* 参数，您可以将其指定为可选参数，但它是 void* 的事实是一个不好的迹象（使用 void* 会导致失去类型安全性），所以我建议你寻找不同的方式来实现你想要的。**

# iphone - 如何在 UIImage (*.png) 周围绘制轮廓/描边 - 内部示例

> ID：12988328
> 
> 赞同：3
> 
> 时间：2012-10-20T12:16:00.143
> 
> 标签：iphone, objective-c, uiimage, outline

我尝试了很多方法来在图像周围绘制黑色轮廓。
这是我想要的结果的一个例子：

![在此处输入图像描述](../Images/9b91f83eb28e4ecb9a5f0e9227ffb8e5.png)

有人可以让我知道我该怎么做吗？或者给我一个例子？

编辑：我卡在这里：有人可以帮我完成吗？我所做的是在带有阴影的白色下制作另一个黑色形状，然后将其全部填充为黑色，这样它就会像一个轮廓 - 但我不知道如何制作阴影的最后一个重要部分将其全部填充为黑色。

```
- (IBAction)addStroke:(id)sender{

    [iconStrokeTest setImage:[self makeIconStroke:icon.imageView.image]];

}

- (UIImage *)makeIconStroke:(UIImage *)image{
    CGImageRef originalImage = [image CGImage];
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
    CGContextRef bitmapContext = CGBitmapContextCreate(NULL,
                                                       CGImageGetWidth(originalImage),
                                                       CGImageGetHeight(originalImage),
                                                       8,
                                                       CGImageGetWidth(originalImage)*4,
                                                       colorSpace,
                                                       kCGImageAlphaPremultipliedLast);

    CGContextDrawImage(bitmapContext, CGRectMake(0, 0, CGBitmapContextGetWidth(bitmapContext), CGBitmapContextGetHeight(bitmapContext)), originalImage);

    CGImageRef finalMaskImage = [self createMaskWithImageAlpha:bitmapContext];

    UIImage *result = [UIImage imageWithCGImage:finalMaskImage];

    CGContextRelease(bitmapContext);
    CGImageRelease(finalMaskImage);

    // begin a new image context, to draw our colored image onto
    UIGraphicsBeginImageContext(result.size);

    // get a reference to that context we created
    CGContextRef context = UIGraphicsGetCurrentContext();

    // set the fill color
    [[UIColor blackColor] setFill];

    // translate/flip the graphics context (for transforming from CG* coords to UI* coords
    CGContextTranslateCTM(context, 0, result.size.height);
    CGContextScaleCTM(context, 1.0, -1.0);

    // set the blend mode to color burn, and the original image
    CGContextSetBlendMode(context, kCGBlendModeColorBurn);
    CGRect rect = CGRectMake(0, 0, result.size.width, result.size.height);
    CGContextDrawImage(context, rect, result.CGImage);

    // set a mask that matches the shape of the image, then draw (color burn) a colored rectangle
    CGContextClipToMask(context, rect, result.CGImage);
    CGContextAddRect(context, rect);
    CGContextDrawPath(context,kCGPathFill);

    // generate a new UIImage from the graphics context we drew onto
    UIImage *coloredImg = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    //return the color-burned image
    return coloredImg;

}

- (CGImageRef)createMaskWithImageAlpha:(CGContextRef)originalImageContext {

    UInt8 *data = (UInt8 *)CGBitmapContextGetData(originalImageContext);

    float width = CGBitmapContextGetBytesPerRow(originalImageContext) / 4;
    float height = CGBitmapContextGetHeight(originalImageContext);

    int strideLength = ROUND_UP(width * 1, 4);
    unsigned char * alphaData = (unsigned char * )calloc(strideLength * height, 1);
    CGContextRef alphaOnlyContext = CGBitmapContextCreate(alphaData,
                                                          width,
                                                          height,
                                                          8,
                                                          strideLength,
                                                          NULL,
                                                          kCGImageAlphaOnly);

    for (int y = 0; y < height; y++) {
        for (int x = 0; x < width; x++) {
            unsigned char val = data[y*(int)width*4 + x*4 + 3];
            val = 255 - val;
            alphaData[y*strideLength + x] = val;
        }
    }

    CGImageRef alphaMaskImage = CGBitmapContextCreateImage(alphaOnlyContext);
    CGContextRelease(alphaOnlyContext);
    free(alphaData);

    // Make a mask
    CGImageRef finalMaskImage = CGImageMaskCreate(CGImageGetWidth(alphaMaskImage),
                                                  CGImageGetHeight(alphaMaskImage),
                                                  CGImageGetBitsPerComponent(alphaMaskImage),
                                                  CGImageGetBitsPerPixel(alphaMaskImage),
                                                  CGImageGetBytesPerRow(alphaMaskImage),
                                                  CGImageGetDataProvider(alphaMaskImage),     NULL, false);
    CGImageRelease(alphaMaskImage);

    return finalMaskImage;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T12:44:56.697

好吧，没有内置的 API。你必须自己做或为此找到一个库。但是您可以通过绘制带有阴影的图像来“伪造”效果。请注意，阴影可以是任何颜色，它不必看起来像阴影。这将是最简单的方法。

除此之外，您可以矢量化光栅图像并描边该路径。核心图像的边缘检测过滤器将对此有所帮助，但结果可能很难完成。

# iphone - 无法将参数传递给 xcode 中的单例函数

> ID：12988332
> 
> 赞同：0
> 
> 时间：2012-10-20T12:16:21.090
> 
> 标签：iphone, xcode, function, singleton, arguments

我在应用程序中有一个**单例**，需要使用另一个类的争论来调用它的函数，但是当我调用它时，传递了 nil 争论......这是代码：

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
    NSLog([Singleton sharedMySingleton].test);
    NSDictionary *story = [self.filters objectAtIndex: indexPath.row];

    MainAppRecord *record = [[[MainAppRecord alloc]init]retain];
    record.name = [story objectForKey:@"Name"];
    record.searchUrl = [story objectForKey:@"SearchUrl"];
    record.icon = [imageCash objectForKey:indexPath];
    [[Singleton sharedMySingleton] changeMainFilterTo:record atPosition:indexOfFilterToChange]; 
```

}

这是 Singleton.h 及其功能：

```
@interface Singleton : NSObject {

    NSMutableArray *mainFilters;
    NSString *test;
}

@property (nonatomic, retain) NSMutableArray *mainFilters;
@property (nonatomic, retain) MainAppRecord *filterToChange;

-(void) initWithPlist;
-(void) saveToPlist;
-(void)changeMainFilterTo:(MainAppRecord*)record atPosition:(int)position;
+(Singleton *)sharedMySingleton;

@end

-(void)changeMainFilterTo:(MainAppRecord*)record atPosition:(int)position 
{
    [mainFilters insertObject:record atIndex:position];
} 
```

该应用程序崩溃

2012-10-20 16:24:52.789 TableView[1957:207]-[__NSArrayI insertObject:atIndex:]：无法识别的选择器发送到实例 0x68410f0

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T12:30:18.217

这与未传递的参数或单例无关。

你已经在你的单例中声明了一个 NSMutableArray 属性，但看起来你已经为它分配了一个 NSArray 。您没有显示在哪里设置它，但看起来您是从属性列表加载它 - 默认情况下会创建一个不可变数组。然后，您尝试插入一个对象——这不能对不可变数组执行。

确保在创建数组时，您正在创建一个可变数组。

最简单的方法是找到您当前分配数组的代码，然后制作一个可变副本：

```
self.mainFilters = [[NSKeyedUnarchiver unarchiveObjectWithData:other] mutableCopy]; 
```

# android - 在 admob 中介中以编程方式支持不同的屏幕尺寸

> ID：12988333
> 
> 赞同：1
> 
> 时间：2012-10-20T12:16:24.947
> 
> 标签：android, width, admob

到目前为止，我只`admob`在我的移动应用上使用广告。使用`SMART_BANNER`，我能够在所有屏幕尺寸上显示全宽横幅。

现在，我想开始使用中介，但其他网络`SMART_BANNER`不支持。如果没有完整的广告，`ads`我该怎么做？`width``SMART_BANNER`

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T21:48:12.813

`SMART_BANNER`是专门作为 AdMob 的一项功能推出的。大多数其他网络没有等效的全屏格式，因此它们的适配器可能不会为全屏请求返回广告。在更多网络开始支持这种广告类型之前，您几乎必须对全角广告与中介广告做出决定。

# apache - .htaccess - 重定向域名

> ID：12988338
> 
> 赞同：1
> 
> 时间：2012-10-20T12:16:57.313
> 
> 标签：apache, .htaccess, mod-rewrite, redirect

我有一个域名**www.domainA.com**我想通过以下方式将其重定向到**domainB**。

`www.domainA.com`-> `www.domainB.com`
`www.domainA.com/anything`->`www.domainB.com/rebrand`

我如何在 htaccess 中做到这一点，我已经完成了以下代码，但它只重定向到`/rebrand/`。

```
RewriteCond %{REQUEST_URI} ^\/
RewriteRule ^\/$ http://www.domainB.com/ [L,R=301]

RewriteCond %{HTTP_HOST} ^domainA\.com$ [NC]
RewriteRule ^(.*)$ http://www.domainB.com/rebrand/ [L,R=301] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T12:21:27.297

在 htaccess 文件中通过规则的 URI 的前导斜杠被剥离，因此您无法匹配它。对于第二条规则，它匹配`/`请求，因为没有应用第一条规则并且您的正则表达式匹配任何内容或不匹配任何内容，您可以通过更改`*`to来解决这个问题`+`：

```
RewriteCond %{HTTP_HOST} ^domainA\.com$ [NC]
RewriteRule ^/?$ http://www.domainB.com/ [L,R=301]

RewriteCond %{HTTP_HOST} ^domainA\.com$ [NC]
RewriteRule ^(.+)$ http://www.domainB.com/rebrand/ [L,R=301] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T22:42:32.753

通过 htaccess 重定向有时很棘手，有很多方法可以实现，但有一种简单的方法对我有用

```
Options +FollowSymLinks 
RewriteEngine on 
RewriteRule (.*) [newdomain.com...] [R=301,L] 
```

[您可以从站长世界论坛](http://www.webmasterworld.com/apache/3242480.htm)获取更多信息

# image-processing - 带掩码的聚类

> ID：12988341
> 
> 赞同：2
> 
> 时间：2012-10-20T12:17:11.660
> 
> 标签：image-processing, opencv, mask, k-means

其实我已经在[官方问答](http://answers.opencv.org/question/3111/clusterization-in-opencv/)中问过这个问题，但还没有得到任何答案。

我的任务是不是对整个图像使用[kmeans 聚类](http://opencv.willowgarage.com/documentation/cpp/core_clustering.html)，而只是对它的蒙版部分使用。所以作为输入，我有两个图像：

1.  蒙面图像。
2.  图像转换为 Lab 颜色空间。

如果我在**n 个**集群上对图像进行聚类，则在使用掩码进行聚类后，我希望获得具有**n+1**个集群的图像（由于掩码而 +1）。

当然，我研究并搜索了它，但一无所获。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T20:29:22.393

创建另一个图像，复制其中的数据未屏蔽数据，并使用此矩阵执行您的 kmeans。事情是这样的：

[编辑]

以下不起作用，它只是遮罩中的像素，但 tmp 与原始图像具有相同的尺寸。简历::垫 tmp; labImage.copyTo(tmp, 掩码);

您应该事先分配 tmp 矩阵，并在掩码上使用循环填充它：

```
cv::Mat tmp = cv::Mat::zeros(cv::countNonZero(mask), 1, labImage.type());
int counter = 0;
for (int r = 0; r < mask.rows; ++r)
  for (int c = 0; c < mask.cols; ++c) 
    if (!mask.at<unsigned char>(r, c))
      // I assume Lab pixels are stored as a vector of floats
      tmp.at<cv::Vec3f>(counter++, 0) = labImage.at<cv::Vec3b>(r, c); 
```

[/编辑]

```
cv::kmeans(tmp, k, labels);

// Now to compute your image of labels
cv::Mat labelsImage = cv::Mat(labImage.size(), CV_32S, k); // initialize pixel values to K, which is the index of your N+1 cluster

// Now loop through your pixel mask and set the correspondance in your labelImage
int counter = 0;
for (int r = 0; r < mask.rows; ++r)
  for (int c = 0; c < mask.cols; ++c) 
    if (!mask.at<unsigned char>(r, c))
      labelsImage.at<int>(r, c) = labels.at<int>(counter++, 0); 
```

# python - 把字典分成两半？

> ID：12988351
> 
> 赞同：31
> 
> 时间：2012-10-20T12:17:59.787
> 
> 标签：python, dictionary

将字典分成两半的最佳方法是什么？

```
d = {'key1': 1, 'key2': 2, 'key3': 3, 'key4': 4, 'key5': 5} 
```

我正在寻找这样做：

```
d1 = {'key1': 1, 'key2': 2, 'key3': 3}
d2 = {'key4': 4, 'key5': 5} 
```

哪个键/值进入每个字典并不重要。我只是在寻找将字典分成两部分的最简单方法。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-10-20T12:27:10.383

这会起作用，尽管我没有测试边缘情况：

```
>>> d = {'key1': 1, 'key2': 2, 'key3': 3, 'key4': 4, 'key5': 5}
>>> d1 = dict(d.items()[len(d)/2:])
>>> d2 = dict(d.items()[:len(d)/2])
>>> print d1
{'key1': 1, 'key5': 5, 'key4': 4}
>>> print d2
{'key3': 3, 'key2': 2} 
```

在python3中：

```
d = {'key1': 1, 'key2': 2, 'key3': 3, 'key4': 4, 'key5': 5}
d1 = dict(list(d.items())[len(d)//2:])
d2 = dict(list(d.items())[:len(d)//2]) 
```

另请注意，不保证物品的顺序

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-20T12:32:57.043

这是一种使用迭代器对字典中的项目进行迭代的方法，并且`itertools.islice`：

```
import itertools

def splitDict(d):
    n = len(d) // 2          # length of smaller half
    i = iter(d.items())      # alternatively, i = d.iteritems() works in Python 2

    d1 = dict(itertools.islice(i, n))   # grab first n items
    d2 = dict(i)                        # grab the rest

    return d1, d2 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-20T12:22:36.697

```
d1 = {key: value for i, (key, value) in enumerate(d.viewitems()) if i % 2 == 0}
d2 = {key: value for i, (key, value) in enumerate(d.viewitems()) if i % 2 == 1} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-03-11T09:43:15.510

如果您使用`python +3.3`，并且希望您的拆分字典在不同的 python 调用中相同，请不要使用`.items`，因为键的哈希值决定了`.items()`python 调用之间的顺序。请参阅[哈希随机化](http://python.6.x6.nabble.com/hash-randomization-in-3-3-td4492512.html)

* * *

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-04-21T02:21:16.193

[琼斯的回答](https://stackoverflow.com/questions/12988351/split-a-dictionary-into-2-dictionaries#12988416)对我不起作用。在我可以索引 .items() 调用的结果之前，我必须转换到一个列表。（**我在示例中运行 Python 3.6**）

```
d = {'one':1, 'two':2, 'three':3, 'four':4, 'five':5}
split_idx = 3
d1 = dict(list(d.items())[:split_idx])
d2 = dict(list(d.items())[split_idx:])

"""
output:
d1
{'one': 1, 'three': 3, 'two': 2}
d2
{'five': 5, 'four': 4}
""" 
```

请注意，dicts 不一定按创建顺序存储，因此索引可能会混淆。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-05-07T09:46:43.093

这是可用于将字典拆分为任何部门的功能。

```
import math

def linch_dict_divider(raw_dict, num):
    list_result = []
    len_raw_dict = len(raw_dict)
    if len_raw_dict > num:
        base_num = len_raw_dict / num
        addr_num = len_raw_dict % num
        for i in range(num):
            this_dict = dict()
            keys = list()
            if addr_num > 0:
                keys = raw_dict.keys()[:base_num + 1]
                addr_num -= 1
            else:
                keys = raw_dict.keys()[:base_num]
            for key in keys:
                this_dict[key] = raw_dict[key]
                del raw_dict[key]
            list_result.append(this_dict)

    else:
        for d in raw_dict:
            this_dict = dict()
            this_dict[d] = raw_dict[d]
            list_result.append(this_dict)

    return list_result

myDict = {'key1': 1, 'key2': 2, 'key3': 3, 'key4': 4, 'key5': 5}
print myDict
myList = linch_dict_divider(myDict, 2)
print myList 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-20T12:36:01.440

我们可以有效地做到这一点[`itertools.zip_longest()`](http://docs.python.org/py3k/library/itertools.html#itertools.zip_longest)（注意这是[`itertools.izip_longest()`](http://docs.python.org/library/itertools.html#itertools.izip_longest)在 2.x 中）：

```
from itertools import zip_longest
d = {'key1': 1, 'key2': 2, 'key3': 3, 'key4': 4, 'key5': 5}
items1, items2 = zip(*zip_longest(*[iter(d.items())]*2))
d1 = dict(item for item in items1 if item is not None)
d2 = dict(item for item in items2 if item is not None) 
```

这给了我们：

```
>>> d1
{'key3': 3, 'key1': 1, 'key4': 4}
>>> d2
{'key2': 2, 'key5': 5} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-11-13T22:10:20.620

这是我在 Python 3.8 中使用的一个函数，它可以将 dict 拆分为包含所需部分数量的列表。如果您指定的部分多于元素，您将在结果列表中获得一些空字典。

```
def split_dict(input_dict: dict, num_parts: int) -> list:
    list_len: int = len(input_dict)
    return [dict(list(input_dict.items())[i * list_len // num_parts:(i + 1) * list_len // num_parts])
        for i in range(num_parts)] 
```

输出：

```
>>> d = {'a': 1, 'b': 2, 'c': 3, 'd': 4, 'e': 5}
>>> split_dict(d, 2)
[{'a': 1, 'b': 2}, {'c': 3, 'd': 4, 'e': 5}]
>>> split_dict(d, 3)
[{'a': 1}, {'b': 2, 'c': 3}, {'d': 4, 'e': 5}]
>>> split_dict(d, 7)
[{}, {'a': 1}, {'b': 2}, {}, {'c': 3}, {'d': 4}, {'e': 5}] 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-07-19T07:14:32.537

如果你使用 numpy，那么你可以这样做：

```
def divide_dict(dictionary, chunk_size):

'''
Divide one dictionary into several dictionaries

Return a list, each item is a dictionary
'''

import numpy, collections

count_ar = numpy.linspace(0, len(dictionary), chunk_size+1, dtype= int)
group_lst = []
temp_dict = collections.defaultdict(lambda : None)
i = 1
for key, value in dictionary.items():
    temp_dict[key] = value
    if i in count_ar:
        group_lst.append(temp_dict)
        temp_dict = collections.defaultdict(lambda : None)
    i += 1
return group_lst 
```

# asp.net - ASP.NET - 同一客户端的多个工作线程

> ID：12988357
> 
> 赞同：0
> 
> 时间：2012-10-20T12:18:58.873
> 
> 标签：asp.net, vb.net

我了解 ASP.NET 使用工作线程处理请求。因此客户端 A 和客户端 B 可以发出请求，请求同时处理。

客户端可以同时发出多个请求。请看下面的代码：

```
Imports System.Threading
Partial Class Default5
    Inherits System.Web.UI.Page

    Dim intCount1 As Integer, intCount2 As Integer

    Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        'If Session("Test") = "" Then
        Session("Test") = Request.QueryString("ID")
        'End If
        Response.Write(Session("Test"))
    End Sub
End Class

Imports System.Threading
Partial Class Default4
    Inherits System.Web.UI.Page

    Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        If Session("Test") <> "" Then
            For intCount1 = 0 To 10
                Response.Write(Session("Test") & "," & intCount1 & "<br>")
                Thread.Sleep(1000)
            Next
        End If
    End Sub
End Class 
```

请通过指定以下 URL 打开 Default5.aspx：default5.aspx?id=1 并使用此 URL 打开另一个页面：default5.aspx?id=2。然后从打开 default5.aspx?id=1 的浏览器导航到 default4.axpx（通过指定 URL），在运行时，从打开 default5.aspx?id=2 的浏览器导航到 default4.axpx。两种情况的结果都是：

```
2,0
2,1
2,2
2,3
2,4
2,5
2,6
2,7
2,8
2,9
2,10 
```

在这两种情况下，会话变量都是 2（我明白为什么会这样）。请看我昨天问的一个问题：[ASP.NET - Accessing web page two from client](https://stackoverflow.com/questions/12980123/asp-net-accessing-web-page-twice-from-client)。在此示例中，会话变量在两种情况下都不是 2。

我的问题是；ASP.NET 可以同时处理来自同一个客户端的多个请求。Wins 的响应似乎表明一次处理一个请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-18T19:07:28.363

对于发现这篇文章的其他人，如果您不需要对 Session 的写访问，则声明只读访问允许 ASP.NET 并发运行请求，因为它不必获得会话锁：

在页面中：

```
EnableSessionState="ReadOnly" 
```

或者在通用处理程序中通过实现：

```
IReadOnlySessionState 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T12:26:52.943

```
My question is; can ASP.NET process multiple requests 
from the same client at the same time. 
```

是的，如果您禁用会话，或者使用没有会话的处理程序，或者完全自定义会话。

如果您为相同的 Web 应用程序使用多个池来创建[“Web garder” ，它也可能会有所帮助](http://www.microsoft.com/technet/prodtechnol/windowsserver2003/library/iis/659f2e2c-a58b-4770-833b-df96cabe569e.mspx)

您还可以阅读：
[ASP.NET 服务器不异步处理页面](https://stackoverflow.com/questions/12284530/asp-net-server-does-not-process-pages-asynchronously/12285168#12285168)
[尝试使 Web 方法异步](https://stackoverflow.com/questions/11325150/trying-to-make-web-method-asynchronous)
[Web 应用程序在处理共享同一会话的另一个 Web 应用程序时被阻止](https://stackoverflow.com/questions/9426673/web-app-blocked-while-processing-another-web-app-on-sharing-same-session)
[哪些性能计数器可用于识别 ASP.NET 瓶颈？](https://stackoverflow.com/questions/9056240/what-perfmon-counters-are-useful-for-identifying-asp-net-bottlenecks/9056650#9056650)
[完全替换 ASP.Net 的会话](https://stackoverflow.com/questions/8989648/replacing-asp-nets-session-entirely)

# java - 如何在不使用“文件：”的情况下创建文件系统的 URL？

> ID：12988360
> 
> 赞同：0
> 
> 时间：2012-10-20T12:19:26.040
> 
> 标签：java, filesystems, rmi

如 JDK 7 发行说明中所述，我已成为以下 Java RMI 错误的受害者：

> 当 RMI 服务器尝试使用“file:”URL 方案绑定包含代码库注释的导出对象时，此版本中包含的 rmiregistry 命令中的错误可能会导致引发意外异常。最有可能受到影响的 RMI 服务器是那些仅由在与服务器相同的主机上执行的 RMI 客户端调用的服务器。
> 
> RMI 将代码库信息注释为远程对象引用的序列化状态的一部分，以帮助 RMI 客户端在运行时加载与对象关联的所需类和接口。在 RMI 注册表中查找并由在服务器以外的主机上运行的 RMI 客户端调用的导出对象通常使用代码库 URL 方案进行注释，例如“http:”或“ftp:”，这些应该继续正常工作。
> 
> **作为一种解决方法，RMI 服务器可以将 java.rmi.server.codebase 属性设置为对它们导出的对象使用除“file:”方案之外的代码库 URL。**

（强调我的）

我正在本地机器上开发 RMI 应用程序，我需要设置代码库以包含一些库。

```
StringBuilder codebase = new StringBuilder();
codebase.append(" file:/").append(projectPath).append("/bin/lib/rmiio-2.0.0.jar")
        .append(" file:/").append(projectPath).append("/bin/lib/log4j-1.2.9.jar")
        .append(" file:/").append(projectPath).append("/bin/lib/commons-logging.jar")
        .append(" file:/").append(projectPath).append("/bin/lib/commons-logging-api.jar");
System.setProperty("java.rmi.server.codebase", codebase.toString()); 
```

如果没有“文件：/”语法，我怎样才能达到同样的效果？在我的情况下，该错误的有效解决方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T12:32:45.033

如果文件 URL 方案存在错误
（我猜您验证了语法例如 - `file:///home/user/myprojects/myjar.jar`）
我猜您除了在打开的 JDK 中修复问题或将文件放入 apache 网络服务器之外别无选择（或 tomcat）并使用带有“http://”前缀的 URI。
部署此类 tomcat 或 apache 非常简单，因为您在这里处理的是静态资源。
据我记得，在我看了[这里](http://docs.oracle.com/javase/1.4.2/docs/guide/rmi/codebase.html)之后，我没有看到其他选择，只能像你一样为代码库提供一个 URI 链。
另一种选择是简单地为这个 jars 提供 RMI 客户端代码。

# objective-c - 在 UITextView 上隐藏键盘

> ID：12988362
> 
> 赞同：1
> 
> 时间：2012-10-20T12:19:48.957
> 
> 标签：objective-c, uitextview

我想提前感谢您的回答。我阅读了有关此的所有内容，但无法解决。

我知道如何在 UITextField 上隐藏键盘，就像这样：

```
 - (BOOL)textFieldShouldReturn:(UITextField *)textField{
    [placename resignFirstResponder];
    [address resignFirstResponder];

    return YES;
} 
```

但我也有一个 UITextView，我不知道如何隐藏它。我不想用按钮隐藏它我想在返回时用“完成”隐藏它。

我读到这样的东西：

```
[textField setReturnKeyType: UIReturnKeyDone]; 
```

但是......如何以及在哪里实施它？我是新手，所以我需要逐步了解它。

非常感谢。（对不起，我无法发送图像......新用户；））

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T12:40:09.977

这简单。在您的控制器中有 textview 委托并添加以下方法。

```
- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text {

    if([text isEqualToString:@"\n"]) {
        [textView resignFirstResponder];
        return NO;
    }

    return YES;
} 
```

使用它有一个缺点，用户不能编写多行语句。要解决这个问题，您可以在键盘上创建视图并在此处设置按钮并添加操作以退出您的文本视图。

[归功于这个问题](https://stackoverflow.com/questions/703754/how-to-dismiss-keyboard-for-uitextview-with-return-key)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-29T10:17:06.647

除了@JanakNirmal Answers，.h 和 .m 的代码。对我来说很好。

### 。H

```
@interface ViewController : UIViewController <UITextViewDelegate>
@property (weak, nonatomic) IBOutlet UITextView *textField; // connected with IB
@end 
```

### .m

```
@interface ViewController ()
- (void)viewDidLoad
{
    [super viewDidLoad];

    // Done key and hide keyboard 
    [self.textField setDelegate:self];
    [self.textField setReturnKeyType:UIReturnKeyDone];
}

- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range  replacementText:(NSString *)text
{
    if ([text isEqualToString:@"\n"])
    {
        [textView resignFirstResponder];
    }
    return YES;
}
@end 
```

# r - 按名称从列表中提取值

> ID：12988367
> 
> 赞同：0
> 
> 时间：2012-10-20T12:21:04.387
> 
> 标签：r, string-literals

我有一个清单：

```
>data<- list("Apple"=12,"orange"=4,"pear"=5)
>fruit<- "Apple" 
```

现在我提取苹果的价值。

```
>data$fruit 
```

我得到NULL。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T12:22:59.140

```
data<- list("Apple"=12,"orange"=4,"pear"=5)
fruit<- "Apple"

data[fruit]
#$Apple
#[1] 12

data[[fruit]]
#[1] 12 
```

如您所见`[`，返回一个列表，而`[[`返回向量。前者可以选择多个元素，而后者只能选择一个元素。你可能会从阅读中受益`?"$"`。

# sql-server - 如何通过减少索引查找来提高此查询的效率？

> ID：12988372
> 
> 赞同：0
> 
> 时间：2012-10-20T12:21:51.620
> 
> 标签：sql-server, performance

我有一个功能，我想提高效率。我知道大部分成本都在寻找索引上。我想知道是否有办法将这两个索引搜索合并为一个。

这是我的功能

```
ALTER FUNCTION [dbo].[Search]
(
    @Query nvarchar(150)        
)
RETURNS @result TABLE 
(
    ID int,
    ResultPhrase nvarchar(max),
    Domain nvarchar(50)
)
AS

BEGIN

declare  @id int,
         @OffsetArticle nvarchar(50),
         @OffsetProfile nvarchar(50),
         @index int,
         @domain nvarchar(50),
         @StringResult nvarchar(max),
         @substrIndex int,
         @substrCount int,
         @field nvarchar(40),
         @begin int,
         @end int

        DECLARE pidCursor CURSOR FAST_FORWARD
        FOR select id,OffsetArticle,OffsetProfile from PerfTest where contains (data,@Query)

        open pidCursor
        FETCH NEXT FROM pidCursor INTO @id,@OffsetArticle,@OffsetProfile

        while (@@FETCH_STATUS = 0)
        begin

        select @index = CHARINDEX(@Query,data) from PerfTest where ID=@id

        exec @domain =  dbo.FindDomain @id=@id ,@index=@index, @offsetArticle=@OffsetArticle, @offsetProfile=@OffsetProfile

        if(@domain = N'Profile')
            set @end = SUBSTRING(@offsetProfile,CHARINDEX(N'-',@offsetProfile)+1,len(@offsetProfile)-CHARINDEX(N'-',@offsetProfile))
            set @begin = SUBSTRING(@offsetProfile,1,CHARINDEX(N'-',@offsetProfile)-1)

        if(@domain = N'Article')
            set @end = SUBSTRING(@OffsetArticle,CHARINDEX(N'-',@OffsetArticle)+1,len(@OffsetArticle)-CHARINDEX(N'-',@OffsetArticle))
            set @begin = SUBSTRING(@OffsetArticle,1,CHARINDEX(N'-',@OffsetArticle)-1)

        if(@index - 20 < CAST(@begin as int))
            set @substrIndex = @index
        else
            set @substrIndex = @index - 20

        if(@index + 150 > CAST(@end as int))
            set @substrCount = @end
        else
            set @substrCount = @index + 150 

        select @StringResult = SUBSTRING(data,@substrIndex,@substrCount) from PerfTest where ID=@id

        insert @result (id,ResultPhrase,Domain) values (@id,@StringResult,@domain)

        if(@@FETCH_STATUS = 0)
            FETCH NEXT FROM pidCursor INTO @id,@OffsetArticle,@OffsetProfile

        end
        CLOSE pidCursor
        DEALlOCATE pidCursor

RETURN      
END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T19:36:02.887

包括

```
 CHARINDEX(@Query,data) 
```

在光标中，而不是在循环内首先计算它。这应该会减少大约一半的搜索量。虽然搜索是 SQL Server 最有效的访问方式，但消除其中一半仍然有助于任何查询。

您还可以尝试在游标中包含数据并使用该值计算 @StringResult。如果这会有所帮助，很大程度上取决于数据列的平均大小。如果它足够小，应该可以显着加快速度。“足够小”取决于很多事情，您应该尝试一下。如果数据是 VARCHAR(1000) 将其拉到游标中，它很可能会有所帮助，但是如果它是 VARCHAR(MAX) 且平均长度为 2 MB，则很可能会受到伤害。

最后，正如 Pete 所提到的，最好的解决方案是以基于集合的方式编写它，但这可能更复杂，因为您不能从单个 select 语句中调用存储过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T13:08:54.390

要组合 @index 和 @string 结果查询，您可以执行以下操作：

```
DECLARE @results TABLE
(index INT, stringresult NVARCHAR(MAX))

INSERT INTO @results(Index,stringresult)
SELECT CHARINDEX(@Query,data) 
      ,SUBSTRING(data,@substrIndex,@substrCount
FROM PerfTest where ID=@id

SET @index = (SELECT index from @results)
SET @stringresults = (SELECT stringresult FROM @results) 
```

这将只读取一次 perftest 表，然后将内存表中的结果读取到两个变量中

# html - 样式化定义列表 ( ) 带有浮动子元素

> ID：12988377
> 
> 赞同：3
> 
> 时间：2012-10-20T12:22:36.407
> 
> 标签：html, css

有一个定义列表，其中键值对应该在一行上。定义在术语之后开始，因此`<dt>`s 没有固定宽度。这实际上工作正常，使用浮动元素，我得到一些像这样的：

> **值：**定义 1
> 
> **值：**定义 2
> 
> **值：**定义 3

问题是，`<dd>`-element 可能会变长，然后导致：

> **值：**定义 1
> 
> **价值：**
> 
> 定义 2 非常非常长。
> 
> **值：**定义 3

但我实际上想得到这个：

> **值：**定义 1
> 
> **值：**定义 2
> 
> 非常非常长。
> 
> **值：**定义 3

我无法理解它。也许有人有一个想法。

这是[jsfiddle.net 上的演示](http://jsfiddle.net/CfuA8/)，这里是源代码：

**HTML**

```
<dl>
    <dt>Value 1:</dt>
    <dd>Defintiion 1</dd>

    <dt>V 2:</dt>
    <dd>Defintiion 2</dd>

    <dt>Value 3</dt>
    <dd>Defintiion 3 is pretty long. So it breaks into a new line.</dd>

    <dt>This length is not defined:</dt>
    <dd>Defintiion 4</dd>

    <dt>Last</dt>
    <dd>Defintiion 5</dd>
</dl>​ 
```

**CSS**

```
dl {
    width: 200px;
    border: 1px solid red;
}

dl > dt {
    display: block;
    float: left;
    clear: both;
    margin: 0;
    padding: 0 5px 0 0;
    font-weight: bold;
}

dl > dd {
    display: block;
    float: left;
    margin: 0;
    padding: 0;
}​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T14:05:34.967

您可以使用`display: inline`来完成您正在寻找的内容：

[http://jsfiddle.net/unPdd/](http://jsfiddle.net/unPdd/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T12:36:13.650

定义列表工作 loke 数组：您的标题是一个单元格，您的定义在另一个单元格中。这就是为什么当它太长时你的整个定义移到下一行。

您正在寻找的行为看起来更像是一个普通列表，其中每个标题都用粗体字母书写。

# php - 将 xml DOMDocument 转换为字符串

> ID：12988379
> 
> 赞同：30
> 
> 时间：2012-10-20T12:22:52.200
> 
> 标签：php, xml, ajax

嗨，我正在将 ajax 用于显示可用课程的网站，我在阅读 xml（其中包含课程详细信息）时遇到问题我正在显示文本（课程描述）。现在我正在跟踪它以获得正确的课程名称（在 xml 文件中），但是在将其与输入课程名称进行比较时，它根本没有比较所以。在某一时刻，我加载了 xml 文件并回显它：

```
$doc->load('data/ICT.xml'); 
echo"$doc"; 
```

它给了我一个错误

> 可捕获的致命错误：第 23 行的 /home/students/....../www/htdocs/client/unit_details.php 中的 DOMDocument 类的对象无法转换为字符串

所以我从中了解到的是应该将xml dom对象转换为字符串，以便我可以获得所需的数据并使用它，是真的吗？如果是这样的话，有人可以告诉我该怎么做（比如任何功能等）提前谢谢:-)

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-10-20T12:23:57.733

该`DOMDocument`对象不能用作字符串。

以下是将`DOMDocument`对象显示为 XML 字符串的方法：

```
echo $doc->saveXML(); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-10-20T12:25:56.877

`DOMDocument`有一种方法[`SaveHTML()`](http://www.php.net/manual/en/domdocument.savehtml.php)，它旨在完全满足您的需求。

您可以通过以下方式显示整个文档：

```
$doc->saveHTML(); 
```

或者只是某个节点：

```
$doc->saveHTML( $bodyNode); 
```

[`DOMDocument`](http://www.php.net/manual/en/class.domdocument.php)还提供了一些选项来增强 XML 的打印方式，例如：

*   [`preserveWhiteSpaces`](http://www.php.net/manual/en/class.domdocument.php#domdocument.props.preservewhitespace)
*   [`formatOutput`](http://www.php.net/manual/en/class.domdocument.php#domdocument.props.formatoutput)
*   [`encoding`](http://www.php.net/manual/en/class.domdocument.php#domdocument.props.encoding)
*   ...

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-20T12:34:51.627

尝试这个：

```
$xml = $doc->saveXML($doc->documentElement); 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-10-20T12:27:50.947

您可以使用类型转换

```
$doc->load('data/ICT.xml'); 
$doc2=(string)$doc;
echo $doc2; 
```

或者您可以使用 PHP 函数

```
strval(); 
```

此函数返回传递给它的参数的字符串值。

# web - 有什么工具可以跟踪网站的特定访问者吗？

> ID：12988383
> 
> 赞同：1
> 
> 时间：2012-10-20T12:23:15.793
> 
> 标签：web, analytics

假设如果我想跟踪 John，我会向 John 发送一封电子邮件，告诉他访问 mywebsite.com/description。他实际上访问了 mywebsite.com 但我现在如果添加描述它必须是我约翰因为没有描述页面。有这样的吗？

据我所知，谷歌分析不提供这样的产品

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T12:28:59.030

[AWStats](http://awstats.sourceforge.net/)可以解决您的目的。AStats的一些特点是：-

完整的日志分析使 AWStats 能够向您显示以下信息：

*   访问次数和次数`unique visitors`，
*   访问持续时间和上次访问，
*   经过身份验证的用户和上次经过身份验证的访问，
*   星期几和高峰时间（页面、点击量、每个小时和星期几的 KB），
*   主机访问者的域/国家（页面、点击量、KB、检测到 269 个域/国家、GeoIp 检测），
*   主机列表、上次访问和未解析的 IP 地址列表，
*   浏览次数最多的进入和退出页面，
*   文件类型，
*   Web 压缩统计信息（用于 mod_gzip 或 mod_deflate），
*   使用的操作系统（每个操作系统的页面、命中、KB，检测到 35 个操作系统），
*   使用的浏览器（页面、点击、每个浏览器的 KB、每个版本（Web、Wap、媒体浏览器：97 个浏览器，如果使用 browsers_phone.pm 库文件，则超过 450 个），
*   机器人访问量（检测到 319 个机器人），
*   蠕虫攻击（5 个蠕虫家族），
*   用于查找您网站的搜索引擎、关键词和关键字（检测到 115 个最著名的搜索引擎，如 yahoo、google、altavista 等...），
*   HTTP 错误（未找到最后一个引荐来源网址的页面，...），
*   其他基于 url、url 参数、用于杂项/营销目的的 referer 字段的个性化报告，
*   您的网站被“添加到收藏夹”的次数。
*   屏幕大小（需要在索引页面中添加一些 HTML 标签）。
*   支持的浏览器比例：Java、Flash、RealG2阅读器、Quicktime阅读器、WMA阅读器、PDF阅读器（需要在索引页面中添加一些HTML标签）。
*   负载平衡服务器比率的集群报告。

# javascript - javascript长度返回未找到

> ID：12988387
> 
> 赞同：1
> 
> 时间：2012-10-20T12:23:36.243
> 
> 标签：javascript, html

为什么当我想要检查 webAdress 长度时，它会让我找不到，但长度却没有？

```
<script type="text/javascript">
             function myFunction() {
                 var webAdress = document.getElementById('webAdress');
               alert(String(webAdress.legnth));
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T12:26:15.707

这是正确的`document.getElementById`，如果存在，总是返回单个元素。您不应该对多个元素使用相同的 id。

`webAdress`是 dom 元素不是数组。

如果您想检查某些特定元素的长度，请使用类，例如。

```
var webAdress = document.getElementsByClassName('webAdress');
alert(webAdress.length); 
```

如果要检查 webAdress 的内容长度：

```
var webAdress = document.getElementById('webAdress');
alert(webAdress.innerHTML.length); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T12:30:33.617

如果您想获得名称为 webAdress 的可用控件数量，则以下函数是正确的。但是，如果您想获取 webAdress 字段的字符串长度，那么您必须具有 javascirpt 函数的值属性，如下所示

```
function myFunction() {
     var webAdress = document.getElementById('webAdress');
   alert(String(webAdress.legnth));
}

function myFunction() {
     var webAdress = document.getElementById('webAdress').value;
   alert(String(webAdress.legnth));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T12:35:33.077

```
<input type="text" id="webAdress">
<input type="button" value="check" onClick="myFunction()">​

        function myFunction() {
            var webAdress = document.getElementById('webAdress').value;
            alert(webAdress.length);
        } 
```

如果您尝试此示例，则拼写存在问题。

更新：我添加了相同的脚本哟一个小提琴，[http://jsfiddle.net/sameerast/Rk7ht/1/](http://jsfiddle.net/sameerast/Rk7ht/1/)

# macos - 设置 $PATH 目录的问题

> ID：12988393
> 
> 赞同：4
> 
> 时间：2012-10-20T12:24:14.783
> 
> 标签：macos, bash, environment-variables

出于某种奇怪的原因，我的`$PATH`变量出现“没有这样的文件或目录”错误。我尝试使用 编辑我的路径`export`，将其从原来的路径更改为从单个目录路径到原始路径的每个排列。

当有一个目录（例如，`export PATH=/bin`）时，我得到“/bin: Is a Directory”。但是一旦我添加了多个目录（例如，`export PATH=/bin:/sbin`），我就会得到“没有这样的文件或目录”。

我很想知道这个问题的原因是什么！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T15:31:45.667

关于; 你的评论：

`/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin:/usr/local/git/bin:/u‌sr/local/mysql/bin: No such file or directory`如果您有一行显示：

```
$PATH 
```

也许是它自己，或者也许你有`$PATH=...`。也就是说，shell 正在尝试执行一个名为：

`/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin:/usr/local/git/bin:/u‌sr/local/mysql/bin`

丢掉左边的$。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T12:27:01.510

我不确定您是否*正在*使用该`export`变体。根据以下成绩单，您几乎可以肯定那里有空格，而且您不应该这样做：

```
pax> PATH= /bin
bash: /bin: is a directory

pax> PATH= /bin/sbin
bash: /bin/sbin: No such file or directory 
```

第一个是因为您在尝试运行该目录时临时将路径设置为空字符串。那是因为您可以执行以下操作：

```
pax> xyzzy=1

pax> echo $xyzzy
1

pax> xyzzy=2 bash -c 'echo $xyzzy'
2

pax> echo $xyzzy
1 
```

换句话说，它是一种为单个命令更改环境变量并在命令完成时自动恢复的方法。

第二种情况只是因为*没有*目录`/bin/sbin`。因此，它会在抱怨您尝试运行目录这一事实*之前检测到这一点。*

在其中设置变量`bash`是没有空格的事情（除非您的目录名称中有空格，在这种情况下应该引用它们）。此外，它们需要用冒号分隔。因此，您正在寻找类似的东西：

```
PATH=/bin
PATH=/bin:/sbin
PATH="/bin:/sbin:/directory with spaces in it:$HOME/bin" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T12:28:33.550

该`export`函数只会更改当前终端会话的变量。

如果您想永久更改它，请写下您的`PATH`内心。`~/.bash_profile`

要使此修改生效，您必须关闭当前终端并重新打开它。

# java - Java中套接字的有效使用

> ID：12988395
> 
> 赞同：2
> 
> 时间：2012-10-20T12:24:30.080
> 
> 标签：java, sockets, signals

我有一个应用程序，我必须在两个实体之间发送信号和数据。哪种方式是最佳实践，为什么？

1.  打开4个socket，2个用于双向信号，2个用于双向数据
2.  为数据和信号打开 2 个套接字
3.  只需打开 1 个套接字并过滤信号和数据

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T12:30:00.133

首先，套接字是全双工的，即您不需要单独的套接字（连接）来进行发送和接收。

其次，如果不深入细节，很难说清楚。然而，了解 HTTP（命令/标头和数据的一个连接）和 FTP（命令和数据的单独连接）的历史似乎 HTTP 设计者做出了更好的选择。两个连接需要维护更多的代码，而且一些防火墙不喜欢在传输大量数据时挂起、空闲的 FTP 命令连接。

因此，选择一个连接，很容易区分信号和数据（标志、标头等）。传入和传出通道也是完全正交的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T12:40:38.247

有一种可能的“中间方式”——使用 JBoss 远程处理或类似的方法在一个真实套接字之上多路复用多个虚拟套接字。这样，您可以在应用程序级别保持数据和控制通道分离，但在操作系统级别仍然只需要一个 TCP 端口（因此最多一个防火墙漏洞）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T12:30:08.857

为什么不能只为所有数据提供 1 个套接字，为所有信号提供 1 个套接字。您可以在从同一个套接字读取来自远程实体的信号的同时向远程实体发送信号。这有点像 FTP（非被动）的工作方式，您有一个控制连接，然后一个用于实际数据传输。

拥有 4 个套接字似乎有点矫枉过正，但我​​不知道信号或数据的上下文。

如果您不介意更多代码来解码网络通信，您绝对可以在一个套接字中完成所有操作。如果你愿意的话，它需要更多地考虑实际的通信，一个更好的“协议”。2 插座和 1 插座型号都很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T18:30:11.677

另一种方式：使用专门为[实时应用程序构建的中间件，如 0MQ](http://www.zeromq.org/bindings%3ajava)。

实例化 ØMQ：

```
Jzmq obj = new Jzmq (hostname); 
```

其中 hostname 是运行 zmq_server 的机器的名称或 IP 地址。

要创建连线，可以使用 createExchange、createQueue 和 bind 函数。有关接线机制如何工作的详细说明，请查看此处。

```
int eid = obj.createExchange ("E", Jzmq.SCOPE_GLOBAL, "10.0.0.1:5555");
obj.createQueue ("Q", Jzmq.SCOPE_GLOBAL, "10.0.0.1:5556");
obj.bind ("E", "Q"); 
```

发送消息非常简单。消息以字节数组的形式提供：

```
byte msg [] = {1, 2, 3, 4, 5, 6};
obj.send (eid, msg); 
```

接收消息就更简单了：

```
byte [] msg = obj.receive (); 
```

[此处提供](http://www.zeromq.org/deleted%3awhitepapers%3ajava)完整样本。

# php - 我可以使用 PHP 将页面限制在一组 IP 上吗？

> ID：12988408
> 
> 赞同：0
> 
> 时间：2012-10-20T12:26:15.317
> 
> 标签：php, security, .htaccess, ip

我有一个包含管理面板的文件夹 - 脚本上没有密码或会话管理。URL 也很复杂。在制作管理员登录系统之前节省时间。我可以通过 . `htaccess`或者我应该制作一个 PHP 包含它检查 IP 的数组列表，然后只执行`die()`或重定向`Header()`到外部源？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T12:30:58.217

使用`.htaccess`肯定会更容易，因为您不必为目录中可能存在的任何非 php 文件编写包装器。

您将首先`Deny from all`然后使用`Allow from ip.ip.ip.ip`以允许某个 ip 获得访问权限，根据需要重复步骤 #2 多次。

```
Order deny, allow
Deny from all

Allow from 127.0.0.1
Allow from 192.168.1.13 
```

* * *

使用 PHP，您可以检查是否`$_SERVER['REMOTE_ADDR']`在您的有效 ips 数组中，如果是，则授予用户访问权限...否则；停止！

```
if (in_array ($_SERVER['REMOTE_ADDR'], array ('127.0.0.1', '192.168.1.13')) == false) {
  die ('restricted access');
} 
```

^(使用我的黑莓编写和编辑的帖子，对于任何小错误（包括格式）抱歉)

# firefox - 测试后黄瓜水火狐没有关闭

> ID：12988419
> 
> 赞同：0
> 
> 时间：2012-10-20T12:27:32.010
> 
> 标签：firefox, cucumber, bdd, watir

我刚刚开始使用 cucumber 和 watir 进行一些站点测试，一切正常，但测试后 firefox 并没有关闭。我收到此错误：

```
!!! error running onStopped callback: TypeError: callback is not a function
*** LOG addons.xpi: shutdown
!!! error running onStopped callback: TypeError: callback is not a function
*** LOG addons.xpi: shutdown
!!! error running onStopped callback: TypeError: callback is not a function
*** LOG addons.xpi: shutdown 
```

任何想法，任何人？

抱歉 - 忘记了示例代码！

```
require 'watir-webdriver'

Before do
  $browser = Watir::Browser.new
end

After do
  $browser.close
end

Given ... (etc. - all the step defs here) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T13:48:25.807

`$browser`为什么在`Before`和`After`块中使用全局变量？尝试改用实例变量`@browser`。（确保更改所有出现的`$browser`with `@browser`。）

# c++ - 以特定顺序运行八个线程直到终止

> ID：12988426
> 
> 赞同：-2
> 
> 时间：2012-10-20T12:28:08.027
> 
> 标签：c++, multithreading

我有一个核心 2 双核处理器。

我想创建并运行八个线程（它们之间没有共享数据），以便在任何给定时间所有八个线程都将运行一次，其中线程 1 和线程 2 将同时运行，如果线程 1 和线程 2 可以' t 由处理器同时运行我希望线程 1 具有优先级，以便线程 1 将在线程 2 之前运行。

同样，线程 3 和 4 可以同时运行，但如果线程 3 和线程 4 不能同时运行，我希望线程 3 在线程 4 之前执行，而不是在线程 1 和 2 之前执行，而不是在线程 5 和 6 以及线程 7 之后执行线程 8。

线程 5 和线程 6、线程 7 和线程 8 相同。

在所有 8 个线程完成其任务后，8 个线程将按上述给定顺序一次又一次地运行，直到终止。

如何在 Windows 7 上使用 c++ 和 Visual Studio 2008 实现这一点？

是否可以用 c++ 来实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T12:35:38.043

我不认为你可以控制线程的执行顺序。创建线程后，由操作系统为您进行调度。您所能做的就是等待线程在您的父线程中完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T12:35:54.813

什么？您想使用运行线程 1，然后使用线程 2 ...

不要使用线程。使用 while 循环并调用：

```
While(1)
{
   foo1();
   foo2();
   foo3();
   .
   .
   .
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T13:22:11.847

好的，经过大量争论才能真正解决您的问题，这是我要尝试回答的版本：

> 创建线程后，不能保证任何两个线程都会在双核处理器上同时运行。因此，如果两个线程不同时运行，我希望优先考虑线程 1（首先创建）将首先运行，线程 2（第二个创建）将始终在线程 1 之后运行。

幸运的是，答案*相当*简单。您的程序不知道何时运行哪些线程。操作系统不会告诉您何时启动和停止线程，因此您不能编写任何类型的“线程 1 是否正在运行？如果没有，我将暂停并让它运行”检查。

但是您可以将线程设置为具有不同的优先级。这向操作系统指示它应该安排哪些执行。给你的线程一个逐渐降低的优先级（所以线程 1 具有高优先级，线程 2 低一级，依此类推），你会做出一些近似于你想要的东西。在 Windows 上，这实际上可能效果很好，因为 Windows 总是尝试选择优先级最高的可用线程/进程。Linux 将尝试确保所有线程都有*一些*执行时间，但只会给更高优先级的线程*更多。*

当然，像这样搞乱优先级也会影响您的程序相对于 PC 上运行的其他所有内容的调度方式。你真的试图以错误的方式解决这个问题，更明智的解决方案是简单地找到另一个并行化的方案。

# c# - 将 BitmapImage 设置为 null 时未释放内存

> ID：12988427
> 
> 赞同：2
> 
> 时间：2012-10-20T12:28:11.730
> 
> 标签：c#, windows-8, microsoft-metro, windows-runtime

我有一个对象集合，每个对象都包含一个 BitmapImage。我将此集合绑定到 FlipView。当用户在 FlipView 中翻页时，所选对象的 BitmapInmage 从 ApplicationData 加载，我将前一个对象的 BitmapImage 设置为 null 以释放内存。问题是，内存永远不会被释放，并且应用程序在翻转一段时间后崩溃。当我查看集合时，只有实际项目设置了 BitmapImage，所有其他项目都将其设置为 null。那么如何缓解记忆呢？

我加载图像的方式：

```
StorageFile s = await ApplicationData.Current.LocalFolder.GetFileAsync(localFilename);
BitmapImage bitmapImage = new BitmapImage();
using (var stream = await s.OpenAsync(FileAccessMode.Read))
{                    
    bitmapImage.SetSource(stream);
}                
return bitmapImage; 
```

**编辑：**我认为问题可能是我加载图像的方式，我猜文件流没有被释放

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T21:20:47.753

我在 Windows Phone 7 应用程序中遇到了类似的问题。

对我有用的一个技巧是从父元素中删除图像。

```
grid1.Children.Remove(image1);
image1 = null; 
```

不过，我不确定这是否会对您的情况有所帮助。

有关此问题的更多详细信息，请参阅我的[博客文章](http://blog.xamlwonderland.com/2011/01/17/images-and-memory-leaks-in-windows-phone-7/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-27T01:28:04.733

对我有用的是在将对象本身设置为空之前将 UriSource 属性设置为空。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T12:40:54.030

如果这些图像正在使用大量内存，那么强制垃圾收集器释放内存可能是有意义的。仅当您删除了对内存的所有强引用时，这才有效。如果您在强制垃圾收集方面过于激进，您可能会遇到性能问题，因此您需要对此进行试验。例如，您可能希望仅在“取消”一些图像后才强制收集。

您可以使用 GC.Collect 方法强制进行垃圾收集。

[http://msdn.microsoft.com/en-us/library/bb384155.aspx](http://msdn.microsoft.com/en-us/library/bb384155.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-19T11:58:03.330

如果您在 UWP 中使用 x:Bindings，您可能会发现类似的问题，但是，如果您在清除类后运行 Bindings.Update()（假设您的图像在一个类中，保存在一个可观察的集合中），首先运行.Clear() 在那个 ObservableCollection 上，然后是 Bindings.Update()，然后你会发现你将重新获得可用空间。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-20T12:42:54.997

在 .net 中，将某些内容设置为 null*永远不会*执行任何操作 - GC 是不相关的，并且会在它选择时发生。相反，请检查图像是否实现了 IDisposable：如果是，则应在完成后调用 Dispose()。护城河通常，您会通过“使用”语句自动执行此操作：

```
using(var img = GetImage()) {
    // todo: some stuff involving img
} 
```

# php - 简单的 PHP 语法 - 如何让 vSlider 名称使用 post-ID

> ID：12988428
> 
> 赞同：0
> 
> 时间：2012-10-20T12:28:12.963
> 
> 标签：php

vSlider - 在 WordPress 中，我使用常见问题解答中提供的功能：

`<?php if(function_exists('vslider')){ vslider('vslider_options'); } ?>`

我正在努力做到这一点。所以它知道以 post-ID 作为它的名字。但它不起作用。

`<?php if(function_exists('vslider')){ vslider('<?php the_ID(); ?>'); } ?>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T12:30:36.460

您不能嵌套`<?php ?>`在已经打开的`<?php ?>`. 这是不受支持且在语法上无效的。只需在适当的位置调用该函数。

显然，`the_ID()`是那些在不返回其值的情况下打印到输出缓冲区的 Wordpress 函数之一。要在函数中有用的地方获取*返回*的 id ，请[`get_the_ID()`](http://codex.wordpress.org/Function_Reference/get_the_ID)改用。

```
<?php if(function_exists('vslider')){ vslider(get_the_ID()); } ?> 
```

当表示为正确缩进的代码时，语法问题变得更加明显。

```
<?php 
if (function_exists('vslider')){
  vslider(get_the_ID());
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T12:31:18.713

是的，您可以通过删除 php 标签来做到这一点

```
 <?php if(function_exists('vslider')){ vslider('<?php the_ID(); ?>'); } ?>

should be 

<?php if(function_exists('vslider')){ vslider(the_ID()); } ?> 
```

你的`the_ID()`函数应该在最后返回一个字符串

# php - 需要在包订阅的日期中添加周、日和月

> ID：12988433
> 
> 赞同：1
> 
> 时间：2012-10-20T12:29:01.587
> 
> 标签：php, datetime

我目前正在为我当前的项目开发包管理器，我需要添加包订阅日期和包到期日期。

我正在使用php函数，`date("Y-m-d H:i:s")`即

```
$package_subscription_start_date = date("Y-m-d H:i:s"); 
```

现在这是我的要求：我需要有 1 天、2 天、5 天、1 周、4 周、12 周、1 个月、6 个月、9 个月、1 年、2 年、5 年和 10 年的包裹年。

我怎么可能添加这些值并计算插入 mysql 的包到期日期，例如

```
$package_expiry_date = date("Y-m-d H:i:s") + 1 day;
$package_expiry_date = date("Y-m-d H:i:s") + 5 days;
$package_expiry_date = date("Y-m-d H:i:s") + 1 week;
$package_expiry_date = date("Y-m-d H:i:s") + 4 weeks;
$package_expiry_date = date("Y-m-d H:i:s") + 2 months;

$package_expiry_date = date("Y-m-d H:i:s") + 2 years; 
```

最后，我需要处理其他日期问题，例如有效日期和闰年等。我还需要在 php 级别完成此操作，而不是使用 mysql / sql 查询。

我将不胜感激这方面的任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T12:53:53.187

就像是

```
$date=date('Y-m-d H:i:s', strtotime('+1 day'));
$date=date('Y-m-d H:i:s', strtotime('+5 days'));
$date=date('Y-m-d H:i:s', strtotime('+1 week'));
$date=date('Y-m-d H:i:s', strtotime('+4 weeks'));
$date=date('Y-m-d H:i:s', strtotime('+2 months'));
$date=date('Y-m-d H:i:s', strtotime('+2 years')); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-20T12:57:26.463

您是否尝试过php 中的[strtotime()命令？](http://php.net/manual/en/function.strtotime.php)

```
echo $expires = strtotime(date("Y-m-d H:i:s")." + 1 day");
echo date("Y-m-d H:i:s", $expires); 
```

给你的输出

```
135082420020
12-10-21 08:56:40 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T12:34:31.147

看看 php [DateTime](http://www.php.net/manual/en/class.datetime.php)对象。

例如在日期上添加时间：

```
//Get the current date
$date = new DateTime();

//Add 1 day
$date->modify('+1 Day');

//Output in Y-m-d format
echo $date->format('Y-m-d'); 
```

它还有很多其他有用的功能

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-04T10:49:22.730

```
<?php
    echo $date = date("Y-m-d");// current da

    $date1 = strtotime(date("Y-m-d", strtotime($date)) . " +1 day");
    echo date("Y-m-d", $date1);
    echo date("Y-m-d", $date1);

    $date2 = strtotime(date("Y-m-d", strtotime($date)) . " +1 week");
    echo date("Y-m-d", $date2);

    $date3 = strtotime(date("Y-m-d", strtotime($date)) . " +2 week");
    echo date("Y-m-d", $date3);

    $date4 = strtotime(date("Y-m-d", strtotime($date)) . " +1 month");
    echo date("Y-m-d", $date4);

    $date5 = strtotime(date("Y-m-d", strtotime($date)) . " +1 year");
    echo date("Y-m-d", $date5);
?> 
```

# asp.net - 我可以在 c#.net 中使用完整的 ckeditor

> ID：12988449
> 
> 赞同：-3
> 
> 时间：2012-10-20T12:31:26.803
> 
> 标签：asp.net, comparison, version, ckeditor

**在ckeditor 下载网站：** ASP.NET Control 轻松集成CKEditor 到ASP.NET 页面CKEditor.NET 3.6.4。这意味着我可以在不使用 javascript 或 jQuery 的情况下在 asp.net 中完全使用 CKEditor 吗？

如果不可能，CKEditor 3.6.4 与 CKEditor 3.6.5 有什么区别？任何工具都可以这样使用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T12:43:05.840

ckeditor 是一个客户端编辑器，它与 javascript 一起工作，是用 javascript 编写的。

后面的代码仅用于将编辑器的内容保存回数据库。

所以编辑器只能使用 javascript。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T12:34:02.583

不，没有javascript，你不能使用它。

```
 <CKEditor:CKEditorControl ID="CKEditor1" runat="server">
  </CKEditor:CKEditorControl> 
```

查看此链接：- [http://ckeditor.com/blog/CKEditor.NET_released](http://ckeditor.com/blog/CKEditor.NET_released)

# php - jquery登录和刷新

> ID：12988451
> 
> 赞同：0
> 
> 时间：2012-10-20T12:31:43.920
> 
> 标签：php, jquery-mobile

我在 jquery-mobile 中有一个主页，其中包含以下代码

```
<?php
if(isset($_SESSION['signed_in']))
{
    if($_SESSION['signed_in']==true)
    {    
        echo '<a href="signout.php" data-role="button">Signout </a>';
    }
}
else
{
    echo '<a href="signin.php" data-role="button">Signin </a>';
}
?> 
```

在服务器上检查用户是否登录（显然！）

但问题是**登录后，当用户进入主页时，会显示“登录”选项。只有当用户手动刷新页面时，才会显示“退出”选项**。

那么我该如何解决这个错误呢？如何让 jquery 始终从服务器加载页面，而不是将其存储在某个缓存或任何东西中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T13:18:56.383

在请求成功的情况下，让 jQuery 添加登录或注销按钮。
使用[append](http://api.jquery.com/append/)将 html 插入页面。如果页面被刷新，它将使页面看起来。

# java - Java反向/反向引用

> ID：12988456
> 
> 赞同：3
> 
> 时间：2012-10-20T12:32:26.087
> 
> 标签：java

我试图将一个类实例传递给另一个类的构造函数，反之亦然。我想这样做：

```
static Map map = new Map(hero);
static Hero hero = new Hero(map); 
```

我在我的 Game 类中运行这段代码。如何正确实现上述代码？有没有更好的方法来解决它？

**编辑：**

**我认为我真正想要的是延迟加载，例如如果 map 为 null 则进行；否则，不要成功。我如何在 Java 中做到这一点？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T12:36:03.447

您可能会通过两阶段初始化来完成。

例如

```
static Map map = new Map();
static Hero hero = new Hero();

map.setHero(hero);
hero.setMap(map); 
```

*如果在setMap / setHero*之前调用它们，则向相关函数添加警卫以引发“未完全初始化”异常

 ** * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-20T12:41:21.163

好吧，上面的语法不会编译，你会得到一个`illegal forward reference`编译错误。

您**可以**做的是构造两个对象，然后设置引用，例如

```
static Map map = new Map();
static Hero hero = new Hero();
// and then ...
map.hero(hero);
hero.map(map); 
```

当然，您命名设置器的方式取决于您，如果它们的行为类似于真正的 Java Bean 设置器，您可能应该坚持该命名约定（即`setX()`和`getX()`）。如果`Map`\`Hero`类在使用该 setter 之前不可用，那么可能是[Builder Design Pattern](http://en.wikipedia.org/wiki/Builder_pattern)的情况。

另一种选择是使用一些依赖注入库，它会在幕后为您处理上述事情。

第三种选择是使用嵌套类（如果它适合您的设计），例如

```
class Map {
    class Hero { ... }
} 
```

这样每个英雄都`Map`可以通过`Map.this`

HTH，
榆树

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-20T12:37:17.653

你所拥有的是`cyclic/circular dependency`。因此，您只需要在一个对象内初始化对象。最好的地方是`Constructor`一个对象。

```
class Map {
    Hero hero = null;

    public Map() {
        hero = new Hero(this);
    }

    public Hero getHero() {
        return hero;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T12:36:20.150

我强烈建议不要使用循环引用。
您可能会遇到序列化问题（例如，如果您想通过网络发送地图并将其存储在文件中。
我建议您为 MAP 和 Hero 对象设置一个唯一 ID。
并且您持有例如 Hero 一个“parentId”到它的 Map。
将人和英雄对象存储在一些缓存中（可能是基于 HashMap 的单例），这将允许您通过 id 检索对象，这样，给定一个英雄，您将能够很容易获得它的地图。
如果您仍然坚持循环引用，请参阅@logical chimp提供的答案

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T21:19:04.187

基本上，我这样做是为了让我永远不会在任何其他类中创建 World 类，并且我的 World 类会在需要时实例化其他类。

谢谢大家的帮助。*

# javascript - 数组中重复条目的自定义验证规则问题

> ID：12988464
> 
> 赞同：0
> 
> 时间：2012-10-20T12:33:09.427
> 
> 标签：javascript, jquery, validation, knockout.js, knockout-validation

我正在尝试使用 knockout.validation 插件。我想创建一个自定义验证规则，用于在输入数组时检查重复的数组项。我试过这个：

```
ko.validation.rules['duplicate'] = {
    validator: function (val1, val2) {

    },
    message: 'The value is already exist'
};

ko.validation.registerExtenders(); 
```

这`val1`是数组，`val2`是使用extend方法传入的参数。问题是，我不知道如何从自定义验证函数访问数组中当前输入的项目。请帮帮我 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T16:25:03.453

如果你把问题转过来，效果会更好。将验证添加到您尝试添加的可观察文本（或可观察对象，如果涉及多个字段）。然后当你触发添加时，检查 observable 是否有效。如果有效，则将其添加到数组中。

[http://jsfiddle.net/jearles/XY9XH/](http://jsfiddle.net/jearles/XY9XH/)

--

```
<span>New Item: <input data-bind="value:newItem" /> <button data-bind="click: addItem">Add</button></span>
<div data-bind="foreach: items">
    <span data-bind="text: $data"></span>
</div>​ 
```

--

```
ko.validation.rules['duplicate'] = {
    validator: function (item, array) {
        return array.indexOf(item) == -1;
    },
    message: 'Value already exists!'
};
ko.validation.registerExtenders();

var ViewModel = function() {
    var self = this;
    self.items = ko.observableArray();
    self.newItem = ko.observable().extend({duplicate: self.items});
    self.addItem = function() {
        if (self.newItem().length > 0 && self.newItem.isValid()) {
           self.items.push(self.newItem());
           self.newItem(null);
        }
    };
}

ko.applyBindings(new ViewModel()); 
```

​</p>

# r - 哪些字符串在 R 的其他数据框中不重复？

> ID：12988472
> 
> 赞同：1
> 
> 时间：2012-10-20T12:34:11.347
> 
> 标签：r

我有两个数据框，看起来有点像：

```
Source_name <- c("name1", "name2", "name3", "name4", "name5")
Target_name <- c("name10", "name11", "name12", "name13", "name14")
values <- c("asd", "213", "kahsd", "a9u", "oau92")
values2 <- c("asdd", "oau892", "kahsd", "213", "213")
dat <- cbind(Source_name, values)
daf <- cbind(Target_name, values2)

dat
Source_name     values 
[1,] "name1"     "asd"  
[2,] "name2"     "213"  
[3,] "name3"     "kahsd"
[4,] "name4"     "a9u"  
[5,] "name5"     "oau92"

daf
Target_name     values2  
[1,] "name10"    "asdd"   
[2,] "name11"    "oau892"  
[3,] "name12"    "kahsd"
[4,] "name13"    "213"   
[5,] "name14"    "213" 
```

每个值在 dat 中只出现一次，但在 daf 中可能出现多次（或根本不出现）。根据desired_output data.frame，我想在dat中记录那些在daf中最多出现一次的值。

```
unique_values <- c( "asd", "kahsd", "a9u", "oau92")
Source_name <- c( "name1", "name3", "name4", "name5")
Target_name <- c( "NA", "name12", "NA", "NA")
desired_output <- data.frame(cbind(unique_values, Source_name, Target_name))

desired_output
     unique_values    Source_name Target_name   
 1         asd         name1       
 3         kahsd       name3       name12   
 2         a9u         name4    
 4         oau92       name5 
```

我想有一种简单的方法可以使用 apply 或其他东西来做到这一点，但我很难过。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T12:58:09.057

你可以合并你的两个data.frames：

```
dd <- merge(dat, daf, all.x = TRUE, by.x = "values", by.y = "values2")
dd
#   values Source_name Target_name
# 1    213       name2      name13
# 2    213       name2      name14
# 3    a9u       name4        <NA>
# 4    asd       name1        <NA>
# 5  kahsd       name3      name12
# 6  oau92       name5        <NA> 
```

然后删除值显示两次或更多的行：

```
dd[unlist(Filter(function(x)length(x)<2, split(seq_len(nrow(dd)), dd$values))), ]
#   values Source_name Target_name
# 3    a9u       name4        <NA>
# 4    asd       name1        <NA>
# 5  kahsd       name3      name12
# 6  oau92       name5        <NA> 
```

或者正如@hadley 在评论中指出的那样（谢谢！）：

```
dd[ave(dd$values, dd$values, FUN = length) < 2, ] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T13:15:39.320

不是最优雅的解决方案：

```
dat <- as.data.frame(dat,stringsAsFactors=FALSE)
daf <- as.data.frame(daf,stringsAsFactors=FALSE)

fun <- function(x) {
  n <- nrow(dat[daf[,2] == dat[Source_name==x,2],])
  if (n == 0) res <- cbind(dat[Source_name==x,],"")
  if (n == 1) res <- cbind(dat[Source_name==x,],daf[daf[,2]==dat[Source_name==x,2],1])
  if (n > 1)  res <- data.frame(character(0),character(0),character(0))
  names(res) <- c("Source_name","unique_values","Target_name")
  res[,c(2,1,3)]
}

do.call(rbind,lapply(dat[,1],fun))

  unique_values Source_name Target_name
1           asd       name1            
2         kahsd       name3      name12
3           a9u       name4            
4         oau92       name5 
```

# c# - 为什么 C# LINQ 表达式必须以 Select 或 Group By Clause 结尾，而 VB.Net 中没有这样的限制

> ID：12988474
> 
> 赞同：12
> 
> 时间：2012-10-20T12:34:26.790
> 
> 标签：c#, vb.net, linq

由于我的标题是不言自明的，我知道如何纠正它，但为什么会这样呢？

**设想**

我写了一个 VB.Net 代码

```
Dim list As List(Of String) = New List(Of String)

//Code to populate list

Dim wherelinq As IEnumerable(Of String) = From s In list Where s.StartsWith("A") 
```

这工作正常，没有错误

但 C# 中的相同逻辑失败

```
List<string> list = new List<string>();

//Code to populate list

IEnumerable<string> wherelinq = from s in list where s.StartsWith("A"); 
```

这给出了错误

![在此处输入图像描述](../Images/2e5d9cc50eee8c84d09c9efd8281cebe.png)

为什么在 C# 中有这个限制？我缺少什么具体的东西吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T12:42:25.083

VB.NET 和 C# 是不同的语言，因此 LINQ 查询语法自然也不同：C# 需要`select s`，而 VB.NET 不需要。

Microsoft 的[文档](http://msdn.microsoft.com/en-us/library/bb384065.aspx)要求 C# 中的查询语法查询必须以`select`or结尾`group`：

> 查询表达式必须以 from 子句开头，并且必须以 select 或 group 子句结尾。在第一个 from 子句和最后一个 select 或 group 子句之间，它可以包含一个或多个这些可选子句：where、orderby、join、let 甚至附加 from 子句。您还可以使用 into 关键字来启用连接或组子句的结果作为同一查询表达式中其他查询子句的源。

有关语法的详细信息，请参阅 C# 语言规范，第 7.16 节。

```
var wherelinq = from s in list where s.StartsWith("A") select s; 
```

`select`如果使用函数语法，则不必添加：

```
var wherelinq = list.Where(s => s.StartsWith("A")); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-20T23:30:14.903

这实际上称为退化选择。当您使用查询编译成的 lambda 语法时，您不需要它。为什么需要这个限制，我真的不知道。这些可能是一些与编译器相关的限制，实际上不必存在。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-20T14:04:39.173

一个原因是，如果没有该`select`条款，就会有歧义。在以下示例中，编译器如何知道`where false`过滤器是狗还是骨头？

```
from dog in dogs
let gifts = from bone in bones
            where false 
```

但是，您的一半问题仍未得到解答：VB 如何避免这种歧义？

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2016-04-14T09:44:04.127

尽管在退化的选择情况下，`Where()`并且`Where().Select()`应该在逻辑上返回等效的集合，从而使`Select()`子句在表面上看起来是多余的，但返回类型可能不同。可能的返回类型`Where()`不是用于最终用途，而是用于与其他查询操作（如`Select()`. 也就是说，`Where()`除了附加`Select()`操作之外，您可能不会对 的返回值做任何有用的事情。通过要求以`select`or结尾`group`，C# 对 LINQ 提供程序的要求更少，因为它不需要返回值`Where()`适合最终使用，这允许`Where()`.

# google-chrome - 在 ubuntu 64 位中安装 google chrome 时出错

> ID：12988483
> 
> 赞同：0
> 
> 时间：2012-10-20T12:35:04.703
> 
> 标签：google-chrome

我是 ubuntu 的新手。我尝试在 ubuntu 64 位上安装谷歌浏览器。现在我在安装它时遇到错误。使用带有 google-chrome-stable_current_i386.deb 的 ubuntu 软件中心安装它时出错。

```
google-chrome-stable:i386: Depends: libgcc1 (>= 1:4.1.1) but 1:4.6.3-1ubuntu5 is installed
                       Depends: libudev0 (>= 147) but 175-0ubuntu9.1 is installed
                       Depends: libxcomposite1 (>= 1:0.3-1) but 1:0.4.3-2build1 is installed
                       Depends: libxfixes3 (>= 1:4.0.1) but 1:5.0-4ubuntu4 is installed
                       Depends: zlib1g (>= 1:1.2.3.3.dfsg) but 1:1.2.3.4.dfsg-3ubuntu4 is installed 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T12:35:04.703

我已经找到了解决方案。写吧

> apt-get 升级

完成此升级后，只需重新启动系统。重新启动 google chrome 并成功安装 debian 文件后。

# string - 构造生成给定语言的正则表达式

> ID：12988486
> 
> 赞同：0
> 
> 时间：2012-10-20T12:35:22.657
> 
> 标签：string, expression, computation

这是我教科书“ `Introduction to theory of Computation`”中的一个示例ginen。鉴于字母表`∑ as{0,1}`，

```
{w|every 0 in w is followed by atleast one 1}} 
```

它的正则表达式显示为`(01+)*. 1+`仅表示 1 的单个实例。现在我理解的是，这`(01+)*`将意味着字符串，例如`0101010101010101....`如果我有一个字符串`11111101 or 011111111`或只有 1 这些字符串确实满足给定的条件。但是正则表达式`(01+)*`不会生成它们。

```
Secondly for `{w|w starts and ends with same symbol}` the expression is given as `0∑*0 U 1∑*1 U 0 U 1.` 
```

据我所知，两件事的结合意味着要么是第一个，要么是第二个，或者两者**兼而有之**。如果我取一个字符串 01110`0∑*0`和另一个字符串`10001 1∑*1`，然后取这两个`0111010001`的并集，则联合字符串`DOESNOT`以相同的符号开始和结束。这是否意味着 union 不能将两者结合或表达式不正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T04:53:38.537

`1+`表示“一个或多个 1”。因此，它会生成 1、11、111 等。所以正则表达式`(01+)*`实际上生成的字符串是“每个 0 后跟一个或多个 1，并且字符串中的第一个符号不是 1”。

获取`{w|every 0 in w is followed by atleast one 1}`正则表达式会略有不同。这将是`1*(01+)*`

在第二个问题中，您采取的是串联。`01110`与`10001`is连接`0111010001`。两个集合的并集是包含两个集合的所有元素的集合

# mysql - 根据另一个表的值对表的查询进行排序

> ID：12988488
> 
> 赞同：3
> 
> 时间：2012-10-20T12:35:37.237
> 
> 标签：mysql, sql, sql-order-by, jointable

这是场景：
我想根据 table2 中的年龄对 table1 中的名称进行排序。什么是 SQL 查询？

表格1

```
ID | Name
---|-----
1  | Jack
2  | Tony
3  | John 
```

这是表2

```
ID | Age
---|-----
1  | 17
2  | 18
3  | 15 
```

这两个表都与`ID`字段相关。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-20T12:39:22.613

您需要加入两个表，然后您可以订购`table2.Age`

```
SELECT t1.* 
FROM   table1 t1 
       JOIN Table2 t2 
           ON t1.ID = t2.ID
ORDER BY Age 
```

[看到这个 SQLFiddle](http://sqlfiddle.com/#!9/8284a3/1)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-20T12:37:53.377

```
select t1.id, t1.name, t2.age 
from table1 t1 join table2 t2 on t1.id=t2.id 
order by t2.age 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T12:39:53.540

假设 ID 字段是两个表的 JOIN 列并考虑到列的用途，理想情况下它们应该在单个表中，因为它们具有一一对应关系。

如果您的示例不适合您的问题，那么您将编写一个查询来 JOIN 两个表，仅选择感兴趣的列（从一个或两个表中）并从适当的表中对列进行排序。

# python - 拥有列表列表 - 如何获取包含项目的列表的索引？

> ID：12988504
> 
> 赞同：1
> 
> 时间：2012-10-20T12:37:52.373
> 
> 标签：python, list

```
a = [[1,2,3],[4,5,6]] 
```

我想得到和得到和。`0`_ _ _`1``2``3``1``4``5``6`

当然我可以做这样的事情：

```
def get_index(my_list, my_item):
    for i, j in enumerate(my_list):
        if my_item in j:
            return i
    raise ValueError("Item not in any list") 
```

有更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T12:51:17.507

**更新答案：**

由于 OP zenply 的输入，这是我原始答案的改进版本。

```
b = [[1,2,3],[4,5,6],[1,4,5], [4,7,8]]

def create_dict_2(a):
    my_dict = {}
    for index, sublist in enumerate(a):
        for ele in sublist:
            if not ele in my_dict:
                my_dict[ele] = index
    return my_dict 
```

结果：

```
>>> my_dict = create_dict(b)
>>> my_dict[4]
1
>>> my_dict[5]
1
>>> my_dict[1]
0
>>> my_dict[7]
3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T12:55:12.660

不确定这是否更具可读性，但它确实可以处理其中包含多个子列表的情况：

```
def get_index(my_list, my_item):
    indices = [i for i, sublist in enumerate(my_list) if my_item in sublist]
    if len(indices) == 1:
        return indices[0]
    raise ValueError("Item not in any list or in multiple lists") 
```

# android - Android 应用渐变背景

> ID：12988505
> 
> 赞同：0
> 
> 时间：2012-10-20T12:37:59.040
> 
> 标签：android, android-layout, mono, xamarin.android, monodevelop

我正在使用 MonoDevelop 开发一个 Android 应用程序，我有一个包含 12 个 48x48 图像按钮的表格。该表在 android 屏幕中居中。我不知道如何在桌子后面放置渐变背景或任何背景。

是否可以在表格后面放置一个视图，或者我应该使用表格以外的其他控件......也许是 GridView？

谁能指出我正确的方向？

谢谢您的帮助！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T15:45:56.123

您是否在表格布局中尝试过以下其中一项？

XML:

```
android:background="@drawable/cool_gradient" 
```

在代码中：

```
tableLayout.SetBackgroundResource(Resource.Drawable.cool_gradient); 
```

其中“cool_gradient”是一个 .xml 文件，您的渐变位于“Resources/Drawable”文件夹中。例子：

```
<?xml version="1.0" encoding="utf-8" ?> 
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <gradient 
        android:startColor="#E8E8E8" 
        android:endColor="#BEBEBE"
        android:angle="270"
     />
</shape> 
```

# javascript - AngularJS 无法加载模块

> ID：12988506
> 
> 赞同：15
> 
> 时间：2012-10-20T12:38:05.970
> 
> 标签：javascript, html, angularjs

编辑：这只发生在 IE 上（在 IE10 上测试）

我有一个最初加载良好的应用程序，但是，当刷新时它会出现此错误：

> SCRIPT5022：没有模块：myAppModule

myAppModule 是在 app.js 中定义的 Angular 模块，它在加载 angular.js 后加载

```
angular.module('myAppModule', []); 
```

并通过以下方式自动引导：

```
<html ng-app="myAppModule"> 
```

脚本加载如下（无 AMD 加载程序）：

```
<script>window.jQuery ||
    document.write('<script src="js/vendor/jquery-1.8.0.min.js"></script>')</script>
<script>window.angular ||
    document.write('<script src="js/vendor/angular-1.0.2.min.js"></script>')</script>

<script src="js/app.js"></script>
<script src="js/controller.js"></script> 
```

我认为首先加载 angularjs 并自动引导应用程序，但 app.js 尚未加载

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-20T14:17:42.037

好的，我不知道为什么自动引导失败，但是如果我手动引导应用程序，它可以正常工作。

例如

```
<html>

...

<script src="js/app.js"></script>
<script src="js/controller.js"></script>
<script>angular.bootstrap(document, ['myAppModule']);</script> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-06-08T21:25:49.710

当我发现自己做错了什么时，我觉得自己像个白痴，但如果你像我一样，那么首先要检查其他一些事情：

1.  确保首先加载子模块。就我而言，我必须确保子模块在物理上位于我的父模块之前。您可以通过在每个模块初始化行上放置一个断点来确认这一点。
2.  即使有正确的物理订单，执行订单仍然关闭。我的一个模块被包裹在一个自动执行的函数中，而另一个没有。多哈。
3.  子函数中存在错误，实际上导致此错误在控制台中显示两次。这是因为我使用这样的语法：

    ```
    var mod = angular.module("blah", []);
    mod.filter("filterName", function(){ ... }); 
    ```

    有一次我在启动模块时忘记了空括号，所以该行看起来像这样并抛出了这个错误：

    ```
    var mod = angular.module("blah");  // <-- wrong 
    ```

回顾一下，确保子模块首先执行并且没有错误。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-19T14:58:37.027

我遇到了同样的问题，只在 IE9 中。较低版本的 IE 实际上运行良好，较新的浏览器也是如此。

手动引导解决了这个问题，但是对于属于我的模块的过滤器抛出了一个错误“Unknown Provider”。请注意，过滤器似乎仍按预期运行。

最后，解决我的问题并完全停止抛出错误的解决方案是简单地将模块文件重命名为与模块相同。

因此，如果我的模块的名称是，`myAppModule`那么文件名应该是`myAppModule.js`而不是`my_app_module.js`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-26T18:22:10.393

```
app.config(['$stateProvider', ($stateProvider) => {
  $stateProvider.state('login', {
    url: '/login',
    templateUrl: 'partials/login.html'
  }).state('dashboard', {
    url: '/dashboard',
    templateUrl: 'partials/dashboard.html'
  })
}]) 
```

就我而言，Internet Explorer 不喜欢箭头功能。将这些更改为 function(){} 表示法解决了这个问题：

```
app.config(['$stateProvider', function ($stateProvider) {
  $stateProvider.state('login', {
    url: '/login',
    templateUrl: 'partials/login.html'
  }).state('dashboard', {
    url: '/dashboard',
    templateUrl: 'partials/dashboard.html'
  })
}]) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-27T20:38:40.683

顺便说一句，使用 Angular 1.0.6，在 Angular（硬编码脚本标签）之前加载 jQuery 会导致 IE10 抛出“no Module”错误。

我能找到纠正它的唯一选择是手动引导并确保在所有其他子模块引用（如 Barnabas 提到的）之后加载定义模块的 app.js。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-12-21T07:40:36.467

我们只在 IE 中遇到了同样的问题。这是由拼写错误引起的（一定是某些猫踩到了键盘）：

```
<script type=" text/javascript" src="assets/js/app.js"></script> 
```

type-Attribute 值中的前导空格导致了问题。一旦它被删除，该应用程序再次运行良好。

# mysql - 如何查找下一行或上一行或下一行

> ID：12988511
> 
> 赞同：0
> 
> 时间：2012-10-20T12:38:31.617
> 
> 标签：mysql

我有一张包含客户详细信息的表格

```
id,title,first_name,surname 
```

当我使用

```
SELECT * FROM customers ORDER BY surname,first_name,title; 
```

如何在不读取整个表格的情况下根据 id 获取上一行或下一行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T12:44:33.693

下一个：

```
SELECT * FROM customers WHERE id > XYZ ORDER BY id ASC LIMIT 1 
```

以前的：

```
SELECT * FROM customers WHERE id < XYZ ORDER BY id DESC LIMIT 1 
```

其中 XYZ 是您的号码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T12:44:02.927

如果 ID 类型是整数并且`nextID = currentID + 1`. 所以你可以把你的查询写成：

```
SELECT * 
FROM customers 
WHERE id = (currentID + 1) 
ORDER BY surname,first_name,title; 
```

# shell - 获取文件的 25% 行

> ID：12988517
> 
> 赞同：3
> 
> 时间：2012-10-20T12:38:52.380
> 
> 标签：shell

我尝试随机显示 25% 的文件行

这是我的脚本：

```
file=$1
nb_lignes=$(wc -l $file | cut -d " " -f1)
num_lines_to_get=$((25*${nb_lignes}/100)) 
for (( i=0; i < $num_lines_to_get; i++))
do
line=$(head -$((${RANDOM} % $nb_lignes)) $file | tail -1)
echo "$line"
done
fi 
```

我就这样跑

```
./script.sh file 
```

文件是：

```
xxxxxxxx-54.yyyyy
xxxxxxxx-55.yyyyy
xxxxxxxx-60.yyyyy
xxxxxxxx-66.yyyyy 
```

我的问题是如何消除 54 和 55 ，我的意思是除了这两条 54 和 55 行之外，我想要这个列表的 25%，我想在这样的命令中指定它

```
./script.sh file 54 55 
```

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T17:54:20.427

除非您知道有多少行代表 100%，否则不可能计算出 25%，因此您的所有解决方案要么（1）单程并将文件存储在内存中，要么（2）多程以收集行数。我不知道您要处理多长时间的文件，但无论如何我更喜欢第二种选择，所以我会这样回答。

如果您运行的是 Linux，那么您可能拥有大多数工具的 GNU 版本。一种解决方案可能是：

```
#!/bin/sh

linecount=$(awk 'END{printf("%d", NR * 0.25)}' input.txt)
exclude="$@"
egrep -vw "${exclude// /|}" input.txt | shuf -n$linecount 
```

或者：

```
#!/bin/sh

linecount=$(awk 'END{printf("%d", NR * 0.25)}' input.txt)
exclude="$@"
egrep -vw "${exclude// /|}" input.txt | sort -R | head -n $linecount 
```

此解决方案假定“xxxxxx”和“yyyyy”字符串不包含您要跳过的数字的单词分隔版本。如果可能，那么您可能应该向我们提供更多详细信息，例如实际样本数据。

如果您使用的是 FreeBSD 或 OSX，则`sort`没有`-R`选项`shuf`且不包括在内，但您仍然可以完成此操作。您将`jot`在系统中调用一个工具。它可以用来产生一个范围内的随机数。所以这有点尴尬，但它有效：

```
#!/bin/sh

# `awk` is a little heaver than `wc`, but you don't need to parse its output.
lines=$(awk 'END{printf("%d", NR * 0.25)}' input.txt)

exclude="$@"

# First, put a random number at the beginning of each line.
while read line; do
  # skip lines that match our exclusion list
  if [[ $line =~ -($exclude). ]]; then
    continue
  fi
  echo "`jot -r 1 1 10000000` $line"
done < input.txt > stage1.txt

# Next, sort by the random number.
sort -n stage1.txt > stage2.txt

# Last, remove the number from the start of each line.
sed -r 's/^[0-9]+ //' stage2.txt > stage3.txt

# Show our output
head -n $lines stage3.txt

# Clean up
rm stage1.txt stage2.txt stage3.txt 
```

如果您愿意，可以将其中一些行组合起来，以避免将内容暂存到单独的文件中。

```
#!/bin/sh

lines=$(awk 'END{printf("%d", NR * 0.25)}' input.txt)

exclude="$@"

while read line; do
  if [[ $line =~ -(${exclude// /|})\. ]]; then
    continue
  fi
  echo "`jot -r 1 1 10000000` $line"
done < input.txt | sort -n | sed -r 's/^[0-9]+ //' | head -n $lines

# no clean-up required 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T13:04:45.610

您可以使用一系列 unix 工具。`shuf`是一个很好的，就像`wc`和一样`awk`。使用相同的方法计算行数，然后调整要打印的行数以忽略某些行，然后打印其中的随机数。

```
num_lines=$(wc -l $file | cut -f1 -d' ' )
high=55
low=54

if [ "$num_lines" -ge $high ]; then : $((num_lines--)); fi
if [ "$num_lines" -ge $low ]; then : $((num_lines--)); fi

awk '(NR != '$low' && NR != '$high') { print }' < $file \
    | shuf -n $((num_lines / 4)) 
```

请注意，if 语句的顺序很重要，这样才能发生正确的减法次数（即，如果文件有 54 行，则只应跳过一行，因此只有一次减法，如果它有 55 行，则两次将跳过行，并且此排序是必需的，否则不会发生第二次减法。）

请注意，如果您希望这些行按其原始顺序排列，则可以使用以下命令代替最后一个`awk .. | shuf ..`管道。

```
awk '(NR != '$low' && NR != '$high') { print NR,$0 }' < $file \
    | shuf -n $((num_lines / 4)) | sort -n | cut -f2- -d' ' 
```

（它首先用它的行号和排序标记每一行，然后将其删除，即[Schwartzian Transform](https://en.wikipedia.org/wiki/Schwartzian_transform)。）

# ros - 将 Spykee 的网络摄像头图像从 URBI 发布到 ROS

> ID：12988519
> 
> 赞同：0
> 
> 时间：2012-10-20T12:39:17.827
> 
> 标签：ros

我在 Spykee 上成功安装了启用 URBI 的 Gostai 固件。现在，我想发布 ROS 的相机图像，以便我可以在我的 PC 上观看它们。我看到了这个链接，但似乎我需要做相反的事情。

## 有没有人试图实现类似的目标？

法比安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:07:04.603

由于 CPU 和大小限制，Gostai 固件中未提供 ROS 实现。

# android - 跟踪用户数据并将其显示在图表中 [Android]

> ID：12988522
> 
> 赞同：1
> 
> 时间：2012-10-20T12:39:39.460
> 
> 标签：android

我想就我的 Android 项目寻求您的帮助。我打算跟踪用户的数据，如 BMI，并将其显示在条形图中。请给我一些帮助如何实现，我可以使用哪些 API，如果你有任何开发这样的应用程序的经验，请给我一些如何开始的细节。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T12:53:04.733

您可以将用户数据存储在 sqlite3 或基于平面文件的数据库中，当您想要绘制它们时，您可以将这些值读入数组：

首先，您应该从数据库中查询所有想要的数据，并迭代游标以将它们放入数组、数据集或图形库想要的任何内容中。

（我现在有点着急，所以我不会详细介绍绘图工具，但可能稍后再说。大多数包似乎都有一个很好的 XY 或折线图示例，但似乎是一个条形图-graph 示例需要更多搜索）

基本上，您会将图形视图放入布局中，按 id 查找视图，然后将图形数据设置为您从数据库中查询的数据。

通过快速搜索，我找到[了这个](https://stackoverflow.com/questions/424752/any-good-graphing-packages-for-android/1856369)。我认为那里的大多数图形库都可以创建条形图。

# ruby-on-rails - 我如何通过 rails 中的 stripe gem 将付款发票通过电子邮件发送给客户？

> ID：12988530
> 
> 赞同：3
> 
> 时间：2012-10-20T12:40:37.447
> 
> 标签：ruby-on-rails, ruby-on-rails-3, stripe-payments

我已经`stripe gem`在我的应用程序中实现了。我想通过电子邮件向客户发送发票和付款收据。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T07:08:02.713

以下是通过电子邮件向用户发送响应`invoice.payment_succeeded`webhook 的示例实现：[https ://github.com/boucher/stripe-webhook-mailer](https://github.com/boucher/stripe-webhook-mailer)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-28T03:44:28.137

Stripe 在用户设置中对此进行了介绍。

[![在此处输入图像描述](../Images/20f06abfbed9d475459d7b54550279c9.png)](https://i.stack.imgur.com/Sl0yM.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T17:27:43.913

你看过 Railscasts 的这一集吗？[http://railscasts.com/episodes/288-billing-with-stripe?view=asciicast](http://railscasts.com/episodes/288-billing-with-stripe?view=asciicast)

# xaml - Win RT XAML中的布尔到可见性转换器第一次不工作

> ID：12988532
> 
> 赞同：2
> 
> 时间：2012-10-20T12:40:40.693
> 
> 标签：xaml, data-binding, windows-8, windows-runtime, winrt-xaml

今天在 Windows RT（Windows 商店应用程序）的 XAML 中工作时很奇怪，当`IsValid=true`从我的视图模型设置时，我的布尔到可见性转换器第一次不起作用（我的路径仍然隐藏），但随后确实显示正确的可见性那。

这是一个错误，或者可能发生了什么？

我想显示我的勾选，`IsValid=true`包括初始时间：

```
<Path x:Name="MyTick" Data="F1 M 45.12,5.49L 21.255,40.8L 20.4525,40.8L 0,23.2875L 5.775,15.7875L 19.2525,27.3L 37.695,-1.90735e-006L 45.12,5.49 Z " 
Fill="#FF008500" Grid.Column="1" Width="42" Height="42" Margin="24,12,12,0" 
Stretch="Fill" VerticalAlignment="Top"  Visibility="{Binding IsValid, Converter={StaticResource BooleanToVisibilityConverter}}" /> 
```

诉诸设置 .xaml.cs 后面代码的可见性确实有效，但这违背了 MVVM 进行如此简单操作的目的，我不希望这样做。

这个问题也发生在我需要显示/隐藏的文本块的第一次`IsValid=true`。第一次还是倒塌了，第二次我养的物业变了，效果还不错。:S

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T12:52:32.143

没关系......这是我自己的愚蠢错误，似乎我在`IsValid`财产的吸气剂中有另一个条件，它总是`false`不应该出现的情况。

固定的 ：）

# android - 滚动列表视图时，还显示取消选择的图像

> ID：12988533
> 
> 赞同：1
> 
> 时间：2012-10-20T12:40:47.483
> 
> 标签：android, android-listview

我有一个问题，当我向下滚动列表视图时，显示的隐藏图像......这个问题是如何解决的......？？在此先感谢... ![在此处输入图像描述](../Images/fd110a460bd44890a57ee0a8f2a90ce5.png) 这是我的代码：- @Override public View getView(final int position, View convertView, ViewGroup parent) {

```
 View v = convertView;

            if(v==null)
            {
                LayoutInflater li = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                v=li.inflate(R.layout.custom_row,parent,false);

            }

            TextView Title = (TextView) v.findViewById(R.id.custom_text);
            final RelativeLayout content = (RelativeLayout) v.findViewById(R.id.main);
            final ImageView img1 =(ImageView) v.findViewById(R.id.cust_img);

final BinForAll listitem = mList.get(position);

            Title.setText(listitem.getTxt());

            //Desc.setText(listitem.getDesc());
            content.setOnClickListener(new OnClickListener()
            {

                public void onClick(View arg0) 
                {
                    if(img1.getVisibility()==View.VISIBLE && count>=0)
                    {
                        count++;
                        img1.setVisibility(View.GONE);
                        m1.remove(mList.get(position).getTxt());
                        Log.d("remove", mList.get(position).getTxt());
                    }
                    else if(img1.getVisibility()==View.GONE && count>0)
                    {
                        count--;
                        img1.setVisibility(View.VISIBLE);
                        m1.add(mList.get(position).getTxt());
                        Log.d("add", mList.get(position).getTxt());
                    }
                    else
                    {
                        Toast.makeText(getApplicationContext(), "You can not add more than 10 values..", 1).show();
                    }

            }
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T12:56:08.490

ListView 总是重用视图。因此，每次为 ListView 准备视图时，都应通过`Adapter.getView(final int position, View convertView, ViewGroup parent)`.

为了解决您的问题，您可以在`final BinForAll listitem = mList.get(position);`对象中保留可见性状态（只需将布尔值添加到 BinForAll 类）并重写您的 getView 方法，如下所示：

```
@Override 
public View getView(final int position, View convertView, ViewGroup parent) {

        View v = convertView;

        if(v==null)
        {
            LayoutInflater li = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v=li.inflate(R.layout.custom_row,parent,false);

        }

        TextView Title = (TextView) v.findViewById(R.id.custom_text);
        final RelativeLayout content = (RelativeLayout) v.findViewById(R.id.main);
        final ImageView img1 =(ImageView) v.findViewById(R.id.cust_img);

        final BinForAll listitem = mList.get(position);

        Title.setText(listitem.getTxt());
        // each time set visibility for your image view
        img1.setVisibility(listitem.isVisible() ? View.VISIBLE : View.GONE);

        //Desc.setText(listitem.getDesc());
        content.setOnClickListener(new OnClickListener()
        {

            public void onClick(View arg0) 
            {
                if(img1.getVisibility()==View.VISIBLE && count>=0)
                {
                    count++;
                    img1.setVisibility(View.GONE);
                    // save visibility state
                    listitem.setVisible(false);
                    m1.remove(mList.get(position).getTxt());
                    Log.d("remove", mList.get(position).getTxt());
                }
                else if(img1.getVisibility()==View.GONE && count>0)
                {
                    count--;
                    img1.setVisibility(View.VISIBLE);
                    // save visibility state
                    listitem.setVisible(true);
                    m1.add(mList.get(position).getTxt());
                    Log.d("add", mList.get(position).getTxt());
                }
                else
                {
                    Toast.makeText(getApplicationContext(), "You can not add more than 10 values..", 1).show();
                }

        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-17T19:05:29.553

将此属性添加到您的 listView

```
 android:scrollingCache="false"
    android:persistentDrawingCache="scrolling"
    android:fastScrollEnabled="true"
    android:cacheColorHint="@android:color/transparent" 
```

# jquery - 使每个函数按照第一个元素到最后一个元素的顺序执行

> ID：12988535
> 
> 赞同：3
> 
> 时间：2012-10-20T12:40:52.223
> 
> 标签：jquery

我需要使用 jQuery 每个函数，但也需要它从第一个元素到最后一个元素工作。目前，它似乎只是在选择符合标准的随机元素。

这是我所拥有的：

```
$(".ago-time").each(function(index) {
    var old_ts = $(this).data("ts2");
    $.get("phpscripts/get_new_time.php", {
        old_ts: old_ts,
        index: index
    }, function(result) {});
    alert(result);
}); 
```

和被发送到一个 php 文件`index`，`old_ts`其中的输出将类似于`0: 1 minute ago`.

我收到的警报不是按顺序排列的（从 0 到最高）。会是这样的；

**第一次警报：** 9:10 分钟前

**第二次警报：** 2:4 分钟前

**第三次警报**5：8 分钟前

如您所见，警报不是按索引顺序排列的，因此每个函数必须`ago-time`随机选择 's。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T13:15:46.280

[`each`](http://api.jquery.com/each/)确实在 jQuery 对象上按顺序迭代匹配的元素，但这里的误解是另一个。

[`$.get`](http://api.jquery.com/jQuery.get/)是一个速记[`$.ajax`](http://api.jquery.com/jQuery.ajax/)函数，即*异步*HTTP 请求。回调函数，在这种情况下：

```
function(result) {
  alert(result);
} 
```

当您从服务器获取响应时被异步调用。

但是，就您的情况而言，这无关紧要，并且在尝试调试服务器响应时会引起您的误解。

例如，在您的代码中，您可以简单地将响应设置为从服务器接收到它们各自的 DOM 元素。

```
$(".ago-time").each(function(idx) {
  var $self = $(this);
  $.get("phpscripts/get_new_time.php", {
    old_ts: $self.data("ts2"),
    index: idx
  }, function(result) {
    $self.html(result);
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T12:51:33.387

**$.get**是按顺序调用的，但不能保证按顺序获得响应，因为调用是异步的。

如果您将调用更改为同步调用（通过使用 jquery.ajax 并传递一个选项 async:false），那么您将获得您想要的效果（但您将在每次调用服务器时阻塞 UI 并提供一个糟糕的用户经验）

# java - 在 java 中使用 Scanner 读取空格分隔的行

> ID：12988537
> 
> 赞同：0
> 
> 时间：2012-10-20T12:41:00.633
> 
> 标签：java, jakarta-ee

假设我有这样的行：

03 674 67468734 467364
56 473 36474643 647632

56 787 68686888 648638

如何在 java 中使用扫描仪将其读入 String temp？我还要提到，在这一行的末尾有一个空格。并且每次将每一行读入 temp 并在使用 temp 执行一些操作后，正在对下一个字符串的 temp 执行相同的读取操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T12:41:52.220

使用[scanner.next()](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html#next%28%29)默认分隔符是空格。

```
 Scanner scanner = new Scanner("03 10103538 2222 1233 6160 0142");
    while(scanner.hasNext())
    {
        System.out.println(scanner.next());
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T13:01:11.473

使用[Scanner.nextLine](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html#nextLine%28%29)读取整行。

# java - JPA - 如何映射两个表之间的关系？

> ID：12988538
> 
> 赞同：1
> 
> 时间：2012-10-20T12:41:03.177
> 
> 标签：java, hibernate, jpa

我是 JPA 的新手，并试图弄清楚如何正确映射两个数据库表之间的以下关系：

`movies { id, title, rating }`

`ratings { id, rating }`

因此，查询电影数据库将从该电影的第二个表中返回评级字符串（“g”、“pg”等）。它们中的每一个都是它们自己的@Entity 和 java 类，如下所示。我是否必须在`getRating()`方法中使用某些东西`MovieCatalogEntity`才能获得正确的评级？

```
 @Entity(name="movieCatalog")
    public class MovieCatalogEntity {

        @Id
        @Column(name="ID", nullable=false)
        private long id;

        @Column(name="Title", nullable=false)
        private String title;

            ??? What goes here ????????
            private RatingEntity rating;
    }

@Entity(name="Rating")
public class RatingEntity {

    @Id
    @Column(name = "id", nullable=false)
    private long id;

    @Column(name="Rating", nullable=false)
    private String rating;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T12:45:28.367

见`@OneToOne`,`@ManyToOne`和`@JoinColumn`注解

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T12:45:26.547

假设相同的评级可以出现在许多电影上，这样的事情应该可以做到。

```
 @ManyToOne(optional=false) 
 @JoinColumn(name="rating_id", referencedColumnName = "ID", nullable=false)
 public RatingEntity rating 
```

@ManyToOne 的详细信息可在[此处找到](http://docs.oracle.com/javaee/6/api/javax/persistence/ManyToOne.html)

# c - cudaMalloc 在不同的 CPU 线程上返回相同的内存地址

> ID：12988541
> 
> 赞同：3
> 
> 时间：2012-10-20T12:41:45.733
> 
> 标签：c, cuda, mpi, memory-address

我正在尝试寻找程序中的错误。它产生

```
[vaio:10404] Signal: Segmentation fault (11) 
[vaio:10404] Signal code: Address not mapped (1) 
[vaio:10404] Failing at address: 0x210000
[vaio:10405] [ 0] /lib/x86_64-linux-gnu/libpthread.so.0(+0xfcb0) [0x7fa7857ffcb0]
[vaio:10405] [ 1] /lib/x86_64-linux-gnu/libc.so.6(+0x14fe20) [0x7fa785580e20]
[vaio:10405] [ 2] /usr/lib/libcuda.so.1(+0x1b1f49) [0x7fa78676bf49] 
```

`0x210000`是位于 GPU 内存中的地址。我没有统一的地址空间（由于卡限制：sm_12）。

通过运行程序时会出现问题`mpiexec -n 2`。也就是说，我启动了 2 个 CPU 进程，它们都在同一个（！）GPU 上创建了自己的上下文（只安装了 1 个 GPU）。像这样：

```
cuInit(0);
cuDeviceGet(&cuDevice, 0); // get device number 0
cuCtxCreate(&cuContext, 0, cuDevice); // create context
cuMemAlloc( &mem , size );  // allocate memory pool (hundreds of MB) 
```

（这里简化了 - 检查所有 cuda 调用是否有错误返回）

我在相当长的一段时间内都非常成功地使用了这个设置（多个主机进程共享同一个 GPU）。但是，那是在使用 CUDA 运行时 API 时。现在，我正在切换到驱动程序 API。

为了追捕这一点，我从`mem`上面的代码中转储出来。事实证明，`cuMemAlloc`两个进程返回的内存地址是相同的！这让我很奇怪。在这里转储：

```
process 0: allocate internal buffer: unaligned ptr = 0x210000  aligned ptr = 0x210000
process 1: allocate internal buffer: unaligned ptr = 0x210000  aligned ptr = 0x210000 
```

我立即检查了从未出现过此类问题的旧代码（运行时 API）。结果它也报告了两个进程（共享同一设备）相同的内存地址。这以前从未引起我的注意。

我觉得这很难相信。明确一点：两个进程都使用`cudaMalloc`（运行时 API）和`cuMalloc`（驱动程序 API）（大卡上 400MB）请求设备内存，并且两个进程都返回相同的地址？我确信没有一个进程在推进很多并且已经释放了内存，因此第一个进程可以重用相同的内存，因为第一个进程已经终止。不，这块内存被用作内存池来服务后续的内存分配，并且中间有很多同步点。该池在程序终止时被释放。

任何人都知道如何将相同的指针值（内存地址）报告给两个进程，但在 GPU 上这是指不同的内存？（它必须是因为它执行的计算是正确的。如果内存池重叠，情况就不会如此）。据我所知，这是不可能的。我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T12:46:03.530

您缺少虚拟寻址的概念。

每个 CPU 线程都有自己的 CUcontext，每个 CUcontext 都有自己的 GPU*虚拟*地址空间。从 API 返回的地址是虚拟的，主机驱动程序和/或设备将虚拟地址转换为 GPU 内存中的绝对地址。有大量证据表明，GPU 有一个专门的板载 TLB 正是为此目的。

# ruby-on-rails-3 - 仅按日期对 created_at 进行分组？

> ID：12988543
> 
> 赞同：8
> 
> 时间：2012-10-20T12:41:52.147
> 
> 标签：ruby-on-rails-3, activerecord

我的产品模型中有以下内容。

```
def grouped_created_at
  @created_ats = @products.group_by { |c| c.created_at }
end 
```

工作正常，但我只想按日期分组。由于这是一个时间戳，我没有得到我需要的结果。谁能建议如何修改它？

非常感谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-20T13:48:53.963

```
def grouped_created_at
  @created_ats = @products.group_by { |c| c.created_at.to_date }
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-04-03T12:35:12.163

## 如果您想按客户的时区对记录进行分组，请阅读此内容！

我已经花了大约一天的时间，所以我希望这篇文章对某人有所帮助。我试图计算过去 10 天中每一天的用户活动。够容易吧？这是我尝试过的，但没有奏效：

### 不工作

```
Activity.select("user_id", "id", "created_at")
  .where(user_id: @user.id)
  .where("created_at >= ?", DateTime.now.beginning_of_day - 10.days) 
  .group("user_id", "DATE(created_at)") # <- POSTGRES' DATE FUNCTION
  .count("id") 
```

上面的问题是此查询将按 UTC 时间对活动进行分组。例如，在多伦多（UTC - 4 小时），如果我在 4 月 1 日晚上 8 点之后创建一个活动，Postgres 会认为它是在第二天（4 月 2 日）而不是“今天”（4 月 1 日）创建的。这不好，因为我想按*用户的*时区对这些活动进行分组。

使用方便的[browser_timezone_rails](https://github.com/kbaum/browser-timezone-rails) gem（使用 javascript 将用户的时区附加到请求），并将我的`.group`线路切换到这最终是有效的：

### 在职的

```
.group("user_id", "DATE(created_at AT TIME ZONE 'UTC' AT TIME ZONE '#{Time.zone.name}')") 
```

您会看到实际上`AT TIME ZONE`需要两个 s。第一个确认我们的时间戳是 UTC，第二个将时间戳转换为`Time.zone`gem 的设置（例如：'America/New_York'）。

希望这可以帮助某人。[postgres 组的这个答案对](https://stackoverflow.com/questions/22996959/getting-date-with-timezone-offset-in-postgres)我也很有帮助。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2015-11-24T15:03:35.827

> 对于登陆此页面的我的朋友 - 替代解决方案

**基于您使用的数据库**

对于 MySQL

`Model.group("date(table_name.created_at)")`

对于 SQLite

`Model.group("strftime('%Y-%m-%d', table_name.created_at)")`

PostgreSQL：

`Model.group("table_name.created_at::date")`

**会结果你**

*ActiveSupport::OrderedHash*喜欢

```
{Sun, 13 Sep 2015=>2,
 Fri, 11 Sep 2015=>1,
 Tue, 01 Sep 2015=>1,
 Mon, 31 Aug 2015=>2,
 Wed, 26 Aug 2015=>1,
 Tue, 11 Aug 2015=>2,
 Sun, 09 Aug 2015=>2,
 Thu, 30 Jul 2015=>3,
 Tue, 07 Jul 2015=>3,
 Mon, 06 Jul 2015=>1,
 Sun, 05 Jul 2015=>2,
 Thu, 02 Jul 2015=>5} 
```

# java - 如何为多个平台导出 eclipse 4 应用程序

> ID：12988546
> 
> 赞同：3
> 
> 时间：2012-10-20T12:42:32.173
> 
> 标签：java, linux, eclipse, eclipse-plugin, jface

如何导出 Eclipse 4 应用程序以便它可以在 Windows 或 Linux 中运行？

我看到产品配置具有适用于所有平台的选项卡：

![在此处输入图像描述](../Images/f4605aff3eb78bf74c7b3f8d8fd319e3.png)

...但是当我导出时，我在`repository\binary`产品中看到名称`product_root.win32.win32.x86_64`表明它是根据我的开发机器构建的，即`Windows 7/64bit`.

那么要导出应用程序以在 Linux 中运行，导出必须在 Linux 机器中完成吗？

即我必须在Linux 中运行的Eclipse 中导入我的项目文件然后导出？

**更新1：**

按照@Baz 的建议，我安装了 delta pack。
但是在导出时出现以下错误：

![在此处输入图像描述](../Images/2b952180a2e478a7f1db8ea3ad7d82bf.png)

我的设置如下：

![在此处输入图像描述](../Images/8b949e5090558577db2b0cf4461f3fb0.png)

和

![在此处输入图像描述](../Images/666eee78c7314110aa826f66af7d9e0f.png)

那么为什么在导出过程中会出现错误？

**更新 2：**
好的。必须添加增量包作为运行平台的一部分，而不是新的空目标。

现在出口确实出口多个平台。尝试过 Win/32 位和 Win/64 位。
当我尝试运行 Win/64 位（这也是我的 PC 的平台）时，一切都很好。
但是当我尝试运行 Win/32 位版本时，我收到错误消息`it can not find the jre`

为什么我会收到此错误？我应该捆绑jre吗？为什么它适用于 Win/64 位？我没有设置`JAVA_HOME`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T06:41:07.733

让您的应用程序跨平台的最简单方法是使用`Delta-Pack`. [这](http://www.vogella.com/articles/Eclipse3RCP/article.html#deployment_deltapack)是一个很好的使用教程。

基本上，您为您的 Eclipse 版本下载 delta-pack 版本，然后根据您的需要对其进行配置，然后您可以为每个目标平台导出您的产品。

请记住，包含的 SWT.jar 是特定于平台的。因此，您将无法在 64 位 JRE 系统上运行 32 位版本。

因此，您必须为每个目标系统提供一罐产品。

# javascript - 汇总复选框的值，使用 -minimum 选定条件

> ID：12988548
> 
> 赞同：0
> 
> 时间：2012-10-20T12:42:49.213
> 
> 标签：javascript, jquery

我有一个带有 X 组带有价格值的复选框的表单。我为每个组分配了一个条件。

假设我们有 2 个组：

第一组条件：将所有值加在一起，除了选择的前 3 个（不是索引中的前 3 个，而是选择的前 3 个以及之后的每个选择）

第二组条件：将所有值加在一起，除了前 2 个被选中（不是索引中的前 2 个，而是前 2 个被选中，之后的每个选择）

```
var minLimit1 = 3;
var minLimit2 = 2;

$(":input", "#myForm").each(function(){

    if(this.type == 'checkbox'){

    }

}); 
```

如何使用 jQuery 或纯 js 实现它？

编辑：示例表单代码

```
<form id="myForm">
 <fieldset class="required">
  <input type="checkbox" value="1.30" name="group1" id="id-1">
  <label for="id-1"><span>Component 1</span><em>(€1.30)</em></label>

  <input type="checkbox" value="1.00" name="group1" id="id-2">
  <label for="id-2"><span>Component 2</span><em>(€1.00)</em></label>

  <input type="checkbox" value="0.50" name="group1" id="id-3">
  <label for="id-3"><span>Component 3</span><em>(€0.50)</em></label>

  <input type="checkbox" value="0.25" name="group1" id="id-4">
  <label for="id-4"><span>Component 4</span><em>(€0.25)</em></label>

  <input type="checkbox" value="1.75" name="group1" id="id-5">
  <label for="id-5"><span>Component 5</span><em>(€1.75)</em></label>

  <input type="checkbox" value="2.00" name="group1" id="id-6">
  <label for="id-6"><span>Component 6</span><em>(€2.00)</em></label>
 </fieldset>

 <fieldset class="required">
  <input type="checkbox" value="1.20" name="group2" id="id-7">
  <label for="id-7"><span>Component 1</span><em>(€1.20)</em></label>

  <input type="checkbox" value="1.10" name="group2" id="id-8">
  <label for="id-8"><span>Component 2</span><em>(€1.10)</em></label>

  <input type="checkbox" value="0.40" name="group2" id="id-9">
  <label for="id-9"><span>Component 3</span><em>(€0.40)</em></label>

  <input type="checkbox" value="0.35" name="group2" id="id-10">
  <label for="id-10"><span>Component 4</span><em>(€0.35)</em></label>

  <input type="checkbox" value="1.15" name="group2" id="id-11">
  <label for="id-11"><span>Component 5</span><em>(€1.15)</em></label>

 </fieldset>
</form> 
```

注意：我希望将最新点击并进一步添加到摘要中，而不是索引中的最后一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T20:06:47.590

我认为这个解决方案可以满足您的需求。演示将类添加到正在计算的值的标签中，以便更容易确定该概念是否正确

演示：http: [//jsfiddle.net/MTJtF/2](http://jsfiddle.net/MTJtF/2)

```
/* can store values in array, or as data attribute of html */

var min_limits = [3, 2];

$('#myForm .required input:checkbox').change(function() {
    var $group = $(this).closest('fieldset.required')
    var parentIdx = $('fieldset.required').index($group);
    /* can store values in array, or as data attribute of html */
    var minLimit = $group.data('min_limit') || min_limits[parentIdx];
    var $selected = $group.find(':checked').slice(minLimit);
   $group.find('.counted').removeClass('counted')
    var sum = 0;
    if ($selected.length) {
        $selected.each(function() {
            sum +=1*$(this).val();
            $(this).next().addClass('counted')
        })

    } else {
        sum = 'Limit not met';
    }

    $group.find('.sum').text('Sum= '+sum)

}) 
```

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T13:01:13.453

传递给的第一个参数`$.each()`是`index`，这在这里会有所帮助。

在此代码中，我们假设您的复选框按`fieldset`类、等元素`"group1"`分组`"group2"`。

```
var conditions = {
        group1: 3,
        group2: 2
    },
    total = 0,
    key, condition;

// Loop through all the conditions
for (key in conditions) {
    condition = conditions[key];
    // Loop through all the checked checkboxes in fieldset.group1, fieldset.group2, etc
    $('input[type="checkbox"]:checked', '#myForm fieldset.' + key).each(function(inputIndex) {
        // Check if the current checkbox's index is higher than the minimum
        if ((inputIndex + 1) > condition) {
            total += parseFloat($(this).val());
        }
    });
} 
```

示例：http: [//jsfiddle.net/QfSxw/2/](http://jsfiddle.net/QfSxw/2/)

编辑：大大简化了代码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T13:02:10.223

我不确定我是否正确理解了这些复选框的格式，但我假设您可以分辨出第 1 组复选框和第 2 组复选框之间的区别。如果是这样，我建议跟踪到目前为止已标记的复选框的数量，以了解何时开始汇总这些值。例如：

```
// The minimum number that must be checked
var minLimit1 = 3;
var minLimit2 = 2;
// The number checked per group
var numGroup1 = 0;
var numGroup2 = 0;
//The sum of the checkboxes over the group's minLimit that are checked
var sumGroup1 = 0;
var sumGroup2 = 0;

$(":input", "#myForm").each(function () {
    if ((this.type == 'checkbox') && (this.checked == true)) {
        // This code is just for Group 1 right now. Depending on how you differentiate
        // between each group, you could either have a check in here for each group
        // (or some kind of loop if the number of groups is variable), or have a separate
        // each statement for each group.

        if (numGroup1 >= minLimit1) {
            // If the minLimit has already been reached, then increment the sum
            sumGroup1++;
        }

        numGroup1++;
    }
}); 
```

# c# - BackgroundWorker 从循环中执行 UI 更新

> ID：12988559
> 
> 赞同：1
> 
> 时间：2012-10-20T12:43:59.730
> 
> 标签：c#, wpf, viewmodel, backgroundworker, observablecollection

*   我在 BackgroundWorker 的 DoWork 中循环创建 ViewModel 对象
*   我在每次迭代中报告进度，将新对象作为参数传递给 ProgressChanged 处理程序（它是 UI 线程的朋友）检索
*   在该处理程序中，对象被添加到绑定了 ListBox 的 ObservableCollection。

MY ViewModel 类包含两个字符串属性（Filename 和 ThumbnailPath），它的 DataTemplate 包含一个 Label 和一个 Image，绑定到这些属性。

```
void bw_DoWork (object sender, DoWorkEventArgs e) {
   List<string> files = e.Argument as List<string>;
   FileInfo fi; int percent;
   for (int i = 0; i < files.Count; i++) {
      FileViewModel newItem = new FileViewModel(files[i]);
      fi = new FileInfo(files[i]);
      percent = i / files.Count * 100;
      bwImportBrowserItems.ReportProgress(percent, newItem);
   }
}

void bw_ProgressChanged (object sender, ProgressChangedEventArgs e) {
    this.observableCollection.Add(e.UserState as FileViewModel);
} 
```

典型项目数 (30-50) 的典型行为： UI 冻结约 2-3 秒；显示了大约一半的项目；UI 再次冻结较短的时间并添加其余部分。

现在我明白从循环中调用 UI 更新不是最好的主意 - 我认为调用来得太频繁了 UI 没有时间响应它们，这就是为什么我们看到 UI 被“分组”更新，留下它期间没有反应。

**我尝试添加`Thread.Sleep(500)`为循环的最后一行。**这帮助我说明了一切正常，因为随着这种减速，**项目被一个接一个地很好地添加，**没有任何无响应。

所以我尝试了不同的睡眠值并**选择了`Thread.Sleep(25)`.** 这并不理想，但完全可以接受，并且非常接近它应该看起来的样子。

**我想问一下 Thread.Sleep**在这种情况下是否是一种常见的解决方法，以及人们在这种情况下采用的一般解决方案是什么：从后台循环更新 UI 集合而完全没有任何无响应。我也提出了一些想法，非常感谢您的意见。

我能想到的想法：

1.  不要经常报告进度 - 将其限制为 10 次，或每 10 个新项目。
2.  不要循环执行。创建需要创建的项目列表。在 DoWork 主体中，从列表中取出一个项目，实例化并返回 ViewModel 实例。在 RonWorkerCompleted 上，更新 UI，检查我们的列表是否为空，如果不是，再次 RunWorkerAsync。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T12:51:59.880

> 如果 Thread.Sleep 是此类情况下的常见解决方法

将其视为最后的手段。您正在增加总处理时间（不是 CPU 负载）。

> 1) 不要经常报告进度——将其限制为 10 次，或每 10 个新项目。

这就是基本思想。通过 ReportProgess 收集新项目并发送列表。调整列表的大小。

> 2）不要循环执行。

可能，但是您的每个 Bgw 的 1 项看起来要慢得多。它甚至可能表现出相同的症状。

3) 通过 ConcurrentQueue 解耦。您可以让 DoWork 填充一个队列，而 Dispatcher.Timer 可以清空它。还尝试使用该计时器处理批次。您可以调整计时器的优先级和批量大小。

# php - PHP继承类中创建的对象？

> ID：12988563
> 
> 赞同：0
> 
> 时间：2012-10-20T12:44:23.623
> 
> 标签：php

我有一堂课`Second`是通过`First`. 我正在尝试`$variable` **直接**访问，我应该可以使用`$this->variable`它，但是它似乎不起作用。

```
class First {
    public $variable;

    public function getSecond() {
        $this->variable = '123';
        $Second = new Second();
        $Second->blah();
    }
}

class Second extends First {
    public function blah() {
        // Trying to access the variable directly, it is not inherited though
        print_r($this->variable . 'test');
    }
}

$First = new First();
$First->getSecond(); 
```

输出：`test`，应该输出`123test`？

注意：**出于测试目的，我公开了这些功能。我真的想直接访问变量，而不是通过`__construct`.**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T12:50:28.243

实例 $Second 永远不会到达类方法 getSecond()，因此`$this->variable`永远不会设置为`'123'`.

# c++ - 重载成员函数的成员函数指针

> ID：12988564
> 
> 赞同：1
> 
> 时间：2012-10-20T12:44:29.037
> 
> 标签：c++, function-pointers

注意：下面的代码示例不是真实的代码，真实的代码要复杂得多，在这里粘贴它，所以这个例子可能看起来很荒谬，但这并不重要。

```
struct Base
{
    void beginEvent(int a)
    {
        impl(a, &Base::onBeginEvent, &Base::onBeginEvent);
    }

    void endEvent(int a)
    {
        impl(a, &Base::onEndEvent, &Base::onEndEvent);
    }

    void impl(int a, void (Base::*func1)(int), void (Base::*func2)(int, int))
    {
        //some complicated behavior
        //...
        (this->*func1)(a);
        (this->*func2)(a, -a);
    }

    virtual void onBeginEvent(int a){}
    virtual void onBeginEvent(int a, int negativeA){}
    virtual void onEndEvent(int a){}
    virtual void onEndEvent(int a, int negativeA){}
}; 
```

和

```
struct Derived : public Base
{
    void onBeginEvent(int a) { std::cout << a << "\n"; }
    void onEndEvent(int a, int b) { std::cout << a << "==(-(" << b << "))\n"; }
};

int main() 
{
    Derived d;

    d.beginEvent(3);
    d.endEvent(9);

    return 0;
} 
```

我的问题是：是否真的有必要`impl`以它的方式定义函数`void (Base::*func1)(int)`，`void (Base::*func2)(int, int)`即使我知道它是一个成员函数指针（`&Base::onBeginEvent`在这种情况下）？

当只提供其中一个时，我显然得到的响应太少了。打电话时有很多争论。我不想要可变参数函数或其他东西，我想要 Base 提供给 Derived 的有限数量的方法。Derived 可能只想调用一个或任何提供的方法的子集。但我知道，它们将只是同一个符号的重载。我的目标不是让它与一些疯狂的解决方法一起工作，我只是想知道，如果我可以减少发布的代码。

：[完整的ideone工作示例](http://ideone.com/3WkSsu)

**在我的真实代码中编辑** Thme impl 方法非常复杂，对于 begin 和 end 相同，只是在 impl 末尾使用不同的调用...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T14:49:52.553

用多态行为替换函数指针怎么样，这实际上是同一件事，但更OO，更直观，更易于阅读。

这是一个例子：

```
struct Base
{
    void beginEvent(int a)
    {
        implBegin(a);
    }

    void endEvent(int a)
    {
        implEnd(a);
    }

// Consider making the rest of the methods protected    
// protected:

    // This is effectively a Template Method Design pattern
    // This method may not be necessary, in which case just
    // move the code to beginEvent()
    void implBegin(int a)
    {
        onBeginEvent(a);
        onBeginEvent(a, -a);
    }

    // This is effectively a Template Method Design pattern
    // This method may not be necessary, in which case just
    // move the code to endEvent()
    void implEnd(int a)
    {
        onEndEvent(a);
        onEndEvent(a, -a);
    }

    virtual void onBeginEvent(int a){}
    virtual void onBeginEvent(int a, int negativeA){}
    virtual void onEndEvent(int a){}
    virtual void onEndEvent(int a, int negativeA){}
};

struct Derived : public Base
{
    // Notice I defined these as virtual
    virtual void onBeginEvent(int a) { std::cout << a << "\n"; }
    virtual void onEndEvent(int a, int b) { std::cout << a << "==(-(" << b << "))\n"; }
};

int main() 
{
    Derived d;

    d.beginEvent(3);
    d.endEvent(9);

    return 0;
} 
```

请注意，implBegin() 和 impleEnd() 可能不是必需的，您可以在 beginEvent() 和 endEvent() 中做同样的事情。这是[模板方法](http://en.wikipedia.org/wiki/Template_method)设计模式的链接。

另一种方法是按原样定义 Base，但可能将其称为 EventManager，并创建 EventHandlers 的类层次结构，可能是 EventBase 和 EventDerived。然后可以将 EventHandlers 注入 EventManager（通过 setEventHandler() 方法）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T14:29:27.420

你说`...the way it takes void (Base::*func1)(int) and void (Base::*func2)(int, int) even though I know that it is one member function pointer...`，谁告诉你它们都是一个功能？仅仅因为 2 个函数具有相同的名称，并不意味着它们是相同的函数。他们的地址和除了他们的名字之外的所有东西都是不同的。所以它们是两种不同的功能而不是一种功能

# linux - 在linux中，有一种方法可以在文件被其他人打开时使文件只读，因此只有他们当时可以访问它

> ID：12988569
> 
> 赞同：2
> 
> 时间：2012-10-20T12:44:57.873
> 
> 标签：linux

我对 bash 脚本很陌生，我正在查看权限，我想知道是否有一种方法可以使用 while 循环来实现它，以便在用户打开时说

“file.txt”它变为只读给其他所有人，直到该文件再次被用户关闭。

这在linux中可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T12:52:14.363

您可能需要[文件锁定](http://en.wikipedia.org/wiki/File_locking)。请参阅[此页面](http://www.madmadmod.com/programming/31-lockfile-conditional-semaphore-file-creator.html)、[lockfile(1)](http://linux.about.com/library/cmd/blcmdl1_lockfile.htm)手册页、[此问题](https://stackoverflow.com/q/1715137/841108)（非常相似）。

但我不确定您在 shell 脚本级别的推理是否正确。我将在应用程序中执行此操作，可能使用[lockf(3)](http://www.kernel.org/doc/man-pages/online/pages/man3/lockf.3.html)或[flock(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/flock.2.html)。您应该避免[强制锁定](http://kernel.org/doc/Documentation/filesystems/mandatory-locking.txt)。

请注意，编辑器可能会执行自己的文件锁定操作，或者执行其他操作而不只是编写文件。

^(一些编辑器或程序可能会编写一个临时文件，然后[重命名（2）](http://www.kernel.org/doc/man-pages/online/pages/man2/rename.2.html)它)

# sql - 具有大量或未定义类别的交叉表

> ID：12988575
> 
> 赞同：7
> 
> 时间：2012-10-20T12:45:26.313
> 
> 标签：sql, postgresql, pivot, aggregate, crosstab

我真正的问题与记录大量反病毒产品中的哪一个同意给定样本是给定反病毒家族的成员有关。该数据库有数百万个样本，每个样本都有数十种反病毒产品投票。我想问一个查询，例如“对于包含名称 'XYZ' 的恶意软件，哪个样本得票最多，哪些供应商投票支持它？” 并得到如下结果：

```
"BadBadVirus"  
                     V1  V2  V3  V4  V5  V6  V7  
Sample 1 - 4 votes    1   0   1   0   0   1   1      
Sample 2 - 5 votes    1   0   1   0   1   1   1   
Sample 3 - 5 votes    1   0   1   0   1   1   1  

 total     14         3       3       2   3   3 
```

这可能用来告诉我供应商 2 和供应商 4 要么不知道如何检测此恶意软件，要么他们将其命名为不同的名称。

* * *

我将尝试稍微概括我的问题，同时希望不会破坏您帮助我的能力。假设我有五个选民（Alex、Bob、Carol、Dave、Ed）被要求看五张照片（P1、P2、P3、P4、P5）并决定照片的“主要主题”是什么。对于我们的示例，我们将假设它们仅限于“Cat”、“Dog”或“Horse”。不是每个选民都对每件事都投票。

数据以这种形式存在于数据库中：

```
Photo, Voter, Decision
(1, 'Alex', 'Cat')
(1, 'Bob', 'Dog')
(1, 'Carol', 'Cat')
(1, 'Dave', 'Cat')
(1, 'Ed', 'Cat')
(2, 'Alex', 'Cat')
(2, 'Bob', 'Dog')
(2, 'Carol', 'Cat')
(2, 'Dave', 'Cat')
(2, 'Ed', 'Dog')
(3, 'Alex', 'Horse')
(3, 'Bob', 'Horse')
(3, 'Carol', 'Dog')
(3, 'Dave', 'Horse')
(3, 'Ed', 'Horse')
(4, 'Alex', 'Horse')
(4, 'Bob', 'Horse')
(4, 'Carol', 'Cat')
(4, 'Dave', 'Horse')
(4, 'Ed', 'Horse')
(5, 'Alex', 'Dog')
(5, 'Bob', 'Cat')
(5, 'Carol', 'Cat')
(5, 'Dave', 'Cat')
(5, 'Ed', 'Cat') 
```

目标是，给定我们正在寻找的照片主题，我们想知道有多少选民认为这是该照片的主要观点，但也列出了哪些选民认为。

```
Query for: "Cat"
      Total  Alex  Bob Carol Dave Ed
1 -     4      1    0    1     1   1
2 -     3      1    0    1     1   0 
3 -     0      0    0    0     0   0 
4 -     1      0    0    1     0   0 
5 -     4      0    1    1     1   1
------------------------------------
total  12      2    1    4     3   2 

Query for: "Dog"
      Total  Alex  Bob Carol Dave Ed
1 -     1     0      1   0    0    0
2 -     2     0      1   0    0    1
3 -     1     0      0   1    0    0 
4 -     0     0      0   0    0    0 
5 -     1     1      0   0    0    0 
------------------------------------
total   5     1      2   1    0    1 
```

我可以用我存储的格式的数据来做这件事吗？

我很难获得执行此操作的查询-尽管将数据转储出来然后编写程序来执行此操作很简单，但如果可以的话，我真的希望能够在数据库中执行此操作。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-20T14:17:39.230

```
create table vote (Photo integer, Voter text, Decision text);
insert into vote values
(1, 'Alex', 'Cat'),
(1, 'Bob', 'Dog'),
(1, 'Carol', 'Cat'),
(1, 'Dave', 'Cat'),
(1, 'Ed', 'Cat'),
(2, 'Alex', 'Cat'),
(2, 'Bob', 'Dog'),
(2, 'Carol', 'Cat'),
(2, 'Dave', 'Cat'),
(2, 'Ed', 'Dog'),
(3, 'Alex', 'Horse'),
(3, 'Bob', 'Horse'),
(3, 'Carol', 'Dog'),
(3, 'Dave', 'Horse'),
(3, 'Ed', 'Horse'),
(4, 'Alex', 'Horse'),
(4, 'Bob', 'Horse'),
(4, 'Carol', 'Cat'),
(4, 'Dave', 'Horse'),
(4, 'Ed', 'Horse'),
(5, 'Alex', 'Dog'),
(5, 'Bob', 'Cat'),
(5, 'Carol', 'Cat'),
(5, 'Dave', 'Cat'),
(5, 'Ed', 'Cat')
; 
```

猫的查询：

```
select photo,
    alex + bob + carol + dave + ed as Total,
    alex, bob, carol, dave, ed
from crosstab($$
    select
        photo, voter,
        case decision when 'Cat' then 1 else 0 end
    from vote
    order by photo
    $$,'
    select distinct voter
    from vote
    order by voter
    '
) as (
    photo integer,
    Alex integer,
    Bob integer,
    Carol integer,
    Dave integer,
    Ed integer
);
 photo | total | alex | bob | carol | dave | ed 
-------+-------+------+-----+-------+------+----
     1 |     4 |    1 |   0 |     1 |    1 |  1
     2 |     3 |    1 |   0 |     1 |    1 |  0
     3 |     0 |    0 |   0 |     0 |    0 |  0
     4 |     1 |    0 |   0 |     1 |    0 |  0
     5 |     4 |    0 |   1 |     1 |    1 |  1 
```

如果投票者的数量很大或未知，则可以动态完成：

```
do $do$
declare
voter_list text;
r record;
begin

drop table if exists pivot;

voter_list := (
    select string_agg(distinct voter, ' ' order by voter) from vote
    );

execute(format('
    create table pivot (
        decision text,
        photo integer,
        Total integer,
        %1$s
    )', (replace(voter_list, ' ', ' integer, ') || ' integer')
));

for r in
select distinct decision from vote
loop
    execute (format($f$
        insert into pivot
        select
            %3$L as decision,
            photo,
            %1$s as Total,
            %2$s
        from crosstab($ct$
            select
                photo, voter,
                case decision when %3$L then 1 else 0 end
            from vote
            order by photo
            $ct$,$ct$
            select distinct voter
            from vote
            order by voter
            $ct$
        ) as (
            photo integer,
            %4$s
        );$f$,
        replace(voter_list, ' ', ' + '),
        replace(voter_list, ' ', ', '),
        r.decision,
        replace(voter_list, ' ', ' integer, ') || ' integer'
    ));
end loop;
end; $do$; 
```

上面的代码创建了包含所有决策的表数据透视表：

```
select * from pivot where decision = 'Cat'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T13:20:41.707

您的愿望意味着将一些数据（名称）转移到列标题中，即结果表的模式。由于这介于不方便和不可能之间，我建议只对 sql 中的数据进行排序和求和，然后在数据库之外进行其余操作。

```
SELECT Photo, Voter
FROM data
WHERE Decision = '...'
ORDER BY Photo, Voter 
```

和

```
SELECT Photo, COUNT(*) AS Total
FROM data
WHERE Decision = '...'
GROUP BY Photo
ORDER BY Photo; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-11T11:35:33.553

使用与 Clodoaldo 相同的示例数据（“create table vote...”）并使用 plpythonu 函数 make_pivot_table（如下），您可以运行：

```
create temp table pivot_data on commit drop as 
    select * from vote where decision = 'Cat' union select photo, null, null from vote;

select * from make_pivot_table('{photo}', 'voter',  'decision', 'count', 'pivot_data',
  'pivot_result', false);

select * from pivot_result order by photo; 
```

make_pivot_table 函数定义为：

```
-- make_pivot_table
-- python version 0.9
-- last edited 2015-08-11 

create or replace function
 make_pivot_table(row_headers text[], category_field text, value_field text,
  value_action text, input_table text, output_table text, keep_result boolean)
returns void as
$$
# imports
from collections import defaultdict
import operator
import string

# constants
BATCH_SIZE = 100
VALID_ACTIONS = ('count', 'sum', 'min', 'max')
NULL_CATEGORY_NAME = 'NULL_CATEGORY'
TOTAL_COL = 'total'

# functions
def table_exists(tablename):
    plan = plpy.prepare("""select table_schema, table_name from
        information_schema.Tables where table_schema not in ('information_schema',
        'pg_catalog') and table_name = $1""", ["text"])
    rows = plpy.execute(plan, [input_table], 2)
    return bool(rows)

def make_rowkey(row):
    return tuple([row[header] for header in row_headers])

def quote_if_needed(value):
    return plpy.quote_literal(value) if isinstance(value, basestring) else str(value)

# assumes None is never a value in the dct
def update_if(dct, key, new_value, op, result=True):
    current_value = dct.get(key)
    if current_value is None or op(value, current_value) == result:
        dct[key] = new_value

def update_output_table(output_table, row_headers, colname, value):
    pg_value = plpy.quote_literal(value) if isinstance(value, basestring) else value
    sql = 'update %s set %s = %s where ' % (output_table, plpy.quote_ident(colname), 
                                            pg_value)
    conditions = []
    for index, row_header in enumerate(row_headers):
        conditions.append('%s = %s' % (plpy.quote_ident(row_header),
                                       quote_if_needed(rowkey[index])))
    sql += ' and '.join(conditions)
    plpy.execute(sql)

# -----------------

if not table_exists(input_table):
    plpy.error('input_table %s dones not exist' % input_table)

if value_action not in VALID_ACTIONS:
    plpy.error('%s is not a recognised action' % value_action)

# load the data into a dict
count_dict = defaultdict(int)
sum_dict = defaultdict(float)
total_dict = defaultdict(float)
min_dict = dict()
max_dict = dict()
categories_seen = set()
rowkeys_seen = set()
do_total = value_action in ('count', 'sum')

cursor = plpy.cursor('select * from %s' % plpy.quote_ident(input_table))
while True:
    rows = cursor.fetch(BATCH_SIZE)
    if not rows:
        break
    for row in rows:
        rowkey = make_rowkey(row)
        rowkeys_seen.add(rowkey)
        category = row[category_field]           
        value = row[value_field]
        dctkey = (rowkey, category)

        # skip if value field is null
        if value is None:
            continue

        categories_seen.add(category)

        if value_action == 'count':
        count_dict[dctkey] += 1
        total_dict[rowkey] += 1
    if value_action == 'sum':
            sum_dict[dctkey] += value
            total_dict[rowkey] += value
        if value_action == 'min':
            update_if(min_dict, dctkey, value, operator.lt)
        if value_action == 'max':
            update_if(max_dict, dctkey, value, operator.gt)

plpy.notice('seen %s summary rows and %s categories' % (len(rowkeys_seen),
                                                        len(categories_seen)))

# get the columns types
coltype_dict = dict()
input_type_sql = 'select * from %s where false' % plpy.quote_ident(input_table)
input_type_result = plpy.execute(input_type_sql)
for index, colname in enumerate(input_type_result.colnames()):
    coltype_num = input_type_result.coltypes()[index]
    coltype_sql = 'select typname from pg_type where oid = %s' % coltype_num
    coltype = list(plpy.cursor(coltype_sql))[0]
    plpy.notice('%s: %s' % (colname, coltype['typname']))
    coltype_dict[colname] = coltype['typname']

plpy.execute('drop table if exists %s' % plpy.quote_ident(output_table))
sql_parts = []
if keep_result:
    sql_parts.append('create table %s (' % plpy.quote_ident(output_table))
else:
    sql_parts.append('create temp table %s (' % plpy.quote_ident(output_table))

cols = []
for row_header in row_headers:
    cols.append('%s %s' % (plpy.quote_ident(row_header), coltype_dict[row_header]))

cat_type = 'bigint' if value_action == 'count' else coltype_dict[value_field]

for col in sorted(categories_seen):
    if col is None:
        cols.append('%s %s' % (plpy.quote_ident(NULL_CATEGORY_NAME), cat_type))
    else:
        cols.append('%s %s' % (plpy.quote_ident(col), cat_type))

if do_total:
    cols.append('%s %s' % (TOTAL_COL, cat_type))

sql_parts.append(',\n'.join(cols))
if keep_result:
    sql_parts.append(')')
else:
    sql_parts.append(') on commit drop')
plpy.execute('\n'.join(sql_parts))

dict_map = {'count': count_dict, 'sum': sum_dict, 'min': min_dict, 'max': max_dict }
value_dict = dict_map[value_action]
for rowkey in rowkeys_seen:
    sql = 'insert into %s values (' % plpy.quote_ident(output_table)
    sql += ', '.join([quote_if_needed(part) for part in rowkey])
    sql += ')'
    plpy.execute(sql)

if do_total:
    for rowkey, value in total_dict.iteritems():
        update_output_table(output_table, row_headers, TOTAL_COL, value)

for (rowkey, category), value in value_dict.iteritems():
    # put in cateogry value
    colname = NULL_CATEGORY_NAME if category is None else category
    update_output_table(output_table, row_headers, colname, value)

$$ language plpythonu 
```

# objective-c - 处理保留/释放/自动释放和类变量的麻烦

> ID：12988578
> 
> 赞同：0
> 
> 时间：2012-10-20T12:45:36.540
> 
> 标签：objective-c, pointers, memory-management, retain

我正在创建的测试应用程序中发生了一些崩溃，我很确定它来自内存管理。以下是与此问题相关的三个问题：

***问题一：***

```
// Within singleton : GraphicsUtility
-(UIColor*)GetRandomColor
{
    float l_fRandomRedColor = [[MathUtility instance] GetRandomFloatNumberBetweenNumber:0.0f AndNumber:1.0f];
    float l_fRandomBlueColor = [[MathUtility instance] GetRandomFloatNumberBetweenNumber:0.0f AndNumber:1.0f];
    float l_fRandomGreenColor = [[MathUtility instance] GetRandomFloatNumberBetweenNumber:0.0f AndNumber:1.0f];

    return [UIColor colorWithRed:l_fRandomRedColor
                    green: l_fRandomGreenColor
                        blue: l_fRandomBlueColor
                        alpha: 255];
} 
```

现在，我真的不知道如何在不重新发明轮子的情况下返回指向该对象的指针。由于该方法`colorWithRed:green:blue:alpha`不分配或创建（新）任何东西，我认为我不应该`retain`这样做。

我`autorelease`应该吗？

***问题乙：***

现在在另一个类中获取对象时，如下所示：

```
// Within class : Test.
// mpCurrentPieceColor is a class variable.
mpCurrentPieceColor = [[GraphicsUtility instance] GetRandomColor]; 
```

由于我正在存储指向`UIColor`对象的指针，我是否需要再次保留它？

所以当改变我的颜色时，我应该这样做吗？

```
// Within class : Test.
// mpCurrentPieceColor is a class variable.
[mpCurrentPieceColor release];
mpCurrentPieceColor = [[GraphicsUtility instance] GetRandomColor];
[mpCurrentPieceColor retain]; 
```

对我来说似乎完全错误......

***问题 C：***

最后，在我的`dealloc`方法中，我正在这样做：

```
// Within class : Test
-(void) dealloc
{
    // never forget to call [super dealloc]
    [super dealloc];

    [mpCurrentPieceColor release];
} 
```

这是对的吗 ？

我发现的“最佳”解决方案（也是更糟糕的:)）是在某些地方使用保留......我没有再崩溃了，但显然，我最终出现了内存泄漏......任何帮助都是非常感激 ！谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T16:23:40.777

A：不要自动释放。您调用的方法返回一个自动释放的对象；你只是充当传递者。

B & C：这些对我来说看起来都还可以。从逻辑上讲，您发布的颜色可能应该在`[super dealloc]`.

不过，我不太确定“类变量”是什么意思。在单例中，您可以将`mpCurrentPieceColor`其用作强（或保留）属性，使用它访问它，`self.mpCurrentPieceColor`并且分配周围的释放/保留将消失。（当然，如果你切换到 ARC，整个问题就会消失。）

另一点是“产品->分析”菜单选项应该能够为您标记此类问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T16:24:02.320

问题 A 和 B 有点令人困惑，因为您没有使用正确的方法名称。“get”在 Cocoa 中有特殊的含义，很少使用。您可能只想要“randomColor”作为名称。它应该返回一个自动释放的对象，但是 colorWithRed:green:blue:alpha 会这样做，所以除了看起来不错的名称。

假设您要返回一个自动释放的对象，您将需要保留结果，并在完成后释放它。

你的 dealloc 肯定是不对的。[super dealloc] 将完成销毁对象。之后您就不能再使用对象的各个部分 (mpCurrentPieceColor)。你应该总是最后调用 [super dealloc]，因为它是销毁对象的最后一步。

# ios - 如何在 UIImageView 中修剪透明空间？

> ID：12988581
> 
> 赞同：0
> 
> 时间：2012-10-20T12:46:18.447
> 
> 标签：ios, uiimageview

我有一个可以将图像拖到视图中的任何位置的应用程序，但我的问题是，当另一个图像落后于另一个图像时，除了移动上面的图像之外，没有办法直接移动后面的图像。我发现只有修剪`UIImage`，但它仍会显示`UIImageView`为矩形。我想修剪空白，以便可以直接单击图像后面。

我怎样才能绊倒`UIImageView`透明空间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T13:01:25.110

您可以创建一个位图，然后检查每个像素。您将在此处找到执行此操作的代码。一旦知道了确切的尺寸，您就可以使用 Quartz`CGImageRef`函数从较大的图像中提取出较小的图像。

也就是说，您可以添加一个手势识别器并使用说双击作为将图像移动到视图堆栈底部的信号。如果我要使用您的应用程序，我相信这是一个更好的解决方案。

# php - php用逗号和引号解析字符串

> ID：12988582
> 
> 赞同：-2
> 
> 时间：2012-10-20T12:46:19.397
> 
> 标签：php, regex, string, parsing, quotes

我正在尝试将以下字符串解析为数组。

```
$str = [0,"Victoria Station, Bus Station Stand",null,null,0,null,51.496169,-0.143633] 
```

我在用

```
$result = explode(',', $str); 
```

我得到一个像这样的数组

```
Array ( [0] => [0 [1] => "Victoria Station [2] => Bus Station Stand" [3] => null [4] => null [5] => 0 [6] => null [7] => 51.496169 [8] => -0.143633] ) 
```

但我需要“维多利亚站，巴士站站”作为数组中的一项。我知道这可以通过正则表达式来实现。但我对此并不陌生。您的指导将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T12:49:41.687

这看起来像`json`我试试

```
$str = '[0,"Victoria Station, Bus Station Stand",null,null,0,null,51.496169,-0.143633]';
$json = json_decode($str, true);

echo "<pre>";
var_dump($json); 
```

输出

```
array
  0 => int 0
  1 => string 'Victoria Station, Bus Station Stand' (length=35)
  2 => null
  3 => null
  4 => int 0
  5 => null
  6 => float 51.496169
  7 => float -0.143633 
```

# android-sqlite - android中的SQlite语法错误

> ID：12988584
> 
> 赞同：1
> 
> 时间：2012-10-20T12:47:05.057
> 
> 标签：android-sqlite

```
public class ListsSQLiteOpenHelper extends SQLiteOpenHelper {

public static final int VERSION = 1;
public static final String DB_NAME  = "lightsettings_db.sqlite";
public static final String ITEMS_TABLE  = "light_setting_items";
public static final String ITEM_ID = "id";
public static final String ITEM_TYPE = "type";
public static final String ITEM_VALUE = "values";
public static final String ITEM_BUSTYPE = "bustype";
public static final String ITEM_LIGHTTYPE = "lighttype";
public static final String ITEM_SELECT  = "select";

public ListsSQLiteOpenHelper(Context context) {
    super(context, DB_NAME, null, VERSION);
}

@Override
public void onCreate(SQLiteDatabase db) {
    createTable(db);
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

}

protected void createTable(SQLiteDatabase db) {
    db.execSQL(
            "create table " + ITEMS_TABLE +" (" +
            ITEM_ID + " integer primary key autoincrement not null," +
            ITEM_TYPE + " text" +
            ITEM_VALUE + " text" +
            ITEM_BUSTYPE + " text" +
            ITEM_LIGHTTYPE + " text" +
            ITEM_SELECT + " text" +
            ");"
        );
}
}
private ArrayList<Entry> currentEntries;

private long lineNumber = 1;

private SQLiteDatabase database;

@Override
public void onCreate() {
    super.onCreate();
    ListsSQLiteOpenHelper helper = new ListsSQLiteOpenHelper(this);
    database = helper.getWritableDatabase();
    if(currentEntries == null){
        loadItems();
    }
}

private void loadItems() {
    currentEntries = new ArrayList<Entry>();

    Cursor itemsCursor = database.query(
            ITEMS_TABLE,
            new String[] {ITEM_ID, ITEM_TYPE, ITEM_VALUE, ITEM_BUSTYPE, ITEM_LIGHTTYPE, ITEM_SELECT},
            null, null, null, null, String.format("%s,%s", ITEM_SELECT, ITEM_TYPE));

    itemsCursor.moveToFirst();
    Entry e;
    if(!itemsCursor.isAfterLast()){
        do{
            long id = itemsCursor.getLong(0);
            String type = itemsCursor.getString(1);
            String value = itemsCursor.getString(2);
            String bustype = itemsCursor.getString(3);
            String lighttype = itemsCursor.getString(4);
            String boolvalue = itemsCursor.getString(5);
            boolean select = Boolean.parseBoolean(boolvalue);
            e = new Entry(id, type, value, bustype, lighttype);
            e.setRowId(id);
            e.setSelected(select);
            currentEntries.add(e);
        } while(itemsCursor.moveToNext());
    }

    itemsCursor.close();
} 
```

我收到语法错误

```
database.query(ITEMS_TABLE,
                new String[] {ITEM_ID, ITEM_TYPE, ITEM_VALUE, ITEM_BUSTYPE, ITEM_LIGHTTYPE, ITEM_SELECT},
                null, null, null, null, String.format("%s,%s", ITEM_SELECT, ITEM_TYPE)); 
```

我不明白为什么会收到此错误：

> 10-19 17:01:37.925: E/AndroidRuntime(23164): java.lang.RuntimeException: Unable to create application com.example.abc.EntryManagerApplication: android.database.sqlite.SQLiteException: near "values": 语法错误： , 编译时：SELECT id, type, values, bustype, lighttype, selected FROM light_setting_items ORDER BY selected,type

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T07:18:52.767

'values' 是一个 SQL 关键字。如果您坚持将其用作字段名称，请将其放在双引号之间。

# objective-c - 靠近某个位置时的 Phonegap iPhone 应用程序通知

> ID：12988585
> 
> 赞同：2
> 
> 时间：2012-10-20T12:47:14.170
> 
> 标签：objective-c, cordova

我正在使用 Cordova 为 iPhone 创建一个应用程序。我对objective-c不是很好，但之前写过一些插件，所以如果需要我可以。

我有连锁店的位置列表（gps 线）。每当应用程序的用户靠近某个位置时，我想弹出一个通知。

phonegap 支持这个吗？如果没有，谁能指出我在objective-c中实现这一点的正确方向？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T12:55:44.670

是的，它确实！首先，您应该有一个 watchPosition 来获取用户移动时的新位置。

有关 watchPosition 的更多信息，请参见此处：

[http://docs.phonegap.com/en/2.1.0/cordova_geolocation_geolocation.md.html#geolocation.watchPosition](http://docs.phonegap.com/en/2.1.0/cordova_geolocation_geolocation.md.html#geolocation.watchPosition)

然后，根据用户与兴趣点的接近半径，您应该使用弹出窗口进行通知。

**编辑**

如果你首先使用谷歌地图，你应该初始化地图并调用函数 geolocalization，然后如果距离小于 1Km，则使用函数 calculateNearLocation 在 POI 数组中查找。如果是这样，它会通过振动发出警报。

使用谷歌地图的代码将是这样的：

```
 var watchID = null;
  function geolocalization()
  {
      //Each 3 seconds looks new position
  var options = { frequency: 3000 };
  watchID = navigator.geolocation.watchPosition(onSuccessG, onErrorG, options);
   } 
```

地理定位成功后：

```
 function onSuccessG(position) {
   var mipos = new google.maps.LatLng(position.coords.latitude,position.coords.longitude); 
calculateNearLocation(mipos);
 } 
```

用于计算用户的位置是否在 POI 附近：

```
 function calculateNearLocation(mipos) {
   var indice = 0;
   $.each(listPOI, function() {

    var distanceBetween = Math.ceil(google.maps.geometry.spherical.computeDistanceBetween(new google.maps.LatLng(listPOI[indice].latitudes, listPOI[indice].longitudes), mipos));

    if(distanceBetween < 10000) {
        navigator.notification.vibrate(2000);

    }
    indice++;
});
  } 
```

# php - PHP表单在添加新字段时出现问题

> ID：12988586
> 
> 赞同：-1
> 
> 时间：2012-10-20T12:47:15.827
> 
> 标签：php, forms

我从 codecanyon 购买了以下脚本

[http://codecanyon.net/item/contact-me-contact-form-admin-panel-v2/148836](http://codecanyon.net/item/contact-me-contact-form-admin-panel-v2/148836)

然后我将脚本添加到我的网站模板中。我在 $fname 变量下添加了一个新字段。

编辑前：

```
<label>First Name:</label>
<input type="text" name="firstName" style="width:400px;" value="<?php if($_GET['fname']) echo urldecode($_GET['fname']); ?>" /> 
```

编辑后：

```
<select type="select" name="fname" id="colorselector" class="styled" value="<?php if($_GET['fname']) echo urldecode($_GET['fname']); ?>" />
   <option value="slct">Please select a forum you saw me on</option>
   <option value="hf <?php if($_GET['fname']) echo urldecode($_GET['fname']); ?>">Hackforums (_Jony_)</option>
   <option value="sy <?php if($_GET['fname']) echo urldecode($_GET['fname']); ?>">Sythe (Purepks0r)</option>
   <option value="rs <?php if($_GET['fname']) echo urldecode($_GET['fname']); ?>">R-S (Purepks0r)</option>
</select>
<br />
<div id="slct" class="colors">You haven't selected any forum.</div>
<div id="hf" class="colors" style="display:none"> <span id="brdr">HackForums:</span> Discount Percent: <font color="green">10%</font> </div>
<div id="sy" class="colors" style="display:none"> <span id="brdr">Sythe:</span> Discount Percent: <font color="green">15%</font> </div>
<div id="rs" class="colors" style="display:none"> <span id="brdr">Rune-Server:</span> Discount Percent: <font color="green">15%</font> </div>
<br /> 
```

基本上我使用 fname 作为选择标签，它应该做同样的事情，将选择的信息存储到管理面板。

我尝试将代码恢复为默认值并且它有效，为什么当我实际选择下拉菜单时它说该字段为空白？

错误检查系统：

我不确定，但我会给出 order.php 页面和 config.ini

订单.php

```
<?php
session_start();
require_once('captcha/Captcha.php');
$captcha = new Captcha();
$captcha->newCaptcha(session_id());
?>
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
<title>SlyFiles</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="SlyFiles upload" />
<link rel="stylesheet" href="css/style.css" type="text/css" media="screen"/>
<link rel="stylesheet" href="css/bootstrap.css" type="text/css" media="screen"/>
<link href='http://fonts.googleapis.com/css?family=Dosis' rel='stylesheet' type='text/css'><link rel="stylesheet" href="css/flexslider.css" type="text/css"><script src="js/jquery.flexslider.js"></script><!-- Place in the <head>, after the three links --><script type="text/javascript" charset="utf-8">$(window).load(function() {  $('.flexslider').flexslider({    animation: "slide"  });});</script>
<link rel="stylesheet" href="flexslider.css" type="text/css">
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<script src="js/jquery.flexslider.js"></script>
<script type="text/javascript" src="js/jquery.easing.1.3.js"></script>
<script type="text/javascript" src="js/jquery.lavalamp-1.4.js"></script>
<script type="text/javascript" src="js/jquery.reveal.js"></script>
<script type="text/javascript" src="js/bootstrap.min.js"></script>
<link href='http://fonts.googleapis.com/css?family=Doppio+One' rel='stylesheet' type='text/css'>
</head>
<header>
<div class="container">
  <div class="menu">
<a href="index.php"><div id="logo"></div></a>
<a href="index.php"><div id="home"></div></a>
<a href="portfolio.php"><div id="portfolio"></div></a>
<a href="vouch.php"><div id="vouch"></div></a>
<a href="tos.php"><div id="tos"></div></a>
<a href="order.php"><div id="order-current"></div></a>
  </div>
  <div id="banner"></div>
  <div id="borderbottom"></div>
</div>
</header>
<body>
<div class="container">
<div class="forms">
    <form action="next.php?c=Zm5leHQ=" method="post">
    <br /><br /><center><?php
    /*
        This code should be where you want your error messages shown.
    */
    //Edit this according to your design taste
    $errStyle = 'border: 1px solid red; color: red; width: 410px; padding: 5px; margin: 0 0 15px 0;';
    //----------------------------------
    //----No editing from here----
    //----------------------------------
    /*
        This script displays errors from the form, if any. To edit the messages itself, see err_message.php in the same folder.
    */
    include_once 'err_message.php';
    $no = base64_decode(htmlentities(strip_tags(filter_input(INPUT_GET, 'no'))));
    if($no == NULL) {} else {
    print <<<HERE
    <div style="max-width: 600px; float: left;" class="alert alert-error">
HERE;
    print $errorMes[$no];
    if($errorMes[$no]==NULL) print '<script>location.href="javascript: history.go(-1)"</script>';
    print '</div>';
    }
    ?></center>
    <br /><br /><br />
    <div class="tos1">
<input type="checkbox" id="new_info_yes" class="box1"> I agree to the <a href="#">Terms of Service</a>.
    </div>
    <br />
    <div class="creater">
<div id="new_info_form">
<select type="select" name="fname" id="colorselector" class="styled" value="<?php if($_GET['fname']) echo urldecode($_GET['fname']); ?>" />
   <option value="slct">Please select a forum you saw me on</option>
   <option value="hf <?php if($_GET['fname']) echo urldecode($_GET['fname']); ?>">Hackforums (_Jony_)</option>
   <option value="sy <?php if($_GET['fname']) echo urldecode($_GET['fname']); ?>">Sythe (Purepks0r)</option>
   <option value="rs <?php if($_GET['fname']) echo urldecode($_GET['fname']); ?>">R-S (Purepks0r)</option>
</select>
<br />
<div id="slct" class="colors">You haven't selected any forum.</div>
<div id="hf" class="colors" style="display:none"> <span id="brdr">HackForums:</span> Discount Percent: <font color="green">10%</font> </div>
<div id="sy" class="colors" style="display:none"> <span id="brdr">Sythe:</span> Discount Percent: <font color="green">15%</font> </div>
<div id="rs" class="colors" style="display:none"> <span id="brdr">Rune-Server:</span> Discount Percent: <font color="green">15%</font> </div>
<br />

    <label>Last Name:</label> 
    <input type="text" name="lastName" style="width:420px;" value="<?php if($_GET['sname']) echo urldecode($_GET['sname']); ?>" />

    <label>Phone Number:</label> 
    <input type="text" name="phone" style="width:420px;" value="<?php if($_GET['phoneno']) echo urldecode($_GET['phoneno']); ?>" />

    <label>Email Address:</label> 
    <input type="text" name="email1" style="width:420px;" value="<?php if($_GET['email']) echo urldecode($_GET['email']); ?>" />

    <label>Confirm Email Address:</label> 
    <input type="text" name="email2" style="width:420px;" />

    <label>Message:</label> 
    <textarea name="message" style="width:420px;height:150px;" ><?php if($_GET['mes']) echo urldecode($_GET['mes']); ?></textarea>
<br />
        <img src="captcha/image.php?sid=<?php echo session_id(); ?>&color=grey" alt="" />
        <label>Captcha:</label>
        <input type="text" name="captcha" style="width:400px;" />
<br />
    <input type="submit" value="Send" style="background: #575757; color: #ffffff; border: none; padding: 3px 5px; width:420px; height:40px;" />

      </form>
    </div>
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){

    $('input#upload_yes').change(function(){
        if($(this).is(':checked')) {
            $("#upload_form").show();
        } else {
            $("#upload_form").hide();
        }
    });

    $('input#new_info_yes').change(function(){
         if($(this).is(':checked')) {
                $("#new_info_form").slideDown(500);
        } else {
                $("#new_info_form").delay(300).slideUp(500);;
        }   
    });

    //Trigger the change event so the divs are initially shown or hidden.
    $('input[type=checkbox]').trigger('change');

});
</script>
<script type="text/javascript">
    $(function() {
        $('#colorselector').change(function(){
            $('.colors').hide();
            $('#' + $(this).val()).show();
        });
    });
    </script> 
  </div>
</div>
</body>
<footer>
<div class="container">
  <div class="footer">
  <span id="footer">
  JonyDesigners &copy; 2012, All rights reserved.
  </div>
</div>
</footer>
<script src="http://twitter.com/javascripts/blogger.js" type="text/javascript"></script>
<script src="https://api.twitter.com/1/statuses/user_timeline/rapturesgfx.json?callback=twitterCallback2&count=4" type="text/javascript"></script>
</html> 
```

配置文件

```
<?php

/*
This file sets up all the MySQL database and tables, as well as the functions needed in other scripts.
You should only edit the next few lines.
*/

//Change these two variables to your own MySQL username and password.
$mysqluser = "justxpp1_test";
$mysqlpass = "censored";

//Change this variable to your MySQL host's name.
$mysqlhost = "localhost";

//Change this variable to the file path of the form.
$form = "order.php";

//This variable defines the database name.
$dbname = "justxpp1_test";

//Captcha toggle
$captchatoggle = TRUE;

//--------------------------------------------------
//----------Do not alter beyond this point----------
//--------------------------------------------------

//Starts session
session_start();

require_once('captcha/Captcha.php');
$captchaobject = new Captcha();

//Establish MySQL connection
$dbp = mysql_connect($mysqlhost, $mysqluser, $mysqlpass);
if(!$dbp) die('There was an error while connecting to the database'.mysql_error());
//This part sets up the database if not set up already
$result = mysql_query("CREATE DATABASE IF NOT EXISTS `$dbname`;", $dbp);mysql_select_db($dbname, $dbp);
//Creates table named "records"
$result = mysql_query("CREATE TABLE IF NOT EXISTS records (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,firstname VARCHAR (15) NOT NULL,surname VARCHAR (20) NOT NULL,email VARCHAR (40) NOT NULL,phoneno VARCHAR (15) NOT NULL, message TEXT NOT NULL, date VARCHAR (20) NOT NULL, replied TEXT NOT NULL, reply TEXT NOT NULL);", $dbp);
//Creates table named "administrators"
$result = mysql_query("CREATE TABLE IF NOT EXISTS administrators (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,username VARCHAR (12) NOT NULL,password VARCHAR (137) NOT NULL,adminemailaddress VARCHAR (60) NOT NULL,notificationoption TEXT NOT NULL);", $dbp);
//Creates an administrative account with username 'admin' and password 'admin'
$result = mysql_query("INSERT INTO administrators VALUES(1, 'admin', '21232f297a57a5a743894a0e4a801fc3', 'example@example.com', 'no');", $dbp);
//Stop error from being output to the page
error_reporting(0);
//Declare functions needed for the rest of script
function gotoPage($location) {
    print <<<HERE
    <script>location.href="$location"</script>
HERE;
}
function showErr($err_num,$fname, $username, $sname, $email, $phoneno, $mes) {
    global $form;
    $err_num = base64_encode($err_num);
        $username = urlencode($username);
        $fname = urlencode($fname);
        $sname = urlencode($sname);
        $email = urlencode($email);
        $phoneno = urlencode($phoneno);
        $mes = urlencode($mes);
    print <<<HERE
    <script>location.href="$form?no=$err_num&fname=$fname&username=$username&sname=$sname&email=$email&phoneno=$phoneno&mes=$mes"</script>
HERE;
}
function admin_showErr($place, $err_num) {
    $err_num = base64_encode($err_num);
    print <<<HERE
    <script>location.href="contactFormAdmin/$place?no=$err_num"</script>
HERE;
}
function validate($fname, $username, $sname, $email, $email_con, $phoneno, $mes, $captchaentered) {
    global $dbp;
        global $captchaobject;
        global $captchatoggle;
    if (strlen($fname)<1 || strlen($sname)<1 || strlen($email)<1 || strlen($email_con)<1 || strlen($mes)<1) {
        //Execute if one or more of the fields were less than 2 characters
        showErr(0,$fname, $sname, $username, $email, $phoneno, $mes);
    } else if($email!==$email_con) {
        //Execute if confirm email did not match email
        showErr(1,$fname, $sname, $email, $phoneno, $mes);
    } else if(strstr($email, "@")==NULL||strstr($email, ".")==NULL) {
        //Execute if email does not have an @ or a period(.)
        showErr(2,$fname, $sname, $email, $phoneno, $mes);
        } else if($captchatoggle == TRUE && ($captchaentered !== $captchaobject->getCaptcha(session_id()) || $captchaentered == null || $captchaentered == "")) {
                //Execute on captcha error
                showErr(3,$fname, $sname, $email, $phoneno, $mes);
    } else {
        //Execute if all the fields validate
        $date = date("d/M/Y");
        $new = "new";
                $noreply = "";
        $result = mysql_query("INSERT INTO records VALUES (NULL, '$fname', '$sname', '$username', '$email', '$phoneno', '$mes', '$date', '$new', '$noreply')", $dbp);
        $tmp = mysql_fetch_assoc(mysql_query("SELECT * FROM administrators WHERE id=1"));
        $adminemail = $tmp['adminemailaddress']; 
                $notificationoption = $tmp['notificationoption'];
                $esubject = "New message at Contact Me Admin!";
                $emessage = "You have received a new message in your Contact Me Admin!";
        if ($notificationoption == "yes") {mail("$adminemail","$esubject","$emessage");}
        gotoPage("success_pageForwarder.php");
    }
}
function checklogin($username, $password) {
    global $dbp;
    //Check if username and password are valid
    $num_rows = mysql_num_rows(mysql_query("SELECT password FROM administrators WHERE username='$username'", $dbp));
    $tmp = mysql_fetch_assoc(mysql_query("SELECT password FROM administrators WHERE username='$username'", $dbp));
    if($num_rows==0) return false;
    else if($password!==$tmp['password'])  return false;
    else if($num_rows==1&&$password==$tmp['password']) return true;
    else return false;
}
function login($username) {
    $_SESSION['loggedin'] = "$username";
    gotoPage("contactFormAdmin/panelHome.php");
}
function logout() {
    if(isset($_SESSION['loggedin'])) {
        session_destroy();
        unset($_SESSION['loggedin']);
        gotoPage("contactFormAdmin/index.php");
    } else {
        gotoPage("javascript: history.go(-1)");
    }
}
function auth() {
    if((!isset($_SESSION['loggedin']))||(!$_SESSION['loggedin'])) gotoPage("index.php");
}
function changepw($username, $password) {
    global $dbp;
    $password = md5($password);
    $result = mysql_query("UPDATE administrators SET password='$password' WHERE username='$username';", $dbp);
    gotoPage("contactFormAdmin/panelHome.php");
}
function checkchangepw($username, $oldpw, $newpw, $newpw_con) {
    global $dbp;
    $oldpw = md5($oldpw);
    $temp = mysql_fetch_assoc(mysql_query("SELECT password FROM administrators WHERE username='$username'", $dbp));
    $realoldpw = $temp['password'];
    if($newpw!==$newpw_con) {
        admin_showErr('changePw.php', 1);
    } else if($realoldpw!==$oldpw) {
        admin_showErr('changePw.php', 3);
    } else {
        changepw($username, $newpw);
    }
}
function lastid($table) {
    $tmp = mysql_fetch_assoc(mysql_query("SELECT MAX(id) FROM $table"));
    return $tmp['MAX(id)'];
}
function firstid($table) {
    $tmp = mysql_fetch_assoc(mysql_query("SELECT MIN(id) FROM $table"));
    if($tmp['MIN(id)']==NULL) return 0;
    else return $tmp['MIN(id)'];
}
function deleteRecord($id) {
    global $dbp;
    $result = mysql_query("DELETE FROM records WHERE id=$id", $dbp);
}
?> 
```

我需要你们帮助我找出导致系统认为选择标签为空的原因。

我认为这与 config.ini 中的错误检查系统有关。

我没有描述问题：当填写包括选择选项在内的所有内容时，它会显示一条错误消息，指出某些内容为空，删除代码后，它可以工作。

这是什么原因造成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T12:58:29.317

```
<select type="select" name="fname" id="colorselector" class="styled" value="<?php if($_GET['fname']) echo urldecode($_GET['fname']); ?>" /> 
```

选择框关闭时`</select>`不带`/>`

```
<select type="select" name="fname" id="colorselector" class="styled" value="<?php if($_GET['fname']) echo urldecode($_GET['fname']); ?>"> 
```

试试那个..

```
 <select name="fname" id="colorselector" class="styled">
   <option value="slct" <?php if($_GET['fname'] && urldecode($_GET['fname'])=="slct") echo 'selected="selected"'; ?>>Please select a forum you saw me on</option>
   <option value="hf" <?php if($_GET['fname'] && urldecode($_GET['fname'])=="hf") echo 'selected="selected"'; ?>>Hackforums (_Jony_)</option>
   <option value="sy" <?php if($_GET['fname'] && urldecode($_GET['fname'])=="sy") echo 'selected="selected"'; ?>>Sythe (Purepks0r)</option>
   <option value="rs" <?php if($_GET['fname'] && urldecode($_GET['fname'])=="rs") echo 'selected="selected"'; ?>>R-S (Purepks0r)</option>
</select> 
```

# java - 进程 InputStream 中丢失的特殊字符

> ID：12988588
> 
> 赞同：1
> 
> 时间：2012-10-20T12:47:25.530
> 
> 标签：java, character-encoding

这不是上一个问题的重复，我发现问题出在流程上。

我的程序有问题，Java 进程的 InputStream 中似乎丢失了特殊字符。

我正在使用的代码如下：

```
String command = "/usr/local/bin/getTitle <URL>";
Process shellCommand = Runtime.getRuntime().exec(command);
BufferedReader stdInput = new BufferedReader(new InputStreamReader(shellCommand.getInputStream(), "UTF-8"));
String output = null;
while ((output = stdInput.readLine()) != null) {
    System.out.println(output);
} 
```

如果我从命令行运行“命令”，我会得到以下输出：

```
PSY_-_GANGNAM_STYLE_(강남스타일)_M_V 
```

但是， System.out.println(output); 的输出 如下：

```
PSY_-_GANGNAM_STYLE_()_M_V 
```

这完全破坏了我的程序。

我完全被难住了，在我的搜索中我什至没有找到任何与此相关的东西。非常感谢任何帮助！提前致谢。

**更新：**

如果我更改命令如下：

```
String command="echo 'PSY_-_GANGNAM_STYLE_(강남스 타일)_M_V'"; 
```

然后在打印输出时正确显示特殊字符。这是否有助于理解问题所在？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T13:41:12.910

很明显，这个问题是由某处的字符编码不匹配引起的。它可能位于的两个位置是从外部进程读取的 Reader 堆栈，或`System.out`. （后者似乎不太可能）。

这是我要做的：

*   从命令行运行`locale`命令以查看命令 shell 使用的字符编码。

*   检查编码是否与 Java 默认字符编码相同

*   检查它们是否与您用于从外部进程读取的编码相同。（您已将其硬连线到“UTF-8”......）

如果这不能揭示问题的根源，请尝试将`command`字符串替换为`"locale"`以查看哪些区域设置会传播到外部进程。

如果这不起作用，请尝试将外部命令的输出捕获为字节，以十六进制显示，并尝试将它们手动解码为 UTF-8 和其他可能的字符集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T12:57:29.523

我的猜测是该命令以操作系统的默认编码返回一个字符串，即 Mac 上的 Mac OS Roman。您将其读取为 UTF-8。如果您弄清楚编码是什么并将其传递给 InputStreamReader 的构造函数，它应该会给出更好的结果。

如果您在 Java 中创建字符串然后将其传递给它工作正常，因为字符串不是由操作系统生成的，而是由您的 Java 进程生成的。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-10-20T13:18:34.237

**更新 ：**

即使程序用 打印输出`UTF-8`，我也不确定，您是否会看到预期的输出，也可能看不到。因为，当我使用`Eclipse IDE`其他编码格式进行测试时，我看不到我的输出（日文字符）。但是当我更改为`UTF-8`IDE 中的编码时。我看到日文字符。这就是为什么，它也取决于您的环境编码系统。

```
String output = null;
while ((output = stdInput.readLine()) != null) {
    String utf8OutPut = output.getBytes("UTF-8");
    System.out.println(utf8OutPut);
} 
```

# css - IE8：在不使用 jQuery 选择器之后

> ID：12988591
> 
> 赞同：3
> 
> 时间：2012-10-20T12:47:38.277
> 
> 标签：css, internet-explorer-8, cross-browser

我试图`:last-child`与 IE8 一起使用，但是在阅读了关于这里的几个线程之后，确定，它只是没有发生'bub。所以 - 我采用了下一个最佳路线，即使用 jQuery 用 CSS 附加到`last-child`类上，执行以下操作：

```
$('.section-header > span:last-child').addClass('last-child'); 
```

它确实在 IE8 中添加了适当的类。但是，当我去设计风格时，它似乎不起作用。这在网站上的几个地方很明显，[位于此处](http://zslabs.com/sample/cofc/)（与 Chrome 等真正体面的浏览器相比）：

*   顶部导航，不删除项目的最后一个`border-right`属性`<li>`
*   `#top-grid`不添加箭头（使用`:before`and `:after`）
*   `.section-header`不应用`padding-left`我已经为两者指定`:last-child`或`.last-child`（使用 jQuery 完成）
*   日历，不向选定选项卡添加顶部边框颜色

所以 - 显然有很多不一致的领域 - 我并不是真的在寻找“这是你如何单独修复每一个”，更多的是“这是你对 IE8 缺少的概念”。我已经尝试过声明一个文档类型（另一个线程已经提到过），但几个小时后，你开始让自己发疯:) 我真的很感激任何朝着正确方向的轻推。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T13:28:34.587

问题是您将您的选择器`:last-child`和`.last-child`选择器分组在同一个规则集中。这会导致 IE8 由于`:last-child`部分原因而忽略整个规则集，这意味着它也会忽略您的`.last-child`部分。

由于无论如何您都在使用 jQuery 添加类，因此您最好删除选择器的`:last-child`一部分并让它在所有浏览器中工作。

或者，如果您希望禁用脚本的浏览器查看您的`:last-child`规则，则必须拆分选择器并为每个选择器复制样式规则。

# winapi - 获取非客户端“关闭”按钮的 hWnd [x] (win32)

> ID：12988598
> 
> 赞同：0
> 
> 时间：2012-10-20T12:48:57.240
> 
> 标签：winapi

我的应用程序需要显示一个指向`upper-right`角`[x]`按钮的信息气球，指示必须通过单击`pointed [x]`按钮关闭窗口。

出于这个原因，我需要获取`[x]`按钮`hWnd`，或者如果知道它的（未记录的）资源 ID。你们知道如何用普通的`win32?`

我已经尝试过处理非客户端元素指标的其他替代方案，但它们都给出了不一致的结果（考虑我的应用程序从`W2K`to运行`W8`）

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T13:03:51.243

关闭按钮没有窗口，也没有单独的`HWND`. 相反，它与可能的其他元素一起绘制，`WindowProc`作为非客户区的一部分。

# iphone - iOS 核心数据抽象类和子类

> ID：12988599
> 
> 赞同：0
> 
> 时间：2012-10-20T12:49:24.077
> 
> 标签：iphone, ios, core-data, abstract

我正在将 CoreData 添加到现有的 iOS 项目中，并且在从抽象类继承的子类中显示数据时遇到问题。

我有一个抽象类 ( `Object`)，它为我想要的子实体/具体类定义了一组共享字段。例如，抽象类包含`title`, `startDate`。它在数据模型中设置为具有`Object`. `Object`被设置为数据模型中的抽象类。

我的子实体 ( `Expense`) 有一个属性`amount`（除其他外）。

我通常会这样开始创建我的费用：

```
Expense *expense = [NSEntityDescription insertNewObjectForEntityForName:NSStringFromClass([Expense class]) inManagedObjectContext:[Store sharedStore].managedObjectContext]; 
```

然后设置我想要的属性：

```
expense.amount = [NSDecimalNumber decimalNumberWithString:amountString];
expense.title = title;
expense.startDate = [NSDate dateFromString:dateString withFormat:@"yyyy-MM-dd"];
(other properties on expense set here)
.
. 
```

然后我会在我的上下文中调用 save ：

```
[[Store sharedStore].managedObjectContext save:&error]; 
```

这将返回`YES`以存储到 CoreData。

**但是**，当我尝试记录费用的金额（或其任何其他设置属性）时，它们会根据属性类型显示为 nil、0 等。

我的项目中有其他基本实体/模型以这种方式保存得很好，所以这与我的 CoreData 设置或处理对象上下文的 Store 类无关。抽象类出现了具体问题。

如何设置我的抽象类的子实体以正确保存该子类的属性？我正在转动我的轮子，似乎无法在 Apple 文档或在线任何地方找到一个很好的例子来说明如何做到这一点。任何事情都值得赞赏。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T18:33:55.853

经过大量调试，并直接联系@PhillipMills，我们能够解决问题，我希望其他人不必花时间拉扯头发。:)

类上的拥有`- (void)setAmount`和`- (void)setPayee`方法`Object`导致所需的设置器被覆盖。我不是故意实现这些，但`Object`在我将 CoreData 引入我的项目之前，它们就存在于我的课堂上。

删除 Object 类上的那些 getter 和 setter 使事情按预期工作。非常感谢菲利普的帮助！

# ios - touchesMoved 用于多个 UIImageViews

> ID：12988601
> 
> 赞同：0
> 
> 时间：2012-10-20T12:49:36.593
> 
> 标签：ios, xcode, uiimageview, touchesmoved

我有多个`UIImageViews`放置在以编程方式添加的 NxN 网格视图上`UIView`，并且都将其**userInteractionEnabled**属性设置为**YES**。

**已编辑**

我现在有另一个问题，如果我开始拖动 UIImageView 并将鼠标悬停在其他 UIImageViews 上，那么只有第一个调用 touchesMoved 方法。例如，在 touchesMoved 方法中带有 [[touches anyObject] view.tag] 的示例 NSLog 将打印：

```
Log: touchesBegan for object with tag=123
Log: touchesMoved for object with tag=123
Log: touchesMoved for object with tag=123
...
Log: touchesEnded for object with tag=123 
```

有什么办法吗？如果用户动态拖动 UIImageViews，我基本上想突出显示选定的单元格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T21:42:03.027

尝试这个：

```
if ([touch view] == img1) { 
   // move the image view
   img1.center = touchLocation;        
}
else if ([touch view] == img2) {
    // move the image view
   img2.center = touchLocation;        
} 
```

# c# - 重定向到路由会产生页面循环

> ID：12988603
> 
> 赞同：0
> 
> 时间：2012-10-20T12:49:51.673
> 
> 标签：c#, asp.net, routing, webforms

如果变量为空，我正在尝试重定向到另一条路线。它如何给出重定向循环错误。

路线：

```
routes.MapPageRoute("activities", "activities/{category}", "~/Pages/showAllActivities.aspx");
routes.MapPageRoute("activitiesSubPage", "activities/{page}", "~/default.aspx"); 
```

showAllActivities.aspx 上的代码：

```
if (category != null)
{
    ..
}
else
    Response.RedirectToRoute("activitiesSubPage", new { page = "1"}); 
```

两个路由 URL 都需要以“活动”开头。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T19:58:02.493

如果路由中的category和page参数都是数字，ASP.NET是没有办法辨别的，所以比如`/activities/2`会匹配第一个路由，然后处理...

如果它们不同，例如 category 是一个字符串而 page 是一个数字，您可以为 MapPageRoute 提供[此重载](http://msdn.microsoft.com/en-us/library/dd992978.aspx)，您可以在其中为规则提供默认值和约束（例如，对于`/activities/{page}`仅接受数字的路由：

```
routes.MapPageRoute("activitiesSubPage", "activities/{page}", "~/default.aspx",
    new RouteValueDictionary() { { "page", 0 } },
    new RouteValueDictionary() { { "page", "[0-9]+" } });
);
routes.MapPageRoute("activities", "activities/{category}", "~/Pages/showAllActivities.aspx"); 
```

请记住，此配置会将`/activites`路由发送到`/activities/0`，默认为 0。我已经把 {page} 路由放在上面，所以它首先被评估，任何过去的东西都会被下一个规则拦截。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T13:14:01.457

问题是它不知道他是通过`category`还是`page`。

您可以做的是将其映射到`/activities/category/{id}`（类别 id/名称）和`/activities/page/{id}`（页面 id）之类的东西。放置没有意义，`/activities/{id}`因为它不是活动ID，而是页码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T13:43:37.690

检查链接：

[http://weblogs.asp.net/scottgu/archive/2009/10/13/url-routing-with-asp-net-4-web-forms-vs-2010-and-net-4-0-series。 aspx](http://weblogs.asp.net/scottgu/archive/2009/10/13/url-routing-with-asp-net-4-web-forms-vs-2010-and-net-4-0-series.aspx)

[http://www.iis.net/learn/extensions/url-rewrite-module/creating-rewrite-rules-for-the-url-rewrite-module](http://www.iis.net/learn/extensions/url-rewrite-module/creating-rewrite-rules-for-the-url-rewrite-module)

[如何将路由重定向到 ASP.NET Web 表单中的另一个路由？](https://stackoverflow.com/questions/5876599/how-do-i-redirect-a-route-to-another-route-in-asp-net-web-forms)

# spring-mvc - 使用 Freemarker 绑定到表单

> ID：12988606
> 
> 赞同：0
> 
> 时间：2012-10-20T12:50:32.140
> 
> 标签：spring-mvc, el, freemarker

我尝试将 bean 绑定到表单中的表单片段：

```
[#ftl/]
[#import "spring.ftl" as spring /]
[#import "panda.ftl" as panda /]

[#import "discoveryProject.ftl" as discoveryProject/]
[#macro defineProjectForm newProject]
[@spring.bind "discoveryProjectDetailsBean"/]

[#if newProject?has_content && newProject =="true"]
<table class="transparentTable">
    <tr>
        <!--Left Part-->
        <td>
            <table>
                <tr>
                    <td>
                        [@spring.showErrors " " "errors"/]
                        <span>Data Source<sup><span style="color: red; ">*</span></sup></span>
                    </td>
                    <td>
                        <select id="dataSourceSelect" onchange="checkSelectChanges()">
                            [#if discoveryProjectLookupBean.dataSources?has_content]
                                [#list discoveryProjectLookupBean.dataSources as dataSource]
                                    <option id="${dataSource.id}" value="${dataSource.name}">${dataSource.name}</option>
                                [/#list]
                            [/#if]
                        </select>
                    [@spring.bind path="discoveryProjectDetailsBean.discoveryProjectBean.dataSource"/]
                    </td>
                </tr>
            </table> 
```

这被提交给一个控制器，这个控制器的片段：

```
@RequestMapping("/navigateDiscoveryProject")
ModelAndView navigateDiscoveryProject(@RequestParam("index")String i,@RequestParam("direction")String direction,
        @ModelAttribute("discoveryProjectDetailsBean")DiscoveryProjectDetailsBean discoveryProjectDetailsBean,BindingResult result,HttpSession session)throws Exception{
    logger.info("method invoked");
    int index=Integer.parseInt(i);
    //another code
} 
```

bean`discoveryProjectDetailsBean`包含的属性实际上是另一个 bean，`discoveryProjectBean`这个 bean 的属性始终为空，但是我自己在 ftl 中绑定它们，就像上面的 dataSource 属性示例一样，属性的所有值`discoveryProjectBean`始终为空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T16:11:28.263

我为我的问题找到了两个答案。第一种方法是单独绑定每个属性，请参阅我只是绑定命令对象，而我应该将每个属性绑定到其特定的控制器。像这样

```
[#ftl/]
[#import "spring.ftl" as spring /]
[#import "panda.ftl" as panda /]

[#import "discoveryProject.ftl" as discoveryProject/]
[#macro defineProjectForm newProject]
// this is useless [@spring.bind "discoveryProjectDetailsBean"/]

[#if newProject?has_content && newProject =="true"]
<table class="transparentTable">
    <tr>
        <!--Left Part-->
        <td>
            <table>
                <tr>
                    <td>
                        [@spring.showErrors " " "errors"/]
                        <span>Data Source<sup><span style="color: red; ">*</span></sup></span>
                    </td>
                    <td>
                        <select id="discoveryProjectBean.dataSource" name="discoveryProjectBean.dataSource" onchange="checkSelectChanges()">
                            [#if discoveryProjectLookupBean.dataSources?has_content]
                                [#list discoveryProjectLookupBean.dataSources as dataSource]
                                    <option id="${dataSource.id}" value="${dataSource.name}">${dataSource.name}</option>
                                [/#list]
                            [/#if]
                        </select>
//the following binding work just fine
                        [@spring.bind path="discoveryProjectDetailsBean.discoveryProjectBean.dataSource"/]
                    </td>
                </tr>
            </table> 
```

我在上面所做的是从命令对象中获取我需要的属性，将其设置为选择标签的名称和 ID，并使用 . 将标签绑定到属性`@spring.bind`。

## 这是最好的解决方案

另一种方法是这样做：

```
[#ftl/]
[#import "spring.ftl" as spring /]
[#import "panda.ftl" as panda /]

[#import "discoveryProject.ftl" as discoveryProject/]
[#macro defineProjectForm newProject]
[@spring.bind "discoveryProjectDetailsBean"/]

[#if newProject?has_content && newProject =="true"]
<table class="transparentTable">
    <tr>
        <!--Left Part-->
        <td>
            <table>
                <tr>
                    <td>
                        [@spring.showErrors " " "errors"/]
                        <span>Data Source<sup><span style="color: red; ">*</span></sup></span>
                    </td>
                    <td>
                        [@spring.bind "dataSources"/]
                [@spring.formSingleSelect "discoveryProjectDetailsBean.discoveryProjectBean.dataSource" dataSources "disabled='disabled' multiple='multiple' class='singleList' onchange='checkValidations()'" /]

                    </td>
                </tr>
            </table> 
```

不，这提供了更少的编码，但对您的选择标签中的选项列表提供了限制，请参阅您获得一个字符串列表以将其绑定到上面`@spring.formSingleSelect`的`dataSources`代码中，如果此列表不是字符串列表，它将生成一个freemarker.template.TemplateException 的 freemarker 异常：。我希望这会对某人有所帮助

# xcode - cocos2d-iphone-2.1-beta2 中的 CCScrollLayer 问题

> ID：12988608
> 
> 赞同：6
> 
> 时间：2012-10-20T12:50:54.447
> 
> 标签：xcode, opengl-es, cocos2d-iphone, ccscrolllayer

嗨，我在最新的 cocos2d beta 中遇到了 CCScrollLayer 所述的问题，主要是在编译时我得到：`use of undeclared identifier 'CC_GL_BLEND'`. 有没有办法解决任何人发现的这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T12:55:36.433

安全地你可以评论那一行..无论如何混合已经启用......并且在 cocos2D 2.1 beta 的这个变化之后一切正常。

```
// Set GL Values
#if COCOS2D_VERSION >= 0x00020000
      //  ccGLEnable(CC_GL_BLEND); //Guru
        ccPointSize( 6.0 * CC_CONTENT_SCALE_FACTOR() );
#define DRAW_4B_FUNC ccDrawColor4B

#else
        glEnable(GL_POINT_SMOOTH);
        GLboolean blendWasEnabled = glIsEnabled( GL_BLEND );
        glEnable(GL_BLEND); 
```

# python - 如何从 JSON 项目中删除 Unicode u？

> ID：12988612
> 
> 赞同：2
> 
> 时间：2012-10-20T12:51:23.347
> 
> 标签：python, json, string, unicode

```
>>> stuff = '[["hiya"]]'
>>> js = json.loads(stuff)
>>> js[0]
[u'hiya']
>>> str(js[0])
"[u'hiya']" 
```

它似乎并没有消失。如何`hiya`自行打印（无需手动剥离特殊字符）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-20T12:56:38.917

您有一个嵌套两层深的列表。像这样尝试简单地打印'hiya'：

```
>>> import json
>>> stuff = '[["hiya"]]'
>>> js = json.loads(stuff)
>>> str(js[0][0])
'hiya' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T12:11:54.687

另一种解决方案是使用映射和连接将列表转换为字符串。但我不建议您使用它，但您可以在需要将列表直接转换为字符串时使用。否则上述解决方案很好。

例如。

```
import json

stuff = '[["hiya"]]'

js = json.loads(stuff)

print ''.join(map(str,js[0])) 
```

# css - 网站页脚下方的随机空间

> ID：12988616
> 
> 赞同：0
> 
> 时间：2012-10-20T12:51:56.120
> 
> 标签：css, wordpress, whitespace, margin

谁能解释本网站页脚后面的随机空白（[http://rasa-wakefield.org.uk/wp/](http://rasa-wakefield.org.uk/wp/)）？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T12:56:17.603

只需设置`#foot`为`height: auto;`就可以了。或者只是删除高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T12:54:49.510

在您的 CSS 文件（http://rasa-wakefield.org.uk/wp/wp-content/themes/rasa/css/css.css）中，您有：

```
#footer {
    background-color: #526b7f;
    color: #FFF;
    border-top: 5px solid #123056;
    height: 200px;
    width: 1000px;
    margin-left: -20px;
} 
```

和

```
#foot {
    clear: both;
    height: 200px;
    background-color: #526b7f;
} 
```

那些“高度：200px”是原因。

# python - Python：cTurtle 模块未加载

> ID：12988619
> 
> 赞同：1
> 
> 时间：2012-10-20T12:52:27.947
> 
> 标签：python, python-3.x

帮助我无法`cTurtle`加载。我收到以下错误

```
>>> import cTurtle
Traceback (most recent call last):
  File "<pyshell#4>", line 1, in <module>
    import cTurtle
TypeError: source code string cannot contain null bytes 
```

我已将模块保存在以下目录中： `C:\Python33\Lib\site-packages`

还有什么我遗漏的吗，对不起，如果这是一个非常新的问题，但我想玩这个模块。我正在使用 python 3.3。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T13:36:39.903

python3.3 出现错误，但 python3.2 未出现错误。

出于某种原因，cTurtle.py 的第 41 行在行尾包含一个 NULL 字符：

```
$ od -t a cTurtle.py.orig | grep -i nul

0003360    -   -   -   -  sp   c   T   u   r   t   l   e   .   p   y nul 
```

删除 NULL 字符，模块应该可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-25T18:02:01.680

我将文件保存为 UTF8 并且错误消息消失了

# c# - 将文本框的内容导出到文本文件 Visual Studio C#

> ID：12988624
> 
> 赞同：0
> 
> 时间：2012-10-20T12:52:46.420
> 
> 标签：c#, web-applications, button, textbox, text-files

我正在尝试按“导出”按钮将文本框的内容导出到 txt 文件。我在 C# 的 Visual Studio 中使用 Web 应用程序表单。

只需按一下按钮，我就有了 txt 文件创建部分。但我无法将文本框中的数据导出到文本文件中。

文本框的内容引用了一个 DataGrid，那么如何在 C# 中链接程序，以便在按下“导出”按钮时将文本框的内容传输到文本文件中？

所以下面的代码是我必须创建一个文本文件。我需要添加什么来完成上述操作？

```
 private void Export_Click(object sender, EventArgs e)
    {
         //DataRowView drv = ((DataRowView)ordersBindingSource.Current);
         //DataRow dr = drv.Row;        

        string path = @"G:\bin\Debug\Test.txt";
        if (!File.Exists(path))
        {
            // Create a file to write to. 
            using (StreamWriter sw = File.CreateText(path))
            {
                sw.WriteLine("Hi," + System.Environment.NewLine);
                sw.WriteLine("Order ID: ");
            }
        }
    } 
```

请帮忙！！我正在做一个项目并停留在这个级别的导出信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T13:44:34.913

将您的文本框放入表单
然后将导出按钮设置为提交按钮（也在表单中）

在服务器上，发完后就可以访问文本框内容了（`this.Forms`如果我没记错的话，我很久没用asp.net了）

获得文本框内容后，您只需要使用

```
System.IO.File.WriteAllText(@"G:\bin\Debug\Test.txt", textBoxContent) 
```

请注意：Asp.net 没有权限在磁盘上的任何位置写入，您可能需要授予特定目录的权限

# xcode - Cocoa：防止窗口离开屏幕

> ID：12988626
> 
> 赞同：1
> 
> 时间：2012-10-20T12:52:57.717
> 
> 标签：xcode, macos, cocoa

我正在（重新）编写一个小应用程序来控制 USB 设备。我希望该应用程序的窗口始终完全可见。因此，当您在窗口周围移动时，当底部碰到屏幕底部或其中一个侧面碰到屏幕侧面时，它就会停止移动。

这是可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T13:35:19.260

是的，这是可能的。带有标题栏的普通 NSWindows 会限制它们自己的框架以不允许窗口顶部离开屏幕顶部。这是在`-[NSWindow constrainFrameRect:toScreen:]` 你可以覆盖这个方法来约束你想要的框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T14:54:09.727

如果要阻止用户自由移动窗口，只需制作一个没有标题栏的自定义窗口即可。有一个标题栏向用户表明窗口可以移动，所以这里的解决方案是没有一个。然后，无法控制它的移动。您需要提供自己的控件来关闭窗口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-29T15:53:08.827

由于[Ken Aspeslagh](https://stackoverflow.com/users/205032/ken-aspeslagh)提供的代码示例不再通过 Dropbox 链接提供，我认为分享我的解决方案会很有用。对于我的项目，我只需要担心屏幕的底部和右侧，但其他人应该能够适应这一点以解决屏幕的顶部和左侧。

```
- (NSRect)constrainFrameRect:(NSRect)frameRect toScreen:(NSScreen *)screen
{
    if (((self.frame.origin.x + self.frame.size.width) > screen.frame.size.width) && (screen.frame.size.width > 0))
    {
        frameRect.origin.x = (screen.frame.size.width - self.frame.size.width);
    }

    if (self.frame.origin.y < 0)
    {
        frameRect.origin.y = 0;
    }

    return frameRect;
} 
```

# php - preg_match 模式变量用法

> ID：12988629
> 
> 赞同：1
> 
> 时间：2012-10-20T12:53:09.490
> 
> 标签：php, regex, variables

我尝试在这里和谷歌搜索，但找不到以下解决方案：

```
$picUrl = '"thumbs/phpThumb.php?src=../property-photos/50/2485/068cf6589a9fb13065818efef3d1e1c0-small.jpg&w=80&h=60&far=1&bg=EEEEEE"';
$number = "2485";
$expression = "'#".$number."/(.*?)&w#'";
echo "<b>expression is </b>".$expression."<br />";
echo "<b>picUrl is </b>".$picUrl."<br />";
preg_match($expression, $picUrl, $pic);  //'#2485/(.*?)&w#'
//if($pic) echo "pic is ".$pic[1]."<br />";
echo "<b>contents of pic array</b>".var_dump($pic); 
```

如上所述，数组是空的。但是，如果我将函数`$expression`中的变量替换`preg_match`为 php 注释后面的文本（即：）`'#2485/(.*?)&w#'`，我会得到所需的结果。

为什么使用 $expression 变量不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T12:57:52.330

`$expression`是一个以 开头和结尾的字符串`'`。因此，`'`成为分隔符，并`#`成为您的正则表达式中的文字。`'#2485/(.*?)&w#'`是一个开始和结束的字符串`#`，现在是正则表达式的分隔符，而不是文字。

只需使用以下任一：

```
$expression = "#".$number."/(.*?)&w#"; 
```

或（我推荐）这个：

```
$expression = '#'.$number.'/(.*?)&w#'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T12:57:28.740

`$expression`从您的:中删除单引号

```
$expression = "#".$number."/(.*?)&w#"; 
```

# java - Java Array index out og bounds 在java中获取输入时出现异常

> ID：12988630
> 
> 赞同：0
> 
> 时间：2012-10-20T12:53:11.087
> 
> 标签：java, string, exception, input

`ArrayIndexOutOfBoundsException`在 Java中获取字符串输入时，我得到了Java。请帮我。这是我的代码：我编辑了要拆分的代码：它说“线程中的异常”main“java.lang.ArrayIndexOutOfBoundsException：1 at solution2.Solution.main(Solution.java:27)”

```
import java.util.Scanner; 
```

公共类解决方案{

```
public static void main(String[] args){

    Scanner scan = new Scanner(System.in);
    String str = scan.next();
    String strarr[] = str.split(",");
    String temp = strarr[0];
    String temparr[] = temp.split(".");
    String temp1 = strarr[1];
    String temparr1[] = temp.split(".");
    int x1 = Integer.parseInt(temparr[0]);
    int x2 = Integer.parseInt(temparr[1]);
    int y1 = Integer.parseInt(temparr1[0]);
    int y2 = Integer.parseInt(temparr1[1]);
    System.out.println(distance(x2,x1,y2,y1));

}

public static int distance(int x1,int y1,int x2,int y2){

    int xlen=x2-x1;
    int ylen=y2-y1;

    return (xlen+ylen)*10-(ylen*5);     

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T12:57:56.680

您需要转义`String.split()`正则表达式中的点字符，否则将匹配*任何字符：*

```
String temparr[] = temp.split("\\."); 
```

对于`temparr1`，我认为您打算使用`temp1`：

```
String temparr1[] = temp1.split("\\."); 
```

如果您期望双值，则可以`Scanner.nextDouble()`改用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T12:58:29.333

您是否注意到您分配`temp.split()`给`temparr1`而不是`temp1.split()`？

此外，`split`将正则表达式作为参数，并且当它发生时，正则表达式`.`几乎匹配任何东西。所以，你应该纠正它。

我假设，由于缺乏任何反驳我的猜测，您正在解析格式的输入`1.2,3.4`，其中 1、2、3 和 4 是任意数字。

除此之外，`Scanner.next`读取下一个**标记**，这意味着它将从“1.2,3.4”中读取“1”。你必须使用`Scanner.nextLine`.

# mysql - 重新插入对我的自动增量字段造成破坏的元素

> ID：12988631
> 
> 赞同：0
> 
> 时间：2012-10-20T12:53:11.810
> 
> 标签：mysql

我有一个表，其中包含以下记录集：

```
Sno Unique  Something
1      1    some data
1      2
1      3
1      4
2      1
2      2
2      3 
```

我通过将 sno 和 unique_no 设置为主键并将 unique_no 设置为自动递增字段来实现这一点。现在的问题是，如果我删除一个 sno 为 1 的字段和值为 1,2,3 的唯一字段，然后插入一些其他 sno 为 1 的数据，这就是我得到的那种表：

```
 Sno Unique  Something
    1      5   new data
    1      6   new data
    1      4   somedata
    2      1
    2      2
    2      3 
```

但我想要一些取最低值并开始增加它并改变唯一值的东西，所以它没有任何跳跃。这有可能实现吗？

```
 Sno Unique  Something
    1      1   new data
    1      2   new data
    1      3   somedata
    2      1
    2      2
    2      3 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T12:58:01.610

`Unique_NO`最简单的答案是，如果它是一个字段，您将无法做您想做的事情，`AUTO_INCREMENT`因为它会再生成 1 个最后插入的值（*即使它已经被删除*）。

最好的方法是在应用程序层中创建一个逻辑，生成`Unique_No`.

# c# - 我应该使用静态字段并互锁在一起吗？

> ID：12988636
> 
> 赞同：4
> 
> 时间：2012-10-20T12:53:44.530
> 
> 标签：c#, multithreading, static, interlocked

我是否应该使用静态字段并互锁在一起，以防我需要使用静态字段提供线程安全和原子操作，静态字段是否默认是原子的？例如：

```
Interlocked.Increment(ref Factory.DefectivePartsCount); 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T13:00:36.197

是的。

该字段（假设为 Int32）是原子的，不是因为它是静态的，而是因为它是 32 位的。

但是，`Factory.DefectivePartsCount += 1`需要对变量执行读取和写入操作，因此整个操作不是线程安全的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T13:54:03.670

`static`不保证线程安全方面的任何事情。因此，即使变量是 ，增量仍然不是原子的`static`。因此，您仍然需要根据情况使用经典的同步机制。在你的情况下`Interlocked.Increment`很好。

# sql - 列别名参考

> ID：12988637
> 
> 赞同：4
> 
> 时间：2012-10-20T12:53:47.947
> 
> 标签：sql, oracle, ora-00904

此查询将数字分成其受人尊敬的位置，如数千、数百、五十等。问题是我无法通过其别名来引用该列。在 Oracle 中，我收到此错误：

> ora-00904: "twos": 无效的标识符

但代码在 MS Access 中运行良好

询问：

```
SELECT 
    BT, 
    CNO, 
    AMT,  
    TRUNC(AMT/1000) AS THS, 
    TRUNC((AMT-(THS*1000))/500) AS FIVHUN, 
    TRUNC((AMT-((THS*1000)+(FIVHUN*500)))/100) AS HUND, 
    TRUNC((AMT-(((THS*1000)+(FIVHUN*500))+(HUND*100)))/50) AS FIF, 
    TRUNC((AMT-(((THS*1000)+(FIVHUN*500))+(HUND*100)+(FIF*50)))/20) AS TWENTY, 
    TRUNC((AMT-(((THS*1000)+(FIVHUN*500))+(HUND*100)+(FIF*50)+(TWENTY*20)))/10) AS TENS, 
    TRUNC((AMT-(((THS*1000)+(FIVHUN*500))+(HUND*100)+(FIF*50)+(TWENTY*20)+(TENS*10)))/5) AS FIVES, 
    TRUNC((AMT-(((THS*1000)+(FIVHUN*500))+(HUND*100)+(FIF*50)+(TWENTY*20)+(TENS*10)+(FIVES*5)))/2) AS TWOS, 
    TRUNC((AMT-(((THS*1000)+(FIVHUN*500))+(HUND*100)+(FIF*50)+(TWENTY*20)+(TENS*10)+(FIVES*5)+(TWOS*2)))/1) AS ONES 
FROM 
    EMPLOYER; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T16:44:33.303

您只能在外部选择中引用列别名，因此除非您重新计算每列的所有先前值，否则您需要嵌套每个级别，这有点难看：

```
select bt, cno, amt, ths, fivhun, hund, fif, twenty, tens, fives, twos,
    trunc((amt-(ths*1000)-(fivhun*500)-(hund*100)-(fif*50)-(twenty*20)
        -(tens*10)-(fives*5)-(twos*2))/1) as ones
from (
    select bt, cno, amt, ths, fivhun, hund, fif, twenty, tens, fives,
        trunc((amt-(ths*1000)-(fivhun*500)-(hund*100)-(fif*50)-(twenty*20)
            -(tens*10)-(fives*5))/2) as twos
    from (
        select bt, cno, amt, ths, fivhun, hund, fif, twenty, tens,
            trunc((amt-(ths*1000)-(fivhun*500)-(hund*100)-(fif*50)-(twenty*20)
                -(tens*10))/5) as fives
        from (
            select bt, cno, amt, ths, fivhun, hund, fif, twenty,
                trunc((amt-(ths*1000)-(fivhun*500)-(hund*100)-(fif*50)
                    -(twenty*20))/10) as tens
            from (
                select bt, cno, amt, ths, fivhun, hund, fif,
                    trunc((amt-(ths*1000)-(fivhun*500)-(hund*100)
                        -(fif*50))/20) as twenty
                from (
                    select bt, cno, amt, ths, fivhun, hund,
                        trunc((amt-(ths*1000)-(fivhun*500)
                            -(hund*100))/50) as fif
                    from (
                        select bt, cno, amt, ths, fivhun,
                            trunc((amt-(ths*1000)-(fivhun*500))/100) as hund
                        from (
                            select bt, cno, amt, ths,
                                trunc((amt-trunc(ths*1000))/500) as fivhun
                            from (
                                select bt, cno, amt,
                                    trunc(amt/1000) as ths from employer

                            )
                        )
                    )
                )
            )
        )
    )
); 
```

...这给出了类似的东西：

```
 BT CNO              AMT     THS FIVHUN HUND FIF TWENTY TENS FIVES TWOS ONES
--- --- ---------------- ------- ------ ---- --- ------ ---- ----- ---- ----
  1   2      123,456,789  123456      1    2   1      1    1     1    2    0
  3   4       87,654,321   87654      0    3   0      1    0     0    0    1
  5   6        1,234,567    1234      1    0   1      0    1     1    1    0 
```

* * *

没有那么漂亮，而是一个递归版本，主要是为了我自己的娱乐：

```
with t as (
    select bt, cno, amt, x,
        case x when 1 then 1000 when 2 then 500 when 3 then 100
            when 4 then 50 when 5 then 20 when 6 then 10 when 7 then 5
            when 8 then 2 when 9 then 1 end as bill
    from employer
    cross join (select level as x from dual connect by level < 10)
),
r (bt, cno, amt, x, y, running) as (
    select t.bt, t.cno, t.amt, 0 as x, 0 as y, 0 as running
    from t
    where t.x = 1 -- could be any x, just want one row per bt/cno
    union all
    select t.bt, t.cno, t.amt, t.x,
        trunc((t.amt - r.running)/t.bill) as y,
        r.running + (t.bill * trunc((t.amt - r.running)/t.bill)) as running
    from t 
    join r on r.bt = t.bt and r.cno = t.cno and r.x = t.x - 1
)   
select bt, cno, amt,
    max(case when x = 1 then y else 0 end) as ths,
    max(case when x = 2 then y else 0 end) as fivhun,
    max(case when x = 3 then y else 0 end) as hund,
    max(case when x = 4 then y else 0 end) as fif,
    max(case when x = 5 then y else 0 end) as twenty,
    max(case when x = 6 then y else 0 end) as tens, 
    max(case when x = 7 then y else 0 end) as fives, 
    max(case when x = 8 then y else 0 end) as twos,  
    max(case when x = 9 then y else 0 end) as ones
from r
group by bt, cno, amt
order by bt, cno; 
```

公用表表达式 (CTE) 只是将`t`真实数据与生成数字 1-9 的虚拟表进行交叉连接，并将票据面额值（假设 Robert Co 是正确的）分配给每个级别以供以后使用。

CTE 是递归的`r`，我认为它只适用于 11gR2。联合的第一部分建立了迄今为止账单加起来的“总和”，它为零，因为这是递归的第一步。其余列不使用，除了`x`用于递归连接的虚拟零值。联合的第二部分从本级别减去上一级别的累计`amt`，找到该面额的整张钞票的数量 - 这是我们实际想要报告的 - 并重新计算累计以包含该数字。每次循环，账单的大小都会减少，而运行的总数会增加。

所以最终会有很多行，每张账单的数量都是不同的行；这实际上需要被旋转以显示适当列下的值。这就是最后的`max()`and`group by`位所做的。

对于我的虚拟数据，它给出了相同的结果：

```
 BT CNO              AMT     THS FIVHUN HUND FIF TWENTY TENS FIVES TWOS ONES
--- --- ---------------- ------- ------ ---- --- ------ ---- ----- ---- ----
  1   2      123,456,789  123456      1    2   1      1    1     1    2    0
  3   4       87,654,321   87654      0    3   0      1    0     0    0    1
  5   6        1,234,567    1234      1    0   1      0    1     1    1    0 
```

* * *

顺便说一句，我最初试图用`mod()`（正如 AndriyM 建议的那样）来简化它，但你不能独立计算每个值：

```
select bt, cno, amt,
    floor(           amt/1000) as ths,
    floor(mod(amt, 1000)/ 500) as fivhun,
    floor(mod(amt,  500)/ 100) as hund,
    floor(mod(amt,  100)/  50) as fif,
    floor(mod(amt,   50)/  20) as twenty,
    floor(mod(amt,   20)/  10) as tens,
    floor(mod(amt,   10)/   5) as fives,
    floor(mod(amt,    5)/   2) as twos,
    floor(mod(amt,    2)/   1) as ones
from employer
order by bt, cno;

 BT CNO              AMT     THS FIVHUN HUND FIF TWENTY TENS FIVES TWOS ONES
--- --- ---------------- ------- ------ ---- --- ------ ---- ----- ---- ----
  1   2      123,456,789  123456      1    2   1      1    0     1    2    1
  3   4       87,654,321   87654      0    3   0      1    0     0    0    1
  5   6        1,234,567    1234      1    0   1      0    0     1    1    1 
```

大多数值是相同的，但`tens`are all`0`和 the `ones`are all `1`。后者很容易解释，尽管更多的是为什么它们*不应该*都是`1`. 如果`fives`值是`1`，那么要拆分的剩余量变为偶数，因此`ones`必须是`0`。同样，该`tens`值未考虑`fif`在内。因此，这种简单查询无法处理的值之间存在依赖关系。当然，您可以调整问题列以将其考虑在内，但有引入细微错误的风险。

# c# - 在 C# 中替换句子中的文本？

> ID：12988639
> 
> 赞同：0
> 
> 时间：2012-10-20T12:54:01.503
> 
> 标签：c#, .net

对于这个看起来很愚蠢但我真的很困惑的问题，我很抱歉

这句话 ：

```
 String myline = "<form name='oldvalue' action='old_value' method='get'>" 
```

预期结果 ：

```
 <form name='oldvalue' action='new_value' method='get'> 
```

我想替换动作后引号之间的文本值。

我不想使用 myLine.Replace 因为句子中的 action 属性的值是随机的，我不在乎。无论它的价值是什么，我都想被取代`new_value`

我怎么能做到这一点！谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T13:02:13.820

您可以使用[正则表达式](http://en.wikipedia.org/wiki/Regular_expression)：

```
using System.Text.RegularExpressions;

String myline = "<form name='oldvalue' action='old_value' method='get'>";
String new_value = "new_value";
Regex.Replace(myline, "action='(.*?)'", new_value); 
```

* * *

## 更新：

此代码实际上返回`<form name='oldvalue' new_value method='get'>`

*（[iedone](http://ideone.com/rU7pV2)正如@Nacereddine 提到的）*

如果你想返回`<form name='oldvalue' action='new_value' method='get'>`使用这个：

```
Regex.Replace(myline, @"(action=')(.*?)(')", "$1"+new_value+"$3"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T13:02:52.940

看看 Regex.Replace 方法：http: [//msdn.microsoft.com/de-de/library/vstudio/xwewhkd1.aspx](http://msdn.microsoft.com/de-de/library/vstudio/xwewhkd1.aspx)

应该是这样的

```
new Regex("action='.*?'").Replace(myline,"action='new_value'"); 
```

**编辑**：修复了 Nacereddine 建议的正则表达式

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-20T12:59:54.100

如果这一行是唯一的输入，您可以简单地使用正则表达式更改`action='(.*?)'`为您喜欢的任何内容。

```
String input = "<form name='oldvalue' action='old_value' method='get'>";
String newAction = "action='new_value'";
var s = Regex.Replace(input, "action='(.*?)'", newAction); 
```

输出：

```
s: "<form name='oldvalue' action='new_value' method='get'>" 
```

但是，如果更大的图景实际上是修改 HTML 文档，那么您绝对应该看看[Html Agility Pack](http://htmlagilitypack.codeplex.com/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T13:03:52.257

你可以这样做：

```
new Regex("action='([^\']*)'").Replace(myLine, "action='new_value'"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-20T13:06:43.453

尝试使用[XmlDocument](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.aspx)，如下所示。您还可以根据需要操作所有属性：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Xml;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            XmlDocument doc = new XmlDocument();
            doc.LoadXml("<form name='oldvalue' action='old_value' method='get' />");
            foreach (XmlNode node in doc.GetElementsByTagName("form"))
            {
                node.Attributes["action"].Value = "new_value";
            }
            Console.Write(doc.OuterXml);
            Console.Read();
        }
    }
} 
```

# jsf - JSF ViewScope 和 Bean 创建

> ID：12988643
> 
> 赞同：1
> 
> 时间：2012-10-20T12:54:47.783
> 
> 标签：jsf, primefaces

我有一个我不明白的问题：我请求一个新站点。一个站点有一个可以打开对话框的链接。该链接位于表单内。对话框不在表单内。

简化的代码示例：

```
 <p:outputPanel id="layout-center" >
      <h:form>
        <p:commandLink id="option_field_user_profile" actionListener="#{controllerBean.getBean('userProfileBean', component).init}" oncomplete="#{controllerBean.getBean('userProfileBean', component).show}" >
        <h:outputText value="#{msg.mProfile}"/>
        </p:commandLink>
      </h:form>
    </p:outputPanel>

    <p:dialog header="#{userPreferencesBean.header}" widgetVar="#{userPreferencesBean.widgetVar}" appendToBody="#{userPreferencesBean.appendToBody}" resizable="#{userPreferencesBean.resizable}" id="#{userPreferencesBean.xhtmlId}" dynamic="#{userPreferencesBean.dynamic}" modal="#{userPreferencesBean.modal}" closable="#{userPreferenceBean.closable}">
      <ui:include src="/WEB-INF/templates/modification/userPreferences.xhtml" />
    </p:dialog> 
```

UserPreferencesBean 在 ViewScope 中。我现在的问题是，来自 UserPreferencesBean 的 @PostConstruct 方法在非回发请求中被调用了两次，即 Bean 被构造了两次，尽管它应该是相同的视图。如果我将对话框移动到表单内以进行测试，它会像预期的那样被调用一次。但由于对话框有自己的形式，这肯定不是一个解决方案。当网站加载完毕并按下 F5 时，PostConstruct 方法会执行一次。

有人有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T12:56:47.823

这是因为您`id`在`<p:dialog>`. 如果您将其固定`id`为静态，或者改为引用请求或应用程序范围的 bean 属性，那么您的视图范围 bean 将按预期运行。

### 也可以看看：

*   [JSF2 Facelets 中的 JSTL...有意义吗？](https://stackoverflow.com/questions/3342984/jstl-in-jsf2-facelets-makes-sense)- 有关视图构建时间和视图渲染时间的一些背景说明；UI 组件的`id`和`binding`属性在视图构建时进行评估。

# javascript - 在jquery中单击iframe文档时如何获取包含iframe id

> ID：12988646
> 
> 赞同：1
> 
> 时间：2012-10-20T12:54:58.960
> 
> 标签：javascript, jquery, iframe

我正在寻找一种方法来使用 jQuery 在单击其文档元素时获取 iframe 的 id。代码将从父窗口初始化运行。

```
$frame = $("<iframe class='frame'></iframe>").load(function(){
    $(this).contents().bind("click", function(e){
       alert($(this).attr("id"));
    });
} 
```

警报显示为**undefined**。

或者我也试过：

alert($(this), window.parent).attr("id");

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T13:53:49.207

您会注意到，上一个示例仅在您给 iframe 一个边框并单击它时才有效（即单击 iframe 元素，而不是它包含的文档元素，我相信这是您所要求的）。

以下代码将鼠标悬停处理程序绑定到 iframe，它在将 onclick 处理程序绑定到其内容之前获取 iframe 的 ID。请注意，这仅适用于 iframe 指向您网站上的另一个页面，而不是另一个域上的页面。

```
 $(document).ready(function(){

       $('iframe').bind('mouseover', function(){

          var iframeID = $(this).attr('id');

          $(this).contents().unbind(); 

          $(this).contents().bind('click', function(){

              alert(iframeID);  
          });
       }); 

    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T14:04:39.507

没有内容到iframe，根据Dio的例子fiddle如下，[http://jsfiddle.net/sameerast/FUUz9/](http://jsfiddle.net/sameerast/FUUz9/)

```
<iframe id="frame" class='frame' width="200" height="200"></iframe>​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-07T06:55:28.663

这是一个老问题，但我仍然为那些仍然遇到这个问题的人提供答案：

HTML 内容：

```
<iframe class='frame' id="iframe-1"></iframe> 
```

JQuery 在单击其内容时获取 iframe id：

```
setTimeout(function(){
    $('.iframe').each(function(){
        var _this = $(this);
        _this.contents().find('body').focus(function(){
            var iframe_id = _this.attr('id');
            alert(iframe_id); // do whatever with it
        });
    });
},1000); 
```

*我希望它有帮助...*

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-20T12:58:41.300

```
$(document).ready(function(){
   $('iframe').click(function(){
   Id=$(this).attr('id');
   alert(Id);
 });
}); 
```

# macos - Mono 2.10.4+ 是否与 Mac OS X PowerPC 兼容？

> ID：12988661
> 
> 赞同：2
> 
> 时间：2012-10-20T12:56:34.043
> 
> 标签：macos, mono, monodevelop, powerpc

有没有人为 Mac OS X PowerPC 构建过 Mono 2.10.4 或更高版本？我可以从 Ximian 找到支持 PPC 的最新二进制版本是 2.10.3，但 MonoDevelop 的最新版本（2.8 - 3.0，似乎不包含任何特定于 Intel 的内容）仅支持 2.10.4 及更高版本。

如果没有人可以将我指向二进制文件，我将自己构建它，但我只是想确保首先这不会是徒劳的。

由于可以使用更高版本的 PPC Linux 构建并且 Mac OS X 10.5 支持仍在最新版本中，它*应该可以*工作，对吧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T02:06:06.320

对于大多数想要在 Mac OS X 上构建的人，我建议：

```
git clone git://github.com/xamarin/bockbuild.git
cd bockbuild/profiles/monodevelop-mac-dev
./monodevelop-mac-dev -b 
```

我不确定这是否适用于 10.5，但它应该至少适用于 10.6（或者如果没有，请尝试使用 6 个月或一年前的旧 git 修订版）

希望有帮助。

# explorer - 修补集市浏览器

> ID：12988664
> 
> 赞同：0
> 
> 时间：2012-10-20T12:56:48.680
> 
> 标签：explorer, bazaar

在 macosx 中启动 bazar explorer 时，当我尝试查看存储库时出现一个常见错误，它说“文件太多”，已在 bazars 网站 (https://bugs.launchpad.net) 上使用补丁发布了解决方案/bzr-explorer/+bug/926439)

....我的问题是你如何准确地修补它们？我输入了“bzr patch”，但出现了错误，我在这里遗漏了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T17:46:22.203

该补丁适用于 bzr-explorer 的源代码。您必须下载源代码，对其应用补丁，然后从补丁源安装它。

详细地：

1.  下载[bzr-explorer](https://launchpad.net/bzr-explorer/1.2/1.2.3/+download/bzr-explorer-1.2.3.tar.gz)和[补丁](https://bugs.launchpad.net/bzr-explorer/+bug/926439/+attachment/2769232/+files/workaround-926439.patch)。
2.  将 bzr-explorer 解压到可以从终端轻松访问的目录中。
3.  将下载的补丁文件复制到同一目录中。
4.  打开终端并切换到该目录。
5.  执行以下命令：

    `patch < workaround-926439.patch`

    `python setup.py install`

# matlab - 信号 Simulink 的初始值

> ID：12988665
> 
> 赞同：3
> 
> 时间：2012-10-20T12:57:00.613
> 
> 标签：matlab, real-time, simulink

我正在 Simulink 中开发一个游艇速度预测程序 (VPP)（显然，我是该论坛的新用户，因此无法上传图像）。

解决这个问题需要我知道表观风速和角度（分别为 VA 和 beta），以便获得风帆产生的力，从而获得净力、加速度和最终的船速。但是，VA 取决于船速 (VS)。我尝试通过将加速度转换为速度的积分器块输入后者的初始值，但我在“视风”m函数中不断收到以下错误：“索引表达式超出范围。尝试访问元素 3。有效范围是 1-1。”。请注意，如果我重新排列模型并为函数提供一个常数值，例如，它将起作用（尽管最终的船速在物理上不会是正确的）。m函数列表如下所示。

简化框图：

[VT,gamma] -> 视风 -> 空气动力学 -> 力/质量 -> 加速度 -> 1/s -> VS

```
function [VA, beta] = fcn(inputs)
% 1 - gamma  % true wind heading [deg]
% 2 - VT  % true wind speed [kts]
% 3 - VS

%#codegen

% apparent wind angle [deg]
beta=atan(sin(inputs(1)*pi/180)/(cos(inputs(1)*pi/180)+inputs(3)/inputs(2)))/pi*180;    

% apparent wind speed [kts]
VA=sin(inputs(1)*pi/180)/sin(beta*pi/180)*inputs(2);    

end 
```

编辑：现在我可以上传一个模型的附加流程图。

![在此处输入图像描述](../Images/527c4df1d5f8679e5e80289ee20c5af0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-10T12:35:06.250

这可能会有所帮助：

[为什么在http://www.mathworks.com/support/solutions/en/data/1-9TQFRN/?product=SL&solution=1-9TQFRN](http://www.mathworks.com/support/solutions/en/data/1-9TQFRN/?product=SL&solution=1-9TQFRN)的闭环中使用嵌入式 MATLAB 模块时信号维度没有正确传播

祝你好运。

通用汽车

# git - 重命名本地 GIT 分支不会更改“Origin”上的名称

> ID：12988667
> 
> 赞同：1
> 
> 时间：2012-10-20T12:57:03.780
> 
> 标签：git, branch, rename, git-branch, bitbucket

我使用 GIT 管理项目的源代码，使用本地 SourceTree 和 BitBucket 远程托管代码。我创建了一个新分支，名为“MyFeature”。在某个时候，我将分支重命名为“features/MyFeature”，以便更好地组织分支（我现在拥有比以前更多的分支）。但是，现在在 BitBucket 上似乎有两个分支——“MyFeature”和“features/MyFeature”。有没有办法从 BitBucket 中删除旧分支，以便只有一个分支“features/MyFeature”？重命名分支以使分支名称在 GIT 存储库的不同签出中保持一致的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T15:46:38.667

要从远程删除分支，请使用 git push：

```
git push origin :branch-to-delete 
```

其他克隆的用户必须将他们的本地分支重新定位到重命名的分支上。不幸的是，没有办法让分支名称自动保持同步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-25T10:23:13.870

要重命名本地和远程分支，我使用了以下命令：

```
git checkout <old_branch_name> # to switch on branch
git branch -m <new_branch_name> # to rename local branch
git push origin :<old_branch_name> # to delete old remote branch
git branch --unset-upstream # to remove tracking from old remote branch
git push --set-upstream origin <new_branch_name> # to push and create new remote branch 
```

# oracle - Oracle Apex UI 翻译 - 为我指明正确的方向

> ID：12988670
> 
> 赞同：1
> 
> 时间：2012-10-20T12:57:16.567
> 
> 标签：oracle, globalization, oracle-apex, xliff

我必须在 Oracle Apex 中构建一个应该以多种语言显示的网站。让我进一步分解。

我假设 Apex 应用程序有两个部分

1.  UI 和 UI 元素，即区域、按钮、表格、页面标题
2.  数据

目前，我需要找到有关如何仅为我的应用程序的 UI 部分启用多语言支持的答案。不是数据。

据我所知，有两种广泛的方法可以实现这一目标。

1.  使用 Apex 内置支持来更改 UI 元素。
2.  从头开始创建基于数据库驱动方法的解决方案。

我的理解正确吗？

另外两个问题 1\. 谁能简要介绍一下 Oracle Apex 为我的应用程序创建多个版本的网页/网站提供的支持类型？或者，通过提供相关链接等为我指明正确的方向。

1.  您会推荐以上两种方法中的哪一种？为什么？

万分感谢

罗米

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T05:01:56.727

好的，这个我似乎已经自己解决了。该过程包括以下步骤

1.  为除主要应用程序的语言之外的每种语言创建影子应用程序。

2.  将 UI 元素从主要语言应用程序导出到目标语言应用程序（上述 1 中提到的影子应用程序）的 XML 文件[(XLIFF )。](http://en.wikipedia.org/wiki/XLIFF)

3.  编辑 XML 文件并在 XML 文件中输入目标语言应用程序的文本描述。

4.  将编辑后的 ​​XML 文件上传到目标应用程序。

有关详细说明，请查看此[链接](http://www.simple-talk.com/sysadmin/general/multi-language-database-applications-using-oracle-apex/)。单击[此处](http://www.oracle.com/technetwork/community/bookstore/apex-cookbook-chapter-256792.pdf)在 Apex 中创建示例多语言应用程序。

在撰写本文时，我没有看到任何从头开始创建此功能的理由。为什么要重新发明轮子？

任何意见？

# javascript - 使用 Google Feeds API (JavaScript) 获取 DeviantArt Media RSS

> ID：12988675
> 
> 赞同：3
> 
> 时间：2012-10-20T12:57:31.547
> 
> 标签：javascript, rss, media, google-feed-api, mediarss

我正在尝试使用 Google 的 Feed API 从 DeviantArt 提供的 RSS 提要中获取媒体，以 JSON 格式返回。饲料如下：

[http://backend.deviantart.com/rss.xml?type=deviation&q=boost%3Apopular%20tarutaru](http://backend.deviantart.com/rss.xml?type=deviation&q=boost%3Apopular%20tarutaru)

谷歌提供了很多例子，但很少涉及媒体提要，而那些这样做的，都使用了媒体组。但是看着我试图阅读的这个特定的提要，我没有看到任何媒体组。每个提要条目只有一个与之关联的“媒体”项目。

```
<item>
<title>Expectant Tarutaru</title>
<link>http://requiem-shade.deviantart.com/art/Expectant-Tarutaru-38312114</link>
<guid isPermaLink="true">http://requiem-shade.deviantart.com/art/Expectant-Tarutaru-38312114</guid>
<pubDate>Sat, 19 Aug 2006 17:20:08 PDT</pubDate>
<media:title type="plain">Expectant Tarutaru</media:title>
<media:keywords/>
<media:rating>nonadult</media:rating>
<media:category label="Games">fanart/traditional/drawings/games</media:category>
<media:credit role="author" scheme="urn:ebu">Requiem-Shade</media:credit>
<media:credit role="author" scheme="urn:ebu">http://a.deviantart.net/avatars/r/e/requiem-shade.jpg</media:credit>
<media:copyright url="http://requiem-shade.deviantart.com">Copyright 2006-2012 !Requiem-Shade</media:copyright>        
<media:description type="html"><![CDATA[ A pregnant Tarutaru White Mage.  Was a request from another board.  Yes, I took liberties with Square-Enix's original design.  Yes, Tarutaru look like that as adults, except the females are flat-chested.  Had to augment her form to reflect the development of her body as her children grow inside her. ]]></media:description>
<media:thumbnail url="http://th06.deviantart.net/fs11/150/i/2006/231/c/f/Expectant_Tarutaru_by_Requiem_Shade.jpg" height="150" width="140"/>            
<media:thumbnail url="http://th03.deviantart.net/fs11/300W/i/2006/231/c/f/Expectant_Tarutaru_by_Requiem_Shade.jpg" height="322" width="300"/>
<media:content url="http://fc06.deviantart.net/fs11/i/2006/231/c/f/Expectant_Tarutaru_by_Requiem_Shade.jpg" height="463" width="431" medium="image"/>        
<media:content url="http://www.deviantart.com/download/38312114/" medium="document"/>
<description><![CDATA[ A pregnant Tarutaru White Mage.  Was a request from another board.  Yes, I took liberties with Square-Enix's original design.  Yes, Tarutaru look like that as adults, except the females are flat-chested.  Had to augment her form to reflect the development of her body as her children grow inside her.<br /><div><img src="http://th03.deviantart.net/fs11/300W/i/2006/231/c/f/Expectant_Tarutaru_by_Requiem_Shade.jpg" alt="thumbnail" /></div> ]]></description>
</item> 
```

我现在用来读取提要的代码是这样的，现在只是尝试读取`media:title`值，但我想读取所有`media:`数据。

```
/*
*  How to load a feed via the Feeds API.
*/

google.load("feeds", "1");

// Our callback function, for when a feed is loaded.
function feedLoaded(result) {
    if (!result.error) {
        // Grab the container we will put the results into
        var container = document.getElementById("content");
        container.innerHTML = '';

        // Loop through the feeds, putting the titles onto the page.
        // Check out the result object for a list of properties returned in each entry.
        // http://code.google.com/apis/ajaxfeeds/documentation/reference.html#JSON
        for (var i = 0; i < result.feed.entries.length; i++) {
            var entry = result.feed.entries[i];
            var div = document.createElement("div");
            div.appendChild(document.createTextNode(entry.mediaTitle));
            container.appendChild(div);
        }
    }
}

function OnLoad() {
    // Create a feed instance that will grab Digg's feed.
    var feed = new google.feeds.Feed("http://backend.deviantart.com/rss.xml?type=deviation&q=boost%3Apopular%20tarutaru");

    // Calling load sends the request off.  It requires a callback function.
    feed.load(feedLoaded);
}

google.setOnLoadCallback(OnLoad);​ 
```

取自此处提供的示例：[http ://code.google.com/apis/ajax/playground/#load_feed](http://code.google.com/apis/ajax/playground/#load_feed)

问题是，我不知道达到这些值的正确语法是什么，而且我已经尝试了几个小时，所以你现在是我唯一的希望。

任何帮助将不胜感激。这是我为我兄弟做的生日礼物，我想尽快摆脱这种麻烦，以便送出礼物。:)

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T16:23:32.157

寻找阅读 XML 提要的示例（我手边没有 URL）。这就是我为解决这个问题所做的：我在调用 feed.load() 之前将格式设置为 XML：feed.setResultFormat(google.feeds.Feed.XML_FORMAT); 然后，在回调中，我遍历提要中的项目（看起来你可以对你的项目做同样的事情，因为它作为项目返回）

```
function feedLoaded(result) {
  if (!result.error) {
  // Get all items returned.
  var items = result.xmlDocument.getElementsByTagName('item');

  // Loop through our items
  for (var i = 0; i < items.length; i++) {
    var item = items[i];

    // Get the data from the element.  firstChild is the text node containing
    // the title, and nodeValue returns the value of it.
    var title = item.getElementsByTagName('title')[0].firstChild.nodeValue;
    var link = item.getElementsByTagName('link')[0].firstChild.nodeValue;
} 
```

这些应该对您有效，因为您的提要也有标题和链接。遵循相同的基本方案来获取其余数据。

# .htaccess - .htaccess 删除查询字符串，保留 SEO 风格的 url

> ID：12988685
> 
> 赞同：1
> 
> 时间：2012-10-20T12:58:15.173
> 
> 标签：.htaccess, mod-rewrite, apache2

**问题：**

是否可以在`%{QUERY_STRING}`不破坏我在 .htaccess 文件中完成的任何功能的情况下清除。

我想防止用户添加`?foo=bar`到 URL 的末尾覆盖任何预定义的 $_GET 变量

**（外部重写）示例：**

从：`example.com/foo/bar/hello/world?test=blah`

到：`example.com/foo/bar/hello/world`

**到目前为止，我已经能够做到这一点（内部）：**

从：`example.com/foo/bar/hello/world`

到：`example.com/index.php?foo=bar&hello=world`

**.htaccess**

```
# To externally redirect /dir/foo.php to /dir/foo
RewriteCond %{THE_REQUEST} ^GET\s.+\.(?:html?|php|aspx?) [NC]
RewriteRule ^(.+)\.php$ /$1 [R=301,L,NC]

# To externally redirect /dir/index to /dir/
RewriteCond %{THE_REQUEST} ^GET\s((.+)?(\/)?)?(index) [NC]
RewriteRule ^(([^/]+/)*)index$ /$1 [R=301,L,NC]

# To internally redirect /dir/foo to /dir/foo.php
RewriteCond %{REQUEST_URI} !\.php$ [NC]
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule . %{REQUEST_URI}.php [L]

# Prevent Rewrite on existing directories, files, and links
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L] #^ - [L]

# To internally rewrite directories as query string
RewriteRule ^([^/=]+)=([^/]*)(/(.+))?\/?$ /$4?$1=$2 [N,QSA]
RewriteRule ^([^/=]+)/([^/=]+)(/(.+))?\/?$ /$4?$1=$2 [N,QSA]
RewriteRule ^([^/=]+)(/(.+))?\/?$ /$3?$1 [N,QSA] 
```

**我试过的：**

```
#if there is a query string
RewriteCond %{QUERY_STRING} ^(.*)$ 
RewriteRule (.*) $1? [R=301,L] #remove query string 
```

-

```
#if there is a query string
RewriteCond %{QUERY_STRING} !=""
RewriteRule (.*) $1? [R=301,L] #remove query string 
```

-

```
#if there is a query string
RewriteCond %{QUERY_STRING} !=""
RewriteRule ^(.*)$ $1? [R=301,L] #remove query string 
```

我在某处读到并经历过，应用上述内容会破坏我已经完成的任何事情。如果它们被屏蔽 $_GET 变量，则完全清除整个 url。甚至崩溃 apache 0.o（请原谅我有任何愚蠢的正则表达式或 .htaccess 代码，它们不是我的强大套件，其中大部分是我在 SO 上找到的片段）

这可能吗？我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T13:13:23.867

尝试：

```
RewriteCond %{THE_REQUEST} \?[^\ ]+
RewriteRule (.*) /$1? [R=301,L] #remove query string 
```

您需要匹配实际请求，因为您正在使用以下规则构建查询字符串：

```
# To internally rewrite directories as query string
RewriteRule ^([^/=]+)=([^/]*)(/(.+))?\/?$ /$4?$1=$2 [N,QSA]
RewriteRule ^([^/=]+)/([^/=]+)(/(.+))?\/?$ /$4?$1=$2 [N,QSA]
RewriteRule ^([^/=]+)(/(.+))?\/?$ /$3?$1 [N,QSA] 
```

当这些规则循环时，`%{QUERY_STRING}`变量中会包含一些东西，而你的规则会破坏它们。如果您与实际请求相匹配，您的重写将不会受到影响。

# c++ - C++ PHP 扩展

> ID：12988690
> 
> 赞同：1
> 
> 时间：2012-10-20T12:58:35.043
> 
> 标签：c++, fstream, php-extension

我写了一个非常简单的 PHP 扩展。现在我希望它在启动时读取文件。这是我的代码：

```
#define PHP_COMPILER_ID  "VC6"

#include <fstream>  
#include "php.h"

int number = 0;
ZEND_FUNCTION(use_html);

//declaration
ZEND_MINIT_FUNCTION(use_html);
zend_function_entry use_functions[] = 
{
    ZEND_FE(use_html, NULL)
    {NULL, NULL, NULL}
};

zend_module_entry use_html_module_entry = 
{
    STANDARD_MODULE_HEADER,
    "First_Extension",
    use_functions,
    ZEND_MINIT(use_html), 
    NULL, NULL, NULL, NULL,
    "1.0.0-tutorial",
    STANDARD_MODULE_PROPERTIES
};

ZEND_GET_MODULE(use_html);

ZEND_FUNCTION(use_html)
{
     bool useHtml;

     if(zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC, "|b", &useHtml) == FAILURE)
     {
         E_ERROR;
         return;
     }

     if(useHtml)
     {
         php_printf("This string uses <a href='#'>Html</a>");
     }
     else
     {
         int sum = 0;
         int i = 0;
         for(i;i<100000;i++)
             sum += i;

         RETURN_LONG(number);
     }

     return;
}

ZEND_MINIT_FUNCTION(use_html)
{
    std::ifstream infile("file.txt");
    number++;
    return SUCCESS;
} 
```

错误消息是： Error 5 error C2491: 'std::endl' : definition of dllimport function not allowed c:\program files\microsoft visual studio 10.0\vc\include\ostream 1004 1 php_extension1

我也尝试更改包含的顺序，但没有帮助。

***编辑***

这是来自 ostream 的有问题的部分

```
_CRTIMP2_PURE inline basic_ostream<char, char_traits<char> >&
    __CLRCALL_OR_CDECL endl(basic_ostream<char, char_traits<char> >& _Ostr)
    {   // insert newline and flush byte stream
    _Ostr.put('\n');
    _Ostr.flush();
    return (_Ostr);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T18:12:00.750

我找到了一个解决方案：对于 php 扩展开发，我只`#include <string>`在 zend_config.w32.h 中添加了它，它编译得很好。欲了解更多信息：[http ://social.msdn.microsoft.com/Forums/hu-HU/vcgeneral/thread/94ed21c2-7128-4149-8a8f-05fc195a812c](http://social.msdn.microsoft.com/Forums/hu-HU/vcgeneral/thread/94ed21c2-7128-4149-8a8f-05fc195a812c)

# database - 显示实际属性而不是其 id

> ID：12988696
> 
> 赞同：-1
> 
> 时间：2012-10-20T12:59:12.087
> 
> 标签：database, yii

我有两个表问题和状态。问题表与状态表有关系。问题表具有状态 ID 作为字段。我想显示actaul状态而不是它的id....那我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T04:53:28.423

假设你有正确的关系：

a) 抓取一个**Qestion**对象：

```
$question = Question::model()->findByPk(1); // e.g 
```

*上面只是一个例子，你可以使用 yii 活动记录函数的可用变量来获取对象或对象数组，但是假设你得到了 Question 模型的对象*

b）您使用关系来检索活动记录对应的**状态**对象：

```
$status = $question->status; // where status is the name of the relation 
```

c) 现在你有一个状态对象，这意味着它是你的**状态**模型的一个对象。您可以使用默认属性 getter 来执行以下操作：

```
$status->name; //where name is the attribute you want to get from your status table 
```

# c# - 如何在 Windows Phone 7 中单击 webBrowser 中的链接时捕获事件

> ID：12988697
> 
> 赞同：2
> 
> 时间：2012-10-20T12:59:12.910
> 
> 标签：c#, windows-phone-7, webbrowser-control

我正在制作一个 Windows Phone 7 api（即 .dll 文件），它将来自服务器的广告以`webBrowser`. 进入的广告`webBrowser`是动画的。

有`webBrowser`一个动态 html，其中包含一个链接 (ie `strClickStr`) 和一个图片链接 (ie `strAdURL`)。服务器上有各种图像，每个图像都有不同的链接，如音频链接、视频链接和 url 链接。

到目前为止，一切正常，但是当我点击广告时，它附带的链接应该会调用。如果是音频/视频链接，那么它应该在默认的音频/视频播放器中播放，如果它是 url，那么它应该在默认打开`webBrowser`。

这是我现在要在默认​​ webBrowser 中打开 url 的 html：

```
var adx_strHtml = (
    new StringBuilder("<html><body bgcolor='#000000'><a target='_blank' href="))
    .Append(adx_strClickStr)
    .Append("><img width='100%' height='10%' onerror='imageLoadFailed()' src='")
    .Append(adx_strAdURL)
    .Append("' alt='' />")
    .Append("</a></body></html>")
    .ToString(); 
```

现在我的问题是我应该如何捕捉点击广告并检查链接并执行特定任务的事件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T14:55:05.530

您可以处理[WebBrowser.Navigating](http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.controls.webbrowser.navigating%28v=vs.92%29.aspx)事件并使用[NavigatingEventArgs](http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.controls.navigatingeventargs%28v=vs.92%29.aspx)对象来获取`Uri`和/或`Cancel`事件。

# ruby-on-rails - Rails 使用正确的时区渲染 json

> ID：12988699
> 
> 赞同：1
> 
> 时间：2012-10-20T12:59:29.477
> 
> 标签：ruby-on-rails, json, timezone

我正在使用 rails 应用程序作为 iOS 后端。有一个小问题 - 如何在 json 中使用用户的时区呈现时间戳？我正在使用默认的 UTC 时区。例如如何将其转换为 +2？也许有办法在渲染之前覆盖 as_json 方法来转换时间戳？

感谢帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T13:51:08.737

您可以在渲染 json 之前将时间转换为用户的时区，然后将包含时区。

```
1.9.3p125 :006 > t = Time.now.utc
 => 2012-10-20 13:49:12 UTC 
1.9.3p125 :007 > {time: t}.to_json
 => "{\"time\":\"2012-10-20T13:49:12Z\"}" 
1.9.3p125 :008 > t = Time.now.in_time_zone("Beijing")
 => Sat, 20 Oct 2012 21:49:19 CST +08:00 
1.9.3p125 :009 > {time: t}.to_json
 => "{\"time\":\"2012-10-20T21:49:19+08:00\"}" 
```

更新：要将时间转换为用户的时区以进行序列化，您可以覆盖此方法`read_attribute_for_serialization`。参见 ActiveModel 的 lib/active_model/serialization.rb：

```
# Hook method defining how an attribute value should be retrieved for
# serialization. By default this is assumed to be an instance named after
# the attribute. Override this method in subclasses should you need to
# retrieve the value for a given attribute differently:
#
#   class MyClass
#     include ActiveModel::Validations
#
#     def initialize(data = {})
#       @data = data
#     end
#
#     def read_attribute_for_serialization(key)
#       @data[key]
#     end
#   end
#
alias :read_attribute_for_serialization :send 
```

# java - 如何在我的 Eclipse 项目中使用属性文件而不使用任何硬代码来调用 java 文件？

> ID：12988703
> 
> 赞同：0
> 
> 时间：2012-10-20T13:00:12.993
> 
> 标签：java

> **可能重复：**
> [如何在 java 中读取属性文件](https://stackoverflow.com/questions/5295084/how-to-read-properties-file-in-java)

我有一个 'MyProp.properties' 文件，其中包含如下键值：

```
browser = Firefox
baseURL = http:\\www.google.com
user = student 
```

我想在我的项目中使用的上述键值对

我怎样才能做到这一点？我是JAVA新手，请指导我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T13:54:40.563

```
prop.load(new FileInputStream("config.properties"));

//get the property value and print it out
System.out.println(prop.getProperty("browser")); 
```

在提出问题之前，您本可以在 google/stackoverflow 上花费一些时间。.

# asp.net-mvc-3 - 为什么 FileStreamResult（可能还有 ActionResult）不是 IDisposable？

> ID：12988704
> 
> 赞同：5
> 
> 时间：2012-10-20T13:00:23.627
> 
> 标签：asp.net-mvc-3

如果使用带有参数的构造函数从 Controller 实例化该类，则该类`FileStreamResult`拥有一个流：`IDisposable``Stream`

```
public FileResult MyController()
{
    ...
    Stream stream = ...
    return File(stream, "text/plain", fileName);
} 
```

因此，它（可能还有它的基类）肯定`ActionResult`应该实现`IDisposable`吗？

当然，如果一切顺利，`FileStreamResult.WriteFile()`方法将处理`Stream`. 并且当使用内置的 Action Invoker`ControllerActionInvoker`时，在此发生之前抛出异常的风险似乎不大。

但是考虑到 MVC 的可扩展架构，在我看来，`Exception`在使用自定义 Action Invoker 时可能会阻止 Stream 被释放。

我原以为`ActionResult`应该实施`IDisposable`，并且应该要求 Action Invokers 保证它们被处置。

这是设计缺陷还是有充分的理由？

**更新**

来自 Henk Holterman 的回答：

> 请注意，Action Invoker 也无法关闭该文件，它很快就会关闭。

我不明白你在这里说什么 - 可能是因为我对处理程序框架不够了解。据我所知，Stream 目前由内置的 Action Invoker 处理如下：

InvokeAction => InvokeActionResult => ActionResult.ExecuteResult => FileStreamResult.WriteFile

那么为什么 InvokeAction 不能使用 try/finally 块来确保`IDisposable`ActionResult 将被释放 - 从概念上（并且可能过于简化）类似于：

```
bool InvokeAction(ControllerContext controllerContext, string actionName)
{
    ...
    ActionResult actionResult;

    try
    {
        ...
        actionResult = ... call Action method
        ...
        actionResult.ExecuteResult(controllerContext);
    }
    finally
    {
        if (actionResult != null) actionResult.Dispose();
    }
} 
```

# ruby-on-rails - 设计添加身份验证以创建角色

> ID：12988706
> 
> 赞同：0
> 
> 时间：2012-10-20T13:00:30.483
> 
> 标签：ruby-on-rails, devise, roles, cancan, role

我正在使用 devise 和 cancan 作为身份验证解决方案。

对于设计，我添加了一个角色属性，并创建了一个常量角色：

```
#Migration for adding roles
class AddRoleToUsers < ActiveRecord::Migration
  def change
    add_column :users, :role, :string
  end 
end

#Users.rb
ROLES = %w[user staff] 
```

我想在注册页面中添加一个功能，这样一个人要创建一个具有“员工”角色的用户，他还必须输入一个密钥（可能就像输入文本框中的“staffsecretkey”这样的密码） )

有人知道方法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T01:15:50.163

你必须做两件事：

1) 覆盖设计控制器

2) 自定义您的视图

检查 github 中的设计 wiki。您应该能够在那里找到您需要的所有信息。我正在用我的黑莓手机回复你，所以我现在不能给你更多细节。但是如果你不能用我给你的答案来解决这个问题。稍后我会帮你的。

# android - 怎么卸载系统包？

> ID：12988708
> 
> 赞同：1
> 
> 时间：2012-10-20T13:00:36.683
> 
> 标签：android, package, system, uninstallation

谁能给我一个代码如何卸载系统应用程序（包）？我有root权限。我需要一些包示例，因为 /system/app 中的应用程序名称对我不可用。

这个命令对我不起作用，我不知道为什么：

```
su
pm uninstall com.example.package 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T13:34:17.227

你必须重命名那里的apk文件，你在数据/系统中找到它们我认为将它们重命名为APP.apk_old

很多设备在linux中的rename命令都有问题所以更好地使用`mv`

# iphone - 仅在显示注释时滚动地图时崩溃应用程序

> ID：12988727
> 
> 赞同：1
> 
> 时间：2012-10-20T13:03:00.567
> 
> 标签：iphone, objective-c, mapkit

当我滚动显示一个或多个注释的地图时，我的应用程序崩溃了。没有显示注释地图工作正常。

现在我不明白这里有什么问题。请帮我。

以下是我用来显示所有注释的代码。

```
-(void)displayAllAnnotation
{
    NSLog(@"%d",[reminderTitle count]);
    for (int i=0 ; i<[reminderTitle count]; i++)
    {    
        double templati=[[reminderLatitude objectAtIndex:i]doubleValue];
        double templongi=[[reminderLongitude objectAtIndex:i]doubleValue];

        CLLocationCoordinate2D coord;
        coord.latitude=(CLLocationDegrees)templati;
        coord.longitude=(CLLocationDegrees)templongi;
        DDAnnotation *ann = [[[DDAnnotation alloc] initWithCoordinate:coord   addressDictionary:nil] autorelease];

        ann.title = [reminderTitle objectAtIndex:i];

        [self.mapView addAnnotation:ann];
        [ann release];

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T13:23:02.810

您两次释放*ann对象，因此您的应用程序崩溃了。*
删除*自动释放*。就这样写：

```
DDAnnotation *ann = [[DDAnnotation alloc] initWithCoordinate:coord   addressDictionary:nil]; 
```

# c# - wpf c#上的货币文本框

> ID：12988729
> 
> 赞同：4
> 
> 时间：2012-10-20T13:03:13.137
> 
> 标签：c#, .net, wpf, visual-studio-2010

我不知道如何使我的文本框从字符串变为货币。我已经在 STO、google 上进行了搜索。但不明白如何使用它。

假设我有一个文本框。每当它运行程序时，我都会在文本框内键入。如果我输入 1000，我希望我的文本框自动更改为 1,000。如果我输入 10000，我的文本框将看起来像 10,000。但是每当我输入 100 时，我的文本框仍然是 100。

这是我的文本框 xaml。

```
<TextBox Height="25" HorizontalAlignment="Left" Margin="126,223,0,0" Name="txtPrice" 
                     VerticalAlignment="Top" Width="140" PreviewTextInput="txtPrice_PreviewTextInput" /> 
```

在使用 vb.net 之前我曾经这样做过，但现在我使用的是 wpf。wpf 还是新手。知道怎么做吗？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T13:06:48.810

尝试这个：-

```
 <Style TargetType="{x:Type TextBox}">
  <Setter Property="Text" Value="{SomeValue, StringFormat=C}" />
  <Style.Triggers>
    <Trigger Property="IsKeyboardFocusWithin" Value="True">
        <Setter Property="Text" Value="{SomeValue, UpdateSourceTrigger=PropertyChanged}" />
    </Trigger>
   </Style.Triggers>
</Style> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-20T13:12:30.757

使用`StringFormat`依赖属性来格式化您希望字符串在 UI 上显示的方式。尝试这个 -

```
<TextBox Text="{Binding YourBinding, StringFormat='##,#', 
                          UpdateSourceTrigger=PropertyChanged}"/> 
```

有关更多格式，请参阅 msdn 中的此链接 -[自定义数字格式](http://msdn.microsoft.com/en-us/library/0c899ak8.aspx "自定义数字格式")

# iphone - 如何在特定视图内限制手势识别器

> ID：12988731
> 
> 赞同：0
> 
> 时间：2012-10-20T13:03:21.943
> 
> 标签：iphone, uiimageview, uiimage, ios6, uigesturerecognizer

我设置了一个 imageView，并`UIView`在该 imageView 上添加了一个。这`UIView`是透明的，现在我正在动态添加更多`ImageViews`内容`UIView`。

我想在我动态添加的 ImageViews 上设置 Pan 和 Pinch Zoom 手势识别器，但我不明白如何限制手势识别器的操作范围。？

当使用平移手势拖动的图像时，它应该保持在那个范围内，`UIView`并且不能被拖出那个边界`UIView`。

我`UIView`的只占屏幕的一半。

关于我们如何实现这一目标的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T13:04:09.770

您必须在平移手势方法中设置条件

```
 CGPoint translatedPoint = [(UIPanGestureRecognizer*)sender translationInView:your view];

if([(UIPanGestureRecognizer*)sender state] == UIGestureRecognizerStateBegan) {
    firstX = [your image center].x;//firstX and FirstY is CGFLoat...
    firstY = [your image center].y; 
```

}

```
if([(UIPanGestureRecognizer *)sender state] == UIGestureRecognizerStateEnded)
{
 }
translatedPoint = CGPointMake(firstX+translatedPoint.x, firstY+translatedPoint.y);

    if(translatedPoint.x < 0 || translatedPoint.x > 320)
    {
          set your image frame
    }
    else if(translatedPoint.y < 0 || translatedPoint.y > 480)
    {
        set your image frame

    }

     //   [your image setCenter:translatedPoint];

  you can change  boundaries in above conditions 
```

让我知道它是否工作......！！！快乐编码.!!!!

# android - Android保持秒表运行

> ID：12988735
> 
> 赞同：2
> 
> 时间：2012-10-20T13:04:05.860
> 
> 标签：android

我现在正在开发一个倒数计时器。但我希望它即使在我回到之前的活动时也能运行。我怎么能做到这一点？Android新手在这里。

这是我到目前为止所做的：私人按钮暂停、停止、开始、重置；私人计时码表；长时间当停止 = 0;

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_LEFT_ICON);
    setContentView(R.layout.stopwatch);
    getWindow().setFeatureDrawableResource(Window.FEATURE_LEFT_ICON, R.drawable.clock32);

    // initializes controls
    initControls();

    // sets format for chronometer
    chronometer.setText( "00:00:00" );

}

private void initControls(){

    // initializes buttons & chronometer
    pause = ( Button ) findViewById ( R.id.btStopWatchPause );
    stop = ( Button ) findViewById ( R.id.btStopWatchStop );
    start = ( Button) findViewById ( R.id.btStopWatchStart );
    reset = ( Button ) findViewById ( R.id.btStopWatchReset );
    chronometer = ( Chronometer ) findViewById ( R.id.chronometer );

    // sets listeners for buttons and chronometer
    pause.setOnClickListener(this);
    stop.setOnClickListener(this);
    start.setOnClickListener(this);
    reset.setOnClickListener(this);
    chronometer.setOnChronometerTickListener(this);

}

public void onClick(View v) {
    // TODO Auto-generated method stub

    switch( v.getId() )
    {
    case R.id.btStopWatchStart:
        chronometer.setBase(SystemClock.elapsedRealtime() + timeWhenStopped);
        chronometer.start();
        break;
    case R.id.btStopWatchStop:
        chronometer.stop();
        break;
    case R.id.btStopWatchReset:
        chronometer.setBase(SystemClock.elapsedRealtime());
        break;
    case R.id.btStopWatchPause:
        timeWhenStopped = chronometer.getBase() - SystemClock.elapsedRealtime();
        chronometer.stop();
        break;

    } // end of switch statement

}

public void onChronometerTick(Chronometer c) {
    // TODO Auto-generated method stub

    CharSequence text = c.getText();
    if ( text.length()  == 5 ) {
        c.setText( "00:" + text );
    } else if ( text.length() == 7 ) {
        c.setText( "0" + text );
    }

} // end of onChronometerTick method 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-20T13:26:21.533

您希望您的应用程序继续运行，即使活动不再可见。这个问题已经有了答案。例如这里：[如何让 Android 应用程序无限期地运行？](https://stackoverflow.com/questions/3529834)

# r - 通过传递索引列表/向量从 data.frame 获取值列表/向量

> ID：12988736
> 
> 赞同：0
> 
> 时间：2012-10-20T13:04:42.333
> 
> 标签：r, dataframe

```
indices <- c(2,5,9) 
```

客户是一个data.frame。

我想要索引索引位置中客户第 2 列的值列表。

```
names <- as.list(customer[,2] << indices) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T13:13:31.113

听起来您想从数据框中进行简单的提取。尝试：

```
customer[indices, 2] 
```

# c# - 无法解决操作，即使我的操作存在

> ID：12988738
> 
> 赞同：0
> 
> 时间：2012-10-20T13:04:46.033
> 
> 标签：c#, asp.net-mvc, razor

希望是一个非常简单的 MVC 问题 ()，我的**Controllers**文件夹中有一个名为**HomeController**的控制器，其中包含一个名为**Index**的方法，如下所示：

```
public ActionResult Index()
{
    return View();
} 
```

我的索引视图确实存在，在我的共享布局视图中，我有以下链接（指向我的索引页面）

```
@Html.ActionLink("Home", "Index") 
```

我这样做对吗？我的控制器中有一个名为**Index**的方法，它返回我的**Index**视图，所以这个 ActionLink 不应该工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T13:06:27.560

ActionLink 采用动作名称，然后是控制器名称。

```
@Html.ActionLink("My Link", "Index", "Home"); 
```

请参阅[http://msdn.microsoft.com/en-us/library/dd505070(v=vs.108).aspx](http://msdn.microsoft.com/en-us/library/dd505070(v=vs.108).aspx)

# php - 如何在本地服务器上运行加密的 php 文件？

> ID：12988740
> 
> 赞同：1
> 
> 时间：2012-10-20T13:05:14.403
> 
> 标签：php

> **可能重复：**
> [php 的代码混淆器？](https://stackoverflow.com/questions/232736/code-obfuscator-for-php)
> [我可以加密 PHP 源代码或编译它以便其他人看不到吗？如何？](https://stackoverflow.com/questions/470409/can-i-encrypt-php-source-or-compile-it-so-others-cant-see-it-and-how)
> [如何保护 PHP 代码？](https://stackoverflow.com/questions/3172078/how-is-it-possible-to-protect-php-code)

我想加密 PHP 代码，以便其他人不应该修改，也无法查看代码。如果我在浏览器中运行该加密的 PHP 文件，它的功能应该可以工作。我使用了一些代码和一些软件，如 PHP Bambalam PHP EXE 编译器/嵌入器、phc-win、zzee php 等，我能够加密 PHP 代码但无法在服务器中运行。它显示的是 PHP 加密代码而不是其功能。

任何人都可以建议我一种方法来加密应该免费的文件并在服务器中运行该加密代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T13:07:23.960

对于**ionCube** *（我使用）*，您还需要在服务器上安装加载程序：

[http://www.ioncube.com/loaders.php](http://www.ioncube.com/loaders.php)

有些东西必须解密文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T13:06:41.137

你不需要这样做。PHP 代码在服务器上运行，浏览器从不下载它。

# java - 无法从静态方法调用实例方法

> ID：12988751
> 
> 赞同：0
> 
> 时间：2012-10-20T13:06:52.300
> 
> 标签：java

我有这个类，我只需要`toString()`内部方法的帮助来实际显示结果。它给了我一个无法使用`getName()`或`getId()`在静态上下文中的错误：

```
public static void bubbleSort(Student[] array)
{
    for(int i=(array.length); i>0; i--)
        for(int j=1; j<(array.length-i); j++)
            if(array[j].getName().compareTo(
               array[j+1].getName())<0) {
                Student Temp = array[j];
                array[j] = array[j+1];
                array[j+1] = Temp;
            }

    String s = null;
    for (int i=0; i<array.length; i++) {
    // the error is here under the getName and getId 
        s= s+ getName()+" "+ getId() ;
    } 
    System.out.print (s);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T13:11:12.083

代替：

```
s= s+ getName()+" "+ getId() ; 
```

你可能需要这样做：

```
s= s+ array[i].getName()+" "+ array[i].getId() ; 
```

并在上面的评论中使用：

```
String s = ""; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T13:11:19.460

我认为您想打印`Student`您之前排序的 s 的名称和 ID。

```
public static void bubbleSort(Student[] array)
{
    for(int i=(array.length); i>0; i--)
    {

        for(int j=1; j<(array.length-i); j++) 
        {
             if( array[j].getName().compareTo(array[j+1].getName())<0)

            {
                Student Temp = array[j];
                array[j] = array[j+1];
                array[j+1] = Temp;
            }

        }
    }

    String s = ""; // should not be null

    for (int i = 0; i < array.length; i++)
    {
        s = s + array[i].getName()+" "+ array[i].getId(); // changed this line
        System.out.print (s); // moved this into the loop because I think this makes more sense
    }
} 
```

方法`getName()`和`getID()`属于对象`Student`，而不是`bubbleSort()`定义的类的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T13:12:02.613

您可能想要`array[i].getName()`and`array[i].getId()`而不是`getName()`and `getId()`。

# magento - 显示属性图像而不是文本

> ID：12988757
> 
> 赞同：-1
> 
> 时间：2012-10-20T13:07:36.200
> 
> 标签：magento, attributes, branding

我弄清楚如何在产品列表类别中显示属性，我需要的是显示图像而不是文本。

例如。我有一个属性文本`ASUS`和一个图像位于`media/brands/`命名`asus.gif`或而不是`Western-Digital`显示图像位于`media/brands/western-digital.gif`.

我希望你明白

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T01:30:47.623

你想做的是

```
<img src="<?php echo $this->getMediaUrl(); ?>brands/<?php echo strtolower($_product->getManufacturer()); ?>.png" /> 
```

getManufacturer 可能是属性，如果需要，请更改它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T09:53:40.990

我找到了解决方案：

```
 <?php $brand=$_product->getAttributeText('manufacturer');
    echo '<a href="/'.str_replace(' ', '_',$brand).'"><img style="float: right; margin: 2px;" src="/media/catalog/brands/'.str_replace(' ', '_',$brand).'.gif" alt="'.$brand.'"></a>' ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T14:24:40.643

如果您的属性是下拉属性，您可以在表 eav_attribute_option_value 和管理面板中管理属性页面的“管理选项/标签”选项卡中添加一个新列。对于每个选项值，在每个商店翻译旁边，您可以存储图像的名称并在模板中检索它。它需要一些开发，但它是可行且易于管理的。

或者快速而肮脏的方法：使用管理标签字符串，将其小写并清除以检索与图像相关的文件名

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T00:57:30.907

在 Magento 1.7.0.2 中，您可以以非常简单的方式完成此操作...

您所做的就是创建一个新属性，然后从“目录输入类型..”下拉列表中选择“媒体图像”。

# c - C中的合法数组赋值语句

> ID：12988758
> 
> 赞同：2
> 
> 时间：2012-10-20T13:07:39.540
> 
> 标签：c, arrays, pointers, multidimensional-array

> **可能重复：**
> [C 中的 char s[] 和 char *s 有什么区别？](https://stackoverflow.com/questions/1704407/what-is-the-difference-between-char-s-and-char-s-in-c)
> [char *str = “…” 和 char str[N] = “…” 的区别？](https://stackoverflow.com/questions/12121759/difference-between-char-str-and-char-strn)

我是 C 编程的初学者。我对这些事情感到困惑：

```
char ar[]="hello";
char ar2[], *ar3;
ar2=ar;
ar3=ar; 
```

对于 2D 数组，上述内容也是合法的，例如：

```
int arr[2][2]={{1,2},{3,4}};
int arr1[2][2],**arr2,*arr3;
arr1[0]=arr[0];
arr1=arr;
arr2=arr;
arr3=arr; 
```

另一个困惑是我在上面看到的在结构的情况下是有效的。

```
struct test{
int ar[2];
} t1, t2;

int main()
{
t1.ar[0]=0;
t1.ar[1]=1;
t2.ar=t1.ar;
} 
```

请多多包涵，我是 C 的初学者。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T13:10:56.897

```
char ar[] = "hello";
char ar2[];
char *ar3; 
```

数组是*不可修改的左值*，因此以下语句无效：

```
ar2 = ar; 
```

否则，有可能将此值影响到指针。

```
ar3 = ar; 
```

二维数组和结构成员的行为相同。

> # C11 (n1570)
> 
> **§ 6.3.2.1 左值、数组和函数指示符**
> 可修改的左值是不具有数组类型的左值 [...]。
> 
> **§ 6.5.16 赋值运算符**
> 赋值运算符应有一个可修改的左值作为其左操作数。

# ios - 如何将 Haskell 代码与 Objective-C 结合用于 iOS 开发？

> ID：12988759
> 
> 赞同：12
> 
> 时间：2012-10-20T13:07:43.860
> 
> 标签：ios, objective-c, haskell, functional-programming, interop

我想开始 iOS 开发，我对在 iOS 环境中使用 Haskell 语言而不是 Objective-C/C++ 的方式非常感兴趣。假设我们有一些使用不同 Haskell 库的 Haskell 代码，我们希望在 iOS 项目中重用它（而不是用于生产）。

所以问题是：是否有一些现成的解决方案用于此目的（库、桥梁、框架等）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-02T17:29:10.407

过去，我使用[HOC](http://code.google.com/p/hoc/)生成与 Objective C API 的 Haskell 绑定。

# svn - 我可以修剪 SVN 中的旧版本吗？

> ID：12988764
> 
> 赞同：4
> 
> 时间：2012-10-20T13:08:34.690
> 
> 标签：svn

作为标题，只是想知道现在是否可用？我正在使用 TortoiseSVN，但我没有看到这个选项。

2008年有一个帖子说SVN官方团队已经计划实现这个功能

[如何在 Subversion 中修剪旧版本？](https://stackoverflow.com/questions/303247/how-do-i-prune-old-revisions-in-subversion)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T21:30:57.850

不，您不能修剪（官方术语是“删除”）修订或文件。

有一个工作（？）原型，但在 1.7 中发布的工作不够好，该功能因更紧迫的问题而被删除。

[有关 bugtracker 条目，请参见此处](http://subversion.tigris.org/issues/show_bug.cgi?id=516)

# c# - 禁用或隐藏标题栏

> ID：12988775
> 
> 赞同：0
> 
> 时间：2012-10-20T13:09:52.583
> 
> 标签：c#, .net, wpf, xaml, mdi

我正在使用[http://wpfmdi.codeplex.com/](http://wpfmdi.codeplex.com/)库来处理我的 WPF 应用程序中的 MDI。

我有一个包含子容器的 Canvas，该子容器又包含许多小窗口。

我想禁用我的子窗口上的标题栏。这可能吗？我还没有找到实现这一点的单一属性，特别是因为`MdiChild`对象是类型`Control`而不是`Window`.

这是我创建 MDIChild 的代码，其中包含我的`TableWindow`类的一个对象。

```
 MdiChild child = new MdiChild()
            {
                MaximizeBox = false,
                MinimizeBox = false,
                Resizable = true,
                ShowIcon = false,
                Content = tableWindow.Content as UIElement
            };

            mainContainer.Children.Add(child); 
```

**编辑：**

![在此处输入图像描述](../Images/4c66e87cc0a80cd56f4880fb5c7aa259.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T13:51:03.003

因为它是一个`Control`所以你必须使用`override`它的默认模板（`ControlTemplate`）。

在源代码中，您将看到两个 xamls -`Aero.xaml`并`Luna.xaml`包含 MdiChild 控件的样式。源代码可以在[这里](http://wpfmdi.codeplex.com/SourceControl/changeset/view/81799#666806 "这里")看到。只需摆脱`StackPanel(ButtonsPanel)`包含按钮和`Grid(HeaderContent)`.

这就是 WPF 为我们提供的强大功能，您可以自定义任何控件，通过覆盖它的`ControlTemplate`.

**编辑**

要覆盖模板，您必须在 xaml 中重新定义它。你要做的是`create a style again in your Window resources, set the template for the control`它会自动覆盖默认的控制模板。[只需从此处](http://wpfmdi.codeplex.com/SourceControl/changeset/view/81799#666806)复制粘贴整个模板，然后删除我上面提到的 StackPanel 和 Grid。

```
<Window.Resources>
   <Style TargetType="{x:Type mdi:MdiChild}">
      <Setter Property="Template">
          <Setter.Value>
              <ControlTemplate>
                  <!-- Copy paste entire template here and
                       just remove the StackPanel and Grid -->
              </ControlTemplate>
          </Setter.Value>
      </Setter>
   </Style>
</Window.Resources> 
```

**编辑2**

用这个替换你`ControlTemplate`以禁用标题栏，但仍为您的控件启用拖动操作和可调整大小的操作 -

```
<ControlTemplate TargetType="{x:Type mdi:MdiChild}">
   <Border Name="BaseBorder" BorderThickness="1" CornerRadius="5,5,0,0"
           Background="{StaticResource BackBorderBackgroundBrush}"
           BorderBrush="{StaticResource BackBorderBrush}">
               <Grid>
                  <Border Name="ContentBorder"
                          Background="{TemplateBinding Background}"
                          BorderBrush="{TemplateBinding BorderBrush}"
                          BorderThickness="{TemplateBinding BorderThickness}">
                         <ContentControl Content="{TemplateBinding Content}" />
                   </Border>
                  <Thumb Name="DragThumb" Height="20" Margin="0,0,40,0"
                         VerticalAlignment="Top" Opacity="0"/>

                   <Rectangle Name="LeftBorder" Width="1" HorizontalAlignment="Left" 
                              RadiusX="9" RadiusY="9"
                              Fill="{StaticResource NearBorderBrush}" />
                   <Rectangle Name="TopBorder" Height="1" VerticalAlignment="Top" 
                              RadiusX="9" RadiusY="9"
                              Fill="{StaticResource NearBorderBrush}" />
                   <Rectangle Name="RightBorder" Width="1" HorizontalAlignment="Right" 
                              RadiusX="9" RadiusY="9"
                              Fill="{StaticResource FarBorderBrush}" />
                   <Rectangle Name="BottomBorder" Height="1" VerticalAlignment="Bottom" 
                              RadiusX="9" RadiusY="9"
                              Fill="{StaticResource FarBorderBrush}" />

                   <Thumb Name="ResizeLeft" Width="6" HorizontalAlignment="Left" 
                          Margin="0,6,0,6" Opacity="0" Cursor="SizeWE"
                          IsHitTestVisible="{TemplateBinding Resizable}" />
                   <Thumb Name="ResizeTop" Height="4" VerticalAlignment="Top" 
                          Margin="6,0,6,0" Opacity="0" Cursor="SizeNS"
                          IsHitTestVisible="{TemplateBinding Resizable}" />
                   <Thumb Name="ResizeRight" Width="6" HorizontalAlignment="Right" 
                          Margin="0,6,0,6" Opacity="0" Cursor="SizeWE"
                          IsHitTestVisible="{TemplateBinding Resizable}" />
                   <Thumb Name="ResizeBottom" Height="6" VerticalAlignment="Bottom" 
                          Margin="6,0,6,0" Opacity="0" Cursor="SizeNS"
                          IsHitTestVisible="{TemplateBinding Resizable}" />
                   <Thumb Name="ResizeTopLeft" Width="6" Height="6" 
                          HorizontalAlignment="Left" VerticalAlignment="Top" Opacity="0" 
                          Cursor="SizeNWSE"
                          IsHitTestVisible="{TemplateBinding Resizable}" />
                   <Thumb Name="ResizeTopRight" Width="6" Height="6" 
                          HorizontalAlignment="Right" VerticalAlignment="Top"
                          Opacity="0" Cursor="SizeNESW"
                          IsHitTestVisible="{TemplateBinding Resizable}" />
                   <Thumb Name="ResizeBottomRight" Width="6" Height="6" 
                          HorizontalAlignment="Right" VerticalAlignment="Bottom" 
                          Opacity="0" Cursor="SizeNWSE"
                          IsHitTestVisible="{TemplateBinding Resizable}" />
                   <Thumb Name="ResizeBottomLeft" Width="6" Height="6" 
                          HorizontalAlignment="Left" VerticalAlignment="Bottom"
                          Opacity="0" Cursor="SizeNESW"
                          IsHitTestVisible="{TemplateBinding Resizable}" />
             </Grid>
       </Border>
</ControlTemplate> 
```

# c# - 使用 WCF 时，函数重载规则？

> ID：12988777
> 
> 赞同：2
> 
> 时间：2012-10-20T13:10:00.070
> 
> 标签：c#, wcf, c#-4.0

我在我的项目中使用 Windows 通信服务 (WCF)。

在我的项目中，

我编写如下函数：

```
GetUserNameByUserId(int userId);
GetProductInformationByProductId(int productId); 
```

但是这个命名已经一天比一天复杂了。

例如，我有 5 个参数要传递给函数，在这种情况下，函数名称将如下所示：

```
GetStackOverFlowByStackByOverByFlowByIdByStackOverFlow(string stack, string over, string flow, int id, string stackOverFlow); 
```

并假设我想获得 2 个参数，如打击：

```
GetStackOverFlowByIdByStackOverFlow(int id, string stackOverFlow); 
```

我想使用如下函数重载：

```
public void abc(int i)
{
    System.Console.WriteLine("abc" + i);
}
public void abc(string i)
{
    System.Console.WriteLine("abc" + i);
}
public void abc(string i,int j)
{
    System.Console.WriteLine("abc" + i + j);
} 
```

也就是说，我想写下面的函数：

```
GetStackOverFlow(int id);
GetStackOverFlow(int id, string name);
GetStackOverFlow(int id, string name, string StackOver);
.
. 
```

不是吗？有什么方法吗？还是我做对了？

我研究并发现： [WCF 中的函数重载](https://stackoverflow.com/questions/8398079/function-overloading-in-wcf)

```
public interface IMyService
{
   [OperationContract(Name = "GetStringWithParam")]
   string GetString(DateTime date);

   [OperationContract(Name = "GetStringWithoutParam")]
   string GetString();
} 
```

他说

> 但我不喜欢它，因为它有时会导致混乱。

还有其他方法吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T13:25:45.250

您可以使用类作为参数。

```
[DataContract]
public class MySearchSettings
{

    [DataMember]
    public int? ID { get; set; }
    [DataMember]
    public string Name { get; set; }
    [DataMember]
    public string StackOver { get; set; }

} 
```

而不是创建这样的方法：

```
public GetStackOverflowResponse GetStackOverflow(MySearchSettings searchSettings)
{
    var response = new GetStackOverflowResponse();
    try
    {
        User user = null;
        if (searchSettings == null)
            throw new ArgumentNullException("searchSettings");
        if (searchSettings.ID.HasValue)
            user = //queryByID;
        else if (!String.IsNullOrEmpty(searchSettings.Name))
            user = //queryByName;
        else if (!String.IsNullOrEmpty(searchSettings.StackOver))
            user = //queryByStackOver;
        response.User = user;
    }
    catch(Exception e)
    {
        response.ErrorMessage = String.Format("{0}: {1}",
                                              e.GetType().Name,
                                              e.Message);
    }
    return response;
} 
```

我没有包括`GetStackOverflowResponse class`但你明白了。这样做的好处之一是，在部署较新版本的服务时，您可以轻松扩展类而不会破坏客户端的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T13:17:17.807

你做得很好，这就是你在 WCF 中重载方法的方式（使用 name 属性）。我没有看到比使用 name 属性重载方法更好的方法。

# android - 自动基于视觉的骑车人检测安卓应用

> ID：12988778
> 
> 赞同：0
> 
> 时间：2012-10-20T13:10:12.483
> 
> 标签：android, ocr

上周我选择了我的主要项目。这是一个基于视觉的系统，用于监控骑自行车的人在计时赛中通过赛道上的某些点。它应该检测骑车人背部的亮黄色比赛号码并从中提取号码，并记录时间。我对此进行了一些研究，并决定使用 Robert Theis 的 Tesseract Android 工具，称为 Tess Two。为了加快识别文本的过程，我想使用一个事实，即从骑车人背部的明亮（黄色）矩形中提取数字并将实际 OCR 仅集中在其上。我还没有找到任何代码或任何想法如何检测具有特定颜色的几何图形。感谢您的任何帮助。很抱歉，如果我犯了任何错误，我在这个网站上还是个新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T12:56:01.293

图片来自哪里？我问是因为我被要求为类似应用程序的设计提供一些技术帮助（我们正在使用足球运动员的衬衫），我可以告诉你你会遇到一些问题：

*   使用高质量的视频源，而不是依赖几个数码相机图像。由于骑手的运动，该数字几乎肯定会“弯曲”或扭曲，并且能够使用一系列图像有时可以让您根据一系列“错误读数”计算出它的真正数字
*   训练您使用的字体，但也要尽可能多地应用逻辑（如果数字始终是两位数并且从不以“9”开头，请使用此信息来帮助您获得正确的数字
*   如果您有能力放置相机（我们没有！），我会认为您的理想位置应该在骑手上方并稍微向前看，这样您就可以以最小的失真捕捉他们的背部。
*   我们发现将视频中的几个静止帧合并到一个图像中可以得到最好的整体图像 - 但是，用于此的技术是由第三方开发的，他们不想发布它，我'我害怕 ：（

祝你好运！

# python - 如何获取调用 __init__ 方法的子类

> ID：12988780
> 
> 赞同：0
> 
> 时间：2012-10-20T13:10:46.960
> 
> 标签：python, logging

我有以下课程：

```
import cfg
import sqlite3
import logging

# logger = logging ......

class Connection:
    def __init__(self):
        try:
            self.connection = sqlite3.connect(cfg.pathToDatabase)
            self.connection.row_factory = sqlite3.Row
            self.cursor = self.connection.cursor()
            logger.info("Connection to database at " + cfg.pathToDatabase + " successful")
        except Exception, e:
            logger.critical("Error connecting to database")
            logger.exception(e) 
```

这个类将从*多个*类中实例化。在以下行中：

```
logger.info("Connection to database at " + cfg.pathToDatabase + " successful") 
```

我想*记录在**Connection*类中*调用*__init __ 方法的类。这可能吗 ？

 *例如，基于以下内容：

```
class Child:
    def __init__(self):
        self.connection = Connection() 
```

我想看到这个记录：

```
"Connection to database at data.sqlite successful from class: Child" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T13:56:03.023

像这样的东西？

```
import traceback, sys

class C:
    def __init__(self):
        try:
            raise StopIteration
        except StopIteration:
            tb = sys.exc_info()[2]
            stack = traceback.extract_stack(tb.tb_frame)
            f = stack[-2]
            print "I was called from %s %s (%s:%s)" % (f[2], f[3], f[0], f[1])

class A:
    def __init__(self):
        self.c = C()

def foo():
    A()
    return C()

def main():
    C()
    foo()

if __name__ == '__main__':
    main() 
```

输出：

```
I was called from main C() (test.py:22)
I was called from __init__ self.c = C() (test.py:15)
I was called from foo return C() (test.py:19) 
```*

# ruby-on-rails - 在 ruby 中使用 markdown 处理 wiki 链接

> ID：12988789
> 
> 赞同：2
> 
> 时间：2012-10-20T13:11:53.167
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, wiki, markdown

我正在使用 Markdown 构建一个带有 Rails 的简单应用程序来存储内容。我的问题是如何建立内部 [[wiki]] 风格的链接？通过在降价之前进行预处理还是通过一些降价衍生产品？我发布我可能可以使用正则表达式进行预处理，但我猜还有其他人已经准备好了解决方案。

例如，我知道 Instiki 使用 markdown 和 [[wiki|Wiki]] 链接，我看过但无法弄清楚他们是如何处理它的。

有小费吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T14:10:42.993

如果您使用[redcarpet gem](http://rubygems.org/gems/redcarpet)，您可以使用预处理器，也可以修改生成的 HTML 输出。

查看[如何扩展 Redcarpet 以支持媒体库](http://yet.another.linux-nerd.com/blog/how-to-extend-redcarpet-to-support-a-media-library-part-2)。本文展示了如何将图像引用转换为自定义 HTML，以及如何将样板标识符替换为实际内容。

我想这两种方法都可以针对您的特定问题进行调整：

*   渲染器方法直接操作从 markdown 代码生成的 HTML 代码。（这更优雅，因为您不会弄乱 Markdown 代码）
*   预处理方法通过使用正则表达式来操作代码（正如您已经提到的）（这更灵活，但也有点混乱）

# android - 如何在 Eclipse 中的 2.3 AVD 上运行具有项目构建目标 4.1 的 android 项目

> ID：12988790
> 
> 赞同：1
> 
> 时间：2012-10-20T13:11:55.967
> 
> 标签：android, eclipse

我有一个带有 project 的项目`build target 4.1`，当我尝试在 Eclipse 中使用“运行方式->运行配置”运行它时，在目标`AVD`列表框中，只`4.1 AVD`列出了，我只能在`4.1 AVDs`.

我尝试将项目构建目标设置为`2.3`，`2.3 AVD`在目标列表框中列出，但问题是，这会导致编译错误，例如，如果我使用以下代码：

```
Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB 
```

使用构建目标作为 2.3 会导致错误，似乎我必须使用更高的构建目标（如 4.1）来编译项目。

我认为一种解决方法是将项目导出为 apk，然后使用 abd 在 2.3 AVD 上安装和调试。

使用sdk如下：

```
<uses-sdk android:minSdkVersion="4" android:targetSdkVersion="15" /> 
```

我的问题是，如何在 Eclipse 中的 2.3 AVD 上运行项目构建目标为 4.1 的 android 项目，如“运行为 -> 运行配置”对话框中，无法列出 2.3 AVD，我该如何选择 2.3 目标运行项目？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T02:51:23.850

**运行方式 -> 运行配置 -> 始终提示选择设备**

通过这样做，每当您运行应用程序时，都会出现一个对话框，您*应该*可以从中选择您的 Android 2.3 设备。

# .net - WPF：依赖属性和资源

> ID：12988797
> 
> 赞同：2
> 
> 时间：2012-10-20T13:12:35.950
> 
> 标签：.net, wpf, xaml, dependency-properties

我在 MSDN 上找到了这个：

可以通过引用资源来设置依赖属性值。资源通常被指定为`Resources`页面根元素或应用程序的属性值（这些位置可以最方便地访问资源）。以下示例显示了如何定义`SolidColorBrush`资源。

XAML：

```
<DockPanel.Resources>
    <SolidColorBrush x:Key="MyBrush" Color="Gold"/>
</DockPanel.Resources> 
```

定义资源后，您可以引用该资源并使用它来提供属性值：

```
<Button Background="{DynamicResource MyBrush}" Content="I am gold" /> 
```

此特定资源被称为 DynamicResource Markup Extension 。*要使用动态资源引用，您必须设置为依赖属性，因此 WPF 属性系统专门启用了动态资源引用使用。*

我的问题是：

1.  StaticResource 不被视为依赖属性？如果是，为什么？
2.  不属于 WPF 属性系统？

你也可以给我一个例子，如何使用依赖属性实现默认值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T10:31:17.513

*DynamicResource*仅用于设置**依赖属性值**。

相比之下， *StaticResource*可以在任何地方实际使用。您可以使用它来设置依赖属性值，但**不仅限于**. 例如，您还可以通过*StaticResource*在面板中将元素定义为资源，例如在代码中

```
<Window>
   <Window.Resources>
       <Button Content="btnStaticResource" x:Key="myBtn" />
   </Window.Resources>

   <Grid> 
      <StaticResource ResourceKey="myBtn" /> 
   </Grid>
</Window> 
```

关于您的**问题 1**，资源不是依赖属性，无论您是使用*StaticResource*还是*DynamicResource*标记扩展来引用它。

WPF 中的资源可以是任何东西，.NET 对象、字体、图像、颜色、字符串等。资源的概念与依赖属性的概念无关。

依赖属性是 WPF 引入的一种新型属性。依赖属性值根据固定的层次结构依赖于多个源（有关详细信息[msdn](http://msdn.microsoft.com/en-us/library/ms743230.aspx)）。

关于您的**问题 2**，是的，StaticResource 的概念是 WPF 资源系统的一部分。

最后，要定义依赖属性的默认值，请参见以下代码：

```
public static readonly DependencyProperty AlphaProperty = DependencyProperty.Register   ("Alpha", typeof(int), typeof(MyButton), new FrameworkPropertyMetadata(255, FrameworkPropertyMetadataOptions.AffectsRender)); 
```

这里定义了一个名为 Alpha 的依赖属性，类型为 int，默认值为 255。

我希望这有帮助

# java - JavaMail 检查邮件内容 gmail IMAP

> ID：12988799
> 
> 赞同：7
> 
> 时间：2012-10-20T13:12:55.260
> 
> 标签：java, imap, jakarta-mail

我正在尝试阅读我的消息，我可以让它打印标题，但来自和内容的显示很有趣。这是我用来显示消息的代码：

```
 int j = message.length-1;
    for (int i=j;i>=0;i--) {
        System.out.println("Message " + (i + 1));
        System.out.println("From : " + message[i].getFrom());
        System.out.println("Subject : " + message[i].getSubject());
        try {
            System.out.println("Body: " + message[i].getContent());
        } catch (IOException ex) {
            System.out.println(ex);
        }
    } 
```

输出如下：

```
 Message 1:
 From: [javax.mail.internet.InternetAddress;@175831e]
 Subject: Hello //This is correct
 Body: javax.mail.internet.MimeMultipart@15b5219 
```

为什么这不打印出 from 语句的实际电子邮件地址？为什么它不打印出实际的正文内容？（我只对纯文本感兴趣。）

整个代码：

```
import javax.mail.*;
import javax.mail.internet.*;
import javax.mail.search.*;
import java.util.*;
import com.sun.mail.imap.*;
import java.io.*;

public class MailClient {
public static void main(String[] args) {
    try {
    Properties props = new Properties();
    props.put("mail.store.protocol","imaps");

    Session session;

    session = Session.getDefaultInstance(props, null);
    Store store = session.getStore("imaps");
    store.connect("imap.gmail.com","email@gmail.com","password");

    IMAPFolder folder = (IMAPFolder) store.getFolder("inbox");
    folder.open(Folder.READ_ONLY);

    Flags seen = new Flags(Flags.Flag.SEEN);
    FlagTerm unseenFlagTerm = new FlagTerm(seen,false);
    Message message[] = folder.search(unseenFlagTerm); 

    int j = message.length-1;
    for (int i=j;i>=0;i--) {
        System.out.println("Message " + (i + 1));
        System.out.println("From : " + message[i].getFrom());
        System.out.println("Subject : " + message[i].getSubject());
        try {
            System.out.println("Body: " + message[i].getContent());
        } catch (IOException ex) {
            System.out.println(ex);
        }
    }    
    System.out.println(newMsg);

    folder.close(false);
    store.close();
    }
    catch (MessagingException e) {
        System.out.println("Error: " + e);
    }
}
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-22T14:00:21.627

对于纯文本和 html 消息：

`String content= messages[i].getContent().toString();`

对于多部分消息：

```
Multipart multipart = (Multipart) messages[i].getContent();

    for (int j = 0; j < multipart.getCount(); j++) {

        BodyPart bodyPart = multipart.getBodyPart(j);

        String disposition = bodyPart.getDisposition();

          if (disposition != null && (disposition.equalsIgnoreCase("ATTACHMENT"))) { // BodyPart.ATTACHMENT doesn't work for gmail
              System.out.println("Mail have some attachment");

              DataHandler handler = bodyPart.getDataHandler();
              System.out.println("file name : " + handler.getName());                                 
            }
          else { 
              System.out.println("Body: "+bodyPart.getContent());
              content= bodyPart.getContent().toString();
            } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-20T19:29:08.313

JavaMail FAQ 告诉您如何[访问邮件的正文](http://www.oracle.com/technetwork/java/javamail/faq/index.html#mainbody)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-20T13:52:17.860

改变这个

```
message[i].getFrom() 
```

到

```
message[i].getFrom()[0].toString()) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T13:53:39.317

尝试使用下一个：

```
message[i].writeTo(System.out); 
```

# c# - 限制 TextBox Visual Studio C# 的内容

> ID：12988808
> 
> 赞同：0
> 
> 时间：2012-10-20T13:15:09.553
> 
> 标签：c#, visual-studio-2010, web-applications, error-handling, textbox

我试图限制用户输入，以便用户只能向名为 OrderID 的文本框输入数字，并且只能向名为 CustomerName 的文本框输入字母。

是否可以在 Visual Studio Web 应用程序表单中执行此操作？用 C# 编码。如果是这样，我该怎么做？

如果用户在上述实现后尝试输入无效数据类型，我还必须处理异常。

如何才能做到这一点？任何帮助深表感谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T13:19:49.120

对文本使用正则表达式使用它- `^[a-zA-Z]*$`.
使用 CompareValidator，用于数字

```
<asp:TextBox ID="txt" runat="server />
<asp:CompareValidator ID="cv" runat="server" ControlToValidate="txt" Type="Integer"
   Operator="DataTypeCheck" ErrorMessage="Value must be an integer!" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T13:21:09.160

您可以通过扩展 TextBox 类来实现这一点，如下所示：我已经为一个项目完成了此操作。

在 AssemblyInfo.cs 类中添加这一行：

```
[assembly: WebResource("Web.Controls.Javascript.NumberBox.js", "text/javascript")] 
```

**C#类：**

```
public sealed class NumberBox : TextBox
{
    protected override void OnPreRender(EventArgs e)
    {
        RegisterIncludeScripts();

        this.Attributes.Add("onkeydown", "return NumberBox_KeyDown(this, event);");
        this.Attributes.Add("onkeyup", "return NumberBox_KeyUp(this, event);");
        this.Attributes.Add("onblur", "NumberBox_Blur(this);");
        this.Attributes.Add("onpaste", "NumberBox_Paste(this);");

        base.OnPreRender(e);
    }

    private void RegisterIncludeScripts()
    {
        this.Page.ClientScript.RegisterClientScriptResource(typeof(TextBox), "Web.Controls.Javascript.NumberBox.js");
    }

    public int Number
    {
        get
        {
            if (this.Text.Equals(String.Empty)) return -1;
            else return Convert.ToInt32(this.Text);
        }
    }
} 
```

**JavaScript：**

```
function NumberBox_KeyDown(control, e) {
    var keynum = GetKeystroke(e);

    if (IsFuncKey(keynum))
        return true;

    var keychar = String.fromCharCode(keynum);

    if (NumberBox_IsExceedingLimit(control, control.value + keychar))
        return false;

    if (keynum >= 96 && keynum <= 105)
        return true;

    var numcheck = /\d/;
    return numcheck.test(keychar);
}

function NumberBox_KeyUp(control, e) {
    var keynum = GetKeystroke(e);

    if (IsFuncKey(keynum))
        return true;

    control.value = control.value.replace(/[^0-9 ]/g, '');
}

function NumberBox_Paste(control) {
    control.value = control.value.replace(/[^0-9 ]/g, '');
    if (NumberBox_IsExceedingLimit(control)) {
        control.value = control.value.substring(0, control.value.length - 1);
    }
}

function NumberBox_Blur(control) {
    control.value = control.value.replace(/[^0-9 ]/g, '');
    if (NumberBox_IsExceedingLimit(control)) {
        control.value = control.value.substring(0, control.value.length - 1);
    }
}

function NumberBox_IsExceedingLimit(control, value) {
    var maxValue = control.attributes["maxValue"].value;
    var value = String(value);

    if (value.length > maxValue) {
        return true;
    }
    return false;
}

function NumberBox_IsExceedingLimit_IsInsideBoundary(control, value) {
    var minValue = control.attributes["minValue"].value;
    var maxValue = control.attributes["maxValue"].value;
    var value = String(value);

    if (value.length >= minValue && value.length <= maxValue) {
        return true;
    }
    return false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T13:30:07.153

您可以使用比较验证器，这是我如何检查数据类型的示例：

```
 <asp:TextBox ID="TextBoxServiceDate" CssClass="OneColumnText" runat="server" Text='<%# Bind("ServiceDate","{0:d}")  %>'
                ValidationGroup="update"></asp:TextBox>*
            <asp:RequiredFieldValidator ID="RequiredFieldValidator4" runat="server" ControlToValidate="TextBoxServiceDate"
                Display="None" ErrorMessage="<% $resources:AppResource,ServiceDateRequired %>"
                ValidationGroup="update"></asp:RequiredFieldValidator>
            <asp:CompareValidator ID="CompareValidatorQuantity" runat="server" ControlToValidate="TextBoxServiceDate" ValidationGroup="update" Display="None"
                Type="Date" Operator="DataTypeCheck" ErrorMessage='<% $Resources:AppResource,NotValidDateTime %>' />
            <br /> 
```

在此示例中，有两个验证器。第一个仅用于检查必填字段，第二个用于检查数据类型，在本例中为日期。当然，如果需要，您也可以检查数字，您还可以使用自定义验证器来满足更复杂的需求。这看起来像这样：

```
 <asp:CustomValidator ID="CustomValidatorDate1" runat="server" ControlToValidate="DateFromTextBox"
        ErrorMessage='<% $resources:AppResource,NotValidDateTime %>' Display="Dynamic"
        onservervalidate="CustomValidatorDate1_ServerValidate"></asp:CustomValidator> 
```

和处理程序...

```
 protected void CustomValidatorDate1_ServerValidate(object source, ServerValidateEventArgs args)
    {
        if (!string.IsNullOrEmpty(args.Value))
        {
            DateTime d = new DateTime();
            if (!DateTime.TryParse(args.Value, out d))
            {
                args.IsValid = false;
            }
            else
            {
                args.IsValid = true;
            }
        }
        else
        {
            args.IsValid = true;
        }
    } 
```

要显示验证消息，您可以使用动态模式或只是验证摘要，如下所示：

```
<asp:ValidationSummary ID="ValidationSummary1" runat="server" ValidationGroup="Insert" /> 
```

# function - 为什么要在函数开头保存旧的基指针？

> ID：12988814
> 
> 赞同：2
> 
> 时间：2012-10-20T13:16:00.597
> 
> 标签：function, assembly, stack

在函数开头将旧的基指针保存在堆栈上的意义何在？我是在汇编中使用函数的新手，但到目前为止我还没有看到这样做的意义。它只是被压入堆栈然后在最后弹出，它什么都不做。例如，以下代码无需这样做就可以正常工作：

```
.section .data
.section .text
.globl _start

.type add, @function
add:
    mov %rsp, %rbp
    mov 8(%rbp), %rax
    mov 16(%rbp), %rdi
    add %rax, %rdi

    mov %rbp, %rsp
    ret

_start:
    push $45
    push $36
    call add
    add  $16, %rsp

    mov $60, %rax
    syscall 
```

我知道您可以通过在此示例中使用堆栈指针来进一步简化此操作，但我可以看出这是一种不好的做法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T13:26:06.520

每个`xBP`用于定位其参数或局部变量的函数都需要在一开始就设置`xBP`为`xSP`。

通过这样做，它`xBP`从调用函数中破坏了先前的值，因此，自然地，它应该通过例如使用`push`and来保存和恢复它`pop`。

如果`xBP`根本不使用，则不需要保存和恢复。

许多编译器都有一个`xSP`用于定位函数参数和局部变量的选项。如果启用了该选项，则`xBP`可能不需要保留（除非调用约定需要保留）。

# javascript - 奇怪的 HTML 行换行

> ID：12988817
> 
> 赞同：0
> 
> 时间：2012-10-20T13:16:52.220
> 
> 标签：javascript, css

我正在构建一个动态创建的画廊，其中 ajax/php 获取一些图像，然后将这些图像加载到动态创建的表中。我为这个表设置了宽度，我只希望在 x 方向上溢出。问题是表格行 (tr) 似乎会自动换行。我尝试过使用 css overflow-x 属性，尝试过操作表格宽度（在 div 内），并且尝试过使用 css 关闭换行。这些都没有帮助，表格垂直滚动而不是水平滚动。任何帮助将非常感激。谢谢。

这是表结构：

```
 <table><tr><td><img style="width:100px;"/></td>...(many more columns)...</tr></table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T13:33:14.457

我建议使用`<div>`s.

尝试这样的事情：

**HTML：**

```
<div id="gallery-wrapper">
    <div><img src="..." /></div>
    ...
    <div><img src="..." /></div>
</div> 
```

**CSS：**

```
div#gallery-wrapper{
    width:100%;
    height:100px;
    overflow-x:auto;
    overflow-y:hidden;
    white-space:nowrap;
}
div#gallery-wrapper > div{
   display:inline-block;
   width:100px;
   height:100px;
} 
```

PS实际上还有很多其他方法可以做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T13:27:48.190

这是在错误上下文中使用表的示例以及不推荐使用的原因。如果您绝对必须使用表格布局，则将图像放在 td 内的 div 中并设置 div 溢出。

```
 <table><tr><td><div class="imageDiv"><img style="width:100px;"/></div></td>...(many more columns)...</tr></table>

.imageDiv{overflow-x:scroll;} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T13:43:10.763

我建议您使用 jquery 插件的 jscrollpane。

[http://jscrollpane.kelvinluck.com/](http://jscrollpane.kelvinluck.com/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T13:32:56.620

不是为表格设置宽度和溢出，而是为表格周围的一个div设置宽度和溢出，以便表格可以在这个div内滚动：

```
<div style="width:1000px; overflow-x:scroll;"><table>...</table></div> 
```

# unix - 仅从 Unix 目录中复制文件，而不是文件夹结构

> ID：12988823
> 
> 赞同：3
> 
> 时间：2012-10-20T13:17:28.813
> 
> 标签：unix, cp

[我在这里](http://www.petri.co.il/forums/showthread.php?t=24778)谷歌搜索后找到了这个解决方案，但我很震惊：太复杂的解决方案。我很确定一些 cp -versions 有这个标志，或者只是简单`find`的。那么如何在 Unix 中复制文件而不是目录结构呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T13:33:51.993

`find path-to-source-file-tree -type f -exec cp {} path-to-target-dir \;`

那应该可以解决您的所有问题。

进一步自定义可以参考：`man find`比如根据日期时间、文件类型、文件所有者等，可以自定义上面的语句。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-20T13:17:28.813

我会使用`find`，在我的 GNU Coreutils 8.5 中找不到`cp`关于不保留目录结构的标志。无论如何，单线：

```
find . -type f -exec cp '{}' ~/Backup/ \; 
```

# backbone.js - 无法通过 Backbone.js + RequireJS 中的路由器访问视图

> ID：12988827
> 
> 赞同：2
> 
> 时间：2012-10-20T13:17:51.033
> 
> 标签：backbone.js, requirejs

我一直在尝试在backbone.js上练习，我在网上找到了一个我试图遵循的教程（http://backbonetutorials.com/what-is-a-router/）但不幸的是我无法达到我的观点通过路由器。

下面是我的代码

main.js

```
requirejs.config({
    // create local alias for package
    paths: {
        l           :   'my/vehicle',
        underscore  :   'vendors/underscore',
        jqueryui    :   'vendors/jquery-ui/js/jquery-ui-1.9.0.custom.min',
        backbone    :   'vendors/backbone',
        bootstrap   :   'vendors/bootstrap'

    },
    shim: {
        backbone: {
            deps: ["underscore", "jquery"],
            exports: "Backbone"
        },

        underscore: {
            exports: "_"
        }
    }

})

require(['../../config'], function(core){

    require(["l/app"], function(App) {

        'use strict';
        App.initialize();

    });

}); 
```

应用程序.js

```
define(["jquery", "backbone", "l/router"], function($, Backbone, Router) {

    var initialize = function(){
        // Pass in our Router module and call it's initialize function

        Router.initialize();

    }

    return {
        initialize: initialize
    };
}); 
```

路由器.js

```
define([
    'jquery',
    'underscore',
    'backbone',
    'l/views/BrowseVehicle'
], function($, _, Backbone, BrowseVehicleView){

    var AppRouter = Backbone.Router.extend({
        routes: {
            // Define some URL routes
            '/browse' : 'showVehicleBrowse',

            // Default
            '*actions'  : 'defaultAction'
        }
    });

    var initialize = function(){
        var app_router = new AppRouter;
        app_router.on('showVehicleBrowse', function(){
            // Call render on the module we loaded in via the dependency array
            console.log('am here');
            var BrowseVehicleView = new BrowseVehicleView();
            BrowseVehicleView.render();
        });

        app_router.on('defaultAction', function(actions){
            // We have no matching route, lets just log what the URL was

            console.log('No route:', actions);
        });

        Backbone.history.start();
    };
    return {
        initialize: initialize
    };
}); 
```

意见/BrowseVehicle.js

```
define([
    'jquery',
    'underscore',
    'backbone'
], function($, _, Backbone){
    var BrowseVehicleView = Backbone.View.extend({
        el: $('#vehicle-browse-form'),
        render: function(){
            // Using Underscore we can compile our template with data
            console.log('I reached vehicle browse form');
        }
    });
    // Our module now returns our view
    return BrowseVehicleView;
}); 
```

加载代码没有错误，console.log 没有在视图中打印任何内容，也没有在路由函数内的路由器中打印任何内容。我尝试使用 URL/#/browse 访问我的 url，但没有得到 console.log 语句。

有人可以请教吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T13:20:38.087

在 routes {} 定义中删除浏览前面的正斜杠。

# python - 有没有办法通过知道当前项目的值来获取列表中的下一个项目？

> ID：12988834
> 
> 赞同：2
> 
> 时间：2012-10-20T13:19:19.257
> 
> 标签：python, list, key

```
my_list = ['apple', 'pear', 'orange', 'raspberry']

# I know that I'm always looking for pear.
print 'pear' in my_list # prints True

# I want to be able to get a key by its value.
pear_key = my_list['pear'].key # should be 1

# Print the next item in the list.
print my_list[pear_key + 1] # should print orange 
```

我知道这`pear`将永远是我列表中的一个项目（虽然不是位置），我正在寻找一种方法来获取该列表中下一个项目的值，或者通过知道它的值来获取当前键并推进一个（就像我在上面的例子中所做的那样）或使用类似`my_list.next`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T13:21:24.653

```
try:
    pos = my_list.index('pear')
    print my_list[pos + 1]
    # orange
except IndexError as e:
    pass # original value didn't exist or was end of list, so what's +1 mean? 
```

你当然可以预先缓存它，通过使用（认为它可能是 itertools 对配方）

```
from itertools import tee
fst, snd = tee(iter(my_list))
next(snd, None)
d = dict(zip(fst, snd)) 
```

但是你会失去它是否在原始列表中，或者只是没有逻辑下一个值的事实。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T13:21:06.897

用这个：

```
>>> my_list[my_list.index('pear') + 1]
'orange' 
```

请注意，如果这是列表中的最后一个值，则会出现异常`IndexError`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-20T13:25:55.727

虽然给出了最简单的解决方案，但如果您想在通用迭代器而不是列表上执行此操作，最简单的答案是使用[`itertools.dropwhile()`](http://docs.python.org/py3k/library/itertools.html#itertools.dropwhile)：

```
import itertools

def next_after(iterable, value):
    i = itertools.dropwhile(lambda x: x != value, iterable)
    next(i)
    return next(i) 
```

可以这样使用：

```
>>> next_after(iter(my_list), "pear")
'orange' 
```

请注意，如果您正在处理列表，这是一个较慢且可读性较差的解决方案。这只是另一种情况的说明。

您还可以生成具有更多描述性错误的版本：

```
def next_after(iterable, value):
    i = itertools.dropwhile(lambda x: x != value, iterable)
    try:
        next(i)
    except StopIteration:
        raise ValueError("{} is not in iterable".format(repr(value)))
    try:
        return next(i)
    except StopIteration:
        raise ValueError("{} is the last value in iterable".format(repr(value))) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-20T13:21:33.233

您可以使用`index`over list 来查找特定值：-

```
try:
    print my_list[my_list.index('pear') + 1]
except (IndexError, ValueError), e:
    print e 
```

# c# - MVC4 如何使用捆绑虚拟路径？

> ID：12988835
> 
> 赞同：8
> 
> 时间：2012-10-20T13:19:24.310
> 
> 标签：c#, asp.net-mvc-4, bundling-and-minification

在 Microsoft MVC4 中，我看到了一些称为缩小和缓存静态资源的东西，`bundling`例如. 在该方法中，我看到了调用的第一个参数，它应该只是相对的。`CSS``JavaScript``ScriptBundle``virtual path`

```
bundles.Add(new ScriptBundle("~/bundles/jquery").Include("~/Scripts/jquery-1.*")); 
```

例如，`~/bundles/jquery`在上面的代码中。

我有一个问题，`bundling`这个怎么用`virtual path`？这是否用于文件缓存之类的东西？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-02-08T10:51:36.343

“新的 ScriptBundle 对象被赋予了一个虚拟路径，它可以是任何你喜欢的东西。它有效地充当了一个可以识别包的名称。它不必匹配网站文件夹结构中的现有路径。”

取自[http://www.mikesdotnetting.com/article/197/optimising-asp-net-web-pages-sites-bundling-and-minification](http://www.mikesdotnetting.com/article/197/optimising-asp-net-web-pages-sites-bundling-and-minification)

@Richard，以防您仍在寻找答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T14:12:07.287

[Javascript 和 CSS 缩小/捆绑](http://blogs.msdn.com/b/cdnwebdevs/archive/2012/01/20/javascript-and-css-minifying-bundling-with-the-microsoft-web-optimization-nuget-package.aspx)

> 现在，JS/CSS 缩小的工作方式是动态检查所有文件，读取它们，缩小它们，然后缓存结果以供以后提供。这允许我们修改我们的文件并重新缩小所有文件。当我们的 JS/CSS 文件之一再次被修改时，此过程将重新启动，直到缓存过期或文件更改。

另请查看这篇文章[ScriptBundle 和 StyleBundle 名称，](http://forums.asp.net/post/5038229.aspx)以及这篇文章中的包含和链接以获取更多详细信息。

# php - CakePHP 1.3 后备翻译

> ID：12988838
> 
> 赞同：2
> 
> 时间：2012-10-20T13:20:14.073
> 
> 标签：php, cakephp, internationalization, translation

在CakePHP 1.3 上使用Translate Bahavior 并且表中没有记录`i18n`，无论主表中是否有未翻译的记录，都不会显示任何内容。

我发现有人修补了翻译行为以从主表中获取数据，如果没有记录`i18n`但[第一个](http://www.sanisoft.com/blog/2010/01/25/cakephp-how-to-fallback-to-default-language-while-using-translate-behavior/)不适用于 CakePHP 1.3 并且找不到第二个站点离线：

`http://codaset.com/robwilkerson/scratchpad/source/master/blob/cakephp/behaviors/translatable.php`

如果找不到记录，如何从主表中获取记录作为后备`i18n`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T15:10:30.390

你到底是如何申请 i18n 的？如果您只使用`__()`包装器，如果找不到翻译，它应该返回里面的任何内容。就像[书中](https://book.cakephp.org/1.3/en/The-Manual/Common-Tasks-With-CakePHP/Internationalization-Localization.html#internationalizing-your-application)说的：

> **如果翻译可用**， __() 函数将翻译传递的字符串，或者不加修改地返回它。

因此，如果您将这些字符串放在您的视图中：

```
<?php __('My untranslated string.'); ?> 
```

它应该工作得很好，它总是这样对我有用。

# javascript - jquery删除选定的下拉项

> ID：12988840
> 
> 赞同：1
> 
> 时间：2012-10-20T13:20:25.447
> 
> 标签：javascript, jquery, html

一旦我从下拉列表中选择一个项目，该项目将被放置在里面

*   标记如下

    ![下拉项](../Images/cf8a504d488110c8e8e918566254be00.png)

    html和javascript的代码如下

    ```
    <select class="dropDownList" id="PersonFunction">
        <option value="">Choose</option>
        <option value="1">Vice President</option>
        <option value="2">Director</option>
        <option value="3">Secretary</option>
        <option value="4">Clerk</option>
    </select>
    <div class="options">
        <ul>
        </uL>
    </div>

    <script type="text/javascript">
    $("#PersonFunction").change(function() {

        var val = $("option:selected", $(this)).text();
    var opt1 = '<li id="'+ $(this).val()+'">'+val+ '<a href="#" class="launch" onclick="removeItem(event)"> remove</a></li>';

        $('.options ul').append(opt1);
    });
    function removeItem(event){
        disabledEventPreventDefault(event);

    }
    </script> 
    ```

    现在我需要在单击删除链接时删除项目，这将触发 removeItem 功能，我该如何执行此操作。尝试了很多方法但没有奏效。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T13:24:05.750

```
$(".options").on('click', 'a', function (e) {
   $(this).closest('li').remove();
   e.preventDefault();
}); 
```

另一件小事：你可以使用`$("option:selected", this)`. `this`不需要在选择器中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T13:26:57.953

你可以这样做，

**[现场演示](http://jsfiddle.net/rajaadil/XgFCr/2/)**

```
$("#PersonFunction").change(function() {
debugger
    var val = $("option:selected", $(this)).text();
var opt1 = '<li id="'+ $(this).val()+'">'+val+ '<a href="#" class="launch" onclick="removeItem(event)"> remove</a></li>';

    $('.options ul').append(opt1);
});

$(document).on("click", ".launch", function(event){      
    $(this).closest('li').remove();
});​ 
```

# java - Thumb on Scale 小部件无响应

> ID：12988844
> 
> 赞同：1
> 
> 时间：2012-10-20T13:21:05.123
> 
> 标签：java, macos, widget, swt

在 Mac 上使用 SWT。我创建了一个统一的工具栏。在此工具栏上有一个 Scale 小部件和一个 Label 小部件。标签显示刻度的当前值，由刻度上的 SelectionListener 更新

![这是运行的简单测试代码（包括在下面）](../Images/84c447dde461ea03dac8cd04de73b4a4.png)

在程序启动时，比例小部件的拇指不会移动。标签显示值的变化完全符合预期，Scale 小部件正确跟踪光标移动，并报告更改的值。拇指不动。

关闭统一工具栏并重新打开它（使用右上角的小按钮）使拇指完全可操作。拇指跟踪光标。

简单、可编译、可运行的测试代码复制问题在这里：

```
import org.eclipse.swt.SWT;
import org.eclipse.swt.events.SelectionAdapter;
import org.eclipse.swt.events.SelectionEvent;
import org.eclipse.swt.layout.FormLayout;
import org.eclipse.swt.widgets.*;

public class scaleTest
    {
        private static Shell shell;
        private static Display display;
        private ToolBar UnifiedToolBar;
        private Scale scale;

        private scaleTest()
            {
                UnifiedToolBar = shell.getToolBar();

            ToolItem containScale = new ToolItem( UnifiedToolBar, SWT.SEPARATOR );
            containScale.setWidth( 200 );

            scale = new Scale( UnifiedToolBar, SWT.HORIZONTAL );
            scale.setMaximum( 72 );
            scale.setSelection( 2 );
            scale.setMinimum( 6 );
            scale.setIncrement( 4 );
            scale.setPageIncrement( 4 );
            scale.setSize( 180, 24 );
            containScale.setControl( scale );

            ToolItem containLabel = new ToolItem( UnifiedToolBar, SWT.SEPARATOR );
            containLabel.setWidth( 20 );
            final Label label = new Label( UnifiedToolBar, SWT.NONE );
            label.setText( "32" );
            containLabel.setControl( label );

            scale.addSelectionListener( new SelectionAdapter()
            {
                @Override
                public void widgetSelected( SelectionEvent selectionEvent )
                    {
                        label.setText( String.valueOf( scale.getSelection() ) );

                    }
            } ); // end addSelectionListener

        } // end of constructor

    public static void main( String[] args )
        {

            display = Display.getDefault();
            shell = new Shell( display );

            shell.setText( "scaleTest App" );
            shell.setSize( 400, 200 );
            shell.setLocation( (display.getClientArea().width / 2) - 200
                                                    ,(display.getClientArea().height / 2) - 100 );
            shell.setLayout( new FormLayout() );

            scaleTest testExample = new scaleTest();

            shell.open();
            while( !shell.isDisposed() )
                {
                    if( !display.readAndDispatch() )
                        display.sleep();
                }
            display.dispose();
        }
} // end scaleTest class 
```

我已经在外壳、工具栏和 Scale 小部件上尝试了 layout()、layout(true, true)、redraw()、paint()、pack() 和 Scale 小部件，这些组合看起来合理。一个正常人会认为这是一个不合理的大量组合。

问题一：如何让拇指开机正常工作？

后续问题，重要性要小得多：

问题 2：Scale 小部件似乎忽略了 pageIncrement 和 increment 设置。为什么？

任何帮助将不胜感激。

更新：深夜玩耍。将 Scale 小部件移动到外壳 - 上面包含的测试代码没有其他更改，小部件按需要工作 - thumb 立即工作。乍一看，它会看到 Scale 和统一的工具栏彼此不太喜欢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T15:00:57.737

**问题 2**：

`Listener`您可以通过添加to来实现对步值的“捕捉” `SWT.Selection`。在下面的代码中，它将捕捉到 的所有倍数`5`：

```
scale.addListener(SWT.Selection, new Listener() {
    public void handleEvent(Event event) {
        // get the current selection and "round" it to the next 5er step
        int scaleValue = scale.getSelection();
        scaleValue = (int)(Math.round(scaleValue / 5.0) * 5);

        // update the label
        label.setText("" + (scaleValue));
        label.pack();

        // update the scale selection
        scale.setSelection(scaleValue);
    }
}); 
```

我真的不能帮助你解决问题1......

# windows-runtime - 是否有任何方法可以在不使用 winrt 中的文件选择器的情况下询问用户访问文件的权限

> ID：12988846
> 
> 赞同：1
> 
> 时间：2012-10-20T13:21:07.633
> 
> 标签：windows-runtime

我正在开发一个维护音频笔记的应用程序，每个笔记由 2 个文件组成，xml 文件和 mp3 文件。因此，当用户尝试通过文件选择器打开文件时，他只选择 xml 文件，而 mp3 文件需要通过代码访问。我怎么解决这个问题？我需要一种要求用户允许访问另一个文件（mp3）的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T21:00:30.510

事实上，我很确定如果文件不在本地文件夹中，如果用户先在文件选择器中选择它，您将无法打开它。

例如，您应该考虑将您的 xml 和 mp3 文件打包到一个 zip 文件中，并使用其中的类`System.IO.Compression`来检索它们。

此外，对于您的用户来说，使用它比确保两个文件都在同一个文件夹中更容易。

# java - 在 vaadin 项目中集成小程序时出现 ClassFormatException

> ID：12988854
> 
> 赞同：1
> 
> 时间：2012-10-20T13:22:02.910
> 
> 标签：java, applet, vaadin

好吧，我正在使用 vaadin AppletIntegration Addon 将我的录音机小程序与我的 vaadin 项目集成。这是代码：

```
 AppletIntegration applet = new AppletIntegration() {

    private static final long serialVersionUID = 1L;

    @Override
    public void attach() {
      System.out.println("In attach functions");

      setAppletArchives(Arrays.asList(new String[] { "SoundRecordingJar.jar" }));
      setCodebase(path);
      setAppletClass("AudioApplet.class");

      setWidth("800px");
      setHeight("500px");
    }
  };
  mainWindow.addComponent(applet); 
```

当我在浏览器中运行它时：它给了我以下异常：

```
 java.lang.ClassFormatError: Incompatible magic value 1008813135 in class file AudioApplet
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClassCond(Unknown Source)
at java.lang.ClassLoader.defineClass(Unknown Source)
at java.security.SecureClassLoader.defineClass(Unknown Source)
at sun.plugin2.applet.Applet2ClassLoader.findClass(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader.loadClass0(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader.loadCode(Unknown Source)
at sun.plugin2.applet.Plugin2Manager.initAppletAdapter(Unknown Source)
at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Unknown Source)
at java.lang.Thread.run(Unknown Source) 
```

如果我使用 html 文件运行相同的小程序，它可以正常工作，无一例外。小程序也已签名。

那么，这个错误是什么意思以及如何解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T13:59:27.940

你的魔法值是 1008813135

```
int magic = 1008813135   ;
ByteBuffer b = ByteBuffer.allocate(4);
b.putInt(magic);
System.out.println(new String(b.array())); 
```

输出：`<!DO`

类文件似乎已损坏。“神奇值”是文件中的前 4 个字节，它们应始终为 0xCA 0xFE 0xBA 0xBE。相反，它们是 0x3C 0x21 0x44 0x4F（1008813135 转换为十六进制）。它们对应于 ASCII 序列

尝试清除您的 java 缓存或尝试使用其他 PC 进行调试。

可能是他们的免费服务不允许小程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T17:20:21.193

花了一些时间试图通过一个简单的小程序来显示浏览器正在使用的 java 版本。只是一个基本的 Vaadin servlet，只有主页上的 AppletIntegration 实例，没有其他实际的东西。

首先是类未找到问题，修复后我留下了可怕的“类文件中不兼容的魔法值 1008813135 ...”消息，我似乎无法解决。最后我想通了，我想我会在这里发帖，以防有人来看......

所以这个 100881315 的魔法值其实是

AppletIntegration 页面上，甚至在论坛中都不清楚的是，jar 应该放在你的 war 文件中的确切位置......

现在，任何做过applet 编码的人都知道CODEBASE 是您应该指出jar 所在位置的地方。但是在普通的 Vaadin servlet 中，您还必须了解 web.xml 块中 servlet 的 url 模式是什么。

因此，通常您将在 web.xml 文件中为基于 Vaadin 的 servlet 定义如下的 servlet 映射：

```
 <servlet-mapping>
    <servlet-name>AppletTest</servlet-name>
    <url-pattern>/*</url-pattern>
  </servlet-mapping> 
```

所以基本上你通过 Vaadin 控制器路由任何传入的请求，即“/myclasses.jar”，Vaadin 会阻塞它而不返回你的 jar 文件。那是我第一次尝试导致 100881315 错误...

我什至尝试创建一个小程序文件夹并将我的 CODEBASE 设置为“applet/”，但同样的错误是因为 url 模式通过阻塞的 Vaadin 控制器路由请求。

所以关键是如何通过 Vaadin 控制器将 jar 作为资源返回......如果你还没有猜到，它是通过将你的 jar 放入 VAADIN 文件夹来完成的（我通过阅读论坛线程得到了一个提示） .

所以我创建了一个 VAADIN/applet 文件夹，将我的 jar 放在那里，并将我的 CODEBASE 设置为“VAADIN/applet/”，瞧，一切正常......

拜托，萨米，我请求你把这个小真相添加到 Applet 集成页面的某个地方，至少这样其他人可能不必像我那样花时间跟踪这个......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T14:03:27.440

实际上，您的魔术代码看起来更像是 HTML 文件的开头。`<!DOCTYPE...`. 也许您应该检查下载是否出错（使用 Firebug、Wireshark 或类似的东西。）这可能是 404 错误消息。

# android - 识别调用位置服务的应用程序 - Android 位置框架

> ID：12988859
> 
> 赞同：2
> 
> 时间：2012-10-20T13:22:47.833
> 
> 标签：android, geolocation, android-source, android-location

在 android 平台的某个时刻，我希望识别请求位置更新的应用程序，尽管我意识到这违反了“无上下文”平台的编程逻辑。

我浏览了 android 位置框架，但找不到将 LocationListener 标记回应用程序的方法。

是否可以识别哪个类或包实例化了特定对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T21:25:48.253

您可以执行以下操作：

1.  转到 LocationMangerService.java 中`frameworks/base/services/java/com/android/server/LocationManagerService.java`
2.  将函数放在适当的位置（例如，放入`requestLocationUpdates`方法和其他方法中）`Binder.getCallingUid()`

因此，之后您将知道调用应用程序的 uid。我希望这能帮到您！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T00:25:10.843

对于我的问题，我找到了一个平庸的拼凑式答案。碰巧 LocationListener 的 toString() 方法有一个 Override，它返回实例化 LocationListener 对象的应用程序的包名称。通过使用它，我目前正在区分应用程序。

但是，我相信这个问题必须有一个更优雅的解决方案

# c# - c#如何根据文件中的正则表达式模式进行替换

> ID：12988861
> 
> 赞同：1
> 
> 时间：2012-10-20T13:23:00.970
> 
> 标签：c#, regex, split, text-files

我有一个文本文件，其中每行包含两个“单词”，如下所示：

```
"(a+p(a|u)*h(a|u|i)*m)" "apehem"
"(a+p(a|u)*h(a|u|i)*a)" "correct"
"(a+p(a|u)*h(a|u|i)*e)" "correct" 
```

第一个“word”是一个正则表达式模式，第二个“word”是一个真实的词。两者都是双引号。

我想`richTextBox3`从上述文件中搜索每行的第一个“单词”的匹配项，并将每个匹配项替换为第二个“单词”。

我试过这个（见下文），但有一些错误......

```
System.IO.StreamReader file = new System.IO.StreamReader(@"d:\test.txt"); 

string Word1="";
string Word2="";

lineWord1 = file.ReadToEnd().Split(" ");  //Error 
string replacedWord = Regex.Replace(richTextBox3.Text, Word1, Word2, 
  RegexOptions.IgnoreCase);

richTextBox3.Text = replacedWord; 
```

请指教。先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T14:38:08.017

### 确保您的文件使用 unicode 编码保存。

该解决方案应该适合您>>

```
System.IO.StreamReader file = new System.IO.StreamReader(@"d:\test.txt");      
while (file.EndOfStream != true)      
{
  string s = file.ReadLine();
  Match m = Regex.Match(s, "\"([^\"]+)\"\\s+\"([^\"]+)\"", RegexOptions.IgnoreCase);
  if (m.Success) {
    richTextBox3.Text = Regex.Replace(richTextBox3.Text, 
      "\\b" + m.Groups[1].Value + "\\b", m.Groups[2].Value);
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T14:37:52.177

尝试一次处理一行文件。

```
System.IO.StreamReader file = new System.IO.StreamReader(@"d:\test.txt");

while (file.EndOfStream != true)
{
    //This will give you the two words from the line in an array
    //note that this counts on your file being perfect. You should probably check to make sure that the line you read in actually produced two words.
    string[] words = file.ReadLine().Split(' ');
    string replacedWord = Regex.Replace(richTextBox3.Text, words[0], words[1], RegexOptions.IgnoreCase);
    richTextBox3.Text = replacedWord;
} 
```

既然你在之前的评论中提到这将是一个拼写检查器，我可以指出这个链接给你吗？[https://stackoverflow.com/a/4912071/934912](https://stackoverflow.com/a/4912071/934912)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-20T13:31:59.493

我不知道你对richTextBox3 的引用是什么，但试试这个（未经测试，只是为了给你我尝试解决的方法）：

```
var lines = System.IO.File.ReadAllLines(@"d:\test.txt");

foreach (var line in lines)
{
    var words = line.Split(' ');
    if (words.Length > 1)
        words[0] = words[1];
}

richTextBox3.Text = string.Join(Environment.NewLine, lines); 
```

请注意将所有文件加载到内存中，因此如果文件很大，请不要这样做。

# javascript - 解析复杂的 HTML 表格

> ID：12988863
> 
> 赞同：9
> 
> 时间：2012-10-20T13:23:20.317
> 
> 标签：javascript, php, html, web-scraping, html-table

我正在尝试解析我的大学提供的课程表，以便将信息导入某种日历。可以在此处查看时间表示例：
[http ://www.asw-berufsakademie.de/fileadmin/download/download/Sked%20Stundenplan/WIA13-7.%20Block.html](http://www.asw-berufsakademie.de/fileadmin/download/download/Sked%20Stundenplan/WIA13-7.%20Block.html)

在我看来，自动生成的 HTML 内容是一团糟，很难掌握。例如，表格主要是用rowspans 和colspans 构建的（代码中单元格的位置与其在浏览器中的实际视觉位置相比似乎部分是任意的）。

我已经尝试过的：

1.  要求大学行政办公室单独提供一个更简单、更易于阅读的文件。当然这是不可能的，毕竟这意味着一分钟的额外努力。
2.  研究用于生成 HTML 的原始工具。它被称为“sked Stundenplan 软件”。我找不到任何提示或工具来“逆转”生成过程。
3.  在寻找现有解决方案时，我发现了一些不适用于我的日程安排的工具（例如[http://code.google.com/p/skd-schedule-parser/ ）。](http://code.google.com/p/skd-schedule-parser/)在研究了这些工具的代码后，我得出结论，它们一定是为其他/过时版本的 sked 设计的。
4.  使用 PHP 解析 HTML（主要使用 DOMDocument）。这有时有效，但太不可靠了……要考虑的例外情况似乎是不确定的。

现在，我认为传统的 HTML 解析不会让我走得太远，至少在可接受的开发时间内不会。我正在寻找的是从复杂的 HTML 表中获取信息的其他方法，例如 YQL，或者可以使用 col-/rowspans 规范化此类表的实用程序。因为我没有任何具体的想法，所以我主要是在寻求另一种方法的一些提示或提示。

是否还有其他更合适的方法来解析此类表格，或者我是否坚持使用传统的 HTML 解析？

**编辑：**

代表一个请求，我将粘贴一个原始代码示例......

本星期：
![安排周](../Images/c4557ee6209e3796367e8fff55524b2c.png)

此代码的结果：http:
[//pastebin.com/BJduUVtU](http://pastebin.com/BJduUVtU)

**编辑 2：**
由于一些解析讨论，我还将添加我的 PHP 代码。这是我第一次使用 PHP，所以它不是很复杂。它应该更深入地了解我在理论上解析表格方面走了多远。实际工作发生在函数*parseSkedTable()*中，请专注于这一点。另外，我想指出评论中出现的“双门课程”一词，它描述了同时发生的两门不同的课程（课程会在这样的时刻被分开）。这些课程的一个例子可以在第二周找到：
[http ://www.asw-berufsakademie.de/fileadmin/download/download/Sked%20Stundenplan/WIB14-4.%20Block.html](http://www.asw-berufsakademie.de/fileadmin/download/download/Sked%20Stundenplan/WIB14-4.%20Block.html)

它看起来像这样： ![双课程](../Images/1a6079f5b738f70b9295f5153d5416be.png)

那一周的相应**HTML 代码**也可以在这里访问：http:
[//pastebin.com/gLTWz5KU](http://pastebin.com/gLTWz5KU)

现在是**PHP 代码**（我很难翻译这些评论，因为我已经在努力用我的第一语言表达它们......我希望它们仍然有帮助）： http:
[//pastebin.com/Nzi8m2v8](http://pastebin.com/Nzi8m2v8)

**更新**

到目前为止，我的解析问题已经有了一些解决方案，每个都使用 JavaScript。由于 JavaScript（由于使用浏览器渲染数据的能力而在这里特别强大）似乎是从 HTML 中检索可靠信息的唯一有效方法，我现在正在寻找一种方法来实现某种无头浏览器或渲染引擎在我位于 x10hosting.com 的免费服务器上。可悲的是，我既不能安装[softaculous](http://www.softaculous.com/softaculous/apps)提供的软件，也不能使用 PHP 的*exec()*命令。
任何想法将不胜感激！

为了完整起见，我将发布两个解决方案，直到现在都存在：

1.  *Pierre Dubois 的*[jQuery 解析器](http://jsfiddle.net/3t2A8/2/)：

    (函数 ($) { $(document).ready(function() {

    ```
     var _pe = window.pe || {
            fn : {}
        };

        var tblNumber = 0; // Just a incremental number to identify the schedule item with the table

        // For each table
        $('table').each(function () {

            $('#output').append('Parsing the table number: ' + tblNumber + '<br>');
            // console.log('Parsing the table number: ' + tblNumber);
            tblNumber += 1;

            var currentTable = this;

            // Parser the complex table
            _pe.fn.parsertable.parse($(currentTable));

            // Retrieve the parsed data
            var parsedData = $(currentTable).data().tblparser;

            //
            // Information about the column structure, nice that is consistent
            //

            // Day: Cell index position (0 based)
            // Mo: 3
            // Di: 7
            // Mi: 11
            // Do: 15
            // Fr: 19
            // Sa: 23

            // Title Location at Row index position "0"

            // "i" represent the middle column position
            for (var i = 3; i < 24; i += 4) {

                var currentDay;

                // Get the day
                currentDay = $(parsedData.row[0].cell[i].elem).text();

                $('#output').append('  Day: ' + currentDay + '<br>');
                // console.log('Day: ' + currentDay);

                // Get all the events for that day, excluding the first row and the last row
                for (var j = 1; j < parsedData.col[i].cell.length - 2; j += 1) {

                    // First column 
                    if (parsedData.col[i - 1].cell[j - 1].uid !== parsedData.col[i - 1].cell[j].uid ) {

                        // Get the content of that cell and remove ending space
                        var event = $(parsedData.col[i - 1].cell[j].elem).text().trim();

                        if (event.length > 0) {
                            $('#output').append('  + Event: ' + event + '<br>');
                            // console.log('Event: ' + event);
                        }
                    }

                    // Second Column
                    if (parsedData.col[i].cell[j - 1].uid !== parsedData.col[i].cell[j].uid &&
                        parsedData.col[i - 1].cell[j].uid !== parsedData.col[i].cell[j].uid) {

                        // Get the content of that cell and remove ending space
                        var event = $(parsedData.col[i].cell[j].elem).text().trim();

                        if (event.length > 0) {
                            $('#output').append('  + Event: ' + event + '<br>');
                            // console.log('Event: ' + event);
                        }
                    }

                    // Third Column
                    if (parsedData.col[i + 1].cell[j - 1].uid !== parsedData.col[i + 1].cell[j].uid &&
                        parsedData.col[i].cell[j].uid !== parsedData.col[i + 1].cell[j].uid) {

                        // Get the content of that cell and remove ending space
                        var event = $(parsedData.col[i + 1].cell[j].elem).text().trim();

                        if (event.length > 0) {
                            $('#output').append('  + Event: ' + event + '<br>');
                            // console.log('Event: ' + event);
                        }
                    }
                } 

            }

        });

    }); 
    ```

    }(jQuery));

2.  [JS解析器使用](http://jsfiddle.net/W9Zhw/2/) *我的位置信息，实现rambo coder的想法*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T01:36:28.833

您可以在这里使用浏览器渲染/布局引擎。

使用[http://phantomjs.org/](http://phantomjs.org/)访问无头浏览器，让您在网页的 dom 上执行 javascript。

一点 jquery 将使剩余的伪代码易于实现：

```
foreach (td.t as dateElement) {
    //parse date from element text
    //use pixel position + dimensions to calc pixel coord of center
    // save this center in a list along with the date
}

foreach (td.v as calendarEntryElement) {
    //parse time + other stuff from element text
    //use pixel position to find the closest date element in that list(it must be the closest one above)
} 
```

我觉得位置信息在这里会非常可靠，因为一切都是嵌套的矩形，并且都是通过表格完成的。

您*不需要*使用 phantomjs，您可以轻松地手动执行浏览器，并让它向本地服务器发送请求以收集结果。

一些shell命令大致像

```
firefox file://foo123.html 
```

您在`<script>`其中一个网页的末尾附加了一些自定义并保存了它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-27T06:12:16.697

我在同一所大学学习，几周前我遇到了同样的问题来解析这个时间表并将其转换为 ICS 文件。最后，我找到了自己的解决方案并将代码通用化，以便其他大学的学生使用 Sked 软件并拥有更复杂的时间表，也可以导入他们的时间表。
我还创建了一个网站，学生可以在其中注册并配置他们想要订阅的时间表的 URL。在后台运行一个 cronjob，以确保订阅的日历始终是最新的。您可以在我的网站上找到该项目的结果：http:
[//calendar.pineappledeveloper.com/](http://calendar.pineappledeveloper.com/)
（仅提供德语版本）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T13:37:40.527

许多开发人员使用 HTML Agility Pack 来解析 HTML：

[http://htmlagilitypack.codeplex.com/](http://htmlagilitypack.codeplex.com/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T19:45:45.083

有趣的复杂表。布局表和数据表之间的混合。

这可能会对您有所帮助，该解决方案使用 jQuery 并使用[Web Experience Toolkit Project](https://github.com/wet-boew/wet-boew)中提供的相同复杂表解析器。使用该表解析器，您将能够检索您的日程安排数据。唯一需要做的就是解析日程项目内容以导入您的日历应用程序。

此解决方案**使用列**而不是行来检索计划项目

工作示例：http: [//jsfiddle.net/3t2A8/2/](http://jsfiddle.net/3t2A8/2/)

这里是用于提取和显示计划项目的 javascript 代码

```
(function ($) {
    $(document).ready(function() {

        var _pe = window.pe || {
            fn : {}
        };

        var tblNumber = 0; // Just a incremental number to identify the schedule item with the table

        // For each table
        $('table').each(function () {

            $('#output').append('Parsing the table number: ' + tblNumber + '<br>');
            // console.log('Parsing the table number: ' + tblNumber);
            tblNumber += 1;

            var currentTable = this;

            // Parser the complex table
            _pe.fn.parsertable.parse($(currentTable));

            // Retrieve the parsed data
            var parsedData = $(currentTable).data().tblparser;

            //
            // Information about the column structure, nice that is consistent
            //

            // Day: Cell index position (0 based)
            // Mo: 3
            // Di: 7
            // Mi: 11
            // Do: 15
            // Fr: 19
            // Sa: 23

            // Title Location at Row index position "0"

            // "i" represent the middle column position
            for (var i = 3; i < 24; i += 4) {

                var currentDay;

                // Get the day
                currentDay = $(parsedData.row[0].cell[i].elem).text();

                $('#output').append('  Day: ' + currentDay + '<br>');
                // console.log('Day: ' + currentDay);

                // Get all the events for that day, excluding the first row and the last row
                for (var j = 1; j < parsedData.col[i].cell.length - 2; j += 1) {

                    // First column 
                    if (parsedData.col[i - 1].cell[j - 1].uid !== parsedData.col[i - 1].cell[j].uid ) {

                        // Get the content of that cell and remove ending space
                        var event = $(parsedData.col[i - 1].cell[j].elem).text().trim();

                        if (event.length > 0) {
                            $('#output').append('  + Event: ' + event + '<br>');
                            // console.log('Event: ' + event);
                        }
                    }

                    // Second Column
                    if (parsedData.col[i].cell[j - 1].uid !== parsedData.col[i].cell[j].uid &&
                        parsedData.col[i - 1].cell[j].uid !== parsedData.col[i].cell[j].uid) {

                        // Get the content of that cell and remove ending space
                        var event = $(parsedData.col[i].cell[j].elem).text().trim();

                        if (event.length > 0) {
                            $('#output').append('  + Event: ' + event + '<br>');
                            // console.log('Event: ' + event);
                        }
                    }

                    // Third Column
                    if (parsedData.col[i + 1].cell[j - 1].uid !== parsedData.col[i + 1].cell[j].uid &&
                        parsedData.col[i].cell[j].uid !== parsedData.col[i + 1].cell[j].uid) {

                        // Get the content of that cell and remove ending space
                        var event = $(parsedData.col[i + 1].cell[j].elem).text().trim();

                        if (event.length > 0) {
                            $('#output').append('  + Event: ' + event + '<br>');
                            // console.log('Event: ' + event);
                        }
                    }
                } 

            }

        });

    });

}(jQuery)); 
```

它将为“双课程”表输出

```
Parsing the table number: 0
  Day: Mo, 22.10.2012
  + Event: 12:45 - 14:15 Uhr
      Vorlesung
      DATMOD Gr. 1
      HG: 13
  + Event: 12:45 - 14:15 Uhr
      Vorlesung
      PROG III Gr. 2
      HG: 15
  + Event: 14:30 - 16:00 Uhr
      Vorlesung
      DATMOD Gr. 1
      HG: 13
  + Event: 14:30 - 16:00 Uhr
      Vorlesung
      PROG III Gr. 2
      HG: 15
  + Event: 16:15 - 17:45 Uhr
      Vorlesung
      DATMOD Gr. 2
      HG: 13
  + Event: 16:15 - 17:45 Uhr
      Vorlesung
      PROG III Gr. 1
      HG: 15
  + Event: 18:00 - 19:30 Uhr
      Vorlesung
      DATMOD Gr. 2
      HG: 13
  + Event: 18:00 - 19:30 Uhr
      Vorlesung
      PROG III Gr. 1
      HG: 15
  Day: Di, 23.10.2012
  + Event: 9:00 - 10:30 Uhr
      Vorlesung
      DATMOD Gr. 2
      HG: 13
  + Event: 10:45 - 12:15 Uhr
      Vorlesung
      DATMOD Gr. 2
      HG: 13
  + Event: 12:45 - 14:15 Uhr
      Vorlesung
      DATMOD Gr. 1
      HG: 13
  + Event: 14:30 - 16:00 Uhr
      Vorlesung
      DATMOD Gr. 1
      HG: 13
  + Event: 16:15 - 17:45 Uhr
      Vorlesung
      PROG III Gr. 1
      HG: 15
  + Event: 18:00 - 19:30 Uhr
      Vorlesung
      PROG III Gr. 1
      HG: 15
  Day: Mi, 24.10.2012
  + Event: 9:00 - 10:30 Uhr
      Vorlesung
      DATMOD
      HG: 09
  + Event: 10:45 - 12:15 Uhr
      Vorlesung
      DATMOD
      HG: 09
  + Event: 12:45 - 14:15 Uhr
      Vorlesung
      IuF
      HG: 09
  + Event: 14:30 - 16:00 Uhr
      Vorlesung
      IuF
      HG: 09
  Day: Do, 25.10.2012
  + Event: 12:45 - 14:15 Uhr
      Vorlesung
      PROG III Gr. 2
      HG: 15
  + Event: 14:30 - 16:00 Uhr
      Vorlesung
      PROG III Gr. 2
      HG: 15
  + Event: 16:15 - 17:45 Uhr
      Vorlesung
      Linux Gr. 2
      HG: 15
  + Event: 18:00 - 19:30 Uhr
      Vorlesung
      Linux Gr. 2
      HG: 15
  Day: Fr, 26.10.2012
  Day: Sa, 27.10.2012
  + Event: 9:00 - 11:15 Uhr
      Klausur
      MP INT RW
      HG: 14 
```

:-)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-20T13:54:15.930

我对您的问题有些希望，因为 html 格式正确并且符合 x-html。

以下 Java 程序成功解析它，但没有提取信息。

```
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;

import org.w3c.dom.Document;

public final class AgendaParser {
   public static void main( String[] args ) throws Throwable {
      long atStart = System.currentTimeMillis();
      DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
      DocumentBuilder db = dbf.newDocumentBuilder();
      Document doc = db.parse( "WIA13-7\. Block.html" );
      System.err.println( "Elapsed time: " + ( System.currentTimeMillis() - atStart ) / 1000L + " seconds" );
      System.err.println( doc.getElementsByTagName( "table" ));
   }
} 
```

它输出：

```
Elapsed time: 118 seconds (very long, no?)
com.sun.org.apache.xerces.internal.dom.DeepNodeListImpl@7faea002 
```

我认为几个小时的工作可以为您提供 80% 的提取率。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-23T20:17:38.957

伪PHP

```
class ScheduleTableParser {
  buildTimetableFromTable() {
    //Trivial
    Parse Day Rowspans, Day Names, Dates into $this->days;
    e.g. $days[0]['rowspan'] = 4 for Monday 22/10/2012

    //Extract Lessons      
    $tr = 0;
    foreach tr {
      $td = 0;
      foreach td{
        if(td.class = 'v') {
          parseClass($td,$tr,$tdDOMObject);
        }
        $td++;
      }
    }
 }
 parseClass($td,$tr,$tdDOMObject) {
   //Trivial
   Get the Class Name Etc   

   //Calculate Time
   $time = 9:00 + 5mins*tr;
   $tr = $tr - 2;
   $i = 0;
   while($tr > 0) {
     $tr - $this->days[$i]['rowspan'];
     $day = $this->days[$i]['name'];
     $date = $this->days[$i]['date'];
     $i++;
   }
 }
} 
```

# ios - 打开/隐藏键盘时，弹出框会一遍又一遍地重复

> ID：12988865
> 
> 赞同：0
> 
> 时间：2012-10-20T13:23:26.227
> 
> 标签：ios, uitextfield, uipopovercontroller, uikeyboard

情况：

我有一个`UIViewcontroller`带有 UITextfield 的 (editViewController)。editViewController 是我的弹出内容视图控制器。弹出窗口显示以下代码：

```
 CGSize size;
 size.width = 620;
 size.height = 500;
 self.myPopover = [[UIPopoverController alloc]     
                      initWithContentViewController:self.editViewController];

 self.editPopover.popoverContentSize = size;

 [self.editPopover presentPopoverFromRect:self.view.frame 
                                        inView:self.view
                      permittedArrowDirections:0 // or any other direction
                                      animated:YES]; 
```

*   Xcode 版本 4.3.2
*   部署目标 iOS 5.0

当用户点击 UITextField 时，键盘会按应有的方式弹出。但是，当我使用键盘隐藏按钮隐藏/显示键盘并再次点击文本字段时，弹出视图会不断重复。查看弹出阴影以查看实际问题。

[http://www.tectoys.nl/popover_duplicating.jpg](http://www.tectoys.nl/popover_duplicating.jpg)

1.  第一次弹出
2.  经过大约 10 倍的隐藏和显示键盘。由于重复，阴影变得更暗。

有人知道导致此问题的原因或可以给我解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T03:26:47.343

如果您提供的代码示例在每次显示弹出框时都在执行，那么这是因为您每次都在创建一个新的 UIPopoverController 并且您创建的旧的 UIPopoverController 没有被关闭。在创建新弹出框之前尝试关闭弹出框：

```
[self dismissFormPopoverAnimated:NO];
self.myPopover = [[UIPopoverController alloc]     
                  initWithContentViewController:self.editViewController]; 
```

# video - 流媒体直播视频，从哪里开始？

> ID：12988866
> 
> 赞同：2
> 
> 时间：2012-10-20T13:23:57.107
> 
> 标签：video, streaming, video-streaming

希望有人能指出我正确的方向。我们有一些网络摄像头可以直播直播，但我们希望这个直播可以在网站上使用。显然，饲料的安全性很重要？而且一次连接的人可能超过 1 人，所以不知道是否最好使用 3rd 方？

所以我的问题是，人们会推荐什么做流媒体？第三方服务是否最好将提要传递到网站？一旦建立了流，如何最好地显示提要？闪光？HTML5？有没有推荐可以接收多个直播的玩家？

感谢任何可以为我指明正确方向的人。我只是不确定它是否像指向网络摄像头/计算机的 IP 一样简单，或者是否还有更多需要考虑的多个提要和托管带宽？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T16:50:12.493

流式架构有点复杂，但它涉及到：

*   您将捕获视频并将流传送到某个“分发服务器”
*   在分发服务器上，您将设置流广播 - 然后，您将拥有指向服务器“分发点”的流地址
*   在网页上，您将使用 Window Media Player、Silverlight 流畅流播放器等媒体播放器或 FlowPlayer 等 Flash 播放器连接到上述流进行播放

要配置访问权限，您必须查阅适当的分发服务器配置。

如果您选择 Microsoft Smooth Streaming，请开始阅读：[http ://www.iis.net/learn/media/live-smooth-streaming/getting-started-with-iis-live-smooth-streaming](http://www.iis.net/learn/media/live-smooth-streaming/getting-started-with-iis-live-smooth-streaming)

如果您想了解更多关于流的一般信息，请阅读 Shoutcast 流，它很简单，但它仅用于学习，因为它只处理音频（是的，它也有视频，但我在实践中没有看到） .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T13:29:10.657

查看它支持流媒体的[flowplayer 。](http://flash.flowplayer.org/plugins/streaming/rtmp.html)这是一个基于 Flash 的开源视频播放器

# c# - 反射方法信息

> ID：12988868
> 
> 赞同：1
> 
> 时间：2012-10-20T13:24:11.593
> 
> 标签：c#, asp.net, webforms, system.reflection

我正在尝试按名称调用方法 - 在 aspx 代码隐藏类中作为字符串传入，如下所示：

```
private void callMethod( string method ) {
    object classInstance = Activator.CreateInstance( this.GetType(), null );
    MethodInfo methodInfo = GetType().GetMethod( method );
    methodInfo.Invoke( classInstance, null );
} 
```

但是该方法在继承的类中，此代码找不到该方法。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T15:20:19.027

尝试添加`BindingFlags`到您的`GetMethod()`通话中。

例如，假设您想要的方法是公共的而不是静态的：

```
MethodInfo methodInfo = GetType().GetMethod( method, BindingFlags.Instance | BindingFlags.Public ); 
```

在这里，您将找到有关`BindingFlags`其可能值的更多信息：

[http://msdn.microsoft.com/en-us/library/system.reflection.bindingflags.aspx](http://msdn.microsoft.com/en-us/library/system.reflection.bindingflags.aspx)

这是来自文档：

> **笔记**
> 
> 您必须指定 Instance 或 Static 以及 Public 或 NonPublic，否则将不返回任何成员。

另一种方法是查询方法：

```
MethodInfo methodInfo = GetType().GetMethods().FirstOrDefault(x => x.Name == method); 
```

所有这些都是假设您找到的方法是无参数的。如果它们有参数，那么您需要将该信息添加到`GetMethod()`or`GetMethods()`方法中。这是一些文档：

[http://msdn.microsoft.com/en-us/library/system.type.getmethod.aspx](http://msdn.microsoft.com/en-us/library/system.type.getmethod.aspx)

[http://msdn.microsoft.com/en-us/library/system.type.getmethods.aspx](http://msdn.microsoft.com/en-us/library/system.type.getmethods.aspx)

最后，在这种情况下创建页面类的新实例似乎有点奇怪。也许您实际上想对页面的当前实例执行该方法，而不是一个新实例，在这种情况下，您的代码应该看起来更像：

```
private void callMethod( string method ) {
    MethodInfo methodInfo = GetType().GetMethod( method );
    methodInfo.Invoke( this, null );
} 
```

希望能帮助到你！

# scala - 伴侣上的咖喱案例类构造函数

> ID：12988873
> 
> 赞同：12
> 
> 时间：2012-10-20T13:25:22.403
> 
> 标签：scala, currying, case-class, companion-object

在定义案例类时，默认的伴随对象有很好的`curried`方法来获取案例类构造函数的柯里化版本：

```
scala> case class Foo(a: String, b: Int)
defined class Foo

scala> Foo.curried
res4: String => (Int => Foo) = <function1> 
```

但是，一旦我定义了一个明确的伴随对象，这个方法就会消失：

```
scala> :paste
// Entering paste mode (ctrl-D to finish)

case class Foo(a: String, b: Int)
object Foo {}

// Exiting paste mode, now interpreting.

defined class Foo
defined module Foo

scala> Foo.curried
<console>:9: error: value curried is not a member of object Foo
              Foo.curried 
```

我可以像这样找回它：

```
scala> :paste
// Entering paste mode (ctrl-D to finish)

case class Foo(a: String, b: Int)
object Foo { def curried = (Foo.apply _).curried }

// Exiting paste mode, now interpreting.

defined class Foo
defined module Foo

scala> Foo.curried
res5: String => (Int => Foo) = <function1> 
```

但是，我想知道为什么在定义显式伴侣时它会消失（例如，与 相比`apply`）？

（斯卡拉 2.9.2）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T18:52:26.530

Scalac 为每个`case class`. 默认伴侣实现`scala.Function`*n*。

当您定义显式伴侣时，Scalac 会将显式伴侣与默认伴侣合并。

如果你想调用`curried`，你必须让你的显式同伴实现`Function2`。尝试：

```
case class Foo(a: String, b: Int)
object Foo extends ((String, Int) => Foo) {
  def otherMethod = "foo"
} 
```

# java - javax.naming.NamingException: JBAS011843: 无法实例化 InitialContextFactory org.jboss.naming.remote.client.InitialContextFactory

> ID：12988874
> 
> 赞同：1
> 
> 时间：2012-10-20T13:25:40.160
> 
> 标签：java, jboss, jboss7.x, jboss5.x

我对 Jboss-as-7.1.1 有一些问题，我正确部署但是当我从客户端发送请求时，我遇到了一些错误。

```
javax.naming.NamingException: JBAS011843: Failed instantiate InitialContextFactory org.jboss.naming.remote.client.InitialContextFactory from classloader ModuleClassLoader for Module 
```

**我的错误日志：-**

```
18:39:50,432 INFO  [stdout] (http--127.0.0.1-8080-1) BusinessClass::sendResponse Starts...
18:39:50,434 INFO  [stdout] (http--127.0.0.1-8080-1) Enter the Try Block Edited by vivek
18:39:50,451 ERROR [stderr] (http--127.0.0.1-8080-1) javax.naming.NamingException: JBAS011843: Failed instantiate InitialContextFactory org.jboss.naming.remote.client.InitialContextFactory from classloader ModuleClassLoader for Module "deployment.responsecomponent.ear.response.war:main" from Service Module Loader
18:39:50,463 ERROR [stderr] (http--127.0.0.1-8080-1)    at org.jboss.as.naming.InitialContextFactoryBuilder.createInitialContextFactory(InitialContextFactoryBuilder.java:64)
18:39:50,477 ERROR [stderr] (http--127.0.0.1-8080-1)    at javax.naming.spi.NamingManager.getInitialContext(NamingManager.java:664)
18:39:50,482 ERROR [stderr] (http--127.0.0.1-8080-1)    at javax.naming.InitialContext.getDefaultInitCtx(InitialContext.java:288)
18:39:50,483 ERROR [stderr] (http--127.0.0.1-8080-1)    at javax.naming.InitialContext.init(InitialContext.java:223)
18:39:50,485 ERROR [stderr] (http--127.0.0.1-8080-1)    at javax.naming.InitialContext.<init>(InitialContext.java:197)
18:39:50,500 ERROR [stderr] (http--127.0.0.1-8080-1)    at org.apache.jsp.response_jsp._jspService(response_jsp.java:118)
18:39:50,501 ERROR [stderr] (http--127.0.0.1-8080-1)    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
18:39:50,503 ERROR [stderr] (http--127.0.0.1-8080-1)    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
18:39:50,504 ERROR [stderr] (http--127.0.0.1-8080-1)    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:369)
18:39:50,516 ERROR [stderr] (http--127.0.0.1-8080-1)    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:326)
18:39:50,519 ERROR [stderr] (http--127.0.0.1-8080-1)    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:253)
18:39:50,520 ERROR [stderr] (http--127.0.0.1-8080-1)    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
18:39:50,534 ERROR [stderr] (http--127.0.0.1-8080-1)    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329)
18:39:50,535 ERROR [stderr] (http--127.0.0.1-8080-1)    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248)
18:39:50,537 ERROR [stderr] (http--127.0.0.1-8080-1)    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275)
18:39:50,538 ERROR [stderr] (http--127.0.0.1-8080-1)    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161)
18:39:50,540 ERROR [stderr] (http--127.0.0.1-8080-1)    at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153)
18:39:50,554 ERROR [stderr] (http--127.0.0.1-8080-1)    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155)
18:39:50,555 ERROR [stderr] (http--127.0.0.1-8080-1)    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
18:39:50,557 ERROR [stderr] (http--127.0.0.1-8080-1)    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
18:39:50,563 ERROR [stderr] (http--127.0.0.1-8080-1)    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368)
18:39:50,584 ERROR [stderr] (http--127.0.0.1-8080-1)    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877)
18:39:50,585 ERROR [stderr] (http--127.0.0.1-8080-1)    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671)
18:39:50,587 ERROR [stderr] (http--127.0.0.1-8080-1)    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930)
18:39:50,588 ERROR [stderr] (http--127.0.0.1-8080-1)    at java.lang.Thread.run(Thread.java:662) 
```

**我的代码是：-**

```
Properties p = new Properties();
    System.out.println("BusinessClass::sendResponse Starts...");
    HashMap ack_gateway=null;
    try {

        System.out.println("Enter the Try Block Edited by vivek");
        p.setProperty("java.naming.factory.initial",
                    "org.jboss.naming.remote.client.InitialContextFactory");
        p.setProperty("java.naming.factory.url.pkgs",
                    "org.jboss.naming.remote:org.jboss.naming.remote.client.InitialContextFactory");
        p.setProperty("java.naming.provider.url", "remote://localhost:4447");
        Context ctx = new InitialContext(p);
        System.out.println("Got Initial Context");
        SPResponseEJBHome home = (SPResponseEJBHome) PortableRemoteObject.narrow(ctx.lookup          ("SPConnectorResponseComponent"),SPResponseEJBHome.class);

        System.out.println("BusinessClass::sendResponse Starts..."); 
```

**我的部署日志：-**

```
18:38:40,949 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-1) JBAS015876: Starting deployment of "response.war"
18:38:40,951 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-1) JBAS015876: Starting deployment of "AsyncResponseComponentVer2.jar"
18:38:42,317 INFO  [org.jboss.as.ejb3.deployment.processors.EjbJndiBindingsDeploymentUnitProcessor] (MSC service thread 1-1) JNDI bindings for session bean named SPConnectorResponseComponent in deployment unit subdeployment "AsyncResponseComponentVer2.jar" of deployment "responsecomponent.ear" are as follows:

    java:global/responsecomponent/AsyncResponseComponentVer2/SPConnectorResponseComponent!com.cdac.AsyncSPResponse.SPResponseEJBRemote
    java:app/AsyncResponseComponentVer2/SPConnectorResponseComponent!com.cdac.AsyncSPResponse.SPResponseEJBRemote
    java:module/SPConnectorResponseComponent!com.cdac.AsyncSPResponse.SPResponseEJBRemote
    java:jboss/exported/responsecomponent/AsyncResponseComponentVer2/SPConnectorResponseComponent!com.cdac.AsyncSPResponse.SPResponseEJBRemote
    java:global/responsecomponent/AsyncResponseComponentVer2/SPConnectorResponseComponent!com.cdac.AsyncSPResponse.SPResponseEJBHome
    java:app/AsyncResponseComponentVer2/SPConnectorResponseComponent!com.cdac.AsyncSPResponse.SPResponseEJBHome
    java:module/SPConnectorResponseComponent!com.cdac.AsyncSPResponse.SPResponseEJBHome
    java:jboss/exported/responsecomponent/AsyncResponseComponentVer2/SPConnectorResponseComponent!com.cdac.AsyncSPResponse.SPResponseEJBHome

18:38:43,173 INFO  [org.jboss.web] (MSC service thread 1-3) JBAS018210: Registering web context: /response
18:38:43,200 INFO  [org.jboss.as] (MSC service thread 1-1) JBAS015951: Admin console listening on http://127.0.0.1:9990
18:38:43,202 INFO  [org.jboss.as] (MSC service thread 1-1) JBAS015874: JBoss AS 7.1.1.Final "Brontes" started in 16296ms - Started 222 of 303 services (80 services are passive or on-demand)
18:38:43,392 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS018559: Deployed "responsecomponent.ear" 
```

任何人都知道我哪里出错了，请帮助我。谢谢 vivek

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T14:07:47.780

你有什么理由不使用jnp吗？对于 jnp，

```
java.naming.factory.initial=org.jnp.interfaces.NamingContextFactory
java.naming.provider.url=jnp://localhost:1099
java.naming.factory.url.pkgs=org.jboss.naming:org.jnp.interfaces 
```

对于远程 jndi，请参阅下面的链接可以帮助您

[http://middlewaremagic.com/jboss/?p=1466](http://middlewaremagic.com/jboss/?p=1466)

# sql-server - 将网站从 IIS6 迁移到 IIS7 后，经典 asp 数据库连接出错

> ID：12988879
> 
> 赞同：2
> 
> 时间：2012-10-20T13:26:17.847
> 
> 标签：sql-server, sql-server-2005, iis-7, asp-classic, adodb

我有一个经典的 asp 站点，它具有以下数据库连接：

```
<%
set objConnection = Server.CreateObject("ADODB.Connection")
objConnection.ConnectionString = "Driver={SQL Server};Server=123.456.789.012;Database=mydatabase;Uid=myuser;Pwd=123xyz;"
objConnection.Open
%> 
```

该站点刚刚从运行 IIS6 的 Windows 2003 服务器移动到运行 IIS7 的 Windows 2008 服务器（均使用 MSSQL 2005 Express 数据库），现在它给出了错误消息：

```
Microsoft OLE DB Provider for ODBC Drivers error '80004005'
[Microsoft][ODBC SQL Server Driver][DBNETLIB]Invalid connection.
/inc/dbconnection.asp, line 4 
```

我假设这是因为 IIS7 有不同的驱动程序？什么是更新的连接字符串才能让它工作 - 我已经用谷歌搜索了，但没有找到任何对我有用或有意义的东西（老实说，我处于我理解的边缘！）？

非常感谢大家的指点...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T14:42:02.457

您正在尝试调用 SQL Server 的 ODBC 驱动程序，该驱动程序传统上由[MDAC](http://msdn.microsoft.com/en-us/data/aa937729.aspx)提供。与其尝试在 IIS7 中解决该问题，我可能会使用[SQL Server Native Client](http://msdn.microsoft.com/en-US/library/ms130828%28v=sql.90%29.aspx)驱动程序之一，如下所示：

```
"Driver={SQL Native Client};..." 
```

或者

```
"Provider=SQLNCLI10;..." 
```

一些历史可以在[MSDN](http://msdn.microsoft.com/en-us/library/ms810810.aspx)上找到，其他连接字符串选项和信息可以在伟大的站点[connectionstrings.com](http://www.connectionstrings.com/)上找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T11:17:11.997

如果数据库与网站位于同一台服务器上，并且 MSSQL 2005 Express 数据库不是命名实例，则可以使用以下数据源：

```
<%
set objConnection = Server.CreateObject("ADODB.Connection")
objConnection.ConnectionString = "Provider=SQLOLEDB; Data Source=(local); Initial Catalog=mydatabase; User ID=myuser;"
objConnection.Open
%> 
```

如果您使用默认实例名称“sqlexpress”在本地安装了 MSSQL 2005 Express，那么您需要使用以下数据源

```
<%
set objConnection = Server.CreateObject("ADODB.Connection")
objConnection.ConnectionString = "Provider=SQLOLEDB; Data Source=.\sqlexpress; Initial Catalog=mydatabase; User ID=myuser;"
objConnection.Open
%> 
```

# cellular-automata - 如何从元胞自动机开始

> ID：12988881
> 
> 赞同：0
> 
> 时间：2012-10-20T13:26:36.830
> 
> 标签：cellular-automata

我必须开始研究细胞自动机，所以任何人都可以分享可以帮助初学者学习基础知识的链接。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T09:10:30.617

# windows - 将安装在 x64 上的 32 位应用程序迁移到 x86

> ID：12988882
> 
> 赞同：0
> 
> 时间：2012-10-20T13:26:39.250
> 
> 标签：windows, x86, migration, 64-bit

与往常相比有些倒退。我在运行 64 位 Windows 7 Ultimate 的 vm 中有一个 32 位应用程序。由于它的年龄和 32 位设备驱动程序，该程序不能像在 32 位操作系统中那样运行。为此，我设置了一个 Windows 7 x86 Pro vm。现在的问题是我想迁移这个应用程序，我宁愿不必重新安装它并重新设置它。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T13:32:04.937

在我看来，**不**（至少不是以可靠和无痛的方式）。

正如您所提到的，它是一个涉及设备驱动程序的遗留应用程序。这意味着需要一些机制来安装通常由安装完成的驱动程序。它也很可能涉及需要使用 regsvr32 注册的 DCOM 或 Vb。此外，如果您感到再次设置它的痛苦，那么这意味着该应用程序有许多相关的先决条件需要安装，并且设置分散在注册表项、.xml 和 .ini 文件中。

不幸的是，Microsoft 不支持从 x86 升级到 x64，反之亦然。

# haskell - Project Euler 58 - 我的解决方案中是否存在反模式？

> ID：12988883
> 
> 赞同：1
> 
> 时间：2012-10-20T13:26:49.460
> 
> 标签：haskell

我目前正在处理[Project Euler](http://projecteuler.net/)的第[58^个问题](http://projecteuler.net/problem=58)。

当我将限制设置为 8% 时，我的解决方案运行良好，但在那之后它超过了一分钟。

这让我感到惊讶，因为我使用一个库来生成素数，而且我自己做的事情对我来说看起来是线性的，而且很好。

虽然很明显我之前错过了很多巨大的 thunk、二次（或更糟）函数、瓶颈等，但这里肯定又是一样的。

我想要的是检查我的解决方案，以了解代码是否错误，或者我处理问题的方式是否愚蠢。在后一种情况下，我不想被宠坏。

我认为我的问题不是代码审查问题，因为基本上我的代码不能达到其目的，但我可能错了，在这种情况下，请将问题转移到适当的 SE 站点。

我为此尝试了文学编程，所以我将转储我的文件以提供进一步的解释。

## 我的 .lhs（好吧，格式化为 SO）

我们自己不处理素数，我们需要编译器的帮助。

```
{-# OPTIONS_GHC -Wall #-}

import Data.Numbers.Primes 
```

首先，我们在 diags 中构造对角线上的数字流。为此，我们注意到这些数字连续 4 次递增某个数字，然后再用这个数字 + 2 等
重复 4 [2, 4..] 将给我们一个增量列表。

然后我们只需要用 scanl (+) 聚合所有这些，我们就有了我们的列表。

```
primesDiags :: [Int]
primesDiags = go diags primes
  where
    diags = scanl (+) 1 . concatMap (replicate 4) $ [2, 4..] :: [Integer] 
```

一旦我们有了这个列表，如果数字是合数，我们将所有数字映射到 0，如果数字是素数，则映射到 1。为了有效地做到这一点，我们使用一个库来提供素数流，并通过只运行一次来​​映射这两个列表。

```
 go dss@(d:ds) pss@(p:ps) | d < p = 0:go ds pss
                             | d > p = go dss ps
                             | otherwise = 1:go ds ps 
```

然后我们告诉 ghc 我们知道为什么我们的模式匹配不完整

```
 go _ _ = undefined -- we operate on streams 
```

现在我们拥有了解决问题所需的一切。下一步是找出我们在哪个方格越过了我们试图发现的特定限制。为此，我们只需更新一个累加器以表示我们在此之前遇到的素数的数量，并且我们也会跟踪我们所在的正方形的索引。

我们从 2 开始递归，以跟踪分解后的行为。这就是为什么我们在 primesDiags 中跳过一个项目，因为这个项目是 1，我们将 acc 设置为 0（1 不是素数）。

```
nthSquare :: Int
nthSquare = go 2 (tail primesDiags) 0
  where
    go n (w:x:y:_:ds) primeN | 8 * primeN' < compositeN' = n
                             | otherwise = go (n + 1) ds primeN'
      where
        total = 4 * n - 3
        delta = sum [w, x, y]
        primeN' = primeN + delta
        compositeN' = total - primeN'
    go _ _ _ = undefined -- we operate on streams 
```

然后，一旦我们找到了正确的正方形，它的边长是通过将它的索引加倍并减去一个来获得的。

```
main :: IO ()
main = print $ nthSquare * 2 - 1 
```

如果您想使用代码，[这是一个粘贴。](http://hpaste.org/76528)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-20T14:02:30.343

并不是说其余的根本无法改进，而是您用于质数生成的库并不太快。使用你的代码，我得到了

```
$./euler58 +RTS -s -RTS
11297
  30,958,460,200 bytes allocated in the heap
   4,671,021,104 bytes copied during GC
         495,832 bytes maximum residency (2822 sample(s))
          47,664 bytes maximum slop
               3 MB total memory in use (0 MB lost due to fragmentation)

                                    Tot time (elapsed)  Avg pause  Max pause
  Gen  0     56551 colls,     0 par    5.96s    5.97s     0.0001s    0.0004s
  Gen  1      2822 colls,     0 par    1.60s    1.61s     0.0006s    0.0014s

  INIT    time    0.00s  (  0.00s elapsed)
  MUT     time   21.47s  ( 21.50s elapsed)
  GC      time    7.56s  (  7.57s elapsed)
  EXIT    time    0.00s  (  0.00s elapsed)
  Total   time   29.04s  ( 29.08s elapsed)

  %GC     time      26.1%  (26.0% elapsed)

  Alloc rate    1,441,874,868 bytes per MUT second

  Productivity  73.9% of total user, 73.8% of total elapsed 
```

将导入更改为

```
import Math.NumberTheory.Primes 
```

（来自[`arithmoi`](http://hackage.haskell.org/package/arithmoi)包装 - 免责声明，我是作者）和第一`primesDiags`行

```
primesDiags = go diags (map fromInteger primes) 
```

结果是

```
$ ./aeuler58 +RTS -s -RTS
11297
   1,986,441,440 bytes allocated in the heap
      25,254,256 bytes copied during GC
         220,328 bytes maximum residency (34 sample(s))
         158,984 bytes maximum slop
               2 MB total memory in use (0 MB lost due to fragmentation)

                                    Tot time (elapsed)  Avg pause  Max pause
  Gen  0      3761 colls,     0 par    0.06s    0.06s     0.0000s    0.0002s
  Gen  1        34 colls,     0 par    0.00s    0.00s     0.0001s    0.0001s

  INIT    time    0.00s  (  0.00s elapsed)
  MUT     time    0.96s  (  0.96s elapsed)
  GC      time    0.06s  (  0.06s elapsed)
  EXIT    time    0.00s  (  0.00s elapsed)
  Total   time    1.02s  (  1.02s elapsed)

  %GC     time       5.9%  (5.9% elapsed)

  Alloc rate    2,064,058,991 bytes per MUT second

  Productivity  94.1% of total user, 94.1% of total elapsed 
```

这表明您的代码部分是不错的。您可以通过使用在其中一个尖峰上有正方形的事实来改进它，因此根本不需要考虑这一点。

另一点是，您可以检查对角线上的值（忽略正方形），而不是计算所有素数，如果您有快速素数检查，则检查其中哪些是素数。这是否更快取决于主要检查。

# mysql - 考虑用户 ID 和内部计数器的 ID 生成

> ID：12988884
> 
> 赞同：0
> 
> 时间：2012-10-20T13:26:54.267
> 
> 标签：mysql, primary-key, scalability

在我寻找为我的一些表的 MySQL 主键行生成数字 BigInt id 的最佳方法的过程中。我不想依赖内部时钟。我确实关心我网站的 URL 的外观，我不想将 GUID 放在 URL 中。

我在想的是使用 GUID 作为主键，但使用另一列来查询数据。该列将包括`User_Id (INT) + Counter (INT)`. 计数器用于特定用户，每次插入后我将该计数器增加 1。

我希望有以下 URL 结构：

```
http://website.com/21474836470099 
```

214748364700 部分是用户 ID，第二部分 '99' 是计数器。然后我可以减去该数字并创建一个查询该唯一 id（非主键）列的选择查询。我可能会在最后使用 -99，所以我不需要将整个数字写为 bigint，所以我知道如何从字符串中提取 '99' 值。

我关心可伸缩性和 URL 中的数字 ID 而不是 GUID。再说一次，我不想依赖服务器 ID 或内部时钟，只依赖数据库中的信息。此外，**我不希望 URL 依赖于 primary key**。

另一种选择是创建一个新列 BOX_COUNT ，它将保存在特定插入之前的盒子总数。

前任：

```
ID = 1
BOX_NAME = "name 1"
COUTNER = 1

ID = 5
BOX_NAME = "box 5"
COUNTER = 5 
```

我有一列 TOTAL_USER_BOXES 在每次插入特定用户的新 BOX 时递增 1。默认情况下，每个用户框计数器从 0 开始。

所以我可以通过以下方式选择该框：

```
SELECT FROM boxes 
WHERE user_id = 214748364700 AND counter = 5 
```

这样 URL 不依赖于主键。这就像使用 GUID 使行独立于各种分片一样。**另一种选择**是一起使用 user_id + 计数器作为主键，并放弃增量 BigInt AI 主键或 GUID（也许这个似乎是最好的，而且它也是可扩展的！）

**具体应用程序考虑：**我的想法是对我的表进行反规范化，所以我不需要进行连接。像 NoSQL 一样使用它，因此每个框行都将包含一列，其中项目及其属性为 JSON Like。所以当我想插入一个新项目时，我将不得不反序列化然后再序列化数据。选择 + 修改 + 插入，而不仅仅是插入。

**结果：**

网址如：`http://domain.com/93,22`或`http://domain.com/92-12`

特定 BOX 的短 URL 及其在我的网页中的项目，独立的 id，不依赖任何时钟同步，如 uuid_shrot() 或任何其他库和复杂的东西来制作唯一的 id。

希望听到一些建议，如果您有更好的 ID，我欢迎听到谢谢大家。

# mysql - joomla 2.5 中的任何 RESTful Web 服务模块

> ID：12988888
> 
> 赞同：-2
> 
> 时间：2012-10-20T13:27:33.263
> 
> 标签：mysql, joomla

我是**joomla 2.5**的新手。我正在创建一个示例网页，我在其中添加了菜单并在页面中显示了文章，但我无法在我的站点中调用**RESTful Web 服务。**

我想使用 RESTful Web 服务 API 在我的网页上以 html 格式显示 XML、JSON 数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T15:26:39.100

我认为您需要为 XML 和 JSON 输出创建自己的视图。

基本上，您将创建 2 个新视图（除了 view.html.php）。

*   视图.json.php
*   视图.xml.php

您还可以查看[K2](http://getk2.org/)（替换 com_content）或作为如何构建它的灵感 ->[他们的存储库](http://code.google.com/p/getk2/source/browse/trunk/components/com_k2/views/item/view.json.php)。

有用的是，您还可以在 Joomla! 中找到[“生成 JSON 输出”和一些关于](http://docs.joomla.org/Generating_JSON_output)[覆盖的](http://docs.joomla.org/How_to_override_the_output_from_the_Joomla!_core)基本信息！

# jquery - 滚动对齐到水平和垂直网格 - Jerky scollLeft

> ID：12988889
> 
> 赞同：1
> 
> 时间：2012-10-20T13:27:43.107
> 
> 标签：jquery, grid, scrolltop

我的目标是创建一个网格，当用户垂直或水平滚动时，它总是捕捉到浏览器的顶部和左侧边缘。我有基本版本，但与动画`scollLeft`相比，这部分总是很生涩。`scrollTop`

如果有人想到更好的解决方案，我将不胜感激，它正在慢慢让我发疯！

到目前为止，这是它的骨骼[http://jsfiddle.net/stuart09876/vXvBV/1/](http://jsfiddle.net/stuart09876/vXvBV/1/)

这是脚本...

```
$(function(){
    var windowtest = $(window);
    var _top = $(windowtest).scrollTop();
    var _left = $(windowtest).scrollLeft();
    var individualDivHeight = 140;
    var individualDivWidth = 220;

    $(windowtest).scroll(function(){
        var _cur_top = $(windowtest).scrollTop();
        var _cur_left = $(windowtest).scrollLeft();
        var totalHeight = $('#container').height();
        var totalWidth = $('#container').width();
        var posToScroll = Math.round(_cur_top / individualDivHeight) * individualDivHeight;
        var posToScrollLeft = Math.round(_cur_left / individualDivWidth) * individualDivWidth;

        $('html, body').stop().animate({scrollTop: posToScroll}, 100,
            function(){
                $('html, body').stop().animate({scrollLeft: posToScrollLeft}, 100);    
            }
        );              
    });
}); 
```

非常感谢

斯图尔特

# jquery - 使用 HTML5 和 ajax 上传文件不适用于 ajax 加载的表单

> ID：12988891
> 
> 赞同：1
> 
> 时间：2012-10-20T13:27:59.030
> 
> 标签：jquery, forms, html, file-upload

我有一个从 ajax 响应加载的表单，其中包含一些 textarea 和一个文件上传选项。我的表格看起来像这样..

```
<form name="myFm" id="myFm" enctype="multipart/form-data">
    <table>
            <tr>
                <td valign="top">
                    <label>My Label</label>
                </td>
                <td>
                    <textarea name="myText" id="myText"></textarea>
                </td>
            </tr>
            <tr>
                <td>
                    <label>File Upload</label>
                </td>
                <td>
                    <input type="file" id="files" name="myFile" value="Upload" /> 
                </td>
            </tr>
            <tr>
                <td>
                  <input type="button" name="fmSub" value="Submit" onclick="myAjaxFunction();" />
                </td>
            </tr>
    </table>
</form> 
```

表单将通过 ajax 函数提交到我的 PHP 脚本。我尝试使用下面的 jquery 脚本来验证上传文件。

```
$(':file').change(function(){
    var file = this.files[0];
    name = file.name;
    size = file.size;
    type = file.type;
    if(name.length > 0)
    alert(name);
    //your validation
 }); 
```

该脚本适用于普通的 html 表单，但不适用于我的 ajax 加载表单。任何帮助将不胜感激。谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T15:39:12.877

在加载表单之前，您在哪里设置该处理程序？在这种情况下试试这个

```
$(':file').live('change', function(){
    ...
} 
```

# c# - 如何在 Windows 中保留进程 ID

> ID：12988893
> 
> 赞同：2
> 
> 时间：2012-10-20T13:28:20.097
> 
> 标签：c#, windows, process, pid

我有一个典型的要求，即我想在启动时使用相同的进程 ID 运行我的应用程序（C#）。因此，为了这个原因，我想在 Windows 2003 Server Enterprise Edition 中保留一个进程 ID (pid)，以便内核不能被另一个进程重用。那么可以对windows注册表做哪些修改来实现这个目标呢？另外我想知道windows如何将PID分配给内核中运行的进程？

如果这不是最佳解决方案，那么在 C# 中可以做什么？

# objective-c - Objective-C 解析问题扩展标识符

> ID：12988894
> 
> 赞同：0
> 
> 时间：2012-10-20T13:28:34.417
> 
> 标签：objective-c, calculator

我正在通过 iTunes 大学（斯坦福）学习 Objective-C。我正在对 sin 按钮进行编程，但遇到了 Parse 问题：

> 此行上的预期标识符“double myDegrees = [self.operandStack];”。

CalculatorBrain.h

```
#import <Foundation/Foundation.h>

@interface CalculatorBrain : NSObject

-(void)pushOperand:(double)operand;
-(double)performOperation:(NSString *)operation;

@end 
```

计算器大脑.m

```
#import "CalculatorBrain.h"

@interface CalculatorBrain()
@property (nonatomic, strong) NSMutableArray *operandStack;
@end

@implementation CalculatorBrain

@synthesize operandStack = _operandStack;

-(NSMutableArray *)operandStack
{
    if(_operandStack == nil) _operandStack = [[NSMutableArray alloc]init];
    return _operandStack;
}

-(void)pushOperand:(double)operand
{
    [self.operandStack addObject:[NSNumber numberWithDouble:operand]];
}

-(double)popOperand
{
    NSNumber *operandObject = [self.operandStack lastObject];
    if (operandObject) [self.operandStack removeLastObject];
    return [operandObject doubleValue];
}

-(double)performOperation:(NSString *)operation
{
    double result = 0;

if([operation isEqualToString:@"+"])
{
    result = [self popOperand] + [self popOperand];
} else if ([operation isEqualToString:@"*"])
{
    result = [self popOperand] * [self popOperand];
} else if ([operation isEqualToString:@"/"])
{
    result = [self popOperand] / [self popOperand];
} else if ([operation isEqualToString:@"-"])
{
    result = [self popOperand] - [self popOperand];
} else if ([operation isEqualToString:@"C"])
{
    [self.operandStack removeAllObjects];
    result = 0;
} else if ([operation isEqualToString:@"sin"])
{
    double myDegrees = [self.operandStack];
    NSLog(@"degrees are %f", myDegrees);
    double myRadian = myDegrees * M_1_PI/180;
    NSLog(@"radian is %f", myRadian);
    result = myRadian;
}else if ([operation isEqualToString:@"cos"])
{
    result = cos([self popOperand]);
}else if ([operation isEqualToString:@"sqrt"])
{
    result = sqrt([self popOperand]);
}

[self pushOperand:result];

return result;
}

@end 
```

计算器视图控制器.h

```
#import <UIKit/UIKit.h>
#import <math.h>

@interface CalculatorViewController : UIViewController

@property (weak, nonatomic) IBOutlet UILabel *display;
@property (weak, nonatomic) IBOutlet UILabel *history;

@end 
```

计算器视图控制器.m

```
#import "CalculatorViewController.h"
#import "CalculatorBrain.h"

@interface CalculatorViewController()
@property (nonatomic) BOOL userIsInTheMiddleOfEnteringANumber;
@property (nonatomic, strong) CalculatorBrain *brain;
@end

@implementation CalculatorViewController

@synthesize display = _display;
@synthesize history = _history;
@synthesize userIsInTheMiddleOfEnteringANumber = _userIsInTheMiddleOfEnteringANumber;
@synthesize brain = _brain;

- (CalculatorBrain *)brain
{
    if(!_brain) _brain = [[CalculatorBrain alloc]init];
    return _brain;
}

- (IBAction)digitPressed:(UIButton *)sender
{
    NSString *digit = sender.currentTitle;
    if (self.userIsInTheMiddleOfEnteringANumber)
{
    self.display.text = self.display.text = [self.display.text    stringByAppendingString:digit];
} else
{
    self.display.text = digit;
    self.userIsInTheMiddleOfEnteringANumber = YES;
}

self.history.text = self.history.text = [self.history.text stringByAppendingString: digit];

}

- (IBAction)opperationPresssed:(UIButton *)sender
{
    if (self.userIsInTheMiddleOfEnteringANumber) [self enterPressed];
    double result = [self.brain performOperation:sender.currentTitle];
    NSString *resultString = [NSString stringWithFormat:@"%g", result];
    self.display.text = resultString;
}

- (IBAction)enterPressed
{
    [self.brain pushOperand:[self.display.text doubleValue]];
    self.userIsInTheMiddleOfEnteringANumber = NO;
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T16:47:25.740

```
double myDegrees = [[self.operandStack objectAtIndex:0] doubleValue]; 
```

# java - JFrame固定宽度

> ID：12988896
> 
> 赞同：8
> 
> 时间：2012-10-20T13:28:34.677
> 
> 标签：java, swing, jframe

是否可以为 JFrame 设置固定宽度？至少以下代码不起作用：

```
import java.awt.Dimension;
import java.awt.EventQueue;

import javax.swing.JFrame;

public final class Main  {

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                JFrame f = new JFrame();
                f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                f.setSize(500, 500);
                f.setMinimumSize(new Dimension(500, 0));
                f.setMaximumSize(new Dimension(500, Integer.MAX_VALUE));
                f.setVisible(true);
            }
        });
    }

} 
```

最小设置有效，但最大值无效。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-20T13:29:24.280

`f.setPreferredSize(new Dimension(500, 500));`在您的代码中使用 。并且一定要阅读这篇文章：[Java：组件中的 setPreferredSize() 和 setSize() 方法之间的区别以及](https://stackoverflow.com/q/1783793/544983) 防止框架增长或缩小使用`f.setResizable(false);`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-07-10T11:17:58.673

设置大小然后写：

```
JFrame.setResizable(false); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-24T03:38:17.357

只需将最大值设置为您要指定的值。取决于...屏幕尺寸的最大值或我们自己的值而不是 Integer.MAX_VALUE

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-02T17:07:29.323

您可以使用

```
Rectangle rc = f.getBounds();
rc.width = 500; //set max width
rc.height = Integer.MAX_VALUE; // set max height
f.setMaximizedBounds(rc); 
```

希望它对你有用

# c# - 无法释放 100,000 个字典使用的内存

> ID：12988897
> 
> 赞同：1
> 
> 时间：2012-10-20T13:28:34.413
> 
> 标签：c#, .net, generics, memory-leaks, garbage-collection

我的代码使用了许多字典，我在从所有字典中释放内存时遇到了问题。当我[使用我在这个答案中学到的东西进行调查](https://stackoverflow.com/q/10524107/328397)时，我看到 GenericEqualityComparer 在那里，我怀疑这就是保持这个内存在使用中的原因。

谁能证实这一点，或者告诉我如何释放这段记忆？

**代码**

```
 Console.WriteLine("{0,10}: Start Point", GC.GetTotalMemory(true));
        List<string> t1 = new List<string>();
        Console.WriteLine("{0,10}: <------- Create List", GC.GetTotalMemory(true));
        t1 = null;
        Console.WriteLine("{0,10}: <------- null List", GC.GetTotalMemory(true));

        GC.Collect();
        Console.WriteLine("{0,10}: After GC.Collect", GC.GetTotalMemory(true));
        Dictionary<string, string> t2 = new Dictionary<string, string>();
        Console.WriteLine("{0,10}: <------- Create Dict", GC.GetTotalMemory(true));
        t2 = null;
        Console.WriteLine("{0,10}: <------- null Dict", GC.GetTotalMemory(true));

        GC.Collect();
        Console.WriteLine("{0,10}: After GC.Collect", GC.GetTotalMemory(true));
        Dictionary<string, string> t3 = new Dictionary<string, string>();
        Console.WriteLine("{0,10}: <------- Create Dict", GC.GetTotalMemory(true));
        t3 = null;
        Console.WriteLine("{0,10}: <------- null Dict", GC.GetTotalMemory(true));

        GC.Collect();
        Console.WriteLine("{0,10}: After GC.Collect", GC.GetTotalMemory(true));
        Dictionary<string, string> t4 = new Dictionary<string, string>();
        Console.WriteLine("{0,10}: <------- Create Dict", GC.GetTotalMemory(true));
        t4 = null;
        Console.WriteLine("{0,10}: <------- null Dict", GC.GetTotalMemory(true));

        GC.Collect();
        Console.WriteLine("{0,10}: After GC.Collect", GC.GetTotalMemory(true));
        Dictionary<string, string> t5 = new Dictionary<string, string>();
        Console.WriteLine("{0,10}: <------- Create Dict", GC.GetTotalMemory(true));
        t5 = null;
        Console.WriteLine("{0,10}: <------- null Dict", GC.GetTotalMemory(true));

        GC.Collect();
        Console.WriteLine("{0,10}: After GC.Collect", GC.GetTotalMemory(true));
        Dictionary<string, string> t6 = new Dictionary<string, string>();
        Console.WriteLine("{0,10}: <------- Create Dict", GC.GetTotalMemory(true));
        GC.KeepAlive(t6);
        t6 = null;
        Console.WriteLine("{0,10}: <------- null Dict", GC.GetTotalMemory(true));

        GC.Collect();
        Console.WriteLine("{0,10}: <------- End.", GC.GetTotalMemory(true)); 
```

注意：我有这个代码的两个版本。如在 SO 上建议的那样，使用 GC.Collect 进行一次编辑，但这没有任何好处。

**没有 GC 收集的输出**

```
 95884: Start Point
 97872: <------- Create List
 97888: <------- null List
 97952: <------- Create Dict
 97968: <------- null Dict
 98032: <------- Create Dict
 98048: <------- null Dict
 98112: <------- Create Dict
 98128: <------- null Dict
 98192: <------- Create Dict
 98208: <------- null Dict
 98272: <------- Create Dict
 98288: <------- null Dict 
```

**使用 GC 收集输出** （根据建议）

```
 96004: Start Point
 97992: <------- Create List
 98008: <------- null List
 98024: After GC.Collect
 98088: <------- Create Dict
 98104: <------- null Dict
 98120: After GC.Collect
 98184: <------- Create Dict
 98200: <------- null Dict
 98216: After GC.Collect
 98280: <------- Create Dict
 98296: <------- null Dict
 98312: After GC.Collect
 98376: <------- Create Dict
 98392: <------- null Dict
 98408: After GC.Collect
 98472: <------- Create Dict
 98488: <------- null Dict
 98504: <------- End. 
```

**发布模式下的输出** （根据建议）

```
 96028: Start Point
 98016: <------- Create List
 98032: <------- null List
 98048: After GC.Collect
 98112: <------- Create Dict
 98128: <------- null Dict
 98144: After GC.Collect
 98208: <------- Create Dict
 98224: <------- null Dict
 98240: After GC.Collect
 98304: <------- Create Dict
 98320: <------- null Dict
 98336: After GC.Collect
 98400: <------- Create Dict
 98416: <------- null Dict
 98432: After GC.Collect
 98496: <------- Create Dict
 98512: <------- null Dict
 98528: <------- End. 
```

**在没有 GC 收集的情况下以发布模式输出** （根据建议）

```
 96028: Start Point
 98016: <------- Create List
 98032: <------- null List
 98096: <------- Create Dict
 98112: <------- null Dict
 98176: <------- Create Dict
 98192: <------- null Dict
 98256: <------- Create Dict
 98272: <------- null Dict
 98336: <------- Create Dict
 98352: <------- null Dict
 98416: <------- Create Dict
 98432: <------- null Dict
 98448: <------- End. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T13:34:40.440

在调试模式下，GC**不会收集**当前方法范围内的对象，因为对它们的引用仍然存在。尝试构建它以进行发布，无需调试即可运行并检查结果。

在调试模式下打印为真但在发布时为假的代码：

```
object obj = new object();
WeakReference reference = new WeakReference(obj);
GC.Collect(0, GCCollectionMode.Forced);
Console.WriteLine(reference.IsAlive); 
```

* * *

从 OP 编辑​​：调试模式确实人为地增加了内存使用量。当我运行独立应用程序时，我得到了这个输出。谢谢，我接受这个答案。

```
 21852: Start Point
 29328: <------- Create List
 29328: <------- null List
 29328: <------- Create Dict
 29328: <------- null Dict
 29328: <------- Create Dict
 29328: <------- null Dict
 29328: <------- Create Dict
 29328: <------- null Dict
 29328: <------- Create Dict
 29328: <------- null Dict
 29376: <------- Create Dict
 29328: <------- null Dict
 29328: <------- End. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T13:35:09.207

好吧，您并没有通过这样做来释放内存

```
value = null; 
```

您只是将值设置为 null，而不是从内存中删除某些内容。没有明确要求垃圾收集器执行其任务。

```
GC.Collect(); 
```

是您执行其任务所需要的。您通常不会这样做，因为 GC 编写得很好，并选择了自己的时间来收集未使用的对象。如果你无缘无故地经常调用它，它也会对你的表现造成很大的影响。还有一系列关于 GC 如何以及为什么会收集或不收集某些东西的条件。调试、方法、范围等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T13:35:21.750

从文档中`GC.GetTotalMemory`：

> If the forceFullCollection parameter is true, this method waits a short interval before returning while the system collects garbage and finalizes objects. The duration of the interval is an internally specified limit determined by the number of garbage collection cycles completed and the change in the amount of memory recovered between cycles. The garbage collector does not guarantee that all inaccessible memory is collected.

So, there is no bug, GC is nondeterministic, you cannot rely on GetTotalMemory(true) will clean up everything.

You'd need to call `GC.Collect()` for doing full garbage collection.

# android - 启动活动时出现空指针异常

> ID：12988898
> 
> 赞同：0
> 
> 时间：2012-10-20T13:28:39.750
> 
> 标签：android, exception, android-intent, android-emulator, nullpointerexception

当我开始以下活动时，我正在使用 android，我在我的 android 模拟器上强制关闭。我认为这是由于 getstringExtra() 中的空值，但我无法正确找到它。任何人都可以说这个活动中的错误是什么

```
public class Cancel_parkActivity extends Activity implements LocationListener{

        String p_u_name;
        HttpPost httppost;
        StringBuffer buffer;
        HttpResponse response;
        HttpClient httpclient;
        List<NameValuePair> nameValuePairs;
        ProgressDialog dialog = null;
        LocationManager locManager;
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.cancel_park);

              Intent in = getIntent();
              p_u_name = in.getExtras().getString("KEY_USERNAME");

                  System.out.println(" Cancel_park : your name is"+p_u_name);

                    dialog = ProgressDialog.show(Cancel_parkActivity.this, "", 
                            "Cancel parking...", true);
                     new Thread(new Runnable() {
                            public void run() {
                                cancelpark();                          
                            }
                          }).start(); 

                    }

        public void cancelpark(){
             try{  
                 httpclient=new DefaultHttpClient();
                 httppost= new HttpPost("http://10.0.2.2/test_login/deletepark.php");

                 nameValuePairs = new ArrayList<NameValuePair>(2);

                String KEY_DELETE = "delete";
                 nameValuePairs.add(new BasicNameValuePair(KEY_DELETE,""));
                 nameValuePairs.add(new BasicNameValuePair("username",p_u_name.trim()));
                 httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                ResponseHandler<String> responseHandler = new BasicResponseHandler();
                 final String response = httpclient.execute(httppost, responseHandler);
                 System.out.println("Response : " + response); 
                 runOnUiThread(new Runnable() {
                     public void run() {
                        System.out.println("Response from PHP : " + response);
                         dialog.dismiss();
                     }
                 });

                 if(response.equalsIgnoreCase("Success")){
                     runOnUiThread(new Runnable() {
                         public void run() {
                             Toast.makeText(Cancel_parkActivity.this,"Last parking canceled", Toast.LENGTH_SHORT).show();

                         }
                     });

//                   startActivity(new Intent(LoginActivity.this, MainActivity.class));
                 }else{
                     Toast.makeText(Cancel_parkActivity.this,"fucking", Toast.LENGTH_SHORT).show();

                 }

             }catch(Exception e){
                 dialog.dismiss();
                 System.out.println("Exception : " + e.getMessage());
             }
         }
         public void showAlert(){
             Cancel_parkActivity.this.runOnUiThread(new Runnable() {
                 public void run() {
                     AlertDialog.Builder builder = new AlertDialog.Builder(Cancel_parkActivity.this);
                     builder.setTitle("Parking Error.");
                     builder.setMessage("Try again?.")  
                            .setCancelable(false)
                            .setPositiveButton("OK", new DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface dialog, int id) {
                                    Intent r = new Intent(getApplicationContext(),Park_HereActivity.class);
                                    startActivity(r);
                                }
                            });                     
                     AlertDialog alert = builder.create();
                     alert.show();               
                 }
             });

         }
        public void onLocationChanged(Location arg0) {
            // TODO Auto-generated method stub

        }
        public void onProviderDisabled(String provider) {
            // TODO Auto-generated method stub

        }
        public void onProviderEnabled(String provider) {
            // TODO Auto-generated method stub

        }
        public void onStatusChanged(String provider, int status, Bundle extras) {
            // TODO Auto-generated method stub

        }
    } 
```

我得到了这样的空指针异常

```
10-20 17:42:50.044: E/AndroidRuntime(1983): FATAL EXCEPTION: main
10-20 17:42:50.044: E/AndroidRuntime(1983): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.oranz.epark/com.oranz.epark.Cancel_parkActivity}: java.lang.NullPointerException
10-20 17:42:50.044: E/AndroidRuntime(1983):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1955)
10-20 17:42:50.044: E/AndroidRuntime(1983):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980)
10-20 17:42:50.044: E/AndroidRuntime(1983):     at android.app.ActivityThread.access$600(ActivityThread.java:122)
10-20 17:42:50.044: E/AndroidRuntime(1983):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
10-20 17:42:50.044: E/AndroidRuntime(1983):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-20 17:42:50.044: E/AndroidRuntime(1983):     at android.os.Looper.loop(Looper.java:137)
10-20 17:42:50.044: E/AndroidRuntime(1983):     at android.app.ActivityThread.main(ActivityThread.java:4340)
10-20 17:42:50.044: E/AndroidRuntime(1983):     at java.lang.reflect.Method.invokeNative(Native Method)
10-20 17:42:50.044: E/AndroidRuntime(1983):     at java.lang.reflect.Method.invoke(Method.java:511)
10-20 17:42:50.044: E/AndroidRuntime(1983):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
10-20 17:42:50.044: E/AndroidRuntime(1983):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
10-20 17:42:50.044: E/AndroidRuntime(1983):     at dalvik.system.NativeStart.main(Native Method)
10-20 17:42:50.044: E/AndroidRuntime(1983): Caused by: java.lang.NullPointerException
10-20 17:42:50.044: E/AndroidRuntime(1983):     at com.oranz.epark.Cancel_parkActivity.onCreate(Cancel_parkActivity.java:43)
10-20 17:42:50.044: E/AndroidRuntime(1983):     at android.app.Activity.performCreate(Activity.java:4465)
10-20 17:42:50.044: E/AndroidRuntime(1983):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
10-20 17:42:50.044: E/AndroidRuntime(1983):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1919)
10-20 17:42:50.044: E/AndroidRuntime(1983):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T13:29:41.563

检查代码中的这一行：

```
Cancel_parkActivity.java:43 
```

也许 getIntent().getExtras() 为空？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T13:35:32.753

```
Intent myIntent= getIntent(); // gets the previously created intent
    String firstKeyName = intent.getStringExtra("KEY_USERNAME"); 
```

试试这个方法。

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T14:41:44.707

```
p_u_name = getIntent().getStringExtra("KEY_USERNAME");

p_u_name throw NullPointer so please check the before Activity class
Example :

Intent intent = new Intent(this, Cancel_parkActivity.class);
intent.putExtra("KEY_USERNAME", your_Value);
startActivity(intent); 
```

请检查上面的编码，然后你很容易找到解决方案

# php - PHP/Codeigniter 类和方法定义

> ID：12988899
> 
> 赞同：0
> 
> 时间：2012-10-20T13:28:47.953
> 
> 标签：php, class, codeigniter, methods

我有这样的课：

```
class Asd{

function index(){
$this->doSomenthing();

}

function doSomenthing(){

}

} 
```

我正在使用 codeigniter 所以 doSomenthing == [http://www.site.com/asd/dosomenthing](http://www.site.com/asd/dosomenthing)；

我想将该方法保留为“私有”，它可以使用但不能通过 http 请求访问，它只能从类内的其他方法中使用。

我是否需要将该方法声明为`private function doSomenthing(){}`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T13:33:20.973

您可以在“doSomething”方法前加上下划线。这样就不会通过 URL 请求访问它。

[http://codeigniter.com/user_guide/general/controllers.html#private](http://codeigniter.com/user_guide/general/controllers.html#private)

# java - 按降序对字符串进行冒泡排序

> ID：12988900
> 
> 赞同：1
> 
> 时间：2012-10-20T13:29:01.867
> 
> 标签：java, sorting

我必须在冒泡排序中按降序对一串名称进行排序。我试过了，但它不工作。这是我到目前为止所拥有的：

```
public static void bubbleSort(Student[] array)
{
    for(int i=(array.length); i>0; i--)
    {    
        for(int j=1; j<(array.length-i); j++) 
        {
            if( array[j].getName().compareTo(array[j+1].getName())<0)    
            {
                Student Temp = array[j];
                array[j] = array[j+1];
                array[j+1] = Temp;
            }    
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T13:34:03.820

试试这个逻辑

```
 import java.util.*;

    public class BubbleSort {

   public static void main(String[] args) {
    String l[]={"ABCD" , "XYZ" , "DEF" , "PQR"};
    BubbleSort(l);
    for(int i=0; i<l.length; i++)
    {
        System.out.println(l[i]);
    }
  }

 private static void BubbleSort(String[] array) {
    String t;
    for(int i=0; i<array.length; i++) {
        for(int j=0; j<array.length-1-i; j++) {
        if(array[j].compareTo(array[j+1])>0) {
            t= array[j];
            array[j] = array[j+1];
            array[j+1] = t;
        }
    }
    }
}
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-07T12:32:52.660

我迟到了八年零一个月，但是对于现在遇到同样问题的任何人，这里是解决方案代码：

```
import java.util.Scanner;
public class sort
{
    public static void main(String args[])
    {
        Scanner scnr=new Scanner(System.in);
        String arr[]= new String[20];

        System.out.println("Enter names:");
        for(int i=0; i<20; i++)
        {
            arr[i]= scnr.nextLine();
        }

        String temp; int i;
        for(int j=0; j<arr.length;j++)
        {
            for(i=j+1; i<arr.length; i++)
            {
                //comparing adjacent string
                if(arr[i].compareTo(arr[j]) > 0)
                {
                    temp=arr[j];
                    arr[j]=arr[i];
                    arr[i]=temp;
                }
            }
            System.out.println(arr[j]);
        }
    }
} 
```

# iphone - 以 72 dpi 保存 UIImage（Retina 模拟器以 144 dpi 保存）

> ID：12988903
> 
> 赞同：2
> 
> 时间：2012-10-20T13:29:24.820
> 
> 标签：iphone, ios, uiimage

我有一个非常奇怪的问题......在我的 iPhone 应用程序中，用户可以打开相机胶卷中的图像，在我的示例中是 1920 x 1080 像素（72 dpi）的壁纸。

现在，想要将图像大小调整为例如 1024 像素的宽度：

```
+ (UIImage *)imageWithImage:(UIImage *)image scaledToSize:(CGSize)newSize {
    UIGraphicsBeginImageContextWithOptions(newSize, NO, 0.0);
    [image drawInRect:CGRectMake(0, 0, newSize.width, newSize.height)];
    UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    NSLog(@"New image has w=%f, h=%f", newImage.size.width, newImage.size.height);
    return newImage;
} 
```

使用日志消息我可以检查，宽度是 1024，高度是 576。一切都很好！

但现在，我将图像保存在 Documents 文件夹中：

```
NSString *jpgPath = [NSHomeDirectory() stringByAppendingPathComponent:[NSString stringWithFormat:@"Documents/%@.jpg", uniqueId]];
[UIImageJPEGRepresentation(originalImage, 1.0) writeToFile:jpgPath atomically:YES]; 
```

现在出现了一个非常奇怪的效果：
a）当我使用 Retina Simulator 时，保存的图像位于“/Users/[...]/Library/Application Support/iPhone Simulator/5.1/Applications/[...]/Documents/ " 大小为 1.5 MB，分辨率为 2048 x 1152 像素，分辨率为 144(!) dpi。

b) 当我使用普通模拟器时，大小为 441 KB，分辨率为 1024 x 768 像素，72 dpi。

如何强制保存 72 dpi 的 UIImage？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T14:59:51.680

啊啊啊！！！

我得到了它...

```
UIGraphicsBeginImageContextWithOptions(newSize, NO, 1.0); 
```

“1.0”而不是“0.0”！

第三个参数是应用于位图的比例因子。如果您指定值 0.0，则比例因子设置为设备主屏幕的比例因子。

# php - 如何解决Spited数组

> ID：12988910
> 
> 赞同：0
> 
> 时间：2012-10-20T13:30:39.963
> 
> 标签：php, arrays

我已经在 php 中运行了 for 循环，我得到了以下输出...我正在尝试将第一个值存储在其他数组中，第二个值存储在其他数组中...请任何人指导我这样做！

或者我如何存储在二维数组中

```
大批
(
    [0] => 44
    [1] => 810
)
大批
(
    [0] => 0
    [1] => 280
)
大批
(
    [0] => 73
    [1] => 279
)
大批
(
    [0] => 0
    [1] => 278
)
大批
(
    [0] => 0
    [1] => 277
)
大批
(
    [0] => 0
    [1] => 276
)
大批
(
    [0] => 87
    [1] => 840
)
大批
(
    [0] => 0
    [1] => 275
)
大批
(
    [0] => 0
    [1] => 274
)
大批
(
    [0] => 0
    [1] => 273
)
大批
(
    [0] => 6
    [1] => 271
)
大批
(
    [0] => 0
    [1] => 272
)
大批
(
    [0] => 0
    [1] => 269
)
大批
(
    [0] => 3
    [1] => 267
)
大批
(
    [0] => 0
    [1] => 268
)
大批
(
    [0] => 3
    [1] => 259
)
大批
(
    [0] => 108
    [1] => 124
)
大批
(
    [0] => 82
    [1] => 239
)
大批
(
    [0] => 221
    [1] => 238
)
大批
(
    [0] => 30
    [1] => 160
)
大批
(
    [0] => 3
    [1] => 161
)
大批
(
    [0] => 65
    [1] => 168
)
大批
(
    [0] => 73
    [1] => 169
)
大批
(
    [0] => 0
    [1] => 170
)
大批
(
    [0] => 0
    [1] => 248
)
大批
(
    [0] => 192
    [1] => 226
)
大批
(
    [0] => 209
    [1] => 222
)
大批
(
    [0] => 80
    [1] => 223
)
大批
(
    [0] => 182
    [1] => 273
)
大批
(
    [0] => 79
    [1] => 183
)
大批
(
    [0] => 73
    [1] => 184
)
大批
(
    [0] => 73
    [1] => 185
)
大批
(
    [0] => 6
    [1] => 186
)
大批
(
    [0] => 73
    [1] => 187
)
大批
(
    [0] => 0
    [1] => 188
)
大批
(
    [0] => 48
    [1] => 270
)
大批
(
    [0] => 138
    [1] => 190
)
大批
(
    [0] => 191
    [1] => 370
)
大批
(
    [0] => 152
    [1] => 192
)
大批
(
    [0] => 12
    [1] => 200
)
大批
(
    [0] => 200
    [1] => 210
)
大批
(
    [0] => 0
    [1] => 213
)
大批
(
    [0] => 21
    [1] => 212
)
大批
(
    [0] => 124
    [1] => 214
)
大批
(
    [0] => 0
    [1] => 215
)
大批
(
    [0] => 0
    [1] => 216
)
大批
(
    [0] => 133
    [1] => 217
)
大批
(
    [0] => 6
    [1] => 260
)
大批
(
    [0] => 73
    [1] => 285
)
大批
(
    [0] => 73
    [1] => 284
)
大批
(
    [0] => 0
    [1] => 283
)
大批
(
    [0] => 73
    [1] => 286
)
大批
(
    [0] => 73
    [1] => 287
)
大批
(
    [0] => 0
    [1] => 288
)
大批
(
    [0] => 73
    [1] => 289
)
大批
(
    [0] => 0
    [1] => 290
)
大批
(
    [0] => 76
    [1] => 291
)
大批
(
    [0] => 76
    [1] => 292
)
大批
(
    [0] => 0
    [1] => 293
)
大批
(
    [0] => 0
    [1] => 294
)
大批
(
    [0] => 0
    [1] => 295
)
大批
(
    [0] => 0
    [1] => 296
)
大批
(
    [0] => 0
    [1] => 297
)
大批
(
    [0] => 3
    [1] => 298
)
大批
(
    [0] => 0
    [1] => 299
)
大批
(
    [0] => 0
    [1] => 300
)
大批
(
    [0] => 3
    [1] => 301
)

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T13:34:43.130

您可以使用

```
$a = $b = array();
foreach ( $array as $list ) {
    list($a[], $b[]) = $list;
} 
```

[观看现场演示](http://codepad.org/sVQcWBUs)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T13:33:33.887

像这样的东西？

```
$first = array();
$second = array();
$sourceArray = //this is what you are looping over. 
//Your loop
foreach($sourceArray as $array) {
    $first[] = $array[0];
    $second[] = $array[1];
} 
```

# php - 搜索数组

> ID：12988911
> 
> 赞同：0
> 
> 时间：2012-10-20T13:30:52.927
> 
> 标签：php, mysql, arrays

我有一个从我的数据库中获取的数组，当它是 print_r 时输出以下内容

```
Array ( [0] => stdClass Object ( [name] => Administrator ) [1] => stdClass Object ( [name] => Events Organiser ) ) 
```

我将如何搜索该数组以查看它是否包含“Events Organizer”字样？

我知道它是否是标准阵列设置，例如

```
Array ( [0] => Administrator ) [1] => Events Organiser ) ) 
```

然后我可以使用 in_array 但这似乎不适用于我的数组的输出方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T13:47:47.990

您可以使用`array_filter`让您指定自定义函数来进行搜索。在您的情况下，一个简单的函数用于`strpos()`检查您的搜索字符串是否存在：

```
function my_search($targetval) {
    $srch_val= 'value to search';
    return(strpos($targetval, $srch_val)); // or stripos() if you want case-insensitive searching.
}

$matches = array_filter($your_array, 'my_search'); 
```

如需进一步参考，您可以查看此[链接](http://php.net/manual/en/function.array-filter.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T13:40:11.780

array_search 会这样做，示例如下

```
<?php
$your_array = array(key=>values);

$key = array_search('value_for_search', $your_array); 

 ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T13:43:44.587

重建阵列

```
$std = new stdClass();
$std->name = "Administrator";

$std2 = new stdClass();
$std2->name = "Events Organiser";

$array = array($std,$std2); 
```

您可以使用

```
$find = "Events Organiser" ;
$list = array_filter($array,function($v) use ($find) { return $v->name == $find ; });
var_dump($list); 
```

# c - C long unsigned int 数字操作

> ID：12988913
> 
> 赞同：1
> 
> 时间：2012-10-20T13:31:08.170
> 
> 标签：c, embedded, int, long-integer, unsigned

我正在尝试在嵌入式 C/C++ 环境中进行一些简单的变量操作。由于某种原因，我一直得到零。

这是代码

```
void Heater::setPower( int newpower ) 
{
    printf("1 new power %d\n",newpower);

    if(newpower != power)
        power = newpower;
    else 
        return;

    printf("2 new power %d\n",power);

    // Set Duty
    long unsigned int newduty = 0;

    // Protect from divide by zero
    if(power <= 0)
    {
         printf("2.5 zeroed\n");
         newduty = 0;
         power = 0; 
    }
    else
         newduty = period*(power/100);

    printf("3 setduty %lu period %lu\n", newduty, period);

    setDuty(newduty);
} 
```

这是我收到的输出

```
1 new power 76
2 new power 76
3 setduty 0 period 10000000 
```

所以我知道收到的号码是 76。我知道它通过了第一个障碍和第二个障碍。但不知何故，在简单的数学方程中，它变成了零。“句点”也是一个 long unsigned int 并且在类 def 中声明，但您可以看到输出是合适的。

为什么这会一直下降到零？什么不见​​了？我是否需要为较大的数字添加一些特殊的东西，或者我不能在 long unsigned int 或其他东西上使用简单的运算符 * 和 /？

我正在处理大量数字（x<=10,000,000），因为我使用的是内核级 pwm。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T13:34:18.597

您遇到的问题`power`是整数，因此当您`/100`实际上`0`因[整数除法](http://www.google.co.uk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CB8QFjAA&url=http://mathworld.wolfram.com/IntegerDivision.html&ei=J6uCUJfqNKbP0QXbvoHgBA&usg=AFQjCNGn9RsOvEkZPA9S7z_V6H7rx43vNQ)规则而得到结果时。这意味着当您将其乘以 时`period`，整个结果为`0`。

根据您的精度要求，制作`power`双精度数可能就足够了，但是请注意，这`(power/100)*period`通常会产生小数结果，因此可能还需要将结果存储在双精度数中。

如果你必须坚持使用整数，那么这样做`((power*period)/100)`会给你一个相当准确的结果，因为`power*period`在除法之前变成一个很大的数 a `0`。`0`使用整数除法，您放置括号的位置可能是获得或`7600000`（在您的情况下）之间的区别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T13:36:18.950

使`newduty and power as double`. 因为整数类型它给出 0

# jquery - Jquery无限期动画

> ID：12988914
> 
> 赞同：0
> 
> 时间：2012-10-20T13:31:33.377
> 
> 标签：jquery, jquery-animate

看过很多文章，但无法让动画功能无限期地运行。请帮帮我。

```
$.move = function(object, direction) {
    $(object).animate({
        backgroundPosition:'('+ direction +' -15000px)'
    }, 20000, 'linear', function(){ $.move(object, direction) } );
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T14:14:30.563

我不确定为什么要使用`$.move`而不是`.move`，但是您可以创建作用于选择器的 jQuery 方法：

```
$.fn.move = function() {
    $(this).animate({...}, function(){ $(this).move() } );
}; 
```

[http://jsfiddle.net/mG6W4/](http://jsfiddle.net/mG6W4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T22:00:14.600

完成了！

```
 $('#stars1').css({backgroundPosition: '0px 0px'});
        $('#stars2').css({backgroundPosition: '0px 0px'});

        function move(object, direction){
            $(object).animate({backgroundPosition:'('+ direction +' -15000px)'}, 20000, 'linear', function(){$(object).css({backgroundPosition: '0px 0px'}); move(object, direction); });
        };

        move($("#stars1"), '-2000px');
        move($("#stars2"), '+2000px'); 
```

# fonts - 如何从 TTF 位图字体中提取位图数据以进行 POV 显示？

> ID：12988915
> 
> 赞同：1
> 
> 时间：2012-10-20T13:31:33.650
> 
> 标签：fonts, bitmap, processing, pixels, truetype

我从 dafont 存储库中以 TTF 格式收集了许多 10 像素高的位图字体。但是，我无法从它们中提取实际的位图数据，因为它们似乎是矢量形式，并且在渲染时我无法弄清楚点大小和像素大小之间的对应关系。我需要有关软件工具、库或方法的建议，以获取与字母形式对应的准确的每像素位图数据。

一个对问题有意义的示例字体是[http://www.dafont.com/commodore-64-pixelized.font](http://www.dafont.com/commodore-64-pixelized.font)

我的目标是使用这些位图字体中的一种或多种来控制基于 Arduino 的视觉持久性 (POV) 显示，作为[http://shrimping.it](http://shrimping.it)项目的一部分。

POV 设备使用一排 LED 在设备左右移动时通过闪烁 LED 来在空中绘制文本。一个著名的例子是 Adafruit 的 MiniPOV [http://www.ladyada.net/make/minipov3/](http://www.ladyada.net/make/minipov3/)

要编写微控制器代码来闪烁 LED，我需要从字体中获取逐个像素的信息，换句话说，我需要一个方案来从我提供的 TTF 格式文件中提取数据以避免使用为每个字符和每种字体手动执行此操作。

到目前为止，我一直在尝试处理（http://processing.org），但我看不到如何选择点大小来渲染 TTF，以便绘制字体与底层网格完全匹配的像素。一旦我有了这个，我就可以得到信息，但我似乎无法到达那里。Processing 报告的 textAscent 和 textDescent 值似乎是垃圾，至少对于我尝试过的字体。

我正在测试的字体是 Advocut、Andina、Aux DotBitC、BM tube、Commodore 64 Pixelised、Homespun BRK、Nayupixel、SG05 和 Visitor。如果您需要查看原始数据以更好地理解问题，您可以通过在 dafont.com 上搜索来自行检索其中的任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T15:53:39.690

我找到了一个解决方案，它分为三个部分。

# 阶段1

首先，我使用 Python 从交互式 Python shell 中输出所有可打印的图形 ASCII 字符，方法是输入“python”然后...

```
import string
print(''.join([chr(x) for x in range(33,127)])) 
```

...它给出了以下字符序列 - 省略 SPACE (32) 和 DEL (127)...

```
!"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_`abcdefghijklmnopqrstuvwxyz{|}~ 
```

# 第二阶段

然后我启动 Inkscape，使用 View>Grid 激活可见像素网格，并创建一个文本元素，其中包含给定字体的一行中的所有这些字符。我目视检查了哪些字符已退回到非像素字形。（如果没有完全指定一个字符，我认为它会在其中插入一个常规矢量字体，该字体可以是非整数像素数，这会打乱水平字距调整并错误定位剩余字符，因此必须替换它们）。我只用一个问号替换了我看到的所有非像素化字符，这个字符似乎可靠地存在并且在这些字体中具有整数个像素。

一旦所有字符都是干净的像素化字符，选择文本元素（使坐标栏出现在顶部），并放大视图，我就可以将文本定位在 0,0 并选择像素高度手动使像素元素与支持网格对齐（确保当我从 8、9、10、11 像素高切换时，锁定符号被激活以一起缩放水平和垂直尺寸。在某些情况下，这些所谓的当它们正确排列时，10 像素字体实际上是 8 像素或 11 像素高，这解释了一些问题。

有时精确的高度映射会偏离一小部分，所以我通过确保水平像素数正确来调整它（例如，有时实际高度是分数，比如 618 像素宽但 7.005 高。通过沿着字符扫描，你可以看到是否像素稍短或稍长，并将宽度设置为整数，直到像素适合网格。高度的浮点差异在 Inkscape 中几乎不可见，并且对导出没有明显影响（其中分数被四舍五入）但是如果水平计数错误，则会拍摄像素映射，并且在您尝试量化时会因为偏移而产生水平模糊像素。

最后，仍然选择文本元素，我选择了文件>导出位图并选择了“选择”选项卡。导出具有 8、10、11 或在上一步中发现的任何像素数的 PNG，生成具有完美像素映射的像素图形 - 可以在该文件上编写一个简单的例程来提取位图。

# 第三阶段

最后，必须编写一个程序来导入 PNG 并为 POV 位图提取正确的每个字符信息。

我想出了一个例程，它可以可靠地检测字符的水平范围，并且可以将它们分割成我的 POV 的单独序列。这些不是等宽字体，因此每个字符的宽度是不可预测的——例如感叹号通常只有两个像素宽。需要为包含两个空格的双引号字符编码特殊情况。

我的提取程序的来源现在在...

[http://shrimping.it/shrimp/project/pov/font/extract_font.py](http://shrimping.it/shrimp/project/pov/font/extract_font.py)

...并且可以通过 CDing 到目录并运行来在目录中的一组 png 文件上运行

```
python extract_font.py 
```

然后为每个字符生成单独的位图，提取到每个字体的单独目录中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-13T03:33:07.393

# Python3

I've tried to be descriptive, but you can simplify to work how you need it to.

## Requirements: PIL (Pillow)

[PIL](http://www.pythonware.com/products/pil/)'s [ImageDraw](http://www.pythonware.com/library/pil/handbook/imagedraw.htm) and [ImageFont](http://www.pythonware.com/library/pil/handbook/imagefont.htm) module

```
# pip install Pillow
from PIL import Image, ImageFont, ImageDraw

# use a truetype font (.ttf)
# font file from fonts.google.com (https://fonts.google.com/specimen/Courier+Prime?query=courier)
font_path = "fonts/Courier Prime/"
font_name = "CourierPrime-Regular.ttf"
out_path = font_path

font_size = 16 # px
font_color = "#000000" # HEX Black

# Create Font using PIL
font = ImageFont.truetype(font_path+font_name, font_size)

# Copy Desired Characters from Google Fonts Page and Paste into variable
desired_characters = "ABCČĆDĐEFGHIJKLMNOPQRSŠTUVWXYZŽabcčćdđefghijklmnopqrsštuvwxyzž1234567890‘?’“!”(%)[#]{@}/&\<-+÷×=>®©$€£¥¢:;,.*"

# Loop through the characters needed and save to desired location
for character in desired_characters:

    # Get text size of character
    width, height = font.getsize(character)

    # Create PNG Image with that size
    img = Image.new("RGBA", (width, height))
    draw = ImageDraw.Draw(img)

    # Draw the character
    draw.text((-2, 0), str(character), font=font, fill=font_color)

    # Save the character as png
    try:
        img.save(out_path + str(ord(character)) + ".png")
    except:

        print(f"[-] Couldn't Save:\t{character}") 
```

# extjs4 - Extjs 4拖放网格到区域取消拖动项目

> ID：12988917
> 
> 赞同：0
> 
> 时间：2012-10-20T13:31:43.130
> 
> 标签：extjs4

我使用 extjs 4 示例 dragdropzones.js 。它运行良好。但我想删除添加的项目意味着从面板中拖动项目。帮助解决这个问题。我尝试从函数 onNodeDrop 调用 onclick 上的另一个函数并尝试传递和访问目标，但它不起作用意味着它显示空值。所以我不了解这将是什么程序。

```
Ext.require(['*']);
Ext.onReady(function() {

     Ext.define('Accountformfield', {
        extend: 'Ext.data.Model',
        idProperty: 'id',
        fields: [{
                name: 'formfieldname'
            }, {
                name: 'id'
            }]
    });
    var fields = [{
        id: '1',
        formfieldname: 'field1'
    }, {
        id: '2',
        formfieldname: 'field2'
    }, {
        id: '3',
        formfieldname: 'field3'
    }, {
        id: '4',
        formfieldname: 'field4'
    }, {
        id: '5',
        formfieldname: 'Field5'
    }];

    var fieldStore = Ext.create('Ext.data.Store', {
        model: 'Accountformfield',
        data: fields
    });

    var groups = [{
        id: 1,
        name: 'Group1'
    }, {
         id: 2,
        name: 'Group2'
    }, {
         id: 3,
        name: 'Group3'
    }];

    Ext.define('Formfieldgroup', {
        extend: 'Ext.data.Model',
        idProperty: 'id',
        fields: [{
            name: 'name'
        }]
    });

    var groupStore = Ext.create('Ext.data.Store', {
        model: 'Formfieldgroup',
        data: groups
    });

    var fieldView = Ext.create('Ext.view.View', {
        cls: 'patient-view',
        tpl: '<tpl for=".">' +
                '<div class="patient-source"><table><tbody>' +
                    '<tr><td class="patient-label">Name</td><td class="patient-name">{formfieldname}</td></tr>' +
                '</tbody></table></div>' +
             '</tpl>',
        itemSelector: 'div.patient-source',
        overItemCls: 'patient-over',
        selectedItemClass: 'patient-selected',
        singleSelect: true,
        store: fieldStore,
        listeners: {
            render: initializePatientDragZone,
                    el: {
                            click: function() {
                            Ext.Msg.alert('drag');
                        }
                   }
        }
    });

    var mapingGrid = Ext.create('Ext.grid.GridPanel', {
        title: 'Group Maintainance',
        region: 'center',
        margins: '0 5 5 0',
        hideHeaders: true,
        sortableColumns: false,
        columns: [{
            dataIndex: 'name',
            width:'100%'
        }],
        features: [{
            ftype:'rowbody',
            rowBodyDivCls: 'hospital-target',
            getAdditionalData: function() {
                return Ext.apply(Ext.grid.feature.RowBody.prototype.getAdditionalData.apply(this, arguments), {
                    rowBody: 'Drop Field Here'
                });
            }
        }
        ],
        viewConfig: {
            listeners: {
                render: initializeHospitalDropZone
            }
        },
        store: groupStore,
        buttons: [{
            text: 'Save',
            handler: function(){
                var form = formpanel.getForm();
                form.loadRecord(record);
                if(form.isValid()){
                    form.submit({
                        url: 'accounts',
                        //waitMsg: 'Uploading your photo...',
                        success: function(fp, o) {
                            msg('Success', 'Processed file "' + o.result.file + '" on the server');
                        }
                    });
                }
            }
        }]
    });

    Ext.create('Ext.Viewport', {
        layout: 'border',
        items: [{
            cls: 'app-header',
            region: 'north',
            height: 30,
            html: '<h1>Form Maintainance</h1>',
            margins: '5 5 5 5'
        }, {
            title: 'Fields',
            region: 'west',
            width: 300,
            margins: '0 5 5 5',
            items: fieldView
        }, mapingGrid
            ]
    });
});

/*
 * Here is where we "activate" the DataView.
 * We have decided that each node with the class "patient-source" encapsulates a single draggable
 * object.
 *
 * So we inject code into the DragZone which, when passed a mousedown event, interrogates
 * the event to see if it was within an element with the class "patient-source". If so, we
 * return non-null drag data.
 *
 * Returning non-null drag data indicates that the mousedown event has begun a dragging process.
 * The data must contain a property called "ddel" which is a DOM element which provides an image
 * of the data being dragged. The actual node clicked on is not dragged, a proxy element is dragged.
 * We can insert any other data into the data object, and this will be used by a cooperating DropZone
 * to perform the drop operation.
 */
function initializePatientDragZone(v) {
    v.dragZone = Ext.create('Ext.dd.DragZone', v.getEl(), {

//      On receipt of a mousedown event, see if it is within a draggable element.
//      Return a drag data object if so. The data object can contain arbitrary application
//      data, but it should also contain a DOM element in the ddel property to provide
//      a proxy to drag.
        getDragData: function(e) {
            var sourceEl = e.getTarget(v.itemSelector, 10), d;
            if (sourceEl) {
                d = sourceEl.cloneNode(true);
                d.id = Ext.id();
                return v.dragData = {
                    sourceEl: sourceEl,
                    repairXY: Ext.fly(sourceEl).getXY(),
                    ddel: d,
                    patientData: v.getRecord(sourceEl).data
                };
            }
        },

//      Provide coordinates for the proxy to slide back to on failed drag.
//      This is the original XY coordinates of the draggable element.
        getRepairXY: function() {
            return this.dragData.repairXY;
        }
    });
}

/*
 * Here is where we "activate" the GridPanel.
 * We have decided that the element with class "hospital-target" is the element which can receieve
 * drop gestures. So we inject a method "getTargetFromEvent" into the DropZone. This is constantly called
 * while the mouse is moving over the DropZone, and it returns the target DOM element if it detects that
 * the mouse if over an element which can receieve drop gestures.
 *
 * Once the DropZone has been informed by getTargetFromEvent that it is over a target, it will then
 * call several "onNodeXXXX" methods at various points. These include:
 *
 * onNodeEnter
 * onNodeOut
 * onNodeOver
 * onNodeDrop
 *
 * We provide implementations of each of these to provide behaviour for these events.
 */
function initializeHospitalDropZone(v) {
    var gridView = v,
        grid = gridView.up('gridpanel');

    grid.dropZone = Ext.create('Ext.dd.DropZone', v.el, {

//      If the mouse is over a target node, return that node. This is
//      provided as the "target" parameter in all "onNodeXXXX" node event handling functions
        getTargetFromEvent: function(e) {
            return e.getTarget('.hospital-target');
        },

//      On entry into a target node, highlight that node.
        onNodeEnter : function(target, dd, e, data){
            Ext.fly(target).addCls('hospital-target-hover');
        },

//      On exit from a target node, unhighlight that node.
        onNodeOut : function(target, dd, e, data){
            Ext.fly(target).removeCls('hospital-target-hover');
        },

//      While over a target node, return the default drop allowed class which
//      places a "tick" icon into the drag proxy.
        onNodeOver : function(target, dd, e, data){
            return Ext.dd.DropZone.prototype.dropAllowed;
        },

//      On node drop, we can interrogate the target node to find the underlying
//      application object that is the real target of the dragged data.
//      In this case, it is a Record in the GridPanel's Store.
//      We can use the data set up by the DragZone's getDragData method to read
//      any data we decided to attach.
        onNodeDrop : function(target, dd, e, data){
            var rowBody = Ext.fly(target).findParent('.x-grid-rowbody-tr', null, false),
                mainRow = rowBody.previousSibling,
                h = gridView.getRecord(mainRow),
                targetEl = Ext.get(target);
        targetEl.update('<a onclick="remove(\''+data.patientData.id+'\');">'+data.patientData.formfieldname + '</a>,' + targetEl.dom.innerHTML);
        //Ext.Msg.alert(targetEl.dom.innerHTML);
        //Ext.Msg.alert('Drop gesture', 'Dropped patient ' + data.patientData.formfieldname +' on hospital ' + h.data.name);
            return true;
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T14:36:35.583

首先，将 id 添加到您的 Patient View 和每个模板行：

```
 fieldView = Ext.create('Ext.view.View', {

    // add id
    id: "patientView",
    cls: 'patient-view',

    // for each item add appropriate id
    tpl: '<tpl for=".">' +
            '<div id="{id}" class="patient-source"><table><tbody>' +
                '<tr><td class="patient-label">Name</td><td class="patient-name">{formfieldname}</td></tr>' +
            '</tbody></table></div>' +
         '</tpl>',
    itemSelector: 'div.patient-source',
    overItemCls: 'patient-over',
    selectedItemClass: 'patient-selected',
    singleSelect: true,
    store: fieldStore,
    listeners: {
        render: initializePatientDragZone,
                el: {
                        click: function() {
                        Ext.Msg.alert('drag');
                    }
               }
    }
}); 
```

接下来，在 onNodeDrop 处理程序中添加下一个从 DOM 中删除 html 行的代码

```
 onNodeDrop : function(target, dd, e, data){
        var rowBody = Ext.fly(target).findParent('.x-grid-rowbody-tr', null, false),
            mainRow = rowBody.previousSibling,
            h = gridView.getRecord(mainRow),
            targetEl = Ext.get(target);
    targetEl.update('<a onclick="remove(\''+data.patientData.id+'\');">'+data.patientData.formfieldname + '</a>,' + targetEl.dom.innerHTML);

    // This code removes HTML row from the control. 
var htmlNode = Ext.getCmp("patientView").el.down("#"+data.patientData.id);
htmlNode.remove();

    return true;
    } 
```

# android - 一张大图或四张图片用于飞溅

> ID：12988918
> 
> 赞同：0
> 
> 时间：2012-10-20T13:31:45.953
> 
> 标签：android, android-layout

哪种解决方案适合制作splashScreen？
1\. 一个大图像（通常适用于`xhdpi`设备）并设置`scaleType`为`fitxy`或其他我不知道的东西，
或者
2\. 制作 4 个图像并将它们放在 4 个具有以下名称的文件夹中：
`drawable-ldpi , drawable-mdpi , drawable-hdpi , drawable-xhdpi`？

还是另一种解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T13:35:27.983

我想说这真的取决于你拥有的 Splahscreen 图像的类型。有文字吗？（在这种情况下缩小可能看起来很糟糕）。这还取决于您是否希望减小*apk*的大小。

就个人而言，我宁愿使用最高密度的单个 Splashscreen 并让系统进行缩放（当然不要忘记在不同的设备上测试它并查看它的外观）。

**[编辑]**

至于 scaleType 我不推荐使用 FIT_XY ，因为它不保存纵横比（将水平而不是垂直缩放图像）。FIT_START、FIT_END、FIT_CENTER 可能不起作用，因为它们不会填满屏幕，这对启动画面很不利。

所以我认为 CENTER_CROP 可能是一个很好的解决方案，正如[文档](http://developer.android.com/reference/android/widget/ImageView.ScaleType.html)所说：

> 均匀缩放图像（保持图像的纵横比），使图像的两个尺寸（宽度和高度）都等于或大于视图的相应尺寸（减去填充）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T14:30:31.093

你放了三个分辨率的图像，然后 XMl 使用这个 android:adjustViewBounds=true 或编码使用这个 setAdjustViewBounds(true); 此编码显示质量好且尺寸合适的图像

# php - Zend Framework 2：获取应用程序根目录的路径

> ID：12988920
> 
> 赞同：3
> 
> 时间：2012-10-20T13:31:52.380
> 
> 标签：php, zend-framework2

如何获取应用程序根目录的路径。在 Zend Framework 1 中您可以使用常量 APPLICATION_PATH，我们如何在 Zend Framework 2 中获得它？谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-20T13:59:12.593

你不应该需要。如果您使用骨架应用程序，它会`chdir()`进入应用程序根目录；因此，将从该路径生成相对路径。如果您需要完全限定的路径，请调用`getcwd()`.

# php - Twitter 获取状态因附加参数而失败

> ID：12988921
> 
> 赞同：9
> 
> 时间：2012-10-20T13:31:53.190
> 
> 标签：php, twitter, oauth

**编辑：我回答了我自己的问题。我不知道在原始问题中表明这一点或只是自己回答和接受它的适当礼仪。**

如何添加其他参数以过滤掉转发和回复？

我尝试向 twitter 开发者论坛提交问题，但我认为我也会在此处提出问题以获得更好的结果。

我已使用此[答案](https://stackoverflow.com/questions/12916539/simplest-php-example-retrieving-user-timeline-with-twitter-api-version-1-1)中的示例代码来实现对状态的有效检索。[我想尝试使用我在 twitter dev api](https://dev.twitter.com/docs/api/1.1/get/statuses/user_timeline)上看到的参数过滤掉转发和回复，并从

```
$url = "https://api.twitter.com/1.1/statuses/user_timeline.json"; 
```

至

```
$url = "https://api.twitter.com/1.1/statuses/user_timeline.json?include_rts=false"; 
```

它返回错误 23“无法验证您”。

我的“猜测”是我不应该在基本 url 中包含附加参数，而是作为附加参数到示例代码被注释掉的 oauth 数组中。

```
// Make Requests
$header = array(buildAuthorizationHeader($oauth), 'Expect:');
$options = array( CURLOPT_HTTPHEADER => $header,
    //CURLOPT_POSTFIELDS => $postfields,
    CURLOPT_HEADER => false,
    CURLOPT_URL => $url,
    CURLOPT_RETURNTRANSFER => true,
    CURLOPT_SSL_VERIFYPEER => false); 
```

删除标记的完整示例代码。

```
<?php

function buildBaseString($baseURI, $method, $params) {
    $r = array();
    ksort($params);
    foreach($params as $key=>$value){
        $r[] = "$key=" . rawurlencode($value);
    }
    return $method."&" . rawurlencode($baseURI) . '&' . rawurlencode(implode('&', $r));
}

function buildAuthorizationHeader($oauth) {
    $r = 'Authorization: OAuth ';
    $values = array();
    foreach($oauth as $key=>$value)
        $values[] = "$key=\"" . rawurlencode($value) . "\"";
    $r .= implode(', ', $values);
    return $r;
}

//$url = "https://api.twitter.com/1.1/statuses/user_timeline.json";
$url = "https://api.twitter.com/1.1/statuses/user_timeline.json?include_rts=false";

$oauth_access_token = "removed";
$oauth_access_token_secret = "removed";
$consumer_key = "removed";
$consumer_secret = "removed";

$oauth = array( 'oauth_consumer_key' => $consumer_key,
                'oauth_nonce' => time(),
                'oauth_signature_method' => 'HMAC-SHA1',
                'oauth_token' => $oauth_access_token,
                'oauth_timestamp' => time(),
                'oauth_version' => '1.0');

$base_info = buildBaseString($url, 'GET', $oauth);
$composite_key = rawurlencode($consumer_secret) . '&' . rawurlencode($oauth_access_token_secret);
$oauth_signature = base64_encode(hash_hmac('sha1', $base_info, $composite_key, true));
$oauth['oauth_signature'] = $oauth_signature;

// Make Requests
$header = array(buildAuthorizationHeader($oauth), 'Expect:');
$options = array( CURLOPT_HTTPHEADER => $header,
                  //CURLOPT_POSTFIELDS => $postfields,
                  CURLOPT_HEADER => false,
                  CURLOPT_URL => $url,
                  CURLOPT_RETURNTRANSFER => true,
                  CURLOPT_SSL_VERIFYPEER => false);

$feed = curl_init();
curl_setopt_array($feed, $options);
$json = curl_exec($feed);
curl_close($feed);

$twitter_data = json_decode($json);

foreach ($twitter_data as $tweet)
{
    $text = $tweet->text;
    echo $text . "</br></br>";
}

?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T20:49:15.263

所以改变很简单。参数不属于主 url。url 只是基本 url，然后将 params 添加到 oauth 数组中，并将 params 额外添加到 $options 数组中的 url 中。

* * *

显示有两个参数，不包括转发和回复。

```
<?php

function buildBaseString($baseURI, $method, $params) {
    $r = array();
    ksort($params);
    foreach($params as $key=>$value){
        $r[] = "$key=" . rawurlencode($value);
    }
    return $method."&" . rawurlencode($baseURI) . '&' . rawurlencode(implode('&', $r));
}

function buildAuthorizationHeader($oauth) {
    $r = 'Authorization: OAuth ';
    $values = array();
    foreach($oauth as $key=>$value)
        $values[] = "$key=\"" . rawurlencode($value) . "\"";
    $r .= implode(', ', $values);
    return $r;
}

$url = "https://api.twitter.com/1.1/statuses/user_timeline.json";

$oauth_access_token = "removed";
$oauth_access_token_secret = "removed";
$consumer_key = "removed";
$consumer_secret = "removed";

$oauth = array( 'exclude_replies' => 'true',
                'include_rts' => 'false',
                'oauth_consumer_key' => $consumer_key,
                'oauth_nonce' => time(),
                'oauth_signature_method' => 'HMAC-SHA1',
                'oauth_token' => $oauth_access_token,
                'oauth_timestamp' => time(),
                'oauth_version' => '1.0');

$base_info = buildBaseString($url, 'GET', $oauth);
$composite_key = rawurlencode($consumer_secret) . '&' . rawurlencode($oauth_access_token_secret);
$oauth_signature = base64_encode(hash_hmac('sha1', $base_info, $composite_key, true));
$oauth['oauth_signature'] = $oauth_signature;

// Make Requests
$header = array(buildAuthorizationHeader($oauth), 'Expect:');
$options = array( CURLOPT_HTTPHEADER => $header,
                  //CURLOPT_POSTFIELDS => $postfields,
                  CURLOPT_HEADER => false,
                  CURLOPT_URL => $url . '?exclude_replies=true&include_rts=false',
                  CURLOPT_RETURNTRANSFER => true,
                  CURLOPT_SSL_VERIFYPEER => false);

$feed = curl_init();
curl_setopt_array($feed, $options);
$json = curl_exec($feed);
curl_close($feed);

$twitter_data = json_decode($json);

foreach ($twitter_data as $tweet)
{
    $text = $tweet->text;
    echo $text . "</br></br>";
}

?> 
```

# php - 谷歌+ API 不工作

> ID：12988926
> 
> 赞同：0
> 
> 时间：2012-10-20T13:32:19.433
> 
> 标签：php, json, google-plus

我的 google+ api 代码正在运行。突然我在下一行得到一个错误。任何帮助表示赞赏。

```
if (isset($_SESSION['access_token'])) {
$client->setAccessToken($_SESSION['access_token']);
} 
```

错误信息如下

```
 Warning: json_decode() expects parameter 1 to be string, array given in /opt/bitnami/apache2/htdocs/goo/src/auth/apiOAuth2.php on line 142 Fatal error: Uncaught exception 'apiAuthException' with message 'Could not json decode the access token' in /opt/bitnami/apache2/htdocs/goo/src/auth/apiOAuth2.php:144 Stack trace: #0 /opt/bitnami/apache2/htdocs/goo/src/apiClient.php(186): apiOAuth2->setAccessToken(Array) #1 /opt/bitnami/apache2/htdocs/goo/googlep.php(1196): apiClient->setAccessToken(Array) #2 {main} thrown in /opt/bitnami/apache2/htdocs/goor/src/auth/apiOAuth2.php on line 144 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T09:47:37.167

您的错误可能是由于`$_SESSION['access_token']`. 我曾经使用过 gplus 和 twitter api，他们都使用了那个变量`$_SESSION['access_token']`。

只需在你的谷歌加代码中修改`access_token`to`access_token_plus`或任何你喜欢的东西，这样你就可以避免重写冲突。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T13:34:06.527

前段时间我也有同样的错误。实际上这个函数 setAccessToken 只接受 json_encoded 字符串（简单地说你在用户认证时得到的 json 编码字符串，它具有访问令牌、刷新令牌、承载等）。您必须将该 json 编码字符串传递给此函数以设置访问令牌。$client = new Google_Client();

$token = $client->getAccessToken(); // 当 google 使用代码在身份验证后将用户重定向到您的重定向 uri 时获取令牌。// $token 将有 json 编码的字符串。

$client->setAccessToken($token); // 现在使用 $token 在此处设置访问令牌

如果您将数组或其他任何 json 编码字符串传递给 setAccessToken，您将收到此错误。

# android - 我如何从android中的用户那里获取时间和日期

> ID：12988931
> 
> 赞同：0
> 
> 时间：2012-10-20T13:32:42.567
> 
> 标签：android

> **可能重复：**
> [Android 是否有任何 API 提供日期时间作为用户的输入（startActivityForResult）？](https://stackoverflow.com/questions/12987008/has-android-any-api-to-provide-date-time-as-input-from-user-startactivityforres)

**我如何从android中的用户那里获取时间和日期，以便稍后将其与系统时间进行比较？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T13:43:43.230

您可以使用日期/时间选择器视图：

[时间选择器](http://developer.android.com/reference/android/widget/TimePicker.html)

[日期选择器](http://developer.android.com/reference/android/widget/DatePicker.html)

[选择器示例](http://developer.android.com/guide/topics/ui/controls/pickers.html)

然后与 Boe 描述的系统时间进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T13:36:21.970

您只需要从设备获取 unix 时间。

```
long l = (System.currentTimeMillis()/1000);
Data d = new Date(l);
d.toString(); 
```

这应该有帮助

# vb.net - 无法在 Visual Basic.net 中将 postgresql 查询显示为组合框

> ID：12988934
> 
> 赞同：3
> 
> 时间：2012-10-20T13:33:01.157
> 
> 标签：vb.net, visual-studio-2010, postgresql, postgresql-9.2

我有一个在 Postgresql 中完美执行的查询：

```
SELECT 
      matchid
    , f1.firstname
    , f1.lastname
    , f2.firstname
    , f2.lastname
FROM matches AS m
    INNER JOIN fighters AS f1
        ON f1.fighterid = m.fighteroneid
    INNER JOIN fighters AS f2
        ON f2.fighterid = m.fightertwoid 
```

它与战斗机一起显示一行，但是当我尝试在组合框中显示结果时，它显示为“System.Data.DataRow”而不是数据。

VB.NET 中的代码：

```
mySelectQuery = "SELECT f1.firstname, f1.lastname, f2.firstname, f2.lastname FROM matches AS m INNER JOIN fighters AS f1 ON f1.fighterid = m.fighteroneid INNER JOIN fighters AS f2 ON f2.fighterid = m.fightertwoid"

pgAdapter = New PgSqlDataAdapter(mySelectQuery, pgConnection)
    pgAdapter.Fill(dtMatches)

    With cboMatches
        .DisplayMember = "fighters"
        .ValueMember = "matchid"
        .DataSource = dtMatches
        .SelectedIndex = -1
    End With 
```

我尝试使用战斗机 m、f1、f2 作为显示成员，它总是返回相同的输出。

如果我将 .DataSource 移到 .DisplayMember 上方，我会收到错误消息：无法绑定到新的显示成员。参数名称：newDisplayMember。

先感谢您，

斯宾塞

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T13:38:23.180

ValueMember 和 DisplayMember 应该引用数据源的列名。
您没有任何分配的名称。
您可以尝试为 DisplayMember 分配一个名称，但您的查询不会产生任何 MatchID。

我不是 PostegreSQL 方面的专家，但是，您可以尝试以下方法来[汇总名称](http://www.postgresql.org/docs/current/static/functions-aggregate.html#FUNCTIONS-AGGREGATE-TABLE)

```
mySelectQuery = "SELECT m.MatchID, string_agg(f1.firstname, f1.lastname, ' - ', " + 
                "f2.firstname, f2.lastname, ' ') as Fighters " + 
                "FROM matches AS m INNER JOIN fighters AS f1 ON f1.fighterid = m.fighteroneid" +
                " INNER JOIN fighters AS f2 ON f2.fighterid = m.fightertwoid" 
```

然后使用

```
With cboMatches  
    .DisplayMember = "Fighters"  
    .ValueMember = "MatchID"  
    .DataSource = dtMatches  
    .SelectedIndex = -1  
End With 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T14:17:55.430

我最终使用了 COALESCE，因为 string_agg 不适用于没有 CASTS 的名称类型。

```
SELECT m.MatchID, COALESCE(f1.firstname || ' ' || f1.lastname || ' - ' || f2.firstname || ' ' ||  f2.lastname) as Fighters  
       FROM matches AS m INNER JOIN fighters AS f1 ON f1.fighterid = m.fighteroneid 
       INNER JOIN fighters AS f2 ON f2.fighterid = m.fightertwoid 
```

# hadoop - hadoop1.0.3 & nutch1.5.1 无法更新 crawlDB

> ID：12988939
> 
> 赞同：1
> 
> 时间：2012-10-20T13:33:33.643
> 
> 标签：hadoop, nutch

我尝试在我的服务器上部署 hadoop，然后使用[本教程](http://wiki.apache.org/nutch/NutchHadoopTutorial)构建nutch1.5.1 在 hadoop 上运行 nutch。我在日志文件中没有收到任何错误消息，但 crawlDB 无法更新任何 url，因此 crawlDB 始终具有 init url。

在我的开发环境中，我运行 org.apache.nutch.crawl.Crawl urls -dir crawl -depth 3 它工作正常。

在我的服务器端，我运行类似这样的脚本：

```
./runtime/deploy/bin/nutch crawl urls -dir crawl -depth 3 -topN 5 
```

我在 HDFS 中复制的 urls 文件。

我需要配置一些东西吗？

# c - 对`fprintf(stdout, ...)`和`fprintf(stderr, ...)`的调用是否都保证与多个线程不交错？

> ID：12988946
> 
> 赞同：2
> 
> 时间：2012-10-20T13:34:09.863
> 
> 标签：c, linux, multithreading, concurrency, multicore

假设我有两个线程打印一些东西（相对较长）到`stderr`或`stdout`，这两个流的函数是线程安全的，因为它们永远不会“交错”字符？因此，例如，如果我有“Hello, World”，我将永远不会得到“HHellllo,, WorldWorld”或其他任何交错？这适用于 x86、GCC、Linux > 3.0。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T14:37:03.710

我看了一下 glibc，每次调用`vfprintf`都会在流上调用 POSIX `flockfile`( `_IO_flockfile`) 和`funlockfile`( `_IO_funlockfile`)。

因此，调用中的字符不会与来自另一个线程的调用中的字符交错，因为只有一个线程可以保持`stdout`或锁定`stderr`。

不过，关于跨多个线程的多个调用的顺序，所有的赌注都没有了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T13:54:32.513

不会。即使在单线程程序中，由于不同的缓冲规则，您也可以进行交错。默认情况下，stdout 是行缓冲的，而 stderr 是非缓冲的。您可以通过以下方式使它们都不受缓冲：

```
 setvbuf(stdout, NULL, _IONBF, 0) 
```

另请参阅[Linux 上 C 中的 stdout 线程安全？](https://stackoverflow.com/q/467938/318716)，尤其是[R. 的](https://stackoverflow.com/a/3335444/318716)回答。还有 Jonathan Leffler 的[评论](https://stackoverflow.com/a/12989477/318716)。

**编辑：**默认情况下，stdout 将`fflush`在每行末尾或缓冲区已满时显示。后者可能发生在一行的中间。然后，如果 stdout 和 stderr 都具有相同的底层文件描述符，则输出 fprintf(stderr,... 可以插入到一行的中间。

但情况可能更糟。通常您希望将 stderr 和 stdout 都重定向到文件或管道。我系统上的手册页`setbuf(3)`说明：

> > 如果流引用终端（如标准输出通常那样），则它是行缓冲的。默认情况下，标准错误流 stderr 始终是无缓冲的。

所以在这种情况下，stdout 变成了*块*缓冲，实际上似乎几乎*每个*到 stderr 的输出都与 stdout 的输出交错。这可以通过添加来缓解：

```
 setlinebuf(stdout); 
```

或者通过使标准输出无缓冲。

# database - 识别关系模式的功能依赖关系

> ID：12988950
> 
> 赞同：2
> 
> 时间：2012-10-20T13:34:23.350
> 
> 标签：database

我需要识别关系的所有重要 FD - 学生（sid、名字、姓氏、状态、gpa、电子邮件）（电子邮件是唯一的）。

到目前为止，我找到了 sid->firstname,lastname,status,gpa,email 和 email->sid,firstname,lastname,status,gpa

我错过了什么吗？（​​顺便说一句，我被要求使用联合规则来组合尽可能多的 FD。）还要删除任何多余的 FD。

我正在检查一个属性和另一个属性，并推理找出是否存在非平凡的 FD。难道没有更有效的方法来解决这个问题，而不是将每个属性与其他所有属性进行比较？目前我只是通过使用真实世界的逻辑手动完成。

泰。

# iphone - pushViewController 但不希望视图出现

> ID：12988951
> 
> 赞同：0
> 
> 时间：2012-10-20T13:34:27.497
> 
> 标签：iphone

我使用代码推送视图控制器

```
[self.navigationController pushViewController:vViewController  animated:false]; 
```

但我更喜欢那个视图做一些事情但不显示使用，所以我在 vViewController 的 viewDidLoad 中写道

```
[self.view setFrame:CGRectMake(2000, 2000, self.view.bounds.size.width, self.view.bounds.size.height)]; 
```

但什么也没发生

欢迎任何评论

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T15:39:11.270

一个 viewController 控制一个视图。

如果您不想让视图与您推送的对象相关联，那么您不应该使用 viewController。

只需使用 NSObject。

使用 viewController 而不显示其视图似乎很奇怪。

# android - android Sherlock ActionBar 杀死资源

> ID：12988955
> 
> 赞同：1
> 
> 时间：2012-10-20T13:34:46.960
> 
> 标签：android, resources, actionbarsherlock

我想实现`Sherlock ActionBar`兼容性。一切似乎都很好，但是 Eclipse 在具有资源路径 - 、 等的每一行中都返回`R.id.###`错误`R.string.###`。

使用 Sherlock 的您是否遇到过这样的问题？你是怎么解决的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T13:41:40.637

检查您的导入，确保您使用的是正确的 R 类（例如，不是 android.R）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T13:44:16.707

确认您正在为 Android 4.0 或更高版本构建（属性|Android|项目构建目标）。尽管如此，您仍然可以在 Android 2.x 上运行该项目。

# mysql - MySQL 复制 - 如何清除从属服务器上的主服务器状态

> ID：12988956
> 
> 赞同：2
> 
> 时间：2012-10-20T13:34:48.767
> 
> 标签：mysql, database, database-replication, master-slave

我一直在迁移我们的数据库，因为它们对于旧服务器来说太大了。为此，我设置了主从复制，因此在过渡期间我们同时运行旧服务器和新服务器。

共有三个数据库服务器：

`A --> B --> C`

其中 A 是旧服务器，B 是新生产服务器，C 是备份服务器。A是主人，B是A的奴隶，也是主人，C是B的奴隶。

我想从 A 中删除数据库（如上所述，它对服务器来说太大了），因此使用`STOP SLAVE`. 我还可以使用 清除 B 在 A 的二进制日志文件中的位置`RESET SLAVE`。

但是，如果我`SHOW SLAVE STATUS`在 B 上做，它仍然显示 A 是主人。

如何清除B上的主人？有没有`CHANGE MASTER TO`我不知道的选项？有替代命令吗？

我已经查看了 MySQL 复制文档，并且没有任何这样的[sql 语句](http://dev.mysql.com/doc/refman/5.0/en/replication-slave-sql.html)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-07-11T07:44:04.323

试试看。

停止奴隶；
重置从机；
全部重置奴隶；

它将从奴隶中删除主人。

# content-management-system - 如何在 html 编辑器扩展器 ajax 文件上传事件中调整图像大小

> ID：12988958
> 
> 赞同：1
> 
> 时间：2012-10-20T13:35:02.927
> 
> 标签：content-management-system, webforms, ajaxcontroltoolkit

我让图像上传工作并保存到网络服务器上的文件夹中。我需要在上传之前调整图像大小，但是如何在 ajax 控制工具包上传程序开始上传过程之前获取字节数组。我知道我必须覆盖控件，我在哪里挂钩到上传事件？提前致谢。

我有调用方法来调整大小的代码；所以我想将字节数组返回给上传事件。

在处理 Yuriy 的答案之后。

添加答案中概述的代码后，我重新编译了控制工具包。我可以将 3 个属性添加到 HtmlEditorExtender 实例。保存图像的代码驻留在 OnUploadCompleted 事件中，但不调用 HtmlEditorExtender.cs 文件中的调整大小代码。使用 JustDecomplie，我可以看到 dll 在重新编译的工具包中发生了变化。我将工具包重新添加到 VS 2012 工具箱并重新创建了对 dll 的引用。我知道我已经接近让这个新功能正常工作，但我希望另一只手帮助我让调整大小功能正常工作。

```
protected void ajaxFileUpload_OnUploadComplete(object sender, AjaxControlToolkit.AjaxFileUploadEventArgs e)
{
    if (e.ContentType.Contains("jpg") || e.ContentType.Contains("gif")
        || e.ContentType.Contains("png") || e.ContentType.Contains("jpeg"))
    {
        Session["fileContentType_" + e.FileId] = e.ContentType;
        Session["fileContents_" + e.FileId] = e.GetContents();
    }

    string fullPath = "/ExtenderImages/" + e.FileName;

    // Save your File
    HtmlEditorExtender1.AjaxFileUpload.SaveAs(Server.MapPath(fullPath));

    e.PostedUrl = fullPath;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T20:28:12.020

您需要下载 AjaxControlToolkit 源并自定义`Server/AjaxControlToolkit/HtmlEditorExtender/HtmlEditorExtender.cs`文件。将以下属性添加到 HtmlEditorExtender 类：

```
[Browsable(true)]
[DefaultValue(false)]
public bool ResizeUploadedImages { get; set; }

[Browsable(true)]
[DefaultValue(int.MaxValue)]
public int UploadedImageMaxWidth { get; set; }

[Browsable(true)]
[DefaultValue(int.MaxValue)]
public int UploadedImageMaxHeight { get; set; } 
```

此外，修复 OnInit 方法如下：

```
/// <summary>
/// On Init add popup div and ajaxfileupload control to support Add image
/// </summary>
/// <param name="e">Event Arguments</param>
protected override void OnInit(EventArgs e)
{
    base.OnInit(e);
    if (!DesignMode)
    {
        // Check if EnableSanitization is enabled and sanitizer provider is not configured.
        if (EnableSanitization && sanitizerProvider == null)
        {
            throw new Exception("Sanitizer provider is not configured in the web.config file. If you are using the HtmlEditorExtender with a public website then please configure a Sanitizer provider. Otherwise, set the EnableSanitization property to false.");
        }

        HtmlGenericControl popupdiv = new HtmlGenericControl("div");
        popupdiv.Attributes.Add("Id", this.ClientID + "_popupDiv");
        popupdiv.Attributes.Add("style", "opacity: 0;");
        popupdiv.Attributes.Add("class", "popupDiv");

        ajaxFileUpload = new AjaxFileUpload();
        ajaxFileUpload.ID = this.ID + "_ajaxFileUpload";
        ajaxFileUpload.MaximumNumberOfFiles = 10;
        ajaxFileUpload.AllowedFileTypes = "jpg,jpeg,gif,png";
        ajaxFileUpload.Enabled = true;
        ajaxFileUpload.OnClientUploadComplete = "ajaxClientUploadComplete";

        if(ResizeUploadedImages)
        {
            ajaxFileUpload.UploadComplete += (sender, args) =>
                                                    {
                                                        var content = args.GetContents();
                                                        var resized = ResizeImage(content, UploadedImageMaxWidth, UploadedImageMaxHeight);
                                                        args.SetContents(resized);
                                                    };
        }

        if (ImageUploadComplete != null)
        {
            ajaxFileUpload.UploadComplete += ImageUploadComplete;
        }
        popupdiv.Controls.Add(ajaxFileUpload);

        HtmlGenericControl btnCancel = new HtmlGenericControl("div");
        btnCancel.Attributes.Add("Id", this.ClientID + "_btnCancel");
        btnCancel.Attributes.Add("style", "float: right; position:relative; padding-left: 20px; top:10px; width: 55px; border-color:black;border-style: solid; border-width: 1px;cursor:pointer;");
        btnCancel.Attributes.Add("float", "right");
        btnCancel.Attributes.Add("unselectable", "on");
        btnCancel.InnerText = "Cancel";
        popupdiv.Controls.Add(btnCancel);

        this.Controls.Add(popupdiv);
    }
} 
```

我使用此代码调整图像大小：

```
private byte[] ResizeImage(byte[] imageBytes, int maxWidth, int maxHeight)
{
    using (var memStream = new MemoryStream(imageBytes))
    {
        return ResizeImage(memStream, maxWidth, maxHeight);
    }
}

/// <summary>
/// Resizes images to the specified size.
/// </summary>
/// <param name="imageStream">The file stream.</param>
/// <param name="maxWidth">Maximum Width</param>
/// <param name="maxHeight">Maximum Height</param>
private byte[] ResizeImage(System.IO.Stream imageStream, int maxWidth, int maxHeight)
{
    byte[] result;
    try
    {
        using (System.Drawing.Bitmap originalBMP = new System.Drawing.Bitmap(imageStream))
        {
            // Calculate the new image dimensions
            int width = originalBMP.Width; //actual width
            int height = originalBMP.Height; //actual height
            int widthDiff = (width - maxWidth); //how far off maxWidth?
            int heightDiff = (height - maxHeight); //how far off maxHeight?

            //figure out which dimension is further outside the max size
            bool doWidthResize = (maxWidth > 0 && width > maxWidth && widthDiff > -1 && (widthDiff > heightDiff || maxHeight.Equals(0)));
            bool doHeightResize = (maxHeight > 0 && height > maxHeight && heightDiff > -1 && (heightDiff > widthDiff || maxWidth.Equals(0)));

            //only resize if the image is bigger than the max or where image is square, and the diffs are the same
            if (doWidthResize || doHeightResize || (width.Equals(height) && widthDiff.Equals(heightDiff)))
            {
                int iStart;
                Decimal divider;
                if (doWidthResize)
                {
                    iStart = width;
                    divider = Math.Abs((Decimal)iStart / (Decimal)maxWidth);
                    width = maxWidth;
                    height = (int)Math.Round((Decimal)(height / divider));
                }
                else
                {
                    iStart = height;
                    divider = Math.Abs((Decimal)iStart / (Decimal)maxHeight);
                    height = maxHeight;
                    width = (int)Math.Round((Decimal)(width / divider));
                }
            }

            using (System.Drawing.Bitmap newBMP = new System.Drawing.Bitmap(originalBMP, width, height))
            {
                using (System.Drawing.Graphics oGraphics = System.Drawing.Graphics.FromImage(newBMP))
                {
                    oGraphics.SmoothingMode = System.Drawing.Drawing2D.SmoothingMode.AntiAlias;
                    oGraphics.InterpolationMode = System.Drawing.Drawing2D.InterpolationMode.HighQualityBicubic;
                    oGraphics.DrawImage(originalBMP, 0, 0, width, height);
                    oGraphics.Save();
                }

                result = (new ImageConverter()).ConvertTo(newBMP, typeof(byte[])) as byte[];
            }
        }
    }
    catch (Exception)
    {
        result = null;
    }

    return result;
} 
```

顺便说一句，您还必须更改`Server/AjaxControlToolkit/AjaxFileUpload/AjaxFileUploadEventArgs`文件以允许更改上传的文件内容：您需要添加`SetContents`如下方法：

```
internal void SetContents(byte[] value)
{
    _contents = value;
} 
```

# python - 如何在 Python 中创建二维数组？

> ID：12988960
> 
> 赞同：0
> 
> 时间：2012-10-20T13:35:17.530
> 
> 标签：python

我想像这样在 python 中创建二维数组：

```
 n1 n2 n3 n4 n5

w1   1  4  0  1 10

w2   3  0  7  0  3

w3   0  12 9  5  4

w4   9  0  0  9  7 
```

其中 w1 w2... 是不同的词，而 n1 n2 n3 是不同的博客。
我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T14:28:00.923

假设每个博客中的文本都以字符串形式提供，并且您在 中提供了此类字符串的列表`blogs`，这就是您创建矩阵的方式。

```
import re
# Sample input for the following code.
blogs = ["This is a blog.","This is another blog.","Cats? Cats are awesome."]
# This is a list that will contain dictionaries counting the wordcounts for each blog
wordcount = []
# This is a list of all unique words in all blogs.
wordlist = []
# Consider each blog sequentially
for blog in blogs:
    # Remove all the non-alphanumeric, non-whitespace characters,
    # and then split the string at all whitespace after converting to lowercase.
    # eg: "That's not mine." -> "Thats not mine" -> ["thats","not","mine"]
    words = re.sub("\s+"," ",re.sub("[^\w\s]","",blog)).lower().split(" ")
    # Add a new dictionary to the list. As it is at the end,
    # it can be referred to by wordcount[-1]
    wordcount.append({})
    # Consider each word in the list generated above.
    for word in words:
        # If that word has been encountered before, increment the count
        if word in wordcount[-1]: wordcount[-1][word]+=1
        # Else, create a new entry in the dictionary
        else: wordcount[-1][word]=1
        # If it is not already in the list of unique words, add it.
        if word not in wordlist: wordlist.append(word)

# We now have wordlist, which has a unique list of all words in all blogs.
# and wordcount, which contains len(blogs) dictionaries, containing word counts.
# Matrix is the table that you need of wordcounts. The number of rows will be
# equal to the number of unique words, and the number of columns = no. of blogs.
matrix = []
# Consider each word in the unique list of words (corresponding to each row)
for word in wordlist:
    # Add as many columns as there are blogs, all initialized to zero.
    matrix.append([0]*len(wordcount))
    # Consider each blog one by one
    for i in range(len(wordcount)):
        # Check if the currently selected word appears in that blog
        if word in wordcount[i]:
            # If yes, increment the counter for that blog/column
            matrix[-1][i]+=wordcount[i][word]

# For printing matrix, first generate the column headings
temp = "\t"
for i in range(len(blogs)):
    temp+="Blog "+str(i+1)+"\t"

print temp
# Then generate each row, with the word at the starting, and tabs between numbers.

for i in range(len(matrix)):
    temp = wordlist[i]+"\t"
    for j in matrix[i]: temp += str(j)+"\t"
    print temp 
```

现在，将包含该单词在 blog 中出现`matrix[i][j]`的次数。`wordlist[i]``blogs[j]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T13:45:55.273

如果列表或字典中的元组不起作用，请考虑使用[pandas](http://pandas.pydata.org/)：

```
from pandas import *
In [554]: print DataFrame({'n1':[1,3,0,9], 'n2':[4,0,12,0], 'n3':[0,7,9,0], 'n4':[1,0,5,9], 'n5':[10,3,4,7]},index=['w1','w2','w3','w4'])
    n1  n2  n3  n4  n5
w1   1   4   0   1  10
w2   3   0   7   0   3
w3   0  12   9   5   4
w4   9   0   0   9   7 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T14:05:08.383

我根本不会创建任何列表，也不会创建二维数组，而是创建一个由 x 和 y 标头作为键的字典作为元组。如：

```
data["w1", "n1"] = 1 
```

这可以被认为是一种“稀疏矩阵”表示。根据您要对数据执行的操作，您可能还需要一个 dict 的 dict，其中外部 dict 的键是 xheader 或 yheader，而内部 dict 的键是相反的。

假设元组作为键表示，将您的数据表作为输入：

```
text = """\
     n1 n2 n3 n4 n5

w1   1  4  0  1 10

w2   3  0  7  0  3

w3   0  12 9  5  4

w4   9  0  0  9  7
"""

data = {}
lines = text.splitlines()
xheaders = lines.pop(0).split()
for line in lines:
    if not line.strip():
        continue
    elems = line.split()
    yheader = elems[0]
    for (xheader, datum) in zip(xheaders, elems[1:]):
        data[xheader, yheader] = int(datum)
print data
print sorted(data.items()) 
```

打印产生：

```
{('n3', 'w4'): 0, ('n4', 'w2'): 0, ('n2', 'w2'): 0, ('n1', 'w4'): 9, ('n3', 'w3'): 9, ('n2', 'w3'): 12, ('n3', 'w2'): 7, ('n2', 'w4'): 0, ('n5', 'w3'): 4, ('n2', 'w1'): 4, ('n4', 'w1'): 1, ('n5', 'w2'): 3, ('n5', 'w1'): 10, ('n4', 'w3'): 5, ('n4', 'w4'): 9, ('n1', 'w3'): 0, ('n1', 'w2'): 3, ('n5', 'w4'): 7, ('n1', 'w1'): 1, ('n3', 'w1'): 0}
[(('n1', 'w1'), 1), (('n1', 'w2'), 3), (('n1', 'w3'), 0), (('n1', 'w4'), 9), (('n2', 'w1'), 4), (('n2', 'w2'), 0), (('n2', 'w3'), 12), (('n2', 'w4'), 0), (('n3', 'w1'), 0), (('n3', 'w2'), 7), (('n3', 'w3'), 9), (('n3', 'w4'), 0), (('n4', 'w1'), 1), (('n4', 'w2'), 0), (('n4', 'w3'), 5), (('n4', 'w4'), 9), (('n5', 'w1'), 10), (('n5', 'w2'), 3), (('n5', 'w3'), 4), (('n5', 'w4'), 7)] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T15:06:02.440

一种方法是使用[numpy](http://numpy.scipy.org/ "麻木的")：

```
>>> from numpy import array
>>> array( [ (1,4,0,1,10), (3,0,7,0,3), (0,12,9,5,4), (9,0,0,9,7) ] )
array([[ 1,  4,  0,  1, 10],
   [ 3,  0,  7,  0,  3],
   [ 0, 12,  9,  5,  4],
   [ 9,  0,  0,  9,  7]]) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-21T07:16:33.247

如果你只是想要没有任何解析的二维数组，你可以这样写：

```
a = [
    [1, 4, 0, 1, 10],
    [3, 0, 7, 0, 3],
    [0, 12, 9, 5, 4],
    [9, 0, 0, 9, 7]
] 
```

# c# - 如何使用 ProtoBuf-Net 序列化继承的类

> ID：12988964
> 
> 赞同：31
> 
> 时间：2012-10-20T13:35:18.827
> 
> 标签：c#, serialization, protobuf-net

如果这是重复的，我很抱歉。我已经在几个地方搜索了我可能理解的答案，包括：

[序列化派生类时不包括 ProtoBuf.net 基类属性](https://stackoverflow.com/questions/6109868/protobuf-net-base-class-properties-is-not-included-when-serializing-derived-clas)

[使用 protobuf-net 序列化继承的类](https://stackoverflow.com/questions/9530787/serialize-inherited-classes-using-protobuf-net)

我很抱歉，但我并没有真正理解答案。我正在寻找一个更快更紧凑的二进制序列化程序，而 ProtoBuf 看起来可能是答案。我需要序列化一组都派生自一个基类的类。它们有很多，所以在提交编辑类代码之前，我运行了一个简单的测试。此外，我不想以任何可能影响反序列化使用 NET 二进制序列化程序生成的旧持久文件的方式修改类。

这是基类：

```
[ProtoContract]
    public class BaseClass
    {
        [ProtoMember(1)]
        public string Name
        {
            get; set;
        }
        [ProtoMember(2)]
        public int Age
        {
            get; set;
        }
    } 
```

这是派生类：

```
[ProtoContract]
    public class SubClass1 : BaseClass
    {
        [ProtoMember(3)]
        public string Town
        {
            get; set;
        }

        [ProtoMember(4)]
        public Sex Sex
        {
            get; set;
        }
    } 
```

这是序列化和反序列化的代码（直接取自入门指南

```
var person = new SubClass1 { Age = 25, Name = "Fred", Town = "Denbigh", Sex = Sex.Female };

            using (var file = File.Create(filename))
            {
                Serializer.Serialize(file, person);
            } 
```

并反序列化：

```
SubClass1 newPerson;
            using (var file = File.OpenRead(filename))
            {
                newPerson = Serializer.Deserialize<SubClass1>(file);
            }

            MessageBox.Show(newPerson.Name + 
                " : " + newPerson.Town + 
                " : " + newPerson.Age.ToString() + 
                " : " + newPerson.Sex); 
```

结果是“：Denbigh：0：女性”

不知何故，基类属性的值没有被序列化？我最初使用派生类的 ProtoMember 索引作为 1、2 对其进行了测试。我有点认为这行不通，所以选择了 3、4。似乎没有什么区别。在我的妄想症中，我使用标准 NET 二进制序列化程序运行了相同的测试并得到了预期的结果：“Fred：Denbigh：25：Female”

请问我错过了什么？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-20T13:50:23.727

您需要`ProtoInclude`在基类上使用该属性：

```
[ProtoContract]
[ProtoInclude(500, typeof(SubClass1 ))]
public class BaseClass
{ 
```

id arg（上例中为 500）对于该类应该是唯一的。有关更多信息，请参阅[本文](http://wallaceturner.com/serialization-with-protobuf-net)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-23T09:59:50.757

我知道它已经很老了，但可能会对某人有所帮助。在某些情况下，您可以通过重新定义子类型中的基本属性来解决此问题：

```
[ProtoContract]
public class SubClass1 : BaseClass
{
    [ProtoMember(1)]
    public string BaseName
    {
        get{return base.Name;}
        set{base.Name = value;}
    }

    ...

    [ProtoMember(3)]
    public string Town
    {
        get; set;
    }

    [ProtoMember(4)]
    public Sex Sex
    {
        get; set;
    }
} 
```

# wordpress - 如果我使用 pie-registration 插件，如何进行自动登录？

> ID：12988972
> 
> 赞同：0
> 
> 时间：2012-10-20T13:36:21.563
> 
> 标签：wordpress

我在 wordpress 上有网站，我使用 pie-registration 添加用户密码字段。
现在我想做自动登录，但我不知道该怎么做。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-14T09:49:31.650

注册后是否可以自动登录：

1.  在函数 showForm() 搜索中转到 pie-registration/pie-register.php

if(isset($_POST['success']) && $_POST['success'] != "")

和做

```
if(isset($_POST['success']) && $_POST['success'] != ""){

            $output .= '<p class="piereg_message">'.apply_filters('piereg_messages',__($_POST['success'],"piereg")).'</p>';

            $this->afterRegisterPage();

        } 
```

2.after函数afterLoginPage()添加

```
function afterRegisterPage()

    {

        $option = get_option("pie_register_2");

        $this->checkAutoLogin();

        if(isset($_GET['redirect_to']) and $_GET['redirect_to'] != ""){

            wp_redirect($_GET['redirect_to']);

        }elseif($option['after_login'] > 0)

        {

            wp_safe_redirect(get_permalink($option['after_login']));

        }else{

            wp_redirect(site_url());

        }

        exit;

    } 
```

3.函数checkLogin()添加后

函数 checkAutoLogin()

```
{

    global $errors, $wp_session;

    $errors = new WP_Error();

    $option = get_option('pie_register_2');

    if(empty($_POST['username']) || empty($_POST['password']))

    {

        $errors->add('login-error',apply_filters("piereg_Invalid_username_or_password",__('Invalid username or password.','piereg')));

    }

    else

    {

        $error_found = 0;

        if($option['capthca_in_login'] == 1){

            $settings       =  get_option("pie_register_2");

            $privatekey     = $settings['captcha_private'] ;

            require_once(PIEREG_DIR_NAME.'/recaptchalib.php');

            $resp = recaptcha_check_answer ($privatekey,

                                            $_SERVER["REMOTE_ADDR"],

                                            $_POST["recaptcha_challenge_field"],

                                            $_POST["recaptcha_response_field"]);

            if (!$resp->is_valid) {

                $errors->add('login-error',apply_filters("Invalid_Security_Code",__('Invalid Security Code','piereg')));

                $error_found++;

            }

        }

        elseif($option['capthca_in_login'] == 2){

            if(isset($_POST['piereg_math_captcha_login']))//Login form in Page

            {

                $piereg_cookie_array =  $_COOKIE['piereg_math_captcha_Login_form'];

                $piereg_cookie_array = explode(",",$piereg_cookie_array);

                $cookie_result1 = (intval(base64_decode($piereg_cookie_array[0])) - 12);

                $cookie_result2 = (intval(base64_decode($piereg_cookie_array[1])) - 786);

                $cookie_result3 = (intval(base64_decode($piereg_cookie_array[2])) + 5);

                if( ($cookie_result1 == $cookie_result2) && ($cookie_result3 == $_POST['piereg_math_captcha_login'])){

                }

                else{

                    $errors->add('login-error',apply_filters("Invalid_Security_Code",__('Invalid Security Code','piereg')));

                    $error_found++;

                }

            }

            elseif(isset($_POST['piereg_math_captcha_login_widget']))//Login form in widget

            {

                $piereg_cookie_array =  $_COOKIE['piereg_math_captcha_Login_form_widget'];

                $piereg_cookie_array = explode(",",$piereg_cookie_array);

                $cookie_result1 = (intval(base64_decode($piereg_cookie_array[0])) - 12);

                $cookie_result2 = (intval(base64_decode($piereg_cookie_array[1])) - 786);

                $cookie_result3 = (intval(base64_decode($piereg_cookie_array[2])) + 5);

                if( ($cookie_result1 == $cookie_result2) && ($cookie_result3 == $_POST['piereg_math_captcha_login_widget'])){

                }

                else{

                    $errors->add('login-error',apply_filters("Invalid_Security_Code",__('Invalid Security Code','piereg')));

                    $error_found++;

                }

            }else{

                $errors->add('login-error',apply_filters("Invalid_Security_Code",__('Invalid Security Code','piereg')));

                $error_found++;

            }

        }

        if($error_found == 0){

            $creds = array();

            $creds['user_login']    = $_POST['username'];

            $creds['user_password'] = $_POST['password'];

            $creds['remember']      = (isset($_POST['rememberme']))?$_POST['rememberme']:"";

            if(isset($_POST['social_site']) and $_POST['social_site'] == "true" )

            {

                require_once( ABSPATH . WPINC . '/user.php' );

                require_once( ABSPATH . WPINC . '/pluggable.php' );

                wp_set_auth_cookie($_POST['user_id_social_site']);

                $user = get_userdata($_POST['user_id_social_site']);

            }

            else

            {

                $user = wp_signon( $creds, false );

            }

            //$this->check_user_activation();

            if ( is_wp_error($user))

            {

                $user_login_error = $user->get_error_message();

                if(strpos(strip_tags($user_login_error),'Invalid username',5) > 6)

                {

                    $user_login_error = apply_filters('pie_invalid_username_password_msg_txt','<strong>'.ucwords(__("error","piereg")).'</strong>: '.__("Invalid username","piereg").'. <a href="'.$this->pie_lostpassword_url().'" title="'.__("Password Lost and Found","piereg").'">'.__("Lost your password?","piereg").'</a>');

                }else if(strpos(strip_tags($user_login_error),'password you entered',9) > 10)

                {

                    $user_login_error = apply_filters('pie_invalid_user_password_msg_txt','<strong>'.ucwords(__("error","piereg")).'</strong>: '.__("The password you entered for the username","piereg").' <strong>'.$_POST['username'].'</strong> '.__("is incorrect","piereg").'. <a href="'.$this->pie_lostpassword_url().'" title="'.__("Password Lost and Found","piereg").'">'.__("Lost your password?","piereg").'</a>');

                }

                $errors->add('login-error',apply_filters("piereg_login_error",$user_login_error));

            }

            else

            {

                if(in_array("administrator",(array)$user->roles)){

                    do_action("piereg_admin_login_before_redirect_hook",$user);

                    if(isset($_GET['redirect_to']) and $_GET['redirect_to'] != ""){

                        wp_redirect($_GET['redirect_to']);

                        exit;

                    }

                    wp_safe_redirect(admin_url());

                    exit;

                }

                else

                {

                    $active = get_user_meta($user->ID,"active",true);

                    //Delete User after grace Period

                    if($active == "0")//If not active

                    {

                        $delete_user = true;

                        if($this->deleteUsers($user->ID,$user->user_email,$user->user_registered)){

                            $errors->add("login-error",apply_filters("piereg_your_account_has_no_longer_exist",__("Your account has no longer exist.")));

                            $delete_user = false;

                        }

                        if($delete_user){

                            wp_logout();

                            $errors->add('login-error',apply_filters("piereg_your_account_is_not_activated",__('Your account is not activated!.','piereg')));

                        }

                    }elseif(empty($active))

                    {

                        //apply_filters('get_avatar',array($this,'custom_avatars'),$user->ID,"29");

                        do_action("piereg_user_login_before_redirect_hook",$user);

                        $this->afterLoginPage();

                        exit;

                    }

                    else{

                        //apply_filters('get_avatar',array($this,'custom_avatars'),$user->ID,"29");

                        do_action("piereg_user_login_before_redirect_hook",$user);

                        $this->afterLoginPage();

                        exit;

                    }

                }

            }

        }

    }

} 
```

我希望能成为你的帮助，你理解我。

# python - Django CMS - 无法通过 cmsplugin_filer_image 上传图像

> ID：12988973
> 
> 赞同：6
> 
> 时间：2012-10-20T13:36:25.960
> 
> 标签：python, django, django-admin, django-cms, django-file-upload

我在 django cms 2.3.3 上进行本地安装时遇到问题：我已经通过 pip 在单独的 virtualenv 中安装了它。接下来我按照 settings.py 配置的教程，我启动了服务器。然后在管理员中我创建了一个页面（主页），我尝试通过 cmsplugin_filer_image 在占位符中添加一个图像，但上传似乎不起作用。这是我的settings.py：

```
# Django settings for cms1 project.
# -*- coding: utf-8 -*-
import os
gettext = lambda s: s
PROJECT_PATH = os.path.abspath(os.path.dirname(__file__))

DEBUG = True
TEMPLATE_DEBUG = DEBUG

ADMINS = (
    # ('Your Name', 'your_email@example.com'),
)

MANAGERS = ADMINS

DATABASES = {
    'default': {
    'ENGINE': 'django.db.backends.postgresql_psycopg2', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
    'NAME': 'cms1',                      # Or path to database file if using sqlite3.
    'USER': 'cms',                      # Not used with sqlite3.
    'PASSWORD': 'cms',                  # Not used with sqlite3.
    'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.
    'PORT': '',                      # Set to empty string for default. Not used with sqlite3.
    }
}

# Local time zone for this installation. Choices can be found here:
# http://en.wikipedia.org/wiki/List_of_tz_zones_by_name
# although not all choices may be available on all operating systems.
# In a Windows environment this must be set to your system time zone.
TIME_ZONE = 'Europe/Rome'

# Language code for this installation. All choices can be found here:
# http://www.i18nguy.com/unicode/language-identifiers.html
LANGUAGE_CODE = 'it-it'

SITE_ID = 1

# If you set this to False, Django will make some optimizations so as not
# to load the internationalization machinery.
USE_I18N = True

# If you set this to False, Django will not format dates, numbers and
# calendars according to the current locale.
USE_L10N = True

# If you set this to False, Django will not use timezone-aware datetimes.
USE_TZ = True

# Absolute filesystem path to the directory that will hold user-uploaded files.
# Example: "/home/media/media.lawrence.com/media/"
MEDIA_ROOT = os.path.join(PROJECT_PATH, "media")

# URL that handles the media served from MEDIA_ROOT. Make sure to use a
# trailing slash.
# Examples: "http://media.lawrence.com/media/", "http://example.com/media/"
MEDIA_URL = '/media/'

# Absolute path to the directory static files should be collected to.
# Don't put anything in this directory yourself; store your static files
# in apps' "static/" subdirectories and in STATICFILES_DIRS.
# Example: "/home/media/media.lawrence.com/static/"
STATIC_ROOT = os.path.join(PROJECT_PATH, "static")
STATIC_URL = "/static/"

# Additional locations of static files
STATICFILES_DIRS = (
     os.path.join(PROJECT_PATH, "static_auto"),
    # Put strings here, like "/home/html/static" or "C:/www/django/static".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
)

# List of finder classes that know how to find static files in
# various locations.
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
#    'django.contrib.staticfiles.finders.DefaultStorageFinder',
)

# Make this unique, and don't share it with anybody.
SECRET_KEY = '^c2q3d8w)f#gk%5i)(#i*lwt%lm-!2=(*1d!1cf+rg&amp;-hqi_9u'

# List of callables that know how to import templates from various sources.
TEMPLATE_LOADERS = (
    'django.template.loaders.filesystem.Loader',
    'django.template.loaders.app_directories.Loader',
#     'django.template.loaders.eggs.Loader',
)

MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'cms.middleware.multilingual.MultilingualURLMiddleware',
    'cms.middleware.page.CurrentPageMiddleware',
    'cms.middleware.user.CurrentUserMiddleware',
    'cms.middleware.toolbar.ToolbarMiddleware',
    # Uncomment the next line for simple clickjacking protection:
    # 'django.middleware.clickjacking.XFrameOptionsMiddleware',
)

ROOT_URLCONF = 'cms1.urls'

# Python dotted path to the WSGI application used by Django's runserver.
WSGI_APPLICATION = 'cms1.wsgi.application'

TEMPLATE_DIRS = (
    os.path.join(PROJECT_PATH, "templates"),
    # Put strings here, like "/home/html/django_templates" or "C:/www/django/templates".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
)

CMS_TEMPLATES = (
    ('template_1.html', 'Template One'),
    ('template_2.html', 'Template Two'),
)

TEMPLATE_CONTEXT_PROCESSORS = (
    'django.contrib.auth.context_processors.auth',
    'django.core.context_processors.i18n',
    'django.core.context_processors.request',
    'django.core.context_processors.media',
    'django.core.context_processors.static',
    'cms.context_processors.media',
    'sekizai.context_processors.sekizai',
)

LANGUAGES = [
    ('it', 'Italiano'),
    ('en', 'English'),
]

INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'cms', #django CMS itself
    'mptt', #utilities for implementing a modified pre-order traversal tree
    'menus', #helper for model independent hierarchical website navigation
    'south', #intelligent schema and data migrations
    'sekizai', #for javascript and css management
    #'cms.plugins.file',
    'cms.plugins.flash',
    'cms.plugins.googlemap',
    'cms.plugins.link',
    #'cms.plugins.picture',
    'cms.plugins.snippet',
    'cms.plugins.teaser',
    'cms.plugins.text',
    #'cms.plugins.video',
    'cms.plugins.twitter',
    'filer',
    'cmsplugin_filer_file',
    'cmsplugin_filer_folder',
    'cmsplugin_filer_image',
    'cmsplugin_filer_teaser',
    'cmsplugin_filer_video',
    'easy_thumbnails',
    'PIL',

    # Uncomment the next line to enable the admin:
    'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    # 'django.contrib.admindocs',
)

# A sample logging configuration. The only tangible logging
# performed by this configuration is to send an email to
# the site admins on every HTTP 500 error when DEBUG=False.
# See http://docs.djangoproject.com/en/dev/topics/logging for
# more details on how to customize your logging configuration.
LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'filters': {
    'require_debug_false': {
        '()': 'django.utils.log.RequireDebugFalse'
    }
    },
    'handlers': {
    'mail_admins': {
        'level': 'ERROR',
        'filters': ['require_debug_false'],
        'class': 'django.utils.log.AdminEmailHandler'
    }
    },
    'loggers': {
    'django.request': {
        'handlers': ['mail_admins'],
        'level': 'ERROR',
        'propagate': True,
    },
    }
} 
```

当我尝试上传图像时，在剪贴板部分我没有缩略图，只有一条“未定义”消息：

![在此处输入图像描述](../Images/2317d53fb20d4787ec5b4db3b7ec7341.png)

这是尝试上传时的运行服务器控制台：

```
[20/Oct/2012 15:15:56] "POST /admin/filer/clipboard/operations/upload/?qqfile=29708_1306856312320_7706073_n.jpg HTTP/1.1" 500 248133
[20/Oct/2012 15:15:56] "GET /it/admin/filer/folder/unfiled_images/undefined HTTP/1.1" 301 0
[20/Oct/2012 15:15:56] "GET /it/admin/filer/folder/unfiled_images/undefined/ HTTP/1.1" 404 1739 
```

此外，这是项目文件系统：

```
cms1
├── cms1
│   ├── __init__.py
│   ├── __init__.pyc
│   ├── media
│   │   └── filer_public
│   │       └── 2012
│   │           └── 10
│   │               └── 20
│   │                   ├── 29708_1306856312320_7706073_n_1.jpg
│   │                   ├── 29708_1306856312320_7706073_n_2.jpg
│   │                   ├── 29708_1306856312320_7706073_n_3.jpg
│   │                   ├── 29708_1306856312320_7706073_n_4.jpg
│   │                   ├── 29708_1306856312320_7706073_n_5.jpg
│   │                   ├── 29708_1306856312320_7706073_n_6.jpg
│   │                   ├── 29708_1306856312320_7706073_n_7.jpg
│   │                   ├── 29708_1306856312320_7706073_n.jpg
│   │                   └── torrent-client-macosx.jpg
│   ├── settings.py
│   ├── settings.pyc
│   ├── static
│   ├── static_auto
│   ├── static_manual
│   ├── templates
│   │   ├── base.html
│   │   ├── template_1.html
│   │   └── template_2.html
│   ├── urls.py
│   ├── urls.pyc
│   ├── wsgi.py
│   └── wsgi.pyc
└── manage.py 
```

因此文件已上传，但 cms 无法访问它们。这里有一个[类似的问题](https://stackoverflow.com/questions/9885312/undefined-uploads-using-django-cms-cmsplugin-filer-file-and-cmsplugin-filer-imag)，但对我没有多大帮助。在这个问题上对我有任何帮助都会非常有帮助。

谢谢，卢克

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-24T22:50:58.017

此错误是因为您安装了不支持 JPEG/PNG 的 PIL。您将需要安装以下软件包

```
sudo apt-get install python-imaging  python-dev libjpeg8 libjpeg8-dev libfreetype6 libfreetype6-dev 
```

然后卸载PIL`pip uninstall PIL`

我建议安装枕头而不是使用`pip install pillow`. 安装后请务必阅读日志，它应该说支持JPEG和PNG

![控制台日志](../Images/5de4e909a9a2f57506bc2115f9fcafcc.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-22T22:43:59.117

对我来说同样的问题 - 我同时安装了 PIL 和 Pillow，当两者都加载时，问题就发生了，但仅在某些虚拟机上。我发现在我的本地开发 Mac 和本地 Virtualbox CentOS VM 上一切正常，但错误发生在 Amazon CentOS 64 位机器上。我无法让它在所有三个上都与 Pillow 一起工作（使用 Pillow 2.2.2 和 PIL 1.1.7）。

我从 requirements.txt 中取出了 Pillow，而只使用了 PIL。我首先使用这个厨师食谱来安装 PIL，这在所有亚马逊和所有经过测试的盒子上都运行良好：

```
#!/usr/bin/env bash
sudo apt-get build-dep python-imaging
sudo ln -s -f /usr/lib/`uname -i`-linux-gnu/libfreetype.so /usr/lib/
sudo ln -s -f /usr/lib/`uname -i`-linux-gnu/libjpeg.so /usr/lib/
sudo ln -s -f /usr/lib/`uname -i`-linux-gnu/libz.so /usr/lib/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T11:53:52.987

Stackoverflow 时间空间中的“老”问题，但我遇到了完全相同的问题。

bazaretas为我[指明](https://stackoverflow.com/users/390674/bazaretas)了正确的方向，但我在设置中错过了一点。

我安装了 Pillow 而不是 PIL，但我的其他需求包之一依赖于 PIL（在其 setup.py 中），因此 pip 也安装了 PIL。但是 PIL 在分发和 virtualenv 上有问题，所以它没有抓住开发包来支持所有格式。

对我来说，被指控的包裹是 xhtml2pdf。

检查您的依赖关系或找到一种方法在您的 venv 中预先安装 PIL（即[here](http://www.sandersnewmedia.com/why/2012/04/16/installing-pil-virtualenv-ubuntu-1204-precise-pangolin/)、[here](https://stackoverflow.com/questions/4435016/install-pil-on-virtualenv-with-libjpeg)或[there](https://stackoverflow.com/questions/2485295/the-problem-with-installing-pil-using-virtualenv-or-buildout)）。

# c# - nHibernate 与 SQLite 格式日期

> ID：12988976
> 
> 赞同：1
> 
> 时间：2012-10-20T13:37:14.583
> 
> 标签：c#, sqlite, nhibernate

我将 nHibernate + FluentNHibernate 与 SQLite 数据库一起使用。所有日期都以“YYYY-MM-DD HH:MM:SS”格式存储为文本

我如何指示 nHibernate（或 sqlite 驱动程序？？？）截断时间部分并为某些字段以 'YYYY-MM-DD' 格式存储日期（并为其他字段存储完整日期）？

或者我如何指示将所有日期存储为整数？

我担心空间使用，因为日期在数据库中占用了大量空间，并且日期上也有索引，所以我需要让它们占用尽可能少的空间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T09:59:20.553

如果您手动转换`DateTime`为`String`，我看不出将字符串格式替换为`YYYY-MM-DD`.

如果您让 NHibernate 执行此转换，那么您可以`UserType`像这样创建自定义 NHibernate：

```
public abstract class DateTimeAsStringType : IUserType
{
    public object Assemble(object cached, object owner)
    {
        return cached;
    }

    public object DeepCopy(object value)
    {
        return value;
    }

    public object Disassemble(object value)
    {
        return value;
    }

    public bool Equals(object x, object y)
    {
        if (ReferenceEquals(x, y))
            return true;

        if (x == null && y == null)
            return false;

        return x.Equals(y);
    }

    public int GetHashCode(object x)
    {
        return x.GetHashCode();
    }

    public bool IsMutable
    {
        get { return false; }
    }

    public object NullSafeGet(System.Data.IDataReader rs, string[] names, object owner)
    {
        var serialized = NHibernateUtil.String.NullSafeGet(rs, names[0]) as string;

        if (string.IsNullOrEmpty(serialized))
            return null;

        return Deserialize(serialized);
    }

    protected abstract DateTime Deserialize(string value);
    protected abstract string Serialize(DateTime value);

    public void NullSafeSet(System.Data.IDbCommand cmd, object value, int index)
    {
        if (value == null)
            NHibernateUtil.String.NullSafeSet(cmd, DBNull.Value, index);
        else
            NHibernateUtil.String.NullSafeSet(cmd, Serialize((DateTime)value), index);
    }

    public object Replace(object original, object target, object owner)
    {
        return original;
    }

    public Type ReturnedType
    {
        get { return typeof(DateTime); }
    }

    public NHibernate.SqlTypes.SqlType[] SqlTypes
    {
        get { return new[] { NHibernateUtil.String.SqlType }; }
    }
}

public class TruncatedDateTimeAsStringType : DateTimeAsStringType
{
    private const string Format = "yyyy-MM-dd";

    protected override string Serialize(DateTime value)
    {
        return value.ToString(Format, CultureInfo.InvariantCulture);
    }

    protected override DateTime Deserialize(string value)
    {
        return DateTime.ParseExact(value, Format, CultureInfo.InvariantCulture, DateTimeStyles.None);
    }
}

public class FullDateTimeAsStringType : DateTimeAsStringType
{
    private const string Format = "yyyy-MM-dd hh:mm:ss";

    protected override string Serialize(DateTime value)
    {
        return value.ToString(Format, CultureInfo.InvariantCulture);
    }

    protected override DateTime Deserialize(string value)
    {
        return DateTime.ParseExact(value, Format, CultureInfo.InvariantCulture, DateTimeStyles.None);
    }
} 
```

`DateTime`并使用`TruncatedDateTimeAsStringType`或映射您的属性`FullDateTimeAsStringType`：

```
<property name="TruncatedDateTime" type="Your.Namespance.TruncatedDateTimeAsStringType, Your.Assembly" />
<property name="NotTruncatedDateTime" type="Your.Namespance.FullDateTimeAsStringType, Your.Assembly" /> 
```

# php - 使用 ajax 响应作为函数的参数

> ID：12988980
> 
> 赞同：1
> 
> 时间：2012-10-20T13:38:06.183
> 
> 标签：php, javascript, ajax, google-visualization

我正在尝试使用 ajax 响应作为使用谷歌图表绘制图表的函数的参数。

这是JS代码：

```
data.addRows([['One', 5], ['Two', 2]]); 
```

如您所见，该参数包含几个方括号，其中包含“图表的单位”名称及其值。一切正常。但是，当我将 ajax responseText 作为参数传递时，它根本不起作用。

```
data.addRows(xmlhttp.responseText); 
```

PHP 代码返回 json_encode($value)，其中 $value 变量是这个字符串：[[one, 5], [two, 2]]

所以我得到的结果是：

```
"[['one', 5], ['two', 2]]" 
```

顺便提一句。我还尝试从 JS 代码中的字符串中删除双引号 - 仍然没有结果。

怎么了？萤火虫给了我一些奇怪的错误：给 addRows 的参数必须是数字或数组......

我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T16:06:40.440

`data.addRows`期待一个真正的 JavaScript 数组，而您正在向它传递一个字符串。为了将字符串转换为数组，您应该使用 JSON 解析器。但是，由于单引号，您从服务器获得的响应不是有效的 JSON。

脚步：

1.  更新您的服务器以发送有效的 JSON 响应，其中包括发送[正确的 mime 类型](https://stackoverflow.com/questions/477816/the-right-json-content-type) `application/json`。如果您使用像 jQuery 这样可以为您进行 JSON 解析的 ajax 库，那么遵循标准会很有帮助。

2.  使用类似的东西解析`responseText`自己`JSON.parse(...)`或使用像 jQuery 这样的 ajax 库来为你做这件事。无论哪种方式，您都需要将`responseText`字符串转换为真正的 JavaScript 数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T15:52:55.123

你应该可以做到`data.addRows(JSON.parse(xmlhttp.responseText));`。但是，单引号会给您带来问题，因此您需要以某种方式告诉 PHP 使用双引号作为键。

您*可以*执行类似`data.addRows(JSON.parse(xmlhttp.responseText.replace(/'/, "\"")))`;` 的操作，但最好确保 PHP 使用正确的引号。

# c# - 是否有一种烘焙方式来做 Orderby 或者这仍然是 EF4.X 的最先进技术

> ID：12988981
> 
> 赞同：0
> 
> 时间：2012-10-20T13:38:17.053
> 
> 标签：c#, entity-framework

[http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)

我希望将 EF 与 jqGrid 一起使用并尽量减少管道。因此，我感兴趣的是找到一个类似于 Scott 建议的通用解决方案。我很好奇这是否已被纳入 EF，或者这仍然是最好的方法。

具体来说： entity.Orderby("fieldName");

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T21:31:34.400

安装动态表达式 API NuGet 包。这将允许您将查询参数表示为字符串（以 Scott Gu 显示的方式）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T13:58:16.603

Linq 中没有任何内容。该[`OrderBy`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.orderby.aspx)方法仍然将 a`Func<>`作为第一个参数。

但是，[`ObjectQuery.OrderBy`](http://msdn.microsoft.com/en-us/library/bb358828%28v=vs.110%29.aspx)DOES 采用字符串参数，因此如果您使用的是 EF 并且可以使用`ObjectQuery`对象而不是`IEnumerable`/`IQueryable`接口，那么它可能是可能的。

# android - Android CTS 测试可以在多台设备上并行运行

> ID：12988983
> 
> 赞同：5
> 
> 时间：2012-10-20T13:38:18.953
> 
> 标签：android, cts

Android CTS 文档如下所述。

“要在多个设备上对计划测试进行分片：-

```
run cts -plan CTS --shards <number of shards> 
```

然后我就这样做了。但我做不到。当然 PC 可以识别多个设备，但不能在它们上运行。

如果你知道怎么做，请帮助我！！！

* * *

对不起。上述评论没有详细描述。

我告诉你我做了什么。

首先，我从以下谷歌网站下载了 Android 4.0.3 R3 兼容性测试套件 (CTS)。 [http://source.android.com/compatibility/downloads.html](http://source.android.com/compatibility/downloads.html)

然后我在我的 PC 中构建了 CTS 和 SDK，并将 2 个设备连接到我的 PC。

我执行了如下命令。

1.  ./android-cts/tool/cts-tradefed
2.  运行 -plan CTS --shards 2

因此，显示了以下消息。

cts-tf>10-23 18:xx:xx I/unknown_devices：创建结果目录 2012.10.xx._xx.xx.xx Android CTS 4.0.3_r3 I/Device Manager：检测到新设备 a61xxxxx I/Device Manager：检测到新设备de0xxxx

但在那之后，没有显示任何消息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T11:09:34.470

分片时，您不会在控制台上看到测试状态输出。您可以使用“-l debug”选项来“运行 cts”来查看调试信息。

例如：

```
run cts --plan CTS --shards 2 -l debug 
```

如果您在控制台中输入上述命令，您可以看到您的 2 台设备上正在进行的所有活动。就像安装 testrunner apk、运行测试和在测试后卸载 apk。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-20T06:28:50.483

添加已连接设备的设备 ID。

获取设备 ID 的命令：`adb devices`

更新设备 ID 并运行以下命令：

`run -plan CTS --shards 2 --serial <device id1> --serial <device id2>`

# php - 对于给定的网络邮件地址，简单的 php 邮件功能不成功

> ID：12988985
> 
> 赞同：1
> 
> 时间：2012-10-20T13:38:33.277
> 
> 标签：php, email

我在客户网站的根目录中有一个简单的 PHP 脚本：

```
<?php  
      $to = "info@xxxxxxxxxx.it"; 
      $header = "From: {$to}";
      $subject = "Hi!"; $body = "Hi,\n\nHow are you?"; 
      if (mail($to, $subject, $body, $header)) 
      { 
          echo("<p>ok</p>"); 
      } 
      else { 
          echo ("<p>no invio</p>"); 
      } 
      echo '<br/>'; 
?> 
```

事实是，当我测试自己的电子邮件地址（例如 GMail）时，如果我使用客户的 Webmail 进行测试，它会失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T13:46:07.120

@user 如果您发送到 gmail、yahoo 等，您必须添加“回复：”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T01:50:13.133

它基本上在这一部分：

```
$header = "From: {$to}"; 
```

现在设置`From:`标头是不好的做法，除非该域归您自己所有，因为大多数邮件系统会拒绝不是从合法服务器发送的电子邮件。

最好不要`From:`单独使用并使用`Reply-To:`。

例如，如果您添加`"From: xxx@gmail.com"`邮件标头，Google 的服务器将检查您的服务器是否有权代表 gmail 用户发送电子邮件。他们通过检查该电子邮件域的[SPF记录来执行此操作。](http://en.wikipedia.org/wiki/Sender_Policy_Framework)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T01:31:59.953

你有`$to`内从。

```
 $to = "info@xxxxxxxxxx.it"; 
 $header = "From: {$to}"; 
```

我想，这就是为什么只有你能收到它的原因。

您应该`$from`以相同的方式定义，然后更改标题。

```
 $header = "From: {$from}"; 
```

[http://us2.php.net/manual/en/function.mail.php](http://us2.php.net/manual/en/function.mail.php)上有足够的例子

# opencl - 在 OpenCL 中，平台、上下文和设备之间有什么区别？

> ID：12988986
> 
> 赞同：16
> 
> 时间：2012-10-20T13:38:45.797
> 
> 标签：opencl, gpgpu, gpu

我是 OpenCL 编程的新手。设备、上下文和平台之间有什么区别？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-10-21T08:38:03.013

平台是特定的 OpenCL 实现，例如 AMD APP、NVIDIA 或 Intel OpenCL。上下文是一个平台，该平台具有一组可用的设备。设备是执行计算的实际处理器（CPU、GPU 等）。

因此，如果您使用 Intel 平台，则该平台的有效上下文将包括 CPU 设备。而如果您使用 NVIDIA 平台，则有效的上下文将包括 NVIDIA GPU 设备。

# objective-c - Xcode 中架构的重复符号

> ID：12988987
> 
> 赞同：40
> 
> 时间：2012-10-20T13:39:04.130
> 
> 标签：objective-c, xcode, duplicates, symbols

这是我在编译时收到的错误消息...

```
Ld /Users/ilia3546/Library/Developer/Xcode/DerivedData/MasterDetail-fhgogwnbpzovbtaskgecptdnvgjs/Build/Products/Debug-iphonesimulator/MasterDetail.app/MasterDetail normal i386
    cd /Users/ilia3546/Проекты/iDecide
    setenv IPHONEOS_DEPLOYMENT_TARGET 5.0
    setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch i386 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk -L/Users/ilia3546/Library/Developer/Xcode/DerivedData/MasterDetail-fhgogwnbpzovbtaskgecptdnvgjs/Build/Products/Debug-iphonesimulator -F/Users/ilia3546/Library/Developer/Xcode/DerivedData/MasterDetail-fhgogwnbpzovbtaskgecptdnvgjs/Build/Products/Debug-iphonesimulator -filelist /Users/ilia3546/Library/Developer/Xcode/DerivedData/MasterDetail-fhgogwnbpzovbtaskgecptdnvgjs/Build/Intermediates/MasterDetail.build/Debug-iphonesimulator/MasterDetail.build/Objects-normal/i386/MasterDetail.LinkFileList -Xlinker -objc_abi_version -Xlinker 2 -fobjc-link-runtime -Xlinker -no_implicit_dylibs -mios-simulator-version-min=5.0 -framework UIKit -framework Foundation -framework CoreGraphics -o /Users/ilia3546/Library/Developer/Xcode/DerivedData/MasterDetail-fhgogwnbpzovbtaskgecptdnvgjs/Build/Products/Debug-iphonesimulator/MasterDetail.app/MasterDetail

duplicate symbol _main in:
    /Users/ilia3546/Library/Developer/Xcode/DerivedData/MasterDetail-fhgogwnbpzovbtaskgecptdnvgjs/Build/Intermediates/MasterDetail.build/Debug-iphonesimulator/MasterDetail.build/Objects-normal/i386/main-E0BAF2CA88EDEE32.o
duplicate symbol _OBJC_IVAR_$_MasterDetailAppDelegate._window in:
    /Users/ilia3546/Library/Developer/Xcode/DerivedData/MasterDetail-fhgogwnbpzovbtaskgecptdnvgjs/Build/Intermediates/MasterDetail.build/Debug-iphonesimulator/MasterDetail.build/Objects-normal/i386/MasterDetailAppDelegate-C2C06F734ECE2E36.o
duplicate symbol _OBJC_IVAR_$_MasterDetailAppDelegate._navigationController in:
    /Users/ilia3546/Library/Developer/Xcode/DerivedData/MasterDetail-fhgogwnbpzovbtaskgecptdnvgjs/Build/Intermediates/MasterDetail.build/Debug-iphonesimulator/MasterDetail.build/Objects-normal/i386/MasterDetailAppDelegate-C2C06F734ECE2E36.o
duplicate symbol _OBJC_IVAR_$_MasterDetailAppDelegate._splitViewController in:
    /Users/ilia3546/Library/Developer/Xcode/DerivedData/MasterDetail-fhgogwnbpzovbtaskgecptdnvgjs/Build/Intermediates/MasterDetail.build/Debug-iphonesimulator/MasterDetail.build/Objects-normal/i386/MasterDetailAppDelegate-C2C06F734ECE2E36.o
duplicate symbol _OBJC_CLASS_$_MasterDetailAppDelegate in:
    /Users/ilia3546/Library/Developer/Xcode/DerivedData/MasterDetail-fhgogwnbpzovbtaskgecptdnvgjs/Build/Intermediates/MasterDetail.build/Debug-iphonesimulator/MasterDetail.build/Objects-normal/i386/MasterDetailAppDelegate-C2C06F734ECE2E36.o
duplicate symbol _OBJC_METACLASS_$_MasterDetailAppDelegate in:
    /Users/ilia3546/Library/Developer/Xcode/DerivedData/MasterDetail-fhgogwnbpzovbtaskgecptdnvgjs/Build/Intermediates/MasterDetail.build/Debug-iphonesimulator/MasterDetail.build/Objects-normal/i386/MasterDetailAppDelegate-C2C06F734ECE2E36.o
duplicate symbol _OBJC_IVAR_$_MasterDetailDetailViewController._detailItem in:
    /Users/ilia3546/Library/Developer/Xcode/DerivedData/MasterDetail-fhgogwnbpzovbtaskgecptdnvgjs/Build/Intermediates/MasterDetail.build/Debug-iphonesimulator/MasterDetail.build/Objects-normal/i386/MasterDetailDetailViewController-B3C32DC7B1BE4E38.o
duplicate symbol _OBJC_IVAR_$_MasterDetailDetailViewController._TitleOfDetail in:
    /Users/ilia3546/Library/Developer/Xcode/DerivedData/MasterDetail-fhgogwnbpzovbtaskgecptdnvgjs/Build/Intermediates/MasterDetail.build/Debug-iphonesimulator/MasterDetail.build/Objects-normal/i386/MasterDetailDetailViewController-B3C32DC7B1BE4E38.o
duplicate symbol _OBJC_IVAR_$_MasterDetailDetailViewController._detailDescriptionLabel in:
    /Users/ilia3546/Library/Developer/Xcode/DerivedData/MasterDetail-fhgogwnbpzovbtaskgecptdnvgjs/Build/Intermediates/MasterDetail.build/Debug-iphonesimulator/MasterDetail.build/Objects-normal/i386/MasterDetailDetailViewController-B3C32DC7B1BE4E38.o
duplicate symbol _OBJC_IVAR_$_MasterDetailDetailViewController._masterPopoverController in:
    /Users/ilia3546/Library/Developer/Xcode/DerivedData/MasterDetail-fhgogwnbpzovbtaskgecptdnvgjs/Build/Intermediates/MasterDetail.build/Debug-iphonesimulator/MasterDetail.build/Objects-normal/i386/MasterDetailDetailViewController-B3C32DC7B1BE4E38.o
duplicate symbol _OBJC_IVAR_$_MasterDetailDetailViewController.WebView in:
    /Users/ilia3546/Library/Developer/Xcode/DerivedData/MasterDetail-fhgogwnbpzovbtaskgecptdnvgjs/Build/Intermediates/MasterDetail.build/Debug-iphonesimulator/MasterDetail.build/Objects-normal/i386/MasterDetailDetailViewController-B3C32DC7B1BE4E38.o
duplicate symbol _OBJC_CLASS_$_MasterDetailDetailViewController in:
    /Users/ilia3546/Library/Developer/Xcode/DerivedData/MasterDetail-fhgogwnbpzovbtaskgecptdnvgjs/Build/Intermediates/MasterDetail.build/Debug-iphonesimulator/MasterDetail.build/Objects-normal/i386/MasterDetailDetailViewController-B3C32DC7B1BE4E38.o
duplicate symbol _OBJC_METACLASS_$_MasterDetailDetailViewController in:
    /Users/ilia3546/Library/Developer/Xcode/DerivedData/MasterDetail-fhgogwnbpzovbtaskgecptdnvgjs/Build/Intermediates/MasterDetail.build/Debug-iphonesimulator/MasterDetail.build/Objects-normal/i386/MasterDetailDetailViewController-B3C32DC7B1BE4E38.o
duplicate symbol _OBJC_IVAR_$_MasterDetailMasterViewController._detailViewController in:
    /Users/ilia3546/Library/Developer/Xcode/DerivedData/MasterDetail-fhgogwnbpzovbtaskgecptdnvgjs/Build/Intermediates/MasterDetail.build/Debug-iphonesimulator/MasterDetail.build/Objects-normal/i386/MasterDetailMasterViewController-A4C5EC1C14AE6E3A.o
duplicate symbol _OBJC_IVAR_$_MasterDetailMasterViewController._Controller1 in:
    /Users/ilia3546/Library/Developer/Xcode/DerivedData/MasterDetail-fhgogwnbpzovbtaskgecptdnvgjs/Build/Intermediates/MasterDetail.build/Debug-iphonesimulator/MasterDetail.build/Objects-normal/i386/MasterDetailMasterViewController-A4C5EC1C14AE6E3A.o
duplicate symbol _OBJC_IVAR_$_MasterDetailMasterViewController.listOfDecide in:
    /Users/ilia3546/Library/Developer/Xcode/DerivedData/MasterDetail-fhgogwnbpzovbtaskgecptdnvgjs/Build/Intermediates/MasterDetail.build/Debug-iphonesimulator/MasterDetail.build/Objects-normal/i386/MasterDetailMasterViewController-A4C5EC1C14AE6E3A.o
duplicate symbol _OBJC_IVAR_$_MasterDetailMasterViewController.listOfDecideOpis in:
    /Users/ilia3546/Library/Developer/Xcode/DerivedData/MasterDetail-fhgogwnbpzovbtaskgecptdnvgjs/Build/Intermediates/MasterDetail.build/Debug-iphonesimulator/MasterDetail.build/Objects-normal/i386/MasterDetailMasterViewController-A4C5EC1C14AE6E3A.o
duplicate symbol _OBJC_IVAR_$_MasterDetailMasterViewController.listOfGraph in:
    /Users/ilia3546/Library/Developer/Xcode/DerivedData/MasterDetail-fhgogwnbpzovbtaskgecptdnvgjs/Build/Intermediates/MasterDetail.build/Debug-iphonesimulator/MasterDetail.build/Objects-normal/i386/MasterDetailMasterViewController-A4C5EC1C14AE6E3A.o
duplicate symbol _OBJC_IVAR_$_MasterDetailMasterViewController.listOfGraphOpis in:
    /Users/ilia3546/Library/Developer/Xcode/DerivedData/MasterDetail-fhgogwnbpzovbtaskgecptdnvgjs/Build/Intermediates/MasterDetail.build/Debug-iphonesimulator/MasterDetail.build/Objects-normal/i386/MasterDetailMasterViewController-A4C5EC1C14AE6E3A.o
duplicate symbol _OBJC_IVAR_$_MasterDetailMasterViewController.listOfAbout in:
    /Users/ilia3546/Library/Developer/Xcode/DerivedData/MasterDetail-fhgogwnbpzovbtaskgecptdnvgjs/Build/Intermediates/MasterDetail.build/Debug-iphonesimulator/MasterDetail.build/Objects-normal/i386/MasterDetailMasterViewController-A4C5EC1C14AE6E3A.o
duplicate symbol _OBJC_IVAR_$_MasterDetailMasterViewController.listOfAboutOpis in:
    /Users/ilia3546/Library/Developer/Xcode/DerivedData/MasterDetail-fhgogwnbpzovbtaskgecptdnvgjs/Build/Intermediates/MasterDetail.build/Debug-iphonesimulator/MasterDetail.build/Objects-normal/i386/MasterDetailMasterViewController-A4C5EC1C14AE6E3A.o
duplicate symbol _OBJC_CLASS_$_MasterDetailMasterViewController in:
    /Users/ilia3546/Library/Developer/Xcode/DerivedData/MasterDetail-fhgogwnbpzovbtaskgecptdnvgjs/Build/Intermediates/MasterDetail.build/Debug-iphonesimulator/MasterDetail.build/Objects-normal/i386/MasterDetailMasterViewController-A4C5EC1C14AE6E3A.o
duplicate symbol _OBJC_METACLASS_$_MasterDetailMasterViewController in:
    /Users/ilia3546/Library/Developer/Xcode/DerivedData/MasterDetail-fhgogwnbpzovbtaskgecptdnvgjs/Build/Intermediates/MasterDetail.build/Debug-iphonesimulator/MasterDetail.build/Objects-normal/i386/MasterDetailMasterViewController-A4C5EC1C14AE6E3A.o
ld: 23 duplicate symbols for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

appdelegate.m -

```
#import "MasterDetailAppDelegate.h"

#import "MasterDetailMasterViewController.h"

#import "MasterDetailDetailViewController.h"

@implementation MasterDetailAppDelegate

@synthesize window = _window;
@synthesize navigationController = _navigationController;
@synthesize splitViewController = _splitViewController;

- (void)dealloc
{
    [_window release];
    [_navigationController release];
    [_splitViewController release];
    [super dealloc];
}

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    // Override point for customization after application launch.
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
            MasterDetailMasterViewController *masterViewController = [[[MasterDetailMasterViewController alloc] initWithNibName:@"MasterDetailMasterViewController_iPhone" bundle:nil] autorelease];
            self.navigationController = [[[UINavigationController alloc] initWithRootViewController:masterViewController] autorelease];
            self.window.rootViewController = self.navigationController; 
    } else {
        MasterDetailMasterViewController *masterViewController = [[[MasterDetailMasterViewController alloc] initWithNibName:@"MasterDetailMasterViewController_iPad" bundle:nil] autorelease];
        UINavigationController *masterNavigationController = [[[UINavigationController alloc] initWithRootViewController:masterViewController] autorelease];

        MasterDetailDetailViewController *detailViewController = [[[MasterDetailDetailViewController alloc] initWithNibName:@"MasterDetailDetailViewController_iPad" bundle:nil] autorelease];
        UINavigationController *detailNavigationController = [[[UINavigationController alloc] initWithRootViewController:detailViewController] autorelease];
        self.splitViewController = [[[UISplitViewController alloc] init] autorelease];
        self.splitViewController.delegate = detailViewController;
        self.splitViewController.viewControllers = [NSArray arrayWithObjects:masterNavigationController, detailNavigationController, nil];

        self.window.rootViewController = self.splitViewController;
    }
    [self.window makeKeyAndVisible];
    return YES;
}

- (void)applicationWillResignActive:(UIApplication *)application
{
    /*
     Sent when the application is about to move from active to inactive state. This can occur for certain types of temporary interruptions (such as an incoming phone call or SMS message) or when the user quits the application and it begins the transition to the background state.
     Use this method to pause ongoing tasks, disable timers, and throttle down OpenGL ES frame rates. Games should use this method to pause the game.
     */
}

- (void)applicationDidEnterBackground:(UIApplication *)application
{
    /*
     Use this method to release shared resources, save user data, invalidate timers, and store enough application state information to restore your application to its current state in case it is terminated later. 
     If your application supports background execution, this method is called instead of applicationWillTerminate: when the user quits.
     */
}

- (void)applicationWillEnterForeground:(UIApplication *)application
{
    /*
     Called as part of the transition from the background to the active state; here you can undo many of the changes made on entering the background.
     */
}

- (void)applicationDidBecomeActive:(UIApplication *)application
{
    /*
     Restart any tasks that were paused (or not yet started) while the application was inactive. If the application was previously in the background, optionally refresh the user interface.
     */
}

- (void)applicationWillTerminate:(UIApplication *)application
{
    /*
     Called when the application is about to terminate.
     Save data if appropriate.
     See also applicationDidEnterBackground:.
     */
}

@end 
```

主.m -

```
//
//  main.m
//  MasterDetail
//
//  Created by Wei-Meng Lee on 3/9/11.
//  Copyright (c) 2011 __MyCompanyName__. All rights reserved.
//

#import <UIKit/UIKit.h>

#import "MasterDetailAppDelegate.h"

int main(int argc, char *argv[])
{
    @autoreleasepool {
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([MasterDetailAppDelegate class]));
    }
} 
```

我检查了导入 .m 文件而不是 .h，但一切都正确。

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2013-01-17T11:13:09.280

检查您的导入文件，您可能正在导入一个**.m**文件。

```
#import "TimeModel.m" 
```

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2012-10-20T13:42:52.493

在您的构建阶段，检查您是否多次编译同一个文件。即如果您搜索 main.m 它应该只返回一个结果。

如果这不是问题，您可以将 main.m 中的代码添加到问题中吗？

* * *

## 回答 #3

> 赞同：43
> 
> 时间：2015-06-04T09:51:10.687

虽然以下不是 OP 案例中的原因，但它是我的，所以我会在这里分享给任何面临同样错误的人：

**如果您在所有全局变量上都收到链接器错误，您可能需要`extern`在头文件中添加它们的声明。**

缺少 extern 是否会产生此问题取决于构建设置，更具体地说，取决于“Apple LLVM - 代码生成”下的“No Common Blocks”（GCC_NO_COMMON_BLOCKS，-fno-common）。如果设置为 yes（这是 Xcode 较新版本中的默认设置），您将在没有`extern`.

**为什么是外部？**

`extern`关键字使它只是一个声明（即不是一个定义），因为它是一个头文件，这就是你想要的。一些编译器允许它不使用 extern 并且仍然“做正确的事情”，但不鼓励省略 extern。这就是为什么较新版本的 Xcode 默认启用警告的原因。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-10-06T21:10:38.020

这是 Xcode 7.0 中出现重复符号错误的情况，以防其他人遇到这种情况

```
.h file

NSUserDefaults *defaults; // <----placing this above the @interface caused the issue

@interface someViewController

//... 
```

改成

```
.h file

@interface someViewController

{
   NSUserDefaults *defaults;
}

//... 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-05-26T11:19:06.490

当您在具有不同实现的不同文件中具有相同的@interface 时，也可能发生这种情况。例如，您有一个 Player 类，在 Player.h/m 文件中，并且您有一个 Match 类 (Match.h/m)，并且匹配是在两个玩家之间，但不是前面提到的 Player。

播放器.h

```
@interface Player : NSObject
@property (nonatomic) NSUInteger _id;
@property (nonatomic, strong) NSString* firstName;
@property (nonatomic, strong) NSString* lastName;
@property (nonatomic, strong) NSString* username;
@end 
```

匹配.h

```
@class Player

@interface Match : NSObject
@property (nonatomic, strong) Player* player1;
@property (nonatomic, strong) Player* player2;
@property (nonatomic) NSUInteger matchId;
@end

@interface Player : NSObject
@property (nonatomic, strong) NSString* nickName;
@property (nonatomic, strong) NSString* point;
@property (nonatomic, strong) NSNumber* lastMove;
@end 
```

在这种情况下，编译器会看到两个不同的 Player 类实现。您需要将 Match.h 文件中的 Player 类重构为 MatchPlayer。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-11-07T04:18:09.610

我遇到了一个`typedef`未添加到的问题，`enum`并且在 2 个文件之间出现了重复符号错误。

```
enum <name> {
 ...
} <name>; 
```

通过在修复重复符号`typedef`之前添加。`enum`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-06-12T09:43:48.973

就我而言，问题是 .m 文件被包含两次。

问题： ![在此处输入图像描述](../Images/2551437d72b83fd998ad0291fd86e799.png)

原因： ![在此处输入图像描述](../Images/e5161dd765fbdfec9407881e3bbf58d7.png)

解决方案：只留下一个文件参考。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-01-05T21:21:23.347

就我而言，我有相同的实体名称和 NSManagedObject 名称，并且未能在数据模型检查器中将实体类 Codegen 设置为“手动/无”。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-07-29T19:03:35.293

如果这对其他人有帮助，那就是我的情况：

我想在 1 个头文件和实现文件中声明 2 个小类。

2 类正在使用 1 类

当我收到错误时，情况是这样的：
头文件 - 类 1 的接口+实现，类 2 的接口
实现文件 -类 2 的实现

在我将类 1 的实现从头文件移动到实现文件后，没有错误并且问题解决了：
头文件 - 类 1 的接口，类 2 的接口
实现文件 - 类 1 的实现，类 2 的实现

# cloud - 混合云与联合云

> ID：12988988
> 
> 赞同：3
> 
> 时间：2012-10-20T13:39:27.017
> 
> 标签：cloud

混合云和联合云之间有什么区别吗？

我也读了很多“Intercloud”这个词。我将其理解为几个用于特殊目的的巨大联合云的愿景。那正确吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-28T17:47:14.813

作为[云计算](http://content.dell.com/us/en/enterprise/cloud-computing)随着云计算的不断普及，人们也在寻找使云适应自己个人或组织需求的方法。随着越来越多的变化发生，人们正试图决定他们应该使用什么样的云，他们必须做出的决定之一包括是使用混合云还是联合云，或者是否使用公共云。越来越多的人提出的一个问题是，联邦云和混合云之间是否存在差异，因为它们似乎越来越可互换。联合云是多个内部和外部云的组合，它们组合在一起以满足个人或企业的需求。就像在联邦的政治学定义中一样，

同样，混合云使用“云”的方式是组织或企业在内部管理一些云资源，而其他资源则来自外部资源。组织可以使用公共云服务来存档旧数据，但他们可以使用内部云存储来存储更新的客户信息。使用混合云系统可以将可能不太重要的东西存储在成本较低的云计算机公共部门，同时在内部维护更敏感的信息和数据。通过将不太敏感的材料保留在内部，可以更好地保护信息免受外人入侵。

最终，联合云和混合云之间没有区别。这两个术语都讨论了内部和外部云的连接以实现一个目标。联合云一词的使用时间更长，但随着时间的推移，混合云一词被更多地用于描述完成相同的任务。术语以及混合和联合只是描述相同过程或现有实践的不同名称，以使其更普遍地被从业者理解。

[http://content.dell.com/us/en/enterprise/cloud-computing](http://content.dell.com/us/en/enterprise/cloud-computing)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-01T02:20:06.860

两者都是相互连接的云方法。基本区别是：云联盟是一个志愿者组织。云知道它是组织的一部分。通过这种方式，云尊重一份内部 SLA 合同。混合用户是一个用户组织，当他们有吸引力或必要时，公共资源是公共资源，换句话说，公共云不知道组织的那个部分是多云的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-29T11:14:32.037

联邦云是一种描述由需求引起的解决方案而不是安全或策略的解决方案，其中混合云更适合采用。例如，由于 SLA、可扩展性、备份或灾难恢复以及在 Heroku 中托管您的应用程序，您可以在 Microsoft Azure (SQL Azure) 中使用 MS SQL 作为服务，因为它是一个 Ruby 应用程序，您真的很喜欢在 Heroku 上进行开发。您还可以使用 Google 中的 Big Table 和 Azure 中的 Hadoop，对 Amazon 进行备份。这是一个联合云。如果您拥有自己的私有云，其中包含（比如说）客户数据库或医疗数据，并且您不希望或不能将其放到公共云中，但使用公共云进行分析工作负载没有问题 - 它是一种混合云。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-05T11:42:21.370

混合云是由不同的云模型（私有云和公共云）形成的云计算。而联邦云是由不同的云模型（公共云和私有云）以及相同的云（联合私有云）形成的。无论是混合云还是联合云都具有相同的概念。通过联合起来实现特定目标，两者都成为一个单一的云。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-23T15:37:12.380

是的，有。简而言之，联合云是一种提供来自不同供应商的不同服务的模型。换句话说，您可以将其称为多云环境。云计算最近取得了长足的进步，因此这两种模型都变得更加“丰富”，让我们这么说吧。因此，通过使用 API，云客户端现在可以使用不同的服务供应商来调整他们的云计划——根据他们的需要一次完成。

混合云有点不同。从技术上讲，混合云将私有云接口与公共云接口相结合——主要由大型组织使用，公共云概念使用公共云概念中的少量组件。这个概念的一个很好的例子是 Stratoscale，我的组织已经使用了一段时间了。它们是混合云的一个很好的例子，提供“整体”云环境。

# jquery - 悬停在一个图像上，改变另一个。多次首次悬停会影响一个更改的图像

> ID：12988990
> 
> 赞同：0
> 
> 时间：2012-10-20T13:39:35.243
> 
> 标签：jquery, hover

我在产品页面上有一个产品色调列表。

页面上还有一张大图。

我希望能够将鼠标悬停在颜色阴影列表中的一个小缩略图上，并将其显示在大图片上。

我有以下代码，但这不正确。它没有改变它，而是改变了`mainpic`它一直悬停在上面的图像......

```
$('img[data-hover]').hover(function () {
    $(this).attr('tmp', $(this).attr('src')).attr('src', $(this).attr('data-hover')).attr('data-hover', $(this).attr('tmp')).removeAttr('tmp');

}).each(function () {
    $('<img />').attr('src', $(this).attr('data-hover'));
});​ 
```

[这里](http://jsfiddle.net/Uc9ch/7/)有一个 JS Fiddle ，但正如您所见，它没有按预期工作。

而不是悬停影响较大的图片，它会影响悬停在同一图像上。

现场直播是为了更清楚地理解我的意思：

[红宝石星期二创意网站](http://www.rubytuesdaycreative.co.uk/testsite/snood.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T13:44:13.003

检查这个**演示**：http: [//jsfiddle.net/Uc9ch/8/](http://jsfiddle.net/Uc9ch/8/)

**代码：**

```
var mi = $('#mainImage');

// this code will do the rest for you
$('img[data-hover]').hover(function () {
    mi.data('prevsrc', mi.attr('src')).attr('src', $(this).attr('data-hover'));
}, function() {
    mi.attr('src', mi.data('prevsrc'));     
}); 
```

* * *

更新：

您的页面上似乎有几个问题。

a) 你没有用 . 关闭脚本标签`</script>`。查看源代码，您会看到最后一个脚本标签（包含上述代码的标签）尚未关闭。

b) 上面的代码需要进入一个`$(document).ready(function() { <insert-above-code-here> });`块内，以确保 DOM 已准备好并已加载。

即应该是

```
<script>
$(document).ready(function() { 

    var mi = $('#mainImage');

    // this code will do the rest for you
    $('img[data-hover]').hover(function () {
        mi.data('prevsrc', mi.attr('src')).attr('src', $(this).attr('data-hover'));
    }, function() {
        mi.attr('src', mi.data('prevsrc'));     
    });

}
</script> 
```

# diff - GTFS 主要与次要更新

> ID：12988991
> 
> 赞同：5
> 
> 时间：2012-10-20T13:39:48.210
> 
> 标签：diff, updates, gtfs

我们每天都从多个来源下载新的[GTFS](https://developers.google.com/transit/gtfs/reference)（基本上是 CSV 文件的 zip）数据，以查看是否有更新。现在，我们只检查 zip 本身是否不同，如果不同则更新。

问题是，根据某些消息来源，GTFS 每天都在变化。这对我们来说是个问题，因为这会触发许多设备上的离线数据更新。

大多数时候，更新是次要的（更改了站点名称、不同的 ID 但相同的内容等）。我想将主要更新（时间表更改，新路线）与次要更新区分开来。Diff 工具本身是无用的，因为每个 GTFS 可以具有相同的内容，但在 CSV 中具有不同的 ID 和/或顺序。

有没有人有同样的问题？有没有可以提供帮助的工具？

# iphone - 多视图控制器中的 iAd 示例

> ID：12988992
> 
> 赞同：2
> 
> 时间：2012-10-20T13:39:53.680
> 
> 标签：iphone, objective-c, view, uiviewcontroller, iad

我注意到 iAd 套件中的示例标签栏应用程序只有一个视图控制器，并且实际的标签栏过程是编码的。我已经有一个选项卡栏应用程序，有三个选项卡，每个选项卡都有自己的视图控制器。我在哪里可以找到一个共享横幅视图的示例，它实际上有多个视图控制器？我不要视频教程！如果没有示例，那么您能否给我说明或网站链接（没有视频！）告诉我如何将共享横幅视图实现到多个视图控制器中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T14:47:28.877

嗨，如果您仅针对 iphone 和纵向模式进行开发，那么您可以在窗口上放置广告，并且您可以使用 appDelegate 从任何地方访问该广告视图。

# python - 如何使用 yum python API 列出、添加和删除存储库？

> ID：12988993
> 
> 赞同：8
> 
> 时间：2012-10-20T13:40:02.480
> 
> 标签：python, repository, package, fedora, yum

如何使用 yum python API（在 fedora 17 下）搜索已安装的存储库、添加和删除它们。我搜索了大量的网站，找到了如何管理包（比如这里： http: [//phacker.org/2008/06/20/yum-python-api/](http://phacker.org/2008/06/20/yum-python-api/)），但我还没有找到如何处理的地方存储库）。

例如，我希望能够使用 python yum API 获得与以下相同的结果：

```
yum repolist
yum localinstall --nogpgcheck http://download1.rpmfusion.org/free/fedora/rpmfusion-free-release-stable.noarch.rpm http://download1.rpmfusion.org/nonfree/fedora/rpmfusion-nonfree-release-stable.noarch.rpm` 
```

（最后一个类似于`yum-config-manager --add-repo; yum-config-manager --enable`）

等等

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-13T08:26:01.380

你可以使用[eulfedora](https://pypi.python.org/pypi/eulfedora)

> eulfedora.api 提供对 Fedora API 的完整访问，主要使用 Fedora 的 REST API。这个低级接口由 eulfedora.server.Repository 和 eulfedora.models.DigitalObject 封装，它们提供了一种更抽象、面向对象和 Pythonic 的方式来与 Fedora 存储库或单个对象和数据流交互。

# jquery - Nivo 滑块：某些效果不起作用？

> ID：12988996
> 
> 赞同：1
> 
> 时间：2012-10-20T13:40:15.960
> 
> 标签：jquery, slider, transition, effect, nivo-slider

所以我想我会在我的一个项目中实现 Nivo jQuery 滑块。一切都已实施，据我所知，它应该可以正常工作，但由于某种原因，某些效果不起作用。

如果我将 animSpeed 设置为小于 500（默认值）甚至更少的效果工作，我要么从右侧滑入，要么我只是得到一个静态开关（它等待 animSpeed 完成，然后只是切换图片）。还值得一提的是，对于某些过渡，animSpeed 被忽略了，它有时至少保持在 500（甚至可能更多）。

触发插件的代码：

```
$(window).load(function() {
  $('#slider').nivoSlider({
      effect: 'boxRandom',
      animSpeed: 500,
      pauseTime: 5*1000,
      directionNav: true,
      controlNav: false,
      pauseOnHover: true,
      prevText: 'Prev',
      nextText: 'Next',
      randomStart: true,
  });
}); 
```

HTML 代码：

```
<div id="slider" class="nivoSlider">
    <a href="#"> <img src="valid/source1.jpg" alt="" /> </a>
    <a href="#"> <img src="valid/source2.jpg" alt="" /> </a>
    <a href="#"> <img src="valid/source3.jpg" alt="" /> </a>
    <a href="#"> <img src="valid/source4.jpg" alt="" /> </a>
</div> <!-- slider--> 
```

有任何想法吗？

# php - 如何编译 PHP DLL 扩展 x86 x64

> ID：12988997
> 
> 赞同：7
> 
> 时间：2012-10-20T13:40:16.957
> 
> 标签：php, dll, compilation, x86, 64-bit

我正在尝试设置某种夜间构建环境，该环境将编译 PHP DLL 扩展的 x64 和 x86 版本。

我已按照[本](https://wiki.php.net/internals/windows/stepbystepbuild)指南设置环境并构建扩展，它工作正常。

目前我有两台虚拟机，一台使用 x86，一台使用 x64 版本的 Windows（XP 和 7）。

有没有办法使用批处理文件在同一个虚拟机（我认为这将是 Windows 7）中构建两个 DLL（32 位和 64 位）？

我的目标是设置一个夜间构建“服务器”，但也能够通过按下按钮来编译 DLL。

感谢您的任何指示。

编译 DLL 的机器具有 Visual Studio 2008 Express 和 Windows SDK 6（用于 x86）和 7（用于 x64）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T16:04:58.060

在项目属性下的*Visual Studio*中，您填写“*构建*”选项卡。单击*Build*选项卡将显示带有标签*Platform target*的下拉列表。您可以将其设置为*x86*并尝试一下。如果失败，那么您可以尝试使用其他选项*Any CPU* ..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T13:04:54.127

有一个博客（不是我的），其中有人编译了新旧 PHP 版本的 x64 版本，因此您不必这样做。它在这里：[http ://www.anindya.com/](http://www.anindya.com/)

# python - python 是否有类似 NLTK 的东西，并且不需要安装？

> ID：12988998
> 
> 赞同：-3
> 
> 时间：2012-10-20T13:40:40.030
> 
> 标签：python

我正在使用 NLTK 去除标签并将文本保留在 html 文件中。

NLTK 可以在几秒钟内安装在我的 linux 计算机上，但在 Windows 上使用起来很痛苦，而且我知道如果我在安装 nltk 模块时遇到问题，我住在不同国家的客户将无法安装它。

什么是 python 附带且不需要安装的简单替代方案？我需要这个作为脚本的一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T13:49:02.910

问题是“如何从字符串中删除 HTML 标记？”

```
import re
def strip_tags(s):
    return re.sub("<[^>]+>", "", s) 
```

此外，为了将来参考，您只需要[Christoph Gohlke 的 Python Extensions for Windows](http://www.lfd.uci.edu/~gohlke/pythonlibs/)页面。

编辑：修复了正则表达式。丁：

双重编辑：受评论的启发，这是可憎的。

```
def strip_tags(s):
     return re.sub(r"""</?\w+(\s*([^=]+=(?P<q>['"]).+?(?P=q))|\s*\w+(=\w+)?)*>""", "", s) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T13:54:11.400

你可以试试：

```
import xml.etree.ElementTree as ET

root = ET.parser('whatever')
text = filter(None, ((el.text or '').strip() for el in root.findall('.//*'))) 
```

那么你做什么`text`取决于你。