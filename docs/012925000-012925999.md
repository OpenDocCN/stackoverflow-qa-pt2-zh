# StackOverflow 问答 12925000-12925999

# scala - 在 Scala 中，如何将元组值分配给 Map 二进制操作中的变量？

> ID：12925000
> 
> 赞同：2
> 
> 时间：2012-10-16T23:29:40.653
> 
> 标签：scala, map, tuples

> **可能的重复：**
> [地图操作中的元组解包](https://stackoverflow.com/questions/6905207/tuple-unpacking-in-map-operations)

可以说我有以下 Map[Int,Double]：

```
scala> map
res19: scala.collection.immutable.Map[Int,Double] = Map(1 -> 1.1, 2 -> 2.2) 
```

我可以在其上运行以下 foldLeft：

```
scala> map.foldLeft("A")((initVal,x:(Int,Double)) => initVal + x._1)
res20: java.lang.String = A12 
```

但是我找不到将元组的值分配给命名变量的方法：

```
scala> map.foldLeft("A")((init,x:(a:Int,b:Double)) => init + x.a)
<console>:1: error: ')' expected but ':' found.
   map.foldLeft("A")((init,x:(a:Int,b:Double)) => init + x.a)
                               ^ 
```

这甚至可以做到吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T23:33:17.913

你可以用例

```
map.foldLeft("A") {case (init, (a,b)) => init + a} 
```

# json - Node.js Restify - 简单的服务

> ID：12925001
> 
> 赞同：6
> 
> 时间：2012-10-16T23:29:57.653
> 
> 标签：json, node.js, restify

我正在尝试制作一个存储 Json 帖子的服务器，这是迄今为止的服务器：

```
var restify = require('restify');
var server = restify.createServer();
server.post('/message/', function create(req, res, next) {
    console.log(req.params)
    return next();
});

server.listen(8080, function() {
    console.log('%s listening at %s', server.name, server.url);
}); 
```

我正在使用 Restify 客户端发布帖子

```
var restify = require('restify');

var client = restify.createJsonClient({
  url: 'http://localhost:8080',
  version: '*'
});

client.post('/message/', { hello: 'world' }, function(err, req, res, obj) {
  console.log('%d -> %j', res.statusCode, res.headers);
  console.log('%j', obj);
}); 
```

问题是 req.params 是空的。少了什么东西？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-17T02:53:57.703

`server.post`做之前`server.use(restify.bodyParser());`

# arrays - 读取带空格的数组

> ID：12925005
> 
> 赞同：3
> 
> 时间：2012-10-16T23:30:23.537
> 
> 标签：arrays, bash

说我有文件`foo.txt`

```
"The" "quick brown" "fox" "jumps over" "the" "lazy dog." 
```

我想将文件中的这些“字段”读入一个数组。但是，如果该字段有空格，我的尝试将失败

```
$ read -a bar < foo.txt

$ echo ${bar[0]}
"The"

$ echo ${bar[1]}
"quick 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T00:05:01.027

使用`declare`代替`eval`：

```
declare -a "bar=( $( < foo.txt ) )" 
```

这会强制将文件中的所有内容视为分配的右侧。使用`eval`，文件的内容可以解释为代码。例如，如果文件包含

```
Some text ); echo "you just erased all your files"; ( true 
```

然后执行以下操作`eval`：

```
bar=( Some text ); echo "you just erased all your files"; ( true ) 
```

文件中的括号平衡了在命令替换之外使用的括号，导致文件中它们之间的文本作为代码执行，而不是用于填充数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T23:38:33.583

这有效

```
$ read < foo.txt

$ eval bar=($REPLY)

$ echo ${bar[0]}
The

$ echo ${bar[1]}
quick brown 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T00:10:05.387

您的解决方案失败了，因为 bash 通常使用空格来分隔输入字段`IFS`（这也是您得到引号的原因）。

`read`如果您准备要处理的文本，则可以使用 plain ：

```
IFS='"'
read -a bar < <(sed 's/"\([^"]*\)" */\1"/g' foo.txt)
echo ${bar[1]}

quick brown 
```

注意： sed 命令将文件转换为以下格式：`The"quick brown"fox"jumps over"the"lazy dog."`. 我将`"`其用作分隔符，因为单词中绝对没有使用它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-17T00:34:53.407

这是使用[FPAT](http://www.gnu.org/software/gawk/manual/html_node/Splitting-By-Content.html)变量`GNU awk`的一种方法：

```
IFS=$'\n'
array=($(awk 'BEGIN { FPAT = "([^ ]+)|(\"[^\"]+\")" } { for (i=1; i<=NF; i++) print $i }' file.txt))

echo "${array[1]}" 
```

结果：

```
"quick brown" 
```

# html - Safari 不解码此 AAC+ 音频流

> ID：12925011
> 
> 赞同：3
> 
> 时间：2012-10-16T23:31:15.177
> 
> 标签：html, audio, safari, jplayer, aac

我一直在为我工作的互联网广播电台开发 HTML5 实时音频播放器。您可能会认出它，因为我没有自己构建它。它在我的 iPhone 上运行良好。但是，当我尝试在 safari、chrome 和 firefox 中播放它时，它就像在播放一样，但没有任何音频。

我正在处理它时，它现在托管[在这里。](https://s3.amazonaws.com/media.undoing.tv/zen/index.html)

它从中提取的流可以直接链接到[http://1382.live.streamtheworld.com/SAM06AAC156_SC](http://1382.live.streamtheworld.com/SAM06AAC156_SC)

如果您在 VLC 或 iTunes 中播放它，它就可以正常播放。

它以 HE-AAC 64Kbs 44.1KHz 立体声编码

经过大量研究，我想我已经得出结论，Safari 没有解码流？我迷路了。它在 Chrome 和 Firefox 中的行为方式相同。

我只对这些东西有基本的了解，但我正在学习。感谢您对此的帮助。

# java - 我的 JTable 中未显示的数据

> ID：12925012
> 
> 赞同：0
> 
> 时间：2012-10-16T23:31:27.757
> 
> 标签：java, swing, jtable

滚动条和按钮将被绘制，但不会绘制表格中的单元格，并且控制台已正确打印数据，所以我想知道我哪里做错了。

```
public class MyGUIManager extends JPanel {

    protected JFrame frame;
    protected JScrollPane scrollPane=null;
    protected JTable table=null;
    protected TableModel model=null;
    protected JButton btnInsert=null;

    protected String dbname,tblname;
    protected Vector<String> colNames;
    protected Vector<Vector<String>> data,backup;
    protected int col;

    protected MySQLGUIManager() throws Exception{

        frame =new JFrame("MySQL Manager");
        frame.setContentPane(this);
        frame.setMinimumSize(new Dimension(800,600));
        frame.pack();
        frame.setVisible(true);
        frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
        setLayout(new BorderLayout());
        init();
    }

    protected void init() throws Exception{
        //some inrrelevant operations about database
        loadTbl();
    }

    protected void loadTbl() throws SQLException{
        table=new JTable(data,colNames){
            private static final long serialVersionUID = 1L;
            public void tableChanged(TableModelEvent e){
                int column=e.getColumn();
                assert e.getFirstRow()==e.getLastRow():"more than 1 row have been changed!";
                int row=e.getFirstRow();
                if(scrollPane!=null){
                    //some codes
                }
            }
        };

        model=table.getModel();
        scrollPane=new JScrollPane(table,JScrollPane.VERTICAL_SCROLLBAR_ALWAYS,
                JScrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED);
        add(scrollPane,BorderLayout.CENTER);
        btnInsert=new JButton("Insert a row");
        add(btnInsert,BorderLayout.SOUTH);
        repaint();
        revalidate();
//      scrollPane.repaint();
//      scrollPane.revalidate();
        System.out.println(model.getColumnCount()+" "+model.getRowCount());
        for(int i=0;i<data.size();i++){
            for(int j=0;j<data.get(0).size();j++){
                System.out.print(model.getValueAt(i, j)+" ");
            }
            System.out.println();
        }
    }

    public static void main(String[] args) throws Exception {
        new MySQLGUIManager();
    }

} 
```

（省略了一些代码，但它们与 GUI 无关。）提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T23:39:56.127

我在代码中没有看到您实际将表添加到任何 UI 现有容器的任何地方。

此外，在调用 pack() 之前创建表并将其添加到预期的父组件中可能是个好主意。

您可能需要考虑将表的创建与加载数据分开。

另外，省略的“一些代码”可能对表格的行为有很大的影响，所以要小心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T23:48:09.030

好的......这是一个如何使用`DefaultTableModel`模型填充表格的示例，因为您的伪 SSCCE 是无用的：

```
package com.model.impl;

import java.awt.BorderLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;
import javax.swing.table.DefaultTableModel;

public class FillTable extends JFrame{

    JPanel panel = new JPanel();
    JLabel lblName = new JLabel("Name: ");
    JLabel lblIp = new JLabel("Ip: ");
    JTextField txtName = new JTextField(10);
    JTextField txtIp = new JTextField(10);
    JButton btnAdd = new JButton("Add");
    JTable table = new JTable();
    DefaultTableModel model = new DefaultTableModel(new Object[][]{}, new String[]{"Name","Ip"});

    public FillTable(){
        super("Test table");
        setLayout(new BorderLayout());
        add(panel,BorderLayout.NORTH);
        panel.add(lblName);
        panel.add(txtName);
        panel.add(lblIp);
        panel.add(txtIp);
        panel.add(btnAdd);
        table.setModel(model);
        add(new JScrollPane(table),BorderLayout.CENTER);

        btnAdd.addActionListener(new ActionListener(){
            @Override
            public void actionPerformed(ActionEvent arg0) {
                String name = txtName.getText();
                String ip = txtIp.getText();

                model.addRow(new Object[]{name,ip});
            }});
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable(){

            @Override
            public void run() {
                FillTable ft = new FillTable();
                ft.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
                ft.setLocationByPlatform(true);
                ft.pack();
                ft.setVisible(true);
            }});
    }
} 
```

我希望它会有所帮助。祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T23:53:46.807

*   没有向数据/列模型添加任何内容
*   数据和列模型未初始化
*   `JFrame`从 a 中创建 a`JPanel`只是为了将自己添加到框架中是不好的做法

你不是`super.tableChanged`从你的`tableChanged`方法中调用的

```
table = new JTable(data, colNames) {
    private static final long serialVersionUID = 1L;

    public void tableChanged(TableModelEvent e) {
        super.tableChanged(e);
        int column = e.getColumn();
        assert e.getFirstRow() == e.getLastRow() : "more than 1 row have been changed!";
        int row = e.getFirstRow();
        if (scrollPane != null) {
            //some codes
        }
    }
}; 
```

# javascript - 从浏览器在远程页面上执行 javascript 函数

> ID：12925017
> 
> 赞同：1
> 
> 时间：2012-10-16T23:31:53.657
> 
> 标签：javascript, browser

页面的访问者是否可以从浏览器运行该页面的 javascript 中指定的任意函数？

举个简单的例子，如果页面具有在单击按钮时隐藏特定元素的功能，访问者是否可以在不单击按钮的情况下触发该功能并隐藏元素，而是通过以某种方式直接调用该功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T23:38:09.810

是的，用户可以完全控制 DOM。但是，可以通过使用闭包来减少可以访问的内容。例如，如果我有：

```
(function() {
    var myvar = "can't touch me!";
    // do stuff with myvar
})(); 
```

那么用户就无法获取或更改字符串。对于函数也是如此，除非您将它们设为全局变量（或将它们附加到`window`对象）。任何附加到 DOM 的属性也是可访问的，例如`onclick`元素的属性。但是，如果您使用该`addEventListener`方法，那么我认为没有任何方法可以找到它。

总的来说，浏览器是不可信的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T23:38:50.650

我相信安全预防措施通常可以防止这种情况发生。

您可以使用调试控制台。在 Chrome 中，打开**开发者工具**，打开**控制台**，然后输入命令。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-10-16T23:33:39.390

如果你使用 jQuery，你可以这样做

```
$('#id').click(); 
```

这是我认为最简单的方法

# class - 我想将自己的方法添加到一些 Dart 类中

> ID：12925019
> 
> 赞同：2
> 
> 时间：2012-10-16T23:32:10.713
> 
> 标签：class, extend, dart, implements

我尝试简单地“扩展” Map 类失败了，因为 List 是一个接口，不能扩展但必须实现。

目标只是在一些现有类之上添加一些方法，例如：

List.add_unique(item) 如果项目尚不存在，我只想追加。这可以通过使用 List.indexOf(item) != -1 （其中未找到 -1）与 append !=null 逻辑来很好地完成。这将是一个很好且易于理解的示例？

但是，如何以最短、总体开销最小的方式完成此任务？我想我可以接受松散的打字——至少一开始是这样。

我还希望添加和/或修改其他方法，例如 Map 类的 .add() 方法。

我已经很多年没有处理接口了，我认为总体上可能有一种更简单的方法来开始我的项目的这一方面。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T00:28:38.267

我也遇到过这个问题。目前最好的解决方法是创建一个转发所有方法调用的类。像： [https ://github.com/dart-lang/html5lib/blob/master/lib/src/list_proxy.dart](https://github.com/dart-lang/html5lib/blob/master/lib/src/list_proxy.dart)

然后您可以从 ListProxy 继承并覆盖或添加您需要的任何方法。

如果人们觉得这足够有用，也许我们可以把它放在它自己的 pub 包中。不过，我希望我们可以修复 dart:core，因此它支持从所有核心集合类继承。

顺便说一句，如果您尝试覆盖 Map 中的方法，则要容易得多：您可以`import 'dart:coreimpl';`扩展`HashMapImplementation`.

# c# - 如何初始化 AForge 网络摄像头

> ID：12925021
> 
> 赞同：3
> 
> 时间：2012-10-16T23:32:24.357
> 
> 标签：c#, camera, aforge

我尝试使用 Aforge 编写一小段代码来捕获帧我参考了 Aforge.dll 和 AForge.Video.DirectShow.dll 代码如下，但我做错了。警告我得到“名称 videoDevices 在当前上下文中不存在。我认为这与我尝试创建该变量的位置有关，但我不确定在哪里放置按钮的代码以使其初始化. 错误在 Visual Studio 中也显示为对象“videoDevices”下的红线

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using AForge;
using AForge.Video.DirectShow;

namespace AforgeCam
 {
   public partial class Form1 : Form
 {
    public Form1()
    {
        InitializeComponent();

    }

    private void button1_Click(object sender, EventArgs e)
    {

        videoDevices = new FilterInfoCollection(FilterCategory.VideoInputDevice);

        if (videoDevices.Count == 0)
            throw new ApplicationException();

        foreach (FilterInfo device in videoDevices)
        {
    VideoCaptureDevice videoSource = new    VideoCaptureDevice(device.MonikerString);
            videoSource.DesiredFrameSize = new Size(320, 240);
            videoSource.DesiredFrameRate = 15;
            videoSourcePlayer1.VideoSource = videoSource;
            videoSourcePlayer1.Start();
        }

    }
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-19T01:22:29.457

根据要求，解决方案如下，代码有效，我将针对我对此提出的另一个问题提出一个新问题。该代码需要一个下拉框、2个按钮和一个图片框

```
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using AforgeCam;
using AForge.Video;
using AForge.Video.DirectShow;

namespace AforgeCam
{
public partial class Form1 : Form
{
private FilterInfoCollection VideoCaptureDevices;
private VideoCaptureDevice FinalVideo;

public Form1() // init
{
    InitializeComponent();
    {
        VideoCaptureDevices = new FilterInfoCollection(FilterCategory.VideoInputDevice);
        foreach (FilterInfo VideoCaptureDevice in VideoCaptureDevices)
        {
            comboBox1.Items.Add(VideoCaptureDevice.Name);
        }
        comboBox1.SelectedIndex = 0;
    }
}

private void button1_Click(object sender, EventArgs e)
{
    FinalVideo = new VideoCaptureDevice(VideoCaptureDevices[comboBox1.SelectedIndex].MonikerString);
    FinalVideo.NewFrame += new NewFrameEventHandler(FinalVideo_NewFrame);
    FinalVideo.Start();
}

void FinalVideo_NewFrame(object sender, NewFrameEventArgs eventArgs)
{
    Bitmap video = (Bitmap)eventArgs.Frame.Clone();
    pictureBox1.Image = video;

}

private void button2_Click(object sender, EventArgs e)
{
    FinalVideo.Stop();
}
} 
```

# tfs - TFS 2010 上的 VS 2012 单元测试问题

> ID：12925025
> 
> 赞同：2
> 
> 时间：2012-10-16T23:33:01.113
> 
> 标签：tfs, visual-studio-2012

我有一个包含许多单元测试项目的 VS 2012 解决方案。我在一个拥有相当大规模 TFS 2010 实施的团队中工作。我有一个专门用于此解决方案的 VS 2010 构建控制器/代理。

在基于 TFS 2010 的构建控制器/代理上安装 .NET 4.5 和 .NET 4.5 SDK 后，我能够成功构建我的解决方案。

但是，构建服务器不会执行基于 VS 2012 的单元测试。我收到与测试项目使用的 Microsoft.VisualStudio.QualityTools.UnitTestFramework.dll 相关的错误消息。我将该 dll 添加到源代码管理并在源代码管理中引用了该 dll 的版本，但在构建过程中仍然出现相同的错误。

作为最后的手段，我在构建服务器上安装了 VS 2012。现在我没有收到与 Microsoft.VisualStudio.QualityTools.UnitTestFramework.dll 相关的错误，但构建会无限期地运行。

1.  这是受支持的方案吗？我应该能够在 TFS 2010 构建控制器/代理上运行 VS 2012 单元测试吗？
2.  如果支持，需要哪些步骤才能实现？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T09:22:44.330

我们有同样的问题。我们在构建服务器上安装了 VS 2010 和 2012。这显然是 VS 2010 中的一个已知错误 - 它使用了错误版本的 MS Test。如果您在构建服务器上安装 VS 2010 SP1，这应该可以修复它。

请参阅此链接：

[http://connect.microsoft.com/VisualStudio/feedback/details/728659/mstest-not-working-after-installing-vs11-next-to-vs10](http://connect.microsoft.com/VisualStudio/feedback/details/728659/mstest-not-working-after-installing-vs11-next-to-vs10)

# android - 如何在android屏幕的某些区域创建触摸事件？

> ID：12925026
> 
> 赞同：0
> 
> 时间：2012-10-16T23:33:02.523
> 
> 标签：android

我的应用程序有一个整洁的背景，背景中已经包含“按钮”。

我想以某种方式用边界框或矩形包围这些“按钮”，然后让该区域响应触摸事件。

我怎么能在android中做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T23:40:44.957

只需用任何布局包围它，并为该布局设置 setOnClickListener。

举个例子

```
 <LinearLayout 
   android:background="#abc123"
   android:layout_height="wrap_content"
   android:layout_width="wrap_content"
   android:paddingBottom="10dp"
   android:paddingTop="10dp"
   android:id="@+id/lay1">

 <Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Button" />
 </LinearLayout> 
```

现在为按钮和线性布局放置单独的侦听器。这将与所有屏幕一致，即填充将在任何地方固定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T04:34:08.517

试用并使用

```
Region rgn = new Region(); 
```

在此，设置一个边界，该边界应该在按钮中。

并检查一个条件，如果您的点击在该区域的 x 和 y 范围内，请执行某些操作...

参考

[http://www.java2s.com/Code/Android/2D-Graphics/Regions.htm](http://www.java2s.com/Code/Android/2D-Graphics/Regions.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T03:17:08.517

添加一个**视图**（这将是透明的，并将位于所有视图组件的顶部）到您的布局。并为您的视图设置一个**OnTouchListener**。然后在预期的 X、Y 坐标内监听触摸事件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T23:59:57.137

1.  在 XML 中添加按钮
2.  附加点击监听器
3.  运行应用程序

有关更多信息和帮助，请单击[此处](http://www.mkyong.com/android/android-button-example/)

编辑：运行代码

```
public void onClick(View v) {
    // TODO Auto-generated method stub
    switch (v.getId()) {
    case R.id.but_1_but:
        // do stuff for 1st button
        break;
    case R.id.but_2_but:
        // do stuff for 2nd button
        break;
    }
} 
```

# php - 终端从包含空格的变量传递参数

> ID：12925034
> 
> 赞同：3
> 
> 时间：2012-10-16T23:34:39.467
> 
> 标签：php, shell, ubuntu

在终端中，如何将字符串作为包含空格的参数传递。它实际上跳过了空格之后的部分，只接受第一个单词。

```
$word = 'soccer ball'
shell_exec('casperjs test.js --word='.$word); 
```

那么我怎样才能逃脱它只运行这个命令的空格

```
casperjs test.js --word=soccer 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T23:36:09.117

尝试用引号括起来：

```
casperjs test.js --word="soccer ball" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T23:56:11.287

对于您描述的情况（shell中空格旁边还有其他特殊字符），PHP具有以下[`escapeshellarg`](http://php.net/escapeshellarg)功能：

```
$word    = 'soccer ball';
$command = sprintf('casperjs test.js --word=%s', escapeshellarg($word));
$result  = shell_exec($command); 
```

我注意保留`$word`作为*一个*论点的价值：

```
casperjs test.js --word='soccer ball' 
```

另见：

*   [检测危险的 Unix 命令行元字符](https://stackoverflow.com/questions/7964398/detecting-dangerous-unix-command-line-metacharacters)

# gridview - 将主键 ID 作为参数传递给自定义 CGridColumn“单击”数组参数中的 JS 函数

> ID：12925038
> 
> 赞同：0
> 
> 时间：2012-10-16T23:35:03.957
> 
> 标签：gridview, yii

我的 CGridView 按下有一个 CButtonColumn，它调用我的 JS 例程。JS 例程进行 Ajax 调用并删除一条记录。我需要将记录的主键传递给 JS 函数以删除预期的记录。我咨询过[这个](http://www.yiiframework.com/wiki/106/using-cbuttoncolumn-to-customize-buttons-in-cgridview/)链接，并能够使用我的自定义按钮调用附加 JS，并通过硬编码 PK 值对其进行测试。在同一链接中提到的一种方法是访问网格第一列中的文本很有用（请参阅下面给出的使用 jQuery 代码的 myBtn 列代码）。使用这种方法，如果我在网格中显示 PK 列，那么我的问题就解决了，但向用户显示 PK 值绝对不是一种选择。我什至尝试通过使用 display:none 设置 htmlOPtions 来隐藏该列，但这让我的列标题仍然悬在顶部，看起来非常破旧。

以下是我的 JS（请原谅我的格式不正确，我尝试了很多但无法将其放入代码片段标签中，stackoverflow 可以处理 :)

```
function DeleteRec(Rec_id) {
    alert(Rec_id); 
    //var Rec_id=27;
    var data=$("#subject-form").serialize();
    $.ajax({   
        type: 'POST',
        url: '<?php echo Yii::app()->createAbsoluteUrl("upm/subject/deleteRec/id"); ?>'+'/'+Rec_id,   
        data:data,
        success:function(data){
            var myObject = eval('(' + data + ')');
            alert(myObject.recDelete);      
        },
        error: function(data) { // if error occured
            var myObject = eval('(' + data + ')');
            alert("Error occured.please try again"+myObject);
            var myObject = eval('(' + data + ')');
            var myJSONText = JSON.stringify(myObject);
        },
        dataType:'html'
    });
} 
```

以下是我的 CGridView 代码：

```
$this->widget('zii.widgets.grid.CGridView', array(
    'dataProvider' => $PatHistoryGrid,
    'id' => 'PatGrid',
    'enableSorting' => false,
    'enablePagination' => false,
    'columns' => array(
        'id' => array(
            'name' => '', 
            'value' => '$data->id', 
            'htmlOptions' => array('style' => 'display:none;',)
        ),
        'Pat' => array(
            'name' => 'Pat Name', 
            'value' => '$data->pat->pat_val', 
            'htmlOptions' => array('width' => '240'),
        ),
        'PatDate' => array(
            'name' => 'Date', 
            'value' => '$data->pat_date', 
            'htmlOptions' => array('width' => '80', 'align' => 'middle')
        ),
        'PatNotes' => array(
            'name' => 'Pat Notes', 
            'value' => '$data->pat_notes', 
            'htmlOptions' => array('width' => '480', 'align' => 'middle')
        ),
        'PatPreNotes' => array(
            'name' => 'Pat Pre Notes', 
            'value' => '$data->pat_pre_notes', 
            'htmlOptions' => array('width' => '480', 'align' => 'middle')
        ),
        'Flag' => array(
            'type' => 'raw', 
            'name' => 'Flag', 
            'value' => '$data->flag', 
            'htmlOptions' => array('width' => '50')
        ),
        array(
            'class' => 'CButtonColumn',
            'template' => '{update} {delete} {myBtn}',
            'buttons' => array(
                'myBtn' => array(
                    'click' => 'function(){
                        DeleteRec($(this).parent().parent().children(":first-child").text());
                    }',
                ),
            ),
        ),
    ),
    'htmlOptions' => array(
        'style' => 'margin-top:-40px;'
    ),
)); 
```

有没有办法添加 CGridColumn 但不显示，就像表单中的隐藏变量一样？如果这是可能的，那么我将能够解决这个问题。任何其他想法都是最受欢迎的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T00:56:03.727

我设计了解决方案。我在我的模型中创建了一个新属性，它返回带有 JS 函数名称和 PK 作为其参数的锚 HTML。我在网格中添加了一个新列并将其值设置为该属性。此列与其他常规列的唯一区别在于它包含原始类型。以下是我的模型属性的代码片段：

```
 public function getDataDel(){
     return '<a class="myBtn" title="myBtn" click="DeleteRec('.$this->id.') " href="#">myBtn</a>';
} 
```

以下是我的新 CGridView 代码：

```
$this->widget('zii.widgets.grid.CGridView', array(
'dataProvider'=>$PatHistoryGrid,
'id'=>'PatGrid',
'enableSorting'=>false,
'enablePagination'=>false,
'columns'=>array('Pat'=>array('name'=>'Pat Name','value'=>'$data->pat->pat_val', 'htmlOptions'=>array('width'=>'240'),),
                  'PatDate'=>array('name'=>'Date','value'=>'$data->pat_date','htmlOptions'=>array('width'=>'80','align'=>'middle')),    
                  'PatNotes'=>array('name'=>'Pat Notes','value'=>'$data->pat_notes','htmlOptions'=>array('width'=>'480','align'=>'middle')),                  
                  'PatPreNotes'=>array('name'=>'Pat Pre Notes','value'=>'$data->pat_pre_notes','htmlOptions'=>array('width'=>'480','align'=>'middle')),
                  'Flag'=>array('type'=>'raw','name'=>'Flag','value'=>'$data->flag','htmlOptions'=>array('width'=>'50')),
    'Delid'=>array('type'=>'raw','name'=>'Btns','value'=>'$data->dataDel','htmlOptions'=>array('width'=>'50')),
),
'htmlOptions'=>array('style'=>'margin-top:-40px;'),)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T01:02:01.473

您可以为按钮添加类：

```
'buttons' => array(
    'myBtn' => array(
        'options' => array('class' => 'myBtn')
    ),
), 
```

然后在你的 JS 中你可以按照 Yii 的方式获得一个 id：

```
$('#PatGrid').on('click', '.myBtn', function() {
    var id = $.fn.yiiGridView.getKey(
        'PatGrid',
        $(this).closest('tr').prevAll().length 
    );
    alert(id);
    /* Your code */
}); 
```

# c# - 在托管进程中使用 EventWaitHandle 和在非托管进程中使用 WaitForSingleObject 进行跨进程同步

> ID：12925042
> 
> 赞同：1
> 
> 时间：2012-10-16T23:35:39.647
> 
> 标签：c#

我有两个进程，一个使用 C# 创建，另一个使用本机 C++ 创建。

我想同步这两个进程，以便在托管进程启动并运行之前，将阻止非托管进程。

在托管进程中，我有以下代码：

```
// signal the unmanaged process that I am up and running
EventWaitHandle eventWaitHandle = new EventWaitHandle(false, EventResetMode.ManualReset, "MyEventName");
eventWaitHandle.Set(); 
```

在非托管进程中我有相应的代码来等待事件

```
HANDLE hWaitEvent = CreateEventW(NULL, TRUE, FALSE, "MyEventName"); 
if (hWaitEvent)
{
    // wait for managed process to signal that it is up and running
    WaitForSingleObject(hWaitEvent, 5000);
} 
```

据我所知，事件是在第一个过程中设置的。其他进程中的 WaitForSingleObject 无法检测到这一点，并始终等到超时。

有什么我错过的吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T21:43:39.093

Hans Passant 的建议是对的，在 C++ 中打开事件时我需要 SYNCHRONIZE 访问权限。

这是有效的代码：

在托管过程中：

```
 EventWaitHandle _initializedEvent = new EventWaitHandle(false, EventResetMode.ManualReset, @"Global\Initialized"); 
```

在本机进程中：

```
 const WCHAR* initializedEventName = L"Global\\Initialized";
    int attempt = 0;
    HANDLE eventHandle = NULL;
    while ((eventHandle = OpenEventW(SYNCHRONIZE, FALSE, initializedEventName)) == NULL && attempt < 5)
    {
       Sleep(1000);
       ++attempt;
    }

    if (eventHandle != NULL)
    {
       WaitForSingleObject(eventHandle, 5000);
       CloseHandle(eventHandle);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T00:11:55.413

是的，这不起作用，您正在两端创建一个事件。其中一个必须创建它，另一个必须打开它。C++ 代码中的 OpenEvent() 或 C# 代码中的 EventWaitHandle.OpenExisting()。无论代码首先开始，都必须创建事件。

# c# - excel工作簿的错误

> ID：12925043
> 
> 赞同：0
> 
> 时间：2012-10-16T23:35:40.590
> 
> 标签：c#, excel

我很难使用 c# 中的 excel 工作簿。我无法使基本操作正常工作，并且由于某种原因，有关 excel 相关类的文档似乎不如其他类好。到目前为止，我已经学会了使用 xml 和文本文件，而且它比 excel 容易得多。我已经从 msdn 论坛复制了下一个示例，但我无法让它工作，即使很难声明命名空间，我也只能从这段代码中得到错误：

```
using Microsoft.Office.Interop.Excel; 

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            object oExcel=new Excel.Application();
            object oBook = oExcel.Workbooks.Open("C:\\Book1.xls");
            object oSheet = oExcel.Worksheets(1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T23:53:21.933

```
using System.Runtime.InteropServices;
using Microsoft.Office.Interop.Excel;

    Excel.ApplicationClass _Excel;
    Excel.Workbook WB;
    Excel.Worksheet WS;

try
    {

    _Excel = new Microsoft.Office.Interop.Excel.ApplicationClass();
    WB = _Excel.Workbooks.Open("C:\\Book1.xls",
        Type.Missing, Type.Missing, Type.Missing, Type.Missing,
        Type.Missing, Type.Missing, Type.Missing, Type.Missing,
        Type.Missing, Type.Missing, Type.Missing, Type.Missing,
        Type.Missing, Type.Missing);

        //do something
        WB.Visible = true;
    }
    catch (Exception ex)
    {
        WB.Close(false, Type.Missing, Type.Missing);

        throw;
    }
    finally
    {
        GC.Collect();
        GC.WaitForPendingFinalizers();
        System.Runtime.InteropServices.Marshal.FinalReleaseComObject(WB);
        System.Runtime.InteropServices.Marshal.FinalReleaseComObject(_Excel);
    } 
```

您也可以尝试的选项 2.. 这是一个链接以及按照此链接中提供的屏幕截图中的步骤 [如何在 C# 中打开 Excel 文件](http://csharp.net-informations.com/excel/csharp-open-excel.htm)

```
using System.Windows.Forms;
using Excel = Microsoft.Office.Interop.Excel; 

namespace WindowsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            Excel.Application xlApp ;
            Excel.Workbook xlWorkBook ;
            Excel.Worksheet xlWorkSheet ;
            object misValue = System.Reflection.Missing.Value;

            xlApp = new Excel.ApplicationClass();
            xlWorkBook = xlApp.Workbooks.Open("csharp.net-informations.xls", 0, true, 5, "", "", true, Microsoft.Office.Interop.Excel.XlPlatform.xlWindows, "\t", false, false, 0, true, 1, 0);
            xlWorkSheet = (Excel.Worksheet)xlWorkBook.Worksheets.get_Item(1);

            MessageBox.Show(xlWorkSheet.get_Range("A1","A1").Value2.ToString());

            xlWorkBook.Close(true, misValue, misValue);
            xlApp.Quit();

            releaseObject(xlWorkSheet);
            releaseObject(xlWorkBook);
            releaseObject(xlApp);
        }

        private void releaseObject(object obj)
        {
            try
            {
                System.Runtime.InteropServices.Marshal.ReleaseComObject(obj);
                obj = null;
            }
            catch (Exception ex)
            {
                obj = null;
                MessageBox.Show("Unable to release the Object " + ex.ToString());
            }
            finally
            {
                GC.Collect();
            }
        } 
    }
} 
```

这是一篇文章/另一种读取或打开 Excel 文件的方法 [Excel Interop with .NET](http://dontbreakthebuild.com/2011/01/30/excel-and-c-interop-with-net-4-how-to-read-data-from-excel/)

# php - 时间戳显示的是服务器时间，而不是本地时间

> ID：12925051
> 
> 赞同：-2
> 
> 时间：2012-10-16T23:36:46.917
> 
> 标签：php, mysql, phpmyadmin, timestamp, localtime

我有一个网站，用户（在不同的时区）可以在数据库中创建新记录，并且我目前记录的每条记录都带有创建时间的时间戳...我在 EST 时区，但是当我查看我在网站上创建的记录，它们以 MST 显示时间，这也恰好是服务器时区......当我查看数据库中的记录时，时间戳字段没有转换为 UTC，而是转换为 mst... 我注意到当我从 phpmyadmin 插入记录时，我使用 datepicker 并选择 18:35:01，但是当我在插入后查看记录时，它显示 15:35:01！ ！！这非常令人沮丧，我一直在阅读时间戳字段应该自动转换为 utc，而我没有这样做......另一件事是，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T23:47:44.223

您可以设置 PHP 脚本使用的时区

```
date_default_timezone_set('America/Los_Angeles'); 
```

[查看 PHP 手册了解更多详情](http://php.net/manual/en/function.date-default-timezone-set.php)

# python - Python和默认字典，如何打印

> ID：12925052
> 
> 赞同：41
> 
> 时间：2012-10-16T23:36:47.157
> 
> 标签：python

我正在使用默认字典。我需要`pprint`。

然而，当我`pprint`……这就是它的样子。

```
defaultdict(<functools.partial object at 0x1f68418>, {u'300:250': defaultdict(<functools.partial object at 0x1f683c0>, {0: defaultdict(<type 'list'>, {u'agid1430864021': {u'status': u'0', u'exclude_regi.......... 
```

如何`pprint`使用默认字典？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-10-16T23:38:38.080

我以前用过`pprint(dict(defaultdict))`作为解决方法。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-08-22T09:29:59.223

我发现的最好的解决方案是有点破解，但是一个优雅的（如果破解可以的话）：

```
class PrettyDefaultDict(collections.defaultdict):
    __repr__ = dict.__repr__ 
```

然后使用`PrettyDefaultDict`类而不是`collections.defaultdict`. 它的工作原理是 pprint 模块的工作方式（至少在 2.7 上）：

```
r = getattr(typ, "__repr__", None)
if issubclass(typ, dict) and r is dict.__repr__:
    # follows pprint dict formatting 
```

这样我们“欺骗” pprint 认为我们的字典类就像一个普通的`dict`.

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2016-01-19T18:06:34.453

如果您不必使用`pprint`，则可以使用`json`漂亮打印`defaultdict`：

```
print(json.dumps(my_default_dict, indent=4)) 
```

这也适用于嵌套的默认字典。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-17T00:04:29.260

与 Jon Clements 的回答一样，如果这对您来说是一个常见的操作，您可以考虑将 defaultdict 子类化以覆盖其 repr 方法，如下所示。

**输入：**

```
from collections import defaultdict

class prettyDict(defaultdict):
    def __init__(self, *args, **kwargs):
        defaultdict.__init__(self,*args,**kwargs)

    def __repr__(self):
        return str(dict(self))

foo = prettyDict(list)

foo['bar'].append([1,2,3])
foo['foobar'].append([4,5,6,7,8])

print(foo) 
```

**输出：**

```
{'foobar': [[4, 5, 6, 7, 8]], 'bar': [[1, 2, 3]]} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-01-02T03:26:33.277

我真的很喜欢这种处理嵌套默认字典的解决方案。这有点像黑客，但在 pdbing 时可以很好地完成工作：

```
import json
data_as_dict = json.loads(json.dumps(data_as_defaultdict))
print(data_as_dict) 
```

来自：[https ://stackoverflow.com/a/32303615/4526633](https://stackoverflow.com/a/32303615/4526633)

# c# - 如何检测未知并发任务推送和拉取 ConcurrentQueue 的完成情况

> ID：12925053
> 
> 赞同：2
> 
> 时间：2012-10-16T23:37:07.623
> 
> 标签：c#, .net, concurrency, task, task-parallel-library

几天前，我试图在我的磁盘上执行快速搜索，但很少做一些事情，比如属性、扩展、在文件中执行更改等......

这个想法是让它几乎没有限制/锁定，以避免大文件或目录中包含大量文件等的“延迟”......我知道它对于“最佳实践”来说还很远，因为我没有使用诸如“MaxDegreeOfParallelism”或带有“while(true)”的拉循环之类的东西

尽管如此，代码运行得非常快，因为我们有支持它的架构。

如果有人想检查发生了什么，我试图将代码转移到一个虚拟控制台项目。

```
class Program
{
    static ConcurrentQueue<String> dirToCheck;
    static ConcurrentQueue<String> fileToCheck;
    static int fileCount; //

    static void Main(string[] args)
    {
        Initialize();

        Task.Factory.StartNew(() => ScanDirectories(), TaskCreationOptions.LongRunning);
        Task.Factory.StartNew(() => ScanFiles(), TaskCreationOptions.LongRunning);

        Console.ReadLine();
    }

    static void Initialize()
    {
        //Instantiate caches
        dirToCheck = new ConcurrentQueue<string>();
        fileToCheck = new ConcurrentQueue<string>();

        //Enqueue Directory to Scan here
        //Avoid to Enqueue Nested/Sub directories, else they are going to be dcan at least twice
        dirToCheck.Enqueue(@"C:\");

        //Initialize counters
        fileCount = 0;
    }

    static void ScanDirectories()
    {
        String dirToScan = null;

        while (true)
        {
            if (dirToCheck.TryDequeue(out dirToScan))
            {
                ExtractDirectories(dirToScan);
                ExtractFiles(dirToScan);
            }

            //Just here as a visual tracker to have some kind an idea about what's going on and where's the load
            Console.WriteLine(dirToCheck.Count + "\t\t" + fileToCheck.Count + "\t\t" + fileCount);
        }
    }

    static void ScanFiles()
    {
        while (true)
        {
            String fileToScan = null;
            if (fileToCheck.TryDequeue(out fileToScan))
            {
                CheckFileAsync(fileToScan);
            }
        }
    }

    private static Task ExtractDirectories(string dirToScan)
    {
        Task worker = Task.Factory.StartNew(() =>
        {
            try
            {
                Parallel.ForEach<String>(Directory.EnumerateDirectories(dirToScan), (dirPath) =>
                {
                    dirToCheck.Enqueue(dirPath);
                });

            }
            catch (UnauthorizedAccessException) { }
        }, TaskCreationOptions.AttachedToParent);

        return worker;
    }

    private static Task ExtractFiles(string dirToScan)
    {
        Task worker = Task.Factory.StartNew(() =>
        {
            try
            {
                Parallel.ForEach<String>(Directory.EnumerateFiles(dirToScan), (filePath) =>
                {
                    fileToCheck.Enqueue(filePath);
                });
            }
            catch (UnauthorizedAccessException) { }
        }, TaskCreationOptions.AttachedToParent);

        return worker;
    }

    static Task CheckFileAsync(String filePath)
    {
        Task worker = Task.Factory.StartNew(() =>
        {
            //Add statement to play along with the file here
            Interlocked.Increment(ref fileCount);

            //WARNING !!! If your file fullname is too long this code may not be executed or may just crash
            //I just put a simple check 'cause i found 2 or 3 different error message between the framework & msdn documentation
            //"Full paths must not exceed 260 characters to maintain compatibility with Windows operating systems. For more information about this restriction, see the entry Long Paths in .NET in the BCL Team blog"
            if (filePath.Length > 260)
                return;
            FileInfo fi = new FileInfo(filePath);

            //Add statement here to use FileInfo

        }, TaskCreationOptions.AttachedToParent);

        return worker;
    }
} 
```

问题：如何检测到我已经完成了 ScanDirectory？完成后，我可以设法将一个空字符串或其他任何内容排入文件队列，以退出它。我知道如果我使用“AttachedToParent”，我可以在父任务上有一个完成状态，然后例如做一些类似“ContinueWith(()=> { / *SomeCode to notice the end* /})”但仍然是父任务正在拉动并陷入一种无限循环，每个子语句都开始新任务。

另一方面，我不能简单地测试每个队列中的“计数”，因为我可能会刷新文件列表和目录列表，但可能还有另一个任务会调用“EnumerateDirectory()”。

我试图找到某种“反应式”解决方案，并避免在循环中出现一些“if()”，因为它是一个简单的 while(true){} 与 AsyncCall。

PS：我知道我可以使用 TPL 数据流，我不是因为我被困在 .net 4.0 上，无论如何，在没有数据流的 .net 4.5 中，因为 TPL 几乎没有改进，我仍然对此感到好奇

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T23:43:51.883

而不是`ConcurrentQueue<T>`，您可以使用[`BlockingCollection<T>`.](http://msdn.microsoft.com/en-us/library/dd267312.aspx)

`BlockingCollection<T>`专门为这样的生产者/消费者场景而设计，并提供了一个[CompleteAdding](http://msdn.microsoft.com/en-us/library/dd287086.aspx)方法，以便生产者可以通知消费者它已经完成添加工作。

# sql - 源代码控制中的数据库 - 完整或差异 SQL？

> ID：12925054
> 
> 赞同：0
> 
> 时间：2012-10-16T23:37:18.733
> 
> 标签：sql, database, version-control

因此，我正在努力为我的所有数据库更改制作 SQL 脚本，以便它们可以提交到源代码控制，但是 SQL 是否应该充满差异？

例如，如果我的初始提交有一个“创建表”并且以后的更新需要从该表中删除一个列，我是修改“创建”语句使其不包含该列还是保持不变并添加“更改表”语句？

我想如果它的差异，就有可能在任何状态下获取数据库并将其更新到以后的状态。而使用完整的，总是必须从一个新的数据库开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T00:10:07.760

两个都。每个 DB 对象都有单独的“创建”脚本。这可用于从头开始创建数据库。此外，这使得提交更改更容易在视觉上区分 - 除了阅读（有时是冗长的）更改脚本之外，您还可以看到对象创建脚本的更改。

还要编写差异 SQL 脚本，以易于排序和按顺序应用的方式命名。这使您可以将 X 点的 DB 带到当前模式。

# c# - 在 MvvmCross 中为 MonoDroid/Android 绑定到路径 ImageView

> ID：12925056
> 
> 赞同：3
> 
> 时间：2012-10-16T23:38:04.030
> 
> 标签：c#, mono, xamarin.android, mvvmcross

在我的情况下路径`"MyZooSnap.Core;component/Resources/Images/i.jpg"`。如何为Android转换路径`ImageView`？为了在以下绑定中使用它：

```
{'AssetImagePath':{'Path':'ImagePath'}} 
```

[更多在这里](https://stackoverflow.com/questions/12914544/ssue-with-binding-to-gridlayout-to-android)

[类似的问题](https://stackoverflow.com/questions/12876406/how-to-bind-an-image-src-to-resource-drawable-image-with-mvvmcross)

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T06:41:54.580

快速回答：

*   如果您的 Android 图像文件存储在`assets/images/i1.png`
*   然后确保它被标记为`AndroidAsset`
*   那么你的路径需要是`images/i1.png`

* * *

更长的答案：

理想情况下，您的 ViewModel 应该独立于平台，并且不了解 View 问题。

因此，您的 ViewModel 可能会公开如下属性：

```
 private GameState _state;
 public GameState State 
 { 
     get { return _state; }
     set { _state = value; RaisePropertyChanged(() => State); }
 } 
```

其中 GameState 是一个枚举，例如：

```
 public enum GameState
 {
     Stopped,
     Running,
     Paused,
     GameOver
 } 
```

然后，您可能会在资产结构中拥有代表这些状态的图像，例如：

```
/assets/gamestates/stopped.png
/assets/gamestates/running.png
/assets/gamestates/paused.png
/assets/gamestates/gameover.png 
```

其中每个文件都标有 AndroidAsset 的 BuildAction。

然后要在 UI 中显示正确的图像，您需要一个值转换器，例如：

```
public class GameStateConverter
    : MvxBaseValueConverter
{
    public override object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        return string.Format("gamestates/{0}.png", ((GameState)value).ToString().ToLower());
    }
} 
```

使用 Converters 包装器映射，例如：

```
public class Converters
{
    public readonly GameStateConverter GameState = new GameStateConverter();
} 
```

在 setup.cs 中配置使用：

```
 protected override IEnumerable<Type> ValueConverterHolders
    {
        get { return new[] { typeof(Converters) }; }
    } 
```

有了这个，那么您的 axml 绑定语句将是：

```
 {'AssetImagePath':{'Path':'State', 'Converter':'GameState'}} 
```

* * *

对于使用资源而不是资产的替代方法，请参阅`MvxButtonIconBinding`Іsue [with binding to GridLayout to Android](https://stackoverflow.com/questions/12914544/ssue-with-binding-to-gridlayout-to-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T17:30:46.083

我无法解决问题。我的 MainViewModel.cs

```
public class MainMenuViewModel
    : MvxViewModel
{
    private const string path = "myimage";

    public List<SquareModel> Items { get; set; }

    public IMvxCommand ShowItemCommand
    {
        get
        {
            return new MvxRelayCommand<Type>((type) => this.RequestNavigate(typeof(MainMenuViewModel)));
        }
    }

    public MainMenuViewModel()
    {
        Items = GetCollection();
    }

    public List<SquareModel> GetCollection()
    {
        List<SquareModel> col = new List<SquareModel>();
        for (int i = 0; i < 20; i++)
        {
            col.Add(new SquareModel { ID = i, PathImage = path });
        }
        return col;
    }
} 
```

我的转换.cs

```
public class Converters
{
    public readonly PathImageConverter GameImage = new PathImageConverter();
} 
```

我的 PathImageConverter.cs

```
public class PathImageConverter
    : MvxBaseValueConverter
{
    public override object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        return string.Format("squareresources/{0}.png", value.ToString().ToLower());
    }
} 
```

我的安装程序.cs

```
public class Setup
    : MvxBaseAndroidBindingSetup
{
    public Setup(Context applicationContext)
        : base(applicationContext)
    {
    }

    protected override MvxApplication CreateApp()
    {
        return new App();
    }

    protected override IEnumerable<Type> ValueConverterHolders
    {
        get { return new[] { typeof(Converters.Converters) }; }
    }
} 
```

我的 GameView.axml

```
<cirrious.mvvmcross.binding.android.views.MvxBindableGridView
                  xmlns:android="http://schemas.android.com/apk/res/android"
                  xmlns:local="http://schemas.android.com/apk/res/MyZooSnap.UI"
                  android:layout_width="fill_parent"
                  android:layout_height="fill_parent"
                  android:numColumns="4"
                  android:verticalSpacing="10dp"
                  android:horizontalSpacing="10dp"
                  android:gravity="center"
                  local:MvxItemTemplate="@layout/itemimage"
                  local:MvxBind="{'ItemsSource':{'Path':'Items'}}" /> 
```

我的 ItemImage.axml

```
<ImageView
  xmlns:android="http://schemas.android.com/apk/res/android"
  xmlns:local="http://schemas.android.com/apk/res/MyZooSnap.UI"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:padding="10dp"
  local:MvxBind="{'AssetImagePath':{'Path':'PathImage', 'Converter':'GameImage'}}" 
```

/>

我的用户界面项目：![在此处输入图像描述](../Images/8325c750bbcb017619894cfa6cac4729.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T19:16:50.347

当图像被放置在文件夹资产和指示简单地表明图片的名称 - 它的作品。当它创建另一个文件夹并指定路径时：

```
/asset/folder/image.png
asset/folder/image.png
/folder/image.png
folder/image.png 
```

不工作！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-11T11:37:23.323

```
<Mvx.MvxImageView
    android:layout_width="40dp"
    android:layout_height="40dp"
    local:MvxBind="AssetImagePath PathImage,Converter=GameImage" /> 
```

也应该工作

# ios - 将以下 C++ 代码转换为 Object C 或 C Class

> ID：12925060
> 
> 赞同：0
> 
> 时间：2012-10-16T23:38:32.760
> 
> 标签：ios

我可以将 C++ 代码重命名为 .mm 文件并将项目中的所有 .m 文件更改为 .mm 但是在更改为 .mm 后，其中一个 .m 文件中有一个令人困惑的错误

```
 CFDictionaryRef routeChangeDictionary = inPropertyValue; 
```

它说不能用“const void*”类型的值初始化变量类型“CFDictionaryRef（又名“const_CFDictionary*”）

将所有内容重命名为 .mm 后我不知道这样的错误

无论如何，我有原始的 .CPP 文件 MeterTable.h

```
 #include <stdlib.h>
     #include <stdio.h>
     #include <math.h>

 class MeterTable
 {
public:

MeterTable(float inMinDecibels = -80., size_t inTableSize = 400, float inRoot = 2.0);   
~MeterTable();

float ValueAt(float inDecibels)
{
    if (inDecibels < mMinDecibels) return  0.;
    if (inDecibels >= 0.) return 1.;
    int index = (int)(inDecibels * mScaleFactor);
    return mTable[index];
}
 private:
float   mMinDecibels;
float   mDecibelResolution;
float   mScaleFactor;
float   *mTable;
  }; 
```

MeterTable.CPP #include "MeterTable.h"

```
 inline double DbToAmp(double inDb)
 {
  return pow(10., 0.05 * inDb);
 }

 MeterTable::MeterTable(float inMinDecibels, size_t inTableSize, float inRoot)
: mMinDecibels(inMinDecibels),
mDecibelResolution(mMinDecibels / (inTableSize - 1)), 
mScaleFactor(1\. / mDecibelResolution)
 {
if (inMinDecibels >= 0.)
{
    printf("MeterTable inMinDecibels must be negative");
    return;
}

mTable = (float*)malloc(inTableSize*sizeof(float));

double minAmp = DbToAmp(inMinDecibels);
double ampRange = 1\. - minAmp;
double invAmpRange = 1\. / ampRange;

double rroot = 1\. / inRoot;
for (size_t i = 0; i < inTableSize; ++i) {
    double decibels = i * mDecibelResolution;
    double amp = DbToAmp(decibels);
    double adjAmp = (amp - minAmp) * invAmpRange;
    mTable[i] = pow(adjAmp, rroot);
} 
```

}

```
 MeterTable::~MeterTable()
{
free(mTable);
} 
```

将 C++ 文件重写为真正的 Object C 类的任何想法？它很短。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T23:53:15.923

当我混合使用 C++ 和 Objective-C 代码时，我遇到了非常难以追踪的问题。如果您从 XCode 中的属性将文档设置为 Objective C++，请确保对调用 C++ 代码的 Objective-C 文件执行相同操作，并且 #include 所需的 C++ 头文件。

我以前有过这个，它会收到最奇怪的错误消息。如果不是这种情况，很抱歉在这里混淆了答案。有时，当有多个头文件（包括 C++ 类引用）时，追踪起来会变得更加困难。将所有文件（如果不是大型项目）设置为“Objective C++”不会有什么坏处。

# r - 对数据框中组内的行进行编号

> ID：12925063
> 
> 赞同：214
> 
> 时间：2012-10-16T23:38:41.953
> 
> 标签：r, dataframe, r-faq

使用与此类似的数据框：

```
set.seed(100)  
df <- data.frame(cat = c(rep("aaa", 5), rep("bbb", 5), rep("ccc", 5)), val = runif(15))             
df <- df[order(df$cat, df$val), ]  
df  

   cat        val  
1  aaa 0.05638315  
2  aaa 0.25767250  
3  aaa 0.30776611  
4  aaa 0.46854928  
5  aaa 0.55232243  
6  bbb 0.17026205  
7  bbb 0.37032054  
8  bbb 0.48377074  
9  bbb 0.54655860  
10 bbb 0.81240262  
11 ccc 0.28035384  
12 ccc 0.39848790  
13 ccc 0.62499648  
14 ccc 0.76255108  
15 ccc 0.88216552 
```

我正在尝试在每个组中添加一个带有编号的列。这样做显然没有使用 R 的力量：

```
 df$num <- 1  
 for (i in 2:(length(df[,1]))) {  
   if (df[i,"cat"]==df[(i-1),"cat"]) {  
     df[i,"num"]<-df[i-1,"num"]+1  
     }  
 }  
 df  

   cat        val num  
1  aaa 0.05638315   1  
2  aaa 0.25767250   2  
3  aaa 0.30776611   3  
4  aaa 0.46854928   4  
5  aaa 0.55232243   5  
6  bbb 0.17026205   1  
7  bbb 0.37032054   2  
8  bbb 0.48377074   3  
9  bbb 0.54655860   4  
10 bbb 0.81240262   5  
11 ccc 0.28035384   1  
12 ccc 0.39848790   2  
13 ccc 0.62499648   3  
14 ccc 0.76255108   4  
15 ccc 0.88216552   5 
```

什么是这样做的好方法？

* * *

## 回答 #1

> 赞同：343
> 
> 时间：2012-10-16T23:41:50.337

使用`ave`,或: `ddply`_`dplyr``data.table`

```
df$num <- ave(df$val, df$cat, FUN = seq_along) 
```

或者：

```
library(plyr)
ddply(df, .(cat), mutate, id = seq_along(val)) 
```

或者：

```
library(dplyr)
df %>% group_by(cat) %>% mutate(id = row_number()) 
```

或（最有效的内存，因为它通过引用分配`DT`）：

```
library(data.table)
DT <- data.table(df)

DT[, id := seq_len(.N), by = cat]
DT[, id := rowid(cat)] 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2017-10-06T20:01:39.797

为了使这个[r-faq](/questions/tagged/r-faq "显示标记为“r-faq”的问题")`sequence`问题更完整，使用and的基本 R 替代方案`rle`：

```
df$num <- sequence(rle(df$cat)$lengths) 
```

这给出了预期的结果：

> ```
> > df
>    cat        val num
> 4  aaa 0.05638315   1
> 2  aaa 0.25767250   2
> 1  aaa 0.30776611   3
> 5  aaa 0.46854928   4
> 3  aaa 0.55232243   5
> 10 bbb 0.17026205   1
> 8  bbb 0.37032054   2
> 6  bbb 0.48377074   3
> 9  bbb 0.54655860   4
> 7  bbb 0.81240262   5
> 13 ccc 0.28035384   1
> 14 ccc 0.39848790   2
> 11 ccc 0.62499648   3
> 15 ccc 0.76255108   4
> 12 ccc 0.88216552   5 
> ```

如果`df$cat`是因子变量，则需要`as.character`先将其包装：

```
df$num <- sequence(rle(as.character(df$cat))$lengths) 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2018-09-22T07:40:42.287

这是一个小的改进技巧，允许在组内排序“val”：

```
# 1\. Data set
set.seed(100)
df <- data.frame(
  cat = c(rep("aaa", 5), rep("ccc", 5), rep("bbb", 5)), 
  val = runif(15))             

# 2\. 'dplyr' approach
df %>% 
  arrange(cat, val) %>% 
  group_by(cat) %>% 
  mutate(id = row_number()) 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2019-06-28T19:52:34.677

另`dplyr`一种可能是：

```
df %>%
 group_by(cat) %>%
 mutate(num = 1:n())

   cat      val   num
   <fct>  <dbl> <int>
 1 aaa   0.0564     1
 2 aaa   0.258      2
 3 aaa   0.308      3
 4 aaa   0.469      4
 5 aaa   0.552      5
 6 bbb   0.170      1
 7 bbb   0.370      2
 8 bbb   0.484      3
 9 bbb   0.547      4
10 bbb   0.812      5
11 ccc   0.280      1
12 ccc   0.398      2
13 ccc   0.625      3
14 ccc   0.763      4
15 ccc   0.882      5 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2018-06-18T09:28:45.737

我想`data.table`使用该函数添加一个变体，该`rank()`函数提供了更改排序的额外可能性，从而使其比`seq_len()`解决方案更灵活，并且与 RDBMS 中的 row_number 函数非常相似。

```
# Variant with ascending ordering
library(data.table)
dt <- data.table(df)
dt[, .( val
   , num = rank(val))
    , by = list(cat)][order(cat, num),]

    cat        val num
 1: aaa 0.05638315   1
 2: aaa 0.25767250   2
 3: aaa 0.30776611   3
 4: aaa 0.46854928   4
 5: aaa 0.55232243   5
 6: bbb 0.17026205   1
 7: bbb 0.37032054   2
 8: bbb 0.48377074   3
 9: bbb 0.54655860   4
10: bbb 0.81240262   5
11: ccc 0.28035384   1
12: ccc 0.39848790   2
13: ccc 0.62499648   3
14: ccc 0.76255108   4

# Variant with descending ordering
dt[, .( val
   , num = rank(desc(val)))
    , by = list(cat)][order(cat, num),] 
```

在 2021-04-16 上编辑以使降序和升序之间的切换更加安全

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2012-10-16T23:51:06.233

这是一个使用`for`按组循环而不是按行循环的选项（就像 OP 一样）

```
for (i in unique(df$cat)) df$num[df$cat == i] <- seq_len(sum(df$cat == i)) 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2020-01-10T13:55:50.247

使用中的`rowid()`函数`data.table`：

```
> set.seed(100)  
> df <- data.frame(cat = c(rep("aaa", 5), rep("bbb", 5), rep("ccc", 5)), val = runif(15))
> df <- df[order(df$cat, df$val), ]  
> df$num <- data.table::rowid(df$cat)
> df
   cat        val num
4  aaa 0.05638315   1
2  aaa 0.25767250   2
1  aaa 0.30776611   3
5  aaa 0.46854928   4
3  aaa 0.55232243   5
10 bbb 0.17026205   1
8  bbb 0.37032054   2
6  bbb 0.48377074   3
9  bbb 0.54655860   4
7  bbb 0.81240262   5
13 ccc 0.28035384   1
14 ccc 0.39848790   2
11 ccc 0.62499648   3
15 ccc 0.76255108   4
12 ccc 0.88216552   5 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-05-04T00:14:45.173

非常简单，整洁的解决方案。

**整个data.frame的行号**

```
library(tidyverse)

iris %>%
  mutate(row_num = seq_along(Sepal.Length)) %>%
  head

    Sepal.Length Sepal.Width Petal.Length Petal.Width    Species row_num
1            5.1         3.5          1.4         0.2     setosa       1
2            4.9         3.0          1.4         0.2     setosa       2
3            4.7         3.2          1.3         0.2     setosa       3
..           ...         ...          ...         ...     ......     ...
148          6.5         3.0          5.2         2.0  virginica     148
149          6.2         3.4          5.4         2.3  virginica     149
150          5.9         3.0          5.1         1.8  virginica     150 
```

**data.frame 中按组的行号**

```
iris %>% 
  group_by(Species) %>% 
  mutate(num_in_group=seq_along(Species)) %>% 
  as.data.frame

    Sepal.Length Sepal.Width Petal.Length Petal.Width    Species num_in_group
1            5.1         3.5          1.4         0.2     setosa            1
2            4.9         3.0          1.4         0.2     setosa            2
3            4.7         3.2          1.3         0.2     setosa            3
..           ...         ...          ...         ...     ......           ..
48           4.6         3.2          1.4         0.2     setosa           48
49           5.3         3.7          1.5         0.2     setosa           49
50           5.0         3.3          1.4         0.2     setosa           50
51           7.0         3.2          4.7         1.4 versicolor            1
52           6.4         3.2          4.5         1.5 versicolor            2
53           6.9         3.1          4.9         1.5 versicolor            3
..           ...         ...          ...         ...     ......           ..
98           6.2         2.9          4.3         1.3 versicolor           48
99           5.1         2.5          3.0         1.1 versicolor           49
100          5.7         2.8          4.1         1.3 versicolor           50
101          6.3         3.3          6.0         2.5  virginica            1
102          5.8         2.7          5.1         1.9  virginica            2
103          7.1         3.0          5.9         2.1  virginica            3
..           ...         ...          ...         ...     ......           ..
148          6.5         3.0          5.2         2.0  virginica           48
149          6.2         3.4          5.4         2.3  virginica           49
150          5.9         3.0          5.1         1.8  virginica           50 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-10-27T12:51:59.917

另一个**基本的 R 解决方案**是`split`每个数据框`cat`，之后使用`lapply`：添加带有数字的列`1:nrow(x)`。最后一步是让您的最终数据框返回`do.call`，即：

```
 df_split <- split(df, df$cat)
        df_lapply <- lapply(df_split, function(x) {
          x$num <- seq_len(nrow(x))
          return(x)
        })
        df <- do.call(rbind, df_lapply) 
```

# tabcontrol - Windows 窗体错误提供程序不显示在自定义选项卡控件中

> ID：12925064
> 
> 赞同：2
> 
> 时间：2012-10-16T23:38:42.493
> 
> 标签：tabcontrol, windows-forms-designer, errorprovider

我正在尝试在 Windows 窗体中构建向导框架。我已经设法从这个网站和其他网站收集了很多有用的技巧，这些技巧让我非常接近成功。但是，我在向导*第一页以外的任何选项卡页上显示 ErrorProvider 时遇到问题。*

我的向导控件是一个用户控件。它包含一个我从 TabControl 派生的自定义选项卡控件，以便我可以隐藏选项卡并忽略使用按键在选项卡之间导航的尝试，以及控件底部通常的返回/下一步/完成/取消按钮集合。

当我点击下一步按钮时，我使用反射允许我在属于向导控件的特定 TabPage 上引发验证事件。（我*不想*验证整个 TabControl，只验证当前活动页面。）当我这样做时，我在调试器中看到我的当前选项卡页面上控件的验证例程被正确调用，我看到我'我调用了我附加到特定控件（在本例中为 TextBox）的 ErrorProvider，并带有有效的错误消息。我在验证例程中将 CancelEventArgs 的 Cancel 设置为 true，并由使用反射机制的代码拾取，以便我看到我失败并且不更改选项卡。我成功地将焦点设置在验证失败的控件上。

因此，所有这些似乎都工作得很好。

不幸的是，除非我在第一个标签页上，否则我看不到 ErrorProvider 令人愉快的闪烁图标*。*对于所有其他标签页，根本看不到任何消息。

我很困惑。有什么想法吗？如果有帮助，我可以提供代码片段。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-19T10:59:38.413

我假设在您的情况下，移动到向导下一步的按钮位于**外部**（下方）`TabControl`

我注意到如果我在不释放鼠标按钮的情况下按下按钮，图标会正确显示。尽管发生了验证错误，但容器外部的按钮似乎获得了焦点事件（通常您将无法离开活动控件）。

我通过为按钮`MouseUp`事件注册一个事件处理程序以“重新聚焦”来解决这个问题`TabControl`：

```
private void cmdOK_MouseUp(object sender, MouseEventArgs e)
{
    tabControl1.Focus();
} 
```

**注意：**您还需要将表单`ActiveControl`属性设置为验证失败的控件之一。

# zend-framework - Zend 1.12 不允许使用 Rest PUT 方法

> ID：12925067
> 
> 赞同：2
> 
> 时间：2012-10-16T23:38:53.463
> 
> 标签：zend-framework, zend-rest

自从我迁移到 AWS 并更新到 PHP 5.4 和 Zend 1.12 后，我遇到了 PUT & DELETE 方法的问题。

一个简单的例子：

/** Zend 1.12 **/

/** 引导/路由 **/

```
$front = \Zend_Controller_Front::getInstance();
$front->setParam('bootstrap',$this);
//REST API
$router = $front->getRouter();
$restRoute = new Zend_Rest_Route($front, array(), array(
    'default' => array('rest'),
));
$router->addRoute('rest', $restRoute); 
```

/** 休息控制器 **/

```
//module : default 

class RestController extends  \Zend_Rest_Controller
public function init(){
    parent::init();
    $this->_helper->viewRenderer->setNoRender(true);
    $this->_helper->layout->disableLayout();
}
public function headAction(){}

public function indexAction()
{
    Throw new AppException(Translator::translate('index not yet implemented...'));
}
public function getAction()
{
    die('get');
}
public function putAction(){
 die('put');
} 
```

/ *** 测试用例 *** /

```
curl -X GET http://XXXX/rest/MS4xMjU2LjEyNTguMTI2MS4tbW9kZWxzXGNvcmVcbW9kZWxcZXhlcmNpc2VcZXhlcmNpc2VfcXVlc3Rpb24tMTQy 
```

结果：得到 ===> OK

```
curl -X PUT http://XXXX/rest/MS4xMjU2LjEyNTguMTI2MS4tbW9kZWxzXGNvcmVcbW9kZWxcZXhlcmNpc2VcZXhlcmNpc2VfcXVlc3Rpb24tMTQy 
```

结果 ：

```
<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<html><head>
<title>405 Method Not Allowed</title>
</head><body>
<h1>Method Not Allowed</h1>
<p>The requested method PUT is not allowed for the URL /index.php.</p>
<hr>
<address>Apache/2.2.16 (Debian) Server at XXXXX Port 80</address>
</body></html> 
```

===> 不好

我不必使用 WebDav（或其他）Apache 插件来启用 PUT/DELETE 请求。PHP 处理程序处理这个问题，而不是 Apache。那么，为什么 GET 可以，而 PUT 不行呢？为什么 Apache 说的是 index.php 而不是 /rest/RestController.php？

我看到 Zend 从 1.12 开始更新它的 Zend_Rest_Controller。现在，我必须声明“headAction”函数，但我没有找到关于这一点的文档......

如果你有任何想法...

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T06:36:14.323

问题可能源于 Apache 配置。也许你应该继续添加类似的东西

```
<Directory />
    AllowOverride All
    <Limit GET HEAD POST PUT DELETE OPTIONS>
        Order Allow,Deny
        Allow from all
    </Limit>
</Directory> 
```

到您的 apache 配置。

看看这个[答案](https://serverfault.com/questions/148865/enable-put-method-on-apache-for-any-php-script)。

# powershell - 组扫描器 - GetQADGroupMember

> ID：12925070
> 
> 赞同：1
> 
> 时间：2012-10-16T23:39:10.527
> 
> 标签：powershell, quest

我正在尝试遍历特定域上的所有组，并为每个组执行成员数量的验证，如果某个组超过阈值，则标记它并构建报告。

我想我应该获取所有成员然后执行验证，但我坚持这一点，例如，Get-QADGroupMember 可以查看所有组，或者您必须输入特定组？

例如，如果我尝试使用特定的组，

```
$a = Get-QADGroupMember 'localcontoso.com\Administrators' 
```

我越来越，

```
Get-QADGroupMember : Cannot resolve directory object for the given identity: 'localcontoso.com\Administrators'. 
```

欢迎任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T07:00:20.650

如果您从同一域计算机查询 AD，请尝试以下操作：

```
$a = Get-QADGroupMember 'localcontoso.com/builtin/Administrators' 
```

或者

```
$a = Get-QADGroupMember Administrators 
```

如果您从不同的域查询：

```
$a = Get-QADGroupMember administrators -Service DomainControllerName -credential (get-credential) 
```

注意：`-credential` 可能不需要

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T09:58:35.640

使用以下单行代码，您不必弄乱组标识的格式。它获取所有组，计算阈值成员并仅输出成员计数大于 $threshold 中指定的值的组

```
Get-QADGroup -SizeLimit 0 | 
Where-Object { (Get-QADGroupMember $_ | Measure-Object).Count -gt $threshold } 
```

# android - 将 EasyTracker 与 FragmentActivity 和 ActionBarSherlock 一起使用

> ID：12925078
> 
> 赞同：1
> 
> 时间：2012-10-16T23:40:11.543
> 
> 标签：android, google-analytics, actionbarsherlock

我目前在我的应用程序中使用 ActionBarSherlock，我正在寻找实现 Google 的 EasyTracker 进行分析。

我已经看到 TrackedActivity 只是在生命周期的不同部分调用几个函数（getTracker()、trackStartActivity(Context)、trackActivityStop(Context) 和 trackActivityRetainNonConfigurationInstance()）。

由于我已经将 SherlockFragmentActivity 扩展为我的基类，因此我需要将这些调用包含在它们各自的生命周期部分中。我遇到的一个问题是以下电话：

```
@Override
public Object onRetainNonConfigurationInstance() 
{
     Object o = super.onRetainNonConfigurationInstance();

     // This call is needed to ensure that configuration changes (like
     // orientation) don't result in new sessions.  Remove this line if you want
     // configuration changes to for a new session in Google Analytics.
     EasyTracker.getTracker().trackActivityRetainNonConfigurationInstance();
     return o;
} 
```

问题是这个调用在 FragmentActivity 中是最终的，所以我认为它不能被覆盖。

我应该如何处理轮换，以便新会话不会扰乱服务器发送的数据？

另外，作为旁注，在 ga_debug 参数设置为 true 的情况下调用 trackStartActivity(Context) 是否应该有 logcat 输出？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T00:08:11.287

我发现的最佳解决方案是在 onSaveInstanceState 中添加一个布尔标志，这样会话活动计数器就不会增加。考虑到所有事情都非常简单:)

# c - 计算机系统问题 2 中期学习指南

> ID：12925080
> 
> 赞同：2
> 
> 时间：2012-10-16T23:40:25.767
> 
> 标签：c

所以这是我们在学习指南中遇到的一个问题：

一个朋友想写一个程序，它有一个父进程和一个子进程，允许父进程计算子进程中的事件。这个想法是孩子在每个事件中向父母发送一个信号（SIGUSR2）。父级有一个用于 SIGUSR2 的信号处理程序，每次处理程序执行时都会增加一个计数器。然后，父母可以在孩子终止后打印计数。

你的朋友试图在下面写一个原型。孩子向父母发送 5 个信号。你的朋友尝试在第 6 行和第 20 行调用 sleep 来模拟父母的工作和孩子的工作。他预计第 27 行打印的计数器值为 5。

但是，由于睡眠时间如下所示，他始终打印出值 1，而不是 5。

他问你为什么他得到1，而不是5。你的解释是什么？

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <signal.h>
#include <sys/wait.h>

1   int counter = 0;
2   
3   void handler(int sig) 
4   {
5       counter++;
6       sleep(1); /* Parent does some work in the handler */
7       return;
8   }
9   
10  int main() 
11  {
12      int i;
13  
14      signal(SIGUSR2, handler);
15  
16      if (fork() == 0) {  /* Child */
17      for (i = 0; i < 5; i++) {
18          kill(getppid(), SIGUSR2);
19          printf("sent SIGUSR2 to parent\n");
20          sleep(1); /* Child does some work */
21    
22      }
23      exit(0);
24      }
25  
26      waitpid(-1, NULL, 0);
27      printf("counter=%d\n", counter); 
28      exit(0);
29  } 
```

它对我来说看起来是正确的，当我获取代码并运行它时，它给我的输出是 5。所以我想我的问题是有什么我没有看到或者这是一个错字？几个小时前我给我的教授发了电子邮件，但仍然没有任何消息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T01:15:27.797

从您的描述中不清楚哪个进程有哪个睡眠时间，但是如果父母的时间比孩子的时间长，那么孩子可能会在父母有机会处理所有信号之前终止。考虑一个极端情况，即父母在第一个信号被捕捉到很长时间后进入睡眠状态，以至于孩子在父母醒来之前就退出了；在第一个之后它永远不会看到任何信号。

# c++ - 第一次使用函数，不知道为什么我的程序什么也没做？

> ID：12925084
> 
> 赞同：0
> 
> 时间：2012-10-16T23:40:51.337
> 
> 标签：c++

我的程序应该计算所有数字平方的总和，直到用户输入。例如，如果用户输入 2，函数将执行：(1^2 + 2^2) 但是我的程序在运行时拒绝执行任何操作。（不确定这是功能问题还是主体问题。）

```
#include <iostream>
#include <cmath>
using namespace std;

int sumofsquares (int num)

{
int i;
int answer;

for(int i=0; i <= num; i++){
answer = (num * num)+ num;
}
return (answer);

}

int main(){
int num;
cout<< "Enter a number" <<endl;
cin >> num;
while( num != -1){
sumofsquares(num);
}
cout<< "The sum of squares is "<< num <<endl;

return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T23:42:23.910

您必须将函数的返回值分配给某些东西-在您的情况下，因为您正在打印`num`，所以`num`它本身：

```
num = sumofsquares(num); 
```

`num`完成此操作后，如果不是，您的函数将进入无限循环，`-1`因为您从未修改过它。你可能的意思是：

```
while( num != -1){
   cin << num;
}
sumofsquares(num); 
```

在此之后，您将留下函数中的错误：

```
int answer;
for(int i=0; i <= num; i++){
answer = (num * num)+ num;
} 
```

应该

```
int answer = 0;
for(int i=0; i <= num; i++){
answer += i*i;
} 
```

[**然而，真正的问题**是您缺少基本的 C++/逻辑知识，唯一的解决方案是从一本好书中学习。](https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T23:42:51.367

`sumofsquares`变化中：

```
int answer; 
```

至：

```
int answer = 0; 
```

这样就`answer`可以正确初始化了。

您还需要更改：

```
answer = (num * num)+ num; 
```

至：

```
answer = (i * i) + answer; 
```

否则，您将平方错误的变量并将其添加到错误的累加器中。

有关解决问题的信息，请参阅下面的其他答案`main`。

此外，您应该学会正确地格式化您的代码——这将使他人和您自己更容易阅读、调试和维护。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T23:42:46.423

你只是调用了函数而没有得到它的返回值。

第一个选项：

```
cout<< "The sum of squares is "<< sumofsquares(num) <<endl; 
```

第二种选择：

```
num=sumofsquares(num);
cout<< "The sum of squares is "<< num <<endl; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T23:42:56.017

它应该是

```
int answer = 0;
...
...
...
answer = answer + (i * i); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T23:43:10.960

你的程序卡在`while`循环中，因为终止条件`num != -1`永远不会改变。这是因为变量`num`是按值传递`sumofsquares`的，而不是按引用传递的。因此，更改`num`变量 in`sumofsquares`不会影响`num`变量 in `main`。将您的`while`声明替换为：

```
while (num != -1) {
    num = sumofsquares(num);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-17T00:13:58.300

另外，您应该注意您使用 cin 来初始化 num，因此在其他人指出的问题中，请记住您应该使用 cin 来初始化字符串/字符，然后将其更改为整数：

```
#include <iostream>
#include <cmath>
#include <string>
using namespace std;

int sumofsquares (int num){
  //should have initialized answer to zero
  int i, answer = 0;
  //this for loop now accomplishes what you want
  for(i=0; i <= num; i++){
    answer = (i^2) + answer;
  }
  return (answer);
}

int main(){
  int num, ans;
  string input;
  cout<< "Enter a number" <<endl;
  cin >> input;
  num = atoi(input.c_str());
  //this was an infinite loop, here's how to check what you wanted to check.
  if (num >= 0){
    ans = sumofsquares(num);
    cout << "The sum of squares is: " << ans << endl;
    return 0;
  }
  else { 
    cout<< "Error: The number you have called this function with is invalid." << endl;
    return 0;
  }
} 
```

沿着这些路线的东西......

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-17T00:02:13.067

干得好！

```
#include <iostream>
#include <cmath>
using namespace std;

//Prototype
int sumofsquares(int num);

void main()
{
    int num;  
    int answer;

    cout >> "Enter a number.\n";
    //Get number input
    cin << num;
    //Call your workhorse function
    answer = sumofsquares(num);
    //Double check my >> directions :P  Format may be wrong here 
    cout >> "Sum of squares for " >> num >> "is " >> answer >> "\n";
}

int sumofsquares(num)
{
    int answer;
    int i = 0;

    for (i = 0; i < num; i++)
    {
        answer = answer + ( i * i );
    }

    return answer;
} 
```

# ios - iOS/C/C++/Cocos2D：如何“模拟”电吉他拨片滑音

> ID：12925088
> 
> 赞同：5
> 
> 时间：2012-10-16T23:41:39.930
> 
> 标签：ios, cocos2d-iphone, synthesizer

我想这是一个相当奇怪的问题，但让我们把它放在正确的上下文中。我不是在寻找模拟整个吉他声音范围或编写自己的合成器，也不是模拟整个吉他（[请在此处查看此类问题的答案](https://stackoverflow.com/questions/11814238/how-to-generate-a-real-bass-guitar-sound-either-in-c-c-or-java)）。如果可能的话，我“只是”想在不激怒音乐家的情况下**给出幻灯片拾音器的想法。**如果声音类型不清楚，请看这里：

[http://youtu.be/y4_wjNRLe4M?t=1m39s](http://youtu.be/y4_wjNRLe4M?t=1m39s) [http://youtu.be/VdrFTyUCGYs?t=2m57s](http://youtu.be/VdrFTyUCGYs?t=2m57s)

我想给用户一种感觉，如果滑动条向右移动，则会在与滑动条的相对移动成比例的时间长度内产生向上滑动的声音。相反，如果用户将滑动条向左移动，则将使用相同的概念播放向下滑动的声音。

以供参考。我正在使用 Cocos2D 2.0 和 iOS 5.1。

[我发现和我在Cocos2d Cookbook](http://cocos2dcookbook.com/)第6章“修改音频属性”段落后的效果有点相似（这里是第4章到第6章demo示例中[免费App](http://itunes.apple.com/us/app/cocos2d-cookbook-ch4-6/id489395357?mt=8)的链接），作者修改了一个单声道合成器音调根据用户在屏幕上的手指位置改变音高和增益（在仍不清楚的情况下，请参阅[此视频](http://cocos2dcookbook.com/explore-the-book/chapter-6-audio/modifying-audio-properties/)以了解我正在谈论的示例）。

```
 //Play our sound with custom pitch and gain
    CDSoundSource *sound = [[sae soundSourceForFile:@"synth_tone_mono.caf"] retain];
    [sound play];
    sound.looping = YES;
    [notes setObject:sound forKey:key];
    sound.pitch = point.x/240.0f;
    sound.gain = point.y/320.0f; 
```

这并没有给出最好的解决方案，而是一个不错的近似值。任何人都可以提出更好的建议吗？

编辑：我正在通过录制等于最大长度的向上和向下滑动声音来接近这一点。然后在滑动拾取条移动后开始声音，并在移动完成后停止声音（在 Cocos2d 中，这将对应于代表滑动拾取的特定精灵上的触摸开始和触摸结束）。然后将滑动拾取器恢复到原始位置，以避免必须处理从不同位置开始滑动的情况。当然是一个近似值，我会使用它，因为它在开发时间和计算性能方面都很便宜（我猜任何可以模拟声音的东西在计算上都会更加“昂贵”）。

# php - 在 PHP 中为插件创建选项页面：get_option()

> ID：12925102
> 
> 赞同：0
> 
> 时间：2012-10-16T23:44:15.160
> 
> 标签：php, wordpress

我正在尝试为 wordpress 创建一个微笑插件。我需要能够为我的自定义选项更新 get_option() 变量。如果您知道下面的脚本有什么问题，请告诉我。

它将字段添加到数据库并显示设置页面，但当我点击“保存更改”按钮时它不会更新它们。

请让我知道我做错了什么......

**我无法从插件的选项页面更改任何选项值...**

```
> <?php /* Plugin Name: Mobile Marketing Mob plugin Plugin URI:
> http://www.example.co Description: A Simple plugin
> Version: 1.0 Author: TxtClub Author URI:
> http://www.example.com License: GPL
> */
> 
> 
> /* Runs when plugin is activated */
> register_activation_hook(__FILE__,'mmm_install'); 
> 
> /* Runs on plugin deactivation*/ register_deactivation_hook( __FILE__,
> 'mmm_remove' );
> 
> function mmm_install() { /* Creates new database field */
> add_option("mmm-token", 'e.g. 14859298165079c736f31a6', '', 'yes');
> add_option("mmm-spliton", '0', '', 'yes'); add_option("mmm-senderid",
> 'e.g. Chico\'s Garage', '', 'yes'); }
> 
> function mmm_remove() { /* Deletes the database field */
> delete_option('mmm-token'); delete_option('mmm-spliton');
> delete_option('mmm-senderid'); }
> 
> 
> 
> //create custom options page add_action( 'admin_menu',
> 'my_plugin_menu' );
> 
> function my_plugin_menu() { $page_title = 'Mobile Marketing Mob
> Settings'; $menu_title = 'MMM Settings'; $capability =
> 'manage_options'; $menu_slug = 'mobile-marketing-mob-settings';
> $function = 'my_plugin_options'; add_options_page( $page_title,
> $menu_title, $capability, $menu_slug, $function );
> 
> 
> add_action( 'admin_init', 'register_mysettings' ); }
> 
> function register_mysettings() {  //register our settings
>   register_setting( 'mmm-options-group', 'mmm-token' );
>   register_setting( 'mmm-options-group', 'mmm-spliton' );
>   register_setting( 'mmm-options-group', 'mmm-senderid' ); }
> 
> 
> 
> function my_plugin_options() {    if ( !current_user_can(
> 'manage_options' ) )  {       wp_die( __( 'You do not have sufficient
> permissions to access this page.' ) );    }   else { ?> <h2> Mobile
> Marketing Mob Settings </h2>
>       
>         
>         <form method="post" action="<?php $_SERVER['PHP_SELF']?>">
>     <?php settings_fields( 'mmm-options-group' ); ?>
>     <!-- Wordpress documentation is wrong and suggests do_settings (which is for older versions below 2.7) -->
>     <?php do_settings_sections( 'mmm-options-group' ); ?>
>     <table class="form-table">
>         <tr valign="top">
>         <th scope="row">Unique token</th>
>         <td><input type="text" name="mmm-token" value="<?php echo get_option('mmm-token'); ?>" /></td>
>         </tr>
>          
>         <tr valign="top">
>         <th scope="row">Split test on</th>
>         <td><input type="text" name="mmm-spliton" value="<?php echo get_option('mmm-spliton'); ?>" />  (0 = off  1 = on)</td>
>         </tr>
>         
>         <tr valign="top">
>         <th scope="row">Sender ID</th>
>         <td><input type="text" name="mmm-senderid" value="<?php echo get_option('mmm-senderid'); ?>" /></td>
>         </tr>
>     </table>
>     
>     <?php submit_button(); ?>
> 
> </form> </div>
>         
>         
>           <?php } } ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T09:04:41.830

尝试使用`update_option()`更新选项。

`add_option()`添加选项但它不会更新它，`update_option()`如果它不存在也会创建它。

希望这可以帮助。

# java - 基于 ArrayList 的二叉树 - Java

> ID：12925103
> 
> 赞同：2
> 
> 时间：2012-10-16T23:44:18.573
> 
> 标签：java, arraylist, binary-tree

我目前正在实施`ArrayList`基于`binary tree in Java`. 我试图弄清楚如何做到这一点，但我遇到了墙。有一堆`methods`我`class`应该实现的，但是每次我尝试一些东西时，它似乎都不起作用。

我们有`Position objects`由 标识的`Position<E>`。在 this中，`class`我们有一个`array list`that is`private`和 a `root variable`，两者都`accessible`只有 this `class`，所以 the`size()` `method`和`isEmpty()`方法很简单。但是，在实现以下方法时遇到了一些麻烦：`hasLeft(Position<E>)`,`hasRight(Position<E>)` `left(Position<E>), right(Position<E>),` `addRoot(E e)`等... Left 和 Right 方法只返回`left child`and `right child of a node`。我熟悉`ArrayList`，但在`binary tree class`与他们一起实施 a 时并不熟悉。

我将如何实施这些方法？我被困住了，如果能得到任何帮助，我将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T02:16:44.340

当您将二叉树编写为数组时，您正在构建通常称为堆的东西。堆有很好的文档记录，本文将为您详细介绍它们是如何实现的：

[http://en.wikipedia.org/wiki/Binary_heap](http://en.wikipedia.org/wiki/Binary_heap)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T02:27:59.680

您可以在连续数组的顶部构建二叉树。基本上，对于数组第 i 个位置的元素，具有基于 0 的索引：

```
left(i) : 2 * i + 1
right(i) : 2 * i + 2 
```

# emacs - 如何在 emacs 上打开 xiki？

> ID：12925104
> 
> 赞同：1
> 
> 时间：2012-10-16T23:44:22.820
> 
> 标签：emacs, xiki

我安装了 xiki，我什至让它在 emacs 上运行，但是我关闭了 emacs，现在 xiki 页面没有出现。如何重新打开它？另外，是否有 xiki 的 wiki 页面？我在任何地方都找不到信息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T17:44:16.857

只需键入

```
- welcome/ 
```

和 Ctrl-Enter。您将获得欢迎菜单。

不，没有 wiki 页面，但如果你输入

```
- menu/ 
```

你应该得到几乎所有的东西。

# jquery - 将 XLS 读入 Web 数据网格

> ID：12925105
> 
> 赞同：0
> 
> 时间：2012-10-16T23:44:29.200
> 
> 标签：jquery, spreadsheet, xls

我正在寻找一个好的解决方案：

*   在 Web 表单上的复选框中选择项目（复选框将动态读取 csv）
*   从 XLS 文件中读取
*   在选项中设置要选择的列
*   将数据放入具有多个列和标题的数据网格中
*   合计最后一行的数据。

是否有一个简单的解决方案可以使用 jquery 或某种基于 Web 的电子表格来实现这一点？任何建议表示赞赏。

```
<!DOCTYPE html>
<html>
<head>
<script src="media/js/jquery.js" type="text/javascript"></script> 
<script src="media/js/jquery.dataTables.js" type="text/javascript"></script> 

... js table code provided in answer ...

<link href="media/css/jquery.dataTables.css" rel="stylesheet" type="text/css" />
</head>
<body>
    <div id="demo"></div> 
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T00:57:35.900

我不确定是否有任何一体化解决方案。但这就是我会做的。我已经修改了[如何使用 javascript 从 *.CSV 文件中读取数据的答案？](https://stackoverflow.com/questions/7431268/how-read-data-from-csv-file-using-javascript)并为此添加了 jquery 数据表支持。我已经对数据表中的标题进行了硬编码，但这很容易变成动态的。

**CSV 文件样本**（另存为 data.txt 文件）

```
heading1,heading2,heading3,heading4,heading5
value1_1,value2_1,value3_1,value4_1,value5_1
value1_2,value2_2,value3_2,value4_2,value5_2 
```

**HTML**

```
<div id="demo"></div>    
<script type="text/javascript">
    $(document).ready(function () {
        $.ajax({
            type: "GET",
            url: "data.txt",
            dataType: "text",
            success: function (data) {
                processData(data);
            }
        });

        function processData(allText) {
            var allTextLines = allText.split(/\r\n|\n/);
            var headers = allTextLines[0].split(',');
            var lines = [];

            for (var i = 1; i < allTextLines.length; i++) {
                var data = allTextLines[i].split(',');
                if (data.length == headers.length) {

                    var tarr = [];
                    for (var j = 0; j < headers.length; j++) {
                        tarr.push(data[j]);
                    }
                    lines.push(tarr);
                }
            }

            $('#demo').html('<table cellpadding="0" cellspacing="0" border="0" class="display" id="example"></table>');
            $('#example').dataTable({
                "aaData": lines,
                "aoColumns": [
                    { "sTitle": "heading1" },
                    { "sTitle": "heading2" },
                    { "sTitle": "heading3" },
                    { "sTitle": "heading4" },
                    { "sTitle": "heading5" }
                ]
            });

        }
    });

</script> 
```

# jquery - 访问元素文本时的问题

> ID：12925106
> 
> 赞同：0
> 
> 时间：2012-10-16T23:44:49.683
> 
> 标签：jquery

HTML：

```
<table>
  <tr>
    <td>wddsa</td>
    <td>dffs</td>
  </tr>
</table> 
```

JavaScript：

```
$('tbody tr').each(function() {
    name2 = $(this).children("td:first").text;
    alert(name2);
}); 
```

返回一堆函数和 jquery 代码。可能来自 jquery.min。这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T23:47:02.303

您正在访问实际功能，而不是执行它。（`.text`是一个函数，不是一个变量，所以你需要执行它来获取它的返回值`.text()`）。

```
name2 = $(this).children("td:first").text(); 
```

# code-injection - 启动外部进程，然后向其注入 dll

> ID：12925107
> 
> 赞同：0
> 
> 时间：2012-10-16T23:44:49.943
> 
> 标签：code-injection, external-process

我有一个游戏，一个在线游戏的客户端，那个游戏是另一个人写的，不是我。
我想给这个游戏注入一个dll来防止玩家被黑客入侵！
我将game.exe重命名为Loader.dat
我想编写一个game.exe（假）调用loader.dat来运行然后将我的dll注入它的进程（loader.dat进程）
我该怎么做？
我已经阅读了一些关于运行 ext 程序的建议，并将 dll 注入另一个进程！
但这是两个不同的项目，我尝试加入一个项目！在我在这里问这个问题之前，我假了很多时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T01:54:18.760

你*不能*这样做。即使您可以将某些 DLL “注入”到游戏中，由于游戏对 DLL 一无所知，因此永远不会调用该 DLL。

# php - 多个域中的htaccess冲突

> ID：12925109
> 
> 赞同：1
> 
> 时间：2012-10-16T23:45:15.243
> 
> 标签：php, .htaccess

实际上，我有一个`(example.com)`托管在 godaddy 托管帐户中的域，最近我购买了另一个域，`(example2.com)`这两个域都托管在同一个托管帐户中。

现在让我告诉你这两个域的路径：

`example.com in on the / folder`
`example2.com in on the /example2 folder`

我用我的域创建了 3 个子域，`example.com`并且托管帐户在 / 目录上为相同的子域创建了文件夹。

可以说`demo.example.com`，文件夹是`/demo`

现在来到第二个域，最近我为我创建了一个子域`example2.com`

那`test.example2.com`是位于根目录，文件夹`/test`不像，`/example2/test`因为我的第二个域在`/example2`文件夹中

现在的问题是当我为我启用 .htaccess 文件时，我`test.example2.com`得到了

`500 Internal Server Error`

```
AddDefaultCharset UTF-8

ErrorDocument 404 /404error.php

Options +FollowSymlinks -MultiViews
RewriteEngine on

RewriteBase /

RewriteCond %{REQUEST_URI} !(\.[a-zA-Z0-9]{1,5}|/)$
RewriteRule (.*)([^/])$ http://%{HTTP_HOST}/$1$2/ [R=301,L]

RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /.*index\.php\ HTTP/

RewriteCond %{HTTP_HOST} !^www\.
RewriteCond %{HTTP_HOST} !^localhost
RewriteRule .* http://www.%{HTTP_HOST}%{REQUEST_URI} [R=301,L]

RewriteRule ^(all)/([^/]+)/?$ story.php?title=$2 [L]
RewriteRule ^(all)/?$ index.php [R=301,L] 
```

这是`.htaccess`文件的一部分，但没有 htaccess 它工作正常，我想我有问题`RewriteBase`

我也试过喜欢`RewriteBase /test/`

和`RewriteBase /example2/test/`

但没有帮助，谁能告诉我问题出在哪里，我该如何调试这个问题？

但其余的我的其他子域工作正常。

**更新错误日志**

```
[Tue Oct 16 21:47:04 2012] [alert] [client 110.172.129.110] /var/chroot/home/content/06/8871106/html/bestsocialbookmark/.htaccess: Option All not allowed here
[Tue Oct 16 21:47:07 2012] [alert] [client 110.172.129.110] /var/chroot/home/content/06/8871106/html/bestsocialbookmark/.htaccess: Option All not allowed here 
```

是真的，我不知道这是什么意思。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T05:10:19.050

> /var/chroot/home/content/06/8871106/html/bestsocialbookmark/.htaccess：此处不允许所有选项

这可能是导致错误的原因。而不是您的规则（看起来不错，它们在空白的 htaccess 文件中对我来说可以正常工作）。

所以在目录中的 htaccess 文件的某个地方`/var/chroot/home/content/06/8871106/html/bestsocialbookmark/`，你有一个`Option All`地方。您可能的意思是`Options All`，因为`Option`它不是核心指令（它可以在另一个 3rd 方模块或其他东西中使用，但显然它是不允许的）。只需将其删除。

# php - PHP 使用 Pem 连接到 Amazon

> ID：12925110
> 
> 赞同：0
> 
> 时间：2012-10-16T23:45:14.433
> 
> 标签：php, ssh, amazon-ec2

这个问题似乎没有正确答案。我正在尝试使用 pem 文件连接到亚马逊上的一个实例，但我得到了：

```
ssh2_auth_pubkey_file(): Authentication failed for ubuntu using public key: Invalid public key 
```

PEM 文件没有公钥，所以我从私钥中提取公钥。这是我的代码示例：

```
protected function _createServerSession($host, $user, $password = null, $options = array()) {

        $defaults = array('port' => 22, 'public_key_file' => '', 'private_key_file' => '', 'key_pass_phrase' => null, 'authentication_method' => 'password', 'pem_file' => null);
        $options += $defaults;

        $methods = array(
            'kex' => 'diffie-hellman-group1-sha1', 
            'client_to_server' => array(
                'crypt' => '3des-cbc', 'comp' => 'none'
            ), 
            'server_to_client' => array(
                'crypt' => 'aes256-cbc,aes192-cbc,aes128-cbc', 
                'comp' => 'none')
        );

        $connection = ssh2_connect($host, $options['port'], $methods);

        if ($connection) {
            $this -> _connection = $connection;
        } else {
            throw new Exception('Cannot connect to server');
        }

        $fingerprint = ssh2_fingerprint($this -> _connection, SSH2_FINGERPRINT_MD5 | SSH2_FINGERPRINT_HEX);

        if ($options['authentication_method'] == 'pem') {

            //Get the public and private key from pem file
            $public_key_res = openssl_pkey_get_public($options['pem_file']);
            $private_key_res = openssl_pkey_get_private($options['pem_file']);

            //Get the private key
            if($private_key_res) {
                $private_key_array = openssl_pkey_get_details($private_key_res);
                $private_key = $private_key_array['key'];
            } else {
                throw new Exception('Private key required to connect using pem');
            }

            //Get the public key public key. If it does not exist, get the public key from the private key
            if($private_key && !$public_key_res){
                $public_key_res = openssl_pkey_get_public($private_key);
                $public_key_array = openssl_pkey_get_details($public_key_res);
                $public_key = $public_key_array['key'];

            } else {
                throw new Exception('Public key required to connect using pem');
            }

            //Write the Keys Out To A File
            $private_key_file = Yii::app()->basePath.'/../tmp/tmp.key';
            $public_key_file = Yii::app()->basePath.'/../tmp/tmp';
            file_put_contents($private_key_file, $private_key);
            file_put_contents($public_key_file, $public_key);

            //Authentickate
            $authenticated = ssh2_auth_pubkey_file($connection, $user, $public_key_file, $private_key_file);

            die();
        }
} 
```

有没有人成功使用 PEM 文件通过 PHP 连接到亚马逊？如果你有，你能分享我做错了什么或做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T06:19:49.540

我的建议：使用[phpseclib，一个纯 PHP SSH 实现](http://phpseclib.sourceforge.net/)。例如。

```
<?php
include('Net/SSH2.php');
include('Crypt/RSA.php');

$ssh = new Net_SSH2('www.domain.tld');
$key = new Crypt_RSA();
$key->loadKey(file_get_contents('privatekey'));
if (!$ssh->login('username', $key)) {
    exit('Login Failed');
}

echo $ssh->exec('pwd');
echo $ssh->exec('ls -la');
?> 
```

# javascript - 如何在 JavaScript 中将新对象添加到数组中？

> ID：12925118
> 
> 赞同：0
> 
> 时间：2012-10-16T23:46:18.450
> 
> 标签：javascript

如何添加`newObject`到我的数组`shapeArr`？我需要添加一个for循环吗？

```
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <style type="text/css">
            ul{ list-style-type:none;}
            div{ width:300px; height:200px; background-color:#0066cc; }
        </style>    
    </head>
    <body>
        <ul id="placeholder"></ul>
        <a href="#" id="btn">Add</a>

        <script type="text/javascript">

            function add(){

                function draw(){

                    var template = document.createElement("li");
                    template.innerHTML = "<div></div><a href='#' class='update'>Update</a>";                

                    document.getElementById("placeholder").appendChild(template);
                }

                var newObject = new draw();

                var shapeArr = [];

            }

            var btn = document.getElementById("btn");
            btn.addEventListener("click", add, false);

        </script>       
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T23:50:01.693

使用[`Array.push()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/push).

```
shapeArr.push(newObject); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T23:48:10.017

您可以使用`push()`JavaScript Array 的方法将新元素添加到末尾：

```
var newObject = new draw();
var shapeArr  = [];

// add the new Object
shapeArr.push(newObject); 
```

# php - Codeigniter 电子邮件类错误

> ID：12925125
> 
> 赞同：0
> 
> 时间：2012-10-16T23:47:23.380
> 
> 标签：php, codeigniter, fwrite, fgets, fsockopen

我可以使用以下代码在本地服务器中发送电子邮件，

```
 $config['protocol'] = 'smtp';
    $config['charset'] = 'UTF-8';
    $config['mailtype'] = "html";
    $config['wordwrap'] = TRUE;

    $config['smtp_host'] = $this->config->item('smtp_host'); // smtp.critsend.com
    $config['smtp_user'] = $this->config->item('smtp_user'); 
    $config['smtp_pass'] = $this->config->item('smtp_pass');
    $config['smtp_port'] = $this->config->item('smtp_port'); // i'm tried 587 and 25

    $this->load->library('email');
    $this->email->initialize($config);
    $this->email->from('test@test.com', 'test');
    $this->email->reply_to('test@test.com', 'test');
    $this->email->to($user['email']);
    $this->email->subject($subject);
    $this->email->message($html);
    $this->email->set_newline("\r\n");
    $this->email->send(); 
```

但它不适用于真实服务器。我收到这个错误，

> 消息：fsockopen() [function.fsockopen]：无法连接到 smtp.critsend.com:25（连接超时）
> 
> 文件名：库/Email.php
> 
> 行号：1689
> 
> 消息：fwrite()：提供的参数不是有效的流资源
> 
> 文件名：库/Email.php
> 
> 行号：1846

此错误的一些答案“激活 php_openssl”。但我没有使用 ssl（而且我不能）。

# java - Gradle 中任务类型的继承树

> ID：12925129
> 
> 赞同：1
> 
> 时间：2012-10-16T23:47:56.350
> 
> 标签：java, groovy, build, gradle

如何在 Gradle 中清晰地分离可能需要两个不同配置任务的任务？我正在尝试将要在 buildSrc/dbhelpertasks.gradle 文件中执行的实际任务与父 build.gradle 文件分开。build.gradle 将包含在 dbhelpertasks.gradle 中使用的部分配置的任务。

我有许多不同的数据库要连接并在其上执行 SQL，因此我创建了一个 SQLServerTask，它采用数据库名称和 URL。

自定义 SQLServerTask.groovy

```
导入 org.gradle.api.DefaultTask
导入 org.gradle.api.tasks.TaskAction
导入 groovy.sql.Sql

类 SQLServerTask 扩展 DefaultTask {
    定义主机名
    定义数据库
    默认端口 = 1433
    默认用户名
    默认密码
    定义 sql
    def sqlServerDriver = 'net.sourceforge.jtds.jdbc.Driver'

    @TaskAction
    def 执行Sql() {
        url = 主机名 + “:” + 端口 + “/” + 数据库
        databaseConnProps = [用户：用户名，密码：密码]
        def sqlInstance = Sql.newInstance(url, databaseConnProps, sqlServerDriver)
        println "我会执行" + sql
    }

}

```

然后，我在 build.gradle 中创建了一个任务，该任务将使用一些属性配置 SQLServerTask。

构建.gradle

```
导入 groovy.sql.Sql
申请自：'buildSrc/dbhelpertasks.gradle'
存储库{
    mavenCentral()
}

配置{
    司机
}

依赖{
    驱动程序组：“net.sourceforge.jtds”，名称：“jtds”，版本：“1.2.4”
}

//加载本项目使用的所有驱动程序
URLClassLoader 加载器 = GroovyObject.class.classLoader
configuration.driver.each {文件文件->
    loader.addURL(file.toURL())
}

任务内容DbTask（类型：SQLServerTask）{
    println "配置内容数据库任务"
    主机名 = contentDbUrl
    数据库 = contentDbName
    用户名 = contentDbUserName
    密码 = contentDbPassword
}

```

dbhelpertasks.gradle 文件包含我要执行的实际任务的最终配置（SQL 语句）。

buildSrc/dbhelpertasks.gradle

```
任务getSiteParams（类型：contentDbTask）{
    println "配置站点参数任务"
    sql = "选择 * 从 CMS_SITE_PARAM"
}

```

当我执行`gradle getSiteParams`它最终失败

```
* 什么地方出了错：
评估脚本时出现问题。
> 在根项目“shipyard”上找不到属性“contentDbTask”。

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T06:08:01.253

这里有很多误解。

首先，只有 class`SQLServerTask`应该是 in `buildSrc`，因为 的唯一目的`buildSrc`是生成然后由主构建使用的类。

`dbhelpertasks.grovvy`通常会进入顶级`gradle`目录（ 的同级目录`buildSrc`）并以`.gradle`. 任务的预配置`contentDbTask`通常由插件（如`dbhelpertasks.gradle`脚本插件）而不是任务完成。

任务的类型始终是类，因此`task getSiteParams(type: contentDbTask)`不起作用。此外，`dbhelpertasks.groovy`看不到添加的任务（或完成的任何其他配置）`build.gradle`，只能反过来。这是因为后者在最顶部应用前者（这很好）。

# jquery - 使用 jquery 替换 span 的元素

> ID：12925130
> 
> 赞同：0
> 
> 时间：2012-10-16T23:48:01.697
> 
> 标签：jquery, replace

> **可能重复：**
> [用 jquery 替换文本](https://stackoverflow.com/questions/3197195/text-replace-with-jquery)

我刚开始学习jQuery。其中一个问题要求操纵跨度内的元素，例如

```
<span class=test> 1a 2b 3c</span> 
```

进入

```
<span> 1A 2B 3C </span> 
```

哪里`A`换`a`的。

有些相关的是，如何确定跨度内元素的长度或数量。

## 编辑

一些澄清。我真正在寻找的不仅仅是将小写字母转换为大写字母，而是进入 span 元素并找到特定字符并用其他字符替换它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T23:54:15.563

```
$(function() {
  var text = $('.test').text();
  var uppercaseText = text.toUpperCase();
  $('.test').text(uppercaseText);
}); 
```

这将在页面加载时执行并转换它。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T00:02:06.733

这将获取长度并更改内容。

现场观看：http: [//jsfiddle.net/H8DsW/](http://jsfiddle.net/H8DsW/)

```
<span class="test"> 1a 2b 3c</span>​
<script>
$(function() {
  alert($('.test').html().length);        
  $('.test').html($('.test').html().toUpperCase());
  $('.test').removeAttr('class');    
});
</script>​ 
```

# c# - 尝试使用 LINQ to SQL 插入数据时数据插入失败

> ID：12925136
> 
> 赞同：1
> 
> 时间：2012-10-16T23:48:34.167
> 
> 标签：c#, jquery, html, asp.net-mvc, linq-to-sql

我正在尝试使用 linq to SQL 和 jquery 在表中插入数据，但它失败了，找不到原因。

这是我的做法：

控制器：

```
 [HttpPost]
    public ActionResult SaveHours(string descType, string wrkType, decimal hours)
    {
        DataContext db = new DataContext();

        Project hrs = new Project ();

        {
            hrs.descType = descType;
            hrs.wrkType = wrkType;
            hrs.hours= (decimal)hours;
        }

        db.Project.InsertOnSubmit(hrs);
        db.SubmitChanges();

        return Json(new { message = "Hours Saved" });
    } 
```

查询：

```
$(function(){

$("#SaveHours").click(function (e) {

    e.preventDefault();
    var link = '/Project/SaveHours';

    $.ajax({
        type: 'POST',
        url: link,
        data: { hours: $("#HoursWorked").val(),
            descType: $("#Description").val(),
            wrkType: $("#WorkType").val()
        },
        dataType: 'json',
        success: function (result) {
            alert(result.message);
        },
        error: function (result) {
            alert("Failed");
        }
    });

    }); 
```

看法：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage<IEnumerable<UI.Models.vwProject>>" %>

<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">

    <div>
    <table>
    <tr>
        <th>
            Description
        </th>
        <td>
            <input id="Description" type="text"/>
        </td>
    </tr>
    <tr>
        <th>
            Work Type
        </th>
        <td>
            <input id="WorkType" type="text"/>
        </td>
    </tr>
    <tr>
        <th>
            Hours Worked
        </th>
        <td>
            <input id="HoursWorked" type="text"/>            
        </td>
    </tr>
    <tr>
        <td>
            <button id="SaveHours" type="button" >Save</button>
        </td>        
    </tr>
  </table>
 </div> 
```

我在这里错过了什么吗？任何帮助深表感谢。

编辑：表脚本：

```
CREATE TABLE [Project]
(
    ProjectKey      INT IDENTITY(1,1)   NOT NULL,
    descType        VARCHAR(100)        NULL,
    wrkType         VARCHAR(10)         NULL,
    hours           NUMERIC(5,2)        NULL
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T06:42:12.483

在控制器处编辑：

```
 ...
 if (HttpContext.Request.IsAjaxRequest())
    {
     return Json(new { message = "Hours Saved"  }, JsonRequestBehavior.AllowGet);
    }
  ... 
```

# java - 比较数组中的值

> ID：12925138
> 
> 赞同：0
> 
> 时间：2012-10-16T23:48:46.203
> 
> 标签：java, sudoku

所以，我两天前问了一个问题，我将尝试对其进行修改以使其更简单：

我有一个二维数组，它代表一个数独游戏。

我正在尝试像典型的数独游戏一样检查游戏中的错误：

行、列或 3x3 正方形内没有数字 (1-9) 重复。没有空单元格。

允许用户输入重复值，但在他们修复这些错误之前，游戏不会被视为“获胜”。我想让他们输入错误的值，而不是赢。

我对 Java 很陌生，所以我的知识有限。我打算尝试一个很长的 if，else 语句来比较所有单元格。那没有用，因为 -1 被重复了。（-1 代表一个空的正方形）。我试图解决这个问题，但意识到这个 if 语句太混乱了，必须有更好的方法。

然后我想使用布尔语句来测试每个数字，如果以前见过，则设置为 true。这么多布尔语句似乎很混乱。

所以，我有点在墙上。关于尝试什么的任何提示？尽量不要提前用任何东西，只做了Java 2个月。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T23:59:53.940

1）您想循环遍历这些值，例如使用 for 循环。这比长长的 if-else-if 链要好得多*。*

2）要跟踪看到的值，一种简单的方法可能是使用列表。我会尽量让这个例子尽可能简单，因为你要求“没有任何进展”。

```
public boolean checkRow(int rowNumber)
{
    ArrayList numbersSeen = new ArrayList();

    for(int i = 0; i < 9; i += 1)
    {
        if(sudokuArray[i][rowNumber] != -1 && numbersSeen.contains(sudokuArray[i][rowNumber]))
        {
            return true;
        }
    }

    return false;
} 
```

如果 row`rowNumber`在由 指定的二维数组中有重复的数字，这将返回 true，否则返回`sudokuArray`false。请注意`sudokuArray != -1`, 考虑到您提到的空方块的 -1 占位符。

当你编译这样的东西时，如果编译器在尝试将整数放入数组列表时出错，你可能必须通过指定`ArrayList<Integer>`. 我不记得当您指定 Object 类型的目标时，Java 是否会为您自动装箱原语。

这会引出一个小的副课，因为您是新手，这可能对您有益：Java 既有原始类型（布尔、字节、短、整数、长、浮点、双精度）和原始类型的对象版本（布尔、字节、整数等）。如果你这样做`int i = 0;`，`Integer i2 = i;`Java 会很好地为你做转换。

`checkColumn`会非常相似。`check3X3area`（或任何你想叫它的名字）可能有点相似；也许您可以使用 2 个 for 循环，一个嵌套在另一个中，每个循环 3 次而不是 9 次。这将留给您作为练习。

此外，您可以将此通用化，以允许尺寸不是 9 的数独板进行一些修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T00:01:28.350

对于每个组（行、列或 3x3 正方形）：设置 sum = 0，并且对于遇到的每个值 n 不是 -1，设置 sum = sum | 2^n。完成后，如果 sum 不是 2^10 - 2，则该组有重复项。（显然，如果你遇到 -1，你就没有赢家）。（如果您查看二进制值，您会看到发生了什么。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T00:04:08.893

算法：

```
 int [][] numbers = new int[3][3];
     int[] rowSum = new int[]{0,0,0};
     int[] colSum =new int[]{0,0,0};

    //validate duplicate 
    for(int i=0; i< 2; i++){
       boolean duplicate = false;
       for(int j=0; j<2; j++)
          if(numbers[i][j]==numbers[i+1][j] || 
             numbers[i][j]==numbers[i][j+1]){
             System.out.println("duplicate");
             duplicate = true;
             break;
       }
       if(duplicate){
           break;
       }
     }

     //sum rows and columns
     for(int i=0; i< 3; i++){
       for(int j=0; j<3; j++){
          rowSum[i] = rowSum[i] + numbers[i][j];
          colSum[j] = colSum[j] + numbers[i][j];
       }
     }

     //validate row and column sums
     for(int i=0; i< 3; i++){
       if((rowSum[i] != 15) || (colSum[i]!=15)){
         System.out.println("incorrect sum");
         break;
       }
     } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T00:06:45.120

这看起来像，`homework`但我会尝试提供一些建议。

考虑一个`class Sudoku`是整个棋盘的。这个板子是做的`81` `cells`。第一个约束是任何单元格都可以包含一个介于`1`and`9`和一个特殊值之间的数字，`0`以表示它没有被填充。这个约束很容易验证。

现在，该板有不同的*预测*：

*   有`9` `rows`和`9` `column`。对这些行和列的约束是 nu 号可以重复，它们都不能`0`。你如何验证这个约束是否满足？一种方法是创建一个 数组`9` `booleans`，每个数组都表示是否可以*看到*该索引处的数字。以全部 false 开始，迭代行或列，将单元格中每个数字的索引值设置为 true。最后，如果后一个数组仅包含，`true`则满足约束。

*   另一个投影是九个苏亚雷斯。同样，同样的约束也适用。

这些行、列和正方形需要知道它们的单元格在板上的位置。你应该能够实现它。例如，第 7 行将由`cell[6,0]`through组成`cell[6,8]`。

每次移动后，检查约束，如果所有单元格、行、列和正方形都满足约束，则游戏完成。

# ruby-on-rails - 在 ruby 二维数组中获取唯一值及其计数

> ID：12925139
> 
> 赞同：0
> 
> 时间：2012-10-16T23:48:50.960
> 
> 标签：ruby-on-rails, ruby, arrays, multidimensional-array

我有一个 Ruby 2D 数组，其中每个数组都有来自 SQL 查询的一行及其在子数组中的列。

```
@mastertest = connection.execute("select code_ver from mastertest") 
```

其中可能包含以下内容：

```
@mastertest = [{"abc"} , {"abc"}, {"pqr"}, {"xyz"}, {"pqr"}, {"pqr"}] 
```

现在，我想形成另一个二维数组，它只给我具有唯一值的行`code_ver`及其计数。

像这样的东西：

```
@result = [{"abc", 2} , {"xyz", 1} , {"pqr", 3}] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T00:18:09.697

```
@result = @mastertest.inject(Hash.new(0)) { |hash,element|
  hash[element] +=1
  hash
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T00:49:39.007

我认为`each_with_object`更好的方法：

```
["abc" , "abc", "pqr", "xyz", "pqr", "pqr"].each_with_object({}) do |e, o|
  o[e] ||= 0
  o[e] += 1
end.to_a
#=> [["xyz", 1], ["abc", 2], ["pqr", 3]] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T00:12:39.460

正如 Sawa 所说，您的数据不是有效的 Ruby 对象。我假设你的意思是：

```
@mastertest = ["abc" , "abc", "pqr", "xyz", "pqr", "pqr"]
@result = @mastertest.inject({}) do |a, e|
  a[e] ||= 0
  a[e] += 1
  a
end.to_a
#=> [["xyz", 1], ["abc", 2], ["pqr", 3]] 
```

# mysql - 如何估计 SQL 查询时间？

> ID：12925140
> 
> 赞同：21
> 
> 时间：2012-10-16T23:49:06.613
> 
> 标签：mysql, query-optimization, timing, estimation, time-estimation

我正在尝试粗略（数量级）估计以下查询可能需要多长时间：

```
mysql> EXPLAIN SELECT t1.col1, t1_col4 FROM t1 LEFT JOIN t2 ON t1.col1=t2.col1 WHERE col2=0 AND col3 IS NULL;
+----+-------------+--------------------+------+---------------+------------+---------+-----------------------------+---------+--------------------------+
| id | select_type | table              | type | possible_keys | key        | key_len | ref                         | rows    | Extra                    |
+----+-------------+--------------------+------+---------------+------------+---------+-----------------------------+---------+--------------------------+
|  1 | SIMPLE      | t1                 | ref  | foobar        | foobar     | 4       | const                       | 9715129 |                          | 
|  1 | SIMPLE      | t2                 | ref  | col1          | col1       | 4       | db2.t1.col1                 |   42318 | Using where; Using index | 
+----+-------------+--------------------+------+---------------+------------+---------+-----------------------------+---------+--------------------------+
2 rows in set (0.00 sec)

mysql> 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-17T00:21:34.067

这可以在使用[SHOW PROFILES](http://dev.mysql.com/doc/refman/5.5/en/show-profile.html)语法时完成。打开 MySQL 会话时，可以将变量“profiling”设置为 1 或 ON。

```
mysql> SET profiling = 1; 
```

因此，所有发送到服务器的语句都将被分析并存储在历史记录中，稍后通过键入命令显示：

```
mysql> SHOW PROFILES; 
```

请参阅，来自 MySQL 手册：

```
mysql> SET profiling = 1;
Query OK, 0 rows affected (0.00 sec)

mysql> DROP TABLE IF EXISTS t1;
Query OK, 0 rows affected, 1 warning (0.00 sec)

mysql> CREATE TABLE T1 (id INT);
Query OK, 0 rows affected (0.01 sec)

mysql> SHOW PROFILES;
+----------+----------+--------------------------+
| Query_ID | Duration | Query                    |
+----------+----------+--------------------------+
|        0 | 0.000088 | SET PROFILING = 1        |
|        1 | 0.000136 | DROP TABLE IF EXISTS t1  |
|        2 | 0.011947 | CREATE TABLE t1 (id INT) |
+----------+----------+--------------------------+
3 rows in set (0.00 sec)

mysql> SHOW PROFILE;
+----------------------+----------+
| Status               | Duration |
+----------------------+----------+
| checking permissions | 0.000040 |
| creating table       | 0.000056 |
| After create         | 0.011363 |
| query end            | 0.000375 |
| freeing items        | 0.000089 |
| logging slow query   | 0.000019 |
| cleaning up          | 0.000005 |
+----------------------+----------+
7 rows in set (0.00 sec)

mysql> SHOW PROFILE FOR QUERY 1;
+--------------------+----------+
| Status             | Duration |
+--------------------+----------+
| query end          | 0.000107 |
| freeing items      | 0.000008 |
| logging slow query | 0.000015 |
| cleaning up        | 0.000006 |
+--------------------+----------+
4 rows in set (0.00 sec)

mysql> SHOW PROFILE CPU FOR QUERY 2;
+----------------------+----------+----------+------------+
| Status               | Duration | CPU_user | CPU_system |
+----------------------+----------+----------+------------+
| checking permissions | 0.000040 | 0.000038 |   0.000002 |
| creating table       | 0.000056 | 0.000028 |   0.000028 |
| After create         | 0.011363 | 0.000217 |   0.001571 |
| query end            | 0.000375 | 0.000013 |   0.000028 |
| freeing items        | 0.000089 | 0.000010 |   0.000014 |
| logging slow query   | 0.000019 | 0.000009 |   0.000010 |
| cleaning up          | 0.000005 | 0.000003 |   0.000002 |
+----------------------+----------+----------+------------+ 
```

**参考资料（更新于：2014-09-04）：**
- [SHOW PROFILE 语法](http://dev.mysql.com/doc/refman/5.5/en/show-profile.html)
- [INFORMATION_SCHEMA PROFILING 表](http://dev.mysql.com/doc/refman/5.5/en/profiling-table.html)
-[如何使用 MySQL 查询分析](https://www.digitalocean.com/community/tutorials/how-to-use-mysql-query-profiling)（*The Digital Ocean 最近发表了一篇关于此问题的精彩文章。*）

# iphone - 如何在出现之前过滤 ios 推送通知

> ID：12925142
> 
> 赞同：2
> 
> 时间：2012-10-16T23:49:46.693
> 
> 标签：iphone, objective-c, ios, xcode, push-notification

是否有过滤我发送到我的应用程序的推送通知？

我的意思是，如果我的用户从我的应用程序中注销（fb 连接）并且由于某种原因我的服务器与注销同步失败，我会在他注销时向用户发送通知，这是不受欢迎的情况..

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T05:57:45.693

您可以在注销时将 BOOL 变量设置为 false。因此，每当通知到达时，您检查 BOOL 值，如果为 false 则不处理通知，如果为 true 则执行您想做的任何事情。这只是一个示例，您可以在其他任何地方使用相同的逻辑来处理通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T00:07:28.260

您需要在服务器端进行过滤。您的应用无法在设备上过滤传入的通知。通知发生时您的应用程序可能未运行，并且如果用户无视通知，您的应用程序可能无法启动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-12T21:27:35.720

你可以使用[`unregisterForRemoteNotifications`](https://developer.apple.com/documentation/uikit/uiapplication/1623093-unregisterforremotenotifications?language=objc)方法。

# python - （python）我是否在 tar.gz 文件上使用 os.path.join

> ID：12925147
> 
> 赞同：3
> 
> 时间：2012-10-16T23:50:23.513
> 
> 标签：python, tar, compression

我有一个 tar.gz 文件，我想提取某个目录但不是全部，所以我使用`TarFile.getmember('foo/bar')`. 我想知道的是我是否真的应该使用`TarFile.getmember(os.path.join('foo','bar'))`.

编辑：我还想知道是否将 os.path.join 用于 tarfile 模块或 zipfile 模块中的任何其他功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T00:09:35.530

不，参数 to`getmember`是 tar 文件中的键，而不是本地文件系统路径。使用斜线。

# sql-server - 在 T-SQL 中，如何获得一列 2 小数点（或百分比）？

> ID：12925148
> 
> 赞同：3
> 
> 时间：2012-10-16T23:50:55.563
> 
> 标签：sql-server, sql-server-2008, tsql, math, arithmetic-expressions

在 SQL Server 2008 中，我正在运行一个报告，我需要在其中划分两列（称为`Completes`and `Prescreens`，整数），然后我转到 Excel 并得到`Prescreens`除以`Completes`，并将其转换为具有 2 个小数位的数字，然后将其转换为百分比。即 -> 0.34，然后变为 34%。

在知道的 SQL 中，我可能无法将输出设为 "34%"，但至少我希望它为 0.34 。到目前为止，我有：

```
cast((sq.Completes/sq.Screens ) as float ) as 'conv' 
```

Completes 是较小的数字（通常是 27、38 等），而 Screens 是较大的数字（124、276 等）

但这将我的专栏作为 all 输出`0s`。如何让它显示 0.34 、 0.84 等

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T23:55:57.357

试试这样：

```
select (cast(sq.Completes as float)/cast(sq.Screens as float)) as 'conv' 
```

您也可以这样做来舍入该值：

```
select round((cast(sq.Completes as float)/cast(sq.Screens as float)),2) as 'conv' 
```

最后，以百分比形式直观地显示它：

```
select cast(round((cast(sq.Completes as float) /
   cast(sq.Screens as float)),2) * 100 as varchar(25)) 
   + '%' as 'conv' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T08:17:05.917

纯数（含圆）

```
cast(100.0*sq.Completes/sq.Screens as decimal(6,0)) conv 
```

有百分比

```
cast(cast(100.0*sq.Completes/sq.Screens as decimal(6,0)) as varchar(6)) + '%' conv 
```

# javascript - jQuery .click() 适用于除 Safari 以外的所有浏览器

> ID：12925153
> 
> 赞同：33
> 
> 时间：2012-10-16T23:51:24.317
> 
> 标签：javascript, jquery, safari, click

我有一段 JavaScript 可以`A`在现有 div 中动态创建一个标签，然后在其上调用 jQuery 函数“单击”。这在除 Safari 之外的所有浏览器中都可以正常工作。

Safari 返回以下错误：

> 'undefined' 不是函数（评估 '$('.shell a')[0].click()'）

关于我做错了什么或为什么这在 Safari 中不起作用以及如何让它起作用的任何想法（或在所有浏览器中起作用的一段代码）我也尝试过使用`.trigger("click")`它并且它给出了相同的错误.

# JavaScript

```
function writeAndClickLink(url) {

    $('.shell').html('<a href="' + url + '"></a>');
    $('.shell a')[0].click();
} 
```

在 HTML 中：

```
<div class="shell"></div> 
```

我以这种奇怪的方式这样做的原因是从 Flash 站点调用该函数以打开一个 Twitter 窗口，在该窗口中我奖励发推文。到目前为止，这是我可以让“tweet”事件绑定到窗口的唯一方法。如果我以任何其他方式打开窗口（例如 window.open），它不会捕获让我知道他们实际完成推文的绑定事件。

流程类似于：

*   用户在 Flash 中单击推文按钮
*   Flash调用javascript函数动态写入href并“点击”它
*   推特窗口打开
*   用户成功发推文
*   Tweet 事件被捕获并成功更新闪烁
*   内容在 Flash 中解锁

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-10-17T00:45:13.423

```
var a = $('.shell a')[0];
var evObj = document.createEvent('MouseEvents');
evObj.initMouseEvent('click', true, true, window);
a.dispatchEvent(evObj); 
```

请参阅[http://www.howtocreate.co.uk/tutorials/javascript/domevents](http://www.howtocreate.co.uk/tutorials/javascript/domevents)（搜索“手动触发事件”）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-05-06T13:54:25.363

Trevor Dixon 的回答*确实*修复了 Safari，但在最新的 Firefox 中也出现了问题：

> TypeError：MouseEvent.initMouseEvent 的参数不足

在不破坏 Firefox 的情况下支持 Safari 的最佳方式是使用`initEvent`而不是`initMouseEvent`这样：

```
var element = document.getElementById('your_id_here');
if(element.click)
    element.click();
else if(document.createEvent)
{
    var eventObj = document.createEvent('MouseEvents');
    eventObj.initEvent('click',true,true);
    element.dispatchEvent(eventObj);
} 
```

要为 2016 年更新，[`MouseEvent`](https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/MouseEvent)应该使用它来代替`initMouseEvent`已弃用的：

```
var eventObj = new MouseEvent("click", {
    bubbles: true,
    cancelable: true
});
element.dispatchEvent(eventObj); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-17T00:03:12.607

`$('.shell a')[0]`从 jQuery 对象中获取一个 DOM 对象。该 DOM 对象只有 DOM 方法（不是 jQuery 方法），并且在HTML5 之前元素`.click()`上没有行业标准方法，`<a>`并且尚未在每个浏览器中实现 - 因此您将在不同的浏览器中看到不完整的实现。

你有几个选择。第一个选项获取一个 jQuery 对象并使用 jQuery 对象`.click()`上的方法。这只有在您触发 jQuery 点击处理程序时才能可靠地工作，而不是在您只想要`<a>`标签的默认点击时。

```
function writeAndClickLink(url) {

    $('.shell').html('<a href="' + url + '"></a>');
    $('.shell a').eq(0).click();
} 
```

或者，如果单击 URL 只是要转到一个新网页，甚至不必费心修改 DOM，只需设置 window.location 因为如果您只是要去一个，那么修改 DOM 根本没有意义新网页：

```
function writeAndClickLink(url) {
    window.location = url;    
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-16T23:56:40.580

`$('.shell a')[0]`返回没有绑定 jQuery 方法的原生 DOM 元素

删除“[0]”以保留 jQuery 对象以便使用 jQuery 方法

```
 $('.shell a').click() 
```

# jquery - 服务器 JSON 的 jQuery 解析（字符串）

> ID：12925154
> 
> 赞同：3
> 
> 时间：2012-10-16T23:51:28.840
> 
> 标签：jquery, json

我已经有一段时间了，似乎无法确定，非常感谢您的帮助。

**挑战：** 无法确定如何正确使用 JQUERY 解析来自服务器的以下 JSON（字符串？）响应：

```
{"d":"{\"NewDataSet\":{\"Table\":{\"EMPLOYEE_NO\":\"3605\",\"NAME\":\"Last, First\",\"STAFF\":\"CSR\",\"USERNAME\":\"lis\",\"PIN\":\"somepassword\"}}}"} 
```

**尝试过：** 很多东西，比如...

```
var dtObj = jQuery.parseJSON(data);
$.each(dtObj, function (i, val) {
.. do some stuff
}); 
```

**要求：** 需要获取 EMPLOYEE_NO、NAME、STAFF、USERNAME 和 PING 值。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T23:57:53.393

您的 JSON id 嵌套，因此您必须解析两次，并且保存您想要的数据的对象有一些层次。

```
var Obj1 = jQuery.parseJSON(data);
var Obj2 = jQuery.parseJSON(Obj1.d);
var dtObj = Obj2.NewDataSet.Table;
// now you can use dtObj to access EMPLOYEE_NO, NAME, STAFF, USERNAME, AND PING properties. 
```

[**jsFiddle**](http://jsfiddle.net/g2SL8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T23:57:37.233

首先确保您的 json 有效。使用这个工具[http://jsonlint.com/](http://jsonlint.com/)

```
var data={
    "d": {
        "NewDataSet": {
            "Table": {
                "EMPLOYEE_NO": "3605",
                "NAME": "Last,First",
                "STAFF": "CSR",
                "USERNAME": "lis",
                "PIN": "somepassword"
            }
        }
    }
};
alert(data.d.NewDataSet.Table.NAME); 
```

[http://jsfiddle.net/tariqulazam/rBfLw/](http://jsfiddle.net/tariqulazam/rBfLw/) ​</p>

# ios - 如何使用本地资源来加速 iOS 中的 webview？

> ID：12925156
> 
> 赞同：0
> 
> 时间：2012-10-16T23:51:44.770
> 
> 标签：ios, uiwebview, nsurlrequest, nsbundle

我正在将远程网页加载到依赖于 js 和 css 资产的 iOS webview 中。为了提高性能，特别是在 3G 网络上，我希望将这些资产从本地文件调用到 iOS 设备。

支持 iOS 应用的网站也被手机浏览器使用，而不仅仅是 iOS 应用，因此子类化 NSURLRequest 来注册我自己的 URL 前缀 (myurl://) 并不理想。

我已经有代码为我的域之外的 URL 启动 mobileSafari：

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType {
    NSURL *url = [request URL];
    NSString *hostname = [url host];

    if (![hostname hasSuffix:@".mysite.com"] && navigationType == UIWebViewNavigationTypeLinkClicked) {
        [[UIApplication sharedApplication] openURL:url];
        return NO;
    }
    return YES;
} 
```

这个方法是从同一个控制器实现中调用的，代码如下：

```
- (void)viewDidLoad {
    [super viewDidLoad];
    // ...
    webView.delegate = self;

    // ...

        NSURL *url = [[NSURL alloc] initWithString:([path length] > 0 ? path : @"http://mysite.com/mobile/index")];
        NSURLRequest *request = [[NSURLRequest alloc] initWithURL:url];
        [webView loadRequest:request];

    // ...

} 
```

我已经查看了其他几个问题（[如何使用带有引用本地图像的外部 HTML 的 iPhone webView？、](https://stackoverflow.com/questions/2302213/how-to-use-an-iphone-webview-with-an-external-html-that-references-local-images)[在本地缓存不起作用的 UIWebView 中动态加载 javascript 文件、](https://stackoverflow.com/questions/9279968/dynamically-loading-javascript-files-in-uiwebview-with-local-cache-not-working)带有本地[图像文件的 iOS WebView 远程 html](https://stackoverflow.com/questions/5572258/ios-webview-remote-html-with-local-image-files)、[在iPhone webview](https://stackoverflow.com/questions/4846151/using-local-resources-in-an-iphone-webview)）但他们似乎都错过了我的问题的一个关键因素。

第一个链接有一些有希望的开始：

```
if ([url isEqualToString:@"http://path-to-cdn.com/jquery-1.8.2.min.js"]) {
    fileToLoad = [[NSBundle mainBundle] pathForResource:@"jquery-1.8.2.min" ofType:@"js"];
} 
```

如果这是一种明智的方法，我会坚持如何将 fileToLoad NSBundle 传递到 webView 的 loadRequest 中，因为它需要一个 URL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T17:21:25.930

在意识到我可以使用 stringByAppendingPathComponent 的输出作为 URL 之后，我认为我走在了正确的道路上，就像这样......

```
if (![hostname hasSuffix:@".mysite.com"] && navigationType == UIWebViewNavigationTypeLinkClicked) {

    NSString *urlString = [url absoluteString];
    if ([urlString isEqualToString:@"http://path-to-cdn.com/jquery-1.8.2.min.js"]) {
        NSString *tempurl = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"js/jquery-1.8.2.min.js"];
        [webView loadRequest:[NSMutableURLRequest requestWithURL:tempurl]];
    } else {
        [[UIApplication sharedApplication] openURL:url];
    }
    return NO;
}
return YES; 
```

我还没有让它工作（它仍在加载远程 URL），但我认为我走在正确的道路上。

# sql - SQL 从一个表中获取每一行并总结第二个表中的“命中”

> ID：12925157
> 
> 赞同：3
> 
> 时间：2012-10-16T23:52:12.053
> 
> 标签：sql, sql-server

相当复杂......我有两个表，t1 包含有关特定对象的描述信息，第二个表 t2 包含用于解码 t1 中的对象的信息。

我将尝试提供一个简单的示例：

```
----
t1 (Name, Type, Size, Color)
----
dog1 - mammal - big  -  brown

dog2 - mammal - big  -  black

cat1 - mammal - small - black

fish1 - fish - small - gold

---
t2 (Type, Size, Color, Value)
---
mammal - "" - blue - 1

mammal - big - brown - 0.5

mammal - big - black - 0.75

mammal - small - "" - 2

fish - big - "" - 5

fish - small - "" - 0.5

fish - small - gold - 0.5

"" - "" - black - 1

"" - big - "" - 0.75

---
result(name, value)
---
dog1 - 1.25 //receives a value of 1.25 (0.5+0.75) because it hits the row of being mammal/big/brown (0.5) and the extra hit of just being big (0.75)

dog2 - 2.5 // 0.75 + 1 + 0.75 for being mammal/big/black (0.75), for being black (1), and for being big (0.75)

cat1 - 2 //2 for being mammal/small

fish1 - 1 // 0.5 + 0.5 for being fish/small and fish/small/gold

--- 
```

这是我当前的查询，因为它与此示例有关，但由于多种原因，它当然不起作用。

```
Select t1.Name, SUM(counter.Value) as Sums
 From
 (Select *
 From t1, t2
 where t1.Type = t2.Type and t1.Size = t2.Size and t1.Color = t2.Color) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T00:12:31.270

试试这个（或者如果你使用空白，则用 t2.XXX = '' 替换 t2.XXX is null）：

```
declare @t1 table(name nvarchar(32), [type] nvarchar(32), size nvarchar(32), colour nvarchar(32))
declare @t2 table([type] nvarchar(32), size nvarchar(32), colour nvarchar(32), value numeric(15,9))

insert @t1
          select 'dog1','mammal','big','brown'
union all select 'dog2','mammal','big','black'
union all select 'cat1','mammal','small','black'
union all select 'fish1','fish','small','gold'

insert @t2
          select 'mammal',null,'blue',1
union all select 'mammal','big','brown',0.5
union all select 'mammal','big','black',0.75
union all select 'mammal','small',null,2
union all select 'fish','big',null,5
union all select 'fish','small',null,0.5
union all select 'fish','small','gold',0.5
union all select null,null,'black',1
union all select null,'big',null,0.75

select t1.name, sum(t2.value) Value
from @t1 t1
inner join @t2 t2
on (t1.type = t2.type or t2.type is null)
and (t1.colour = t2.colour or t2.colour is null)
and (t1.size = t2.size or t2.size is null)
group by t1.name 
```

结果：

```
name    Value
cat1    3.000000000
dog1    1.250000000
dog2    2.500000000
fish1   1.000000000 
```

# iphone - 加载视图后隐藏状态栏会留下黑条

> ID：12925158
> 
> 赞同：4
> 
> 时间：2012-10-16T23:52:27.343
> 
> 标签：iphone, objective-c, ios

在加载视图**后**隐藏状态栏时，我遇到了一个奇怪的问题。如果我在 ViewDidLoad 方法中添加以下方法，状态栏将从视图中完全删除：

```
[[UIApplication sharedApplication] setStatusBarHidden:YES withAnimation:UIStatusBarAnimationSlide]; 
```

但是，如果我在 IBAction 或其他方法中调用此方法，状态栏仍会滑开，但会留下一个与自身高度相同的黑条。

我曾考虑将整个视图向上移动 20 像素，但这真的可以解决问题吗？我不想只重叠一个黑条，以防在未来的操作系统升级中状态栏高度发生变化。

![状态栏离开黑条](../Images/dc7f9137534b657b59a1a7a1b35cdcb9.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T05:50:51.897

对任何数字进行硬编码总是与未来的证明背道而驰。你的担心是正确的。正确处理 statusBar 的隐藏有一些技巧。但是所有需要的信息都是可用的。

例如，`UIApplication`单例有一个名为的属性`statusBarFrame`，这正是它听起来的样子，a`CGRect`的`statusBar`框架。很酷的是，一旦你调用`setStatusBarHidden:withAnimation:`了该属性，它就会给你新的帧，甚至在动画完成之前。所以实际上你只剩下一些基本的数学来调整`view`'s `frame`。

简而言之，您的直觉是正确的；总是实时计算。

我用这样的类别方法取得了很好的成功。（即使在模拟器中切换通话状态栏（Command - T））：

```
@implementation UIApplication (nj_SmartStatusBar)
// Always designate your custom methods by prefix.
-(void)nj_setStatusBarHidden:(BOOL)hidden withAnimation:(UIStatusBarAnimation)animation{
    UIWindow *window = [self.windows objectAtIndex:0];
    UIViewController *rootViewController = window.rootViewController;
    UIView *view = rootViewController.view;

    // slight optimization to avoid unnecassary calls.
    BOOL isHiddenNow = self.statusBarHidden;
    if (hidden == isHiddenNow) return;

    // Hide/Unhide the status bar
    [self setStatusBarHidden:hidden withAnimation:animation];

    // Get statusBar's frame
    CGRect statusBarFrame = self.statusBarFrame;
    // Establish a baseline frame.
    CGRect newViewFrame = window.bounds;

    // Check if statusBar's frame is worth dodging.
    if (!CGRectEqualToRect(statusBarFrame, CGRectZero)){
        UIInterfaceOrientation currentOrientation = rootViewController.interfaceOrientation;
        if (UIInterfaceOrientationIsPortrait(currentOrientation)){
            // If portrait we need to shrink height
            newViewFrame.size.height -= statusBarFrame.size.height;
            if (currentOrientation == UIInterfaceOrientationPortrait){
                // If not upside-down move down the origin.
                newViewFrame.origin.y += statusBarFrame.size.height;
            }
        } else { // Is landscape / Slightly trickier.
            // For portrait we shink width (for status bar on side of window)
            newViewFrame.size.width -= statusBarFrame.size.width;
            if (currentOrientation == UIInterfaceOrientationLandscapeLeft){
                // If the status bar is on the left side of the window we move the origin over.
                newViewFrame.origin.x += statusBarFrame.size.width;
            }
        }
    }
    // Animate... Play with duration later...
    [UIView animateWithDuration:0.35 animations:^{
        view.frame = newViewFrame;
    }];
}
@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T04:04:54.307

是的，将视图移动 20 像素应该可以解决您的问题。黑色是没有任何东西可以显示，而不是真正的黑条。

至于潜在的状态高度变化，如果发生这种情况，此修复将不起作用，因为视图将移动新状态栏的高度。如果发生这种情况，您将不得不为不同的状态栏添加不同的偏移量，或者找到一个全新的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-19T20:10:57.800

在`viewWillAppear`：

```
[[UIApplication sharedApplication] setStatusBarHidden:YES withAnimation:UIStatusBarAnimationFade]; 
```

在`viewDidAppear`中，您可以插入：

```
self.view.window.rootViewController.view.frame = [UIScreen mainScreen].applicationFrame; 
```

在`viewWillDisappear`：

```
[[UIApplication sharedApplication] setStatusBarHidden:NO withAnimation:UIStatusBarAnimationFade]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T00:23:23.863

你为什么打电话给这个`viewDidLoad`？

在 loadView 中试试？

```
- (void)loadView {
    [super loadView];

    [[UIApplication sharedApplication] setStatusBarHidden:YES withAnimation:UIStatusBarAnimationSlide];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-15T19:05:39.257

我可以通过调用来解决这个问题：

```
[[UIApplication sharedApplication] setStatusBarHidden:YES withAnimation:UIStatusBarAnimationSlide]; 
```

正如其他人在展示显示黑条的视图控制器*之前推荐的那样。*

例如，如果我有一个呈现的动作`ViewController`，我会这样称呼它：

```
- (IBAction)presentViewController:(id)sender {
    [[UIApplication sharedApplication] setStatusBarHidden:YES withAnimation:UIStatusBarAnimationSlide];
    ViewController *vc = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
    [self presentViewController:vc animated:YES completion:nil];
} 
```

# python - 按键生成列表的所有可能子列表

> ID：12925161
> 
> 赞同：0
> 
> 时间：2012-10-16T23:52:46.050
> 
> 标签：python

我有类似的数据

```
[2, 2, 2, 2, 2, 3, 13, 113] 
```

然后我想通过自己生成的键将其分类到单独的列表中。事实上，我想生成*所有*可能的列表。

一些例子：

```
values: [2, 2, 2, 2, 2, 3, 13, 113]
keys:   [0, 0, 1, 2, 1, 3,  3,   1]
sublists: [2, 2], [2, 2, 113], [2], [3, 13]

values: [2, 2, 2, 2, 2, 3, 13, 113]
keys:   [0, 1, 0, 0, 0, 1,  1,   0]
sublists: [2, 2, 2, 2, 113], [2, 3, 13]

values: [2, 2, 2, 2, 2, 3, 13, 113]
keys:   [2, 3, 0, 0, 4, 4,  1,   3]
sublists: [2, 2], [13], [2], [2, 113], [2, 3] 
```

所有可能的密钥都由

```
def generate_keys(prime_factors):
    key_size = len(prime_factors) - 1
    key_values = [str(i) for i in range(key_size)]

    return list(itertools.combinations_with_replacement(key_values, \
        len(prime_factors))) 
```

然后我想我可以使用键将值转移到子列表中。这就是我坚持的部分。我认为 itertools.groupby 将是我的解决方案，但经过进一步调查，我认为无法使用我的自定义列表作为 groupby 的键。

如何使用这些键将我的大列表拆分为较小的子列表？甚至可能有一种方法可以在不使用密钥的情况下做到这一点。无论哪种方式，我都不知道该怎么做，并且查看其他 Stack Overflow 问题已经在球场上，但不完全是这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T00:04:13.470

这可以满足您的要求：

```
def sift(keys, values):
    answer = collections.defaultdict(list)
    kvs = zip(keys, values)
    for k,v in kvs:
        answer[k].append(v)
    return [answer[k] for k in sorted(answer)]

In [205]: keys = [0, 0, 1, 2, 1, 3,  3,   1]

In [206]: values = [2, 2, 2, 2, 2, 3, 13, 113]

In [207]: sift(keys,values)
Out[207]: [[2, 2], [2, 2, 113], [2], [3, 13]] 
```

**说明**：

[collections.defaultdict](http://docs.python.org/library/collections.html#collections.defaultdict)是一个方便`dict`的类，可让您定义在您尝试操作的字典中不存在键的情况下应该发生的情况。例如，在我的代码中，我有`answer[k].append(v)`. 我们知道那`append`是一个`list`函数，所以我们知道那`answer[k]`应该是一个列表。但是，如果我使用的是常规的`dict`并且我尝试`append`使用不存在的键的值，我会得到`KeyError`如下：

```
In [212]: d = {}

In [213]: d[1] = []

In [214]: d
Out[214]: {1: []}

In [215]: d[1].append('one')

In [216]: d[1]
Out[216]: ['one']

In [217]: d
Out[217]: {1: ['one']}

In [218]: d[2].append('two')
---------------------------------------------------------------------------
KeyError                                  Traceback (most recent call last)
/Users/USER/<ipython-input-218-cc58f739eefa> in <module>()
----> 1 d[2].append('two')

KeyError: 2 
```

这之所以成为可能，是因为我定义了`answer = collections.defaultdict(list)`. 如果我定义了`answer = collections.defaultdict(int)`，我会得到一个不同的错误——它会告诉我`int`对象没有`append`方法。

[`zip`](http://docs.python.org/library/functions.html#zip)另一方面，需要两个`list`s （实际上，它至少需要两个[`iterable`s](https://stackoverflow.com/questions/12765451/what-are-exact-specification-for-a-type-to-be-a-1-sequence-2-iterable-type-i)），让我们调用它们`list1`并`list2`返回一个元组列表，其中`i`th 元组包含两个对象。第一个是`list1[i]`，第二个是`list2[i]`。如果`list1`和`list2`的长度不等，`len(zip(list1, list2))`将是`len(list1)`和之间的较小值`len(list2)`（即`min(len(list1), len(list2))`.

压缩`keys`和`values`后，我想创建一个字典，以便将值从映射到值`keys`列表`values`。这就是我使用 a 的原因`defaultdict`，这样我就不必在附加到它的值之前检查其中是否存在键。如果我使用传统的字典，我将不得不这样做：

```
answer = {}
kvs = zip(keys, values)
for k,v, in kvs:
    if k in answer:
        answer[k].append(v)
    else:
        answer[k] = [v] 
```

现在您有一个`dict`（或类似`dict`对象）将值从映射`keys`到共享相同键的 s 列表`int`，您需要做的就是获取`answer`按排序顺序排列的值的列表，按 的键排序`answer`。`sorted(answer)`给我一个`answer`按排序顺序排列的所有 s 键的列表。

一旦我有了这个排序键列表，我所要做的就是获取它们的值，它们是整数列表，然后将所有这些列表放入一个大列表并返回该大列表。

…… 完成！希望有帮助

# php - 在 php 中提交之前验证字段

> ID：12925163
> 
> 赞同：0
> 
> 时间：2012-10-16T23:53:08.240
> 
> 标签：php

如何在将字段提交到其他文件之前验证字段并在同一页面中显示错误消息，例如：*必填字段

```
<?php

// Inialize session
session_start();

// Check, if user is already login, then jump to secured page
if (isset($_SESSION['username'])) {
header('Location: Pro_Lesson.php');
}
?>
<html>

<head>
<title>PHPMySimpleLogin 0.3</title>
</head>

<body>

<h3>User Login</h3>

<table border="0">
<form method="POST" action="log.php">
<tr><td>Username</td><td>:</td><td><input type="text" name="username" size="20"></td></tr>
<tr><td>Password</td><td>:</td><td><input type="password" name="password" size="20"></td></tr>
<tr><td>&nbsp;</td><td>&nbsp;</td><td><input type="submit" value="Login"></td></tr>
</form>
</table>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T00:00:16.793

如果要在提交表单之前验证字段，则需要使用 javascript。

看看这个简单的 jquery 插件： [http ://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)

[这里还有 10 个 jquery 插件](http://speckyboy.com/2009/12/17/10-useful-jquery-form-validation-techniques-and-tutorials-2/)

[一个不使用jquery的](http://www.javascript-coder.com/html-form/javascript-form-validation.phtml)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-05T21:20:22.150

您可以使用粘性表格。例如，您有一个带有 HTML 表单的会话页面 (session.php)。如果想要登录的用户没有写入正确的用户名，您可以在同一页面中显示错误 (action="session.php)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T23:54:47.780

在将表单发送到 PHP 页面之前，您应该使用 Javascript 对其进行验证，然后在 php 页面中再次对其进行验证。

# javascript - Acrobat Javascript 日期

> ID：12925166
> 
> 赞同：2
> 
> 时间：2012-10-16T23:53:26.680
> 
> 标签：javascript, acrobat

我有一个文本字段，以 mmmm d、yyyy（称为“到期日期”）显示日期，我正在尝试制作三个较小的字段，仅显示日期（d）、月份（m）和年份（yyyy ) 在每个领域。

我尝试使用以下代码将数据导入每个字段：

```
var sField = 'Expiry Date' 
```

然后我会根据需要将其自定义格式为“d”、“m”或“yyyy”。在小格式预览窗口中，它将显示所需的输出，但字段仍为空白。

同样奇怪的是，它仅适用于以月份开头的格式。

我得到第一个日期的字段是从另一个计算中创建的，如果这使它有任何不同的话。“到期日期”从名为“日期”的字段中获取数据。这是它在“日期”值后 30 天分配到期日期的代码

```
// define the value for the date field
var sField = 'Date'
// define the format of the date string
var cFormatDate = 'mm/dd/yyyy';
// define some time constants
var fSecond = 1000; // number of milliseconds in one second
var fMinute = 60 * fSecond; // number of milliseconds in a minute
var fHour = 60 * fMinute; // number of milliseconds in an hour
var fDay = 24 * fHour; //number of milliseconds in a day
// get the field object's string value
var fTodayDate = this.getField(sField).value;
// convert the string value into a date object
var oDate = util.scand(cFormatDate, fTodayDate);
// convert the date object to a value in milliseconds
var fDate = oDate.getTime();
// add 30 days to value using the number of milliseconds in a day
var fNewDate = fDate + (30 * fDay);
// convert computed date value to date object
var oNewDate = new Date(fNewDate);
// set the field's value to the date string for the date object
event.value = util.printd(cFormatDate, oNewDate); 
```

提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T17:19:22.647

我可能过于简化了，但如果您有一个包含完整日期的日期字段（我们将其命名为“DATE1”）。

您不能只复制该字段 3 次，将“DATE1”分配给所有三个名称。这将采用您在原始日期字段中键入的日期并将其复制到其他三个字段中。然后只需进入字段属性，确保所有 4 个框都分配了“日期”格式 - 然后在 3 个较小的框上，分别为它们分配“dd”、“mm”或“yy”的自定义日期选项？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T02:06:40.103

我对 Acrobat 一无所知，但假设它的 Date 对象符合 ECMA-262。到目前为止，将日期字符串转换为日期对象的最佳方法是自己解析它，不要将其留给`Date`函数/构造函数或`Date.parse`.

从您的帖子中，日期字符串似乎是`October 17, 2012`. 下面有一个功能可以帮助解决这个问题。

添加全天的最佳方法是将它们添加到日期，因此给定一个日期对象：

```
// Create a new Date object
var now = new Date();

// Copy it
var then = new Date(now);

// Add 30 days
then.setDate(then.getDate() + 30); 
```

请注意，在 1 月 28 日（或闰年的 1 月 29 日）之后的日期添加 30 将在 3 月结束。

### 编辑

日期字符串解析函数：

```
// Expects mmm d, yyyy e.g. October 17, 2012 or Oct 17, 2012
function parseDateString(s) {
    var months={jan:0, feb:1, mar:2, apr:3, may:4, jun:5, 
                jul:6, aug:7, sep:8, oct:9, nov:10, dec:11};
    var d = s.split(/\s/);
    return new Date(d[2], months[d[0].toLowerCase().substring(0,3)], parseInt(d[1],10));
} 
```

# c# - 在 XNA 中使用位图（PNG 文件），System.drawing 不可用

> ID：12925167
> 
> 赞同：0
> 
> 时间：2012-10-16T23:53:29.473
> 
> 标签：c#, xna

很抱歉，这有点模棱两可。我在 XNA 中使用 System.Drawing 时遇到问题；根据我的研究，XNA 无法使用它（因为它是 windows.dll 的一部分？）

我想创建一个精灵表分析器，它会自动将精灵表分解成适当的分段、帧数等，以供以后回放。为此，我需要获取实际的 PNG 文件，如果有一些已经具有处理图像功能的东西会很好。XNA 中是否有提供与 System.drawing 类似功能的类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T00:11:53.263

我找到了答案。我实际上可以从 texture2D 中获取颜色数据，允许我在不使用 XNA 之外的任何额外库的情况下拆卸图像进行分析

[http://www.riemers.net/eng/Tutorials/XNA/Csharp/Series2D/Texture_to_Colors.php](http://www.riemers.net/eng/Tutorials/XNA/Csharp/Series2D/Texture_to_Colors.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T00:03:08.110

您可以`System.Drawing`毫无问题地与 XNA 结合使用——您只需在您的 XNA 项目中添加对它的引用。但是，`System.Drawing`不支持加载 .png，而 XNA 支持。

在 XNA 中加载图像的常用方法是首先将它们添加到您的内容项目中（通常当您创建 XNA 项目时，总会创建相应的内容项目）。将保存的 .png 添加到您的内容项目并为其指定一个唯一名称。然后在您的代码中，将图像加载为`Texture2D`：

```
Texture2D myTexture = Content.Load<Texture2D>("my image name"); 
```

请注意使用`Content`which 是可以从您当前用于 XNA 游戏的对象`ContentManager`中引用的对象。`Game`

[查看此内容以](http://codeforcake.com/blog/?p=33)获取更多信息。

# html - 将文本与图像对齐

> ID：12925179
> 
> 赞同：5
> 
> 时间：2012-10-16T23:55:26.213
> 
> 标签：html, css

> **可能重复：**
> [如何使用 CSS 垂直对齐图像旁边的文本？](https://stackoverflow.com/questions/489340/how-do-i-vertically-align-text-next-to-an-image-with-css)

我在对齐文本和图像时遇到问题。

文字和图像就像

```
texts  ---------
      | image   |
       _________ 
```

我希望文本位于 div 的中间，而不是与顶部对齐。

我有：

```
<div id='test'> tests <img src='/images/logo.png'/> </div> 
```

我使用了以下 css 但仍然没有运气

```
#test{
    margin-left: 10px;
    vertical-align: middle;
} 
```

如何将文本与图像居中对齐。非常感谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-16T23:56:33.287

`vertical-align:middle`应该在图像上，而不是容器上。

# objective-c - Objective C 中的单例（非 ARC）

> ID：12925184
> 
> 赞同：0
> 
> 时间：2012-10-16T23:55:54.800
> 
> 标签：objective-c, singleton

我已经找到了如何在目标 c（非 ARC）中实现单例。

[马特·加洛韦的单身人士](http://www.galloway.me.uk/tutorials/singleton-classes/)

```
// AppTools.h in my code

@interface AppTools : NSObject {

    NSString *className;
}

@property ( nonatomic, retain ) NSString *className;

+ ( id ) sharedInstance;

@end    // AppTools

// AppTools.m in my code

static AppTools *sharedAppToolsInstance = nil;

@implementation AppTools

@synthesize className;

- ( id ) init {

    self = [ super init ];
    if ( self ) {
        className = [ [ NSString alloc ] initWithString: @"AppTools" ];
    }
    return self;
}   // init

- ( void ) dealloc {

   // Should never be called, but just here for clarity really.
   [ className release ];
   [ super dealloc ];
}   // dealloc

+ ( id ) sharedInstance {

    @synchronized( self ) {
    if ( sharedAppToolsInstance == nil )
        sharedAppToolsInstance = [ [ super allocWithZone: NULL ] init ];
    }
    return sharedAppToolsInstance;
}   // sharedInstance

+ ( id ) allocWithZone: ( NSZone * )zone {

    return [ [ self sharedInstance ] retain ];
}   // allocWithZone:

- ( id ) copyWithZone: ( NSZone * )zone {

    return self;
}   // copyWithZone:

- ( id ) retain {

    return self;
}   // retain

- ( unsigned int ) retainCount {

    return UINT_MAX;    // denotes an object that cannot be released
}   // retainCount

- ( oneway void ) release {

    // never release
}   // release

- ( id ) autorelease {

    return self;
}   // autorelease 
```

我想知道如何在 sharedInstance 方法中使用 allocWithZone:。在这方面，allocWithZone: 方法的接收者是 'super' 而 'super' 是 NSObject。虽然返回值是 NSObject 实例，但它被替换为 sharedInstance。

那么className的记忆室在哪里呢？我不知道如何处理这部分代码。

预先感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T00:00:12.373

我认为您发布的代码很难用于创建单例。

在我的所有项目中，我都使用以下代码来使用单例。它非常简单，线程安全并且完美运行：

```
+ (CustomClass *)shared
{
    static CustomClass *singleton = nil;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        singleton = [[CustomClass alloc] init];
    });
    return singleton;
} 
```

我相信你可以在 ARC 和非 ARC 项目中使用它。

**更新：** 正如评论中提到的那样，它实际上`shared object`并不是`singleton`因为可以创建更多特定类的一个实例。但它已经足够接近了。

在我看来，如果您不编写开源代码/库并且没有其他人会使用它，那么使用共享对象并将它们视为单例可能会容易得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T16:35:58.127

我使用与 Nekto 相同的代码，但`singleton = [[CustomClass alloc] init];`应该是`singleton = [[self alloc] init];`.

想象一个子类`CustomSubclass`。如果你打电话

```
CustomSubclass *sharedObject = [CustomSubclass shared]; 
```

你不会得到 a`CustomSubclass`但 a `CustomClass`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T02:07:54.080

你问“那 className 的记忆室在哪里？”

大多数类不实现`alloc`or`allocWithZone`本身，而是依赖于继承自`NSObject`. 该`NSObject`实现分配一个*原始调用类*的对象。

因此，在您的示例`AppTools`中确实覆盖`allocWithZone`，此实现通过调用来调用`NSObject`'s ，并且's 方法执行实际分配并返回类型的对象。`allocWithZone``super``NSObject``AppTools`

*[注意：如果你想知道`NSObject`' 的实现如何知道要分配什么样的对象，那么这很简单 - 调用继承的方法不会改变方法的`self`参数，`alloc`/`allocWithZone`是类方法，并且类方法的`self`参数引用类对象（而不是类的实例对象）本身。]*

# excel - 从脚本创建输出矩阵（matlab）

> ID：12925186
> 
> 赞同：0
> 
> 时间：2012-10-16T23:56:07.840
> 
> 标签：excel, matlab, matrix, output

我有一个类似以下的脚本：

```
for 
(do something)
end 
```

并且还使用来自循环的数据输出的输出（每次都会改变 - 当脚本运行时）：

```
A = 1
A = 1.5 
```

等等。

我希望将每次都会更改的输出存储到矩阵中。这可行吗？

```
for number of iterations
(Call script)
end
Output to excel 
```

我想将数据存储到矩阵中的原因是能够一次将所有答案（多次迭代）输出到 Excel 中。

编辑：为了更好地了解我的输出看起来像这样

```
Output = [rand() rand() rand(); rand() rand() rand()]; 
```

然后我用它来创建一个新变量：

```
var = Output(1,1)./Output(2,1); 
```

每次我运行脚本时，答案都会改变。每次这个新答案都是我希望保存在矩阵中的内容。希望这能说明问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T00:08:20.220

根据每个循环的输出/输出类型，您可以轻松地将中间结果保存在许多 MATLAB 数据结构`(randn`中的一个中，以下用作“做某事”的示例）：

```
nIterations = 10;

% scalar output
A = zeros(1, nIterations);
for n=1:nIterations
    A(n) = randn;
end

% matrix ouput of possibly changing size
B = cell(1, nIterations);
for n=1:nIterations
    B{n} = randn(1, n+1);
end

% matrix output of fixed size
C = zeros(3, 3, nIterations);
for n=1:nIterations
    C(:,:,n) = randn(3, 3);
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T15:47:03.963

假设 var 是您希望在每次迭代后放入矩阵中的东西，我建议如下：在您的代码周围添加另一个 for 循环，例如循环 i，然后最后不要将值分配给 var，而是变量（一）。

根据您的输出，您需要选择 var 的变量类型，例如单元格或矩阵。

# python - 正则表达式 + Python - 删除所有以 * 开头的行

> ID：12925191
> 
> 赞同：2
> 
> 时间：2012-10-16T23:56:18.103
> 
> 标签：python, regex

我想从给定文件中删除所有以 * 开头的行。例如，以下内容：

```
* This needs to be gone
But this line should stay
*remove 
* this too
End 
```

应该生成这个：

```
But this line should stay
End 
```

* * *

我最终需要做的是：

1.  删除括号和括号内的所有文本（包括括号/括号），
2.  如上所述，删除以''开头的行。

到目前为止，我能够使用以下内容解决＃1 `re.sub(r'[.?]|(.*?)', '', fileString)`：. 我为＃2尝试了几件事，但总是最终删除了我不想删除的东西

* * *

**解决方案 1（无正则表达式）**

```
>>> f = open('path/to/file.txt', 'r')
>>> [n for n in f.readlines() if not n.startswith('*')] 
```

**解决方案 2（正则表达式）**

```
>>> s = re.sub(r'(?m)^\*.*\n?', '', s) 
```

感谢大家的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T00:15:33.033

使用正则表达式 >>

```
s = re.sub(r'(?m)^\*.*\n?', '', s) 
```

检查**[这个演示](http://ideone.com/mCq4i)**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T00:10:31.570

你真的应该在这里提供更多信息。至少，您使用的 python 版本和代码片段。但是，也就是说，为什么需要正则表达式？我不明白为什么你不能只使用startswith。

以下适用于 Python 2.7.3

```
s = '* this line gotta go!!!'
print s.startswith('*')

>>>True 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T00:08:42.677

你不需要正则表达式。

```
text = file.split('\n') # split everything into lines.

for line in text:
    # do something here 
```

如果您需要更多帮助，请告诉我们。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-17T00:13:49.940

```
>>> f = open('path/to/file.txt', 'r')
>>> [n for n in f.readlines() if not n.startswith('*')]
['But this line should stay\n', 'End\n'] 
```

# python - 使用 struct.unpack 与 Python 中的 sum 将字节转换为整数

> ID：12925197
> 
> 赞同：0
> 
> 时间：2012-10-16T23:56:50.267
> 
> 标签：python, file-io, python-2.7, integer

通过查看本网站上的各种问题，我发现了 3 种从文件中读取 4 字节（32 位无符号小端序）整数的可行方法。即：

```
1) myInt, = struct.unpack('<I', bytes)
2) myInt = struct.unpack('<I', bytes)[0]
3) myInt = sum(bytes[i] << (i*8) for i in range(4)) 
```

这些中哪个最好？我知道使用 unpack 需要导入 struct 模块，但任何特定方法的其他优点或缺点是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T12:57:42.287

*最好*假设您的意思是更高效，我会说前两个中的任何一个。

正如您从这个微型基准测试中看到的那样，第三个要糟糕得多：

```
>>> bytes=b'\x10\x11\x12\x13'
>>> import struct
>>> import timeit
>>> timeit.timeit('a,=struct.unpack("<I", bytes)', 'from __main__ import struct, bytes')
0.16049504280090332
>>> timeit.timeit('a=struct.unpack("<I", bytes)[0]', 'from __main__ import struct, bytes')
0.1881420612335205
>>> timeit.timeit('sum(bytes[i] << (i*8) for i in range(4))', 'from __main__ import bytes')
1.2574431896209717 
```

第三个在 python2 中也不起作用，而第一个和第二个可以（所以它们也更便携）。

第三个也不那么可读，虽然`struct`对前两个版本有一点了解很容易理解。

即使第一个稍微快一点，我还是会选择第二个，因为仅用逗号很难看出阅读速度是否快，同时`[0]`清楚地表明您正在使用第一个元素。另请注意，速度上的差异确实很小，并且可能会在新/旧版本的 python 中发生变化，因此仅仅为了速度而使用第一个不会有太大的优化。

更新：

解释为什么`sum`这么慢（还有更多......）：

考虑到在 python 中整数是对象，就像任何其他对象一样。因此，当`5 + 2`您创建两个整数对象并执行该`__add__`方法时。所以加法不需要一条机器指令。

这就是为什么位移解决方案要慢得多，它必须创建中间对象并执行一些方法调用（这“成本”，因为参数必须由解释器打包和解包）。

你不应该假设在 C 中有效的在 python 中是有效的。

在 CPython 中优化代码的黄金法则（注意：CPython 不是 python。我说的是官方实现，而不是 PyPy、Jython 等替代方案），是在“C 级别”进行尽可能多的计算。“C 级别”是指用 C 编写的内部函数。

在这种情况下，“C 函数”是`struck.unpack`，它比使用的解决方案更好`sum`（注意：内部`sum`有一个“python 级别”循环，它比“C 级别”循环慢）。

另一个例子是地图：

```
#python2
>>> import timeit
>>> L = ['1', '2', '3'] * 5
>>> timeit.timeit('map(int, L)', 'from __main__ import L')
5.549130916595459
>>> timeit.timeit('[int(x) for x in L]', 'from __main__ import L')
6.402460098266602 
```

（这里的列表越长，`map`解决方案就列表理解而言越快）

我认为看到我的[这个](https://stackoverflow.com/questions/12840451/python-string-comparison-pointing-to-the-result/12843154#12843154)答案可能对您很有启发性，我在其中展示了纯 Python O(n) 算法如何通过使用“C 级”循环的 O(n logn) 算法对任何合理的输入大小进行击败 [also注意 [senderle 的[回答](https://stackoverflow.com/a/12843414/510937)]。

为什么这在 python2 中不起作用：

```
giacomo@jack-laptop:~$ python2
Python 2.7.3 (default, Aug  1 2012, 05:14:39) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> bytes='\x10\x11\x12\x13'
>>> import timeit
>>> timeit.timeit('sum(bytes[i] << (i*8) for i in range(4))', 'from __main__ import bytes')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.7/timeit.py", line 230, in timeit
    return Timer(stmt, setup, timer).timeit(number)
  File "/usr/lib/python2.7/timeit.py", line 195, in timeit
    timing = self.inner(it, self.timer)
  File "<timeit-src>", line 6, in inner
  File "<timeit-src>", line 6, in <genexpr>
TypeError: unsupported operand type(s) for <<: 'str' and 'int' 
```

在 python2 文件中返回字符串和字符串元素是字符串，所以你不能做移位操作。如果它对您有用，那么您使用的是 python3。

# matlab - 在matlab（3D Graph）中绘制2参数函数的结果

> ID：12925200
> 
> 赞同：0
> 
> 时间：2012-10-16T23:57:31.037
> 
> 标签：matlab, matlab-figure

基本上，我有一个函数 f(X,Y) 将为我给出的每个 X,Y 返回一个值。matlab中是否有任何函数可以传递函数f，X，Y的范围，以便绘制一个3d图，显示给定范围内所有值的f（沿z轴）的大小。

ezplot3，做这种，但它只需要一个参数't'。我对 matlab 很陌生，正在尽我所能快速学习它，但我找不到太多关于这个的东西。任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T03:35:22.270

好吧，这就是我想要的： http: [//www.mathworks.com/help/matlab/ref/ezsurf.html](http://www.mathworks.com/help/matlab/ref/ezsurf.html)

如果我这样做

```
ezsurf('f(x,y)'); 
```

我得到了我想要的 3d 图。

不管怎么说，多谢拉！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T00:21:27.560

请记住，使用 matlab，您永远不会真正绘制“函数”；您正在绘制数组/向量。因此，您实际上将通过绘制向量 X、Y 和 g，而不是尝试绘制 g = f(X,Y)，其中 X 和 Y 是您的原始输入，而 g 是包含您的输出的向量。

我很难想象你到底想画什么，但基本上，你可以遵循任何标准的 matlab 绘图示例，例如：[http ://web.cecs.pdx.edu/~gerry/MATLAB/plotting/plotting .html](http://web.cecs.pdx.edu/~gerry/MATLAB/plotting/plotting.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T14:20:12.720

它不会生成 3D 图，但我之前发现 2D 散点图对此类任务很有用：

```
scatter(x, y, 5, z) 
```

Where `z`is the value of the function at point`(x, y)`会产生类似于你想要的东西。它可能不如完整的 3D 情节那么漂亮，但可以用来产生良好的效果。

看：

[http://www.mathworks.com/matlabcentral/fileexchange/35287-matlab-plot-gallery-scatter-plot-2d/content/html/Scatter_Plot_2D.html](http://www.mathworks.com/matlabcentral/fileexchange/35287-matlab-plot-gallery-scatter-plot-2d/content/html/Scatter_Plot_2D.html)

这是我整理的一些（非常丑陋的）代码来展示差异：

```
j=1;
y = -100:1:100;
for i = -100:1:100
    y = [y -100:1:100];
    count = 0;
    while count < 202;
        x(j) = i;
        j = j+1;
        count = count + 1;
    end
end

z = (abs(x) + abs(y));

figure(1)
scatter(x, y, 10, z)
h=colorbar;

figure(2)
ezsurf('(abs(x) + abs(y))') 
```

# java - 将 JMenu 添加到在每像素半透明模式下运行的未修饰 JFrame 不会绘制

> ID：12925202
> 
> 赞同：2
> 
> 时间：2012-10-16T23:57:37.047
> 
> 标签：java, swing

我已将 JMenu 添加到未装饰的 JFrame 中，并且在将鼠标移到未绘制区域上之前不会绘制 JMenuItem。有没有人看到这个问题并知道如何解决/规避？这是一个显示问题的简化测试用例。

```
import java.awt.Color;
import java.awt.FlowLayout;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;

public class TestCase {
public static void main(String[] args) throws Exception {
    new JFrame() {{
        setJMenuBar(new JMenuBar() {{
            setOpaque(true);
            add(new JMenu("ProblemMenu") {{
                setOpaque(true);
                add(new JMenuItem("NotPainted"){{
                    setOpaque(true);
                }});}});}});
        setUndecorated(true);
        setBackground(new Color(11,111,222,196));
        setSize(300,300);
        setLocation(300,300);
        getContentPane().setLayout(new FlowLayout());
        getContentPane().add(new JButton(" OpaqueButton "));
        setVisible(true);
    }};
}
} 
```

![在此处输入图像描述](../Images/9b07ebc6956576d2b0f21f66e95c5290.png)

单击菜单“ProblemMenu”，菜单将打开一个白色矩形，JMenuItem 应该位于该矩形。将鼠标移到该区域上，JMenuItem 就会绘制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T02:08:41.950

每像素半透明 JFrame 菜单绘制问题是由 JRE 引起的，并通过移动到更新的 JRE ( 1.7.0_09-b05 ) 得到修复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T02:11:33.197

可能是 setOpaque() 调用与您的 LAF 结合使用。

阅读这个很好的答案，了解为什么 setOpaque() 有问题。

[设置不透明（真/假）；爪哇](https://stackoverflow.com/questions/2451990/setopaquetrue-false-java)

# iphone - 未找到“stdio.h”文件。MuPDF

> ID：12925208
> 
> 赞同：0
> 
> 时间：2012-10-16T23:58:11.363
> 
> 标签：iphone, shared-libraries, mupdf

我要做的就是从这个站点运行 xcode 项目：http: [//www.mupdf.com/](http://www.mupdf.com/)

问题是我收到此错误：

```
Shell Script Invocation Error: 'stdio.h' file not found 
```

该网站提到，如果我从源代码运行，我需要安装依赖项，但我不知道该怎么做。我尝试将他们说我需要的文件拖到 xcode 库部分，但什么也没做。

有任何想法吗？

*编辑*我注意到 libLibraries.a 文件在 Targets->MuPDF->“Build Phases Link Binary with Libraries”下是红色的，不知道如何告诉它在哪里可以找到该文件...

# jquery - 根据对象 ID 填充隐藏字段的自动完成功能

> ID：12925209
> 
> 赞同：0
> 
> 时间：2012-10-16T23:58:20.830
> 
> 标签：jquery, autocomplete

我正在尝试设置一个简单的数据输入表单，并且我是 JQUERY 的新手。我需要在隐藏字段中返回选择自动完成项目的数据库 ID。我在网上找到了代码，但是当我在表单中添加多个字段时，自动完成通过将引用从 ID 更改为 CLASS 来工作。但是隐藏字段没有。

我认为问题是我需要有特定的 ID 标签名称来更新特定隐藏字段的值。我在想我可以做一些事情，比如获取正在使用自动完成更新的当前字段的 ID ......这就是我需要帮助的地方。

```
$().ready(function() {

    $(".course").autocomplete("get_course_list2.php", {
            width: 360,
            matchContains: true,
            mustMatch: true,
            //minChars: 0,
            //multiple: true,
            //highlight: false,
            //multipleSeparator: ",",
            selectFirst: false
    });

    $(".course").result(function(event, data, formatted) {
            $("#course_val").val(data[1]);
    });
}); 
```

这是HTML表单

```
<form autocomplete="off">
    <p>
        Course Name <label>:</label>
        <input type="text" name="course1" class="course" id="course1" />
        <input type="hidden" name="course_val1" class=".course_val" id="course_val1" />
    </p>
    <p>
        Course Name <label>:</label>
        <input type="text" name="course2" class="course" id="course2" />
        <input type="hidden" name="course_val2" class=".course_val" id="course_val2 " />
    </p>
    <input type="submit" value="Submit" />
</form> 
```

如果您能提供任何帮助，我将不胜感激。

感谢 jlimited

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T23:16:30.057

这是我在其他地方找到的解决方案。

```
$(".course").result(function(event, data, formatted) {
        $( "#"+$(this).attr("id").replace("course","course_val" )).val(data[1]);
}); 
```

# php - php多维数组，内爆两次？

> ID：12925212
> 
> 赞同：3
> 
> 时间：2012-10-16T23:58:55.720
> 
> 标签：php, multidimensional-array, joomla2.5, implode

我需要一些帮助来尝试两次内爆我的多维数组。我正在使用 Joomla 2.5，它用于后端组件..

这是数组的内容：

```
Array
(
    [jform] => Array
        (
            [options] => Array
                (
                    [colour] => Array
                        (
                            [0] => a
                            [1] => d
                        )

                    [size] => Array
                        (
                            [0] => b
                            [1] => e
                        )

                    [qty] => Array
                        (
                            [0] => c
                            [1] => f
                        )

                )

        )

) 
```

我尝试使用以下代码：

```
$i=0;
$optchildArr = array();
$optchildArrX = array();
foreach ($this->options as $optArr) :

    $j=0;
    foreach ($optArr as $arr) :
        $optchildArrX[] = $arr;
        $j++;
    endforeach;

    $optchildArr[$i] = implode(',',$optchildArrX);
    $i++;
endforeach;

$this->options  = implode(';',$optchildArr); 
```

但我得到了这样的结果：

```
[options] => Array
        (
            [0] => a,d
            [1] => a,d,b,e
            [2] => a,d,b,e,c,f
        ) 
```

当我追求：

```
[options] => Array
        (
            [0] => a,b,c
            [1] => d,e,f
        ) 
```

任何帮助将不胜感激！！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T00:17:40.323

假设主数组是`$A`

```
function mergeArrays($colour, $size, $qty) {
    $result = array();
    for ($i=0; $i<count($colour); $i++) {
        //Assuming three arrays have the same length;
        $result[] = implode(',',array($colour[$i], $size[$i], $qty[$i]));
    }
    return $result;
}

$result_array = array_map(
    'mergeArrays',
    $A['jform']['options']['colour'],
    $A['jform']['options']['size'],
    $A['jform']['options']['qty']
);

//Check the output from this, should be the output you described.
var_dump($result_array); 
```

# r - 防止 cex 与 chart.Correlation() 中的相关系数缩放

> ID：12925213
> 
> 赞同：3
> 
> 时间：2012-10-16T23:58:55.790
> 
> 标签：r, correlation

我正在尝试绘制一个巨大的相关系数矩阵，目前，我的绘图如下所示： ![请注意，某些单元格缺少相关系数](../Images/8b421165cb36405517bd1625c7dba0d4.png)

请注意，某些单元格缺少相关系数（暂时忽略绘图缺乏对称性，除非您碰巧知道为什么会这样）。我相信这些值实际上并没有丢失，只是太小而无法出现，因为它们是按相关系数的值来衡量的。

查看 chart.Correlation() 的文档，我能够找到一个函数，该函数可以对 chart.Correlation() 的大部分内容进行建模：

```
panel.cor <- function(x, y, digits=2, prefix="", cex.cor)
{
    usr <- par("usr"); on.exit(par(usr))
    par(usr = c(0, 1, 0, 1))
    r <- abs(cor(x, y))
    txt <- format(c(r, 0.123456789), digits=digits)[1]
    txt <- paste(prefix, txt, sep="")
    if(missing(cex.cor)) cex <- 0.8/strwidth(txt)    
    test <- cor.test(x,y)
    # borrowed from printCoefmat
    Signif <- symnum(test$p.value, corr = FALSE, na = FALSE,
                  cutpoints = c(0, 0.001, 0.01, 0.05, 0.1, 1),
                  symbols = c("***", "**", "*", ".", " "))

    text(0.5, 0.5, txt, cex = cex * r)
    text(.8, .8, Signif, cex=cex, col=2)
}
pairs(USJudgeRatings[,c(2:3,6,1,7)], lower.panel=panel.smooth, upper.panel=panel.cor) 
```

如果我改变：

```
text(0.5, 0.5, txt, cex = cex * r) 
```

至：

```
text(0.5, 0.5, txt, cex = 0.8) 
```

我大致得到了我正在寻找的效果。问题是我不知道如何使用 chart.Correlation() 本身更改此参数。这个问题有意义吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T00:23:23.597

这是一个修改函数以允许你想要的东西的hack。这向函数添加了一个用户可设置的指数参数，允许您将`cex`值更改为`cex*[correlation]^cex.cor.scale`.

由于处理方式，它会发出警告`...`；它们很烦人但无害。

最好联系维护者并询问他们是否愿意增强功能，或者开始创建您自己的修改版本的包。

**编辑**：对相关行进行更稳健的更改

```
library("PerformanceAnalytics")
## turn the function into a character string
tmpstr <- deparse(chart.Correlation)
## modify the relevant lines
panelcorline <- grep("^ *panel.cor",tmpstr)
tmpstr[panelcorline] <- paste(tmpstr[panelcorline],"cex.cor.scale=1,")
rscaleline <- grep("^ *text\\(0.5",tmpstr)
tmpstr[rscaleline] <- gsub("cex \\* r","cex*r^cex.cor.scale",tmpstr[rscaleline])
## convert back to a function (don't mask the original function)
my.chart.Correlation <- eval(parse(text=tmpstr)) 
```

测试一下：

```
data(managers)
chart.Correlation(managers[,1:8], histogram=TRUE, pch="+")
## no scaling
my.chart.Correlation(managers[,1:8], histogram=TRUE, pch="+",cex.cor.scale=0)
## enhanced scaling
my.chart.Correlation(managers[,1:8], histogram=TRUE, pch="+",cex.cor.scale=2) 
```

# xslt - Umbraco Cogworks 灵活导航 - 如何排除文档类型

> ID：12925214
> 
> 赞同：1
> 
> 时间：2012-10-16T23:59:03.847
> 
> 标签：xslt, umbraco

有人可以告诉我如何从 Cogworks 灵活导航中排除文档类型吗？

如何允许从导航中排除文档类型的数组或列表？

注意：我不想使用“umbracoNaviHide”，因为我想排除文档类型，我不想在我的文档类型中添加一个真/假复选框，然后手动检查它们。

Cogworks - 灵活导航：[http ://our.umbraco.org/projects/website-utilities/cogworks-flexible-navigation](http://our.umbraco.org/projects/website-utilities/cogworks-flexible-navigation)

相关文章：[Umbraco xslt 导航查询](https://stackoverflow.com/questions/8886484/umbraco-xslt-navigation-query)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T23:37:47.317

这取决于您使用的是 Razor 版本还是 XSLT 版本。对于 XSLT，您将`*[name()!='MyDoctypeAlias' or name()!='MyOtherDoctypeAlias']`在 XSLT 文件中的 nodeIterator 模板的“match”属性中添加一个。

对于 Razor 版本，在 nodeIterator 助手中，我将定义如下：

```
List<string> listOfDoctypesToExclude = new List<string>() { "MyDoctypeAlias", "MyOtherDoctypeAlias" };
if (!listOfDoctypesToExclude.Contains(currentNode.NodeTypeAlias) {
  // continue with render
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T02:34:14.293

我发现这作为一个捷径很有效，但我仍然希望以某种方式创建一个排除文档类型的数组或列表。

首先隐藏祖先选择状态：

```
<!--Is the node a branch? i.e. are there children and is it in the colletion of ancestor nodes -->
    <xsl:variable name="isBranch">
      <xsl:choose>
        <xsl:when test="$currentPage/ancestor-or-self::*[@isDoc][@id = $currentNodeID]/child::*[@isDoc][name() != 'MyDoctypeAlias']">1</xsl:when>
      </xsl:choose>
    </xsl:variable> 
```

然后隐藏子节点（hasChildren）：

```
<xsl:variable name="hasChildren">
      <xsl:choose>
        <xsl:when test="./*[@isDoc][name() != 'MyDoctypeAlias']">1</xsl:when>
      </xsl:choose>
    </xsl:variable> 
```

# regex - 使用 RegExp 和数组查询

> ID：12925217
> 
> 赞同：2
> 
> 时间：2012-10-16T23:59:49.320
> 
> 标签：regex, mongodb, mongoid, ruby-on-rails-3.2

我有一个 class `Post`，范围如下：

```
scope :by_tag, ->(tag){ where(:desc => /##{Regexp.escape(tag)}/) } 
```

它适用于一个标签，但我不能让它适用于各种标签。

例如：我不能让它给我带有#rails 和#regexp 标记的帖子。

使用标准联合，我可以让它返回带有#rails 或#regexp 标记的帖子。

我怎样才能让它工作？我正在使用 mongoid，顺便说一句。

提前致谢。

* * *

只是发现这不是 OR。发生的情况是，我第二次调用 by_tag 时，它会覆盖前一次。我相信那是因为它是同一个属性。

有人知道如何解决这个问题吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T11:35:14.510

正则表达式查询往往非常慢。相反，存储一个标签数组并用于`$in`查询该数组。

使用 Mongoid 2.x 使用[`all_in`](http://two.mongoid.org/docs/querying/criteria.html#all_in)

```
scope :by_tags, ->(*tags) { all_in(tags: *tags) } 
```

使用 Mongoid 3 使用[`all`合并策略](http://mongoid.org/en/origin/docs/selection.html#merging)

```
scope :by_tags, ->(*tags) { all(tags: *tags) } 
```

# python - 如何在单元测试中杀死套接字以进行重新连接测试

> ID：12925227
> 
> 赞同：4
> 
> 时间：2012-10-17T00:01:12.670
> 
> 标签：python, unit-testing, sockets

我正在尝试测试一些在断开连接后重新连接到服务器的代码。这在测试之外工作得很好，但是在运行测试时它无法确认套接字已断开连接。

我正在使用 Gevent Stream Server 来模拟一个真正的监听服务器：

```
import gevent.server
from gevent import queue

class TestServer(gevent.server.StreamServer):

    def __init__(self, *args, **kwargs):
        super(TestServer, self).__init__(*args, **kwargs)
        self.sockets = {}

    def handle(self, socket, address):
        self.sockets[address] = (socket, queue.Queue())
        socket.sendall('testing the connection\r\n')
        gevent.spawn(self.recv, address)

    def recv(self, address):
        socket = self.sockets[address][0]
        queue = self.sockets[address][1]
        print 'Connection accepted %s:%d' % address
        try:
            for data in socket.recv(1024):
                queue.put(data)
        except:
            pass

    def murder(self):
        self.stop()
        for sock in self.sockets.iteritems():
            print sock
            sock[1][0].shutdown(socket.SHUT_RDWR)
            sock[1][0].close()
        self.sockets = {}

def run_server():
    test_server = TestServer(('127.0.0.1', 10666))
    test_server.start()
    return test_server 
```

我的测试看起来像这样：

```
def test_can_reconnect(self):
    test_server = run_server()
    client_config = {'host': '127.0.0.1', 'port': 10666}
    client = Connection('test client', client_config, get_config())
    client.connect()
    assert client.socket_connected
    test_server.murder()
    #time.sleep(4) #tried sleeping. no dice.
    assert not client.socket_connected
    assert client.server_disconnect
    test_server = run_server()
    client.reconnect()
    assert client.socket_connected 
```

它在`assert not client.socket_connected`.

我在接收期间检测到“非数据”。如果它是None，那么我设置一些变量，以便其他代码可以决定是否重新连接（如果是user_disconnect，则不要重新连接等等）。这种行为有效并且过去一直对我有效，直到现在我才尝试对其进行测试。套接字连接和本地函数范围或其他东西有什么奇怪的吗？就像停止服务器后连接仍然存在一样。

我要测试的代码是开放的：[https ://github.com/kyleterry/tenyks.git](https://github.com/kyleterry/tenyks.git)

如果你运行测试，你会看到我试图修复的那个失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T18:13:05.340

尝试使用真正的套接字运行单元测试是一件很难的事情。这将很棘手，因为一次只能运行一组测试，因为将使用服务器端口，并且随着套接字的建立和拆除，它会很慢。最重要的是，如果这真的是一个单元测试，你不想测试套接字，只是使用套接字的代码。

如果您模拟套接字调用，您可以从模拟代码中随意抛出异常，并确保使用套接字的代码执行正确的操作。您不需要真正的套接字来确保被测类执行正确的操作，如果您可以将套接字调用包装在对象中，则可以伪造它。在构造类时传入对套接字对象的引用，然后就可以开始了。

我的建议是将套接字调用包装在一个支持 sendall、recv 以及您在套接字上调用的所有方法的类中。然后，您可以用 TestReconnectSocket （或其他）替换实际的 Socket 类并运行您的测试。

看看[mox](http://code.google.com/p/pymox/wiki/MoxDocumentation)，一个 python 模拟框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T18:00:39.087

像这样测试套接字时要记住的一件事是，操作系统不喜欢在套接字使用后立即重新打开它。您可以设置一个套接字选项来告诉它继续并重用它。创建套接字后立即设置套接字的选项：

```
mysocket.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1) 
```

希望这可以解决您的问题。您可能必须在服务器端和客户端都执行此操作，具体取决于哪个给您带来问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T21:33:48.250

*   您正在打电话`shutdown(socket.SHUT_RDWR)`，所以这似乎不是[recv 阻塞的问题](https://stackoverflow.com/questions/3624365/blocking-recv-doesnt-exit-when-closing-socket-from-another-thread)。
*   **但是**，您正在使用`gevent.socket.socket.recv`，因此请检查您的`gevent`版本，[如果底层文件描述符关闭](https://github.com/SiteSupport/gevent/issues/26)（版本 < ） ，则存在`recv()`导致其阻塞的问题`v0.13.0`
*   您可能仍然需要`gevent.sleep()`进行合作收益并给客户一个退出`recv()`通话的机会。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T09:43:12.127

模糊的响应，但我的直接反应是您的 recv() 调用正在阻塞并保持套接字处于活动状态 - 您是否尝试过使套接字变为非阻塞，并在关闭时捕获错误？

# c# - 从 Repeater Eval 脚本访问页面元素值

> ID：12925229
> 
> 赞同：0
> 
> 时间：2012-10-17T00:01:24.970
> 
> 标签：c#, asp.net, eval

我有一个 C#/ASP 页面。它上面有一个中继器。在这个重复中，我需要能够在其中一次迭代中访问存储在页面隐藏字段中的值。

我已经了解了以下脚本，但无法弄清楚如何访问页面上的隐藏字段控件。

```
<%# Container.ItemIndex == 0 ? "in " HIDDENFIELD.VALUE : "" %> 
```

任何人都可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T00:11:20.640

脚本语法如下

```
<%# condition ? truepart : falsepart %> 
```

你需要`hiddenfield`的身份证

```
<%# Container.ItemIndex == 0 ? HiddenFieldID.value : "" %> 
```

# javascript - 如何设置标签在加载网页时自动显示

> ID：12925231
> 
> 赞同：2
> 
> 时间：2012-10-17T00:01:56.447
> 
> 标签：javascript, html, css, tabs

jsfiddle：http: [//jsfiddle.net/87YGW/](http://jsfiddle.net/87YGW/)

目前我必须单击选项卡 1 来显示内容，但是我希望选项卡 1 的内容在打开页面时自动显示。

HTML：

```
<div id="tab2" class="css-tabs">
        <ul class="noint11_menu">
            <li id="item-1"> <a href="#item-1">Tab 1</a>
                <div>tab conten1
                   </div>
            </li>
            <li id="item-2"> <a href="#item-2">Tab 2</a>
                <div>
                    <p>Tab Content 2</p>
                </div>                
            </li>
            <li id="item-3"> <a href="#item-3">Tab 3</a>
                <div id="notice">
                    <p>tab content 3 </p>
                </div>
            </li>
            <li id="item-4" title="click for Tab 4"> <a href="#item-4">Tab 4</a>
                <div>
                    <p>Tab Content 4</p>
                </div>
            </li>
        </ul>
    </div>​ 
```

CSS：

```
.css-tabs {
    position: relative;
    text-align: left; /* This is only if you want the tab items at the center */
    height: auto
}
.css-tabs ul.noint11_menu {
    list-style-type: none;
    display: inline-block; /* Change this to block or inline for non-center alignment */
}
.css-tabs ul.noint11_menu > li {
    display: block;
    float: left;
}
.css-tabs ul.noint11_menu li > a {
    color: #EEEEEE;
    text-shadow: 1px 1px 1px #000;
    font-family: 'MuliLight', Arial, sans-serif;
    font-size: 14px;
    text-decoration: none;
    display: block;

}
.css-tabs ul.noint11_menu li > div {
    display: none;
    position: absolute;
    width: 100%;

}
.css-tabs ul.noint11_menu li > div > p {
    border: transparent;
    padding: 10px;
    margin: 0;
}
.css-tabs ul.noint11_menu li > a:focus {
    border-bottom: 1px solid #fff;
}
.css-tabs ul.noint11_menu li:target > a {
    cursor: default;
    border-bottom: 1px solid #fff;
}
.css-tabs ul.noint11_menu li:target > div {
    display: block;
}​ 
```

我不能使用 Javascript、Jquery 或 iframe

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T00:11:26.383

在您的 CSS 中添加：

```
#item-1 div {display: block} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T00:23:04.853

我无法在小提琴中演示它（因为 iframe），但如果您直接链接到第一个选项卡，例如：`http://www.yoururl.com/page#item-1`，第一个选项卡的内容将在页面加载时可见。

您可以通过将所有代码放入一个新的空白 html 文件（CSS 和标记在其正确位置）并将其保存为“test.html”来测试这一点。然后使用以下代码在同一文件夹中创建另一个 html 文件：

```
<html>
  <body>
    <a href="test.html#item-1">link</a>
  </body>
</html> 
```

保存并打开第二个文件，然后单击链接转到您的样式页面。请注意，第一个选项卡的内容是可见的，并且选项卡切换仍然按预期工作。

没有 JS 来重定向或改变窗口位置，我不相信你可以单独通过 CSS 获得相同的结果。

[这篇文章](http://css-tricks.com/on-target/)解释了它为什么起作用：**当 URL 中的哈希和元素的 id 相同时，CSS 中的 :target 伪选择器匹配。**

* * *

编辑添加另一个hacky，但纯CSS“解决方案”：

使用 使第一个选项卡始终可见`#item-1 div {display: block}`，并在所有选项卡上设置背景颜色：

```
.css-tabs ul.noint11_menu li > div {
    display: none;
    position: absolute;
    width: 100%;
    left: 0;
    color: #ccc;
    text-align: left;
    padding: 0;
    margin-left: 32px;
    background: #fff; /* added this */
} 
```

现在，其他选项卡在被选中时将隐藏第一个选项卡。演示：http: [//jsfiddle.net/87YGW/3/](http://jsfiddle.net/87YGW/3/)

# javascript - jquery获取分组单选按钮的值

> ID：12925234
> 
> 赞同：0
> 
> 时间：2012-10-17T00:02:12.620
> 
> 标签：javascript, jquery, radio-button, clone, tablerow

单击添加按钮时如何获取单选按钮组的值？

以下是我到目前为止所拥有的：http: [//jsfiddle.net/RBYzm/](http://jsfiddle.net/RBYzm/)

每当我向另一个表添加一行时，无论我选择哪个单选按钮，它都不会显示为在我要添加行的表中选择的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T00:04:24.793

我看到您没有设置添加到要添加的行的值。您只是在创建元素，但没有复制主表中的值。

你为什么不直接使用`.clone()`..

**编辑**

[更新的小提琴](http://jsfiddle.net/sushanth009/RBYzm/5/)

我对代码进行了一些更改..更改了有重复项的 id..还访问了当前行的值并将其复制到新添加的行中..

# html - 如何使图像充当 html 表单中的复选框？

> ID：12925238
> 
> 赞同：0
> 
> 时间：2012-10-17T00:02:46.930
> 
> 标签：html, forms

我正在尝试创建一个表单，用户可以在其中选择选项，而不是使用复选框，我希望他们能够选择图像。

当他们选择图像时，他们周围可能会有一个边框，表明他们已被选中。

哪种类型的输入处理这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T01:05:01.387

由于复选框是选中/未选中的默认 HTML 行为，我会这样做：

*   创建表单
*   对于每张图片，在其旁边添加一个复选框
*   使用相似的 id 命名图像和复选框（checkbox1/image1、checkbox2/image2、...）
*   使用 Javascript 隐藏复选框
*   将 Javascript 事件绑定到每个图像以选中/取消选中与图像关联的复选框（可以使用 ID 或通过它们在 DOM 中的位置来完成）

这将具有额外的优势，即禁用 Javascript 的人仍然可以通过单击复选框来选择图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T00:29:30.613

您可以使用 jQuery 插件，[http://ajaxdump.com/?0BNm4jJ0](http://ajaxdump.com/?0BNm4jJ0)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T00:42:24.310

## 解决方案 1

您可以反过来使用（仅在 chrome 中测试）`:before`和图像：

演示：http: [//jsfiddle.net/SO_AMK/hG9Fh/](http://jsfiddle.net/SO_AMK/hG9Fh/)

不，我*不*只是从头顶上输入所有的 CSS`:D`

CSS，这段代码纯粹是为 Chrome 构建的，在任何情况下都不兼容跨浏览器：

```
input[type='checkbox'] {
  -webkit-appearance: none;
  -webkit-user-select: none;
  background-image: -webkit-linear-gradient(#ededed, #ededed 38%, #dedede);
  border: 1px solid rgba(0, 0, 0, 0.25);
  border-radius: 2px;
  box-shadow: 0 1px 0 rgba(0, 0, 0, 0.08),
      inset 0 1px 2px rgba(255, 255, 255, 0.75);
  color: #444;
  font: inherit;
  margin: 0 1px 0 0;
  text-shadow: 0 1px 0 rgb(240, 240, 240);
}

input[type='checkbox'] {
  bottom: 2px;
  height: 13px;
  position: relative;
  vertical-align: middle;
  width: 13px;
}

input[type='checkbox']:checked::before {
  -webkit-user-select: none;
  background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAALCAYAAACprHcmAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2hpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpGNzdGMTE3NDA3MjA2ODExODIyQUNDRTE5M0FEN0FEQyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo0QjQ3OTIzNkI3NEQxMUUxODVFM0E5RkQzRkE4MDc5QiIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo0QjQ3OTIzNUI3NEQxMUUxODVFM0E5RkQzRkE4MDc5QiIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QjkwRTAxMTQxMjIwNjgxMTgwODNEQUM5MDc1RTIzMkQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6Rjc3RjExNzQwNzIwNjgxMTgyMkFDQ0UxOTNBRDdBREMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4TU+XQAAAAcklEQVQY02NgwA/YoJgoEA/Es4DYgJBCJSBeD8SboRinBiYg7kZS2IosyQ/Eakh8LySFq4FYHFlxGRBvBOJYqMRqJMU+yApNkSRAeC0Sux3dfSCTetE0wKyXxOWhMKhTYIr9CAUXyJMzgLgBagBBgDPGAI2LGdNt0T1AAAAAAElFTkSuQmCC');
  background-size: 100% 100%;
  content: '';
  display: block;
  height: 100%;
  width: 100%;
}

:enabled:hover:input[type='checkbox'] {
  background-image: -webkit-linear-gradient(#f0f0f0, #f0f0f0 38%, #e0e0e0);
  border-color: rgba(0, 0, 0, 0.3);
  box-shadow: 0 1px 0 rgba(0, 0, 0, 0.12),
      inset 0 1px 2px rgba(255, 255, 255, 0.95);
  color: black;
}

:enabled:active:input[type='checkbox'] {
  background-image: -webkit-linear-gradient(#e7e7e7, #e7e7e7 38%, #d7d7d7);
  box-shadow: none;
  text-shadow: none;
}

input:disabled:[type='checkbox'] {
  opacity: .75;
}

:enabled:focus:input[type='checkbox'] {
  -webkit-transition: border-color 200ms;
  border-color: rgb(77, 144, 254);
  outline: none;
}​ 
```

## 解决方案 2

将复选框替换为触发它们 onclick 的图像，这里有一篇很好的文章：[http ://ryanfait.com/resources/custom-checkboxes-and-radio-buttons/](http://ryanfait.com/resources/custom-checkboxes-and-radio-buttons/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T00:24:03.407

使用[按钮](http://www.w3.org/TR/html401/interact/forms.html#h-17.5)。您可以使用用户将看到的背景图像，并使用元素的值处理表单。

再见

# php - php中的迄今为止的字符串

> ID：12925239
> 
> 赞同：2
> 
> 时间：2012-10-17T00:02:52.277
> 
> 标签：php, datetime

我花了这几天，并试图用谷歌搜索它，但没有运气。我有一个日期存储在字符串 $dob = '2012-10-06 10: 45: 45 +0000'; 我正在尝试使用以下代码将其转换为日期：

```
$timezone = 'Europe/Brussels';  
$d = DateTime::createFromFormat("Y-m-d H:i:s P",$dob ,new DateTimeZone($timezone)); 
    echo $d->format("Y-m-d"); 
```

但我收到以下错误消息：致命错误：调用非对象上的成员函数 format() 如何从以下格式的字符串创建 DateTime：2012-10-06 10: 45: 45 +0000 ? 谢谢你的帮助...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T00:06:12.453

看起来您的日期中有空格不在您的模式中。此外，P => O 因为 P 有一个冒号，其中 O 仅为 4 位数字。

试试`"Y-m-d H: i: s O"`吧。

您可能会收到错误，因为 createFromFormat() 失败并且您实际上在 $d 中没有 DateTime 对象。

如果这不能解决问题，请查看[DateTime::getLastErrors()](http://www.php.net/manual/en/datetime.getlasterrors.php)。这可以帮助解释问题。

这是一个 PHP 沙箱的链接，我的建议有效： [http ://sandbox.onlinephpfunctions.com/code/ee06a025fb9ab47f136eba221382c8b2f84be703](http://sandbox.onlinephpfunctions.com/code/ee06a025fb9ab47f136eba221382c8b2f84be703)

您必须单击代码下方的运行按钮。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-17T00:13:11.870

```
YY-MM-DD HH: II: SS tzcorrection 
```

# rest - Service Bus for Windows Server（Service Bus 1.0 Beta）是否支持 REST API？

> ID：12925240
> 
> 赞同：0
> 
> 时间：2012-10-17T00:02:59.077
> 
> 标签：rest, servicebus

如果支持，我在哪里可以找到有关 REST api 的详细文档。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T22:45:59.600

感谢有关服务总线发布版本的回复和更新信息。我设法成功连接到服务总线并使用以下微软示例获取身份验证令牌。

[http://msdn.microsoft.com/en-us/library/windowsazure/jj193003%28v=azure.10%29.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/jj193003%28v=azure.10%29.aspx)

一旦您获得令牌，其余操作（创建队列、发送消息、接收消息）与 Windows azure 服务总线相同。请参阅有关服务总线操作的 microsoft 文档的详细信息。

[http://msdn.microsoft.com/en-us/library/windowsazure/hh690927.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/hh690927.aspx) 希望这有帮助。谢谢。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T07:00:48.363

Server 和 Service 之间的协议表面在很大程度上是对称的，尽管某些子服务有不同的端口，并且身份验证模型已针对使用本地 STS 而不是 ACS 的 Server 环境进行了调整。随着我们发布服务总线服务器的发布版本，您会发现更新的 MSDN 文档超出了当前作为 SDK 的一部分提供的内容，这将在本月结束之前发生。

# sql - 模糊的“连接操作中的语法错误” - Access 2003

> ID：12925244
> 
> 赞同：1
> 
> 时间：2012-10-17T00:03:23.987
> 
> 标签：sql, database, ms-access, syntax-error

一段时间以来，我有这个已经工作了一个月的 SQL 块：

```
SELECT 
    F.[BRANCH] AS REGION
    , F.[ACCOUNT]
    , F.[EFFECTIVE]
    , F.[POLICY]
    , F.[DESC2]
    , F.[DESC4]
    , F.[GROSS]
    , F.[COMM]
    , F.[GST ON COMM]
    , F.[ENTRYDATE]
    , I.[TYPE] 
FROM (
    (SELECT [POLP - Detailed Debtors Import].* 
     FROM [POLP - Detailed Debtors Import]  
     WHERE [POLP - Detailed Debtors Import].[EFFECTIVE] <= DateValue("30/05/2012")  
        AND [POLP - Detailed Debtors Import].[GROSS] >= 0  
        AND [POLP - Detailed Debtors Import].[DESC4] IN ('RNWL', 'NEWB', 'EP')  
        AND [POLP - Detailed Debtors Import].[DUEYR] = 2012) AS F 
        INNER JOIN (SELECT IPM_ACCTXREF.* FROM IPM_ACCTXREF  
                        WHERE IPM_ACCTXREF.TYPE 
                            IN (SELECT [Evolve - Account Types].[Account Types] 
                                FROM [Evolve - Account Types])
                        ) AS I ON F.[ACCOUNT] = I.[ACCOUNT]
    ) 
    LEFT JOIN (SELECT  [POLP - Detailed Debtors Import].* 
                  FROM [POLP - Detailed Debtors Import]  
                  WHERE [POLP - Detailed Debtors Import].[DESC4] IN ('CS', 'CANC', 'JL')
                  ) AS S ON F.[POLICY] = S.[POLICY] 
WHERE S.[POLICY] IS NULL 
```

然后我想对 DateValue 参数进行更改（就像将 5 更改为 6 一样简单）。

那么问题是我重复了三次“JOIN 操作中的语法错误”。单击它们中的每一个，查询然后显示结果表，但带有“#Name？” 填充在每个字段中。

不知道这里发生了什么......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T23:52:20.377

将查询分解为子查询（通过所有讨厌的嵌套`SELECT`语句）解决了这个问题。不知道首先是什么原因（它确实曾经起作用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T06:24:18.407

您可能应该重写查询，明确您需要的字段，而不仅仅是使用`*`.

```
SELECT F.REGION,
       F.ACCOUNT,
       F.EFFECTIVE,
       F.POLICY,
       F.DESC2,
       F.DESC4,
       F.GROSS,
       F.COMM,
       F.[GST ON COMM],
       F.ENTRYDATE,
       I.[TYPE]
FROM   ( (SELECT BRANCH AS REGION,
               ACCOUNT,
               EFFECTIVE,
               POLICY,
               DESC2,
               DESC4,
               GROSS,
               COMM,
               [GST ON COMM],
               ENTRYDATE
        FROM   [POLP - Detailed Debtors Import]
        WHERE  EFFECTIVE<=Datevalue("30/05/2012")
               AND GROSS>=0
               AND DESC4 IN ('RNWL', 'NEWB', 'EP')
               AND DUEYR=2012) AS F
         INNER JOIN (SELECT [TYPE],
                            ACCOUNT
                     FROM   IPM_ACCTXREF
                     WHERE  [TYPE] IN (SELECT [Account Types]
                                       FROM   [Evolve - Account Types])) AS I
           ON F.ACCOUNT=I.ACCOUNT )
       LEFT JOIN (SELECT POLICY
                  FROM   [POLP - Detailed Debtors Import]
                  WHERE  DESC4 IN ('CS', 'CANC', 'JL')) AS S
         ON F.POLICY=S.POLICY
WHERE  S.POLICY IS NULL 
```

我对这里的目的有点迷茫，因为主语句中实际上没有使用`LEFT JOIN`任何数据。`S``SELECT`

您还使用名称`TYPE`作为字段名称，这是一个保留字。

# android - 备份项目的最佳方式

> ID：12925249
> 
> 赞同：0
> 
> 时间：2012-10-17T00:04:08.640
> 
> 标签：android, eclipse, backup

嘿伙计们，这里有一个简单的问题。备份android项目的最佳方法是什么？我使用日食。我很新，不知道我需要什么来备份它。我只需要项目还是还需要元数据？多谢你们

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T00:07:40.290

我总是直接将项目的整个文件夹复制到eclipse工作区中。您可以稍后在 eclipse 中通过 File --> Import --> General --> Existing project 将其导入工作区。您可以在那里选择文件夹，所有内容都将恢复。希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T00:17:47.370

如果我对您的理解正确，您想备份您的项目吗？如果您以前从未使用过版本控制，那么现在是开始的好时机！版本控制不仅会为您提供所需的内容，还会为您提供许多其他出色的功能。有很多不同的 SCM 可供您选择；Git、SVN、Mercurial 等。

否则，如果您只想将项目复制到另一个位置，请打开 eclipse 工作区文件夹（您在第一次启动 eclipse 时定义的目录）并从那里复制项目目录。或者按照 MarchingHome 的建议去做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T00:15:07.267

只要您独自工作并且始终在同一台机器上工作，您就可以在[git](http://git-scm.com/)等版本控制系统的帮助下简单地备份整个项目文件夹。这将帮助您跟踪所做的所有更改并让您撤消任何代码更改。您可以将[github](https://github.com/)用作可靠的删除服务。如果您还不熟悉它，那么可能需要一些阅读才能进入，但之后您的生活会容易得多。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-17T00:16:16.520

您需要元数据。当您使用 eclipse 时，顶层项目目录中有几个文件：.cproject（这可能只有在您使用 CDT 插件时才会出现）、.project，有时还有 .settings 目录。基本上，您需要所有点文件/目录。您可以压缩目录，这就足够了。

也就是说，如果您尝试打开该项目并且路径已更改，您可能会遇到错误。如果您缺少项目使用的重要插件，也是如此。

你应该做的是使用某种版本控制。尝试 git 或 mercurial。Eclipse 也有它们的插件。

# c++ - 使用delete后指针是否指向堆栈或堆？

> ID：12925251
> 
> 赞同：2
> 
> 时间：2012-10-17T00:04:18.537
> 
> 标签：c++, memory-leaks, heap-memory, stack-memory

在这些 C++ 代码行中：

```
int * p = new int(33);
delete(p);
*p = 13;
cout << *p << endl; 
```

输出为 13；

P最初指向堆上的一个地址，然后我使用delete关键字释放p分配的内存地址，但仍然可以为内存地址分配23的值；这是 p 在“int * p = new int(33)”之后指向的堆上的相同地址，还是 p 在使用 delete(p) 之后指向堆栈上的地址？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-17T00:08:14.723

[它仍然指向相同的地址](http://liveworkspace.org/code/d40f790188c3a8c7001760c0da89ede9)（您可以通过打印地址来判断）。您有时会看到人们在释放内存后分配`NULL`或`nullptr`或`0`指针，以确保他们不会尝试取消引用已释放的内存，因为它没有为他们分配 null。这允许他们拥有如下代码：

```
if (p != nullptr)
    //do something with p, it hasn't been freed and set to nullptr 
```

如果它在被释放时没有设置为 null，这很难做到，但请注意，智能指针提供了一种更安全、更一致的替代方案。

您获得正确输出的原因是**undefined behavior**。它可能会崩溃，它可能会爆炸，或者它可以工作。我猜它选择了工作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-17T00:09:13.517

删除`p`向管理内存（操作系统）的人发出信号，表明底层空间现在可以自由地由其他人重新分配以供自己使用。`p`但是，仍然指向相同的内存位置，并且可以取消引用以获得该内存中内容的值——请注意，由于该内存现在可能被其他人使用，因此底层位可能与以前不同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T00:12:35.147

是的，它仍然指向堆，但是那个内存位置并不稳定。操作系统可以随时回收它，因此不能保证该内存位置的值就是您设置的值。

此外，据我所知，所有动态内存分配都发生在堆上，而不是堆栈上。堆栈是为参数和局部变量保留的。

# wpf - 添加 System.xmal 后 WPF avalon 向导缺少向导控件

> ID：12925258
> 
> 赞同：1
> 
> 时间：2012-10-17T00:05:14.897
> 
> 标签：wpf, controls, wizard

我尝试了用于 WPF 的 Avalong Wizard 控件，并且遇到以下问题，你们能帮我找出问题所在吗？

1.  根据教程添加了 Avalon 参考并对窗口的 xmal 进行了一些更改，然后出现了向导。使用控制或右键选项，我可以更改页面、添加或删除页面。

2.  我为每个页面添加了几个页面和控件。

3.  然后，当我尝试重建项目时，我收到以下消息

# 错误

## 错误 1

'System.Windows.Markup.IQueryAmbient' 类型在未引用的程序集中定义。您必须添加对程序集“System.Xaml，Version=4.0.0.0，Culture=neutral，PublicKeyToken=b77a5c561934e089”的引用。D:\SkyDrive\Dev Zone\Ms.NET\Projects\SDF_Export\SDF_Export\Window1.xaml.cs

## 错误2

在命名空间“System.Windows.Markup”中找不到类型名称“IComponentConnector”。此类型已转发到程序集“System.Xaml，Version=4.0.0.0，Culture=neutral，PublicKeyToken=b77a5c561934e089”考虑添加对该程序集的引用。D:\SkyDrive\Dev Zone\Ms.NET\Projects\SDF_Export\SDF_Export\obj\Debug\Window1.g.cs

1.  然后添加了参考 System.Xaml - Rebuild successfully

2.  测试了项目在我可以切换页面的应用程序中一切正常

# 问题

当我回来对项目向导进行更多更改时，控件丢失了。现在我无法使用向导控件或右键单击选项更改、添加、删除页面。

我已将项目附在此处。 [项目文件](http://www30.zippyshare.com/v/37238907/file.html)

# macos - 重新启动 Mac OS 安全

> ID：12925259
> 
> 赞同：6
> 
> 时间：2012-10-17T00:05:23.327
> 
> 标签：macos, security, service, restart

目前，MacOS 存在一个错误，即在 Keychain.app 中解锁智能卡后，系统偏好设置中的挂锁图标会冻结。您不能再通过“点击解锁”挂锁来提升系统偏好设置中的管理员权限。

在内部，我们发现重新启动`securityd`可以解决“冻结”挂锁，但这次重新启动会给 OS X 带来很多问题。

这就是我们所说的冻结（见红色圆圈）：

![挂锁图标](../Images/733562a2923e96ed0a8993815f1e15f3.png)

以下是我们停止和开始安全的方式。

```
sudo launchctl unload -w /System/Library/LaunchDaemons/com.apple.securityd.plist
sudo launchctl load -w /System/Library/LaunchDaemons/com.apple.securityd.plist 
```

完成后，挂锁再次发挥作用。但是，我们在重启后发现了以下问题：

1.  用户无法再从屏幕保护程序中唤醒 - 对于任何唤醒事件、键盘或鼠标移动，用户名/密码对话框都不会出现，从而导致机器需要重新启动或强制登录窗口
2.  您无法卸载任何共享或 CD/DVD - 由于此安全重启，任何已安装的共享都将不再卸载
3.  报告了其他一些小问题（我没有遇到过），您可以在此 Apple 社区线程中阅读它们：

> [https://discussions.apple.com/thread/3248969?start=60&tstart=5](https://discussions.apple.com/thread/3248969?start=60&tstart=5)

Apple 似乎完全有可能不希望重新启动 securityd，但是，我们发现这是唯一可以将挂锁重置为功能状态的解决方案。我们已经尝试重新启动`pcdcd`，但这并没有帮助和其他技巧来代替重新启动`securityd`。

**我们**正在为`securityd`.

# android - 9 补丁缩小问题

> ID：12925262
> 
> 赞同：1
> 
> 时间：2012-10-17T00:05:42.177
> 
> 标签：android, background, nine-patch

我遇到了 9patch 图像的问题。布局设置为 50dp，背景为 9patch，但在小屏幕上加载时布局大于 50dp。

但是，我有另一个具有相同 9patch 背景（menuBtn）的布局，并且没有扩展，所以我不确定是什么导致 9patch 在这个布局上行为不端。

**不锈钢：**
![在此处输入图像描述](../Images/d5bbcec942e6a466f6a83fa6dadf5f17.png)

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="50dp"
    android:padding="0dp"
    android:background="@drawable/actionbar">
    <RelativeLayout
        android:id="@+id/menuBtn"
        android:layout_width="50dp"
        android:layout_height="50dp"
        android:background="@drawable/actionbar"
        android:clickable="true">
        <ImageView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerHorizontal="true"
            android:layout_centerVertical="true"
            android:src="@drawable/actionbar_menu"/>
    </RelativeLayout>
    <ImageView
        android:id="@+id/div1"
        android:layout_width="1px"
        android:layout_height="50dp"
        android:layout_toRightOf="@id/menuBtn"
        android:src="@drawable/actionbar_divider"/>
</RelativeLayout> 
```

**9补丁图片：**
![在此处输入图像描述](../Images/a2adcec17ee2edd99fca7f628dd36813.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T14:46:31.017

想通了，这是一个奇怪的错误？无论如何，9patch 在小屏幕尺寸上高于 50dp，因此将基本背景设置为操作栏，它不会缩放。

但是，如果我在主 RelativeLayout 中嵌套另一个 RelativeLayout 并将该背景设置为操作栏，那么它可以很好地缩放。不知道为什么原来的 RelativeLayout 没有。

**例子：**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="50dp"
    android:padding="0dp">
    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="50dp"
        android:padding="0dp"
        android:background="@drawable/actionbar">
    </RelativeLayout>
</RelativeLayout> 
```

这段代码有效，所以是的......

# apache-pig - Pig 将三元组转换为列

> ID：12925263
> 
> 赞同：1
> 
> 时间：2012-10-17T00:05:49.590
> 
> 标签：apache-pig

我有以下数据结构（以三元组存储）

```
id1 type1 data1
id1 type2 data2
id2 type1 data3
id2 type2 data4 
```

我想运行它以为猪得到一张这样的桌子：

```
 type1,type1
id1,data1,data2
id2,data3,data4 
```

我只能认为它通过一些过滤器和连接来解决。如果有人可以建议我一个更有效的解决方案，我将不胜感激。

非常感谢。

# javascript - jQuery Live 遍历 parent() 选择器

> ID：12925265
> 
> 赞同：0
> 
> 时间：2012-10-17T00:06:31.960
> 
> 标签：javascript, jquery

```
$(".hovertip").parent().live('hover', function() {
  ... 
```

上面的代码似乎没有注册。

这似乎也不起作用：

```
$(".hovertip").parent().live({
  mouseenter:
    function() {
    ... 
```

.live、.delegate、.bind 或 .on 使用 jQuery 选择器和带有 .hover() 或 mouseenter: 和 mouseleave: 的 .parent() 选择器的任何示例？

* * *

更新：我创建了一个单独的问题来解决这个问题提出的动态 DOM 问题： [带有 .parent() 和动态选择器的 jQuery .on()](https://stackoverflow.com/questions/12948251/jquery-on-with-a-parent-and-dynamic-selector)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T00:17:08.903

尝试：

```
$(".hovertip").parent().on('hover', function() {
    alert('yay');
}); 
```

**注意：** `.on`在 jQuery 1.8 中引入。

**工作演示** [http://jsfiddle.net/pRB8n/将](http://jsfiddle.net/pRB8n/) *鼠标悬停在测试测试上*- 在演示中

如果你真的想使用`.delegate`，请试试这个：http: [//jsfiddle.net/TURBX/2/](http://jsfiddle.net/TURBX/2/) - [http://api.jquery.com/delegate/](http://api.jquery.com/delegate/)

> *委托*
> 根据一组特定的根元素，将处理程序附加到现在或将来与选择器匹配的所有元素的一个或多个事件。

希望休息满足需求`:)`

PS -`.live`已弃用：如果您愿意，可以进一步了解 - 我在这里的旧帖子：:) [jQuery live 方法有什么问题？](https://stackoverflow.com/questions/11115864/whats-wrong-with-the-jquery-live-method/11115926#11115926)

在您将看到的类别下：http: [//api.jquery.com/live/](http://api.jquery.com/live/) “已弃用”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T00:21:21.100

我认为您正在寻找的东西实际上是这样的：

```
$(document).on('mouseover', '.hovertip', function() {
  // handle your mouseover changes, here
});

$(document).on('mouseout', '.hovertip', function() {
  // handle your mouseout changes, here
}); 
```

.live、.bind 都已弃用，AFAIK，这意味着它们将来会消失，您可能不想依赖它们的持续支持。

用更接近 .hovertip 元素但在 DOM 嵌套中高于它们的选择器替换也会好得多`$(document)`，因此它们可以响应您的事件，但不会强制 jQuery 监视整个元素上的每个事件文档。我只是将文档放在那里作为示例，因为我不知道您的结构的其余部分是什么样的。

[http://jsfiddle.net/mori57/qa7py/](http://jsfiddle.net/mori57/qa7py/)

考虑到这一点，我认为值得指出的是，将东西扔给 .parent() 可能并不总是按您期望的方式工作，尤其是在您修改 DOM 时。我认为设置更高级别的事件处理程序要安全得多。

如果您必须使用 .parent() 之类的东西，我总是使用 .closest() 找到更准确的结果，并且给它一个选择器也有助于解析引擎缩小搜索范围。您不希望一个父级一次触发 /all/ .hovertips 的悬停状态，这在某些情况下可能会发生。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T00:22:27.937

我会在[Tats_innit 的帖子](https://stackoverflow.com/a/12925374/423235)中添加评论，但我不能。

根据[live 上的文档](http://api.jquery.com/live/)，

> 不支持链接方法。例如， $("a").find(".offsite, .external").live( ... ); 无效且无法按预期工作。

这就是 .parent() 不起作用的原因。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-17T00:24:35.243

## 绑定到父级

事件委托（由已弃用的`live`and处理`.delegate`，现在由`.on`/处理`.one`）只会向下移动。您不能像您在这里似乎想做的那样进行向上的事件委托。

也就是说，如果父级`".hovertip"`不存在，那么显然`".hovertip"`不存在，所以你实际上没有任何约束力。

如果您的目标是将事件绑定到`".hovertip"`它出现时的父级，那么您就是 SOL，因为委派只会向下移动（到后代）。

`.hovertip`处理该问题的选项是： *当它附加到 DOM 时绑定到父级。`.hovertip`*提前知道父级的选择器并立即绑定到它，也许通过委托。

## 委托给孩子

`.hovertip`如果您的目标是在悬停时触发事件，但`.hovertip`可能不在 DOM 中且其父级未知，则必须使用如下方法：

```
$("known parent selector of .hovertip").on('hover', '.hovertip', function () { 
```

“.hovertip 的已知父选择器”必须是您提前知道的元素。如果您不知道，则必须使用`document`，但我建议您尝试尽可能接近。您只能在绑定时存在于 DOM 中的元素上使用它。

# javascript - 用 d3 绘制热图

> ID：12925266
> 
> 赞同：13
> 
> 时间：2012-10-17T00:06:41.210
> 
> 标签：javascript, d3.js, heatmap

我正在尝试使用 csv 中的数据使用 d3 绘制热图：这就是我到目前为止所拥有的

给定一个 csv 文件：

```
row,col,score
0,0,0.5
0,1,0.7
1,0,0.2
1,1,0.4 
```

我有一个 svg 和代码如下：

```
<svg id="heatmap-canvas" style="height:200px"></svg>

<script>
d3.csv("sgadata.csv", function(data) {
    data.forEach(function(d) { 
    d.score = +d.score;
    d.row = +d.row;
d.col = +d.col;
});
//height of each row in the heatmap
//width of each column in the heatmap
var h = gridSize;
var w = gridSize;
var rectPadding = 60;

$('#heatmap-canvas').empty();

var mySVG = d3.select("#heatmap-canvas")
.style('top',0)
.style('left',0);

var colorScale = d3.scale.linear()
.domain([-1, 0, 1])
.range([colorLow, colorMed, colorHigh]);

rowNest = d3.nest()
.key(function(d) { return d.row; })
.key(function(d) { return d.col; });

dataByRows = rowNest.entries(data);
mySVG.forEach(function(){
var heatmapRow = mySVG.selectAll(".heatmap")
    .data(dataByRows, function(d) { return d.key; })
    .enter().append("g");

    //For each row, generate rects based on columns - this is where I get stuck
    heatmapRow.forEach(function(){
    var heatmapRects = heatmapRow
        .selectAll(".rect")
        .data(function(d) {return d.score;})
        .enter().append("svg:rect")
                    .attr('width',w)
        .attr('height',h)
        .attr('x', function(d) {return (d.row * w) + rectPadding;})
        .attr('y', function(d) {return (d.col * h) + rectPadding;})
        .style('fill',function(d) {
            if(d.score == NaN){return colorNA;}
            return colorScale(d.score);
                 })

})
</script> 
```

我的问题是嵌套。我的嵌套基于 2 个键，首先是行（用于生成行），然后对于每一行，列有多个嵌套键，每个键都包含我的分数。我不确定如何继续，即遍历列并添加带有颜色的矩形

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-17T00:26:44.320

虽然您可以使用 a `subselect`（参见[d3.js 构建矩形网格](https://stackoverflow.com/questions/10457170/d3-js-building-a-grid-of-rectangles)）来处理嵌套数据，`d3`但在这种情况下并不真正需要。[我在http://jsfiddle.net/QWLkR/2/](http://jsfiddle.net/QWLkR/2/)上使用您的数据整理了一个示例。这是关键部分：

```
var heatMap = svg.selectAll(".heatmap")
    .data(data, function(d) { return d.col + ':' + d.row; })
  .enter().append("svg:rect")
    .attr("x", function(d) { return d.row * w; })
    .attr("y", function(d) { return d.col * h; })
    .attr("width", function(d) { return w; })
    .attr("height", function(d) { return h; })
    .style("fill", function(d) { return colorScale(d.score); }); 
```

基本上，您可以使用`row`and`col`来计算热图中正方形的正确位置。

# java - 线程执行器 - 初学者

> ID：12925267
> 
> 赞同：2
> 
> 时间：2012-10-17T00:06:43.857
> 
> 标签：java, multithreading, executorservice

我有两节课。在课堂`A`上，我有`run()`永远循环的方法，而在课堂`B`上，我有线程池。

我的问题是，从 Class`B`中，如何控制和停止`run()`class 中的线程执行方法`A`，我尝试了 forceshutdown `threadExecutor.shutdownNow()`，但它不起作用。循环似乎永远持续下去。

这是示例代码：

* * *

```
public class A implements Runnable {
    public void run() {
        while (true) {
            System.out.println("Hi");
        }
    }
} 
```

* * *

```
public class B {
    public static void main(String[] args) {
        int noOfThreads = 1;
        A ThreadTaskOne = new A();
        System.out.println("Threads are being started from Class B");
        ExecutorService threadExecutor = Executors.newFixedThreadPool(noOfThreads);
        threadExecutor.execute(ThreadTaskOne);
        threadExecutor.shutdownNow();
        System.out.println("B Ends, no of threads that are alive : " + Thread.activeCount());
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T00:20:22.820

正如@MadProgammer 所说，您的“无限”循环需要注意Thread.isInterrupted。例如（非常示意图）

```
public void run() {

   while (!Thread.isInterrupted()) {
      doSomethinginTheLoop1();
      blah...blah...blah
      // if the loop is very long you might want to check isInterrupted 
      // multiple times for quicker termination response
      doSomethingInTheLoop2();
   }

   // now, here's a decision of what you do
   // do you throw an InterruptedException or trust others to check interrupted flag.
   // read Java COncurrency in Practice or similar...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T00:27:43.610

上的文件[`ExecutorService#shutdownNow()`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html#shutdownNow%28%29)说 -

> 除了尽最大努力停止处理正在执行的任务之外，没有任何保证。例如，典型的实现将通过 Thread.interrupt() 取消，因此任何未能响应中断的任务可能永远不会终止。

而且你的线程似乎并不关心它是否被中断。

所以检查是否被中断

```
while (Thread.currentThread().isInterrupted()) 
```

而不仅仅是做

```
while (true) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T02:28:55.103

可能下面对你有用。

```
public static class A implements Runnable {
    public void run() {
        while (!Thread.currentThread().isInterrupted()) {
            System.out.println("Hi");
        }
    }
} 
```

# jquery-ui - datetimepicker 和 Backbone.View 交互

> ID：12925270
> 
> 赞同：0
> 
> 时间：2012-10-17T00:06:52.983
> 
> 标签：jquery-ui, backbone.js

这是代码：

```
var MyModel = Backbone.Model.extend({
    defaults: {std:"",
               pod:""
              }
});

var MyView = Backbone.View.extend({
    tagName:'ul',
    events: {
    'change input' : 'changed',  // When input changes, call changed.
    'hover .std'   : 'timepick', // 
    'mouseout .std': 'doesntwork'
    },
    template:_.template($('#mytemplate').html()),

    initialize: function() {
        this.model.bind('change:pod',this.render,this); // When pod changes, re-render
    },
    timepick: function(e) {
        $('.std').each(function(){
            $.datepicker.setDefaults({dateFormat:'mm-dd'});
            $(this).datetimepicker({timeFormat:'hh:mm',ampm:false});
        });
    },
    doesntwork: function() {
        // Would this.model.set here but mouseout happens when you select date/time values with mouse
    },
    render: function() {
        $(this.el).html(this.template(this.model.toJSON()));
        return this;
    },
    changed: function(e) {
        var value = $(e.currentTarget).val();       // Get Change value
        var cls = $(e.currentTarget).attr('class'); //Get Class of changed input
        var obj = {}; 
        obj[cls] = value;                       // The model variables match class names
        this.model.set(obj);                        // this.model.set({'std':value})
    }
}); 
```

我正在处理的 UI 中有一个 datetimepicker，并且难以将从 datetimepicker 中选择的值分配给 MyModel。

从使用 console.log 输出来看，单击 DTP 时会触发“更改输入”并分配默认值 (MM-DD 00:00)。即使您选择了与默认值不同的日期/时间值，也不会再次触发“更改输入”，除非您单击输入框（第二次），然后分配正确的值。不是很人性化。

所以我的想法是我只在 mouseout 上分配值，这不起作用，因为当您开始选择日期/时间值时会发生 mouseout。我也试过模糊，但也没有用。

我哪里错了？

编辑：这是一个 jsfiddle.net 链接，说明了我的问题[http://jsfiddle.net/9gSUe/1/](http://jsfiddle.net/9gSUe/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T17:58:57.767

看起来你被 jQuery UI 的 CSS 绊倒了。当您将 datepicker 绑定到.`<input>`时，jQuery UI 将向. 然后你这样做：`hasDatepicker``<input>`

```
var cls = $(e.currentTarget).attr('class'); 
```

上`<input>`并`'std hasDatepicker'`进入`cls`。

有太多东西会弄乱，`class`所以你最好使用其他东西来识别你想要更改的属性。`id`如果只有一个，您可以使用`std`：

```
<!-- HTML -->
<input id="std" class="std" ...>

// JavaScript
var cls = e.currentTarget.id; 
```

或`name`属性：

```
<!-- HTML -->
<input name="std" class="std" ...>

// JavaScript
var cls = $(e.currentTarget).attr('name'); 
```

甚至可能是 HTML5 数据属性：

```
<!-- HTML -->
<input class="std" data-attr="std" ...>

// JavaScript
var cls = $(e.currentTarget).data('attr'); 
```

我认为该`name`属性是最自然的：http: [//jsfiddle.net/ambiguous/RRKVJ/](http://jsfiddle.net/ambiguous/RRKVJ/)

还有几个附带问题：

*   您的小提琴包含多个版本的 jQuery，这通常是个坏主意。
*   您不必为 构建对象[`set`](http://backbonejs.org/#Model-set)，您可以说`m.set(attr, value)`只是设置一个属性。
*   您不必`$(this.el)`在您的视图中，较新的 Backbones[`this.$el`](http://backbonejs.org/#View-%24el)已经缓存。
*   `console.log`可以处理多个参数，因此您可以说`console.log('Std: ', attrs.std, ' Pod: ', attrs.pod, ' Poa: ', attrs.poa);`，而不是`console.log('Std: ' + attrs.std + ' Pod: ' + attrs.pod + ' Poa: ' + attrs.poa);`如果您不想`+`在背后对事物进行字符串化。

# graph - 如何可视化任意有向无环图？

> ID：12925272
> 
> 赞同：1
> 
> 时间：2012-10-17T00:07:12.240
> 
> 标签：graph, visualization, directed-acyclic-graphs

我正在寻找一种自动可视化大型 DAG 的算法。它需要很好地扩展到数百甚至数千个节点和连接（不会变得不可读）。连接应尽可能避免相互交叉，尤其应避免与它们未连接的节点交叉。

有没有我可以为此目的调整的标准算法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T00:31:07.837

您可以查看[可扩展的力导向放置算法](http://www2.research.att.com/~yifanhu/SOFTWARE/SFDP/index.html)。Graphviz 实现了这一点，因此如果您想在实现之前预览它，请创建一个 Graphviz 文件并运行`sfdp my_dag.gv`（或者`fdp`可能更容易实现）。

如果这对您不起作用，您可能需要类似[Circos](http://circos.ca/)或[Hive Plots](http://www.hiveplot.net/)的东西。Hive Plots 对于有向图和无向图的数千个节点都非常有效。该算法在主页上进行了高级描述，但也有一篇随附的期刊文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T14:12:33.620

你可以试试**Gephi**一个图形可视化软件。您可以使用不同的文件类型（.gexf、.gdf）来提供它。

由于这是一个开源软件，您可以查看空间化算法。

网址： http: [//gephi.org/](http://gephi.org/)

# c++ - C++ 循环未正确循环

> ID：12925276
> 
> 赞同：3
> 
> 时间：2012-10-17T00:08:12.770
> 
> 标签：c++, loops

我有一个 20 x 20 的数组，可以输出盘子的热度。我需要通过循环重复，直到数组中没有单元格的变化超过 0.1 度（我通过每次迭代刷新值。您将如何监视数组中任何单元格的最大变化以确定何时停止迭代？对现在我已经尝试过了，但下面的输出不正确。

```
#include <iostream>
#include <string>
#include <fstream>

using namespace std;

const int ARRAY_SIZE = 20;
const int NEIGHBORS = 4;

void initialize(double hot_plate[][ARRAY_SIZE]);
bool writeFile(const double HOT_PLATE[][ARRAY_SIZE],
           const string FILE_NAME);

double sum_cell(const double HOT_PLATE[][ARRAY_SIZE],
            const int CELL_X, const int CELL_Y);

int main()
{
double hot_plate[ARRAY_SIZE][ARRAY_SIZE];
double hot_plate_prev[ARRAY_SIZE][ARRAY_SIZE];

initialize(hot_plate);

string file_name = "hot_plate.csv";

//accuracy up to 4 decmials
int runs = 724;
double hot_plate[ARRAY_SIZE][ARRAY_SIZE];
double hot_plate_prev[ARRAY_SIZE][ARRAY_SIZE];

while (true)
{
 // This is your code
 for (int i = 0; i < ARRAY_SIZE; i++)
{
    for (int j = 0; j < ARRAY_SIZE; j++)
    {
        if (i > 0 && i < ARRAY_SIZE - 1 && j > 0 && j < ARRAY_SIZE - 1)
        {
            hot_plate[i][j] = sum_cell(hot_plate, j, i);
        }
    }
}

bool theSame = true;
for (int i = 0; i < ARRAY_SIZE; i++)
{
    for (int j = 0; j < ARRAY_SIZE; j++)
    {
        if (abs(hot_plate[i][j] - hot_plate_prev[i][j]) < 0.1)
        {
            theSame = false;
        }
        hot_plate_prev[i][j] = hot_plate[i][j];
    }
}

if (!theSame) break;
}
}

if (writeFile(hot_plate, file_name))
{
    cout << "File wrote correctly\n";
}
else
{
    cout << "The file did not write!\n";
}

//system("pause");

return 0;
}

double sum_cell(const double HOT_PLATE[][ARRAY_SIZE],
            const int CELL_X, const int CELL_Y)
{
/* This code should never go out of bounds as it's in an if statement
   if (i > 0 && i < ARRAY_SIZE - 1 && j > 0 && j < ARRAY_SIZE - 1)
*/
double cell_num = HOT_PLATE[CELL_X - 1][CELL_Y]; // Top
cell_num += HOT_PLATE[CELL_X][CELL_Y - 1]; // Left
cell_num += HOT_PLATE[CELL_X][CELL_Y + 1]; // Right
cell_num += HOT_PLATE[CELL_X + 1][CELL_Y]; // Bottom

cell_num /= NEIGHBORS;

return cell_num;
}

// setup the Array so all values are defined when starting
void initialize(double hot_plate[][ARRAY_SIZE])
{
for (int i = 0; i < ARRAY_SIZE; i++)
{
    for (int j = 0; j < ARRAY_SIZE; j++)
    {
        if (i == 0 || i == ARRAY_SIZE - 1)
        {
            if (j == 0 || j == ARRAY_SIZE - 1)
            {
                hot_plate[i][j] = 0.0;
            }
            else
            {
                hot_plate[i][j] = 100.0;
            }
        }
        else
        {
            hot_plate[i][j] = 0.0;
        }
    }
}
}

// Write the data to the CSV file
bool writeFile(const double HOT_PLATE[][ARRAY_SIZE],
           const string FILE_NAME)
{
// open the file
ofstream fout(FILE_NAME);
if (fout.fail())
  return false;

for (int i = 0; i < ARRAY_SIZE; i++)
{
   for (int j = 0; j < ARRAY_SIZE; j++)
   {
       fout << HOT_PLATE[i][j];
       if ( j < ARRAY_SIZE - 1)
       {
           fout << ", ";
       }
       else if (i != ARRAY_SIZE - 1)
       {
           fout << endl;
       }
   }
}

// close the input stream from the file.
fout.close();
return true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T00:16:10.437

在`while`循环开始时，您可以设置一个名为`allSmallChanges`to之类的布尔变量`true`。在您的内部`if`声明中，您可以检查更改`hot_plate[i][j]`是否“太大”。如果它太大，则设置`allSmallChanges`为 false。然后，就在`while`循环结束之前，您可以`break`if`allSmallChanges`仍然为真。

如果您不想拥有 724 次迭代的上限，则可以摆脱`runs`变量，并将循环更改为`while(true)`.

注意：在我写完这个答案后，问题中的代码发生了变化。我不确定这个答案是否仍然适用。但是，我也确信这将是问题中代码的最后一次更改。所以，我暂时保留这个答案。

# objective-c - 在 NSScanner 的文本输出中包含最后一个字符

> ID：12925278
> 
> 赞同：1
> 
> 时间：2012-10-17T00:08:19.107
> 
> 标签：objective-c, nsscanner

我正在使用 NSScanner 检测字符串中由 [方括号] 绑定的文本，并将其转换为 HTML 超链接。我希望通过以下方式转换此文本：

```
This [is an] example of the [text] I'm using 
```

应该转换为

```
This <a href = "is an">is an</a> example of the <a href = "text">text</a> I'm using 
```

我已经实现了一个 NSScanner，但为了让它正常工作，我需要提取方括号的第一个和第二个。

这是我的代码的当前状态：

```
NSScanner *theScanner;
NSString *text = nil;
theScanner = [NSScanner scannerWithString:stringWithBrackets];

NSString *stringWithoutBrackets;
while ([theScanner isAtEnd] == NO) {
    [theScanner scanUpToString:@"[" intoString:NULL];
    [theScanner scanUpToString:@"]" intoString:&text];

<BREAK> 
```

在这个断点处，我返回了一个*不*包含右括号的字符串。因此，对于上面显示的示例文本字符串，第一个断点处 NSString *text 的内容是

```
[is an 
```

为了正确操作字符串，我需要同时使用左括号和右括号。

本质上，我的问题是：如何在*一个*字符上推进 NSScanner，并将该字符包含到变量“文本”中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T05:37:08.070

您可以跳过`]`字符`scanString`：

```
if ([theScanner scanString:@"]" intoString:NULL]) {
    text = [text stringByAppendingString:@"]"];
} else {
    // Next character is not ']'
} 
```

只有在没有匹配字符的`else`情况下才会发生这种情况。在这种情况下，包含从字符串到结尾的部分。`]``text``[`

或者，您可以使用`NSRegularExpression`and 例如`matchesInString`返回字符串中与正则表达式匹配的所有范围的数组的方法。

# ios - 如何设置 UICollectionViewDelegateFlowLayout？

> ID：12925280
> 
> 赞同：117
> 
> 时间：2012-10-17T00:08:26.250
> 
> 标签：ios, uicollectionview, flowlayout

UIViewController 维护对 UICollectionView 的引用。控制器应使用 UICollectionViewDelegateFlowLayout 修改内置流布局。

将视图的数据源设置为 self 非常容易：

**我的视图控制器.m**

```
- (void)viewDidLoad
{
    self.collectionView.dataSource = self;
} 
```

但是如何将控制器设置为视图的委托流布局？

```
- (void)viewDidLoad
{
    self.collectionView.dataSource= self;
    // self.collectionView.??? = self; 
} 
```

我试过了：

```
- (void)viewDidLoad
{
    self.collectionView.dataSource= self;
    self.collectionView.collectionViewLayout = self; 
} 
```

但我得到错误：“不兼容的指针类型分配......”。

集合头文件如下所示：

**MyViewController.h**

```
@interface MyViewController : UIViewController <UICollectionViewDataSource, UICollectionViewDelegateFlowLayout> 
```

* * *

## 回答 #1

> 赞同：286
> 
> 时间：2012-10-17T00:38:56.537

只是`self.collectionView.delegate = self;`。请注意，`UICollectionViewDelegateFlowLayout`继承自`UICollectionViewDelegate`.

我承认一开始它让我措手不及。

哦，这只有在`self.collectionView.collectionViewLayout`实际设置为您的流程布局时才有效。（或用 设置`initWithFrame:collectionViewLayout:`）

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-04-06T13:06:28.040

根据先前的答案只是使用示例。这真的不清楚，但我可以展示它是如何工作的：

```
@interface PrettyViewController()<UICollectionViewDelegateFlowLayout, UICollectionViewDataSource>
    //some code
@end

@implementation PrettyViewController

- (void)viewDidLoad {
    [super viewDidLoad];

    self.collectionView.delegate = self;//bingo! right here
}

#pragma mark - UICollectionViewDelegateFlowLayout

- (CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout referenceSizeForFooterInSection:(NSInteger)section {
    return CGSizeMake([[UIScreen mainScreen] bounds].size.width, 20.0);
}

@end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-07-29T10:21:49.940

**macOS Mojave**我的两分钱- Swift

 **（我在这里寻找`NSCollectionView`......我知道问题是关于`UICollectionView`......）

上述所有内容（指定委托也意味着单元格大小）对于 macOS 也是正确的。

*注意*：如果你写：

```
class MyViewController:
    NSCollectionViewDelegate,
    NSCollectionViewDataSource,
    **NSCollectionViewDelegateFlowLayout** 
{ 
```

方法：

```
func collectionView(_ collectionView: NSCollectionView, 
                      layout collectionViewLayout: NSCollectionViewLayout, 
               sizeForItemAt indexPath: IndexPath) -> NSSize 
```

**将**被调用。

如果删除，则不会调用委托方法。（因为班级不遵守协议）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-15T07:23:49.620

如果您想快速使用它，只需使用它

控制器委托中的 UICollectionViewDelegateFlowLayout 或为此扩展控制器，然后添加此

func collectionView(_ collectionView: UICollectionView, layout collectionViewLayout: UICollectionViewLayout, sizeForItemAt indexPath: IndexPath) -> CGSize { return CGSize(width: (collectionView.frame.size.width - 10) / 2, height: (collectionView.frame.size.宽度 - 10) / 2) }**

# geany - Geany IDE 是否有自动关闭花括号插件？

> ID：12925282
> 
> 赞同：13
> 
> 时间：2012-10-17T00:08:30.437
> 
> 标签：geany, curly-brackets, auto-close

Geany 是我能找到的最接近完美 Web 开发 IDE 的东西。但是，我找不到自动关闭大括号*( `{`)*的方法。

例如，键入：

```
function test()
{ 
```

..并且按下`RETURN`应该会导致这种情况发生：

```
function test()
{
    // cursor ends up here (indented by 1 tab)
} 
```

有什么可以让 Geany 做到这一点吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T00:42:35.490

这是 Geany 的原生特性，

转到首选项，然后是完成，在那里您可以选择要自动关闭的选项。

[在此处查看屏幕截图](http://www.geany.org/manual/current/#editor-completions-preferences)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-10-07T11:50:27.570

你做别的东西：如果你愿意，打开[https://plugins.geany.org/autoclose.html](https://plugins.geany.org/autoclose.html)并查看“自动关闭”插件。您可以安装： sudo apt-get install geany-plugins-autoclose 就可以了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-31T21:33:03.797

这不是您问题的完整答案，但可能会有所帮助。

*我的 Geany 不是英文的，我自己翻译菜单的字段。*

Geany 有一个特点：当你输入特殊文本并按下`Tab`时，文本将被另一个文本替换。

默认情况下，它适用于`if`、`else`、`for`、`while`、和。`do``switch``try`

此功能的配置在`[Tools]/[Config files]/[snippets.conf]`.
进行一些更改后，保存文件并单击`[Tools]/[Reload configuration]`。

我在 C++ 部分添加了两行：

```
class=class %cursor%%block%;\n
struct=struct %cursor%%block%;\n 
```

和`block=\s{\n\t%cursor%\n}`

它不会让你按下`{` `Enter`或`{` `Tab`获取

```
{
    //cursor
} 
```

因为`{=anything`被忽略了，我不知道为什么。

你可以做什么？您可以使用 替换一些其他文本`{\n\t%cursor%\n}`，或者定义插入它的键绑定。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-15T08:52:09.670

Geany 可以有用户定义的片段。可以从菜单中打开片段配置文件。

```
Tools ->
        Configuration files ->
                               snippets.conf 
```

转到要添加该功能的语言块。例如：

```
 [C]
  if=if (%cursor%)%block_cursor%
  else=else%block_cursor%
  for=for (i = 0; i < %cursor%; i++)%block_cursor%
  while=while (%cursor%)%block_cursor%
  do=do\n{\n\t%cursor%\n} while (%cursor%)\n%cursor%
  switch=switch (%cursor%)%brace_open%case %cursor%:\n\t\t%cursor%\n\t\tbreak;\n\tdefault:\n\t\t%cursor%\n%brace_close%%cursor% 
```

起初可以认为只需添加此行即可解决问题

```
 {=%\n{\n\t%cursor%\n}% 
```

但是 Geany 不接受当片段是一个非字母字符时。它适用于像这样的任何其他字母字符

```
 b=%\n{\n\t%cursor%\n}% or  bl=%\n{\n\t%cursor%\n}% 
```

但是我不认为这是你想要的。您可以从 geanys 菜单中找到真正的解决方案。

```
 Edit
      ->Preferences
                    ->Editor
                            ->Completions 
```

勾选自动关闭引号和括号，然后单击应用并保存![在此处输入图像描述](../Images/f4bca58caaf0af3e5032e122e1f8aa2c.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-26T01:00:11.857

如果我们将括号放在另一对括号内，则自动关闭不起作用。例如，内支架不会自动关闭。`{{|}`

但是，我们可以使用以下代码段来创建一个块。

```
{={\n\t%cursor%\n} 
```

但是为了使用这个片段，我们首先必须在我们的**wordchars集中包含 '** **{** ' char，方法是更改​​ snippets.conf 文件中的以下行。

 **```
wordchars=_abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789{ 
```**

# objective-c - 如何在 Cocoa for OSX 中显示多个图像？

> ID：12925287
> 
> 赞同：0
> 
> 时间：2012-10-17T00:08:50.690
> 
> 标签：objective-c, macos, cocoa, nsview

我想要实现的目标听起来很简单：带有文本字段、视图和按钮的常规简单窗口。

在该字段中，我放置了数字（例如 32），在我点击按钮后，我的视图应该充满了 32 张图像。因为我对 Cocoa 开发还很陌生，所以我真的不知道如何做到这一点。

到目前为止，我只能硬编码三个 NSView 并一次显示 3 个图像……这并不是我真正想要的。因此，如果有人有任何想法或提示，我将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T06:34:04.457

您可以使用[IKImageBrowserView](https://developer.apple.com/library/mac/#documentation/graphicsimaging/Reference/IKImageBrowserView/IKImageBrowserView_Reference.html)。查看[ImageBrowser 示例代码](https://developer.apple.com/library/mac/#samplecode/ImageBrowser/Introduction/Intro.html#//apple_ref/doc/uid/DTS10003997)。 ![在此处输入图像描述](../Images/f94852b38442ba3dd92c3d6c9bb3c337.png)

# python - 如何测试字符串是否引用文件或目录？用正则表达式？在蟒蛇？

> ID：12925288
> 
> 赞同：3
> 
> 时间：2012-10-17T00:08:51.643
> 
> 标签：python, regex, file-management

所以我正在编写一个带有`os`模块的通用备份应用程序，`pickle`到目前为止我已经尝试了下面的代码来查看某个东西是文件还是目录（基于它的字符串输入而不是它的物理内容）。

```
import os, re

def test(path):
    prog = re.compile("^[-\w,\s]+.[A-Za-z]{3}$")
    result = prog.match(path)
    if os.path.isfile(path) or result:
        print "is file"
    elif os.path.isdir(path):
        print "is directory"
    else: print "I dont know" 
```

**问题**

```
test("C:/treeOfFunFiles/")
is directory
test("/beach.jpg")
I dont know
test("beach.jpg")
I dont know
test("/directory/")
I dont know 
```

**期望的输出**

```
test("C:/treeOfFunFiles/")
is directory
test("/beach.jpg")
is file
test("beach.jpg")
is file
test("/directory/")
is directory 
```

**资源**

*   [用正则表达式测试文件名](https://stackoverflow.com/questions/6768779/test-filename-with-regular-expression)
*   [Python RE 库](http://docs.python.org/py3k/howto/regex.html)
*   [通过正则表达式验证文件类型](https://stackoverflow.com/questions/374930/validating-file-types-by-regular-expression)

我应该使用什么正则表达式来区分可能是 a`file`和可能是 a之间的区别`directory`？还是有其他方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T00:13:57.763

该`os`模块提供了检查路径是文件还是目录的方法。建议将此模块用于正则表达式。

```
>>> import os
>>> print os.path.isfile(r'/Users')
False
>>> print os.path.isdir(r'/Users')
True 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-12-16T10:54:45.440

这可能对某人有帮助，我有完全相同的需求，我使用以下正则表达式来测试输入字符串是目录、文件还是两者都不是：对于通用文件：

```
^(\/+\w{0,}){0,}\.\w{1,}$ 
```

对于通用目录：

```
^(\/+\w{0,}){0,}$ 
```

所以生成的python函数看起来像：

```
import os, re

def check_input(path):
    check_file = re.compile("^(\/+\w{0,}){0,}\.\w{1,}$")
    check_directory = re.compile("^(\/+\w{0,}){0,}$")
    if check_file.match(path):
        print("It is a file.")
    elif check_directory.match(path):
        print("It is a directory")
    else:
        print("It is neither") 
```

例子：

*   check_input("/foo/bar/file.xyz") 打印 -> 是文件
*   check_input("/foo/bar/directory") 打印 -> 是一个目录
*   check_input("Random gibberish") 打印 -> 两者都不是

这层输入的安全性可能会在稍后通过 os.path.isfile() 和 os.path.isdir() 内置函数得到加强，正如 Squig 先生亲切地展示的那样，但我敢打赌这个初步测试可能会为你节省一些微秒并提高您的脚本性能。

PS：在使用这段代码时，我注意到我错过了一个巨大的用例，因为路径实际上包含特殊字符，例如广泛使用的破折号“-”。为了解决这个问题，我更改了 \w{0,} ，它使用 .{0,} 指定仅字母单词的要求，这只是一个随机字符。这更像是一种解决方法而不是解决方案。但这就是我现在所拥有的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-17T00:14:25.990

在字符类中，如果存在并表示为连字符，则`-`需要是第一个/最后一个字符，或者转义，例如`\-`更改`"^[\w-,\s]+\.[A-Za-z]{3}$"`为`"^[-\w,\s]+\.[A-Za-z]{3}$"`。

否则，我认为使用正则表达式来确定看起来像文件名/目录的东西是没有意义的......

*   `/dev/fd0`例如不是文件或目录
*   `~/comm.pipe`可能看起来像一个文件，但它是一个命名管道
*   `~/images/test`是指向名为“~/images/holiday/photo1.jpg”的文件的符号链接

查看`os.path`具有询问操作系统的功能的模块......：

# javascript - 不使用 ActiveXObject 或 php 离线读取本地文件夹中的所有文件

> ID：12925292
> 
> 赞同：0
> 
> 时间：2012-10-17T00:09:39.813
> 
> 标签：javascript, html

我是初学者！我需要离线读取本地文件夹中txt文件中的数据。我知道文件夹路径，但我不知道每个文件的名称。

```
C:\mypath\first.txt
C:\mypath\second.txt
C:\mypath\third.txt
... 
```

现在要读取单个文件，我使用：

```
$.ajax({url:"C:\mypath\first.txt",
success:function(result){

//...code for storing the data in a variable...

}
}); 
```

如何在不知道他们的名字的情况下一次读取多个文件？就像是：

```
$.ajax({url:"C:\mypath\*.txt",
success:function(result){

//...code for storing the data in a variable...

}
}); 
```

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T00:24:12.347

您可以在支持的浏览器中使用文件选择器控件（即`<input type="file" multiple />`）并让用户选择要迭代的文件集。用户输入是获取文件列表的唯一方法——你不能只是通过互联网在用户的文件系统中胡闹。您可以了解用户系统的所有信息都是用户告诉您的（例如，通过`<input type="file" multiple />`）。

即便如此，您也无法通过简单的 Ajax 请求来读取文件。[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)适用于本地文件。如果你在自己的机器上测试它可能会起作用，但是一旦它进入网络，它就会失败。

在没有用户交互的情况下查看客户端文件系统的唯一方法是[`Scripting.FileSystemObject`](http://msdn.microsoft.com/en-us/library/z9ty6h50%28VS.84%29.aspx)在非基于 Internet 的[HTML 应用程序](http://msdn.microsoft.com/en-us/subscriptions/ms536496%28v=vs.85%29.aspx)（`.hta`文件）中的 Windows 上使用 ActiveXControl。因此，由于您不想使用 ActiveXControls，因此用户输入是您唯一的选择。

**编辑：**如果您正在创建 FireFox 附加组件，您可以访问文件系统。有关详细信息，请参阅[mozilla.org](https://developer.mozilla.org/en-US/docs/Code_snippets/File_I_O?redirectlocale=en-US&redirectslug=Code_snippets%252FFile_I%252FO)上的文档。

# java - 使用 switch 语句计算文件中的单词和特定字符

> ID：12925293
> 
> 赞同：0
> 
> 时间：2012-10-17T00:09:41.660
> 
> 标签：java

好的，所以基本上我在这里要做的是读取一个包含单词的文件。其中一些单词在开头和结尾有特殊字符，例如引号、句点、连字符等。我必须计算文件中的所有单词，计算有多少特殊字符，删除它们，然后在没有特殊字符的情况下将每个单词打印在单独的行上。

所以现在我们已经有了目标，我想用下面的代码来解释我的思维过程。所以一开始我在考虑如何使用 switch 语句来删除特定字符，因为我认为你只能在 switch 语句中使用数字，所以我认为使用 ascii 表中的字符的十进制数是最好的方法去。所以我这样做了，它会按原样打印出所有单词。但是，当计算所有特殊字符时，它会完全错误，只计算总数的一小部分。我只是不知道为什么它会这样做，所以任何帮助都将不胜感激！

```
import java.io.File;
import java.io.IOException;
import java.util.Scanner;   

public class FileWords
{
public static void main( String [] args ) throws IOException
{
    Scanner scan = new Scanner(System.in);
    System.out.print("Please enter a file name: ");
    File file = new File(scan.next() );

    Scanner scanFile = new Scanner(file);
    String fileContent;
    int wordNum = 0, quote = 0, dubQuote = 0, semi = 0, colon = 0, period = 0, comma = 0, hyphen = 0, exclamation = 0, dollar = 0,  question = 0, words = 0;

    do
    {
        fileContent = scanFile.next();  
        wordNum = fileContent.length();     

        switch ( (fileContent.charAt(0)) )
        {
            case 34: 
            dubQuote ++;
            fileContent = fileContent.substring( 1 , wordNum + fileContent.indexOf(" ") );
            break;

            case 36: 
            dollar++;
            fileContent = fileContent.substring( 1 , wordNum + fileContent.indexOf(" ") );
            break;

            case 39:
            quote++;
            fileContent = fileContent.substring( 1 , wordNum + fileContent.indexOf(" ") );
            break;

            case 46:    
            period++;
            fileContent = fileContent.substring( 1 , wordNum + fileContent.indexOf(" ") );  
            break;

            default:
            break;  
        }               

        wordNum = fileContent.length();

        switch ( fileContent.charAt(wordNum - 1) )
        {
            case 33: 
            exclamation++;
            words++;
            fileContent = fileContent.substring( 0 , wordNum + fileContent.indexOf(" ") );
            break;

            case 34: 
            dubQuote ++;
            words++;
            fileContent = fileContent.substring( 0 , wordNum + fileContent.indexOf(" ") );
            break;

            case 39: 
            quote++;
            words++;
            fileContent = fileContent.substring( 0 , wordNum + fileContent.indexOf(" ") );
            break;

            case 44: 
            comma++;
            words++;
            fileContent = fileContent.substring( 0 , wordNum + fileContent.indexOf(" ") );
            break;

            case 45: 
            hyphen++;
            words++;
            fileContent = fileContent.substring( 0 , wordNum + fileContent.indexOf(" ") );
            break;

            case 46: 
            period++;
            words++;
            fileContent = fileContent.substring( 0 , wordNum + fileContent.indexOf(" ") );
            break;

            case 58: 
            colon++;
            words++;
            fileContent = fileContent.substring( 0 , wordNum + fileContent.indexOf(" ") );
            break;

            case 59: 
            semi++;
            words++;
            fileContent = fileContent.substring( 0 , wordNum + fileContent.indexOf(" ") );
            break;

            case 63: 
            question++;
            words++;
            fileContent = fileContent.substring( 0 , wordNum + fileContent.indexOf(" ") );
            break;

            default:
            words++;
            break;
        }

        System.out.println(fileContent);

    } // end of do
    while (scanFile.hasNext());

    System.out.println();
    System.out.println("Double Quotes:       " + dubQuote);
    System.out.println("Single Quotes:       " + quote);
    System.out.println("Semi-Colons:         " + semi);
    System.out.println("Colons:              " + colon);
    System.out.println("Periods:             " + period);
    System.out.println("Commas:              " + comma);
    System.out.println("Hyphens:             " + hyphen);
    System.out.println("Exclamation Points:  " + exclamation);
    System.out.println("Question Marks:      " + question);
    System.out.println("Dollar Signs:        " + dollar);
    System.out.println("Words Found:         " + words);

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T00:31:46.590

一个更简单的方法是简单地使用一个数组来遍历每个字符并使用 Character.isLetter() 方法。如果字符是字母，则将其添加到字符串中，如果不是，则检查它是空格还是换行。如果它是空格或换行符，则打印字符串并继续前进，否则跳过该字符，它不是字母或分隔两个单词的东西。这还将检查所有可能的特殊字符，而不仅仅是您当前正在查看的那些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T01:26:59.113

为了给你一个线索，下面的表达式：

```
fileContent.substring(1, wordNum + fileContent.indexOf(" ")) 
```

似乎有问题。考虑当您有一个包含以下内容的文件时会发生什么：

> “一个”

输出是：

```
Double Quotes:       1
Single Quotes:       0
Semi-Colons:         0
Colons:              0
Periods:             0
Commas:              0
Hyphens:             0
Exclamation Points:  0
Question Marks:      0
Dollar Signs:        0
Words Found:         1 
```

因此，报价被错误计算。逻辑错误可以纠正如下：

```
switch ((fileContent.charAt(0))) {                                            
case 34:                                                                      
    dubQuote++;                                                               
    fileContent = fileContent.substring(1, wordNum);                          
    break;                                                                    

case 36:                                                                      
    dollar++;                                                                 
    fileContent = fileContent.substring(1, wordNum);                          
    break;                                                                    

case 39:                                                                      
    quote++;                                                                  
    fileContent = fileContent.substring(1, wordNum);                          
    break;                                                                    

case 46:                                                                      
    period++;                                                                 
    fileContent = fileContent.substring(1, wordNum);                          
    break;                                                                    

default:                                                                      
    break;                                                                    
}                                                                             

wordNum = fileContent.length() - 1;                                           

switch (fileContent.charAt(wordNum)) {                                        
case 33:                                                                      
    exclamation++;                                                            
    words++;                                                                  
    fileContent = fileContent.substring(0, wordNum);                          
    break;                                                                    

case 34:                                                                      
    dubQuote++;                                                               
    words++;                                                                  
    fileContent = fileContent.substring(0, wordNum);                          
    break;                                                                    

case 39:                                                                      
    quote++;                                                                  
    words++;                                                                  
    fileContent = fileContent.substring(0, wordNum);                          
    break;                                                                    

case 44:                                                                      
    comma++;                                                                  
    words++;                                                                  
    fileContent = fileContent.substring(0, wordNum);                          
    break;                                                                    

case 45:                                                                      
    hyphen++;                                                                 
    words++;                                                                  
    fileContent = fileContent.substring(0, wordNum);                          
    break;                                                                    

case 46:                                                                      
    period++;                                                                 
    words++;                                                                  
    fileContent = fileContent.substring(0, wordNum);                          
    break;                                                                    

case 58:                                                                      
    colon++;                                                                  
    words++;                                                                  
    fileContent = fileContent.substring(0, wordNum);                          
    break;                                                                    

case 59:                                                                      
    semi++;                                                                   
    words++;                                                                  
    fileContent = fileContent.substring(0, wordNum);                          
    break;                                                                    

case 63:                                                                      
    question++;                                                               
    words++;                                                                  
    fileContent = fileContent.substring(0, wordNum);                          
    break;                                                                    

default:                                                                      
    words++;                                                                  
    break;                                                                    
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T01:31:52.560

好吧，所以我想通了。问题是在第一个 switch 语句中我为 fileContent 分配了一个不正确的值。我所要做的就是删除 + fileContent.indexOf(" ") 并且我是金色的。

# php - PDO LIKE 查询不返回结果

> ID：12925302
> 
> 赞同：1
> 
> 时间：2012-10-17T00:10:27.233
> 
> 标签：php, mysql, pdo, sql-like

好吧，我已经在这个问题上待了几个小时，而对于我的一生，我无法弄清楚出了什么问题。代码如下：

```
$str = "%" . $_POST['str'] . "%";
$offset = (int) $_POST['offset'];

try {
    $stmt = $dbh->prepare("SELECT * FROM Spells WHERE :col LIKE :str ORDER BY :sort LIMIT 10 OFFSET :offset");
    $stmt->bindParam(":col",$_POST['col']);
    $stmt->bindParam(":str",$str);
    $stmt->bindParam(":offset",$offset, PDO::PARAM_INT);
    $stmt->bindParam(":sort",$_POST['sort']);

    $stmt->execute();
}
catch (PDOException $e) {
    echo "MySQL error: " . $e->getMessage() . "<br/>";
    die();
} 
```

与数据库的连接工作正常，没有发生错误。如果我在`%`搜索字段中输入（将`%%%`在查询中输出），结果将按预期返回。

我在 phpMyAdmin 中尝试了相同的查询，它工作正常。我一直在从不推荐使用的`mysql_*`函数中更新此脚本，这些函数以前运行良好。

先前已弃用的查询示例：

```
$sql = "SELECT * FROM Spells WHERE " . $col . " LIKE '%" . $str . "%' ORDER BY " . $sort . " LIMIT 10 OFFSET " . $offset; 
```

正如我可能已经说过的，我也一直在这个网站上搜索，试图找到一个解决方案；没有任何效果，甚至 MySQL 的`CONCAT('%',:str,'%')`.

我正在测试的服务器正在运行 php 版本 5.3.17。

如果我没有说清楚，我的问题是我在这里做错了什么？对于那些想知道的人（我以为我放了这个，但显然我没有放），没有错误消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T01:58:58.453

问题是您不能使用参数代替[标识符](http://dev.mysql.com/doc/refman/5.0/en/identifiers.html)。这意味着您不能参数化列名或表名。

您的查询在执行时的基本外观是

```
SELECT * FROM Spells WHERE 'some_column_name' LIKE '%something%'... 
```

我会建立一个搜索和排序列名的白名单，并使用它们来构建您的查询。这是一个非常简单的例子

```
$search = array('col1', 'col2', 'col3');
$defaultSearch = 'col1';

$sort = array('col1', 'col2');
$defaultSort = 'col1';

$col = in_array($_POST['col'], $search) ? $_POST['col'] : $defaultSearch;
$sort = in_array($_POST['sort'], $sort) ? $_POST['sort'] : $defaultSort;

$sql = sprintf('SELECT * FROM Spell WHERE %s LIKE :str ORDER BY %s LIMIT 10 OFFSET :offset',
    $col, $sort);

$stmt = $dbh->prepare($sql);
// bind :str and :offset, and so on 
```

# mysql - 想计算两个日期之间的工作日数

> ID：12925305
> 
> 赞同：1
> 
> 时间：2012-10-17T00:10:38.480
> 
> 标签：mysql, datetime

我有一个开始和结束日期。

我想计算这两个日期之间的工作日数。

然后在一个日期表中，我想以类似的方式计算那些只选择周末。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T00:40:28.220

一种方法是有一个具体的日期/日期表。但是用于构建此物化表的相同方法可以直接在查询中使用。我展示了几个 [weekday] 计算，但您可以使用相同的方法来查询周末（周末值是 5 和 6）：

直接单查询示例：

```
SELECT day
     , WEEKDAY(day) AS wkday
  FROM (
SELECT FROM_DAYS(d.day1+v1.result) AS day
  FROM (SELECT TO_DAYS(DATE('2000-01-01')) AS day1
             , TO_DAYS(DATE('2021-01-01')) AS day2
     ) AS d
  JOIN (
      SELECT v1.num+v2.num+v3.num+v4.num AS result
        FROM (
                 SELECT 1 AS num UNION SELECT 2 UNION SELECT 3 UNION SELECT 4 UNION SELECT 5
           UNION SELECT 6 UNION SELECT 7 UNION SELECT 8 UNION SELECT 9 UNION SELECT 0
           ) AS v1
        JOIN (
                 SELECT 10 AS num UNION SELECT 20 UNION SELECT 30 UNION SELECT 40 UNION SELECT 50
           UNION SELECT 60 UNION SELECT 70 UNION SELECT 80 UNION SELECT 90 UNION SELECT 00
           ) AS v2
        JOIN (
                 SELECT 100 AS num UNION SELECT 200 UNION SELECT 300 UNION SELECT 400 UNION SELECT 500
           UNION SELECT 600 UNION SELECT 700 UNION SELECT 800 UNION SELECT 900 UNION SELECT 000
           ) AS v3
        JOIN (
                 SELECT 1000 AS num UNION SELECT 2000 UNION SELECT 3000 UNION SELECT 4000 UNION SELECT 5000
           UNION SELECT 6000 UNION SELECT 7000 UNION SELECT 8000 UNION SELECT 9000 UNION SELECT 0000
           ) AS v4
     ) v1
 WHERE v1.result < (d.day2-d.day1)
     ) AS days
 WHERE WEEKDAY(day) < 5
 LIMIT 10
;

USE test;

DROP TABLE IF EXISTS days;

CREATE TABLE days (
   day   date PRIMARY KEY
) ENGINE = InnoDB;

INSERT INTO days
SELECT FROM_DAYS(d.day1+v1.result)
  FROM (SELECT TO_DAYS(DATE('2000-01-01')) AS day1
             , TO_DAYS(DATE('2021-01-01')) AS day2
     ) AS d
  JOIN (
      SELECT v1.num+v2.num+v3.num+v4.num AS result
        FROM (
                 SELECT 1 AS num UNION SELECT 2 UNION SELECT 3 UNION SELECT 4 UNION SELECT 5
           UNION SELECT 6 UNION SELECT 7 UNION SELECT 8 UNION SELECT 9 UNION SELECT 0
           ) AS v1
        JOIN (
                 SELECT 10 AS num UNION SELECT 20 UNION SELECT 30 UNION SELECT 40 UNION SELECT 50
           UNION SELECT 60 UNION SELECT 70 UNION SELECT 80 UNION SELECT 90 UNION SELECT 00
           ) AS v2
        JOIN (
                 SELECT 100 AS num UNION SELECT 200 UNION SELECT 300 UNION SELECT 400 UNION SELECT 500
           UNION SELECT 600 UNION SELECT 700 UNION SELECT 800 UNION SELECT 900 UNION SELECT 000
           ) AS v3
        JOIN (
                 SELECT 1000 AS num UNION SELECT 2000 UNION SELECT 3000 UNION SELECT 4000 UNION SELECT 5000
           UNION SELECT 6000 UNION SELECT 7000 UNION SELECT 8000 UNION SELECT 9000 UNION SELECT 0000
           ) AS v4
     ) v1
 WHERE v1.result < (d.day2-d.day1)
;

SELECT *
  FROM days
 ORDER BY day
 LIMIT 10
;

SELECT COUNT(*) FROM days;

SELECT MIN(day), MAX(day) FROM days;

SELECT day, WEEKDAY(day) FROM days LIMIT 6;

SELECT day, WEEKDAY(day) AS wkday FROM days WHERE WEEKDAY(day) < 5 LIMIT 6;

SELECT COUNT(*), MIN(day), MAX(day) FROM days WHERE WEEKDAY(day) < 5; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-16T15:08:53.277

这是一个使用 MySql 查找 2 个日期内的工作日数的简单查询：

```
set @d1='2013-09-25';
set @d2='2013-10-13';

select floor(datediff( @d2, @d1 ) / 7)*5 +
(case  when if(weekday(@d2)>=5,4,weekday(@d2))>=if(weekday(@d1)>=5,4,weekday(@d1)) 
then if(weekday(@d2)>=5,4,weekday(@d2))-if(weekday(@d1)>=5,4,weekday(@d1)) 
else 5+if(weekday(@d2)>=5,4,weekday(@d2))-if(weekday(@d1)>=5,4,weekday(@d1)) end) weekdays; 
```

用 PHP 编写的相同算法：

```
function getWeekDays($d1,$d2){
$d1Array=preg_split('/-/',$d1);
$d2Array=preg_split('/-/',$d2);
$d1w=date('w',mktime(0,0,0,$d1Array[1],$d1Array[2],$d1Array[0]));
$d1w=in_array($d1w,array(0,6))?4:$d1w-1;
$d2w=date('w',mktime(0,0,0,$d2Array[1],$d2Array[2],$d2Array[0]));
$d2w=in_array($d2w,array(0,6))?4:$d2w-1;

$fullWeekDays=floor(((mktime(0,0,0,$d2Array[1],$d2Array[2],$d2Array[0])-mktime(0,0,0,$d1Array[1],$d1Array[2],$d1Array[0]))/86400)/7)*5;
$offset=$d2w>=$d1w?($d2w-$d1w):(5+$d2w-$d1w);
$weekDays=$fullWeekDays+$offset;

return $weekDays;
} 
```

# django - Django中的联合查询多对多关系

> ID：12925306
> 
> 赞同：0
> 
> 时间：2012-10-17T00:10:43.457
> 
> 标签：django, django-models, many-to-many, django-queryset

我的models.py中有以下课程

```
class Story(models.Model):
    title = models.CharField(max_length=60)
    creator = models.ManyToManyField(User, blank=True) 
```

我正在尝试使用 2 个创建者姓名返回一个 QuerySet。

例如，我将如何过滤具有创建者的故事：用户 1 obj 和用户 2 obj？

我已经阅读了多对多关系文档，但找不到任何东西。我已经达到的最接近的解决方案是......

```
Story.objects.filter(creator__in=[1,2]).distinct() 
```

但它不会对 1 AND 2 进行联合查询，仅对 1 OR 2 进行联合查询。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T01:49:42.387

你需要给我们一个 Q 对象。我会尝试这样的事情：

```
from django.db.models import Q

Story.objects.filter(Q(creator=1) | Q(creator=2)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T00:30:24.330

您可以为此使用 Q 对象：

[https://docs.djangoproject.com/en/1.4/topics/db/queries/#complex-lookups-with-q-objects](https://docs.djangoproject.com/en/1.4/topics/db/queries/#complex-lookups-with-q-objects)

像下面这样的东西应该做你想做的事：

`Story.objects.filter(Q(creator=1), Q(creator=2))`

# javascript - 使用 javascript 删除 div 类

> ID：12925307
> 
> 赞同：-3
> 
> 时间：2012-10-17T00:10:45.163
> 
> 标签：javascript, css, class, html

我想知道是否可以`div class`使用 javascript 删除特定内容的内容？

我希望能够偶尔访问这个 div 的内容，所以我不想完全删除它，但我担心它仍然会占用页面加载时间，即使它应用了 'display: none'在 CSS 中。它是否正确？

是否有任何 JavaScript 可以删除特定“div 类”的页面内容，从而不会减慢页面加载时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T00:17:05.873

使用 JavaScript 删除元素*不会*影响页面的加载时间。这是因为页面被下载，然后代码在页面加载*后移除元素。*它甚至可能使它*变慢*（稍微），因为浏览器必须执行这样的代码才能删除元素。

如果您想缩短页面加载时间，请从文件中删除该元素，然后再次将其上传到您的服务器。

`<div>`然后，您可以通过 AJAX 请求它来动态创建它（如*Dr.Molle*建议的那样），使用库或普通 JS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T00:20:36.627

JavaScript 是在客户端工作的，具体来说，就是对加载的文档生成的 DOM 进行操作，也就是说，如果 JS 可以看到该对象，那么它就已经需要一些时间来加载了。

如果您不想加载它，最好的方法是不要将其发送到客户端，例如，使用 perl、php、asp 等服务器语言。等等

另一种方法是在页面中有一个带有空src的框架，并在加载文档后请求该div，这样，效果是客户端没有在第一位置加载该内容，而是稍后将可用于您的流程。

再见

# php - mysqli 和全局变量

> ID：12925308
> 
> 赞同：0
> 
> 时间：2012-10-17T00:10:53.280
> 
> 标签：php, mysqli

我一直在这几个小时试图找到我所做的小错误，但我找不到它......我所做的只是在函数中调用一个变量作为全局变量，它甚至无法正常工作虽然它与上面的功能配合得很好......

我收到一条错误消息，说 mysqli 为空...

```
include 'data/mysqli_connect.php'; 

function process_login(){

global $mysqli;

$username = $_SESSION['username'];

$sql = "SELECT * FROM auth WHERE user='".mysqli_real_escape_string($mysqli,$username)."'";
$query = mysqli_query($mysqli,$sql);

if(mysqli_num_rows($query)>0){

$sql = "DELETE FROM auth WHERE user='".mysqli_real_escape_string($mysqli,$username)."'";
$query = mysqli_query($mysqli,$sql);

if(!$query){

die(mysqli_error());

}

}

$sql = "INSERT INTO auth (user, session) VALUES ('".mysqli_real_escape_string($mysqli,$username)."', '".$_SESSION['id']."')";
$query = mysqli_query($mysqli,$sql);

if(!$query){

echo "Can not insert info into database!<br />". mysqli_error();

}else{

header("Location:chat.php");

}

}

function logout(){

global $mysqli;

$sql = "DELETE FROM auth WHERE session='".mysqli_real_escape_string($mysqli,$_SESSION['id']). "'";
$query = mysqli_query($mysqli,$sql);

if(!$query){

echo "Can not delete info from database!";

}else{

session_destroy();
header("Location: chat.php");

}

}

function get_username(){

global $mysqli;

$sql = "SELECT * FROM auth WHERE session='".mysqli_real_escape_string($mysqli,$_SESSION['id']). "'";
$query = mysqli_query($mysqli,$sql);
$row = mysqli_fetch_array($query);

if(mysqli_num_rows($query) == "0"){

$username = "Guest";

}else{

$username = $row['user'];

 }

 return $username;

}

function post_message(){

global $mysqli;

$text = addslashes(htmlentities(htmlspecialchars($_REQUEST['text'])));

$sql = "INSERT INTO chat (time, user, text) VALUES ('".date("H:i")."', '".get_username()."', '".$text."')";

$query = mysqli_query($mysqli,$sql);

if(!$query){

die(mysqli_error());

}

}

    mysqli_connect.php
    $mysqli = mysqli_connect(localhost, "info", "info", "info"); 
```

就像我说的那样，它在这个上面的功能上起作用，但在这个上面不起作用，它没有意义......我猜我在某个地方有一个愚蠢的错误，只是不知道在哪里。

顺便说一句，我测试和工作的功能是`process_login()`和`logout()``get_username()`

`get_username()`然后先运行`process_login()`。`post_message()`从一个 jquery 代码运行，当我按下 enter 时调用它可能工作正常，因为当我按下 enter 时我可以看到错误代码。

哦，抱歉代码格式错误，不知道如何在这里修复它。

感谢您提供的任何帮助或建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T01:29:01.570

如何/何时`post_message()`调用？从您编辑的内容中，我找不到任何可以清除`$mysqli`变量的具体内容 - 但要调试它，我们需要更多的程序流程。

或者您可以在代码中创建一个“hack”，并在`post_message()`您声明后再次`global $mysqli;`执行，因为到那时您的数据库连接的引用已经丢失。但是，理想情况下，您需要遵循代码的流程来找出正确修复它的位置 - 您的流程似乎无法完全发布，或者太大而无法在此处完全发布。`include 'data/mysqli_connect.php';``$mysqli`

（评论太长了，所以这个回复是以答案的形式出现的，我很抱歉。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T17:24:00.663

不要将 $mysqli 设为全局变量，而是尝试将其作为附加参数传递给您的函数。我遇到了同样的问题，这就是我解决它的方法。IE...

```
function post_message($mysqli){

$text = addslashes(htmlentities(htmlspecialchars($_REQUEST['text'])));

$sql = "INSERT INTO chat (time, user, text) VALUES ('".date("H:i")."', 
'".get_username()."', '".$text."')";

$query = mysqli_query($mysqli,$sql);

if(!$query){

die(mysqli_error());

} 
```

希望这对你有用。

# java - 如何使用 selenium webdriver 悬停并单击不可见元素？

> ID：12925310
> 
> 赞同：12
> 
> 时间：2012-10-17T00:11:00.197
> 
> 标签：java, selenium-webdriver

我的 HTML 页面上有一个不可见的元素，当鼠标悬停在该元素上时，它变得可见。我要做的是

1.  将鼠标悬停在元素上
2.  单击元素（它将显示 4 个选项）
3.  单击其中一个选项

我正在将 Java API 用于 selenium Web 驱动程序，以下是我一直在尝试的

```
Actions builder = new Actions(driver);
builder.moveToElement(MainMenuBTN).click().build().perform();

subMenuBTN.click(); 
```

1.  MainMenuBTN = 将鼠标悬停在其上时可见的元素
2.  subMenuBTN = 从显示的菜单选项中选择的元素

发生的事情是，MainMenuBTN 上的 click() 正在生成 ElementNotVisible 异常。我试图遵循以避免这种情况，但没有奏效。

```
Actions builder = new Actions(driver);
builder.moveToElement(mainMenuBTN).build().perform();
builder.click();

subMenuBTN.click(); 
```

注意：mainMenuBTN 和 subMenuBTN 是由生成的 WebElements

```
driver.findElement(By.xpath("xpath_string")) 
```

我错过了什么吗？帮助表示赞赏！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-17T11:39:18.563

好吧，在多次回答您的问题并多次更改我的答案之后，我会选择-

问题 - 我从原始代码中得到的 -

您需要将光标移动到 mainMenuBTN（当您将鼠标悬停在其上时，该元素是可见的，而不是可见的元素），然后会显示您需要单击的 subMenuBTN。

根据我的说法，对原始代码的唯一编辑是添加一条语句，在您单击之前将光标移动到您的 subMenuBTN。当我需要单击子菜单项时，这种方式对我来说很好。

```
Actions builder = new Actions(driver);
builder.moveToElement(mainMenuBTN).build().perform();
builder.moveToElement(subMenuBTN).build().perform();
subMenuBTN.click(); 
```

如果是这种情况，请告诉我。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-17T00:17:46.187

使用 javascript 执行器，例如

```
((JavascriptExecutor) webdriver).executeScript("document.getElementById('btn').click();"); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-29T05:18:48.857

在我看来，您的操作生成器有点不对劲。这是我使用的一个例子：

```
public static void mouseClickByLocator( String locator ) {    
  WebElement el = driver.findElement( By.cssSelector( locator ) );    
  Actions builder = new Actions(driver);    
  builder.moveToElement( el ).click( el );    
  builder.perform();    
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-06T14:13:57.437

```
Actions builder = new Actions(driver);
builder.MoveToElement(menu).MoveToElement(submenu).Click().Perform(); 
```

它可以在 Chrome 下运行，但在 FF 中不起作用

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-19T18:59:27.113

你可以试试这个：

1.  通过 xpath 获取您的 WebElement。
2.  悬停元素。
3.  再次通过其 xpath 获取您的 WebElement。
4.  点击它。

这是因为当您将鼠标悬停在元素上时，元素的 id 会发生变化，您应该再次找到它。

```
Actions builder = new Actions(driver);

WebElement mainMenuBTN = getWebEl("xpath_string",5);
builder.moveToElement(mainMenuBTN).perform();
mainMenuBTN = getWebEl("xpath_string",5);
builder.click(mainMenuBTN); 
```

我使用这种方法将受控的显式等待添加到我的元素的实例化中。

```
protected WebElement getWebEl(String xpath, int waitSeconds) {
    wait = new WebDriverWait(driver, waitSeconds);
    return wait.until(ExpectedConditions.visibilityOfElementLocated(By.xpath(xpath)));
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-09-21T12:27:14.157

我的情况是我们有一个行表，如果鼠标悬停在行上，其中一个列（td）应该显示一些 4 个图标，我们应该点击它。

```
Action action=new Action(driver);
action.moveToElement(hoverElt).clickAndHold().build().perform(); 
```

它对我有用。 `moveToELement()`将控件移动到元素

`clickAndHold()`单击并按住悬停的元素，以便我们对可见元素进行操作。

# android - 交流片段/活动

> ID：12925311
> 
> 赞同：1
> 
> 时间：2012-10-17T00:11:15.943
> 
> 标签：android, android-fragments

在我现有的应用程序中，我将两个活动移植到片段中。案例是经典的双面板模式，左边是列表，右边是内容。

文档说我应该避免在片段中操作片段，而是通过主机活动。说我正在对活动使用回调。

我的第一个疑问（也许是平庸的）是：

> 如何避免在托管 2 个片段的活动中复制相同的代码，并在不处于双模式时将相同的代码复制到包装片段的活动中？

我会尽力解释。所以我有：

*   ListFragment 和 ListFragmentActivity
*   ContentFragment 和 ContentFragmentActivity

因为两个片段可以彼此独立存在，那么：

*   主机活动

实现从 ListFragment 调用的侦听器，用于添加/替换 ContentFragment

> 我的问题是：当 ListFragment 由 ListFragmentActivity 托管时，如何避免将 HostActivity 中存在的代码复制到 ListFragmentActivity 中。

我想我错过了一些东西，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T17:19:09.393

摆脱`ListFragmentActivity`. 处理有`HostActivity`一个或两个片段的情况。然后，根据定义，没有代码重复。见：[https ://github.com/commonsguy/cw-omnibus/tree/master/LargeScreen/EU4You](https://github.com/commonsguy/cw-omnibus/tree/master/LargeScreen/EU4You)

# java - indexOf 读取文件时特定位置的特定字符

> ID：12925316
> 
> 赞同：1
> 
> 时间：2012-10-17T00:11:48.723
> 
> 标签：java

读取文件后使用 indexOf，如何仅对单词前后的特定字符编码 indexOf？

例如

“比利”

单引号：2

比利

单引号：0

我的代码

```
if ( 0 <= name.indexOf("'")){
        singleQuotes++; 
```

我的代码将计算所有单引号，当它读取包含一堆单词的文件时，我该如何做到这一点。只在每个单词的开头和结尾获取单引号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T00:40:51.593

如果您不想使用`regex`，那么您可以编写如下内容：

```
 String myString = "quick 'brown' fox jump's over 'the' lazy dog";
    int count = 0;

    String[] words = myString.split(" ");
    for(int i=0; i <words.length; i++){
        if(words[i].charAt(0) == '\'' ){
            count++;
        }
        if(words[i].charAt(words[i].length()-1) == '\'' ){
            count++;
        }
    }
    System.out.println(count); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T00:13:42.657

您可以为此使用正则表达式。您需要的表达式如下所示：

```
(^|\s)'|'(\s|$)

Pattern p = Pattern.compile("(^|\\s)'|'(\\s|$)");
Matcher m = p.matcher("quick 'brown' fox jump's over 'the' lazy dog");
int cnt = 0;
while(m.find()) {
    cnt++;
}
System.out.println(cnt); 
```

这打印出来`4`。

# ruby-on-rails - 当您使用 Heroku 托管您的 RoR 应用程序时，在哪里以及如何访问您的用户上传的文件？

> ID：12925321
> 
> 赞同：0
> 
> 时间：2012-10-17T00:11:58.383
> 
> 标签：ruby-on-rails, file, heroku, upload

我在 Heroku 上部署了一个测试 Ruby on Rails 应用程序，到目前为止，我对来自 Windows Server 2008 VPN 背景感到有些困惑。

在 Windows Server 2008 上，我有我的应用程序文件夹并将使用 IIS 来托管 ASP.Net MVC 应用程序。然后我可以通过代码和`image.Save(path)`文件访问文件夹到光盘。

人们如何处理 Heroku 托管应用程序上的用户上传？

例如，我想让人们在网站上创建一个公寓列表，并上传公寓的图片。这在 Heroku 中是如何工作的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T00:15:31.677

你没有。Heroku 几乎没有提供“应用程序本地”存储，并且文件系统是只读的，除了`/tmp`目录，它不能保证被持久化，并且无论如何它对于每个 dyne 都是本地的。

您必须将文件上传到某些云存储服务（如 S3 或 CloudFiles 等）。通常，您有可以为您管理的 gem（Carrierwave 是一个最近的例子）。

# jquery - 在 pageinit 上切换功能：jQuery Mobile

> ID：12925323
> 
> 赞同：0
> 
> 时间：2012-10-17T00:12:12.700
> 
> 标签：jquery, jquery-mobile

我想使用位于我的 JQM 站点标题中的按钮来切换列表。

此代码仅在页面首次加载时才有效。一旦我加载另一个页面，切换功能将被忽略（尽管如果我输入警报，这似乎有效）。

我已将脚本包含在`data-role="page"`元素中。

```
$(document).bind('pageinit', function (){
    $("#trigger-menu").toggle(function(e) {
          $("ul#menu-list").show();
          //change icon here
          e.preventDefault();
    }, function(e) {
          $("ul#menu-list").hide();
          //change icon here
          e.preventDefault();
    });
}); 
```

'pageinit' 是在这种情况下使用的适当事件吗？我正在使用 JQM 1.2.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T00:22:49.757

您描述的行为是**pageinit**事件的预期行为，该事件每页仅发生一次。

如果您想在每次页面转换时切换列表，在动画完成后，我建议您使用**pageshow**事件：

```
$('div').live('pageshow', function(event, ui) {
    alert('This page was just hidden: '+ ui.prevPage);
}); 
```

有关更多详细信息，请查看[此处](http://jquerymobile.com/demos/1.2.0/docs/api/events.html)的 jQuery 移动事件文档。

# asp.net-mvc - 远程验证 OnBlur 和空字符串

> ID：12925330
> 
> 赞同：6
> 
> 时间：2012-10-17T00:12:47.370
> 
> 标签：asp.net-mvc, asp.net-mvc-4, remote-validation

我有一个启用了远程验证的视图模型。在我看来，我也禁用了 OnKeyUp

```
 $(function() {
        $.validator.setDefaults({ onkeyup: false });
    }) 
```

但是，如果我专注于文本框，并将焦点移到另一个控件，则根本不会触发远程验证。

当我将远程验证配置为 onBlur 和空字符串时，有没有办法可以要求触发？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-07T06:05:39.127

为此，您需要修改`jquery-validate.js`文件。

与远程验证相关的代码：

```
remote: function(value, element, param) {
  if ( this.optional(element) )
    return "dependency-mismatch";

  var previous = this.previousValue(element);
  ....
  // ajax call
  ....
} 
```

第一个`if`块测试元素是否是可选的，除非`[Required]`属性已应用于属性，或者属性是值类型（我假设您的属性是 typeof `string`），否则函数将返回并且生成 ajax 的代码电话永远打不通。请注意，即使您添加了该`[Required]`属性，此代码块也永远不会调用，因为`required:`首先经过验证，您只会收到*“需要 XXX 归档”*消息。

如果您注释掉第一个`if`块，并以空字符串为焦点，则将触发远程验证。

# imap - 获取最新消息的 Imap 搜索命令？

> ID：12925335
> 
> 赞同：1
> 
> 时间：2012-10-17T00:13:01.673
> 
> 标签：imap, gmail-imap

有没有命令可以做到这一点？我可以从某个日期或最近或未见过的消息中获取消息，但我找不到任何方法来获取最新消息并且只能获取最新消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T03:03:33.207

When you connect, the server gives you an EXISTS, telling you how many messages you have. Take that number (say, 62), and fetch that message: `tag FETCH 62 (whatever)`. That's the most recent message that's been added to the mailbox.

# php - JigoShop WordPress 隐藏值提交

> ID：12925337
> 
> 赞同：2
> 
> 时间：2012-10-17T00:13:16.293
> 
> 标签：php, ajax, wordpress, fabricjs, jigoshop

在过去的 2 天里，我一直在努力解决这个问题，但我似乎无法获得一些用于 WordPress 插件自定义的功能。我正在使用 JigoShop 和 WordPress 的最新版本。

***项目 URL：*** [http ://customcasing.ca/product/ipad-case/](http://customcasing.ca/product/ipad-case/)

**当前功能**

我在主页上有 5 个产品 SKU，点击后会转到它们各自的产品订单页面。在这些各自的页面上是一个设计画布，我已经实现了 fabricjs 来处理图像操作。当用户满意时，他们保存画布，然后使用以下示例代码将图像序列化为 JSON 对象：

[使用 JSON 保存/加载画布](https://stackoverflow.com/questions/11272772/fabricjs-how-to-save-canvas-on-server-with-custom-attributes/)

然后将 JSON 对象设置为“添加到购物车”表单中隐藏输入的值。然后他们将能够通过下拉框选择产品颜色变化。

* * *

**现在这里是事情分崩离析的地方**

提交“添加到购物车”表单应该运行多个类并将隐藏的 JSON 对象值发布到聚合的“购物车”对象。这在各种页面上调用，并且键/值对与产品的各种属性相关联。但是，所有其他键/值对正在执行并在随后的订单审查页面上回显……除了我的自定义变量。

**这是目录架构**

*   /wp-内容
    *   ...
    *   /插件
        *   ...
        *   /jigoshop
            *   jigoshop_template_functions.php
            *   jigoshop_actions.php
            *   /类
                *   jigoshop_cart.class.php
    *   /主题
        *   /customcasing

**以下是与上述结构相关的代码块（pastebin）**

jigoshop_template_functions.php
[html 生成器和表单](http://pastebin.com/TdGJDNvp)

jigoshop_actions.php
[表单 $_post 用于隐藏字段](http://pastebin.com/Tb1hbHy4)

classes/jigoshop_cart.class.php
[表单验证和键/值对创建](http://pastebin.com/XXF0HV8P)

* * *

我已经尽可能多地提供了有关我当前状况的信息，如果对 stackoverflow 有任何帮助，那将是以下 Q/A：

[尝试将隐藏的输入值发送到下一页](https://stackoverflow.com/questions/11843494/trying-to-send-a-hidden-input-value-to-next-page)

如果您需要任何其他信息，请随时询问，我会尽力详细说明。此外，如果您需要更广泛的代码，我也可以提供。我真的很感激朝着正确的方向轻推。

# c - copy_from_user() 的实现

> ID：12925339
> 
> 赞同：1
> 
> 时间：2012-10-17T00:13:37.413
> 
> 标签：c, linux-kernel

我只是想知道为什么 copy_from_user(to, from, bytes) 做真正的复制？因为它只是想让内核访问用户空间数据，它可以直接将物理地址映射到内核的地址空间而不移动数据吗？谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T00:20:51.863

`copy_from_user()`通常在编写某些设备驱动程序时使用。请注意，这里没有字节的“映射”，唯一发生的事情是将字节从映射到用户空间的某个虚拟位置复制到内核空间中某个位置的字节。这样做是为了强制分离内核和用户并防止任何安全漏洞——您永远不希望内核开始访问和读取任意用户内存位置，反之亦然。这就是为什么系统调用的参数和结果在实际运行之前被复制到用户/从用户复制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-06T02:59:30.417

copy_from_user() 在开始复制数据之前会进行一些检查。直接从用户空间操作数据从来都不是一个好主意，因为它存在于可能被换出的虚拟地址空间中。

[http://www.ibm.com/developerworks/linux/library/l-kernel-memory-access/](http://www.ibm.com/developerworks/linux/library/l-kernel-memory-access/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-30T11:08:47.790

**“在此之前最好知道为什么使用*copy_from_user()* ”**

因为内核从不允许用户空间应用程序直接访问内核内存，因为如果指向的内存无效或在读取时发生错误，那么仅使用用户空间应用程序就会使内核恐慌。

**“这就是为什么！！！！！！”**

因此，虽然使用*copy_from_user*可能会给用户带来错误，但不会影响内核功能

尽管这是一个额外的努力，但它确保了内核的安全可靠运行

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-22T21:10:51.713

系统调用实现的主要要求之一是检查作为参数传递的用户参数指针的有效性，内核不应该盲目地跟随用户指针，因为用户指针可以在很多方面发挥作用。主要关注点是： 1\. 它应该是来自该进程地址空间的指针——这样它就不能进入其他进程地址空间。2\. 它应该是来自用户空间的指针——它不应该欺骗内核空间指针。3.它不应该绕过内存访问限制。

这就是执行 copy_from_user() 的原因。它处于阻塞状态并且进程休眠，直到页面错误处理程序可以将页面从交换文件带到物理内存。

# c# - 必须始终将第一个视图称为 index.aspx 吗？

> ID：12925341
> 
> 赞同：1
> 
> 时间：2012-10-17T00:13:45.867
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-views

我创建了一个名为 loginController.cs 的控制器，并创建了一个名为 login.aspx 的视图

如何从 loginController.cs 调用该视图？

`ActionResult`总是设置为索引并且为了整洁，我想指定控制器在调用时使用的视图，而不是它总是调用其默认索引？

希望这是有道理的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T00:22:48.260

为了实际回答问题..您可以在默认路线**上方**`Global.asax`添加一条路线：

```
routes.MapRoute(
    "SpecialLoginRoute",
    "login/",
    new { controller = "Login", action = "Login", id = UrlParameter.Optional }
);

routes.MapRoute(
    "Default", // Route name
    "{controller}/{action}/{id}", // URL with parameters
    new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
); 
```

..尽管，如果没有正确考虑您要实现的目标（即..更改 MVC 默认执行的操作），您最终肯定会遇到很多混乱的路线。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T00:38:37.007

您可以自定义 MVC 路由中的几乎所有内容 - 对路由的外观没有特别限制（只有排序很重要），您可以以不同于方法名称的方式命名操作（通过 ActionName 属性），您可以为视图命名任何您想要的（即通过按名称返回特定视图）。

```
return View("login"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T00:47:50.580

您通过 Action 方法从控制器返回视图。

```
public class LoginController:Controller
{
  public ActionResult Index()
  {
    return View();
    //this method will return `~/Views/Login/Index.csthml/aspx` file
  }
  public ActionResult RecoverPassword()
  {
    return View();
    //this method will return `~/Views/Login/RecoverPassword.csthml/aspx` file
  }
} 
```

如果需要返回不同的视图（除了动作方法名，可以显式提及

```
 public ActionResult FakeLogin()
  {
    return View("Login");
    //this method will return `~/Views/Login/Login.csthml/aspx` file
  } 
```

如果要返回另一个控制器文件夹中存在的视图，在 ~/Views 中，可以使用完整路径

```
 public ActionResult FakeLogin2()
  {
    return View("~/Views/Account/Signin");
    //this method will return `~/Views/Account/Signin.csthml/aspx` file
  } 
```

# objective-c - 从 UIWebView 中的超链接启动方法

> ID：12925347
> 
> 赞同：0
> 
> 时间：2012-10-17T00:14:11.547
> 
> 标签：objective-c, uiwebview

我在 UIWebView 对象中使用超链接来解决无法将文本链接嵌入 UIAlertView 的事实。

我已经使用标准的“a href = ...”符号识别并创建了这些超链接。但是，我不希望这些链接启动一个网站 - 我希望他们在我的应用程序中启动一个方法。

如何重定向 URL 单击以使其在我的应用程序中启动方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:05:59.677

实施`UIWebViewDelegate`的[`webView:shouldStartLoadWithRequest:navigationType:`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/UIWebViewDelegate).

查找`UIWebViewNavigationTypeLinkClicked`事件，启动方法并返回`NO`。

# .net - 目标框架列表中缺少 .NET Framework 4.5

> ID：12925349
> 
> 赞同：9
> 
> 时间：2012-10-17T00:14:19.243
> 
> 标签：.net, visual-studio, visual-studio-2012

我刚刚在我的开发笔记本电脑（Windows 7 x64）上购买并安装了 Visual Studio 2012。我创建了一个新项目，并且很惊讶地发现，在创建新项目/应用程序以及现有应用程序的项目属性时，目标框架列表中缺少 .NET Framework 4.5。

有什么想法可以在这里发生吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T13:56:08.703

这篇[文章](http://social.msdn.microsoft.com/Forums/en-US/vssetup/thread/efe91261-c52a-44bd-9fe7-199d86ed9733/)建议卸载、重新启动并重新安装 Visual Studio 2012。

# drag-and-drop - HTML5 ui-controls 从 canvas-1 拾取并拖放到 cnvas-2

> ID：12925355
> 
> 赞同：1
> 
> 时间：2012-10-17T00:15:09.937
> 
> 标签：drag-and-drop, html5-canvas, uicontrolevents

我对基于 Web 的编程非常陌生，并且从本周开始使用 HTML5。我已经通过javascript和使用addflow（Lassange）HTML5控件以编程方式在第一个canvas-1上创建了一堆流程图。现在我在它的一侧有另一个 canvas-2，我希望用户选择任何给定的 UI 控件（来自 canvas-1）并将其拖放到 canvas-2 上。但我无法做到这一点。

我尝试将可拖动属性分配给以编程方式创建的 ui 控件（canvas-1），并使 canvas-1 可拖动等，但我认为这种方法行不通。UI 控件确实被拖动，但仅在 canvas-1 的边界内。现在我如何确保用户能够做到这一点......我在 html-page-behind 的 javascript 编码方法应该是什么？

编辑：熟悉 Lassalle 技术的人——“AddFlow”HTML5 jscript 组件在这里可以提供更多帮助，因为我正在使用该 HTML5 控件创建两个画布并将 UI 控件集作为“托盘”填充到画布-1。但是，如果有人通过一些本机 HTML5 javascripting 或类似方法实现了这一点，那么仍然会回复。

# actionscript-3 - Flash AS3 - 放大和缩小（缩放）时在播放器上居中相机

> ID：12925366
> 
> 赞同：1
> 
> 时间：2012-10-17T00:16:11.653
> 
> 标签：actionscript-3, flash, scale, game-engine

我正在构建一个类似生存恐怖的游戏，并希望制作一个非常好的相机系统来补充机制。部分原因是您将能够蹲下并遮住脸。我想要做的相机工作是放大角色以限制玩家的视野。

我目前拥有的 MC 结构是：

GameMaster > Spawner（这是给玩家和所有敌人的）> Player

我遇到的问题是缩放 GameMaster（这是发生横向滚动和其他全局游戏效果的地方）会导致相机的中心根据玩家与 0,0 的距离而偏移。

[您可以在此视频中清楚地看到问题。红色箭头指向 0,0。](http://youtu.be/84M-jJPKTCQ)

[在这个 stackoverflow 问题](https://stackoverflow.com/questions/7913004/flash-as3-how-to-center-an-object-around-a-point-after-scale)上，答案说要为所有东西制作一个容器，并将容器 0,0 居中在您想要放大的目标上。这对我来说是一个挑战，因为我必须为嵌套 4 个 MC 的对象获取正确的坐标。我也不确定这会对我当前的侧滚动相机做什么。

有没有一种方法可以让我在数学上计算出角色闪避时的偏移量？这似乎是一个可行的选择，因为在您松开蹲伏并且相机缩小之前您无法移动。

如果不是，容器 MC 是一个不错的选择，还是只是其中之一“你必须做你必须做的事”。类型的情况？

[添加] 我还看到了一些关于变换矩阵之类的东西。那是可行的吗？我对它们一无所知，但我认为它们的 CPU 很重，对于整个游戏中普遍存在的机制来说，这不是一个好的选择。

[添加 2] 另外，我想做一个旋转相机效果，它会遇到同样的 0,0 问题。公然显示为玩家和关卡围绕某个远离枢轴点旋转。

如果 Transform Matrix 可以快速且功能性地将 0,0 偏移到玩家位置，那么我就可以完成所有相机效果和更改。我认为这可能是最好的方法。

----接近结论---- [关于晚祷的回答](https://stackoverflow.com/questions/12648161/zoom-to-and-from-point/12649936#12649936)。然后我可以对生成的转换进行补间吗？如果是这样，那么这完全解决了我的整个问题。如果没有，我不知道如何得到我想要的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T17:47:11.383

我认为容器是最干净的解决方案。由于它将以玩家为中心，因此旋转和缩放将正常工作。您提到获取嵌套 MC 的坐标很困难，但是有一个内置函数可以做到这一点：[`localToGlobal()`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html#localToGlobal%28%29)

要获取全局坐标中的玩家位置，只需执行`player.localToGlobal(new Point(0, 0))`. 这应该以全局坐标返回玩家的中心。如果您的主容器不在全局坐标中（例如，因为它嵌套在另一个转换后的 MC 中），您可以使用容器上的相反函数从全局坐标转换为局部坐标：

```
container.globalToLocal(player.localToGlobal(new Point(0, 0))) 
```

现在您只需将容器居中即可。这也可以用来模拟相机的运动。如果您在每一帧更新容器位置，它将给出摄像机跟随播放器的效果。

# recursion - 球拍：识别尾递归？

> ID：12925369
> 
> 赞同：5
> 
> 时间：2012-10-17T00:16:41.067
> 
> 标签：recursion, lisp, scheme, racket, tail-recursion

我在球拍中编写了两个不同的函数来确定数字列表是否在升序：

```
(define (ascending list)
  (if (<= (length list) 1)
      #t
      (and (< (car list) (car (cdr list))) (ascending (cdr list)))))

(define (ascending-tail list)
  (ascending-tail-helper #t list))

(define (ascending-tail-helper prevBool rest)
  (if (<= (length rest) 1)
      prevBool
      (ascending-tail-helper (and prevBool (< (car rest) (car (cdr rest)))) (cdr rest)))) 
```

我最难确定第一次上升是否是尾递归，所以我用我认为是尾递归的方式重写了它。

我回想起来认为第一个不是尾递归的原因是我相信在每个递归级别，该函数将等待“and”语句中的第二个参数返回，然后才能计算布尔表达式。相反，对于升尾助手，我可以在进行递归调用之前评估小于表达式。

这是正确的，还是我让自己比以前更加困惑？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-17T11:49:29.930

DrRacket 可以帮助您确定呼叫是否处于尾部位置。单击“语法检查”按钮。然后将鼠标指针移动到相关表达式的左括号。在您的示例中，我得到了这个：

![在此处输入图像描述](../Images/c6a424aed0f35bf50c53900941b4a1a5.png)

紫色箭头表示表达式处于尾部位置。

从手册：

> 尾部调用：任何（在句法上）相对于其封闭上下文处于尾部位置的子表达式通过从尾部表达式到其周围表达式绘制一个浅紫色箭头来进行注释。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-17T00:25:56.373

你是对的，在第一个版本中递归调用返回到`and`，而在第二个版本中，递归调用是尾调用。

但是，`and`是一个宏，通常使用`if`

```
(define (ascending list)
  (if (<= (length list) 1)
      #t
      (if (< (car list) (car (cdr list)))
          (ascending (cdr list))
           #f))) 
```

这是尾递归。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T00:26:39.983

函数处于**尾部位置**的要求之一是它的返回值可以用作父函数的返回值，而无需修改或检查。也就是说，父函数应该能够在评估完尾部位置语句后立即返回。

**第一次出现时，您的第一个函数会检查升序**的返回值。似乎不会返回**升序**的值，而是从它派生的值。 **但是**，根据 R5RS 规范的相关部分，**and**语句*中*的最终表达式位于尾部位置。（当我清醒时，我知道这一点）

所以你错了。

[http://www.schemers.org/Documents/Standards/R5RS/HTML/r5rs-ZH-6.html#%_sec_3.5](http://www.schemers.org/Documents/Standards/R5RS/HTML/r5rs-Z-H-6.html#%_sec_3.5)

（注意：已编辑以纠正我最初的仓促回答）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-17T18:11:41.593

球拍[关于尾部位置的文档](http://docs.racket-lang.org/reference/eval-model.html#%28part._.Tail_.Position%29)说，检查尾部位置和不在尾部位置的地方是特定表格的文档：

> 尾部位置规范为计算的渐近空间消耗提供了保证。通常，尾部位置的规范与每种句法形式一致，例如[`if`](http://docs.racket-lang.org/reference/if.html#%28form._%28%28quote._~23~25kernel%29._if%29%29).

[Racket's docs on **and**](http://docs.racket-lang.org/reference/if.html#%28form._%28%28lib._racket%2Fprivate%2Fletstx-scheme..rkt%29._and%29%29) say (强调添加)：

> ```
> (and expr ...) 
> ```
> 
> 如果没有提供 expr，则结果为 #t。
> 
> **如果提供了单个 expr，则它位于 tail 位置**，因此 和 expression 的结果是 expr 的结果。
> 
> 否则，将评估第一个 expr。如果它产生#f，and 表达式的结果是#f。**否则，结果与 and 表达式相同，剩余的 expr 相对于原始 and 形式位于尾部位置。**

# ios - 垃圾收集器期间的 MonoTouch SIGSEGV 在 ABPeoplePickerNavigationController 上启动 Dispose

> ID：12925370
> 
> 赞同：2
> 
> 时间：2012-10-17T00:16:59.843
> 
> 标签：ios, xamarin.ios, garbage-collection, dispose

针对 MT 6.0.4 构建。针对 iOS 4。在 iPhone 4S 上进行测试。

我对自己做错了什么感到困惑。在订阅 SelectPerson 事件后，我以模态方式显示 ABPeoplePickerNavigationController。在事件中，我复制了我需要的数据（仅保存对字符串的引用，而不是任何 AdressBook 或 Person 实例），然后关闭模式对话框：

```
private string selectedPersonFirstName;
private string selectedPersonEmail;
private string selectedPersonPhone;

private void SelectContact()
{
    var peoplePicker = new ABPeoplePickerNavigationController();
    peoplePicker.Cancelled += (sender, e) => 
    {
        selectedPersonFirstName = null;
        selectedPersonEmail = null;
        selectedPersonPhone = null;
        peoplePicker.DismissViewController(true, null);
    };
    peoplePicker.SelectPerson += (sender, e) => 
    {
        var selectedName = String.Format("{0} {1}", e.Person.FirstName, e.Person.LastName);
        selectedPersonFirstName = e.Person.FirstName;
        if ( e.Person.GetEmails().Count > 0)
            selectedPersonEmail = e.Person.GetEmails().FirstOrDefault().Value;
        if ( e.Person.GetPhones().Count > 0)
            selectedPersonPhone = e.Person.GetPhones().FirstOrDefault().Value;

        peoplePicker.DismissViewController(true, null);
    };

    PresentViewController(peoplePicker, true, null);
} 
```

稍后，当 GC 启动时，它会崩溃：

```
Stacktrace:

  at MonoTouch.Foundation.NSObject.FinishDispose () [0x0000b] in /Developer/MonoTouch/Source/monotouch/src/Foundation/NSObject.cs:158
  at MonoTouch.Foundation.NSObject/MonoTouch_Disposer.Drain (MonoTouch.Foundation.NSObject) [0x00062] in /Developer/MonoTouch/Source/monotouch/src/Foundation/NSObject.cs:376
  at (wrapper runtime-invoke) object.runtime_invoke_dynamic (intptr,intptr,intptr,intptr) <0xffffffff>
  at MonoTouch.UIKit.UIApplication.Main (string[],string,string) [0x0004c] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UIApplication.cs:38
  at MyApp.iOS.Application.Main (string[]) [0x00000] in /Users/tyson/Code/MyApp/iOS/Main.cs:19
  at (wrapper runtime-invoke) object.runtime_invoke_dynamic (intptr,intptr,intptr,intptr) <0xffffffff>

Native stacktrace:

    0   MyAppName---------------            0x00f574f4 mono_handle_native_sigsegv + 280
    1   MyAppName---------------            0x00f3a2b8 mono_sigsegv_signal_handler + 268
    2   libsystem_c.dylib                   0x31ae97ed _sigtramp + 48
    3   CoreFoundation                      0x3745b2e7 CFRelease + 94
    4   AddressBookUI                       0x373922d1 -[ABGroupWrapper dealloc] + 100
    5   libobjc.A.dylib                     0x35a14175 _objc_rootRelease + 36
    6   AddressBookUI                       0x373a3f57 -[ABModel dealloc] + 146
    7   libobjc.A.dylib                     0x35a14175 _objc_rootRelease + 36
    8   AddressBookUI                       0x373aec43 -[ABAbstractViewController dealloc] + 38
    9   AddressBookUI                       0x373aeb3d -[ABMembersViewController dealloc] + 216
    10  libobjc.A.dylib                     0x35a14175 _objc_rootRelease + 36
    11  CoreFoundation                      0x3745b2e7 CFRelease + 94
    12  CoreFoundation                      0x3747106b -[__NSArrayM dealloc] + 122
    13  libobjc.A.dylib                     0x35a14175 _objc_rootRelease + 36
    14  UIKit                               0x33c891b9 -[UIViewController dealloc] + 496
    15  UIKit                               0x33c88f2f -[UINavigationController dealloc] + 198
    16  AddressBookUI                       0x373adcbd -[ABPeoplePickerNavigationController dealloc] + 376
    17  libobjc.A.dylib                     0x35a14175 _objc_rootRelease + 36
    18  MyAppName---------------            0x001e1ccc wrapper_managed_to_native_MonoTouch_ObjCRuntime_Messaging_void_objc_msgSend_intptr_intptr + 68
    19  MyAppName---------------            0x001ad49c MonoTouch_Foundation_NSObject_MonoTouch_Disposer_Drain_MonoTouch_Foundation_NSObject + 364
    20  MyAppName---------------            0x006997b8 wrapper_runtime_invoke_object_runtime_invoke_dynamic_intptr_intptr_intptr_intptr + 200
    21  MyAppName---------------            0x00f3c6a4 mono_jit_runtime_invoke + 1644
    22  MyAppName---------------            0x00ff5dc0 mono_runtime_invoke + 128
    23  MyAppName---------------            0x00f2c6ec native_to_managed_trampoline_MonoTouch_Foundation_NSObject_MonoTouch_Disposer_Drain + 280
    24  CoreFoundation                      0x374a0eef +[NSObject performSelector:withObject:] + 42
    25  Foundation                          0x37d51747 __NSThreadPerformPerform + 350
    26  CoreFoundation                      0x374e6ad3 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 14
    27  CoreFoundation                      0x374e629f __CFRunLoopDoSources0 + 214
    28  CoreFoundation                      0x374e5045 __CFRunLoopRun + 652
    29  CoreFoundation                      0x374684a5 CFRunLoopRunSpecific + 300
    30  CoreFoundation                      0x3746836d CFRunLoopRunInMode + 104
    31  GraphicsServices                    0x32375439 GSEventRunModal + 136
    32  UIKit                               0x33bece7d UIApplicationMain + 1080
    33  MyAppName---------------            0x001e6ca4 wrapper_managed_to_native_MonoTouch_UIKit_UIApplication_UIApplicationMain_int_string___intptr_intptr + 240
    34  MyAppName---------------            0x00ee0210 MyApp_iOS_Application_Main_string__ + 152
    35  MyAppName---------------            0x006997b8 wrapper_runtime_invoke_object_runtime_invoke_dynamic_intptr_intptr_intptr_intptr + 200
    36  MyAppName---------------            0x00f3c6a4 mono_jit_runtime_invoke + 1644
    37  MyAppName---------------            0x00ff5dc0 mono_runtime_invoke + 128
    38  MyAppName---------------            0x00ffa224 mono_runtime_exec_main + 436
    39  MyAppName---------------            0x00fff770 mono_runtime_run_main + 756
    40  MyAppName---------------            0x00f434a4 mono_jit_exec + 140
    41  MyAppName---------------            0x0105c04c main + 2028
    42  MyAppName---------------            0x0001bd18 start + 40

=================================================================
Got a SIGSEGV while executing native code. This usually indicates
a fatal error in the mono runtime or one of the native libraries 
used by your application.
================================================================= 
```

有没有人见过这样的事情？在这一点上，我准备好解决方法，因为我需要它更可靠地尽快进行演示（尚未提交应用商店）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T00:20:25.493

它看起来像一个错误。某些东西被释放一次太多并崩溃。

*出于演示目的*，您可以通过如下定义来解决它`CFRetain`：

```
[System.Runtime.InteropServices.DllImport ("/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation")]
static extern IntPtr CFRetain (IntPtr obj); 
```

并在 上使用它`_AddressBook`，就像那样

```
peoplePicker.SelectPerson += (sender, e) => {
    CFRetain (peoplePicker._AddressBook);
    var selectedName = String.Format("{0} {1}", e.Person.FirstName, e.Person.LastName);
    ... 
```

这将平衡计数并避免崩溃。

**更新**：错误已满，您可以自己抄送[错误报告](https://bugzilla.xamarin.com/show_bug.cgi?id=7887)以了解何时发布修复。

# c++ - C++ 究竟做了什么新 ( ） 做？

> ID：12925379
> 
> 赞同：2
> 
> 时间：2012-10-17T00:18:00.407
> 
> 标签：c++, pointers, heap-memory, new-operator, stack-memory

在这段代码中：

```
int * p = new int(44); 
```

p在堆上分配，它指向的值为44；但现在我也可以这样做：

```
p[1] = 33; 
```

没有错误。我一直以为

```
int * p = new int(44); 
```

只是另一种说法“P在堆上分配并指向包含44的地址”但显然它使pa指针指向一个int数组？这个新数组的大小是 44 吗？还是这个结果不寻常。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T00:22:23.363

你是对的：P 在堆上分配并指向一个包含 44 的地址。没有分配数组。 `p[1] = 33;`就是他们所说的“未定义行为”。您的程序**可能会**崩溃，但不能保证每次执行此操作时都会崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T00:24:22.067

```
int *p_scalar = new int(5); //allocates an integer, set to 5. 
```

如果您访问 p_scalar[n] (n <> 0) 它可能会崩溃

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T00:31:10.017

在您的示例中，C++ 语言为您提供了指针的下标运算符的默认实现，看起来与此类似：

```
(*Ptr)& operator[](size_t index)
{
   return *(address + index*sizeof(*Ptr));
} 
```

对于任何类型，它总是可以重载和替换。整数也不例外，当你说：

```
int * pointer = alocate_int_array();
pointer[1] = 1; 
```

您正在使用该运算符的编译器增强默认实现。

# c# - 如何对集合中的各种对象使用 DataBindings？

> ID：12925382
> 
> 赞同：1
> 
> 时间：2012-10-17T00:18:50.220
> 
> 标签：c#, data-binding

我有一组具有以下结构的对象：

```
public class Parent
{
    public string Title { get; set; }
    public string Guid { get; set; }
}

public class Child:Parent
{
    public string Description { get; set; }
}

List<Parent> collection ;
collection  = new List<Parent>();

collection.Add(new Parent());
collection.Add(new Parent());
collection.Add(new Child());
collection.Add(new Child());
collection.Add(new Parent()); 
```

所以有些元素来自 Parent 类型，有些来自 Child 类型（我在集合中的对象之间有继承关系）。

我使用了以下绑定：

```
txtTitle.DataBindings.Add("Text", _BindingSource, "Title");
txtGuid.DataBindings.Add("Text", _BindingSource, "Guid");
txtDescription.DataBindings.Add("Text", _BindingSource,"Description"); 
```

前两个绑定显然工作正常。但是我应该怎么做第三个才能正确显示数据呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T03:36:05.207

在他的书“Data Binding with Windows forms 2.0”中，p。125，作者 Brian Noyes 说 BindingSource 中的项目必须是同质的，即相同类型。

看起来您尝试做的事情是不可能的，至少不能使用 BindingSource 组件。

# mysql - mysql - 过滤 IN 语句

> ID：12925385
> 
> 赞同：0
> 
> 时间：2012-10-17T00:19:41.363
> 
> 标签：mysql, sql

我需要细化这个 sql 选择：

```
SELECT ch_num, payment_type, Total FROM transactions WHERE ( ch_num ) 
IN (
SELECT ch_num FROM transactions GROUP BY ch_num HAVING count('ch_num') > 1 
)
ORDER BY `ch_num` 
```

我得到的结果是：

```
ch_num  payment_type    Total 
20001   visa        36.60
20001   visa        36.60
20001   mc          30.60
50019   cash        9.00
50019   mc          18.95
50023   cash        2.70
50023   visa        7.00 
```

但我只需要有'cash' payment_type 的结果行，所以'ch_no' 20001 应该被省略。正确的结果是：

```
ch_num  payment_type    Total 
50019   cash        9.00
50019   mc          18.95
50023   cash        2.70
50023   visa        7.00 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T00:22:50.837

```
SELECT ch_num, payment_type, Total
FROM transactions 
WHERE ch_num IN 
(
       SELECT ch_num 
       FROM transactions 
       GROUP BY ch_no
       HAVING count('ch_num') > 1 
       and sum(payment_type='cash') >= 1
)
ORDER BY `ch_num` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T00:22:45.320

这是一个完整的、经过验证的代码示例，最后附有测试结果。我使用了 Oracle，但 SQL SELECT 的语法应该相同。

```
create table transactions (ch_num int, payment_type varchar2(100), total float);

insert into transactions values(20001,'visa',36.60);
insert into transactions values(20001,'mc',30.60);
insert into transactions values(50019,'cash',9.00);
insert into transactions values(50019,'mc',18.95);
insert into transactions values(50023,'cash',2.70);
insert into transactions values(50023,'visa',7.00);

SELECT ch_num, payment_type, Total FROM transactions a WHERE ( ch_num ) 
IN (
SELECT ch_num FROM transactions  GROUP BY ch_num HAVING count(ch_num) > 1 
)
AND EXISTS
(SELECT  ch_num FROM transactions b where payment_type = 'cash' and a.ch_num = b.ch_num)
ORDER BY ch_num 
```

结果：

```
 CH_NUM  PAYMENT_TYPE    TOTAL
1   50019   cash    9
2   50019   mc  18.95
3   50023   cash    2.7
4   50023   visa    7 
```

# c++ - 为什么这可能是超出范围的异常

> ID：12925386
> 
> 赞同：0
> 
> 时间：2012-10-17T00:19:58.167
> 
> 标签：c++, vector, outofrangeexception

为什么这段代码运行，VC++ 会显示超出范围的异常？

错误消息：向量行：933 表达式：“标准 C++ 库超出范围”& & 0

high 是一个返回迭代器中最高元素的函数。然后我构造了一个数组和一个向量，使用 high 来找到其中的最高元素。

这是迭代器.h：

```
template<class Iterator> Iterator high(Iterator first, Iterator last)
{
    Iterator high = first;
    for(Iterator p = first; p != last; ++p)
        if(*high < *p) high = p;
    return high;
} 
```

这是主要功能：

```
#include <iostream>
#include <vector>
#include "iterator.h"

using namespace std;

double* get_from_jack(int* count)
{
    double* p = new double[5];
    p[0] = 2.3;
    p[1] = 3.1;
    p[2] = 2.1;
    p[3] = 1.2;
    p[4] = 4.3;
    *count = 5;
    return p;
}

vector<double>* get_from_jill()
{
    vector<double> v;
    v.push_back(2.1);
    v.push_back(3.8);
    v.push_back(5.1);
    v.push_back(2.2);
    v.push_back(1.9);
    v.push_back(4.4);
    vector<double>* p = &v;
    return p;
}

void fct()
{
    int jack_count = 0;
    double* jack_data = get_from_jack(&jack_count);
    vector<double>* jill_data = get_from_jill();

    double* jack_high = high(jack_data, jack_data+jack_count);
    vector<double>& v = *jill_data;
    double* jill_high = high( &v[0], &v[0]+v.size() );

    cout << "Jill's high " << *jill_high << "; Jack's high " << *jack_high;

    delete[] jack_data;
    delete jill_data;
    //delete jack_high;
    //delete jill_high;
}

int main()
{
    try{
        fct();
        int n;
        cin >> n;
        return 0;
    }
    catch(exception&e)
    {
        cerr << e.what();
        return 1;
    }
    catch(...)
    {
        return 2;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T00:34:21.800

`get_from_jill()`函数终止后，返回一个指向不再存在的指针的向量。您要么必须像使用数组一样在堆上实例化向量，要么返回它的副本。我更喜欢后者，它会让你的代码更简洁。

# iphone - iPhone 设置图像的大小比例

> ID：12925399
> 
> 赞同：0
> 
> 时间：2012-10-17T00:21:05.923
> 
> 标签：iphone

我正在制作图像大小不同的幻灯片。现在图像被拉伸以适应图像 vue。有没有办法让图像变暗，然后重新调整 imagevue 的大小？或者也许是另一种方式来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T00:28:38.900

您想在 UIImageView(s) 上设置 UIViewContentMode。

像这样：`myImageView.contentMode = UIViewContentModeScaleAspectFit`

查看文档以确定使用哪一个（http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T00:28:06.840

您可以将图像视图设置为`contentMode`，`UIViewContentModeAspectFit`以便调整图像大小但保留其纵横比。

您可以查看[UIView 类参考 - UIViewContentMode](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/doc/c_ref/UIViewContentMode "UIView 类参考")进行解释。

# python - 有没有更好的方法来检查输入是否为数字？输入可以是 int 或 float

> ID：12925400
> 
> 赞同：1
> 
> 时间：2012-10-17T00:21:06.640
> 
> 标签：python, string, raw-input

想知道是否有更好的方法来做到这一点。Python 是我的第一门编程语言。

```
while True:
    amount_per_month = raw_input('\nWhat is the monthly cost?\n==> ')
    # seperate dollars and cents.
    amount_list = amount_per_month.split(".")
    # checking if int(str) is digit
    if len(amount_list) == 1 and amount_list[0].isdigit() == True:
        break
    # checking if float(str) is digit
    elif len(amount_list) == 2 and amount_list[0].isdigit() and amount_list[1].isdigit() == True:
        break
    else:
        raw_input('Only enter digits 0 - 9\.  Press Enter to try again.')
        continue 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-17T00:25:31.530

`float`如果无法转换，请尝试将其设置为并处理引发的异常。

```
try:
    amount_per_month = float( raw_input('What is the monthly cost?') )
except (ValueError, TypeError) as e:
    pass # wasn't valid 
```

`TypeError`在这里是多余的，但如果转换是在其他 Python 对象（不仅仅是字符串）上进行的，则需要捕获`float( [1, 2, 3] )`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T00:27:44.687

您可以尝试将输入转换为浮点数，并在输入无效时捕获异常：

```
amount_per_month = raw_input('\nWhat is the monthly cost?\n==> ')
try:
    amt = float(amount_per_month)
except ValueError:
    raw_input('Only enter digits 0 - 9\.  Press Enter to try again.') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T00:37:46.200

使用正则表达式

```
r'\d+.\d+|\d+' 
```

[http://docs.python.org/library/re.html](http://docs.python.org/library/re.html)

# c# - 如何检索自定义 C# 资源类常量的字符串值？

> ID：12925401
> 
> 赞同：4
> 
> 时间：2012-10-17T00:21:18.057
> 
> 标签：c#, asp.net, asp.net-mvc

我创建了以下自定义 ValidationAttribute：

```
public class DateRangeAttribute : ValidationAttribute, IClientValidatable {
  public DateTime MinimumDate = new DateTime(1901, 1, 1);
  public DateTime MaximumDate = new DateTime(2099, 12, 31);

   public DateRangeAttribute(string minDate, string maxDate, string errorMessage) {
     MinimumDate = DateTime.Parse(minDate);
     MaximumDate = DateTime.Parse(maxDate);
     ErrorMessage = string.Format(errorMessage, MinimumDate.ToString("MM/dd/yyyy"), MaximumDate.ToString("MM/dd/yyyy"));
   }
} 
```

我想在我的 MVC4 视图模型中使用如下：

```
[DateRange(Resources.MinimumDate, Resources.MaximumDate, "Please enter a date between {0} and {1}")] 
```

*资源*是基于存储在 SQL 数据库中的一组选项生成的资源类。上述两个资源属性的生成代码的简化版本是：

```
public class Resources {
  public const string MinimumDate = "PropMinimumDate";
  public static string PropMinimumDate
  {
     get { return "12/15/2010" } 
  }
  public const string MaximumDate = "PropMaximumDate";
  public static string PropMaximumDate
  {
     get { return "12/15/2012" } 
  }
} 
```

虽然我不明白它是如何工作的，但我明白 ValidationAttributes 中资源的典型使用会自动将*Resources.MinimumDate*映射到*PropMinimumDate*并返回值“12/15/2010”。

我不知道如何自己手动进行编程飞跃，以便我可以将两个日期值传递到我的自定义 ValidatorAttribute 中。按照目前的编码，*“PropMinimumDate”*和*“PropMaximumDate”*是传递给 DateRangeAttribute 构造函数的*minDate*和*maxDate*参数值（分别）。

如果我尝试

```
[DateRange(Resources.PropMinimumDate, Resources.PropMaximumDate, "Please enter a date between {0} and {1}")] 
```

我收到编译错误：

*属性参数必须是属性参数类型的常量表达式、typeof 表达式或数组创建表达式*

有没有办法完成这项任务，还是我在尝试不可能的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T04:04:20.997

您需要将`Type`资源类的作为参数，然后使用反射来获取属性值。

```
public class DateRangeAttribute : ValidationAttribute, IClientValidatable {
  public DateTime MinimumDate = new DateTime(1901, 1, 1);
  public DateTime MaximumDate = new DateTime(2099, 12, 31);
  private Type _resourceType;

   public DateRangeAttribute(string minDate, string maxDate, string errorMessage, Type resourceType) {
     _resourceType = resourceType;
     var minDateProp = _resourceType.GetProperty(minDate, 
                             BindingFlags.Static | BindingFlags.Public);
     var minDateValue = (string) minDateProp.GetValue((object) null, (object[]) null));
     MinimumDate = DateTime.Parse(minDateValue);

     // similarly get the value for MaxDate

     ErrorMessage = string.Format(errorMessage, 
            MinimumDate.ToString("MM/dd/yyyy"), MaximumDate.ToString("MM/dd/yyyy"));         
   }
} 
```

例如

```
[DateRange(Resources.MinimumDate, Resources.MaximumDate, "Please enter a date between {0} and {1}", typeof(Resources))] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T01:02:00.117

你不是在尝试不可能的事情，但你将不得不稍微解决这个限制。所以，为了符合编译器的要求，我们有两个选择，第一个是最理想的，改变生成的`Resources`类。

```
public class Resources {
  public const string PropMinimumDate = "12/15/2010";
  public const string PropMaximumDate = "12/15/2012";
} 
```

现在，如果我们不能这样做，那么我们将采用不同的方法，让我们修改装饰属性所在的类，并`const`像这样添加几个字段。

```
public class EntityClass
{
    private const string MinimumDate = "12/15/2010";
    private const string MaximumDate = "12/15/2012";

    [DateRange(MinimumDate, MaximumDate, "Please enter a date between {0} and {1}")]
} 
```

但是，除非您可以通过代码生成实体类，否则最后一种选项会违反您从数据库中提取值的需要。所以，希望你能改变`Resources`班级。

# batch-file - 完成后保持控制台窗口打开

> ID：12925404
> 
> 赞同：1
> 
> 时间：2012-10-17T00:21:29.017
> 
> 标签：batch-file, console

我正在运行一个 bat 文件并将输出显示在控制台窗口中。现在，我故意让 bat 文件失败（bat 文件包含“STARET www.webaddress.com”）。错误捕获并且一切正常，但控制台窗口立即关闭。我想保持开放，但到目前为止，我搜索如何做到这一点还没有找到任何解决方案。

我目前拥有的代码：

```
Me.processStartInfo = New ProcessStartInfo("C:\Admin\PsTools\psexec.exe", "\\PCName -u domain\" & user & " -p " & pass & " pathtobatfile")
Me.processStartInfo.RedirectStandardError = True
Me.processStartInfo.RedirectStandardOutput = True
Me.processStartInfo.WindowStyle = ProcessWindowStyle.Hidden
Me.processStartInfo.UseShellExecute = False
Dim process As System.Diagnostics.Process = Nothing

'Start the process, which runs the bat file on the remote server
process = System.Diagnostics.Process.Start(Me.processStartInfo)
AddHandler process.OutputDataReceived, AddressOf OutputHandler
process.BeginOutputReadLine()
process.WaitForExit()

Dim errorresponse As DialogResult
   If process.HasExited And process.ExitCode <> 0 Then
      errorresponse = MessageBox.Show("There was an error. Exit code: " & process.ExitCode & _
                        ". Do you wish to view the log?", "Error", MessageBoxButtons.YesNo, MessageBoxIcon.Error)
        ElseIf process.HasExited And process.ExitCode = 0 Then
            MessageBox.Show("The update completed successfully.", "Success", MessageBoxButtons.OK)
        End If
        If errorresponse = DialogResult.Yes Then
          'To fill in later
        End If 
```

和事件处理程序子：

```
Private Shared Sub OutputHandler(ByVal sendingProcess As Object, ByVal output As DataReceivedEventArgs)
    Console.WriteLine(output.Data)
End Sub 
```

我也尝试过只进行同步输出（使用 StreamReader 和 Console.Writeline 和 Readline()），但这也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T06:14:12.027

尝试在最后添加

```
set err=%ERRORLEVEL%
pause
exit %err% 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T00:41:21.013

尝试在文件`pause`末尾添加`BAT`。或者，如果您通过进程启动 bat 文件`cmd`，则可以添加`/k`参数。

```
cmd /k pathToBatFile 
```

# c# - 实现分布式队列

> ID：12925419
> 
> 赞同：1
> 
> 时间：2012-10-17T00:23:20.447
> 
> 标签：c#, algorithm, message-queue, distributed-computing

我想（在 C# 中）实现**分布式**并**发消息**队列。我很清楚有一些实现和一些可用的源代码（例如 RhinoQueue、RabbitMQ、...）。

我感兴趣的是一些**论文或其他文献**，这些论文或其他文献描述了可靠且持久的消息队列背后的各种**算法**（应如何对数据进行分区、传播、确保最终一致性……）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T15:14:05.880

看看[Apache 的 ActiveMQ](http://activemq.apache.org/how-do-distributed-queues-work.html)。它可能会有所帮助。另外，在 stackexchange 看看[这个问题](https://softwareengineering.stackexchange.com/questions/16638/what-are-the-solutions-to-the-distributed-queue-problem)。

# ios - 如何在 Google App Engine 的 Objective-C 中使用 EndPoints 生成 API 库

> ID：12925423
> 
> 赞同：0
> 
> 时间：2012-10-17T00:23:53.060
> 
> 标签：ios, api, google-app-engine, endpoints

我使用谷歌应用引擎作为我的后端服务器。我看了google I/O视频，说可以通过命令行在EndPoints中生成IOS api库。但我找不到这样做的方法，互联网上也没有关于它的信息。有没有人使用谷歌应用引擎作为他们的 IOS 应用后端并且可以回答我的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T19:14:26.520

使用 GAE，无法**在“objective-c”中**生成 API 。Google 应用引擎基础架构支持 Java 和 python，因此您需要使用其中一种语言编写 API 以将其部署在 GAE 云中。

然后，在您的 iOS 应用程序中，您将需要与刚刚在 GAE 中部署的 API 进行通信，这可以通过所谓的`client library`. 这是一个[Objective-C 客户端库](http://code.google.com/p/gdata-objectivec-client/)的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T09:42:54.733

Cloud Endpoints 仍在 Trusted Tester 计划下。您可以在这里注册：

[http://endpoints-trusted-tester.appspot.com/](http://endpoints-trusted-tester.appspot.com/)

**更新**关于生成 iOS 客户端库的官方文档可以在这里找到：

*   [Python](https://developers.google.com/appengine/docs/java/endpoints/gen_clients#generating_a_discovery_doc_for_ios_using_maven)
*   [爪哇](https://developers.google.com/appengine/docs/python/endpoints/gen_clients#generating_a_discovery_doc_for_ios)

# javascript - 使用“宏”的动态 CSS

> ID：12925427
> 
> 赞同：1
> 
> 时间：2012-10-17T00:24:18.773
> 
> 标签：javascript, css

我有一个 CSS 文件，它将用背景图像填充一些 div。

```
.span3.one {
   background: url('//path/to/images') 
}

.span4.one {
   background: url('//path/to/images') 
} 

span5.one {
   background: url('//path/to/images')
} 
```

是否有一些宏或这样的宏可以根据各种条件动态替换某些字符串，例如请求发起的域/url 或调用页面的链接中的某些线索？

```
span3.one {
   background: url('//$replacemoreintelligently') 
} 
```

如果服务器端是答案，我宁愿使用 node.js 或 python，而不是 PHP。不过，我只需要一些指导。

可能会有数千个这样的页面。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T00:29:05.607

我想你会想使用[Less](http://lesscss.org/)。

# maven - 将 jboss 客户端 jar 部署到本地 maven 存储库

> ID：12925431
> 
> 赞同：0
> 
> 时间：2012-10-17T00:24:52.687
> 
> 标签：maven, artifactory

我的机器上有一个本地 jboss 安装，我想将客户端目录中的 jar 部署到我的本地 Artifactory 服务器。

有没有办法在一个命令中完成，或者我应该单独部署每个文件？

我不想要的：

1.  使用 JBoss nexus maven 存储库。
2.  从我的 Artifactory 向 JBoss nexus maven repo 添加代理。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:02:01.617

准备要在本地存储库文件夹布局中上传的 jar 文件，例如：

> 存储库/org/jboss/logging/jboss-logging-spi/2.2.0-CR1/jboss-logging-spi-2.2.0.CR1.jar 存储库/org/jboss/javaee/jboss-javaee/5.0.1.GA /jboss-javaee-5.0.1.GA.jar

使用[此处](https://gist.github.com/aleung/5194777)的 pom.xml通过单个命令将它们批量上传到 maven 存储库`mvn install`。

详细阅读我的[博](http://aleung.github.io/blog/2013/03/19/maven-batch-deploy-artifacts/)文。

# android - AnimationDrawable 在可见性（消失）之后快速动画，然后是可见性（可见）

> ID：12925433
> 
> 赞同：2
> 
> 时间：2012-10-17T00:24:57.013
> 
> 标签：android

我有一个 ImageView 用于显示一些帧动画。这些图像的持续时间都设置为 100。

但是，有时需要隐藏 ImageView。因此动画停止，ImageView 设置为 GONE。

当需要再次显示 ImageView 时，它的可见性设置为 VISIBLE 并开始动画。

但是 - 现在动画真的很快；而不是 100 的持续时间，它看起来像 50。但是当我检查持续时间时它仍然显示 100 - 但它绝对不像它。

隐藏和显示 ImageView 的代码如下：

```
 //hide the animation
    final AnimationDrawable frameAnim = (AnimationDrawable) animImgView.getBackground();
    if (frameAnim.isRunning() == true)
    {
        frameAnim.stop();
    }

    frameAnim.setVisible(false, false);
    animImgView.setVisibility(View.GONE);

    //show animation
    animImgView.setVisibility(View.VISIBLE);

    final AnimationDrawable frameAnim = (AnimationDrawable) animImgView.getBackground();
    frameAnim.setVisible(true, true);
    frameAnim.start(); 
```

可能是什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T18:52:11.577

经过一些实验，我发现最好的方法是简单地实现：

```
//hide the animation
animImgView.setVisibility(View.GONE);

//show animation
animImgView.setVisibility(View.VISIBLE); 
```

这将保持动画速度。我对动画停止/启动的最初意图是确保 CPU 不会做超出需要的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-10T14:43:19.753

为了达到不仅改变可见性，而且在不可见时停止动画的最初目标：

```
//hide the animation
animImgView.setVisibility(View.GONE);

//stop animation
final AnimationDrawable frameAnim = (AnimationDrawable) animImgView.getBackground();
if (frameAnim.isRunning() == true)
{
    frameAnim.stop();
}

frameAnim.setVisible(false, false);

//start animation
final AnimationDrawable frameAnim = (AnimationDrawable)  animImgView.getBackground();
frameAnim.setVisible(true, true);
frameAnim.start();

//show animation
animImgView.setVisibility(View.VISIBLE); 
```

这里的区别是在 ImageView 不可见/消失时开始和停止动画。出于某种原因，在动画可见时启动和停止动画会导致时间问题。

资料来源：我自己遇到了这个问题并使用这种技术修复了它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-25T16:10:23.340

在 Android 上苦苦挣扎，我找到了下一个解决方案：

**不要使用 start() 和 stop() 方法。**

使用 setVisible(true, true) 开始动画：

```
animImgView.setVisibility(View.VISIBLE);
final AnimationDrawable frameAnim = (AnimationDrawable) animImgView.getBackground();
frameAnim.setVisible(true, true); 
```

和 setVisible(false, **true** ) 停止它（注意粗体**true**）：

```
final AnimationDrawable frameAnim = (AnimationDrawable) animImgView.getBackground();
frameAnim.setVisible(false, true);
animImgView.setVisibility(View.GONE); 
```

# php - 将 var 从 javascript/jquery 移动到同一页面上的 php 脚本

> ID：12925438
> 
> 赞同：0
> 
> 时间：2012-10-17T00:25:53.310
> 
> 标签：php, javascript, jquery

> **可能重复：**
> [如何将 JavaScript 变量传递给 PHP？](https://stackoverflow.com/questions/1917576/how-to-pass-javascript-variables-to-php)

我将如何在不提交表单的情况下将 javascript 变量移动到 php 脚本？

有可能吗？

ajax 是一个可以接受的选项，但如何

假设我想在发送它的过程中运行 thisnewoption.php 包含字符串的 javascript 变量 imgfilename

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T00:29:44.687

一旦你的 php 页面加载完毕，就没有回头路了。将变量（数据）传回服务器的最佳方法是使用 ajax，因此可能是时候重温 ajax [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

更新：告诉你什么，这是一个非常基本的 ajax 调用，请注意这里使用 POST 向服务器发送数据：

```
 $.ajax ( {type : 'POST' ,
    url : 'email.php' ,
    data : { variable: variable, anotherVariable: anotherVariable } ,
        success : function ( data ) { $('#some-div').html ( data ) ; }
    } ) ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T00:29:57.043

您不能从字面上将 javascipt 变量作为 PHP 变量传递，因为 PHP 是在服务器端评估的，而客户端是 javascript。但是，您可以使用 ajax 调用来传递它。

# php - 如何使用 cURL 在使用 JS 的表单上发布表单值

> ID：12925442
> 
> 赞同：0
> 
> 时间：2012-10-17T00:26:12.630
> 
> 标签：php, javascript, curl, screen-scraping

**很抱歉，很长的帖子** 我在 PHP 中使用 cURL 来处理`post`一些表单字段，以便返回`post`需要一些帮助的结果，因为表单有点不寻常。

# 卷曲脚本

```
 $ch = curl_init();
 $data = array('field_1_name' => 'field_value',
               'field_2_name' => 'field_value',
               'field_3_name' => 'field_value',
              ); 
 curl_setopt($ch, CURLOPT_URL,'http://url.com');  
 curl_setopt ($ch, CURLOPT_POST, 1);
 curl_setopt ($ch, CURLOPT_POSTFIELDS, $data);
 curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
 $fp = fopen('data.php', 'w');
 curl_setopt($ch, CURLOPT_FILE, $fp);
 curl_exec ($ch);
 curl_close ($ch);
 fclose($fp); 
```

# 你应该知道的事情

1.  这些字段不是和字段`text-fields`的组合。`radio``dropdown`
2.  表单包含`JS`但萤火虫控制台不显示`AJAX`帖子 - 而是表单与`SESSIONS`数据`HTTP-CACHE`一起使用。
3.  选择表单字段后，页面似乎`reload`会插入并插入下一个下拉列表的值。（同样，萤火虫没有将其显示为`AJAX`请求。）

# `dropdown`这是表单上的字段示例

```
<select name="field_name" onchange="document.getElementById('uploadForm').action.value='RELOAD';document.getElementById('uploadForm').reloadTrigger.value='trigSize';document.getElementById('uploadForm').submit();">
   <option value="option_1">option_1</option>
   <option value="option_2">option_2</option>
   <option value="option_3">option_3</option>
</select> 
```

请注意`onChange`触发重新加载页面的事件，该页面使用 next`dropdwon`及其各自的`options`.

# 我想要完成的事情

每个`dropdown`字段都包含各种选项。根据表单上选择的组合，最终页面重新加载会**根据这些选择的选项返回一个价格**。我需要将**价格**和选择的**选项**保存到我的数据库中。

所以我的数据库看起来像这样：

```
option_1   |   option_2   |   option_3   |   price   |
field_1    |   field_2    |   field_3    |    25     | 
```

我将所有这些信息都包括在内，因为有**经验**的人可能会为我指明*更好*的方向（意思是：嘟嘟/图书馆/教程/等）我不确定是否`cURL`适合这份工作。我更喜欢与`PHP`. 那你们怎么看？感谢您的时间和建议。我欢迎并感谢所有有用的信息。

--旁注--我在`RUBY`使用`WATIR-WebDriver`中编写了一个脚本，该脚本成功地抓取了信息，但是工作速度太慢了。每个产品平均有 5,000 种不同的组合，而这种方法每分钟只返回 10 种左右。（失败）

**编辑 1**

只是为了澄清。此表格不在我的服务器上，也不归我所有或操作。我打算抓取表单返回的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T11:10:08.880

您似乎希望获得最终重新加载的结果，该结果将以 HTML 形式返回价格。最后一页将包含所有选定的值和价格。现在，当您将它们传递给表单时，您不需要获取除价格之外的其他值。价格可以通过正则表达式获取。这些值可以很容易地保存在您的数据库中。

我认为这将是可能的解决方案！

# matlab - 使用 MATLAB filter() 生成适当缩放的 AR 过程

> ID：12925443
> 
> 赞同：0
> 
> 时间：2012-10-17T00:26:16.077
> 
> 标签：matlab, statistics, simulation

我正在尝试使用 MATLAB 的 filter() 函数生成 AR(2) 过程，如下所示[：](http://www.mathworks.co.uk/help/signal/ref/arburg.html)

```
A=[1 -2.7607 3.8106 -2.6535 0.9238];
% AR(4) coefficients
y=filter(1,A,0.2*randn(1024,1)); 
% Filter a white noise input to create AR(4) process
[ar_coeffs,nv] =arburg(y,4);
%compare the results in ar_coeffs to the vector A. 
```

我有一个时间序列数据集，并希望大致匹配模拟数据集中数据的“总”方差。当我在第二行代码中使用 nv 代替 0.2 时，我得到的模拟方差太小了。

谁能帮我纠正这种情况以生成相似的模拟 AR(N) 数据集？

谢谢，

标记

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T06:48:36.887

如果您`nv`在此示例中查看它是 0.0392，这就是方差。要创建具有方差 a^2 的白噪声，您需要将该序列乘以 a。如果 a^2 = 0.392，则 a 为 0.198（非常接近 0.2）。所以 Colin T 是对的，你需要将你的 randn(1024,1) 乘以`sqrt(nv)`not 乘以`nv`。

# bash - 防止bash脚本中的变量迭代for循环

> ID：12925444
> 
> 赞同：0
> 
> 时间：2012-10-17T00:26:19.430
> 
> 标签：bash, iteration

我有一个 bash 脚本，我在其中定义了一个特定的路径：

`MY_PATH=/to/my/path`

我在 MY_PATH 中还有一组目录，并将这些目录存储在一个数组中，如下所示：

```
DIRECTORIES="/dir1/
/dir2/
/dir3/" 
```

我想要做的是遍历 $MY_PATH 中的所有 $DIRECTORIES，所以我尝试了这个：

```
for dir in $MY_PATH$DIRECTORIES
do
    echo "Processing $dir"
end 
```

但是，这会产生以下不需要的输出：

```
Processing /to/my/path/dir1/           #Correct!
Processing /dir2/                      #What I want: Processing /to/my/path/dir2/
Processing /dir3/                      #What I want: Processing /to/my/path/dir3/ 
```

有什么方法可以防止在 $MY_PATH 上进行迭代，同时保留对 $DIRECTORIES 的迭代，以便我可以实现所需的输出（见上文）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T00:28:31.973

```
for dir in $DIRECTORIES; do
  path="$MY_PATH/$dir"
  echo "Processing $path"
done 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T01:19:32.797

顺便说一句，这不是一个数组。使用数组看起来像这样：

```
MY_PATH=/to/my/path
DIRECTORIES=(dir1 dir2 dir3)
for dir in "${DIRECTORIES[@]}"; do
  path="$MY_PATH/$dir"
  echo "Processing $path"
done 
```

（这不是答案，但上面的代码不适合评论。:)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T04:26:43.233

如果文件夹名称中有空格

```
MY_PATH="/to/my/path" 
```

而且您像以前一样使用换行符来分隔文件夹

```
DIRECTORIES="/dir1/
/dir2/
/dir3/" 
```

一个稍微安全一点的循环是

```
OLDIFS=$IFS
IFS=$'\n'
for dir in $DIRECTORIES; do
  path="$MY_PATH/$dir"
  echo "Processing $path"
done
IFS=$OLDIFS 
```

# go - 在 Go 中，如何直接导入函数，而不需要在调用时加上包名前缀？

> ID：12925450
> 
> 赞同：41
> 
> 时间：2012-10-17T00:27:13.767
> 
> 标签：go

在 Go 编程语言中，为什么在导入包后，我仍然必须在该包中的方法前面加上包名？

IE

```
import "io/ioutil"

func main() { 
    content, err = iotuil.ReadFile("somefile.txt")
    // etc..
} 
```

这不是多余的吗？例如，在 Java 中，您可以在不导入的情况下执行导入`Files.readAllLines`等操作`Files`。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-10-17T01:03:07.990

我想这并不能真正回答您的问题，但是如果您愿意，您实际上可以在不明确说明包的情况下调用方法 - 只需`.`在名称前加上 a 导入（但不建议这样做；见下文）：

```
package main

import (
  . "fmt"
  . "io/ioutil"
)

func main () {
  content, err := ReadFile("testfile")
  if err != nil {
    Println("Errors")
  }
  Println("My file:\n", string(content))
} 
```

请注意下面@jimt 的评论 -在测试之外**不**建议这种做法，因为它可能会导致与未来版本的名称冲突。此外，绝对同意@DavidGrayson 的观点，即更好地阅读/了解事物的来源。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-10-17T02:35:52.897

您可以导入和重命名包名称，例如：

```
 import (  
        .     "fmt"       // no name, import in scope  
        File  "io/ioutil" // rename ioutil to File
        _     "net"       // net will not be available, but init() inside net package will be executed
    ) 
```

另请参阅[https://golang.org/ref/spec#Import_declarations](https://golang.org/ref/spec#Import_declarations)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-17T00:43:45.980

我真的不能代表 Go 语言的设计者说话，但是能够快速分辨出你所调用的方法是在哪里定义的，这真是太好了。在文件顶部看到您正在使用的所有包的列表也很高兴。这不是多余的。

正如您所说，Java 要求您说`Files.readAllLines`，同样，Go 要求您编写`ioutil.ReadFile`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-15T14:00:40.767

go 中的 import 语句不像 java 中的，更像`#include`是 c++ 中的。在go中，如果没有导入某些内容，则无法使用它。如果是导入的，你可以使用它，但必须以包名作为前缀。正如其他人所说，用于`import . "packagename"`导入包而不必前缀。

# vim - Vimgrep 没有正确匹配正则表达式

> ID：12925451
> 
> 赞同：0
> 
> 时间：2012-10-17T00:27:22.440
> 
> 标签：vim

如果我这样做：

```
:vimgrep /do_action\([ ]?'init'/ **/*.php 
```

我明白了

```
E54: Unmatched \( 
```

但我知道有些文件具有匹配的文本。为什么？

如果有人可以帮助我为 cmd+l 创建一个键映射，我也将非常感激，以便以“init”启动此搜索，用光标下的单词替换，我从各种来源了解到这是可能的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T05:46:21.883

基于kev的答案，这是您的映射：

```
nnoremap <D-i> :vimgrep //do_action([ ]\?'<c-r>=expand('<cword>')<cr>'/ **/*.php<cr> 
```

但我建议你不要在映射中使用 Command 键：它只在 MacVim 中有效，并且尽可能地寻求可移植性是一个好习惯。

`<leader>`钥匙非常适合此类事情。

```
nnoremap <leader>i :vimgrep //do_action([ ]\?'<c-r>=expand('<cword>')<cr>'/ **/*.php<cr> 
```

见`:help c_ctrl-r_=`和`:help leader`。

***编辑***

我在这个上走得太快了。我不仅在 kev 对您的命令的修改中添加了不必要的麻烦（愚蠢`//`），而且我没有注意到它可以被简化。这个是经过测试和工作的：

```
nnoremap <leader>i :vim do_action(\s*'<c-r>=expand('<cword>')<cr> **/*.php<cr> 
```

对不起，混乱。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T01:43:08.870

你不需要逃跑`(`来匹配它。但是您需要转义`?`以匹配 0~1 上一个项目。尝试：

```
:vimgrep /do_action([ ]\?'init'/ **/*.php 
```

# backbone.js - 在 Backbone.js 中使用命名空间负载

> ID：12925455
> 
> 赞同：2
> 
> 时间：2012-10-17T00:27:56.823
> 
> 标签：backbone.js

我正在开发一个请求和响应有效负载都被命名空间的项目。例如：

```
{
    'SourceMachine':{
        'Host':'some value',
        'Description':'some value',
        'UserName':'some value',
        'Password':'some value'
    }
} 
```

为了能够在各个字段上执行 get() 和 set()，我在“source_model”中覆盖了 parse 方法，如下所示：

```
parse : function(response, xhr) {
    return response.SourceMachine;
} 
```

这一切都很好。但问题是：当我想做一个 POST 或 PUT 操作时，我必须将 Host、Description、UserName 和 Password 属性放入 SourceMachine 命名空间。基本上我一直在做的是将模型属性复制到一个临时对象，清除模型，然后保存如下：

```
var tempAttributes = this.model.attributes;
this.model.clear();
this.model.save({SourceMachine: tempAttributes}); 
```

这行得通，但它尖叫着 KLUGE！必须有一种更好的方式来处理命名空间数据。谢谢！

**更新**

我现在已经为我将用于我的应用程序中所有模型的基本模型创建了一个 require.js 模块，因为它们都依赖于命名空间数据：

```
define(function() {
    return Backbone.Model.extend({
        /**
         * Adding namespace checking at the constructor level as opposed to
         * initialize so that subclasses needn't invoke the upstream initialize.
         * @param attributes
         * @param options
         */
        constructor : function(attributes, options) {
            //Need to account for when a model is instantiated with
            //no attributes. In this case, we have to take namespace from
            //attributes.
            this._namespace = options.namespace || attributes.namespace;

            //invoke the default constructor so the model goes through
            //its normal Backbone setup and initialize() is invoked as normal.
            Backbone.Model.apply(this, arguments);
        },
        /**
         * This parse override checks to see if a namespace was provided, and if so,
         * it will strip it out and return response[this._namespace
         * @param response
         * @param xhr
         * @return {*}
         */
        parse : function(response, xhr) {
            //If a namespace is defined you have to make sure that
            //it exists in the response; otherwise, an error will be
            //thrown.
            return (this._namespace && response[this._namespace]) ? response[this._namespace] 
                                                                  : response;
        },
        /**
         * In overriding toJSON, we check to see if a namespace was defined. If so,
         * then create a namespace node and assign the attributes to it. Otherwise,
         * just call the "super" toJSON.
         * @return {Object}
         */
        toJSON : function() {
            var respObj = {};
            var attr = Backbone.Model.prototype.toJSON.apply(this);
            if (this._namespace) {
                respObj[this._namespace] = attr;
            } else {
                respObj = attr;
            }
            return respObj;
        }
    })
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T00:58:38.967

模型调用上的创建和更新操作[`toJSON`](http://backbonejs.org/#Model-toJSON)为服务器生成数据：

> **toJSON** `model.toJSON()`
> 
> *返回模型属性*的副本以进行 JSON 字符串化。这可用于持久化、序列化或在移交给视图之前进行扩充。

您可以提供自己的`toJSON`：

```
toJSON: function() {
    return { SourceMachine: _(this.attributes).clone() };
} 
```

这应该让您的服务器满意。不幸的是，`toJSON`它也常用于为您的模板提供数据，您可能不希望其中有`SourceMachine`噪音；如果是这样，那么添加另一种方法来为您的模板准备数据：

```
// Or whatever you want to call it...
valuesForTemplate: function() {
    return _(this.attributes).clone();
} 
```

这就是标准`toJSON`方法在内部所做的。

# python - matplotlib；十的分数次方；科学计数法

> ID：12925456
> 
> 赞同：5
> 
> 时间：2012-10-17T00:27:58.220
> 
> 标签：python, matplotlib, label, axis, ticker

我处理模拟数据并且最近一直在使用 matplotlib 并且遇到了一些令人讨厌的东西（一个错误？）。

我一直允许 matplotlib 自动设置刻度标签及其类型（科学等），并且通过一些数据我得到了奇怪的科学股票标签。

在寻找解决方案时，我发现您可以调用 set_powerlimits((n,m)) 来设置将使用科学计数法显示的数据的限制。但是我遇到了这个问题（如果我没记错的话），数据跨越了几个数量级，而且我的数据到处都是，所以我需要某种编程解决方案，而不是硬性解决方案。见： http: [//matplotlib.org/api/ticker_api.html](http://matplotlib.org/api/ticker_api.html)

下面我包含了示例数据、代码和屏幕截图。

```
#! /usr/bin/env python
from matplotlib import pyplot as plt

data = [
[1.83186088e-08,0.03275],
[1.07139009e-07,0.03275],
[2.06376627e-07,0.03275],
[3.03918517e-07,0.03275],
[4.06032883e-07,0.03275],
[5.01194017e-07,0.03275],
[6.02195723e-07,0.03275],
[7.03536925e-07,0.03275],
[8.04625154e-07,0.03275],
[9.06401951e-07,0.03275],
[1.00041895e-06,0.03275],
[1.10230745e-06,0.03275],
[1.2042525e-06,0.03275],
[1.30647822e-06,0.03275],
[1.40109887e-06,0.03275],
[1.50380097e-06,0.03275],
[1.60683242e-06,0.03275],
[1.70208505e-06,0.03275],
[1.80545692e-06,0.03275],
[1.90090648e-06,0.03275],
[2.00453092e-06,0.03275],
[2.10018627e-06,0.03275],
[2.20401747e-06,0.03275],
[2.30009359e-06,0.03275],
[2.4043033e-06,0.03275],
[2.50066449e-06,0.03275],
[2.60513728e-06,0.03275],
[2.70165405e-06,0.03275],
[2.80635938e-06,0.03275],
[2.90331342e-06,0.03275],
[3.00021199e-06,0.03275],
[3.10546819e-06,0.03275],
[3.20257899e-06,0.03275],
[3.30032923e-06,0.0327499999],
[3.40612833e-06,0.0327499999],
[3.50401732e-06,0.0327499997],
[3.60153069e-06,0.0327499996],
[3.70700708e-06,0.0327499993],
[3.80456907e-06,0.0327499988],
[3.90259984e-06,0.0327499982],
[4.00084149e-06,0.0327499973],
[4.10700266e-06,0.0327499959],
[4.2047462e-06,0.0327499942],
[4.30209468e-06,0.0327499918],
[4.40018204e-06,0.0327499886],
[4.50712875e-06,0.032749984],
[4.60630591e-06,0.0327499785],
[4.70519881e-06,0.0327499715],
[4.80398305e-06,0.0327499628],
[4.90251297e-06,0.0327499521],
[5.00182752e-06,0.032749939],
[5.10157551e-06,0.0327499232],
[5.20157575e-06,0.0327499043],
[5.30145192e-06,0.0327498822],
[5.40127044e-06,0.0327498565],
[5.500537e-06,0.0327498272],
[5.60773155e-06,0.0327497911],
[5.70660709e-06,0.0327497534],
[5.80610521e-06,0.0327497112],
[5.90651786e-06,0.0327496642],
[6.00749437e-06,0.0327496124],
[6.10822094e-06,0.0327495566],
[6.20042255e-06,0.0327495018],
[6.30049028e-06,0.0327494386],
[6.40035803e-06,0.0327493715],
[6.50035477e-06,0.0327493004],
[6.60056805e-06,0.0327492251],
[6.70029936e-06,0.0327491461],
[6.80054193e-06,0.0327490625],
[6.90130872e-06,0.0327489743],
[7.00202598e-06,0.0327488818],
[7.10217348e-06,0.0327487855],
[7.20243015e-06,0.0327486847],
[7.30199609e-06,0.0327485801],
[7.40193254e-06,0.0327484707],
[7.50188319e-06,0.0327483567],
[7.60306205e-06,0.0327482367],
[7.70357184e-06,0.0327481129],
[7.80343389e-06,0.0327479853],
[7.90330165e-06,0.0327478532],
[8.00348513e-06,0.0327477162],
[8.10167039e-06,0.0327475777],
[8.206328e-06,0.0327474253],
[8.3020567e-06,0.0327472819],
[8.40527826e-06,0.0327471228],
[8.50095898e-06,0.0327469714],
[8.60536828e-06,0.0327468019],
[8.70106059e-06,0.0327466426],
[8.80396558e-06,0.032746467],
[8.90727378e-06,0.0327462865],
[9.00225164e-06,0.0327461166],
[9.10359892e-06,0.0327459311],
[9.20470894e-06,0.0327457418],
[9.30582982e-06,0.0327455481],
[9.40750123e-06,0.0327453488],
[9.50134495e-06,0.0327451608],
[9.60358199e-06,0.0327449513],
[9.70705637e-06,0.0327447344],
[9.80377546e-06,0.0327445269],
[9.90091941e-06,0.032744314],
]

times=[]
vals=[]
for elem in data:
  times.append(elem[0])
  vals.append(elem[1])

plt.plot(times,vals)
plt.show() 
```

[截屏](http://i234.photobucket.com/albums/ee17/Dizzixx/matplotlib_sci_not_prob.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T14:44:04.510

您可以尝试使用工程格式化程序：

```
times=[]
vals=[]
for elem in data:
  times.append(elem[0])
  vals.append(elem[1])

plt.plot(times,vals)
plt.show()

formatter = matplotlib.ticker.EngFormatter(unit='S', places=3)
formatter.ENG_PREFIXES[-6] = 'u'
plt.axes().yaxis.set_major_formatter(formatter) 
```

看起来像这样： ![像这样](../Images/ab4cbae66a64c5206d7581f889bbb9e7.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T09:38:43.003

这是一个[已知问题](https://github.com/matplotlib/matplotlib/issues/461)。您最好手动分析数据的限制，就像您在屏幕截图中所做的那样，并`ax.set_ylim(min, max)`在绘图后使用自己。您还可以使用以下方法关闭偏移：

```
import matplotlib.ticker as mticker

# plot some stuff
# ...

y_formatter = mticker.ScalarFormatter(useOffset=False)
ax.yaxis.set_major_formatter(y_formatter) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T15:04:06.770

我认为你最好的选择是使用对数轴，但如果你需要用线性轴创建图形，你必须自己设置功率限制。您可以使用以下方法计算功率限制`math.log10`：

```
import math
from matplotlib import ticker

# Compute the span of the data
pow_min = math.floor(math.log10(min(vals)))
pow_max = math.ceil(math.log10(max(vals)))

# Create a scalar formatter without offset, in order to have
# the right exponent over the yaxis
fmt = ticker.ScalarFormatter(useOffset=False)
fmt.set_powerlimits((pow_min, pow_max))

fig = plt.figure()
ax1 = fig.add_subplot(1, 1, 1)
ax1.plot(times, vals)
ax1.yaxis.set_major_formatter(fmt)  # Set the formatter 
```

# c++ - 没有匹配的初始化构造函数

> ID：12925458
> 
> 赞同：2
> 
> 时间：2012-10-17T00:28:09.260
> 
> 标签：c++, copy-constructor

我只是应该习惯基本的复制构造函数。

我假设我正确放置了复制构造函数。

但是当我尝试编译时，我不断收到错误“没有用于初始化 B 的匹配构造函数”

我有点困惑。

```
class A {
    int valuea;

public:     
    A(const A&); // copy constructor
    int getValuea() const { return valuea; }
    void setValuea(int x) { valuea = x; }
};

class B : public A {
    int valueb;
public:
    B(int valueb);
    B(const B&); // copy constructor
    int getValueb() const { return valueb; }
    void setValueb(int x) { valueb = x; }
};

int main () {
    B b1;
    b1.setValuea(5);
    b1.setValueb(10);
    B b2(b1);
    cout << "b2.valuea="  << b2.getValuea() << "b2.valueb="  << b2.getValueb() << endl;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T00:33:16.873

通过声明`B(int)`and `B(const B &)`，当您没有其他构造函数时，您已经为您禁用了隐式放置在类中的默认构造函数，因为所有编译器都知道，您可能不需要默认构造函数，因此它无法做出假设（[请参见此处](https://stackoverflow.com/questions/11792207/why-does-the-default-parameterless-constructor-go-away-when-you-create-one-with)）。

将以下内容添加到 中`B`，记住用它初始化基础和成员：

```
B(){} 
```

在 C++11 中，这很好用：

```
B() = default; 
```

这将允许`B`在您声明时使用默认构造函数`B b1;`

同样的事情`A`也适用于 。您有一个复制构造函数，因此不再为您隐式放置任何默认构造函数。

# html - HTML5 简单堆叠

> ID：12925459
> 
> 赞同：1
> 
> 时间：2012-10-17T00:28:15.240
> 
> 标签：html, css, header, footer

我已经为此苦苦挣扎太久了。

我想要做的只是简单地把下面的东西堆叠起来，就像一张有 1 列 3 行的表格一样。我试图放弃旧的 HTML 和 CSS 方法来使用首选的 HTML5 页面结构方法。

像这样……但没有重叠……

```
 ----------------------------
|    | header           |    |
|     ------------------     |
|    |                  |    |
|    | content          |    |
|    |                  |    |
|     ------------------     |
|    | footer           |    |
----------------------------- 
```

发生的情况是页脚最终与内容重叠，并且内容大于页面本身（这是有道理的，因为它是 100%...）。我已经尝试了一些涉及“stickyfooter”的变通办法，但我似乎无法让它工作......我想我会从头开始 - 我应该知道什么？我有什么明显的遗漏吗？

CSS：

```
header{
background-color: #000000;
height: 200px;
width 1000px;
margin-left:auto;
margin-right:auto; 
}
.content{
background-color: #FFFFFF;
height: 100%;
margin-left:auto;
margin-right:auto; 
}
footer{
background-color: #000000;
width 1000px;
height: 200px;
margin-left:auto;
margin-right:auto; 
} 
```

HTML：

```
<header>
 Header Content
</header>
<div class="content">
 Page Content goes here
</div>
<footer>
 Footer Content
</footer> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T00:48:37.543

这是您要完成的工作的简单[演示。](http://codepen.io/anon/pen/vHAIm)

```
header, footer, .content {
  background: salmon;
  width: 500px;
  height: 100px;
  margin:0 auto;
}

.content{
  background: white; 
  min-height: 600px;
} 
```

`header`在您的代码中，您在and `footer`( )中缺少冒号`width 1000px;`，并且您没有定义`width`of `.content`。

您还可以将选择器与逗号组合，并使用`margin`简写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T22:04:17.490

在网上窥探了一番之后，我设法得到了我需要的工作，包括一个粘页脚，所有 css3 和 html5 兼容。你可以在[jsfiddle](http://jsfiddle.net/d2f9M/)上看到这个。尽管如此，代码在这里：

```
<!DOCTYPE html>
<html>
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
  <title>
   Title
  </title>

  <style type="text/css">
   html, body {
    height: 100%;
   }

    * {
       padding:0px;
       margin:0px;
   }

   #backColor1, #main, #copyright {
    width: 900px;
   }

   #backColor1 {
    position: fixed; 
    z-index: -1; 
    left: 50%; 
    height: 32767px;
   }

   #backColor2 {
    position: relative; 
    left: -50%; 
    height: 100%; 
    background-color: #FF0000;
   }

   #main {   background-color: #FFCCFF;
    position: relative; 
    padding-bottom: 150px;
    margin: 0 auto;
    overflow:auto;
   }

   #wrap {
   min-height: 100%;
   width: 100%;
   }

   #header {
   background-color: #0000FF;
   height: 150px;
   width: 100%;
   }

   #nav {
   height: 40px;
   background-color: #FFFF00;
   }

   #footer {
    position: relative;
       margin-top: -150px; /* negative value of footer height */
       height: 150px;
       clear:both;
       background-color: #333333;
       text-align: center;

       } 

      #copyright {
      height: 100%;
      margin: 0 auto;
      }

   /*Opera Fix*/
   body:before {
       content:"";
       height:100%;
       float:left;
       width:0;
       margin-top:-32767px;/
   }

/*
##########################################################################
*/   

  #footer #copyright p {
   font-family: verdana;
   color: #AAAAAA;
   text-align: justify;
   font-size: 0.7em;
  } 

  </style>

<!-- ie sticky-footer fix !-->  
  <!--[if !IE 7]>
    <style type="text/css">
        #wrap {display:table;height:100%}
    </style>
<![endif]-->

 </head>
<body>

<div id="backColor1">
    <div id="backColor2">
 </div>
</div>

<div id="wrap">
    <div id="header">
     <p>
      header
     </p>
    </div>
    <nav id="nav">
     <p>
      Link1 Link2 Link3
     </p>
    </nav>
 <div id="main">
<p>The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. </p>
<p>The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. </p>
<p>The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. </p>
<p>The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. </p>

 </div>
</div>

<div id="footer">
 <div id="copyright">
 <p>
The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog.
 </p>
 </div>
</div>

</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T00:57:43.677

尝试像这样声明您的利润：

```
margin:0 auto; 
```

这将导致顶部和底部边距为 0px，左右边距居中，就像现在一样。

我不禁认为您的内容/页脚问题是由您的内容部分的高度为 100% 引起的。我喜欢将高度设置为指定长度或自动。Auto 允许您在呈现页面时不知道高度，但会相应地适应。

此外，设置内容部分的宽度将使其与页面的其余部分一样居中。

# javascript - 从 jQuery AJAX 调用返回信息并在成功时执行额外的 jQuery

> ID：12925460
> 
> 赞同：0
> 
> 时间：2012-10-17T00:28:28.493
> 
> 标签：javascript, php, jquery, ajax

我有以下 jQuery AJAX 来复制背景图像。我对如何有效地将信息返回到原始页面感到困惑。这是我点击“'#dupBtn”时发送的 AJAX ......

```
//DUPLICATE BACKGROUND      
$('#dupBtn').click(function() {
    jQuery.ajax({
            type: "POST",
            dataType:'json',
            url: "../system/bgUpdate.php",
            data: {
                "user":<?= $_POST['user'] ?>,
                "bgID":bgID,
                "refID2":<?= $_POST['refID2'] ?>,
                "refTable":"<?= $_POST['refTable'] ?>",
                "bgTitle":($('#bgTitle').val()),
                "path":path,
                "bgColor":bgColor,
                "bgPoz":bgPoz,
                "bgRepeat":bgRepeat,
                "attach":attach
                }
        });
}); 
```

这是 PHP 页面 bgUpdate.php 上的基本 MySQL 查询。

```
mysql_query("INSERT INTO backgrounds (user,title,path,bgColor,bgPosition,bgRepeat,bgAttachment) VALUES ('".$_POST['user']."','$title','".$_POST['path']."','$bgColor','".$_POST['bgPoz']."','$rt','$attach')");

$bgIDnew = mysql_insert_id(); 
```

我想要做的是在成功执行 MySQL 条目后在原始页面上触发以下代码，从 MySQL PHP 页面动态捕获“$bgIDnew”。

```
$('#bgPickerBox').load('../dialog/bgPickerAlbums.php?album=<?=$bgIDnew?>'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T00:34:45.403

[`jQuery.ajax()`](http://api.jquery.com/jQuery.ajax/)有一个`success`可以用作回调的属性。另一个是`complete`在请求成功与否时触发。

```
jQuery.ajax({
  /* your stuff here */
  success: function(response) {
    $('#bgPickerBox').load('../dialog/bgPickerAlbums.php?album=<?=$bgIDnew?>');
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T00:35:10.827

您可以在ajax 请求的**成功回调函数**中编写逻辑。

当成功返回 ajax 请求时会触发此事件。

```
success: function(response) {
    $('#bgPickerBox').load('../dialog/bgPickerAlbums.php?album=<?=$bgIDnew?>');
  } 
```

将此添加到您的 ajax 请求中...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T00:35:12.153

您可以使用函数的`success`属性来完成此操作`.ajax()`：

```
$('#dupBtn').click(function() {
    jQuery.ajax({
        type: "POST",
        dataType:'json',
        url: "../system/bgUpdate.php",
        data: {
            ...
            },
        success:
            function(response)
            {
                $('#bgPickerBox').load('../dialog/bgPickerAlbums.php?album=<?=$bgIDnew?>');
            }
    });
}); 
```

但这只是其中的一部分……另一半是您的 PHP 需要返回 jQuery 可以理解为“成功”调用的内容。我的偏好是使用 HTTP 状态码。`200`在您的情况下，如果成功，您的 PHP 脚本应该返回一个代码；否则，它应该返回`400`范围内的东西。（顺便说一下，如果你想让 jQuery 做一些与错误分开的事情，你可以使用 . 的`error`属性`.ajax()`。）

但是，如果您需要将数据从服务器返回到客户端脚本，那么您的 PHP 可以像这样打印出该信息：

```
mysql_query("INSERT INTO backgrounds (user,title,path,bgColor,bgPosition,bgRepeat,bgAttachment) VALUES ('".$_POST['user']."','$title','".$_POST['path']."','$bgColor','".$_POST['bgPoz']."','$rt','$attach')");

$bgIDnew = mysql_insert_id();
// Best practice to keep it in some sort of understandable format
// Here, we'll put it in an associative array:
$response = array('id' => $bgIDnew);
print_r(json_encode($response)); 
```

该 PHP 脚本将 $response 变量的 JSON 表示形式发送回 ajax() 方法。您已经将 ajax() 方法配置为将响应数据类型读取为 JSON，因此它已经知道如何读取`response`参数...这意味着您的成功函数可能如下所示：

```
success:
    function(response)
    {
        $('#bgPickerBox').load('../dialog/bgPickerAlbums.php?album=' + response.id);
    } 
```

# c# - 将名称拆分为字段？

> ID：12925464
> 
> 赞同：4
> 
> 时间：2012-10-17T00:29:00.763
> 
> 标签：c#, regex

C# 中是否有一个惊人的 RegEx 或方法可以为我实现这一目标？

有人在“全名”字段中键入了一个字符串，我需要将其分解为： Title Firstname Middle Surname Suffix

但是用户可以输入“John Smith”，因此需要将 John 输入 First Name，将 Smith 输入 Surname。一个人可以键入 Mr John Smith（我有一个已知标题和后缀的列表），所以如果第一个字符串是标题，它会进入 Title 字段。

一个完美的例子是：

小约翰·坎贝尔·史密斯先生

但是，他们可以：

约翰和玛丽·史密斯夫妇

所以头衔是先生和夫人，名字是约翰和玛丽，姓是史密斯（他们可以使用“And”或“&”作为连接符）

我猜这对于正则表达式来说太复杂了，但我希望有人可能有一个想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T01:58:28.437

好的，这是一个我认为可以为您完成工作的程序。您当然可能需要进行一些修改，因为我根据您的问题做了一些假设，但这肯定会让您朝着正确的方向开始。

其中一些假设如下：

1.  提供给函数的名称中***没有标点符号（例如，带有句点的 Jr.）。***
2.  您***必须***有名字和姓氏，但标题、中间名和后缀是可选的。
3.  正如问题中所述，唯一的***连接***运算符是**and**和**& 。**
4.  名称采用这种格式**{titles} {first name} {middle name} {last name} {suffix}**。

我给它起了很多不同的名字，但肯定有更多的可能性，我没有花超过 30 分钟的时间，所以**它没有经过全面测试**。

```
class Program
{
    static List<string> _titles = new List<string> { "Mr", "Mrs", "Miss" };
    static List<string> _suffixes = new List<string> { "Jr", "Sr" };

    static void Main(string[] args)
    {
        var nameCombinations = new List<string>
        {
            "Mr and Mrs John and Mary Sue Smith Jr",
            "Mr and Mrs John and Mary Smith Jr",
            "Mr and Mrs John and Mary Sue Smith",
            "Mr and Mrs John and Mary Smith",
            "Mr and Mrs John Smith Jr",
            "Mr and Mrs John Smith",
            "John Smith",
            "John and Mary Smith",
            "John and Mary Smith Jr",
            "Mr John Campbell Smith Jr",
            "Mr John Smith",
            "Mr John Smith Jr",
        };

        foreach (var name in nameCombinations)
        {
            Console.WriteLine(name);

            var breakdown = InterperetName(name);

            Console.WriteLine("    Title(s):       {0}", string.Join(", ", breakdown.Item1));
            Console.WriteLine("    First Name(s):  {0}", string.Join(", ", breakdown.Item2));
            Console.WriteLine("    Middle Name:    {0}", breakdown.Item3);
            Console.WriteLine("    Last Name:      {0}", breakdown.Item4);
            Console.WriteLine("    Suffix:         {0}", breakdown.Item5);

            Console.WriteLine();
        }

        Console.ReadKey();
    }

    static Tuple<List<string>, List<string>, string, string, string> InterperetName(string name)
    {
        var segments = name.Split(" ".ToCharArray(), StringSplitOptions.RemoveEmptyEntries);

        List<string> titles = new List<string>(),
            firstNames = new List<string>();
        string middleName = null, lastName = null, suffix = null;
        int segment = 0;

        for (int i = 0; i < segments.Length; i++)
        {
            var s = segments[i];

            switch (segment)
            {
                case 0:
                    if (_titles.Contains(s))
                    {
                        titles.Add(s);
                        if (segments[i + 1].IsJoiner())
                        {
                            i++;
                            continue;
                        }

                        segment++;
                    }
                    else
                    {
                        segment++;
                        goto case 1;
                    }

                    break;
                case 1:
                    firstNames.Add(s);
                    if (segments[i + 1].IsJoiner())
                    {
                        i++;
                        continue;
                    }

                    segment++;

                    break;
                case 2:
                    if ((i + 1) == segments.Length)
                    {
                        segment++;
                        goto case 3;
                    }
                    else if ((i + 2) == segments.Length && _suffixes.Contains(segments[i + 1]))
                    {
                        segment++;
                        goto case 3;
                    }

                    middleName = s;
                    segment++;

                    break;
                case 3:
                    lastName = s;
                    segment++;

                    break;
                case 4:
                    if (_suffixes.Contains(s))
                    {
                        suffix = s;
                    }

                    segment++;

                    break;
            }
        }

        return new Tuple<List<string>, List<string>, string, string, string>(titles, firstNames, middleName, lastName, suffix);
    }
}

internal static class Extensions
{
    internal static bool IsJoiner(this string s)
    {
        var val = s.ToLower().Trim();
        return val == "and" || val == "&";
    }
} 
```

# c++ - 生成随机数的代码 C++

> ID：12925465
> 
> 赞同：0
> 
> 时间：2012-10-17T00:29:03.447
> 
> 标签：c++, random

我对生成具有固定分布的随机整数的函数的 C++ 实现有一些问题。为此，我实现了一个函数 urand()，它生成函数 random_integer() [它使用标准算法，我认为它在 Knuth 的 bool 之一中描述] 使用的 0 和 1（包括）之间均匀分布的双精度数。函数实现如下：

```
double urand(){
int r =rand(); ;
return ((double) r)/RAND_MAX ;
} ; // uniform random number between 0 and 1 (included);

int random_integer(std::vector<double> &p_vec) {
unsigned int n_events=p_vec.size();
double u;
double initu;
do{
    u=urand();
}while(u<=0 && u >=1);
// chose a random number uniformly distributed between 0 and 1 (excluded)
initu=u;
for (unsigned int i=0; i<n_events; i++){
    if (u<=p_vec[i]) return i;
    u-=p_vec[i];
}
cout << "Warning: get_random_event() [utilities.cpp] could not find a suitable event. Returning -1 instead.\n";
cout << "p_vec=[" ; print(p_vec); cout << "]; "; // print is just a function that displays the elements in a vector;
cout << "initu=" << initu << "; u=" << u << endl;
return -1 ;
 } 
```

现在大部分时间一切正常，但例如我收到这样的警告：

> 警告：get_random_event() [utilities.cpp] 找不到合适的事件。而是返回 -1。p_vec=[0.08;0.42;0.42;0.08[; 原位=1；u=2.77556e-17

现在有两件事我不明白： initu 应该严格小于 1（查看 while 循环的条件）。但即使假设它我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T00:34:32.453

我想你的意思是

```
}while(u<=0 || u >=1); 
```

不是

```
}while(u<=0 && u >=1); 
```

`u`不可能既小于或等于零又大于或等于一。

# mobiscroll - 如何反转滚动/点击方向？

> ID：12925471
> 
> 赞同：2
> 
> 时间：2012-10-17T00:30:01.277
> 
> 标签：mobiscroll

你能告诉我如何反转滚动的方向吗？

例如，让 mobiscroll 在 clickpick 模式下，单击底部箭头应该在日/月/年中前进。

例如，日期是 17 10 2012 (dd mm yy)。单击月份下方的箭头，应将其设置为 11，而不是 9。单击上方，则相反：将其设置为 9。

可能吗？如何？

谢谢。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T08:25:38.613

这是 android-ics 皮肤的问题，因为它使用箭头符号而不是 +/- 符号。以下css应该可以解决问题：

```
.android-ics .dwwbp {
    top: auto;
    bottom: 0;
}
.android-ics .dwwbm {
    top: 0;
    bottom: auto;
}
.android-ics .dwwbm:after {
    border-color: transparent transparent #7e7e7e transparent;
}
.android-ics .dwwbp:after {
    border-color: #7e7e7e transparent transparent transparent;
}
.android-ics .dwwbm.dwb-a:after {
    border-color: transparent transparent #319abd transparent;
}
.android-ics .dwwbp.dwb-a:after {
    border-color: #319abd transparent transparent transparent;
} 
```

# oop - 多图插入

> ID：12925480
> 
> 赞同：0
> 
> 时间：2012-10-17T00:31:37.463
> 
> 标签：oop, c++-cli, clr, multimap

我试图传递 6 个值而不是一个值。

```
//function that contains the value
siteNEVObjectdic::siteNEVObjectdic(double iLat1, double iLong1, double iLat2, double iLong2, double iLat3, double iLong3)
{
     Lat1=iLat1;
     Long1=iLong1;
     Lat2=iLat2;
     Long2=iLong2;
     Lat3=iLat3;
     Long3=iLong3;

}

multimap<double,double> dic;//initialization
dic.insert(pair<double,double>(2,gcnew siteNEVObjectdic(Lat1,Long1,Lat2,Long2,Lat3,Long3)); 
```

出于某种原因，

```
error C2665: 'std::pair<_Ty1,_Ty2>::pair' : none of the 3 overloads could convert all the argument types 
```

给我这个错误。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T00:39:23.750

您正在创建一对，但试图将 siteNEVObjectdic 对象作为第二个条目推入。尝试，

```
multimap<double,siteNEVObjectdic> dic;//initialization
dic.insert(pair<double,siteNEVObjectdic>(2,siteNEVObjectdic(Lat1,Long1,Lat2,Long2,Lat3,Long3)); 
```

# menu - How to make vertical menu with emenu extension in Yii?

> ID：12925483
> 
> 赞同：0
> 
> 时间：2012-10-17T00:31:58.163
> 
> 标签：menu, yii, css

Using the [emenu](http://www.yiiframework.com/extension/emenu/) Yii extension for a menu. The underlying project for this extension is [http://lwis.net/free-css-drop-down-menu/](http://lwis.net/free-css-drop-down-menu/) .

Right now the sub menus display in a row (which does eventually wrap to a 2nd row). I'm using the "nvidia" theme.

![menu example](../Images/94d2dc65981fd54b1effc3a013e1d48b.png)

How do I make submenus vertical? I want the items in the sub menu to stack vertically on top of one another.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T07:07:06.013

This is a css issue. The inner `<ul>` should have the style: `width : 100%` which comes from *dropdown.css*, but it is being overridden by *themes/nvidia.com/default.css* where it is specified as: `width: 170px`. So you can change that value back to `100%` by adding it in your own custom css file.

*dropdown.css*:

```
ul.dropdown ul {
  visibility: hidden;
  position: absolute;
  top: 100%;
  left: 0;
  z-index: 598;
  width: 100%;
} 
```

*themes/nvidia.com/default.css*:

```
ul.dropdown ul {
  width: 170px;
  background-color: #333;
  color: #fff;
  font-size: 11px;
  text-transform: none;
  filter: alpha(opacity=90);
  -moz-opacity: .9;
  KhtmlOpacity: .9;
  opacity: .9;
} 
```

*mystyle.css*:

```
ul.dropdown ul{
  width:100% !important;
} 
```

# linux - 从 X 列剪切到制表符分隔文件的结尾

> ID：12925484
> 
> 赞同：7
> 
> 时间：2012-10-17T00:31:58.540
> 
> 标签：linux, unix, cut

如果我有一个列数未知的文件，但我知道我想要列 X 直到最后，有没有一种简单的方法可以为此使用 cut ？

假设 X=5，

我用过， `cut -f5- filename` 但没有用。

然后我试图指定 -d'\t' 并且它也不起作用。

不知道我做错了什么。

任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-17T00:41:44.840

你非常接近，但你错过了那里的美元符号：

```
cut -d $'\t' -f5- file.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T00:40:51.783

不知道如何用 cut 来完成，但如果我必须打印从 X 到结尾的字段，我会使用 awk。假设 X = 2：

```
awk '{print $(NF - 2), $(NF - 1), $NF}' <<< "1 2 3 4 5 6" 
```

这导致：

```
4 5 6 
```

`NF`是一个 awk 保留关键字，它是字段数的计数。

# apache - 如何使用 Apache ISAPI Redirector 1.2.37 将 JBoss AS 7.1.1 与 IIS 7 连接起来

> ID：12925486
> 
> 赞同：0
> 
> 时间：2012-10-17T00:31:59.203
> 
> 标签：apache, iis-7.5, jboss7.x, isapi-redirect, jboss-web

我正在尝试将我的 Web 应用程序从 JBoss EAP 5 迁移到 AS 7.1.1，但我无法将 IIS 请求重定向到 Windows 2008 R2 X64 上的 JBoss Web (Tomcat)。

我已授权过滤器并在 IIS 中运行，并指向正确的 DLL 和属性文件，并按照我能找到的所有说明使其在 JB 7 下工作（它在 JB 5 下工作）。我错过了似乎没有人在他们的帖子和答案中涵盖的最后一步。

您在哪里进行更改以将 JBoss Web 连接到 AJP 1.3 连接器使用的端口 8009？大多数示例是指更新 JBOSS_HOME/server/default/Deploy/jbossweb.sar 中的 server.xml 文件中的连接器。

我在新的 JBOSS_HOME/standalone/deployments 文件夹下没有类似的东西。JBoss Web 在哪里配置？

感谢您提供的任何指示或示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T22:31:43.863

终于弄明白了，问题是缺少 ajp 连接器，必须在 web 子系统的standalone.xml 中定义如下：

```
<subsystem xmlns="urn:jboss:domain:web:1.1" default-virtual-server="eStar-Host" native="false">
    <connector name="http" protocol="HTTP/1.1" scheme="http" socket-binding="http"/>
    <connector name="https" protocol="HTTP/1.1" scheme="https" socket-binding="https" secure="true">
         <ssl/>
    </connector>
    <connector name="ajp13" protocol="AJP/1.3" scheme="http" socket-binding="ajp" redirect-port="8443"/>
    <virtual-server name="eStar-Host" enable-welcome-root="true">
         <alias name="localhost"/>
    </virtual-server>
</subsystem> 
```

# xcode - Xcode中的隐藏表

> ID：12925487
> 
> 赞同：0
> 
> 时间：2012-10-17T00:32:10.380
> 
> 标签：xcode, uiview, storyboard

![在此处输入图片描述][1]我在一些应用中看到了此功能。例如，Facebook 应用程序有一个按钮，当按下该按钮时，主视图会向右滑动并显示辅助视图。第二个视图有一个用户可以点击的项目列表。这个叫什么。我认为这只是视图顶部的滚动视图，但是当我运行我的应用程序时，第二个视图不会显示。

。H

```
#import <UIKit/UIKit.h>

@interface PartsViewController : UIViewController {

IBOutlet UIScrollView *mainScroll;
} 
```

.m

```
- (void)viewDidLoad
{
[mainScroll setScrollEnabled:YES];

[mainScroll setContentSize:CGSizeMake(400, 500)];
} 
```

就像我说的那样，这并没有显示第二个视图。不确定我是否需要滑动手势。我相信我需要一个按钮。

好的，这就是我如何设法创建我的滑动菜单。 ![第一视角](../Images/b3ec5b7433b20420d5e83db63620a5e7.png) ![我的幻灯片菜单](../Images/9eab731b59c262928cc0a86f3666323f.png)

.h @interface ViewController : UIViewController {

```
IBOutlet UIButton *main;
IBOutlet UIButton *parts;
IBOutlet UIButton *project;
IBOutlet UIButton *misc;
IBOutlet UIButton *close;

IBOutlet UIScrollView *ButtonScrollView;   
}

- (IBAction)showButtonScroll:(id)sender;
- (IBAction)hideButtonScroll:(id)sender;

@end 
```

.m

```
- (void)viewDidLoad {
[super viewDidLoad];

//Button Scroll View
ButtonScrollView.frame = CGRectMake(767, 75,391 , 940);

}

- (IBAction)showButtonScroll:(id)sender {

[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:0.3];
ButtonScrollView.frame = CGRectMake(377, 75, 391, 940);
[UIView commitAnimations];

}

- (IBAction)hideButtonScroll:(id)sender {

[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:0.3];
ButtonScrollView.frame = CGRectMake(767, 75, 391, 940);
[UIView commitAnimations];

} 
```

它是一个滚动视图，我可以添加我想要的任何项目并将其放置在我想要的任何位置。希望这可以帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T16:34:29.397

我的工作。这个字符串的顶部有一些图像来显示我的菜单的样子。

```
.h @interface ViewController : UIViewController {

IBOutlet UIButton *main;
IBOutlet UIButton *parts;
IBOutlet UIButton *project;
IBOutlet UIButton *misc;
IBOutlet UIButton *close;

IBOutlet UIScrollView *ButtonScrollView;   
}

- (IBAction)showButtonScroll:(id)sender;
- (IBAction)hideButtonScroll:(id)sender;

@end 
```

.m

```
- (void)viewDidLoad {
[super viewDidLoad];

//Button Scroll View
ButtonScrollView.frame = CGRectMake(767, 75,391 , 940);

}

- (IBAction)showButtonScroll:(id)sender {

[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:0.3];
ButtonScrollView.frame = CGRectMake(377, 75, 391, 940);
[UIView commitAnimations];

}

- (IBAction)hideButtonScroll:(id)sender {

[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:0.3];
ButtonScrollView.frame = CGRectMake(767, 75, 391, 940);
[UIView commitAnimations];

} 
```

# c# - 无浏览器的 OAuth 身份验证

> ID：12925488
> 
> 赞同：2
> 
> 时间：2012-10-17T00:32:18.560
> 
> 标签：c#, oauth, oauth-2.0

> **可能重复：**
> [在 .NET 中进行验证的 OAuth](https://stackoverflow.com/questions/4002847/oauth-with-verification-in-net)

我想知道是否可以在 C# 桌面应用程序中使用 OAuth 进行身份验证而无需浏览器。我不想为用户显示弹出窗口。

我找到了 2 个 oauth 库： - oauth-dot-net - DotNetOpenAuth

其中之一是否允许我这样做？

非常感谢

# sql-server - Microsoft SQL Server：让一个自动递增的列更新另一个表

> ID：12925489
> 
> 赞同：0
> 
> 时间：2012-10-17T00:32:28.633
> 
> 标签：sql-server

我有一张订单表`orderID`。我希望在订单中创建新行并自动将其添加`orderID`到`orderDetails`. 我让自动递增工作，但是每当我尝试将两者链接起来，添加级联删除时，它都会给我一个错误。

> 'order' 表已成功保存
> 'orderDetail' 表
> - 无法创建关系 'FK_orderDetail_order'。
> 如果引用列“orderDetail.orderID”是标识列，则无法创建级联外键“FK_orderDetail_order”。
> 无法创建约束。请参阅以前的错误。

这似乎是因为没有`orderID`at 行创建。如果没有这两个链接，就很难将订单与其信息联系起来。

我正在使用 Microsoft SQL 服务器 mgt studio。我是通过命令行 MySQL 学习的，而不是 SQL，所以这整个 GUI 东西让我失望（而且我有点生疏了）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T00:40:47.720

您的问题是“orderDetail.orderID”不应该是标识列（自动递增）。它应该基于 Order 表中的 orderId。您可以通过多种方式做到这一点。如果您使用存储过程，并为 orderDetail 记录单独调用数据库，请让代码首先保存订单行，并返回新创建的 OrderId 值，然后在调用中使用该值来保存 orderdetails。如果您正在对存储过程进行一次调用，该存储过程在一次调用中保存了订单头记录和所有订单详细信息记录，那么在存储过程中，插入 ordfer 记录 forst，使用 Scope_identity() 将新创建的 orderId 提取到 T -SQL 变量，

```
 Declare @orderId Integer 
  Insert Orders([Order table columns]) 
  Values([Order table column values])
  Set @orderId = scope_Identity() 
```

然后将 @orderId 中的值用于 OrderDetails 表中的所有插入...

```
 Insert OrderDetails(OrderId,  [Other OrderDetail table columns]) 
  Values(@orderId , [Other OrderDetail table column values]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T00:36:55.873

您需要`AFTER INSERT`在表上触发`order`- 在此，新给定的 ID 可用`NEW.orderID`并且现在可以轻松插入到 orderDetails 中。

只需通过命令行执行此操作。我当然愿意。

# objective-c - 存储 NSMutableArray

> ID：12925491
> 
> 赞同：0
> 
> 时间：2012-10-17T00:32:58.697
> 
> 标签：objective-c, nsmutablearray, nsvalue

我目前正在`NSMutableArray`使用`NSValue`“valueWithPointer”将一个类的实例存储在一个类中。问题是在这个类中我有另一个`NSMutableArray`，每当我将类的实例从`NSValue`其中`NSMutableArray`包含的长度为 0 转换回来时，它的所有元素都已被删除。有谁知道为什么会发生这种情况以及如何解决？

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T04:17:41.770

除非有充分的*理由*特别需要 NSValue，否则不应*以*这种方式将类实例添加到 NSMutableArray。做就是了：

```
[myMutableArray addObject:myClassInstance]; 
```

这在内存管理方面做了所有正确的事情（并避免了丑陋的指针值的东西），并且应该让您在检索对象后获得类实例的数组对象。有关如何正确使用该类的快速入门，请参阅[NSMutableArray 文档。](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/Reference/Reference.html)

# sml - sml foldl 解释/跟踪

> ID：12925492
> 
> 赞同：1
> 
> 时间：2012-10-17T00:33:07.730
> 
> 标签：sml, fold

我试图解决这个问题一段时间，但我没有成功。以 [1,2,3] 的示例输入参数为例，以下函数 (powerset) 是如何详细进行的？非常感谢您的帮助。

fun ps L = foldl (fn (x,tl) => tl @ map (fn xs => x::xs) tl) [[]] L;

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T07:16:15.200

要正确使用该函数，您必须假设输入列表中没有重复。

函数可以理解如下：

*   我们从一个累加器开始，它是一组仅由一个空集 ( `[[]]`) 组成的集合。
*   在每一步中，我们获取累加器中的每个集合，将当前元素`x`添加到它们中，并将这些结果添加到累加器中。
*   最终结果是一组所有可能的`n`元素集，即*powerset*。

为了方便表达痕迹，让我们创建一个辅助函数`f`

```
fun f (x, tl) = tl @ map (fn xs => x::xs) tl 
```

现在我们有一个跟踪`[1, 2, 3]`：

```
 ps [1, 2, 3]

~> foldl f [[]] [1, 2, 3] (* Step 1 *)
~> foldl f (f (1, [[]])) [2, 3]
~> foldl f ([[]] @ map (fn xs => 1::xs) [[]]) [2, 3]

~> foldl f [[], [1]] [2, 3] (* Step 2 *)
~> foldl f (f (2, [[], [1]])) [3]
~> foldl f ([[], [1]] @ map (fn xs => 2::xs) [[], [1]]) [3]

~> foldl f [[], [1], [2], [2, 1]] [3] (* Step 3 *)
~> foldl f (f (3, [[], [1], [2], [2, 1]])) []
~> foldl f ([[], [1], [2], [2, 1]] @ map (fn xs => 3::xs) [[], [1], [2], [2, 1]]) []

~> foldl f [[], [1], [2], [2, 1], [3], [3, 1], [3, 2], [3, 2, 1]] [] (* Step 4 *)

~> [[], [1], [2], [2, 1], [3], [3, 1], [3, 2], [3, 2, 1]] (* Final result *) 
```

# ios - iOS 从捆绑包中的图像访问日期

> ID：12925494
> 
> 赞同：1
> 
> 时间：2012-10-17T00:33:12.550
> 
> 标签：ios, xcode, date, nsdate, resourcebundle

我的应用程序是一个图像加载器，可将图像从捆绑包复制到相机胶卷。不幸的是，我能从图像中得到的唯一日期是现在。我尝试将图像复制到我的应用程序以及使用参考。两者都导致相同的日期，即现在。

目前我正在使用：

```
NSMutableDictionary *EXIFDictionary = [[metadataAsMutable objectForKey:(NSString *)kCGImagePropertyExifDictionary]mutableCopy];

[EXIFDictionary setObject:[NSDate date] forKey:(NSString*)kCGImagePropertyExifDateTimeOriginal];

NSLog(@"Date %@", [EXIFDictionary valueForKey:(NSString*)kCGImagePropertyExifDateTimeOriginal]); 
```

有什么方法可以从捆绑包中的资产中获取实际的资产创建日期？

提前致谢，

乔

# linux - ack 忽略与路径匹配的文件以及正路径匹配

> ID：12925496
> 
> 赞同：1
> 
> 时间：2012-10-17T00:33:40.317
> 
> 标签：linux, bash, shell, ack

我想做一个搜索所有 .js 和 .php 文件的命令，但忽略其中包含“Thirdparty/”和“data.js”的路径。

```
ack -il -G '(\.js|\.php)' 'my search string' 
```

我尝试了 -v 但它似乎反转了所有 -G 运算符，而不仅仅是前面的运算符：

```
ack -il -G '(\.js|\.php)' -G '(Thirdparty|data\.js)' -v 'my search string' 
```

我想忽略 ./Thirdparty 路径和 ./data.js 路径，但匹配所有 .js 和 .php 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T01:47:56.780

-v 反转模式（在这种情况下为“我的搜索字符串”）而不是文件名正则表达式。对于 ack 的更新版本， --invert-file-match 选项可以满足您的要求。以下应该适用于 ack 1.96。

```
ack -il -G '(\.js|\.php)' --invert-file-match -G '(Thirdparty|data\.js)' 
'my search string' 
```

# angularjs - Angularjs table cell iteration

> ID：12925505
> 
> 赞同：5
> 
> 时间：2012-10-17T00:34:58.230
> 
> 标签：angularjs

I have a feeling I am doing something wrong, but this behavior seems odd. I dynamically create a table based on data in the controller. When I enter a character one of the cells in the table it immediately changes focus to the next cell and adds the character there as well.

I have very simple example that reproduces the issue in jsfiddle.

[http://jsfiddle.net/rgaskill/Aksec/15/](http://jsfiddle.net/rgaskill/Aksec/15/)

```
 <div ng-app="miniapp">
<div ng-controller="Matrix">
    <h1>Enter a value in the fist cell.</h1>
   <table>
<thead>
    <tr>
        <th>Row Name</th>
        <th>0</th>
        <th>1</th>
        <th>2</th>
        <th>3</th>
        <th>4</th>
        <th>5</th>
    </tr>
</thead>
<tbody>
    <tr ng-repeat="(row, values) in valueMap">
        <td>{{row}}</td>
        <td ng-repeat="(col, val) in values" ><input type="text" ng-model="valueMap[row][col]"></input></td>
    </tr>

</tbody>
</table>                      
</div>    
 </div>​ 
```

* * *

```
 var app = angular.module('miniapp', []);

 function Matrix($scope) {
$scope.valueMap = {
    aRow: {
        '0': '',
        '1': '',
        '2': '',
        '3': '',
        '4': '',
        '5': ''
    }
   };
 }​ 
```

What is causing this strange behavior?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T02:29:26.197

Ok, I found the issue. This post added some clarity.

[https://groups.google.com/forum/#!topic/angular/VD77QR1J6uQ/discussion](https://groups.google.com/forum/#!topic/angular/VD77QR1J6uQ/discussion)

> when the ngRepeat unrolls it copies the primitive into a local scope under item. Then ng-model binds to it. When you update the model you are updating a copy, not the original. but when you update the original it couses the repeater to realized that something changed in the items array and it then recreates the ng-model, which means ti re-copies it over to items. Hence the strange behavior but it is expected.
> 
> Short answer: never iterate and input bind to primitives in ngRepeat, as you are making a copy of value rather the reference and any updates are written to local scope rather then the original location.

and I updated the fiddle which works now

[http://jsfiddle.net/rgaskill/Aksec/16/](http://jsfiddle.net/rgaskill/Aksec/16/)

# opencv - OpenCV在使用前需要编译吗？

> ID：12925511
> 
> 赞同：0
> 
> 时间：2012-10-17T00:35:20.957
> 
> 标签：opencv

我正在尝试在 Windows 上安装 OpenCV。以下是我的安装方式：

1.  从 sourceforge 下载 OpenCV 2.4.2.exe。
2.  取消存档。
3.  打开 Eclipse CDT。
4.  将 C:/opencv/include/opencv 添加到“包含”
5.  将 opencv_highgui、opencv_core、opencv_ml... 添加到“库”
6.  创建一个小项目并编译它。
7.  编译器报错“opencv2/core/core_c.h：No such file or directory”...

我记得当我在 Ubuntu 上安装 OpenCV 时，我确实编译了这个项目（花了很多时间）。我必须在 Windows 上做同样的事情吗？还是有其他原因导致此错误？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T01:18:14.493

您应该将正确的目录添加到包含中。

既然你添加了`C:/opencv/include/opencv`，编译器就没有办法找到了`C:/opencv/include/opencv2/core/core.h`。

我相信您也应该输入`C:/opencv/include/`包含目录。

# c - 警告：来自不兼容的指针类型缓冲区的分配

> ID：12925513
> 
> 赞同：3
> 
> 时间：2012-10-17T00:35:30.723
> 
> 标签：c, winapi, buffer

```
for(i = 0; i < sizeof(buff); i++) if(buff[i] = ' ') ++num;
char **parts[num];
char *p;
p = strtok(buff, " ");
int j = 0;
while(p != NULL)
{
         parts[j] = p;
         j++;
         p = strtok(NULL, " ");
} 
```

在编译过程中出现了警告：

> 来自不兼容指针类型的赋值，其中parts[j] = p 是。

我能做些什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T00:46:17.747

我假设您想将单个令牌存储在一个数组中。正如当前声明的那样，`parts`是一个指向指针的指针数组。这不是您想要的 C 字符串数组 - 您需要删除一个星号：

```
char *parts[num]; // This requires at least C99 
```

请注意，`num`需要从 开始`1`，而不是从开始`0`，因为您将获得的标记数比您将在字符串中找到的空格数大一。

一旦你这样做了，你的程序仍然需要对它处理结果的方式进行一些修复`strtok`：你不应该*存储*结果以供下次调用之后使用`strtok`，因为这些结果变得无效。`parts`相反，您应该在将令牌存储到数组之前复制它们：

```
parts[j] = strdup(p); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T01:02:06.433

您在实际代码中使用这一行吗？

```
for(i = 0; i < sizeof(buff); i++) if(buff[i] = ' ') ++num; 
```

您正在将整个缓冲区设置为空格。并设置`num`为`sizeof(buff)`

因此，换句话说，这可能无法将您定位在您想要的位置：

```
 char **parts[num]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T00:38:08.367

```
char *parts[num]; 
```

您可以声明一个指向上面声明的指针数组的指针，如下所示：

```
char *(*ptr)[num] = &parts; 
```

但是您不需要这种额外的间接级别来存储字符串数组

# javascript - Ajax 更新程序中的 Javascript 变量

> ID：12925515
> 
> 赞同：1
> 
> 时间：2012-10-17T00:36:33.750
> 
> 标签：javascript, ajax

我正在尝试使用以下代码将 javascript 变量 'sortlist' 发送到 Ajax 函数：

```
<div id = "output">Drag to sort</div>
<script type="text/javascript">

var session = <? echo $sesh; ?>;
var track   = <? echo $trk; ?>;

var sortlist = "sortlist_" + session + "_" + track; 

Sortable.create(sortlist,{
    onUpdate:function(){
        new Ajax.Updater('output','program_sort.php',
           {onComplete:function(request){}, 
               parameters:Sortable.serialize(sortlist), 
               evalScripts:true, 
               asynchronous:true}
        )
    }
})
</script> 
```

该变量似乎已成功传递给 Sortable.create （因为我可以对网页上的框进行排序），但它似乎没有传递给 Ajax.updater 中的 Sortable.serialize （因为它不再将排序顺序值写入数据库）。

当我在 Sortable.serialize 中使用文字值时，此代码有效，例如

```
parameters:Sortable.serialize('sortlist_1_1'), 
```

我尝试使用 sortlist 作为变量，在 Sortable.serialize 中使用和不使用单引号和双引号均无济于事。成功传递此变量信息所需的格式是什么？

作为参考，我的 AJAX/javascript 经验大约是 1（1-10 级）；我的 PHP/MySQL 经验大约是 7（1-10 级）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T00:45:03.850

尝试这个：

```
Sortable.create(sortlist,{
    onUpdate:function(sortlist){return function(){
        new Ajax.Updater('output','program_sort.php',
           {onComplete:function(request){}, 
               parameters:Sortable.serialize(sortlist), 
               evalScripts:true, 
               asynchronous:true}
        )
    };}(sortlist);
}) 
```

那么让我们更进一步：

```
function(sortlist){
Sortable.create(sortlist,{
    onUpdate:function(){
        new Ajax.Updater('output','program_sort.php',
           {onComplete:function(request){}, 
               parameters:Sortable.serialize(sortlist), 
               evalScripts:true, 
               asynchronous:true}
        )
    }
});
}(sortlist); 
```

# python - 在 python 中使用 re.sub() 后删除单引号

> ID：12925517
> 
> 赞同：0
> 
> 时间：2012-10-17T00:36:48.453
> 
> 标签：python, regex

用字符“^”替换字符串中的所有单词字符后，使用`re.sub("\w", "^" , stringorphrase)`I'm left with ：

```
>>> '^^^ ^^ ^^^^' 
```

有什么办法可以去掉单引号，让它看起来更干净？

```
>>> ^^^ ^^ ^^^^ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T00:42:08.077

您确定这不是它在交互式提示或其他内容中的显示方式（并且您的字符串中实际上没有apost）吗？

如果`'`它实际上是字符串的一部分，并且是第一个/最后一个，那么：

```
string = string.strip("'") 
```

或者：

```
string = string[1:-1] # lop ending characters off 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-17T00:41:14.350

使用`print`语句。引号实际上不是字符串的一部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T00:39:53.547

要删除所有出现的单引号：

```
mystr = some_string_with_single_quotes
answer = mystr.replace("'", '') 
```

仅在字符串末尾删除单引号：

```
mystr = some_string_with_single_quotes
answer = mystr.strip("'") 
```

希望这可以帮助

# java - 如何从 JOptionpane.showInput 中拆分字符串的值

> ID：12925519
> 
> 赞同：0
> 
> 时间：2012-10-17T00:36:56.253
> 
> 标签：java, time, split, joptionpane

我的分配需要从 JOptionPane 提示消息“输入时间为 hh:mm:ss” 从该输入中，如何将值分配给我的变量 hh、mm 和 ss？

我尝试将它拆分为一个字符串，但它不会工作，因为它还没有被初始化。请帮忙？我对java真的很陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T01:01:34.610

```
 String hh, mm, ss;
    String time = "12:01:54";
    String[] tmp = time.split(":");

    hh = tmp[0];
    mm = tmp[1];
    ss = tmp[2];

    System.out.println("Hours: " + hh + " Minutes: " + mm + " Seconds: " + ss); 
```

假设您的输入是一个字符串，并且您希望将您的值存储为字符串。

# c# - avalondock 覆盖 contextmenu - 找不到类型 ContextMenuElement

> ID：12925520
> 
> 赞同：1
> 
> 时间：2012-10-17T00:37:13.560
> 
> 标签：c#, wpf, contextmenu, avalondock

[这是avalon 码头和单独窗口](https://stackoverflow.com/questions/12909978/user-control-in-avalon-dock-and-separate-window)中的用户控制的后续问题- 我的窗口打开得很好，我认为这将是困难的部分；但我很难更改上下文菜单。

我是 WPF 和 avalondock 的新手，它可能很简单，但我很想念它。

上一个问题以[http://avalondock.codeplex.com/SourceControl/changeset/view/96370#1749982](http://avalondock.codeplex.com/SourceControl/changeset/view/96370#1749982)为例。我收到“未找到 ContextMenuElement”错误，所以选择了更简单的方法：

[http://avalondock.codeplex.com/discussions/246250](http://avalondock.codeplex.com/discussions/246250) - 这是关于用法语文本替换但我可以适应它。我无法让它工作，然后尝试逐字复制粘贴，但仍然有同样的错误：

```
Cannot find the type ContextMenuElement. Note that type names are case sensitive 
```

我在资源字典中得到这个，它指向菜单项的命令部分，例如：

```
 <MenuItem Header="Fermer"

                  Command="avalonDock:DocumentPaneCommands.CloseThis" /> 
```

我错过了什么？

编辑：资源字典摘录：

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                xmlns:avalonDock="clr-namespace:AvalonDock;assembly=AvalonDock">

<!--Menu contextuel des onglets de l'avalonDock-->
<ContextMenu x:Key="{ComponentResourceKey TypeInTargetAssembly={x:Type avalonDock:DockingManager}, ResourceId={x:Static avalonDock:ContextMenuElement.DocumentPane}}">
    <MenuItem Header="Fermer"
                  Command="avalonDock:DocumentPaneCommands.CloseThis" />
    <MenuItem Header="Fermer tout sauf cet élément"
                        Command="{Binding Path=DataContext.FermerCommand, RelativeSource={RelativeSource AncestorType={x:Type UserControl}}}"/>

    <Separator /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T09:10:52.097

您尝试调整的代码看起来像是 1.3 版的，您可能正在使用新的 2.0 版。您更改 DockingManager 行为的方式发生了很大变化，现在比以往任何时候都更简单。

这是一个小示例，用于替换 DocumentPane 中文档的 ContextMenu（在 v2.0.1320 上测试）：

```
<ad:DockingManager>
    <ad:DockingManager.DocumentContextMenu>
        <ContextMenu>
            <MenuItem Header="DEMO"/>
        </ContextMenu>
    </ad:DockingManager.DocumentContextMenu>
</ad:DockingManager> 
```

在主题中，您可以看到这是如何使用样式完成的

```
<Style x:Key="{x:Type avalonDock:DockingManager}" TargetType="{x:Type avalonDock:DockingManager}">
    <Setter Property="DocumentContextMenu" Value="{StaticResource AvalonDock_ThemeVS2010_DocumentContextMenu}"/>
... 
```

我仍然建议从他们的网站复制主题项目并为您的应用程序构建自己的主题。这样，您就可以将所有改编内容整齐地存储在可重用的 dll 中。

# android - findViewById 为来自另一个片段的视图返回 null -- 视图的 id 为 -1

> ID：12925521
> 
> 赞同：2
> 
> 时间：2012-10-17T00:37:15.343
> 
> 标签：android, fragment, findviewbyid

**编辑：**愚蠢的用户错误，我的 XML 格式错误。

--

我有一个包含三个片段的活动。在一个片段的 onResume() 中，我试图使用活动从另一个片段中获取视图。[findViewById()](http://developer.android.com/reference/android/app/Activity.html#findViewById%28int%29)，但该方法为来自一个特定片段的任何视图返回 null 。其他两个片段中的任何一个中的视图都很好。

[如果我使用getRootView()](http://developer.android.com/reference/android/view/View.html#getRootView%28%29)和以下快速破解的代码转储整个视图树，我会看到有问题的视图确实是视图树的一部分，但**id 为 -1**。

```
private void dumpAllViews(View v, int indent)
{
    // Java doesn't support variable width format code -- "%*c"
    // Fake it with string concatenation.  Lame!
    Log.d(tag, String.format("%" + (indent * 4 + 1) + "c%s %d", ' ', v.toString(), v.getId()));
    if (v instanceof ViewGroup)
    {
        ViewGroup vg = (ViewGroup)v;
        for (int i = 0; i < vg.getChildCount(); i++)
        {
            dumpAllViews(vg.getChildAt(i), indent + 1);
        }
    }
} 
```

为什么该片段中的所有视图都有 id -1？

编辑：对于好奇的，这是被丢弃的视图树。有问题的视图是第二个块内的视图，ID 为 2131165209 的视图。

```
com.android.internal.policy.impl.PhoneWindow$DecorView@4057e118 -1
    android.widget.FrameLayout@4057e4f0 16908290
        android.widget.RelativeLayout@4057eee8 -1
            android.widget.FrameLayout@4057f2e0 2131165208
                android.support.v4.app.NoSaveStateFrameLayout@40594dd0 -1
                    android.widget.RelativeLayout@405933e0 -1
                        android.widget.ImageView@405937d0 -1
                        android.widget.Button@40593b30 2131165223
                        android.widget.Button@40594260 2131165224
                        android.widget.TextView@40594820 -1
            android.widget.FrameLayout@4057f5b0 2131165209
                android.support.v4.app.NoSaveStateFrameLayout@405972e0 -1
                    android.widget.RelativeLayout@40595588 -1
                        android.widget.ImageView@40595978 -1
                        android.widget.Button@40595cd8 -1
                        android.widget.Button@40596448 -1
                        android.widget.Button@40596b78 -1
            android.widget.TextView@4057f8c8 2131165210
            android.widget.FrameLayout@405805a8 2131165211
                android.support.v4.app.NoSaveStateFrameLayout@40592c20 -1
                    android.widget.RelativeLayout@4058e1c0 -1
                        android.view.View@4058e5a8 2131165213
                        com.mycompany.MyCustomWidget@4058e7b8 -1
                        android.widget.TextView@40592158 2131165210
                        android.widget.TextView@405926c0 2131165259
            android.widget.RelativeLayout@40580878 2131165212
                android.view.View@40580cc8 2131165213
                android.widget.FrameLayout@40580e50 2131165214
                android.widget.FrameLayout@40581120 2131165215
            android.widget.LinearLayout@40581440 2131165216
                android.widget.FrameLayout@405816c8 2131165217
                android.widget.FrameLayout@40581930 2131165218
            android.widget.RelativeLayout@40581d00 -1
                android.widget.Button@40582878 2131165261
                android.widget.LinearLayout@40583ac0 -1
                    android.widget.Button@40583d48 2131165262
                    android.widget.Button@405846e0 2131165263
                    android.widget.Button@40585078 2131165264
                    android.widget.Button@40585a10 2131165265
                android.widget.LinearLayout@405863a8 -1
                    android.widget.Button@40586630 2131165266
                    android.widget.Button@40586e50 2131165267
                    android.widget.Button@40587670 2131165268
                    android.widget.Button@40587e90 2131165269 
```

编辑 2：这是所有相关的 XML。首先是“片段容器”布局，然后是各个片段的布局。“中心，减半”注释之后的所有内容此时都未使用，但为了完整性而包含在内。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >

    <!--
    Total contents:
    Top bar
    Bottom bar
    Middle area (full screen)
    Middle area (half/half, tablet only)
    Middle area (40/60, tablet only)
    -->

    <!-- Note to self:
    Why are the placeholder FrameLayouts and not just Views?
    Once I get this bootstrapped I should try switching them
    to Views and see if that works just as well.
    -->

    <!-- Top -->
    <FrameLayout
        android:id="@+id/top_fragment"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        />

    <!-- Bottom -->
    <FrameLayout
        android:id="@+id/bottom_fragment"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        />

    <TextView
        android:text="This space unintentionally left blank"
        android:textColor="#FFF"
        android:textSize="18sp"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content" 
        />

    <!-- Center, full -->
    <FrameLayout
        android:id="@+id/center_fragment_full"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_below="@id/top_fragment"
        android:layout_above="@id/bottom_fragment"
        />

    <!-- Center, halved -->
    <RelativeLayout
        android:id="@+id/center_fragment_half_container"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_below="@id/top_fragment"
        android:layout_above="@id/bottom_fragment"
        >

        <View android:id="@+id/keystone"
            android:layout_centerHorizontal="true"
            android:layout_centerVertical="true"
            android:layout_height="0dip"
            android:layout_width="0dip"
            android:visibility="invisible"
            />

        <FrameLayout 
            android:id="@+id/center_fragment_half_left"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_toLeftOf="@id/keystone"
            />

        <FrameLayout 
            android:id="@+id/center_fragment_half_right"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_toRightOf="@id/keystone"
            />

    </RelativeLayout>

    <!-- Center, uneven split (roughly 40/60) -->
    <LinearLayout
        android:id="@+id/center_fragment_uneven_split_container"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_below="@id/top_fragment"
        android:layout_above="@id/bottom_fragment"
        android:orientation="horizontal"
        >

        <FrameLayout 
            android:id="@+id/center_fragment_uneven_split_left"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_toLeftOf="@id/keystone"
            android:layout_weight="2"
            />

        <FrameLayout 
            android:id="@+id/center_fragment_uneven_split_right"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_toRightOf="@id/keystone"
            android:layout_weight="3"
            />

    </LinearLayout>

    <include layout="@layout/slide_out_menus"/>

</RelativeLayout> 
```

这是代替顶部栏的布局；它的 ID 很好：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    >
    <ImageView
        android:layout_height="@dimen/bars"
        android:layout_width="fill_parent"
        android:background="@drawable/rectangle_1"
        android:layout_alignParentTop="true"
        />
    <Button android:id="@+id/button3"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_alignParentLeft="true"
        android:background="@drawable/button_3"
        android:layout_marginTop="5dip"
        android:layout_marginLeft="4dip"
        />
    <Button android:id="@+id/button4"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_alignParentRight="true"
        android:background="@drawable/button_4"
        android:layout_marginTop="5dip"
        android:layout_marginRight="4dip"
        />
    <TextView
        android:layout_height="wrap_content"
        android:layout_width="fill_parent"
        android:background="@drawable/top_bar1"
        android:text="Title text"
        style="@style/style_2"
        android:gravity="center_horizontal|center_vertical"
        android:layout_marginTop="4dip"
        android:layout_marginLeft="4dip"
        android:layout_marginRight="4dip"
        android:layout_toRightOf="@id/button3"
        android:layout_toLeftOf="@id/button4"
        android:layout_alignParentTop="true"
        android:scaleType="fitXY"
        />
</RelativeLayout> 
```

这是在底部栏中替换的布局；它的 ID 坏了：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    >

    <ImageView
        android:layout_height="@dimen/bars"
        android:layout_width="fill_parent"
        android:background="@drawable/rectangle_1"
        />
    <Button android="@+id/button1" 
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:background="@drawable/button_1"
        android:layout_alignParentLeft="true"
        android:layout_marginLeft="3dip"
        android:layout_marginTop="5dip"
        style="@style/style_1"
        android:text="foobar"
        />
    <Button android="@+id/button2"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:background="@drawable/button_2"
        android:layout_alignParentRight="true"
        android:layout_marginRight="3dip"
        android:layout_marginTop="5dip"
        style="@style/style_1"
        android:text="@string/menu"
        />
    <Button android="@+id/button5"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:background="@drawable/button_5"
        android:layout_centerHorizontal="true"
        style="@style/style_1"
        android:textSize="14dip"
        android:layout_marginTop="7dip"
        />
</RelativeLayout> 
```

最后，这是我目前在中间替换的布局；它的ID很好。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >

    <View android:id="@+id/keystone"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:layout_height="0dip"
        android:layout_width="0dip"
        android:visibility="invisible"
        />

    <com.mycompany.MyCustomWidget
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content" 
        android:layout_centerInParent="true"
        />

    <TextView
        android:id="@+id/current_location_label"
        android:text="Current Location"
        android:textColor="#FFF"
        android:textSize="13sp"
        android:layout_centerHorizontal="true"
        android:layout_above="@id/keystone"
        android:paddingBottom="5dp"
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content" 
        />

    <TextView
        android:id="@+id/current_location_data"
        android:text="City\nSTATE"
        android:textColor="#ACF"
        android:textSize="22sp"
        android:gravity="center"
        android:layout_centerHorizontal="true"
        android:layout_below="@id/keystone"
        android:paddingTop="0dp"
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content" 
        />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T20:01:24.700

我发现了这个问题，正如预期的那样，这是一个非常愚蠢的用户错误。

```
android="@+id/button2" 
```

本来应该

```
android:id="@+id/button2" 
```

哎呀！谢谢大家，很抱歉这个愚蠢的问题。

# php - 在php中覆盖函数的正确方法

> ID：12925530
> 
> 赞同：0
> 
> 时间：2012-10-17T00:39:16.357
> 
> 标签：php, oop

> **可能重复：**
> [如何从继承的方法中调用 PHP 父方法？](https://stackoverflow.com/questions/8265351/how-do-i-call-php-parent-methods-from-within-an-inherited-method)

我正在尝试通过以下方式覆盖 php 中的函数

**主班**

```
<?php    
class Curl{
   /* constructor */
   public function Curl(){}

   /* login */
   public function login($url, $post_fields){
      ...
   }
}
?> 
```

**子类**

```
<?php
require_once("/var/www/api/curl/curl.php");

class Curl_B extends Curl{
   /* constructor */
   public function Curl_B(){}

   /* login */
   public function login(){
      $this->login(
        'https://xxx.co.uk/login.php', 
        'email=xxx&pass=xxx'
      );
   }
}

$curl = new Curl_B();
$curl->login();

?> 
```

问题是，如果子类具有同名的函数，我似乎无法正确调用父函数 login()。

我知道您不能拥有共享相同名称的函数，那么解决我的问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T00:41:48.393

以相同的名称调用父类的函数：

```
class Curl_B extends Curl{
   /* constructor */
   public function Curl_B(){}

   /* login */
   public function login(){
      parent::login(
        'https://xxx.co.uk/login.php', 
        'email=xxx&pass=xxx'
      );
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T00:42:03.063

[使用父关键字 Insted](http://php.net/manual/en/keyword.parent.php)您应该更改：

```
$this->login( 
```

到

```
parent::login( 
```

[PHP文档](http://php.net/manual/en/keyword.parent.php)

> 不要在代码中使用基类的字面名称，而应该使用特殊名称 parent，它指的是类的扩展声明中给出的基类的名称。

# r - 二次样条

> ID：12925533
> 
> 赞同：4
> 
> 时间：2012-10-17T00:40:22.793
> 
> 标签：r

有没有办法将二次样条（而不是三次样条）调整到某些数据？

我有这些数据，我似乎没有在 R 中找到合适的函数来执行此操作。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-17T15:52:37.530

稍微扩展一下上面的评论，您可以使用 B 样条基础（在 function 中实现`splines::bs()`），设置`degree=2`而不是默认值`degree=3`：

```
library(splines)

## Some example data
set.seed(1)
x <- 1:10
y <- rnorm(10)

## Fit a couple of quadratic splines with different degrees of freedom
f1 <- lm(y ~ bs(x, degree = 2))  # Defaults to 2 - 1 = 1 degree of freedom
f9 <- lm(y ~ bs(x, degree = 2, df=9))

## Plot the splines
x0 <- seq(1, 10, by = 0.1)
plot(x, y, pch = 16)
lines(x0, predict(f1, data.frame(x = x0)), col = "blue")
lines(x0, predict(f9, data.frame(x = x0)), col = "red") 
```

![在此处输入图像描述](../Images/31e55f4e9dd22b851e6d5898cde9bbdc.png)

# multithreading - 尝试学习_beginthreadex并传递参数

> ID：12925539
> 
> 赞同：1
> 
> 时间：2012-10-17T00:40:57.103
> 
> 标签：multithreading, parameters

复制一些用于工作增强线程的数据，我在下面实现了以下代码。我收到错误 C:\dev\default threads_threads.cpp|18|error: invalid conversion from 'void ( *)(void* )' to 'unsigned int ( **attribute** (( **stdcall** )) *)(void* )' [-fpermissive]|

但是...评论的行是推荐的，评论解释了我得到的错误。

事实证明，强烈推荐 _beginThreadEx，但在网络上的文档记录很差（如教程中）

```
#include <iostream>
#include <process.h>

void myThread(void *data)
{
    //C:\dev\default threads\_threads.cpp|6|error: invalid conversion from 'int*' to 'int' [-fpermissive]|
    //int x = static_cast<int*>(data);

    int *x = (int*)data;

    std::cout << "Hellow World! " << x;
}

int main()
{

    int x = 10;
    _beginthreadex(NULL, 0, myThread, &x, 0, NULL);
    while(true);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T00:45:23.943

无论如何，您必须将 x 声明为指针：

```
int *x = static_cast<int*>(data); 
```

两者`_beginthread`都`_beginthreadex`记录在这里：http: [//msdn.microsoft.com/en-us/library/kdzttdcb (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/kdzttdcb(v=vs.80).aspx)

根据 _beginthreadex() 的声明，您的 myThread() 函数应声明如下：

```
unsigned __stdcall myThread(void *data); 
```

# forms - Symfony：将对象从另一个模块传递给表单

> ID：12925544
> 
> 赞同：0
> 
> 时间：2012-10-17T00:41:28.760
> 
> 标签：forms, variables, symfony-1.4, models

我有一个 symfony 项目，我有一个模型，在这个例子中我将命名为 Boat。从船的 showSuccess 页面，我想链接到另一个模型的表单页面。在本例中，我们将其命名为 Ticket。当他们单击链接时，我希望将 Boat 对象传递到 Ticket 表单，因为我必须在 Ticket 表单页面 (newSuccess.php) 上显示该特定 Boat 的一些字段（标题、价格等）。

我想我的问题是，如何将对象（作为变量）传递给另一个模型的“新”表单页面。我到处寻找，似乎找不到适合我的答案。谢谢！

更新：

这是我尝试过的一些代码：

**路由.yml**

```
ticket_new_car:
  url:     /ticket/:category/:iditem
  class:   sfDoctrineRoute
  options: { model: car, type: object }
  param:   { module: ticket, action: new }
  requirements:
    id: \d+
    sf_method: [get] 
```

**汽车页面上的链接**

```
<a href="<?php echo url_for('ticket_new_car', $car)?>" > Test </a> 
```

**动作类.php**

```
public function executeNew(sfWebRequest $request)
  {
    $this->item = $this->getRoute()->getObject();
    $this->forward404Unless($this->item);
    $this->form = new TicketForm();
  } 
```

**_form.php**

```
<?php echo $item->getTitle() ?> 
```

我得到“未定义的变量：项目”。除了“slug”部分之外，我在教程中做了所有的事情，因为我没有 slugging 我的 URL。我可能做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T10:41:43.213

看看这个页面

[http://www.symfony-project.org/jobeet/1_4/Doctrine/en/05#chapter_05_object_route_class](http://www.symfony-project.org/jobeet/1_4/Doctrine/en/05#chapter_05_object_route_class)

并向下滚动到对象路由类

# google-maps - 在 Google Maps API v3 中使用 MarkerClusterer 限制缩放级别时出错

> ID：12925546
> 
> 赞同：1
> 
> 时间：2012-10-17T00:41:45.740
> 
> 标签：google-maps, google-maps-api-3, markerclusterer

我正在使用此处找到的代码： Integrating Spiderfier JS into markerClusterer V3 以在单击 MarkerCluster 创建包含相同位置的点的集群时[以完全相同的 long/lat 分解多标记以限制缩放级别。](https://stackoverflow.com/questions/9726920/)

现场示例在这里： http: [//www.adultlearnersfestival.com/newsite/yourarea/map.html](http://www.adultlearnersfestival.com/newsite/yourarea/map.html)

但是，我在 Firebug 中遇到错误：

```
Error: TypeError: markers is undefined 
```

并且无法弄清楚是什么原因造成的。具体代码为：

```
var minClusterZoom = 14;
mc.setMaxZoom(minClusterZoom);
gm.event.addListener(mc, 'clusterclick', function(cluster) {
  map.fitBounds(cluster.getBounds()); // Fit the bounds of the cluster clicked on
  if( map.getZoom() > minClusterZoom+1 ) // If zoomed in past 15 (first level without clustering), zoom out to 15
  map.setZoom(minClusterZoom+1);
}); 
```

非常感谢任何帮助。- 汤姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:37:58.337

我在这里建议了一种不同的方法： [markerClusterer on click zoom](https://stackoverflow.com/questions/5710568/markerclusterer-on-click-zoom)并编辑了 MarkerClusterer 源，如下所示

由此

```
/**
 * Triggers the clusterclick event and zoom's if the option is set.
 */
ClusterIcon.prototype.triggerClusterClick = function() {
  var markerClusterer = this.cluster_.getMarkerClusterer();

  // Trigger the clusterclick event.
  google.maps.event.trigger(markerClusterer, 'clusterclick', this.cluster_);

  if (markerClusterer.isZoomOnClick()) {
    // Zoom into the cluster.
    this.map_.fitBounds(this.cluster_.getBounds());
  }
}; 
```

对此

```
/**
 * Triggers the clusterclick event and zoom's if the option is set.
 */
ClusterIcon.prototype.triggerClusterClick = function() {
  var markerClusterer = this.cluster_.getMarkerClusterer();

  // Trigger the clusterclick event.
  google.maps.event.trigger(markerClusterer, 'clusterclick', this.cluster_);

  if (markerClusterer.isZoomOnClick()) {
    // Zoom into the cluster.
    this.map_.fitBounds(this.cluster_.getBounds());

    // modified zoom in function
        if( this.map_.getZoom() > markerClusterer.getMaxZoom()+1 )
          this.map_.setZoom(markerClusterer.getMaxZoom()+1);
  }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T01:15:26.697

在我看来，MarkerClusterer 中有一个错误。在 for 循环中的这个函数内部，标记是未定义的，这意味着 this.getMarkers() 返回未定义，在我看来这是错误的：

```
/**
 * Returns the bounds of the cluster.
 *
 * @return {google.maps.LatLngBounds} the cluster bounds.
 */
Cluster.prototype.getBounds = function() {
  var bounds = new google.maps.LatLngBounds(this.center_, this.center_);
  var markers = this.getMarkers();
  for (var i = 0, marker; marker = markers[i]; i++) {
    bounds.extend(marker.getPosition());
  }
  return bounds;
}; 
```

可能应该类似于（未测试）：

```
/**
 * Returns the bounds of the cluster.
 *
 * @return {google.maps.LatLngBounds} the cluster bounds.
 */
Cluster.prototype.getBounds = function() {
  var bounds = new google.maps.LatLngBounds(this.center_, this.center_);
  var markers = this.getMarkers();
  if (markers && markers.length) 
  {
    for (var i = 0; i < markers.length; i++) {
      bounds.extend(markers[i].getPosition());
    }
  } 
  return bounds;
}; 
```

[使用 MarkerClustererPlus 工作](http://www.geocodezip.com/v3_MarkerClustererPlus_Spiderifier_mapA.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-13T16:57:24.897

我解决了改变这个的问题：

```
Cluster.prototype.getBounds = function() {
  var bounds = new google.maps.LatLngBounds(this.center_, this.center_);
  var markers = this.getMarkers();
  for (var i = 0, marker; marker = markers[i]; i++) {
    bounds.extend(marker.getPosition());
  }
  return bounds;
}; 
```

对此：

```
Cluster.prototype.getBounds = function() {
  var bounds = new google.maps.LatLngBounds(this.center_, this.center_);
  var markers = this.getMarkers();
  var minZoom =10 
  mc.setMaxZoom(minZoom);//The maximum zoom level that a marker can be part of a cluster  
  for (var i = 0; i < markers.length; i++) {
    bounds.extend(marker.getPosition());//Extends this bounds to contain the given point.
  }  
  if( map.getZoom() > minZoom+1 ){// If zoomed in past 11, the first level without clustering, zoom out to 11.
  map.setZoom(minZoom+1);
  } 
  return bounds;

}; 
```

# java - 如何缩短采用相似代码的不同场景的算法？

> ID：12925551
> 
> 赞同：2
> 
> 时间：2012-10-17T00:42:45.303
> 
> 标签：java, algorithm

我开发了一个程序来解决基本物理学中的运动学方程。要解决这个问题，需要 5 个可能的变量中的 3 个。已知 3 个变量有 10 种不同的组合。我编写了类似于下面两个代码块的 10 个场景

```
 // If we have acceleration, final velocity, and initial velocity
    if (varEntered[0] == true && varEntered[1] == true && varEntered[2] == true)
    {
        double acceleration = knownVariables[0];        //Setting acceleration
        double finalVelocity = knownVariables[1];       //Setting finalVelocity
        double initVelocity = knownVariables[2];        //Setting initVelocity

        double time = ((finalVelocity - initVelocity)/acceleration);        //Finding time using an equation
        double distance = ((finalVelocity + initVelocity)*((0.5)*time));    //Finding distance using an equation

        System.out.println("The time is " + time + " seconds");             //Printing time
        System.out.println("The distance is " + distance + " meters");      //Printing distance
    }

    //If we have distance, final velocity, initial velocity
    if (varEntered[3] == true && varEntered[1] == true && varEntered[2] == true)
    {
        //Known variables
        double distance = knownVariables[3];        //Acceleration
        double finalVelocity = knownVariables[1];   //Final Velocity
        double initVelocity = knownVariables[2];    //Initial Velocity

        // Unknown variables
        double time = (distance/((0.5)*(finalVelocity + initVelocity)));    //Time
        double acceleration = ((finalVelocity - initVelocity)/time);        //Acceleration

        System.out.println("The time is " + time + " meters/second");                               //Printing time
        System.out.println("The acceleration is " + acceleration + " meters/second^2");     //Printing distance
    } 
```

这些看起来非常相似，但却是不同的场景。作为一个编程初学者，我想知道是否可以修改我使用的算法以缩短代码。如果需要更多信息，我将非常乐意提供。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T20:57:40.300

如果你小心你的依赖关系，你可以摆脱 5 个案例，每个案例 1 个计算，而不是 10 个案例，每个案例 2 个计算。为此，您必须确保没有两个变量直接相互依赖。如果发生这种情况，那么当两个变量都未知时，您将不走运。

一种方法是获取变量列表并根据以下三个计算每个变量（当您到达列表末尾时环绕），如下例所示。在此示例中，solveAll 采用一个双精度数组，未知数设置为 Double.MAX_VALUE，并将未知数设置为正确的值。（如果有两个以上的未知数，你会得到一个无限递归。）

```
// Really should use enum instead of constant ints, and an EnumMap instead of an array.
public final static int ACCELERATION = 0;
public final static int FINALVELOCITY = 1;
public final static int INITVELOCITY = 2;
public final static int DISTANCE = 3;
public final static int TIME = 4;

private double[] vars;

public void solveAll(double[] vars) {
    this.vars = vars;
    for (int i=ACCELERATION; i<=TIME; i++) {
        get(i);
    }
}

private double get(int v) {
    if (vars[v] != Double.MAX_VALUE) {
        return vars[v];
    }

    switch (v) {
    case ACCELERATION:
        return (vars[ACCELERATION] = (get(FINALVELOCITY)*get(FINALVELOCITY) - get(INITVELOCITY)*get(INITVELOCITY)) / (2*get(DISTANCE)));
    case FINALVELOCITY:
        return (vars[FINALVELOCITY] = 2*get(DISTANCE)/get(TIME) - get(INITVELOCITY));
    case INITVELOCITY:
        return (vars[INITVELOCITY] = get(DISTANCE)/get(TIME) - get(ACCELERATION)*get(TIME)/2);
    case DISTANCE:
        return (vars[DISTANCE] = (get(FINALVELOCITY) - get(ACCELERATION)*get(TIME)/2) * get(TIME));
    case TIME:
        return (vars[TIME] = (get(FINALVELOCITY) - get(INITVELOCITY)) / get(ACCELERATION));
    }

    return Double.MAX_VALUE; // Bad variable index
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T00:48:48.927

您应该定义一个接受三个数字并执行一般计算的函数。对于初学者，请尝试[本教程](http://xahlee.info/java-a-day/writing_a_func.html)。然后你可以调用你的函数两次，每次使用不同的变量集。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T01:19:11.277

我会使用地图并做这样的事情（警告：伪代码）：

```
import java.util.HashMap;
import java.util.Map;

 Map<String,double> map=new HashMap<String, double>(); 
```

使用所有已知值初始化地图，例如：

```
 map.put("initVelocity", 0.35); 
```

然后您可以定义以下函数：

```
void  calculateValues(Map<double,String> map){

if( map.containsKey("initVelocity") && map.containsKey("finalVelocity") && map.containsKey("acceleration")){
map.put("time",((map.get("finalVelocity") - map.get("initVelocity")/map.get("acceleration"));    
}

add all the other algorithms here in the same way!!!

} 
```

此函数采用已在 HashMap 中定义的值并尝试计算缺失的参数。通常需要在地图上多次调用它，直到设置所有参数。您可以执行以下操作：

```
while( the map has not all values set){
calculateValues(map);
} 
```

此外，您可以确保（通过将此条件添加到 if 语句）仅在尚未设置结果值时调用任何算法。但不要太担心这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T01:44:26.757

从我注意到的情况来看，似乎每个变量都与一个数字相关联。您可以完全消除所有可能的情况，并在五个变量中的每一个上都有 if 条件；通过这个首先识别3个变量并初始化局部变量。它们在分配时是相互独立的，因此没有理由进行那么多组合。这将大大缩短代码。

下一步是减少您拥有的组合数量。我能想到的最好的事情是找出你需要计算的两个值并使用公式，换句话说，另一个 if else 语句块。下面是代码的样子：

```
//initialize all to 0
double acceleration = 0;
double distance = 0;        
double finalVelocity = 0;
double initVelocity = 0;
double time = 0;

//place the proper values for each 
if (varEntered[0] == true){
    acceleration = knownVariables[0];
}
if (varEntered[1] == true){
    finalVelocity = knownVariables[1];
}
if (varEntered[2] == true){
    initVelocity = knownVariables[2];
}
if (varEntered[3] == true){
    distance = knownVariables[3];
}
if (varEntered[4] == true){
   time = knownVariables[4];
}

// now you have 10 cases 
if(varEntered[0] == false && varEntered[1] == false){
//use the formulas here
} else if (varEntered[0] == false && varEntered[2] == false){
//use other formula here
}// repeat for the next 8, with each time you change the condition and formulas 
//like you have it. Also, I noticed that you missed the else in your conditionals; 
//it is more efficient if you use if-else clauses when only one should execute every time you run the code. 
```

希望这可以帮助。

随意将其复制出来，填写其余部分并尝试一下。

# windows - 计划任务 .bat - 检查网络驱动器是否准备就绪

> ID：12925553
> 
> 赞同：2
> 
> 时间：2012-10-17T00:43:05.210
> 
> 标签：windows, networking, batch-file, task, drive

我在 Windows Server 2003 R2 中有一个计划任务，它应该从网络位置（映射驱动器）获取一些文件并将它们复制到本地文件夹，以便当天晚些时候将 FTP 同步到移动设备。

当我单击它并运行它时，任务运行没有问题。任务计划程序说它正在运行更新它运行的时间并且文件出现在正确的位置。然而...

当任务应该在夜间运行（并且我尚未登录）时，任务会运行（任务调度程序指示任务在指定时间运行）但不会发生文件复制。我怀疑这与登录帐户的任务有关，然后在网络驱动器连接并准备好之前运行文件副本。

这是批处理文件中的代码：

```
@echo off

FORFILES /p "K:\Oncology\BSWRICS-MDM" /s /m *.* /c "cmd /c Del @path" /d -30

set "cleanup=K:\Oncology\BSWRICS-MDM"

for /f "usebackq tokens=*" %%a in (`dir /b/s/ad "%cleanup%" ^| sort /r`) do (rmdir "%%~a" 2>nul && echo:Removed: "%%a")

xcopy  K:\Oncology\BSWRICS-MDM\*.* C:\wamp\www\Portal\files\BSWRICS-MDM /Y /S 

FORFILES /p "C:\wamp\www\Portal\files\BSWRICS-MDM" /s /m *.* /c "cmd /c Del @path" /d -30 
```

前几行从本地文件夹中删除超过 30 天的文件，然后发生 xcopy。正如我所说，当我第一次登录时，这个脚本可以完美运行。

我可以在开始时插入一些代码来让脚本检查网络驱动器是否准备好，并且只有在 TRUE 时才继续执行下一条指令？

预期问题的一些答案： - 网络驱动器号永远不会改变。- 使用计划任务登录的帐户与我可以成功运行任务的帐户相同。- 任务实际运行（登录到任务计划程序），但没有证据表明已执行文件复制。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T08:42:11.210

您可以删除映射的驱动器并尝试再次映射它，然后等到错误级别显示它已连接后再继续。

```
@echo off
:LOOP
net use Y: /delete
net use Y: \\server\share
if errorlevel 1 (
goto :ERROR
) else (
goto :OK
)

:ERROR
echo ERROR!
rem Try again!
timeout /t 5
goto :LOOP

:OK
echo OK!
rem Carry on!
pause >nul 
```

# vb.net - Visual Basic 朋友错误

> ID：12925558
> 
> 赞同：0
> 
> 时间：2012-10-17T00:43:48.847
> 
> 标签：vb.net

我无法使用多个 subs 为多种货币制作转换器。我一直收到一个错误，说数字是朋友，因此不能在日本转换中使用。谁能帮忙？先感谢您

```
Option Explicit On
'Option Strict On

Imports System

Module Yahtzed

    Sub CANtoUSD()
        Dim Number , USDConversion as Decimal
        Number = Console.Readline
        USDConversion =( Number * 1.0141)
        Console.Writeline(USDConversion)
    End Sub

    Sub CANtoJAP()
        Dim Number, JAPConversion as Decimal
        Number = Console.Readline
        JAPConversion =( Number * 79.9392)
        Console.Writeline(JAPConversion)
    End Sub

    Sub Main()
        Console.Writeline("Enter the CAN amount: ")
        CANtoUSD()
        CANtoJAP()

    End Sub

End Module 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T01:21:33.577

^(*不是直接的答案，但这需要比评论更多的空间。*)

您的代码中有一个基本的设计错误。你真的想像这样构造它：

```
Function CANtoUSD(Number As Decimal) As Decimal
    Dim USDConversion as Decimal = 1.0141
    Return USDConversion * Number
End Function 

Function CANtoJAP(Number As Decimal) As Decimal
    Dim JAPConversion as Decimal = 79.9392
    Return JAPConversion * Number
End Function 

Sub Main()
    Console.Writeline("Enter the CAN amount: ")
    Dim input As Decimal = Console.ReadLine()

    Console.WriteLine(CANtoUSD(input))
    Console.WriteLine(CANtoJAP(input))
End Sub 
```

你不想为你的方法混合责任。输入/输出应与操作数据的代码严格分开。如果不出意外，这可以更容易地测试您的特定转换方法是否完全按照预期工作，并且不会成为您的错误的来源。

稍后，您将学习如何拥有一个接受源类型和目标类型的键值的单一方法，并通过了解转换因子到通用货币来执行表格查找以将任何货币转换为任何其他货币。

# java - Java中的原子布尔值与同步布尔值

> ID：12925560
> 
> 赞同：2
> 
> 时间：2012-10-17T00:44:29.417
> 
> 标签：java

我在一些多线程代码中遇到了这两个，并且想知道两者之间是否存在差异。

我的意思是使用 AtomicBoolean 而不是 SynchronizedBoolean 是否会对性能产生显着影响？

它会影响计算的正确性吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T01:02:22.440

[AtomicBoolean](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/atomic/AtomicBoolean.html)是标准 java 并发包的一部分。 [SynchronizedBoolean](http://gee.cs.oswego.edu/dl/classes/EDU/oswego/cs/dl/util/concurrent/SynchronizedBoolean.html)是 Doug Lea（许多 java 并发包的作者）创建的一组实用程序的一部分。在性能方面，您应该期望 AtomicBoolean 性能更好——它使用 volatile 布尔值，而 SynchronizedBoolean 使用 ReadWriteLock。

然而，在大多数应用程序的实践中，您不会注意到太大的差异。

真正的区别（以及应该指导您的选择）在于这两个类提供的语义。AtomicBoolean 仅提供简单的 set/get/compareAndSet 操作。SynchronizedBoolean 提供原子布尔操作并公开其内部锁以允许您在其值的上下文中执行 Runnables。

Doug Lea 已免费向社区提供此资源。我发现 SynchronizedBoolean 的扩展，[WaitableBoolean](http://gee.cs.oswego.edu/dl/classes/EDU/oswego/cs/dl/util/concurrent/WaitableBoolean.html)特别有用，因为它允许您在发生特定状态更改时在锁内执行 Runnable。

# ruby-on-rails - Heroku 生产设置 Cache-Control 与本地生产不同

> ID：12925564
> 
> 赞同：1
> 
> 时间：2012-10-17T00:45:06.110
> 
> 标签：ruby-on-rails, heroku, ruby-on-rails-3.2, rack, http-caching

我有一个应用程序在[http://chesseng.herokuapp.com/](http://chesseng.herokuapp.com/)上的 heroku 上运行，当我访问带有 chrome 并且禁用缓存的页面时，我得到了 application-fingerprint.css 的响应标头，类似于

```
Cache-Control:private
Connection:keep-alive
Content-Encoding:gzip
Content-Type:text/css
Date:Wed, 17 Oct 2012 00:17:19 GMT
Last-Modified:Tue, 16 Oct 2012 03:13:38 GMT
Status:200 OK
transfer-encoding:chunked
Vary:Accept-Encoding
X-Rack-Cache:miss 
```

但是，如果我启动一个本地实例`rails s -e production`并访问它，application-fingerprint.css 的响应标头类似于

```
Age:5119
Cache-Control:public, max-age=31536000
Connection:Keep-Alive
Content-Encoding:gzip
Content-Length:95828
Content-Type:application/javascript
Date:Tue, 16 Oct 2012 23:01:27 GMT
Etag:"0bf9e9837d421c2e28be1ef4f0794a48"
Last-Modified:Tue, 16 Oct 2012 01:07:17 GMT
Server:WEBrick/1.3.1 (Ruby/1.9.3/2012-04-20)
Vary:Accept-Encoding
X-Content-Digest:add442e2036c1e6e9f4860dcc44496582a5c91b1
X-Rack-Cache:fresh
X-Request-Id:b89de17e397ac7b60acfe500e8d15df9
X-Runtime:0.001632
X-Ua-Compatible:IE=Edge,chrome=1 
```

为什么 Cache-Control、Etag 等缓存相关字段与 heroku 相比如此不同？大概我希望 heroku 返回 Cache-Control:public, max-age=31536000。但我需要先了解为什么`Cache-Control:public, max-age=31536000`在我的本地生产模式下设置。令人费解的是，如果我`config.static_cache_control = "public, max-age=3600"`在`config/environments/production.rb`生产中设置并启动本地服务器，它仍然会回馈`max-age=31536000`并且似乎忽略`max-age=3600`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T02:56:53.493

从`X-Rack-Cache`标头看来，您正在使用会影响缓存标头的[rack-cache 中间件。](http://rtomayko.github.com/rack-cache/)由于您的资源在本地位于缓存 ( `X-Rack-Cache:fresh`) 中，但在 Heroku 上却不是 ( `X-Rack-Cache:miss`) 可以解释差异。

尝试从中间件堆栈中删除 rack-cache 并查看差异是否消失。

# apache - Apache - 使用 .htaccess 将图像重写为 php 文件

> ID：12925567
> 
> 赞同：3
> 
> 时间：2012-10-17T00:45:21.627
> 
> 标签：apache, .htaccess, mod-rewrite

我正在寻找一种方法将我的所有图像请求从一个**文件夹**重写到**some.php**文件中，同时保留原始图像 url（或部分路径）。

所以，

```
example.com/folder/img/test.jpg 
```

将被重写为

```
example.com/folder/some.php?img=img/test.jpg 
```

（这是最好的方法吗？）

我对正则表达式不太熟悉，所以我会非常感激:)

**注意：**我之前尝试过一些解决方案，但都没有奏效。另外，我在**CentOS**环境下运行**Apache 2.0 。**

 *** * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T12:04:06.087

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule ^(folder)/(img/[^.]+\.jpg)$ $1/some.php?img=$2 [L,QSA,NC] 
```

确保：

*   .htaccess 已启用
*   mod_rewrite 已启用
*   你的网址是`http://example.com/folder/img/test.jpg`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T01:21:26.830

听起来您希望将 url 中图像的文件名包含在新的 php url 中，而不是整个 url。所以像：

```
RewriteRule ^folder/img/(.*[.]jpg)$ /folder/some.php?filename=$1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T01:45:10.270

考虑到您在评论中提到的内容以及之前的规则不起作用，我编辑了消息，这就是我现在所拥有的。

```
RewriteEngine on
RewriteBase /
RewriteCond %{REQUEST_URI} ^/(.*)\.jpg [NC]
RewriteRule ^folder/img/([\w]*\.jpg)$ folder/some.php?img=img/$1[R=301,L] 
```

如果文件夹是 al 变量，您可以将其更改为 (\w*) 并在规则的右侧添加引用。

希望这可以帮助。

再见**

# iphone - UIScrollView 不会滚动，即使在内容大小设置后

> ID：12925571
> 
> 赞同：4
> 
> 时间：2012-10-17T00:45:34.827
> 
> 标签：iphone, ios, uiscrollview

我的 UIScrollView 是一个 ~4500px 水平视图，用户需要水平滚动才能查看内容。

我已将其设置如下：

```
- (void)viewDidLoad
{

    [super viewDidLoad];

    sview.frame = CGRectMake(0, 0, 568, 320);
    sview.contentSize = CGSizeMake(4500, 320);
    [sview setScrollEnabled:YES];
} 
```

然而滚动视图什么也没做。有什么明显的我错过了吗？我已经尝试过网络上的每个教程。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-13T09:19:27.467

我有类似的问题。我做了以下修改，scrollView 开始为我滚动：

1.  选择以检查 xib 中 UIScrollView 的“水平反弹”属性。
2.  将以下代码移动到 viewDidAppear 而不是 viewDidLoad：

> ```
> -(void) viewDidAppear:(BOOL)animated
> {
> 
>     [super viewDidAppear:animated];
>     sview.frame = CGRectMake(0, 0, 568, 320);
>     sview.contentSize = CGSizeMake(4500, 320);
>     [sview setScrollEnabled:YES];
> 
> } 
> ```

我认为这应该对你有所帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-22T04:20:15.667

我已经在[这里](https://stackoverflow.com/a/21274071/361247)解释过了，但是这个问题有很多答案建议关闭自动布局。这解决了问题，但这并不是真正正确的解决方案。这是我的答案：

* * *

转动自动布局有效，但这**不是解决方案**。如果你真的需要Auto Layout，那就使用它，如果你不需要它，把它关掉。但这不是此解决方案的正确解决方案。

`UIScrollView`与自动布局中的其他视图的工作方式不同。这是[Apple](https://developer.apple.com/library/ios/releasenotes/General/RN-iOSSDK-6_0/index.html)关于自动布局的发行说明，我复制了有趣的部分：

> 以下是有关 UIScrollView 的自动布局支持的一些注意事项：
> 
> *   通常，自动布局将视图的顶部、左侧、底部和右侧边缘视为可见边缘。也就是说，如果您将视图固定到其父视图的左边缘，您实际上是将其固定到父视图边界的最小 x 值。更改超级视图的边界原点不会更改视图的位置。
> *   UIScrollView 类通过更改其边界的原点来滚动其内容。为了使用自动布局，滚动视图中的顶部、左侧、底部和右侧边缘现在意味着其内容视图的边缘。
> *   滚动视图的子视图上的约束必须导致要填充的大小，然后将其解释为滚动视图的内容大小。（这不应与用于 Auto Layout 的 intrinsicContentSize 方法混淆。）要使用 Auto Layout 调整滚动视图的框架大小，必须明确限制滚动视图的宽度和高度，或者滚动视图的边缘必须是绑定到其子树之外的视图。
> *   请注意，您可以通过在视图和滚动视图的子树之外的视图（例如滚动视图的超级视图）之间创建约束，使滚动视图的子视图看起来浮动（不滚动）在其他滚动内容之上。

然后，Apple 继续展示如何正确使用`UIScrollView`Auto Layout 的示例。

作为一般规则，最简单的解决方法之一是在元素到 UIScrollView 底部之间创建一个约束。因此，在您希望位于 UIScrollView 底部的元素中，创建此底部空间约束：

![在此处输入图像描述](../Images/087646a6a83a871ffc35cea7e38c3ae6.png)

再一次，如果您不想使用自动布局，请将其关闭。然后，您可以设置`contentSize`通常的方式。但你应该明白，这是 Auto Layout 的预期行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T05:02:12.890

首先，您必须向 UIScrollSiew 添加一些内容作为滚动子视图，如果 UIScrollView 上没有内容，您如何滚动？这是我所做的，只需将 UIImageView 添加到 UIScrollView 作为大小与 UIScrollView 大小相同的子视图...

在 viewDidLoad 方法中尝试以下代码..

```
-(void)viewDidLoad
{
     UIScrollView *scroll=[[UIScrollView alloc] init];
     scroll.frame=CGRectMake(0, 0, 320, 460);
     UIImageView *imageView=[[UIImageView alloc] init];
     imageView.frame=CGRectMake(0, 0, 320,460);
     imageView.image=[UIImage imageNamed:@"chiranjeevi.jpeg"];
     scroll.contentSize = CGSizeMake(4500, 460);
     [scroll setScrollEnabled:YES];
     [scroll addSubview:imageView];
     [self.view addSubview:scroll];

} 
```

我测试了这段代码，它运行良好。我希望这段代码对你有所帮助..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T05:18:42.903

我假设您在 Xib 文件中添加 UISrollingView。这对你有用。

```
sview.delegate = self;
sview.backgroundColor=[UIColor clearColor];
[sview setCanCancelContentTouches:NO];
sview.indicatorStyle = UIScrollViewIndicatorStyleWhite;
sview.clipsToBounds = YES;
sview.scrollEnabled = YES;
sview.contentSize = CGSizeMake(320,570);
CGPoint topOffset = CGPointMake(0,0);
[sview setContentOffset:topOffset animated:YES]; 
```

另外，请确保在您的 Xib 文件中提供 IBOutlet 连接。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-12-13T06:41:41.220

我也遇到了同样的问题。我在 xib 中添加了滚动视图。我还在这个滚动视图中添加了一些子视图。添加子视图后，滚动视图将停止滚动。这个问题的解决方案是在文件检查器中的视图的 xib 中检查了使用自动布局。我取消选中它，添加子视图后滚动视图滚动。

**解决方案是在 xib 的文件检查器中取消选中使用自动布局。**

# php - 通过 foreach 循环显示值数组以及如何限制要显示的数组？

> ID：12925578
> 
> 赞同：0
> 
> 时间：2012-10-17T00:47:09.363
> 
> 标签：php, arrays

我想知道如何限制要显示的数组的值。假设我`$color`的等于`Indigo`

我尝试通过它来实现此代码不起作用

```
foreach($data as $item){
    if($item['color'] == $color){
        echo $item['size'].'-'.$item['color'].'-'.$item['price'].'<br>';
    }
} 
```

如果我`if statement`删除`var_dump($data)`

```
 array(16) {
  [0]=>
  array(3) {
    ["size"]=>
    string(1) "2"
    ["price"]=>
    string(6) "$59.00"
    ["color"]=>
    string(11) "Black Rinse"
  }
  [1]=>
  array(3) {
    ["size"]=>
    string(1) "2"
    ["price"]=>
    string(6) "$59.00"
    ["color"]=>
    string(6) "Indigo"
  }
  [2]=>
  array(3) {
    ["size"]=>
    string(1) "4"
    ["price"]=>
    string(6) "$59.00"
    ["color"]=>
    string(11) "Black Rinse"
  }
  [3]=>
  array(3) {
    ["size"]=>
    string(1) "4"
    ["price"]=>
    string(6) "$59.00"
    ["color"]=>
    string(6) "Indigo"
  }
  [4]=>
  array(3) {
    ["size"]=>
    string(1) "6"
    ["price"]=>
    string(6) "$59.00"
    ["color"]=>
    string(11) "Black Rinse"
  }
  [5]=>
  array(3) {
    ["size"]=>
    string(1) "6"
    ["price"]=>
    string(6) "$59.00"
    ["color"]=>
    string(6) "Indigo"
  }
  [6]=>
  array(3) {
    ["size"]=>
    string(1) "8"
    ["price"]=>
    string(6) "$59.00"
    ["color"]=>
    string(11) "Black Rinse"
  }
  [7]=>
  array(3) {
    ["size"]=>
    string(1) "8"
    ["price"]=>
    string(6) "$59.00"
    ["color"]=>
    string(6) "Indigo"
  }
  [8]=>
  array(3) {
    ["size"]=>
    string(2) "10"
    ["price"]=>
    string(6) "$59.00"
    ["color"]=>
    string(11) "Black Rinse"
  }
  [9]=>
  array(3) {
    ["size"]=>
    string(2) "10"
    ["price"]=>
    string(6) "$59.00"
    ["color"]=>
    string(6) "Indigo"
  }
  [10]=>
  array(3) {
    ["size"]=>
    string(2) "12"
    ["price"]=>
    string(6) "$59.00"
    ["color"]=>
    string(11) "Black Rinse"
  }
  [11]=>
  array(3) {
    ["size"]=>
    string(2) "12"
    ["price"]=>
    string(6) "$59.00"
    ["color"]=>
    string(6) "Indigo"
  }
  [12]=>
  array(3) {
    ["size"]=>
    string(2) "14"
    ["price"]=>
    string(6) "$59.00"
    ["color"]=>
    string(11) "Black Rinse"
  }
  [13]=>
  array(3) {
    ["size"]=>
    string(2) "14"
    ["price"]=>
    string(6) "$59.00"
    ["color"]=>
    string(6) "Indigo"
  }
  [14]=>
  array(3) {
    ["size"]=>
    string(2) "16"
    ["price"]=>
    string(6) "$59.00"
    ["color"]=>
    string(11) "Black Rinse"
  }
  [15]=>
  array(3) {
    ["size"]=>
    string(2) "16"
    ["price"]=>
    string(6) "$59.00"
    ["color"]=>
    string(6) "Indigo"
  }
} 
```

我只想显示颜色等于的值`$color`。我应该如何以正确的方式做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T00:50:42.503

您可能正在处理区分大小写或空格..您可以尝试：

```
$data = array(
        0 => array("size" => "2","price" => "$59.00","color" => "Black Rinse"),
        1 => array("size" => "2","price" => "$59.00","color" => "Indigo"));

$color = "Indigo";
foreach ( $data as $item ) {
    if (strtolower($item['color']) == strtolower($color)) {
        echo $item['size'] . '-' . $item['color'] . '-' . $item['price'] . '<br>';
    }
} 
```

输出

```
2-Indigo-$59.00 
```

[观看现场演示](http://codepad.org/6ydarHe4)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T00:51:03.557

这应该可以解决您的问题（假设您正在比较两个字符串，我建议您在 if 循环中使用 strcasecmp- 进行不区分大小写的字符串比较）

```
foreach($data as $item){
    if(strcasecmp(trim($item['color']),trim($color))==0){
        echo $item['size'].'-'.$item['color'].'-'.$item['price'].'<br>';
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T01:17:04.247

优雅，简单：

```
 $items = array(
        array('size'=>'4', 'color'=>'Indigo', 'price'=>'$59.00'), 
        array('size'=>'5', 'color'=>'black', 'price'=>'$59.00'), 
        array('size'=>'5', 'color'=>'green', 'price'=>'$54.00'),
        array('size'=>'7', 'color'=>'Indigo', 'price'=>'$50.00'),
        array('size'=>'5', 'color'=>'purple', 'price'=>'$51.00'));

   print_r(array_filter($items, function($i){
          return in_array('Indigo', $i);
      })
   ); 
```

或 PHP < 5.3：

```
print_r(array_filter($items, 
    create_function('$i', 'return in_array("Indigo", $i);'))
); 
```

利用 PHP 提供的功能。

# iphone - UITextView 确实结束了编辑

> ID：12925579
> 
> 赞同：4
> 
> 时间：2012-10-17T00:47:14.250
> 
> 标签：iphone, objective-c, xcode, textview, uitextview

`NSLog`当我的 UITextView 完成编辑时，我想要一些东西。

我试过了

`- (BOOL)textViewShouldEndEditing:(UITextView *)textView`

和

`- (void)textViewDidEndEditing:(UITextView *)textView`

都没有工作。

使固定：

`myTextView.delegate = self;`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-17T00:55:15.373

你设置你的文本视图的代表吗？

使固定：

在 .h 文件中设置委托，如下所示：

```
#import <UIKit/UIKit.h>  

@interface TextViewController : UIViewController <UITextViewDelegate>  
{  
          UITextView *textView;  
}  
@property (nonatomic, retain) UITextView *textView;  
@end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-01T12:34:54.623

如果您使用的是 UITextField，请确保使用 UITextFieldDelegate 而不是 UITextViewDelegate。相反，这种方法解决了我的问题。

```
- (void)textFieldDidEndEditing:(UITextField *)textField 
```

# crystal-reports-2008 - Crystal Reports 2008 无法将参数链接到子报表

> ID：12925581
> 
> 赞同：2
> 
> 时间：2012-10-17T00:47:47.793
> 
> 标签：crystal-reports-2008

在 Crystal Reports 2008 中，我有一个带有 arg_beg_date 和 arg_end_date 参数的主报表。我想将这些传递给子报表，但无法传递。子报表有一个带有 SQL 查询的命令 - SELECT * FROM TXFR 以保持简单。我在名为 beg_date 和 end_date 的子报表中创建了两个参数，然后将 WHERE TXFR_DATE BETWEEN {?BEG_DATE} AND {?END_DATE} 添加到查询中。我尝试更改子报表链接，在可用字段中找到 arg_beg_date，然后单击“>”将其移动到要链接到框的字段。

那时我只看到 ?Pm-?arg_beg_date 和“参数字段”作为“要使用的子报表参数字段”框中的选项。我无法将主报告中的 arg_beg_date 链接到我在子报告中创建的 beg_date 参数。

我在另一个问题中看到有人建议选中“根据字段选择子报告的日期”框并选择“报告字段”，但我无法做到这一点。它只是突出显示并选择框中低于该字段的字段。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T11:27:02.767

我最近构建了相同的报表，其中子报表是命令行。我还没有编写程序，但是如果您将参数从主报告传递到子报告，参数应该是这样的。

在您的子报表 SQL 中，参数必须是这个

**在 {?Pm-?arg_beg_date} 和 {?Pm-?arg_end_date} 之间的 TXFR_DATE**

然后在您的参数列表中，创建

*   **pm-?arg_beg_date**
*   **pm-?arg_end_date**

在您的主报告中，更改子报告链接...

1.  添加 ?arg_beg_date 参数
2.  确保未选中“根据字段选择子报表中的数据”
3.  对 ?arg_end_date 参数执行相同操作

如果您想传递字段而不是参数，并且您在主报告中使用命令，则与上述步骤相同，但看起来像这样。

子报表 SQL

{?Pm-Command.FieldName}

参数列表

Pm-Command.FieldName

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T17:53:35.593

我弄清楚我做错了什么。参数未显示在要链接的列表中，因为类型不匹配。我的主报表中的参数类型是DateTime，我的子报表中的类型是Date。它们必须完全匹配。

谢谢你的帮助。

# javascript - Cordova Prompt 插件不等待用户输入

> ID：12925584
> 
> 赞同：0
> 
> 时间：2012-10-17T00:48:33.103
> 
> 标签：javascript, jquery, cordova, prompt

我正在使用 Cordova 2.1.0 和位于[此 github](https://github.com/phonegap/phonegap-plugins/tree/master/iPhone/Prompt)的提示插件。我已经使用 .h、.m 和 .js 文件正确设置了插件，并将其正确链接到我的 index.html 中。

我遇到的问题是，当调用提示函数时，它不会等待用户输入文本字符串，然后继续执行下一个函数，在我的使用中，该函数使用用户文本字符串将表单值保存到本地存储作为存储的 ID。**这个问题导致本地存储键值对被存储为空白键，并破坏了存储系统。**

这是我用来调用 Prompt 插件的代码示例：

```
function doPrompt() {
    window.plugins.Prompt.show(
        "What is the name of this job?",
        function (userText) {
            $('#promptinput').text(userText)
        }, 
        function () {
        },
        "Save",
        "Cancel"
    );
}; 
```

这是我调用提示插件和存储值的函数的示例：

```
function showPrompt() {
    doPrompt();
    alert("prompted");
    writeLocal();
    alert("written");
} 
```

警报在那里，所以我可以看到下一个函数何时移动到 writeLocal 函数是写入 localstorage 的位置。

对此的任何帮助都会很棒。我一直在排除故障，试图让它正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T13:40:18.463

是的，您需要阅读一下异步代码的工作原理。window.plugins.Prompt.show 的第二个参数是当点击 OK 按钮时调用的回调。没有什么“等待”用户点击 OK；代码是非阻塞的。

你想要这样的东西：

```
function doPrompt() {
    window.plugins.Prompt.show(
        "What is the name of this job?",
        function (userText) {
            $('#promptinput').text(userText);
            alert("prompted");
            writeLocal();
            alert("written");
        }, 
        function () {
        },
        "Save",
        "Cancel"
    );
}; 
```

现在，当用户点击 OK 时，它会设置 #promptinput，触发警报，然后调用 writeLocal。如果 writeLocal 也是异步的，那么第二个警报也会立即触发；否则会在 writeLocal 返回时触发。

# javascript - 在 touchstart 上获取元素？

> ID：12925585
> 
> 赞同：2
> 
> 时间：2012-10-17T00:48:36.573
> 
> 标签：javascript, jquery, ios, touch-event

我在一个页面上有一系列 div，您可以向左滑动，这将在下面显示一个 div。当只有一个元素时，这很好用，但是当有多个元素时，它们会齐声滑动，而不是单独滑动一个。

为了解决这个问题，我在这里尝试了这些想法：[Find element finger is on during a touchend event](https://stackoverflow.com/questions/11523496/find-element-finger-is-on-during-a-touchend-event)

问题是，现在只有第一个元素被滑动，而其余元素保持静止。关于如何解决这个问题的任何想法？我以为我可以使用`this`，但它总是会返回`window`对象。

代码：

```
var originalCoord = {
        x: 100,
        y: 100
    }
    var finalCoord = {
        x: 100,
        y: 100
    }

    function touchMove(event) {
        event.preventDefault();
        finalCoord.x = event.targetTouches[0].pageX
        finalCoord.y = event.targetTouches[0].pageY
    }

    function touchEnd(event) {
        var changeY = originalCoord.y - finalCoord.y
        if (changeY < 30 && changeY > (30 * -1)) {
            changeX = originalCoord.x - finalCoord.x
            if (changeX > 10) {
               var elem = document.elementFromPoint(event.pageX, event.pageY);
               console.log(elem);
                $(elem).css("margin-left", "-54px");
                setTimeout(function () {
                    $(elem).css("margin-left", "0px");}
                , 500);
            }
        }
    }

    function touchStart(event) {
        originalCoord.x = event.targetTouches[0].pageX
        originalCoord.y = event.targetTouches[0].pageY
        finalCoord.x = originalCoord.x
        finalCoord.y = originalCoord.y
    }

    this.addEventListener("touchstart", touchStart, false);
    this.addEventListener("touchmove", touchMove, false);
    this.addEventListener("touchend", touchEnd, false); 
```

演示（仅适用于 iOS）： http: [//www.codekraken.com/testing/snowday/swipe.html](http://www.codekraken.com/testing/snowday/swipe.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T00:54:09.283

您可以使用 获取事件起源的元素`event.target`。

```
function touchStart(event){
  var currentElement = event.target;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-09T20:05:46.900

```
$('#id').on('touchstart',function(e,data) {             
    var obj = e.target;
    obj = $(this);
    var id = obj.find....   
}); 
```

`obj = $(this)`您可以使用 jquery 函数转换为`event.target`jquery 对象...

最好的

米

# c# - 如何在连接的 ComboBox 中找到所选项目的索引 - 在 DATABASE 表中

> ID：12925589
> 
> 赞同：2
> 
> 时间：2012-10-17T00:49:01.737
> 
> 标签：c#, winforms, sql-server-2008, combobox, sqldataadapter

在组合框中查找选定的项目*字符串很容易：*

```
String selectedString = comboBox1.SelectedItem.ToString(); 
```

在组合框中查找选定的项目*索引*也很容易：

```
int selectedIndex = comboBox1.SelectedIndex; 
```

**但是在组合框中的选定项目的连接数据库表**中找到索引似乎并不那么简单：

```
 DataTable dt = new DataTable();
    SqlDataAdapter da = new SqlDataAdapter("SELECT * FROM tblContacts ORDER BY colFirstname", sqlConnection);
    da.Fill(dt);
    for (int i = 0; i < dt.Rows.Count; i++)
    {
        String addressRow = (String)dt.Rows[i]["colFirstname"];
        comboBox1.Items.Add(addressRow);
    } 
```

我可以尝试以某种方式从选定的项目字符串中导出数据库表的索引，但这并不能保证唯一性。

在组合框中所选项目**的连接数据库表**中查找索引的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T00:50:36.667

您的组合框选定索引是 DataTable 中的索引。

# c# - 将对象列表投射到另一个列表

> ID：12925594
> 
> 赞同：1
> 
> 时间：2012-10-17T00:49:51.923
> 
> 标签：c#, .net

我有两个模型类：

```
public class SalesItem
{
   public string ProductName { get; set; }
   public double UnitPrice { get; set; }
   public int Quantity { get; set; }
}

public class ProductItem : INotifyPropertyChanged
{
   public string ProductName { get; set; }
   public double UnitPrice { get; set; } 
} 
```

我有一个 SalesItem 列表`List<ProductItem> products`，如何将其转换为`List<SalesItem> sales`

* * *

已编辑

```
List<ProductItem> salesList = new List<ProductItem>();
List<SalesItem> salesItem = salesList.Cast<SalesItem>(); 
```

错误：

```
Connot implicitly convert type 'System.Collections.Generic.IEnumerable<Model.SalesItem>' to 'System.Collections.Generic.List<Model.SalesItem>'. An explicit conversion exists (are you missing a cast? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T00:54:22.670

在您给出的示例中，您不能在这两种类型之间进行转换，因为它们彼此没有任何共同之处。正确的做法是创建一个`baseItem`类，然后创建一个`derivedItem`继承自`baseItem`. 然后你可以这样做：

```
List<baseItem> baseList;
List<derivedItem> derivedList = baseList.Cast<derivedItem>(); 
```

这通常被称为**downcasting**，并且通常表明代码中的层次结构不正确，因此我建议限制其使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T00:55:12.513

**久经考验**

包括命名空间

```
using System.Linq; 
```

接着

```
List<ProductItem> yourProductlist = new List<ProductItem>();

yourProductlist.Add(new ProductItem() { ProductName = "A", UnitPrice = 50 });
yourProductlist.Add(new ProductItem() { ProductName = "B", UnitPrice = 150 });

List<SalesItem> yourSaleslist = yourProductlist.Select(x => 
                           new SalesItem() { ProductName = x.ProductName, 
                                             UnitPrice = x.UnitPrice }).ToList(); 
```

**看到它工作**

![在此处输入图像描述](../Images/f1b7ba3f3e5d44737afefe8fed2c0018.png)

**如果 ProductItem 是从 SalesItem 类继承的，则转换将起作用**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T00:54:47.550

您需要更改`SalesItem`为从 继承`ProductItem`，然后您可以使用 LINQ，如下所示：

```
List<ProductItem> products;
IEnumerable<SalesItem> salesItems = products.Cast<SalesItem>(); 
```

或者

```
List<SalesItem> salesItems = products.Cast<SalesItem>().ToList(); 
```

不要忘记确保文件中包含以下内容，以便`Cast`扩展方法可用：

```
using System.Linq; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-17T00:57:01.200

在这里您可以定义 的值`defaultQuantity`是什么，因为它不存在于`ProductItem`.

```
List<SalesItem> sales = products.ConvertAll(x => new SalesItem() {
                            ProductName = x.ProductName,
                            Quantity = defaultQuantity, 
                            UnitPrice = x.UnitPrice  
                        }); 
```

# c++ - 预期的 ';' 在数字常量之前

> ID：12925595
> 
> 赞同：2
> 
> 时间：2012-10-17T00:50:06.557
> 
> 标签：c++

我在 C++ 中有以下代码，试图将 xml 文件写入文件，但它一直给我这个问题“预期的”；在数字常量之前

```
int main () {
  ofstream myfile;
  myfile.open ("example.xml", ios::out| ios::app| ios::binary);
  if (myfile.is_open())
  {
    myfile << "<?xml version="1.0" encoding="UTF-8"?> \n";
    myfile << "<?xml-stylesheet type="text/xsl" href="wufi1d.xslt"?> \n";
    myfile << "<WUFI1D> \n"; 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T00:52:07.617

您需要转义字符串中的引号，如下所示：

```
myfile << "<?xml version=\"1.0\" encoding=\"UTF-8\"?> \n";
myfile << "<?xml-stylesheet type=\"text/xsl\" href=\"wufi1d.xslt\"?> \n";
myfile << "<WUFI1D> \n"; 
```

编译器在看到第一个字符串时认为该字符串已完成`"`- 因此您必须通过转义它来告诉它您的意思是从字面上将其包含在字符串中`\"`。

[有关 C++ 中字符转义码的完整列表，请参见此处](http://en.cppreference.com/w/cpp/language/escape)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T00:51:51.293

逃避你的 dbl-quotes：即

```
 myfile << "<?xml version="1.0" encoding="UTF-8"?> \n"; 
```

应该

```
 myfile << "<?xml version=\"1.0\" encoding=\"UTF-8\"?> \n"; 
```

举个例子

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T00:52:02.493

嵌入的引号需要转义。

这个：

```
myfile << "<?xml version="1.0" encoding="UTF-8"?> \n";
myfile << "<?xml-stylesheet type="text/xsl" href="wufi1d.xslt"?> \n"; 
```

应该是这样的：

```
myfile << "<?xml version=\"1.0\" encoding=\"UTF-8\"?> \n";
myfile << "<?xml-stylesheet type=\"text/xsl\" href=\"wufi1d.xslt\"?> \n"; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-17T00:54:27.333

您不能在字符串中使用原始引号，因为它们表示字符串的结尾。转义它们：

```
myfile << "<?xml version=\"1.0\" encoding=\"UTF-8\"?> \n";
myfile << "<?xml-stylesheet type=\"text/xsl\" href="wufi1d.xslt"?> \n";
myfile << "<WUFI1D> \n"; 
```

您还可以在 C++11 中使用原始字符串文字，它将所有内容（包括空格）视为原始字符串的一部分：

```
myfile << 
R"(<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="wufi1d.xslt"?>
<WUFI1D>
)"; 
```

如果字符串中有括号，请在其周围放置一个分隔符：`R"###(st(ri)ng)###"`

后者对于较长的文件可能更可取，这样您就不必转义所有内容，但请记住，所有换行符、空格等都包含在字符串中，并且语法突出显示可能会根据编辑器是否采用考虑到原始文字，以及缩进（如果每行开头不包含额外空格很重要），因为您必须将文字保留在每行的开头。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-17T00:51:55.200

如代码荧光笔所示，您有未转义的双引号。`\"`当您想在输出的文本中显示双引号时使用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-17T00:51:59.997

您没有转义输出字符串中的引号，例如

```
myfile << "<?xml version=\"1.0\" encoding=\"UTF-8\"?> \n"; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-17T00:52:04.713

您必须使用不是字符串分隔符的反斜杠来转义 (") 双引号：

```
myfile << "<?xml version=\"1.0\" encoding=\"UTF-8\"?> \n"; 
```

# jquery - hoverIntent 问题

> ID：12925604
> 
> 赞同：1
> 
> 时间：2012-10-17T00:51:36.323
> 
> 标签：jquery, hoverintent

我对 jQuery 相当陌生，我正在尝试在我的页面上的 2 个不同元素上设置一个 hoverIntent。我让它在第一个上工作，但是当我将它添加到第二个时，它以某种方式抵消了第一个。让我知道我做错了什么，或者是否有更好的方法来格式化此代码。

先感谢您。

```
$(document).ready(function(){
 $(".panel").hoverIntent(function() {
        $(this).children('.info').slideDown();
        }, function() {
        $(this).children('.info').slideUp();
}); 
```

});

```
$(document).ready(function(){
 $(".panel").hoverIntent(function() {
        $(this).children('.info1').slideDown();
        }, function() {
        $(this).children('.info1').slideUp();
}); 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T00:56:04.087

试试这个：

```
$(document).ready(function(){
 $(".panel").hoverIntent(function() {
        $(this).children('.info, .info1').slideDown();
        }, function() {
        $(this).children('.info, .info1').slideUp();
});
}); 
```

# c# - 为什么绑定的 StringFormat 没有使用当前的文化？

> ID：12925607
> 
> 赞同：5
> 
> 时间：2012-10-17T00:51:51.847
> 
> 标签：c#, windows-phone-7, xaml

我目前的文化是ru-RU。我需要它将十进制格式化为货币字符串。

```
decimal n = 111.22M;

n.ToString("C") will return "111,22р." 
```

但是当我尝试使用绑定的 StringFormat 字段时，我得到“$ 111.22”结果

```
<TextBlock Text={Binding Number, StringFormat=C} /> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T00:57:59.443

默认情况下，WPF 将使用英语作为绑定`StringFormat`处理的文化，而不是线程的当前文化。

您可以通过在应用程序的启动代码中添加以下内容来覆盖它：

```
FrameworkElement.LanguageProperty.OverrideMetadata(typeof(FrameworkElement),
    new FrameworkPropertyMetadata(      XmlLanguage.GetLanguage(CultureInfo.CurrentCulture.IetfLanguageTag))); 
```

有关详细信息，请参阅 Josh Smith 关于[创建国际化向导](http://www.codeproject.com/Articles/31837/Creating-an-Internationalized-Wizard-in-WPF)的文章。

# css - Rails：除非我在开 发中本地预编译，否则 CSS 不会改变

> ID：12925609
> 
> 赞同：2
> 
> 时间：2012-10-17T00:51:56.677
> 
> 标签：css, ruby-on-rails

当我在浏览器中查看它时，我的 CSS 不会改变，除非我使用`rake assets:precompile`.

关于如何消除这种行为的任何想法？您需要更多文件吗？

这是我的 development.rb ：

```
Mobile::Application.configure do
# Settings specified here will take precedence over those in config/application.rb

# In the development environment your application's code is reloaded on
# every request.  This slows down response time but is perfect for development
# since you don't have to restart the web server when you make code changes.
config.cache_classes = false

# Log error messages when you accidentally call methods on nil.
config.whiny_nils = true

# Show full error reports and disable caching
config.consider_all_requests_local       = true
config.action_controller.perform_caching = false

# Don't care if the mailer can't send
config.action_mailer.raise_delivery_errors = false

# Print deprecation notices to the Rails logger
config.active_support.deprecation = :log

# Only use best-standards-support built into browsers
config.action_dispatch.best_standards_support = :builtin

# Do not compress assets
config.assets.compress = false

# Expands the lines which load the assets
config.assets.debug = true

   end 
```

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T01:02:02.190

删除`public/assets`文件夹。文件`public/assets`夹中的文件将优先于文件夹中的文件加载`app/assets`。

删除后，您应该可以使用`app/assets`.

# android - 访问包/额外下载的内容

> ID：12925612
> 
> 赞同：0
> 
> 时间：2012-10-17T00:52:02.353
> 
> 标签：android, package, billing, in-app

我计划使用应用内计费来允许用户在我的应用中下载额外的数据内容。

我的问题是下载后如何访问它？我以前看过有关包的内容，但我只想添加数据而不是代码？我会下载一个新的数据库吗？或者可能是现有数据库中的新数据？

现在想一想，如果它是一个新的数据库，有什么能阻止拥有根手机的人抓取新内容并将其盗版/复制/上传到网络？

我不介意人们发布这些问题的指南链接。

我主要关心新数据以及如何安装和访问它。

# python - 麻省理工学院的“二分搜索”

> ID：12925615
> 
> 赞同：0
> 
> 时间：2012-10-17T00:52:08.117
> 
> 标签：python, bisection

我碰巧找到了这段代码，它似乎运行良好。令人惊讶的是，（通过检查，对于 MIT 课程）只有当年利率为 0.15 时才会失败，其他情况下都可以。我是一个新手，所以我今天没有任何希望解决它，但是如果有人能给我一些关于这个问题的信息，我将非常感激！

```
balance=294272
annualInterestRate=0.15

payment=(balance * (1 + annualInterestRate/12)**12) / 12
count=0
total=0
inicialbalance=balance
while balance>0:
    for month in range(1,13):
        interest=(balance-payment)*(annualInterestRate/12)
        balance=(balance-payment)*(1+(annualInterestRate/12))
        total=total+payment
        finalbalance=balance-total
        if balance <=0:
            print('Balance Paid Off @ '+str(round(payment,2)) + ' Total Paid is:       '+str(round(total,2))+ ' ending balance: ' +str(round(balance,2))) 
            print('Lowest Payment: ' + str(round(payment,2)))
            break
    if balance <-0.01 or balance >0.01:
        print('Payment at ' + str(payment) + ' ending balance : ' + str(balance))
        print('Payment will adjust to: ' + str(payment + 10))
        payment=payment+(balance/12)
        count=count+1
        balance=inicialbalance
    total=0
    #if count >200:
        #print('count is > ' +str(count)+ ' aborting')
        #break
    #if balance <=0:
        #print('balance paid off at ' + str(payment) + ' after ' + str(mth))
print('Lowest Payment: ' + str(round(payment,2)))` 
```

结果：

```
{Balance Paid Off @ 42279.71 Total Paid is: 465076.8 ending balance: -359.78
Lowest Payment: 42279.71
Payment at 42279.7094717 ending balance : -359.781977705
Payment will adjust to: 42289.7094717
Balance Paid Off @ 42249.73 Total Paid is: 464747.0 ending balance: -4.19
Lowest Payment: 42249.73
Payment at 42249.7276402 ending balance : -4.18662043777
Payment will adjust to: 42259.7276402
Balance Paid Off @ 42249.38 Total Paid is: 464743.17 ending balance: -0.05
Lowest Payment: 42249.38
Payment at 42249.3787552 ending balance : -0.0487178117574
Payment will adjust to: 42259.3787552
Balance Paid Off @ 42249.37 Total Paid is: 464743.12 ending balance: -0.0
Lowest Payment: 42249.37
balance paid off at 42249.3746954 after 11
Lowest Payment: 42249.37} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T01:22:23.850

我认为条件

```
if balance <=0:
    break 
```

里面`for month in range(1,13):`是错误的。如果付款如此之大，以至于在 11 次付款而不是 12 次付款后余额变为负数，则循环过早中断。我认为这就是 42249.37 的巨额付款所发生的情况。

```
balance = 437092
annualInterestRate = 0.15
payment=(balance * (1 + annualInterestRate/12)**12) / 12
count=0
total=0
inicialbalance=balance
while balance>0:
    for month in range(1,13):
        interest=(balance-payment)*(annualInterestRate/12)
        balance = (balance-payment) + interest
        total += payment
        finalbalance = balance-total
    if balance <-0.01 or balance>0.01:
        print('Payment at ' + str(payment) + ' ending balance : ' + str(balance))
        payment=payment+(balance/12)
        print('Payment will adjust to: ' + str(payment))
        count=count+1
        balance=inicialbalance
    else:
        break
    total=0
print('Lowest Payment: ' + str(round(payment,2))) 
```

产量

```
Payment at 42279.7094717 ending balance : -43172.4850925
Payment will adjust to: 38682.0023807
Payment at 38682.0023807 ending balance : 3673.67604215
Payment will adjust to: 38988.1420508
Payment at 38988.1420508 ending balance : -312.604095728
Payment will adjust to: 38962.0917095
Payment at 38962.0917095 ending balance : 26.6004186392
Payment will adjust to: 38964.3084111
Payment at 38964.3084111 ending balance : -2.26350928031
Payment will adjust to: 38964.1197853
Payment at 38964.1197853 ending balance : 0.192608783082
Payment will adjust to: 38964.1358361
Payment at 38964.1358361 ending balance : -0.0163896580426
Payment will adjust to: 38964.1344702
Lowest Payment: 38964.13 
```

# java - 循环一个 jaxb 马歇尔

> ID：12925616
> 
> 赞同：1
> 
> 时间：2012-10-17T00:52:38.380
> 
> 标签：java, for-loop, jaxb, marshalling

我只是想循环一个具有相同 xml 元素但具有不同 ID 的 jaxb marshal，这与我下面的代码不同的是，它**为每个 ID 解析新的 xml 文件并覆盖旧的**。

data[][] 从矩阵中读取，data[i][0] 表示 ID 列表，我想将这些 id 设置为客户 ID。

```
 Customer customer = new Customer();
      File file = new File("C:/data.xml");

      for (int i = 0; i < data.length; i++) {
          customer.setId(data[i][0]);

            JAXBContext jaxbContext = JAXBContext.newInstance(Customer.class);
            Marshaller jaxbMarshaller = jaxbContext.createMarshaller();

            jaxbMarshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);

            jaxbMarshaller.marshal(customer, file);
            jaxbMarshaller.marshal(customer, System.out);

      } 
```

上面代码的输出：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<customer id="1"/>
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<customer id="2"/>
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<customer id="3"/>
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<customer id="4"/>
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<customer id="5"/> 
```

**我想要一个 xml 文件中**的所有 ID输出，有什么提示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T09:34:16.563

您可以在 上设置`JAXB_FRAGMENT`属性`Marshaller`以防止标头被写出。这在编组到另一个文档时是必要的。

```
package forum12925616;

import java.io.*;
import javax.xml.bind.*;

public class Demo {

    private static int X = 5;
    private static int Y = 2;

    public static void main(String[] args) throws Exception {
        int[][] data = new int[X][Y];
        for (int x = 0; x < X; x++) {
            for (int y = 0; y < Y; y++) {
                data[x][y] = x;
            }
        }

        // Create this once
        JAXBContext jaxbContext = JAXBContext.newInstance(Customer.class);
        Marshaller jaxbMarshaller = jaxbContext.createMarshaller();
        jaxbMarshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        jaxbMarshaller.setProperty(Marshaller.JAXB_FRAGMENT, true);

        marshal(jaxbMarshaller, data, System.out);

        FileOutputStream fileOutputStream = new FileOutputStream("src/forum12925616/out.xml");
        marshal(jaxbMarshaller, data, fileOutputStream);
        fileOutputStream.close();
    }

    private static void marshal(Marshaller jaxbMarshaller, int[][] data, OutputStream outputStream) throws Exception {
        OutputStreamWriter writer = new OutputStreamWriter(outputStream);
        writer.write("<?xml version='1.0' encoding='UTF-8' standalone='yes'?>");
        writer.write("\n<customers>\n");
        for (int i = 0; i < data.length; i++) {
            Customer customer = new Customer();
            customer.setId(data[i][0]);
            jaxbMarshaller.marshal(customer, writer);
            writer.write("\n");
        }
        writer.write("<customers>");
        writer.flush();
    }

} 
```

**系统和文件输出**

下面是控制台和文件的结果输出。

```
<?xml version='1.0' encoding='UTF-8' standalone='yes'?>
<customers>
<customer id="0"/>
<customer id="1"/>
<customer id="2"/>
<customer id="3"/>
<customer id="4"/>
<customers> 
```

***了解更多信息***

*   [http://blog.bdoughan.com/2011/08/jaxb-and-java-io-files-streams-readers.html](http://blog.bdoughan.com/2011/08/jaxb-and-java-io-files-streams-readers.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T02:15:06.067

只需将 marhsaller 的构造移出循环即可。您可以在同一个线程中多次重用编组器。

还是您真的想将客户列表输出为单个 xml 文件？然后您需要一个 Customer 对象数组，然后编组该数组。

# javascript - 使用特定键查询 javascript 数组

> ID：12925622
> 
> 赞同：1
> 
> 时间：2012-10-17T00:53:14.140
> 
> 标签：javascript, jquery, arrays

考虑以下数组：

```
var myArray = [ {"ID":1, "Name":"A"}, {"ID":2, "Name":"B"},
                {"ID":3, "Name":"C"}, {"ID":4, "Name":"D"}]; 
```

我想以某种方式使用 JQuery 来查询数组中关于某个给定 ID 的所有 JSON 对象。例如，对于输入 [{"ID":3}] （我不知道传递参数的确切格式，所以我决定它是数组中的一个对象，但是任何建议都是可以接受的）结果将只有第三个对象 - {"ID":3, "Name":"C"}。
换句话说——我想“问”——给我所有“ID”属性等于“3”的对象。

我已经尝试过 JQuery.each 函数，但是，它会遍历整个数组，并且我自己在我的函数中进行“验证检查”（作为数组后的第二个参数给出）。是否有任何内置的 JQuery 函数/用于此问题？

谢谢，
阿米特。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T00:54:51.890

```
arrayWithJustThrees = myArray.filter(function (object) { return object.ID === 3 }) 
```

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)

# postgresql - 在 PostgreSQL 中消除“word is too long to be indexed”通知的最简单方法

> ID：12925623
> 
> 赞同：1
> 
> 时间：2012-10-17T00:53:32.357
> 
> 标签：postgresql, tsvector

我有一些导致这种情况发生的 SQL 语句：

```
NOTICE:  word is too long to be indexed
DETAIL:  Words longer than 2047 characters are ignored. 
```

首先不生成这些通知的最简单方法是什么？（这是一个很长的故事，为什么我想这样做。）

这种陈述的一个例子是：

```
update rev set html = regexp_replace(html,
                         '***=<a href="' || old.url || '">',
                         '<a href="' || new.url || '">',
                         'gi')
        where id in (
            select id
                    from rev
                    where to_tsvector('tags_only', html) @@
                      plainto_tsquery('tags_only','<a href="' || old.url || '">')
        ) 
```

这不是带有长 url 的 A 标签或任何导致问题的东西。它可能是嵌入式 CDATA 样式的图形。我不在乎它们没有被索引，无论它们是什么。我只是希望这些通知不会发生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T01:03:05.547

如果您不介意取消所有通知，只需更改 PostgreSQL 错误报告级别。`client_min_messages`定义发送给客户端的最低级别的错误/警告/通知消息，`log_min_messages`对保存在日志中的消息也是如此。可能的值为：`DEBUG5, DEBUG4, DEBUG3, DEBUG2, DEBUG1, INFO, NOTICE, WARNING, ERROR, LOG, FATAL, PANIC`

编辑：

仅对此查询禁用：`SET LOCAL client_min_messages TO WARNING;`

仅对此会话禁用：`SET SESSION client_min_messages TO WARNING;`

对此用户禁用：`ALTER ROLE username SET client_min_messages TO WARNING;`

# objective-c - 从 YouTube 播放列表中主动获取的 YouTube 视频的 UITableView

> ID：12925632
> 
> 赞同：1
> 
> 时间：2012-10-17T00:55:00.723
> 
> 标签：objective-c, ios, uitableview, youtube, ios6

我已经搜索了大约 2 年，但我似乎无法找到可行的解决方案。我已经学会了如何通过 UIWebView 嵌入 youtube 视频，但是如果有人想要一个动态的 UITableView 从给定的播放列表中主动获取 youtube 视频，那么这种情况是不可用的。有没有人知道如何做到这一点，或者有人可以根据如何解决这个问题向我指出正确的方向吗？

# codeigniter - codeigniter group_by 只返回第一行

> ID：12925637
> 
> 赞同：6
> 
> 时间：2012-10-17T00:55:26.253
> 
> 标签：codeigniter, group-by

我在codeigniter中有这个问题：我尝试从数据库中制作导航树系统。

模型：

```
function getServices()
{
 $this->db->select('service_url, service_title, category_title');    
 $this->db->join('services_category', 'services_category.id=services.category_id');    
 $this->db->group_by('category_title');
 $this->db->order_by('service_title', 'ASC');    
 $query = $this->db->get('services');

 if($query->result() == TRUE)    
 {    
    foreach($query->result_array() as $row)
    {
       $result[] = $row;
    }
    return $result;
  }
} 
```

看法：

```
<?php if(isset($services) && $services) : foreach($services as $s) : ?>    
   <ul>
     <li><a href="#"><?php echo $s['category_title'] ?></a>    
       <ul>
        <li><?php echo anchor('services/' . $s['service_url'], $s['service_title']); ?></li>
       </ul>    
     </li>    
   </ul>    
<?php endforeach; ?>    
<?php endif; ?> 
```

现在到目前为止一切顺利，结果是按预期的方式返回每个类别，但服务每个类别只返回一个服务，并且在某些类别中大约有 15 个服务。任何人都可以帮我一把，或者解释一下出了什么问题？太感谢了。

“我不是php或codeigniter方面的专家，我刚开始不久，所以请不要拍初学者。”

注意：我尝试不使用 group_by 和 order_by，并返回所有服务，但类别重复，

前任：

```
category-a
   service1
category-a
   service2
category-b
   service10
category-b
   service11
category-c
   service30
category-c
  service31
.... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T02:05:05.190

这是使用[Group By (MySQL)](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)时聚合函数的好读物。一个简单的解释是这样的

```
Date        | Amount
2012-01-01  | 5
2012-01-01  | 6
2012-01-02  | 1
2012-01-02  | 6 
```

现在使用这样的 SUM 聚合函数。

```
SELECT Date, SUM(Amount) as Total FROM table GROUP BY Date ORDER BY DATE; 
```

结果将是：

```
Date        | Amount
2012-01-01  | 11
2012-01-02  | 7 
```

在您的场景中，`GROUP BY`它不会按预期工作，因为它只会获得一个类别，因为您按每个类别对查询进行分组。

理想的解决方案是拥有 2 个独立的功能，`GetCategories`并且`GetServices`.

```
function getServices($category_id = false)
{
  $this->db->select('service_url, service_title, category_title');
  $this->db->join('services_category', 'services_category.id=services.category_id');
  if ($category_id !== false)
    $this->db->where('services.category_id', $category_id);
  $this->db->order_by('service_title', 'ASC');
  $query = $this->db->get('services');

  if($query->result() == TRUE)
  {
    foreach($query->result_array() as $row)
    {
      $result[] = $row;
    }
    return $result;
  }
}

function getCategories()
{
  $this->db->select('category_id, category_title');
  $this->db->order_by('category_title', 'ASC');
  $query = $this->db->get('services_category');

  if($query->result() == TRUE)
  {
    foreach($query->result_array() as $row)
    {
      $result[] = $row;
    }
    return $result;
  }
} 
```

然后在您的视图文件中，您只需对类别执行一个 for 循环，然后对每个类别执行另一个查询。这是它的外观轮廓，

```
<?php if(isset($categories) && $categories) : foreach($categories as $category) : ?>
  <ul>
    <li><a href="#"><?php echo $category['category_title'] ?></a>
      <ul>
        // how you get $services is similar to how you get $categories
        <?php $services = $this->modelname->getServices($category['category_id']);
        <?php foreach($services as $s) : ?>
          <li><?php echo anchor('categories/' . $s['service_url'], $s['service_title']); ?></li>
        <?php endforeach; ?>
      </ul>
    </li>
  </ul>
<?php endforeach; ?>
<?php endif; ?> 
```

# wcf - 签名参考 URI 到 SecurityTokenReference 的映射不正确

> ID：12925642
> 
> 赞同：0
> 
> 时间：2012-10-17T00:56:10.467
> 
> 标签：wcf, interop, ws-security

我有一个 wcf 客户端，我需要同时使用证书和用户名安全性。

在我输出的标头签名中，存在两个参考元素。一个映射（通过 URI）到 UsernameToken，我的理解是另一个引用元素应该映射到 SecurityTokenReference，但事实并非如此。

我传出的soap标头的安全部分如下

```
<o:UsernameToken u:Id="uuid-89f26492-f6ad-4e9d-9106-03ae8dfd6774-1"     xmlns:u="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
 <o:Username>xxxxxxx</o:Username>
 <o:Password o:Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-    profile-1.0#PasswordText">xxxxxxx</o:Password>
</o:UsernameToken>
<Signature xmlns="http://www.w3.org/2000/09/xmldsig#">
 <SignedInfo>
  <CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
  <SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"/>
  <Reference URI="#_1">
   <Transforms>
    <Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
   </Transforms>
   <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/><DigestValue>FNjRLXvhojvaLY/4MhdtsK1cicE=</DigestValue>
  </Reference>
  <Reference URI="#uuid-89f26492-f6ad-4e9d-9106-03ae8dfd6774-1">
   <Transforms>
    <Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
   </Transforms>
   <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/><DigestValue>ZhCGi22F57ASm5YGVjLxe/s5wyY=</DigestValue>
  </Reference>
 </SignedInfo>
 <SignatureValue>CvxcSSur/epImkRyDh8AywiE3E6GabKzhQhGm/ISpHroWFEryIgpFCStZpGdvt6/QxXskgIiP39eQQILRm1CsTFBZkzP+mb1ktis2OlyiGOFfVNnOXVseOktMGt1WpeNlssFNk0prP9gy5EU3lWwxENvHFy8/IZZWCR8A4Cm+yA=</SignatureValue>
 <KeyInfo>
  <o:SecurityTokenReference>
   <o:Reference ValueType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3" URI="#uuid-89f26492-f6ad-4e9d-9106-03ae8dfd6774-3"/>
  </o:SecurityTokenReference>
 </KeyInfo>
</Signature> 
```

您可以看到一个参考 URI 映射到 UsernameToken 的 Id，但另一个参考 URI 是 #_1，而我期望它是 #uuid-89f26492-f6ad-4e9d-9106-03ae8dfd6774-3（SecurityTokenReference 的 URI )

我创建自定义绑定的代码如下

```
 private System.ServiceModel.Channels.Binding GetBinding()
    {
        System.ServiceModel.Channels.AsymmetricSecurityBindingElement asbe = new AsymmetricSecurityBindingElement();
        asbe.MessageSecurityVersion = MessageSecurityVersion.WSSecurity10WSTrustFebruary2005WSSecureConversationFebruary2005WSSecurityPolicy11BasicSecurityProfile10;
        asbe.InitiatorTokenParameters = new System.ServiceModel.Security.Tokens.X509SecurityTokenParameters();
        asbe.RecipientTokenParameters = new System.ServiceModel.Security.Tokens.X509SecurityTokenParameters();
        asbe.MessageProtectionOrder = System.ServiceModel.Security.MessageProtectionOrder.SignBeforeEncrypt;
        asbe.SecurityHeaderLayout = SecurityHeaderLayout.Strict;
        asbe.IncludeTimestamp = false;
        asbe.SetKeyDerivation(false);
        asbe.DefaultAlgorithmSuite = System.ServiceModel.Security.SecurityAlgorithmSuite.Basic128Rsa15;

        asbe.EndpointSupportingTokenParameters.Signed.Add(new UserNameSecurityTokenParameters());

        CustomBinding myBinding = new CustomBinding();
        myBinding.Elements.Add(asbe);
        myBinding.Elements.Add(new TextMessageEncodingBindingElement(MessageVersion.Soap11, Encoding.UTF8));

        HttpsTransportBindingElement httpsBindingElement = new HttpsTransportBindingElement();
        httpsBindingElement.RequireClientCertificate = true;
        myBinding.Elements.Add(httpsBindingElement);

        return myBinding;
    } 
```

有谁知道我需要更改哪些配置设置才能将参考成功映射到 SecurityToken？

请注意，这个问题实际上是我在[如何使 WCF 客户端符合特定 WS-Security - 签名 UsernameToken 和 SecurityTokenReference](https://stackoverflow.com/questions/12832213/how-to-make-wcf-client-conform-to-specific-ws-security-x509-username-passwor)中详细介绍的主要问题的子问题。看起来签署证书不是可以通过 ootb 配置或属性设置完成的，因此答案可能在于手动编写签名块。这就是我接下来要看的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T00:02:56.003

终于解决了我在相关问题上发布的问题 -[如何使 WCF 客户端符合特定的 WS-Security - 签署 UsernameToken 和 SecurityTokenReference](https://stackoverflow.com/questions/12832213/how-to-make-wcf-client-conform-to-specific-ws-security-sign-usernametoken-and)

# php - 如何在 PHP 中将“2012-10-16T14:46:33+00:00”转换为 Unix 时间戳？

> ID：12925644
> 
> 赞同：0
> 
> 时间：2012-10-17T00:56:12.347
> 
> 标签：php, time, format, timestamp, converter

如何将格式中的字符串转换`2012-10-15T13:16:13+00:00`为 PHP 中的 Unix 时间戳？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T00:59:12.960

[strtotime()](http://php.net/strtotime)应该能够处理它。

例子

```
echo strtotime("2012-10-15T13:16:13+00:00") ; // 1350306973 
```

或者

```
[ghoti@pc ~]$ php -r '$d="2012-10-15T13:16:13+00:00"; print strtotime($d) . "\n";'
1350306973 
```

一旦你有了时间戳，你就可以用它做任何事情。

```
[ghoti@pc ~]$ php -r '$d="2012-10-15T13:16:13+00:00"; $t=strtotime($d); print strftime("%+", $t)."\n";'
Mon Oct 15 09:16:13 EDT 2012 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T15:30:58.093

**Baba**提供的使用[DateTime 类](http://php.net/manual/en/book.datetime.php)的解决方案：

```
$dt = new DateTime("2012-10-15T13:16:13+00:00");
echo $dt->getTimestamp(); 
```

# error-logging - nagios 错误：无法读取对象配置数据

> ID：12925645
> 
> 赞同：3
> 
> 时间：2012-10-17T00:56:22.360
> 
> 标签：error-logging, nagios

我在 ubuntu 12.04 上安装了全新的 nagios3。登录到 Web 界面并单击任何链接后，我收到错误消息：

```
Error: Could not read object configuration data!

Here are some things you should check in order to resolve this error:
Verify configuration options using the -v command-line option to check for errors.
Check the Nagios log file for messages relating to startup or status data errors. 
```

我用 -v 选项运行它，它没有报告任何错误：

```
Total Warnings: 0
Total Errors:   0

Things look okay - No serious problems were detected during the pre-flight check 
```

nagios 日志和 apache 错误日志和调试日志都与此无关。有谁知道如何打开日志，这会给我一些有用的错误？或者，如果有人知道如何在没有额外日志记录的情况下解决这个特定问题，我想这也可以。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-09T21:16:55.917

可能是权限问题。/var/cache/nagios3 可能设置了错误的用户/组或权限。

# mysql - SQL 查询，其中所有 A 必须具有来自 B 的以下相等的数？

> ID：12925646
> 
> 赞同：0
> 
> 时间：2012-10-17T00:56:30.183
> 
> 标签：mysql, sql, logic, subquery, relational-division

这是我的意思的具体例子。我定义了下表：

```
CREATE TABLE pets (
    id INTEGER UNSIGNED NOT NULL,
    name VARCHAR(20) NOT NULL,
    breed VARCHAR(20) NOT NULL,
    color VARCHAR(20) NOT NULL,
    weight INTEGER UNSIGNED NOT NULL,
    PRIMARY KEY (id)
); 
```

我将如何编写 SQL 查询来查找包含与可卡犬颜色相同的宠物的品种？因此，如果数据库中的所有可卡犬都是黑色或白色，我需要找到至少有 1 只黑色宠物和 1 只黄色宠物的所有不同品种。我已经被这个问题难住了一段时间，并且无法在网上找到类似的答案，所以这里的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T01:29:23.597

与往常一样，将实际的 RDBMS 保密会使事情变得更加困难。

### 对于支持 CTE 的数据库（PostgreSQL、Oracle、SQL Server、..）

CTE：

```
WITH colors AS (
    SELECT DISTINCT color
    FROM   pets
    WHERE  breed = 'cocker spaniels'
    )
SELECT p.breed
FROM   colors c
JOIN   pets   p USING (color)
GROUP  BY p.breed
HAVING count(DISTINCT p.color) = (SELECT count(*) FROM color); 
```

### 解释

1.  在 CTE 中获取一组不同颜色的可卡犬`color`。
2.  加入所有相同颜色的宠物，按品种分组宠物
3.  在该`HAVING`子句中验证不同颜色的数量是否与可卡犬进入的颜色数量相匹配。

尔格：由此产生的宠物（包括可卡犬）具有可卡犬的所有颜色 - 甚至可能更多。

**这是关系划分**的一个特例。我们最近在[这个相关问题](https://stackoverflow.com/q/7364969/939860)下收集了一整套查询。

* * *

### 对于 MySQL

```
SELECT p.breed
FROM (
   SELECT DISTINCT color
   FROM   pets
   WHERE  breed = 'cocker spaniels'
   ) c
JOIN   pets p USING (color)
GROUP  BY p.breed
HAVING count(DISTINCT p.color) = (
   SELECT count(DISTINCT color)
   FROM   pets
   WHERE  breed = 'cocker spaniels'
   ); 
```

[**-> sqlfiddle**](http://sqlfiddle.com/#!2/7adee/5)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T01:25:53.703

如果我理解正确，您不想要全白或全黑的品种。你只想要白色和黑色的品种（可卡犬的不同颜色）。基于此，这就是我想出的（尽管它可能不是最有效的）。

```
DECLARE @pets TABLE(
  id INTEGER NOT NULL,
  name VARCHAR(20) NOT NULL,
  breed VARCHAR(20) NOT NULL,
  color VARCHAR(20) NOT NULL,
  weight INTEGER NOT NULL,
  PRIMARY KEY (id)
);

INSERT INTO @pets VALUES (1, 'jeff', 'breed1', 'black', 20)
INSERT INTO @pets VALUES (2, 'larry', 'breed1', 'white', 20)
INSERT INTO @pets VALUES (3, 'bob', 'breed2', 'black', 30)
INSERT INTO @pets VALUES (4, 'kevin', 'breed3', 'black', 30)
INSERT INTO @pets VALUES (5, 'jerry', 'breed3', 'white', 30)

DECLARE @breed VARCHAR(50)
SET @breed = 'breed1'
;WITH cte (color) AS (SELECT DISTINCT color FROM @pets WHERE breed = @breed)
SELECT breed, COUNT(id) FROM @pets WHERE color IN (SELECT color FROM cte)
  AND breed != @breed
GROUP BY breed
HAVING COUNT(id) >= (SELECT COUNT(*) FROM cte)

Result: breed3 
```

如果您使用的 SQL 版本不支持 CTE，则可以使用临时表或表变量来保存您需要在其他品种中寻找的颜色。希望这会有所帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T01:46:09.173

```
--parameter
DECLARE @breed varchar(20)
SET @breed = 'Cocker Spaniel' 

--count distinct colors for param
DECLARE @colors int
SELECT @colors = COUNT(DISTINCT color) FROM pets WHERE breed = @breed 

--match param breed with others based on color
--return only breed with matching count of distinct colors
SELECT otherBreeds.breed
FROM
    (SELECT DISTINCT breed, color FROM pets WHERE breed = @breed) AS thisBreed
    LEFT OUTER JOIN (SELECT DISTINCT breed, color FROM pets WHERE breed <> @breed) AS otherBreeds
    ON thisBreed.color = otherBreeds.color
GROUP BY otherBreeds.breed
HAVING COUNT(DISTINCT otherBreeds.color) = @colors 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T01:11:30.450

```
SELECT  DISTINCT breeds  FROM pets 
WHERE color in (SELECT color FROM pets where name='cocker spaniels') 
```

# sql - 使用 DbSet 时 .SqlQuery()，如何使用命名参数？

> ID：12925649
> 
> 赞同：6
> 
> 时间：2012-10-17T00:57:00.317
> 
> 标签：sql, entity-framework, sql-injection

我非常喜欢使用命名参数而不是基于字符串的参数注入。对于大多数形式的 SQL 注入，它是类型安全且安全的。在旧的 ADO.NET 中，我会为我的查询创建一个 SqlCommand 对象和一堆 SqlParameters。

```
var sSQL = "select * from Users where Name = @Name";
var cmd = new SqlCommand(conn, sSQL);
cmd.Parameters.AddWithValue("@Name", "Bob");
cmd.ExecuteReader(); 
```

现在，在实体框架中，（在此链接上）似乎已经回归到一个简单的 String.Format 语句和字符串注入：（为讨论而简化）

```
MyRepository.Users.SqlQuery("Select * from Users where Name = {0}", "Bob"); 
```

有没有办法在实体框架 DbSqlQuery 类中使​​用命名参数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T01:02:54.560

```
var param = new ObjectParameter(":p0", "Bob");
MyRepository.Users.SqlQuery("Select * from Users where Name = :p0", param); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-25T17:46:49.390

由于我无法发表评论，我正在修复另一个答案：

```
var param = new ObjectParameter("p0", "Bob");
MyRepository.Users.SqlQuery("Select * from Users where Name = :p0", param); 
```

实例化 ObjectParameter 时不必在名称上加上冒号。这就是为什么 SLC 得到了他在评论中提到的错误。

# android - MiUI HTC OneX + ActionbarSherlock + Android Asset Studio 主题未在选定选项卡上突出显示

> ID：12925652
> 
> 赞同：2
> 
> 时间：2012-10-17T00:57:32.640
> 
> 标签：android, android-actionbar, actionbarsherlock, android-assets

[我使用了来自http://actionbarsherlock.com/download.html](http://actionbarsherlock.com/download.html)的 ActionBarSherlock 示例项目中的示例。

[然后我从http://jgilfelt.github.com/android-...rtiaryColor=F2F2F2,100&accentColor=33B5E5,100](http://jgilfelt.github.com/android-...rtiaryColor=F2F2F2,100&accentColor=33B5E5,100)将默认主题应用于应用程序

这是奇怪的行为。当我检查带有导航作为选项卡 (ActionBar.NAVIGATION_MODE_TABS) 的活动时，只要我在 HTC One X 上运行的 MiUI ROM 上应用主题，第一个和最后一个选项卡就不会突出显示

相同的应用程序在股票 android、模拟器和除 MiUI 之外的所有其他配置上运行良好

有人可以帮忙吗？

为了让生活更轻松，我在[http://bit.ly/Tu3xji上传了示例 eclipse 项目导出](http://bit.ly/Tu3xji)

以下是问题的示例：

![选择第一个选项卡时](../Images/6e4586ce30c33d73c1dcd279e157c4ef.png) ![选择第二个选项卡时](../Images/46451c34116295c4b050f19efc23690d.png)

# fonts - @font-face 镀铬渲染

> ID：12925654
> 
> 赞同：2
> 
> 时间：2012-10-17T00:57:36.267
> 
> 标签：fonts, font-face

我想知道其他人是否遇到过这个问题 - @font-face 字体在 Chrome 中无法正确呈现，有时它们会，有时不会，这实际上是问题所在，因为我无法自己跟踪问题所在。在其他浏览器中一切都很好。我正在使用 Icomoon 字体及其语法：

```
@font-face {
    font-family: 'entypo';
    src:url('/fonts/entypo.eot');
    src:url('/fonts/entypo.eot?#iefix') format('embedded-opentype'),
        url('/fonts/entypo.svg#entypo') format('svg'),
        url('/fonts/entypo.woff') format('woff'),
        url('/fonts/entypo.ttf') format('truetype');
    font-weight: normal;
    font-style: normal;
}

/* Use the following CSS code if you want to use data attributes for inserting your icons */
[data-icon]:before {
    font-family: 'entypo';
    content: attr(data-icon);
    speak: none;
    font-weight: normal;
    -webkit-font-smoothing: antialiased;
}

/* Use the following CSS code if you want to have a class per icon */
[class^="icon-"]:before, [class*=" icon-"]:before {
    font-family: 'entypo';
    font-style: normal;
    speak: none;
    font-weight: normal;
    -webkit-font-smoothing: antialiased;
    line-height:1;
} 
```

.htaccess 在字体文件夹中：

```
AddType application/vnd.ms-fontobject .eot
AddType font/ttf .ttf
AddType font/otf .otf
AddType application/x-font-woff .woff 
```

root .htaccess 具有相同的规则。

所以我不知道还有什么问题，并且弄乱了我的字体。非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-20T19:07:44.130

Windows Chrome 中存在一个[已知问题](https://code.google.com/p/chromium/issues/detail?id=122465)，它不会呈现私人使用区域 unicode 字符。

如果您`text-rendering: optimizeLegibility;`的项目中有，请设置`text-rendering: auto;`图标类，它们应该在 Windows Chrome 中呈现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T01:34:02.913

似乎 chrome 在渲染字体方面存在一些问题，至少有一些规则，您可以查看这篇[文章](https://css-tricks.com/forums/discussion/15021/font-face-rendering-issue-in-chrome-for-pc/p1)以获取一些如何改善您的情况的提示以及[typekit](http://blog.typekit.com/2011/01/26/css-properties-that-affect-type-rendering/)的此页面以更好地了解该过程。

再见

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-15T00:31:56.973

老问题，但同样的问题/错误往往会在 Chrome 中持续存在......

这可能对某些人有帮助。尽管其他浏览器运行良好，但我正在使用 @font-face 指定字体从 Chrome 获得空白打印预览和打印。

事实证明，当不是从本地主机提供服务，而是从我的实际服务器提供服务时，它工作正常。

希望我在很多很多小时前尝试过。

# asp.net-mvc - 将 MVC 4 CodeFirst 部署到 Azure

> ID：12925656
> 
> 赞同：3
> 
> 时间：2012-10-17T00:57:46.703
> 
> 标签：asp.net-mvc, azure, asp.net-mvc-4, azure-sql-database

我正在尝试 90 天免费试用 azure。部署/发布网站和创建数据库非常容易，但由于某种原因，我的表没有在数据库中创建。我正在使用实体框架 4.4（我相信）和代码优先迁移。我读过 azure 使用它自己的连接字符串，但我继续更改了我的连接字符串。我花了几个小时在这上面，我不知道出了什么问题以及为什么我的表没有被创建。我部署网站、启用迁移、添加迁移、更新数据库，然后通过选中代码优先复选框进行发布。也许我的连接字符串是错误的？任何帮助是极大的赞赏。

在“MyProject.Web”web.config 中：

```
<configSections>
<!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
<section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" /> 
```

```
<connectionStrings>
<add name="DefaultConnection" connectionString="Data Source=tcp:n98my***.database.windows.net,1433;Initial Catalog=slutips_db;User Id=****;Password=****;" />
</connectionStrings> 
```

然后在 'MyProject.Data' app.config 中，我的 datacontext.cs 保存在其中：

```
<entityFramework>
<defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework" />
<contexts>
  <context type="SeluCmpsTutorials.Data.DataContext">
    <databaseInitializer type="System.Data.Entity.MigrateDatabaseToLatestVersion">
      <parameters>
        <parameter value="slutips_db"/>
      </parameters>
    </databaseInitializer>
  </context>
</contexts>
</entityFramework> 
```

*   我还注意到，即使我的所有连接字符串都已更改，当我添加迁移和更新数据库时，它仍然使用 ./sqlexpress 本地数据库，这怎么可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T18:05:59.823

关于 sql azure 连接要注意的关键问题：对于用户 ID，它实际上通常需要是用户 ID @服务器名称 - 会在连接字符串中读取 youruserid@n98my***。

另外，不确定您是否需要“tcp:”（不使用它），您可能还想添加 providerName="System.Data.SqlClient"

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T07:32:52.357

您的 db 用户是否有必要的数据库修改权限？你是如何设置你的用户的？

最初，您应该为 Azure sql 服务器创建登录名，如下所示：（在服务器主数据库上执行以下 sql，将尖括号值替换为实际值）

`CREATE LOGIN [<SomeServerLogin>] WITH PASSWORD=N'<somepassword>'`

然后以管理员身份连接到您的 slutips_db 数据库并执行以下 sql

```
CREATE USER [<slutips_db_user>] FROM LOGIN [<SomeServerLogin>];
GO;
EXEC sp_addrolemember 'dbmanager', '<slutips_db_user>';
GO;
EXEC sp_addrolemember 'loginmanager', '<slutips_db_user>';
GO; 
```

'dbmanager' 角色允许创建表\管理。

'loginmanager' 角色允许在当前数据库中创建另一个用户（您的 slutips_db_user 将被允许执行`CREATE USER <slutips_db_user1> FROM LOGIN <SomeServerLogin1>`子句

Edit1：另外-确保您的连接字符串用户具有 user@n98my*** (user@server) 格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T04:40:05.703

如果您遵循本教程： [https](https://www.windowsazure.com/en-us/develop/net/tutorials/web-site-with-sql-database/) ://www.windowsazure.com/en-us/develop/net/tutorials/web-site-with-sql-database/它将向您展示如何连接 Visual Studio（2012 年例如，不确定是否适用于其他任何人）与 Azure - 基本上你想登录到门户，并下载发布凭据。这将包含您的数据库连接字符串，然后您可以使用该字符串将代码优先迁移推送到 Azure。

您所做的看起来像是手动将属性添加到 app.config 中。发布的工作方式，它在您的 .config 文件中定义一个本地版本，如下所示：

```
<entityFramework>
<defaultConnectionFactory type="System.Data.Entity.Infrastructure.LocalDbConnectionFactory, EntityFramework">
  <parameters>
    <parameter value="v11.0" />
  </parameters>
</defaultConnectionFactory> 
```

然后，当你发布时，VS 会自动将所需的东西插入到你的 .config 中——如果我去 FTP 到我的网站并查看生成的 .config 文件，你会看到：

```
<contexts>
  <context type="Web_App.Models.TrackSafeDb, Web App">
    <databaseInitializer type="System.Data.Entity.MigrateDatabaseToLatestVersion`2[[Web_App.Models.TrackSafeDb, Web App], [Web_App.Migrations.Configuration, Web App]], EntityFramework, PublicKeyToken=*******************">
      <parameters>
        <parameter value="Web_App.Models.TrackSafeDb_DatabasePublish" />
      </parameters>
    </databaseInitializer>
  </context>
</contexts> 
```

所以我会尝试从你的本地 app.config 中删除无关的东西并重新发布

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-13T23:51:45.303

尝试将加密添加到您的连接字符串...

```
<connectionStrings>
<add name="DefaultConnection" connectionString="Data Source=tcp:n98my***.database.windows.net,1433;Initial Catalog=slutips_db;User Id=****;Password=****;Integrated Security=False;Persist Security Info=True;Encrypt=True" />
</connectionStrings> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-20T14:01:29.380

我所做的是转到我的 azure 管理门户。点击数据库。查看连接字符串，然后将它们直接复制到我的相关配置中。在我的情况下，它的“发布”配置。

确保启用 Web 配置转换并正常工作。

还要确保您已启用对每个数据库的防火墙访问...您必须单击“启用通过防火墙连接”或类似的东西。它在门户网站的 db 选项中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-20T18:33:21.820

看了几天这个问题，有几个想法。首先，您的上下文名称实际上是 DefaultConnection。实体框架（为了与无参数构造函数一起使用）喜欢连接字符串名称以匹配上下文的名称。

例如，如果您这样声明一个新的上下文变量：

```
var context = new MyEntities(); 
```

那么你的连接字符串应该被调用`MyEntities`

```
<connectionStrings>
<add name="MyEntities" connectionString="Data Source=tcp:n98my***.database.windows.net,1433;Initial Catalog=slutips_db;User Id=****;Password=****;" />
</connectionStrings> 
```

其次，您是否 100% 确定没有 web.config 转换文件和/或您还正确更新了这些文件中的连接字符串？

第三，请记住，在部署时，除了 web.config 之外的任何配置文件都会被忽略。执行程序集是 Web 应用程序，而不是数据项目或任何其他项目。与 EF 设置和部署相关的任何配置都应位于 web.config 文件中（如您在数据 app.config 中的片段）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-12-29T12:02:39.510

我遇到了完全相同的问题，它与我的包含“%”字符的密码相关联。我检查了 Azure 上与 ftp 连接的结果 web.config，我的密码部分包含“95%a”变成了“95ª”……自动。这可能是 azure 的 Web 部署功能中的一个错误，因为我在本地发布配置文件中的密码是正确的。

如果生成的数据库密码确实在生成的连接字符串中损坏，则必须重置它：

*   在 Windows Azure 管理中，在 SQL DATABASES 选项卡中，选择 SERVERS 列表（不是 DATABASE 列表）并单击您的服务器
*   在仪表板中，有一个重置管理员密码的链接
*   在 Visual Studio 中，更新发布配置文件的 connectionString（设置、数据库）中的密码
*   对 web.config 进行更改（真实的，不是评论），否则将不会重新发布
*   发布，并在第一次使用数据库时，将应用迁移

# php - xampp vs xampplite的特殊配置？

> ID：12925657
> 
> 赞同：1
> 
> 时间：2012-10-17T00:57:50.383
> 
> 标签：php, mysql

我试图在安装在 Ubuntu 和 WinXP 中的 xampp 上运行一个 php 文件。两者都导致错误，但在 WinXP 中尝试在 xampplite 上运行时成功。需要在完整的 xampp 版本上设置任何特殊配置吗？php代码如下：

```
<?php
    require_once('database.php');

    // Get category ID
    if(!isset($category_id)) {
        $category_id = $_GET['category_id'];
        if (!isset($category_id)) {
            $category_id = 1;
        }
    }

    // Get name for current category
    $query = "SELECT * FROM categories
              WHERE categoryID = $category_id";
    $category = $db->query($query);
    $category = $category->fetch();
    $category_name = $category['categoryName'];

    // Get all categories
    $query = 'SELECT * FROM categories
              ORDER BY categoryID';
    $categories = $db->query($query);

    // Get products for selected category
    $query = "SELECT * FROM products
              WHERE categoryID = $category_id
              ORDER BY productID";
    $products = $db->query($query);
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<!-- the head section -->
<head>
    <title>My Guitar Shop</title>
    <link rel="stylesheet" type="text/css" href="main.css" />
</head>

<!-- the body section -->
<body>
    <div id="page">

    <div id="header">
        <h1>Product Manager</h1>
    </div>

    <div id="main">

        <h1>Product List</h1>

        <div id="sidebar">
            <!-- display a list of categories -->
            <h2>Categories</h2>
            <ul class="nav">
            <?php foreach ($categories as $category) : ?>
                <li>
                <a href="?category_id=<?php echo $category['categoryID']; ?>">
                    <?php echo $category['categoryName']; ?>
                </a>
                </li>
            <?php endforeach; ?>
            </ul>
        </div>

        <div id="content">
            <!-- display a table of products -->
            <h2><?php echo $category_name; ?></h2>
            <table>
                <tr>
                    <th>Code</th>
                    <th>Name</th>
                    <th class="right">Price</th>
                    <th>&nbsp;</th>
                </tr>
                <?php foreach ($products as $product) : ?>
                <tr>
                    <td><?php echo $product['productCode']; ?></td>
                    <td><?php echo $product['productName']; ?></td>
                    <td class="right"><?php echo $product['listPrice']; ?></td>
                    <td><form action="delete_product.php" method="post"
                              id="delete_product_form">
                        <input type="hidden" name="product_id"
                               value="<?php echo $product['productID']; ?>" />
                        <input type="hidden" name="category_id"
                               value="<?php echo $product['categoryID']; ?>" />
                        <input type="submit" value="Delete" />
                    </form></td>
                </tr>
                <?php endforeach; ?>
            </table>
            <p><a href="add_product_form.php">Add Product</a></p>
        </div>
    </div>

    <div id="footer">
        <p>&copy; <?php echo date("Y"); ?> My Guitar Shop, Inc.</p>
    </div>

    </div><!-- end page -->
</body>
</html> 
```

数据库已创建，没有任何问题。谢谢

# java - For循环在第二次之后不执行第一个命令

> ID：12925660
> 
> 赞同：4
> 
> 时间：2012-10-17T00:58:03.317
> 
> 标签：java, loops, for-loop

这是我的代码：

```
import java.util.Scanner;

public class BankAccount1
{
public static void main(String[] args)
{
    Scanner input = new Scanner(System.in);

    char pickup;
    char size;
    char type;
    String name;

    double cost=0.0;
    int i;

    for (i=0; i<2; i++)
    {
    System.out.println("What is your name?");
    name = input.nextLine();

    System.out.println("size of pizza: ");
    size =  input.next().charAt(0);

    System.out.println("type of pizza: ");
    type = input.next().charAt(0);

    System.out.println("pick up or delivery?");
    pickup = input.next().charAt(0);

    if(size == 'S' || type == 'V') {cost = 10.0;}
    else if(size == 'M' || type == 'V') {cost = 12.25;}
    else if(size == 'L' || type == 'V') {cost = 14.50;}
    else if(size == 'S' || type == 'C') {cost = 7.0;}
    else if(size == 'M' || type == 'C') {cost = 8.0;}
    else if(size == 'L' || type == 'C') {cost = 9.0;}

    if(pickup == 'D'){
    cost=cost+1.50;
    System.out.println("Name: "+name+". Your cost is: "+cost);}
    else { 
    System.out.println("Name: "+name+". Your cost is: "+cost);}

    } 

}

} 
```

我的代码中有一个 for 循环，它询问名称、大小、类型和拾取。第一次运行时，它要求输入所有字段，但第二次，名称字段由于某种原因不允许我输入姓名，它打印“你叫什么名字？” 但它不允许我输入名字......？有人能告诉我为什么吗？谢谢。

这就是它的样子：http: [//i.stack.imgur.com/eb1BA.jpg](http://i.stack.imgur.com/eb1BA.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T01:04:45.447

由于这个事实

```
input.next() 
```

不消耗换行符，这些被传递回您的循环并且不允许输入值。您需要添加：

```
for (i = 0; i < 2; i++) {
   // existing input.next() statements in here
  ...

   input.nextLine();
} 
```

在`for`循环结束时修复。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T01:04:55.630

当您使用`Scanner`with 时`System.in`，直到换行符才会读取数据`System.in`（您已**按 Enter 键**）。所以你在扫描仪缓冲区中实际拥有的是：

```
Jake\nL\nV\nD\n 
```

这里的关键是在`D`你按下回车键之前它不会被发送到扫描仪的缓冲区。这就是为什么`\n`在最后。通常，当您调用`input.next()`时，先前的流浪换行符会被吞噬。但是，当您`input.nextLine()`在 for 循环中第二次/第三次调用时，它正在读取那个流浪的尾随换行符：

```
 here ----v
Jake\nL\nV\nD\n 
```

所以你得到一个空行，基本上读取`D`和之间的所有内容`\n`，这什么都没有。

您需要`nextLine()`每次调用并调用`charAt(0)`生成的字符串。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T01:04:27.727

用 input.nextLine() 替换你的 input.next()。那应该解决它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-17T21:12:30.443

我有一个类似的问题，这对我有帮助。在循环外声明：

```
boolean ranOnce=false; 
```

然后在循环内声明这个

```
if(!ranOnce){ranOnce=true;String s=input.nextLine();} 
```

# php - CodeIgniter 最佳实践项目列表

> ID：12925666
> 
> 赞同：1
> 
> 时间：2012-10-17T00:59:09.680
> 
> 标签：php, codeigniter, codeigniter-2, categories, codeigniter-routing

我正在 CodeIgniter 中创建一个 ebay 风格（但更简单）的商店，我想知道处理项目代码/控制器的最佳方法。

目前，我有一个 Category 控制器，它是主控制器（在路由中）。/category/id 应该显示特定类别的项目列表，/category 或 / 显示所有项目。

控制器中的类别索引（$id=0）{} 加载生成类别列表的类别帮助器，然后我在视图中将其回显。

现在我已经到了添加项目方面的阶段......用户需要能够添加项目，查看特定项目，并且类别代码需要能够显示所有项目或特定类别的项目。

我正在考虑拥有一个带有 add_item、view_item 的项目控制器，但是现在我想知道我应该如何从类别控制器中获取类别列表。

我是否应该有一个项目助手来加载项目模型，根据类别获取项目列表，将列表分配给变量并回显列表？当用户想要查看特定项目时，它会加载项目控制器 view_item，并添加 add_item 等？

我还希望在他们查看项目时显示类别，所以如果我这样做，我还需要在项目控制器中加载类别帮助程序......由于代码重复，这是不好的做法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T01:29:03.597

简而言之，这就是我要做的。

*   /, 显示所有项目。
*   /category/xyz，显示 XYZ 类别的所有项目。
*   /item/view/xyz，显示项目 XYZ。
*   /item/add，添加一个项目。
*   ...

在控制器中重用模型是正常的。否则会很可怕；这将意味着大量的代码重复。尽可能多地重用你的助手也是正常的。这就是助手的目标！实现在很多地方重用的功能。当您开始复制+粘贴相同的行时，那是您不进行重用的时候。创建一个函数并重用它。

记住，

*   模型处理您的数据。（类别，项目，出价，...）
*   控制器处理您的 HTTP 请求和响应。（加载正确的模型，输出正确的视图，...）
*   Helper 处理频繁的操作。（根据您的模型，根据您的观点，根据您的要求，...）

希望这可以帮助。

# c++ - 条件自动变量

> ID：12925669
> 
> 赞同：0
> 
> 时间：2012-10-17T00:59:18.323
> 
> 标签：c++, memory, memory-management, callstack

```
void function(typeA* ptr_to_A) {
  if (!ptr_to_A) {
    typeB B; // typeB is a derived class of typeA
    ptr_to_A = &B;
  }
  do_stuff_to_ptr_to_A(ptr_to_A);
  // my hope is that B is still in scope here so that this function will operate on my B object (which is on the stack) which only gets created if ptr_to_A was initially NULL
} 
```

这个函数会做我认为它做的事情（我想要它做的事情）吗？也就是说，如果参数是空指针，只在堆栈上分配 B ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T01:07:13.763

> 这个功能会做我认为它做的事情吗？

不，这是未定义的行为，因为`B`超出了范围。由于这是未定义的行为，任何事情都可能发生，因此您无法预测结果。您希望`B`至少保持与函数调用相同的范围，因此只需将其移动到方法的顶部：

```
void function(typeA* ptr_to_A) {
   typeB B; // typeB is a derived class of typeA
   if (!ptr_to_A) {
      ptr_to_A = &B;
   }
   do_stuff_to_ptr_to_A(ptr_to_A);
} 
```

但是如果你只想分配一个`typeB`if `ptr_to_A`is null 那么你可以这样做：

```
void function(typeA* ptr_to_A) {
  if (!ptr_to_A) {
    typeB B; // typeB is a derived class of typeA
    do_stuff_to_ptr_to_A(&B);
  } else {
    do_stuff_to_ptr_to_A(ptr_to_A);
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T01:04:34.593

您在大括号内声明 B 类型 B，这意味着它仅在该条件 if 语句内有效，即超出范围。在 if 语句之前声明 B。只有当 ptr_to_A 为空时才会分配 B。如果您打算将 ptr_to_A 从函数“function()”中传递出去，那么您将遇到麻烦，因为 B 是函数本地的。

# android - android 在输出混合上应用音频 pcm 过滤器

> ID：12925671
> 
> 赞同：1
> 
> 时间：2012-10-17T00:59:32.447
> 
> 标签：android, audio, pcm

我有一些 PCM 过滤器例程，希望适用于 android 输出组合。当任何媒体播放器播放音乐时，可以增强音频性能。任何人都可以帮助我吗？非常感谢 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-02T22:13:06.473

你需要使用[这个](http://developer.android.com/reference/android/media/audiofx/Visualizer.html)

在输出混合（音频会话 0）上创建 Visualizer 需要权限`MODIFY_AUDIO_SETTINGS` 我不知道您是否也需要`RECORD_AUDIO`权限

这是一些工作[源代码的链接](http://www.vogella.com/code/ApiDemos/src/com/example/android/apis/media/AudioFxDemo.html)

```
 // Create the Visualizer object and attach it to our media player.
                             // you want the audiosessionid here to be 0 for output mix
    mVisualizer = new Visualizer(0); 
    mVisualizer.setCaptureSize(Visualizer.getCaptureSizeRange()[1]);
    mVisualizer.setDataCaptureListener(new Visualizer.OnDataCaptureListener() {
        public void onWaveFormDataCapture(Visualizer visualizer, byte[] bytes,
                int samplingRate) {
            mVisualizerView.updateVisualizer(bytes); // this is the where you put the pcm routine
        }

        public void onFftDataCapture(Visualizer visualizer, byte[] bytes, int samplingRate) {}
    }, Visualizer.getMaxCaptureRate() / 2, true, false);  
} 
```

# ruby - Ruby Watir - 在新安装的 PC 上出现 NoMethodError: undefined method 'start'

> ID：12925673
> 
> 赞同：1
> 
> 时间：2012-10-17T01:00:28.587
> 
> 标签：ruby, watir

我是 Ruby 新手，所以这可能是一个非常愚蠢的问题。但是我们在现有的 Ruby 安装 PC 上运行此代码。

```
def usr_OpenURL(strURL, strBrowserType)

    if strBrowserType == "IE"
        # Open Browser at the specified URL and Maximise
        browser = Watir::Browser.start(strURL)
        browser.waitForIE
        browser.bring_to_front
        browser.maximize
        sleep($nSleepTime)
    elsif  strBrowserType == "Chrome"

        browser = Watir::Browser.new :chrome
        browser.goto strURL
        sleep($nSleepTime)
    else
        puts "No Known Browser is Declared"
    end
    return browser

end 
```

但是在我的电脑上安装相同版本的 Ruby 并运行代码会返回错误：

```
undefined method 'start' for Watir::Browser:Class (NoMethodError). 
```

所以我用 irb 玩了一下。

如果我做：

```
require "Watir"
browser = Watir::Browser.start("http://www.google.com") 
```

我得到错误，但如果我这样做：

```
require "Watir"
browser = Watir::Browser.new
browser = Watir::Browser.start("http://www.google.com") 
```

然后就可以了。它会按预期在该 url 处打开一个新的浏览器窗口。

比较 PC 我可以看到 watir 的不同版本，并且安装了 watir-webdriver gem - 所以不确定版本之间是否有变化。

写这个 ruby​​ 代码的人已经不在了——所以我不能问他们为什么不为 IE 做一个 .new 和 Goto。

任何想法将不胜感激:) 谢谢！

更新：我在 watir-classic 3.2.0 gem 中找到了这个。想想也许这就是罪魁祸首。

*Watir::Browser 现在是一个类而不是一个模块 - 如果你正在修补猴子，请小心。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T14:09:49.870

这是 watir 4.0 中的一个问题。我已经为该[https://github.com/watir/watir/issues/5](https://github.com/watir/watir/issues/5)打开了一个问题- 希望我会尽快修复它:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T13:19:03.503

发生该错误的原因可能是新 PC 使用的是 Watir 4.0.0，而之前的 PC 使用的是 Watir 3.x 版本。最近发布的 Watir 4.0.0 具有指导 watir-classic gem 和 watir-webdriver gem 之间使用的逻辑。

我相信，直到你做的宝石才确定`Browser.new`。之后，gem 被加载，如果它是 watir-classic gem，您将拥有诸如`Browser.start`和之类的方法`Browser.attach`（因为这些方法在 watir-webdriver 中不存在）。

如果您只使用 IE，一个可能的解决方案是直接需要所需的 gem。这样做：

```
require 'watir-classic' 
```

代替

```
require 'watir' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T07:35:32.463

据我所知`Browser#start`，这只是`Browser#new`and的捷径`Browser#goto`。我不知道是什么导致了错误，但更换它应该是完全安全的

```
browser = Watir::Browser.start(strURL) 
```

和

```
browser = Watir::Browser.new :ie
browser.goto strURL 
```

# php - 用 PHP 解析 Wiki 标记

> ID：12925675
> 
> 赞同：0
> 
> 时间：2012-10-17T01:00:43.830
> 
> 标签：php, regex, parsing

我有一个带有 Wiki 标记的文本文件。例子：

```
[[April]]

April is the fourth month of the year. It has 30 days. The name April comes from that Latin word aperire which means "to open". This probably refers to growing plants in spring. April begins on the same day of week as July in all years and also January in leap years.

April's flower is the Sweet Pea. Its birthstone is the diamond. The meaning of the diamond is innocence.

== April in poetry ==

Poets use April to mean the end of winter. For example: April showers bring May flowers.

== Events in April ==

[[August]]

August is the eighth month of the year in the Gregorian calendar, coming between July and September. It has 31 days, the same number of days as the previous month, July, and is named after Roman Emperor Augustus Caesar.

== The Month ==

This month was first called Sextilis in Latin, because it was the sixth month in the old Roman calendar. The Roman calendar began in March about 735 BC with Romulus. October was the eighth month. August was the eighth month when January or February were added to the start of the year by King Numa Pompilius about 700 BC. Or, when those two months were moved from the end to the beginning of the year by the decemvirs about 450 BC (Roman writers disagree). In 153 BC January 1 was determined as the beginning of the year.

August is named for Augustus Caesar who became Roman consul in this month.  The month has 31 days because Julius Caesar added two days when he created the Julian calendar in 45 BC. August is after July and before September.

August, in either hemisphere, is the seasonal equivalent of February in the other. In the Northern hemisphere it is a summer month and it is a winter month in the Southern hemisphere. In a common year, no other month begins on the same day of the week as August, though in leap years, February starts on the same day as August. August always ends on the same day of the week as November.

August's flower is the Gladiolus with the birthstone being peridot. The astrological signs for August are Leo (July 24 - August 22) and Virgo (August 23 - September 23).

== August observances ==

=== Fixed observances and events ===

=== Moveable and Monthlong events ===

== Selection of Historical Events ==

== References == 
```

四月和八月都是维基文章。我设法使用以下内容提取标题：

```
$fh = fopen("wiki2.txt", "r");
if ($fh) {
    while (($line = fgets($fh)) !== false) {
        preg_match_all('#\\[\\[(.*?)\\]\\]#',$line,$matches,PREG_SET_ORDER);
        foreach($matches as $m) {
            echo $m[0]."<br />";
        }
    }
    fclose($fh);
} 
```

但是，我也希望能够提取文章中的文本。有人对我可以做什么（正则表达式或其他解决方案）来提取文章数据有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T03:22:33.183

我认为你想多了（另外，wiki 标记并不比 HTML 更适合正则表达式。）

为什么不这样做：

```
$HeaderNumber = 0;
$Document[$HeaderNumber]['Title'] = "Default";
while (($line = fgets($fh)) !== false) {
        if (strpos('[[', $line) > -1 && strpos(']]', $line) > -1){
            $Document[$HeaderNumber]['Text'] = implode($Document[$HeaderNumber]['Lines'], "\n");
            unset($Document[$HeaderNumber]['Lines']);
            $HeaderNumber++;
            $line = str_replace(array("[[","]]"), "", $line);
            $Document[$HeaderNumber]['Title'] = $line;
            continue;
        }

        $Document[$HeaderNumber]['Lines'][] = $line;

    }
} 
```

这将创建一个以数字索引的数组，每个数组都有一个 Title 和一个 Text 字段，其中包含您对名称的期望。您可以使用pear 库中[的 Text_Wiki 模块](http://pear.php.net/package/Text_Wiki)将文本进一步处理为 HTML 。

# c++ - 传递 const 数组时区分特化的 C++ 错误

> ID：12925677
> 
> 赞同：5
> 
> 时间：2012-10-17T01:01:12.703
> 
> 标签：c++, template-specialization

考虑代码

```
 template <class A>
     class B;

     template <class A>
     class B<const A>{};

     template <class A, int N>
     class B<A[N]>{};

     template <class A>
     class B<A*>{};

     template <class A>
     class B<A&>{}; 
```

以下模板实例可以正常工作：

```
 A<int*&>
     A<const int*>
     A<int*[3]> 
```

但以下一个不起作用：

```
 A<const int[3]> 
```

是否有某种原因表明这种特定组合无效，或者它可能是 g++4.6.3 的错误？

顺便说一句，我设法使用 SFINAE 和 boost::disable_if<> 解决了这个问题，所以至少问题得到了解决。

**编辑**

我忘了提到有问题的错误是一个模棱两可的类模板实例化，它无法决定 const 的重载还是数组的重载。

**编辑2**

这与指针无关，这是完整的上下文：

我正在阅读*C++ Template Metaprogramming*这本书，并且正在做问题 2-3（第 2 章问题 3），它说：

使用类型特征工具来实现 type_descriptor 类模板，其实例在流式传输时打印其模板参数的类型：注意：我们不能使用 RTTI 来达到相同的效果，因为根据 18.5.1 [lib.type.info]标准的第 7 段， typeid(T).name() 不能保证返回有意义的结果。

我的解决方案（包括编译错误的解决方法）如下：

```
 //QUESTION 2-3
    template <class T, class enable = void>
    struct type_descriptor
    {
      std::string operator()() const
      {
        return "Unknown";
      }
    };

    //specializations for primitive types
    #define TYPE_DESC_SPEC(type) template <>    \
      struct type_descriptor<type,void>     \
      {std::string operator()() const{return #type;}};

    TYPE_DESC_SPEC(int)
    TYPE_DESC_SPEC(long)
    TYPE_DESC_SPEC(void)
    TYPE_DESC_SPEC(short)
    TYPE_DESC_SPEC(unsigned char)
    TYPE_DESC_SPEC(unsigned short)
    TYPE_DESC_SPEC(unsigned long)

    //specializations for modifiers *, const, &, and [N]

    template <class T>
    struct type_descriptor<T&,void>
    {std::string operator()(){return type_descriptor<T>()() + " &";}};

    template <class T>
    struct type_descriptor<T*,void>
    {std::string operator()(){return type_descriptor<T>()() + " *";}};

    //Replace void with what's in the comment for the workaround.
    template <class T>
    struct type_descriptor<const T, void/*typename boost::disable_if<boost::is_array<T> >::type*/>
    {std::string operator()(){return type_descriptor<T>()() + " const";}};

    template <class T>
    struct type_descriptor<T(*)(),void>
    {std::string operator()(){return type_descriptor<T>()() + " (*)()";}};

    template <class T, class U>
    struct type_descriptor<T(*)(U),void>
    {std::string operator()(){return type_descriptor<T>()() + " (*)(" + type_descriptor<U>()() + ")";}};

    template <class T, int N>
    struct type_descriptor<T[N],void>
    {
      std::string operator()()
      {
        std::stringstream s;
        s << type_descriptor<T>()() << " [" << N << "]";
        return s.str();
      }
    };

    template <class T>
    struct type_descriptor<T[],void>
    {std::string operator()(){return type_descriptor<T>()() + " []";}};

    //Now overload operator<< to allow streaming of this class directly

    template <class T>
    std::ostream & operator<<(std::ostream & s, type_descriptor<T> t)
    {
      return s << t();
    }
    //END QUESTION 2-3 
```

示例用法是：

```
 std::cout << "\nQuestion 2-3 results\n";
      std::cout << type_descriptor<int*>() << std::endl;
      std::cout << type_descriptor<int*[3]>() << std::endl;
      std::cout << type_descriptor<std::string*>() << std::endl;
      std::cout << type_descriptor<const int&>() << std::endl;
      std::cout << type_descriptor<const int *const&>() << std::endl;
      std::cout << type_descriptor<int[4]>() << std::endl;
      std::cout << type_descriptor<int(*)()>() << std::endl;
      std::cout << type_descriptor<int*&(*)(const char &)>() << std::endl;
      std::cout << type_descriptor<int*&>() << std::endl;
      std::cout << type_descriptor<int[]>() << std::endl;
      std::cout << type_descriptor<const long[]>() << std::endl; 
```

并且相应的输出是（当解决方法存在时，否则它不会在最后一个上编译）：

```
整数 *

整数 * [3]

未知 *

整数常量 &

int 常量 * 常量 &

整数 [4]

整数 (*)()

int * & (*)(未知常量 &)

整数 * &

整数 []

长常量 []

```

因此 C++ 能够区分模板参数的指针和数组，能够正确、递归地分离复合类型并输出正确的结果，除了`const A[]`. 它需要帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T09:00:37.843

具有 const 元素类型的数组类型既是 const 限定类型（const 双向应用）又是数组类型。

所以你应该修复专业化。

# scala - 对象 Draft10 不是包 com.google.api.client.googleapis.auth.oauth2 的成员

> ID：12925685
> 
> 赞同：-1
> 
> 时间：2012-10-17T01:02:08.257
> 
> 标签：scala, google-api, oauth-2.0, lift, sbt

我正在scala中编译以下代码：

[https://gist.github.com/3236096](https://gist.github.com/3236096)

但它给了我以下错误：

```
draft10 object is not a member of package
com.google.api.client.googleapis.auth.oauth2 
```

和这个：

```
setApplicationName value is not a member of scala.runtime.StringAdd 
```

我认为问题是我需要一些包。

我需要帮助，请告诉我以下内容：

我可以下载我需要的包的存储库

软件包版本：

在我的 sbt 中，我有以下软件包：

```
GoogleApi lazy val = "google-api-services" at 
"http://mavenrepo.google-api-java-client.googlecode.com/hg"

GoogleReleases lazy val = "Google Releases" at
"https://oss.sonatype.org/content/repositories/google-releases"

"com.google.api-client"% "google-api-client"% "1.11.0-beta"
"com.google.apis"% "google-api-services-oauth2"% "1.3.3-beta-v2"
"com.google.api.client"% "google-api-client"% "1.3.1-alpha" 
```

问题在于：draft10，而不是从哪里获得包裹。

感谢您的关注，希望您能帮到我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T06:11:43.083

我会把你指向 javadoc：http: [//javadoc.google-api-java-client.googlecode.com/hg/1.4.1-beta/com/google/api/client/googleapis/auth/oauth2/draft10 /package-summary.html](http://javadoc.google-api-java-client.googlecode.com/hg/1.4.1-beta/com/google/api/client/googleapis/auth/oauth2/draft10/package-summary.html)

它说软件包 draft10 从 1.4 版开始可用。所以更新你的 sbt 脚本以使用 1.4 版本：

```
"com.google.api-client"% "google-api-client"% "1.4" 
```

另外，请确保您不要尝试使用同一个库的多个版本。您发布的脚本同时引用了 google-api-client 的 1.10.0-beta 版和 1.3.1-alpha 版。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T18:24:23.790

解决方案是：对于 SBT

```
"com.google.apis"% "google-api-services-oauth2"% "rev9-v2-1.7.2-beta" 
```

和存储库：

```
"http://mavenrepo.google-api-java-client.googlecode.com/hg/" 
```

# javascript - 无法清除我的 setTimeout

> ID：12925686
> 
> 赞同：0
> 
> 时间：2012-10-17T01:02:13.350
> 
> 标签：javascript

```
var timer;
var object;
var thing;
var digit="0";

//this function fires when a single click occurs

function one(event){
   timer = setTimeout("AddDigit(object)",500);
   object = event;
}

//The AddDigit function keeps firing right after my double click function 
function AddDigit(x){
   object=x;
   if (eval(digit) == 0){ digit = object; }
   else{ digit = digit + object; }

   document.calculator.display.value = object;

}
// This function is supposed to stop the AddDigit function from firing...

document.ondblclick = function(button){
   clearTimeout(timer);

   thing=button.target;
   thing.setAttribute("class","duction");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T01:26:03.717

双击分派两个单击事件，*然后*是双击事件。第二次`one`被调用，它`timer`用一个新的 id 代替，但原来的超时时间仍然准备好了。当 dblclick 处理程序被调用时，它会清除第二次超时，但不会清除第一次超时。

`one`解决方案是在分配之前清除任何现有的超时`timer`。

```
function one(event)
{
    clearTimeout(timer);
    timer = setTimeout(function() {
        AddDigit(event);
    }, 500);
} 
```

见[http://jsfiddle.net/74qYF/](http://jsfiddle.net/74qYF/)

# javascript - 调用函数取消之前的动作

> ID：12925688
> 
> 赞同：0
> 
> 时间：2012-10-17T01:02:32.253
> 
> 标签：javascript

我有一个正在测试的简单脚本，但它的行为很奇怪。我调用一个加载的脚本并将其添加到一个特定的`td id`，然后我调用第二个脚本并将其添加到不同的脚本中，`td id`但由于某种原因，它会清除第一个 div 的内容，即使它们是分开的。

这就是我所拥有的：

```
function call_back(result,div_id,func){
        document.getElementById(div_id).innerHTML = result;
        if(typeof(func) != 'undefined'){func();}
}

function caller(url,cfunc)
{
        if (window.XMLHttpRequest)
          {// code for IE7+, Firefox, Chrome, Opera, Safari
                xmlhttp=new XMLHttpRequest();
          }
        else
          {// code for IE6, IE5
                xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
          }
                xmlhttp.onreadystatechange=cfunc;
                xmlhttp.open("GET",url,true);
                xmlhttp.send();
}

function call_file(url,div_id,func){
    caller(url,function(){
        if (xmlhttp.readyState==4 && xmlhttp.status==200){
            call_back(xmlhttp.responseText,div_id,func);
        }
    });
} 
```

然后我在我的onload上有这个：

```
 window.onload = function(){
    stage = 6;      
call_file('test.html','menu_left');

    switch(parseInt(stage)){
    case 6: call_file('test2.html','main'); break;
   }
}; 
```

问题出现在案例陈述中。如果我删除 case 语句，则添加的内容`test.html`加载正常，但如果我添加 case 语句，则内容会`test.html`消失，然后只`test2.html`显示。

id的html是：

```
 <table class="body_wrapper">
                <tr>
                    <td class="menu_left" id="menu_left"></td>
                    <td class="main" id="main"></td>
                </tr>   
            </table> 
```

为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T01:23:22.100

该问题与switch语句无关。由于您正在为某些本地文件调用 ajax 请求并且它已经被缓存，所以 call_back 函数在 `document.getElementById(div_id).innerHTML = result;`执行之前被调用两次，因此被上次调用的变量值替换。如果您只是在 call_back 函数中添加警报，如下所示

```
function call_back(result, div_id, func) {
  alert(result);
  document.getElementById(div_id).innerHTML = result;
  if (typeof (func) != 'undefined') { func(); }
} 
```

你会发现它正在工作。但由于它不是解决方案，或者如果您修改它

```
xmlhttp.open("GET", url, true); 
```

至

```
xmlhttp.open("GET", url, false); 
```

它会起作用，但你会失去 AJAX 的异步特性。

# ios - 像 Facebook-App 一样登录

> ID：12925689
> 
> 赞同：0
> 
> 时间：2012-10-17T01:02:36.697
> 
> 标签：ios, login

我想通过 iOS 应用程序登录网页。当我第一次启动应用程序时，必须输入电子邮件地址和密码。成功登录（Webserver php & msyql）后，我重定向到 App 中的网页并执行 UIWebView。就像脸书一样。我该怎么做？

真正的应用程序开发初学者。有教程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T03:48:19.273

设计一个 UIViewController 并在其中包含一个 UIWebView。需要时使用 URL 请求加载 Web 视图。

```
UIWebView *webView = [[UIWebView alloc] init];
[webView loadRequest:[[NSURLRequest alloc] initWithURL:[NSURL URLWithString:kWebSiteSignUpURL]]]; 
```

并将 UIWebViewDelegate 设置为 self，以便您可以在每种情况下实现更多逻辑。

```
@protocol UIWebViewDelegate <NSObject>

@optional
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType;
- (void)webViewDidStartLoad:(UIWebView *)webView;
- (void)webViewDidFinishLoad:(UIWebView *)webView;
- (void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error;

@end 
```

# android - GCM 与 WordPress 博客 - Android

> ID：12925695
> 
> 赞同：2
> 
> 时间：2012-10-17T01:03:10.257
> 
> 标签：android, wordpress, blogs, google-cloud-messaging

我研究过的所有关于 GCM 的材料似乎都在谈论 java web 服务器，这不是我的情况。我将如何使用 WordPress 驱动的博客实现 Google Cloud Messaging？可能有插件吗？

提前致谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T19:35:00.967

你可以很容易地用 PHP 实现 GCM。

我按照以下链接中的答案进行操作。 [https://stackoverflow.com/a/11253231/864538](https://stackoverflow.com/a/11253231/864538)

这很简单，应该会有所帮助。如果需要，您可以将其合并到插件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-06T08:32:03.730

在 WordPress 存储库中有一个名为 wp gcm 的插件。这是一个非常棒的尝试！

[http://wordpress.org/plugins/wp-gcm](http://wordpress.org/plugins/wp-gcm)

# java - 需要 Java CSV 导入正则表达式帮助

> ID：12925697
> 
> 赞同：1
> 
> 时间：2012-10-17T01:03:43.170
> 
> 标签：java

我使用了许多不同的正则表达式字符串，它们都做同样的事情。

我的 .csv 的一行如下所示：

"999","Location","Alt. fare key","Table ID","Address","Line 2","City","State",19111,,,H,, 等...... ..（有 139 列。

如您所见，一些条目用引号分隔，而另一些则没有。另外，引号与否。每个条目都用逗号分隔。

以下是我使用的两个正则表达式字符串示例：

```
String regex = "(?:(?<=\")([^\"]*)(?=\"))|(?<=,|^)([^,]*)(?=,|$)"
Object[] tokens = strLine.split(regex);
model.addRow(tokens);
jTable1.setModel(model); 
```

和

```
String regex = ",(?=([^\"]*\"[^\"]*\")*[^\"]*$)"
Object[] tokens = strLine.split(regex);
model.addRow(tokens);
jTable1.setModel(model); 
```

两者都做同样的事情。

假装下面的 |(s) 是我的 jTable 的行：

“999”|“位置”|“备用票价键”|“表 ID”|“地址”|“第 2 行”|“城市”|“州”|19111| | |H|

我希望它像这样出来：

999|位置|Alt. 票价键|表 ID|地址|第 2 行|城市|州|19111| | |H| ETC.....

正则表达式还需要什么来删除不需要的括号？

提前感谢您的帮助。JB

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T02:12:33.757

但它是否处理嵌入式逗号？OpenCSV库会，您只需执行此操作（从 opencsv 文档复制） [：](http://opencsv.sourceforge.net/)

```
CSVReader reader = new CSVReader(new FileReader("yourfile.csv"));
String [] nextLine;
while ((nextLine = reader.readNext()) != null) {
    // nextLine[] is an array of values from the line
    System.out.println(nextLine[0] + nextLine[1] + "etc...");
} 
```

# iphone - 如果在 addSubView 之后调用 UIButton 不会移动

> ID：12925698
> 
> 赞同：4
> 
> 时间：2012-10-17T01:04:01.027
> 
> 标签：iphone, ios, uibutton

所以我试图`UIButton`在点击后移动它。

`_addMoreFields`单击按钮后调用该方法。

`_addMoreFieldBtn`是一个全局的`UIButton`。当我单击它时，没有任何反应。

奇怪的是，如果我注释掉`addSubView`代码，那么按钮就会移动。

如果我保留该代码，则按钮不会移动。

有任何想法吗？

```
-(void)movePlusButton {
    NSLog(@"Moving button");
    [UIButton beginAnimations:nil context:nil];
    [UIButton setAnimationDuration:0.3];
    _addMoreFieldsBtn.center = CGPointMake(30,30);
    [UIButton commitAnimations];
}

- (IBAction)addMoreFields:(id)sender {

    CGRect currentBtnFrame = [(UIButton *)sender frame];
    CGPoint org = currentBtnFrame.origin;

    UILabel *whoWasIn = [[UILabel alloc]  initWithFrame:CGRectMake(110, org.y, 85, 21)];
    whoWasIn.text = @"test";

    UITextField *whoWasInField = [[UITextField alloc] initWithFrame:CGRectMake(59, whoWasIn.frame.origin.y+40, 202, 30)];
    whoWasInField.placeholder = @"test2";

    UILabel *with = [[UILabel alloc]  initWithFrame:CGRectMake(136, whoWasInField.frame.origin.y+40, 49, 21)];
    with.text = @"with";
    whoWasInField.borderStyle = UITextBorderStyleRoundedRect;

    UITextField *withField = [[UITextField alloc] initWithFrame:CGRectMake(59, with.frame.origin.y+40, 202, 30)];
    withField.placeholder = @"test3";
    withField.borderStyle = UITextBorderStyleRoundedRect;

    [_homeView addSubview:whoWasIn];
    [_homeView addSubview:with];
    [_homeView addSubview:whoWasInField];
    [_homeView addSubview:withField];

    [self movePlusButton];
} 
```

注意：我也尝试更改框架，但我遇到了同样的问题。它从我放置到现有位置的新位置开始动画。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T03:33:04.237

问题是 iOS 6 / Xcode 4.5 中的新项目默认启用了“自动布局”。Autolayout 是“Springs and Struts”的替代品（但它仅适用于 iOS 6）。此功能将约束添加到优先于您在代码中尝试的移动的视图。

因此，对此有三种可能的解决方法：

1) 以编程方式在按钮上创建新约束。Autolayout 非常强大和灵活……尤其是如果您尝试同时支持 iPhone 5 和更早型号的占用空间。您可以通过查看 WWDC 视频找到有关如何执行此操作的更多信息：[iOS 和 OS X 的自动布局简介](https://developer.apple.com/videos/wwdc/2012/?id=202)

2）不要使用自动布局。在 Storyboard 中选择一个视图，然后在 File Inspector 中取消选中“Use Autolayout”。

3) 为按钮上的每个约束创建 IBOutlets。然后在移动按钮之前，删除这些约束：

```
@interface MyViewController : UIViewController
@property (weak, nonatomic) IBOutlet UIButton *addMoreFieldsBtn;
@property (weak, nonatomic) IBOutlet NSLayoutConstraint *hConstraint;
@property (weak, nonatomic) IBOutlet NSLayoutConstraint *vConstraint;
- (IBAction)addMoreFields:(id)sender;
@end 
```

和...

```
-(void)movePlusButton {
    NSLog(@"Moving button");
    [self.view removeConstraint:self.hConstraint];
    [self.view removeConstraint:self.vConstraint];
    [UIButton beginAnimations:nil context:nil];
    [UIButton setAnimationDuration:0.3];
    _addMoreFieldsBtn.center = CGPointMake(30,30);
    [UIButton commitAnimations];
} 
```

（您需要调用的实际视图`removeConstraints:`是按钮的父视图，可能是也可能不是 self.view）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T17:26:59.833

实际上，我认为发生的事情是您的子视图首先进入屏幕，因此优先，然后一旦子视图被删除，如果您更改代码，按钮就会移动：

```
[_homeView addSubview:whoWasIn];
[_homeView addSubview:with];
[_homeView addSubview:whoWasInField];
[_homeView addSubview:withField];

[self movePlusButton]; 
```

}// 移动 [self movePlusButton]; 最多 6 行代码，或者让它成为第一行

```
[self movePlusButton];
[_homeView addSubview:whoWasIn];
[_homeView addSubview:with];
[_homeView addSubview:whoWasInField];
[_homeView addSubview:withField]; 
```

这应该可以解决您的所有问题

:)

# java - 为什么 System.out.print 会导致自动刷新？

> ID：12925706
> 
> 赞同：4
> 
> 时间：2012-10-17T01:05:13.607
> 
> 标签：java, buffer, system.out

System.out 是一个 PrintStream 对象。我阅读了有关 PrintStream 的文档。我不明白为什么 System.out.print 会导致缓冲区被刷新？那不应该只发生在println吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T03:50:27.690

> 那不应该只发生在println吗？

Javadoc 没有说明何时*不会*刷新。它说它将*在a*`println()` *或 newline*上刷新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T05:21:29.137

冒着重复已经注意到的*事实的风险，让我试着用不同的方式解释文档......*

似乎只有在 PrintBuffer**创建时**（即在构造函数调用期间）才能设置 PrintStream 的 autoFlush 行为。

此外，正如您所指出的，文档指出，在调用任何各种公共 PrintBuffer 构造函数时，不指定自动刷新状态将导致创建非自动刷新的 PrintStream。

但是，在 System.out 的情况下，**您**不会调用 PrintBuffer 的构造函数。java.lang.System 类在 VM 启动时实例化“out”PrintStream。这意味着，当您请求 System object 存储在其“out”字段中的 PrintStream 对象时，您不知道调用了哪个构造函数，因此不知道当您询问时传递给您的流的自动刷新状态为了它。

我同意，如果 java.lang.System 的文档指定包含在其“out”字段中的流将其自动刷新行为设置为 true，那就太好了。但这不是“要求”，就像我需要记录从我的（假设的）myCrazyPanel.getTheChangeColorsButton() 返回的 JButton 是启用还是禁用一样。是的，按钮**默认是启用的**，但是如果 JButton 被禁用，你就不能抱怨。这里也一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T01:15:20.973

您希望在调用 System.out.print() 时刷新缓冲区，因为您希望它被打印。当我调用 print 时，我希望它打印一些东西。如果它没有刷新，它只会留在缓冲区中，我什么也看不到。

[在这里](http://docs.oracle.com/javase/6/docs/api/java/io/OutputStream.html#flush%28%29)检查冲洗。

基本上这是保证它会立即被打印出来。

# java - 在 Android BillingReceiver 中创建受保护的方法会使我的计费易受攻击吗？

> ID：12925707
> 
> 赞同：0
> 
> 时间：2012-10-17T01:05:36.900
> 
> 标签：java, android, eclipse

在 Android 中创建受保护的方法`BillingReceiver`会使我的帐单易受攻击吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T01:22:44.870

不是*本身*。

但是，仅依靠 Java 语言访问修饰符来保护数据将意味着您的应用程序可能容易受到攻击。如果坏人可以在你的 VM 中运行代码并使用反射 API，那么绕过 Java 语言访问修饰符和访问`private`字段和方法就很简单了。

如果您担心的“坏人”是设备的所有者，您应该假设他们可以破坏在他们的设备上运行的任何代码。（这在技术上可能很困难，但只需要一个聪明而有动力的人就可以解决......而且猫已经出局了。）

# wix - 从 Wix 2 迁移到 Wix 3：重复符号

> ID：12925708
> 
> 赞同：2
> 
> 时间：2012-10-17T01:05:43.717
> 
> 标签：wix, wix3, duplicate-symbol, wix2

我对 WiX 完全陌生，所以我使用 WiX 的第一个任务当然是将现有的大型安装程序从 WiX 2 迁移到 WiX 3。我有很多皱纹，其中大部分都已整理，但我将不胜感激对于以下轻微错误的一些建议。由于我是 WiX 的新手，我想列出我的整个过程：

要创建 WiX 库：

```
candle.exe *.wxs  
lit.exe -out "wixui_company.wixlib" *.wixobj 
```

要生成主 MSI：

```
candle.exe main.wxs -o main.wixobj  
light.exe main.wixobj -o Main_Installer.msi wixui_company.wixlib -ext WixUIExtension 
```

最后一条命令给出了几十个错误，但它们都采用以下形式

```
error LGHT0091 : Duplicate symbol 'Dialog:LicenseAgreementDlg' found. 
```

我有 grep 和 re-greped，但唯一的参考如下：

在 LicenseAgreementDlg.wxs 中：

```
<Fragment>  
    <UI>  
        <Dialog Id="LicenseAgreementDlg" ... 
```

在 wixui_company.wxs

```
<Fragment>  
    <UI Id="WixUI">  
          <DialogRef Id="LicenseAgreementDlg" />  
...
          <Property Id="WixUI_WelcomeDlg_Next" Value="LicenseAgreementDlg" /> 
```

给出错误的是 DialogRef 行。

这些都是从 main.wxs 中的 wixui_company.wixlib 引用的：

```
<UIRef Id="WixUI" /> 
```

FWIW，如果我将 ref 更改为 WixUI 或将 ref 更改为 LicenseAgreementDlg，重复错误就会消失，但我会得到符号未找到链接错误。我使用 WixCop 迁移了原始的 wxs 文件，但在 WiX 2 下它们都按原样工作。我猜这与将 WiXUI 放在 WiX 3 中自己的命名空间中的举动有关，但坦率地说，我什至不知道该尝试什么。

关于事情哪里出了问题的任何想法？

谢谢，

亚当

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-24T06:22:09.710

“LicenseAgreementDlg”是您使用链接到[的 WixUIExtension 中的对话框的名称](http://wix.codeplex.com/SourceControl/latest#src/ext/UIExtension/wixlib/LicenseAgreementDlg.wxs)`light.exe`。MSI 数据库中的每个对话框都必须有一个唯一标识符，因此您可能已经`<UIRef>`为标准 WiX UI（“WixUI_FeatureTree”、“WixUI_Mondo”等）之一创建了一个元素，其中包括 WiX 的 LicenseAgreeementDlg 对话框。然后您将引用您自己的 LicenseAgreementDlg，因此现在您有两个同名的对话框。

在这种情况下，您需要重命名您自己的 LicenseAgreementDlg 或完全删除它并使用内置的。

# html - 区分缺失和未选中的复选框

> ID：12925709
> 
> 赞同：1
> 
> 时间：2012-10-17T01:05:49.020
> 
> 标签：html, forms, checkbox, field

我的印象是，解析 HTML 表单的 POST 的服务器代码（或至少是 PHP）无法区分 POST 和带有未“选中”值的复选框的表单与没有“检查”的表单的 POST t 根本不包括该名称的复选框。

例如，采取以下 3 种形式。如果它们都按原样提交，没有手动输入，只使用初始值，那么表单 f2 和 f3 将发送相同的结果：

```
<form name="f1">
<input type="text" name="txt_1" value="Hello">
<input type="checkbox" name="chk_1" checked="checked">
</form>

<form name="f2">
<input type="text" name="txt_1" value="Hello">
<input type="checkbox" name="chk_1">
</form>

<form name="f3">
<input type="text" name="txt_1" value="Hello">
</form> 
```

在我的实际应用程序中，我提交了 f3 类型的表单，故意省略了一个复选框（不同情况下的不同复选框）。对于我遗漏的任何复选框，我希望后端忽略它——不要将其视为打开或关闭，只需不执行与该字段相关的任何操作。

在我构建它之后，我几乎要在测试之前扔掉我的工作，当我记得后端会像对待未选中的现有 chk_1 一样对待丢失的 chk_1 - 并且会关闭相关值后端。

但是我去尝试了一下，它成功了！我尝试了不同的变化，它们都有效。他们正确地忽略了与缺少复选框相关的字段（同时处理与现有复选框相关的字段）。

所以，这很好，但我不知道它是如何完成的（或者它是否可能会停止工作——比如在另一个浏览器上等等）。在 PHP 中，我知道代码 isset($_POST['chk_1']) 将获取复选框的值，并且在两种情况下都返回 false：未选中的复选框或缺少复选框。其他服务器语言有没有办法区分？为什么这行得通？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-02-06T05:25:43.473

简短的回答是 PHP 只获取浏览器发送的内容。它不知道也不关心表单本身，只关心来自浏览器的数据。数据作为`name=data`值的集合出现。

除其他因素外，浏览器只会发送一个按钮，如果

*   它有一个名字，并且
*   它已被选中

如果按钮没有名称，或者没有被选中，那么 PHP 将永远不会听到它。这适用于

*   普通按钮（`<button>`或`<input type="submit">`）
*   单选按钮（只能选择一组中的一个：如果没有选择，那么这也将不存在）
*   复选框（仅发送选定的复选框）

因此，简短的回答是 PHP 永远不会知道复选框是丢失还是未选中，因为两者都不会发送到服务器。

# c# - Redis ServiceStack - 轻松获取和设置一组值？

> ID：12925710
> 
> 赞同：2
> 
> 时间：2012-10-17T01:06:23.653
> 
> 标签：c#, nosql, redis, set, servicestack

我正在根据唯一标识符存储设备的日期时间信息：

```
redisClient.Set("lastDateTime:ID000011112222", DateTime.Now); 
```

我正在存储其他信息，例如 IP 地址：

```
redisClient.Set("ipAddress:ID000011112222", "0.0.0.0"); 
```

现在我想获取 lastDateTime 的一组键/值。我可以得到所有的钥匙：

```
var keysSet = redisClient.SearchKeys("lastDateTime:*"); 
```

如何获得所有键及其值的集合（或列表）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T01:45:12.377

如果您的目标是在一次调用中获取所有内容，我建议您将所有内容存储在一个集合中。这样做不应该有任何显着的性能损失。

如果您确实必须将值存储在许多键中，那么您必须像您正在做的那样执行 KEYS 命令，然后将输出传递给 MGET（我认为这是 GetValues() ）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T18:30:11.807

我最终选择了一个哈希，
设置一个值：

```
redisClient.SetEntryInHash("urn:dateTime", "ID001122", DateTime.Now.ToString()); 
```

要获取所有 ID 和值的字典：

```
var hash = redisClient.GetAllEntriesFromHash("urn:dateTime"); 
```

# jquery - jquery.ui.datepicker 的月份选择在 IE9 中不起作用

> ID：12925712
> 
> 赞同：4
> 
> 时间：2012-10-17T01:06:38.320
> 
> 标签：jquery, jquery-ui, datepicker, internet-explorer-9

首先，浏览器是IE 9。

两个脚本是

```
 jquery.blockUI.js
   ui.datepicker.js 
```

当我在正常页面中显示日期选择器时，一切正常，

但是当我尝试在弹出页面中显示日期选择器时，月份和年份下拉菜单不再起作用。

等待你的回复！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T14:31:01.533

不要为此目的使用 blockUI。blockUI 插件会导致屏幕上的所有输入都被阻止，因此您不能“单击”下拉菜单是有道理的。

您应该改用[对话框](http://jqueryui.com/dialog/)小部件。例如：

```
$('#btnTest').click(function() {
    $('#divAddNew').dialog({
        modal: true
    });
}); 
```

# groovy - Groovy 的“可选返回”语义

> ID：12925713
> 
> 赞同：16
> 
> 时间：2012-10-17T01:06:54.460
> 
> 标签：groovy, return

在 Groovy 中，[return 语句是可选](http://groovy-lang.org/semantics.html#_optional_return_keyword)的，允许您编写如下方法：

```
def add(a, b) {
    a + b
} 
```

...它将结果添加`a`并`b`返回给调用者。

但是，我想知道当方法有多个返回“语句”时语义是什么。例如，在 Java 中，您可能有：

```
String append(String a, String b) {
    if (a == null) {
        return b;
    }
    return a + b;
} 
```

这可以（假设地）转换为 Groovy，例如：

```
def append(a, b) {
    if (! a) {
        b
    }
    a + b
} 
```

但是，在这种情况下，Groovy 是如何知道语句`b`内部`if`应该返回的呢？还是没有？我假设 Groovy 不能简单地将结果未使用的任何语句视为 a `return`，对吗？在这种情况下，“可选返回”功能的行为方式是否有任何明确定义的语义？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-17T01:55:42.120

您链接的页面（相当简洁）描述了确切的语义：

> 请注意，return 语句在方法末尾是可选的。

因此，除非您明确返回它，否则永远不会返回`b`该块中的。`if`实际上，这意味着返回值将是评估的最后一条语句的结果，因此，如果您的示例是

```
def append(a, b) {
   if (!a) { b }
   else { a + b }
} 
```

那么结果将是`b`if `!a`is`true`和`a + b`else。

调用`void`函数的结果是`null`，所以如果示例是

```
def append(a,b) {
   if (!a) { b }
   else { a + b }
   println "debug: $a $b"
} 
```

然后`append`总会回来`null`。

我自己的经验法则是，如果方法或闭包包含多个语句，则始终使用显式返回语句。我认为在更复杂的方法中依赖隐式返回语句是危险的，因为如果有人在方法的末尾添加一行，即使他们很可能不打算这样做，他们也会更改返回值。

# .htaccess - htaccess 仅更改 URL 地址

> ID：12925714
> 
> 赞同：1
> 
> 时间：2012-10-17T01:06:59.190
> 
> 标签：.htaccess

我有一个站点，需要 htaccess 代码来在地址栏中进行此更改，而无需在服务器文件夹中进行任何物理更改

example.com/data/65767.html 为 example.com/65767

example.com/data/56-45.html 为 example.com/56-45

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T01:23:57.593

效率极低，您需要确保将链接更改为指向没有的链接`.html`，但是...

```
RewriteEngine On

# externally redirect so that the browser shows the non-.html URL
RewriteCond %{THE_REQUEST} ^(GET|POST|HEAD)\ /data/([0-9-]+)\.html
RewriteRule ^ /%2 [L,R=301]

# internally rewrite the non-.html URI back to the .html URI
RewriteCond %{DOCUMENT_ROOT}/data%{REQUEST_URI}.html -f
RewriteRule ^/?([0-9-]+)$ /data/$1.html [L] 
```

这适用于`/data/<any number of digits or "-">`URI。如果您希望它与任何东西一起使用，请将其替换`[0-9-]`为`.`

* * *

编辑：

> 我们也可以重定向`example.com/65767.html`到是`example.com/65767`和内容来自`example.com/data/65767.html`

是的，只需将第一条规则更改为：

```
RewriteCond %{THE_REQUEST} ^(GET|POST|HEAD)\ /(data/)?([0-9-]+)\.html
RewriteRule ^ /%3 [L,R=301] 
```

# php - 将 Facebook 登录添加到自己的网站

> ID：12925716
> 
> 赞同：2
> 
> 时间：2012-10-17T01:08:01.020
> 
> 标签：php, facebook, login

我希望我网站上的用户能够使用他们现有的 Facebook 帐户登录。

我从[developers.facebook.com](https://developers.facebook.com)下载了Facebook PHP SDK并为我的网站设置了一个应用程序。我只是使用了与 sdk 捆绑在一起的 example.php 文件，并将我的应用程序的“appID”和“秘密”的数字换掉了。

**注意：在代码中，“appID”和“secret”正在替换实际的等效项**

* * *

我有这是我的标题：

`require 'src/facebook.php';`（这肯定被发现）

* * *

这是主页上的代码，登录将在其中（也来自 example.php）：

```
<?php
$facebook = new Facebook(array(
'appId'  => 'appID',
'secret' => 'secret',
));

var_dump($facebook);
// Get User ID
$user = $facebook->getUser();

echo "<br />";
var_dump($user);

if ($user) {
try {
    $user_profile = $facebook->api('/me');
} catch (FacebookApiException $e) {
    error_log($e);
    $user = null;
}
}

if ($user) {
    $logoutUrl = $facebook->getLogoutUrl();
} else {
    $loginUrl = $facebook->getLoginUrl();
}

$naitik = $facebook->api('/naitik');
?>

<?php var_dump($user); ?>

<h1>php-sdk</h1>

<?php if ($user): ?>
<a href="<?php echo $logoutUrl; ?>">Logout</a>
<?php else: ?>
<?php echo "LoginURL:"; var_dump($loginUrl);?>
<div>
 <a href="<?php echo $loginUrl; ?>">Login with Facebook</a>

</div>
<?php endif ?>

<h3>PHP Session</h3>
<pre><?php print_r($_SESSION); ?></pre>

<?php if ($user): ?>
<h3>You</h3>
<img src="https://graph.facebook.com/<?php echo $user; ?>/picture">

<h3>Your User Object (/me)</h3>
<pre><?php print_r($user_profile); ?></pre>
<?php else: ?>
<strong><em>You are not Connected.</em></strong>
<?php endif ?>

<h3>Public profile of Naitik</h3>
<img src="https://graph.facebook.com/naitik/picture">
<?php echo $naitik['name']; ?> 
```

* * *

当我没有登录 Facebook 并单击链接时，它会将我带到 Facebook 登录页面。登录后，它会使用 url 中的新变量（状态、代码等）重定向回主站点。一旦“登录”，`var_dump($user)`就返回`int(0)`.

有人能指出我正确的方向吗？我不知道为什么它不能分配用户。

* * *

倾销结果`$facebook`：

```
object(Facebook)#182 (9) { 
["sharedSessionID:protected"]=> NULL 
["appId:protected"]=> string(15) "appID" 
["appSecret:protected"]=> string(32) "secret" 
["user:protected"]=> NULL ["signedRequest:protected"]=> NULL 
["state:protected"]=> NULL ["accessToken:protected"]=> NULL 
["fileUploadSupport:protected"]=> bool(false) 
["trustForwarded:protected"]=> bool(false) 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T01:19:45.260

如果您不使用 Facebook 连接，例如以用户身份发帖或类似的东西。您可能只想查看可以从 Facebook 获得的[注册表单 iframe 。](http://developers.facebook.com/docs/plugins/registration/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-15T11:35:59.917

它发生在我身上，当我检查我的 apache 日志时，我发现了这个：

当通过 PHP SDK（使用 Curl）与 Facebook 通信时，我发现它存在 SSL 问题。您必须将 CURL_OPTS "CURLOPT_SSL_VERIFYPEER" 设置为 "false" 。

前任：

facebook::$CURL_OPTS[CURLOPT_SSL_VERIFYPEER] = false;

# php - 根据值 PHP 查找 Max 键

> ID：12925718
> 
> 赞同：1
> 
> 时间：2012-10-17T01:08:12.203
> 
> 标签：php, arrays, loops

我试图根据另一个值找到 PHP 数组的最高键。

```
$values = array(0,0,50,100,200,400,800); 
```

如果我说我有 125 的值，它应该返回 3。如果我有 400 到 799 之间的任何值，它应该返回 5。

```
$output = -1;
$input = 436;
$length = count($values);
for($i=1;$i<=$length;$i++){
    if($values[$i]<=$input) { $output++; }
}
// Returns 5 
```

我可以遍历数组，但是有 100 个值，这会大大降低页面速度，因为每个用户每次页面加载使用了大约 20 次。有没有我缺少的特殊功能？或者我将不得不 foreach 数组？

数组总是有序的，永远不会改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T01:30:33.910

您可以使用[array_flip()](http://php.net/array_flip)来做到这一点。

```
[ghoti@pc ~]$ php -r '$n=150; $a=array(0,0,50,100,200,400,800); $a[]=$n; sort($a); $f=array_flip($a); print $f[$n]-1 . "\n";'
3
[ghoti@pc ~]$ php -r '$n=401; $a=array(0,0,50,100,200,400,800); $a[]=$n; sort($a); $f=array_flip($a); print $f[$n]-1 . "\n";'
5
[ghoti@pc ~]$ php -r '$n=200; $a=array(0,0,50,100,200,400,800); $a[]=$n; sort($a); $f=array_flip($a); print $f[$n]-1 . "\n";'
4
[ghoti@pc ~]$ php -r '$n=0; $a=array(0,0,50,100,200,400,800); $a[]=$n; sort($a); $f=array_flip($a); print $f[$n]-1 . "\n";'
1 
```

**这是如何运作的？**

让我们分解一下。

*   `$n=0;`我们的号码。
*   `$a=array(0,0,50,100,200,400,800);`我们的阵列。
*   `$a[]=$n;`我们将我们的号码添加到数组中......
*   `sort($a);`对事物进行排序以将我们的号码放在正确的位置...
*   `$f=array_flip($a);`然后我们用索引交换值，
*   `print $f[$n]-1`并返回我们添加的项目之前的项目的值（以前是索引）。

如果 $a 包含相同数字的多个条目，例如`0`在您的示例中，则可能会造成混淆。如果发生这种情况，您可能需要调整调整（`-1`在我的示例中），因为索引只能在数组中出现一次。（例如，如果`0`出现 3 次，你需要用 调整你的结果`-2`。这个调整可以添加额外的代码，但我相信你可以自己弄清楚那部分。:)

这避免了循环，但要小心 if `$n=0`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T01:12:16.337

对不起，但是AFAIK你真的必须循环这个低谷。

*如果数组*是有序的，你可以找到第一个更高的索引，然后添加剩余的索引。

* * *

**编辑：这是我用来基准测试的代码：**

```
set_time_limit(0);

$a = array(0,0,50,100,200,400,800);
$a = array_merge(range(0, 100000), $a);

sort(a); // we need this since array_merge will not maintain the sequence

$result = array
(
    'testWithForeach' => 0,
    'testWithArrayFlip' => 0,
    'testWithArraySearch' => 0,
);

foreach (range(0, 1000, 10) as $n) // search values $n to try
{
    for ($i = 0; $i < 10; ++$i) // how many times to run each test
    {
        foreach (array_keys($result) as $test) // divide the CPU usage fairly (inner-most loop)
        {
            $start = microtime(true); call_user_func($test, $a, $n); $result[$test] += (microtime(true) - $start);
        }
    }
}

asort($result);

echo '<pre>';
print_r($result);
echo '</pre>';

function testWithForeach($a, $n)
{
    foreach ($a as $key => $value)
    {
        if ($value >= $n)
        {
            $result = $key; break;
        }
    }

    return $result;
}

function testWithArrayFlip($a, $n)
{
    $a[] = $n; sort($a); $a = array_flip($a); return ($a[$n] - 1);
}

function testWithArraySearch($a, $n)
{
    $a[] = $n; sort($a); return (array_search($n, $a) - 1);
} 
```

所有方法都在相似的条件下运行，并且分布在 CPU 时间上。

我测试了`$n`从 0 到 1000 的所有值，使用 10 作为步长（总共 100）。

每个`$n`/ 方法组合运行了 10 次，我得到的结果是：

```
Array
(
    [testWithForeach] => 19.338931560516
    [testWithArraySearch] => 96.209128856659
    [testWithArrayFlip] => 133.85276961327
) 
```

我尽量做到公平，实际运行时间可能会因`$n`其他条件而异。

# ios - iPhone Core Data 如何将日期部分添加到带有时间戳的事件中？

> ID：12925720
> 
> 赞同：0
> 
> 时间：2012-10-17T01:09:05.723
> 
> 标签：ios, iphone, objective-c, core-data

我的核心数据堆栈中存储了两种类型的事件，每一种都有一个时间戳。我很感兴趣是否有一种在`UITableView`with 部分中显示这些记录的好方法，其中**每个部分都是任意长的（一天、一周等）**。

**有没有办法将核心数据对象的时间戳转换为部分标题，将一天中的小时数四舍五入？**

所以我们会得到：

```
 October 5 < section title
    Record 1 < records displayed in the section
    Record 2
    Record 3

    October 6
    Record 4

    October 7 
    Record 5
    ...

-OR-
Week 1
Record 1
Record 2

Week 2
Record 3
... 
```

这是我目前用来实现这一目标的方法，但仅限于每天的每个部分。

但是可以说我没有考虑过这个要求，并且有一个只有时间戳的事件列表。我怎样才能把它们分成几部分？

```
//the method used to convert a date into a number to store with the event
    -(int)getDateIDFromDate:(NSDate*)date
    {
        int gmtOffset =    [[NSTimeZone localTimeZone] secondsFromGMT];
        int dateID =([date timeIntervalSinceReferenceDate]+gmtOffset)/86400;
        return dateID;
    }

    //when inserting  a record, the number is saved
    newManagedObject.dayID = [NSNumber numberWithInt:[self getDateIDFromDate:date]];

    //when retrieving, the number is used as a section key path
     NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:self.managedObjectContext sectionNameKeyPath:@"dayID" cacheName:@"Day"];

//the number gets converted back into the date.
    - (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {
        // Display the authors' names as section headings.
        //    return [[[dataManager.dreamEventsController sections] objectAtIndex:section] name];

        NSString* dayIndex =  [[[dataManager.fetchedResultsController sections] objectAtIndex:section] name];
        int dayFromReferenceDate = dayIndex.intValue;
        return [dataManager.sectionDateFormatter stringFromDate:[NSDate dateWithTimeIntervalSinceReferenceDate:(dayFromReferenceDate+1)*86400]];

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T01:27:31.977

仅出于显示目的添加（冗余）数据应始终是最后的手段。

在稍微类似的情况下，我只是向 CoreData 对象添加一个类别，例如

```
-(NSString*)firstLetter
{
    NSString *title = self.title;
    if ( [title length] == 0 ) return @"?";
    return [title substringToIndex:1];
} 
```

然后我只是将其用作 the`sectionNameKeyPath`并且所有其他都与正常情况下相同。

在你的情况下，这个类别会更详细一点，但总体大纲可能是相同的。并且部分名称将是易变的这一事实也应牢记在心。

一个棘手（/丑陋）的部分是将当前的切片设置传达给类别。一些全局或静态变量可以有效地完成这项工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T01:41:22.787

最好的方法是将瞬态属性添加到您的托管对象模型中。在该属性的访问器中，返回一个`NSDate`带有截断时间的标准化（您可以使用 来执行此操作`NSDateComponents`）。然后，当需要获取这些对象时，将其设置`.. sectionNameKeyPath:`为该瞬态属性。

更新：假设您的 NSManagedObject 子类有一个瞬态属性`monthOfTheYear`：

```
- (NSNumber*)monthOfTheYear
{
    [self willAccessValueForKey:@"monthOfTheYear"];

    NSDateComponent *dateComponent = [cachedCalendar components:NSMonthCalendarUnit fromDate:self.timestamp]; // cachedCalendar is a NSCalendar instance

    [self didAccessValueForKey:@"monthOfTheYear"];
    return [NSNumber numberWithInteger:dateComponent.month]; // or a normalized number that takes consideration of the year too
} 
```

我们不会直接创建 NSString 瞬态属性，因为这会打乱您的排序（并且您会失去多语言支持）。和`willAccessValueForKey:`很`didAccessValueForKey:`重要。你应该阅读更多关于他们的文档。

然后是时候显示部分标题：

```
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    NSInteger monthNumber = // Get the monthOfTheYear value from the first NSManagedObject in this section.
    return [[cachedDateFormatter monthSymbols] objectAtIndex:(monthNumber-1)]; // cachedDateFormatter is a NSDateFormatter instance

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T02:02:48.540

顶哥！我的建议是使用 NSDateFormatter

这是 Apple 文档的链接：[NSDateFormatter](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDateFormatter_Class/Reference/Reference.html)

我会在你有时间戳的 managedObject 上添加一个类别，

```
@interface MyManagedobject (ReadableTimestamp)
     -(NSString *)formatedStringFromTimestamp;
@end 

@implementation MyManagedobject (ReadableTimestamp)
     -(NSString *)formatedStringFromTimestamp{
        //TODO: Here you apply all your fancy format, I'm just using the default
        NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
        [formatter setFormatterBehavior:NSDateFormatterBehavior10_4];
        [formatter setDateStyle:dateStyle];
        [formatter setTimeStyle:timeStyle];
         NSString *result = [formatter stringForObjectValue:self.timestamp];
        return result;
     }

 @end 
```

我希望这会有所帮助，美好时光。

如果你是某种优化狂（像我自己），你可以将你的 timeFormatter 定义为一个静态的，这样你就不需要每次都构建它。

# python - 从源代码安装而不是 Python 2.7 安装程序的优点

> ID：12925721
> 
> 赞同：-1
> 
> 时间：2012-10-17T01:09:07.600
> 
> 标签：python, installation

我是一个学习 Python 的完整初学者。我注意到 Python 的 Windows 安装程序状态“不包括源代码”，并且在它下面有一个通过 tarball 安装源代码的选项。

[http://www.python.org/getit/](http://www.python.org/getit/)

如果我在没有源的情况下使用 Windows 安装程序安装它，会遗漏什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T01:10:39.120

源代码。

这可以用作参考，或者，例如，如果您正在进行 Cython 开发（您需要编译源代码）。

但一般来说，普通 Python 用户不需要源代码。如果你需要它，你会知道的。

# jquery - IE jquery click 仅适用于 li 中的文本，而不适用于整个框

> ID：12925723
> 
> 赞同：2
> 
> 时间：2012-10-17T01:09:32.603
> 
> 标签：jquery, css, internet-explorer

我有一系列按钮创建为 li 我希望用户能够单击：

```
<ul class="item_list">
<li class="item_button" id="128" style="color: #4bb2c5" data-seq= "0">1</li>
<li class="item_button" id="129" style="color: #EAA228" data-seq= "1">2</li>
<li class="item_button" id="130" style="color: #c5b47f" data-seq= "2">3</li>
<li class="item_button" id="131" style="color: #579575" data-seq= "3">4</li>
<li class="item_button" id="132" style="color: #839557" data-seq= "4">5</li>
<li class="item_button" id="133" style="color: #958c12" data-seq= "5">6</li>
<li class="item_button" id="134" style="color: #953579" data-seq= "6">7</li>
<li class="item_button" id="135" style="color: #4b5de4" data-seq= "7">8</li>
</ul> 
```

这是相关的CSS：

```
.item_button{
    -moz-box-shadow:inset 0px 1px 0px 0px #ffffff;
    -webkit-box-shadow:inset 0px 1px 0px 0px #ffffff;
    box-shadow:inset 0px 1px 0px 0px #ffffff;
    background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #ededed), color-stop(1, #dfdfdf) );
    background:-moz-linear-gradient( center top, #ededed 5%, #dfdfdf 100% );
    background-color:#ededed;
    -moz-border-radius:6px;
    -webkit-border-radius:6px;
    border-radius:6px;
    border:1px solid #dcdcdc;
        float:left;
    font-size:10pt;
    font-weight:bold;
    padding:6px 24px;
    text-decoration:none;
    text-shadow:1px 1px 0px #ffffff;
        width:120px;
        margin-top:12px;
}

.item_button:hover {
    background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #dfdfdf), color-stop(1, #ededed) );
    background:-moz-linear-gradient( center top, #dfdfdf 5%, #ededed 100% );

    background-color:#dfdfdf;
}
.item_button:active {
    position:relative;
    top:1px;
} 
```

...这是我的 jQuery 处理程序：

```
$('.item_list li').click(function(){
    $('.item_list li').attr('class', 'item_button');
    $(this).attr('class','item_button_selected')
  }); 
```

这一切在 Chrome 和 Safari 中都可以正常工作。用户可以单击 li 中的任何位置，它会“单击”。在 IE 中，只有当用户直接点击 li 内的文本本身时，才会捕获悬停行为和点击，即“1”、“2”等。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-13T11:33:47.297

首先，您不应该重复自己，因此请尝试更新您的 jQuery 以在单个变量中使用 $(this)：

```
$('.item_list li').click(function() {

    var $this = $(this);

    $this.attr('class', 'item_button');
    $this.attr('class', 'item_button_selected');
}); 
```

其次，我同意 elclanrs，你应该尝试使用 toggleClass()。

关于您的 IE 问题，它适用于 IE9 和 IE10。哪个版本不适合您？你用的是IE的兼容模式吗？

# ios - 如何强制 iOS 应用使用 3G 而不是 WiFi？

> ID：12925724
> 
> 赞同：4
> 
> 时间：2012-10-17T01:09:34.573
> 
> 标签：ios, wifi, messaging, firewall, 3g

我想使用一种在 3G 上运行良好但不能在某些公司防火墙上运行的消息传递协议。即使在 WiFi 网络可访问的情况下，我的应用程序在无法通过 WiFi 连接时如何强制使用蜂窝网络？

**编辑：**阅读完 Reachability 类的实现后，我仍然不确定这两者是否确实相互排斥。很可能通过 发现这两个接口`gethostbyname()`，我可能会尝试看看会出现什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-01-06T23:15:48.710

使用 getifaddrs 枚举网络接口。查找以“pdp”开头的 ifa_name。这将是蜂窝接口（例如，pdp_ip0）。测试 (ifa_flags & IFF_UP) 以确保接口已启动，并从 ifa_addr 获取 IP 地址。然后使用 bind() 将您的套接字绑定到该地址。

如果蜂窝接口尚未启动，则不确定如何激活它。通常，我只是进行高级 http 调用以让 iOS 唤醒网络，但不确定当 wifi 也可用时蜂窝服务在什么条件下变为活动状态。我怀疑它通常作为wifi的后备存在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T01:24:14.227

[http://iphonedevsdk.com/discussion/comment/120957](http://iphonedevsdk.com/discussion/comment/120957)

从那个线程的外观来看，这似乎是不可能的。您最好的选择可能是尝试使用该协议，如果它不起作用，请说“请断开 wifi 并重试”之类的内容。

该线程说的几乎相同：

[如何以编程方式在 iPhone 上启动 3g 连接？](https://stackoverflow.com/questions/2217945/how-to-programatically-start-3g-connection-on-iphone)

您可以使用[可达性](https://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)类来测试当前网络连接是否超过 3G 或 WiFi，甚至可以检查网络上是否有特定资源可用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-05-17T09:33:08.153

您可以使用任何套接字库来强制使用蜂窝。从 getifaddrs 找到蜂窝接口，将接口传递给套接字函数，套接字绑定将与蜂窝发生。例如[CocoaAsyncSocket](https://github.com/robbiehanson/CocoaAsyncSocket)

# asp.net-mvc-3 - 如何将 JSON 数据从 asp.net mvc 3 发布到 Web 服务

> ID：12925726
> 
> 赞同：0
> 
> 时间：2012-10-17T01:09:55.853
> 
> 标签：asp.net-mvc-3, web-services

> **可能重复：**
> [在 .Net 中使用基于 REST 的 Web 服务](https://stackoverflow.com/questions/727649/consuming-rest-based-web-services-in-net)

我有 asp.net MVC 项目，我的合作伙伴从事 RESTFUL Web 服务。然后我就是将 JSON 数据发布到 Web 服务的人。但我从不将数据发布到网络服务。谁能告诉我如何使用 asp.net mvc 3.0 将 JSON 数据发布到 Restful。

感谢任何人都可以给我的任何帮助！

# sorting - Jqgrid如何在数据类型为本地（或loadonce：true）时保留cellattr条件格式？

> ID：12925729
> 
> 赞同：3
> 
> 时间：2012-10-17T01:10:46.437
> 
> 标签：sorting, jqgrid, filtering, local

我有一个 jqgrid 使用 loadonce:true 选项加载大量行（以 1000 为单位）。jqgrid加载完成后，用户将在本地对数据进行操作。我在其中一个列上也有一个条件格式，看起来像这样

```
 cellattr: function(rowId, cellValue, rawObject, cm, rdata) {
     if (rawObject[0]=='Stale'){
    return ' class="stale-highlight"';
     } else if (rawObject[0]=='Not Stale') {
    return ' class="notstale-highlight"';
     } 
 } 
```

它工作正常，除了一旦用户进行排序、过滤等，条件格式就会丢失。

我知道这可能与加载网格后将数据类型更改为本地的 loadonce 选项有关。我该怎么做才能让用户在不轮询 servrr 但仍保留条件格式的情况下对数据进行操作？

谢谢卡斯比

**

## 更新：

**

我发现了问题。希望它对其他人有用。

为了减少数据大小，我使用这种 json 格式：

```
{"rows":[{"id":"1","cell":["Not Stale","xxxx","2012-10-16 14:20:59",
                           "110517853","10797445","2012-10-17 08:29:51",
                           "xxxx","2012-10-17 08:33:02", "xxxx",
                           "105954724","xxxxxx","11111.0000",
                           "10000000.0000","10000000.0000"]}]
 ,"page":1,"total":1,"records":"2"} 
```

三是 json 中没有列名。因此，最初加载网格时，cellattr 中使用的 rawObject 参数是一个值数组（对应于列）。加载网格后，rawObject 变成了一个对象。它包含成对的 column_name:column_value。

因此，我的原始代码仅在初始网格负载期间有效。

```
cellattr: function(rowId, cellValue, rawObject, cm, rdata) {
     if (rawObject[0]=='Stale'){
      return ' class="stale-highlight"';
      } else if (rawObject[0]=='Not Stale') {
       return ' class="notstale-highlight"';
   } 
} 
```

要解决此问题，我可以看到两个选项：

```
use the column_name:column_value pairs in the json object and change the cellattr code to reference the rawObject.column_name. 
```

或者

```
add extra logic to check rawObject.column_name in the cellattr function. it may be less efficient programmingwise but sometime changing input is not that easy

    cellattr: function(rowId, cellValue, rawObject, cm, rdata) 
    { if   (rawObject[0]=='Stale' || rawObject.column_name=='Stale')
       { return ' class="stale-highlight"'; } 
     else if (rawObject[0]=='Not Stale' || rawObject.column_name=='Not Stale') 
       { return ' class="notstale-highlight"'; } 
```

谢谢卡斯比

# python - Python中的无限循环while循环

> ID：12925730
> 
> 赞同：0
> 
> 时间：2012-10-17T01:10:54.957
> 
> 标签：python, variables, loops

我不知道怎么了。当我在左侧输入 x*x 并在右侧输入 25 时，它不起作用。python shell没有显示错误，但是在我输入解决方案的数量后，什么也没有发生。我认为它可能处于无限循环中，或者每次运行后都没有应用 x 。请帮忙！这是我的代码：

```
#getting input information

print
print "This program cannot solve for irrational or repeating numbers. Please round for them in your equation."
print
print "Make the variable in your equation stand for x"
print
startingLimit=int(raw_input("What is the lowest estimate that your variable could possibly be?"))
print
wholeNumber=raw_input("Do you know if your variable will be a whole number or a fraction? Answer: yes/no")
if (wholeNumber== "yes"):
     print
     fraction= raw_input("Is it a decimal/fraction? Answer:yes/no")
     if (fraction=="yes"):
        print
        print "This program will only calculate up to the fourth place to the right of the decimal"
        xfinder=0.0001
    else:
        xfinder=1
else:
    xfinder=0.0001

x=0        
leftEquation=raw_input("Enter your left side of the equation:")
print
rightEquation=raw_input("Enter the right side of the equation:")
print
amountSolutions=raw_input("How many solutions are there to your equation? (up to 20)")

#solving

indivisualCount=0
count=0
x=startingLimit
while (count!=amountSolutions):

    while (count==0):
        ifstuffleft=eval(leftEquation)
        ifstuffright=eval (rightEquation)
        if (ifstuffleft!=ifstuffright):
            x=x+xfinder
        else:
            a=x
            count=count+1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T01:24:09.030

1.  为什么你有内部的`while (count==0):`while循环？`while (count!=amountSolutions):`这将导致它一旦`count`不等于 0就会陷入无限循环（在循环中）（因为它永远不会进入那个内部 while 循环）。

2.  `x=x+xfinder`解决此问题后，请注意，如果值彼此相等，则不会执行。这意味着您将保持相同的值（在这种情况下`-5`），直到您满足解决方案的数量。`xfinder`因此，您必须通过值是否相等来增加值。

3.  你永远不会打印解决方案或用它做任何事情。你可能想`a=x`用`print "One solution is", x`

最后，当你发布一个问题时，你应该争取一个*最小的*例子。您的所有输入代码都可以通过硬编码 5 个变量来替换，例如：

```
startingLimit = -10
xfinder = 1
leftEquation = "x*x"
rightEquation = "25"
amountSolutions = 2 
```

这 a) 需要减少 23 行代码，使您的问题更易于阅读和理解；b) 使测试更容易，因此人们无需回答六个问题即可看到问题；c) 避免回答者猜测您输入的内容`startingLimit`和`amountSolutions`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T01:24:21.907

`1` 如果给出除 for以外的任何值，`amountSolutions`则此代码似乎将进入无限循环。

```
while (count!=amountSolutions):
    while (count==0): 
```

在上面一旦找到一个解决方案，`count = 1`内部的 while 循环就会被跳过。

# javascript - 在条纹按钮上设置数据属性

> ID：12925734
> 
> 赞同：9
> 
> 时间：2012-10-17T01:12:06.940
> 
> 标签：javascript, jquery, coffeescript, stripe-payments

我想不通。我检查了有关设置数据属性的其他问题，似乎是一件很棘手的事情。

条纹按钮数量纯粹是为了美观，每次用户更新数量选择框时，我都会尝试设置它（“数据数量”）。

每次我更改数量时，选择一个警报都会给出正确的数量，如果我检查 dom，'data-amount' 属性似乎设置正确，但是当我单击条纹按钮时，模式会显示默认数据量，即什么也没有。

有人知道怎么做吗？

查看（表单，选择输入未显示）

```
<div class="stripe-controls" align="center">
  <script src="https://button.stripe.com/v1/button.js" class="stripe-button"
      data-key="ENV['STRIPE_PUBLIC_KEY'] %>" data-amount="">
  </script>
</div> 
```

咖啡脚本

```
$ ->
  $('#order_quantity').click(orderTotal)
  orderTotal()

orderTotal = ->
  quantity = $('#order_quantity').val()
  price = $('#ticket-price').data('url')
  total = quantity * price
  $('.stripe-button').attr('data-amount', total)
  alert total 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-17T02:18:53.227

使用 指定自定义金额 [`StripeCheckout.open()`](https://stripe.com/docs/checkout)。

注意：我在 Stripe 工作。

# cloudbees - 静态文件位置和缓存控制标头

> ID：12925735
> 
> 赞同：0
> 
> 时间：2012-10-17T01:12:10.017
> 
> 标签：cloudbees

在 Cloudbees 中使用基本的 Tomcat 容器时，静态文件是由 Tomcat 还是 Apache 提供的？我需要设置标头，以便浏览器不会缓存将在 Apache .htaccess 文件中完成的某个文件，或者我可以为 Tomcat 编写一个 servlet 过滤器来做同样的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T20:16:33.170

Cloudbees 不使用 Apache 前端，而是使用 nginx。所有请求，包括静态资源，都由应用程序容器（tomcat、jboss）提供服务。最佳实践是将它们分发到 CDN 上，以便为应用程序用户提供更好的性能和更低的延迟，请参阅[http://wiki.cloudbees.com/bin/view/RUN/Using+a+CDN](http://wiki.cloudbees.com/bin/view/RUN/Using+a+CDN)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T11:21:15.093

根据我的经验，所有请求都到达 Tomcat 级别。这是我在 cloudbees 的服务日志的豁免：

11:10:53.031 [http-8841-2] 调试 oswsDispatcherServlet - 名为“spring”的 DispatcherServlet 处理 [/resources/images/logo.png] 的 GET 请求

显然，对 logo.png 文件的请求到达了那里。

顺便说一句，我认为他们使用 ngineX 而不是 Apache。

# mysql - 为什么会出现分段错误（核心转储）？

> ID：12925738
> 
> 赞同：3
> 
> 时间：2012-10-17T01:13:13.420
> 
> 标签：mysql, c

这是我要运行的代码。它编译得很好，直到昨天都很好。

```
#include <my_global.h>
#include <mysql.h>

int main(int argc, char **argv)
{

  MYSQL *conn;
  MYSQL_RES *result;
  MYSQL_ROW row;
  int num_fields;
  int i;

  conn = mysql_init(NULL);
  mysql_real_connect(conn, "hostname", "username", "password", "database_name", 0, NULL, 0);

  mysql_query(conn, "SELECT * FROM tabletest");
  result = mysql_store_result(conn);

  num_fields = mysql_num_fields(result);

  while ((row = mysql_fetch_row(result)))
  {
      for(i = 0; i < num_fields; i++)
      {
          printf("%s ", row[i] ? row[i] : "NULL");
      }
      printf("\n");
  }

  mysql_free_result(result);
  mysql_close(conn);

} 
```

请注意，`mysql_real_connect()`这里的参数对于隐私来说是通用的，但就像我说的，它昨天起作用了。当我编译成功后尝试运行代码时，我得到：

```
Segmentation fault (core dumped) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T01:31:04.073

Paddy指出了关键问题，我没有查错。错误检查后，我发现我没有被授予访问远程服务器的权限，并且正在获取

```
Error 1045: Access denied for user 'username'@'ip' (using password: YES) 
```

然后我意识到我的电脑在开机后IP地址发生了变化。我从来不知道这发生了。所以我不得不回到cPanel，将我的“新”IP地址添加到MySQL的远程访问列表中，它就可以工作了。现在的问题是找出我的 IP 地址如何保持静态。

这个故事的寓意是总是处理错误。

# python - 如何检查目录内的文件是否（与多个其他目录）？使用 OS 模块

> ID：12925744
> 
> 赞同：0
> 
> 时间：2012-10-17T01:13:26.127
> 
> 标签：python, operating-system

假设我有一个这样的目录结构

```
Directory of C:\treeofbkup

10/17/2012  01:59 PM    <DIR>          .
10/17/2012  01:59 PM    <DIR>          ..
10/17/2012  01:59 PM             7,209 index
10/17/2012  01:59 PM    <DIR>          objects
               1 File(s)          7,209 bytes
               3 Dir(s)  912,672,129,024 bytes free 
```

文件夹中包含的文件`objects`。

我的问题是有没有一种方法可以检查文件是否不考虑名称`objects`（比如我不知道该文件夹名称）？无需编写 for 循环来手动遍历我的目录结构的路径？

```
def search(path, file):
    for  (dirpath, dirnames, filenames) in os.walk(path):
        for f in filenames:
            if file == f:
                return True #hey look here is my file
    return False #oops couldnt find your file sorry 
```

我追求的解决方案类似于`directory_set = set()`and `if directory_set.contains(path)`。如果这个问题让某些人感到困惑，我很抱歉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T01:19:07.743

答案是不。您必须至少遍历树一次，然后如果您想经常重用它，您可以将文件名查找表存储到可能的目录（例如腌制或 sqlite3 dbase）。

# c# - 使用 C# 在 asp.net 中从 sql 显示表中的所有数据

> ID：12925747
> 
> 赞同：-1
> 
> 时间：2012-10-17T01:13:53.357
> 
> 标签：c#, asp.net, asp.net-mvc

我只是在用 c# 学习 asp.net。由于对 php 知之甚少，我想我可以做一些事情，但我在显示我的数据库中的记录时遇到了问题。

我有一个名为资源的表，我想做的是输出表中的所有数据。这是我想在 php 中用 c# 编写的输出...

```
<?php
while($row = mysql_fetch_object($tablename))
{
   echo "<tr><td>$row->image</td><td><a href='#'>download link</a></td><a href='http://'".$row->url."'>'".$row->url."'</a></tr>";
}
?> 
```

基本上我的 php 没有问题，但我希望这段代码在 C# 中给出相同的输出（在表格中包含图像、下载链接和 url）。请帮忙，...

我在 c# 中有这段代码可以在标签控件中输出数据

```
var cmd = new MySqlCommand("SELECT * FROM resources");
Knct dal = new Knct();
MySqlDataReader dr = dal.DatareaderMethod(cmd, Knct.executemethods.ExecuteReader);
while (dr.Read())
{
  label1.Text = dr[2].ToString();
} 
```

while 循环不起作用，它只显示一个值。我如何使它显示数据库中的所有记录以及我可以使用哪个 asp 控件来输出记录并在表输出中创建一个 url 链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T02:03:24.330

如果您使用的是 ASP.Net，则首选中继器用于简单的显示。

在您背后（或服务器端）的代码中，您必须将数据绑定到转发器：

```
 ...
   m_Repeater.DataSource = GetImages();  //Function that returns Image records
   m_Repeater.DataBind();
   ... 
```

ASPX 页面上的标记将类似于：

```
<asp:Repeater id="m_Repeater" runat="server">
  <HeaderTemplate>
    <table>
      <tr>
        <td>Image</td>
        <td>Link</td>
        <td>Url</td>
      </tr>
  </HeaderTemplate>
  <ItemTemplate>
      <tr>
        <td><img src='<%# Container.DataItem("ImageSrc") %>'/></td>
        <td><a href='<%# Container.DataItem("DownloandLink") %>'>Download Link</a></td>
        <td><a href='<%# Container.DataItem("ImageUrl") %>'>Url</a></td>
      </tr>
  </ItemTemplate>
  <FooterTemplate>
     </table>
  </FooterTemplate>
</asp:Repeater> 
```

**ASP.Net MVC**

如果您使用的是 ASP.Net MVC，则可以使用 Razor 语法，它更优雅。假设`Model`对可枚举的`Image`对象列表进行强类型化，则视图页面上的标记可能类似于：

```
@foreach(var image in Model)
{
   <tr>
     <td><img src='@image.ImageSrc'/></td>
     <td><a href='@image.DownloadLink'>Download Link</a></td>
     <td><a href='@image.ImageUrl'>Url</a></td>
   </tr>
} 
```

一些有用的文章/资源：

*   [MSDN - 中继器](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater%28v=vs.71%29.aspx)
*   [DotNetcurry - 剃刀](http://www.dotnetcurry.com/ShowArticle.aspx?ID=601)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T02:03:54.187

如果这是网络表单，您可以使用转发器来显示您的每个值。它看起来像这样：

```
aspx:
<asp:Repeater ID="repeater" runat="server">
    <ItemTemplate>
        <div><%# Eval("columnName")%></div>
    </ItemTemplate>
</asp:Repeater>

aspx.cs:
repeater.DataSource = dr;
repeater.DataBind(); 
```

把它想象成一个`for`循环。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T05:36:57.097

像这样使用

```
<asp:GridView ID="grdPivot" runat="server" AutoGenerateColumns="True">
</asp:GridView>

<asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings:MySql %>" ProviderName="<%$ ConnectionStrings:MySql.ProviderName %>" SelectCommand="SELECT * FROM resources"></asp:SqlDataSource> 
```

这是将数据绑定到 gridview 或任何其他数据控件的最简单方法。

# c# - C# 中的 IApplicationActivationManager::ActivateApplication？

> ID：12925748
> 
> 赞同：23
> 
> 时间：2012-10-17T01:14:28.410
> 
> 标签：c#, com, windows-8

我正在为 Metro 应用程序进行自动化测试，我发现代码可以做很多我需要的事情，但它是用 C++ 编写的：http: [//blogs.msdn.com/b/windowsappdev/archive/2012/09/04/ windows-8-apps.aspx 的自动化测试](http://blogs.msdn.com/b/windowsappdev/archive/2012/09/04/automating-the-testing-of-windows-8-apps.aspx)

我的问题是，我如何在 C# 中使用 IApplicationActivationManager::ActivateApplication，因为我不懂 C++？该方法的详细信息可在此处找到：http: [//msdn.microsoft.com/en-us/library/windows/desktop/hh706903 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/hh706903(v=vs.85).aspx)

这是我从 Shobjidl.idl 中提取的代码：

```
cpp_quote("DEFINE_ENUM_FLAG_OPERATORS(ACTIVATEOPTIONS)")

// IApplicationActivationManger is used to activate an immersive application identified by its Application User Model Id.
//
// Developers who are interested in using the Application Activation Manager do not need to implement the following
// interface. An implementation is provided through the CoCreatable Object with CLSID_ApplicationActivationManager.
[
    object,
    uuid(2e941141-7f97-4756-ba1d-9decde894a3d),
    pointer_default(unique)
]
interface IApplicationActivationManager : IUnknown
{
    // Activates the specified immersive application for the "Launch" contract, passing the provided arguments
    // string into the application.  Callers can obtain the process Id of the application instance fulfilling this contract.
    HRESULT ActivateApplication(
        [in] LPCWSTR appUserModelId,
        [in, unique] LPCWSTR arguments,
        [in] ACTIVATEOPTIONS options,
        [out] DWORD *processId);
    HRESULT ActivateForFile(
        [in] LPCWSTR appUserModelId,
        [in] IShellItemArray *itemArray,
        [in, unique] LPCWSTR verb,
        [out] DWORD *processId);
    HRESULT ActivateForProtocol(
        [in] LPCWSTR appUserModelId,
        [in] IShellItemArray *itemArray,
        [out] DWORD *processId);
}

// CLSID_ApplicationActivationManager
    [ uuid(45BA127D-10A8-46EA-8AB7-56EA9078943C) ] coclass ApplicationActivationManager { interface IApplicationActivationManager; } 
```

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-10-17T04:48:59.257

试试下面对我有用的代码片段。

```
public enum ActivateOptions
{
    None = 0x00000000,  // No flags set
    DesignMode = 0x00000001,  // The application is being activated for design mode, and thus will not be able to
    // to create an immersive window. Window creation must be done by design tools which
    // load the necessary components by communicating with a designer-specified service on
    // the site chain established on the activation manager.  The splash screen normally
    // shown when an application is activated will also not appear.  Most activations
    // will not use this flag.
    NoErrorUI = 0x00000002,  // Do not show an error dialog if the app fails to activate.                                
    NoSplashScreen = 0x00000004,  // Do not show the splash screen when activating the app.
}

[ComImport, Guid("2e941141-7f97-4756-ba1d-9decde894a3d"), InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
interface IApplicationActivationManager
{
    // Activates the specified immersive application for the "Launch" contract, passing the provided arguments
    // string into the application.  Callers can obtain the process Id of the application instance fulfilling this contract.
    IntPtr ActivateApplication([In] String appUserModelId, [In] String arguments, [In] ActivateOptions options, [Out] out UInt32 processId);
    IntPtr ActivateForFile([In] String appUserModelId, [In] IntPtr /*IShellItemArray* */ itemArray, [In] String verb, [Out] out UInt32 processId);
    IntPtr ActivateForProtocol([In] String appUserModelId, [In] IntPtr /* IShellItemArray* */itemArray, [Out] out UInt32 processId);
}

[ComImport, Guid("45BA127D-10A8-46EA-8AB7-56EA9078943C")]//Application Activation Manager
class ApplicationActivationManager : IApplicationActivationManager
{
    [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime)/*, PreserveSig*/]
    public extern IntPtr ActivateApplication([In] String appUserModelId, [In] String arguments, [In] ActivateOptions options, [Out] out UInt32 processId);
    [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime)]
    public extern IntPtr ActivateForFile([In] String appUserModelId, [In] IntPtr /*IShellItemArray* */ itemArray, [In] String verb, [Out] out UInt32 processId);
    [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime)]
    public extern IntPtr ActivateForProtocol([In] String appUserModelId, [In] IntPtr /* IShellItemArray* */itemArray, [Out] out UInt32 processId);
}

class Program
{
    static void Main(string[] args)
    {
        ApplicationActivationManager appActiveManager = new ApplicationActivationManager();//Class not registered
        uint pid;
        appActiveManager.ActivateApplication("2c123c17-8b21-4eb8-8b7f-fdc35c8b7718_n2533ggrncqjt!App", null, ActivateOptions.None, out pid);
        Console.WriteLine();
        Console.ReadLine();
    }
} 
```

希望您可能已经知道如何让应用程序名称激活。但是，想在此处与可能搜索相同信息的其他人共享该信息。我们可以从以下注册表位置获取 AppUserModelID： [![Windows 注册表编辑器](../Images/9c61b8a0ffeac5ba43318e07dab767ad.png)](https://i.stack.imgur.com/GPWm6.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-03-19T13:36:02.970

这是 ActivateForFile 方法的 sankar 答案的更新版本（感谢那个，真的帮助了我）。我将 itemArray 更改为 IShellItemArray 而不是 IntPtr，并从 shell32 添加了接口和方法。

```
public enum ActivateOptions
{
    None = 0x00000000,  // No flags set
    DesignMode = 0x00000001,  // The application is being activated for design mode, and thus will not be able to
    // to create an immersive window. Window creation must be done by design tools which
    // load the necessary components by communicating with a designer-specified service on
    // the site chain established on the activation manager.  The splash screen normally
    // shown when an application is activated will also not appear.  Most activations
    // will not use this flag.
    NoErrorUI = 0x00000002,  // Do not show an error dialog if the app fails to activate.                                
    NoSplashScreen = 0x00000004,  // Do not show the splash screen when activating the app.
}

[ComImport, Guid("2e941141-7f97-4756-ba1d-9decde894a3d"), InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
interface IApplicationActivationManager
{
    // Activates the specified immersive application for the "Launch" contract, passing the provided arguments
    // string into the application.  Callers can obtain the process Id of the application instance fulfilling this contract.
    IntPtr ActivateApplication([In] String appUserModelId, [In] String arguments, [In] ActivateOptions options, [Out] out UInt32 processId);
    IntPtr ActivateForFile([In] String appUserModelId, [In] [MarshalAs(UnmanagedType.Interface, IidParameterIndex = 2)] /*IShellItemArray* */ IShellItemArray itemArray, [In] String verb, [Out] out UInt32 processId);
    IntPtr ActivateForProtocol([In] String appUserModelId, [In] IntPtr /* IShellItemArray* */itemArray, [Out] out UInt32 processId);
}

[ComImport, Guid("45BA127D-10A8-46EA-8AB7-56EA9078943C")]//Application Activation Manager
class ApplicationActivationManager : IApplicationActivationManager
{
    [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime)/*, PreserveSig*/]
    public extern IntPtr ActivateApplication([In] String appUserModelId, [In] String arguments, [In] ActivateOptions options, [Out] out UInt32 processId);
    [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime)]
    public extern IntPtr ActivateForFile([In] String appUserModelId, [In] [MarshalAs(UnmanagedType.Interface, IidParameterIndex = 2)]  /*IShellItemArray* */ IShellItemArray itemArray, [In] String verb, [Out] out UInt32 processId);
    [MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime)]
    public extern IntPtr ActivateForProtocol([In] String appUserModelId, [In] IntPtr /* IShellItemArray* */itemArray, [Out] out UInt32 processId);
}

[ComImport]
[InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
[Guid("43826d1e-e718-42ee-bc55-a1e261c37bfe")]
interface IShellItem
{
}

[ComImport]
[InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
[Guid("b63ea76d-1f85-456f-a19c-48159efa858b")]
interface IShellItemArray
{
}

internal class Program2
{
    [DllImport("shell32.dll", CharSet = CharSet.Unicode, PreserveSig = false)]
    private static extern void SHCreateItemFromParsingName(
        [In] [MarshalAs(UnmanagedType.LPWStr)] string pszPath,
        [In] IntPtr pbc,
        [In] [MarshalAs(UnmanagedType.LPStruct)] Guid iIdIShellItem,
        [Out] [MarshalAs(UnmanagedType.Interface, IidParameterIndex = 2)] out IShellItem iShellItem);

    [DllImport("shell32.dll", CharSet = CharSet.Unicode, PreserveSig = false)]
    private static extern void SHCreateShellItemArrayFromShellItem(
        [In] [MarshalAs(UnmanagedType.Interface, IidParameterIndex = 2)] IShellItem psi,
        [In] [MarshalAs(UnmanagedType.LPStruct)] Guid iIdIShellItem,
        [Out] [MarshalAs(UnmanagedType.Interface, IidParameterIndex = 2)] out IShellItemArray iShellItemArray);

    private static void Main(string[] args)
    {
        ApplicationActivationManager appActiveManager = new ApplicationActivationManager();//Class not registered
        uint pid;
        appActiveManager.ActivateApplication("2c123c17-8b21-4eb8-8b7f-fdc35c8b7718_n2533ggrncqjt!App", null, ActivateOptions.None, out pid);
        Console.WriteLine("Activated");
        Console.ReadLine();

        IShellItemArray array = GetShellItemArray(@"C:\temp\somefile.xyz");
        appActiveManager.ActivateForFile("2c123c17-8b21-4eb8-8b7f-fdc35c8b7718_n2533ggrncqjt!App", array, "Open",
            out pid);
        Console.WriteLine("Activated for file");
        Console.ReadLine();
    }

    private static IShellItemArray GetShellItemArray(string sourceFile)
    {
        IShellItem item = GetShellItem(sourceFile);
        IShellItemArray array = GetShellItemArray(item);

        return array;
    }

    private static IShellItem GetShellItem(string sourceFile)
    {
        IShellItem iShellItem = null;
        Guid iIdIShellItem = new Guid("43826d1e-e718-42ee-bc55-a1e261c37bfe");
        SHCreateItemFromParsingName(sourceFile, IntPtr.Zero, iIdIShellItem, out iShellItem);

        return iShellItem;
    }

    private static IShellItemArray GetShellItemArray(IShellItem shellItem)
    {
        IShellItemArray iShellItemArray = null;
        Guid iIdIShellItemArray = new Guid("b63ea76d-1f85-456f-a19c-48159efa858b");
        SHCreateShellItemArrayFromShellItem(shellItem, iIdIShellItemArray, out iShellItemArray);

        return iShellItemArray;
    } 
```

# scheme - 在 Scheme 中更改图像的颜色

> ID：12925749
> 
> 赞同：1
> 
> 时间：2012-10-17T01:14:52.310
> 
> 标签：scheme

```
(define obamicon
  (lambda (clr2)
  (image-map (lambda (clr1) (image-ref clr1 (+ (color-ref clr1 'red)(color-ref clr1 'green)
                                          (color-ref clr1 'blue))))

(cond
      [(<= clr2 181) (color-set! clr2 [0 51 76])]
      [(and (>= clr2 182) (<= clr2 363)) (color-set! clr2 [217 26 33])]
      [(and (>= clr2 364) (<= clr2 545)) (color-set! clr2 [112 150 158])]
      [(and (>= clr2 546) (<= clr2 765)) (color-set! clr2 [252 227 166])])))) 
```

我正在制作一个更改图像以模仿奥巴马竞选海报的程序。图像映射假设获取每个像素并将它们相加以获得总和，并且在 cond 语句中检查该总和以查看假设用什么颜色替换它。截至目前，我得到

```
Exception in <=: #[color 0 0 0] is not a real number or clr1 is not bound. 
```

有什么想法是错的吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T10:36:56.430

问题在于看起来像 的语句`(<= clr2 181)`，因为颜色无法与数字进行比较。因此，该`<=`函数抱怨您没有传递两个数字，而是传递了一个颜色和一个数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T09:40:20.273

那不是您的编译器抱怨语法错误，而是**图像映射**函数（或者，更确切地说，它调用的函数）抱怨已传递给它的参数。

我不熟悉**image-map**函数（它是标准库函数还是您编写的函数？）但我认为您的代码中存在结构错误。您正在使用两个参数调用**image-map** - 一个是函数，另一个是**cond**语句的输出。我很确定这不是您想要做的，或者如果是这样，那么**cond**语句将返回一个未定义的值。我认为**image-map**在其第二个参数中没有收到任何有用的信息，然后调用您的匿名函数而没有传递给它的值。然后您的匿名函数会抱怨。

所以整理一下你的代码结构。image-map 的第二个参数应该是什么？弄清楚如何把它放在那里。

# html - 我无法让两个内容区域并排浮动

> ID：12925755
> 
> 赞同：0
> 
> 时间：2012-10-17T01:15:21.390
> 
> 标签：html, css

我不能在不破坏容器的情况下让两个内容区域并排浮动。我将第一个区域提示为 float:left 但是当我提示 float:right 到内容区域 2 时，我的容器不再工作。

该对象确实浮动，但容器消失了。

这是我的网站[http://aasdsafasdf.weebly.com/](http://aasdsafasdf.weebly.com/)（我还处于早期阶段）

```
#container {
width: 1100px;
margin: 0 auto;
background: #ffffff;
}

#content {
float: left;
height: auto;
width: 710px;
}

#content2 {
float: right;
height: auto;
width: 350px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T01:20:50.620

您的页面上有一些标记错误（请注意`</script>`您的一个样式表链接后的标记？），但只需将您的容器设置为隐藏溢出：

```
#container {
   width: 1100px;
   margin: 0 auto;
   background: #ffffff;
   overflow:hidden
}
#content2 {
   height: auto;
   width: 350px;
   float:right;
} 
```

那应该可以解决问题。但是请确保您修复了您的代码......它现在有各种各样的问题：http: [//validator.w3.org/check ?uri=http%3A%2F%2Faasdsafasdf.weebly.com%2F&charset=%28detect+自动%29&doctype=内联&group=0](http://validator.w3.org/check?uri=http%3A%2F%2Faasdsafasdf.weebly.com%2F&charset=%28detect+automatically%29&doctype=Inline&group=0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T01:21:41.827

```
#container {
width: 1100px;
margin: 0 auto;
background: #ffffff;
}

#content {
float: left;
height: auto;
width: 710px;
display: block;
}

#content2 {
float: left;
height: auto;
width: 350px;
display: block;
} 
```

您希望两个内容 div 都向左浮动并成为 display:block;，然后它们将向上推向其左侧的那个。

# c - 如何在我的 minishell 中处理 null 环境变量？

> ID：12925759
> 
> 赞同：1
> 
> 时间：2012-10-17T01:16:02.977
> 
> 标签：c, shell, unix, environment-variables, expansion

我正在用 C 语言制作一个 minishell，我正在考虑环境变量。我从用户那里获取原始输入行，并将其传递给一个函数：

```
int expand(char *orig, char *new, int newsize) 
```

其中 new 是一个固定长度的字符数组。我遍历 orig 直到找到 ${ 然后使用 getenv 来查找变量的值。如果实际上有一个值，我只需将其复制到新的。但是，当没有值并且 getenv 返回 null 时，我遇到了问题。

我的老师告诉我只需插入一个空字符，但这对我来说没有任何意义，我认为他的意思有所不同。如果我要在 orig 中插入一个空字符，那么当我将它解析为参数时，它会认为空字符标记了字符串的结尾，并且不会费心寻找任何进一步的参数。

例如，如果我输入这样的会话：

```
echo ${USER} ${NOTHING} ${TERM} 
```

然后：

```
orig = "echo ${USER} ${NOTHING} ${TERM}\0" 
```

和

```
new = "echo my_user_name \0 xterm\0" 
```

输出将是：

```
my_user_name 
```

因为它会将 my_user_name 视为最后一个参数，因为在它可以将 xterm 读入参数列表之前存在一个空终止符。

我知道这是一个模糊的问题，但我认为你们中的一些人在制作 minishell 方面非常有经验，并且知道通常如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T02:19:29.067

也许他的意思是插入一个空字符串，即用任何内容替换变量。这就是 /bin/sh 所做的。

```
$ echo "hi $joe how are you"
hi  how are you 
```

空字符是值为 0 的字符。通常写为`'\0'`. 如您所知，它是 C 字符串结束标记。

空字符串也称为空字符串。是`""`。在 C 中，它由一个长度为 0、1 字节的字符数组表示，如下所示：

```
char str[1] = {'\0'}; 
```

但从概念上讲，它是不包含字符的唯一字符串。

就个人而言，我更喜欢称它为空字符串而不是空字符串。Null 是一个被过度使用的词。空字符。空指针。

# python - Python - Twisted 和 PyAudio + 聊天

> ID：12925760
> 
> 赞同：2
> 
> 时间：2012-10-17T01:16:23.370
> 
> 标签：python, twisted, voip, pyaudio

我一直在玩弄 Twisted 扩展，并且玩弄了一个聊天室之类的系统。但是我想扩展它。截至目前，它仅支持使用用户名等的多客户端聊天。但我想尝试使用 pyAudio 扩展来构建一种 VoIP 应用程序。我在客户端有一个 clientFactory 和一个简单的 echo 协议，在服务器上有一个 serverFactory 和协议。但我不完全确定如何以此为基础。做这样的事情的最好方法是什么？

如果你需要它的代码来帮助它client.py：

```
import wx
from twisted.internet import wxreactor
wxreactor.install()

# import twisted reactor
import sys
from twisted.internet import reactor, protocol, task
from twisted.protocols import basic

class ChatFrame(wx.Frame):

    def __init__(self):
        wx.Frame.__init__(self, parent=None, title="WhiteNOISE")
        self.protocol = None  # twisted Protocol

        sizer = wx.BoxSizer(wx.VERTICAL)
        self.text = wx.TextCtrl(self, style=wx.TE_MULTILINE | wx.TE_READONLY)
        self.ctrl = wx.TextCtrl(self, style=wx.TE_PROCESS_ENTER, size=(300, 25))

        sizer.Add(self.text, 5, wx.EXPAND)
        sizer.Add(self.ctrl, 0, wx.EXPAND)
        self.SetSizer(sizer)
        self.ctrl.Bind(wx.EVT_TEXT_ENTER, self.send)

    def send(self, evt):
        self.protocol.sendLine(str(self.ctrl.GetValue()))
        self.ctrl.SetValue("")

class DataForwardingProtocol(basic.LineReceiver):
    def __init__(self):
        self.output = None

    def dataReceived(self, data):
        gui = self.factory.gui

        gui.protocol = self
        if gui:
            val = gui.text.GetValue()
            gui.text.SetValue(val + data)
            gui.text.SetInsertionPointEnd()

    def connectionMade(self):
        self.output = self.factory.gui.text  # redirect Twisted's output

class ChatFactory(protocol.ClientFactory):
    def __init__(self, gui):
        self.gui = gui
        self.protocol = DataForwardingProtocol

    def clientConnectionLost(self, transport, reason):
        reactor.stop()

    def clientConnectionFailed(self, transport, reason):
        reactor.stop()

if __name__ == '__main__':
    app = wx.App(False)
    frame = ChatFrame()
    frame.Show()
    reactor.registerWxApp(app)
    reactor.connectTCP("192.168.1.115", 5001, ChatFactory(frame))
    reactor.run() 
```

服务器.py：

```
from twisted.internet import reactor, protocol
from twisted.protocols import basic
import time

def t():
    return "["+ time.strftime("%H:%M:%S") +"] "

class EchoProtocol(basic.LineReceiver):
    name = "Unnamed"

    def connectionMade(self):
    #on client connection made
    self.sendLine("WhiteNOISE")
        self.sendLine("Enter A Username Below...")
        self.sendLine("")
        self.count = 0
        self.factory.clients.append(self)
        print t() + "+ Connection from: "+ self.transport.getPeer().host

    def connectionLost(self, reason):
    #on client connection lost
        self.sendMsg("- %s left." % self.name)
        print t() + "- Connection lost: "+ self.name
        self.factory.clients.remove(self)

    def lineReceived(self, line):
    #actions to do on message recive
        if line == '/quit':
    #close client connection
            self.sendLine("Goodbye.")
            self.transport.loseConnection()
            return
        elif line == "/userlist":
    #send user list to single client, the one who requested it
            self.chatters()
            return
    elif line.startswith("/me"):
    #send an action formatted message
        self.sendLine("**" + self.name + ": " + line.replace("/me",""))
        return
    elif line == "/?":
        self.sendLine("Commands: /? /me /userlist /quit")
        return
        if not self.count:
            self.username(line)
        else:
            self.sendMsg(self.name +": " + line)

    def username(self, line):
    #check if username already in use
        for x in self.factory.clients:
            if x.name == line:
                self.sendLine("This username is taken; please choose another")
                return

        self.name = line
        self.chatters()
        self.sendLine("You have been connected!")
        self.sendLine("")
        self.count += 1
        self.sendMsg("+ %s joined." % self.name)
        print '%s~ %s connected as: %s' % (t(), self.transport.getPeer().host, self.name)

    def chatters(self):
        x = len(self.factory.clients) - 1
        s = 'is' if x == 1 else 'are'
        p = 'person' if x == 1 else 'people'
        self.sendLine("There %s %i other %s connected:" % (s, x, p) )

        for client in self.factory.clients:
            if client is not self:
                self.sendLine(client.name)
        self.sendLine("")

    def sendMsg(self, message):
    #send message to all clients
        for client in self.factory.clients:
            client.sendLine(t() + message)

class EchoServerFactory(protocol.ServerFactory):
    protocol  = EchoProtocol
    clients = []

if __name__ == "__main__":
    reactor.listenTCP(5001, EchoServerFactory())
    reactor.run() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T11:14:31.797

看看[Divmod Sine](http://bazaar.launchpad.net/~divmod-dev/divmod.org/trunk/files/head:/Sine/)，一个 SIP 应用服务器。基本思想是您的应用程序中需要一个额外的网络服务器来支持应用程序的 VoIP 部分。

# linux - Linux 上的 OpenNI 示例

> ID：12925763
> 
> 赞同：2
> 
> 时间：2012-10-17T01:17:11.450
> 
> 标签：linux, ubuntu, kinect, openni, point-cloud-library

我刚刚安装了 OpenNI，这样我就可以在 Ubuntu 上运行我的 Kinect 并在那里进行开发，它似乎工作正常，但是当我运行示例时，它只是说开始运行，然后永远不会继续前进。我相信它工作正常，因为 Kinect 已打开且红外灯已打开，因此它正在运行，但我不确定如何运行样本或以正确的方式收集数据。

当我运行 NiSampleSkeleton 时，它会卡在开始运行时……当我尝试从[文档](http://openni.org/docs2/Reference/samples.html)中运行 NiSimpleViewer 时， 它会完全冻结，我必须重新启动计算机。在我安装了基础知识之后，它应该立即正常运行，还是我需要添加任何其他程序？

现在我有 OpenNi 源二进制文件、NITE 二进制文件和 PrimeSensor 模块，所有 Ubuntu 64 位的不稳定版本都来自[OpenNi 下载页面](http://www.openni.org/Downloads/OpenNIModules.aspx)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-10T12:31:01.240

OpenNI 不再支持 Kinect for Linux，您可以使用 libfrenec 驱动程序和 openNI 的绑定，您可以在[此处](https://github.com/piedar/OpenNI2-FreenectDriver)找到。如果您已经在使用此绑定，则问题可能是某种权限问题。在这种情况下，这里有一个解决[方案](https://github.com/piedar/OpenNI2-FreenectDriver/issues/6)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T05:32:25.460

您可以尝试使用 64 位 Linux 平台的稳定版本运行示例吗？

# ruby-on-rails - 设计 - 覆盖自定义登录页面的重定向

> ID：12925764
> 
> 赞同：1
> 
> 时间：2012-10-17T01:17:29.317
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, devise

我有以下有趣的问题。我创建了一个辅助登录表单。从那个辅助表单我希望用户总是被重定向到特定的表单。**我相信 Devise 正在ApplicationController**的以下函数中处理重定向：

```
def after_sign_in_path_for(resource)
  # custom redirect stuff
end 
```

告诉设计的最佳方式是*“如果我来自自定义重定向路径，请始终将我带到某个特定页面并忽略 params[:redirect] 中的内容”*。我正在考虑检查引荐来源网址字符串或在会话中存储内容，但我不确定。

实现这种行为的最佳方法是什么？任何建议，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T03:37:39.947

检查设计代码，我发现可以通过清除设计存储返回路径的会话变量来实现：

```
session[:user_return_to] = nil # or some explicit path 
```

**注意：**假设认证的模型是**user.rb**

# http - WireShark 不会在 Windows 上解码 gzip 的 http 流量

> ID：12925769
> 
> 赞同：15
> 
> 时间：2012-10-17T01:18:40.020
> 
> 标签：http, gzip, wireshark, network-analysis

你们知道为什么 WireShark 可能拒绝在 Windows 上解码 gzip 的 http 流量吗？

我的配置

*   WireShark 1.8.3
*   Windows 7 旗舰版 x64
*   WinPcap 4.1.2

在首选项/协议/HTTP 中选中“未压缩实体主体”选项。

这是我的“Follow TCP Stream”对话框的样子：

![在此处输入图像描述](../Images/67764b2b9a56957e19ac1e55f78a3453.png)

当我第一次打开这个对话框时，下面的单选按钮设置为“Raw”，但是当我点击“ASCII”时没有任何变化。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-17T08:46:21.703

如果您查看“基于行的文本数据”条目下的协议树，您将看到未压缩的数据。“Follow TCP Stream”对话框仅显示 TCP 有效负载的内容，不会将其解释为 HTTP 或 gzip 压缩数据或其他任何内容。对话框上的按钮允许您设置流字节的显示格式。

您可以右键单击未压缩的数据（见下面的红色＃）并选择“Export Selected Packet Bytes...”以保存到文件

![在此处输入图像描述](../Images/60b03efc40894d513284eaa3e4ef0c26.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-08-01T16:38:09.777

就当前的 Wireshark 而言，接受的答案是正确的答案——但使用 IMO 非常笨拙。

因此，我编写了一个小脚本[wireshark-http-gunzip](https://github.com/kizzx2/wireshark-http-gunzip)（需要 Ruby）来将整个输出转换为您期望的格式。希望在这里绊倒的人发现它很有用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-10-18T16:56:01.513

现在在 Wireshark 中有支持。只需右键单击标识为 HTTP（协议列 = HTTP）的数据包顶部，然后单击“关注”和“HTTP 流”。这应该将压缩响应解码为纯文本。

# google-chrome-extension - 如何使用变量的值作为键名在 chrome 扩展中使用 chrome.storage？

> ID：12925770
> 
> 赞同：18
> 
> 时间：2012-10-17T01:18:52.170
> 
> 标签：google-chrome-extension, local-storage

我正在尝试将 chrome 的本地存储/同步存储 (chrome.storage) 用于扩展，以存储数据条目，用于许多不同的条目。我似乎无法弄清楚它的正确语法。我只想将信息简单地存储为字符串。我已经搜索过，但找不到任何有效的东西。

这就是目前使用普通 localStorage 技术对我有用的方法：

```
 var imageName = "Red Cat 5";
    var myDescription = "A nice kitty";

    localStorage.setItem (imageName, myDescription);
    console.log(localStorage[imageName]); 
```

这有效，让我从现有变量中设置密钥。我怎样才能使用 chrome.storage.local.set 做到这一点？我一直在尝试这个没有任何成功：

```
 var imageName = "Red Cat 5";
    var myDescription = "A nice kitty";

    chrome.storage.local.set({imageName: myDescription}, function()
    {console.log('success?');});

    chrome.storage.local.set({imageName: myDescription}, function()
    {chrome.storage.local.get(imageName, function(r){console.log(r.imageName);});}); 
```

任何帮助深表感谢。谢谢！

*----- 更新如下 -----*

感谢您对代码的解释。我希望它可以帮助其他人。似乎很少有关于这样做的信息！你的回答帮助我想出了这个：

```
 var nameOne = "al";
    var nameTwo = "bob";
    var nameThree = "carl";
    var nameFour = "dan";

    var dataObj = {};

    dataObj[nameOne] = nameTwo;
    dataObj[nameThree] = nameFour;

    storage.set(dataObj);

    storage.get(dataObj, function(result)
    {
    console.log(result[nameOne]);
    console.log(result[nameThree]);
    }); 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-17T02:21:24.883

使用命名对象，而不是匿名对象，并使用方括号设置成员变量：

```
var dataObj = {};
dataObj[imageName] = myDescription;
chrome.storage.local.set(dataObj, function() { /*...*/ }); 
```

这不是最优雅的代码，但它是唯一的方法。

在 ES6 中，稍微短一点的方法是使用带有动态属性名称的对象字面量：

```
chrome.storage.local.set({
    [imageName]: myDescription
}, function() { /*...*/ }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-14T13:13:39.423

该`set`方法接受**对象 items**和一个可选的回调，`get`接受**可选的字符串或数组或对象键**，如果您传递了第一个参数，则还必须传递第二个参数。

例子：

```
// To set 
chrome.storage.local.set({'testKey':'Test Value'});

// To get
chrome.storage.local.get('testKey', function(data){
  console.log(data); 
  // logs out "Object {testKey: "Test Value"}"
}) 
```

# c# - 从 ASP.NET/C# 向 javascript 代码传递值以用于谷歌地图应用程序

> ID：12925771
> 
> 赞同：2
> 
> 时间：2012-10-17T01:19:05.153
> 
> 标签：c#, asp.net, google-maps

我将在 asp.net/C# 中创建一个 Web 应用程序，并在该项目中使用交互式谷歌地图。我想从 SQL Server 数据库中获取坐标并使用 javascript 代码在谷歌地图上标记它们。我正在关注本教程。

[http://www.mikeborozdin.com/post/Working-with-Google-Maps-API-in-ASPNET.aspx](http://www.mikeborozdin.com/post/Working-with-Google-Maps-API-in-ASPNET.aspx)

我被困在这里。Javascript代码：

```
 var lat = <asp:Literal ID="ltrLat" runat="server" />;
            var lng = <asp:Literal ID="ltrLng" runat="server" />;

            var center = new GLatLng(lat, lng); 
```

C#代码：

```
protected void Page_Load(object sender, EventArgs e){

Literal ltrLat = (Literal)FindControl("ltrLat");
Literal ltrLng = (Literal)FindControl("ltrLng");

ltrLat.Text = "51";
ltrLng.Text = "0"; 
```

}

我收到以下错误：
用户未处理空引用异常。
你调用的对象是空的。
任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T01:24:13.070

错误代码：

```
var lat = <asp:Literal ID="ltrLat" runat="server" />;
var lng = <asp:Literal ID="ltrLng" runat="server" />; 
```

你应该得到控件的价值而不是控制本身：

```
var lat = document.getElementById("<%=hdnLat.ClientID %>").innerHTML;
var lng = document.getElementById("<%=hdnLng.ClientID %>").innerHTML; 
```

# php - 将 x 天数转换为十进制年份

> ID：12925778
> 
> 赞同：-6
> 
> 时间：2012-10-17T01:20:09.520
> 
> 标签：php

我有很多 X 天，比如说 700 天。我怎样才能将这 700 天输出到年？例如。700 = 1.11 年（1 年 11 个月）或 2.2（2 年零两个月）... 以此类推

我不在乎闰年等，只需要一个近似值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T01:24:52.820

想一想...

700天，一个月30天。

700/30 = 23.33 个月。一年12个月。

23.33/12 = 1.944444... 取整数值得`(int)1.944444`到 1 的年份。

23.33%12= 11.33... 个月。您也可以将其转换为 int 以获得 11

您的结果：1 年 11 个月

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T01:29:54.033

试试这个...

```
//86400 seconds per day
//31556926 seconds per year

$days = 700;

$timestamp = (86400 * $days) / 31556926;

echo $timestamp;
//  = 1.9165364839402 years 
```

使用此站点作为参考：`http://www.epochconverter.com/`他们每月、每周、每天都有转换。//1.9165364839402

# java - Eclipse 没有给我变量名建议

> ID：12925781
> 
> 赞同：15
> 
> 时间：2012-10-17T01:21:18.763
> 
> 标签：java, eclipse, variables

好吧，我在 Eclipse 的提示和技巧中看到，可以通过单击 Ctrl + Space 来获取 eclipse 生成的变量名。但是我得到了空洞的建议。例如，我正在输入此内容并单击 ctrl + 空格：

> 私人颜色

我应该得到一些关于它的名字建议？我得到的只是一个空的建议列表。那么关闭了什么？任何想法？

提前致谢。

这就是我想要实现的目标： ![在此处输入图像描述](../Images/35f64775593902f7234e41c82a3cc7c0.png)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-17T01:29:06.900

我相信您正在尝试获取变量名称，例如，在您`color`在`private Color`哪里`Color`上课之后，即`private Color color`。我看到它在我的日食中起作用。

要验证您的设置，请转到以下设置并验证它们是否适合您。

```
 Windows -> Preferences -> Java -> Editor ->Content Assist 
```

和

```
 Windows -> Preferences -> Java -> Editor ->Content Assist -> Advanced 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-05-01T21:15:17.603

这是输入 Java 类型和空格，然后按`CTRL`+`Space`激活自动完成后的默认行为。例如，如果您输入：

```
private Color 
```

然后激活自动完成它会为你建议一些变量名。

比一直按`CTRL`+更简单的方法`Space`是更改​​自动激活自动完成的字符。我发现让所有可能是变量名的字符激活自动完成非常有用。尝试在 Preferences -> Java -> Editor -> Content Assist`._abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ`中找到：`Auto activation triggers for Java`

[![内容辅助设置的屏幕截图](../Images/cdb04af917105e21cb2cce95f5b33b1d.png)](https://i.stack.imgur.com/wSPxh.png)

通过这种方式，您可以实现 Visual Studio 处理自动完成的方式。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-10-16T07:36:25.460

转到窗口 -> 首选项 -> java -> 编辑器 -> 内容辅助 -> 高级 -> 选中所有复选框。完毕 ：）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-17T01:24:16.723

`private`? 看起来你正在创造一些新的东西。在这种情况下，日食不能提出建议。

自动完成适用于现有变量/函数/类/等。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-11-11T13:25:09.060

我一个接一个地尝试，发现正确的是：

`Windows -> Preferences -> Java -> Editor ->Content Assist -> Advanced`： 查看`Word Proposals`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-17T01:25:32.333

在 Eclipse 中，它可以获取您**已经**创建的变量名。

例如，

```
int awesomeVariable;
awesomeVariable = 50;

int superVariable;
superVariable = 
```

如果我在那个=之后按Ctrl + Space，它会生成一些可以填写的东西。例如，它可能会建议awesomeVariable。基本上，它不会为您生成名称，它只是自动完成您已经创建的内容。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-09-11T10:36:49.540

它只是建议您也可以用该名称声明变量..它只是帮助您，因为它是一个编写工具..没什么好担心的..您可以随意命名 kk..

将颜色类导入您的类：import java.awt.Color；

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-17T01:32:02.663

Ctrl + Space 可能是 IM 的快捷键，所以被覆盖了，我建议你更改这个功能的快捷键，例如：Alt + /，

如果您不知道如何更改快捷方式，请参阅以下步骤：

1.  单击 Ctrl + Alt + L 两次，
2.  找到“内容辅助”，
3.  将绑定值更改为您喜欢的快捷方式（不能与其他快捷方式相同），
4.  单击应用按钮。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-10-17T01:44:01.033

感谢大家的时间和帮助。:)

我终于找到了它，对此的答案是，在我的情况下，“java.awt.Color”没有被导入，如果没有被导入，eclipse 在这个上不起作用。

因此，如果您的文件已经导入了该类，它确实会为您建议名称，但如果没有，它将无法工作。

我想这会使整个功能变得毫无用处，但不幸的是，eclipse 就是这样工作的。：/

# c# - 检查实体是否已存在于数据库中的最快方法？

> ID：12925784
> 
> 赞同：0
> 
> 时间：2012-10-17T01:21:33.467
> 
> 标签：c#, database, entity-framework, sql-server-ce, entity

目前我有这样的东西，检查是否已经添加了实体（简化）：

```
WinEveryBetBYeMiContext context = new WinEveryBetBYeMiContext();
string firstPlayerName = "R.Federer";
foreach (var player in context.Players)
{
       if (player.Name == firstPlayerName)
       {
            //Player already exists
       }
 } 
```

但是由于可能有 100 多个玩家，这种方法在我看来非常糟糕，而且速度也非常慢..

我听说过 LINQ TO SQL.. 但我真的不知道它是否更好、更快、更有效.. 也许有人有很好的方法来检查这些东西并可以帮助我。？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T01:28:34.720

您可以使用 LINQ 来提高效率和可读性：

```
using System.Linq;

var firstPlayerName = "R.Federer";
var context = new WinEveryBetBYeMiContext();
var exists = context.Players.Any(x => x.Name == firstPlayerName); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T01:28:44.637

```
context.Players.Any(p => p.Name == firstPlayerName); 
```

# mysql - WAMP 数据丢失问题

> ID：12925785
> 
> 赞同：0
> 
> 时间：2012-10-17T01:21:38.973
> 
> 标签：mysql, wamp, offline-caching, server2go

我公司有一个产品，它允许我们的客户离线执行任务，然后与在线版本同步。我们遇到了一个越​​来越频繁的问题。

问题有两个方面：

1.  在同步过程中，似乎有时会在某处发生数据丢失。这不会是一个大问题，除了 MySQL 二进制日志缺少该同步的数据。它确实在数据库中显示了一些数据已写入，但没有数据写入日志（甚至是写入数据库的数据）。我需要一个解决方案来确保数据库中的数据和 MySQL 日志之间 100% 的一致性。经常发生这种情况的表是 MyISAM 或 InnoDB（取决于客户端的大小）。

2.  在离线设备上，经常出现数据损坏。我们正在使用 server2go 包 (WAMP) 在他们的设备上托管我们基于 PHP/MySQL 的产品的衍生产品。软件 I/O 抽象之外是否有任何方法可以实现更稳定的平台？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T01:01:21.460

通过将 mysql DB 的每个更改克隆到 SQLite 数据库并将“备份”模块移植到 DBAL 上，该模块会自动检测数据损坏并修复表并从 SQLite 数据库中恢复丢失的行，从而解决了这个问题。

# android - 翻译按钮并使其持久化

> ID：12925788
> 
> 赞同：0
> 
> 时间：2012-10-17T01:21:55.587
> 
> 标签：android, android-animation, android-button

我目前正在尝试使用 TranslateAnimation 为按钮的位置设置动画。我在多个地方读到，使实际按钮和可绘制对象移动的方法是在动画之后更改其布局。我已经这样做了，但是遇到了两个问题/解决方案：

1.  要么我添加 setFillAfter(true)。这很好，因为drawable在动画之后仍然存在，但是当布局改变时，drawable从它应该在的位置偏移了平移距离，而按钮的空白框架现在是它应该在的位置。

2.  添加 setFillAfter(false)。这样做，然后在动画正常工作后设置布局，但图标会闪烁，我认为这是动画结束和使用新布局参数刷新屏幕之间的延迟。我目前正在使用此代码，但是 flash 是不可接受的，所以我想找到一个解决方案来修复它。

这是我目前的代码：

```
final View aniView = v;  // v is some view
TranslateAnimation ani = new TranslateAnimation(0, 
240 - v.getLeft() - v.getWidth() / 2, 
0, 
240 - v.getTop() - v.getHeight() / 2 );

ani.setDuration( 500 );

ani.setFillAfter( false );
ani.setAnimationListener( new AnimationListener() {
public void onAnimationEnd( Animation a ) {
        aniView.setTag( new Boolean( true ) );
    RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams( aniView.getWidth(), 
    aniView.getHeight() );
    params.leftMargin = 240 - aniView.getWidth() / 2;
    params.topMargin = 240 - aniView.getHeight() / 2;

    aniView.setLayoutParams(params);
}
public void onAnimationStart( Animation a ) {}
public void onAnimationRepeat( Animation a ) {}
});
v.animationStart( ani ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T02:34:06.277

我已经找到了自己问题的解决方案，并将为遇到相同问题的任何人发布代码。基本上这个想法是预先设置布局参数并基本上反转动画。这是想法：

```
TranslateAnimation ani = new TranslateAnimation(v.getLeft() + v.getWidth() / 2 - 240 , 
                0, 
                v.getTop() + v.getHeight() / 2 - 240, 
                0);

        ani.setDuration( 500 );
        ani.setFillAfter( true );
        ani.setDuration( 1000 );
        ani.setFillAfter( true );
        ani.setAnimationListener( new AnimationListener() {
            public void onAnimationEnd( Animation a ) {
                aniView.setTag( new Boolean( true ) );
            }
            public void onAnimationStart( Animation a ) {}
            public void onAnimationRepeat( Animation a ) {}
        });

        RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams( v.getWidth(), 
                v.getHeight() );
        params.leftMargin = 240 - aniView.getWidth() / 2;
        params.topMargin = 240 - aniView.getHeight() / 2;

        v.setLayoutParams(params);
        v.startAnimation( set ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-14T14:23:42.157

完成 Pete 的精彩回答后，我在尝试为完整的活动布局设置动画时遇到了同样的问题（动画末尾的闪烁），但我使用了 view.translateX 而不是 Layout Params ......而且这个解决方案也适用于我的情况。

# asp.net-mvc-3 - 如何在 MVC3/4 中将类属性添加到 Html.BeginForm() 以保留最小重载

> ID：12925789
> 
> 赞同：13
> 
> 时间：2012-10-17T01:21:55.633
> 
> 标签：asp.net-mvc-3, css, twitter-bootstrap

我正在将我的应用程序升级到 Bootstrap 2.1.1，我需要向许多表单标签添加一个类属性 (class="form-horizo​​ntal")。问题是，大多数表格都使用了相当漂亮的

```
@using (Html.BeginForm()) { 
```

我宁愿保留的格式。获取类属性的明显方法是使用以下重载，例如：

```
@using (Html.BeginForm("Register", "Account", FormMethod.Post, new { @class = "form-horizontal" })) { 
```

但我宁愿不那样做。向我的表单添加类属性的最佳方法是什么？

我曾考虑过使用**jQuery**文档就绪处理程序将 .addClass("form-horizo​​ntal") 用于表单，但我担心用户会看到可怕的“无样式内容闪烁”。

另一种方法可能是使用**less** -style 混合，将 .form-horizo​​ntal 类添加到所有表单样式规则中，但我还没有使用 less ，所以我不确定这个。

有谁知道解决这个问题的最佳方法？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-17T03:17:43.470

遵循 StanK 的建议以及其他一些关于 SO 的答案的建议，我创建了一个专门针对该 Bootstrap 表单布局量身定制的扩展方法：

```
public static MvcForm BeginHorizontalForm(this HtmlHelper helper) {
    return helper.BeginForm(null, null, FormMethod.Post, new { @class = "form-horizontal" });
} 
```

这让我可以使用

```
@using (Html.BeginHorizontalForm()) {... 
```

这是美好而优雅的。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-17T02:01:20.417

编写一个自定义帮助方法来调用所需的重载并传入“form-horizo​​ntal”怎么样？

然后，您的视图将使用`@using (Html.BootstrapBeginForm()) {`，让您的视图整洁。

# php - 将带有条件的数组结果显示到表格中

> ID：12925791
> 
> 赞同：0
> 
> 时间：2012-10-17T01:22:33.387
> 
> 标签：php, html, arrays, html-table

我正在尝试根据行和列在数组中显示结果。我已经尝试了下面的代码，但是下一行显示了 2 个结果，我希望它是同一行但不同的列。

这是我的代码

```
<table id="TimeTable">
      <thead>
      <th style="width:20px; padding-right:10px;">No.</th>
      <th style="width:160px; padding-right:10px;">Monday</th>
      <th style="width:160px; padding-right:10px;">Tuesday</th>
      <th style="width:160px; padding-right:10px;">Wednesday</th>
      <th style="width:160px; padding-right:10px;">Thursday</th>
      <th style="width:160px; padding-right:10px;">Friday</th>
      </thead>
      <tbody>
        <?php foreach ($rows as $row):

                for($r=1; $r<=8; $r++) {

                    if ($row->row == $r) {
        ?>
            <tr>

            <td style="text-align: center; padding-right: 10px; padding-right: 10px;"><strong><?php echo $r; ?>.</strong></td>

            <?php for($c=1; $c<=5; $c++) { ?>

                <td><?php 

                    if(($row->col == $c)) {
                        echo $row->subject." <br />Classroom: ".$row->classroom." <br />Time: ".$row->time; 
                    } 

                ?></td>

                     <?php  } //col for loop ?>

            </tr>

        <?php       } //if  
                } // row for loop 
         endforeach; ?>
        </tbody>
    </table> 
```

![这是我得到的表格](../Images/ba63e4260257bdcc849000dd896cea11.png)

如果`row = 1`它现在应该在同一行中，它会创建 5。

非常感谢您的建议和帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T01:59:50.480

对不起，我能在这里解决的任何麻烦是更正

```
<table id="TimeTable">
      <thead>
      <th style="width:20px; padding-right:10px;">No.</th>
      <th style="width:160px; padding-right:10px;">Monday</th>
      <th style="width:160px; padding-right:10px;">Tuesday</th>
      <th style="width:160px; padding-right:10px;">Wednesday</th>
      <th style="width:160px; padding-right:10px;">Thursday</th>
      <th style="width:160px; padding-right:10px;">Friday</th>
      </thead>
      <tbody>
        <?php for($r=1; $r<=8; $r++) {  ?>
            <tr>

            <td style="text-align: center; padding-right: 10px; padding-right: 10px;"><strong><?php echo $r; ?>.</strong></td>

            <?php for($c=1; $c<=5; $c++) { ?>

                <td><?php 
                    foreach ($rows as $row):
                        if(($row->row == $r) && ($row->col == $c)) {
                            echo $row->subject." <br />Classroom: ".$row->classroom." <br />Time: ".$row->time; 
                        } 
                    endforeach;
                ?></td>

                     <?php  } //col for loop ?>

            </tr>

        <?php    
                } // row for loop 
          ?>
        </tbody>
    </table> 
```

# eclipse - RTC 源代码控制文件

> ID：12925794
> 
> 赞同：1
> 
> 时间：2012-10-17T01:23:08.450
> 
> 标签：eclipse, rtc

不久前，我使用 Rational Team Concert eclipse 处理了一个小项目。当我完成项目时，我摆脱了它。

我记得我们可以转到团队视图并打开浏览器来查看我们的团队任务、用户故事和文件。我一直在谷歌搜索那个登录页面，所以我可以再次看到我的旧项目文件，但没有任何运气。

有谁知道我可以在哪里访问存储在源代码控制服务器上的旧项目文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T05:38:05.923

RTC 客户端中有 3(!) 个“团队”视图：

*   团队工件（每个项目区域的工作项、构建和源代码控制部分）
*   团队组织（与所有成员）
*   团队仪表板（包含您的工作项、事件日志和团队负载）

我怀疑您需要转到 Team Artifact 视图，返回您的项目区域并检查您是否仍然有给定 Stream 的存储库工作区。
如果是，您需要将它再次加载到您的磁盘，创建一个本地工作区或沙箱，以便取回您的 Eclipse 项目。
如果没有，请在正确的 Stream 上创建一个 repo 工作区并加载它。

![团队工件视图](../Images/a10c86a1876714d3aa5e87ac10331c49.png)

有关该操作序列的更多信息，请参阅“[使用 Rational Team Concert 更改跨存储库的流程”。](https://jazz.net/library/article/535/)

# python - 计算超市的账单

> ID：12925798
> 
> 赞同：0
> 
> 时间：2012-10-17T01:23:24.980
> 
> 标签：python, python-2.7, python-2.x, python-2.4

下面是计算超市账单的代码。一切都很好，但问题是我被告知如果输入只是苹果，这个解决方案将不起作用。

我确实相信苹果的价值应该是 0，因为苹果不在库存中，但我仍然相信有些事情我做的不对。请帮忙。

```
groceries = ["apple","banana", "orange",]

stock = {"banana": 6,
    "apple": 0,
    "orange": 32,
    "pear": 15
    }

prices = {"banana": 4,
    "apple": 2,
    "orange": 1.5,
    "pear": 3
    }

def computeBill(food):
    total = 0
    for item in food:
        tot = prices[item] * stock[item]
        print item, tot
        total += tot
    return total

computeBill(groceries) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T01:33:38.183

我不知道为什么这行不通。如果您的输入是`['apple']`，则会发生这种情况：

```
computeBill(['apple'])
total = 0
item = 'apple'
tot = price['apple'] * stock['apple']
tot = 2 * 0
print 'apple',0
total += 0
return total
return 0 
```

除非他们希望能够传入单个项目而不将其包装在列表中，否则调用 `computeBill('apple')。在这种情况下，您必须在函数开始时进行类型检查。这可能看起来像这样

```
if type(food) is not list:
    food = [food] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T01:33:38.230

我将自己提出这个答案并提出建议，因为您的`computeBill`功能规范似乎没有明确定义。

如果物品没有库存，并且您的讲师说在这种情况下退货是不可接受的`0`，那么您的其他选择是引发异常或指示错误状态的标记值。

```
def computeBill(food):
    total = 0
    for item in food:
        stock_count = stock[item]
        if stock_count == 0:
            raise ValueError("item %s is out of stock" % item)
        tot = prices[item] * stock_count
        print item, tot
        total += tot
    return total 
```

或者，如果您不想引发异常，`-1`如果您觉得这不是一个有效的总数，您可以返回：

```
 if stock_count == 0:
            return -1 
```

该函数在计算列表与库存的方式方面还有一些其他问题，但您说您现在并不关心这些问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-27T07:00:15.527

```
def compute_bill(food):
  total=0
  for item in food:
    if stock[item]>0:
      tot=prices[item]
      total+=tot
      stock[item]-=1
  return total 
```

# node.js - 制作一个接受命令行参数的脚本

> ID：12925802
> 
> 赞同：47
> 
> 时间：2012-10-17T01:23:59.223
> 
> 标签：node.js, command-line-arguments

在 Linux 或 Mac 上运行带有命令行参数的 Node.js 脚本的正确语法是什么？

要运行不带参数的脚本，我只需使用 command `node stuff.js`，但在这种情况下，我想运行一个`stuff.js`使用 arguments调用的脚本`"blah", "hee", "woohoo!"`。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-10-17T01:27:44.177

见[http://nodejs.org/docs/latest/api/process.html#process_process_argv](http://nodejs.org/docs/latest/api/process.html#process_process_argv)

总之，你会像这样运行它

`node stuff.js blah hee "whoohoo!"`

然后你的论点可以在`process.argv`

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-10-17T08:06:51.677

如果你想做更复杂的事情，以下模块真的很有帮助：

*   本杰明·科 (Benjamin Coe ) 的[yargs](https://github.com/bcoe/yargs)
*   TJ Holowaychuk 的[指挥官](https://github.com/visionmedia/commander.js)
*   [大卫·卡卡维拉](https://github.com/dthree/vorpal)的 vorpal
*   [艾萨克·施卢特](https://github.com/isaacs/nopt)(Isaac Schlueter) 的 nopt

为了好玩

*   Guillermo Rauch 的[cli-table](https://github.com/LearnBoost/cli-table)
*   子堆栈[的节点万用表](https://github.com/substack/node-multimeter)
*   Sindre Sorhus 的[粉笔](https://github.com/chalk/chalk)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-15T05:49:40.753

[Nomnom](https://github.com/harthur/nomnom)是另一种可能的解决方案。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-04-01T19:42:12.293

这个简单的节点模块也很有帮助：[命令行参数](https://www.npmjs.com/package/command-line-args)

它允许定义一个简单的定义：

```
const optionDefinitions = [
  { name: 'verbose', alias: 'v', type: Boolean },
  { name: 'src', type: String, multiple: true, defaultOption: true },
  { name: 'timeout', alias: 't', type: Number }  
] 
```

它验证您的选项并允许您以简单的方式访问它们。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-05-05T20:05:36.933

参数存储在

**process.argv** 并在命令行中传递参数请检查以下示例：

前任。在下面的这个例子中，我使用了指挥官 NPM 模块。 **var args = 要求（'指挥官'）**

**带有指挥官的**选项是使用****.option()**方法定义的。**下面的示例从process.argv**解析 args 和 options ，将剩余的 args 保留为 program.args 数组，这些数组没有被选项使用。这里**process.argv**是一个包含命令行参数的数组。第一个元素是“节点”，第二个元素是 JavaScript 文件的名称。下一个元素将是执行后的任何其他命令行参数。**

 **```
function list(val) {
    return val.split(',');
}
args.version('0.11.2')
    .option('-t, --tag [value]', 'tags to ignore', list, undefined)
    .parse(process.argv); 
```

这里要从命令行获取输入，我们必须使用 -t 执行 .js 文件，然后使用逗号（，）分隔多个参数， **例如多个参数。: node example.js -t tagname** 这里我使用 list 来处理多个命令行参数，这样我们就可以传递多个命令行参数 **ex。node example.js -t tagname1, tagname2** 所以在此之后，作为命令行参数传递的所有输入都将在名为 args 的数组中可用，因此可以将此数组用于您的目的，您可以从此处阅读更多信息：-

> [https://nodejs.org/docs/latest/api/process.html#process_process_argv](https://nodejs.org/docs/latest/api/process.html#process_process_argv)

或者您可以使用以下模块：

1.  **指挥官**：-

> [https://www.npmjs.com/package/commander](https://www.npmjs.com/package/commander)

2.  **亚格斯**：-

> [https://www.npmjs.com/package/yargs](https://www.npmjs.com/package/yargs)

3.  **前锋**：-

> [https://www.npmjs.com/package/vorpal](https://www.npmjs.com/package/vorpal)**

# ios - 可达性和国际漫游

> ID：12925812
> 
> 赞同：2
> 
> 时间：2012-10-17T01:25:33.443
> 
> 标签：ios, cocoa-touch, protocol-buffers, mapkit, pbrequester

我正在使用`Reachability`Apple 的课程来确定数据或 wifi 是否可用。但是，一位用户（使用美国 iPhone）正在另一个国家/地区测试该应用程序，他在尝试访问 MapKit 时看到以下错误。

## 安慰

在我对这个错误的研究中，我发现那**`PBRequester`**是**ProtocolBuffer**。

> 2012-10-15 21:16:00.921 WrightsCS App[24239:907] PBRequester 失败，错误域=kCFErrorDomainCFNetwork 代码=-1018“国际漫游当前已关闭。” UserInfo=0x1e5587d0 {NSErrorFailingURLKey=https://gsp13-cn.ls.apple.com/shift, NSErrorFailingURLStringKey=https://gsp13-cn.ls.apple.com/shift, NSLocalizedDescription=国际漫游目前已关闭。}

## 例子

```
-(BOOL)hasDataConnection
{
    Reachability *networkReachability = [Reachability reachabilityForInternetConnection];
    NetworkStatus networkStatus = [networkReachability currentReachabilityStatus];

    if ( networkStatus == NotReachable )
    {
        return NO;
    }
    else
    {
        if ( ! [Reachability reachabilityWithHostName:@"www.google.com"] )
            return NO;

        return YES;
    }
} 
```

## 问题

我们如何检测用户是否正在漫游，或者至少确保如果用户正在漫游，我们不会遇到此错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T03:29:27.063

好的 - 这不是答案，但可能会为您指明正确的方向。首先，我找不到似乎可以让您执行此操作的Objective C 类（例如`NSURLRequest`Class）。

我认为您需要直接访问 CFNetwork 框架[（CFNetwork 框架参考）](http://developer.apple.com/library/ios/#Documentation/CFNetwork/Reference/CFNetwork_Framework/_index.html)，因为查看 CFNetworkError 代码有这些诱人的条目（与您的错误消息相匹配）：

```
kCFURLErrorNotConnectedToInternet  = -1009,
kCFURLErrorInternationalRoamingOff = -1018,
kCFURLErrorDataNotAllowed          = -1020, 
```

不幸的是，我不知道 CFNetwork 框架，尽管查看了 Apple 文档，但我并不知道哪个 CFNetwork 框架 API 使用这些值。但我相信总会有办法的。

我的两个“想法”（我松散地使用这个词）：

1.  使用`CFHost`（并获取回调以查询错误代码）
2.  使用`CFNetDiagnosticCopyNetworkStatusPassively`（并解析返回的字符串）。

如果那里有专家，我很想看到真正的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-10T03:25:49.653

[您可以使用http://ipinfo.io](http://ipinfo.io) （我自己的服务）之类的第三方服务，根据设备的IP地址查找偶数运营商代码的当前国家/地区。然后，您可以将其与`CTCarrier`详细信息进行比较，以确定设备是否正在漫游。这是标准的 ipinfo.io API 响应：

```
$ curl ipinfo.io/24.32.148.1 
{
    "ip": "24.32.148.1",
    "hostname": "doc-24-32-148-1.pecos.tx.cebridge.net",
    "city": "Pecos",
    "region": "Texas",
    "country": "US",
    "loc": "31.3086,-103.5892",
    "org": "AS7018 AT&T Services, Inc.",
    "postal": "79772"
} 
```

可以使用自定义包，其中还包括移动 IP 的 mnc/mcc 详细信息。有关详细信息，请参阅[http://ipinfo.io/developers](http://ipinfo.io/developers)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-14T16:45:50.723

Apple 实际上建议您在可以避免的情况下不要使用 Reachability，而只需拨打电话并检查结果即可。在通话之前，您可以将allowsCellularAccess 设置为NO，以避免昂贵的3G 连接。

显然你会得到错误。在可以使用 3G 但不允许使用 3G 且没有 WiFi 的特殊情况下，您会得到 kCFURLErrorDataNotAllowed。然后，您可能会询问用户是否允许您进行 3G 连接。

否则，如果没有 Internet 连接，您将得到 kCFURLErrorNotConnectedToInternet，并且在有 3G 连接但不允许数据漫游的特殊情况下（如美国电话在另一个国家/地区），您会得到 kCFURLErrorInternationalRoamingOff。还有 kCFURLErrorCallIsActive ，您可以在通话时使用无法使用 3G 的电话。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-08-20T20:17:55.170

我这样做是为了检查漫游（这不是 100% 完整的证明，但是..）：

1.当用户第一次加载应用程序时，将运营商网络保存到用户默认值中：

```
CTTelephonyNetworkInfo *netinfo = [[CTTelephonyNetworkInfo alloc] init];
CTCarrier *carrier = [netinfo subscriberCellularProvider];
NSString *name = [[carrier carrierName] copy];
NSLog(@"Carrier Name: %@", name);

NSUserDefaults *standardUserDefaults = [NSUserDefaults standardUserDefaults];
self.homeNetwork = [standardUserDefaults objectForKey:SNAP_homeNetwork];
if(self.homeNetwork == nil || self.homeNetwork.length == 0){
    self.homeNetwork = [[Globals sharedInstance] getCarrier];
    [standardUserDefaults setObject:self.homeNetwork forKey:SNAP_homeNetwork];
    [standardUserDefaults synchronize];
} 
```

1.  每次您需要检查当前运营商与您在第一次启动应用程序时保存的运营商，如果名称不同，则用户正在漫游。

# php - 从 Facebook Graph 获取信息到 php vars

> ID：12925818
> 
> 赞同：0
> 
> 时间：2012-10-17T01:26:17.770
> 
> 标签：php, facebook, facebook-graph-api

> **可能重复：**
> [在 php 中解析 Json](https://stackoverflow.com/questions/4035742/parse-json-in-php)

我一直在寻找这个遮阳篷但找不到它......所以这是问题

如何从[https://graph.facebook.com/XXXXXXX](https://graph.facebook.com/XXXXXXX)获取信息到 vars，从这里：

```
{
   "id": "XXXXXXX",
   "name": "Ricardo Capistran",
   "first_name": "Ricardo",
   "last_name": "Capistran",
   "username": "richycapy",
   "gender": "male",
   "locale": "es_LA"
} 
```

进入这个变量：

```
$id, $name, $firstname, $lastname, $username, $gender, $locale 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T01:33:49.847

```
$data = json_decode($from);
extract($data); 
```

*   **[JSON 解码](http://php.net/manual/en/function.json-decode.php)**- 采用 JSON 编码字符串并将其转换为 PHP 变量。
*   **[提取](http://php.net/manual/en/function.extract.php)**- 从数组中将变量导入当前符号表

# mysql - mysql 在嵌套的选择和计数中进行舍入和计数

> ID：12925820
> 
> 赞同：0
> 
> 时间：2012-10-17T01:26:37.297
> 
> 标签：mysql, count, rounding

我正在尝试构建一种计算器，它将在我的数据库中添加和相乘某些数据。

我`round()`在嵌套选择（和其他计数）中正确使用 mysql 函数时遇到问题。

下面是我的代码示例，任何帮助将不胜感激。（代码看起来比实际上更复杂......）

如果我从每个嵌套选择中删除“选择回合”，这将有效。我的目标是对`Floor`这些计算中的每一个进行计算（某个数字 x 结果计数），但要对每个计算进行四舍五入。

```
select 
    FLOOR
    (
        select round(   1 * 
                (
                    SELECT count(action) from table
                )
        )
    +
        select round(   .5 *    
                (
                    SELECT count(action) from table

                )
        )
    -
        select round(   .5 *
                (
                    SELECT count(action) from table

                )
        )
    -
        select round(   .1 *
                (
                    SELECT count(action) from table

                )
        )
    ) as total
from table
LIMIT 0,1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T01:30:45.883

请试试

```
select 
    FLOOR
    (
        round(   1 * 
                (
                    SELECT count(action) from table
                )
        )
    +
        round(   .5 *    
                (
                    SELECT count(action) from table

                )
        )
    -
        round(   .5 *
                (
                    SELECT count(action) from table

                )
        )
    -
        round(   .1 *
                (
                    SELECT count(action) from table

                )
        )
    ) as total
from table
LIMIT 0,1 
```

这是一个语法错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T01:49:48.097

这就是你所追求的吗？因为所有的表名和字段名都是一样的，所以很难说你在做什么。但是，假设所有字段都来自一个表：

```
select 
  floor(
        round(   1 * count(action))
    +   round(  .5 * count(action))
    -   round(  .5 * count(action))
    -   round(  .1 * count(action))) 
from table
LIMIT 0,1 
```

# c# - 有没有办法将委托命令绑定到图像？

> ID：12925829
> 
> 赞同：0
> 
> 时间：2012-10-17T01:27:39.347
> 
> 标签：c#, silverlight, xaml, prism, silverlight-5.0

我正在使用 Silverlight 5.0。我使用 PRISM 作为我的主要框架，当用户点击它时，我想将我的 delegateCommand 绑定到我的 imagen。

我在想是否需要创建 de DependencyObject 以将属性包含在控件中，但这只是我所拥有的一个想法。C＃

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T01:31:29.867

有一个按钮并将其内容设置为图像。

# html - 如何使用没有白色边框的 CSS 使图像居中

> ID：12925848
> 
> 赞同：5
> 
> 时间：2012-10-17T01:29:46.040
> 
> 标签：html, css

这是我的 CSS 和 HTML 代码。我想将单个图像放在中心，除了图像周围有一个奇怪的白色边框外，这很有效。我已经尝试`border:none;`过`border:0;`

**HTML：**

```
<!DOCTYPE html>
<html>

<head>
<title>Food.</title>
<link rel="stylesheet" type="text/css" href="style.css" />
<link rel="icon" type="image/png" href="favicon.ico">

</head>

<body>
<img border="0" id="image" class="centered" />

</body>

</html> 
```

**CSS：**

```
.centered {
  position: fixed;
  top: 50%;
  left: 50%;
  margin-top: -182px;
  margin-left: -153px;

}

img#image{
   /*I think this is where the issue is caused*/
    width:337px;
    height:219px;
    background-image: url('soon_comp.png');
    background-color: transparent;
}

body {
    outline: none;
    background-color: rgb(15,15,30);
    border-color:transparent;
    border:0px;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-17T01:31:35.643

我不知道您为什么要为 img 标签设置背景图片，我宁愿使用 div 或 span 标签。但是，如果您真的想这样做，请尝试添加到您的 img#image CSS 规则：

```
img#image{
  content: '';
  ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T01:46:15.530

我不知道您是否尝试简化代码，但是：

1）图片的src缺失：`<img src= "myimage.jpg" />`.

2）不要`border="0"`在CSS使用中使用`border:none`

3）不要给图像添加背景，也许可以使用分割。

除此之外，当我测试您的代码时，我没有看到任何白色边框。你能更具体一点吗？

# quickfix - 在 Quickfix C++ 中重复组消息

> ID：12925850
> 
> 赞同：3
> 
> 时间：2012-10-17T01:30:20.003
> 
> 标签：quickfix

我们似乎无法使用 QuickFix 处理某些群组消息。

我正在尝试使用 QuickFix (C++) 建立与 ICE 交换的连接。我创建了一个自定义数据字典来处理 ICE 的非标准消息。要处理的第一条消息是 SecurityDefinition。该消息包含大约 13000 个条目，分为 100 个块。我附上了下面的消息（为清楚起见，添加了 CR/LF 的前两个条目）。

我的问题是在数据字典中，我将一个组定义为条目的一部分，其中包含他们在组中指定的所有字段。然而，消息在到达破解者之前被拒绝，因为它具有无效的标签（标签 = 305）。

消息 2 被拒绝：未为此消息类型定义标记：305

这个字典条目看起来正确吗？是否有任何关于如何处理群组消息的文档？

**字典条目：**

```
<message name='SecurityDefinition' msgcat='app' msgtype='d'>
    <field name='SecurityResponseID' required='Y' />
    <field name='SecurityResponseType' required='Y' />
    <field name='SecurityReqID' required='Y' />
    <field name='TotNoRelatedSym' required='N' />
    <field name='NoRpts' required='N' />
    <field name='ListSeqNo' required='N' />
    <group name='NoUnderlyings' required='N'>
        <field name='UnderlyingSymbol' required='N' />
        <field name='UnderlyingSecurityID' required='N' />
        <field name='UnderlyingSecurityIDSource' required='N' />
        <field name='UnderlyingCFICode' required='N' />
        <field name='UnderlyingSecurityDesc' required='N' />
        <field name='UnderlyingMaturityDate' required='N' />
        <field name='UnderlyingContractMultiplier' required='N' />
        <field name='IncrementPrice' required='N' />
        <field name='IncrementQty' required='N' />
        <field name='LotSize' required='N' />
        <field name='NumofCycles' required='N' />
        <field name='LotSizeMultiplier' required='N' />
        <field name='Clearable' required='N' />
        <field name='StripId' required='N' />
        <field name='StripType' required='N' />
        <field name='StripName' required='N' />
        <field name='HubId' required='N' />
        <field name='HubName' required='N' />
        <field name='HubAlias' required='N' />
        <field name='UnderlyingUnitOfMeasure' required='N' />
        <field name='PriceDenomination' required='N' />
        <field name='PriceUnit' required='N' />
        <field name='Granularity' required='N' />
        <field name='NumOfDecimalPrice' required='N' />
        <field name='NumOfDecimalQty' required='N' />
        <field name='ProductId' required='N' />
        <field name='ProductName' required='N' />
        <field name='ProductDescription' required='N' />
        <field name='TickValue' required='N' />
        <field name='ImpliedType' required='N' />
        <field name='PrimaryLegSymbol' required='N' />
        <field name='SecondaryLegSymbol' required='N' />
        <field name='IncrementStrike' required='N' />
        <field name='MinStrike' required='N' />
        <field name='MaxStrike' required='N' />
    </group>
</message> 
```

**实际消息：**

> 8=FIX.4.49=5004335=d49=ICE34=252=20121017-00:39:41.38556=600357=23322=3924323=4320=1393=1310382=13267=1711=100 311=1705282309=TEB SMG0013-TFL SMG0013305=8463 =FXXXXX307=NG Basis Futures Spr - TETCO-ELA/TGP-500L - Feb13542=20130131436=1.09013=0.00059014=2500.09017=25009022=289024=19025=Y916=20130201917=201302289201=11969200=129202=Feb139300=60589301=Texas Eastern Transmission Corp . - East Louisiana Zone/Tennessee Gas Pipeline Co. - Zone L, 500 Leg Pool9302=TETCO-ELA/TGP-500L998=MMBtus9100=USD9101=USD / MMBtu9085=daily9083=49084=09061=4909062=NG Basis Futures Spr9063=天然气Basis Futures Spread9032=1.259004=17051939005=1353778 311=1714677309=PGE SQF0014.H0014-SCB SQF0014.H0014305=8463=FXXXXX307=NG Basis Futures Spr - PG&E-Citygate/Socal-Citygate - Q1 14542=20131231436=1.09013=0.00059014=2500 .09017=25009022=909024=19025=Y916=20140101917=201403319201=12339200=159202=Q1 149300=59979301=PG&E - Citygate/Socal - Citygate9302=PG&E-Citygate/Socal-Citygate998=MMBtus9100=USD9101=USD / MMBtu9085=daily9083=49084 =09061=4909062=NG 基差期货 Spr9063=天然气基差期货价差9032=1.259004=13430529005=1344660

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T17:35:07.107

我们通过创建一个名为 SecDefICE 的自定义组件来解决这个问题，该组件包含所有自定义字段，并在自定义数据字典中重新定义 SecurityDefinition 消息。

我们现在可以读取组信息。唯一的缺点是我们不得不使用泛型组并按数字获取字段，而不是以类型安全的方式进行。当我有时间时，我将创建一个新的命名空间（FIXICE 等），其中包含正确的头文件（消息、字段、自定义破解程序等）

下面列出的是我们词典中的定义。

新组件

```
 <component name='SecDefICE' required='N'>
   <field name='UnderlyingSymbol' required='N' />
   <field name='UnderlyingSecurityID' required='N' />
   <field name='UnderlyingSecurityIDSource' required='N' />
   <field name='UnderlyingCFICode' required='N' />
   <field name='UnderlyingSecurityDesc' required='N' />
   <field name='UnderlyingMaturityDate' required='N' />
   <field name='UnderlyingContractMultiplier' required='N' />
   <field name='IncrementPrice' required='N' />
   <field name='IncrementQty' required='N' />
   <field name='LotSize' required='N' />
   <field name='NumofCycles' required='N' />
   <field name='LotSizeMultiplier' required='N' />
   <field name='Clearable' required='N' />
   <field name='StartDate' required='N' />
   <field name='EndDate' required='N' />
   <field name='StripId' required='N' />
   <field name='StripType' required='N' />
   <field name='StripName' required='N' />
   <field name='HubId' required='N' />
   <field name='HubName' required='N' />
   <field name='HubAlias' required='N' />
   <field name='UnderlyingUnitOfMeasure' required='N' />
   <field name='PriceDenomination' required='N' />
   <field name='PriceUnit' required='N' />
   <field name='Granularity' required='N' />
   <field name='NumOfDecimalPrice' required='N' />
   <field name='NumOfDecimalQty' required='N' />
   <field name='ProductId' required='N' />
   <field name='ProductName' required='N' />
   <field name='ProductDescription' required='N' />
   <field name='TickValue' required='N' />
   <field name='ImpliedType' required='N' />
   <field name='PrimaryLegSymbol' required='N' />
   <field name='SecondaryLegSymbol' required='N' />
   <field name='IncrementStrike' required='N' />
   <field name='MinStrike' required='N' />
   <field name='MaxStrike' required='N' />
  </component> 
```

新消息定义

```
 <message name='SecurityDefinition' msgcat='app' msgtype='d'>
   <field name='SecurityResponseID' required='Y' />
   <field name='SecurityResponseType' required='Y' />
   <field name='SecurityReqID' required='Y' />
   <field name='TotNoRelatedSym' required='N' />
   <field name='NoRpts' required='N' />
   <field name='ListSeqNo' required ='N' />
   <group name='NoUnderlyings' required='N'>
    <component name='SecDefICE' required='N' />
   </group>
   <field name='Text' required='N' />
    <!-- these are the original fields in 4.4 spec -->
    <!-- group name='NoUnderlyings' required='N' -->
    <!-- component name='UnderlyingInst' required='N' -->
    <!-- /group -->
    <!-- component name='Instrument' required='N' -->
    <!-- component name='InstrumentExtension' required='N' -->
    <!-- field name='Currency' required='N' -->
    <!-- field name='TradingSessionID' required='N' -->
    <!-- field name='TradingSessionSubID' required='N' -->
    <!-- field name='EncodedTextLen' required='N' -->
    <!-- field name='EncodedText' required='N' -->
    <!-- group name='NoLegs' required='N' -->
    <!-- component name='InstrumentLeg' required='N' -->
    <!-- /group -->
    <!-- field name='ExpirationCycle' required='N' -->
    <!-- field name='RoundLot' required='N' -->
    <!-- field name='MinTradeVol' required='N' -->
  </message> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T08:12:55.387

如果这些标签不在您的配置文件中，请将它们添加到其中。我假设您的数据字典没有被读取。

```
UseDataDictionary=Y

ValidateFieldsOutOfOrder=N   /* This caused a lot of grief for me, 
because of the underlying data structure used in QuickFix, 
hence I always put it to N to save me the pain */ 
```

但是我检查了 FIX4.4 的规格，这个消息确实存在于版本中，那你为什么要添加它呢？这应该在 QuickFix 可用的默认 xml 配置文件中。

您的第一组似乎被正确读取，但第二组（两个 305 标签）导致错误。Quickfix 无法弄清楚那里有多少组和哪些组。而且您正在不必要地复制信息。您在消息中使用这样的组。而且 Quickfix 无法正确解析您的消息定义。这就是 QuickFix 的工作原理，因此您无能为力。

```
 <group name="NoUnderlyings" required="N">
   <component name="UnderlyingInstrument" required="N" /> 
 </group> 
```

否则，如果在多个消息中使用*UnderlyingInstrument* ，您将需要在多个位置复制它，这会增加您的 XML 大小而没有任何好处。[这是在默认的 Quickfix 配置文件中完成的方式](http://www.quickfixengine.org/FIX44.xml)，请尝试遵循它，它会为您省去很多麻烦。

# emacs - 在 emacs 中无法在终端模式下工作的块绑定？

> ID：12925852
> 
> 赞同：1
> 
> 时间：2012-10-17T01:30:45.173
> 
> 标签：emacs, ssh, keyboard-shortcuts, putty, terminal-emulator

一些在 GUI 模式下工作的 emacs 键盘绑定在终端模式下不起作用，[因为终端只知道如何发送 ASCII 控制代码](https://serverfault.com/questions/190351/control-punctuation-doesnt-register-in-terminal)。当我将键绑定到非 ASCII 控制代码时，有没有办法让 emacs 抱怨，所以我会意外停止这样做？我只是偶尔在终端上运行 emacs，而且通常只是远程运行，而且通常只是因为某些东西坏了，这意味着我最终会在最糟糕的时候发现这种糟糕的情况。

我也有过远程处理的经验，尤其是从一个操作系统到另一个操作系统（例如 Solaris -> Linux），其中甚至修改键都被重新映射（esc <-> ctrl 被交换，或者右 alt 有效但左 alt 无效）。有什么方法可以检测到这种情况何时发生并适当地交换我的键盘绑定？

基本上：每次我在终端远程使用 emacs 时，我都会得到与 GUI 不一致的体验，这很糟糕，我该如何更改我的 emacs 使用以防止这种情况发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T20:44:32.683

我不知道这样做的好方法：首先，终端只能发送 ASCII 控制代码是不正确的，因为它们可以通过转义序列编码几乎任何东西（例如 xterm 发送特殊的转义序列，例如, CM-up，然后 Emacs 可以识别）。因此，取决于终端能够发送到 Emacs 的事件集（以及 Emacs 能够识别的事件）取决于终端。

如果您想真正安全，您可以将自己限制为键序列被描述为字符串（不是向量，而不是通过 构建的东西`kbd`）的绑定，这基本上意味着只有 ASCII 字符（包括控制序列）与 Meta 结合。

# .htaccess - web.config 到 .htaccess

> ID：12925861
> 
> 赞同：1
> 
> 时间：2012-10-17T01:32:02.693
> 
> 标签：.htaccess

经过大量测试，我坚持将 web.config 转换为 .htaccess

我发现存在重定向循环问题。

这是 web.config 代码

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <system.webServer>
        <rewrite>
            <rules>
                <clear />
                <rule name="Rewrite Client URL" enabled="true" stopProcessing="true">
                    <match url="^([a-zA-Z0-9\-+]+)(\/([a-zA-Z0-9\-\.]+)?)?$" />
                    <conditions logicalGrouping="MatchAll">
                        <add input="{R:1}" negate="true" pattern="manage" />
                        <add input="{R:3}" negate="true" pattern="^$" />
                    </conditions>
                    <action type="Rewrite" url="{R:3}?client={R:1}" appendQueryString="true" />
                </rule>
                <rule name="When no files are specified">
                    <match url="^([a-zA-Z0-9\-+]+)(\/([a-zA-Z0-9\-\.]+)?)?$" />
                    <conditions logicalGrouping="MatchAll">
                        <add input="{R:1}" negate="true" pattern="manage" />
                        <add input="{R:3}" pattern="^$" />
                    </conditions>
                    <action type="Rewrite" url="index.php?client={R:1}" />
                </rule>
            </rules>
        </rewrite>
        <defaultDocument>
            <files>
                <add value="index_flash.php" />
            </files>
        </defaultDocument>
    </system.webServer>
</configuration> 
```

这是我的 .htaccess 代码

```
RewriteEngine On
RewriteRule ^([a-zA-Z0-9\-+]+)(\/([a-zA-Z0-9\-\.]+)?)?$ $1?client=$2
RewriteRule ^([a-zA-Z0-9\-+]+)(\/([a-zA-Z0-9\-\.]+)?)?$ index.php?client=$1 
```

# jquery - 如何以这种方式浮动盒子？

> ID：12925863
> 
> 赞同：1
> 
> 时间：2012-10-17T01:32:12.370
> 
> 标签：jquery, css

如何使用 CSS 和/或 jQuery实现[这种效果？](http://i45.tinypic.com/2krdb6.jpg)

![在此处输入图像描述](../Images/f551cba20cad3d59f64e5d2ee6af52b0.png)

我会发布到目前为止我编写的代码，但它没用......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T01:34:18.817

使用[jQuery Masonry](http://masonry.desandro.com/)或[Isotope](http://isotope.metafizzy.co/)来实现这一点。你不能单独使用 CSS 来实现这一点。

# c# - 锁定并发字典的值

> ID：12925864
> 
> 赞同：4
> 
> 时间：2012-10-17T01:32:38.457
> 
> 标签：c#, multithreading, locking, concurrentdictionary

分区是我创建的一个小类。我有数千个分区驻留在名为 Partitions 的 ConcurrentDictionary 中。在序列化之前，我想锁定一个特定的分区，做一些工作然后解锁分区。

在此期间，没有其他线程应该能够访问该分区。由于我的类 Partition 是一个引用类型，我想知道我是否可以像下面的代码中那样锁定单个 Partition 对象？

这会在下面的锁定期间阻塞来自 ConcurrentDictionary 分区中的单个分区的其他线程吗？

我不想使用类级别的储物柜对象进行锁定。我的思考过程是多个线程应该能够同时运行下面的代码。他们只是不应该能够访问特定的分区，如果它被锁定......

```
private void serializePartition(int partNo)
    {
        Partition p;

        //Get a reference to the partition, lock, and save it to disk.
        lock (p = Partitions[partNo])
        {
            using (var file = File.Create(dataPath + tableName + partNo + ".ppmi"))
            {
                Serializer.Serialize(file, p);
            }

            //decrement _CurrentRecordsInMemory by the size of the partition.
            Interlocked.Add(ref _CurrentRecordsInMemory, p.Data.Count * -1);

            //Clear the partitions data to free up memory and reset partition variables
            p.Data = null;
            p.OnDisk = true;
            p.StartCount = 0;
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T02:14:22.660

您当前的实现只会在函数代码中的该点阻止该 Partition 对象。只要线程不再执行 serializePartition() ，另一个线程仍然能够访问该 Partition 对象。看到您使用的是 ConcurrentDictionary，它是线程安全的，所以应该没有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T14:32:06.283

如果其他线程不使用分区对象上的锁，我不明白为什么其他线程无法访问该分区。换句话说，任何其他线程正在执行： `Partitions[partNo]`能够访问分区，除非它也在执行：

```
lock (p = Partitions[partNo])
{ 
    //DO SOM STUFF ONLY WHEN YOU GOT ACCESS TO THE LOCK
} 
```

澄清：

锁只会阻止其他尝试锁定同一对象的线程。它不会阻止不尝试锁定对象的线程的访问。

要解决这种情况，您可以使用一个事件来阻止其他线程访问分区对象，并在开始序列化之前设置此事件并重新设置它，或者在处理它时从 ConcurrentDictionary 中删除对象，然后再将其放回。正是适合您的需求。

# java - 如何在 Java/Android 中结束字符串？

> ID：12925866
> 
> 赞同：0
> 
> 时间：2012-10-17T01:33:04.877
> 
> 标签：java, android, regex, eclipse

我有一个看起来像这样的字符串：

```
http%3A%2F%2Fwww.myurl.com%2Fbarcodes%2Fimages%2F024543634737.jpg 
```

我只希望字符串的结尾超过 / (%2F) 所以我得到以下信息：

```
024543634737.jpg 
```

是否有 RegEx 或我可以与 Java 一起使用的东西？有人可以发布一些快速代码吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T01:37:44.347

```
String splitString = "/"; // you can change it to %2F
String s = "http://www.myurl.com/barcodes/images/024543634737.jpg";
int index = s.lastIndexOf(splitString);
String result= null;
if(index > -1){
    result = s.substring(index+splitString.length());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T01:35:54.540

尝试以下（使用`String.lastIndexOf`和`String.substring`方法） -

```
String input = "http%3A%2F%2Fwww.myurl.com%2Fbarcodes%2Fimages%2F024543634737.jpg";
System.out.println(input.substring(input.lastIndexOf("%2F") + 3)); 
```

输出：

> 024543634737.jpg

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T01:35:40.313

您可以使用 String 类的 lastIndexOf() 方法。`lastIndexOf()`搜索最后一次出现的字符或子字符串。看到这样，

```
String str = "http%3A%2F%2Fwww.myurl.com%2Fbarcodes%2Fimages%2F024543634737.jpg";

int i = str.lastIndexOf("%");

String result = str.substring ( i ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T01:36:25.787

```
String[] array= "http%3A%2F%2Fwww.myurl.com%2Fbarcodes%2Fimages%2F024543634737.jpg".split("%2F");

String own = array[array.length-1]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-17T01:38:21.223

```
if(myString.indexOf("/")>=0){  
    myString = myString.substring(myString.lastIndexOf("/")+1, myString.length());
} 
```

# c - 用 C 创建 SQLite3 表，但得到一个空的数据库文件

> ID：12925867
> 
> 赞同：1
> 
> 时间：2012-10-17T01:33:11.610
> 
> 标签：c, database, linux, sqlite

这是我的代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <sqlite3.h>

#define DBFILE "./userinfo.db" //It's empty file

int main(int argc, char *argv[])
{
    int retval;
    sqlite3_stmt *stmt;
    sqlite3 *handle;

    retval = sqlite3_open(DBFILE, &handle);
    if(retval)
    {
        perror("sqlite3_open");
        exit(-1);
    }
    printf("Connection successful...\n");
    char create_table[] = "CREATE TABLE IF NOT EXISTS"
    "users(uname TEXT PRIMARY KEY, pass TEXT NOT NULL)";

    retval = sqlite3_exec(handle, create_table, 0, 0, 0);
    if (retval)
    {
        perror("sqlite3_exec");
        exit(-1);
    }
    sqlite3_close(handle);
    return 0;
} 
```

我编译它并运行它没有任何错误。

在我运行它之前，数据库文件`userinfo.db`是一个空文件

在我运行它之后，我`empty database file`又得到了一个。

为什么？表没有保存？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T08:59:24.147

我得到：

```
$ testprogram
Connection successful...
sqlite3_exec: No such file or directory 
```

或者，当文件已经存在时：

```
$ testprogram
Connection successful...
sqlite3_exec: Success 
```

原因是`sqlite3_*`函数没有设置`errno`，是输出的错误码`perror`。

要输出 SQLite 错误消息，请使用`sqlite3_errmsg`：

```
fprintf(stderr, "sqlite3_exec: %s\n", sqlite3_errmsg(handle)); 
```

有了这个，我得到：

```
$ testprogram
Connection successful...
sqlite3_exec: near "EXISTSusers": syntax error 
```

# android - 如何在 libgdx 中创建纹理平面

> ID：12925868
> 
> 赞同：2
> 
> 时间：2012-10-17T01:33:30.313
> 
> 标签：android, eclipse, libgdx, opengl-es-1.1

我来自 FlashBuilder、Flex、Flash 开发领域，正在努力研究如何通过 LibGDX 进入 Android 开发。

我已经完成了环境设置，学习了一些基础知识，但是现在我在研究如何渲染带有纹理的平面时遇到了麻烦。

我发现的大多数演示都是 OpenGL ES2.0，但我需要我的应用程序在两者上运行，所以我尝试寻找有关创建纹理平面的 OpenGL ES1.1 教程，但最终徘徊了几个小时。所以如果有人有任何建议？代码示例？教程？请告诉我。会很棒。

这是到目前为止我得到的代码，但没有显示任何内容（libgdx 演示图像已被注释掉，因此我可以查看它是否呈现任何内容但没有）：

```
public class MyGdxGame implements ApplicationListener {
// -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -
private OrthographicCamera camera;
private SpriteBatch batch;
private Texture texture;
private Sprite sprite;

private ShaderProgram sp;
private Mesh mesh;
// -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -

// -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -
@Override
public void create() {      
    float w = Gdx.graphics.getWidth();
    float h = Gdx.graphics.getHeight();

    camera = new OrthographicCamera(1, h/w);
    batch = new SpriteBatch();

    texture = new Texture(Gdx.files.internal("data/libgdx.png"));
    texture.setFilter(TextureFilter.Linear, TextureFilter.Linear);

    TextureRegion region = new TextureRegion(texture, 0, 0, 512, 275);

    sprite = new Sprite(region);
    sprite.setSize(0.9f, 0.9f * sprite.getHeight() / sprite.getWidth());
    sprite.setOrigin(sprite.getWidth()/2, sprite.getHeight()/2);
    sprite.setPosition(-sprite.getWidth()/2, -sprite.getHeight()/2);

    mesh = new Mesh(true, 3, 3, new VertexAttribute(Usage.Position, 3,"a_position"));
    mesh.setVertices(new float[] { 100f, 100f, 0, 
              400f, 100f, 0, 
              250, 400f, 0 });

     mesh.setIndices(new short[] { 0, 1, 2 });
     tex = new Texture(Gdx.files.internal("data/libgdx.png"));
}
// -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -

private Texture tex;

// -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -
@Override
public void render() {
    // Set bg
    Gdx.gl.glClearColor(1, 1, 1, 1);
    Gdx.gl.glClear(GL10.GL_COLOR_BUFFER_BIT);

    batch.setProjectionMatrix(camera.combined);

    Gdx.gl10.glMatrixMode(GL10.GL_PROJECTION);
    Gdx.gl10.glLoadIdentity();
    Gdx.gl10.glMatrixMode(GL10.GL_MODELVIEW);
    Gdx.gl10.glLoadIdentity();
    mesh.render(GL10.GL_TRIANGLES, 0, 3);

    batch.begin();
    //sprite.draw(batch);
    //mesh.render(sp, GL10.GL_TRIANGLES);
    batch.draw(tex, 10, 10);
    batch.end();

    // Results in white window output only...
}
// -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -

// From a previous tutorial attempt didn't show anything
public Mesh createFullScreenQuad() {

      float[] verts = new float[20];
      int i = 0;

      verts[i++] = -1; // x1
      verts[i++] = -1; // y1
      verts[i++] = 0;
      verts[i++] = 0f; // u1
      verts[i++] = 0f; // v1

      verts[i++] = 1f; // x2
      verts[i++] = -1; // y2
      verts[i++] = 0;
      verts[i++] = 1f; // u2
      verts[i++] = 0f; // v2

      verts[i++] = 1f; // x3
      verts[i++] = 1f; // y2
      verts[i++] = 0;
      verts[i++] = 1f; // u3
      verts[i++] = 1f; // v3

      verts[i++] = -1; // x4
      verts[i++] = 1f; // y4
      verts[i++] = 0;
      verts[i++] = 0f; // u4
      verts[i++] = 1f; // v4

      Mesh mesh = new Mesh( true, 4, 0,  // static mesh with 4 vertices and no indices
        new VertexAttribute( Usage.Position, 3, ShaderProgram.POSITION_ATTRIBUTE ),
        new VertexAttribute( Usage.TextureCoordinates, 2, ShaderProgram.TEXCOORD_ATTRIBUTE+"0" ) );

      mesh.setVertices( verts );
      return mesh;
    }

// -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -
@Override
public void resize(int width, int height) {
}
// -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -

// -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -
@Override
public void pause() {
}
// -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -

// -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -
@Override
public void resume() {
}
// -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -

// -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -
@Override
public void dispose() {
    batch.dispose();
    texture.dispose();
}
// -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - 
```

}

# python - Python 在几分钟内减去两个日期

> ID：12925874
> 
> 赞同：3
> 
> 时间：2012-10-17T01:33:57.857
> 
> 标签：python

```
date1 = datetime.datetime(2012, 10, 10, 10, 15, 44)
date2 = datetime.datetime(2012, 10, 17, 8, 45, 38)
roundedA = date2.replace(second = 0, microsecond = 0)
print roundedA
roundedB = date1.replace(second = 0, microsecond = 0)
print roundedB
minutes = (roundedA - roundedB).min
print minutes 
```

结果是：

```
-999999999 days, 0:00:00 
```

我想计算 2 个不同的日期差异。我在上面减去了，但它并没有给我想要的东西。如何减去两个日期并在几分钟或几小时内得到结果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T01:36:58.167

该`timedelta.min`属性不代表分钟 - 它表示可能的最小时间增量（请参阅[此处](http://docs.python.org/library/datetime.html#datetime.timedelta.min)）。如果你想在几分钟内得到它，你可以这样做：

```
d = roundedA - roundedB
minutes = d.days * 1440 + d.seconds / 60 
```

这是因为只有秒和天存储在`timedelta`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T02:07:47.887

您还可以使用 time 模块以秒为单位获得减法结果：

```
import time
import datetime
date1 = datetime.datetime(2012, 10, 10, 10, 15, 44)
date2 = datetime.datetime(2012, 10, 17, 8, 45, 38)
var1 = time.mktime(date1.timetuple())
var2 = time.mktime(date2.timetuple())
result_in_seconds = var2 - var1

>>> var2 - var1
599394.0 
```

或使用[答案中提供的功能](https://stackoverflow.com/questions/2119472/convert-a-timedelta-to-days-hours-and-minutes)

```
>>> def days_hours_minutes(td):
...     return td.days, td.seconds//3600, (td.seconds//60)%60
... 
>>> date2 - date1
datetime.timedelta(6, 80994)
>>> days_hours_minutes(datetime.timedelta(6, 80994))
(6, 22, 29) 
```

# actionscript-3 - Flash SOUND_COMPLETE 事件故障？

> ID：12925879
> 
> 赞同：0
> 
> 时间：2012-10-17T01:34:51.560
> 
> 标签：actionscript-3, flash, events, audio

我在 Flash 中嵌入了一个 intro.AIF 文件和一个 loop.aif 文件，我需要播放介绍然后播放循环。所以这就是我所做的

```
var intro:introSound = new introSound();
var introChannel:SoundChannel = intro.play();
introChannel.addEventListener(Event.SOUND_COMPLETE, handleAudioLoop);

private function handleAudioLoop($event:Event):void {
var loop:loopSound = new loopSound();
var loopChannel:SoundChannel = loop.play(1, int.MAX_VALUE);
} 
```

发生的事情是它不是无缝的，在循环开始之前似乎存在某种故障或弹出。然后我尝试使用 settimeout，因为我认为问题出在 eventListener 上，但仍然无法完美，要么是流行声音，要么我必须稍微早一点播放循环。

有没有人遇到过这个问题并知道如何解决？谢谢。

附言。在 iTune 中连续播放两个声音文件是无缝的，只是在 Flash 中不行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T06:21:38.903

如果您的声音是 mp3 格式，则每首曲目之前和之后总是有空格。如果您在 FLA 中有声音文件，请将 mp3 文件替换为 wav 文件，Flash 会自动将其转换为 mp3 格式，没有空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T19:06:40.477

不幸的是，Event.SOUND_COMPLETE 不够精确，无法无缝播放不同的声音。看看[Prefered method for looping sound flash as3](https://stackoverflow.com/questions/1227442/prefered-method-for-looping-sound-flash-as3)

# groovy - ClassNotFound 被认为很奇怪

> ID：12925882
> 
> 赞同：4
> 
> 时间：2012-10-17T01:35:42.520
> 
> 标签：groovy

ClassNotFound（是的，我知道，有很多关于这个异常的帖子；我在这里和其他地方搜索过，找不到解释）

为什么 Class.forName 失败？

```
groovy> class Foo { 
groovy> } 
groovy> def f = new Foo() 
groovy> def cname = f.getClass().getName() 
groovy> def p = f.getClass().getPackage() 
groovy> def l = f.getClass().getClassLoader() 
groovy> println "Foo class name: $cname" 
groovy> println "Foo package: $p" 
groovy> println "Foo class loader: ${f.getClass().getClassLoader().toString()}" 
groovy> println "Current class loader: ${this.getClass().getClassLoader().toString()}" 
groovy> try { 
groovy>     Class.forName(cname) 
groovy> } catch (Exception e) { 
groovy>     println e 
groovy> } 
groovy> l.findClass("Foo") 

Foo class name: Foo
Foo package: null
Foo class loader: groovy.lang.GroovyClassLoader$InnerLoader@2d275595
Current class loader: groovy.lang.GroovyClassLoader$InnerLoader@2d275595
java.lang.ClassNotFoundException: Foo
Exception thrown
Oct 16, 2012 4:43:28 PM org.codehaus.groovy.runtime.StackTraceUtils sanitize
WARNING: Sanitizing stacktrace:
java.lang.ClassNotFoundException: Foo 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-23T08:10:34.573

给出的答案基本上是正确的，但它缺少一个重要的信息位。`Class.forName(String)`是从 Java 调用 Java 的 Java 方法。它需要让类加载器加载给定的类。它通过使用内部方法遍历调用堆栈来获取加载程序。虽然对于 java 来说，上升一级是正常做的正确的事情，但在 Groovy 中是不正确的。Groovy 中的每个方法调用都可以包含来自生成方法、invokedynamic 和反射的可变数量的中间调用堆栈元素。但通常父调用堆栈帧不包含真正的调用者类。相反，您最终会进入 groovy 运行时的加载器，甚至是 java 运行时的加载器。您的 shell 中的类是这些类的子类，因此加载程序不可能找到请求的类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T07:12:50.210

这是由于 ClassLoader。shell 内部的ClassLoader（即你在shell 中定义的类）不同于运行shell 的ClassLoader（你需要运行shell 的jar）。这就是该命令`Class.forName("Foo", true, this.class.classLoader)`有效的原因，因为您在 shell 中指定了 ClassLoader

尝试

```
def shell=new GroovyShell()

def f=shell.evaluate("class Foo{Foo(){println this.class.classLoader}};def f=new Foo()")

println shell.class.classLoader
shell.evaluate("println this.class.classLoader")

println "-----------"
println Class.forName("Foo", true, f.class.classLoader)
println Class.forName("Foo", true, this.class.classLoader) 
```

您将看到第一个 Class.forName 有效，而不是第二个。运行脚本类似，因为它会创建一个不共享 shell 的 ClassLoader 的脚本类

执行 Class.forName 不会在脚本上下文中使用与 this 相同的 this。

不确定它是否足够清楚:(

# ruby - Rails erb Json 查看条件渲染

> ID：12925883
> 
> 赞同：0
> 
> 时间：2012-10-17T01:35:49.987
> 
> 标签：ruby, ruby-on-rails-3, json, ruby-on-rails-3.2, erb

当我尝试这个时，我得到 {a: 1, b:} for c not present。当 c 存在时，我得到 {a:1,b:1} 这是正确的。但是我怎样才能有条件地隐藏节点 b 以便我只能得到 {a:1}？

```
{"a":   <%= json @teams.count %>
,"b":   <%= json @teams.num if @c.present? %>} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T01:39:09.443

您可以将 ruby​​ 哈希传递给`json`它，它会正确计算出来

```
<%= json( a: @teams.count, b: (@teams.num if @c.present?) ) %> 
```

您的方法的问题是您试图自己渲染字符串，但`nil`被渲染为空格而不是空字符串`''`。理论上你可以像这样修复它：

```
{"a":   <%= json @teams.count %>
,"b":   <%= json(@c.present? ? @teams.num : '' %>} 
```

但是如果您使用第一种方法，您可以避免大部分麻烦。

# .net - 将多个表达式优化为一个

> ID：12925890
> 
> 赞同：0
> 
> 时间：2012-10-17T01:36:42.717
> 
> 标签：.net, regex, performance, backreference

**背景**

我有一个场景，我必须一遍又一遍地在文本中找到某些单词。我目前以这样的格式使用了一系列正则表达式......

```
"((^)|(\W))(?<c>Word1)((\W)|($))"

"((^)|(\W))(?<c>NextWord)((\W)|($))"

"((^)|(\W))(?<c>AnotherWord)((\W)|($))" 
```

...

这个 Regex 对象列表是用一大块数据循环的，并且匹配项被拉出（一个循环用于一个 regex.matches(data) 调用）

我已经尽我所能来优化它们，例如事先编译它们。

然而，这个列表越来越长，我决定开始制作更大的编译正则表达式来优化这个过程。如...

```
"((^)|(\W))(?<c>((Word1)|(NextWord)|(AnotherWord)))((\W)|($))" 
```

这提供了巨大的速度改进，但是有一个副作用，我无法弄清楚如何纠正。

当单词并排在数据中时（例如空格分隔。例如“Word1 NextWord AnotherWord”），捕获中会丢失第二个单词，因为“Word1”的正则表达式还包括尾随空格。“NextWord”可能出现的匹配不再具有前导空格，因为它是前一个匹配的一部分。

**问题**

任何人都可以更改此正则表达式（.net 格式）

```
Pattern = "((^)|(\W))(?<c>((Word1)|(NextWord)|(AnotherWord)))((\W)|($))" 
```

只需一次调用“.matches(data)”，即可捕获下面此列表中的所有单词

```
data = "Word1 NextWord AnotherWord" 
```

? （不牺牲效率增益）

**结果**

只是想我会提到这一点。在应用建议的答案/更正并向前看后，我现在知道如何使用:)，我刚刚修改的代码的速度提高了 347 倍（旧测试速度的 0.00347%）。当您遇到多个表达式时，这绝对是要记住的事情。很高兴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T01:41:44.823

使用`\b`符号。这匹配单词/非单词边界。

```
\b(?((Word1)|(NextWord)|(AnotherWord)))\b 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T01:43:00.670

您可能想要使用边界检查或前瞻/后瞻，以便匹配不会消耗空格而是检查它。

像这样：

```
Pattern = @"\b(Word1|NextWord|AnotherWord)\b" 
```

或向后看和向前看：

```
Pattern = @"(?<=\W|^)(Word1|NextWord|AnotherWord)(?=\W|$)" 
```

# java - 为什么我无法获取内部资源的源文件 ?

> ID：12925891
> 
> 赞同：1
> 
> 时间：2012-10-17T01:36:52.417
> 
> 标签：java, ant, resources

我将我们的一个自定义（当然是以前工作的）Ant 任务从`<zipfileset>`用作在任务之间重用资源组的唯一方法转换，`<zip>`而我们的自定义任务结果是使用资源集合。所以本质上，我现在只是`<fileset>`被`<mappedresources>`.

```
<project name="test" default="installers">
  <target name="installers">
    <union id="common">
      <fileset prefix="." dir="." includes="1"/>
      <mappedresources>
        <fileset dir="." includes="2"/>
        <globmapper from="*" to="3/*"/>
      </mappedresources>
    </union>
    <generate-wix>
      <resources refid="common"/>
    </generate-wix>
  </target>
</project> 
```

自定义任务看起来像这样，省略了所有特定于 WiX 的废话，因为这不是问题（或者至少现在不是问题*。*）

```
public class GenerateWixTask extends Task {
    private Resources resources;

    @Override
    public void execute() throws BuildException {
        // omitting root element setup

        Iterator<?> resourceIterator = resources.iterator();
        while (resourceIterator.hasNext()) {
            Resource resource = (Resource) resourceIterator.next();

            // This is the relative path with respect to the WiX install.
            File filePath = new File(resource.getName());
            //String fileName = filePath.getName();

            // This is the file which will be used as the actual data.
            //TODO: How to get this?

            System.out.println("resource: " + resource.getName());
            System.out.println("  which is a " + resource.getClass());
            System.out.println("  name = " + resource.getName());
            System.out.println("  location = " + resource.getLocation());

            FileProvider provider = (FileProvider) resource.as(FileProvider.class);
            if (provider != null) {
                System.out.println("  file = " + provider.getFile());
            }

        }

        // omitting code to write the XML
    }

    public void setResourcesref(Reference resourcesref) {
        createResources().setRefid(resourcesref);
    }

    public Resources createResources() {
        if (resources == null) {
            resources = new Resources();
            resources.setProject(getProject());
        }
        return resources;
    }
} 
```

这给我的输出如下：

```
[generatewix] resource: 1
[generatewix]   which is a class org.apache.tools.ant.types.resources.FileResource
[generatewix]   name = 1
[generatewix]   location =
[generatewix]   file = C:\Data\test\1
[generatewix] resource: 3/2
[generatewix]   which is a class org.apache.tools.ant.types.resources.MappedResource
[generatewix]   name = 3/2
[generatewix]   location = 
```

在阅读 MappedResource 的源代码时，对 FileProvider 进行了特殊处理以隐藏源文件（该注释听起来像是为了防止滥用......我并不是在试图滥用它。）但我确实想找出文件的路径，因为我正在编写一个 XML 文件供另一个应用程序读取...

有解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T06:08:25.150

很明显，映射路径不能是真正的来源`File`。而且[MappedResource](http://www.docjar.com/docs/api/org/apache/tools/ant/types/resources/MappedResource.html)不是[FileResource](http://www.docjar.com/docs/api/org/apache/tools/ant/types/resources/FileResource.html)。

[尝试从getInputStream()](http://www.docjar.com/docs/api/org/apache/tools/ant/types/Resource.html#getInputStream)读取数据并将其写入`getName()`.

# php - 是否可以在 PHP 中使用 cURL 或 Socket 函数确定最新的 jQuery 版本？

> ID：12925895
> 
> 赞同：2
> 
> 时间：2012-10-17T01:37:51.503
> 
> 标签：php, jquery, curl

我正在开发我的开源项目，但我被困在这个问题上：

> **如何使用 cURL 或 Socket 函数从 jQuery.com 或任何其他 CDN 确定最新的 jQuery 版本？**

jQuery 的官方网站充满了其他内容，我似乎很难确定哪个“字符串”可能是当前版本的 jQuery。

感谢大家的帮助和帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-17T01:45:44.117

只需拉入[https://raw.github.com/jquery/jquery/master/package.json](https://raw.github.com/jquery/jquery/master/package.json)

解码 json 并读取版本

```
<?php
$json = file_get_contents('https://raw.github.com/jquery/jquery/master/package.json');
$jquery_package = json_decode($json, true);
echo $jquery_package['version']."\n"; 
```

如果你想变得花哨，你也可以使用 github API 并拉出[Repo Tag 列表](http://developer.github.com/v3/repos/#list-tags)并为每个版本解析它： [https ://api.github.com/repos/jquery/jquery/tags](https://api.github.com/repos/jquery/jquery/tags)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-17T01:43:09.087

您可以使用 curl 检索`http://code.jquery.com/jquery-latest.min.js`，然后 preg_match`jQuery v([0-9]+\.[0-9]+\.[0-9]+)`提取版本号......但这似乎是相当多的额外带宽。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T01:44:47.707

您可以抓取 jquery.com，但随后您假设它们的布局和标记将始终保持一致，这是危险的。在他们的主页上，您可以通过查看带有 jq-version 类的 p 标签来查看最新版本。任何优秀的 PHP DOM 解析器，如[Simple HTML DOM Parser](http://simplehtmldom.sourceforge.net/)都可以提供帮助。

# android - Android 模拟/发送 ACTION_MEDIA_BUTTON 意图

> ID：12925896
> 
> 赞同：4
> 
> 时间：2012-10-17T01:38:01.897
> 
> 标签：android, android-intent, media, send, broadcast

我正在尝试通过模拟耳机音乐控件来控制通用音乐播放（播放/暂停、跳过等）。有没有办法广播 ACTION_MEDIA_BUTTON 意图？我尝试了使用 sendBroadcast() 的常规方式，但没有成功。

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T04:33:11.877

尝试这个

```
 long eventtime = SystemClock.uptimeMillis(); 

  Intent downIntent = new Intent(Intent.ACTION_MEDIA_BUTTON, null); 
  KeyEvent downEvent = new KeyEvent(eventtime, eventtime, 
KeyEvent.ACTION_DOWN, KeyEvent.KEYCODE_MEDIA_PLAY_PAUSE, 0); 
  downIntent.putExtra(Intent.EXTRA_KEY_EVENT, downEvent); 
  sendOrderedBroadcast(downIntent, null); 

  Intent upIntent = new Intent(Intent.ACTION_MEDIA_BUTTON, null); 
  KeyEvent upEvent = new KeyEvent(eventtime, eventtime, 
KeyEvent.ACTION_UP, KeyEvent.KEYCODE_MEDIA_PLAY_PAUSE, 0); 
  upIntent.putExtra(Intent.EXTRA_KEY_EVENT, upEvent); 
  sendOrderedBroadcast(upIntent, null); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-09-23T19:48:21.440

您可以向 AudioManager 发送不同的 KeyEvent.KEYCODE_MEDIA_*

```
AudioManager audio = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
audio.dispatchMediaKeyEvent(new KeyEvent(KeyEvent.ACTION_DOWN, 
KeyEvent.KEYCODE_MEDIA_PLAY_PAUSE));
audio.dispatchMediaKeyEvent(new KeyEvent(KeyEvent.ACTION_UP, 
KeyEvent.KEYCODE_MEDIA_PLAY_PAUSE)); 
```

这仅适用于通过调用监听这些媒体事件的应用程序

```
AudioManager.registerMediaButtonEventReceiver or MediaSession.setMediaButtonReceiver 
```

# android - 如何在 Android 中浏览 text/doc 文件并获取所选文件的路径？

> ID：12925899
> 
> 赞同：0
> 
> 时间：2012-10-17T01:38:20.260
> 
> 标签：android

我正在开发一个应用程序，我必须在其中使用 EditView。我需要从 Android 设备上的文件系统中浏览文本/文档文件，以显示所选文件的路径。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T12:29:22.587

[这](https://github.com/Filepicker/filepicker-android)解决了我的问题。这是一个文件选择器活动，您可以在其中浏览文件夹，并在后面返回您选择的文件的路径。

# c++ - 带有时间逻辑错误的嵌套 for 循环逻辑错误

> ID：12925900
> 
> 赞同：4
> 
> 时间：2012-10-17T01:38:46.767
> 
> 标签：c++, nested-loops

输出仅显示从 7 点到 11:59 的时间。它假设是从中午到午夜。这是一个逻辑错误，但我找不到纠正它的方法。

```
#include <iostream>
using namespace std;
int main ()
{
    int hour,min;

    for (hour=0;hour<=11;hour+=1)
    {    
        for (min=0;min<=59;min++)
        {
            if (min<10)
                cout<<hour<<":"<<"0"<<min<<endl;
            else
                cout<<hour<<":"<<min<<endl;
        }

    }
return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T02:20:41.640

默认情况下，Windows 控制台配置为最多显示 300 行回滚（输出）。

7 比 12 晚 5 小时，并且 5*60 = 300。因此，您（很可能）看到了回滚缓冲区的限制。

增加回滚的大小（右键单击命令提示符图标，选择属性-> 布局，将回滚设置为更高的值，例如 9999），或将输出写入文件。您将看到正确的输出。

# html - 这个div有什么问题？

> ID：12925905
> 
> 赞同：-6
> 
> 时间：2012-10-17T01:39:21.580
> 
> 标签：html, css

我[这里](http://daddariowebdesign.com/pedjasfriend/)有一个页面。

请查看源代码并告诉我为什么导航 div 没有显示在标题 div 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T01:42:58.737

浮动元素不会对其容器应用高度。您要么需要：

*   `clear: both;`在浮点数之后添加一个元素，或者
*   添加`overflow:hidden;`到包含元素，或
*   使用`display:inline-block;`而不是`float:left`[我最推荐]

# drools - Drools 没有像专家文档中宣传的那样工作

> ID：12925907
> 
> 赞同：1
> 
> 时间：2012-10-17T01:40:09.943
> 
> 标签：drools

我有两个非常简单的规则

```
rule "Volume Validation"
    salience 10
when 

    avs : AvailabilityStatusAndDiscountDisplay( quantity > 1000 || quantity < 0) 

then    

    avs.setAvailable(false);        
    avs.setDiscountRateUnavailableMessage("Unavailable Quanitity");
end 

rule "Discount Rate Calculation -1"

salience 9

when 

     AvailabilityStatusAndDiscountDisplay( productType == "111",calculated==false, available == true, quantity >= 50) 

     avs:   AvailabilityStatusAndDiscountDisplay()
then    

    avs.setDiscountRate("0.65");
    avs.setCalculated(true);

end 
```

但是当数量为 5000 并且可用时，第一条规则将其设置为 false。第二个“规则”看不到这种变化并继续进行评估。即使， [https://access.redhat.com/knowledge/docs/en-US/JBoss_Enterprise_SOA_Platform/5/html/JBoss_Rules_5_Reference_Guide/chap-examples.html#id18463514](https://access.redhat.com/knowledge/docs/en-US/JBoss_Enterprise_SOA_Platform/5/html/JBoss_Rules_5_Reference_Guide/chap-examples.html#id18463514)宣传工作内存中更改的对象将被序列中的下一条规则。

编辑。在非常感谢@alicox 的帮助之后

```
rule "Volume Validation"
salience 10
no-loop true
when 

avs : AvailabilityStatusAndDiscountDisplay( quantity > 1000 || quantity < 0) 

then    

avs.setAvailable(false);        
avs.setDiscountRateUnavailableMessage("Unavailable Quanitity");
update(avs);
end 

rule "Discount Rate Calculation -1"

salience 9

when 

AvailabilityStatusAndDiscountDisplay( productType == "111",calculated==false,   available == true, quantity >= 50) 

avs:   AvailabilityStatusAndDiscountDisplay()
then    

avs.setDiscountRate("0.65");
avs.setCalculated(true);

end 
```

这行得通。

如果我这样理解正确的话，alicox 还提出了通过插入方法创建面包屑的建议

```
then 
     insert (blah = true) //so as not to fire new rule 
    end 
//new rule 
when 
     blah == false 
```

不确定必须是哪种对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T06:09:49.173

您需要在更改其属性后在 avs 上调用 update 或 modify ，以便在 LHS 部分对其进行重新评估。

同样在您的第二条规则中，LHS 可以缩短为以下内容：

```
avs: AvailabilityStatusAndDiscountDisplay( productType == "111",
           calculated==false, available == true, quantity >= 50) 
```

对事实调用 update 或 modify 将导致在其 LHS 部分中引用该规则的规则再次被触发。如果这不是预期的行为，您有多种选择

1）使用无循环，这将防止在规则中完成更新，触发自身

2）使用更细粒度的事实。

3) 更新后将面包屑事实插入会话中，并检查它们在 LHS 中是否存在。首先在您的模型中定义一个名为 Breadcrumb 的事实类型，并具有一个字符串属性“name”，然后用作以下内容。

```
when
  not Breadcrumb(name == "calculationXXXDone")
  ....
then
  ...
  //do some work
  ...
  bc = new Breadcrumb()
  bc.name = "calculationXXXDone"
  insert(bc) 
```

# maven - mvn 依赖：分析失败：Manifest 主要属性的签名文件摘要无效

> ID：12925909
> 
> 赞同：1
> 
> 时间：2012-10-17T01:40:41.850
> 
> 标签：maven, maven-plugin

我正在尝试分析我的依赖关系，但遇到了“清单主要属性的签名文件摘要无效”问题。我知道这应该是由签名的jar被更改引起的。但是你知道那里有很多依赖 jars。是否有工具可以识别更改了哪个签名的 jar？

错误日志在这里：

> `[ERROR] Failed to execute goal org.apache.maven.plugins:maven-dependency-plugin: 2.1:analyze (default-cli) on project XXX: Execution default-cli of goal org.apache.maven.plugins:maven-dependency-plugin:2.1:analyze failed: Invalid signature file digest for Manifest main attributes -> [Help 1]`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-22T14:50:52.017

我遇到了同样的问题，

就我而言，我只是在 pom.xml 中添加以下内容来修复它：

```
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-dependency-plugin</artifactId>
            <version>2.10</version>
            <executions>
                <execution>
                    <id>Analize</id>
                    <goals>
                        <goal>analyze</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
        .
        .
        .
    </plugins>
    .
    .
    .
</build> 
```

如果您需要有关问题本身的更多详细信息，这就是

```
mvn dependency:analyze -X 
```

打印（*在解决问题之前*）：

```
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-dependency-plugin:2.1:analyze 
(default-cli) on project com.yourproject: 
Execution default-cli of goal org.apache.maven.plugins:maven-dependency-plugin:2.1:analyze failed: 
Invalid signature file digest for Manifest main attributes -> [Help 1]
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.maven.plugins:
maven-dependency-plugin:2.1:analyze (default-cli) on project com.yourproject: 
Execution default -cli of goal org.apache.maven.plugins:maven-dependency-plugin:2.1:analyze failed: 
Invalid signature file digest for Manifest main attributes
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:224)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:116)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:80)
        at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build(SingleThreadedBuilder.java:51)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:120)
        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:347)
        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:154)
        at org.apache.maven.cli.MavenCli.execute(MavenCli.java:582)
        at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:214)
        at org.apache.maven.cli.MavenCli.main(MavenCli.java:158)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:606)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:289)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:229)
        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:415)
        at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:356)
Caused by: org.apache.maven.plugin.PluginExecutionException: Execution default-cli of goal 
org.apache.maven.plugins:maven-dependency-plugin:2.1:analyze failed: Invalid signature file digest for Manifest main attributes
        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:143)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:208)
        ... 19 more
Caused by: java.lang.SecurityException: Invalid signature file digest for Manifest main attributes
        at sun.security.util.SignatureFileVerifier.processImpl(SignatureFileVerifier.java:286)
        at sun.security.util.SignatureFileVerifier.process(SignatureFileVerifier.java:239)
        at java.util.jar.JarVerifier.processEntry(JarVerifier.java:317)
        at java.util.jar.JarVerifier.update(JarVerifier.java:228)
        at java.util.jar.JarInputStream.read(JarInputStream.java:212)
        at java.util.zip.ZipInputStream.closeEntry(ZipInputStream.java:139)
        at java.util.zip.ZipInputStream.getNextEntry(ZipInputStream.java:117)
        at java.util.jar.JarInputStream.getNextEntry(JarInputStream.java:142)
        at java.util.jar.JarInputStream.getNextJarEntry(JarInputStream.java:179)
        at org.apache.maven.shared.dependency.analyzer.ClassFileVisitorUtils.acceptJar(ClassFileVisitorUtils.java:99)
        at org.apache.maven.shared.dependency.analyzer.ClassFileVisitorUtils.accept(ClassFileVisitorUtils.java:60)
        at org.apache.maven.shared.dependency.analyzer.DefaultClassAnalyzer.analyze(DefaultClassAnalyzer.java:46)
        at org.apache.maven.shared.dependency.analyzer.DefaultProjectDependencyAnalyzer.buildArtifactClassMap(DefaultProjectDependencyAnalyzer.java:153)
        at org.apache.maven.shared.dependency.analyzer.DefaultProjectDependencyAnalyzer.analyze(DefaultProjectDependencyAnalyzer.java:72)
        at org.apache.maven.plugin.dependency.AbstractAnalyzeMojo.checkDependencies(AbstractAnalyzeMojo.java:168)
        at org.apache.maven.plugin.dependency.AbstractAnalyzeMojo.execute(AbstractAnalyzeMojo.java:152)
        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:132)
        ... 20 more
[ERROR]
[ERROR]
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/PluginExecutionException 
```

但是，一旦我在构建中添加了 maven-dependency-plugin（*如上所述*），它就消失了！

# php - 基于公共字符串对数组项进行分组

> ID：12925911
> 
> 赞同：4
> 
> 时间：2012-10-17T01:41:05.237
> 
> 标签：php, arrays, grouping

我有以下代码，它获取两个单独的数组，翻转姓氏和名字（也删除了逗号）并输出：

> 导演：伯特和伯蒂
> 
> 作家：伯特和伯蒂
> 
> 制片人：路易丝·奈特
> 
> 制片人：迈尔斯·威尔克斯
> 
> 制片人：安迪·韦尔奇
> 
> 演员：克雷格·帕金森
> 
> 演员：卡米拉·卢瑟福
> 
> 演员：保罗·巴塔查吉
> 
> 演员：福特·基曼
> 
> 演员：哈巴狗莫伦
> 
> 演员：汉娜·沃尔特斯
> 
> DP：琳达大厅
> 
> 剪辑：马特·乔丹

我需要做的是对类似的组进行分组以输出如下内容：

> 导演：伯特和伯蒂
> 
> 作家：伯特和伯蒂
> 
> 制片人：路易丝·奈特、迈尔斯·威尔克斯、安迪·韦尔奇
> 
> 主演：克雷格·帕金森,卡米拉·卢瑟福,保罗·巴塔查吉,福特·基曼,哈巴狗莫伦,汉娜·沃尔特斯
> 
> DP：琳达大厅
> 
> 剪辑：马特·乔丹

当前 PHP 代码：

```
<?php 
$arrayname=explode(":::",$dwzXmlRec_1->GetFieldValue("PERSON_NAME"));
$arraynamel=count($arrayname);
$arrayrole=explode(":::",$dwzXmlRec_1->GetFieldValue("PERSON_FUNCTION"));   
$arrayrolel=count($arrayrole);

$name = "Lastname, Firstname"; 
$names = explode(", ", $name); 
$name = $names[1] . " " . $names[0]; 

for($i=0;$i<$arrayrolel;$i++) 
    { 
        $names = explode(", ", $arrayname[$i]); 
        $name = $names[1] . " " . $names[0];
        echo $arrayrole[$i].': '.$name.'<br />';
    } 
?> 
```

更新：只有一个问题，数据是从 xml 节点设置的，并且由于它位于数组“as”中，因此一个角色先于另一个角色。例如，首先是“演员”，然后是“导演”。有什么简单的方法可以扭转它，让导演先来然后演员？我添加了代码来隐藏不需要的角色/人员，如下所示：

```
// print out the list of people in each role
foreach($roles as $rolename => $people) {
    if ($rolename!="Cut" && $rolename!="Producer" && $rolename!="DP" && $rolename!="Writer"){
        if($rolename=="Actor") { $rolename="Cast";};
        echo $rolename . ": " . implode(", ", $people) . "<br />";
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T01:49:41.793

我将构建一个数组，将角色名称映射到担任该角色的人员数组。可能是这样的：

```
$roles = array();
for($i = 0; $i < $arrayrole1; $i++) {
    $names = explode(", ", $arrayname[$i]);
    $name = $names[1] . " " . $names[0];
    // append the name to the array of people filling the role
    $roles[$arrayrole[$i]][] = $name; 
}

// print out the list of people in each role
foreach($roles as $rolename => $people) {
    echo $rolename . ": " . implode(", ", $people) . "<br />";
} 
```

# php - PHP处理html表单

> ID：12925912
> 
> 赞同：0
> 
> 时间：2012-10-17T01:41:12.107
> 
> 标签：php, html, forms

PHP初学者在这里。我正在为一项任务设计一个小型网站，目的是为合格的求职者与公司匹配。找工作的人会填写一张表格，上面写着他们的姓名、电话号码、他们正在寻找的工作、大学专业和他们希望工作的时间。此信息将附加到名为“applicants.txt”的文本文件中。公司将在单独的页面上填写相同的字段，除了他们在员工中寻找的内容与他们在工作中寻找的内容相反。此信息将附加到名为“jobOpenings.txt”的不同文本文件中。我已经成功地完成了这一切。我现在苦苦挣扎的是编写PHP代码，看看求职者提交的信息是否与公司提交的信息相符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T02:20:58.120

对于您发布的问题，您的错误在于： `list($companyEmployer, $jobEmployer, $majorEmployer, $hoursEmployer) = explode("\t", $line);` 您正在尝试根据“标签”分解数据，而在保存数据时，您用逗号分隔条目。更改`explode("\t", $line)`为`explode(",", $line)`将数据正确读取到您的变量中。

# java - 使用java从Datagrampacke的数据包中识别和分离数据

> ID：12925918
> 
> 赞同：2
> 
> 时间：2012-10-17T01:41:54.663
> 
> 标签：java, android, dataformat

您好目前我正在开发通过蓝牙与医疗保健设备通信的 Android。医疗保健设备可以发送这种格式的数据包![在此处输入图像描述](../Images/e771c169f32ae93ccc5d8e22b758257f.png)

现在我想知道，如何分别识别 LSB 、 Acces 代码、 Header 、 Msb 和 Payload 。以及如何从这个数据包中检索数据。真的，我是这种数据包开发的新手。我已经用谷歌搜索了，但我只得到了理论上的解决方案。我也想知道，我是否可以使用 Datagrampacket 或其他第三方 API。请有人为此建议我一些想法和教程。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T01:57:48.050

DataInputStream 是你的朋友。将它包裹在包裹着 DatagramPacket 的数据、偏移量和长度的 ByteArrayInputStream 上。然后用`readBytes()`成9字节数组得到访问码，`readBytes()`成7字节数组得到header，剩下的就是payload。

**编辑：**

> 标头真的是 54 位吗？当然应该是56？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T02:13:17.680

尝试使用以下方法：

（2475 位？它可能应该是 2472 或 2480，或者如果标头是 54 位，这里应该是 2474 位）//读取字节

```
public byte[] readBytes(InputStream inputStream, int length)
        throws IOException {
    byte[] data = new byte[length];
    int len = inputStream.read(data);
    if (len != length) {
        throw new IOException("Read the end of stream.");
    }
    return data;
}

//Get Header data
byte[] headerData = readBytes(inputStream, 9);

// I think header data need to parse again, its structure should look like the following format:
// | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 |
// |  Version  | Type  | other values  |
// You can parse them to use headerData

// #######################################
// write bytes
public class ByteWriter {
    private final ByteArrayOutputStream outputStream = new ByteArrayOutputStream();

    public void writeBytes(byte[] data) {
        try {
            outputStream.write(data);
        } catch (IOException ex) {
            ex.printStackTrace();
        }
    }

    public byte[] getBytes() {
        return outputStream.toByteArray();
    }
} 
```

# java - 爪哇。对类重新定义的限制

> ID：12925919
> 
> 赞同：3
> 
> 时间：2012-10-17T01:42:12.947
> 
> 标签：java, transformation, instrumentation, redefine

方法的 Java Platform SE 5 API 规范`Instrumentation.redefineClasses(ClassDefinition[])`告诉：

> 重新定义可能会改变方法体、常量池和属性。重新定义不得添加、删除或重命名字段或方法，更改方法的签名或更改继承。

是什么意思`attributes`？我想它可以是访问修饰符（私有、公共、...）、同步、最终和其他修饰符。但是如果我尝试不仅重新定义方法体，还重新定义它的访问修饰符，或类的访问修饰符，或者尝试使方法同步，我得到了

```
java.lang.UnsupportedOperationException: class redefinition failed: attempted to change method modifiers
        at sun.instrument.InstrumentationImpl.redefineClasses0(Native Method)
        at sun.instrument.InstrumentationImpl.redefineClasses(Unknown Source) 
```

那么`attributes`在这种情况下是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T02:28:17.837

J2SE5 目前只支持修改方法体和字段值。如果您修改访问修饰符，则意味着您完全更改了类的接口。

对于属性，它是Java编程中一个非常模糊的概念，我不知道他们为什么将这个词放在他们的文档中。当我们说属性时，在大多数情况下，我们指的是 Java Naming API 中的属性。

重定义类提供了一种动态方式来改变现有系统的运行时行为。我认为被 AOP 广泛使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-09T12:15:04.693

属性是添加到类文件中的类、方法和字段的附加信息。请参阅 java vm 规范[http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.7](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.7)。[附录 A.3 ( http://download.forge.objectweb.org/asm/asm4-guide.pdf](http://download.forge.objectweb.org/asm/asm4-guide.pdf) )中的 ASM 用户指南中也有属性的简短描述。

# python - Heroku 找不到 setup.py？

> ID：12925920
> 
> 赞同：0
> 
> 时间：2012-10-17T01:42:17.670
> 
> 标签：python, heroku

我有以下目录设置。

```
.
├── setup.py
├── src
│   └── mymodule 
│       ├── __init__.py
│       ├── database.py
│       ├── models.py
│       ├── parallel.py
│       └── utils.py
└── venv
    ├── bin
    │   ├── activate
    │   ├── activate.csh
    │   ├── activate.fish
    │   ├── activate_this.py
    │   ├── coverage
    │   ├── easy_install
    .... 
```

使用以下 setup.py：

```
setup(
    name='mymodule',
    version='0.1.0',
    install_requires=[],  # Don't put anything here, just use requirements.txt
    packages=['mymodule'],
    package_dir={'mymodule': 'src/mymodule'},
) 
```

与 requirements.txt：

```
Flask==0.9
...
wsgiref==0.1.2
-e . 
```

当我在 heroku 上部署时，我收到 heroku '找不到 mymodule.database' 的错误。

我尝试在虚拟环境中的本地计算机上运行 python setup.py （我自己删除了鸡蛋以确保我的设置的有效性），一切似乎都正常。

我怎样才能告诉heroku运行`python setup.py install`？我想`-e .`应该已经为我这样做了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T21:02:04.517

看起来您没有合适的结构来在 heroku 上运行 python 应用程序。请查看：[https](https://devcenter.heroku.com/articles/python) : //devcenter.heroku.com/articles/python 并查看 github 上的 heroku 烧瓶脚手架示例。例如：[https](https://github.com/zachwill/flask_heroku) ://github.com/zachwill/flask_heroku以更好地了解应该如何设置。一旦掌握了如何在 heroku 中设置 python 应用程序的窍门，就可以使用 heroku 文档中描述的工头工具进行本地测试。

# c# - 将多级 for 循环转换为 linq 或 lambda 表达式

> ID：12925921
> 
> 赞同：0
> 
> 时间：2012-10-17T01:42:18.583
> 
> 标签：c#, linq, lambda

我已经发布了相关问题如下：

[用高效的代码（可能是 linq）替换 3 层嵌套的 for 循环](https://stackoverflow.com/questions/12923220/replace-3-levels-of-nested-for-loops-by-efficient-code-possibly-linq)

但由于我不擅长 Linq 或 Lambda 表达式。我不知道如何进一步扩展它。

我有一个稍微不同的 3 级嵌套 for 循环，我不知道如何将它转移到 Linq 或 Lambda 表达式中。我的任务是在 linq 或 lambda 表达式中为以下内容提供更有效的替换代码。 。 请帮忙。谢谢..

```
public static void CompareEntities(
    out EntityCollection<StringResourceEntity> entitiesDifference,
    EntityCollection<StringResourceEntity> entitiesLargerSet,
    EntityCollection<StringResourceEntity> entitiesSmallerSet)
{
    var diff = new EntityCollection<StringResourceEntity>();
    string defaultCulture = LocalizationConfiguration.DefaultCulture;

    foreach (StringResourceEntity entityLargerSet in entitiesLargerSet)
    {
        bool entityMatch = false;
        foreach (StringResourceEntity entitySmallerSet in entitiesSmallerSet)
        {
            if (entityLargerSet.Key.Equals(entitySmallerSet.Key))
            {
                foreach (var stringResValSmall in entitySmallerSet.StringResourceValues)
                {
                    if (stringResValSmall.Culture.Equals(defaultCulture) &&
                        stringResValSmall.Value.Length > 0)
                    {
                        entityMatch = true;
                    }
                }
            }
        }

        if (entityMatch == false)
        {
            diff.Add(entityLargerSet);
        }
    }

    entitiesDifference = diff;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T02:48:26.210

我更喜欢 lambda 表达式，因为我发现它们非常易读。我会做这样的事情：

```
var diff = entitiesLargerSet.Where(large => 
    !entitiesSmallerSet.Any(small => 
        small.Key.Equals(large.Key) 
        && small.StringResourceValues.Any(x => 
            x.Culture.Equals(defaultCulture) && x.Value.Length > 0))).ToList(); 
```

缩进是可怕的，但让它成为你自己的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T02:46:51.820

```
string defaultCulture = LocalizationConfiguration.DefaultCulture;
var diff = (from x in entitiesLargerSet
            let matches = entitiesSmallerSet.Where(y =>
                 x.Key.Equals(y.Key) &&
                 y.StringResourceValues.Any( z => z.Culture.Equals(defaultCulture) &&
                                                  z.Value.Length > 0))
            where matches.Any() == false
            select x).ToList();
// TODO: Convert List to EntityCollection 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T02:10:51.503

这可能会让你开始。如果不创建所有类的骨架版本，就很难判断代码是否正确编译或会产生正确的结果：

```
var diff = entitiesLargerSet.Except(
            from x in entitiesLargerSet
            from y in entitiesSmallerSet
            where x.Key.Equals(y.Key)
            from z in y.StringResourceValues
            where stringResValSmall.Culture.Equals(defaultCulture)
               && stringResValSmall.Value.Length > 0
            select x); 
```

# erlang - erlang进程间多播

> ID：12925922
> 
> 赞同：2
> 
> 时间：2012-10-17T01:42:24.683
> 
> 标签：erlang, multicast, ets

我正在尝试在 erlang 中开发一个聊天服务器，并且我想在一组进程之间广播消息，我提出了三种选择

1.  将每条消息发送到主进程，主进程将消息发送给组的其他成员，这对我来说似乎是一个瓶颈！
2.  使用包含组的所有 pid 的全局 ets 表（过度复制）。
3.  使用 upd 多播。
4.  pg 模块，与 1 相同。

什么是最好的方法，还有其他选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T04:29:49.050

更自然的方法是让每个进程都知道它将与之通信的每个其他进程的 pid()。将 [pid()] 保持在进程状态并通过使用 link/1 使其保持最新状态，以便在进程死亡时接收 {'EXIT', Pid, Reason}。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T21:48:04.973

Erlang 中的多播是向每个接收者单播。除此之外，没有其他方法可以传播信息。由于您只有少量进程，我认为您在复制时根本不会遇到任何问题。至少在它成为系统的瓶颈之前我不会太担心它。

不要低估保留一个作为组的多播器的进程。这可能是一个简单的解决方案，尽管只是将 pid() 保存在 ETS 表中或使用`gproc`它可能大致相同。

一开始担心过度复制可能不会有成效。这里的一个技巧可能是将消息存储为大型二进制文件，然后将其发送出去。然后，正如 Marcelo 所写，您只会传递引用。

Vance Shipley 关于链接的解决方案是我会避免的。链接是双向的，您必须捕获出口才能获得出口消息。最好通过调用来维护终生知识`erlang:monitor(process, Pid)`。您将需要这样做，因为必须从组中删除离开的进程。收到表单的消息`{'DOWN', ..., ...}`将表明您需要进行清理。

# bash - 在指定文件夹中运行 Bash 脚本命令

> ID：12925923
> 
> 赞同：0
> 
> 时间：2012-10-17T01:42:47.350
> 
> 标签：bash

在 Bash 脚本中，是否可以在特定文件夹中运行命令？例如，我想创建一个使用 打印`/home`文件夹内容的脚本`ls`，无论脚本保存在哪个目录中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T01:48:36.873

实际上，您可以使用`cd`更改脚本中的目录（但不会影响其父 shell）。尝试

```
#!/bin/bash
# myscript.sh
cd /home
pwd
ls 
```

它将打印当前目录（即`/home`）并列出它的内容。不管是什么位置`myscript.sh`。

# c# - 为了在c#中动态返回所需的DTO，使用什么设计模式

> ID：12925924
> 
> 赞同：3
> 
> 时间：2012-10-17T01:42:49.620
> 
> 标签：c#, json, design-patterns, dto, factory-pattern

我们公司有一个网络产品，它提供了近 160 种不同的 REST API 来与我们的产品进行交互。目前，API 仅供内部客户端产品使用，但最终会公开。我正在编写 ac# 包装器以使用 RestSharp 库调用这些 REST API，到目前为止一切正常。例如，获取账户信息的 GET API 之一是：

```
/api/account/{id} 
```

它返回 JSON 数据，如：

```
{ “Id” : “12345”, “Name” : “Test Account” } 
```

收到数据后，我只是将 JSON 字符串反序列化为适当的 DTO 并返回对象。所以，我在 API 包装器中的功能是：

```
Public Account GetAccount ( int accountId )
{
      //create restsharp client and request
      return restClient.Execute<Account> ( restRequest )
} 
```

但是，现在的问题是 API 正在发生变化。我们正在引入新版本的 API。在较新的版本中，端点保持不变，唯一的区别是它们返回不同的数据。

比如V1获取账号的API是：（如果没有设置版本，默认服务器会使用V1）

```
GET - /api/V1/account/{id} 
```

它返回 JSON 数据，如：

```
{ “Id” : “12345”, “Name” : “Test Account” } 
```

获取帐户的 V2 API 是：

```
GET - /api/V2/account/{id} 
```

它返回 JSON 数据，如：

```
{ “Id” : “12345”, “Name” : “Test Account”, “Company” : “Some Company”, “Status” : “Some Status” } 
```

将来，相同 API 的较新版本可能会返回不同的数据。此外，即使 API 的版本发生变化，并非所有更新版本的 API 都会发生变化。如此多的 API 将继续发送 V1 对象数据。与 V1 版本相比，只有一定数量的 API 会发送不同的数据。

现在我的困境是如何重构现有的 API 包装器：

*   第一种方法是为每个新版本的 API 创建新方法。例如： `Public AccountV1 GetAccountV1 ( int accountId )`- 它将调用 V1 api 并将 JSON 反序列化为 V1 对象并返回它；并且， `Public AccountV2 GetAccountV2 ( int accountId )`- 它将在 URL 中调用与 V2 相同的 API，并将 JSON 反序列化为 V2 对象并返回它。

这种方法的问题在于——我必须重写几乎相同的代码来为 160 个 API 创建 V2 函数。此外，如果有更新版本的 API 出现，我将不得不再次做同样的事情 - 为 V3 重写 160 个方法。

*   其次是使用泛型、抽象工厂、动态代理或其他设计，这样我就不必为不同版本的 API 重写几乎相同的代码

对于第二种方法，我不确定如何实现它。我的目标是重构我的包装器代码，以便需要最少的代码更改，它是可扩展的——这意味着，如果我们更改 API 版本和返回的数据，我以后不必再次重写大量的东西。

在重构我的代码和帮助我选择正确的设计模式方面的任何帮助都会非常有帮助。任何示例都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T15:51:14.610

我能想到有两种可行的方法：

1.  [让您的 DTO 从动态对象](http://msdn.microsoft.com/en-us/library/system.dynamic.dynamicobject.aspx)继承并返回动态对象而不是具体实例。

2.  使用[RealProxy](http://msdn.microsoft.com/en-us/library/system.runtime.remoting.proxies.realproxy%28v=VS.80%29.aspx)类返回正确的类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-23T15:09:50.440

首先要做的是创建一个名为 IAccount 的接口，您的所有其他帐户（版本）都将实现该接口。这是最简单的示例。

```
public interface IAccount
{
   bool load(int id);
} 
```

我们这样做的原因是您的所有帐户版本都是相同的类型。你会看到这是如何工作的。

接下来，您要创建实现此接口的基本帐户类型。

仔细看看这堂课。它实现了加载并仅加载您目前知道的值：**name**。

我还伪造了一个*load()*，它模拟了从数据库中加载值，但它只是一个字符串。

```
public class Account: IAccount
{
protected int id;

public int Id
{
    get { return id; }
}
protected string name;

public string Name
{
    get { return name; }
}

protected Account()
{

}

public Account(int id)
{
    this.load(id);
}

 public bool load(int id)
 {
     // fake method to load class from a resource (database, file, etc).
     string [] accountRecord = getItemById(id);
     this.name = accountRecord[0];

     return true;
 }

  private string[] getItemById(int id)
  {
    // fake method to "load" from the database.  just emulates getting a value from db.
     string[] allItems = new string[1];
     allItems[0] = "First Account";
     return allItems;
  } 
```

现在我们需要我们的版本 2 帐户。现在很容易，因为我们只是再次实现了接口，但**这次是从基本帐户派生的，因此我们获得了您不想再次编写的所有原始方法。**

当我们创建工厂方法时，这两件事使它变得强大。

再次，仔细看看这个。

**什么是重要的？**

AccountV2 也实现了自己的 load() 方法——它本来可以使用基类加载，但是**我们需要加载更多的值，所以我们调用 base.load() 然后加载新的值（Company 和状态）**。

```
 public class AccountV2 : Account, IAccount
    {
        private string company;

        public string Company
        {
          get { return company; }
        }
        private string status;

        public string Status
        {
          get { return status; }
        }

        public AccountV2(int id) :base(id)
        {
            this.load(id);
        }

        public AccountV2(int id, string name, string company, string status)
        {
            this.id = id;
            this.name = name;
            this.company = company;
            this.status = status;
        }

        new bool load(int id)
        {
            // loads all the base items
            base.load(id);
            // now load all your version 2 items here
            string [] accountRecord = getItemById(id);
            this.company = accountRecord[0];
            this.status = accountRecord[1];
            return true;
        }

        public string[] getItemById(int id)
        {
            string [] allItems = new string [3];
            allItems[0] = "Big Company, Inc";
            allItems[1] = "ONLINE"; // status
            return allItems;
        }
    } 
```

**我们所拥有的：到此为止的总结**

此时，我们有两个类型相同的类，它们可以轻松实现所有相同的功能，而无需为版本 2 再次编写所有方法。这是因为您将在基础中将所有方法设置为受保护(Account) 类，然后派生类 (AccountV2) 将能够获取它们。

**Enter，Stage Left，Factory Method** 我创建了一个简单的 Factory，它在带有静态方法的静态类中实现，因此您可以从任何地方调用它。它如下所示：

```
public static class AccountFactory
    {
        public static IAccount BuildAccount(int version, int id)
        {
            switch (version)
            {
                case 1: 
                    {
                        Account tempAcct = new Account( id);
                        return tempAcct;
                        break;
                    }
                case 2:
                    {
                        AccountV2 newAccount = new AccountV2(id);
                        return newAccount;
                        break;
                    }
                default:
                    {
                        return null;
                        break;
                    }
            }
        }
    } 
```

现在我们要做的就是在有人向我们的 API 发帖时调用 AccountFactor.BuildAccount(version, id)。swith 语句根据传入的版本号确定要构建的版本。

**返回的 JSON 匹配类型没有额外的代码**

美妙之处在于返回的 JSON 现在将包含您期望的类型的名称/值。

因此，当我为版本 1 发布 1 时，我返回的 JSON 如下所示： ![账户 JSON](../Images/2bf9e099efd7b6815004c5bb2ee6fb05.png)

当我发布 2 版本时，我返回的 JSON 看起来像： ![AccountV2 JSON](../Images/585edd7813b2f7f10745d7d5ccf67ad8.png)

**示例代码**

我以整个示例为例，我想分享它，但想不出一种安全的方法来做到这一点。如果您希望我将其发送或保存在某处，请在此处回复。

# java - 在 Java 中找不到符号错误消息

> ID：12925931
> 
> 赞同：-3
> 
> 时间：2012-10-17T01:44:13.440
> 
> 标签：java, string

嗨，我收到了错误：

> 找不到符号 - 此方法的变量 Andrew。

我需要改变什么？

```
/**
* Create a method that says hi if the name is the same as yours and go away otherwise.
* 
* @author (your name) 
* @version (a version number or a date)
*/
public class String
{
public void greeting(String name) {
    String myName;
    myName = Andrew;
    if (name == myName) {
        System.out.println("Hi");
    }
        else {
            System.out.println("Go away");
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T01:45:36.270

用来`equals()`比较String，`==`会比较引用，也没有声明`Andrew`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T01:48:01.277

```
myName = Andrew; 
```

您正在使用`Andrew`尚未声明的内容，因此您无法使用它。

为了能够使用它，您必须首先声明（也正确初始化以在运行时看到正确的结果）

```
String Andrew; 
```

像这样在你使用它之前。

另一个问题是您的班级名称`String`。在方法`public void greeting(String name)`中，您是指哪个`String`类，您自己的或`java.lang.String`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T01:50:18.590

```
String myName = "Andrew";
if (name.equals(myName)) {
    System.out.println("Hi");
} 
```

**最好以其他方式进行比较，例如`myName.equals(name)`**代替`name.equals(myName)`since `myName`is not null for sure while `name`can be `null`，这将导致 NullPointerException。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T01:47:50.687

试试这样：

```
public class String
{
public void greeting(String name) {
    String myName;
    myName = "Andrew";
    if (name.equals(myName)) {
        System.out.println("Hi");
    }
        else {
            System.out.println("Go away");
        }

    }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-17T01:48:38.157

```
String myName;
myName = Andrew; 
```

什么是`Andrey`？根据 Java 语法，编译器认为它是一个变量，但实际上并没有这样的变量。我想你想写类似的东西

```
String myName;
myName = "Andrew";//this is correct initialization 
```

# c# - 在 ASP.NET 页面中设计大量电子邮件 --- 仅仅一个 foreach 循环和 SmtpClient 就足够了吗？

> ID：12925936
> 
> 赞同：1
> 
> 时间：2012-10-17T01:44:48.173
> 
> 标签：c#, asp.net, email, system.net.mail

我们有兴趣在我们的 ASP.NET Web 应用程序中实现一些东西，它将向从 SQL Server 2008 中提取的地址发送一封电子邮件。

这似乎不会那么困难。伪代码：

```
EmailAddressList addresses = EmailAddressManager.GetList();

foreach (EmailAddress x in addresses)
{
    MailMessage msg = new MailMessage("fromaddress@test.com", x.ToAddress);
    //prepare msg, body, subject, etc.

    SmtpClient smtp = new SmtpClient();
    smtp.Send(msg);

    //add artificial delay for throttling?  this seems to be a common tactic
} 
```

[这个问题](https://stackoverflow.com/questions/9996757/sending-mass-email)有一个赞成的评论，链接到本应有帮助的内容，但现在只会导致“找不到页面”错误。

在[这个问题](https://stackoverflow.com/questions/2866432/best-practise-to-send-mass-email-within-application-asp-net-mvc-2-c)中，OP明确表示上述伪代码方法不是“好方法”。但它有什么问题呢？对此有共同的或更好的做法吗？是否有我没有考虑到的隐藏陷阱？

还有一点关于我们的情况的详细信息：这可能每月只使用两次，一次发送的电子邮件数量不会超过大约 30 或 40。最终目标是，我们去这个页面有了这个工具，我们可以预览将要发送的内容和发送给谁，然后我们只需按下一个按钮，它就会执行上面的伪代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T01:57:21.237

我不认为像您正在做的循环有什么问题，但是您可能需要处理一些事情。最重要的可能是错误处理。如果其中一封电子邮件失败，您只会将电子邮件发送给一部分人，如果您需要发送给其他人，这将很难处理。即使您有一些简单的 try-catch，重试这些电子邮件仍然会遇到问题。您将需要某种方式来存储您计划发送到的所有电子邮件以及每次发送的结果。

接下来是与性能相关的。如果有很多电子邮件，使用 .Send() 一次发送一封电子邮件会很慢。一个简单的解决方法是使用任务库或异步版本来多线程发送。当然这会使状态管理稍微复杂一些，但是会显着提高邮件发送速度。如果您对每分钟/小时可以发送的电子邮件数量有限制，那么这可能与此优化不一致，也可能不一致。

如果每个收件人都有不同的内容，您可能需要使用一些模板库，例如 NVelocity 或 MS Razor 引擎。

或者您可以将这些无聊的东西外包给 SendGrid 之类的地方。

# c++ - 在按下和释放鼠标时绘制一个矩形，opengl

> ID：12925937
> 
> 赞同：2
> 
> 时间：2012-10-17T01:44:49.987
> 
> 标签：c++, opengl, mouseevent, glut

我正在尝试从用户输入中绘制一个矩形，该矩形从左键单击收集 x1,y1 坐标，然后从释放左键单击指定 x2,y2。我成功保存了基于此鼠标操作的坐标（基于确认坐标已保存的 cout<< 语句），但释放左键后没有显示任何内容。

这是我尝试过的：（请记住，没有崩溃，所以存在逻辑错误）

```
void display(void)
{
    glClear(GL_COLOR_BUFFER_BIT);
    glPushMatrix();
    glColor3f(1,1,0);
    glBegin(GL_POLYGON);
        glVertex2f(clip_start.x_coord,clip_start.y_coord);
        glVertex2f(clip_finish.x_coord,clip_start.y_coord);
        glVertex2f(clip_finish.x_coord,clip_finish.y_coord);
        glVertex2f(clip_start.x_coord,clip_finish.y_coord);
    glEnd();
    glPopMatrix();
        glutSwapBuffers();
        glutPostRedisplay();
    drawit();
}

void mouse(int button, int state, int x, int y){
    if(c_pressed){
        switch(button){
        case GLUT_LEFT_BUTTON:

            if(state==GLUT_DOWN){
                clip_start.x_coord=x; //x1
                clip_start.y_coord=y; //y1          
                cout<<"Initial pos set"<<endl;                  
            }
            if(state==GLUT_UP){
                clip_finish.x_coord=x; //x2
                clip_finish.y_coord=y; //y2
                cout<<"Final pos set"<<endl;  

            }
            break;  
        }
        clip_ready==true;
    }
}
void keyboard(unsigned char key, int x, int y){
    if(key == 'c'){
        c_pressed = true;
        cout<<"c pressed"<<endl;
    }
}
int main(int argc, char** argv)
{
    glutInit(&argc,argv);
    glutInitDisplayMode(GLUT_SINGLE|GLUT_RGB);
    glutInitWindowSize(ImageW,ImageH);
    glutInitWindowPosition(100,100);
    glutCreateWindow("");
    init(); 
    glutKeyboardFunc(keyboard);
    glutMouseFunc(mouse);
    glutDisplayFunc(display);

    glutMainLoop();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T02:57:45.063

你没有设置`GL_PROJECTION`矩阵。我不确定默认值是什么（可能是单位矩阵），但它肯定**不是**您在`display()`.

尝试这样的事情：

```
#include <GL/glut.h>

struct Position
{
    Position() : x(0), y(0) {}
    float x, y;
};

Position start, finish;
void mouse( int button, int state, int x, int y )
{
    if( button == GLUT_LEFT_BUTTON && state == GLUT_DOWN )
    {
        start.x = finish.x = x;
        start.y = finish.y = y;
    }
    if( button == GLUT_LEFT_BUTTON && state == GLUT_UP)
    {
        finish.x=x;
        finish.y=y;
    }
    glutPostRedisplay();
}

void motion( int x, int y )
{
    finish.x = x;
    finish.y = y;
    glutPostRedisplay();
}

void display()
{
    glClearColor( 0, 0, 0, 1 );
    glClear(GL_COLOR_BUFFER_BIT);

    glMatrixMode( GL_PROJECTION );
    glLoadIdentity();
    double w = glutGet( GLUT_WINDOW_WIDTH );
    double h = glutGet( GLUT_WINDOW_HEIGHT );
    glOrtho( 0, w, h, 0, -1, 1 );

    glMatrixMode( GL_MODELVIEW );
    glLoadIdentity();

    glPushMatrix();
    glColor3f(1,1,0);
    glBegin(GL_QUADS);
        glVertex2f(start.x,start.y);
        glVertex2f(finish.x,start.y);
        glVertex2f(finish.x,finish.y);
        glVertex2f(start.x,finish.y);
    glEnd();
    glPopMatrix();

    glutSwapBuffers();
}

int main(int argc, char** argv)
{
    glutInit(&argc,argv);
    glutInitDisplayMode(GLUT_DOUBLE|GLUT_RGBA);
    glutInitWindowSize(640,480);
    glutInitWindowPosition(100,100);
    glutCreateWindow("GLUT");
    glutMouseFunc(mouse);
    glutMotionFunc(motion);
    glutDisplayFunc(display);

    glutMainLoop();
    return 0;
} 
```

# c# - 将允许 C# 中的多个读取器的锁

> ID：12925942
> 
> 赞同：13
> 
> 时间：2012-10-17T01:45:27.083
> 
> 标签：c#, .net, multithreading, locking

我有以下代码：

```
private static object _dbLock = new object();

public static void LoadData()
{
   lock (_dbLock)
   {
      //Load data from the database
   }
}

public static string ReadData(Guid key)
{
   lock (_dbLock)
   {
      //Lookup key in data and return value
   }
} 
```

我不想让人们在从数据库加载数据时读取数据，因此我`lock`在`ReadData`. 但是，现在如果多人`ReadData`同时打电话，一次只能打一个电话。

有没有一种方法可以允许同时调用`ReadData`但`LoadData`在运行时阻止阅读器？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-17T01:51:21.363

[`ReaderWriterLock`](http://msdn.microsoft.com/en-us/library/system.threading.readerwriterlock.aspx)和[`ReaderWriterLockSlim`](http://msdn.microsoft.com/en-us/library/system.threading.readerwriterlockslim.aspx)类支持该用例。除非您需要 3.5 之前的支持，否则请使用“Slim”版本。

```
private static ReaderWriterLockSlim _cacheLock = new ReaderWriterLockSlim();

public static void LoadData()
{
    _cacheLock.EnterWriteLock();
    try
    {
        // Load data from the database
    }
    finally
    {
        _cacheLock.ExitWriteLock();
    }
}

public static string ReadData(Guid key)
{
    _cacheLock.EnterReadLock();
    try
    {
        // Lookup key in data and return value
    }
    finally
    {
        _cacheLock.ExitReadLock();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T01:52:18.937

尝试使用`ManualResetEvent`：

```
private static object _dbLock = new object();
private static ManualResetEvent _mrse = new ManualResetEvent(true);

public static void LoadData()
{

   lock (_dbLock)
   {
      _mrse.Reset();
      //Load data from the database
      _mrse.Set();
   }
}

public static string ReadData(Guid key)
{
    _mrse.Wait();
    //Lookup key in data and return value
} 
```

这允许多个读取器等待数据加载器完成其工作，然后同时读取。如果集合不是线程安全的，那么您需要添加另一个锁定对象或使用另一个同步构造。

# java - 如何在 Open GL 更新线程中运行处理程序到 UI 线程

> ID：12925943
> 
> 赞同：1
> 
> 时间：2012-10-17T01:45:26.803
> 
> 标签：java, android, eclipse

所以我正在尝试实现 In-App-Billing，问题是我需要 BillingHelper/ReponseHandler 在 UI 线程上运行。当我在我的 Screen 类中创建处理程序时，它只继承 Activity 作为参数。并在 Open GL 线程上运行，我收到以下错误。

```
10-16 18:36:28.500: E/AndroidRuntime(28263): java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare() 
```

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T01:54:33.627

处理程序需要在您希望发布的可运行文件执行的线程上构建。因此，如果您想在 UI 线程上运行某些东西，您必须在 UI 线程上构造处理程序并以某种方式将其传递给工作线程（通常在线程对象构造期间，显式或通过闭包）。

不过也有捷径。该方法`Activity.runOnUiThread()`接受`Runnable`并在 UI 线程上执行，不需要处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T01:56:11.027

Exception: No Looper.prepare() 中很清楚。除了 UI(main)thread，在线程中使用处理程序之前，您必须始终调用 Looper.prepare。演示代码：

```
Looper.prepare();
Message msg = new Message();
msg.what = 100;
handler.sendMessage(msg); 
```

希望这个简单的消息可以帮助你，[谷歌文档](http://developer.android.com/reference/android/os/Looper.html#q=Looper.prepare%28%29)

# excel-2007 - 如何检索 Excel 图表对象中的最大值/最小值和位置

> ID：12925944
> 
> 赞同：0
> 
> 时间：2012-10-17T01:45:29.760
> 
> 标签：excel-2007

如何检索excel图表系列集合的最大值和最小值以及图表上相同的位置？我想计算系列中每个点的标签应该在哪里并相应地移动它。

我这样做是为了让它们看起来不错，以防你想知道。如果我只是盲目地移动标签，数字往往会变得一团糟。我确信我可以在图表底部找到数字，但这不是我想要做的。Chart 对象很难与 Object Listing thing-a-ma-jig （当您在对象名称后点击句点时弹出的 whatcha-ma-call-it ）一起工作并没有多大帮助。

**编辑：**我想要实现的是检索某个系列的 excel 图表的最高（最大值）和最低（最小值）值。我还想获得他们在图表本身上的位置（从顶部或左侧）。我知道看哪种方式，但是如果您提供代码来检查哪种方式来衡量，那将是一个奖励。见下图。

```
 -------------------Left------------------------------------- >
  |        ________________________________________
  |       |                                        |
  |   225 |----------------------------------------|max (highest)
  |   200 |                                        |
  |   175 |                                        |
  |   150 |            -----                       |
|Top| 125 |           /     \                      |
  |   100 |          /       \                     |
  |    75 |   -------         \                    |
  |    50 |  /                 --------------\     |
  |    25 | /                                 \    |
 \|/    0 |----------------------------------------|min (lowest)
  V       |________________________________________| 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T05:37:11.400

你根本不需要任何 VBA。我知道你想要什么，我已经创建了它。我将解释你如何为最大位置做这件事，就像你在最小位置做类似的事情一样。首先，我们需要找到最大 Y 轴标签，然后就很容易了。

让我们将其分解为五个步骤：

1.  公式中的 A：确定比例。
2.  公式中的 B：按该比例进行比较。
3.  公式中的 C：测量间隔。
4.  公式中的 D：四舍五入。
5.  公式中的 E：计算最大轴标签。

好的，这是每个步骤的公式：

1.  =ROUNDDOWN(LOG(MAX(data));1) 其中 data 代表包含您的值的单元格。
2.  =MAX(数据)/10^A)*1.05
3.  =0.2+(B>2)*0.3+(B>5)*0.5
4.  =舍入(B;C)
5.  =(C+D)*10^A

我自己使用荷兰语公式，所以我可能会出现轻微的翻译错误。除此之外，我向你保证这是可行的。其原因是，我已经弄清楚 Excel 如何使用图表“思考”。我将尝试解释这是如何工作的。

基本上，Excel 使用三个基本范围：从 1 到 2、从 2 到 5 和从 5 到 10.. 当一个数字高于 10 时，10 将再次被视为 1，您将退回到第一个范围. 这就是为什么我们首先使用 LOG 公式确定比例。如果您是新手，请在 wiki 中查找。

因此，当我们有了刻度时，我们确定它属于哪个范围。对于这三个范围中的每一个，y 轴标签间隔都是不同的。所以我们在第三步计算它们，并在第四步使用它来向下舍入数字 B。第五步只是将它乘回到原来的规模。

就这样：找到了最大 Y 轴标签。看图表，应该是一样的。如果你明白了，你也会找到最小的 Y 轴标签。现在很酷的事情是，您可以非常轻松地计算出标签的确切位置，因为您现在知道网格的大小。

祝你好运，如果你还有问题，请告诉我。

帕特里克

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T15:53:49.283

好吧，经过更多的实验（这是 VBA 的目的之一）我明白了。我的具体案例有两个相互重叠的条形系列。代码相当长，但速度很快。我想我在这个过程中学到了一些关于如何加速 vba 的知识！

```
Sub AdjustReportChart()
    'main report chart
    Dim mrc As Chart
    Dim sercol As SeriesCollection
    Dim axe As Axis, ser As series
    Dim poi1 As Point, poi2 As Point
    Dim i As Integer, j As Integer
    'select the chart
    If hwb Is Nothing Then Call SetGlobals
    Set mrc = mws.ChartObjects("Chart 1").Chart
    'delave all the needed vars
    Dim poi1pos As Double, poi1val As Double
    Dim min1 As Integer, max1 As Integer
    Dim poi2pos As Double, poi2val As Double
    Dim min2 As Integer, max2 As Integer
    'get the chart width params
    Dim width As Integer
    width = Int(mrc.PlotArea.InsideWidth)
    Set sercol = mrc.SeriesCollection
    Set axe = mrc.Axes(2, sercol(1).AxisGroup)
    min1 = axe.MinimumScale
    max1 = axe.MaximumScale
    Set axe = mrc.Axes(2, sercol(2).AxisGroup)
    min2 = axe.MinimumScale
    max2 = axe.MaximumScale
    'start adjusting. 
    For j = 1 To sercol(1).points.Count
        Set poi1 = sercol(1).points(j)
        Set poi2 = sercol(2).points(j)
        poi1pos = poi1.DataLabel.Left
        poi2pos = poi2.DataLabel.Left
        poi1val = poi1.DataLabel.Text
        poi2val = poi2.DataLabel.Text
        poi1pos = (poi1val / (max1 - min1) * width - 6) + 142
        poi2pos = (poi2val / (max2 - min2) * width - 6) + 142
        If poi2pos < poi1pos + (Len(Str(poi1val)) * 6) And _
            poi1pos < poi2pos + (Len(Str(poi2val)) * 6) Then
            poi2pos = poi1pos + (Len(Str(poi1val)) * 6)
        End If
        poi1.DataLabel.Left = poi1pos
        poi2.DataLabel.Left = poi2pos
    Next j
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T08:18:54.087

目前尚不清楚您想要实现什么，但这里有一个访问`Series`,`Points`和`Labels`图表的演示。

```
Sub MoveLabels()
    Dim sh As Worksheet
    Dim oCh As Chart
    Dim oSers As SeriesCollection
    Dim oSer As Series
    Dim oPts As Points
    Dim oPt As Point
    Dim oLbls As DataLabels
    Dim oLbl As DataLabel
    Dim i As Long, pt As Long

    Set sh = ActiveSheet
    Set oCh = sh.ChartObjects("Chart 8").Chart

    ' Series Collection of a chart
    Set oSers = ch.SeriesCollection
    For Each oSer In oSers
        'Labels collection of a series
        Set oLbls = oSer.DataLabels
        For Each oLbl In oLbls
            ' Label Object

        Next

        'Points collection of a series
        Set oPts = oSers.Points
        For Each oPt In oPts
            ' Label Object
            Set oLbl = oPt.DataLabel
        Next
    Next
End Sub 
```

# heroku - Heroku + 插件提供者 Alpha 阶段

> ID：12925946
> 
> 赞同：3
> 
> 时间：2012-10-17T01:45:36.300
> 
> 标签：heroku, add-on

我一直在为 Heroku 的一个新插件工作，目前它是一个 alpha 阶段。所以目前，我无法在我创建的应用程序上添加插件，因为没有按钮让我添加它。有人可以向我指出一些可以帮助我弄清楚的资源吗？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T08:08:22.563

在 Alpha 阶段也找不到添加插件的按钮。似乎在 alpha 阶段，一般附加列表中看不到它，也没有其他可用列表。

但是，命令行界面 (CLI) 有效：

```
$ heroku addons:add your_alpha_addon_name --app your_application_name 
```

关于附加开发的材料：

*   官方提供者资源：[https ://addons.heroku.com/provider/resources/](https://addons.heroku.com/provider/resources/)
*   [Heroku 插件提供商 Google Group](http://groups.google.com/group/heroku-add-on-providers)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-29T10:47:46.897

如果您使用插件提供商帐户或 alpha 用户登录，您可以直接指向插件 heroku 页面，例如 [https://addons.heroku.com/YOUR-ADDON](https://addons.heroku.com/YOUR-ADDON) 您可以将插件添加到您的应用之一

[如果您以提供商身份登录并转到您的附加提供商门户https://addons.heroku.com/marketplace/addons/YOUR-ADDON/edit](https://addons.heroku.com/marketplace/addons/YOUR-ADDON/edit)，则可以创建新的 alpha 用户

# android - 在android中迭代StateListDrawable的子drawable

> ID：12925954
> 
> 赞同：5
> 
> 时间：2012-10-17T01:46:31.353
> 
> 标签：android

在我当前的项目中，我需要迭代 StateListDrawable 中的每个子可绘制对象。

在StateListDrawable.java的源码中，我找到了一个方法：

public Drawable getStateDrawable(int index)

但是这个方法的注解是@hide，这意味着我不能使用它。

那么，有没有其他方法可以实现这一目标？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T02:45:00.750

这是一个相当古老的问题，所以现在帮助你可能为时已晚，但为了其他任何发现它的人，我能够用这段代码做到这一点：

```
final DrawableContainer parentDrawable = (DrawableContainer) drawable;
final DrawableContainerState containerState = (DrawableContainerState) parentDrawable.getConstantState();
final Drawable[] children = containerState.getChildren();
for (int i = containerState.getChildCount(); i > 0; --i) {
    doStuff(children[i - 1]);
} 
```

# javascript - 谷歌地图和多个标记

> ID：12925955
> 
> 赞同：0
> 
> 时间：2012-10-17T01:46:44.017
> 
> 标签：javascript, google-maps-api-3

所以这是我的代码。问题是地图显示，但地图上没有放置标记。latlongARR 是一个看起来像这样的数组

> [{"name":"McChord Field DGC","lat":"47.128257","long":"-122.488847"},{"name":"环境 DGC","lat":"47.184732","long ":"-122.509232"},{"name":"Riverside Disc Golf Park","lat":"47.185683","long":"-122.212600"},{"name":"East Tacoma DGC"," lat":"47.227344","long":"-122.398491"},{"name":"白河","lat":"47.278501","long":"-122.197390"}]

似乎一切都应该工作？有什么明显的错误吗？

```
 var mapOptions = {
                    zoom:10,
                    center: currentLocation,
                    mapTypeId: google.maps.MapTypeId.ROADMAP
                    };
                var map = new google.maps.Map(document.getElementById('dgmap'), mapOptions);
                var infowindow = null;

                var infowindow = new google.maps.InfoWindow({content: 'loading...'}); 

                var marker, i;

                for(i=0; i < latlongARR.length; i++){
                    var markers;
                    marker = new google.maps.Marker({
                        position: new google.maps.LatLng(latlongARR[i][1], latlongARR[i][2]),
                        map:map
                        });
                        console.log(latlongARR[i][0]);
                    google.maps.event.addListener(marker, 'click', (function(marker, i){
                        return function(){
                            infowindow.setContent(latlongARR[i][0]);
                            infowindow.open(map, marker);
                        }
                        })(marker,i));
                    };

                } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T02:02:59.320

```
position: new google.maps.LatLng(latlongARR[i][1], latlongARR[i][2]), 
```

`latlongARR[i]`是一个对象，你需要使用属性名而不是数字索引来获取值，上面的代码应该是：

```
position: new google.maps.LatLng(latlongARR[i].lat, latlongARR[i].long), 
```

或者

```
position: new google.maps.LatLng(latlongARR[i]['lat'], latlongARR[i]['long']), 
```

以下相同的问题：

```
infowindow.setContent(latlongARR[i][0]); 
```

这应该是`infowindow.setContent(latlongARR[i].name);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T02:23:21.343

您应该使用调试器。第一件事是这样的：

```
 marker = new google.maps.Marker({
                    position: new google.maps.LatLng(latlongARR[i][1], latlongARR[i][2]),
                    map:map
                    }); 
```

`latlongARR[i][1]`and`latlongARR[i][2]`是未定义的，它们应该是`latlongARR[i].lat`and `latlongARR[i].long`。

# javascript - 从 soundcloud api 获取正确的 .mp3 url 用于 soundmanager2 360-player

> ID：12925956
> 
> 赞同：3
> 
> 时间：2012-10-17T01:46:47.600
> 
> 标签：javascript, jquery, soundcloud, soundmanager2

我的问题与此处的问题相同[，](https://stackoverflow.com/questions/7464400/list-tracks-from-soundcloud-and-play-it-with-soundmanager-2-on-a-wordpress-blog#comment15797049_9386528)但是由于该问题从未得到解决，我无法私下向 PeeHaa 发送消息以询问答案，我将在此处再次询问。

我已经成功查询了 soundcloud api 并获得了每首曲目的 stream_url 并将其添加到我的 360 播放器的所有 href [(demo here)](http://www.schillmania.com/projects/soundmanager2/demo/360-player/)中。我的元素代码如下所示：

```
<div class="ui360">
 <a href="/path/to/an.mp3" data-title="Track title">play "an.mp3"</a>
</div> 
```

我有这个脚本来查找所有具有 data-title 属性的 a 标签，并根据 stream_url 为它们提供正确的 href，但是当我尝试单击浏览器中的 soundmanager 图标并播放曲目时，它只会被重定向到 . mp3 网址。

```
SC.initialize({
  client_id: 'MY_CLIENT_ID'
});

SC.get('/playlists/2450655', 'allow_redirects=False', function(playlist) {

  var titles = $('.audio .ui360 a').each(function(index){
    this.index = index;
  });

  for (var i = 0; i < playlist.tracks.length; i++) {    
    var id = '?client_id=MY_CLIENT_ID'    
    for (var j = 0; j < titles.length; j++) {      
      if (playlist.tracks[i].title === $(titles[j]).attr('data-title')) {
        $(titles[j]).attr('href', playlist.tracks[i].stream_url+id)
      }            
    }    
  }

}); 
```

有谁知道如何以这种方式获取正确的 URL 以播放托管在 soundcloud 上的曲目？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-26T18:59:30.050

我知道这是一个老问题，但问题让我陷入困境，我终于想通了，所以这是我对其他人的回答：

如果您在链接中指定 mp3 mimetype，Soundmanager 将起作用：

```
<div class="ui360">
    <a type="audio/mp3" href="https://api.soundcloud.com/tracks/49349198/stream?client_id=YOUR_CLIENT_ID" data-title="Track title">play "an.mp3"</a>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T05:38:23.070

为什么不直接使用 SoundCloud JavaScript SDK 流式传输曲目？就像是：

```
SC.get('/playlists/2450655', function(playlist) {
  $(playlist.tracks).each(function(index, track) {
    $('a[href="' + track.stream_url + '"]').click(function(e) {
       e.preventDefault();
       SC.stream('/tracks/' + track.id, function(sound) {
         sound.play();
       });
    });
  });
}); 
```

这会解决您的问题，还是您需要解析 URL 的特定原因？

# iphone - CADisplayLink 和 drawRect 降低了帧速率

> ID：12925959
> 
> 赞同：3
> 
> 时间：2012-10-17T01:47:20.493
> 
> 标签：iphone, objective-c, ios, drawrect, cadisplaylink

我的问题是关于 iOS 开发的。我正在编写一个简单的游戏，以测试低级核心图形功能（上下文、图层等）以及如何将它与实际的简单视图混合......我解释一下：我在屏幕上有一个简单的精灵，它是使用属性进行动画处理`UIImageView`，因此帧速率可以完美运行。之后，我添加了一个无限的背景，它是用 `bezier curves`. 为了对此进行动画处理，我使用`CADisplayLink`，在背景上调用一个方法`"animate"`，将我的点移动到 上`bezier curve`，然后我调用`setNeedsDisplay`。它“或多或少”工作得很好，但是如果我删除背景（或`setNeedsDisplay`调用，所以它不会在每一帧都重新生成）帧速率会增加很多，所以“任何东西”在这部分都不能正常工作......

我也尝试过双缓冲系统，但它比我当前的代码效果更差。我也想使用线程，但我真的没有发现 CPU 在后台做任何难事。

这是代码：

```
//This is called automatically with CADDisplayLink.
- (void) animate:(CADisplayLink *)sender
{
    //Check for deleting the first point.
    float x = points[firstPoint].x;
    if ( x < -2*DIST ) {
        CGFloat lastX = points[lastPoint].x;
        lastPoint = firstPoint;
        firstPoint = ((firstPoint + 1) % (TOTAL_POINTS));
        points[lastPoint] = CGPointMake(lastX + DIST, [self getNextY]);
    }

    //Move points
    for(int i = 0; i < TOTAL_POINTS; i++) {
        points[i].x -= 7;
    }

    //Mark as "needed to redraw"
    [self setNeedsDisplay];

}

- (void)drawRect:(CGRect)rect
{    
    CGContextRef context = UIGraphicsGetCurrentContext();

    CGContextSetLineWidth(context, 3.0);
    CGContextSetRGBStrokeColor(context, 0, 0, 0, 1.0);
    CGContextSetRGBFillColor(context, 1.0, 0, 0, 1.0);
    CGContextSetLineCap(context, kCGLineCapRound);

    //Create path
    CGMutablePathRef path = CGPathCreateMutable();

    //Draw the curve
    [self drawBezierCurveInPath:path];

    //Close and add path
    CGPathAddLineToPoint(path, NULL, 485, -5);
    CGPathAddLineToPoint(path, NULL, -5, -5);
    CGPathCloseSubpath(path);

    CGContextAddPath(context, path);

    CGContextSetFillColorWithColor(context, bg2);

    //    [[UIColor redColor] setFill];
    [[UIColor blackColor] setStroke];

    CGContextDrawPath(context, kCGPathFillStroke);    

    //Release
    CGPathRelease(path);

    //Paint time.
    playintIntervalView.text = [NSString stringWithFormat:@"%f", playingInterval];
}

- (void) drawBezierCurveInPath: (CGMutablePathRef) path
{
    CGPoint fp = midPoint(points[firstPoint], points[(firstPoint+1)%TOTAL_POINTS]);
    CGPathMoveToPoint(path, NULL, fp.x, fp.y);

    int i = firstPoint;
    for (int k = 0; k < TOTAL_POINTS-2; k++) {
        previousPoint2 = points[i];
        previousPoint1 = points[(i+1)%TOTAL_POINTS];
        currentPoint = points[(i+2)%TOTAL_POINTS];

        // calculate mid point
        CGPoint mid2 = midPoint(currentPoint, previousPoint1);

        CGPathAddQuadCurveToPoint(path, nil, previousPoint1.x, previousPoint1.y, mid2.x, mid2.y); 

        i = (i + 1) % TOTAL_POINTS;        
    }

} 
```

我更愿意存储一个`UIBezierPath`（这样我就可以进行一些碰撞测试），但它不允许你只删除一个点（当它离开左侧的屏幕时），所以我也必须在每一帧都初始化它。 ..我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-21T21:52:23.890

这可能有点晚了，但是在这种情况下使用 CADisplayLink 来制作动画是一个坏主意。您应该研究 CoreAnimation 以获得有效的路径动画。

这里的问题是您尝试每秒重绘 60 次，而 drawRect 中的代码可能不会在您拥有的毫秒内完成。通过删除 setNeedsDisplay，您基本上是在告诉它不要更新。

# javascript - 使用 Javascript 在文件夹中搜索 XML 文件

> ID：12925961
> 
> 赞同：1
> 
> 时间：2012-10-17T01:47:51.997
> 
> 标签：javascript

有没有办法使用 JavaScript 从目标文件夹中获取文件列表？

我需要在一个文件夹中搜索 XML 文件，如果有的话，将它们的名称保存在一个数组中。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T02:09:27.827

HTML5 最终通过 File API 规范提供了一种与本地文件交互的标准方式。

[http://www.html5rocks.com/en/tutorials/file/dndfiles/](http://www.html5rocks.com/en/tutorials/file/dndfiles/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T01:55:23.937

不可以。JavaScript 仅在客户端中有效。如果没有 AJAX 调用，JavaScript 就无法查看服务器或客户端计算机上的文件夹。

像 PHP 或 Ruby 这样的语言在服务器中有一部分允许它访问服务器上的文件系统，但不能访问纯 JavaScript。

* * *

正如下面[sofrito 所](https://stackoverflow.com/users/1751767/sofrito)指出的，HTML5 现在有一个 File API，可以用来操作文件。但是，API 不能完成我上面列出的所有事情：Javascript 仍然无法像 C++、Java、Python 或 Ruby 程序一样查看您计算机上或其他人的文件夹。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T01:56:12.097

不，不是。但是您可以静态键入数组。

```
var xml = [ "something.xml", "somethingelse.xml", "anotherthing.xml" ]; 
```

# eclipse-plugin - 阅读依赖插件的 eclipse .class 源代码

> ID：12925964
> 
> 赞同：0
> 
> 时间：2012-10-17T01:48:01.573
> 
> 标签：eclipse-plugin, dependencies

我正在开发一个 Eclipse 插件，并且在“插件依赖项”下有一些 .jar 文件。但是，我很困惑为什么可以打开某些 .jar 文件下的 .class 文件，并且我可以看到代码，而其他人则给我“Class File Editor - Source Not Found”。下面是两个示例的链接：

1.  [http://www.java2s.com/Code/Jar/o/Downloadorgeclipseecfdocshare210v201002191253jar.htm](http://www.java2s.com/Code/Jar/o/Downloadorgeclipseecfdocshare210v201002191253jar.htm)其中有 org.eclipse.docshare。这个 .jar 当我尝试打开它时出现上述错误。

2.  [http://www.java2s.com/Code/Jar/o/Downloadorgeclipseecf31300v201105312218jar.htm](http://www.java2s.com/Code/Jar/o/Downloadorgeclipseecf31300v201105312218jar.htm)，我可以轻松打开并查看源代码

谁能解释一下？！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T02:04:55.507

通常，这是因为您有与 jar 文件关联的源代码。要将源代码与库相关联，在 Java Build Path 对话框中的 Libraries 选项卡上，打开 jar，您会发现四个额外的子项。第一个是源附件，这是您指定源代码的地方。

您也可以使用 JRE 或任何用户库来执行此操作。

# angularjs - python 像 angularjs 模型上的@property？

> ID：12925965
> 
> 赞同：0
> 
> 时间：2012-10-17T01:48:04.633
> 
> 标签：angularjs

假设我有简单的用户资源：

```
angular.module('models', ['ngResource']).
    factory('User', function($resource) {
    var User = $resource('/api/users/:userId', {userId:'@id'}, {});
    return User;
}); 
```

这可能会返回一个包含`{firstName: 'bob', lastName: 'smith'}`. 我想显示在我看来的`fullName`用户`firstName +' '+ lastName`。如何做到这一点？

现在在我的控制器中，我有：

```
$scope.user = User.get({userId: 42}); //bob smith 
```

但是我在哪里附加`fullName`功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T13:16:01.713

您应该能够只使用资源并使用 JavaScript 的原型添加新属性或方法。因为它返回一个构造函数。

所以像：

```
User.prototype.fullName = function() {
     return this.firstName + ' ' + this.lastName;
}; 
```

编辑：如果由于某种原因不起作用......有一个小的 JavaScript hack 用于修改被闭包隐藏的对象原型：您可以使用`.constructor`创建对象的属性并更改其原型。

# macos - 尝试在 R 中读取 csv 时最后一行不完整

> ID：12925968
> 
> 赞同：3
> 
> 时间：2012-10-17T01:48:28.763
> 
> 标签：macos, r, excel, csv, end-of-line

我有 R v.2.15.1 在 Mac OS 10.8.2 上运行。今天早些时候，每次我尝试导入任何最近创建的（今天）csv 文件时，R 都会向我抛出错误。较旧的（今天之前）csv 文件可以正常工作，但我创建的任何新文件都不会在没有警告的情况下读入。

我正在以相同的方式创建 csv——将电子表格保存为 MS Excel 中的 .csv（Office for Mac 2011）。

即使使用虚拟文件（'test.csv'），我也会收到以下信息：“警告消息：在 read.table(file = file, header = header, sep = sep, quote = quote, : readTableHeader 上找到的不完整的最后一行'test.csv'"

在 TextEdit 中，test.csv 是：

```
cat,stuff
1,1
2,2 
```

我尝试在每一行的末尾按回车键（如此处建议：['Incomplete final line' warning when trying to read a .csv file into R](https://stackoverflow.com/questions/5990654/incomplete-final-line-warning-when-trying-to-read-a-csv-file-into-r)），但这不起作用。

我已经重新安装了 R 和 Microsoft Excel。奇怪的是，我能够在带有 R 的 Windows 机器上读取 csv 文件而没有警告。在另一台带有 R 和 RStudio 的 Mac 上，我得到了同样的警告......

我知道这“只是”一个警告，但它让我有点紧张，并且似乎有可能在未来引起问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T05:11:56.840

担心是没有根据的。R 的读取函数“期望”有一个空行，但它们不会导致格式错误的数据帧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-30T23:00:21.167

我遇到了这个确切的问题，就我而言，我得到的数据框格式不正确。我发现将 Excel 文件保存为 UTF-16 然后调用`read.table(... fileEncoding='UTF-16')`效果很好。从 Excel 导出 UTF 文件后无需处理。

# mongodb - mongoid_fulltext - 查询中的 AND

> ID：12925971
> 
> 赞同：1
> 
> 时间：2012-10-17T01:48:47.707
> 
> 标签：mongodb, full-text-search, mongoid, ruby-on-rails-3.2

如何`AND`使用 mongoid_fulltext 进行查询？

例子：

```
Post.fulltext_search 'rails AND mongo' 
```

谢谢。

# c++ - 右值引用和类设计

> ID：12925975
> 
> 赞同：2
> 
> 时间：2012-10-17T01:49:11.590
> 
> 标签：c++, interface, c++11, rvalue-reference

我试图评估右值引用如何影响类的设计。假设我有一个现有的类，如下所示

```
class X
{
   string internal;

public:
   void set_data(const char* s)
   {
      internal = s;
   }
..
..
..
//other stuff

}; 
```

此类由另一个模块使用，如下所示：

```
//another module
{

    string configvalue;
    X x;

    //read configvalue from a file and call set 

    ...
    x.set_data(configvalue.c_str());

    //use x to do some magic
    ..
    ...

} 
```

有了右值引用，像这样提供另一个成员函数会更好吗

```
class X
{
...
...
....
 void set_data(string s)
 {
     internal = std::move(s);
 }
}; 
```

这将允许此类的客户端使用移动语义并防止每次使用一组分配/复制操作。这是一个高度编造的示例，但相同的原则是否适用于所有类设计，而不会破坏“最小接口”范式。

非常感谢任何人对此事的见解？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T22:41:17.143

是的，`string`按照您的建议添加重载是个好主意。即使没有右值引用，这样的重载也是一个好主意。否则，给定一个`std::string s`, 使用它必须：

```
x.set_data(s.c_str()); 
```

然而

```
x.set_data(s); 
```

对于`X`.

作为另一种选择，您可以添加这两个重载：

```
void set_data(const string& s) {internal = s;}
void set_data(string&& s)      {internal = std::move(s);} 
```

这大致相当于您正确建议的单个重载。两次重载解决方案的性能优势非常小。`string`当传递的参数是一个 xvalue（一个已用 转换的左值）时，单重载解决方案将花费额外的移动构造`std::move`。但是移动构造函数`std::string`应该非常快，所以这应该没什么大不了的。我只是本着充分披露的精神提及它。

如果`set_data`有多个参数，“按值”方法变得更具吸引力。例如考虑需要传入两个`string`s 的情况。您的选择是：

**解决方案 1**

```
void set_data(string s1, string s2); 
```

**解决方案 2**

```
void set_data(const string&  s1, const string&  s2);
void set_data(      string&& s1, const string&  s2);
void set_data(const string&  s1,       string&& s2);
void set_data(      string&& s1,       string&& s2); 
```

如您所见，解决方案 2 在参数数量上的扩展性很差。

最后，在任何情况下，您都不应尝试将两种解决方案应用于同一类型：

**不要这样做！**

```
void set_data(string s)        {internal = std::move(s);}
void set_data(const string& s) {internal = s;}
void set_data(string&& s)      {internal = std::move(s);} 
```

这组重载将是模棱两可的。就像在 C++03 中一样，以下两个重载是模棱两可的：

```
void set_data(string s)        {internal = std::move(s);}
void set_data(const string& s) {internal = s;} 
```

永远不要用引用重载按值，无论是左值引用还是右值引用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-16T09:30:41.400

我认为没有理由将两者都`void set_data(const char* s)`作为`void set_data(string s)`界面的一部分。这将产生歧义并且容易产生副作用。此外，您仍然在 call to 中按值传递参数`set_data(string s)`。相反，我建议定义以下 2 个函数：

```
void set_data(const string &s);
void set_data(string &&s); 
```

这样你可以有 2 个实现，第一个将深度复制你的字符串，第二个可以窃取字符串的内部，因为它是一个`rvalue`（确保将其保持在定义的状态，以便析构函数能够毫无问题地销毁它 - 因为详情见[http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2006/n2027.html#Move_Semantics](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2006/n2027.html#Move_Semantics)）。

第二个版本将在`rvalue` `string`参数或参数被强制时自动调用`rvalue`，例如通过`std::move`.

如果您还想有一个按值选项，您可以使用`rvalue`此 API 的版本与字符串复制构造函数：`set_data(string(str))`.

# bash - 期望在带有特殊字符的 bash 脚本中 2 部分

> ID：12925986
> 
> 赞同：2
> 
> 时间：2012-10-17T01:51:31.523
> 
> 标签：bash, expect

所以我试图让 bash 中的期望正常工作。

这是脚本内容...

```
[root@mysql1 ~]# cat mysql_repl.sh
#!/bin/bash
read -p "Master server ip: " masterip
read -p "What is the regular user to log into the master server: " masteruser
read -p "What is the password for the regular user for the master server: " masterpass
read -p "What is the root password for the master server: " masterrootpass

read -p "Slave server ip: " slaveip
read -p "What is the regular user to log into the slave server: " slaveuser
read -p "What is the password for the regular user for the slave server: " slavepass
read -p "What is the root password for the slave server: " slaverootpass

expect -c "set slaveip $slaveip;\
set slaveuser $slaveuser;\
set slavepass $slavepass;\
set timeout -1;\
spawn /usr/bin/ssh $slaveip -l $slaveuser 'ls -lart';\
match_max 100000;
expect *password:;\
send -- $slavepass\r;\
interact;" 
```

这是脚本的输出...

```
[root@mysql1 ~]# ./mysql_repl.sh
Master server ip:
What is the regular user to log into the master server:
What is the password for the regular user for the master server:
What is the root password for the master server:
Slave server ip: xxx.xxx.xxx.xxx
What is the regular user to log into the slave server: rack
What is the password for the regular user for the slave server: test
What is the root password for the slave server: DVJrPey99grJ
spawn /usr/bin/ssh 198.61.221.179 -l rack 'ls -lart'
rack@198.61.221.179's password:
bash: ls -lart: command not found 
```

该命令未正确执行。我也试过 /bin/ls 还是找不到。

第二部分...相同的脚本...

我在 bash 中有一个变量，特别是密码。在这种情况下，密码是“as$5!@?” 我想要做的是遍历每个字符，测试它是否是一个特殊字符并逃脱它。那么例如...

```
pass=as$5!@? 
```

到目前为止我所拥有的很接近但不适用于特殊字符，它适用于非特殊字符......

```
echo -n $pass | while read -n 1 c; do [[ "$c" = [!@#$%^&*().] ]] && echo -n "\\"; echo -n $c; done 
```

有人对如何在每个特殊字符之前添加 \ 有想法吗？

希望能解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T05:44:48.810

在您的最后一个行块中，尝试在每个需要转义的特殊字符之前手动添加一个 \。这应该不是很多工作。

此外，使用 == 进行相等检查，即：

```
echo -n $pass | while read -n 1 c; do [[ "$c" == [!@#$%^&*().] ]] && echo -n "\\"; echo -n $c; done 
```

# java - 如何在 Java 中生成共享相同哈希码的字符串？

> ID：12925988
> 
> 赞同：16
> 
> 时间：2012-10-17T01:51:49.227
> 
> 标签：java, string, hashcode

一个用 Java 编写的现有系统使用字符串的哈希码作为负载平衡的路由策略。

现在，我**无法修改系统**，但需要生成共享相同哈希码的字符串来测试最坏的情况。

我从命令行提供这些字符串，并希望系统将所有这些字符串路由到同一个目的地。

是否可以生成大量共享相同哈希码的字符串？

为了明确这个问题：

```
String[] getStringsInSameHashCode(int number){
    //return an array in length "number"
    //Every element of the array share the same hashcode. 
    //The element should be different from each other
} 
```

备注：任何 hashCode 值都是可以接受的。字符串是什么没有限制。但它们应该彼此不同。

编辑： String 类的重写方法是不可接受的，因为我从命令行输入这些字符串。

仪表也是不可接受的，因为这会对系统产生一些影响。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-17T02:36:59.380

看个测试方法，基本上只要匹配，a1*31+b1 = a2*31 +b2，意思是(a1-a2)*31=b2-b1

```
public void testHash()
{
    System.out.println("A:" + ((int)'A'));
    System.out.println("B:" + ((int)'B'));
    System.out.println("a:" + ((int)'a'));

    System.out.println(hash("Aa".hashCode()));
    System.out.println(hash("BB".hashCode()));
    System.out.println(hash("Aa".hashCode()));
    System.out.println(hash("BB".hashCode()));

    System.out.println(hash("AaAa".hashCode()));
    System.out.println(hash("BBBB".hashCode()));
    System.out.println(hash("AaBB".hashCode()));
    System.out.println(hash("BBAa".hashCode()));

} 
```

你会得到

```
A:65
B:66
a:97
2260
2260
2260
2260
2019172
2019172
2019172
2019172 
```

**编辑：有人说这不够简单。我在下面添加了部分**

```
 @Test
    public void testN() throws Exception {
        List<String> l = HashCUtil.generateN(3);
        for(int i = 0; i < l.size(); ++i){
            System.out.println(l.get(i) + "---" + l.get(i).hashCode());
        }
    }
AaAaAa---1952508096
AaAaBB---1952508096
AaBBAa---1952508096
AaBBBB---1952508096
BBAaAa---1952508096
BBAaBB---1952508096
BBBBAa---1952508096
BBBBBB---1952508096 
```

以下是源代码，它可能效率不高，但它可以工作：

```
public class HashCUtil {

    private static String[] base = new String[] {"Aa", "BB"};

    public static List<String> generateN(int n)
    {
        if(n <= 0)
        {
            return null;
        }

        List<String> list = generateOne(null);
        for(int i = 1; i < n; ++i)
        {
            list = generateOne(list);
        }

        return list;
    }

    public static List<String> generateOne(List<String> strList)
    {   
        if((null == strList) || (0 == strList.size()))
        {
            strList = new ArrayList<String>();
            for(int i = 0; i < base.length; ++i)
            {
                strList.add(base[i]);
            }

            return strList;
        }

        List<String> result = new ArrayList<String>();

        for(int i = 0; i < base.length; ++i)
        {
            for(String str: strList)
            {   
                result.add(base[i]  + str);
            }
        }

        return result;      
    }
} 
```

看看 String.hashCode()

```
 public int hashCode() {
    int h = hash;
    if (h == 0) {
        int off = offset;
        char val[] = value;
        int len = count;

            for (int i = 0; i < len; i++) {
                h = 31*h + val[off++];
            }
            hash = h;
        }
        return h;
    } 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-17T02:48:13.233

我认为从长字符串中找到等哈希字符串太难了，找到短字符串（2或3）的等哈希字符串很容易。看看下面的等式。（对不起，我不能发布图像，因为我是新成员）

请注意，“FB”和“Ea”具有相同的哈希码，任何两个字符串，如 s1+“FB”+s2 和 s1+“Ea”+s2 将具有相同的哈希码。因此，简单的解决方案是找到现有字符串的任何 2 字符子字符串，并用具有相同哈希码的 2 字符子字符串替换

**例如，我们有字符串 "helloworld"** 得到 2 个字符的子字符串 "he"，hashcode("he") = 'h'*31 + 'e' = ('h'*31 + 31) + ('e' - 31) = ('h'+1)*31 + 'F' = 'i' + 'F' = hashcode("iF") 所以想要的字符串是 "iFlloworld" 我们将 'h' 增加了 1，我们可以增加 2 或 3 等（但如果溢出 char 值会出错）

下面的代码在小级别运行良好，如果级别大会出错，使 char 值溢出，如果你愿意，我稍后会修复它（此代码更改 2 个第一个字符，但我会将代码编辑为 2 个最后一个字符，因为2个第一个字符是最大值的calc）

```
 public static String samehash(String s, int level) {
    if (s.length() < 2)
        return s;
    String sub2 = s.substring(0, 2);
    char c0 = sub2.charAt(0);
    char c1 = sub2.charAt(1);
    c0 = (char) (c0 + level);
    c1 = (char) (c1 - 31 * level);
    String newsub2 = new String(new char[] { c0, c1 });
    String re =  newsub2 + s.substring(2);
    return re;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T03:15:20.897

我想知道是否有“通用”解决方案；例如一些常量字符串`XYZ`，这样

```
 s.hashCode() == (s + XYZ).hashCode() 
```

对于任何字符串`s`。找到这样一个字符串需要求解一个相当复杂的方程……这超出了我生疏的数学能力。但后来我突然意识到`h == 31*h + ch`，总是`true`什么时候`h`都`ch`为零！

基于这种见解，下面的方法应该创建一个不同的字符串，它的参数具有相同的哈希码：

```
 public String collider(String s) { 
        return "\0" + s;
    } 
```

如果 NUL 字符对您来说有问题，那么添加*任何*哈希码为零的字符串也可以工作......尽管冲突的字符串会比您使用零时更长。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-07-22T08:52:14.263

给定字符串 X，那么 String Y = "\u0096\0\0ɪ\0ˬ" + X 将与 X 共享相同的哈希码。

解释：

1.  String.hashcode() 返回 Integer，Java 中的每个 Integer X 都具有 X = X + 2 * (Integer.MAX_VALUE + 1) 的属性。这里，Integer.MAX_VALUE = 2 ^ 31 - 1；

2.  所以我们只需要找到String M，它的性质是M的hashcode % (2 * (Integer.MAX_VALUE + 1)) = 0;

3.  我发现“\u0096\0\0ɪ\0ˬ”：\u0096的ascii码是150，\0的ascii码是0，ɪ的ascii码是618，ˬ的ascii码是748，所以它的hashcode是150 * 31 ^ 5 + 618 * 31 ^ 2 + 748 = 2 ^ 32 = 0；

这取决于你想要哪个字符串，我选择这个。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-17T02:08:34.647

您可以检测 java.lang.String 类，因此其方法 hashCode() 将始终返回相同的数字。

我想 Javassist 是进行这种检测的最简单方法。

简而言之：

*   通过使用 Java 代理获取 java.lang.instrument.Instrumentation 的实例（有关详细信息，请参阅[包 java.lang.instrument 文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/instrument/package-summary.html)）
*   使用 Instrumentation.redefineClasses(ClassDefinition[]) 方法重新定义 java.lang.String 类

代码看起来像（大致）：

```
ClassPool classPool = new ClassPool(true);
CtClass stringClass = classPool.get("java.lang.String");
CtMethod hashCodeMethod = stringClass.getDeclaredMethod("hashCode", null);
hashCodeMethod.setBody("{return 0;}");
byte[] bytes = stringClass.toBytecode();
ClassDefinition[] classDefinitions = new ClassDefinition[] {new ClassDefinition(String.class, bytes);
instrumentation.redefineClasses(classDefinitions);// this instrumentation can be obtained via Java-agent 
```

也不要忘记代理清单文件必须指定`Can-Redefine-Classes: true`才能使用 redefineClasses(ClassDefinition[]) 方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-17T02:04:07.420

```
String s = "Some String"
for (int i = 0; i < SOME_VERY_BIG_NUMBER; ++i) {
    String copy = new String(s);

    // Do something with copy.
} 
```

这对你有用吗？它只是创建了许多相同字符串文字的副本，然后您可以在测试中使用这些副本。

# c - GCC - 仅在特定功能上启用编译器标志

> ID：12925989
> 
> 赞同：5
> 
> 时间：2012-10-17T01:51:53.767
> 
> 标签：c, gcc

在我正在处理的一个项目中，我正在尝试优化的一个大文件中有一个四重嵌套的 for 循环，我认为这会受益于使用 -funroll-all-loops 展开的编译器。但是，当我将此标志添加到编译器时，它会将其他循环展开到文件的其余部分，并使整个程序运行得更慢。有没有办法（可能通过#pragma）将编译器标志仅应用于文件中的某些函数而不是整个文件？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T02:11:32.360

GCC[函数属性](http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html#Function-Attributes) `optimize`可用于为单个函数设置优化选项：

```
void foo(int bar) __attribute__((optimize ("unroll-all-loops")))
{
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T01:55:53.993

我建议将该特定函数移动到一个单独的 .c 文件中，该文件可以使用您想要使用的额外选项进行编译。这可能需要创建一个“foo_private.h”样式的头文件以在现有的 .c 文件和新的文件之间共享，从而允许它们共享在原始 .c 文件中声明为静态的任何变量

# python - 为python安装一个库

> ID：12925991
> 
> 赞同：3
> 
> 时间：2012-10-17T01:52:08.170
> 
> 标签：python, installation

我正在尝试为 python 的基因本体编程 [GOGrapher] 安装一个库。在他们告诉我的页面中：

```
$ `svn co https://projects.dbbe.musc.edu/public/GOGrapher/trunk GOGrapher`
$ cd GOGrapher
$ su -
# python setup.py install 
```

我做了一切，但在最后一步出现错误

```
error: /usr/local/lib/python2.7/dist-packages/GOGrapher-0.0.egg-info: Permission denied 
```

怎么了？我是新手，但我尽我所能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T02:12:30.630

尝试

```
sudo python setup.py install 
```

反而。（适用于 Mac OS 10.7.3，而建议的`su -`解决方案不适用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T02:12:43.147

在文件系统中以超级用户身份安装东西不是一个好主意。在 Python 中，您始终可以在本地安装库。

假设您已经在 GOGrapher 目录中：

```
$ python setup.py install --home 
```

应该将库安装在您的主目录中。稍后，您必须将库 PATH 添加到 PYTHONPATH 环境变量中，以便 Python 知道在哪里搜索它。

```
$ export PYTHONPATH=$HOME/lib/python 
```

目录可能略有不同（lib/python2.7 甚至是 lib/python2.7/site-packages），你可以检查一下，强硬。

要使其永久化，您应该将其添加到您的 .profile、.bashrc 或您正在使用的任何 shell 中。

# iphone - 从另一个 .m 文件调用这个 -(void)

> ID：12925996
> 
> 赞同：-1
> 
> 时间：2012-10-17T01:53:32.443
> 
> 标签：iphone, objective-c, ios

如何从另一个 .m 文件中调用它`-(void){}`（*函数、方法？抱歉，我忘记了术语）？*

我也希望能够像这样在本地 .m 文件中调用它`[self closeMenu];`

这是`-(void){}`：

```
-(void)closeMenu{

//close the menu

[UIView animateWithDuration:0.6 animations:^{

    [UIView setAnimationBeginsFromCurrentState:YES]; // so it doesn't cut randomly, begins from where it is

    [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];

    [menuView setFrame:CGRectMake(menuView.frame.origin.x, -menuView.frame.size.height, menuView.frame.size.width, menuView.frame.size.height)];

}];

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T02:08:13.710

您必须在具有接口的 .h 文件中声明该方法。

在 YourClass.h

```
@interface YourClass:NSObject
- (void)closeMenu;
@end 
```

在 YourClass.m 中

```
@implementation YourClass
- (void)closeMenu
{
    //Close the menu
}
@end 
```

`#import "YourClass.h"`然后，您必须在要从中调用此方法的其他文件中导入 ( )。

```
#import "YourClass.h"

@implementation OtherClass
- (void)otherMethod
{
    YourClass *foo = [[YourClass alloc] init];
    [foo closeMenu];
}
@end 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-17T02:13:12.173

似乎您正在谈论某种控制器方法来折叠某种 menuView，并且看起来这是一个您希望与应用程序的其余部分共享的全局 menuView。

每当我有“共享”小部件时，我都会为它们使用管理器。

你能描述一下你所说的那种架构吗？

因为我想到的最肮脏的“Apple 示例代码”方法是在 App 委托中保留对这个婴儿的引用，并且从您的 App 中的任何地方您都可以这样做：

```
MyDelegate * delegate= (MyDelegate)[UIApplication sharedApplication] delegate];
[delegate.myCoolMenuController closeMenu]; 
```

希望这对你有用。

干杯

# sorting - 计算附加到堆和合并排序的渐近复杂度的常数

> ID：12925999
> 
> 赞同：0
> 
> 时间：2012-10-17T01:54:19.900
> 
> 标签：sorting, runtime, heap, constants, big-o

我编写了合并和堆排序并计算了运行时复杂度，我想现在从我收集的数据中找到用于合并和堆排序的常数 c (c*(n*lg(n)))。以下是元素数（n）与运行时间（秒）的两个图表公式（来自excel），我将如何计算c常数？任何帮助将不胜感激！谢谢你。

堆：y = 5E-12x2 + 2E-05x - 0.0561

合并：y = 9E-10x2 - 9E-05x + 2.0958

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T02:08:05.343

您给出的公式是 f( *n* ) = *an* ² + *bn* + *c*形式的多项式，具有常数*a*、*b*和*c*。这些不会帮助你。

您需要将 f( *n* ) = *an* lg( *n* ) + *bn* + *c*形式的方程拟合到您的数据中。不是多项式，而是一个包含*n* lg( *n* ) 项的方程。该术语的系数是您被要求的。线性 ( *b* ) 和常数 ( *c* ) 项无关紧要。*只是n* lg( *n* ) 项上的常数，因为它增长最快。