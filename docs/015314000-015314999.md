# StackOverflow 问答 15314000-15314999

# c - 如何遍历C中的哈希表

> ID：15314000
> 
> 赞同：3
> 
> 时间：2013-03-09T17:57:17.410
> 
> 标签：c, hashtable

编辑：我添加了所有文件（.c、.h 和 Makefile）。该程序有效，但有许多内存泄漏。

[http://dl.dropbox.com/u/21926200/Ngrams.tar.gz](http://dl.dropbox.com/u/21926200/Ngrams.tar.gz)

你如何遍历一个哈希表来调用 free()？我想知道是否需要创建一个单独的函数来在 htable 和结果上调用 free() 或者我可以在这段代码中执行它。有任何想法吗？我只需要在 htable 和结果上调用 free()。

```
h_ptr *htable;
int tsize;

void new_table(int size)
{
    tsize = size;
    htable = (h_ptr *) calloc(size, sizeof(h_ptr));
    if (!htable) {
    fprintf(stderr, "Couldn't allocate hash array, exiting\n");
    exit(1);
    }

    // At the beginning, each element in the hash table
    // is a NULL pointer
    for(int i=0; i<size; i++)
      {
    htable[i]=NULL;
      }
}

// Allocate new element to store in hash table
h_ptr new_element(char *s)
{
    h_ptr result = (h_ptr) malloc(sizeof(h_rec));
    int wlen = strlen(s);
    if (wlen > llen) {
    lstring = s;
    llen = wlen;
    lcnt = 1;
    } else if (wlen == llen)
    lcnt++;
    if (!result) {
    fprintf(stderr, "Couldn't allocate hash element, exiting\n");
    exit(1);
    }

    result->word = s;
    result->freq = 1;
    result->next = NULL; 
    return result;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T18:21:19.057

### 在提供“整个程序”之前

给定`new_element()`函数中的信息：

```
result->word = s;
result->freq = 1;
result->next = NULL; 
```

我们必须推断（因为您没有包含实际信息）您的哈希表是一个数组，其中元素是单独分配的元素的链接列表，其中包含分配的名称、频率和指向下一项的指针。因此，释放哈希表涉及依次访问数组的每个元素、逐个查找链表、释放名称和元素。

```
void free_hashtable(void)
{
    if (htable != 0)
    {
        for (int i = 0; i < tsize; i++)
        {
            h_ptr next = 0;
            for (h_ptr curr = htable[i]; curr != 0; curr = next)
            {
                next = curr->next;
                free(curr->word);
                free(curr);
            }
        }
        free(htable);
        htable = 0;
        tsize = 0;
    }
} 
```

* * *

### 在提供“整个程序”之后

我们仍然没有数据结构，所以我们仍然不能真正说出发生了什么。因此，我们可以将其添加到代码的顶部：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

typedef struct hash_table_entry
{
    int freq;
    struct hash_table_entry *next;
    char *word;
} *h_ptr; 
```

但是，当我们添加它时出现的一个问题是：

```
 h_ptr result = (h_ptr) malloc(sizeof(h_rec)); 
```

编译器说：

```
error: 'h_rec' undeclared (first use in this function) 
```

识别那条线。现在，可能是您有一些 typedef，例如：

```
typedef struct hash_table_entry h_rec; 
```

但我们不应该猜测。请创建一个 SSCCE（[简短、独立、正确的示例](http://sscce.org/)），这样我们就不必猜测了。

我使用以下代码编译代码：

```
gcc -O3 -g -std=c99 -Wall -Wextra -Wmissing-prototypes -Wstrict-prototypes -Wold-style-definition ht.c -o ht 
```

编译器警告我：

```
ht.c:27:6: warning: no previous prototype for ‘lowercase’ [-Wmissing-prototypes]
ht.c:41:6: warning: no previous prototype for ‘new_table’ [-Wmissing-prototypes]
ht.c:59:7: warning: no previous prototype for ‘new_element’ [-Wmissing-prototypes]
ht.c:82:10: warning: no previous prototype for ‘hash_function’ [-Wmissing-prototypes]
ht.c:103:7: warning: no previous prototype for ‘save_string’ [-Wmissing-prototypes]
ht.c:116:7: warning: no previous prototype for ‘find_element’ [-Wmissing-prototypes]
ht.c:142:7: warning: no previous prototype for ‘sort_words’ [-Wmissing-prototypes]
ht.c:176:6: warning: no previous prototype for ‘insert_string’ [-Wmissing-prototypes]
ht.c:191:6: warning: no previous prototype for ‘init_token’ [-Wmissing-prototypes]
ht.c:201:7: warning: no previous prototype for ‘get_word’ [-Wmissing-prototypes]
ht.c:224:7: warning: no previous prototype for ‘get_token’ [-Wmissing-prototypes]
ht.c:276:6: warning: no previous prototype for ‘word_freq’ [-Wmissing-prototypes]
ht.c: In function ‘main’:
ht.c:322:5: warning: implicit declaration of function ‘add_string_option’ [-Wimplicit-function-declaration]
ht.c:323:5: warning: implicit declaration of function ‘add_int_option’ [-Wimplicit-function-declaration]
ht.c:328:5: warning: implicit declaration of function ‘parse_options’ [-Wimplicit-function-declaration]
ht.c:329:5: warning: implicit declaration of function ‘show_options’ [-Wimplicit-function-declaration] 
```

对于最后四个名称，链接器无法找到它们。我们需要不使用不可用代码的代码。将您的代码简化为 SSCCE（注意*自包含*！）。

我已经删除了对这些函数的调用并相应地简化了 main 。当在自己的源 ( `./ht < ht.c`) 上运行时，它会产生：

```
N-gram size 1
Running analysis... (This can take several minutes or more!)
 Initializing hash table...
 Inserting all n-grams into hash table in lowercase form...
 Sorting all hash table elements according to frequency...

Analysis Details:
(Top 10 list of n-grams)
82  '='
30  'int'
27  '0'
23  'if'
23  'char'
22  's'
16  '1'
16  'i'
14  'ls'
14  'h_ptr'

Analysis Summary:
817 total n-grams
211 unique n-grams
94 singleton n-grams (occur only once)
Most common n-gram (with 82 occurrences) is '='
Longest n-gram (1 have length 16) is 'hash_table_entry'
Total time = 0.002225 seconds 
```

看起来不错......但是运行优化的构建`valgrind`并出现另一个故事......但我已经得出结论，问题出`strlen()`在我正在使用的特定版本的 GCC 的优化实现中（部分原因是，在相同的代码上使用不同版本的 GCC 会使错误消失，并且因为错误发生在`strlen()`没有业务的调用中，从偏移量 4 开始读取 4 个字节，分配 5 个字节）。

我添加了一个功能`print_hashtable()`。我认为对于几乎所有重要的结构，都值得拥有像这样的“打印”或“转储”功能。

```
static void print_hashtable(FILE *fp, const char *tag)
{
    fprintf(fp, "Print hash table: %s\n", tag);
    fprintf(fp, "Size = %d; Address: %p\n", tsize, htable);
    if (htable != 0)
    {
        for (int i = 0; i < tsize; i++)
        {
            printf("Entry %d (%p)\n", i, htable[i]);
            h_ptr next = 0;
            for (h_ptr curr = htable[i]; curr != 0; curr = next)
            {
                next = curr->next;
                printf("Word: %s (freq %d; next %p)\n", curr->word, curr->freq, next);
            }
        }
    }
} 
```

我之前插入了一个对此的调用`sort_words()`。这表明，尽管散列算法不是非常有效，但数据结构是完整的。

我还插入了对`print_hashtable()`after的调用`sort_words()`，这表明哈希表已被排序过程全面破坏。排序阶段将哈希表消除为哈希表；唯一要做的就是释放整个表 ( `free(htable)`)。释放所有表条目必须在函数的底部完成`word_freq()`：

```
static void free_hashlist(h_ptr head)
{
    while (head != 0)
    {
        h_ptr next = head->next;
        printf("Free: %d (%s) %p -> %p\n", head->freq, head->word, (void *)head, (void *)next);
        free(head->word);
        free(head);
        head = next;
    }
}

static void word_freq(FILE *src, int details, int size)
{
    char *s;
    h_ptr list_head, ptr;

    printf(" Initializing hash table...\n");
    init_token(src);
    new_table(size);

    printf(" Inserting all n-grams into hash table in lowercase form...\n");
    while ((s = get_word()))
        insert_string(s);

    print_hashtable(stdout, "After reading data");

    printf(" Sorting all hash table elements according to frequency...\n");
    list_head = sort_words();

    if (details > 0)
    {
        printf("\nAnalysis Details:\n(Top %i list of n-grams)\n", details);
        ptr = list_head;
        while (ptr && details--)
        {
            printf("%d\t'%s'\n", ptr->freq, ptr->word);
            ptr = ptr->next;
        }
    }

    printf("\nAnalysis Summary:\n");
    printf("%d total n-grams\n", wcnt);
    printf("%d unique n-grams\n", ucnt);
    printf("%d singleton n-grams (occur only once)\n", scnt);
    printf("Most common n-gram (with %d occurrences) is '%s'\nLongest n-gram (%d have length %d) is '%s'\n",
            mcnt, mstring, lcnt, llen, lstring);

    free_hashlist(list_head);
} 
```

并且 free_hashtable() 代码必须简化：

```
static void free_hashtable(void)
{
    if (htable != 0)
    {
        free(htable);
        htable = 0;
        lcnt = 0;
        lstring = 0;
        mcnt = 0;
        mstring = 0;
        scnt = 0;
        tsize = 0;
        wcnt = 0;
        ucnt = 0;
    }
}

int main(void)
{
    printf("\nRunning analysis... (This can take several minutes or more!)\n");
    word_freq(stdin, 10, 1024);
    printf("Total time = %f seconds\n", (double) clock() / CLOCKS_PER_SEC);
    free_hashtable();
    return 0;
} 
```

在这个程序中，将指针和计数重置为空/零并不重要。此外，`lstring`and`mstring`指针被 无效`free_hashlist()`，因此可以说那些应该在该函数中清零/归零。

这对我来说是无泄漏的，最后只有系统分配的内存仍在使用中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T17:59:52.497

首先，您不需要`htable[i]`在分配后`htable`清除每个人`calloc`（因为`calloc`给您一个清除的内存区域或失败）。我建议`calloc`也使用 in `new_element`for `result`。

然后，您可能希望有一些功能来删除您的`htable`. 就像是

```
void delete_htable(void) {      
  if (!htable) return;
  for (int i=0; i<tsize; i++)
    free (htable[i]);
  free (htable);
  htable = NULL;
} 
```

请记住，您可以`free`使用`NULL`指针（不会发生任何有害的事情）。

你可能想`delete_htable`在你之前打电话`exit`（只是为了避免内存泄漏，让[valgrind](http://valgrind.org/)高兴）。

最后，您可能会考虑在现有库中使用现有的散列函数。[以Glib](https://developer.gnome.org/glib/stable/)为例（在 GTk 中，但您可以在任何 GTK 应用程序之外使用*Glib ）。*它已经为您提供了[哈希表](https://developer.gnome.org/glib/stable/glib-Hash-Tables.html)（并且鉴于这些经常使用，您可能对它们充满信心）。不要忘记 GTK（因此是 Glib）是[LGPL2.1 许可](http://www.gnu.org/licenses/lgpl-2.1.html)下的[免费软件库](http://www.gtk.org/overview.php)，因此您可以下载其[源代码](https://git.gnome.org/browse/glib)，学习和改进它。您想查看[glib/ghash.h](https://git.gnome.org/browse/glib/tree/glib/ghash.h)头文件和[glib/ghash.c](https://git.gnome.org/browse/glib/tree/glib/ghash.c)代码源文件（以及其他一些文件）。

# php - PHP 类：我应该使用 2 个类还是 1 个？

> ID：15314003
> 
> 赞同：0
> 
> 时间：2013-03-09T17:57:51.440
> 
> 标签：php, class, drupal

我目前正在尝试制作一个处理 PHP (Drupal) 调查的类。到目前为止，我有这个：

```
class Survey{

  public $id;
  public $uid;
  public $rate;
  public $reason;
  public $complete;
  public $opinion;

  public function save(){
    drupal_write_record('survey', $this);
  }
} 
```

太好了，我可以创建一个新的 Survey 实例，设置属性，然后调用 save 方法。

但是，我也希望能够拥有从数据库中检索这些调查结果并对其采取行动的方法，从而为我提供各种数字。在课堂上使用这些方法感觉不对`Survey`，因为它们实际上是多个*调查*。但是它们是相关的，并且也可能返回`Survey`不确定它们是否应该是一个完全独立的类的实例。在这里做的最好的事情是什么？

顺便说一句，我不在乎它是否是 Drupally 的答案。

谢谢， 阿姆沙德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T21:35:42.013

与任何事情一样，有许多方法各有优缺点。

我的（当前）偏好是结合类方法（静态）和对象方法来分别处理对象组和单个对象。

考虑以下代码：

```
class Survey {
    public $id;
    public $uid;
    public $rate;
    public $reason;
    public $complete;
    public $opinion;

    public function save()
    {
        drupal_write_record('survey', $this);
    }
    /**
     * Loads survey from secondary storage
     * 
     * @param string $id Unique surevy ID
     */
    public function load( $id ) {
        // loads a survey from secondary storage
    }
    /**
     * Returns report of survey results.
     * 
     * @param array $surveys array of surveys to process. If not passed or NULL,
     *     The whole set of completed surveys will be processed.
     * @return string HTML Formatted report
     */
    public static function compile_results( $surveys = NULL )
    {
        if( empty( $surveys ) )
        {
            $surveys = self::get_completed_results();
        }
        foreach( $surveys as &$survey )
        {
            // process an individual survey, possibly aggregating it
        } 
    }
    /**
     * Retreives completed surveys from secondary storage.
     * 
     * @return array  Array of completed Survey objects
     */
    public static function get_completed_surveys()
    {
        $surveys = array();
        // Select all surveys from secondary storage
        $survey_rows = array(); //replace with code to get surveys
        foreach( $survey_rows as $survey_row )
        {
            $survey = new Survey();
            $survey['id']       = $survey_row['id'];
            $survey['uid']      = $survey_row['uid'];
            $survey['rate']     = $survey_row['rate'];
            $survey['reason']   = $survey_row['reason'];
            $survey['complete'] = $survey_row['complete'];
            $survey['opinion']  = $survey_row['opinion'];

            $surveys[] = $survey;
        }
        return $surveys;
    } 
} 
```

您可以使用静态方法来处理对象组。您甚至可以有一个静态数组来保存对每个加载的调查的引用。

另一种选择是有一个“调查”类，其目的是处理调查组。以前的方法对我来说感觉更干净。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T19:12:02.343

使用单个类来保存数据库逻辑和业务逻辑违反了[关注点分离](https://en.wikipedia.org/wiki/Separation_of_concerns)原则。我将使用分离的接口和类，比如说`SurveyRepository`（接口）和`DrupalSurveyRepository`（使用 Drupal DB 层的接口实现）来管理调查持久性（即读取和写入数据库）。这将简化（单元）测试，因为当与一些依赖注入结合以提供接口的模拟实现时，您将能够在没有数据库连接的情况下使用与调查相关的代码`SurveyRepository`。

[对于 Drupal 7+ 项目，我会考虑在实体 API 模块](http://drupal.org/project/entity)的帮助下将调查设为实体类型（请参阅[https://drupal.org/node/1261744](https://drupal.org/node/1261744) ） 。然后可以使用 搜索调查，而可以使用现有的和功能进行加载和保存。[`EntityFieldQuery`](http://api.drupal.org/EntityFieldQuery)[`entity_load()`](http://api.drupal.org/api/drupal/includes!common.inc/function/entity_load/7)[`entity_save()`](http://drupalcontrib.org/api/function/entity_save/7)

# css - 检测悬停在背景图像上

> ID：15314004
> 
> 赞同：0
> 
> 时间：2013-03-09T17:57:54.680
> 
> 标签：css, hover

我有一个输入文本。我添加了一个小于输入元素的背景图像。当我只将鼠标悬停在图像上时，我想更改图像。

这是我的CSS：

```
#inputBox2{
    top:45%;
    background-image:url(".\\Images\\arrow.png");
    background-repeat: no-repeat;
    background-size: 14% 100%;
    background-position: right;
} 
```

**编辑：**我正在尝试这样做：![在此处输入图像描述](../Images/b682d8d4391c723ea7a4ece9ceb8d56c.png)

当我将鼠标悬停在箭头上时，我希望它改变颜色，当我点击它时，它应该提交

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T18:16:06.517

您不能将 css`:hover`用于元素的一部分。所以基本上，不，你不能做你想做的事。至少不是你想要的方式。

但是，您可以通过使用样式`submit`按钮来实现相同的效果。当用户单击输入文本框背景中的图像时，为什么要提交表单？这在语义上是错误的。

`<label>`对“密码”标签使用标签`<input type="password"/>`，对密码输入使用`<input type="submit"/>`标签，对提交按钮使用标签。然后，您可以使用 CSS 设置提交按钮的样式以达到所需的效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T18:20:04.487

您需要一个单独的内联元素（或浮动块元素），其背景图像设置为箭头。然后你可以在那个元素上使用 :hover 。

（或者这个元素可能只是一个`<image>`元素，具有悬停属性。）

# c++ - Qt4 不能用 CMake 编译

> ID：15314006
> 
> 赞同：6
> 
> 时间：2013-03-09T17:58:23.967
> 
> 标签：c++, ubuntu, qt4, cmake

我现在在 Linux 下使用 KDevelop for C++，我想编译一个 Qt4 应用程序，但是当我这样做时，它给了我以下错误：

我编译：

```
cmake -DCMAKE_INSTALL_PREFIX=/usr/local -DCMAKE_BUILD_TYPE=Debug /home/myname/projects/First Qt projet/ 
```

这些是错误：

```
-- Configuring incomplete, errors occurred!
CMake Error at /usr/share/cmake-2.8/Modules/FindPackageHandleStandardArgs.cmake:97 (MESSAGE):
  Could NOT find Qt4 (missing: QT_QMAKE_EXECUTABLE QT_MOC_EXECUTABLE
  QT_RCC_EXECUTABLE QT_UIC_EXECUTABLE QT_INCLUDE_DIR QT_LIBRARY_DIR
  QT_QTCORE_LIBRARY)
Call Stack (most recent call first):
  /usr/share/cmake-2.8/Modules/FindPackageHandleStandardArgs.cmake:288 (_FPHSA_FAILURE_MESSAGE)
  /usr/share/cmake-2.8/Modules/FindQt4.cmake:1200 (FIND_PACKAGE_HANDLE_STANDARD_ARGS)
  CMakeLists.txt:3 (find_package) 
```

我应该怎么办 ？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-09T21:54:11.470

```
sudo apt-get install libqt4-core libqt4-dev libqt4-gui qt4-dev-tools 
```

这应该为您安装 qt4：/usr/lib64/qt... 从那里`cmake`应该能够为您获取 qt 的位置。

如果命令行不是你的风格，你也可以使用那个 Ubuntu 包管理器。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-02-13T03:22:20.143

不确定这是否会帮助任何人，但对于 Fedora，我遇到了以下问题：

> /usr/share/cmake/Modules/FindQt4.cmake:1386 处的 CMake 错误（消息）：从 NOTFOUND 中找到不合适的 Qt 版本“”，此代码需要 Qt 4.x 调用堆栈（最近调用优先）：bgrive/CMakeLists。 txt:3 (find_package)

在逐步完成 FindQt4.cmake 之后，我发现了这个：

```
if (NOT QT_VERSION_MAJOR EQUAL 4)
    set(VERSION_MSG "Found unsuitable Qt version \"${QTVERSION}\" from ${QT_QMAKE_EXECUTABLE}")
    set(QT4_FOUND FALSE)
    if(Qt4_FIND_REQUIRED)
       message( FATAL_ERROR "${VERSION_MSG}, this code requires Qt 4.x")
    else()
      if(NOT Qt4_FIND_QUIETLY)
         message( STATUS    "${VERSION_MSG}")
      endif()
    endif()
else()
  FIND_PACKAGE_HANDLE_STANDARD_ARGS(Qt4 FOUND_VAR Qt4_FOUND
    REQUIRED_VARS ${_QT4_FOUND_REQUIRED_VARS}
    VERSION_VAR QTVERSION
    )
endif() 
```

我知道我有 qt 4 我通过简单地解决了这个问题：

```
sudo yum install qt-devel 
```

# algorithm - 动态规划练习的递归关系

> ID：15314007
> 
> 赞同：3
> 
> 时间：2013-03-09T17:58:26.267
> 
> 标签：algorithm, language-agnostic, dynamic-programming, recurrence

我收到了一份动态规划作业，我需要帮助找出递归关系。该问题类似于加权区间问题，但它有一些额外的限制：

*   给你一系列`N`时间段，每个时间段都相同。
*   每个时隙`k`,`0 <= k < N`都被赋予一个正权重`W[k]`。
*   对于任何具有 的时间间隔`[i, j]`，该*间隔*`i < j`的权重为： 请注意，不计算第一个时隙的权重，因此任何长度间隔的权重为。`W[i,j]` *`W[i,j] = W[i+1] + W[i+2] + ... + W[j]`
    `W[i]``1``0`*

 *给您一个值`T < N`并要求您准确选择`T`时间段，以使所选时间间隔的总和最大化。

示例：对于`N = 5`和`T = 4`权重`W = (3, 9, 1, 1, 7)`，选择`W[0, 1] = 9`和`W[3, 4] = 7`将给出最大权重`16`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T18:59:46.490

这是一个很好的小问题......如果选择的最后一个插槽（最后一个范围的结尾）是 i 并且在插槽 0..i 中恰好选择了 t 个插槽，则将 S(i, t) 定义为可能的最大权重。

DP 决定是我们要么将 w[i] 添加到 S(i, t) 中，要么不添加，因为要么选择了插槽 i-1，要么没有选择。所以我们有：

```
S(i, t) = max ( S(i-1, t-1) + w[i], S(j, t-1) for j = t-2..i-2 ) 
```

t-1>i 的情况是没有意义的。所以基本情况是 S(i, 1) = 0 for 0 <= i < N，并且 DP 表的连续列 (t = 2,...,T) 每列都比最后一列短。所需的答案是 max ( S(j, T) for j = T-1..N-1 )

令人高兴的是，您可以安排计算，以便增量计算最大值，运行时间为 O(NT)，空间为 O(N)

制定您的示例，DP 表如下所示：

```
 t = 
         1    2    3    4
       ------------------
i = 0 |  0
    1 |  0    9   
    2 |  0    1   10
    3 |  0    1    9   11
    4 |  0    7    9   16 
```

答案是 max(11, 16) = 16*

# javascript - 当鼠标朝向或位于文档的顶部中心时运行 jQuery

> ID：15314008
> 
> 赞同：2
> 
> 时间：2013-03-09T17:58:26.907
> 
> 标签：javascript, jquery

当鼠标垂直位于文档顶部并且水平位于文档中心时，有没有办法执行功能？

当鼠标接近顶部中心时执行那个js代码/函数怎么样？

以下是我的想法（在 jQuery 和 vanilla js 中），但如果有更好的方法，请分享：

```
$(document).mousemove(
    function(e){
        if((e.pageY=0) && (e.pageX=)){
            //run function
        }
    }
} 
```

我在条件中留下 e.pageX 应该等于的原因是我不知道如何做 50% 或中间。

另外，我相信，只有当鼠标正好位于顶部和中心时，它才会运行该功能。

有谁知道随着鼠标接近顶部中心逐渐执行它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T18:10:50.993

这是我刚刚想到的超级简单的解决方案。在 HTML 中放一个空`div`，正确定位，用 使其不可见`opacity: 0`，然后监听`mouseover`事件：

```
<div class="detector"></div> 
```

CSS：

```
.detector {
    position: absolute; // or fixed, depending on needed behaviour
    top: 10px;
    left: 50%;
    height: 20px;
    width: 20px;
    margin-left: -10px;
    opacity: 0;
} 
```

JS：

```
$('.detector').mouseover(function() {
    alert('Mousemove detected!');
}); 
```

[http://jsfiddle.net/MhPp8/](http://jsfiddle.net/MhPp8/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T18:19:58.560

你可以试试下面的代码。请记住，如果您不希望浏览器窗口调整大小，则可以分配`$(window).width()/2`给绑定之外的变量`mousemove`，以避免在每次更新时查找窗口宽度。需要使用`Math.floor`or`Math.ceil`来向下/向上舍入计算的水平中心以避免小数。

示例 1（水平中心是动态的。它总是会在鼠标移动时重新计算）：

```
$(document).on('mousemove',function(e){
    if((e.pageY==0) && (e.pageX==Math.floor($(window).width()/2))){
        //run function
    }
}); 
```

示例2（水平中心保持不变，即执行时的计算值）：

```
var hCenter = Math.floor($(window).width()/2);
$(document).on('mousemove',function(e){
    if((e.pageY==0) && (e.pageX==hCenter)){
        //run function
    }
}); 
```

示例 3（在窗口调整大小时更新 hCenter）：

```
// calculate horizontal center at page load
var hCenter = Math.floor($(window).width()/2);

// update hCenter every time the window is resized
$(window).resize(function(){
    hCenter = Math.floor($(window).width()/2);
});

$(document).on('mousemove',function(e){
    if((e.pageY==0) && (e.pageX==hCenter)){
        //run function
    }
}); 
```

# c++ - 简单 C++ 程序中的错误

> ID：15314009
> 
> 赞同：-4
> 
> 时间：2013-03-09T17:58:32.513
> 
> 标签：c++, ubuntu-12.04

这是代码，如果有什么问题请帮助我。

```
#include <iostream>

int main() {
    char ch = 'A';
    int num = ch;
    cout << "The ASCII code for " << ch << "is " << num << "\n";
    cout << "Adding 1 to the character code : \n";
    ch = ch + 1;
    num = ch;
    cout << "The ASCII code for " << ch << "is " << num << "\n";
    return (0);
} 
```

我得到像这样的错误

```
ex1.cpp: In function ‘int main()’:
ex1.cpp:6:5: error: ‘cout’ was not declared in this scope
ex1.cpp:6:5: note: suggested alternative:
/usr/include/c++/4.6/iostream:62:18: note:   ‘std::cout’ 
```

各位大侠请指正我的错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T18:00:58.300

问题是 iostream 标头为您提供了这些对象，但仅在`std`命名空间下。通过在它们前面加上以下前缀来使用限定名称`std::`：

```
std::cout << code; 
```

通常建议您不要*使用*，`using namespace std`因为它会将令牌引入全局命名空间。您最好使用命名空间前缀作为替代方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-09T18:02:31.497

全局`cout`对象在`std`命名空间中定义（与标准库中的所有内容非常相似，只有少数例外）。

因此，您可以完全限定名称（并使用`std::cout`）：

```
std::cout << "The ASCII code for " << ch << "is " << num << "\n";
// ... 
```

或者引入一个*using 声明*：

```
using std::cout;
cout << "The ASCII code for " << ch << "is " << num << "\n";
// ... 
```

避免使用**坏**的、全局的 using 声明：

```
using namespace std; 
```

这会将命名空间中定义的*所有*符号导入`std`全局命名空间，从而导致名称冲突的高风险。这是一种*不好*的编程习惯，只能在有限的情况下使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T18:00:30.043

使用`std::cout`或添加`std`命名空间。把它放在文件的顶部：

```
using namespace std; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-09T18:02:45.147

`cout`是在命名空间中定义的流`std`。因此，当您使用它时，您要么必须编写，要么在第一次使用 cout 之前`std::cout`需要全局范围内的一行`using std::cout`。

# ios - 通过设备系统语言在特定选项卡上打开应用程序

> ID：15314012
> 
> 赞同：1
> 
> 时间：2013-03-09T17:59:01.733
> 
> 标签：ios, internationalization, tabbar

我可以根据设备上设置的语言在选项卡或其他选项卡上打开 iPhone TabBar 应用程序吗？

例如：我的应用程序的第一个选项卡名为“USA”，第二个“Germany”，第三个“France”。如果设备的语言设置为德语，是否可以直接在第二个选项卡上打开应用程序，或者如果设备的语言设置为法语，是否可以直接在第三个选项卡上打开应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T18:02:37.397

答案是肯定的“也许”。

一旦您的默认/启动屏幕消失，您将最终进入带有标签栏的视图。然后，您需要以编程方式快速切换到特定于语言/国家/地区的选项卡，您应该能够在 UIApplicationDelegate 的 " `application: willFinishLaunchingWithOptions:`" 委托方法中执行此操作。在您进行切换之前，用户很有可能会看到初始选项卡视图。

您可以通过 获取用户的首选语言[`[NSLocale preferredLanguages]`](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSLocale_Class/Reference/Reference.html#//apple_ref/occ/clm/NSLocale/preferredLanguages)。

如果要获取当前国家/地区，则[需要使用 CLLocationManager](https://stackoverflow.com/questions/11662966/error-in-getting-current-country)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T18:04:03.267

您可以像这样获取设备的语言

```
[[NSLocale preferredLanguages] objectAtIndex:0]; 
```

您可以像这样在代码中选择特定选项卡

```
// if myTabViewController is a handle to the UITabViewController
int myTab = 2; // this is the tab that we want to display
myTabViewController.selectedIndex = myTab; 
```

# javascript - 如何使用 requirejs 加载静态 JSON 文件？

> ID：15314019
> 
> 赞同：57
> 
> 时间：2013-03-09T17:59:49.643
> 
> 标签：javascript, json, requirejs

我想保留一个 JSON 文档来存储一些简单的数据，我想要求这个文档并在`define()`调用中使用 JSON 对象，以便我可以使用它。这不是一个`async`电话。我的意思是它应该用于开发，但我确实想在构建时编译文件，这与`async`来自 API 的实际调用不同，其中内容是动态的。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-03-09T18:06:21.973

最简单的方法是为此使用 requirejs json 插件，这也将允许您将文件包含到构建中。

[https://github.com/millermedeiros/requirejs-plugins](https://github.com/millermedeiros/requirejs-plugins)
下面是一个例子：

```
require(['json!someFile.json'], function(data){
  ...
})
// It does not actually need to be a .json extension, this will work to:
require(['json!someFile'], function(data){
  ...
}) 
```

如果您想在您的 r.js 构建中包含该文件，以便它始终在 main/js 引导文件中进行优化，您必须将其添加到包含选项

您也可以为此使用 require js 文本插件，它通常用于加载模板文件，但您也可以使用它来加载 .json 文件。

[https://github.com/requirejs/text](https://github.com/requirejs/text)

您将不得不解析您自己的内容`JSON.parse`
（如果需要，包括[json2.js](https://github.com/douglascrockford/JSON-js)以提供对旧浏览器的支持）

`.json`您也可以将 json 包装在它自己的 define() 中，这样您就可以传统地要求它，但如果您仅限于实际文件，这将不起作用。

另一种选择是要求文本文件通过 ajax 你自己，使用 jquery 或其他东西。

```
$.get('somefile.json', function(data) {
  // do something with your data
}); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-11-17T10:40:05.797

发布这个答案，因为：

*   这是用户提出问题的实际用作他们的解决方案的内容
*   它比需要文本更清晰，因为它总是为您执行 JSON.parse()。

**[RequireJS 有一个 JSON 插件](https://github.com/millermedeiros/requirejs-plugins)**。语法很简单：

```
require(['json!someData.json'], function(data){
  ...
}) 
```

# python - 将 MongoDB 与 Django 一起使用，但也使用关系数据库

> ID：15314025
> 
> 赞同：0
> 
> 时间：2013-03-09T18:00:11.493
> 
> 标签：python, django, mongodb

我正在开发一个需要与 mongoDB 实例交互的 Django 应用程序（最好通过 django 的 ORM） 应用程序的核心仍然使用关系数据库 - 但我只需要与 mongo 交互以获取单个特定模型。

python的哪个mongo驱动程序/子驱动程序最适合我的需求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T11:57:36.037

您可以使用 django-nonrel，它是 Django 的一个分支，它可以让您使用相同的 ORM。

如果你不想要一个分叉的 Django，你可以使用具有类似语法的 MongoEngine，否则只是原始的 pymongo。

# jquery - 为什么这个 JQuery 内部 html 集不起作用？

> ID：15314026
> 
> 赞同：1
> 
> 时间：2013-03-09T18:00:26.460
> 
> 标签：jquery, innerhtml

我一直在努力解决这个问题，但它似乎不想工作。我已经在互联网和 stackoverflow 上搜索了答案，但我似乎找不到任何真正适用于此的东西。如果有人可以在这里帮助我，那就太棒了！

```
<html>
    <head>
        <script rel="javascript" type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js">

        $(document).ready(function(){
            $(".box").html("sing!!!!");
        });
        </script>

        <style>
            .box{
            border:2px solid black;
            padding:12px;
            }
        </style>
    </head>

    <body>
        <div class="box">
            This will be replaced with a JQuery statement.
        </div>
        <p>
            This is text to be left UNALTERED.
        </p>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T18:02:55.773

jquery 的脚本标签未关闭。

```
 <script rel="javascript" type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>

 <script>
        $(document).ready(function(){
            $(".box").html("sing!!!!");
        });
 </script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-09T18:04:02.333

[`script`标签](http://www.w3.org/TR/html5/scripting-1.html#the-script-element)可以具有加载外部文件的属性，也**可以****具有**内联内容，但不能同时具有两者。如果你同时给它，内联内容将被忽略（在大多数浏览器上）。`src`

 **所以你的`script`标签：

```
<script rel="javascript" type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js">

$(document).ready(function(){
    $(".box").html("sing!!!!");
});
</script> 
```

...是无效的。您需要结束加载 jQuery 的那个，然后为您的代码打开一个*新的：*

```
<script src="http://code.jquery.com/jquery-latest.min.js"></script>
<script>
$(document).ready(function(){
    $(".box").html("sing!!!!");
});
</script> 
```

*（请参阅我对这个问题的评论，了解我为什么要删除`rel`以及`type`从中删除。）***

# c# - 通过 http get 请求下载视频流

> ID：15314028
> 
> 赞同：1
> 
> 时间：2013-03-09T18:00:34.227
> 
> 标签：c#, html, video, stream, download

我正在尝试从 streamcloud.eu 下载流该页面从站点[Streamcloud.eu发送](http://streamcloud.eu/skx06ayqai1v/Dr.House.S03E21.Auf.der.Kippe.GERMAN.WS.DVDRiP.XviD-SOF.avi.html)

一个看起来像这样的 GET 请求

```
GET /s3v75x75fwoax3ptxzginrpsu6hnbohophhebgisjj46deazergu4ll2ae/video.mp4?start=0 HTTP/1.1
Host: cdn2.streamcloud.eu:443
Connection: keep-alive
User-Agent: Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.22 (KHTML, like Gecko) Chrome/25.0.1364.152 Safari/537.22
Accept: */*
Referer: http://streamcloud.eu/skx06ayqai1v/Dr.House.S03E21.Auf.der.Kippe.GERMAN.WS.DVDRiP.XviD-SOF.avi.html
Accept-Encoding: gzip,deflate,sdch
Accept-Language: de-DE,de;q=0.8,en-US;q=0.6,en;q=0.4
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3
Cookie: lang=german; afc=39448; __utma=5658353.378845871.1355854410.1362835465.1362845552.59; __utmb=5658353.3.10.1362845552; __utmc=5658353; __utmz=5658353.1362169689.44.17.utmcsr=kinox.to|utmccn=(referral)|utmcmd=referral|utmcct=/Stream/Unstoppable-Ausser_Kontrolle.html 
```

从服务器（来自谷歌浏览器）获取文件。

任何人都知道我如何使用 ac# 客户端记录数据？原始字节就足够了！

# php - 我网站上的搜索模块出现问题

> ID：15314029
> 
> 赞同：0
> 
> 时间：2013-03-09T18:00:36.477
> 
> 标签：php, mysql, search, pdo

我在我的网站上的搜索模块遇到了一些问题。我正在使用这段代码：

```
 if(!isset($_POST['search'])) {
$query = "SELECT id, title FROM cars ORDER BY id LIMIT ? OFFSET ?";
}
if(isset($_POST['search']) && $_POST['categories'] != "all") {
$query = "SELECT id, title FROM cars WHERE title LIKE CONCAT(?, '%') ESCAPE '+'  AND category = ? ORDER BY id LIMIT ? OFFSET ?";
}
if(isset($_POST['search']) && $_POST['categories'] == "all") {
$query = "SELECT id, title FROM cars WHERE title LIKE CONCAT(?, '%') ESCAPE '+' ORDER BY id LIMIT ? OFFSET ?";
}
try { 
    $stmt = $db->prepare($query); 
    if(!isset($_POST['search'])) {
        $stmt->bindValue(1, (int) $limit, PDO::PARAM_INT);
        $stmt->bindValue(2, (int) $offset, PDO::PARAM_INT);
    }
    if(isset($_POST['search']) && $_POST['categories'] != "all") {
        $search= str_replace(array('+', '%', '_'), array('++', '+%', '+_'), $_POST['search']);
        $stmt->bindValue(1, $search, PDO::PARAM_STR);
        $stmt->bindValue(2, (int) $_POST['categories'], PDO::PARAM_INT);
        $stmt->bindValue(3, (int) $limit, PDO::PARAM_INT);
        $stmt->bindValue(4, (int) $offset, PDO::PARAM_INT);
    }
    if(isset($_POST['search']) && $_POST['categories'] == "all") {
        $search= str_replace(array('+', '%', '_'), array('++', '+%', '+_'), $_POST['search']);
        $stmt->bindValue(1, $search, PDO::PARAM_STR);
        $stmt->bindValue(2, (int) $limit, PDO::PARAM_INT);
        $stmt->bindValue(3, (int) $offset, PDO::PARAM_INT);
    }
    $stmt->execute(); 
} 
catch(PDOException $ex) { 
    die("Failed to run query: " . $ex->getMessage()); 
} 
$cars = $stmt->fetchAll(); 
```

我的搜索表单如下所示：

```
<input name="search" type="text" size="20" maxlength="20" />
<select name="categories">
    <option value="all">All Categories</option>
    <option value="1">Free</option>
    <option value="2">In use</option>
    <option value="3">Damaged</option>
</select> 
```

在汽车表中，每个标题如下所示： 2009 Porsche 911 (year make model) 当我搜索时，如果我不填写搜索框，它可以正常工作，即使我搜索 2009 也可以，但如果搜索保时捷，我没有得到任何结果。这是为什么？我的代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T18:05:09.773

`CONCAT(?, '%')`表示您搜索以 search-word 开头的单词。

所以 2009 是第一个词，这就是它回归的原因。如果您想获得第二个单词，请尝试使用此

```
 CONCAT('%',?, '%') 
```

或者就这样

```
 CONCAT("'",?, "'") 
```

# c - #pragma 指令编译器是否依赖？

> ID：15314039
> 
> 赞同：6
> 
> 时间：2013-03-09T18:01:08.787
> 
> 标签：c, pragma

`#pragma startup`我知道并且我以前使用过，`#pragma exit`但是当我执行以下代码时，它只输出`In main`. 谁能告诉我这里发生了什么？

```
#include<stdio.h>
#pragma startup A 110
#pragma startup B
#pragma exit A
#pragma exit B 110

int main()
{
    printf("\nIn main");
    return 0;
}

void A()
{
    printf("\nIn A");
}

void B()
{
    printf("\nIn B");
} 
```

还是它依赖于编译器？我正在使用 gcc 编译器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T18:22:59.707

所有`#pragma`指令都依赖于编译器，编译器*必须忽略*任何它无法识别的指令（ISO-9899:2011，s6.10.6：“任何未被实现识别的编译指示都会被忽略。”）。这就是您的程序编译成功的原因。

函数`A`并`B`没有被调用，因为......你不调用它们。抱歉，如果您完全理解这一点，但是：通过调用函数来执行 C 程序`main`。如果你想要函数`A`并被`B`调用，你必须在`main`函数中这样做。

（事实上​​，C 标准的最新版本引入了少量的`STDC`编译指示，实现必须识别，但这并不重要地影响答案）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T18:03:11.450

是的，该`#pragma`指令取决于编译器。

更具体地说，支持的选项是特定于编译器的。许多或大多数编译器可能支持某些选项，但在许多情况下，这些选项特定于每个编译器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-03T09:27:50.703

据我所知，gcc 根本不支持启动/退出编译指示。您必须使用**属性**才能使其与 gcc 一起使用。

```
__attribute__((constructor))
__attribute__((destructor))
__attribute__((constructor (PRIORITY)))
__attribute__((destructor (PRIORITY))) 
```

这将起作用：

```
 #include<stdio.h>
    void A() __attribute__((constructor(110)));
    void B() __attribute__((constructor));
    void A() __attribute__((destructor));
    void B() __attribute__((destructor(110)));

    int main()
    {
        printf("\nIn main");
        return 0;
    }

    void A()
    {
        printf("\nIn A");
    }

    void B()
    {
        printf("\nIn B");
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T18:03:57.103

所有`#pragma`指令都是实现定义的。有一次，gcc 以`#pragma`相同（通常不受欢迎）的方式响应任何和所有指令。

# jquery - IE 8 中的 Knockout JS 2.0.0 库中断

> ID：15314042
> 
> 赞同：0
> 
> 时间：2013-03-09T18:01:47.253
> 
> 标签：jquery, knockout.js

嘿嘿是报错截图：

![在此处输入图像描述](../Images/b3aa272edb0dc7f54c46203265e2135c.png)

我尝试过不使用 KO 调试版本，但在同一行出现相同的错误。如果我升级到 2.2.1，我的分页符。我在日期字段中得到 NaN，我所有的 jquery 验证字段都是红色的。

我发现这个问题是因为我的 ko if 标签 <-- ko if: expression --> 在 IE 8 中不起作用，所以我将 if 更改为“if”，然后我遇到了这个问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T03:11:52.750

我不得不升级到 jquery 1.9 和淘汰赛 2.2.1。为了修复我的页面文本变红，我必须确保我的所有标签都是这样的：而不是 . 我还使用 w3 验证器运行了我的 html，并修复了一些其他最小问题。

# ruby - 从 RubyMine 到 Mac 命令行应用程序？

> ID：15314044
> 
> 赞同：2
> 
> 时间：2013-03-09T18:02:06.227
> 
> 标签：ruby, macos, command-line, rubymine

我是一个相当有成就的开发人员，并且知道足够多的 Ruby 来从多个多态方向射击我的脚。老实说，我对 Rails 没有兴趣，并且希望严格使用 Ruby 作为 php 或 Python 的 Mac 命令行脚本替代品。我什至不知道从哪里开始使用 RubyMine。我想使用 RubyMine 的所有功能，并且我使用 JetBrains 的 AppCode 和 IntelliJ，所以 RubyMine 看起来很简单。但是我是否仅限于编写 .rb 文件并只是从终端命令行运行它们？我希望能够在不等待异常的情况下调试代码。

所以，我想我要的是一个简单的清单来访问命令行应用程序。哪种项目类型，我应该如何组织它，如何测试，以及如何从 RubyMine 内部运行？提前致谢。（我们曾经都是新手……）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-10T03:49:24.580

**TLDR；** *只需编写代码，尽可能使用 RubyMine，一切都会好起来的。我在这里包括我自己的过程，但只是作为一个例子。*

# 在 Ruby 中创建命令行工具

我使用 RubyMine 没有做任何 Rails 并且只是按照你的要求做。我编写了很多简单的脚本和大型应用程序，它们通常都可以从命令行使用。

我仍然将我的代码组织到一个“项目目录”中。并将 RM 指向该目录。而不是完全在一个文件中工作，并试图将 RM 单独指向文件。这似乎是 IDE 更喜欢的。这让 RM 创建它的`.idea`目录来保存它的所有项目相关设置。

这可能意味着某些项目仅包含一个目录（用于项目）和该目录中的单个文件（单个脚本，它实际上是该项目中唯一的内容）。

## 项目目录的好处

无论如何，您很快就会发现您向任何项目添加了更多文件。额外的编码和各种实用程序都是 ruby​​ 的巨大优势的一部分。

*   宝石
*   耙
*   测试

该`project directory`模式还允许您使用流行的 VCS（例如 git）对代码进行版本控制，甚至可以上传到 github 等社交编码网站。

## 项目设置

我不关心任何类型的“项目类型”。事实上，我根本不使用 RubyMine 创建项目。我只是创建一个目录，然后用 RM 打开该目录（无论是从文件菜单，还是通过 RM 安装的“我的”命令行工具）。

`project/`

当然`project`不是项目的真实名称，也不是我创建的目录，我这里只是作为一个通用名称。实际上，我会在他们所做的工作的脚本或主题之后命名目录（和项目）。

注意：*目前`mine`在 RM 5 中的命令中有一个错误，它不会打开第二个项目窗口。*

显然，如果这是一个包含任何命令行脚本的项目，我会将它们放在一个`bin`目录中，仅用于组织目的。我不喜欢用各种各样的东西把根项目目录弄得乱七八糟。*项目根目录中需要*设置文件的工具太多了，所以越少越好。

`project/bin/`

就像我说的，其他各种实用程序更喜欢项目根目录中的设置文件，因此您可能会发现自己使用其中的一些。

```
project/Gemfile
project/Rakefile
project/project.gemspec
project/README.md
project/.rdoc_options
... 
```

一旦我对脚本进行了一些自动化测试（我承认这不是即时的），我将所有测试代码放在一个`test`目录下，但我会根据测试范围或我在开发过程中运行它们的频率进一步对它们进行分类. 而且我会添加 quck Rake 任务，这些任务只是运行测试所需命令的别名。所以我不必记住哪个测试运行器，或者每次都输入完整的路径。

```
project/test/
project/test/unit/
project/test/unit/some_component_test.rb
project/test/integration/ 
```

最后，随着项目的增长，我添加了更多的脚本或者想在外部项目中重用一些代码，我将添加一个`lib`目录，并使用一些标准实践来组织它。

```
project/lib/
project/lib/project.rb 
```

随着项目的不断发展和变得越来越复杂，在进行一些重构之后，需要对内容进行更多的组织。请注意`cmd`包含特定脚本可以通过的各种工作流的实际顶级代码的目录。

```
project/lib/project/
project/lib/project/other_stuff.rb
project/lib/project/cmd/
project/lib/project/cmd/one_command.rb
project/lib/project/cmd/another_command.rb 
```

当然，原始`project.rb`的“需要”所有这些 lib 文件。Ruby 加载速度非常快，因此我不会过多地管理同一项目中的 ruby​​ 文件之间的依赖关系。它真的是关于代码可读性的。

## 更好的命令行应用程序

从单个脚本文件开始并编写最少的样板代码并没有错。这可能是最好的开始方式。

```
#!/usr/bin/env ruby

=begin

this is a script blah which does whatever

EXAMPLE

$ script <options> <arguments

=end

def main(args)
  whatever
end

main(ARGV)
exit(0) 
```

但是用 ruby​​ 编写更好的命令行应用程序非常容易。有一些流行的 gem 可以为你处理很多基础设施。

你可以从像[OptionParser这样简单的东西开始](http://ruby-doc.org/stdlib-1.9.3/libdoc/optparse/rdoc/OptionParser.html)

[然后，当您在脚本中构建更多代码时，您可以使用像美沙酮](https://github.com/davetron5000/methadone)这样的 gem 升级到更多的基础设施

最后，当您编写完整的命令行应用程序时，使用许多“内部”命令（例如“git submodule init”），您可以升级到更重量级的东西，例如[GLI](https://github.com/davetron5000/gli)

## 测试命令行应用程序

无论您编写哪种类型的应用程序，单元测试都几乎相同。您没有使用真正的服务或组合组件，而只是隔离内部组件并以纯内部方式使用它们。所以命令行工具没有太大变化。

但是当涉及到我的脚本的集成或完整的命令行测试时，我实际上是`cucumber/aruba`. 我对 TDD 不感兴趣，对此我有点太务实了。但是对于命令行工具，一系列用例已经在可用的选项集中非常清楚地列出。即使对于交互式命令，这也使一系列`feature`文件方便地兼作工具的文档。

```
Feature:
  Create and manipulate notes in Evernote.

  Background:
    Given I am logged in as me
    And I have 0 notes

  Scenario: Show note
    Given that I have 1 note named "foo" with content "bar"
    When I run `rnote show note --title "foo"`
    Then the output should contain "bar"

  Scenario: Show note, from multiple notes
    Given that I have 2 notes named "foo"
    When I run `rnote show note --title "foo"` interactively
    And I type "1"
    Then the output should contain "foo" 
```

## 安装

至于脚本的安装和打包，以便它们可以被世界其他地方共享和重用，只需看看你一直在 ruby​​ 中使用的相同的“gem”实用程序。

您在编写要共享的新 gem 时创建的`gemspec`内容可以被告知您的脚本和其他命令行实用程序。然后它将与您的其余代码一起包装它们，将它们安装在一个好的位置，甚至修复 PATH 以便用户可以在时间到来时找到它们。

事实上，这很好用，您的 gem 可以由这些`bin`脚本组成。不包含其他可重用代码。

[cat-dog](https://github.com/dragonfax/cat-dog)是一个无害的小宝石，我为其他东西做了一个例子。它根本不包含 lib 目录，并且除了单个命令行脚本之外没有其他 ruby​​。

## 没有 Rails 的 Ruby

我遇到过很多不了解什么*是*Rails 和什么*是*ruby​​ 的 Rails 开发人员。即当你移除 Rails 时剩下的东西。显然，服务器和模板、数据库、MVC 都消失了，添加到日常对象中的便利方法的一部分也消失了。

新的东西是你还剩下很多。如果你发现你错过了一些东西，很容易通过包含一两个宝石来添加它。例如，如果您喜欢使用像 active-record 这样的 ORM，它可以被包含回您的应用程序中，无需 Rails，无需大惊小怪。

```
require 'activerecord' 
```

## 全功能 RubyMine

最后，在开发过程中更多地使用 RubyMine 功能。使用 rails 时可用的一切都可用于命令行应用程序。

您可以从 RM 运行命令并使用它的调试器，就像使用 rails 一样。就像任何 IDE 一样，您可以使用要测试脚本的参数设置“运行”配置文件，并通过 IDE 运行或调试脚本。就个人而言，我从不使用命令行调试器。如果我需要启动调试器来解决某些问题，那么我将在 IDE 中启动该程序。IDE 调试器的好处是“抬头”显示所有相关细节，并在执行过程中直观地跟踪脚本，这是不可替代的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-29T19:13:13.177

工具栏manu转到**运行>>>编辑配置**然后更新**工作目录路径**应用>>好的现在我可以批量运行所有测试

# php - 如何使 64 位中的整数值等于 32 位

> ID：15314045
> 
> 赞同：3
> 
> 时间：2013-03-09T18:02:15.883
> 
> 标签：php, integer, 64-bit, 32-bit

我想匹配 64 位和 32 位系统中的整数值，这是我的 PHP 脚本的示例

```
function integer_hash_aritmathic ($value)
{       
    $maxVal = 2147483647 & 0xFFFFFFFF;
    $minVal = -2147483648 & 0xFFFFFFFF;
    $hash = 0;  

    for ($i = 0; $i < strlen($value); $i++)
    {
        $hash = (intval($hash) * 31) + ord($value[$i]);

        if ($hash > $maxVal) $hash = $hash + $minVal - $maxVal - 1;
        else if ($hash < $minVal) $hash = $hash + $maxVal - $minVal + 1;

    }

    return (int)$hash;
}

echo integer_hash_aritmathic ('21512510'); 
```

32位系统输出：-951649475

64位系统输出：1283243572029

我希望在 32 位的 64 位系统上获得相同的结果，值为 -951649475，请帮助我...谢谢，对不起，我的英语不好...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T00:02:57.237

您似乎试图在 64 位系统上模拟 32 位溢出。

问题可能是在 64 位系统`$minVal = -2147483648 & 0xFFFFFFFF`上将符号位归零，将 $minval 的值设置为 2147483648。 `$hash = $hash + $minVal - $maxVal - 1`然后有效地变为`$hash = $hash`并且所有计算都使用完整的整数大小完成。

如果您删除了`& 0xFFFFFFFF`在 64 位系统上导致问题的那个（并且对 32 位系统没有影响），您的代码应该可以工作。

另一种选择是将散列值限制为 31 位，从而仅产生正数。

然后代码可以简化为

```
function integer_hash_aritmathic ($value){       
    $hash = 0;  

    for ($i = 0; $i < strlen($value); $i++) {
        $hash = ($hash * 31 + ord($value[$i])) & 0x7FFFFFFF;               
    }

    return (int)$hash;
} 
```

# android - 在 ios (Apple) 平台上创建 Android 应用

> ID：15314046
> 
> 赞同：-2
> 
> 时间：2013-03-09T18:02:21.777
> 
> 标签：android, ios, cross-platform, chromium

这听起来像是一个重复的问题，但相信我不是。

我有一个安卓应用。它包含`WebView`显示网页。现在我也计划在 ios 上使用该应用程序。现在拥有两个不同的代码并维护它们是一项艰巨的任务。

有没有一种方法可以在两个平台上开发应用程序，并且维护问题最少。只需最少的维护，我的意思是可以在两个平台上使用的更多可重用代码。

我听说可以使用它来完成，`Chromium Project`但我无法在互联网上找到相同的支持文档。

有什么建议么？？还是参考资料？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T18:22:21.067

据我所知，您无法`WebView`在 IOS 应用程序中使用您的 Java 代码和 XML 文件（包括您的 . 语言/平台不同。

您可以做的是开发一个看起来像移动应用程序的 Web 应用程序，例如使用 JQueryMobile 并使用已经建议的 PhoneGap 框架将其导出到您想要的任何平台。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T18:09:19.783

您应该尝试其中的几个框架，PhoneGap ( [http://phonegap.com](http://phonegap.com) ) 是一个有趣的选择。

# ruby-on-rails - 什么时候最适合使用微框架？（而不是像rails、django或catalyst这样的东西）

> ID：15314047
> 
> 赞同：0
> 
> 时间：2013-03-09T18:02:29.637
> 
> 标签：ruby-on-rails, django, frameworks, sinatra, catalyst

我花了一些时间熟悉自己

rails (ruby), django ...以及其他东西，例如 zope 和 pylons/pyramid (python)，catalyst (perl)

但经常发现自己想使用 sinatra (ruby) 瓶...或烧瓶...(python) dancer...(perl)

我不完全确定......当我即将开始一个新项目时，我应该使用它。什么应该是让我从微框架切换到更实质的东西的决定性因素。是不是就在我要编写太多 SQL 的时候？我认为不会，因为如果是这样的话，我可以只使用 ORM 库/模块。

我的主要问题是害怕选择其他开发人员无法理解的东西，如果其他人需要在以后修复该网站。我仍然不确定应该告诉我什么意见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T18:21:43.923

使用 miсro 框架，您可以更自由地使用库，您可以添加您认为正确的内容。在 Django 等大型框架中，已经有很多“搞砸”了，并且有一些规则和最佳实践如何最好地编写某些东西。

# javascript - 用 HTML 元素替换光标

> ID：15314050
> 
> 赞同：3
> 
> 时间：2013-03-09T18:02:33.477
> 
> 标签：javascript, cursor

使用 JavaScript，是否可以将光标替换为 HTML 元素（例如 div 或画布）而不是自定义图像？在某些情况下，将光标替换为图像以外的 HTML 元素会很有用，但我目前不知道有什么方法可以做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T19:51:23.127

这是 jQuery 中的一个解决方案，您可以将其视为优势或劣势。我使用jQuery的原因是它的跨浏览器鼠标位置支持和强大+简单的`.css`功能。

### 代码（Javascript）

```
var ElementCursor = {
    cursorElement: "",
    setCursor: function (cursorId) {
        $('html').css({
            'cursor': 'none',
        });
        ElementCursor.cursorElement = cursorId;
        ElementCursor.updateCursor();
    },
    removeCursor: function () {
        $('html').css({
            'cursor': ''
        });
        ElementCursor.cursorElement = '';
    },
    updateCursor: function () {
        $(document).mousemove(function (e) {
            $('#' + ElementCursor.cursorElement).css({
                'position': 'fixed',
                'user-select': 'none',
                'top': e.pageY + 2 + 'px',
                'left': e.pageX + 2 + 'px'
            });
        });
    }
};

ElementCursor.setCursor("cursor"); 
```

将其添加到 Javascript 后，您只需调用`ElementCursor.setCursor(id_of_your_cursor_element_here)`它，它就会自动将光标替换为该元素。不再需要那个光标了吗？打电话`ElementCursor.removeCursor()`并在路上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T18:31:56.540

如果通过替换您的意思是用 HTML 元素更改光标的图像，那么不 -[这是光标 CSS 属性的工作方式。](http://www.w3schools.com/cssref/pr_class_cursor.asp)

您可以做的是隐藏光标，并在光标周围有一个绝对位置元素。

```
<html>
    <head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function(){
            $("body").mousemove(function(event){
                $("#cursor").css("left", event.pageX)
                $("#cursor").css("top", event.pageY)
            })
        })
    </script>
    </head>
    <body style="cursor:none">
    <div id="cursor" style="position:absolute">hello</div>
    </body>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T18:33:26.190

**编辑** 我忘记了：

```
cursor: none; 
```

**HTML**

```
<div id="mydiv">
    <canvas id="mycanvas" width="50" height="50"></canvas>
</div> 
```

**CSS**

```
#mydiv
{
    position: fixed;
    top: 0px;
    left: 0px;
    width:1000px;
    height: 1000px;
    background-color: red;
}

#mycanvas
{
    position: relative;
    top: 0px;
    left: 0px;
    background-color: black;
} 
```

**JAVASCRIPT**

```
function Thing(x, y)
{
    this.x = x;
    this.y = y;
}

var mousePos = new Thing(0, 0);

mydiv = document.getElementById("mydiv");
mycanvas = document.getElementById("mycanvas");

mydiv.addEventListener('mousemove', function(event)
{
    mousePos.x = event.clientX;
    mousePos.y = event.clientY;

    mycanvas.style.top = mousePos.y + "px";
    mycanvas.style.left = mousePos.x + "px";
    console.log(mycanvas.style);
}, false); 
```

[你可以在这里玩](http://jsfiddle.net/n4V23/)

# php - 是否有 PHP 函数可以对字符串中的多维数组进行编码/解码？

> ID：15314053
> 
> 赞同：1
> 
> 时间：2013-03-09T18:02:37.263
> 
> 标签：php, drupal, drupal-computed-field

是否有 PHP 函数将通用多维数组编码为字符串并将其作为多维数组返回？

我需要它在 mysql 中存储一些数据（准确地说是一个 drupal 计算字段）。该数组仅包含浮点数和字符串。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T18:05:56.687

`serialize()`做`unserialize()`你描述的。

[http://www.php.net/manual/en/function.serialize.php](http://www.php.net/manual/en/function.serialize.php)

[http://www.php.net/manual/en/function.unserialize.php](http://www.php.net/manual/en/function.unserialize.php)

`json_encode()`如果这对您很重要，您还可以考虑使用and将数组编码为 JSON `json_decode()`，这样可以提供更具可读性的输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T18:24:57.217

我第二次使用“json_encode”和“json_decode”。我相信“json_encode”的输出没有 PHP 的序列化函数那么冗长（因为数据类型是推断出来的），并且立即更便携（尽管这不是必需的）。

确保为“json_decode”的第二个参数传递“TRUE”，否则您可能会得到一个简单的对象，具体取决于原始数据的编码方式。

# google-chrome - Panel和Shell窗口类型之间的区别

> ID：15314056
> 
> 赞同：1
> 
> 时间：2013-03-09T18:02:38.687
> 
> 标签：google-chrome, google-chrome-extension, google-chrome-app

从官方文档中我无法理解这两者之间的确切区别：

> 使用 chrome.app.window 模块创建窗口。Windows 可以是外壳或面板。Shell 窗口没有浏览器镶边。**面板窗口与外壳窗口相同，只是它们有不同的大小和位置限制，例如聊天面板。**

他们在谈论哪些限制（我已经做了一些测试，我不能说出这两者之间的区别......）？什么是聊天面板？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T21:36:06.473

目前不支持面板。文档中对它们的引用是[文档错误](https://code.google.com/p/chromium/issues/detail?id=181457)。您可以在[app_window.idl](https://code.google.com/p/chromium/codesearch#chromium/src/chrome/common/extensions/api/app_window.idl&q=app_window%20panel&sq=package%3achromium&type=cs&l=61)文件中看到该功能是实验性的，并且仅限于 aura shell 'ash'。

# php - 自动更新唯一 ID

> ID：15314058
> 
> 赞同：0
> 
> 时间：2013-03-09T18:02:46.363
> 
> 标签：php, mysql, database, auto-increment

我有一个表，其中有一列“id”，其中有 auto_increment。

因此，例如，当我添加一条新记录时，它会为其分配一个编号。

但我需要的是一种可以更改记录顺序的方法，例如数据库中有 48 条记录，我希望记录 29 的 id 为 5 而不是 29。那么有没有办法让记录 29 替换5 并且他们都向上移动一个，所以 5 现在将是记录 6 等等？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T18:17:06.033

如果您需要自己分配 id，请不要使用自动增量列。

另一个问题是对数据库表中的记录重新编号，是的，这可以通过有序更新查询来完成。

首先，您将清除新记录 5 的空间，因此：

```
UPDATE table SET id=id+1 WHERE id > 4 ORDER BY id DESC 
```

然后你将重新编号记录 29

```
UPDATE table SET id=5 WHERE id = 29 
```

# css - 社交媒体 html css 的图标列表

> ID：15314061
> 
> 赞同：1
> 
> 时间：2013-03-09T18:03:01.233
> 
> 标签：css, icons, background-image

我正在尝试一个包含社交媒体图标的列表。我想使用 nth child: 但不支持 IE，所以我使用以下方法。我不工作，有什么建议 - 不显示图标？

```
ul.socialmedia {
color: #000000;
margin:0;
padding:0;
}

li.fb {
background:url('images/Facebook_icon.png') 50%    50% no-repeat no-repeat;
padding-left: 10px;
}

li.gp {
background:url('images/googleplus_icon.png') 50% 50% no-repeat no-repeat;
padding-left: 10px;
}

li.tw {
background:url('images/twitter-icon.png') 50% 50%  no-repeat no-repeat;
padding-left: 10px;
} 
```

的HTML：

```
<ul class="socialmedia">
<li class="fb"><strong>FACEBOOK</strong></li>
<li class="gp"><strong>GOOGLE+</strong></li>
<li class="tw"><strong>TWITTER</strong></li>
</ul> 
```

所有图像都有效并且已经过测试

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T18:15:00.350

首先，您指定了`background-repeat`两次无效的 CSS 属性，尽管这些属性将被忽略，最好删除它们。

问题可能与您的`background-position`值有关..因为您没有在您的`<ul>`（它是一个块元素，默认情况下它占用所有可用宽度）上指定宽度，使用 50% 50% 将您的 bg-image 放置在视口宽度的一半这意味着它出现在你之外，`<ul>`即使它在技术上不是。给你一个固定的宽度，`<ul>`这样背景图像就相对于那个固定的容器，而不是整个视口。

# ruby - 如何使用 ruby s em-http-request 发出一定（有限）数量的 api 请求？

> ID：15314062
> 
> 赞同：1
> 
> 时间：2013-03-09T18:03:05.997
> 
> 标签：ruby, api, em-http-request

我有一个每秒调用次数有限的 API（每 100 秒 100 个请求）。我如何利用 em-http-request（最好使用 Redis）以尽可能快的速率进行此类调用（不超过 api 速率限制？）。

# c++ - C++ 中的 I/O 格式化

> ID：15314065
> 
> 赞同：3
> 
> 时间：2013-03-09T18:03:14.780
> 
> 标签：c++

如何使用 C++ 实现以下目标`cin`？

```
scanf("%d:%d:%d",&day,&month,&year); 
```

此外，如何检查输入是数字、字符还是浮点数，比如说如果我有一行，比如`scanf("%d",&a);`用户输入了一个字符，那么我该如何停止它并提示用户获取正确的输入。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T18:16:42.117

我可能会读整行，或者在这种情况下可能只是一个以空格分隔的字符串，然后用...*解析*`sscanf`它`sscanf``#include <cstring>`

 *```
string datestr;
cin >> datestr;
int result = sscanf(datestr.c_str(), " %d:%d:%d", &day, &month, &year); 
```

对于更多的 C++ 解决方案，[Boost 有一些东西](http://boost-spirit.com/home/tag/qi/)，虽然我自己没有使用过。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T19:05:41.380

注意：以下内容未经测试：

```
unsigned int day;
unsigned int month;
unsigned int year;
cin >> day;
cin.ignore(20,':'); // Ignore everything up to and including the ':'.
cin >> month;
cin.ignore(20, ':');
cin >> year; 
```

还要查看“skipws”。使用`skipws`您可以将所有内容放在一行上：

```
char colon;
cin >> day >> colon >> month >> colon >> year; 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-03-09T18:05:51.627

它就像这样简单：

```
cin >> day  >>  month >> year; 
```

干杯:)*

# css - 回显变量时出现超出设定宽度的文本

> ID：15314066
> 
> 赞同：0
> 
> 时间：2013-03-09T18:03:17.483
> 
> 标签：css

我创建了一个页面，用户可以在其中查看图像以及图像描述，尽管描述的 CSS 存在一些问题。描述通过 PHP 检索并显示为回显变量。这样做的问题是，当它应该在 div 中进行时，描述似乎沿着一行进行。

如下所示，当它应该在下面换行到与描述下方的文本区域相同的宽度时，它会沿一行显示。

我尝试将 .desc 类的宽度更改为 290 像素而不是 100% 的设置像素宽度（仍应从 image-desc 类容器中获取 290 像素），但我没有运气。

![文字扭曲](../Images/571b583f421d59c6e18b3371dd81f416.png)

我当前的 CSS：

```
 .image-info {
    width: 290px;
    display: inline;
    float: right;
}

.image-info .desc {
    text-align: justify;
    width: 290px;
    margin: 10px 0px;
} 
```

和 HTML：

```
<div class="image-info">
        <? $desc = htmlentities($row['desc'], ENT_QUOTES, 'UTF-8'); ?>
        <a href="gallery.php?id=<?php echo htmlentities($row['gallery'], ENT_QUOTES, 'UTF-8'); ?>">&larr; Back to Gallery</a>
        <div class="desc"><? echo $desc; ?></div>

        <? if(empty($_SESSION['user'])) { } else { print '<a href="#" class="show_hide"><i class="icon-chevron-down"></i>Options</a><br /><div class="slidingDes"><form action="admin/includes/edit-img.php?id=' . $id . '" method="post">  <textarea type="text" name="description" placeholder="' . $desc . '"></textarea> <br/><input type="submit" value="Change" class="btn btn-primary"/> </form><form action="admin/includes/cover-image.php?id=' . $id . '" method="post">  <input type="submit" value="Cover Photo" class="btn btn-danger"/> </form></div>';}?>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T18:19:24.403

当单词中没有空格时，您的内容似乎超出了限制，因此只需添加`word-wrap:break-word;`到 imageInfo 类

这是你的CSS

```
 .image-info {
    width: 290px;
    display: inline;
    float: right;
    word-wrap:break-word;
} 
```

看看这里的[小提琴](http://jsfiddle.net/vu5hL/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T18:21:19.370

使用 CSS3 自动换行

```
word-wrap:break-word; 
```

这将迫使文本下降

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T18:19:19.220

添加新的 CSS 3`word-break`属性：

```
word-break: break-word; /* Will prevent text from bleeding outside container */ 
```

# jquery - 使用 jquery 悬停时使用外部 HTML 填充 DIV

> ID：15314070
> 
> 赞同：1
> 
> 时间：2013-03-09T18:03:38.210
> 
> 标签：jquery, html, hover, external

我对 Jquery 很陌生，我在使用 .load(); 时遇到了麻烦。功能。我正在为一家餐馆建立一个网站，当用户将鼠标悬停在菜单上的项目（menuitem 类）上时，我想从我正在使用的 HTML 文件 menusrc.html 中将适当的数据加载到 ID 为 iteminfo 的 div 中.

通过阅读 API，我了解到您可以使用 .load(); 函数引入外部 HTML 并使用第二个参数指定要加载的内容的 ID。我还是个新手，所以在执行诸如此类的更复杂功能时，我不确定语法是否正确。

这是相关的HTML

```
 <li id="a1" class="menuitem"><span class="num">A1: </span>Gỏi cuốn <em>3.95</em></li>
 <div id="iteminfo">   </div> 
```

和我的jQuery

```
$(".menuitem").hover(
function () {
$("#iteminfo").load("menusrc.html #" + this.id);
},
function () {
$("#iteminfo").empty();
}); 
```

外部 html 文件位于同一目录中，出于测试目的看起来像这样

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>
<body>
<div id="a1">THIS IS THE INFO FOR A1</div>
</body>
</html> 
```

在我的脑海中，这个函数应该是这样工作的：当鼠标进入一个类 menuItem 的项目时，将与 menuItem 具有相同 ID 的 HTML 加载到 ID 为 itemInfo 的 div 中。当鼠标离开 menuItem 时，它应该清空 div。

也许我使用 .hover 错误或应该使用 .mouseenter 或其他东西，但我根本无法让 .load 工作，所以我认为我的错误可能就在那里。

在此先感谢您的帮助！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T18:12:36.617

您需要`#`在加载函数中的 id 之前加上一个额外的括号。删除那些。

尝试：

`$("#iteminfo").load("menusrc.html #" + this.id);`

# regex - 如何在正则表达式中使用负前瞻来删除不需要的行

> ID：15314071
> 
> 赞同：21
> 
> 时间：2013-03-09T18:03:40.187
> 
> 标签：regex, notepad++, negative-lookahead, negative-lookbehind

我需要有关使用负前瞻的帮助。我正在使用记事本++，我想删除除包含的行之外的所有行`<title>(.*)</title>`

我尝试了几件事，但没有奏效。

```
^.*(?!<title>).*</title>
^.*(?!<title>.*</title>) 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-09T18:42:25.970

你很接近：

```
^(?!.*<title>.*</title>).* 
```

通过这个正则表达式`^.*(?!<title>.*</title>)`，正则表达式引擎只会找到一些它找不到的位置`<title>.*</title>`（行尾就是这样一个有效位置）。

您需要确保，从线路的开始，您无法`<title>.*</title>`在线路的任何地方找到。这就是我的正则表达式所做的。

# c - 了解一个月提醒程序中的 strcmp() 函数

> ID：15314072
> 
> 赞同：5
> 
> 时间：2013-03-09T15:28:04.823
> 
> 标签：c, arrays

这是打印一个月提醒列表的程序。这是 KN King 书中的一个例子。我的问题是我不明白 strcmp 函数在这个程序中是如何工作的。

```
#include <stdio.h>
#include <string.h>

#define MAX_REMIND 50       /* Maximum number of reminders */
#define MSG_LEN 60          /* max length of reminders message */

int read_line(char str[], int n);

int main(void) {
    char reminders[MAX_REMIND][MSG_LEN+3];
    char day_str[3], msg_str[MSG_LEN+1];
    int day, i, j, num_remind = 0;

    for(;;) {
        if(num_remind == MAX_REMIND) {
            printf("--No space left--\n");
            break;
        }

        printf("Enter day and reminder: ");
        scanf("%2d", &day);
        if(day == 0)
            break;
        sprintf(day_str, "%2d", day);
        read_line(msg_str, MSG_LEN);

        for(i = 0; i < num_remind; i++)
            if(strcmp(day_str, reminders[i]) < 0)
                break;

        for(j = num_remind; j > i; j--) 
            strcpy(reminders[j], reminders[j - 1]);

        strcpy(reminders[i], day_str);
        strcat(reminders[i], msg_str);

        num_remind++;
    }

    printf("\nDay Reminder\n");
    for(i = 0; i < num_remind; i++)
        printf(" %s\n", reminders[i]);

    return 0;
}

int read_line(char str[], int n) {
    int ch, i = 0;
    while((ch = getchar()) != '\n')
        if (i < n)
            str[i++] = ch;

    str[i] =  '\0';
    return i;
} 
```

我的理解是，字符串存储在二维数组中，其中每一行都接受来自用户的字符串。该程序首先获取日期（来自用户的两位小数）并使用 sprintf() 函数将其转换为字符串。然后它将转换后的字符串日期与存储在提醒[][] 数组中的字符串进行比较。

我不明白它如何将日期与字符串进行比较。（在这种情况下它总是返回 true 并且每次都在 i = 0 处中断语句）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T16:08:27.863

**此代码中使用的strcmp**用于排序。添加一些调试代码（在第 27 行之后），您将看到 strcmp 产生的结果：

```
for(i = 0; i < num_remind; i++) {
    printf("%s comparing to %s is %d \n", day_str, reminders[i], strcmp(day_str, reminders[i]));
    if(strcmp(day_str, reminders[i]) < 0) {
            break;
    }
} 
```

如您所见，当新输入的 day_str 小于存储提醒开头的任何其他提醒时，**for循环被中断。**以这种方式获得的**i**用于在下一个**for**循环中将所有存储的提醒从**num_remind 移动**到**i**每个位置（从最后一个元素到 i）。最后这两行将 day_str 和 msg_str 放在正确的位置：

```
strcpy(reminders[i], day_str);
strcat(reminders[i], msg_str); 
```

看一下这个[插入排序](http://en.wikipedia.org/wiki/Insertion_sort)来理解这种排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T16:09:06.400

'day'变量是一个整数，它被组合成一个格式为“%2d”的字符串，所以数字6变​​成了“6”。

然后程序循环通过提醒，并在这种情况下中断：

```
if(strcmp(day_str, reminders[i]) < 0) 
```

这里使用strcmp 来确定day_str 中的字符串是否比reminders[i] 中的字符串排序更早。

因此，reminders[] 数组按天数升序排序。此循环在新数据的插入点处中断。然后它将所有现有的提醒在数组中向下移动一个位置，为插入新数据腾出空间。

# c# - 选择静态选择列表的值

> ID：15314075
> 
> 赞同：1
> 
> 时间：2013-03-09T18:03:45.093
> 
> 标签：c#, asp.net-mvc

在我的主页上，我有一个搜索表单，人们可以在其中搜索房屋。它重定向到搜索房屋并在视图中显示它们的控制器和操作。

在结果视图中，我有几个这样的列表。

```
<select name="priceFrom">
    <option value="0">€0</option>
    <option value="100000">€100.000</option>
    <option value="200000">€200.000</option>
</select> 
```

视图包含一个模型：`@model Irrelevant.Namespace.ViewModels.SearchResults`

我想选择他们在主页上选择的值，它存储在 SearchResults ViewModel 中。在我曾经做过的 WebForms`Bind()`或`Eval()`中，MVC 中是否有任何等价物提供了一种干净的方式来实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T18:16:59.447

`SelectListItem`有一个`Selected`属性，它将被`Html.DropDownListFor<>()`.

如果您手动为您的 声明标记`selects`，您最终会得到一个实用但不太优雅的解决方案，例如：

```
<select name="priceFrom">
    <option value="0">€0</option>
    <option value="100000" @(Model.SomeCondition ? "selected" : "" )>€100.000</option>
    <option value="200000" @(Model.SomeCondition ? "selected" : "" )>€200.000</option>
</select> 
```

请记住，该`selected`属性的存在可能会导致用户代理将其视为“真”。

理想情况下，您的所有下拉列表都将从您的视图模型生成。创建视图模型时，您将评估先前的条件（例如在另一个页面上的选择）并`Selected`在适当的项目上进行设置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T18:18:38.537

您必须为所有选项执行以下操作

```
<select name="priceFrom">
   <option value="0" @(Model.PriceFrom.ToString().Equals("0") ? "selected":"")>€0</option>
   <option value="100000" @(Model.PriceFrom.ToString().Equals("100000") ? "selected":"")>€100.000</option>
   ...
</select> 
```

MVC 中还有另一种方法可以利用`@Html.DropDownListFor`您需要在模型中具有列表属性的方法，该属性可以使用指定的选定值直接绑定到 Dropdownlist

# mysql - 使用 MySQL，是否需要按与索引中相同的顺序提及列？

> ID：15314076
> 
> 赞同：2
> 
> 时间：2013-03-09T18:03:56.607
> 
> 标签：mysql, indexing

我有一个表艺术家，它有这样的索引

```
combo1 => by_id, origin, genre 
```

我运行查询

```
SELECT * FROM artists 
    WHERE by_id = '324' 
      AND genre = 'rock' 
      AND origin = 'Australia' 
```

和

```
SELECT * FROM artists 
    WHERE by_id = '324' 
      AND origin = 'Australia' 
      AND genre = 'rock' 
```

显然，在第二个查询中，列被提及，因为它们在索引中。当我`EXPLAIN`在这些上运行时，它说它*正在*使用索引。但是我有点困惑第二个是否会比第一个更快。是吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T18:14:08.253

没有区别，因为只要包含列，优化器就会处理顺序。

```
WHERE by_id = '324' AND origin = 'Australia' AND genre = 'rock' 
```

```
| 身份证 | 选择类型 | 表 | 类型 | 可能键 | 关键 | KEY_LEN | 参考 | 行 | 额外 |
-------------------------------------------------- -------------------------------------------------- ---------------
| 1 | 简单 | 艺术家 | 常量 | 初级 | 初级 | 80 | 常量，常量，常量 | 1 | 使用索引 |
```

```
WHERE by_id = '324' AND genre = 'rock' AND origin = 'Australia' 
```

```
| 身份证 | 选择类型 | 表 | 类型 | 可能键 | 关键 | KEY_LEN | 参考 | 行 | 额外 |
-------------------------------------------------- -------------------------------------------------- ---------------
| 1 | 简单 | 艺术家 | 常量 | 初级 | 初级 | 80 | 常量，常量，常量 | 1 | 使用索引 |
```

如果您碰巧遗漏了`by_id`，则不会使用索引（索引从左到右工作）

```
WHERE genre = 'rock' 
```

```
| 身份证 | 选择类型 | 表 | 类型 | 可能键 | 关键 | KEY_LEN | 参考 | 行 | 额外 |
-------------------------------------------------- -------------------------------------------------- -----------------
| 1 | 简单 | 艺术家 | 索引 | (空) | 初级 | 80 | (空) | 1 | 使用哪里；使用索引 |
```

```
WHERE origin='Australia' AND genre = 'rock' 
```

```
| 身份证 | 选择类型 | 表 | 类型 | 可能键 | 关键 | KEY_LEN | 参考 | 行 | 额外 |
-------------------------------------------------- -------------------------------------------------- -----------------
| 1 | 简单 | 艺术家 | 索引 | (空) | 初级 | 80 | (空) | 1 | 使用哪里；使用索引 |
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-03-09T18:14:02.443

第二次查询应该比第一次更快。

列在索引定义中的列出顺序很重要。可以仅使用第一个索引列来检索一组行标识符。但是，仅使用第二个或更大的索引列来检索行标识符集是不可能或有效的（在大多数数据库上）。

例如，想象一个电话簿，它首先按城市，然后按姓氏，然后按名字。如果您获得了城市，您可以轻松提取该城市的所有电话号码列表。然而，在这个电话簿中查找给定姓氏的所有电话号码将非常繁琐。您必须在每个城市的部分中查找具有该姓氏的条目。一些数据库可以做到这一点，而另一些则不会使用索引。

# php - 表单未提交 html php

> ID：15314078
> 
> 赞同：-1
> 
> 时间：2013-03-09T18:03:57.763
> 
> 标签：php, forms

我的表单没有提交，我的数据库插入类有效并且我已经测试过了。但我的表单似乎不想从我的表单提交或发布值。有什么我遗漏的吗？

```
<form name="form1" method="post" action="sub_newsletter.php" enctype="multipart/form-data">
<table border="0" cellspacing="0" cellpadding="0">
<tr>
<td colspan="2">Newsletter</td>
</tr>
<tr>
<td>Name : </td>
<td><input name="name" type="text"></td>
</tr>
<tr>
<td>Email : </td>
<td><input name="email" type="text"></td>
</tr>
<tr>
<td> <input type="text" name="check_spam" id="check_spam" size="30" style="display:none;" />  </td>
<td>&nbsp;</td>
</tr>
<tr>
<td colspan="2" align="center"><input type="image" name="submit" src="images/sub.jpg" style="width:180px; height:70px;"></td>
</tr>
</form>
</table> 
```

我的提交脚本

```
<?php
include('includes/database.php');
include('includes/settings.php');
include('includes/newsletter.php');

if (isset($_POST['submit'])){
//to check if posting
echo $username=rtrim($_POST['name']);
echo $myemail=rtrim($_POST['email']);
//
$check=$_POST['check_spam'];
if(!empty($check)){ echo "You are spam"; } else{
$username=rtrim($_POST['name']);
$myemail=rtrim($_POST['email']);
$news =  new Newsletter();
$new->first_name=$username;
$new->email=$myemail;
$new->create();
echo "<script>alert(\"Thank you for your subscription\"); </script>";
echo "<script>window.location.replace(\"index.html\"); </script>";
}
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T18:06:43.340

你显然错过了提交按钮

```
<input type="submit" name="submit"> 
```

由于您已经有一个具有该名称的字段，因此只需更改它或使用其他名称。

# itextsharp - 如何在 itextsharp 中插入右对齐文本？

> ID：15314083
> 
> 赞同：0
> 
> 时间：2013-03-09T18:04:10.197
> 
> 标签：itextsharp

我有一个 PDF，我需要在其中定义非常精确的矩形，我需要在其中注入文本。即PDF是一个模板，我需要能够指定一个矩形区域，然后将文本与矩形底部和右侧对齐。

我尝试过这样的事情： -

```
PdfContentByte over = ps.GetOverContent(1);
font = new Font(bf, 47, Font.NORMAL, new Color(190, 210, 49));
ct = new ColumnText(over);
myText = new Phrase("3.5", font);
ct.Alignment = Element.ALIGN_RIGHT | Element.ALIGN_BOTTOM;
ct.SetSimpleColumn(myText, 446.5f, 314.5f, 536.5f, 294.5f, 47, Element.ALIGN_RIGHT | Element.ALIGN_BOTTOM);
ct.Go(); 
```

不知道我做错了什么，但它不起作用....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T05:57:43.303

与其给文本提供绝对位置，不如开发一个表格结构，然后将文本放在单元格内。

给单元格对齐和所有

使用**PdfPCell**和**PdfPTable**

# java - 有效地多次遍历地图

> ID：15314085
> 
> 赞同：0
> 
> 时间：2013-03-09T18:04:37.200
> 
> 标签：java, collections

我有一个 cookie 管理器类，它按其域在地图中存储 cookie 列表。大多数情况下，大小将保持在 100 以下。

```
Map<String, CookieList> cookieMap; 
```

每次我为连接设置 cookie 时，它​​都需要遍历所有域（`String`），检查它是否可以接受，然后插入`CookieList`. 我将多次遍历地图。我有一个单独的列表，其中包含域并进行搜索，然后`CookieList`通过密钥获取。

```
List<String> domainList;

// host is from the connection being set up
for (String domain : domainList) {
    if (host.contains(domain)) {
        CookieList list = cookieMap.get(domain);
        // set up cookies
    }
} 
```

由于我正在使用`contains`，我无法直接从`cookieMap`. 这是一个好方法还是我应该只是迭代 Map 的 EntrySet？如果是这样，LinkedHashMap 在这个例子中会很好吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T18:10:23.157

您可以使用来获取域，而不是维护 a`Map`和 a 。`List``Map.keySet`

```
for (String domain : cookieMap.keySet()) {
    if (host.contains(domain)) {
        CookieList list = cookieMap.get(domain);
    }
} 
```

这并没有什么低效的，因为 for 循环是 O(n)，而对 cookieMap 的调用是 O(1)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T18:21:17.340

```
Map<String, CookieList>  coockieMap = new HashMap<String, CookieList>();
for (Map.Entry<Integer, CookieList> entry : coockieMap.entrySet()) {
    if (host.contains(entry.getKey())) {
        CookieList list = entry.getValue();
    }
} 
```

希望这对您有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T19:12:50.817

我认为您的代码非常优化，如果您愿意，可以使用

```
domainList.retainAll(hosts) 
```

在你的 for 循环之前，所以停止检查每个循环。有效地，您的代码将如下所示：

```
List<String> hostList = new ArrayList<String>(domainList); // we don't want to edit domains

hostList.retainAll(host);  

for (String hostEntry : hostList) { // I'd rename "host" so I can use it here
        CookieList list = cookieMap.get(hostEntry);
        // set up cookies
} 
```

# c# - 将 IpAddress 从 c# 传输到 UINT32

> ID：15314087
> 
> 赞同：0
> 
> 时间：2013-03-09T18:05:00.737
> 
> 标签：c#, c++

在 C# 方面我正在使用`System.Net.IPAddress`

在我使用的 C++ 端`UINT32`（`inet_addr`函数的结果）

在 C++-Cli 包装器的接口中使用什么会更好？
我试过使用`UINT32`，但我不知道如何在 C# 端转换`System.Net.IPAddress`为正确的。`UINT32`

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-09T20:14:08.187

[如何在 C# 中将 IPv4 地址转换为整数？](https://stackoverflow.com/questions/461742/how-to-convert-an-ipv4-address-into-a-integer-in-c) 请注意，在 C++ 中（就像在 C# 中一样）uint32 实际上是无符号整数。您需要将 IpAdress 转换为整数。

# html - 占位符文本

> ID：15314090
> 
> 赞同：2
> 
> 时间：2013-03-09T18:05:19.077
> 
> 标签：html, css

我们可以仅使用**CSS更改**`HTML5` **占位符**的文本内容吗？

 **我尝试使用，`content : ''`但似乎没有帮助。

```
<input type="text" class="zip" placeholder="Enter Zip" />

input{
    &:placeholder{
       content:'Search by name'
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-09T23:23:24.457

您可以在基于 webkit 的 Firefox 和 IE 浏览器中使用以下*伪元素（注意术语）：*

```
// Note two colons, -input-
::-webkit-input-placeholder

// Note two colons, NO -input-
::-moz-placeholder

// Note ONE colon, -input-
:-ms-input-placeholder 
```

与这一属性相关的这一特定“功能”似乎正在演变，因此这个答案最终可能会过时。毕竟，这些都是供应商前缀的。

我确实发现在基于 webkit 的浏览器中，您可以将此属性视为*伪元素*（更多内容见下文），以至于您可以使用它来操作它的 CSS *，并且看起来*`content`您`:before`已经`:after`更改了. 使用 Firefox，至少现在是不可能的（以后也会更多）。使用 IE9（我测试过的唯一版本），它似乎不起作用。*`placeholder`*

 *以下仅适用于 Chrome：

**标记**

```
<input type="text" class="before" placeholder="Wide "/><br/>
<input type="text" placeholder="Wide "/><br/>
<input type="text" placeholder="Wide "/> 
```

**CSS**

```
.before::-webkit-input-placeholder:before {
    content: 'Hello \A';
    font-size: 12px;
    color: red;
}
::-webkit-input-placeholder:before {
    content: 'Hello ';
    font-size: 12px;
    color: red;
}
::-webkit-input-placeholder {
    white-space: pre;
    font-size: 5px;
}
::-webkit-input-placeholder:after {
    content: 'World';
    font-size: 12px;
    color: blue;
} 
```

[http://jsfiddle.net/LDkjW/](http://jsfiddle.net/LDkjW/)

请注意，其中有两个`:before`s，显示了两种方法，一种是`\A`在 CSS 中使用的换行符，还有一个括号`:before`，`:after`如果您感兴趣的话。您可以同意，`:after`如果您`\A`使用`:before`.

注意，如果你有一个它无法识别的伪选择器，浏览器会吓坏，所以如果你决定包含其他的，你应该在它自己的块中做每个供应商。此外，您会看到缺少`-input-`( `-moz`Firefox) 伪元素。那是因为 (ta-da)`textarea`也得到了`placeholder`治疗。至少 Chrome (IE?) 也将其应用于`textarea`s. 为什么`-input-`在里面，谁知道呢。

而已。我不知道它打算如何使用，但我怀疑它可能最好以另一种方式完成。如果您只关心 webkit 浏览器，那就太好了。否则，也许有一天……剩下的只是多余的。

* * *

**火狐**

您*可以*`placeholder`在 Firefox 中相当轻松地“从视图中删除” ：

```
::-moz-placeholder {
    font-size: 0;
    left-indent: -1000px;
    font-color: white;
} 
```

你明白了。`::-moz-placeholder`直到`:-moz-placeholder`最近，它被赋予了新的选择器绰号。让我们仔细看看。

```
:-moz-placeholder  // Legacy
::-moz-placeholder // As of FF17 
```

一个`:`按照惯例表示这引用了选定元素的*状态*。您`hover`的 s, `:link`, `visited`, `:focused`, 以及更有用的 CSS3 伪选择器，例如`:nth-child`, `:selected`,`:checked`等。

这`::-moz-placeholder`是一个*伪元素*，它不是观察元素的状态或条件，而是表示一个元素。一个*伪*元素。我们将走向何方，你可能会想。

从它看起来的样子来看，an`input`不是它看起来的样子。例如：

[http://dxr.mozilla.org/mozilla-central/layout/style/forms.css.html](http://dxr.mozilla.org/mozilla-central/layout/style/forms.css.html)

您可以使用以下命令通过 Firefox 的地址栏访问：

*资源：//gre-resources/forms.css*

我们发现如下内容：

```
input > .anonymous-div,
input::-moz-placeholder {
  word-wrap: normal !important;
  /* Make the line-height equal to the available height */
  line-height: -moz-block-height;
} 
```

和：

```
textarea > .anonymous-div,
input > .anonymous-div,
input::-moz-placeholder,
textarea::-moz-placeholder {
  white-space: pre;
  overflow: auto;
   ...
  -moz-text-decoration-color: inherit;
  -moz-text-decoration-style: inherit;
  display: inline-block;
  ime-mode: inherit;
  resize: inherit;
}
textarea > .anonymous-div.wrap,
input > .anonymous-div.wrap {
  white-space: pre-wrap;
}
textarea > .anonymous-div.inherit-overflow,
input > .anonymous-div.inherit-overflow {
  overflow: inherit;
}
input::-moz-placeholder,
textarea::-moz-placeholder {
  /*
   * Changing display to inline can leads to broken behaviour and will assert.
   */
  display: inline-block !important;
  /*
   * Changing resize would display a broken behaviour and will assert.
   */
  resize: none !important;
  overflow: hidden !important;
  /*
   * The placeholder should be ignored by pointer otherwise, we might have some
   * unexpected behavior like the resize handle not being selectable.
   */
  pointer-events: none !important;
  opacity: 0.54;
} 
```

我相信你已经注意到`input::-moz-placeholder`(?) 并且*也是*`textarea`乐趣的一部分。但是你注意到*了*吗？

 **```
textarea > .anonymous-div,
input > .anonymous-div, 
```

`.anonymous-div`? 那是什么呀？不管它是什么，选择器都表明它在`input/textarea`元素内。真的吗？

后来，不寻常的真相浮出水面：

```
 /*
  * Make form controls inherit 'unicode-bidi' transparently as required by
  *  their various anonymous descendants and pseudo-elements:
  *
  * <textarea> and <input type="text">:
  *  inherit into the XULScroll frame with class 'anonymous-div' which is a
  *  child of the text control.
  *
  * Buttons (either <button>, <input type="submit">, <input type="button">
  *          or <input type="reset">)
  *  inherit into the ':-moz-button-content' pseudo-element.
  *
  * <select>:
  *  inherit into the ':-moz-display-comboboxcontrol-frame' pseudo-element and
  *  the <optgroup>'s ':before' pseudo-element, which is where the label of
  *  the <optgroup> gets displayed. The <option>s don't use anonymous boxes,
  *  so they need no special rules.
  */
textarea > .anonymous-div,
input > .anonymous-div,
input::-moz-placeholder,
textarea::-moz-placeholder,
*|*::-moz-button-content,
*|*::-moz-display-comboboxcontrol-frame,
optgroup:before {
  unicode-bidi: inherit;
  text-overflow: inherit;
} 
```

所以你去。在您使用的所有元素中`div`嵌入了一个“匿名”( )。这里有一些 XUL 似乎与我们眼皮底下可能正在发生的事情很[相似：](https://developer.mozilla.org/en-US/docs/XUL/Tutorial/Adding_Methods_to_XBL-defined_Elements?redirectlocale=en-US&redirectslug=XUL_Tutorial/Adding_Methods_to_XBL-defined_Elements)`textarea``input[type=text]`

**许尔**

```
<box id="num" class="labeledbutton" title="Number of Things:" value="52"/>

<button label="Show" oncommand="document.getElementById('num').showTitle(true)"/>
<button label="Hide" oncommand="document.getElementById('num').showTitle(false)"/> 
```

**XBL**

```
<binding id="labeledbutton">
  <content>
    <xul:label xbl:inherits="value=title"/>
    <xul:label xbl:inherits="value"/>
  </content>
  <implementation>
    <method name="showTitle">
      <parameter name="state"/>
      <body>
        if (state) document.getAnonymousNodes(this)[0].
          setAttribute("style","visibility: visible");
        else document.getAnonymousNodes(this)[0].
          setAttribute("style","visibility: collapse");
      </body>
    </method>
  </implementation>
</binding> 
```

不幸的是，Firefox 处理这种“匿名”伪元素的方式意味着您可能无法`placeholder`像我们在 Chrome 中那样操作 's 文本。

刚才我找到了包含`input`和`placeholder`机制/定义的 XUL/XBL 标记。这里是：

```
 <property name="label" onset="this.setAttribute('label', val); return val;"
                         onget="return this.getAttribute('label') ||
                                        (this.labelElement ? this.labelElement.value :
                                         this.placeholder);"/>
  <property name="placeholder" onset="this.inputField.placeholder = val; return val;"
                               onget="return this.inputField.placeholder;"/>
  <property name="emptyText" onset="this.placeholder = val; return val;"
                             onget="return this.placeholder;"/> 
```

哪个处理`placeholder`交换。以下显示在 中`.anonymous-div`，它似乎被核心中的一些代码换掉了。我会省去你那些血淋淋的细节。

```
 <binding id="input-box">
    <content context="_child">
      <children/>
      ...
    </content> 
```

我在其中找到的最后两个块：

```
jar:file:///C:/path/to/a/FirefoxPortable/App/firefox/omni.ja!/chrome/toolkit/content/global/bindings/textbox.xml 
```

如果您有兴趣涉足 Firefox 的业务（或一般情况下），如果您有兴趣了解更多实际的 chrome HTML 和 CSS 文件，请试试这个：

*资源：//gre-资源/*

[`::-webkit-input-placeholder`您可以在此问题上或`::-moz-placeholder`在此问题](https://stackoverflow.com/questions/2610497/change-an-inputs-html5-placeholder-color-with-css/2610741#2610741)中阅读更多信息。请注意，这种特殊类型的选择器（*伪元素*，*不是伪类*......至少*最近*......）在样式表中使用它们的方式有些脆弱。

[http://dxr.mozilla.org/mozilla-central/layout/style/forms.css.html](http://dxr.mozilla.org/mozilla-central/layout/style/forms.css.html)

呸。没想到这场狙击狩猎会结束。希望对某人有所帮助。我学到了一些东西，比如`input[type=text]`元素上的上下文菜单被*硬编码*到带有元素标记定义的 XUL 代码中。另一个惊喜。

无论如何，祝你好运。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T18:09:42.573

仅使用 CSS 不可能从字面上做到这一点。您的尝试也有点偏离，`placeholder`不是元素而是属性，并且该`content`属性仅与`:before`和`:after`属性一起使用，`input`不支持。（你的拼写也有错误`placehodler`）

最好的方法是在标记中更改它，或者如果不可能，使用 javascript：

```
yourElementSelector.placeholder = 'Search by name'; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-09T18:09:55.297

不，你能想象使用 CSS 改变字段的值吗？

你所期待的，和这个一样。你应该使用javascript。*****

# c++ - XLL RTD 编辑中的 Excel UDF 导致公式丢失正确的主题

> ID：15314091
> 
> 赞同：0
> 
> 时间：2013-03-09T18:05:43.403
> 
> 标签：c++, windows, excel, xll, rtd

我正在同一个 dll 中构建 XLL + RTD。RTD 不是直接从 Excel 调用，而是通过包装公式调用。类似于此处的示例[Excel 中的自定义函数：第五部分，XLL-RTD](http://www.codeproject.com/Articles/430703/Custom-Functions-in-Excel-Part-V-XLL-RTDs)

该功能似乎可以正常工作，但是当我手动编辑公式输入时，Excel 会将编辑后的公式与主题编号为 0 的公式混淆。已编辑项目的 ConnectData 和旧项目的 DisconnectData 都使用正确的主题 ID 调用。

这可能是什么解决方案？

# php - 使用多个插入在 PHP 和 MySQL 中获取插入的行 ID

> ID：15314102
> 
> 赞同：1
> 
> 时间：2013-03-09T18:06:33.930
> 
> 标签：php, mysql

MySQL 代码类似于：

```
INSERT INTO table(name, value) VALUES ('name1', 'value1'), ('name2', 'value2'), ('name3', 'value3') 
```

基本上，在同一个 SQL 语句中插入多个。

如何获取插入值的 ID。我假设 mysql_insert_id() 与插入次数相结合是不安全的，因为其他人可能会同时插入一些东西。

还有其他方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T18:11:04.640

您要么需要一次插入一个，要么通过后续查询找出 ID。

```
INSERT INTO table(primkey, value) VALUES ('pk1', 'val1'), ('pk2', 'val2');
SELECT FROM table id, primkey where primkey in ('pk1', 'pk2'); 
```

# ios - XML Parser 只返回最后一个元素

> ID：15314104
> 
> 赞同：0
> 
> 时间：2013-03-09T18:06:47.867
> 
> 标签：ios, objective-c, cocoa-touch, nsxmlparser

因此，我正在构建一个请求 xml 文件并对其进行解析的应用程序。以下代码将名称放入标签中，其余数据放入文本视图中。现在，我在 if 语句中包含了一个条件，该条件计算循环运行的次数，只返回前两个元素。或者至少这是我应该做的。

repCount 最初设置为 0。

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURIqualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict { WeatherItem *weatherItem = [[WeatherItem alloc] init];

//Is a Location node
if ([elementName isEqualToString:@"Location"])
{

    weatherItem.name = [attributeDict objectForKey:@"name"];

    locationLabel.text = [NSString stringWithFormat:@"%@", weatherItem.name];

    NSLog(@"weatherName---> %@", weatherItem.name);

}

//Is a Rep node
if ([elementName isEqualToString:@"Rep"] && repCount  <= 1)
{

    weatherItem.winddir = [attributeDict objectForKey:@"D"];
    weatherItem.visibility = [attributeDict objectForKey:@"V"];
    weatherItem.windspeed = [attributeDict objectForKey:@"S"];
    weatherItem.temperature = [attributeDict objectForKey:@"T"];
    weatherItem.precipprob = [attributeDict objectForKey:@"Pp"];
    weatherItem.weather = [attributeDict objectForKey:@"W"];

    NSLog(@"weatherItem---> %@", weatherItem.precipprob); //easiest value to keep track of

    resultsTextView.text = [NSString stringWithFormat:
                            @"Wind Dir:%@\nVisibility:%@\nWind Speed:%@mph\nTemperature:%@C\nPrecip Prob.:%@%%\nWeather:%@\n",

                            weatherItem.winddir, weatherItem.visibility, weatherItem.windspeed,
                            weatherItem.temperature, weatherItem.precipprob, weatherItem.weather];

    repCount ++;

}

repCount = 0;} 
```

问题是它只返回 XML 文件中的最后一个元素，而不是前两个。我会假设它运行一次循环（repCount 为 0）然后将其触发到 resultsTextView。第二次运行它（repCount 现在为 1），然后将其添加到触发到 resultsTextView 的内容中。然后它会停止，因为它将通过 repCount <= 1 的检查。

我错过了什么？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T18:12:52.300

我认为原因是你有一个任务`repCount`在你的方法结束时清除了：

```
repCount = 0; 
```

设置`repCount`为零需要在方法之外完成 - 无论是在初始化时，还是在启动文档事件处理程序中。目前，因为`repCount`在每个元素之后重置，所以您处理的*每个*`&& repCount <= 1`元素的条件部分都保持为真，因此最后一个元素的数据会覆盖之前的数据。

 *将`repCount = 0`分配移动到`parserDidStartDocument:`NSXMLParserDelegate 的方法中应该可以解决问题。*

# mysql - MySQL查询检查一列中的两个值

> ID：15314105
> 
> 赞同：-2
> 
> 时间：2013-03-09T18:06:53.630
> 
> 标签：mysql

我正在编写一个查询，其中列中有 4 种类型

```
Xtype
-----
P
C
D
R 
```

我想检查在哪里`Xtype=P`以及`Xtype=D`如何将两者用于同一列？我知道我可以使用不同的列，`WHERE id=1 AND status=online`但不确定如何检查同一列的两个值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T18:09:03.973

你可以`WHERE .. IN`这样使用：

```
WHERE XType IN ('P','D')    -- checks whether the  Xtype is P or D 
```

顺便说一句，它扩展到 OR：

```
WHERE (XType = 'P' OR Xtype = 'D') 
```

如果您想检查该列是否包含“P”和“D”的记录，那么您可以使用 EXISTS & 子查询：

```
WHERE EXISTS (SELECT 1 FROM TableName WHERE Xtype = 'P') 
  AND EXISTS (SELECT 1 FROM TableName WHERE Xtype = 'D') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T18:09:08.070

参见 Miky D.，除此之外您可以简单地使用`WHERE Xtype= 'P' OR Xtype = 'D'`，这背后没有任何魔力。

# linux - 修改linux协议表

> ID：15314114
> 
> 赞同：1
> 
> 时间：2013-03-09T18:07:45.227
> 
> 标签：linux, linux-kernel, ip

出于某种原因，我需要更改 linux 协议表。例如，我想 linux 将协议 1 识别为 ipv4（协议 4）或将协议 47 识别为 l2tp 。有谁知道如何在 linux 内核中或最好在 /sys 文件夹中更改它，所以我的客户端将协议 tcp 作为 icmp 协议发送，而在另一端它接收 icmp 并将其识别为 tcp。谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T18:53:24.203

协议编号在 中定义`include/uapi/linux/in.h`。在更改那里的东西时要非常小心，您将使您的操作系统与几乎所有其他东西不兼容。

编辑：当心那些公然忽略值`IPPROTO_TCP`以支持硬编码值的驱动程序......我刚刚在以下位置找到了这个“宝石” `drivers/infiniband/hw/nes/nes_cm.c`：

```
451     iph->protocol = 0x06;   /* IPPROTO_TCP */ 
```

# macos - NSDatePicker 错误

> ID：15314116
> 
> 赞同：0
> 
> 时间：2013-03-09T18:07:50.183
> 
> 标签：macos, cocoa, nsdate, nsdatepicker

每次我尝试在 xcode 中创建一个字符串时，它都不起作用，有人可以指出问题所在并请帮助

```
 NSString *date = self.DatePicker.date; 
```

这是错误“使用 'NSDate *' 类型的表达式初始化 'NSString * strong' 的不兼容指针类型”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T18:09:51.967

`self.DatePicker.date;`返回日期。

您将其存储在`NSString`.

利用：

```
NSDate *date = self.DatePicker.date; 
```

然后，如果您想将其存储在字符串中，请使用：

```
NSString *dateString = [NSDateFormatter localizedStringFromDate:[NSDate date] 
                                                  dateStyle:NSDateFormatterShortStyle 
                                                  timeStyle:NSDateFormatterFullStyle]; 
```

# android - 读取 sharedpreferences 上的数组

> ID：15314120
> 
> 赞同：1
> 
> 时间：2013-03-09T18:08:14.180
> 
> 标签：android, multiselectlistpreference

我使用 MultiSelectListPreference 并将值保存在数组中..

怎么会读？？

```
 SharedPreferences pref = PreferenceManager.getDefaultSharedPreferences(this);
    Set<String> a = pref.getStringSet("tabs", null);

    for ( int i = 0; i < a.size(); i++) {
        Log.d("salida", a[i]);
    } 
```

我收到此错误：表达式的类型必须是数组类型，但它解析为 Set

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T18:16:39.553

您想使用[`Set`](https://developer.android.com/reference/java/util/Set.html)，并且由于它不是数组，因此方括号 ( `[]`) 不能用于访问索引。

要轻松地从 中读取值`Set`，请使用增强的 for 循环：

```
for (String str: a){
  Log.d("salida", str);
} 
```

如果要在循环时从该 Set 中删除项目，则必须使用[`Iterator`](https://developer.android.com/reference/java/util/Iterator.html)，如[this](https://stackoverflow.com/a/1110425/1815485) answer所示。

或者，如果你想要一个数组，你可以使用[`Set#toArray()`](https://developer.android.com/reference/java/util/Set.html#toArray%28T%5B%5D%29)：

```
String [] prefStrings = a.toArray(new String[a.size()]); 
```

然后您可以使用方括号 ( `prefStrings[position]`) 来访问索引。

# mysql - 在 unixtime (INT 10) 检查间隔中存储的日期

> ID：15314124
> 
> 赞同：0
> 
> 时间：2013-03-09T18:08:31.567
> 
> 标签：mysql, unix-timestamp

我有一个表来存储用于汽车租赁目的的数据（预订等待响应）。这是一个名为“initiated_datime”（INT，10）的字段，其中存储了预订的启动日期（我已经知道 INT 10 不是最有效的方式，2038 等）。

我想查看等待响应超过 24 小时的预订，以便进一步报告...

以下示例对我有用

```
SELECT * FROM rentals WHERE rental_flag = 1 AND '".$cur_datetime_unixtime."' >(initiated_datime + 86400) ... WHERE $cur_datetime_unixtime is created in php 
```

和

```
SELECT * FROM rentals WHERE rental_flag = 1 AND unix_timestamp(now()) > (initiated_datime + 86400) 
```

有没有办法用更有效的代码来改变（initated_datime + 86400）？比如：unix_timestamp（initiate_datime + 1 天间隔）？

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T18:22:19.827

不是一般情况；但在这种情况下，这种不平等等同于：

```
SELECT * FROM rentals WHERE rental_flag = 1 
AND unix_timestamp(now() - INTERVAL 1 DAY) > initiated_datime 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T18:11:25.683

解决此问题的最有效方法是将列更改为`datetime`. 您可以轻松地使用[日期/时间](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html)函数来操作您的过滤器。

# c# - 托管和非托管代码错误 C3699

> ID：15314126
> 
> 赞同：0
> 
> 时间：2013-03-09T18:08:48.907
> 
> 标签：c#, c++, unmanaged, managed

我正在开发一个使用 C# 和 C++ 的游戏。模型类是用 C# 编写的，层级结构存储在 XML 文件中。当我想用 C++ 阅读它并想构建项目时，我遇到了这个奇怪的错误，而且我在哪里找不到一些错误。

```
Error   1   error C3699: '*' : cannot use this indirection on type 'Cadet::XMLReader::Models::Obstacle' C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\include\xmemory0 527 1   Cadet.Game 
```

这些错误在`xmemory0`和`list`文件中？它们是什么？它只发生在障碍类中，其余的都很好。

这是代码的一部分

```
 void SetupObstacles(std::list<Cadet::Game::Entities::Obstacle>  &obstacles)
    {
     int size = CurrentLevel->Obstacles->Length;
     Cadet::XMLReader::Models::Obstacle^ currentObstacle;
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T20:01:05.203

它看起来像是`Cadet::Game::Entities::Obstacle`一个托管类（因为您已将 声明`currentObstacle`为引用`^`）。如果是这种情况，您不能直接将托管对象存储在 STL 容器中，例如`std::list<>`.

在没有更多上下文的情况下，很难说下一步该做什么，但一种可能的解决方法是改变你的`SetupObstacles`方法：

```
void SetupObstacles(System::Collections::Generic::List<Cadet::Game::Entities::Obstacle>^ obstacles)
    { ... } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T18:14:04.487

你有指向`Obstacle`某个地方的指针吗？

[此错误](http://msdn.microsoft.com/en-us/library/w4ctbshy%28v=vs.110%29.aspx)的帮助表明某些类型（例如普通属性）不能有引用类型——你不能有指向它的指针。尝试`^`改用。

# c - "" 语言 C 和 graphics.h 的多重定义

> ID：15314127
> 
> 赞同：1
> 
> 时间：2013-03-09T18:08:57.907
> 
> 标签：c, graphics

我正在尝试使用语言和 graphics.h 编写一些代码以绘制折线图，​​但是：

我明白了：

> xGraphics2Screen(double)' 的多重定义... ld 返回 1 个退出状态`InitGraphics(char*)' first defined here
> multiple definition of`

我不知道会发生什么？

你能帮忙吗谢谢

代码 ：

```
#include<stdio.h>
#include<stdlib.h>
#include<math.h>
#include "tri.h"
#include<time.h>
#include<graphics.h>

typedef struct {
    int key;
    unsigned long value;        
}Map;

static double s_xGraphicsMin;
static double s_yGraphicsMin;
static double s_xGraphicsMax;
static double s_yGraphicsMax;
static int s_xScreenMax, s_yScreenMax;

int InitGraphics( char * pszBgiPath )
{
    int gdriver = DETECT, gmode, errorcode;

    // Recherche le meilleur mode possible
    initgraph(&gdriver, &gmode, pszBgiPath);

    // Verifie que ca marche
    errorcode = graphresult();
    if (errorcode != grOk)
    {
        // Probleme !
        return -1;
    }

    // Recupere la taille de l'ecran en pixels
    // Sauvegarde dans des globales
    s_xScreenMax = getmaxx();
    s_yScreenMax = getmaxy();
    return 0;
}

int yGraphics2Screen( double yGraphic )
{
    int yScreen;

    yScreen = (int)(s_yScreenMax -
                    s_yScreenMax *
                    (double)(yGraphic - s_yGraphicsMin) /
                    (double)(s_yGraphicsMax - s_yGraphicsMin));
    return yScreen;
}

int xGraphics2Screen( double xGraphic )
{
    int xScreen;
    xScreen = (int)(s_xScreenMax *
        (double)(xGraphic - s_xGraphicsMin) /
        (double)(s_xGraphicsMax - s_xGraphicsMin));
    return xScreen;
}

void DrawGraphicsAxys( int color, double xPas, double yPas,char * pszxTitle, char * pszyTitle )
{
    int xScreenCenter, yScreenCenter;
    double x,y;
    char sz[25];

    // Couleur
    setcolor(color);

    // Dessine l'axe des X
    yScreenCenter = yGraphics2Screen(0);
    line( 0, yScreenCenter, s_xScreenMax, yScreenCenter );

    // Dessine l'echelle des X au pas xPas
    for( x = s_xGraphicsMin; x < s_xGraphicsMax; x += xPas )
    {
        double xArrondi;
        int xScreen;

        // On dessine
        xArrondi = x - fmod(x,xPas);
        if( xArrondi != 0 )
        {
            xScreen = xGraphics2Screen(xArrondi);
            line( xScreen, yScreenCenter - 2,
                  xScreen, yScreenCenter + 2 );

            sprintf( sz, "%5.2f", xArrondi );
            outtextxy(xScreen - 5, yScreenCenter + 6, sz );
        }
    }

    // Dessine l'axe des Y
    xScreenCenter = xGraphics2Screen(0);
    line( xScreenCenter, 0, xScreenCenter, s_yScreenMax );

    // Titre en X
    if( pszxTitle )
        outtextxy(s_xScreenMax - s_xScreenMax/3, yScreenCenter + 20, pszxTitle );

    // Dessine l'echelle des Y au pas yPas
    for( y = s_yGraphicsMin; y < s_yGraphicsMax; y += yPas )
    {
        double yArrondi;
        int yScreen;

        // On dessine
        yArrondi = y - fmod(y,yPas);
        if( yArrondi != 0 )
        {
            yScreen = yGraphics2Screen(yArrondi);
            line( xScreenCenter - 2, yScreen,
                  xScreenCenter + 2, yScreen );

            sprintf( sz, "%5.2f", yArrondi );
            outtextxy(xScreenCenter + 6, yScreen, sz );
        }
    }

    // Titre en Y
    if( pszyTitle )
        outtextxy( xScreenCenter + 15, 10, pszyTitle );
}

int main()
{

 system("pause");
 return 0;   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T18:15:42.407

**graphics.h**已经包含一个名为**InitGraphics()**的函数。您需要更改*函数*的名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T18:19:39.603

```
int InitGraphics( char * pszBgiPath ) 
```

重命名该函数，因为它已经在 graphics.h 中

# objective-c - 如何限制正则表达式中完整单词的字符数

> ID：15314131
> 
> 赞同：0
> 
> 时间：2013-03-09T18:09:07.510
> 
> 标签：objective-c, regex

我需要将长字符串打印成不同的字符串，字符限制为 20，并且必须允许使用完整的单词和空格、符号、逗号、点。

假设字符串是：

> 我有字符串搜索整个网络或仅网页在做了一些研究后，我想我想将 if/then 语句与前瞻结合起来，即转到字符限制，如果后面有一个字符是空格，添加一个省略号，如果是数字或字母，则到限制内的最后一个空格处添加一个省略号

它必须像这样打印：

> 我有字符串搜索 ------> 20Characters with Complete Word
> the entire web or ------> 16C 因为限制是 20 但下一个单词 Complete's at 21C 所以它的限制为 16C 只有网页之后 ----- --> 19C 因为限制是 20 但下一个单词以 25C 结尾

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T23:33:23.503

使用这个正则表达式模式：`(.{1,20})(?:\s|$)`

转义正则表达式：`(.{1,20})(?:\\s|$)`

在这里解释演示：[http ://regex101.com/r/pU4kI8](http://regex101.com/r/pU4kI8)

# java - 我的 Maven 项目的问题

> ID：15314136
> 
> 赞同：0
> 
> 时间：2013-03-09T18:09:27.847
> 
> 标签：java, maven

我试图构建一个简单的 Maven 项目，但遇到了一些困难。我正在查看该站点的说明-> [http://www.mkyong.com/hibernate/quick-start-maven-hibernate-mysql-example/](http://www.mkyong.com/hibernate/quick-start-maven-hibernate-mysql-example/)

但是当我查看结构时，我发现在我的项目结构中，我找不到`.project`和`.classpath` 文件。我只找到了`pom.xml`. 当我运行这个项目时，我遇到了一个错误：

```
Exception in thread "main" java.lang.NoClassDefFoundError: com/henry/directory/App
Caused by: java.lang.ClassNotFoundException: com.henry.directory.App
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247) 
```

这是我的`pom.xml`文件：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.henry.directory</groupId>
  <artifactId>FirstMaven</artifactId>
  <packaging>jar</packaging>
  <version>1.0-SNAPSHOT</version>
  <name>FirstMaven</name>
  <url>http://maven.apache.org</url>
  <dependencies>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>3.8.1</version>
      <scope>test</scope>
    </dependency>

      <!-- MySQL database driver -->
    <dependency>
        <groupId>mysql</groupId>
        <artifactId>mysql-connector-java</artifactId>
        <version>5.1.9</version>
    </dependency>

    <!-- Hibernate framework -->
    <dependency>
        <groupId>hibernate</groupId>
        <artifactId>hibernate3</artifactId>
        <version>3.2.3.GA</version>
    </dependency>

    <!-- Hibernate library dependecy start -->
    <dependency>
        <groupId>dom4j</groupId>
        <artifactId>dom4j</artifactId>
        <version>1.6.1</version>
    </dependency>

    <dependency>
        <groupId>commons-logging</groupId>
        <artifactId>commons-logging</artifactId>
        <version>1.1.1</version>
    </dependency>

    <dependency>
        <groupId>commons-collections</groupId>
        <artifactId>commons-collections</artifactId>
        <version>3.2.1</version>
    </dependency>

    <dependency>
        <groupId>cglib</groupId>
        <artifactId>cglib</artifactId>
        <version>2.2</version>
    </dependency>
    <!-- Hibernate library dependecy end -->

    <dependency>
        <groupId>javax.transaction</groupId>
        <artifactId>jta</artifactId>
        <version>1.1</version>
    </dependency>   
  </dependencies>
</project> 
```

我希望有人可以帮助我解决为什么找不到该课程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T07:40:52.430

感谢您的回复，问题是休眠 artifactId 不正确。由于某些原因，我不知道，但这就是我目前正在调查的内容..

# iphone - 从不存在的视图中删除子视图

> ID：15314143
> 
> 赞同：1
> 
> 时间：2013-03-09T18:10:16.910
> 
> 标签：iphone, ios, objective-c, uiscrollview, subview

我的应用程序中有一个滚动视图。如果我单击一个页面上的按钮，则会添加一个子视图。当用户滚动视图时，我想删除这个子视图。这个函数被称为：

```
-(void) DisableViews {
    [Annimation removeFromSuperview];
    NSLog(@"scroll");
} 
```

我多次获得 NSLog，但当我回到页面时，视图也是子视图。

我认为这会发生，因为此时带有子视图的视图不是当前视图，所以我无法删除子视图。

是否有可能从子视图的任何视图中删除子视图？

编辑：ViewController.h

```
@interface ViewController : UIViewController {

//...

    UIView *Annimation;

}

@property (nonatomic,retain) UIView *Annimation; 
```

执行：

```
 ViewController.m

 #import "ViewController.h"
 #import "AppDelegate.h"

 @implementation ViewController

 @synthesize Annimation;

 //...

 - (void) Bild1ButtonKlickt{
     Annimation = [[UIView alloc]initWithFrame:CGRectMake(0.0, 0.0, 320.0, 480.0)];
     Annimation.backgroundColor = [UIColor blackColor];
     [self.view addSubview:Annimation]; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T19:01:25.073

最有可能的是“动画”（我假设它是一个 ivar）`nil`，因此当您尝试删除它时什么也没有发生。

（注意，不要以这种方式直接访问您的 ivars。应该调用您的属性`animationView`（以明确它是视图而不是`NSAnimation`，并且您应该通过 访问它`self.animationView`。此外，方法应始终具有前导小写。ObjC对方法和属性命名非常敏感。正确的命名对运行时很重要；这不仅仅是风格。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T12:25:27.513

按照要求回答：那是该滚动视图中唯一的子视图吗？无论如何，[如何从滚动视图中删除子视图的答案之一？](https://stackoverflow.com/questions/1310723/how-to-remove-subviews-from-scrollview)应该管用。

现在上面页面中的哪个答案解决了它？

# php - CodeIgniter 新闻教程 - 删除和更新

> ID：15314145
> 
> 赞同：0
> 
> 时间：2013-03-09T18:10:35.160
> 
> 标签：php, codeigniter

我是 CodeIgniter 的新手，我已经按照教程制作了一个新闻应用程序。我现在正在删除和更新新闻文章，但我不知道该怎么做。

到目前为止，这是我想出的，但是它不起作用，因为当我单击索引中的删除文章时，所发生的只是我收到一条错误消息：`webpage cannot be found`。

新闻控制器：

```
<?php
class News extends CI_Controller {

    public function __construct()
    {
        parent::__construct();
        $this->load->model('news_model');
    }

    public function index()
    {
        $data['news'] = $this->news_model->get_news();
        $data['title'] = 'News archive';

        $this->load->view('templates/header', $data);
        $this->load->view('news/index', $data);
        $this->load->view('templates/footer');

    }

    public function view($slug)
    {
        $data['news'] = $this->news_model->get_news($slug);
        if (empty($data['news_item']))
        {
            show_404();
        }

        $data['title'] = $data['news_item']['title'];

        $this->load->view('templates/header', $data);
        $this->load->view('news/view', $data);
        $this->load->view('templates/footer');

    }

    public function create()
    {
        $this->load->helper('form');
        $this->load->library('form_validation');

        $data['title'] = 'Create a news item';

        $this->form_validation->set_rules('title', 'Title', 'required');
        $this->form_validation->set_rules('text', 'text', 'required');

        if ($this->form_validation->run() === FALSE)
        {
            $this->load->view('templates/header', $data);   
            $this->load->view('news/create');
            $this->load->view('templates/footer');

        }
        else
        {
            $this->news_model->set_news();
            $this->load->view('news/success');
        }
    }

    public function delete($id) {
        $this->news_model->delete_news($id);
        $this->load->helper('url');
        redirect('/news');
    }

} 
```

新闻模型：

```
<?php
class News_model extends CI_Model {

    public function __construct()
    {
        $this->load->database();
    }

    public function get_news($slug = FALSE)
    {
        if ($slug === FALSE)
        {
            $query = $this->db->get('news');
            return $query->result_array();
        }

        $query = $this->db->get_where('news', array('slug' => $slug));
        return $query->row_array();
    }

    public function set_news()
    {
        $this->load->helper('url');

        $slug = url_title($this->input->post('title'), 'dash', TRUE);

        $data = array(
            'title' => $this->input->post('title'),
            'slug' => $slug,
            'text' => $this->input->post('text')
        );

        return $this->db->insert('news', $data);
    }

    public function delete_news($id) 
    {
        $this->db->delete('news', array('id' => $id));
    }

} 
```

指数 ：

```
<?php foreach ($news as $news_item): ?>

    <h2><?php echo $news_item['title'] ?></h2>
    <div id="main">
    <?php echo $news_item['text'] ?>
    </div>
    <p><a href="news/<?php echo $news_item['slug'] ?>">View article</a></p>
    <p><a href="news/delete/<?php echo $news_item['id'] ?>">delete article</a></p>

<?php endforeach ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T21:32:47.877

你必须使用绝对路径

```
<a href="<?php echo base_url(); ?>news/delete/<?php echo $news_item['id'] ?>">delete article</a> 
```

删除后也在你的控制器中

代替

```
redirect('/news'); 
```

使用绝对路径，或者你可以简单地写

```
$this->index(); 
```

# monodevelop - Xamarin Studio for Mac 帮助系统不起作用

> ID：15314148
> 
> 赞同：0
> 
> 时间：2013-03-09T18:10:48.220
> 
> 标签：monodevelop

Xamarin Studio（4.0 build 2003）帮助系统不起作用 - 选择帮助->帮助没有任何反应，帮助面板也显示帮助目录的结构，但没有内容我尝试重新安装但没有成功任何线索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T13:43:14.393

有一个已知的错误阻止它在大多数 Mac OS X 版本上运行（我认为它只适用于 Mountain Lion 或其他东西）。

它应该在即将发布的版本中修复。

# ios - Facebook iOS 选择好友表空白

> ID：15314154
> 
> 赞同：1
> 
> 时间：2013-03-09T18:11:12.807
> 
> 标签：ios, facebook

我正在尝试将“选择朋友”添加到我的 iOS 应用程序中。我设置了登录视图。登录后，我打开朋友选择器，但它显示为空白。我看到带有完成和取消按钮的表格，但表格中没有加载任何朋友。

```
- (IBAction)selectFriendsButtonAction:(id)sender {
    if (self.friendPickerController == nil) {
        // Create friend picker, and get data loaded into it.
        self.friendPickerController = [[FBFriendPickerViewController alloc] init];
        self.friendPickerController.title = @"Select Friends";
        self.friendPickerController.delegate = self;
    }
    [self.friendPickerController loadData];
    [self.friendPickerController clearSelection];
    [self presentViewController:self.friendPickerController animated:YES completion:nil];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:32:27.923

在打开好友选择器控制器之前，通过调用以下命令确保您的 Facebook 会话处于活动状态：

```
if (!FBSession.activeSession.isOpen) {
    // if the session is closed, then we open it here, and establish a handler for state changes
    [FBSession.activeSession openWithCompletionHandler:^(FBSession *session,
                                                         FBSessionState state,
                                                         NSError *error) {
        // Handle error
    }];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-24T07:13:42.147

If you use "FBFriendPickerViewController", it seems return friends who also use this APP. In Facebook document: after API Graph v2.0, "me/friends" will only return friends that also use the app. I think that's why the friend table is blank.

There is another option that you can use "FBTaggableFriendPickerViewController" instead. But your APP will need to be reviewed by Facebook before it can get data back. ([https://developers.facebook.com/docs/graph-api/reference/v2.2/user/taggable_friends?locale=zh_TW](https://developers.facebook.com/docs/graph-api/reference/v2.2/user/taggable_friends?locale=zh_TW))

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-14T05:55:15.003

即使您非常了解 Facebook SDK 的其余部分，您也可能没有意识到您需要注意两件事。

1.  该对话框将仅显示也安装了该应用程序的朋友。
2.  您必须在登录流程中请求 user_friends 权限。

对于 1.，创建或使用您已经拥有的测试用户并与该用户一起运行您的应用程序，以便授权该应用程序进行基本访问（“安装”它）。

对于 2，将该权限添加到您的登录流程中，注销并使用您正在测试的发件人（可能是您自己的用户）重新登录，如果即使那时您也没有收到提示，请通过[https 卸载该应用程序： //www.facebook.com/settings/?tab=applications](https://www.facebook.com/settings/?tab=applications)。

[http://www.brianjcoleman.com/tutorial-get-facebook-friends-in-swift/](http://www.brianjcoleman.com/tutorial-get-facebook-friends-in-swift/)讨论了其中的一些内容。Facebook 文档本身要么根本不提及这两个问题，要么被埋没。

# c++ - C++ 中用于 GUI 的 WXwidgets：

> ID：15314155
> 
> 赞同：0
> 
> 时间：2013-03-09T18:11:15.130
> 
> 标签：c++, user-interface, wxwidgets, codeblocks

我完全是创建 GUIS 的初学者，我正在使用 wxwidgets 在 CodeBlocks 中创建 GUI 程序。我在这里关注本教程：

[http://wiki.codeblocks.org/index.php?title=WxSmith_tutorials](http://wiki.codeblocks.org/index.php?title=WxSmith_tutorials)

我已经弄清楚如何创建对话框和框架。现在，我在 C++ 中创建了一个程序，该程序从 .txt 文件中读取信息并调用方法 displayInfo()，该方法使用 cout 打印此信息。我想做的是通过单击一个按钮在单个窗口上打印此信息，例如：“打印信息”。

我发现很难的部分是如何从框架的 main.cpp 调用我的 displayInfo() 方法，以及如何在窗口而不是终端上显示该信息。我试图在框架的 main.cpp 中导入我的类的头文件，并调用 displayInfo()，但我认为这不是正确的方法。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T18:51:12.927

wxWidgets 有一些预定义的对话框用于显示少量文本。

见[wxMessageBox 描述](http://docs.wxwidgets.org/2.8/wx_dialogfunctions.html#wxmessagebox)

否则，您将不得不在面板或窗口上使用 DrawText 方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T22:10:37.230

我建议使用文本控件，然后将 cout 重定向到文本控件

像这样：

```
#include <iostream>

  wxTextCtrl *control = new wxTextCtrl(...);

  wxStreamToTextRedirector redirect(control);

  // all output to cout goes into the text control until the exit from current
  // scope 
```

有关此技巧的巧妙变化的更多讨论，请查看：

[http://docs.wxwidgets.org/2.8/wx_wxtextctrl.html](http://docs.wxwidgets.org/2.8/wx_wxtextctrl.html)

向下滚动到标题为：wxTextCtrl 和 C++ 流的部分

# html - 更改图标标签的 css sprite 位置

> ID：15314158
> 
> 赞同：0
> 
> 时间：2013-03-09T18:11:46.113
> 
> 标签：html, css, tags, icons

我正在尝试更改悬停时图标标签的背景位置。如果它在图标标签而不是 a 标签中，我该怎么做？

html图标标签是：

```
<a class="info" href="#"><i class="tag"></i> Info</a>
<a class="info" href="#"><i class="other_tag"></i> Other Info</a> 
```

CSS是：

```
.tag {
    background: url('images/tag.png') no-repeat 0 0;
    width: 13px;
    height: 13px;
    display: inline-block;
}

.other_tag {
    background: url('images/other_tag.png') no-repeat 0 0;
    width: 13px;
    height: 13px;
    display: inline-block;
}

.info {
    color: #6a9d2b;
    position: relative;
    left: 10px;
    text-decoration: none;
    line-height: 20px;
}

.info:hover {
    background-position: 0 -13px;
    color: #4a6e1e;
} 
```

图标宽度实际上是 13px 宽和 31px 高。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T18:20:42.950

只需像这样放置嵌套规则：

```
.info:hover .tag {
  /* Put a different background position */
}

.info:hover .other-tag {
  /* Put a different background position */
} 
```

# javascript - js点击图片点击下拉

> ID：15314159
> 
> 赞同：0
> 
> 时间：2013-03-09T18:11:52.437
> 
> 标签：javascript, slider

我对 JS 很陌生，我想在单击图像时创建一个下拉菜单。当单击下拉菜单时，应该向下滑动以显示一些额外的信息，并且应该保持向下并保持显示信息，然后当单击这些标签中的另一个时，向下的一个应该向后滑动，新的向下滑动。

你能告诉我怎么做或者给我一些教程吗？

非常感谢！

这是一个例子：http: [//twitter.github.com/bootstrap/javascript.html#collapse](http://twitter.github.com/bootstrap/javascript.html#collapse)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T18:35:33.593

你要找的东西叫做手风琴。这是我发现使用 jQuery 的一个很好的教程：

[http://tutorialzine.com/2009/12/colorful-content-accordion-css-jquery/](http://tutorialzine.com/2009/12/colorful-content-accordion-css-jquery/)

# javascript - Visual Studio 2012 的任何免费插件可以重命名 JavaScript 变量吗？

> ID：15314163
> 
> 赞同：2
> 
> 时间：2013-03-09T18:12:15.047
> 
> 标签：javascript, visual-studio-2012

我知道这里有人问过这个问题：[Renaming variables in JavaScript](https://stackoverflow.com/questions/15029203/renaming-variables-in-javascript)，但我正在寻找免费选项。

有谁知道 Visual Studio 2012 的一个很好的插件来添加对 JavaScript 变量重命名的支持？目前我不得不做一个查找和替换，这似乎是来自 C# 的古老。

也欢迎提供更好的 JavaScript 支持的替代 IDE 的想法。

非常感谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T19:51:28.323

我同意 Stanley_A 的购买[http://www.jetbrains.com/resharper/](http://www.jetbrains.com/resharper/)的建议。虽然它不是我希望的免费，但我不得不说它非常棒。它解决了我的重命名问题，但不仅如此，它还提供了令人难以置信的智能感知，goto 定义现在可以按预期工作，并且它已经发现了两个自动突出显示的潜在错误。聪明的东西。

# ios - 使用随机到达的 UIImages 进行 IOS 视频录制

> ID：15314166
> 
> 赞同：0
> 
> 时间：2013-03-09T18:12:22.910
> 
> 标签：ios, video, uiimage, recording

我正在开发一个 iOS 应用程序，该应用程序从互联网连接随机获取 UIImages，并在图像进入时逐步从它们构建一个视频文件。我让它工作了一点，但图像并没有到达相同的事实率一直在搞乱视频。

当每个新的 UIImage 到达时，如何重新计算 CMTime 以便它调整到达 UIImage 的不同帧速率，这些帧速率可以从毫秒到秒的任何时间到达？

这是我到目前为止所做的，一些代码没有显示，但这是基本的东西

```
.
.
adaptor = [AVAssetWriterInputPixelBufferAdaptor
           assetWriterInputPixelBufferAdaptorWithAssetWriterInput: videoStream
           sourcePixelBufferAttributes:attributes];

CMTime frameTime=CMTimeMake(1,10); // assumed initial frame rate
.
.

 -(void)addImageToMovie:(UIImage*)img {
     append_ok=FALSE;
     buffer = [self pixelBufferFromCGImage:[img CGImage] andSize:img.size];
     while (!append_ok) {
        if (adaptor.assetWriterInput.readyForMoreMediaData){
            frameTime.value +=1;
            append_ok = [adaptor appendPixelBuffer:buffer withPresentationTime:frameTime];
            [NSThread sleepForTimeInterval:0.01];
        } else {
            [NSThread sleepForTimeInterval:0.01];
        }
     }
     if(buffer) {
       CVBufferRelease(buffer);
     }
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T20:29:44.860

这取决于帧数。不是加 1，而是将 10 加到 frameTime.value。

# iphone - 获取一周的第一天和最后一天

> ID：15314167
> 
> 赞同：1
> 
> 时间：2013-03-09T18:12:28.917
> 
> 标签：iphone, ios, objective-c

我正在使用这种方法来获取当前周的第一天和最后几天：

```
NSDate *weekDate = [NSDate date];
NSCalendar *myCalendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];

NSDateComponents *currentComps = [myCalendar components:( NSYearCalendarUnit | NSMonthCalendarUnit | NSWeekOfYearCalendarUnit | NSWeekdayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit) fromDate:weekDate];
int ff = currentComps.weekOfYear;
NSLog(@"1  %d", ff);

[currentComps setWeekday:1]; // 1: sunday
NSDate *firstDayOfTheWeek = [myCalendar dateFromComponents:currentComps];
[currentComps setWeekday:7]; // 7: saturday
NSDate *lastDayOfTheWeek = [myCalendar dateFromComponents:currentComps];

NSDateFormatter *myDateFormatter = [[NSDateFormatter alloc] init];
myDateFormatter.dateFormat = @"dd/MM/yyyy";
NSString *firstStr = [myDateFormatter stringFromDate:firstDayOfTheWeek];
NSString *secondStr = [myDateFormatter stringFromDate:lastDayOfTheWeek];

NSLog(@"first - %@ \nlast - %@", firstStr, secondStr); 
```

我想知道我应该改变什么来获得下周的第一天和最后一天以及从现在到两周的时间？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T18:36:43.670

要获得下周，请将 7 天添加到`firstDayOfTheWeek`然后`lastDayOfTheWeek`。

```
NSDateComponents *comps = [[NSDateComponents alloc] init];
[comps setDay:7];
NSDate *firstDayOfNextWeek = [myCalendar dateByAddingComponents:comps toDate:firstDayOfTheWeek options:0]; 
```

此代码假定每周工作 7 天。理想情况下，您可以用得到一周实际长度的代码替换这个假设。

旁注：您的代码假定该周从星期日开始。许多地区在其他日子（例如星期一）开始他们的一周。改变：

```
[currentComps setWeekday:1]; 
```

到：

```
[currentComps setWeekday:[myCalendar firstWeekday]]; 
```

然后，我会将您的计算更改`lastDayOfTheWeek`为简单地将 6 天添加到`firstDayOfWeek`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-09T18:37:42.060

使用下面的代码返回当前每周日期的索引。例如，如果今天是星期六，那么它会给你 7 表示一周的最后一天。

```
-(int)currentdayweeklynumber{

NSDate *CurrentDate = [NSDate date];
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"yyyy-MM-dd"];// you can use your format.

//Week Start Date 
NSCalendar *gregorian = [[NSCalendar alloc]initWithCalendarIdentifier:NSGregorianCalendar];
NSDateComponents *components = [gregorian components:NSWeekdayCalendarUnit | NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit fromDate:CurrentDate];
int dayofweek = [[[NSCalendar currentCalendar] components:NSWeekdayCalendarUnit fromDate:CurrentDate] weekday];
NSLog(@" dayofweek=%d",dayofweek);
return dayofweek; 
```

}

使用这个数字，你可以加或减得到第一周或最后一周。您也可以通过简单的计算使用此获取下周开始和结束日期。

# python - 如何在 PyQt4 程序中调整 QLabel？

> ID：15314169
> 
> 赞同：1
> 
> 时间：2013-03-09T18:12:39.507
> 
> 标签：python, qt, pyqt, qlabel

你好美丽的人！

我正在尝试围绕 PyQt4（以前从未进行过 GUI 编程），所以我采用了[这个示例代码](http://matplotlib.org/examples/user_interfaces/embedding_in_qt4.html)，现在我正在尝试制作一个可以动态调整的 QLabel。我知道我需要使用 QtGui.QLabel 创建一个标签，并且我需要使用 setText() 方法对其进行调整。

所以我创建了一个名为 myLabelClass() 的新类，它或多或少类似于代码中动态调整 matplotlib 图像的另一个类。然而，下面的代码给了我一个 AttributeError：“myLabelClass”对象没有属性“main_widget”。我想我需要在初始 Canvas 类中创建 QLabel 对象，为此我需要 main_widget。

所以现在我完全迷路了。我搞砸了几个小时并尝试了各种各样的东西，但我无法让它工作。我或多或少地理解为什么它不起作用，但我不知道如何才能使它真正起作用。有谁知道或有某种指针指向我可以做些什么来创建标签并使用我的 countUp() 方法更新它？

欢迎所有提示！

[编辑] 感谢卢克伍德沃德的提示，我改变了

```
QtGui.QLabel(self.text, self.main_widget) 
```

至

```
QtGui.QLabel(self.text, self) 
```

所以至少它现在运行（WOOHOOO！）。我将我发布的大量旧代码移至[此处的 pastebin](http://pastebin.com/MHJ1zdFE)。我在[这里有我当前的完整工作代码](http://pastebin.com/kmnTXEWC)。我现在更了解图表画布的来源：matplotlib.backends.backend_qt4agg.FigureCanvasQTAgg，它是 MyMplCanvas() 类的子类。

所以我需要找到除 FigureCanvas 之外的其他子类，我需要摆脱所有 matplotlib 图形的东西。我想知道的是我需要继承哪个类..？我现在有以下代码：

```
class MyTextCanvas(FigureCanvas):
    """Ultimately, this is a QWidget (as well as a FigureCanvasAgg, etc.)."""
    def __init__(self, parent=None, width=5, height=4, dpi=100):
        fig = Figure(figsize=(width, height), dpi=dpi)
        self.axes = fig.add_subplot(111)
        # We want the axes cleared every time plot() is called
        self.axes.hold(False)
        self.compute_initial_figure()
        FigureCanvas.__init__(self, fig)
        self.setParent(parent)
        FigureCanvas.setSizePolicy(self, QtGui.QSizePolicy.Expanding, QtGui.QSizePolicy.Expanding)
        FigureCanvas.updateGeometry(self)

        ########### I added these things below
        self.text = 'this is the initial text' 
        self.create_initial_text()
        ###########

    def compute_initial_figure(self):
        pass

    def create_initial_text(self):
        pass

class myLabelClass(MyTextCanvas):
    """This is my own creaed class which more or less resembles the code above."""
    def __init__(self, *args, **kwargs):
        MyTextCanvas.__init__(self, *args, **kwargs)
        timer = QtCore.QTimer(self)        
        QtCore.QObject.connect(timer, QtCore.SIGNAL('timeout()'), self.countUp)
        timer.start(1000)

    def create_initial_text(self):
        QtGui.QLabel(self.text, self)

    def countUp(self):
        for i in xrange(100):
            self.myShinyLabel.setText(str(i)) 
```

# xml - 使用 xmllint 解析 xml

> ID：15314174
> 
> 赞同：0
> 
> 时间：2013-03-09T18:13:12.980
> 
> 标签：xml, xmllint

我有一个 xml 文件，如下所示。我想使用 xmllint 来解析它，如果类别是“SciFi”，它将显示“isbn”数字。

经过一番挣扎，我可以弄清楚如何*仅打印***类别**或*仅打印***isbn**编号；但无法弄清楚如何添加条件。

```
<book>
 <name>
  <category>SciFi</category>
  <isbn>12345678</isbn>
 </name>
 <name>
  <category>Mystery</category>
  <isbn>23456789</isbn>
 </name>
<book> 
```

编辑：我拥有的 xmllint 版本**不**支持 xpath

我在原来的帖子中犯了一个错误；更正了上面的xml

xmllint --version 产生

```
xmllint：使用 libxml 版本 20626
```

我使用以下命令打印信息

```
猫 /book/name[1]/category
猫 /book/name[2]/category

猫 /book/name[1]/isbn
猫 /book/name[2]/isbn

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T22:52:51.467

这听起来像是一个糟糕的工具。如果你安装了 xmllint，你有 xsltproc 吗？我想那会更有用。

另外，为了确定，你试过 `cat /book/name[category='SciFi']/isbn` 吗？

# batch-file - 即使我们多次调用批处理，如何编写批处理文件以永久附加目录列表而没有冗余？

> ID：15314175
> 
> 赞同：0
> 
> 时间：2013-03-09T18:13:26.200
> 
> 标签：batch-file, dos

假设我想将以下目录列表（为简单起见以精简版本）永久附加到我的系统（而不是我的本地）`PATH`环境变量中。

```
c:\company\dept\users
d:\school\teachers
e:\school\students 
```

我必须通过单击批处理文件（设置了管理员权限）来执行此操作。如果我不确定我是否已经完成，我可以再次单击批处理文件但不附加冗余。

简而言之，我们如何编写这样的批处理文件？我想我们必须对列表中的每个项目进行测试，无论它是否在`PATH`. 但是如何做到这一点？

到目前为止我所做的是

```
setx PATH "%PATH%;c:\company\dept\users" /m
setx PATH "%PATH%;d:\school\teachers" /m
setx PATH "%PATH%;e:\school\students" /m 
```

但防止裁员并不明智。

我不知道如何实施冗余测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T18:22:52.553

作为一般方法，我建议`for`使用 a`delims=;`拆分`%PATH%`分号，然后将每个部分与您正在考虑添加的路径进行比较。

如果您在此过程中遇到具体问题，请将它们作为新问题发布（或搜索——它们可能已经得到解答），我们很乐意回答更多。

您可以通过在命令行键入来获取有关`for`循环的文档。`help for`

编辑：这是一个更好的答案，来自超级用户论坛：[附加到路径而不复制它](https://superuser.com/questions/480238/cmd-append-to-path-without-duplicating-it)

# c# - 反讽语法规范错误

> ID：15314176
> 
> 赞同：2
> 
> 时间：2013-03-09T18:13:27.327
> 
> 标签：c#, grammar, bnf, abstract-syntax-tree, irony

我是 Irony 的新手（大约 10 年前我在大学学习 BNF），并且开始创建一个准实坐标解析器。

下面是我认为应该能够解析输入 的语法类（完整代码位于[https://github.com/spadger/notam-visualiser ）](https://github.com/spadger/notam-visualiser)

```
70 50' 44" N 1 13' 66" E 
```

但是，当我在语法资源管理器中运行它时，在 1:4 "expected: space" 处出现语法错误

你能看出我的代码有什么问题吗？

谢谢，

乔恩

```
[Language("Simple non-real coordinates", "0.1", "A grammar to parse an imaginary coordinate system")]
public class CoordinateGrammar : Grammar
{
    //70 50' 44" N 1 13' 66" E
    public CoordinateGrammar()
    {
        #region Terminals
        var integer = new NumberLiteral("integer", NumberOptions.IntOnly);
        var space = ToTerm(" ", "space");
        var point = ToTerm(".", "dot");
        var lat = ToTerm("N", "north") | ToTerm("S", "south");
        var lon = ToTerm("E", "east") | ToTerm("W", "west");
        var minuteMarker = ToTerm("'", "minute");
        var secondMarker = ToTerm("\"", "second");
        #endregion

        #region Non-Terminals
        var decimalAmount = new NonTerminal("decimalAmount", typeof(DecimalAmountNode));
        var minute = new NonTerminal("minute", typeof(MinuteNode));
        var second = new NonTerminal("second", typeof(SecondNode));

        var imperialMagnitude = new NonTerminal("decimalMagnitude", typeof (ImperialMagnitudeNode));

        var imperialLatitude = new NonTerminal("imperialLatitude", typeof (ImperialLatitudeNode));
        var imperialLongitude = new NonTerminal("imperialLongitude", typeof (ImperialLongitudeNode));
        var imperialCoordinate = new NonTerminal("imperialCoordinate", typeof(ImperialCoordinateNode));
        #endregion

        #region Rules
        decimalAmount.Rule = integer | integer + point + integer;

        minute.Rule = integer + minuteMarker;
        second.Rule = integer + secondMarker;
        imperialMagnitude.Rule = integer + space + minute + space + second;
        imperialLatitude.Rule = imperialMagnitude + space + lat;
        imperialLongitude.Rule = imperialMagnitude + space + lon;
        imperialCoordinate.Rule = imperialLatitude + space + imperialLongitude;
        #endregion

        Root = imperialCoordinate;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T19:03:00.753

修复！

我手动期待空格，但语法已经配置（默认情况下）将“空格”字符视为空白标记。将非临时规则更新到以下解决了我的问题。

```
decimalAmount.Rule = integer | integer + point + integer;

minute.Rule = integer + minuteMarker;
second.Rule = integer + secondMarker;
imperialMagnitude.Rule = integer + minute + second;
imperialLatitude.Rule = imperialMagnitude + lat;
imperialLongitude.Rule = imperialMagnitude + lon;
imperialCoordinate.Rule = imperialLatitude + imperialLongitude; 
```

# opengl-es-2.0 - 如何在透明纹理上停止 OpenGL 背景出血

> ID：15314180
> 
> 赞同：5
> 
> 时间：2013-03-09T18:14:16.297
> 
> 标签：opengl-es-2.0, transparency

我有一个 iOS OpenGL ES 2.0 3D 游戏，并且正在努力让透明纹理正常工作，在这个特定的栅栏示例中。

我将从最终结果开始。绿色背景/清晰的颜色从栅栏的边缘穿过——注意它不是所有的边缘，其中一些是好的：

![背景出血证据](../Images/e1f20857c9c49888371a4f9a365befc1.png)

右上角没有出血的原因是操作顺序。从下面的镜头中可以看出，绘制的顺序包括一些在围栏之前绘制的建筑物。但大部分是在围栏之后：

![用深度绘制进度](../Images/f25329753966bc778f04237dafc3d378.png)

因此，一种解决方案是始终最后绘制透明纹理对象。我想探索其他解决方案，因为我的管道可能并不总是允许这样做。我正在寻找其他建议来解决这个问题，而无需对我的抽奖进行排序。

这可能是一个深度或混合功能，但我尝试了很多东西，但似乎没有任何效果（不同的混合功能，不同的丢弃 alpha 级别，不同的背景颜色，不同的纹理设置）。

以下是我实施的一些细节。

在我的片段着色器中，我丢弃了具有透明度的片段 - 这样它们就不会渲染到深度：

```
lowp vec4 texVal = texture2D(sTexture, texCoord);
if(texVal.w < 0.5)
    discard; 
```

我正在使用一个带有 mipmapping 的巨型 PVR 纹理图集 - 纹理本身应该只有 0 或 1 用于 alpha，但是混合的某些东西可能会导致这种情况：

```
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_LINEAR); 
```

我在渲染时使用以下混合：

```
glEnable(GL_BLEND);
glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA); 
```

任何修复这种出血的建议都会很棒！

编辑 - 为纹理尝试了不同的最小过滤器，如评论中建议的那样，LINEAR/NEAREST，但结果相同。注意我也尝试过 NEAREST/NEAREST 并且没有运气：

![在此处输入图像描述](../Images/cf344fffb06f4be30bb4165a240f71e5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T06:33:34.013

尝试增加 alpha 过滤器限制，

`lowp vec4 texVal = texture2D(sTexture, texCoord); if(texVal.w < 0.9) discard;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-22T19:25:35.310

我知道这是一个老问题，但我在试图找到与我非常相似的 OpenGL 问题的答案时遇到了好几次。以为我会在这里为任何有类似情况的人分享我的发现。我的代码中的罪魁祸首是这样的：

```
glClearColor(1, 0, 1, 0);
glClear(GL_COLOR_BUFFER_BIT); 
```

我使用了粉红色的透明颜色，以便在调试时便于视觉参考。尽管它在背景和主题颜色之间混合时是透明的，但它会像问题截图中的症状一样渗入。为我解决的问题是包装此代码以掩盖 glClear 步骤。它看起来像这样：

```
glColorMask(false, false, false, true);
glClearColor(1, 0, 1, 0);
glClear(GL_COLOR_BUFFER_BIT);
glColorMask(true, true, true, true); 
```

据我所知，这意味着当清除进程启动时，它仅在 Alpha 通道上运行。在这一切都重新启用以按预期继续该过程之后。如果对OpenGL有更深入了解的人可以更好地解释它，我很想听听！

# c# - 具有现有数据库架构的 Dapper.Rainbow

> ID：15314181
> 
> 赞同：4
> 
> 时间：2013-03-09T18:14:18.460
> 
> 标签：c#, dapper, dapper-rainbow

我正在尝试 Dapper。我喜欢我到目前为止所看到的。为了做简单的 CRUD，我使用 Dapper.rainbow。它工作得很好。但是，它仅在表具有名称为*Id*的标识列时才有效。拥有这样的数据库是有道理的，但我不能仅仅为了使用 Dapper 就要求更改数据库中的列名。更清楚地说，我正在使用像 Northwind Db 这样的数据库。它在 Id 列中到处都有重复的表名。

为了处理这个问题，我改变了 Dapper.Rainbow 代码如下：

```
 public T Get(TId id,string idColumnName="Id")
        {
            return database.Query<T>("select * from " + TableName + " where               "+idColumnName+" = @id", new { id }).FirstOrDefault();
        } 
```

有没有更好的方法来处理这个问题，比如列映射/注释或完全不同的东西？

我读过这样的问题

[使用类属性手动映射列名](https://stackoverflow.com/questions/8902674/manually-map-column-names-with-class-properties)

[Dapper.Rainbow VS Dapper.Contrib](https://stackoverflow.com/questions/10030285/dapper-rainbow-vs-dapper-contrib)

（我遇到了与 Dapper.Contrib 类似的小问题，我会单独问）。

**更新**- 不确定答案是否适用于我的 Dapper.Rainbow 问题（至少，我不知道如何）。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T05:45:04.160

我有一个类似的问题。现有的 Dapper 扩展不符合我的理想模式。我想要简单的 CRUD 操作和智能默认值，没有任何额外的东西。我还希望模型具有不直接映射到数据库的附加属性。例如 - 在其 getter 中结合 FirstName 和 LastName 的 FullName 属性 - 而不是将 FullName 添加到 Insert 和 Update 语句中。

在大多数情况下，我希望主键列是 Id，但允许使用属性覆盖。

最后，我希望表名默认匹配类名，但允许使用属性覆盖。

我最终编写了自己的 Dapper 扩展来解决这些问题。它在 Github 和 Nuget 上。希望对您有所帮助。

[https://github.com/ericdc1/Dapper.SimpleCRUD](https://github.com/ericdc1/Dapper.SimpleCRUD)

# python - Python多处理池在加入时挂起？

> ID：15314189
> 
> 赞同：51
> 
> 时间：2013-03-09T18:15:14.123
> 
> 标签：python, multiprocessing

我正在尝试在多个文件上并行运行一些 python 代码。构造基本上是：

```
def process_file(filename, foo, bar, baz=biz):
    # do stuff that may fail and cause exception

if __name__ == '__main__':
    # setup code setting parameters foo, bar, and biz

    psize = multiprocessing.cpu_count()*2
    pool = multiprocessing.Pool(processes=psize)

    map(lambda x: pool.apply_async(process_file, (x, foo, bar), dict(baz=biz)), sys.argv[1:])
    pool.close()
    pool.join() 
```

我以前使用 pool.map 做类似的事情并且效果很好，但我似乎不能在这里使用它，因为 pool.map 不允许（似乎）允许我传递额外的参数（并使用 lambda这样做是行不通的，因为 lambda 无法编组）。

所以现在我试图让事情直接使用 apply_async() 来工作。我的问题是代码似乎挂起并且永远不会退出。一些文件因异常而失败，但我不明白为什么会导致连接失败/挂起？有趣的是，如果没有一个文件因异常而失败，它确实会干净地退出。

我错过了什么？

编辑：当函数（以及工作人员）失败时，我看到这个异常：

```
Exception in thread Thread-3:
Traceback (most recent call last):
  File "/usr/lib/python2.7/threading.py", line 552, in __bootstrap_inner
    self.run()
  File "/usr/lib/python2.7/threading.py", line 505, in run
    self.__target(*self.__args, **self.__kwargs)
  File "/usr/lib/python2.7/multiprocessing/pool.py", line 376, in _handle_results
    task = get()
TypeError: ('__init__() takes at least 3 arguments (1 given)', <class 'subprocess.CalledProcessError'>, ()) 
```

如果我看到其中一个，进程父进程将永远挂起，永远不会收获孩子并退出。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-03-09T21:51:48.867

很抱歉回答我自己的问题，但我至少找到了一种解决方法，所以如果其他人有类似的问题，我想在这里发布。我会接受任何更好的答案。

我相信问题的根源是[http://bugs.python.org/issue9400](http://bugs.python.org/issue9400)。这告诉我两件事：

*   我没有疯，我真正想做的应该是有效的
*   至少在 python2 中，如果不是不可能的话，将“异常”返回到父进程是非常困难的。简单的工作，但许多其他人没有。

就我而言，我的工作函数正在启动一个存在段错误的子进程。这返回了 CalledProcessError 异常，这是不可腌制的。出于某种原因，这使得父对象中的池对象出去吃午饭，而不是从对 join() 的调用中返回。

在我的特殊情况下，我不在乎异常是什么。最多我想记录它并继续前进。为此，我只需将我的顶级工作函数包装在 try/except 子句中。如果工作进程抛出任何异常，它会在尝试返回父进程之前被捕获，记录，然后工作进程正常退出，因为它不再尝试发送异常。见下文：

```
def process_file_wrapped(filenamen, foo, bar, baz=biz):
    try:
        process_file(filename, foo, bar, baz=biz)
    except:
        print('%s: %s' % (filename, traceback.format_exc())) 
```

然后，我有我的初始映射函数调用 process_file_wrapped() 而不是原来的。现在我的代码按预期工作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-10T02:07:02.680

在需要腌制对象的情况下，您实际上可以使用`functools.partial`实例而不是 a 。从 Python 2.7（和 Python 3）开始，对象是可腌制的。`lambda``partial`

```
pool.map(functools.partial(process_file, x, foo, bar, baz=biz), sys.argv[1:]) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-12-16T18:01:34.703

`pool.map`对于它的价值，挂起时我有一个类似的错误（不一样） 。**我的**用例允许我使用[pool.terminate](https://docs.python.org/2/library/multiprocessing.html#multiprocessing.pool.multiprocessing.Pool.terminate)来解决它（在改变东西之前确保你的也一样）。

我在打电话之前使用[了 pool.map](https://docs.python.org/2/library/multiprocessing.html#multiprocessing.pool.multiprocessing.Pool.map)`terminate` ，所以我知道一切都完成了，来自[文档](https://docs.python.org/2/library/multiprocessing.html#multiprocessing.pool.multiprocessing.Pool.map)：

> map() 内置函数的并行等效项（尽管它仅支持一个可迭代参数）。它阻塞，直到结果准备好。

如果那是您的用例，这可能是修补它的一种方法。

# iphone - 在 cocos2d 中分解一个精灵

> ID：15314190
> 
> 赞同：1
> 
> 时间：2013-03-09T18:15:14.653
> 
> 标签：iphone, objective-c, xcode, cocos2d-iphone

我正在 cocos2d 中为 iPhone 制作 2D 飞机格斗游戏。我正在努力做到这一点，所以当你射击敌机时，它会分裂成几个分开的碎片，这些碎片会消失在视线之外。将一个精灵分解成多个精灵的最佳实践通常是什么？我应该为每个单独的片段创建新图像，还是将初始图像视为精灵表，然后从片段中制作新的精灵？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T18:28:09.800

[请看这个教程](http://headlightinc.com/shatter-sample-src.zip)

它制作了一个点网格，然后将内部（非边缘）点随机移动一点，因此它并非都是完美的三角形。然后每次更新它分别移动/旋转三角形 - 然后一次绘制它们。

您将整个事物视为一个精灵，因此可以对其执行任何常规操作。此示例使用 CCMoveBy 将整个组从底部向下移动。

# python - 在 curses 中打印 ansi 格式的文本

> ID：15314192
> 
> 赞同：2
> 
> 时间：2013-03-09T18:15:40.757
> 
> 标签：python, curses

我在 python 中有一些 ansi 格式的文本。我想用诅咒打印它。当我打印它时：

```
^[[34mprint^[[39;49;00m ^[[39;49;00m^[[33m'^[[39;49;00m^[[33mhi^[[39;49;00m^[[33m'^[[39;49;00m 
```

我正在使用以下内容来设置诅咒：

```
stdscr = curses.initscr()
curses.noecho()
curses.cbreak()
curses.raw(True)
curses.start_color()
curses.use_default_colors()
stdscr.keypad(1) 
```

# mongoose - 如何安装猫鼬3.6rc0

> ID：15314193
> 
> 赞同：1
> 
> 时间：2013-03-09T18:15:41.920
> 
> 标签：mongoose, npm

我想尝试新的 mongoose 3.6rc0 但如果我执行 npm install mongoose 我会得到 3.5.7 版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T19:21:07.250

您可以通过运行以下命令来执行此操作：

`npm install mongoose@3.6.0rc0`

并且将安装指定的版本。

# batch-file - 当 ECHO 输出重定向到错误路径时如何检测错误？

> ID：15314196
> 
> 赞同：1
> 
> 时间：2013-03-09T18:15:51.860
> 
> 标签：batch-file

第一次在这里发帖。我正在编写一个 DOS 批处理脚本来自动化归档 Oracle 表的过程。归档工具需要一个带有需要在运行时填充的标签的参数文件。我正在使用以下逻辑，尝试 2 种不同的方法来捕获错误，但是当重定向到错误路径时，错误没有被捕获。是否有替代 ECHO 或检测此写入错误的替代方法？还是有其他想法？非常感谢！
-格雷格

```
@ECHO OFF
FOR /F %%G IN (O:\tmp\infile.txt) DO (
    ...
    ...
   ECHO TABLE=%%G    > P:\BADPATH\MYOUTFILE1.TXT
   IF %ERRORLEVEL% NEQ 0 GOTO END
    ...
   ECHO TABLE=%%G    > P:\BADPATH\MYOUTFILE2.TXT
   IF ERRORLEVEL 1 GOTO END
    ...
    ...
 )

:END
IF %ERRORLEVEL% NEQ 0 ECHO FAILED! 
ECHO EXITING 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T18:22:00.753

不确定我是否理解正确，但听起来您想先检查文件/文件夹是否存在。如果是这样：

```
IF EXIST P:\BADPATH\ goto notexist else goto exist
:notexist
echo Doesn't exist.
:exist
echo It exists! 
```

或者使用标准 () 标记来包含代码。

# php - PDO 更新不成功

> ID：15314198
> 
> 赞同：1
> 
> 时间：2013-03-09T18:16:03.080
> 
> 标签：php, mysql, codeigniter, pdo, sql-update

我在 PHP 框架 COdeigniter 中使用 PDO 驱动程序。

一旦有人点击“提交”按钮，我必须运行两个查询。

一个是插入，下一个（问题查询）是更新。

这是我模型中的代码片段：

```
function studenttime($anum) {
    try {
        $times = NULL;

        $sql = "UPDATE student SET last_visit = :times WHERE anum = :anum";
        $time = $this -> db -> conn_id -> prepare($sql);
        $time -> bindParam(':times', $times);
        $time -> bindParam(':anum', $anum);
        $time -> execute();
        if ($time -> rowCount() == 1) {
            return $time;
        }

    } catch (PDOException $e) {
        error_log($e -> getMessage());
        die("An Error Occured, Contact System Admin - Err: SFM136");
    }
} 
```

这是我的控制器：

```
} else {
                if ($session = $this -> staff_model -> session($anum, $why, $aidyear, $comments) && $time = $this -> staff_model -> studenttime($anum)) {

                    $this -> session -> unset_userdata('anum');
                    $this -> session -> unset_userdata('first');
                    $this -> session -> unset_userdata('last');
                    $this -> session -> unset_userdata('aidyear');
                    $this -> session -> unset_userdata('why');
                    $this -> session -> unset_userdata('comments');

                    redirect('staff_controller/studentlogin', 'location');
                }
            } 
```

在我的模型中调用 $session = session 的第一个查询工作得很好......

然后我尝试使用 && 在一个 else 语句中进行两个查询，但似乎第二个甚至不会影响 if 语句的结果。

我看不出我在这里做错了什么，因为我的控制器到处都是一堆这样的代码片段，所以我看不到这个特定的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T18:24:12.983

这是由于运算符优先级。

尝试运行此代码作为示例：

```
if ($a = 5 && $b = 6) {
    var_dump($a); // Output: bool(true)
} 
```

为什么？因为它和这个是一样的：

```
if ($a = (5 && $b = 6)) {
    var_dump($a); // Output: bool(true)
} 
```

故事的寓意：在 if 语句和类似语句中的赋值周围加上括号。

这应该会更好：

```
if (($session = $this -> staff_model -> session($anum, $why, $aidyear, $comments)) && ($time = $this -> staff_model -> studenttime($anum))) { 
```

我建议您避免在这样的 if 语句中进行多次赋值，因为这很令人困惑！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T18:34:34.167

你应该让你的 if 语句更容易阅读，无论是对你自己还是对任何将要阅读代码的人都是如此。另外，不要在 if 语句中间为变量赋值，一切都应该在你到达那里的时候决定，仅仅因为编程语言可以在 if 语句中处理变量赋值并不意味着它会按照你认为他们会工作的方式工作。

```
$a = $session = $this -> staff_model -> session($anum, $why, $aidyear, $comments);
$b = $time = $this -> staff_model -> studenttime($anum); 
```

现在你可以做类似的事情。

```
if($a && $b)
{
    //...
} 
```

如果你真的想取消设置你活跃的所有会话，那么你可以使用

```
session_destroy(); 
```

但如果你只是想破坏一个子集，那么当然，按照你的方式去做。

我不知道我发布的 $a 和 $b 是否正确（从您那里复制/粘贴），但我的意思是，一旦您更好地构建代码，那么解决问题就会变得更容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T19:42:06.637

问题实际上是由我模型中的其他方法引起的：

```
function checkanum($anum) {
        try {
            $sql3 = "SELECT * FROM student WHERE anum = : anum";
            $check = $this -> db -> conn_id -> prepare($sql3);
            $check -> bindParam(':anum', $anum);
            $check -> execute();
            if ($check -> rowCount() == 1) {
                return $check;
            }
        } catch (PDOException $e) {
            error_log($e -> getMessage());
            die("An Error Occured, Contact System Admin - Err: ST_M79");
        }
    } 
```

它等于 == 0，它应该是 1。

我的控制器将检查记录是否已经存在，如果存在，则只需更新再次查询的时间。当我故意拼错 if 语句中的一项作业时，我发现了这一点，我注意到它没有给出错误，这给了我确定我的逻辑有缺陷所需的信息。现在一切正常。

感谢您的投入。我喜欢奥斯卡添加的补充：

> 这应该会更好：
> 
> if (($session = $this -> staff_model -> session($anum, $why, $aidyear, $comments)) && ($time = $this -> staff_model -> studenttime($anum))) {
> 
> 我建议您避免在这样的 if 语句中进行多次赋值，因为这很令人困惑！

很有意义。+1

# perl - 如何调试似乎没有运行的 Bugzilla 扩展？

> ID：15314200
> 
> 赞同：1
> 
> 时间：2013-03-09T18:16:18.077
> 
> 标签：perl, debugging, bugzilla

我需要一些帮助来启动 bugzilla 扩展。

我想加入[`bug_format_comment`](http://www.bugzilla.org/docs/3.6/en/html/api/Bugzilla/Hook.html#bug_format_comment)（FWIW：更改一些在我提交给 SVN 时自动添加为注释的纯文本以链接到相应的 SCM 提交。）

现在，当我手动向错误添加评论时，似乎什么都没有发生。

除了将它放在 /extensions/my-ext-name/ 目录中之外，我还需要做些什么来使扩展运行？我如何测试扩展是否被调用？

我使用旧版本的 Bugzilla (3.2.x)。甚至支持那个钩子吗？（我在文档中找不到该信息）。

这是我的完整`Extension.pm`文件（我没有 Perl 经验。我从示例扩展中获取了钩子的示例并从那里运行）

```
package Bugzilla::Extension::Websvn-scmbug-autolink;
use strict;
use base qw(Bugzilla::Extension);
# This code for this is in ./extensions/Websvn-scmbug-autolink/lib/Util.pm
use Bugzilla::Extension::Websvn-scmbug-autolink::Util;
use URI::Escape;

our $VERSION = '0.01';

# See the documentation of Bugzilla::Hook ("perldoc Bugzilla::Hook" 
# in the bugzilla directory) for a list of all available hooks.
sub install_update_db {
    my ($self, $args) = @_;

}

sub bug_format_comment {
    my ($self, $args) = @_;

    my $regexes = $args->{'regexes'};
    # push(@$regexes, { match => qr/\bfoo\b/, replace => 'bar' });

# 6665 --> 6666
# CTUFramework:trunk/CTUCsharpRuntime/CtuFramework/text1-renamed.txt
    #my $bar_match = qr/\b(bar)\b/;
    my $bar_match = qr/(?:^|\r|\n)(\d+|NONE) (--&gt;) (\d+|NONE)[ \r\n\t]+([^:]+):(.*?)[\r\n]/s; #/s - treat as single line
    push(@$regexes, { match => $bar_match, replace => \&_replace_bar });
    my $scm_match2 = qr/(?:^|\r|\n)(\d+|NONE) (-->) (\d+|NONE)[ \r\n\t]+([^:]+):(.*?)[\r\n]/s; #/s - treat as single line
    push(@$regexes, { match => $scm_match2, replace => \&_replace_bar });
}

# Used by bug_format_comment--see its code for an explanation.
sub _replace_bar {
    my $args = shift;

    my $scmFromVer = $args->{matches}->[0]; 
    my $scmToVer = $args->{matches}->[1];
    my $scmArrow = $args->{matches}->[2];
    my $scmProject = $args->{matches}->[3];
    my $scmFile = $args->{matches}->[4];
    # Remember, you have to HTML-escape any data that you are returning!
    my $websvnRoot = "http://devlinux/websvn";
    my $websvnRepo = uri_escape($scmProject); #maybe do a mapping
    my $websvnFilePath = uri_escape("/".$scmFile);

    my $fromRevUrl = sprintf("%s/revision.php?repname=%s&rev=%s", 
        $websvnRoot, $websvnRepo, $scmFromVer);
    my $toRevUrl =   sprintf("%s/revision.php?repname=%s&rev=%s", 
        $websvnRoot, $websvnRepo, $scmToVer);
    my $diffUrl =    sprintf("%s/diff.php?repname=%s&path=%s&rev=%s", 
        $websvnRoot, $websvnRepo, $websvnFilePath, $scmToVer);
    my $fileUrl =    sprintf("%s/filedetails.php?repname=%s&path=%s&rev=%s", 
        $websvnRoot, $websvnRepo, $websvnFilePath, $scmToVer);

    # TODO no link for 'NONE'
    my $fromRevLink = sprintf(qq{<a href="%s">%s</a>}, $fromRevUrl, $scmFromVer);
    my $toRevLink =   sprintf(qq{<a href="%s">%s</a>}, $toRevUrl, $scmToVer);
    my $diffLink =    sprintf(qq{<a href="%s">%s</a>}, $diffUrl, $scmArrow);
    my $fileLink =    sprintf(qq{<a href="%s">%s</a>}, $fileUrl, $scmFilePath);
    # $match = html_quote($match);
    return "$fromRevLink $diffLink $toRevLink:$fileLink";
};
__PACKAGE__->NAME; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T18:23:51.540

如所写，您的扩展甚至不会加载：破折号在 Perl 包名称中无效。

将名称从 更改`Websvn-scmbug-autolink`为`Websvn_scmbug_autolink`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:53:09.387

我搜索了 Bugzilla 源代码，发现 3.2.x 版本根本不支持该钩子。该钩子是在 Bugzilla 3.6 中引入的：http: [//bzr.mozilla.org/bugzilla/3.6/revision/6762](http://bzr.mozilla.org/bugzilla/3.6/revision/6762)

PS。我在模板脚本中破解了正则表达式替换以获取评论。哈克，但它的工作原理。

# sql - 在嵌套选择中有总和

> ID：15314204
> 
> 赞同：2
> 
> 时间：2013-03-09T18:16:45.780
> 
> 标签：sql

我有两张桌子：一张是 Tour，另一张是 ReservedTour。表格的列是：

```
Tour       | ReservedTour
===========|=============
id         | id
city       | Tid
capacity   | number
timeout    | .
.          | .
.          | .
.          |
========== |====== 
```

我写了一条SQL语句，例如

```
select *, (select sum(rt.`number`) from ReservedTour as rt where rt.`Tid`=t.id GROUP BY rt.`Tid`) as total
  from Tour as t 
 where City = 'alahom' and '1400-12-13' <= t.`timeout` and 4 < t.`Capacity`- total; 
```

但这有一个错误——总数不正确。

我该如何纠正？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T18:22:25.920

试试这个：

```
select t.*, sum(rt.`number`) as total 
from Tour as t
join  ReservedTour as rt on rt.`Tid`=t.id
where City = 'alahom' and  t.`timeout`=> '1400-12-13' and t.`Capacity`-total > 4
GROUP BY t.id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T18:27:26.340

我想你可能正在寻找这样的东西：

```
SELECT T.*, RT.total
FROM Tour T
  JOIN (select Tid, sum(number) total
          from ReservedTour 
          GROUP BY TId ) RT ON T.Id = RT.TiD
WHERE City = 'alahom' 
   AND '1400-12-13' <= t.`timeout` 
   AND 4 < t.Capacity-RT.total; 
```

[精简的 SQL Fiddle 演示](http://sqlfiddle.com/#!2/741e6/1)

# java - 使用 getText 获取 Integer

> ID：15314205
> 
> 赞同：4
> 
> 时间：2013-03-09T18:16:52.343
> 
> 标签：java, swing, input, jtextarea

我正在开发一个带有 in 接口的程序，该程序使用 textAreas 来接收用户输入，当我使用 getText() 函数时，它告诉我我试图用它声明的变量，一个整数，必须是一个字符串。是否有任何其他方法可以改变这一点，或者是否有另一个函数可以用来从 textArea 中调用整数？

编辑：

抱歉，我确实遗漏了一些代码作为示例。

```
public void SetStock(javax.swing.JTextArea textStock)
{
    Integer _textStock = textStock.getText();
}
public  Integer getTextStock()
{
    return _textStock;
} 
```

这是我尝试使用的 setter/getter，以便在我的主类中使用它。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-09T18:19:41.187

您可以使用文本，然后使用将其解析为整数

```
int i = Integer.parseInt(myText.getText()); 
```

此外，`Integer.parseInt`如果文本不是有效整数，则可能引发异常，因此您可能希望将其包围在 try/catch 块中并捕获异常`NumberFormatException`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T18:20:22.147

您可以使用*Integer.parseInt()*方法将*String*转换为 int，如下所示：

```
String text = textArea.getText();
int number = Integer.parseInt(text); 
```

请记住，如果文本包含非数字字符，则会引发异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T18:20:23.900

如果我理解正确，您只需解析它：

```
Integer myint = Integer.parseInt(textarea.getText()); 
```

但是，如果我的“textarea”是指多行文本框，则必须遍历这些行并解析它们。

# c - C分叉，返回PID后杀死父级

> ID：15314207
> 
> 赞同：4
> 
> 时间：2013-03-09T18:16:59.407
> 
> 标签：c, fork

我是 C 的新手，过去两周我一直在研究分叉，我必须为我的 Operative Systems 课程解决这个问题：

“您必须使用分叉创建一个“重量级”进程，然后第一个进程必须等待第二个（新进程）返回其父 ID，然后它必须杀死其父进程并完成”

我认为说明很混乱，这是我到目前为止的代码（正如我所说，我是 C 新手，所以我一直在调查）我的问题似乎是父进程甚至没有等待子进程返回它的id，因为在那之后，孩子正在杀死父母，所以我想我正在创建子进程，当它运行时它会在最后杀死父母，而不是让父母等待孩子执行。（这是我认为对指令感到困惑的部分）我想了解更多关于分叉和进程的信息，比如它们背后的逻辑，以便在编码时更加确定。谢谢！

```
#include <sys/types.h>
#include <wait.h>
#include <unistd.h>
#include <stdio.h>

int main() {
    pid_t idProceso;
    int childState;

    idProceso = fork();

    if (idProceso == 0){
        printf ("child id  :  %d. parent id %d\n", 
        getpid(), getppid());

            int parent = getppid();
            kill(parent, SIGKILL);
            printf ("dead parent"); //  not sure about it  ??
            _exit();
    }

    if(idProceso > 0){
        sleep (1);
        printf ("parent id :  %d. child id %d\n", 
        getpid(), idProceso);

        wait (&childState);

    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T18:42:22.517

根据您提供的作业描述，我认为分配它的讲师或教授对英语或 Unix 机器上的进程概念没有很好的处理。

您提出的解决方案是合理的，但我会删除睡眠呼叫。Childstate 永远不会设置正确，您也不需要全部。此外，不要将 SIGKILL 发送给父级。SIGKILL 是尝试终止进程的最后一种方法。我建议将 SIGTERM 发送到父进程。如果您使用的是 Linux 机器，父进程可以使用 sigaction 安装信号处理程序。在信号处理程序中，您可以打印一条很好的消息，例如“收到来自子进程的终止信号”并调用 exit。如果你这样做，你的教授可能会对你的技能印象深刻，从而给你及格分数。

如果做不到这一点，我会要求一个更好的问题。在实际解决问题之前，我必须将语法和标点符号更正提交给教授批准，这种情况并不少见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T18:45:35.553

> 我的问题似乎是父进程甚至没有等待子进程返回其 ID

在您的程序中，孩子没有将其 id 返回给父母。唯一发生的通信是孩子向父母发送 SIGKILL 信号。

> 所以我想我正在创建子进程，当它运行时它会在最后杀死父进程，而不是让父进程等待子进程执行。

是的，你是对的，子进程会通过发送 SIGKILL 信号，使用 kill() 函数杀死父进程，但父进程实际上是在等待被子进程杀死。

```
wait (&childState); 
```

这使得父级等待（挂在那里）子级终止，终止后，父级将继续，但是在您的程序中，当父级等待子级终止时，子级本身将终止父级等待。

> 我想了解更多关于分叉和进程的信息，比如它们背后的逻辑，这样我在编码时就能更有把握。

这是[值得一看](http://www.csl.mtu.edu/cs4411.ck/www/NOTES/process/fork/create.html)的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T18:54:26.683

```
$ ./foo.bin
parent id :  6629\. child id 6630
child id  :  6630\. parent id 6629
dead parentKilled 
```

我刚刚删除了`sleep(1)`，输出似乎是合理的。

# c# - C# 帮助用外键填充 DataTables

> ID：15314209
> 
> 赞同：0
> 
> 时间：2013-03-09T18:17:22.983
> 
> 标签：c#, sql-server, visual-studio-2012, datatable, dataset

在 Visual Studio 设计器中，我创建了一个包含 2 个数据表的数据集；`EmployeeDT`并`PayrollSheetDT`通过 SELECT 语句从 SQL Server 中提取数据。`SSN`这两个数据表通过列有关系。

相关SQL Server数据库结构：

*   表：`Employee`，列：（`SSN`主键），`Driver`
*   表：`PayrollSheet`，列：（`SSN`外键），`PSDate`

在我的 PayrollSheet 表单中，我有多个组合框，其中绑定了DataSource`DisplayMember`和DataTable。当我启动程序时，我成功地单击了“驱动程序”组合框中的向下箭头，选择了一个驱动程序名称，并让其他组合框显示来自该驱动程序/SQL 记录的信息——因为它们绑定到同一个数据源。`ValueMember``EmployeeDT`

我在组合框旁边还有一个列表框，目的是显示在组合框中选择`PSDate`的任何`SSN`内容。

列表框是我的问题。我需要能够更改任何组合框中的值，并将 PSDate 显示在列表框中。我不知道这是否可以做到，因为`PayrollSheetDT`DataTable 执行静态 SQL 查询，但我想要的是相当于添加一个`WHERE SSN = <selected ssn in other datatable>`

我不太了解如何执行此操作，但如果我尝试填写 ，则会`TableAdapter`收到以下错误：

> *一行或多行包含违反非空、唯一或外键约束的值。*

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T00:46:26.313

这些东西非常挑剔。

这个错误可能意味着一些事情。尝试（暂时）删除 PayrollSheet 表并仅填充 Employee 表。

确保您的列名与 sql 查询匹配，例如列名的短词/短语完全匹配。EmployeeLastName 与 EmployeeLName 不同。

确保没有没有父行（返回到员工）的“额外”PayrollSheet 行，也就是 PayrollSheet 中的孤立行。

这是一个通用的助手。尝试填充一个 DataSet 对象（只是“DataSet”，而不是强类型对象）...然后执行 ds.WriteXml(@"C:\myds.xml") 然后通过该 xml 并确保该列名称匹配。

另外..检查数据类型。检查一列（在 ds 定义中）是否未标记为“非空”，然后查询为某行返回空值。这是某种滴答作响的问题，我很确定。

100 倍中的 99 倍，当我遇到这个问题时，这是一件让我很头疼的小事。

# javascript - 带有垂直或点标记的条形图（谷歌图表）

> ID：15314212
> 
> 赞同：0
> 
> 时间：2013-03-09T18:17:43.350
> 
> 标签：javascript, visualization, google-visualization, data-visualization

我开始从事可视化工作，我正在使用谷歌图表，我正在尝试制作条形图

[https://developers.google.com/chart/interactive/docs/gallery/barchart](https://developers.google.com/chart/interactive/docs/gallery/barchart)

我可以在其中将水平条中的标记设置为垂直线，或者可能是一个圆点，以指出我感兴趣的任何值。可以提供一种在条形图中标记特定点的方法的另一个选项也可能没问题。

所以你们中的任何人都知道用标记做这种条形图的方法吗？

已编辑：该图应类似于此图：

[http://chart.apis.google.com/chart?chs=100x40&cht=bhs&chco=000000&chd=t:65&chbh=15&chm=r,ff0000,0,0.49,0.51,1](http://chart.apis.google.com/chart?chs=100x40&cht=bhs&chco=000000&chd=t:65&chbh=15&chm=r,ff0000,0,0.49,0.51,1)

但是不是作为图像，而是能够与对象交互，因为它可以使用条形图可视化来完成。

非常感谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T00:03:31.637

您可能不喜欢这个答案，因为它没有提出使用 google-charts 的解决方案，但如果您再忍耐一下，您可能会发现这很有用，或者至少信息丰富。无论如何，纯 HTML 和 CSS 图形解决方案不会为许多高级可视化提供机会，但我认为 - 基于现实世界的经验 - 你可以在条形图方面仅使用 CSS 和 HTML 做很多事情. 我推荐阅读 Wilson Miner 在 A List Apart 上的文章，名为[Accessible Data Visualization with Web Standards](http://alistapart.com/article/accessibledatavisualization)

然后在这个小提琴中考虑以下快速而肮脏的 CSS/HTML 图表，它们模仿了您要实现的图表。

[http://jsfiddle.net/9mJzd/](http://jsfiddle.net/9mJzd/)

我将仅在此处粘贴 Bars 的片段。您还需要查看小提琴中的 CSS。

```
<td>
    <div class="BarWrap">
       <div class="BarBar" style="width: 100%;" title="Ty Cabbage: .426"></div>
       <div class="BarAvg" style="left: 62%" title="League Average: .278"></div>
    </div>
</td> 
```

只需添加 jQuery 和一个工具提示插件（例如 jQuery UI 的工具提示），您就已经*开始*为您的条形图添加一些交互性。

# c++ - 不同方式的动态数组声明

> ID：15314213
> 
> 赞同：1
> 
> 时间：2013-03-09T18:17:53.770
> 
> 标签：c++, arrays, heap-memory

我知道`int* array = new int [n];`在堆中分配内存空间。

但是如果我声明这样的东西：`int array[n];`在代码块中它编译成功，但是如果我把它移到 Visual Studio，它就会出错。

我想问的是：

1.  真正做什么`int[n]`以及它与堆分配相比如何？它们之间有什么区别？

2.  如果我使用`int array[n]`而不是，可能会出现什么错误`int* array = new int [n];`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T18:20:42.553

`int array[n]`在堆栈上声明一个数组，而不是在堆上。在标准 C++`n`中必须是编译时间常数，但是一些编译器有一个扩展，允许以这种形式声明的可变长度数组没有编译时间常数`n`。它不是标准的，可能不应该使用。

`int array[n]`可能会导致几个问题`int* array = new int [n];`：

*   如果`n`足够大，您可能会导致堆栈溢出。或者，如果该数组是一个类成员并且您创建了一个该类的大数组。
*   如果`array`班级成员*搬家*可能和*复制一样昂贵*
*   如果`array`是类成员并且您已经给出了指向数组和`move`类的指针，则指针现在引用移动后的对象，或者如果对象也被破坏，则指向随机内存。不管怎样，不好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-09T18:22:24.383

如果我正确理解你的问题，那么我可以回答这两个问题。

1.  `int array[10]`分配在栈上，而`int *array = new int[10]`分配在堆上。通常，堆栈数组仅适用于恒定数量的元素，因此`int array[n]`在 C90 中是不允许的（只要`n`不是恒定的）。

2.  MinGW（这是代码块在 Windows 上使用的 GCC 编译器的版本）有一个扩展，它允许您`int array[n]`在 C90 模式下编写，其中`n`不是恒定的。Visual C++ 不允许这样做。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-09T18:20:26.437

GCC 在 C++ 中有一个扩展，它允许`int array[n]`where`n`不是编译时常量值。在这种情况下，标准语言不允许您使用非常量值`n`（在 C99 中是允许的）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-09T18:24:16.297

当您编写时`int array[n]`，这意味着您正在执行静态分配。即内存将在编译时分配。所以在这里使用可变长度会导致编译时错误。

# php - 带有 2 个查询的待处理时间表检查功能不起作用

> ID：15314215
> 
> 赞同：0
> 
> 时间：2013-03-09T18:18:21.610
> 
> 标签：php, mysql, sql

我正试图让这个等待提交的功能正常工作。它假设的工作方式是，如果经理登录到他的帐户并且有待审核的时间表，我想向经理发出某种通知，告知有待处理的时间表。

到目前为止，这是我的代码，尽管它仅适用于第一个结果（第一个时间表，没有为所有其他提交的时间表获得经理），如果这令人困惑，我深表歉意。

```
function pendingsubmissions($loggedInUser) {
        include("table_names.inc");
        global $authenticationManager;

        list($qh, $num) = dbQuery("SELECT uid FROM $TIMES_TABLE WHERE submitstatus=1 OR ot_status=1");
            while ($data = dbResult($qh)) {
                $username = $data['uid'];

        list($qh2,$num2) = dbQuery("SELECT manager FROM $USER_TABLE WHERE username='$username'");
            while ($data2 = dbResult($qh2)) {
                $manager = $data2['manager'];

            if ($loggedInUser == $manager || $authenticationManager->hasClearance(CLEARANCE_ADMINISTRATOR))
                return 1;
            else
                return 0;
            }
        }
    } 
```

第一个查询是检查数据库是否有待处理的时间表（提交状态 1）。如果找到，那么第二个查询是找出用户管理器，然后如果该用户管理器当前已登录，则吐出真正的价值。

问题是到目前为止的第一个查询，它显示如下：

```
uid
---
user1
user1
user1
user2
user2
user2 
```

第二个查询只检查 user1 manager name.. 不检查 user2.. 有人可以帮助解决这个问题，因此它会检查每个用户的 manager-name

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T18:22:50.700

如前所述，您可以使用`DISTINCT`, 或`GROUP BY`诸如`uid`.

这也可以通过单个查询来实现。就像是：

```
SELECT manager FROM $USER_TABLE WHERE username IN (SELECT DISTINCT uid FROM $TIMES_TABLE WHERE submitstatus=1 OR ot_status=1) 
```

这样可以节省您向数据库发送两个请求的时间。

您还每次都覆盖您的值，而不是：

```
 while ($data = dbResult($qh)) {
            $username = $data['uid']; 
```

您将需要执行以下操作：

```
 $usernames = array();
        while ($data = dbResult($qh)) {
            $usernames[] = $data['uid']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T18:24:44.323

您应该在两个表之间编写一个带有 JOIN 的查询。目前您只要求第二个查询查找一个值！

此外，标点符号在英语中与在编程中一样重要。请在需要的地方使用撇号。它使阅读您的问题变得更加容易。

# uncrustify - 格式化初始化列表不同于函数参数列表

> ID：15314216
> 
> 赞同：0
> 
> 时间：2013-03-09T18:18:29.083
> 
> 标签：uncrustify

我有一个 C++ 类构造函数

```
Status::Status(QObject *parent) : QObject(parent)
    , m_currentPage(Status::UndefinedPage)
    , m_lastPage(Status::UndefinedPage) ,
    m_currentSubPage(Status::UndefinedSubPage), m_lastSubPage(Status::UndefinedSubPage)
    , m_ptr(0)
{
} 
```

并希望看到这样

```
Status::Status(QObject *parent) 
    : QObject(parent)
    , m_currentPage(Status::UndefinedPage)
    , m_lastPage(Status::UndefinedPage)
    , m_currentSubPage(Status::UndefinedSubPage)
    , m_lastSubPage(Status::UndefinedSubPage)
    , m_ptr(0)
{
} 
```

我找到了相关选项：

```
nl_class_colon                           = remove
nl_class_init_args                       = remove
pos_comma                                = lead_force
pos_class_comma                          = lead_force
pos_class_colon                          = lead_force 
```

但这也会影响我不想要的正常功能参数。一旦我更改 pos_comma，我的所有成员初始化列表都会变得拥挤。

如何定义与函数参数列表不同的构造函数初始化列表的外观？

谢谢。

编辑：我希望函数参数列表看起来像

```
int r = myFuntion("a", "b",
                  "c"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T21:38:32.140

不，从 Uncrustify 0.60 开始，这是不可能的。您必须坚持使用不同的样式或寻找另一种格式化程序。您也可以提交功能请求。

# python - Python 编码键，如果太长则减一个字符

> ID：15314220
> 
> 赞同：-2
> 
> 时间：2013-03-09T18:19:07.553
> 
> 标签：python, encryption, encoding

到目前为止，这是我的代码：

```
def code_block(text, key):
    itext = int(text)
    rkey = int(key)
    res= itext + rkey
    def last():
        return res[-1:]
    if res>=11111111:
        last()
    return res 
```

这是我设定的任务：

> 现在我们需要一个函数来获取一个代码块和一个密钥作为输入，假设两者都是 8 位长，并用密钥的相应数字加密数字的每个数字：
> 
> ```
> >>> code_block('12341234','12121212')
> '24462446'
> 
> >>> code_block('66554433','44556677')
> '00000000' 
> ```

我哪里错了？你能指出我正确的方向并指出我错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T18:32:52.357

你正在以错误的方式解决这个问题。逐个字符处理这个字符：

```
def code_block(text, key):
    res = [str(int(c) + int(k))[-1:] for c, k in zip(text, key)]
    return ''.join(res) 
```

这给了我：

```
>>> code_block('12341234','12121212')
'24462446'
>>> code_block('66554433','44556677')
'00000000' 
```

*该代码分别对每个*字符求和，将其转换回字符串并仅使用结果的最后一个字符*；*9 + 9 是 18，但结果是`'8'`.

您的代码将对整数求和，但这会导致：

```
>>> 66554433 + 44556677
111111110 
```

这不是正确的结果。您也没有再次将总和转换回字符串，因此您的代码尝试通过切片将总和结果视为字符串，给出了异常：

```
>>> code_block('12341234', '12121212')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 8, in code_block
  File "<stdin>", line 6, in last
TypeError: 'int' object has no attribute '__getitem__' 
```

# git - 添加远程 github 分支时我缺少什么？

> ID：15314222
> 
> 赞同：0
> 
> 时间：2013-03-09T18:19:15.970
> 
> 标签：git, github, git-remote

我正在添加这样的远程存储库

```
git remote add pythonic https://github.com/sanfx/pythonic.git 
```

但我得到这个错误说

> 致命：[https](https://github.com/sanfx/pythonic.git/info/refs) ://github.com/sanfx/pythonic.git/info/refs not found：你在服务器上运行了 git update-server-info 吗？

以前我确实`git push -f python3_ver2`添加了一个远程分支，即使我在 github.com 上没有它。

添加远程分支时我缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T18:29:26.343

该错误仅意味着 Git 找不到您尝试添加的存储库。这可能是因为它根本不存在于 GitHub 上，也可能是因为它是您无权访问的私有存储库。

如果您访问[https://github.com/sanfx/pythonic](https://github.com/sanfx/pythonic)，您可以看到 GitHub 正在为存储库返回 404。

因此，请仔细检查存储库名称是否正确以及您是否拥有必要的访问权限。

# c# - MVC中多状态模型的实现

> ID：15314228
> 
> 赞同：0
> 
> 时间：2013-03-09T18:19:45.460
> 
> 标签：c#, asp.net-mvc

我想在测试系统中创建一个**QUESTION 模型。**问题可能不同（文本、图片等） 答案可能不同（文本字段、复选框等）

如何在 MVC 中正确实现这一点？

[**供理解的图片**](http://i.stack.imgur.com/9O8fC.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T18:25:22.880

业务/领域对象：

```
public class Question {
    public int Id { get; set; }
    public string Text { get; set; }
    public string ImagePath { get; set; }
    public IList<Answer> Answers { get; set; }
    public Answer CorrectAnswer { get; set; }
}

public class Answer {
    public int Id { get; set; }
    public string Text { get; set; }
} 
```

查看型号：

```
public class QuestionViewModel {
    public Question Question { get; set; }
} 
```

# android - Android 的 PresetReverb 不起作用？

> ID：15314243
> 
> 赞同：3
> 
> 时间：2013-03-09T18:20:50.313
> 
> 标签：android, audioeffect

我正在开发一个支持 Android 内置音频效果（如 EnvironmentalReverb）的小型音频播放器。到目前为止，我在启动它而不崩溃时遇到了问题，我通过向 AndroidManifest.xml 添加缺少的权限解决了这个问题。现在的问题是我只是没有听到任何混响。

这是我的代码：

```
MediaPlayer player;
EnvironmentalReverb eReverb;
boolean enabled = true;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    final MediaPlayer player = MediaPlayer.create(this, R.raw.andthentocoda);
    /*
       PresetReverb pReverb    = new PresetReverb(1,0);
       player.attachAuxEffect(pReverb.getId());
       pReverb.setPreset(PresetReverb.PRESET_LARGEHALL);
       pReverb.setEnabled(true);
       player.setAuxEffectSendLevel(1.0f);
       */

       eReverb = new EnvironmentalReverb(1,0); 
       eReverb.setDecayHFRatio((short) 1000);
       eReverb.setDecayTime(10000);
       eReverb.setDensity((short) 1000);
       eReverb.setDiffusion((short) 1000);
       eReverb.setReverbLevel((short) -1000);
       eReverb.setEnabled(enabled);
       player.attachAuxEffect(eReverb.getId());
       player.setAuxEffectSendLevel(0.5f);

       player.start();
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

public void clicked(View v)
{
    enabled = !enabled;
    eReverb.setEnabled(enabled);
    Log.d("EFECT", "Effect " + (enabled ? "enabled" : "disabled"));
} 
```

你知道问题可能是什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-19T00:44:31.770

我将`audioTrack`实例附加到`audioEffect`这样的：

```
try {
    plateReverb = new PresetReverb(0, mAudioTrack.getAudioSessionId());
} catch (Throwable e){
    plateReverb = null;
}
if (plateReverb!=null){plateReverb.setPreset(PresetReverb.PRESET_PLATE);} 
```

当然你必须`mAudioTrack.getAudioSessionId()`用`player.getAudioSessionId()`

但我不知道这是否是你听不见的原因。某些设备不支持音频效果，您会在 logcat 上看到错误。

# c++ - 在 C++/CLI 代码中从 std::stringstream 读取 std::string 时出现问题

> ID：15314251
> 
> 赞同：0
> 
> 时间：2013-03-09T18:21:26.677
> 
> 标签：c++, c++-cli, stringstream

我有一段代码可以像这样读取构建日期和月份。这`__DATE__`是在[预定义宏中定义的](http://msdn.microsoft.com/en-us/library/b0084kay%28v=vs.100%29.aspx)

```
const char* BUILD_DATE = __DATE__;
std::stringstream ss(BUILD_DATE);
std::string month;
size_t year;
ss >> month;
ss >> year;
ss >> year;

char buffer[1024];
sprintf(buffer, "Read year=[%d] month=[%s] date=[%s]", year,month.c_str(),BUILD_DATE); 
```

当它正常工作时，**缓冲区**通常是

> 读年=[2013] 月=[3 月] 日期=[2013 年 3 月 9 日]

但在某些运行中，它是

> 阅读年份=[0] 月=[M] 日期=[2013 年 3 月 9 日]

或者

> 读年=[2013] 月=[3 月] 日期=[2013 年 3 月 9 日]

基本上年份是**0**或月份有一个额外的**空间**。

该项目是在 Windows 7 机器上使用 Microsoft Visual Studio 2010 SP1 构建的 x64/CLR。

我很困惑为什么偶尔会发生这种情况。我是否错误地使用了字符串流？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T00:40:07.010

我最初很想删除这个问题，但我想我会分享我的发现，以防其他一些可怜的灵魂遇到同样的问题。这个问题非常神秘，在我的应用程序的多次运行中从未发生过，并且仅在测试时发生，并且从未在调试测试时发生。

这个看起来很无辜的功能

```
const char* BUILD_DATE = __DATE__;
std::stringstream ss(BUILD_DATE);
std::string month;
size_t year;
ss >> month;
ss >> year;
ss >> year; 
```

在 C++/CLI dll 中实现。在我详细介绍之前，让我解释一下 stringstream 如何在这里读取**月份**和**年份**。要弄清楚有多少个字符构成**月份**变量 `ss >> month`，需要用空格分隔 ss 字符串缓冲区。它使用当前[语言环境](http://www.cplusplus.com/reference/locale/)的方式，特别是它的一个方面，称为[**ctype**](http://www.cplusplus.com/reference/locale/ctype/)。ctype facet 有一个叫做[**ctype::is 的**](http://www.cplusplus.com/reference/locale/ctype/is/)函数，它可以判断一个字符是否是空格。在一个表现良好的 C++ 应用程序中，一切都按照标准工作。现在让我们假设由于某种原因**ctype facet**被破坏了。中提琴，`operator >>`无法确定什么是空格，什么不是空格，也无法正确解析。这正是我的情况所发生的事情，以下是详细信息。

其余答案仅适用于 Visual Studio 2010 提供的 std c++ 库及其在 C++/CLI 下的运行方式。

考虑一些这样的代码

```
struct Foo
{
    Foo()
    {
        x = 42;
    }

    ~Foo()
    {
        x = 45;
    }
    int x;
};

Foo myglobal;

void SimpleFunction()
{
    int myx = myglobal.x;
}

int main()
{
    SimpleFunction();

    return 0;
} 
```

这里**myglobal**是你所说的**对象，静态存储持续时间**保证在进入 main 之前被初始化，在**SimpleFunction**中你总是会看到**myx** 为**42**。**myglobal**的生命周期是我们通常所说**的每个进程**，因为它在问题的生命周期内有效。**Foo::~Foo**析构函数只会在 main 返回后运行。

## 输入 C++/CLI 和 AppDomain

**[根据 msdn 的AppDomain](http://msdn.microsoft.com/en-us/library/system.appdomain.aspx)**为您提供了应用程序执行的隔离环境。对于 C++/CLI，它引入了我称之为**[appdomain 存储持续时间的对象的概念](http://msdn.microsoft.com/en-us/library/d6ykz7kt%28v=vs.100%29.aspx)**

```
 __declspec(appdomain)   Foo myglobal; 
```

因此，如果您像上面那样更改了 myglobal 的定义，您可能会使 myglobal.x 在不同的应用程序域中成为不同的值，例如线程本地存储。因此，静态持续时间的常规 C++ 对象在程序的初始化/退出期间被初始化/清理。我在这里非常松散地使用 init/exit/cleaned，但你明白了。在加载/卸载 AppDomain 期间初始化/清理 appdomain 存储对象。

典型的托管程序仅使用默认的 AppDomain，因此**每个进程**/**每个应用程序域的**存储几乎相同。

在 C++ 中，**[静态初始化顺序失败](http://www.parashift.com/c++-faq/static-init-order.html)**是一个非常常见的错误，其中静态存储持续时间的对象在初始化期间引用其他可能尚未初始化的静态存储持续时间的对象。

现在考虑当每个进程变量引用每个域变量时会发生什么。基本上在卸载 AppDomain 之后，每个进程的变量将引用垃圾内存。对于那些想知道它与原始问题有什么关系的人，请多容忍我一点。

## Visual Studio use_facet 实现

**[std::use_facet](http://www.cplusplus.com/reference/locale/use_facet/)**用于从语言环境中获取感兴趣的方面。它用于`operator <<`获取`ctype`刻面。它被定义为

```
template <class Facet> const Facet& use_facet ( const locale& loc ); 
```

请注意，它返回对**Facet**的引用。VC实现的方式是

```
 const _Facet& __CRTDECL use_facet(const locale& _Loc)

    {   // get facet reference from locale
    _BEGIN_LOCK(_LOCK_LOCALE)   // the thread lock, make get atomic
        const locale::facet *_Psave =
            _Facetptr<_Facet>::_Psave;  // static pointer to lazy facet

        size_t _Id = _Facet::id;
        const locale::facet *_Pf = _Loc._Getfacet(_Id);

        if (_Pf != 0)
            ;   // got facet from locale
        else if (_Psave != 0)
            _Pf = _Psave;   // lazy facet already allocated
        else if (_Facet::_Getcat(&_Psave, &_Loc) == (size_t)(-1))

 #if _HAS_EXCEPTIONS

            _THROW_NCEE(bad_cast, _EMPTY_ARGUMENT); // lazy disallowed

 #else /* _HAS_EXCEPTIONS */
            abort();    // lazy disallowed
 #endif /* _HAS_EXCEPTIONS */

        else
            {   // queue up lazy facet for destruction
            _Pf = _Psave;
            _Facetptr<_Facet>::_Psave = _Psave;

            locale::facet *_Pfmod = (_Facet *)_Psave;
            _Pfmod->_Incref();
            _Pfmod->_Register();
            }

        return ((const _Facet&)(*_Pf)); // should be dynamic_cast
    _END_LOCK()
    } 
```

这里发生的是我们向**语言环境**询问感兴趣的方面并将其存储在

```
 template<class _Facet>
    struct _Facetptr
    {   // store pointer to lazy facet for use_facet
    __PURE_APPDOMAIN_GLOBAL static const locale::facet *_Psave;
    }; 
```

本地缓存**_Psave**以便后续调用获取相同方面更快。use_facet 的调用者不负责返回的分面生命周期管理，那么这些分面是如何清理的。秘诀是代码的最后一部分，带有注释**排队延迟方面进行破坏**。最终`_Pfmod->_Register()`称之为

```
__PURE_APPDOMAIN_GLOBAL static _Fac_node *_Fac_head = 0;

static void __CLRCALL_OR_CDECL _Fac_tidy()
{   // destroy lazy facets
    _BEGIN_LOCK(_LOCK_LOCALE)   // prevent double delete
        for (; std::_Fac_head != 0; )
        {   // destroy a lazy facet node
            std::_Fac_node *nodeptr = std::_Fac_head;
            std::_Fac_head = nodeptr->_Next;
            _DELETE_CRT(nodeptr);
        }
        _END_LOCK()
}

struct _Fac_tidy_reg_t { ~_Fac_tidy_reg_t() { ::_Fac_tidy(); } };
_AGLOBAL const _Fac_tidy_reg_t _Fac_tidy_reg;

void __CLRCALL_OR_CDECL locale::facet::_Facet_Register(locale::facet *_This)
{   // queue up lazy facet for destruction
    _Fac_head = _NEW_CRT _Fac_node(_Fac_head, _This);
} 
```

很聪明的权利。将所有新的方面添加到链接列表中，并使用静态对象析构函数将它们全部清除。除了有一点小问题。`_Fac_tidy_reg`被标记为 _AGLOBAL 意味着所有创建的方面都在每个应用程序域级别上被销毁。

`locale::facet *_Psave`另一方面，声明似乎`__PURE_APPDOMAIN_GLOBAL`最终扩展为**per-process**的含义。因此，在清理 appdomain 后，`per-process _Psave`可能会指向已删除的多面内存。这正是我的问题。VS2010 单元测试发生的方式是一个名为**QTAgent**的进程运行你的所有测试。这些测试似乎是在不同的应用程序域中由同一个**QTAgent在不同的运行中完成的**过程。最有可能隔离先前测试运行的副作用以影响后续测试。对于几乎所有静态存储都是线程/应用程序域级别的完全托管代码来说，这一切都很好，但是对于错误地使用每个进程/每个应用程序域的 C++/CLI，这可能是一个问题。我永远无法调试测试并发现问题的原因是因为 UT 基础设施似乎总是产生一个新的**QTAgent**进程进行调试，这意味着一个新的 appdomain 和一个没有这些问题的新进程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T18:46:43.510

我建议尝试这个来查看实际的日期字符串：

```
cout << "Raw date: " << ss.str() << "\n"; 
```

或者使用调试器单步执行并在创建变量后查看`ss`它。

# java - 使用 JPA 持久化的关系

> ID：15314253
> 
> 赞同：-1
> 
> 时间：2013-03-09T18:21:29.007
> 
> 标签：java, jpa, jpa-2.0, eclipselink

我想知道两个实体之间是否存在关系，例如**salesOrder**实体和**SalesOrderItem**具有**一对多**的关系 我应该如何坚持它们，即我是否需要保持顺序和关系，或者有一种方法可以划分坚持和第一例如，从销售订单项目开始，然后是销售订单。这只是示例，我想知道是否有办法在与 JPA 的持久性期间**忽略关系**并持久化对象而不需要引用关系，但当然如果有外键一次提供它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T20:28:31.810

通常，您希望按如下方式保留它们：

1.  建立两个实体之间的所有联系；如果子引用父，则设置该引用。如果父级引用子级（ren），则设置该/那些引用。

2.  坚持这两个实体。如果一个（父级）引用另一个（子级），则可以标记关系`Cascade.PERSIST`以允许在持久操作期间遵循引用 - 在这种情况下，您只需要持久化一个。

您问“是一种划分持久性的方法，首先例如从销售订单项目开始，然后是销售订单”。由于该项目通常会引用它包含的订单，因此很难想象在任何合理的情况下您会在订单之前保留该项目。您问这类问题时对问题的理解很少，我认为您还没有真正准备好解决可能（或可能不会）允许它们为您工作的例外情况。最好坚持正确的做法。

首先创建一个订单（@OneToMany 中的“一个”）可能是合适的，即使订单包含一个`List`或`Map`多个子项目 - 只要项目实体包含对订单的特定引用。在给定的“工作单元”（实体管理器会话）中，您仍然希望在添加/创建和保留其他子级时更新父级的列表/地图。

# jquery - 使用 Jquery 定位更改属性

> ID：15314254
> 
> 赞同：0
> 
> 时间：2013-03-09T18:21:33.703
> 
> 标签：jquery

我无法在 jsfiddle 中勾勒出这一点，但这是一般概念。你有一个包含大量内容的容器，它们都有不同的组件。如果每个内容的属性都不同，您将如何定位单个内容的相同属性。这是一个简单的例子：

*您希望将所有高度大于 x 的内容放在 column1 中，并将高度小于 x 的内容放在 column2 中。您不能使用简单的 if **$('#content').height() > x**，因为它不会使用第一个子元素作为内容*

有没有办法用 jquery 来操作这样的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T18:24:54.317

你可以像这样循环遍历 DOM：

```
var x = 200;
$('#content').each(function(){
    if($(this).height() > x)
    {
        //Do what you want
    }
}); 
```

# c++ - Templates on integers and const char[N] aren't compiling (couldn't infer template argument 'N')

> ID：15314259
> 
> 赞同：2
> 
> 时间：2013-03-09T18:21:45.873
> 
> 标签：c++, templates

Why the compiler fails to infer template argument in the following code? How can I fix the code? I want add as low runtime overhead as possible.

```
#include <iostream>

using namespace std;

struct Test
{
    template<int N>
    Test(const char data[N]) :
        data(data),
        size(N)
    {}

    const char *data;
    int size;
};

int main()
{
    Test test("Foobar");
    return 0;
} 
```

I tried to make the snippet as small and readable as possible.

pos-reply UPDATE:

This explanation from [Tales of C++ K-ballo](http://talesofcpp.fusionfenix.com/post-7/episode-five-explicit-is-better-than-implicit) might be useful:

> **Lvalue transformations**, applied when an *lvalue* argument is used in context where an *rvalue* is expected. Those transformations are *lvalue to rvalue conversion*, *array to pointer conversion*, and *function to pointer conversion*. This is the type conversion applied to all function arguments when passed by value, and it is customary referred to as argument [decay](http://en.cppreference.com/w/cpp/types/decay).

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-09T18:24:40.183

You need to accept the argument by reference:

```
Test(const char (&data)[N] ) 
```

Now `N` will be inferred.

In your case, the argument is accepted by value which causes the array to decay to pointer to the first element of the array when it gets passed to the constructor.

# android - 如何隐藏文本字段的上下文并在单击按钮时显示它

> ID：15314260
> 
> 赞同：0
> 
> 时间：2013-03-09T18:21:46.950
> 
> 标签：android, eclipse, button, keyboard

***我如何隐藏文本字段的上下文并在单击按钮时显示它我不想隐藏整个文本文件只是我在其中编写的上下文并在单击按钮时显示 ot*** **这是一个小代码***

```
 package com.example.nonachan;

    import android.R.string;
    import android.os.Bundle;
    import android.app.Activity;
    import android.view.Menu;
    import android.view.View;
    import android.widget.Button;
    import android.widget.EditText;
    import android.widget.ImageButton;
    import android.widget.TextView;

    public class MainActivity extends Activity {

    char a;
    char b;
    char c; 
    int i = 0; 
    char buf;
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);

            final EditText t =(EditText)findViewById(R.id.t1);  
                 ImageButton n = (ImageButton)findViewById(R.id.b1);            
                n.setOnClickListener(new View.OnClickListener() {       
                    @Override
                    public void onClick(View arg0) {
                        // TODO Auto-generated method stub

                        a = 'a';
                       t.setText(t.getText().toString() + a);   
                    //   t.setVisibility(View.INVISIBLE);

                    }       

                });

                ImageButton a = (ImageButton)findViewById(R.id.b2);
                a.setOnClickListener(new View.OnClickListener() {     
                    @Override
                    public void onClick(View arg0) {
                        // TODO Auto-generated method stub

                         b = 'b' ;
                         t.setText(t.getText().toString() + b);

                        // t.setVisibility(View.INVISIBLE);
                         i++; 

                    }
                });

                ImageButton m = (ImageButton)findViewById(R.id.b4);
                m.setOnClickListener(new View.OnClickListener() {     
                    @Override
                    public void onClick(View arg0) {
                        // TODO Auto-generated method stub

                         c = 'c' ;
                         t.setText(t.getText().toString() + c);

                         //t.setVisibility(View.INVISIBLE);
                         i++; 

                    }
                });

                Button l = (Button)findViewById(R.id.b3);
                l.setOnClickListener(new View.OnClickListener() {

                    @Override
                    public void onClick(View arg0) {
                        // TODO Auto-generated method stub      
                    //  t.setVisibility(View.VISIBLE);
                    }

                });

        }

        @Override
        public boolean onCreateOptionsMenu(Menu menu) {
            // Inflate the menu; this adds items to the action bar if it is present.
            getMenuInflater().inflate(R.menu.main, menu);
            return true;
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T18:32:55.267

假设您在问题中将内容拼错为上下文（看起来很可能）

而不是试图隐藏 的内容`EditText`，只需将其保存到变量并将 的文本设置`EditText`为空即可。然后在您的按钮中单击只需将文本设置回本地变量中的内容

例如

```
String hiddenText = null;

EditText text = (EditText)findViewById(R.id.t1);

ImageButton hide = (ImageButton)findViewById(R.id.b1); 
btn.setOnClickListener(new View.OnClickListener() {       
    @Override
    public void onClick(View arg0) {
        // save and hide
        hiddenText = text.getText();
        text.setText("");
    }       
});

ImageButton unhide = (ImageButton)findViewById(R.id.b2); 
btn.setOnClickListener(new View.OnClickListener() {       
    @Override
    public void onClick(View arg0) {
        // unhide the text and 'clear' hiddenText
        if (hiddenText != null) {
            text.setText(hiddenText);
            hiddenText = null;
        }
    }       
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T18:31:33.007

有几种方法可以做到这一点。这取决于你想怎么做。这些只是我脑海中的一些建议，你甚至可以一起使用它们。

您可以将任何输入的文本放在单独的字符串中，然后如果不可见将 TextView 设置为显示空字符串，如果可见则将 TextView 设置为保存的字符串。

您可以使用可见性标签。

您可以将文本颜色设置为背景颜色。

您可以在可见/不可见状态下创建/删除 TextView。

如果需要，您可以将文本替换为安全输入的符号（对于 edittext 中的每个字符显示一个星号或其他内容），然后将其更改回纯文本。

有一百零一种方法，如果你搜索以前回答的问题，你会看到几种不同的方法。

# c# - 强制重新加载 cookie

> ID：15314266
> 
> 赞同：0
> 
> 时间：2013-03-09T18:22:12.387
> 
> 标签：c#, asp.net-mvc, razor-2

我有一个基于 razor 的网络应用程序，当他们第一次根据传入的 guid 加载屏幕时，我在其中设置了一些 cookie。

所以，网址看起来像：

https://[url/CustPortal/Account/Logon/DDE4BBFB-0D2E-4706-A604-36EEA3FDCAE3

验证 guid 后，我将设置 cookie，例如数据库中的 css。

这部分工作正常。我遇到的问题是他们下次访问时传入的 guid 是否不同。

正在设置 cookie，但它没有使用正确的 css。我可以 CTRL+F5 并修复它，但我不能依赖客户知道这一点。

有没有办法强制它在每次访问网站时刷新而不使用缓存？

希望这是有道理的！

谢谢！

# java - 无法使用 java URLConnection 提交表单

> ID：15314267
> 
> 赞同：1
> 
> 时间：2013-03-09T18:22:18.617
> 
> 标签：java, javascript, html, post, httpsurlconnection

我正在尝试使用 JAVA URLConnection 类提交表单，但我继续返回一个页面：

```
meta http-equiv="refresh" content="1;url=/nidp/jsp/err.jsp?sid=0?error=Required+JavaScript+support+is+not+available.&cause=JavaScript+has+been+disabled+or+the+browse+does+not+support+JavaScript.+Use+a+JavaScript+capable+browser+and%2For+enable+JavaScript+support+in+the+browser."> 
```

我怀疑这与我在发送 POST 请求时没有考虑到的 cookie 或 javascript 操作有关。

由于是https页面，无法查看wireshark上的post请求，所以我真的不知道POST数据包是如何离开eclipse的。我确实知道 IE POST 数据包的样子，因为我使用了开发人员的工具来查看请求。

现在的表格：

```
<form name="frmlogin" action="Login_Chk.aspx?rk=" method="post" onsubmit='return chk_form()' autoComplete="off">
    <input type="text" name="txtUser" Class="freeinputl" onKeyPress="return chkAlpha(event,'eng');" />
    <input type="text" name="txtId" Class="freeinputl" onKeyPress="return chkDigits(event,'');" />
    <inputtype="password" name="txtPass" class="freeinputl" onKeyPress="return chkAlpha(event,'eng');" />
    <input type='image' name='btnishur' id='btnishur'  tabindex=99 class='hideprint' align=absmiddle src='ok.gif'  onmouseover="this.src='ok_over.gif'" onmouseout="this.src='ok.gif'">
    <input TYPE="hidden" name="javas" value="0">
    <input TYPE="hidden" name="src" value="">
</form> 
```

javascripts（在同一来源）：

```
<script type="text/javascript" src="/Js/Global.js"></script>
<script type="text/javascript" src="js/Form.js"></script>
<script type="text/javascript">
var sw_caps=false;
function setFocus()
{ 
 obj=document.frmlogin;  
 obj.txtUser.focus();
}
function chk_form()
{
 obj=document.forms[0];
 if(!chkTextField(obj.txtUser,'Username','yes',2,'','')){return false;}
 if(!chkTextField(obj.txtId,'ID','yes',1,'D','')){return false;}
 if(!chkTextField(obj.txtPass,'pass','yes',1,'','')){return false;}
 return chkFormEndShort(obj);
}
</script> 
```

和我的java代码：

```
public static void doSubmit(String url, Map<String, String> data) throws Exception {
    URL siteUrl = new URL(url);
    HttpsURLConnection conn = (HttpsURLConnection) siteUrl.openConnection();
    conn.setRequestMethod("POST");
    conn.setDoOutput(true);
    conn.setDoInput(true);

    DataOutputStream out = new DataOutputStream(conn.getOutputStream());

    Set keys = data.keySet();
    Iterator keyIter = keys.iterator();
    String content = "";
    for(int i=0; keyIter.hasNext(); i++) {
        Object key = keyIter.next();
        if(i!=0) {
            content += "&";
        }
        content += key + "=" + URLEncoder.encode(data.get(key), "UTF-8");
    }
    System.out.println(content);
    out.writeBytes(content);
    out.flush();
    out.close();
    BufferedReader in = new BufferedReader(new InputStreamReader(conn.getInputStream()));
    String line = "";
    while((line=in.readLine())!=null) {
        System.out.println(line);
    }
    in.close();
    System.out.println("protocol = " + siteUrl.getProtocol());
}

public static void main(String[] args) throws Exception {
    Map<String, String> data = new HashMap<String, String>();
    data.put("user", "XYZ");
    data.put("pass", "xyz");
    data.put("id", "123456789");
    data.put("src", "");
    data.put("javas", "1");
    data.put("btnishur.x", "0");
    data.put("btnishur.y", "0");
    doSubmit("https://www.x.y/Login_Chk.aspx?rk=HTTP/1.1", data); 
```

谢谢！

# java - 实时显示计算进度，即使关闭浏览器也能保留进度

> ID：15314274
> 
> 赞同：0
> 
> 时间：2013-03-09T18:22:37.637
> 
> 标签：java, ajax, multithreading

假设，这是在任何项目中`jsp`。`servlet`

我点击一个按钮来计算一些东西，这个过程将通过几个步骤或使用一些需要近 5 小时的同步线程来完成。

如果单击后关闭浏览器窗口，会发生什么？计算过程会停止还是继续？

如果是后者（继续），我在 2 小时后登录我的帐户，我会看到什么？我想实时查看计算进度。

我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T21:06:56.620

这种处理需要计划。有很多边缘情况。如果进程已经在运行怎么办？如果服务器在处理过程中终止怎么办？可以重启吗？可以中断处理吗？每个用户都可以开始这个处理，还是只是授权的？

好的，现在来回答一下。您想在单独的后台线程中运行处理。请参阅 Executor 类。然后，您必须在某处存储该处理的进度（在此处考虑 db）并创建另一个页面来显示该进度。您可能还必须记住开始处理的用户，以便您知道要向请求进度的用户显示哪些进度信息。

很简单！:)

# lisp - 检查列表是否包含至少一个非零元素

> ID：15314279
> 
> 赞同：-1
> 
> 时间：2013-03-09T18:23:01.850
> 
> 标签：lisp, clisp

标题几乎说明了一切。

我正在寻找类似的东西

```
(atleastonenonnil '(nil nil nil nil '(A B C)))
=> T 
```

我可以用递归的方式来做，但我做不到。我应该使用一些内置功能吗？我在用着`cLisp`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T01:16:07.917

如果你处理列表的第一个元素，那么其余的都可以递归完成。代码是这样的：

```
(defun at-least-one-nonnil (l)
  (and (not (nullp l))
       (or (car l)
           (at-least-one-nonnil (cdr l)))))) 
```

当然，在这个简单的例子中，已经有一个内置函数了。

```
(defun at-least-one-nonnil-v2 (l)
  (some #'identity l)) 
```

但这并不能帮助您了解递归。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-20T22:39:20.920

为我工作。（AutoCAD的AutoLisp）示例：

```
(repeat 100000 (setq longlist (cons nil longlist))) 
```

然后

```
(setq longlist (append longlist (list 1))) 
```

这是一个 100001 元素列表，最后只有 1 个非零元素。

```
(apply 'or longlist) 
```

返回 T。这不是正确答案还是列表不够长？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-03-18T12:03:22.053

关于什么：

```
(apply 'or '( your list here )) ;; ? 
```

# sql - BCP - 导出的文件（docx、xlsx 和 pptx）已损坏

> ID：15314281
> 
> 赞同：1
> 
> 时间：2013-03-09T18:23:08.937
> 
> 标签：sql, filestream, bcp

我正在使用以下 bcp 命令从文件流 db 中导出二进制文件，并且所有其他文件似乎都可以正常导出（即 txt、pdf、rtf、图像文件等），但 docx、xlsx 和 pptx 文件除外。我能够导出这些文件（即 docx、xlsx 和 pptx），但在打开这些文件时我收到一条警告/错误消息，然后它会正确打开文件。

```
BCP "SELECT content FROM [dbo].[Contents] WHERE ID=1" queryout "C:\Temp\" -T -S (local) -f C:\Temp\files.fmt 
```

打开 docx、xlsx 和 pptx 文件时，我收到以下消息：

XLSX - Excel 发现无法读取的内容，是否要恢复此文档的内容？DOCX - 文件 test.docx 无法打开，因为内容有问题，然后 Excel 发现无法读取的内容，您要恢复此文档的内容吗？

另外，我的 files.fmt 文件中有这个：

10.0
1
1 SQLBINARY 0 0 "\t" 1 内容 ""

任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-16T23:35:04.067

我不是 100% 确定您的问题是否与我遇到的相同，但就我而言，我发现问题实际上出在*写作*部分，而不是阅读部分。比如我原来的写代码是这样的：

```
Dim FILE_CONTENT(len) As Byte
File.InputStream.Read(FILE_CONTENT, 0, len)
SaveFileToDatabase(FILE_NAME, CONTENT_TYPE, FILE_CONTENT) 
```

当我将第一行更改为以下内容时：

```
Dim FILE_CONTENT(0 To len - 1) As Byte 
```

阅读错误消失了。我只是忘记了当您在未指定下限的情况下对其进行标注时，VB 实际上会默认分配 N+1 个字节（O 到 N）。请参阅此处描述的类似情况：[Uploaded Docx Files are getting corrupted](https://stackoverflow.com/questions/19406990/uploaded-docx-files-are-getting-corrupted)。希望有帮助。

# math - 如何“撤消”旋转以获得适当的缩放？

> ID：15314282
> 
> 赞同：1
> 
> 时间：2013-03-09T18:23:31.380
> 
> 标签：math, opengl, matrix

我正在尝试从投影矩阵计算缩放百分比。只要图像不旋转，以下代码就可以工作：

```
void UpdateZoomPercent()
{
    var zoom = _projMatrix.M11 * glControl.Width / 2; // M11 is the top left value
    lblZoomPercent.Text = (zoom * 100).ToString("G3") + "%";
} 
```

本质上，它只需要 X 比例，然后将其乘以到视口。X 和 Y 总是按比例缩放，所以我不需要看 Y。我的场景是 2D。

我如何考虑轮换？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T20:07:00.253

考虑一个构成笛卡尔坐标系基础的实数值矩阵。每列代表一个基向量。在等距缩放的情况下，所有基向量都具有相同的长度。令 C(M,n) 表示矩阵 M 的第 n 列向量，即 C(M,n) = M_n,j，那么对于等距缩放，它将是 len(C(M,0)) = len( C(M,1)) = len(C(M,…))，其中 len(v) = sqrt(v·v)

在等距缩放的情况下，基向量的长度会有所不同，这就是您可以用来检测这种情况的方法。

在计算机图形学中，您遇到的矩阵是*同质*的，以允许单个矩阵表示它们所代表的空间内的所有可能的变换。齐次矩阵有 N+1 行和列，其中 N 是它们所代表的坐标空间的维数。按照惯例（至少在所有流行的计算机图形软件中）左上部分（即 M_i,j 其中 i 和 j 在 1…N，基于 1 的索引中）形成基向量，而第 N 列和第 N 行形成同质部分.

因此，在 OpenGL 的情况下，您会将左上角的 3×3 子矩阵视为坐标基向量。而且由于 OpenGL 索引列的主要顺序，您不必重新排序从 OpenGL 检索到的内容。

# php - MySQLi 获取列名而不是列内容？

> ID：15314287
> 
> 赞同：2
> 
> 时间：2013-03-09T18:23:50.660
> 
> 标签：php, mysqli

我正在尝试使用准备好的语句来检索 MySQL 表的内容。

```
$sql = $mysqli->prepare("SELECT 'number' FROM rooms
        WHERE 1 
        ORDER BY  'number' ASC 
        LIMIT ?, ? ");

    $n1 = 0;
    $n2 = 30;

    $sql->bind_param('ii', $n1, $n2);

    $sql->execute();
    $sql->bind_result($number);

    while ($sql->fetch()){

        printf($number);

    } 
```

根据我读过的几乎 3 个不同的[教程](http://codular.com/php-mysqli)和[手册，这个脚本应该遍历表“房间”的“数字”列的内容并打印出结果。](http://php.net/manual/en/mysqli-stmt.fetch.php)相反，它只是打印列本身的名称（“数字”）与行数一样多。

这让我发疯！为什么这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T18:25:49.360

使用反引号作为列名

```
$sql = $mysqli->prepare("SELECT `number` FROM rooms
        WHERE 1 
        ORDER BY  `number` ASC 
        LIMIT ?, ? "); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T18:26:50.493

你的报价是错误的。您实际上在查询中说过“对于桌子房间中的每个条目，请给我字符串'数字'。

当您想引用字段或表名称时，请改用斜引号：

```
SELECT `field`, 'fixed string'
FROM   `table` 
```

# twitter-bootstrap - jasny引导扩展不起作用

> ID：15314290
> 
> 赞同：0
> 
> 时间：2013-03-09T18:24:00.263
> 
> 标签：twitter-bootstrap, jasny-bootstrap

我之前使用的是引导程序。现在我需要文件上传功能，所以想试试 jasny。我下载了扩展程序，但它不起作用？

我的包含文件中的文件是（除了 jquery.js）：

```
<script type="text/javascript" src="jquery/jquery.js"></script>
<script type="text/javascript" src="bootstrap/js/bootstrap.js"></script>
<script type="text/javascript" src="jasny-bootstrap/js/jasny-bootstrap.js"></script>
<link href="bootstrap/css/bootstrap.css" rel="stylesheet" type="text/css">
<link href="jasny-bootstrap/css/jasny-bootstrap-responsive.css" type="text/css">
<link href ="jasny-bootstrap/css/jasny-bootstrap.css" type="text/css"> 
```

引导功能都正常工作。但我无法使用此扩展程序。我把它包括错了吗？

我没有使用包含所有 jasny 扩展的完整引导程序，因为它破坏了我以前的一些引导程序功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T08:08:00.253

你有没有自动格式化你的代码？因为它有时会强制输入文本中的文件名删除一行，因此不会使其可见，但实际上当您尝试它时它实际上工作正常。那就把它放回同一条线上。

如果没有，请尝试确保您的 css/js 的所有路径都是正确的。

你能描述一下你所看到的吗？

# ruby-on-rails - 如何避免共享捆绑文件夹下的多个宝石

> ID：15314291
> 
> 赞同：1
> 
> 时间：2013-03-09T18:24:00.383
> 
> 标签：ruby-on-rails, capistrano

使用 capistrano 命令进行部署时，如何避免共享捆绑文件夹下的多个 gem。大多数情况下，当我将 gem 从一个版本迁移到另一个版本时，共享包文件夹仍然包含这两个版本，从而导致问题。我们应该如何避免这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T18:27:44.110

我不确定我是否见过这样的冲突。但是我已经扩展了 capistrano`deploy:cleanup`任务，清理过时的捆绑器 gem：

```
after "deploy:cleanup", "bundle:clean"

namespace :bundle do
  task :clean, :except => {:no_release => true} do
    bundle_cmd = fetch(:bundle_cmd, "bundle")
    run "cd #{latest_release} && #{bundle_cmd} clean"
  end
end 
```

如果它导致您发生冲突，您可能可以在之后执行此操作`deploy`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-02T11:20:01.550

上面khustochka的回答完美地解决了我的问题。但是，如果您的系统使用 Capistrano v3，则语法发生了显着变化。我使用了以下内容：

```
namespace :bundle do
  task :clean do
    on roles(:web) do
      within release_path do
        with rails_env: fetch(:rails_env) do
          execute :bundle, :clean
        end
      end
    end
  end
end

after "deploy:cleanup", "bundle:clean" 
```

~

# unit-testing - Angular 中的单元测试指令控制器而不使控制器全局化

> ID：15314293
> 
> 赞同：66
> 
> 时间：2013-03-09T18:24:07.937
> 
> 标签：unit-testing, angularjs, angularjs-directive, jasmine, karma-runner

在 Vojta Jina 演示指令测试的优秀存储库中，他在模块包装器之外定义了指令控制器。见这里： [https ://github.com/vojtajina/ng-directive-testing/blob/master/js/tabs.js](https://github.com/vojtajina/ng-directive-testing/blob/master/js/tabs.js)

这不是不好的做法并污染了全局命名空间吗？

如果有人在另一个地方调用 TabsController 可能是合乎逻辑的，那不会破坏东西吗？

上述指令的测试可在此处找到：[https ://github.com/vojtajina/ng-directive-testing/commit/test-controller](https://github.com/vojtajina/ng-directive-testing/commit/test-controller)

是否可以将指令控制器与指令的其余部分分开测试，而不将控制器放在全局命名空间中？

将整个指令封装在 app.directive(...) 定义中会很好。

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2014-07-15T14:41:22.273

我有时更喜欢在指令中包含我的控制器，所以我需要一种方法来测试它。

首先是指令

```
angular.module('myApp', [])
  .directive('myDirective', function() {
    return {
      restrict: 'EA',
      scope: {},
      controller: function ($scope) {
        $scope.isInitialized = true
      },
      template: '<div>{{isInitialized}}</div>'
    }
}) 
```

然后是测试：

```
describe("myDirective", function() {
  var el, scope, controller;

  beforeEach inject(function($compile, $rootScope) {
    # Instantiate directive.
    # gotacha: Controller and link functions will execute.
    el = angular.element("<my-directive></my-directive>")
    $compile(el)($rootScope.$new())
    $rootScope.$digest()

    # Grab controller instance
    controller = el.controller("myDirective")

    # Grab scope. Depends on type of scope.
    # See angular.element documentation.
    scope = el.isolateScope() || el.scope()
  })

  it("should do something to the scope", function() {
    expect(scope.isInitialized).toBeDefined()
  })
}) 
```

有关从实例化指令获取数据的更多方法，请参阅[angular.element 文档。](https://code.angularjs.org/1.2.18/docs/api/ng/function/angular.element#jquery-jqlite-extras)

请注意，实例化指令意味着控制器和所有链接功能已经运行，因此可能会影响您的测试。

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2013-03-09T19:22:59.600

好问题！

因此，这是一个普遍的问题，不仅与控制器有关，而且可能与指令可能需要执行其工作但不一定希望将此控制器/服务公开给“外部世界”的服务有关。

我坚信**全局数据是邪恶的，应该避免，这也适用于指令控制器**。如果我们采用这个假设，我们可以采用几种不同的方法来“本地”定义这些控制器。在这样做的同时，我们需要记住，**控制器应该仍然“容易”被单元测试访问，**所以我们不能简单地将它隐藏到指令的闭包中。国际海事组织的可能性是：

1）首先，我们可以简单地**在模块级别定义指令的控制器**，例如：：

```
angular.module('ui.bootstrap.tabs', [])
  .controller('TabsController', ['$scope', '$element', function($scope, $element) {
    ...
  }])
 .directive('tabs', function() {
  return {
    restrict: 'EA',
    transclude: true,
    scope: {},
    controller: 'TabsController',
    templateUrl: 'template/tabs/tabs.html',
    replace: true
  };
}) 
```

这是我们在[https://github.com/angular-ui/bootstrap/blob/master/src/tabs/tabs.js](https://github.com/angular-ui/bootstrap/blob/master/src/tabs/tabs.js)中使用的一种简单技术，它基于 Vojta 的工作。

虽然这是一种非常简单的技术，但应该注意控制器仍然暴露给整个应用程序，这意味着其他模块可能会覆盖它。从这个意义上说，它使控制器成为 AngularJS 应用程序的本地控制器（因此不会污染全局窗口范围），但它对所有 AngularJS 模块也是全局的。

2）**使用闭包范围和特殊文件设置进行测试**。

如果我们想完全隐藏控制器功能，我们可以将代码包装在闭包中。这是 AngularJS 正在使用的一种技术。例如，查看[NgModelController](https://github.com/angular/angular.js/blob/master/src/ng/directive/input.js#L891)我们可以看到它在自己的文件中被定义为“全局”函数（因此可以轻松访问以进行测试），但整个文件在构建期间被包裹在闭包中：

*   [https://github.com/angular/angular.js/blob/master/src/angular.prefix](https://github.com/angular/angular.js/blob/master/src/angular.prefix)
*   [https://github.com/angular/angular.js/blob/master/src/angular.suffix](https://github.com/angular/angular.js/blob/master/src/angular.suffix)

总而言之：选项（2）“更安全”，但需要一些前期设置来构建。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-02-18T07:28:42.140

詹姆斯的方法对我有用。但是，一个小转折是，当您有一个外部模板时，您必须在 $rootScope.$digest() 之前调用 $httpBackend.flush() 才能让 Angular 执行您的控制器。

我想这应该不是问题，如果您使用的是[https://github.com/karma-runner/karma-ng-html2js-preprocessor](https://github.com/karma-runner/karma-ng-html2js-preprocessor)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-08-05T11:39:19.753

这样做有什么问题吗？似乎更可取，因为您避免将控制器放置在全局名称空间中，并且能够测试您想要的（即控制器）而无需不必要地编译 html。

示例指令定义：

```
 .directive('tabs', function() {
  return {
    restrict: 'EA',
    transclude: true,
    scope: {},
    controller: function($scope, $attrs) {
      this.someExposedMethod = function() {};
    },
    templateUrl: 'template/tabs/tabs.html',
    replace: true
  }; 
```

然后在你的 Jasmine 测试中，询问你使用“name + Directive”（例如“tabsDirective”）创建的指令：

```
var tabsDirective = $injector.get('tabsDirective')[0];
// instantiate and override locals with mocked test data
var tabsDirectiveController = $injector.instantiate(tabsDirective.controller, {
  $scope: {...}
  $attrs: {...}
}); 
```

现在您可以测试控制器方法：

```
expect(typeof tabsDirectiveController.someExposedMethod).toBe('function'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-12-08T15:47:09.540

使用 IIFE，这是一种避免全局命名空间冲突的常用技术，它还可以节省棘手的内联体操，并在您的范围内提供自由。

```
 (function(){

  angular.module('app').directive('myDirective', function(){
     return {
       .............
       controller : MyDirectiveController,
       .............
     }
  });

  MyDirectiveController.$inject = ['$scope'];

  function MyDirectiveController ($scope) {

  }

})(); 
```

# razor - 简单的 JSON 助手请求 - webmatrix/razor

> ID：15314296
> 
> 赞同：2
> 
> 时间：2013-03-09T18:24:21.827
> 
> 标签：razor, webmatrix, json, webmatrix-2

我想使用谷歌地图显示页面上两个地方之间的距离。

所以我已经找到了如何编写 URL，但我不知道如何解码响应并在我的网站上显示？这是我到目前为止所拥有的：

```
string distancematrix = "http://maps.googleapis.com/maps/api/distancematrix/json?        origins=34746+Florida&destinations=Universal+Studios+Florida|Orlando+Internation+Airport&mode=driving&units=imperial&sensor=false";
Json.Write(distancematrix, Response.ToString); 
```

我可以使用@ 命令将每个结果放入页面吗？

谢谢，加文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T21:42:02.207

这是一个（简化的）示例 cshtml 页面，它从外部文件而不是外部站点获取数据，但它可能会对您有所帮助：

```
@{
    var json = File.ReadAllText(Server.MapPath("~/TestJSON.json"));
    var data = Json.Decode(json);
}

<html>
    <head>
    </head>
    <body>
        <p>
            @data.destination_addresses <br/>
            @data.origin_addresses <br/>
            @data.rows <br/>
            @data.status
        </p>
    </body>
</html> 
```

我不确定（因为当谈到以我不习惯看到的方式编写的 JSON 语法时，我有点笨拙），但您使用括号（即“[”和“]”）似乎暗示了使用数组？

如果您以这种方式访问​​数组，它可能看起来像这样：

```
@{
    var json = File.ReadAllText(Server.MapPath("~/TestJSON.json"));
    var data = Json.Decode(json);
    var i = 0;
}

<html>
    <head>
    </head>
    <body>
        <p>
            @{
                while(i < data.destination_addresses.Length)
                {
                    data.destination_addresses[i]; <br/>
                    i++;
                }
            }
        </p>
    </body>
</html> 
```

如果这没有帮助，请告诉我，我们可以从那里开始。

# c++ - 为什么在 C++ 中使用内联函数不会增加二进制大小？

> ID：15314298
> 
> 赞同：0
> 
> 时间：2013-03-09T18:24:28.990
> 
> 标签：c++, inline-functions

我写了这段代码：

```
inline int a_plus_b_power2(int a, int b) {
  return (a + b) * (a + b); 
}

int main() {
  for(int a = 0; a < 9999999999999; ++a)
    for(int b = 0; b < 999999999999; ++b)
      a_plus_b_power2(a, b);  

  return 0;
} 
```

但是为什么这个程序的二进制文件与这个程序没有区别：

```
inline int a_plus_b_power2(int a, int b) {
  return (a + b) * (a + b); 
}

int main() {
  for(int a = 0; a < 9; ++a)
    for(int b = 0; b < 9; ++b)
      a_plus_b_power2(a, b);  

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-09T18:30:30.187

您将函数内联与循环展开混淆了：

**循环展开**意味着变换

```
for (int i = 0; i < 4; i++)
  a(i); 
```

进入

```
a(0); a(1); a(2); a(3); 
```

而**函数内联**意味着转换

```
void a(int i) { cout << i; }

for (int i = 0; i < 4; i++)
  a(i); 
```

进入

```
for (int i = 0; i < 4; i++)
  cout << i; 
```

编译器确实有启用循环展开的选项（查看`-funroll-loops`gcc 和相关选项），但除非你非常努力地戳它们，否则它们中的大多数将非常不愿意展开 999999999999 迭代......（生成的二进制文件将是数 TB）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T18:35:19.873

内联函数每次调用仅“粘贴”一次。

在您的两个示例中，内联函数仅被调用一次，尽管它被多次调用。

我相信你想要这样的东西：

```
for (unsigned int a = 0; a < 9; ++a)
{
  for (unsigned int b = 0; b < 9; b+= 3) // Incremented by 3 because of 3 calls in loop.
  {
    a_plus_b_power_2(a, b + 0);
    a_plus_b_power_2(a, b + 1);
    a_plus_b_power_2(a, b + 2);
  }
} 
```

上面的示例可能会导致编译器在循环内将代码粘贴到您的内联函数中 3 次，并增加二进制文件的大小。

*注意：关闭优化，因为优化可能会导致编译器将内联函数转换为循环内的独立函数。*

# php - CodeIgniter 不执行 $.get() 调用的 PHP 脚本

> ID：15314303
> 
> 赞同：0
> 
> 时间：2013-03-09T18:24:51.680
> 
> 标签：php, jquery, codeigniter

我有一个使用 CodeIgniter 编写的示例脚本，并且我使用了 JQuery 的`$.get()`函数。`$.get()`将此 PHP 脚本称为：**delete.php**

```
 $id = $_GET['id'];
    $conn = mysqli_connect('localhost', 'root', '', 'table1');
    $qry = "delete from table1 where id = $id";
    $qry_result = mysqli_query($conn, $qry); 
```

我如何在 JQuery 中调用 delete.php: `$.get("delete.php", { id : my_id} );`。我的问题是 delete.php 不是由`$.get()`. 我在想是否是由于 CodeIgniter 的安全性导致您无法直接访问脚本？

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T18:42:16.137

首先，如果你是这个 MVC 框架的新手，那么至少去学习那里的用户指南[http://ellislab.com/codeigniter/user-guide/](http://ellislab.com/codeigniter/user-guide/)的介绍和教程部分。

然后只有你会知道如何在其中调用控制器。

但如果你想要答案，那么你可以这样做：

1.首先创建一个控制器（例如mycontroller）并在其中编写一个函数（例如myfunction）并将您的代码写入该部分并且最好不要在MVC中使用这个mysqli *东西。

2.通过函数内部的url（例如http://[yourhost]/index.php/mycontroller/myfunction）`$.get()`。

PS 我不确定您的 CI 是否配置为在 URL 中使用 index.php。这完全取决于您的配置。因此，如果它不适合您，请尝试不使用 index.php 或查看 routs.php

# c# - 如何更改 Windows Phone 8 中的默认命名空间

> ID：15314311
> 
> 赞同：1
> 
> 时间：2013-03-09T18:25:34.880
> 
> 标签：c#, visual-studio-2012, windows-phone-8

在开始开发我的第一个 wp8 应用程序时，我注意到即使在开始之前要求命名应用程序时，默认命名空间仍然是 PivotApp1。如何正确地将其更改为我的实际应用程序的名称？

*注意，右键单击项目并转到属性以更改应用程序选项卡中的默认命名空间不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T23:16:58.220

在文件后面的代码中：

1.  右键单击要更改的命名空间
2.  重构
3.  改名
4.  输入您的新名称
5.  好的

![在此处输入图像描述](../Images/9820347f03842a79f570d92939730077.png)

# c - C程序编译但没有输出

> ID：15314313
> 
> 赞同：1
> 
> 时间：2013-03-09T18:25:38.920
> 
> 标签：c, header-files

我正在尝试学习在 C 中创建头文件并将其包含在我的 main.c func() 中。我创建了一个简单的 tut1.c 文件，其中包含名为 call() 的函数和一个 tut1.h 头文件，其中包含名为 call() 的 tut1.c 函数。就是这样，现在我在 linux fedora 上使用 eclipse Juno for C/C++。我没有得到任何编译错误，但代码不会输出？我徒劳地尝试了控制台和日食。你能检查一下吗？谢谢

```
---main.c-----

#include <stdlib.h>
#include <string.h>
#include <stdio.h>
#include "tut1.h"

int main (void)

{
    int tut1(void);

    return 0;
}

-----tut1.c------

#include <stdio.h>
#include <stdlib.h>
#include "tut1.h"

int call (void)
{
    int *ptr;
    int i;

        ptr = &i;
       *ptr = 10;

    printf ("%d we are printing the value of &i\n", &i);
    printf ("%d we are printing the value of *ptr\n", *ptr);
    printf ("%d we are printing the value of ptr\n", ptr);
    printf ("%d we are printing the value of &ptr\n", &ptr);

    getchar();
    return 0;
}

----tut1.h----

#ifndef TUT1_H_
#define TUT1_H_

extern int call (void);

#endif 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T18:29:05.437

您没有看到任何内容，因为您没有`call()`从您的函数中调用该`main()`函数。

该`main()`函数是您运行程序时的默认入口点，即在执行期间被调用的第一个函数。

要执行该函数`call()`，您需要`main()`按如下方式调用它：

```
int main (void)

{
    int result = call();

    return 0;
} 
```

顺便说一句，`int tut1(void);`你的这一行`main()`只是声明了一个函数，你似乎没有在任何地方定义过。所以我在上面显示的代码中删除了它。

# linux - Linux (Ubuntu) ioctl KDGETLED/KDGKBLED 始终为 0

> ID：15314315
> 
> 赞同：2
> 
> 时间：2013-03-09T18:25:44.213
> 
> 标签：linux

下面的代码片段；基本上，我正在抓取活动的 vt 并针对该终端发出一个 ioctl KDGETLED 以获取 capslock/numlock/scrolllock 键的当前状态，并且无论锁定键的状态如何，我总是得到 result=0。

我已经在多个 Linux 机器上尝试过这个，所有运行 Ubuntu 的变体（例如 Mint）。我已经为 KDGETLED 命令尝试了其他 fd，例如“/dev/tty”、“/dev/console”、0 等。我遇到了与 KDGKBLED 相同的问题。其他人是否遇到同样的问题，我是否在做一些愚蠢的事情，我是否遇到了编写不佳的驱动程序，或者其他什么？

```
int fd;
vt_stat stat;
fd = open("/dev/tty0", O_RDONLY);
if (ioctl(fd, VT_GETSTATE, &stat) == -1) {
    fprintf(stderr, "Error on VT_GETSTATE\n");
    exit(1);
}
close(fd);
char tty[128];
sprintf(tty, "/dev/tty%d", stat.v_active);
printf("Query tty: %s\n", tty);
char result;
fd = open(tty, O_RDWR | O_NDELAY, 0);
if (ioctl(fd, KDGETLED, &result) == -1) {
    fprintf(stderr, "Error on KDGETLED\n");
    exit(1);
}
close(fd);
printf("LED flag state: %d\n", result); 
```

提前感谢所有审查我的问题的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T18:31:27.093

检查驱动程序代码，尤其是该驱动程序的`struct file_operations`实例，并检查分配给`.ioctl`成员的功能 - 如果编码不当（我已经看到 ioctls 中发生了很多糟糕的事情），那么这绝对是你的问题。

在这种情况下，我很确定这是驱动程序的错。只要 ioctl 命令没有显示编译错误，一切——尤其是错误处理和输入检查——都是驱动程序的任务。

# javascript - 石墨数据和立体主义显示

> ID：15314317
> 
> 赞同：1
> 
> 时间：2013-03-09T18:25:57.220
> 
> 标签：javascript, metrics, graphite, cubism.js

我正在尝试为我的 Graphite 数据创建一个实时仪表板。我希望它只显示最后几个小时的数据。我可以将 Cubism 配置为从 Graphite 中提取数据，但我无法在最后一小时内创建轴。Graphite 数据以 10 秒的分辨率存储 1 小时，一小时后以 30 秒的分辨率存储。当我将 Cubism 配置为显示几个小时时，根据以下问题，我的所有数据都向左挤压：[为什么这些 Cubism 水平线图向左挤压？](https://stackoverflow.com/questions/12429311/why-are-these-cubism-horizon-charts-squished-to-the-left). 我理解为什么会发生这种情况，因此想将时间范围限制在最后一小时。我查看了几个示例，但无法弄清楚如何将大小和步骤配置为 1）填充屏幕的宽度 2）仅细分最后一小时。

有人可以指出我正确的方向吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-11T06:33:51.940

您可以使用图形填充屏幕的宽度，如下所示：

假设屏幕宽度为 1400 像素，将画布宽度和水平宽度设置为 1400 像素

最后一小时不能直接细分。您必须修改立体主义源才能实现这一目标。

# video - UIWebView 横向播放视频，视频播放完毕后 ui 损坏

> ID：15314321
> 
> 赞同：3
> 
> 时间：2013-03-09T18:26:32.570
> 
> 标签：video, webview, orientation, landscape, portrait

我试图解决这个问题很长时间了，我已经搜索并尝试了所有可能的事情，但我仍然无法完成它。

我的视图层次结构是这样的

UITabBarController

-----UINavigationController +（加载了 youtube 视频的 UIWebView 子视图）

-----UINavigationController

整个应用程序是纵向的，但我希望只能看到横向视频。（持有 web 视图的视图控制器应始终保持纵向）。

我在目标属性中启用了横向左、横向右和纵向设备方向。我已经对 UITabBar 进行了子类化，因此它会向顶视图控制器询问方向更改。我已经实现了 SupportedInterfaceOrientation 和 ShouldAutorotate。

一切都按预期工作，您在网络视图中按下“播放”按钮，它会进入全屏状态，视频能够旋转......问题从哪里开始？当您在全屏视频上按“完成”时，如果视频处于横向模式，则包含 web 视图及其标签栏的视图将保持横向。它应该保持纵向！

在支持的界面方向上返回 0 时，我尝试设置 StatusBarOrientation。我试过玩变换

但我无法完成这个简单的任务。为什么 o 为什么强制在某个方向重新布局如此复杂？

我一无所知和绝望

请帮忙！谢谢

我说的是 IOS 6 轮换方法而不是 IOS5；

# ios - 编辑器视图控制器关闭后 UITableView 不更新

> ID：15314322
> 
> 赞同：0
> 
> 时间：2013-03-09T18:26:47.137
> 
> 标签：ios, objective-c, uitableview, uiviewcontroller

我对iOS开发有点陌生。我在两个单独的视图控制器（主视图控制器和编辑器视图控制器）中声明和实现了这些方法，并且需要将数据从编辑器传递到主视图。master 包含一个表视图，需要使用适当的名称进行更新。**（注意：我使用 iPhone 的默认主从应用程序模板。我没有使用单视图应用程序手动创建它）**

目前，MasterViewController 中的 UITableView 不会使用新单元格进行更新。这对我来说是忙碌的一周，我一定是错过了一些东西。这是主视图控制器的代码：

```
@implementation FTMasterViewController
@synthesize bPlusMinusField, cPlusMinusField, cTerm, bTerm;

-(void) passTrinomial:(CCTrinomial *)tri withBPlusMinusField:(NSString *)bField withBTerm:(double)bTermField withCPlusMinusField:(NSString *)cField withCTerm:(double)cTermField {

    //allocate the array
    if (!self.trinomials) {
    self.trinomials = [[NSMutableArray alloc] init];
    }
    //set Master VC properties to tri fields passed in
    self.bPlusMinusField = bField;
    self.cPlusMinusField = cField;
    self.bTerm = bTermField;
    self.cTerm = cTermField;
    NSString *trinomial = [NSString stringWithFormat:@"x² %@ %g %@ %g", bPlusMinusField, bTerm, cPlusMinusField, cTerm];

    [self.trinomials insertObject:trinomial atIndex:0];

    NSLog(@"%lu", (unsigned long)[self.trinomials count]);

}

#pragma mark - Table View

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [self.trinomials count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell" forIndexPath:indexPath];

    cell.textLabel.text = [NSString stringWithFormat:@"x² %@ %g %@ %g", bPlusMinusField, bTerm, cPlusMinusField, cTerm];
    return cell;
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"showDetail"]) {
        NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
        NSDate *object = _objects[indexPath.row];
        [[segue destinationViewController] setDetailItem:object];
    }
}

@end 
```

这是我认为解决问题所必需的代码：显然，我在实现的其余部分中有默认的重写方法。

这是编辑器视图控制器代码。当这个想法出现时，是的，“完成”按钮链接到我的 Main Storyboard 中的 -handleDoneButtonPushed: 方法。

```
-(IBAction)handleDoneButtonPushed:(id)sender {
    [self dismissViewControllerAnimated:YES completion:NULL];
    FTMasterViewController *masterVC = [[FTMasterViewController alloc] init];
    [masterVC passTrinomial:factoring withBPlusMinusField:bPlusMinusField.text withBTerm:[bTriField.text doubleValue] withCPlusMinusField:cPlusMinusField.text withCTerm:[cTriField.text doubleValue]];

} 
```

这个编辑器视图控制器只是以 UITextField 的形式获取一些值，并通过该类的对象将它们传递给主视图控制器。同样，当我单击顶部导航栏上的完成按钮时，它会关闭编辑器视图控制器，但不会使用检索到的值更新表视图。

帮助将不胜感激。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T18:59:08.617

> ```
> -(IBAction)handleDoneButtonPushed:(id)sender 
> {
>     [self dismissViewControllerAnimated:YES completion:NULL];
>     FTMasterViewController *masterVC = [[FTMasterViewController alloc] init];
>     [masterVC passTrinomial:factoring 
>         withBPlusMinusField:bPlusMinusField.text 
>                   withBTerm:[bTriField.text doubleValue]  
>         withCPlusMinusField:cPlusMinusField.text 
>                   withCTerm:[cTriField.text doubleValue]];
> 
> } 
> ```

这是错误的，你已经有一个 MasterViewController 的实例，你不应该实例化一个新的，传递数据并期望前一个更新详细值。

您应该使用委托模式。

在`FTEditorController`. 关于在 Objective-C 中实现[委托的详细帖子](https://stackoverflow.com/a/626946/767730)

```
@protocol FTEditorControllerDelegate <NSObject>

@optional
- (void)editorController:(FTEditorViewController *)editorController didCompleteEditingTrinomial:(NSString *)trinomial;

@end 
```

当您将 MasterController 设置为 EditorController 的委托时，一旦在 EditorController 中发生感兴趣的事件，它就会将该事件提供给它的委托。

因此，一旦您完成创建三项式表达式，请将其传递给 MasterController。

```
 -(IBAction)handleDoneButtonPushed:(id)sender 
    {
        [self dismissViewControllerAnimated:YES completion:NULL];
        NSString *trinomial = [NSString stringWithFormat:@"x² %@ %g %@ %g", bPlusMinusField.text, [bTriField.text doubleValue], cPlusMinusField.text, [cTriField.text doubleValue]];
        if([self.delegate respondsToSelector:@selector(editorController:didCompleteEditingTrinomial:)])
       {
            [self.delegate editorController:self didCompleteEditingTrinomial:trinomial];
       }

   }

//FTEditorControllerDelegate implementation in MasterViewController
- (void)editorController:(FTEditorViewController *)editorController didCompleteEditingTrinomial:(NSString *)trinomial{

    //allocate the array
    if (!self.trinomials) {
    self.trinomials = [[NSMutableArray alloc] init];
    }

    //This condition is tricky, I assume you always want to display the edited
    //trinomial expression as the first one in tableView
    [self.trinomials insertObject:trinomial atIndex:0];

    //Reloads the tableView to reflect the changes 
    [self.tableView reloadData];

} 
```

# c - 如何在 AVR 编程中激活 16 位定时器

> ID：15314326
> 
> 赞同：1
> 
> 时间：2013-03-09T18:26:56.030
> 
> 标签：c, timer, avr, avr-gcc, atmega

我有一个 atmega168a 芯片。我使用通过使用和中断子例程`Counter 0`来切换。我想激活条件为真时。所以，我使用，但是这条线立即调用中断，我希望 16 位定时器只有在计数器值时才被中断。如何在运行时激活 16 位定时器而不引起即时中断？`PORTC``ISR(TIMER0_COMPA_vect)``ISR(TIMERB_COMPA_vect)``16-bit timer``if``TIMSK1 = (1<<OCIE1A)``ISR(TIMER1_COMPA_vect)``reaches``OCR1A`

这是我的代码：

```
#define F_CPU 8000000
#include <avr/io.h>
#include <avr/interrupt.h>
#include <stdint.h>

volatile uint8_t counter;

int main (void){
    DDRC = 0xFF;  //sets PORTC as output
    PORTC = 0xFF; //initial output value
    /*COUNTER0 settings*/
    TIMSK0 = ((1<<OCIE0A) | (1<<OCIE0B));  // Enable Interrupt TimerCounter0 Compare Match A & B
    TCCR0A = (1<<WGM01);  // Mode = CTC
    TCCR0B = (1<<CS01) | (1<<CS00);   // Clock/64, 1/(8000000/64)= 0.000008 seconds per tick
    OCR0A = 200;      //   0.000008 *230 = 1.6 ms
    OCR0B = 100;      //     0.8 ms

    /*16bit timer - counter1 settings*/
    TIMSK1 &= ~(1<<OCIE1A); // Disable Interrupt Counter 1, output compare A (TIMER1_CMPA_vect)
    TCCR1B = ((1<<CS12) | (1<<CS10) | (1<<WGM12));    // Clock/1024, 1/(8000000/1024) = 0.000128 seconds per tick, Mode=CTC
    OCR1A = 40;                       // 0.000128*40 ~= 5.12 milliseconds

    sei(); //interrupts are globally switched on
    counter =0;
    while(1){
        if(counter >= 4){
            TCNT1 = 0; // clear the counter 1
            TIMSK1 = (1<<OCIE1A);// Enables the interrupt for Counter 1,(TIMER1_CMPA_vect)
            TIMSK0 &= ~((1<<OCIE0A) | (1<<OCIE0B)); //disables the Counter 0's interrupts
            counter = 0;
        }
    }
    return 0;
}

ISR(TIMER0_COMPA_vect){ //1.6ms
    PORTC = 0xFF;
    counter++;
}

ISR(TIMER0_COMPB_vect){  //0.8 ms
    PORTC = ~PORTC;
}

ISR(TIMER1_COMPA_vect){ // 5.2 milisecond interrupt
    PORTC = 0x00;
    TCNT0 = 0; //clear the counter of counter0
//  TIMSK0 = ((1<<OCIE0A) | (1<<OCIE0B)); //Enable the Counter 0 interrupts
//  TIMSK1 &= ~(1<<OCIE1A);// Disable Interrupt Counter 1, output compare A (TIMER1_CMPA_vect)
} 
```

这是一个示波器输出，它显示了为什么我不希望立即设置中断，因为它立即将信号设置为 0。 ![在此处输入图像描述](../Images/b75b722e4ef9fe9593c9c224769a64fc.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T18:54:54.280

我认为问题可能是在 CTC 模式下，`OCF1A`设置标志时会产生中断（在 中`TIFR`）。由于您的计时器始终在运行，只是不产生中断，因此它设置了`OCF1A`标志，该标志永远不会被清除。在数据表的第 142 页上，它说：

> 当执行输出比较匹配 B 中断向量时，OCF1B 会自动清零。或者，可以通过将逻辑 1 写入其位位置来清除 OCF1B。

这意味着当您设置计时器 1 时，您还需要清除`OCF1A`：

```
TIFR1 &= ~(1<<OCF1A) 
```

不过，我认为你可以做得更好。您可以在不需要时停止计时器，并在需要时启动它，而不是`TIMSK`一直在运行并让计时器 1 运行。如果您设置`TCCR1B`为零，则清除`CS12`、`CS11`和`CS10`，根据数据表，这意味着“定时器停止”。然后，当您的计数器达到 4 时，您可以像上面那样打开 timer1：

```
TCCR1B = ((1<<CS12) | (1<<CS10) | (1<<WGM12)); 
```

如果你这样做，你不需要打开和关闭定时器 1 的中断：只要让它们打开，只在需要时打开计数。

另外我想知道是否真的有必要触发两个中断来切换引脚`PORTC`？您是否没有为此使用 PWM，因为它不能为您提供足够精确的脉冲长度？

# java - 启动器活动未首先启动

> ID：15314329
> 
> 赞同：0
> 
> 时间：2013-03-09T18:27:12.887
> 
> 标签：java, android

标题解释得很清楚，这里是清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="eu.craym.vulcrum.firstgametnb"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".Splash"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".StartingPoint"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="eu.craym.vulcrum.STARTINGPOINT" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

然而，每当我运行这个应用程序时，都会首先调用 StartingPoint 类：

```
[2013-03-09 18:36:40 - FirstGameTNB] Starting activity eu.craym.vulcrum.firstgametnb.StartingPoint on device emulator-5554 
```

为什么会这样？我认为 MAIN 和 LAUNCHER 应该做到这一点，以便首先调用 Splash 类，但这从未发生过。请注意，当我删除 StartingPoint 活动时，它会转到 Splash。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T18:32:58.383

你是对的。您可以尝试清理您的项目。

> android.intent.action.MAIN：作为主入口启动，不期望接收数据。

[资源](https://developer.android.com/reference/android/content/Intent.html#ACTION_MAIN)

# c# - 让图片框跟随另一个（敌人 AI）

> ID：15314332
> 
> 赞同：0
> 
> 时间：2013-03-09T18:27:22.593
> 
> 标签：c#, .net, winforms

所以，我想放一个pictureBox（僵尸）跟随另一个（玩家）。如何检测玩家的轴线与僵尸的轴线对比？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T18:31:13.007

您可以使用两个对象的`Left`和`Top`属性并以这种方式比较距离。

```
 var zombieLeft = pictureBoxZombie.Left;
  var playerLeft = pictureBoxPlayer.Left; 
```

[http://msdn.microsoft.com/en-us/library/system.windows.forms.picturebox_properties.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.picturebox_properties.aspx)

# php - 将文本区域保存在数据库中

> ID：15314333
> 
> 赞同：0
> 
> 时间：2013-03-09T18:27:25.670
> 
> 标签：php

我一直在寻找这个，但我找不到最重要的部分 - 使用什么字段。

我想保存一个 textarea 而不允许任何类型的 javascript、html 或 php。

在将发布的文本区域保存到数据库之前，我应该通过哪些功能运行它？我应该在数据库中使用什么字段类型？这将是一个描述，最多 1000 个字符。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T18:34:21.140

有很多方法可以删除/处理代码，以便将其保存在您的数据库中。

**常用表达**

一种方法（但可能很难且不可靠）是使用[正则表达式](http://en.wikipedia.org/wiki/Regular_expression)删除/检测代码。

例如，以下使用 php 代码删除所有脚本标签（取自[此处](https://stackoverflow.com/questions/1886740/php-remove-javascript)）：

```
$mystring = preg_replace('/<script\b[^>]*>(.*?)<\/script>/is', "", $mystring) 
```

**stip_tags PHP 函数**

您还可以利用内置的[stip_tags](http://php.net/manual/en/function.strip-tags.php)函数从字符串中去除 HTML 和 PHP 标记。本手册提供了几个示例，为方便起见，如下所示：

```
<?php
$text = '<p>Test paragraph.</p><!-- Comment --> <a href="#fragment">Other text</a>';
echo strip_tags($text);
echo "\n";

// Allow <p> and <a>
echo strip_tags($text, '<p><a>');
?> 
```

**HTML 净化器**

您可以查看[HTML Purifier](http://htmlpurifier.org/)，这是一个常见的 HTML 过滤器 PHP 库，旨在检测和删除危险代码。

[在他们的入门](http://htmlpurifier.org/docs)部分找到的简单代码：

```
require_once '/path/to/HTMLPurifier.auto.php';

$config = HTMLPurifier_Config::createDefault();
$purifier = new HTMLPurifier($config);
$clean_html = $purifier->purify($dirty_html); 
```

**实践中（安全输出）**

如果您试图避免 XSS 攻击或注入攻击，那么清理用户数据是错误的方法。删除标签并不是 100% 保证您的服务免受这些攻击的保证。因此，在实践中，包含代码的用户数据通常不会被过滤/清理，而是在输出期间进行*转义。*更具体地说，字符串中的特殊字符被转义，这些字符基于语言的语法。这方面的一个例子是使用 PHP 的[htmlspecialchars](http://www.php.net/manual/en/function.htmlspecialchars.php)函数来将特殊字符转换为它们各自的 HTML 实体。取自手册的代码片段如下所示：

```
<?php
$new = htmlspecialchars("<a href='test'>Test</a>", ENT_QUOTES);
echo $new; // &lt;a href=&#039;test&#039;&gt;Test&lt;/a&gt;
?> 
```

有关转义的更多信息以及与您的问题相关的非常好的解释，请查看此[页面](https://www.lazycat.org/php-output-escaping.html)。它向您展示了其他形式的输出转义。另外，关于转义的问答，请点击[这里](https://stackoverflow.com/questions/129677/whats-the-best-method-for-sanitizing-user-input-with-php)。

此外，我想向您提出的另一个简短但重要的观点是，**从**用户那里收到的**任何数据****都不**能被信任。

**SQL 注入攻击**

定义（从[这里](https://www.owasp.org/index.php/SQL_Injection)）

> SQL 注入攻击包括通过从客户端到应用程序的输入数据插入或“注入”SQL 查询。成功的 SQL 注入漏洞可以从数据库中读取敏感数据、修改数据库数据（插入/更新/删除）、对数据库执行管理操作（例如关闭 DBMS）、恢复 DBMS 文件中存在的给定文件的内容系统并在某些情况下向操作系统发出命令。

**对于 SQL 注入攻击**：在将信息存储到数据库时使用准备好的语句和参数化查询。（问题和答案在[这里](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)找到）可以在[这里](http://www.phpeveryday.com/articles/PDO-Prepared-Statement-P550.html)找到使用 PDO 准备语句的教程。

**跨站脚本 (XSS)**

**定义**（从[这里](https://www.owasp.org/index.php/XSS)）：

> 跨站点脚本攻击是一种注入问题，其中恶意脚本被注入到其他良性和受信任的网站中。当攻击者使用 Web 应用程序将恶意代码（通常以浏览器端脚本的形式）发送给不同的最终用户时，就会发生跨站点脚本 (XSS) 攻击。

我个人喜欢这张图片以便更好地理解。

![在此处输入图像描述](../Images/49b7bc33da80b3494e2e50be829bae7c.png)

**对于 XSS 攻击**：您应该参考这个著名的[页面](https://www.owasp.org/index.php/XSS_%28Cross_Site_Scripting%29_Prevention_Cheat_Sheet)，它逐条描述了需要做什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T19:37:12.743

**TLDR：**

通常用于`htmlspecialchars()`在输出上对文本进行编码，而不是在输入上过滤文本。`text`为此目的，一个字段很好。

## 你需要防御什么

您正试图保护自己免受[XSS](https://www.owasp.org/index.php/XSS)的侵害。当用户可以在您的站点上存储 HTML 控制字符时，就会发生 XSS。其他用户将看到此 HTML 标记，因此恶意用户可以使用您的页面将人们重定向到其他站点或窃取 cookie 等。

您需要为所有输入考虑这一点：这应该包括可以存储在数据库中的任何`varchar`或字段；`text`不只是你`textarea`的s。我可以将恶意内容添加到`input`字段中，就像将恶意内容添加到`textarea`.

## 我们如何防御这种情况？

假设用户声称他们的用户名是：

```
<script src="http://example.com/malicious.js"></script> 
```

处理此问题的最简单方法是“按原样”将其保存到数据库中。但是，无论何时您`echo`在网站上，都应该通过 PHP`htmlspecialchars()`函数对其进行过滤：

```
echo 'Hi, my name is ' . htmlspecialchars($user->username) . '!'; 
```

`htmlspecialchars`将 HTML 控制字符（`<`、`>`、`&`、`'`和`"`）转换为它们的 HTML 实体（`&lt;`、`&gt;`、`&amp;`、`&apos;`和`&quot;`）。这看起来像浏览器中的原始字符（即：对于普通用户），但它不像实际的 HTML 标记。

结果是，用户的名字看起来像**<script src="http://example.com/malicious.js"></script>** ，而不是恶意的 JavaScript 。

## 为什么要过滤输出？为什么不输入？

1 - [OWASP 推荐这种方式](https://www.owasp.org/index.php/XSS_%28Cross_Site_Scripting%29_Prevention_Cheat_Sheet#Output_Encoding_Rules_Summary)

2 - 如果您忘记保护输入字段，并且有人发现并添加了恶意内容，您现在需要在数据库中查找恶意内容*并*修复您网站上的故障代码。

3 - 如果您忘记对输出字段进行编码，并且有人设法潜入恶意输入，那么您只需要修复您网站上的错误代码。

4 - 用户可以编写会破坏用于编辑用户名的 HTML 字段的用户名。如果您在将内容存储到数据库*之前*对其进行编码，那么您需要在适当的输入字段中“按原样”显示它（假设管理员或用户可以稍后更改他们的用户名）。但是，让我们假设用户找到了一种将恶意代码注入数据库的方法。如果他们说他们的用户名是：`" style="display:none;" />`. 允许管理员更改此用户名的输入字段现在如下所示：

```
<input type="text" name="username" value="" style="display:none;" />" />
                malicious content ->      ^^^^^^^^^^^^^^^^^^^^^^^^^^ 
```

现在，管理员无法解决问题：输入字段消失了。但是，如果您在输出中对文本进行编码，那么您的所有输入字段都将具有针对恶意内容的保护。现在，您的输入将如下所示：

```
<input type="text" name="username" value="&quot; style=&quot;display:none;&quot; /&gt;" />
                     safe content ->      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ 
```

# ruby-on-rails - 如何删除 ri 和 RDoc 文档

> ID：15314335
> 
> 赞同：0
> 
> 时间：2013-03-09T18:27:33.373
> 
> 标签：ruby-on-rails, rdoc

如何删除已安装的 ri 和 RDoc 文档

```
Installing ri documentation for metric_fu-4.1.0...
Installing RDoc documentation for progressbar-0.20.0... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T18:32:27.257

如果您可以手动删除它，它就在某处`..../lib/ruby/gems/1.9.1/doc/`- 实际路径取决于您使用的操作系统以及您如何安装 ruby​​。

# javascript - 如何停止一个方法执行，直到另一种方法在 javascript 中使用 Linkedin API 人员搜索完成？

> ID：15314336
> 
> 赞同：0
> 
> 时间：2013-03-09T18:27:34.950
> 
> 标签：javascript, linkedin, linkedin-jsapi

我`IN.API.PeopleSearch()`从一个for循环调用，这个for循环在ajax成功方法中，但是在完成for循环执行之前，ajax方法完成被调用。

我想停下来，直到 for 循环完成。

```
$.ajax({
        type: 'GET',
        dataType: 'json',
        url: "get_data.htm",
        async : false,
        success: function(data, textStatus ){
            for(i in data){
                searchClick(data[i].firstName,data[i].lastName);
                }
                alert(resultArray);//here i want to send the response to server side
            }
        },
        error: function(xhr, textStatus, errorThrown){
           alert('request failed');
        }
      }); 
```

这是我的 searchClick 功能：

```
function searchClick(firstName, secondName) {
  if (!IN.ENV.auth.oauth_token) {
    alert("You must login w/ LinkedIn to use the Search functionality!");
    return;
  }

  IN.API.PeopleSearch()
      .fields("id", "firstName", "lastName","emailAddress","headline","industry","pictureUrl","positions",
            "summary","numConnections")
    .params({
      "first-name": firstName,
      "last-name": secondName
    })
    .result(function(result, metadata) {

    for (i in result.people.values) {
          try{
              resultArray[i] = result.people.values[i];
          }catch(err){
              alert(err);
              }
    }

    });
} 
```

`alert(resultArray)`在 for 循环完成之前被调用，如何处理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T22:05:44.207

我不知道我是否得到你的问题，但也许这样的东西对你有用：（未经测试）

```
var Queue = function(callback) {
  this.count = 0;
  this.done = 0;
  this.callback = callback;
};

Queue.prototype.oneDone = function() {
  if (++this.done == this.count) {
    this.callback();
  }
}

Queue.prototype.process = function(data, callback) {
  this.count = data.length;

  for (i in data ) {
    callback(data[i], this);
  }
};

$.ajax({
  type: 'GET',
  dataType: 'json',
  url: "get_data.htm",
  async : false,
  success: function(data, textStatus) {
    var myQueue = new Queue(function() {
      alert(resultArray); //here i want to send the response to server side
    });
    myQueue.process(data, function(item, queue) {
      searchClick(item.firstName, item.lastName, queue);
    });
  },
  error: function(xhr, textStatus, errorThrown){
    alert('request failed');
  }
}); 
```

* * *

```
function searchClick(firstName, secondName, queue) {
  if (!IN.ENV.auth.oauth_token) {
    alert("You must login w/ LinkedIn to use the Search functionality!");
    return;
  }

  IN.API.PeopleSearch()
    .fields("id", "firstName", "lastName","emailAddress","headline","industry","pictureUrl","positions",
            "summary","numConnections")
    .params({
      "first-name": firstName,
      "last-name": secondName
    })
    .result(function(result, metadata) {
      for (i in result.people.values) {
        try {
          resultArray[i] = result.people.values[i];
        } catch(err) {
          alert(err);
        }
      }
      if (queue) {
        queue.oneDone();
      }
    });
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T05:11:02.007

我不知道你到底在做什么，但可以说我们有一种方法，异步

```
 Function.prototype.async = function () {
        setTimeout.bind(null, this, 0).apply(null, arguments);
        }; 
```

这使我可以编写如下代码：

```
 alert.async("This will be displayed later.");
   alert("This will be displayed first."); 
```

因此，一旦其他事件完成，将调用带有 .async 的代码。

* * *

否则，在您的情况下，请使用

```
 if(xmlhttp.readyState == 4 && xmlhttp.status == 200) 
```

检查文档是否准备好然后发送 /fill /success。这是原始 AJAX 方法。:)

O希望这可能会有所帮助:)

# css - css灯箱滑块关闭

> ID：15314338
> 
> 赞同：0
> 
> 时间：2013-03-09T18:28:00.187
> 
> 标签：css, lightbox

嗨，我只是在研究 CSS。我为 wordpress 帖子制作了一个 CSS 灯箱。它仍然需要一些样式，但可以按预期工作。我仍然想弄清楚的唯一一件事是如何添加关闭按钮。

在这里你可以看到它：http: [//kaohsiung.at/](http://kaohsiung.at/?p=119) ?p=119你必须点击第一张图片才能打开灯箱。`:focus`（它在图像上使用带有 tabindex的伪类）

这是html：

```
<div id="gallerypic1" tabindex="10"  >

<?php $imageid = get_post_meta(get_the_ID(), 'bild1', true); 
    $image_src = wp_get_attachment_image_src( $imageid, 'gallery'); 
    echo '<img src="' . $image_src[0]  . '" class="gallerypic"/>';
            ?>

<div id="galleryslider" tabindex="100" >

<div id="slidermenucontainer" >

<div class="slidertext" id="slidertext1">
<?php $image = get_field('bild1' ); 
    echo $image['title' ];
    ?>
</div>

<div class="slidertext" id="slidertext2">
<?php $image = get_field('bild2' ); 
    echo $image['title' ];
    ?>
</div>

<div class="slidertext" id="slidertext3">
<?php $image = get_field('bild3' ); 
    echo $image['title' ];
    ?>
</div>

<div class="slidertext" id="slidertext4">
 <?php $image = get_field('bild4' ); 
    echo $image['title' ];
    ?>      
</div>

<div class="slidermenu" id="slidermenu1" tabindex="110"
<?php $bildda = get_field('bild1');
if (strlen($bildda['url'])<1) echo 'style="border-color:black;height:0;width:0;"' ;
?>
>

<div class="slidermenu" id="slidermenu2" tabindex="120"
<?php $bildda = get_field('bild2');
if (strlen($bildda['url'])<1) echo 'style="border-color:black;height:0;width:0;"' ;
?>  
>

<div class="slidermenu" id="slidermenu3" tabindex="130"
<?php $bildda = get_field('bild3');
if (strlen($bildda['url'])<1) echo 'style="border-color:black;height:0;width:0;"' ;
?>  
>

<div class="slidermenu" id="slidermenu4" tabindex="140"
<?php $bildda = get_field('bild4');
if (strlen($bildda['url'])<1) echo 'style="border-color:black;height:0;width:0;"' ;
?>  
>

<div id="galleryframe" tabindex="150">  

<div id="piccontainer">

<div class="piccontainer">
<?php $imageid = get_post_meta(get_the_ID(), 'bild1', true); 
    $image_src = wp_get_attachment_image_src( $imageid, 'gallery'); 
    echo '<img src="' . $image_src[0]  . '"class="sliderpic"/>';

        ?>
</div>

<div class="piccontainer">
<?php $imageid = get_post_meta(get_the_ID(), 'bild2', true); 
    $image_src = wp_get_attachment_image_src( $imageid, 'gallery'); 
    echo '<img src="' . $image_src[0]  . '"class="sliderpic"/>';

        ?>
</div>

<div class="piccontainer">
<?php $imageid = get_post_meta(get_the_ID(), 'bild3', true); 
    $image_src = wp_get_attachment_image_src( $imageid, 'gallery'); 
    echo '<img src="' . $image_src[0]  . '"class="sliderpic"/>';

        ?>
</div>

<div class="piccontainer">
<?php $imageid = get_post_meta(get_the_ID(), 'bild4', true); 
    $image_src = wp_get_attachment_image_src( $imageid, 'gallery'); 
    echo '<img src="' . $image_src[0]  . '"class="sliderpic"/>';

        ?>
</div>

</div>
</div>
</div>
</div>          
</div>

</div>
</div>
</div>
</div> 
```

这是CSS：

```
#galleryslider {
  position: fixed;
  left: 50%;
  top: 50%;
  width: 0%;
  height: 0%;
  overflow:hidden; 
  background: black;
  display: block;
  cursor: default;
  outline: none;
  z-index: 999999999999999;
  }

#galleryslider {
/* W3C */
transition-property:all;
transition-duration:1s;
transition-timing-function: ease;
/* Firefox 4 */
-moz-transition-property:all;
-moz-transition-duration:1s;
-moz-transition-timing-function: ease;
/* Safari and Chrome */
-webkit-transition-property:all;
-webkit-transition-duration:1s;
-webkit-transition-timing-function: ease;
/* Opera */
-o-transition-property:all;
-o-transition-duration:1s;
-o-transition-timing-function: ease;
}

#gallerypic1:hover{
    cursor: hand;
    cursor: pointer;
}

#gallerypic1:focus #galleryslider{
    height: 100%; 
    width: 100%;
    top: 0;
    left: 0;
}

#galleryslider:hover {
    height: 100%; 
    width: 100%;
    top: 0;
    left: 0;
}

#closeslider:hover {
    display: block;
}

#closeslider:hover  {
    display: block;
}

#slidermenucontainer {
  position: relative;
  width: 900px;
  height: auto;
  margin-left: auto;
  margin-right: auto;
  display: block; 
  top: 60px;
}  

.slidermenu {
  position: relative;
  height: 30px;
  width: 218px;
  display: block; 
  border: solid 2px;
  -webkit-border-top-left-radius: 10px;
  -webkit-border-top-right-radius: 10px;
  -moz-border-radius-topleft: 10px;
  -moz-border-radius-topright: 10px;
  border-top-left-radius: 10px;
  border-top-right-radius: 10px;
  -webkit-border-bottom-right-radius: 10px;
  -webkit-border-bottom-left-radius: 10px;
  -moz-border-radius-bottomright: 10px;
  -moz-border-radius-bottomleft: 10px;
  border-bottom-right-radius: 10px;
  border-bottom-left-radius: 10px;
  cursor: pointer;
  cursor: hand;
  outline: none;

  }

#slidermenu1 {
  left: 0px;
  border-color: white;
  }

#slidermenu2 {
  left: 224px;
  top: -2px;
  border-color: green;
}

 #slidermenu3 {
  left: 224px;
  top: -2px;
  border-color: blue;
}

  #slidermenu4 {
  left: 224px;
  top: -2px;
  border-color: yellow;
}

  #galleryframe {
  position: relative;
  width: 900px;
  top: 40px;
  height: auto;
  overflow: hidden;
  display: block; 
  left: -680px;
  /*border: solid 2px;*/
  border-color: white;
  z-index: 10000000;
  cursor: default;
  outline: none;
  }  

#piccontainer {
  position: relative;
  top: 0;
  left: 0px;
  width: 3600px;
  height:auto;
  display: block;
  } 

.piccontainer {
  float: left;
  width: 900px;
  height: 700px;
  }

.piccontainer img{
  height: auto;
  width: auto;
  max-width: 900px;
  max-height: 700px;
  display: block;
  margin-left: auto;
  margin-right: auto;
  }  

 #piccontainer {
/* W3C */
transition-property:all;
transition-duration:1.5s;
transition-timing-function: ease;
/* Firefox 4 */
-moz-transition-property:all;
-moz-transition-duration:1.5s;
-moz-transition-timing-function: ease;
/* Safari and Chrome */
-webkit-transition-property:all;
-webkit-transition-duration:1.5s;
-webkit-transition-timing-function: ease;
/* Opera */
-o-transition-property:all;
-o-transition-duration:1.5s;
-o-transition-timing-function: ease;

}

 #slidermenu1:focus #piccontainer {
  left: 0px;
  } 

  #slidermenu2:focus #piccontainer {
  left: -900px;
  } 

  #slidermenu3:focus #piccontainer {
  left: -1800px;
  } 

  #slidermenu4:focus #piccontainer {
  left: -2700px;
  } 

  #slidermenu1:focus {
  background-color: red;
  } 

   #slidermenu2:focus {
  background-color: green;
  } 

    #slidermenu3:focus {
  background-color: blue;
  } 

    #slidermenu4:focus {
  background-color: yellow;
  } 

 #slidermenu1:focus #galleryframe {
  border-color: white;
  } 

  #slidermenu2:focus #galleryframe {
  border-color: green;
  } 

  #slidermenu3:focus #galleryframe {
  border-color: blue;
  } 

  #slidermenu4:focus #galleryframe {
  border-color: yellow;
  } 

  #galleryframe:focus {
  border-color: white !important;
  } 

  .slidertext {
  position: absolute;
  top: 10px;
  color: white;
    } 

#slidertext1 {
  left: 50px;
      } 

#slidertext2 {
  left: 270px;
      } 

#slidertext3 {
  left: 500px;
      } 

#slidertext4 {
  left: 725px;
      } 
```

到目前为止，我发现的唯一解决方案是`#galleryslider`向右移动一点（或用 显示标题`z-index`），这样 unhover`#galleryslider`就会“关闭” `#galleryslider`。但这仅适用`#gallerypic1`于通过单击某处而分散注意力的情况。所以行为有点不一致。因此，我正在寻找一种非 JavaScript 方式来插入关闭图库按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T06:59:43.793

我找到了解决方案。我在画廊周围添加了另一个`fixed`包装器，名为`#closeslider`100% 高度和宽度以及`tabindex`. 比我`#galleryslider` `top: 30px;` 悬停的父母`#closeslider`更宽`#galleryslider`和高。Focusing`#closeslider`将父子对象的高度和宽度设置为 0。

从理论上讲，这很容易，但对我来说，要弄清楚它需要大量的思考和测试。这是新代码：

html

```
<div id="gallerypic1" tabindex="10"  >

    <?php $imageid = get_post_meta(get_the_ID(), 'bild1', true); 
        $image_src = wp_get_attachment_image_src( $imageid, 'gallery'); 
        echo '<img src="' . $image_src[0]  . '" class="gallerypic"/>';
                ?>

<div id="closeslider"  tabindex="90">

     Click to close slider      

    <div id="galleryslider" tabindex="100" >

    <div id="slidermenucontainer" >

    <div class="slidertext" id="slidertext1">
    <?php $image = get_field('bild1' ); 
        echo $image['title' ];
        ?>
    </div>

    <div class="slidertext" id="slidertext2">
    <?php $image = get_field('bild2' ); 
        echo $image['title' ];
        ?>
    </div>

    <div class="slidertext" id="slidertext3">
    <?php $image = get_field('bild3' ); 
        echo $image['title' ];
        ?>
    </div>

    <div class="slidertext" id="slidertext4">
     <?php $image = get_field('bild4' ); 
        echo $image['title' ];
        ?>      
    </div>

    <div class="slidermenu" id="slidermenu1" tabindex="110"
    <?php $bildda = get_field('bild1');
    if (strlen($bildda['url'])<1) echo 'style="border-color:black;height:0;width:0;"' ;
    ?>
    >

    <div class="slidermenu" id="slidermenu2" tabindex="120"
    <?php $bildda = get_field('bild2');
    if (strlen($bildda['url'])<1) echo 'style="border-color:black;height:0;width:0;"' ;
    ?>  
    >

    <div class="slidermenu" id="slidermenu3" tabindex="130"
    <?php $bildda = get_field('bild3');
    if (strlen($bildda['url'])<1) echo 'style="border-color:black;height:0;width:0;"' ;
    ?>  
    >

    <div class="slidermenu" id="slidermenu4" tabindex="140"
    <?php $bildda = get_field('bild4');
    if (strlen($bildda['url'])<1) echo 'style="border-color:black;height:0;width:0;"' ;
    ?>  
    >

    <div id="galleryframe" tabindex="150">  

    <div id="piccontainer">

    <div class="piccontainer">
    <?php $imageid = get_post_meta(get_the_ID(), 'bild1', true); 
        $image_src = wp_get_attachment_image_src( $imageid, 'gallery'); 
        echo '<img src="' . $image_src[0]  . '"class="sliderpic"/>';

            ?>
    </div>

    <div class="piccontainer">
    <?php $imageid = get_post_meta(get_the_ID(), 'bild2', true); 
        $image_src = wp_get_attachment_image_src( $imageid, 'gallery'); 
        echo '<img src="' . $image_src[0]  . '"class="sliderpic"/>';

            ?>
    </div>

    <div class="piccontainer">
    <?php $imageid = get_post_meta(get_the_ID(), 'bild3', true); 
        $image_src = wp_get_attachment_image_src( $imageid, 'gallery'); 
        echo '<img src="' . $image_src[0]  . '"class="sliderpic"/>';

            ?>
    </div>

    <div class="piccontainer">
    <?php $imageid = get_post_meta(get_the_ID(), 'bild4', true); 
        $image_src = wp_get_attachment_image_src( $imageid, 'gallery'); 
        echo '<img src="' . $image_src[0]  . '"class="sliderpic"/>';

            ?>
    </div>

    </div>
    </div>
    </div>
    </div>          
    </div>

    </div>
    </div>
    </div>
    </div>

</div> 
```

以及我进行更改的css：

```
/* =css slider
-------------------------------------------------------------- */
#closeslider {
    position: fixed;
    left:50%;
    top: 50%;
    height: 0%;
    width: 0%;
    color: white;
    background-color: black;
    z-index: 2000;
    text-align: center;
    border: solid black;
    border-width: 0px;
    font-size: 0px;
    }

#galleryslider {
  position: fixed;
  left: 50%;
  top: 50%;
  width: 0%;
  height: 0%;
  overflow:hidden; 
  background: black;
  cursor: default;
  outline: none;
  z-index: 9000;
  border: solid white;
  border-width: 0px;
  }

#galleryslider {
transition: height 1s ease, width 1s ease 1s, top 1s ease, left 1s ease 1s, border-width 1ms ease 2s;
    /* Firefox 4 */
    -moz-transition: height 1s ease, width 1s ease 1s, top 1s ease, left 1s ease 1s, border-width 1ms ease 2s;
    /* Safari and Chrome */
    -webkit-transition: height 1s ease, width 1s ease 1s, top 1s ease, left 1s ease 1s, border-width 1ms ease 2s;
    /* Opera */
    -o-transition: height 1s ease, width 1s ease 1s, top 1s ease, left 1s ease 1s, border-width 1ms ease 2s;
}

#closeslider {
/* W3C */
transition: height 1s ease 2s, width 1s ease 3s, top 1s ease 2s, left 1s ease 3s, border-width 1ms ease 4s;
/* Firefox 4 */
-moz-transition: height 1s ease 2s, width 1s ease 3s, top 1s ease 2s, left 1s ease 3s, border-width 1ms ease 4s;
/* Safari and Chrome */
-webkit-transition: height 1s ease 2s, width 1s ease 3s, top 1s ease 2s, left 1s ease 3s, border-width 1ms ease 4s;
/* Opera */
-o-transition: height 1s ease 2s, width 1s ease 3s, top 1s ease 2s, left 1s ease 3s, border-width 1ms ease 4s;
}

#gallerypic1:hover{
    cursor: hand;
    cursor: pointer;
}

#gallerypic1:focus #closeslider{
    height: 100%; 
    width: 100%;
    top: 0px;
    left: 0px;
    border-width: 2px;

    transition: height 1s ease, width 1s ease 1s, top 1s ease, left 1s ease 1s, border-width 1ms ease ;
    /* Firefox 4 */
    -moz-transition: height 1s ease, width 1s ease 1s, top 1s ease, left 1s ease 1s, border-width 1ms ease ;
    /* Safari and Chrome */
    -webkit-transition: height 1s ease, width 1s ease 1s, top 1s ease, left 1s ease 1s, border-width 1ms ease ;
    /* Opera */
    -o-transition: height 1s ease, width 1s ease 1s, top 1s ease, left 1s ease 1s, border-width 1ms ease ;

    }

#gallerypic1:focus #galleryslider{
    height: 100%; 
    width: 100%;
    top: 30px;
    left: 0px;
    border-width: 2px;

    /* W3C */
transition: height 1s ease 2s, width 1s ease 3s, top 1s ease 2s, left 1s ease 3s, border-width 1ms ease 2s;
/* Firefox 4 */
-moz-transition: height 1s ease 2s, width 1s ease 3s, top 1s ease 2s, left 1s ease 3s, border-width 1ms ease 2s;
/* Safari and Chrome */
-webkit-transition: height 1s ease 2s, width 1s ease 3s, top 1s ease 2s, left 1s ease 3s, border-width 1ms ease 2s;
/* Opera */
-o-transition: height 1s ease 2s, width 1s ease 3s, top 1s ease 2s, left 1s ease 3s, border-width 1ms ease 2s;

    } 

#galleryslider:hover {
    height: 100%; 
    width: 100%;
    top: 30px;
    left: 0px;
    border-width: 2px;
}

#closeslider:hover #galleryslider{
    height: 100%; 
    width: 100%;
    top: 30px;
    left: 0px;
    border-width: 2px;

}

#closeslider:hover {
    height: 100%; 
    width: 100%;
    top: 0px;
    left: 0px;
    border-width: 2px;
    font-size: 12px;
}

#closeslider:focus #galleryslider{
    left:50%;
    top: 50%;
    height: 0%;
    width: 0%;
    border-width: 0px;

    transition: height 1s ease, width 1s ease 1s, top 1s ease, left 1s ease 1s, border-width 1ms ease 2s;
    /* Firefox 4 */
    -moz-transition: height 1s ease, width 1s ease 1s, top 1s ease, left 1s ease 1s, border-width 1ms ease 2s;
    /* Safari and Chrome */
    -webkit-transition: height 1s ease, width 1s ease 1s, top 1s ease, left 1s ease 1s, border-width 1ms ease 2s;
    /* Opera */
    -o-transition: height 1s ease, width 1s ease 1s, top 1s ease, left 1s ease 1s, border-width 1ms ease 2s;

}

#closeslider:focus {
    left:50%;
    top: 50%;
    height: 0%;
    width: 0%;
    border-width: 0px;
    font-size: 0px;

    /* W3C */
transition: height 1s ease 2s , width 1s ease 3s, top 1s ease 2s, left 1s ease 3s, border-width 1ms ease 4s;
/* Firefox 4 */
-moz-transition: height 1s ease 2s , width 1s ease 3s, top 1s ease 2s, left 1s ease 3s, border-width 1ms ease 4s;
/* Safari and Chrome */
-webkit-transition: height 1s ease 2s, width 1s ease 3s, top 1s ease 2s, left 1s ease 3s, border-width 1ms ease 4s;
/* Opera */
-o-transition: height 1s ease 2s, width 1s ease 3s, top 1s ease 2s, left 1s ease 3s, border-width 1ms ease 4s;

} 
```

# php - 参考原始数组和双数 PHP

> ID：15314343
> 
> 赞同：0
> 
> 时间：2013-03-09T18:28:30.400
> 
> 标签：php

我对 PHP 的了解越来越深入，我试图将 PHP 中给定数组的原始值加倍。如果要返回不同的数组，则代码如下：

```
$blandArray = array(1, 2, 3, 4);

function doubleNumbers($arr) {

    $doubledArray = array();

    for ($i=0; $i < count($arr); $i++) { 

        $doubledArray[$i] = $arr[$i] * 2;

    }

    return $doubledArray;

}

print_r(doubleNumbers($blandArray)); 
```

这将返回按预期翻倍的数字，但在一个新数组中。我想要的是将原始数组加倍。因此，如果`blandArray`在函数运行后被传递并回显，则值将翻倍。我知道我必须使用`&`来引用传递的参数中的内容，但我没有运气。有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T18:31:58.133

您不仅要通过引用传递，还要*更改变量*！

```
function doubleNumbers(&$arr) {
    for ($i=0; $i < count($arr); $i++) { 
        $arr[$i] *= 2;
    }
}
$blandArray = array(1, 2, 3, 4);
doubleNumbers($blandArray);
print_r($blandArray); 
```

另请注意，它不再返回；这也会复制数组，所以我们只是离线使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T18:34:29.843

如前所述，您通过[引用](http://php.net/manual/en/language.references.php)传递。这也可以通过[array_map](http://php.net/manual/en/function.array-map.php)来实现，例如：

```
$blandArray = array_map(function($val) {
    return $val * 2;
}, $blandArray); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T18:34:49.057

据我所知，您将能够覆盖旧值。. .

```
$blandArray = array(1, 2, 3, 4);

function doubleNumbers($arr) {

for ($i=0; $i < count($arr); $i++) { 
$arr[i] = $arr[i] * 2;

//or

$arr[i] *= 2;

}

}
print_r(doubleNumbers($blandArray)); 
```

如果你总是将数组加倍到你给函数的同一个数组中，我认为你也不必返回任何东西。我从 Actionscript 的知识中给出了这个答案，语法可能不同，因此为什么 iv 在循环中添加了 2 行。

# java - 在 Eclipse 上运行 android 应用程序时出现此错误

> ID：15314345
> 
> 赞同：0
> 
> 时间：2013-03-09T18:28:32.440
> 
> 标签：java, android, eclipse

用法和错误如下：

```
javaw [-options] class [args...]
           (to execute a class)
   or  javaw [-options] -jar jarfile [args...]
           (to execute a jar file)
where options include:
    -d32      use a 32-bit data model if available
    -d64      use a 64-bit data model if available
    -server   to select the "server" VM
    -hotspot      is a synonym for the "server" VM  [deprecated]
                  The default VM is server.
-cp <class search path of directories and zip/jar files>
-classpath <class search path of directories and zip/jar files>
              A ; separated list of directories, JAR archives,
              and ZIP archives to search for class files.
-D<name>=<value>
              set a system property
-verbose[:class|gc|jni]
              enable verbose output
-version      print product version and exit
-version:<value>
              require the specified version to run
-showversion  print product version and continue
-jre-restrict-search | -no-jre-restrict-search
              include/exclude user private JREs in the version search
-? -help      print this help message
-X            print help on non-standard options
-ea[:<packagename>...|:<classname>]
-enableassertions[:<packagename>...|:<classname>]
              enable assertions with specified granularity
-da[:<packagename>...|:<classname>]
-disableassertions[:<packagename>...|:<classname>]
              disable assertions with specified granularity
-esa | -enablesystemassertions
              enable system assertions
-dsa | -disablesystemassertions
              disable system assertions
-agentlib:<libname>[=<options>]
              load native agent library <libname>, e.g. -agentlib:hprof
              see also, -agentlib:jdwp=help and -agentlib:hprof=help
-agentpath:<pathname>[=<options>]
              load native agent library by full pathname
-javaagent:<jarpath>[=<options>]
              load Java programming language agent, see java.lang.instrument
-splash:<imagepath>
              show splash screen with specified image 
```

有关详细信息，请参阅[http://www.oracle.com/technetwork/java/javase/documentation/index.html 。](http://www.oracle.com/technetwork/java/javase/documentation/index.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T18:30:31.843

右键单击项目并作为 Android 应用程序运行。

# android - 为 2D 绘图优化 OpenGL ES 设置

> ID：15314346
> 
> 赞同：2
> 
> 时间：2013-03-09T18:28:39.273
> 
> 标签：android, opengl-es

我正在尝试使用 OpenGL ES 来绘制相当复杂的路径，因为在使用通用 Android 绘图函数时遇到了严重的性能问题。到目前为止，直接使用 OpenGL 似乎要快得多，但我想知道 2D 绘图与 3D 绘图之间的区别。

我正在使用[Google Tutorial on OpenGL 中的示例](http://developer.android.com/training/graphics/opengl/index.html)，并对其进行了一些修改以从我的顶点中删除第三个维度。只是省略 z 坐标`glVertexAttribPointer`并传递 2 作为 size 参数似乎有效。这似乎是一个明显而简单的优化，它也让代码更清晰一些。但我想知道 OpenGL ES 在哪些其他地方只是假设 3D，并做了不必要的工作。

例如，我不需要任何深度测试，但从我读到的内容中，我不清楚是否只是从未明确启用它就足够了，或者我是否需要禁用任何设置？

我不是在寻找微优化，而是在寻找一般设置，以消除我在 3D 中工作的假设，并简化或删除在 2D 中不需要的计算。当我在纯 2D 而不是 3D 中工作时，我还应该做些什么？

# c# - 实体框架通过关系发布到 POCO

> ID：15314353
> 
> 赞同：0
> 
> 时间：2013-03-09T18:29:11.583
> 
> 标签：c#, entity-framework

我在使用 mvc4 的实体框架上有一个 C# 程序。

我想知道是否有可能（我确信它是）让 C# 将帖子自动绑定到具有关系的对象。

例如：我有一个 Item 类，它与 User 类有关系：

```
public class Item
{
    public int ItemId{get;set;}
    public string Name{get;set;}

    public virtual User Owner{get;set;}
} 
```

我有一个带有 post 方法的 ItemController：

```
public class ItemController
{
    ...
    public HttpResponseMessage PostItem(Item item)
    {
         ....
    }
} 
```

发布和动态绑定如何与具有关系的类一起使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T18:36:41.950

是的，这是可能的。但是您永远不应该（嗯，几乎永远不）直接发布到 EF 模型。原因很多，但安全性很高，但可维护性和（例如关注点分离）也非常高。

怎么可能是安全问题？假设您的 User 属性有一个字段“IsAdmin”，即使您在视图中没有对 IsAdmin 的任何引用，恶意用户也可以发布 true Owner.IsAdmin 并且如果您 SaveChanges，您的用户现在是管理员。

是的，这是真的，您的应用程序可能无法以这种方式运行。但是其他细节可能会被黑客入侵，密码可能被更改，或者任何其他可能的恶意方式。

通常，永远不要将数据模型直接传递给视图。使用中间视图模型，并且仅在其间复制授权值，并且在视图模型中仅具有视图所需的字段。

# android - 从 IntentService 停止活动

> ID：15314356
> 
> 赞同：0
> 
> 时间：2013-03-09T18:29:27.883
> 
> 标签：android, android-activity, intentservice

我想在我的应用程序中创建一个简单的登录。从`SignInActivity`用户键入他的凭据的地方开始`IntentService`，它将数据发送到服务器并获取有关凭据是否正确的信息。错误、错误凭据等由`onDestroy()`my 中的方法处理`IntentService`（例如`Toast`显示）。我想从此服务开始另一项活动，并销毁旧的`SignInActivity`。不幸的是，我没有找到任何有用的东西，有人可以帮助我吗？谢谢你的回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T18:35:57.650

您应该`Broadcast`从您的`Service`到您的发送一个`Activity`指示成功登录并从头`Activity`开始新的登录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T19:53:38.220

让我们称您的登录活动 A 和您从该 B 调用的第二个活动。因此，您可以像[这样](https://stackoverflow.com/questions/14412297/closing-one-activity-from-another/14412298#14412298)从 B 关闭A。

# python - 如何在 django 中预先选择复选框？

> ID：15314357
> 
> 赞同：0
> 
> 时间：2013-03-09T18:29:40.367
> 
> 标签：python, django, forms

我的表单有`CheckboxSelectMultiple`接收用户偏好的小部件。
我想向用户显示预先检查的偏好。
我知道有一种方法可以预先检查模板中的小部件。
但我想知道一种单独预检*视图*的方法。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T18:38:01.910

实例化表单时，只需将要检查的值传递给[`initial`（请参阅文档） ：](https://docs.djangoproject.com/en/dev/ref/forms/api/#dynamic-initial-values)

```
MyForm(initial={
    'my_multi': ['a', 'b', 'c']
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T18:39:09.547

```
import django
from django import forms

class MyForm(forms.Form):
     option = forms.BooleanField(required=False, initial=True) 
```

它呈现这样

```
<tr><th><label for="id_option">Option:</label></th><td><input checked="checked" type="checkbox" name="option" id="id_option" /></td></tr> 
```

# php - 表单中的描述框检查.. PHP

> ID：15314359
> 
> 赞同：0
> 
> 时间：2013-03-09T18:29:53.800
> 
> 标签：php, regex, validation

我的正则表达式有问题，没有通过错误。
我的正则表达式应该做什么？
检查文本区域并允许任何仅包含字母、数字、句点、逗号、撇号、破折号和空格的输入（可能包含换行符，因为这是一个多行文本区域）。

这是我的正则表达式：

```
preg_match("/^[ ]*[a-zA-Z]+[\s]*[\d\.,'-]*[ ]*$/") 
```

顺便说一句，它可能允许前导和尾随空白......我希望有人能帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T19:05:48.017

如果数据可以包含空格，则无需指定前导尾随空格。

尝试：

```
$pattern = "/^[-\.,'\s[:alnum:]]*$/"; 
```

# wxperl - 是否可以使用 unicode 或 utf8 在 WxDC 中绘制文本？

> ID：15314361
> 
> 赞同：2
> 
> 时间：2013-03-09T18:30:00.920
> 
> 标签：wxperl

我使用 WxPerl，我想绘制 unicode 或 utf8 文本。

那可能吗？

目前，我有这样的东西： $dc->DrawText( $linestr, $x, $y * $th ); 但它似乎只像文本一样绘制 ascii。

我发现是的

```
$this->{Font} = Wx::Font->new( 10, wxMODERN, wxNORMAL, wxNORMAL );
$this->{Font}-> SetDefaultEncoding(wxFONTENCODING_UTF8); # error for this line see later
$dc->SetFont($this->{Font}); 
```

不幸的是，我收到一个错误 Usage: Wx::Font::SetDefaultEncoding(encoding) at ........

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T08:16:37.467

我发现了。

$this->{字体}-> SetDefaultEncoding(wxFONTENCODING_UTF8); 需要 $this->{Font}-> SetEncoding(wxFONTENCODING_UTF8); 在某些版本中，函数的名称发生了变化。

# ios - AVAudioPlayer：简单的声音不播放

> ID：15314363
> 
> 赞同：0
> 
> 时间：2013-03-09T18:30:19.347
> 
> 标签：ios, avaudioplayer

我试图弄清楚为什么声音没有在我的应用程序中播放，所以我创建了我认为尽可能简单的实现：

```
 NSError *error;
   NSString *soundFilePath = [[NSBundle mainBundle] pathForResource:@"canary-trills" ofType:@"wav"];
  NSLog(@"string=%@", soundFilePath);
  NSURL *url = [[NSURL alloc] initFileURLWithPath:soundFilePath];
  NSLog(@"URL=%@", url);
  AVAudioPlayer *avPlayer = [[AVAudioPlayer alloc]
                            initWithContentsOfURL:url error:&error];
  [avPlayer prepareToPlay];
  BOOL success = [avPlayer play];
  NSLog(@"The sound %@ play", success ? @"did" : @"didn't"); 
```

根据控制台，它看起来像是找到了资源，正确地创建了 URL。即使是播放调用也表明成功。但是，模拟器和设备中都没有声音播放。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T18:58:41.440

AVAudioPlayer 没有被保留并且超出了范围。

添加：@property (strong, nonatomic) AVAudioPlayer *audioPlayer;

上课并使用该成员解决了这个问题。

# javascript - 如何在 Textarea 中创建列表和显示列表

> ID：15314369
> 
> 赞同：0
> 
> 时间：2013-03-09T18:30:43.637
> 
> 标签：javascript, html

我正在开发一个食品订购系统。我想在文本区域中显示我的订单列表。现在我可以在 div 的内容中列出。我还希望我的结果价格在小数点后两位四舍五入，如果您输入 2，它将被格式化为 2.00。

我的完整代码有点长。

这是我使用的 JavaScript 示例：

```
function addNewItem() {
    price = 4.50;
    result += price;
    appendElement("container", "element" + price, "Cappucino Ice Blended " + price + "<a href=\"javascript:removeItem(" + price + ")\">[Remove]</a>");
    document.getElementById('sumOrder').value = result;
} 
```

[小提琴中的完整代码](http://jsfiddle.net/technique13/fvSuy/2/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T06:24:50.043

感谢您的回复，但我使用其他方法。我已经可以在文本区域列出。现在，当我单击删除链接时，我遇到了删除它的问题。在 DIV 中，我可以正确删除，但 textarea 不能删除。我使用此代码在 textarea 中创建列表。
这是我使用的 JavaScript 示例：

```
 var result =0.00;
    function addtxt(input) {
        price = 4.50;
        result += price;
        var obj=document.getElementById(input)
        var txt=document.createTextNode("Cappucino Ice Blended "+ price+"\n")
        obj.appendChild(txt)
    addNewItem();}
    function addNewItem() 
    {
        appendElement("container", "element" + price, "Cappucino Ice Blended " + price + "<a href=\"javascript:removeItem(" + price + ")\">[Remove]</a>");
        document.getElementById('sumOrder').value = result;
    }

    function removeItem(price) 
    {
        result -= price;
        removeElement("container", "element" + price);
        document.getElementById('sumOrder').value = result;
    }
    function removeElement(parentId, elementId) 
    {
        var parentElement = document.getElementById(parentId);
        var childElement = document.getElementById(elementId);
        parentElement.removeChild(childElement);
    }
    function appendElement(containerId, newElementId, newElementContent) 
    {                   
        var newElement=document.createElement("div");
        newElement.setAttribute("id", newElementId);
        newElement.innerHTML=newElementContent;
        var container = document.getElementById(containerId);
        container.appendChild(newElement, container);
    } 
```

[小提琴中的完整代码](http://jsfiddle.net/technique13/8P9Zn/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T19:10:06.733

要在文本区域中创建新行，使其看起来像一个列表，您可以用“\n”分隔您的订单。

示例：http: [//jsfiddle.net/U58gT/](http://jsfiddle.net/U58gT/)

```
<textarea id="orders" rows="10"></textarea>

<br /><br /><br />

<input id="new-order" type="text"><button>add order</button>

$('button').click(function() {
    var new_order = $('#new-order').val();
    $('#orders').append(new_order + "\n");
}); 
```

# css - Bootstrap 狭窄的营销+合理的导航？

> ID：15314370
> 
> 赞同：0
> 
> 时间：2013-03-09T18:30:54.480
> 
> 标签：css, twitter-bootstrap, css-tables

我正在尝试将 Bootstrap 的[狭义营销示例](http://twitter.github.com/bootstrap/examples/marketing-narrow.html)与[合理的导航示例](http://twitter.github.com/bootstrap/examples/justified-nav.html)一起使用。

但是，我在尝试使用 justified nav 模板创建 Dropbox 时遇到了一些问题。从标题中选择“下载”，表格样式是错误的，我相信这是因为`display: table-cell;`但当然如果你删除它会搞砸。

[我想出了这个](http://jsfiddle.net/C3zUq)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T20:39:43.740

只是改变

```
.navbar .nav li {
  display: table-cell;
  width: 1%;
  float: none;
} 
```

和

```
.navbar .nav > li {
   display: table-cell;
   width: 1%;
   float: none;
} 
```

并且子菜单的每个项目都是一行。这样，您将只将这三个规则应用于类的直接`li`子元素`.nav`，而不应用于其他`li`元素。

结果：[JsFiddle](http://jsfiddle.net/mk8Zw/)

# smalltalk - 在 Smalltalk VisualWorks 7.9.1 中转换

> ID：15314373
> 
> 赞同：2
> 
> 时间：2013-03-09T18:31:19.737
> 
> 标签：smalltalk, visualworks

我需要将 a 转换`ByteString`为 a `Float32`（正好是 32 位大端 IEEE 754 浮点数）。这`ByteString`是通过 UDP 客户端接收的开放声音控制流的一部分。我花了很多时间进行研究，所以我希望有 Smalltalk 得心应手的人可以给我一个解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T19:02:26.143

由于您似乎接收的是二进制数据，而不是格式化 ASCII 中的十进制数，因此我不建议将其称为 ByteString，而是 ByteArray，字符串是包含字符而不是位的抽象。

在 VisualWorks 的情况下，有一个类称为`UninterpretedBytes`专门用于存储原始数据（位或更确切地说是字节）以供以后解释。此类具有解释字节所需的所有消息，例如`#floatAt:bigEndian`：

```
| yourBinaryStream buffer |
yourBinaryStream := ... insert some code to create your stream here...
buffer:= UninterpretedBytes from: (yourBinaryStream next: 4).
nextFloat := buffer floatAt: 1 bigEndian: true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T16:09:18.660

在 Pharo Smalltalk 中，您可以：

```
 (Float readFrom: '4.2') asIEEE32BitWord 
```

readFrom：只是从字符串中读取一个浮点数，然后将其转换为 IEEE 754 ...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T15:13:56.967

在 VisualWorks 中，您需要使用超类方法`readFrom`：在类中实现`Number`。首先在字符串上创建一个readstream，例如：

```
Number readFrom: '192843.887' readStream 
```

# ruby - 用于设置转换的数组返回具有十六进制值的集合

> ID：15314374
> 
> 赞同：1
> 
> 时间：2013-03-09T18:31:26.683
> 
> 标签：ruby, arrays, set

我从文件中获取输入并将每一行转换为一个数组，然后将该数组转换为一个集合。但是在转换时，该集合返回如下内容：

```
<Set:0x6268f8> 
```

但是在 IRB 上运行相同的东西会返回正确的值。

```
require 'set'
n,p = gets.chomp.split.map { |e| e.to_i }
arr = gets.chomp.split( ).map{|x| x.to_i}
print arr
puts
old_set = arr.to_set
print old_set
if old_set.length != 1
    print "NO"
    exit
end 
```

输入文件：

```
3 6
0 0 0 0 0 0
1 1 1 1 1 1
2 2 2 2 2 2 
```

在运行这个我得到：

```
C:\Ruby\kumar>ruby so.rb < abc.txt
[0, 0, 0, 0, 0, 0]
#<Set:0x3aad30> 
```

在 IRB 上：

```
irb(main):010:0> arr = gets.chomp.split("")
aabbddefyy
=> ["a", "a", "b", "b", "d", "d", "e", "f", "y", "y"]
irb(main):011:0> se=arr.to_set
=> #<Set: {"a", "b", "d", "e", "f", "y"}>
irb(main):012:0> se
=> #<Set: {"a", "b", "d", "e", "f", "y"}> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T18:36:33.827

该输出`#<Set:0x3aad30>`意味着结果是一个`Set`对象，而`hex`值是该实例对象的内存地址。如果您想查看可以使用的值`old_set.inspect`。[您可以在此处](http://www.ruby-doc.org/stdlib-2.0/libdoc/set/rdoc/Set.html)阅读有关该`Set`课程的更多信息

# php - 单引号和双引号在 INSERT 到数据库后显示为 \' 和 \"

> ID：15314377
> 
> 赞同：2
> 
> 时间：2013-03-09T18:31:39.957
> 
> 标签：php, mysql, mysqli

我在`mysqli`插入时遇到了奇怪的行为。在 windows（localhost 开发 PC）上它工作正常，但在 Linux（共享主机）上，它没有按预期工作。

我将字段`height`定义为`VARCHAR(10)`. 使用`SELECT`语句读取数据时：

`5' 6"`显示为`5\' 6\"`

表结构：

```
CREATE TABLE IF NOT EXISTS `user_details` (
  `uname` varchar(20) NOT NULL,
  `height` varchar(10) NOT NULL,
  `body_type` varchar(20) NOT NULL,
  `hair_color` varchar(20) NOT NULL,
  `eye_color` varchar(20) NOT NULL,
  `description` text NOT NULL,
  PRIMARY KEY (`uname`),
  UNIQUE KEY `uname` (`uname`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

**读取数据的代码**

```
$statement = $mysqli->prepare("SELECT * from user_details WHERE uname = ?");
$statement->bind_param("s", $uname);

$statement->execute();

if ($statement->bind_result($uname, $height, $body, $hair, $eye, $desc) && $statement->fetch())
{
    // work with data.
} 
```

**用于 INSERT 的代码**

保存数据.php

```
$statement = $mysqli->prepare("INSERT INTO user_details VALUES(?, ?, ?, ?, ?, ?)");
$statement->bind_param("ssssss", $_POST['uname'], $_POST['height'], $_POST['body'], $_POST['hair'], $_POST['eye'], $_POST['description']);

if ($statement->execute())
{
    echo "<div>Username successfully added</div>";

} 
```

**保存数据.html**

```
<form method="POST" enctype="multipart/form-data">
    <table>
        <tr><td>Name (Must be unique) : </td><td><input type="text" name="uname"></td></tr>
        <tr><td>Profile Image : </td><td><input type="file" name="pic"></td></tr>
        <tr><td>Height : </td><td><input type="text" name="height"></td></tr>
        <tr><td>Body Type: </td><td><input type="text" name="body"></td></tr>
        <tr><td>Hair Color: </td><td><input type="text" name="hair"></td></tr>
        <tr><td>Eye Color: </td><td><input type="text" name="eye"></td></tr>
        <tr><td>Description: </td><td><textarea name="description" rows="5"></textarea></td></tr>
        <tr><td colspan="2"><input type="submit" value="Save New User"></td></tr>
    </table>
</form> 
```

在 Linux 与 Windows 上显示

**Linux**

![Linux 共享主机](../Images/e2878797489d28f32597e1880126d8fe.png)

**视窗**

![在此处输入图像描述](../Images/899ee15eb86e8b8d03ffab3c0fe5da89.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T18:34:05.623

检查服务器以查看是否设置了magic_quotes。如果（我怀疑它们是），请关闭它们。

# php - HTML 到图片（用于 html2jpg / html2pic / html2img 的 php 解析器）

> ID：15314379
> 
> 赞同：0
> 
> 时间：2013-03-09T18:31:45.950
> 
> 标签：php, html, css, parsing

我需要从 html（和 css）代码制作缩略图。类似于 flash 的 AIR1 HTMLLoader。

是否有一个 php 类或 php 脚本可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T19:02:02.080

如果您可以从 PHP 访问命令行（通过`exec()`或`shell_exec()`），您可以查看[PhantomJS](http://phantomjs.org/)，这是一个带有 JavaScript API 的无头 WebKit 浏览器。我用它来做你所描述的：

1.  我在本地生成一个 HTML 文件
2.  我将该 HTML 文件的路径和图像的输出路径（在我的情况下为 PNG）传递给执行对 PhantomJS 的调用的 bash 脚本（下载包时有很好的示例）
3.  我提供生成的图像

我已经尝试了很多潜在的解决方案，并在这个问题上花了很多时间，而 PhantomJS 是迄今为止我发现的最简单的。等待无头浏览器启动有一点延迟，但据我了解，最新版本允许您让它在您选择的端口上运行。我还没能尝试这个。为此，您还需要 GhostDriver。查看[1.8 发行说明](http://phantomjs.org/release-1.8.html)了解更多信息。

祝你好运！

# c++ - 如何控制 C 数学是否使用 SSE2？

> ID：15314390
> 
> 赞同：23
> 
> 时间：2013-03-09T18:32:37.103
> 
> 标签：c++, visual-c++, floating-point, sse, deterministic

我在 fp:strict 模式下使用 MSVC 进入了 C 库的超越数学函数的汇编。它们似乎都遵循相同的模式，这就是`sin`.

首先有一个来自名为“disp_pentium4.inc”的文件的调度例程。它检查变量`___use_sse2_mathfcns`是否已设置；如果是，则调用`__sin_pentium4`，否则调用`__sin_default`。

`__sin_pentium4`（在“sin_pentium4.asm”中）首先将参数从 x87 fpu 传输到 xmm0 寄存器，使用 SSE2 指令执行计算，然后将结果加载回 fpu。

`__sin_default`（在“sin.asm”中）将变量保存在 x87 堆栈上并简单地调用`fsin`.

因此，在这两种情况下，操作数都被压入 x87 堆栈并返回，使其对调用者透明，但如果`___use_sse2_mathfcns`已定义，则操作实际上是在 SSE2 而不是 x87 中执行的。

这种行为对我来说非常有趣，因为 x87 超越函数因根据实现而具有略微不同的行为而臭名昭著，而给定的 SSE2 代码应该始终给出可重现的结果。

有没有办法在编译或运行时确定将使用 SSE2 代码路径？我不擅长编写程序集，因此如果这涉及编写任何程序集，将不胜感激代码示例。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-09T20:46:44.103

我通过对 math.h 的仔细调查找到了答案。这是由一个名为 的方法控制的`_set_SSE2_enable`。这是[此处](https://docs.microsoft.com/en-us/cpp/c-runtime-library/reference/set-sse2-enable)记录的公共符号：

> 启用或禁用在 CRT 数学例程中使用 Streaming SIMD Extensions 2 (SSE2) 指令。（此功能在 x64 架构上不可用，因为默认启用 SSE2。）

这会导致前面提到的 ___use_sse2_mathfcns 标志设置为提供的值，从而有效地启用或禁用 _pentium4 SSE2 例程的使用。

文档中提到这仅影响某些先验功能，但从反汇编来看，这似乎影响了它们中的每个人。

编辑：进入每个功能表明它们在 SSE2 中都可用，除了以下内容：

*   fmod
*   辛
*   科什
*   谭
*   平方

Sqrt 是最大的罪魁祸首，但在 SSE2 中使用内在函数实现是微不足道的。对于其他人，除了可能使用第三方库之外，没有简单的解决方案，但我可能可以不用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-09T18:52:33.783

为什么不使用您自己的库而不是 C 运行时？这将为跨计算机的一致性提供更强有力的保证（假设 C 运行时是作为 DLL 提供的，并且可能会随着时间发生轻微变化）。

我会推荐[CRlibm](http://lipforge.ens-lyon.fr/www/crlibm/)。如果您已经针对 SSE2，并且只要您不打算更改 FPU 的舍入模式，那么您就处于使用它的理想条件，您将找不到更准确的实现。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-09T18:48:00.090

简短的回答是，除非您还涉及库实现的特定细节，否则您无法在您的代码中确定库将做什么。这些会使代码完全不可移植——即使是同一编译器的两个不同版本也可能会改变库的内部结构。

当然，如果可移植性不是问题，那么使用`extern <type> ___use_sse2_mathfcns;`并检查它是否是真实的显然会起作用。

我希望如果处理器具有 SSE2 并且您使用的是足够现代的库，那么它将尽可能使用 SSE2。但要说肯定是另一回事。

如果这对您的代码至关重要，那么实现您自己的超越函数并使用它们 - 这是保证相同结果的唯一方法。或者，使用一些合适的内联汇编（或超越）代码来计算 selected `sin`、`cos`等值，并将这些值与库提供的`sin()`和`cos()`函数进行比较。

# vba - 使用偏移量对另一张表中的单元格求和

> ID：15314391
> 
> 赞同：0
> 
> 时间：2013-03-09T18:32:43.047
> 
> 标签：vba, excel

我正在尝试使此代码适用于求和单元格：

```
Worksheets("Sheet2").Range("C3").Offset(i, j).Formula = "=Sum("
&Worksheets("Sheet1").Range("A3").Offset(2*i,j).Address & ":" &
Worksheets("Sheet1").Range("A7").Offset(2*i,j).Address & ")" 
```

它不断给我正确的单元格，但来自错误的表格。因此，对于第一次迭代，我在 Sheet2 的单元格 C3 中得到 sum(A3:A7)，但 A3:A7 仍然引用 Sheet2 而不是 Sheet1。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T18:54:24.197

您还需要在公式中指定工作表的名称。如果您这样编写代码，您的代码将起作用：

```
Worksheets("Sheet2").Range("C3").Offset(i, j).Formula = "=Sum(Sheet1!" & _
Worksheets("Sheet1").Range("A3").Offset(2 * i, j).Address & ":" & _
Worksheets("Sheet1").Range("A7").Offset(2 * i, j).Address & ")" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T21:22:16.553

试试这个代码 - 它使用`External:=True`参数`.Address`来检索完整地址。虽然这也包括工作簿名称，但 Excel 会自动删除它，因此您最终会得到 Sheet1!A3。另请注意，我使用范围`A3:A7`作为源`.Address`可以处理多单元格范围，您不需要手动处理它：

```
Sheets("Sheet2").Range("C3").Offset(i, j).Formula = "=SUM(" & _
    Sheets("Sheet1").Range("A3:A7").Offset(2 * i, j).Address(External:=True) & ")" 
```

请注意，`A3`从长远来看，硬编码引用可能会导致错误，因为用户（甚至在某个阶段的开发人员）可能会修改工作表结构。最佳实践是使用命名范围，即为您引用的每个单元格/范围创建一个命名范围，然后在 VBA 中使用`SheetX.Range("rngStartCell")`或类似方法访问它！

# forms - 如何对齐表格中的列和行

> ID：15314398
> 
> 赞同：0
> 
> 时间：2013-03-09T18:33:12.530
> 
> 标签：forms, css

我有一个表格，并且希望一行有 2 或 3 列，这样做我正在做

```
.formcol {
     float: left;
      padding: 2px;
}

.formcol label {
     font-weight: bold;
     display:block;
} 
```

如何得到这样的东西

![X](../Images/29a140eea7f1b1cbca4e46113d260a46.png)

这是[小提琴](http://jsfiddle.net/JdAGW/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T19:13:39.920

请参阅我对您的 html 结构进行了以下更改：

```
 <div class="formcol row">
                <div class="formcol form-left middle">
                    <input type="text" id="col1x" size="12" name="col1x" />
                    <label for="col1x" >col1x</label>
                </div>
                <div class="formcol form-right middle">
                    <input type="text" id="col2x" size="12" name="col2x" />
                    <label for="col2x">col2x</label>
                </div>
 </div> 
```

并增加了一门我的额外课程：

```
.middle > label
            {
                text-align: center;
                font-weight: bold;
                font-size: 15px;
                color: black;
            } 
```

它有效：[小提琴](http://jsfiddle.net/manishmishra256/XgM3f/)

3列：使您的结构如下：

```
<div class="formcol row">
                <div class="formcol form-left middle">
                    <input type="text" id="col1x" size="12" name="col1x" />
                    <label for="col1x" >col1x</label>
                </div>
                <div class="formcol form-left middle">
                    <input type="text" id="col1x" size="12" name="col1x" />
                    <label for="col1x" >col2x</label>
                </div>
                <div class="formcol form-right middle">
                    <input type="text" id="col2x" size="12" name="col2x" />
                    <label for="col2x">col3x</label>
                </div>
</div> 
```

（它使用你所有现有的课程，加上我的一个）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T19:00:37.027

使用 CSS 和 HTML 浮动 2 或 3 个 div 元素块。在每个 div 部分中放置您的表单输入字段。然后只需记住在完成后清除浮动。

同样在您的 CSS 中，将每个输入字段的高度控制为相同（即

```
.my-input {
  height:20px;
} 
```

并将类名 .my-input 关联到页面上的每个输入字段。由于每个字段的高度相等，这应该在视觉上给您一种输入字段行的感觉。

# html - 如何在输入中添加按钮

> ID：15314407
> 
> 赞同：92
> 
> 时间：2013-03-09T18:34:20.437
> 
> 标签：html, css, html-input

我正在努力实现这一目标： ![在此处输入图像描述](../Images/41d26064b18f78bdefd00480812b61d1.png)

我只想在输入元素内显示一个按钮，就像上图一样

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2013-03-09T18:37:09.660

该按钮不在输入内。这里：

```
input[type="text"] {
    width: 200px;
    height: 20px;
    padding-right: 50px;
}

input[type="submit"] {
    margin-left: -50px;
    height: 20px;
    width: 50px;
} 
```

示例：http: [//jsfiddle.net/s5GVh/](http://jsfiddle.net/s5GVh/)

* * *

## 回答 #2

> 赞同：103
> 
> 时间：2017-05-12T11:14:16.350

## 使用 Flexbox，并将边框放在表单上。

现在（2019 年）最好的方法是使用 flexbox。

*   将边框放在包含元素上（在这种情况下，我使用了表单，但您可以使用 div）。
*   使用 flexbox 布局将输入和按钮并排排列。允许输入拉伸以占用所有可用空间。
*   现在通过删除其边框来隐藏输入。

运行下面的代码片段，看看你得到了什么。

```
form {
  /* This bit sets up the horizontal layout */
  display:flex;
  flex-direction:row;

  /* This bit draws the box around it */
  border:1px solid grey;

  /* I've used padding so you can see the edges of the elements. */
  padding:2px;
}

input {
  /* Tell the input to use all the available space */
  flex-grow:2;
  /* And hide the input's outline, so the form looks like the outline */
  border:none;
}

input:focus {
  /* removing the input focus blue box. Put this on the form if you like. */
  outline: none;
}

button {
  /* Just a little styling to make it pretty */
  border:1px solid blue;
  background:blue;
  color:white;
}
```

```
<form>
  <input />
  <button>Go</button>
</form>
```

## 为什么这很好

*   它将伸展到任何宽度。
*   该按钮将始终与需要的一样大。如果屏幕宽，它不会拉伸，如果屏幕窄，它不会收缩。
*   输入文本不会在按钮后面。

## 注意事项和浏览器支持

IE9 对 Flexbox 的支持有限，因此按钮不会位于表单的右侧。微软多年来一直不支持 IE9，所以我个人对此很满意。

我在这里使用了最小的样式。我已经留在填充中以显示事物的边缘。您显然可以制作这种外观，但是您希望它看起来带有圆角、阴影等。

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2015-09-22T08:11:07.853

```
.flexContainer {
    display: flex;
}

.inputField {
    flex: 1;
}
```

```
<div class="flexContainer">
    <input type="password" class="inputField">
    <button type="submit"><img src="arrow.png" alt="Arrow Icon"></button>
</div>
```

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2013-03-09T18:39:20.070

我为您找到了一个很棒的代码：

HTML

```
<form class="form-wrapper cf">
    <input type="text" placeholder="Search here..." required>
    <button type="submit">Search</button>
</form> 
```

CSS

```
/*Clearing Floats*/
.cf:before, .cf:after {
    content:"";
    display:table;
}

.cf:after {
    clear:both;
}

.cf {
    zoom:1;
}    
/* Form wrapper styling */
.form-wrapper {
    width: 450px;
    padding: 15px;
    margin: 150px auto 50px auto;
    background: #444;
    background: rgba(0,0,0,.2);
    border-radius: 10px;
    box-shadow: 0 1px 1px rgba(0,0,0,.4) inset, 0 1px 0 rgba(255,255,255,.2);
}

/* Form text input */

.form-wrapper input {
    width: 330px;
    height: 20px;
    padding: 10px 5px;
    float: left;   
    font: bold 15px 'lucida sans', 'trebuchet MS', 'Tahoma';
    border: 0;
    background: #eee;
    border-radius: 3px 0 0 3px;     
}

.form-wrapper input:focus {
    outline: 0;
    background: #fff;
    box-shadow: 0 0 2px rgba(0,0,0,.8) inset;
}

.form-wrapper input::-webkit-input-placeholder {
   color: #999;
   font-weight: normal;
   font-style: italic;
}

.form-wrapper input:-moz-placeholder {
    color: #999;
    font-weight: normal;
    font-style: italic;
}

.form-wrapper input:-ms-input-placeholder {
    color: #999;
    font-weight: normal;
    font-style: italic;
}   

/* Form submit button */
.form-wrapper button {
    overflow: visible;
    position: relative;
    float: right;
    border: 0;
    padding: 0;
    cursor: pointer;
    height: 40px;
    width: 110px;
    font: bold 15px/40px 'lucida sans', 'trebuchet MS', 'Tahoma';
    color: #fff;
    text-transform: uppercase;
    background: #d83c3c;
    border-radius: 0 3px 3px 0;     
    text-shadow: 0 -1px 0 rgba(0, 0 ,0, .3);
}  

.form-wrapper button:hover {    
    background: #e54040;
}  

.form-wrapper button:active,
.form-wrapper button:focus {  
    background: #c42f2f;
    outline: 0;  
}

.form-wrapper button:before { /* left arrow */
    content: '';
    position: absolute;
    border-width: 8px 8px 8px 0;
    border-style: solid solid solid none;
    border-color: transparent #d83c3c transparent;
    top: 12px;
    left: -6px;
}

.form-wrapper button:hover:before {
    border-right-color: #e54040;
}

.form-wrapper button:focus:before,
.form-wrapper button:active:before {
        border-right-color: #c42f2f;
}     

.form-wrapper button::-moz-focus-inner { /* remove extra button spacing for Mozilla Firefox */
    border: 0;
    padding: 0;
} 
```

演示：[在小提琴上](http://jsfiddle.net/XwPTa/) 来源：[Speckyboy](http://speckyboy.com/2012/02/15/how-to-build-a-stylish-css3-search-box/)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-09-01T15:47:29.923

这是[bootstrap v3](https://getbootstrap.com/docs/3.4/components/#input-groups)中最干净的方法。

```
<div class="form-group">
    <div class="input-group">
        <input type="text" name="search" class="form-control" placeholder="Search">
        <span><button type="submit" class="btn btn-primary"><i class="fa fa-search"></i></button></span>
     </div>
</div> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-30T14:21:05.813

这可以在这里使用 inline-block [JS fiddle 来实现](https://jsfiddle.net/chilimayo/42cba6w3/)

```
<html>
<body class="body">
    <div class="form">
        <form class="email-form">
            <input type="text" class="input">
            <a href="#" class="button">Button</a>
        </form>
    </div>
</body>
</html>

<style>
* {
    box-sizing: border-box;
}

.body {
    font-family: Arial, sans-serif;
    font-size: 14px;
    line-height: 20px;
    color: #333;
}

.form {
    display: block;
    margin: 0 0 15px;
}

.email-form {
    display: block;
    margin-top: 20px;
    margin-left: 20px;
}

.button {
    height: 40px;
    display: inline-block;
    padding: 9px 15px;
    background-color: grey;
    color: white;
    border: 0;
    line-height: inherit;
    text-decoration: none;
    cursor: pointer;
}

.input {
    display: inline-block;
    width: 200px;
    height: 40px;
    margin-bottom: 0px;
    padding: 9px 12px;
    color: #333333;
    vertical-align: middle;
    background-color: #ffffff;
    border: 1px solid #cccccc;
    margin: 0;
    line-height: 1.42857143;
}
</style> 
```

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2017-07-17T11:06:00.710

您可以使用 CSS`background:url(ur_img.png)`在输入框内插入图像，但要创建单击事件，您需要合并箭头图像和输入框。

# html - 您如何使用 zurb 基础设置表单文件字段的样式？

> ID：15314413
> 
> 赞同：9
> 
> 时间：2013-03-09T18:34:43.773
> 
> 标签：html, css, zurb-foundation

我正在尝试使用 Rails 创建一个带有 Zurb Foundation 的按钮来上传图片。我试过这个：

```
<input class="tiny round disabled button" name="picture[picture]" type="file"> 
```

不幸的是，它不起作用，并创建了两个不同的按钮让您选择图片。我需要专门针对文件字段做些什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T10:16:06.540

我发现这个资源对设置 input type="file" 的样式很有帮助：

[http://www.quirksmode.org/dom/inputfile.html](http://www.quirksmode.org/dom/inputfile.html)

众所周知，这很困难，但这基本上涉及将实际输入与应用了您的样式的假输入分层。

```
<div class="file-inputs">
    <input type="file" class="hidden-input">
    <div class="fake-input">
        <input>
        <img src="images/YOURBUTTON.png">
    </div>
</div> 
```

使用以下 CSS：

```
div.file-inputs {
position: relative;
}

div.hidden-input {
position: absolute;
top: 0px;
left: 0px;
z-index: 1;
}

input.file {
position: relative;
    text-align: right;
-moz-opacity:0 ;
filter:alpha(opacity: 0);
opacity: 0;
z-index: 2;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-13T07:49:06.127

使用html css和js的自定义文件上传按钮

**html代码：**

```
 <div class="custom-file-upload">
    <!--<label for="file">File: </label>--> 
    <input type="file" id="file" name="myfiles[]" multiple />
    </div> 
```

**CSS：**

```
.custom-file-upload-hidden {
  display: none;
  visibility: hidden;
  position: absolute;
  left: -9999px;
}

.custom-file-upload {
  display: block;
  width: auto;
  font-size: 16px;
  margin-top: 30px;
}
  .custom-file-upload label {
  display: block;
  margin-bottom: 5px;
}

.file-upload-wrapper {
  position: relative;
  margin-bottom: 5px;
}

.file-upload-input {
  width: 300px;
  color: #fff;
  font-size: 16px;
  padding: 11px 17px;
  border: none;
  background-color: #c0392b;
  -moz-transition: all 0.2s ease-in;
  -o-transition: all 0.2s ease-in;
  -webkit-transition: all 0.2s ease-in;
  transition: all 0.2s ease-in;
  float: left;
  /* IE 9 Fix */
}

.file-upload-input:hover, .file-upload-input:focus {
   background-color: #ab3326;
   outline: none;
 }

.file-upload-button {
  cursor: pointer;
  display: inline-block;
  color: #fff;
  font-size: 16px;
  text-transform: uppercase;
  padding: 11px 20px;
  border: none;
  margin-left: -1px;
  background-color: #962d22;
  float: left;
  /* IE 9 Fix */
  -moz-transition: all 0.2s ease-in;
  -o-transition: all 0.2s ease-in;
  -webkit-transition: all 0.2s ease-in;
   transition: all 0.2s ease-in;
 }

.file-upload-button:hover {
  background-color: #6d2018;
} 
```

**JS 代码：** [http](http://codepen.io/wallaceerick/pen/fEdrz) ://codepen.io/wallaceerick/pen/fEdrz检查这个以获得完整的细节

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-05T20:26:32.023

诀窍是做一些看起来像这样的事情：

[![css文件按钮技巧](../Images/3d5cc4e2d7cc47e436ff859bc60aa8dd.png)](https://i.stack.imgur.com/5aax0.png)

**HTML**

```
<button class="file-upload">Upload
  <input type="file" name="files" />
</button> 
```

**CSS**

```
button.file-upload > input[type='file'] {
    cursor: pointer;
    position: absolute;
    font-size: 0;
    top: 0;
    left: 0;
    opacity: 0;
    height: 100%;
    width: 100%;
} 
```

使用基础 v5.5.2：[http ://codepen.io/soyuka/pen/xGMPKJ](http://codepen.io/soyuka/pen/xGMPKJ)

# objective-c - 何时使用属性与普通的 getter 和 setter

> ID：15314415
> 
> 赞同：1
> 
> 时间：2013-03-09T18:34:54.047
> 
> 标签：objective-c, cocoa-touch, cocoa

我只是想知道语义。什么时候真正成为对象的“属性”？我注意到在许多 Apple 的 API 中，它们明确定义了 getter 和 setter，而不是使用属性（例如`URL`和`setURL`on `NSURLRequest`/ `NSMutableURLRequest`；当然 URL 看起来像是 URL 请求的“属性”，对吧？）我想知道是否有一些微妙的我缺少的东西，或者Apple只是不太喜欢属性。=P

更新：从 iOS 8 开始，Apple 已将大部分（如果不是全部）非属性 getter 和 setter 转换为属性。（可能这样做是为了更容易兼容 Swift。）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-09T18:48:16.510

> 或者，如果 Apple 只是不太喜欢属性。

真正的原因是大多数 Foundation 框架（别忘了你在谈论`NS*`类）已经过时了——它们从 NeXT 时代就已经存在了……当时，Objective-C 语言还没有运动`@property`关键字 - 为了模拟属性，程序员必须手动声明和实现 getter 和 setter 方法，这也适用于 Apple 的代码。

现在，Foundation 框架是如此基础，以至于它并没有发生太大变化。它没有被彻底重写，就我而言，编写它的程序员并没有费心使用新语法重写所有代码。您可以看到最近添加的类实际上具有声明的属性而不是 getter 和 setter，但对于较旧的类而言并非如此。

无论如何，手动声明的属性和使用`@property`and声明的属性`@synthesize`是完全等价的。也就是说，访问它们时有一个非常小的区别，但这不属于声明的东西：如果你写

```
someObject.someProperty 
```

在您的代码中，`someObject`必须有一个完整且具体的类型，因此如果一个名为的属性`someProperty`不存在，您将收到编译器错误。相比之下，

```
[someObject someProperty] 
```

和

```
[someObject setSomeProperty:] 
```

即使未声明，也允许您调用方法。

**编辑：**

> 我问他们之间的语义区别是什么

因此，通过“语义差异”，您的意思是“何时应该使用”而不是“它的运行方式是否不同”。我懂了。嗯...从概念上讲，属性代表状态。属性是可能随时间变化的对象的特定特征。使用Objecive-C中的访问器*方法*访问属性只是一个不相关的事实。

如果您编写了一个作用于对象的方法（当然，除了设置属性之外），您很有可能应该将其声明为方法并将其调用。如果您访问（读取或写入）对象的属性，则更适合属性的任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T18:41:29.710

拥有 getter 和 setter 让您可以使用消息来访问项目

`[myObject someProperty]`或者`[myObject setSomeProperty: someNewValue]`

制作 a`@property`使您能够使用点符号来调用 getter 和 setter。这是因为`@property`选择了使类键值编码符合特定值的方法名称。

`myObject.someProperty` 或者`myObject.someProperty = someNewValue`

虽然可以手动执行此操作，`@property`但当您想要使用点表示法时，它被认为是最佳实践。随着时间的推移，幕后的行为`@property`发生`@synthesize`了很大的变化，特别是在为关联指针自动创建存储方面。使用`@property`它可以更轻松地跟上 Apple 对约定的更改，而您的代码几乎没有更改。

此外，使用`@property`使您的代码更易于阅读。

# python - 在 Python 中，如何将字符串拆分为多个整数？

> ID：15314421
> 
> 赞同：4
> 
> 时间：2013-03-09T18:35:52.580
> 
> 标签：python, arrays, string, csv

我正在读取一个始终由空格分隔的五个数字的字符串，我想将其拆分为五个单独的整数，以便我可以分别处理它们。

到目前为止，我有：

```
reader = csv.reader([data.data], skipinitialspace=True)
for r in reader:
    print r 
```

这允许我打印出这些值，我如何将它们存储为单独的整数？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-09T18:38:02.013

你可以这样做。假设`s`您的线路来自`reader`.

```
>>> s='2 3 4 5 6'
>>> s.split(' ')
['2', '3', '4', '5', '6'] #just split will give strings
>>> [int(i) for i in s.split(' ')] #typecasting to ints
[2, 3, 4, 5, 6] #now you have ints 
```

不过请注意，我假设`reader`. 否则，此代码有可能崩溃。您当然`try: except:`可以绕过它或使用更精细的解析技术。

**更新 0：**来自@Pavel Annosov 的出色的一个班轮 - `map(int, s.split())`。[map](http://docs.python.org/2/library/functions.html#map)是一个漂亮的 python 内置函数，可让您将函数映射到任何可迭代对象。

**更新 1：**看看它是如何工作的相当简单。但为了让@user2152165 更清楚

```
ints_list = []
for r in reader:
    ints_list = map(int, r.strip().split(' ')) 
```

`ints_list`有你的整数列表。用它做你想做的事...

# ruby-on-rails - 尝试销毁控制器时出现 pg 错误

> ID：15314423
> 
> 赞同：0
> 
> 时间：2013-03-09T18:36:04.083
> 
> 标签：ruby-on-rails, ruby, postgresql

我在 Windows 上工作，有 rails 3.2.12（刚刚升级）和 ruby​​ 2.0.0p0。当我尝试删除控制器时，我收到此错误：

```
F:\my apps\meshworks-redo> rails d controller Plans
C:/Users/rrw/.pik/rubies/Ruby-200-p0/lib/ruby/gems/2.0.0/gems/pg-0.14.1-x86-mingw32/lib/pg.rb:10:in `require': cannot load such file -- 2.0/pg_ext (LoadError)
        from C:/Users/rrw/.pik/rubies/Ruby-200-p0/lib/ruby/gems/2.0.0/gems/pg-0.14.1-x86-mingw32/lib/pg.rb:10:in `rescue in <top (required)>'
        from C:/Users/rrw/.pik/rubies/Ruby-200-p0/lib/ruby/gems/2.0.0/gems/pg-0.14.1-x86-mingw32/lib/pg.rb:3:in `<top (required)>'
        from C:/Users/rrw/.pik/rubies/Ruby-200-p0/lib/ruby/gems/2.0.0/gems/bundler-1.3.2/lib/bundler/runtime.rb:72:in `require'
        from C:/Users/rrw/.pik/rubies/Ruby-200-p0/lib/ruby/gems/2.0.0/gems/bundler-1.3.2/lib/bundler/runtime.rb:72:in `block (2 levels) in require'
        from C:/Users/rrw/.pik/rubies/Ruby-200-p0/lib/ruby/gems/2.0.0/gems/bundler-1.3.2/lib/bundler/runtime.rb:70:in `each'
        from C:/Users/rrw/.pik/rubies/Ruby-200-p0/lib/ruby/gems/2.0.0/gems/bundler-1.3.2/lib/bundler/runtime.rb:70:in `block in require'
        from C:/Users/rrw/.pik/rubies/Ruby-200-p0/lib/ruby/gems/2.0.0/gems/bundler-1.3.2/lib/bundler/runtime.rb:59:in `each'
        from C:/Users/rrw/.pik/rubies/Ruby-200-p0/lib/ruby/gems/2.0.0/gems/bundler-1.3.2/lib/bundler/runtime.rb:59:in `require'
        from C:/Users/rrw/.pik/rubies/Ruby-200-p0/lib/ruby/gems/2.0.0/gems/bundler-1.3.2/lib/bundler.rb:132:in `require'
        from F:/my apps/meshworks-redo/config/application.rb:7:in `<top (required)>'
        from C:/Users/rrw/.pik/rubies/Ruby-200-p0/lib/ruby/gems/2.0.0/gems/railties-3.2.12/lib/rails/commands.rb:24:in `require'
        from C:/Users/rrw/.pik/rubies/Ruby-200-p0/lib/ruby/gems/2.0.0/gems/railties-3.2.12/lib/rails/commands.rb:24:in `<top (required)>'
        from script/rails:6:in `require'
        from script/rails:6:in `<main>' 
```

我尝试重新安装 pg gem，没有运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T13:41:45.247

我的一个朋友在带有 Postgres 的 Windows 7 上使用 Ruby 2.0 时遇到了同样的问题。它不仅发生在尝试销毁控制器时，而且发生在每个数据库操作（包括 rake db:create）时。问题是 pg_ext.so 文件不包含在 ruby​​ 2.0 中。它包含在 1.9 中，但简单地将其复制到 2.0 似乎不起作用。但是，我找到了另一种获取正确 pg_ext.so 的方法。不完全确定为什么会这样，但它对他有用。这是您需要做的：

1.  转到 2.0/pg_ext.so（找不到的文件）应该所在的文件夹。在你的情况下 C:/Users/rrw/.pik/rubies/Ruby-200-p0/lib/ruby/gems/2.0.0/gems/pg-0.14.1-x86-mingw32/lib/。
2.  在此处创建一个名为“2.0”（不带引号）的文件夹。
3.  在此文件夹中，您将需要正确的 pg_ext.so 文件。您可以通过以下方式获得它：
4.  手动安装 pg gem（控制台中的“gem install pg”）。这将安装非 x86-mingw32 版本的 gem。它不能解决问题，但它确实创建了正确的 pg_ext.so。我认为这是因为它为您的系统编译了 pg gem，所以对于 ruby​​ 2.0。然后，您可以将此 pg_ext.so 文件与 pg x86-mingw32 版本一起使用。你需要 DevKit 来编译和安装 pg ( [http://rubyinstaller.org/add-ons/devkit/](http://rubyinstaller.org/add-ons/devkit/) )。
5.  转到 pg-0.14.1 gem 文件夹中 pg_ext.so 的位置。在您的情况下，这将是 C:/Users/rrw/.pik/rubies/Ruby-200-p0/lib/ruby/gems/2.0.0/gems/pg-0.14.1/lib。
6.  将文件 pg_ext.so 从此文件夹复制到步骤 2 中新的 pg-0.14.1-x86-mingw32/lib/2.0/ 文件夹。
7.  现在重试您的命令并检查是否一切正常。如果没有，请删除您的 Gemfile.lock 并重新运行捆绑安装。
8.  其他 mingw32 gem 也可能会出现与此 gem 相同的问题。例如，我在使用 bcrypt-rails gem 时遇到了同样的问题。按照与上述相同的步骤解决了该问题。我现在可以在 Windows 7 上成功运行 Ruby 2.0。

附言。如果您在 Windows 7 64 位上运行 pg gem 有任何其他问题，请尝试安装 32 位 x86 版本的 Ruby（RubyInstaller）和 postgresql。此外，确保在路径中包含 Ruby 文件夹（这是使用 RubyInstaller 安装 ruby​​ 2.0 时的一个选项）以及 Postgresql lib 和 bin 文件夹。

祝你好运！

# iphone - numberOfLines=2 的 UILabel 使用什么约束高度？（使用 [NSString sizeWithFont...]）

> ID：15314424
> 
> 赞同：0
> 
> 时间：2013-03-09T18:36:07.897
> 
> 标签：iphone, ios, uiview, nsstring, uilabel

对于行数有限的 UILabel，如何确定要在 [NSString sizeWithFont:constrainedToSize:...] 中使用的 constrainedToSize.height？

下面的约束高度是无限的（MAXFLOAT），但是当限制为 X 行时，标签的最大高度是什么？

```
UILabel * label = [[UILabel alloc] init];
label.numberOfLines = 2;
label.text = @"Some really long text";

// what to use instead of MAXFLOAT?
CGSize constrainSize = CGSizeMake(285, MAXFLOAT);

CGSize size = [label.text
               sizeWithFont: [UIFont boldSystemFontOfSize:17.0]
               constrainedToSize:constrainSize
               lineBreakMode:NSLineBreakByWordWrapping
               ]; 
```

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T18:44:51.663

如果您已经知道您希望标签为 2 行，请使用：

```
CGFloat maxHeight = label.font.lineHeight * 2;
CGSize constrainSize = CGSizeMake(285, maxHeight); 
```

# javascript - 使用 jQuery 版本的hammer.js 在两根手指向上滑动时运行 js 代码

> ID：15314432
> 
> 赞同：0
> 
> 时间：2013-03-09T18:37:08.557
> 
> 标签：javascript, jquery, gesture, hammer.js

我一直在玩hammer.js（[http://eightmedia.github.com/hammer.js/](http://eightmedia.github.com/hammer.js/)）一个多点触控手势库，我知道当一根手指向上滑动时如何执行js代码，或者点击或还有什么，但是有人可以帮我弄清楚在两个手指都向上滑动的情况下如何运行js代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T10:43:45.987

将选项 swipe_max_touches 设置为 2 或 0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T19:02:11.283

你可以看看这个问题（但现在已经关闭）[https://github.com/EightMedia/hammer.js/issues/34](https://github.com/EightMedia/hammer.js/issues/34)

在这方面，他们试图通过不检测它。的触摸。

也许你也可以看看这个插件[https://github.com/EightMedia/hammer.js/blob/master/plugins/hammer.showtouches.js](https://github.com/EightMedia/hammer.js/blob/master/plugins/hammer.showtouches.js)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-10T13:35:26.913

你可以试试fingers.js（[https://github.com/paztis/fingers.js](https://github.com/paztis/fingers.js)）。
这是一个类似于 Hammer.js 的 js 库，用于管理我刚刚开发的触摸事件。
您的案例在示例页面中。

# javascript - AngularJS 中的指令、过滤器和异步调用

> ID：15314434
> 
> 赞同：1
> 
> 时间：2013-03-09T18:37:15.743
> 
> 标签：javascript, asynchronous, filter, angularjs

我想在 AngularJS 中声明我自己的指令，它将文件的字符串源作为属性，它必须加载，然后以某种方式修改并显示。

我有一个AngularJS指令和过滤器定义如下 -

```
app.directive("customTag", function ($compile) {
    return {
        restrict: 'E',
        require: 'src',
        scope: {
            value: "=src"
        },
        template: '<div ng-bind-html-unsafe="value | myFilter"></div>',
        replace: true
    };
});
app.filter('myFilter', function () {
    return function (value) {
        $http({
            url: value,
            method: 'GET'
        }).success(function (data, status, headers, config) {
            value = data; // gets a string value
        }).error(function (data, status, headers, config) {
            value = "Error getting content";
        });
        return ModifyString(value);
    };
}); 
```

相应的 HTML 是 -

```
<customTag src="/test.txt"></customTag> 
```

但是，这给了我一个错误，说`$http`没有在范围内定义。我该如何解决？

此外，我认为我会遇到`$http`调用将是异步调用的问题，因此在读取文件后过滤器不会返回正确的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T19:37:01.527

您需要`$http`在过滤器提供程序中注入提供程序：

```
app.filter('myFilter', function ($http) {... 
```

除此之外，你应该重新考虑你的逻辑。过滤器不应该处理服务器和承诺。这就是服务和指令的用途。

# c++ - c ++防止输入不是整数

> ID：15314435
> 
> 赞同：0
> 
> 时间：2013-03-09T18:37:33.663
> 
> 标签：c++

在我的代码中，我想防止用户输入不是整数单词。我的代码是底部。

```
#include<iostream>
#include<fstream>
#include<string>
#include<boost/regex.hpp>
#include<iomanip>
using namespace boost;
using namespace std;
int main()
{
int number;
string name,Telephone,email;
ofstream myoutfile("directory.txt");
ifstream myinfile;
bool isvalid=false;
char a[256];
char b[256];
regex reg_email("^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$");
regex reg_tel("^\\(?(\\d{3})\\)?-?(\\d{3})-(\\d{4})$");
while(number!=3)
{
    cout<<"(1)Add a new record"<<endl;
    cout<<"(2)Display the entire database"<<endl;
    cout<<"(3)Exit"<<endl;
    cin>>number;
    if(number==1)
    {
        cout<<"enter your name."<<endl;
        cin>>name;
        cout<<"enter your email."<<endl;
        cin.ignore(INT_MAX,'\n');
        cin.getline(b,256);
        while (regex_match(b,reg_email)==0)
        {
            cout<<"data wrong!!!!!!"<<endl;
            cin.getline(b,256);
        }
        cout<<"enter your telephone numbers. EX:012-111-1111"<<endl;
        cin.ignore(INT_MAX,'\n');
        cin.getline(a,256);
        while(regex_match(a,reg_tel)==0)
        {
            cout<<"data wrong!";
            cin.getline(a,256);
        }
        myoutfile<<setiosflags(ios::left)<<setw(30)<<name<<setiosflags(ios::left)
                    <<setw(30)<<b<<setiosflags(ios::left)<<setw(30)<<a<<endl;

    }
    else if(number==2)
    {
        myinfile.open("directory.txt",ios::in);
        string temp;
        cout<<setiosflags(ios::left)<<setw(30)<<"name";
        cout<<setiosflags(ios::left)<<setw(30)<<"email";
        cout<<setiosflags(ios::left)<<setw(30)<<"telephone"<<endl;
        while(!myinfile.eof())
        {
            getline(myinfile, temp);
            cout<<temp<<endl;
        }
        myinfile.close();
    }
    else if(number==3)
    {
        cout<<"BYE!";
    }
    else if(scanf("%d",&number)!=1)
        {
            cout<<"Enter number!!!";
            break;
        }
    }
    return 0;
} 
```

我在代码中有一些问题。
**首先，**
第一次运行while循环会很好，
但是当第二次运行循环时，我输入了一个非整数，它会显示混乱的代码。
有人知道吗？
**第二，**

```
 cout<<"enter your telephone numbers. EX:012-111-1111"<<endl;
        cin.ignore(INT_MAX,'\n');
        cin.getline(a,256);
        while(regex_match(a,reg_tel)==0)
        {
            cout<<"data wrong!";
            cin.getline(a,256);
        } 
```

在上面的代码中，即使我输入了正确格式的电话号码，
它总是显示“数据错误！” 消息，但我再次输入，regex_match 测试就可以了。

以上是我的问题，衷心感谢！

# ruby-on-rails-3.2 - nil:NilClass 的未定义方法“+”

> ID：15314439
> 
> 赞同：0
> 
> 时间：2013-03-09T18:37:48.143
> 
> 标签：ruby-on-rails-3.2

这是我的课：

```
class Combatant < ActiveRecord::Base
  attr_accessible :resource_current

  def change_resource(amount)
    resource_current += amount
    if resource_current < 0
      resource_current = 0
    elsif resource_current > 100
      resource_current = 100
    end
  end
end 
```

在 Combatant 类的对象上执行 change_resource 时，我得到：

```
undefined method `+' for nil:NilClass 
```

当然，resource_current 已经初始化，值为 6。

当我将方法更改为：

```
 def change_resource(amount)
    self.resource_current += amount
    if resource_current > 100
      resource_current = 100
    elsif resource_current < 0
      resource_current = 0
    end
  end 
```

它去：

```
undefined method `<' for nil:NilClass 
```

所以我添加了另一个“自我”：

```
 def change_resource(amount)
    self.resource_current += amount
    if resource_current > 100
      resource_current = 100
    elsif self.resource_current < 0
      resource_current = 0
    end
  end 
```

该方法现在有效。为什么？为什么我不需要另一个“自我”作为第一个条件（如果 resource_current > 100）？为什么我需要“自我”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-12T11:35:20.727

正如我在上面的评论中已经写的：它终于对我有用，没有奇怪的语法和无法解释的错误——我能想出的唯一解释是我在测试过程中搞砸了一些东西。

# bash - 将插值的 sqlite3 查询分配给 Bash 中的变量的正确引用是什么？

> ID：15314441
> 
> 赞同：1
> 
> 时间：2013-03-09T18:37:49.383
> 
> 标签：bash, sqlite, shell, quoting

我正在尝试将以下输出分配给一个变量

```
sqlite3 /home/user/db_fake_book_index "select id, page from fb2 where bookcode='$bookcode' and page=$page 
```

如果我运行引用它就像

```
echo "sqlite3 /home/user/db_fake_book_index \"select id, page from fb2 where bookcode='$bookcode' and page=$page\"" 
```

我明白了

```
sqlite3 /home/user/db_fake_book_index "select id, page from fb2 where bookcode='557S' and page=10" 
```

如果我将它复制到控制台它可以正常工作，但是如果我在脚本中将它包含在 $() 中它不起作用，sqlite 认为变量太多，似乎我的双引号被删除了。

```
$(printf "sqlite3 /home/user/db_fake_book_index \"select id, page from fb2 where bookcode='$bookcode' and page=$page\"") 
```

这给出了同样的失败

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T19:41:37.317

```
result=$( sqlite3 /home/user/db_fake_book_index "select id, page from fb2 where bookcode='$bookcode' and page=$page" ) 
```

或者

```
query="select id, page from fb2 where bookcode='$bookcode' and page=$page"
result=$( sqlite3 /home/user/db_fake_book_index "$query" ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T18:44:59.260

这将保存为变量`v`

```
set "select id, page from fb2 where bookcode='$bookcode' and page=$page"
read v < <(sqlite3 /home/user/db_fake_book_index "$1") 
```

# mysql - JDeveloper MySQL 错误 找不到驱动程序

> ID：15314453
> 
> 赞同：1
> 
> 时间：2013-03-09T18:38:51.920
> 
> 标签：mysql, oracle, oracle-adf, jdeveloper

我正在使用最新的 wamp 服务器运行 MySQL db。使用 Oracle JDeveloper 11g。我已将 MySQL 连接器 jar 放在 .../jdeveloper/jdev/lib 文件夹中，并将 jar 作为库添加到我的 adf 应用程序中。. 我能够创建到数据库的连接，在 JDev 的 DB Navigator 中查看表，还可以创建实体和查看对象。但是，当我尝试运行应用程序模块时，我收到一个错误弹出窗口，提示无法创建连接，找不到驱动程序。我将 ApplicationModule 数据源配置设置为 JDBC 数据源。帮助！！！. 谢谢

**更新：** 错误日志--------------

```
[232] Using the oracle.jbo.server.ConnectionPoolDataSource to acquire a connection...
[233] Creating a new pool resource
[234] Trying connection/3: url='jdbc:mysql:/*****' user='root' password='*****' ...
[235] DBTransactionImpl.initTransaction: Login failed
[236] java.sql.SQLException: No suitable driver found for jdbc:mysql://127.0.0.1:3306/myDatabase
at java.sql.DriverManager.getConnection(DriverManager.java:602)
at java.sql.DriverManager.getConnection(DriverManager.java:185)
at oracle.jbo.server.URLConnectionHelper.getConnection(URLConnectionHelper.java:187)
at oracle.jbo.server.URLConnectionHelper.getConnectionFromDriver(URLConnectionHelper.java:50)
at oracle.jbo.server.ConnectionPool.createConnection(ConnectionPool.java:195) 
at oracle.jbo.server.ConnectionPool.instantiateResource(ConnectionPool.java:166)
at oracle.jbo.pool.ResourcePool.createResource(ResourcePool.java:580)
at oracle.jbo.pool.ResourcePool.useResource(ResourcePool.java:313)
at oracle.jbo.server.ConnectionPool.getConnectionInternal(ConnectionPool.java:102) 
```

* * *

1.  用于连接我的数据库的用户名和密码是正确的，我可以在连接管理器中对其进行测试。
2.  我在运行应用程序模块时收到此错误，因此我认为集成 Weblogic 服务器不是这里的问题。
3.  我确保在库中 mysql-connector jar 被标记为“默认部署”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T00:51:01.020

The jdbc jar file should also be placed where the embedded WebLogic can find it. So locate your defaultDomain directory under the JDeveloper's system directory /users/youruser/roaming/app data/JDeveloper And locate the lib directory there.

Or make sure that the library you created in JDeveloper for the JDBC jar is marked as "Deploy by default".

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-23T11:26:24.017

将 mysql-connector**.jar 放入 ~/.jdeveloper/xxxxxxx/DefaultDomain/lib

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-17T12:17:18.877

**配置 JDeveloper 以使用 MySQL Connector/J**

1-下载 MySQL Connector/J 3.0.11**并将 JDBC 驱动 JAR 文件复制到**已知位置，例如**/jdev/lib**

从工具菜单中，选择默认项目属性。

在树视图中，选择库。

在右窗格中，选择新建。将显示创建库对话框。

将库命名为 MySQL JDBC。

将位置设置为用户库。

单击类路径的编辑。将显示“编辑类路径”对话框。

单击添加条目。将显示选择路径条目对话框。

导航到 MySQL Connect/J JDBC 驱动程序的 JAR 文件（它应该被称为 mysql-connector-java--bin.jar 之类的东西）。

单击 jar 文件，然后单击选择。单击确定。

该库将被定义，它会在 Selected Libraries 列表中。您可能不希望在所有项目中都定义该库，因此将其移至可用库列表中。

**这个链接对我有很大帮助：** [Oracle JDeveloper 11g with MySQL](http://jdev11g.blogspot.com/2009/04/oracle-jdeveloper-11g-with-mysql.html)

# css - 没有滚动条的溢出滚动

> ID：15314454
> 
> 赞同：2
> 
> 时间：2013-03-09T18:38:59.733
> 
> 标签：css

如何创建一个具有最大宽度/高度的 div，而不是让 scollbars 什么都没有但仍然能够滚动？（通常通过鼠标滚轮、选择文本并向下移动鼠标或向下箭头完成）

我试过隐藏，但这不允许我滚动。其他选项要么不允许它具有最大高度，要么放置滚动条。

这是一个[示例演示](http://jsfiddle.net/dU3bB/)。我希望没有滚动条但能够看到 eof。

```
<div id=main>
    Text text text text text text text text...
    Text text text text text text text text...
    eof
</div> 
```

```
#main {
    max-height: 400px;
    /*overflow: auto;*/
    overflow: hidden;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T18:49:18.030

将滚动条推入**隐藏**区域怎么样？

```
html,
body {
    padding: 0;
    margin: 0;
    overflow: hidden;
}
#container {
    position: absolute;
    left: 0;
    top: 0;
    right: -30px;
    bottom: 0;
    padding-right: 15px;
    overflow-y: scroll;
    max-height: 400px;
} 
```

[JSF](http://jsfiddle.net/dU3bB/2/)中。

来自 SO-Hide 滚动条的示例，[但保留以原生感觉滚动的能力](https://stackoverflow.com/questions/6635513/hide-the-scrollbar-but-keep-the-ability-to-scroll-with-native-feel)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T18:47:12.823

对于支持 web kit 引擎的浏览器（如 Chrome），您可以使用它

```
#main ::-webkit-scrollbar 
{
    width: 0px;
} 
```

但对于其他浏览器，你需要别的东西。

# ios - iOS 使用参数获取对 Rails API 的请求

> ID：15314456
> 
> 赞同：0
> 
> 时间：2013-03-09T18:39:01.230
> 
> 标签：ios, ruby-on-rails, api, parameters, afnetworking

在我的 Rails 应用程序中

地点有_很多啤酒

啤酒belong_to location

当 iOS 应用程序调用时，`locations/%@/beers.json`我希望啤酒控制器响应仅属于从我的 iOS 应用程序调用的 location_id 的啤酒。

这是用户点击位置 1 时客户端发送的请求。

```
Started GET "/locations/1/beers.json" for 127.0.0.1 at 2013-03-09 11:26:16 -0700
Processing by BeersController#index as JSON
  Parameters: {"location_id"=>"1"}
  Beer Load (0.1ms)  SELECT "beers".* FROM "beers" 
Completed 200 OK in 12ms (Views: 1.8ms | ActiveRecord: 0.4ms) 
```

这是我的啤酒控制器代码

```
class BeersController < ApplicationController

  def index
    @beers = Beer.all
    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @beers }
    end
  end 
```

现在，这会将所有啤酒的列表返回给客户端，而不管它们的 location_id 是什么。

到目前为止我已经尝试过

```
class BeersController < ApplicationController

  def index
    @beers = Beer.find(params[:location_id])
    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @beers }
    end
  end 
```

但是，即使我得到状态 200，iOS 应用程序也会崩溃

```
 Started GET "/locations/1/beers.json" for 127.0.0.1 at 2013-03-09 11:19:35 -0700
    Processing by BeersController#index as JSON
      Parameters: {"location_id"=>"1"}
      Beer Load (0.1ms)  SELECT "beers".* FROM "beers" WHERE "beers"."id" = ? LIMIT 1  [["id", "1"]]
    Completed 200 OK in 2ms (Views: 0.6ms | ActiveRecord: 0.1ms) 
```

在上面的请求中不应该是

`Beer Load (0.1ms) SELECT "beers".* FROM "beers" WHERE "beers"."location_id" = ? LIMIT 1 [["location_id", "1"]`]

如何更改我的控制器，使其响应仅属于客户端发送的 location_id 的啤酒？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T18:46:47.677

首先，您要查找的操作是`show`，而不是`index`您要查找 RESTful 服务。

要修复您提到的错误，您需要将查询更改为：

```
@beers = Beer.where(:location_id => params[:location_id]) 
```

假设`location_id`是您正在寻找的领域。

我会仔细查看您的路线，这些路线定义了您的网址。他们不遵循正常的惯例。

`/locations/...`将属于一个`Location`资源。

`/beers/...`将属于一个`Beer`资源。

你正在用你当前的路线搞乱惯例（这对你不利）。

# android - 第一个 android 应用程序给出错误

> ID：15314458
> 
> 赞同：0
> 
> 时间：2013-03-09T18:39:11.333
> 
> 标签：android, eclipse

我是 Android 的新开发人员，不幸的是我的第一个应用程序出错了。我正在开发一个简单的温度转换器。

这些是文件。

AndroidManifest.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.tempconv"
    android:versionCode="1"
    android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
<activity
    android:name="com.example.tempconv.MainActivity"
    android:label="@string/app_name" >
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />

        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity>
</application>

</manifest> 
```

活动主.xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
tools:context=".MainActivity" >

<EditText
    android:id="@+id/ipdata"
    android:hint="Enter temperature"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="22dp"
    android:ems="10" />

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/ipdata"
    android:layout_below="@+id/ipdata"
    android:layout_marginTop="15dp"
    android:text="Select Conversion" />

<RadioButton
    android:id="@+id/ctof"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/textView1"
    android:layout_below="@+id/textView1"
    android:layout_marginLeft="25dp"
    android:layout_marginTop="18dp"
    android:text="Celsius to Feherenhit" />

<RadioButton
    android:id="@+id/ftoc"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/ctof"
    android:layout_below="@+id/ctof"
    android:text="Feherenhit to Celsius" />

<EditText
    android:id="@+id/opdata"
    android:hint="Hit below button"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/textView1"
    android:layout_below="@+id/ftoc"
    android:layout_marginTop="54dp"
    android:ems="10" />

<Button
    android:id="@+id/doconvert"
    android:onClick="docon"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/opdata"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="20dp"
    android:text="convert" />

</RelativeLayout> 
```

MainActivity.java：

```
package com.example.tempconv;

import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.widget.EditText;
import android.widget.RadioButton;

public class MainActivity extends Activity {

    RadioButton RD1 = (RadioButton) findViewById(R.id.ctof);
    RadioButton RD2 = (RadioButton) findViewById(R.id.ftoc);
    EditText input = (EditText) findViewById(R.id.ipdata);
    EditText output = (EditText) findViewById(R.id.opdata);

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    public void doconvert(View v) {

        float data = Float.parseFloat(input.toString());

        if (RD1.isChecked()){

            float c;
            c = (data-32)*(5/9);
            output.setText(String.valueOf(c));
        }

        else if (RD2.isChecked()){

            float f;
            f=(data*(9/5))+32;
            output.setText(String.valueOf(f));
        }   
    }
} 
```

我在这里检查了很多线程，但还没有找到解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T18:41:14.630

你不能`findViewById()`早于`onCreate()`。这是因为还没有加载布局，因此甚至不存在视图。

换句话说，这段代码：

```
public class MainActivity extends Activity {
    RadioButton RD1 = (RadioButton) findViewById(R.id.ctof);
    RadioButton RD2 = (RadioButton) findViewById(R.id.ftoc);
    EditText input = (EditText) findViewById(R.id.ipdata);
    EditText output = (EditText) findViewById(R.id.opdata);

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    } 
```

需要是这样的：

```
public class MainActivity extends Activity {
    public RadioButton RD1, RD2;
    public EditText input, output;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        RD1 = (RadioButton) findViewById(R.id.ctof);
        RD2 = (RadioButton) findViewById(R.id.ftoc);
        input = (EditText) findViewById(R.id.ipdata);
        output = (EditText) findViewById(R.id.opdata);
    } 
```

* * *

`input.toString()`不是在文本框中键入的值。为此，您想要`input.getText().toString()`.

* * *

在您的`activity_main.xml`文件中，`<Button ... android:onClick="docon">`意味着单击该按钮将触发该方法`docon()`。您需要重命名方法`doconvert()`或编辑 XML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T18:42:10.183

尝试这个。

您必须`findViewById`在调用该方法后调用一次`setContentView`。

```
private RadioButton RD1
private RadioButton RD2 
private EditText input;
private EditText output;    

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    RD1 = (RadioButton) findViewById(R.id.ctof);
    RD2 = (RadioButton) findViewById(R.id.ftoc);
    input = (EditText) findViewById(R.id.ipdata);
    output = (EditText) findViewById(R.id.opdata);
} 
```

在 doconvert 方法中编辑此行。

```
float data = Float.parseFloat(input.getText().toString()); 
```

在您的布局中进行编辑。

```
<EditText
    android:id="@+id/ipdata"
    android:hint="Enter temperature"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="22dp"
    android:ems="10" 
    android:inputType="number"/>   <<<Add this line to force user to enter the numeric value. 
```

将此输入类型设置为数字，因为用户可以在`edittext`类似文本中输入任何内容，然后`NumberFormatException`将在此行抛出。

```
float data = Float.parseFloat(input.getText().toString()); 
```

因此，您还希望用户输入数字，然后将布局中的和`android:inputType="number"`最后设置为@user113215 编辑的答案。`android:onClick="doconvert"``button`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T18:42:29.863

移动这个

```
RadioButton RD1 = (RadioButton) findViewById(R.id.ctof);
RadioButton RD2 = (RadioButton) findViewById(R.id.ftoc);
EditText input = (EditText) findViewById(R.id.ipdata);
EditText output = (EditText) findViewById(R.id.opdata); 
```

像这样

```
RadioButton RD1
RadioButton RD2 
EditText input;
EditText output;   
    @Override
    protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
     RD1 = (RadioButton) findViewById(R.id.ctof);
        RD2 = (RadioButton) findViewById(R.id.ftoc);
        input = (EditText) findViewById(R.id.ipdata);
        output = (EditText) findViewById(R.id.opdata);

    } 
```

# solr - SOLR 生成有关标点符号的短语查询

> ID：15314460
> 
> 赞同：2
> 
> 时间：2013-03-09T18:39:17.947
> 
> 标签：solr, lucene

我的 SOLR 3.5 实例中有以下分析器链（尽管我们没有设置 luceneMatch 版本）：

```
<fieldtype name="text_pt" class="solr.TextField" 
           positionIncrementGap="100" autoGeneratePhraseQueries="false">
    <analyzer type="index">
        <tokenizer class="solr.StandardTokenizerFactory" />
        <filter class="solr.ASCIIFoldingFilterFactory" protected="protwords.txt" />
        <filter class="solr.WordDelimiterFilterFactory" 
                generateWordParts="1" generateNumberParts="1" 
                preserveOriginal="1" catenateWords="1" catenateNumbers="1" 
                catenateAll="0" />
        <filter class="solr.LowerCaseFilterFactory" />
        <filter class="solr.StopFilterFactory" ignoreCase="false" 
                words="portugueseStopWords.txt" />
        <filter class="solr.BrazilianStemFilterFactory" />
        <filter class="solr.RemoveDuplicatesTokenFilterFactory" />
    </analyzer>
    <analyzer type="query">
        <tokenizer class="solr.StandardTokenizerFactory" />
        <filter class="solr.ASCIIFoldingFilterFactory" protected="protwords.txt" />
        <filter class="solr.SynonymFilterFactory" ignoreCase="true" 
                synonyms="portugueseSynonyms.txt" expand="true" />
        <filter class="solr.WordDelimiterFilterFactory" 
                generateWordParts="1" generateNumberParts="1" 
                catenateWords="0" preserveOriginal="1" catenateNumbers="0" 
                catenateAll="0" protected="protwords.txt" />
        <filter class="solr.LowerCaseFilterFactory" />
        <filter class="solr.StopFilterFactory" ignoreCase="false" 
                words="portugueseStopWords.txt" />
        <filter class="solr.BrazilianStemFilterFactory" />
        <filter class="solr.RemoveDuplicatesTokenFilterFactory" />
    </analyzer>
</fieldtype> 
```

注意我们是如何拥有**autoGeneratePhraseQueries="false"**的。
显然，这应该可以防止查询解析器在查找标点符号时生成短语查询。然而，这并没有发生。

查看 &debugQuery 的输出：

```
<str name="querystring">title_search_pt:(looking,for peugeot)</str>
<str name="parsedquery">+PhraseQuery(title_search_pt:"looking for") +title_search_pt:peugeot</str> 
```

如您所见，尽管逗号被正确标记，但现在最终成为短语查询。很多人复制粘贴文本进行搜索（带有标点符号），在我的逻辑下，标点符号不应该意味着“用那个做一个短语查询”。

**如何禁用/防止这种情况发生？**

StandardTokenizer 完全理解点和逗号，并且仅在必要时拆分（保留主机名、数字等），因此在查询 SOLR 之前替换客户端上的所有标点符号不是一种选择，因为我会丢失一些重要信息。

谢谢

# java - Java将变量从超类传递到子类

> ID：15314462
> 
> 赞同：1
> 
> 时间：2013-03-09T18:39:20.250
> 
> 标签：java, constructor, this, extends

在java中我有一个扩展类B的类A

我想将 B 类中的所有内容分配给 A 类事情是我想从 A 类内部进行，现在这似乎很容易做到，只需转移所有变量。

这是困难的部分。我没有让 B 类成为 android.widget 的一部分。

我将如何在 java 中执行此操作？

为了进一步澄清它是一个相对布局，我需要将一个相对布局的所有内容复制到一个扩展相对布局的类中

```
class something extends other
{
public something(other a){
 //transfer all of the other class into something
 this=(something)a;  // obviously doesn't work
 //*this doesn't exist?
 //too many variables to transfer manually
}
} 
```

非常感谢所有的帮助。真的很欣赏！！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T19:55:40.557

请参阅下面给出的代码。它使用`java.lang.reflect`包从超类中提取所有字段并将获得的值分配给子类变量。

```
import java.lang.reflect.Field;
class Super
{
    public int a ;
    public String name;
    Super(){}
    Super(int a, String name)
    {
        this.a = a;
        this.name = name;
    }
}
class Child extends Super 
{
    public Child(Super other)
    {
        try{
        Class clazz = Super.class;
        Field[] fields = clazz.getFields();//Gives all declared public fields and inherited public fields of Super class
        for ( Field field : fields )
        {
            Class type = field.getType();
            Object obj = field.get(other);
            this.getClass().getField(field.getName()).set(this,obj);
        }
        }catch(Exception ex){ex.printStackTrace();}
    }
    public static void main(String st[])
    {
        Super ss = new Super(19,"Michael");
        Child ch = new Child(ss);
        System.out.println("ch.a="+ch.a+" , ch.name="+ch.name);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T18:46:03.737

父类（非私有）的所有变量和函数在子类中都是直接访问的。您不需要在子类中分配任何东西。您可以直接访问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T18:51:40.780

这将**不起作用**：

`Something something = (Something) other.clone();`

如果 other 的**真正运行时类型**是`Other`.

相反，您必须创建一个复制构造函数，或者将`other`其实例化为实例`Something`然后克隆它。

# select - VHDL：选择多个值

> ID：15314463
> 
> 赞同：6
> 
> 时间：2013-03-09T18:39:33.353
> 
> 标签：select, vhdl

我有以下代码（它编码了许多按下的按钮）：

```
with buttons select
  tmp <= "000" when x"1",
         "001" when x"2",
         "010" when x"4",  
         "011" when x"8",
         "100" when others;
code <= input(1 downto 0);
error <= input(2); 
```

我试图在不使用`tmp`信号的情况下重写它。可能吗？以下不起作用：

```
with buttons select
  error & code <= "000" when x"1",
                  "001" when x"2",
                  "010" when x"4",  
                  "011" when x"8",
                  "100" when others; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T20:08:57.283

您可以使用案例而不是选择：

```
my_process_name : process(buttons)
begin
  case buttons is
    when x"1" =>
      error <= '0';
      code  <= "00";
    when x"2" =>
      error <= '0';
      code  <= "01";
    when x"4" =>
      error <= '0';
      code  <= "10";
    when x"8" =>
      error <= '0';
      code  <= "11";
    when others =>
      error <= '1';
      code  <= "00";
  end case;
end process; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-15T16:30:20.120

或者您可以将其写为 2 个单独的 with/when 语句：

```
with buttons select
  error <= '0' when x"1",
           '0' when x"2",
           '0' when x"4",  
           '0' when x"8",
           '1' when others;
with buttons select
  code <= "00" when x"1",
          "01" when x"2",
          "10" when x"4",  
          "11" when x"8",
          "00" when others; 
```

或者：

```
error <= '0' when (buttons = X"1" or buttons = X"2" buttons = X"4" buttons = X"8") else '1'; 
code <= "00" when buttons = X"1" else "01" when buttons = X"2" else "10" when buttons = X"4" else "11" when buttons = X"8" else "00"; 
```

VHDL 是一种编译语言 - 或综合语言。只要综合工具创建相关的逻辑结构，任何格式都可以。剩下的就是允许代码被理解和维护的语义。

# sql - 协助 T-SQL JOIN？

> ID：15314464
> 
> 赞同：0
> 
> 时间：2013-03-09T18:39:33.753
> 
> 标签：sql, sql-server

现在我有两张表，分别称为 Singles 和 Averages。

单打是：

```
PersonID (PK)
EventID (FK)
best
worldRank 
```

平均值为：

```
PersonID (PK)
EventID (FK)
best
worldRank 
```

我正在尝试合并这两个表。基本上，结果表应该是：

“合并是：

```
PersonID (PK)
EventID(FK)
bestSingle ('best' from Singles)
bestAverage ('best' from Averages)
worldRankSingle ('worldRank' from Singles)
worldRankAverage ('worldRank' from Averages)" 
```

这就是我现在所拥有的。

```
SELECT  RanksAverage.[personId],
RanksAverage.[eventId],
RanksAverage.[best] AS 'averageBest',
RanksAverage.[worldRank] AS 'averageRank',
RanksSingle.best AS 'singleBest',
RanksSingle.worldRank AS 'singleRank'

FROM [cubing].[dbo].[WCA_export_RanksSingle] AS RanksSingle

JOIN [cubing].[dbo].[WCA_export_RanksAverage] AS RanksAverage
ON RanksAverage.personId = RanksSingle.personId 
```

顺便说一句，我正在使用 SQL Server 2012。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T18:42:30.573

看起来你唯一缺少的`JOIN`是第二个标准`event`：

```
JOIN [cubing].[dbo].[WCA_export_RanksAverage] AS RanksAverage
ON RanksAverage.personId = RanksSingle.personId
AND RanksAverage.eventId = RanksSingle.eventId 
```

这只是一个假设，因为我们不知道您的数据是什么样的。

# objective-c - Objective C中模型对象之间的双向通信

> ID：15314467
> 
> 赞同：3
> 
> 时间：2013-03-09T18:39:47.423
> 
> 标签：objective-c, model-view-controller

我有一个关于编程概念的问题，而不是与某些特定代码相关的具体问题。

我有两个模型对象，一个与 Core Data 相关，一个与 Twitter 相关。

他们需要相互交流。Twitter 对象可能想要一些来自数据库的推文，而 Core Data 对象可能想要将一些推文写入数据库。

我可以在每个类上编写公共方法并让每个类调用这些方法。

但是，我觉得这是一个相当紧密的耦合，我想要一些其他的对象之间的通信方法。

在这种情况下，协议委托系统会更合适吗？

例如，Twitter 类声明一个 TwitterDataSource 协议，Core Data 类充当该协议的委托。反之亦然。

非常感谢，

瓦兹布

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T18:48:07.253

你是对的，耦合会很紧。如果您想放松耦合，请考虑使用[Mediator 设计模式](https://en.wikipedia.org/wiki/Mediator_pattern)。随着事情的变化，您只需要更改调解器处理两个对象之间的通信的方式，而不是更改两个单独的对象本身。

[![UML 中介设计模式](../Images/72188fa4b201ff0d66a2e6ef81b0b044.png)](https://i.stack.imgur.com/HcPwS.png)
[（来源：[devlake.com](http://www.devlake.com/design-patterns/mediator/mediator.PNG)）]

![中介信息流](../Images/abe2ee8fc880c7d57eabe2e2fa26458a.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T19:25:26.143

> 他们需要相互交流。Twitter 对象可能想要一些来自数据库的推文，而 Core Data 对象可能想要将一些推文写入数据库。

让我在那儿阻止你。无论你是谁，这都是一种*糟糕的设计模式。*您的权力分离并没有让您的生活更轻松，而是在您的项目中造成了一个鸿沟，您现在必须通过让每个对象相互引用来弥补这一鸿沟。无论如何，这些对象的两个活动都属于控制器的概念。第一个可以重构为异步操作，尤其是当它需要通知数据库控制器它已完成时。与其考虑委托，不如编写一个写入数据库的 NSOperation 子类（当然是串行的），并让数据库控制器调解操作的结果，以及来自另一个对象的推文，这些推文被写入数据库。不再有相互引用（这是*不是*双向性），没有更多的双控制器对象，没有更多的麻烦。

# python - django 1.5 + pymysql 错误：ImportError: cannot import name Thing2Literal

> ID：15314468
> 
> 赞同：5
> 
> 时间：2013-03-09T18:39:50.170
> 
> 标签：python, django, python-2.7, pymysql

我尝试使用 django1.5 和[pymysql](https://github.com/petehunt/PyMySQL/)作为 MySQLdb 在这里[如何使 Django 使用不受支持的 MySQL 驱动程序，例如 gevent-mysql 或 Concurrence 的 MySQL 驱动程序？](https://stackoverflow.com/questions/2636536/how-to-make-django-work-with-unsupported-mysql-drivers-such-as-gevent-mysql-or-c)

在我的管理命令的顶部：

```
+try:
+    import pymysql
+    pymysql.install_as_MySQLdb()
+except ImportError:
+    pass 
```

但得到错误：

```
/local/lib/python2.7/site-packages/django/db/backends/mysql/base.py", line 30, in <module>
    from MySQLdb.converters import conversions, Thing2Literal
ImportError: cannot import name Thing2Literal 
```

如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-24T22:12:53.123

刚刚在 Django 1.5.1 和 PyMySQL 0.5 上遇到了同样的问题

通过使用 PyMySQL 的 CMGS fork ( [https://github.com/CMGS/PyMySQL](https://github.com/CMGS/PyMySQL) ) 修复。希望这将使其进入主线 PyMySQL。在此处查看 CMGS 的拉取请求：[https ://github.com/petehunt/PyMySQL/pull/106](https://github.com/petehunt/PyMySQL/pull/106)

从作者的评论和 pull request 中的反馈来看，我认为它非常适合生产使用。

示例 requirements.txt 行：-e git://github.com/CMGS/PyMySQL.git#egg=PyMySQL-dev

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T20:28:21.617

在中，如果您使用的是最新版本的 MySQL，则不使用`MySQLdb`该方法，在这种情况下，当连接可用时，将使用连接的方法。[`Thing2Literal`](http://mysql-python.sourceforge.net/MySQLdb-1.2.2/public/MySQLdb.converters-module.html#Thing2Literal)[`string_literal`](http://mysql-python.sourceforge.net/MySQLdb-1.2.2/private/_mysql-module.html#string_literal)

您需要进行修补`pymysql`，以便它执行相同的操作并让您使用连接的方法。

## 语境

此方法用于转义 SQL 语句。因此，使用它会产生您必须考虑的安全问题。

之所以要使用connection的方法，是因为charset，起到转义的作用。

## 修复`ImportError`

这是一个非常简单的`Thing2Literal`方法，您只需要在[`pymysql.converters`](https://github.com/petehunt/PyMySQL/blob/master/pymysql/converters.py). 我们永远不会取消它，所以我们不关心它：

```
def _Thing2Literal(o,d):
    """
    Implemented for compatibility with Django.
    This function is overriden by the connection's escape method when one is available.
    """
    raise NotImplementedError('Thing2Literal is only implemented through the Connection object.')

 Thing2Literal = _Thing2Literal 
```

## `Thing2Literal`当连接可用时在运行时进行猴子修补

在`pymysql.connections.Connection`中，添加：`import pymysql.converters`

在 末尾`pymysql.connections.Connection.__init__`，添加以下内容：

```
pymysql.converters.Thing2Literal = lambda o, d: self.escape(o) 
```

并在 末尾`pymysql.connections.Connection.__del__`添加相反的内容：

```
pymysql.converters.Thing2Literal = pymysql.converters._Thing2Literal 
```

我们可以丢弃该`d`参数，因为它是现有转换的字典，该`Connection.escape`方法已经可以使用这些转换。

## 注意事项

这很有可能会破坏并暴露安全问题。*此外，如果您有多个使用不同*字符集的
活动连接，我很确定它会严重损坏。

 ** * *

您可能还需要对 Django 进行一些尝试，以确保它在可用时使用您的猴子补丁版本 - 即替换`from MySQLdb.converters import Thing2Literal`为仍将名称绑定`Thing2Literal`到模块的东西。

你当然可以在不给 django 打补丁并使`_Thing2Literal`功能更智能的情况下达到同样的效果。*

# ruby-on-rails - FactoryGirl 设置属性与关联

> ID：15314469
> 
> 赞同：0
> 
> 时间：2013-03-09T18:39:54.233
> 
> 标签：ruby-on-rails, rspec, tdd, factory-bot

我有一个`Note`附加到 a 的对象`Course`，我想在 FactoryGirl中随机设置`@note.number`为。`rand(@note.course.sections)`我试过了：

```
 factory :note do
    association :course
    number { ranb(course.sections) }
    content { Faker::Lorem.paragraphs(paragraph_count = 1).join(" ") }
  end 
```

它不起作用，并说课程为零。这样做的正确方法是什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T20:52:51.530

I don't understand the relationship between `Course#sections` and `Note#number`, also I can only assume you've defined the `Course` factory. I've tested the following, and it works fine:

```
FactoryGirl.define do
  factory :course do
    sequence(:sections)
  end

  factory :note do
    course
    number { rand(course.sections) }
  end
end

note = FactoryGirl.create(:note)
# => <Note id: 11, course_id: 12, number: 6, ...>
note.course
# => <Course id: 12, sections: 9, ...> 
```

# java - 如何让 DocumentListener 在每一行之后进行比较，而不仅仅是在程序运行后进行比较？

> ID：15314471
> 
> 赞同：1
> 
> 时间：2013-03-09T18:40:14.507
> 
> 标签：java

我通过添加一个基本代码来了解它是如何工作的，开始执行第 3 项任务。但我无法摆脱这个问题。我只是添加了一个“if”，这样如果输入文本等于“hr”，那么海龟每次都会向右移动 2 个方格。但是当我运行代码时，就好像它只检查第一个字符。如果前两个字符是“hr”，那么它标记了一个点，但如果不是，它就不再检查输入。例如，如果我写：

```
re
Fd
hr 
```

即使“hr”在那里，它也永远不会标记点。我该怎么做才能让 TurtleRenderer 在每次插入 \n 时读取该行，而不仅仅是在代码运行时读取？

我的代码：

```
package turtle;

public class BoardMaker {

    private static int MAX = 100;
    private boolean[][] board = new boolean[MAX][MAX];
    int previousX = 0;
    int previousY = 0;

    public boolean[][] makeBoardFrom(String description) {      
        if(description.contentEquals("hr")){
            previousX+=2;
            board[previousX][previousY]=true;
        }
        return board;
    }

    public boolean[][] initialBoard() {
        for(int i=0;i<MAX;i++)
        {
            for(int j=0;j<MAX;j++)
                board[i][j]=false;
        }
        return board;       
    }
} 
```

TurtleRenderer 类：

```
package turtle;

public class TurtleRenderer extends Panel implements  DocumentListener {

    private static final long serialVersionUID = 1;

    static final Dimension WINDOW_SIZE = new Dimension(1150, 1150);

    boolean [][] board;
    final BoardMaker boardMaker;

    public TurtleRenderer() {
        boardMaker = new BoardMaker();
        board = boardMaker.initialBoard();
    }

    static public void main(String args[]) throws Exception {
        JFrame frame = new JFrame("Display image");
        JPanel panel = new JPanel();
        TurtleRenderer image = new TurtleRenderer();
        image.setPreferredSize(WINDOW_SIZE);
        JScrollPane textArea = makeTextArea(image);
        panel.setLayout(new BoxLayout(panel, BoxLayout.X_AXIS));
        panel.add(image);
        buildRightPanel(panel, textArea);
        frame.setSize(WINDOW_SIZE);
        frame.addWindowListener(new WindowAdapter(){
            public void windowClosing(WindowEvent we){
                System.exit(0);
            }});
        frame.getContentPane().add(panel);
        frame.setVisible(true);
    }

    static void buildRightPanel(JPanel panel,JComponent textArea) {
        JLabel label = new JLabel("Your program:");
        label.setPreferredSize(new Dimension(150, 20));
        JPanel right = new JPanel();
        textArea.setPreferredSize(new Dimension(150,500));
        right.setLayout(new BoxLayout(right, BoxLayout.Y_AXIS));
        right.add(label);
        right.add(textArea);
        panel.add(right);
    }

    public void paint(Graphics g) {
        Graphics2D g2d = (Graphics2D)g;
        g2d.setColor(Color.white);
        g.fillRect(0, 0, WINDOW_SIZE.width, WINDOW_SIZE.width);
        if(board == null) 
            return;
        g2d.setColor(Color.red);
        for(int i=0;i<board.length;i++) {
            for(int j=0;j<board.length;j++) {
                if(board[i][j])
                    g2d.fillRect(9*i+1, 9*j+1, 6, 6);
            }
        }
    }

    static JScrollPane makeTextArea(TurtleRenderer image) {
        JTextArea textArea = new JTextArea();
        textArea.getDocument().addDocumentListener(image);
        textArea.setVisible(true);
        JScrollPane areaScrollPane = new JScrollPane(textArea);
        areaScrollPane.setVerticalScrollBarPolicy(
                JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);
        areaScrollPane.setBorder(BorderFactory.createLineBorder(Color.black));
        return areaScrollPane;
    }

    @Override
    public void insertUpdate(DocumentEvent e) {
        changed(e);
    }

    @Override
    public void removeUpdate(DocumentEvent e) {
        changed(e);
    }

    @Override
    public void changedUpdate(DocumentEvent e) {
        changed(e);
    }

    void changed(DocumentEvent de) {
        String description;
        Document document = de.getDocument();
        try {
            description = document.getText(0, document.getLength());
        } catch (BadLocationException e) {
            throw new RuntimeException(e);
        }
        try {
            board = boardMaker.makeBoardFrom(description);
        } catch(ParserException pe) {
            board = null;
        }
        this.repaint();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T19:01:30.193

您的问题是您当前正在测试JTextArea 持有的*整个文本是否持有“hr”。*如果 hr 是 JTextArea 中的唯一文本，这可能是正确的，但一旦添加了更多文本，这将始终是错误的。您需要检查的是*最后一行*是否为“hr”。

由于这是家庭作业，我不会发布解决方案，但您的 DocumentListener 的伪代码逻辑解决方案可能是：

```
try
   get the text String from the document
   get the last char from this String
   if this last Char == carriage return which is (char)10
      split the text into lines using the carriage return as the split's delimiter
      get the last line held by this array and check it
      if it is hr do something
   end if last char == carriage return
end try
catch for BadLocationException 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T22:49:19.790

首先，和[之前的评论](https://stackoverflow.com/a/15314649/1829398)一样，该方法`makeBoardFrom`每次都会接收整个程序。如果由您决定将该程序拆分为单独的命令，然后执行每个命令。您不应尝试将 TurtleRenderer 类更改为不同的行为。

其次，如果要将海龟向左移动两个方格，则必须将两个方格都标记为已访问，而不仅仅是目标方格。现在在您的解决方案中，仅使用`previousX+=2;`您仅将目标广场标记为已访问。

第三，在该`initialBoard`方法中，您还必须用 实际标记海龟的初始正方形`true`。在您的情况下，这将是位置 (0, 0) 处的正方形。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T19:17:17.207

从 Javadocs，

```
public boolean contentEquals(CharSequence cs)

Compares this string to the specified CharSequence. 
The result is true if and only if this String represents the same sequence of char values as the specified sequence. 
```

```
public boolean contains(CharSequence s)

Returns true if and only if this string contains the specified sequence of char values. 
```

从而`String.contentEquals`将功能更多的一种`String.equals`方法。[虽然有一些差异](https://stackoverflow.com/questions/6476600/difference-between-stringequals-and-stringcontentequals-methods-in-java)。

与这个问题一样，您需要`String.contains`方法来检查文本是否包含`String "hr"`

* * *

关于代码效率的另一条建议：

您不必`changedUpdate(DocumentEvent e)`在`DocumentListener`. 此方法仅在一个属性或一组属性发生更改时调用，即文档的样式已更改，这在 a 中是不可能的，`JTextArea`因为它不支持样式化文本。

我希望我已经正确理解了您的问题。

# c++ - C ++堆组织 - 哪种数据结构？

> ID：15314475
> 
> 赞同：0
> 
> 时间：2013-03-09T18:41:10.863
> 
> 标签：c++, memory, heap, heap-memory

C++ 有两种主要的内存类型：堆和栈。有了堆栈，我什么都清楚了，但是关于堆还有一个问题：

堆内存是如何组织的？我阅读了[堆数据结构](http://en.wikipedia.org/wiki/Heap_(data_structure))，但这似乎不适用于堆，因为在 C++ 中我可以访问堆中的任何数据，而不仅仅是最小值或最大值。

所以我的问题是：堆内存在 C++ 中是如何组织的？当我们阅读*“在堆上分配”*时，我们想到了什么内存组织？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T19:05:50.577

一个常见的（虽然肯定不是唯一的）空闲存储实现是空闲内存块的链接列表（即，当前未使用的块）。堆管理器通常会从操作系统分配大块内存（例如，一次 1 兆字节），然后将这些块分成几块以供您的代码在使用时使用`new`等。当您使用`delete`时，您退出使用的内存块将作为一个节点添加到该链表上。

关于如何使用这些空闲块有多种策略。三种常见的方法是最佳拟合、最差拟合和首次拟合。

在最合适的情况下，您尝试找到一个大小最接近所需分配的空闲块。如果它大于要求（通常在四舍五入分配大小之后），则将其分成两部分：一个返回分配，一个新的（较小的）空闲块放回列表中以满足其他分配请求。尽管这似乎是一个不错的策略，但它通常会出现问题。问题是，当您找到最接近的匹配时，剩余的块通常太小而没有多大用处。不久之后，你会得到大量的小块可用空间，这些都对任何事情都没有好处。

最差匹配通过在空闲块中找到最差的匹配来对抗这种情况——IOW，最大的可用空间块。当它拆分该块时，剩下的将尽可能大，从而最大限度地提高它对其他分配有用的机会。

第一个拳头只是遍历空闲块列表，并且（正如您从名称中猜到的）使用第一个足够大以满足要求的块。

不少人还从搜索精确匹配开始，并优先使用它而不是拆分块。

相当多的人还保留（例如）许多用于不同分配大小的单独链表，以尽量减少对正确大小块的搜索。

在相当多的情况下，管理器也有一些代码来遍历空闲块列表，以找到彼此相邻的任何块。如果找到它们，它将把两个小块连接成一个更大的块。`free`有时，当您/`delete`一个块时，这是正确的。更常见的是，它是懒惰地完成的，以避免在/如果您使用很多相同大小的块时加入然后重新分割块（这很常见）。

在处理大量相同大小的项目（尤其是小项目）时，另一种常见的可能性是块数组，其中有一个位集来指定哪些是空闲的或正在使用的。在这种情况下，您通常会跟踪找到最后一个空闲块的位集中的索引。当需要一个块时，只需从最后一个索引向前搜索，直到找到位集表示该块空闲的下一个索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T18:51:50.593

堆有两个主要含义，有两个不同的概念：

1.  用于排列数据的数据结构，树。
2.  可用内存池。它通过分配/释放可用内存块来管理内存。

[内存管理中堆](http://www.gotw.ca/gotw/009.htm)的介绍：

> 堆是另一个动态内存区域，由 malloc/free 及其变体分配/释放....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T18:47:57.253

这里的堆并不是堆数据结构的意思。该内存被称为堆内存，其中存储了全局静态变量。此外，当我们动态分配内存时，它是在堆内存中分配的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T18:50:44.220

当您阅读“在堆上分配”时，这通常是 C++ 的“动态存储持续时间”的特定于实现的实现。这意味着您曾经`new`分配过内存，并且有一个指向它的指针，您现在必须跟踪它直到您`delete`（或`delete[]`）它。

至于它是如何组织的，没有固定的方法。在某一时刻，如果内存服务，“堆”实际上*是*一个最小堆（按块大小组织）。不过，这是特定于实现的，不一定要那样。任何数据结构都可以，在给定的情况下，有些数据结构比其他数据结构更好。

# c - 有没有办法在 C 中列出所有当前正在运行的进程

> ID：15314479
> 
> 赞同：1
> 
> 时间：2013-03-09T18:41:40.287
> 
> 标签：c, linux

所以我正在构建自己的 shell，其中一个功能是列出所有后台运行的作业，它们的名称、PID、类似于 bash 的作业编号及其状态，即它是暂停还是运行。我还必须打印刚刚结束的后台作业的退出状态代码。现在我想知道是否有一个系统调用可以为我做这件事，或者一个 C api 调用，一旦它们在后台运行，或者我是否必须编写我自己的工作函数来完成我刚才提到的事情？谢谢。我正在使用 Linux 在 C 中执行此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T19:00:18.360

一种快速简便的方法是搜索`/proc`，因为每个正在运行的进程在此处都有一个与其 PID 相同的目录，以及名称和状态详细信息。您可以为此使用常规的 stdio 函数。

您可能想浏览[psmisc](http://psmisc.sourceforge.net/ "psmisc")源代码，因为它包含一组标准 Linux 实用程序，旨在与`/proc`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T00:56:41.017

对于您的具体任务（类似 shell 的作业控制），您需要自己编写此类函数。顺便说一句，您已经拥有并且应该保留的大部分信息。

*   应为 waitpid(2) 保留孩子的 PID。

*   应该保留用于启动子进程的命令行，因为进程可能会更改其 argv[0]，因此原始行将丢失。

*   作业编号纯粹是外壳内部的东西，操作系统不会，不能也不会关心它（即，如果您不关心作业编号，那么没有人会为您关心它）。如您所见，只有您（即您的流程）拥有所需的信息。

另一个原因是便携性。即使假设来自 Linux 上的 procfs (/proc) 的信息对你来说已经足够了，但在 FreeBSD 上，所有这些都是完全不同的事情——你需要通过 kvm(3) 接口工作。在 Mac OS X 上，您将需要第三种方式——没有 procfs 并且 kvm(3) 前段时间已经过时。

结论：您可能会绕过系统差异，但它只会为您提供部分信息。另一方面，无论如何，您必须或应该让这些信息在您的流程中浮动。只需使用它，它将更简单，更便携。

# c++ - QSpinBox 未正确绘制

> ID：15314482
> 
> 赞同：1
> 
> 时间：2013-03-09T18:42:05.923
> 
> 标签：c++, qt, model-view-controller, qt4.8, qstyle

我目前正在实现一个自定义委托，其中一部分我需要`QSpinBox`在方法中绘制`paint(..)`。

```
void Sy_floatingPointPD::paint( QPainter* painter,
                                const QStyleOptionViewItem& option,
                                const QModelIndex& index ) const
{
    painter->save();

    //  Paint check box.
    QStyleOptionSpinBox spOpt;
    spOpt.palette     = option.palette;
    spOpt.rect        = option.rect;
    spOpt.state       = option.state;
    spOpt.frame       = true;
    spOpt.stepEnabled = QAbstractSpinBox::StepUpEnabled |
                       QAbstractSpinBox::StepDownEnabled;

    style->drawComplexControl( QStyle::CC_SpinBox, &spOpt, painter );

    painter->restore();
} 
```

不幸的是，它显示为：

![油漆失败](../Images/75fe5247fbe2f3673eb9f41c20e95ee5.png)

如您所见，步骤按钮被*大量*绘制，并且仅出现向下箭头。有趣的是，按钮的宽度反映了第一个表格列的宽度，尽管`option.rect`是单元格的大小（这是正确的，这可能是正确绘制框架的原因）。

任何想法我没有提供什么信息`QStyle`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T10:42:59.083

Jens 在 qt-project 论坛上回答了这个问题，所以我会在[这里](https://qt-project.org/forums/viewthread/25573/)链接到它。

简而言之，旋转框绘图（至少在 QGtkStyle 中）存在设计缺陷，它只使用 的*大小*，`option.rect`而忽略了它的位置。尽管这在“正常”绘画场景中是完全合理的，因为它映射到小部件原点，但由于单元格偏移，它在项目视图中呈现时会失败。

要解决此问题，请移动`option.rect`到小部件原点（即，将其左上角移动到 (0,0)），然后平移`QPainter`以考虑单元格偏移。

# java - 为什么我的 JSP 不删除 cookie

> ID：15314496
> 
> 赞同：2
> 
> 时间：2013-03-09T18:42:52.067
> 
> 标签：java, jsp, cookies, content-type

我想删除登录页面中的 cookie，无论我做什么，它都不会消失。在 chrome 开发人员中，它显示来自服务器的响应不包含 cookie，即使我使用`response.addCookie()`.

这是删除代码的 JSP 代码。它位于页面的开头，就在设置内容类型之后和任何输出之前。此 JSP 位于平铺视图中（不确定是否有任何区别）。我也尝试将此代码移动到包含 JSP，但也没有帮助。

```
<%@ page contentType="text/html; charset=UTF-8" %>
<%
// remove cookie.  all the properties (domain, path secure) match those those when   the cookie was being created and set.
Cookie ck = new Cookie(someName,"");
ck.setMaxAge(0);
ck.setValue("");
ck.setPath("/");
ck.setDomain(someDomain);
    ck.setSecure(true);
response.addCookie(ck);
System.out.println("wwwwwww 999991111");
%> 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T18:59:20.367

利用

```
cookie.setPath(request.getContextPath()); 
```

只有将应用程序部署到根目录时，您的代码才有效。

# c++ - 将字段名称传递给函数模板

> ID：15314497
> 
> 赞同：8
> 
> 时间：2013-03-09T18:42:55.607
> 
> 标签：c++, templates

我想知道是否有一种方法可以将字段名称传递给函数模板。考虑以下：

```
struct Type1{
    unsigned int Field1;
    unsigned int Field2;
};

struct Type2{
    unsigned int Field2;
    unsigned int Field3;
};

template <typename TYPE>
bool MyFunction(TYPE _Type){
    if(_Type.Field1==5)
        return false;
} 
```

这很好用，但是在`MyFunction`我指定的范围内`.Field1`，有没有办法可以将此字段的名称传递到模板中，例如：

```
void TestFunction(){
    Type1 mt1;
    MyFunction(mt1, Field1);
} 
```

显然，我不是在这里模板类型，而且我不知道这将被称为什么（除了明显的答案 - 愚蠢！）所以我什至在努力寻找解决方案。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-09T18:47:00.023

您不能传入纯*名称*，因为名称不是 C++ 元模型的一部分，但您可以将 **指向成员**的指针传递给您的函数：

```
template <typename TYPE, typename T>
bool MyFunction(TYPE obj, T TYPE::*mp)
//                          ^^^^^^^^^
{
    if ((obj.*mp) == 5)
//          ^^^^
        return false;

    // ... <== DON'T FORGET TO RETURN SOMETHING IN THIS CASE,
    //         OTHERWISE YOU WILL GET UNDEFINED BEHAVIOR
} 
```

以下是在一个小的、完整的程序中使用它的方法：

```
struct Type1{
    unsigned int Field1;
    unsigned int Field2;
};

struct Type2{
    unsigned int Field2;
    unsigned int Field3;
};

int main()
{
    Type1 t1;
    Type2 t2;
    MyFunction(t1, &Type1::Field1);
    MyFunction(t2, &Type2::Field3);
} 
```

这是一个[活生生的例子](http://liveworkspace.org/code/4sAas7$50)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-09T18:46:45.437

您可以传递一个[指向成员](http://msdn.microsoft.com/en-us/library/k8336763.aspx)的指针：

```
template <typename T>
bool MyFunction(T& type, int T::*field){
    if (type.*field == 5)
        return false;
}

MyFunction(mt1, &Type1::Field1); 
```

# ios - 如何在不禁用 ASLR 的情况下计算应用程序在内存中的位置？

> ID：15314499
> 
> 赞同：2
> 
> 时间：2013-03-09T18:43:06.283
> 
> 标签：ios, c, code-injection, aslr, cydia-substrate

所以我正在做一个越狱调整，它在启动时连接到一个特定的应用程序，以允许用户为应用程序使用游戏中的模块，但到目前为止，我能让它工作的唯一方法是使用禁用 ASLR 的应用程序。由于法律规定我无法发布禁用 ASLR 的应用程序版本，因此我想看看在不禁用 ASLR 的情况下计算应用程序内存位置的方法。我以前看过它，只是想知道是否有人知道如何重新创建它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-11T08:34:07.747

如果你已经成功地将你的调整（一个 dylib）插入到目标应用程序中，那么你可以使用 dyld 函数来获取 ASLR 偏移量（虚拟内存地址幻灯片）。假设您想获取可执行文件的偏移量，这是一个片段示例：

```
for (uint32_t i = 0; i < _dyld_image_count(); i++) // enumerate all images (i.e. executables and libs)
{
    const char *name = _dyld_get_image_name(i); // get full path of the image
    NSString *path = [NSString stringWithFormat:@"%s", name];
    if ([path hasSuffix:@"MinecraftPocket"]) NSLog(@"slide = %0x0lx", _dyld_get_image_vmaddr_slide(i)); // log the vm slide
} 
```

希望这可以帮助！

# optimization - 查询优化图表工具

> ID：15314501
> 
> 赞同：0
> 
> 时间：2013-03-09T18:43:21.353
> 
> 标签：optimization, visualization

这种用于显示查询优化的图像的名称是什么？是否有绘制它们的工具？

![在此处输入图像描述](../Images/f3506c8bd533996c45327394a1a86e00.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-09-04T14:27:06.773

该类型图像/图表的名称是

*   **逻辑查询计划（树）**
*   或**关系运算符树**
*   ，也是 **关系代数树**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T01:00:04.407

繁荣！有一种叫做关系代数工具包的东西！[http://rat.cs.panam.edu/RAT2/index.html](http://rat.cs.panam.edu/RAT2/index.html)

它真的很酷，专为我想要的东西而构建，学习和表达关系代数。

# java - Java META-INF 不工作

> ID：15314503
> 
> 赞同：0
> 
> 时间：2013-03-09T18:43:23.257
> 
> 标签：java, executable-jar, manifest.mf

我的 jar 文件根本不工作。搞砸的不是类文件，而是 meta-inf 文件。我的主类叫做 Main.class。这是我的 META-INF/MANIFEST.MF 文件的样子：

```
Manifest-Version: 1.0
Main-Class: Main
Class-Path: . 
```

请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T18:45:54.197

尝试删除`Class-Path:`线

# jquery - 从文件中读取 xml 标记并将其显示在浏览器上

> ID：15314509
> 
> 赞同：0
> 
> 时间：2013-03-09T18:43:54.493
> 
> 标签：jquery, html, ajax

可能是一个非常基本的问题..

但我有一个嵌入图像的简单表格......所以让我们说这样的话

```
<tr>
    <td align="center">

        <img src="wiki-thumbs/Picture1.png" height="55%" width="80%" class="linksESPN" />

    </td>
    <td align="center">

        <img src="wiki-thumbs/Picture2.png" height="55%" width="80%" class="linksESPN" />

    </td>
  </tr> 
```

现在，所以 Picture1.png 在名为 Picture1.xml 的文件中有相应的“xml”数据

所以我在这里找到了一个非常简单的解决方案：[在 HTML 页面中显示 XML 内容](https://stackoverflow.com/questions/7519618/display-xml-content-in-html-page)

但是..我如何从文件中读取这些 xml。这也是因为图像名称和 xml 文件名称相同.. 我可以巧妙地做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T19:06:16.760

在服务器端执行此操作可能会更好，但问题涉及 jQuery 和 AJAX，因此，假设 xml 文件在您自己的域中：

1.  对于每个图像，创建一个`textarea`. 为每个设置一个 id，`textarea`以便您可以将每个图像与 right 相关联`textarea`。

2.  在 jQuery 中，使用选择器来查找页面上所有带有 class 的图像`linksESPN`。

3.  [使用each](http://api.jquery.com/each/)函数循环浏览这些图像。

4.  获取`src`每个图像的 ，将图像的目录替换为 pdf 文件所在位置的目录，并将图像的扩展名替换为 `pdf`.

5.  使用[load](http://api.jquery.com/load/)函数将 XML 的内容加载到图像对应的`textarea`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T20:48:34.673

听起来您提供的链接与您的要求没有任何关系。如果我正确理解您的问题，您正在尝试解析 xml 数据并将其插入您的 HTML 表中。您可以为此使用 jQuery。

您应该只创建一个包含所有图像的所有数据的 xml 文件，而不是为每个图像创建一个 xml 文件。这样你只需要发出一个 http 请求。

这是一个例子：

XML

```
<?xml version="1.0"?>
<images>
    <image id="img1">
        <details>
            Here is a bunch of details for image 1.
        </details>
    </image>
    <image id="img2">
        <details>
            Here is a bunch of details for image 2.
        </details>
    </image>
</images> 
```

HTML

```
<table id="table">
    <tr>
        <td>
            <img src="img1.png" alt="img" />
            <div id="img1" class="details">

            </div>
        </td>
        <td>
            <img src="img2.png" alt="img" />
            <div id="img2" class="details">

            </div>
        </td>
    </tr>
</table> 
```

jQuery

```
$(function(){

    // Make an ajax call to the server to get the xml file.
    $.ajax({
        // The URL where the xml file exists.
        url: 'data.xml'
    })
    // Jquery's callback that handles a failed request. I'm just logging the message to the console.
    .fail( function( jqXHR, textStatus){ console.log( textStatus ); } )
    // Jquery's callback that handels success. Here Im executing the insertData() function.
    .done( insertData( ) );

    function insertData(  ){
        // The .done() method is expecting a funciton as it's parameter so we are returning one.
        // .done() executes that function passing the requested data in. 
        // I named it data.
        return function( data ){

            // You can parse the xml data using jquery selection methods.  I'm using find().
            // This gets all the <image> object from our xml.
            var images = $(data).find('image');

            // For each <image> object do the following.
            images.each(function(){

                // Find the id of the <image> object.
                var id = $(this).attr('id');
                // Find the text of the <image> object.
                var text = $(this).find('details').text();

                // I chose to associate the table elements in the html with the xml data via an id attribute.
                // The data in the xml has the same id as the details div in my html.  
                // Here I just select the details div and insert the text that we got from above.
                $( '#'+id ).text( text );
            });
        };
    };
}); 
```

# sql - 有没有办法改变许多表以将默认值添加到公共列名？

> ID：15314510
> 
> 赞同：1
> 
> 时间：2013-03-09T18:44:12.987
> 
> 标签：sql, oracle, oracle11g

我们有一组 45 个表，它们带有一个公共列 { `variety`}。需要为所有此类列设置默认值 { `comedy`}。

这`ALTER TABLE (SCHEMA.TABLE_NAME) MODIFY(VARIETY DEFAULT 'COMEDY')`

会完成它，但我想知道是否有一种方法可以在 Oracle 11g 中创建一个 sql 脚本，它将模式中具有通用列名称的所有表更改为通用默认值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T18:59:30.567

```
DECLARE
    cnt NUMBER;
BEGIN
    FOR x IN (
        SELECT DISTINCT t.table_name 
        FROM user_tables t
            INNER JOIN user_tab_columns c ON c.table_name = t.table_name
    ) LOOP
        EXECUTE IMMEDIATE 'ALTER TABLE (SCHEMA.' || x.table_name || ') MODIFY(VARIETY DEFAULT ''COMEDY'')';
    END LOOP;
END; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-26T06:45:08.950

使用交替引用机制，alter table 语句可以编写如下。

```
'alter table ' || x.table_name || q'[ modify (variety default 'COMEDY')]' 
```

# scala - 斯卡拉地图转换

> ID：15314513
> 
> 赞同：1
> 
> 时间：2013-03-09T18:44:31.993
> 
> 标签：scala, scala-collections, scala-2.10, scala-2.9

有人可以推荐一种功能性的方法来转换下面指定的地图

```
Map("host.config.autoStart.powerInfo[1].startOrder" -> -1,
    "host.config.autoStart.powerInfo[1].startAction" ->  "None",
    "host.config.autoStart.powerInfo[1].key" ->  "vm-XXX",
    "host.config.autoStart.powerInfo[0].key" ->  "vm-YYY",
    "host.config.autoStart.powerInfo[0].startOrder" ->  -1,
    "host.config.autoStart.powerInfo[0].startAction" ->  "None") 
```

至

```
Map("host.config.autoStart.powerInfo" -> Map(
        1 -> Map("startOrder" -> -1,
                "startAction" -> "None",
                "key" -> "vm-639"),
        0 -> Map("startOrder" -> -1,
                "startAction" -> "None",
                "key" -> "vm-641"))) 
```

1.  提取下标之前的内容并将其设为键
2.  提取下标 [x] 之间的数字并将其作为值的键

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T05:29:28.807

单行（长）解决方案：

```
val R = """([^\[]+)\[(\d+)\]\.(.+)""".r
m.map{ case(R(h,i,k),v) => (h,i,k,v) }.groupBy(_._1).mapValues(_.groupBy(_._2).mapValues{ _.map{case(h,i,k,v) => (k,v)}.toMap} )
res1: scala.collection.immutable.Map[String,scala.collection.immutable.Map[String,scala.collection.immutable.Map[String,Any]]] = 
Map(host.config.autoStart.powerInfo -> 
  Map(1 -> Map(startAction -> None, 
               startOrder -> -1, 
               key -> vm-XXX), 
      0 -> Map(key -> vm-YYY, 
      startAction -> None, 
      startOrder -> -1)
)) 
```

或者写它或多或少的可读性：

```
m.map{ case(R(h,i,k),v) => (h,i,k,v) }
 .groupBy(_._1).mapValues{ value =>
   value.groupBy(_._2).mapValues{ _.map{case(h,i,k,v) => (k,v)}.toMap}
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T19:11:14.090

**编辑：在代码中添加了一些注释，以便更容易看到发生了什么**

从我的 REPL 复制：

```
scala> val re = """(.+)\[(\d+)\]\.(.+)""".r // Creates a regex to grab the key values
re: scala.util.matching.Regex = (.+)\[(\d+)\]\.(.+)

scala> val m = Map("host.config.autoStart.powerInfo[1].startOrder" -> -1,"host.config.autoStart.powerInfo[1].startAction" -> "None","host.config.autoStart.powerInfo[1].key" -> "vm-XXX","host.config.autoStart.powerInfo[0].key" -> "vm-YYY","host.config.autoStart.powerInfo[0].startOrder" -> -1,"host.config.autoStart.powerInfo[0].startAction" -> "None")
m: scala.collection.immutable.Map[String,Any] = Map(host.config.autoStart.powerInfo[0].key -> vm-YYY, host.config.autoStart.powerInfo[0].startAction -> None, host.config.autoStart.powerInfo[0].startOrder -> -1, host.config.autoStart.powerInfo[1].startAction -> None, host.config.autoStart.powerInfo[1].startOrder -> -1, host.config.autoStart.powerInfo[1].key -> vm-XXX)

scala> val tempList = m map { // Construct a temporary list of Tuples with all relevant values
     | case (key, value) => key match {
     |    case re(p, i, k) => (p, i, k, value)
     | }}
tempList: scala.collection.immutable.Iterable[(String, String, String, Any)] = List((host.config.autoStart.powerInfo,0,key,vm-YYY), (host.config.autoStart.powerInfo,0,startAction,None), (host.config.autoStart.powerInfo,0,startOrder,-1), (host.config.autoStart.powerInfo,1,startAction,None), (host.config.autoStart.powerInfo,1,startOrder,-1), (host.config.autoStart.powerInfo,1,key,vm-XXX))

scala> val accumulator = Map[String, Map[String, Map[String, Any]]]()
accumulator: scala.collection.immutable.Map[String,Map[String,Map[String,Any]]] = Map()

scala> val result = tempList.foldLeft(accumulator) {
     |  case (acc, e) => { 
     |   val middleMap = acc.getOrElse(e._1, Map[String, Map[String, Any]]())
     |   val innerMap = middleMap.getOrElse(e._2, Map[String, Any]())
     |   acc + (e._1 -> (middleMap + (e._2 -> (innerMap + (e._3 -> e._4)))))
     | }}
result: scala.collection.immutable.Map[String,Map[String,Map[String,Any]]] = Map(host.config.autoStart.powerInfo -> Map(0 -> Map(key -> vm-YYY, startAction -> None, startOrder -> -1), 1 -> Map(startAction -> None, startOrder -> -1, key -> vm-XXX))) 
```

# javascript - 打字稿：无法从另一个模块调用函数

> ID：15314517
> 
> 赞同：0
> 
> 时间：2013-03-09T18:45:36.987
> 
> 标签：javascript, typescript

我目前的项目是一个简单的多人游戏。客户端和服务器都是用 Typescript 编写的。客户端只处理输入并渲染游戏，所有逻辑都在服务器端实现。

服务器代码使用 nodejs 执行，结构如下

*   main.ts 包含一个快速服务器并使用客户端脚本提供 html 文件。此外，它设置了 socket.io，创建了一个新的 Game 实例，并`Player`为每个连接的套接字创建了一个新的实例。

*   game.ts 导出类`Game`和`Player`. `Game`实际上只是所有重要数据的容器。它存储所有玩家的列表和所有游戏对象的列表。`Game`实现`requestSpawn(...)`检查是否可以生成新游戏对象的方法。该类`Player`只是 socket.io 套接字的包装器。它处理传入和传出的消息。如果客户端尝试生成 GameObject，则会将消息发送到服务器并到达存储在`Player`实例中的套接字。然后`Player`实例调用`requestSpawn`以尝试生成所需的`GameObject`.

*   GameObjects.ts 导出接口`GameObject`和该接口的各种实现。

游戏运行如下：

1.  一个人在 html-canvas 内点击
2.  一个新的“REQUESTSPAWN”消息被打包并发送到服务器
3.  `Player`实例接收消息并调用其`requestSpawn`实例`Game`
4.  该`Game`实例在正确的位置创建一个`GameObject`正确类型的 new 并将其添加到`GameObjects`
5.  `GameObject`现在应该更新这个新的。

它不是。以下是相关代码：

游戏.ts

```
import go = module("GameObjects"); 
import util = module("Utilities");

//...

export class Game {
    private players: Player[];
    public gameObjects:go.GameObject[];
    private gameObjectCounter: number;

    constructor() {
        this.players = [];
        this.gameObjectCounter = 0;
        this.gameObjects = [];
        var prev = Date.now();
        var deltaTime = Date.now() - prev;
        setInterval(() =>{ deltaTime = Date.now() - prev; prev = Date.now(); this.update(deltaTime); }, 200);
    }

    broadcast(msg: Message) {
        this.players.forEach((player) => { player.send(msg); });
    }

    requestSpawn(msg:RequestSpawnMessage, clientID:number): bool {
        var pos = new util.Vector2(msg.x, msg.y);        
        var o: go.GameObject;
        switch (msg.tag) {
            case UID.FACTORY:                                        
                o = new go.Factory(pos.clone(), this.players[clientID], this.newGameObject());
            case UID.ROBOT:
                o = new go.Robot(pos.clone(), this.players[clientID], this.newGameObject());
        }
        this.broadcast(new SpawnMessage(msg.tag, o.id, clientID, pos.x, pos.y));
        this.gameObjects.push(o);
        console.log(this.gameObjects);
        o.update(1);
        console.log("tried to update the factory");
        return true;
    }

    update(deltaTime){
        this.gameObjects.forEach((object) =>{object.update(deltaTime); });
    }

    addPlayer(socket: Socket) {        
        var player = new Player(this, socket, this.players.length);
        this.players.push(player);
    }
    newGameObject() : number {
        return this.gameObjectCounter++;
    }
} 
```

游戏对象.ts

```
export import util = module("Utilities");
export import s = module("server");
export import g = module("game");

export interface GameObject{
    tag: g.UID;
    id:number;
    player: g.Player;
    clientId: number;
    pos:util.Vector2;
    getPos():util.Vector2;
    setPos(newPos:util.Vector2);
    // !TODO how to make that const?
    boundingBox: util.Rectangle;
    update(deltaTime:number);
}

export class Factory implements GameObject {
    tag: g.UID;
    id: number;
    player: g.Player;
    clientId: number;
    server: s.Server;
    //variables for handling the delay between spawning robots
    private current_time: number;
    public delay: number;
    boundingBox: util.Rectangle;

    public static dimensions = new util.Vector2(30, 30);
    constructor(pos: util.Vector2, player:g.Player, id: number) {
        this.pos = pos;
        this.tag = g.UID.FACTORY;
        this.player = player;
        this.clientId = this.player.getID();
        this.current_time = 0;
        this.delay = 1;
        this.id = id;
        this.boundingBox = new util.Rectangle(pos, Factory.dimensions.x, Factory.dimensions.y);
        console.log("just created a factory");
        //this.update(1);
    }

    pos: util.Vector2;
    getPos() { return this.pos; }
    setPos(pos: util.Vector2) { this.pos = pos; }

    public once = true;
    //check if it's time to create a new robot
    public update(deltaTime: number) {
        console.log("updating a factory");

        //this code will produce a robot just once, this is handy for development, since there's not so much waiting time
        if (this.once) { this.player.requestSpawn(g.UID.ROBOT, this.pos.x, this.pos.y); console.log("just spawned a robot"); }
        this.once = false;
        /*this.current_time += deltaTime/1000;
        if (this.current_time > this.delay*(Factory.count+1)/(Mine.count+1)) {
            this.current_time = 0;
            this.spawnRobot();
        }*/
    }
}

//this will be the fighting robot meant to destroy enemy factories
export class Robot implements GameObject{
    tag: g.UID;
    id: number;
    player:g.Player;
    clientId: number;
    game: g.Game;
    boundingBox: util.Rectangle;
    // ! TODO constants should have capital letters.
    public static radius = 15;
    constructor(pos:util.Vector2,player:g.Player,id:number){ 
        this.tag = g.UID.ROBOT;
        this.player=player;
        this.clientId = this.player.getID();
        this.boundingBox = new util.Rectangle(pos, Robot.radius, Robot.radius);
    }

    pos:util.Vector2;
    getPos(){return this.pos;}
    setPos(pos:util.Vector2){this.pos=pos;}

    //now the robot is moved by keyboard input but soon it will check the gameObjects array and search for the closest enemy,
    //in order to attack it
    public update(deltaTime: number) {

    }
} 
```

现在第一次调用工厂实例的更新方法会产生一个机器人，然后工厂“休眠”。机器人在他们的更新方法中什么都不做。

我想引导您关注两行代码： - 在`requestSpawn`方法中，`GameObject`立即使用 deltaTime=1 更新

这意味着在生成工厂之后，也应该直接生成机器人。但这不会发生。我`console.log`在方法中添加了一个调用`requestSpawn`。它成功打印了“刚刚尝试更新工厂”，但没有任何反应。所以我认为更新方法无法正常工作并在`console.log`那里添加了一个调用。这是方法的第一行，`Factory's` `update`应该打印“更新工厂”。但这永远不会发生。

我真的很困惑。该方法应该被调用，但它不是。虽然它被宣布为公开，但我认为这个问题可能与访问权限有关。所以这是第二行代码，我想指出： - 在工厂的构造函数中，我已经注释掉了对`this.update(1)`.

我认为至少自己的构造函数应该能够调用更新方法。它的确是。当这一行没有被注释掉时，更新被调用一次。然后工厂尝试生成一个新机器人并调用`requestSpawn()`其实例`Game`。结果，一个新的机器人被创建`SpawnMessage`出来，并提供给所有的客户。机器人甚至出现在客户端的浏览器选项卡中。

因此很明显该方法没有被调用。一切正常，消息解析、工厂更新和机器人创建都是正确的。唯一的问题是所有从内部更新的调用`Game`都没有执行。什么地方出了错 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T10:16:30.047

您发布了很多代码，可能还有其他问题，但至少有一个问题是您缺少`break`switch 语句中的...

```
switch (msg.tag) {
        case UID.FACTORY:                                        
            o = new go.Factory(pos.clone(), this.players[clientID], this.newGameObject());
        case UID.ROBOT:
            o = new go.Robot(pos.clone(), this.players[clientID], this.newGameObject());
} 
```

...因此总是创建一个`Robot`，它在其`update()`方法中没有任何痕迹。（如果您尝试创建 a ，您会成功，但随后会立即通过将 new 分配给相同的 var 来`Factory`覆盖它）。`Robot``o`

考虑这个简化的例子：

```
interface GameObject {
    update():void;
}

class Factory implements GameObject {
    update():void {
        console.log("Factory");
    }
}

class Robot implements GameObject {
    update():void {
        console.log("Robot");
    }
}

class Test {

    private o:GameObject;

    constructor(index:number){
        switch(index){
            case 1:
                this.o = new Factory();
            case 2:
                this.o = new Robot();
        }
        this.o.update();
    }
}

class BreakTest {

    private o:GameObject;

    constructor(index:number){
        switch(index){
            case 1:
                this.o = new Factory();
                break;
            case 2:
                this.o = new Robot();
                break; // Not necessary in final case, but good form IMO.
        }
        this.o.update();
    }
}

var t = new Test(1);       // Traces 'Robot'
var tt = new Test(2);      // Traces 'Robot'

var b = new BreakTest(1);  // Traces 'Factory'
var bt = new BreakTest(2); // Traces 'Robot' 
```

（[参考](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/switch)）

# git - Git服务器挂钩：获取被推送文件的内容？

> ID：15314527
> 
> 赞同：10
> 
> 时间：2013-03-09T18:46:52.487
> 
> 标签：git, githooks

我正在尝试在我的团队中执行一些编码规则。为此，我编写了许多客户端钩子，它们可以正常工作，但现在我希望在开发人员将他们的修改推送到中央存储库时运行相同的检查。但它们不起作用。

这是我想做的事情：

我想逐行遍历推送的文件，检查是否违反编码约定，如果发现任何，拒绝推送，同时显示行号+违规。

在我的预提交客户端钩子中，我可以通过调用`git diff --cached --name-status --diff-filter=AM`来获取已修改文件的列表，并`git cat-file -p :filename`为在第一次调用中检索到的每个文件来获取文件的整个文本。

当我尝试在服务器端`update`挂钩中执行相同操作时，我得到一个空字符串（用于文件列表）。

我还尝试调用`git show --pretty="format:" --name-only newrev`（其中 newrev 是我作为更新挂钩的参数获得的 SHA `git diff-tree -r --name-only --no-commit-id <tree-ish>`，以及我在网上找到的其他一些东西，但我无法清楚地了解正在发生的事情以及我应该调用什么.

你能帮助我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-09T18:58:12.870

您必须对脚本进行更改，因为服务器端没有工作副本，并且`git diff --cached`使用暂存区域（或索引），而当服务器收到推送时您的索引为空。

只需使用`git diff --name-status <sha-old> <sha-new>`和`sha-old`作为`sha-new`参数发送到钩子的引用，您将获得与`git diff --cached`在提交之前运行相同的输出。

至于检查文件内容，您可以使用`git show sha-new:/path/to/file`

# php - 创建多维数组，

> ID：15314531
> 
> 赞同：0
> 
> 时间：2013-03-09T18:47:06.927
> 
> 标签：php

我有这样的代码

```
$assoc = ['name','lastname','pesel'];
          $inputs = ['a', 'a', 'a', 'a', 'b', 'b', 'b', 'b',];
          $counter = 0;
          $internalcounter = 0;
          $zero = 0;
          $content = array();
          while ($counter < sizeof($inputs))
          {
              if($internalcounter == sizeof($assoc))
              {
                  $counter++;
                  $internalcounter = 0;

              }
              else
              {
                  array_push($content, $inputs[$counter]);
                  $counter++;
                  $internalcounter++;
              }

          }
          var_dump($content); 
```

它创建了看起来的数组

```
`array(6) { [0] => string(1) "a" [1] => string(1) "a" [2] => string(1) "a" [3] => string(1) "b" [4] => string(1) "b" [5] => string(1) "b" }` 
```

但我想创建多维数组

```
Array ( [0] => Array ( [0] => "a"  [1] => "a"  [2] => "a"  ) [1] => Array ( [0] => "b" [1] => "b" [2] => "b" )  ) 
```

如何在 $content 中添加下一个数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T20:07:41.580

替代解决方案：

```
$assoc = ['name', 'lastname', 'pesel'];
$inputs = ['a', 'a', 'a', 'a', 'b', 'b', 'b', 'b'];
$content = array();
$i = 0;
foreach ($inputs as $key => $val) {
    $key += 1;
    if (($key < (sizeof($inputs)))) {
        if (($key % (sizeof($assoc) + 1) == 0)) {
            $content[++$i] = array();
        } else {
            $content[$i][] = $val;
        }
    }
}
var_dump($content); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T19:04:29.970

```
<?php

$assoc = ['name','lastname','pesel'];
$inputs = ['a', 'a', 'a', 'a', 'b', 'b', 'b', 'b'];
$counter = 0;
$internalcounter = 0;
$zero = 0;
$arrayIndex = 0;
$content = array();
$content[$arrayIndex] = array();

while ($counter < sizeof($inputs))
{
    if ($internalcounter == sizeof($assoc))
    {
        $counter++;
        $internalcounter = 0;

        if ($counter < sizeof($inputs))
            $content[++$arrayIndex] = array();
    }
    else
    {
        array_push($content[$arrayIndex], $inputs[$counter]);
        $counter++;
        $internalcounter++;
    }
}
var_dump($content); 
```

# iphone - 从 WiFi 切换到 3G 时出现网络错误

> ID：15314540
> 
> 赞同：0
> 
> 时间：2013-03-09T18:48:03.453
> 
> 标签：iphone, ios, wifi, 3g, reachability

我的 iPhone 应用程序是基于网络的。它在 WiFi 和 3G 下运行时运行良好但问题是当我在 WiFi 上运行应用程序并将其最小化，然后关闭 WiFi 并切换到 3G 时，它显示没有网络。

在用户的情况下 - 当他们在 WiFi 下使用应用程序并出去时它无法连接到 3G 网络。我正在使用苹果的可达性类来检查网络连接任何人请告诉任何解决方案

如果连接丢失或从 WiFi 切换到 3G，我是否需要重新连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T21:49:36.003

您可以使用`connection:didFailWithError:`并在您的方法中实施以重新连接您的用户。

像这样

```
- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
    [self reconnect];
}

- (void)reconnect
{
   //reconnect your user
} 
```

我希望它可以帮助你！;)

# json - Titanium 中的 JSON 解析问题

> ID：15314542
> 
> 赞同：0
> 
> 时间：2013-03-09T18:48:12.303
> 
> 标签：json, parsing, titanium, tableview, titanium-mobile

我正在处理简单的任务，从 JSON 格式的 url 读取数据并在表中显示这些字段

我写的代码就像

```
var Win = Titanium.UI.currentWindow;  
//SEARCH BAR
var xhr = Titanium.Network.createHTTPClient();

tableData=[];
Win.open();
xhr.onload = function() {
    alert('res'+this.responseData);
     var json = this.responseText;
    var response = JSON.parse(json);
    //-- Mail was sent
    alert('respoinse length : '+response.result.length);
   tableData=[];
    for (i = 0; i < response.result.length; i++) {
            sresult = response.result[i];
            //alert('City'+ sresult.city);

            var row = Ti.UI.createTableViewRow({
                rowID: i,
                color:'#222',

    left:70, top:44,
    width:360,

                text:sresult.County
            });
            tableData.push(row);
        }

      table.setData(tableData);  

};

var table = Titanium.UI.createTableView({

        top:60,
        data:tableData

   });
    Win.add(table);
//xhr.open('GET', 'https://www.clia.livestockid.ca/CLTS/public/division/CCIA/en/splash_logo.jpg');
xhr.open('GET', 'http://gomashup.com/json.php?fds=geo/usa/zipcode/city/STERLING');
xhr.send(); 
```

我在 Titanium 上运行它——显示 JSON 数据的第一个警报。之后它没有得到第二个不确定的警报......为什么它不进入下一步......请帮助我解决代码中的任何错误或解析问题。

谢谢德文达

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T18:57:45.053

您提供的 url 返回的“JSON” ( `http://gomashup.com/json.php?fds=geo/usa/zipcode/city/STERLING`) 无效。（[http://jsonlint.com](http://jsonlint.com)是检查这类事情的有用资源。）它以 a 开头并以 a`(`结尾`)`，如下所示：

```
({
    "result":[
    {
        "Longitude" : "-071.939375",
        "Zipcode" : "01564",
        "ZipClass" : "STANDARD",
        "County" : "WORCESTER",
        "City" : "STERLING",
        "State" : "MA",
        "Latitude" : "+42.366765"
    }
]}
) 
```

*（我已经省略了很多。）*

[JSON 文档](http://json.org)`[`以or开头，以对应的or`{`结尾。`]``}`

`(`如果没有开头和结尾的，上述内容将是有效的`)`，因此您始终可以在解析之前删除它们，但真正的答案是修复提要。

# python - 如何在 Tkinter GUI 处于活动状态时运行我的 python 脚本？

> ID：15314546
> 
> 赞同：0
> 
> 时间：2013-03-09T18:48:30.140
> 
> 标签：python, python-3.x, tkinter

我正在尝试创建一个 GUI。我需要在 GUI 处于活动状态时执行另一个 python 脚本。（GUI 应该处理来自此执行的数据）因为我使用 Tkinter 创建了 GUI，所以我无法在 python 终端中执行另一个文件。

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T19:55:57.513

您不需要启动另一个解释器。

您可以简单地在单独的线程或进程中执行来自其他脚本的代码。

* * *

## 重构你的“其他”脚本

您希望您的“其他”脚本可以从另一个脚本调用。为此，您只需要一个函数来执行您的脚本曾经执行的操作。

```
#other.py

def main(arg1, arg2, arg3):
    do_stuff(arg1, arg2)
    more_stuff(arg2, arg3)
    other_stuff(arg1, arg3) 
    finish_stuff(arg1, arg2, arg3) 
```

## 在另一个线程中执行代码

在您的主脚本中，当您想要执行代码时`other.py`，请启动一个新线程：

```
 #script.py

 from threading import Thread

 from other import main

 thread = Thread(target = main)
 thread.start() # This code will execute in parallel to the current code 
```

要检查您的工作是否已完成，请使用`thread.is_alive()`. 要阻止直到完成，请使用`thread.join()`

# java - Java Scanner Csv useDelimiter

> ID：15314547
> 
> 赞同：0
> 
> 时间：2013-03-09T18:48:31.037
> 
> 标签：java, csv

我找不到解决此问题的正确方法：

我有一个 .csv 文件，其中包含以逗号分隔的最后一个值列表。当我尝试将这些值分配给变量时，第一行的最后一个值包含第二行的第一个值。我试过用 ",\n*" 但它不起作用。

提前感谢您的帮助。

代码：

```
Scanner inputStream = new Scanner(file).useDelimiter(",\\n*"); 
```

CSV 文件：

> 汤姆森，阿尔弗雷德，纽约，00192838，美国
> 
> 文森特，朗布尔，PA，0033928283，法国

我得到什么：

> 变量 5 = 美国文森特

我想得到什么：

> 变量 5 = 美国
> 
> 变量 6 = 文森特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T18:54:55.727

只需使用 BufferedReader 逐行读取文件，然后在主循环内使用 StringTokenizer 对 BufferedReader readLine 方法获取的单行进行标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T20:08:51.887

在您的模式中，您需要逗号或行尾组合。这里最好的事情是有一个交替的非捕获组。如果您不必考虑 CRLF 组合，则字符类可能会起作用，但这并不总是一个好的假设。

这是一个例子。我正在使用 Clojure 来驱动 Java API，如果您花一点时间看一下它，您应该能够了解要点，即使您不熟悉 Clojure。分号后面的位是注释。

```
; define a function that will return a scanner on user input 
; with a given pattern
user=> (defn scanner [input delimiter] 
           (-> (java.util.Scanner. input) (.useDelimiter delimiter)))
#'user/scanner

; define the input
user=> (def input "Thomson,Alfred,NY,00192838,USA\nVincent,Ramblè,PA,0033928283,FRANCE")
#'user/input

; create the scanner 
;     (:?) is a non capturing group
;     the | in the middle tells the group to look for a or b
;     first alternative is a comma 
;     second alternative is a newline followed by 0 or 1 
;     carriage returns.
;     The javadoc for the java.util.Pattern class really helps
user=> (def myscanner (scanner input "(:?,|\n\r?)"))
#'user/myscanner

; quick/dirty way to call next on the scanner 10 times and print 
; the result of each call
user=> (dotimes [n 10] (println (.next myscanner)))
Thomson
Alfred
NY
00192838
USA
Vincent
Ramblè
PA
0033928283
FRANCE 
```

但是，如果你真的想做 CSV，这个问题已经解决了很多次了。有很多库可以处理 CSV 的一些古怪部分。例如[http://commons.apache.org/proper/commons-csv](http://commons.apache.org/proper/commons-csv)（这只是一个例子——你应该在使用前评估它）。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T18:57:48.460

请删除 *. 以下代码似乎有效

```
 String testpat = "abc,de\n\nasdfs,fffs,\nslsll\nss";
    Scanner scanner = new Scanner(testpat).useDelimiter(",\\n"); 
```

注意模式 \n 不是 \n*

# java - Android：EditText 的默认文本大小是多少？

> ID：15314549
> 
> 赞同：12
> 
> 时间：2013-03-09T18:48:53.713
> 
> 标签：java, android, android-layout, android-edittext, text-size

简单的问题：我想知道 EditText 的默认文本大小是多少。有人知道吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-09T18:51:39.807

尝试

```
mEditText.getTextSize() 
```

它将以 px 返回以在 sp 上转换

```
float scaledDensity = context.getResources().getDisplayMetrics().scaledDensity;
 sp =  px/scaledDensity; 
```

# android - 在两个固定片段之间切换

> ID：15314550
> 
> 赞同：2
> 
> 时间：2013-03-09T18:48:54.667
> 
> 标签：android, fragment

我有这个活动，我运行一个收集一系列数据的异步任务。该数据可以用多种方式表示，为了简单起见，假设有两种方式。我希望用户能够在这两种表示（列表视图和图形视图）之间切换。

所以我用我的 ListFragment 和我的 GraphicFragment 创建了一个 FragmentActivity。

你如何在这两者之间切换，以便用户可以来回切换？我尝试使用替换，但是前一个片段被破坏了，这不是我感兴趣的，因为它的引用具有我的 Activity 传递的数据。（即我不想在每次用户在视图之间切换时重新创建片段）。

我也尝试隐藏和显示，但我无法让它工作，其中一个片段没有显示。

另外，当我旋转时，我猜碎片会被破坏，因为我在尝试访问它们时得到了一个空指针异常。

```
 @Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main_layout);

    pBar = (ProgressBar) findViewById(R.id.analyzingProgress);

    // However, if we're being restored from a previous state, then don't
    // create the fragment again (please)
    if (savedInstanceState == null) {

        firstFragment = new DirListFragment();
        secondFragment = new GraphViewFragment();

                         getSupportFragmentManager().beginTransaction().add(R.id.fragment_container, secondFragment).commit();

        fragments= new ArrayList<IFragment>();
        fragments.add(firstFragment);
        fragments.add(secondFragment);
    }
}

    @Override
public boolean onOptionsItemSelected(MenuItem item) {
    if(item.getItemId() == R.id.listView){

        FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();

        /*transaction.hide(secondFragment);         
        transaction.show(firstFragment);*/
        transaction.replace(R.id.fragment_container, firstFragment);
        transaction.addToBackStack(null);

        transaction.commit();
    }
    else if(item.getItemId() == R.id.graph){
        FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();
        /*transaction.hide(firstFragment);
        transaction.show(secondFragment);*/
        transaction.replace(R.id.fragment_container, secondFragment);
        transaction.addToBackStack(null);

        transaction.commit();
    }
    return true;
} 
```

当我尝试访问片段字段以更新其数据时，问题就来了：

```
 for(IMyFragment frag: fragments){
        frag.updateData(data);
    } 
```

旋转屏幕后出现 NullPointerException。

此外，在切换片段时，它们的数据不会更新（即我从列表片段开始，它显示正确的数据，然后切换到图形，没有数据显示，切换回列表，再次没有数据。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T21:12:47.040

如果在使用时字段为空`setRetainInstance(true);`，那么您正在您的活动中重新创建它们（片段）。确保你在你的活动中设置了一些东西，所以`onSaveInstanceState()`in不会为空，它甚至可以是一个空包或无用的变量，例如：`onCreate()``savedInstanceState`

```
@Override
public void onSaveInstanceState(Bundle outstate){
    super.onSaveInstanceState(outstate);
    outstate.putBoolean("stateChanged", true);
} 
```

只需确保在添加参数之前调用 super 即可。

另一方面，我个人从未将我的片段存储在数组中。我在我的活动中使用 a`FrameLayout`作为片段容器，就像你一样，如果我需要更新我刚刚调用的东西：`getSupportFragmentManager().findFragmentById(R.id.fragment_container).setWhatINeed();`这样我总是得到可见的片段。

让我知道更新的进展情况，我会用我能提供的任何信息更新这篇文章。

# android - 如何定位 Android 文本选择菜单

> ID：15314557
> 
> 赞同：2
> 
> 时间：2013-03-09T18:50:13.507
> 
> 标签：android

我在 main.xml 文件的线性布局中放置了一些 EditText 控件。每当您单击以选择文本时，Android 默认文本选择菜单会出现在顶部并替换布局中的内容。如何让文本选择菜单仍然出现，但不影响视图中元素的布局？具体来说，我想控制文本选择菜单出现在屏幕上的位置。

![在此处输入图像描述](../Images/26e03696cd4ddaf01edb24c9b4ab06f1.png)

```
 <?xml version="1.0" encoding="utf-8"?>
    <FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >
      <EditText

            android:inputType="textFilter|textMultiLine"
            android:textSize="10sp" />
        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"    
        android:paddingTop="0dp"
        android:paddingBottom="0dp"
        android:paddingLeft="8dp"
        android:paddingRight="8dp"
            android:orientation="horizontal" >
        <Button
                android:id="@+id/button2"
        android:paddingBottom="8dp"      
                android:layout_width="wrap_content"
            android:layout_height="26sp"      
         android:textSize="8sp"      
                android:text="save"/>
      </LinearLayout>
    </LinearLayout> 
```

# java - 具有 onItemClick 位置的 ListView

> ID：15314560
> 
> 赞同：3
> 
> 时间：2013-03-09T18:50:53.880
> 
> 标签：java, android, listview

我有一个带有 ListView 的应用程序，在任何行上单击它都会弹出一些不同的东西。（使用 PauseDialog）。并且任何行中的标题都在“array.xml”中，并且将在 PauseDialog 中弹出的文本在 java 代码中。问题是我需要向 ListView 添加很多行，我想知道是否有比我做的更有效的方法。array.xml 的示例：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
        <array name="Row_List">  
            <item>row1</item>
            <item>row2</item>
            <item>row3</item>
            <item>row4</item>
    </array>   
</resources> 
```

（只是更多的行......）java代码：

```
public class MainActivity extends Activity implements OnItemClickListener {
    ListView list;
    ArrayAdapter<String> adaptr;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        list = (ListView) findViewById(R.id.listView1);
        adaptr = new ArrayAdapter<String>(this,
                 android.R.layout.simple_list_item_1
                         , getResources().getStringArray(R.array.Row_List));
            View header = getLayoutInflater().inflate(R.layout.header, null);
        list.addHeaderView(header);
        list.setAdapter(adaptr);
        list.setOnItemClickListener(this);
        list.setFastScrollEnabled(true);
    }
    public void onItemClick(AdapterView<?> adapterView, View view, int position, long id) {
        Dialog dialog1 = new Dialog(this, R.style.PauseDialog);
        dialog1.setContentView(R.layout.dialog1);
        TextView text = (TextView) dialog1.findViewById(R.id.tv1);
        dialog1.setTitle(R.string.Title);
        dialog1.getWindow().setBackgroundDrawable(new ColorDrawable(0));
        switch(position) {
        case 0:
            String url = "My-Site.com";
            Intent i = new Intent(Intent.ACTION_VIEW);
            i.setData(Uri.parse(url));
            startActivity(i);
            break;
        case 1:
            text.setText("Description of Row1");
            dialog1.show();
            break;
        case 2:
            text.setText("Description of Row2");
            dialog1.show();
            break;
        case 3:
            text.setText("Description of Row3");
            dialog1.show();
            break;
        case 4:
            text.setText("Description of Row4");
            dialog1.show();
            break;
        }
    }
} 
```

那么有更好的方法将描述放入对话框中吗？（我想是否有办法将所有描述都放在 xml 文件中而不是代码中）谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T19:36:41.220

您可以将描述存储为`string-array`in `arrays.xml`：

```
<string-array name="desciptions">
    <item>item 0 descript</item>
    <item>item 1 descript</item>
    <item>item 2 descript</item>
</string-array> 
```

..定义一个数组MainActivity：

```
static String[] desciptions = null; 
```

.. 在 onCreate() 中初始化它：

```
if (null==desciptions) desciptions
  = getResources().getStringArray(R.array.descriptions); 
```

..并用这样的东西替换你的switch语句，考虑到你的'0'特殊情况：

```
if (0==position) {
    String url = "My-Site.com";
    Intent i = new Intent(Intent.ACTION_VIEW);
    i.setData(Uri.parse(url));
    startActivity(i);
} else {
    text.setText(descriptions[position]);
    dialog.show();
} 
```

请记住，您需要为您的特殊`0`情况留出余地，以保持索引对齐，例如使用`text.setText(descriptions[position-1]);`或使用空的 item 0 描述。

# r - 使用 Vennerable 的并排维恩图

> ID：15314562
> 
> 赞同：4
> 
> 时间：2013-03-09T18:51:04.783
> 
> 标签：r, r-grid, venn-diagram

我试图将两个维恩图放在一个图中，即我在一开始就使用 par(mfrow=c(1,2)) 。但是，当我使用包`Venn()`中的函数时`Vennerable`：

```
VennCompare = Venn(SetNames = c("A", "B", "C"), Weight = c(0, 38, 1, 0, 1, 80, 0, 14))
pdf(file="Venn.pdf", width=12, height=6)
par(mfrow=c(1,2))
plot(VennCompare, doWeights=FALSE)
plot(VennCompare, doWeights=TRUE, show = list(SetLabels = TRUE, Faces = FALSE))
dev.off() 
```

生成的 pdf 文件包含 2 页，每页都有一个维恩图。

如何将这两个图表放在一个页面中（即并排）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T20:09:52.143

正如评论中已经讨论的那样，Vennerable 使用网格图形并修复了包函数内的网格参数。你可能应该向包维护者询问他们是否可以在他们的包中添加这种功能，但与此同时，我为你提供了一个 Sketchof 一个黑客，它允许你做你想做的事：

第一个命令允许您编辑调用的函数，该函数`makevp.eqsc`似乎包含网格定义：

```
trace("makevp.eqsc",edit=TRUE) 
```

原始代码如下所示：

```
function (xrange, yrange) 
{
    pushViewport(plotViewport(name = "Vennmar", c(1, 1, 1, 1)))
    pushViewport(viewport(name = "Vennlay", layout = grid.layout(1, 
        1, widths = diff(xrange), heights = diff(yrange), respect = TRUE)))
    pushViewport(viewport(name = "Vennvp", layout.pos.row = 1, 
        layout.pos.col = 1, xscale = xrange, yscale = yrange))
} 
```

最相关的部分是`grid.layout`，它告诉您要绘制什么样的网格。layout.pos.row 和 layout.pos.col 也很重要，它们告诉我们在哪个位置绘制。例如像这样更改代码：

```
function (xrange, yrange) 
{
    pushViewport(plotViewport(name = "Vennmar", c(1, 1, 1, 1)))
    pushViewport(viewport(name = "Vennlay", layout = grid.layout(2, 
        1, widths = diff(xrange), heights = diff(yrange), respect = TRUE)))
    pushViewport(viewport(name = "Vennvp", layout.pos.row = number, 
        layout.pos.col = 1, xscale = xrange, yscale = yrange))
} 
```

现在您将得到两个堆叠图，如下所示：

```
number<-1 #change the argument inside of makevp.eqsc
plot(VennCompare, doWeights=FALSE)
number<-2
plot(VennCompare, doWeights=TRUE, 
  show = list(SetLabels = TRUE, Faces = FALSE),add=TRUE) #note add=TRUE 
```

这看起来不太好，但是通过修改`makevp.eqsc`您可能会获得更好的结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-09T20:37:41.067

我无法安装该软件包，但在这里可能有帮助的一个技巧是使用 grid.grab 将绘图捕获到可以放置在其他地方的 grob 中，

```
library(grid)

myplot <- function(){

  pushViewport(viewport(x=0.5,width=1, just=0.5))
  grid.rect(gp=gpar(fill=grey(runif(1, 0.2, 0.8))))
  grid.points()
  popViewport()

}

p1 <- grid.grabExpr(myplot())
p2 <- grid.grabExpr(myplot())

library(gridExtra)

grid.arrange(p1, p2, ncol=2) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-13T05:24:59.590

试试这个：

```
v <- Venn(n=2)
plot(v)
grid.text("Title", vp = viewport(x=0.5, y=.9, w=unit(1, "npc"), h=unit(1, "npc"))) 
```

# java - 在 main 方法中访问变量

> ID：15314565
> 
> 赞同：0
> 
> 时间：2013-03-09T18:51:23.417
> 
> 标签：java

我对 Java 非常陌生，并且正在编写这个程序来打乱单词并修复乱序单词。以下是我的程序。在我调用之后`mix()`，我希望能够将 word 的输出分配给 main 中的团队数组。

出于某种原因，我可以称它为`mix()`有效，但我无法访问 shuffle 函数中的单词。由于我在`main`其中并且所有这些函数都在其中`main`，我认为我可以访问这些变量。有什么想法我在这里想念的吗？

```
import java.util.Scanner;
import java.io.*;
import java.util.*;

public class Project2
{

    public static void main(String[] args) 
    {

                System.out.println("Select an item from below: \n");
                System.out.println("(1) Mix");
                System.out.println("(2) Solve");
                System.out.println("(3) Quit");

                int input;
                Scanner scan= new Scanner(System.in);
                input = scan.nextInt();

                //System.out.println(input);  
                if(input==1) {
                    mix();
                    System.out.println(word);
                    char team[]=word.toCharArray();
                    for(int i=0;i<team.length;i++){
                        System.out.println("Data at ["+i+"]="+team[i]);
                    }
                }
                else{
                    System.out.println("this is exit");
                    } 
        }

        static void mix()
         {
        String [] lines=new String[1000];//Enough lines.
        int counter=0;
        try{
            File file = new File("input.txt");//The path of the File
            FileReader fileReader1 = new FileReader(file);
            BufferedReader buffer = new BufferedReader(fileReader1);
            boolean flag=true;
            while(true){
                try{
                    lines[counter]=buffer.readLine();//Store a line in the array.
                    if(lines[counter]==null){//If there isn't any more lines.
                        buffer.close();
                        fileReader1.close();
                        break;//Stop reading and close the readers.

                    }
                    //number of lines in the file
                    //lines is the array that holds the line info
                    counter++;

                    }catch(Exception ex){
                        break;
                    }
            }

            }catch(FileNotFoundException ex){
                System.out.println("File not found.");
            }catch(IOException ex){
                System.out.println("Exception ocurred.");
            }

                int pick;
                 Random rand = new Random();
                 pick = rand.nextInt(counter ) + 0;

                System.out.println(lines[pick]);
                ///scramble the word

                shuffle(lines[pick]);

    }

    static void shuffle(String input){
        List<Character> characters = new ArrayList<Character>();
        for(char c:input.toCharArray()){
            characters.add(c);
        }

        StringBuilder output = new StringBuilder(input.length());
        while(characters.size()!=0){
            int randPicker = (int)(Math.random()*characters.size());
            output.append(characters.remove(randPicker));
        }

        String word=output.toString();

    }

  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T18:56:28.390

使用 return 语句从 shuffle() 方法返回字符串值：

```
static String shuffle(String input) {
     // . . .
     return output.toString();
} 
```

...然后混合使用它：

```
String word = shuffle(lines[pick]); 
```

但最好在编程之前[阅读基本的 java 教程。](http://docs.oracle.com/javase/tutorial/java/javaOO/returnvalue.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T19:14:32.467

在 Java 中，变量在初始化它们的方法之外是看不到的。例如，如果我`int foo = 3;`在 main 中声明，然后尝试`foo`从另一个方法访问，它将不起作用。从另一种方法来看，`foo`根本不存在！

在方法之间传递变量的方法是使用`return <variable>`语句。一旦程序到达一条`return`语句，该方法将退出，并且`return`（可能`foo`）之后的值将返回给调用者方法。但是，当您声明该方法时，您必须说明该方法返回一个变量（并说明类型是什么）（就像您需要说明`void`该方法何时不返回任何内容一样！）。

```
public static void main(String[] args){
     int foo = 2;
     double(foo); //This will double foo, but the new doubled value will not be accessible
     int twoFoo = double(foo); //Now the doubled value of foo is returned and assigned to the variable twoFoo
}

private static int double(int foo){//Notice the 'int' after 'static'. This tells the program that method double returns an int. 
     //Also, even though this variable is named foo, it is not the same foo
     return foo*2;
} 
```

或者，您可以使用实例变量来获得类中所有方法都可以访问的变量，但如果您是 Java 新手，则在开始学习面向对象编程的基础知识之前，您可能应该避免使用这些变量。

希望这可以帮助！-英国骑士

# c# - 在另一个文件中使用一个文件的方法

> ID：15314571
> 
> 赞同：1
> 
> 时间：2013-03-09T18:52:04.540
> 
> 标签：c#, oop, namespaces

我是 C# 的初学者。我在 File1.xaml.cs 中写了一些函数

我有另一个测试器文件 Test.xaml.cs，我需要在其中测试我在 File1.xaml.cs 中编写的函数。

我怎样才能做到这一点 ？这两个文件都在同一个命名空间下。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T19:03:22.387

您必须创建第二类的实例。比你可以调用它的方法。或者您将第二类中的方法公开。

```
public class Class1
{
   public void Function()
   { ... }
}

public class Class2
{
   public void AnotherFunction()
   {
      Class1 class1 = new Class1();
      class1.Function();
   }
} 
```

行。假设您的解决方案“Project1”和“Project2”中有 2 个项目。在 Project1 中，您有一个名为 Project1Class 的类，其中包含要在 Project2 中使用的方法“Foo”。首先，您必须在 Project2 中添加对 Project1 的引用（右键单击 References->Add Reference -> Solution->Project1）。在 Project2 中，您有一个类 Project2Class，其中包含一个方法“AccessProject1Class”。此类的代码如下所示：

```
using Project1;

namespace Project2
{
    public class Project2Class
    {
        public void AccessProject1Class()
        {
            Project1Class project1Class = new Project1Class();
            project1Class.Foo();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T18:58:36.287

File.xaml.cs 中的类应具有内部或公共访问修饰符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T19:01:11.003

声明您要使用的功能作为公共或公共共享希望这会有所帮助

# vb.net - 从传递到文本框的数据集中过滤数据

> ID：15314578
> 
> 赞同：0
> 
> 时间：2013-03-09T18:52:59.167
> 
> 标签：vb.net, filter, dataset, cell

我正在遍历 vb net 中的 datagridview 中的列并将值传递给文本框。我需要能够过滤掉 Cell(4) 中的电子邮件，这样就没有任何单个客户的重复电子邮件。

我不知道如何使用数据集来做到这一点。

```
EmailTableAdapter.Fill(Me.EmailDataset.Email)

  Dim r As String = String.Empty
        For i As Integer = 0 To Me.EmailDataGridView.RowCount - 1
            r = r & EmailDataGridView.Rows(i).Cells(7).Value.ToString & "  -  " & EmailDataGridView.Rows(i).Cells(4).Value.ToString & vbNewLine
        Next
        TextBox2.Text = (r) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T22:49:02.153

在 Cells(4) 中过滤掉具有重复值的行的一种方法是遍历网格行，使用 Cells(4) 值作为键将项目填充到字典中，然后遍历字典以构建您的“r”细绳。这样的解决方案看起来像这样：

```
EmailTableAdapter.Fill(Me.EmailDataset.Email)

Dim EmailDict As New Dictionary(Of String, String)
For i As Integer = 0 To Me.EmailDataGridView.RowCount - 1
    If Not EmailDict.ContainsKey(EmailDataGridView.Rows(i).Cells(4).Value.ToString) Then
        EmailDict.Add(EmailDataGridView.Rows(i).Cells(4).Value.ToString, EmailDataGridView.Rows(i).Cells(7).Value.ToString)
    End If
Next

Dim EmailPair As KeyValuePair(Of String, String)
Dim r As String = String.Empty
For Each EmailPair In EmailDict
    r &= EmailPair.Value & "  -  " & EmailPair.Key & vbNewLine
Next

TextBox2.Text = (r) 
```

# java - 构建使用三星 S Pen SDK 2.3 的非常基本的应用程序时出现问题

> ID：15314579
> 
> 赞同：2
> 
> 时间：2013-03-09T18:53:08.237
> 
> 标签：java, android

我在 Android 方面没有经验，我正在尝试使用三星 S-Pen SDK 2.3 创建一个非常简单的应用程序。我正在关注三星开发者网站上的[本教程](http://developer.samsung.com/android/technical-docs/S-Pen-SDK-2-2-5-Tutorial)。当我实现最基本的示例时，我收到以下错误。

```
WARNING: Could not load libjni_secime natives
No implementation found for native Lcom/bst/HwBeautify/BeautifyNative;.nativeCBInitEngine:()I
threadid=11: thread exiting with uncaught exception (group=0x41a242a0)
...

FATAL EXCEPTION: Thread-1829
java.lang.UnsatisfiedLinkError: Native method not found: com.bst.HwBeautify.BeautifyNative.nativeCBInitEngine:()
at com.bst.HwBeautify.BeautifyNative.nativeCBInitEngine(Native Method)
at com.bst.HwBeautify.BeautifyNative.cbInitEngine(SourceFile:107)
at com.bst.HwBeautify.BeautifyManager.b(SourceFile:87)
at com.bst.HwBeautify.BeautifyManager.a(SourceFile:85)
at com.bst.HwBeautify.BeautifyManager$1.run(SourceFile:64)
at java.lang.Thread.run(Thread.java:856)
...
S-Canvas is not created yet. Call "changeModeTo" in onInitialized() of SCanvasInitializeListener or call it after onInitialized() SCanvasLayout is up to been initailized
... No implementation found for native Lcom/bst/HwBeautify/BeautifyNative;.nativeCBInitEngine:()I threadid=16: thread exiting with uncaught exception (group=0x41a242a0) 
```

**这里是应该初始化画布的活动的整个代码：**

```
package com.example.canvastest;

import com.samsung.spensdk.SCanvasView;

import android.os.Bundle;
import android.app.Activity;
import android.content.Context;
import android.view.Menu;
import android.widget.RelativeLayout;

public class CanvasSpace extends Activity {

    private Context mContext;
    private RelativeLayout mCanvasContainer;
    private SCanvasView mSCanvas;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_canvas_space);

        mContext = this;

        mCanvasContainer = (RelativeLayout) findViewById(R.id.canvas_container);
        mSCanvas = new SCanvasView(mContext);

        mCanvasContainer.addView(mSCanvas);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.canvas_space, menu);
        return true;
    }

} 
```

**这是我的布局：**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".CanvasSpace" >

    <RelativeLayout 
            android:id="@+id/canvas_container"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_gravity="center">        
    </RelativeLayout>

</RelativeLayout> 
```

我担心的是这个非常奇怪的`S_Pen_SDK2.3`文件夹结构。我有带路径的文件名（705 项），而不是普通目录。

![SDK 文件夹](../Images/6b402f2926a8a1479bf2ed21bacf5c37.png)

我从来没有见过这样的事情。为什么有人会做这样的事情？像这样构造文件夹有什么好处吗？无论如何，我按照教程进行操作，我引用了库并将文件包含在`armeabi`指定的文件夹中。 **这是我的包资源管理器的视图：**

![包资源管理器](../Images/edb403795baae79b93aad5c9951069e0.png)

我在网上搜索了一个关于三星开发人员[的帖子](http://developer.samsung.com/forum/board/thread/view.do?boardName=SPenSDK&messageId=223509)，可以解决这个问题，但对我来说没有帮助。到目前为止，我尝试的是在文件`armeabi`夹中的文件名之前删除这些路径，但这没有帮助。如果有人给我一些关于如何让它工作的提示，那将对我很有帮助。我包含了这么多明显的代码和屏幕截图，以完全清楚我的项目中有什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T23:09:21.880

该库以错误的方式导入，这就是您得到异常的原因。

将`libspen23.jar`和整个`armeabi`目录复制到`libs`.

它应该看起来像这样：

```
libs  
   armeabi
      lib* (all .so files)
   libspen23.jar 
```

查看随 S Pen SDK 2.3 提供的示例，其中显示了如何正确导入库。

# c++ - g ++编译器标志以最小化二进制大小

> ID：15314581
> 
> 赞同：17
> 
> 时间：2013-03-09T18:53:19.233
> 
> 标签：c++, arduino, g++, compiler-optimization

我有一个 Arduino Uno R3。我正在使用 C++ 为我的每个传感器制作逻辑对象。Arduino 的板载内存非常有限，只有 32KB*，平均而言，我编译的对象大约为 6KB*。

我已经在使用所需的最小数据类型，以尽量减少我的内存占用。是否有编译器标志来最小化二进制文件的大小，或者我是否需要使用更短的变量和函数名称、更少的函数等来最小化我的代码库？

此外，将不胜感激任何其他用于最小化二进制大小的提示或建议。

*它可能不是以 KB 为单位来衡量的（因为我面前没有它），但是 1 个对象大约是我总内存大小的 1/5，这引起了我的关注。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-03-09T19:21:01.500

除了评论中提到的内容和其他内容之外，还有很多减少二进制大小的技术，`us2012`用我自己的几点总结：

*   用于`-Os`使 gcc/g++ 优化大小。
*   用于`-ffunction-sections -fdata-sections`将每个函数或数据分成翻译单元内的不同部分。将它与链接器选项结合使用`-Wl,--gc-sections`以删除任何未引用的部分。
*   `strip`至少使用以下选项运行： `-s -R .comment -R .gnu.version`. 它可以与`--strip-unneeded`删除所有重定位处理不需要的符号结合使用。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-12-27T14:47:30.680

如果您的代码不包含 c++-exception-handling，您可以节省大量空间（在 Tuxdude 提到的所有优化步骤之后最多可节省 30k）。因此，您必须提供以下标志： `-fno-exceptions`

但是**即使**不使用异常，**也**可以包含异常处理！检查以下步骤：

1.  `no usage of new, delete`. 如果你真的需要它，用 malloc/free 包装器替换它们。例如，搜索“tinynew.cpp”

2.  提供纯虚调用的功能，例如`extern "C" void __cxa_pure_virtual() { while(1); }`

3.  覆盖 __gnu_cxx::__verbose_terminate_handler()。它处理未处理的异常并进行名称拆解，这非常大！（例如 d_print_comp.part.10 与 9.5k 或 d_type 与 1.8k）

干杯弗洛

# c++ - 似乎无法正确地将对象添加到 C++ 中的数组中

> ID：15314585
> 
> 赞同：2
> 
> 时间：2013-03-09T18:54:20.203
> 
> 标签：c++, arrays, oop, graphics

我主要使用 Java 进行编程，但我正在学习需要使用 C++ 的图形课程。我正在尝试创建一个对象数组，以便循环遍历它们并将它们绘制到屏幕上，但我一生都无法弄清楚如何创建这个数组。我现在有代码，它不会产生任何编译器错误，但它似乎也不能正常工作。以下代码位于我的 Main.cpp 类的顶部：

```
Platform ground("wallstone.tga", 40, 16, 4, 144);
Platform platform1("wallstone.tga", 10, 16, 4, 20);
Platform platforms[2] = {ground, platform1} 
```

当我尝试时：`fprintf(stdout, "Size of platforms array: %d", sizeof(platforms)/sizeof(Platform));`它打印出 0.0.

我尝试了几种创建此数组的方法，它们似乎都产生错误或相同的 0.0 输出，所以我不确定发生了什么。如果需要我的更多代码，我当然愿意发布它。当然，如果有更好的方法来解决这个问题，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T18:58:41.023

看起来你做的一切都是正确的。我唯一的猜测是`size_t`在您的平台上大于`int`，因此提供正确的格式说明符（`%z`而不是`%d`）可能会解决问题：

```
fprintf(stdout, "Size of platforms array: %z", sizeof(platforms)/sizeof(Platform)); 
```

# java - 声音文件不播放

> ID：15314589
> 
> 赞同：1
> 
> 时间：2013-03-09T18:54:37.787
> 
> 标签：java, audio

我正在为班级编写游戏，但无法添加声音和图像。我们从 Andrew Davison 的 Killer Game Programming 一书中获得了可以使用的框架，我觉得我正在完全复制它，但我无法播放声音文件。

这是 SDLLoader 类：

```
package zombieCity;

/* SDLLoader  stores a collection of SDLInfo objects
   in a HashMap whose keys are their names. 

   The name and filename for a line is obtained from a sounds
   information file which is loaded when SDLLoader is created.
   The information file is assumed to be in Sounds/.

   SDLLoader allows a specified clip to be played, stopped, 
   resumed, looped. A SoundsWatcher can be attached to a clip.
   All of this functionality is handled in the SDLInfo object; 
   SDLLoader simply redirects the method call to the right SDLInfo.

   It is possible for many lines to play at the same time, since
   each SDLInfo object is responsible for playing its clip.
*/

import java.util.*;
import java.io.*;

import javax.print.DocFlavor.URL;

public class SDLLoader
{
  private final static String SOUND_DIR = "Sounds/";

  private HashMap<String, SDLInfo> sdlMap; 
    /* The key is the clip 'name', the object (value) 
       is a SDLInfo object */

  public SDLLoader(String soundsFnm)
  { sdlMap = new HashMap<String, SDLInfo>();
    loadSoundsFile(soundsFnm);
  }

  public SDLLoader()
  {  sdlMap = new HashMap<String, SDLInfo>();  } 

  private void loadSoundsFile(String soundsFnm)
  /* The file format are lines of:
        <name> <filename>         // a single sound file
     and blank lines and comment lines.
  */
  { 
    String sndsFNm = SOUND_DIR + soundsFnm;
    System.out.println("Reading file: " + sndsFNm);
    try {
        java.net.URL inFile = this.getClass().getResource("/Sounds/SDLInfo.txt");
        System.out.println("url " + inFile);
        InputStreamReader in = new InputStreamReader(inFile.openStream());
      BufferedReader br = new BufferedReader(in);
      StringTokenizer tokens;
      String line, name, fnm;
      while((line = br.readLine()) != null) {
        if (line.length() == 0)  // blank line
          continue;
        if (line.startsWith("//"))   // comment
          continue;

        tokens = new StringTokenizer(line);
        if (tokens.countTokens() != 2)
          System.out.println("Wrong no. of arguments for " + line);
        else {
          name = tokens.nextToken();
          fnm = tokens.nextToken();
          load(name, fnm);
        }
      }
      br.close();
    } 
    catch (IOException e) 
    { System.out.println("Error reading file: " + sndsFNm);
      System.exit(1);
    }
  }  // end of loadSoundsFile()

  // ----------- manipulate a particular clip --------

  public void load(String name, String fnm)
  // create a SDLInfo object for name and store it
  {
    if (sdlMap.containsKey(name))
      System.out.println( "Error: " + name + "already stored");
    else {
      sdlMap.put(name, new SDLInfo(name, fnm) );
      System.out.println("-- " + name + "/" + fnm);
    }
  }  // end of load()

  public void close(String name)
  // close the specified clip
  {  SDLInfo si = (SDLInfo) sdlMap.get(name);
     if (si == null)
       System.out.println( "Error: " + name + "not stored");
     else
      si.close();
  } // end of close()

  public void play(String name, boolean toLoop)
  // play (perhaps loop) the specified clip
  {  SDLInfo si = (SDLInfo) sdlMap.get(name);
     if (si == null)
       System.out.println( "Error: " + name + "not stored");
     else
      si.beginPlayback(toLoop);
  } // end of play()

  public void stop(String name)
  // stop the clip, resetting it to the beginning
  { SDLInfo si = (SDLInfo) sdlMap.get(name);
    if (si == null)
      System.out.println( "Error: " + name + "not stored");
    else
      si.stop();
  } // end of stop()

  // -------------------------------------------------------

  public void setWatcher(String name, SoundsWatcher sw)
  /* Set up a watcher for the clip. It will be notified when
     the clip loops or stops. */
  { SDLInfo si = (SDLInfo) sdlMap.get(name);
    if (si == null)
      System.out.println( "Error: " + name + "not stored");
    else
      si.setWatcher(sw);
  } // end of setWatcher()

}  // end of ClipsLoader class 
```

堆栈跟踪

```
 fps: 100; period: 10 ms
Reading file: Sounds/SDLInfo.txt
url file:/C:/Documents%20and%20Settings/MyName/Desktop/java%20programs/Zombie%20City/bin/Sounds/SDLInfo.txt
Exception in thread "main" java.lang.NullPointerException
    at com.sun.media.sound.StandardMidiFileReader.getSequence(Unknown Source)
    at javax.sound.midi.MidiSystem.getSequence(Unknown Source)
    at com.sun.media.sound.SoftMidiAudioFileReader.getAudioInputStream(Unknown Source)
    at javax.sound.sampled.AudioSystem.getAudioInputStream(Unknown Source)
    at zombieCity.SDLInfo.loadLine(SDLInfo.java:35)
    at zombieCity.SDLInfo.<init>(SDLInfo.java:27)
    at zombieCity.SDLLoader.load(SDLLoader.java:95)
    at zombieCity.SDLLoader.loadSoundsFile(SDLLoader.java:73)
    at zombieCity.SDLLoader.<init>(SDLLoader.java:38)
    at zombieCity.FlyingHero.simpleInitialize(FlyingHero.java:144)
    at zombieCity.Frame.<init>(Frame.java:68)
    at zombieCity.FlyingHero.<init>(FlyingHero.java:80)
    at zombieCity.FlyingHero.main(FlyingHero.java:376) 
```

在此类中捕获了错误：

```
package zombieCity;
/* Load a line, which can be played, stopped, resumed, looped. 

   An object implementing the SoundsWatcher interface 
   can be notified when the line loops or stops.
*/

import java.io.*;
import javax.sound.sampled.*;

public class SDLInfo implements LineListener, Runnable
{
  private final static String SOUND_DIR = "Sounds/";

  private String name, filename;
  private SourceDataLine line = null;
  private boolean isLooping = false;
  private SoundsWatcher watcher = null;
  private Thread soundPlayer;

  public SDLInfo(String nm, String fnm)
  { name = nm;
    filename = SOUND_DIR + fnm;

    loadLine(filename);
  } // end of SDLInfo()

  private void loadLine(String fnm)
  {
    try {
      // link an audio stream to the sound line's file
      AudioInputStream stream = AudioSystem.getAudioInputStream(
                          getClass().getResource(fnm) );

      AudioFormat format = stream.getFormat();

      // convert ULAW/ALAW formats to PCM format
      if ( (format.getEncoding() == AudioFormat.Encoding.ULAW) ||
           (format.getEncoding() == AudioFormat.Encoding.ALAW) ) {
        AudioFormat newFormat = 
           new AudioFormat(AudioFormat.Encoding.PCM_SIGNED,
                                format.getSampleRate(),
                                format.getSampleSizeInBits()*2,
                                format.getChannels(),
                                format.getFrameSize()*2,
                                format.getFrameRate(), true);  // big endian
        // update stream and format details
        stream = AudioSystem.getAudioInputStream(newFormat, stream);
        System.out.println("Converted Audio format: " + newFormat);
        format = newFormat;
      }

      DataLine.Info info = new DataLine.Info(SourceDataLine.class, format);

      // make sure sound system supports data line
      if (!AudioSystem.isLineSupported(info)) {
        System.out.println("Unsupported Line File: " + fnm);
        return;
      }

      // get clip line resource
      line = (SourceDataLine) AudioSystem.getLine(info);

      // listen to line for events
      line.addLineListener(this);

      line.open(format);    // open the sound file as a line
      stream.close(); // we're done with the input stream

    } // end of try block

    catch (UnsupportedAudioFileException audioException) {
      System.out.println("Unsupported audio file: " + fnm);
    }
    catch (LineUnavailableException noLineException) {
      System.out.println("No audio line available for : " + fnm + " " + noLineException);
    }
    catch (IOException ioException) {
      System.out.println("Could not read: " + fnm);
    }
 //   catch (Exception e) {
  //    System.out.println("Problem with " + fnm);
  //  }
  } // end of loadLine()

  public void update(LineEvent lineEvent){}
  // update() not used

  public void close()
  { if (line != null) {
      line.stop();
      line.close();
    }
  }

  public void beginPlayback(boolean toLoop)
  {
      if (line != null){
          isLooping = toLoop;
          if (soundPlayer == null) {
              soundPlayer = new Thread(this);
              soundPlayer.start();
          }
      }
  }

  public void play()
  {
    try{
      if (line != null) {
          int numRead = 0;
          byte[] buffer = new byte[line.getBufferSize()];
          AudioInputStream stream = AudioSystem.getAudioInputStream(getClass().getResource(filename) );
          line.start();
          // read and play chunks of the audio
          int offset;
          while ((numRead = stream.read(buffer,0,buffer.length)) >= 0) {
              offset = 0;
              while (offset < numRead)
                  offset += line.write(buffer, offset, numRead-offset);
          }
          // wait until all data is played, then stop the line
          stream.close();
          line.drain();
          line.stop();
      }
    }
    catch (IOException ioException) {
      System.out.println("Could not read: " + filename);
    }
    catch (UnsupportedAudioFileException audioException) {
        System.out.println("Unsupported audio file: " + filename);
      }

  } //end of play()

  public void run()
  {
     do{ play();}while(isLooping);
  }

  public void stop()
  // stop and reset line to its start
  { if (line != null) {
      isLooping = false;
      line.drain();
      line.stop();
    }
  }

  public void setWatcher(SoundsWatcher sw)
  {  watcher = sw;  }

  // -------------- other access methods -------------------

  public String getName()
  {  return name;  }

}  // end of ClipInfo class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T18:57:15.057

您是否尝试过使用 .wav 文件

如果您需要在

[在这里转换](http://www.docspal.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T19:22:38.077

尝试在以下位置添加完整的声音文件目录

```
private final static String SOUND_DIR = "Sounds/"; 
```

示例目录

```
"C:/Stuff/Sounds/soundfile.wav 
```

这可能会帮助你

[这里](https://stackoverflow.com/questions/11104118/javax-sound-sampled-unsupportedaudiofileexception-could-not-get-audio-input-str)

# jquery - twitter Bootstrap 防止 datetimepicker 值大于另一个 datetimepicker

> ID：15314593
> 
> 赞同：2
> 
> 时间：2013-03-09T18:55:30.487
> 
> 标签：jquery, twitter-bootstrap

我正在使用两个 datetimepickers 使用 twitter bootstrap 制作表单。我想让它“start_time”的值不能大于“end_time”的值。这应该相对简单，但我似乎没有检索值以正确进行比较。

```
 $('#start_time')
    .datetimepicker()
    .on('changeDate', function(ev){
        if (ev.date.valueOf('#start_time') > date.valueOf('#end_time')){
            alert("start time may not be greater than end time");
        }
    }); 
```

# salesforce - 未知函数 addElement。检查拼写顶点salesforce

> ID：15314594
> 
> 赞同：0
> 
> 时间：2013-03-09T18:55:48.410
> 
> 标签：salesforce, apex-code, visualforce

我创建了一个visualforce页面，其中有一个代码段

```
<apex:column ><apex:commandButton value="{!if(item.i == size-1,'Add','Delete')}" action="{!if(size == 1,addElement(),removeElement())}"></apex:commandButton></apex:column> 
```

我创建了一个包含函数的自定义控制器

```
public PageReference addElement(){

return null;

}
public PageReference removeElement(){

return null;

} 
```

但是当我尝试保存visualforce页面时，它给了我错误

```
Error: Unknown function addElement. Check spelling 
```

谁能告诉我如何在动作属性中使用 if 结构，以便它能够正常工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T06:46:39.420

将其更改为

```
<apex:commandButton value="{!if(item.i == size-1,'Add','Delete')}" action="{!addElement}" rendered="{!size == 1}"/>
<apex:commandButton value="{!if(item.i == size-1,'Add','Delete')}" action="{!removeElement}" rendered="{!NOT(size == 1)}"/> 
```

# php - 单击时在模态中重新加载模态内容

> ID：15314596
> 
> 赞同：0
> 
> 时间：2013-03-09T18:55:54.693
> 
> 标签：php, javascript, jquery, twitter-bootstrap

我有这个非常简单的 jQuery 脚本来更改基于链接的模式内容。代码：

```
$('#facebook-friends').on('hidden', function () {
  $(this).removeData('modal');
}); 
```

然后我可以根据按钮控制将使用哪些内容：

```
<a href="facebook-frame.php" id="full-width" data-target="#facebook-friends" role="button" class="btn btn-primary" data-toggle="modal"><i class="icon-facebook"></i> Use Facebook</a> 
```

它完美地工作！但是，我在此`facebook-frame.php`文件中有链接，并且我希望所有操作都保留在模式中，这样外部页面就不会重新加载。

我已经在里面尝试过这个解决方案，`facebook-frame.php`但它不起作用。

```
<a href="facebook-frame.php?all" data-target="#facebook-friends" role="button" class="btn btn-primary" data-toggle="modal"> 
```

这是我主页上的模式：

```
 <div class="modal fade hide" id="facebook-friends" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" >
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="myModalLabel">Inviter veninder fra Facebook</h3>
  </div>
  <div class="modal-body text-center">
    <p>Loading content...</p>
<p><IMG src="ajax-loader.gif"></p>
  </div>
  <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Luk</button>
  </div>
    </div> 
```

我特别喜欢“加载内容”，因为它看起来很有活力。

有什么方法可以为内部的链接/按钮分配一个特殊的命令/类/名称，`facebook-frame.php`以便在单击时会临时显示“正在加载内容”，然后同时加载请求的页面（内部`href`属性）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T22:26:34.353

如果我理解正确，`facebook-frame.php`你可以像这样捕获所有`<a>`（或特定`<a>`类）点击事件吗？

```
$(document).on('click', '#facebook-friends a', function(e) {
    e.preventDefault();
    // show the "Loading content" message
    // load the content and whatever else you need to do
}); 
```

注意：`.on()`需要 jQuery 1.7+。在此之前，您将使用`.live()`.

# arrays - 在二维数组中创建一个“路径”（用于迷宫） - 任何算法想法？

> ID：15314602
> 
> 赞同：2
> 
> 时间：2013-03-09T18:56:26.827
> 
> 标签：arrays, algorithm

我有一个二维数组，我想用它来创建一个迷宫。

每个值可以是 0 或 1，其中 0 表示有墙，1 表示有房间。现在我需要一种算法来在该数组中创建一个“路径”。

例如，空白数组如下所示：

```
0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 
```

“路径”的一个例子是：

```
0 0 0 0 0 0 0 0
0 0 0 1 1 0 0 0
0 0 0 0 1 0 1 0
0 0 0 1 1 1 1 0
0 0 0 1 0 1 0 0
0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 
```

它基本上归结为：

1）一切都是`0`

2）我有一个随机的起点，这将是`1`

3）从那时起，我需要制作随机相邻值`1`。但是：永远不应该有 4 个或更多相邻字段的正方形是`1`AND：我不想要一条线性路径，我希望它是一个迷宫

（并非所有的阵列都必须用于迷宫。事实上，如果我可以说我想要该阵列中的一定数量（比如 20 或 50 个）房间，那就太酷了）

有什么好的算法或想法我可以使用（尤其是我的列表中的#3）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T19:57:34.077

递归回溯过程可以做到这一点。

```
algorithm gen-maze(pos):
    set pos to 1

    build a list of neighboring positions
    randomly shuffle this list
    for each neighbor n of pos in random order:
        if n is 0 and setting it to 1 doesn't create a square:
            gen-maze(n) 
```

从一个随机位置开始这个算法。

如需解释，请阅读[有关深度优先搜索的 Wikipedia 文章，](https://en.wikipedia.org/wiki/Depth-first_search)并务必观看[动画](https://commons.wikimedia.org/w/index.php?title=File%3aMAZE_30x20_DFS.ogv)。

# jquery - 为什么 Ajax 调用在 Mozilla 中不返回数据？

> ID：15314607
> 
> 赞同：1
> 
> 时间：2013-03-09T18:57:13.710
> 
> 标签：jquery, ajax

大家好，我有一个 ajax 调用函数，它调用我的 api，我从我的方法中获取数据，每件事都在 IE 中运行良好，ajax 调用返回数据，但是当涉及到 Mozilla 时，它会进入错误调用，并且没有返回数据，我在我的浏览器中收到以下错误

```
error:[Exception... "Failure"  nsresult: "0x80004005 (NS_ERROR_FAILURE)"  location: "JS frame :: http://localhost:60304/Scripts/jquery-1.7.1.min.js :: .send :: line 3"  data: no] 
```

这是我正在使用的 ajax 函数

```
function Loaddata(){
       $.ajax({
           url: "http://localhost:19999/api/Employees/GetAllEmployees?Id=1", 
           jsonp: '$callback', 
           dataType: 'text json',
           success: function (data) { 
               if (data != null && data.length > 0) { 
                   BuildCategorieString(data) 
               } 
           },
           error: function (XHR, textStatus, errorThrown) { 
               alert(textStatus + ":" + errorThrown); 
           }
      });
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T19:01:05.683

该文档看起来涵盖了您需要的内容：

[http://helpful.knobs-dials.com/index.php/0x80004005_(NS_ERROR_FAILURE)_and_other_firefox_errors](http://helpful.knobs-dials.com/index.php/0x80004005_(NS_ERROR_FAILURE)_and_other_firefox_errors)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T19:06:55.877

尝试：

```
function Loaddata() {
    $.ajax({
        url : "http://localhost:19999/api/Employees/GetAllEmployees?Id=1",
        jsonp : '$callback',
        dataType : 'jsonp text',
        crossDomain: true,
        success : function (data) {
            if (data != null && data.length > 0) {
                BuildCategorieString(data)
            }
        },
        error : function (XHR, textStatus, errorThrown) {
            alert(textStatus + ":" + errorThrown);
        }
    });
} 
```

# oracle11g - Oracle 报告构建器安装

> ID：15314614
> 
> 赞同：0
> 
> 时间：2013-03-09T18:58:12.417
> 
> 标签：oracle11g, installation, oraclereports

我想安装 Oracle 11g 报告生成器，但不知道我必须下载什么，因为我正在下载，但`Oracle Database 11g Release 2`我找不到报告生成器也许我必须下载其他东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:22:58.713

[这](http://www.oracle.com/technetwork/middleware/reports/downloads/index.html)是 11g Bulder，您可以[在此处](http://docs.oracle.com/cd/E24269_01/doc.11120/e23960/install.htm)找到文档。

# string - 从字符串“A”中删除最少的字母以删除字符串“B”的所有实例

> ID：15314616
> 
> 赞同：17
> 
> 时间：2013-03-09T18:58:19.490
> 
> 标签：string, algorithm

如果我们有`A`长度为 N 的字符串`B`和长度为 M 的字符串，其中 M < N，我可以快速计算必须从字符串中删除的最小字母数，`A`以便字符串`B`不会作为子字符串出现在`A`?

如果我们的字符串长度很小，这个问题很容易暴力破解：你只需从`0`to迭代一个位掩码`2^N`，看看是否`B`作为 . 的子序列中的子字符串出现`A`。但是，当 N 可以达到 10,000 并且 M 可以达到 1,000 时，这个算法显然很快就崩溃了。有没有更快的方法来做到这一点？

示例：A= `ababaa`B= `aba`。Answer= .删除 A`1`中的第二个`a`将导致`abbaa`，其中不包含`B`。

**编辑：**用户 nm 发布了一个很好的反例：`aabcc`和`abc`. 我们要删除单个`b`，因为删除任何`a`或`c`将创建另一个字符串实例`abc`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-03T15:00:21.737

用动态规划解决它。令 dp[i][j] 成为使 A[0...i-1] 的后缀为 B[0...j-1] 的最小运算符，而 A[0...i] 则没有t 包含 B，`dp[i][j] = Infinite`要索引操作符是不可能的。然后

```
if(A[i-1]=B[i-1]) 
   dp[i][j] = min(dp[i-1][j-1], dp[i-1][j])    
else dp[i][j]=dp[i-1][j]`,

return min(A[N][0],A[N][1],...,A[N][M-1]);` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-12T06:27:34.103

查找主字符串中每个子字符串的索引。

然后使用动态编程算法（所以记住中间值），从主字符串中删除作为子字符串一部分的每个字母，将计数加 1，然后重复。

您可以找到这些字母，因为它们在每个匹配索引 + B 的长度的索引范围内。

```
A = ababaa
B = aba
count = 0

indeces = (0, 2)

A = babaa, aabaa, abbaa, abbaa, abaaa, ababa
B = aba
count = 1

(2nd abbaa is memoized)

indeces = (1), (1), (), (), (0), (0, 2)

answer = 1 
```

您可以更进一步，并尝试记住子字符串的子字符串匹配索引，但这实际上可能不会提高性能。

不确定确切的界限，但在计算上不应该花费太长时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-30T12:30:47.953

我不确定这个问题是否仍然有人感兴趣，但我有一个想法可能可行。

一旦我们决定问题不在于找到子字符串，而是决定从字符串 A 中删除哪个字母更方便，对我来说解决方案似乎很简单：如果您发现 B 字符串出现在 A 中，最好的办法是可以做的只是删除字符串内的一个字符，靠近右键……让我们说最后一个。这就是为什么如果你有一个实际上结束它的开始方式的子字符串，如果你在开头删除一个字符，你只删除一个 B 出现，而​​你实际上可以一次删除两个。

伪 cos 中的算法：

```
String A, B;
int occ_posit = 0;
N = B.length();

occ_posit = A.getOccurrencePosition(B); // pseudo function that get the first occurence of B into A and returns the offset (1° byte = 1), or 0 if no occurence present.

while (occ_posit > 0)  // while there are B into A
{
    if (B.firstchar == B.lastchar)  // if B starts as it ends
    {
        if (A.charat[occ_posit] == A.charat[occ_posit+1])
            A.remove[occ_posit - 1]; // no reason to remove A[occ_posit] here
        else
            A.remove[occ_posit]; // here we remove the last char, so we could remove 2 occurencies at the same time
    }
    else
    {
        int x = occ_posit + N - 1;
        while (A.charat[x + 1] == A.charat[x])
            x--; // find the first char different from the last one

        A.remove[x]; // B does not ends as it starts, so if there are  overlapping instances they overlap by more than one char. Removing the first that is not equal to the char following B instance, we kill both occurrencies at once.
    }
} 
```

让我们用一个例子来解释：

A = "123456789000987654321" B = "890"

将此作为表格阅读：

```
occ_posit:  123456789012345678901

       A = "123456789000987654321"
       B =        "890" 
```

第一次出现在 occ_posit = 8。B 在开始时没有结束，所以它进入第二个循环：

```
int x = 8 + 3 - 1 = 10;
while (A.charat[x + 1] == A.charat[x])
    x--; // find the first char different from the last one
A.remove[x]; 
```

while 发现 A.charat11 与 A.charat[10] (="0") 匹配，因此 x 变为 9，然后 while 退出，因为 A.charat[10] 与 A.charat9 不匹配。A 则变为：

A =“12345678000987654321”

没有更多的事件发生。

让我们尝试另一个： A = "abccccccccc" B = "abc"

第一次出现在 occ_posit = 1。B 开始时并没有结束，所以它进入第二个循环：

```
int x = 1 + 3 - 1 = 3;
while (A.charat[x + 1] == A.charat[x])
    x--; // find the first char different from the last one
A.remove[x]; 
```

while 发现 A.charat4 匹配 A.charat[3] (="c")，所以 x 变为 2，然后 while 退出，因为 A.charat[3] 不匹配 A.charat2。A 则变为：

A =“accccccccc”

让我们尝试重叠：

A = "abcdabcdabff" B = "abcdab"

该算法导致： A = "abcdacdabff" 不再出现。

最后，一个字母重叠：

A = “阿巴巴巴巴” B = “阿巴”

B 在它开始时结束，所以它进入第一个 if：

```
if (A.charat[occ_posit] == A.charat[occ_posit+1])
            A.remove[occ_posit - 1]; // no reason to remove A[occ_posit] here
        else
            A.remove[occ_posit]; // here we remove the last char, so we could remove 2 occurencies at the same time 
```

这让 B 实例的最后一个“a”被删除。所以：

1° step: A= "abbbbabbabba" 2° step: A= "abbbbabbbba" 我们就完成了。

希望这可以帮助

编辑：请注意，当您的搜索接近 A 端时，必须稍微更正 algotirhm 以免出错，但这只是一个简单的编程问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-10T22:19:20.963

这是我想出的草图。

首先，如果 A 包含 B 中未找到的任何符号，则将 A 拆分为一组仅包含 B 中找到的字符的较小字符串。将算法应用于每个较小的字符串，然后将它们粘在一起以获得总数结果。这确实起到了优化的作用。

接下来，检查 A 是否包含任何 B。如果没有，你就完成了。如果 A = B，则删除所有这些。

我认为一个相对贪婪的算法可能会起作用。

首先，标记 A 中属于至少一次 B 出现的所有符号。令 A = aabcbccabcaa，B = abc。粗体表示这些标记的字符：

**abc** bcc **abc** aa 。如果有重叠，标记所有可能的。这个操作是天真的近似（AB）操作，但我相信它可以在围绕（A / B）操作中完成。

考虑删除 A 中每个标记的字母：a **abc** bcc **abc** aa。

检查删除该标记字母是否减少了标记字母的数量。您只需要检查可能受删除字母影响的子字符串。如果 B 的长度为 4，则只有在检查 x 时才需要删除从以下位置开始的子字符串：

```
-------x------
    ^^^^ 
```

无论 x 是否存在，任何进一步的左或右都将存在。

例如：

在以下字符串中标记 [a]：a **[a]bc** bcc **abc** aa。

它的删除产生 abcbccabcaa，它在标记时产生**abc** bcc **abc** aa，它具有相同数量的标记字符。由于此操作只需要相对数量，因此对于每个选定的字母，它可以在大约 2B 时间内完成。对于每一个，分配两者之间的相对差异。选择一个最大的任意一个并将其删除。重复直到完成。每遍大概最多 2AB 次操作，最多 A 遍，总时间约为 2A^2 B。

在上面的示例中，分配了这些值：

```
aabcbccabcaa
 033   333 
```

所以任意删除第一个标记的 b 给你：aacbccabcaa。如果你重复这个过程，你会得到：

```
aacbccabcaa
      333 
```

最终结果完成。

我相信该算法是正确的最小化。我认为确实，只要 A 只需要一次删除，算法*就必须*是最优的。在这种情况下，减少最可能匹配（即：所有匹配）的字母应该是最好的。不过，我想不出这样的证据。我有兴趣找到任何最优性的反例。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-10T02:55:46.930

你能对字符串进行图形搜索吗`A`？对于大 N 和特殊输入，这可能太慢了，但它应该比指数蛮力算法更好。也许是 BFS。

# android - 按歌曲获取封面图片

> ID：15314617
> 
> 赞同：4
> 
> 时间：2013-03-09T18:58:21.550
> 
> 标签：android, media-player, mediastore

是否可以按歌曲而不是专辑获得封面图片。因为我有一张自组合的歌曲专辑，而且它们都有不同的封面图片。但是当我想查询它们时，我总是会返回相同的图片。

```
String[] ARG_STRING = {MediaStore.Audio.Media.ALBUM_ID};
...
String albumCover = _cursor.getString(_cursor.getColumnIndex(MediaStore.Audio.Media.ALBUM_ID));
...
MusicUtils.getArtwork(this, -1, Integer.parseInt(albumID)); 
```

所以我想知道如何获得歌曲的封面图片。

我知道 MusicUtils 通过 SongId 支持 getArtwork，但是我应该使用什么 ID，因为 MediaStore.Audio.Media._ID 不起作用。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-06-06T21:00:56.630

我不熟悉`MusicUtils`，但是，您应该能够通过使用`MediaMetadataRetriever`. 这是一个简短的代码片段，展示了如何使用它。引用的 uri 是您要为其检索艺术作品的文件的内容 uri。

```
MediaMetadataRetriever mmr = new MediaMetadataRetriever();
byte[] rawArt;
Bitmap art;
BitmapFactory.Options bfo=new BitmapFactory.Options();

mmr.setDataSource(getApplicationContext(), uri);
rawArt = mmr.getEmbeddedPicture();

// if rawArt is null then no cover art is embedded in the file or is not 
// recognized as such.
if (null != rawArt) 
    art = BitmapFactory.decodeByteArray(rawArt, 0, rawArt.length, bfo);

// Code that uses the cover art retrieved below. 
```

# c# - 用linq中的左外连接计数到实体

> ID：15314619
> 
> 赞同：1
> 
> 时间：2013-03-09T18:58:31.627
> 
> 标签：c#, linq, entity-framework-4

我无法理解 Linq to Entities 中的左外连接计数。

我的查询是：

```
SELECT Locations.LocationId, Locations.LocationName, LocationPrizes.PrizeId, LocationPrizes.PrizeQuantity, Prizes.PrizeName, ISNULL(COUNT(WonPrizes.WonPrizeId), 0) AS WonPrizes 

FROM Locations 

INNER JOIN LocationPrizes ON Locations.LocationId = LocationPrizes.LocationId INNER JOIN Prizes ON LocationPrizes.PrizeId = Prizes.PrizeId 

LEFT OUTER JOIN WonPrizes ON Locations.LocationId = WonPrizes.LocationId AND Prizes.PrizeId = WonPrizes.PrizeId

GROUP BY Locations.LocationId, Locations.LocationName, LocationPrizes.PrizeId, LocationPrizes.PrizeQuantity, Prizes.PrizeName 
```

我的 Linq 是：

```
var locationPrizes = from l in context.Locations
                       select new
                           {
                               l.LocationId,
                               l.LocationName,
                               Prizes = from o in l.LocationPrizes
                                        select new
                                            {
                                                o.PrizeId,
                                                o.PrizeQuantity,
                                                o.Prize.PrizeJson
                                            }
                           }; 
```

我无法计算左外连接部分是否正常工作。任何指针？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T19:24:41.940

如果你碰巧有来自 LocationPrizes -> WonPrizes 的关联，你可以这样做：

```
var locationPrizes = 
    from l in context.Locations
    select new
    {
        l.LocationId,
        l.LocationName,
        Prizes = 
            from o in l.LocationPrizes 
            select new
            {
                o.PrizeId,
                o.PrizeQuantity,
                o.Prize.PrizeJson
                WonPrizes = o.WonPrizes.Count();
            }
    }; 
```

如果没有，这也将起作用（对我有用，下面的小修改）：

```
var locationPrizes = 
    from l in context.Locations
    select new
    {
        l.LocationId,
        l.LocationName,
        Prizes = 
            from o in l.LocationPrizes 
            select new
            {
                o.PrizeId,
                o.PrizeQuantity,
                o.Prize.PrizeJson
                WonPrizes = 
                    (from w in context.WonPrizes
                     where w.PrizeId == o.PrizeId 
                        && w.LocationId == l.LocationId
                     select w)
                    .Count()
            }
    }; 
```

# javascript - JQuery 动画在 IE 中不起作用

> ID：15314620
> 
> 赞同：0
> 
> 时间：2013-03-09T18:58:34.607
> 
> 标签：javascript, jquery

我有一个在 Firefox 和 chrome 中完美运行的条形图，但在 Internet Explorer 中却没有。有人帮我吗？谢谢你。 [http://jsfiddle.net/FkUYf/6/](http://jsfiddle.net/FkUYf/6/)

```
 $(document).ready(function(){
        $(document).scroll(function() {
           var top = $(document).scrollTop();
           console.log(top);
           if (top > 300) {
              $("#html, #css").animate({width:"100%"}, 2000);
              $("#javascript").animate({width:"40%"}, 2000);
              $("#php").animate({width:"50%"}, 2000);
              $("#mysql").animate({width:"30%"}, 2000);
              $("#wordpress").animate({width:"60%"}, 2000);
           }
        });
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T19:15:33.103

试试这个：

```
 $(document).ready(function(){
        $(document).scroll(function() {
            var top = $(document).scrollTop();
            console.log(top);
           if (top > 300) {
                          $("#html, #css").animate({width:"100%"}, 2000)
                          $("#javascript").animate({width:"40%"}, 2000);
                          $("#php").animate({width:"50%"}, 2000);
                          $("#mysql").animate({width:"30%"}, 2000);
                          $("#wordpress").animate({width:"60%"}, 2000);
          }
        });
    }); 
```

# mongodb - 无法使用 Mongo 导出查询

> ID：15314625
> 
> 赞同：11
> 
> 时间：2013-03-09T18:58:50.973
> 
> 标签：mongodb

我在 Mongo DB 中有一个名为“ **sample** ”的集合和名为“ **at ”的数据库。**

```
db.sample.find().pretty()
{
        "_id" : "35004",
        "city" : "ACMAR",
        "pop" : 6055,
        "state" : "AL"
}
{
        "_id" : "35005",
        "city" : "ADAMSVILLE",
        "pop" : 10616,
        "state" : "AL"
}
{
        "_id" : "35006",
        "city" : "ADGER",
        "pop" : 3205,
        "state" : "AL"
} 
```

我曾尝试使用 mongo 导出查询，但我不成功，请让我知道我在哪里做错了。

我尝试过使用以下方法，但总是产生错误。

```
mongoexport --host localhost --db at --collection "sample" --csv --out text.csv --fields city,state

mongoexport --csv -o /D:/test.csv -d at -c sample -f city,state,pop 
```

我收到以下错误，请帮助

**Sun Mar 10 00:25:44 SyntaxError: missing ; 声明前（shell）：1**

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-09T19:18:39.643

`mongoexport`必须从您的操作系统命令 shell 运行，而不是 mongo shell。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-29T11:39:10.220

**或者，如果这不起作用，请尝试这种方法。**

如果文件夹中没有 NO`db`或`data`文件`\bin`夹，请创建它们。

然后打开一个新终端并运行：

***例如****——* `"C:\Program Files\MongoDB\Server\4.0\bin\mongo.exe"`

将此终端保持打开状态并将其最小化。

现在打开另一个终端并运行：

***例如***——`"C:\Program Files\MongoDB\Server\4.0\bin\mongod.exe"`

保持打开状态并最小化。现在再打开一个终端并导航到您的

mongodb 文件夹：***例如*** `"C:\Program Files\MongoDB\Server\4.0\bin"` ，一旦在正确的文件路径中运行您想要的任何 mongo 命令，而不是

`mongoexport`尝试这个`./mongoexport`

希望这可以帮助某人。

**您应该能够运行如下命令：**

```
./mongoexport -h YOUR.mlab.com:PORT -d YOUR-DB-NAME -c <collection> -u <user> -p <password> -o <output file> 
```

**或者对于整个数据库使用：**

```
./mongodump -h YOUR.mlab.com:PORT -d YOUR-DB-NAME -u ADMIN-USER -p PASSWORD -o C:\Luke\I\Am\Your\Father\DestinationOfAllCollections 
```

# android - 列表视图导航

> ID：15314627
> 
> 赞同：-1
> 
> 时间：2013-03-09T18:58:55.210
> 
> 标签：android

我有一个基本问题。在主屏幕上有一个列表视图，它应该导航到另一个列表视图。这就像选择一个类别然后是一个子类别。对于每个子类别视图，我应该创建新活动还是可以从第一个列表视图传递位置值以创建适当的一次并可以再次导航？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T19:19:37.623

考虑使用`ExpandableListView`满足您的需求：http: [//developer.android.com/reference/android/widget/ExpandableListView.html](http://developer.android.com/reference/android/widget/ExpandableListView.html)

[http://www.dreamincode.net/forums/topic/270612-how-to-get-started-with-expandablelistview/](http://www.dreamincode.net/forums/topic/270612-how-to-get-started-with-expandablelistview/)

[http://android-adda.blogspot.co.il/2011/06/custom-expandable-listview.html](http://android-adda.blogspot.co.il/2011/06/custom-expandable-listview.html)

**更新：** 要将数据传递给另一个活动，您应该执行以下操作：

```
public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
    Intent intent = createIntentwithExtra(v, position);
    startActivity(intent);  
}

public Intent createIntentwithExtra(View v, int position)
{
    Intent intent = new Intent(getApplicationContext(), TaskDetailsActivity.class);
    intent.putExtra(KEY_USERNAME, username);
    intent.putExtra(KEY_ID, tasksRepository.get(position).getId());
    return intent;
} 
```

**在第二个活动中：**

```
Intent intent = getIntent();
        bundle = intent.getExtras();
        int taskid = bundle.getInt(TasksListActivity.KEY_ID); 
```

同样的事情可以用一个字符串数组来完成。

# android - 创建上下文失败 0x3005

> ID：15314629
> 
> 赞同：6
> 
> 时间：2013-03-09T18:59:15.560
> 
> 标签：android, eclipse, android-emulator, installation, avd

我有 Windows 8、适用于 Windows 32 位的 Java 开发人员的 Eclipse IDE (JUNO)，以及适用于 Windows 的更新和安装的 Android SDK 4.1.2。

我已经解压了适用于 Windows 的 Android SDK，打开了 SDK 管理器并安装了：

```
Android SDK tool.
Android SDK platform tools
Android 4.1.2 (API 16) - all the folder
All the Extra folder. 
```

之后，我打开了 AVD 管理器并在 Nexus 7 上使用 Google API 16 创建了一个新的 AVD（我已经尝试了所有这些）。当我尝试运行应用程序时，出现以下错误：

*

```
> Failed to create Context 0x3005 emulator: 
> WARNING: Could not initialize OpenglES emulation, using software renderer.
> could not get wglGetExtensionsStringARB
> could not get wglGetExtensionsStringARB
> could not get wglGetExtensionsStringARB
> could not get wglGetExtensionsStringARB
> could not get wglGetExtensionsStringARB 
```

*

我已经尝试了所有答案。不幸的是，没有什么对我有用。任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-26T19:12:08.543

只需转到 AVD 管理器，选择创建的 AVD，然后编辑。选中使用主机 GPU 复选框。它对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-26T20:51:12.973

1.  安装支持 Android SDK 的 JDK。仅 JRE 是不够的！它对我有用。安装JDK后，关闭Eclipse，再次打开项目。
2.  如果这仍然不起作用，请检查 Java 的路径变量

# c++ - Lubuntu 中的 QT 控制台应用程序

> ID：15314631
> 
> 赞同：0
> 
> 时间：2013-03-09T18:59:23.810
> 
> 标签：c++, qt, ubuntu

我正在尝试在 Lubuntu 下的 Qt 中编写一个控制台应用程序。

但是当我试图运行某些东西时，即：

```
#include <QCoreApplication>
#include <iostream>
using namespace std;

int main(int argc, char *argv[])
{
    QCoreApplication a(argc, argv);
    cout << " hello world";
    return a.exec();
} 
```

它失败了，说：

> “无法更改到工作目录 home/myusername/myproject：没有这样的文件或目录”。

但是这个目录是存在的，里面甚至还有构建文件，标记为可执行文件。但是当我尝试从终端运行它时，响应是：`myproject-console is not a command.`

“你好，世界！”发生了什么？应用程序？有什么办法可以解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T19:28:56.093

您的应用程序似乎试图寻找**相对**路径`home/myusername/myproject`而不是**绝对**路径`/home/myusername/myproject`。你检查过包含的路径`argv`吗？

# spotify - 从 Spotify 播放列表中删除曲目

> ID：15314634
> 
> 赞同：0
> 
> 时间：2013-03-09T18:59:46.417
> 
> 标签：spotify

我正在编写一个 Spotify 应用程序。它使用默认播放列表视图生成出现在屏幕上的歌曲播放列表。如何允许用户进入并从此列表中删除歌曲？选择曲目并按下删除按钮不会这样做。

谢谢鲍勃

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-07T10:47:07.697

我不明白你的意思。请分享您在做什么的屏幕截图/代码。此外，什么是“默认播放列表”？你是说播放队列吗？我还编写了一个编辑播放列表但没有您描述的问题的应用程序。还要记住指定您使用的 API 版本。

贾塞科

# javascript - 如何将图像保留在 html 中以不与页面的其余部分一起移动？

> ID：15314642
> 
> 赞同：1
> 
> 时间：2013-03-09T19:01:01.597
> 
> 标签：javascript, html, image

是否可以在用户滚动网页时阻止图像移动。就像用户总是看到图像？我想可以使用 a 但我不知道如何。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T19:01:51.017

使用 css`position: fixed;`属性，指定`top`和`left`绝对属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T19:03:08.443

```
body {
  background-image: url("http://yoursite.com/path/to/image.gif");
  background-position: 50% 50%;
  background-repeat: no-repeat;
} 
```

# php - PHP包含变量到文件计数

> ID：15314645
> 
> 赞同：0
> 
> 时间：2013-03-09T19:01:14.637
> 
> 标签：php

```
$filecount = count(glob("images/profile/" . $db->getUserID($_SESSION['username']) . "*.png")); 
```

该文件夹现在应该是

图片/个人资料/1

```
$db->getUserID($_SESSION['username']); 
```

返回一个 1 所以似乎我有问题将变量包含到文件路径中。它存在并且里面有一个名为avatar.png的图片。所以filecount应该是1。我有一个

```
if($filecount == 1)
{
    echo "Test"
}
else
{
    echo "Test2"
} 
```

但它总是呼应 Test2 而不是 Test。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T19:04:52.957

您的代码正在寻找这样的文件：

```
images/profile/1something.png 
```

`/`在`*`. _

# mysql - 在 VB.NET 中限制一天的进出时间？

> ID：15314646
> 
> 赞同：0
> 
> 时间：2013-03-09T19:01:17.703
> 
> 标签：mysql, vb.net, fingerprint, time-and-attendance

我开发了一个使用指纹的时间监控系统，员工将扫描他/她的手指，然后记录时间和超时。但我的问题是员工的登录和注销是无限的。是否有员工可以在一天内登录和注销一次的解决**方案**？每个员工将登录和注销一次。这是我的每日时间记录表的代码：（我使用 Visual Studio 2010/Digital Persona UareU 作为我的扫描仪）

```
Imports MySql.Data.MySqlClient
Imports System.Windows.Forms
Imports DPFP

Public Class frmDTR
Dim counter As Integer = 0
Dim oConn As New MySqlConnection(ConnectionString.ConnString)

Private matcher As DPFP.Verification.Verification
Private matchResult As DPFP.Verification.Verification.Result
Private Sub OK_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles OK.Click
    Me.Close()
End Sub

Public Sub SEARCH_EMPLOYEE()
    Try
        'Load From DB
        GlobalFunctions.db_connect()

        Dim reader As MySqlDataReader

        Dim command As MySqlCommand = connection.CreateCommand()
        command.CommandText = "SELECT * FROM employee_records WHERE ID_Number='" & strid & "'" 'check tag number if existing
        reader = command.ExecuteReader()
        If (reader.HasRows) Then
            While (reader.Read())
                With Me
                    'plot the data into controls

                    .txtID.Text = reader(1).ToString
                    .txtFirst.Text = reader(2).ToString
                    .txtMiddle.Text = reader(3).ToString
                    .txtLast.Text = reader(4).ToString
                    .txtAge.Text = reader(5).ToString
                    .txtBday.Text = reader(6).ToString
                    .txtDepartment.Text = reader(7).ToString
                    .txtYear.Text = reader(8).ToString
                    .txtGender.Text = reader(9).ToString
                    .txtContact.Text = reader(10).ToString
                    .txtMobile.Text = reader(11).ToString
                    .txtEmail.Text = reader(12).ToString

                    'fetch image from database
                    Dim imgBytes() As Byte = reader("image") 'image field
                    Dim image As Bitmap = New Bitmap(New System.IO.MemoryStream(imgBytes)) 'convert binary to image
                    .ProfilePic.Image = image 'show picture to picture box

                End With
                Call LOG_EMP()    'look up if login /log out
                Timer1.Enabled = True

            End While

        Else

            'Me.lblStatus.Text = "ID not recognized!"

        End If
    Catch ex As Exception
        MessageBox.Show("Error scanning: " & ex.Message)
    End Try

    GlobalFunctions.connection.Close()
End Sub

Public Sub LOG_EMP()
    Try

        ' Load From DB
        GlobalFunctions.db_connect()

        Dim reader As MySqlDataReader

        Dim command As MySqlCommand = connection.CreateCommand()

        command.CommandText = "SELECT * FROM employee_logs WHERE ID_Number='" & strid & "' AND Time_Out='Null'"
        reader = command.ExecuteReader()
        If (reader.HasRows) Then
            While (reader.Read())

            End While

            'logout
            Call EMP_LOGOUT()

        Else

            'log in
            Call EMPT_LOGIN()

        End If

    Catch ex As Exception
        MessageBox.Show("Error scanning: " & ex.Message)
    End Try
    GlobalFunctions.connection.Close()
End Sub

'insert login data
Public Sub EMPT_LOGIN()
    ' Connect to Database
    GlobalFunctions.db_connect()
    Dim command As MySqlCommand
    Dim transaction As MySqlTransaction
    transaction = GlobalFunctions.connection.BeginTransaction()
    Try
        command = New MySqlCommand("INSERT INTO employee_logs values('','" & txtID.Text & "','" & txtFirst.Text & "','" & txtMiddle.Text & "','" & txtLast.Text & "','" & txtDepartment.Text & "','" & Date.Today & "','" & TimeOfDay & "','Null') ", GlobalFunctions.connection, transaction)
        command.ExecuteNonQuery()
        transaction.Commit()

        'sms = txtFirst.Text & " Enter the Building Premises @" & Now 'actual sms
        lblStatus.ForeColor = Color.Lime
        Dim SAPI
        SAPI = CreateObject("SAPI.spvoice")

        SAPI.Speak("Welcome!" & txtFirst.Text)
        Me.lblStatus.Text = "Successfully Logged IN! Welcome!" 'set status to login

        'Will_SendSMS()    'send sms to number

    Catch ex As MySqlException
        MessageBox.Show("Error in inserting new record! Error: " & ex.Message, "Data Error", MessageBoxButtons.OK, MessageBoxIcon.Error)
        transaction.Rollback()
    End Try
    'close connections
    GlobalFunctions.connection.Close()

End Sub

Public Sub EMP_LOGOUT()
    ' Connect to Database
    GlobalFunctions.db_connect()
    ' Dim command As MySqlCommand
    Dim transaction As MySqlTransaction
    transaction = GlobalFunctions.connection.BeginTransaction()

    Try
        GlobalFunctions.execute_nonquery("Update employee_logs set Time_Out='" & TimeOfDay & "' WHERE ID_Number='" & strid & "' AND Time_Out='Null' AND Date='" & Date.Today & "'")
        transaction.Commit()
        'sms = txtFirst.Text & " Left the Building Premises @" & Now & "Powered by: " ' actual sms to be sent
        lblStatus.ForeColor = Color.Lime
        Dim SAPI
        SAPI = CreateObject("SAPI.spvoice")

        SAPI.Speak("Goodbye!" & txtFirst.Text)
        lblStatus.Text = "Successfully Logged OUT! Goodbye!" ' set status to logout
        'Will_SendSMS()  'send sms

    Catch ex As MySqlException
        MessageBox.Show("Error in updating a record! Error: " & ex.Message, "", MessageBoxButtons.OK, MessageBoxIcon.Error)
        transaction.Rollback()
    End Try
    '  close connections
    GlobalFunctions.connection.Close()

End Sub

Private Sub Timer1_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Timer1.Tick
    'counter for display
    counter += 1
    If counter = 6 Then

        Call ClearTextBox(Me)
        lblStatus.ForeColor = Color.Lime
        Me.lblStatus.Text = "Please scan your finger....."
        Lblverify.ForeColor = Color.Black
        Lblverify.Text = "Status"
        ProfilePic.Image = Nothing
        Timer1.Enabled = False
        counter = 0

    End If
End Sub

Private Sub frmDTR_Activated(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Activated
    Try
        Me.VerificationControl.Focus()

    Catch ex As MySqlException
        MessageBox.Show("System Error: " & ex.Message, "", MessageBoxButtons.OK, MessageBoxIcon.Error)

    End Try

End Sub

Private Sub frmDTR_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    matcher = New Verification.Verification()
    matchResult = New Verification.Verification.Result

    Me.VerificationControl.Focus()
    Dim SAPI
    SAPI = CreateObject("SAPI.spvoice")

    SAPI.Speak("Please scan your finger")
End Sub

Private Sub VerificationControl_OnComplete(ByVal Control As Object, ByVal FeatureSet As DPFP.FeatureSet, ByRef EventHandlerStatus As DPFP.Gui.EventHandlerStatus) Handles VerificationControl.OnComplete
    Dim strSQL As String = "Select * from finger_template"
    Dim oDa As New MySqlDataAdapter(strSQL, oConn)
    Dim dt As New DataTable
    Dim dr As DataRow
    Try
        oDa.Fill(dt)
        For Each dr In dt.Rows

            Lblverify.ForeColor = Color.Red
            Lblverify.Visible = True
            Dim bytes As Byte() = Nothing
            bytes = dr.Item("byte_template")

            Dim tmplate = New DPFP.Template()
            tmplate.DeSerialize(bytes)
            matcher.Verify(FeatureSet, tmplate, matchResult)

            If matchResult.Verified Then

                EventHandlerStatus = DPFP.Gui.EventHandlerStatus.Success
                strid = dr.Item("Account_ID")

                Call SEARCH_EMPLOYEE()

                Exit For ' success
            End If

            If Not matchResult.Verified Then EventHandlerStatus = DPFP.Gui.EventHandlerStatus.Failure

            Lblverify.Text = "Status"
            lblStatus.Text = "Unrecognize fingerprint....."
            Lblverify.ForeColor = Color.Red
            lblStatus.ForeColor = Color.Red

            Timer1.Start()

        Next
    Catch ex As Exception
    End Try
End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T07:48:30.633

您正在开发此逻辑非常好。实际上，我遇到了您的问题。现在我可以向您推荐一些使用后端 MS ACCESS 2007 的 vb.net 代码。您只需验证员工何时登录，然后将此代码放在登录按钮或您正在使用的任何内容之后。

```
Dim cmd1 as oledbcommond

cmd1 = New OleDbCommand("SELECT * FROM LOGTIME WHERE timein<>null  and timeout<>null and dt='" & Label8.Text & "' and eid='" & txtemid.Text & "' ", cn)

    dr = cmd1.ExecuteReader()
    If dr.Read Then
        MessageBox.Show("Already this Employee ID contains today's attendance,now you can't Log again", "Information On Your ID", MessageBoxButtons.OK, MessageBoxIcon.Information)
        cmd1.Dispose()
        cn.Close()
        Exit Sub
    End If 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T08:10:09.947

只需按照步骤

使用将验证用户的普通登录按钮，然后如果经过身份验证的用户然后在另一个文本框中以相同的形式显示他的登录时间。现在再使用一个文本框来显示注销时间

1）使用两个按钮a）按钮1作为登录时间按钮，b）按钮2作为注销时间按钮2）然后编写代码将登录时间添加到数据库中，为了更好地理解，也放置一个显示“时间”的消息框添加到数据库中”，然后输入上面的代码，如果员工想在一天内登录两次或三次，则该代码将验证当天的出勤率，该代码将不允许他再次登录，只有一次他/她可以......并在登录按钮后面对上面的代码进行编码
注意：-请记住，员工注销后所有程序都将起作用..希望这对您有所帮助..

# lua - 碰撞过滤器不起作用

> ID：15314648
> 
> 赞同：0
> 
> 时间：2013-03-09T19:01:28.887
> 
> 标签：lua, coronasdk

嗨，我正试图让这个碰撞过滤器工作，但我有点卡住了......

```
local bad1CollisionFilter1 = { categoryBits = 1, maskBits = 3 }

if ( temp.imgpath == "BCloud1.png" ) then
 physics.addBody( randomStar, { density=2.9, friction=0.5, bounce=0.3, radius=16, filter=bad1CollisionFilter1 } )
end

local collision = function( bad1CollisionFilter1 )
 if bad1CollisionFilter1.phase == 'began' then
   print("Hello i am  CollisionFilter1")
 end
end 
```

任何帮助使这项工作得到赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T17:30:37.350

通过查看和的 Corona [`collision`](http://developer.coronalabs.com/content/game-edition-collision-detection)API [`EventListener`](http://developer.coronalabs.com/content/game-edition-collision-detection)；您需要在正文中**添加**一个均匀的侦听器。将以下语句添加到您的脚本中。

```
Runtime:addEventListener( "collision", collision ) 
```

其中第一个参数声明它是一个碰撞事件监听器，第二个参数是函数名；在你的情况下是`collision`。

# javascript - 如何在 jQuery 中创建一个数组来保存每个帖子的值？

> ID：15314650
> 
> 赞同：0
> 
> 时间：2013-03-09T19:01:33.023
> 
> 标签：javascript, jquery

我想要做的是使用 jQuery 为每个类别设置一个图标。到目前为止，代码如下所示：

```
var category = $(".odd, .even").children('.views-field-field-category').text();

if (category=="funny") { 
   $(".odd, .even").children('.views-field-field-category').html('image-tag'); 
} 
```

由于变量类别收集了该页面中的所有类别值并将它们组合起来（因此它看起来像“有趣的 gifs 视频 gifs”等），我决定我需要一个数组来分别保存它们。现在我尝试以各种方式做到这一点，但没有任何成功。你能帮我看看如何设置它以便我可以使用`if (category[i]=="funny") { do this }`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T19:06:49.487

您可以创建一个对象：

```
var o = {
   'funny' : 'html-tag',
   'gifs'  : 'html-tag2',
   'crazy' : '...'
} 
```

并使用`html`回调函数。

```
$(".odd, .even").children('.views-field-field-category').html(function(i, html){
   var prop = $(this).text().toLowerCase();
   return o[prop];
}) 
```

# c# - 如何仅将文本框条目的最后 4 位插入数据库？

> ID：15314651
> 
> 赞同：2
> 
> 时间：2013-03-09T19:01:37.000
> 
> 标签：c#, string

我有一个插入查询，它将文本框的值插入到数据库表中。这是一个信用卡号码文本框，所以我只想存储号码的最后 4 位。我怎样才能做到这一点？我会告诉你我现在有什么：

```
cmd.Parameters.Add("@Number", System.Data.SqlDbType.VarChar, 50).Value = txtCardNumber.Text; 
```

之后我尝试添加 " , -4" ，但它不允许这样做。任何帮助将不胜感激。

注意：否则一切都正确插入。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T19:04:01.657

这是基本的字符串操作。

要获取任何字符串的最后四个字符：

```
theString.Substring(theString.Length - 4) 
```

我建议你好好看看[`String`](http://msdn.microsoft.com/en-gb/library/system.string.aspx)类上定义的不同方法和属性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-09T19:04:14.080

使用[`String.Substring()`](http://msdn.microsoft.com/en-us/library/aka44szs.aspx)方法

> 从此实例中检索子字符串。子字符串从指定的字符位置开始。

```
cmd.Parameters.Add("@Number", System.Data.SqlDbType.VarChar, 50).Value = txtCardNumber.Text.Substring(txtCardNumber.Text.Length - 4); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-09T19:05:15.323

这个怎么样？？

```
cmd.Parameters.Add("@Number", System.Data.SqlDbType.VarChar, 50).Value =   txtCardNumber.Text.Substring(txtCardNumber.Text.Length - 4) 
```

或者你也可以这样做，虽然不是最好的解决方案..

```
var last4digits = (long.parse(txtCardNumber.Text)%10000).ToString();

cmd.Parameters.Add("@Number", System.Data.SqlDbType.VarChar, 50).Value = last4digits; 
```

# xcode - 如何在 Xcode 的 credits.rtf 文件中添加链接？

> ID：15314652
> 
> 赞同：6
> 
> 时间：2013-03-09T19:01:47.617
> 
> 标签：xcode, macos

我正在构建一个 Xcode 应用程序，并想在我的 credits.rtf 文件中添加一个网站链接。我该怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-22T17:59:21.467

*   在 Xcode 中右键单击该`Credits.rtf`文件。
*   选择**打开方式**
*   选择**源代码**
*   添加以下内容以创建链接`{\field{\*\fldinst{HYPERLINK "http://google.com"}}{\fldrslt Google}}`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-10-19T13:25:42.337

在 Xcode 中打开 Credits.rtf，选择你想成为链接的文本，然后选择**Editor > Add Link...**菜单项将其变成链接。

# php - MySQL数据库复制方法

> ID：15314653
> 
> 赞同：3
> 
> 时间：2013-03-09T19:01:49.403
> 
> 标签：php, mysql, replication

我正在建立一个供客户使用的网站，它将在那里存储基本信息和项目或服务，以支付我的公司费用。整个登录 + 面板将在 SSL/HTTPS 下运行，但我主要关心的是数据库复制，以防止任何丢失某些内容的事件。

因为有些项目是由我为客户托管的，所以我需要一种方法来确保那里的数据安全可靠。目前我正在使用 Media Temple GS 服务，但将转向 DV 服务，更多客户开始接机。

根据我个人的知识，我正在考虑做一些你会用硬盘做的事情。哪里有主人，然后是奴隶。在 SQL 术语中，会有一个主（索引）数据库，而从属（缓存）数据库很少。

但问题是，将主服务器复制或备份到从服务器的最佳方式是什么？我应该有额外的 GS 或 DV 服务器还是使用相同的服务器但使用不同的数据库名称就足够了？

**编辑** 我在 MT 周围做了一些查看，然后遇到了 MySQL GridContainer，这似乎与第二台服务器的功能相同。这会是实际第二台服务器的一个很好的选择吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T20:25:20.947

备份复制的想法是将数据库复制到另一个数据库，您可以在生产数据库运行时停止并创建该停止数据库的完整备份。

您可以使用同一台服务器来创建备份文件，但不要忘记，备份会破坏服务器性能（硬盘负载）。此外 - 当数据库很大，并且您需要历史备份文件时 - 您可能需要压缩备份文件，压缩操作将完全破坏您的服务器性能。

您无法避免第二台服务器，因为无论如何您都必须将备份复制到另一台机器上（在同一台机器上备份没有意义）。

所以一般来说 - 最好复制到另一台机器上，当主服务器关闭时，它也可以在危机情况下使用。

我发现了很多关于高可用性 MySQL 解决方案的好文章：[链接到 mysql.com](http://dev.mysql.com/doc/refman/5.0/en/ha-overview.html)。

# sql-server - 从 Grails 访问 SQL Server 2008 视图

> ID：15314659
> 
> 赞同：0
> 
> 时间：2013-03-09T19:02:04.550
> 
> 标签：sql-server, grails

我们有一个 Grails 项目需要从 SQL Server 2008 视图中提取数据。我们只需要从视图中进行基本选择。

是否有视图的配置设置，以便我们可以将域类映射到视图？

或者我们应该使用原始 SQL，例如：

```
db.rows("SELECT foo, bar FROM my_view") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T19:29:09.070

您可以使用 SQL，例如，`groovy.sql.Sql`如其他类似问题的答案中所建议的那样，但它也可以在域类中使用。如果您创建一个域类（使用任何合理的名称）并将其表名指定为视图的名称，则可以从中进行选择。当然，您会在创建和更新时遇到问题，但如果您只想阅读，那就没问题了：

```
class SomeDomainClass {
   String foo
   Integer bar
   static mapping = {
      table 'my_view'
   }
} 
```

如果您将类命名为 MyView，则不需要映射，因为命名约定适用，但这对于该类来说是一个错误的名称，因为使用它与它由视图支持的事实无关。

请注意，当使用 dbCreate 设置为“create”、“create-drop”或“update”时，您也会遇到问题，因为 Hibernate 会尝试创建表，但它不会导致任何真正的问题，只会显示一个可忽略的像“无法创建表'my_view'，因为它已经存在”之类的错误。一旦你开始使用数据库迁移，这根本不是问题。

# java - 将部分透明的像素图绘制到纹理 (libgdx)

> ID：15314660
> 
> 赞同：0
> 
> 时间：2013-03-09T19:02:08.213
> 
> 标签：java, opengl, libgdx

使用 libgdx，我们必须做些什么来启用将像素图绘制到纹理的透明度？我在传递像素图的纹理 draw() 调用之前尝试过这样做：

```
Gdx.gl.glClearColor(0.5f, 0.0f, 0.0f, 1.0f);
Gdx.gl.glClear(GL10.GL_COLOR_BUFFER_BIT);
Gdx.gl.glEnable(GL10.GL_BLEND); 
```

但它正在绘制不透明的深红色 (glClearColor) 颜色，而不是透明像素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T04:49:50.347

我不知道纹理绘制缺乏透明度的原因，但似乎只使用像素图（将像素图绘制到另一个更大的像素图上）并且仅在最后一步渲染到纹理是解决方案。

找不到关于它的信息，所以我只能假设不支持将透明像素图绘制到纹理以与纹理的背景颜色混合。

# c - PAPI 和本机事件

> ID：15314663
> 
> 赞同：2
> 
> 时间：2013-03-09T19:02:21.673
> 
> 标签：c, papi

是否可以找到映射到 PAPI 事件的一组本机事件（CPU 计数器寄存器）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-21T09:23:20.223

如果你安装了 papi，你可以使用 papi_avail 来获取原生事件。例如，

papi_avail -e PAPI_TOT_INS

> 事件名称：PAPI_TOT_INS
> 事件代码：0x80000032
> 本机事件数：1 简短描述：|Instr 已完成|
> 详细说明：|说明已完成|
> 开发者备注：||
> 派生类型：|NOT_DERIVED|
> 后缀处理字符串：||
> 本机代码[0]：0x40000002 |INSTRUCTION_RETIRED|
> 寄存器值数：0 本
> 机事件描述：|退休时的指令数|

-Ganesh

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-04-10T12:51:24.077

我想你的意思是

`papi_native_avail`

例如，`PAPI_event_name_to_code(...)`您可以将*事件*添加到事件*集中*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-27T13:27:22.823

为了快速查看和导出从预设事件到本机事件的所有可用映射，请使用`papi_decode -a`命令。输出为 CSV 格式。我的 CPU 的一个例子：

```
pc@pc ~> papi_decode -a
name,derived,postfix,short_descr,long_descr,note,[native,...]

PAPI_L1_DCM,NOT_DERIVED,,"L1D cache misses","Level 1 data cache misses",,L1D:REPLACEMENT
PAPI_L1_ICM,NOT_DERIVED,,"L1I cache misses","Level 1 instruction cache misses",,L2_RQSTS:ALL_CODE_RD
PAPI_L2_DCM,DERIVED_SUB,,"L2D cache misses","Level 2 data cache misses",,LLC_REFERENCES,L2_RQSTS:CODE_RD_MISS
(...) 
```

# android - 如何设置最小屏幕尺寸？

> ID：15314667
> 
> 赞同：2
> 
> 时间：2013-03-09T19:03:01.847
> 
> 标签：android

我创建了新的应用程序，它不适用于手机。我的应用程序基于 7" 平板设备。当我尝试将我的应用程序放入 Play 商店时，它显示我支持 2000 台 Android 设备，但并非所有设备都是平板电脑。实际上，我不希望谷歌所有它的设备和设置过滤器，你知道为什么！

如何在我的应用程序中以编程方式声明最小屏幕尺寸，就像我可以设置 minimun sdk 级别一样。

**更新：**

我被设置在 AndroidManifest.xml 中`<compatible-screens>`，`<supports-screens>`就像这样：

```
<supports-screens android:requiresSmallestWidthDp="600"
              android:smallScreens="false"
              android:normalScreens="false"
              android:largeScreens="false"
              android:xlargeScreens="true"
             />

<compatible-screens>
    <screen android:screenSize="xlarge" android:screenDensity="xhdpi"/>
    <screen android:screenSize="xlarge" android:screenDensity="ldpi"/>
    <screen android:screenSize="xlarge" android:screenDensity="hdpi"/>
    <screen android:screenSize="xlarge" android:screenDensity="mdpi"/>

</compatible-screens> 
```

现在我的应用程序仅适用于 7 英寸以上的平板电脑。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-09T19:17:19.880

您需要`<supports-screens>`按照 DJHacktorReborn 的建议使用，但不仅仅是`android:requiresSmallestWidthDp`，因为 Play 商店不使用它进行过滤。

相反，使用：

```
<manifest ... >
    <supports-screens android:smallScreens="false"
                      android:normalScreens="false"
                      android:largeScreens="true"
                      android:xlargeScreens="true"
                      android:requiresSmallestWidthDp="600" />
    ...
    <application ... >
        ...
    </application>
</manifest> 
```

有关更多信息，请参阅[文档](http://developer.android.com/guide/practices/screens-distribution.html#FilteringTabletApps)。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-09T19:13:10.700

您可以像这样在清单中定义有关[mutliScreenSupport的更多详细信息](http://developer.android.com/guide/practices/screens_support.html)

```
 <manifest ... >
        <supports-screens android:requiresSmallestWidthDp="600" />
        ...
    </manifest> 
```

对于市场过滤器，您需要使用`<compatible-screens>` [更多详细信息](http://developer.android.com/guide/topics/manifest/compatible-screens-element.html)

# c++ - 生成字符串向量的所有组合

> ID：15314668
> 
> 赞同：1
> 
> 时间：2013-03-09T19:03:06.670
> 
> 标签：c++, algorithm, combinations

我正在尝试解决一些 UVA 的问题，我想生成字符串数组的所有可能组合。例如 ：

```
 string str[]={"abcd","efg","hij"}; 
```

所以程序必须打印：

```
 >abcd efg hij
    >abcd hij efg
    >hij abcd efg
    >hij efg abcd 
    >efg abcd hij
    >efg hij abcd 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T19:15:03.853

我认为您正在寻找 STL 的[next_permutation](http://www.cplusplus.com/reference/algorithm/next_permutation/)算法。

应用于您的示例，它应该如下所示：

```
std::sort (str, str+3);

std::cout << "The 3! possible permutations with 3 elements:\n";
do {
  std::cout << str[0] << ' ' << str[1] << ' ' << str[2] << '\n';
} while ( std::next_permutation(str, str+3) ); 
```

# jquery - jQuery 与其他库冲突 (MooTools)

> ID：15314671
> 
> 赞同：0
> 
> 时间：2013-03-09T19:03:16.527
> 
> 标签：jquery, mootools

我在实现一个使用 jQuery 的小型 javascript 时遇到了麻烦。代码是

```
$(document).ready(function () {
     $("span.question").hover(function () {
         $(this).append('<div class="tooltip"><p>This is a tooltip. It is typically used to explain something to a user without taking up space on the page.</p></div>');
     }, function () {
         $("div.tooltip").remove();
     });
 }); 
```

我看过类似的帖子，据说问题是由 mootools javascript 冲突引起的。所以我用'jQuery'替换了'$'的每个实例，但是脚本仍然什么都不做，并且firebug控制台中没有显示任何错误。有人可以向我指出问题所在吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T19:17:40.107

阅读本[文档](http://api.jquery.com/jQuery.noConflict/)。

> 许多 JavaScript 库使用 $ 作为函数或变量名，就像 jQuery 一样。在 jQuery 的例子中，$ 只是 jQuery 的别名，所以所有功能都可以在不使用 $ 的情况下使用。如果您需要与 jQuery 一起使用另一个 JavaScript 库，请通过调用 $.noConflict() 将 $ 的控制权返回给另一个库。$ 的旧引用在 jQuery 初始化期间被保存；noConflict() 只是恢复它们。

因此，您需要将控件移回`jQuery`. 然后你将不得不使用`jQuery`而不是'$'。

```
<script type="text/javascript">
    $.noConflict();
    jQuery(document).ready(function($) {
        jQuery("span.question").hover(function () {
            jQuery(this).append('<div class="tooltip"><p>This is a tooltip. It is typically used to explain something to a user without taking up space on the page.</p></div>');
        }, function () {
            jQuery("div.tooltip").remove();
        });
     });
</script> 
```

**注意：**请确认 jQuery 只包含一次。

**编辑：**我忘了关闭`.ready`功能。我修好了。这是一个[小提琴](http://jsfiddle.net/zxCNw/)链接，看看它是如何工作的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T19:07:51.057

尝试在代码的开头编写：

```
jQuery.noConflict() 
```

# java - 如何在控制台中查看 log4J 消息

> ID：15314674
> 
> 赞同：2
> 
> 时间：2013-03-09T19:03:18.893
> 
> 标签：java, configuration, log4j

我在 NetBeans 中有一个应用程序，我正在尝试使用调试消息来记录方法调用，例如：

```
public class PersonService {

     protected static Logger logger = Logger.getLogger(PersonService.class.getName());

     public void add(Person person) { 
        logger.debug("PersonService.add called");
        ...
     } 
```

我的 log4j 配置文件位于项目的 WEB-INF 文件夹中，如下所示：

```
log4j.rootLogger=DEBUG,console

#Console Appender 
log4j.appender.console=org.apache.log4j.ConsoleAppender
log4j.appender.console.layout=org.apache.log4j.PatternLayout
log4j.appender.console.layout.ConversionPattern=[%5p] [%t %d{hh:mm:ss}] (%F:%M:%L) %m%n 
```

我知道这应该将调试消息打印到控制台，但到目前为止我什么也没得到。

我也在输出中收到了这个：

```
log4j:WARN No appenders could be found for logger (org.springframework.web.context.ContextLoader).
log4j:WARN Please initialize the log4j system properly. 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T19:10:34.657

将`log4j.properties`文件放入`WEB-INF/classes`，您应该将其保存在类路径中。

另一种（更正确的方法）是将所有文件保存在单独的属性文件夹中，在创建 Web 存档期间`.properties`内容会自动移动到该文件夹​​中。`WEB-INF/classes`在 Eclipse 中，这种文件*夹在构建路径上称为源文件夹*。

# c++ - 'operator==' 不匹配

> ID：15314677
> 
> 赞同：1
> 
> 时间：2013-03-09T19:03:36.763
> 
> 标签：c++, pointers, operator-keyword

我遇到了完全未知的错误。我在网上搜索了有关该错误的信息，但是出来的东西不起作用，错误在以下代码行：

```
if(opcion==1 && ((*Lista)->PrimerNodo->siguiente)==((*Lista)->UltimoNodo)) 
```

我收到的错误消息是：

```
error: base operand of `->` has non-pointer type `ListaCircular` 
```

*指针* `*Lista`是 type `ListaCircular`，并且`ListaCircular`是如下构建的结构：

```
struct ListaCircular{
    Nodo *PrimerNodo,*UltimoNodo;
    ListaCircular(){
        PrimerNodo->anterior=UltimoNodo;
        PrimerNodo->siguiente=UltimoNodo;
        UltimoNodo->anterior=PrimerNodo;
        UltimoNodo->siguiente=PrimerNodo;
    } 
```

`*PrimerNodo`和`*UltimoNodo`是类型节点，它是一个构造如下的结构：

```
struct Nodo{
long Cedula,Telefono;
Nodo *siguiente,*anterior;
char* Nombre,Apellido,Correo;

Nodo()
{
  siguiente=anterior=NULL;
} 
```

任何可以解决错误的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T19:06:53.283

If`Lista`是一个指针，`ListaCircular`例如：

```
 ListaCircular *Lista = .... 
```

那么你`if`的陈述应该是这样的：

```
 if(opcion==1 && (Lista->PrimerNodo->siguiente)==(Lista->UltimoNodo)) 
```

错误消息基本上告诉您，当您`Lista`使用`*`返回的类型取消引用时，它不是指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T19:09:11.537

看起来您应该使用（提供 Lista 指向列表的指针）

```
(*Lista).PrimerNode 
```

等或

```
Lista->PrimerNodo 
```

错误消息本身表明，您的结构中没有`operator ->`定义。如果已定义，您也可以使用`(*Lista)->`- 如果这有意义。你也可以`*`顺便定义一下运算符。

# jquery - jsonp不一致错误：对象不是函数

> ID：15314678
> 
> 赞同：7
> 
> 时间：2013-03-09T19:03:38.150
> 
> 标签：jquery, ajax, jsonp

我正在尝试将 jsonp 与 jQuery 一起使用，但我得到了不一致的行为。有时脚本有效，有时无效；我真的不明白为什么。

这是 Chrome 可能显示的错误：

```
Uncaught TypeError: Property 'jQuery18208278296771459281_1362854738133' of object [object Object] is not a function 
```

在以下示例中，我只是尝试检查应用程序是否在线。但是这种不一致的行为可能会发生在其他类似的 ajax 调用上：

```
 $.ajaxSetup({
        error: function (req, status, ex) {},
        success: function (data, status, req) {},
        timeout: 2000,
        crossDomain: true,
        contentType: "application/json",
        dataType:"jsonp",
        url: "http://myUrl.com/ping.php?preventCache="+new Date()
    });
    return $.ajax(); 
```

服务器端的 PHP 文件也很简单：

```
<?php
header("Content-Type: application/javascript; charset=UTF-8");
echo $_GET['callback'];
?> ({ "status": "online" }) 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-11-21T05:34:49.657

当您的 JSONP 调用超时（根据您的线路，为两秒`timeout: 2000`）时，您将获得此行为，但数据在超时发生后到达。

JSONP 不使用普通的 XmlHTTPRequest。要执行 JSONP，jQuery 会在您的文档中插入一个脚本标签并创建一个临时函数来处理脚本标签加载（函数名称是错误消息中的那个长随机字符串）。

当您发生超时并且脚本尚未完成加载时，jQuery 会丢弃临时函数。在那之后的某个时间，脚本标签完成加载，并尝试调用该函数——但为时已晚，该函数已被删除。因此错误。

延长超时时间可能会减少错误，但基本问题是您无法取消脚本标签的加载。如果它没有出错，那么它总是有可能比你的超时时间长一点。据我所知，这没有很好的解决方案。您可以告诉 jQuery 使用显式命名的函数作为 JSONP 回调而不是自己创建，但是您需要自己跟踪事物是否超时。您可以使用 CORS，这是另一回事。

可能你最好的选择就是忍受它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-22T08:32:11.407

你的问题不太清楚，当我尝试使用相同的回调函数名称两次时，我得到了同样的错误。在任何情况下，这都是在 jquery 中调用 jsonp 的方式：

```
 var mycallback = 'c'+Math.floor((Math.random()*100000000)+1);
      $.ajax({
                   type: 'GET',
                    url: URL,
                    async: true,
                    jsonpCallback: mycallback,
                    contentType: "application/json",
                    dataType: 'jsonp'

       }).done(function(json){
           console.log(json);
                    callback(json);
       }).fail(function(f){
           console.log("f");
                    console.log(f.status);
       }).always(function(){
                   // console.log('complete');
      }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-15T10:56:14.657

检查您的脚本是否连续多次发出相同的 AJAX 请求。

我有一个错误的事件处理程序，它同时触发了两个请求，这导致了同样的问题。

（我假设您调用 $.ajaxSetup 一次）：看起来您打算为您的 ping 调用应用缓存破坏器，但在 $.ajaxSetup 中执行此操作可能会产生相反的效果，因为 URL 将为所有后续请求固定。

# arrays - pl/sql 从数组中删除元素

> ID：15314679
> 
> 赞同：0
> 
> 时间：2013-03-09T19:03:38.550
> 
> 标签：arrays, plsql, oracle11g

我需要从数组中删除元素。我曾尝试使用 array.delete(n) 函数，但它会删除标识符 n 中的所有元素。如何只删除确切的元素 n ？

例如，如果数组是 1 2 3 4 5，并且 n = 3，则删除后它应该如下所示 1 2 4 5。

到目前为止我的代码：

```
DECLARE
  /* declare type array */ 
  TYPE number_index_by_number IS TABLE OF number INDEX BY binary_integer;

  v_n NUMBER := &sv_n;
  v_m NUMBER := &sv_m;
  v_min Number; 
  v_tmp Number;
  v_array number_index_by_number; 
  v_sorted_array number_index_by_number;
begin
  for i in 1..v_n 
  loop
    v_array(i) := dbms_random.value(1,1000);
  end loop;
  for j in v_array.first..v_array.last
  loop
    DBMS_OUTPUT.put_line('v_array('||j||') :'||v_array(j));
  end loop;
  <<i_loop>> for i in 1..v_m
  loop
    /*set first array value to variable min*/
    v_min := v_array(1);
    v_tmp := 1;
    <<j_loop>> for j in v_array.first..v_array.last
    loop
      DBMS_OUTPUT.put_line('v_array('||j||') :'||v_array(j));
      if (v_min > v_array(j)) THEN
        begin
          v_min := v_array(j);
          v_tmp := j;
          DBMS_OUTPUT.put_line(j);
        end;
      end if;
    end loop;
    /*problem is in at this line*/
    v_array.delete(v_tmp);
    v_sorted_array(i) := v_min; 
  end loop;
  for i in v_sorted_array.first..v_sorted_array.last
  loop
    DBMS_OUTPUT.put_line('v_sorted_array('||i||') :'||v_sorted_array(i));
  end loop;
end; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T20:06:44.797

我无法重现您描述的任何行为。除了记录在案的事情之外，我无法让`delete`收集方法做任何事情。

但是，您的代码中有一些错误可能与整理有关。

首先，我应该指出，如果你`3`从 PL/SQL 关联数组中删除一个带键的元素，那么数组中就没有任何带键的元素`3`。剩余的值不会“洗牌”以填补空白。如果`4`在删除之前有一个带有键的元素，那么相同的元素在删除之后仍然有键`4`。因此，如果您`j`从 PL/SQL 关联数组中删除元素`v_array`，然后尝试获取`v_array(j)`，您将收到“未找到数据”错误。`v_array.exists(j)`在尝试获取不存在的元素之前，您应该使用 , 检查该元素是否存在。

其次，索引为 1 的元素可能会在外循环的最后一次迭代之前被删除。如果发生这种情况，`v_array(1)`将失败并出现“未找到数据”错误。最好在循环开始时分配和`NULL`，并在循环期间分配给它们 if is或大于。`v_min``v_tmp``v_min``NULL``v_array(j)`

最后，您的代码似乎`v_m`从`v_n`. 值得验证`v_m`小于或等于`v_n`，否则这是没有意义的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-03-19T14:01:02.343

我担心你不能使用这样的内置方法。而不是你应该创建一个临时数组来收集原始数组中所选元素之前和之后的元素，并返回临时数组。

# javascript - 无法在未定义的脚本问题上调用方法替换

> ID：15314682
> 
> 赞同：0
> 
> 时间：2013-03-09T19:03:46.683
> 
> 标签：javascript, jquery, if-statement, undefined, typeof

由于我无法访问我的网站的 PHP，因此我在下面尝试执行的操作，我正在使用此代码来解决它。它将搜索包含下面列出的两个的任何链接。一个来自 youtube 的 /watch？在它和另一个来自 youtube 的 URL 中只有 /v。它还在搜索任何嵌入的元素。问题是当我运行脚本时，由于错误，它会破坏所有其他代码。

> 未捕获的类型错误：无法调用未定义的方法“替换”

这是一个痛苦的屁股！所以我把它交给 FF，说变量 WT 没有明确定义。好吧，可能不是因为我在 if 语句的范围之外使用了它。我不确定如何确保链接是否存在运行代码。以及如果嵌入存在也运行代码。这些将在我的用户帖子中，并希望它们自动更改为与我的fancybox一起使用。

[这是一个活生生的例子](http://jsbin.com/agasux/1/edit)

它是从我的页面复制的标记，带有快速链接的 CSS，所以不要介意错误的外观。

```
$(function() {
    //if link contains /watch?
    var t = $('.entry-content div div a[href*="youtube.com/watch?"]').attr('href');
    if(typeof t !== "undefined") {
        //do nothing don't run the script below
    } else {
        var d = $('.entry-content div div a[href*="youtube.com/watch?"]');
        var newsrc = t.replace('watch?','');
        var asrc = newsrc.replace('=','/');
        var g = asrc.replace('http://www.','http://img.');
        var s = g.replace('v','vi');
        d.attr('class','ez_video');
        d.attr('href', asrc).html('<img src="'+ s +'/0.jpg"/>');
    }
    //if link contains /v
    var wt = $('.entry-content div div a[href*="youtube.com/v"]').attr('href');

    if(typeof wt !== "undefined") {
        //do nothing don't run script below
    } else {
        var wd = $('.entry-content div div a[href*="youtube.com/v"]');
        var o = wt.replace('http://www.','http://img.');
        var v = o.replace('v','vi');
        wd.attr('class','ez_video');
        wd.attr('href', v).html('<img src="'+ v +'/0.jpg"/>');
    }

    //if embeded file
    var src = $('.entry-content').find('embed').attr('src');
    if (typeof src !== "undefined") {
        //do nothing again unless true run script below
    } else {
        var qload = src.replace('http://youtube.com/v/','');
        var y = src.replace('http://','http://img.');
        var imgsrc = y.replace('v','vi');
        $('embed').before('<a class="ez_video" id="'
            + qload +'" href="'+ src +'"><img src="'
            + imgsrc +'/0.jpg" tile="" alt=""/></a>');
        $('embed').remove();

    } 
    //Now make all work with the fancybox

    $('.ez_video').fancybox({
        'autoScale'     : false,
        'transitionIn'  : 'elastic',
        'transitionOut' : 'elastic',
        'width'         : 854,
        'height'        : 480,
        'type'          : 'swf',
        'swf'           : {
            'wmode'             : 'transparent',
            'allowfullscreen'   : 'true'
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T19:32:05.373

您正在将其与未定义的字符串进行比较，而您应该将其与实际的保留字进行比较：

```
if(typeof wt !== undefined) 
```

你也可以这样做：

```
if(wt !== "undefined") 
```

顺便说一句，你正在做的是，如果它不是未定义的 - 什么都不做，否则 - 做一些事情，这真的是你想要的吗？

# symfony - 无法使自定义存储库正常工作

> ID：15314683
> 
> 赞同：10
> 
> 时间：2013-03-09T19:03:47.490
> 
> 标签：symfony, doctrine-orm

我正在关注 Symfony2 教程（第 4 章），但我无法`getLatestBlogs`从我的自定义存储库中检索该方法。

我在 Linux Mint 上使用 Symfony 2.2 和 Phar。

我自己创建了存储库，但我很难过。我收到此错误：

> 未定义的方法“getLatestBlogs”。方法名称必须以 findBy 或 findOneBy 开头！- 坏方法调用异常

我用谷歌搜索了其他类似的问题，但无济于事。**有人能在我的代码中发现错误吗？**

**附加信息**

我的 composer.json 内容如下：

```
"require": {
    "php": ">=5.3.3",
    "symfony/symfony": "2.2.0", ** NOTE : Originally read 2.2.* but I changed and successfully ran a composer update **
    "doctrine/orm": ">=2.2.3,<2.4-dev",
    "doctrine/doctrine-bundle": "1.2.*",
    "twig/extensions": "1.0.*",
    "symfony/assetic-bundle": "2.1.*",
    "symfony/swiftmailer-bundle": "2.2.*",
    "symfony/monolog-bundle": "2.2.*",
    "sensio/distribution-bundle": "2.2.*",
    "sensio/framework-extra-bundle": "2.2.*",
    "sensio/generator-bundle": "2.2.*",
    "jms/security-extra-bundle": "1.4.*",
    "jms/di-extra-bundle": "1.3.*",
    "doctrine/doctrine-fixtures-bundle": "dev-master",
    "doctrine/data-fixtures" : "dev-master"        
}, 
```

我的`src/Blogger/BlogBundle/Controller/PageController.php`：

```
namespace Blogger\BlogBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Blogger\BlogBundle\Entity\Enquiry;
use Blogger\BlogBundle\Form\EnquiryType;

class PageController extends Controller
{
    public function indexAction()
    {
        $em = $this->getDoctrine()
               ->getManager();

        $blogs = $em->getRepository('BloggerBlogBundle:Blog')->getLatestBlogs();

        return $this->render('BloggerBlogBundle:Page:index.html.twig', array(
            'blogs' => $blogs
        ));
    } 
```

原来是谎言和我的`src/Blogger/BlogBundle/Entity/Blog.php`：

```
namespace Blogger\BlogBundle\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
 * @ORM\Table(name="blog")
 * @ORM\Entity(repositoryClass="Blogger\BlogBundle\Repository\BlogRepository")
 * @ORM\HasLifecycleCallbacks()
 */
class Blog
{ 
```

最后是我的`src/Blogger/BlogBundle/Repository/BlogRepository.php`：

```
namespace Blogger\BlogBundle\Repository;

use Doctrine\ORM\EntityRepository;

/**
 * BlogRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class BlogRepository extends EntityRepository
{

    public function getLatestBlogs($limit = null)
    {
        $qb = $this->createQueryBuilder('b')
                   ->select('b')
                   ->addOrderBy('b.created', 'DESC');

        if (false === is_null($limit))
            $qb->setMaxResults($limit);

        return $qb->getQuery()
                  ->getResult();
    }

} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-09T20:56:38.293

您可以检查以下内容来解决此问题：

*   确保注释中的 FQCN 与存储库文件的类名匹配，并且您已设置正确的命名空间。

*   如果您有此活动或暂时禁用 Doctrine 缓存，请清除所有元数据缓存。

    `app/console doctrine:cache:clear-metadata`

*   检查您的映射类型是否`annotation`在您的配置中设置为。即如果你有你必须在 yml 文件`yml`中定义你的。`repositoryClass`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-10-04T13:00:11.240

我的问题是生成的 xml 文件不断覆盖注释。我读过注释和其他类型的配置不能一起存在，但忘记了我的仍然存在。

确保在 src/xxxx/xxxBundle/Resources/config/doctrine 中没有实体定义（即 SomeEntity.orm.xml）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-06-03T13:42:31.803

我的解决方案是更改实体注释的顺序：

```
/**
* Comments
* 
* @ORM\Entity(repositoryClass="CmsBundle\Entity\CommentsRepository")
* @ORM\Table()
* @ORM\Entity    
*/ 
```

没用，但是

```
/**
* Comments
* 
* @ORM\Table()
* @ORM\Entity
* @ORM\Entity(repositoryClass="CmsBundle\Entity\CommentsRepository")
*/ 
```

确实有效:)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-09T20:00:47.553

尝试添加`use Blogger\BlogBundle\Entity\Blog;`到您的控制器。

# css - Twitter bootstrap 100% 页脚背景

> ID：15314685
> 
> 赞同：1
> 
> 时间：2013-03-09T19:03:57.960
> 
> 标签：css, twitter-bootstrap

我的网站有固定宽度的布局。我的意思是我没有使用响应式布局。

所以我删除了 bootstrap-responsive.css 文件。

但看起来 bootstrap 在使用固定宽度布局时在页脚背景中有一些错误。

我的意思是检查这个快照。

![在此处输入图像描述](../Images/1e591a42f5ad807a3c3d6b482ab87c97.png)

有人可以告诉我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T19:14:44.603

根据底部的滚动条，您的窗口大小似乎小于页面大小，因为您删除了响应性。基于对 Bootstrap 文档的快速测试，我认为您可以通过添加`width:100%;`到 body 标记来解决此问题。一切都只是设置为填充包含它的项目，没有其他设置宽度（默认情况下甚至是 body 标签）。这应该拉伸页面以环绕所有元素，而不仅仅是填充窗口。

更新：CSS 应该是`min-width:960px`. 当然，在其他情况下，您可能希望更改此最小宽度值，但对于没有响应能力的 Bootstrap CSS，这是基本网格系统宽度。

# c - 在C中反转字符串

> ID：15314686
> 
> 赞同：0
> 
> 时间：2013-03-09T19:03:59.610
> 
> 标签：c

```
#include<stdio.h>
#include<string.h>
#include<malloc.h>
char *str_rev(char s[]){
 static char *st = NULL;
 static char *l;
 int i = 0,c = 0;
 st = malloc((strlen(s) * sizeof(*s))+1);
 *l = st;
 if(s == NULL){
  return "INVALID PARAMS";
 }
 for(i=0;s[i]!='\0';i++){
 ;
 }
 for(c=i;c >=0;c--){
  *l++ = s[c];
 }
 l = '\0';

 return st;
}
int main(){
 char a[]="Angus Declan R";
 printf("\n %s \n",str_rev(a));
 return 0;
} 
```

如何释放在 func str_rev() 中使用 malloc() 分配的内存，因为我需要重新运行反转的字符串。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T19:15:47.973

**(1)：**第一次记忆`l`是`\0`由于以下原因，这是什么都不打印的原因：

在你的循环之后

```
for(i=0;s[i]!='\0';i++){
 ;
 } 
```

`s[i]`成为 `\0`并且您`c=i`在第二个循环中分配，然后您`\0`在`l`.

```
for(c=i;c >=0;c--){
  *l++ = s[c];  // you are assigning `\0` for first time
 } 
```

你返回`return l;`并且在第一个位置`l` `\0`是这样所以在 printf 语句中`%s`

```
printf("\n %s \n",str_rev(a)); 
```

什么都不打印。

**建议：**

```
for(c=i-1;c >=0;c--){
     // ^ c should be i-1 initially 
  *l++ = s[c];
 } 
```

**(2):**你的问题代码至少有两个编译错误。你忘`;`了两个位置

```
 return "INVALID PARAMS"; 
                        ^ 
```

下一个

```
char a[]="Angus Declan R";
                         ^ 
```

**第三个严重错误**

您正在返回一个无效的内存地址！
你在做什么，分配内存`st`，然后分配给`l`，然后`free(st)`返回`l`：（*阅读评论*）

```
st = malloc((strlen(s) * sizeof(*s))+1);   // allocation 
l = st;          // assign to l

// code in between

free(st);    // st and l become invalid after free
return l;    // returning invalid memory 
```

**建议：**您是否在不调用 free() 的情况下 使用`l`并返回。`st`

**(4)** :

这不是错误，但为什么这个无用的循环？

```
while(c > 0){
  l--;
  c--;
 } 
```

**(5)** : 忘记*前面`l`

```
for(c=i;c >=0;c--){
  *l++ = s[c];
 }
  l = '\0';
 ^ forgot *   it should be *l = '\0'; 
```

# android - Android：为什么 onTouchListener() 会打开多个警报对话框？

> ID：15314689
> 
> 赞同：2
> 
> 时间：2013-03-09T19:04:01.920
> 
> 标签：android, android-alertdialog, ontouchlistener

这是代码：

```
 textView1.setOnTouchListener(new View.OnTouchListener() {
        public boolean onTouch(View v, MotionEvent event) {
            String content = textView1.getText().toString();
            if (!content.equals("")){
                showNameDialog();
            }
            return true;
        }
    }); 
```

很简单。如果字符串内容中包含文本，则执行 showNameDialog() 方法。

这是方法：

```
 private void showNameDialog() {
    AlertDialog.Builder dialogBuilder = new AlertDialog.Builder(MainActivity.this);
    dialogBuilder.setTitle(name.toString().toUpperCase());
    dialogBuilder.setMessage("Name's frequency: " + arrayListToString);
    dialogBuilder.setPositiveButton("ok", null);
    AlertDialog alertDialog = dialogBuilder.create();
    alertDialog.show();
    } 
```

一切都很好，除了当我单击 textView1 时，它会打开两个、三个或四个 AlertDialogs。为什么？我怎样才能让它只打开一个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T19:07:17.027

触摸不是点击，所以我假设在触摸视图时可以多次调用 onTouch（触摸时，然后触摸等）。而是尝试使用 OnClickListener：

```
textView1.setClickable (true);
textView1.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            String content = textView1.getText().toString();
            if (!content.equals("")){
                showNameDialog();
            }
        }
    }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-09T19:19:38.977

尝试使用此代码

```
textView1.setOnTouchListener(new View.OnTouchListener() {
    public boolean onTouch(View v, MotionEvent event) {
        String content = textView1.getText().toString();
            if(event.getAction() == MotionEvent.ACTION_DOWN){
                if (!content.equals("")){
                            showNameDialog();
                    }
            }
        return true;
    }
}); 
```

# c# - 如何从 .Net 中的超线程中获得最大收益

> ID：15314690
> 
> 赞同：2
> 
> 时间：2013-03-09T19:04:02.997
> 
> 标签：c#, .net, multithreading, hyperthreading

不确定这在托管语言中是否可行，但是否有可能在超线程存在的情况下真正使应用程序性能更好？

代码中有什么具体可以做的吗？，也许某些功能在 HT 环境中比其他功能运行得更好？

我知道要从多线程中受益，只需要生成新线程来执行繁重的 cpu 任务，但我不确定 HT 需要什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T19:37:33.617

很大程度上取决于您拥有的实际硬件。阅读[注意：是否使用 Hyper](http://blogs.msdn.com/b/slavao/archive/2005/11/12/492119.aspx)以获得更深入的分析。Slava 在链接中的观点是，在 HT 中，虚拟核心共享缓存，并且虚拟核心工作负载可能会破坏“主”核心的缓存，即使与主核心相比，它最多只能完成大约 20% 的工作负载，因为它驱逐了主核的热缓存，导致主核停顿，整体性能比无 HT*更差。*

但是自从文章发布以来，很多事情都发生了变化，HT post [Nehalem](http://en.wikipedia.org/wiki/Nehalem_%28microarchitecture%29)明显更好。

> 我知道要从多线程中受益，只需要生成新线程来执行繁重的 cpu 任务

这是相当幼稚的看法。您必须阅读[Rick Vicik 有关高性能 Windows 程序的文章](http://rusanu.com/2008/11/11/high-performance-windows-programs/)（它们也适用于托管应用程序），并且您必须绝对了解[CPU 缓存和您关心的原因](http://www.aristeia.com/TalkNotes/ACCU2011_CPUCaches.pdf)。

# sinatra - 手动请求 HAML 文件

> ID：15314693
> 
> 赞同：1
> 
> 时间：2013-03-09T19:04:07.587
> 
> 标签：sinatra, haml

如果我想在 Sinatra 中手动请求特定的 HAML 文件，它看起来像这样有效：

```
get '/' do
  haml_file = File.open('views/index.haml').read
  haml haml_file
end 
```

我的问题是，你有理由相信这比使用传统方法效率低吗？

```
get '/' do
  haml :index
end 
```

也许 Sinatra 比我手动读取文件更“有效”？

如果我的手动方法不好，请建议另一种方法来手动获取位于特定路径中的 HAML 文件。（原因是路径并不总是那么简单）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T20:00:33.417

您是说您不会将所有视图保存在同一个目录中吗？这很痛苦，但取决于你。[如果Sinatra-Partial](https://github.com/yb66/Sinatra-Partial)（我是维护者）在您需要的目录的子目录中获取，您可以使用它`view`。否则，您所做的很好，很难看出它如何提高这么小的文本文件的效率。您可能要添加的唯一内容是用于缓存的标头。

* * *

额外的：

这在当今是相当标准的，对吧？

```
config.ru
app/
  main.rb
  public/
  helpers/
  models/
  views/
    mobile/
    stylesheets/
    whatever/
    _partial1.haml
    _partial2.haml
    layout.haml
specs/ 
```

# python - 如何在不重新加载整个网页的情况下通过 POST 请求获取信息。(Python/Django)

> ID：15314694
> 
> 赞同：0
> 
> 时间：2013-03-09T19:04:10.687
> 
> 标签：python, html, django, http, web-applications

情况很简单，我们想向 Django（我们的 Web 框架）发送信息，让它对信息执行功能，并从 Django 接收信息。

刚才我们的 POST 到服务器的表单看起来像这样。

```
<form method="post" onAction="/write" name="form1">
    {% csrf_token %}
    <button type="submit">Send Info for processing</button>
</form> 
```

我们希望这个过程发送一个变量或传输信息。

这成功地到达了我们`views.py`并到达了可以完成信息的功能。

但是目前我们不知道如何从 POST 中获取信息，也不知道如何在不加载全新页面的情况下将其发回。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T19:07:38.283

由于您不想在发布请求时刷新页面，因此您需要向服务器发出异步请求。JQuery, Javascript 库有一些简洁的函数可以帮助你发出异步请求。服务器收到请求后，可以执行计算，可以发送带有 HTML、XML 或 JSON 数据的 HttpResponse，如 Brandon 所述

这是 Django Ajax 教程的 wiki 页面

[https://code.djangoproject.com/wiki/AJAX](https://code.djangoproject.com/wiki/AJAX)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T19:05:31.573

您需要返回一个 HttpResponse。是否返回 XML、JSON、HTML 等取决于您。您的请求必须通过 Ajax 进行。

[https://docs.djangoproject.com/en/1.4/ref/request-response/#django.http.HttpResponse](https://docs.djangoproject.com/en/1.4/ref/request-response/#django.http.HttpResponse)

# javascript - 在 javascript jquery 中使用新行

> ID：15314697
> 
> 赞同：1
> 
> 时间：2013-03-09T19:04:18.290
> 
> 标签：javascript, jquery

我在用

```
$('#'+type+'name'+id).hide().html('ghj').fadeIn(150); 
```

哪个工作正常。但是当我使用

```
$('#'+type+'name'+id).hide().html('
A lot of html code
').fadeIn(150); 
```

该功能不再起作用。因为我想保持函数整洁，所以我想把 HTML 放在多行中。为什么这不起作用？

编辑：仍然不起作用：

```
function Rename(type,id,content){
$('#'+type+'name'+id).hide().html(' '+
    '   <td height=\"20\" valign=\"middle\">'+
    '       <span onclick=\"RenameDo(\'notify\',\''+id+'\',''+content+'')\">'+
    '           <img title=\"Wijzigen\" class=\"LinkImage\" src=\"/common/images/save.png\">'+
    '       </span>'+
    '   </td>'+
    '   <td valign=\"middle\" rowspan=2>&nbsp;fghfgh</td>'+
' ').fadeIn(150);

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T19:06:01.917

只需用于`+`连接长字符串：

```
$('#'+type+'name'+id).hide().html(' ' + 
'A lot of html code' +
' ').fadeIn(150); 
```

或使用`\`转义换行符：

```
$('#'+type+'name'+id).hide().html('\
A lot of html code\
').fadeIn(150); 
```

* * *

**更新**

对于特定的字符串，使用这个：

```
function Rename(type,id,content){
    $('#'+type+'name'+id).hide().html(' '+
        '   <td height="20" valign="middle">'+
        '       <span onclick="RenameDo(\'notify\',\'' + id + '\',\'' + content + '\')">' +
        '           <img title="Wijzigen" class="LinkImage" src="/common/images/save.png">'+
        '       </span>'+
        '   </td>'+
        '   <td valign="middle" rowspan=2>&nbsp;fghfgh</td>'+
    ' ').fadeIn(150);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T19:08:24.140

有两种方法可以做到这一点，“无论如何都可以使用的黑客方式”和“正确的方式”。

破解方式：

```
$("#"+type+"name"+id).hide().html("\
A lot of html code\
").fadeIn(150) 
```

说明：通过在行尾添加反斜杠，您实际上是在“转义”换行符，因此它被忽略而不是未终止的字符串常量。

合适的方式：

```
$("#"+type+"name"+id).hide().html(
"A lot of html code\n"
+"Just adding some more\n"
+"Because whitespace outside of strings is fine."
).fadeIn(150) 
```

# calendar - 脚本：创建一个跨越一天以上的 allDayEvent

> ID：15314704
> 
> 赞同：0
> 
> 时间：2013-03-09T19:05:23.123
> 
> 标签：calendar, google-apps-script

使用我的日历时，我执行以下操作来创建一个跨越一天以上的 allDayEvent（例如Vacation 或 scool halidays）： - 我为第一天创建一个 allDayEvent - 我单击事件 - 现在我可以输入最后一个日期并保存事件。

我怎样才能在脚本中做到这一点？我可能会得到带有“isAllDayEvent”的标志；我可以用“setAllDayDate”设置日期；但是如何为 AllDayEvent 设置开始日期和结束日期？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T20:14:47.580

您必须使用重复，请参阅[此处的完整文档](https://developers.google.com/apps-script/class_recurrence?hl=en)

在您的示例中，它将使用 [addDailyRule](https://developers.google.com/apps-script/class_recurrence?hl=en#addDailyRule)每天重复[直到](https://developers.google.com/apps-script/class_recurrence?hl=en#until)定义 endDate。

# c# - 单击时按钮文本加粗

> ID：15314707
> 
> 赞同：-1
> 
> 时间：2013-03-09T19:05:39.800
> 
> 标签：c#, winforms

我做了一个问答游戏，我希望按钮上的文本在单击时变为粗体。此代码有效：

```
button7.Font = new Font(button7.Font.Name, button7.Font.Size, FontStyle.Bold); 
```

我遇到的问题是，当我单击“下一步”按钮转到下一个问题时，即使没有单击答案，文本仍然是粗体。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T19:11:48.957

只需在“下一步”按钮上执行此操作单击

```
button7.Font = new Font(button7.Font.Name, button7.Font.Size, FontStyle.Regular); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T19:19:15.403

单击下一步时，您需要取消所有内容的粗体。下面的代码应该会有所帮助（它还包括一个可能更清晰的粗体实现）。

```
// usage
foreach(var button in GetAnswerButtons())
{
    button.Click += OnClickToBold;
    button.Click += OnClickSetPropertyBasedOnCorrectness;
}

nextButton.Click += NextClick;

// implementations    

private void OnClickToBold(object sender, EventArgs e)
{
   var button = sender as Button;

   if (button == null) return;

   button.Font = new Font(button.Font.Name, button.Font.Size, FontStyle.Bold);
}

private void OnClickSetPropertyBasedOnCorrectness(object sender, EventArgs e)
{
   var button = sender as Button;

   if (button == null) return;

   button.WhateverProperty = IsCorrectAnswer(button) 
       ? valueWhenCorrect
       : valueWhenWrong;
}

private void NextClick(object sender, EventArgs e)
{
    foreach(var button in GetAnswerButtons())
    {
        button.Font = new Font(button.Font.Name, button.Font.Size, FontStyle.Regular);
        UnsetPropertyBasedOnCorrectness(button);
    }
}

private IEnumerable<Button> GetAnswerButtons() { ... }
private void UnsetPropertyBasedOnCorrectness(Button b) { ... } 
```

# haskell - Repa和DPH之间的区别

> ID：15314711
> 
> 赞同：7
> 
> 时间：2013-03-09T19:05:58.210
> 
> 标签：haskell, repa, data-parallel-haskell

我最近阅读了有关即将在和库中进行广义流融合的[论文。](http://research.microsoft.com/en-us/um/people/simonpj/papers/ndp/haskell-beats-C.pdf)这似乎是一个非常有趣的发展。我现在开始尝试（从 GHC 7.6 开始，并计划在它出现时升级到 7.8 SIMD 版本）。我还从库文档中看到它可以完成并行数组工作。与 GHC 7.4相比，它似乎是成熟的版本。现在这似乎已经成熟，我想知道从 GHC 7.6 开始，软件包之间的主要优缺点是什么。我搜索了 StackOverflow 和 google，但找不到 和 之间的比较。因此，这个问题。`vector``DPH``DPH``Repa``Repa``DPH``DPH``Repa``DPH``Repa``DPH`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T10:41:02.117

从HaskellWiki[上关于 DPH 的页面：](http://www.haskell.org/haskellwiki/GHC/Data_Parallel_Haskell#Project_status)

> DPH 专注于不规则数据并行。对于 Haskell 中的常规数据并行代码，请考虑使用建立在 DPH 的并行数组基础架构上的配套库 Repa。

# go - 使用 go-cairo 绘制屏幕

> ID：15314714
> 
> 赞同：2
> 
> 时间：2013-03-09T19:06:09.930
> 
> 标签：go, cairo

我正在使用[http://github.com/ungerik/go-cairo](http://github.com/ungerik/go-cairo)作为 cairo 库来绘制屏幕。总的来说，我对这个图书馆和开罗完全不熟悉。但是，我一直在搜索这个库的文档和其他语言的各种 cairo 绑定，希望了解如何在屏幕上绘画（不幸的是，我找不到很多关于在屏幕上绘画的教程——仅适用于将图像保存为 .PNG）。

这是我到目前为止所拥有的，它没有产生任何效果（没有显示）。任何帮助，将不胜感激。

```
package main

import (
    "github.com/ungerik/go-cairo"
    "time"
)

func main() {
    surface := cairo.NewSurface (cairo.FORMAT_ARGB32, 240, 80)
    surface.SelectFontFace ("serif", cairo.FONT_SLANT_NORMAL,
        cairo.FONT_WEIGHT_BOLD)
    surface.SetFontSize(32.0)
    surface.SetSourceRGB(0.0, 0.0, 1.0)
    surface.MoveTo (10.0, 50.0)
    surface.ShowText ("Hello World")

    for {
        surface.Paint ()
        time.Sleep (1000)
    }
    //surface.Finish()
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T20:55:15.167

如果您使用的是 Linux
，这里有一个示例[https://github.com/Joker/go-cairo/blob/master/example/xcb_joy.go](https://github.com/Joker/go-cairo/blob/master/example/xcb_joy.go)
您必须使用 go-cairo 叉子[https://github.com/Joker/](https://github.com/Joker/go-cairo)
必须安装[go-cairo和 XCB](https://github.com/Joker/go-cairo)

# javascript - Angular JS：为什么未知提供者的角度过滤器错误：defaultFilterProvider <- defaultFilter？

> ID：15314715
> 
> 赞同：4
> 
> 时间：2013-03-09T19:06:13.057
> 
> 标签：javascript, ruby-on-rails, angularjs

我在我的 application.js 中放置了 angular-filters，但我仍然收到错误消息：

```
Unknown provider: defaultFilterProvider <- defaultFilter 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-09T19:06:13.057

虽然我已经在我的应用程序中包含了角度过滤器，但我忘记将它们添加到我的 requires 数组中，如下所示：

```
var myApp = angular.module("MyApp", ["ngResource", "ex.filters"]); 
```

为了使角度过滤器工作，我必须将“ex.filters”放入数组中，如上所示。

我通过阅读[https://github.com/frapontillo/angular-filters/blob/master/test/default/defaultSpec.js上的测试发现了解决方案](https://github.com/frapontillo/angular-filters/blob/master/test/default/defaultSpec.js)

# facebook - 需要为 facebook 网站应用程序设置 SSL 才能工作，有什么建议吗？我不需要保护密码或任何东西

> ID：15314720
> 
> 赞同：0
> 
> 时间：2013-03-09T19:06:37.687
> 
> 标签：facebook, ssl, openssl, facebook-apps

facebook 强制应用程序使用 HTTPS，我一直在寻找 openSSL，但我真的无法理解如何安装它，我使用的是 godaddy，它在 linux 服务器上运行，我认为我不能从任何服务器上执行命令行。

我需要一个有效的 HTTPS 链接，一个自签名证书就可以了，但我似乎无法在 GoDaddy 上获得一个，我可以将所有 HTTPS 重定向到 HTTP，这行得通吗？通过 .htacess

欢迎任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-01T21:49:07.040

昨天我遇到了完全相同的问题，很快就找到了解决方法，而无需将我的应用程序移动到具有 SSL 的服务器。

Facebook 仅验证起始 URL 为 https://..... 但是，您不必从那里开始使用 ssl。因此，我只是创建了一个免费的 Heroku 帐户（您可以使用任何其他支持 SSL 的托管服务提供商）并添加了一个 index.php 文件，其中包含以下代码：

```
<?php
header( 'Location: http://my.app.url' ); 
```

加载 IFrame 后，它将自动重定向到托管在非 SSL 服务器上的应用程序，并且可以正常工作。

有关更多信息，您可以查看我的博客文章[http://www.xethron.co.za/building-a-facebook-app-on-a-host-without-https-ssl-support](http://www.xethron.co.za/building-a-facebook-app-on-a-host-without-https-ssl-support)

# spring - 如何在 Spring MVC Web 应用程序中使用配置？

> ID：15314724
> 
> 赞同：1
> 
> 时间：2013-03-09T19:06:54.640
> 
> 标签：spring, configuration

我是 Spring 的新手，我正在开发我的第一个 Spring MVC Web 应用程序。

我使用一个包含我的应用程序设置的类。

```
public class Configuration {

    @Value("${chart.width}")
    private int chartWidth;
    @Value("${chart.height}")
    private int chartHeight;

    public int getChartWidth() {
        return chartWidth;
    }

    public void setChartWidth(int chartWidth) {
        this.chartWidth = chartWidth;
    }

    public int getChartHeight() {
        return chartHeight;
    }

    public void setChartHeight(int chartHeight) {
        this.chartHeight = chartHeight;
    }
} 
```

所有设置都从一个 .properties 文件加载。

在 applicationContext.xml 我从这个类创建一个 bean：

```
<bean id="configuration" class="utils.Configuration" /> 
```

接下来我有一个抽象类，我所有的控制器都是从这个类扩展而来的：

```
public class AController {

    @Autowired
    @Qualifier("configuration")
    private Configuration configuration;

    public Configuration getConfiguration() {
        return configuration;
    }

    public void setConfiguration(Configuration configuration) {
        this.configuration = configuration;
    }
} 
```

现在我可以询问配置对象并获得所需的设置。

**问题：**有没有更好的方法可以在 Spring MVC Web 应用程序中使用配置？我想在控制器、DAO 和服务对象以及视图 (JSP) 中使用配置。

# c++ - 当boost库“进程间”定义了一个named_mutex时，这些named_mutexs在不同进程之间正常工作，还是只在线程中工作？

> ID：15314726
> 
> 赞同：3
> 
> 时间：2013-03-09T19:07:00.090
> 
> 标签：c++, visual-c++, boost, visual-c++-2008, boost-interprocess

我想我必须从名字中假设一些`boost::interprocess`不正确的东西。[文件在这里](http://www.boost.org/doc/libs/1_39_0/doc/html/boost/interprocess/named_mutex.html)重复说`named_mutex`是全球性的。

我无法让它工作。同一个可执行文件的两个副本应该同时运行，我希望一个名为的库中的一个命名互斥锁`boost::interprocess`有时实际上可能会阻塞。它没有。它也不能防止以下代码中的数据文件损坏。

这是来自 boost 文档的一些代码：

```
#include <boost/interprocess/sync/scoped_lock.hpp>
#include <boost/interprocess/sync/named_mutex.hpp>
#include <fstream>
#include <iostream>
#include <cstdio>

int main ()
{
   using namespace boost::interprocess;
   try{
      struct file_remove
      {
         file_remove() { std::remove("file_name"); }
         ~file_remove(){ std::remove("file_name"); }
      } file_remover;
      struct mutex_remove
      {
         mutex_remove() { named_mutex::remove("fstream_named_mutex"); }
         ~mutex_remove(){ named_mutex::remove("fstream_named_mutex"); }
      } remover;

      //Open or create the named mutex
      named_mutex mutex(open_or_create, "fstream_named_mutex");

      std::ofstream file("file_name");

      for(int i = 0; i < 10; ++i){

         //Do some operations...

         //Write to file atomically
         scoped_lock<named_mutex> lock(mutex);
         file << "Process name, ";
         file << "This is iteration #" << i;
         file << std::endl;
      }
   }
   catch(interprocess_exception &ex){
      std::cout << ex.what() << std::endl;
      return 1;
   }
   return 0; 
```

这是我对它所做的，所以我可以向自己证明互斥锁正在做某事：

```
#include <windows.h>
#include <boost/interprocess/sync/interprocess_mutex.hpp>
#include <boost/lambda/lambda.hpp>
#include <boost/interprocess/sync/scoped_lock.hpp>
#include <boost/interprocess/sync/named_mutex.hpp>
#include <iostream>
#include <iterator>
#include <algorithm>
#include <fstream>
#include <iostream>
#include <cstdio>

int main (int argc, char *argv[])
{
   srand((unsigned) time(NULL));

   using namespace boost::interprocess;
   try{
       /*
      struct file_remove
      {
         file_remove() { std::remove("file_name"); }
         ~file_remove(){ std::remove("file_name"); }
      } file_remover;
      */

      struct mutex_remove
      {
         mutex_remove() { named_mutex::remove("fstream_named_mutex"); }
         ~mutex_remove(){ named_mutex::remove("fstream_named_mutex"); }
      } remover;

      //Open or create the named mutex
      named_mutex mutex(open_or_create, "fstream_named_mutex");

      std::ofstream file("file_name");

      for(int i = 0; i < 100; ++i){

         //Do some operations...

         //Write to file atomically
         DWORD n1,n2;
         n1 = GetTickCount();
         scoped_lock<named_mutex> lock(mutex);
         n2 = GetTickCount();
         std::cout << "took " << (n2-n1) << " msec to acquire mutex";
         int randomtime = rand()%10;
         if (randomtime<1) 
            randomtime = 1;
         Sleep(randomtime*100);
         std::cout << " ... writing...\n";
         if (argc>1)
            file << argv[1];
         else
             file << "SOMETHING";
         file << " This is iteration #" << i;
         file << std::endl;
         file.flush(); // added in case this explains the corruption, it does not.
      }
   }
   catch(interprocess_exception &ex){
      std::cout << "ERROR " << ex.what() << std::endl;
      return 1;
   }
   return 0;
} 
```

控制台输出：

```
took 0 msec to acquire mutex ... writing...
took 0 msec to acquire mutex ... writing...
took 0 msec to acquire mutex ... writing...
took 0 msec to acquire mutex ... writing... 
```

此外，该演示会写入一个文件，如果您运行该程序的两个副本，该文件将丢失一些数据。

我希望如果我删除`file_name`并运行程序的两个副本，我应该得到交错写入，`file_name`每个实例包含 100 行。

（注意，演示代码显然没有使用`ofstream`附加模式，而是在每次程序运行时简单地重写文件，所以如果我们想要演示显示两个进程写入文件，我知道这个原因为什么它不起作用,但我确实期望上面的代码是互斥的可行演示,但事实并非如此.还可以`ofstream::flush()`包括对一个非常方便且恰当命名的方法的调用,但没有.)

*在 Visual C++ 2008 上使用 Boost 1.53*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T19:43:15.523

事实证明，Boost 是一个很棒的库，它在文档中穿插的代码示例有时可能会被破坏。至少`boost::interprocess::named_mutex`文档中的 for 在 Windows 系统上不起作用。

*始终在演示代码中删除互斥锁会导致互斥锁不起作用。*

至少应该在演示代码中对此进行注释。它没有通过“最小惊奇原则”，虽然我想知道它为什么在那里，但我认为它一定是惯用的和必要的，实际上是白痴和不必要的。或者，如果有必要，它是 Joel Spolsky 所说的泄漏抽象的一个例子。如果互斥锁真的`C:\ProgramData`是 Windows 下的文件系统点，我肯定不想知道它，或者知道如果我没有检测到这种情况并清理它，就会留下粪便，这会破坏抽象。（肯定闻起来像 Boost 中互斥体的 posix 友好语义导致它们使用 posix 样式的实现，而不是直接转到 Win32 API 并实现一个没有文件系统垃圾的简单互斥体。）

这是一个工作演示：

```
#include <windows.h>
#include <boost/interprocess/sync/interprocess_mutex.hpp>
#include <boost/lambda/lambda.hpp>
#include <iostream>
#include <iterator>
#include <algorithm>

#include <boost/interprocess/sync/scoped_lock.hpp>
#include <boost/interprocess/sync/named_mutex.hpp>
#include <fstream>
#include <iostream>
#include <cstdio>
#include <windows.h>

int main (int argc, char *argv[])
{
   srand((unsigned) time(NULL));

   using namespace boost::interprocess;
   try{
       /*
      // UNCOMMENT THIS IF YOU WANT TO MAKE THIS DEMO IMPOSSIBLE TO USE TO DEMO ANYTHING

      struct file_remove
      {
         file_remove() { std::remove("file_name"); }
         ~file_remove(){ std::remove("file_name"); }
      } file_remover;

      // UNCOMMENT THIS IF YOU WANT TO BREAK THIS DEMO HORRIBLY:

      struct mutex_remove
      {
         mutex_remove() { named_mutex::remove("fstream_named_mutex"); }
         ~mutex_remove(){ named_mutex::remove("fstream_named_mutex"); }
      } remover;
      */

      //Open or create the named mutex
      named_mutex mutex(open_or_create, "fstream_named_mutex");

      std::ofstream file("file_name", std::ios_base::app );
      int randomtime = 0;
      for(int i = 0; i < 100; ++i){

         //Do some operations...

         //Write to file atomically
         DWORD n1,n2;
         n1 = GetTickCount();

         {
         scoped_lock<named_mutex> lock(mutex);
         n2 = GetTickCount();
         std::cout << "took " << (n2-n1) << " msec to acquire mutex";

         randomtime = rand()%10;
         if (randomtime<1) 
            randomtime = 1;

         std::cout << " ... writing...\n";
         if (argc>1)
            file << argv[1];
         else
             file << "SOMETHING";
         file << "...";
         Sleep(randomtime*100);
         file << " This is iteration #" << i;
         file << std::endl;
         file.flush();
         }
         Sleep(randomtime*100); // let the other guy in.
      }
   }
   catch(interprocess_exception &ex){
      std::cout << "ERROR " << ex.what() << std::endl;
      return 1;
   }
   return 0;
} 
```

我希望对此答案进行批评和编辑，以便人们可以使用这个名为 mutex 的工作演示。

使用演示：
- 构建它并运行它的两个副本。传入一个参数，以便您可以查看哪个实例写入了哪些行（`start myexename ABC`以及`start myexename DEF`从 Windows 中的命令提示符） - 如果这是您的第二次运行，如果您不希望第二次运行附加到第一次运行，请删除任何名为“file_name”的杂散输出.

![在此处输入图像描述](../Images/12e7872e26ef3a05b0b0bcc1903917ff.png)

# c++ - 调用左值引用构造函数而不是右值引用构造函数

> ID：15314727
> 
> 赞同：6
> 
> 时间：2013-03-09T19:07:09.373
> 
> 标签：c++, c++11, move-semantics, rvalue-reference

有这个代码：

```
#include <iostream>

class F {
public:
   F() = default;
   F(F&&) {
      std::cout << "F(F&&)" << std::endl;
   }
   F(F&) {
      std::cout << "F(F&)" << std::endl;
   }
};

class G {
   F f_;
public:
   G(F&& f) : f_(f) {
      std::cout << "G()" << std::endl;
   }
};

int main(){
   G g = F();
   return 0;
} 
```

输出是：

```
F(F&)
G() 
```

为什么在类的构造`F(F&)`函数中调用构造函数而不是`F(F&&)`构造函数`G`？类的构造函数的参数`G`是`F&& f`右值引用，但调用了左值引用的构造函数。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-09T19:10:14.777

> 为什么在 G 类的构造函数中调用 F(F&) 构造函数而不是 F(F&&) 构造函数？

因为`f`是左值。即使它*绑定*到一个右值，并且它的类型是对 rvalue 的引用`F`，它也是一个*命名变量*。这使它成为一个左值。不要忘记**一个对象的值类别不是由它的类型决定的**，反之亦然。

当您将左值传递给函数时，只能将左值引用绑定到它。如果您只想捕获右值，则应按如下方式更改代码：

```
class G {
    F f_;
public:
    G(F&& f) : f_(std::move(f)) {
       std::cout << "G()" << std::endl;
    }
}; 
```

或者，您可以使用`std::forward<>()`，这在这种情况下是等效的，但会使您的*转发* `f`意图更加清晰：

```
class G {
    F f_;
public:
    G(F&& f) : f_(std::forward<F>(f)) {
       std::cout << "G()" << std::endl;
    }
}; 
```

现在，最后一个定义很容易扩展，因此类型的左值和右值`F`都可以绑定到参数`f`：

```
class G {
    F f_;
public:
    template<typename F>
    G(F&& f) : f_(std::forward<F>(f)) {
       std::cout << "G()" << std::endl;
    }
}; 
```

例如，这允许以这种方式构造一个实例`G`：

```
F f;
G g(f); // Would not be possible with a constructor accepting only rvalues 
```

不过，最后一个版本有一个*警告*：您的构造函数[**基本上也可以作为复制构造函数工作**](http://flamingdangerzone.com/cxx11/2012/06/05/is_related.html)，因此您可能需要显式定义所有可能的复制构造函数以避免尴尬的情况：

```
class G {
    F f_;
public:
    template<typename F>
    G(F&& f) : f_(std::forward<F>(f)) {
       std::cout << "G()" << std::endl;
    }
    G(G const&) = default;
    G(G&); // Must be defaulted out-of-class because of the reference to non-const
};

G::G(G&) = default; 
```

`G`由于非模板函数优于函数模板的实例化，因此在从另一个对象构造对象时将选择复制构造函数`G`。当然，这同样适用于*移动*构造函数。这留作练习。

# ruby-on-rails - 带有omniauth-identity的电子邮件确认

> ID：15314738
> 
> 赞同：2
> 
> 时间：2013-03-09T19:08:10.973
> 
> 标签：ruby-on-rails, omniauth

我正在使用`omniauth`和`devise`登录 Facebook。我想允许使用电子邮件和密码的新身份。看来这`omniauth-identity`是正确的选择。

但我不知道是否`omniauth-identity`支持电子邮件确认（即，发送带有链接的确认以验证电子邮件）。所以我的问题是：

我应该如何从to添加`confirmable`功能？`devise``omniauth-identify`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T19:21:54.707

如果是我，我会使用 Devise。

开箱即用，它提供用户名/密码身份验证，以及所有常见的东西，如电子邮件确认、密码重置、更改密码、用户锁定等。

然后，您可以轻松地将您的 omniauth 插件直接挂接到 Devise，以便您可以允许用户使用 Facebook（例如）*或*用户名和密码登录。

[在Devise wiki](https://github.com/plataformatec/devise/wiki/OmniAuth%3a-Overview)上有一个关于将 Devise 与 omniauth-facebook 一起使用的很棒的教程。

我的建议 - 不要尝试推出自己的身份验证。Devise 背后有几年的成熟，许多贡献者使它变得很棒！

希望这可以帮助...

# java - Android声音没有在启动画面中播放

> ID：15314740
> 
> 赞同：1
> 
> 时间：2013-03-09T19:08:38.030
> 
> 标签：java, android, audio

在启动画面显示时，我无法播放声音。我在“res”目录下创建了“raw”目录，并将 droid.mp3 文件放在那里（大约 150Kb）。

这是负责启动画面的外观和声音的java文件的代码：

```
import android.app.Activity;
import android.content.Intent;
import android.media.MediaPlayer;
import android.os.Bundle;

public class SplashActivity extends Activity 
{
    public  MediaPlayer splashSound;

    protected void onCreate(Bundle splashBundle) 
    {
        super.onCreate(splashBundle);
        setContentView(R.layout.splash);
        splashSound = MediaPlayer.create(SplashActivity.this, R.raw.droid);
        Thread t1 = new Thread() {
            public void run() {
                try 
                {
                    sleep(5000);
                } 
                catch (InterruptedException IE)
                {
                    IE.printStackTrace();
                } 
                finally 
                {
                    Intent mainActivityIntent=new Intent("com.example.stamapp.MAINACTIVITY");
                    startActivity(mainActivityIntent);
                }
            }
        };
        t1.start();
    }

    @Override
    protected void onPause() {

        super.onPause();
        splashSound.release();
        finish();
    }

} 
```

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T19:26:51.900

而不是 Thread 尝试使用[Handler.postDelayed](http://developer.android.com/reference/android/os/Handler.html#postDelayed%28java.lang.Runnable,%20long%29)作为：

```
 Handler handler;
protected void onCreate(Bundle splashBundle) 
    {
        super.onCreate(splashBundle);
        setContentView(R.layout.splash);
        handler = new Handler();  
        splashSound = MediaPlayer.create(SplashActivity.this, 
                                            R.raw.droid);   
        splashSound.start();  //<<<play sound on Splash Screen
        handler.postDelayed(runnable, 5000);
    }
private Runnable runnable = new Runnable() {
   @Override
   public void run() {
     //start your Next Activity here
   }
}; 
```

第二种方法是将[MediaPlayer.setOnCompletionListener](http://developer.android.com/reference/android/media/MediaPlayer.OnCompletionListener.html)添加到 MediaPlayer 实例中，该实例在媒体源播放完成时调用，而不将`5000`延迟设置为：

```
protected void onCreate(Bundle splashBundle) 
        {
            super.onCreate(splashBundle);
            setContentView(R.layout.splash);

            splashSound = MediaPlayer.create(SplashActivity.this, 
                                                R.raw.droid);   
            splashSound.setOnCompletionListener(new 
                              MediaPlayer.OnCompletionListener() {
           @Override
            public void onCompletion(MediaPlayer splashSound) {

             splashSound.stop();
             splashSound.release();
                   //start your Next Activity here
           }
        });
        splashSound.start();  //<<<play sound on Splash Screen
   } 
```

# c++ - C++/Qt - 从主窗口打开对话框 - 错误 LNK2019 - LNK2001：未解析的外部符号

> ID：15314741
> 
> 赞同：1
> 
> 时间：2013-03-09T19:08:40.050
> 
> 标签：c++, qt, lnk2019, lnk2001

基本上代码的目标是在单击按钮后打开一个包含 QWebView （带有一些内容）的对话框

这就是我所做的：

**主窗口.h：**

```
class MainWindow : public QMainWindow, public Ui::MainWindowUi
{
    ...
    private slots:
    void on_ViewDatabase_clicked();
    ...
} 
```

**主窗口.cpp：**

```
#include "mainwindow.h"
#include "onlinedb.h"

void MainWindow::on_ViewDatabase_clicked()
{

    OnlineDB dlg(this);
    dlg.exec();
} 
```

**在线数据库.h：**

```
#ifndef OnlineDB_H
#define OnlineDB_H

#include "ui_onlinedb.h"
#include <QDialog>

class MainWindow;

class OnlineDB : public QDialog, public Ui::OnlineDB
{
    Q_OBJECT

public:
    OnlineDB(LkMainWindow *parent);
    ~OnlineDB();

private:
    MainWindow  *MainWindow;

};

#endif 
```

**在线数据库.cpp：**

```
#include "onlinedb.h"
#include "mainwindow.h"

///////////////////////////////////////////////////////////////////////////////
//
// OnlineDB class constructor
//
// Create a OnlineDB
//
OnlineDB::OnlineDB(MainWindow *parent) : QDialog(parent), MainWindow(parent)
{
    setupUi(this);
    QUrl url("http://google.com"); //whatever
    webView->load(url);
}

///////////////////////////////////////////////////////////////////////////////
//
// OnlineDB class destructor
//
// Clean up the OnlineDB
//
OnlineDB::~OnlineDB()
{

} 
```

我有几个链接错误

请问有人可以帮忙吗？

```
3>Linking...
3>onlinedb.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: void __thiscall QWebView::load(class QUrl const &)" (__imp_?load@QWebView@@QAEXABVQUrl@@@Z) referenced in function "public: __thiscall OnlineDB::OnlineDB(class LkMainWindow *)" (??0OnlineDB@@QAE@PAVLkMainWindow@@@Z)
3>onlinedb.obj : error LNK2001: unresolved external symbol "public: virtual struct QMetaObject const * __thiscall OnlineDB::metaObject(void)const " (?metaObject@OnlineDB@@UBEPBUQMetaObject@@XZ)
3>onlinedb.obj : error LNK2001: unresolved external symbol "public: virtual void * __thiscall OnlineDB::qt_metacast(char const *)" (?qt_metacast@OnlineDB@@UAEPAXPBD@Z)
3>onlinedb.obj : error LNK2001: unresolved external symbol "public: virtual int __thiscall OnlineDB::qt_metacall(enum QMetaObject::Call,int,void * *)" (?qt_metacall@OnlineDB@@UAEHW4Call@QMetaObject@@HPAPAX@Z)
3>onlinedb.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: void __thiscall QWebView::setUrl(class QUrl const &)" (__imp_?setUrl@QWebView@@QAEXABVQUrl@@@Z) referenced in function "public: void __thiscall Ui_OnlineDB::setupUi(class QDialog *)" (?setupUi@Ui_OnlineDB@@QAEXPAVQDialog@@@Z)
3>onlinedb.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: __thiscall QWebView::QWebView(class QWidget *)" (__imp_??0QWebView@@QAE@PAVQWidget@@@Z) referenced in function "public: void __thiscall Ui_OnlineDB::setupUi(class QDialog *)" (?setupUi@Ui_OnlineDB@@QAEXPAVQDialog@@@Z)
3>onlinedb.obj : error LNK2001: unresolved external symbol "public: virtual struct QMetaObject const * __thiscall QWebView::metaObject(void)const " (?metaObject@QWebView@@UBEPBUQMetaObject@@XZ)
3>onlinedb.obj : error LNK2001: unresolved external symbol "public: virtual void * __thiscall QWebView::qt_metacast(char const *)" (?qt_metacast@QWebView@@UAEPAXPBD@Z)
3>onlinedb.obj : error LNK2001: unresolved external symbol "public: virtual int __thiscall QWebView::qt_metacall(enum QMetaObject::Call,int,void * *)" (?qt_metacall@QWebView@@UAEHW4Call@QMetaObject@@HPAPAX@Z)
3>onlinedb.obj : error LNK2001: unresolved external symbol "public: virtual bool __thiscall QWebView::event(class QEvent *)" (?event@QWebView@@UAE_NPAVQEvent@@@Z)
3>onlinedb.obj : error LNK2001: unresolved external symbol "public: virtual class QSize __thiscall QWebView::sizeHint(void)const " (?sizeHint@QWebView@@UBE?AVQSize@@XZ)
3>onlinedb.obj : error LNK2001: unresolved external symbol "protected: virtual void __thiscall QWebView::mousePressEvent(class QMouseEvent *)" (?mousePressEvent@QWebView@@MAEXPAVQMouseEvent@@@Z)
3>onlinedb.obj : error LNK2001: unresolved external symbol "protected: virtual void __thiscall QWebView::mouseReleaseEvent(class QMouseEvent *)" (?mouseReleaseEvent@QWebView@@MAEXPAVQMouseEvent@@@Z)
3>onlinedb.obj : error LNK2001: unresolved external symbol "protected: virtual void __thiscall QWebView::mouseDoubleClickEvent(class QMouseEvent *)" (?mouseDoubleClickEvent@QWebView@@MAEXPAVQMouseEvent@@@Z)
3>onlinedb.obj : error LNK2001: unresolved external symbol "protected: virtual void __thiscall QWebView::mouseMoveEvent(class QMouseEvent *)" (?mouseMoveEvent@QWebView@@MAEXPAVQMouseEvent@@@Z)
3>onlinedb.obj : error LNK2001: unresolved external symbol "protected: virtual void __thiscall QWebView::wheelEvent(class QWheelEvent *)" (?wheelEvent@QWebView@@MAEXPAVQWheelEvent@@@Z)
3>onlinedb.obj : error LNK2001: unresolved external symbol "protected: virtual void __thiscall QWebView::keyPressEvent(class QKeyEvent *)" (?keyPressEvent@QWebView@@MAEXPAVQKeyEvent@@@Z)
3>onlinedb.obj : error LNK2001: unresolved external symbol "protected: virtual void __thiscall QWebView::keyReleaseEvent(class QKeyEvent *)" (?keyReleaseEvent@QWebView@@MAEXPAVQKeyEvent@@@Z)
3>onlinedb.obj : error LNK2001: unresolved external symbol "protected: virtual void __thiscall QWebView::focusInEvent(class QFocusEvent *)" (?focusInEvent@QWebView@@MAEXPAVQFocusEvent@@@Z)
3>onlinedb.obj : error LNK2001: unresolved external symbol "protected: virtual void __thiscall QWebView::focusOutEvent(class QFocusEvent *)" (?focusOutEvent@QWebView@@MAEXPAVQFocusEvent@@@Z)
3>onlinedb.obj : error LNK2001: unresolved external symbol "protected: virtual void __thiscall QWebView::paintEvent(class QPaintEvent *)" (?paintEvent@QWebView@@MAEXPAVQPaintEvent@@@Z)
3>onlinedb.obj : error LNK2001: unresolved external symbol "protected: virtual void __thiscall QWebView::resizeEvent(class QResizeEvent *)" (?resizeEvent@QWebView@@MAEXPAVQResizeEvent@@@Z)
3>onlinedb.obj : error LNK2001: unresolved external symbol "protected: virtual void __thiscall QWebView::contextMenuEvent(class QContextMenuEvent *)" (?contextMenuEvent@QWebView@@MAEXPAVQContextMenuEvent@@@Z)
3>onlinedb.obj : error LNK2001: unresolved external symbol "protected: virtual void __thiscall QWebView::dragEnterEvent(class QDragEnterEvent *)" (?dragEnterEvent@QWebView@@MAEXPAVQDragEnterEvent@@@Z)
3>onlinedb.obj : error LNK2001: unresolved external symbol "protected: virtual void __thiscall QWebView::dragMoveEvent(class QDragMoveEvent *)" (?dragMoveEvent@QWebView@@MAEXPAVQDragMoveEvent@@@Z)
3>onlinedb.obj : error LNK2001: unresolved external symbol "protected: virtual void __thiscall QWebView::dragLeaveEvent(class QDragLeaveEvent *)" (?dragLeaveEvent@QWebView@@MAEXPAVQDragLeaveEvent@@@Z)
3>onlinedb.obj : error LNK2001: unresolved external symbol "protected: virtual void __thiscall QWebView::dropEvent(class QDropEvent *)" (?dropEvent@QWebView@@MAEXPAVQDropEvent@@@Z)
3>onlinedb.obj : error LNK2001: unresolved external symbol "protected: virtual void __thiscall QWebView::changeEvent(class QEvent *)" (?changeEvent@QWebView@@MAEXPAVQEvent@@@Z)
3>onlinedb.obj : error LNK2001: unresolved external symbol "protected: virtual void __thiscall QWebView::inputMethodEvent(class QInputMethodEvent *)" (?inputMethodEvent@QWebView@@MAEXPAVQInputMethodEvent@@@Z)
3>onlinedb.obj : error LNK2001: unresolved external symbol "public: virtual class QVariant __thiscall QWebView::inputMethodQuery(enum Qt::InputMethodQuery)const " (?inputMethodQuery@QWebView@@UBE?AVQVariant@@W4InputMethodQuery@Qt@@@Z)
3>onlinedb.obj : error LNK2001: unresolved external symbol "protected: virtual bool __thiscall QWebView::focusNextPrevChild(bool)" (?focusNextPrevChild@QWebView@@MAE_N_N@Z)
3>onlinedb.obj : error LNK2001: unresolved external symbol "protected: virtual class QWebView * __thiscall QWebView::createWindow(enum QWebPage::WebWindowType)" (?createWindow@QWebView@@MAEPAV1@W4WebWindowType@QWebPage@@@Z)
3>onlinedb.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: virtual __thiscall QWebView::~QWebView(void)" (__imp_??1QWebView@@UAE@XZ) referenced in function "public: virtual void * __thiscall QWebView::`scalar deleting destructor'(unsigned int)" (??_GQWebView@@UAEPAXI@Z) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T19:30:37.453

```
unresolved external symbol "public: virtual int __thiscall OnlineDB::qt_metacall(enum QMetaObject::Call,int,void * *) 
```

你没有moc'd你的`OnlineDB`或者你没有链接objectfile。

```
error LNK2019: unresolved external symbol "__declspec(dllimport) public: void _thiscall QWebView::load(class QUrl const &)" 
```

您还没有链接到所有必要的 Qt 库。`QWebView`在`QtWebKit`图书馆里。

# javascript - 空结果上的ajax，JQuery

> ID：15314742
> 
> 赞同：0
> 
> 时间：2013-03-09T19:08:48.153
> 
> 标签：javascript, jquery

如果我有来自 C# 方法的空结果，我应该使用什么。

```
jQuery.ajax({
        type: "POST",
        url: "Me.aspx/Load",
        data: "{}",
        contentType: "application/json; charset=utf-8",
        dataType: "json",

            success: function (msg) {

                    alert(msg.d);
                }

}); 
```

为空时不提醒。

我努力了：

```
msg.length===0 
```

和

```
error: 
```

但无法使其工作。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T19:10:10.007

如果结果是一个空字符串，那么您应该检查一个空字符串：

```
msg === '' 
```

对不起，更好：

```
if (msg) {...} 
```

如果 msg**不是**：

*   错误的
*   0
*   无效的
*   ''（空字符串）
*   钠
*   不明确的

它评估为`true`。

你对服务器有什么期待？

**编辑**：返回一个具有成功属性的对象，如下所示：

```
{
    "success": true,
    ...
} 
```

然后检查

```
if (msg.success) { ... do stuff ...} 
```

**重新编辑**

我不知道它在 C# 中是如何工作的，但是您必须序列化您在服务器中使用的对象。假设这是您的（失败）对象：

```
response // and response.success = false 
```

因此，您应该执行以下操作：

```
print json_encode(response); 
```

以便将其返回到您的 JS 程序中。

# flash - 如何在 AIR 强制运行时中包含视频（ADT 命令行）

> ID：15314743
> 
> 赞同：0
> 
> 时间：2013-03-09T19:08:53.123
> 
> 标签：flash, air

我已经成功地使用这个 AIR 强制运行时将 AIR 嵌入到应用程序中。但我的问题是我的应用程序中的嵌入视频不包括在内，因为它不在 xml 中。我的问题是如何将这些 Flash 视频包含到我的 Android 应用程序中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T20:14:22.917

您添加`files_and_dirs yourDir`到命令 ->[文件和路径选项 - ADT](http://help.adobe.com/en_US/air/build/WS901d38e593cd1bac1e63e3d128fc240122-7ff2.html)

# c++ - Boost序列化在一定文件大小后抛出“输入流错误”

> ID：15314747
> 
> 赞同：2
> 
> 时间：2013-03-09T19:09:41.770
> 
> 标签：c++, boost, boost-serialization

我正在使用 Boost::serialization 读取/写入包含 3d 模型的文件。

在文件达到一定大小（大约 8-12kb+）之后，每次我尝试读取文件时，序列化都会引发“输入流错误”异常。直到那时它每次都可以正常工作 - 例如我可以成功读/写一个 1kb 模型 12 次，然后在第 13 次及以后它会抛出异常！

这是序列化/反序列化的代码：

```
 JonsPackagePtr ReadJonsPkg(const std::string& jonsPkgName)
    {
        std::ifstream jonsPkgStream(jonsPkgName.c_str(), std::fstream::binary || std::fstream::in);
        JonsPackagePtr pkg(new JonsPackage());   // "JonsPackagePtr" is a boost_shared_ptr typedef

        if (jonsPkgStream && jonsPkgStream.good() && jonsPkgStream.is_open())
        {
            boost::archive::binary_iarchive iar(jonsPkgStream);

            iar >> (*pkg.get());
        }

        return pkg;
    }

    bool WriteJonsPkg(const std::string& jonsPkgName, const JonsPackagePtr pkg)
    {
        std::ofstream outStream(jonsPkgName.c_str(), std::fstream::out | std::fstream::binary);
        bool ret = false;

        if (outStream.is_open())
        {
            boost::archive::binary_oarchive oar(outStream);
            oar << (*pkg.get());

            ret = true;
        }

        return ret;
    } 
```

这是我存档的内容：

```
/* PackageHeader definition */
    struct PackageHeader
    {
        std::string mSignature;
        uint8_t mMajorVersion;
        uint8_t mMinorVersion;

        PackageHeader();
    };

    /* PackageMesh definition */
    struct PackageMesh
    {
        std::vector<float> mVertexData;
        std::vector<uint32_t> mIndiceData;

        PackageMesh();
    };

    /* PackageModel definition */
    struct PackageModel
    {
        std::string mName;
        std::vector<PackageModel> mChildren;
        std::vector<PackageMesh> mMeshes;
        Mat4 mTransform;

        PackageModel();
    };

    /* JonsPackage definition */
    struct JonsPackage
    {
        PackageHeader mHeader;
        std::vector<PackageModel> mModels;

        JonsPackage();
    };

    typedef boost::shared_ptr<JonsPackage> JonsPackagePtr;
    JonsPackagePtr ReadJonsPkg(const std::string& jonsPkgName);
    bool WriteJonsPkg(const std::string& jonsPkgName, const JonsPackagePtr pkg);

    /* PackageHeader inlines */
    inline PackageHeader::PackageHeader() : mSignature("jons"), mMajorVersion(LatestMajorVersion), mMinorVersion(LatestMinorVersion)
    {
    }

    /* PackageModel inlines */
    inline PackageModel::PackageModel() : mName(""), mTransform(1.0f)
    {
    }

    /* PackageMesh inlines */
    inline PackageMesh::PackageMesh()
    {
    }

    /* JonsPackage inlines */
    inline JonsPackage::JonsPackage()
    {
    } 
```

最后，这是我的非侵入式序列化定义：

```
namespace boost
{
    namespace serialization
    {
        template<class Archive>
        void serialize(Archive & ar, JonsEngine::PackageHeader& header, const unsigned int version)
        {
            ar & header.mMajorVersion;
            ar & header.mMinorVersion;
            ar & header.mSignature;
        }

        template<class Archive>
        void serialize(Archive & ar, JonsEngine::PackageModel& model, const unsigned int version)
        {
            ar & model.mName;
            ar & model.mChildren;
            ar & model.mMeshes;
            ar & model.mTransform;
        }

        template<class Archive>
        void serialize(Archive & ar, JonsEngine::PackageMesh& mesh, const unsigned int version)
        {
            ar & mesh.mVertexData;
            ar & mesh.mIndiceData;
        }

        template<class Archive>
        void serialize(Archive & ar, JonsEngine::JonsPackage& pkg, const unsigned int version)
        {
            ar & pkg.mHeader;
            ar & pkg.mModels;
        }

        template<class Archive>
        void serialize(Archive & ar, glm::detail::tmat4x4<glm::mediump_float> transform, const unsigned int version)
        {
            ar & transform[0];
            ar & transform[1];
            ar & transform[2];
            ar & transform[3];
        }

        template<class Archive>
        void serialize(Archive & ar, glm::detail::tvec4<glm::mediump_float> vec, const unsigned int version)
        {
            ar & vec.x;
            ar & vec.y;
            ar & vec.z;
            ar & vec.w;
        }
    } // namespace serialization
} // namespace boost 
```

正如我上面提到的，**只有在一定的文件大小（8-12kb+）之后，当我尝试读取它时它才会开始抛出异常。**为什么会这样，什么可能导致它？到现在为止一切顺利...

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T20:32:42.450

在`ReadJonsPkg`你应该使用按位或：`std::fstream::binary | std::fstream::in`

# algorithm - 探测哈希表

> ID：15314751
> 
> 赞同：1
> 
> 时间：2013-03-09T19:10:11.697
> 
> 标签：algorithm, hashmap, hashcode, hash-collision, hash-function

我正在为一个项目实现一个哈希表，使用 3 种不同类型的探测。现在我正在研究线性。

对于线性探测，我了解探测的工作原理，我的导师暗示他希望步长为 1。问题是，不允许重复。所以我必须在插入之前“搜索”一个值，对吗？但是，如果表格被使用到所有单元格都被“占用”或“删除”怎么办？然后为了搜索特定键以确保它不在表中，我将不得不搜索整个表。这意味着搜索操作（以及扩展的插入操作）是 O(n)。

这似乎不对，我想我误解了一些东西。

我知道我不必在二次探测中遇到同样的问题，因为表格需要至少有一半是空的，并且它只会探测确定数量的元素。对于双重哈希，我不确定这将如何工作，因为我还需要搜索表以证明要插入的密钥不存在。但是，如果没有一个单元格“从未被占用”，我怎么知道如何停止搜索？

所以：在开放散列中，表中的每个条目过去都已被占用，是否需要 O(n) 探针来搜索元素（如果不允许重复则插入）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T20:04:34.217

如果您误解了线性探测的这一方面，我也是。我同意，如果哈希表接近满了，那么每次插入的性能会下降到 O(n)。有关所有详细信息，请参阅[Don Knuth 1963 年的分析](http://algo.inria.fr/AofA/Research/11-97.html)。

顺便说一句，我惊讶地看到这个问题的第一次分析实际上是由数学家 Ramanujan 在 1913 年完成的，他的结果暗示“元素的总位移，即构建成本，对于一个满的线性探测哈希表大约是 N^(3/2)。” （见[这里](http://algo.inria.fr/AofA/Research/11-97.html)）

然而，在实践中，我不认为插入速度慢的问题是几乎完整的哈希表的重要问题。重要的问题是你到了根本无法再插入的地步！

因此，哈希表的任何实际实现都必须有一种策略，用于在超出给定负载因子时重新调整哈希表的大小，并根据理论或实验选择调整大小的最佳负载因子。在这种情况下使用实验特别有价值，因为线性哈希的性能可能对哈希函数以避免集群的方式在哈希表中均匀分布项目的能力非常敏感，这使得性能非常依赖于要插入到表中的项目。

# c# - Linq 的 Column In (Select ...) 语句

> ID：15314754
> 
> 赞同：1
> 
> 时间：2013-03-09T19:10:26.533
> 
> 标签：c#, sql, linq

您如何编写一个 linq 语句，在 MS SQL 中执行与此子选择等效的操作：

```
... WHERE
tblXref.Organization_Id IN (SELECT Organization_Id
                   FROM AppUser au INNER JOIN [User] u ON au.User_Id = u.Id
                   WHERE u.Username = usernameVariable) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T19:13:40.093

好吧，单独编写内部查询可能更简单（记住您没有*执行*查询）：

```
var innerQuery = from au in db.AppUsers
                 join u in db.Users on au.User_Id equals u.Id
                 where u.UserName == userNameVariable
                 select au.Organization_Id;

var query = from tblXref in db.CrossReferences // or whatever
            where innerQuery.Contains(tblXref.Organization_Id)
            ...; 
```

# php - 无法使用 pdo 插入变量

> ID：15314755
> 
> 赞同：0
> 
> 时间：2013-03-09T19:10:27.883
> 
> 标签：php, pdo

我在将一些变量插入我的数据库时遇到问题，这是我的代码。

```
 preg_match('/Tel\. P(.)liza :(.*?)Localidad/s', $a->output(), $tel);
  echo "Tel. Poliza: " . $tel[2] . "<br><br>";
  $tel = $tel[2];

  preg_match('/Tel\. Expt :(.*?)D\.P\./s', $a->output(), $tel1);
  $tel1 = $tel1[1];
  preg_match_all('/\\b[0-9]{9}\\b/s', $tel1, $tel2);
  $tel2 = implode(" / ", $tel2[0]);
  echo "Tel. Expt: " . $tel2 . "<br><br>";

  $conn = new PDO('mysql:host=localhost;port=3306;dbname=something', 'something', 'something');

  $sql = "INSERT INTO clients (tel poliza, tel expt) VALUES ( ? , ? )";
  $q = $conn->prepare($sql);
  $q->execute(array ($tel, $tel2)); 
```

我可以回显这个变量（它们只是 pdf 文件中的数字）但是当我运行 sql 查询时，没有任何东西插入到数据库中。我已经用我的代码中的其他变量尝试过这个，它们被插入但是当我有这个 2 到查询时，根本没有插入任何东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T19:12:40.310

您的表列名称中包含空格，因此您必须将它们放在反引号中

```
$sql = "INSERT INTO clients (`tel poliza`, `tel expt`) VALUES ( ? , ? )"; 
```

# java - 从 Hashmap 值中创建一个新的双精度值

> ID：15314758
> 
> 赞同：0
> 
> 时间：2013-03-09T19:10:34.863
> 
> 标签：java

我收到以下错误：

> 找不到符号，符号：变量值，位置 Map<String,Double> 类型的变量星球

在这条线上`Double[] Total = new Double [planet.values];`

这是我的代码：

```
public static void main(String[] args) {

    Map<String, Double> planet = new HashMap();

    Double Weight = 205.00;

    planet.put("Earth", 1.00);
    planet.put("Moon", .378);
    planet.put("Mercury", .166);
    planet.put("Jupiter", 2.364);
    planet.put("Venus", .907);
    planet.put("Uranus", .889);

    System.out.println("Amount of gravity on each planet: " + planet + "\n");  

    Double[] Total = new Double [planet.values];
    System.out.println(planet.values()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T19:14:10.463

Map 没有任何名为 的公共字段`value`。所以`planet.value`无效。如果要初始化一个长度等于地图大小的数组，请使用`size()`：

```
Double[] total = new Double[planet.size()]; 
```

另外，请尊重 Java 命名约定。变量以小写字母开头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T19:19:59.247

只需将其更改为`planet.values()`而不是“planet.values”，您就可以尝试访问不调用该方法的字段。

所以这将是你的代码：

```
Collection<Double> values = planet.values();
Double[] total = values.toArray(new Double[values.size()]); 
```

顺便说一句，数组的`toString()`方法不会呈现值。如果要将值写入控制台，请使用`Arrays.toString(array)`.

# java - 沿墙滑动的瓷砖碰撞

> ID：15314759
> 
> 赞同：2
> 
> 时间：2013-03-09T19:10:48.193
> 
> 标签：java, slide, collision, tile

![...](../Images/37bf2307ab08d2124b8d206630ab63ef.png)

我有一个球，我可以在由相同大小的瓷砖组成的地图上四处移动。玩家不应该能够走过较暗且有黑色边框的瓷砖。我有一个多维的瓷砖数组，用于检查哪些瓷砖是实心的。

如果玩家在水平和垂直方向上移动，我希望玩家靠墙滑动。问题是，如果他这样做，他会坚持下去。我设法让它在每个轴上完美地工作，但分开。这是我的水平碰撞检查代码：

```
if (vx < 0) {
    // checks for solid tiles left of the player
    if (level.isBlocked(i, j) || level.isBlocked(i, jj)) {
        x = side * (i + 1); // moves player to left side of tile
        vx = 0;
    }
} else if (vx > 0) {
    // checks for solid tiles right of the player
    if (level.isBlocked(ii, j) || level.isBlocked(ii, jj)) {
        x = (ii * side) - getWidth(); // moves player to right side of tile
        vx = 0;
    }
} 
```

level.isBlocked *()*方法检查数组的索引是否被实心图块占用。*i*和*j*变量是玩家右上角所在数组中的哪个索引。*ii*和*jj*变量是玩家右下角所在数组中的哪个索引。

这很好用，但是如果我在下面添加相同的代码块，但将*x*替换为*y*，将*vx*替换为*vy*等等，就会出现问题。所以我可以添加水平或垂直碰撞处理，它可以工作，但不能同时进行。我看过一些文章解释我必须将它们分开或其他东西，但我不太了解它们。如何检查两个轴上的碰撞并保持滑动效果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T11:09:34.327

我终于让它工作了。Angelatlarge 的回答有助于理解问题，但我决定从头开始。我最终首先计算了新的 x 和 y 位置并将它们存储在单独的变量中。然后我检查了播放器左中下方的瓷砖，与中右相同。然后，如果玩家由于水平速度而站在瓷砖上，我将布尔值设置为 true。如果没有碰撞，我将实际 x 变量设置为我之前计算的新变量。然后我对垂直碰撞重复了同样的事情。

这是用于水平检查：

```
float newX = x + vx * delta;
boolean xCollision = false;
if (vx < 0) {
    int i = level.toIndex(x);
    int j = level.toIndex(y + getHeight() / 2);
    xCollision = level.isBlocked(i, j);
} else if (vx > 0) {
    int i = level.toIndex(x + getWidth());
    int j = level.toIndex(y + getHeight() / 2);
    xCollision = level.isBlocked(i, j);
}
if (!xCollision) x = newX; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T20:28:08.373

问题是，在你所拥有的设置中，给定一个方块和玩家位置，并且考虑到它们重叠的事实，你不知道玩家是与方块的垂直墙还是水平墙发生碰撞。所以更清楚地看到这个考虑以下块和两个碰撞路径 ![在此处输入图像描述](../Images/14f3cd1cda27399d068a0998b56daa64.png)

顶部路径将与左壁碰撞，需要`vx=0;`（停止水平移动），而底部路径与底部壁碰撞，需要 `vy=0;`或停止垂直移动。

我认为为了进行您想要的那种碰撞检测，您需要计算玩家路径和方块**墙壁**的交点，而不仅仅是检查玩家是否与方块重叠。您可以通过计算播放器矩形和块矩形的重叠矩形来破解所需的行为。考虑以下情况：

![在此处输入图像描述](../Images/d5f2e88d15b225d44ddca3e6387a5636.png)

其中红色的 seqare 代表您的播放器。重叠矩形（玩家位于方块顶部的小矩形）比其高更宽，这*表明*发生了垂直碰撞，而不是水平碰撞。然而，这并非万无一失。它仍然要求您能够访问块的**形状**，而不仅仅是测试玩家矩形的一部分是否与块重叠。

# git - 在 Jenkins for Git 中管理 SSH 密钥

> ID：15314760
> 
> 赞同：55
> 
> 时间：2013-03-09T19:11:01.233
> 
> 标签：git, ssh, jenkins, continuous-integration

我正在尝试使用 GitHub 托管的存储库（使用 Jenkins Git 插件）启动并运行 Jenkins。存储库有多个 git 子模块，所以我不确定是否要尝试管理多个部署密钥。

我的个人 GitHub 用户帐户是我希望与 Jenkins 合作的每个项目的合作者，因此我在其中生成了一个 SSH 密钥`/var/lib/jenkins/.ssh`并将其添加到我的个人 GitHub 帐户中。

但是，当我尝试将存储库 URL 添加到我的 Jenkins 项目配置中时，我得到：

```
Failed to connect to repository : Command "git ls-remote -h git@github.com:***/***.git HEAD" returned status code 128:
stdout: 
stderr: Host key verification failed. 
fatal: The remote end hung up unexpectedly 
```

同样，当我安排构建时，我会得到：

```
stderr: Host key verification failed.
fatal: The remote end hung up unexpectedly 
```

我还尝试按照[此处](https://web.archive.org/web/20130502014020/blog.firmhouse.com/configuring-multiple-private-ssh-deploy-keys-in-jenkins-for-github-com)所述设置 SSH 配置文件，但无济于事。

任何人都可以解释一下吗？谢谢

**编辑**

我应该补充一点，我正在运行 CentOS 5.8

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-03-09T19:27:43.223

看起来`github.com`jenkins 尝试连接的主机未在 Jenkins 用户的`$HOME/.ssh/known_hosts`. Jenkins 作为用户在大多数发行版上运行`jenkins`，因此有自己的`.ssh`目录来存储公钥列表和`known_hosts`.

我能想到的解决此问题的最简单的解决方案是：

```
# Login as the jenkins user and specify shell explicity,
# since the default shell is /bin/false for most
# jenkins installations.
sudo su jenkins -s /bin/bash

cd SOME_TMP_DIR
# git clone YOUR_GITHUB_URL

# Allow adding the SSH host key to your known_hosts

# Exit from su
exit 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-09T19:26:15.343

您是否尝试过以 jenkins 用户身份登录？

尝试这个：

```
sudo -i -u jenkins #For RedHat you might have to do 'su' instead.
git clone git@github.com:your/repo.git 
```

如果主机没有被添加或授权，你经常会看到失败（因此我总是以 hudson/jenkins 的身份手动登录以首次连接到 github/bitbucket），但你包含的那个链接据说可以解决这个问题。

如果上述方法不起作用，请尝试重新复制密钥。确保它是 pub 密钥（即 id_rsa.pub）。也许你错过了一些角色？

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-09T19:34:04.727

根据这篇[文章](https://help.github.com/articles/error-permission-denied-publickey)，您可以尝试以下命令：

```
 ssh-add -l 
```

如果您的密钥不在列表中，那么

```
 ssh-add /var/lib/jenkins/.ssh/id_rsa_project 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-15T05:24:51.990

*如果您在/Jenkins/.ssh/*中有配置和私钥文件，这对我有用，您需要**chown**（更改所有者）这两个文件，然后**重新启动**jenkins 以便 jenkins 实例读取这两个文件。

# java-me - 在 J2ME 中，如何在删除任何记录后重新索引记录存储中的记录

> ID：15314761
> 
> 赞同：1
> 
> 时间：2013-03-09T19:11:02.933
> 
> 标签：java-me, rms, recordstore

我正在开发一个基于位置的 J2ME 应用程序，并且我正在使用 RMS 来存储数据。

在`RecordStore`我删除任何记录时，基础记录不会被重新索引。例如，如果我有 5 条记录并且我删除了第 2 条记录，那么记录 ID 将为 {1、3、4、5}。但我希望删除后的记录 ID 为 {1、2、3、4}。我该怎么做？？？因为 recordId 在我的应用程序中扮演着重要的角色来检索和更新记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T04:52:15.663

因此，既然您已经说过您的记录存储基本上很小（没有那么多数据），我建议您只需将您自己的自定义`id`字段添加到每条记录。 [正如 Meier 所说](https://stackoverflow.com/a/15317029/119114)，一旦创建了记录，RMS 记录 ID 并不是真的要重新计算和更改。所以，我会用你自己的。

如果您的每条记录都包含：

```
boolean isMale
int age
String firstName 
```

然后，我只需在每条记录的**开头添加另一个字段：**

```
int id 
```

它使您的记录更大一点，但不多（4 字节/记录）。如果您的记录少于 64k，那么您也可以将 a`short`用于`id`, 并保存几个字节。

这是一个使用这种记录读取、写入和删除的示例（[改编自此 IBM 教程）：](http://www.ibm.com/developerworks/library/j-j2me3/)

```
 private RecordStore _rs;

   // these next two methods are just small optimizations, to allow reading and 
   //  updating the ID field in a record without the overhead of creating a new
   //  stream to call readInt() on.  this assumes the id is a 4 byte int, written
   //  as the first field in each record.

   /** Update one record with a new id field */
   private static final void putIdIntoRecord(int id, byte[] record) {      
      // we assume the first 4 bytes are the id (int)
      record[0] = (byte)(id >> 24);
      record[1] = (byte)(id >> 16);
      record[2] = (byte)(id >> 8);
      record[3] = (byte)id;
   }

   /** Get the id field from one record */
   private static final int getIdFromRecord(byte[] record) {
      // we assume the first 4 bytes are the id (int)
      return ((0xFF & record[0]) << 24) | 
            ((0xFF & record[1]) << 16) | 
            ((0xFF & record[2]) << 8) | 
            (0xFF & record[3]);
   }

   /** delete a record with the given (custom) id, re-indexing records afterwards */
   private void delete(int idToDelete) {     
      try {
         RecordEnumeration enumerator = _rs.enumerateRecords(new IdEqualToFilter(idToDelete), 
               null, false);
         _rs.deleteRecord(enumerator.nextRecordId());

         // now, re-index records after 'idToDelete'
         enumerator = _rs.enumerateRecords(new IdGreaterThanFilter(idToDelete), null, true);
         while (enumerator.hasNextElement()) {
            int recordIdToUpdate = enumerator.nextRecordId();
            byte[] record = _rs.getRecord(recordIdToUpdate);
            // decrement the id by 1
            int newId = getIdFromRecord(record) - 1;
            // copy the new id back into the record
            putIdIntoRecord(newId, record);
            // update the record, which now has a lower id, in the store
            _rs.setRecord(recordIdToUpdate, record, 0, record.length);
         }
      } catch (RecordStoreNotOpenException e) {
         e.printStackTrace();
      } catch (InvalidRecordIDException e) {
         e.printStackTrace();
      } catch (RecordStoreException e) {
         e.printStackTrace();
      }               
   }

   /** generate some record store data ... example of writing to store */
   public void writeTestData()
   {
      // just put 20 random records into the record store
      boolean[] booleans = new boolean[20];
      int[] integers = new int[20];
      String[] strings = new String[20];
      for (int i = 0; i < 20; i++) {
         booleans[i] = (i % 2 == 1);
         integers[i] = i * 2;
         strings[i] = "string-" + i;
      }

      writeRecords(booleans, integers, strings);
   }

   /** take the supplied arrays of data, and save a record for each array index */
   public void writeRecords(boolean[] bData, int[] iData, String[] sData)
   {
      try
      {
         // Write data into an internal byte array
         ByteArrayOutputStream strmBytes = new ByteArrayOutputStream();

         // Write Java data types into the above byte array
         DataOutputStream strmDataType = new DataOutputStream(strmBytes);

         byte[] record;

         for (int i = 0; i < sData.length; i++)
         {
            // Write Java data types
            strmDataType.writeInt(i);               // this will be the ID field!
            strmDataType.writeBoolean(bData[i]);
            strmDataType.writeInt(iData[i]);
            strmDataType.writeUTF(sData[i]);

            // Clear any buffered data
            strmDataType.flush();

            // Get stream data into byte array and write record
            record = strmBytes.toByteArray();            
            _rs.addRecord(record, 0, record.length);           

            // Toss any data in the internal array so writes
            // starts at beginning (of the internal array)
            strmBytes.reset();
         }

         strmBytes.close();
         strmDataType.close();
      }
      catch (Exception e)
      {
         e.printStackTrace();
      }
   }

   /** read in all the records, and print them out */
   public void readRecords()
   {
      try
      {
         RecordEnumeration re = _rs.enumerateRecords(null, null, false);         
         while (re.hasNextElement())
         {    
            // Get next record
            byte[] recData = re.nextRecord(); 

            // Read from the specified byte array
            ByteArrayInputStream strmBytes = new ByteArrayInputStream(recData);

            // Read Java data types from the above byte array
            DataInputStream strmDataType = new DataInputStream(strmBytes);

            // Read back the data types
            System.out.println("Record ID=" + strmDataType.readInt());
            System.out.println("Boolean: " + strmDataType.readBoolean());
            System.out.println("Integer: " + strmDataType.readInt());
            System.out.println("String: " + strmDataType.readUTF());
            System.out.println("--------------------");

            strmBytes.close();
            strmDataType.close();        
         }
      }
      catch (Exception e)
      {
         e.printStackTrace();
      }
   } 
```

在这里，我使用了几个小类`RecordFilter`，在搜索记录存储时使用：

```
 /** helps filter out records greater than a certain id */
   private class IdGreaterThanFilter implements RecordFilter {
      private int _minimumId; 
      public IdGreaterThanFilter(int value) {
         _minimumId = value;
      }
      public boolean matches(byte[] candidate) {
         // return true if candidate record's id is greater than minimum value
         return (getIdFromRecord(candidate) > _minimumId);         
      }      
   }

   /** helps filter out records by id field (not "recordId"!) */
   private class IdEqualToFilter implements RecordFilter {
      private int _id; 
      public IdEqualToFilter(int value) {
         _id = value;
      }
      public boolean matches(byte[] candidate) {
         // return true if candidate record's id matches
         return (getIdFromRecord(candidate) == _id);         
      }      
   } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T23:14:52.400

You need to change your application logic. ID is just for identification, and not for sorting. Because it is for identification, it must remains the same.

Very often the easiest thing to do is to read and write the whole recordstore at once.

# ruby - 使用 rbenv install 安装 ruby 2.0.0-p0 后 gem 检查错误（已注册但缺少 gem）

> ID：15314762
> 
> 赞同：2
> 
> 时间：2013-03-09T19:11:09.907
> 
> 标签：ruby, gem, rbenv

我安装的 ruby​​ 1.9.3 一切正常。

```
$ rbenv global 1.9.3-p385
$ gem list

*** LOCAL GEMS ***

bigdecimal (1.1.0)
io-console (0.3)
json (1.5.4)
minitest (2.5.1)
rake (0.9.2.2)
rdoc (3.9.5)
$ gem check
$ 
```

但是，在我安装 ruby​​ 2.0.0 后`rbenv install`，出现了一些奇怪的错误消息`gem check`。

```
$ rbenv install 2.0.0-p0
Downloading openssl-1.0.1e.tar.gz...
-> https://www.openssl.org/source/openssl-1.0.1e.tar.gz
Installing openssl-1.0.1e...
Installed openssl-1.0.1e to /Users/gogao/.rbenv/versions/2.0.0-p0

Downloading ruby-2.0.0-p0.tar.gz...
-> http://ftp.ruby-lang.org/pub/ruby/2.0/ruby-2.0.0-p0.tar.gz
Installing ruby-2.0.0-p0...
Installed ruby-2.0.0-p0 to /Users/gogao/.rbenv/versions/2.0.0-p0

$ rbenv global 2.0.0-p0
$ rbenv rehash
$ gem list

*** LOCAL GEMS ***

bigdecimal (1.2.0)
io-console (0.4.2)
json (1.7.7)
minitest (4.3.2)
psych (2.0.0)
rake (0.9.6)
rdoc (4.0.0)
test-unit (2.0.0.0)
$ gem check
Checking gems...

bigdecimal-1.2.0.gem has 1 problems
  bigdecimal-1.2.0:
    Gem registered but doesn't exist at /Users/gogao/.rbenv/versions/2.0.0-p0/lib/ruby/gems/2.0.0/gems/bigdecimal-1.2.0

io-console-0.4.2.gem has 1 problems
  io-console-0.4.2:
    Gem registered but doesn't exist at /Users/gogao/.rbenv/versions/2.0.0-p0/lib/ruby/gems/2.0.0/gems/io-console-0.4.2

json-1.7.7.gem has 1 problems
  json-1.7.7:
    Gem registered but doesn't exist at /Users/gogao/.rbenv/versions/2.0.0-p0/lib/ruby/gems/2.0.0/gems/json-1.7.7

minitest-4.3.2.gem has 1 problems
  minitest-4.3.2:
    Gem registered but doesn't exist at /Users/gogao/.rbenv/versions/2.0.0-p0/lib/ruby/gems/2.0.0/gems/minitest-4.3.2

psych-2.0.0.gem has 1 problems
  psych-2.0.0:
    Gem registered but doesn't exist at /Users/gogao/.rbenv/versions/2.0.0-p0/lib/ruby/gems/2.0.0/gems/psych-2.0.0

rake-0.9.6.gem has 2 problems
  /Users/gogao/.rbenv/versions/2.0.0-p0/lib/ruby/gems/2.0.0/cache/rake-0.9.6.gem:
    missing gem file /Users/gogao/.rbenv/versions/2.0.0-p0/lib/ruby/gems/2.0.0/cache/rake-0.9.6.gem
  /Users/gogao/.rbenv/versions/2.0.0-p0/lib/ruby/gems/2.0.0/specifications/rake-0.9.6.gemspec:
    Spec file missing for installed gem

rdoc-4.0.0.gem has 2 problems
  /Users/gogao/.rbenv/versions/2.0.0-p0/lib/ruby/gems/2.0.0/cache/rdoc-4.0.0.gem:
    missing gem file /Users/gogao/.rbenv/versions/2.0.0-p0/lib/ruby/gems/2.0.0/cache/rdoc-4.0.0.gem
  /Users/gogao/.rbenv/versions/2.0.0-p0/lib/ruby/gems/2.0.0/specifications/rdoc-4.0.0.gemspec:
    Spec file missing for installed gem

test-unit-2.0.0.0.gem has 2 problems
  /Users/gogao/.rbenv/versions/2.0.0-p0/lib/ruby/gems/2.0.0/cache/test-unit-2.0.0.0.gem:
    missing gem file /Users/gogao/.rbenv/versions/2.0.0-p0/lib/ruby/gems/2.0.0/cache/test-unit-2.0.0.0.gem
  /Users/gogao/.rbenv/versions/2.0.0-p0/lib/ruby/gems/2.0.0/specifications/test-unit-2.0.0.0.gemspec:
    Spec file missing for installed gem

$ 
```

这是一个已知的错误吗？还是我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:58:00.990

对于 Ruby 2.0.0-p0，我也从`gem check`. 但是，我在运行时对这些 gem 没有任何问题。我怀疑这可能是`check`2.0.0 中 Rubygems 命令的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-18T12:48:32.697

我有类似的错误。将选项传递给编译器修复安装。在使用 Homebrew 安装 readline 和 openssl 之前。

> RUBY_CONFIGURE_OPTS="--with-readline-dir=$(brew --prefix readline) --with-openssl-dir=$(brew --prefix openssl)" rbenv install 2.0.0-p0

来自[原始帖子的](http://ka-zoo.net/2013/04/ruby-2-0-0-with-rbenv/)[更多信息](http://kiubmen.com/blogging/instalar-rails-3-2-13-con-ruby-2-0-0-like-heroku-pow-rbenv-bundle-homebrew/?preview=true&preview_id=2070)

# r - 为二分法设置最大迭代？

> ID：15314763
> 
> 赞同：1
> 
> 时间：2013-03-09T19:11:10.423
> 
> 标签：r, maximize

如何为以下二分法代码设置最大迭代 = 20？我应该只做 feval 还是其他什么？

```
rf.bisection <- function(f, lower, upper, tol=1e-4) { 
flow <- f(lower) 
fupper <- f(upper) 
feval <- 2 

if (flow * fupper > 0) stop("The given interval does not contain the root!
\n") 
diff <- upper - lower 

while (abs(diff) > tol) { 
    newpoint <- (lower + upper) / 2 
    newf <- f(newpoint) 
    if (abs(newf) <= tol) break 
    if (flow * newf < 0) upper <- newpoint 
    if (fupper * newf < 0) lower <- newpoint 
    diff <- upper - lower 
    feval <- feval + 1 
} 
list(x = newx, value = newf, fevals=feval) 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T19:17:30.280

将您的条件更改`while`为`while (abs(diff) > tol & feval<22)`。22 因为在第一次迭代`feval`中已经是 2。

# java - [Ljava.lang.Object; 不能转换为 [Ljava.util.ArrayList;

> ID：15314767
> 
> 赞同：7
> 
> 时间：2013-03-09T19:11:44.420
> 
> 标签：java

在我的java代码中，我尝试建立一个arraylist列表，我的代码如下，

```
private ArrayList<Integer>[] listoflist;
listoflist = (ArrayList<Integer>[]) new Object[875715]; 
```

但是，当我编译代码时，编译器一直说

> > [Ljava.lang.Object; 不能转换为 [Ljava.util.ArrayList;

我可以问为什么我不能将 Object[] 转换为 ArrayList[] 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T20:09:19.933

您说您正在尝试构建 ArrayLists 列表。但是...您正在尝试使用数组来执行此操作...为什么不使用另一个 ArrayList 呢？其实很简单：

```
private List<List<Integer>> listoflist = new ArrayList<ArrayList<Integer>>(); 
```

这是一个使用它的例子：

```
ArrayList<Integer> list1 = new ArrayList<Integer>();
list1.add(Integer.valueOf(3));
list1.add(Integer.valueOf(4));
ArrayList<Integer> list2 = new ArrayList<Integer>();
list2.add(Integer.valueOf(6));
list2.add(Integer.valueOf(7));
listoflist.add(list1);
listoflist.add(list2); 
```

说这么多`ArrayList<ArrayList<Integer>>`次有点奇怪，所以在 Java 7 中构造可以只是`new ArrayList<>();`（它从你分配给它的变量中推断出类型）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-09T19:15:38.400

Java 是一种[强类型语言](http://en.wikipedia.org/wiki/Strong_typing)- 因此您不能简单地将一种类型转换为另一种类型。但是，您可以转换它们。

在简单使用的情况`Object[]`下`List`

```
Object[] arr = new Object[]{...};
List<Object> list = Arrays.asList(arr); 
```

如果您想将其用作`ArrayList`，例如，如果您想添加一些其他元素，只需再次包装它

```
 ArrayList<Object> arrList = new ArrayList<Object>(Arrays.asList(arr)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-11T18:30:43.690

您可以通过将 ArrayLists 放入 ArrayLists 来制作一个 n 维 ArrayList，就像一个 n 维数组一样。

这是一个具有 3 个维度的示例来展示这个概念。

```
public static void main(String args[]){
    ArrayList<ArrayList<ArrayList<Integer>>> listOfListOfList = new ArrayList<ArrayList<ArrayList<Integer>>>();
    int firstDimensionSize = 3;
    int secondDimensionSize = 4;
    int thirdDimensionSize = 5;

    for (int i = 0; i < firstDimensionSize; i++) {
        listOfListOfList.add(new ArrayList<ArrayList<Integer>>(vertices));
        for (int j = 0; j < secondDimensionSize; j++) {
            listOfListOfList.get(i).add(new ArrayList<Integer>());
            for(int k = 0; k < thirdDimensionSize; k++) {
                listOfListOfList.get(i).get(j).add(k);
            }
        }
    }
} 
```

请注意，您可以在新的 ArrayList<> 之后将 <> 留空。Java 将推断类型（无论如何嵌套），因为我相信 java 7。我只是在示例中将它们写下来，以显示您在每个级别处理的类型，以使示例更加清晰。您仍然可以将它们写下来以使您的代码更具可读性。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-09T19:27:35.103

像下面这样在单行中定义它，编译器不会抱怨

```
private ArrayList[] listoflist = (ArrayList<Integer>[]) new Object[10]; 
```

# mongodb - Mongodb：多个集合或一个带索引的大集合

> ID：15314769
> 
> 赞同：61
> 
> 时间：2013-03-09T19:11:49.677
> 
> 标签：mongodb

我需要帮助在 mongo 中建模我的数据。我的大部分经验都是在关系数据库中，我刚开始使用 mongo。我正在为不同的事件建模数据。

1.  每个“事件”都具有相同的字段。
2.  每个“事件”将有数百到数百万个文档/行
3.  事件是动态的，即会根据需要创建新的事件。即可能创建一个新的“2016 年夏季奥运会”活动。

可能最重要的是，在处理事件（CRUD 操作）时，用户必须指定事件名称。

到目前为止，我可以看到几种方法来做到这一点，并且我不想在以“错误”方式设置我的数据模型时犯下重大错误。

1) 一个包含所有事件数据的“事件”集合。“事件”名称的索引。查询看起来像：

```
db.events.find({event: 'Summer Olympics 2012');
{event: 'Summer Olympics 2012', attributes: [{name: 'joe smith', .... }
{event: 'Summer Olympics 2012', attributes: [{name: 'jane doe', .... }
{event: 'Summer Olympics 2012', attributes: [{name: 'john avery', .... }
{event: 'Summer Olympics 2012', attributes: [{name: 'ted williams', .... }

db.events.find({event: 'Summer Olympics 2013'})
{event: 'Summer Olympics 2013', attributes: [{name: 'steve smith', .... }
{event: 'Summer Olympics 2013', attributes: [{name: 'amy jones', .... } 
```

2) 每个新事件的集合，带有集合以跟踪所有事件名称。事件名称不需要索引，因为每个事件都存储在不同的集合中。

```
// multiple collections, create new as needed
db.summer2012.find() // get summer 2012 docs

db.summer2016.find() // get summer 2016 docs

//'events' collection
db.events.find() // get all events that I would have collections for
{name: 'summer2012', title: 'Summer Olympics 2012'};
{name: 'summer2016', title: 'Summer Olympics 2016'}; 
```

对于＃1，我有点担心，一旦我达到 100 个事件，每个事件都有数百万条记录，即使其中一个事件只有 500 个文档，每个“事件”的查找也会很慢。

对于#2，我是否通过每次都创建一个新集合来“绕过”mongo 模型并且出现一个事件？

欢迎提出任何意见/想法，因为我真的不知道哪一个最终会表现得更好，或者其中一个是否会给我带来更多麻烦。我环顾四周（包括mongo的网站），我真的找不到具体的答案。

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-03-27T15:12:15.390

从这里的 mongo 文档：[数据建模](http://docs.mongodb.org/manual/core/data-modeling/#large-number-of-collections)

> 在某些情况下，您可能会选择将信息存储在多个集合中而不是单个集合中。
> 
> 考虑一个示例收集日志，它存储各种环境和应用程序的日志文档。日志集合包含以下形式的文档：
> 
> {日志：“开发”，ts：...，信息：...} {日志：“调试”，ts：...，信息：...}
> 
> 如果文档总数较少，您可以按类型将文档分组到集合中。对于日志，请考虑维护不同的日志集合，例如 logs.dev 和 logs.debug。logs.dev 集合将仅包含与开发环境相关的文档。
> 
> 通常，拥有大量集合并没有显着的性能损失，并且性能非常好。不同的集合对于高通量批处理非常重要。

还和 10gen 的家伙说话。对于非常大的收藏，他列出了将其分成更小更具体的收藏的多种好处。他对对所有数据使用一个集合并使用索引的评论是：

> 仅仅因为您可以做某事并不意味着您应该做某事。适当地为您的数据建模。可能很容易存储在一个大型集合和索引中，但这并不总是最好的方法。

# c - NEON 内在函数的常量超出范围

> ID：15314770
> 
> 赞同：6
> 
> 时间：2013-03-09T19:11:54.420
> 
> 标签：c, compiler-errors, android-ndk, arm, neon

我正在编译以下 ARM NEON 内在测试代码（在带有 Android NDK 的 Eclipse 中）：

```
void foo(uint64_t* Res)
{
    uint64_t x = 0xff12aa8902acf78dULL;
    uint64x1_t a,b;

    a = vld1_u64 (&x);
    b = vext_u64 (a, a, 3);
    vst1_u64 (Res,b);
} 
```

但我不断收到以下编译器错误：

```
/home/developer/adt/ndk/ndk-build all 
Install        : libneon_test.so => libs/armeabi/libneon_test.so
Compile thumb  : neon_test <= neon.c
jni/neon.c: In function 'foo':
jni/neon.c:17:1: error: constant out of range
make: *** [obj/local/armeabi-v7a/objs/neon_test/neon.o] Error 1` 
```

第 17 行`}`是`foo()`.

有谁知道这个奇怪错误的原因可能是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T00:29:41.717

问题出在这一行

```
b = vext_u64 (a, a, 3); 
```

你不能有`3`as shift for `vext_u64`，[这是不允许](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0491c/BABGIABH.html)的。

```
uint64x1_t vext_u64(uint64x1_t a, uint64x1_t b, __constrange(0,0) int c);  // VEXT.64 d0,d0,d0,#0 
```

看起来`gcc`'neon 内在函数的[实现（定义？）](http://gcc.gnu.org/onlinedocs/gcc/ARM-NEON-Intrinsics.html)在这方面不如`armcc`'。

理解这种行为的一个技巧是`-S`将`gcc`代码转换为程序集，然后尝试编译该程序集文件。这样 gcc 会准确地告诉你是哪一行出现了问题。

```
$ ~/bin/android-ndk-r8d/toolchains/arm-linux-androideabi-4.7/prebuilt/linux-x86/bin/arm-linux-androideabi-gcc --sysroot=/home/auselen/bin/android-ndk-r8d/platforms/android-14/arch-arm -std=c99 -S neon.c -mfloat-abi=softfp -mfpu=neon -O2
neon.c: In function 'foo':
neon.c:11:1: error: constant out of range
$ ~/bin/android-ndk-r8d/toolchains/arm-linux-androideabi-4.7/prebuilt/linux-x86/bin/arm-linux-androideabi-gcc --sysroot=/home/auselen/bin/android-ndk-r8d/platforms/android-14/arch-arm -std=c99 -c neon.s -mfloat-abi=softfp -mfpu=neon -O2
neon.s: Assembler messages:
neon.s:28: Error: shift out of range -- `vext.64 d16,d16,d16,#3' 
```

# javascript - 我在这里做错了什么 - setTimeout on document load

> ID：15314771
> 
> 赞同：-1
> 
> 时间：2013-03-09T19:11:58.383
> 
> 标签：javascript, facebook, function, document-ready

正在使用应用程序，需要在 10 秒后执行 postCook 函数，但出现问题。刚刚使用 Javascript / jQuery 工作了几天，所以仍然没有 flooowing :)

但是现在已经坚持了几个小时所以即使它让我心碎我也需要征求意见

```
$(document).ready(function() { setTimeout("postCook", 10000);
};

  function postCook()
  {
  FB.api(
  '/me/app:action',
  'post',
  { game: '<?php echo get_permalink(); ?>' },

function(response) {
if (!response || response.error) {
alert('Error occurred');
} else {
alert('Successful! Action ID: ' + response.id);
}
    });
         } 
```

可以毫无问题地使用按钮执行它，因此 100% 确保它在 setTimeout 内

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T19:12:57.117

删除引号。`setTimeout(postCook,5000)`. 永远不要将字符串传递给`setTimeout`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T19:15:05.617

您的代码的问题是您从不调用该函数。字符串中的代码只是获取对函数的引用，而对它不做任何事情。这会起作用：

```
setTimeout("postCook()", 10000); 
```

但是，由于您有一个函数的引用，您应该直接使用它：

```
setTimeout(postCook, 10000); 
```

# python - python，正则表达式：我需要什么正则表达式？

> ID：15314772
> 
> 赞同：-1
> 
> 时间：2013-03-09T19:11:59.190
> 
> 标签：python, regex

我有一个大文件，我需要使用 RE 进行搜索

这是该文件的示例：

```
76360247039795},{"number":522141635,"catalog" 
```

我只需要打印出 {"number": 之后出现的数字流

该文件太大，无法全部发布，并且该字符串出现了大约 200 次。这就是为什么我认为我需要使用 RE 并且从我的研究中我认为我需要使用的是一种称为“环顾四周”的东西，但不确定。

我已经尝试这个很久了，请帮忙

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T19:20:12.567

```
import re

with open('myLargeFile.txt', 'r') as myFile:
    numbersList = re.findall('{"number":(\d{9})', myFile.read(), re.DOTALL)
print numbersList 
```

这将创建一个仅包含出现在字符串后面的 9 位数字的列表`{"number":`

如果您要查找的数字可能多于或少于 9 位，请改用此 reg ex：

```
numbersList = re.findall('{"number":(\d{x,y})', myFile.read(), re.DOTALL) 
```

, 并替换 x 和 y 以满足您的需要。x 代表数字允许的最低位数，y 代表最高位数。例如，如果您想查找所有 5 到 9 位数字之间的数字，则 reg ex 将变为：

```
numbersList = re.findall('{"number":(\d{5,9})', myFile.read(), re.DOTALL) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T19:22:51.663

```
import re
s = '76360247039795},{"number":522141635,"catalog"'
nl = re.findall('"number":(\d{9})', s) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T19:26:30.793

对于您的 JSON 数据，请执行以下操作：

```
import json
with open("filename.json") as f:
    data = json.loads(f.read()) 
```

现在假设您的文件是字典列表，如下所示：

```
[
    {"number": 522141635, "catalog": "..."},
    ....
    {"number": 999999999, "catalog": "..."}
] 
```

将您的号码打印为：

```
for dictionary in data:
    print dictionary["number"] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T19:16:31.217

试试这个，使用 python`re`模块，定义一个模式并在一个字符串中找到你的模式`s`。

```
>>> s='76360247039795},{"number":522141635,"catalog"'
>>> import re
>>> re.findall('number":([0-9]+)', s) #this pattern 
['522141635']
>>> re.findall('number":([0-9]{9})', s) #or this pattern works.
['522141635'] 
```

> (...) 匹配括号内的任何正则表达式，并且可以在执行匹配后检索组的内容

# rally - 在 Rally SDK 2 中，如何更新哈希字段？

> ID：15314774
> 
> 赞同：2
> 
> 时间：2013-03-09T19:12:10.577
> 
> 标签：rally

在 Rally SDK 2 中，如何更新哈希字段，例如变更集的作者字段？我阅读了如何更新 Message 字段，但我不知道如何更新 Author["DisplayName"] 哈希。

```
var new_message = settings.message;
Rally.data.ModelFactory.getModel({
  type: 'Changeset',
  success: function(model) {
         model.load( '1234', {
              fetch: [ 'Artifacts' ],
              callback: function(result, operation) {
                        if ( operation.wasSuccessful() ){
                            var message = new_message;
                            record.set( 'Message', message);
                            record.save( {
                                callback: function( resultset, operation ) {
                                    console.log( "After saving:", resultset );
                                    if ( operation.wasSuccessful() ) {
                                        var that = tree.ownerCt.ownerCt.ownerCt.ownerCt;
                                        that._getChangesets();
                                    }
                                }
                            } ); 
                        }
               }
         })
  } 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T16:44:02.410

Changeset 上的 Author 属性是 User 类型。与 Rally 的 WSAPI 上的任何其他对象关联一样，您只需将此属性设置为您要链接的对象的引用。您的设置方式与当前在上述代码段中设置 Message 的方式相同。（假设作者在变更集创建后是可写的）。

```
record.set('Author', '/user/123456'); 
```

您还可以通过在回调中指定范围并在应用程序定义中使用成员函数来避免代码的深度嵌套结构：

```
_loadChangesetModel: function() {
    //If you already have a changeset record you can get the model
    //via record.self.  Otherwise, load it fresh.
    Rally.data.ModelFactory.getModel({
        type: 'Changeset',
        success: this._onChangesetModelLoaded,
        scope: this
    });
},

_onChangesetModelLoaded: function(model) {
    model.load( '1234', {
        fetch: [ 'Artifacts' ],
        callback: this._onChangesetLoaded,
        scope: this
    });
},

_onChangesetLoaded: function(record, operation) {
    if ( operation.wasSuccessful() ){
        var message = settings.message;
        record.set( 'Message', message);
        record.save( {
            callback: this._onChangesetSaved,
            scope: this
        } ); 
    }
},

_onChangesetSaved: function( resultset, operation ) {
    console.log( "After saving:", resultset );
    if ( operation.wasSuccessful() ) {
        //You shouldn't need to do this now that the scope is correct.
        //I'm guessing 'that' was referring to the app itself?
        //var that = tree.ownerCt.ownerCt.ownerCt.ownerCt;
        this._getChangesets();
    }
},

_getChangesets: function() {
    //refresh
} 
```

# mysql - MySql 条件视图

> ID：15314776
> 
> 赞同：1
> 
> 时间：2013-03-09T19:12:34.547
> 
> 标签：mysql, view, multiple-tables

我想创建一个 MySql 视图，该视图仅在另一个值存在且在其他几个表中不为空时才包含一个值。我可以想象一个很长的复杂查询使用'NOT IN'或JOINS，但我想获得一些关于最佳方式的反馈。想象一下这样的事情：我有几个这样的表：

```
T1   T2   T3
id   id   id
data1   data2   data3 
```

等等。也许有 8 张这样的桌子。id 是所有表共有的键。然后我想要一个仅显示 id 列的视图，当且仅当 id 存在于上述所有表中，并且该表中的数据值在具有该 id 的行中不为空。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T19:14:46.287

您可以使用`inner join`s 仅显示所有表中的记录

```
select t1.id
from t1
inner join t2 on t1.id = t2.id
inner join t3 on t1.id = t3.id
where data1 is not null 
and data2 is not null 
and data3 is not null 
```

# c++ - C ++ 11类型的（有符号+无符号）？

> ID：15314778
> 
> 赞同：3
> 
> 时间：2013-03-09T19:12:41.373
> 
> 标签：c++, c++11, language-lawyer

```
#include <iostream>
#include <typeinfo>

using namespace std;

int main()
{
    int s = 2;
    unsigned int u = 3;

    auto k = s + u;

    if (typeid(k) == typeid(s))
        cout << "signed" << endl;
    else if (typeid(k) == typeid(u))
        cout << "unsigned" << endl;
    else
        cout << "error" << endl;
} 
```

GCC 的这个程序的输出是：

```
unsigned 
```

我很确定这是未定义或实现定义的行为 - 但我似乎无法将这些点与标准联系起来。

你能告诉我它在标准中的哪个地方这么说吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-09T19:18:46.843

您所看到的只是[通常算术转换](http://channel9.msdn.com/Series/C9-Lectures-Stephan-T-Lavavej-Core-C-/Stephan-T-Lavavej-Core-C-7-of-n)的效果。

该标准规定如下：

`§5 [expr] p7`：

> 许多期望算术或枚举类型的操作数的二元运算符会以类似的方式导致转换和产生结果类型。目的是产生一个通用类型，这也是结果的类型。这种模式称为通常的算术转换，其定义如下：
> 
> *   [...]
> *   否则，应在两个操作数上执行积分提升 (4.5)。然后将以下规则应用于提升的操作数：
>     *   [...]
>     *   否则，两个操作数都应转换为与带符号整数类型的操作数类型对应的无符号整数类型。

# jquery - TinyMCE 的图片上传器

> ID：15314779
> 
> 赞同：0
> 
> 时间：2013-03-09T19:12:44.273
> 
> 标签：jquery, image, upload, tinymce

我在我的网页中使用 TinyMCE。现在我应该将本地系统中的图像保存到编辑器中。我为此搜索了插件，所有可用的插件都只在 PHP 中。我不知道 PHP，我被这个问题困住了。如果有人可以向我发布一个 jquery 或 javascript 插件来执行此操作，那将是非常有帮助的。

我正在使用 Java EE、tomcat 服务器，但不知道如何在其中运行 PHP。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T21:31:25.040

我不知道即用型插件，但这里是[如何实现自定义文件浏览器的链接](http://www.tinymce.com/wiki.php/How-to_implement_a_custom_file_browser)

您可以用任何语言编写自己的服务器端逻辑

# php - 使用 PHP 从其他站点获取特定的 html 内容

> ID：15314781
> 
> 赞同：-1
> 
> 时间：2013-03-09T19:12:51.967
> 
> 标签：php, dom, file-get-contents

我想尝试获取我在 IcheckMovies 网站上查看的最新电影并将其显示在我的网站上。我不知道如何，我已经阅读了关于 php_get_contents() 的内容，然后获取了一个元素，但我想要的特定元素在 DOM 结构中相当深入。它在一个 div 中的一个 div 中的一个列表中的一个 ...

所以，这是我想从中获取内容的链接：http: [//www.icheckmovies.com/profiles/robinwatchesmovies](http://www.icheckmovies.com/profiles/robinwatchesmovies)，我想获取列表中电影的第一个标题。

提前非常感谢！

编辑：

所以使用 file_get_contents() 方法

```
<?php
$html = file_get_contents('http://www.icheckmovies.com/profiles/robinwatchesmovies/');
echo $html;
?> 
```

我得到了这个 html 输出。现在，我只需要获取'Smashed'，以便在列表中的 div 中的 div 中的 h3 中的 href 链接的内容。这是我不知道如何获得它的地方。

```
...
<div class="span-7">
<h2>Checks</h2>
<ol class="itemList">
<li class="listItem listItemSmall listItemMovie movie">
<div class="listImage listImageCover">
<a class="dvdCoverSmall" title="View detailed information on Smashed (2012)" href="/movies/smashed/"></a>
<div class="coverImage" style="background: url(/var/covers/small/10/1097928.jpg);"></div>
</div>
<h3>
<a title="View detailed information on Smashed (2012)" href="/movies/smashed/">Smashed</a>
</h3>
<span class="info">6 days ago</span>
</li>
<li class="listItem listItemSmall listItemMovie movie">
<li class="listItem listItemSmall listItemMovie movie">
</ol>
<span>
</div>
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T19:25:21.333

您所要求的称为*网络抓取*，几个月前我已经这样做了，过程是这样的，

*   到`HttpRequest`您需要内容的站点，检查[它的 php 类](http://www.php.net/manual/en/class.httprequest.php)

*   使用 DOM 解析库来处理下载的页面（它会在 html 中），[简单的 HTLM DOM](http://simplehtmldom.sourceforge.net/)将是一个不错的选择

*   提取您需要的信息

**这里有一些教程给你，**

*   [使用简单的 HTML DOM 库进行 HTML 解析和屏幕抓取](http://net.tutsplus.com/tutorials/php/html-parsing-and-screen-scraping-with-the-simple-html-dom-library/)

*   [用php开始网页抓取](http://www.instructables.com/id/Beginning-web-page-scraping-with-php/)

**所以帖子：**

*   [PHP 中的 HTML 抓取](https://stackoverflow.com/questions/34120/html-scraping-in-php)

最好的谷歌是你的朋友只需搜索*“PHP 抓取”*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T19:25:34.537

按照步骤实现这一目标

步骤1：-

首先使用 php 文件中的 file_get_contents 获取内容

例如：getcontent.php

```
<?php

echo file_get_contents("http://www.icheckmovies.com/movies/checked/?user=robinwatchesmovies ");

?> 
```

第2步：-

使用 ajax 调用调用上述脚本并将内容添加到 html 中的可见性隐藏字段。

前任：

```
$('#hidden_div').html(response); 
```

html:-

```
<html>
<body>
<div id='hidden_div' style='visibility:hidden'>
</div>
</body>
</html> 
```

第三步：-

现在提取 id 你想要什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T19:16:26.987

有一些图书馆可以帮助你！很久以前，我用于相同目的的一个是：[http ://simplehtmldom.sourceforge.net/](http://simplehtmldom.sourceforge.net/)

我希望它对你有帮助！

# python - 列表中的字符串切片python

> ID：15314786
> 
> 赞同：-1
> 
> 时间：2013-03-09T19:13:12.323
> 
> 标签：python, string, list, slice

也许这是重复的，但我没有找到答案。
我如何设法在每个逗号之后分割一个长字符串，它变成这样的列表
：

```
st=  input("Enter string:").slice(',') 
```

我输入一个像“Jezus, Santa Maria, Program , Hangover”这样的字符串，
我想把它切片`['Jezus','Santa Maria','Program','Hangover']`
，然后`st[1]`用作 Santa Maria，但是当我尝试打印`st[1]`它时，它只出现'e'，
我希望它出现在 Santa Maria。有什么帮助吗？使用 python 3.3 Windows

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T19:14:54.637

使用`split`：

```
>>> "Jezus, Santa Maria, Program , Hangover".split(', ')
['Jezus', 'Santa Maria', 'Program ', 'Hangover'] 
```

请注意，您的单词不仅用逗号分隔，还用带空格的逗号分隔。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T19:19:14.490

在 Python 中， slice 不是[str](http://docs.python.org/2/library/stdtypes.html#string-methods)对象的方法。您应该使用[str.split](http://docs.python.org/2/library/stdtypes.html#str.split)。在旁注中，请不要将变量命名为内置或标准库。

```
string=  input("Enter string:").slice(',') 
```

改成

```
st=  input("Enter string:").split(',') 
```

演示

```
>>> st=  input("Enter string:").split(',')
Enter string:"Jezus, Santa Maria, Program , Hangover"
>>> st[1]
' Santa Maria' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T19:19:44.003

您发布的代码与`string`. 您实际上需要`string`使用该`split`方法从 生成一个新对象，该对象是一个子字符串列表。

我的方法是：

```
substrings = [s.strip() for s in yourstring.split(',')] 
```

这将用逗号分隔字符串，并将 STRIPPED 子字符串添加到列表中（从而删除任何空格）。

然后你可以这样做：

```
> substrings[0]
>> 'Jezus' 
```

# django - Django 错误：vertualenv EnvironmentError：找不到 mysql_config

> ID：15314791
> 
> 赞同：11
> 
> 时间：2013-03-09T19:14:18.833
> 
> 标签：django

当我尝试在运行 10.8 的 MAC 上的 virtualenv 中安装 MySQL-python 时出现以下错误。

```
vertualenv EnvironmentError: mysql_config not found 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-09T19:14:18.833

这是一个简单的修复，只需从 virtualenv 目录编辑 /bin/activate 文件并添加以下行，

```
_OLD_VIRTUAL_PATH="$PATH"
PATH="$VIRTUAL_ENV/bin:$PATH"
PATH="$PATH:/usr/local/mysql/bin/"
export PATH 
```

就是这样，只要确保你的路径与你自己的配置相匹配。现在 MySQL-python 正常安装在 virtualenv 下。

链接： http: [//glynjackson.org/weblog/entry/fix-vertualenv-environmenterror-mysql_config-not-found.html](http://glynjackson.org/weblog/entry/fix-vertualenv-environmenterror-mysql_config-not-found.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-10T09:55:30.383

它也可以帮助你，特别是如果你使用 MacOS X

```
pip install MySQL-python (error)

echo "mysql_config = /usr/local/mysql/bin/mysql_config" >> ~/.virtualenvs/ENV_NAME/build/MySQL-python/site.cfg

pip install MySQL-python (it's ok) 
```

# php - 用户友好的 URL Ajax 帖子

> ID：15314793
> 
> 赞同：0
> 
> 时间：2013-03-09T19:14:31.423
> 
> 标签：php, ajax, url, jquery

**问题解决了**

我正在使用下面描述的友好 url 和代码。我想用ajax post请求php文件。有人知道该怎么做吗？

例如：我有以下代码：

```
$(document).ready(function(){
    $.ajax({
        type: "POST",
        url: "ajax/test.php",
        data: "data=test",
        success:function(data){
            alert(data);
        },
    });
}); 
```

当程序将数据发布到 test.php 文件时，我还想从该文件返回数据。

网址：[http ://mysite.com/admin/admin.php?m=users&a=edit&id=12](http://mysite.com/admin/admin.php?m=users&a=edit&id=12)

用户友好的网址： http: [//mysite.com/admin/users/edit/12](http://mysite.com/admin/users/edit/12)

**问题解决了**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T21:17:53.847

```
<ifModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /directory_path/

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d

    RewriteRule ^(.*)$ index.php/$1
</ifModule> 
```

那是用户友好 url 的 .htaccess 文件。

感谢帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T19:32:02.413

我很困惑你在问什么。我假设您只想从 test.php 返回一些数据。如果是这样，那么假设您的 $data 变量包含所有数据，您可以这样做

```
echo json_encode($data); 
```

这应该会提醒您备份代码中的数据

# android - Widget Quotes，从 TXT 获取列表报价

> ID：15314799
> 
> 赞同：0
> 
> 时间：2013-03-09T19:14:48.007
> 
> 标签：android, arraylist, widget

每个人。下午好。

这是一个安卓小部件。我正在使用这段代码。我只是想从外部文件中获取 ArrayList 作为 .TXT 而不是从 java 文件中获取引号列表。

这是我的代码：

```
 public class UpdateWidgetService extends Service {
private static final String TAG = UpdateWidgetService.class.getSimpleName();

@Override
public IBinder onBind(Intent arg0) {
    return null;
}

@Override
public void onStart(Intent intent, int startId) {
    super.onStart(intent, startId);

    Log.d(TAG, "onStart started");

    // Create some random data
    Random random = new Random();

    AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(this.getApplicationContext());

    int[] appWidgetIds = intent.getIntArrayExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS);

    if (appWidgetIds.length > 0) {

        for (int widgetId : appWidgetIds) {
            List<String> qList = getListFromTxtFile("quote.txt");
            int nextInt = random.nextInt(qList.size());

            RemoteViews remoteViews = new RemoteViews(getPackageName(), R.layout.widget);
            remoteViews.setTextViewText(R.id.widget_textview, qList.get(nextInt));
            appWidgetManager.updateAppWidget(widgetId, remoteViews);
        }
        stopSelf();
    }
    super.onStart(intent, startId);
}

public List<String> getListFromTxtFile(String txtFileName){

//  File sdcard = Environment.getExternalStorageDirectory();
// Get the text file
// File file = new File(sdcard,txtFileName);

AssetManager am = this.getAssets();

List<String> qList = new ArrayList<String>();

//Read text from file

try {
    InputStream is = am.open("quote.txt");
          //BufferedReader br = new BufferedReader(new FileReader(file));
    BufferedReader br = new BufferedReader(new InputStreamReader(is));
    String line;

     // get data in text file line by line
    while ((line = br.readLine()) != null) {

       qList.add(line);
    }
}
catch (IOException e) {
    //You'll need to add proper error handling here
}
return qList;

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T19:31:22.670

使用此方法从 Assets 中读取文本文件并返回列表

```
public List<String> getListFromTxtFile(String txtFileName){

//  File sdcard = Environment.getExternalStorageDirectory();
// Get the text file
// File file = new File(sdcard,txtFileName);

AssetManager am = this.getAssets();

List<String> qList = new ArrayList<String>();

//Read text from file

try {
    InputStream is = am.open(txtFileName);
          //BufferedReader br = new BufferedReader(new FileReader(file));
    BufferedReader br = new BufferedReader(new InputStreamReader(is));
    String line;

     // get data in text file line by line
    while ((line = br.readLine()) != null) {

       qList.add(line);
    }
}
catch (IOException e) {
    //You'll need to add proper error handling here
}
return qList; 
```

}

# jquery - JQuery自动完成提交更改

> ID：15314803
> 
> 赞同：0
> 
> 时间：2013-03-09T19:14:55.730
> 
> 标签：jquery

当您从下拉列表中选择一个值时，我想进行以下自动完成以提交 ONCHANGE。一旦我选择了一个值来提交它，我总是必须按 Enter 键，我希望它在您选择一个值后自动提交。

```
<script>
    jQuery(document).ready(function($){
        $('#farmname').autocomplete({source:'autocompletefarmname.php', minLength:1});
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T19:19:34.687

我假设您正在使用 jQueryUI 自动完成功能。在这种情况下，请[在此处](http://api.jqueryui.com/autocomplete/)查找您可以使用的选项列表。

您需要的是`change`或`select`：

```
$('#farmname').autocomplete({
         source:'autocompletefarmname.php',
         minLength:1,
         change: function(){
            //submit the result
         }   
       }); 
```

# c# - DELETE语句与sql中的REFERENCE约束冲突？

> ID：15314804
> 
> 赞同：0
> 
> 时间：2013-03-09T19:15:03.660
> 
> 标签：c#, sql

我正在使用 EF 代码优先模型。我有 3 张桌子`Teacher`和. 每个教师和学生可以有多个地址，因此 和 之间的关联是1*到 many*。`Student``Address``Teacher_Address``Student_Address`

 *为此，我写道：

```
public class Teacher 
{
 public int Id;

 public virtual List<Address> Addresses { get; set; }
}

public class Student 
{
 public int Id;

 public virtual List<Address> Addresses { get; set; }
}

public class Address
{
 public int Id;

 public int? TeacherId { get; set; }
 public virtual Teacher Teacher { get; set; }

 public int? StudentId { get; set; }
 public virtual Student Student { get; set; }
} 
```

流利的API：

```
 //Creating 1 to * relationships b\w Teacher and Address
        modelBuilder.Entity<Address>().HasOptional(p => p.Teacher)
                                      .WithMany(p => p.Addresses)
                                      .HasForeignKey(p => p.TeacherId)
                                      .WillCascadeOnDelete();

        //creating 1 to * replationship b\w Student and Address
        modelBuilder.Entity<Address>().HasOptional(p => p.Student)
                                      .WithMany(p => p.Addresses)
                                      .HasForeignKey(p => p.StudentId)
                                      .WillCascadeOnDelete(); 
```

我可以毫无问题地插入数据，`Teacher`但是`Student`当我尝试删除任何一行时，`Teacher`它`Student`会显示以下异常：

> *DELETE 语句与 REFERENCE 约束“FK_dbo.Address_dbo.Teacher_TeacherId”冲突。冲突发生在数据库“CodeFirst.TestContext”、表“dbo.Address”、列“TeacherId”中。*

谁能告诉我如何解决这个问题以及我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T19:23:33.080

好像关系倒退了。老师和学生不应该引用地址吗？我认为如果您删除地址条目（这不是我认为您想要的），级联将正常工作。尝试将地址 ID 添加到其他实体，看看删除是否有效。

像这样的东西：

```
public class Teacher 
{
 public int Id;

 public virtual List<Address> Addresses { get; set; }
}

public class Student 
{
 public int Id;

 public virtual List<Address> Addresses { get; set; }
}

public class Address
{
 public int Id;

} 
```

流畅的api：

```
modelBuilder.Entity<Teacher>().HasMany(p => p.Addresses)
                                  .WillCascadeOnDelete(); 
```*

# windows - 结合基于控制台和基于窗口的应用程序

> ID：15314814
> 
> 赞同：0
> 
> 时间：2013-03-09T19:15:58.483
> 
> 标签：windows, winapi, console-application, iostream, cout

尽管我在我的应用程序中使用 DirectX 和一个常用功能，但如果应用程序是使用特定参数启动的`WinMain`，我想创建到控制台的输出（使用常用功能）。`std::cout`让我们保持简单：如果用户使用参数调用应用程序，则应该显示`--help`一些帮助（使用）；`boost::program_options`否则，一切都应该通过创建一个窗口等来正常工作。

即使在我的 Windows 应用程序中，如何将输出写入控制台（如果应用程序是通过控制台调用的）？

* * *

*背景信息：*一般的想法是，在运行我的游戏引擎之前，我将能够运行一些工具（外部工具或包含在引擎中）并获得它们的输出。

* * *

**目前的做法。**我现在有两个独立的应用程序，一个启动器和引擎，但是如果可能的话，我希望将它们合并。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T16:10:40.077

如果您只需要为您的 WinMain GUI 应用程序创建一个控制台窗口，那么您需要调用[AllocConsole](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681944%28v=vs.85%29.aspx)函数。每个进程仅限一个。

C中的示例...

```
#include <stdio.h>

WinMain( ... ) {

    // parse the command line and check if --help is given

    AllocConsole(); // allocates console window for your process

    freopen("CON", "w", stdout); // redirects output to console

    printf( ... ); // test output to the console window

    FreeConsole(); // detaches your process from the console window

    // continue here

} 
```

* * *

如果您需要使用类似GUI 应用程序中的功能来显示某些内容，这只会按需*创建一个控制台窗口。*`printf`它不会使您的应用程序同时具有控制台和 GUI 子系统。为此，您需要两个 .exe，因此您当前的方法是正确的。

# http - 在 URL 中发布 base64 数据

> ID：15314815
> 
> 赞同：1
> 
> 时间：2013-03-09T19:16:01.143
> 
> 标签：http, post, base64

我的开发人员正在尝试将图像发布到他的网络服务，如下所示：

```
http://consec.dev.domain.com/Services/ActivityService.svc/SubmitImage?userId=8D428BF6-51F0-43F6-947D-7E19A6A7F4BD&fileName=feels-bad.png&fileContent=iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg== 
```

这是一个 base64 编码的图像（这个恰好是一个红点，但我们将使用的图像要大得多）

当他尝试发布它时，他得到：

```
HTTP Error 414\. The request URL is too long. 
```

他告诉我这是因为我的 IIS 配置错误。我告诉他它的代码。有人可以对此有所了解或指出我们开始寻找答案的方向吗？谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T19:18:26.577

不要`POST`URL 中的数据，利用帖子正文并在那里提交。这是获得大量提交数据的唯一方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T19:20:28.123

查询字符串有限制，请参阅查询字符串[的最大可能长度是多少？](https://stackoverflow.com/questions/812925/what-is-the-maximum-possible-length-of-a-query-string)

您应该在请求正文中通过发布数据传递文件内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T19:23:45.793

首先它是一个 get 而不是一个 post http 请求。其次，错误是网络服务器返回的。但这是糟糕的设计吗？它实际上是否应该是一个表单按钮，它使用 post 而不是构造的可点击获取 url 提交字段

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T19:20:51.660

他的代码是错误的。这就是 HTTP 支持`POST`请求的原因。

请注意，通过`POST`请求，您仍然可以将数据放入 URL。要做到正确`POST`，您将创建一个 URL 来定义发布位置，并将您想要的数据放入`POST`请求的正文中。

GET 示例：

```
GET /some/place.php?var1=value 
```

POST 示例：

```
POST /some/place.php

var1=value 
```

但是，这样做是有效的：

```
POST /some/place.php?var1=value

var2=value2 
```

（为了清楚起见，这些示例被剪断，您还必须在 a 中发送一些标题`POST`）

# jquery - 在 Pinterest 上分享：避免使用 Google 地图？

> ID：15314825
> 
> 赞同：2
> 
> 时间：2013-03-09T19:17:24.987
> 
> 标签：jquery, api, google-maps, social-networking, pinterest

[图片链接](http://i.stack.imgur.com/gW4sn.jpg)

* * *

您好，我需要 Pinterest API 的帮助。当我尝试分享我的页面照片时，我的页面结果出现在 Google 地图的图像中。有没有办法隐藏这些图像？我听说 Pinterest 周围所有带有标签 nopin = "nopin" 的图像都没有共享。如何将此属性应用于渲染地图的所有图像？ [顶部的蓝色条](http://pineto.contat.eu/listings/zona-residenziale-c34-bilocale-con-posto-auto/)

我已经尝试过：

```
google.maps.event.addListener(map, 'tilesloaded', function() {
    $('#map_canvas').find('img').attr('nopin','nopin');
}); 
```

但我知道把它放在哪里，如果我在代码（外部 js 表单映射）之前插入它，它会阻止其他功能，如果我在它不起作用之后插入它！

# variables - 具有多个变量的 URL 的 Mod_Rewrite

> ID：15314832
> 
> 赞同：2
> 
> 时间：2013-03-09T19:18:05.063
> 
> 标签：variables, mod-rewrite, mask

我的 .htaccess 中有以下代码

RewriteRule ^([a-zA-Z0-9_-]+)/?$ index.php?mode=$1&%{QUERY_STRING})

它适用于一个变量，但我想传递一些额外的变量，并希望它们像第一个变量一样。因此，我没有 /about/?anotherVar=extra，而是拥有 /about/extra。附加变量将在某些页面上，而不是全部

我现在有：

```
#<IfModule mod_rewrite.c>

#   RewriteEngine on
#    RewriteCond %{REQUEST_FILENAME} !-f
#    RewriteCond %{REQUEST_FILENAME} !-d

#</IfModule>

Options +FollowSymLinks
RewriteEngine on
RewriteRule ^([a-zA-Z0-9_-]+)/?$ index.php?mode=$1 [QSA]
RewriteRule ^([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/?$ index.php?mode=$1&productContent=$2 [QSA] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T19:36:08.650

```
RewriteRule ^([a-zA-Z0-9_-]+)/?$ index.php?mode=$1 [QSA]
RewriteRule ^([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/?$ index.php?mode=$1&anotherVar=$2 [QSA] 
```

PS QSA 取代了`&%{QUERY_STRING}`

# php - PHP在多维数组中搜索祖父母的值和返回键

> ID：15314835
> 
> 赞同：-2
> 
> 时间：2013-03-09T19:18:34.660
> 
> 标签：php

我想编写一个函数，它将在多维数组中搜索一个值并返回祖父母的键。请参阅下面的数组层次结构。

```
Array
(
[results] => Array
    (
        [quote] => Array
            (
                [0] => Array
                    (
                        [@attributes] => Array
                            (
                                [symbol] => VFORX
                            )
                        [LastTradePriceOnly] => 24.79
                    )
                [1] => Array
                    (
                        [@attributes] => Array
                            (
                                [symbol] => VGSTX
                            )
                        [LastTradePriceOnly] => 21.77
                    )
                [2] => Array
                    (
                        [@attributes] => Array
                            (
                                [symbol] => HPQ
                            )
                        [LastTradePriceOnly] => 21.00
                    )
            )
    )
) 
```

例如，我想在 'symbol' 键中搜索值 'HPQ' 并返回 LastTradePriceOnly 值 21.00 或祖父母的键是 [2]。

在此先感谢您在帮助我入门时提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T19:39:30.093

Hast 的答案是解决方案，但要补充的是，您也可以使用 foreach 语句中的数组键来获取“祖父母”。干杯。

```
<?php

$array = array(); // this is your array
$value = 'HPQ';
$result = null;
$grandparent = null;

foreach($array['results']['quote'] as $quote_index => $quote) {
    if ($quote['@attributes']['symbol'] == $value) {
        $result = $quote['LastTradePriceOnly'];
        $grandparent = $quote_index;
    }
} 
```

# php - 防止 CSRF 漏洞，CSRF 令牌的替代方法

> ID：15314837
> 
> 赞同：5
> 
> 时间：2013-03-09T19:18:41.337
> 
> 标签：php, csrf

防止 CSRF 的一种常见方法是使用隐藏在表单中的令牌。只是出于好奇，这是实际防止 CSRF 的唯一方法吗？人们争论不需要 CSRF 令牌让我发疯，我需要了解原因。我还能如何防止 CSRF 攻击？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-10-15T16:36:42.023

实际上，使用 CSRF 令牌只是另一层防御。根据[OWASP Cross-Site Request Forgery (CSRF) Prevention Cheat Sheet](https://www.owasp.org/index.php/Cross-Site_Request_Forgery_(CSRF)_Prevention_Cheat_Sheet)，验证请求来源也可用于 CSRF 保护。为了验证我们可以使用的来源，

1.  源头
    *   [Origin 头](https://tools.ietf.org/id/draft-abarth-origin-03.html)包含发起请求的方案、主机和端口的信息。
2.  参考标头
    *   [Referer 标头](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Referer)包含上一个网页的地址，从该地址指向当前请求网页的链接。

但是，使用这种方法存在一些限制，例如标头的不可用性和完整性。攻击者可以通过多种方式更改这些标头的值。因此，建议始终拥有多层防御。

# c++ - WINAPI - 窗口显示在调试版本中，但不在发布版本中

> ID：15314841
> 
> 赞同：0
> 
> 时间：2013-03-09T19:19:11.243
> 
> 标签：c++, winapi, window, show

在尝试开发自己的游戏引擎时，我最终遇到了在处理 WINAPI 时无法解决的问题：*我的游戏窗口显示在 debug build 中，但不在 release build*中。在我关闭命令行后，该过程本身也会一直挂起。

这很奇怪，因为代码没有任何变化。代码保持不变，调试和发布版本具有默认设置（不包括库链接）。

如果时间不长，我会发布一些代码。我使用 pimpl-idiom 使我的类界面更加干净和跨平台。我不知道这是否与此有关。我唯一的猜测是优化可能会导致一些问题，但我对此表示怀疑。这个问题怎么解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T20:20:05.177

通过使用程序方法为 Windows 端口创建特定实现来解决问题。

# ruby-on-rails - SublimeREPL 和 rails 控制台

> ID：15314850
> 
> 赞同：3
> 
> 时间：2013-03-09T19:19:43.097
> 
> 标签：ruby-on-rails, sublimetext2, sublimerepl

有什么方法可以通过[SublimeREPL](https://github.com/wuub/SublimeREPL "崇高的REPL")（或其他插件）在 Sublime Text 中运行 rails 控制台？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-22T00:28:05.727

你可以试试 SublimeREPL 插件。[https://github.com/wuub/SublimeREPL](https://github.com/wuub/SublimeREPL)

# sqlite - SQlite“不存在于”

> ID：15314852
> 
> 赞同：0
> 
> 时间：2013-03-09T19:19:48.040
> 
> 标签：sqlite, select

我有以下问题。我想要一个 Select 语句，在其中比较 2 个 ID 并获取表 1 中而不是表 2 中的 ID。这是我最后一次尝试。

```
SELECT * FROM Categories, Stores WHERE Categories.idCategories NOT IN ( Stores.category ) GROUP BY Categories.idCategories 
```

有可能吗？据此，[我](http://www.sqlite.org/lang_expr.html)应该尝试所有运算符，但我真的不是 SQL 专家，尤其是 SQlite，所以我可能忘记了一些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T19:23:14.947

试试这个：

```
SELECT * 
FROM Categories 
WHERE Categories.idCategories NOT IN ( select category from Stores ) 
GROUP BY Categories.idCategories 
```

# jquery - 在嵌套复选框结构中选中父复选框时如何选中所有复选框？

> ID：15314855
> 
> 赞同：1
> 
> 时间：2013-03-09T19:20:08.337
> 
> 标签：jquery, checkbox

大家好，我有一个复杂的复选框结构，看起来像这样

```
<div class="accordian-group">
    <div>
    <input type="checkbox" class="parentcheckbox" value""/>
        <ul>
         <li> <input type="checkbox" value""/></li>
        <li> <input type="checkbox" value""/></li>
        <li> <input type="checkbox" value""/>
            <ul>
               <li> <input type="checkbox" value""/></li>
               <li> <input type="checkbox" value""/></li>
              <li> <input type="checkbox" value""/>
                    <ul>
                      <li> <input type="checkbox" value""/></li>
                    </u>
                </li>
           </ul>
       </li>
    </div>
     <div>
    <input type="checkbox" class="parentcheckbox" value""/>
        <ul>
         <li> <input type="checkbox" value""/></li>
        <li> <input type="checkbox" value""/></li>
        <li> <input type="checkbox" value""/>
            <ul>
               <li> <input type="checkbox" value""/></li>
               <li> <input type="checkbox" value""/></li>
              <li> <input type="checkbox" value""/>
                    <ul>
                      <li> <input type="checkbox" value""/></li>
                    </u>
                </li>
           </ul>
       </li>
    </div>
</div> 
```

我要做的是检查父复选框时，应选中所有侧面的所有复选框，如果我一一检查所有的子盒子，请检查父复选框的所有内部子盒

如果父类别被选中并且该div的所有子项都被选中，我的页面中有一个添加按钮单击添加按钮引导我完成这个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T19:28:35.867

试试这个：[**现场演示**](http://jsfiddle.net/3uf7D/)

```
// Whenever the parent checkbox is checked/unchecked
$(".parentcheckbox").change(function() {
    // save state of parent
    c = $(this).is(':checked');
    $(this).parent().find("input[type=checkbox]").each(function() {
        // set state of siblings
        $(this).attr('checked', c);
    });
});

// Update parent checkbox based on children
$("input[type=checkbox]:not('.parentcheckbox')").change(function() {
    if ($(this).closest("div").find("input[type=checkbox]:not('.parentcheckbox')").not(':checked').length < 1) {
        $(this).closest("div").find(".parentcheckbox").attr('checked', true);
    } else {
        $(this).closest("div").find(".parentcheckbox").attr('checked', false);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T19:33:04.343

你可以这样做 ：

```
 $('input[type="checkbox"]').change(function(){
  if (!$(this).is(':checked')) return; // do nothing if not checking
  var li = $(this).closest('li');

  // check all children 
  $('li input[type="checkbox"]', li).prop('checked', true);

  // see if all siblings are checked
  var all = true;
  li.siblings().find('>input[type="checkbox"]').each(function(){
    if (!$(this).is(':checked')) all = false;
  });
  if (all) {
    // check parent checkbox
    $(this).closest('ul').closest(':has(>input)')
          .find('input[type="checkbox"]').prop('checked', true);
  }
}); 
```

[示范](http://jsbin.com/ezeroy/3/)

# xcode - 合并 project.pbxproj 与冲突

> ID：15314856
> 
> 赞同：0
> 
> 时间：2013-03-09T19:20:10.213
> 
> 标签：xcode, mercurial, merge

我的项目有三个分支，default、release1和release2。默认是我开发所有功能的地方，release1 和 release2 包括默认的功能以及每个分支需要但另一个不可能拥有的东西。

我在合并我的代码时没有问题，但是当我需要管理 project.pbxproj 中的冲突时，一切都会崩溃。文件格式是不透明的，这意味着我最终不知道发生了什么。最常见的最终结果是 Xcode 拒绝加载项目。

你如何管理这个？project.pbxproj 是否记录在任何地方？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T19:25:55.847

这是一个常见的问题。在对项目文件进行任何更改之前，我会非常努力地确保我们的团队进行协调。当我们发生合并冲突时，如果使用 diff 工具来修复不是很明显，我通常只是选择其中一个项目文件而不是另一个，然后在 Xcode 中打开项目以重做适当的更改。

# configuration - Apache2：预期但看到

> ID：15314870
> 
> 赞同：2
> 
> 时间：2013-03-09T19:22:12.800
> 
> 标签：configuration, apache2, webmin

```
Syntax error on line 14 of /etc/apache2/sites-enabled/mysite.org.conf: Expected </> but saw </VirtualHost>
Action 'start' failed.
The Apache error log may have more information. 
```

和 /etc/apache2/sites-enabled/mysitet.org.conf：

```
<VirtualHost *:80>
ServerName mysite.org
DocumentRoot /var/www/mysite_org

< Directory /var/www/mysite_org >
    Order allow,deny
    Allow from all
< /Directory >

WSGIDaemonProcess mysite_org processes=2 threads=15 display-name=%{GROUP}
WSGIProcessGroup mysite_org

WSGIScriptAlias / /var/www/mysite_org/apache/django.wsgi
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T19:22:12.800

这个错误实际上是由第 5 行和第 8 行引起的。因为标签是用空格打开的，所以配置假定标签是 <>，应该用 . 因为 <Directory> 和 </Directory> 都有空格，所以它假定您打开 <> 两次。

只需删除标签名称前的空格，Apache 应该会毫无问题地重新启动。

```
<Directory /var/www/mysite_org>
    Order allow,deny
    Allow from all
</Directory > 
```

# jquery - Group and count HTML elements by data attribute in jQuery

> ID：15314872
> 
> 赞同：7
> 
> 时间：2013-03-09T19:22:29.947
> 
> 标签：jquery, html, jquery-data

I'm trying to group each instance of a data attribute into a list from the number of occurrences of each attribute in a page, using jQuery. Similar to grouping categories or tags in a news section.

For example, I would like to create something like this:

*   Category 1 (5)
*   Category 2 (3)
*   Category 3 (1)

from this html:

```
<ul class="categories">
   <li data-category="category-1">Category 1</li>
   <li data-category="category-1">Category 1</li>
   <li data-category="category-1">Category 1</li>
   <li data-category="category-1">Category 1</li>
   <li data-category="category-1">Category 1</li>
   <li data-category="category-2">Category 2</li>
   <li data-category="category-2">Category 2</li>
   <li data-category="category-2">Category 2</li>
   <li data-category="category-3">Category 3</li>
</ul> 
```

How can I achieve this in jQuery? Is it even possible?

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-09T19:55:44.190

It is possible, check this [jsFiddle](http://jsfiddle.net/N6wSf/) I've created.

```
var categories = {},
    category;

$('.categories li[data-category]').each(function(i, el){
    category = $(el).data('category');
    if (categories.hasOwnProperty(category)) {
        categories[category] += 1;
    }
    else {
        categories[category] = 1;
    }
});

// print results
for(var key in categories){
    console.log(key + ' (' + categories[key] + ')');
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-09T19:43:16.060

```
$(function() {
    var categories = {};
    $(".categories li").each(function() {
        var category = $(this).data("category");

        if (categories.hasOwnProperty(category) === false) {
            categories[category] = 1;
        } else {
            categories[category]++;
        }
    });

    console.log(categories);
}) 
```

[Example](http://jsfiddle.net/vUk2V/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-09T19:46:44.237

May be dirty, but it's what I came up with:

```
var iterate = 1;
$('ul.categories li').each(function (i, v) {
    var thisCat = $(v).data('category');
    if ($('div#' + thisCat).length > 0) {
        $('div#' + thisCat).text(thisCat + ' (' + ++iterate + ')');
    } else {
        iterate = 1;
        var newDiv = '<div id="' + thisCat + '">' + thisCat + ' (1)</div>';
        $('#result').append(newDiv);
    }
}); 
```

And, [fiddle](http://jsfiddle.net/5pdRE/).

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-09T19:41:42.357

One approach is to use jQuery's [each method](http://api.jquery.com/each/) to load each of the sections into array you define prior. Setup your conditions within the each method, collect the data and do whatever your heart desires with each list.

With this method you can set as many variables within this one each method to check for. For example, if there was another attribute you wanted to check within each li element, you can do that and make more lists.

The console.log below, simply gives you a visual on what is stored within each array you define. Good Luck!

And a quick [jsFiddle](http://jsfiddle.net/TnfTh/) demo.

```
var cat1 = [];
var cat2 = [];
var cat3 = [];

$('li').each(function () {

var attrvalue = $(this).attr('data-category');

if (attrvalue == "category-1") { 
    cat1.push(attrvalue);
}

if (attrvalue == "category-2") { 
    cat2.push(attrvalue); 
}

if (attrvalue == "category-3") { 
    cat3.push(attrvalue);
} 
});

console.log('how many are here? :'+ cat1);
console.log('how many are here? :'+ cat2);
console.log('how many are here? :'+ cat3); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-12T06:03:26.253

If data attribute is on `span` or `div` inside `<tr>` then you have to use `find`. `Find` is more costly in term of DOM search. Is better to just add class on that elements where you have data-attribute and loop through and get information.

```
/*
 * fetch labels from list by data attribute
 * 
 */

function fetch_labels() {

    var leadssource = {},
            lead;

    $('#leads-list tr').each(function(i, el) {

        lead = $(el).find('[data-leadsource]').data('leadsource');
        if (leadssource.hasOwnProperty(lead)) {
            leadssource[lead] += 1;
        }
        else {
            leadssource[lead] = 1;
        }
    });

    return leadssource;
} 
```

# java - Java - 分布式应用程序中的观察者/可观察者？

> ID：15314873
> 
> 赞同：1
> 
> 时间：2013-03-09T19:22:33.830
> 
> 标签：java, sockets, observer-pattern

我想在分布式应用程序中实现观察者模式。即在应用程序的一个实例中数据库发生了一些事情，并且应该通过套接字向另一个实例发送通知，以便第二个实例将从数据库中重新加载数据。我应该使用：

a）来自java的观察者/可观察类

b）基于事件的方法，例如，在按下按钮时添加事件侦听器，然后通过套接字发送通知

c) 任何其他想法/选项

我想知道哪个是最优化的方法

PS 我正在一个连接到 MySQL 数据库的摇摆应用程序中工作。一切都在本地主机上（不用于生产目的）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T08:26:40.460

如果您绑定到 Socket 路由，我建议创建另一个 Java 应用程序来充当服务器和代理来管理连接流量。基本上，让该应用程序创建一个 ServerSocket 并绑定到一个端口。然后，所有现有的 JVM 实例都可以与它建立客户端连接。基本上是一个迷你客户端-服务器架构。当服务器从任何客户端接收到事件通知时，它可以将消息重新广播给其他所有客户端。

# android - 如果这个 linux 命令适用于 android WIFI DIRECT？

> ID：15314877
> 
> 赞同：2
> 
> 时间：2013-03-09T19:23:05.930
> 
> 标签：android, linux, command, android-wifi, wifi-direct

[我在这个链接](http://dishingtech.blogspot.com/2012/01/realtek-wi-fi-direct-programming-guide.html)上找到了关于 linux 中 Wifi 直接命令的资源。

我想知道这些命令是否适用于 android WIFI DIRECT ??? 我需要使用有根设备直接从终端访问 WIFI。

# r - 如何使用 R 客户端连接到 Rserve

> ID：15314880
> 
> 赞同：3
> 
> 时间：2013-03-09T19:23:17.523
> 
> 标签：r, rscript, rserve

我不确定我这样做是否正确。

在选项卡 1 中，我打开 R，然后在 R 会话中执行 Rserve(port = 6311)。我加载变量“name = Hello World”

在选项卡 2 中，我打开 R，然后尝试连接到 Rserve。我这样做：

> c = RSconnect(host = "localhost", 端口 6311)

然后我尝试通过以下方式打印 hello world：

> RSeval（c，名称）

但它不起作用。我得到：

> RSeval（c，名称）中的错误：找不到对象“名称”

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T22:28:19.387

我从 Rserve 的作者那里得到了一些信息。Rserve 中更改的变量将在更改后对连接的 RSclient 可用。特别是我让这些代码正常工作。

```
$ ~/bin/R CMD Rserve --RS-enable-control
$ ~/bin/R 
```

```
library(RSclient);
c=RS.connect();
RS.server.eval(c,"xx<-1");

## [1] TRUE

RS.close(c)

## NULL

c1=RS.connect();
RS.eval(c1,quote(yy<-xx));

## [1] 1

quit() 
```

# java - BFS 实现查找连接组件的时间过长

> ID：15314883
> 
> 赞同：0
> 
> 时间：2013-03-09T19:23:31.997
> 
> 标签：java, performance, graph, breadth-first-search

[这是我在这里](https://stackoverflow.com/questions/15256966/deriving-a-group-or-a-set-from-a-map)提出的问题的延续。
鉴于节点（员工）的总数和邻接列表（员工之间的友谊），我需要找到所有连接的组件
。下面是我的代码——

```
 public class Main {
        static HashMap<String, Set<String>> friendShips;

        public static void main(String[] args) throws IOException {
            BufferedReader  in= new BufferedReader(new InputStreamReader(System.in));

                String dataLine = in.readLine();
                String[] lineParts = dataLine.split(" ");
                int employeeCount = Integer.parseInt(lineParts[0]);
                int friendShipCount = Integer.parseInt(lineParts[1]);
                friendShips = new HashMap<String, Set<String>>();
                for (int i = 0; i < friendShipCount; i++) {
                    String friendShipLine = in.readLine();
                    String[] friendParts = friendShipLine.split(" ");
                    mapFriends(friendParts[0], friendParts[1], friendShips);
                    mapFriends(friendParts[1], friendParts[0], friendShips);
                }
                Set<String> employees = new HashSet<String>();
                for (int i = 1; i <= employeeCount; i++) {
                    employees.add(Integer.toString(i));
                }
                Vector<Set<String>> friendBuckets = bucketizeEmployees(employees);
                System.out.println(friendBuckets.size());
        }

        public static void mapFriends(String friendA, String friendB, Map<String, Set<String>> friendsShipMap) {
            if (friendsShipMap.containsKey(friendA)) {
                friendsShipMap.get(friendA).add(friendB);
            } else {
                Set<String> friends = new HashSet<String>();
                friends.add(friendB);
                friendsShipMap.put(friendA, friends);
            }
        }

        public static Vector<Set<String>> bucketizeEmployees(Set<String> employees) {
            Vector<Set<String>> friendBuckets = new Vector<Set<String>>();
            while (!employees.isEmpty()) {
                String employee = getHeadElement(employees);
                Set<String> connectedEmployeesBucket = getConnectedFriends(employee);
                friendBuckets.add(connectedEmployeesBucket);
                employees.removeAll(connectedEmployeesBucket);
            }
            return friendBuckets;
        }

        private static Set<String> getConnectedFriends(String friend) {
            Set<String> connectedFriends = new HashSet<String>();
            connectedFriends.add(friend);
            Set<String> queuedFriends = new LinkedHashSet<String>();
            if (friendShips.get(friend) != null) {
                queuedFriends.addAll(friendShips.get(friend));
            }
            while (!queuedFriends.isEmpty()) {
                String poppedFriend = getHeadElement(queuedFriends);
                connectedFriends.add(poppedFriend);
                if (friendShips.containsKey(poppedFriend))
                    for (String directFriend : friendShips.get(poppedFriend)) {
                        if (!connectedFriends.contains(directFriend) && !queuedFriends.contains(directFriend)) {
                            queuedFriends.add(directFriend);
                        }
                    }
            }
            return connectedFriends;
        }

        private static String getHeadElement(Set<String> setFriends) {
            Iterator<String> iter = setFriends.iterator();
            String head = iter.next();
            iter.remove();
            return head;
        }
    } 
```

我已经使用以下脚本测试了我的代码，我将其结果作为 sdtIn 使用——

```
#!/bin/bash
echo "100000 100000"
for i in {1..100000}
do
    r1=$(( $RANDOM % 100000 ))
    r2=$(( $RANDOM % 100000 ))
    echo "$r1 $r2"
   done 
```

虽然我能够验证（对于琐碎的输入）我的答案是正确的，但当我尝试使用上述脚本进行大量输入时，我发现运行需要很长时间（~20 秒）。
在我的实施中我可以做得更好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T19:30:13.683

避免使用`Vector`同步的类。取而代之`ArrayList`。如果您找到一种方法来 aovid 字符串并改用 Integer，那将是一个优势。（例如 userId 而不是 userName

# c++ - C++ 解析函数类型模板参数

> ID：15314888
> 
> 赞同：3
> 
> 时间：2013-03-09T19:23:57.520
> 
> 标签：c++, templates, c++11, variadic-templates

我希望能够调用具有*函数*类型（包括参数和返回类型）的模板参数的函数，即`double(int, long)`，并在函数中分离类型并单独使用它们。

例如我希望能够调用一个函数

```
printRes<double(int, long)>(); 
```

上面的这个函数应该解析模板参数并提取返回类型`double`并输出它。

我知道如何使用类和可变参数模板来做到这一点：

```
#include <iostream>
#include <typeinfo>

template <typename T>
class A {};

template <typename Res, typename... Args>
class A<Res (Args...)> { // Parse template argument
public:
    void printRes() {
        std::cout << typeid(Res).name() << std::endl;
    }
}; 
```

然后我可以像这样使用它：

```
int main() {
    A<double(int, long)> a;
    a.printRes();
} 
```

哪个输出：

```
d 
```

我想改用一个简单的函数来做到这一点。这就是我想出的：

```
template <typename Res, typename... Args>
void printRes() {
    std::cout << typeid(Res).name() << std::endl;
} 
```

但是，现在我必须指定这样的模板参数：

```
int main() {
    printRes<double, int, long>();
} 
```

有什么方法可以实现该函数，以便可以使用与类版本（即）相同的模板参数来调用它`double(int, long)`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T19:30:49.673

我猜你快到了。您可以在函数模板中使用您的特征。这是一个可能的实现：

```
#include <iostream>
#include <typeinfo>

template <typename T>
struct A { };

template<typename Res, typename... Args>
struct A<Res (Args...)> 
{
    using type = Res;
};

template<typename T>
void printRes() 
{
    using Res = typename A<T>::type;
    std::cout << typeid(Res).name() << std::endl;
}

int main()
{
    printRes<double(int, long)>();
} 
```

这是一个[活生生的例子](http://liveworkspace.org/code/4sAas7%2453)。

# java - 缩放图像视图android

> ID：15314890
> 
> 赞同：3
> 
> 时间：2013-03-09T19:24:02.257
> 
> 标签：java, android, imageview, zooming

我正在开发一个程序来指导我大学的学生在大楼周围走动。现在唯一的问题是缩放。我尝试使用此代码放大和缩小图像视图并且它正在工作，但唯一的问题是我希望它停止在某个位置缩小或停止在原始图像大小

```
private static final String TAG = "Touch";
    @SuppressWarnings("unused")
    private static final float MIN_ZOOM = 1f,MAX_ZOOM = 1f;

    // These matrices will be used to scale points of the image
    Matrix matrix = new Matrix();
    Matrix savedMatrix = new Matrix();

    // The 3 states (events) which the user is trying to perform
    static final int NONE = 0;
    static final int DRAG = 1;
    static final int ZOOM = 2;
    int mode = NONE;

    // these PointF objects are used to record the point(s) the user is touching
    PointF start = new PointF();
    PointF mid = new PointF();
    float oldDist = 1f;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.ground_layout);
        ImageView view = (ImageView) findViewById(R.id.gf);
        view.setOnTouchListener(this);

    }

    public boolean onTouch(View v, MotionEvent event) 
    {
        ImageView view = (ImageView) v;
        view.setScaleType(ImageView.ScaleType.MATRIX);
        float scale;

        dumpEvent(event);
        // Handle touch events here...

        switch (event.getAction() & MotionEvent.ACTION_MASK) 
        {
            case MotionEvent.ACTION_DOWN:   // first finger down only
                                                savedMatrix.set(matrix);
                                                start.set(event.getX(), event.getY());
                                                Log.d(TAG, "mode=DRAG"); // write to LogCat
                                                mode = DRAG;
                                                break;

            case MotionEvent.ACTION_UP: // first finger lifted

            case MotionEvent.ACTION_POINTER_UP: // second finger lifted

                                                mode = NONE;
                                                Log.d(TAG, "mode=NONE");
                                                break;

            case MotionEvent.ACTION_POINTER_DOWN: // first and second finger down

                                                oldDist = spacing(event);
                                                Log.d(TAG, "oldDist=" + oldDist);
                                                if (oldDist > 5f) {
                                                    savedMatrix.set(matrix);
                                                    midPoint(mid, event);
                                                    mode = ZOOM;
                                                    Log.d(TAG, "mode=ZOOM");
                                                }
                                                break;

            case MotionEvent.ACTION_MOVE:

                                                if (mode == DRAG) 
                                                { 
                                                    matrix.set(savedMatrix);
                                                    matrix.postTranslate(event.getX() - start.x, event.getY() - start.y); // create the transformation in the matrix  of points
                                                } 
                                                else if (mode == ZOOM) 
                                                { 
                                                    // pinch zooming
                                                    float newDist = spacing(event);
                                                    Log.d(TAG, "newDist=" + newDist);
                                                    if (newDist > 5f) 
                                                    {
                                                        matrix.set(savedMatrix);
                                                        scale = newDist / oldDist; // setting the scaling of the
                                                                                    // matrix...if scale > 1 means
                                                                                    // zoom in...if scale < 1 means
                                                                                    // zoom out
                                                        matrix.postScale(scale, scale, mid.x, mid.y);
                                                    }
                                                }
                                                break;
        }

        view.setImageMatrix(matrix); // display the transformation on screen

        return true; // indicate event was handled
    }

    /*
     * --------------------------------------------------------------------------
     * Method: spacing Parameters: MotionEvent Returns: float Description:
     * checks the spacing between the two fingers on touch
     * ----------------------------------------------------
     */

    private float spacing(MotionEvent event) 
    {
        float x = event.getX(0) - event.getX(1);
        float y = event.getY(0) - event.getY(1);
        return FloatMath.sqrt(x * x + y * y);
    }

    /*
     * --------------------------------------------------------------------------
     * Method: midPoint Parameters: PointF object, MotionEvent Returns: void
     * Description: calculates the midpoint between the two fingers
     * ------------------------------------------------------------
     */

    private void midPoint(PointF point, MotionEvent event) 
    {
        float x = event.getX(0) + event.getX(1);
        float y = event.getY(0) + event.getY(1);
        point.set(x / 2, y / 2);
    }

    /** Show an event in the LogCat view, for debugging */
    private void dumpEvent(MotionEvent event) 
    {
        String names[] = { "DOWN", "UP", "MOVE", "CANCEL", "OUTSIDE","POINTER_DOWN", "POINTER_UP", "7?", "8?", "9?" };
        StringBuilder sb = new StringBuilder();
        int action = event.getAction();
        int actionCode = action & MotionEvent.ACTION_MASK;
        sb.append("event ACTION_").append(names[actionCode]);

        if (actionCode == MotionEvent.ACTION_POINTER_DOWN || actionCode == MotionEvent.ACTION_POINTER_UP) 
        {
            sb.append("(pid ").append(action >> MotionEvent.ACTION_POINTER_ID_SHIFT);
            sb.append(")");
        }

        sb.append("[");
        for (int i = 0; i < event.getPointerCount(); i++) 
        {
            sb.append("#").append(i);
            sb.append("(pid ").append(event.getPointerId(i));
            sb.append(")=").append((int) event.getX(i));
            sb.append(",").append((int) event.getY(i));
            if (i + 1 < event.getPointerCount())
                sb.append(";");
        }

        sb.append("]");
        Log.d("Touch Events ---------", sb.toString());
    }

} 
```

# sql - GROUP BY 一列；为另一个选择任意值

> ID：15314892
> 
> 赞同：14
> 
> 时间：2013-03-09T19:24:24.153
> 
> 标签：sql, sql-server

我正在尝试为每个用户选择一行。我不在乎我得到哪个图像。此查询在 MySQL 中有效，但在 SQL Server 中无效：

```
SELECT user.id, (images.path + images.name) as 'image_path'
FROM users
JOIN images ON images.user_id = users.id
GROUP BY users.id 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-10T02:48:29.267

迄今为止发布的解决方案使用`MIN/MAX`聚合或`ROW_NUMBER`可能不是最有效的（取决于数据分布），因为它们通常必须在为每个组选择一个之前检查所有匹配的行。

使用[AdventureWorks 示例数据库](http://msftdbprodsamples.codeplex.com/)来说明，以下查询都为每个从 Transaction History 表中选择一个`TransactionType`和：`ReferenceOrderID``ProductID`

### 使用`MIN`/`MAX`聚合

```
SELECT
    p.ProductID,
    MIN(th.TransactionType + STR(th.ReferenceOrderID, 11))
FROM Production.Product AS p
INNER JOIN Production.TransactionHistory AS th ON
    th.ProductID = p.ProductID
GROUP BY
    p.ProductID; 
```

![聚合查询计划](../Images/e9426f1c8f4ac13215a4c1ac273104d8.png)

### 使用`ROW_NUMBER`

```
WITH x AS 
(
    SELECT 
        th.ProductID, 
        th.TransactionType, 
        th.ReferenceOrderID,
        rn = ROW_NUMBER() OVER (PARTITION BY th.ProductID ORDER BY (SELECT NULL))
    FROM Production.TransactionHistory AS th
)
SELECT
    p.ProductID,
    x.TransactionType,
    x.ReferenceOrderID
FROM Production.Product AS p
INNER JOIN x ON x.ProductID = p.ProductID
WHERE
    x.rn = 1
OPTION (MAXDOP 1); 
```

![行号计划](../Images/62f77f931651beb491ccf53faab35a21.png)

### 使用仅限内部的`ANY`聚合

```
SELECT
    q.ProductID, 
    q.TransactionType, 
    q.ReferenceOrderID 
FROM 
(
    SELECT 
        p.ProductID, 
        th.TransactionType, 
        th.ReferenceOrderID,
        rn = ROW_NUMBER() OVER (
            PARTITION BY p.ProductID 
            ORDER BY p.ProductID)
    FROM Production.Product AS p
    JOIN Production.TransactionHistory AS th ON p.ProductID = th.ProductID
) AS q
WHERE
    q.rn = 1; 
```

有关`ANY`聚合的详细信息，请参阅[此博客文章](https://sqlkiwi.blogspot.com/2011/07/undocumented-query-plans-the-any-aggregate.html)。

![任何聚合](../Images/330973d6c4153d5c7949b22374be0aed.png)

### 使用具有非确定性的相关子查询`TOP`

```
SELECT p.ProductID,
    (
    -- No ORDER BY, so could be any row
    SELECT TOP (1) 
        th.TransactionType + STR( th.ReferenceOrderID, 11)
    FROM Production.TransactionHistory AS th WITH (FORCESEEK) 
    WHERE
        th.ProductID = p.ProductID
    )
FROM Production.Product AS p; 
```

![前1名](../Images/e6b0f18fcbeba11b77682bc7d7c4eaec.png)

### 与`CROSS APPLY`_`TOP (1)`

前面的查询需要连接并`NULL`为没有交易历史的产品返回 a。使用`CROSS APPLY`with`TOP`解决了这两个问题：

```
SELECT
    p.Name, 
    ca.TransactionType,
    ca.ReferenceOrderID
FROM Production.Product AS p
CROSS APPLY
(
    SELECT TOP (1) 
        th.TransactionType,
        th.ReferenceOrderID
    FROM Production.TransactionHistory AS th WITH (FORCESEEK) 
    WHERE 
        th.ProductID = p.ProductID
) AS ca; 
```

![交叉申请计划](../Images/094313c3ce6cba84be5415e1603fcc90.png)

使用最佳索引，如果每个用户通常有很多图像，这`APPLY`可能是最有效的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-09T19:28:46.493

如果用户有多个图像，而您只想要一张图像，您想要哪一张？虽然 MySQL 的语法很松散，不会强迫你做出选择，只是给你任何旧的任意值，SQL Server 让你选择。一种方法是`MIN`：

```
SELECT u.id, MIN(i.path + i.name) AS image_path
FROM dbo.users AS u
INNER JOIN dbo.images AS i
ON u.id = i.user_id
GROUP BY u.id; 
```

你也可以`MAX`用`MIN`. 并且根据 SQL Server 的版本，以及实际上是否需要更多列，可能还有其他方法可以稍微更有效地执行此操作（避免一些排序/分组工作）。例如，如果您想要单独的路径和名称，这不会很好：

```
SELECT u.id, MIN(i.path), MIN(i.name)
FROM dbo.users AS u
INNER JOIN dbo.images AS i
ON u.id = i.user_id
GROUP BY u.id; 
```

...因为理论上您可以从两个不同的行中获取路径和名称，而这个结果将不再有意义。因此，您可以这样做：

```
;WITH x AS 
(
  SELECT user_id, path, name, rn = ROW_NUMBER() OVER 
    (PARTITION BY user_id ORDER BY (SELECT NULL))
  FROM dbo.images
)
SELECT u.id, x.path, x.name
FROM dbo.users AS u
INNER JOIN x
ON u.id = x.user_id
WHERE x.rn = 1; 
```

在现有案例中使用此变体是否有意义在很大程度上取决于这两个表的索引方式，但您可以尝试这种方法并比较计划/性能：

```
;WITH x AS 
(
  SELECT user_id, path + name AS image_path, rn = ROW_NUMBER() OVER 
    (PARTITION BY user_id ORDER BY (SELECT NULL))
  FROM dbo.images
)
SELECT u.id, x.image_path
FROM dbo.users AS u
INNER JOIN x
ON u.id = x.user_id
WHERE x.rn = 1; 
```

（并尝试用`SELECT NULL`窄索引中的前导列替换`dbo.images`。）

PS 不要使用`AS 'alias'`语法。该形式已被弃用，并使别名看起来像字符串文字。还要[使用架构前缀 always](https://sqlblog.org/2009/10/11/bad-habits-to-kick-avoiding-the-schema-prefix)，并使用别名，这样您就不必在整个查询中重复完整的表名......

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-09T19:27:24.420

你需要一个聚合函数。*正确*的聚合函数取决于应用程序。这意味着你是唯一能说出来的人。一个原始的黑客攻击它：

```
SELECT user.id, max((images.path + images.name)) as 'image_path'
FROM users
JOIN images ON images.user_id = users.id
GROUP BY users.id 
```

MySQL 对 GROUP BY 子句的处理被广泛认为是[BAD](http://www.catb.org/jargon/html/B/BAD.html)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-09T19:28:15.940

根据需要使用 Max 或 Min：

```
SELECT user.id, max(images.path + images.name) as image_path
FROM users
      JOIN images ON images.user_id = users.id
GROUP BY users.id 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-09T19:26:40.257

如果多个图像可供一个用户使用，这将选择第一个（按字母顺序）条目

```
SELECT user.id, min(images.path + images.name) as image_path
FROM users
JOIN images ON images.user_id = users.id
GROUP BY users.id 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-09T19:26:45.517

使用时，`GROUP BY`您只能使用您聚合的列和其他列的聚合函数。

这是实现此目的的一种方法：

```
SELECT user.id, (MAX(images.path) + MAX(images.name)) as 'image_path'
FROM users
JOIN images ON images.user_id = users.id
GROUP BY users.id 
```

尽管您更有可能想要：

```
SELECT user.id, MAX(images.path + images.name)) as 'image_path'
FROM users
JOIN images ON images.user_id = users.id
GROUP BY users.id 
```

# ios - IOS：Tapku 日历：星期天开始或不开始，取决于用户的选择

> ID：15314893
> 
> 赞同：0
> 
> 时间：2013-03-09T19:24:38.023
> 
> 标签：ios, objective-c, sdk, tapku

我在我的项目中使用tapku 日历。我需要为用户选择在周日或周一开始一周。viewDidLoad中有一个方法：

```
(id)initWithSunday:(BOOL)sundayFirst 
```

有没有办法用新选项更新日历？我尝试使用新值和 [calendar reload] 调用 initWithSunday，但发生错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T19:44:06.947

弄清楚了。日历子视图必须从 superview 中删除，设置为 nil，然后再次添加。

```
[calendar removeFromSuperview]; 
calendar= nil; 

calendar =  [[TKCalendarMonthView alloc] initWithSundayAsFirst:startWhithSunday];
calendar.delegate = self;
calendar.dataSource = self;
calendar.frame = CGRectMake(14, 11, calendar.frame.size.width, calendar.frame.size.height);
[self.view addSubview:calendar];
[calendar reload]; 
```

# c - 初始化 PortAudio：主机错误

> ID：15314894
> 
> 赞同：2
> 
> 时间：2013-03-09T19:24:39.883
> 
> 标签：c, audio, alsa, portaudio, audacity

我正在尝试在 Debian Wheezy 64 位 GNU/Linux 上创建一个 PortAudio 应用程序。我阅读了有关如何添加库的文档，它编译时没有错误。

现在，当我想使用此脚本初始化 PortAudio 时：

```
#include <stdio.h>
#include "portaudio.h"

int main(){
    PaError err = Pa_Initialize();
    if(err != paNoError){
        fprintf(stderr, "Pa_Initialize error: %s\n", Pa_GetErrorText(err));
        return 1;
    }
    return 0;
} 
```

我得到以下输出：`Pa_Initialize error: Host error.`

当我尝试运行同样基于 PortAudio 的 Audacity 时，出现以下错误：

```
ALSA lib pcm.c:2217:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.rear
ALSA lib pcm.c:2217:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.center_lfe
ALSA lib pcm.c:2217:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.side
ALSA lib pcm_dmix.c:957:(snd_pcm_dmix_open) The dmix plugin supports only playback stream
audacity: symbol lookup error: audacity: undefined symbol: Pa_GetStreamHostApiType 
```

当我尝试调用这个函数时：

```
const PaHostErrorInfo* hostError;
hostError = Pa_GetLastHostErrorInfo(); 
```

我收到以下错误：`Undefined reference to 'Pa_GetLastHostErrorInfo'`

如何以正确的方式初始化 PortAudio，以及我的主机出了什么问题；PortAudio 是否需要我对 PulseAudio 做一些事情？

*我已经尝试过这个主题的底层解决方案[http://ubuntuforums.org/showthread.php?t=1756822](http://ubuntuforums.org/showthread.php?t=1756822)，因为我认为它与库文件的配置有关。但这也不起作用，也不会改变错误。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T00:36:33.937

大胆错误看起来像是配置错误。要深入了解您的问题，请尝试调用此函数以找出主机错误是什么：

常量 PaHostErrorInfo* Pa_GetLastHostErrorInfo ( 无效 )

[http://portaudio.com/docs/v19-doxydocs/portaudio_8h.html#aad573f208b60577f21d2777a7c5054e0](http://portaudio.com/docs/v19-doxydocs/portaudio_8h.html#aad573f208b60577f21d2777a7c5054e0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T19:24:50.357

经过一段时间的研究，我放弃了这个问题，并尝试通过删除并重新构建它来从源代码重新安装 PortAudio。谢天谢地，这一次成功了！

所以我想这是一个错误，在新版本中得到了解决。

# java - Android 地图自定义制造商搜索？

> ID：15314896
> 
> 赞同：0
> 
> 时间：2013-03-09T19:24:56.273
> 
> 标签：java, android, google-maps

我正在寻找创建自定义谷歌地图，使用带有附加名称的坐标列表来添加标记。我知道如何在地图上添加一两个标记，尽管我假设有一种方法可以遍历它们并将它们添加到地图中。

是否可以遍历要添加到地图的坐标列表？此外，是否可以搜索该列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T01:01:25.953

您可以循环遍历您拥有的每个数组/数组列表/其他存储库，其中包含获取`Latlng`坐标的对象并将它们添加到地图中，如下所示：

```
 for (Task tempTask : tasksRepository)
    {
        LatLng latlng = new LatLng(tempTask.getLatitude(), tempTask.getLongtitude());                       
        newmarker = map.addMarker(new MarkerOptions().position(latlng).title(tempTask.getTitle()).icon(BitmapDescriptorFactory.fromResource(R.drawable.marker_for_map_blue)));  
    } 
```

搜索此存储库与地图无关。并且可以像在任何其他情况下一样完成。

# android - Android - 从 libgdx 活动更改为“正常”活动

> ID：15314900
> 
> 赞同：1
> 
> 时间：2013-03-09T19:25:19.227
> 
> 标签：android, android-activity, libgdx

游戏完成后，如何从 libgdx 活动更改为“正常”活动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T21:07:43.023

You could start it using [startActivity()](http://developer.android.com/reference/android/app/Activity.html#startActivity%28android.content.Intent%29) as described here: [http://developer.android.com/training/basics/firstapp/starting-activity.html](http://developer.android.com/training/basics/firstapp/starting-activity.html)

# jquery - jQuery animate left 不影响其他 div

> ID：15314905
> 
> 赞同：1
> 
> 时间：2013-03-09T19:25:27.073
> 
> 标签：jquery, html, jquery-animate

我有一个带有左侧面板、一个主面板（在中心）和一个右侧面板的页面。左右面板我都希望能够移开（从而使主面板更大）。我在我的侧面板中添加了一个 jQuery 动画，但主面板只是静止不动，我无法弄清楚为什么当其他 div 移开时它不会变大。

**HTML**

```
 <aside id="_left" class="left collapsible">
    <div id="left_ExpanderCollapse"><span>&lt;</span></div>
    <div style="clear: both"></div>
    <table cellpadding="0", cellspacing="0">
      <tr><td>test</td></tr>
      <tr><td>test</td></tr>
    </table>
    test 2
  </aside>

  <aside id="_right" class="right collapsible">
    <div id="right_ExpanderCollapse"><span>&gt;</span></div>
    <div style="clear: both"></div>
    <table cellpadding="0", cellspacing="0">
      <tr><td>test</td></tr>
      <tr><td>test</td></tr>
    </table>
    test 2
  </aside> 

  <div id="_main" >
    <h1>Title</h1>
    Here is the main!<br />
    Here is the main!<br />
    Here is the main!<br />
    Here is the main!<br />
    Here is the main!<br />
    <p>text</p>
    <p>text</p>
    <p>text</p>
    <p>text</p><p>text</p>    
    <div id="pushFooter"></div>
  </div>

<footer>
  Here is some small footer text
</footer> 
```

**CSS**

```
* { 
  margin: 0; 
}
html, body {
  height: 100%;
}

.wrapper {
  width: 80%;
  min-height: 98%;
  border: 1px solid #000;
  padding: 0.5em;
  margin: 0 auto -5em; /* -5em being the size of the footer */
}
footer, #pushFooter {
  height: 5em;
}
footer {
  border: 1px solid #ff0000;
  font-size: 0.7em;
  margin: 0 auto;
}

#_main {
  background-color: #999;
}

aside.left {
  float: left;
  background-color: #eee;
  display: inline-block;
  border: 1px solid #0000ff;
}
aside.right {
  float: right;
  background-color: #eee;
  display: inline-block;
  border: 1px solid #0000ff;
}
#_left, #_right{
  min-width: 15em;
}
#_left_ExpanderCollapse {
  width: 20px;
  margin-right: 5px;
}
#_right_expanderCollapse {
  width: 20px;
  margin-left: 5px;
}

#left_ExpanderCollapse, #right_ExpanderCollapse {
  cursor: pointer;
  text-align: center;
  font-weight: bold;
  font-size: 1.2em;
  color: #fff;
  width: 20px;

  background-color: #0492d0;
  /* round box */
  -moz-border-radius: 75px;
  -webkit-border-radius: 75px;
  border-radius: 75px;
}
.collapsible {
  position: relative;
} 
```

**JS/jQuery**

```
 // make the aside containers as high as the main container
  $("aside").each(function() {
    if($("#_main").height() < $("div.wrapper").height())
      $("#_main").height($("div.wrapper").height());
    $(this).height($("#_main").height());
  });
  // make the footer(s) as wide as the main container
  $("footer").each(function() {
    $(this).width($("#_main").width());
  });
  // make left resizeable
  $( "#_left" ).resizable({handles: 'e, w'});

  $("#left_ExpanderCollapse").click(function() { //alert($(this).text());
    if($(this).text() == "<") {
      var fold     = "-";
      var newArrow = ">"; 
      $("#_left").animate( { left:    fold+'='+($("#_left").width()-$(this).width()),
                            opacity: "0" }, 1000 );
    }
    else {
      var fold     = "+";
      var newArrow = "<";
      $("#_left").animate( { opacity: "1",
                            left:    fold+'='+($("#_left").width()-$(this).width()) }, 1000 );
    }
    $(this).text(newArrow);
  }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T07:37:03.280

如果有人需要这个，我自己发现了：

即使 div 是相对的，更改左/右 div 的“左”或“右”属性似乎也不会影响 main。相反，我不得不更改左/右边距值。所以上面的点击功能，我改成这样（left = **marginLeft**）：

```
if($(this).text() == "<") {
  var fold     = "-";
  var newArrow = ">"; 
  $("#_left").animate( { marginLeft:    fold+'='+($("#_left").width()-$(this).width()),
                        opacity: "0" }, 1000 );
}
else {
  var fold     = "+";
  var newArrow = "<";
  $("#_left").animate( { opacity: "1",
                         marginLeft:    fold+'='+($("#_left").width()-$(this).width()) }, 1000 );
}
$(this).text(newArrow); 
```

# ios - 将图像保存到核心数据

> ID：15314907
> 
> 赞同：0
> 
> 时间：2013-03-09T19:25:45.527
> 
> 标签：ios, core-data, uiimage

从以下源文件中，我尝试加载图像并保存到核心数据并在 imageView 中显示，但它不起作用你能帮我修复它吗？

```
- (IBAction)save:(id)sender
{
    NSLog(@"Telling the AddTrackingTVC Delegate that save was tapped on the     AddTrackingTVC");

    [self.delegate theSaveButtonOnTheAddPlantNoteTVCWasTapped:self];

    MyPlant *myTracking = [NSEntityDescription insertNewObjectForEntityForName:@"MyPlant" inManagedObjectContext:self.managedObjectContext];

    myTracking.name = nameTextField.text;
    myTracking.detail = detailTextField.text;
    myTracking.createdDate = [NSDate date];
    //myTracking.photo = [NSData ];
    [self.managedObjectContext save:nil]; // write data to database
    [self.delegate theSaveButtonOnTheAddPlantNoteTVCWasTapped:self];
}

- (IBAction)takePicture:(id)sender {
    UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];
    // If our device has a camera, we want to take a picture, otherwise, we // just pick from photo library
    if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera]) {
        [imagePicker setSourceType:UIImagePickerControllerSourceTypeCamera]; }
    else {
    [imagePicker setSourceType:UIImagePickerControllerSourceTypePhotoLibrary]; }
    // This line of code will generate a warning right now, ignore it
    [imagePicker setDelegate:self];
    // Place image picker on the screen
    [self presentViewController:imagePicker animated:YES completion:nil];
}

-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {
    self.currentEntry.photo = UIImageJPEGRepresentation([info   objectForKey:UIImagePickerControllerOriginalImage], 1.0);
    [self dismissViewControllerAnimated:YES completion:nil];

} 
```

那么我必须用这些功能做什么才能使其能够将图像保存到核心数据？

[下载源文件](http://www.filedropper.com/plantnote)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T19:29:48.170

我就是这样做的：

```
NSURL * imageURL = [NSURL URLWithString:@"http://www.website.com/picture.png"];
NSData * imageData = [NSData dataWithContentsOfURL:imageURL];
UIImage * image = [UIImage imageWithData:imageData];
NSData *savedImageData = UIImagePNGRepresentation(image);
[coreDataObject setValue:savedImageData forKey:@"image"]; 
```

当你想展示它时：

```
imageView.image = [UIImage imageWithData:[coreDataObject valueForKey:@"image"]]; 
```

# r - ggplot条形图额外空间

> ID：15314914
> 
> 赞同：1
> 
> 时间：2013-03-09T19:26:50.827
> 
> 标签：r, ggplot2, bar-chart

我正在尝试使用 R 中的 ggplot 绘制图表。这是我的代码：

```
library(reshape2)
library(ggplot2)
dfw <- read.table(header=T, text='
    Length  L1  L2
    200:399     27665   28483
    400:599     9232    11856
    600:799     3347    4072
    800:999     1923    2112
    1000:1199   1322    1511
    1200:1399   955 1118
    1400:1599   693 850
    1600:1799   496 640
    1800:1999   332 463
    2000:2199   219 306
    2200:2399   142 212
    2400:2599   73  134
    2600:2799   65  121
    2800:2999   39  87
    3000:3199   19  57
    3200:3399   20  31
    3400:3599   14  37
    3600:3799   4   22
    3800:3999   2   17
    4000:9599   8   53
')

 data.long <- melt(data = dfw, id.var = "Length", 
               measure.vars = c("L1", "L2"), variable.name = "Condition")

 ggplot(data=data.long, aes(x=Length, y=value, fill=Condition)) + 
         geom_bar(stat="identity", position=position_dodge(width = 1), 
         colour="black", na.rm = TRUE, width = 0.5) + 
         scale_x_discrete(limits = data.long$Length) + 
         theme(axis.title.x = element_text(face="bold", colour="#990000", size=20),
         axis.text.x  = element_text(angle=90, vjust=2, size=16)) 
```

![ggplot2_my_plot](../Images/3cc8a912cb8e172de01df14d257b8c20.png)

我的问题是无论我尝试什么，我都无法摆脱绘图区域中的额外空间。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T19:37:08.937

您的代码中的主要问题是变量中的级别顺序错误`Length`。您可以使用函数`factor()`和参数修复它`levels=dfw$Length`（因为您的原始数据框具有正确的顺序）。

```
data.long$Length<-factor(data.long$Length,levels=dfw$Length) 
```

现在您不需要使用`scale_x_discrete()`来设置限制。

```
 ggplot(data=data.long, aes(x=Length, y=value, fill=Condition)) + 
  geom_bar(stat="identity", position=position_dodge(width = 1), colour="black", na.rm = TRUE, width = 0.5) + 
  theme(axis.title.x = element_text(face="bold", colour="#990000", size=20),
        axis.text.x  = element_text(angle=90, vjust=2, size=16)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T19:33:17.097

删除它`scale_x_discrete(limits = data.long$Length)`并重试希望这有帮助

编辑：如果你有它，通过删除它来删除 Y`scale_y_discrete(limits = data.long$Length)`

# html - 如何在画布内显示可拖动的文本元素？

> ID：15314917
> 
> 赞同：0
> 
> 时间：2013-03-09T19:27:17.723
> 
> 标签：html, html5-canvas

我想要的是在网页上显示多个文本元素（例如`span`或`p`元素），当我双击它们时，我可以将它变成一个`input`元素并更改其文本。

每个元素都必须是**可拖动**的，因此当我双击一个元素时，我必须`input`在文本元素所在的同一位置创建该元素。

**做这个的最好方式是什么？**里面一个`canvas`？从我读过的内容来看，画布内不可能有 HTML 元素。

PS：我知道 HTML5`draggable`属性并已将其用于测试。JQueryUI 也一样，所以问题不在于 DnD，它只是记录可拖动元素位置的最佳方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T20:07:02.647

要将文本元素拖到画布中，最好使用框架（如[cgSceneGraph](http://gwennaelbuchet.github.com/cgSceneGraph/)）。

您不能在 canvas 元素中使用 HTML 元素，但您可以通过在用户单击文本时创建文本输入字段来模拟这种行为，并将文本输入添加到与文本相同的位置。

在[cgSceneGraph](http://gwennaelbuchet.github.com/cgSceneGraph/)中，我使用相同的技巧在画布“内部”显示和操作 Web 视图（但使用 iFrame 而不是文本输入）。

这是开始的代码：

```
this._textInput = document.createElement("INPUT");
this._textInput .style.position = "absolute";
document.body.appendChild(this._textInput);

this._textInput.style.left = this.getAbsoluteLeft() + "px";
this._textInput.style.top = this.getAbsoluteTop( + "px";
this._textInput.style.width = this.getAbsoluteWidth() + "px";
this._textInput.style.height = this.getAbsoluteHeight() + "px"; 
```

# ruby - RSPEC 不适用于 RVM

> ID：15314925
> 
> 赞同：0
> 
> 时间：2013-03-09T19:27:49.237
> 
> 标签：ruby, rspec

所以我刚刚安装了 rvm，让它工作得很好很漂亮。我之前运行的是 ruby​​ 1.8.7，它阻止了我的几个 rspec 测试通过。

现在我已经安装了 rvm 并且工作正常，我的 rspec 不工作了。我知道我已经安装了 rspec gem。但是现在运行`rake`命令时，运行 ruby​​ 1.9.2 时出现此错误：

```
(in /Users/TheRedFool/learn_ruby-master)
rake aborted!
Could not find rspec (~> 2) amongst [bundler-1.3.2, minitest-1.6.0, rake-10.0.3, rake-0.8.7, rdoc-2.5.8, rubygems-bundler-1.1.1, rvm-1.11.3.6]
/Users/TheRedFool/learn_ruby-master/Rakefile:2:in `<top (required)>'
/Users/TheRedFool/.rvm/gems/ruby-1.9.2-p320@global/bin/ruby_noexec_wrapper:14:in `eval'
/Users/TheRedFool/.rvm/gems/ruby-1.9.2-p320@global/bin/ruby_noexec_wrapper:14:in `<main>' 
```

`rake`在运行 ruby​​ 2.0.0时使用该命令时出现此错误：

```
(in /Users/TheRedFool/learn_ruby-master)
rake aborted!
Could not find 'rspec' (~> 2) among 8 total gem(s)
/Users/TheRedFool/learn_ruby-master/Rakefile:2:in `<top (required)>' 
```

这让我有点发疯，所以提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T19:42:32.980

每当您使用`rvm`和安装新的 ruby​​ 版本时，您必须在 a`gemset`或默认 gemset 中安装一组新的 gem。它们不会传递版本，特别是那些没有安装 rvm 的版本。您可以通过运行检查是否安装了 gem

`gem list | grep rspec`

另外，请注意，如果您的项目有一个 Gemfile，您可以运行`bundle install`install 以确保所有 gem 都安装在它们所属的位置。

# javascript - javascript中下拉框的示例代码

> ID：15314927
> 
> 赞同：1
> 
> 时间：2013-03-09T19:28:03.040
> 
> 标签：javascript

星期六快乐社区，我一直在建立我的第一个网站，并且已经学习了大量关于 css、javascript、php、mvc 框架等等的知识。任何人都可以帮助我使用一些引导示例之类的下拉框....之类的

```
 ---------------------------
 |      HEADER            +| 

 ---------------------------

 ---------------------------
 |      HEADER            -|
 ---------------------------
 ---------------------------
 ---------------------------
---------------------------- 
```

**编辑：**

```
<ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu"> 
    <li><a tabindex="-1" href="#">Action</a></li> 
    <li><a tabindex="-1" href="#">Another action</a></li> 
    <li><a tabindex="-1" href="#">Something else here</a></li> 
    <li class="divider"></li> 
    <li><a tabindex="-1" href="#">Separated link</a></li> 
</ul> 
```

什么时候展开？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T19:45:44.287

您可以使用 jQuery 轻松完成此操作。但主要的想法是在你的 header 内的一个元素上切换 display 属性`<div>`，例如`<ul>`你可能用来制作导航栏的那个。

工作示例： http: [//jsfiddle.net/Kk78h/](http://jsfiddle.net/Kk78h/)（确保单击“+”号。）

```
<div id="header">
    <h1>Header <span id="adjust">+</span></h1>
    <ul>
        <li>Nav1</li><li>Nav2</li><li>Nav3</li><li>Nav4</li>
    </ul>
</div>

#header { width: 500px;}
h1 { text-align: center; }
h1 #adjust {vertical-align: super; font-size: 20px; color: red; cursor: pointer;}
ul { height: 100px; list-style: none; display: none;}
li { float: left; width: 25%;}

$('#adjust').click(function() {
    $('ul').toggle();
    var cval = $('#adjust').html();
    $('#adjust').html(cval == '+' ? '-' : '+');                                 
}); 
```

# php - PHP检查X是否在数组中Y次

> ID：15314929
> 
> 赞同：0
> 
> 时间：2013-03-09T19:28:14.700
> 
> 标签：php, arrays, function, multidimensional-array

如何创建一个函数来检查一个数字是否在数组中特定时间并返回`true`。我尝试使用`array_exist`，但它只检查一个数字是否存在，并且没有参数说明它们存在多少。是否有内置功能？

如果有人能指出我正确的方向，我将不胜感激。我一直在想它，似乎无法弄清楚。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T19:30:56.553

如果我理解正确，您可以使用它（直接来自[PHP 手册](http://php.net/manual/en/function.array-count-values.php)）：

```
$array = array(1, "hello", 1, "world", "hello");
print_r(array_count_values($array)); 
```

输出

```
Array
(
    [1] => 2
    [hello] => 2
    [world] => 1
) 
```

您可以轻松地制作您需要的功能

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T19:36:40.417

使用 array_count_values()

例子

```
$array = array(1,2,1,3,1);
$array2 = array(0,1,2,3,1);

echo (array_count_values($array)[1]==3 ? 'OK' : 'NO').'<br>';
echo array_count_values($array2)[1]==3 ? 'OK' : 'NO'; 
```

[演示视图](http://codepad.viper-7.com/IjtejP)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T19:43:34.157

```
 $array = array(1, "hello", 1, "world", "hello");
    print_r(array_count_values($array));
    Array
(
    [1] => 2
    [hello] => 2
    [world] => 1
)

    you can know more about 
    http://www.php.net/manual/en/function.array-count-values.php 
```

# java - LinkedHashMap 打印格式化了吗？

> ID：15314932
> 
> 赞同：-1
> 
> 时间：2013-03-09T19:28:23.770
> 
> 标签：java, linkedhashmap

嘿，我有一个包含多个值的 LinkedHashMap，但我正在努力以我想要的格式打印它。它将传递一个大小整数，我希望它以方形格式打印出值，如果某个键的值不超过大小值，则将 0 放在那里。

假设这些是哈希图中的值，第一个是位置，第二个是值

```
hashmap.put(1, 10); 
hashmap.put(2, 90); 
hashmap.put(4, 9); 
hashmap.put(7, 2); 
hashmap.put(11, 4); 
hashmap.put(14, 45); 
```

我希望它在传递值 4（高度/宽度）后打印如下。

```
0 10 90 0
9 0  0  2
0 0  0  4
0 0  45 0 
```

对不起，这个描述真的很糟糕，不知道怎么说更好！为任何帮助而欢呼。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T19:33:52.937

如果给定一个整数 n，并且您正在迭代从 0 到 n^2 的整数。在循环中，您可以使用 mod 来确定您是否是行尾。

```
 if((i mod n) == 0){
           //print a new line here
       } 
```

因此，只需编写一个从 0 到 n^2 的循环，并使用该 if 语句来知道何时中断到下一行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T19:38:23.543

```
public static void printMapAsMatrix(Map<Integer, Integer> map, int size) {
    for (int i = 0; i < size; i++) {
        for (int j = 0; j < size; j++) {
            Integer v = map.get(size * i + j);
            if (v == null)
                v = 0;
            System.out.printf("%1$-5s", v);
        }
        System.out.println();   
    }
} 
```

此解决方案填充每个单元格，使其占用 5 个字符。如果需要，您可以更改此设置。这个想法是通过扫描所有单元格 (0..size-1)x(0..size-1) 并从地图中获取该单元格的值来创建完整矩阵。第 i 行和第 j 列应该转换为 key=size * i + j，因为我们必须跳过当前行中的 i 行和 j 项。不存在的项目被转换为 0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T19:42:47.520

```
public static void main(String[] args) {

        Map<Integer, Integer> hashmap = new HashMap<Integer, Integer>();
        hashmap.put(1, 10);
        hashmap.put(2, 90);
        hashmap.put(4, 9);
        hashmap.put(7, 2);
        hashmap.put(11, 4);
        hashmap.put(14, 45);

        printSquare(4, hashmap);
    }

    public static void printSquare(int dimension, Map<Integer,Integer> map){
        int grid = dimension * dimension;

        for(int x = 0; x < grid; x++){

            Integer value = map.get(x);
            value = (value == null) ? 0:value;

            if(x != 0 && x % 4 == 0){
                System.out.println("\n");
                System.out.print(value);
                System.out.print("\t");
            }else{
                System.out.print(value);
                System.out.print("\t");
            }
        }
    } 
```

# java - 单列表和列表节点有什么区别？

> ID：15314933
> 
> 赞同：0
> 
> 时间：2013-03-09T19:28:27.603
> 
> 标签：java, linked-list

```
public static SingleList copy(SingleList list1){
    SingleList list2 = new SingleList();
    ListNode current=list1.head;
    while (current != null){
        list2.addLast(current.getData());
        current=current.getNext();
    }
    return list2;
} 
```

我不知道这种方法的作用是什么，甚至不知道它在计算机上是如何工作的，甚至不知道节点和单列表之间的区别！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T19:29:46.770

`ListNode`是**链表中**的一个**节点**。是一个**链表**。**`SingleList`**

 ****打个比方——节点是链条中的一个环节；链表就是链本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-29T08:45:53.613

ListNode 是链表中的一个节点，有一些代码可以更好地理解 ListNode。

```
public class List
 {
     // return a linked list based on parameters list and soFar
     public static ListNode process(ListNode list, ListNode soFar)
     {
         if (list == null) {
             return soFar;
         }
         else {
             ListNode temp = list.getNext();
             list.setNext(soFar);
             return process(temp,list);
         }
      }

      // return a new linked list based on parameter n

      public static ListNode create(int n)
      {
        ListNode list = null;
        for(int k=1; k <= n; k++) {
            list = new ListNode(new String(""+k), list);
        }
        return list;
      }

      // print a linked list

      public static void print(ListNode list)
      {
        while (list != null) {
            System.out.print(list.getValue()+" ");
            list = list.getNext();
        }
        System.out.println();
      }
 } 
```****

# c++ - 使用继承移动赋值/构造函数将错误抛出范围之外

> ID：15314936
> 
> 赞同：0
> 
> 时间：2013-03-09T19:28:51.780
> 
> 标签：c++, c++11, scope, move-semantics

好的，首先，我试图将一个类实例从范围内移动到范围外。我不确定我是否使用了正确的术语，但这里是：

```
Button Btn;  //Declare blank object out of scope..

LRESULT __stdcall WindowProcedure(/*Params here*/)
{
    switch(message)
    {
        case WM_CREATE:
        {
            Btn = std::move(Button("Title", Point(0, 0), 95, 22, hwnd)); //Move assign the scoped object..
        }
        break;

        case WM_COMMAND:
            Btn.SetText("New Title"); //Access the Non-Scoped button to see if the Move really worked.
        break;
    }

    return 0;
} 
```

如上所示，我试图通过移动分配将作用域对象移出作用域。所以我期望作用域对象将其内容分配给我的非作用域对象，然后销毁作用域对象。

但是，当收到 WM_COMMAND 时，它会抛出一个错误，所以我知道肯定有问题。我似乎看不出有什么问题。在我的 Bitmap 类中执行相同/类似的技术（没有继承），它可以工作。但是通过继承，我似乎把它搞砸了。

我的代码如下：

```
class Control
{
    private:
        HMENU ID;
        HWND Handle, Parent;
        std::string Class, Title;
        void Swap(Control &C);

    public:
        Control(const Control &C) = delete; //Copying is not allowed.
        Control(Control &&C);               //Moving is allowed.
        Control(DWORD dwExStyle, /*Other params here*/);
        Control(DWORD dwExStyle, /*More params here*/);
        virtual ~Control();

        virtual void Dispose();

        Control& operator = (const Control &C) = delete; //Copying through assignment not allowed.
        Control& operator = (Control&& C);               //Move through assignment allowed.

    protected:
        Control();
        bool Initialized;
        static LRESULT __stdcall SubClass(HWND Window, UINT Msg, WPARAM wParam, LPARAM lParam, UINT_PTR uIdSubclass, DWORD_PTR dwRefData);
};

class Button : public Control
{
    public:
        Button();
        Button(const Button &B);  //Copying is allowed.
        Button(Button&& B);       //Moving is allowed.
        Button(std::string Title, Point Location, /*Other params here*/);
        Button(std::string Title, DWORD dwStyle, /*More params here*/);
        virtual ~Button();

        virtual void Dispose() override;

        Button& operator = (const Button &B) = delete; //Copy through assignment not allowed. (cannot be overriden)
        Button& operator = (Button&& B);      //Move through assignment allowed. Non-virtual (cannot be overriden)
};

Control::~Control() {}

void Control::Swap(Control &C)
{
    using std::swap;
    swap(ID, C.ID);
    swap(Handle, C.Handle);
    swap(Parent, C.Parent);
    //Swap all members..
}

/*All other constructors here..*/

Control::Control(Control &&C) : ID(std::move(C.ID)), Handle(std::move(C.Handle)), /*move all member*/ {}

void Control::Dispose()
{
    ID = nullptr;
    Parent = nullptr;

    if (Handle != nullptr)
    {
        DestroyWindow(Handle);
        Handle = nullptr;
    }
}

Control& Control::operator = (Control&& C)
{
    if (this->Handle != C.Handle)
    {
        /*this->ID = std::move(C.ID);
        this->Handle = std::move(C.Handle);
        this->Parent = std::move(C.Parent);
        this->Class = std::move(C.Class);
        this->Title = std::move(C.Title);
        this->dwExStyle = std::move(C.dwExStyle);
        this->dwStyle = std::move(C.dwStyle);
        this->Location = std::move(C.Location);
        this->Width = std::move(C.Width);
        this->Height = std::move(C.Height);*/
        C.Swap(*this);      //Do I use my swap func? Or do I use std::move?
        C.Dispose();
    }
    return *this;
}

//Button constructors are the same as the Control constructors with the initialization stuff.. just different parameters.

Button::Button(const Button &B) : Control(B.ID + 1, B.Class, B.Title, /*all other params */) {} //Copy constructor..

Button& Button::operator = (Button&& B)
{
    Control::operator = (std::move(B)); //I believe it is this line that probably throws.
    return *this;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T19:55:52.410

您移动控件的内容，交换回来，然后同时处理它和按钮。

这不仅无法正确移动控件，还会使其他按钮无效。

编写一个有效的移动构造函数。使用移动交换成语进行分配移动。如果 move ctor 和 swap 都写对了，这将起作用。

# hadoop - 工作驱动程序和第 3 方罐子

> ID：15314945
> 
> 赞同：0
> 
> 时间：2013-03-09T19:29:18.883
> 
> 标签：hadoop

我能够在映射器和减速器需要使用 3rd 方 jar 的情况下运行 M/R 作业。我在调用 hadoop jar 命令时在 -libjars 中注册了这些 jar。但是，当作业驱动程序本身（扩展配置实现工具）需要运行此类代码（例如在启动和结束时通知某些远程服务）时，我面临一个奇怪的问题。使用hadoop jar提交作业时有没有办法配置类路径？似乎 -libjars 不适用于这种情况......

```
Exception in thread "main" java.lang.NoClassDefFoundError: com/me/context/DefaultContext
        at java.lang.ClassLoader.defineClass1(Native Method)
        at java.lang.ClassLoader.defineClassCond(ClassLoader.java:632)
        at java.lang.ClassLoader.defineClass(ClassLoader.java:616)
        at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
        at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
        at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
        at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:248)
        at com.me.bigdata.mr.pnm.PnmDataCruncher.run(PnmDataCruncher.java:50)
        at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
        at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:79)
        at com.me.mr.pnm.PnmMR.main(PnmDataCruncher.java:261)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.hadoop.util.RunJar.main(RunJar.java:156)
Caused by: java.lang.ClassNotFoundException: com.me.context.DefaultContext
        at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:248) 
```

我正在尝试使用 export HADOOP_CLASSPATH_USER_FIRST=true 和 -Dmapreduce.task.classpath.user.precedence=true，但仍然出现错误。

我正在运行 hadoop 1.0.4。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T03:02:32.447

怎么样

```
HADOOP_CLASSPATH=jar1:jar2    hadoop jar your_jar  your_class ........... 
```

在一行 shell 命令中完成所有操作

# android - 通过 Eclipse 导航到 AVD Manager

> ID：15314949
> 
> 赞同：0
> 
> 时间：2013-03-09T19:29:49.733
> 
> 标签：android, eclipse, android-emulator, eclipse-juno

据说要进入`AVD Manager`Eclipse，我所要做的就是单击`Window > AVD Manager`. 我的问题是当我点击窗口时，`AVD Manager`选择中没有。我需要编辑现有的`AVD`，我该怎么做？我在用`Eclipse Java EE IDE for Web Developers. Version: Juno Service Release 2`

初始技巧：

据我所知，一切都已正确安装。我已经创建并运行了我的第一个应用程序。但是由于我找不到`AVD Manager`，所以我点击`run`了该应用程序，当 eclipse 抱怨 no existing`AVD`时，我点击`create avd`并从那里去了。但是现在我已经有了一个`AVD`，我不再收到投诉，所以我被一个 AVD 卡住了，不知道如何编辑它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T19:33:27.707

试着去

窗口-->自定义透视图-->命令组可用性选项卡

您应该看到“Android SDK and AVD Manager”（我的是第三个）单击复选框和“确定”，它现在应该显示在“窗口”下。当我升级到 Juno 时，我必须这样做。我不知道它在 Eclipse 中是否有问题，或者更可能是我在安装过程中遗漏了一些东西:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T19:43:04.837

您可能在命令组/工具栏可见性中未选中 Android AVD 和 SDK 管理器的选项。要正确执行此程序。

1.  转到 Windows-> 自定义透视图
2.  在 Tool bar Visibility 选项卡下检查 Android SDK 和 AVD Manger。
3.  在 Command Groups Availability 选项卡下，找到 Android SDK 和 AVD Manager 并检查它。

这将解决您的问题。

# perl - 如何通过 grep 和 perl 替换字符串

> ID：15314953
> 
> 赞同：0
> 
> 时间：2013-03-09T19:30:31.277
> 
> 标签：perl, replace, grep

我只想在第一次出现时从文件（file.dat）中获取一个字符串，并通过从另一个文件（输出）中读取来替换它。我有一个名为“输出”的文件，例如包含“AAA T 0001”

```
#!/bin/bash
procdir=`pwd`

cat output | while read lin1 lin2 lin3

do

  srt2=$(echo $lin1 $lin2 $lin3 | awk '{print $1,$2,$3}')

  grep -m 1 $lin1  $procdir/file.dat | xargs -r0 perl -pi -e 's/$lin1/$srt2/g'

done 
```

基本上我想要的是：

当第一次从文件“file.dat”中提取字符串“AAA”时，我想将“AAA”旁边的第二列和第三列替换为“T 0001”，但仍保留第一列“ AAA”就这样。上面的脚本似乎不起作用。

基本上在 's/$lin1/$srt2/g' 中不理解 "$lin1" 和 $srt2 变量

例子：

在我的 file.dat 我有一排

```
AAA D ---- CITY COUNTRY 
```

我想要的是：

```
AAA T 0001 CITY COUNTRY 
```

任何意见都非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T20:05:13.140

Perl 在这类任务上大放异彩。

下面的代码从`output`每个键第一次出现时读取替换并记住新字段。使用 Perl 的就地编辑，程序然后逐行读取输入。必要时，代码会替换字段 2 和 3，并从中删除键，`%replace`以便仅替换第一个实例。

```
#! /usr/bin/env perl

use strict;
use warnings;

die "Usage: $0 replacements data-file\n" unless @ARGV == 2;

sub read_replacements {
  my($path) = @_;

  my %replace;
  open my $fh, "<", $path or die "$0: open $path: $!";
  while (<$fh>) {
    chomp;
    my($key,$f2,$f3) = split;
    warn "$0: $path:$.: multiple replacements for key '$key'" if $replace{$key};
    $replace{$key} = [$f2,$f3];
  }

  %replace;
}

my %replace = read_replacements shift @ARGV;
$^I = "~";  # in-place editing backup extension
while (<>) {
  chomp;
  my($key,@rest) = split;
  if ($replace{$key}) {
    splice @rest, 0, 2 => @{$replace{$key}};
    $_ = join(" ", $key, @rest) . $/;
    delete $replace{$key};
  }
  print;
} 
```

样品运行：

```
$猫输出
AAA T 0001

$猫文件.dat
AAA D----城市国家

$ ./replace-first 输出文件.dat

$猫文件.dat
AAA T 0001 城市 国家

$ cat file.dat~
AAA D----城市国家
```

就地编辑是一个不错的功能，您可以轻松扩展上述程序以替换任意数量文件中的字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T20:13:22.903

```
perl -i -e'
   {
      my $f = shift(@ARGV);
      open(my $fh, "<", $f)
         or die("Can'\''t open $f: $!\n");
      while (<$fh>) {
         my ($s,$r) = /^(\S+)\s++(.*)$/;
         $repl{$s} = $r;
      }
   }

   while (<>) {
      s{^(\S+)\s+\K(\S+\s*\S+)}{ delete($repl{$1}) // $2 }e;
      print;
   }
' output file.dat 
```

# android - 获取所有正在运行的 BroadcastReceiver

> ID：15314957
> 
> 赞同：-1
> 
> 时间：2013-03-09T19:30:44.963
> 
> 标签：android, broadcastreceiver

我有一个简单的问题，是否可以让`BroadcastReceivers`我的应用程序全部运行？

***编辑*** 根据`DjHacktorReborn`答案：

```
 @Override
    public void onDestroy()
    {
        super.onDestroy();
        progressReceiver mProgressReceiver = new progressReceiver();
        unregisterReceiver(mProgressReceiver);
    }

private void calculateNotficationBar()
{
    String currName = null;
    Set<Thread> threadSet = Thread.getAllStackTraces().keySet();
    Thread[] threadArray = threadSet.toArray(new Thread[threadSet.size()]);
    IntentFilter mIntentFilter = new IntentFilter();
    progressReceiver mProgressReceiver = new progressReceiver();
    totalThreadCount = threadArray.length;
    for (int i = 0; i < totalThreadCount; i++)
        if (threadArray[i].getName().contains("DLRUNNING"))
        {
            String[] __tmp = threadArray[i].getName().split("\\|");
            currName = __tmp[0];
            Log.e("Thread is => ", currName);
        }
    mIntentFilter.addAction(currName);
    registerReceiver(mProgressReceiver, mIntentFilter); 
}

private class progressReceiver extends BroadcastReceiver 
{
    private int currentProgress = 0;

    @Override
    public void onReceive(Context context, Intent intent) 
    {
        currentProgress += intent.getIntExtra("DOWNLOAD_UPDATED", 0);
        mNotification.contentView.setProgressBar(R.id.status_progress, 100
                , currentProgress / totalThreadCount, false);
        notificationManager.notify(42, mNotification);  
        if (currentProgress >= 100)
            notificationManager.cancelAll();
    }
} 
```

我收到了这些新错误：

```
03-10 00:16:23.035: E/AndroidRuntime(25773): FATAL EXCEPTION: main
03-10 00:16:23.035: E/AndroidRuntime(25773): java.lang.RuntimeException: Unable to stop service com.example.coverflow.data.downloadManagers@42c042f8: java.lang.IllegalArgumentException: Receiver not registered: com.example.coverflow.data.downloadManagers$progressReceiver@42d09278
03-10 00:16:23.035: E/AndroidRuntime(25773):    at android.app.ActivityThread.handleStopService(ActivityThread.java:2578)
03-10 00:16:23.035: E/AndroidRuntime(25773):    at android.app.ActivityThread.access$2000(ActivityThread.java:140)
03-10 00:16:23.035: E/AndroidRuntime(25773):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1329)
03-10 00:16:23.035: E/AndroidRuntime(25773):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-10 00:16:23.035: E/AndroidRuntime(25773):    at android.os.Looper.loop(Looper.java:137)
03-10 00:16:23.035: E/AndroidRuntime(25773):    at android.app.ActivityThread.main(ActivityThread.java:4898)
03-10 00:16:23.035: E/AndroidRuntime(25773):    at java.lang.reflect.Method.invokeNative(Native Method)
03-10 00:16:23.035: E/AndroidRuntime(25773):    at java.lang.reflect.Method.invoke(Method.java:511)
03-10 00:16:23.035: E/AndroidRuntime(25773):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
03-10 00:16:23.035: E/AndroidRuntime(25773):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
03-10 00:16:23.035: E/AndroidRuntime(25773):    at dalvik.system.NativeStart.main(Native Method)
03-10 00:16:23.035: E/AndroidRuntime(25773): Caused by: java.lang.IllegalArgumentException: Receiver not registered: com.example.coverflow.data.downloadManagers$progressReceiver@42d09278
03-10 00:16:23.035: E/AndroidRuntime(25773):    at android.app.LoadedApk.forgetReceiverDispatcher(LoadedApk.java:654)
03-10 00:16:23.035: E/AndroidRuntime(25773):    at android.app.ContextImpl.unregisterReceiver(ContextImpl.java:1277)
03-10 00:16:23.035: E/AndroidRuntime(25773):    at android.content.ContextWrapper.unregisterReceiver(ContextWrapper.java:385)
03-10 00:16:23.035: E/AndroidRuntime(25773):    at com.example.coverflow.data.downloadManagers.onDestroy(downloadManagers.java:47)
03-10 00:16:23.035: E/AndroidRuntime(25773):    at android.app.ActivityThread.handleStopService(ActivityThread.java:2561)
03-10 00:16:23.035: E/AndroidRuntime(25773):    ... 10 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T19:47:00.143

这就是你可以为 headSet 插入动态设置广播接收器的方法，同样你可以为你想要的其他意图做

```
mHeadsetBroadcast = new HeadsetBroadCast();
inf = new IntentFilter();
inf.addAction(Intent.ACTION_HEADSET_PLUG);
registerReceiver(mHeadsetBroadcast, inf);

private class HeadsetBroadCast extends BroadcastReceiver {
@Override
        public void onReceive(Context context, Intent intent) {}
} 
```

`OnDestroy()`通话中

```
 unregisterReceiver(mHeadsetBroadcast); 
```

# c++ - 模拟CPU寄存器？

> ID：15314963
> 
> 赞同：2
> 
> 时间：2013-03-09T19:31:17.087
> 
> 标签：c++, cpu-registers

我想模拟注册的工作，我声明注册类如下

```
class Register{
    uint8_t reg_ax[2];
    Register(){
        reg_ax[0] = reg_ax[1] = 0;
    }
    uint16_t &ax(){ return (uint16_t &)reg_ax[0]; }
}; 
```

现在我可以像这样打印和编辑`ax`（16位）的值：

```
Register regs;
cout << regs.ax() << endl;
regs.ax() = 5;
cout << regs.ax() << endl; 
```

它工作得很好，但是现在如果我想打印和编辑`al`以及我应该怎么做`ah`的低和高部分（8 位）`ax`？！我试过这个，但它不工作！

```
uint8_t &al(){ return reg_ax[1]; }
uint8_t &ah(){ return reg_ax[0]; } 
```

现在这样做不会显示任何输出：

```
cout << regs.al() << endl; 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T19:40:16.527

也许问题是您正在尝试将 an 打印`unsigned char`为 a `unsigned char`，因此`cout << regs.ah();`打印字符零或类似的字符？

这对我有用：

```
#include <iostream>
#include <cstdint>

using namespace std;

class Register{
    uint8_t reg_ax[2];
public:
    Register(){
        reg_ax[0] = reg_ax[1] = 0;
    }
    uint16_t &ax(){ return (uint16_t &)reg_ax[0]; }
    uint8_t &al(){ return reg_ax[1]; }
    uint8_t &ah(){ return reg_ax[0]; }
};

int main()
{
    Register regs;
    regs.ax() = 500;
    cout << regs.ax() << endl;
    cout << (int)regs.ah() << endl;
    cout << (int)regs.al() << endl;
    return 0;
} 
```

我发布了一个完整的例子，就像你应该做的那样。然后，您可以看到您拥有的包含以及与您的代码相比我必须猜测的任何其他内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T20:02:03.123

使用数组来实现低/高字节或 16 位寄存器不是最好的主意。正如我在评论中所写，了解联合，：在变量定义的上下文中，内存中的数据对齐。

这应该给你一个想法来实现方便的寄存器访问结构/类： [在 Windows C/C++ 中使用半字节（4 位变量）](https://stackoverflow.com/questions/863575/using-nibbles-4-bits-variables-in-windows-c-c)

并且不要忘记使用与您的平台类似的属性__((__packed))。

**编辑：** 我可能会为此丢分，但它可能对你有用:-)。一旦我实现了一个以任何方式访问寄存器（内存映射）的工具，按位，nibblewise 等。它可以让您了解使用`std::bitset`. 代码在这里：[https ://code.google.com/p/jeeamtee/wiki/Main](https://code.google.com/p/jeeamtee/wiki/Main)

# ruby - 在 Ruby 中将日元转换为浮点数

> ID：15314967
> 
> 赞同：0
> 
> 时间：2013-03-09T19:31:48.940
> 
> 标签：ruby

我有一个看起来像这样的字符串：“¥3,250”。我想将其转换为浮点数。

我已经尝试过这样的事情：

```
 price = "¥3,250"
    price[0] = ""
    price.to_f 
```

但是 ruby​​ 使用逗号 (,) 作为小数分隔符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T19:46:43.167

```
price_as_float = price.scan(/\d|\./).join('').to_f 
```

它甚至应该工作，说`"¥3,250.4"`

它所做的只是从字符串中提取数字和点并从中创建一个字符串，然后将其转换为浮点数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T19:46:03.917

你可以试试这个：

```
 price = "¥3,250"
   price.gsub(/[,|¥]/,'').to_f   #=> 3250.0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T19:58:52.497

```
price = "¥3,250"
price.delete("¥,").to_f 
```

# asp.net-mvc - 没有接口的 StructureMap 构造函数注入？

> ID：15314968
> 
> 赞同：1
> 
> 时间：2013-03-09T19:31:50.460
> 
> 标签：asp.net-mvc, interface, inversion-of-control, structuremap

我正在建立一个 MVC 项目。看起来像这样

```
EfDbContext : IDbContext { ... }

MyStuff : IMyStuff { ... }

MyService : IMyService {
   List<things> GetSomething(IDbContext context, IMyStuff stuff) { ... }
}

MyController : Controller { 
   ActionResult MyAction(IMyService service) { ... }
} 
```

我使用 StructureMap.MVC 来解决所有构造函数依赖项，以及用于审计和登录自定义 ActionFilters 的 setter 注入。我唯一需要在 IoC 中手动指定的是 IDbContext 的连接字符串，其他一切都自动工作！

直到我读到一些[文章](http://blog.ploeh.dk/2010/12/02/Interfacesarenotabstractions/)说，类和接口之间的比例是 1:1。我的应用程序非常简单，IMyStuff 或 IMyService 永远不会有不同的实现。我拥有它们的唯一原因是它们可以被注入和单元测试（我使用了 Rhino，但开始喜欢 NSubstitue）。

有没有办法我可以摆脱接口并直接注入具体类？所以看起来像

```
GetSomething(IDbContext context, MyStuff stuff) {}
MyAction(MyService service) {} 
```

当然，我仍然希望所有基于约定的自动连接与 StructureMap，因此我不必一一指定它们。

谢谢。

# r - 每行线性回归系数 R

> ID：15314969
> 
> 赞同：1
> 
> 时间：2013-03-09T19:31:53.547
> 
> 标签：r, linear-regression

假设我使用以下数据

```
data(iris)
iris 
```

并进行以下回归：

```
linearReg <- lm(Sepal.Length ~ Petal.Length+Petal.Width, data=iris)
linearReg$coefficients

 (Intercept) Petal.Length  Petal.Width 
  4.1905824    0.5417772   -0.3195506 
```

现在我想知道如何使用这些系数结果来**获得**我的数据虹膜每 150 obs 的结果。

*   第 1 行：4.1905824 + obs1_petal.lenght*0.5417772 +obs1_petal.width*-0.3195506
*   第 2 行：4.1905824 + obs2_petal.lenght*0.5417772 +obs2_petal.width*-0.3195506
*   ETC

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T19:34:40.013

您可以使用以下`fitted.values`功能：

```
predictions = fitted.values(linearReg) 
```

这为您提供了一个长度向量以及`150`每个向量的预测。例如，`predictions[1]`等于`4.1905824 + iris$Petal.Length[1]*0.5417772 + iris$Petal.Width[1]*(-0.3195506)`。

如果你想手动完成，你可以这样做：

```
predictions =  4.1905824 + iris$Petal.Length*0.5417772 + iris$Petal.Width*(-0.3195506) 
```

你会得到相同的价值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-09T19:36:08.877

在线性模型对象上使用`fitted`将获得每个观察值的预测值

```
fitted(linearReg) 
```

或者，您可以使用`predict`插入预测器以从模型中获取预测。在您的情况下，您可以插入原始数据集。

```
 predict(linearReg, newdata = iris) 
```

这里的不同之处在于，使用 predict 可以获得对不在用于构建模型的数据集中的观察结果的预测。例如，如果您想对一些新数据进行预测，您只需要一个数据框，其中包含模型中使用的每个预测变量的列，然后将其用作 predict 中的 newdata 参数

```
newdat <- data.frame(Petal.Length = c(1,2,3), Petal.Width = c(2,3,4))
predict(linearReg, newdata = newdat)
#       1        2        3 
#4.093258 4.315485 4.537712 
```

# html - 替换html元素值

> ID：15314974
> 
> 赞同：0
> 
> 时间：2013-03-09T19:32:30.953
> 
> 标签：html

我试图提示一个值来替换“数据量”的值，你会怎么做呢？

```
<html>

<body>

<a href="http://google.com/" class="dwolla_button" data-name="Lease" data-desc="Payments" data-amount="4" data-shipping="0" data-tax="0" data-guest-checkout="true" data-key="xxxxx">Bank </a>

<script type="text/javascript" src="https://www.dwolla.com/scripts/button.min.js"> </script>

</body>

</html> 
```

我试图以这种方式替换使用javascript

```
<script>
document.getElementByClass("dwolla_button").data-amount="43";
</script> 
```

并考虑过像这样使用jquery，但不知道如何首先加载jquery

```
$("a").attr("data_amount", "43") 
```

有任何想法吗？

我完全尝试过的整个代码是

```
<html>
  <body>

    <a href="http://249lease.webs.com/" class="dwolla_button" data-name="Lease" data-desc="Payments" data-amount="5" data-shipping="0" data-tax="0" data-guest-checkout="true" data-key="sHqCOc31Vh3JiAsPhBfEk5f4D9bAWKLzwaT06ah3Aw65i0gkZl">Bank Account (25¢)</a>

<script type="text/javascript">

document.getElementByClass("dwolla_button")[0].setAttribute("data-amount", "43");
</script>  

    <script type="text/javascript" src="https://www.dwolla.com/scripts/button.min.js"> </script>

  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T19:37:05.823

简单的 JS 解决方案是：

```
document.getElementsByClassName("dwolla_button")[0].setAttribute("data-amount", "43"); 
```

`dwolla_button`如果是页面中的第一个（或唯一一个） ，这将起作用`dwolla_button`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T19:38:45.350

包括谷歌为加载 jquery 提供的这个脚本：-

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T19:35:10.950

如果您已经拥有 jQuery，[`jQuery.data()`](http://api.jquery.com/jQuery.data/)那么您正在寻找的是：

```
$(".dwolla_button").data("amount", 43) 
```

它将`data`在支持的情况下使用 HTML 5 的属性，并在旧浏览器中使用它自己的实现。

# ios - 获取iOS文件系统目录中存储对象的所有属性

> ID：15314977
> 
> 赞同：2
> 
> 时间：2013-03-09T19:32:42.097
> 
> 标签：ios, objective-c, persistence

我知道这种方法：`resourceValueForKeys`给定一个`NSURL`和一个键数组将为您获取文件的属性......但我需要的是枚举给定`NSURL`目录中的所有文件并给我属性的东西。

我尝试在`NSFileSystem`课堂上使用枚举器执行此操作，但无法使其正常工作，有人知道这样做的正确方法吗？...我没有使用 Core Data。

```
 NSDictionary *values = [fileDirectory resourceValuesForKeys:@[NSURLAttributeModificationDateKey] error:nil];
    NSLog(@"object: %@", values); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T19:45:03.367

干得好：

```
NSString *path = [NSHomeDirectory() stringByAppendingFormat:@"/Documents/your file path"];
NSLog(@"Your path: %@",path);
NSFileManager *fileManager = [NSFileManager defaultManager];
NSError *error;
NSDictionary *attributesOfYourItem = [fileManager attributesOfItemAtPath:path error:&error];
if(error)
    NSLog(@"Error: %@",error);
else
    NSLog(@"Attribute dictionary: %@",attributesOfYourItem); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T19:50:39.237

枚举给定目录中的所有文件：

```
NSArray * arrayOfURLs = [fileManager contentsOfDirectoryAtURL:URL includingPropertiesForKeys:@[NSURLIsDirectoryKey,
        NSURLNameKey,NSURLFileSizeKey,NSURLContentModificationDateKey,
        NSURLLocalizedTypeDescriptionKey]
                              options:NSDirectoryEnumerationSkipsHiddenFiles 
                                error:nil];

for ( NSURL file in arrayOfURLs ) {
    NSString * nameOfFile;
    [file getResourceValue:&nameOfFile forKey:NSURLNameKey error:nil];
    NSLog(@"%@", nameOfFile);

    ...... and so forth for the rest of values ...

} 
```

这样，您可以获得文件夹中包含的所有文件的所有值。

# c++ - 是否有明确说明模板类型的理由？

> ID：15314978
> 
> 赞同：11
> 
> 时间：2013-03-09T19:32:45.200
> 
> 标签：c++, templates

考虑一个简单的函数模板：

```
template <typename T>
void FunctionTemplate(T t){
}

void MyFunction(){
    int a;
    FunctionTemplate(a);
    FunctionTemplate<int>(a);
} 
```

在第一次调用 ( `FunctionTemplate(a)`) 时，编译器计算出引发问题的类型，是否存在调用 FunctionTemplate ( `FunctionTemplate<int>(a)`) 的第二种方式的任何理由，或者我们不能使用第一种方法的任何令人信服的理由？

**编辑：**我的术语有点偏离，所以请根据需要进行编辑。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-09T19:37:23.550

有时您会*想要*指定模板参数，即使您不必这样做。假设您的函数接受一个类型的参数，`T`并且您有一个，`int`但您希望该函数将其作为一个`float`. 然后你需要明确地说`FunctionTemplate<float>(my_int)`.

模板参数不能推导出来的情况也很多。考虑以下：

```
template <typename T>
T FunctionTemplate() {
  return T();
} 
```

不管怎么称呼，如果不提供模板参数，`T`就无法自动推导出类型。在这种情况下，简单的原因是调用站点没有说明它期望返回类型是什么。

对于术语：当您不指定模板参数时，模板被隐式实例化；当您指定模板参数时，模板将被显式实例化。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-09T19:36:59.093

假设你想将函数作为参数传递给另一个方法；

```
myAlgorithm( myFunction<int> ); 
```

或者假设您想保证函数的浮点版本用于速度；

```
myFunction<float>( 2.0 ); 
```

（现在忘记写`2.0f`不是问题）

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-09T19:43:01.013

一种用法是强制编译器使用特定版本的模板函数：

```
template <typename T>
T func(T x, T y)
{
  // ...
}

int main()
{
  int x = 10;
  float y = 20;

  func(x, y); //ERROR no matching function for call to 'func(int&, float&)'

  func<float>(x, y); // OK, Uses float version of func
} 
```

# wordpress - Wordpress 经常更新帖子

> ID：15314980
> 
> 赞同：1
> 
> 时间：2013-03-09T19:33:14.310
> 
> 标签：wordpress

我最近更新了我的帖子超过 3 次。我前段时间读到这对 SEO 和谷歌不利。因为谷歌会认为我在发送垃圾邮件或其他内容，所以有一个插件可以防止这种情况，但我忘记了名字。

请问你能帮我吗？

该插件的作用：当您发布某些内容时，它会告诉谷歌一次。因此，如果我更新帖子 10 次，它不会向谷歌发送通知。只有一次。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T07:27:56.857

你在想这个插件[cbnet Ping Optimizer](http://wordpress.org/extend/plugins/cbnet-ping-optimizer/)吗？

根据插件描述，不再需要该插件：

> 因为不再需要这个插件的功能。事实上，这个插件的功能可能从一开始就不需要。但不管怎样，现在肯定不需要它。

# python - 金字塔：视图可调用对象如何接受一个或两个参数？

> ID：15314983
> 
> 赞同：3
> 
> 时间：2013-03-09T19:33:23.967
> 
> 标签：python, pyramid

可以以最简单的形式调用的 Pyramid 视图可以写成：

```
def myview(request):
    pass 
```

另一种形式是接受另一个参数——上下文：

```
def myview(context, request):
    pass 
```

Pyramid 视图查找机制如何知道可调用视图是否接受上下文？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T19:42:30.507

Pyramid 使用`inspect`模块检查视图（特别是[函数](https://github.com/Pylons/pyramid/blob/master/pyramid/config/views.py#L505)`.getargspec()`中的调用：[`requestonly()`](https://github.com/Pylons/pyramid/blob/master/pyramid/config/views.py#L505)

```
def requestonly(view, attr=None):
    ismethod = False
    if attr is None:
        attr = '__call__'
    if inspect.isroutine(view):
        fn = view
    elif inspect.isclass(view):
        try:
            fn = view.__init__
        except AttributeError:
            return False
        ismethod = hasattr(fn, '__call__')
    else:
        try:
            fn = getattr(view, attr)
        except AttributeError:
            return False

    try:
        argspec = inspect.getargspec(fn)
    except TypeError:
        return False

    args = argspec[0]

    if hasattr(fn, im_func) or ismethod:
        # it's an instance method (or unbound method on py2)
        if not args:
            return False
        args = args[1:]
    if not args:
        return False

    if len(args) == 1:
        return True

    defaults = argspec[3]
    if defaults is None:
        defaults = ()

    if args[0] == 'request':
        if len(args) - len(defaults) == 1:
            return True

    return False 
```

如果视图不接受上下文，则其余代码会调整代码路径以省略上下文。

# html - Twitter Bootstrap - 使井全宽

> ID：15314985
> 
> 赞同：0
> 
> 时间：2013-03-09T19:33:48.043
> 
> 标签：html, css, twitter-bootstrap

我目前正在玩引导程序，这是我迄今为止创建的： [网站](https://api.divshot.com/previews/8_gRps2xEf64GNmYIupg2mc4N6Ec0r3ihu97enst)

然而，

我希望 twitter bootstrap 的井组件与井一起关闭，井应该是全宽的。

到目前为止，我已经创建了一个容器：

```
<div class="container-fluid">
  <div class="well">Watch out:
    <a>Video!</a> 
  </div>
</div> 
```

如何创建封闭井？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T19:42:08.867

`<div class="container-fluid">`有 60 px 的上边距。`.well`只需将其减小到 40 像素，导航之间就没有间隙了。

为了`.hero-bar`排队添加`margin-top: -20px;`到`<div class="hero-unit">`

# matlab - 为什么MATLAB中的汉明距离聚类给出十进制质心？

> ID：15314990
> 
> 赞同：1
> 
> 时间：2013-03-09T19:34:07.643
> 
> 标签：matlab, cluster-computing, hamming-distance

```
 X=[1 0 1 0 0 1 1 1;
       0 0 0 1 1 0 1 0;
       1 1 0 1 0 1 0 1;
       1 0 1 0 1 0 1 0;
       0 0 0 0 1 1 1 0;  
       1 1 1 0 0 0 1 1;
       1 0 1 0 1 1 1 0;
       0 1 0 1 1 0 1 1];

    [IDX,C] = kmeans(X,3, 'distance', 'hamming') 
```

我想测试如何使用汉明距离对二进制数据进行聚类所以在上面的代码中，我随机分配了 X 一个二进制值矩阵。然而，问题是我的质心是十进制值。就像我在下面展示的那样。

```
C=
    1.0000    1.0000    1.0000         0         0    1.0000    1.0000    1.0000
         0    0.5000         0    1.0000    1.0000         0    1.0000    0.5000
    1.0000         0    0.5000         0    1.0000    1.0000    1.0000         0 
```

为什么答案中有 0.5？我希望质心也是二进制的。由于二进制数据，是否可以绘制没有重叠的集群？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T21:33:48.333

质[心](http://en.wikipedia.org/wiki/Centroids)是一个虚构的点（*虚构*的意思是它不一定是数据点之一），它是相应数据集群的几何中心。把它想象成它的“质心”。

质心经常落在集群中的点之间。因此，如果您的数据点是二进制的，则预计质心的坐标不会是整数。

如果您希望质心坐标也是二进制的，最简单的解决方案将涉及应用舍入函数，例如[round](http://www.mathworks.com/help/matlab/ref/round.html)、[ceil](http://www.mathworks.com/help/matlab/ref/ceil.html)、[floor](http://www.mathworks.com/help/matlab/ref/floor.html)或[fix](http://www.mathworks.com/help/matlab/ref/fix.html)。

# bash - 有条件地匹配字符串中的数字

> ID：15314992
> 
> 赞同：0
> 
> 时间：2013-03-09T19:34:21.680
> 
> 标签：bash, shell, awk, grep, pattern-matching

我有一串数字格式如下：

> 24_1_1_1_1_1_12_1_1_13_1_1

*下划线是空格*

我需要抓住 3 个数字。在这种情况下是第一个数字`24`，然后是以下两个之后的数字`1's`，在这种情况下它是一个`1`。然后再过两个`1's`就可以了`12`。我已经尝试了无数`sed`的解决方案来获得答案`awk`，`grep`但问题是所需的 3 个数字中的任何一个都可能是 1,2 或 3 位数字。

所以在这个例子中，我需要加粗的数字。

> **24** _1_1_ **1** _1_1_ **12** _1_1_13_1_1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T19:44:55.523

您可以将 $IFS 设置为`_`并将字符串拆分为数组：

```
#!/bin/bash
string=24_1_1_1_1_1_12_1_1_13_1_1
OIFS=$IFS
IFS=_
ar=($string)
IFS=$OIFS
echo ${ar[0]} ${ar[3]} ${ar[6]} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T19:50:51.153

将字符串拆分为一个数组，然后遍历该数组：

```
str="24_1_1_1_1_1_12_1_1_13_1_1"
IFS="_" read -ra numbers <<< "$str"
results=( ${numbers[0]} )
take_next=0
for n in "${numbers[@]:1}"; do
    if (( take_next == 2 )); then
        results+=( $n )
        take_next=0
    elif (( n == 1 )); then
        (( take_next++ ))
    else
        take_next=0
    fi
    (( ${#results[@]} == 3 )) && break
done 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T20:03:18.160

下面`awk`的单行如何打印第一个字段，然后是两个字段之后的每个字段：

```
$ awk 'NR==1||c==2{print;c=0;next}$1==1{c++}' RS=_ file
24
1
12
13 
```

如果您想在一定数量的匹配后退出*（例如 3）*：

```
$ awk 'NR==1||c==2{print;c=0;m++;next}$1==1{c++}m==3{exit}' RS=_ file
24
1
12 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T22:31:22.683

使用读取：

```
read a x x b x x c x <<< "$str" 
```

-

```
$ printf "%s\n" "$a" "$b" "$c"
24
1
12 
```

# ruby-on-rails - Ruby on rails：如何动态删除 Rails 关联？

> ID：15314993
> 
> 赞同：0
> 
> 时间：2013-03-09T19:34:21.713
> 
> 标签：ruby-on-rails, activerecord, find, associations

在进行特定搜索之前，我需要删除两个表之间的关系。

我有 2 个表：用户和项目。用户有很多项目。当 rails 搜索用户时，它也会搜索他的所有项目，但在此查询中，我不需要有关项目的信息。

在搜索 rails 仅获取用户之前，如何删除这种关系？

我目前正在使用以下查询：

```
User.where("username LIKE '%q%' ") 
```

提前致谢。

# actionscript-3 - 变量可以是区间（as3）吗？

> ID：15314995
> 
> 赞同：0
> 
> 时间：2013-03-09T19:34:23.913
> 
> 标签：actionscript-3, intervals

所以，我试图用变量创建一个无限循环，就像在某种程度上乒乓球一样，你击球，它会一次又一次地向后，向左，向右，向左，向右。它有效，但每次它都变得越来越快而且速度更快，我也知道为什么了每次都以相同的速度，而不是越来越快，有没有办法解决这个问题，或者如果有的话，你能建议一个替代方案吗？谢谢！

```
import flash.events.Event;

var badbee1right:uint = setInterval (beebad1right, 100);
function beebad1right():void {
    beebad1.x+=15;
}

var badbee1left:uint = setInterval (beebad1left, 100);
clearInterval(badbee1left);
function beebad1left():void {
    beebad1.x-=15;
}

leftbadbeewall.addEventListener(Event.ENTER_FRAME, leftbadbeewallhit);
function leftbadbeewallhit(e:Event) {
    if(beebad1.hitTestObject(leftbadbeewall)) {
        beebad1.x+=7;
        clearInterval(badbee1left);
        clearInterval(badbee1right);

    }
}

rightbadbeewall.addEventListener(Event.ENTER_FRAME, rightbadbeewallhit);
function rightbadbeewallhit(e:Event) {
    if(beebad1.hitTestObject(rightbadbeewall)) {
        clearInterval(badbee1right);
        bee.x-=7;
        clearInterval(badbee1left);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T19:48:36.943

该代码没有多大意义！2 frameHandlers 也总是一个坏主意。为什么不用布尔值检查并设置方向！？
像这样：（不是 testet）这个片段假设你在舞台上有实例 badbee1、leftbadbeewall 和 rightbadbeewall

```
var goingRight:Boolean = true;
var speed:uint = 15;
addEventListener(Event.ENTER_FRAME, enterFrame);

function enterFrame(e:Event):void{

    if(goingRight)
        badbee1.x += speed;
    else
        badbee1.x -= speed;

    if(beebad1.hitTestObject(leftbadbeewall))
        goingRight = true;

    if(beebad1.hitTestObject(rightbadbeewall))
        goingRight = false;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T20:35:45.763

提前计划 y 轴运动和 x 轴运动并不是一个坏主意。通过从您的 enterframe 方法调用 moveBee() 来尝试下面的代码。您必须为 _beeBounds 使用自己的值。玩弄 _beeDelta，这是 badbee 每帧移动的量。如果您达到左/右限制，代码将执行相同的操作 - 它将 x 增量乘以 -1 并将蜜蜂发送到相反的方向。这同样适用于 y 值。如果您不希望 y 轴运动，可以将 _beeDelta.y 设置为零。

```
private var _beeBounds:Rectangle = new Rectangle(0,0,100,100);
private var _beeDelta:Point = new Point(15,5);

private function moveBee():void{
  badbee.x += _beeDelta.x;
  badbee.y += _beeDelta.y;

  if(badBee.x > _beeBounds.right || badbee.x < _beeBounds.left){
    _beeDelta.x *= -1;
    badbee.x += _beeDelta.x; //optional correction. prevents badbee from being out of bounds for a frame.
  }
  if(badBee.y > _beeBounds.top || badbee.y < _beeBounds.bottom){
    _beeDelta.y *= -1;
    badbee.y += _beeDelta.y;
  }
} 
```