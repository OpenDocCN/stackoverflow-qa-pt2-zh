# StackOverflow 问答 15450000-15450999

# django - Django - 如何从自定义模板标签中检索对象？

> ID：15450003
> 
> 赞同：0
> 
> 时间：2013-03-16T13:44:38.827
> 
> 标签：django, django-templates, django-voting

我没有解决这个问题的线索。

我有一个接收对象的模板标签：

```
{% score_for_object OBJECT_HERE as score2 %} 
```

问题是我将来自原始选择的上下文传递给模板：

```
cursor = connection.cursor()
cursor.execute("select ...") 
comments = utils.dictfetchall(cursor) 
```

为了解决模板标签接受 Django 对象的问题，我写了一个模板标签：

```
'''
This template tag is used to transform a comment_id in an object to use in the django-voting app
'''
def retrive_comment_object(comment_id):
    from myapp.apps.comments.models import MPTTComment
    return MPTTComment.objects.get(id=comment_id) 
```

有了这个模板标签，我希望它可以工作：

```
{% for item in comments %}
    {% score_for_object item.comment_id|retrieve_comment_object as score2 %}

    {{ score2.score }} {# expected to work, but not working #}
{% endfor %} 
```

我的问题。可以从模板标签中检索对象吗？

此致，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T14:07:06.623

要获得分数：

```
from django import template
from myapp.apps.comments.models import MPTTComment

register = template.Library()

@register.simple_tag
def retrive_comment_object(comment_id):
    data = MPTTComment.objects.get(id=comment_id)
    return data.score

{% for item in comments %}
    Score: {% retrive_comment_object item.comment_id %}
{% endfor %} 
```

# c# - Response.Redirect 停止使用 IIS 7 重写规则

> ID：15450005
> 
> 赞同：2
> 
> 时间：2013-03-16T13:44:55.877
> 
> 标签：c#, asp.net, url-rewriting

我最近将一个网站迁移到运行 Windows Server 2008 并随后托管在 IIS 7 上的新服务器上。

我已经为页面实现了 URL 重写规则。这是一个例子。

```
 <rule name="RewriteUserFriendlyURL58" stopProcessing="true">
                    <match url="^(shop)/(item)/([^/]+)/([^/]+)/([^/]+)/?$" />
                    <conditions>
                        <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
                        <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
                    </conditions>
                    <action type="Rewrite" url="shopitem.aspx?{R:1}&amp;{R:2}&amp;id={R:3}&amp;cat={R:4}&amp;title={R:5}" />
               </rule> 
```

URL 应如下所示。[http://www.website.com/shop/item/10/products/table/](http://www.website.com/shop/item/10/products/table/)

该页面工作正常，除非我单击按钮并运行此事件。

```
protected void btnAddToBasket_Click(object sender, EventArgs e)
{
        Response.Redirect("~/shoppingbasket/");
} 
```

重定向的结果似乎是对自身进行重定向，然后 URL 更改为：[http ://www.website.com/shop/item/10/products/table/?shop&item&id=10&cat=products&title=table](http://www.website.com/shop/item/10/products/table/?shop&item&id=10&cat=products&title=table)

谁能指出我正确的方向？我已经为此做了一些搜索，但似乎找不到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T14:21:20.343

这看起来实际上是“哦，射击，我错过了！” 我们都有的问题类型:)。

```
<action type="Rewrite" url="shopitem.aspx?{R:1}&amp;{R:2}&amp;id={R:3}&amp;cat={R:4}&amp;title={R:5}" /> 
```

您正在专门调用重写。将其更改为 Redirect，我相信它会按您的预期执行。

值得注意的是，在事件中使用重定向和重写在 IIS 中可能会发生冲突。您可能想要选择其中一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:30:04.483

[我在这里](http://blogs.iis.net/ruslany/archive/2008/10/23/asp-net-postbacks-and-url-rewriting.aspx)使用以下教程回答了这个问题。

我将以下代码放在 Page_Load 事件的顶部。

```
if (!String.IsNullOrEmpty(Request.ServerVariables["HTTP_X_ORIGINAL_URL"])) 
{ 
     Form.Action = Request.ServerVariables["HTTP_X_ORIGINAL_URL"]; 
} 
```

并且页面现在按预期工作。

# null - 如何在 MVC 中下载使用 COM 创建的 Excel 对象？

> ID：15450006
> 
> 赞同：0
> 
> 时间：2013-03-16T13:45:09.303
> 
> 标签：null, private, worksheet, excel

我创建了这个 COM 对象：

```
using Microsoft.Office.Interop.Excel;

 private Application app = null;
 private Workbook workbook = null;
 private Worksheet worksheet = null;

        worksheet.Cells[1, 1] = "title ";

        worksheet.Cells[2, 1] = "row 1 header";
        worksheet.Cells[2, 2] = "row 1 header";
        worksheet.Cells[2, 3] = "row 1 header";
        worksheet.Cells[2, 4] = "row 1 header";

        var i = 2;
        foreach (var vm in model)
        {

            worksheet.Cells[i, 1] = "value";
            worksheet.Cells[i, 2] = "value";
            worksheet.Cells[i, 3] = "value";
            worksheet.Cells[i, 4] = "value";

            i++;
        } 
```

现在我有了这个 Excel.Application 对象，如何将它发送到浏览器以便用户下载它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T17:23:20.377

在工作簿中插入工作表后，您可以将工作簿和 response.redirect 保存到命运路径。

...

```
workbook.SaveAs(@"~/YourPathName/ExcelFileName.xls",
                        Microsoft.Office.Interop.Excel.XlFileFormat.xlAddIn8,
                        Type.Missing,
                        Type.Missing,
                        Type.Missing,
                        Type.Missing,
                        Microsoft.Office.Interop.Excel.XlSaveAsAccessMode.xlNoChange,
                        Type.Missing,
                        Type.Missing,
                        Type.Missing,
                        Type.Missing,
                        Type.Missing); 
```

...

```
System.Web.HttpApplication htt = System.Web.HttpContext.Current.ApplicationInstance;

htt.Response.Redirect(@"~/YourPathName/ExcelFileName.xls"); 
```

# openerp - 一个模块字段用于 openerp 中的其他模块

> ID：15450008
> 
> 赞同：1
> 
> 时间：2013-03-16T13:45:21.210
> 
> 标签：openerp

我创建了一个字段名称“机会链接”：- 模块：- hr.applicant 字段类型：- many2many 对象关系：- crm.lead

我在 crm.lead 模块中使用过。

现在我想在“hr.recruitment”中使用这个字段。但我尝试了很多方法但没有成功。请告诉我。如何在其他模块中使用此字段，例如 crm.lead 到 hr.recruitment

谢谢你的时间。

我使用的这段代码：-

```
 'sale_o_ids' : fields.related('job_id', 'x_link_to_jobposition',
                                   readonly=True,
                                   relation='crm.lead',
                                   string='Opportunity Name'), 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T06:24:50.030

这是示例：

多对多

```
class hr_job(osv.osv):
    _inherit = 'hr.job'
    _columns = {
        'sale_ids': fields.many2many('sale.order', 'hr_job_sale_order_rel', 'job_id', 'sale_id', 'Sale order'),
    }

hr_job() 
```

这里创建了 sales.order 的 many2many 字段

现在我想使用 hr.employee 中的 hr.job 字段。

```
class hr_employee(osv.osv):
    _inherit = "hr.employee"
    def _get_sale_order(self, cr, uid, ids, field_name, arg, context=None):
        if context is None:
            context = {}
        result = {}
        list_o = []
        for order in self.browse(cr, uid, ids, context=context):
            for i in order.job_id.sale_ids:
               list_o.append(i.id)
        result[order.id] = list_o
        return result
_columns = {
   'sale_order_ids': fields.function(_get_sale_order, type='many2many', relation="sale.order", string="Sale Orders"),
}

hr_employee() 
```

因此，当您在 hr.job many2many 字段中更新时，它的更新值会显示在 hr.employee 对象中，而在工作中选择此工作

您可以使用相关的另一种方法

```
'sale_o_ids' : fields.related('job_id', 'sale_ids',
                                       type='many2many',
                                       readonly=True,
                                       relation='sale.order',
                                       string='Available Sale Order'), 
```

希望这件事对你清楚

# css - 使用伪元素隐藏机器人的电子邮件地址？

> ID：15450009
> 
> 赞同：3
> 
> 时间：2013-03-16T13:45:29.323
> 
> 标签：css, web-scraping, pseudo-element, steganography, css-content

伪元素不是 DOM 的一部分。它们不能被 javascript 定位，并且它们对用户可见。

如果我想用我的电子邮件地址（或我不想被自动抓取的任何其他信息）实现一个站点，但不希望它对机器人可见，我可以不简单地做：

```
<style>
.email-point::after {
    content: "cris@domain.com"
}
</style>
<span class="email-point">Email:</span> 
```

对我来说，这是一种非常诡异且万无一失的向机器人隐藏内容的方法。它是如何失败的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T13:49:11.553

用户不能单击电子邮件地址作为向您发送电子邮件的链接。如果您可以接受，那么该解决方案应该可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T13:50:01.640

我认为机器人也可能会扫描`css`，并通过 a 找到电子邮件`regex`，因此您可能会尝试将电子邮件分成几部分，例如

```
<span class="cris email">@</span>

.cris.email::before{
    content: "cris"
}
.email::after {
    content: "domain.com"
} 
```

但请注意，这是一个 UX-sin，因为最终**用户将无法复制地址并将被迫输入**

# vim - 阻止 vim 函数中的替换泄漏到所有替换的历史记录中

> ID：15450010
> 
> 赞同：2
> 
> 时间：2013-03-16T13:45:31.570
> 
> 标签：vim

我在 vim 中设置了一个预缓冲区写入挂钩，在将缓冲区的内容保存到文件之前进行一些小的调整。

```
if !exists("autocommands_loaded")
    let autocommands_loaded = 1
    autocmd BufWritePre *.php call TidyUpFormatting()
endif

func! TidyUpFormatting()
    let save_cursor = getpos('.')
    %s/\s\+$//ge
    %s/\($\n\s*\)\+\%$//ge
    %s/var_dump /var_dump/ge 
    %s/){/) {/ge
    %s/( /(/ge
    %s/if(/if (/ge
    %s/while(/while (/ge
    call setpos('.', save_cursor)
endfunction 
```

这是在我的 ftplugin/php.vim 文件中。虽然我注意到 TidyUpFormatting 中的这些替换显示在所有替换的历史记录中 - 例如，如果我向上滚动浏览我手动完成的替换列表，它们就在那里。

有没有我可以使用的标志，或者确实有更好的方法来做到这一点，这样这些替换就不会“泄露”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T16:03:29.717

Search patterns from `:substitution` inside a function indeed do pollute the search history (*once* for an entire function, not for every `:s`). You can remedy this by adding this at the end of the function:

```
:call histdel('search', -1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T15:03:47.823

我需要在替换命令前加上“silent”命令，将 TidyUpFormatting 函数更改为：

```
func! TidyUpFormatting()
    let save_cursor = getpos('.')
    silent! %s/\s\+$//ge
    silent! %s/\($\n\s*\)\+\%$//ge
    silent! %s/var_dump /var_dump/ge 
    silent! %s/){/) {/ge
    silent! %s/( /(/ge
    silent! %s/if(/if (/ge
    silent! %s/while(/while (/ge
    call setpos('.', save_cursor)
endfunction 
```

# css - 从自定义组件中获取 CSS 样式值

> ID：15450014
> 
> 赞同：0
> 
> 时间：2013-03-16T13:46:07.380
> 
> 标签：css, actionscript-3, apache-flex, flex4.5, flex4.6

我有一个风格：

```
.rating{
      fontSize:24;
} 
```

和一个 s|Graphic 类型的自定义 MXML 组件。如何从 actionscript 中的组件获取 fontSize 值？

我试过：

```
public var fff:String = getStyle("fontSize"); //undefined (runtime error)
public var fff2:String = this.getStyle("fontSize"); // undefined (compile time error) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T13:33:28.310

查看此页面以获取更多信息。

[http://livedocs.adobe.com/flex/3/html/help.html?content=styles_08.html](http://livedocs.adobe.com/flex/3/html/help.html?content=styles_08.html)

`somevar = this.getStyle("fontSize");`添加初始化函数

# web-services - 实现 RESTful 服务并在服务中使用 xml 并将其映射到 bean 类

> ID：15450016
> 
> 赞同：0
> 
> 时间：2013-03-16T13:46:25.280
> 
> 标签：web-services, rest, resteasy, restful-authentication, restful-architecture

谁能解释一下如何实现RESTful服务并在xml中发布数据并在服务中使用xml并将其映射到java bean类？如果能发个例子就更好了。我已经尝试使用 json 对象使用这个 [http://www.mkyong.com/webservices/jax-rs/restful-java-client-with-resteasy-client-framework/](http://www.mkyong.com/webservices/jax-rs/restful-java-client-with-resteasy-client-framework/) 但无法使用 xml

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T22:19:58.430

添加到您的 REST 方法：

`@Consumes("application/xml")`和`@Produces("application/xml")`。您的方法将使用/生成 XML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T16:40:32.647

您尝试 json 示例的同一站点还提供了[RESTEasy + JAXB 示例](http://www.mkyong.com/webservices/jax-rs/download-xml-file-from-jax-rs-with-jaxb-resteasy/)。希望这可以帮助。

# mysql - 如果我的复合索引是唯一的，我是否需要主键？

> ID：15450021
> 
> 赞同：1
> 
> 时间：2013-03-16T13:47:38.470
> 
> 标签：mysql, database, indexing, innodb

如果我的复合索引是唯一的，我是否需要主键？然后我应该将我的复合索引分配为主键吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T13:56:37.303

这取决于情况。

通常一个主键总是在表上创建一个聚集索引。

其他键（如唯一键和复合索引）在表上创建非聚集索引。

您可以将复合索引分配为主键，只要它们形成表中行的唯一标识。

建议在 Web 应用程序中使用基于数字单字段的主键，以获得更好的应用程序层性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T13:51:22.390

是的，您可以将索引分配为主键。但这取决于您的需要。

# python - Python itertools.groupby 多个值

> ID：15450022
> 
> 赞同：1
> 
> 时间：2013-03-16T13:47:39.553
> 
> 标签：python

我有从如下所示的数据库返回的记录：

```
region       month_taken         total_att num_classes
Colorado    2013-01-01 00:00:00.000 78485   4648
Colorado    2013-02-01 00:00:00.000 71769   4162
Midwest     2013-01-01 00:00:00.000 110508  7101
Midwest     2013-02-01 00:00:00.000 103545  6410 
```

我正在尝试将它们放入列表中：

Total_att:

```
[{"data": [78485, 71769], "name": "Colorado"}, {"data": [110508, 103545], "name": "Midwest"}] 
```

类数：

```
[{"data": [4648, 4162], "name": "Colorado"}, {"data": [7101, 6410], "name": "Midwest"}] 
```

我发现 itertools.groupby 可以满足我的要求，但是我很难使用多个值列表（因为没有更好的术语）。

```
totalResults = []            
for key, location in groupby(rows, lambda k: k[0]):
    totalRow = dict()
    totalRow['name'] = key
    totalRow['data'] = [x[2] for x in location]
    totalResults.append(totalRow) 
```

太好了，这让我得到了我的 total_att 列表，但是我做了一个额外的 groupby 循环来创建“num_classes”列表，这看起来很荒谬。我在文档中看到了这一点，但老实说，如果我将其转换为列表，我不太确定它的含义或如何处理我的问题：

`The returned group is itself an iterator that shares the underlying iterable with groupby(). Because the source is shared, when the groupby() object is advanced, the previous group is no longer visible. So, if that data is needed later, it should be stored as a list:`

那么，我怎样才能创建我的列表，而无需在 groupby(rows, lambda k: k[0]): 中为 key 和 location 执行多个操作？

我希望这很清楚，但我很乐意在必要时提供更多信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T13:54:35.830

```
totalResults = [] 
totalClasses = []           
for key, location in groupby(rows, lambda k: k[0]):
    location = list(location)
    totalResults.append(dict(name=key, data=[x[2] for x in location]))
    totalClasses.append(dict(name=key, data=[x[3] for x in location])) 
```

# c++ - C++11 中的静态导入（例如枚举类）

> ID：15450029
> 
> 赞同：5
> 
> 时间：2013-03-16T13:48:02.453
> 
> 标签：c++, c++11, enums, enum-class

我对枚举类（VS2012）的使用：

```
class matrix {
public:
    enum class operation_type {ADD, MULT};
    matrix(operation_type op);
...
} 
```

在我使用的另一个片段中

```
matrix* m = new matrix(matrix::operation_type::ADD); 
```

如果名称很长，这会变得非常混乱。

**是否可以以某种方式导入枚举值**以便我可以编写：

```
matrix* m = new matrix(ADD); 
```

嵌套类也一样——我可以导入它们吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T13:54:52.103

**不**，这是不可能的。

您不能省略该`operation_type`部分，因为您已将其*设为范围*枚举（这就是范围枚举的全部内容）。如果你想避免它，你必须使它成为一个无范围的`enum`（删除`class`关键字）。

此外，`matrix`您无法通过`using`声明导入成员名称，就像`matrix`命名空间一样。此外，根据 C++11 标准的第 7.3.3/7 段：

> using-declaration 不应命名作用域枚举器。

# java - 如何在 WebSocket 中模仿 Facebook 的“点赞”功能

> ID：15450034
> 
> 赞同：0
> 
> 时间：2013-03-16T13:48:22.747
> 
> 标签：java, facebook, websocket, atmosphere

我开发了一个概念验证应用程序，它使用 WebSocket 来模仿 Facebook 的功能。

如果在 Facebook 上有人“喜欢”一张图片，我会立即在我的页面上看到通知，而无需我刷新页面。这是由 WebSocket 完成的吗？这是采用什么策略 - 发布/订阅？

我开发的应用程序是用 Java 编写的，我遇到了[Atmosphere Framework](https://github.com/Atmosphere/atmosphere#readme)。我不确定我应该从[GitHub 上的大量示例列表中](https://github.com/Atmosphere/atmosphere/tree/master/samples)查看哪个示例来完成我想要做的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T14:42:47.783

如果没有 Facebook API，我们将不得不找到某种方法：

在专用服务器上，由于您没有使用 Facebook API，我会使用自动刷新器，每隔一段时间刷新 Facebook 页面，并将喜欢的数量放入数据库中。然后，在您的网站上使用与服务器上的 PHP 文件通信的 AJAX。

# php - 用 preg_match 替换的 eregi 会返回错误

> ID：15450044
> 
> 赞同：0
> 
> 时间：2013-03-16T13:49:24.170
> 
> 标签：php, preg-match

我对 php 很陌生，所以请原谅我的知识不足，但我正在使用电子邮件表单让用户在我的网页上注册，但运行它时遇到错误。

完整的脚本如下：

```
<?php
if(isset($_POST['email'])) {

    // EDIT THE 2 LINES BELOW AS REQUIRED
    $email_to = "contact@slapmybeat.com";
    $email_subject = "New e-mail subscriber";

    function died($error) {
        // your error code can go here
        echo "We are very sorry, but there were error(s) found with the form your submitted. ";
        echo "These errors appear below.<br /><br />";
        echo $error."<br /><br />";
        echo "Please go back and fix these errors.<br /><br />";
        die();
    }

    // validation expected data exists
    if
        (!isset($_POST['email'])) {
        died('We are sorry, but there appears to be a problem with the email your submitted.');     
    }

    $email_from = $_POST['email']; // required

    $error_message = "";
    $email_exp = "/^[A-Z0-9._%-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/";
    if(!preg_match($email_exp,$email_from)) {
    $error_message .= 'The Email Address you entered does not appear to be valid.<br />';
  }

  if(strlen($error_message) > 0) {
    died($error_message);
  }
    $email_message = "Form details below.\n\n";

    function clean_string($string) {
      $bad = array("content-type","bcc:","to:","cc:","href");
      return str_replace($bad,"",$string);
    }

    $email_message .= "Email: ".clean_string($email_from)."\n";

// create email headers
$headers = 'From: '.$email_from."\r\n".
'Reply-To: '.$email_from."\r\n" .
'X-Mailer: PHP/' . phpversion();
@mail($email_to, $email_subject, $email_message, $headers);  
?>

<!-- include your own success html here -->

Thank you for contacting us. We will be in touch with you very soon.

<?
}
?> 
```

首先，由于初始脚本如下所示，我遇到了“eregi depreciated”错误：

```
 $error_message = "";
    $email_exp = "^[A-Z0-9._%-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$";
  if(!eregi($email_exp,$email_from)) {
    $error_message .= 'The Email Address you entered does not appear to be valid.<br />';
  } 
```

谷歌搜索后，我将其替换为：

```
 $error_message = "";
    $email_exp = "/^[A-Z0-9._%-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/";
    if(!preg_match($email_exp,$email_from)) {
    $error_message .= 'The Email Address you entered does not appear to be valid.<br />';
  } 
```

但现在它给了我以下信息，尽管电子邮件地址是正确的：

> 非常抱歉，您提交的表单存在错误。这些错误出现在下面。
> 
> 您输入的电子邮件地址似乎无效。
> 
> 请返回并修复这些错误。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T13:55:24.850

`eregi`不区分大小写，`preg_match`不是。

您必须添加`i`到模式 ( `/..../i`) 的末尾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T14:04:02.070

Not a direct answer, but if you want to check for a valid e-mail address, it is a lot easier to use php's built-in [filters](http://www.php.net/manual/en/function.filter-var.php):

```
$email = filter_var($email_from, FILTER_VALIDATE_EMAIL); 
```

Now `$email` will contain the filtered e-mail address or `false` if the filter failed (not a valid address in this case).

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-16T15:03:28.773

You should escape the "." inside the [] because it will match every character if you don't do it, you'll have:

```
"/^[A-Z0-9\._%-]+@[A-Z0-9\.-]+\.[A-Z]{2,4}$/i" 
```

# matlab - fspecial 的 sobel 掩码是否找到水平或垂直边缘？

> ID：15450053
> 
> 赞同：1
> 
> 时间：2013-03-16T13:50:24.943
> 
> 标签：matlab, image-processing, edge-detection

所以我在 Matlab 中做了这样的事情：

```
s = fspecial('sobel');
imshow(conv2(image, s)); 
```

在matlab中，当我创建一个sobel掩码`fspecial`并在图像上使用该掩码时`conv2`，卷积图像中的边缘是*水平边缘还是垂直*边缘，还是已经添加了水平边缘和垂直边缘？那么对角线边缘呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T15:33:40.037

文件[`fspecial`](http://www.mathworks.com/help/images/ref/fspecial.html)告诉我们

> h = fspecial('sobel') 返回一个 3×3 过滤器 h（如下所示），它通过近似垂直梯度使用平滑效果强调水平边缘。如果您需要强调垂直边缘，请转置过滤器

要转置过滤器，请使用

```
hvert = ( fspecial('sobel') )' 
```

[Sobel 滤波器](http://en.wikipedia.org/wiki/Sobel_operator)基本上是一个平滑导数算子。通过检测水平和垂直边缘，您基本上检索到图像梯度的 Sobel 近似值，这也为您提供了对角线边缘。

要真正强调边缘而不担心其方向，请使用此梯度的大小：

```
hy = fspecial('sobel');
hx = hy';
gx = imfilter(image, hx); % x component of Sobel gradient
gy = imfilter(image, hy); % y component 

gmag = hypot(gx,gy); % magnitude of Sobel gradient 
```

# java - 正则表达式 - 匹配一个单词

> ID：15450054
> 
> 赞同：0
> 
> 时间：2013-03-16T13:50:26.093
> 
> 标签：java, regex

我想创建一个匹配字符串中的单词的正则表达式：

> 米特920

我想匹配“Miete”这个词。

我的正则表达式：

```
price.matches("=[\bMiete\b]") 
```

然而，它不起作用？请给我一个提示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T13:52:50.110

如果您想检查某个字符串是否包含单独的单词`Miete`，您可以使用

```
price.matches(".*\\bMiete\\b.*"); 
```

`=`您的正则表达式中不需要，[字符类](http://www.regular-expressions.info/charclass.html)`[...]`也不是字符串文字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T13:52:10.030

我认为你的正则表达式是错误的。尝试

```
price.matches(".*\\bMiete\\b.*") 
```

`.*`-> 0 个或更多 `\\b`字符 -> 单词边界

所以这将匹配任何*Miete*被单词边界包围的字符串。

编辑：抱歉已修复，我忘记了 Java 中的匹配是如何工作的，我更习惯于 Perl :)

# android - 未能拉选空

> ID：15450055
> 
> 赞同：-1
> 
> 时间：2013-03-16T13:50:31.513
> 
> 标签：android, eclipse, sqlite, ddms

当我尝试将我的数据库保存在桌面上以使用 SQLite 浏览器对其进行编辑时，我会这样做

在文件资源管理器选项卡中，您将遵循以下路径：

数据 > 数据 > 我的包名 > 数据库 > 我的数据库文件。

我选择文件，单击软盘图标，然后我在控制台中有此错误，

```
failed to pull selection 
null 
```

我的方法：

```
public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.creeruncompte);
            db=openOrCreateDatabase("DBProjet",MODE_PRIVATE, null);
            db.execSQL("CREATE TABLE IF NOT EXISTS Client ( _id integer primary key, NomClient VARCHAR,PrenomClient VARCHAR,Email VARCHAR,MotPasse VARCHAR);");
            db.execSQL("CREATE TABLE IF NOT EXISTS PointVisite ( _idp integer primary key , NomPoint VARCHAR,Adresse VARCHAR,Info VARCHAR,Commentaire VARCHAR);");

        } 
```

我谷歌它并找到一些[如何修复它](https://stackoverflow.com/questions/9182190/failed-to-pull-selection) 和其他但没有任何工作

你能帮助我吗

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-04-13T22:32:17.710

只需从左侧面板重新选择设备即可解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T13:17:18.180

这只是我的一次糟糕的经历，对不起，我只是重新启动我的电脑，它已经好了

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-26T07:49:51.960

您需要做的就是重新启动您的adb。打开命令提示符并执行此操作。

`adb kill-server adb start-server`

# ruby - Zurb Foundation + Bundler 设置依赖项

> ID：15450057
> 
> 赞同：3
> 
> 时间：2013-03-16T13:50:46.507
> 
> 标签：ruby, rubygems, bundler, zurb-foundation

按照[这些](http://foundation.zurb.com/docs/sass.html#multiple-versions)使用 Bundler 运行多个版本的 Foundation 的说明，我能够创建一个具有以下依赖项的新项目`3.2.5`

这是我的 Gemfile：

```
source "https://rubygems.org"
gem "zurb-foundation", "3.2.5"
gem "compass" 
```

然后我跑了`bundle exec compass create . -r zurb-foundation --using foundation`，它创建了我的 Gemfile.lock 文件：

```
GEM
  remote: https://rubygems.org/
  specs:
    chunky_png (1.2.7)
    compass (0.12.2)
      chunky_png (~> 1.2)
      fssm (>= 0.2.7)
      sass (~> 3.1)
    fssm (0.2.9)
    modular-scale (1.0.6)
      compass (>= 0.12.1)
      sass (>= 3.2.0)
      sassy-math (>= 1.5)
    rake (10.0.3)
    sass (3.2.5)
    sassy-math (1.5)
      compass (~> 0.11)
    zurb-foundation (3.2.5)
      compass (>= 0.12.2)
      modular-scale (= 1.0.6)
      rake
      sass (>= 3.2.0)

PLATFORMS
  ruby

DEPENDENCIES
  compass
  zurb-foundation (= 3.2.5) 
```

但是 - 在尝试编译（使用 Codekit）之后，我得到以下信息：

```
Compass was unable to compile one or more files in the project: 

    error app.scss (Line 1 of _settings.scss: File to import not found or unreadable: foundation/common/ratios.
Load paths:
  /Users/chester/Sites/f3.2.5test/sass
  /Library/Ruby/Gems/1.8/gems/compass-0.12.2/frameworks/blueprint/stylesheets
  /Library/Ruby/Gems/1.8/gems/compass-0.12.2/frameworks/compass/stylesheets
  /Library/Ruby/Gems/1.8/gems/zurb-foundation-4.0.5/scss
  Compass::SpriteImporter)
overwrite app.css 

(This action was triggered by a change to _settings.scss) 
```

从它的外观来看，它仍在试图从`4.0.5`. 顺便说一句，我在尝试升级 Foundation 时收到了这个：

```
sudo gem update zurb-foundation
Updating installed gems
Updating zurb-foundation
Fetching: zurb-foundation-4.0.5.gem (100%)
Successfully installed zurb-foundation-4.0.5
Installing RDoc documentation for zurb-foundation-4.0.5
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rdoc/rdoc.rb:280: warning: conflicting chdir during another chdir block
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rdoc/rdoc.rb:287: warning: conflicting chdir during another chdir block
Installing ri documentation for zurb-foundation-4.0.5
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rdoc/rdoc.rb:280: warning: conflicting chdir during another chdir block
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rdoc/rdoc.rb:287: warning: conflicting chdir during another chdir block
Done installing documentation for zurb-foundation after 0 seconds
Gems updated: zurb-foundation 
```

但实际文件看起来安装得很好`gem list`

```
bundler (1.3.2)
chunky_png (1.2.7)
compass (0.12.2)
fssm (0.2.10, 0.2.9)
modular-scale (1.0.6)
rake (10.0.3)
rubygems-update (2.0.2, 1.8.24)
sass (3.2.7, 3.2.5)
sassy-math (1.5)
zurb-foundation (4.0.5, 3.2.5, 3.2.4) 
```

我可以很好地创建/使用 F4 项目，但由于某种原因，任何 F3 项目看起来仍在引用 F4（并出现那些不可读的错误）。任何帮助将不胜感激。谢谢！

## 更新

这似乎是一个 Codekit 问题——因为使用该标准`bundle exec compass watch`似乎工作得很好。开发人员尚未回复我对此提出的问题——因此“已经”能够完成这项工作的任何其他人都会让我每天分享他们的见解。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T20:35:32.810

固定的！写了[一篇关于它的文章](http://zslabs.com/articles/versioned-dependencies-with-compass)

# ruby - 如何有效地从哈希哈希中提取具有特定键名的所有值？

> ID：15450059
> 
> 赞同：3
> 
> 时间：2013-03-16T13:50:49.533
> 
> 标签：ruby, arrays, hash

我有这个数据：

```
members = {"total"=>3, "data"=>[
  {"email"=>"foo@example.org", "timestamp"=>"2013-03-16 01:11:01"},
  {"email"=>"bar@example.org", "timestamp"=>"2013-03-16 02:07:30"},
  {"email"=>"exx@example.org", "timestamp"=>"2013-03-16 03:06:24"}
]} 
```

并想生成一个数组，如：

```
["foo@example.org", "bar@example.org", "exx@example.org"] 
```

目前我正在使用：

```
members['data'].collect { |h| h['email'] } 
```

1.  在性能方面是否有更有效的方法来实现它？
2.  有没有更短的方法来实现它？

我有可用的 Rails。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T14:15:00.783

除了其他答案之外，我将添加如果您能够构建`Hash`using `symbols`，因为`keys`您`performance`在收集值时可以获得收益，例如：

```
require 'benchmark'

members_without_sym = {"total"=>3, "data"=>[
  {"email"=>"foo@example.org", "timestamp"=>"2013-03-16 01:11:01"},
  {"email"=>"bar@example.org", "timestamp"=>"2013-03-16 02:07:30"},
  {"email"=>"exx@example.org", "timestamp"=>"2013-03-16 03:06:24"}
]}

members_with_sym = {:total=>3, :data=>[
  {:email=> "foo@example.org", :timestamp => "2013-03-16 01:11:01"},
  {:email=> "bar@example.org", :timestamp => "2013-03-16 02:07:30"},
  {:email=> "exx@example.org", :timestamp=> "2013-03-16 03:06:24"}
]}

Benchmark.bm(1) do |algo|
  algo.report("Without symbol"){
    2_000_000.times do 
       members_without_sym['data'].collect { |h| h['email'] }
    end   
  }
  algo.report("With symbol"){
    2_000_000.times do 
      members_with_sym[:data].collect { |h| h[:email] }      
    end
  }
end 
```

结果：

```
 user     system      total        real
Without symbol  2.260000   0.000000   2.260000 (  2.254277)
With symbol  0.880000   0.000000   0.880000 (  0.878603) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T13:57:20.250

除了将`h['email']`部分优化为原生扩展之外，我看不出如何使上述示例更高效。这样做的效率增益对于数据集的示例大小来说是很小的，并且比我怀疑的首先优化获取/解析这些数据的 I/O 少得多。

根据您的数据源，将哈希键作为标签而不是字符串是一种常见的 Ruby 习惯用法，并且在内存使用方面也更有效。这可能会提高效率，如果您不必花费大量精力来转换数据，这可能是值得的（例如，您可以以某种方式从数据源更改给定数据结构的性质，无需转换哈希即可查询一次！）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-16T14:02:11.623

```
members = {"total"=>3, "data"=>[
  {"email"=>"foo@example.org", "timestamp"=>"2013-03-16 01:11:01"},
  {"email"=>"bar@example.org", "timestamp"=>"2013-03-16 02:07:30"},
  {"email"=>"exx@example.org", "timestamp"=>"2013-03-16 03:06:24"}
]}

temp = members["data"].map{|x|x["email"]} 
```

给你 ["foo@example.org", "bar@example.org", "exx@example.org"]

[Ruby中地图和收集之间的区别？](https://stackoverflow.com/questions/5254732/ruby-difference-between-map-and-collect)

--

也许结构会提高性能

```
Record = Struct.new(:email, :timestamp)
members = {"total"=>3, "data"=>[
  Record.new("foo@example.org","2013-03-16 01:11:01"),
  Record.new("bar@example.org","2013-03-16 02:07:30"),
  Record.new("exx@example.org","2013-03-16 03:06:24")
]}

temp = members["data"].map(&:email) 
```

[http://blog.rubybestpractices.com/posts/rklemme/017-Struct.html](http://blog.rubybestpractices.com/posts/rklemme/017-Struct.html)

# python - Django 'function' 对象没有属性 'objects'

> ID：15450060
> 
> 赞同：13
> 
> 时间：2013-03-16T13:50:51.500
> 
> 标签：python, django

我的应用程序允许您喜欢一张图片，然后它将您重定向到同一页面

当我尝试喜欢一张图片时出现错误，我可以使用 shell 提示创建类似的对象，但为什么会出现此错误？谢谢你帮助我

```
AttributeError at /like/3/
function' object has no attribute 'objects'Request Method: GET 
Request URL: http://127.0.0.1:8000/like/3/ 

Exception Value: 'function' object has no attribute 'objects' 
Traceback:
File "C:\Python26\Lib\site-packages\django\core\handlers\base.py" in get_response
111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "C:\o\mysite\pet\views.py" in Like
195\.     new_like, created = Like.objects.get_or_create(user=request.user, picture_id=picture_id) 
```

这是我的views.py的一部分

```
def Like(request,picture_id):
    pid = picture_id
    new_like, created = Like.objects.get_or_create(user=request.user, picture_id=picture_id)
    p = Picture.objects.get(pk=pid)
    if created:
        HttpResponseRedirect(reverse('world:url_name'))
    else:
        HttpResponseRedirect(reverse('world:url_name')) 
```

我的网址配置：

```
 url( 
```

我的模型的一部分：r'^like/(?P\d+)/$', 'pet.views.Like', name = 'Like' ), Myboat.html

```
 {% if picture %}
 <ul>
    {% for pet in picture %}
    <li><b>description</b> = {{ pet.description}}<br/>
        {% if pet.image %}
 <li>
    <a href ="{% url world:Like pet.id %}">
        <img src= "{{ pet.image.url }}" style="cursor:pointer">
    </a>
 <li>
        {% endif %}
 {% endfor %}
 </ul>
 {% endif %}
 <a href="{% url world:PictureCreator %}">Add Pictures to your board</a><br/> 
```

我的模型.py

```
class Picture(models.Model):
    user = models.ForeignKey(User)
    board = models.ForeignKey(Board,blank=False,null=False)
    image = models.FileField(upload_to="images/",blank=True)
    description = models.TextField()
    is_primary = models.BooleanField(default=False)
    def __unicode__(self):
        return self.description

class Like(models.Model):
    user = models.ForeignKey(User)
    picture = models.ForeignKey(Picture)
    created = models.DateTimeField(auto_now_add=True) 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-16T14:04:00.157

您的视图函数名称被定义为`Like`并且您的模型被命名为`Like`

你定义`Like`为一个函数，所以当你去访问`Like.objects`python 时看不到你的模型`Like`，而是函数`Like`

你可以重命名你的视图功能

```
url(r'^like/(?P\d+)/$', 'pet.views.change_name_no_conflict', name = 'Like' )

def change_name_no_conflict(request,picture_id):
  pass 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-06-04T03:20:27.363

模型名称和视图名称不应相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-04T17:37:13.057

我在做的时候遇到了同样的错误

```
 from django.contrib.auth import get_user_model
 User = get_user_model 
```

添加（）解决了错误：

```
 from django.contrib.auth import get_user_model
 User = get_user_model() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-18T03:38:28.263

函数名和模型名确实取决于名称，函数名应该与url名称相同我们在urls.py中定义的url模型名取决于函数数据成员，其含义例如当我们从用户那里获取数据并保存在数据库中然后我们从其模型名称 ex= u_data = registration() 调用该对象，这用于用户数据 seve 并定义我们发送数据以保存的乐趣意味着目标 url 及其相关视图。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-18T19:43:12.163

这是因为你在 view.py 中的函数名和在 models.py 中的模型名是一样的。您可以更改功能名称或型号名称。

另一种解决方案是：

```
from .models import modelname as modelname2

def modelname(request):
    obj_list_ads = modelname2.objects.all() 
```

在此代码中，函数名称是*modelname*。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2020-04-02T22:27:15.980

定义对象：

```
objects = models.Manager() 
```

你的错误会解决！

# c - C - 是什么意思

> ID：15450061
> 
> 赞同：-1
> 
> 时间：2013-03-16T13:50:52.060
> 
> 标签：c, linux, visual-c++, gcc

今天我在阅读[herewritten code on specific lin时了解Linux Cross Platform的头文件](http://lxr.free-electrons.com/source/include/acpi/platform/acenv.h#L300)

```
#define _bnd(X, bnd)            (((sizeof (X)) + (bnd)) & (~(bnd))) 
```

我想知道 (~) 符号是做什么的。我在任何地方都没有找到任何关于这个角色的文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T13:52:23.150

运算符是按位非`~`运算符。这将使数字中的所有二进制一为零，所有零都将变为一。

您可以将`~`运算符视为反转二进制数的一种方式。例如，当您使用标志时，`~`操作员将关闭之前打开的所有标志，反之亦然。

在数学上，`~`运算符比数字的补码小一。

所以，使用一个具体的例子：

```
Let a = 1010 (binary)
Then ~a = 0101 (binary) 
```

# jquery - 使用 jquery Firefox v/s IE8 滚动

> ID：15450065
> 
> 赞同：0
> 
> 时间：2013-03-16T13:51:10.923
> 
> 标签：jquery, internet-explorer-8, scroll

我正在尝试基于页面滚动滚动元素。它在Firefox中工作正常。

```
 $(window).scroll(function () {
            var scrollOffset = $(this).scrollTop();
            if (scrollOffset >= ele) {
                $("#UserDataTable thead").css({ "position": "relative" });
                $("#UserDataTable thead").css({ "background-color": "white" });
                $("#UserDataTable thead").css('top', scrollOffset);
            }
            else {
                $("#UserDataTable thead").css({ "position": "" });
                $("#UserDataTable thead").css('top', ele);
            }
        }); 
```

// 这里的ele是我要移动的thead元素的初始偏移量。//

*jsfiddle 链接是：*

[http://jsfiddle.net/UnPAH/3/](http://jsfiddle.net/UnPAH/3/)

但这在 IE 8 中不起作用。

您能否告诉我在 IE8 中需要进行哪些更改才能使此代码正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:27:30.257

那个怎么样？

```
$(document).ready(function () {
    var ele = $("table thead").offset().top;
    $(window).scroll(function () {
        var cssProp = null,
            scrollOffset = $(this).scrollTop();
        if (scrollOffset >= ele) {
            cssProp = {
                "background-color": "white",
                'padding-top': scrollOffset
            };
        } else {
            cssProp = {
                'padding-top': ele
            }
        }
        $("table thead tr:eq(0) th").css(cssProp);
        // or $("... td").css(cssProp); what ever elements you're using there
    });
}); 
```

# javascript - AJAX 调用在 ASP.NET MV3 项目中返回内部服务器错误

> ID：15450070
> 
> 赞同：1
> 
> 时间：2013-03-16T13:51:36.380
> 
> 标签：javascript, ajax, asp.net-mvc

我是 ASP.NET、MVC3 和 AJAX 的新手。

我尝试使用 AJAX 调用在我的控制器中调用一个方法，但我收到一个内部服务器错误。

这是我的 Javascript 方法：

```
function DeleteItem(id) {
  var answer = confirm("Are you sure ?")
  if(answer) {
    $.ajax({
      type: 'POST',
      url: '/Item/Delete',
      data: id,
      dataType: 'json',
      success: function (data) {
        alert('Function called');
      },
      error: function (xhr, ajaxOptions, thrownError) {
        alert(xhr.status);
        alert(thrownError);
      }
    });
  }
} 
```

这是我在控制器中的方法：

```
public ActionResult Delete(int idItem) {
  Item.Delete(idItem); //delete my item
  return RedirectToAction("Index", "Item");
} 
```

调用了 Javascript 方法，但是当我回答“是的，我确定我要删除”时，我得到一个内部服务器错误，我不知道为什么。是什么导致服务器错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T14:12:34.997

我的猜测是您获得内部服务器的原因是因为您传入的 int 名称与您在控制器中期望的 int 名称不匹配。结果， idItem 很可能是 null ，这会导致您在删除时出现内部服务器错误。

更改数据以匹配

```
function DeleteItem(id) {
    var answer = confirm("Are you sure ?")
    if (answer) {
        $.ajax({
            type: 'POST',
            url: '/Item/Delete',
            data: { idItem: id},
            dataType: 'json',
            success: function (data) {
                alert('Function called');
            },
            error: function (xhr, ajaxOptions, thrownError) {
                    alert(xhr.status);
                    alert(thrownError);
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T13:57:45.527

您的 ActionResult 方法没有 [HttpPost] 属性。您的 Ajax 调用属于“POST”类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T14:00:51.377

也许您需要将`id`传递给操作的内容序列化为 JSON 格式。您还需要用`[HttpPost]`属性装饰您的操作方法，以便它接受 POST 动词。

# ebean - 玩框架 2.1 和 Ebean：@ManyToOne 和 @OneToMany，CRUD 和级联问题

> ID：15450071
> 
> 赞同：5
> 
> 时间：2013-03-16T13:51:36.507
> 
> 标签：ebean, playframework-2.1

我想实现的是：当我删除类别时，它的所有相关文章都可以删除，当我删除文章时，它也可以在它的相关类别中删除。

我设置了映射关系`@ManyToOne`，和`@OneToMany(cascade = CascadeType.ALL, mappedBy = " category")`下面的代码一样，但是我在做单元测试的时候，出现了几个问题，它不起作用。这是我的代码：

```
@Entity
public class Article extends Model {
    @Id
    public Long id;     

    @Constraints.Required       
    public String title;

    @Constraints.Required
    @Lob
    @Basic(fetch = FetchType.LAZY)
    public String content;

    public boolean published = false;

    @Formats.DateTime(pattern="yyyy-MM-dd")
    public Date publishDate;

    @ManyToMany(cascade = CascadeType.REMOVE)
    @Column(nullable = true)
    public List<Tag> tags = new ArrayList<Tag>();

    @ManyToOne
    @Column(nullable = true)
    public Category category;

    public static Finder<Long, Article> finder = new Finder<Long, Article>(Long.class, Article.class);

    public Article(String title, String content, Tag[] tags) {
        this.title = title;
        this.content = content;
        this.publishDate = new Date();
        this.category = null;
        if(tags != null)
            for(Tag t : tags)
                this.tags.add(t);
    }

    public static List<Article> all() {
        return finder.orderBy("publishDate desc").findList();
    }

    public static Article create(String title, String content, Tag[] tags) {
        Article article = new Article(title, content, tags);
        article.save();
        article.saveManyToManyAssociations("tags");
        return article;
    }

    public static void delete(Long id) {
        finder.ref(id).delete();
    }

    public static void setCategory(Article article, Category c) {
        if(article.category != null)
            Category.removeArticle(c, article);
        article.category = c;   
        Category.addArticle(c, article);
        article.update();
    }
} 
```

这是类别类：

```
@Entity
public class Category extends Model {
    @Id
    public Long id; 

    @Required
    public String name;

    @OneToMany(mappedBy = "category", cascade = CascadeType.ALL)
    Set<Article> articles;

    public static Finder<Long, Category> finder = new Finder<Long, Category>(Long.class, Category.class);

    public Category(String name) {
        this.name = name;
    }

    public static List<Category> all() {
         return finder.all();
    }

    public static Category create(String name) {
        Category category = new Category(name);
        category.articles = new HashSet<Article>();
        category.save();
        return category;
    }

    public static String rename(Long id, String newName) {
        Category category = finder.ref(id);
        category.name = newName;
        category.update();
        return newName;
    }

    public static void delete(Long id) {
        Category c = finder.ref(id);
        c.delete(); 
    }

    public static void addArticle(Category c, Article article) {
        if(! c.articles.contains(article)) {
            article.category = c;
            c.articles.add(article);
            article.update();
        }
    }

    public static void removeArticle(Category c, Article article) {
        if(c.articles.contains(article)) {
            Article.delete(article.id);
            c.articles.remove(article);
        }
    }

    public static Map<String,String> options() {
        LinkedHashMap<String,String> options = new LinkedHashMap<String,String>();
        for(Category c: Category.finder.orderBy("name asc").findList()) {
            options.put(c.id.toString(), c.name);
        }
        return options;
    }
} 
```

这是我的测试：

```
@Test
public void categoryTest() {
    Category c1 = Category.create("Play");
    Category c2 = Category.create("SSH");
    Category c3 = Category.create("Python");
    Category c4 = Category.create("web");

    String newName = Category.rename(c3.id, "Django");

    Category.delete(c2.id);

    List<Category> list = Category.all();
    assertEquals(3, list.size());

    Map<String, String> map = Category.options();

    Article a1 = Article.create("Hello", "Hello world, My Blog!", null);
    Article a2 = Article.create("My Blog", "It's build by play framework", null);
    Article a3 = Article.create("Play", "Install Play", null);

    Category.addArticle(c1, a1);
    Category.addArticle(c1, a2);
    Category.addArticle(c3, a3);

    Category.delete(c3.id);
    Category.removeArticle(c1, a1);

    assertEquals(2, list.size());
    assertEquals("Play", list.get(0).name);

    //assertEquals("Django", map.get("3"));
    assertEquals(1, Article.all().size());

    assertEquals(1, c1.articles.size());
    assertEquals(false, c1.articles.contains(a1));
} 
```

下面的资产不能通过。

```
assertEquals(2, list.size()); 
```

这意味着现在不能删除类别，但是

```
Category.delete(c2.id); 
```

作品！

```
assertEquals(1, Article.all().size()); 
```

以上资产不能通过。这意味着类别不能删除它的相关文章。我应该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-11T01:04:11.643

In above code there is only one assertion that do not pass. This is:

```
assertEquals(2, list.size()); 
```

Why it is happening?

Let's look at the following code:

```
List<Category> list = Category.all();
assertEquals(3, list.size());
Category.delete(c3.id);
assertEquals(2, list.size()); 
```

In first line we take all categories and there are three of them.
In third line we delete one of categories. This category is properly deleted but list of categories computed in first line has still three elements. This is because this list does not represent the current state of database. It still holds result computed in first line of above code.
To make second assertion work properly we have to add following line between line 3 and 4:

```
list = Category.all(); 
```

Above code will compute current list of categories and assign it to variable `list'.

# iphone - 数据保护开启：iOS 重启后standardUserdefaults 损坏

> ID：15450072
> 
> 赞同：1
> 
> 时间：2013-03-16T13:51:36.753
> 
> 标签：iphone, ios, objective-c, nsuserdefaults

更新 1：当 iOS 的数据保护（即密码锁定）关闭时，问题不会发生！

更新 2：禁用 ARC 时不会出现问题。

更新 3：在重新启动 iOS 之前杀死应用程序时不会发生问题。

我的 Settings 类使用 +initialize 实现了单例模式（加上代码以查看发生了什么）：

```
@implementation Settings

static Settings*        sharedSettings;
static NSUserDefaults*  userDefaults;

+ (void)initialize
{
    if ([Settings class] == self)
    {
        sharedSettings = [self new];
        userDefaults = [NSUserDefaults standardUserDefaults];

        // Code to see what's going on here ...
        if (userDefaults == nil)
        {
            [[[UIAlertView alloc] initWithTitle:@"userDefaults == nil"
                                        message:nil
                                       delegate:nil
                              cancelButtonTitle:@"Close"
                              otherButtonTitles:nil] show];
        }
        else
        {
            if ([userDefaults objectForKey:@"Hello"] == nil)
            {
                [[[UIAlertView alloc] initWithTitle:@"Hello == nil"
                                            message:nil
                                           delegate:nil
                                  cancelButtonTitle:@"Close"
                                  otherButtonTitles:nil] show];
            }
            else if ([userDefaults boolForKey:@"Hello"] == NO)
            {
                [[[UIAlertView alloc] initWithTitle:@"Hello == NO"
                                            message:nil
                                           delegate:nil
                                  cancelButtonTitle:@"Close"
                                  otherButtonTitles:nil] show];
            }

            [userDefaults setBool:YES forKey:@"Hello"];
            if ([userDefaults synchronize] == NO)
            {
                [[[UIAlertView alloc] initWithTitle:@"synchronize == NO"
                                            message:nil
                                           delegate:nil
                                  cancelButtonTitle:@"Close"
                                  otherButtonTitles:nil] show];
            }
        }
    }
}

+ (id)allocWithZone:(NSZone*)zone
{
    if (sharedSettings && [Settings class] == self)
    {
        [NSException raise:NSGenericException format:@"Duplicate Settings singleton creation"];
    }

    return [super allocWithZone:zone];
}

+ (Settings*)sharedSettings
{
    return sharedSettings;
}

@end 
```

我在我的 AppDeletate.m 中触发了这段代码（完全剥离）：

```
#import "AppDelegate.h"
#import "Settings.h"

@implementation AppDelegate

- (BOOL)application:(UIApplication*)application didFinishLaunchingWithOptions:(NSDictionary*)launchOptions
{
    [Settings        sharedSettings];

    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    [self.window makeKeyAndVisible];

    return YES;
}

@end 
```

现在非常奇怪的是，在重新启动 iOS 后立即运行这个空应用程序时，我会同时得到“同步 == NO”和“Hello == nil”弹出窗口。然后当我杀死该应用程序并再次运行它时，一切都很好。事实证明，当我使用 GCD 的 dispatch_after() 延迟 userDefaults = [NSUserDefaults standardUserDefaults] 和后续语句时（我做了 2 秒，但可能同样没问题），问题就消失了。有人可以告诉我为什么会这样，或者这只是一些极端情况下的 iOS 错误或副作用？？？

补充：事实证明，当我在重新启动 iOS 之前杀死应用程序时，这个问题就消失了。这对我来说证明了它是 iOS 中的东西。

谢谢收听！

科内利斯

ps：你可以相信我，我完全剥离了我的应用程序，只有三个模块：main.mm（标准XCode生成的单行代码）、AppDelegate.m（完整代码如上所示）和Settings.m（完整代码所示）以上）。所以根本没有其他代码在运行。当我进一步剥离它，只留下 AppDelegate.m 时，问题仍然存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T14:03:14.613

您不应该在`+initialize`. 没有关于它何时运行以及当时存在哪些其他类的承诺。`+initialize`应该只做内部对班级的工作。

自添加 GCD 以来，这种单例模式已被取代。您应该出于各种原因使用 GCD 模式，其中之一是它在您认为它运行时运行。

[如何实现与 ARC 兼容的 Objective-C 单例？](https://stackoverflow.com/questions/7568935/how-do-i-implement-an-objective-c-singleton-that-is-compatible-with-arc)

作为说明，我很好奇你的`main.mm`. 制作顶级 ObjC++ 几乎总是一个坏主意，并且可能导致一些令人惊讶的副作用。（ObjC++ 是一种古怪的胶水语言，具有许多奇怪的行为。您应该在尽可能少的类中使用它。）我个人会看看是否将其改回以`.m`解决问题，尽管我仍然推荐 GCD-Singleton 而不是使用`+initialize`.

# sql - Oracle - 使用 to_date，如何将 varchar 转换为今天的日期

> ID：15450073
> 
> 赞同：2
> 
> 时间：2013-03-16T13:51:38.473
> 
> 标签：sql, oracle10g

我有一张表，我将时间存储为 varchars：

```
Times
starttime
00:00
16:00
22:00 
```

从这个表中，我可以将列转换为这样的日期：

```
Select to_date(starttime,'hh24:mi') from times 
```

这给了我以下信息：

```
01/03/2013 00:00:00
01/03/2013 16:00:00
01/03/2013 22:00:00 
```

如何更改此查询，以便我可以在时间值前面加上今天的日期，以便得到以下内容：（2013 年 3 月 16 日是今天的日期）

```
16/03/2013 00:00:00
16/03/2013 16:00:00
16/03/2013 22:00:00 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T13:54:54.380

```
to_date(to_char(sysdate, 'dd.mm.yyyy')||' '||starttime, 'dd.mm.yyyy hh24:mi') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T13:57:51.593

您可以添加当前日期和月初之间的差异。当您坚持使用日期时，我更喜欢它而不是字符串操作，但这并没有太大区别。

您可以使用[TRUNC()](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions220.htm#SQLRF06151)来解决它：

```
select to_date('09:00','hh24:mi') + ( trunc(sysdate) - trunc(sysdate, 'mm'))
  from dual 
```

[**SQL小提琴**](http://www.sqlfiddle.com/#!4/d41d8/8850)

`trunc(sysdate)`最早是今天，`trunc(sysdate, 'mm')`也是月初。Oracle 的日期算术意味着它返回今天和月初之间的天差；为您提供您需要添加到原始 TO_DATE() 的差异。

# sql - 选择日期

> ID：15450078
> 
> 赞同：0
> 
> 时间：2013-03-16T13:52:13.137
> 
> 标签：sql, ms-access, subquery

在 Access 数据库中有两个表。

表一包含文章，表二包含价格。

所以文章是所有文章的描述，价格表只包含文章编号、日期和价格。如果价格发生变化，则会在价格中添加一个新行。

价格具有使用该价格的日期。

现在我想获取 2012 年 10 月 1 日有效的价格。我使用了对当前价格的查询并添加`and prsdat<#02/10/2012#` 到查询中的子选择中。

这是我已经拥有的：

```
SELECT 
    Articles.ARTNR, 
    Articles.TXT, 
    Articles.ACTIVE, 
    Prices.PRICE, 
    Prices.PRSGR, 
    Prices.PRSDAT
FROM 
    Articles INNER JOIN Prices ON Articles.ARTNR = Prices.ARTNR
WHERE 
    (((Articles.ACTIVE)="Y") AND 
    ((Prices.PRSGR)=0) AND 
    ((Prices.PRSDAT)=
        (SELECT 
            max(prsdat)  
        FROM 
            Prices as art 
        WHERE 
            art.artnr = Prices.artnr and prsdat<#02/10/2012#)))
ORDER BY 
    Articles.ARTNR; 
```

现在选择返回我以前使用的选择没有看到的文章，刚刚添加了`and prsdat<#01/10/2012#`. 结果现在是 430 篇文章，之前我只有大约 260 篇。

返回的价格较旧，但我不确定日期格式。在表中我看到 DD.MM.YYYY，在查询中我应该使用 MM/DD/YYYY 还是 DD/MM/YYYY？

这个选择的正确形式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T14:36:49.393

```
SELECT 
    a.ARTNR
    , a.TXT
    , a.ACTIVE -- dubious, since it is constant
    , p.PRICE
    , p.PRSGR  -- dubious, since it is constant
    , p.PRSDAT
FROM Articles a
INNER JOIN Prices p ON a.ARTNR = p.ARTNR
WHERE a.ACTIVE = 'Y' 
  AND p.PRSGR = 0 
  AND p.prsdat < #02/10/2012#
  AND NOT EXISTS (
      SELECT *   
      FROM Prices nx 
      WHERE nx.ARTNR = p.ARTNR
        AND nx.PRSGR = 0
        AND nx.prsdat < #02/10/2012#
        AND nx.prsdat > p.prsdat
          )
ORDER BY 
    Articles.ARTNR
   ; 
```

# python - 在 django admin 中更改外键小部件的大小

> ID：15450079
> 
> 赞同：2
> 
> 时间：2013-03-16T13:52:16.570
> 
> 标签：python, css, django, django-admin, django-grappelli

最近两天我一直在尝试这样做，但我无法弄清楚。我正在使用 grappelli，我已经尝试了几件事。

我尝试指定小部件：

```
class MyForm(ModelForm):
    class Meta:
        model = MyModel
        widgets = {
            'foreign_key': widgets.TextInput(attrs={'width': '200'}),
        } 
```

在这种情况下，它似乎被忽略了。

我还尝试使用`Media`定义添加 css。这已加载，但在我的浏览器中检查元素显示它已被 grappelli css 覆盖。

有没有一种我错过的简单方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T15:06:26.100

我会重新尝试使用媒体定义添加 css，但这一次，将 a`!important`添加到您的 css 属性中。

```
.widget input {
    width: 200px !important;
} 
```

来自[http://en.wikibooks.org/wiki/Cascading_Style_Sheets/Important](http://en.wikibooks.org/wiki/Cascading_Style_Sheets/Important)

> 重要关键字使声明优先于普通声明——那些没有用重要关键字标记的声明。所以“p { color: red !important }”优先于“p { color: green }”。

# c# - 自定义对话框：对象引用未设置为对象的实例

> ID：15450081
> 
> 赞同：3
> 
> 时间：2013-03-16T13:52:20.870
> 
> 标签：c#

我知道这是一个非常常见的错误——但是作为一个 C# 新手，我发现通过查看其他帖子很难找到问题的原因，因为问题很模糊并且可以应用于很多场景。因此，为什么我要开始自己的问题。希望通过这样做我可以更多地了解错误，所以我希望你们不要介意。

据我了解，当您尝试引用非静态对象时会发生此错误，就好像它是静态对象一样。我的想法是否正确？

我的问题是这样的：我正在尝试创建自己的自定义对话框（而不是使用标准的 winforms）。所以我有以下代码：

```
public partial class Dialog : Form
{
    public Dialog(string header, string msg, bool closeable, int buttons)
    {
        if (!closeable)
            btnX.Hide();
        if (header != null || header != String.Empty)
            lblHeader.Text = header;
        if (msg != null || msg != String.Empty)
            lblMessage.Text = msg;
        InitializeComponent(); //Problem is here, this should be at the top.
    }

    private void btnX_Click(object sender, EventArgs e)
    {
        Close();
    }
} 
```

我正在`Dialog`使用以下行调用此类：

```
Dialog dlg = new Dialog("HEADER", "HELLO", true, buttonChoice);
dlg.ShowDialog(); 
```

但我得到了`Object reference not set to an instance of an object`上线：

`lblHeader.Text = header;` （而且我想我也会在“消息”行中得到它）。

有人可以告诉我我在这里做错了什么吗？谢谢！

**更新答案**`InitializeComponent()`：在调用函数之前不应引用类中的对象。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-16T13:54:34.517

将`InitializeComponent()`调用移动到构造函数的开头。

`InitializeComponent`方法包含设计器生成的所有初始化逻辑，包括您正在使用的控件的初始化`btnX`和初始化。`lblHeader`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T14:00:50.910

我知道您已经有了答案，但只是补充一点：

> > 据我了解，当您尝试引用非静态对象时会发生此错误，就好像它是静态对象一样。我的想法是否正确？

并不真地。这仅仅意味着对象引用由于放错位置而尚未初始化`InitializeComponent()`。如果你用静态声明的变量尝试同样的事情，你会得到同样的事情。

如果您声明一个静态方法并尝试在该静态方法的上下文中访问成员，那么您会收到错误

> > 非静态字段、方法或属性“成员”需要对象引用

无论如何：Patko +1 :)

# facebook - Xamarin/monotouch 获取 Facebook 好友列表

> ID：15450083
> 
> 赞同：2
> 
> 时间：2013-03-16T13:52:29.563
> 
> 标签：facebook, facebook-graph-api, xamarin, xamarin.ios

我正在尝试使用 xamarin/monotouch 获取朋友列表。

这就是我所做的：

```
if (FBSession.ActiveSession.IsOpen) {
            FBRequestConnection.StartWithGraphPath("me/friends?fields=id,name,picture,installed",(connection, result, error) => 
            {
                if (error == null) 
                {

                }
            });
        } 
```

我得到了结果对象，我可以使用以下方法提取数据：

```
result.ValueForKey (new NSString ("data")) 
```

我的问题是如何将这些数据解析为用户对象？通常我会得到我解析的 Json 响应。使用结果对象执行此操作的正确方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T17:57:16.540

这是一个对我有用的例子：

```
var list = new List<FacebookFriend>();
var graphObject = result as FBGraphObject;

using (var array = (NSMutableArray)graphObject[new NSString("data")])
{
    for (uint i = 0; i < array.Count; i++)
    {
        using (var friend = new NSDictionary(array.ValueAt (i)))
        {
            friends.Add (new FacebookFriend
            {
                ID = friend.ObjectForKey (new NSString ("uid")).ToString (),
                Name = friend.ObjectForKey (new NSString ("name")).ToString (),
            });
        }
    }
} 
```

这是图形请求的回调内部。

`FacebookFriend`只是一个具有我正在使用的 2 个属性的简单类。

# jquery - jQuery：将 mouseover 和 mouseout 与 toggleClass 结合使用

> ID：15450084
> 
> 赞同：0
> 
> 时间：2013-03-16T13:52:32.347
> 
> 标签：jquery, html, css

我正在构建一个小型 Web 应用程序，其中有一些可点击区域和一些不可点击区域。当用户的鼠标指针位于可点击区域上时，该区域会突出显示并且指针变为手形。我也有一些区域最初是不可点击的，然后一旦点击按钮就会变成可点击的，反之亦然。我正在`toggleClass`这些领域使用该方法。但我似乎无法在这些特定领域使用`mouseover`and`mouseout`方法。

当我单击按钮时，我想更改鼠标指针以及将指针悬停在“显示答案”和“提交”选项卡上并再次单击时的背景颜色，我想将它们恢复为默认状态。现在，我只能改变指针。

**HTML**

```
<div id="help" class="hover">Help</div>
<div id="switchplayer" class="hover">Switch to Two player</div>
<div id="showanswer">Show Answer</div>
<div id="submit">Submit</div>
<div id="start" class="hover">Start</div>

<button>Click me!</button> 
```

**jQuery** $('button').click(function() { $('#showanswer,#submit').toggleClass('hover'); });

```
$('.hover').mouseover(function() {
   $(this).css('background-color','red'); 
}).mouseout(function() {
       $(this).css('background-color',''); 
}); 
```

**CSS**

```
div {
border:1px solid black;
}

.hover {
    cursor:pointer;
    cursor:hand;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T13:56:52.110

你可以用这个简单的 CSS 来做到这一点：

```
.hover:hover {
    background-color: red;
} 
```

[http://jsfiddle.net/cT3M9/3/](http://jsfiddle.net/cT3M9/3/)

然后它将按预期工作。

但是，如果您需要 javascript 来完成此任务，您应该使用它`on`来委托事件：

```
$(document).on({
    mouseover: function() {
        $(this).css('background-color','red');
    },
    mouseout: function() {
        $(this).css('background-color', '');
    }
}, '.hover'); 
```

[http://jsfiddle.net/cT3M9/6/](http://jsfiddle.net/cT3M9/6/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T14:05:39.710

正如 dfsq 指出的那样，最简单的方法就是通过 CSS。但是，您的代码不起作用的原因是`mouseover`and`mouseout`方法仅*在执行这些方法时*`hover`应用于具有该类的元素。事件处理程序*不会*追溯附加到满足原始选择标准的新元素。要将您的事件处理程序代码应用于稍后获取该类的元素，请使用[.on 方法](http://api.jquery.com/on/)的变体，如下所示：

 **```
$('body').on('mouseover', '.hover', function() {
    $(this).css('background-color','red'); 
}).on('mouseout', '.hover', function() {
    $(this).css('background-color',''); 
}); 
```**

# node.js - 使用 node.js 在 Heroku 中找不到模块“解析”

> ID：15450085
> 
> 赞同：1
> 
> 时间：2013-03-16T13:52:35.133
> 
> 标签：node.js, heroku, parse-platform

我正在使用 nodejs 访问[Parse](http://parse.com)。它在本地运行良好。但是当我将代码推送到 Heroku 时，出现如下错误：

```
6T13:34:58+00:00 app[worker.1]:

2013-03-16T13:34:58+00:00 app[worker.1]: module.js:340

2013-03-16T13:34:58+00:00 app[worker.1]: throw err;

2013-03-16T13:34:58+00:00 app[worker.1]: at Function.Module._resolveFilename (module.js:338:15)

2013-03-16T13:34:58+00:00 app[worker.1]: at Function.Module._load (module.js:280:25)

2013-03-16T13:34:58+00:00 app[worker.1]: at Module.require (module.js:364:17)

2013-03-16T13:34:58+00:00 app[worker.1]: at Object.Module._extensions..js (module.js:474:10)

2013-03-16T13:34:58+00:00 app[worker.1]: **Error: Cannot find module 'Parse'**

2013-03-16T13:34:58+00:00 app[worker.1]: ^

2013-03-16T13:34:58+00:00 app[worker.1]: at require (module.js:380:17)

2013-03-16T13:34:58+00:00 app[worker.1]: at Object.<anonymous> (/app/server.js:2:10)

2013-03-16T13:34:58+00:00 app[worker.1]: at Module._compile (module.js:456:26)

2013-03-16T13:34:58+00:00 app[worker.1]: at Module.load (module.js:356:32)

2013-03-16T13:34:58+00:00 app[worker.1]: at Function.Module.runMain (module.js:497:10)

2013-03-16T13:34:58+00:00 app[worker.1]: at Function.Module._load (module.js:312:12)

2013-03-16T13:34:59+00:00 heroku[worker.1]: Process exited with status 8

2013-03-16T13:34:59+00:00 heroku[worker.1]: State changed from up to crashed 
```

但是我可以使用 heroku 模拟器的“foreman start”来运行我的代码。

正如@PeterLyons 要求的那样。Profile文件如下：

```
worker: node server.js 
```

包.json

```
{
"name": "app name",
"description": "app description",
"version": "1.0.0",
"private": true,
"dependencies": {
    "cron": ">=1.0.1",
    "jsdom" : ">=0.5.2", 
    "parse" : "*"
    }
} 
```

当我将代码推送到 heroku 时，我可以看到它正确地为我获取了**解析**依赖项。

```
 parse@1.2.2 /tmp/build_3jl0a1qf6bwt3/node_modules/parse
   localStorage@1.0.2 /tmp/build_3jl0a1qf6bwt3/node_modules/parse/node_modules/localStorage
   xmlhttprequest@1.5.0 /tmp/build_3jl0a1qf6bwt3/node_modules/parse/node_modules/xmlhttprequest
   Dependencies installed
-----> Building runtime environment
-----> Discovering process types
       Procfile declares types -> worker 
```

我不知道为什么运行时会出错。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T04:22:27.350

在您的 .js 文件中，使用`require('parse')`小写的“p”。JavaScript 和 node.js 包名称区分大小写。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T13:58:17.540

`2013-03-16T13:34:58+00:00 app[worker.1]: **Error: Cannot find module 'Parse'**`

确保该模块是您的`package.json`.

# java - 替换 jtable 的内容

> ID：15450089
> 
> 赞同：1
> 
> 时间：2013-03-16T13:52:58.027
> 
> 标签：java, swing, netbeans, jtable

我有一个使用 NetBeans IDE 的桌面应用程序，该应用程序有一个`JTable`显示来自 lucene 搜索操作的数据。

每次进行新搜索时，该表都会将新搜索结果附加到先前的搜索结果中。我想要的是表格用新的搜索结果替换任何现有的搜索结果。为了让表中的词刷新并显示新的搜索结果。

任何可用的建议

这是数据模型的代码片段

```
public class MyTableModel extends AbstractTableModel {

    private Vector<Vector<String>> dataList = new Vector<>();
     private String[] header = { "ID","SUBJECT","LETTTER FROM","LETTER DATE","DATE RECEIED",
                                  "REMARKS","DATE DISPATCHED","DESTINATION OFFICE"};

    public Vector<Vector<String>> getDataList() {
        return dataList;
    }

    public void setDataList(Vector<Vector<String>> dataList) {       
        this.dataList = dataList;
        fireTableDataChanged(); 
    }

    public void setHeader(String[] header) {
        this.header = header;
    }

    public String[] getHeader() {
        return header;
    }

    @Override
    public int getRowCount() {
        return dataList.size();
    }

    @Override
    public int getColumnCount() {
        return header.length;
    }

    @Override
   public String getColumnName(int col) {
    return header[col];
   }

    @Override
    public Object getValueAt(int row, int col) { 
    return dataList.get(row).get(col);
    }

} 
```

此代码将搜索结果传递给数据模型类

```
private void searchButtonActionPerformed(java.awt.event.ActionEvent evt) {                                             
    try {

        searchField = searchTextField.getText();
        if(!searchField.isEmpty())
        {                
       matrix = dbs.searchDatabase(searchField + "*");
       myModel.setDataList(matrix);

        }

    } catch (CorruptIndexException ex) {
        Logger.getLogger(GNSSJFrame.class.getName()).log(Level.SEVERE, null, ex);
    } catch (LockObtainFailedException ex) {
        Logger.getLogger(GNSSJFrame.class.getName()).log(Level.SEVERE, null, ex);
    } catch (IOException | ParseException ex) {
        Logger.getLogger(GNSSJFrame.class.getName()).log(Level.SEVERE, null, ex);
    }             
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T14:23:49.090

如果你的表模型是这样的，

```
class AllTableModel extends AbstractTableModel {

    // Suppose this is the data list table is using,
    List<TableData> tableData = new ArrayList<TableData>();

    // Override methods goes here.

    public void setTableData(List<TableData> tableData) {
        this.tableData = tableData;
        fireTableDataChanged();
}  
} 
```

现在，使用表模型实例将新数据设置到列表中。

```
 allTableModel.setTableData(/* Set new search results to the list.*/); 
```

# mysql - 错误 2002 (HY000): 无法通过套接字 '/tmp/mysql.sock' 连接到本地 MySQL 服务器

> ID：15450091
> 
> 赞同：261
> 
> 时间：2013-03-16T13:53:14.277
> 
> 标签：mysql, macos

我在 Mac OS X Mountain Lion 上安装了 MySQL `homebrew install mysql`，但是当我尝试时`mysql -u root`出现以下错误：

> ERROR 2002 (HY000): 无法通过套接字 '/tmp/mysql.sock' 连接到本地 MySQL 服务器 (2)

这个错误是什么意思？我该如何解决？

* * *

## 回答 #1

> 赞同：159
> 
> 时间：2016-08-06T14:13:14.077

您需要先启动 MySQL，然后才能`mysql`在终端上使用该命令。为此，请运行`brew services start mysql`. 默认情况下，brew 安装 MySQL 数据库时没有 root 密码。为了确保它运行：`mysql_secure_installation`.

要连接运行：`mysql -uroot`. `root`是这里的用户名。

* * *

## 回答 #2

> 赞同：147
> 
> 时间：2016-11-22T08:25:45.877

这发生在自制软件安装之后，并且由于权限问题而发生。以下命令修复了该问题。

```
sudo chown -R _mysql:mysql /usr/local/var/mysql

sudo mysql.server start 
```

* * *

## 回答 #3

> 赞同：142
> 
> 时间：2014-01-29T05:12:00.077

这可能是因为 MySQL 已安装但尚未运行。

要验证它是否正在运行，请打开活动监视器并在“所有进程”下，搜索并验证您是否看到进程“mysqld”。

您可以通过安装“MySQL.prefPane”来启动它。

这是帮助我的完整教程：http: [//obscuredclarity.blogspot.in/2009/08/install-mysql-on-mac-os-x.html](http://obscuredclarity.blogspot.in/2009/08/install-mysql-on-mac-os-x.html)

* * *

## 回答 #4

> 赞同：48
> 
> 时间：2013-03-16T14:02:27.840

跑：`brew info mysql`

并按照说明进行操作。从公式中的描述：

```
Set up databases to run AS YOUR USER ACCOUNT with:
    unset TMPDIR
    mysql_install_db --verbose --user=`whoami` --basedir="$(brew --prefix mysql)" --datadir=/usr/local/var/mysql --tmpdir=/tmp

To set up base tables in another folder, or use a different user to run
mysqld, view the help for mysql_install_db:
    mysql_install_db --help

and view the MySQL documentation:
  * http://dev.mysql.com/doc/refman/5.5/en/mysql-install-db.html
  * http://dev.mysql.com/doc/refman/5.5/en/default-privileges.html 
```

希望这可以帮助。

* * *

## 回答 #5

> 赞同：41
> 
> 时间：2015-05-06T12:04:06.513

正如其他人指出的那样，这是因为 MySQL 已安装但服务未运行。有很多方法可以启动 MySQL 服务，对我有用的方法如下。

启动服务：

1.  转到“系统偏好设置”
2.  在底部窗格中应该有 MySql 图标。
3.  双击它以启动“MySQL 服务器状态”并按下按钮“启动 MySQL 服务器”

*我的环境：*

*Mac 优胜美地 10.10.3*

*安装包：/Volumes/mysql-advanced-5.6.24-osx10.8-x86_64*

* * *

## 回答 #6

> 赞同：27
> 
> 时间：2017-03-27T15:51:21.157

解决方案围绕：

*   更改 MySQL 的权限

    ```
    sudo chown -R _mysql:mysql /usr/local/var/mysql 
    ```

*   启动 MySQL 进程

    ```
    sudo mysql.server start 
    ```

[只是为了添加这里](https://stackoverflow.com/questions/15450091/for-a-newbie-error-2002-hy000-cant-connect-to-local-mysql-server-through-so)和许多不同帖子中提供的许多很棒和有用的答案，如果上述命令没有为您解决这个问题，请**尝试指定主机，即**

```
mysql -u root -p h127.0.0.1 
```

* * *

## 回答 #7

> 赞同：19
> 
> 时间：2018-08-08T01:56:51.177

## 警告 - 此方法将删除`/usr/local/var/mysql`文件夹中的所有数据库

我用 Homebrew 安装了 MySQL，唯一为我解决这个问题的是重新安装 MySQL。

在我公司的笔记本电脑上，我无权通过 Homebrew 从我的计算机上卸载 MySQL：

```
$ brew uninstall mysql --ignore-dependencies
Uninstalling /usr/local/Cellar/mysql/8.0.12... (255 files, 233.0MB)
Error: Permission denied @ dir_s_rmdir - /usr/local/Cellar/mysql/8.0.12 
```

因此，我手动删除并重新安装了 MySQL：

```
$ sudo rm -rf /usr/local/Cellar/mysql
$ brew cleanup
$ sudo rm -rf /usr/local/var/mysql
$ brew install mysql 
```

那行得通！

* * *

## 回答 #8

> 赞同：16
> 
> 时间：2017-04-14T08:27:51.757

Looks like your mysql server is not started. I usually run the stop command and then start it again:

```
mysqld stop
mysql.server start 
```

Same error, and this works for me.

* * *

## 回答 #9

> 赞同：14
> 
> 时间：2015-10-01T21:41:44.660

下面我将包含来自`brew install mysql`此问题的最新搜索的最新说明：

```
$ brew install mysql
==> Downloading https://homebrew.bintray.com/bottles/mysql-5.6.26.yosemite.bottle.1.tar.gz
######################################################################## 100.0%
==> Pouring mysql-5.6.26.yosemite.bottle.1.tar.gz

To connect:
    mysql -uroot

To have launchd start mysql at login:
  ln -sfv /usr/local/opt/mysql/*.plist ~/Library/LaunchAgents
Then to load mysql now:
  launchctl load ~/Library/LaunchAgents/homebrew.mxcl.mysql.plist
Or, if you don't want/need launchctl, you can just run:
  mysql.server start 
```

就我而言，我现在通过加载mysql `launchctl load ~/Library/LaunchAgents/homebrew.mxcl.mysql.plist`，然后能够启动`$ mysql`并继续前进。

我希望这有助于最近的疑难解答！

* * *

## 回答 #10

> 赞同：12
> 
> 时间：2019-05-30T06:48:06.923

这个问题与`/usr/local/var/mysql`文件夹访问有关，我删除了这个文件夹并重新安装了 mysql。

1.  用 brew 卸载 mysql ：

    `brew uninstall mysql`

2.  `sudo rm -r /usr/local/var/mysql`

3.  `brew install mysql@8.0`
4.  `mysql -u root`

这个解决方案对我来说很好！ **但是您丢失了所有数据库！警告！**

* * *

## 回答 #11

> 赞同：10
> 
> 时间：2017-05-02T03:55:30.977

当我重新启动 mysql 服务时，这解决了我的问题。赶紧跑：

```
brew services start mysql 
```

* * *

## 回答 #12

> 赞同：9
> 
> 时间：2020-12-22T17:15:54.527

指定的数据目录 /usr/local/var/mysql/ 不可用。您可以删除服务器添加到其中的所有文件。

```
MacOS:
$brew services stop mysql
$brew services list
$brew uninstall  mysql

$brew install mysql
$brew postinstall mysql

If Any error found then run those cmd
$sudo rm -rf /usr/local/var/mysql
$sudo rm /usr/local/etc/my.cnf
$brew postinstall mysql

$brew services start mysql
$mysql_secure_installation
```

[![在此处输入图像描述](../Images/ff81a89f52bfa4bdc7c24cb927a60a71.png)](https://i.stack.imgur.com/5tYLj.png) 完成所有安全安装过程然后运行

```
$mysql -u root -p 
```

恭喜你刚刚设置了 mysql！

* * *

## 回答 #13

> 赞同：9
> 
> 时间：2018-10-10T18:40:58.483

哦，我花了一段时间才弄清楚。我在评论中看到了。使用 brew 安装 mysql 并启动服务（可能使用`sudo brew services start mysql`）然后运行：

```
$ mysqld 
```

此后，MySQL 应该会为您运行。

* * *

## 回答 #14

> 赞同：6
> 
> 时间：2018-06-07T17:24:41.017

就我而言，这只是删除锁定文件的问题。

```
sudo rm -f /tmp/mysql.sock.lock 
```

* * *

## 回答 #15

> 赞同：6
> 
> 时间：2017-03-15T20:34:39.547

对我来说，这很简单：

`/usr/local/opt/mysql/bin/mysqld_safe`

代替`mysqld`

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2013-03-18T09:59:02.107

我找到了解决我的问题的方法。这确实是因为我的 MySQL 服务器没有运行。

这是由于 MySQL 没有在我的机器上正确设置，因此无法运行。

**为了解决这个问题，我使用了一个在 Mac OSX Mountain Lion 上安装 MySQL 的脚本**，它必须安装丢失的文件。

这是链接：[http ://code.macminivault.com/](http://code.macminivault.com/)

**重要提示：** *此脚本将 root 密码设置为随机生成的字符串，并将其保存在桌面上，因此请注意不要删除此文件并记下密码。它还会在您的系统首选项中安装 MySQL 管理器。我也不确定是否删除任何现有的数据库，所以要小心。*

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2017-05-09T23:03:12.133

在为此工作了几个小时后，对我有用的是转到 /etc/mysql/ 并编辑 my.cnf 文件。添加以下内容

```
[client]
port = 3306
socket = /var/run/mysqld/mysqld.sock 
```

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2019-06-24T09:21:01.623

我经历了这个问题，我设法使用以下解决方案运行 mysql 服务器

`.dmg`通过（[https://dev.mysql.com/downloads/mysql/5.7.html](https://dev.mysql.com/downloads/mysql/5.7.html) ）安装mysql ，您将在系统偏好设置中获得mysql服务面板然后从面板启动mysql并尝试

`mysql -u root -p`

附上图片供参考

[![系统偏好](../Images/e360596f893d8a23b295fc1bfcfdec52.png)](https://i.stack.imgur.com/h6gqA.png)

[![mysql面板](../Images/f1a21fa83306f96aa63dad26adc67277.png)](https://i.stack.imgur.com/zNpcr.png)

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2019-12-06T06:10:44.130

在尝试了许多解决方案之后，似乎最终成功的方法是通过 IP 连接。不再随机删除文件套接字。

只需更新您的 MySQL 客户端配置（例如`/usr/local/etc/my.cnf`）：

```
[client]
port = 3306
host=127.0.0.1
protocol=tcp 
```

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2021-05-07T07:53:27.520

使用上述所有解决方案后，对我来说没有任何效果，但这有效。

我您已经使用 HomeBrew 安装了 MySQL，然后在您的 mac 中检查***System Preferences > MySQL***，如果 MySQL 服务器正在运行，则[![在此处输入图像描述](../Images/d3062e04a35d36feab69d6e85eded0ca.png)](https://i.stack.imgur.com/bt8gp.png)通过单击**停止 MySQL 服务器**停止它并从终端编写命令来启动 MySQL `mysqlserver.start`。

如果它不起作用，您也可以尝试：-

如果您还安装了 MySQL Workbench，则只需卸载**MySQL Workbench 和 MySQL**，然后先安装**MySQL，然后再安装 MySQL Workbench。**

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2019-08-21T21:44:05.807

只有这对我有用 `brew services start --all` （在尝试了所有答案之后）

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2019-10-13T07:15:57.613

我建议你跑

```
 mysql.server start 
```

在去之前

```
 mysql -u root -p 
```

以便在尝试登录之前确保 mysql 服务器正在运行

当您启动/重新启动没有运行 mysql 服务器的机器时，这种情况会发生很多次。

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2019-10-15T08:02:35.463

我一直回到这个帖子，我已经多次遇到这个错误。这可能与在全新安装后导入我的所有数据库有关。

我正在使用自制软件。唯一用来为我修复它的东西：

```
sudo mkdir /var/mysql
sudo ln -s /tmp/mysql.sock /var/mysql/mysql.sock 
```

今天早上，在我的机器决定一夜之间关闭后，问题又回来了。现在唯一修复它的是升级mysql。

```
brew upgrade mysql 
```

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2021-11-15T19:52:11.097

可能您在自制 mysql 安装过程中可能遇到了一些问题，并且 mysql 服务可能没有运行。如果是这种情况，那么可能值得尝试以下步骤来正确重新安装 mysql，然后尝试连接。

```
sudo chown -R $(whoami) /usr/local/var

sudo chown -R $(whoami) /Library/Caches/Homebrew

brew uninstall mysql

brew install mysql

mysql.server start   

mysql -uroot 
```

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2018-10-17T11:48:02.970

我已经尝试了所有可能的方法来解决这个问题，比如 ln -s /var/lib/mysql/mysql.sock /tmp/mysql.sock，卸载并重新安装 mysql，确保 mysql 在 xampp 上运行，但没有一个仍然有效.

最后，我打开 my.cnf（配置文件）并复制套接字路径（确保复制完整路径，否则它将不起作用）。然后我在终端中执行这个命令

```
mysql --socket=/Applications/XAMPP/xamppfiles/var/mysql/mysql.sock 
```

瞧，mysql 启动了。

只有当您的 MySQL 显示在 Xampp/Ampps 上运行时，此解决方案才有效，但在终端中，当您已经尝试过以下操作时，它仍然没有连接到正确的套接字：

```
./mysql -u root 
```

或者

```
brew services start mysql 
```

我希望这有帮助！

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2019-08-10T08:14:45.110

尝试这个

```
rm -rf /usr/local/var/mysql && brew postinstall mysql@5.7 && brew services restart mysql@5.7 
```

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2020-10-16T21:37:45.507

只需在终端中点击“brew services start mysql”

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2021-08-13T10:03:07.013

就我而言，只需将主机指定为 127.0.0.1，而不是 localhost：

```
$ bin/mysql -uroot -p -h127.0.0.1
Enter password:
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 8
Server version: 8.0.26

Copyright (c) 2000, 2021, Oracle and/or its affiliates.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql> 
```

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2020-09-27T20:42:32.910

`sudo chown _mysql /usr/local/var/mysql/*`在尝试了所有这些 SO 答案的多种选择之后，跑步终于帮助了我。权限问题可能是由于机器关闭不当造成的。

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2021-12-29T17:44:45.140

在我的**mac m1 macOS Monterey**上安装**MySQL**后，使用我得到了以下信息：**`brew install mysql`**

 **```
[System] [MY-013169] [Server] /opt/homebrew/Cellar/mysql/8.0.27_1/bin/mysqld (mysqld 8.0.27) initializing of server in progress as process 3624

[ERROR] [MY-010457] [Server] --initialize specified but the data directory has files in it. Aborting.

[ERROR] [MY-013236] [Server] The designated data directory /opt/homebrew/var/mysql/ is unusable. You can remove all files that the server added to it.

[ERROR] [MY-010119] [Server] Aborting

[System] [MY-010910] [Server] /opt/homebrew/Cellar/mysql/8.0.27_1/bin/mysqld: Shutdown complete (mysqld 8.0.27)  Homebrew. 
```

这个警告：

```
Warning: The post-install step did not complete successfully You can
try again using:   brew postinstall mysql 
```

之后，我尝试使用启动 MySQL `brew services start mysql`，但出现此**错误**：

```
ERROR 2002 (HY000): Can't connect to local MySQL server through socket
'/tmp/mysql.sock' (2) 
```

我设法使用以下方法修复它：

```
> rm -rf ~/opt/homebrew/var/mysql/
> brew postinstall mysql 
```

现在您可以使用`mysql -uroot`或连接`mysql -uroot -p`。

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2019-10-16T05:39:33.217

升级到 Catalina OS 后遇到了类似的问题。运行 mysqld 命令后，我发现日志文件存在一些问题。对其他人来说可能会有所不同。

```
$ mysqld 
```

问题是

```
2019-10-16T04:58:59.174474Z 0 [ERROR] Could not open file '/var/log/mysql/error.log' for error logging: No such file or directory
2019-10-16T04:58:59.174508Z 0 [ERROR] Aborting 
```

通过创建它并应用适当的权限来解决它。

```
sudo mkdir -p /var/log/mysql
sudo touch /var/log/mysql/error.log
sudo chown -R _mysql:mysql /var/log/mysql/ 
```

重启 MySQL

```
brew services restart mysql@5.7 
```

问题已解决。

```
mysql -uroot -proot 
```

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2018-08-13T19:35:54.940

这里有很多其他有用的回复，但没有什么能解决这个问题。最终，我在这个网站或其他网站上找到的任何东西都不会让 Homebrew 的任何版本的 MySQL 为我工作。

从[https://dev.mysql.com/downloads/file/?id=479114](https://dev.mysql.com/downloads/file/?id=479114)下载 DMG （找到您需要的适当版本）并让向导为我安装它非常轻松。唯一的其他手动步骤是添加`/usr/local/mysql/bin`到我的 PATH。

如果 brew 给你带来麻烦，我会推荐这个选项。

更新 - 如果仍然无法解决问题，请在通过 DMG 安装之前尝试完全清除 mysql。请按照以下说明操作：[https ://gist.github.com/vitorbritto/0555879fe4414d18569d](https://gist.github.com/vitorbritto/0555879fe4414d18569d)

* * *

## 回答 #33

> 赞同：0
> 
> 时间：2021-12-06T02:12:30.733

Homebrew 绝对不会使用标准重新安装来修复权限，并且追查损坏的文件夹/文件将花费比其价值更长的时间。

在这种情况下 - 手动删除 mysql 安装并通过自制软件重新安装。大约需要2分钟。

`cd /usr/local/var`

`sudo rm -rf mysql`

`brew install mysql`

Homebrew 默认安装 mysql insecure，所以如果你想要密码：

`mysql_secure_installation`

然后点燃它。

`mysql -uroot`

* * *

## 回答 #34

> 赞同：0
> 
> 时间：2016-12-15T11:40:17.880

在我的情况下，在安装 MAMP 之后，从终端访问 mysql 给出了相同的套接字错误。最后，它想要的只是重新启动并且它正在工作。

* * *

## 回答 #35

> 赞同：0
> 
> 时间：2020-10-17T06:23:26.117

如果您在 OSX 上并且有 XAMPP，请按照以下步骤操作：

感谢 Jackstine 的回答，我能够做到以下几点：

$ 猫 ~/.my.cnf

```
[mysql]

# CLIENT #
port                           = 3306
socket                         = /Applications/XAMPP/xamppfiles/var/mysql/mysql.sock 
```

我希望这能在我以后忘记时再次帮助我！

* * *

## 回答 #36

> 赞同：0
> 
> 时间：2021-02-13T15:08:36.103

我设法通过将 localhost 更改为 127.0.0.1 来解决这个问题

* * *

## 回答 #37

> 赞同：-1
> 
> 时间：2021-08-31T14:48:27.953

**本地机器上所有这些问题的最佳替代方案-> DOCKER**

按照以下步骤操作，您将与本地 mysql 设置一样好：

1.  安装 Docker
2.  确保 docker 正在运行（只需打开 Docker 桌面应用程序）
3.  在终端上运行此命令-> docker pull mysql
4.  运行以下命令，您的 mysql 已启动并在端口 3306 上运行，密码为 root，用户名也为 root

-> docker run --name docker-mysql -p 3306:3306 -e MYSQL_ROOT_PASSWORD=root mysql

* * *

## 回答 #38

> 赞同：-4
> 
> 时间：2018-08-21T19:57:25.203

1.  卸载 MySQL。
2.  删除`/usr/local/var/mysql/`.
3.  安装 MySQL。**

# php - 使用 REST API 的 PayPal 订单摘要 - - cURL 或 PHP

> ID：15450095
> 
> 赞同：7
> 
> 时间：2013-03-16T13:53:38.363
> 
> 标签：php, rest, curl, paypal

我正在使用 PayPal RESTful API。 [https://developer.paypal.com/webapps/developer/docs/api/](https://developer.paypal.com/webapps/developer/docs/api/)

我如何将我的消费者订单商品和购买描述传递给 PayPal，所以当我的用户通过登录被重定向到 PayPal 以批准订单时，他们的订单摘要将显示在左侧。.

.

**左侧的订单摘要** ![贝宝空订单摘要](../Images/edbca774056e6c0762dc9435f42daa3c.png)

我试图传递 transactions.item_list.items 但该信息仍未显示在订单摘要中。

任何帮助如何使用 PayPal RESTful API 让订单摘要出现在 paypal 批准页面上？

我对他们的文档并不满意，因为它缺少一些信息并且还有一些错误浪费了我大量的调试时间。

```
//
// prepare paypal data
$payment = array(
            'intent' => 'sale',
            'redirect_urls' => array(
                'return_url' => $url_success,
                'cancel_url' => $url_cancel,
                ),
            'payer' => array(
                'payment_method' => 'paypal'
                )
          );

//
// prepare basic payment details
$payment['transactions'][0] = array(
                            'amount' => array(
                                'total' => '0.03',
                                'currency' => 'USD',
                                'details' => array(
                                    'subtotal' => '0.02',
                                    'tax' => '0.00',
                                    'shipping' => '0.01'
                                    )
                                ),
                            'description' => 'This is the payment transaction description 1.'
                           );

//
// prepare individual items
$payment['transactions'][0]['item_list']['items'][] = array(
                                        'quantity' => '1',
                                        'name' => 'Womens Large',
                                        'price' => '0.01',
                                        'currency' => 'USD',
                                        'sku' => '31Wf'
                                       );
$payment['transactions'][0]['item_list']['items'][] = array(
                                        'quantity' => '1',
                                        'name' => 'Womens Medium',
                                        'price' => '0.01',
                                        'currency' => 'USD',
                                        'sku' => '31WfW'
                                       );

//
//format payment array to pass to cURL
$CURL_POST = json_encode($payment); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T00:24:13.003

你的代码很好。这实际上是一个很快就会修复的错误。关于文档，您能分享一下我们如何使它变得更好吗？我想确保将您的反馈传递给我们的文档团队。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-30T18:21:30.013

尝试使用此处显示的示例：http://htmlpreview.github.io/?https: [//raw.githubusercontent.com/paypal/PayPal-PHP-SDK/master/sample/doc/payments/CreatePaymentUsingPayPal.html](http://htmlpreview.github.io/?https://raw.githubusercontent.com/paypal/PayPal-PHP-SDK/master/sample/doc/payments/CreatePaymentUsingPayPal.html)

它是 PayPal REST API SDK 附带的示例。您可以按照自述文件中的说明自行尝试这些示例。

这是运行该示例时的样子：

![在此处输入图像描述](../Images/3ae403c0dc8a7c87b3dac976fdab05e3.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-19T21:07:54.100

我今天在尝试时遇到了同样的问题。我所做的是添加如下项目。

```
$item = new Item();
$item->setQuantity($item_quantity);
$item->setName($item_name);
$item->setPrice($item_price);
$item->setCurrency($item_currency);

$item_list = new ItemList();
$item_list->setItems(array($item)); 
```

$item_list 是 transaction 的属性，因此您应该在之后添加它。

```
$transaction = new Transaction();
$transaction->setItemList($item_list);
.... 
```

这应该显示在 PayPal 页面上的订单摘要窗格中。您也可以在[此处](https://stackoverflow.com/questions/15885742/pay-with-paypal-through-paypal-rest-api-does-not-show-up-payment-description-on?rq=1)查看答案。

# mysql - 存储过程进入无限循环

> ID：15450099
> 
> 赞同：1
> 
> 时间：2013-03-16T13:54:16.230
> 
> 标签：mysql

我正在制作一个存储过程以检查用户是否存在。问题是每当我传递正确的用户名时，它都会成功执行，但是当我传递错误的用户名时，它会进入无限循环。

我哪里错了？这是我的存储过程：

```
CREATE PROCEDURE `VerifyUserNPass`(userParam varchar(50), out result int)
BEGIN
    DECLARE done INT DEFAULT FALSE;
    DECLARE tempUser varchar(50) default '';
    DECLARE count int default 0;
    DECLARE noRows int;

    DECLARE userList cursor for select userName from users;
    DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = TRUE;

    select count(*) into noRows from users;

    OPEN userList;
    read_loop: LOOP
        FETCH userList into tempUser;
        IF tempUser = userParam THEN
                SET @count = count + 1;
                LEAVE read_loop;
        ELSEIF count > noRows THEN
                LEAVE read_loop;
        END IF;

    END LOOP;
    CLOSE userList;

    select count into result;

END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T14:35:45.427

要修复您的代码，请对`done`变量使用条件测试来确定是否离开循环。（该`done`变量被初始化为 FALSE，然后在没有更多行时在 CONTINUE HANDLER 中设置为 TRUE。）

去掉查询“ `count(*)`”查询和`noRows`变量；这些是不需要的。（在并发系统中，该 count(*) 查询返回的值可能与稍后查询返回的行数不同。（考虑其他会话可能在您的过程运行时插入或删除行.)

还要摆脱对`@count`用户变量的引用。您混合了对*用户*变量`@coount`和*过程*变量的引用`count`。这些是自变量。您的过程无需使用*用户*变量。相反，坚持使用在您的过程中声明的变量。（保存用户变量以备不时之需。）

```
-- select count(*) into noRows from users;
read_loop: LOOP
    FETCH userList into tempUser;
    IF done THEN
       LEAVE read_loop;
    END IF;
    IF tempUser = userParam THEN
        SET count = 1;
        LEAVE read_loop;
    END IF;
END LOOP; 
```

* * *

对此进行编码的一种更有效的方法是让数据库通过在查询中添加 WHERE 子句来找到您感兴趣的行。（您无需获取与您感兴趣的条件不匹配的行。）

修改游标定义以包含谓词（即 WHERE 子句中的条件）以限制返回的行：

```
DECLARE userList cursor for select userName from users
  WHERE userName = userParam LIMIT 1; 
```

* * *

我不明白这里需要一个程序。原生 SQL 语句会更有效率，例如

```
SELECT 1 AS found FROM users u WHERE u.userName = 'foo' LIMIT 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T13:57:14.343

确保为所有分支增加循环计数器，不仅在 succes 分支中，并且有结果变量来保存您的结果。

```
DECLARE userFound int default 0;
......
read_loop: LOOP
    FETCH userList into tempUser;
    SET @count = @count + 1;
    IF tempUser = userParam THEN
           SET @userFound = 1
           LEAVE read_loop;
    ELSEIF count > noRows THEN
            LEAVE read_loop;
    END IF;
    .....
    select userFound into result; 
```

我希望这会返回相同的结果（但我不是[MySql 专家](http://dev.mysql.com/doc/refman/5.0/en/select-into.html)）

```
CREATE PROCEDURE `VerifyUserNPass`(userParam varchar(50), out result int)
BEGIN
 select COUNT(userName) into result from users where username = @userParam
END 
```

# node.js - 使用 Windows Azure Blob 存储创建缩略图图像

> ID：15450102
> 
> 赞同：0
> 
> 时间：2013-03-16T13:54:24.533
> 
> 标签：node.js, azure, sdk

我正在尝试使用 azure-sdk-for-node 将流式图像保存到 Windows Azure blob 存储但没有成功。下面是我调用并传递带有缩略图属性的视频对象的函数。最初，我使用请求对象获取图像，该对象从另一个网站获取图像并将其转换为 base64 对象，该对象又转换为流对象，因为 Azure blob 服务使用 createBlockBlobFromStream 方法，因为我无法使用 createBlockBlobFromFile 或 createBlockBlobFromText 上传图像到 blob 存储。

```
var azure = require('azure')
    , uuid = require('node-uuid')
    , http = require('http')
    , url = require('url')
    , mmm = require('mmmagic')
    , Magic = mmm.Magic
    , stream = require('stream');

function createVideoThumbnail(video, callback){
    var bs = azure.createBlobService(config.storageAccount, config.storageAccessKey, config.blobHost);
    var sURL = video.Thumbnail;
    var oURL = url.parse(sURL);
    var client = http.createClient(80, oURL.hostname);
    var request = client.request('GET', oURL.pathname, {'host': oURL.hostname});

    request.end();
    request.on('response', function (response) {
        var type = response.headers["content-type"];
        var prefix = "data:" + type + ";base64,";
        var body = "";

        response.setEncoding('binary');
        response.on('end', function () {
            var base64 = new Buffer(body, 'binary').toString('base64');
            var data = prefix + base64;
            console.log('base64 image data ' + video.Thumbnail + ': ' + data + '\n');

            var decodedImage = new Buffer(data, 'base64');
            var magic = new Magic(mmm.MAGIC_MIME_TYPE);

            magic.detect(decodedImage, function(err, result) {
                if(err) {
                    throw err;
                }

                var bytes = 0;
                var imageStream = new stream.Stream();
                imageStream.writable = true;

                imageStream.write = function(buf) {
                    bytes += buf.length;
                    imageStream.emit('data', buf);
                };

                imageStream.end = function(buf) {
                    //if(arguments.length) {
                        imageStream.write(buf);
                    //}

                    imageStream.writable = false;
                    imageStream.emit('end');
                    console.log(bytes + ' bytes written');
                };

                var options = {}
                console.log('mmm = ' + result + '\n');
                options.contentType = result;
                options.contentTypeHeader = result;

                console.log('\n');
                bs.createBlockBlobFromStream(config.imageContainer, uuid().replace(/-/gi, "").toLowerCase() + '.jpg', imageStream, decodedImage.length, options, function(error, blobResult, response) {
                    if (error)
                        console.log('got error = ' + JSON.stringify(error) + '\n');

                    if (blobResult)
                        console.log('blobResult = ' + JSON.stringify(blobResult) + '\n');

                    if (response)
                        console.log('response = ' + JSON.stringify(response) + '\n');

                    // now store in Azure blob storage
                    callback();
                });

                imageStream.end(decodedImage);
            });
        });
        response.on('data', function (chunk) {
            if (response.statusCode == 200) body += chunk;
        });
    });
} 
```

这就是我所说的：

```
createVideoThumbnail(video, function(){
    console.log("returning from create thumbnails\n\n");
}); 
```

该函数不工作它挂起并且不会打印出最终的日志语句：

```
console.log("returning from create thumbnails\n\n"); 
```

然而，base64 似乎确实有效，因为我得到了这个编码：

数据：图像/JPEG；base64，/ 9J / 4AAQSkZJRgABAQAAAQABAAD / 2wBDAAUDBAQEAwUEBAQFBQUGBwwIBwcHBw8LCwkMEQ8SEhEPERETFhwXExQaFRERGCEYGh0dHx8fExciJCIeJBweHx7 / 2wBDAQUFBQcGBw4ICA4eFBEUHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh7 / wAARCABaAKADASIAAhEBAxEB / 8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL / 8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4 + Tl5ufo6erx8vP09fb3 + PN6 / 8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL / 8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3 + PN6 / 9oADAMBAAIRAxEAPwDx3QNShMv2IyqFcFrVieGHdCfUVFqDrY3BKsVU9favMba7uJn + XcoB3Lg42n1FbWdZu0G6eSQnjLLnNVLFJaMiOElLVGuNTZL8Wkaw7N + 4llzmrtjek35RFtwCrdI8g8fWub13w34r03S11m502V7Fh81xECVj6fexyv1PBpng2R5rg3EsmFijYn3JGAKqNXm1uOpT0s + hZsLtzrN / AfuTHgKMAMvTiqEtlJLqoEQJVvm4 / UUljeIJrwjiQlsHuOat6TPcazcrbWdrJNqCZ2RxxlvM9xirdrIhxcbNEWtWVw9nMvlP8o3HI9K5GvZLT4d + PbxEmfwzdhGwfnkRTj3BbNeZeJ / d + raBqMlvqmmXVkC7eX50ZUOoPVT0P4Vk5Rlsy4ppamRSqCzADqakji3ruMiL9SasWNuxuk3EbTk7l5pWHc29LiARFHQCuv0R2DooGQpBzjpXKW8bpt8srIP9k5 / Sty1vV0yxe9kwZUGIlPRnPTPt3 / Ct4WMJamlqogfxG1yFCvDEsLYORu6nj8QPwq9G7vcrbgZc4LDvnHTNYXh0R3HEzqJvvmQniRie9a0tzHYpNfuwBjGAc5JJrVfzC5erPfvhtqDXng20aU7mhLQ / QKSAPyxXRs + V4GOa89 + BRnbwGstwMvNdSSH26cfpXcSTeWhLfhXyOJi3Xko92elD4ESsy4JPFVp2DLzziqr3UgZjj5fSljlEgY5wfSlKhOmrtFpor3tvBOpWeCORcfxLmuQkULvITyFGQWL9B2NdfeORDIwIyFNcdIQ8IB2kgfxdCfpWlDszopSqJe7sV / d / AMHfDaaxPctHKluW3R20r52e3Bzj0zXomn + BPDEAj / 0KJ1TlRjgVtC2i1KNbq3G2VT6Yz7VoW4iChcHI7HiscZKfPzdGenSoRpxUexFDZWSQ / Z4rdBEQVKbRtIPBBHcYrxv4mfAi0vbp9T8FTRaTcyHMtm + RbPnuuATGfYAj2Fe6w + Vn7q / nTnZS3QflWNDE1KL91mVfDQq7o + YPB37POszaiZfEmoW1raH7yWrF5W9skAD68 / SvffB /克/ QfC1mLXQtLhtVwN8gXMkh9WY8mujVgDgA / lUgO4dM / jW1XG1ays3ZeRlTwtOn5sgeBivJrE8S + F9K8RaXNpusWkV1bSjBVxnHoQeoPuOR2rpApPGAKBC7MMdPpWMKkoO6ZpOCmuWR8E / FjwXdeA / FMumN + 8s5CXtZHXJZPQn1H + B71z2juDO29EB28MK + sv2vfC6XngCHXFj / f2E6kvjojEKR + JK / 9818jRhre6WRY2WNxwccfh + NfSYar7WCkzwq9L2cnE6KAL5oYjBHOR1qr4mu5bueC2RGZgOUiXlmP / wBbFSxzIliZ5flUDPI6gf4n + tYSXj / aUnIc7iS + 1sHk9j2rs2RzxXU2rWcWSCS / DQ6 / 6u2Vu / QX / pXS6HbT3dsdX1VG + wwHesR4Nw5OBx + gFc7o + q6dbT + dHokV3L2V1aRgfUsTj9K7HSLvxT4nkltdLSNJ4YjKbeO281o1BxuGDwfqB1qotJ3YJSlJWR698H7maPw9LbtEok88yvGrgCMMBgfpXV3M8kqx74mjOMshIJH4ivMPgxa / 2Nrl / YajNdR6nPCkhiulZGkUE / MoPYc9K9QuoxKd4wWHb1rwq7jDFNvY7KWkLNEDPyxPJPaolm2ENkfypwiuGyI4JSD2VT / Sll0rUxtMtjcRJ / eeMqPzIrpla2o0Q6jLts5SD1U8g5rk9xYcL35rodR0m4uWWztJ7VLyZgkULX8asxJ6BC3JP0rznVvEcMGVtVW5mVirLuCqT0wScfpXHSou2x6OFqQhB6nuPhbVrWeKOS1l3hyOp6GurmsY5GEoJBYcgeteR2ULeG / EcSbAbO8yo / 2JANwx9QD + VelaLqAubffHJkp0XPJHp9a6FShVhzdDsjUcnbqX49qziDI8zbkL0Jx1xT5pUQZGPpmsC7abWb2Caykksb6yk3qs6 / K4wQQceoP8q56Hxjq0N / QZ + I7KKyNupeOKNlwEVSS2SeScVwVcLBaxNKnuxvck + IHxK8NeDWSPWLt3u5AGjtYF3ykeuDwo + pGe1c54Y + PXgrWNSSwuGvtJd3xHLdRr5WT6sGO38cAeor5v13WJda8S3Gq30kM93cTGRmKRtn0GMuMAYAHtUE2C5mijZVP39iYAP4RqB + ddccFFRs9zy / aucj9CNKimniDFGYEZVhzkfWrUr2cH + vvLSHb97zJ1XH1ya + aPAV / e6h4G0Vri8keRYtmZJSflWWVFXBf029q6 / wAEW1vqC6slzHG5 / s5JFLRhiu3AyOD / AD / OoWXQb1ZEsZKN9Dsfjc + h678N9S0eHXtINzPGDErXabWIYEfNnA5Ar5lsfhhr1xHHp0Ot6G0ZfzGt40lmlIIBG0rEeo9DXsEUkbfDV0C7JLe9AB + 6cFXPByp / HB / AVW8DaibHxlYXtzdtCi + UDK7cKPlUk5z2z3ruo01RioxOOrU9o25HlWo / Cm3vJAl34m + zRRoGCW+mu2en/PRO+x/nWl4e+CegvanU5b/V9TtYpEVxGIYQCzFRn53I5B7V1OpGSXWLtrNC8csf7sxKfmAGBjhT2rX0rxHbaR4R1TSdVuDbXdwIDAtywXBV2LZ3scdRyMV0Nyepg7JaGH4S + H / HW / 1SOy0zTNSiklYAyTagzZwGbqIcdhxkVc1DwrJBM2laRps1lqLIZJJYZJJJigcjOHlAKnAOQB14qfwJcS6N4is9TgFncGGZZUWK4jPmDPTcoyuVJr1XRteivTDe3ltEl / bboCd28SRnkJnABYADt6 + tTUqcsbM6cJSdSV4u1jnLjw5caN4fstcVbcXsTfZZXls45Jo4S + AC5WQ5Oc8H8K5CHxTrPnCL + 0rkcN80cqRjdtOPurGRziu18ZeO / DmjRrpuoyx3 + lTJny4gsjQMfuqfY44PUY57V5dpV / od8rXFkt9H85RhJc8ZPYDHI / E1zqpC12jXEYacXdSvc9F + KFjcaULS6ttSviLmBifMvLhz9zcDy7Dnn + nevM7F4ZNRQyNFOSr / ADNsZc7Tx8yA9fet / WdaSS0t / t1qblYB5cXm3EjFRjHAJI6Dtiq1pr2jOoj + yw24H / Tun8wM / nTeISWkWzOGDrSjdI73xpN4bs9e8P3mjyWrPDdxSOLVgQqAgkbVyOo746nr2 + cvHtvFZ + MdasTdsBDfzRjgE4V2A5r1PUtUNwqxWt0 / KY + 6jEKD9OlYd / Z2d3C0dzawzLk53KDzULFJvY6KWXyUbtnV / Gqe6i8OW17bSJE1teI4GOWPIH86b4U1a / XV1kjZ1e12faYyGVX3KG + 64BHBBBxg1p + O7XRrtNP / AOEgmMekwTPPcKCQZNsblVBHIyf8O9eJ6x4gFx4kH / CBWV1Zwz7Y385zK0m3d8zMegAOMA9hU4NpUNTWrVdPE2SPcPikNakfS / Enga7jFy77Lq0Z1AnXHBO4jpj9a4DTvEza54xutK8VTx2Wpzj7ObZPugbSMbhwSQSeteS6x4q8Qtq0pa4KTRysoCkgKR6c8VUtrXWL7UpL + ZpftOTLvdsElRng + vFOdNW8jtpyVd8kU7iavoer6P4w / wCEcv1nadJwkQyxDgn5WXnGDVWPTLy51I2sNnLNMz7AioCxOcYHB5r1zR / ibZb7JPGXheO / udPl321yMedGVOQT07gZ5HuKuXPxN8OWMss / hbwt5eoysW + 1XOMJnqVAJz3 / AIH + NEak76xM4YTkm01c0YNO1D4e + GtE026ihmvXtmnuY2mIEJ3lsHap45A9yDWV468X694K8O6de3Flapc6srCG3MjuPIXB3OwK9SwwuOnXHSucvNd1O / vWvtauZ / trEqrvzwOwHYc8dh26V7b8f /艾+ N / h3BNYx51PSojPaKg5kUqN8eO5IVSPdcd6Sqcs1GT3DMMFCjRjKC957nzTcfFnxYxAt / sFquSQkcG4c8Hhy2ep61nXfjXxleSeYdXuID / 0xZIMfQKB + VcrPG8UhRxgjiiON5CAvf3ruSR4DbO40PWrzWXFpq2tXMk6t9 + a4LFx9SeapeKPDUyTG9tZkeN + fvDqOtc19kxgtJt9zQ7XAHlx3Erp7EgVpfTVGVne6Z2nhfx1qWip9nnf + HCOeSjDoa9gsvEMNn8PbG1tdZme7uEN2lyzg + VMxJdT7ZJ / PPavmMqQ2HJHvW3omq3UdnJo4k329w6kA / wEHPH1rKpHnR2YbEOhfzPY / BHw28beOfMfT9PkNjK4L3M7iJDk9QW+8B1+UGuitNEGhiTTVgIMMjJI27JLLwWH5e1e0fCzUZ9P8HaVZpwY7ZBj8BXj + v6tcr4l1CQIzo1zJgDoQXPP1rlxEFCKHSxEqsncyvEEhKrGqp1yc8 + 3NYwZX4AG3HBz0q / Q + tWzTATR7TswdyYqC1e2uZR5JIBI4BztH40oaRPo8NaNJGjZsViRFDfKOe1SSOobbjB6mt6y8I3t7oy6jZ3NtHuyxR22ttGfw7etcvcyHKn + DdyRz71g4Pd9TGNWE21F7HovjbQm8Q6DJY71jfIeNj2Yf / rNZt / Z2nhjwhLcSxQRxWNtkADgtjH6n + ddekueNo / KQ + v6XHrWh3elzr8lxGVzjoeoP4EA15qntF7XKUFfm6nyDPby3l552GeSeTdn + Jizeg / HirlhpmqSaoLC1E0lwkm1PJy5J9AByT9K7m4 + GfjSPUltI9KaWFV2JIkw2cdDnPTnPrzXq / hPwxoPgDSJ9c1Iw21wsQa7u5HyE9VTvgnsOTwPSvVqYmKS5dW9kXKNGh7yf6Hm + mfBTxtd2Rlnjs7dpDuYS3BEnX0UEA4z + dYF74C8R6NqX9n39hJFPcP5duUXdvJP8DA459z35re8VftF6gmomPwxpdv9kjbHm3oLNL77QRtH4n8K2vCH7SOlzyxR + KdCe0YEZuLRvMQH12nkfgTU8uKSu0n5HPDN6anqrnaeBPg9bWq2N74luFuJYY122ifcQhi2Gf8Aj5PsPwr2B1SKFijKuwZBA6YritG + J3w / 1e1Wa28V6agIzsmlEbD6hsGuG + Mfxv8AD + i6NcWHhjUYdT1SZCiPAweOHP8AEWHHHp / SuBUa9WouZMjEY2NSLblc + bfiYtgPHWvW9jtW1h1C5WHb0CB2wB + QrmrVyJEAO35uTio3d3dpHYsznLMeppAxC4HHOc19CtDwG7l0vFvJZt5zwAOtWFQyKGfj0Qf1rMjcIcqOfU1ILhh1dj9OKu5DRbntvl5ApmmxiPUoHdtqLKpY + gzzURvGIxjj60sd0M8jFIVmfdGg30FvpEc0UivEsAZHU5BG3II9q8haVI2d3bMjOWYFskZzjGKyfgp4ye88Mah4WnuAt1FbsbF25yp4K9RnaTnHpn0rRGl6qvH2iwb / ALd3X + T1zYmMp2SNMPJU73MW8EUkrGT58tyS2eO1NsbOIyB44yrjkbeCfr2rTm8Oag2T51mpP91G / qTSRaNrVu5aN7KUE5 + YsuP0NS4S5bJHurMKHLYctzexfuDI4TG04Y5Oe1RyTCIucdAoC + pJp8ljruSxgscnpiduv / fFQyabq5IZ7S3yDkkXB6 / 98 + 1YqlPqhRxlDe57jEcD7wFXI3G3O8VlxfdqUE7TzXiM60i5d6hZ2NnLeXl0kMES7ndjgCvnP4wa / f8Aj29WytZpYdNgcm3gUcu399x3Pt2H456n41Tzf2rY2 / nSeSYyxj3HbnPXHTNYXhZE2O + xd2cZxzXu4LDwhDn3bPCxmJlOTj0R4jq + l3mmX7WdzGfMHTbyD9KntNGnlUF1ZSe1egfGBVUWMiqFfzSNwGD0rJ0Il4fnJb6816EI3OHmdjEHhaVkDfaVX2K5pY / CzgkvchgPRcV04 + 8B2zT8Da1a + zRHOzlLnTIoIXEzqqDqSKwbpIY2AikZ / XcuMV3d0AdpIBNcx4gVfNLbRuwOcc1nJWLizIjjL5wDx6DNTC3T + KXB / vKRVvRe9akgG0cDvUpDb1MQWcbAbZUb6NSmxI9av3EcflqfLXOPSktOCQKdhXZBpVzd6RqUGoWbkSwOGX0PsfY9K+jvDmsQ6xpEGoW/3JkztPVT3H4Gvn+RVx90flXpPwYZv7Kv03Has4IGeBlamSsDPRXmyQAnSlWQ/wB3FQp941MOlSA/cG6jI96bNsIHAXA7d6cAM9BVS9JATBx8w6VQj//Z

mmm = application/octet-stream 5283 bytes 写入

但是我没有打印任何这些日志语句：

```
if (error)
    console.log('got error = ' + JSON.stringify(error) + '\n');

if (blobResult)
    console.log('blobResult = ' + JSON.stringify(blobResult) + '\n');

if (response)
    console.log('response = ' + JSON.stringify(response) + '\n'); 
```

所以我假设它挂在某个地方，或者我没有正确构建我的代码。谁能看到我做错了什么？

干杯抢

我的消息来源：

[http://social.msdn.microsoft.com/Forums/en-US/wavirtualmachinesforlinux/thread/47bfe142-c459-4815-b09e-bd0a07ca18d5](http://social.msdn.microsoft.com/Forums/en-US/wavirtualmachinesforlinux/thread/47bfe142-c459-4815-b09e-bd0a07ca18d5)

[Node.js base64 对下载的图像进行编码以在数据 URI 中使用](https://stackoverflow.com/questions/3709391/node-js-base64-encode-a-downloaded-image-for-use-in-data-uri)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T04:16:15.680

这是我的简化版。由于magic需要对整个文件进行操作，所以使用流式博客API没有意义，而是为文本API编写的。 `body`将是图像的缓冲区，我怀疑 azure 会对它没有编码感到满意，如果确实需要它，请调用 toString('encoding')。

```
var azure = require('azure')
    , uuid = require('node-uuid')
    , request = require('request')
    , mmm = require('mmmagic')
    , Magic = mmm.Magic
    , stream = require('stream')
    , bs = azure.createBlobService(config.storageAccount, config.storageAccessKey, config.blobHost);

function createVideoThumbnail(video, callback){
  var sURL = video.Thumbnail;
  request(sURL, {encoding:null}, function (err, res, body) {
    // encoding:null makes request return a buffer, which is ideal to run magic.detect on
    magic.detect(body, function (err, res) {
      console.log(res);
      var container = config.imageContainer;
      var blob = uuid().replace(/-/gi, "").toLowerCase() + '.jpg';
      var text = body; //might need to be converted into a string, I don't have azure setup to test
      var options = {
        contentType: res,
        contentTypeHeader: res
      };
      bs.createBlockBlobFromText(container, blob, text, options, function(error, blobResult, response) {
        if (error)
          console.log('got error =', error);  
          // if you give console.log multiple arguments, it will format each of them, 
          // no need to manipulate objects into strings manually

        if (blobResult)
          console.log('blobResult =', blobResult);

        if (response)
          console.log('response =', response);

        // now store in Azure blob storage
        callback();
      });
    });
  });
} 
```

编辑：临时文件版本

```
var azure = require('azure')
    , uuid = require('node-uuid')
    , request = require('request')
    , mmm = require('mmmagic')
    , Magic = mmm.Magic
    , fs = require('fs')
    , bs = azure.createBlobService(config.storageAccount, config.storageAccessKey, config.blobHost);

function createVideoThumbnail(video, callback){
  var sURL = video.Thumbnail;
  var name = uuid().replace(/-/gi, "").toLowerCase() + '.jpg';
  var ws = fs.createWriteStream('./tmp/' + name);
  request(sURL, {encoding:null})
    .pipe(ws).on('close', function () {
    console.log('downloaded');
    magic.detectFile('./tmp/' + name, function (err, res) {
      var container = config.imageContainer;
      var blob = uuid().replace(/-/gi, "").toLowerCase() + '.jpg';
      var options = {
        contentType: res,
        contentTypeHeader: res
      };
      bs.createBlockBlobFromFile(container, name, './tmp/' + name, function (err) {
        callback();
      });
    });
  });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T13:24:12.230

感谢 msdn 论坛上的 Valery Jacobs 能够想出答案。这是一个使用流、请求和实用程序对象的非常干净的解决方案。

:)

[http://social.msdn.microsoft.com/Forums/en-US/windowsazurepurchasing/thread/25c7705a-4ea0-4d9c-af09-cb48a031d06c](http://social.msdn.microsoft.com/Forums/en-US/windowsazurepurchasing/thread/25c7705a-4ea0-4d9c-af09-cb48a031d06c)

# android - 应用停止后未触发广播接收器

> ID：15450105
> 
> 赞同：0
> 
> 时间：2013-03-16T13:54:32.133
> 
> 标签：android, bluetooth, broadcastreceiver, intentfilter, activity-lifecycle

我在意图过滤器中使用 android.bluetooth.device.action.ACL_CONNECTED 在清单中定义了一个广播接收器。

当应用程序在堆栈中时它触发得很好，但是在我从 android 设置中停止它之后它就不会再触发了。有什么建议么？

门尼更新：

```
<receiver android:name=".auto.AppLauncher">
   <intent-filter>
        <action android:name="android.bluetooth.device.action.ACL_CONNECTED" />
   </intent-filter>
</receiver> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T23:59:26.813

您是否在代码中编写了广播接收器？

```
 public class receiver extends BroadcastReceiver {

        @Override
        public void onReceive(Context context, Intent intent) {
            if(intent.getAction().equals(BluetoothDevice.ACTION_ACL_CONNECTED)) {
                    //something you want to do here
            }
        }
    } 
```

# ios - 显示加载消息的 iOS 透明窗口/警报/框覆盖

> ID：15450109
> 
> 赞同：0
> 
> 时间：2013-03-16T13:54:39.167
> 
> 标签：ios, xcode, uiwindow

是否有用于显示透明加载框/警报/窗口的特定类，或者人们是否从 UIWindow 类构建这些加载消息框？

这是我正在谈论的图片。我特别指的是图片中的透明框/窗口，上面写着“重新加载数据”我已经看到其他应用程序使用这种类型的透明覆盖，并且想知道这种特定类型的窗口/警报有一个类。当按下音量按钮时，会出现一个类似的叠加框。

![在此处输入图像描述](../Images/b32abe4fdfcd2b17751867dd444c5bfc.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T13:58:24.977

我想你可以看到这个：[MBProgressHud](https://github.com/jdg/MBProgressHUD)

# css - 为什么悬停对一个链接有效，而对另一个链接无效？

> ID：15450119
> 
> 赞同：0
> 
> 时间：2013-03-15T17:13:21.810
> 
> 标签：css, hyperlink

我的标题中有两个来自“menu_top”类的链接，因此：

```
<a class="menu_top" href="adverteerders.html"  >adverteerders</a>
<a class="menu_top" href="ondernemers.html"  >ondernemers</a> 
```

对应的css代码为：

```
.menu_top {
    font-size: 14px; 
}
.menu_top:link {color: #404040;}
.menu_top:hover {color: #CC0033;}
.menu_top:visited {color: #404040;} 
```

当我执行此代码并将鼠标悬停在“广告商”上时，颜色不会改变。当我将鼠标悬停在“ondernemers”上时，奇怪的是它确实发生了变化。所以我所做的就是复制了 ondernemers 的确切代码，然后它似乎又可以工作了。现在，当我将“ondernemers”重写为“adverteerders”时，它就不再起作用了。但是，当我键入 oadverteerders.html 时，悬停就可以了。

这到底是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T17:40:34.727

CSS 选择器的顺序很重要。当一个元素匹配多个具有相同特性的 CSS 选择器时，后面定义的选择器会覆盖前面的选择器。

所以如果你在`:visited`伪类*之后*使用`:hover`伪类，那么`:visited`样式将优先于`:hover`样式，在它们冲突的地方覆盖它们。

这就是为什么您通常`:hover`要`:active`在`:visited`.

# tsql - T-SQL，从源中的列中获取不同的值，检查目标，如果不存在则插入

> ID：15450123
> 
> 赞同：0
> 
> 时间：2013-03-16T13:55:28.490
> 
> 标签：tsql

我见过几个有点相似的问题，但没有什么和我的完全一样。一个T-SQL大神应该能回答这个是一闪而过。

来自 HRMS 系统馈送的员工和部门代码的源表（馈送器）。我的 SQL Server 数据库中有一个雇员表和一个部门表。我需要有一个存储过程，它将首先在 feeder 表中获取一个不同的部门代码列表，然后检查这些代码以查看它们是否存在于部门表中。如果他们不这样做，则从 feeder 表插入到部门表中。然后，插入到员工表中。

现在我发现其中一位业务分析师一直在 Excel 中获取单独的部门列表并手动添加它们。当数据已经从 HRMS 进入馈线表时，这似乎很疯狂。我可以进行插入，但我不知道如何循环通过 feeder 表来查看每行中的部门代码是否已经存在于部门表中。感谢您的任何帮助。

J。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T14:09:36.450

您可以在 SQL 2008 或更高版本中使用[merge](http://technet.microsoft.com/en-us/library/bb510625.aspx)关键字。我刚刚测试了这个片段：

```
merge department as d
using feeder as f on f.code = d.code
  when not matched then
    insert (code)
      values (f.code); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T15:42:14.743

合并将起作用。由于我们只是在做插入，这也将：

```
INSERT 
    department
    ( 
       departmentCode
    )
SELECT departmentcode 
FROM 
    ( 
        SELECT 
            departmentcode 
        FROM 
            feeder
        EXCEPT 
        SELECT 
            departmentcode
        FROM 
            department
    ) c; 
```

使用两个表中的部门代码索引，这种模式通常表现良好。

# java - 加速度计错误报告

> ID：15450124
> 
> 赞同：2
> 
> 时间：2013-03-16T13:55:32.057
> 
> 标签：java, android, android-emulator

我对 Android 编程很陌生。

我试图编写几个代码，但我陷入了加速度计程序。将程序加载到模拟器后，它会响应*“`Adil_acceleration_3rd`已停止”*。

我为您提供我的文件：

**xml文件：**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".MainActivity" >

    <TextView
        android:id="@+id/acceleration"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:text="X: Y: Z:"
        android:textAppearance="?android:attr/textAppearanceLarge" />

</RelativeLayout> 
```

这是我的`ActivityMain.java`文件：

```
package com.example.adil_acceleration_3rd;

import android.hardware.Sensor;
import android.hardware.SensorEvent;
import android.hardware.SensorEventListener;
import android.hardware.SensorManager;
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.widget.TextView;

public class MainActivity extends Activity implements SensorEventListener{

    Sensor accelerometer;
    SensorManager sm;
    TextView acceleration;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        sm=(SensorManager)getSystemService(SENSOR_SERVICE);
        accelerometer=sm.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);
        sm.registerListener(this, accelerometer, SensorManager.SENSOR_DELAY_NORMAL);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    @Override
    public void onAccuracyChanged(Sensor sensor, int accuracy) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onSensorChanged(SensorEvent event) {
        // TODO Auto-generated method stub
        acceleration.setText("X:"+event.values[0]+
                "\nY:"+event.values[1]+
                "\nZ:"+event.values[2]);
    }

} 
```

LogCat 消息：

```
03-16 13:26:41.210: E/Trace(1926): error opening trace file: No such file or directory (2)
03-16 13:26:41.210: W/Trace(1926): Unexpected value from nativeGetEnabledTags: 0
03-16 13:26:41.210: W/Trace(1926): Unexpected value from nativeGetEnabledTags: 0
03-16 13:26:41.210: W/Trace(1926): Unexpected value from nativeGetEnabledTags: 0
03-16 13:26:41.280: W/Trace(1926): Unexpected value from nativeGetEnabledTags: 0
03-16 13:26:41.280: W/Trace(1926): Unexpected value from nativeGetEnabledTags: 0
03-16 13:26:41.871: W/Trace(1926): Unexpected value from nativeGetEnabledTags: 0
03-16 13:26:41.871: D/AndroidRuntime(1926): Shutting down VM
03-16 13:26:41.871: W/dalvikvm(1926): threadid=1: thread exiting with uncaught exception (group=0xb4d31908)
03-16 13:26:41.880: E/AndroidRuntime(1926): FATAL EXCEPTION: main
03-16 13:26:41.880: E/AndroidRuntime(1926): java.lang.NullPointerException
03-16 13:26:41.880: E/AndroidRuntime(1926):     at com.example.adil_acceleration_3rd.MainActivity.onSensorChanged(MainActivity.java:46)
03-16 13:26:41.880: E/AndroidRuntime(1926):     at android.hardware.SystemSensorManager$ListenerDelegate$1.handleMessage(SystemSensorManager.java:204)
03-16 13:26:41.880: E/AndroidRuntime(1926):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-16 13:26:41.880: E/AndroidRuntime(1926):     at android.os.Looper.loop(Looper.java:137)
03-16 13:26:41.880: E/AndroidRuntime(1926):     at android.app.ActivityThread.main(ActivityThread.java:5039)
03-16 13:26:41.880: E/AndroidRuntime(1926):     at java.lang.reflect.Method.invokeNative(Native Method)
03-16 13:26:41.880: E/AndroidRuntime(1926):     at java.lang.reflect.Method.invoke(Method.java:511)
03-16 13:26:41.880: E/AndroidRuntime(1926):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-16 13:26:41.880: E/AndroidRuntime(1926):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-16 13:26:41.880: E/AndroidRuntime(1926):     at dalvik.system.NativeStart.main(Native Method)
03-16 13:27:04.801: I/Process(1926): Sending signal. PID: 1926 SIG: 9 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T18:14:40.943

在这些情况下，请仔细阅读 logcat。大多数情况下，它会给出一个很好的提示或至少给出问题的位置。

就您而言，重要的几行在这里：

```
03-16 13:26:41.880: E/AndroidRuntime(1926): java.lang.NullPointerException 
03-16 13:26:41.880: E/AndroidRuntime(1926): at com.example.adil_acceleration_3rd.MainActivity.onSensorChanged(MainActivity.java:46) 
```

这是这一行：

```
acceleration.setText("X:"+event.values[0]+ 
```

发生这种情况是因为`acceleration`已声明，但从未初始化。

PS 对于您的下一个问题，请格式化 logcat 输出以便于阅读。

# jquery - 使用 jQuery 向下钻取菜单，是否可以调整大小？

> ID：15450125
> 
> 赞同：1
> 
> 时间：2013-03-15T19:19:07.537
> 
> 标签：jquery

我正在使用[jQuery 向下钻取菜单](http://www.designchemical.com/lab/jquery-drill-down-menu-plugin/getting-started/)，效果很好。我遇到的唯一问题是尺寸。我有 12 个需要显示的导航项。默认情况下它只支持 8。

我正在寻找熟悉该产品并能告诉我菜单的高度属性在哪里的人。

我在[这里](http://jsfiddle.net/6TFg7/)和[这里搜索了 CSS](http://jsfiddle.net/ndQuN/)

以及文件的[JavaScript](http://jsfiddle.net/ASGen/)，但没有找到默认设置的高度

**更新**

html:

```
 <div class="pull-left demo-dd demo-container span3">

        <ul id="drilldown-3">
            <li><a href="#">Record Check</a></li>
            <li><a href="#">Reports/Statistics</a>
            <ul>
                <li><a href="#">USN</a>
                <ul>
                    <li><a href="#">Aclohol Incidents and Status Reports</a>
                    <ul>
                        <li><a href="#">Alcohol Incidents(By FY)</a>
                        <ul>
                            <li><a href="#">Fiscal Year</a></li>
                            <li><a href="#">Category</a></li>
                        </ul></li>
                        <li><a href="#">Alcohol Status Reports</a></li>
                    </ul></li>
                    <li><a href="#">Urinalysis Reports</a></li>
                    <li><a href="#">DAAR Listing</a></li>
                    <li><a href="#">Laboratory Positive Status Report</a></li>
                    <li><a href="#">Screening Listing</a></li>
                    <li><a href="#">Group Profile</a></li>
                    <ul>
                        <li><a href="#">With Details</a></li>
                        <li><a href="#">Without Details</a></li>
                    </ul>
                    <li><a href="#">Unit Profile</a></li>
                    <li><a href="#">ADMITS User and UIC Listings</a></li>
                    <ul>
                        <li><a href="#">ADMITS User Listing</a></li>
                        <li><a href="#">UIC Listing</a></li>
                    </ul>
                </ul></li>
                <li><a href="#">USMC</a></li>
                <li><a href="#">STAFF</a></li>
                <li><a href="#">DAPA/UPC</a></li>
            </ul></li>
            <li><a href="#">DAAR Data</a></li>
            <li><a href="#">Training</a></li>
            <li><a href="#">Edit Unit</a></li>
            <li><a href="#">Screening</a></li>
            <li><a href="#">Facility</a></li>
            <li><a href="#">Treatment</a></li> //Last menu item shown
            <li><a href="#">Waiver Data</a></li>
            <li><a href="#">New Report - Test</a></li>
            <li><a href="#">UIC Search</a></li>
            <li><a href="#">Spice</a></li>
            <li><a href="#">Breathalyzer</a></li>
        </ul>
    </div> 
```

**更新 2**

当我检查其他四个项目所在的 ul 时，我发现它们在页面上，它们只是没有以我可以看到的方式显示

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T19:42:05.677

向下钻取菜单不使用静态设置的高度，因为没有必要，它使用元素高度，该高度取决于`<li>`您拥有的级别数。

大小由使用的`<li>`浏览器的默认字体大小加上填充设置：

```
.demo-dd .dd-menu a {padding: 8px 10px;} 
```

每次在菜单上添加另一个链接时，大小都会增加，您可以通过在菜单的 UL 元素上设置静态高度来覆盖它，如下所示：

```
.drilldown-3 {height:auto!important;} 
```

或者，如果您想使用滚动条

```
.drillddown-3 {overflow-y:auto;} 
```

或者，您可以在 JavaScript 中编辑 max var，但会花费大量时间重新编写代码。就个人而言，您应该使用 height:auto!important

# mysql - 如何做sql循环

> ID：15450136
> 
> 赞同：3
> 
> 时间：2013-03-16T13:56:57.537
> 
> 标签：mysql, sql

表`works(emNo, comNo, salary)`。

对于这些行中的每一行，我可以使用“从作品 emNo 中选择不同的 comNo”来获得不同的 comNo `". Suppose it gives me a column with 5 rows. How do I count "`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-16T13:59:29.183

您可以使用`GROUP BY`聚合每种类型的`comNo`.

```
SELECT
  comNo,
  count(emNo)
FROM
  works
GROUP BY
  comNo 
```

这将返回每个不同值的一行`comNo`以及每组的记录数。

演示：[http ://www.sqlfiddle.com/#!2/4f5df/1](http://www.sqlfiddle.com/#!2/4f5df/1)

# c - 使用 argv[] 构建一个字符转换器程序

> ID：15450140
> 
> 赞同：0
> 
> 时间：2013-03-16T13:57:14.247
> 
> 标签：c, pointers, compare, command-line-arguments, argv

我应该构建一个采用 argv[1] 的程序，并据此将字符转换为小写或大写。但是我被卡住了，因为 C 无法将指针与字符串进行比较。关于如何比较指针和的任何想法一个字符串，我不想逐个字符地比较它们。这是代码

```
 #include <stdio.h>
#include <ctype.h>
#include <string.h>
int main (int argc,char *argv[])
{
    char c;
    if(argc!=2)
    printf("Wrong use of program \n");
    printf("The Format is Lower or Upper \n");
    return -1;
    if ((strcmp(argv[1],"Lower"))==0) 
    {
                          while((c=getchar())!=EOF)
                          {
                                                   printf("-");
                                                   putchar(tolower(c));
                                                   printf("\n");
                                                   } 
                                                   }
    if ((strcmp(argv[1],"Upper"))==0) 
    {
                          while((c=getchar())!=EOF)
                          {
                                                   printf("-");
                                                   putchar(toupper(c));
                                                   printf("\n");
                                                   }
                                                   }
    if ((strcmp(argv[1],"Lower"))!=0 && ((strcmp(argv[1],"Upper"))!=0))
    {
                          printf("Wrong use of program \n");
                          printf("The Format is Lower or Upper \n");
                          return -1;
                          }

                       return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T13:59:28.443

您想要做的是使用函数 strcmp 或 stricmp （不区分大小写）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T14:01:04.700

首先，使用 strcmp 如果字符数组匹配，它将返回 0。

```
if (!strcmp(argv[1], "Lower"))
{ 
```

其次，如果多个语句适用于 if 条件，则这些语句必须包含在 {} 中。

```
if (argc != 2)
{
   printf("Wrong use of program \n");
   printf("The Format is Lower or Upper \n");
   return -1;
} 
```

# verilog - 总是阻止@(*) 是什么意思？

> ID：15450149
> 
> 赞同：7
> 
> 时间：2013-03-16T13:57:53.453
> 
> 标签：verilog

我有谷歌它，但仍然了解它。如果我编写以下代码：

```
module POLY(CLK,RESET_n,IN_VALID,IN,OUT_VALID,OUT);

input         CLK,RESET_n,IN_VALID;
input  [ 3:0] IN;
output        OUT_VALID;
output [12:0] OUT; 
```

然后使用它。

```
always @(*)
begin
.........
end 
```

1\. 这是否意味着`input CLK,RESET_n,IN_VALID;input [ 3:0] IN;`将触发always块或只有在块中使用过的输入才会触发always块？

2.但是它不写posedge或negedge，所以两个边都会触发always块？

提前谢谢。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-16T14:16:56.947

意思是“`(*)`为我建立敏感度列表”。

例如，如果您有一个语句，`a = b + c;`那么您希望`a`每次都更改`b`或`c`更改。换句话说，对&`a`是“敏感的” 。所以要设置这个：`b``c`

```
always @( b or c ) begin
    a = b + c;
end 
```

但是想象一下，你有一个对大量`always`信号敏感的大块。编写敏感度列表需要很长时间。事实上，如果你不小心遗漏了一个信号，行为也可能会改变！`(*)`解决这些问题的速记也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-12T17:46:47.157

它认为所有变量都将在敏感列表中。因此，您无需担心将它们添加到敏感度列表中。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-17T03:08:31.160

它将表现得像组合逻辑。

# database - Free Pascal 中的数据库

> ID：15450157
> 
> 赞同：1
> 
> 时间：2013-03-16T13:58:32.140
> 
> 标签：database, freepascal

我想要一些包含大量文本的文件数据库。我知道如何创建和读取文件，但在这种情况下，我需要找到特定的行然后读取它。我真的不在乎永久。我的第一个想法是创建许多较小的文件并将它们保存在一些存档中，但我什至不知道 fp 是否支持存档。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T14:26:05.963

大多数 Borland 风格的方言不允许在 TEXTfiles 中搜索。（文本（文件）类型为帕斯卡）。

有两个可能的方向：

1.  文件很小（在内存中读取、处理、写入
2.  切换到二进制（文件）模式，这样就可以在文件中seek()，并保留一个索引以便快速访问。

# asp.net - 从 C# 类访问 ASP.NET 页面的 TextBox 值

> ID：15450158
> 
> 赞同：3
> 
> 时间：2013-03-16T13:58:39.680
> 
> 标签：asp.net, httpcontext

假设 ASP.NET 页面上有一个 TextBox

```
<asp:TextBox id="DateTextBox" runat="server" /> 
```

在代码隐藏中设置了一些值。

如何通过 HttpContext 或任何其他方式从另一类 C# 代码文件访问该值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T14:11:07.840

You can access a property in you page via `HttpContext` even from a static method.

in your page:

```
public string DateTextBoxText
{
    get{ return this.DateTextBox.Text; }
    set{ this.DateTextBox.Text = value; }
} 
```

somewhere else(even in a different dll):

```
public class Data
{
   public static string GetData() 
   { 
       TypeOfYourPage page = HttpContext.Current.Handler as TypeOfYourPage;
       if (page != null)
       {
          return page.DateTextBoxText;
          //btw, what a strange method!
       }
       return null;
    }
} 
```

Note that this works only if it's called from within a lifecycle of this page.

It's normally better to use `ViewState` or `Session` to maintain variables across postback. Or just use the property above directly when you have a reference to this page.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T14:01:05.927

您可以在控件内创建一个`public property`返回对文本框的引用。

然后，您可以使用此属性来引用文本框。

或者

您可以`session`在整个应用程序中存储并访问它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T14:03:58.933

将其存储在`HttpContext Session` [http://www.codeproject.com/Articles/32545/Exploring-Session-in-ASP-Net](http://www.codeproject.com/Articles/32545/Exploring-Session-in-ASP-Net)

```
//Storing UserName in Session
Session["DateTextBox"] = DateTextBox.Text; 
```

现在，让我们看看如何从会话中检索值：

```
//Check weather session variable null or not
if (Session["DateTextBox"] != null)
{
 // use it...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T14:08:08.900

您可以在回发期间将值放入 Session 中。然后从另一个类中的 Session 访问它。所以在你的表单加载事件中写下：

```
Session["MyValue"] = DateTextBox.Text 
```

and then in the other class write this:

```
var val = HttpContext.Current.Session["MyValue"]; 
```

# java - JPanel 中的新不可见层

> ID：15450159
> 
> 赞同：1
> 
> 时间：2013-03-16T13:58:43.940
> 
> 标签：java, swing, layer, jlayeredpane, glasspane

我想寻求帮助。我想要这样的东西：http: [//docs.oracle.com/javase/tutorial/uiswing/components/rootpane.html#glasspane](http://docs.oracle.com/javase/tutorial/uiswing/components/rootpane.html#glasspane)

![在此处输入图像描述](../Images/37f3710dc328ba3eb398c3a336ba81f5.png)

我有这个带有地图的应用程序，我想在一个新的不可见图层中有一张小图片。小图片可以通过 JSlider 向上和向左移动。该层应该只在“标签”之上。A 有这个代码：

```
 private JPanel mujPanel5() {
    JSlider [] posuvniky = new JSlider[2];
    posuvniky[0] = new JSlider(SwingConstants.HORIZONTAL, 0, 100, 30);
    posuvniky[1] = new JSlider(SwingConstants.VERTICAL, 0, 100, 60);
    for (int i = 0; i < posuvniky.length; i++) {
        posuvniky[i].addChangeListener(new ZmenaPosuvniku5()); //Listener do nothing
    }

    URL umisteniMapy = this.getClass().getResource("map.jpg");
    Icon obrazek = new ImageIcon(umisteniMapy);
    JLabel label = new JLabel(obrazek, SwingConstants.CENTER);
    label.setOpaque(true);
    label.setBackground(Color.white);

    JPanel panel = new JPanel();
    panel.setLayout(new BorderLayout());
    panel.add(posuvniky[0], BorderLayout.NORTH);
    panel.add(posuvniky[1], BorderLayout.WEST);
    panel.add(label, BorderLayout.CENTER);
    return panel;
} 
```

谢谢大家。

嗯...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T15:11:29.933

> 我不知道如何创建描述的不可见层

请参阅[如何使用分层窗格](http://docs.oracle.com/javase/tutorial/uiswing/components/layeredpane.html)。

# java - 如何从 HTML 网站中提取数据？

> ID：15450161
> 
> 赞同：1
> 
> 时间：2013-03-16T13:59:12.843
> 
> 标签：java, html, automation, extraction

我需要从基于 html 的网站中提取一些文本。我有大约 3000 个 URL，需要从它们的 html 中提取一行文本。我需要的数据如下所示：

```
 <html xmlns:og="http://opengraphprotocol.org/schema/">
<head>
<title>Pink Floyd Live Audio Feeds</title>// the line i need
... 
```

我怎样才能自动化这个过程？我擅长 Java，因此首选使用该语言的方法。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T14:02:57.820

您可以使用[jsoup](http://jsoup.org/cookbook/extracting-data/example-list-links)，它是一个很好的 Java 库，用于处理真实世界的 HTML。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T15:10:30.717

您可以逐行阅读 html 文本，当您发现`</title>`停止阅读页面的其余部分时。这是如何完成的（我假设`<title>`并且与`</title>`您在评论中指出的 HTML 代码在同一行）

```
public static String getTitle(String address) throws IOException {
    URL url = new URL(address);
    BufferedReader reader = null;
    try {
        reader = new BufferedReader(new InputStreamReader(url.openStream()));

        String line = null;
        while ((line = reader.readLine()) != null) {
            int start = line.indexOf("<title>");
            int end = line.indexOf("</title>");

            if (start != -1) {
                return line.substring(start + "<title>".length(), end);
            }
        }

        return "";
    } finally {
        if (reader != null)
            reader.close();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T14:03:34.597

遍历您的 URL 列表并用于`HttpURLConnection`下载页面。在所有页面处理数据以提取您需要的信息之后。[这是 HttpURLConnection java 文档页面](http://docs.oracle.com/javase/6/docs/api/java/net/HttpURLConnection.html)

# batch-file - 批处理中的“计数器”

> ID：15450163
> 
> 赞同：8
> 
> 时间：2013-03-16T13:59:22.090
> 
> 标签：batch-file

我正在尝试制作一个批处理文件，每次循环时都会将变量增加 1，然后检查变量是否等于 5，如果不是，则再次循环。我知道这可能有一个 while 循环，但我不知道该怎么做，我现在只是在享受学习 Batch 的乐趣

这是代码，它没有按应有的方式工作，它只显示一个 0: 然后什么也不做。那么我将如何修复它呢？我有一种感觉，我错误地设置和增加了变量，也许它对 2 个 if 语句感到困惑？（是否有 else if....？） 无论如何，感谢您的帮助

```
@echo off
set /p i=0:
goto A

:A
set /p i=i+1:
if i != 5 goto C
if i == 5 goto B

:C
echo Test :D

:B
pause>nul 
```

注意：我对 Batch 了解不多，也不是专业人士，但我喜欢学习，我只是为了将来参考而这样做，因为我喜欢它。所以，这段代码可能不太好，但我想知道如何实现这一点。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-16T14:18:41.297

这是一种模拟您尝试完成的 while 循环的方法。只`goto`需要一个：

```
@echo off
set /a x=0
:while
if %x% lss 5 (
  echo %x%
  pause>nul
  set /a x+=1
  goto :while
)
echo Test :D 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-07-09T21:27:57.157

你可以用一个简单的`FOR`命令来做到这一点：

```
for /l %%x in (0,1,100) do (
echo %%x
) 
```

您可以替换`100`为您想要的数字

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-16T14:07:43.857

要将数值设置为变量，您可以使用`/a`开关：

> /A 开关指定等号右侧的字符串是计算的数值表达式。

（键入`SET /?`所有帮助）。

其次，检查你的`goto`流程——这永远不会循环回到 A。

第三，检查`if`表达式的语法（`!=`批量不存在）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-16T14:14:05.873

这应该有效：

```
@echo off
set var1=0

:loop
    set /a var1=%var1%+1

echo %var1%

if %var1% EQU 5 (
    goto :end
) else (
    goto :loop
)

:end
    pause 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-22T20:27:42.570

```
@echo off
set a=0
:Count
set /a a=a+1
echo %a%
goto Count 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-04-03T15:46:08.740

试试这个：

```
@if (@CodeSection == @Batch) @then

@echo off
:a
cls

color c
echo --------------
echo start:
echo --------------
set /p start=
cls

echo --------------
echo start: %start%
echo --------------

echo --------------
echo stop:
echo --------------
set /p stop=
cls

echo --------------
echo start: %start%
echo --------------

echo --------------
echo stop: %stop%
echo --------------
echo. 
echo. 

echo Start in:
timeout /t 2 /nobreak >nul

echo. 5
timeout /t 1 /nobreak >nul

echo. 4
timeout /t 1 /nobreak >nul

echo. 3
timeout /t 1 /nobreak >nul

echo. 2
timeout /t 1 /nobreak >nul

echo. 1
timeout /t 1 /nobreak >nul
cls

echo --------------
echo start: %start%
echo --------------

echo --------------
echo stop: %stop%
echo --------------

echo.
echo.
echo.

echo ============================================
    set SendKeys=CScript //nologo //E:JScript "%~F0"
    %SendKeys% ">----"
    %SendKeys% "{enter}"
    :while 
    echo %start%
        %SendKeys% "%start%"
    %SendKeys% "{enter}"
    set /a start=start+1
    timeout /t 1 /nobreak >nul
    if %start% leq %stop% goto :while
goto :end

:end
echo ============================================
%SendKeys% ">----"
%SendKeys% "{enter}"

:c
echo count again? Y/N
set /p return=
if %return% == Y goto :a
if %return% == N goto :b
goto :c

:b
@end

var WshShell = WScript.CreateObject("WScript.Shell");
WshShell.SendKeys(WScript.Arguments(0)); 
```

# wso2 - 在 wso2 api manager 中，如何添加自定义中介

> ID：15450165
> 
> 赞同：0
> 
> 时间：2013-03-16T13:59:25.337
> 
> 标签：wso2

我阅读了[WSO2 API Manager 和 XACML Entitlement](https://stackoverflow.com/questions/11949590/wso2-api-manager-and-xacml-entitlement)上的帖子，其中说 API Manager 中的配置文件可以修改为在“顺序”中使用权利中介。

我知道如何通过 Web 界面编辑此配置。但是哪个文件包含这个配置？

此配置没有元素或元素（元素中的元素除外）。我应该把元素放在哪里？

如果我创建自己的权利中介，如何将其插入或提供给 API Manager？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T16:46:41.077

转到 APIM 发行版，HOME\repository\deployment\server\synapse-configs\default\api 文件夹，您将在其中看到您从发布者创建的 api 配置。通过编辑配置并重新启动服务器，在此处添加您的调解器。

# mongodb - 是否可以仅通过一次 find() 调用来获取此集合？

> ID：15450166
> 
> 赞同：0
> 
> 时间：2013-03-16T13:59:27.897
> 
> 标签：mongodb, mongoose

我想获得一组包含特定文件的文件（我有`_id`这个文件的字段）。

困难在于还要获得该文档之前和之后的3个文档（按插入顺序）。

我真的怀疑在一个请求中是否有可能，因为如果我使用`where`规则来匹配我想要获取的文档的 id，我不知道我如何也可以匹配其他的。

所以我知道我可以`find`为文档做一个，并获得 3 个最旧和最新的，另一个参考字段`find`的日期`created_at`，但我很想知道我是否可以改进这种处理。

# delphi - 如何读取或写入巨大的 Unicode 文件？

> ID：15450170
> 
> 赞同：0
> 
> 时间：2013-03-16T13:59:36.727
> 
> 标签：delphi, unicode, delphi-2006

我需要将巨大的 Unicode 文件读入我的程序并转换为 ANSI 进行解析，对于某些文件，将它们再次存储为 Univode，而其他文件应该在 ANSI 代码页中。

据我了解，简单的读/写不支持 Unicode 文本，并且对于最大的文件（有些可能大至 300 Mb 甚至更大）使用`twidestring.loadfromfile`是毫无疑问的，因为内存使用和加载时间。

我一直想知道加载块是否可以成为解决方案，但据我所知，它不支持 Unicode BOM ？

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T15:16:34.830

在 Delphi 中，您还可以使用内存映射文件。

> 内存映射文件的主要好处是提高 I/O 性能，尤其是在用于大文件时。...内存映射文件的一个可能好处是“延迟加载”，因此即使对于非常大的文件也使用少量 RAM。

内存映射文件。（2013 年 2 月 26 日）。在维基百科，免费百科全书。检索于 2013 年 3 月 17 日 15:14，来自[http://en.wikipedia.org/w/index.php?title=Memory-mapped_file&oldid=540609840](http://en.wikipedia.org/w/index.php?title=Memory-mapped_file&oldid=540609840)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T16:59:22.033

德语“Delphi 论坛”中有一个出色且非常快速的[文本阅读器。](http://www.delphipraxis.net/151898-sj-mmf-file-reader-0-2-schneller-textdatei-reader.html)它使用内存映射文件。

您可能能够修改它以读取 Unicode 文本文件。但是，您可能必须自己测试 BOM。

# jquery-mobile - 淘汰赛和 jQuery Mobile 的绑定问题

> ID：15450171
> 
> 赞同：1
> 
> 时间：2013-03-16T13:59:45.990
> 
> 标签：jquery-mobile, knockout.js

**更新**：下面的第三个项目符号（“所以我尝试了以下”部分）是我最接近修复的。我*想*我基本上需要1）禁用按钮，2）添加ui-disable，3）jqm刷新，所有这些都在数据绑定或模型中。

我试图让其中一个淘汰[演示](http://knockoutjs.com/examples/gridEditor.html)与 jqm 一起运行，以便在我的项目中构建类似的东西。它主要工作，除了提交按钮~~不禁用~~变为禁用但如果项目 = 0 时不会显示为灰色。

如果您删除 jqm，该示例可以正常工作并且按钮变为灰色。我意识到 jqm 可能由于 dom 操作而与淘汰赛发生冲突，所以我尝试了以下方法：

*   在模型方法中触发样式刷新：`$('button').button();`或`$('.ui-page-active' ).page( 'destroy' ).page();`
*   之后开始绑定`pageinit`。这打破了整个事情。
*   作为测试，我尝试了数据绑定来设置 ui-disable 而不是禁用按钮。它应用了类，但 jqm 需要以某种方式刷新。我可以将代码放入数据绑定中以进行刷新吗？

    `<button data-bind="css: {'ui-disable': gifts().length > 0}" type='submit'>Submit</button>`

这是我用来解决此问题的小提琴：http: [//jsfiddle.net/wtjones/wkEgn/](http://jsfiddle.net/wtjones/wkEgn/)

我错过了什么？

```
 <form action='/someServerSideHandler'>
    <p>You have asked for <span data-bind='text: gifts().length'>&nbsp;</span> gift(s)</p>
    <table data-bind='visible: gifts().length > 0'>
        <thead>
            <tr>
                <th>Gift name</th>
                <th>Price</th>
                <th />
            </tr>
        </thead>
        <tbody data-bind='foreach: gifts'>
            <tr>
                <td><input class='required' data-bind='value: name, uniqueName: true' /></td>
                <td><input class='required number' data-bind='value: price, uniqueName: true' /></td>
                <td><a href='#' data-bind='click: $root.removeGift'>Delete</a></td>
            </tr>
        </tbody>
    </table>

    <button data-bind='click: addGift'>Add Gift</button>
    <button data-bind='enable: gifts().length > 0' type='submit'>Submit</button>
</form> 
```

型号代码：

```
var GiftModel = function(gifts) {
    var self = this;
    self.gifts = ko.observableArray(gifts);

    self.addGift = function() {
        self.gifts.push({
            name: "",
            price: ""
        });       
    };

    self.removeGift = function(gift) {
        self.gifts.remove(gift);                
    };

    self.save = function(form) {
        alert("Could now transmit to server: " + ko.utils.stringifyJson(self.gifts));
        // To actually transmit to server as a regular form post, write this: ko.utils.postJson($("form")[0], self.gifts);
    };
};

var viewModel = new GiftModel([
    { name: "Tall Hat", price: "39.95"},
    { name: "Long Cloak", price: "120.00"}
]);
ko.applyBindings(viewModel);

// Activate jQuery Validation
//$("form").validate({ submitHandler: viewModel.save }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T16:04:26.990

是的。如果通过 JS 更改按钮属性（或使用 KO 更改这些属性），则必须调用 refresh 方法来更新视觉样式。

```
$('button').button('refresh'); 
```

所以我建议创建自定义绑定而不是默认`enable`更新移动按钮样式（如果应用）：

```
ko.bindingHandlers.mobileEnable = {
    update: function(el) {
        ko.bindingHandlers.enable.update.apply(el, arguments);
        $.fn.button && $(el).button('refresh');
    }
} 
```

和...

```
<button data-bind='mobileEnable: gifts().length > 0' type='submit'>Submit</button> 
```

更正小提琴：http: [//jsfiddle.net/wkEgn/2/](http://jsfiddle.net/wkEgn/2/)

# c++ - C++：使用 STL 的排序来对不同列上的二维整数数组进行排序的时间复杂度

> ID：15450173
> 
> 赞同：0
> 
> 时间：2013-03-16T13:59:51.777
> 
> 标签：c++, performance, stl, sorting, time-complexity

假设我们有以下二维整数数组：

```
1 3 3 1
1 0 2 2
2 0 3 1
1 1 1 0
2 1 1 3 
```

我试图创建一个实现，用户可以将数组本身和字符串作为输入。上面示例中的字符串示例`03`将意味着用户希望根据第一列和第四列对数组进行排序。

所以在这种情况下，排序的结果如下：

```
1 1 1 0
1 3 3 1
1 0 2 2
2 0 3 1
2 1 1 3 
```

我不太了解 STL 函数中使用的比较函数`sort`，但是在搜索后我创建了以下简单实现：

我创建了一个名为`Comparator.h`

```
 class Comparator{

     private:
      std::string attr;

     public:
      Comparator(std::string attr) { this->attr = attr; }

      bool operator()(const int* first, const int* second){
       std::vector<int> left;
       std::vector<int> right;
       size_t i;
       for(i=0;i<attr.size();i++){
                left.push_back(first[attr.at(i) - '0']);
                right.push_back(second[attr.at(i) - '0']);
        }
        for(i=0;i<left.size();i++){
                if(left[i] < right[i]) return true;
                else if(left[i] > right[i]) return false;
        }
        return false;
      }

     }; 
```

我需要知道字符串中的信息，所以我需要有一个类，这个字符串是一个私有变量。在`operator`I 内部有两个参数`first`和`second`，每个参数都指向一行。现在有了这些信息，我创建了一个`left`和一个`right`向量，其中在`left`向量中我只有对`first`排序很重要并且由字符串变量指定的行号，在`right`向量中我只有`second`重要的行号到排序并由字符串变量指定。

然后我进行所需的比较并返回真或假。用户可以通过在类中调用这个函数来使用这个`Sorting.cpp`类：

```
void Sorting::applySort(int **data, std::string attr, int amountOfRows){

  std::sort(data, data+amountOfRows, Comparator(attr));

 } 
```

这是一个使用示例：

```
int main(void){
    //create a data[][] variable and fill it with integers
    Sorting sort;

sort.applySort(data, "03", number_of_rows);
} 
```

我有两个问题：

**第一个问题**

我的实施能变得更好吗？我使用了额外的变量，比如`left`和`right`向量，然后我有一些 for 循环，这给排序操作带来了一些额外的成本。

**第二个问题**

由于额外的成本，排序的时间复杂度会变差多少？我知道 STL`sort`是`O(n*logn)`您`n`要排序的整数的数量。这里`n`有不同的含义，`n`是行数，每行最多可以有`m`整数，而这些整数又可以`Comparator`通过覆盖`operator`函数并使用额外的变量（向量）和 for 循环在类中找到。

因为我不确定 STL 是如何`sort`实现的，所以我只能做一些估计。我最初的估计是对排序很重要的列数在`O(n*m*log(n))`哪里`m`，但我不能 100% 确定它。

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T14:12:21.833

你当然可以改进你的比较器。无需复制列然后进行比较。而不是这两个`push_back`调用，只需比较值并根据它们是小于、大于还是等于返回 true、返回 false 或继续循环。

复杂性的相关部分`sort`是`O(n * log n)`比较（在 C++11 中。C++03 并没有给出很好的保证），其中`n`是被排序的元素的数量。因此，只要您的比较器是`O(m)`，您的估计就可以对`n`行进行排序。因为`attr.size() <= m`，你是对的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T14:09:22.003

第一个问题：你不需要 left 和 rigth - 你一个接一个地添加元素，然后以相同的顺序迭代向量。因此，与其将值推送到向量然后对其进行迭代，不如简单地使用在第一个周期中生成它们的值，如下所示：

```
 for(i=0;i<attr.size();i++){
            int left = first[attr.at(i) - '0'];
            int right = second[attr.at(i) - '0'];
            if(left < right) return true;
            else if(left > right) return false;
    } 
```

第二个问题：时间**复杂度**可以提高吗？不适用于使用直接比较的排序算法。另一方面，您在这里解决的问题有点类似于[radix sort](http://en.wikipedia.org/wiki/Radix_sort)。所以我相信你应该能够在 O(n*m) 中进行排序，其中 m 是排序标准的数量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T14:10:22.153

1）首先，您应该在构造函数中将字符串转换为整数数组。验证值小于列数。

（您也可以有另一个将整数数组作为参数的构造函数。一个轻微的改进是允许负值表示该列的排序顺序是相反的。在这种情况下，值将是 -N..- 1 , 1..N)

2) 不需要中间的左、右数组。

# for-loop - 在 Octave 中写“for”的更简单方法

> ID：15450177
> 
> 赞同：3
> 
> 时间：2013-03-16T14:00:05.120
> 
> 标签：for-loop, matrix, replace, octave

我用 Octave 编写了以下两段代码。

给定一个矩阵“img”，我想：

将所有不等于 255 的元素替换为 0：

```
for i = 1:m
    for j = 1:n
        if (img(i,j) ~= 255)
            img(i,j) = 0;
        endif
    endfor
endfor 
```

用 0 替换所有负数元素，用 255 替换所有大于 255 的元素：

```
for i = 1:m
    for j = 1:n
        if (img(i,j) < 0)
            img(i,j) = 0;
        endif
        if (img(i,j) > 255)
            img(i,j) = 255;
        endif
    endfor
endfor 
```

有没有更简单的方法来写这个？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-16T14:37:41.117

像 MATLAB 一样的 Octave 针对矩阵或向量计算进行了优化。也就是说，它有很多优化的编译代码，可以很好地处理矩阵乘法或计算逆矩阵或添加两个矩阵等。

另一方面，如果你创建了一个 for 循环，它就不能利用任何优化的代码并且必须被解释，所以通常需要更长的时间来做同样的事情。

以向量（或矩阵）形式编写代码或转换为该形式的代码风格称为“向量化”。

[http://www.gnu.org/software/octave/doc/interpreter/Basic-Vectorization.html](http://www.gnu.org/software/octave/doc/interpreter/Basic-Vectorization.html)

对于您要求的第二种情况，您应该尝试以下操作：

```
 img(img<0) = 0;

  img(img>255) = 255; 
```

对于第一种情况，如下所示：

```
 img(img ~= 255) = 0; 
```

# php - 从 Zend Framework 1 迁移到 Zend Framework 2

> ID：15450178
> 
> 赞同：3
> 
> 时间：2013-03-16T14:00:05.600
> 
> 标签：php, zend-framework, zend-framework2

我们有相当大的应用程序，其中包含使用 Zend 框架 1 编写的大约 8 个模块（大模块），并且已经由几个开发人员开发了 3 年多。此外，它每天都有很高的流量。我们还使用 Amozon s3、Sphinx、Memcache 和其他一些第三方服务。

将它迁移到 Zend 框架 2 是个好主意吗？因为当我们简要浏览文档时，Zend 框架 2 似乎已被完全重写。因此，我们认为我们将无法轻松迁移应用程序，而不是根据 ZF 2 重新编写应用程序。

有价值的想法将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-17T05:09:33.070

你说得对，ZF2 是完全不同的动物。事实上，如此不同，没有一种万能的迁移计划/策略。

但是，我最近进行了类似的迁移。这是一个相当复杂的业务线应用程序，最初编写了大约 18 个月，具有大量不同的功能。该决定的主要驱动因素是模块和事件系统的改进。

在我们的案例中，它变成了产品的一个主要版本，最终包括一系列 UI 更改以及所有管道。

假设你喜欢 ZF1，好消息是 ZF2 是更好的框架（作为一个框架）。ModuleManager、EventManager、Di 和 ServiceManager 组件（以及一般的 MVC 相关的东西）真的很棒，一旦你了解它们。坏消息是它们与 ZF1 完全不同。因此，您至少要注册彻底检查您的调度和路由，您将与 Zend_Registry 说再见（ServiceManager/ServiceLocator 是一个巨大的改进）。

另一个好消息是，您几乎可以肯定地保留所有旧的 ZF1 型组件，只要您需要它们。因此，如果您依赖 Zend_Cache、Zend_Log、Zend_Mail 等，稍微调整一下自动加载器配置应该可以实现。

我的建议是，如果您确实冒险，请考虑先迁移到 ZF2-as-a-framework，然后再担心 ZF2-as-a-component-library。

如果您坚持使用 fat-model/skinny-controller 范例，那么以相当直接的方式替换 Controllers、Front-Controller、Zend_Application 的东西可能是可行的。一旦将其投入生产，您就可以在时间允许的情况下消除对 ZF1 组件的依赖。就我而言，没有太多这样的事情，因为事情已经很好地分解和包装了（因此，例如，从 Zend_Cache 移动到 Zend\Cache 是微不足道的）

最后，您应该预先知道视图层的东西（主要是与助手相关的东西）也不同。如果您到处都有一堆复杂的与视图相关的东西（部分、自定义视图助手等），您需要预期重写它们，或者找到一种方法来使用 ZF2 中的旧 Zend_View 东西，以便您可以迁移零碎的。我并没有真正处理这个问题，因为我们的界面相当简单，我们把它当作一个大修 UI 的机会。

只是我的 0.02 美元，但我希望它有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T23:19:16.927

**没有快速简便**的迁移方法，因为 ZF2 与 ZF1 非常不同。

相关：[从 Zend Framework 1 到 2 的逐步迁移](https://stackoverflow.com/questions/13414282/step-by-step-migration-from-zend-framework-1-to-2)

# iphone - AVAudioRecoder，减少录制的音频文件内存

> ID：15450182
> 
> 赞同：0
> 
> 时间：2013-03-16T14:00:43.683
> 
> 标签：iphone, ios, objective-c, ipad, avaudiorecorder

我正在使用 AVAudioRecorder 录制音频，当前录制了 10 秒，并且音频录制成功，将其保存在本地目录中，现在 10 秒的音频占用 1.8 MB 的内存，如何减少此音频文件内存？.i我正在使用下面的代码来录制音频。

```
-(void)viewWillAppear:(BOOL)animated{

NSArray *dirPaths;
NSString *docsDir;

dirPaths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
docsDir = [dirPaths objectAtIndex:0];

NSString *soundFilePath = [docsDir stringByAppendingPathComponent:@"sound.caf"];
path_audio = soundFilePath;
NSURL *soundFileURL = [NSURL fileURLWithPath:soundFilePath];
NSDictionary *recordSettings = [NSDictionary dictionaryWithObjectsAndKeys:
[NSNumber numberWithInt:AVAudioQualityMin],AVEncoderAudioQualityKey,
[NSNumber numberWithInt:16],AVEncoderBitRateKey,
[NSNumber numberWithInt: 2],AVNumberOfChannelsKey,
[NSNumber numberWithFloat:44100.0],AVSampleRateKey,nil];
NSError *error = nil;
 audioRecorder = [[AVAudioRecorder alloc]initWithURL:soundFileURL settings:recordSettings error:&error];

if( !audioRecorder ){
    NSLog(@"recorder: %@ %d %@", [error domain], [error code], [[error userInfo] description]);
    UIAlertView *alert  =
    [[UIAlertView alloc] initWithTitle: @"Warning" message: [error localizedDescription] delegate: nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [alert show];
    return;
       }

if ( error )
      {
    NSLog( @"error: %@", [error localizedDescription] );
      }
else {

   [self recordAudio];
     }

}

 -(void) recordAudio
 {
if (!audioRecorder.recording)
    {
        audioRecorder.delegate=self;
        [audioRecorder recordForDuration:10];
    }
  } 
```

任何答案都应该受到赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T05:41:15.543

是的，我通过将 recordSettings 参数设置为，将其减少到 33kb，

```
 NSDictionary *recordSettings =
                             [[NSDictionary alloc] initWithObjectsAndKeys:
                             [NSNumber numberWithFloat: 44100.0], AVSampleRateKey,
                             [NSNumber numberWithInt: kAudioFormatMPEG4AAC], AVFormatIDKey,
                             [NSNumber numberWithInt: 1], AVNumberOfChannelsKey,
                             [NSNumber numberWithInt: AVAudioQualityMedium],AVEncoderAudioQualityKey,
                              nil]; 
```

//出于我的目的.. /*
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection: (NSInteger)section { NSInteger imageCount = [self.array_HotelImage count]/4;

return ([self.array_HotelImage count]%4==0)?imageCount:imageCount+1; }

// 自定义表格视图单元格的外观。

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath

{
static NSString *CellIdentifier = @"ImageGalleryCustomCell";

ImageGalleryCustomCell *objImageGalleryCustomCell = (ImageGalleryCustomCell*)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if(objImageGalleryCustomCell == nil)

{
    NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"ImageGalleryCustomCell" owner:self options:nil];

    for (id currentObject in topLevelObjects)
    {
        if ([currentObject isKindOfClass:[UITableViewCell class]])

        {
            objImageGalleryCustomCell =  (ImageGalleryCustomCell *) currentObject;

            break;
        }
    }
objImageGalleryCustomCell = [self hideAndShowControlWithData:objImageGalleryCustomCell andIndexpath:indexPath];

}
return objImageGalleryCustomCell; 
```

}

```
 - (ImageGalleryCustomCell*)hideAndShowControlWithData:(ImageGalleryCustomCell*)objImageGalleryCustomCell andIndexpath:(NSIndexPath*)indexPathValue

 {
int imageCount = [self.array_HotelImage count];
if(indexPathValue.row==imageCount/4)

{
    switch(imageCount%4)
    {
        case 1:

        {
            objImageGalleryCustomCell.buttonImgGalleryView1.hidden = objImageGalleryCustomCell.imgGalleryView1.hidden = NO;

            objImageGalleryCustomCell.buttonImgGalleryView2.hidden = objImageGalleryCustomCell.buttonImgGalleryView4.hidden = objImageGalleryCustomCell.buttonImgGalleryView3.hidden = objImageGalleryCustomCell.imgGalleryView2.hidden= objImageGalleryCustomCell.imgGalleryView3.hidden = objImageGalleryCustomCell.imgGalleryView4.hidden = YES;

            objImageGalleryCustomCell.buttonImgGalleryView1.tag = (indexPathValue.row*4+0);
            [objImageGalleryCustomCell.imgGalleryView1 setImageWithURL:[NSURL URLWithString:[self.array_HotelImage objectAtIndex:(indexPathValue.row*4+0)]] placeholderImage:placholderImage];

            objImageGalleryCustomCell.buttonImgGalleryView1.tag = (indexPathValue.row*4+0);
        }

            break;
        case 2:
        {

            objImageGalleryCustomCell.buttonImgGalleryView1.hidden = objImageGalleryCustomCell.buttonImgGalleryView2.hidden=objImageGalleryCustomCell.imgGalleryView1.hidden=objImageGalleryCustomCell.imgGalleryView2.hidden=NO;

            objImageGalleryCustomCell.buttonImgGalleryView3.hidden = objImageGalleryCustomCell.buttonImgGalleryView4.hidden = objImageGalleryCustomCell.imgGalleryView3.hidden = objImageGalleryCustomCell.imgGalleryView4.hidden=YES;

            objImageGalleryCustomCell.buttonImgGalleryView1.tag = (indexPathValue.row*4+0);
            [objImageGalleryCustomCell.imgGalleryView1 setImageWithURL:[NSURL URLWithString:[self.array_HotelImage objectAtIndex:(indexPathValue.row*4+0)]] placeholderImage:placholderImage ];

            objImageGalleryCustomCell.buttonImgGalleryView2.tag = (indexPathValue.row*4+1);
            [objImageGalleryCustomCell.imgGalleryView2 setImageWithURL:[NSURL URLWithString:[self.array_HotelImage objectAtIndex:(indexPathValue.row*4+1)]] placeholderImage:placholderImage];

        }
            break;
        case  3:

        {
            objImageGalleryCustomCell.buttonImgGalleryView1.hidden = objImageGalleryCustomCell.buttonImgGalleryView2.hidden= objImageGalleryCustomCell.imgGalleryView1.hidden=objImageGalleryCustomCell.imgGalleryView2.hidden=objImageGalleryCustomCell.buttonImgGalleryView3.hidden = objImageGalleryCustomCell.imgGalleryView3.hidden = NO;

            objImageGalleryCustomCell.buttonImgGalleryView4.hidden =objImageGalleryCustomCell.imgGalleryView4.hidden = YES;

            objImageGalleryCustomCell.buttonImgGalleryView1.tag = (indexPathValue.row*4+0);
            [objImageGalleryCustomCell.imgGalleryView1 setImageWithURL:[NSURL URLWithString:[self.array_HotelImage objectAtIndex:(indexPathValue.row*4+0)]] placeholderImage:placholderImage];

            objImageGalleryCustomCell.buttonImgGalleryView2.tag = (indexPathValue.row*4+1);
            [objImageGalleryCustomCell.imgGalleryView2 setImageWithURL:[NSURL URLWithString:[self.array_HotelImage objectAtIndex:(indexPathValue.row*4+1)]] placeholderImage:placholderImage];

            objImageGalleryCustomCell.buttonImgGalleryView3.tag = (indexPathValue.row*4+2);
            [objImageGalleryCustomCell.imgGalleryView3 setImageWithURL:[NSURL URLWithString:[self.array_HotelImage objectAtIndex:(indexPathValue.row*4+2)]] placeholderImage:placholderImage];

        }
            break;
    }

}
else
{
    objImageGalleryCustomCell.buttonImgGalleryView1.tag = (indexPathValue.row*4+0);

    [objImageGalleryCustomCell.imgGalleryView1 setImageWithURL:[NSURL URLWithString:[self.array_HotelImage objectAtIndex:(indexPathValue.row*4+0)]] placeholderImage:placholderImage];

    objImageGalleryCustomCell.buttonImgGalleryView2.tag = (indexPathValue.row*4+1);
    [objImageGalleryCustomCell.imgGalleryView2 setImageWithURL:[NSURL URLWithString:[self.array_HotelImage objectAtIndex:(indexPathValue.row*4+1)]] placeholderImage:placholderImage];

    objImageGalleryCustomCell.buttonImgGalleryView3.tag = (indexPathValue.row*4+2);
    [objImageGalleryCustomCell.imgGalleryView3 setImageWithURL:[NSURL URLWithString:[self.array_HotelImage objectAtIndex:(indexPathValue.row*4+2)]] placeholderImage:placholderImage];

    objImageGalleryCustomCell.buttonImgGalleryView4.tag = (indexPathValue.row*4+3);
    [objImageGalleryCustomCell.imgGalleryView4 setImageWithURL:[NSURL URLWithString:[self.array_HotelImage objectAtIndex:(indexPathValue.row*4+3)]] placeholderImage:placholderImage];

}

[objImageGalleryCustomCell.buttonImgGalleryView1 addTarget:self action:@selector(buttonImageClicked:) forControlEvents:UIControlEventTouchUpInside];

[objImageGalleryCustomCell.buttonImgGalleryView2 addTarget:self action:@selector(buttonImageClicked:) forControlEvents:UIControlEventTouchUpInside];

[objImageGalleryCustomCell.buttonImgGalleryView3 addTarget:self action:@selector(buttonImageClicked:) forControlEvents:UIControlEventTouchUpInside];
[objImageGalleryCustomCell.buttonImgGalleryView4 addTarget:self action:@selector(buttonImageClicked:) forControlEvents:UIControlEventTouchUpInside];

return objImageGalleryCustomCell; 
```

}*/

# python - 在 Python 中计算熵的最快方法

> ID：15450192
> 
> 赞同：64
> 
> 时间：2013-03-16T14:01:13.557
> 
> 标签：python, numpy, entropy

在我的项目中，我需要多次计算 0-1 向量的熵。这是我的代码：

```
def entropy(labels):
    """ Computes entropy of 0-1 vector. """
    n_labels = len(labels)

    if n_labels <= 1:
        return 0

    counts = np.bincount(labels)
    probs = counts[np.nonzero(counts)] / n_labels
    n_classes = len(probs)

    if n_classes <= 1:
        return 0
    return - np.sum(probs * np.log(probs)) / np.log(n_classes) 
```

有更快的方法吗？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2017-07-13T22:37:46.870

@Sanjeet Gupta 的回答很好，但可以精简。这个问题专门询问“最快”的方式，但我只看到一个答案的时间，所以我将发布使用 scipy 和 numpy 与原始海报的 entropy2 答案的比较，稍作改动。

**四种不同的方法：** (1) scipy/numpy，(2) numpy/math，(3) pandas/numpy，(4) numpy

```
import numpy as np
from scipy.stats import entropy
from math import log, e
import pandas as pd

import timeit

def entropy1(labels, base=None):
  value,counts = np.unique(labels, return_counts=True)
  return entropy(counts, base=base)

def entropy2(labels, base=None):
  """ Computes entropy of label distribution. """

  n_labels = len(labels)

  if n_labels <= 1:
    return 0

  value,counts = np.unique(labels, return_counts=True)
  probs = counts / n_labels
  n_classes = np.count_nonzero(probs)

  if n_classes <= 1:
    return 0

  ent = 0.

  # Compute entropy
  base = e if base is None else base
  for i in probs:
    ent -= i * log(i, base)

  return ent

def entropy3(labels, base=None):
  vc = pd.Series(labels).value_counts(normalize=True, sort=False)
  base = e if base is None else base
  return -(vc * np.log(vc)/np.log(base)).sum()

def entropy4(labels, base=None):
  value,counts = np.unique(labels, return_counts=True)
  norm_counts = counts / counts.sum()
  base = e if base is None else base
  return -(norm_counts * np.log(norm_counts)/np.log(base)).sum() 
```

时间操作：

```
repeat_number = 1000000

a = timeit.repeat(stmt='''entropy1(labels)''',
                  setup='''labels=[1,3,5,2,3,5,3,2,1,3,4,5];from __main__ import entropy1''',
                  repeat=3, number=repeat_number)

b = timeit.repeat(stmt='''entropy2(labels)''',
                  setup='''labels=[1,3,5,2,3,5,3,2,1,3,4,5];from __main__ import entropy2''',
                  repeat=3, number=repeat_number)

c = timeit.repeat(stmt='''entropy3(labels)''',
                  setup='''labels=[1,3,5,2,3,5,3,2,1,3,4,5];from __main__ import entropy3''',
                  repeat=3, number=repeat_number)

d = timeit.repeat(stmt='''entropy4(labels)''',
                  setup='''labels=[1,3,5,2,3,5,3,2,1,3,4,5];from __main__ import entropy4''',
                  repeat=3, number=repeat_number) 
```

时间结果：

```
# for loop to print out results of timeit
for approach,timeit_results in zip(['scipy/numpy', 'numpy/math', 'pandas/numpy', 'numpy'], [a,b,c,d]):
  print('Method: {}, Avg.: {:.6f}'.format(approach, np.array(timeit_results).mean()))

Method: scipy/numpy, Avg.: 63.315312
Method: numpy/math, Avg.: 49.256894
Method: pandas/numpy, Avg.: 884.644023
Method: numpy, Avg.: 60.026938 
```

**获胜者：** numpy/math ( `entropy2`)

还值得注意的是，`entropy2`上面的函数可以处理数字和文本数据。例如：`entropy2(list('abcdefabacdebcab'))`。原始发帖人的答案来自 2013 年，并且有一个用于分箱整数的特定用例，但它不适用于文本。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2016-08-29T16:18:06.150

将数据作为`pd.Series`和`scipy.stats`，计算给定数量的熵非常简单：

```
import pandas as pd
import scipy.stats

def ent(data):
    """Calculates entropy of the passed `pd.Series`
    """
    p_data = data.value_counts()           # counts occurrence of each value
    entropy = scipy.stats.entropy(p_data)  # get entropy from counts
    return entropy 
```

注意：`scipy.stats`将规范化提供的数据，所以这不需要明确地完成，即传递一个计数数组可以正常工作。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2016-06-17T21:44:09.240

一个不依赖于 numpy 的答案，或者：

```
import math
from collections import Counter

def eta(data, unit='natural'):
    base = {
        'shannon' : 2.,
        'natural' : math.exp(1),
        'hartley' : 10.
    }

    if len(data) <= 1:
        return 0

    counts = Counter()

    for d in data:
        counts[d] += 1

    ent = 0

    probs = [float(c) / len(data) for c in counts.values()]
    for p in probs:
        if p > 0.:
            ent -= p * math.log(p, base[unit])

    return ent 
```

这将接受您可以扔给它的任何数据类型：

```
>>> eta(['mary', 'had', 'a', 'little', 'lamb'])
1.6094379124341005

>>> eta([c for c in "mary had a little lamb"])
2.311097886212714 
```

@Jarad 提供的答案也建议了时间。为此：

```
repeat_number = 1000000
e = timeit.repeat(
    stmt='''eta(labels)''', 
    setup='''labels=[1,3,5,2,3,5,3,2,1,3,4,5];from __main__ import eta''', 
    repeat=3, 
    number=repeat_number) 
```

Timeit 结果：（我相信这比最好的 numpy 方法快 4 倍）

```
print('Method: {}, Avg.: {:.6f}'.format("eta", np.array(e).mean()))

Method: eta, Avg.: 10.461799 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-03-18T12:33:13.533

根据 unutbu 的建议，我创建了一个纯 python 实现。

```
def entropy2(labels):
 """ Computes entropy of label distribution. """
    n_labels = len(labels)

    if n_labels <= 1:
        return 0

    counts = np.bincount(labels)
    probs = counts / n_labels
    n_classes = np.count_nonzero(probs)

    if n_classes <= 1:
        return 0

    ent = 0.

    # Compute standard entropy.
    for i in probs:
        ent -= i * log(i, base=n_classes)

    return ent 
```

我缺少的一点是标签是一个大数组，但是概率是 3 或 4 个元素长。使用纯 python，我的应用程序现在速度是原来的两倍。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2017-02-17T10:23:01.730

我最喜欢的熵函数如下：

```
def entropy(labels):
    prob_dict = {x:labels.count(x)/len(labels) for x in labels}
    probs = np.array(list(prob_dict.values()))

    return - probs.dot(np.log2(probs)) 
```

我仍在寻找一种更好的方法来避免 dict -> values -> list -> np.array 转换。如果我找到它会再次评论。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2017-11-17T10:24:09.537

均匀分布的数据（高熵）：

```
s=range(0,256) 
```

香农熵逐步计算：

```
import collections
import math

# calculate probability for each byte as number of occurrences / array length
probabilities = [n_x/len(s) for x,n_x in collections.Counter(s).items()]
# [0.00390625, 0.00390625, 0.00390625, ...]

# calculate per-character entropy fractions
e_x = [-p_x*math.log(p_x,2) for p_x in probabilities]
# [0.03125, 0.03125, 0.03125, ...]

# sum fractions to obtain Shannon entropy
entropy = sum(e_x)
>>> entropy 
8.0 
```

单线（假设`import collections`）：

```
def H(s): return sum([-p_x*math.log(p_x,2) for p_x in [n_x/len(s) for x,n_x in collections.Counter(s).items()]]) 
```

适当的功能：

```
import collections
import math

def H(s):
    probabilities = [n_x/len(s) for x,n_x in collections.Counter(s).items()]
    e_x = [-p_x*math.log(p_x,2) for p_x in probabilities]    
    return sum(e_x) 
```

测试用例 - 取自[Cyber​​Chef entropy estimator](https://gchq.github.io/CyberChef/#recipe=Entropy(1000)&input=U3RhbmRhcmQgRW5nbGlzaCB0ZXh0IHVzdWFsbHkgZmFsbHMgc29tZXdoZXJlIGJldHdlZW4gMy41IGFuZCA1)的英文文本：

```
>>> H(range(0,256))
8.0
>>> H(range(0,64))
6.0
>>> H(range(0,128))
7.0
>>> H([0,1])
1.0
>>> H('Standard English text usually falls somewhere between 3.5 and 5')
4.228788210509104 
```

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2018-06-10T11:13:01.537

这是我的方法：

```
labels = [0, 0, 1, 1]

from collections import Counter
from scipy import stats

stats.entropy(list(Counter(labels).values()), base=2) 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-01-08T21:02:26.530

此方法通过允许分箱扩展了其他解决方案。例如，`bin=None`（默认）不会分箱`x`并将计算 的每个元素的经验概率`x`，而在计算经验概率之前将`bin=256`块`x`分成 256 个箱。

```
import numpy as np

def entropy(x, bins=None):
    N   = x.shape[0]
    if bins is None:
        counts = np.bincount(x)
    else:
        counts = np.histogram(x, bins=bins)[0] # 0th idx is counts
    p   = counts[np.nonzero(counts)]/N # avoids log(0)
    H   = -np.dot( p, np.log2(p) )
    return H 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2021-09-22T14:09:57.820

这是迄今为止我发现的最快的 Python 实现：

```
import numpy as np

def entropy(labels):
    ps = np.bincount(labels) / len(labels)
    return -np.sum([p * np.log2(p) for p in ps if p > 0]) 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-01-17T22:27:15.233

BiEntropy 不会是计算熵的最快方法，但它是严格的，并且以明确定义的方式建立在 Shannon Entropy 之上。它已经在包括图像相关应用在内的各个领域进行了测试。它在 Github 上用 Python 实现。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-10-24T18:49:36.563

派对迟到了，但我偶然发现了这一点，所有答案似乎都依赖于 Kullback-Leibler 散度，它没有上限，因此不符合我的需求。

在这里，我有一个`TODO!`从 [0,1] 开始的熵函数的近似值（可以改进）。

它计算单个列的偏差。

```
class Pandas_Dataframe_helper:
    #some other methods here...
    @staticmethod
    def column_biass(df_column):
        df_column_as_list           =   list(df_column)
        N                           =   len(df_column_as_list)
        values,counts               =   np.unique(df_column_as_list, return_counts=True)
        #generate synth list (TODO! what if not even number? Minimum Comun Multiple of(num_different_labels,[x for x in counts]))
        num_different_labels        =   len(values)
        num_items_per_label         =   N // num_different_labels
        synthetic_list              =   []
        for current_value in values:
            synthetic_list.extend([current_value] * num_items_per_label)
        #TODO! aproximacion
        if(len(synthetic_list) != len(df_column_as_list)):
            synthetic_list.extend([current_value] * (len(df_column_as_list) - len(synthetic_list)))
        #now, extrapolate differences between sorted-input-list and synsthetic_list
        df_column_as_list_sorted    =   sorted(df_column_as_list)
        counter_unmatches           =   0
        for i in range(0,N):
            if(df_column_as_list_sorted[i] != synthetic_list[i]):
                counter_unmatches   +=  1
        #upper_bound = g(N,num_different_labels)
        #((K-1)M)-1 K==num_different_labels , M==num theorically perfect distribution's items per label 
        upper_bound                 =   ((num_different_labels-1)*num_items_per_label)-1
        return counter_unmatches/upper_bound
    #--------------------------------------------------------------------------------------------------------------------- 
```

完整代码位于[https://github.com/glezo1/pcommonlibs/blob/master/com/glezo/pandas_dataframe_helper/Pandas_Dataframe_Helper.py](https://github.com/glezo1/pcommonlibs/blob/master/com/glezo/pandas_dataframe_helper/Pandas_Dataframe_Helper.py)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-06-28T15:47:05.810

```
from collections import Counter
from scipy import stats

labels = [0.9, 0.09, 0.1]
stats.entropy(list(Counter(labels).keys()), base=2) 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-08-27T23:45:39.377

上面的答案很好，但是如果您需要一个可以沿不同轴操作的版本，这里有一个可行的实现。

```
def entropy(A, axis=None):
    """Computes the Shannon entropy of the elements of A. Assumes A is 
    an array-like of nonnegative ints whose max value is approximately 
    the number of unique values present.

    >>> a = [0, 1]
    >>> entropy(a)
    1.0
    >>> A = np.c_[a, a]
    >>> entropy(A)
    1.0
    >>> A                   # doctest: +NORMALIZE_WHITESPACE
    array([[0, 0], [1, 1]])
    >>> entropy(A, axis=0)  # doctest: +NORMALIZE_WHITESPACE
    array([ 1., 1.])
    >>> entropy(A, axis=1)  # doctest: +NORMALIZE_WHITESPACE
    array([[ 0.], [ 0.]])
    >>> entropy([0, 0, 0])
    0.0
    >>> entropy([])
    0.0
    >>> entropy([5])
    0.0
    """
    if A is None or len(A) < 2:
        return 0.

    A = np.asarray(A)

    if axis is None:
        A = A.flatten()
        counts = np.bincount(A) # needs small, non-negative ints
        counts = counts[counts > 0]
        if len(counts) == 1:
            return 0\. # avoid returning -0.0 to prevent weird doctests
        probs = counts / float(A.size)
        return -np.sum(probs * np.log2(probs))
    elif axis == 0:
        entropies = map(lambda col: entropy(col), A.T)
        return np.array(entropies)
    elif axis == 1:
        entropies = map(lambda row: entropy(row), A)
        return np.array(entropies).reshape((-1, 1))
    else:
        raise ValueError("unsupported axis: {}".format(axis)) 
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2019-12-28T23:42:29.153

```
def entropy(base, prob_a, prob_b ):
  import math
  base=2
  x=prob_a
  y=prob_b
  expression =-((x*math.log(x,base)+(y*math.log(y,base))))    
  return [expression] 
```

# java - 查看通过提取 .jar 文件获得的 .ser 文件

> ID：15450196
> 
> 赞同：1
> 
> 时间：2013-03-16T14:01:38.060
> 
> 标签：java, serialization, jar, executable, executable-jar

我有一个名为 stanford-parser-2.0.4-models 的 .jar 文件。解压后，我得到的是englishPCFG.ser 文件。

有人可以建议如何查看此文件的内容，因为使用我的程序员记事本和 gedit，我可以在此文件中查看的所有内容都是一些外来符号和二进制代码。现在我对 ser 文件一无所知。

提前感谢您在这方面的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T14:55:42.340

因为你想反序列化文件。找到下面的代码片段：

```
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.ObjectInputStream;

public class ReadFile{
    int i=0;

    public static void main(String args[]){  

        File f = new File(args[0]);

    try{

    ObjectInputStream obj = new ObjectInputStream(new FileInputStream(f));
     System.out.println("The text : "+  obj.readObject());
     obj.close();
     System.out.println("Deserializing Operation Completly Successfully.");

    }

    catch(ClassNotFoundException e){

    System.out.println(e.getMessage());

     }

    catch(FileNotFoundException fe){

     System.out.println("File not found ");

    } catch (IOException e) {
       // TODO Auto-generated catch block
       e.printStackTrace();
   }}    

} 
```

将上面的代码放在带有 ReadFile.java 的文件名中用于编译您的代码谷歌它。我不能喂你一切:(

# php - php mail() 到 phpmailer

> ID：15450197
> 
> 赞同：0
> 
> 时间：2013-03-16T14:01:43.103
> 
> 标签：php, email

我有一个 php 应用程序，它目前正在使用 php mail() 发送电子邮件。我想使用 smtp（最好是 sendgrid）来发送邮件，因为共享服务器有限制/小时。

## 我的代码如下：

admin_sendmail.php

```
class sendmail
{
    public static function sendAccountActivateMail($to,$activate_code,$user_id,$user_name,$user_pwd)
    {
        $flg = false;
        try
        {
            $subject = 'Mysite Account Activation'; 

            $message  = "Welcome to Mysite! \n"; 
            $message .= "Please activate your account by clicking the link below \n";
            $message .= "http://myzone.mysite.com/account_activation.php?command=activate&surebuzz_code=$user_id&activation_code=$activate_code \n"; 
            $message .= "Username: $user_name \n"; 
            $message .= "Password: $user_pwd \n"; 

            $email  = "info@mysite.com";
            $headers = "From: $email\r\nReply-To: $email";
            $flg = mail($to,$subject,$message,$headers);
        }
        catch(Exception $e)
        {
            $flg = false;
        }
        return $flg;
    } 
```

}

谁能帮助将其转换为通过 phpmailer/swiftmailer 或 sendgrid 使用 SMTP？我对php很陌生。这是由我失去联系的其他人编码的。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T14:08:32.323

这就是我使用的。

```
require_once ('class.phpmailer.php');
class myPHPMailer extends PHPMailer {
    public function __construct(){
        $this->IsSMTP();
        $this->SMTPAuth   = true;
        $this->SMTPSecure = "tls";  //Or SSL?
        $this->Host       = "smtp.gmail.com";
        $this->Port       = 587;    //Maybe 465 instead? SSL only?
        //$this->Port     = 25;
        $this->Username   = "xxx";
        $this->Password   = "xxx";
    }
        $mail             = new myPHPMailer();
        $mail->AddReplyTo("xxx@xxx.com","xxx");
        $mail->From       = "xxx@xxx.com.com";
        $mail->FromName   = "xxx";
        $mail->Subject    = "What ever";
        $mail->WordWrap   = 50; // set word wrap
        $mail->Body     = $msg;
        $mail->AddAddress("xxx@gmail.com", "xxx");
        $mail->Send(); 
```

# resharper - Resharper 格式化链式方法

> ID：15450199
> 
> 赞同：10
> 
> 时间：2013-03-16T14:02:09.840
> 
> 标签：resharper, code-formatting

R# 中是否有设置将链接方法格式化为从实例化类的相同字符开始。

我想要的是：

```
var foo = new FooDataBuilder()
              .WithDate(myDate)
              .WithBar(myBar)
              .Build(); 
```

R# 给了我什么：

```
var foo = new FooDataBuilder()
    .WithDate(myDate)
    .WithBar(myBar)
    .Build(); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-16T18:54:56.380

使用 Resharper 7.1.2，您可以获得以下格式：

```
var foo = new FooDataBuilder().WithDate(myDate)
                              .WithBar(myBar)
                              .Build(); 
```

通过设置以下 Resharper 选项：

`Code Editing`-> `C#`-> `Formatting Style`-> `Line Breaks and Wrapping`-> `Line Wrapping`->`Wrap chained method calls`到`Chop always`

和

启用`Code Editing`-> `C#`-> `Formatting Style`-> `Other`-> `Align Multiline Constructs`->`Chained method calls`

`FooDataBuilder()`除非您手动进行，否则我认为您无法与之对齐。*（Jetbrains 的@Dmitry Osinovskiy 已经证实了这一点，所以这可能是你最接近你想要的东西。）*

# iphone - 用圆形图像层标记球 - 在 iphone 触摸缩放或移动

> ID：15450203
> 
> 赞同：1
> 
> 时间：2013-03-16T14:02:45.003
> 
> 标签：iphone, ios, objective-c, cocoa-touch, opengl-es

我有两个图像一个网球和一个红色标记图像。我需要将网球作为背景，将红色标记作为前景，就像网球上的一层一样，我需要根据网球的形状调整红色标记。我必须通过捏和触摸动作来实现这一点。

下面是两张图。

**图 1：**

![在此处输入图像描述](../Images/3b2a080d9d5d33f6e6212bb106aa941a.png)

**图 2（层）：**

![在此处输入图像描述](../Images/318b49f3173e5b9b19f6af59f7bc4cc0.png)

**最终图像通过调整圆圈：**

![在此处输入图像描述](../Images/bf191e54673f51bda39e70f96786522e.png)

这方面的任何初学者都会很好！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T10:11:42.077

有两种方法可以做到这一点（处理用户触摸）：

1.  `touchesBegan:withEvent:`,`touchesMoved:withEvent:`和`touchesEnded:withEvent:`方法。参考在这里：[UIResponder - 响应触摸事件](http://developer.apple.com/library/ios/documentation/uikit/reference/UIResponder_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006783-CH4-SW13)。

2.  手势识别器（使用标准手势识别器或创建您自己的自定义手势识别器）。参考在这里：[手势识别](http://developer.apple.com/library/ios/#documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/GestureRecognizer_basics/GestureRecognizer_basics.html#//apple_ref/doc/uid/TP40009541-CH2-SW2)器。好的教程在[这里](http://www.raywenderlich.com/6567/uigesturerecognizer-tutorial-in-ios-5-pinches-pans-and-more)。

如果您只需要移动红色圆圈，而不是调整它的大小 - 使用`touches...`方法对您有好处。

但是，如果您想通过使用捏合手势调整圆圈的大小 - 您可能需要创建自定义手势识别器（并`touches...`在那里实现相同的方法）来处理触摸和移动；并使用标准[UIPinchGestureRecognizer](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPinchGestureRecognizer_Class/Reference/Reference.html)来处理捏合手势。

您需要创建自定义手势识别器，因为标准[的 UITapGestureRecognizer](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITapGestureRecognizer_Class/Reference/Reference.html)和[UIPanGestureRecognizer有一些问题，正如](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPanGestureRecognizer_Class/Reference/Reference.html)[这里](https://stackoverflow.com/questions/11851464/uigesturerecognizers-vs-touchesbegan-touchesmoved-touchesended-accuracy)提到的。

**升级版：**

例如，您有`UIViewController`. 您正在添加`UIImageView`到 viewController 的`view`. 并且您正在创建`UIView`具有清晰背景并在其中绘制红色圆圈，或者您正在添加另一个`UIImageView`带有红色圆圈的圆圈（如果您有它的图像）。让我们称之为`redCircleView`。

您正在制作`redCircleView`透明（`redCircleView.alpha = 0`），或者您可以在用户触摸屏幕时对其进行初始化。我认为第二种选择更好，但我不确定。

在您`UIViewController`正在实施的`touchesBegan:withEvent:`方法中，您可以设置`redCircleView.alpha = 1`或初始化 this `redCircleView`。

在`touchesMoved:withEvent:`实现中，您可以使用在任何视图中获取触摸位置`UITouch:locationInView:`

```
 (void) touchesMoved: (NSSet *)touches withEvent:(UIEvent *)event {
      UITouch *touch = [touches anyObject];
      CGPoint point = [touch locationInView:self.view];
      .
      .
      .
 } 
```

然后您可以更改`redCircleView.center`（然后红色圆圈的中心将跟随屏幕上的手指）或者您可以存储前一点的位置，将其与当前位置进行比较然后移动`redCircleView`。

# python - Beautiful Soup 给出 NULL

> ID：15450204
> 
> 赞同：2
> 
> 时间：2013-03-16T14:02:46.007
> 
> 标签：python, google-app-engine, null, beautifulsoup

```
from bs4 import BeautifulSoup

page=BeautifulSoup(page2)
self.response.out.write(page.title.string)
self.response.out.write("""<br />""")

mdays={}
mo={}
cost={}
ac={}
nc={}
month=(page.findAll('td',style="border-style: solid; border-width: 1px", align="RIGHT"))

mo[0]=(month[0].contents)
mdays[0]=month[1].contents
cost[0]=month[2].contents
nc[0] = month[4].contents
ac[0]=month[5].contents
self.response.out.write(mo[0].string) 
```

第一个 out.write 语句打印标题，但其余打印 Null Beautful Soup 代码在 IDLE 上正常工作，但在 AppEngine 上不正常

# triggers - Applescript - 调用错误并继续

> ID：15450205
> 
> 赞同：0
> 
> 时间：2013-03-16T14:02:48.693
> 
> 标签：triggers, dialog, applescript, continue

我试图故意触发错误，然后继续我的脚本。

```
Error number -2700 
```

触发“未知错误”错误，但它也会以返回值 -2700 而不是 0 结束脚本。

此外，我不希望脚本在错误后结束，而是在您按下“确定”按钮时继续。

我想这样做的原因是我不必自己用每种语言制作一个错误对话框。

帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T13:21:14.147

（评论弄乱了我的代码，这就是我发布新答案的原因）

“对于每种语言”听起来很奇怪。通常，您使用特定语言进行编程，并且会编写错误处理例程。在 AppleScript 中，这将是

```
try
  -- your script here
on error errMsg number errNum
  errorHandler(errMsg,errNum)
end try

on errorHandler (errMsg,errNum)
  display dialog errMsg & " (" & errNum & ")."
end errorHandler 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T14:04:53.197

尝试：

```
try
    1 / 0
on error errMsg number errNum
    tell me
        activate
        display alert errMsg & return & return & errNum buttons "OK"
    end tell
end try

beep 3 
```

# php - 使用 preg_match 验证 url 的简单正则表达式总是返回 false

> ID：15450206
> 
> 赞同：0
> 
> 时间：2013-03-16T14:02:55.573
> 
> 标签：php, regex, validation

我知道有很多主题显示正则表达式来验证 URL。还有一个 FILTER_VALIDATE_URL 函数，我也知道。

我想知道我的正则表达式有什么问题，以了解它有什么问题。

我的正则表达式应该匹配 URL 的前面有 http:// 或 https://。之后，它可以是任何字符，一个或多个。它应该以一个点结尾，然后是一个包含 2 到 5 个字符 az 的字符串。

```
 $s = preg_match('^(http|https)://.+(\.[a-z]{2,5})$', $url); 
```

[我在http://regexpal.com/](http://regexpal.com/)上尝试了这个正则表达式。它匹配正确，但我的 preg_match 调用总是给我错误的。谁能向我解释这个正则表达式有什么不正确的地方？

非常感谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T14:07:32.807

在 PHP 中，您需要在正则表达式语法中使用分隔符。定界符可以是任何非字母数字、非反斜杠、非空白字符。大多数人将`/`其用作分隔符，但由于它出现在您的 URL 中，因此您可以使用其他字符，例如`#`避免转义：

```
'#^(http|https)://.+(\.[a-z]{2,5})$#' 
```

旁注：`(http|https)`将捕获，因为它被包裹在括号中。您实际上并不需要它，但只需编写 也更简单`https?`，其中`?`使`s`表达式中的可选字符。

# symfony - 简单的 Symfony2 事件看似已设置，但未触发

> ID：15450208
> 
> 赞同：0
> 
> 时间：2013-03-16T14:03:00.207
> 
> 标签：symfony

我正在尝试设置一个简单的事件侦听器来在每个请求的开始和之前执行一些代码。我只是想回显一条简单的消息以检查它是否正常工作。

如果我犯了一个错误（例如拼写错误）或错误配置（就像我在过去 30 分钟内所做的那样），那么它会返回各种错误消息。但我想我已经设置好了，因为错误消息已经消失了。

这是我的代码：

我已将此添加到我的 /app/config.yml 文件中

```
services:
    kernel.listener.request_listener:
        class: Acme\Bundle\NewBundle\EventListener\RequestListener
        tags:
            - { name: kernel.event_listener, event: kernel.exception, method: onKernelRequest } 
```

这是相关文件中的代码

```
namespace Acme\Bundle\NewBundle\EventListener;

use Symfony\Component\HttpKernel\Event\GetResponseEvent;
use Symfony\Component\HttpFoundation\Response;

class RequestListener
{
    public function onKernelRequest(GetResponseEvent $event)
    {
        $response = new Response();
        $response->setContent("hello");

        $event->setResponse($response);     

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T14:06:11.170

我相信您已经陷入了错误的事件中`kernel.exception`，该事件仅在发生异常时才被调用/调度。

我相信你应该已经上钩了这个`kernel.request`事件，

```
services:
    kernel.listener.request_listener:
        class: Acme\Bundle\NewBundle\EventListener\RequestListener
        tags:
            - { name: kernel.event_listener, event: kernel.request, method: onKernelRequest } 
```

`kernel.request`在每个请求上以及在开始处理请求之前调用/调度。

[http://symfony.com/doc/2.0/book/internals.html#handling-requests](http://symfony.com/doc/2.0/book/internals.html#handling-requests)

> 在做任何事情之前，通知 kernel.request 事件——如果其中一个侦听器返回一个 Response，则直接跳转到第 8 步；

# scala - Scala 类似于“with object do begin ... end”（快捷方式访问）

> ID：15450209
> 
> 赞同：5
> 
> 时间：2013-03-16T14:03:14.217
> 
> 标签：scala

在旧的生锈的 Pascal 中有方便的构造来对对象或记录执行一系列操作：

```
with obj do
begin
  methodCall
  otherMethodCall
  ...
end 
```

我正在尝试在 scala 中触摸类似的东西，但我的脑海中缺少一些东西:)

是否有可能以某种方式实现这样的效果，就好像 obj 在传递闭包的当前范围内并表现得像这样：

```
{
  import obj._
  callObjMethod(x, y)
  objVal.doSomething()
  ...
} 
```

但是在自定义语法中，例如：

```
doWith (obj) {
  callObjMethod(x, y)
  objVal.doSomething()
} 
```

直觉上我觉得这`no`不仅仅是`yes`好奇想知道。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-16T15:06:35.440

你的意思是这样吗？

```
val file = new java.io.File(".")

// later as long as file is in scope

{
  import file._
  println(isDirectory)
  println(getCanonicalPath())
} 
```

您可以只使用`import`关键字将对象的方法带入范围。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-16T14:12:12.660

一种可能性是`tap`方法：

```
def tap[A](obj: A)(actions: (A => _)*) = {
  actions.foreach { _(obj) }
  obj
}

tap(obj) (
  _.callObjMethod(x, y),
  _.objVal.doSomething()
) 
```

或使用浓缩后

```
implicit class RichAny[A](val obj: A) extends AnyVal {
  def tap(actions: (A => _)*) = {
    actions.foreach { _(obj) }
    obj
  }
}

obj.tap (
  _.callObjMethod(x, y),
  _.objVal.doSomething()
) 
```

我认为使用宏你甚至应该能够获得你想要的语法（并避免创建函数对象的开销），但我会把它留给其他人。

# android - 从服务向活动发送意图附加信息

> ID：15450216
> 
> 赞同：1
> 
> 时间：2013-03-16T14:03:42.000
> 
> 标签：android

我有一个监听 ( `ON_BATTERY_CHANGE`) 的服务，然后 onReceive 服务向 My MainActivity 发送一个广播。问题是我无法将它们从服务中转移到我的主要活动中。代码：主要活动：

```
public class MainActivity extends Activity
  private BroadcastReceiver batteryReceiverService;
  private TextView text2;
....
protected void onCreate(Bundle savedInstanceState) {
text2=(TextView)findViewById(R.id.TV_text2);
batteryReceiverService = new BroadcastReceiver(){
            @Override
            public void onReceive(Context context, Intent intent) {

                text2.setText("left: "+intent.getStringExtra("H")+" hours "+intent.getStringExtra("M")+" minute(s)");
                    Log.e("text2","text2 HHH " +intent.getStringExtra("H")); //log shows 0
                    Log.e("text2","text2 MMM " +intent.getStringExtra("H")); // log shows 0
            }
        };
        registerReceiver(batteryReceiverService, new IntentFilter(UltimateBatterySaverService.BROADCAST_ACTION));
....
@Override
    protected void onDestroy() {

        unregisterReceiver(batteryReceiverService);
        super.onDestroy();
    } 
```

服务：

```
public class UltimateBatterySaverService extends Service {
private Intent intent;
    static final String BROADCAST_ACTION = "lt.whitegroup.ultimatebatterysaver";
    private BroadcastReceiver batteryLevelReceiver;
....
public void onCreate() {
        super.onCreate();
        intent = new Intent(BROADCAST_ACTION); 

    }
@Override
    public void onDestroy() {
        unregisterReceiver(batteryLevelReceiver);
        super.onDestroy();

    }
IntentFilter batteryLevelFilter = new IntentFilter(Intent.ACTION_BATTERY_CHANGED);

        batteryLevelReceiver = new BroadcastReceiver(){
            @Override
            public void onReceive(Context context, Intent intent){

// Receiving data, calculating and etc
averageChargingH=timeAllInHours;
averageChargingM=timeAllInMinutes;
// to put extras and send broadcast
does();
......

public void does(){
        String strLong = Long.toString(averageChargingH);
        String strLong2 = Long.toString(averageChargingM);
        Log.e("cccccc","strLong h "+strLong); // getting good value not 0(everything ok)
        Log.e("cccccc","strLong2 m"+strLong2); // getting good value not 0(everything ok)
        intent.putExtra("H", strLong);
        intent.putExtra("M", strLong2);
        sendBroadcast(intent);
    } 
```

任何想法为什么我的信息没有正确传输？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T15:18:53.163

dos() 方法似乎使用与 onReceive 相同范围内的变量，所以我猜测 dos() 中的意图变量实际上是从 onReceive 传入的 Intent。

尝试在发送广播之前添加一些日志以检查意图的操作是否正确，或者只是在 onReceive 方法中创建广播意图并将其命名为 intent2。

# php - 如何在 WAMP 上同时运行多个 .PHP 脚本？

> ID：15450221
> 
> 赞同：0
> 
> 时间：2013-03-16T14:04:04.837
> 
> 标签：php, nginx, wamp

我正在尝试同时运行多个 PHP 脚本文件（在 chrome 浏览器中），但似乎 WAMP 限制了最多 8 个。允许超过 8 个的正确设置应该是什么？是否可以像 NGINX 一样运行 httpd.exe 实例的多个工作人员？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T14:29:18.393

去 ：

```
<xampp_root>/xamppfiles/etc/httpd.conf 
```

并确认以下内容未注释：

```
# Server-pool management (MPM specific)
#Include <xampp_root>/etc/extra/httpd-mpm.conf 
```

（显然，将评论本身留下评论并取消评论下面的行）。

然后转到：

```
<xampp_root>/etc/extra/httpd-mpm.conf 
```

并确认该行的值是否：

```
MaxClients          150 
```

8以上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T14:16:39.990

我认为您必须更改`maxclients`apache 配置。你的配置必须有这样的东西：

```
# prefork MPM
# StartServers: number of server processes to start
# MinSpareServers: minimum number of server processes which are kept spare
# MaxSpareServers: maximum number of server processes which are kept spare
# MaxClients: maximum number of server processes allowed to start
# MaxRequestsPerChild: maximum number of requests a server process serves
<IfModule mpm_prefork_module>
    StartServers        5
    MinSpareServers     5
    MaxSpareServers     10
    MaxClients          150
    MaxRequestsPerChild 0
</IfModule> 
```

有关更多信息，请查看：http: [//fuscata.com/kb/set-maxclients-apache-prefork](http://fuscata.com/kb/set-maxclients-apache-prefork)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T14:20:18.597

您遇到的问题可能与服务器无关，而与浏览器有关。浏览器只允许有限数量的同时连接到某个服务器，所以如果你想克服这个限制，你将不得不使用不同的服务器。

您可以在主机文件中执行此操作，例如使用不同的名称路由到同一主机（为了清楚起见，在不同的行上）：

```
127.0.0.1 server1.local
127.0.0.1 server2.local
127.0.0.1 server3.local
127.0.0.1 server4.local
etc. 
```

现在你可以有 8 个（我以为 Chrome 是 6 个）连接到`server1.local`、8 个到`server2.local`等等。

**编辑：**有关更多信息，请参阅[此问题](https://stackoverflow.com/questions/985431/max-parallel-http-connections-in-a-browser)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-19T19:34:31.463

根据这个[建议](https://www.sitepoint.com/community/t/wamp-only-1-script-per-time-served-how-to-handle-multiple-requests/4560/9)，如果您想增加每个 SINGLE 用户的并发执行量，您应该关闭：

```
session.auto_start 
```

（您可以检查`phpinfo()`它是否已打开）

或内部脚本（如果会话是独立启动的，例如：

```
session_start();
// do stuff, read vars etc...
session_write_close();

// do something that takes a long time....

session_start();
// now update sesson vars with the result 
```

# java - 为什么使用忙等待的信号量会导致死锁？

> ID：15450222
> 
> 赞同：0
> 
> 时间：2013-03-16T14:04:05.357
> 
> 标签：java, synchronization, deadlock, semaphore, wait

我一直在尝试实现自己的非常基本的信号量，并注意到我选择的实现会影响我是否遇到死锁。但我不明白僵局是如何发生的。

我的原始实现（没有死锁）：

```
public synchronized void waitFor(){
    value--;
    if(value < 0)
    wait();
}

public synchronized void signal(){
    value++;
    notify();
} 
```

稍后的实现（导致死锁）：

```
public synchronized void waitFor(){
    value--;
    while(value < 0)
        wait();
}

public synchronized void signal(){
    value++;
    notifyAll();
} 
```

wait() 实际上在两组代码中都被 try-catch 包围，用于捕获线程中断，但为了便于阅读，我将其省略了，并假设它对死锁问题没有影响。

有人有想法么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T14:36:30.427

我无法发现第二个实现有任何死锁风险。while 循环是等待锁的正确选择（请参阅[Object.wait() 文档](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#wait%28%29)中的虚假唤醒）。

此外，看起来没有任何信号操作可以错过。只有当另一个线程处于等待状态，或者没有其他线程正在运行 waitFor() 时，才会出现信号。

因此，我建议您检查代码的其他部分：

*   所有线程是否在同一信号量实例上同步？
*   您确定值计数器没有以非线程安全的方式在其他地方使用吗？
*   所有线程在完成后都会调用 semaphore.signal() 吗？（通常这种释放操作放在 finally 块中）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-16T14:14:48.290

当你使用

```
while(value < 0)
        wait(); 
```

在您的后一个实现中，它位于 value <0 的非结束循环中，并且它永远在此处循环。

这可能是您的死锁情况的指针。

# c++ - 精神业力：访问不可复制的指针

> ID：15450230
> 
> 赞同：2
> 
> 时间：2013-03-16T14:05:24.860
> 
> 标签：c++, boost, boost-spirit, boost-spirit-karma

我试图在我的业力语法中访问一个指针向量，但收效甚微。指针类型是不可复制的，因此使用它的规则必须引用：

```
#include <boost/spirit/include/karma.hpp>
#include <boost/fusion/adapted/struct/adapt_struct.hpp>
#include <boost/fusion/include/adapt_struct.hpp>

namespace karma = boost::spirit::karma;
namespace fusion = boost::fusion;
namespace phx = boost::phoenix;

struct test1 : boost::noncopyable {
  test1(int i = 0) : value(i) {}
  int value;
};

struct test2 : boost::noncopyable {
  int value;
  std::vector<test1*> vector;
};

BOOST_FUSION_ADAPT_STRUCT( test1, (int, value) );
BOOST_FUSION_ADAPT_STRUCT( test2, (int, value) (std::vector<test1*>, vector) );

typedef std::ostream_iterator<char> Iterator;

int main() {

  karma::rule<Iterator, test1*()> t1r;
  karma::rule<Iterator, test2&()> t2r;

  t2r %= "test 2 rule:" << karma::int_ << karma::eol << (t1r % karma::eol);
  t1r %= "test 1 rule: " << karma::int_;

  std::stringstream stream;
  std::ostream_iterator<char> out(stream);

  test2 t;
  t.vector.push_back(new test1(2));
  t.vector.push_back(new test1(3));
  t.vector.push_back(new test1(4));
  t.vector.push_back(new test1(5));
  t.value = 1;

  karma::generate(out, t2r, t);      
  std::cout<<stream.str()<<std::endl;
} 
```

这编译但返回：*测试 2 规则：1，测试 1 规则：25104656，测试 1 规则：25104720*等等。我知道在这种简单的情况下我可以做到

```
t1r = "test 1 rule: " << karma::int_[karma::_1 = phx::bind(&test1::value, *karma::_val)]; 
```

来解决它，但实际上*value*是另一种不可复制的类型，它应该被传递给语法，因此我需要使用示例中所做的结构调整。

[我也知道这里](https://stackoverflow.com/questions/12303480/use-karma-to-generate-output-for-a-vector-of-pointers)提到的自定义点 deref_iterator ，但是，我在模板库上工作，并且认为不可能将 deref_iterator 专门化为依赖于模板的类型。

关于如何使示例工作的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T09:16:26.283

llonesmiz 在评论中回答了我的问题，所以我发布了他的内部信息以供将来参考。使用自定义点*变换属性*可以像这样解决问题：

```
#include <boost/spirit/include/karma.hpp>
#include <boost/fusion/adapted/struct/adapt_struct.hpp>
#include <boost/fusion/include/adapt_struct.hpp>

namespace karma = boost::spirit::karma;
namespace fusion = boost::fusion;
namespace phx = boost::phoenix;

template <typename Value1, typename Value2>
struct test1 : boost::noncopyable {
  test1(Value1 i = Value1(), Value2 j = Value2() ): value1(i),value2(j) {}
  Value1 value1;
  Value2 value2;
};

struct test2 : boost::noncopyable {
  int value;
  std::vector<test1<int,double>*> vector;
};

BOOST_FUSION_ADAPT_TPL_STRUCT(
(Value1)(Value2),
(test1) (Value1)(Value2),
(Value1, value1)
(Value2, value2))

typedef std::vector<test1<int,double>*> test1_vector;

BOOST_FUSION_ADAPT_STRUCT( test2, (int, value) (test1_vector, vector) )

typedef std::ostream_iterator<char> Iterator;

namespace boost { namespace spirit { namespace traits
{
template <typename Value1, typename Value2>
struct transform_attribute<test1<Value1,Value2>* const, test1<Value1,Value2>&, karma::domain>
{
    typedef test1<Value1,Value2>& type;
    static type pre(test1<Value1,Value2>* const& val) 
    { 
      return *val; 
    }
};
}}}

int main() {

  karma::rule<Iterator, test1<int,double>*()> t1r;
  karma::rule<Iterator, test2&()> t2r;

  t2r %= "test 2 rule:" << karma::int_ << karma::eol << (t1r % karma::eol);
  t1r %= "test 1 rule: " << karma::attr_cast<test1<int,double>*,test1<int,double>&>(karma::delimit(karma::space)[karma::int_<< karma::double_]);

  std::stringstream stream;
  std::ostream_iterator<char> out(stream);

  test2 t;
  t.vector.push_back(new test1<int,double>(2));
  t.vector.push_back(new test1<int,double>(3));
  t.vector.push_back(new test1<int,double>(4));
  t.vector.push_back(new test1<int,double>(5));
  t.value = 1;

  karma::generate(out, t2r, t);      
  std::cout<<stream.str()<<std::endl;
} 
```

# c# - 访问 DataReader 中的特定行

> ID：15450239
> 
> 赞同：5
> 
> 时间：2013-03-16T14:06:18.930
> 
> 标签：c#, asp.net, sqldatareader, datareader

我有一个数据阅读器，可以在 js 轮播中显示游戏周列表。

我需要能够添加一个 if 语句来更改当前游戏周的 div 类。

这是我当前的代码：

```
if (dReader.HasRows) {
    while (dReader.Read()) {                
        gameweekList.Text += "<div class=\"item\"><h4>Gameweek " + 
            (dReader["gameweekID"].ToString()) + "</h4></div>";
    }
} else {
    gameweekList.Text = "Error Finding Gameweeks";
}
dReader.Close();
conn.Close(); 
```

实际上我想添加`if(dreader[1])`然后添加额外的位，这怎么可能？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-16T14:22:11.537

我发现使用 DataTable 或 DataSet 更容易。像这样的东西：

```
DataTable dt = new DataTable();
dt.Load(dreader) 
```

然后，您可以使用 DataTable.Rows 属性更轻松地到达某一行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-23T17:16:15.773

怎么样...

```
if (dReader.HasRows) {
    while (dReader.Read()) {

        if ( dReader["gameweekID"].ToString() == currentWeekId ) 
        {    
            gameweekList.Text += "<div class=\"somethingSpecial\"><h4>Gameweek " + 
            (dReader["gameweekID"].ToString()) + "</h4></div>";
        } 
        else 
        {
            gameweekList.Text += "<div class=\"item\"><h4>Gameweek " + 
            (dReader["gameweekID"].ToString()) + "</h4></div>";
        }
    }
} else {
    gameweekList.Text = "Error Finding Gameweeks";
}
dReader.Close();
conn.Close(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-16T14:30:11.933

如果我理解正确，您可以像这样计算读者阅读量。然后当计数适合您时，您可以添加不同的内容：

```
int count = 0;
if (dReader.HasRows) {
    while (dReader.Read()) {
        if(count == 1)  //add special row              
            gameweekList.Text += "something special " + dReader["gameweekID"].ToString();          
        else
            gameweekList.Text += "<div class=\"item\"><h4>Gameweek " + 
            (dReader["gameweekID"].ToString()) + "</h4></div>";
        count++;
    }
} else {
    gameweekList.Text = "Error Finding Gameweeks";
}
dReader.Close();
conn.Close(); 
```

但是，如果您想同时读取当前和后续读取，您应该先读取一次，然后开始循环读取，如下所示：

```
if (dReader.HasRows) {
    string previousRead = string.Empty;
    dReader.Read();
    previousRead = dReader["gameweekID"].ToString();
    while (dReader.Read()) {
          //use current and previous read 
          //dReader["gameweekID"].ToString()
          //previousRead
          //update previousRead for the next read
          previousRead = dReader["gameweekID"].ToString();
    }
} else {
    gameweekList.Text = "Error Finding Gameweeks";
}
dReader.Close();
conn.Close(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-31T16:13:10.327

要获取第一行，从 0 开始并始终将其放入数据表中，因为直接从数据读取器读取总是会遇到问题；

```
if (dReader.HasRows) {

DataTable dt = new DataTable();
dt.Load(dreader)
gameweekList.Text = dt.Rows[0]["gameweekID"]

} 
```

# python - 如何确保所有字符串文字在python中都是unicode

> ID：15450240
> 
> 赞同：4
> 
> 时间：2013-03-16T14:06:24.563
> 
> 标签：python, unicode, unicode-literals

我有一个相当大的 python 代码库要通过。它有一个问题，一些字符串文字是字符串，而另一些是 unicode。这会导致错误。我正在尝试将所有内容都转换为 unicode。我想知道是否有可以将所有文字转换为 unicode 的工具。即，如果它发现这样的东西：

```
print "result code %d" % result['code'] 
```

到：

```
print u"result code %d" % result[u'code'] 
```

如果它对我使用 PyCharm 有帮助（如果有这样做的扩展），但是我也很乐意使用类似的命令。希望这样的工具存在。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-16T15:08:03.813

您可以使用[tokenize.generate_tokens](http://docs.python.org/2/library/tokenize.html#tokenize.generate_tokens)将 Python 代码的字符串表示分解为标记。`tokenize`还为您分类令牌。因此，您可以在 Python 代码中识别字符串文字。

然后不难操作令牌，`'u'`在需要的地方添加：

* * *

```
import tokenize
import token
import io
import collections

class Token(collections.namedtuple('Token', 'num val start end line')):
    @property
    def name(self):
        return token.tok_name[self.num]

def change_str_to_unicode(text):    
    result = text.splitlines()
    # Insert a dummy line into result so indexing result
    # matches tokenize's 1-based indexing
    result.insert(0, '')
    changes = []
    for tok in tokenize.generate_tokens(io.BytesIO(text).readline):
        tok = Token(*tok)
        if tok.name == 'STRING' and not tok.val.startswith('u'):
            changes.append(tok.start)

    for linenum, s in reversed(changes):
        line = result[linenum]
        result[linenum] = line[:s] + 'u' + line[s:]
    return '\n'.join(result[1:])

text = '''print "result code %d" % result['code']
# doesn't touch 'strings' in comments
'handles multilines' + \
'okay'
u'Unicode is not touched'
'''

print(change_str_to_unicode(text)) 
```

产量

```
print u"result code %d" % result[u'code']
# doesn't touch 'strings' in comments
u'handles multilines' + u'okay'
u'Unicode is not touched' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T04:55:17.767

试试这个（使用正则表达式），它比@unutbu 的解决方案短。
但是有一个循环孔，包含的字符串`#`不能用这个。

```
import re
scode = '''
print "'Hello World'" # prints 'Hello World'
u'Unicode is unchanged'"""
# so are "comments"'''
x1 = re.compile('''(?P<unicode>u?)(?P<c>'|")(?P<data>.*?)(?P=c)''')

def repl(m):
    return "u%(c)s%(data)s%(c)s" % m.groupdict()

fcode = '\n'.join(
      [re.sub(x1,repl,i)
       if not '#' in i
       else re.sub(x1,repl,i[:i.find('#')])+i[i.find('#'):]
       for i in scode.splitlines()])
print fcode 
```

输出：

```
print u"'Hello World'" # prints 'Hello World'
u'Unicode is unchanged'
# so are "comments" 
```

因为`#`我有这个（它比@unutbu 的解决方案长：|）

```
import re
scode = '''print "'Hello World'"  # prints 'Hello World'
u'Unicode is unchanged'
# so are "comments"
'#### Hi' # 'Hi' '''

x1 = re.compile('''(?P<unicode>u?)(?P<c>'|")(?P<data>.*?)(?P=c)''')

def in_string(text,index):
    curr,in_l,in_str,level = '',0,False,[]

    for c in text[:index+1]:
        if c == '"' or c == "'":
            if in_str and curr == c:
                instr = False
                curr = ''
                in_l -= 1
            else:
                instr = True
                curr = c
                in_l += 1
        level.append(in_l)
    return bool(level[index])

def repl(m):
    return "u%(c)s%(data)s%(c)s" % m.groupdict()

def handle_hashes(i):
    if i.count('#') == 1:
        n = i.find('#')
    else:
        n = get_hash_out_of_string(i)
    return re.sub(x1,repl,i[:n]) + i[n:]

def get_hash_out_of_string(i):
    n = i.find('#')
    curr = i[:]
    last = (len(i)-1)-''.join(list(reversed(i))).find('#')
    while in_string(curr,n) and n < last:
        curr = curr[:n]+' '+curr[n+1:]
        n = curr.find('#')
    return n

fcode = '\n'.join(
    [re.sub(x1,repl,i)
     if not '#' in i
     else handle_hashes(i)
     for i in scode.splitlines()])

print fcode 
```

输出：

```
print u"'Hello World'"  # prints 'Hello World'
u'Unicode is unchanged'
# so are "comments"
u'#### Hi' # 'Hi' 
```

# c# - 如何将文件，对象插入excel工作表？

> ID：15450244
> 
> 赞同：0
> 
> 时间：2013-03-16T14:07:11.923
> 
> 标签：c#, excel

我可以使用 AddShape 方法将图像插入到 Excel 工作表中。

但是当我尝试插入像文件这样的对象时，我收到了类似 hsresult 的错误。

如何以编程方式将 rar 或文本或任何其他文件类型插入 Excel？我正在使用 csharp，并且我正在将 excel 互操作引用到我的项目中。

**请帮助我，如何使用 chsarp 通过 AddObject 方法将对象插入到 excel 中。**

# apache - 我无法访问 php 页面

> ID：15450246
> 
> 赞同：0
> 
> 时间：2013-03-16T14:07:34.557
> 
> 标签：apache

我在 var/www/tuto 导演上创建了一个简单的 php 页面，但是当我试图打开这个页面时（这是它的 URL :) `http://localhost/tuto/index.php`我收到了这条消息：

> # 禁止的
> 
> 您无权访问此服务器上的 /tuto/index.php。
> 
> Apache/2.2.22 (Ubuntu) 服务器在 localhost 端口 80

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T14:38:46.250

该`tuto`目录具有`aimad`组和所有者。这`drwx------`意味着只有您对该目录具有读/写/执行权限。

*   `d`表示节点是目录
*   `r(4)`表示读取权限
*   `w(2)`表示写权限
*   `x(1)`表示执行权限

权限的顺序是用户、组、世界。

要解决这个问题，您需要更正权限，以便 apache 可以从中读取。这是用这个命令完成的。

```
chmod -R 755 /var/www/tuto 
```

*   用户：`7`= r + w + x
*   组：`5`= r + x
*   世界：`5`= r + x

它将为目录和其中的所有内容设置正确的权限。

更好的方法是更改`www-data`​​ Apache 在 Ubuntu 上使用的目录组，然后设置权限以允许该组。

```
chown -R aimad:www-data /var/www/tuto
chmod -R 750 /var/www/tuto 
```

要更好地了解权限的工作原理，请查看 Wikipedia 页面。 [http://en.wikipedia.org/wiki/Filesystem_permissions](http://en.wikipedia.org/wiki/Filesystem_permissions)

# javascript - 如何编辑此 jquery 代码以在页面加载时自动打开菜单？

> ID：15450247
> 
> 赞同：1
> 
> 时间：2013-03-16T14:07:43.207
> 
> 标签：javascript, jquery, menu, pageload

我正在使用我在网上找到的 nav.js，并希望向其中添加一些 javascript 以启用在页面加载时自动打开的菜单。我对js不太好，我尝试将“open”类添加到我的一个类别中，但它似乎没有做任何事情。我怀疑我需要复制现有代码，添加一些关于它在页面加载时执行的内容，然后添加“打开”会起作用。

这是我的js

```
$(document).ready(function(){
    $("#nav > li > a").on("click", function(e){
        if($(this).parent().has("ul")) {
          e.preventDefault();
        }

        if(!$(this).hasClass("open")) {
          // hide any open menus and remove all other classes
          $("#nav li ul").slideUp(350);
          $("#nav li a").removeClass("open");

          // open our new menu and add the open class
          $(this).next("ul").slideDown(350);
          $(this).addClass("open");
        } else if($(this).hasClass("open")) {
          $(this).removeClass("open");
          $(this).next("ul").slideUp(350);
        }
     });
 }); 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T14:17:19.813

你可以调用这个内部文件准备好

```
$("#nav > li > a").addClass("open").next("ul").slideDown(350); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T14:11:08.053

```
$("#nav").find("li").has("ul").first().find('> a').click();
//          ^ -- more efficient to select by ID then filter
//                    ^ -- filter for submenu items only
//                               ^ -- only need the first one
//                                         ^ -- find the link
//                                                  ^ -- trigger the click 
```

您可以以编程方式触发点击处理程序。
在现有代码之后添加它（但在准备好的处理程序中）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T14:11:32.157

在该菜单项上触发`click`事件。

把它放在 document.ready 里面

`$("#nav > li > a#yourID").trigger('click');`

# c# - FlipView：如何绑定集合 作为 ItemsSource

> ID：15450252
> 
> 赞同：3
> 
> 时间：2013-03-16T14:07:50.620
> 
> 标签：c#, xaml, windows-store-apps

是否有一种聪明的方法来绑定`Collection<string>`包含要在 a 中显示的图像的 URL 的 a `FlipView`？

或者我必须提供图片`Collection<Image>`吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-16T14:19:49.843

您可以使用 URL 将它们绑定到内部的`Source`属性：`Image``ItemTemplate`

```
<FlipView.ItemTemplate>
   <DataTemplate>
       <Image Source="{Binding}" />
   </DataTemplate>
</FlipView.ItemTemplate>

flipView.ItemsSource = imageUrls; 
```

[在 FlipView 中显示来自 Bing 的图像的示例](http://rarcher.azurewebsites.net/Post/PostContent/10)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-21T22:51:43.153

我知道这个答案比较晚，但您也可以绑定到图像集合。实现这一点的最佳方法是使用可观察的位图集合而不是集合。在您的视图模型中创建一个返回可观察位图集合的属性

```
 // defines the binding property to the flipview
 private ObservableCollection<BitmapImage> _pictureGallery;
        public ObservableCollection<BitmapImage> PictureGallery
        {
            get { return _pictureGallery; }
            set
            {
                if (_pictureGallery != value)
                {
                    _pictureGallery = value;
                    onPropertyChanged("PictureGallery");
                }    

            }
        }

// This defines the property change event
public event PropertyChangedEventHandler PropertyChanged;
        private void onPropertyChanged(string propertyName)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
            }
        } 
```

在您的 xaml 中，您可以像这样定义您的翻转视图

```
 <Border Background="White">
                <FlipView x:Name="flipView" ItemsSource="{Binding PictureGallery}" Visibility="Visible" >
                    <FlipView.ItemTemplate>
                    <DataTemplate>
                                <Image Width="200" Height="200" Source="{Binding}" Stretch="UniformToFill" />
                    </DataTemplate>
                    </FlipView.ItemTemplate>
                </FlipView>
                </Border> 
```

注意：根据您想要创建位图图像的方式，您有一个文件流来设置位图图像的来源

```
BitmapImage BitImage = new BitmapImage();
BitImage.SetSource(stream); 
```

# javascript - 如何根据属性值在表中显示信息 (XML-XSLT)

> ID：15450254
> 
> 赞同：0
> 
> 时间：2013-03-16T14:07:54.907
> 
> 标签：javascript, html, xml, xslt

我想在下拉列表中显示带有所选月份值的表格，首先我隐藏了表格，用javascript中的一个函数显示表格，现在我不知道如何只显示与本月相关的信息. 可以在 xsl 代码中使用 if 语句吗？谢谢。

书籍.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="tabla.xsl"?>
<TotalBooks>
    <books month= "January">
       <book>
         <isbn> 1 </isbn>
         <tittle>The tittle</tittleo>
         <author>Me</author>
       </book>
       <book>
         <isbn> 2 </isbn>
         <tittle>The tittle two</tittleo>
         <author>Me</author>
       </book>
    </books>
</TotalBooks> 
```

书籍.xsl

```
<html>
  <head>
    <script>
      function TryOption() 
      { 
         tabla.style.visibility="visible";          
      }

    </script>
  </head>
  <body>
    <h1>My books</h1>
    <div>
      <label> Sales/ month: </label>
      <select>
        <option> </option>
        <xsl:for-each select="TotalBooks/books">
          <option onclick="TryOption();">
            <xsl:value-of select="@month"/>
          </option>
        </xsl:for-each>
      </select>
    </div>
    <div>
      <table id="tabla">
        <tr bgcolor="skyblue">
          <th align="left">Tittle</th>
          <th align="left">Author</th>
        </tr>
        <xsl:for-each select="TotalBooks/books/book">
          <tr>
            <td>
              <xsl:value-of select="tittle"/>
            </td>
            <td>
              <xsl:value-of select="author"/>
            </td>
          </tr>
        </xsl:for-each>
      </table>
    </div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T15:10:24.167

请试一试：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="html" indent="yes"/>

  <xsl:template match="/">
    <html>
      <head>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" ></script>
        <script>
          function TryOption(value)
          {
              $('.book').hide();
              if(value != '') {
                 $('.' + value).show();
              }
          }
        </script>
        <style>
          .book { display: none; }
        </style>
      </head>
      <body>
        <h1>My books</h1>
        <div>
          <label> Sales/ month: </label>
          <select onchange="TryOption(this.value);">
            <option> </option>
            <xsl:apply-templates select="TotalBooks/books" />
          </select>
        </div>
        <div>
          <table id="tabla">
            <tr bgcolor="skyblue">
              <th align="left">Tittle</th>
              <th align="left">Author</th>
            </tr>
            <xsl:apply-templates select="TotalBooks/books/book" />
          </table>
        </div>
      </body>
    </html>
  </xsl:template>

  <xsl:template match="books">
    <option value="{@month}">
      <xsl:value-of select="@month"/>
    </option>
  </xsl:template>

  <xsl:template match="book">
    <tr class="book {../@month}">
      <td>
        <xsl:value-of select="tittle"/>
      </td>
      <td>
        <xsl:value-of select="author"/>
      </td>
    </tr>
  </xsl:template>
</xsl:stylesheet> 
```

要点：

*   `onchange`将事件处理程序移至`select`
*   `value`向`option`元素添加属性
*   添加课程以按月识别书籍
*   使用 JavaScript 按类隐藏和显示项目

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T14:52:35.977

要获得工作代码，您需要做几件事：

**第 1 步**- 修复您的 XML 文件

您的`<title`> 标签已关闭，`</titleo>`这显然是错误的。

**第 2 步**- 修复 XSLT 文件

添加 XSLT 文档声明，因此形成如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="2.0">
  <xsl:output method="xml" indent="yes" />

  <xsl:template match="/">
    <html>
      <!-- Rest of the stylesheet may be here -->
    </html>
  </xsl:template>
</xsl:stylesheet> 
```

**第 3 步**- 重新考虑您的代码

您的代码有几个问题：

1.  您计划创建一个包含所有月份行的大表。这个是可以做到的，但是以后在JS中会比较难处理。只显示/隐藏一个表格比单独显示/隐藏每一行更容易。
2.  您正在使用`onclick`> `<option`。我建议使用`onchange`on `<select>`。

**第 4 步**- 将更多数据添加到 XML 文件

这将使您以更明显的方式测试您的代码。只需复制`<books>`一月并将月份名称更改为二月。

**第 5 步**- 修复 XSLT

请查找以下代码作为示例。这段代码远未完成，但它向您展示了方向。请参考我的内联评论。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="2.0">
  <xsl:output method="xml" indent="yes" />

<xsl:template match="/">

<html>
  <head>
  <script>
  /* <select> is a parameter */
  function TryOption(select)
  {
     /* get the name of the selected month */
     var month = select.options[select.selectedIndex].value;

     /* show the table corresponding to this month */
     document.getElementById('table-'+month).style.display="block";

     /* you should also hide other tables - it's not done here */
  }
  </script>
  </head>

  <body>
    <h1>My books</h1>
    <div>
      <label> Sales/ month: </label>

      <!-- 'onchange' event here -->
      <select onchange="TryOption(this)">
        <option></option>
        <xsl:for-each select="TotalBooks/books">
          <!-- each <option> has a 'value' attribute with the name of th month
               On example:
                <option value="January">January</option> --> 
          <option>
            <xsl:attribute name="value"><xsl:value-of select="@month"/></xsl:attribute>
            <xsl:value-of select="@month"/>
          </option>
        </xsl:for-each>
      </select>
    </div>
    <div>
      <!-- For each <books> tag (which represents one month) create new table.
           Table's id = 'table'+month, on example 'table-January'.
           Each table is hidden by default. -->
      <xsl:for-each select="TotalBooks/books">
        <table style="display: none">
          <xsl:attribute name="id">table-<xsl:value-of select="@month"/></xsl:attribute>
          <tr bgcolor="skyblue">
            <th align="left">Tittle</th>
            <th align="left">Author</th>
          </tr>
          <!-- For each book in the given month, list those. 
               This 'for-each' only loops over books from one month,
               because this loop is inside another loop -->
          <xsl:for-each select="book">
            <tr>
              <td><xsl:value-of select="tittle"/></td>
              <td><xsl:value-of select="author"/></td>
            </tr>
          </xsl:for-each>
        </table>
      </xsl:for-each>
    </div>
  </body>
</html>

</xsl:template>
</xsl:stylesheet> 
```

# android - 如何 .release() RingtoneManager 实例化的 MediaPlayer？

> ID：15450255
> 
> 赞同：3
> 
> 时间：2013-03-16T14:07:55.113
> 
> 标签：android, android-mediaplayer

我的活动中收到了默认铃声：

```
remindRingtoneView = (TextView) findViewById(R.id.remind_ringtone);

remindRingtoneView.setText(RingtoneManager.getRingtone(
            NewReminder.this, ringtone_uri).getTitle(
            NewReminder.this)); 
```

在这行之后，我在 LogCat 中有一个调试行，标签 = 'Ringtone' 和 message =

`'Successfully created a local player'.`

当我完成 Activity 和系统垃圾收集器时做得很好，我在 LogCat = 中收到了一条警告消息

```
'MediaPlayer finalized without being released'. 
```

我怎样才能释放它？

答案是：

```
Ringtone remind_ringtone = RingtoneManager.getRingtone(
            NewReminder.this, ringtone_uri);        
remindRingtoneView.setText(remind_ringtone.getTitle(NewReminder.this));
remind_ringtone.stop(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-16T14:54:18.827

在您的程序中，`RingtoneManager.getRingtone`将一个对象返回给`Ringtone`类。如果我们认为这个对象是`mRingTone`，那么调用`mRingTone.stop()`将释放该`MediaPlayer`对象。

# jsf - 在 primefaces 数据表过滤器中设置默认值

> ID：15450274
> 
> 赞同：6
> 
> 时间：2013-03-16T14:10:21.347
> 
> 标签：jsf, jsf-2, primefaces

我正在使用 primefaces v3.5。在数据表上，我在一列上使用过滤器。如何在加载页面本身时为过滤器设置默认值。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-09-16T21:10:41.070

在 primefaces 中使用列标记的 filterValue 属性，例如

```
<p:datatable ... widgetVar="dataTableWidgetVar">
<p:column  ...    filterValue="#{BackingBean.defaultValue}"> 
```

然后，在页面准备就绪时，在 javascript 中创建一个简单的函数调用来触发过滤器（小部件变量是通过 PF 中的 jQuery 创建的）：

```
<script  type="text/javascript" target="body">
$j = jQuery;
$j(document).ready( function() {
dataTableWidgetVar.filter();   
});
</script> 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-02-27T21:56:21.523

正确的解决方案是使用包含过滤集合的`filteredValue`属性和属性来向用户显示过滤器配置。`p:dataTable``filterValue``p:column`

要将`p:dataTable`过滤器保存在会话 bean 中，您还必须保留过滤后的数据。`p:dataTable`不会为您执行初始排序。

检查此示例 JSF：

```
<p:dataTable 
    value="#{usersBean.employees}" 
    var="e"
    filteredValue="#{userListState.filteredValue}">

    <p:ajax event="filter" listener="#{userListState.onFilterChange}"/>

    <p:column 
        headerText="user" 
        filterBy="#{e.user.id}" 
        filterValue="#{userListState.filterState('user.id')}">
        #{e.user.id}
    </p:column>
</p:dataTable> 
```

以这个托管 bean 为后盾：

```
@Named(value = "userListState")
@SessionScoped
public class UserListState implements Serializable{
    private Map<String, String> filterState = new HashMap<String, String>();
    private List<Employee> filteredValue;

    public UserListState() {
    }

    public void onFilterChange(FilterEvent filterEvent) {
        filterState = filterEvent.getFilters();
        filteredValue =(List<Employee>) filterEvent.getData();
    }

    public String filterState(String column) {
        return filterState.get(column);
    }

    public List<Employee> getFilteredValue() {
        return filteredValue;
    }

    public void setFilteredValue(List<Employee> filteredValue) {
        this.filteredValue = filteredValue;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T00:11:14.167

理想情况下，获取对数据表的引用（通过将视图数据表绑定到支持 bean 表示或遍历 DOM 树）并执行此操作

```
 Map<String,String> theFilterValues = new HashMap<String,String>();
    theFilterValues.put("filterColumn","fooValue");
    myDataTable.setFilters(theFilterValues); 
```

将设置默认文本值，但可能不会应用过滤器。

或者，primefaces 问题队列中的[这篇文章建议使用基于 jquery 的选项](https://code.google.com/p/primefaces/issues/detail?id=3212)

```
 <script>
        jQuery(document).ready(function() {
        jQuery('input[id*="datumCol"]').val('2012-07-17');
         });
    </script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-02-02T17:56:23.577

在实现 LazyDataModel 时，我在类构造函数中为类变量添加了一个默认过滤器。在此示例中，类变量称为“filters”，过滤是在值为“true”的“isActive”字段上完成的：

```
public class ExtendedLazyListModel<T> extends LazyDataModel<T> {

    private final List<T> datasource;
    private Map<String, Object> filters;

    public ExtendedLazyListModel(List<T> datasource) {
        this.filters = new HashMap<>();
        filters.put("isActive", "true");
        this.datasource = datasource;
        this.setRowCount(datasource.size());
    } 
```

然后在 Load 方法中，我添加了这段代码来设置默认过滤器（仅适用于第一次调用）：

```
public List<T> load(int first, int pageSize, String sortField, SortOrder sortOrder, Map<String, Object> filters) {
        //set default filter
        if (filters.isEmpty()){
            for (Field f : datasource.get(0).getClass().getDeclaredFields() ){
                if (this.filters.containsKey(f.getName())) {
                    filters.put(f.getName(), this.filters.get(f.getName()));
                    this.filters.remove(f.getName());
                }
            }
        }
..... 
```

在本例中，我在 XHTML 文件中添加了过滤列 p:column ...：

filterValue="true" // 是我为默认过滤器设置的值

# javascript - Jquery Tmpl If 语句不起作用

> ID：15450276
> 
> 赞同：1
> 
> 时间：2013-03-16T14:10:28.923
> 
> 标签：javascript, jquery, jquery-templates

我正在使用 jquery tmpl 插件。如果语句为假，则想法是向 img 标签添加一个类。

这是模板代码：

```
<img src="/assets/${assetId}/graphic.jpg" {{ if complete != true }} class="incomplete" {{ /if }}> 
```

这是浏览器（mozilla）上的结果：

```
<img class="incomplete" }}="" !="true" complete="" if="" {{="" src="/assets/821/graphic.jpg"> 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T14:22:35.040

知道了。这只是删除语句上的空格。

前：

```
<img src="/assets/${asset[enter link description here][1]Id}/graphic.jpg" {{ if complete != true }} class="incomplete" {{ /if }}> 
```

固定的：

```
<img src="/assets/${assetId}/graphic.jpg" {{if complete != true}} class="incomplete" {{/if}}> 
```

归功于 DCoder。

# jquery - jquery 仅在第一个按钮单击时将内容加载到 iframe

> ID：15450293
> 
> 赞同：0
> 
> 时间：2013-03-16T14:12:32.070
> 
> 标签：jquery, iframe, onclick

我敢肯定我一定错过了一些简单的东西。

我有一个页面，上面有 3 个名为 showHome、showRecords、showFinance 的按钮，我还有 3 个名为 divHome、divRecords、divFinance 的 div，在每个 div 中我有 3 个名为 iframeHome、iframeRecords、iframeFinance 的 iframe。

这里的目标是在页面呈现后加载第一个 iframe，然后当用户单击下一个按钮时，下一个 iframe 将动态设置其源，然后将显示 div，以便用户可以看到外部内容，仍然在我的域，但只是在其他地方。当然，在第 3 次按钮单击时也是如此，将 iframe 传递给加载的 url，然后显示 div。现在，当用户单击其他按钮之一时，div 应该显示或隐藏，没有理由重新加载内容。

所以我需要跟踪点击了哪个按钮，这样如果它有一个 1 它只会显示或隐藏 div，否则需要设置 iframe。我有一个这个工作的版本，不是很优雅，所以我试图用更少的代码来写这个，这就是我所拥有的不起作用，我知道为什么，但我不知道如何修复它。

我当前的脚本看起来像这样

```
var showHome_clicked = '1';
var showDataMart_clicked = '0';
var showFinance_clicked = '0';
var showCost_clicked = '0';
var showSchedule_clicked = '0';
var showPerformance_clicked = '0';
var showWinsight_clicked = '0';
var pageToLoad = "http://sp2010/dashboard/0045/default.aspx";

function showRequestedContent(){
    var displayedDiv = $('div.contentDiv').filter(function(){
        if($(this).css('display') != 'none'){
            alert(buttonClicked);
            $('.contentDiv:visible').fadeOut("fast");
            $("#div" + ($(this).index()+1)).show().fadeIn("slow");
        }
    });
}

$("input").click(function(e)
{
    var buttonClicked = (e.target.id + '_clicked');
    var targetIframe = (e.target.id).replace("show", "iframe");
/* Here I need to check the variable that i created, but it contains the name of my manipulated value not the 1 or 0 I need to check for, not sure how to do this? */
    if(buttonClicked == '0'){
        $(targetIframe).attr('src',  pageToLoad + '?isdlg=1');
            buttonClicked = '1';
            alert("zero");
            showRequestedContent;
    }
    else if(buttonClicked == '1'){
        showRequestedContent;
        alert("one");
    }

}); 
```

-------------已更新这现在正在工作----------------

```
var buttonClicked = 'showHome';
var currentDiv = 'divHome';

$('.switchIframe').click(function(e){
    e.preventDefault();
    if (e.target.id != buttonClicked){
        targetDiv = (e.target.id).replace("show", "div");
        var $targetIframe = $($(this).data('target')), 
        src = $(this).data('src');
        if($targetIframe.attr('src') != src){
            $targetIframe.attr('src', src);
        }

        showDiv(targetDiv);
        hideDiv(currentDiv);
        currentDiv = targetDiv;
        buttonClicked = e.target.id;
    }

});

function showDiv(id) {
   var $sDiv = $('#' + id);
   $sDiv.show(500);
}

function hideDiv(id) {
   var $hDiv = $('#' + id);
   $hDiv.hide(200);
}

$(document).ready(function(){
    $('#divHome').show();   
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T14:22:21.560

为什么不检查 iframe 是否具有`src`不等于`'about:blank'`？

```
$('input').click(function(e){
 // your code for targetIframe

  var currentSrc = $(targetIframe).attr('src');
  if(currentSrc == "about:blank"){
    $(targetIframe).attr('src', pageToLoad);
  }
  showRequestedContent(); // <-- In your code you forgot the parenthesis.
}); 
```

这假设您的 iframe 开始：

```
<iframe src="about:blank" id="yourID"></iframe> 
```

**编辑：**

从 DOM 节点存储和检索值的最简单方法是使用`data-*`属性。

例如：

```
<button class="switchIframe" data-target="#iframe1" data-src="http://youtube.com">Show iframe 1</button>
<iframe src="about:blank" id="iframe1"></iframe> 
```

然后你的 jQuery 看起来像：

```
$('.switchIframe').click(function(e){
  e.preventDefault();
  var $targetIframe = $($(this).data('target')),
      src = $(this).data('src');

  // if it's not the same source, load it.
  if($targetIframe.attr('src') != src){
    $targetIframe.attr('src', src);
  }

  showRequestedContent();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T14:40:49.497

为什么你需要 jQuery？

```
<a href="/pages/page1.htm" target="content">Page 1</a>
| <a href="/pages/page2.htm" target="content">Page 2</a>
| <a href="/pages/page3.htm" target="content">Page 3</a>
| <a href="#" id="end">End</a>

<iframe id="frame1" name="content" src="/pages/page1.htm"/> 
```

由于您将这些页面加载到 iframe 中，因此无论如何这些访问都会记录到您的网络统计信息中

至于显示/隐藏：

```
<script type="text/javascript">
$('#end').on('click',function(){
  $('#frame1').hide();
});
</script> 
```

如果您想在隐藏后再次显示框架，请单击其中一个链接（第 1 页、第 2 页等），然后将链接放入 ul 元素并将功能添加到您希望它工作的列表项中在该列表中，例如

```
<ul id="links">
  <li><a class="link" href="/pages/page1.htm" target="content">Page 1</a></li>
  <li><a class="link" href="/pages/page2.htm" target="content">Page 2</a></li>
  <li><a class="link" href="/pages/page3.htm" target="content">Page 3</a></li>
  <li><a href="#" id="end">End</a></li>
</ul>

<script type="text/javascript">
$('#links a.link').on('click',function() {
  if (!$('#frame1').is(":visible")) $('#frame1').show();
});
</script> 
```

# java - 带有类别的条形图，每个类别应该使用 jfreechart 具有不同的颜色

> ID：15450296
> 
> 赞同：0
> 
> 时间：2013-03-16T14:12:37.053
> 
> 标签：java, jfreechart, bar-chart

我想绘制不同类别​​的条形图。图表中的每个类别都应该用不同的颜色表示。

下面是我的代码：

```
JFreeChart chart = 
         ChartFactory.createBarChart("Comparison between the average of 2 values",
         XAXIS_NAME, YAXIS_NAME, dataSet, PlotOrientation.VERTICAL, true, true,
         false);    

    final CategoryPlot plot = chart.getCategoryPlot();
    chart.setBackgroundPaint(Color.white);       
    plot.setBackgroundPaint(Color.lightGray);
    plot.setDomainGridlinePaint(Color.white);
    plot.setRangeGridlinePaint(Color.white);
    BarRenderer renderer=new BarRenderer();

  System.out.print( "set the range axis to display integers only...");
    final NumberAxis rangeAxis = (NumberAxis) plot.getRangeAxis();
    rangeAxis.setStandardTickUnits(NumberAxis.createIntegerTickUnits());

      System.out.print( "disable bar outlines...");
    renderer = (BarRenderer) plot.getRenderer();
    renderer.setDrawBarOutline(false);
    renderer.setMaximumBarWidth(0.10);

      System.out.print( "set up gradient paints for series...");
final GradientPaint gp0 = new GradientPaint(
        0.0f, 0.0f, Color.blue, 
        0.0f, 0.0f, Color.lightGray
    );
    final GradientPaint gp1 = new GradientPaint(
        0.0f, 0.0f, Color.green, 
        0.0f, 0.0f, Color.lightGray
    );

    renderer.setSeriesPaint(0, gp0);
    renderer.setSeriesPaint(1, gp1); 
```

# html - 调整窗口大小时div移动

> ID：15450298
> 
> 赞同：0
> 
> 时间：2013-03-16T14:12:49.913
> 
> 标签：html, resize

嗨，我真的很挣扎，无法弄清楚我做错了什么。我正在建立我的朋友网站：[bethcalter.co.uk/index.php](http://bethcalter.co.uk/index.php)，在其他浏览器上检查时，div 不在页面上，当我调整窗口大小时，div 正在移动，我不希望他们这样做.

我是 HTML/CSS 的新手，我做的不多，我更像是一名设计师，请帮忙，我已经在这里寻找答案了，但是我认为我的编码有些问题，我已经尝试过divs他们自己的包装器等，它不起作用。

**我的CSS：**

```
#content {
    margin:0;
    width:900px;
    height:400px;
    margin-left:360px;
    margin-top:-930px;
    background-color: #ffffff;
    position:absolute;
}

#bar {
    margin:0 auto;
    width:900px;
    height:90px;
    margin-left:360px;
    margin-top:-1010px;
    background-color: #ffffff;
    opacity: 0.4;
    position:absolute;

} 
```

**html:**

```
<body>
  <div id="banner">
  </div>
  <div id="background">
    <div id="wrapper">
      <img src="images/Statue4.jpg">
    </div>
  </div>
  <div id="wrap">
    <div id="bar">
    </div>
    <div id="content">
      <img src='images/deb.jpg' style="margin: 40px 40px 40px 40px"/>
    </div>
  </div>    
</body>
</html> 
```

请帮忙，非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T14:16:26.793

如果您调整窗口大小，则您的大图像 div 正在移动，因为您将其与页面中心对齐。

如果您只想让它左对齐，请在 #wrapper 选择器的 css 中删除此行：

```
margin: 0 auto; 
```

# c# - LuaInterface：如何访问多维lua表？

> ID：15450300
> 
> 赞同：2
> 
> 时间：2013-03-16T14:13:07.727
> 
> 标签：c#, lua, lua-table, luainterface

我是 LuaInterface 的新手，有一个非常简单的问题：如何从 c# 访问多维 lua 表中的数据？我设法读取字符串和整数值，但对表格并不幸运。我的目标是在（虚拟）GridView 中显示多维 lua 表的内容。

抱歉，我认为这是一个非常简单的问题，但我既找不到好的文档也找不到可编译的示例项目。如果您认为我应该在此处询问之前先 RTFM，您也可以将我指向文档 - 但我找不到任何文档。

谢谢，迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T08:27:57.907

LuaInterface 将 Table 类型包装到 LuaTable。所以，如果你在 Lua 中定义一个多维表

```
t = {}
t[1] = {}
t[1][1] = 888
ShowTable(t)     -- assume ShowTable is a C# function 
```

您可以使用下面的代码在 C# 中访问 lua 表

```
public void ShowTable(LuaTable t)
{
    LuaTable t1 = t[1];
    Console.WriteLine(t1[1]);   // should display 888
    t.Dispose();                  // Don't forget to Dispose the table sent from Lua to C#, or memory leak happens!
} 
```

# php - Laravel 4 Form::open 设置动作

> ID：15450303
> 
> 赞同：3
> 
> 时间：2013-03-16T14:13:19.947
> 
> 标签：php, action, laravel, forms, laravel-4

我目前正在尝试 Laravel 4，并且我已经创建了一个资源控制器。在“编辑”功能中，我正在构建一个表单，该表单应该发布到“更新”功能。

为了创建表单打开标签，我使用了`Form::open()`最近添加到 Laravel 4 中的函数。但是当我只是做`Form::open()`表单的动作是当前的 url，我不知道如何改变动作。

我试过`Form::open('clients/' . $client->id)`了，但这给了我以下错误：

**ErrorException：可捕获的致命错误：传递给 Illuminate\Html\FormBuilder::open() 的参数 1 必须是数组类型**

所以我尝试了`Form::open('[clients/' . $client->id)`。这不会产生错误，但现在表单打开标记为：

`<form method="POST" action="http://boekhouding.dev/clients/1/edit" accept-charset="UTF-8" clients/1="clients/1">`

而且我也这样尝试过：`Form::open(['action' => 'clients/' . $client->id])`但是当我这样做时，表单打开标签根本没有任何动作。

那么，有谁知道如何设置表单动作？使用命名路线是完美的，但即使能够设置动作也很好。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T00:22:12.070

您可以使用命名路由、控制器操作或简单的 url 来设置表单操作。

要通过命名路由设置它，请使用：

```
{{ Form::open(array('route' => array('route_name', $client->id))) }} 
```

要通过控制器操作设置它，请使用：

```
{{ Form::open(array('action' => array('ClientController@update', $client->id))) }} 
```

所以**关键字`action`**不是指表单标签的'action'参数，而是指**控制器动作**

你也可以像这样使用纯 URL：

```
{{ Form::open(array('url' => 'someurl')) }} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T23:50:26.367

@jeffrey_way 发布了关于改进 Laravel 4 中新的 FormBuilder 的推文。下面的粘贴桶链接应该会有所帮助。它似乎更多的是关于 RESTful 控制器，但相关。

[表单操作明智的默认值 - 粘贴桶](http://paste.laravel.com/ky1)

我以为我读到了一些关于他明天将推出 Forms 教程的信息。如果是这样，可以在这里找到[net.tutsplus.com/?s=laravel](http://net.tutsplus.com/?s=laravel)

# nosql - 对象数据库简介

> ID：15450309
> 
> 赞同：1
> 
> 时间：2013-03-16T14:14:27.807
> 
> 标签：nosql, neo4j, graph-databases, concept

我试图理解 noSQL 数据库的概念，更准确地说，是 neo4j 图形数据库背后的概念。我有使用 SQL 数据库（MySQL、MS SQL）的经验，但是管理分层数据的局限性使我扩展了我的知识。但是现在我有一些问题，我找不到他们的答案（也许我不知道要搜索什么）。

想象一下，我们有世界上的国家列表。每个国家每年都有自己的GDP。每个国家的 GDP 由不同的来源计算得出——世界银行、他们的政府、中央情报局等。在这种情况下，组织数据的最佳方式是什么？

想到的最简单的事情是拥有节点*（值是虚构的）*：

```
China:
  GDPByWorldBank2012: 999,
  GDPByCIA2011: 994,
  GDPByGovernment2012: 1102, 
```

在关系数据库中，我会将数据拆分为三个表：国家、来源和价值，在价值中，我将有 GDP 的价值、年份、国家的 ID 和来源的 ID。

想到的另一件事是创建节点 CIA、世界银行，但节点政府看起来真的很奇怪。尽管如此，这个想法是建立关系（*valueIfGDP*）：

```
CIA -> valueOfGDP - {year: 2011, value: 994} -> China
World Bank -> valueOfGDP - {year: 2012, value: 999} -> China 
```

这对我来说看起来很奇怪，更重要的是，当我们从一个来源添加所有年份的值时会发生什么？我们会有多重关系还是什么？

如果我的问题太愚蠢，我很抱歉，如果有人解释我或告诉我要读什么书/文章，我会很高兴。

提前致谢。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T16:49:19.680

您的问题非常合理，而且您并不是唯一一个一开始难以掌握图形建模的人；）

在对数据进行建模之前，总是更容易开始思考你想用数据回答的问题。

假设您要检索由 CIA 计算的所有国家/地区的 2012 年 GDP。

实现这一点的一个简单方法是统一标注国家节点，并设置一个明显依赖于国家名称的属性名称。

而且这个领域的CIA/WorldBank/Government都是“来源”，我们也统一标注一下。

例如，这可能会给出如下内容：

```
(ORGANIZATION {name: CIA})-[:HAS_COMPUTED_GDP {year:2011, value:994}]->(COUNTRY {name:China}) 
```

使用 Cypher 查询语言，遵循此模型，您将执行以下查询：

```
START cia = node:nodes(name = "CIA")
MATCH cia-[gdp:HAS_COMPUTED_GDP]->(country)
WHERE gdp.year = 2012
RETURN cia, country, gdp 
```

在此查询中，我使用索引查找作为起点（而不是不应使用的内部技术概念的 ID）按名称检索 CIA 并匹配相关子图以最终返回 CIA、GDP 关系及其与输入约束匹配的关联国家。

尽管 Neo4J 是完全无模式的，但这并不意味着您必须拥有完全灵活的数据模型。有一点结构总是有助于使您的查询或遍历更易于阅读。

如果您不熟悉 Cypher 查询语言（这**不是**在图形中读取或写入数据的唯一方法），请查看 Neo4J 的优秀文档（Cypher：[http ://docs.neo4j.org/chunked /stable/cypher-query-lang.html](http://docs.neo4j.org/chunked/stable/cypher-query-lang.html)，完成：[http](http://docs.neo4j.org/chunked/stable/index.html) ://docs.neo4j.org/chunked/stable/index.html ）并在那里尝试一些查询：[http](http://console.neo4j.org/) ://console.neo4j.org/ ！

为了回答你的第二个问题，如果你想再增加一年的 GDP 计算，这将归结为在组织和国家之间添加新的关系“HAS_COMPUTED_GDP”，不多不少。

希望能帮助到你 ：）

# c# - Windows 8 Xaml 缓慢的 VariableSizedWrapGrid

> ID：15450317
> 
> 赞同：0
> 
> 时间：2013-03-16T14:15:38.740
> 
> 标签：c#, xaml, windows-8

我正在使用带有模板选择器的 GridView 并在后面的代码中传递项目源。问题在于 VariableSizedWrapGrid 真的很慢，传递的集合大约有 80 项大（集合由几个字符串组成）。删除 variableSizedWrapGrid 解决了这个问题，但给我留下了宽度较小的模板之间的大间隙。

这是网格视图：

```
 <SemanticZoom x:Name="Zoom" Grid.Row="1" IsZoomedInViewActive="False" ViewChangeStarted="Zoom_ViewChangeStarted_1" IsZoomOutButtonEnabled="False" Margin="0,0,0,29" Grid.RowSpan="2">
        <SemanticZoom.ZoomedInView>
            <!-- Horizontal scrolling grid used in most view states -->
            <GridView
        x:Name="itemGridView"
        AutomationProperties.AutomationId="ItemsGridView"
        AutomationProperties.Name="Items"
        TabIndex="1"
        ItemTemplateSelector="{StaticResource DayTemplateSelector}"
        SelectionMode="None"
        IsSwipeEnabled="True"
        ItemContainerStyle="{StaticResource GridViewItemStyle1}"
        ScrollViewer.HorizontalScrollBarVisibility="Auto"
        IsItemClickEnabled="True"
        ScrollViewer.IsHorizontalScrollChainingEnabled="False"
        ItemClick="ItemView_ItemClick">
                <GridView.ItemsPanel>
                    <ItemsPanelTemplate>
                        <VariableSizedWrapGrid ItemWidth="380" ItemHeight="500"/>
                    </ItemsPanelTemplate>
                </GridView.ItemsPanel>
            </GridView>
        </SemanticZoom.ZoomedInView> 
```

和模板选择器：

```
 class DayTemplateSelecter : DataTemplateSelector
{
    public DataTemplate DayOffTemplate { get; set; }

    public DataTemplate DutyTemplate { get; set; }

    public DataTemplate RestTemplate { get; set; }

    protected override DataTemplate SelectTemplateCore(object item, DependencyObject container)
    {
        var templateItem = item as DutyItem;
        var element = container as FrameworkElement;

        if (templateItem.Trip.Count > 0 || templateItem.OtherTrip.Count > 0)
        {
            container.SetValue(VariableSizedWrapGrid.ColumnSpanProperty, 2);
                return DutyTemplate;
        }
        else if (templateItem.Codes.Count > 0)
        {
                container.SetValue(VariableSizedWrapGrid.ColumnSpanProperty, 1);
                return DayOffTemplate;

        }
        else
        {
            container.SetValue(VariableSizedWrapGrid.ColumnSpanProperty, 1);
            return RestTemplate;
        }

    }

} 
```

我不认为这会有如此大的性能差异。. 仅使用 variableSized 会使页面延迟 3 秒，这在某些低端平板电脑上甚至更大。

我做错了吗，有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T06:05:19.530

与 WrapGrid 不同，VariableSizedWrapGrid 不会虚拟化其项目。我建议如果您必须显示 80 个项目，请使用 WrapGrid，或者如果您必须使用 VariableSizedWrapGrid，请将项目数量减少到更易于管理的水平。

# android - 当用户停止与活动交互时启动线程

> ID：15450319
> 
> 赞同：1
> 
> 时间：2013-03-16T14:15:42.573
> 
> 标签：android, multithreading

我正在开发一个联系人应用程序。我已经完成了它的代码。它运行良好，可以做所有你可以要求它做的事情，而不会让人头疼。但是，仍有改进的机会。为了消除任何类型的延迟，我在通过进度对话框向用户提供任何 UI 之前加载所有联系人图像和主要电话号码。我想实现一种机制，以便应用程序在用户完成滚动并搜索/读取联系人姓名以获得所需的姓名时开始检索联系人图像，因此线程应该在用户开始阅读/或停止滚动时立即启动，并且无论如何，他开始滚动，线程应该暂停并让用户再次滚动。除了实施其他减少延迟的技术之外，如何实现它的任何想法，我相信这将是最好的。所以，有任何想法吗 ？我不知道如何启动这个机制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T18:06:33.747

我建议为此使用 Executors 而不是 Threads。这是一个例子 - [http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ThreadPoolExecutor.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ThreadPoolExecutor.html)

# javascript - 将 javascript 音频移动到 jquery 中

> ID：15450320
> 
> 赞同：5
> 
> 时间：2013-03-16T14:15:43.920
> 
> 标签：javascript, jquery, html, audio

这是我第一次在论坛发帖。我正在建立一个英语/泰语课程网站，其中将包含许多英语和泰语语音的音频文件。[我使用鼠标悬停/按钮 javascript 函数http://www.javascriptkit.com/script/script2/soundlink.shtml](http://www.javascriptkit.com/script/script2/soundlink.shtml)做了一个网页概念验证，使用 一些 mods 和一些内联 js，这工作正常。

```
$(document).ready(function() { 
  var html5_audiotypes = { 
  "mp3": "audio/mpeg",
  "ogg": "audio/ogg",
     };      
function createsoundbite(sound) {
  "use strict";
  var html5audio = document.createElement('audio');
  if (html5audio.canPlayType){
   for(var i=0; i<arguments.length; i++) {
     var sourceEl = document.createElement('source');
     sourceEl.setAttribute('src', arguments[i]);
     if (arguments[i].match(/\.(\w+)$/i))
     sourceEl.setAttribute('type', html5_audiotypes[RegExp.$1]);
     html5audio.appendChild(sourceEl);
   }
   html5audio.load();
   html5audio.playclip = function() {
    html5audio.pause();
    html5audio.currentTime=0;
    html5audio.play();
    }
    return html5audio;
    }
    else{
    return {playclip:function(){throw new Error("Your browser doesn't support      HTML5 audio unfortunately")}};
    }
  }   
  var cn402=createsoundbite("audio/cn402.ogg", "audio/cn402.mp3");   
  var ry402=createsoundbite("audio/ry402.ogg", "audio/ry402.mp3");     
  var cn403=createsoundbite("audio/cn403.ogg", "audio/cn403.mp3");      
  var ry403=createsoundbite("audio/ry403.ogg", "audio/ry403.mp3");      
  var cn404=createsoundbite("audio/cn404.ogg", "audio/cn404.mp3");      
  var ry404=createsoundbite("audio/ry404.ogg", "audio/ry404.mp3");     
}); 
```

javascript代码由一行html代码调用，如下所示：

```
 <a href="#current" class= "rollover" onclick="ry402.playclip()"></a>Please don't swim by yourself</span> 
```

我想将此函数及其相关变量合并到 jquery 中。以便从 html 中删除所有 js 代码。第一步，只是让 jquery 代码工作对我来说有点问题。我已经尝试在文档就绪函数中包含 js 音频代码。如上所示，但这不起作用。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T14:23:09.637

我不确定我是否正确，但您可以很容易地从给定链接中删除 javascript 代码：

```
$('.rollover').click(function(){

ry402.playclip();

}); 
```

我们来看看：[http ://api.jquery.com/click/](http://api.jquery.com/click/)

# c# - 我可以从 C# 委托返回对新对象实例的引用吗？

> ID：15450321
> 
> 赞同：3
> 
> 时间：2013-03-16T14:15:46.963
> 
> 标签：c#, anonymous-delegates

我正在学习/尝试 C# 中的一些功能模式，但遇到了一个我无法解释的问题。我确定这是一个简单的答案（我希望如此），但我很难看到它。可能与闭包等有关，而我无法开箱即用是对我隐瞒了答案！

这是我的实验：我正在尝试从函数委托中返回特定类的全新实例。

```
public class Foo{
    string A { get; set ; }
}

static void Main( string[] args ){
    // the delegate...
    Func<Foo,bool> someFunc = o => {
        o = new Foo { A = "A new instance of o?" };
        return true;
    };

    Foo foo = null;   // was hoping to replace this via delegate
    var myFunc = someFunc;
    var result = myFunc( foo );

    if ( foo == null )
        Console.WriteLine( "foo unchanged :-(" );
    else
        Console.WriteLine( foo.A ); // hoping for 'A new instance of o?' 
```

当然，我只是在我的输出中得到“foo 未更改 :-(”。我在测试中做了一点改动，我传入了一个非空 Foo 实例并修改了属性“A”（而不是返回一个新实例）和效果很好（也就是说，我可以像将对象引用传递给函数时所期望的那样改变现有对象）我似乎无法从我的委托中获取新实例。

所以？我只是在代码中做错了吗？这完全可以做到吗？很想知道为什么这不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T14:46:20.310

形参`o`是值的*副本*`foo`；mutating`o`不会发生变异`foo`。就像你说的一样：

```
int x = 1;
int y = x;
y = 2; 
```

那没有改变`x`。`y`是的值的*副本*，而`x`不是 的*别名*`x`。

你多虑了这个问题。如果你想要一个改变本地的委托，那么只需编写一个改变本地的委托：

```
Foo foo = null;   // was hoping to replace this via delegate
Action mutateFoo = () => { foo = new Foo() { A = "whatever"}; };
mutateFoo();
if ( foo == null )
    Console.WriteLine( "foo unchanged :-(" );
else
    Console.WriteLine( foo.A ); 
```

如果您只想改变一个变量，那么就改变这个变量。如果您只想执行副作用，则无需从委托中传入或传出任何内容。

我注意到您说您正在试验功能模式。请记住，函数式编程*不鼓励*变量突变，因此您可能会走上错误的道路。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-16T14:23:09.293

您可以返回`Foo`lambda 表达式的返回值：

```
Func<Foo> someFunc = o =>
{
    return new Foo { A = "A new instance of o?" };
}; 
```

或者，[`Tuple<bool, Foo>`](http://msdn.microsoft.com/en-us/library/dd387181.aspx)如果您确实需要返回 a ，则可以返回 a `bool`：

```
Func<Tuple<bool, Foo>> someFunc = o =>
{
    return Tuple.Create(true, new Foo { A = "A new instance of o?" });
}; 
```

或者，如果你*真的*确定你想要这样，你可以用一个[参数](http://msdn.microsoft.com/en-us/library/ee332485.aspx)[`Func`](http://msdn.microsoft.com/en-us/library/bb549151.aspx)声明你自己的自定义委托：[`out`](http://msdn.microsoft.com/en-us/library/ee332485.aspx)

```
delegate TResult FuncOut<T, TResult>(out T arg); 
```

```
FuncOut<Foo, bool> someFunc = (out Foo o) =>
{
     o = new Foo { A = "A new instance of o?" };
     return true;
};

Foo foo;
var result = someFunc(out foo); 
```

但我不建议这样做。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-16T14:24:58.353

您正在将对象的引用（即地址）传递`Foo`给您的委托。该地址被分配给`o`委托的参数（将其视为局部变量）。当您更改`Foo`委托中的对象时，您将要引用对象并更改该地址上的内容。这就是对象发生变化的原因。

但是，当您将新地址分配给委托的局部变量（即参数）时，您只会丢失`Foo`传递给委托的原始对象的地址。赋值后局部变量只保存新`Foo`对象的地址。它不影响`foo`调用者的变量，它仍然拥有另一个地址。

# jquery - 使用 jquery 在 html 中附加 xml 文件

> ID：15450323
> 
> 赞同：0
> 
> 时间：2013-03-16T14:16:20.500
> 
> 标签：jquery, html, xml

当我有一个包含大量文本的网站时，我认为这是将它们存储在外部并使用 xml 文件制作的好方法（尽管有 cms，我想这将是最好的）但我在解析 xml 文件方面没有太多经验在 html 中。假设我`<div id="content_1"> </div>`在这个 div 中有一个 div，我想在`<p id="content_1_text"></p>`上面添加很多文本和一个。我怎么能`$('#content_1').append('<p id="content_1_text"> ... XML HERE ...</p>');` 以最好的方式做这样的事情！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T14:27:26.757

存储大量文本的最佳方式是在数据库中。jQuery 确实有一个[XML 库](http://api.jquery.com/jQuery.parseXML/)，但今天的最佳实践更多地是使用数据库和发送/接收 JSON。

# c# - 如何从 mysql 日期时间字段中读取

> ID：15450324
> 
> 赞同：0
> 
> 时间：2013-03-16T14:16:24.480
> 
> 标签：c#, mysql, .net

我正在尝试从具有 datetime 类型的 mysql 字段中读取数据，并且我正在尝试一切，并且始终只返回字段名称。

这是我的代码：

```
using (MySqlConnection connection = new MySqlConnection(ConnectionString))
{
    connection.Open();

    string query = @"SELECT `sID`, 'sDate', `sGameLogin`, `dGameAmount`, 
                    'sPayMethod' FROM `XeronRequests` WHERE `iStatus` = 0";

    MySqlCommand cmd = new MySqlCommand(query, connection);
    cmd.CommandType = CommandType.Text;

    using (MySqlDataReader dataReader = cmd.ExecuteReader())
    {                    
        while (dataReader.Read())
        {
            list.Add(new PaymentInfoText(dataReader["sID"] + "", 
                     dataReader["sDate"] + "", 
                     dataReader["sGameLogin"] + "", 
                     dataReader["dGameAmount"] + "", 
                     dataReader["sPayMethod"] + ""));
        }
    }

    e.Result = list;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T14:21:15.580

利用

```
dataReader.GetDateTime(dataReader.GetOrdinal("sDate")) 
```

代替

```
dataReader["sDate"] + "" 
```

并删除 sql 中列周围的刻度，例如

`sDate`而不是`'sDate'`. 只有保留字或列名中有空格时才需要它们：

[9.3\. 保留字](http://dev.mysql.com/doc/refman/5.1/en/reserved-words.html)

[2.2\. MySQL 5.1 中的保留字](http://dev.mysql.com/doc/mysqld-version-reference/en/mysqld-version-reference-reservedwords-5-1.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T14:19:52.307

问题是您的`SELECT`陈述，您有单引号`'`而不是反引号`sDate`，因此该字段的值实际上是`"sDate"`.

或者正如 Jon Skeet 所说，完全摆脱反引号，因为它们只存在于关键字中，必须像`[]`MSSQL 那样。

# php - 在表格中显示查询结果

> ID：15450327
> 
> 赞同：2
> 
> 时间：2013-03-16T14:16:29.223
> 
> 标签：php, mysql

我有超过 50 个返回结果的 MySQL 查询。现在我需要在一个 3 行 3 列的表中显示结果。

像这样的东西：

```
<table>
    <tr>
        <td>Content</td>                    
        <td>Content</td>                    
        <td>Content</td>                                        
    </tr>   
    <tr>
        <td>Content</td>                    
        <td>Content</td>                    
        <td>Content</td>                                        
    </tr>   
    <tr>
        <td>Content</td>                    
        <td>Content</td>                    
        <td>Content</td>                                        
    </tr>
</table> 
```

我用这样的PHP尝试过：

```
$q = "SELECT name, address, content FROM mytable"; 
$r = mysqli_query($dbc, $q); 

while ($row = mysqli_fetch_array($r, MYSQLI_ASSOC)) {
    $name   = $row['name'];
    $address = $row['address'];
    $content = $row['content'];

    //Create new output
    $output  = "<p>$name</p>";
    $output .= "<p>$address</p>";
    $output .= "<p>$content</p>";

    //Add output to array
    $mycontent[] = $output;     
} 
```

然后我在我的表中打印内容数组，如下所示：

```
<tr>
    <td><?php echo $mycontent[0]; ?></td>                   
    <td><?php echo $mycontent[1]; ?></td>                   
    <td><?php echo $mycontent[2]; ?></td>                   
</tr>   
<tr>
    <td><?php echo $mycontent[3]; ?></td>                   
    <td><?php echo $mycontent[4]; ?></td>                   
    <td><?php echo $mycontent[5]; ?></td>                                       
</tr>   
<tr>
    <td><?php echo $mycontent[6]; ?></td>                   
    <td><?php echo $mycontent[7]; ?></td>                   
    <td><?php echo $mycontent[8]; ?></td>                                           
</tr> 
```

使用此代码，我只能显示 9 个内容。我的问题是我想显示更多内容。我将使用[分页](https://en.wikipedia.org/wiki/Pagination)来显示内容；像 0-9、10-18、19-27 等。

> 注意：我可以做分页部分。

我希望有人能给我正确的方向。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T14:21:43.450

尝试类似：

```
 echo "<table>";
 while ($row = mysqli_fetch_array($r, MYSQLI_ASSOC)) {
 $name   = $row['name'];
 $address = $row['address'];
 $content = $row['content'];
 echo "<tr><td>".$name."</td><td>".$address."</td><td>".$content."</td></tr>";
 }
 echo "</table>"; 
```

此示例将在表中打印查询的所有结果。如果你只想限制某些结果，那么限制sql查询。例如：

```
 $q = "SELECT name, address, content FROM mytable limit 50"; 
```

要获取 TD 中的每个内容、名称、地址，以及 TR 中的 mycontent(content, name, address) 中的 3 个，请尝试以下操作：

```
$c= mysql_query("select COUNT(name) from mytable");
$n=mysql_fetch_array($c);
$maxname= $n[0];
$i=0;
$tr=0;
echo "<table>";
while ($tr < $maxname)
{ 
echo "<tr>";
while ($row = mysqli_fetch_array($r, MYSQLI_ASSOC) and $i<$tr) {
$name   = $row['name'];
$address = $row['address'];
$content = $row['content'];
echo "<td>".$name." | ".$address." | ".$content."</td>";
$i++;
}
echo "</tr>";
$tr= $tr+3;
}
echo "</table>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T16:18:35.663

尝试这样的事情。它将您的值放在一个易于使用的关联数组中。然后你就循环过去。

```
<?php
while ($row = mysqli_fetch_array($r, MYSQLI_ASSOC)) {
    $values[] = array(
        'name' => $row['name'],
        'address' => $row['address'],
        'content' => $row['content']
    );
}
?>
<table>
<?php
foreach($values as $v){
    echo '
    <tr>
        <td>'.$v['name'].'</td>
        <td>'.$v['address'].'</td>
        <td>'.$v['content'].'</td>
    </tr>
    ';
}
?>
</table> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T14:22:26.813

使用`for`-loop 来迭代你的`$mycontent`-array：

编辑：我意识到这`$mycontent`与我最初假设的不同：

```
$h = "<table>"; // we are going to build the table in $h

$maxcount = count($mycontent); // get the number of values within the array 

for ($i = 0;$i < $maxcount;$i++) { // counting $i up from 0 to $maxcount -1 ...

   $h.= "<tr><td>{$mycontent[$i]}</td></tr>"; // build row

}

$h.= "</table>"; // close the table
echo $h; // echo it 
```

---> 现场演示：http: [//3v4l.org/g1E1T](http://3v4l.org/g1E1T)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T14:40:43.037

如果您打算在函数中使用它，您可以将其存储在变量中，或者您可以打印它。无论哪种方式...

```
$q = "SELECT name, address, content FROM mytable"; 
$r = mysqli_query($dbc, $q); 

$str = "<table>";

while ($row = mysqli_fetch_array($r, MYSQLI_ASSOC)) {
    $str .= "<tr>";
    $str .= "<td>" . $row['name'] . "</td>";
    $str .= "<td>" . $row['address'] . "</td>";
    $str .= "<td>" . $row['content'] . "</td>";
    $str .= "</tr>";
}

$str .= "</table>"

echo $str; 
```

给你！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-17T13:39:56.333

您可以参考此代码

```
 <tbody>
              <!-- <tr>
                <td>Technology</td>
                <td>Professor Abiola</td>
                <td>wetech@school.com</td>
                <td> Plot 2, Oriola road,</td>
                <td>
                  <button type="button" class="btn btn-primary"> Edit</button>
                  <button type="button" class="btn btn-success">Update</button>
                  <button type="button" class="btn btn-danger">Delete</button>
                </td>
              </tr> -->
              <?php 
                while($rows = mysqli_fetch_array($response)){
                 $faculty = $rows['faculty'];
                  $hod = $rows['hod'];
                  $email = $rows['email']; 
                  // $location = $rows['location'];
                echo "<tr>
                        <td>$faculty</td>
                        <td>$hod</td>
                        <td>$email</td>
                        <td>".$rows["location"]."</td>
                        <td>
                         <button type='button' class='btn btn-primary'>Edit</button>
                         <button type='button' class='btn btn-success'>Update</button>
                         <button type='button' class='btn btn-danger'>Delete</button>
                        </td>

                       </tr>";
                }

              ?>
              </tbody>
            </table> 
```

# android - Androidplot - 背景和范围

> ID：15450328
> 
> 赞同：5
> 
> 时间：2013-03-16T14:16:29.553
> 
> 标签：android, androidplot

我是那个图书馆的新手。我正在尝试创建以下情节：

![在此处输入图像描述](../Images/7c831a75eefb31d46f1f756fc35166d5.png)

同时我有下一个：

![在此处输入图像描述](../Images/6826f227fdff9b6a1d825218888adf77.png)

***我的问题：*** 注意：颜色无关紧要

1.  如何摆脱黑色区域（范围域和标题上的标签在哪里）并使绘图居中（如第一张图片中所示）

2.  如何添加第一张图片中的范围？(x:[1-7] y:[0-4500])

3.  制作与第一张图片相同的网格

**我的代码：**

```
public class MainActivity extends Activity {

private XYPlot mySimpleXYPlot;

@Override
public void onCreate(Bundle savedInstanceState)
{

    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

 // Create a couple arrays of y-values to plot:
    Number[] days =   { 1  , 2   , 3   , 4   , 5   , 6   , 7 };
    Number[] values = { 380, 1433, 1965, 3200, 3651, 3215, 3217 };

    // initialize our XYPlot reference:
    mySimpleXYPlot = (XYPlot) findViewById(R.id.mySimpleXYPlot);
    mySimpleXYPlot.getBackgroundPaint().setColor(Color.WHITE);
    mySimpleXYPlot.setBorderStyle(XYPlot.BorderStyle.NONE, null, null);
    mySimpleXYPlot.getGraphWidget().getBackgroundPaint().setColor(Color.WHITE);
    mySimpleXYPlot.getGraphWidget().getGridBackgroundPaint().setColor(Color.WHITE);

    // Domain
    mySimpleXYPlot.getGraphWidget().setDomainLabelPaint(null);
    mySimpleXYPlot.getGraphWidget().setDomainOriginLinePaint(null);
    mySimpleXYPlot.setDomainStep(XYStepMode.INCREMENT_BY_VAL, days.length);     
    mySimpleXYPlot.setDomainValueFormat(new DecimalFormat("0"));

    //Range
    mySimpleXYPlot.getGraphWidget().setRangeOriginLinePaint(null);
    mySimpleXYPlot.setRangeStep(XYStepMode.SUBDIVIDE, values.length);
    mySimpleXYPlot.setRangeValueFormat(new DecimalFormat("0"));

    //Remove legend
    mySimpleXYPlot.getLayoutManager().remove(mySimpleXYPlot.getLegendWidget());
    mySimpleXYPlot.getLayoutManager().remove(mySimpleXYPlot.getDomainLabelWidget());
    mySimpleXYPlot.getLayoutManager().remove(mySimpleXYPlot.getRangeLabelWidget());
    mySimpleXYPlot.getLayoutManager().remove(mySimpleXYPlot.getTitleWidget());

    // Turn the above arrays into XYSeries':
    XYSeries series1 = new SimpleXYSeries(
            Arrays.asList(days),          
            Arrays.asList(values), 
            "Series1");                             // Set the display title of the series

    // Create a formatter to use for drawing a series using LineAndPointRenderer:
    LineAndPointFormatter series1Format = new LineAndPointFormatter(
            Color.rgb(0, 200, 0),                   // line color
            Color.rgb(0, 100, 0),                   // point color
            Color.CYAN);                            // fill color 

 // setup our line fill paint to be a slightly transparent gradient:
    Paint lineFill = new Paint();
    lineFill.setAlpha(200);
    lineFill.setShader(new LinearGradient(0, 0, 0, 250, Color.WHITE, Color.GREEN, Shader.TileMode.MIRROR));

    series1Format.setFillPaint(lineFill);

    // add a new series' to the xyplot:
    mySimpleXYPlot.addSeries(series1, series1Format);

    // by default, AndroidPlot displays developer guides to aid in laying out your plot.
    // To get rid of them call disableAllMarkup():
    mySimpleXYPlot.disableAllMarkup();
}

} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-21T23:40:49.317

我希望这是有帮助的。

我的代码：

```
private XYPlot mySimpleXYPlot;

@Override
public void onCreate(Bundle savedInstanceState)
{

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // Create a couple arrays of y-values to plot:
    Number[] days =   { 1  , 2   , 3   , 4   , 5   , 6   , 7 };
    Number[] values = { 380, 1433, 1965, 3200, 3651, 3215, 3217 };

    // initialize our XYPlot reference:
    mySimpleXYPlot = (XYPlot) findViewById(R.id.mySimpleXYPlot);

    mySimpleXYPlot.setBorderStyle(Plot.BorderStyle.NONE, null, null);
    mySimpleXYPlot.setPlotMargins(0, 0, 0, 0);
    mySimpleXYPlot.setPlotPadding(0, 0, 0, 0);
    mySimpleXYPlot.setGridPadding(0, 10, 5, 0);

    mySimpleXYPlot.setBackgroundColor(Color.WHITE);

    mySimpleXYPlot.position(
            mySimpleXYPlot.getGraphWidget(),
            0,
            XLayoutStyle.ABSOLUTE_FROM_LEFT,
            0,
            YLayoutStyle.RELATIVE_TO_CENTER,
            AnchorPosition.LEFT_MIDDLE);

    mySimpleXYPlot.getGraphWidget().getBackgroundPaint().setColor(Color.WHITE);
    mySimpleXYPlot.getGraphWidget().getGridBackgroundPaint().setColor(Color.WHITE);

    mySimpleXYPlot.getGraphWidget().getDomainLabelPaint().setColor(Color.BLACK);
    mySimpleXYPlot.getGraphWidget().getRangeLabelPaint().setColor(Color.BLACK);

    mySimpleXYPlot.getGraphWidget().getDomainOriginLabelPaint().setColor(Color.BLACK);
    mySimpleXYPlot.getGraphWidget().getDomainOriginLinePaint().setColor(Color.BLACK);
    mySimpleXYPlot.getGraphWidget().getRangeOriginLinePaint().setColor(Color.BLACK);

    // Domain
    mySimpleXYPlot.setDomainStep(XYStepMode.INCREMENT_BY_VAL, days.length);     
    mySimpleXYPlot.setDomainValueFormat(new DecimalFormat("0"));
    mySimpleXYPlot.setDomainStepValue(1);

    //Range
    mySimpleXYPlot.setRangeBoundaries(0, 4500, BoundaryMode.FIXED);
    mySimpleXYPlot.setRangeStepValue(10);
    //mySimpleXYPlot.setRangeStep(XYStepMode.SUBDIVIDE, values.length);
    mySimpleXYPlot.setRangeValueFormat(new DecimalFormat("0"));

    //Remove legend
    mySimpleXYPlot.getLayoutManager().remove(mySimpleXYPlot.getLegendWidget());
    mySimpleXYPlot.getLayoutManager().remove(mySimpleXYPlot.getDomainLabelWidget());
    mySimpleXYPlot.getLayoutManager().remove(mySimpleXYPlot.getRangeLabelWidget());
    mySimpleXYPlot.getLayoutManager().remove(mySimpleXYPlot.getTitleWidget());

    // Turn the above arrays into XYSeries':
    XYSeries series1 = new SimpleXYSeries(
            Arrays.asList(days),          
            Arrays.asList(values), 
            "Series1");                             // Set the display title of the series

    // Create a formatter to use for drawing a series using LineAndPointRenderer:
    LineAndPointFormatter series1Format = new LineAndPointFormatter(
            Color.rgb(0, 200, 0),                   // line color
            Color.rgb(0, 100, 0),                   // point color
            Color.CYAN);                            // fill color 

 // setup our line fill paint to be a slightly transparent gradient:
    Paint lineFill = new Paint();
    lineFill.setAlpha(200);
    lineFill.setShader(new LinearGradient(0, 0, 0, 250, Color.WHITE, Color.GREEN, Shader.TileMode.MIRROR));

    series1Format.setFillPaint(lineFill);

    // add a new series' to the xyplot:
    mySimpleXYPlot.addSeries(series1, series1Format);

    // by default, AndroidPlot displays developer guides to aid in laying out your plot.
    // To get rid of them call disableAllMarkup():
    mySimpleXYPlot.disableAllMarkup();
} 
```

}

它看起来像这样：

![图形](../Images/31bb0974c31883dfa5181a427c28a36d.png)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-09-30T17:02:32.940

在最新版本中，而不是使用

```
 mySimpleXYPlot.position(
        mySimpleXYPlot.getGraphWidget(),
        0,
        XLayoutStyle.ABSOLUTE_FROM_LEFT,
        0,
        YLayoutStyle.RELATIVE_TO_CENTER,
        AnchorPosition.LEFT_MIDDLE); 
```

它被用于：

```
 mySimpleXYPlot.getGraphWidget().setSize(new SizeMetrics(
            0, SizeLayoutType.FILL,
            0, SizeLayoutType.FILL)); 
```

这将消除黑色区域。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-11T14:40:26.113

这将适用于新设备：

```
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
    plot.setLayerType(View.LAYER_TYPE_SOFTWARE, null);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-03T11:35:56.557

```
// Create a formatter to use for drawing a series using LineAndPointRenderer:
LineAndPointFormatter series1Format = new LineAndPointFormatter(
        Color.rgb(0, 200, 0),                   // line color
        Color.rgb(0, 100, 0),                   // point color
        Color.CYAN); 
```

缺少参数

应该是这样的

```
// Create a formatter to use for drawing a series using LineAndPointRenderer:
LineAndPointFormatter series1Format = new LineAndPointFormatter(Color.rgb(0, 200, 0),Color.rgb(0, 100, 0),Color.CYAN, new PointLabelFormatter()); 
```

# linux - 汇编和多核有什么关系？

> ID：15450335
> 
> 赞同：1
> 
> 时间：2013-03-16T14:17:16.320
> 
> 标签：linux, windows, assembly, x86, cpu

这很难说/问，所以请多多包涵：

当我们看到汇编的输出时，这就是将在 CPU 的核心上执行的内容。但是，如果 CPU 有多个内核，那么所有程序集是否都在同一个内核上执行？来自同一程序的程序集何时开始在不同的内核上执行？

所以如果我有（汇编伪）：

```
ADD x, y, z
SUB p, x, q 
```

我怎么知道 ADD 和 SUB 是否会在同一个内核上执行？这与亲和力有关吗？我认为亲和力只将进程固定到 CPU，而不是核心？

我问这个是因为我想尝试了解您是否可以合理地预测连续的汇编指令是否在同一个内核上执行，以及我是否可以控制它们只在同一个内核上执行。我试图了解如何决定将执行相同的程序代码从一个内核更改为不同的内核？

如果程序集可以将执行（即使使用亲和性）从 CPUA Core1 更改为 Core2，QPI 链接速度是否会在此处生效？以及缓存是否在不同的 CPU 内核之间共享？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T14:31:48.187

这是一个粗略的概述，希望能为您提供所需的详细信息。

1.  汇编代码被翻译成机器代码；即二进制数据，由 CPU 运行。

2.  CPU与多核处理器上的核心相同；即 CPU 与处理器（芯片）不同。

3.  每个 CPU 都有一个指令指针，指向下一条要执行的指令。每执行一条指令都会递增。

因此，在多核处理器中，每个核心都有一个指令指针。为了支持比可用 CPU（或内核）更多的进程，操作系统将定期中断正在运行的进程并存储它们的状态（包括指令指针）。然后它将恢复已中断进程的状态并让它们执行一段时间。

继续执行的核心由操作系统决定，并由正在运行的线程的亲和性（可能还有其他一些设置）控制。

所以要回答你的问题，没有办法知道两个相邻的汇编语句是否会在同一个核心上运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T15:01:29.543

^(我主要是在谈论 Linux。但我想我所说的应该适用于其他操作系统。但是，如果无法访问 Windows 源代码，没有人可以可靠地详细说明它的行为方式)

我认为您对计算机正在做什么的“抽象”是不够的。基本上，一个（单线程）进程（或只是一个线程）正在某个“虚拟”CPU 上运行，其指令集是未经授权的 x86 机器指令，通过系统调用（通常是通过特殊指令）进入内核的能力得到增强像`SYSENTER`）。因此，从应用程序的角度来看，对[linux 内核的](http://en.wikipedia.org/wiki/Linux_kernel)[系统调用](http://en.wikipedia.org/wiki/System_call)是“原子的”。看到[这个](https://stackoverflow.com/a/11609768/841108)和[那个](https://stackoverflow.com/a/12806838/841108)答案。

事实上，处理器正在（在*任意*时刻）获得一些中断（在 Linux 上，`cat /proc/interrupts`以一秒的延迟重复两次将显示它被中断的频率，基本上每秒数千次），这些中断由核心。[内核正在抢先](http://en.wikipedia.org/wiki/Preemption_%28computing%29)调度任务（例如线程或进程）（它们可以随时被内核中断和重新启动）。

从应用程序的角度来看，中断并不真正存在（但内核可以向进程发送*信号）。*

内核、中断和缓存由硬件和/或内核处理，因此从应用程序的角度来看，它们并不真正存在——除非“减慢”进程。[缓存一致性](http://en.wikipedia.org/wiki/Cache_coherence)主要在硬件中处理，并且[乱序执行](http://en.wikipedia.org/wiki/Out-of-order_execution)使得给定的 - 甚至是微小的 - 二进制程序的执行时间不可预测。（换句话说，您无法准确地预测某个给定例程或循环需要多少毫秒；您只能动态地测量它；阅读有关[最坏情况执行时间的](http://en.wikipedia.org/wiki/Worst-case_execution_time)更多信息）。

阅读[Advanced Linux Programming](http://advancedlinuxprogramming.com/)一书和[Linux Assembly Howto](http://www.tldp.org/HOWTO/Assembly-HOWTO/)会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T14:52:23.730

您通常无法预测每条单独指令将在何处执行。只要单个线程连续执行，它就会在同一个核心/处理器内运行，但您无法预测线程将在哪条指令上被切换。操作系统会根据系统的工作负载和优先级等因素做出决定，决定何时将其切换回来，以及将其放置在哪个内核/处理器上。

您通常可以专门向操作系统请求线程应始终在同一内核上运行，这称为亲和力。这通常是一个坏主意，只有在绝对必要时才应该这样做，因为它剥夺了操作系统根据工作负载决定在哪里做什么的灵活性；亲和力几乎总是会导致性能下降。

请求处理器亲和性是一个特殊的请求，需要特殊的证据来证明它会带来更好的性能。不要试图超越操作系统；操作系统知道您不知道的有关当前运行环境的事情。

# php - 未找到 CakePHP 类“PDO”

> ID：15450336
> 
> 赞同：-5
> 
> 时间：2013-03-16T14:17:16.667
> 
> 标签：php, cakephp, hosting

我已将我的 CakePHP（2.3.1 稳定版）站点转移到 Host-ed.me，我得到了`PDO class not found error`. 如何在 Host-ed.me 服务器上启用 PDO。任何建议都受到高度赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T15:10:37.467

我建议首先将您以前的/本地 PHP 配置与 hosts.me 上的配置进行比较。

`phpinfo()`您可以通过生成两者的报告来做到这一点。**请务必在之后删除 phpinfo 页面**- 在您的网站上公开可见的 phpinfo 页面是一个重大的安全风险。

`phpinfo()`通过报告或通过此问题中的说明检查网络服务器上是否确实未安装 PDO ；[如何确定是否在 PHP 中启用了 PDO？](https://stackoverflow.com/questions/6113262/how-to-determine-if-pdo-is-enabled-in-php)

你也可以检查hosted.me是否没有使用过时的php版本，否则你可能会在以后遇到其他问题

如果没有安装 PDO 并且您的网站需要 PDO（或者 php 版本太旧），除了联系托管服务提供商并询问他们是否可以安装它或您的网站托管在不同的网站上之外，别无选择服务器。

最后，如果这些选项没有为您提供解决方案，请找到一个更好的托管服务提供商，它*确实*有一个不错的 PHP 安装 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T13:57:39.107

查看[此博客](http://hitechcyberabad.blogspot.in/2013/03/cakephp-resolving-pdo-errors.html)了解详细信息。基本上，您必须执行以下操作： 1\. 检查是否安装了 PDO（查看您的 phpinfo() 输出/编写简单程序） 2\. 使用 yum install php-pdo 安装 PDO

再次测试，使用上面的脚本，你应该很高兴。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-24T02:27:53.013

您只需要启用 PHP 扩展：

> pdo
> 
> pdo_sqlite
> 
> sqlite

或要求主机启用它们

# ruby-on-rails - fields_for builder .object 方法不允许我检索对象值

> ID：15450339
> 
> 赞同：0
> 
> 时间：2013-03-16T14:17:28.783
> 
> 标签：ruby-on-rails, fields-for

我有 3 个模型，它们组成了一个多通关联。

型号代码如下：

`ItemAttrVal`模型（转换表）

```
class ItemAttrVal < ActiveRecord::Base
  belongs_to :attr_name
  belongs_to :registry_item
end 
```

`RegistryItem`模型

```
class RegistryItem < ActiveRecord::Base
  has_many :item_attr_vals
  has_many :attr_names, :through => :item_attr_vals
  accepts_nested_attributes_for :item_attr_vals, :allow_destroy => :true
end 
```

`AttrName`模型

```
class AttrName < ActiveRecord::Base
  has_many :item_attr_vals
  has_many :registry_items, :through => :item_attr_vals
end 
```

`RegistryItem`用途`fields_for`如下：

```
<%= item.fields_for :item_attr_vals do |iav| %>
    <%= render 'item_attr_val_fields', :f => iav %>
<% end %> 
```

在部分中，它看起来像这样：

```
<% logger.debug "object type is: #{f.object}"%>
<% logger.debug "some details are: #{f.object.attr_name_id}--"%>
<%= f.select :attr_name_id, options_from_collection_for_select(AttrName.all,"id","description"), :selected => f.object.attr_name_id, :prompt => "Select an attribute" %>
<%= f.text_field :raw_value %> <br /> 
```

第 2 条调试线是我的问题所在，但它首先与第 3 线有关。在那里，我试图为下拉选择字段提供“预选”值。这样当用户编辑 RegistryItem 时，将显示他们之前选择的 AttrName。

我正在尝试使用`f.object.attr_name_id`来设置该值，但是它实际上并没有正确选择先前选择的值，而是直接转到第一个。

然后第一条两条调试线是我试图确保我的`f.object`方法有效......

当我查看日志时，我看到以下内容：

```
object type is: #<ItemAttrVal:0x007fb3ba2bd980>
some details are: -- 
```

基本上，第一行显示我正在获取 ItemAttrVal 第二行似乎没有检索到任何信息。

我还使用调试器进行了检查，在那里，我可以使用它`display f.object.attr_name_id`来向我展示我期望的确切值......

这种问题归结为两个问题......

1.  为什么我无法检索 的值`f.object`？
2.  我是否试图做错第 3 行（`<%= f.select :attr_name_id, options_from_collection_for_select(AttrName.all,"id","description"), :selected => f.object.attr_name_id, :prompt => "Select an attribute" %>`），实际上有更好的方法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T15:10:38.073

你需要在你的 options_from_collection_for_select 中使用 params[:attr_name_id]

```
<%= f.select :attr_name_id, options_from_collection_for_select(AttrName.all,"id","description", params[:attr_name_id].to_i), :prompt => "Select an attribute" %> 
```

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T15:48:19.000

原来我放`:selected`错地方了...

原来的：

```
<%= f.select :attr_name_id, options_from_collection_for_select(AttrName.all,"id","description"), :selected => f.object.attr_name_id, :prompt => "Select an attribute" %> 
```

应该：

```
<%= f.select :attr_name_id, options_from_collection_for_select(AttrName.all,"id","description", f.object.attr_name_id), :prompt => "Select an attribute" %> 
```

修复解决了我的问题，属性名称现在按预期显示以前保存的属性。

它仍然没有回答我关于为什么我无法打印出 f.object 的值的原始查询，但至少原始问题得到了解决。

# jquery - 使用jquery选择元素的id

> ID：15450341
> 
> 赞同：0
> 
> 时间：2013-03-16T14:17:42.467
> 
> 标签：jquery

以下是我拥有的div：

```
<div class="grey-column" id="infoblock1" data-type="datahere"></div>
<div class="green-column" id="infoblock2" data-type="datahere"></div>
<div class="red-column" id="infoblock3" data-type="datahere"></div> 
```

我正在尝试找出已单击元素的 id，我有以下代码：

```
$(function(){
    $('.green-column, .red-column, .grey-column').click(function() { 
         id_clicked = this.id; 
         var id_final = '#';
         id_final += id_clicked;
         $("<div>" + $(id_final).attr("data-type") + "</div>").dialog();
    });
}); 
```

所以每当用户点击一个 div 时，就会触发 click 函数，并找到点击的元素的 id。但是 attr() 函数似乎在这里不起作用。请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T14:18:48.440

由于`this`单击的是 DOM 元素，因此您无需间接通过`id`获取其属性。只是：

```
$(function(){
    $('.green-column, .red-column, .grey-column').click(function() { 
         $("<div>" + $(this).attr("data-type") + "</div>").dialog();
    });
}); 
```

[示例小提琴](http://jsfiddle.net/29HHz/2/)

但是由于您的代码[*确实*可以工作](http://jsfiddle.net/29HHz/3/)，前提是您不是处于严格模式（除非它通过不声明变量[*而成为隐式全局恐怖的*](http://blog.niftysnippets.org/2008/03/horror-of-implicit-globals.html)牺牲品`id_clicked`），您需要查看 JavaScript 控制台等以找出答案*还有*什么导致它无法正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T14:18:49.267

尝试：

```
$(function(){
 $('.green-column, .red-column, .grey-column').click(function() { 
     $("<div>" + $(this).data("type") + "</div>").dialog();
 });
}); 
```

获取点击的元素使用`$(this)`并获取`data-type`价值使用`.data()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T14:19:04.487

试试这个 ：

```
$(function(){
    $("div").click(function(){
        var div_id = $(this).attr("id");
        $("<div>" + $("#"+div_id).attr("data-type") + "</div>").dialog();
    });
}); 
```

演示：http: [//jsfiddle.net/7gxeY/1/](http://jsfiddle.net/7gxeY/1/)

# linux - 保持 Redis 实例的副本同步？

> ID：15450343
> 
> 赞同：0
> 
> 时间：2013-03-16T14:18:13.060
> 
> 标签：linux, redis, replication

可以创建 Redis 实例的副本吗？如果是，使它们保持同步的开销是多少（除了网络流量）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T14:32:29.077

请参阅有关设置复制方案的[Redis 文档。](http://redis.io/topics/replication)由于同步之间存在延迟，您可能需要额外的应用程序端逻辑来保持对同一服务器实例使用相同数据的访问。在某些情况下，您可能还需要向一个实例发出额外的“slaveof”命令，以防另一个实例出现故障/恢复。

如果您需要更具体的信息，您应该详细说明您的用例，即您在什么环境中使用 Redis（即 Rails 应用程序集群、自定义客户端...）。

# android - 如何在没有市场的情况下更新我的应用程序？

> ID：15450344
> 
> 赞同：0
> 
> 时间：2013-03-16T14:18:20.780
> 
> 标签：android, json, google-play

我有一个不想通过 de Google Play 商店更新的应用程序，我的内容在 JSON 文件中。但是如何让我的应用程序在不使用 Play 商店的情况下下载此文件以及如何确保在移动设备离线时内容仍然可读？

也许通过使用本地存储来保存 JSON 文件，并在我更改 JSON 文件的内容时自动更新。

我需要哪种编程语言？什么是最简单的方法，或者是否有任何其他解决方案可以在不通过应用商店更新我的应用的情况下更新我的应用内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T15:37:03.207

您应该设置一个带有 json 文件的服务器，您可以使用它`PHP`或`C#`使其成为动态的，但设置文件可以是静态的。

接下来，您可以编写一个负责您的配置的类，让我们调用它。`SettingsManager`它应该有一个用于您的设置的 getter。以及一个尝试更新它的方法，（您可以在应用程序启动后调用它）。这个方法将[下载文件](https://stackoverflow.com/questions/4866746/read-file-as-string)，然后[解析](https://stackoverflow.com/questions/2591098/how-to-parse-json-in-java)它并将设置保存到[SharedPreferences](https://stackoverflow.com/questions/3624280/how-to-use-sharedpreferences-in-android-to-store-fetch-and-edit-values)中。然后，getter 将从中取出设置`SharedPreferances`并返回它们。

# android - Java 安卓优化。非静态还是静态方法？

> ID：15450345
> 
> 赞同：1
> 
> 时间：2013-03-16T14:18:21.240
> 
> 标签：android, performance, optimization, stack, dalvik

我有一个静态类，其中有一个运行了几百次的方法。目前，每次运行该方法时，它都会创建两个不同的堆栈对象。如果我要使该类成为非静态类，以便我可以在构造时创建两个堆栈，然后通过清除它们来重用它们，会更快吗？我想答案取决于创建一个新的堆栈对象与清除现有的堆栈对象（无论如何可能是空的），以及清除它的性能增益（如果有的话）是否大于使用非静态方法的性能损失。

我已经尝试对两者进行分析，但它似乎永远不会起作用，但这是一个不同的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T15:40:03.363

这取决于您如何在代码中使用静态变量和方法。

实例变量和对象存储在堆上。局部变量存储在堆栈中。

静态变量存储在堆上的永久区域中。垃圾收集器通过标记和清扫对象来工作。加载类时不能选择静态变量进行垃圾回收。当相应的类加载器（负责加载此类）本身被收集为垃圾时，可以收集它们。

如果我有一个值要传递给另一个活动，我会使用意图而不是静态变量。

在自定义列表适配器中，我们使用静态视图。所以使用静态变量或方法取决于不同的情况。

您可以使用名为 MAT Analyzer 的工具分析对象的内存使用情况。下面的视频讨论了内存管理以及如何检测和解决内存泄漏

[http://www.youtube.com/watch?v=_CruQY55HOk](http://www.youtube.com/watch?v=_CruQY55HOk)。

```
 MemoryInfo mi = new MemoryInfo();// current memory usage
  ActivityManager activityManager = (ActivityManager) getSystemService(ACTIVITY_SERVICE);
  activityManager.getMemoryInfo(mi);
  long availableMegs = mi.availMem / 1048576L; 
```

[http://developer.android.com/training/articles/perf-tips.html](http://developer.android.com/training/articles/perf-tips.html)。查看此链接以获取性能提示，尤其是**Prefer Static Over Virtual**下的主题。

内存可用性是使用静态变量和方法来提高性能和避免内存泄漏的标准之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T15:48:46.790

这确实是一个关于尝试重用对象的问题。`static`如果您声明一个`static`成员，您也可以在方法中重用对象。另外：是的，最好在没有`static`任何东西的情况下设计它。

无论如何，重用的好处是避免创建对象。您仍然需要支付一些“清除”对象状态的成本。否则，在类似`Stack`.

有一个持续的维护问题：您向对象添加了新状态，并且您还记得更新清除它的方法吗？

您现在还需要`synchronize`访问此方法或以其他方式阻止两个线程同时使用它。这可能会引入瓶颈，因为线程无法同时执行该方法。

您还始终为整个运行时内存中的该对象支付内存成本。

在过去，人们会创建对象池抽象来避免重新创建对象。这有其自身的复杂性和运行时开销，并且通常不受欢迎，因为现在创建对象和 GC 的成本相对较小。

仅仅为了性能而尝试重用对象很少能带来性能上的胜利。它必须处于一个紧密的循环中，并且不会遭受上述几个可能的问题才值得。

# regex - 形式语言的正则表达式

> ID：15450347
> 
> 赞同：1
> 
> 时间：2013-03-16T14:18:39.113
> 
> 标签：regex, formal-languages

我正在尝试为一种语言编写一个正则表达式，该语言包括：

*   包含任意数量的 a 后跟单个 b 和的字符串
*   包含任意数量的 a 后跟单个 b 后跟偶数 a 的字符串。

我想`(b | ((a^+)b)^* ) U (a | ( (b^+) a)* )`，但这是错误的。

有谁知道我错在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T14:37:11.317

**假设**

我认为应该是`"strings that consist of"`，不是`"strings which contains"`。不同之处在于，如果它是（因为它包含），那`bbbbbaaabaabbbb`将是一个有效的字符串。`"contains"``aaabaa`

要做到这一点`"strings that contains"`，唯一的区别是添加`.*?`到开头和`.*`结尾（或者`[ab]*?`如果`[ab]*`您想将其限制为`a`and `b`）。

**问题分析**

我相信您可以将问题简化为`"strings that consist of any number of a's followed by a single b followed by an even number of a's"`，因为 0 是偶数。

我不知道你的正则表达式是什么`^`或在做什么。`U`这是语言特定的语法（通常`^`表示行/字符串的开头）吗？

**解决方案**

它应该很简单：

```
a*b(aa)* 
```

`a*`- 任意数量的 a
`b`- 一个 b
`(aa)*`一个偶数的 a

**编辑：**

根据评论，您可能需要包含以下内容的字符串：

*   任意数量的a
*   后跟以下任意数量：
    *   一个b
    *   后跟偶数个a（数字！= 0）
*   可选地后跟 ab

正则表达式将是：

```
a*(b(aa)+)*b? 
```

# java - 如何使 Class.forName 返回数组类型？

> ID：15450356
> 
> 赞同：6
> 
> 时间：2013-03-16T14:19:12.853
> 
> 标签：java, reflection

是否有可能`Class.forName`返回数组类型？现在当我使用`Class.forName("byte[]")`它时会抛出`NoClassFound`异常。

或者一般来说，如何`Type[].class`获得`Type.class`？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-16T14:22:58.763

```
public static void main(String[] args) {
    System.out.println(byte[].class.getName());
    try {
        Class clazz = Class.forName("[B");
        System.out.println(byte[].class==clazz);
    } catch (ClassNotFoundException e) {
        e.printStackTrace();
    }
} 
```

byte[].class 的名字是“[B”；

byte[].class==clazz 是真的

[Ljava.lang.String; 对于字符串 []

[Lpacket.to.YourClass; 你的班级[]

# java - Java 中的斐波那契递归 - 没有 For 循环？

> ID：15450358
> 
> 赞同：0
> 
> 时间：2013-03-16T14:19:29.517
> 
> 标签：java, eclipse, loops, recursion, fibonacci

我不明白我应该做什么。我的教授希望我们使用递归创建一个斐波那契数列。不允许使用 for 循环，而且我（作为业余爱好者）不知道如何创建一个字符串，比如按顺序排列 6 个数字。

以下是他的指示：*“使用递归，创建一个返回包含斐波那契数列的字符串的方法。采用一个整数来确定应该返回多少个数列值。”*

这是我迄今为止所拥有的......

```
import java.util.*;

public class fibo {

  public final static int n = 0;
  public static String s = "";

  public static void main(String[] args) {

    Scanner scn = new Scanner (System.in);

    System.out.println("Please put in a number.");

    int n = scn.nextInt();

    s = Integer.toString(n);

    System.out.println(n+ ": " + fibonacci(n));
  }

  public static int fibonacci(int n) {  

    if(n <= 1)
      return n;

    else       
      return fibonacci(n - 1) + fibonacci(n - 2);
  }
} 
```

除此之外，我觉得很多都是非常低效和混乱的。有人真的可以解释并帮助我解决我应该做什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T14:54:54.897

看起来您正在生成斐波那契数列中的第 n 个数字，在我看来，您需要存储您正在生成的所有值（不仅仅是最后一个）并显示它们。

`f(n)`因此，您需要在完成后显示`f(1), f(2), ..., f(n-1), f(n)`您已完成作业，而不仅仅是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-28T04:03:02.803

这应该可以正常工作：

```
 public class Fibonacci {

  public static void main(String[] args) {
    System.out.println(Fib(3));

  }

  // returns the next number in the Fibonacci sequence
  public static int Fib(int n) {
    if (n < 2) {
      return n;
    } else {
      return Fib(n - 1) + Fib(n - 2);
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-04T12:02:07.223

这是运行良好的代码，没有不必要的代码。

```
import java.util.*;

public class Fibonaccis {

  public static void main(String[] args) {

    Scanner scn = new Scanner (System.in);

    System.out.println("Lägg in ett nummer.");

    int n = scn.nextInt();

    System.out.println(n+ ": " + fibonacci(n));
  }

// TODO Auto-generated method stub

  public static int fibonacci(int n) {  

    if(n <= 1)
      return n;

    else       
      return fibonacci(n - 1) + fibonacci(n - 2);
  }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-09-27T07:40:39.563

这段代码显示斐波那契直到 8 点，没有任何循环......

```
public class FinnonnacciDemo2 {

    static int no = 0, n = 8;

    public static void main(String[] args) {
        // This will print series till 8
        fib(0, 1);
    }

    public static void fib(int a, int b) {
        // Terminating condition.
        if (a >= n) {
            return;
        }

        else {
            System.out.print("\t" + no);
            no = a + b;
            a = b;
            b = no;
            fib(a, b);
        }
    }
} 
```

# xml - XML 必须包含顶级元素

> ID：15450367
> 
> 赞同：0
> 
> 时间：2013-03-16T14:20:42.607
> 
> 标签：xml, post, soap, vbscript

我有这个 VBScript，但它无法运行，因为它不断出现错误“XML 必须具有顶级元素”。这个错误在哪里？我对 VBScript 不是很熟悉，所以如果你能以通俗的方式提供帮助，那将会很有帮助。

```
 DIM oXMLHTTP
    DIM oXMLDoc
    function ProcessSend()  
    Set oXMLHTTP = CreateObject("MSXML2.XMLHTTP.6.0") 
    Set oXMLDoc = CreateObject("MSXML2.DOMDocument") 
    oXMLHTTP.onreadystatechange = getRef("HandleStateChange")  
    'strEnvelope = "username=user&password=pass" 
    strEnvelope="<?xml version=""1.0"" encoding=""utf-8""?>"&_
    "<s:Envelope xmlns:s=""http://schemas.xmlsoap.org/soap/envelope/""                s:encodingStyle=""http://schemas.xmlsoap.org/soap/encoding/"">"&_
     "<s:Body>"&_
     "<u:X_SendKey xmlns:u=""urn:panasonic-com:service:p00NetworkControl:1"">"&_
     "<X_KeyEvent>NRC_MUTE-ONOFF</X_KeyEvent>"&_
     "</u:X_SendKey>"&_
     "</s:Body>"&_
     "</s:Envelope>"
    'call msgbox(strEnvelope)
     call oXMLHTTP.open("POST","http://192.168.2.93:55000",false) 
     call oXMLHTTP.setRequestHeader("User-Agent:","Panasonic iOS VR-CP UPnP/2.0") 
     call oXMLHTTP.setRequestHeader("Host:","192.168.2.93:55000") 
     call oXMLHTTP.setRequestHeader("Content-Type:","text/xml; charset=""utf-8""") 
     call oXMLHTTP.setRequestHeader("SOAPACTION:","""urn:panasonic-    com:service:p00NetworkControl:1#X_SendKey""") 
     call oXMLHTTP.setRequestHeader("Content-Length:","331") 
     call oXMLHTTP.send(strEnvelope) 
     end function 

     Sub HandleStateChange  
     if(oXMLHTTP.readyState = 4) then 
     dim szResponse: szResponse = oXMLHTTP.responseText 
     call oXMLDoc.loadXML(szResponse) 
     if(oXMLDoc.parseError.errorCode <> 0) then 
     'call msgbox("ERROR") 
     response = oXMLHTTP.responseText&" "&oXMLDoc.parseError.reason 
     call msgbox(oXMLDoc.parseError.reason) 
     else 
     Set prodList = oXMLDoc.getElementsByTagName("ns2:listAllProductInformationResponse")(0).childNodes
    for each prod in prodList
    productText = productText &" "& prod.getAttribute("eanCode") & ";"&prod.getAttribute("productCode")&";"&prod.getAttribute("availability") &"#"& vbcrlf
    next
   'productText = productText & " "
    set fx=CreateObject("Scripting.FileSystemObject") 
    set x=fx.CreateTextFile("C:\pioneerLIST.txt",true) 
    x.WriteLine productText
    x.Close
    set x=nothing
    set fx=nothing        
    end if 
    end if 
    End Sub 

    processSend()
    </script>
    </job> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T14:32:30.450

你能分享你的 XML 吗？从您的代码中，它仅包含带有 oa**根**元素的 XML XSD 减速（确保在您的 XML 主根元素中包含所有元素都是它的后代）

# c - 传递给参数时指针的语法（在 C 中）

> ID：15450369
> 
> 赞同：0
> 
> 时间：2013-03-16T14:21:09.043
> 
> 标签：c, pointers

昨天我试图实现一个链接列表，虽然它有效并且我“有点”理解，但它让我的大脑有点煎熬。

这里的函数 addNode() 有什么问题？

```
#include <stdio.h>

struct Node
{
    int value;
    struct Node *next;
};

struct Node *createList();
void addNode(struct Node* head, int value); // Adds Node directly after head
void viewList(struct Node *head); // Outputs list starting from head

int main()
{
    struct Node *head = createList();

    addNode(head, 10);
    addNode(head, 8);
    addNode(head, 23);
    addNode(head, 5);
    addNode(head, 4);
    addNode(head, 4100);

    viewList(head); // I didn't upload here to save space

    return 0;
}

struct Node *createList()
{ 
    struct Node *head = (struct Node *) malloc(sizeof(struct Node));
    head = NULL;
    return head;
}

void addNode(struct Node* head, int value)
{
    if(head == NULL)
    {
        struct Node *tmp = (struct Node *) malloc(sizeof(struct Node));
        tmp->value = value;
        tmp->next = head;
        head = tmp;
    }

    else
    {
        struct Node *newNode = (struct Node *) malloc(sizeof(struct Node));
        newNode->value = value;
        newNode->next = head;
        head = newNode;
    }
} 
```

我感到困惑的原因是因为那个版本的添加节点没有工作，而这个版本......

```
void addNode(struct Node** head, int value)
{
    if(*head == NULL)
    {
        struct Node *tmp = (struct Node *) malloc(sizeof(struct Node));
        tmp->value = value;
        tmp->next = *head;
        *head = tmp;
    }

    else
    {
        struct Node *newNode = (struct Node *) malloc(sizeof(struct Node));
        newNode->value = value;
        newNode->next = *head;
        *head = newNode;
    }
} 
```

并在主函数中使用头节点指针前面的 & 号调用

```
addNode(&head, 10); 
```

也让我感到困惑的是这一点。我编写了一些练习函数，它们在参数列表和函数内接受指针，修改指针指向的内容。我从来不用这种**指针语法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T14:45:04.047

文体（*不要重复自己*）::

```
void addNode(struct Node** head, int value)
{
    if(*head == NULL)
    {
        struct Node *tmp = (struct Node *) malloc(sizeof(struct Node));
        tmp->value = value;
        tmp->next = *head;
        *head = tmp;
    }

    else
    {
        struct Node *newNode = (struct Node *) malloc(sizeof(struct Node));
        newNode->value = value;
        newNode->next = *head;
        *head = newNode;
    }
} 
```

你不需要 if/else ::

```
#include <stdlib.h>

void addNode(struct Node **head, int value)
{

        struct Node *newNode = malloc(sizeof *newNode);
        if ( !newNode) { error(); return;}
        newNode->value = value;
        newNode->next = *head; // Could be NULL, but we need a NULL anyway in that case
        *head = newNode;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T14:24:57.433

它与参数*按值*传递有关。因此，在第一个非工作版本中，指向的指针`head`是按值传递的，因此该变量是函数内部的局部变量。当函数返回时，对局部变量的更改在函数外部不可见。

但是，在第二个版本中，您通过*引用*传递指针，因此该函数知道实际指针在内存中的位置，并且可以直接存储在该内存中。

* * *

ASCII 图表时间：

假设您有以下三个变量：

```
int value1;
int *pointer1 = &value1;
int **pointer2 = &pointer1; 
```

变量的内存看起来像这样：

```
+----------+ +----------+ +--------+
| 指针2 | --> | 指针1 | --> | 值1 |
+----------+ +----------+ +--------+

```

所以`pointer2`指向`pointer1`，`pointer1`指向`value1`。

使用取消引用运算符`*`on`pointer2`将获得`pointer2`指向的值，即`pointer1`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T16:28:30.133

这里是：

你有一个错误`createList`

```
struct Node *createList()
{
    struct Node *head = malloc(sizeof(*head));
    head->value = 0;   //< Probably you want this
    head->next = NULL; //< You definitively wanted this
    return head;
} 
```

如果要将节点添加到列表的尾部，则`addNode`如下所示：

```
void addNodeLast(struct Node* head, int value)
{
    struct Node *tailNode;
    struct Node *newNode;

    newNode = malloc(sizeof(*newNode));
    newNode->value = value;
    newNode->next = NULL;

    // Find the last node in the list
    for (tailNode = head; tailNode->next; tailNode = tailNode->next); 

    tailNode->next = head->next;
} 
```

如果要在头部之后插入节点：

```
void addNodeAfterHead(struct Node* head, int value)
{
    struct Node *newNode;

    newNode = malloc(sizeof(*newNode));
    newNode->value = value;
    newNode->next = head-next;

    head->next = newNode;
} 
```

如果您正在更换头部（每次都制作新头部）：

```
Node *addNodeNewHead(struct Node* head, int value)
{
    struct Node *newNode;

    newNode = malloc(sizeof(*newNode));
    newNode->value = value;
    newNode->next = head;

    return newNode;
}

...
Node * head = createList();
head = addNodNewHead(head, 3);
head = addNodNewHead(head, 5); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T16:07:39.070

这在这里不会很好用

```
struct Node *createList()
{ 
    struct Node *head = (struct Node *) malloc(sizeof(struct Node));
    head = NULL;
    return head;
} 
```

在您分配一个节点并让 head 指向它之后，您将 head 设置为指向 NULL。

# android - SINGLE_COLUMN 模式的 Android webview 问题

> ID：15450370
> 
> 赞同：3
> 
> 时间：2013-03-16T14:21:09.353
> 
> 标签：android, webview, youtube

我目前在使用 Android 时遇到问题`WebView`。此 webview 当前初始化如下：

```
_post_WebView = (WebView) view.findViewById(R.id.post_webview);
_post_WebView.setBackgroundColor(Color.WHITE);
_post_WebView.setWebViewClient(new PostWebViewClient());
_post_WebView.getSettings().setBuiltInZoomControls(true);
_post_WebView.getSettings().setSupportZoom(true); 
_post_WebView.getSettings().setPluginState(PluginState.ON);
_post_WebView.getSettings().setJavaScriptEnabled(true);
_post_WebView.getSettings().setRenderPriority(RenderPriority.HIGH);
_post_WebView.getSettings().setCacheMode(WebSettings.LOAD_DEFAULT);
_post_WebView.setWebChromeClient(new WebChromeClient() {});
_post_WebView.getSettings().setUseWideViewPort(false);
_post_WebView.getSettings().setLoadWithOverviewMode(true);
_post_WebView.getSettings().setLayoutAlgorithm(LayoutAlgorithm.SINGLE_COLUMN); 
```

此 webview 用于显示从服务器检索到的 HTML 字符串。（使用`loadData`方法）。现在的问题是，在`SINGLE_COLUMN`模式下，图像和文本的宽度和高度都正确调整了大小，但是嵌入的 youtube 视频在宽度调整时，高度没有调整，因此只显示一个黑框。

在`LayoutAlgorithm.NORMAL`一切工作正常。如何确保 youtube 视频也能在`SINGLE_COLUMN`算法中正确调整大小？

Youtube 视频的嵌入如下：

```
<iframe allowfullscreen="" frameborder="0" height="315" width="420" src="YOUTUBE_VIDEO_LINK"></iframe> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-23T05:14:55.763

我终于通过使用`loadDataWithBaseURL(null, htmlString, "text/html", "utf-8", null)`而不是同时使用 CSS 向 iframe`loadData(htmlString,"text/html","utf-8")`添加 100%`max-width`属性和自动`width`和属性来解决它：`height`

```
htmlString = "<html><head><style>iframe {max-width: 100%; width:auto; height: auto;}</style></head><body>"+htmlString+"</body></html>"; 
```

这不是最干净的方法，但它确实有效。

如果与布局算法一起使用，此方法也应该有效`NARROW_COLUMNS`。

# java - 缓冲区内的二进制搜索

> ID：15450373
> 
> 赞同：0
> 
> 时间：2013-03-16T14:21:24.270
> 
> 标签：java, file, search, binary, buffer

所以我实现了一个使用二进制搜索方法搜索文件的工作程序：

```
public int BSearch(int x1, int x2) throws IOException {
    int current_key;

    middle=(x1+x2)/2;
    if(x1>x2) {
        middle=-1;  //middle==-1 is condition of 'key not found'
        return middle;
    }
    MyFile.seek(middle*4);
    current_key=MyFile.readInt();
    da++;
    if(current_key==key) {
        return middle;
    }
    else if(key<current_key) {
        x2=middle-1;
        return BSearch(x1,x2);
    }
    else {
        x1=middle+1;
        return BSearch(x1,x2);
    }
} 
```

现在我想对其进行转换，以便将文件逐段（每次 1KB）读取到缓冲区中，然后对该缓冲区进行二进制搜索。如果在该缓冲区中找不到密钥，我会进一步读取文件，依此类推。我想澄清一下，缓冲区是这样的手工缓冲区（纠正我）：

```
 byte[] buf = new byte[1024];
 MyFile.read(buf);
 ByteArrayInputStream bis= new ByteArrayInputStream(buf1);
 DataInputStream ois= new DataInputStream(bis);
 current_key=ois.readInt(); 
```

一个大问题（除其他外）是我不知道如何从缓冲区的某个位置读取

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T08:14:40.173

好的，我想我设法通过将缓冲区逐个元素复制到一个新的 int[] 数组来做到这一点。我想相信它仍然比每次我想加载缓冲区时访问磁盘要快。

# mysql - Mysql复合主键

> ID：15450379
> 
> 赞同：1
> 
> 时间：2013-03-16T14:21:56.690
> 
> 标签：mysql, database-design, primary-key

我想要一个查找表，将两个相同的事物相互链接。假设我有一个“人”表，我想查找两个人之间的关系。我将查找的第一列是“PersonId1”，第二列是“PersonId2”，第三列是“关系”。由于关系是双向的，因此我不需要在 PlayerId 切换时重复记录。有什么方法可以让 mysql 对 PlayerId1 和 PlayerId2 组合强制唯一性，而不管它们的顺序是什么？

那有意义吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T14:53:57.083

简短的回答：没有。

更长的答案：如果第二个小于第一个，您可以设置一个触发器来交换两个人 id 的顺序，然后编写它们，并使用复合键。

更长的答案：并非所有人际关系都是可交换的（并非所有关系都是双向的）。“员工”或“母亲”关系呢？如果你有单独的行说 A 是 B 的朋友，B 是 A 的朋友，即使是可能是点对点的“朋友”关系也可能会更好地表示。因此，也许您想要此表上的三字段复合键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T09:53:56.390

+1 用于复合 pk。为了防止重复组合，一个额外的 varchar 列，例如 personid1+personid2 ，它有一个唯一的约束可能是一个解决方案......

另请参阅：[人员数据模型示例](http://www.erdiagrams.com/datamodel-person-idef1x.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T14:35:25.193

你的意思是你想有一个唯一的行记录`PersonID1`和`PersonID2`列（不管`Relationship`列）？如果是这样，您可以使用复合键（多列键）。

这是一个例子：

```
CREATE TABLE Person (
    PersonId1 INT,
    PersonId2 INT,
    PRIMARY KEY (PersonId1, PersonId2)
) 
```

# java - Java GC：通用数组的行是独立对象吗？

> ID：15450381
> 
> 赞同：3
> 
> 时间：2013-03-16T14:21:58.173
> 
> 标签：java, arrays, multidimensional-array, garbage-collection

当我执行以下操作时：

```
public double[] someFn()
{
    double[][] b = new double[5][5];
    return b[2];
} 
```

缓冲区 b 的其余部分是否已准备好用于垃圾箱，或者第二行仍在使用的某个地方是否会阻止整个数组 b 被收集？

当我谈论通用数组时，我无法测试最终确定...</p>

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T14:23:31.863

是的，每个元素`b`只是对 a 的*引用*`double[]`。每个元素都可以是对独立对象的引用——或者多个元素可以引用同一个数组，或者具有空值。

从元素到包含它的数组没有“反向链接”。

基本上，您应该将“多维”数组视为元素类型*恰好*是另一个数组的普通数组。例如：

```
String foo() {
    String[] array = getStrings();
    return array[0];
} 
```

该方法返回的字符串引用对数组一无所知，它所引用的字符串对象也不知道。这与数组数组的方式完全相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T15:12:08.933

在 someFn() 返回后， b 的其他元素将准备好被 gc-ed，因为您无法获得它们的任何引用。我写了一个小程序来证明：

```
public class GCDemo {

static class OneMB {
    byte[] data = new byte[1024 * 1024];
    String name;

    public OneMB(String name) {
        this.name = name;
    }
    protected void finalize() throws Throwable {
        System.out.println(name + " gc-ed");
    }
}

public static OneMB[] someFn() {
    OneMB[][] b = new OneMB[3][3];
    for (int i = 0; i < b.length; i++) {
        for (int j = 0; j < b[i].length; j++) {
            b[i][j] = new OneMB(i + "-" + j);
        }
    }
    return b[2];
}

public static void main(String[] args) throws InterruptedException {
    OneMB[] b2 = someFn();
    System.gc();
    System.gc();
    Thread.sleep(6000);
    System.out.println("after b2 is released");
    b2 = null;
    System.gc();
    Thread.sleep(2000);
} 
```

}

输出是

0-2 gc-ed

1-2 gc-ed

1-1 gc-ed

0-1 gc-ed

0-0 gc-ed

1-0 gc-ed

b2 发布后

2-2 gc-ed

2-1 gc-ed

2-0 gc-ed

# java - 使用 Maven 将依赖项下载到命令行上的目录

> ID：15450383
> 
> 赞同：25
> 
> 时间：2013-03-16T14:22:07.233
> 
> 标签：java, maven, maven-3

我需要在**没有**pom.xml 文件或其他脚本的情况下将项目的所有传递依赖项下载到命令行上的目录。理想情况下，我可以用一两个命令来做到这一点。据我所知，这至少是 mvn 的两步过程。

1.  将依赖项下载到本地存储库
2.  将依赖项复制到lib目录

获取我运行的依赖项

```
$ mvn org.apache.maven.plugins:maven-dependency-plugin:2.6:get -DgroupId=org.jclouds.provider -DartifactId=rackspace-cloudservers-us -Dversion=1.5.8 
```

效果很好。不幸的是， dest 参数对我没有帮助，因为它不会将所有传递依赖项放在 dest 中。

所以现在我需要将该 JAR 文件及其所有传递依赖项复制到我的 lib 目录中。我知道这部分已经在 StackOverflow 上被问过很多次了，但对我来说还没有任何效果。我试过以下。

```
$ mvn dependency:copy-dependencies ...
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-dependency-plugin:2.1:copy-dependencies (default-cli): Goal requires a project to execute but there is no POM in this directory 
```

和

```
$ mvn dependency:copy ...
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-dependency-plugin:2.1:copy (default-cli): Goal requires a project to execute but there is no POM in this directory 
```

通过阅读 StackOverflow 上有关复制依赖项和复制的文档和其他答案，我想我可以在没有 pom.xml 的情况下从命令行使用它们，但 mvn 似乎需要一个。我的 Maven 版本是 Apache Maven 3.0.4 (r1232337; 2012-01-17 02:44:56-0600)。

谁能给我一个在没有 pom.xml 的情况下使用 mvn 复制传递依赖项的示例？

有没有更好的方法来做我在这里尝试完成的事情？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-17T01:20:45.490

Apache ivy 可以作为[独立 jar](http://ant.apache.org/ivy/history/latest-milestone/standalone.html)运行以下载 Maven 依赖项。不需要 POM。

```
curl -L -O http://search.maven.org/remotecontent?filepath=org/apache/ivy/ivy/2.3.0/ivy-2.3.0.jar
java -jar ivy-2.3.0.jar -dependency org.jclouds.provider rackspace-cloudservers-us 1.5.8 -retrieve "lib/[artifact]-[revision](-[classifier]).[ext]" 
```

生成以下文件：

```
├── ivy-2.3.0.jar
└── lib
    ├── aopalliance-1.0.jar
    ├── asm-3.1.jar
    ├── bcprov-jdk16-1.46.jar
    ├── cglib-2.2.1-v20090111.jar
    ├── clojure-1.3.0.jar
    ├── core.incubator-0.1.0.jar
    ├── gson-2.2.jar
    ├── guava-13.0.jar
    ├── guice-3.0.jar
    ├── guice-assistedinject-3.0.jar
    ├── javax.inject-1.jar
    ├── jclouds-compute-1.5.8.jar
    ├── jclouds-core-1.5.8.jar
    ├── jclouds-scriptbuilder-1.5.8.jar
    ├── jsr250-api-1.0.jar
    ├── jsr311-api-1.1.1.jar
    ├── openstack-keystone-1.5.8.jar
    ├── openstack-nova-1.5.8.jar
    ├── rackspace-cloudidentity-1.5.8.jar
    ├── rackspace-cloudservers-us-1.5.8.jar
    ├── rackspace-cloudservers-us-1.5.8-javadoc.jar
    ├── rackspace-cloudservers-us-1.5.8-sources.jar
    ├── rocoto-6.1.jar
    └── tools.logging-0.2.3.jar 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-03-18T19:06:35.037

第一个命令几乎可以满足您的需求 - 相关依赖项的 POM。一旦你有了它，你应该不需要进一步的项目 POM 来运行`copy:dependencies`：

这是一个例子：

```
mvn org.apache.maven.plugins:maven-dependency-plugin:2.7:get -DgroupId=org.jclouds.provider -DartifactId=rackspace-cloudservers-us -Dversion=1.5.8 -Dtype=pom

mvn org.apache.maven.plugins:maven-dependency-plugin:2.7:copy-dependencies -f /path/to/m2/repo/org/jclouds/provider/rackspace-cloudservers-us/1.5.8/rackspace-cloudservers-us-1.5.8.pom -DoutputDirectory=/path/to/target/dir/don't/use/. 
```

[正如Everett Toews](https://stackoverflow.com/users/25991/everett-toews)所指出的，您可以使用额外的选项[`copy:dependencies`](http://maven.apache.org/plugins/maven-dependency-plugin/copy-dependencies-mojo.html)来进一步细化下载的内容，例如通过添加`-DexcludeTypes=test-jar`以过滤掉测试 JAR。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T14:56:21.923

据我了解，您希望将所有依赖项工件下载到本地计算机上的一个文件夹中（无需搜索本地存储库）。简单的方法是创建一个*简单* `pom.xml`的（*是的，请创建 pom*），它将创建 WAR 文件并取决于您的工件。之后`mvn clean package`，您将在 WAR 的 lib 文件夹中找到所有依赖项工件（包括传递性）。

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

    <modelVersion>4.0.0</modelVersion>
    <groupId>testwar</groupId>
    <artifactId>examplewar</artifactId>
    <packaging>war</packaging>
    <version>1.0-SNAPSHOT</version>
    <name>examplewar Maven Webapp</name>
    <dependencies>
        <dependency>
            <groupId>org.jclouds.provider</groupId>
            <artifactId>rackspace-cloudservers-us</artifactId>
            <version>1.5.8</version>
        </dependency>
    </dependencies>

</project> 
```

# html - 当宽度不固定时，Li 项目会显示在彼此下方而不是旁边

> ID：15450387
> 
> 赞同：0
> 
> 时间：2013-03-16T14:22:24.577
> 
> 标签：html, html-lists

我目前真的很忙于制作一个简单的 jQuery 幻灯片，但是当我将幻灯片设为固定宽度时，我遇到了以下问题：

```
#slider ul {
height: 100%;
margin: 0;
padding: 0;
list-style-type: none;
position: relative;
}

#slider ul li {
float:left;
height: 100%;
width:200px;
} 
```

一切正常；但是当我想让我的滑块全屏显示时。所以而不是宽度 200

```
width:100%; 
```

所有 li 都显示在彼此下方而不是彼此相邻。我希望我提供了足够的信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T14:29:06.083

如果宽度是`100%`元素`li`占据其父容器的整个宽度，意味着没有空间让另一个`li`元素占据同一行；显`width`式*强制*下一个兄弟到下一行。

为了解决这个问题，一个选项，给出以下标记：

```
<ul>
    <li>
        <img src="http://lorempixel.com/500/500/nightlife/Some%20sample%20text" />
    </li>
    <li>
        <img src="http://lorempixel.com/500/500/sports/Some%20sample%20text" />
    </li>
</ul> 
```

是使用：

```
ul {
    white-space: nowrap;
}

li,
img {
    width: 100%;
}

li {
    display: inline-block;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/3bUVq/)。

这强制`ul`将元素保留在单个“行”中，为 and 元素分配宽度，并将`100%`元素显示为内联。`li``img``li`

# java - Arrays.sort(object[]) 没有抛出 classcastexception

> ID：15450391
> 
> 赞同：6
> 
> 时间：2013-03-16T14:22:38.153
> 
> 标签：java, arrays, sorting, classcastexception, comparable

代码：

```
public class CompareTest {

    public static void main(String[] args) {

        ArrayList list =  new ArrayList();
        (list).add(new CompareTest());  

        Arrays.sort(list.toArray()); //Does not throw Exception , why ?
        Collections.sort(list);   //throws ClassCastException
    }

} 
```

根据 Java 文档： [Arrays#sort](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Arrays.html#sort%28java.lang.Object%5B%5D%29)

根据元素的自然顺序，按升序对指定的对象数组进行排序。**数组中的所有元素都必须实现 Comparable 接口**。

为什么[Arrays#sort](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Arrays.html#sort%28java.lang.Object%5B%5D%29)`ClassCastException`没有按照 JavaDoc 的说明抛出？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-16T14:28:48.567

因为源代码`Arrays.sort()`有这个快捷方式：

```
 int nRemaining  = hi - lo;
    if (nRemaining < 2)
        return;  // Arrays of size 0 and 1 are always sorted 
```

所以它不需要检查数组的元素是否实现了 Comparable，因为它不必对只有一个元素的数组进行排序。

请注意，javadoc 不*保证*会引发 ClassCastException。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T14:29:49.120

因为它只有一个元素...`Array.sort()`如果元素少于 2，则将结束而不进行排序

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T14:34:53.023

原因是列表只有一个元素，在 Arrays.sort 中从未调用 compareTo 方法，因此该元素永远不会转换为 Comparable。

但无论如何它在 Collections.sort 中被调用：

```
public static <T extends Comparable<? super T>> void sort(List<T> list) {
Object[] a = list.toArray();
Arrays.sort(a);
ListIterator<T> i = list.listIterator();
for (int j=0; j<a.length; j++) {
    i.next();
    i.set((T)a[j]);
}
} 
```

所有元素都转换为从 Comparable 延伸的 T

# c# - 如何检查类型字符串中的sql表日期是否低于字符串中的今天日期C#winform

> ID：15450392
> 
> 赞同：-4
> 
> 时间：2013-03-16T14:22:40.360
> 
> 标签：c#, sql, sql-server, winforms

我有一个带有日期的表，但它是字符串类型而不是日期类型（dd/mm/yyyy）。我想从表格中获取日期低于今天日期的所有行，我有今天的字符串日期和表格中的日期字符串，那么我如何检查谁更大？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T14:25:11.993

**用于 SQL 服务器**

您需要将其转换为日期，以便您比较记录。

```
SELECT  *
FROM    TableName
WHERE   convert(date, [date], 103)  < GETDATE() 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/a16a1/3)

* * *

**为 MYSQL**

您需要`date`使用`STR_TO_DATE`in将这些值转换为数据类型`MySQL`。

```
SELECT  *
FROM    TableName
WHERE   STR_TO_DATE(date, '%d/%m/%Y') < CURDATE() 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/a61fd/1)
*   [STR_TO_DATE](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)

# javascript - 每分钟重启一次 setInterval

> ID：15450395
> 
> 赞同：0
> 
> 时间：2013-03-16T14:22:57.810
> 
> 标签：javascript, setinterval

要在画布上创建滴答运动而不是数字的滑动，我想在 0.2 秒内向上移动数字并等待 0.8 秒。这些代码适用于滑动运动，但要实现我迷路的滴答声。

[jsfiddle](http://jsfiddle.net/wetlip/kumy5)

```
var ittt = 0;
var add = null;

function MinuteTimer() {
    add = setInterval(function () {
        totime();
        if (ittt % (40 * 60) == 0) {
            ittt = 0;
        }
    }, 5);
};

function stoptimer() {
    clearInterval(add);
};

function totime() {
    drawcanvasbackground();
    drawnumberscanvas(ittt);
    ittt += 1;
    if (ittt % 40 == 0 && ittt > 0) {
        clearInterval(add);
        setTimeout(MinuteTimer(), 800);
    };
}; 
```

# memory - redis 服务器的足迹

> ID：15450399
> 
> 赞同：0
> 
> 时间：2013-03-16T14:23:07.780
> 
> 标签：memory, embedded, redis

我是 Redis 的新手。我想了解 redis 实例的内存占用量有多大（不考虑存储在内存中的实际数据）？它有一个“精简”版本的 Redis 吗？还是有其他选项可以在这种环境中使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T15:32:20.680

它非常小。在分区信息页面的预分片部分，它指出“备用”实例使用大约 1MB 的 RAM。[http://redis.io/topics/partitioning](http://redis.io/topics/partitioning)

# java - Spring Integration : 使用 Spring Integration 的多应用程序集成

> ID：15450400
> 
> 赞同：3
> 
> 时间：2013-03-16T14:23:08.207
> 
> 标签：java, jakarta-ee, client-server, spring-integration, jax-rpc

我对 Spring Integration 有一些疑问：

1.  我们可以使用 Spring Integration 框架集成两个以上的应用程序吗？

2.  是点对点集成还是面向中间件的集成？

3.  在客户端-服务器架构中如果（客户端和服务器）都是基于 Java 的应用程序，那么我们应该使用什么来进行同步通信？意思是，我们应该选择 Spring Integration 还是 JAX-RPC ？同步通信哪个会更快？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T15:02:53.233

Spring Integration 是一个轻量级的集成框架。它不使用或不需要中央代理（许多人认为这是一种好处）。

这不仅仅是点对点；您可以配置多对多环境，但不需要代​​理。当然，如果您愿意，您可以使用中间件代理（例如 RabbitMQ 或 JMS）。

有许多方法可以执行同步（请求/回复）集成。在 Spring Integration 中，通常用于此的组件称为`gateway`s （`outbound`在客户端，`inbound`在服务器上）。

这样做的好处之一是应用程序不必知道正在使用什么技术。通过简单的配置更改，您可以将使用的实际协议更改为您想要的任何内容，而对应用程序本身进行零更改。

提供了许多开箱即用的技术，包括 ReST (http)、SOAP WebServices、JMS、AMQP、TCP/IP...)。

最好不要将同步集成视为 RPC——这完全是关于使用请求/响应消息传递的松散耦合，消息内容是合约，而不是 API。

`channel-adapter`使用s 而不是s来实现单向集成`gateway`。

我建议你看看参考文档... [http://static.springsource.org/spring-integration/reference/html/](http://static.springsource.org/spring-integration/reference/html/)

# c++ - 除非所有字段都初始化为 0，否则 int 数组会给出疯狂的值，为什么？

> ID：15450405
> 
> 赞同：1
> 
> 时间：2013-03-16T14:23:27.593
> 
> 标签：c++, arrays, initialization

```
int TwoThrows();

int main(){

        int Throws, Throw, Frequency[13]={0,0,0,0,0,0,0,0,0,0,0,0,0};
        randomize();

        cout << "\nThis program simulates throws of two dice.";
        cout << "\n\nHow many throws : ";
        cin >> Throws;

        // Calls TwoThrows and saves in Frequency by value
        for(int I=0; I<Throws; I++){
                Throw=TwoThrows();   //2-12
                Frequency[Throw]++;   //2-12

        }

         // Prints array:
        for(int I=0; I<11; I++){
                cout << I+2 << ":\t" << Frequency[I+2] << "\n";

        }

        return 0;
}

int TwoThrows(){
        unsigned int I=(random(6)+1)+(random(6)+1);

        return I;

} 
```

这打印：

2：1317 3：2724 4：4145 5：5513 6：7056 7：8343 8：6982 9：5580 10：4176 11：2776 12：1388

这是伟大的。

但是，我想知道的是，为什么我必须将数组设置为 {0,0,0,0,0,0,0,0,0,0,0,0,0}？

如果我不这样做；我得到：

2：30626868 3：1638233 4：844545295 5：1 6：9 7：4202510 8：4199197 9：844555757 10：3 11：4202574 12：2130567168

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T14:26:03.400

如果您不初始化数组，然后继续增加其元素，从技术上讲，这是[未定义的行为](http://en.wikipedia.org/wiki/Undefined_behavior)。

在实践中发生的情况是，数组的元素在`main()`开始时会获取堆栈中发生的任何值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T14:27:33.653

局部变量放在函数的堆栈上。该区域未由编译器或操作系统初始化。这意味着局部变量的值正是调用函数时内存中的值，这不太可能是您想要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T14:30:24.013

当您分配一个数组时，您在内存中获得了位置，因此该位置可以由另一个应用程序之前使用，因此如果不初始化该位置，它将根据哪个应用程序正在使用该位置为您提供意想不到的值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-16T14:32:53.163

尝试以这种方式理解它。所有内存位置都被收费，当我们将特定的内存位置分配给变量时，它将转换该位置所持有的原始值，也称为**垃圾**值，因此我们得到了意想不到的值。

但是当你初始化一个变量或数组时，默认的垃圾值被指定的值替换，我们得到了想要的输出。

希望这可以帮助。

# silverlight - sharepoint 在silverlight 上抛出securityException，即使clientaccesspolicy.xml 已经到位

> ID：15450408
> 
> 赞同：0
> 
> 时间：2013-03-16T14:23:43.583
> 
> 标签：silverlight, sharepoint, clientaccesspolicy.xml, virtuoso

经过一天彻底寻找解决方案后，我对以下问题停滞不前：

我正在向我的共享点添加一个带有 silverlight 应用程序的 aspx 页面作为功能。该应用程序从 virtuoso 服务访问 sparql-endpoint 并在 sharepoint 之外正常工作。clientaccesspolicy.xml 被添加到 virtuoso 和 sharepoint 根目录中。两者都可以通过 http 访问：

```
<?xml version="1.0" encoding="utf-8"?>
 <access-policy>
  <cross-domain-access>
    <policy>
      <allow-from http-request-headers="*">
        <domain uri="*"/>
      </allow-from>
      <grant-to>
        <resource path="/" include-subpaths="true"/>
      </grant-to>
    </policy>
  </cross-domain-access>
</access-policy> 
```

在这个问题出现后，我什至在两个位置都添加了 crossdomain.xml，并通过 central-admin 将这两个文件显式添加到共享点路径。

我仍然收到 securityException ...

请在这件事上给予我帮助，

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T13:40:11.360

在浪费了几个小时之后，我自己敲定了它。

对于到达同一十字路口的任何人：如果您确定 crossdomain.xml 已就位，并且您的 silverlight 应用程序在 sharepoint 之外工作，则此特定的安全异常并非源于跨域违规，而更有可能源于其中之一[此处](http://msdn.microsoft.com/en-us/library/cc189008%28VS.95%29.aspx)记录的 url 访问限制：

正如那里所说：“当用户收到因违反这些访问策略之一而导致的错误时，该错误可能无法指示确切原因。” 此错误可能有任何列出的原因。（我认为是msdn的重大疏忽）

由于“跨方案访问”和“跨域访问”不在图片范围内，因此只剩下“跨区域访问违规”。这意味着您的 Silverlight 应用程序和服务端点必须位于同一个区域才能进行通信（例如 Internet 或 Intranet）。由于我的 SPAQL 端点目前托管在 localhost（IE 中默认为 Intranet 地址），并且我的共享点地址 http://my.comp.name 默认位于 Internet 区域中，因此引发了此错误。

要消除此错误，您必须将端点托管在 Internet 地址上或手动将共享点地址放置在 Intranet 区域中。经过一番谷歌搜索后，我在 Internet-options 中找到了正确的配置：

-> 安全 -> 本地 Intranet -> 站点 -> 添加：您的共享点地址 (http://my.comp.name)

就是这样，希望我为你挽回了一些持久的皱纹。

小心...

# ruby - CSV 支持的 ORM？

> ID：15450412
> 
> 赞同：1
> 
> 时间：2013-03-16T14:24:04.563
> 
> 标签：ruby, csv, orm, data-analysis

我正在寻找一个支持 CSV 作为数据存储并且模仿（不太花哨，但欢迎一些糖）ORM 的 ORM，如 Sequel、DataMapper 或 ActiveRecord。

我的目标是导入一些 CSV 数据集并查询它们，进行一些基本的聚合等。

它应该类似于Ruby 中的[http://pandas.pydata.org/](http://pandas.pydata.org/)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T16:39:28.817

CSV 文件的性能会很糟糕。CSV 文件和记录不适合随机访问，因为文本文件不是。您无法更新 CSV 中的字段，而不影响它后面的所有其他字段和记录。当文件因记录更改而改变大小时，由于整个文件被重写，您的代码将遭受严重的减速。你*真的*确定那是你想走的路吗？

相反，如果合适的话，我会使用内存中的 SQLite 数据库，或者在磁盘上使用一个，将 CSV 读入其中，在那里进行所有更改，然后将 CSV 写回。您会在 Panda 文档中注意到他们暗示他们正在做类似的事情：

> 用于在内存数据结构和不同格式之间读取和写入数据的工具......

[用CSV](http://ruby-doc.org/stdlib-1.9.2/libdoc/csv/rdoc/CSV.html)类和[Sequel](http://sequel.rubyforge.org) gem来做这件事是一件小事。

# java - 连接到 rfcomm0 的 Java rxtx 代码不起作用

> ID：15450419
> 
> 赞同：1
> 
> 时间：2013-03-16T14:25:07.620
> 
> 标签：java, bluetooth, arduino, rxtx, rfcomm

我已经成功地将我的 arduino uno R3 与蓝牙伴侣模块连接起来，并且能够通过蓝牙将数据发送到运行 Ubuntu 12.04 的笔记本电脑。（使用串口协议）。数据在 rfcomm0 上接收。

以下代码显示接收到的数据：`sudo screen /dev/rfcomm0`

现在我在 Java 程序中读取这些数据时遇到了问题。我已经参考了[http://playground.arduino.cc/Interfacing/Java](http://playground.arduino.cc/Interfacing/Java)中的代码。这使用 rxtx 库来访问串行端口。

这是代码：

```
import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.io.OutputStream;
import gnu.io.CommPortIdentifier; 
import gnu.io.SerialPort;
import gnu.io.SerialPortEvent; 
import gnu.io.SerialPortEventListener; 
import java.util.Enumeration;

public class SerialTest implements SerialPortEventListener {
    SerialPort serialPort;
    /** The port we're normally going to use. */
    private static final String PORT_NAMES[] = { 
            "/dev/tty.usbserial-A9007UX1", // Mac OS X
            "/dev/ttyUSB0", // Linux
            "COM3", // Windows
//          "/dev/ttyACM0" // Ubuntu
            "/dev/rfcomm0" // Ubuntu Bluetooth
    };
    /**
    * A BufferedReader which will be fed by a InputStreamReader 
    * converting the bytes into characters 
    * making the displayed results codepage independent
    */
    private BufferedReader input;
    /** The output stream to the port */
    private OutputStream output;
    /** Milliseconds to block while waiting for port open */
    private static final int TIME_OUT = 2000;
    /** Default bits per second for COM port. */
    private static final int DATA_RATE = 9600;

    public void initialize() {
        CommPortIdentifier portId = null;
        Enumeration portEnum = CommPortIdentifier.getPortIdentifiers();

        //First, Find an instance of serial port as set in PORT_NAMES.
        while (portEnum.hasMoreElements()) {
            CommPortIdentifier currPortId = (CommPortIdentifier) portEnum.nextElement();
            for (String portName : PORT_NAMES) {
                if (currPortId.getName().equals(portName)) {
                    portId = currPortId;
                    break;
                }
            }
        }
        if (portId == null) {
            System.out.println("Could not find COM port.");
            return;
        }

        try {
            // open serial port, and use class name for the appName.
            serialPort = (SerialPort) portId.open(this.getClass().getName(),
                    TIME_OUT);

            // set port parameters
            serialPort.setSerialPortParams(DATA_RATE,
                    SerialPort.DATABITS_8,
                    SerialPort.STOPBITS_1,
                    SerialPort.PARITY_NONE);

            // open the streams
            input = new BufferedReader(new InputStreamReader(serialPort.getInputStream()));
            output = serialPort.getOutputStream();

            // add event listeners
            serialPort.addEventListener(this);
            serialPort.notifyOnDataAvailable(true);
        } catch (Exception e) {
            System.err.println(e.toString());
        }
    }

    /**
     * This should be called when you stop using the port.
     * This will prevent port locking on platforms like Linux.
     */
    public synchronized void close() {
        if (serialPort != null) {
            serialPort.removeEventListener();
            serialPort.close();
        }
    }

    /**
     * Handle an event on the serial port. Read the data and print it.
     */
    public synchronized void serialEvent(SerialPortEvent oEvent) {
        if (oEvent.getEventType() == SerialPortEvent.DATA_AVAILABLE) {
            try {
                String inputLine=input.readLine();
                System.out.println(inputLine);
            } catch (Exception e) {
                System.err.println(e.toString());
            }
        }
        // Ignore all the other eventTypes, but you should consider the other ones.
    }

    public static void main(String[] args) throws Exception {
        SerialTest main = new SerialTest();
        main.initialize();
        Thread t=new Thread() {
            public void run() {
                //the following line will keep this app alive for 10 seconds,
                //waiting for events to occur and responding to them (printing incoming messages to console).
                try {Thread.sleep(10000);} catch (InterruptedException ie) {}
            }
        };
        System.out.println("Started");
        t.start();
        t.join();
        main.close();
        System.out.println("Stopped");
    }
} 
```

该程序编译成功，但执行时显示：`"Could not find COM port."`

注意：此代码在从 USB 端口 /dev/ttyACM0 读取数据时完美运行。当我尝试从蓝牙端口/dev/rfcomm0 读取数据时出现问题。

所以基本上我需要一个 java 程序来从 rfcomm0 端口读取。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T22:28:48.423

感谢@angelatlarge 的建议。

问题是java程序没有访问权限`/dev/rfcomm0`。

提供权限的命令：`sudo chmod a+rw /dev/rfcomm0`

因此，允许`/dev/rfcomm0`为我解决问题。现在java程序可以从rfcomm0端口读取数据了。

# video-player - 支持所有文件格式和社交分享选项的视频播放器

> ID：15450422
> 
> 赞同：0
> 
> 时间：2013-03-16T14:25:18.573
> 
> 标签：video-player

我想为我的网站创建一个视频播放器，并使用了 silverlight，但它支持 mpeg4 格式，不支持 wmv、avi、flv，所以找到了另一个像 videojs 这样的播放器，但它没有像 fb 这样的社交分享选项或分享嵌入，所以请建议找一个支持最大文件格式和共享选项的播放器，

提前致谢 ，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-17T17:49:07.087

我认为[http://www.projekktor.com/](http://www.projekktor.com/) 正是您正在寻找的。

您可以将共享插件用于社交功能

# text - 文本到二进制转换matlab

> ID：15450424
> 
> 赞同：0
> 
> 时间：2013-03-16T14:25:38.080
> 
> 标签：text, binary

我需要将一个文本文件导入 matlab 并将其转换为二进制，以便包含二进制值的最终数组采用某种整数格式而不是字符格式。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T14:44:02.277

```
fid = fopen('myFile.txt', 'r');
F = fread(fid, 'char=>uint32')' 
```

# ruby-on-rails - Rails 最佳实践 - 处理错误 rails

> ID：15450425
> 
> 赞同：0
> 
> 时间：2013-03-16T14:25:42.277
> 
> 标签：ruby-on-rails, error-handling

我是新来的轨道。我想知道在 Rails 中处理输入错误的最佳方法。使用`:message`in`validates_format_of method`然后在视图中检查哈希值或使用 a 初始化模型`ActiveModel::Errors.new`，然后在视图中使用它（传入模型`attr_reader :errors`），或其他任何方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T15:35:09.860

我`:message` 在`validates_format_of method` 然后检查视图中使用，这是一种普遍的做法指南[http://guides.rubyonrails.org/active_record_validations_callbacks.html#error_messages-and-error_messages_for](http://guides.rubyonrails.org/active_record_validations_callbacks.html#error_messages-and-error_messages_for)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T15:44:04.697

验证输入错误的一个好方法是同时进行客户端和服务器端验证。您可以在模型上依赖 Rails 验证器，在前端您可以使用较新的 HTML 元素、javascript 或两者的组合。

特别是关于 Rails 验证，我认为您不需要偏离约定太远。显然，如果您需要不同的策略，您绝对可以合并它，但那时我肯定会建议添加测试（这不是我通常为 Rails 验证做的事情）。

# c# - 如何处理 SqlException

> ID：15450427
> 
> 赞同：1
> 
> 时间：2013-03-16T14:25:52.183
> 
> 标签：c#, .net, sql, sql-server, database

我在 C# 中有一些 SQL 处理代码，在处理 UNION 子句时可能会引发许多异常。我想检测哪个特定的异常被抛出，以便相应地处理它。在测试我的应用程序时，会抛出这两个错误：

![在此处输入图像描述](../Images/0ae85976e78023394881a08daa4f91f3.png)

![在此处输入图像描述](../Images/a1a9ff54e642b295cf5f87c9306bf9a2.png)

我如何区分每一个并识别出哪一个被抛出？我不能简单地复制/粘贴错误消息并将其放入，`if-statement`因为字段名称和架构并不总是相同的。

```
try
 {
   adapter.Fill(dtResults);
 }
 catch (SqlException ex)
 {
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T14:29:47.080

您正在捕获的 SqlException 具有丰富的信息，例如错误号。这允许您单独处理条件：

[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlexception.number.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlexception.number.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T14:30:50.197

在您的`catch`声明中，您可以使用：

```
 if (ex.ToLower.Contains("conversion failed")
       MessageBox.Show("Error: a conversion failed");
   if (ex.ToLower.Contains("multi-part identifier")
       MessageBox.Show("this is the other error!"); 
```

只是解决此问题的众多方法中的一种:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T14:29:33.787

SqlException 具有您可以检查的 Number 属性 ( [http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlexception.number.aspx )。](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlexception.number.aspx)

看看这个答案的细节，它似乎是一样的：[https ://stackoverflow.com/a/6222003/1758762](https://stackoverflow.com/a/6222003/1758762)

# java - 使用 XStream 将 XML 转换为 JSON 时忽略空格

> ID：15450434
> 
> 赞同：0
> 
> 时间：2013-03-16T14:26:20.443
> 
> 标签：java, xml, json, xstream

我正在尝试建立一种可靠且快速的方法来使用 Java 将 XML 转换为 JSON，并且我已经开始使用[XStream](http://xstream.codehaus.org/)来执行此任务。但是，当我运行下面的代码时，由于空格（包括换行符）而导致测试失败，如果我删除这些字符，那么测试将通过。

```
 @Test
    public void testXmlWithWhitespaceBeforeStartElementCanBeConverted() throws Exception {
        String xml =
                "<root>\n" +
                "   <foo>bar</foo>\n" + // remove the newlines and white space to make the test pass
                "</root>";
        String expectedJson = "{\"root\": {\n" +
                "  \"foo\": bar\n" +
                "}}";
        String actualJSON = transformXmlToJson(xml);

        Assert.assertEquals(expectedJson, actualJSON);
    }

    private String transformXmlToJson(String xml) throws XmlPullParserException {
        XmlPullParser parser =  XppFactory.createDefaultParser();
        HierarchicalStreamReader reader = new XppReader(new StringReader(xml), parser, new NoNameCoder());
        StringWriter write = new StringWriter();
        JsonWriter jsonWriter = new JsonWriter(write);
        HierarchicalStreamCopier copier = new HierarchicalStreamCopier();
        copier.copy(reader, jsonWriter);
        jsonWriter.close();
        return write.toString();
    } 
```

测试失败异常：

```
com.thoughtworks.xstream.io.json.AbstractJsonWriter$IllegalWriterStateException: Cannot turn from state SET_VALUE into state START_OBJECT for property foo
    at com.thoughtworks.xstream.io.json.AbstractJsonWriter.handleCheckedStateTransition(AbstractJsonWriter.java:265)
    at com.thoughtworks.xstream.io.json.AbstractJsonWriter.startNode(AbstractJsonWriter.java:227)
    at com.thoughtworks.xstream.io.json.AbstractJsonWriter.startNode(AbstractJsonWriter.java:232)
    at com.thoughtworks.xstream.io.copy.HierarchicalStreamCopier.copy(HierarchicalStreamCopier.java:36)
    at com.thoughtworks.xstream.io.copy.HierarchicalStreamCopier.copy(HierarchicalStreamCopier.java:47)
    at testConvertXmlToJSON.transformXmlToJson(testConvertXmlToJSON.java:30) 
```

有没有办法告诉复制过程忽略可忽略的空白。我找不到任何明显的方法来启用这种行为，但我认为它应该在那里。我知道我可以预处理 XML 以删除空格，或者只是使用另一个库。

**更新** 我可以使用 HierarchicalStreamReader 接口的装饰器并手动抑制空白节点来解决该问题，但这仍然感觉不理想。这看起来像下面的代码，这将使测试通过。

```
 public class IgnoreWhitespaceHierarchicalStreamReader implements HierarchicalStreamReader {
        private HierarchicalStreamReader innerHierarchicalStreamReader;

        public IgnoreWhitespaceHierarchicalStreamReader(HierarchicalStreamReader hierarchicalStreamReader) {
            this.innerHierarchicalStreamReader = hierarchicalStreamReader;
        }

        public String getValue() {
            String getValue = innerHierarchicalStreamReader.getValue();
            System.out.printf("getValue = '%s'\n", getValue);
            if(innerHierarchicalStreamReader.hasMoreChildren() && getValue.length() >0)         {
                if(getValue.matches("^\\s+$")) {
                    System.out.printf("*** White space value suppressed\n");
                    getValue = "";
                }
            }
            return getValue;
        }
        // rest of interface ... 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:15:46.277

将两个 XML 与 String 对象进行比较并不是一个好主意。当 xml 相同但节点顺序不同时，您将如何处理情况。

例如

```
<xml><node1>1</node1><node2>2</node2></xml> 
```

类似于

```
<xml><node2>2</node2><node1>1</node1></xml> 
```

但是当你进行字符串比较时，它总是会返回 false。

而是使用 XMLUnit 之类的工具。有关详细信息，请参阅以下链接，

[在 Java 中比较 2 个 XML 文档的最佳方法](https://stackoverflow.com/questions/141993/best-way-to-compare-2-xml-documents-in-java)

# java - 在 JFrame Swing 中绘制像素

> ID：15450437
> 
> 赞同：2
> 
> 时间：2013-03-16T14:26:46.107
> 
> 标签：java, swing, line, pixels

我知道在摇摆中创建文本字段和标签。现在我想通过在摆动中绘制像素来画一条线，我已经阅读了这个站点以及任何其他站点上的所有示例，但我没有得到它。我知道如何在小程序中做到这一点，但我想在摇摆中做到这一点。请帮忙。

```
import javax.swing.*;
import java.awt.*;

class dline{
   JFrame j;
   dline(){
      j = new JFrame("Line Draw");
      j.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      j.setExtendedState(Frame.MAXIMIZED_BOTH);
      j.setVisible(true);
   }
   public void paintComponent(Graphics g){
      g.drawLine(10, 25,250, 300);
   }
   public static void main(String s[]){
      SwingUtilities.invokeLater(new Runnable(){
         public void run(){
            new dline();
         }
      });
   }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T14:30:43.760

1.  创建一个扩展 JPanel 的类 DrawingPanel
2.  在其中移动您的方法paintComponent()
3.  将 DrawingPanel 的实例添加到您的框架

从[JDK 7 文档](http://docs.oracle.com/javase/7/docs/api/javax/swing/JFrame.html)：

> [您可以在 The Java Tutorial 中的How to Make Frames](http://java.sun.com/docs/books/tutorial/uiswing/components/frame.html)部分找到有关使用 JFrame 的面向任务的文档。

正如[camickr](https://stackoverflow.com/users/131872/camickr)所说：阅读[自定义绘画的 Swing 教程](http://docs.oracle.com/javase/tutorial/uiswing/painting/index.html)。

# android - 如何仅从 json 解析 json 对象

> ID：15450440
> 
> 赞同：0
> 
> 时间：2013-03-16T14:27:09.343
> 
> 标签：android, arrays, json, parsing

//在这里我放了我的json文件，它只返回数组内部元素而不是数组名所以我试图解析//它但是没有数组名我做不到

//我的json

```
{
"to": "USD", 
"rate": 0.98087299999999999, 
"from": "CAD", 
"v": 1.961746
} 
```

//从url获取getJson的代码

```
public JSONObject getJSONFromUrl(String url) {

        // Making HTTP request
        try {
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();           

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } 
```

// 从服务器读取数据

```
 try {
                    BufferedReader reader = new BufferedReader(new InputStreamReader(
                            is, "iso-8859-1"), 8);
                    StringBuilder sb = new StringBuilder();
                    String line = null;
                    while ((line = reader.readLine()) != null) {
                        sb.append(line + "\n");
                    }
                    is.close();
                    json = sb.toString();
                } catch (Exception e) {
                    Log.e("Buffer Error", "Error converting result " + e.toString());
                }

        // try parse the string to a JSON object

  try {
                    jObj = new JSONObject(json);
                } catch (JSONException e) {
                    Log.e("JSON Parser", "Error parsing data " + e.toString());
                }

            // return JSON String

    return jObj;

        } 
```

// 解析

```
url = "http://rate-exchange.appspot.com/currency?from=CAD&to=INR&q=5";

                JSONParser jParser = new JSONParser();
                json = jParser.getJSONFromUrl(url);

                data_to = json.getString("to");
                data_rate = json.getDouble("rate");
                data_from = json.getString("from");
                data_value =json.getDouble("v"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T14:40:16.970

问题是你的`JSON`：

```
{
   "to": "USD", 
   "rate": 0.98087299999999999, 
   "from": "CAD", 
   "v": 1.961746
} 
```

不是，`JSONArray`但`JSONObject`它不包含数组，而只包含键值对。因此，您只需将其分配为 Object 并从中获取数据：

```
JSONObject o = new JSONObject(sourceString);
String from = o.getString("from"); // getting value CAD with key from 
```

# bash - Bash 不应将颜色代码视为可见字符

> ID：15450441
> 
> 赞同：3
> 
> 时间：2013-03-16T14:27:21.073
> 
> 标签：bash

我`fold`用来包装我的输入文件。我注意到一些彩色线条较短。我发现`bash`将颜色代码视为字符，即使不可见。例子：

```
$ text="\e[0;31mhello\e[0m"; echo -e "$text - lenght ${#text}"
hello - lenght 18
$ text="hello"; echo -e "$text - lenght ${#text}"
hello - lenght 5 
```

其他不可见字符也会发生这种情况：

```
$ text="a\bb\bc"; echo -e "$text - lenght ${#text}"
c - lenght 7 
```

是否有可能改变这种行为？我希望`coreutils`程序（`bash`例如`fold`）只能计算可见字符。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T14:45:11.830

这不是您问题的完整解决方案，但重要的是要知道 bash 不处理文字中的转义序列。

所以`"\b"`实际上是 2 个字符，`\`并且`b`. 只有当你`echo -e`，*然后*他们被替换。

例子：

```
text="a\bb\bc"
t=$(echo -e $text)
echo ${#t}
5  # the correct length 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-16T14:24:15.470

它并不完美，但您可以使用`sed`计数之前的工具删除格式字节。

```
text="\e[0;31mhello\e[0m";
echo -e "# $text - lenght ${#text}";
# hello - lenght 18
x=$(echo -e "$text" | sed "s/$(echo -e "\e")[^m]*m//g");
echo "# $x - ${#x}"
# hello - 5 
```

# ruby-on-rails - Heroku rails 部署问题

> ID：15450445
> 
> 赞同：0
> 
> 时间：2013-03-16T14:27:36.620
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, heroku

目前我尝试将我的 rails 应用程序上传到 heroku，但我在 CLI 上遇到了这个问题：

```
2013-03-16T14:21:28+00:00 app[web.1]: Processing by PostsController#index as HTML
2013-03-16T14:21:28+00:00 app[web.1]: Completed 500 Internal Server Error in 1ms
2013-03-16T14:21:28+00:00 app[web.1]: 
2013-03-16T14:21:28+00:00 app[web.1]: NoMethodError (undefined method `accept' for nil:NilClass):
2013-03-16T14:21:28+00:00 app[web.1]:   app/controllers/posts_controller.rb:5:in `index'
2013-03-16T14:21:28+00:00 app[web.1]: 
2013-03-16T14:21:28+00:00 app[web.1]: 
```

我不太确定这里发生了什么，这是我的`routes.rb`代码`PostsController`

路线.rb

```
Apps2::Application.routes.draw do

  devise_for :users, :controllers => { :omniauth_callbacks => "omniauth_callbacks" }

  resources :posts

  root :to => 'posts#index'
end 
```

后控制器

```
class PostsController < ApplicationController
  # GET /posts
  # GET /posts.json
  def index
    @posts = Post.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @posts }
    end
  end

  # GET /posts/1
  # GET /posts/1.json
  def show
    @post = Post.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @post }
    end
  end

  # GET /posts/new
  # GET /posts/new.json
  def new
    @post = Post.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @post }
    end
  end

  # GET /posts/1/edit
  def edit
    @post = Post.find(params[:id])
  end

  # POST /posts
  # POST /posts.json
  def create
    @post = Post.new(params[:post])

    respond_to do |format|
      if @post.save
        format.html { redirect_to @post, notice: 'Post was successfully created.' }
        format.json { render json: @post, status: :created, location: @post }
      else
        format.html { render action: "new" }
        format.json { render json: @post.errors, status: :unprocessable_entity }
      end
    end
  end

  # PUT /posts/1
  # PUT /posts/1.json
  def update
    @post = Post.find(params[:id])

    respond_to do |format|
      if @post.update_attributes(params[:post])
        format.html { redirect_to @post, notice: 'Post was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @post.errors, status: :unprocessable_entity }
      end
    end
  end

  # DELETE /posts/1
  # DELETE /posts/1.json
  def destroy
    @post = Post.find(params[:id])
    @post.destroy

    respond_to do |format|
      format.html { redirect_to posts_url }
      format.json { head :no_content }
    end
  end
end 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T14:42:18.293

该问题似乎与您的数据库 gem 有关。Heroku 使用 PostgreSQL ( `pg`) 作为它的数据库引擎，而不是 sqlite。确保您`pg`在生产中使用。

请参阅：[升级到 Rails 3 后 nil:NilClass 的未定义方法“接受”](https://stackoverflow.com/questions/11889679/undefined-method-accept-for-nilnilclass-after-upgrading-to-rails-3)

在我的`Gemfile`我做：

```
group :development, :test do
  gem 'sqlite3'
end

group :production do
  gem 'pg'
end 
```

# android - 从android中录制的音频文件中去除噪音

> ID：15450448
> 
> 赞同：0
> 
> 时间：2013-03-16T14:27:54.287
> 
> 标签：android, audio

大家，我是android的新手。现在，我正在制作一个安卓应用程序，我将在播放文件和我自己的声音后录制一个文件。但是，我的 wav 文件中可能存在一些噪音。是否有一些库可以用来为我的应用消除噪音？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T16:39:57.040

有不同种类的噪音，你如何摆脱它取决于。没有“灵丹妙药”。

*   要过滤掉某些频率，您可以应用 EQ。粗略地说，清晰理解语音所需的信号部分在 300 Hz - 3000 Hz 的范围内。您可以使用 EQ 消除低于 300 Hz 和高于 3000 Hz 的所有内容。[在JSyn](http://www.softsynth.com/jsyn/)和[processing](http://processing.org/)中有这方面的 java 库。

*   如果你的语音和噪音占据相同的频段，问题就会变得更加困难。有多种技术，通常在“宽带降噪”的标题下。我根本不知道有任何 Java 库可以做到这一点，更不用说，但你可以在本机代码中做到这一点。我从未尝试过，但[sox](http://sox.sourceforge.net/)提供了一个“噪声”插件，您可以从 libsox 访问它。

# javascript - jQuery 弹出窗口 (bPopup) 未能按预期关闭

> ID：15450454
> 
> 赞同：0
> 
> 时间：2013-03-16T14:28:31.483
> 
> 标签：javascript, jquery, popup, bpopup

我使用轻量级 jQuery 插件创建了一个弹出窗口：bPopup。

我希望弹出窗口出现在页面加载时，因此具有以下代码：

```
<script>
;(function($) {
  $(window).load(function(){ //see edit below
  $('#popup').bPopup({            
     opacity: 0.6,
     modalClose: true       
     });
    });
   })(jQuery);
</script> 
```

自定义`modalClose: true`控制天气或不关闭/关闭弹出窗口单击弹出窗口或周围覆盖（[请参阅API](http://dinbror.dk/blog/bPopup/#Options)）

但是，我的弹出窗口成功出现但不会关闭，无论是单击覆盖还是单击具有控制关闭的类的元素时（默认情况下，任何具有“b-close”类的元素也将关闭弹出窗口。

关于我哪里出错的任何想法，或者我如何找出哪个方面不起作用？谢谢

编辑：根据评论中的建议，我已更改`$(window).load(function(){`为`$(document).ready(function(){`但是我的问题仍然存在

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T17:46:38.817

发现我使用的是 0.7.1 版本的弹出窗口，更新到 0.9.1，这似乎已经解决了这个问题。感谢看过的人。

# windows-phone-7 - Windows phone：如何在单击按钮时选择所有复选框（由 DATA BINDING 填充）？

> ID：15450455
> 
> 赞同：0
> 
> 时间：2013-03-16T14:28:42.187
> 
> 标签：windows-phone-7, windows-phone-8, windows-phone-7.1, windows-phone

我使用以下代码填充了一个带有复选框内容的列表框：

```
<StackPanel HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Margin="12,105,6,100">
            <ListBox Name="ContactResultsData" ItemsSource="{Binding}" Height="393" Margin="0,0,0,0" >
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <CheckBox  Name="xxx"  Content="{Binding Path=DisplayName, Mode=TwoWay}" Unchecked="xxx_Unchecked" Checked="xxx_Checked"></CheckBox>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
</StackPanel> 
```

现在我想在单击按钮时检查所有复选框，请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T07:51:46.753

有 2 个选项可供您使用。

1.  将另一个（布尔）属性添加到您要绑定到的集合中的`ItemsSource`对象`ListBox`。然后，您将其绑定到`IsChecked`复选框的属性。完成后，响应您的按钮单击，您只需要遍历集合并将所有属性设置为 true，然后只要您通知 bool 上的属性更改，UI 就会更新。

2.  您可以在 ListBox 的可视化树中查找复选框并检查您找到的所有内容。

我的描述可能会使选项 1 看起来更有效，但这就是我的建议。

# python - 选择和操作 .csv 中的列

> ID：15450458
> 
> 赞同：3
> 
> 时间：2013-03-16T14:28:54.053
> 
> 标签：python, numpy

我有一个包含 38 列和 1500 多行的 csv，其中包含浮点数和字符串。我想要这个集合中的 3 列（x，y，z）浮点数据来找到`f=(x+y)/z`. 经过研究，我成功地将这些列隔离为 numpy 数组并执行`f=(x+y)/z`. 现在，当我尝试对 f 求和时，数组没有加起来。我打印 f 我看到 1500 项正确值，但不是这些值的总和。

```
 reader=csv.reader(open('myfile.csv' ,"rb"),delimiter=',')
  reader.next()
  reader.next()
  x=list(reader)
  data=numpy.array(x)
  rows=data.shape[0]
  for i in range (0,rows):
      x=numpy.array(data[i,18]).astype('float')
      y=numpy.array(data[i,19]).astype('float')
      z=numpy.array(data[i,6]).astype('float')
      f=numpy.array((x+y)/z)
      average=numpy.sum(f)/rows
      print average 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T15:09:07.750

如果`data`已经是一个数组，则不需要`for`循环：

```
x = data[:, 18].astype(float)
y = data[:, 19].astype(float)
z = data[:, 6].astype(float)
f = (x+y) / z
average = np.average(f) 
```

阅读您的文件可能会更好[`np.loadtxt`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.loadtxt.html)：

```
data = np.loadtxt('myfile.csv', dtype=float, delimiter=',' skiprows=2,
                  usecols=(6, 18, 19)) 
```

或得到`x`,`y`并`z`直接：

```
x, y, z = np.loadtxt('myfile.csv', dtype=float, delimiter=',' skiprows=2,
                     usecols=(6, 18, 19), unpack=True) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T15:13:11.740

Numpy 允许您将数组作为一个整体进行操作，您不需要遍历它们。

```
reader=csv.reader(open('myfile.csv' ,"rb"),delimiter=',')
reader.next()
reader.next()
x=list(reader)
data=numpy.array(x)
rows=data.shape[0]

x=data[:,18].astype('float')
y=data[:,19].astype('float')
z=data[:,6].astype('float')

f = (x + y) / z
average = f.mean()

print average 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T15:05:57.660

如果您没有锁定 numpy，这里是一个纯 python 解决方案，

```
import csv

def f(x, y, z):
    x = float(x)
    y = float(y)
    z = float(z)
    return (x+y)/z

reader = csv.reader(open("derp.csv", 'r'))
rows = list(reader)
len_of_rows = len(rows)

f_values = []

for row in rows:
    x = row[0]
    y = row[1]
    z = row[2]
    f_values.append(f(x, y, z))

average = sum(f_values)/len_of_rows
print average 
```

这是我的 derp.csv 的样子

```
1,2,3
4,5,6
7,8,9 
```

# list - 将 putStr 应用于列表的每个项目

> ID：15450467
> 
> 赞同：9
> 
> 时间：2013-03-16T14:29:53.683
> 
> 标签：list, haskell, printing

我正在尝试以这种格式打印出整数列表

```
[1]
[2]
[3] 
```

所以我的函数接受一个整数列表并返回一个 IO () ，如下所示：

```
import System.IO

printVector :: [Integer] -> IO ()
printVector (x:xs) = putStr("[" ++ show(x) ++ "]" ++ "\n") : printVector xs 
```

但是 ghc 给了我错误：

```
lin-test.hs:5:22:
Couldn't match expected type `IO ()' with actual type `[a0]'
In the expression:
  putStr ("[" ++ show (x) ++ "]" ++ "") : printVector xs
In an equation for `printVector':
    printVector (x : xs)
      = putStr ("[" ++ show (x) ++ "]" ++ "") : printVector xs
Failed, modules loaded: none. 
```

现在我的理解是该函数将遍历列表，首先获取第一个项目'x'，然后使用 : printVector xs 它将递归调用列表的其余部分，将相同的 putStr 函数应用于列表中的每个项目。

但我认为我的问题出在哪里：printVector xs? 谁能指出我在这里做错了什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-16T14:41:51.463

您需要映射列表，但由于这些是 IO 操作，您还需要执行它们（因为`map`将返回 IO 操作列表而不执行它们，请参见以下示例）。

```
sequence $ map (putStrLn . show) [1,2,3,4] 
```

已经有一个函数可以做到这一点，它是`mapM`. 所以这个例子可以简化为：

```
mapM (putStrLn . show) [1,2,3,4] 
```

您可以做的另一件事是使用`mapM_`which uses`sequence_`代替，并将忽略对每个元素执行 IO 操作的结果。因此，返回类型将是`IO ()`代替`IO [()]`（上一个示例）。

```
mapM_ (putStrLn . show) [1,2,3,4] 
```

# php - PHP 正则表达式：如何编写规则

> ID：15450471
> 
> 赞同：-4
> 
> 时间：2013-03-16T14:30:22.743
> 
> 标签：php, regex

如何根据以下规则验证字符串：

```
$string = 'int(11)';

Rule: first 4 characters MUST be 'int('
Rule: next must be a number between 1 and 11
Rule: next must be a ')'
Rule: Everything else will fail 
```

经验丰富的 PHP 开发人员 - 正则表达式不是我的强项..

欢迎任何帮助或建议。多谢你们..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T14:32:13.277

```
if (preg_match('/int\((\d{1,2})\)/', $str, $matches)
    && (int) $matches[1] <= 11 && (int) $matches[1] > 0
   ) {
    // ... do something nice
} else {
    echo 'Failed!!!'
} 
```

或者，如果您不想使用 pReg 库（可以更快）：

```
$str = 'int(11)';
$i = substr($str, 4, strpos($str, ')') - 4);

if (substr($str, 0, 4) === 'int('
    && $i <= 11
    && $i > 0
   ) {
    echo 'succes';
} else {
    echo 'fail';
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-16T14:32:51.543

使用这个正则表达式`int\((\d|1[01])\)`

`int\((`第一条规则

`(\d|1[01])`第二条规则

`\)`第三条规则

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-16T14:59:36.940

这个正则表达式更小：

```
int\((\d1?)\) 
```

或没有捕获组（如果您不需要检索数值）。

```
int\(\d1?\) 
```

# google-cloud-endpoints - Google Cloud Endpoints 中的多个实体参数

> ID：15450472
> 
> 赞同：3
> 
> 时间：2013-03-16T14:30:23.633
> 
> 标签：google-cloud-endpoints

如何将多个实体从客户端传递到 Google Cloud Endpoint？

例如，传递单个实体很容易在服务器的 Endpoint api 源文件中完成：

```
public class SomeEndpoint {
...
   @ApiMethod(...)
   public MyEntity someMethod(MyEntity someEntity) {
   ...
   }
...
} 
```

然后在客户中我可以很容易地打电话

```
endpoint.someMethod(someEntity).execute() 
```

但是，如果我想将两个实体传递给一个端点怎么办？，像这样：

```
 @ApiMethod(...)
 public MyEntity otherMethod(MyEntity someEntity, MyEntity someOtherEntity) {
    ...
 } 
```

这不起作用，GPE 只生成一个带有单个 MyEntity 参数的端点库。

是否可以传递多个实体参数？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-17T04:22:17.510

您不能在请求正文中发送多个实体类型。您需要创建一个包含这两个实体的包装实体，例如：

```
class MyWrapperEntity {
  MyEntity someEntity;
  MyOtherEntity someOtherEntity;
  // ...
} 
```

但是，这不是您的示例所显示的（实体是同一类型）。改为使用集合实体的a`List<MyEntity>`或内部，例如：`Map<String, MyEntity>`

```
class MyEntityCollection {
  List<MyEntity> items;
  // ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T17:55:27.443

使用“命名”注释...

```
@ApiMethod(name = "sendStuff")
public void sendStuff( @Named("clientId") String clientId, @Named("stuff") String stuff ) 
```

对于 android，客户端代码看起来像这样

```
SendStuff sl = service.sendStuff( clientId, stuff ); 
```

# windows-runtime - 这些语句在 C++/CX 中是什么意思？

> ID：15450474
> 
> 赞同：0
> 
> 时间：2013-03-16T14:30:28.457
> 
> 标签：windows-runtime, c++-cx

这些是陈述

```
this->SizeChanged += ref new SizeChangedEventHandler(this, &MainPage::MainPage_SizeChanged);

Scenarios->SelectionChanged += ref new SelectionChangedEventHandler(this, &MainPage::Scenarios_SelectionChanged);

//These lines were in MainPage Constructor.
//Scenarios is the name of a ListBox 
```

这两条线有什么作用？

`MainPage::MainPage_SizeChanged`和是什么`MainPage::Scenarios_SelectionChanged`？我可以看到两个具有此名称的功能，但是没有`()`的函数，但是函数调用中没有什么？还有为什么它们前面有&？如果它们的返回类型为 void，它们如何用作参数？

在这两行中，为什么使用 += 而不仅仅是 =？如果使用 = 会发生什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T15:31:07.267

这些行订阅事件。例如，`SizeChanged`是一个事件，`SizeChangedEventHandler`是一个委托类型（类似于函数指针，但也包含对类实例的引用）并且`MainPage_SizeChanged`是一个事件处理程序。

没有`()`，因为*它不是函数调用*。`MainPage_SizeChanged`执行该行时不会调用该函数，每次`SizeChanged`引发事件时都会执行该函数。之所以使用，`&`是因为这就是在 C++ 中创建函数指针的方式。

如果您使用`=`而不是`+=`，您的代码将无法编译。您不能*设置*事件，只能订阅（使用`+=`）和取消订阅（`-=`）。

# java - 通过远程方法调用文件上传和下载

> ID：15450475
> 
> 赞同：1
> 
> 时间：2013-03-16T14:30:41.247
> 
> 标签：java, network-programming, rmi

我花了一天的时间研究我的客户如何从服务器数据库上传和下载文件。当服务器和客户端在同一台机器上运行时，我的代码工作正常，但是当客户端和服务器在不同的机器上时，一切都搞砸了。这是我的学校项目，所以任何人都可以帮助我如何实施该计划应该做的事情。我在整个互联网上搜索和搜索，但由于我自己的努力，我未能找到解决方案，我看到了一些，但它们与 servlet 和 jsp 相关。我需要将其作为桌面应用程序执行。有关我的代码的一些信息，请点击此处。

下载服务器实现：

```
public synchronized void downloadFile(Object row) throws RemoteException {
    try {
        Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
        String database = "jdbc:odbc:DRIVER={Microsoft Access Driver (*.mdb, *.accdb)};DBQ="+path+".accdb;";
        dbConn = DriverManager.getConnection(database, "", "");
        ps = dbConn.prepareStatement("SELECT * FROM File WHERE ID = ?");
        ps.setString(1, row.toString());
        ResultSet rs = ps.executeQuery();
        while (rs.next()) {
            InputStream is;
            FileOutputStream fos;
            try {
                is = rs.getBinaryStream("FileSize");
                fos = new FileOutputStream(new File("C:/" +rs.getString("FileName")));
                int bytesRead;
                while ((bytesRead = is.read()) != -1) {
                    fos.write(c);
                }
                is.close();
                fos.close();
            } catch (Exception e) {
                e.printStackTrace();
            }

        }
    } catch (Exception e) {
        e.printStackTrace();
    }
    ps.close();
    dBConn.close();

} 
```

这是我的下载按钮的动作监听器：

```
if (source.equals(downloadB)) {
            try {
                if (fileTable.getSelectedRow() == -1) {
                    JOptionPane.showMessageDialog(null, "No file to be download", "Error", JOptionPane.ERROR_MESSAGE);
                } else {
                    s.downloadFile(fileTable.getValueAt(fileTable.getSelectedRow(), 0));
                    JOptionPane.showMessageDialog(null, "Download Successful", "Information", JOptionPane.INFORMATION_MESSAGE);
                }
            } catch (RemoteException re) {
                JOptionPane.showMessageDialog(null, "Error downloading file", "Error", JOptionPane.ERROR_MESSAGE);
            }
        } 
```

我的数据库包含以下内容：

ID : 自动编号

文件名：文本

文件大小：OLE 对象

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T14:35:56.390

您没有通过 rmi 实现远程文件加载，您已经实现了一个远程调用，它将数据库文件复制到本地文件系统（服务器的）。除非您的客户端可以访问服务器的文件系统，否则这是行不通的。您需要通过 rmi 实际*发送*文件字节。

# java - java中的建模时间

> ID：15450478
> 
> 赞同：-2
> 
> 时间：2013-03-16T14:30:50.480
> 
> 标签：java, object

我需要在java中建模一个7天的时间来构建一个房间预订系统

列举的日子是周一周二周三周四周五周六周日。

小时和分钟。

在 java 中对此进行建模的最佳方法是什么？

我尝试使用多维数组，但不确定如何放入枚举。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T14:56:48.363

[Joda Time](http://joda-time.sourceforge.net/)是一个非常流行的 Java 时间建模库，您应该研究一下。根据您的要求的详细信息，您可能对[间隔](http://joda-time.sourceforge.net/key_interval.html)感兴趣（表示两个瞬间之间的时间，即 UTC 2013 年 3 月 18 日星期一的 09:00 到 UTC 2013 年 3 月 24 日星期日的 18:00），或者[期间](http://joda-time.sourceforge.net/key_period.html)（代表“一周”或“一个月”等概念）。

根据您提供的信息，在我看来，Period 可能是您想要的。通过一个非常简短的示例，以下代码打印出一周后的 DateTime（实际上是时间戳）：

```
 import org.joda.time.DateTime;
    import org.joda.time.Period;

    ...

    DateTime now = new DateTime();
    DateTime oneWeekFromNow = now.plus(Period.weeks(1));
    System.out.println("oneWeekFromNow = " + oneWeekFromNow); 
```

在撰写本文时会产生：`oneWeekFromNow = 2013-03-23T14:53:10.681Z`

# android - 如何使用字符串参数获取特定数据？

> ID：15450479
> 
> 赞同：0
> 
> 时间：2013-03-16T14:31:00.610
> 
> 标签：android, sqlite

我正在使用这种方法来获取具有类别名称值的所有项目的价格，但它没有显示任何内容......

```
public long getcostmain(String xyz)throws SQLException {
        // TODO Auto-generated method stub
        String[] columns = new String[]{KEY_ROWID, KEY_CATEGORY,KEY_DATE,KEY_PRICE,KEY_DETAILS};
        Cursor c = ourDatabase.query(DATABASE_TABLE, columns, KEY_DATE + "=" + xyz, null, null, null, null);
          long cost = 0;
             for(c.moveToFirst(); ! c.isAfterLast(); c.moveToNext()){
                 cost = cost + c.getLong(3);
             }

                return cost;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T15:00:55.843

在您的代码中，当您从数据库中查询数据时，您需要将代码更改为以下内容：

```
Cursor c = ourDatabase.query(DATABASE_TABLE, columns, KEY_DATE + "='" + xyz +"'", null, null, null, null); 
```

您需要在 xyz 字符串周围加上**'**标记。

# mysql - mysql时间戳或日期时间

> ID：15450482
> 
> 赞同：0
> 
> 时间：2013-03-16T14:31:27.177
> 
> 标签：mysql, datetime, timestamp

您好，我需要将 $_SESSION['login_time'] = time() 存储在 mysql 表中，我需要为其创建一个类似“login-time”的列，但我对这两种数据类型“timestamp”和“datetime”感到困惑。在这种情况下，哪一个会是有效的。请帮我...

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T14:41:09.310

如果您使用 PHP 的`time()`函数来获取要插入的时间，它会返回[自 UNIX 纪元 (Jan 1 1970 00:00:00 GMT) 以来的时间（以秒为单位）](http://php.net/manual/en/function.time.php)。由于 MySQL`datetime`数据类型支持的[范围更广](https://dev.mysql.com/doc/refman/5.5/en/datetime.html)（'1000-01-01 00:00:00' 到 '9999-12-31 23:59:59'），并且`timestamp`数据类型支持 '1970-01-01 00'： 00:01' UTC 到 '2038-01-19 03:14:07' UTC（从哪里`time()`开始），你可以继续使用，`timestamp`因为它在概念上匹配得更好一些。（除非您计划在 2038 年之后存储日期，在这种情况下，请疯狂使用`datetime`）。两者都适用于您的情况，但[日期类型与时间戳](https://stackoverflow.com/questions/409286/datetime-vs-timestamp)问题提供了有关使用的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T14:49:16.257

显然，在这里，时间戳是最好的选择。当出现这样的问题时，唯一的回答方法是“我存储的内容是什么意思”。登录时间是您将多次更新的“时间点”。因此，在您面临的两种类型之间，您将选择表示“时间点”而不是“日历日期和时钟时间”的一种。DateTime 在这里存储所有已过时的内容。TimeStamp 只是在这里标记时间。

登录时间根据定义一个时间戳，所以使用 Timstamp 类型*必须*更明智和更高效。

这个答案的唯一限制是时间戳在技术上限制为 2038。

# javascript - 这个 JavaScript 样板文件中是否有任何问题/陷阱？

> ID：15450487
> 
> 赞同：0
> 
> 时间：2013-03-16T14:31:53.380
> 
> 标签：javascript, jquery

我正在使用 jQuery 开发一个网站，并将代码组织成几个脚本文件。

如果我没有弄错的话，最好的做法是像这个样板一样组织你的代码（它创建一个单独的范围并`undefined`正确设置值）：

```
(function($, undefined) {
    $(document).ready(function() {
        // code here
    });
})(jQuery); 
```

就我而言，我还将依赖一些服务器端脚本输出的一些外部配置，比如存储为全局变量`site_config`。所以目前我的脚本样板是：

```
(function(window, undefined) {
    var document = window.document;
    var $ = window.jQuery;
    var config = window.site_config;

    // equivalent to $(document).ready(function() {...
    $(function() {
        // code here using `config`
    });
})(window); 
```

所以我的问题是：这个样板文件中是否有任何问题/陷阱？

具体来说：

1.  可以`window`显式传入吗？（假设包装函数在全局范围内）
2.  我应该使用`window.document`or`jQuery.document`吗？如果两者都错了，如何正确引用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T15:13:24.733

> 显式传入窗口可以吗？

没关系，但没必要（请参阅[Why do I pass the window object in to module pattern?](https://stackoverflow.com/q/8174691/1048572)）。

> 我应该使用 window.document 还是 jQuery.document？如果两者都错了，如何正确引用？

`jQuery.document`错了，`jQuery`函数对象没有这样的属性。但是，只使用 就可以了`document`，因为它是一个全局且不可写的变量。

# iphone - Obj-C 全局使用 NSArray

> ID：15450491
> 
> 赞同：0
> 
> 时间：2013-03-16T14:32:05.707
> 
> 标签：iphone, ios, objective-c, xcode

我有一个 ViewController 提示 FBFriendPickerViewController 在其中我在选择时返回一个包含选择的 NSArray。现在我想使用这个选择信息提示并显示一个新的 ViewController。我是 Objective C 的新手，但我想解决方案很简单。这是我的建议：

ViewController2.h

```
- (id)initWithStyle:(UITableViewStyle)style andSelection:(NSArray *)selection;
@property (strong, nonatomic) NSArray *selectedParticipants; 
```

视图控制器2.m

```
- (id)initWithStyle:(UITableViewStyle)style andSelection:(NSArray *)selection {
    self = [super initWithStyle:style];
    if (self) {
        self.title = NSLocalizedString(@"Split Bill", nil);
        self.tableView.backgroundColor = [UIColor wuffBackgroundColor];
        self.selectedParticipants = selection;
    }
    return self;
}

- (void)setSelectedParticipants:(NSArray *)selectedParticipants {
    NSLog(@"setSelectedParticipants (%d)", [selectedParticipants count]);
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    NSLog(@"%d rowsInSection", [self.selectedParticipants count]);
    return [self.selectedParticipants count];
} 
```

ViewController1.m

```
- (void)actionSheet:(UIActionSheet *)actionSheet willDismissWithButtonIndex:(NSInteger)buttonIndex {
    if (buttonIndex == 2) {
        [[self friendPickerController] presentModallyFromViewController:self animated:YES handler:^(FBViewController *sender, BOOL donePressed) {
            if (donePressed) {
                ViewController2 *vc = [[ViewController2 alloc] initWithStyle:UITableViewStyleGrouped
                                                                                andSelection:[self.friendPickerController selection]];
                [self.navigationController pushViewController:vc animated:YES];
            }
            //[[self friendPickerController] clearSelection];
            }
         ];
    }
} 
```

然而，似乎第一个 setSelectedParticipants-log 返回了正确数量的选定朋友，但 numberOfRowsInSection-log 返回 0。

为什么是这样？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T14:37:03.377

这里的问题在于你的二传手：

```
- (void)setSelectedParticipants:(NSArray *)selectedParticipants {
    NSLog(@"setSelectedParticipants (%d)", [selectedParticipants count]);
} 
```

您会注意到，您从未真正为支持该属性的实例变量设置值，在这种情况下，默认值为`_selectedParticipants`. 因此，要修复，只需将以下行添加到您的设置器中：

```
_selectedParticipants = selectedParticipants; 
```

你应该很高兴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T14:35:38.400

从您的代码中删除此功能

```
- (void)setSelectedParticipants:(NSArray *)selectedParticipants {
    NSLog(@"setSelectedParticipants (%d)", [selectedParticipants count]);
} 
```

您已经在 init 方法中设置了 selectedParticipants

# xml - cuatom 属性的 m2e 自动完成功能不起作用

> ID：15450503
> 
> 赞同：0
> 
> 时间：2013-03-16T14:33:41.023
> 
> 标签：xml, eclipse, maven, m2eclipse, m2e

我有这个配置：

```
<properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <project.webinf.dir>${basedir}/WebContent/WEB-INF</project.webinf.path>
</properties> 
```

我在 Maven 2 Eclipse (m2e) 中自定义属性的自动完成功能不适用于编辑器中的 pom.xml 文件。唯一有效的是诸如`${basedir}`,`${project.artifactId}`等属性。

属性有效，问题仅在于自动完成。
**编辑：属性不起作用，我模棱两可。**

是否有任何与此相关的错误，或者这可能是我的系统配置错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T14:41:26.757

该声明：

> 属性有效，问题仅在于自动完成。

模棱两可，我认为它正在工作，但事实并非如此。

问题是我正在将属性设置为`project.*`命名空间，当我更改为`<webinf.dir>${basedir}/WebContent/WEB-INF</webinf.path>`它时，它就像一个魅力（属性和自动完成）。

向现有工作区添加新属性可能存在某种限制。如果您有一些答案可以详细解释这是如何工作的，我将很乐意接受。

# java - 安卓。寻呼机适配器和 gridView。OnItemClick 方法

> ID：15450504
> 
> 赞同：0
> 
> 时间：2013-03-16T14:33:47.187
> 
> 标签：java, android, gridview, pager, onitemclicklistener

我'，试图在我的 Android 应用程序中使用带有水平滚动的简单 PagerAdapter。我尝试在页面中有一个带有图像的网格。实现这一目标的最简单方法是什么？

我尝试这样的事情（它不起作用，：这是我的 MainActivity.onCreate

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    createHeroList();

    LayoutInflater inflater = LayoutInflater.from(this);
    List<View> pages = new ArrayList<View>();

    View page = inflater.inflate(R.layout.page, null);
    pages.add(page);

    page = inflater.inflate(R.layout.page, null);
    pages.add(page);

    page = inflater.inflate(R.layout.page, null);
    pages.add(page);

    SamplePagerAdapter pagerAdapter = new SamplePagerAdapter(pages);
    ViewPager viewPager = (ViewPager) findViewById(R.id.pager);
    viewPager.setAdapter(pagerAdapter);
    viewPager.setCurrentItem(1);
    setContentView(viewPager);
    initImageLoader(getApplicationContext());
} 
```

这是我的图像适配器

```
public class ImageAdapter extends BaseAdapter {

ImageLoader imageLoader = ImageLoader.getInstance();
private Context mContext;
ArrayList<String> HeroList;
String[] imageUrls;

// create a new ImageView for each item referenced by the Adapter
public View getView(int position, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub

    View grid;
    DisplayImageOptions options = new DisplayImageOptions.Builder()
            .showStubImage(R.drawable.ic_stub)
            .showImageForEmptyUri(R.drawable.ic_empty)
            .showImageOnFail(R.drawable.ic_error).cacheInMemory()
            .cacheOnDisc().bitmapConfig(Bitmap.Config.RGB_565).build();
    if (convertView == null) {
        grid = new View(mContext);
        // LayoutInflater inflater = getLayoutInflater();
        LayoutInflater inflater = (LayoutInflater) mContext
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        grid = inflater.inflate(R.layout.cellgrid, parent, false);
    } else {
        grid = (View) convertView;
    }
    ImageView imageView = (ImageView) grid.findViewById(R.id.imagepart);
    TextView textView = (TextView) grid.findViewById(R.id.textpart);
    imageLoader.displayImage(imageUrls[position], imageView, options);
    textView.setText(HeroList.get(position));
    return grid;
}
} 
```

和我的寻呼机适配器。

```
 public class SamplePagerAdapter extends PagerAdapter{

    List<View> pages = null;
    ArrayAdapter<String> adapter;
    ArrayList<String> NamesList = new ArrayList<String>();
    int HeroCount = 98;
    ImageLoader imageLoader = ImageLoader.getInstance();
    String[] imageUrls;

    public SamplePagerAdapter(List<View> pages){
        this.pages = pages;
    }

    @Override
    public Object instantiateItem(View collection, int position){
        View v = pages.get(position);
        GridView gridview = (GridView) v.findViewById(R.id.gridview);
        Resources myResources = v.getResources();
        imageUrls = myResources.getStringArray(R.array.Urls);
        gridview.setAdapter(new ImageAdapter(v.getContext()));
        gridview.setOnItemClickListener(gridviewOnItemClickListener);       
        ((ViewPager) collection).addView(v, 0);
        return v;
    }

    private GridView.OnItemClickListener gridviewOnItemClickListener = new GridView.OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View v, int position,
                long id) {
            // TODO Auto-generated method stub
            // Sending image id to FullScreenActivity
            Intent i = new Intent(v.getContext(),
                    HeroInformation.class);
            i.putExtra("HeroName", NamesList.get(position));
            i.putExtra("HeroUrl", imageUrls[position]);
            i.putExtra("HeroNum", position);
            startActivity(i);
        }
    };
} 
```

# c# - 覆盖 Request.QueryString

> ID：15450505
> 
> 赞同：1
> 
> 时间：2013-03-16T14:33:48.463
> 
> 标签：c#, .net, overriding, request.querystring

你好，经验丰富的开发人员！

我想知道是否有可能以某种方式覆盖 .Net Request.QueryString 对象？如果无需创建我自己的 HTTP 模块就可以做到这一点，那就太好了。

我的任务是 RSA(1024) 加密我的应用程序中的所有查询字符串。但是，该应用程序已经构建，并且有很多地方正在设置查询字符串，所以理想情况下我想做一个全局更改，将解密查询并将其放在正常的 Request.QueryString 中，以便不必更改我的到处都是代码，也许可以将它传递给我团队中的其他开发人员，他们也不必更改他们的代码。

现在，我已经构建了加密对象并使用 SessionID 进行盐分，以使每个会话的密钥都是唯一的。我还尝试在 Global.asax 中拦截 HTTP 请求，以便用解密的查询重写请求路径，但是，这是一个失败，因为在这些页面上执行的任何回发都会将解密的查询字符串放回 POST，我显然不想要。

所以现在我正处于一个阶段，我不想重写路径，而是在全局级别拦截或覆盖 Request.QueryString 对象，并在调用 this[key] 时使用我的解密方法，因此，不必停止使用 Request.QueryString。然而，在网上搜索了几个小时后，我找不到一个关于如何做到这一点的例子......

如果有人可以帮助我解决这个问题，我将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-19T20:00:25.227

我认为最简单的方法是使用扩展方法。也许是这样的：

```
 class Program 
{
    static void Main() 
    {
        var decryptedValue = HttpContext.Current.Request.DecryptQueryStringParam("myParam");
    }
}

public static class HttpRequestExtensions 
{
    public static string DecryptQueryStringParam(this HttpRequest extendee, string name)
    {
        // do stuff to decrypt
        return DecryptMethodStub(extendee.QueryString[name]);
    }

    private string DecryptMethodStub(string queryString)
    {
        return "something decrypted the string";
    }
} 
```

请注意，上面的 Program 类仅用于说明目的......实际上，您可以在 asp.net Web 表单页面或 MVC 控制器的正文中调用 Request.{ExtensionMethod}，这些控制器已经通过以下方式提供对 HttpRequest 对象的直接访问请求属性。

以下是有关扩展的一些信息：

[http://msdn.microsoft.com/en-us/library/bb383977.aspx](http://msdn.microsoft.com/en-us/library/bb383977.aspx)

# authentication - 无法从 Google API 获取令牌

> ID：15450508
> 
> 赞同：1
> 
> 时间：2013-03-16T14:34:07.230
> 
> 标签：authentication, windows-8, windows-runtime, google-api, oauth-2.0

我正在尝试使用我的 Windows 8 应用程序的 Google OAuth2 API 将我的授权代码交换为令牌，但我不断收到 HTTP 400 错误。

这就是我执行请求的方式（简化）：

```
var url = "https://accounts.google.com/o/oauth2/token";
var body = "code=4/LEXF1iAVRZvfCfdQg9r1aFqoYDgV&client_id=904019870963.apps.googleusercontent.com&client_secret=[removed]&redirect_uri=urn:ietf:wg:oauth:2.0:oob&grant_type=authorization_code";

HttpClient httpClient = new HttpClient();
HttpResponseMessage response = await httpClient.PostAsync(new Uri(url), new StringContent(body));

response.EnsureSuccessStatusCode(); 
```

Visual Studio 通常只是简单地给我一个 HTTP 400 错误请求错误，当我在 Fiddler 中尝试同样的事情时，我也会收到一个 HTTP 400 错误，但内容如下：

```
21
{
  "error" : "invalid_request"
}
0 
```

我阅读了有关 Google OAuth 的所有文档，我在 Google 和 StackOverflow 上搜索了这个问题，我尝试在我的代码中更改所有不同类型的东西（UrlEncode 等），我使用 Google API Playground 来查看它的请求类型执行它并将其与我自己的请求进行比较（除了返回 URL、身份验证代码和用户代理之外，找不到差异）。无论我做什么，我都无法正常工作，我已经被困了好几个小时了。

有谁可以帮我离开这里吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T15:16:55.770

阅读正文内容以获取您在 Fiddler 中注意到的错误 json。

```
HttpClient httpClient = new HttpClient();
var response = httpClient.PostAsync(new Uri(url), new StringContent(body)).Result;
var content = response.Content.ReadAsStringAsync().Result; 
```

内容现在持有：

```
{
  "error" : "invalid_request"
} 
```

您可以通过指定错误类型来将错误投射到对象中，例如： response.Content.ReadAsAsync().Result

对于无效请求部分，您应该使用 UrlEncode。我知道您说您尝试过，但是在正确的位置应用它确实可以解决您的问题。

```
var body = "code="+WebUtility.UrlEncode("4/LEXF1iAVRZvfCfdQg9r1aFqoYDgV")+
           "&redirect_uri="+WebUtility.UrlEncode("https://yoursite...")+
           "&client_id=904019870963.apps.googleusercontent.com" +
           "&scope=" +
           "&client_secret=********" +
           "&grant_type=authorization_code";

HttpClient httpClient = new HttpClient();
var response = httpClient.PostAsync(new Uri(endpoint), 
    new StringContent(body, Encoding.UTF8, "application/x-www-form-urlencoded")).Result; 
```

这是对我有用的代码。也应该为你工作。

# c# - Asp.Net Web 应用程序中的动画面板边框

> ID：15450510
> 
> 赞同：1
> 
> 时间：2013-03-16T14:34:48.917
> 
> 标签：c#, asp.net, web-applications

如何在 Asp.Net Web Application-2005 中使面板边框更具吸引力。像眨眼，改变颜色，出现和消失。

在 VS-2005 中可以吗？

# ios - iOS NSMutable 数组释放行为

> ID：15450512
> 
> 赞同：0
> 
> 时间：2013-03-16T14:34:59.370
> 
> 标签：ios, objective-c, memory-management, nsmutablearray

我有`NSMutableArray`分配和释放的问题。见下面的代码：

```
NSMutableArray *enemiesToDeleteArray = [NSMutableArray arrayWithCapacity:5];
...
else if ([enemy isActive] && !CGRectIntersectsRect(fieldOfView, enemyRect))
        {
            [enemiesToDeleteArray addObject:enemy];
        }
...
 [enemiesToDeleteArray removeAllObjects];
 [enemiesToDeleteArray release]; 
```

上面的代码在运行中崩溃。带有符号调试中断错误“objc_release”或“malloc_break_error”。下面我添加了发生**objc_release**错误的**回溯：**

 **```
* thread #1: tid = 0x1c03, 0x01e140a5 libobjc.A.dylib`objc_release + 21, stop reason = EXC_BAD_ACCESS (code=1, address=0xa0020010)
    frame #0: 0x01e140a5 libobjc.A.dylib`objc_release + 21
    frame #1: 0x01e14bd9 libobjc.A.dylib`(anonymous namespace)::AutoreleasePoolPage::pop(void*) + 555
    frame #2: 0x023c6468 CoreFoundation`_CFAutoreleasePoolPop + 24
    frame #3: 0x002effc1 QuartzCore`CA::AutoreleasePool::~AutoreleasePool() + 19
    frame #4: 0x002ff35f QuartzCore`CA::Display::DisplayLink::dispatch(unsigned long long, unsigned long long) + 251
    frame #5: 0x002ff75f QuartzCore`CA::Display::TimerDisplayLink::callback(__CFRunLoopTimer*, void*) + 161
    frame #6: 0x023e3376 CoreFoundation`__CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 22
    frame #7: 0x023e2e06 CoreFoundation`__CFRunLoopDoTimer + 534
    frame #8: 0x023caa82 CoreFoundation`__CFRunLoopRun + 1810
    frame #9: 0x023c9f44 CoreFoundation`CFRunLoopRunSpecific + 276
    frame #10: 0x023c9e1b CoreFoundation`CFRunLoopRunInMode + 123
    frame #11: 0x0312b7e3 GraphicsServices`GSEventRunModal + 88
    frame #12: 0x0312b668 GraphicsServices`GSEventRun + 104
    frame #13: 0x009d0ffc UIKit`UIApplicationMain + 1211
    frame #14: 0x000c81f6 MyAPP`main(argc=1, argv=0xbffff36c) + 134 at main.m:14
    frame #15: 0x00001fa5 MyAPP`start + 53 
```

以及来自 malloc_break_error 的回溯：

```
MyAPP(18609,0xac98ea28) malloc: *** error for object 0x112dee40: pointer being freed was not allocated
*** set a breakpoint in malloc_error_break to debug

(lldb) bt
    * thread #1: tid = 0x1c03, 0x97be7815 libsystem_c.dylib`malloc_error_break, stop reason = breakpoint 1.1
        frame #0: 0x97be7815 libsystem_c.dylib`malloc_error_break
        frame #1: 0x97be8d51 libsystem_c.dylib`free + 346
        frame #2: 0x023c5ea4 CoreFoundation`-[__NSArrayM dealloc] + 276
        frame #3: 0x01e159ff libobjc.A.dylib`-[NSObject release] + 47
        frame #4: 0x01e140d5 libobjc.A.dylib`objc_release + 69
        frame #5: 0x01e14bd9 libobjc.A.dylib`(anonymous namespace)::AutoreleasePoolPage::pop(void*) + 555
        frame #6: 0x023c6468 CoreFoundation`_CFAutoreleasePoolPop + 24
        frame #7: 0x002effc1 QuartzCore`CA::AutoreleasePool::~AutoreleasePool() + 19
        frame #8: 0x002ff35f QuartzCore`CA::Display::DisplayLink::dispatch(unsigned long long, unsigned long long) + 251
        frame #9: 0x002ff75f QuartzCore`CA::Display::TimerDisplayLink::callback(__CFRunLoopTimer*, void*) + 161
        frame #10: 0x023e3376 CoreFoundation`__CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 22
        frame #11: 0x023e2e06 CoreFoundation`__CFRunLoopDoTimer + 534
        frame #12: 0x023caa82 CoreFoundation`__CFRunLoopRun + 1810
        frame #13: 0x023c9f44 CoreFoundation`CFRunLoopRunSpecific + 276
        frame #14: 0x023c9e1b CoreFoundation`CFRunLoopRunInMode + 123
        frame #15: 0x0312b7e3 GraphicsServices`GSEventRunModal + 88
        frame #16: 0x0312b668 GraphicsServices`GSEventRun + 104
        frame #17: 0x009d0ffc UIKit`UIApplicationMain + 1211
        frame #18: 0x000c81f6 MyAPP`main(argc=1, argv=0xbffff36c) + 134 at main.m:14
        frame #19: 0x00001fa5 MyAPP`start + 53 
```

请给我解释一下，我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T14:36:37.823

你根本不应该释放`enemiesToDeleteArray`。它将在当前范围结束时自动发布。你根本没有使用`alloc`，所以这个对象是自动管理的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T14:38:45.700

`NSMutableArray *enemiesToDeleteArray = [NSMutableArray arrayWithCapacity:5];`返回一个自动释放的实例，并在离开初始化程序后一段时间被清理。现在指针敌人ToDeleteArray 指向未定义的内存。你需要做：

```
enemiesToDeleteArray = [[NSMutableArray arrayWithCapacity:5] retain]; 
```

或者

```
enemiesToDeleteArray = [[NSMutableArray alloc] initWithCapacity:5]; 
```**

# php - 无法将上传的文件存储到 MySql 中

> ID：15450515
> 
> 赞同：-1
> 
> 时间：2013-03-16T14:35:27.560
> 
> 标签：php, mysql, file-upload, referential-integrity

嗨，我目前正在为我的学位项目开发一个快速原型。我有一个以前的表单，用户将从动态下拉列表中选择一些选项，当这些选项已保存到表中时，下一页供用户上传文件。然后将该文件存储到一个单独的表中，其中一个外键引用另一个表。问题在于文件上传页面，我没有包含代表外键的变量，因为我想看看我是否可以先让它工作。如果有人可以提供帮助，将不胜感激。

我收到的错误是上传文件的名称不是插入查询字段中的有效列名，或者

如果我尝试更改 sql，则无法在子表上完成插入或更新，因为违反了参照完整性。

我厚吗？我已经被困了几个小时了。

继承人的PHP

```
if (isset($_POST['action']) and $_POST['action'] == 'upload')
{

$uploadfile = $_FILES['upload']['tmp_name'];
$uploadname = $_FILES['upload']['name'];

if(is_uploaded_file($uploadname)) {

$uploadtype = $_FILES['upload']['type'];
$uploaddata = file_get_contents($uploadfile);

// Prepare user-submitted values for safe database insert

$uploadname = mysql_real_escape_string($uploadname);
$uploadtype = mysql_real_escape_string($uploadtype);
$uploaddata = mysql_real_escape_string($uploaddata);

$sql = "INSERT INTO product_logs (fileName, mimeType, fileData)
        VALUES (".$uploadname.",".$uploadtype.",".$uploaddata.")";
$exesql=mysql_query($sql) OR die(mysql_error());
}
else {
echo 'Error: File could not be uploaded.';
}   
}
include("file.html.php"); 
```

这是file.html.php

```
<form action="" method="post" enctype="multipart/form-data">
        <div>
            <label for="upload">Upload File:
            <input type="file" id="upload" name="upload"/></label>
        </div>
        <div>
            <input type="hidden" name="action" value="upload"/>
            <input type="submit" value="Upload"/>
        </div>
    </form> 
```

这是product_logs表的结构

```
Field       Type           Null Key       Default         Extra
logID       int(5)         NO   PRI         NULL           auto_increment
dateCreated date           NO               NULL    
malResultID int(6)         NO   MUL         NULL    
mimeType    varchar(50)    NO               NULL    
fileData    mediumblob     NO               NULL    
fileName    varchar(255)   NO               NULL 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T14:40:00.107

你在这里忘记了单引号

```
$sql = "INSERT INTO product_logs (fileName, mimeType, fileData)
VALUES ('".$uploadname."','".$uploadtype."','".$uploaddata."')"; 
```

并停止使用`mysql_*`其已弃用、使用`mysqli`或`pdo`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T14:40:14.447

您忘记了查询中值的引号：

```
$sql = "INSERT INTO product_logs (fileName, mimeType, fileData)
        VALUES ('".$uploadname."','".$uploadtype."','".$uploaddata."')";
                ^--             ^ ^               ^ ^               ^ 
```

请注意，将文件存储在数据库中并不是一个好主意，并且会导致未来出现重大问题。

如果您允许大型上传，请注意，您在内存中保存上传文件的两个副本会浪费大量内存。一个稍微不那么糟糕的方法是

```
$sql = "INSERT .... " . mysql_real_escape_string(file_get_contents(...)); 
```

至少为您节省一份文件空间的副本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T14:40:55.663

你应该改变你的 Sql 像 -

```
$sql = "INSERT INTO product_logs (fileName, mimeType, fileData)
        VALUES ('".$uploadname."','".$uploadtype."','".$uploaddata."')"; 
```

此外，正如我们所见，您的表名是 product_logs

你能分享product_logs表的结构吗？以便我们更好地澄清您的问题。

谢谢

# c# - 如何使用 TinyIOC 注册通用接口

> ID：15450518
> 
> 赞同：10
> 
> 时间：2013-03-16T14:35:49.293
> 
> 标签：c#, .net, generics, inversion-of-control, tinyioc

假设我有一个通用接口和一个通用实现。如何注册所有用途？

具体来说，我有以下内容（为简单起见减少了）：

```
public interface IRepository<T> where T : TableEntity
{
    T GetById(string partitionKey, string rowKey);
    void Insert(T entity);
    void Update(T entity);
    void Update(string partitionKey, string rowKey, Action<T> updateAction);
    void Delete(T entity);
    IQueryable<T> Table { get; }
}

public class AzureRepository<T> : IRepository<T> where T : TableEntity
{
    ...
} 
```

我是否需要一一注册所有实现，如下所示：

```
container.Register<IRepository<Entity1>, AzureRepository<Entity1>>();
container.Register<IRepository<Entity2>, AzureRepository<Entity2>>();
container.Register<IRepository<Entity3>, AzureRepository<Entity3>>();
... 
```

还是有更短的方法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-30T01:51:18.347

正如我在评论中提到的，TinyIoC 在 Open Generics 的解析中有一个错误 - 它不会将具有不同类型参数的解析实例分开，并且由于`.AsSingleton()`默认情况下所有注册都是隐式完成的，它总是返回第一个实例为所有后续解析请求解析的泛型类型。

因此，以下内容不起作用：

```
container.Register(typeof(IRepository<>), typeof(AzureRepository<>)); 
```

但是，有一种解决方法 - 使注册瞬态：

```
container.Register(typeof(IRepository<>), typeof(AzureRepository<>)).AsMultiInstance(); 
```

这将为每个解析请求创建一个新实例并正确遵守类型参数。这样做的缺点是，每次您使用先前已解析的类型参数请求接口时，您也会获得一个新实例。

**编辑**

确认的。开放泛型解析确实使用了`SingletonFactory`，一旦它创建了一个实例，它将始终为后续解析返回它。它不知道也不关心泛型。为了使其正常工作，`GenericSingletonFactory`需要 a 不仅保留单个实例，而且保留由要解析的具体类型键入的字典。

好吧，这甚至没有那么难解决。我只是对它的了解还不够，无法确定它真的是正确的。

# java - 为什么 String.replace 不起作用？

> ID：15450519
> 
> 赞同：44
> 
> 时间：2013-03-16T14:35:54.260
> 
> 标签：java, string, replace

我现在有点困惑。我试过了：

```
String test = "KP 175.105";
test.replace("KP", "");
System.out.println(test); 
```

并得到：

```
KP 175.105 
```

但是，我想要：

```
175.105 
```

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：143
> 
> 时间：2013-03-16T14:37:15.490

您没有将其分配给`test`. 字符串是*不可变*的。

```
test = test.replace("KP", ""); 
```

您需要将其分配回`test`.

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-03-16T14:36:44.043

`Strings`是不可变的，因此您需要将`test`引用分配给以下结果`String.replace`：

```
test = test.replace("KP", ""); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-16T14:38:56.340

字符串在java中是不可变的，所以你必须这样做

```
test =test.replace("KP", ""); 
```

# view - 处理程序未获取数据以查看

> ID：15450524
> 
> 赞同：0
> 
> 时间：2013-03-16T14:36:26.373
> 
> 标签：view, android-canvas, android-handler

我正在尝试使用处理程序将消息传递给`View`类；但不知道我哪里出错了。请纠正我。从 Handler 获取值后，我从未使用画布进行绘制。

提前致谢！

运行此程序后，我的日志猫显示`NullPointerException`在`onDraw`方法上。因此无法绘制线。

```
public class List extends Activity{

Handler handler=new Handler();
Message msg=new Message();
Bundle bundle=new Bundle();

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(new TestView(this));
    bundle.putFloat("x1", 10);
    bundle.putFloat("y1", 10);
    bundle.putFloat("x2", 100);
    bundle.putFloat("y2", 100);
    msg.setData(bundle);
    handler.sendMessage(msg);

}

}

 class TestView extends View {

Paint p;
float x1;
float y1;
float x2;
float y2;

public TestView(Context context) {
    super(context);
    Paint p=new Paint();
    p.setColor(Color.BLUE);
    Handler handler=new Handler(){

        @Override
        public void handleMessage(Message msg) {
            Looper.prepare();
            Bundle bundle=msg.getData();
            x1=bundle.getFloat("x1");
            y1=bundle.getFloat("y1");
            x2=bundle.getFloat("x2");
            y2=bundle.getFloat("y2");
            Looper.loop();
        }

    };

}

boolean isDrawing=true;

@Override
protected void onDraw(Canvas canvas) {

      canvas.drawLine(x1, y1, x2, y2, p);

    invalidate();
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T16:03:10.273

处理程序始终只附加到一个线程，除非并且直到我们没有线程，否则它无法工作。即在主线程和后台线程之间发送或接收数据。

View 类的正确程序应该如下：

```
public class List extends Activity{

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(new TestView(this));

}

}

 class TestView extends View {

Bitmap bitmap=Bitmap.createBitmap(1000, 1000, Config.ARGB_8888);
Canvas canvas=new Canvas(bitmap);
Paint p=new Paint();

Handler handler=new Handler(){

    @Override
    public void handleMessage(Message msg) {

        p.setColor(Color.BLUE);
        Bundle bundle=msg.getData();
        String name=bundle.getString("Name");
        Toast.makeText(getContext(), name, Toast.LENGTH_LONG).show();

    }

};

public TestView(Context context) {
    super(context);
    Paint p=new Paint();
    p.setColor(Color.BLUE);
    new Thread(){
        public void run(){

            Message msg=new Message();
            Bundle bundle=new Bundle();
            Bundle bundle1=new Bundle();
            Looper.prepare();
            bundle.putString("Name", "Nishant");
            bundle1.putString("Name", "Neha");
            msg.setData(bundle);
            handler.sendMessage(msg);
            Message m1=new Message();
            m1.setData(bundle1);
            handler.sendMessage(m1);

        }
    }.start();

}

@Override
protected void onDraw(Canvas canvas) {

}

} 
```

# java - GWT Gin 异步服务注入

> ID：15450528
> 
> 赞同：2
> 
> 时间：2013-03-16T14:36:44.830
> 
> 标签：java, gwt, guice, gwt-gin

我有一个关于使用 Gin 注入 GWT Async RPC 服务的问题。

我有两个类都使用相同的异步服务：

```
class TheViewA {    
    @Inject
    public TheViewA(MyServiceAsync myServiceASync) {
        ....
    }
}

class TheViewB {
    @Inject
    public TheViewB(MyServiceASync myServiceASync) {
        ....
    }
} 
```

这工作正常。但是，我发现这会导致 GWT 内部调用：

```
GWT.create(MyServiceASync.class) 
```

每次注射两次。我不知道这样做的缺点是什么，但我认为它们都可以共享一个 MyServiceAsync 实例。

有人能告诉我如何配置 Gin (Guice)，以便只为两个注入创建一个 MyServiceAsync 实例吗？

或者可以为注入创建单独的实例吗？为什么？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T17:05:25.710

当涉及到注入时，如果`Gin`没有找到给定类型的绑定，它会自动回退到`GWT.create()`创建实例。这就是为什么`ClientBundle`//之类的，只是 Just Works `GWT-RPC`，`i18n`而您不必将它们绑定到您自己的`AbstractGinModule`.

当然，当`Gin`找到另一个相同类型的注入时，它会注入另一个实例。要创建和注入单例实例，只需将您的`GWT-RPC`异步服务接口绑定到`@Singleton`范围内。像这样：

```
public class YourModule extends AbstractGinModule {
  @Override
  protected void configure() {
    bind(MyServiceAsync.class).in(Singleton.class);
  }
} 
```

或者你可以创建一个`Provider<MyServiceAsync>`总是返回一个单例实例的，但前面的方法要简单得多。

通常首选在整个应用程序中注入的单例异步实例。

# ruby-on-rails-3 - rails 路由错误没有路由匹配 [POST] "/controller/new"

> ID：15450533
> 
> 赞同：0
> 
> 时间：2013-03-16T14:36:52.957
> 
> 标签：ruby-on-rails-3, rake

我是 Rails 新手，我正在尝试创建一个简单的书签表：

```
 def up
create_table :bookmarks do |t|
    t.string  :path,        :null => false
    t.integer :user_id,     :null => false

    t.timestamps
end

add_index :bookmarks, :user_id
add_index :bookmarks, :path
  end 
```

然后我在我的控制器中有这个：

```
 # GET bookmark/new
# GET bookmark/new.json
def new
    @bookmark = Bookmark.new
end

# POST bookmark/new
# POST bookmark/new.json
def create
    @bookmark = Bookmark.new(params[:bookmark])
    if @bookmark.save
        flash[:success] = "Bookmark Saved"
    else
        flash[:failure] = "Failed !"
    end
end 
```

我的观点是：

```
<%= form_for :bookmark do |bookmark| %>
<%= bookmark.label :path %>
<%= bookmark.text_field :path %>

<%= bookmark.label :user_id %>
<%= bookmark.text_field :user_id %>

<%= bookmark.submit "Add bookmark" %>
<% end %> 
```

最后运行 rake routes 得到这个路由列表：

```
 bookmark_index GET    /bookmark(.:format)            bookmark#index
                     POST   /bookmark(.:format)            bookmark#create
        new_bookmark GET    /bookmark/new(.:format)        bookmark#new
       edit_bookmark GET    /bookmark/:id/edit(.:format)   bookmark#edit
            bookmark GET    /bookmark/:id(.:format)        bookmark#show
                     PUT    /bookmark/:id(.:format)        bookmark#update
                     DELETE /bookmark/:id(.:format)        bookmark#destroy 
```

**当我尝试提交表单时，我收到此错误：**

```
Routing Error

No route matches [POST] "/bookmark/new"

Try running rake routes for more information on available routes. 
```

**编辑：**

将 :bookmark 更改为 @bookmark 会引发此错误：

```
 NoMethodError in Bookmark#new

Showing /media/wahtver/600415AD27D78282/3pces/pces/app/views/shared/_bookmark_form.html.erb where line #1 raised:

undefined method `bookmarks_path' for #<#<Class:0x00000003a48398>:0x007f1034b6b908>

Extracted source (around line #1):

1: <%= form_for @bookmark do |bookmark| %>
2:  <%= bookmark.label :path %>
3:  <%= bookmark.text_field :path %>
4: 
```

问题是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T14:38:58.307

```
<%= form_for @bookmark do |bookmark| %> 
```

并不是

```
<%= form_for :bookmark do |bookmark| %> 
```

更仔细地查看错误消息。它正在使用`POST`，而不是`GET`。

编辑：您的路线应该是`resources :bookmarks`.

当你运行`rake routes`它应该给你：

`bookmarks GET /bookmarks(.:format) bookmarks#index`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T15:07:01.620

你是如何声明你的路线的？你有你的 route.rb 文件`resource :bookmark`或`resources :bookmarks`？

如果你在你的 create 方法中看到你的控制器，你有这个：

```
# POST bookmark/new
# POST bookmark/new.json
def create 
```

注意使用脚手架时rails在每个方法上方自动生成的注释（我猜你是用脚手架生成的控制器），它应该是`POST /bookmarks`或`POST /bookmark`。如果您出于某种原因使用脚手架，那么轨道会生成错误的路线。

显示您的`routes.rb`文件。

# objective-c - “NSMutableArray”没有可见的@interface 声明选择器“UTF8String”

> ID：15450534
> 
> 赞同：-2
> 
> 时间：2013-03-16T14:36:55.133
> 
> 标签：objective-c, cocoa

所以我是 obj-C 和 Xcode 的新手。

我正在制作我的第一个小应用程序，我遵循了互联网上的一些教程并尝试连接到数据库，但现在我有一个错误

> “NSMutableArray”没有可见的@interface 声明选择器“UTF8String”

这出现在代码中： `const char *dbpath = [databasePath UTF8String];`

这段代码在我制作的另一个项目中工作，但是当我尝试在我的 definitif 项目中使用它时，我得到了错误。会因为我使用故事板而导致错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T14:46:31.423

在里面

`const char *dbpath = [databasePath UTF8String];`

`databasePath`不是一个它`NSString`是一个`NSArray`

您可以通过记录来检查`databasePath`。如果要从中提取一些字符串，可以使用`databasePath[index]`或`[databasePath objectAtIndex:index]`

# r - R 中的投资组合分配优化

> ID：15450540
> 
> 赞同：0
> 
> 时间：2013-03-16T14:37:27.253
> 
> 标签：r, optimization, portfolio

我需要 R 的主要目的是投资组合分配优化（非线性系统）。事实上，我的输入是一个方差/协方差矩阵（大小（n = 50）50 * 50），我想对其应用“对风险的同等贡献”代码（风险平价技术，每种资产贡献相同的金额的风险）。

输出应该是每个资产的最佳权重，我收到错误消息。

你能帮忙看一下代码吗？看起来并没有太复杂，但是我对R不够放心...

[问题表述在这里](http://www.thierry-roncalli.com/download/rmetrics-risk-parity.pdf)。转到 Roncalli 演示文稿的幻灯片 32。和`b[i]=1/n`

# emacs - el-get-executable-find: 用 `executable-find' 找不到名为 'hg' 的命令

> ID：15450545
> 
> 赞同：1
> 
> 时间：2013-03-16T14:37:47.457
> 
> 标签：emacs

今天我尝试`python`在`emacs`.

我安装`pymacs, pycomplete+ , python-mode, python-pep8`了`el-get`.

当我尝试安装时`rope`出现此错误

> el-get-executable-find: 用 `executable-find' 找不到名为 'hg' 的命令

然后，当我删除`config`关于`"el-get"`

```
(add-to-list 'load-path "~/.emacs.d/el-get/el-get")   
(unless (require 'el-get nil 'noerror)`    
  (with-current-buffer   
      (url-retrieve-synchronously  
       "https://raw.github.com/dimitri/el-get/master/el-get-install.el")   
    (goto-char (point-max))   
    (eval-print-last-sexp))) 
(el-get 'sync) 
```

错误消失。

任何人都可以帮我解决它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T14:29:45.457

如前所述，在路径中找不到 mercurial dvc 命令“hg”。

一旦注意到 Emacs 并没有像在 $PATH 中那样加载 emacs 变量“exec-path”中的所有可执行文件。从 Windows 系统按钮启动时会发生这种情况。也许从控制台开始时它就消失了。

检查 exec-path，如果它包含“type hg”显示的目录。在这种情况下，通过 init-file 将其添加到 exec-path 可能是一种选择。

# c# - 在 Windows Phone 项目中使用 ANTLR

> ID：15450547
> 
> 赞同：0
> 
> 时间：2013-03-16T14:38:07.683
> 
> 标签：c#, windows-phone-7, antlr

我有一个语法文件并使用 ANTLR 生成 C# 的语法。我将`Antlr3.Runtime.dll`和`.cs`文件添加到我的 Windows Phone 项目中。但是，如果我在命名空间中声明任何对象`Antlr3.Runtime`，我会得到以下异常：

```
Failure has occurred while loading a type. 
```

有什么解决方案吗？Windows Phone 7.5（甚至 8.0）可以使用 ANTLR 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T18:37:25.333

据我所知，ANTLR 目前不支持 Windows Phone。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T11:51:33.633

乔尔·马丁内斯（Joel Martinez）编译了一份作为他在 JINT 上工作的一部分。

这是[github](https://github.com/joelmartinez/Jint.Phone)链接。

# javascript - 在 html 页面上用按钮覆盖图像

> ID：15450558
> 
> 赞同：1
> 
> 时间：2013-03-16T14:39:10.903
> 
> 标签：javascript, html, css

所以我有一个图像，我想用一个 html 按钮属性覆盖它，如下所示：

这是一张空白图片 ![普通图像](../Images/b16cf231af51635bd68b7a91cab340ab.png)

我想在图像上叠加一个按钮 ![我想要什么](../Images/2f2782d230a9b0da3589714a16289e72.png)

然后如果单击按钮，则看起来像这样 ![单击按钮时的图像](../Images/14fe8349aeaf1727f235f4e565143a64.png)

据我所知，这可以使用 CSS 使用 {index-z} 以某种方式完成，或者可以使用 html5 画布标签。然后用java脚本处理实际的按钮点击。但是我不完全确定如何做到这一点（我知道用javascript处理按钮点击）。有人可以链接到有关如何执行此操作的教程或给出解释，将不胜感激。

注意：图像本身也是一个 href / 链接，如果这改变了应该如何完成，另外图像本身将在一个画廊中，大约有 50 个类似的图像

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-16T14:57:09.763

您可以使用定位将“星”按钮放置在其他图像的顶部。您的图像和按钮需要位于位置设置为相对的容器中。然后您可以将您的“星”设置为绝对定位，并且该位置将相对于容器：

```
.image-container {
    display: inline-block;
    position: relative;
}

.star-button {
    position: absolute;    
    right: 10px;
    top: 10px;
}

<div class="image-container">
    <img src="main image here">

    <img class="star-button" src="star image here">
</div> 
```

然后你可以在你的javascript中处理图像（或按钮，或a，或你有什么）的点击。

[JSFiddle](http://jsfiddle.net/Wwmde/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T15:58:57.043

也许这个例子会帮助你，我的朋友：

来源：[ye5](http://ye5.blogspot.co.il/2010/12/css-mouse-click-change-picture.html)

```
HTML :
<div id="header1" width="259px">
<a href="http://your-website-link"></a>
<img src='http://2aek.com/inventory/MyBlogspot/ye5-templete/ye5Header3b.jpg' style='margin-left:259px; margin-top:-128px;'/> 
```

```
CSS :
#header1 a { 
background-image: url(http://2aek.com/inventory/MyBlogspot/ye5-templete/ye5Header3a1.jpg);
height:128px;
width:259px;
display: block;
}

#header1 a:link { 
background-image: url(http://2aek.com/inventory/MyBlogspot/ye5-templete/ye5Header3a1.jpg);
height:128px;
width:259px;
display: block;
}

#header1 a:hover { 
background-image: url(http://2aek.com/inventory/MyBlogspot/ye5-templete/ye5Header3a2.jpg);
height:128px;
width:259px;
display: block;
}

#header1 a:active { 
background-image: url(http://2aek.com/inventory/MyBlogspot/ye5 templete/ye5Header3a3.jpg);
height:128px;
width:259px;
display: block;
} 
```

# php - 使用php的jQuery移动多页

> ID：15450562
> 
> 赞同：1
> 
> 时间：2013-03-16T14:39:33.280
> 
> 标签：php, jquery, web-applications, jquery-mobile

我正在开发我的第一个 jquery 移动 Web 应用程序，并试图了解与一个 HTML 文件中的多个页面相关的服务器端 (PHP) 代码的关系。

在这种情况下，我有一个 html 文件，其中包含 Web 应用程序的所有各种页面：索引、登录、注册、设置等（只是前端，所有实际数据请求都通过 PRG 处理）。根据显示的任何#page，我可以将我的PHP代码嵌套在#page div中，以便仅在调用该#page div时运行，还是无论调用哪个页面div，所有的php都运行？

例子：

```
<div data-role="page" id="index"  data-theme="b">
<?php $this is some thing that is pertinent only to elements within the #index page.?>
</div> <!--#index -->

<div data-role="page" id="login"  data-theme="b">
<?php $this is something that is only pertinent to the login page, and will NOT play nice with the other php code in the page.?>
</div> <!-- #login --> 
```

这两个 php 项目会运行，还是只会运行活动的#page div 中的项目？

非常感谢任何帮助或建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T01:18:23.633

加上@Marc B 所说的，当一个 PHP 文件运行时，它从上到下遍历，输出纯文本（标签外的文本）并执行 PHP 脚本（运行 PHP 函数并输出打印结果）。

因此，在您的示例中，如果没有产生错误，两个 PHP 代码块都将被执行。就像现在一样，第一个块会产生错误并停止处理。

了解服务器端与客户端编码概念的一个好方法是阅读 w3schools PHP 教程：[http ://www.w3schools.com/php/](http://www.w3schools.com/php/)

# c# - 将数据保存在 XML 或数据库中更好吗？

> ID：15450564
> 
> 赞同：1
> 
> 时间：2013-03-16T14:39:45.607
> 
> 标签：c#, wpf, simulation, .net-4.5

我们开发了一款航空模拟游戏，我们当前的结构将用户数据保存在一个 XML 文件中（以及所有游戏数据，如机场统计数据、飞机信息等）。

在性能和功能方面，将这些数据存储在本地机器上的最佳方式是什么？我听到了双方的一些声音，但没有真正具体或有例子支持的答案。虽然我们的原始数据 XML 更小（<150KB），但保存的游戏非常大（3-10MB），并且跨越了数千行或多或少无组织的数据。

想法、建议或建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T15:01:05.033

如果您不需要手动编辑文件，您可以尝试使用 BinaryFormatter 来序列化和反序列化您的数据，应该比 XmlSerializer 快很多。

这是一个如何使用它的示例。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;

namespace WpfApplication2
{
    [Serializable()]
    public class Child
    {
        public string Property1 { get; set; }
    }

    [Serializable()]
    public class TestClass
    {

        public int Property1 { get; set; }
        public string Property2 { get; set; }
        public DateTime Property3 { get; set; }
        public Child Child { get; set; }
    }

    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();

            TestClass testClass = new TestClass()
            {
                Property1 = 1,
                Property2 = "test",
                Property3 = DateTime.Now,
                Child = new Child()
                {
                     Property1 = "test", 
                }
            };

            System.Runtime.Serialization.Formatters.Binary.BinaryFormatter formatter = new System.Runtime.Serialization.Formatters.Binary.BinaryFormatter();
            System.IO.MemoryStream memoryStream = new System.IO.MemoryStream();
            formatter.Serialize(memoryStream, testClass);

            memoryStream.Position = 0;
            TestClass deserialized = formatter.Deserialize(memoryStream) as TestClass;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T14:57:00.893

如果您将数据保存在 XML 文件中，请考虑使用 XML 数据库，例如 Oracle BerkleyDB XML/BaseX/Sedna。您可以使用 DB API 进行数据操作，也可以使用 XQuery 查询该 XML。Berkley DB XML 数据库的性能很好。

此外，如果您的用户数据、机场统计数据等具有可以逐行变化的信息，您也应该使用 XML 数据库。

如果您的数据模型结构良好，那么您可以使用 MySql 或 PostGreSql 等开源数据库来处理您的所有数据。

在这里，两者都可以与您预期的数据库大小一起正常工作，以进行数据添加/更新。您应该考虑您的数据模型来选择数据存储库类型。

如果您选择 XML 数据库，您的数据访问/保存代码可能会被重用。

如果您选择 RDBMS，您应该为您的应用程序层编写代码。

希望，这种洞察力和进一步的研究会对你有所帮助。

# c# - 路径平滑/减点算法

> ID：15450565
> 
> 赞同：3
> 
> 时间：2013-03-16T14:39:46.020
> 
> 标签：c#, map

我目前正在编写一个应用程序，它在地图上显示保存的 gps 路径。（我正在为地图使用大地图）[链接](http://greatmaps.codeplex.com/)

我希望在路径上运行一些路径平滑和点减少算法，以在地图上生成更清晰的路径。我一直在研究 Ramer-Douglas-Peucker 算法，可能还有样条曲线。

任何人都可以建议我采取什么方法，在这个问题上的任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T14:43:18.480

算法的关键部分是递归。如果你能理解它是如何工作的，不管语言它是一样的。所以，基本上我们只需要获取点并将它们发送到一个包含逻辑（也执行递归）部分的函数。

由于您现在有了实现，从控件中提取点`this.MainMap.Position`（玩控件以了解），然后调用该实现的函数:)

[这可能会给你一个开始](http://www.codeproject.com/Articles/18936/A-C-Implementation-of-Douglas-Peucker-Line-Approxi)

祝你好运！

# iphone - Game Center Real-time match - How many players?

> ID：15450566
> 
> 赞同：0
> 
> 时间：2013-03-16T14:39:52.727
> 
> 标签：iphone, ios, ipad, game-center

I want to program a new game for the iPhone. How many people can I put in one match via the Game Center Real-Time match API?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T14:46:41.543

2 to 4 players. Up to 16 players for turnbased matches.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-01T05:04:43.050

I turn based match we can add player's 2 to 16.

The study my experience good tutorial is, Raywenderlich's there are two parts, Check it :)

[Ray Wenderlich's Turn based part 1](http://www.raywenderlich.com/5480/beginning-turn-based-gaming-with-ios-5-part-1)

[Ray Wenderlich's Turn based part 2](http://www.raywenderlich.com/5509/beginning-turn-based-gaming-with-ios-5-part-2)

# c# - 如何在页面加载时在文件上传控件中设置路径

> ID：15450569
> 
> 赞同：2
> 
> 时间：2013-03-16T14:40:07.910
> 
> 标签：c#, asp.net

大家好，我如何在文件上传控件中设置路径，我将从数据库中获取路径，我需要在页面加载或其他方法的文件上传中显示它。有人可以告诉我如何实现这一目标

`<asp:FileUpload ID="FileUpload1" runat="server" />`

在我的页面加载中，有一个代码将从 db 中检索路径，我需要在 fileupload 控件上显示该路径作为其路径

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T14:56:38.127

这有点难找，但答案在这里

[将文件路径分配给 FileUpload 控件](https://stackoverflow.com/questions/5661541/assign-file-path-to-fileupload-control)

表示由于安全原因不可能，并提供了使用标签的替代方法。

# performance - 使用 PEGA 开发的应用程序的分析选项

> ID：15450571
> 
> 赞同：0
> 
> 时间：2013-03-16T14:40:10.567
> 
> 标签：performance, jprofiler, pega

我来自性能工程背景，我们有一个使用 PEGA 开发的工作流应用程序。是否可以使用 JProfiler 分析该应用程序，或者是否有任何工具可专门用于分析使用 PEGA 开发的应用程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:28:56.137

只要它在 JVM 上运行，您就可以使用 JProfiler 对其进行分析。

在 JProfiler GUI 中，调用

*会话->集成向导->新建远程集成*

并按照向导中的步骤进行操作。基本上，您必须插入一个启用分析的 VM 参数。

或者，您可以使用*Session->Quick Attach*来分析系统上任何正在运行的 JVM。

# pug - 替换 Wintersmith 玉石模板中的根相对路径

> ID：15450574
> 
> 赞同：1
> 
> 时间：2013-03-16T14:40:13.627
> 
> 标签：pug

有什么方法可以在链接中使用动态相对路径，而不是在 Wintersmith 模板中使用根相对路径？

我不能使用根真实链接，例如`src="/scripts/main.js"`因为预览构建服务器将网站嵌套在任意深度的子文件夹中，例如

```
/stage/workspace/build/scripts/main.js
/stage/workspace/build/index.html
/stage/workspace/build/about/index.html 
```

在生产服务器上，所有内容都将位于根 url 下，因此根相对链接在那里可以正常工作，但我也希望在我们的暂存预览服务器上可以查看构建。如何在我的玉模板上设置链接，以便它始终使用相对链接，例如脚本链接是： `../scripts/main.js`来自关于我们的页面，而它`scripts/main.js`来自主页。我想让两个页面都使用相同的翡翠模板，并且该模板确定了每个页面的相对链接应该是什么。

是否有某种获取相对路径函数可以在 Jade 模板中使用，基于 Wintersmith 中树中内容的位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-18T09:21:00.647

我使用特殊**的后处理**构建步骤遍历所有**生成的 HTML**文件**并将其中包含的链接转换**为其相关变体。

此方法**适用于任何模板语言**（例如[nunjucks](https://github.com/jbuck/wintersmith-nunjucks)），因为它不会修改模板，而是修改最终的可交付成果。

它不适用于 Wintersmith 的实时预览服务器。

我使用[Cheerio](https://github.com/MatthewMueller/cheerio) HTML 解析器。

核心功能是这样的：

```
var cheerio = require("cheerio");
var fs = require("fs");
$ = cheerio.load(fs.readFileSync(expandFileName("build/test.html"), 'utf-8'));

// change all links in the cheerio document from absolute to relative.
// document's absolute location is supposed to be /test/test.html
rebaseDocument("/test/test.html", $);

fs.writeFileSync(expandFileName("build/test.new.html"), $.html());
return;

function rebaseDocument(documentLocation, $) {
  debugLog(documentLocation);
  rebaseElements(documentLocation, $, "a", "href");
  rebaseElements(documentLocation, $, "link", "href");
  rebaseElements(documentLocation, $, "script", "src");
  rebaseElements(documentLocation, $, "img", "src");
}

function rebaseElements(documentLocation, $, tagName, attributeName) {
  $(tagName).each(function() { $(this).attr(attributeName, rebaseLink(documentLocation, $(this).attr(attributeName))); });
}

function rebaseLink(documentLocation, link) {
  if (link == null)
    return link;

  // check if link denotes absolute hyperlink. If so, nothing to do here
  // absolute hyperlink is either scheme:// or protocol relative url //
  if ((new RegExp('^([a-z]+://|//)')).test(link))
    return link;

  // check another special forms of absolute hyperlinks
  if (link.substring(0, 7) == "mailto:")
    return link;

  // if link is already relative, nothing to do
  if (link.charAt(0) != '/')
    return link;

  if (documentLocation.charAt(0) != '/')
    documentLocation = '/' + documentLocation;

  var path = require("path");
  var documentName = path.basename(documentLocation);
  var from = path.dirname(documentLocation);
  var newLink = path.relative(from, link).replaceAll("\\", "/");

  // reduce 'document.htm#anchor' to '#anchor'
  if (newLink.slice(0, documentName.length + 1) == documentName + '#')
    newLink = newLink.slice(documentName.length);

  return newLink;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-22T19:13:43.487

我一直在使用的一种解决方案是使用不同的配置进行构建：

所以不要使用默认的“config.json”，它会弄乱你的构建设置一个专门用于构建的配置，例如：“config.build.json”设置你的url，你希望它们如何设置，当你'完成，只需运行：

```
wintersmith build -c config.build.json 
```

（同样，这可能是众多解决方案之一，我也在不断寻找更好的部署解决方案）

# visual-studio - 保存文件时阻止自定义工具运行

> ID：15450575
> 
> 赞同：2
> 
> 时间：2013-03-16T14:40:14.383
> 
> 标签：visual-studio

Visual Studio 有一个称为[自定义工具](http://www.codeproject.com/Articles/31257/Custom-Tools-Explained)的功能。每次我保存文件或单击“运行自定义工具”菜单项时，自定义工具都会运行。有没有办法让它*只*在我单击“运行自定义工具”菜单项时运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T17:45:54.547

我不相信有任何方法可以从自定义工具代码中进行区分。这可能是显而易见的，但听起来普通的 VS 插件更适合您的情况。

# ios - 如何获取 iPhone 5 的基站数据？

> ID：15450578
> 
> 赞同：7
> 
> 时间：2013-03-16T14:40:22.337
> 
> 标签：ios, iphone-5, core-telephony, ios6.1, signal-strength

我正在尝试使用我的 iPhone 5 获取手机信号塔数据。我一直在使用 VAFieldTest ( [https://github.com/valexa/VAFieldTest](https://github.com/valexa/VAFieldTest) ) 进行测试。在第 61 行的文件 VAFieldTestViewController.m ( [https://github.com/valexa/VAFieldTest/blob/master/Classes/VAFieldTestViewController.m](https://github.com/valexa/VAFieldTest/blob/master/Classes/VAFieldTestViewController.m) ) 中，对于 iPhone 4S 和 5，它总是返回 0。

经查，有人说苹果把modem (for iPhone 4S) Infineon Gold换成了高通mdm6610，而iPhone 5用的是MDM9615M，导致方法调用无效。

那么，还有其他方法可以获取 iPhone 5 的基站数据吗？

注意：这个问题是针对 iPhone 5 的。它不是其他问题的重复，因为它们只适用于 iPhone 4。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-14T06:39:55.437

您是否尝试过 Apple 的核心电话框架。

CTCarrier 类参考可能会有所帮助。

[https://developer.apple.com/library/ios/documentation/NetworkingInternet/Reference/CTCarrier/Reference/Reference.html#//apple_ref/doc/uid/TP40009596](https://developer.apple.com/library/ios/documentation/NetworkingInternet/Reference/CTCarrier/Reference/Reference.html#//apple_ref/doc/uid/TP40009596)

# android - 构建和编译 Samsung Glaxy S 3 mini

> ID：15450579
> 
> 赞同：1
> 
> 时间：2013-03-16T14:40:29.797
> 
> 标签：android, flush, android-build, rom

我需要在 linux 平台上获取 Android 源代码来构建和编译我自己的 ROM，比如这个例子[Building the System](http://source.android.com/source/building.html)。

但我发现 Galaxy S 3 mini 未列出用于构建设备[Building for devices](http://source.android.com/source/building-devices.html)。

所以我们可以构建和编译之前链接中列出的设备？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T14:56:03.283

Android 开源项目（简称 AOSP）只支持谷歌认可的手机。那主要是**Nexus**系列。

如[构建设备](http://source.android.com/source/building-devices.html)页面所述，您还需要专有的二进制驱动程序来构建工作系统。同样，Google 仅提供 Nexus 设备驱动程序。

因此，从 AOSP 为非 Nexus 设备构建自定义 ROM*可能*需要大量工作。您应该为您的设备搜索现有的自定义 ROM。也许你可以从那里得到帮助

# php - 网络导航时是否创建了隐式 cookie？/httpOnly 标志

> ID：15450583
> 
> 赞同：0
> 
> 时间：2013-03-16T14:40:56.867
> 
> 标签：php, security, session, cookies, httponly

在我的网站中，我没有使用任何类型的 cookie，一切都通过服务器端会话处理。（完全没有`setcookie`指导）

但是，仍然使用 Acunetix 网站漏洞检查器，我得到一个关于“没有设置 httpOnly 标志的会话 cookie”的报告

有什么我想念的吗？反正有任何隐式cookie吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T14:43:29.367

会话正在使用 cookie！除非您在 URL 中传输会话 ID（这也不好），否则会话会设置 cookie。会话由服务器端数据存储和*会话 cookie*组成，其中包含*将客户端与服务器端数据相关联的*随机 id 。

# matlab - TreeBagger 方法中使用的“猫”参数是什么

> ID：15450584
> 
> 赞同：0
> 
> 时间：2013-03-16T14:41:07.943
> 
> 标签：matlab

我正在关注教程并尝试实现 TreeBagger 方法。我有一个问题，因为我无法理解部分代码。

```
b = TreeBagger(nTrees,X,Y,'oobpred','on','cat',6,'minleaf',leaf(ii)); 
```

谁能告诉我什么是“猫”以及数字 6 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T18:36:58.000

TreeBagger 的构造函数：

```
%   In addition to the optional arguments above, this method accepts all
%   optional CLASSREGTREE arguments with the exception of 'minparent'.
%   Refer to the documentation for CLASSREGTREE for more detail. 
```

'cat' 不是 TreeBagger 的有效输入对之一，因此它必须是 CLASSREGTREE 的输入。查看 classregtree 的输入对，唯一接近“cat”的输入对是“categorical”，它表示：

```
%      'categorical' Vector of indices of the columns of X that are to be
%                   treated as unordered categorical variables 
```

如果您查看 statgetargs.m，特别是这一行：

```
i = strmatch(lower(pname),pnames); 
```

只要第一部分拼写正确，它将允许任何参数。pnames 将包含一个有效字符串的单元数组（其中一个将是“分类”），而 pname 将包含一个用于比较 pnames 的字符串（最终，这将包含“cat”）。如果您只输入输入字符串的第一部分，它仍然可以工作。即对我来说这有效：

```
EDU>> a = TreeBagger(nTrees,X,Y,'oobpr','on','cat',6,'minle',leaf(ii));
EDU>> b = TreeBagger(nTrees,X,Y,'oobpred','on','cat',6,'minleaf',leaf(ii));
EDU>> isequal(a,b)

ans =

     1 
```

如果 'cat' 被更改，它就不起作用，因为它明确存储了 'cat'，因为它在 TreeArgs 下拼写。无论如何，“猫”被视为 classregtree 的“分类”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T23:31:38.870

`cat`被视为 的`categorical`输入参数的缩写`classregtree`，它指定`X`应将 中的第六个变量视为分类变量。

# jquery - 被 Div 隐藏的下拉菜单

> ID：15450595
> 
> 赞同：0
> 
> 时间：2013-03-16T14:42:22.637
> 
> 标签：jquery, html, css

以下是我的 Web 应用程序中的 CSS 类

```
#header {
    position:absolute;
    left:0px;
    top:0px;
    background:url(Images/header.png);
    background-size:100% 86%;
    width:100%;
    height:16%;
    z-index:200;
}
#centre {
    position:absolute;
    left:0px;
    top:16%;
    width:100%;
    height:80%;
        z-index:101;

}
#smoothmenu1 {
    position:absolute;
    right:0px;
    width:50%;
    bottom:0px;
    height:26px;
    z-index:180;
} 
```

**smoothmenu1** `div`嵌套在标题中`div`，平滑菜单 div 包含一个下拉菜单栏，由于某些原因，在下拉菜单项似乎隐藏在中心 div 后面。我正在尝试在 smoothmenu1 div 中添加菜单栏，如下所示。[http://www.dynamicdrive.com/dynamicindex1/ddsmoothmenu.htm](http://www.dynamicdrive.com/dynamicindex1/ddsmoothmenu.htm)

以下是 HTML 部分

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<link rel="stylesheet" type="text/css" href="CSS/ddsmoothmenu.css"/>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
<script type="text/javascript" src="JS/ddsmoothmenu.js"> </script>
<script type="text/javascript">
ddsmoothmenu.init({
    mainmenuid: "smoothmenu1", //menu DIV id
    orientation: 'h', //Horizontal or vertical menu: Set to "h" or "v"
    classname: 'ddsmoothmenu', //class added to menu's outer DIV
    //customtheme: ["#1c5a80", "#18374a"],
    contentsource: "markup" //"markup" or ["container_id", "path_to_menu_file"]
})
$(document).ready(function() {
                $('#centre').load("initCentre.html"); 
});
</script>
<style type="text/css">
<!--
#main {
    position:absolute;
    left:0px;
    top:0px;
    width:100%;
    height:100%;
    z-index:1;
}
#header {
    position:absolute;
    left:0px;
    top:0px;
    background:url(Images/header.png);
    background-size:100% 88%;
    width:100%;
    height:14%;
    z-index:250;
}
#centre {
    position:absolute;
    left:0px;
    top:16%;
    width:100%;
    height:82%;
        z-index:300;

}
#smoothmenu1 {
    position:absolute;
    right:0px;
    width:50%;
    bottom:0px;
    height:26px;
    z-index:220;
}
#footer {
    position:absolute;
    left:0px;
    bottom:0px;
    width:100%;
    height:4%;
    z-index:2;
}
-->
</style>
</head>
<body>
<div id="main">
<div id="header">
<div id="smoothmenu1" class="ddsmoothmenu">
<ul>
<li><a href="#">Home</a></li>
<li><a href="#">menu3</a>
  <ul>
  <li><a href="http://www.dynamicdrive.com">Sub Item 1.1</a></li>
  <li><a href="http://www.dynamicdrive.com">Sub Item 1.2</a></li>
  <li><a href="http://www.dynamicdrive.com">Sub Item 1.3</a></li>
  <li><a href="http://www.dynamicdrive.com">Sub Item 1.4</a></li>
  <li><a href="http://www.dynamicdrive.com">Sub Item 1.2</a></li>
  <li><a href="http://www.dynamicdrive.com">Sub Item 1.3</a></li>
  <li><a href="http://www.dynamicdrive.com">Sub Item 1.4</a></li>
  </ul>
</li>
<li><a href="http://www.dynamicdrive.com">menu2</a>
  <ul>
  <li><a href="http://www.dynamicdrive.com">Sub Item 1.1</a></li>
  <li><a href="http://www.dynamicdrive.com">Sub Item 1.2</a></li>
  <li><a href="http://www.dynamicdrive.com">Sub Item 1.3</a></li>
  <li><a href="http://www.dynamicdrive.com">Sub Item 1.4</a></li>
  <li><a href="http://www.dynamicdrive.com">Sub Item 1.2</a></li>
  <li><a href="http://www.dynamicdrive.com">Sub Item 1.3</a></li>
  <li><a href="http://www.dynamicdrive.com">Sub Item 1.4</a></li>
  </ul>
</li>
<li><a href="http://www.dynamicdrive.com">menu1</a></li>
<li><a href="http://www.dynamicdrive.com/style/">menu3</a></li>
</ul>
<br style="clear: left" />
</div>
</div>
<div id="centre"></div>
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T16:52:38.080

你的`#centre`元素有一个更高的`z-index`- 尝试切换它们。

`absolute`稍微偏离主题：尽可能尝试在没有元素的情况下布置文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T16:55:22.790

您的 #center 的 z-index 为 300，但 #header 和 #smoothmenu 分别为 250 和 220。300 更高，使其显示在其他两个 div 的顶部。如果您不希望它覆盖#header 和它的孩子，请将#center divs z-index 设置为小于标题。

# jquery - 点击打开子菜单，jquery

> ID：15450596
> 
> 赞同：2
> 
> 时间：2013-03-16T14:42:47.263
> 
> 标签：jquery, click

我希望如果我们单击一个包含子项的列表，子项 ul（子菜单）就会显示出来。标准菜单 - 我们看到的子菜单系统。我尝试了一个不起作用的代码。可能你有更好的主意？

[http://jsfiddle.net/JeremyCh/BjTYY/2/](http://jsfiddle.net/JeremyCh/BjTYY/2/)

```
<div class="menu">
  <ul>
    <li class="page_item page-item-2"><a href="/accueil/">Accueil</a></li>
    <li class="page_item page-item-8"><a href="/disciplines/">Disciplines</a>
      <ul class='children'>
        <li class="page_item page-item-19"><a href="/disciplines/galerie/">Galerie</a></li>
        <li class="page_item page-item-21"><a href="/disciplines/definitions/">Définitions</a></li>
      </ul>
    </li>
    <li class="page_item page-item-10"><a href="/professeurs/">Professeurs</a></li>
    <li class="page_item page-item-11"><a href="/planning/">Planning</a></li>
    <li class="page_item page-item-12"><a href="/tarifs/">Tarifs</a>
      <ul class='children'>
        <li class="page_item page-item-23"><a href="/tarifs/cours/">Cours</a></li>
        <li class="page_item page-item-25"><a href="/tarifs/location/">Location</a></li>
      </ul>
    </li>
    <li class="page_item page-item-13"><a href="/contact/">Contact</a></li>
  </ul>
</div>

jQuery(document).ready(function() {
    jQuery('.menu').find('> li').click(function() {
        jQuery('.menu > li').not(this).find('ul').slideUp();
        jQuery(this).find('ul').stop(true, true).slideToggle(300);
        return false;
    }); 
}) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T15:09:30.853

给你。。

您将类分配`.menu`给错误的元素，将其分配给主ul，现在您可以相应地设置样式..

**html**

```
 <ul class="menu">
    <li class="page_item page-item-2"><a href="#">Accueil</a></li>
    <li class="page_item page-item-8 current_page_item"><a href="#">Disciplines</a>
  <ul class='children'>
    <li class="page_item page-item-19"><a href="/disciplines/galerie/">Galerie</a></li>
    <li class="page_item page-item-21"><a href="/disciplines/definitions/">Définitions</a></li>
  </ul>
</li>
<li class="page_item page-item-10"><a href="/professeurs/">Professeurs</a></li>
<li class="page_item page-item-11"><a href="/planning/">Planning</a></li>
<li class="page_item page-item-12"><a href="/tarifs/">Tarifs</a>
  <ul class='children'>
    <li class="page_item page-item-23"><a href="/tarifs/cours/">Cours</a></li>
    <li class="page_item page-item-25"><a href="/tarifs/location/">Location</a></li>
  </ul>
</li>
<li class="page_item page-item-13"><a href="/contact/">Contact</a></li> 
```

**js**

```
$('.menu').find('> li').click(function() {
$('.menu > li').not(this).find('ul').slideUp();
$(this).find('ul').stop(true, true).slideToggle(400);
return false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T15:08:04.430

尝试将 JQuery 中的选择器从`jQuery('.menu').find('> li')`和`jQuery('.menu > li')`更改为`jQuery('.menu').find('> ul > li')`和`jQuery('.menu > ul > li')`。

据我所知，`>`选择器选择直接子后代，即在本例中为 ul，因此 li 不是 div.menu 元素的直接子后代。

# c++ - 用这个技巧从外部访问受保护的成员，但这有效吗？

> ID：15450602
> 
> 赞同：4
> 
> 时间：2013-03-16T14:43:27.947
> 
> 标签：c++

如果我有以下课程：

```
class Foo
{
protected:
    int i;
public:
    Foo() : i(42) {}
}; 
```

自然，我无法从外部访问受保护的成员，但我可以做这个小技巧：首先我创建一个继承 Foo 的新类：

```
class Foo2 : public Foo
{
public:
    int GetI() { return i; }
}; 
```

现在，每当我有 Foo 的实例或指向此类实例的指针时，我都可以通过强制转换访问受保护的成员（因为我不使用任何其他成员）：

```
Foo *f = new Foo();
Foo f2;
std::cout << ((Foo2*)f)->GetI() << std::endl;
std::cout << (reinterpret_cast<Foo2&>(f2)).GetI() << std::endl; 
```

我明白为什么会这样，但是会有什么不好的后果吗？编译器不介意，没有任何运行时检查。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T14:46:59.813

```
reinterpret_cast<Foo2&>(f2)).GetI() 
```

从技术上讲，这是未定义的行为。所以它可能会起作用，但不是必须的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T15:00:14.887

您正在将对象向下转换为`Foo`对象`Foo2`。

> 向下转型是从基类到派生自基类的类的强制转型。只有在运行时寻址的对象实际上是在寻址派生类对象时，向下转换才是安全的

为了保护您的代码，您必须使用`dynamic_cast`检查向下转换是否有效。

不建议使用`reinterpret_cast`向下铸造。使用`static_cast`或`dynamic_cast`。

阅读大量文章，许多人写道，*不要*像你一样使用向下转换。一个危险的例子是有一个`virtual void GetI()`in `Foo`。

# qt5 - Qt 是在没有 ICU 支持的情况下构建的，WebKit 被禁用。VS2012

> ID：15450606
> 
> 赞同：5
> 
> 时间：2013-03-16T14:43:42.263
> 
> 标签：qt5, icu

我想在 Windows 7 x64 中编译 QT 5.0.1，但是当我配置 qt 时，我得到：

Qt 现在配置为构建。只需运行 nmake。要重新配置，请运行 nmake confclean 并配置。

*   d:/Libraries/Qt/5.0.1/qtbase/bin/qmake d:/Libraries/Qt/5.0.1/qtsdk.pro 项目消息：WebKit：Qt 是在没有 ICU 支持的情况下构建的，WebKit 已禁用。

我在我的机器上编译了 ICU 50，并且对 icu、x32 发布和调试模式进行了测试，但它们都失败了，但 x64 很好。我写了系统变量 ICU/bin 和 ICU/bin64。

所以，请告诉如何用 ICU 和 WebKit 编译 Qt。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T05:56:35.567

下面是一个示例构建配置：

```
configure \
    -prefix C:\Qt\Qt5.0.1 -platform win32-msvc2012 -opensource -c++11 \
    -make tools -make libs -qt-sql-sqlite -no-openssl \
    -icu \
    -I D:\Projects\icu4c-51_1\icu\include \
    -L D:\Projects\icu4c-51_1\icu\lib64 
```

要包含 Webkit，您必须启用`-icu`并将其包含和库路径添加到命令选项中。

ICU 构建类型必须与 Qt 相同，即 x86 或 x64。

# drupal - Drupal 7 菜单更改

> ID：15450611
> 
> 赞同：1
> 
> 时间：2013-03-16T14:44:31.553
> 
> 标签：drupal, menu, preprocessor, hook

我有一个 Drupal 7 菜单，机器名称是“主菜单”。

`li`我想每 3 个标签添加一个包装器以使用 CSS 进行操作。

我已经在使用 jQuery slice 来做这件事，但是页面加载的最终结果不是我所期望的。

我可以在普通模板中做到这一点，但很可能我需要预处理 template.php 中的菜单，而我实际上不知道该怎么做。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T00:15:40.817

您可能想要使用[theme_menu_link](http://api.drupal.org/api/drupal/includes!menu.inc/function/theme_menu_link/7 "主题菜单链接") 或者您可以使用[:nth-child](http://css-tricks.com/how-nth-child-works/) CSS 选择器来做您需要的事情。

# php - 代码点火器搜索

> ID：15450613
> 
> 赞同：1
> 
> 时间：2013-03-16T14:44:33.740
> 
> 标签：php, mysql, codeigniter, search

你好我有小问题

我想按名称在mysql中搜索

我在搜索模型中有这个代码

```
 $this->db->limit($limit, $start);
        $this->db->like("name",$by);    
        $res = $this->db->get('walls');
            if ($res->num_rows() > 0)
                return $res->result(); 
```

$by = "megan" 的结果；正在工作中

但是当 $by = "megan fox"; 不管用

在 mysql 名称中，我有“megan fox”；

我尝试了 urldecode 但无济于事。

我使用codeigniter框架..

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T14:58:15.537

```
 $this->db->limit($limit, $start);
        $this->db->like("name",$by);    
        $res = $this->db->get('walls');
            if ($res->num_rows() > 0)
                return $res->result(); 
```

您可能想在子句示例中添加`BOTH`, `LEFT`,`RIGHT``like()`

```
$this->db->like("name",$by,'BOTH'); // left and right wild card %name%
$this->db->like("name",$by,'LEFT'); // left  wild card %name
$this->db->like("name",$by,'RIGHT'); // right wild card name% 
```

您可以在[http://ellislab.com/codeigniter/user-guide/database/active_record.html阅读更多内容](http://ellislab.com/codeigniter/user-guide/database/active_record.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T21:38:57.510

您可以先将`$by`变量拆分为单独的值，如下所示：

```
$by = explode(" ", $by); 
```

然后尝试像这样制作like子句

```
$this->db->like("name",$by[0]);
$this->db->or_like("name",$by[1]); 
```

它会产生这样的东西

```
 WHERE name LIKE '%megan%' OR name LIKE '%fox%' 
```

这假设您总是将 2 个变量传递给`$by`，用空格分隔。您必须对其进行调整以确保它在每种情况下都能正常工作，例如，当只有一个变量传递给您时，`$by`您应该对其进行检查。

请注意，这比将姓名和姓氏拆分为表中的两个单独字段并在每个字段中查询特定姓名或姓氏要慢得多。如果您关心优化，您应该这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T06:38:26.557

使用 urldecode 函数来解决这个在你的模型中试试这个

```
 $by= urldecode($by);

    $this->db->limit($limit, $start);
    $this->db->like("name",$by);    
    $res = $this->db->get('walls');
        if ($res->num_rows() > 0)
            return $res->result(); 
```

# list - 将列表复制到 SpreadSheetGear Irange

> ID：15450614
> 
> 赞同：1
> 
> 时间：2013-03-16T14:44:38.610
> 
> 标签：list, entity-framework-4, spreadsheetgear

我有以下代码：

```
 using (CPASEntities ctx = new CPASEntities())
        {
            IWorksheet ws = wb.Worksheets[0];
            ws.Name = "Summary";
            var tsm = (from x in ctx.tblTimesheetMasters
                       where x.TSID == TSID
                       select new
                       {
                           TimesheetID = x.TSID,
                           Comments = x.TSComments,
                           Vendor = x.tblVendor.Vendor_Name,
                           StartDate = x.TSStartDate,
                           Author = x.TSAuthor,
                           Approver = x.TSApprover,
                           Override_Approver = x.TSOverrideApprover,
                           Status = x.tblTimesheetStatu.TSStatusDesc
                       }
                      ).ToList();
            SpreadsheetGear.IRange range = ws.Cells["A1"];
            // I want to copy the entire tsm list to this range, including headings.

        } 
```

正如评论所述，我想将整个列表放入从 A1 开始的 ws 工作表中。我包含代码以防更容易使用不同的构造。FWIW，只有一个条目... TSID 是主键。当然，如果这很重要，我可以使用 .FirstorDefault() 构造。我认为这并不重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T22:46:27.003

您的范围只有一个单元格。您需要一个足够大的范围来包含列表将填充的所有单元格。

要使用列表填充您的工作表，您可以执行以下操作。

```
 int iRow = 0;
    int iCol = 0;
    if (tsm.Count() > 0)
    {
      foreach (var prop in tsm[0].GetType().GetProperties())
      {
        ws.Cells[iRow, iCol].Value = prop.Name;
        iCol++;
      }
      iRow++;
      foreach (var t in tsm)
      {
        iCol = 0;
        foreach (var prop in t.GetType().GetProperties())
        {
          ws.Cells[iRow, iCol].Value = prop.GetValue(t, null);
          iCol++;
        }
        iRow++;
      }
    } 
```

如果你想要一个范围，你可以添加这一行。

```
SpreadsheetGear.IRange range = ws.Cells[0, 0, iRow - 1, iCol - 1]; 
```

# php - POST 到页面并以文本形式返回

> ID：15450617
> 
> 赞同：-4
> 
> 时间：2013-03-16T14:45:00.897
> 
> 标签：php, jquery, html, ajax

下面我有一个函数来获取 php 页面的回声。注意：这个回声通常只是一种颜色（绿色、蓝色等）。我希望能够 POST 到那个 php 页面并且仍然只返回一个我可以应用于变量 $test 的文本。

基本上，简而言之，我希望能够做与下面相同的事情，而且还可以将变量发布到 php 页面。

```
$(function(){
   var test = "";
   function loadData() {  
      $.get("roomdata.php", function(test) {
         alert(test);
         setTimeout(loadData, 10000);
      }, 'text'); 
   }
   loadData();
}); 
```

谢谢！- 一直试图弄清楚这一点。

注意：我昨天发布了类似的内容，但这个可能更清晰并且领先一步。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T14:48:41.280

您可以使用 ajax 调用[`$.ajax`](http://api.jquery.com/jQuery.ajax/)

```
$.ajax({
 type: "POST",
 url: "process.php",
 data: {
   abc: 'string' //send this to the php script
 },
cache: false
}).done(function(msg) {
 alert(msg); //alert what the php script says
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T14:51:43.897

请参阅[jQuery.post()](http://api.jquery.com/jQuery.post/)。

像这样使用它：

```
$.post('roomdata.php',
    { varname: 'data' }, // varname is whatever variable name expected in POST
    function(response) {
        var return_value = data; // that's the data returned.
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T14:49:31.547

如果您[检查文档](http://api.jquery.com/jQuery.get/)（始终检查文档！），那么您会发现这会起作用：

```
$.get('page.php',
      { variable: 'someVar' },
      function(data) {
      ...
}); 
```

> jQuery.get( url [, data ] [, success(data, textStatus, jqXHR) ] [, dataType ])

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T14:50:27.973

包括这个:)祝你好运..

```
 var request =$.ajax({
        type: "POST",
        url: "HANDLEPOST.php",
        data: { testvar : test } });
        request.done(function(msg) {
          $("#out").html("<div>" + msg + "</div>");
        }); 
```

# c# - 将 ref 与列表一起使用以及列表如何保持更新

> ID：15450619
> 
> 赞同：1
> 
> 时间：2013-03-16T03:01:29.520
> 
> 标签：c#, parameters, arguments, keyword, ref

我正在写一个游戏，将有一堂课只为我在世界上的碰撞。我想在它的构造函数中传递两个列表，一个包含所有敌人，另一个包含玩家发射的所有子弹。

这是在 XNA 中完成的 2d 船舶游戏，我应该这么说，但我想在这里发帖，因为它更多地与 C#`ref`关键字有关。如果我在将列表传递给它时在构造函数中使用 ref 关键字。

现在，如果我开始弄乱列表中的元素，删除和添加元素，修改等，因为它们是通过引用传递的，所以我不必将列表重新传递到类中，如果列表本身包含在其他类中吗？

```
public Collsion_manager(ref List<Bullet> bullets_world, ref List<Enemy_class> enemies_world)
{
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T04:54:32.957

通常，您希望避免将引用类型（如`List<T>`）传递给`ref`. 您可以传入`List<T>`s 并调用您想要的任何方法，并且更改将很好地进行（如`.Add()`, `.Remove()`,`.Sort()`等）。您只需要传入`List<T>`一次（例如在构造函数中），即使您不使用`ref`.

它的不同之处在于，当您传递`List<T>`by时，您传递的是对**变量**`ref`参数的引用（指针），而不是**object**。如果您想为**变量****分配**一个新的，这只会产生影响。******`List<T>`******

 ******我做了一个小程序来说明这种差异。

```
class Program
{
    static void Main(string[] args)
    {
        List<int> listA = new List<int> { 1, 2, 3 };
        List<int> listB = new List<int> { 1, 2, 3 };

        Update(listA);
        UpdateRef(ref listB);

        Console.WriteLine("listA");
        foreach (var val in listA)
            Console.WriteLine(val);

        Console.WriteLine("listB");
        foreach (var val in listB)
            Console.WriteLine(val);
    }

    static void Update(List<int> list)
    {
        list = new List<int>() { 4, 5, 6 };
    }

    static void UpdateRef(ref List<int> list)
    {
        list = new List<int>() { 4, 5, 6 };
    }
} 
```

这是程序产生的输出：

```
listA
1
2
3
listB
4
5
6 
```

注意如何`listB`包含新的`List<T>`但`listA`不包含。这是因为我们有一个对**变量** `listB`的引用。******

# c++ - 将问题与定义为静态的存储类相关联

> ID：15450623
> 
> 赞同：0
> 
> 时间：2013-03-16T14:45:22.460
> 
> 标签：c++, visual-c++, dll, static, linker

在 .dll 文件上

```
//SWC.h

#ifndef _SWC_
#    define _SWC_
#    define SWC_CALL __declspec(dllexport)
#else
#    define SWC_CALL __declspec(dllimport)
#endif

namespace SWC
{

    struct SWC_CALL Mouse
    {
        //interface
    };

    class SWC_CALL SWC_Base : public someClass1, public someClass2
    {

        static Mouse mouse;

    };

    //other classes goes here...
}

//SWC_Base.cpp
namespace SWC
{

    Mouse SWC_Base::mouse; //needed, to compile

    //other SWC_Base function definition

} 
```

在 .exe 文件上

用`static struct Mouse mouse`我定义的`SWC_Base`我得到链接错误

我通过在此文件上再次重新定义它来解决我的问题

```
//main.cpp

#include "SWC.h"

#pragma comment (lib, "..\\SWC")

SWC::Mouse SWC::SWC_Base::mouse; //<- why do I need to redefine it again?

int main()
{
    //...

    return 0;

} 
```

我已经在它的 .cpp 文件上定义了 SWC_Base::mouse，为什么我需要在使用它的文件上重新定义它？我知道我可能会遇到更多问题，因为我的 .dll 项目正在增长，上面有静态变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T15:01:37.103

如果您的调用代码将使用`__declspec (dllimport)`此麻烦将消失 :)

```
#ifdef EXPORTING_SWC
  #define SWC_CALL __declspec(dllexport)
#else
  #define SWC_CALL __declspec(dllimport)
#endif 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T19:22:08.243

您已经在头文件中围绕您的定义添加了一个 anymous `namespace { }`（如果您发布了真实代码）。每个匿名命名空间都会被编译器翻译成编译单元特定的命名空间。因此，您总是在新命名空间中获得一个新类。

要解决问题，您可以

*   将声明、定义和所有用途移至一个源文件
*   使用命名空间

# nxt - 我可以将用 C# 编写的程序下载到 nxt 2.0 砖中吗？

> ID：15450627
> 
> 赞同：1
> 
> 时间：2013-03-16T14:45:48.397
> 
> 标签：nxt, lego, mindstorms

我使用 C# 语言和[http://www.mindsqualls.net/](http://www.mindsqualls.net/)库。但我找不到如何将我的程序下载到砖中。其实，有可能吗？或者我只需要通过蓝牙控制我的 nxt 2.0 机器人？是否有任何语言/库允许将程序下载到砖块中，或者只有 Mindstorms nxt 2.0 可视化编辑器才有可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-03T16:57:13.133

您链接的 MindSqualls 网站上的第一句话：“MindSqualls 是一个 .Net 库，用于*远程*控制您的 LEGO MINDSTORMS NXT 或 NXT 2.0 机器人……从您的 PC……通过蓝牙或 USB 连接。” 所以你的问题的答案是：不。如果您能够改用 Java，请尝试 LejosNXJ ( [http://www.lejos.org/](http://www.lejos.org/) )。LeJOS 带有自己的固件、Mindstorms 驱动程序和 Java 子集，让您可以在砖块上运行程序。

# c++ - 在这种情况下如何使成员函数成为朋友函数？

> ID：15450628
> 
> 赞同：1
> 
> 时间：2013-03-16T14:45:50.060
> 
> 标签：c++, function, friend, incomplete-type

我对如何使用友元函数完成以下操作有点困惑。

假设我有一个类 A，其成员函数“f”将被声明为类 B 的朋友。

据我了解，正常的解决方案是这样的：

定义 A 类，仅声明未定义“f”

定义 B 类，包括“f”的朋友声明

定义'f'

现在，如果 A 类具有 B 类类型的数据成员或 B 类型元素的容器，如 vector < B >，该怎么办。

前向声明 B 类似乎有效（即没有编译器警告/错误），但我不确定它是否符合 C++11 标准。此外，这样的解决方案不允许我使用 B 类的构造函数为 A 的 B 类类型成员提供类内初始化程序。按照 C++11 完成所有这些的最佳方法是什么?

我尝试从标准本身中找到解决方案，但找不到提到这种情况。如果有人能指出我会很高兴。

PS我真的是一个初学者，所以请不要在你的答案中假设。不过我不介意详细的答案:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T15:03:53.070

您应该阅读有关此问题的 MSDN 文章：**[Class Member Functions and Classes as Friends](http://msdn.microsoft.com/en-us/library/ahhw8bzz%28v=vs.100%29.aspx)**

基本上你需要做的是有一个`A`带有 function的类类型`f()`，然后你在类类型中声明`B`存在一个函数`A::f()`，它将成为你的朋友。

MSDN 示例很好地说明了这一点：

```
class A {
public:
   int Func1( B& b );

private:
   int Func2( B& b );
};

class B {
private:
   int _b;

   // A::Func1 is a friend function to class B
   // so A::Func1 has access to all members of B
   friend int A::Func1( B& );
};

int A::Func1( B& b ) { return b._b; }   // OK
int A::Func2( B& b ) { return b._b; }   // C2248 
```

# android - 从未调用过 EditText 的 onFocusChange

> ID：15450629
> 
> 赞同：4
> 
> 时间：2013-03-16T14:46:05.777
> 
> 标签：android, android-layout

我喜欢使用来检测用户对 EditText 的关注

```
IDEditTxt.setOnFocusChangeListener(new View.OnFocusChangeListener() {
            @Override
            public void onFocusChange(View v, boolean hasFocus) {
               Toast.makeText(getBaseContext(),
                ((EditText) v).getId() + " has focus - " + hasFocus,
                Toast.LENGTH_LONG).show();
            }
       }); 
```

但是当我将光标设置在它上面时，永远不会调用 onFocusChange。当我研究时，发现EditText xml应该有

```
android:focusableInTouchMode="true"
    android:focusable="true" 
```

所以我把这两行放在EditText的xml中，还是没有调用。我的意图是，如果用户关注 EditText，我喜欢显示 AlertDialog 而不是键盘，这样用户在对话框上的选择就会显示在 EditText 上。我该如何实施？我在哪里可以为该实施提供类似的程序？谢谢

# svn - SVN 的 Web API

> ID：15450635
> 
> 赞同：5
> 
> 时间：2013-03-16T14:46:31.370
> 
> 标签：svn, svn-api

我希望通过一些 Web API 提取更改日志。这样的事情可能吗？我宁愿不使用外部库来包装调用。

例如`GET http://repo/?branch=123&revision=789`，在修订版 789 中获取对分支 123 的更改。

（主要的是我不想在本地检查整个分支来查看其更改。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T02:03:44.213

`svn log`将 URL 和修订作为参数。

```
svn log http://repo/PATH_TO_BRANCH_123 -r 789 
```

查看[`svn help log`](http://svnbook.red-bean.com/en/1.7/svn.ref.svn.c.log.html)更多。

Subversion 没有分支的内部知识——它们是副本，没有什么特别之处。您可以将您的分支目录称为“叉子”或“勺子”，它的工作方式相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T14:31:23.213

SVN 使用 WebDAV 作为协议以 HTTP/HTTPS 与客户端进行通信。似乎SVNKit家伙在JAVA（服务器端）中有这种API。我认为您可以编写一个 JavaScript 库来处理它，我没有找到。

[http://www.oreillynet.com/pub/a/opensource/excerpts/9780596510336/webdav-and-autoversioning.html](http://www.oreillynet.com/pub/a/opensource/excerpts/9780596510336/webdav-and-autoversioning.html)

# c++ - STL 容器和内存管理 - 对象列表与对象指针列表

> ID：15450637
> 
> 赞同：4
> 
> 时间：2013-03-16T14:46:39.847
> 
> 标签：c++, list, pointers, memory-management, stl

我已经很好地查看了有关此主题的其他一些问题，并且（据我所知）没有一个解决如何正确地从包含动态分配内存的 stl 对象列表中删除项目与不包含动态分配内存的 stl 对象列表包含动态分配的内存。

我想使用对象列表。以这个对象为例（它不包含动态分配的内存）：

```
class MyPoint {

public:
    MyPoint(int _x,int _y)
    {
        x = _x;
        y = _y;
    }

private:
    int x;
    int y;

}; 
```

所以我可能会创建一个对象列表（不是指向它们的指针），向其中添加内容，然后删除一个元素：

```
list<MyPoint> myList;

myList.push_back(MyPoint(3,4));
myList.push_back(MyPoint(1,2));
myList.push_back(MyPoint(8,8));
myList.push_back(MyPoint(-1,2));

list<MyPoint>::iterator it;

it = myList.begin();
advance(it,2);
myList.erase(it); 
```

我的列表现在包含： (3, 4) (1, 2) (-1, 2)

*   问题 1a：我需要对擦除的对象做任何其他事情还是会处理内存？

*   问题 1b：如果程序结束，我需要对列表中剩余的对象做些什么吗？我是否需要将它们全部删除并以某种方式处理它们的内存？

好的，现在考虑该类的另一个版本，它允许 N 维空间中的一个点。即，我可以动态分配一个长度为 N 的数组来保存类中的 N 个点（我已经为您省去了实现，因为这里没有问题）。然后类的析构函数将使用“delete”删除动态分配的数组。

```
class MyDynamicPoint {

public:
    MyDynamicPoint(int N)
    {
        points = new int[N];
    }

    ~MyDynamicPoint()
    {
        delete points;
        points = NULL;
    }

private:
    int *points;
}; 
```

我现在可以创建一个指向对象的指针列表，而不是对象本身：

```
list<MyDynamicPoint*> myList;

myList.push_back(new MyDynamicPoint(8));
myList.push_back(new MyDynamicPoint(10));
myList.push_back(new MyDynamicPoint(2));
myList.push_back(new MyDynamicPoint(50));

list<MyDynamicPoint*>::iterator it;

it = myList.begin();
advance(it,2);
myList.erase(it); 
```

*   问题 2a - 以上是否正确？即因为这个新版本的类将包含一些动态分配的内存，这是否意味着我必须创建一个指向对象的指针列表，而不是对象本身？

*   问题 2b - 鉴于我刚刚从列表中删除了指针，我应该在哪里调用 delete 来处理对象中现在要删除动态内存的事实？还是stl list的erase方法调用对象的析构函数，照顾它？

非常感谢您的帮助，

最好的，

亚当

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T14:52:12.037

当你有一个类的数据成员具有自动存储持续时间（即它们的生命周期与此类的实例相关联）时，如下所示：

```
class MyPoint {
private:
    int x;
    int y;
}; 
```

并且您将使用`list<MyPoint> myList;`，那么这个实例`std::list`也是一个具有自动存储持续时间的对象，它将在容器被销毁时自动清理，它所包含的元素也是如此。***一切都得到照顾。***

但是后一个版本不是很幸运的选择……不仅你有一个保存指针的容器，你甚至决定创建一个`Point`将动态分配的类的数据成员。首先请注意，通过调用分配的所有内容都`new`应该通过调用释放，通过调用`delete`分配的所有内容都`new[]`应该通过调用释放`delete[]`。

在这种情况下，您在构造对象时分配内存并在对象被破坏时清理它：

```
MyDynamicPoint(int N)
{
    points = new int[N];
}
~MyDynamicPoint()
{
    delete[] points;
    points = NULL;
}
private:
int *points; 
```

您可以通过使用一些`std::vector`或`std::array`代替 C 样式的数组来实现相同的目的，并且您不必自己处理内存管理：

```
MyDynamicPoint(int N) : points(std::vector<int>(N, 0)) { }

private:
std::vector<int> points; 
```

该`std::vector`对象将为您处理内存管理。

最后一件事：当您动态分配一个元素并将其存储到容器中时：

```
myList.push_back(new MyDynamicPoint(8)); 
```

您需要自己释放此内存，从列表中删除指针是不够的：

```
list<MyDynamicPoint*>::iterator it;
...
delete *it;
myList.erase(it); 
```

因此，无论您想实现什么，***如果情况允许，请始终首选具有自动存储持续时间的对象***。没有什么比被迫手动处理内存管理并在以后处理诸如内存泄漏等令人不快的问题更糟糕的了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T14:53:14.040

> 问题 1a：我需要对擦除的对象做任何其他事情还是会处理内存？

你不需要做任何事情。

> 问题 1b：如果程序结束，我需要对列表中剩余的对象做些什么吗？我是否需要将它们全部删除并以某种方式处理它们的内存？

你不需要做任何事情。

> 问题 2a - 以上是否正确？

代码不正确。你违反[了三法则](http://en.wikipedia.org/wiki/Rule_of_three_%28C++_programming%29)。特别是，自动生成`MyDynamicPoint`的复制构造函数和赋值运算符将按位复制`points`指针。如果你复制 的一个实例`MyDynamicPoint`，你最终会得到两个共享同一个`points`指针的对象：

*   当其中一个对象超出范围时，另一个对象将变得不可用。
*   当第二个对象超出范围时，它的析构函数将尝试释放已经被释放的内存。这是[未定义的行为](http://en.wikipedia.org/wiki/Undefined_behavior)。

> 即因为这个新版本的类将包含一些动态分配的内存，这是否意味着我必须创建一个指向对象的指针列表，而不是对象本身？

不，不是那个意思。事实上，您可能应该继续按值存储对象。但是，您确实需要修复三法则。

> 问题 2b - 鉴于我刚刚从列表中删除了指针，我应该在哪里调用 delete 来处理对象中现在要删除动态内存的事实？还是stl list的erase方法调用对象的析构函数，照顾它？

由于您有一个原始指针列表，因此不会自动调用析构函数。解决这个问题的最简单方法是按值存储对象，或者使用`std::unique_ptr`or`std::shared_ptr`代替原始指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-06T04:47:06.837

我认为以下应该有效

```
MyPoint* ptr = myList.back();

delete ptr;

myList.pop_back(); 
```

或者

```
MyPoint* ptr = myList.back();

delete ptr;

myList.erase(ptr); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T14:51:06.837

对于问题 1，您无需执行任何操作。*当您按值*存储对象时，编译器和库将处理所有内容。

但是，当您像第二种情况一样存储指针时，您需要使用`delete`已分配的那些指针`new`，否则您将发生内存泄漏。

而且您必须在擦除*之前*删除指针，因为这会使迭代器无效：

```
delete *it;
myList.erase(it); 
```

# oracle - 返回重复计数时值不足

> ID：15450639
> 
> 赞同：0
> 
> 时间：2013-03-16T14:46:47.833
> 
> 标签：oracle, plsql, duplicates

我正在尝试在 Iracle 中创建一个存储过程，它应该从单个表中返回重复记录的计数。

我正在尝试将该计数的结果返回给用户。目前我收到错误“**错误（6,78）：PL/SQL：ORA-00947：没有足够的值”**

我究竟做错了什么？

```
CREATE OR REPLACE PROCEDURE DUPLICATECHECK (p_result OUT number)  
IS
theResult number;
BEGIN
   SELECT FIRST_NAME, LAST_NAME, COUNT(1) as "Duplicate Found" INTO theResult 
   FROM EMPLOYEE GROUP BY FIRST_NAME, LAST_NAME HAVING COUNT(*) > 1;
p_result := theResult;
END DUPLICATECHECK; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T14:54:23.867

你的问题是这一行：

```
SELECT FIRST_NAME, LAST_NAME, COUNT(1) as "Duplicate Found" INTO theResult 
```

具体来说，您将 3 个不同的列放入一个结果中，您没有足够的值。

因为您只在寻找一个值，但您应该只选择该值

```
select count(*)
  into p_result
  from ( select first_name, last_name
           from employee
          group by first_name, last_name
         having count(*) > 1 ) 
```

如果您必须使用可以直接在 OUT 参数中选择的过程，则不需要局部变量。为什么你使用过程而不是函数呢？

把它放在一起你得到：

```
create or replace function duplicatecheck ( 
         p_result out number ) is
begin

    select count(*)
      into p_result
      from ( select first_name, last_name
               from employee
              group by first_name, last_name
             having count(*) > 1 )

end duplicatecheck; 
```

如果您真的想强制执行唯一性，则应该创建一个[唯一约束](http://docs.oracle.com/cd/E11882_01/server.112/e25789/datainte.htm#CNCPT1642)，尽管我建议您不要这样做；不能保证您不会有两个同名的员工。

# vba - 通过 Find 函数进行字数统计返回的结果与宏不同

> ID：15450641
> 
> 赞同：1
> 
> 时间：2013-03-16T14:46:53.857
> 
> 标签：vba, ms-word, ms-office

我有一个字数统计功能，它查找突出显示或粗体和无下划线的文本，然后返回文档中符合该条件的字数。

但是，结果与 Word 中的 Find 函数返回的结果相差很大，有人知道为什么会出现这种差异吗？我是在重复计算吗？

```
Sub CountWords()

Dim rngWords As Range
Set rngWords = ActiveDocument.Content
Dim boldCount As Long, highlightCount As Long
Dim wordTotal As Long

Do
With rngWords.Find
    .Highlight = True
    .Forward = True
    .Execute
End With
If rngWords.Find.Found = True Then
    highlightCount = highlightCount + rngWords.Words.Count
Else
    Exit Do
End If
Loop

Set rngWords = ActiveDocument.Content

Do
With rngWords.Find
    .Font.Bold = True
    .Highlight = False
    .Font.Underline = wdUnderlineNone
    .Forward = True
    .Execute
End With
If rngWords.Find.Found = True Then
    boldCount = boldCount + rngWords.Words.Count
Else
    Exit Do
End If
Loop
wordTotal = boldCount + highlightCount
MsgBox "There are " & wordTotal & " words to be spread"
End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T16:34:37.647

Words 属性计算标点符号和段落标记。改变

```
highlightCount = highlightCount + rngWords.Words.Count 
```

到

```
highlightCount = highlightCount + rngWords.ComputeStatistics(wdStatisticWords) 
```

他们会匹配。

# c# - 使用 TagBuilder 和 ASP.NET MVC 4（使用 Razor 引擎）呈现 html 代码

> ID：15450646
> 
> 赞同：10
> 
> 时间：2013-03-16T14:47:02.133
> 
> 标签：c#, razor, asp.net-mvc-4

我想`li`使用 TagBuilder 呈现项目。

我的功能

```
public static string RenderListTag(this HtmlHelper helper, string labelText, string action, string controller, bool isAdmin, string listCssClass = "")
        {
            string value = string.Empty;

            TagBuilder li = new TagBuilder("li");
            TagBuilder anchor = new TagBuilder("a");
            UrlHelper urlHelper = new UrlHelper(HttpContext.Current.Request.RequestContext);

            if (string.IsNullOrEmpty(action) || string.IsNullOrEmpty(controller))
            {
                anchor.MergeAttribute("href", "#");
            }
            else
            {
                anchor.MergeAttribute("href", urlHelper.Action(action, controller, new
                {
                    area = isAdmin ? "Admin" : ""
                }));
            }

            anchor.SetInnerText(labelText);

            if (action.IsEqualWith(helper.ViewContext.RouteData.Values["action"].ToString()))
            {
                li.MergeAttribute("class", "active");
            }

            if (!string.IsNullOrEmpty(listCssClass))
            {
                li.MergeAttribute("class", listCssClass);
            }

            li.SetInnerText(anchor.ToString(TagRenderMode.Normal));

            return li.ToString(TagRenderMode.Normal);
        } 
```

当我使用以下代码调用时：

```
@Html.RenderListTag("Home", "Index", "Contents", false)
@Html.RenderListTag("About", "About", "Home", false)
@Html.RenderListTag("Contact", "Contact", "Home", false)
@Html.RenderListTag("Show toolbar", "", "", false, "options no-display")
@Html.RenderListTag("CMS", "Index", "Home", true) 
```

结果打印为文本而不是 html 标记。

```
<li class="active">&lt;a href=&quot;/Contents&quot;&gt;Home&lt;/a&gt;</li> <li>&lt;a href=&quot;/Home/About&quot;&gt;About&lt;/a&gt;</li> <li>&lt;a href=&quot;/Home/Contact&quot;&gt;Contact&lt;/a&gt;</li> <li class="options no-display">&lt;a href=&quot;#&quot;&gt;Show toolbar&lt;/a&gt;</li> <li class="active">&lt;a href=&quot;/Admin/Home&quot;&gt;CMS&lt;/a&gt;</li> 
```

我想打印 HTML 标签而不是文本。

我的错误在哪里？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-16T14:55:48.143

我发现我的错误:)

我用了

```
li.SetInnerText(anchor.ToString(TagRenderMode.Normal)); 
```

正确的方法是

```
li.InnerHtml = anchor.ToString(TagRenderMode.Normal); 
```

我将函数的类型从如下更改`string`为`MvcHtmlString`：

```
public static MvcHtmlString RenderListTag(this HtmlHelper helper, string labelText, string action, string controller, bool isAdmin, string listCssClass = "") 
```

函数的返回是：

```
return MvcHtmlString.Create(li.ToString()); 
```

现在，工作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-10-26T12:41:50.470

您必须从方法返回一个**MvcHtmlString**

```
public static MvcHtmlString RenderListTag(this HtmlHelper helper, string labelText, string action, string controller, bool isAdmin, string listCssClass = "")
{
    string value = string.Empty;

    TagBuilder li = new TagBuilder("li");
    TagBuilder anchor = new TagBuilder("a");
    UrlHelper urlHelper = new UrlHelper(HttpContext.Current.Request.RequestContext);

    if (string.IsNullOrEmpty(action) || string.IsNullOrEmpty(controller))
    {
        anchor.MergeAttribute("href", "#");
    }
    else
    {
        anchor.MergeAttribute("href", urlHelper.Action(action, controller, new
        {
            area = isAdmin ? "Admin" : ""
        }));
    }

    anchor.SetInnerText(labelText);

    if (action.IsEqualWith(helper.ViewContext.RouteData.Values["action"].ToString()))
    {
        li.MergeAttribute("class", "active");
    }

    if (!string.IsNullOrEmpty(listCssClass))
    {
        li.MergeAttribute("class", listCssClass);
    }

    li.SetInnerText(anchor.ToString(TagRenderMode.Normal));

    return new MvcHtmlString(li.ToString(TagRenderMode.Normal));
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-16T14:52:18.307

采用`@Html.Raw(Html.RenderListTag("CMS", "Index", "Home", true))`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T14:55:19.147

尝试将最后一行更改为：

`return helper.Raw(li.ToString(TagRenderMode.Normal)).ToHtmlString();`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-22T02:20:17.107

对于这样的情况，我在HttpUtility类的静态方法HtmlDecode中有一个好朋友。尝试：返回 MvcHtmlString.Create(HttpUtility.HtmlDecode(li.ToString(TagRenderMode.Normal)));

高温高压

# python - mpmath 中的元素操作

> ID：15450647
> 
> 赞同：6
> 
> 时间：2013-03-16T14:47:08.320
> 
> 标签：python, mpmath

我希望[`mpmath`](http://mpmath.googlecode.com/svn/trunk/doc/build/index.html)对 Python 数组执行逐元素操作。例如，

```
import mpmath as mpm
x = mpm.arange(0,4)
y = mpm.sin(x)        # error 
```

或者，使用[`mpmath`矩阵](http://mpmath.googlecode.com/svn/trunk/doc/build/matrices.html)

```
x = mpm.matrix([0,1,2,3])
y = mpm.sin(x)             # error 
```

在这方面是否`mpmath`有任何能力，或者是否有必要遍历条目？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-16T15:36:48.433

mpmath 似乎无法处理逐元素操作，但您可以使用 numpy 来获得此功能：

```
import numpy as np
import mpmath as mpm
x = np.array(mpm.arange(0,4))

sin = np.vectorize(mpm.sin)
y = sin(x) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T16:25:58.567

`mpmath.arange`显然返回常规 Python 列表，因此您可以使用`map`在每个元素上应用一个函数：

```
import mpmath
x = mpmath.arange(0,4)
y = map(mpmath.sin, x) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-30T09:00:13.287

apply 方法应该可以工作

```
A = mpmath.arange(0,4)

A.apply(sin) 
```

# arrays - for 循环中的 addEventListener(object[i]) 给了我一个对象而不是多个

> ID：15450649
> 
> 赞同：0
> 
> 时间：2013-03-16T14:47:38.330
> 
> 标签：arrays, actionscript-3, object, textfield, addeventlistener

我正在为游戏制作排行榜。此排行榜从数组中获取分数。但是当我添加 eventListener 时，我只从数组中得到一个对象。这是我的对象数组：

```
[{gamenr:1,naam:"wilbert", score:60},{gamenr:1,naam:"joost", score:20},
{gamenr:2,naam:"harry", score:50},{gamenr:2,naam:"john", score:10},
{gamenr:3,naam:"carl", score:30},{gamenr:3,naam:"dj", score:16}] 
```

代码：

```
public function toonHighscoreArray():Array {
highScoreTabel.sortOn(["score"], [Array.NUMERIC]).reverse();//get highest score on top
var returnArray:Array = new Array();
for ( var i:int = 0; i < 6; i++ ) {
    var scores:TextField = new TextField();
    scores.addEventListener(MouseEvent.CLICK, function(e:MouseEvent){toon2deSpeler(highScoreTabel[i])});

    scores.y = (i * 50) - 50;
    scores.height = 50;
    scores.text = "" + (i + 1) + ".\t" + highScoreTabel[i].naam + " met " + highScoreTabel[i].score + " punten.";
    scores.autoSize = "left";

    returnArray.push(scores);
}
return returnArray;
}

private function toon2deSpeler(score:Object) {
    trace(score.naam);
} 
```

我希望函数 toon2deSpeler 在单击 wilbert 在文本字段中的文本字段时跟踪 wilbert 并在单击 harry 的文本字段时跟踪 harry

但是当我点击 wilbert 时它给了我 joost，当我点击 harry 或 joost 等时它也给了我 joost。

如何在 toon2deSpeler 中获取正确的对象作为参数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T15:30:56.393

循环内的闭包不会像您期望的那样工作，一旦调用事件处理程序，它将使用`i`.

将您的 for 循环更改为：

```
for ( var i:int = 0; i < 6; i++ ) {
    var scores:TextField = new TextField();
    addScoreListener(scores, i);

    scores.y = (i * 50) - 50;
    scores.height = 50;
    scores.text = "" + (i + 1) + ".\t" + highScoreTabel[i].naam + " met " + highScoreTabel[i].score + " punten.";
    scores.autoSize = "left";

    returnArray.push(scores);
}

private function addScoreListener(score:TextField, index:int):void
{
   scores.addEventListener(MouseEvent.CLICK, function(e:MouseEvent):void{
       toon2deSpeler(highScoreTabel[index]);
   });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T15:40:13.313

函数在创建它们的范围内运行（[请参阅函数范围的此页面](http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b90204-7f54.html)），因此您的内联侦听器：

```
function(e:MouseEvent){toon2deSpeler(highScoreTabel[i])} 
```

正在使用`i`from `toonHighscoreArray()`，而不是它的“自己”副本`i`。但是，鉴于您的代码，您将获得一个空对象引用而不是“joost”，因为您正在尝试访问 highScoreTabel[6]。

我真的建议`TextField`使用 的属性扩展和创建对象`highScoreTabel`，然后使用 Barış Uşaklı 的方法。但是，可以在自己的范围内创建每个侦听器函数，如下所示：

```
function getScoreClickListener(scoreID:uint):Function {
    return function(e:MouseEvent){toon2deSpeler(highScoreTabel[scoreID])}
} 
```

然后在添加甚至监听器时使用它：

```
scores.addEventListener(MouseEvent.CLICK, getScoreClickListener(i)); 
```

但是，这使得以后很难删除事件侦听器，因此您需要单独跟踪它们。

# iphone - 覆盖 TableViewController 中的 init 方法

> ID：15450652
> 
> 赞同：0
> 
> 时间：2013-03-16T14:47:51.267
> 
> 标签：iphone, ios, objective-c

`iOS`新手问题：我有一个`UITableViewController`带有导航控制器的。我需要向该控制器添加一个编辑按钮。表视图控制器是从选项卡控制器访问的。我已经阅读了几篇建议覆盖该`initWithNibName`方法的帖子。虽然这是有道理的，但我不明白这个被覆盖的方法在哪里/何时被调用，或者我需要做什么来强制它被调用。

换句话说，当我覆盖这个方法时，我得到了一个成功的构建，但该方法永远不会被调用，并且代码似乎无法访问。我可能遗漏了什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T15:05:42.580

如果`initWithNibName`未调用，则您的视图控制器可能是从情节提要文件中加载的。在这种情况下，您必须改写`initWithCoder:`。

# angularjs - 角度：在新页面中加载详细信息

> ID：15450654
> 
> 赞同：0
> 
> 时间：2013-03-16T14:48:07.800
> 
> 标签：angularjs, url-routing

我在 ng 视图之外有角度行为。如何打开该视图所在的新页面？

```
<div ng-controller="JobCtrl">
    <input type="hidden" ng-model="produktion" value="produktion">
  <ul>
    <li ng-repeat="job in jobs | filter:produktion">
     <a href="jobs#/{{job.id}}"> {{job.name}}</a> (Hamburg)
    </li>
  </ul>
</div> 
```

Onclick 我想在我的 web 应用程序的一个完全不同的页面上呈现详细信息。我怎样才能做到这一点？

这是我现在的网址映射：

```
when('/jobs/:jobId', {templateUrl: 'partials/job-detail', controller: JobDetailCtrl}). 
```

如果您需要更多代码，请告诉我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T15:08:22.103

虽然我不认为我完全理解您的要求，但您需要添加另一条路线，并在新路线的模板中使用您的行为......

我不确定这是否能回答你的问题。如果没有，请将代码放在 jslint 或 plunker 等

# c# - VS 2008 中的水晶报表数据未添加到数据集，但 SQL 查询获取数据

> ID：15450655
> 
> 赞同：0
> 
> 时间：2013-03-16T14:48:11.873
> 
> 标签：c#, crystal-reports-2008

```
 private void button1_Click(object sender, EventArgs e)
        {

DataSet1 ds = new DataSet1();

            MySqlConnection con = new MySqlConnection();
            con.ConnectionString = "server=localhost;database=SpeedKnotting;uid=root;password=chandra";
            con.Open();

       MySqlCommand cmd = con.CreateCommand();
                cmd.CommandText = "SELECT * FROM invoice";
                myread = cmd.ExecuteReader();

              if(myread.HasRows)
                {
                    while (myread.Read())
                    {
                        String date = myread["date1"].ToString();
                        String slip_no = myread["slip_no"].ToString();
                        String loom_no = myread["loom_no"].ToString();
                        String count = myread["count"].ToString();
                        String ends = myread["ends"].ToString();
                        String knotting = myread["knotting"].ToString();
                        String transport = myread["transport"].ToString();
                        String passing =myread["passing"].ToString();
                        String total = myread["total"].ToString();

    ds.DataTable1.Rows.Add(date, slip_no, loom_no, count, ends, knotting, transport, passing, total);

                    }
                    myread.NextResult();
                }
              myread.Close();
              con.Close();

              CrystalReport1 rp = new CrystalReport1();

               rp.SetDataSource(ds);

             crystalReportViewer1.ReportSource = rp;

          crystalReportViewer1.Refresh()      

        }
/*here i get the values from DB to the above string but im not able to add to the table in dataset
*/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T15:10:12.153

只需更换线路

```
ds.DataTable1.Rows.Add(date, slip_no, loom_no, count, ends, knotting, transport, passing, total); 
```

至

```
ds.DataTable1.Rows.Add(date1, slip_no, loom_no, count, ends, knotting, transport, passing, total); 
```

我认为有错字。检查并告诉我。

# java - 通过 Tomcat 7 运行 HtmlUnit

> ID：15450656
> 
> 赞同：2
> 
> 时间：2013-03-16T14:48:13.737
> 
> 标签：java, htmlunit

我正在尝试使用 HTMLUnit 来生成我们的 ajax 页面的可抓取 HTML 快照（如[https://developers.google.com/webmasters/ajax-crawling/](https://developers.google.com/webmasters/ajax-crawling/)所建议的那样）。这个想法是创建允许企业通过定期计划服务或按照自己的意愿创建快照的功能。

我写了一个快速的 POC 主类来测试理论，它按预期工作（当我们查看源代码时，我们可以看到我们以前看不到的谷歌爬虫所需的所有数据）。我现在将其集成到我们在 Tomcat 7 上运行的应用程序中，我在从 Google 下载 jquery.js 时遇到问题，其中包含以下日志消息

```
2013-03-15 18:10:38,071 ERROR [author->taskExecutor-1] com.gargoylesoftware.htmlunit.html.HtmlPage       : Error loading JavaScript from [https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.js].
javax.net.ssl.SSLException: hostname in certificate didn't match: <ajax.googleapis.com/173.194.67.95> != <*.googleapis.com> OR <*.googleapis.com> OR <googleapis.com>
at org.apache.http.conn.ssl.AbstractVerifier.verify(AbstractVerifier.java:228)
at org.apache.http.conn.ssl.BrowserCompatHostnameVerifier.verify(BrowserCompatHostnameVerifier.java:54)
at org.apache.http.conn.ssl.AbstractVerifier.verify(AbstractVerifier.java:149)
at org.apache.http.conn.ssl.AbstractVerifier.verify(AbstractVerifier.java:130)
at org.apache.http.conn.ssl.SSLSocketFactory.connectSocket(SSLSocketFactory.java:397)
at org.apache.http.conn.ssl.SSLSocketFactory.connectSocket(SSLSocketFactory.java:495)
at org.apache.http.conn.scheme.SchemeSocketFactoryAdaptor.connectSocket(SchemeSocketFactoryAdaptor.java:62)
at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:148)
at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:150)

... 
```

因此，ajax 没有被执行，并且快照不包含我们希望的视图源中的数据。有谁知道为什么这会发生在我的 Tomcat 代码版本中而不是我的独立主类中？这两个版本都在我的本地机器上运行，一个只是在 Tomcat (v7) 中，一个是 Java 应用程序。两个版本都有相同的 Maven 包含（见底部）。

注意：我已经尝试在实例化时指定 BrowserVersion，`WebClient client = new WebClient(BrowserVersion.FIREFOX_17);`因为我确实读过这会产生更好的结果（对不起，我不记得链接了）。再次，这在 POC 中运行良好，但是当我在 Tomcat II 中运行它时，会看到日志“Instatiating Web Client”，但无论我等待多长时间，它都不会到达“Client Instatiated”或抛出任何异常。我不知道这是否与无法下载 jqeury.js 有关，因为它仍然可以在没有指定 BrowserVersion 的 POC 中工作。

**这是我的 POC Java 主要方法**

```
 OutputStreamWriter writer = null;

        try {
            final WebClient webClient = new WebClient();
            webClient.getOptions().setThrowExceptionOnScriptError(false);
            webClient.getOptions().setPrintContentOnFailingStatusCode(false);
            final HtmlPage page = (HtmlPage)webClient.getPage("http://myurl.com");

            webClient.waitForBackgroundJavaScript(1500);

            File file = new File("C:\\test.html");
            FileUtils.touch(file);

            writer = new OutputStreamWriter(new FileOutputStream(file), "UTF-8");
            writer.write(page.asXml());
            writer.flush();

        } catch (MalformedURLException mue) {
            System.out.println("MalformedURL exception");
        } catch (IOException ioe) {
            System.out.println("IOException occurred " +  ioe.getMessage());
        } finally {
            IOUtils.closeQuietly(writer);
        } 
```

**这是我的集成版本**

```
 /* Entry point for the generation */
     public void generate() {

        log.info("Beginning snapshot generation...");

        try {

            // Get the URLS
            log.info("Retrieving list of page urls");
            List<String> pageUrls = getUrlList();
            log.info("Found {} urls to generate", pageUrls.size());

            // For every url we have generate a snapshot
            for (String pageUrl: pageUrls) {
                takeSnapshot(pageUrl);
            }
            log.info("Finished generating snapshots!");
        } catch (Exception e) {
            log.error("Exception caught while generating snapshot", e);
        }
    }

    /**
     * Take the HTML snapshot of the url and output to the snapshot directory
     */
    private void takeSnapshot(String pagePath) {
        try {
            String fullOutputFilePath = config.getHtmlSnapshotDirectory() + File.separator
                                                        + pagePath + File.separator + HTML_SNAPSHOT_FILE_NAME;
            String pageUrl = "http://myurl.com" + pagePath;

            log.debug("Instantiating Web Client...");
            final WebClient webClient = new WebClient();
            log.debug("Client instantiated");
            webClient.getOptions().setThrowExceptionOnScriptError(false);
            webClient.getOptions().setPrintContentOnFailingStatusCode(false);
            final HtmlPage page = (HtmlPage)webClient.getPage(pageUrl);

            webClient.waitForBackgroundJavaScript(1500);

            snapshotFile = new File(fullOutputFilePath);
            FileUtils.touch(snapshotFile);

            writer = new OutputStreamWriter(new FileOutputStream(snapshotFile), "UTF-8");
            writer.write(page.asXml());
            writer.flush();
        } catch (MalformedURLException mue) {
            System.out.println("MalformedURL exception");
        } catch (IOException ioe) {
            System.out.println("IOException occurred " +  ioe.getMessage());
        } finally {
            IOUtils.closeQuietly(writer);
        }
    } 
```

**Maven 依赖项**

```
 <dependency>
            <groupId>net.sourceforge.htmlunit</groupId>
            <artifactId>htmlunit</artifactId>
            <version>2.12</version>
        </dependency>

        <dependency>
            <groupId>org.apache.httpcomponents</groupId>
            <artifactId>httpclient</artifactId>
            <version>4.2.3</version>
        </dependency>

        <dependency>
            <groupId>org.apache.httpcomponents</groupId>
            <artifactId>httpcore</artifactId>
            <version>4.3-alpha1</version>
        </dependency> 
```

**感谢大家！！！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:35:44.377

所以添加`webClient.getOptions().setUseInsecureSSL(true);`是解决这个问题的关键。但是，我不得不使用已弃用的版本`webClient.setUseInsecureSSL(true);`。

我不知道为什么新版本在 Tomcat 中运行时不起作用，但它解决了这个问题。如果有人可以提供洞察力，为什么那会很棒。我仍然不知道为什么在运行 Tomcat 时设置 BrowserVersion 会导致应用程序停止。我已经向 HtmlUnit 邮件列表询问了这些问题的答案。

# css - CSS 覆盖以像素和百分比为单位的高度

> ID：15450658
> 
> 赞同：-3
> 
> 时间：2013-03-16T14:48:37.070
> 
> 标签：css, height, cover

我想要一个第一个 div 高度为 100% 的页面（这没问题），并且里面的两个 div 覆盖了父 div 的整个高度。如果 2 个 div 的高度以百分比表示，则不会有问题，但事实是我需要一个以像素为单位的 div（特定高度）和另一个以百分比表示的 div（覆盖其余部分）。

我可以用 CSS 做还是应该使用 javascript？（我喜欢尽可能只使用 CSS）

html结构：

```
<html style="height: 100%;">
<head></head>
<body style="height: 100%;">
    <div style="height: 100%;">
        <div style="height: 40px;"></div>
        <div style="height: ???"></div>
    </div>
</body>
</html> 
```

感谢您的任何回答。

埃科塞

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T15:10:39.540

要填充父 div 中的可用空间，只需使用它

```
.parent
{
  position: relative;
}

.child
{
  position: absolute;
  bottom: 0;    
  top: 40px;   /* can set accordingly"*/   
} 
```

所以试试这段代码

```
 <div class="parent">
        <div class="fixedChild"></div>
        <div class="dynamicChild">ss</div>
</div> 
```

CSS：

```
body,html
{
    height:100%;
}
.parent
{
    height:100%;
    min-height:100%;
    background-color:Black;
    position: relative;
}
.fixedChild
{
    height:40px;
    background-color:Green;
}
.dynamicChild
{
    background-color:Red;
    position: absolute;
    top: 40px;
    bottom: 0;
    width:100%;
} 
```

这是[JS Fiddle 演示](http://jsfiddle.net/9Ma6s/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T14:57:33.883

首先，如果你想让它们从上到下出现，你应该使用`float`属性，你可以`calc(100% - 40px)`在这里使用的第二个高度是浏览器对这个属性的支持（[http://caniuse.com/#feat=calc](http://caniuse.com/#feat=calc)）。

# python - 用于公共 api 的 Python twitter 库

> ID：15450661
> 
> 赞同：1
> 
> 时间：2013-03-16T14:48:47.140
> 
> 标签：python, twitter, public, timeline

我正在寻找一个与 twitter api v1.1 一起使用的 python 库。我想提取公共推文。但是公共时间线方法在较新的版本中已被弃用，因此这在较旧的 python 实现中不起作用。请建议可以帮助我这样做的新 python 库。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T14:55:17.680

使用 [https://code.google.com/p/python-twitter/](https://code.google.com/p/python-twitter/)的库方法：

```
 >>> statuses = api.GetPublicTimeline()
  >>> print [s.user.name for s in statuses]
  [u'DeWitt', u'Kesuke Miyagi', u'ev', u'Buzz Andersen', u'Biz Stone'] 
```

# java - Android中的HTTP POST，强制关闭？

> ID：15450663
> 
> 赞同：-1
> 
> 时间：2013-03-16T14:49:08.840
> 
> 标签：java, android, forms, post, httpclient

当我按下某个按钮时，我试图通过 Android 发送一个简单的 HTTP 请求。但是每次我这样做时，我的应用程序都会关闭。为什么？顺便说一句，我是 Android 开发的新手。

**我的代码：**

```
 HttpClient httpclient = new DefaultHttpClient();
 HttpPost httppost = new HttpPost("http://www.office.school-blog.de/api/check-login.php");

try {
    // Add your data
    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
    nameValuePairs.add(new BasicNameValuePair("User", "Steffen"));
    nameValuePairs.add(new BasicNameValuePair("Password", "test1234"));
    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

    // Execute HTTP Post Request
    HttpResponse response = httpclient.execute(httppost);

} catch (ClientProtocolException e) {
    // TODO Auto-generated catch block
} catch (IOException e) {
    // TODO Auto-generated catch block
} 
```

**还有我的日志文件：**

```
03-16 14:36:47.554: D/AndroidRuntime(449): Shutting down VM
03-16 14:36:47.554: W/dalvikvm(449): threadid=1: thread exiting with uncaught exception (group=0x40014760)
03-16 14:36:47.574: E/AndroidRuntime(449): FATAL EXCEPTION: main
03-16 14:36:47.574: E/AndroidRuntime(449): android.os.NetworkOnMainThreadException
03-16 14:36:47.574: E/AndroidRuntime(449):  at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1077)
03-16 14:36:47.574: E/AndroidRuntime(449):  at java.net.InetAddress.lookupHostByName(InetAddress.java:477)
03-16 14:36:47.574: E/AndroidRuntime(449):  at java.net.InetAddress.getAllByNameImpl(InetAddress.java:277)
03-16 14:36:47.574: E/AndroidRuntime(449):  at java.net.InetAddress.getAllByName(InetAddress.java:249)
03-16 14:36:47.574: E/AndroidRuntime(449):  at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:136)
03-16 14:36:47.574: E/AndroidRuntime(449):  at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
03-16 14:36:47.574: E/AndroidRuntime(449):  at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
03-16 14:36:47.574: E/AndroidRuntime(449):  at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
03-16 14:36:47.574: E/AndroidRuntime(449):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
03-16 14:36:47.574: E/AndroidRuntime(449):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
03-16 14:36:47.574: E/AndroidRuntime(449):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
03-16 14:36:47.574: E/AndroidRuntime(449):  at com.shr.khg.DashboardActivity$1.onClick(DashboardActivity.java:89)
03-16 14:36:47.574: E/AndroidRuntime(449):  at android.view.View.performClick(View.java:3110)
03-16 14:36:47.574: E/AndroidRuntime(449):  at android.view.View$PerformClick.run(View.java:11934)
03-16 14:36:47.574: E/AndroidRuntime(449):  at android.os.Handler.handleCallback(Handler.java:587)
03-16 14:36:47.574: E/AndroidRuntime(449):  at android.os.Handler.dispatchMessage(Handler.java:92)
03-16 14:36:47.574: E/AndroidRuntime(449):  at android.os.Looper.loop(Looper.java:132)
03-16 14:36:47.574: E/AndroidRuntime(449):  at android.app.ActivityThread.main(ActivityThread.java:4123)
03-16 14:36:47.574: E/AndroidRuntime(449):  at java.lang.reflect.Method.invokeNative(Native Method)
03-16 14:36:47.574: E/AndroidRuntime(449):  at java.lang.reflect.Method.invoke(Method.java:491)
03-16 14:36:47.574: E/AndroidRuntime(449):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
03-16 14:36:47.574: E/AndroidRuntime(449):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
03-16 14:36:47.574: E/AndroidRuntime(449):  at dalvik.system.NativeStart.main(Native Method)
03-16 14:36:50.064: I/Process(449): Sending signal. PID: 449 SIG: 9 
```

有人知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T14:59:54.723

这将解决您的问题：

```
class MyHttpPost extends AsyncTask<String, Void, Boolean> {
@Override
protected Boolean doInBackground(String... params) 
{

HttpClient httpclient = new DefaultHttpClient();
HttpPost httppost = new HttpPost("http://www.office.school-blog.de/api/check-login.php");

        try {
         // Add your data
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
        nameValuePairs.add(new BasicNameValuePair("User", "Steffen"));
        nameValuePairs.add(new BasicNameValuePair("Password", "test1234"));
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

        // Execute HTTP Post Request
        HttpResponse response = httpclient.execute(httppost);
    HttpEntity httpEntity = response.getEntity();
                String result = httpEntity.getContent();

        } catch (ClientProtocolException e) {
         // TODO Auto-generated catch block
        } catch (IOException e) {
         // TODO Auto-generated catch block
        }

return true;
                    }

} 
```

替换你的上面的代码`public class`，因为这个`MyHttpPost`类是一个内部类，我们不会为它创建一个单独的.java文件。

要使用它：

```
new MyHttpPost().execute(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T14:49:56.030

使用异步任务。

不要在主线程上做网络操作：**android版本>=3.0是不允许的。**

`doInBackground`在方法中进行网络操作。

[在这里](http://developer.android.com/reference/android/os/AsyncTask.html)阅读。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T14:52:07.800

Android 不允许在 UI（或主）线程上阻止诸如网络访问之类的任务。这是所有与用户交互有关的线程。因此，您将需要（可能）创建和 AsynTask 类来运行查询并反馈信息。请参阅[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)。此处还给出了 AsyncTask 的示例：[http ://www.javasrilankansupport.com/2012/11/asynctask-android-example-asynctask-in.html](http://www.javasrilankansupport.com/2012/11/asynctask-android-example-asynctask-in.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T14:53:03.717

`You are trying to perform network operation on UI thread`，尝试采取**单独的线程**或**异步任务**

# ios - Hackbook 示例挂起，iOS 上没有任何反应

> ID：15450669
> 
> 赞同：2
> 
> 时间：2013-03-16T14:50:22.887
> 
> 标签：ios, facebook, cordova, phonegap-plugins

我已按照[https://github.com/phonegap/phonegap-facebook-plugin](https://github.com/phonegap/phonegap-facebook-plugin)上的说明进行操作，并且成功地为 HackBook ( iOS ) 设置了项目。

我的环境如下：1）xcode：版本4.5.1（4G1004）2）Phonegap：2.5 3）Macbook Pro 64bit。4) Facebook SDK 3.2 5) 目标构建是 iOS5

但是，在 iOS 模拟器（5 和 6）上构建并运行项目后，我只看到“Loading Hackbook”消息（见屏幕截图）。 ![屏幕截图 2013-03-16 在 10 43 16 PM](../Images/b57dae942db3d24f3409b501649c7969.png)

比什么都没有发生......

我的输出消息如下：

```
2013-03-16 22:42:44.417 FBConnect[8894:19a03] Multi-tasking -> Device: YES, App: YES
2013-03-16 22:42:44.502 FBConnect[8894:19a03] Resetting plugins due to page load.
2013-03-16 22:42:46.692 FBConnect[8894:19a03] Finished load of: file:///Users/eugenely/Library/Application%20Support/iPhone%20Simulator/6.0/Applications/838356B7-F0CE-4A3E-A2F6-1050B1987B05/FBConnect.app/www/index.html
2013-03-16 22:42:46.719 FBConnect[8894:19a03] [LOG] Cordova Facebook Connect plugin initialized successfully. 
```

但我没有看到任何事情发生，只有“Loading Hackbook”消息。

我可以知道什么可能是错的吗？

谢谢大家的帮助！

PS：Android 版本有效，我已经设法使用 Android 上的 Hackbook 示例登录，以防您想知道。

# java - 清理并构建，但我的音频文件不见了

> ID：15450674
> 
> 赞同：1
> 
> 时间：2013-03-16T14:50:42.080
> 
> 标签：java, build, jar

我有一个小问题，我正在使用 Netbeans 中的 swing builder 构建一个应用程序（注意：它是 Java）。在这个应用程序中，我使用了放在主项目文件夹中的音频文件，但是当我启动 jar 时，音频文件无法正常工作，就好像它不包含在内一样。有谁知道我该如何解决这个问题？

任何帮助将不胜感激，黑魔法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T14:56:40.653

确保您在带有 jar 的文件夹中有音频文件，并且该路径是正确的。我用这种方法播放声音：

```
public static synchronized void playSound(final File file) 
{
new Thread(new Runnable() 
{ 
    @Override
  public void run() 
  {
    try 
    {

      AudioInputStream inputStream = AudioSystem.getAudioInputStream(file);
      Clip clip = AudioSystem.getClip();
      clip.open(inputStream);
      clip.start(); 
    } catch (Exception e) 
    {

      System.err.println(e.getMessage());
    }
  }
}
        )
        .start();
} 
```

在代码中，我使用以下方法播放声音： playSound(new File("sounds/noise.wav"));

因此，我将带有noise.wav 的文件夹放在带有* .jar 的文件夹中，一切正常。

# java - Java：调用 WriteUTF 方法时出错

> ID：15450676
> 
> 赞同：0
> 
> 时间：2013-03-16T14:50:53.377
> 
> 标签：java, text-files, multidimensional-array, filewriter

我在将用户输入的二维数组写入文本文件时遇到问题。到目前为止，我的代码（至少在 Saving 方法中）是：

```
`public static void Save(String[][] EntryList)
{
   try {
        String[][] content = EntryList;
        File file = new File("CBB.dat");

        // if file doesnt exists, then create it
        if (!file.exists()) {
            file.createNewFile();
        }
        InputStream instream;
        OutputStream outstream;

        instream = new DataInputStream( new BufferedInputStream(new FileInputStream(file))); // buffers the data stream
        outstream = new DataOutputStream( new BufferedOutputStream(new FileOutputStream(file)));
        FileWriter fw = new FileWriter(file.getAbsoluteFile(), true);
        BufferedWriter writer = new BufferedWriter(fw);
        for (int row = 0; row < EntryList.length; ++row)
        {
                outstream.writeUTF(EntryList[row][1]); 
                outstream.writeUTF(EntryList[row][2]);
                outstream.writeUTF(EntryList[row][3]);
                outstream.writeUTF(EntryList[row][4]);
                outstream.writeUTF(EntryList[row][5]);
            }
              outstream.close();

            }catch (IOException e) {
        e.printStackTrace();
    }
        }` 
```

但是，当我尝试编译时，我收到 Java“找不到符号 - 方法 WriteUTF(String)”的错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T14:53:42.933

显然没有`writeUTF`为[`java.io.OutputStream`](http://docs.oracle.com/javase/7/docs/api/java/io/OutputStream.html).

您可能应该声明`outstream`为`DataOutputStream`参考：

```
DataOutputStream outstream; 
```

因为该方法`writeUTF` *是为*定义的[`DataOutputStream`](http://docs.oracle.com/javase/7/docs/api/java/io/DataOutputStream.html)。

# git - 将所有日志更改为另一个分支

> ID：15450679
> 
> 赞同：2
> 
> 时间：2013-03-16T14:51:05.807
> 
> 标签：git

抱歉标题不好，但这是我的问题：

我初始化了我的 repo 并始终在 master 分支中工作。现在，我想：

*   创建一个分支`develop`，
*   看起来我所有的提交都到了那个分支
*   只有`master`分支的日志`develop`

有没有办法做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T14:56:37.973

还没有尝试过，但你不能重命名你的`master`分支

```
git branch -m master develop 
```

并建立一个新`master`分支？

# objective-c - 如何等待 while 循环？

> ID：15450681
> 
> 赞同：0
> 
> 时间：2013-03-16T14:51:08.937
> 
> 标签：objective-c, while-loop, delay

这是我的代码：

```
float interval = 0.03;

while (interval > 0.005) {
    timer = [NSTimer scheduledTimerWithTimeInterval:interval target:self selector:@selector(onTimer) userInfo:nil repeats:YES];
    NSLog(@"%f", interval);
    interval = interval - 0.005;
} 
```

如何使 while 循环在每个循环后等待特定的时间？我一直在寻找诸如 sleep 或 performSelector:withObject:afterDelay 之类的东西，但它们都不起作用，我也不知道如何使用它们……请帮忙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T18:05:39.630

您可以使用递归结构：

```
 - (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    // Insert code here to initialize your application
    [self recursiveMethode:[NSNumber numberWithDouble:0.3]];

}

-(void)onTimer
{
    NSLog(@"timer");
}

-(void)recursiveMethode:(NSNumber *)interval
{
    timer = [NSTimer scheduledTimerWithTimeInterval:interval.doubleValue target:self selector:@selector(onTimer) userInfo:nil repeats:YES];
    NSLog(@"%f", interval.doubleValue);
    double delay = 1;
    [self performSelector:@selector(recursiveMethode:) withObject:[NSNumber numberWithDouble:interval.doubleValue - 0.05] afterDelay:delay];
} 
```

# c - 当终端调整大小时，Ncurses 程序退出

> ID：15450682
> 
> 赞同：3
> 
> 时间：2013-03-16T14:51:13.557
> 
> 标签：c, linux, ncurses

当我调整终端窗口的大小时，以下程序退出。为什么以及如何阻止它？

```
#include <ncurses.h>
#include <unistd.h>

int main () {
    initscr ();

    printw ("Some text\n");
    refresh ();

    sleep (100);
    endwin ();

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T15:10:46.857

[我在这里](https://stackoverflow.com/questions/4738803/resize-terminal-and-scrolling-problem-with-ncurses)找到了答案

当终端调整大小时，`SIGWINCH`信号升高并退出程序。

这是解决方案：

```
#include <ncurses.h>
#include <unistd.h>
#include <signal.h>

int main () {
    initscr ();

    signal (SIGWINCH, NULL);

    printw ("Some text\n");
    refresh ();

    sleep (100);
    endwin ();

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T15:11:29.713

您需要处理 SIGWINCH 信号：

```
#include <signal.h>

/* resizer handler, called when the user resizes the window */
void resizeHandler(int sig) {
    // update layout, do stuff...
}

int main(int argc, char **argv) {
    signal(SIGWINCH, resizeHandler);

    // play with ncurses
    // ...
} 
```

# opengl - OpenGL 平移 - 坐标

> ID：15450684
> 
> 赞同：1
> 
> 时间：2013-03-16T14:51:27.067
> 
> 标签：opengl, glut, collision

我正在尝试制作一个简单的游戏，让您可以在屏幕上跳跃并跳到平台上，而不会离开屏幕或跌落平台。

到目前为止，我已经设法创建了一个小 2D 正方形，我将其称为我的精灵或角色以及 2 个平台。

我终于让我的精灵向上、向下、向左和向右移动（还没有跳跃）但是我离开屏幕的碰撞并没有像我想象的那样工作......

我正在做的是根据键盘的输入`glTranslate(x,y,z)`来移动我的精灵并测试精灵和屏幕之间的碰撞。`key`不幸的是，我认为我对用于翻译的坐标感到困惑`collisionScreen`。

`ie "0"`需要注意的是，无论在何处或何时绘制精灵，我都无法将我的精灵带到最初绘制精灵的原点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T15:20:10.797

看起来：

```
void collisionScreen (int x, int y)
{
    //stops sprite leaving current screen size
    if(x_pos < 0 || x_pos+s1_W > winX)
        x_pos -= x_pos;
    if(y_pos < 0 || y_pos+s1_H > winY)
        y_pos -= y_pos;
} 
```

实际上并不使用传递给它的`x`and`y`参数。

也许你的意思是这样的：

```
void collisionScreen (int x, int y)
{
    //stops sprite leaving current screen size
    if(x_pos < 0)
        x_pos = 0;
    else if(x_pos+s1_W > winX)
        x_pos = winX - s1_W;

    if(y_pos < 0)
        y_pos = 0;
    else if(y_pos+s1_H > winY)
        y_pos = winY - s1_H;
} 
```

此外，您的精灵不会通过`0`，因为这是该方法的设计目的。

# c - 不使用 [ ] C 语言将值扫描到矩阵中

> ID：15450694
> 
> 赞同：0
> 
> 时间：2013-03-16T14:52:08.473
> 
> 标签：c, matrix, transpose

我有个问题。我被要求编写一个转置矩阵的程序，而不使用 []...例如，我知道如果它是一个一维数组，我可以说 array[3] 与 *(array+3 )...但是我如何使用矩阵来做到这一点？

这是我的扫描代码：

```
void scan_matrix(matrix mat1,int number_of_rows, int number_of_columns)
{
    int row_index,column_index;
    for(row_index=0;row_index<number_of_rows;row_index++)
    {
        printf("Enter the values of row %d\n",row_index);
        for(column_index=0;column_index<number_of_columns;column_index++)
            scanf("%d",WHAT GOES HERE?????);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T15:09:24.147

如果 mat 是二维 int 数组，例如： mat[3][3]

那么scanf代码将是：`scanf("%d",(*(mat+row_index)+column_index));`

```
a[3] : *(a+3)
a[3][3] : (*(a+3)+3) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T15:05:31.307

如果`mat1`是一个简单的指针，那么这应该为您完成工作：

```
for(row_index=0;row_index<number_of_rows;row_index++)
    {
        printf("Enter the values of row %d\n",row_index);
        for(column_index=0;column_index<number_of_columns;column_index++)
            scanf("%d", (mat1 + row_index*number_of_columns + column_index));
    } 
```

该程序使用矩阵（二维数组）实际上作为一维数组存储在内存中的事实。

让我们采用一个二维矩阵：

```
1 2 3
4 5 6 
```

这在内存中存储为：

```
1 2 3 4 5 6 
```

因此，通过使用将数组元素的逻辑位置与实际位置映射的方法来访问正确的变量。我们所需要的只是找出结果是的关系：

```
Pos = Row*Num_Of_Col + Col 
```

# java - 如何在java小程序游戏中制作保存游戏？

> ID：15450702
> 
> 赞同：0
> 
> 时间：2013-03-16T14:52:32.973
> 
> 标签：java, applet

我一直在到处寻找如何在java小程序中制作保存游戏文件，但当然不可能只制作一个xml文件......（或者会吗？请告诉我！）

我不想让“玩家”使用用户名、密码和类似的东西登录游戏，这会去一些服务器和类似的东西......

保存几个变量以便玩家不需要每次都从头开始游戏的最简单和最简单的方法是什么？（因为在rpg游戏中它会很蹩脚......）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T15:07:44.720

由于安全限制，通常您无法保存文件。除非它作为受信任的小程序运行，否则这是有问题的。简短的回答是否定的，你不能写文件，因为 Java 小程序在沙箱中运行。在沙盒中，您看不到本地文件系统。

也许您可以将保存的游戏存储在 cookie 中？[在这里](http://docs.oracle.com/javase/tutorial/deployment/doingMoreWithRIA/accessingCookies.html)，您有一个官方教程如何处理来自 Java 的 cookie。

这个[链接](http://www.dreamincode.net/forums/topic/231473-making-a-save-game-function-for-an-applet/)也很有帮助，有人有类似的问题。

# javascript - 将可拖动对象放回其初始位置

> ID：15450716
> 
> 赞同：0
> 
> 时间：2013-03-16T14:54:00.983
> 
> 标签：javascript, jquery, html

我想创建一个函数，一旦我调用它就可以将我的可拖动对象放回初始位置。与功能无关`revert`^^

```
$('.drag').draggable({
        stack: ".drag",
        snap: ".drop",
        snapMode: "inner",
        revert: "invalid",
        start: function(){
            $('.time').fadeIn('slow').delay(1000);
            declenchementChrono()
        }
    }); 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T15:11:38.590

将所有内容放回原处的最简单方法是删除该`style`属性：

```
$('#reset').click(function(){
    $('#test li').attr('style','');
});

$('#test li').draggable(); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/Lxh58/1/)。

# android - 如何在android 4.0中获取手机号码？

> ID：15450717
> 
> 赞同：1
> 
> 时间：2013-03-16T14:54:02.113
> 
> 标签：android, phone-number

嗨，我正在使用下面提到的代码从安卓手机中获取我自己的号码。

```
 TelephonyManager tMgr = (TelephonyManager) this
     .getSystemService(Context.TELEPHONY_SERVICE);
   String phoneNumber = tMgr.getLine1Number(); 
```

这段代码在 2.3 版本的 android 之前完美运行，问题是我需要它在 android 4.0 及更高版本上工作，是否有任何可用的代码。

谢谢你

# android - 如何像在 Windows Phone 上一样在 Android 上实现倾斜效果？

> ID：15450722
> 
> 赞同：10
> 
> 时间：2013-03-16T14:54:29.753
> 
> 标签：android, android-button

我想在 Android 操作系统上单击按钮时实现倾斜效果。

倾斜效果：并非整个按钮都被视为按下。只有发生触摸事件的部分似乎被按下。

这在Android上很容易吗？

![在此处输入图像描述](../Images/2173422af0d71342990dbd0690e2679a.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T06:02:03.867

一种简单的方法是使用画布绘制来绘制 4 边形状。

考虑每个 4 个角。“未触及”的矩形将是全尺寸，触摸的矩形会更小。

![触摸和未触摸的盒子](../Images/762f080d986f1162047c545ad0ec45f3.png)

您只需要使用为矩形的每个部分计算的点来绘制四边形。您可以获取触摸位置，然后计算出每个点的“权重”。

要计算每个角，您需要计算出多少“权重”赋予触摸坐标，以及多少“权重”赋予未触摸坐标。如果您触摸左上角，该角将使用 100% 的触摸坐标，而其他三个角都将使用未触摸的坐标。

![触摸左上角](../Images/3b9cd9570faf4ff44f43d8e41afdb21f.png)

如果你触摸顶部中间，你会得到这样的形状：

![触及顶部中间](../Images/cc445133385d9b0d02cf95ce90acb652.png)

我们可以通过计算您的触摸距离角点的距离来计算任何触摸点的角点

![触及左下角](../Images/1d663a111ace624c5518b454976d9ebd.png)

```
 float untouchedXWeight1 = Math.abs(xt - x1)/width;
    //maximum of 1, minimum of 0

    float untouchedYWeight1 = Math.abs(yt - y1)/height;

    float untouchedWeight1 = (untouchedXWeight1 + untouchedYWeight1)/2;
    //also maximum of 1, minimum of 0

    float touchedWeight1 = 1 - untouchedWeight1; 
```

因此，使用这些权重，您可以计算该角的 x 和 y 位置：

```
x1 = xUntouched1 * untouchedWeight + xTouched1 * touchedWeight1;
y1 = yUntouched1 * untouchedWeight + yTouched1 * touchedWeight1; 
```

然后对其他 3 个角进行类似操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-18T16:26:51.007

我在这里创建了初稿：[https ://github.com/flavienlaurent/TiltEffect](https://github.com/flavienlaurent/TiltEffect)

在第二步中，我将使它与 Button 等一起使用。

不幸的是，我没有使用 HalR 的非常好的（但对我来说太数学了）答案

# haskell - 您如何使用抖动将 PHONY 目标声明为默认操作？

> ID：15450726
> 
> 赞同：3
> 
> 时间：2013-03-16T14:55:10.350
> 
> 标签：haskell, shake-build-system

我正在将 Makefile 转换为 Shakefile，但我不确定如何处理 PHONY make 目标（`clean`、、`install`等）。我试过类似的东西：

```
main = shake shakeOptions $ do
  want ["install"]
  "install" *> \_ -> do
    need ["mytarget"]
    system' "ln" ["-s", "mytarget", "linkname"] 
```

它成功创建符号链接，但报告错误“错误，规则“安装”未能构建文件：安装”。

那么，如果不是使用“想要”操作，我如何声明我要运行的默认目标是假目标？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T08:53:23.407

在shake-0.10.1及以上可以使用`phony`函数写：

```
main = shake shakeOptions $ do
  want ["install"]
  phony "install" $ do
    need ["mytarget"]
    system' "ln" ["-s", "mytarget", "linkname"] 
```

这应该完全符合您的要求，并且不需要生成假文件。此外，您可能希望使用`shakeArgs`而不是`shake`让用户可以`install`从命令行中进行选择，或者选择另一个目标，例如 clean。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T19:03:34.830

在shake-0.9 和更低版本中，假目标是Shake 的一个弱点——你可以做到，但它们比应有的更加冗长和手动。这里有几个选项：

**让安装规则生成一个文件**

作为一个非常简单的解决方案，只需在规则`writeFile' "install" ""`底部添加即可。`install`这会产生一个虚拟文件，但每次`mytarget`更改时都会重新运行。如果您希望它在每次`install`请求时都运行（就像制作中的假货一样），只需添加`alwaysRerun`. 如果可以忽略冗余文件，这是最简单的解决方案，直到有一流的假支持。

**采用`action`**

你可以写：

```
main = shake shakeOptions $ do
  action $ do
    need ["mytarget"]
    system' "ln" ["-s", "mytarget", "linkname"] 
```

这声明了在每个构建上运行的操作。实际上，您可能只希望`install`在命令行上运行它，因此您可以执行以下操作：

```
main = do
  args <- getArgs
  shake shakeOptions $ do
    when ("install" `elem` args) $ action $ do
      ... install code ... 
```

**采用`shakeArguments`**

在[之后的shake版本中](http://github.com/ndmitchell/shake)可以使用该`shakeArgsWith`函数编写：

```
main = shakeArgsWith shakeOptions [] $ \_ targets ->
  if "clean" `elem` targets then do
    removeFiles "_make" "//*"
    return Nothing
  else return $ Just $ do
    when ("install" `elem` targets) $ do
       ... install code ...
    ... other rules ...
    want $ delete "install" targets 
```

这使您可以完全控制目标的处理方式，因此您可以做一些比虚假目标更强大的事情，但它的工作量更大。

# python - 从程序中在 Notepad++ 中打开 Python 文件

> ID：15450733
> 
> 赞同：5
> 
> 时间：2013-03-16T14:56:01.827
> 
> 标签：python, file, io, notepad++

我正在尝试在 Notepad++中复制 IDLE 的`alt`+`m`命令（在路径中打开一个模块）。`sys`我喜欢 Notepad++ 进行编辑（而不是 IDLE），但这是我找不到的一个功能。

按下时`alt+m`，我希望它运行一个请求模块的程序（这相当简单，所以我可以这样做）。我的问题是找到模块，然后在 Notepad++ 中打开它，而不是简单地运行程序。另外，我希望它在 Notepad++ 的同一个实例（同一个窗口）中打开，而不是一个新实例。

我试过这个：

```
import os
f = r"D:\my_stuff\Google Drive\Modules\nums.py"
os.startfile(f, 'notepad++.exe') 
```

但是，我收到此错误：

```
Traceback (most recent call last):
  File '_filePath_', line 3, in <module>
    os.startfile(f, 'notepad++.exe')
OSError: [WinError 1155] No application is associated with the specified file for this operation: 'D:\\my_stuff\\Google Drive\\Modules\\nums.py' 
```

我怎样才能解决这个问题？

另外，给定一个字符串，例如`'nums.py'`，我怎样才能找到它的完整路径？它将位于以下两个文件夹之一中：`'D:\\my_stuff\\Google Drive\\Modules'`或`'C:\\Python27\Lib'`（也可能位于文件夹中的各个子`'Lib'`文件夹中）。或者，我可以简单地做：

```
try:
    fullPath = r'D:\\my_stuff\\Google Drive\\Modules\\' + f
    # method of opening file in Notepad++
except (IOError, FileNotFoundError):
    fullPath = r'C:\\Python27\\Lib\\' + f
    # open in Notepad++ 
```

这不考虑子文件夹，而且看起来相当笨重。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T15:23:54.770

如果您的 .py 文件将**与**notepad++ 相关联，那么`os.startfile(f, 'notepad++.exe')`它将为您工作（请参阅[ftype](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/ftype.mspx?mfr=true)）。

除非您想创建此关联，否则以下代码将为您打开记事本++：

```
import subprocess
subprocess.call([r"c:\Program ...Notepad++.exe", r"D:\my_stuff\Google Drive\Modules\nums.py"]) 
```

参考：[`subprocess.call()`](http://docs.python.org/2/library/subprocess.html#subprocess.call)

# fine-uploader - 手动设置 UUID

> ID：15450735
> 
> 赞同：1
> 
> 时间：2013-03-16T14:56:16.550
> 
> 标签：fine-uploader

我的服务器为上传的文件生成 UUID，所以我需要在收到上传服务器的答复后将 UUID 设置为 fileState（以成功使用删除功能）。我添加并实施

```
setUuid: function(id, uuid) 
```

在**UploadHandler**，**FineUploaderBasic**和**UploadHandlerXhr**来解决这个问题，但这涉及到编辑精细上传源，还有其他方法吗？我觉得这可能会在内部破坏某些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T16:09:36.343

我建议不要将 UUID 传回给优秀的上传者。将您的 UUID 与精细上传者的 UUID 服务器端相关联会更简单。如果您不想保留它们，您可以在会话中维护关联图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-22T21:17:59.787

我遇到了这个问题，发现一些[文档](https://docs.fineuploader.com/endpoint_handlers/traditional.html "文件")说明您可以通过从上传方法返回它来从服务器端设置 UUID。 [单击正在设置 newUuid 的图像](https://i.stack.imgur.com/6oMEZ.png)

这是我使用 C# 的返回方法

```
return new FineUploaderResult(true, new { newUuid = attachmentId }); 
```

# php - jQuery mobile：动态添加图片

> ID：15450736
> 
> 赞同：1
> 
> 时间：2013-03-16T14:56:18.740
> 
> 标签：php, json, jquery-mobile, dynamic, page-init

我正在尝试加载静态街景图像，其中各种参数存储在 mysql 数据库中。在尝试了很多替代方案之后，我现在将数据库数据传递给一个 javascript 变量，然后尝试构建相关的 URL（同时考虑到页面宽度）。

该页面加载为 restaurant.php?r=xyz ，其中 xyz 在 MySQL 上查找以返回一行数据 $r ，该数据行传递到 javascript 数组中。一些数组字段用于创建 Google 街景静态图像的 URL，然后应将其加载到页面中。

如果我在网站的其他地方（或在页面刷新后）进入此页面，这工作正常。

但是，如果我从这个页面开始并浏览所有未来指向 restaurant.php?r=abc 的链接，请不要加载图像（它已下载并且可以在 Chrome 源代码框中看到）。pageinit 事件触发，但 .html() 无法更改内容（但未报告错误）。

我怀疑我违反了 javascript 和 jquery mobile 的几项法律......

在标题中声明

```
var resto = {};

 function insertSVPhoto() {
        console.log("insertSVPhoto: Loaded data for: "+resto['rname']);
        if ( Math.round(resto['heading']) != 0) {
            var width = Math.round( $(document).width() * .9);
            var s= "x250&location="+resto['lat']+",%20"+resto['lng']+"&fov=60&heading="+resto['heading']+"&pitch="+resto['pitch']+"&sensor=false";
            var photo = "<img src='http://maps.googleapis.com/maps/api/streetview?size="+width+s+"'>";
            console.log("Loading photo: "+photo);
            $('#svphoto').html(photo);
        } else { 
            console.log('No photo available');
            $('#svphoto').html("<img src=''>");
        }
    } 
```

然后在下面我有

```
<div data-role="page" data-add-back-btn="true">
<script type="text/javascript" >
<?php
    echo "resto = ".json_encode($r).";"; 
?>
$( document ).on("pageinit", insertSVPhoto );
</script>
    <div id='svphoto'></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T12:00:03.063

我必须承认我不是这里的专家，但你这样做的方式对我来说似乎不太正确，我会做以下事情：

```
 window.onload = function () {
   if(! window.device)
     deviceReady()
    }

    document.addEventListener("deviceReady", deviceReady, false);

    function deviceReady() {
     $(document).delegate('#YOUR_PAGE_ID', 'pageshow', function () {

      // Add your stuff here for doing the photo....
    } 
```

同样，我只是在不久前才开始使用 JQM，但我知道这适用于我已经完成的应用程序（也适用于 phonegap 构建！）

编辑：另外我会认真考虑将所有内容都放在一个 HTML 文档中，如果您尝试将其构建为移动应用程序，这将导致您流鼻血，JQM 并非设计用于与 Jquery 一样，您的所有“页面”都应该存在于一个 html 文档中，然后使用导航功能在页面之间移动。

谢谢

马克

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T19:45:43.210

将 data-ajax="false" 或 rel="external" 添加到您的链接中。这应该可以使其正确加载

```
<a href="hello" data-ajax="false">hello</a> 
```

或者

```
<a href="hello" rel="external">hello</a> 
```

# jakarta-ee - 仍然可以使用@EJB 注入远程接口视图 ejb

> ID：15450738
> 
> 赞同：1
> 
> 时间：2013-03-16T14:56:22.630
> 
> 标签：jakarta-ee, ejb

我想知道我是否有一个远程接口`MyService`和相应的实现 EJB `MyServiceBean`，我是否仍然可以使用注释将 bean 实例注入`@EJB`到其他 ejbs 或来自运行在同一应用程序服务器上的 jsf 的托管 bean。

如果是这种情况，我是否必须将注释放在接口或实现上？例如：

```
@EJB
private MyService myService; 
```

或者

```
@EJB
private MyServiceBean myService; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T15:23:11.783

如果您从与 EJB 相同的 JVM 中的客户端访问 EJB，则不需要远程接口。远程接口由驻留在部署 EJB 的 JVM 之外的 EJB 客户端使用。因此，在您的特定情况下，您所需要的只是

```
 @EJB
       private MyServiceBean myService; 
```

在您的情况下使用远程接口注入机制将导致不必要的往返来达到相同的结果。

不同 EJB 调用模式的用例是

1.  `@Remote`：表示远程业务接口。方法参数按值传递，需要作为 RMI 协议的一部分进行序列化。（引自 Apress 的初始 Java EE6 平台）

2.  `@Local`：表示本地业务接口。方法参数通过引用从客户端传递到 bean。（引自 Apress 的开头 Java EE6 平台）

3.  无：这是没有指定接口的普通注入类型。在与 EJB 相同的 JVM 中，这很好。从设计的角度来看（松耦合原则），您可能希望使用`@Local`注入方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T15:24:17.743

如何获取*本地*或*远程*企业 bean`@EJB`的引用并不重要。使用注释

 **```
@EJB
ExampleBean exampleBean; 
```**

# asp.net - 动态 connString（现在存储在会话中，不好）

> ID：15450750
> 
> 赞同：0
> 
> 时间：2013-03-16T14:57:18.163
> 
> 标签：asp.net, session-variables

我从事一个项目，其中 connString 存储在会话变量中。问题是，当用户有一段时间不在时会话就会结束（这是有道理的），从而使用户不得不再次登录以创建新连接。

用户从 Web 服务器上配置的 ODBC 连接列表中选择他的数据库，因此用户可以从中选择的不同 connString 不能存储在 web.config 中，因为用户可以根据需要添加新的。

我想知道如何解决这个问题。我应该告诉用户不要离开他的电脑超过 20 分钟，或者我可以将 connString 存储在其他地方吗？我见过网站弹出“您的会话将在 5 分钟后到期，请按确定以继续使用该网站”或类似的内容。

此外，由于网站在许多用户之间共享，因此不可能制作静态变量，因此如果 user1 选择“connString1”而 user2 随后选择“connString2”，那么不幸的是 user1 也将在“connString2”上运行。

希望你能帮忙:)

**

这可以是一个解决方案吗？：我创建了一个我的页面继承自的“BasePage”。在这个基本页面中，我创建了一个隐藏字段并将 connString 添加到加载时的 value 属性中。此外，我将对 connString 进行加密，以便用户无法看到源代码中的值。然后，如果会话超时，我将使用隐藏字段中的值恢复会话，并且站点不会崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T15:28:56.237

You could use the app.config to get and set config files. Take a look at this to see implementation of storing files. Its just as easy to get settings. [ConfigurationManager doesn't save settings](https://stackoverflow.com/questions/4216809/configurationmanager-doesnt-save-settings)

//Edit: If you don't want the user to be able to see your connectionstring name then you can provice an another in hidden_html or cookie or session cookie. In this example I use a cookie. THis should solve your problem.

To set cookie:

```
HttpCookie myCookie = new HttpCookie("UserSettings");
myCookie["ConnectionString"] = "MyCOnnectionValue";
myCookie.Expires = DateTime.Now.AddDays(1d);//For one day.
Response.Cookies.Add(myCookie);//Will store the cookie within the users browser so your code can read from it at every request. 
```

then:

```
if (Request.Cookies["UserSettings"] != null)
{
    string userSettings;
    if (Request.Cookies["UserSettings"]["ConString"] != null)
    { userSettings = Request.Cookies["UserSettings"]["ConString"]; }
}

string connectionStringNameToUse;

if(userSettings =="Connection1"){
    connectionStringNameToUse = "here you can have your name of connectionsstring";
}etc with ypur other connectionsstrings here. 

//Then use your connectionsstring here:
    using (SqlConnection cn = new SqlConnection(ConfigurationManager.ConnectionStrings[connectionStringNameToUse ].ToString()))
                {
                cn.Open();

                using (SqlCommand command = new SqlCommand
                    ("delete TBL from RatingListObjects TBL where ( TBL.TradeObject1Id = @MY_ID ) or ( TBL.TradeObject2Id = @My_ID ) ", cn))
                {
                    command.Parameters.Add(new SqlParameter("@MY_ID", customerToRemove.TradeObjectId));
                    command.ExecuteNonQuery();
                }
            } 
```

On the other hand. I would go for saving the users database of choice in with the other user data in the db. But this is doable if you only want the user to have a chosen connectionsstring a certain time, set by the program. It wont allow them to see the connections string name. Hopes this helps, good luck!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T18:01:11.820

您可以将用户的连接字符串首选项存储在他们的个人资料中，然后保留他们的个人资料吗？[http://odetocode.com/articles/440.aspx](http://odetocode.com/articles/440.aspx)

您还应该能够为匿名用户执行此操作。

顺便说一句，我不知道 Profile API 有多安全，它们应该没问题，但以防万一，您可能希望存储一个 Enum 值，然后将其映射到代码中的 Connection 字符串。

# excel - 对象_connection的方法打开失败

> ID：15450751
> 
> 赞同：2
> 
> 时间：2013-03-16T14:57:23.740
> 
> 标签：excel, vba, adodb

我正在尝试连接到 Excel 中的 SQL ce 数据库。它不断给我：

```
Method Open of object _connection failed 
```

每次到达时都会出现错误消息`Conn.Open`。

我以前从未使用过 ADO，所以我不确定出了什么问题。

下面是我的连接脚本。

```
Sub SQLCeConnect()
Dim Conn As New ADODB.Connection
Dim Query As New ADODB.Command
Dim ConnStr As String
Dim RecordSet As New ADODB.RecordSet
Dim i As Integer

'the connection string
ConnStr = "Provider=Microsoft.SQLSERVER.CE.OLEDB.3.5;Data Source=X:\ADOTEST\MYDB.sdf;"

'Open ADO Connection
Conn.ConnectionString = ConnStr
Conn.Open
Query.ActiveConnection = Conn
Query.CommandText = "SELECT * From DoorLayers"

Set RecordSet = Query.Execute
RecordSet.Close
Conn.Close
Conn.ConnectionString = ""

Do While Not RecordSet.EOF
    For i = 0 To RecordSet.Fields.Count - 1
        Debug.Print RecordSet.Fields(i).Name, RecordSet.Fields(i).Value
    Next
    RecordSet.MoveNext
Loop
RecordSet.Close

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T16:20:42.203

这通常是一个错误的连接字符串，但你的看起来不错。下一个最常见的原因是您的桌面上没有 OLEDB 提供程序驱动程序。你可以在这里下载

[http://www.microsoft.com/en-us/download/details.aspx?id=5821](http://www.microsoft.com/en-us/download/details.aspx?id=5821)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-15T13:27:11.393

**在WHILE**上使用之前关闭连接。使用 while 指令**后**必须关闭它。

# css - CSS：带有插入阴影的图像和文本在具有渐变背景的链接（显示：块）内对齐

> ID：15450756
> 
> 赞同：0
> 
> 时间：2013-03-16T14:57:49.530
> 
> 标签：css, html, gradient, shadow

再见，

我正在开发一个网络应用程序，我正在尝试获取一个可点击的 div （我用`<a href...>`线性渐变的 CSS 中的“显示：块”样式实现了它。没问题......

然后我想在其中插入一个图标`<a...>`，并使用`<p>`包含标志性字体的方式进行操作...再次没有问题...

然后我尝试在同一块内的图标/字体下方的 calibri 中插入一些不同的文本，并具有相同的样式（我希望有一个内部阴影，使事物看起来像是“按下”）。在这里，我对结果不满意，因为我几乎无法对齐这 2 个元素（我将其设置为`<p>`，我应该`<span>`改用它吗？）。

作为示例，我想获得类似于 facebook 应用程序按钮但图像和文本垂直对齐的效果

[Facebook div/链接](http://www.inghub.com/otherDownloads/FacebookDiv.png)

我该怎么做？最佳做法是什么（标志性字体 + Photoshop 中样式的字体或图像 + css 中样式的字体，还是什么？）？

PS：作为那个链接/div的边界的那两条漂亮的线呢，它们的样式如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T00:33:53.647

我认为最好的 - 用 photoshop 设计的图像 + 用 css 设计的字体 对于线条尝试使用渐变和框阴影。[http://jsbin.com/esasan/1/edit](http://jsbin.com/esasan/1/edit)

```
<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>JS Bin</title>
</head>
<body>
  <div class="main">
    <ul class="lines">
      <li class="line"></li>
      <li class="line"></li>
    </ul>
  </div>
</body>
</html>

.main {
  display:block;
  position:relative;
  width:150px;
  height:70px;
  background: #fcfcfd; /* Old browsers */
background: -moz-linear-gradient(top,  #fcfcfd 0%, #eaecf2 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#fcfcfd), color-stop(100%,#eaecf2)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  #fcfcfd 0%,#eaecf2 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  #fcfcfd 0%,#eaecf2 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  #fcfcfd 0%,#eaecf2 100%); /* IE10+ */
background: linear-gradient(to bottom,  #fcfcfd 0%,#eaecf2 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#fcfcfd', endColorstr='#eaecf2',GradientType=0 ); /* IE6-9 */
   -moz-box-sizing: border-box; 
    box-sizing: border-box; 
  -webkit-box-sizing: border-box;
}

.lines{
  position:relative;
  width:150px;
  height:64px;
  margin-top:3px;
}

.lines li {
  display:inline-block;
  margin-top:4px;
}

.line {
  width:2px;
  height:60px;
  background: #9fa0a3; /* Old browsers */
background: -moz-radial-gradient(center, ellipse cover,  #9fa0a3 0%, #f4f6fc 100%); /* FF3.6+ */
background: -webkit-gradient(radial, center center, 0px, center center, 100%, color-stop(0%,#9fa0a3), color-stop(100%,#f4f6fc)); /* Chrome,Safari4+ */
background: -webkit-radial-gradient(center, ellipse cover,  #9fa0a3 0%,#f4f6fc 100%); /* Chrome10+,Safari5.1+ */
background: -o-radial-gradient(center, ellipse cover,  #9fa0a3 0%,#f4f6fc 100%); /* Opera 12+ */
background: -ms-radial-gradient(center, ellipse cover,  #9fa0a3 0%,#f4f6fc 100%); /* IE10+ */
background: radial-gradient(ellipse at center,  #9fa0a3 0%,#f4f6fc 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#9fa0a3', endColorstr='#f4f6fc',GradientType=1 ); /* IE6-9 fallback on horizontal gradient */
  margin-right:60px; 
} 
```

# c# - 复杂类型的 HashSet 中的 exceptWith

> ID：15450758
> 
> 赞同：4
> 
> 时间：2013-03-16T14:58:05.933
> 
> 标签：c#, equals, hashset

我有我的自定义类的 HashSet：

```
public class Vertex
{
    public string Name;

    public override bool Equals(object obj)
    {
        var vert = obj as Vertex;
        if (vert !=null)
        {
            return Name.Equals(vert.Name, StringComparison.InvariantCulture);
        }
        return false;
    }
} 
```

现在我有两个哈希集

```
HashSet<Vertex> hashSet1 = new HashSet<Vertex>();

HashSet<Vertex> hashSet1 = new HashSet<Vertex>(); 
```

现在我想在 hashSet1 中只有不在 hashSet2 中的顶点所以我使用 exceptWith 方法

```
hashSet1.ExceptWith(hashSet2); 
```

但这不起作用。我想这不起作用，因为我有复杂的类型。所以问题是：是否需要在 Vertex 类中实现一些接口才能使这个东西工作？我知道在创建 HashSet 时我可以传递一个 EqualityComparer 但在我看来，在 Vertex 类中实现一些比较接口方法会更优雅。

有可能还是我只是不明白某事？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T15:01:13.940

覆盖时`Equals`，您还应该覆盖`GetHashCode`. `HashSet`（和其他散列结构，如`Dictionary`）将首先为您的对象计算一个散列码，以便在将元素与`Equals`.

```
public override int GetHashCode()
{
    return StringComparer.InvariantCulture.GetHashCode(this.Name);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T15:06:55.243

您不必实现任何接口（尽管[`IEquatable<T>`](http://msdn.microsoft.com/en-us/library/ms131187.aspx)）是鼓励的。当您在未指定相等比较器的情况下创建哈希集时，它默认为 using `EqualityComparer<T>.Default`，它要求对象本身相互比较（特殊情况下的空引用）。

但是，在您的情况下，您的平等合同已被破坏，因为您尚未覆盖`GetHashCode`. 以下是我将如何修复您的类型：

```
public class Vertex : IEquatable<Vertex>
{
    public string Name { get; private set; }

    public Vertex(string name)
    {
        Name = name;
    }

    public override int GetHashCode()
    {
        return StringComparer.InvariantCulture.GetHashCode(Name);
    }

    public override bool Equals(object obj)
    {
        return Equals(obj as Vertex);
    }

    public bool Equals(Vertex obj)
    {
        return obj != null && StringComparer.InvariantCulture.Equals(Name, obj.Name);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T15:00:19.770

你介意也覆盖一下`.GetHashCode()`吗？

这是[参考](https://stackoverflow.com/questions/371328/why-is-it-important-to-override-gethashcode-when-equals-method-is-overridden)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T15:00:26.267

您必须使用覆盖`GetHashCode`来`Equals`覆盖。

[Object.Equals 方法](http://msdn.microsoft.com/en-us/library/bsc2ak47.aspx)：

> 覆盖 Equals(Object) 的类型也必须覆盖 GetHashCode；否则，哈希表可能无法正常工作。

# silex - Silex Pimple 服务实现

> ID：15450761
> 
> 赞同：0
> 
> 时间：2013-03-16T14:58:24.303
> 
> 标签：silex, pimple

在我的 Silex 应用程序中，我需要一个基本上执行 file_get_contents() 的函数，我的想法是使用类似

```
$app['funky_service'] = function () {
$content = file_get_contents();
return $content;
} 
```

这工作正常，但我怎样才能将参数传递给这个函数？我可以这样称呼它

```
$fs = $app['funky_service']; 
```

但是向它传递参数仍然让我感到困惑

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T16:30:12.420

根据[silex 文档中的服务章节，](http://silex.sensiolabs.org/doc/services.html#protected-closures)如果要将函数存储为参数，则需要保护它：

```
$app['function_parameter'] = $app->protect(function ($resource) {
    $content = file_get_contents($resource);
    return $content;
});

$example = $app['function_parameter']('http://example.com'); 
```

# c# - 添加二级嵌套DataList和二级数据源以参数为一级的ID

> ID：15450764
> 
> 赞同：1
> 
> 时间：2013-03-16T14:58:49.763
> 
> 标签：c#, asp.net

我想添加两个级别的嵌套DataList，以便第二级数据源将参数作为第一级的ID。

我怎样才能做到这一点？

这是我的代码：

```
</tr>
     </table>
     <br />
           </ItemTemplate>
           <SelectedItemStyle BackColor="#009999" Font-Bold="True" ForeColor="#CCFF99" />
           </asp:DataList>
           <asp:TextBox ID="TextBox1" runat="server" Height="63px" Width="619px"></asp:TextBox>
      <br />
            <asp:Button ID="Button1" runat="server" Height="34px" Text="Comment" Width="116px" />
            <asp:SqlDataSource ID="SqlDataSource2" runat="server" ConnectionString="<%$ ConnectionStrings:Social_NetworkConnectionString %>" SelectCommand="MSP_PostGetComments" SelectCommandType="StoredProcedure">
             <SelectParameters>
                                                <!--Want to add parametar from The first Level!-->
             </SelectParameters>
             </asp:SqlDataSource>
             </td>
       </tr>
</table> 
```

# php - PHP将unicode字形数字转换为UTF-8字形

> ID：15450765
> 
> 赞同：0
> 
> 时间：2013-03-16T14:58:51.993
> 
> 标签：php, string, utf-8

在 PHP 中，如何转换一串字形值，如下所示：

```
0x00E3 
0x00E9 
0x00EA 
0x00EB 
0x00E8 
0x00ED 
0x00EE 
0x00EF 
0x00EC 
0x00F1 
0x00F3 
```

进入正确的 UTF-8 字形？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T15:20:49.877

我自己想通了，从[这里](https://stackoverflow.com/questions/1805802/php-convert-unicode-codepoint-to-utf-8)修改：

```
function val2utf8($val)
{
    $val=hexdec($val);
    if($val<=0x7F) return chr($val);
    if($val<=0x7FF) return chr(($val>>6)+192).chr(($val&63)+128);
    if($val<=0xFFFF) return chr(($val>>12)+224).chr((($val>>6)&63)+128).chr(($val&63)+128);
    if($val<=0x1FFFFF) return chr(($val>>18)+240).chr((($val>>12)&63)+128).chr((($val>>6)&63)+128).chr(($val&63)+128);
    return '';
} 
```

# iphone - 核心位置，是否可以在没有 GPS 芯片的情况下向 iPad 提供 GPS/位置日期，以便在 CLLocationManager 类中使用？

> ID：15450766
> 
> 赞同：0
> 
> 时间：2013-03-16T14:58:52.307
> 
> 标签：iphone, ios, objective-c, core-location, cllocationmanager

我知道有核心位置 sim 项目，但是需要新的标头和您的应用程序才能使用它们来覆盖内置的核心位置类，但是有没有办法让应用程序向 iDevice（iPhone、iPod、iPad 提供位置信息等）以便您安装的应用程序可以从它们那里获取位置信息？

即我已经编写了一个应用程序来收听另一个 GPS 设备，获取位置信息，并且我希望将这些数据提供给我的 iPad 上依赖于标准 CoreLocation 接口的其他应用程序......任何人都可以指向任何可用的文档吗？（我不想使用 Apple 会阻止的任何东西，因为它基于隐藏/未记录的 API，我也不想依赖需要越狱手机/pad/pod 等的东西。）

使用 iOS 5.1 及更高版本...

提前致谢，

米歇尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T19:27:27.760

无法覆盖已安装的核心位置硬件/软件堆栈并将您自己的值提供给所有其他应用程序的 CLLocation 调用。

# camera - WP8设置预览分辨率

> ID：15450769
> 
> 赞同：7
> 
> 时间：2013-03-16T14:59:31.943
> 
> 标签：camera, windows-phone-8, resolution

在我的 Lumia 920`GetAvailablePreviewResolutions()`上返回以下 4 种分辨率可用于目标设备：

*   1280x720
*   1024x768
*   800x448
*   640x480

但`SetPreviewResolutionAsync()`仅接受 1024x768。对于其他三个（支持的）解决方案，它会引发异常

> System.ArgumentException：值不在预期范围内。

我已经重新启动了我的手机，但它似乎也没有帮助。

==================================================== =========================

对于面临同样问题的未来开发人员，以下是我的发现。

诺基亚 Lumia 920 支持以下 6 种拍摄分辨率（及其对应的纵横比）：

```
3264X2448        4:3;
3552X2000       16:9;
2592X1936        4:3;
2592X1456       16:9 ;
2048X1536        4:3 ;
640X480          4:3 ; 
```

以及以下 4 个预览分辨率（及其相应的纵横比）：

```
1280X720        16:9; 
1024X768         4:3 ;   
800X448         16:9 ;    
640X480          4:3; 
```

对于 16:9 纵横比 capture_resolutions，仅使用 16:9 preview_resolutions。

参考：[http ://www.developer.nokia.com/Resources/Library/Lumia/#!advanced-photo-capturing.html](http://www.developer.nokia.com/Resources/Library/Lumia/#!advanced-photo-capturing.html)

参考： http: [//msdn.microsoft.com/en-us/library/windowsphone/develop/windows.phone.media.capture.photocapturedevice.setpreviewresolutionasync (v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/windows.phone.media.capture.photocapturedevice.setpreviewresolutionasync(v=vs.105).aspx)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T10:37:01.263

对于面临同样问题的未来开发人员，以下是我的发现。

诺基亚 Lumia 920 支持以下 6 种拍摄分辨率（及其对应的纵横比）：

```
3264X2448        4:3;
3552X2000       16:9;
2592X1936        4:3;
2592X1456       16:9 ;
2048X1536        4:3 ;
640X480          4:3 ; 
```

以及以下 4 个预览分辨率（及其相应的纵横比）：

```
1280X720        16:9; 
1024X768         4:3 ;   
800X448         16:9 ;    
640X480          4:3; 
```

对于 16:9 纵横比 capture_resolutions，仅使用 16:9 preview_resolutions。

参考：[http ://www.developer.nokia.com/Resources/Library/Lumia/#!advanced-photo-capturing.html](http://www.developer.nokia.com/Resources/Library/Lumia/#!advanced-photo-capturing.html)

参考： http: [//msdn.microsoft.com/en-us/library/windowsphone/develop/windows.phone.media.capture.photocapturedevice.setpreviewresolutionasync (v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/windows.phone.media.capture.photocapturedevice.setpreviewresolutionasync(v=vs.105).aspx)

# android - 将 layout_gravity 设置为自定义 LinearLayout 的中心

> ID：15450777
> 
> 赞同：0
> 
> 时间：2013-03-16T15:00:32.400
> 
> 标签：android, android-linearlayout, custom-component

我正在创建一个自定义 LinearLayout 只是为了测量和正确调整它的大小：

```
public class Frame extends LinearLayout
{
private int width;
private int height;
private Context context;

public Frame(Context context, AttributeSet attrs)
{
    super(context, attrs);
    this.context=context;
}

@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec)
{
    int height = MeasureSpec.getSize(heightMeasureSpec);
    int width = MeasureSpec.getSize(widthMeasureSpec);
    int newwidth=MeasureSpec
                           .makeMeasureSpec(height*480/720,MeasureSpec.EXACTLY);
    super.onMeasure(newwidth, heightMeasureSpec);
}
} 
```

它工作得很好，但它显然保持在度量改变之前的位置，因此它不再水平居中。如何覆盖自定义 LinearLayout 中的设置以使其显示在水平中心？

这就是我在他的 xml 文件中调用它的方式：

```
com.myproject.main.Frame 
android:id="@+id/frame"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:layout_above="@id/button"
android:layout_marginBottom="10dp"
android:gravity="center"
android:orientation="horizontal"
android:weightSum="480" > 
```

# java - 在 jsoup 选择器中使用逻辑或、非和和

> ID：15450780
> 
> 赞同：1
> 
> 时间：2013-03-16T15:00:59.370
> 
> 标签：java, html, jsoup

使用这个

```
for (Element link : links) {
    String linkHref = link.attr("href and !#");       
    String linkText = link.text();       
} 
```

我可以得到所有的链接`"a href=.."`

然而，也有一些

```
href="#" 
```

我不需要在我的字符串中。所以我需要做类似的事情

```
String linkHref = link.attr("href and !#") 
```

即我不想将链接保存`"#"`为href。

这是可能的还是我必须使用正则表达式？

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-14T13:27:41.663

阅读您的问题后，您似乎想**选择所有没有 '#' 作为 href 的锚标记**。您可以使用[:not Selector](http://jsoup.org/cookbook/extracting-data/selector-syntax)：

```
Elements links = doc.select("a[href]"); // All anchor tags with href
links = links.select(":not(href='#')"); // Filter out links which do have href=# 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-29T21:20:59.257

****选择器组合的****Jsoup**选择接受逗号**

 ****```
doc.select("[href], [src]");  // href **OR** src 
```

对于**AND**只需将它们组合在一个 CSS 选择器中。检查这个[答案](https://stackoverflow.com/a/7577653/1283715)。

```
doc.select("a[href][:not(href='#')]"); 
```****

# java - Maven 和 Clear Case

> ID：15450791
> 
> 赞同：1
> 
> 时间：2013-03-16T15:01:57.493
> 
> 标签：java, maven, clearcase

我是持续​​集成的新手，我正在寻找在使用 Eclipse 环境进行 Java 开发时使用 Maven 和 Clear Case 的基本概念的简要总结。

到目前为止，我发现的所有信息都过于笼统，如这些公司的网站所提供的那样，或者过于具体，即如何在特定模式下进行特定操作。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T15:07:50.513

除了[SCM 实现之外没有太多信息：ClearCase](http://maven.apache.org/scm/clearcase.html)（在 Maven 站点中），与[Eclipse 中的 ClearCase 插件一起](http://www-01.ibm.com/support/docview.wss?uid=swg21432752)使用，如[该线程](http://www.ibm.com/developerworks/forums/thread.jspa?threadID=425996)中所述。

考虑到每次执行“ `checkout`”代码时，ClearCase SCM 提供程序都会使用该命令创建一个新的快照视图`cleartool mkview`，这意味着它仅用于完整的 ClearCase 安装，而不是 CCRC（远程客户端）。

# php - 轻量级快速 PHP 日志记录

> ID：15450794
> 
> 赞同：1
> 
> 时间：2013-03-16T15:02:27.310
> 
> 标签：php, logging, lamp

假设我们需要在一个高流量请求繁重的 Web 应用程序上对服务器发出的每个请求的每个 php 调用记录一些数据，以基本上跟踪每个客户端采取的操作。我正在考虑将它们保存到内存中，然后一次性记录所有内容以防止频繁的磁盘访问。是否有一个已经可以重复使用的 PHP 框架？我需要在实际的生产服务器上执行此操作，所以我不想使用 xdebug 之类的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T15:19:38.170

**[Redis](http://redis.io/)**将是我的建议。

有一个使用 Redis 服务器的 php 库[Rediska 。](http://rediska.geometria-lab.net/)在某些时候，数据可以转储到数据库，即当服务器负载不是最高时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-16T20:24:22.637

我会使用`apc_store`，我将它用于轻型 php 请求时间分析器

[https://gist.github.com/aiphee/8004486cbd37b3f13efd271b8457cb38](https://gist.github.com/aiphee/8004486cbd37b3f13efd271b8457cb38)

# c# - 收集属性属性值

> ID：15450797
> 
> 赞同：3
> 
> 时间：2013-03-16T15:02:46.267
> 
> 标签：c#, code-generation, envdte, texttemplate

如果这有点令人费解，我提前道歉。

我有一个像这样的属性类：

```
[AttributeUsage(AttributeTargets.Property, AllowMultiple = true)]
public class RepositoryCollectionMethodAttribute : Attribute
{
    public string MethodName { get; set; }
    public RepositoryCollectionMethodAttribute(string methodName)
    {
        MethodName = methodName;
    }
} 
```

我正在使用 遍历我的类域`EnvDTE`，收集用于代码生成的类。找到一个用 . 装饰一个或多个属性的类`RepositoryCollectionMethod`。

这部分相对容易，所以对于每个装饰了这些属性的类，我现在都有一个*I*`IEnumerable<CodeProperty>` call `properties`。

现在我被困住了。由于这些 EnvDTE 对象的性质（它们似乎厌恶强类型和良好的文档/示例），我无法弄清楚如何`MethodName`从属性集合中提取不同的属性值列表，其中至少一个将具有一个`RepositoryCollectionMethod`装饰它。

换句话说，如果我有一个像这样的“Foo”类：

```
public class Foo
{
    public Guid FooId { get; set; }

    [RepositoryCollectionMethod("GetFoosByCategory")]
    public string Category { get; set; }

    [RepositoryCollectionMethod("GetFoosByClass")]
    [RepositoryCollectionMethod("GetFoosByClassAndLot")]
    public string Class { get; set; }

    [RepositoryCollectionMethod("GetFoosByLot")]
    [RepositoryCollectionMethod("GetFoosByClassAndLot")]
    public string Lot { get; set; }

} 
```

...给定`IEnumerable<CodeProperty>`of`Foo`的属性，我想生成以下列表：

*   GetFoosByCategory
*   GetFoosByClass
*   GetFoosByClassAndLot
*   GetFoosByLot

谁能帮我这个？

# ormlite-servicestack - OrmLite 可以处理返回多个结果集的查询吗？

> ID：15450800
> 
> 赞同：3
> 
> 时间：2013-03-16T15:02:56.670
> 
> 标签：ormlite-servicestack

使用 ServiceStack.OrmLite，如果查询返回多个结果集，我如何访问所有结果集并将每个结果集分配给相应的 POCO。例如，我有一个具有以下代码的存储过程：

```
SELECT * FROM Users
GO
SELECT * FROM Products 
```

我想为存储过程的结果分配 2 个 POCO 对象（List.User 和 List.Product）。并且将查询拆分为 2 个存储过程不是一种选择。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-27T03:46:47.037

我认为这是不可能的，这也不是一个好习惯。

在另一种情况下，您可以加载 1 个表及其引用。例如：

```
User
  int Id
  UserPermission Permissions

UserPermission
  int Id
  int UserId

-- this will load the references
var users = dbCon.LoadSelect<User>(); 
```

# parsing - 为什么scrapy每个项目返回两个？

> ID：15450801
> 
> 赞同：0
> 
> 时间：2013-03-16T15:03:00.757
> 
> 标签：parsing, html-parsing, scrapy, web-crawler

Scrapy 为我想抓取的每个项目返回两个结果。我可以稍后在 CSV 文件中删除重复项，但我觉得有一个我没有看到的更优雅的解决方案。我不知道，但我认为重复也可能减慢解析本身的速度。

```
class kickstarter(CrawlSpider):
    name = 'kickstarter_successful'
    allowed_domains = ['kickstarter.com']    
    start_urls = ['http://www.kickstarter.com/discover/successful']

    rules = (
        Rule(
            SgmlLinkExtractor(allow=r'\?page=\d+'),
            follow=True
        ),
        Rule(
            SgmlLinkExtractor(allow=r'/projects/'),
            callback='parse_item'
        )
    )

    COOKIES_ENABLED = False
    DOWNLOAD_DELAY = 2
    USER_AGENT = "ELinks (0.4pre5; Linux 2.6.10-ac7 i686; 80x33)"

    def parse_item(self, response):
        xpath = HtmlXPathSelector(response)
        loader = XPathItemLoader(item=kickstarteritem(), response=response)

        loader.add_value('url', response.url)
        loader.add_xpath('name', '//div[@class="NS-project_-running_board"]/h2[@id="title"]/a/text()')
        loader.add_xpath('launched', '//li[@class="posted"]/text()')
        loader.add_xpath('ended', '//li[@class="ends"]/text()')
        loader.add_xpath('backers', '//span[@class="count"]/data[@data-format="number"]/@data-value')
        loader.add_xpath('pledge', '//div[@class="num"]/@data-pledged')
        loader.add_xpath('goal', '//div[@class="num"]/@data-goal')

        yield loader.load_item() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:21:48.520

如果您在日志中看到两个不同的 url 都指向同一个页面，您可以自己规范化这些 url `process_value`：

```
Rule(
    SgmlLinkExtractor(
        allow=r'/projects/', 
        process_value=lambda v: v.replace('ref=card','')),
    callback='parse_item') 
```

# actionscript-3 - 在 AS3 中制作游戏菜单

> ID：15450808
> 
> 赞同：0
> 
> 时间：2013-03-16T15:03:51.130
> 
> 标签：actionscript-3

我很难弄清楚如何为我的游戏制作菜单。我想要的只是当游戏第一次启动时，有一个播放按钮，点击它会启动游戏。

现在我有 MainMenu 类：

```
package Classes 
{
import flash.display.Sprite;
import flash.events.Event;
import flash.events.MouseEvent;
import Main;

/**
 * Main Menu
 * @author Craig Jackson
 */

public class MainMenu extends Sprite
{

    public function MainMenu() 
    {
        var playButton:Sprite = new Sprite();
        playButton.graphics.beginFill(0x666666);
        playButton.graphics.drawRect(300, 300, 100, 100);
        playButton.graphics.endFill();

        addChild(playButton);

        playButton.addEventListener(MouseEvent.CLICK, clickedPlayButton);
    }

    public function  clickedPlayButton():void 
    {
        // Not sure what to do here
    }

} 
```

}

在我的 Main 类中，我创建了 MainMenu 类的一个实例并将其添加到舞台上。这工作正常。我的问题来自于在我的 MainMenu 类中引用 Main 类。因为我在我的 Main 类中有 function: playGame ，其中包含启动游戏所需的所有代码。我不知道如何从我的 MainMenu 类调用该函数或让它在我的 Main 类中触发它。

我想我需要分派一个事件，但我似乎无法理解事件分派的工作原理。

有谁知道在我的情况下如何调度事件或任何其他想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T15:57:40.960

您可以通过创建一个简单的自定义事件`new Event()`：

```
public function clickedPlayButton(e:MouseEvent):void 
{
    dispatchEvent(new Event("PLAY_CLICKED"));
} 
```

然后`Main.as`你可以像这样监听那个事件：

```
menu.addEventListener("PLAY_CLICKED", playClicked); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T17:02:45.430

在你的 playClicked 函数中做这样的事情。

```
removeChild(playButton);
gameScreen = new GameScreen(); //Assuming you have a movieclip called GameScreen which holds your gamescreen
addChild(gameScreen); 
```

将所有游戏图形和界面添加到 GameScreen 影片剪辑。

# c++ - CodeLite 如何构建应用程序？

> ID：15450809
> 
> 赞同：3
> 
> 时间：2013-03-16T15:03:52.297
> 
> 标签：c++, mingw, codelite

我已经安装了带有 minGW 和 wxWidget 的 CodeLite（我认为是这样）。我用 C++ 编写了程序，简单、小巧。问题是，当我点击构建菜单时，所有选项都是灰色的。

我检查了构建设置，我认为它们没问题，但我不确定。

如何在 CodeLite 中构建我的程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T17:54:18.167

你有开放的工作空间吗？codelite 需要一个工作区..

试试这个：从codelite的主菜单：工作区->新项目在显示的对话框中（左侧）选择：“控制台->简单可执行文件（g++）”填写项目名称和路径，然后单击确定。

现在尝试构建 (F7) - codelite 应该调用 g++。您现在可以用您的代码简单地替换默认的 main.cpp 内容并从那里继续

HTH，伊兰

# jquery - 触发动态数据的“点击”事件

> ID：15450812
> 
> 赞同：0
> 
> 时间：2013-03-16T15:04:23.227
> 
> 标签：jquery, triggers, delegates

我有一系列从 .csv 文件中读取时动态创建的复选框。在制作了一系列复选框后，添加了另一个复选框，即“全选”。这个想法是“全选”复选框，它也是动态创建的，当被选中时，将选中它上面的所有复选框。每个复选框都设置为将其名称属性放在下面的文本区域中。

这是从 csv 文件中提取HTML**后的示例。**

```
<div class="checkboxes">
   <input type="checkbox" class="article" name="Article 1" />Article 1 <br>
   <input type="checkbox" class="article" name="Article 2" />Article 2 <br>
   <input type="checkbox" class="select-all" name="select-all" />Select all
</div>
<textarea></textarea> 
```

现在我在文章复选框上使用 .delegate 并全选来注册点击事件

```
 //clicking dynamically created input.article
 $('div.checkboxes').delegate('input.article','click',function(){
     $('textarea').val($(this).attr('name') + '/n');  //adds 'name' attr and a linebreak
 });

 //clicking dynamically created select-all
 $('div.checkboxes').delegate('input.select-all','click',function(){
     $('div.checkboxes').find('input.article').prop('checked',true); //works to select all articles
 }); 
```

问题是，即使“全选”确实检查了所有文章复选框，它实际上并没有触发该行：

```
 $('textarea').val($(this).attr('name') + '/n');  //adds 'name' attr and a linebrea 
```

name 属性未放置在 textarea 中。

同样，所有文章复选框都被“全选”选中。它只是“触发”一个“点击”事件。

在 textarea 中，理想情况下会显示：

第1条

第二条

如何实现？

谢谢您的帮助。

解决：

```
 $('div.checkboxes').delegate('input.select-all','click',function(){

       if ($(this).is(':checked')){

      $('input.article[type=checkbox]').prop('checked',true);   
      $('input.article[type=checkbox]').each( function(){
        $(this).trigger('click');
      });
       }
  }); 
```

维伦丹克。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T15:15:56.203

做这些事情的方法有很多，但这里是对代码的简单更改：

```
 //clicking dynamically created input.article
 $('div.checkboxes').delegate('input.article','click',addname);

function addname(){
     $('textarea').val($(this).attr('name') + '/n');  //adds 'name' attr and a linebreak
};

 //clicking dynamically created select-all
 $('div.checkboxes').delegate('input.select-all','click',function(){
     $('div.checkboxes').find('input.article').prop('checked',true); //works to select all articles
     addname();
 }); 
```

注意 - 我注意到您似乎遗漏了很多`;`s，这是复制错字还是您在代码中遗漏了它们？

# java - 拉伸/收缩画布

> ID：15450816
> 
> 赞同：4
> 
> 时间：2013-03-16T15:04:37.717
> 
> 标签：java, android, android-canvas

我正在制作一个安卓游戏。我在 Galaxy sII 上测试我的应用程序。我取得了很大的进步。不幸的是，我忽略了为其他设备测试它。我知道我会遇到不同类型设备的不同分辨率问题。但我认为我可以通过安排我的坐标值来处理。但现在我看到这是一项非常艰巨的任务。我不能回到起点，因为我写了很多代码。

我的问题是，尽管我给出了 800x480 的值，但有什么方法可以将画布拉伸/收缩到其他分辨率？

PS：我的画布`Canvas canvas = holder.lockCanvas();`在我的线程中。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T16:18:19.647

您可以做的是使用画布作为视图绘制并在 xml 中设置布局参数。这将允许 Canvas 视图以最小的努力随着每个分辨率动态变化。

就像一个 SurfaceView。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T15:24:27.897

我对这件事并不完全胜任，但是您应该能够在 Canvas 上进行矩阵转换。看看这个[类似的问题是否](https://stackoverflow.com/questions/4391670/canvas-matrix-transformation)会提供一个起点。另外，请阅读[Wikipedia](http://en.wikipedia.org/wiki/Transformation_matrix)中的相关内容。

编辑：我现在想到这可能会将物体或物体的一部分放置在屏幕之外或引入透视问题......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T16:20:46.010

```
 canvas.scale(float scaleX, float scaleY). Try this. 
```

还要考虑文档中的提示。[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

# regex - Nginx 阻止/拒绝访问多个位置正则表达式

> ID：15450824
> 
> 赞同：8
> 
> 时间：2013-03-16T15:06:08.510
> 
> 标签：regex, apache, nginx

我使用 Nginx 作为我的 Apache 灌输的反向代理，并作为一项安全功能，它阻止除 localhost 之外的所有人访问 phpmyadmin、webalizer 等，但使用 nginx 会使 Apache 认为它是 localhost，因此它会向所有人公开显示它。

```
<LocationMatch "^/(?i:(?:xampp|security|phpmyadmin|licenses|webalizer|server-status|server-info))">
    Order deny,allow
    Deny from all
    Allow from ::1 127.0.0.0/8 \
        fc00::/7 10.0.0.0/8 172.16.0.0/12 192.168.0.0/16 \
        fe80::/10 169.254.0.0/16

    ErrorDocument 403 /
</LocationMatch> 
```

我需要将上述规则模式匹配正则表达式转换为以下内容。

```
location /phpmyadmin {
        proxy_pass         htt://127.0.0.1:8080/phpmyadmin;
        allow 127.0.0.1;
        deny all;
    } 
```

非常感谢任何熟悉 Nginx 正则表达式的人的帮助。

以下方法有效，但会破坏对搜索引擎友好的正常站点 url，例如 domain.com/forums/server-info

```
location ~ /(xampp|security|phpmyadmin|licenses|webalizer|server-status|server-info) {
    deny  all;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-16T18:38:36.933

由于 apache 正则表达式有 '^'，我们也可以使用 '^' 来强制匹配路径的开头。

```
location ~ ^/(xampp|security|phpmyadmin|licenses|webalizer|server-status|server-info) {
  proxy_pass         http://127.0.0.1:8080$request_uri;
  .... allow/deny directives come here
} 
```

[编辑] 括号内的匹配字符串存储在 $1 中。所以你可以试试

```
http://127.0.0.1:8080/$1 
```

如果那是你想要的。但是，我的理解是您希望将整个 uri 路径传递给 apache 服务器。在这种情况下，使用 nginx 变量 $request_uri 会更简单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T17:49:30.840

看起来你拥有它。为了安全起见，nginx 会从上到下读取，所以最后保留deny all：

```
location /(xampp|security|phpmyadmin|licenses|webalizer|server-status|server-info) {
  allow from ::1;
  allow from fc00::/7;
  allow from fe80::/10;
  allow 127.0.0.0/8;
  allow 10.0.0.0/8;
  allow 172.16.0.0/12;
  allow 192.168.0.0/16;
  allow 169.254.0.0/16;
  deny all;
} 
```

请注意，这将适用于任何 url ，例如`/phpmyadmin`等，包括`/someplaceelse/phpmyadmin`. 您可以在此匹配项前添加 ^ 仅用于`http://host/phpmyadmin`匹配项。尽管在这种情况下，您可能不得不将其拆分为多个位置指令。

我不确定您所说的搜索引擎友好是什么意思。如果您希望服务器信息可以访问，只需从正则表达式中删除它 | 案例。

对于 phpmyadmin 代理：

```
location ^/phpmyadmin {
    proxy_pass    http://127.0.0.1:8080; 
} 
```

nginx 将获取位置匹配中的所有内容并将其附加到`http://127.0.0.1:8080`

例如，您可以使用 ~ 来修改此行为。 [http://wiki.nginx.org/HttpCoreModule#location](http://wiki.nginx.org/HttpCoreModule#location)

# image - 如何在 flex 应用程序中拆分图像

> ID：15450827
> 
> 赞同：0
> 
> 时间：2013-03-16T15:06:11.267
> 
> 标签：image, actionscript-3, apache-flex, actionscript, bitmap

如何在 flex 应用程序中拆分此图像。事实上，我正在考虑从 xml 调用图像并将其拆分为“flex application”

我尝试了一些方法。但它不起作用！
我会很高兴你的帮助。

```
 <s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 
           xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600"  initialize="image_loader_completeHandler(event)">
<fx:Script>
    <![CDATA[
        import mx.events.FlexEvent;

        protected function image_loader_completeHandler(event:Event):void
        {
            var loader:Loader = new Loader();
            loader.contentLoaderInfo.addEventListener(Event.COMPLETE, leftpart);
            loader.load( new URLRequest("http://www.helpexamples.com/flash/images/image1.jpg"));

            function leftpart(e:Event):void 
            {

                var bmpd1:BitmapData = new BitmapData    (loader.width/2,loader.height,false)

                bmpd1.draw(loader,null,null,null,rec);

                var rec:Rectangle = new Rectangle   (0,0,bmpd1.width,bmpd1.height);

                var bmp:Bitmap = new Bitmap (bmpd1);

                image_loader.addChild(bmp);

            }
        }

    ]]>
</fx:Script>

<s:Image id="image_loader"   /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:51:52.053

无需将位图添加到图像元素，只需将 bitmapData 设置为源：

```
function leftpart(e:Event):void 
{
    var bmpd1:BitmapData = new BitmapData    (loader.width/2,loader.height,false)
    bmpd1.draw(loader);
    image_loader.source = bmpd1;
} 
```

您甚至不必创建一个`Bitmap`对象作为`source`接受`BitmapData`

# java - Tomcat - 不寻常的日志

> ID：15450834
> 
> 赞同：1
> 
> 时间：2013-03-16T15:06:54.767
> 
> 标签：java, spring-mvc, centos, tomcat7

我看到一些看起来可疑的日志条目。下面列出的没有一个请求实际上是针对该应用程序的。有人可以建议我该怎么做吗？这是我在服务器上部署的第一个应用程序。

**catalina.out 中的条目**

```
Mar 16, 2013 7:46:11 PM org.apache.catalina.realm.LockOutRealm authenticate
WARNING: An attempt was made to authenticate the locked user "admin" 
```

**localhost_access_log 中的条目**

```
210.44.159.49 - - [16/Mar/2013:00:24:04 +0530] "GET HTTP/1.1 HTTP/1.1" 400 -
210.44.159.49 - - [16/Mar/2013:00:24:04 +0530] "GET /index.php HTTP/1.1" 404 969
210.44.159.49 - - [16/Mar/2013:00:24:05 +0530] "GET /admin/index.php HTTP/1.1" 404 981
210.44.159.49 - - [16/Mar/2013:00:24:06 +0530] "GET /admin/pma/index.php HTTP/1.1" 404 989
210.44.159.49 - - [16/Mar/2013:00:24:06 +0530] "GET /admin/phpmyadmin/index.php HTTP/1.1" 404 1003
210.44.159.49 - - [16/Mar/2013:00:24:07 +0530] "GET /db/index.php HTTP/1.1" 404 975
210.44.159.49 - - [16/Mar/2013:00:24:08 +0530] "GET /dbadmin/index.php HTTP/1.1" 404 985
210.44.159.49 - - [16/Mar/2013:00:24:08 +0530] "GET /myadmin/index.php HTTP/1.1" 404 985
210.44.159.49 - - [16/Mar/2013:00:24:10 +0530] "GET /mysql/index.php HTTP/1.1" 404 981
210.44.159.49 - - [16/Mar/2013:00:24:12 +0530] "GET /mysqladmin/index.php HTTP/1.1" 404 991
210.44.159.49 - - [16/Mar/2013:00:24:13 +0530] "GET /typo3/phpmyadmin/index.php HTTP/1.1" 404 1003
210.44.159.49 - - [16/Mar/2013:00:24:14 +0530] "GET /phpadmin/index.php HTTP/1.1" 404 987
210.44.159.49 - - [16/Mar/2013:00:24:15 +0530] "GET /phpMyAdmin/index.php HTTP/1.1" 404 991
210.44.159.49 - - [16/Mar/2013:00:24:15 +0530] "GET /phpmyadmin/index.php HTTP/1.1" 404 991
210.44.159.49 - - [16/Mar/2013:00:24:16 +0530] "GET /phpmyadmin1/index.php HTTP/1.1" 404 993
210.44.159.49 - - [16/Mar/2013:00:24:17 +0530] "GET /phpmyadmin2/index.php HTTP/1.1" 404 993
210.44.159.49 - - [16/Mar/2013:00:24:17 +0530] "GET /pma/index.php HTTP/1.1" 404 977
210.44.159.49 - - [16/Mar/2013:00:24:18 +0530] "GET /web/phpMyAdmin/index.php HTTP/1.1" 404 999
210.44.159.49 - - [16/Mar/2013:00:24:19 +0530] "GET /xampp/phpmyadmin/index.php HTTP/1.1" 404 1003
210.44.159.49 - - [16/Mar/2013:00:24:19 +0530] "GET /web/index.php HTTP/1.1" 404 977
210.44.159.49 - - [16/Mar/2013:00:24:20 +0530] "GET /php-my-admin/index.php HTTP/1.1" 404 995
210.44.159.49 - - [16/Mar/2013:00:24:20 +0530] "GET /websql/index.php HTTP/1.1" 404 983
210.44.159.49 - - [16/Mar/2013:00:24:21 +0530] "GET /phpmyadmin/index.php HTTP/1.1" 404 991
210.44.159.49 - - [16/Mar/2013:00:24:22 +0530] "GET /phpMyAdmin/index.php HTTP/1.1" 404 991
210.44.159.49 - - [16/Mar/2013:00:24:22 +0530] "GET /phpMyAdmin-2/index.php HTTP/1.1" 404 995
210.44.159.49 - - [16/Mar/2013:00:24:23 +0530] "GET /php-my-admin/index.php HTTP/1.1" 404 995
210.44.159.49 - - [16/Mar/2013:00:24:23 +0530] "GET /phpMyAdmin-2.2.3/index.php HTTP/1.1" 404 1003
210.44.159.49 - - [16/Mar/2013:00:24:24 +0530] "GET /phpMyAdmin-2.2.6/index.php HTTP/1.1" 404 1003
210.44.159.49 - - [16/Mar/2013:00:24:24 +0530] "GET /phpMyAdmin-2.5.1/index.php HTTP/1.1" 404 1003
210.44.159.49 - - [16/Mar/2013:00:24:25 +0530] "GET /phpMyAdmin-2.5.4/index.php HTTP/1.1" 404 1003
210.44.159.49 - - [16/Mar/2013:00:24:26 +0530] "GET /phpMyAdmin-2.5.5-rc1/index.php HTTP/1.1" 404 1011
210.44.159.49 - - [16/Mar/2013:00:24:26 +0530] "GET /phpMyAdmin-2.5.5-rc2/index.php HTTP/1.1" 404 1011
210.44.159.49 - - [16/Mar/2013:00:24:27 +0530] "GET /phpMyAdmin-2.5.5/index.php HTTP/1.1" 404 1003
210.44.159.49 - - [16/Mar/2013:00:24:27 +0530] "GET /phpMyAdmin-2.5.5-pl1/index.php HTTP/1.1" 404 1011
210.44.159.49 - - [16/Mar/2013:00:24:28 +0530] "GET /phpMyAdmin-2.5.6-rc1/index.php HTTP/1.1" 404 1011
210.44.159.49 - - [16/Mar/2013:00:24:28 +0530] "GET /phpMyAdmin-2.5.6-rc2/index.php HTTP/1.1" 404 1011
210.44.159.49 - - [16/Mar/2013:00:24:29 +0530] "GET /phpMyAdmin-2.5.6/index.php HTTP/1.1" 404 1003
210.44.159.49 - - [16/Mar/2013:00:24:29 +0530] "GET /phpMyAdmin-2.5.7/index.php HTTP/1.1" 404 1003
210.44.159.49 - - [16/Mar/2013:00:24:30 +0530] "GET /phpMyAdmin-2.5.7-pl1/index.php HTTP/1.1" 404 1011
210.44.159.49 - - [16/Mar/2013:00:24:31 +0530] "GET HTTP/1.1 " 400 -
69.175.54.106 - - [16/Mar/2013:00:44:54 +0530] "GET / HTTP/1.0" 200 7959
66.249.75.14 - - [16/Mar/2013:04:27:44 +0530] "GET /robots.txt HTTP/1.1" 404 971
2.122.109.242 - - [16/Mar/2013:16:50:17 +0530] "GET / HTTP/1.1" 200 7959
2.122.109.242 - - [16/Mar/2013:16:50:17 +0530] "GET /css/style_new.css HTTP/1.1" 304 -
2.122.109.242 - - [16/Mar/2013:16:50:17 +0530] "GET /favicon.ico HTTP/1.1" 404 973
2.122.109.242 - - [16/Mar/2013:16:50:26 +0530] "GET /OfferedOnRent.html HTTP/1.1" 200 17666
2.122.109.242 - - [16/Mar/2013:16:50:26 +0530] "GET /images/20130313094059_0_thumb.jpg HTTP/1.1" 200 4020
2.122.109.242 - - [16/Mar/2013:16:50:26 +0530] "GET /images/20130312105214_0_thumb.jpg HTTP/1.1" 200 2961
2.122.109.242 - - [16/Mar/2013:16:50:26 +0530] "GET /images/20130312051229_0_thumb.jpg HTTP/1.1" 200 3714
180.166.74.227 - - [16/Mar/2013:19:40:30 +0530] "HEAD /manager/status HTTP/1.1" 401 -
180.166.74.227 - - [16/Mar/2013:19:40:31 +0530] "HEAD /manager/status HTTP/1.1" 401 -
180.166.74.227 - - [16/Mar/2013:19:40:31 +0530] "HEAD /manager/status HTTP/1.1" 401 -
180.166.74.227 - - [16/Mar/2013:19:40:31 +0530] "HEAD /manager/status HTTP/1.1" 401 -
180.166.74.227 - - [16/Mar/2013:19:40:32 +0530] "HEAD /manager/status HTTP/1.1" 401 -
180.166.74.227 - - [16/Mar/2013:19:40:32 +0530] "HEAD /manager/status HTTP/1.1" 401 -
180.166.74.227 - - [16/Mar/2013:19:40:32 +0530] "HEAD /manager/status HTTP/1.1" 401 -
180.166.74.227 - - [16/Mar/2013:19:40:32 +0530] "HEAD /manager/status HTTP/1.1" 401 -
180.166.74.227 - - [16/Mar/2013:19:46:09 +0530] "HEAD /manager/status HTTP/1.1" 401 -
180.166.74.227 - - [16/Mar/2013:19:46:09 +0530] "HEAD /manager/status HTTP/1.1" 401 -
180.166.74.227 - - [16/Mar/2013:19:46:10 +0530] "HEAD /manager/status HTTP/1.1" 401 -
180.166.74.227 - - [16/Mar/2013:19:46:10 +0530] "HEAD /manager/status HTTP/1.1" 401 -
180.166.74.227 - - [16/Mar/2013:19:46:10 +0530] "HEAD /manager/status HTTP/1.1" 401 -
180.166.74.227 - - [16/Mar/2013:19:46:10 +0530] "HEAD /manager/status HTTP/1.1" 401 -
180.166.74.227 - - [16/Mar/2013:19:46:11 +0530] "HEAD /manager/status HTTP/1.1" 401 -
180.166.74.227 - - [16/Mar/2013:19:46:11 +0530] "HEAD /manager/status HTTP/1.1" 401 - 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T15:30:34.070

这种情况一直在发生，而且~~可能~~ **绝对**不是一个有形的人。人们编写脚本来尝试从任何版本的 PHPMyAdmin 获得成功的结果，尝试对几乎所有可能的帐户名和密码进行 SSH 尝试，或者只是尝试任何可能存在潜在漏洞的东西。当您在公共开放 IP 地址上拥有服务器时，这些事情必然会发生。

当有人尝试访问网站时，`GET`会在 HTTP 服务器上执行请求。这显然是一个脚本（查看时间戳），它正在尝试`GET`通用名称，对于每个`GET`请求，都会在 Apache（或您的情况下为 Tomcat Apache）中创建一个日志条目，用于表示`GET`其结果。这些条目中的大多数是[HTTP 404](http://en.wikipedia.org/wiki/HTTP_404)错误，大多数人都知道这意味着找不到资源。

有多种资源可帮助服务器管理员跟踪或阻止此类活动：

[失败2禁令](http://www.fail2ban.org)

[拒绝主机](http://denyhosts.sourceforge.net/)

[日志观察](http://www.logwatch.org)

最好的建议是一，经常打补丁，特别是如果你看到一个列为安全补丁，二，使用防火墙，只打开从服务器到开放世界的绝对最需要的端口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T16:05:34.507

您是否已确保安装安全？

在我看来，经理应用程序可以从外部访问。
180.166.74.227 - - [16/Mar/2013:19:46:09 +0530] “HEAD /manager/status HTTP/1.1”401 -

您应该采取措施保护经理。 [https://www.owasp.org/index.php/Securing_tomcat#Securing_Manager_WebApp](https://www.owasp.org/index.php/Securing_tomcat#Securing_Manager_WebApp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T15:15:45.487

在我看来，有人试图入侵您的服务器。

# java - 将字符串从 CSV 文件解析为整数

> ID：15450837
> 
> 赞同：2
> 
> 时间：2013-03-16T15:07:08.097
> 
> 标签：java, parsing, csv

我有一个 CSV 文件，它显示一个名称后跟 3 个整数，如下所示。

```
"John","12","37","1000" 
```

我将 3 号`values`索引为`values[1]`,`values[2]`和`values[3]`.

我正在尝试使用以下方法解析 CSV 文件中的字符串：

```
int wins = Integer.parseInt(values[1]);
int losses = Integer.parseInt(values[2]);
int money = Integer.parseInt(values[3]); 
```

我的问题是 CSV 文件中的值已经被包围了`" "`，所以当我尝试解析它试图解析的字符串时`""12""`，`""37""`和`""1000""`。

有什么方法可以忽略`" "`CSV 文件中的 CSV 文件而不在文件中手动删除它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T15:09:55.797

您可以使用`str.replace("\"","")`替换字符串中的所有**"**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T15:11:18.903

您可以在引号之间取子字符串

```
values[1].substring(1, values[1].length() - 1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T15:10:11.390

你可以使用[`String.substring(int, int)`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#substring%28int,%20int%29)方法。

# jquery - 如果文本字段包含字符串，则 JS/jQuery 警报

> ID：15450839
> 
> 赞同：0
> 
> 时间：2013-03-16T15:07:26.267
> 
> 标签：jquery, indexof

我有一个使用 JS 日期选择器填充的文本字段 (id=#CAT_Custom_244677)。如果用户选择的日期导致字段值包含“2013”​​，我想显示警报。不能让它工作：

```
$('#CAT_Custom_244677').change(function() {
    if ( $(this).val().indexOf("2013") > -1 ) {
        alert("Yes");
    };
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T15:11:41.303

对我来说很好，尝试使用`keydown`or`keyup`让它在输入后立即触发：

```
<input type="text" id="CAT_Custom_244677" />

$('#CAT_Custom_244677').change(function() {
   if ( $(this).val().indexOf("2013") > -1 ) {
    alert("Yes");
   };
}); 
```

[http://jsfiddle.net/uTgn9/](http://jsfiddle.net/uTgn9/)

**使用键位：**

```
$('#CAT_Custom_244677').keyup(function() {
   if ( $(this).val().indexOf("2013") > -1 ) {
    alert("Yes");
   };
}); 
```

[http://jsfiddle.net/uTgn9/1/](http://jsfiddle.net/uTgn9/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T15:22:56.527

使用该`blur`事件可能会起作用，具体取决于正在使用的日期选择器。（适用于 JQuery 日期选择器）。

# python - PyOpenCL 在 OS X 上无法正常工作，没有输出

> ID：15450840
> 
> 赞同：0
> 
> 时间：2013-03-16T15:07:35.983
> 
> 标签：python, macos, pyopencl

我正在尝试让 PyOpenCL 在我的 iMac 上运行，该 iMac 运行带有 NumPy 1.5.1 和 Python 2.6.0 的 Mac OS X Lion。我首先使用easy_install安装了PyOpenCL，然后我尝试了这里的解释：[http ://wiki.tiker.net/PyOpenCL/Installation/Mac](http://wiki.tiker.net/PyOpenCL/Installation/Mac)

当我运行演示脚本（[http://documen.tician.de/pyopencl/#](http://documen.tician.de/pyopencl/#)）时，它显示了 OpenCL 设备（英特尔酷睿 i3 和 ATI Radeon HD5670），但是当我选择两者之一时，都打印 0.0

```
 Choose device(s):
[0] <pyopencl.Device 'Intel(R) Core(TM) i3 CPU         550  @ 3.20GHz' on 'Apple' at 0xffffffff>
[1] <pyopencl.Device 'ATI Radeon HD 5670' on 'Apple' at 0x1021b00>
Choice, comma-separated [0]:1
Set the environment variable PYOPENCL_CTX='1' to avoid being asked again.
0.0 
```

这里出了什么问题？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T13:39:33.573

在脚本的最后：

```
print la.norm(a_plus_b - (a+b)) 
```

因此，如果一切顺利，0.0 是预期的返回值......

# jsp - JSP Servlet 另存为弹出窗口

> ID：15450844
> 
> 赞同：0
> 
> 时间：2013-03-16T15:07:53.607
> 
> 标签：jsp, servlets, popup, save

我想将excel中的数据下载到用户选择的路径，在jsp中我给了ExportToExcel按钮，所以我想要下面的场景

当用户单击 ExportToExcel 按钮然后保存为弹出窗口时，我想从那里调用 servlet 并需要在 servlet 中接收从弹出窗口中选择的文件保存路径，然后最后我想将我的数据写入 excel 表和保存到用户选择的路径。保存后，我想在另一个 jsp 页面中向用户显示一条消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T15:42:25.703

有关文件保存路径的信息不会以任何方式发送到服务器。另外，当客户端在物理上不同的机器上运行时，您显然无法`new File(savedPath)`在服务器中使用，例如在非开发环境中会发生的情况。所以你的整个要求没有任何意义。*您应该将文件直接写入触发另存为*对话框的同一 HTTP 响应的 HTTP 响应正文。

目前尚不清楚您使用什么来生成 Excel 文件，但如果它是例如[Apache POI](http://poi.apache.org/)，那么它看起来像这样：

```
HSSFWorkbook workbook = new HSSFWorkbook();
HSSFSheet sheet = workbook.createSheet();
HSSFRow row = sheet.createRow(0);
HSSFCell cell = row.createCell(0);
cell.setCellValue("cell value");

response.setContentType("application/vnd.ms-excel"); // Tell browser what content type the response body represents,  so that it can associate it with MS Excel, if necessary.
response.setHeader("Content-Disposition", "attachment; filename=name.xls"); // Force "Save As" dialogue.
workbook.write(response.getOutputStream()); // Write created Excel sheet to response. This will be saved in the location specified by the user. 
```

# javascript - 停止删除按钮将用户发送回页面

> ID：15450850
> 
> 赞同：0
> 
> 时间：2013-03-16T15:08:23.607
> 
> 标签：javascript, keystroke

我当前的 Web 应用程序获得了用户的按键，但是，如果用户点击删除或退格按钮，它会将用户返回一个页面。他们是防止这种情况的一种方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T15:11:53.020

[jQuery](http://jquery.com/)让这一切变得简单。您可以轻松地将其替换为 vanilla JS 并`addEventListener()`用于 A 类浏览器和`attachEvent()`旧版 IE，并自行`keyCode`规范化`charCode`。但为什么？

```
$(document).on('keyup', function(e){
    var keycode =  e.keyCode ? e.keyCode : e.which;    
    if(keycode == 46){ // delete
        e.stopPropagation();
        e.preventDefault();
    }
}); 
```

退格键`keyCode 8`只能从焦点输入中检测到，并且可能仍会发出您不希望的行为，但它会让用户满意。

这是[keyCodes的完整列表](http://unixpapa.com/js/key.html)

# ios - 在 cocos2d/IOS 中获取背景颜色

> ID：15450855
> 
> 赞同：0
> 
> 时间：2013-03-16T15:08:50.953
> 
> 标签：ios, cocos2d-iphone

在我的项目中，我想让用户触摸屏幕并在他移动时画一条线。

我还想确保用户不会与他之前绘制的任何现有线（包括同一条线本身）相交。

我四处搜索线交叉算法或函数，但它们太复杂了，性能也不好。所以，我想到了另一种方法。通过设置背景和线条的颜色不同，如果我可以读取当前触摸点的颜色，那么我可以将它与线条颜色进行比较，看看是否确实发生了任何交叉。

我尝试使用 glReadPixel 方法，但它为所有未设置为背景或线条的触摸点返回绿色。我的背景是默认颜色（黑色），线条是默认白色。所有的线都画在同一层。我没有将背景绘制为单独的图层。只是使用默认值。

```
 -(void) ccTouchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{
    CCLOG(@"touch moved");
    UITouch* touch = [touches anyObject];
    CGPoint currentTouchPoint = [touch locationInView:[touch view]];
    CGPoint lastTouchPoint = [touch previousLocationInView:[touch view]];

    currentTouchPoint = [[CCDirector sharedDirector] convertToGL:currentTouchPoint];
    lastTouchPoint = [[CCDirector sharedDirector] convertToGL:lastTouchPoint];

    CCRenderTexture* renderTexture = [CCRenderTexture renderTextureWithWidth:1 height:1];
    [renderTexture begin];
    [self visit];
    Byte pixelColors[4];
    glReadPixels(currentTouchPoint.x, currentTouchPoint.y, 1, 1, GL_RGBA, GL_UNSIGNED_BYTE, &pixelColors[0]);
    [renderTexture end];
    CCLOG(@"pixel color: %u, %u, %u", pixelColors[0], pixelColors[1], pixelColors[2]); 

    CCLOG(@"last a=%.0f, b=%.0f", lastTouchPoint.x, lastTouchPoint.y);
    CCLOG(@"Current x=%.0f, y=%.0f",currentTouchPoint.x, currentTouchPoint.y);
    [touchPoints addObject:NSStringFromCGPoint(currentTouchPoint)];
    [touchPoints addObject:NSStringFromCGPoint(lastTouchPoint)];
}

-(void)draw{
    CGPoint start;
    CGPoint end;
    glLineWidth(4.0f);
    for (int i=0; i<[touchPoints count]; i=i+2) {
        start = CGPointFromString([touchPoints objectAtIndex:i]);
        end = CGPointFromString([touchPoints objectAtIndex:i+1]);
        ccDrawLine(start, end);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T15:56:32.003

您只能在 draw 或 visit 方法中使用 OpenGL 方法（此处为 glReadPixels）。这很可能是你一直变绿的原因。

在渲染纹理的开始/结束方法中，您只能访问渲染纹理，而不是帧缓冲区。

# c# - 尝试删除文件时如何调试“共享冲突”

> ID：15450860
> 
> 赞同：14
> 
> 时间：2013-03-16T15:09:26.363
> 
> 标签：c#, multithreading, io, ioexception, delete-file

我有一个多线程 C# 应用程序，它创建文件，打开它们进行处理，然后在完成后删除它们。此应用程序可以预期处理 1 到 100 个文件。有点随机（很可能归因于应用程序的多线程性质）当我在处理后尝试删除文件时遇到共享冲突。我的直觉说，维克，您在尝试删除文件之前没有正确关闭/处置文件。如果每个文件都发生这种情况，我会顺其自然，但事实并非如此。所以，我试图找出我在哪里犯了错误。那里的任何人都对如何调试这种类型的异常有任何指示？如果有意义的话，我很想看到文件上的堆栈跟踪。

我将尝试显示伪代码，但是，我的问题更多是关于如何调试这种类型的异常：

应用事件：

**操作开始**+= 创建新处理器。

**传输文件**+= Processor.ProcessFile 并将新的 Document 对象添加到处理器的 Document 集合中（作为路径，而不是文件）

**操作完成**+= Processor.Aggregate 文件，创建包含文件内容的新文件。当此方法完成时，它会调用 ProcessorFinished。

处理器事件：

**处理器完成**+= Application_CleanUpProcessor。在这个方法中，我处置了处理器，而处理器又处置了一个删除文件的文档对象。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-18T19:21:22.447

接受您需要一种快速的方法来验证是否要花更多时间来调试代码，或者编写好的测试来证明您的代码是可以的，您想要的是一种快速的方法来证明没有其他进程正在使用您的文件. 所以，让我们假设：

*   您的文件在本地磁盘（不是网络共享）上，并且
*   您怀疑防病毒、Windows 索引或其他东西正在锁定文件而不是您的代码
*   因此，在编写测试之前，您需要一种快速的方法来限定输入/输出

您希望能够运行您的程序，并查看导致您遇到共享冲突时该文件发生了什么。

我会这样做：

## 1\. 从 sysinternals 下载 ProcMon（10 秒）

Procmon 是一个出色的工具，您可以过滤到您希望在所有进程中按顺序看到的情况。[链接到 sysinternals 上的 procmon，来自 Microsoft](http://technet.microsoft.com/en-gb/sysinternals/bb896645.aspx)

## 2\. 提取并运行 Procmon，添加过滤器和亮点（30 秒）

打开procmon，为“路径”添加一个过滤器“以”开头*"*

 *![向 procmon 添加过滤器](../Images/790101250ef32fb5de513ec39d2b66fb.png)

现在为“结果”“是”“共享违规”添加一个亮点

![添加共享冲突过滤器](../Images/4506d98082a06e34f4854044d9fbe4b7.png)

最后，运行程序直到出现异常，然后在路径列中右键单击存在共享冲突的文件，然后选择“包含'<*此处的文件名*>'”以删除所有其他结果。您现在可以查看导致异常的文件的所有活动...

![Procmon 显示谁锁定了该文件](../Images/f2b8fde6696dbed23f7ba426abdff36a.png)

如果你想熟悉 procmon，这里是我用来为你伪造这一切的代码。它有一个锁定文件的侧线程和一个尝试锁定文件的主线程。只需创建一个 C# 控制台应用程序即可。它看起来像这样：

![这是我之前做的一个 - 锁又锁的罪魁祸首](../Images/56a28ca83c9b95a8459bb1f767fe4d98.png)

因此，在不到 2 分钟的时间内，您就可以查看您的代码是否有问题或其他原因。前几天我用它来确定我的 Com 组件实际上正在使用备用文件流，因此在尝试使用网络驱动器时抛出了异常。没有多少单元测试可以帮助我。

这是强制共享冲突的测试代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Threading.Tasks;
using System.IO;
using System.Threading;

internal class Program
{
    private static int lockPoint = 0;

    private static void Main(string[] args)
    {
        const string testFile = @"H:\test\test.txt";

        FileInfo testFileInfo = new FileInfo(testFile);

        if (!testFileInfo.Directory.Exists)
        {
            testFileInfo.Directory.Create();
        }

        //  Clear our example
        if (testFileInfo.Exists)
        {
            testFileInfo.Delete();
        }

        //  Create the test file
        using (FileStream fs = File.Create(testFile))
        using (StreamWriter sw = new StreamWriter(fs))
        {
            sw.WriteLine("test file content");
        }

        Task iLockTheFileFirst = new Task(() => {
            using (FileStream fsThread = File.Open(testFile, FileMode.Open, FileAccess.ReadWrite, FileShare.None))
            {
                Console.WriteLine("iLockTheFileFirst: I opened the file");

                //  Set lockPoint to 1 and let main try and open the file
                Interlocked.Exchange(ref lockPoint, 1);

                //  Wait until the main thread sets lockPoint to 3
                const int ifEqualTo3 = 3;
                const int replaceWith4 = 4;
                while (Interlocked.CompareExchange(ref lockPoint, replaceWith4, ifEqualTo3) != ifEqualTo3)
                {
                    Console.WriteLine("iLockTheFileFirst: Waiting for main thread to let me finish");
                    Thread.Sleep(1000);
                }
            }
            Console.WriteLine("iLockTheFileFirst: I have closed the file");
        });
        //  Start the thread and lock the file
        iLockTheFileFirst.Start();

        //  Now spin until the lockPoint becomes 1
        const int ifEqualTo1 = 1;
        const int replaceWith2 = 2;
        //  If lockPoint is equal to 1 (i.e. the main thread wants us to finish), then move it to 2
        while (Interlocked.CompareExchange(ref lockPoint, replaceWith2, ifEqualTo1) != ifEqualTo1)
        {
            Console.WriteLine("Main thread: waiting for iLockTheFileFirst to open the file");
            Thread.Sleep(1000);
        }

        try
        {
            Console.WriteLine("Main thread: now I'll try opening the file");
            using (FileStream fsMain = File.Open(testFile, FileMode.Open, FileAccess.ReadWrite, FileShare.None))
            {
                Console.WriteLine("Main thread: I opened the file, which shouldn't be possible");
            }
        }
        catch (IOException ioex)
        {
            Console.WriteLine("Main thread: IOException: " + ioex.Message);
        }
        catch (Exception ex)
        {
            Console.WriteLine("Main thread: some other exception: " + ex.Message);
        }

        //  Set lockPoint to 3 and let other thread finish
        Interlocked.Exchange(ref lockPoint, 3);

        //  Wait for other thread to finish
        const int ifEqualTo4 = 4;
        const int replaceWith5 = 5;
        while (Interlocked.CompareExchange(ref lockPoint, replaceWith5, ifEqualTo4) != ifEqualTo4)
        {
            Thread.Sleep(10);
        }

        Console.WriteLine("Main thread: Press enter to finish");
        Console.ReadLine();
    }
} 
```

这就是所有的人！*

# php - 带有 SQL 和 PHP 的 Dijkstra 算法

> ID：15450863
> 
> 赞同：0
> 
> 时间：2013-03-16T15:09:49.570
> 
> 标签：php, sql, dijkstra

我在 php 中有 dijkstra 算法，为了添加边缘，我必须编写：

```
$g= new Graph();
$g->addedge("b", "c", 8);
$g->addedge("b", "e", 2); 
```

我想从我的数据库中添加所有边。我写过：

```
$result= mysql_query("SELECT Start,End,Distance FROM test_stations");
while($row = mysql_fetch_array($result)){
    $g->addedge($row['Start'],$row['End'],$row['Distance']);
    $g->addedge($row['End'],$row['Start'],$row['Distance']);
} 
```

但似乎它没有添加边缘。当我尝试运行它时，它会打印出： Undefined variable: nodes 。如果我通过手动添加边缘来运行程序，它会完美运行。有人可以帮助我吗？

我对节点和边缘有这个功能。

```
public $nodes = array();

public function addedge($start, $end, $weight = 0) {
  if (!isset($this->nodes[$start])) {
    $this->nodes[$start] = array();
  }
   array_push($this->nodes[$start], new Edge($start, $end, $weight));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T15:16:11.790

我猜你在初始化边缘之前还没有初始化你的节点。

您是先从数据库中加载节点，还是使用指向未知节点的每条边动态创建节点？

# c++ - SQLite 数据库未打开

> ID：15450865
> 
> 赞同：3
> 
> 时间：2013-03-16T15:10:06.187
> 
> 标签：c++, sqlite, qt-creator

当我检查它在这一行中打开的数据库时，我遇到了这个问题，它给出了 true

```
 bool opened = PatternLibrary.open();
    if(opened){ 
```

但是当我尝试执行表创建查询时，它无法给出这个输出

```
 QSqlQuery::prepare: database not open 
```

这是我的代码

```
 PatternLibrary = QSqlDatabase::addDatabase( "QSQLITE" );
    PatternLibrary.setDatabaseName( "./Library.db" );
    bool opened = PatternLibrary.open();
    if(opened)
    {
       qDebug( "Connected!");
       query.prepare( "CREATE TABLE IF NOT EXISTS Pattern (patternName VARCHAR(30),RectangleID   INTEGER ,minWidth INTEGER, minHeight INTEGER, maxWidth INTEGER, maxHeight INTEGER, X Integer, Y INTEGER)" );
       bool create = query.exec();
       if(!create)
       {
           qDebug() <<PatternLibrary.lastError().text();
       }

    }
    else
    {
        qDebug() << PatternLibrary.lastError().text();
        qFatal( "Failed to connect." );
    } 
```

# c - 一元++优先顺序

> ID：15450873
> 
> 赞同：-4
> 
> 时间：2013-03-16T15:10:35.860
> 
> 标签：c, unary-operator

如果`int x=5;`我假设表达式`y=++x * ++x;`被评估为：

首先执行`++x`导致`x=6`然后再次`++x`导致`x=7`表达式然后评估使用相同推理的`y=x*x`值`y=49` 以下代码行

```
int z=5, x=5,y=0,p=0;
y=++x * ++x + ++x;
p= ++z + ++z * ++z; 
```

应该评估相同的值，`y`但`p`编译器会产生不同的答案。我可能按照优先顺序缺少一些东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T15:11:10.077

您的两个表达式都通过尝试在没有中间序列点的情况下多次修改一个值而导致未定义的行为。您的问题没有一般性的答案。

# c++ - c++ 向量、指针等

> ID：15450880
> 
> 赞同：1
> 
> 时间：2013-03-16T15:10:57.390
> 
> 标签：c++, pointers, vector

我正在做一些基本的碰撞检测作业。我有一个向量，其中包含一堆具有半径、位置、速度等成员的球体对象。我已将问题缩小到以下代码。

这是我得到的有效代码。对于矢量球体中的每个球体，它会检查矢量球体中的所有其他球体是否发生碰撞。

```
// Do the physics simulation
for ( unsigned int i = 0; i < spheres.size(); i++ )
{   
    spheres[i].computeForces(gravity, air_friction, walls, spheres);
} 
```

它指的是这个函数：（最后一个参数是球体向量）

```
// Compute all the forces between a sphere and the walls and other spheres and gravity and drag.
void computeForces(Vec3d gravity, double dragConstant, plane walls[6], std::vector< sphere > & spheres)
{
    clearForce();
    accumulateGravity( gravity );
    accumulateDrag( dragConstant );
    // Now check for collisions with the box walls
    for ( int j = 0; j < 6; j++ )
        accumulatePlaneContact(walls[j]);

    //Check for collisions with external spheres in the environment
    for ( unsigned int j = 0; j < spheres.size(); j++ )
        if ( this != &spheres[j] ) // Don't collide with yourself
            accumulateSphereContact( spheres[j] );
} 
```

我修改了一些东西，这样我就不必检查每个球体与其他球体，而只需一次比较一个，这不起作用。

```
// Do the physics simulation
for ( unsigned int i = 0; i < spheres.size(); i++ )
{
            //Here I can choose which spheres to test
    for (unsigned int j = 0; j < spheres.size(); j++)
    {
    spheres[i].computeForce(gravity, air_friction, walls, spheres[j]);
    }
} 
```

使用此函数：（最后一个参数是单个球体）

```
void computeForce(Vec3d gravity, double dragConstant, plane walls[6], sphere & s)
{
    clearForce();
    accumulateGravity( gravity );
    accumulateDrag( dragConstant );
    for ( int j = 0; j < 6; j++ )
    {
        accumulatePlaneContact(walls[j]);
    }
    if (this != &s)
    {
        accumulateSphereContact(s);
    }
} 
```

在调试模式下运行，它运行良好，似乎正确输入了所有函数并进行了计算，但就像力实际上并没有保存到球体对象中一样。我让球体相互穿过。（与墙壁、重力和阻力的碰撞都可以正常工作）。

有什么不同？我的第一个猜测是它与。我也尝试过使用 unordered_map 而不是具有相同结果行为的向量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T15:15:07.747

请注意，在第一种情况下，`computeForces()`包括对 的调用`clearForce()`，在每个球体上仅调用一次。在您修改后的情况下，您`computeForce()`为每个合作伙伴领域调用一次，并且这些调用中的每一个都调用`clearForce()`. 我想这就是问题所在。

# objective-c - UICollectionView 中不同单元格大小的自定义布局

> ID：15450883
> 
> 赞同：22
> 
> 时间：2013-03-16T15:11:15.877
> 
> 标签：objective-c, ios6, uicollectionview

我想使用新的 UICollectionView，但我不确定是否可以构建以下内容：

![在此处输入图像描述](../Images/3189001c63e7aefb30d63ef25cdca888.png)

如您所见，有两种不同的细胞类型。一种是人像，一种是风景。当我使用流布局时，它总是创建与最高单元格一样高的单元格行。不是我需要的这种“流体”布局。

有没有可能用 UICollectionView 实现这种布局？

有没有人做过这样的事情？有样品吗？我已经查看了许多教程和类参考...

谢谢！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-28T00:12:18.877

您可以查看[https://github.com/bryceredd/RFQuiltLayout](https://github.com/bryceredd/RFQuiltLayout)。看起来你可以用这个

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-25T15:28:44.853

FlowLayout 可以，但您必须自定义 FlowLayout 属性。

Apple 给出了很好的解释，请参阅[Collection View Programming Guide for iOS](http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/CollectionViewPGforIOS/UsingtheFlowLayout/UsingtheFlowLayout.html)向下滚动到[**Specifying the Size of Items in the Flow Layout**](https://developer.apple.com/library/ios/documentation/WindowsViews/Conceptual/CollectionViewPGforIOS/UsingtheFlowLayout/UsingtheFlowLayout.html#//apple_ref/doc/uid/TP40012334-CH3-SW6)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T15:16:48.817

这可能使用[UICollectionViewFlowLayout](http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/CollectionViewPGforIOS/UsingtheFlowLayout/UsingtheFlowLayout.html)

# perl - 寻找双打的话

> ID：15450889
> 
> 赞同：2
> 
> 时间：2013-03-16T15:11:45.747
> 
> 标签：perl

我将不得不（作为练习）编写一个 perl 程序，它检查文本文件中是否存在相同的单词，然后将它们打印到一个新文件中（没有双打）。

有人可以帮我吗。我知道使用 am// 函数可以查找单词，但是如何查找我可能不知道的单词呢？例如：如果文本文件有：

*你好，你好，你好吗？* 我可能希望将此文件复制到**没有**“Hello”之一的新文件中。当然，我不会知道文件中是否有任何重复的单词......这就是程序搜索重复单词的想法。

我有一个按字母顺序对单词进行排序的基本脚本，但是查找重复单词的第 2 步……我不知道。这是脚本（希望到目前为止是正确的）：

```
#!/usr/bin/perl 
use strict;
use warnings;

my $source = shift(@ARGV);
my $cible = shift(@ARGV);

open (SOURCE, '<', $source) or die ("Can't open $source\n");
open (CIBLE, '>', $cible) or die ("Can't open $cible\n");

my @lignes = <SOURCE>;
my @lignes_sorted = sort (@lignes);

print CIBLE @lignes_sorted;

chomp @lignes;
chomp @lignes_sorted;

print "Original text : @lignes\n";

sleep (1);

print "Sorted text : @lignes_sorted\n"; 

close(SOURCE);
close (CIBLE); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T15:58:43.290

从句子中删除单词比听起来更复杂。例如，如果在空格上拆分句子，您将得到“单词”，例如`Hello,`包含非单词字符，并且算作与真实单词不重复`Hello`。有许多变量需要考虑，但假设最简单的情况是除空格之外的所有字符都构成合法单词，您可以这样做：

```
$ perl -anlwe '@F=grep !$seen{$_}++, @F; print "@F";' hello.txt
Hello, how are you?
yada Yada this is test material dupe Dupe

$ cat hello.txt
Hello, Hello, how are you?
yada Yada this is test material dupe dupe Dupe 
```

如您所见，它不考虑`yada`和`Yada`重复。它也不会考虑`Hello`复制`Hello,`. 您可以通过添加使用`lc`或`uc`删除大小写依赖性来调整它，并允许使用不同的分隔符而不仅仅是空格。

我们在这里所做的是使用哈希`%seen`来跟踪之前出现过的单词。基本程序是：

```
while (<>) {         # reading input file or stdin
    @F = split;      # splitting $_ on whitespace by default
    @F = grep !$seen{$_}++, @F;   # remove duplicates
    print "@F";      # print array elements space-separated 
} 
```

的功能`!$seen{$_}++`是第一次输入新键时，表达式将返回真，其他时候返回假。它是如何工作的？这些是发生的不同步骤：

```
$seen{$_}     # value for key $_ is fetched
$seen{$_}++   # value for key $_ is incremented, undef -> 1
              # $foo++ returns the value *before* it is incremented, 
              # so it returns undef
!$seen{$_}++  # this is now "! undef", meaning "not false", as in true. 
```

对于 1 及以上的值，它们都为真，`not`运算符将它们全部否定为假。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T15:25:33.787

在 Perl 中：

```
#!/usr/bin/perl -w
use strict;

my $source = shift(@ARGV);
my $cible = shift(@ARGV);

open (SOURCE, '<', $source) or die ("Can't open $source\n");
open (CIBLE, '>', $cible) or die ("Can't open $cible\n");

my @input = sort <SOURCE>;
my %words = ();
foreach (@input) {
    foreach my $word (split(/\s/)) {
        print CIBLE $word." " unless ( exists $words{$word} );
        $words{$word} = 1;
    }
}

close(SOURCE);
close (CIBLE); 
```

基本思想是将整个文本拆分为单个单词（使用`split`函数），然后以该单词为键构建哈希。阅读下一个单词时，只需检查该单词是否已经在哈希中。如果是 - 它是重复的。

对于`Hello, Hello, how are you?`它打印的字符串：`Hello, how are you?`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T03:43:32.787

如果您不担心找到具有不同大小写的重复单词，那么您可以通过一次替换来做到这一点。

```
use strict;
use warnings;

my ($source, $cible) = @ARGV;

my $data;
{
    open ($source_fh, '<', $source) or die ("Can't open $source\n");
    local $/;
    $data = <$source_fh>;
}

$data =~ s/\b(\w+)\W+(?=\1\b)//g;

open (my $cible_fh, '>', $cible) or die ("Can't open $cible\n");
print $cible_fh $data; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-16T15:23:08.367

不知道如何在 Perl 中做到这一点，但可以使用 sed 和几个 fo Unix 实用程序轻松做到这一点。该算法将是：

1.  通过用换行符替换空格来分隔所有单词
2.  对单词进行排序
3.  通过带有 -c 选项的 uniq 发送已排序的单词列表（单词计数）
4.  删除所有出现一次的单词（第一列中的计数为 1）

该命令将执行为（将 \t 替换为 TAB，\n 替换为 ENTER）

```
sed 's/[ \t,.][ \t,.]*/\n/g' filename | sort | uniq -c | sed '/^  *\<1\>/d' 
```

希望有帮助。

# jquery - .children .val() 抛出未定义

> ID：15450892
> 
> 赞同：0
> 
> 时间：2013-03-16T15:11:57.623
> 
> 标签：jquery

我正在尝试形成验证，但 .val() 似乎给出了未定义的。

```
$(document).ready( function() {

  $('.formElem .input').each(function() {    
    $(this).children(".inputField").on("keyup", function() {

      console.log($(this).children('#username').val());

    });
  });
}); 
```

这是html部分

```
<form action="#" class="formElem" method="post" autocomplete="off">
 <div class="input username_container">
        <input class="inputField" id="username" maxlength="50" placeholder="Username" name="username" size="20" tabindex="1" type="text">               
        <div class="tip">
          <p class="blank error">Field cannot be empty</p>
     </div>
  </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T15:14:33.477

`'username'`不是传递给的有效参数`.children()`

`input`如果您以输入字段为目标，则将起作用，就像`.username`您在孩子上指定了一个类一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T15:28:30.540

这是一个愚蠢的问题。由于我不知道如何搜索而仅发布。但是感谢@Juhana 的回答

```
$(this).val(); 
```

# java - 如何从抽象类扩展枚举类？

> ID：15450897
> 
> 赞同：40
> 
> 时间：2013-03-16T15:12:34.280
> 
> 标签：java

有这样的东西：

```
public enum Token
{
     FOO("foo", "f"),
     QUIT("quit", "q"),
     UNKNOWN("", "");
     ...

     public parse(String s) {
         for (Token token : values()) {
              ...
              return token;
         }
         return UNKNOWN;
     }
} 
```

一个抽象类：

```
abstract class Base 
{
    private boolean run;

    Base() {
        run = true;

        while (run) {
             inp = getInput();
             act(inp);
        }
    }

    public boolean act(String s) {
        boolean OK = true;
        switch (Token.parse(inp)) { /* Enum */
             case FOO:
                    do_foo();
                    break;
             case QUIT:
                    run = false;
                    break;
             case UNKNOWN:
                    print "Unknown" + inp;
                    OK = false;
                    break;
             }
         }
         return OK;
    }
} 
```

和扩展器：

```
class Major extends Base
{

} 
```

我想要的是扩展`act`为 if`super`不处理它然后尝试在`Major`. 例如添加`PRINT_STAT("print-statistics", "ps")`- 但同时让`Base`类处理默认值，如`QUIT`.

这是一个完全错误的方法吗？

到目前为止我所做的是添加一个接口通常：

```
public interface BaseFace
{
      public boolean act_other(String inp);
} 
```

在课堂上`Base implements BaseFace`：

```
 case UNKNOWN:
          OK = act_other(inp); 
```

在课堂上`Major`：

```
 public boolean act_other(String inp) { 
       if (inp.equals("blah")) {
            do_blah();
            return true; 
       }
       return false;
  } 
```

这看起来像一个可用的设计吗？

**而且，主要问题：**

是否有一些好方法来扩展`Token`类，以便我可以使用与中相同的切换`Major`方法`Base`？我想知道是否有一个更好的设计，第二个是我是否必须创建一个新的 Token 类，`Major`或者我是否可以以某种方式扩展或以其他方式重用现有的。

* * *

编辑：概念点是`Base`让我可以在处理各种类型输入的不同项目中轻松重用的类。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-03-16T15:16:17.033

所有枚举都隐含地扩展枚举。在 Java 中，一个类最多可以扩展一个其他类。

但是，您可以让您的枚举类**实现一个接口**。

从[这个关于枚举类型的 Java 教程](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)：

> 注意：所有枚举都隐式扩展 java.lang.Enum。因为一个类只能扩展一个父类（参见声明类），Java 语言不支持状态的多重继承（参见状态、实现和类型的多重继承），因此枚举不能扩展其他任何东西。

**为 Java 8 编辑：**

从 Java 8 开始，接口可以包含[默认方法](https://docs.oracle.com/javase/tutorial/java/IandI/defaultmethods.html)。这允许您在接口中包含方法实现（但不包括状态）。尽管此功能的主要目的是允许公共接口的演变，但您可以使用它来继承自定义方法，定义多个枚举类之间的公共行为。

但是，这可能很脆弱。如果稍后将具有相同签名的方法添加到[java.lang.Enum](https://docs.oracle.com/javase/8/docs/api/java/lang/Enum.html)类，它将覆盖您的默认方法。（当一个方法同时在类的超类和接口中定义时，类实现总是获胜。）

例如：

```
interface IFoo {
    public default String name() {
        return "foo";
    }
}

enum MyEnum implements IFoo {
    A, B, C
}

System.out.println( MyEnum.A.name() );  // Prints "A", not "foo" - superclass Enum wins 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-16T16:01:19.400

Your problem seems a good candidate for the **Command Pattern**

It is a good practice to use an enum as a logical group of supported actions. IMO, having a single enum to group all supported actions will improve the readability of your code. With this in mind, the **Token** enum should contain all the supported action types

```
enum Token
{
   FOO("foo", "do_foo"),
   QUIT("quit", "do_quit"),
   PRINT_STATS("print", "do_print_stats"),
   UNKNOWN("unknown", "unknown")
   .....   

} 
```

Consider creating an interface Actor which defines an a method say act as shown below:

```
public interface Actor
{
   public void act();
} 
```

Instead of having a single **Base** class that does too may things, you can have one class per supported command for e.g.

```
public class FooActor implements Actor
{
    public void act()
    {
        do_foo(); //call some method like do_foo
    }
}

public class PrintActor implements Actor
{
    public void act()
    {
        print_stats(); //call some print stats
    }
} 
```

Finally, there will be a driver code that will take in as input the action to be performed, initialize the appropriate **Actor** and execute the action by invoking the **act()** method.

```
public class Driver
{
   public static void main(String[] args)
   {
      String command; // will hold the input string from the user.

      //fetch input from the user and store it in command

      Token token = Token.parse(command);

      switch(token)
      {
         case FOO:
                   new FooActor().act();
                   break;

         case PRINT_STATS:
                   new PrintActor().act();
                   break;
          .... 

      }

   }
} 
```

Such a design will ensure that you can easily add new commands and the code remains modular.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-16T15:28:10.767

As other say here, You can't extend enum. From design perspective this solution looks like it's too tightly coupled. I would advise to use more dynamic approach for this. You can create some kind of behavior map:

```
Map<Token, Runnable> behaviors; 
```

This map could be easily modified or replaced. You can even store some sets of those predefined behaviors. In example:

```
behaviors.get(Token.parse(inp)).run(); 
```

(some additional checks are needed here of course)

And last note: in most cases **avoid** inheritance

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-16T15:17:22.897

您需要考虑一个接口。毕竟，总是从一个接口开始，然后提供一个抽象类来提供一些默认实现，这是一种相当普遍的做法。如果你有一个接口，你可以让枚举实现这个接口。

# android - 使用“@style/Theme”后我的主题发生了变化

> ID：15450899
> 
> 赞同：2
> 
> 时间：2013-03-16T15:12:50.790
> 
> 标签：android, android-activity, themes

我在我的 Galaxy S2 中使用 Jelly Bean。如果我不在我的活动中使用 Theme 属性，它将使用“DefaultDevice”主题（我目前无法从 Manifest 中选择不知道为什么）。如果我不需要删除 TitleBar，我不会使用 Theme 属性。

有什么方法可以使用例如 Holo？也无法理解如何使用 HoloEverywhere。我想为我的应用程序获得不错的 EditText、Buttons 和 Spinners。当前的来自 Theme.Black，这太糟糕了！:( 必须像 2.X android 版本。

这是我的清单文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.traincoders.impl"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk 
        android:minSdkVersion="10" 
        android:targetSdkVersion="17" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:allowBackup="true">
        <activity
            android:label="@string/app_name"
            android:name=".MainActivity" 
            android:theme="@android:style/Theme.Black.NoTitleBar">

        </activity>
        <activity
            android:name=".SettingsActivity"
            android:label="@string/settings_title"
            android:theme="@android:style/Theme.Black.NoTitleBar">
        </activity>
        <activity
            android:name=".SplashActivity"
            android:label="@string/app_name"
            android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen">
            <intent-filter >
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T15:23:11.617

在您的清单中：

```
android:theme="@style/MyTheme" 
```

值/样式.xml：

```
<style name="MyTheme" parent="android:Theme">
</style> 
```

值-v11/styles.xml：

```
<style name="MyTheme" parent="android:Theme.Holo">
</style> 
```

有了这个，您将在后 HC 设备上拥有 Holo 主题，在前 HC 设备上拥有黑色主题。

# php - 如何将 2 个图像与 PHP（GD-GD2 库）混合，例如乘法、颜色燃烧、颜色道奇等

> ID：15450901
> 
> 赞同：1
> 
> 时间：2013-03-16T15:12:56.497
> 
> 标签：php, image, gd, blend, multiplication

我想用 GD 库在 PHP 中混合两个图像——比如乘法、叠加和其他混合模式。

我的图片 = İimage1.jpg -- imageblend.jpg 或 image3.png

请帮我写例子或一步一步教我？我找到了一些例子，但它们不起作用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-16T15:45:17.863

像 GD 中内置的混合模式并不多，因此您必须自己实现它们。不幸的是，它会比原生 C 实现慢得多，但这是可能的。只需加载两个图像并遍历整个基础图像，应用混合模式将每个单独的像素从顶部图像复制到基础图像。加/减/乘真的很简单，正常的 alpha 混合也相当简单（尽管只要你`imagealphablending`正确使用，alpha 混合是内置的）。我不知道颜色加深或颜色减淡的算法，但我确信快速搜索会找到如何做到这一点。`imagelayereffect`至于叠加，如果在复制顶部图像之前使用，它实际上是内置在GD中的。

我从[permadi.com](http://permadi.com/blog/2011/08/using-php-gd-to-create-glossy-icons-and-buttons/)中提取了这段代码以获得叠加效果。我还添加了一些用于乘法效果的替代代码，以向您展示如何将 PHP 用于混合模式算法。此代码假定顶部图像在任一维度上都不大于基本图像。

```
<?php
// GD images can be true-color or indexed color. This makes a difference for getting
// and setting pixels so we'll take note of each image.
// Load the base image. For overlays, this should be the template ("overlay.png" in source)
$baseImage = imagecreatefrompng("base.png");
$baseIsTrueColor = imageistruecolor($baseImage);
// Load the image to blend on top.
$topImage = imagecreatefrompng("top.png");
$topIsTrueColor = imageistruecolor($topImage);

// Get image dimensions
$baseWidth  = imagesx($baseImage);
$baseHeight = imagesy($baseImage);
$topWidth   = imagesx($topImage);
$topHeight  = imagesy($topImage);

// Destination X and Y - these values will center $topImage within $baseImage:
$destX = ($baseWidth - $topWidth) / 2;
$destY = ($baseHeight - $topHeight) / 2;

// OVERLAY MODE {
  // This line causes all GD operations to use the overlay algorithm
  // when blending pixels together.
  imagelayereffect($baseImage, IMG_EFFECT_OVERLAY);
  // Blend the top image onto the base image.
  imagecopy(
    $baseImage, // destination
    $topImage, // source
    // destination x and y
    $destX, $destY,
    // x, y, width, and height of the area of the source to copy
    0, 0, $topWidth, $topHeight);
// } OVERLAY

// MULTIPLY MODE {
  // Because we can't just use imagecopy, we have to iterate over all the pixels in
  // the entire image in order to apply the multiply algorithm to each individual pixel.
  // There is probably an easier way to handle true-color vs. indexed color in this
  // section but without testing the code this was the most likely to work. Depending on
  // how `imagecolorsforindex` and `imagecolorclosestalpha` work this section might work
  // a lot simpler.
  for ($x = 0; $x < $topWidth; ++$x) {
    for ($y = 0; $y < $topHeight; ++$y) {
      // First get the colors for the base and top pixels.
      $color = imagecolorat($baseImage, $x + $destX, $y + $destY);
      // If the image is true-color, we simply use bitwise operations to separate out
      // red, green, blue, and alpha from the result of imagecolorat above.
      if ($baseIsTrueColor) {
        $baseColor = array(
          'red'   => ($color >> 16) & 0xFF,
          'green' => ($color >> 8) & 0xFF,
          'blue'  => $color & 0xFF,
          'alpha' => ($color & 0x7F000000) >> 24,
        );
      }
      // If the image uses indexed color, we can get the color components by looking up
      // the color index in the image's color table.
      else {
        $baseColor = imagecolorsforindex($baseImage, $color);
      }

      $color = imagecolorat($topImage, $x, $y);
      // If the image is true-color, we simply use bitwise operations to separate out
      // red, green, blue, and alpha from the result of imagecolorat above.
      if ($topIsTrueColor) {
        $topColor = array(
          'red'   => ($color >> 16) & 0xFF,
          'green' => ($color >> 8) & 0xFF,
          'blue'  => $color & 0xFF,
          'alpha' => ($color & 0x7F000000) >> 24,
        );
      }
      // If the image uses indexed color, we can get the color components by looking up
      // the color index in the image's color table.
      else {
        $topColor = imagecolorsforindex($topImage, $color);
      }

      // Now perform the multiply algorithm.
      $destColor = array(
        'red'   => intval($baseColor['red']   * ($topColor['red']   / 255.0)),
        'green' => intval($baseColor['green'] * ($topColor['green'] / 255.0)),
        'blue'  => intval($baseColor['blue']  * ($topColor['blue']  / 255.0)),
        'alpha' => intval($baseColor['alpha'] * ($topColor['alpha'] / 127.0)),
      );

      // Now set the destination pixel.
      $colorIndex = imagecolorallocatealpha($baseImage, $destColor['red'], $destColor['green'], $destColor['blue'], $destColor['alpha']);
      // If we failed to allocate the color, try to find the already allocated color
      // that is closest to what we want.
      if ($colorIndex === FALSE) {
        $colorIndex = imagecolorclosestalpha($baseImage, $destColor['red'], $destColor['green'], $destColor['blue'], $destColor['alpha']);
      }
      // Now that we have a valid color index, set the pixel to that color.
      imagesetpixel($baseImage, $x + $destX, $y + $destY, $colorIndex);
    }
  }
// } MULTIPLY

// Set type of image and send the output
header("Content-type: image/png");
imagepng($baseImage);

// Release memory
imagedestroy($baseImage);
imagedestroy($topImage);     
?> 
```

我没有测试过代码，所以它可能无法正常工作，而且几乎可以肯定它比它需要的更复杂，但它应该作为你自己做这些事情的一个很好的起点。

# vi - 如何使用 vim 脚本在文件中以特定模式扩展数字范围

> ID：15450907
> 
> 赞同：-1
> 
> 时间：2013-03-16T15:13:24.847
> 
> 标签：vi, vim

在搜索列表时，有一些线程显示如何扩展数字范围的可视块。但是我的要求不一样。

在清理 LaTeX 文件时，我曾经得到`\cite{1}-\cite{10}`应该更改为`\cite{1,2,3,4,5,6,7,8,9,10}`. 有没有办法让这种清理更容易，以便 vim 脚本使用`s///gec`.

例如，我在一个函数（比如）中添加了几条清洗线`s///gec`，它们将通过在可视模式下按键来执行。我需要将新函数（比如说）添加到这个函数中。`s///ge``BasicClean()``<F5>``ExpandCite()`

例如，

```
function! BasicClean()
  " add a new function ExpandCite() for expanding \cite{1}-\cite{10}
  call ExpandCite()
  s/},\s*\\cite{/,/gec
  " ...
endfunc 
```

如何编写`ExpandCite()`函数来实现我的要求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T19:39:29.783

您可以`\=`在替换命令中使用后跟表达式来执行更复杂的替换。

```
:%s/\\cite{\(\d\+\)}-\\cite{\(\d\+\)}/\='\cite{'.join(range(submatch(1),submatch(2)),',').'}'/ge 
```

如需更多帮助，请参阅：

```
:h :s\=
:h submatch(
:h range( 
```

# javascript - 使用 Javascript/Jquery 根据其编号为单元格 HTML 表格着色

> ID：15450911
> 
> 赞同：2
> 
> 时间：2013-03-16T15:14:18.477
> 
> 标签：javascript, jquery, css, html-table

我有一组带有数字的 html 表格，其样式如下：

```
 <table border="1">
  <tr>
    <th>Day</th>
    <th>Time</th>
    <th>A</th>
    <th>B</th>
  </tr>
  <tr>
    <td>Monday</td>
    <td>0:00 - 8:00</td>
    <td>100</td>
    <td>120</td>
  </tr>
  <tr>
    <td></td>
    <td>8:00 - 18:00</td>
    <td>90</td>
    <td>100</td>
  </tr>
  <tr>
    <td></td>
    <td>18:00 - 0:00</td>
    <td>80</td>
    <td>60</td>
  </tr>
  <tr>
    <th>Day</th>
    <th>Time</th>
    <th>A</th>
    <th>B</th>
  </tr>
  <tr>
    <td>Tuesday</td>
    <td>0:00 - 8:00</td>
    <td>100</td>
    <td>120</td>
  </tr>
  <tr>
    <td></td>
    <td>8:00 - 18:00</td>
    <td>90</td>
    <td>100</td>
  </tr>
  <tr>
    <td></td>
    <td>18:00 - 0:00</td>
    <td>80</td>
    <td>60</td>
  </tr>
  </table> 
```

[jsbin.com/evakac/2/edit][1]

我想为该表的单元格着色：如果与同一列中的其他单元格相比，其中一个单元格中的数字较低，则颜色应为绿色。如果它是一个高数字，它应该是更密集的颜色。

我知道那里有像 jquery datatables ( [http://www.datatables.net/](http://www.datatables.net/) ) 这样的插件，但我还没有找到足够的插件。

有没有 javascript / javascript 插件可以帮助我？我更喜欢基于 jQuery 的解决方案。

更新：这是一个可以做到这一点的插件：

[http://geertdedeckere.be/shop/graphup/](http://geertdedeckere.be/shop/graphup/)

有谁知道这样的免费解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T15:54:26.557

看看[HeatColor](http://www.jnathanson.com/blog/client/jquery/heatcolor/index.cfm)。它应该让你做你想做的事并且它是免费的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T15:59:57.360

我相信您可以编写代码，这是一种非常简单的方法:)

我根据两个步骤为你做了一个例子：

1.  调查值并计算更大和更低的值
2.  根据结果​​绘制单元格

看看代码

```
 var result = new Array();

    // calculate 
    $('#source tr').each(function () {
        var id = $(this).attr('id');
        result[id] = new Array();
        result[id]['bigger'] = -1;
        result[id]['smaller'] = 99999999;

        $(this).find('td').each(function () {

            if ($(this).attr('class') === 'data') {
                var n = Number($(this).text());

                if (n > result[id]['bigger']) {
                    result[id]['bigger'] = n;
                }

                if (n < result[id]['smaller']) {
                    result[id]['smaller'] = n;
                }
            }

        })
    });

    // add some colors
    $('#source tr').each(function () {
        var id = $(this).attr('id');

        $(this).find('td').each(function () {

            if ($(this).attr('class') === 'data') {
                var n = Number($(this).text());

                if (n == result[id]['bigger']) {
                    $(this).css("background", "#CC0000");
                }

                if (n == result[id]['smaller']) {
                    $(this).css("background", "#00CC00");
                }
            }

        })
    }); 
```

完整示例位于[http://jsfiddle.net/kSxTA/](http://jsfiddle.net/kSxTA/) 这是一个非常简单的实现，只有 2 个值，但如果您有更多值，只需添加更多级别，或对值进行排序并匹配预定义颜色列表。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-16T15:29:35.520

看看[http://geertdedeckere.be/shop/graphup/](http://geertdedeckere.be/shop/graphup/)，但它不是免费的。

# c++ - “枚举类”的递增和递减

> ID：15450914
> 
> 赞同：27
> 
> 时间：2013-03-16T15:14:31.100
> 
> 标签：c++, c++11, enums

众所周知，C++03 中的递增和递减`enum`是非法的，因为 C++03`enum`可能不是连续的。但是 C++11 标准引入了新的`enum class`构造，根据 Wikipedia，它更加类型安全，因为它不是基于任何简单的可数类型构建的。所以现在，如果我们有一个枚举值的有界列表，我们可以写类似

```
enum class Colors { Black, Blue, White };
// ...
Colors color = Colors::White;
color++; 
```

它会正常工作吗（例如 will return 的增加和will `White`return`Black`的减少）？`Black``White`

**如果我们不能编写这样的代码，您是否知道来自`boost`或来自`Qt`为我们提供此功能的任何类似行为的类（正确的递增和递减）？**

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-16T15:23:34.593

> 它会正常工作吗

No. `enum`s 并非旨在以您默认描述的方式“环绕”。

并且 C++11`enum class`不保证连续值，就像您为 C++03 描述的一样`enum`。

不过，您可以为您的特定枚举定义包装行为。 **此解决方案假定值*是*contiguous**，就像您描述的枚举一样。

```
enum class Colors { Black, Blue, White, END_OF_LIST };

// Special behavior for ++Colors
Colors& operator++( Colors &c ) {
  using IntType = typename std::underlying_type<Colors>::type
  c = static_cast<Colors>( static_cast<IntType>(c) + 1 );
  if ( c == Colors::END_OF_LIST )
    c = static_cast<Colors>(0);
  return c;
}

// Special behavior for Colors++
Colors operator++( Colors &c, int ) {
  Colors result = c;
  ++c;
  return result;
} 
```

# c - 再次浮点精度

> ID：15450918
> 
> 赞同：5
> 
> 时间：2013-03-16T15:14:56.360
> 
> 标签：c, floating-point, floating-accuracy, ieee-754, floating-point-precision

昨天我问了一个[问题](https://stackoverflow.com/questions/15441139/accuracy-of-floating-point-arithmetic)，为什么我在浮点运算中失去了准确性。由于中间结果保存在 x87 寄存器中，我收到了一个答案。这很有帮助，但一些细节仍然让我无法理解。这是我在上一个问题中提出的程序的一个变体，我在调试模式下使用 VC++ 2010 Express。

```
int main()
{
    double x = 1.8939201459282359e-308; /* subnormal number */
    double tiny = 4.9406564584124654e-324; /* smallest IEEE double */
    double scale = 1.6;
    double temp = scale*tiny;
    printf("%23.16e\n", x + temp);
    printf("%23.16e\n", x + scale*tiny);
} 
```

这输出

```
1.8939201459282369e-308
1.8939201459282364e-308 
```

根据 IEEE 标准，第一个值是正确的。给`scale`变量一个值 2.0 给出了两个计算的正确值。我知道`temp`在第一次计算中是一个低于正常值的值，因此会失去精度。我也知道 的值`scale*tiny`保存在具有更大指数范围的 x87 寄存器中，因此该值的精度高于`temp`. 我不明白的是，当将值添加到`x`我们从较低精度值中得到正确答案时。当然，如果较低的精度值可以给出正确的答案，那么较高的精度值也应该给出正确的答案吗？这与“双舍入”有关吗？

在此先感谢，这对我来说是一个全新的主题，所以我有点挣扎。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-16T15:53:42.663

关键是由于较大的指数范围，这两个数字在 x87 表示中不是次正规的。

在 IEEE754 表示中，

```
x    = 0.d9e66553db96f × 2^(-1022)
tiny = 0.0000000000001 × 2^(-1022) 
```

但在 x87 表示中，

```
x    = 1.b3cccaa7b72de × 2^(-1023)
tiny = 1.0000000000000 × 2^(-1074) 
```

现在，当`1.6*tiny`在 IEEE754 表示中计算时，它被四舍五入，`0.0000000000002 × 2^(-1022)`因为这是最接近数学结果的可表示数字。将其添加到`x`结果中

```
 0.d9e66553db96f × 2^(-1022)
+ 0.0000000000002 × 2^(-1022)
-----------------------------
  0.d9e66553db971 × 2^(-1022) 
```

但在 x87 表示中，`1.6*tiny`变为

```
1.999999999999a × 2^(-1074) 
```

当它被添加时

```
 1.b3cccaa7b72de × 2^(-1023)
+ 0.0000000000003333333333334 × 2^(-1023)
-----------------------------------------
  1.b3cccaa7b72e1333333333334 × 2^(-1023) 
```

四舍五入到 53 个有效位的结果是

```
 1.b3cccaa7b72e1 × 2^(-1023) 
```

有效数字中的最后一位为 1。如果然后将其转换为 IEEE754 表示（有效数字中最多可以有 52 位，因为它是次正规数），因为它正好是两个相邻可表示数字之间的一半，`0.d9e66553db970 × 2^(-1022)`并且`0.d9e66553db971 × 2^(-1022)`它是默认情况下，四舍五入到有效数为零的最后一位。

请注意，如果 FPU 未配置为仅使用 53 位作为有效位，而是使用 x87 扩展精度类型的完整 64 位，则加法的结果将更接近 IEEE754 结果`0.d9e66553db971 × 2^(-1022)`，因此四舍五入。

实际上，由于 x87 表示具有更大的指数范围，因此即使有效位中的位数有限，IEEE754 次正规数的有效位也比 IEEE754 表示中的位多。因此，计算结果在 x87 中比在 IEEE754 中多一位。

# java - 确定 JFrame 的 GraphicsConfiguration？

> ID：15450925
> 
> 赞同：1
> 
> 时间：2013-03-16T15:15:26.523
> 
> 标签：java, swing, user-interface, multiple-monitors

我知道我可以`JFrame`在不同的显示器//`GraphicsConfiguration`设备上显示 a ，但是反过来呢：是否有可能从 a`JFrame`的参考中找到`GraphicsConfiguration`它所连接的位置？

`JFrame`作为一个附带问题：我是否可以通过传递一个特定的开始 a`GraphicsConfiguration`然后让用户以某种方式将其移动`JFrame`到另一个`GraphicsConfiguration`？（如果用户不可能做这样的事情，那么我认为我可以`GraphicsConfiguration`首先跟踪我附加的内容，所以无论如何我总能找到该信息）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T15:36:40.203

您可以使用以下代码查找使用`GraphicsConfiguration`的代码：

```
frame.getGraphicsConfiguration(); 
```

要设置`GraphicsConfiguration`你可以使用`Frame f= new JFrame(gc);`

# python - 如何在 Python 中更改 TkTable 中活动单元格的文本颜色？

> ID：15450928
> 
> 赞同：4
> 
> 时间：2013-03-16T15:15:39.300
> 
> 标签：python, tkinter, tk

我正在使用 Python 的 tkinter 模块制作的应用程序中使用 tktable。

当我选择一个单元格并输入它时，文本的颜色是白色的，很难阅读。例如，如何将此颜色更改为黑色。

我已经改变了“前景”颜色，但我没有改变。

```
self.table = tktable.Table(self, rows=5, cols=5, multiline=0, font=("Helvetica", 10), foreground='Red', background='White', cache=True, colstretchmode='all')

self.table.grid(row=0, column=1, padx=10, pady=10, sticky='e,w') 
```

找到此线程的人的完整解决方案：

```
import Tkinter as tk
import tktable

class App(tk.Frame):
    def __init__(self, parent):
        tk.Frame.__init__(self, parent)
        self.parent = parent
        self.Main()
        self.grid()

    def Main(self):
        self.table = tktable.Table(self, rows=5, cols=5, multiline=0, font=("Helvetica", 10), foreground='Black', background='White', cache=True, colstretchmode='all')
        self.table.tag_configure('active', foreground='black') # <<<ADDED LINE/ SOLUTION
        self.table.grid(row=0, column=0, padx=10, pady=10, sticky='e,w')

if __name__ == "__main__":
    root = tk.Tk()
    app = App(root)
    app.mainloop() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T20:44:51.737

When a cell is selected for editing, the 'active' tag comes into effect.

尝试类似：

```
self.table.tag_configure('active', foreground='black') 
```

# jboss - JBossMQ 配置 - jms_messages 填满，尽管设置。还有 MDB 线程数

> ID：15450933
> 
> 赞同：1
> 
> 时间：2013-03-16T15:16:10.203
> 
> 标签：jboss, jms, jbossmq

我放弃了 JBoss 社区论坛 - 从来没有在那里得到答案。所以在这里尝试。

我编写了一个小测试程序来帮助我诊断我在实际环境中看到的问题，但是我对 JBoss MQ 的无数可配置设置感到有点困惑，而且对它们都没有做出任何设置的事实更加困惑区别。

环境是JBoss 4.0.,4。

在实时环境中，从独立 Java 应用程序到远程机器上的 JBoss MQ 主题（由 MDB 提供服务）的 JMS 连接正在丢失。我没有任何关于它为什么丢失的信息（以及异常监听器启动）。

因此，我使用 Java 应用程序创建了一个测试环境，该应用程序将 TextMessages（包含递增的数字）发送到远程 JBoss 上的主题。

MDB 代码所做的只是在 TextMessage 中打印数字。

我注意到的第一件事是打印的线程称为“JMS SessionPool Worker-XX”，其中 XX 是 0 到 32。当我再次运行发送方应用程序时，XX 的值是 32 到 46。第三个run，值为 46 到 60。模式始终相同 - 在 JBoss 启动后第一次运行使用更多线程，后续运行使用 14 或 15 个线程。

那么，问题 1：对这种模式有解释吗？

在发送大约 15,000 条消息的运行期间，jms_messages 表在 JBoss 机器上建立。这意味着 JBoss MQ 跟不上，对吧？我假设内存必须高于 mysql-jdbc2-service.xml 中 MessageCache MBean 定义中指定的阈值。但是当我监控 JVM 内存时，它与为 HighMemoryMark 指定的 150MB 值相去甚远。我想我误解了有关 MessadeCache bean 定义的这条评论：“一旦 JVM 内存使用量达到高内存标记，缓存中的旧消息将开始存储在 DataDirectory 中”。我认为这意味着当堆使用量达到 150MB 时，收到的消息将开始写入 jms_messages，但显然我错了。

问题二：JBoss MQ 是在什么情况下开始写入 jms_messages 的？

最后一个问题 - 下面的容器配置设置是否对我看到的处理消息的线程数有任何影响？

```
<container-pool-conf>
    <MaximumSize>500</MaximumSize>
<container-pool-conf> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T19:06:03.060

自从我需要使用 JBoss MQ 以来已经有很长时间了......所以它并不能真正回答您的（有趣的）问题，但无论如何可能会有所帮助。

如果您使用内置的 HSQL 数据库作为 JBoss MQ 的消息存储，那么您将无法处理像在短时间内发送的 15k 条消息这样的负载。你需要切换到一个真正的数据库，除非你想放弃持久性消息存储（据我记得你可以配置它），这对性能有好处，但有些消息可能会永远丢失。

JBoss MQ 并不是有史以来最好的 JMS 提供者。事实上，它几乎不是生产就绪的解决方案，使用它真的很痛苦（没有好的文档，奇怪的配置，你现在正在经历的事情）。这就是为什么 JBoss 人从 JBoss 5.X 切换到 JBoss Messaging（实际上在商业 JBoss 4.X EAP - 而不是 GA - 他们一直在使用 JBoss Messaging）。

不是最好的选择是[切换到 HornetQ](http://docs.jboss.org/hornetq/2.2.14.Final/quickstart-guide/en/html/installation.html#installation.jboss.as4) - 它有据可查、功能强大并且可以处理非常大的负载。

# javascript - JQuery 从 .show() 中删除动画，并在显示元素后执行某些操作

> ID：15450937
> 
> 赞同：1
> 
> 时间：2013-03-16T15:16:33.733
> 
> 标签：javascript, jquery

我正在尝试使用 jquery 显示一个元素，然后在显示该元素后提交一个表单。我有以下代码。

```
$("#form").submit(function(e) {
        var self = this;
        e.preventDefault(); 

        $('#element').show({
            complete: function() {
                self.submit();
            },
        });
}); 
```

我遇到的问题是上面的代码在显示元素时添加了动画。我希望元素立即显示而不是缓和（即没有动画）。我尝试将持续时间选项设置为`duration:1`，但这似乎有不良行为并且根本不显示元素。我也尝试将`easing`选项设置为`null`，但也没有任何乐趣。

我也试过下面的代码（因为它没有动画）：

```
$("#form").submit(function(e) {
        var self = this;
        e.preventDefault(); 

        $('#element').show();
        self.submit();
}); 
```

但是这里的问题是在表单提交之前元素没有显示。

有什么想法可以在没有动画的情况下显示元素，一旦元素出现在屏幕上，就可以提交表单？

使用 jQuery 1.9.1

更新：

经过几个小时的拉扯，我遇到的问题似乎归结为 Safari 6.0.3 。似乎 Safari 在运行下一行脚本之前不会等待元素显示 - 所有其他浏览器都会这样做。即使只是设置一个很小的时间延迟似乎也可以解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T15:24:09.030

尝试：

```
$("#form").submit(function(e) {
        var self = this;
        e.preventDefault(); 

        $('#element').show();

        // Delay the form submission

        setTimeout(function()
        {
             self.submit();
        }, 1000);
}); 
```

它与您的示例相同，但我添加了代码以在初始操作（1000 毫秒）后一秒延迟表单提交（self.submit()）的执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T15:27:39.970

Could also:

```
$('#element').css({display: ''})
self.submit(); 
```

Since 'show' works on the `display` property.

Following your feedback; my next attempt would be along the lines of...

```
$("form").on('submit', function(e) {
  e.preventDefault();
  $("#element").css({display:''});
  submitForm($(this));
});

function submitForm(form) {
  form.is(":visible")? form.submit()
  :  setTimeout(function() {
       submitForm(form);
     }, 50);
} 
```

Hopefully that works but no guarantees as im on mobile

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T15:24:24.780

节目的默认持续时间是`400`。

我看到您已尝试将持续时间设置为 1。但是，我不确定您是如何做到的。

尝试这个 ：

```
$('#element').show( 0, function() {
                self.submit();
            } 
```

我刚刚在这些行上做了一些例子（没有提交表单，但是很简单）

你可以在[这里找到它](http://jsfiddle.net/A3etg/)

那里

```
 $("#sample").hide();
    $("#new").hide();
    $('#clickme').click(function() {
      $('#sample').show(0, function() {
        // Animation complete.
          $("#new").show("slow") // Instead of this you submit your form
      });
}); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-16T16:24:19.180

## 使用 $.Deffered

这是一个延迟示例，它将真正“等待”直到`#element`显示提交表单，无论动画类型或持续时间如何：

[小提琴](http://jsfiddle.net/AaronBlenkush/xHZ5F/)

```
$("#form").submit(function(e) {
    var self = this;
    $('#element')
        .show(duration)         //Use a duration of 0 to remove animation
        .promise()              //Get deferred object
        .done(function(){       //Set the "success" callback for the deferred
            self.submit();      //Submit the form
        });
    return false; //Prevent immediate submission
}); 
```

# java - Apache POI：如何格式化一列单元格？

> ID：15450938
> 
> 赞同：0
> 
> 时间：2013-03-16T15:16:33.950
> 
> 标签：java, apache-poi

我是 Apache POI 的新手，我正在尝试格式化一列单元格。我已经用适当的值创建了电子表格。我要做的就是从 mm:ss 更改格式。 0 到 HH:MM:SS。

如果有人能对此提供一些见解，包括代码，将不胜感激。

欢迎所有帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T15:26:21.120

org.apache.poi.ss.usermodel.DateUtil

```
convertTime(java.lang.String timeStr) 
          Converts a string of format "HH:MM" or "HH:MM:SS" to its (Excel) numeric equivalent 
```

should solve your requirement. For more details please study - [http://poi.apache.org/apidocs/org/apache/poi/ss/usermodel/DateUtil.html](http://poi.apache.org/apidocs/org/apache/poi/ss/usermodel/DateUtil.html)

Also you can check whether this following program give you some insight -

```
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.InputStream;
import org.apache.poi.hssf.usermodel.HSSFWorkbook;
import org.apache.poi.ss.usermodel.Cell;
import org.apache.poi.ss.usermodel.CellStyle;
import org.apache.poi.ss.usermodel.CreationHelper;
import org.apache.poi.ss.usermodel.Row;
import org.apache.poi.ss.usermodel.Sheet;
import org.apache.poi.ss.usermodel.Workbook;

public class ExcelExample {

    public static void main(String[] args) {
        InputStream inp;
        try {
            inp = new FileInputStream("workbook.xls");

        Workbook wb = new HSSFWorkbook(inp);
        CreationHelper createHelper = wb.getCreationHelper();

        Sheet sheet = wb.getSheetAt(0);
        for (Row row : sheet) {

            Cell cell = row.getCell(1);
            CellStyle cellStyle = wb.createCellStyle();
            cellStyle.setDataFormat(createHelper.createDataFormat().getFormat("hh:mm:ss"));
            cell.setCellStyle(cellStyle);

          }

        // Write the output to a file
        FileOutputStream fileOut = new FileOutputStream("workbook.xls");
        wb.write(fileOut);
        fileOut.close();
        System.out.println("Done...");
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

} 
```

Thanks

# java - 在drools excel决策表中声明对象

> ID：15450941
> 
> 赞同：0
> 
> 时间：2013-03-16T15:16:54.223
> 
> 标签：java, drools

我正在尝试使用 Drools 决策表。我面临的问题是，drools 没有为我分配当前对象的变量。

我从流口水那里得到这个错误：

> Drools 错误：无法解决规则编译错误患者

我的 excel 文件如下所示：

![在此处输入图像描述](../Images/d4bb0e634a03d87aef46babd94b7abf2.png)

我的部分实验室代码如下所示：

```
DecisionTableConfiguration dtconf = KnowledgeBuilderFactory.newDecisionTableConfiguration();
        dtconf.setInputType(DecisionTableInputType.XLS);
        dtconf.setWorksheetName("Sheet1"); 

        KnowledgeBuilder kbuilder = KnowledgeBuilderFactory.newKnowledgeBuilder();
        Resource r = ResourceFactory.newClassPathResource("rules.xls");
        kbuilder.add(r, ResourceType.DTABLE, dtconf);

        SpreadsheetCompiler compiler = new SpreadsheetCompiler();
        String drl = compiler.compile(r.getInputStream(), InputType.XLS);

        System.out.println(drl);

        if(kbuilder.hasErrors()) {
            for(KnowledgeBuilderError err : kbuilder.getErrors()) {
                System.out.println("Drools error: " + err.getMessage());
            }
            model.addAttribute("droolErrors", kbuilder.getErrors());
            return "index";
        }

        KnowledgeBase knowledgeBase = KnowledgeBaseFactory.newKnowledgeBase();
        knowledgeBase.addKnowledgePackages(kbuilder.getKnowledgePackages()); 
        StatefulKnowledgeSession dsess = knowledgeBase.newStatefulKnowledgeSession();

        for(Patient p : patients) {
            dsess.insert(p);
        }

        model.addAttribute("factCount", dsess.getFactCount());

        KnowledgeRuntimeLogger logger = KnowledgeRuntimeLoggerFactory.newFileLogger(dsess, "test"); 

        int res = dsess.fireAllRules();
        System.out.println(res);
        dsess.dispose();

        logger.close(); 
```

生成的 drl 如下所示：

```
package com.sorkmos.drools.domain;
//generated from Decision Table
import com.sorkmos.drools.domain.*;
// rule values at C11, header at C6
rule "Risks rules_11"
    when
        Patient(age == 75)
    then
        patient.setAge(22);
end

Drools error: Rule Compilation error patient cannot be resolved 
```

很明显我需要设置“患者”变量。但我不知道怎么做。一个正确的 drl 版本应该是这样的：

```
package com.sorkmos.drools.domain;
//generated from Decision Table
import com.sorkmos.drools.domain.*;
// rule values at C11, header at C6
rule "Risks rules_11"
    when
        Patient(age == 75);
        patient: Patient();
    then
        patient.setAge(22);
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T15:50:44.023

问题是从 Cell C 到 G 的 Patient 模式没有定义任何变量。如果您确定要拥有 2 个单独的 Patient 模式，那么您必须在那里绑定一个变量。当然，如果您绑定“患者”，请确保列 C 到 G 和 H 是互斥的。否则，您将得到重复的变量定义。根据我所掌握的稀缺信息，我猜你不想拥有不同的患者模式。如果是这种情况，只需将单元格 H8 与 [CG]8 合并，并确保值为患者：患者。

希望能帮助到你，

# c++ - C++ 程序中未定义的本机类型、临界区和句柄

> ID：15450943
> 
> 赞同：0
> 
> 时间：2013-03-16T15:16:55.577
> 
> 标签：c++, windows-8, visual-studio-2012, critical-section

我有一个编译问题，我无法在 Visual Studio 2012 上的 c++ 程序中解释。错误出现在程序的几个地方，这里是一个例子：

```
#ifndef     __WINMUTEX_H__
# define    __WINMUTEX_H__
# ifdef _WIN32
# include   <windows.h>

namespace Thread
{
class       WinMutex
{
public:
    WinMutex();
    ~WinMutex();
    void    lock();
    void    unlock();
    bool    trylock();
private:
    CRITICAL_SECTION    _mutex;
};

typedef WinMutex Mutex;
}
# endif
#endif 
```

编译器给了我一个错误（C2146）。基本上编译器似乎没有找到 CRITICAL_SECTION 标识符，Intellisense 也没有。正如我所说，此错误发生在程序的几个部分中，不仅针对 CRITICAL_SECTION，还针对 HANDLE 甚至 DWORD。

我尝试用 Windows 8 等效项 (synchapi.h) 替换 windows.h 包含，但添加“无目标体系结构”错误后我仍然收到错误。

奇怪的是，当我在 Windows 7 上的 Visual Studio 2010 项目中使用该代码时，它可以工作。

任何人都知道为什么会这样？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T15:57:41.187

如果您的项目是 Windows 应用商店应用项目，则 Win32 API 的某些部分不可用，显然包括 CRITICAL_SECTION 和相关。您必须使用 C++/CX 等价物，请参阅：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh771042.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh771042.aspx)

# python - 实时捕获 python-background-processes 输出

> ID：15450944
> 
> 赞同：0
> 
> 时间：2013-03-16T15:17:14.633
> 
> 标签：python, linux, logging, background, nohup

我有一个简单的长时间运行的 python 脚本，它使用`print("text to log")`. 我想将其作为后台进程运行，但输出仅在进程终止时转储到指定的日志文件中。有没有办法实时登录以便我可以跟踪日志文件？我不想在我的 python 脚本中引入不必要的复杂性；我宁愿让操作系统处理日志记录。因此，例如，我不热衷于使用`Logger`类。

我尝试了以下替代方案无济于事：

```
nohup python start.py > test.log 2>&1 </dev/null &
python start.py >> test.log 2>&1 & 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T15:20:09.497

尝试“无缓冲”运行 Python，即

```
python -u start.py > test.log 
```

# php - 如何在php fopen中写路径？

> ID：15450947
> 
> 赞同：16
> 
> 时间：2013-03-16T15:17:39.107
> 
> 标签：php, path

我对 php fopen 中的相对路径和绝对路径有一些问题。我有以下目录：

```
project:
    scripts:
        myscript.php
    logs:
        mylog.log 
```

我想打开`mylog.log`，`myscript.php`我不知道如何指定路径。我试过了

```
fopen('../logs/mylog.log', "a") 
```

但它不会工作。谢谢。

LE：谢谢你的回答。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-16T15:21:28.780

在 php 中，有几个全局常量可能对您有所帮助。即，`__DIR__`为您提供当前文件的目录（`'.'`只为您提供正在执行的根脚本的目录）。

所以你想要的是：

```
fopen(__DIR__ . '/../logs/mylog.log', "a") 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-16T15:20:40.563

您可以使用`$_SERVER['DOCUMENT_ROOT']`which 给出虚拟主机的文档根目录。

例如：`$_SERVER['DOCUMENT_ROOT']."/log/mylog.log"`

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-03-16T15:20:56.103

这应该有效：

```
fopen(__DIR__ . '/../logs/mylog.log', "a"); 
```

或在 PHP < 5.3 中：

```
fopen(dirname(__FILE__) . '/../logs/mylog.log', "a"); 
```

# c# - 使用 UITypeEditor 通过 List 添加实例

> ID：15450948
> 
> 赞同：1
> 
> 时间：2013-03-16T15:17:45.880
> 
> 标签：c#, list, designer, uitypeeditor

我创建了组件 MyComp，并在其中定义了一个名为 SlaveComps 的属性，该属性通过 UITypeEditor 进行管理。

```
public class MyComp : Component
{   
    public MyComp()
    {
        InitializeComponent();
    }
    public MyComp(IContainer container)
    {
        container.Add(this);
        InitializeComponent();
    }
    [Editor(Global.cSlaveCompsSelectorEditor, typeof(UITypeEditor))]
    [DesignerSerializationVisibility(DesignerSerializationVisibility.Hidden)]
    public List<MyComp> SlaveComps { get; set; }
}

public class SlaveCompsSelectorEditor : UITypeEditor
{
    public override UITypeEditorEditStyle GetEditStyle(ITypeDescriptorContext context)
    {
        return UITypeEditorEditStyle.Modal;
    }        
    public override object EditValue(ITypeDescriptorContext context, IServiceProvider provider, object value)
    {
        MyComp myComp = context.Instance as MyComp;
        if (myComp.SlaveModules==null)
            myComp.SlaveModules = new List<MyComp>();
        MyComp c1 = new MyComp();            
        myComp.Container.Add(c1);
        MyComp c2 = new MyComp();            
        myComp.Container.Add(c2);
        myComp.SlaveComps.Add(c1);
        myComp.SlaveComps.Add(c2);
        return myComp.SlaveModules;
    }
} 
```

我需要做的是创建 MyComp 实例的集合并将它们添加到 SlaveComps 属性。问题是在主 MyComp 所在的 .designer.cs 文件中，出现了创建的新实例，但设计器无法生成`.Add`将其添加到 SlaveComps 的命令。所以在设计器文件中有：`MyComp c1 = new MyComp(); MyComp c2 = new MyComp();`但相应的说明：`mainComp.SlaveModules.Add(c1); mainComp.SlaveModules.Add(c2);`仍然丢失。任何想法？

[编辑] 找到解决方案；使用`DesignerSerializationVisibility.Content`而不是`DesignerSerializationVisibility.Hidden`

# msbuild - MSBuild：目标输入和输出在第一次执行时失败

> ID：15450950
> 
> 赞同：10
> 
> 时间：2013-03-16T15:17:56.233
> 
> 标签：msbuild

我有一个正在尝试在 MSBuild 中执行的构建目标。目标有一些输入和输出，我放在那里以加快中间构建的时间。输入文件始终存在（头文件），另一方面，输出并不总是存在（XML 文件）。

可能跳过任务的中间构建是非常可取的，因为它在性能方面非常昂贵。

**无论如何，如果**输出已经存在，则输入和输出工作得很好。在这种情况下，MSBuild 会发出一条非常有用的消息，指出目标已被跳过，因为所有文件都是最新的。

当输出目录和文件不存在（第一次运行此任务）时，MSBuild 会失败并显示以下消息：

> 跳过目标 [targetname]，因为它没有输出。

添加详细详细信息告诉我原因是因为 @(OutputXML) 项目是空的。好的，那现在呢？因此，MSBuild 中的中间构建的整个概念似乎并不十分强大。

我的问题是，我怎样才能获得中间构建的好处，并且在没有输出的情况下仍然执行这个目标？（我希望我不必求助于编写自己的任务扩展）

这是我的构建脚本的相关部分：

```
<ItemGroup>
    <Headers  Include="..\**\*.h" />
    <OutputXML Include="$(OutputDir)\*.xml" />
</ItemGroup>

<Target Name="Doxygen" 
        Inputs="@(Headers)"
        Outputs="@(OutputXML)" >
    <Exec ... />
</Target> 
```

注意：我一直在 google、msdn 和这个网站上试图找到答案，但到目前为止都没有成功。虽然我发现了关于 MSBuild 的非常有用的信息。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T08:56:10.030

使用虚拟输出怎么样？

```
<ItemGroup>
 <Headers  Include="..\**\*.h" />
 <OutputXML Include="$(OutputDir)\*.xml" />
</ItemGroup>

<ItemGroup Condition="'@(OutputXML)' == ''">
 <OutputXML Include="$(OutputDir)\dummy.xml" />
</ItemGroup>

<Target Name="Doxygen" 
        Inputs="@(Headers)"
        Outputs="@(OutputXML)" >
 <Exec ... />
</Target> 
```

将 OutputDir 设置为 dummy.xml 时，即使文件不存在，它也不再为空。通配符表示您正在搜索任何 .xml 并且没有找到，但是指定一个特定的不会进行搜索，因此不关心它是否存在。

# ruby-on-rails - rails 2.3.2 项目：找不到 RubyGem uuid (>= 0) (Gem::LoadError)

> ID：15450951
> 
> 赞同：0
> 
> 时间：2013-03-16T15:18:03.020
> 
> 标签：ruby-on-rails, ruby-on-rails-2

我在 rails 2.3.2 上启动项目时遇到问题如何使用 rvm 设置我的 rails-environtment 以正常工作？这是我的终端所说的：

```
 script/server
/Users/bmalets/.rvm/gems/ruby-1.8.6-p420@global/gems/rubygems-bundler-1.1.1/lib/rubygems-bundler/regenerate_binstubs_command.rb:48: warning: parenthesize argument(s) for future version
=> Booting WEBrick
=> Rails 2.3.2 application starting on http://0.0.0.0:3000
/Users/bmalets/.rvm/rubies/ruby-1.8.6-p420/lib/ruby/site_ruby/1.8/rubygems.rb:779:in `report_activate_error': Could not find RubyGem uuid (>= 0) (Gem::LoadError)
    from /Users/bmalets/.rvm/rubies/ruby-1.8.6-p420/lib/ruby/site_ruby/1.8/rubygems.rb:214:in `activate'
    from /Users/bmalets/.rvm/rubies/ruby-1.8.6-p420/lib/ruby/site_ruby/1.8/rubygems.rb:1082:in `gem'
    from /Users/bmalets/Documents/ror_projects/bystroservis_old/config/environment.rb:23
    from /Users/bmalets/.rvm/gems/ruby-1.8.6-p420/gems/rails-2.3.2/lib/initializer.rb:111:in `run'
    from /Users/bmalets/Documents/ror_projects/bystroservis_old/config/environment.rb:9
    from /Users/bmalets/.rvm/rubies/ruby-1.8.6-p420/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
    from /Users/bmalets/.rvm/rubies/ruby-1.8.6-p420/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `require'
    from /Users/bmalets/.rvm/gems/ruby-1.8.6-p420/gems/activesupport-2.3.2/lib/active_support/dependencies.rb:156:in `require'
    from /Users/bmalets/.rvm/gems/ruby-1.8.6-p420/gems/activesupport-2.3.2/lib/active_support/dependencies.rb:521:in `new_constants_in'
    from /Users/bmalets/.rvm/gems/ruby-1.8.6-p420/gems/activesupport-2.3.2/lib/active_support/dependencies.rb:156:in `require'
    from /Users/bmalets/.rvm/gems/ruby-1.8.6-p420/gems/rails-2.3.2/lib/commands/server.rb:84
    from /Users/bmalets/.rvm/rubies/ruby-1.8.6-p420/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
    from /Users/bmalets/.rvm/rubies/ruby-1.8.6-p420/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `require'
    from script/server:3 

```

当我尝试为我的项目安装 gems 时，我有这个：

```
 rake gems:install
/Users/bmalets/.rvm/gems/ruby-1.8.6-p420@global/gems/rake-10.0.3/lib/rake/trace_output.rb:14:in `trace_on': undefined method `end_with?' for "rake aborted!":String (NoMethodError)
    from /Users/bmalets/.rvm/gems/ruby-1.8.6-p420@global/gems/rake-10.0.3/lib/rake/trace_output.rb:14:in `map'
    from /Users/bmalets/.rvm/gems/ruby-1.8.6-p420@global/gems/rake-10.0.3/lib/rake/trace_output.rb:14:in `trace_on'
    from /Users/bmalets/.rvm/gems/ruby-1.8.6-p420@global/gems/rake-10.0.3/lib/rake/application.rb:322:in `trace'
    from /Users/bmalets/.rvm/gems/ruby-1.8.6-p420@global/gems/rake-10.0.3/lib/rake/application.rb:176:in `display_error_message'
    from /Users/bmalets/.rvm/gems/ruby-1.8.6-p420@global/gems/rake-10.0.3/lib/rake/application.rb:169:in `standard_exception_handling'
    from /Users/bmalets/.rvm/gems/ruby-1.8.6-p420@global/gems/rake-10.0.3/lib/rake/application.rb:70:in `run'
    from /Users/bmalets/.rvm/gems/ruby-1.8.6-p420@global/gems/rake-10.0.3/bin/rake:33
    from /Users/bmalets/.rvm/gems/ruby-1.8.6-p420@global/bin/rake:19:in `load'
    from /Users/bmalets/.rvm/gems/ruby-1.8.6-p420@global/bin/rake:19
    from /Users/bmalets/.rvm/gems/ruby-1.8.6-p420/bin/ruby_noexec_wrapper:14 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T23:21:38.693

我重新安装了 ruby​​gems，它对我有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-31T11:22:51.073

```
rvm @global do gem uninstall -ax rubygems-bundler 
```

# c++ - 将行和列传递给函数

> ID：15450953
> 
> 赞同：1
> 
> 时间：2013-03-16T15:18:50.543
> 
> 标签：c++

我编写了一个以一维数组作为输入的函数。在 main() 部分中，我需要将二维数组的行作为输入传递给该函数。我不知道这是否可能以及如何（在 Matlab 中是可能的，但在 C++ 中，我不知道）。所以，如果有人能告诉我，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T15:25:47.677

Assuming your function signature is `void foo(int a[N])` and your input array is defined as `int x[M][N]`, you can pass the rows of it to `foo` by calling `foo(x[i])`, where `i` denotes the line number of your 2D array.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T15:32:33.090

我想你的函数看起来像这样：

```
void function(int row[]) { ... } 
```

首先要理解的是，没有数组类型的参数这样的东西。上面的`row`参数可能看起来像一个数组，但它不是。实际上，它是一个等价于`int* row`.

第二件事要理解的是，数组的名称可以隐式转换为指向其第一个元素的指针。假设您有一个数组`int array[] = {1, 2, 3, 4, 5};`，您可以将`function(array)`其传递给函数。但是，您实际上并没有传递数组。真正发生的是`array`被传递的参数被转换为指向其第一个元素的指针 - 因此是指向`1`数组中值的指针。正如我们刚刚看到的，函数参数`row`实际上是一个指针，因此可以将此指针传递给它的第一个元素。

现在，我想你有一个看起来像这样的二维数组：

```
int array[N][M] = { ... }; 
```

如果我们考虑`N`行`M`数和列数（您可以任意想象，但这与您的 matlab 知识一致），您知道`array[0][1]`将访问第一行的第二个元素（因为我们在 C++ 中从 0 开始索引）。如果您只提供一个下标，例如`array[0]`，这表示二维矩阵的一整行。那个表达式 ,`array[0]`是一个`int`s 的数组。由于这个`int`s 数组可以转换为指向其第一个元素的指针，因此您可以传递`array[0]`并且函数将接收`row`指向第一行（或`0`第 th 行）的第一个元素的指针。

所以你可以这样做：

```
function(array[0]); 
```

但是，因为`row`确实是一个指针，所以在函数内部，您对数组的实际大小一无所知。通常同时传递数组的大小：

```
void function(int row[], int size);

function(array[0], M); 
```

但是，在惯用的 C++ 中，使用这样的数组类型通常不是最佳实践。我们更喜欢使用标准库提供的容器。例如，a`std::array<std::array<int, M>, N>`是一个很好的固定大小的二维数组模拟：

```
void function(std::array<int, M> row);

std::array<std::array<int, M>, N> array;
// Fill array...
function(array[0]); 
```

现在您不必传递数组的大小，因为`std::array`和其他标准容器类型提供了获取大小的机制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T15:51:47.750

将列传递给函数可以很容易地完成：

```
void gimmeColumn(int x[]) {}

int main() {
    int table[10][10];
    int columnToPass = 3;
    gimmeColumn( table[columnToPass] );
} 
```

但是，不可能以类似的方式传递一行。您可以考虑编写自己的类来促进这种行为。

```
template<type T>
class SelectableTable {
private:
    T** table;
    int rows, columns;
public:
    SelectableTable( int numRows, int numColumns )
    :
        rows( numRows ),
        columns( numColumns )
    {
        table = new T*[columns];
        for( int i=0; i<columns; i++ )
            table[i] = new T[rows];
    }

    ~SelectableTable() {
        for( int i=0; i<columns; i++ )
            delete[] table[i];
        delete[] table;
    }

    T* operator[](int column) {
        return table[column];
    }

    int getRows() {
        return rows;
    }

    int getColumns() {
        return columns;
    }

    TableRow selectRow(int row) {
        return TableRow<T>( *this, row );
    }
};

template<type T>
class TableRow {
private:
    int row;
    SelectableTable<T>& table;
public:
    TableRow( SelectableTable<T>& fromTable, int selectedRow )
    :
        table(fromTable),
        row(selectedRow)
    {}

    T& operator[](int column) {
        return table[column][row];
    }

    int size() {
        return table.getColumns();
    }
}; 
```

然后你可以简单地使用它：

```
void gimmeRow( TableRow<int> row ) {
    for( int i=1; i<row.size(); i++ )
        row[i] = row[i-1];
}

int main() {
    SelectableTable<int> table(10,10);
    int rowToPass = 3;
    gimmeRow( table.selectRow(rowToPass) );
} 
```

当然，要让这段代码工作，你应该添加一些前向声明，最好使用标题。为了统一起见，您还可以实现一个 class `TableColumn`。

# unit-testing - 为什么单元测试不应该使用数据库？

> ID：15450957
> 
> 赞同：3
> 
> 时间：2013-03-16T15:19:19.003
> 
> 标签：unit-testing, testing, theory

阅读一篇文章[Evil Unit testing](http://www.javaranch.com/unit-testing.jsp)，我不确定为什么单元测试不应该使用数据库、网络或文件系统。如果它是一个网络应用程序呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-16T15:31:21.670

单元测试用于测试代码最小单元的功能。他们不应该对将来可能发生变化的任何外部资源有任何依赖。

举个例子，假设今天你编写了一个单元测试来测试一个执行两个数字相加的方法。

```
public void AddNumberTest()
{
    int a = 4; // Assume 4 coming from a database.
    int b = 5; // Assume 5 coming from a database.

    int c = a + b;
    Assert.True(9, c);
} 
```

这将在今天运行。这太酷了。

假设明天您来更改 Add 方法的功能。现在您应该能够运行测试并且它应该通过了。但是让我们假设数据库服务器（或外部资源）以某种方式关闭。然后测试失败。

即使有人更改了数据库中的值，您也需要注意要对测试进行的更改。

**那是你要的吗？？？绝对不。正确的**

这就是为什么我们编写应该独立于外部资源的单元测试用例。我们使用模拟和存根的地方。

**您应该能够运行一千次单元测试，并且它应该始终给出相同的结果。**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T15:31:12.520

单元测试并非旨在测试应用程序的完整功能。它旨在确保可定义的代码模块按预期工作。要测试应用程序，仅使用单元测试是不够的。您还必须执行功能测试和回归测试。数据库访问超出了单元测试的范围，因此您不会编写包含数据库访问的单元测试。您将在功能测试中包含数据库访问测试。同样，如果你有一个网络应用程序，你不会在单元测试中包含网络访问。在这两种情况下，您都将使用模拟已知数据对操纵从数据库或网络获取的数据的代码进行单元测试，并将实际访问权限排除在外。

重申一下，仅仅对应用程序进行单元测试是不够的。

# javascript - 在 HTML 页面中添加弹出框数据内容，Twitter Bootstrap

> ID：15450960
> 
> 赞同：0
> 
> 时间：2013-03-16T15:19:38.920
> 
> 标签：javascript, html, twitter-bootstrap

我使用 Twitter Bootstrap 2.0.1。我有这样一个按钮：

```
<a class="btn btn-info" rel="popover"
  title="today 12:11"
  data-content="I'm the content of the button 1 heyoo">Last text</a>
<a class="btn btn-info" rel="popover"
  title="yesterday 10:20"
  data-content="I'm the content of the button 2 heyoo">Last text</a> 
```

但是当我使用这段代码时，搜索引擎不会考虑“数据内容”。但我希望蜘蛛能看到“数据内容”。

如果我这样做，按钮会变大：

```
<a class="btn btn-info" rel="popover"
  title="today 12:11">I'm the content of the button 1 heyoo</a> 
```

这也是替代方法，但会创建重复数据：

```
<a class="btn btn-info" rel="popover"
  title="today 12:11"
  data-content="I'm the content of the button 1 heyoo">
  Last text
 <div style="display: none;">
 <span>I'm the content of the button 1 heyoo</span>
 </div>
</a> 
```

另一种选择是将“数据内容”放入页面，但使用字体 1 点写入。但我不认为这是一个好主意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:58:45.437

# xcode - 在 XCode 中使用克隆的 git 存储库

> ID：15450961
> 
> 赞同：1
> 
> 时间：2013-03-16T15:19:40.353
> 
> 标签：xcode, git, repository, project, cloning

我已经在 XCode 上克隆了我的 git 存储库，但现在我想编辑它：因为我在一个使用不同 IDE 和操作系统的团队中，所以我克隆的存储库只包含源代码。如何使用该存储库创建 xcode 项目？我在存储库的同一文件夹中创建了一个项目，然后将源代码拖到其中，但只有新创建的项目的默认文件 (main.cpp) 与“源代码管理”一起使用。

# jquery - 为 jquery 滑块添加自定义文本而不是数字 ResponsiveSlides.js v1.53

> ID：15450962
> 
> 赞同：0
> 
> 时间：2013-03-16T15:19:42.350
> 
> 标签：jquery

我试图向每张幻灯片添加自定义文本，而不是使用项目符号。我试图将样式分配给名称。

我正在使用 ResponsiveSlides.js v1.53 [https://github.com/viljamis/ResponsiveSlides.js/blob/master/README.md](https://github.com/viljamis/ResponsiveSlides.js/blob/master/README.md)

这是该功能中的滑块和寻呼机有什么想法吗？

和脚本：

```
<script>
 $(".rslides").responsiveSlides({
  auto: true,             // Boolean: Animate automatically, true or false
  speed: 500,            // Integer: Speed of the transition, in milliseconds
  timeout: 4000,          // Integer: Time between slide transitions, in milliseconds
  pager: true,           // Boolean: Show pager, true or false
  nav: false,             // Boolean: Show navigation, true or false
  random: false,          // Boolean: Randomize the order of the slides, true or false
  pause: true,           // Boolean: Pause on hover, true or false
  pauseControls: true,    // Boolean: Pause when hovering controls, true or false
  prevText: "Previous",   // String: Text for the "previous" button
  nextText: "Next",       // String: Text for the "next" button
  maxwidth: "",           // Integer: Max-width of the slideshow, in pixels
  navContainer: "",       // Selector: Where controls should be appended to, default is after the 'ul'
  manualControls: "",     // Selector: Declare custom pager navigation
  namespace: "rslides",   // String: Change the default namespace used
  before: function(){},   // Function: Before callback
  after: function(){}     // Function: After callback
});
</script> 
```

我的网站正在处理您会注意到滑块下方的寻呼机。忘记 ACF 错误。

[http://mrblind.dev/aluminium-blinds/](http://mrblind.dev/aluminium-blinds/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-20T20:21:36.920

每个数字都在 .rslides_tab 类中，并且具有锚标记，其类以 rslides1_ 开头。因此，您可以使用 .each() 更改所有数字的文本，例如：

```
var i=0;
var arr = [ "one", "two", "three", "four", "five" ];
$(".rslides_tabs a[class^='rslides1_']").each(function(){
 $(this).text(arr[i]);
 i++;
}); 
```

# zurb-foundation - Zurb Foundation SASS 变量

> ID：15450963
> 
> 赞同：2
> 
> 时间：2013-03-16T15:19:42.467
> 
> 标签：zurb-foundation

我正在使用 Zurb 的 Foundation 框架，我想知道如何编辑 SASS 变量的默认值。我在整个互联网上进行了搜索，但找不到任何可以帮助我的东西。

请在他们的网站上查看[此文档。](http://foundation.zurb.com/docs/components/top-bar.html)

在**`Available SCSS Variables`**部分下，提供了 SCSS 变量，但我不知道在更改值后将它们放在哪里。我没有通过谷歌搜索找到太多帮助，因为 Foundation 并没有那么老。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T22:28:48.153

创建 Foundation 项目后，查找包含所有这些变量的“_settings.scss”部分。

在此页面上向下滚动：[Zurb Foundation 4—Sass 文档](http://foundation.zurb.com/docs/sass.html)，找到该文件中代码的*“Foundation Global Settings and Mixins”*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-29T23:55:12.997

jOk，您可以配置全局变量 (_settings.scss)，还有模块级别的默认 (!default) 变量，您可以在在线文档中找到文档，即按钮[http://foundation.zurb。 com/docs/components/buttons.html](http://foundation.zurb.com/docs/components/buttons.html)（滚动到底部）。

因为这些变量是用 SASS 的 !default 分配的，所以可以在全局范围内覆盖它，但是您必须在声明样式之前使新变量可用。如，变量必须在按钮之前出现在级联中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T08:09:49.770

您应该查看**`Sass`**他们网站上已经解释过的内容，可以在[此处](http://foundation.zurb.com/docs/sass.html)找到。我建议你开始阅读 V3 的文档`Foundation 3`，因为这些文档更好地解释了如何通过 Foundation 来利用 Sass 的力量。您可以[从这里开始阅读，](http://foundation.zurb.com/old-docs/f3/sass.php)然后在此处[进一步阅读](http://foundation.zurb.com/old-docs/f3/sass-settings.php)。老实说，Zurb 在记录他们的 Foundation 框架方面做得非常出色，你需要知道的所有内容，如果不是全部，99% 已经在他们的文档页面上。

# html - 视频无法在浏览器中播放

> ID：15450965
> 
> 赞同：3
> 
> 时间：2013-03-16T15:20:08.770
> 
> 标签：html, video, html5-video, mime-types

我有 6 种不同类型的视频格式，即**.avi**、**.mkv**、**.mov**、**.ogv**、**.wmv**、**.mp4**。我尝试使用 HTML5 中的视频标签将这些视频嵌入到浏览器中。但没有在任何浏览器中播放视频。在**Firefox**中，它显示“**没有支持的 mime 类型的视频**”。在**Chrome**中，仅播放 .mp4 视频，其余视频未播放。在**IE8**中它什么也没显示。这是我的 HTML 代码：

```
<video width="300" height="200" controls>
    <source src="videos/airhorse_avi.avi" type="video/avi" title="Avi Videos">
</video>
<video width="300" height="200" controls>
    <source src="videos/airhorse_mkv.mkv" type="video/mkv" title="Mkv Videos">
</video>
<video width="300" height="200" controls>
    <source src="videos/airhorse_mov.mov" type="video/mov" title="Mov Videos">
</video>
<video width="300" height="200" controls>
    <source src="videos/airhorse_ogv.ogv" type="video/ogv" title="Ogv Videos">
</video>
<video width="300" height="200" controls>
    <source src="videos/airhorse_wmv.wmv" type="video/wmv" title="Wmv Videos">
</video>
<video width="300" height="200" controls>
    <source src="videos/spielberg_mp4.mp4" type="video/mp4" title="Mp4 Videos">
</video> 
```

是否可以在任何浏览器（如 Firefox、chrome、IE、safari、opera）中播放所有这些视频。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T22:58:18.657

简单的答案是，由于各种原因，并非所有浏览器都支持所有可用的编解码器/容器。

这里有一个相当最新的列表[http://en.wikipedia.org/wiki/HTML5_video](http://en.wikipedia.org/wiki/HTML5_video) 这个答案显示了如何自己测试特定的支持[网站特定部分的移动检测](https://stackoverflow.com/questions/15097554/mobile-detection-for-specific-parts-of-websites/15123708#15123708)

您提到（在其中一条评论中）您收到了一个错误......如果您让我们知道那是什么错误（如果`canPlayType()`没有回答问题），那么我们可以进行更多研究

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T16:44:42.453

看，我做了一些测试（我有时间只测试 AVI 和 MP4 格式），出于某种原因，在 Google Chrome 上，到目前为止只有 mp4 格式有效。

另一件事，像你一样编写代码是非常不必要的，试着这样做（正如我所说，它对我来说很好。）：

```
<video width="300" height="200" controls>
<source src="video/movie.mp4" type="video/mp4">
<source src="videos/movie.mp4" type="video/avi">
Your browser does not support the video tag.
</video> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T23:17:01.427

这应该足以在所有浏览器中播放视频（浏览器[中的视频支持](http://www.w3schools.com/html/html5_video.asp)）：

```
<video width="300" height="200" controls> 
    <source src="videos/airhorse_ogv.ogv" type='video/ogg; codecs="theora, vorbis"'/> 
    <source src="videos/spielberg_mp4.mp4" type='video/mp4'/> 
    <p> Video is not visible, most likely your browser does not support HTML5 video </p> 
</video> 
```

如果您添加此行，那就太好了：

```
<source src="videos/spielberg_webm.webm" type='video/webm' /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T12:32:01.527

为了涵盖大多数情况，将每个视频转换为 Ogg、Webm 和 MP4 版本，使用以下命令将其显示在网页上：

```
<video width="300" height="200" controls preload="none">
    <source src="video/myvideo.ogv" type="video/ogg">
    <source src="video/myvideo.webm" type="video/webm">
    <source src="video/myvideo.mp4" type="video/mp4">
</video> 
```

对于 IE8 及更早版本，请使用 flash（请参阅[http://videojs.com](http://videojs.com)）

对于 IE9，预加载标签必须存在并设置为自动或无。

# beanshell - 数组语法无效

> ID：15450971
> 
> 赞同：1
> 
> 时间：2013-03-16T15:20:39.870
> 
> 标签：beanshell

我尝试做一件简单的事情，拆分文本并将结果放入数组中

```
public void testSplit(){
    String x="test-hi-thank";
String y[]=x.split("-");
    System.out.println(y.length);
}

testSplit(); 
```

我收到了这个错误

```
C:\temp>java -cp bsh-2.0b4.jar bsh.Interpreter test.bsh
Evaluation Error: Parse error at line 3, column 17\.  Encountered: [ 
```

有什么可做的吗？

在一个类之外我们必须这样做： y=x.split("-");

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T14:37:50.610

Beanshell 不支持变量名上的 []，并且约定不鼓励这种构造，因为括号实际上是类型的一部分，而不是变量名。

因此，在 Beanshell 中，您必须将其声明如下：

```
String[] y = x.split("-"); 
```

因为 BeashShell 的类型很松散，所以您可以完全删除 String[]，它也可以正常工作。你也可以放弃一些其他的东西，这些东西可以让你摆脱 Java 的束缚，但是，随着脚本变得越来越复杂，你需要记住更多的东西。

```
testSplit(){
   x = "test-hi-thank";
   y = x.split("-");
   System.out.println(y.length);
}

testSplit(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-13T09:11:33.240

我曾经遇到过这个问题，我使用以下策略解决了这个问题：

* * *

```
public void testSplit(){

    String x="test-hi-thank";
    String first  =x.split("-")[0];
    String second =x.split("-")[1];
    String third  =x.split("-")[2];
}

testSplit(); 
```

* * *

希望能帮助到你。

克莱门。

# python - Python for 循环问题

> ID：15450980
> 
> 赞同：2
> 
> 时间：2013-03-16T15:21:13.347
> 
> 标签：python, for-loop

我在 python 中复制 for 循环时遇到问题。

这是我的 c 风格脚本，只有 for 循环方面。

```
for ($c=0 ; $c<size($verts); $c++)
{ 
//// do some code here 
$verts = remove($verts[c],$verts); /// remove this item from the $verts list
$c-=1; /// lower the index becuase an item was removed
     for ($n=0 ; $n<size($verts); $n++) 
         {
         if($condition)
         $verts = remove($verts[$n],$verts); /// remove this item from the $verts list
         $n-=1;  /// lower the index becuase an item was removed
         }        
} 
```

在 python 中，似乎不可能减去索引：

```
item = range(10); 
for i in item :
del item[i]
i-=1 # this doesn't do anything for the next interation 
```

在 Python 中编写上述 c 循环的最佳方法是什么？

编辑：这是我在python中需要的循环

```
count = range(len(vtx)) 
for num in count: 
if len(vtx) != 0:    
    p.append ([]); p[len(p)-1].append(vtx[0])
    v.append ([]); v[len(p)-1].append(vec[0])    
    a = vec[0] 
    del vtx[0]    
    del vec[0]
    count2 = range(len(vtx))
    n2  = 0;
    for num2 in count2:
        b = vec[n2]
        distance = math.sqrt((a[0] - b[0])**2 + (a[1]- b[1])**2 + (a[2]- b[2])**2);
        if distance <= threshold  : 
            p[len(p)-1].append (vtx[n2])
            v[len(p)-1].append (vec[n2])
            vtx.remove(vtx[n2])  
            vec.remove(vec[n2])
        else:
            n2+=1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T15:24:45.990

一种惯用的实现方式如下：

```
items = [el for el in items if <condition>] 
```

`<condition>`对于要*保留*的元素， where的计算结果为 true 。

例如，要获得 0 到 9 之间的偶数：

```
items = list(range(10))
items = [el for el in items if el % 2 == 0] 
```

当前代码的主要问题是它`for i in item`不会迭代索引，而是迭代元素本身。虽然可以使用索引，但它往往会导致相当非 Pythonic 的代码。此外，在迭代列表时修改列表会带来一些复杂性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T15:37:35.693

**编辑：** 根据您发布的算法，进行一些清理

```
p, v = [[vtx.pop(0)]],[[vec.pop(0)]]
while len( vtx ):       
   x = vtx.pop( 0 )
   b = vec.pop( 0 )
   a = v[ -1 ][ 0 ]       
   if threshold >= math.sqrt((a[0] - b[0])**2 + (a[1]- b[1])**2 + (a[2]- b[2])**2):
      v[ -1 ].append( b )
      p[ -1 ].append( x )
   else:
      v.append( [ b ] )
      p.append( [ x ] ) 
```

我不确定是什么

我不确定原始的 PHP 代码是否也能正常工作。或者它可能，但只是偶然而且肯定不是有效的。我假设您要遍历列表，删除与某个值匹配的项目。您似乎已经意识到这样做的一个基本问题是您正在修改您尝试迭代的列表。这在 Python 中非常简单：

```
for c in verts[:]:
    if remove_condition(c): 
        verts.remove(c) 
```

在这里，您正在制作 verts 列表的副本以通过 [:] 进行迭代每次迭代都使用 c，它是对 verts -copy- 中项目的引用。然后在原始列表上调用 remove()，值为 c，它会删除它遇到的值 c 的第一个实例。

显然，在涉及字典等的不同情况下，这里有很多细微差别，但这应该可以帮助您入门。

Python 教程通常是一个很好的资源[http://docs.python.org/2/reference/compound_stmts.html#for](http://docs.python.org/2/reference/compound_stmts.html#for)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T15:25:53.963

您似乎认为这`i`是您代码中的索引。它不是。`i`是列表中的一个值。要迭代一系列索引，请使用`for i in range(len(item)):`.

然而，从列表中删除项目的更好方法是使用列表推导，而不是使用索引手动迭代并使用`del`. 列表推导将创建一个新列表而不是修改一个新列表，但希望它们仍然适用于您的用例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-16T15:51:15.513

在迭代列表时从列表中删除项目可能非常棘手。最安全（最不容易出错）的方法是制作列表的副本，或者只包含您想要的元素，或者在之后删除您不想要的元素。

**例子：**

使用 for 循环在`items`. 这比编写列表推导式更长，但对于 python 新手来说可能更具可读性：

```
items = range(10)
new_items = []
for item in items:
    if item % 2 == 0:
        new_items.append(item)
items = new_items
print items 
```

输出：

```
[0, 2, 4, 6, 8] 
```

使用列表推导，这可以写成：

```
items = range(10)
items = [item for item in items if item % 2 == 0] 
```

[`enumerate`](http://docs.python.org/2/library/functions.html#enumerate)顺便说一句，从 C 代码迁移时，内置函数可以成为您的朋友。您可以像这样编写一个 for 循环：

```
items = ['foo', 'bar', 'spam', 'eggs']
for i, item in enumerate(items):
    print i, item 
```

输出：

```
0 foo
1 bar
2 spam
3 eggs 
```

# asp.net - iframe 在 MVC 视图中加载 asp.net web 表单

> ID：15450983
> 
> 赞同：7
> 
> 时间：2013-03-16T15:21:33.963
> 
> 标签：asp.net, html, iframe, asp.net-mvc-4

我有一个名为 ProductsController 的控制器，我使用 index 方法加载索引视图，其中包含一个名为 WebForm1.aspx 的 Web 表单，索引视图已设置并正常工作。现在我想在索引视图中添加一个 iframe 来显示 WebForm1.aspx 的内容。两个视图都位于 MVC 项目中的同一文件夹 Views/Products 中。我做了以下事情：

```
 <iframe src="/ProductsController/Index?WebForm1.aspx" width="1000" height="400">

    </iframe> 
```

我的 Views/web.config 设置为下一个：

WebForm 继承如下：

```
<%@ Page Language="C#" Inherits="System.Web.Mvc.ViewPage<dynamic>" %> 
```

然而 iframe 显示一条错误消息：“HTTP 404 - 您正在查找的资源（或其依赖项之一）可能已被删除、名称已更改或暂时不可用。”

我还尝试将下一行添加到我的 global.asax 文件中：

```
RouteTable.Routes.RouteExistingFiles = true; 
```

但也失败了，

**我让 iFrame 显示但为空**的唯一方法是使用完整的物理路径，如下所示：

```
 <iframe src="C\:Folder1\Folder2\ ...\Views\Products\WebForm1.aspx" width="1000" height="400">

    </iframe> 
```

有人可以解释为什么它不起作用吗？以及如何让它发挥作用？谢谢你。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-16T15:42:26.637

你应该把你的 .aspx 文件（webform）放到views 文件夹之外，因为通常来自浏览器的任何调用都会被“BlockViewHandler”（你可以在views 文件夹的web.config 文件中看到）阻止。

在您创建的任何其他文件夹中，它应该在没有控制器的情况下工作。例如，如果您将它放在“/webforms/webform1.aspx”中，那么该路径就是在 iframe 中使用的路径。

**更新**这是问题中新信息的示例，希望对您有所帮助：

控制器：

```
public class ProductsController : Controller
{
    public ActionResult Index()
    {
        return View(); //Razor file in  Views/Products/Index.cshtml
    }

    public ActionResult ActionThatRetrieveAndAspx()
    {
        return View("WebForm1"); //Aspx file Views/Products/WebForm1.aspx
    }
} 
```

Products Index.html 的内容，通过 iframe 调用 aspx 文件：

```
@{
    ViewBag.Title = "Index title";
}

<h2>Index</h2>

Calling aspx file from iframe:

<iframe src="@Url.Action("ActionThatRetrieveAndAspx","Products")" width="1000" height="400"></iframe> 
```

Products WebForm1.aspx的内容：

```
<%@ Page Language="C#" Inherits="System.Web.Mvc.ViewPage<dynamic>" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
    <head runat="server">
        <title>Title</title>
    </head>
    <body style="background-color: #999999; padding: 10px;">
        This is ActionThatRetrieveAndAspx WebForm1.aspx
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T15:25:41.290

You can point to the actual location of the Webform.aspx file.

```
<iframe src="/FolderPath/WebForm1.aspx" width="1000" height="400">

    </iframe> 
```

Your code asssumes that the MVC runtime would be looking at a folder called "ProductsController" and a sub folder called "Index"

If you Webform1.aspx file is really in that directory structure, change the src attribute to `src="/ProductsController/Index/WebForm1.aspx"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-15T18:04:37.787

我将 webform 放入 MVC 项目的根文件夹中，并像这样调用它：

```
<iframe src="~/webform.aspx"...></iframe> 
```

我没有在控制器中引用它。

这种技术的一个很好的好处是，您可以通过在 target="_parent" 中打开 web 表单中的导航链接来轻松导航回您的 MVC 网站

# python - 在没有按钮单击事件的情况下调用函数

> ID：15450985
> 
> 赞同：1
> 
> 时间：2013-03-16T15:22:03.237
> 
> 标签：python, python-2.7, pyqt, pyqt4

我正在尝试使用 Button Press 和 Relase 事件调用 2 个函数。当我在没有这些事件的情况下（直接在我的代码中）调用相同的函数时，它们没有提供所需的输出。

当我单击“连接按钮”时：

*   On Button Press Event -> Call Function connect (这将在客户端和服务器之间创建连接)
*   On Button Release Event -> 调用函数发送详细信息（将数据从客户端发送到服务器）

当我使用打印命令检查程序流程时，我发现这`connection.transport.write(data)`是造成问题。

```
def on_connectCLB_pressed(self):
    Connect()

def on_connectCLB_released(self):
    Send_Details()

def Send_Details():
    print "Send_Details"
    global connection,chat
    contents="contents"
    if (USER!=''):
        stat="Available"
        data="user_details>>:"+USER +">>:"+stat+">>:"+contents
        connection.transport.write(data)
    else:
        GUI.setStatusTip(QtGui.QApplication.translate("MainWindows", 'Enter your username.', None, QtGui.QApplication.UnicodeUTF8))

def Connect():
    print "Connect"
    global connection
    connection=reactor.connectTCP(HOST,int(PORT) , EchoClientFactory()) ##listenTCP and connectTCP,to set defaults for all connections coming from that accept() or connect() 
```

# php - $_GET 来自使用 ajax 的链接的值

> ID：15450987
> 
> 赞同：1
> 
> 时间：2013-03-16T15:22:15.930
> 
> 标签：php, javascript, jquery, html, ajax

我为我的脚本做了一个设置页面......并以设置的形式做了这个

```
<form action='javascript:insert()'> 
```

然后我得到输入或复选框上插入的所有值或任何以javascript设置的形式..就像：

```
function insert() {
// Optional: Show a waiting message in the layer with ID login_response
document.getElementById('huemix_message').innerHTML = "<img src='images/saver.gif' />"
// Required: verify that all fileds is not empty. Use encodeURI() to solve some issues about character encoding.
var system_name= encodeURI(document.getElementById('system_name').value);
var system_logo = encodeURI(document.getElementById('system_logo').value);
var system_number = encodeURI(document.getElementById('system_number').value);
var system_tel = encodeURI(document.getElementById('system_tel').value);
if($("#system_pics").is(':checked')){
      var system_pics = 1;
   } else {
      var system_pics = 0;
   }
if($("#system_bread").is(':checked')){
      var system_bread = 1;
   } else {
      var system_bread = 0;
   }

// Set te random number to add to URL request
nocache = Math.random();
// Pass the login variables like URL variable
http.open('get', 'huemixpanel_insert.php?system_name='+system_name+'&system_logo='+system_logo+'&system_number='+system_number+'&system_tel='+system_tel+'&system_pics='+system_pics+'&system_bread='+system_bread+'&uid='+uid+'&nocache = '+nocache);
http.onreadystatechange = insertReply;
http.send(null);
} 
```

并且一切正常.. 我使用 ajax 将所有值发送到另一个 php 页面以更新我的数据库，现在我的问题是：

在同一页面中，我有一个部分来编辑我的成员.. 我正在使用`" SELECT * FROM ..."` 结果显示我的成员列表，如下所示：

```
MEMBER    DEPARTMENT   ACCESS EDIT

admin        admin      all    edit
user2        service    service  edit 
```

“编辑”字是一个链接，如：

```
<a href='hueimx.php?action=edit&uid={$result['uid']}'>edit</a> 
```

这`"{$result['uid']}"`是从数据库中获取的客户 ID

所以管理员用户的“编辑”字链接是这样的

```
<a href='huemix.php?action=edit?uid=1'>edit</a> 
```

我想将生成的 [uid] 从数据库发送到我的 javascript 页面

并将uid值放入ajax函数中的变量中，以将其发送到另一个php文件以更新我的数据库，，如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T15:48:47.653

而不是将其添加为将其`href`添加到`onclick`js 函数中-

```
<a href="#" onclick="edit_action({$result['uid']})">edit</a> 
```

并在 js 中创建一个函数 -

```
function edit_action(uid) {
    //send it to php.
} 
```

# c# - 如何在 C# 中将数组划分为单独的数组？

> ID：15450988
> 
> 赞同：-6
> 
> 时间：2013-03-16T15:22:18.247
> 
> 标签：c#, arrays

我想编写一个方法，将字符串数组划分为*n 个*单独的数组，每个数组大约是我指定的大小。

例如，如果我要划分的数组有 23 个元素，那么如果我指定 7 作为大约元素数：

```
1st array with 8 elements
2nd array with 8 elements 
3rd array with 7 elements 
```

另一个例子是如果有 100 个元素并且我指定每个数组有 18 个元素，那么：

```
1st array 20 
2nd array 20
3rd array 20
4th array 20
5th array 20 
```

到目前为止，我知道该函数需要返回一个字符串数组列表，但我不知道该怎么做：

```
private List<string[]> divStrings(int ExpectedStringsPerArray, 
    string[] AllStrings)
{
    // ...
} 
```

数组的数量将是

```
 Math.Floor(AllStrings.Count()/ExpectedStringsPerArray) 
```

如何在 C# 中将数组划分为单独的数组？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T03:07:39.937

我可能错误地解释了您的问题，因为这似乎太容易了：

1.  确定将源数组划分为多少个数组。( *totalCount / elementsPerArray* )
2.  对于每个数组：
    1.  确定要放入多少元素。（*元素剩余/数组剩余*）
    2.  将这些元素复制到一个新数组中。

* * *

在代码中：

```
private static List<string[]> DivideStrings(int expectedStringsPerArray, string[] allStrings)
{
    List<string[]> arrays = new List<string[]>();

    int arrayCount = allStrings.Length / expectedStringsPerArray;

    int elemsRemaining = allStrings.Length;
    for (int arrsRemaining = arrayCount; arrsRemaining >= 1; arrsRemaining--)
    {
        int elementCount = elemsRemaining / arrsRemaining;

        string[] array = CopyPart(allStrings, elemsRemaining - elementCount, elementCount);
        arrays.Insert(0, array);

        elemsRemaining -= elementCount;
    }

    return arrays;
} 
```

```
private static T[] CopyPart<T>(T[] array, int index, int length)
{
    T[] newArray = new T[length];
    Array.Copy(array, index, newArray, 0, length);
    return newArray;
} 
```

* * *

像这样使用时：

```
const int count = 23;
const int estimate = 7;
string[] strings = Enumerable.Range(1, count).Select(s => s.ToString()).ToArray();
var list = DivideStrings(estimate, strings);
foreach (var arr in list)
    Console.WriteLine(String.Join(" ", arr)); 
```

它打印：

```
1 2 3 4 5 6 7 8
9 10 11 12 13 14 15 16
17 18 19 20 21 22 23

```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T03:02:04.323

您可以使用`Enumerable.Range`来获取除数，然后使用`Linq` `Skip`和`Take`选择数组来选择项目。

例子：

```
 public List<string[]> divStrings(int count, string[] array)
 {
    long remainder;
    long divCount = Math.DivRem(array.Count(), count, out remainder);
    int ajustedCount = (int)((divCount > remainder) 
                       ? (divCount / remainder) 
                       : (remainder / divCount)) + count;
    int groupCount = (ajustedCount * divCount) > array.Count() 
        ? (int)divCount
        : (int)divCount++;
    return Enumerable.Range(0, groupCount).Select(g => array.Skip(g * ajustedCount).Take(ajustedCount).ToArray()).ToList();
 } 
```

## 然而

这可能是一种方便的扩展方法

```
public static class Extensions
{
    public static List<T[]> SplitEven<T>(this T[] array, int count)
    {
        long remainder;
        long divCount = Math.DivRem(array.Count(), count, out remainder);
        int ajustedCount = (int)((divCount > remainder) 
                           ? (divCount / remainder) 
                           : (remainder / divCount)) + count;
        int groupCount = (ajustedCount * divCount) > array.Count() 
            ? (int)divCount
            : (int)divCount++;
        return Enumerable.Range(0, groupCount).Select(g => array.Skip(g * ajustedCount).Take(ajustedCount).ToArray()).ToList();
    }   
} 
```

用法：

```
string[] test = new string[]{};
var result = test.Split<string>(7);

int[] test = new int[]{};
var result = test.Split<int>(7); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-20T02:37:31.027

干得好。请记住，您可以使用 .ToList() 将列表更改为数组`.ToArray()`，使用 .ToList() 将数组更改为列表，这就是我将它们全部设为列表的原因。

```
List<List<string>> divStrings(int ExpectedStringsPerArray, List<string> AllStrings)
{
    //Set what we're currently up to in the array
    var espa = ExpectedStringsPerArray;
    var ListOfLists = new List<List<string>>();

    //Add the first bunch of elements to the list of lists.
    ListOfLists.Add(AllStrings.Take(ExpectedStringsPerArray).ToList());

    //While we still have elements left to get out
    while (AllStrings.Skip(espa).Take(ExpectedStringsPerArray).Count() != 0)
    {
        //Add the list data we're currently up to to the list of lists
        ListOfLists.Add(AllStrings.Skip(espa).Take(ExpectedStringsPerArray).ToList());
        //Offset what we're up to so next time we're getting the next lot of data
        espa += ExpectedStringsPerArray;
    }

    return ListOfLists;
} 
```

调用它：

divStrings(30,testList);

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-11T11:18:37.303

这个问题得到了回答。我遇到了这个并以我的方式回答。

我不确定你所说的近似是什么意思，我认为不应该这样做。您必须确定您要查找的数组的大小。以下是未经测试的代码示例。

```
List<List<int>> lists = new List<List<int>>();
const int myLimit = 20;

var numbers = (from n in myArray select n).ToList();

while (numbers.Any())
{
    var list = (from number in numbers select number).Take(myLimit).ToList();
    numbers.RemoveRange(0, list.Count());
    lists.Add(list);
}

// Now lists should have list of equal number if items in each. Last one may be an exception. 
```

希望能帮助到你。

# objective-c - 无法停止 NSAssetsLibrary

> ID：15450992
> 
> 赞同：0
> 
> 时间：2013-03-16T15:23:02.237
> 
> 标签：objective-c

它运行良好，但不会停止。

```
 [group enumerateAssetsAtIndexes:set options:NSEnumerationReverse usingBlock:^(ALAsset *result, NSUInteger index, BOOL *stop)
          {
              CGImageRef imageRef = result.defaultRepresentation.fullResolutionImage;
              UIImage *toSend=[UIImage imageWithCGImage:imageRef];

              NSLog(@"INDEXX:%d",index); //logged after i stop !

              for(int c=0;c<[selectedButtonsTags count];c++)
                  if((numberOfAssets-1)-index ==[[selectedButtonsTags objectAtIndex:c] integerValue])
                  {[savedImages addObject:toSend];   NSLog(@"IMAGE IS:%@ index:%d",toSend,index); }

              if(index==numberOfAssets-max-1 )
              {   NSLog(@"OUT!");   //it DO log this !
                   *stop=YES;  
              }

          }]; 
```

记录后`OUT`，它再次记录`index:`垃圾号`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T15:44:59.627

我必须了解它是如何工作的。如果我在阻止他之前在街区内做事，他会继续枚举，当我阻止他时，他已经开始下一个索引。

所以你必须在块开始时阻止他，然后再做更多的事情。

```
 if(index==numberOfAssets-max-1 )
              *stop=YES; 
```

现在在块的开始，他停止了。如果需要稍后调用一个函数，您可以稍后放置相同的条件。但是，正如我所说，你必须先阻止他。

# spring - google appengine上的spring httpinvoker错误（org.springframework.remoting.RemoteAccessException）

> ID：15450993
> 
> 赞同：0
> 
> 时间：2013-03-16T15:23:02.797
> 
> 标签：spring, google-app-engine, httpinvoker

我一直在尝试在我的 google appengine 帐户上设置一个基于 httpinvoker 的服务器。我遵循了 spring 文档中给出的说明，但它似乎不起作用。有人可以在下面查看我的代码并让我知道出了什么问题。

我的 web.xml：

```
<servlet>
<servlet-name>remoting</servlet-name>
<servlet-class>org.springframework.web.servlet.DispatcherSe rvlet</servlet-class>
<load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
<servlet-name>remoting</servlet-name>
<url-pattern>/remoting/*</url-pattern>
</servlet-mapping> 
```

我的远程处理-servlet.xml

```
<bean name="/AccountService" class="org.springframework.remoting.httpinvoker.Ht tpInvokerServiceExporter">
<property name="service" ref="accountService"/>
<property name="serviceInterface" value="app.server.AccountService"/>
</bean> 
```

我的客户xml：

```
<bean id="httpInvokerProxy" class="org.springframework.remoting.httpinvoker.Ht tpInvokerProxyFactoryBean">
<property name="serviceUrl" value="http://<google appid>.appspot.com/remoting/AccountService"/>
<property name="serviceInterface" value="app.server.AccountService"/>
</bean> 
```

我的客户端代码：

```
public static void main(String[] args) throws Exception {
ApplicationContext applicationContext = new ClassPathXmlApplicationContext("springClientConfig .xml");
AccountService testService = (AccountService) applicationContext.getBean("httpInvokerProxy");
String retVal = testService.getAccounts("test");
System.out.println(retVal);
} 
```

我不断收到异常（org.springframework.remoting.RemoteAccessException）：无法在 [http://googleappId.appspot.com/remoting/AccountService] 访问 HTTP 调用程序远程服务；嵌套异常是 java.io.IOException：没有收到成功的 HTTP 响应：状态码 = 500，状态消息 = [Internal Server Error]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-22T03:19:50.123

检查`app.server.AccountService`是类还是接口，应该是接口，如果是类，500会发生。

# opengl - OpenGL着色器：不要插入颜色

> ID：15450996
> 
> 赞同：2
> 
> 时间：2013-03-16T15:23:11.083
> 
> 标签：opengl, graphics, glsl

我正在尝试一个非常基本的 OpenGL 示例：渲染单个三角形。三角形有三个点和三种不同的颜色。

现在 OpenGL 将这些颜色混合在一起以创建类似渐变的效果。我想关闭它，但我不知道如何做到这一点。

这是我的片段着色器，它非常基础：

```
#version 150

in vec4 color;
out vec4 outColor;

void main()
{
    outColor = color;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-16T15:26:55.683

有两个选项，您的选择将更多地取决于您在做什么。

首先，在将多边形提供给 OpenGL 时，您可以简单地使多边形的每个顶点的颜色保持不变。

其次，您还可以将变量标记为`flat`：

```
flat in vec4 color; 
```

它会从挑衅的顶点获得颜色。请参阅[此手册页](http://www.opengl.org/sdk/docs/man/xhtml/glProvokingVertex.xml)。