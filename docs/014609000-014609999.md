# StackOverflow 问答 14609000-14609999

# jquery - .offset() 的位置不正确

> ID：14609005
> 
> 赞同：0
> 
> 时间：2013-01-30T16:35:08.110
> 
> 标签：jquery

我有一个网站，我试图将一张图片叠加在另一张图片上，我使用当前元素的位置

```
var position = $(".portfolio-items a").offset(); 
```

然后将新元素设置在相同的位置，但这次是静态定位。我发现它最终离开了页面底部，因此我减去了结果

```
$(document).scrollTop(); 
```

从顶部位置开始，但由于某种原因，该项目仍然在页面下方 135px 处结束。

任何想法 135px 来自哪里？

您可以在 www.pixelcoding.co.uk 上查看网站，只需单击 ajlcomputers 投资组合图像（第一个）即可对其进行测试。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T09:19:35.293

我已经设法解决了这个问题，当我用 firebug 更仔细地检查元素时，我发现我的目标只显示在图像的底部 20px 中，因为某种原因（图像高 150px）所以这就是缺少的 130px . 不知道为什么会这样，但为了解决它，我只是针对 img 而不是 a ，现在它工作正常。

# asp.net - 面向数据检索的 ASP.NET webapi 的端点设计

> ID：14609006
> 
> 赞同：0
> 
> 时间：2013-01-30T16:35:07.880
> 
> 标签：asp.net, api

我正在设计一个系统，该系统使用**asp.net webapi**来提供许多 jquery 网格控件使用的数据。页面加载后，网格会回调数据。我有一个用户表和一个项目表。在它们之间是一个存储多对多关系的成员表。

```
User
userID
Username
Email

Project
projectID
name
code

Membership
membershipID
projectID
userID 
```

我的问题是将这些数据和关系描述为 webapi 的最佳方式是什么？

我有以下路线

```
GET: user  // gets all users
GET: user/{id}  // gets a single user
GET: project
GET: project/{id} 
```

我认为一种方法是：

```
GET: user/{id}/projects  // gets all the projects for a given user
GET: project/{id}/users  // gets all the users for a given project 
```

我不确定路由和控制器的配置应该是什么样子，或者即使这是正确的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T01:21:17.857

现代标准是一种非常简单的方法，称为[REST](http://www.restapitutorial.com/)只需仔细阅读并实施它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T03:46:15.917

就像 Ph0en1x 所说，REST 是 Web 服务的新趋势。看起来您已经在一些建议的路线上走在了正确的轨道上。我在工作中一直在做一些 REST 设计，这里有一些事情需要考虑：

1.  与您的路线保持一致。您已经在这样做了，但要注意其他开发人员何时/是否开始编写路由。用户需要一致的路线来使用您的 API。

2.  把事情简单化。一个主要目标应该是可发现性。我的意思是，如果我是您系统的普通用户，并且我知道有用户和项目，也许还有另一个名为“目标”的实体......我想猜测 /goal 并获得目标列表。这让用户*非常*高兴。他们需要参考的文档越少越好。

3.  避免将大量垃圾附加到查询字符串中。我们目前在我的工作中遭受这种痛苦。一旦 API 获得一些关注，用户可能需要更细粒度的控制。注意不要把 URL 变成乱七八糟的东西。像 /user?sort=asc&limit=5&filter=...&projectid=...

4.  保持 URL 简洁明了。我再次喜欢这个设计良好的 API。我可以很容易地记住类似[http://api.twitter.com](http://api.twitter.com)的内容。像[http://www.mylongdomainnamethatishardtospell.com/api/v1/api/user_entity/user](http://www.mylongdomainnamethatishardtospell.com/api/v1/api/user_entity/user) ... 这样的东西更难记住而且令人沮丧。

5.  仅仅因为 REST API 在 Web 上并不意味着它与仅客户端代码中的普通方法完全不同。我读过任何方法都不应超过 3 个参数的论点。这个想法类似于（3）。如果您发现自己想要扩展，请考虑添加更多方法/路由，而不是更多参数。

这些天我知道我在 REST API 中想要什么，那就是直觉、可发现性、简单性，以及避免不断挖掘复杂的文档。

# google-bigquery - 如何将多个文件作为事务上传到谷歌云存储桶

> ID：14609007
> 
> 赞同：3
> 
> 时间：2013-01-30T16:35:09.590
> 
> 标签：google-bigquery, google-cloud-storage

**用例：**

将多个文件上传到云存储桶中，然后将该数据用作 bigquery 导入的源。使用存储桶的名称作为元数据来驱动数据应该进入哪个分表。

**问题：**

为了防止部分导入到 bigquery 表，理想情况下，我想做以下事情，

*   将文件上传到暂存存储桶
*   验证所有文件已正确上传
*   将暂存存储桶重命名为其最终名称（例如，gs://20130112）
*   触发 bigquery 导入以将存储桶加载到分片表中

由于 gsutil 似乎不支持存储桶重命名，有哪些替代方法可以完成此操作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T17:04:39.833

Google Cloud Storage 不支持重命名存储桶，或者更一般地说，不支持一次对多个对象进行操作的原子方式。

如果您主要关心的是所有对象都已正确上传（而不是需要确保存储桶内容仅在所有对象上传后可见），gsutil cp 支持 - 如果任何对象上传失败，它将报告无法上传并以非零状态退出。

因此，一个可能的实现是运行 gsutil cp 以上传所有文件的脚本，然后在创建 BigQuery 表加载作业之前检查 gsutil 退出状态。

Mike Schwartz，谷歌云存储团队

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T14:54:22.917

对象名称在 Google Cloud Storage 中实际上是平的；从服务的角度来看，“/”只是名称中的另一个字符。文件夹抽象由客户端提供，例如 gsutil 和各种 GUI 工具。重命名文件夹需要客户端请求对文件夹中的每个对象执行一系列复制和删除操作。没有重命名文件夹的原子方法。

Mike Schwartz，谷歌云存储团队

# ios - 验证应用存档时出错

> ID：14609017
> 
> 赞同：-1
> 
> 时间：2013-01-30T16:36:01.850
> 
> 标签：ios, xcode, app-store, distribution, archive

当我尝试归档我的 iOS 应用程序（用于 App Store 提交），然后尝试在管理器中验证它时，我收到以下错误消息：

```
“PayAway” does not contain a single–bundle application or contains multiple products. Please select another archive, or adjust your scheme to create a single–bundle application. 
```

我应该提到，在我的应用程序中，我`QREncoder.xcodeproj`导入了一个项目。这会导致这个问题吗？

**方案：** ![在此处输入图像描述](../Images/91e7fdec1ea7ca4eb7231f5958ef4b95.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:41:40.597

是的。此消息意味着您的包中有两个可执行文件。QREncoder 可以创建可执行文件而不是库吗？检查 QREncoder.xcodeproj 中的构建设置。查看生成的捆绑包，看看它是否提供了任何线索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T16:43:16.303

浏览 QREncoder.xcodeproj 项目的构建设置，并确保“部署”下的“跳过安装”选项设置为“是”。

# file - 即时创建 zip 文件以通过 node.js 下载

> ID：14609018
> 
> 赞同：11
> 
> 时间：2013-01-30T16:36:04.670
> 
> 标签：file, node.js, dynamic, zip

我只需要使用节点 js 脚本来实现以下设置（即时生成 zip，而无需触摸磁盘并响应客户端下载）。有人可以指导和发布您的工作脚本。我试过谷歌搜索，似乎我们可以通过 zipstream 实现它。但没有找到任何示例/工作脚本。

1.  从根文件夹中获取与 *.xml 文件匹配的文件。

2.  立即将 http 标头写入客户端的 http 响应，说明这是下载，文件名为 .zip。

3.  zipstream 写入 zip 容器的标头字节。

4.  创建对 S3 中第一个图像的 http 请求。

5.  通过管道将其导入 zipstream（我们实际上不需要运行 deflate，因为图像已经被压缩）。

6.  将其通过管道传输到客户端的 http 响应中。

7.  对每个图像重复，zipstream 为每个文件正确写入信封。

8.  zipstream 为 zip 容器写入页脚字节

9.  结束 http 响应。

谢谢，

斯里尼瓦斯

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-05-06T17:37:23.823

我有同样的要求......来自 Amazon S3 的流文件，动态压缩它们（在内存中）并通过 node.js 传送到浏览器。我的解决方案涉及使用[knox](https://www.npmjs.org/package/knox)和[归档程序](https://www.npmjs.org/package/archiver)包并将归档的字节传输到结果流。

由于这是动态的，因此您不会知道生成的存档大小，因此您不能使用“Content-Length”HTTP 标头。相反，您必须使用“Transfer-Encoding: chunked”标头。

“分块”的缺点是您不会获得下载进度条。我尝试将 Content-Length 标头设置为近似值，但这仅适用于 Chrome 和 Firefox；IE 损坏文件；尚未使用 Safari 进行测试。

```
var http = require("http");
var knox = require("knox");
var archiver = require('archiver');

http.createServer(options, function(req, res) {

    var zippedFilename = 'test.zip';

    var archive = archiver('zip');
    var header = {
        "Content-Type": "application/x-zip",
        "Pragma": "public",
        "Expires": "0",
        "Cache-Control": "private, must-revalidate, post-check=0, pre-check=0",
        "Content-disposition": 'attachment; filename="' + zippedFilename + '"',
        "Transfer-Encoding": "chunked",
        "Content-Transfer-Encoding": "binary"
    };

    res.writeHead(200, header);
    archive.store = true;  // don't compress the archive
    archive.pipe(res);

    client.list({ prefix: 'myfiles' }, function(err, data) {
        if (data.Contents) {

            var fileCounter = 0;
            data.Contents.forEach(function(element) {

                var fileName = element.Key;
                fileCounter++;

                client.get(element.Key).on('response', function(awsData) {
                    archive.append(awsData, {name: fileName});

                    awsData.on('end', function () {
                        fileCounter--;

                        if (fileCounter < 1) {
                            archive.finalize();
                        }
                    });

                }).end();
            });

            archive.on('error', function (err) {
                throw err;
            });

            archive.on('finish', function (err) {
                return res.end();
            });

        }
    }).end();
}).listen(80, '127.0.0.1'); 
```

# jquery - 我无法在 jquery ui 自动完成中输入任何内容

> ID：14609022
> 
> 赞同：1
> 
> 时间：2013-01-30T16:36:14.380
> 
> 标签：jquery, jquery-ui, jquery-ui-autocomplete

[jquery ui 自动完成插件](http://jqueryui.com/autocomplete/)

```
var availableTags = [
         "Ruby",
         "Scala",
         "Scheme"
        ];

        $("#SearchBox").autocomplete({
            source: availableTags

        }); 
```

这就是生成的html：

```
<div id="SearchBox" class="ui-autocomplete-input" autocomplete="off"></div> 
```

当我第一次加载网站时调试插件初始化时，我可以在 SearchBox 中看到我的 3 个项目，但我无法编辑或输入任何内容。

这是为什么？

我正在使用 JQuery UI 1.10 和 JQuery 1.9.0

# c++ - G++ 为未使用的模板特化生成代码？

> ID：14609024
> 
> 赞同：9
> 
> 时间：2013-01-30T16:36:33.793
> 
> 标签：c++, templates, g++, specialization

在我正在处理的项目的一些序列化代码中，我有一个类型，其大小取决于编译器。为了解决这个问题，我决定使用模板专业化，效果很好。一切都在编译时解决。代码看起来有点像这样（不是真正的代码，只是一个例子）：

```
template <int size>
void
special_function()
{
     std::cout << "Called without specialization: " << size << std::endl;
}

template <>
void
special_function<4>()
{
     std::cout << "dword" << std::endl;
}

template <>
void
special_function<8>()
{
     std::cout << "qword" << std::endl;
}

int
main()
{
     special_function<sizeof(int)>();
     return 0;
} 
```

在我的 32 位系统上`dword`，按预期执行上述程序输出。但是这样做而不只是这样做的全部意义`if (sizeof(int) == 4) { ... } else if ...`在于，我希望编译器只会为适当的函数生成代码。由于`special_function<4>`是该程序中唯一调用的一个，因此我希望它是编译器生成的唯一一个（在本例中为 gcc 4.1.2，在 x86 Linux 上）。

但这不是观察到的行为。

虽然它确实有效，但每个模板专业化的代码都是生成的，尽管从未使用过。但是，不会生成通用定义。

我应该提到，这是一步编译，而不是编译成中间目标文件，然后是链接。在这种情况下，将死代码删除推迟到链接阶段似乎很自然，而且我知道链接器并不总是非常擅长这一点。

有谁知道发生了什么？我在这里缺少模板专业化的微妙之处吗？上帝知道魔鬼在 C++ 的细节中。

编辑：既然已经提到过，-O3 和-Os 都会发生这种行为。

EDIT2：下面的 Rob 建议将函数放在匿名命名空间中。这样做并使用任何级别的优化进行编译确实会删除死代码，这很好。但我很好奇，所以我尝试对以下程序做同样的事情：

```
namespace {
void foo() { std::cout << "Foo!" << std::endl; }
void bar() { std::cout << "Bar!" << std::endl; }
}

int
main()
{
       foo();
       return 0;
} 
```

这里的想法是查看 Rob 的解决方案是否实际上与模板专业化有关。事实证明，上述打开优化编译的代码忽略`bar()`了可执行文件中未使用的定义。所以看起来虽然他的回答解决了我的直接问题，但它并没有解释为什么根本不使用的模板特化被编译。

有谁知道标准中的相关片段可以解释这一点？我一直认为模板只是在使用时生成的，但对于完全专业化来说可能并非如此......

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-30T16:58:01.680

您的示例中的模板特化是具有外部链接的函数。编译器无法知道它们不会被另一个翻译单元调用。

在我的 g++ 4.7.2 Ubuntu 系统上，将模板放入匿名命名空间并进行编译`-O3`可防止生成未使用的函数。

同样，声明函数模板`static`也有预期的效果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T17:55:39.303

这是一个特殊的问题。我调查了一下，这个问题与模板专业化无关。我猜 g++ 默认情况下不会删除未使用的符号。如果您以后想将输出链接到另一个程序，这很有意义。

但是，您可以使用命令行选项去除未使用的符号。有关详细信息，请参阅此帖子：

[如何使用 GCC 和 ld 删除未使用的 C/C++ 符号？](https://stackoverflow.com/questions/6687630/c-c-gcc-ld-remove-unused-symbols)

但也看到这里

[使用 GCC 查找无法访问的函数（“死代码”）](https://stackoverflow.com/questions/4195494/using-gcc-to-find-unreachable-functions-dead-code)

和这里

[遗留 C/C++ 项目中的死代码检测](https://stackoverflow.com/questions/229069/dead-code-detection-in-legacy-c-c-project)

只是为了试试这个，我修改了代码如下：

```
#include <iostream>

void junk_function() {
    std::cout<<"test" << std::endl;    
}

template <int size>
void special_function()
{
     std::cout << "Called without specialization: " << size << std::endl;
}

template <>
void special_function<4>()
{
     std::cout << "dword" << std::endl;
}

template <>
void special_function<8>()
{
     std::cout << "qword" << std::endl;
}

int main()
{
     special_function<sizeof(int)>();
     return 0;
} 
```

然后将此代码存储到 sp.cpp。第一的，

```
g++ -Os sp.cpp -o sp
nm sp 
```

并得到了这个（注意，为了便于阅读，我删除了一堆符号）：

```
0804879a T _Z13junk_functionv
080487b8 T _Z16special_functionILi4EEvv
080487f5 T _Z16special_functionILi8EEvv 
```

似乎有两个未使用的符号。我也试过-O1、-O2、-O3，结果都一样。

下一个：

```
g++ -Os -fdata-sections -ffunction-sections sp.cpp -o sp -Wl,--gc-sections
nm sp 
```

得到了这个：

```
0804875a T _Z16special_functionILi4EEvv 
```

就是这样。所以看起来你只需要传递正确的参数来告诉 g++ 去除未使用的符号。在 mac 上，我猜他们有 -dead_strip 选项，但我不知道为什么它在 g++ 中不起作用（即使它在手册页中提到。诚然，我没有深入研究这个，所以可能有是我错过的精美印刷品）。

我认为在链接时默认情况下 Visual C++ 的链接器会剥离，但我没有测试。也许其他人可以插话。

# java - xmlbeans 和保留字标签

> ID：14609025
> 
> 赞同：1
> 
> 时间：2013-01-30T16:36:34.533
> 
> 标签：java, xsd, xmlbeans

我正在尝试从 xsd 编译 xmlbeans jar。xsd 是供应商提供给我的，所以我无法更改它。名称属性“CON”导致 XML bean 抛出如下异常：线程“main”中的异常 org.apache.xmlbeans.SchemaTypeLoaderException....（系统找不到指定的路径）。如果我将标签属性更改为“CON1”，问题就解决了，因此它肯定是它不喜欢的字符串 CON。有没有办法解决这个问题。我包含了我一直用于测试目的的模式的简化版本作为参考：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
<xs:element name="CON">
    <xs:complexType>
        <xs:choice minOccurs="1" maxOccurs="unbounded">
            <xs:element name="TEXT" type="TEXT" minOccurs="0"  
maxOccurs="1"/>
            <xs:element name="VALUE" minOccurs="1" maxOccurs="1">
                <xs:simpleType>
                    <xs:restriction base="xs:string">
                        <xs:minLength value="2"/>
                        <xs:maxLength value="4"/>
                    </xs:restriction>
                </xs:simpleType>
            </xs:element>
        </xs:choice>
    </xs:complexType>
</xs:element>
<xs:simpleType name="TEXT">
    <xs:restriction base="xs:string">
        <xs:minLength value="0"/>
        <xs:maxLength value="1023"/>
    </xs:restriction>
</xs:simpleType>    
</xs:schema> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:06:45.367

这是 XMLBeans 中的一个已知错误：[XMLBEANS-352](https://issues.apache.org/jira/browse/XMLBEANS-352)

`scomp`尝试创建文件 ...\classes\schemaorg _apache_xmlbeans\javaname\noNamespace\CONDocument\CON\VALUE.xsb 这失败了。目录名称`CON`是禁止的，因为`CON`它是 Windows 机器上的保留设备名称。

提供`.xsdconfig`将元素映射到另一个名称的文件不起作用。我试过。

据报道，在 linux 中编译模式并复制生成的 jar 是唯一的解决方案。

# ajax - 使用 Ajax 是否可以在同一页面中使用 Webmatrix CRUD

> ID：14609031
> 
> 赞同：3
> 
> 时间：2013-01-30T16:36:48.950
> 
> 标签：ajax, jquery, razor, webmatrix, single-page-application

我想知道，在 WebMatrix Razor 语法中使用 Ajax 在同一页面中进行 CRUD 操作（更新-编辑-插入）的最快和安全方法是什么。是否可以在没有 GET-POST 网络服务或其他 razor 页面的情况下使用 ajax 在同一个 razor 页面中执行此 CRUD 操作？

我尝试使用 jquery ajax 从其他具有输出类型 Json 的 Razor 页面获取数据，并使用 WCF Webservice。但他们并没有真正让我满意，因为我需要另一个页面来提供我的数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T21:11:41.430

是的，你可以这样做。每个单独的 CRUD 操作都必须包装在自己的条件块中。该条件可以测试特定名称/值对是否已通过 AJAX（例如`action=delete`或`action=update`）发送到服务器。将值返回给 AJAX 调用时，请确保`ContentType`正确设置了 Response。

这是一个工作示例 -

```
@{
    if(IsAjax){
        switch(Request["action"]){
            case "create" :
                Response.Write("You are trying to create something");
                Response.End();
                break;
            case "read" :
                Response.Write("What would you like to read?");
                Response.End();
                break;
            case "update" :
                Response.Write("Something is being updated");
                Response.End();
                break;
            case "delete" :
                Response.Write("This is a delete");
                Response.End();
                break;
        }
    }
}

<!DOCTYPE html>

<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title></title>
        <script src="~/Scripts/jquery-1.8.3.min.js" type="text/javascript"></script>
        <script>
            $(function () {
                $('.crud').click(function () {
                    $.get('/SinglePage/?action=' + $(this).attr('id'), function (message) {
                        alert(message);
                    })
                })
            })
        </script>
    </head>
    <body>
        <button id="create" class="crud">Create</button>
        <button id="read" class="crud">Read</button>
        <button id="update" class="crud">Update</button>
        <button id="delete" class="crud">Delete</button>
    </body>
</html> 
```

如果有的话，这说明了这种方法在维护等方面可能有多糟糕。我自己总是为每个数据操作使用单独的 cshtml 文件，

# memory - 如何在 C# 托管代码中重新创建 SOS.dll 功能？SOS.dll ObjSize 和 DumpObject 如何在后台工作？

> ID：14609036
> 
> 赞同：1
> 
> 时间：2013-01-30T16:37:00.767
> 
> 标签：memory, reflection, clr, sos

我已经对这个主题进行了很多研究，但仍然感到困惑。我之前曾向 stackOverflow 提出过这个问题，但得到的答复并不令人满意。这让我相信这是一个相当高级的话题，需要对 CLR 有深刻的理解才能回答。希望高手能帮帮我。

这个问题主要基于我以前在[此处](https://stackoverflow.com/questions/14322660/using-reflection-to-determine-which-fields-are-backing-fields-of-a-property)和[此处](https://stackoverflow.com/questions/14483432/sos-dll-objsize-and-dumpobject-under-the-hood-intricacies-how-to-recreate-sos-d)找到的帖子。

我正在尝试使用反射重新创建 SOS.dll 的一些功能。特别是`ObjSize`and`DumpObject`命令。我使用反射来查找所有字段，然后如果这些字段是原始类型，我将原始类型的大小添加到对象的整体大小中。如果该字段是一个值类型，那么我递归地调用原始方法并沿着参考树向下走，直到找到所有原始类型字段。

我一直在获得比`SOS.dll ObjSize`命令大两倍左右的对象大小。我发现的一个原因是我的反射代码似乎正在寻找 SOS 忽略的字段。例如在字典中，SOS 查找以下字段：

*   水桶
*   条目
*   数数
*   版本
*   自由清单
*   自由计数
*   比较器
*   钥匙
*   价值观
*   _syncRoot
*   m_siInfo

但是，我的反射代码找到了以上所有内容，并且还发现：

*   版本名称
*   哈希大小名称
*   键值对名称
*   比较器名称

先前的答案暗示这些是常量而不是字段。常量不是保存在内存中吗？我应该忽略常量吗？我不确定使用哪些绑定标志来获取除常量之外的所有字段......

此外，我对 SOS ObjSize 和 DumpObject 命令中发现的不一致感到困惑。我知道 DumpObject 不会查看引用类型的大小。但是，当我在上面提到的字典上调用对象大小时，我得到：

*   字典 - 532B

然后我在 Dictionary 上调用 DumpObject 来获取它的引用类型的内存地址。然后，当我在它的引用类型上调用 Objsize 时，我得到：

*   水桶 - 40
*   条目 - 364
*   比较器 - 12
*   钥匙 - 492
*   （其余为空或原始）

**顶级字典上的 ObjSize 不应该大致是字典内字段上所有 ObjSize 的总和吗？为什么反射会找到更多的 DumpObject 字段？关于为什么我的反射分析返回的数字大于 SOS.dll 的任何想法？**

此外，我在上面链接的主题中提出的一个问题从未得到答案。我在问在评估对象的内存大小时是否应该忽略属性。普遍的共识是忽略它们。但是，我发现了一个很好的示例，说明属性的支持字段何时不会包含在从 Type.GetFields() 返回的集合中。在查看 String 的引擎盖时，您有以下内容：

*   对象包含名为 FirstChar 的属性
*   对象包含名为 Chars 的属性
*   对象包含名为 Length 的属性
*   对象包含名为 m_stringLength 的字段
*   对象包含名为 m_firstChar 的字段
*   对象包含名为 Empty 的字段
*   对象包含名为 TrimHead 的字段
*   对象包含名为 TrimTail 的字段
*   对象包含名为 TrimBoth 的字段
*   对象包含名为 charPtrAlignConst 的字段
*   对象包含名为 alignConst 的字段

m_firstChar 和 m_stringLength 是属性 FirstChar 和 Length 的支持字段，但字符串的实际内容保存在 Chars 属性中。这是一个索引属性，可以对其进行索引以返回字符串中的所有字符，但我找不到保存字符串字符的相应字段。

**关于为什么会这样的任何想法？或者如何获取索引属性的支持字段？索引属性是否应该包含在内存大小中？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T16:51:03.430

虽然这个想法很有趣，但我相信它最终是徒劳的，因为反射不提供对对象实际存储的访问。反射允许您查询类型，但不能查询它们的实际内存表示（这是 CLR 的实现细节）。

对于引用类型，CLR 本身向每个实例（MT 和 syncblk）添加内部字段。这些不是由反射 API 显示的。此外，CLR 可以根据类型的定义对字段的存储使用任何类型的填充/压缩。这意味着原始类型的大小在不同的引用类型之间可能不一致。反射也不允许您发现这一点。

简而言之，Reflection 无法发现产生正确结果所需的大量细节。

# java - Android - BluetoothChat 示例 - 为什么他们在这种情况下使用同步？

> ID：14609040
> 
> 赞同：0
> 
> 时间：2013-01-30T16:37:07.440
> 
> 标签：java, android, multithreading, deadlock, synchronized

好的，所以我对为什么在下面标记的行中使用同步感到困惑。

对我来说，你只在一个代码块可能被多个线程访问的地方使用同步，但是这个代码只在它的 run 方法中从这个线程调用。

的一个实例`mConnectThread`在类的一开始就被声明为一个字段。

```
public class BluetoothChatService {

// Member fields   
private ConnectThread mConnectThread; 
```

有任何想法吗？

```
/**
 * This thread runs while attempting to make an outgoing connection
 * with a device. It runs straight through; the connection either
 * succeeds or fails.
 */
private class ConnectThread extends Thread {
    private final BluetoothSocket mmSocket;
    private final BluetoothDevice mmDevice;
    private String mSocketType;

    public ConnectThread(BluetoothDevice device, boolean secure) {
        mmDevice = device;
        BluetoothSocket tmp = null;
        mSocketType = secure ? "Secure" : "Insecure";

        // Get a BluetoothSocket for a connection with the
        // given BluetoothDevice
        try {
            if (secure) {
                tmp = device.createRfcommSocketToServiceRecord(
                        MY_UUID_SECURE);
            } else {
                tmp = device.createInsecureRfcommSocketToServiceRecord(
                        MY_UUID_INSECURE);
            }
        } catch (IOException e) {
            Log.e(TAG, "Socket Type: " + mSocketType + "create() failed", e);
        }
        mmSocket = tmp;
    }

    public void run() {
        Log.i(TAG, "BEGIN mConnectThread SocketType:" + mSocketType);
        setName("ConnectThread" + mSocketType);

        // Always cancel discovery because it will slow down a connection
        mAdapter.cancelDiscovery();

        // Make a connection to the BluetoothSocket
        try {
            // This is a blocking call and will only return on a
            // successful connection or an exception
            mmSocket.connect();
        } catch (IOException e) {
            // Close the socket
            try {
                mmSocket.close();
            } catch (IOException e2) {
                Log.e(TAG, "unable to close() " + mSocketType +
                        " socket during connection failure", e2);
            }
            connectionFailed();
            return;
        }

        /********* THIS BIT OF CODE BELOW IS WHAT I AM ASKING ABOUT **********/

        // Reset the ConnectThread because we're done
        synchronized (BluetoothChatService.this) {
            mConnectThread = null;
        }

        /**********************************^^*********************************/

        // Start the connected thread
        connected(mmSocket, mmDevice, mSocketType);
    }

    public void cancel() {
        try {
            mmSocket.close();
        } catch (IOException e) {
            Log.e(TAG, "close() of connect " + mSocketType + " socket failed", e);
        }
    }
} 
```

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:47:08.307

您可以同时运行多个 ConnectThread 对象，这意味着同一运行方法中的多个线程（从技术上讲，是运行方法的副本，但代码相同），尽管它们都可以访问不同的成员变量。同步块在外部对象上同步，所以我怀疑程序中的其他地方有一个同步块，看起来像

```
synchronized (BluetoothChatService.this)
{
  if (mConnectThread != null)
    do some work that would throw NPE without the check.
} 
```

编辑：

澄清一下，它们并没有阻止两个线程访问同一个代码块，而是阻止两个线程从不同的代码段访问同一个变量。

# internet-explorer - 在 Internet Explorer 中将 CSV 文件作为附件发送

> ID：14609041
> 
> 赞同：0
> 
> 时间：2013-01-30T16:37:11.647
> 
> 标签：internet-explorer, http, http-headers

我的 PHP 脚本正在生成一个 CSV 文件。

单击下载链接后，我希望浏览器将其视为附件并显示下载提示。

这在 Firefox 中可以正常工作，但 Internet Explorer 8 只是将 CSV 文件显示为文本。

这是生成标头的 PHP 代码：

```
 return new Response( $vOutput, 201, array
        (
        'Content-Encoding' => 'UTF-8',
        'Content-Type' => 'application/octet-stream; charset=UTF-8',
        'Content-Transfer-Encoding' => 'binary',
        'Content-Disposition' => 'attachement; filename="entrance_stats_line' . $vLine . '.csv"',
        'Pragma' => '',
        'Cache-Control' => '',
        'Content-Length' => strlen( $vOutput ),
        'Expires' => '0'
        ) 
    ); 
```

（使用的框架是 Silex，依赖于 Symfony 的 Symfony\Component\HttpFoundation\Response 类，虽然我不确定这是否相关）

Firefox 接收到的 HTTP 标头（使用篡改数据）是：

```
Status=Created - 201
Date=Wed, 30 Jan 2013 15:53:38 GMT
Server=Apache/2.2.21 (Win32) PHP/5.3.10
X-Powered-By=PHP/5.3.10
Content-Encoding=UTF-8
content-transfer-encoding=binary
Content-Disposition=attachement;filename="entrance_stats_line1.csv";
Cache-Control=no-cache
Content-Length=6141
Connection=close
Content-Type=application/octet-stream; charset=UTF-8 
```

我没有检查是否在 IE 中修改了标题，但如果我设法让 Fiddler 工作，我会发布它们。

我之前尝试过其他一些标题组合，包括以下内容：

```
Status=Created - 201
Date=Wed, 30 Jan 2013 16:34:46 GMT
Server=Apache/2.2.21 (Win32) PHP/5.3.10
X-Powered-By=PHP/5.3.10
Content-Encoding=UTF-8
Content-Disposition=attachement; filename=entrance_stats_line1.csv
Cache-Control=no-cache
Connection=close
Content-Type=text/csv; charset=UTF-8 
```

这只是给我一个“找不到请求的站点”错误。

IE版本为8.0.6001.18702

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T16:55:02.580

是“依恋”，不是“依恋”。

（另外：HTTP 中没有 Content-Transfer-Encoding 标头字段）

# cross-domain - TYPO3 多域

> ID：14609046
> 
> 赞同：2
> 
> 时间：2013-01-30T16:37:20.610
> 
> 标签：cross-domain, typo3, typoscript

我有一个关于 TYPO3 中更多域的问题。

我想建立一个有 2 个域的树。

如果我加载第一个 url，我想加载第一个站点，

如果我加载第二个 url，我想加载第二个站点。

域存储在每个站点中。

不使用`.htaccess`文件是否可以做到这一点？

有人对我有教程或帮助吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T16:59:18.047

看看[http://wiki.typo3.org/Multidomain](http://wiki.typo3.org/Multidomain)

不，您不需要特殊`.htaccess`指令。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-09-21T13:37:22.220

1）创建页面并将其作为根页面。

2）为您的根页面添加域。

3）编辑域并将您的站点路径提供给域。

并且不需要在 .htaccess 中做任何事情

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-30T17:39:52.877

使用typo3 处理多个域非常容易。3个步骤：

1.  将站点地址添加到 DNS。
2.  在typo3后端，在站点“aaa”的根页面创建一个“域记录”作为aaa.com，在站点“bbb”的根页面创建另一个域记录作为bbb.com。
3.  使用以下打字稿更新域根页面模板：

    config.baseURL = aaa.com # 在第一个域的根 ts 模板中

    config.baseURL = bbb.com # 在第二个域的根 ts 模板中

注意：您还可以在每个域的根页面中再添加一个域记录，以便使用域记录选项重定向到 www.aaa.com 和 www.bbb.com。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-03T04:39:02.093

只需将另一个 vhost/alias 指向该目录即可。域记录处理这一切。不要忘记检查 realurl 配置 - 有时需要以不同的方式配置每个域的设置。重要 - 如果您在域之间共享记录（例如 tt_news），您必须为每个域的 postVarSets 进行相同的配置。如果不是，realurl 将生成链接作为丑陋的哈希。

# php - pdfmark：生成的 PDF 书签标题中的某些重音字符未正确显示

> ID：14609054
> 
> 赞同：0
> 
> 时间：2013-01-30T16:37:53.717
> 
> 标签：php, pdf, pdf-generation, ghostscript

我正在向现有 PDF 插入书签，但重音“c”存在一些问题。有例子（例子中使用的字符集是UTF-8）：

```
$name = "Ruční nářadí";

$name = chr(254).chr(255).iconv('UTF-8', 'UTF-16BE', str_replace(array('(',')','/'),array('\\(','\\)','\\/'),$name));

$fh = fopen('pdfmark.txt', 'w');
fputs($fh, "[/Title ({$name}) /Page 1 /OUT pdfmark\n");
fclose($fh);

$command = "gs -sDEVICE=pdfwrite -dNOPAUSE -dQUIET -dBATCH -sOutputFile=out.pdf final.pdf pdfmark.txt; mv out.pdf final.pdf";
exec($command); 
```

问题是重音`č`在最终 PDF 的书签中显示为`Ċ`（具有不同重音的大写字母）。我尝试了我的语言（捷克语）中使用的其他重音字符，除了这个，一切都很好。

感谢您提供解决此问题的任何线索。

**编辑（2013-02-01）：**

使用的 GhostScript 版本是 9.06 (2012-08-08)。我正在使用 Adob​​e Reader 11.0.1 查看生成的 PDF 文件。

我还在考虑它...是否必须以某种方式在 PDF 中指定编码？因为源 PDF 不在我的控制范围内，我对此一无所知。如果是这样，有没有办法使用 GS 或 pdfmark 来做到这一点？我认为如果书签的编码是 Unicode，那真的没关系，但也许我错了。

**编辑（2013-02-05）：**

GS 的 pdfwrite 或 Acrobat 中似乎存在错误，请参阅[GS 的错误跟踪](http://bugs.ghostscript.com/show_bug.cgi?id=693614)中的更多信息。我会在这里写解决方案信息，待解决后。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T08:21:37.963

我将从将字符串简化为单个违规字符开始。然后查看 pdfmark.txt 中的字符串，看它是否正确 UTF-16BE 编码。

假设这是正确的，然后尝试从命令行运行 Ghostscript 并查看是否有效。如果没有，您可以打开一个错误报告，您可以在[http://bugs.ghostscript.com](http://bugs.ghostscript.com)上执行此操作，如果您这样做，请提供源文件和命令行。

您没有说您使用的是什么版本的 Ghostscript，也没有说您使用什么来查看生成的 PDF 文件。两者都有用......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T17:23:49.077

以下代码片段说明了您需要做什么。

在 postscript 中，可以使用 \000 表示法访问特殊字符，其中 000 是字符位置。3 位位置是八进制，其中 \350 等于十进制位置 232 和十六进制位置 E8。

您要寻找的角色是 Ccaron 和 ccaron。为了能够访问这些字符，您需要在字体编码表中定义它们。CEEncoding 表是 Adob​​e 的中欧字符集。Postscript 可能已经在某处定义了 CEEncoding，但这个示例定义了它自己的。与此示例一样，您可以定义任何您喜欢的编码。网络上提供的 postscript 语言参考手册提供了有关可用字符的详细信息。

此示例使用标准 /Helvetica 输出测试 1234，然后基于标准 /Helvetica 定义新字体 /Helvetica-CE，但使用 CEEncoding 编码。(Ru\350ní) show 使用 CEEncoding 定义为 ccaron 的字符 \350。只是为了好玩，我还重新定义了字符\001为Ccaron，\002为欧元符号，\003为商标符号，以说明任何字符都可以定义为任何字符并将其输出为（测试4567\001\ 002\003) 显示。并非所有字体都定义了所有符号。没有符号的字体将替换为空格字符。

就这么简单；）

```
/Helvetica findfont 46 scalefont setfont
100 75 moveto
(testing 1234) show
/CEEncoding [
/.notdef /Ccaron /Euro /trademark /.notdef
/.notdef /.notdef /.notdef /.notdef /.notdef
/.notdef /.notdef /.notdef /.notdef /.notdef
/.notdef /.notdef /.notdef /.notdef /.notdef
/.notdef /.notdef /.notdef /.notdef /.notdef
/.notdef /.notdef /.notdef /.notdef /.notdef
/.notdef /.notdef /space /exclam /quotedbl
/numbersign /dollar /percent /ampersand /quoteright
/parenleft /parenright /asterisk /plus /comma
/minus /period /slash /zero /one
/two /three /four /five /six
/seven /eight /nine /colon /semicolon
/less /equal /greater /question /at
/A /B /C /D /E
/F /G /H /I /J
/K /L /M /N /O
/P /Q /R /S /T
/U /V /W /X /Y
/Z /bracketleft /backslash /bracketright /asciicircum
/underscore /quoteleft /a /b /c
/d /e /f /g /h
/i /j /k /l /m
/n /o /p /q /r
/s /t /u /v /w
/x /y /z /braceleft /bar
/braceright /tilde /.notdef /.notdef /.notdef
/.notdef /.notdef /.notdef /.notdef /.notdef
/.notdef /.notdef /.notdef /.notdef /.notdef
/Sacute /.notdef /.notdef /Zacute /.notdef
/.notdef /.notdef /.notdef /.notdef /.notdef
/.notdef /.notdef /.notdef /.notdef /.notdef
/.notdef /sacute /.notdef /.notdef /zacute
/space /.notdef /breve /Lslash /currency
/Aogonek /.notdef /dieresis /.notdef /Scaron
/Scedilla /Tcaron /Zacute /hyphen /Zcaron
/Zdotaccent /degree /aogonek /ogonek /lslash
/acute /lcaron /.notdef /caron /cedilla
/aogonek /scedilla /tcaron /zacute /hungarumlaut
/zcaron /zdotaccent /Racute /Aacute /Acircumflex
/Abreve /Adieresis /Lacute /Cacute /Ccedilla
/Ccaron /Eacute /Eogonek /Edieresis /Ecaron
/Iacute /Icircumflex /Dcaron /Eth /Nacute
/Ncaron /Oacute /Ocircumflex /Ohungarumlaut /Odieresis
/multiply /Rcaron /Uring /Uacute /Uhungarumlaut
/Udieresis /Yacute /Tcedilla /germandbls /racute
/aacute /acircumflex /abreve /adieresis /lacute
/cacute /ccedilla /ccaron /eacute /eogonek
/edieresis /ecaron /iacute /icircumflex /dcaron
/eth /nacute /ncaron /oacute /ocircumflex
/ohungarumlaut /odieresis /divide /rcaron /uring
/uacute /uhungarumlaut /udieresis /yacute /tcedilla
/dotaccent
] def

/Helvetica findfont
dup length dict begin
{ 1 index /FID ne
{def}
{pop pop}
ifelse
} forall
/Encoding CEEncoding def
currentdict
end
/Helvetica-CE exch definefont pop
/Helvetica-CE findfont 36 scalefont setfont
100 100 moveto
(\310\350) show
100 150 moveto 
(Ru\350ní) show
100 200 moveto
(testing 4567\001\002\003) show
 showpage 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T08:14:11.177

根据[错误跟踪帖子](http://bugs.ghostscript.com/show_bug.cgi?id=693614)，我可以用不同的方式对字符串进行编码（也可以帮助下载更新的[9.08 PRERELEASE](http://git.ghostscript.com/?p=ghostpdl.git;a=commit;h=25291a2f9b01504fbbe70153c07920b016b9f010)版本）：

```
$name = "Ruční nářadí";

$name = 'FEFF'.strtoupper(bin2hex(iconv('UTF-8', 'UCS-2BE', str_replace(array('(',')','/'),array('\\(','\\)','\\/'),$name))));

$fh = fopen('pdfmark.txt', 'w');
fputs($fh, "[/Title <{$name}> /Page 1 /OUT pdfmark\n");
fclose($fh);

$command = "gs -sDEVICE=pdfwrite -dNOPAUSE -dQUIET -dBATCH -sOutputFile=out.pdf final.pdf pdfmark.txt; mv out.pdf final.pdf";
exec($command); 
```

请注意十六进制格式的编码以及标题定义中的不同括号。

# c# - 如何从数据模板中提取 UI 元素？

> ID：14609056
> 
> 赞同：0
> 
> 时间：2013-01-30T16:37:54.870
> 
> 标签：c#, wpf, datatemplate, frameworkelementfactory

我使用以下代码创建数据模板项：

```
 FrameworkElementFactory textCtrl = new FrameworkElementFactory(typeof(TextBox));            
        Binding binding1 = new Binding();
        string path = "Syncfusion";
        binding1.Path = new PropertyPath(path);
        textCtrl.SetValue(TextBox.TextProperty,binding1);
        Binding binding2 = new Binding();
        string path2 = "Text1";
        binding2.Path = new PropertyPath(path2);
        textCtrl.SetValue(TextBox.NameProperty, binding2);
        DataTemplate dt = new DataTemplate();
        dt.VisualTree = textCtrl; 
```

如何从数据模板中获取文本框..？

我尝试了以下链接 [Link 1](http://go4answers.webhost4life.com/Example/frameworkelementfactory-basic-usage-174324.aspx)

[链接 2](http://social.msdn.microsoft.com/Forums/en/wpf/thread/6ddde336-c7dd-46c3-b163-c8e093d9fd01)

但是我没有正确理解这些东西......

我在 xaml 中使用了以下代码

```
<DataTemplate>
      <TextBlock Text="{Binding CellBoundValue}" gridcommon:VisualContainer.WantsMouseInput="False"/>
 </DataTemplate> 
```

谁可以帮我这个事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T16:46:25.600

据我所知，Microsoft 不建议使用 FrameworkElementFactory，它可能会被弃用某些时候（对此不确定）。

但是，如果您仍然想这样做，则必须应用您的 DataTemplate 来创建在 DataTemplate 中声明的控件实例。例如，您可以使用 ContentControl 或 ItemsControl 执行此操作。

# android - FB Android：如何在安装过程中询问发布权限？

> ID：14609058
> 
> 赞同：2
> 
> 时间：2013-01-30T16:38:06.777
> 
> 标签：android, facebook-apps, facebook-authentication, facebook-android-sdk

我正在尝试将我的应用程序转换为使用新的`Facebook Android SDK 3.0`. 我希望能够使用我的应用检查地点。我已将旧的登录方法切换`native-login`为 SDK 提供的按钮。据我了解，如果不先请求基本许可，我无法在安装过程中请求发布许可。而且我不能同时设置登录按钮的发布和读取权限，因为这会导致异常。那我该怎么做呢？我不希望我的用户处理两个对话框屏幕（每次点击都很重要）。我想在安装（首次使用）过程中请求一次许可，而不是在发布时（这会损害我的应用程序的设计流程）。

提前谢谢你，丹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-09T07:55:05.983

*   不，您不能在应用安装期间要求发布权限（仅限基本权限）
*   发布权限对话框将只询问一次
*   您在安装时要求发布权限的权利将引发异常并破坏登录流程

# android - Android启动器中的一个小错误

> ID：14609060
> 
> 赞同：1
> 
> 时间：2013-01-30T16:38:15.170
> 
> 标签：android, duplicates, launcher

我在我的设备上安装了我的启动器。如果我按主页按钮并始终选择我的启动器而不打开我的应用程序，一切都很好。但是，当我首先启动我的应用程序，然后按主页并选择我的启动器时，它会一次又一次地打开我的应用程序。我应该怎么办？

我的清单文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.comeks.cocuktab"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.comeks.cocuktab.Main"
            android:label="@string/app_name"
            android:screenOrientation="landscape" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.HOME" />
                <category android:name="android.intent.category.DEFAULT" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-05T11:10:59.560

尝试在清单中添加这一行

```
<activity   
        android:launchMode="singleInstance" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T16:49:24.497

不确定这是否是您的问题，但请尝试在您的应用程序中这样做：

在清单中：

```
<activity
        android:noHistory="true" 
        android:excludeFromRecents="true"> 
```

# c - 尽管提供了适当的输入，循环仍无法终止

> ID：14609061
> 
> 赞同：0
> 
> 时间：2013-01-30T16:38:16.383
> 
> 标签：c, while-loop, scanf, infinite-loop

尽管提供了 'n' 作为输入，该程序仍会进入无限循环以退出 while 循环。可能是什么问题 ？

```
#include<stdio.h>
    main()
    {        
  int num,p=0,q=0,r=0;
    char check='y';

   while(check!='n')
     {
   printf("do you want to enter a number y or n");
    scanf("%c",&check);
    getchar();
    printf("enter a number");
     scanf("%d",&num);

    if(num>0)
      p++;
       else if(num<0)
      q++;
     else 
     r++;

    }
     printf("positive=%d\t negative=%d\t zero=%d\t",p,q,r);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:41:51.583

问题是在循环`while`顶部重新评估条件之前，循环不会退出。我建议将你的循环改造成这样的东西。

```
// we've purposely changed this to an infinite loop because
// we hop out on condition later
while(1)
{
    printf("do you want to enter a number y or n");
    scanf("%c",&check);
    getchar();

    // here's the code that will jump out of the loop early if the user
    // entered 'n'
    if('n' == check)
        break;

    // user didn't enter 'n'...they must want to enter a number
    printf("enter a number");
    scanf("%d",&num);

    if(num>0)
        p++;
    else if(num<0)
        q++;
    else 
        r++;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T16:53:49.293

```
while(check!='n')
{
    printf("do you want to enter a number y or n");
    scanf("%c",&check);
    getchar();
    printf("enter a number");
    scanf("%d",&num); 
```

将`scanf("%d", &num);`换行符留在输入缓冲区中，因此在循环的下一次迭代中，存储在`check`. 之后，将`getchar()`消耗您输入的`'n'`或。`'y'`然后`scanf("%d", &num);`跳过缓冲区中留下的换行符，扫描输入的数字，并将换行符留在缓冲区中。您需要在扫描数字和查询是否需要下一次迭代之间删除换行符。

除此之外，最好在用户输入后立即退出循环`'n'`，所以

```
while(check!='n')
{
    printf("do you want to enter a number y or n");
    scanf("%c",&check);
    if (check == 'n') {
        break;
    }
    printf("enter a number");
    scanf("%d",&num);
    getchar();  // consume newline 
```

会更好。如果用户输入不符合预期，这仍然会带来坏事，所以如果你想要一个健壮的程序，你需要检查返回值`scanf`以知道转换是否成功，并在扫描前后完全清空输入缓冲区在号码中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T16:41:13.200

您没有检查字符输入。应该是这样的：

```
printf("do you want to enter a number y or n");
scanf("%c",&check);
/* This is what you need to add */
if (check == 'y') {
  getchar();
  printf("enter a number");
  scanf("%d",&num);
} 
```

# ios - 核心图形在矩形中绘制正方形结果

> ID：14609076
> 
> 赞同：0
> 
> 时间：2013-01-30T16:39:07.930
> 
> 标签：ios, core-graphics

我试图在我的上下文中绘制一个正方形，但它会产生一个边长边短的矩形。（在我的 ipad 视网膜模拟器中）

这是我的视图对象的 drawRect 方法的一部分：

```
CGContextRef context = UIGraphicsGetCurrentContext();

CGFloat minx = 0;
CGFloat maxx = 45 - 1;
CGFloat miny = 0;
CGFloat maxy = 45 - 1;

CGContextSetLineWidth(context, 1.0);

CGContextSetStrokeColorWithColor(context, [UIColor whiteColor].CGColor);
CGContextMoveToPoint(context, minx, maxy);
CGContextAddLineToPoint(context, minx, miny);
CGContextAddLineToPoint(context, maxx, miny);
CGContextStrokePath(context);

CGContextSetStrokeColorWithColor(context, [UIColor redColor].CGColor);
CGContextMoveToPoint(context, maxx, miny);
CGContextAddLineToPoint(context, maxx, maxy);
CGContextAddLineToPoint(context, minx, maxy);
CGContextStrokePath(context); 
```

我究竟做错了什么？我需要设置纵横比还是什么？

编辑：我发现

```
CGContextScaleCTM(context, 1, 0.75f); 
```

再次使结果平方，但最终结果不是正确的。有人知道我为什么需要校正垂直刻度吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T17:31:24.690

找到了....

原来我正在修改其他地方的视图。禁用它，现在我的正方形又是正方形了。

感谢您的提示伊斯梅尔！

# php - 在杂货店添加/更新/返回列表时没有成功消息

> ID：14609079
> 
> 赞同：3
> 
> 时间：2013-01-30T16:39:12.957
> 
> 标签：php, codeigniter, grocery-crud

我正在为一个项目使用 Codeigniter 和 Grocery Crud。crud 似乎工作正常，但问题是当我尝试添加值时，我没有收到成功消息。相反，我得到一个如下所示的文本框

![在此处输入图像描述](../Images/b97072fb7faf299e90b0d37db0d378f9.png)

我尝试从头开始重新安装 crud，但还是一样。

`add`并且`update`不显示成功消息，当我单击更新并转到列表时没有任何反应。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T22:01:17.770

实际上，最好问一下，因为当出现 JavaScript 错误时，这是​​杂货店 CRUD 上的常见错误。这主要是在上一页出现 JavaScript 错误时出现的问题。

例如，当您在添加表单时。例如：[http](http://www.grocerycrud.com/demo/offices/add) ://www.grocerycrud.com/demo/offices/add检查您的萤火虫，看看是否有任何 JavaScript 错误。这主要发生在您的 JavaScript 中已经有 jquery 或 jqueryUI 时。如果是这样，那么为了防止冲突，一个简单的代码行可以让你从搜索中解脱出来。你可以简单地做：

```
$crud->unset_jquery(); //This will unset the Jquery library to load 
```

或者：

```
$crud->unset_jquery_ui(); //This will unset the Jquery UI library to load 
```

如果您仍然遇到问题，请检查您的 JavaScript 并尝试删除一些可能导致此问题的插件。有时在安装 Twitter Bootstrap 时会发生这种情况，但只有 unset_jquery() 方法可以完成这项工作。

最后我不确定，但我认为最新的杂货 CRUD 版本与 Jquery v.1.9.0 不兼容。因此，如果您使用的是 Jquery 1.9.0，请尝试切换到以前的版本，例如 1.8.3，否则您必须等待支持 Jquery v.1.9.0的杂货店 CRUD v.1.4 的**主要版本。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-21T22:05:38.930

如果有人遇到这个问题，我认为这是一个模板问题，但没有更多时间诊断，我只需在 Grocery_CRUD.php 库的函数中设置`success_message`为。`null``update_layout`

这消除了错误，但当然不包括成功消息。

# javascript - jQuery mobile如何检测刷新

> ID：14609080
> 
> 赞同：6
> 
> 时间：2013-01-30T16:39:16.563
> 
> 标签：javascript, jquery, html, jquery-mobile

一些背景；

*默认情况下，当您单击指向单独 HTML 页面的链接时，JQM 会加载该页面上的第一个 data-role="page" 并将其附加到第一页的 DOM，事情是 JQM 仅加载该页面 div 而不是任何脚本等在该容器之外。*

我有一个 jQuery 移动应用程序，有 5 页“login.html”“menu.html”“account.html”“settings.html”..etc

我用喜欢改变页面；

```
 $.mobile.changepage("account.html") 
```

此外，我将所有页面加载逻辑都放在我的第一页**login.html**中，如下所示；

```
<script>
     $(document).on('pageinit', '#loginpage', function() {
       //do some stuff run some ajax scripts and add some html to its body
    });

  $(document).on('pageinit', '#accountpage', function() {
        //do some stuff run some ajax scripts and add some html to its body
    });

   $(document).on('pageinit', '#settingspage', function() {
        //do some stuff run some ajax scripts and add some html to its body
    });

</script> 
```

虽然这个应用程序运行良好，但问题是我发现它非常脆弱，很难从意外错误中幸存下来。例如;

由于每个页面的正文 html 将如何加载在**login.html**中定义，这意味着如果任何时候用户**手动刷新**这些页面中的任何一个，页面将在不运行这些脚本的情况下加载，并加载一个没有正文的空页面。在那一刻，由于从内存中删除了正确的 DOM，用户被困在一个充满空白页面的应用程序中，唯一的方法是他足够聪明，可以在地址栏输入“login.html”，然后所有进程才能启动顺利。

我认为我们不能 %100 隐藏地址栏，向下滚动后它再次可见。

所以这是我想出的一个问题，可能会发生其他一些奇怪的事情，如果 DOM 以某种方式损坏，再次使用应用程序的唯一方法是输入 login.html 地址栏，用户可能不会对此感兴趣。

我怎样才能让这个应用程序更健壮，比如检测任何 DOM 损坏或刷新并将用户转发到 login.html，这样他就不会卡在一个有空页面的应用程序中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T21:31:27.970

减轻痛苦的一种方法是[将特定于页面的脚本放在 `data-role="page"`适当的 html 文件中的](http://jquerymobile.com/demos/1.2.0/docs/pages/page-scripting.html)元素内，并为该元素外的每个页面保留相同的脚本（在`body`and/or的 and 处`head`）。

这样即使用户刷新页面，所有必要的脚本仍然会被执行。但是有一个问题，在绑定任何处理程序之前，您需要先取消绑定它们。否则，您最终将附加多个处理程序。

为了说明这一点：

在`login.html`（**更新**）：

```
<div data-role="page" id="loginpage">
    <script>
        $(document).off('pageinit', '#loginpage').on('pageinit', '#loginpage', function() {
            $(document).off('click', '#btnaccount').on('click', '#btnaccount', function(){
                $.mobile.changePage("jqmaccount.html", {reloadPage: true});
            });
            console.log("paginit in loginpage");
        });
        $(document).off('pageshow', '#loginpage').on('pageshow', '#loginpage', function() {
            console.log("pageshow in loginpage");
        });
    </script>
    <div data-role="content">
        <a id="btnaccount" href="#" data-role="button">Account</a>
    </div>
</div> 
```

在`account.html`（**更新**）：

```
<div data-role="page" id="accountpage">
    <script>
    $(document).off('pageinit', '#accountpage').on('pageinit', '#accountpage', function() {
        $(document).off('click', '#btnlogout').on('click', '#btnlogout', function(){
            $.mobile.changePage("jqmlogin.html", {reloadPage: true});
        });
        console.log("pageinit in accountpage");
    });
    $(document).off('pageshow', '#accountpage').on('pageshow', '#accountpage', function() {
        console.log("pageshow in accountpage");
    });
    </script>
    <div data-role="content">
        <a id="btnlogout" href="#" data-role="button">Logout</a>
    </div>
</div> 
```

在此设置中，如果用户刷新 account.html，该页面上的注销按钮仍然有效。

# java - 通过 Applets 中的拖放将文本添加到图像上

> ID：14609083
> 
> 赞同：2
> 
> 时间：2013-01-30T16:39:27.380
> 
> 标签：java, swing, drag-and-drop, applet, awt

我需要在 java 小程序中显示图像，并带有文本元素（标签）以移动到用户选择的点。是否可以通过将文本拖放到图像上来实现？我需要使用哪些方法？

我正在寻找类似的[东西](http://www.javascriptkit.com/howto/drag.shtml)。

编辑：感谢您的有用回复。下面的代码工作正常！但是如何通过图像中的 x,y 坐标获取文本位置？

```
public class MouseDragTest extends JPanel {

    private static final String TITLE = "Drag me!";
    private static final int W = 640;
    private static final int H = 480;
    private Point textPt = new Point(W / 2, H / 2);
    private Point mousePt;
    Image img;

    public MouseDragTest() {
        img = Toolkit.getDefaultToolkit().createImage("my_image.jpg");
        this.setFont(new Font("Serif", Font.ITALIC + Font.BOLD, 32));
        this.addMouseListener(new MouseAdapter() {

            @Override
            public void mousePressed(MouseEvent e) {
                mousePt = e.getPoint();
                repaint();
            }
        });
        this.addMouseMotionListener(new MouseMotionAdapter() {

            @Override
            public void mouseDragged(MouseEvent e) {
                int dx = e.getX() - mousePt.x;
                int dy = e.getY() - mousePt.y;
                textPt.setLocation(textPt.x + dx, textPt.y + dy);
                mousePt = e.getPoint();
                repaint();
            }
        });
    }

    @Override
    public Dimension getPreferredSize() {
        return new Dimension(W, H);
    }

    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        int w2 = g.getFontMetrics().stringWidth(TITLE) / 2;
        g.drawImage(img, 0, 0, null);
        g.drawString(TITLE, textPt.x - w2, textPt.y);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            public void run() {
                JFrame f = new JFrame(TITLE);
                f.add(new MouseDragTest());
                f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                f.pack();
                f.setLocationRelativeTo(null);
                f.setVisible(true);

            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:51:22.813

您可以使用`drawImage()`in`paintComponent()`来显示您的发票，就像它们[在此处](https://stackoverflow.com/a/523818/261156)显示一样，并拖动文本，就像它们[在此处](https://stackoverflow.com/a/5312702/261156)显示一样。另一种方法是使用[The Glass Pane](http://docs.oracle.com/javase/tutorial/uiswing/components/rootpane.html#glasspane)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T17:54:01.183

> 如何通过图像中的*x,y*坐标获取文本位置？

听起来您想重复编辑文本和位置。完成拖动后，`textPt`将是您下次加载该图像时要绘制文本的点。您可以存储详细信息`java.util.Preferences`并在重新启动时恢复它们。

```
private static class AnnotatedImage {
    File file;
    List<String> notes;
    List<Point> points;
} 
```

当您使用时`createImage()`，`this`请在绘图时用作图像观察者。

```
g.drawImage(img, 0, 0, this); 
```

# sql - 消除子查询

> ID：14609086
> 
> 赞同：-1
> 
> 时间：2013-01-30T16:39:35.950
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005

我正在寻找一种可能的方法来消除子查询。

任何评论都会有所帮助

```
SELECT
    [FacilityGroupID]
    ,[LocationGroupID]
    ,[MsrID]
    ,CAST(LEFT([ReportingPeriod],4) + '-' 
                + RIGHT([ReportingPeriod],2)
                + '-01' as datetime) as create_timestamp
    ,SUM([Denominator]) as [Denominator]
    ,SUM([Numerator]) as [Numerator]
FROM
(
    SELECT 
        DISTINCT
        Tob.FacilitygroupId
        ,Tob.LocationgroupId
        ,Tob.Reportingperiod
        ,Tob.Denominator
        ,DimIndicator.MsrId
        ,CASE
            WHEN DimIndicator.MsrID = Tob.MsrId THEN 1
            ELSE 0 
        END as Numerator

    from
        BIReport.dbo.vIndianatest "Tob"
            INNER JOIN [BIreport].[dbo].[DimIndicator] "DimIndicator"
                on Tob.MsrSubGroupId = DimIndicator.MsrSubGroupId
) as "Inner"

GROUP BY
    [FacilityGroupID]
    ,[LocationGroupID]
    ,[MsrID]
    ,CAST(LEFT([ReportingPeriod],4) + '-' 
                + RIGHT([ReportingPeriod],2)
                + '-01' as datetime) 
```

与子查询一样，性能太慢了。

谢谢 ！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T17:27:55.180

你试过`WITH`吗？`With`对内联视图进行子查询。

一般用途`with`：

```
with clausename AS
(
subquery
)
main query referencing clausename; 
```

例子：

```
-- define with clause
with saletot as
    (
     select dname, sum(sal) as dept_total
     from emp, dept
     where emp.deptno = dept.deptno
     group by dname
    )
-- Main query which use the with clause
   select dname, dept_total
   from saletot        -- Reference to with clause
   order by dept_total desc; 
```

# java - SSO 混淆 - 包含 SSL 困难

> ID：14609092
> 
> 赞同：1
> 
> 时间：2013-01-30T16:39:57.333
> 
> 标签：java, windows, single-sign-on, smartcard, josso

我在 AIX 服务器上有一个 WebSphere，在 Windows XP 上有一个简单的 java 客户端（通过 http 连接到服务器）。我想将 SSL 用于客户端授权。主要是，我有一个智能卡读卡器。

唯一的问题是 - 智能卡已经使用过一次来访问 Windows，我们想省去客户端在客户端应用程序启动期间重新输入 PIN 的麻烦。

我开始阅读很多有关 SSO 的内容 - 我确信这可以帮助解决我的问题。这使我在他们的红皮书中阅读了有关 WebSphere 对 SPENGO 的支持的信息。问题是它需要来自 Active Directory 人员的大量支持——他们并不热衷于提供帮助——而且我担心他们的参与会减慢合并速度。

所以现在我正在研究 OpenSSO、WAFFLE、JOSSO 和其他可能对我有帮助的框架。

但是等等 - 这一切似乎都是一个重大的过度规范。我想要的只是为我的客户保存第二个智能卡提示。我真正想要的是一种方法 - 以下之一：

-Windows XP 及更高版本的设置，使我能够检索智能卡内的证书（以及一些访问加密/解密功能以验证证书）。

- 某种对窗口的访问以允许我这些选项

-Perheps，某种 java pkcs#11 方法，使我能够访问与 Windows 相同的连接。

- 这种能力供应商是特定的吗？

这甚至可能吗？维基百科单点登录条目[http://en.wikipedia.org/wiki/Single_sign-on](http://en.wikipedia.org/wiki/Single_sign-on)谈到了使用智能卡的 SSO - 但到目前为止，我还没有找到任何方法来做到这一点。我所知道的是，如果我尝试将它与常规 pkcs#11 代码一起使用，我的智能卡会再次提示。

总结一下： 1\. 是否有一个 windows/verndor specific/java 使我能够使用智能卡进行 SSO。2\. 如果不推荐或不推荐，鉴于我不想依赖 Active Directory 人员，我应该使用其他什么 SSO 解决方案？3\. 在最坏的情况下，只有使用 Kerberose 和 ActiveDirectory 才能有效地实现 SSO——在 ActiveDirectory 方面，什么实现要求不高？

谢谢你。

# javascript - 使用克隆的 div 切换类

> ID：14609093
> 
> 赞同：1
> 
> 时间：2013-01-30T16:40:01.377
> 
> 标签：javascript, jquery, css, toggle

我有一个下拉菜单，可以在选择后返回结果。然后，用户可以单击一个链接，克隆下拉菜单，然后选择另一个将返回更多结果的选项。结果div的结构如下：

```
<ul>
  <li class="red">
    <span> some html content</span>
  </li>
  <li class="red">
    <span> some html content</span>
  </li>
</ul> 
```

我希望用户单击一个 li 并更改背景颜色。用户一次只能更改一个 li 的颜色。我可以使用以下方法完成第一部分：

```
$("li.red, li.blue").live("click",function() {
      var $this, c;
      $this = $(this);
      c = $this.hasClass("red")
                ? {us: "blue", them: "red" }
                : {us: "red", them: "blue" };
       $("li." + c.us).removeClass(c.us).addClass(c.them);
       $this.removeClass(c.them).addClass(c.us);
    }); 
```

问题在于，当用户添加另一个选择（并且使用 jquery 克隆了先前的下拉列表）并单击该结果 div 中的 li 时，先前的选择未被选中。我希望用户能够为第一组结果更改 li 的背景，以及为第二组结果更改背景。因此，每组结果都可以仅在特定 ul 之间切换背景颜色。

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:42:32.123

尝试使用`on()`而不是`live()`：

```
$(document).on("click","li.red, li.blue",function() {
      ...
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T16:44:06.497

试试这个...

```
$("ul").on("click", "li", function() {
    $(this).parent().find("li").removeClass("red").addClass("blue");
    $(this).toggleClass("red").toggleClass("blue");
}); 
```

jsFiddle 示例... [http://jsfiddle.net/L34pT/3/](http://jsfiddle.net/L34pT/3/)

给 ul 一个类名或 ID 将确保它只影响有问题的列表。它看起来有点无意义，但我使用过`parent`，所以如果你给它一个类或 ID，`find`你只需要更改选择器，它仍然可以工作。`ul`

# jquery - 这些 jQuery if 语句是否正确地通过 ID 获取元素？

> ID：14609099
> 
> 赞同：0
> 
> 时间：2013-01-30T16:40:28.443
> 
> 标签：jquery, html, if-statement, getelementbyid

请帮忙。我正在尝试根据 li 的 ID 显示 html。我以为我知道自己在做什么，但别人看到它总是有帮助的。

```
<div id="calcchooser">
<ul>
<h3>Black and White</h3>
    <li id="bwsoftcover" class="calcbutton s">Paperback</li>
    <li id="bwhardcover" class="calcbutton">Hardcover</li><br><br>
<h3>Standard Color</h3>
    <li id="standardpaperback" class="calcbutton">Paperback</li>
    <li id="standardhardcover" class="calcbutton">Hardcover</li><br><br>
<h3>Premium Color</h3>
    <li id="premiumpaperback" class="calcbutton">Paperback</li>
    <li id="premiumhardcover" class="calcbutton">Hardcover</li><br><br>
<h3>Ebook</h3>
<li id="ebook" class="calcbutton">Ebook</li><br><br>
<h3>Selected Product: <span id="selectedproduct">Black and White Paperback</span></h3> 
```

```
$("#calcchooser li").click(function () {

var bwsoftcover = "Black and White Softcover"
var bwhardcover = "Black and White Hardcover"
var standardsoftcover = "Standard Color Softcover"
var standardhardcover = "Standard Color Hardcover"
var premiumsoftcover = "Premium Color Softcover"
var premiumhardcover = "Premium Color Hardcover"
var ebook = "Ebook"

$("#percentchooser li").removeClass("s");
$(this).addClass("s");

if( $(this).is('#bwsoftcover'); )    
    {$("#selectedproduct").hide().html(bwsoftcover).fadeIn();}
if( $(this).is('#bwhardcover'); )    
    {$("#selectedproduct").hide().html(bwhardcover).fadeIn();}
if( $(this).is('#standardsoftcover'); )    
    {$("#selectedproduct").hide().html(standardsoftcover).fadeIn();}
if( $(this).is('#standardhardcover'); )    
    {$("#selectedproduct").hide().html(standardhardcover).fadeIn();}
if( $(this).is('#premiumsoftcover'); )    
    {$("#selectedproduct").hide().html(premiumsoftcover).fadeIn();}
if( $(this).is('#bwhardcover'); )    
    {$("#premiumhardcover").hide().html(premiumhardcover).fadeIn();}
if( $(this).is('#ebook'); )    
    {$("#selectedproduct").hide().html(ebook).fadeIn();}

}); 
```

如果需要，CSS

```
li {
display:inline-block;
list-style:none;
margin-right:5px;
position:relative;
cursor:pointer;
}

#calcchooser h3 {
font-weight:bold;
font-size:24px;
}

.calcbutton {
-moz-box-shadow:inset 0px 1px 0px 0px #bee2f9;
-webkit-box-shadow:inset 0px 1px 0px 0px #bee2f9;
box-shadow:inset 0px 1px 0px 0px #bee2f9;
background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #63b8ee), color-stop(1, #468ccf) );
background:-moz-linear-gradient( center top, #63b8ee 5%, #468ccf 100% );
filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#63b8ee', endColorstr='#468ccf');
background-color:#63b8ee;
-moz-border-radius:6px;
-webkit-border-radius:6px;
border-radius:6px;
border:1px solid #3866a3;
display:inline-block;
color:#14396a;
font-family:arial;
font-size:13px;
font-weight:bold;
padding:3px 7px;
text-decoration:none;
text-shadow:1px 1px 0px #7cacde;
}.calcbutton:hover {
background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #468ccf), color-stop(1, #63b8ee) );
background:-moz-linear-gradient( center top, #468ccf 5%, #63b8ee 100% );
filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#468ccf', endColorstr='#63b8ee');
background-color:#468ccf;
}.calcbutton:active {
position:relative;
top:1px;
 } 
```

/* 这个无图像的 css 按钮是由 CSSButtonGenerator.com 生成的 */

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T16:57:37.130

我建议：

```
var opts = {
    bwsoftcover: 'black and white paperback',
    bwhardcover: 'black and white hardcover',
    standardpaperback: 'standard color softcover',
    standardhardcover: 'standard color hardcover',
    premiumpaperback: 'premium color softcover',
    premiumhardcover: 'premium color hardtcover',
    ebook: 'ebook'
};

$('#calcchooser li[id]').click(function () {
    $(this).addClass('s').siblings().removeClass('s');
    var text = opts[this.id];
    $('#selectedproduct').fadeOut(300, function () {
        $(this).text(text).fadeIn(300);
    });

}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/TPkZf/3/)。

实际上，这个答案的关键是使用一个对象（原则上类似于 an ，但使用字母数字键），其值存储的键与您希望用户单击的元素`array`的键相同。实际上，每次单击（*具有*）时，它都会从数组中检索值，其键等于以下行的键：`id``li``li`*`id``id`*

 *```
var text = opts[this.id]; 
```

这*也*允许您在添加新对象但对象中没有相应值（由于错字或疏忽）的情况下输入默认消息`id`，例如：

```
var text = opts[this.id] || 'Default message here'; 
```

这依赖于“假”的返回值，如果没有等于 的键`opts[this.id]`，通常是这样，因此您可以对三元运算符更严格：`undefined``id`

```
var text = opts[this.id] !== undefined ? opts[this.id] : 'Default message here'; 
```

这种方法还避免了使用所有`if`评估和`is()`方法（这使得运行成本大大降低）。

此外，通过使用 JavaScript 对象来包含针对相关元素的描述，可以避免*每次使用 click() 方法时*`id`重新声明相同的变量。

 *此外，我更正了 HTML 以将`h3`元素包含在`li`.

参考：

*   jQuery（在[jQuery API](http://api.jquery.com/)处）：
    *   [`addClass()`](http://api.jquery.com/addClass/).
    *   [`fadeIn()`](http://api.jquery.com/fadeIn/).
    *   [`fadeOut()`](http://api.jquery.com/fadeOut/).
    *   [`removeClass()`](http://api.jquery.com/removeClass/).
    *   [`siblings()`](http://api.jquery.com/siblings/).
    *   [`text()`](http://api.jquery.com/text/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T16:53:56.590

看看这个[jsFiddle](http://jsfiddle.net/gCFu7/2/)。一定要检查每个部分周围的跨度的 HTML 并使用这个 jQuery：

```
$("#calcchooser li").click(function () {
    $("#selectedproduct").text($(this).siblings("h3").text() + " " + $(this).text());
}); 
```**

# ruby - nil:NilClass (NoMethodError) 的未定义方法“[]”

> ID：14609102
> 
> 赞同：-1
> 
> 时间：2013-01-30T16:40:34.713
> 
> 标签：ruby, postgresql, rake, sequel

我正在使用 sequel gem 和 postgresql 数据库

我有一个带有代码的文件 hello.rb

```
require "rubygems"
require './post'
require "sequel"

# connect to an in-memory database
DB = Sequel.connect('postgres://ritesh:newpassword@localhost')

post = Post['ruby1', 'hello world1']
post[1] 
```

我创建了一个表格帖子和一个带有代码的模型

```
require 'sequel'

DB = Sequel.connect('postgres://ritesh:newpassword@localhost')

class Post < Sequel::Model
set_primary_key [:category, :title]

end 
```

当我运行命令 ruby​​ hello.rb 时，我收到以下错误 hello.rb:10: undefined method `[]' for nil:NilClass (NoMethodError)

我想知道创建的第一件事我们应该创建一个具有该名称的表，然后创建一个模型？第二件事，如果第一个假设是正确的，那么为什么我会收到这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:43:12.790

要在 ruby​​ 中构造一个新对象，你应该调用 new。我不确定什么是帖子，但似乎正确的语法应该是：

```
post = Post.new('ruby1', 'hello world1') 
```

否则 post 在此行之后将保持为空。

# kendo-ui - 使用 KendoUI DetailTemplate - 如何使用文字来获取 AJAX 结果

> ID：14609104
> 
> 赞同：0
> 
> 时间：2013-01-30T16:40:35.837
> 
> 标签：kendo-ui

使用 KendoUI 的 DetailTemplate 网格示例作为我的基点 [http: //demos.kendoui.c​​om/web/grid/detailtemplate.html](http://demos.kendoui.com/web/grid/detailtemplate.html)

我正在尝试将 HREF 链接添加到将打开另一个页面的“订单”选项卡。

我曾尝试使用 #= OrderId # 表示法，但这似乎只访问第一个 AJAX 调用结果集 - 即返回的数据拉回用户信息。

我希望能够访问为订单拉回的信息 - 请参阅下面的代码片段我尝试使用 ClientTemplate 方法但无济于事，因为它无法访问（或它不存在）#= OrderId #文字。

我正在使用 AJAX 来提取两组数据的信息，所以似乎无法使用 Template 方法。

任何有关访问作为辅助调用返回的 JSON 数据级别的建议将不胜感激。

```
<script id="employeesTemplate" type="text/kendo-tmpl">
    @(Html.Kendo().TabStrip()
            .Name("TabStrip_#=EmployeeID#")
            .SelectedIndex(0)
            .Items(items =>
            {
                items.Add().Text("Orders").Content(@<text>
                    @(Html.Kendo().Grid<Kendo.Mvc.Examples.Models.OrderViewModel>()
                        .Name("Orders_#=EmployeeID#")
                        .Columns(columns =>
                        {
                            columns.Bound(o => o.OrderID).Width(101);
                            columns.Bound(o => o.ShipCountry).Width(140);
                            columns.Bound(o => o.ShipAddress).Width(200);
                            columns.Bound(o => o.ShipName).Width(200);

Thanks in advance
Andrew 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T22:59:11.473

```
.ClientTemplate("\\#:OrderId  \\#"); 
```

注意双反斜杠。

# android - 为什么我需要将 ImageView 包装到 FrameLayout 中？

> ID：14609106
> 
> 赞同：29
> 
> 时间：2013-01-30T16:40:44.417
> 
> 标签：android, android-layout

这是一个简单的布局：

```
 <RelativeLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content">

            <ImageView
                android:id="@+id/companyIcon"
                android:layout_width="wrap_content"
                android:layout_height="40dp" <!-- notice I've limited a height -->
                android:scaleType="fitStart"
                android:adjustViewBounds="true"
                android:layout_alignParentLeft="true" />

            <TextView
                android:id="@+id/companyName"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_toRightOf="@id/companyIcon"
                android:layout_marginLeft="3dp"
                android:layout_centerVertical="true"
                android:textStyle="bold"
                android:textColor="#20526d" />
        </RelativeLayout> 
```

我将设置的图像高度`setImageBitmap()`超过 40dp。`ImageView`使用这种布局，我在and之间有一个额外的空间`TextView`，它是从哪里来的？ ![在此处输入图像描述](../Images/47dc441ff46d954ba270bc77bacc211d.png)

但是在我用 with 包裹之后`ImageView`，`FrameLayout`我没有这个不必要的额外空间：

```
<RelativeLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content">

            <FrameLayout
                android:id="@+id/image_container"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content">

                <ImageView
                    android:id="@+id/companyIcon"
                    android:layout_width="wrap_content"
                    android:layout_height="40dp"
                    android:scaleType="fitStart"
                    android:adjustViewBounds="true"
                    android:layout_alignParentLeft="true" />
            </FrameLayout>

            <TextView
                android:id="@+id/companyName"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_toRightOf="@id/image_container"
                android:layout_marginLeft="3dp"
                android:layout_centerVertical="true"
                android:textStyle="bold"
                android:textColor="#20526d" />
        </RelativeLayout> 
```

结果：

![在此处输入图像描述](../Images/8e6af13c8071f6715cc82ac635b5b65e.png)

你们能解释一下为什么我要按`ImageView`预期`FrameLayout`去做吗？非常感谢你。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-14T01:08:58.697

> 我将通过 setImageBitmap() 设置的图像高度超过 40dp。使用这个布局我在 ImageView 和 TextView 之间有一个额外的空间，它是从哪里来的？

由于`android:layout_height="40dp"`带有 a `android:scaleType="fitStart"`，图像被缩小（并且向左/开始）以适应高度，所以这个“额外空间”实际上是图像的原始宽度，因为你的`android:layout_width="wrap_content"`. 我用我自己的大于`40dp`. 当您选择 时`ImageView`，您可以看到它的边界拉伸到图像的原始宽度。

![原始布局](../Images/b2f4db615f47472a0588ac7adb114246.png)

为了进一步证明这一点，如果我设置`android:scaleType="center"`，则不应用任何拟合，您可以看到`ImageView`的原始宽度。

![原始布局未缩放以适应](../Images/41ebc6ae2930437f6b364f2f67695e86.png)

> 你们能解释一下为什么我要将 ImageView 放入 FrameLayout 以达到预期的效果吗？

看来，自从您`FrameLayout`使用以来`android:layout_width="wrap_content"`，`ImageView`由于`android:adjustViewBounds="true"`. 奇怪的是，它`ImageView`本身使用`android:layout_width="wrap_content"`，但显示的是原始图像的宽度，而不是缩放后的宽度。我的**预感**是在应用缩放**之前**`ImageView`设置了 s的高度和宽度，因此获取原始图像的宽度，但是在应用缩放**之后**父获取其子图像的缩放宽度。这可能不是真的，但对我来说似乎是这样。**`ImageView``FrameLayout``ImageView`**

 ****但是，您可以`FrameLayout`通过`android:maxHeight="40dp"`在`ImageView`. 然后，您可以进行设置`android:layout_height="wrap_content"`，以便您的图像可以比`40dp`图像更小。

```
<ImageView
    android:id="@+id/companyIcon"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:adjustViewBounds="true"
    android:maxHeight="40dp"
    android:scaleType="fitStart" /> 
```

![使用 maxHeight 的原始布局](../Images/0c762e2d110512aa0d4d2fa398aa7230.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-14T06:55:25.957

这几乎适用于所有观点，但答案是专门考虑到​​的`ImageView`

**设置高度和宽度的指南**

仅选择这三个选项之一。

1.  将高度和宽度**都**`WRAP_CONTENT`设置为“ ”
2.  将高度和宽度**都**`FILL_PARENT`设置为“ ”
3.  将高度和宽度**都**`FIXED SIZE`设置为“ ”

    ***避免**混合使用它们说`Width=WRAP_CONTENT and Height=FILL_PARENT`

* * *

**为 ImageView 设置 SCALETYPE 的指南**

*ScaleType 是做什么的？*

> 它将您设置为 ImageView 的图像缩放，它不会缩放 ImageView，因此当您将其设置为 fitStart 时，它将缩放您的图像并显示在右侧，但您的 imageView 在高度和宽度方面将与您指定的相同.

就像您使用`WRAP_CONTENT`高度和宽度一样，您*不需要指定*ScaleType 因为您的 ImageView 会自动与您的图像一样大。

就像您使用`FILL_PARENT`高度和宽度一样，您可以选择在中心、开始、结束或全视图中显示图像。因此*，您可以根据此选择*您的 ScaleType。

就好像您使用`FIXED_SIZE`fpr 高度和宽度一样，您*应该*选择`scaletype=FITXY`.

* * *

**将 Image 设置为 ImageView 的指南**

就像您在 XML 中**静态**设置图像一样，您手上只有一张图像，因此您可以根据布局设计创建所需大小的图像，然后**继续使用 WRAP_CONTENT**。

就好像您在从某个地方下载图像后在**运行时**设置图像一样，那时**下载图像并创建**您喜欢的大小的位图，然后将其设置为 ImageView

* * *

**具体到您的情况**

您可以看到您的图像被拉伸得很长，并且文本不可读，这是因为您已经下载并设置了图像，但高度和宽度更小..而不是您应该这样做，

`WRAP_CONTENT`在 XML 文件中设置 ImageView 的高度和宽度

```
 <ImageView
                    android:id="@+id/companyIcon"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentLeft="true" /> 
```

下载所需尺寸的图像，例如 50X100，例如查看此代码

```
class LoadPics extends AsyncTask<Void, Bitmap, Bitmap> {
    String urlStr;
    ImageView iv;
    int width, height;

    public LoadPics(ImageView iv, String url, int width, int height) {
        this.iv = iv;
        this.urlStr = url;
        this.width = width;
        this.height = height;
    }

    @Override
    protected Bitmap doInBackground(Void... params) {
        try {
                InputStream in = null;
                try {
                    URL url = new URL(urlStr);
                    URLConnection urlConn = url.openConnection();
                    HttpURLConnection httpConn = (HttpURLConnection) urlConn;
                    httpConn.connect();
                    in = httpConn.getInputStream();
                } catch (MalformedURLException e) {
                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
                }

                BitmapFactory.Options o = new BitmapFactory.Options();
                o.inJustDecodeBounds = true;

                int scale = 2;
                if (o.outHeight > width || o.outWidth > height) {
                    scale = 2 ^ (int) Math.ceil(Math.log(width
                            / (double) Math.max(o.outHeight, o.outWidth))
                            / Math.log(0.5));
                }

                if (scale <= 1 && o.outHeight > 150) {
                    scale = 5;
                }

                BitmapFactory.Options o2 = new BitmapFactory.Options();
                o2.inSampleSize = scale;
                Bitmap b1 = BitmapFactory.decodeStream(in, null, o2);
                b1 = Bitmap.createScaledBitmap(b1, width, height, true);
                loader.addToCache(urlStr, b1);
                publishProgress(b1);

        } catch (Exception e) {
            e.printStackTrace();
        }
        return null;
    }

    @Override
    protected void onProgressUpdate(Bitmap... values) {
        super.onProgressUpdate(values);
        iv.setImageBitmap(values[0]);
    }
} 
```

并用你的参数调用这个方法，

```
new LoadPics(ivUser,imgURL,100,50).execute(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T17:31:58.840

尝试`android:scaleType="fitStart"`用这个替换`android:scaleType="fitXY"`

* * *

**编辑**

在您的图像视图中，您应该将 imagView 的宽度设置为`wrap-content`这将采用图像的大小。如果您对`imageView's`宽度进行硬编码（就像您通过将宽度指定为 40dp 来完成的那样），那么这在其他 android 移动设备中看起来不会那么好。

尽管如此，如果您想这样做，请尝试加载分辨率较低的图像。如果此图像是`200X100`分辨率，则尝试将图像加载到`100X50`您的`ImageView`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T22:16:42.933

如果您这样做`android:scaleType="FIT_END"`，但没有`FrameLayout`，是否会将 Subway 图像放在“Subway”文本附近？我想知道，因为你`android:layout_alignParentLeft="true"`在那里。我在想，`ImageView`缩放之前的原始尺寸是没有`FrameLayout`.

它可能并不重要，但它确实需要一些处理来缩放和调整图像的大小以达到您想要的效果。如果它对您想要做的事情是可行的，我会自己调整图像大小而不是依赖 XML。如果我想迎合多种尺寸，我会制作几种不同的布局。对于您的目的，这当然可能是矫枉过正，我不知道。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T06:03:43.380

第一个图像中有额外的空间，因为您在图像容器布局中设置了匹配父级。但第二次你在 FrameLayout 中使用了包装内容，这是图像容器。

我建议做这些事情创建线性布局内部相对布局并应用 layout_weight 属性，因此两个视图中的比率将相同。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-14T02:46:55.250

尝试将比例类型设置为 center_inside。****

# java - 尝试向按钮添加功能

> ID：14609107
> 
> 赞同：0
> 
> 时间：2013-01-30T16:41:01.077
> 
> 标签：java, button, label, windowbuilder

我使用windowbuilder创建了一个gui，其中我有一个按钮和标签，我希望点击时我可以更改标签文本，我不知道如何做到这一点，电流配置（下面）是我被告知的使用，但它似乎无法正常工作。我知道它非常基础，但这只是我写 java 的第三天，感谢帮助

```
 JButton button1 = new JButton(".............");
        button1.setForeground(Color.RED);
        button1.addActionListener(new ActionListener() {
           public void actionPerformed(ActionEvent e) {
                JLabel clickit.SetText("you clicked it"); 
```

# watir-webdriver - 在一个套件中运行一批测试

> ID：14609108
> 
> 赞同：3
> 
> 时间：2013-01-30T16:41:01.763
> 
> 标签：watir-webdriver

当我的测试库在 Watir 2.0.4/Ruby 1.8.7 上运行时，我能够使用 test/unit/testsuite 在一个可以同时运行定义的测试列表的套件中运行一批测试（见下文）：

```
需要'测试/单元/测试套件'
需要'test/unit/ui/console/testrunner'

`require 'foo1.rb'
require 'foo2.rb'

class Foo
    def self.suite
        suite = Test::Unit::TestSuite.new(Foo)

        suite << foo1.suite
        suite << foo2.suite

        return suite
    end
end
Test::Unit::UI::Console::TestRunner.run(Foo)<code>` 

现在我在 Ruby 1.9.2 上使用 Watir-webdriver，这似乎不起作用：

C:/Ruby/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': no such file >to load -- test/unit/testsuite (LoadError)
    from C:/Ruby/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in`require' from testsuite.rb:6:in `<top (required)>'
    from -e:1:in`load' from -e:1:in `'

其他人在做什么来将一组测试串在一个套件中？

谢谢，

GJHmf

            回答 #1

赞同：1

时间：2013-01-31T14:27:34.760

所以这个问题有一个答案，正如评论中提到的，问题是没有安装测试单元gem。

测试单元 gem 曾经包含在 Ruby 1.8.7 的默认安装中。在 Ruby 1.9 中，它被 minitest gem 取代，这就是您现在必须手动安装它的原因。

要使用与 Ruby 1.8.7 中相同版本的测试单元：

```
gem install test-unit -v 1.2.3 
```

或最新版本：

```
gem install test-unit 
```

```

# list - 在散点图上绘制/查找数据的周长

> ID：14609109
> 
> 赞同：0
> 
> 时间：2013-01-30T16:41:06.413
> 
> 标签：list, wolfram-mathematica, scatter-plot, area

关于包含的图表（ListLinePlotted 更清楚地显示数据集），

1：我将如何找到和/或绘制每个数据集的周长；理想情况下是列表形式，因此当我使用 LisLogPlot 与原始数据一起绘制它时，它会缩放。（类似于 FindCurvePath，但用于非圆形）

2：我将如何填充 ListPlot 上的数据集所包含的整个区域。即，生成的图形将在每个区域的形状中具有四个块颜色区域。

本质上，我只是在尝试清楚地显示不同区域的绘图。如果有更好的方法，那么我愿意接受建议！

PS 对于这个特定的地块，这些区域永远不会相交。

![在此处输入图像描述](../Images/cc81a9bc0ec52fe27ba5ea9cee4abc3a.png)

# php - 阻止 PHP 解码我的 url 参数

> ID：14609114
> 
> 赞同：0
> 
> 时间：2013-01-30T16:41:17.463
> 
> 标签：php, javascript, url-rewriting, urlencode, url-parameters

我通过 URL（键，值）发送逗号分隔的值。我用 Javascript 的 escape() 对它们进行编码，然后用 %2c 替换每个值中的逗号。问题是在 PHP 结束时，编码的逗号在发生 explode() 之前变成了“，”，然后我的包含逗号的字符串被分解了，它不能正确保存。

如何阻止 PHP 将我的编码位转换回未编码位？

我的每个输入的 JS 是：

```
fieldData += $(this).attr("id")+","+escape($(this).html()).replace(/,/g,"%2c")+","; 
```

我的PHP是：

```
$fieldData = explode(",", $_POST['fieldData']); 
```

尝试过（连同其他东西）：

```
$fieldData = explode(",", urlencode($_POST['fieldData'])); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:32:23.470

我建议为此使用 base64encode/decode。

javascript 看起来像这样：http: [//jsfiddle.net/Y6yuN/](http://jsfiddle.net/Y6yuN/)

```
<script src='http://javascriptbase64.googlecode.com/svn/trunk/base64.js'></script>
fieldData += $(this).attr("id")+","+escape(Base64.encode($(this).html()))+","; 
```

逃逸是尾随 =

所以你最终会得到逗号分隔的 base64 编码字符串。

在 PHP 方面：

```
$fieldData = explode(",", $_POST['fieldData']);
foreach ($fieldData as $k => $v){
  $fieldData[$k] = base64_decode(urldecode($v));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T16:46:06.257

您的帖子没有很好地解释，但我认为您想解码 JS 传递的数据。所以，代码应该是：

```
$fieldData = explode(",", urldecode($_POST['fieldData'])); 
```

如果我错了，试着写得更好！

# javascript - 在分隔符而不是全局分隔符之间匹配子字符串

> ID：14609115
> 
> 赞同：0
> 
> 时间：2013-01-30T16:41:23.870
> 
> 标签：javascript, regex, string, pattern-matching

我正在尝试在下面的代码中检索大括号之间的字符串。但不是`string1`,`string2`等等...它给出`string1}{string2}{string3}{string4}{string5}{string6`一个字符串

```
var m   = "{string1}{string2}{string3}{string4}{string5}{string6}";
var res = /\{(.*)\}/g.exec(m);
alert(res.length); // returns 2
alert(res[1]);     // returns string1}{string2}{string3}{string4}{string5}{string6 
```

知道如何解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:42:29.737

设置`?`惰性匹配：

```
/{(.*?)}/g 
```

# android - 在android上生成PKCS10请求时出错

> ID：14609119
> 
> 赞同：0
> 
> 时间：2013-01-30T16:41:31.143
> 
> 标签：android, eclipse, certificate

我正在尝试按如下方式生成 PKCS10 请求（它正在 PC 上运行）

```
package exam.blowfishcipher;

import java.io.FileWriter;
import java.io.OutputStreamWriter;
import java.security.KeyPair;
//import java.security.KeyPairGenerator;
import java.security.SecureRandom;

import javax.security.auth.x500.X500Principal;

import org.bouncycastle.jce.PKCS10CertificationRequest;
import org.bouncycastle.openssl.PEMWriter;

import android.os.Environment;
import chapter6.PKCS10ExtensionExample;

public class PKCS10Generater
{
public static PKCS10CertificationRequest generateRequest(
        KeyPair pair)
        throws Exception

        {           
         return new PKCS10CertificationRequest(
                 "SHA256withRSA",
                 new X500Principal("CN=Test CA Certificate"),
                 //new X500Principal("CN=end"),
                 pair.getPublic(),
                 null,
                 pair.getPrivate());
        }

public static void pemEncodeToFile(String filename, Object obj, char[] password) throws Exception{
    PEMWriter pw = new PEMWriter(new FileWriter(filename));
       if (password != null && password.length > 0) {
           pw.writeObject(obj, "DESEDE", password, new SecureRandom());
       } else {
           pw.writeObject(obj);
       }
       pw.flush();
       pw.close();
}

public static void reqGen() throws Exception
{
    //create the keys
    /*
    KeyPairGenerator kpGen = KeyPairGenerator.getInstance("RSA", "BC");
    //KeyPairGenerator kpGen = KeyPairGenerator.getInstance()

    kpGen.initialize(512, chapter4.Utils.createFixedRandom());

    KeyPair pair=kpGen.generateKeyPair();
    */
    //PKCS10CertificationRequest request = generateRequest(pair);

    KeyPair pair = chapter8.Utils.generateRSAKeyPair();
    //PKCS10CertificationRequest request = PKCS10ExtensionExample.generateRequest(pair);
    PKCS10CertificationRequest request = PKCS10ExtensionExample.generateRequest(pair);
    //System.out.println(request);
    //KeyPair pair = chapter6.Utils.generateRSAKeyPair();
    //PKCS10CertificationRequest request = generateRequest(pair);

    pemEncodeToFile(Environment.getExternalStorageDirectory()+"pkcs10.req", request, null);
    PEMWriter pemWrt = new PEMWriter( new OutputStreamWriter(System.out));
    pemWrt.writeObject(request);
    pemWrt.close();

    /////////////////writing private key
    //PEMWriter pemWrt1 = new PEMWriter(new OutputStreamWriter(System.out));
    //pemWrt1.writeObject(pair.getPrivate());
    //pemEncodeToFile("userPrivate.key", pair.getPrivate(), null);
    //pemWrt1.close();
    /////
    /////

    ////
    //FileOutputStream fOut = new FileOutputStream("pkcs10.req");
    //fOut.write((request.getEncoded()));
    //fOut.write(sw.toString());
    //fOut.close();
    //pemWrt.close();

} 
```

}

来自控制台输出的错误消息如下

***[2013-01-31 02:15:05 - BlowfishCipher] Dx 故障处理“javax/crypto/BadPaddingException.class”：***

不构建核心库时对核心类（java.* 或 javax.*）的不明智或错误使用。

这通常是由于在使用 IDE（例如 Eclipse）时无意中在应用程序的项目中包含了核心库文件。如果您确定您不是故意定义核心类，那么这是对正在发生的事情的最可能的解释。

但是，您实际上可能正在尝试在核心命名空间中定义一个类，例如，您可能从非 Android 虚拟机项目中获取了该类的源代码。这肯定是行不通的。至少，它会危及您的应用程序与平台未来版本的兼容性。它的合法性也经常受到质疑。

如果你真的打算构建一个核心库——它只适合作为创建完整虚拟机分发的一部分，而不是编译应用程序——然后使用“--core-library”选项来抑制这个错误消息。

如果您继续使用“--core-library”，但实际上正在构建应用程序，那么请预先警告您的应用程序在某些时候仍将无法构建或运行。请为愤怒的客户做好准备，他们会发现，例如，一旦他们升级操作系统，您的应用程序就会停止运行。你会为这个问题负责。

如果您合法地使用了一些恰好位于核心包中的代码，那么您拥有的最简单安全的替代方法是重新打包该代码。也就是说，将有问题的类移动到您自己的包命名空间中。这意味着它们永远不会与核心系统类发生冲突。JarJar 是一个可以帮助您完成这项工作的工具。如果你发现你做不到这一点，那么这表明你所走的道路最终会导致痛苦、痛苦、悲伤和悲叹。

[2013-01-31 02:15:05 - BlowfishCipher] Dx 1 错误；中止 [2013-01-31 02:15:05 - BlowfishCipher] 转换为 Dalvik 格式失败，错误 1

我不知道为什么这些代码在 android 上无法正常运行...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-26T08:32:10.440

我也遇到这个问题；

这通常是由于在您的应用程序项目中无意中包含了核心库文件；

你的包与 android.jar 冲突；

# jquery - jquery.on 滚动不起作用

> ID：14609120
> 
> 赞同：5
> 
> 时间：2013-01-30T16:41:31.520
> 
> 标签：jquery

我正在尝试构建一个 DOM 事件记录器，以便回放用户如何与页面交互。我想使用 jquery.on 功能，这样我就可以记录页面上的所有事件。在这个特定的例子中，我试图记录滚动事件，但最终我想记录各种事件。

这是我的 JS Fiddle 的链接。我希望用户滚动 div 后，文本“Hello”会变为“Bye”。

[http://jsfiddle.net/MnpPM/](http://jsfiddle.net/MnpPM/)

这里是html

```
<div id="parent" style="height: 300px; width: 300px; overflow: scroll">
    <div style="height: 500px; width: 500px">
        Hello
    </div>
</div> 
```

这里是javascript

```
$(document).on('scroll', '*', function () { $(this).html('Bye') }); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T16:43:36.077

该`scroll`事件不会通过 dom 传播，因此您不能与委托一起使用。

如果要收听`scroll`事件，则需要将回调直接添加到元素：

```
$(function() {
     $("#parent").on('scroll', function () { $(this).html('Bye') });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-20T05:12:22.657

正如 t.niese 所说，对于您或任何有类似要求的人来说，使用 mouseenter 和 mouseleave 可能是一种选择，我修改了 jsfiddle 代码，因此它可能会提示谁正在阅读，请注意这是错误的，但您明白了.

[http://jsfiddle.net/MnpPM/30/](http://jsfiddle.net/MnpPM/30/)

这是代码：

```
var scrollCount = 0;
$('body').on('mouseenter','*',function(e){
    console.log('mouseenter');
    $(this).scroll(function(){
           scrollCount++;
           console.log('Current Count:'+scrollCount);
    });   
    $(this).mouseout(function() {
      $(this).unbind();
    }); 
}); 
```

我对动态加载的滚动 div 使用了类似的代码，并且可以正常工作。

# iphone - 带有 nib 的 ViewController 的子类

> ID：14609121
> 
> 赞同：0
> 
> 时间：2013-01-30T16:41:34.543
> 
> 标签：iphone, ios, cocoa-touch

我有一个 ViewController，我已经设置了插座和一个 NIB。

这是我的超类视图控制器。

我现在想创建这个视图控制器的子类，因为我想重写一个方法。

我不知道该怎么做。

我已经尝试过这样做，但目前我刚刚让超类中的函数代替了我想要的实际类。

任何指针？

**编辑**

抱歉，我做得对，但在被覆盖的函数中有错字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T16:46:56.420

如果您希望您的超类函数不运行，那么您必须覆盖它们。只需编写您要覆盖的方法的定义，它将覆盖它。其余功能将与超类相同。

# jsf-2 - PrimeFaces p:commandButton

> ID：14609128
> 
> 赞同：0
> 
> 时间：2013-01-30T16:41:56.757
> 
> 标签：jsf-2, primefaces, commandbutton, primefaces-mobile

我正在使用 primefaces mobile(0.9.2 - jsf2)，我有一个奇怪的问题。我有一个带有 2 个按钮的视图，一个用于添加，另一个用于保存订单。添加按钮工作正常，但是当我单击保存按钮时，它不是调用保存方法，而是首先进入方法添加，然后进入保存方法。有人有小费吗？谢谢你..

```
...<div class="field-input" >
                        <p:commandButton action="#{pedidoMobileBean.adicionaProduto()}" id="pcbAdd" value="Adicionar" update="hpgItens hpgTotais hpgTipoBonificacao"  icon="plus" iconPos="left" ></p:commandButton>                                
                    </div>
                    <div class="label-input"></div>
                     <div class="field-input">
                    <p:commandButton action="#{pedidoMobileBean.salvar()}" ajax="true" id="pcbSave" value="Salvar" update="hpgPedidoV3 :Form:hpgPedidoV1" ></p:commandButton>

                    </div>... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T12:40:12.260

尝试将进程属性添加到您的保存按钮：

```
<p:commandButton ajax="true" process="@this" ..../> 
```

# asp.net - w3wp 的 CPU 使用率在 ASP.NET MVC4 Web 应用程序上上升到 100%

> ID：14609129
> 
> 赞同：5
> 
> 时间：2013-01-30T16:41:56.943
> 
> 标签：asp.net, cpu, w3wp

我们有一个使用 Entity Framework 4.0 的 ASP.NET MVC4 应用程序。当我们在生产服务器上部署时，CPU 会在一段时间（~2-5h）后上升，直到接近 100%。内存也随之上升，直到最大值。一段时间后，由于内存过高，应用程序池将自动重置。

服务器：Windows 2008 R2 Standard SP1 IIS：7 (V 7.5.7600.16385) 只有一个应用程序池和一个 Web 应用程序正在运行。

来自消耗大部分 CPU 的线程的调试诊断工具的堆栈跟踪：

```
SNIReadSyncOverAsync(SNI_ConnWrapper*, SNI_Packet**, Int32) 
.SNIReadSyncOverAsync(SNI_ConnWrapper*, SNI_Packet**, Int32) 
System.Web.Hosting.UnsafeIISMethods.MgdIndicateCompletion(IntPtr, System.Web.RequestNotificationStatus ByRef) 
System.Web.Hosting.UnsafeIISMethods.MgdIndicateCompletion(IntPtr, System.Web.RequestNotificationStatus ByRef) 
ntdll!NtWaitForSingleObject 
KERNELBASE!WaitForSingleObjectEx 
System_Data!SNIReadSyncOverAsync 
System_Data_ni!load_config_used 
System_Data_ni!load_config_used 
System_Data_ni!load_config_used 
System_Data_ni!load_config_used 
System_Data_ni!load_config_used 
System_Data_ni!load_config_used 
System_Data_ni!load_config_used 
System_Data_ni!load_config_used 
System_Data_ni!load_config_used 
System_Data_ni!load_config_used 
System_Data_ni!load_config_used 
System_Data_ni!load_config_used 
System_Data_ni!load_config_used 
System_Data_ni!load_config_used 
System_Data_ni!load_config_used 
System_Data_Entity_ni 
System_Data_Entity_ni 
System_Data_Entity_ni 
System_Data_Entity_ni 
System_Core_ni 
System_Core_ni 
0x000007fe`99223112 
0x000007fe`99222a88 
0x000007fe`99222899 
0x000007fe`992205cb 
0x000007fe`99355596 
System_Web_Mvc_ni+138058 
System_Web_Mvc_ni+13ca67 
System_Web_Mvc_ni+13e71c 
System_Web_Mvc_ni+13ca03 
System_Web_Mvc_ni+13d175 
System_Web_Mvc_ni+13cbe9 
System_Web_Mvc_ni+1431df 
System_Web_Mvc_ni+13dade 
System_Web_Mvc_ni+14f5fe 
System_Web_Mvc_ni+13b0ef 
System_Web_Mvc_ni+14f514 
System_Web_ni 
System_Web_ni 
System_Web_ni 
System_Web_ni 
System_Web_ni 
System_Web_ni 
System_Web_ni 
System_Web_ni 
clr!UMThunkStub 
webengine4!W3_MGD_HANDLER::ProcessNotification 
webengine4!W3_MGD_HANDLER::DoWork 
webengine4!RequestDoWork 
webengine4!CMgdEngHttpModule::OnExecuteRequestHandler 
iiscore!NOTIFICATION_CONTEXT::RequestDoWork 
iiscore!NOTIFICATION_CONTEXT::CallModulesInternal 
iiscore!NOTIFICATION_CONTEXT::CallModules 
iiscore!W3_CONTEXT::DoWork 
iiscore!W3_CONTEXT::IndicateCompletion 
webengine4!MgdIndicateCompletion 
System_Web_ni 
System_Web_ni 
System_Web_ni 
System_Web_ni 
clr!UM2MThunk_WrapperHelper 
clr!UM2MThunk_Wrapper 
clr!Thread::DoADCallBack 
clr!UM2MDoADCallBack 
clr!UMThunkStub 
webengine4!W3_MGD_HANDLER::ProcessNotification 
webengine4!ProcessNotificationCallback 
clr!UnManagedPerAppDomainTPCount::DispatchWorkItem 
clr!ThreadpoolMgr::ExecuteWorkRequest 
clr!ThreadpoolMgr::WorkerThreadStart 
clr!Thread::intermediateThreadProc 
kernel32!BaseThreadInitThunk 
ntdll!RtlUserThreadStart 
```

你知道这个CPU上升的原因是什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-12-14T20:08:47.373

`SNIReadSyncOverAsync`嘿，我在使用大量线程时间时 遇到了完全相同的问题（我使用 DebugDiag 发现了这一点）。

我不知道这是否对其他人有帮助，但看起来我们的问题出在我们使用的 Azure DB 服务器上。我们将其设置为只有 50 个 DTU，最多有 100 个并发请求。

基本上`SNIReadSyncOverAsync`是这么大，因为 Web 服务器必须坐在那里等待 DB 服务器的响应，而 DB 服务器一次只能处理 100 个请求，所以 Web 服务器最终等待很长时间（导致 100% CPU 使用率和无法访问的网站）。这可能会随着最近网络流量的增加而弹出（例如：如果你们最近购买了广告并且看到您的网络流量增加了很大比例，那么现在 100 个并发请求是不够的）

因此，如果您像我们一样使用 Azure DB，请检查您的 DTU % 使用情况。如果它经常很高（80-90% 等），请尝试将其增加到两倍甚至四倍（这可能很昂贵！）。我们从“Elastic Standard”（50 个 eDTU）升级到“Standard S4”（400 个 DTU），但我们还没有看到 CPU 使用率达到 100%。事实上，自那以后它一直在 7-9% 左右浮动。

# node.js - 我可以在不复制公共存储库的情况下运行私有 npm 存储库吗？

> ID：14609131
> 
> 赞同：38
> 
> 时间：2013-01-30T16:42:01.343
> 
> 标签：node.js, package, npm, package-managers

我正在使用 node.js 编写一些代码（供内部使用），并希望将模块（为 npm 打包）存储在一个包存储库中，用于每个分发到将安装它们的各种机器。

理想情况下，我想要一个类似于 Debian 的 apt 存储库的解决方案，我可以在其中运行私有存储库服务器并配置 npm 以使用要安装的存储库列表（安装“foo”时，如果我的私人知道“foo”服务器从那里安装它，否则从公共服务器安装它）。

但是，看起来 npm`registry`配置键只接受一个 URL。

有没有办法实现我想要的？

我能找到的最接近的是：

*   在本地镜像公共存储库并在其上添加我的包……但我不想在 AWS 上复制大量数据（2.5G 并且仍在下载）。
*   将我所有的包托管在 git 存储库中并从那里安装（这更麻烦）。
*   在 HTTP 上托管静态包（据我所知，这将阻止我自动获取“最新版本”。我想我可以用符号链接做一些事情，但这仍然不如 git 灵活，需要完整的 URL（需要保持最新），并且不提供可搜索的存储库。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2014-03-04T22:23:59.353

我只是为我的工作设置了这个。这是我所做的：

1.  **设置空的 NPM 注册表**：我按照 npmjs.org 的这个分支的说明进行操作，它添加了很多[改进的文档](https://github.com/rvagg/npmjs.org/blob/6793c71165934423f1989f54a754a6691a94f3b0/README.md)。

2.  **设置 Kappa**：我使用了[Kappa](https://github.com/paypal/kappa)，这是 Paypal 的一个很棒的 npm 代理。（我猜他们的用例与大多数想要私有存储库的人非常相似；这正是我想要的）。

3.  **设置 npm_lazy**（*可选*）：我想要一个很好的常用包缓存，以防 npmjs.org 出现故障，所以我在整个东西前面添加了[npm_lazy](https://github.com/mixu/npm_lazy)，作为缓存层。

整个过程花了两天时间（ish）才能启动和运行。作为旁注，如果您担心人们会意外推送到公共注册表，我建议将其添加到您的`package.json`：

`"publishConfig": { "registry": "http://my-registry.example.com" },`

这真的只是有点偏执。一旦您将 npm 设置为指向您的 Kappa/npm_lazy 实例，Kappa 就会为您处理发布到您的私有存储库。

*注意：Kappa 只会每次发布到其配置中的第一个存储库。如果您需要同时发布到您的私有注册表和公众，您将需要制定自己的解决方案。*

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-30T20:48:29.693

在您的 package.json 中，您可以使用任何指向有效 npm 打包模块的 url。我使用 s3 的存储桶名称很难猜到。

```
npm pack
s3cmd put *.tgz s3://path-to-your bucket 
```

S3 只是一个示例，您可以使用任何可以将文件放置在 Web 服务器上的方法，甚至可以通过基本身份验证对其进行保护。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-04-03T16:19:45.843

我相信 Paypal 的[Kappa](https://github.com/krakenjs/kappa)项目会满足您的需要。

[这是一篇](http://www.nearform.com/nodecrunch/release-the-kracken-how-paypal-is-being-revolutionized-by-node-js-and-lean-ux#.Uz2J7HVdW0w)描述 Paypal 的 Kraken 项目以及 Kappa 如何融入其中的文章。

我知道在昆汀提出问题时它不可用，但也许这对来到这里的其他人有用。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-07-10T18:54:42.390

[npm-registry-client](https://github.com/npm/npm-registry-client) GitHub 问题 #42 列出了如何创建自己的存储库镜像的几种方法。即：

*   [https://github.com/cnpm/cnpmjs.org](https://github.com/cnpm/cnpmjs.org)
*   [https://github.com/rlidwka/sinopia](https://github.com/rlidwka/sinopia)
    *   [https://github.com/rlidwka/sinopia#similar-existing-things](https://github.com/rlidwka/sinopia#similar-existing-things)
*   [https://github.com/davglass/registry-static](https://github.com/davglass/registry-static)

总的来说，在我看来，您可以通过搜索[https://github.com/npm](https://github.com/npm)拥有的存储库中的问题或在那里提出您的问题来获得最佳答案

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-30T17:55:39.250

仅基于收听[NodeUp](http://nodeup.com/)的最新一集（#37？），我想您可能想看看[irisnpm](https://www.irisnpm.com/)。据我所知，这是一项服务，可为您提供一组合并的公共模块和您自己的私有模块。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-26T09:10:12.573

正如 Dominic Barnes 建议的那样，我们只能复制`_design`文档（CouchDB 表方案）

[如何仅复制设计文档？](https://stackoverflow.com/questions/7309617/how-to-replicate-design-documents-only)

但是，它需要检查是否需要一些数据。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-09-10T14:51:21.310

您可以复制您需要的模块，然后编写一个代理服务器，在您的复制中查找模块。如果模块不存在，它可以通过管道将请求发送到 NPM 并从那里返回结果。

# iphone - 裁剪 UIImage 以适合框架图像

> ID：14609132
> 
> 赞同：46
> 
> 时间：2013-01-30T16:42:01.810
> 
> 标签：iphone, ios, objective-c, uiimage

我需要裁剪 a `UIImage`，用设备相机拍摄，以便它适合另一个`UIImage`，它代表 a `frame`（带有圆形边框等）。检查下图：

![在此处输入图像描述](../Images/0fc3b3f8a389e76b66886886d8e421d5.png) 使用纵横比填充

![在此处输入图像描述](../Images/d3646d7427c6c311b06d6071600ed48b.png) 使用纵横比拟合

所以，我需要的是删除超出帧边界的图像多余部分。我尝试使用`UIBezierPath`,`CGImageRef`以及我在 Google 上搜索的其他方法，但我没有找到解决方案。

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2013-08-17T05:34:23.317

在 Interface Builder 中，使用以下配置：

![在此处输入图像描述](../Images/8b8b6cc8852bff3c626f261a32108525.png)

有两个重要的设置，即：

1.  `Mode: Aspect Fill`

2.  `Clip Subviews`

它也可以通过编程方式完成：

```
[imageView setContentMode:UIViewContentModeScaleAspectFill];
[imageView setClipsToBounds:YES]; 
```

这将正确地用图像填充视图，保持其纵横比并隐藏不适合的内容。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-09T17:05:31.723

`IBOutlet`在您的控制器中创建一个。

```
@property (retain)IBOutlet UIImageView* imageView; 
```

并在`-(void) viewDidLoad`集合

```
imageView.layer.masksToBounds = YES; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T16:45:36.230

在界面生成器中，访问详细信息窗格（第四个）内的*模式*`UIImageView`菜单，然后为您选择正确的菜单（我猜是“中心”或“方面适合”）。

![在此处输入图像描述](../Images/a5852793de1eb312c0fecbae2c890a2e.png)

旧答案：

您可以使用[`contentGravity`](https://developer.apple.com/library/mac/documentation/graphicsimaging/reference/CALayer_class/Introduction/Introduction.html#//apple_ref/occ/instp/CALayer/contentsGravity)CALayer 的属性使其工作

> 一个常量，指定层的内容如何在其边界内定位或缩放。
> 
> ```
>  @property(copy) NSString *contentsGravity 
> ```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-30T16:46:37.210

使用`UIImageView`并做

```
imageView.contentMode = UIViewContentModeScaleAspectFit; 
```

# php - 在数组中存储变量 - PHP

> ID：14609135
> 
> 赞同：0
> 
> 时间：2013-01-30T16:42:10.967
> 
> 标签：php, arrays, wordpress, function, variables

我的网站上有一些 PHP，其中包含以下代码部分：

`'choices' => array ('london' => 'London','paris' => 'Paris',),`

目前**这个列表是静态的 - 我手动添加到它**但是我想**动态生成列表**。

我正在使用以下代码**从 WordPress 动态创建一个数组**并存储在一个变量中：

```
function locations() {
   query_posts(array('orderby' => 'date', 'order' => 'DESC' , 'post_type' => 'location'));
   if (have_posts()) :
      while (have_posts()) : the_post();
        $locations = "'\'get_the_slug()'\' => '\'get_the_title()'\',";
      endwhile;
   endif;
   wp_reset_query();
   $locations_list = "array (".$locations."),";
   return $locations_list; // final variable
} 
```

现在，这就是我被困的地方:-)

我现在如何`$locations_list`分配`'choices'`？

我试过`'choices' => $locations_list`了，但它使我的网站崩溃了。

非常感谢您的任何指点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T16:45:02.083

呃……什么？

```
$locations_list = array();
query_posts(...);
while(have_posts()) {
  the_post();
  $locations_list[get_the_slug()] = get_the_title();
}
wp_reset_query();
return $locations_list; 
```

我不知道你在哪里读到你可以从字符串构建变量，但是......你不能（除了`eval`）所以只需阅读[`array`](http://php.net/array)文档并从那里开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T16:59:11.477

尝试以下： -

```
function locations() {
query_posts(array('orderby' => 'date', 'order' => 'DESC' , 'post_type' => 'location'));
$locations = array();
if (have_posts()) :
  while (have_posts()) : the_post();
    $locations[get_the_slug()] = get_the_title();
  endwhile;
endif;
wp_reset_query();
return $locations; // final variable
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T17:06:30.450

你可以用这个；

```
<?php
function locations() {
    $locations = array();
    query_posts("orderby=date&order=DESC&post_type=location");
    if (have_posts()) {
        while (have_posts()) {
            the_post();
            $locations[] = get_the_slug() ."#". get_the_title();
        }
    }
    wp_reset_query();
    return $locations;
}

// using
$locations = locations();
foreach ($locations as $location) {
    list($slug, $title) =@ explode("#", $location, 2);
    echo $slug, $title;
}
?> 
```

# javascript - IE10/Safari 无法在 iFrame 中隐藏对象/Flash

> ID：14609136
> 
> 赞同：4
> 
> 时间：2013-01-30T16:42:11.200
> 
> 标签：javascript, css, flash, iframe, internet-explorer-10

我在 iFrame 中有一个 Flash 动画。当我试图隐藏它时，IE10 会保持它显示并与其他内容重叠。

```
<body style="background-color: #EEE">
    Testing IE10
    <div id="swfDiv">
        <iframe src="swf.html" width="500" height="50"></iframe>
        <br />
        <button onclick="document.getElementById('swfDiv').style.display='none'">Hide</button>
    </div>
    <div style="background-color: #DDD">
        This try to hide the animation, but it is not working on IE10\.  <br/> It works fine in others browsers and earlier versions of IE.
    </div>
</body> 
```

![IE10](../Images/09aa5ed6db6e5a84279ec637da90b7a4.png)

**更新 02/08/2013** 我在 Safari (5.1.7) 中发现了同样的问题 ![在此处输入图像描述](../Images/33d01c021b9d1221b08da58ca203f9a4.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T22:03:27.350

显然最好的解决方案是将其移出屏幕：

```
.xhide
{
    display: block;
    position: absolute;
    left:-9999px;
} 
```

我们可以在点击时添加这个类来隐藏它，比如：

```
document.getElementById('swfDiv').className = "xhide"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-05T18:16:26.077

在关闭 iframe 之前导航解决了我在 XBAP 上的问题，我认为它也适用于 flash

```
var $iframe = $("#id");
$iframe[0].src = 'about:blank';
$iframe.remove(); 
```

# node.js - NodeJS 和 socket.io 无法发送消息

> ID：14609145
> 
> 赞同：1
> 
> 时间：2013-01-30T16:42:56.327
> 
> 标签：node.js, socket.io

今天我按照 Gonzalo Ayuso 在[http://gonzalo123.com/2011/05/23/real-time-notifications-part-ii-now-with-node-js-and-socket-io/](http://gonzalo123.com/2011/05/23/real-time-notifications-part-ii-now-with-node-js-and-socket-io/)上的教程，但它可以'不发送消息 这是我的 server.js

```
var http = require('http');
var io = require('socket.io');

server = http.createServer(function(req, res){
});
server.listen(8000);

//socket.io
var socket = io.listen(server);
socket.set('transports', ['websocket']);

console.log("Start");
socket.on('connection', function(client){
      client.on('message', function(msg){
          console.log(msg);
          socket.broadcast(msg);
      })
    }); 
```

和client.html

```
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <title>Comet Test</title>
    </head>
    <body>
        <p><a id='customAlert' href="#" onclick='socket.send("customAlert")'>publish customAlert</a></p>
        <p><a id='customAlert2' href="#" onclick='socket.send("customAlert2")'>publish customAlert2</a></p>
        <script src="http://localhost:8000/socket.io/socket.io.js" type="text/javascript"></script>
        <script type="text/javascript">
// Start the socket
var socket = io.connect('http://localhost:8000');

socket.on('message', function(msg){
    console.log(msg);
});
        </script>
    </body>
</html> 
```

我对它进行了一些编辑，以便在我的服务器上运行。但是客户端不会向服务器发送消息。有谁能够帮我？对不起，我的英语不好。

我发现客户端无法连接到服务器，但我不知道为什么？

我的电脑正在运行带有 apache 服务器的 xampp。也许是问题？

更新：我刚刚将传输设置为 xhr-polling，它连接成功。为什么它不接受 websocket？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T02:23:37.613

我发现了我的问题。这是关于防火墙或代理或我的计算机阻止 websocket 协议中的其他东西。我在另一台计算机上测试了该代码，它工作正常。所以我必须重新安装我的系统，并且我可以使用 websocket :D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T09:05:43.010

您需要更仔细地阅读有关 socket.io 的教程首先要调用一些事件，您需要发出事件名称：

```
socket.emit('my other event', { my: 'data' }); 
```

这意味着，在您的 onclick 锚点上需要调用 socket.emit ...，或者调用一些函数，例如：

```
function call_my_event(name){

    socket.emit(name,{my : 'data'});
} 
```

# java - 如何让 maven 在“mvn test”处运行 mySQL 插件

> ID：14609146
> 
> 赞同：0
> 
> 时间：2013-01-30T16:42:59.430
> 
> 标签：java, mysql, maven

每次运行“mvn test”时，如何让 maven 运行以下插件。

我不想每次运行时都发出“mvn sql:execute”

```
<plugin>
                        <groupId>org.codehaus.mojo</groupId>
                        <artifactId>sql-maven-plugin</artifactId>

                        <!-- JDBC Driver -->
                        <dependencies>
                            <dependency>
                                <groupId>mysql</groupId>
                                <artifactId>mysql-connector-java</artifactId>
                                <version>5.0.5</version>
                            </dependency>
                        </dependencies>

                        <configuration>
                            <driver>com.mysql.jdbc.Driver</driver>
                            <url>jdbc:mysql://localhost:3306/jboss</url>
                            <username>xxx</username>
                            <password>xxxx</password>
                            <autocommit>true</autocommit>
                            <onError>continue</onError>
                            <srcFiles>
                                <srcFile>src/test/sql/removeuser.sql</srcFile>
                            </srcFiles>
                        </configuration>

                    </plugin> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-09T17:09:09.197

我[`jcabi-mysql-maven-plugin`](http://www.jcabi.com/jcabi-mysql-maven-plugin/usage.html)正是为此目的而创建的。它在阶段启动 MySQL 服务器并在`pre-integration-test`阶段关闭它`post-integration-test`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T02:03:29.957

您可以通过在插件标签中添加以下内容将您的目标（sql:execute）绑定到测试阶段：

```
 <executions>
                <execution>
                    <id>execute-sql</id>
                    <phase>test</phase>
                    <goals>
                        <goal>execute</goal>
                    </goals>
                </execution>
            </executions> 
```

# javascript - javascript anonymus settimeout 函数队列值

> ID：14609149
> 
> 赞同：-2
> 
> 时间：2013-01-30T16:43:08.353
> 
> 标签：javascript, jquery, jsonp

嗨，我有 json 数组，我想每 5 秒显示下一个值

此代码从服务器获取 json 并将 json 数组发送到函数：

```
function myFunction() {
        $.ajax({
            type: "POST",
            url: "ws.aspx/GetQueue",
            data: "{'eventid':'" + eventID + "'}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (msg) {
                if (msg != null) {
                    var obj;
                    if (msg.hasOwnProperty("d"))
                        obj = jQuery.parseJSON(msg.d);
                    else
                        obj = jQuery.parseJSON(msg);

                    setHtml(obj);
                }

                setTimeout(function () { myFunction(); }, 5000);
            },
            error: function (xhr, ajaxOptions, thrownError) {
                alert(xhr.responseText);

                setTimeout(function () { myFunction(); }, 5000);
            }
        });
    } 
```

这是我将数组发送给它后的函数：

```
function setHtml(obj) {
        for (var i = 0; i < obj.length; i++)
            setTimeout(function () {  $('.Summary').html("<H1>" + obj[i].QueueName + "->" + obj[i].name + ' : ' + obj[i].Queue + "</H1><br/>"); }, 5000);
    } 
```

但是循环内的值是未定义的，这是为什么呢？这个问题的解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:50:35.117

在匿名函数内移动循环：

```
function setHtml(obj) {        
    setTimeout(function () {  
        for (var i = 0; i < obj.length; i++)
            $('.Summary').html("<H1>" + obj[i].QueueName + "->" + obj[i].name + ' : ' + obj[i].Queue + "</H1><br/>"); 
    }, 5000);
} 
```

然后阅读有关 javascript 闭包的信息。在您的版本中， 的值`i`是离开外部函数 ( `setHtml`) 时的值，即`obj.length`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T16:52:04.067

这是因为 的值`i`将等于`obj.length`setTimeout 运行时的值。

```
function setHtml(obj) {
    for (var i = 0; i < obj.length; i++) {
        (function(cObj){
            setTimeout(function () {  $('.Summary').html("<H1>" + cObj.QueueName + "->" + cObj.name + ' : ' + cObj.Queue + "</H1><br/>"); }, 5000);
        })(obj[i]);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T16:57:09.920

问题是当你的`setTimeout`函数被调用时， 的值`i`已经改变了。 `i`将永远是`obj.length`，而且`obj[obj.length]`永远是`undefined`。相反，使用`Array.forEach()`or`$.each()`来迭代你的数组：

```
function setHtml(obj) {
    $.each(obj, function(i, val) {
        setTimeout(function () {
            $('.Summary').html("<H1>" + val.QueueName + "->" + val.name + ' : ' + val.Queue + "</H1><br/>");
        }, 5000);
    });
} 
```

这会将您的代码包装`setTimeout`在其自己的范围内，以便不会更改变量。

或者，将调用`setTimeout`放在它自己的函数中：

```
function setHtml(obj) {
    for (var i = 0; i < obj.length; i++) {
        setSummaryHtml(obj[i]);
    }
}
function setSummaryHtml(val) {
    setTimeout(function () {
        $('.Summary').html("<H1>" + val.QueueName + "->" + val.name + ' : ' + val.Queue + "</H1><br/>");
    }, 5000);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T16:50:47.130

您`datatype:json`已经不需要执行 JSON.parseJSON。通过将其设置为 datatype:json 它将返回一个 javascript 对象，因此

```
if (msg.hasOwnProperty("d"))
         obj = jQuery.parseJSON(msg.d);
 else
         obj = jQuery.parseJSON(msg); 
```

只能是这个

```
if (msg.hasOwnProperty("d"))
         obj = msg.d;
 else
         obj = msg; 
```

您还需要关闭在 setTimeout 函数中循环

```
for (var i = 0; i < obj.length; i++) {
  (function (ii) {
    setTimeout(function () {
      $('.Summary').html("<H1>" + obj[ii].QueueName + "->" + obj[ii].name + ' : ' + obj[ii].Queue + "</H1><br/>");
    }, 5000);
  })(i);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T07:15:46.453

谢谢，除了wirey用于处理循环内的json值之外，所有的都是答案。完整的答案是将元素添加到队列中，如下代码所示：

```
$.each(obj, function (i, val) {                                
                        $('.Summary').delay(5000).queue(function (n) {
                                str = "<H1>" + val.QueueName + "->" + val.name + ' : ' + val.Queue + "</H1><br/>";
                                console.log(str);
                                $(this).html(str);
                                n();
                            });
                    }); 
```

# ajax - Bootstrap typeahead 不显示 AJAX 结果

> ID：14609155
> 
> 赞同：4
> 
> 时间：2013-01-30T16:43:23.563
> 
> 标签：ajax, bootstrap-typeahead

在问之前我想说这不是一个重复的话题。我已经尝试过：

*   [普瓦利斯](https://github.com/pwarelis/Ajax-Typeahead)叉
*   [特克罗森](https://github.com/tcrosen/twitter-bootstrap-typeahead)的
*   [古德伯格的](https://gist.github.com/1866577)代码

...和许多其他人，我也阅读了很多*问答*，但没有一个是我想要的。

我尝试的所有内容都适用于预定义的字符串源，但是当我执行下一步：AJAX 远程源时，它只是在下拉列表中没有显示任何结果。

**更新 - 我的代码** *（不明白为什么反对票。写得好，结构好；））*

*html文件*

```
<html>
<head>
<link href="./bootstrap/css/bootstrap.css" rel="stylesheet" type="text/css" />
</head>
<body>

<input id="myElement" class="typeahead" type="text">

<script src="./js/jquery.js"></script>
<script src="./bootstrap/js/bootstrap-typeahead.js"></script>
<script language="javascript">
$('#myElement').typeahead({
ajax: '/php/ajax.php'
});
</script>
[...] 
```

*ajax.php 文件：*

```
<?php
echo "[{ id: 1, name: 'Terry'}, { id: 2, name: 'Mark'}, { id: 3, name: 'Jack'}]";
?> 
```

这不是 AJAX 问题，因为它在同一台机器上的其他情况下工作。
我可以尝试解决什么问题？几天以来，我真的很崩溃。谢谢阅读。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T18:04:29.490

**在不知道正确答案的情况下**投反对票的人应该在采取行动之前考虑一下。如果有人需要一个真正好的/工作/神奇的自动完成脚本，这里我去：

[真正好的自动完成脚本](http://www.brandspankingnew.net/specials/ajax_autosuggest/ajax_autosuggest_autocomplete.html)

**说明**：这会将建议值的下拉菜单添加到文本字段。用户可以直接单击建议将其输入到字段中，或者使用向上和向下箭头键浏览列表，使用回车键选择一个值。建议列表的值将作为 XML 或 JSON *（通过 PHP 脚本或类似脚本）*提供。

*感谢那些让负面点消失的人；）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-08T03:40:50.387

嘿，在你的 php 文件使用中设置 json 的标题`header('Content-Type: application/json');`

有关标题的更多信息，请访问[此处（stackoverflow 问题）](https://stackoverflow.com/questions/267546/correct-content-type-http-header-for-json)广告，例如[访问此处（www.funnenjoy.com）](http://funnenjoy.com)

# mysql - MySQL，最小日期查询

> ID：14609157
> 
> 赞同：0
> 
> 时间：2013-01-30T16:43:27.140
> 
> 标签：mysql

我有一个 MySQL 表，用于存储班级中所有学生的考试结果。每条记录有以下 3 个字段：student_id、grade 和 date（unix 时间格式）。考虑到并非所有学生都参加了所有考试，并且有些学生在年初之后加入了学校，那么最简单的查询是获取每个学生最早考试的日期、年级和 student_id 的最简单的方法是什么？

这是基于 Raheel Shan 的回答的最终答案（我不喜欢回答我自己的问题）

```
SELECT m.*  
FROM class AS m  
INNER JOIN (  
  SELECT student_id, MIN(date) AS date  
  FROM class  
  GROUP BY student_id) as l  
ON l.date = m.date 
AND l.student_id = m.student_id 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T16:46:56.670

这将为您提供 MIN 日期记录

```
select
  m.*
from mytable as m
  inner join (select
        id,
        min(id)
          from mytable
          group by id) as l
    on l.id = m.id 
```

# dynamic - 链接更改网站语言

> ID：14609163
> 
> 赞同：0
> 
> 时间：2013-01-30T16:43:49.067
> 
> 标签：dynamic

有谁知道或推荐一种将网站转换为不同语言的简单方法。我只需要将站点从西班牙语更改为英语，反之亦然，但该站点将首先以西班牙语加载。也许有一个插件可用？大部分内容是动态的，网站正在使用 Concrete5 CMS 开发。任何想法，将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T16:49:40.730

我认为您需要为此安装一个附加组件。查看国际化，它是免费的：http: [//www.concrete5.org/marketplace/addons/internationalization/](http://www.concrete5.org/marketplace/addons/internationalization/)

这是一个 YouTube 视频，展示了它的实际效果，因此您可以快速查看它是否是您的想法：[https ://www.youtube.com/watch?v=Hd936iaDLqw&feature=player_embedded](https://www.youtube.com/watch?v=Hd936iaDLqw&feature=player_embedded)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T16:48:11.927

您需要一些**自动翻译**工具（因为您说您的内容是动态的）。
网上有很多，你只需要搜索*“自动翻译API”*。
我推荐你使用[谷歌翻译](http://googleblog.blogspot.com.es/2009/09/translate-your-website-with-google.html)。

# fortran - 将 fortran 例程作为 Scheme 函数调用

> ID：14609164
> 
> 赞同：3
> 
> 时间：2013-01-30T16:43:56.563
> 
> 标签：fortran, scheme, racket

是否可以将 Fortran 例程调用为 Scheme 函数？我在网上搜索什么都找不到。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-26T00:03:03.707

可能吗？从技术上讲，是的。大多数现代 Fortran 编译器（例如 ifort、gfortran）支持 Fortran 2003 标准定义的 ISO C 互操作性功能集。因此，应该可以使用 Fortran 语言为您需要的 fortran 库编写与 C 兼容的 API。一旦你有了 C API，你应该能够使用你的方案实现提供的标准 C FFI。当然，调用 C 函数的所有常见警告也适用于此。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T16:29:59.470

答案取决于您使用的实现。这是在 Racket 中编写绑定的示例。绑定适用于 CBLAS 和 LAPACK。CBLAS 库是基于 C 的，而 LAPACK 是基于 Fortran 的。因此，您可以看到两种样式。

[（未完成）CBLAS 和 LAPACK 的球拍绑定](http://lists.racket-lang.org/users/archive/attachments/20130120/14127529/attachment-0001.obj)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T12:32:56.807

这完全取决于您的方案平台。标准本身没有关于 FFI（外部函数接口）的内容，但每个实际实现都有自己的 FFI 机制（如果有）。

如果您使用的是球拍方案，似乎有一个解决方案：请参阅[http://wmfarr.blogspot.fr/2007/04/linear-algebra-in-plt-scheme.html](http://wmfarr.blogspot.fr/2007/04/linear-algebra-in-plt-scheme.html)

# c - 使用 struct { ... char arr[1]; } 构造？

> ID：14609165
> 
> 赞同：7
> 
> 时间：2013-01-30T16:43:57.560
> 
> 标签：c

`char fl[1]`我查看了几个实例，其中我在以下代码片段中看到了类似的内容。我无法猜测这种结构的用途可能是什么。

```
struct test
{
    int i;
    double j;
    char fl[1];
};

int main(int argc, char *argv[])
{
    struct test a,b;
    a.i=1;
    a.j=12;
    a.fl[0]='c';

    b.i=2;
    b.j=24;
    memcpy(&(b.fl), "test1" , 6);
    printf("%lu %lu\n", sizeof(a), sizeof(b));
    printf("%s\n%s\n",a.fl,b.fl);
    return 0;
} 
```

输出 -

```
24 24 
c<some junk characters here>
test1 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T16:46:02.720

[它被称为“结构黑客”，您可以在C 常见问题解答](http://c-faq.com/struct/structhack.html)中了解它。一般的想法是，您为列出的结构分配更多的内存，然后在最后使用数组，就好像它的长度大于 1。

不过，无需再使用此 hack，因为它已被 C99+[灵活数组成员](https://stackoverflow.com/questions/tagged/flexible-array-member)取代。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T16:49:52.373

这个想法通常是为*可变大小*的数据命名，例如从套接字读取的数据包：

```
struct message {
    uint16_t len; /* tells length of the message */
    uint16_t type; /* tells type of the message */
    char payload[1]; /* placeholder for message data */
}; 
```

然后将缓冲区转换为此类`struct`，并通过索引数组成员来处理数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T16:51:18.787

请注意，您编写的代码正在覆盖您不应该触摸的内存。将`memcpy()`多个字符写入一个字符数组。

这个用例通常更像这样：

```
struct test *obj;
obj = malloc(sizeof(struct test) + 300); // 300 characters of space in the
                                         // flexible member (the array).
obj->i = 3;
obj->j = 300;
snprintf(obj->f, 300, "hello!"); 
```

# sql - 基于条件的两表关系

> ID：14609166
> 
> 赞同：2
> 
> 时间：2013-01-30T16:43:59.203
> 
> 标签：sql, sql-server-2005, database-design

我陷入以下情况。

我有两张桌子`Products`和`Postage`：

`Postage`桌子

```
+----------------------------------+
| Weight_GM  | Postal Charges ($)  |
+----------------------------------+
|   20       |  1                  |
|   40       |  1.5                |
|   50       |  1.7                |
+----------------------------------+ 
```

`Products`桌子

```
+-------------------------------+
| SKU   | Title     | Weight_GM |
+-------------------------------+
| ABC   | Shose     |   17      |
| JKL   | Camera    |   27      |
| XYZ   | IPad      |   48      |
+-------------------------------+ 
```

我想创建一个关系以根据两个表中定义的表从`Postage`表中收取适当的邮政费用。`Weight`

期望的结果是这样的：

```
+---------------------------------------------------+
| SKU   | Title     | Weight_GM | Postal Charges    |
+---------------------------------------------------+
| ABC   | Shose     |   17      |   1               |
| JKL   | Camera    |   27      |   1.5             |
| XYZ   | IPad      |   48      |   1.7             |
+---------------------------------------------------+ 
```

注意：我遇到过许多类似的问题，但没有解决我的问题。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T16:56:50.530

这应该可行——只需使用 GROUP BY 和 MIN：

```
SELECT DISTINCT Pr.SKU, Pr.Title, Pr.Weight_GM, MIN(PO.Postal_Charges) as PO_Charges
FROM Products Pr
   JOIN Postage Po ON Pr.Weight_GM <= Po.Weight_GM
GROUP BY Pr.SKU, Pr.Title, Pr.Weight_GM 
```

还有[小提琴](http://sqlfiddle.com/#!2/1702fa/6)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T17:00:18.983

这应该这样做

```
;With WeightNumber AS
(
   SELECT Weight_GM, Postal_Charge, ROW_NUMBER() OVER (ORDER BY Weight_GM) AS Num 
   FROM Postage
)
WeightRange AS
(
   SELECT ISNULL(Prec.Weight_GM - 1, 0) AS START_WEIGHT, CurrentRow.Weight_GM AS END_WEIGHT, CurrentRow.Postal_Charge
   FROM WeightNumber CurrentRow
   LEFT JOIN WeightNumber Prec
      ON Prec.Num=CurrentRow.Num - 1
)
SELECT *
FROM Products p
JOIN WeightRange w 
   ON p.Weight_GM BETWEEN w.START_WEIGHT AND w.END_WEIGHT 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T16:49:43.450

您可以使用以下代码执行此操作 内部连接将使用键 Weight_GM 连接两个表

```
select a.SKU, b.Postal Charges from Products a 
inner join Postage b on a.Weight_GM = b.Weight_GM 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T17:43:50.100

试试这个：

```
select SKU,Title,prds.Weight_GM b,pst.Weight_GM a,Postal_charges
from Postage pst ,Products prds 
where prds.Weight_GM < pst.Weight_GM
group by prds.Weight_GM; 
```

这是演示：[演示链接](http://sqlfiddle.com/#!2/9ff27/8/0)

# javascript - OpenLayers.Class 与 OpenLayers.Control.GetFeature

> ID：14609174
> 
> 赞同：0
> 
> 时间：2013-01-30T16:44:15.157
> 
> 标签：javascript, class, openlayers

我想知道是否有人可以指出我正确的方向来强制 OpenLayers.Control.GetFeature 的 BBOX 始终处于长/纬度坐标中。我正在尝试使用 OpenLayers.Class 来实现这一点，因此新控件将继承 OpenLayers.Control.GetFeature，只需在 BBOX 中进行少量修改。这就是我所做的：

```
OpenLayers.Control.myGetFeature = OpenLayers.Class(OpenLayers.Control.GetFeature,{
        selectBox: function(position){
            var opts = OpenLayers.Control.GetFeature(position);
            var baseSRSutm = this.map.getprojectionObject();
            var layerSRSdd = new OpenLayers.Projection('EPSG:4326');
            opts.params.bbox = this.map.getExtent().transform(baseSRSutm,layerSRSdd).toBBOX(null,firstLayer.reverseAxisOrder());
        }
        return opts;
    }); 
```

但我知道有些“}”不见了。这是使用 OpenLayers.Class 做我想做的事情的正确方法吗？

任何帮助深表感谢。

PS。我正在使用 OpenLayers 2.11

**编辑：**

移动“返回选项”；函数内部解决了上述问题，但它抱怨缺少 CLASS_NAME。补充一点，它仍然抱怨同样的问题，但是经过几次点击或框后它发送了请求，但是发送的 bbox 仍然在 UTM 中，问题可能出在哪里？这是代码：

```
var mycontrol = function(){
        var protocol = new OpenLayers.Protocol.HTTP({
            url: 'http://www.....',
            format: new OpenLayers.Format.GeoJSON({
                ignoreExtraDims: true,
                'internalProjection': new OpenLayers.Projection('EPSG:900913'),
                'externalProjection': new OpenLayers.Projection('EPSG:4326')
            })
        });

        OpenLayers.Control.myGetFeature = OpenLayers.Class(OpenLayers.Control.GetFeature,{
            selectBox: function(position){
                var opts = OpenLayers.Control.GetFeature(position);
                var baseSRSutm = this.map.getprojectionObject();
    console.log('this is the baseSRSutm' + baseSRSutm); // doesnt appear in firebug
                var layerSRSdd = new OpenLayers.Projection('EPSG:4326');
                opts.params.bbox = this.map.getExtent().transform(baseSRSutm,layerSRSdd).toBBOX(null,firstLayer.reverseAxisOrder());
    console.log('this is the opts.params.bbox' + opts.params.bbox); // doesnt appear in firebug
                return opts;
            },
            CLASS_NAME: "OpenLayers.Control.myGetFeature"
        });

      return new OpenLayers.Control.myGetFeature({
            protocol: protocol,
            box: true,
            click: true,
            single: false,
            clickTolerance: 10,
            eventListeners:{
                // some stuff
            }
        });
    }; 
```

因为console.log没有出现在firebug中，我认为问题出在OpenLayers.Control.myGetFeature和OpenLayers.Class中。在我看来，“selectBox”函数是我需要的，但子类本身并没有被返回读取。

请帮助解决这个问题，在此先感谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T18:01:43.363

您的代码示例有一些语法错误。将来尝试使用一些 javascript 代码 linter，如[jsHint](http://jshint.com/)来帮助调试这些错误。这是您的代码，已修复：

```
OpenLayers.Control.myGetFeature = OpenLayers.Class(OpenLayers.Control.GetFeature,{
    selectBox: function(position){
        var opts = OpenLayers.Control.GetFeature(position);
        var baseSRSutm = this.map.getprojectionObject();
        var layerSRSdd = new OpenLayers.Projection('EPSG:4326');
        opts.params.bbox = this.map.getExtent().transform(baseSRSutm,layerSRSdd).toBBOX(null,firstLayer.reverseAxisOrder());
        return opts;
    }
}); 
```

关于您关于自定义 GetFeature 的问题，我认为您走在正确的轨道上。这与我采取的方法相同。[OpenLayers 在他们的示例](http://openlayers.org/dev/examples/custom-control.html)中推荐了一种稍微不同的方法，但它执行相同的功能：

```
var control = new OpenLayers.Control.GetFeature();
OpenLayers.Util.extend(control, {
    selectBox: function(position){
        var opts = OpenLayers.Control.GetFeature(position);
        var baseSRSutm = this.map.getprojectionObject();
        var layerSRSdd = new OpenLayers.Projection('EPSG:4326');
        opts.params.bbox = this.map.getExtent().transform(baseSRSutm,layerSRSdd).toBBOX(null,firstLayer.reverseAxisOrder());
        return opts;
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T23:51:19.877

终于成功了，诀窍是使用原型和 selectBox，然后应用基础地图投影和 displayProjection 之间的转换，在这种情况下，在 900913 和 4326 之间。我在这里得到了这个想法：[http://osgeo-org.1560 .n6.nabble.com/Order-Priority-of-Control-GetFeature-and-Control-WMSGetFeatureInfo-on-click-td4997282.html](http://osgeo-org.1560.n6.nabble.com/Order-Priority-of-Control-GetFeature-and-Control-WMSGetFeatureInfo-on-click-td4997282.html)

# java - 读取文件行并存储不同类型的变量

> ID：14609175
> 
> 赞同：0
> 
> 时间：2013-01-30T16:44:25.043
> 
> 标签：java, parsing

我正在尝试找出一种从以下文本文件中读取的方法。我能够获得文本文件中的第一个整数，即 numLines。在那之后，我能够从该行中获取第一个整数，但无法成功获取每个单独的字母组。

```
for(int i=0; i < numLines; i++){
   numVariables = Integer.parseInt(fin.next());

    for(int z=0; z < numVariables; z++){
        String line = fin.next();

        int numRules = Integer.parseInt(line.substring(0, 1));

        //Everything up until this point is good

        //read and store first capital letter of every line
        String variable = line.substring(2,3);

        //read and store remaining capital letters that correspond to every line separately
    }
} 
```

文本文件

```
3
2 A CC DD
3 A AA z v
2 F f a 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:50:55.430

我没看到有什么问题。如果你说你有“解析”的问题，你可以尝试：

*   读一行 ( `String line`)

*   `split`它分为两部分。在这里检查： [http](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split(java.lang.String) ://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split(java.lang.String , int)

`array =line.split(" ", 2)`

然后

```
array[0] is the leading number
array[1] is the rest letters 
```

如果你想要每个部分，你可以`split (" ")`没有限制。

如果你只想得到那些大写的单词，你可以通过正则表达式来做到：

```
line.split(" ",2); //array[0] is the leading number 
```

应用于`"(?<= )[A-Z]+(?= )"`数组[1]，你会得到所有大写单词。

那是你要的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T16:51:10.777

```
String[] words = line.split(("\\s+"); // Any whitespace
int numRules = Integer.parseInt(words[0]);
for (int j = 1; j < words.length; ++j) {
   String variable = words[j];
} 
```

# bitbucket - 在 Bitbucket 中自动批准提交

> ID：14609178
> 
> 赞同：20
> 
> 时间：2013-01-30T16:44:49.050
> 
> 标签：bitbucket

我最近搬到了新的 Bitbucket 界面，我说的是我需要在推送后批准提交。

这是一个很好的功能，但它不方便我的工作流程。是否可以选择禁用它并自动批准提交？

编辑：我上传了批准按钮的图像。

![在此处输入图像描述](../Images/c789c68ab5234900bbe4f2c2142a0356.png)

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-01-30T17:00:25.517

“批准”不是必需的，它是一个额外的功能，可以知道谁审查了提交。来自 Bibucket 的博客[文章](http://blog.bitbucket.org/2012/11/27/innovation-week-launches-several-new-features/)：

> **开绿灯**
> 
> Bitbucket 有一个轻量级的批准流程，允许参与者批准提交或拉取请求——这表示用户已经查看了更改并且它是[LGTM](http://www.urbandictionary.com/define.php?term=LGTM)。
> 
> 稍后，当浏览提交或拉取请求列表时，Bitbucket 将特定更改的批准总数显示为灰色圆圈。
> 
> 灰色徽章显示有多少审阅者批准了特定更改 - 现在，对于您个人批准的提交或拉取请求，徽章现在为绿色，为您提供尚未审核的更改的快速摘要。

# python - 报告实验室包装器

> ID：14609182
> 
> 赞同：0
> 
> 时间：2013-01-30T16:45:03.157
> 
> 标签：python, django, reportlab

我正在寻找可以为我完成繁重工作的 Reportlab 包装器。我找到[了这个](https://github.com/matthiask/pdfdocument)，看起来很有希望。

处理 Reportlab 的低级 api（尤其是元素的定位等）对我来说看起来很麻烦，一个库至少应该为这部分提供便利。

我创建 .pdf 的代码目前是一个维护地狱，它由定位元素、注意哪些东西应该粘在一起以及处理不同长度的输入字符串的逻辑组成。

例如，在创建 pdf 发票时，我必须让用户能够调整两个段落之间的距离。目前，我从 UI 中获取此信息，然后根据输入重新计算段落 A 和 B 的位置。

除此之外，我还在寻找一个包装器来帮助我解决这个问题，如果有人能指出/提供一个关于如何处理元素定位、输入字符串长度变化等的最佳实践示例，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T20:40:53.470

备查：

测试了 lib [PDFDocument](https://github.com/matthiask/pdfdocument)，我只能推荐它。它消除了很多复杂性，提供了很多辅助函数，并有助于保持代码整洁。我发现[这个](https://github.com/matthiask/plata/blob/master/plata/reporting/order.py)资源对开始很有帮助。

# asp.net - 使用 PreviousPageType 在 asp.net 网络表单之间传递参数

> ID：14609185
> 
> 赞同：0
> 
> 时间：2013-01-30T16:45:13.907
> 
> 标签：asp.net

我正在尝试在源页面中的两个网页之间传递一些参数我具有以下属性

```
 private string _testString { get; set; }
    public string TestString
    {
        get
        {
            return _testString;
        }
    } 
```

在前面的 msdn 示例中，返回类型始终设置为 UI 元素 ( `textbox.text`) 但是我试图从动态生成的链接按钮传递值，这就是我选择使用私有访问器的原因

在源页面上链接按钮的单击事件中，我有以下内容：

```
 protected void RenderReportInNewPage(LinkButton lb)
    {
      _testString = lb.CommandArgument.ToString();
      Response.BufferOutput = true;
      Response.Redirect("~/stuff/testviewer.aspx");
   } 
```

在目标页面上，我在 aspx 中引用了源页面，如下所示：

```
<%@ PreviousPageType VirtualPath="~/stuff/testviewer.aspx"%> 
```

然后在目标页面的代码隐藏中，我有以下内容：

```
Textbox.Text = PreviousPage.TestString; 
```

PreviousPage 显示公共属性 TestString 但它始终为空（因为我认为它没有被设置但不知道为什么）

是否可以设置私有访问器（_teststring）并将该值反映在公共属性中？我很感激任何关于我做错了什么的建议。

-干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T17:49:11.333

发现错误。它不在属性的设置中，而是在我调用目标页面的方式中。为了将我需要的属性传递给用户`Server.Transfer`而不是`Response.Redirect`

```
 protected void RenderReportInNewPage(LinkButton lb)
    {
        _testString = lb.CommandArgument.ToString();
        Response.BufferOutput = true;
        Server.Transfer("~/ReportBuilder/viewer.aspx");
     } 
```

-干杯

# php - 使描述框变大

> ID：14609186
> 
> 赞同：0
> 
> 时间：2013-01-30T16:45:14.463
> 
> 标签：php, facebook, facebook-wall

我制作了一个 FB 应用程序，用 php sdk 在朋友墙上发帖

```
$facebook->api('/me/feed', 'post', array()) 
```

但是我的“描述”比盒子大一点，所以有人能告诉我如何让那个盒子变大吗？

[图片链接](http://screencast.com/t/iAdV8YuuFv)

![http://screencast.com/t/iAdV8YuuFv](../Images/6e260c2667b3cc2e0062dcb0c3e91b3b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:04:48.410

> 但是我的“描述”比盒子大一点，所以有人能告诉我如何让那个盒子变大吗？

你不能，因为 Facebook 通过 CSS 设置盒子客户端的高度。所有大于盒子高度允许的东西都可能会被加载，但会通过`overflow`.

不，你不能在这个地方操纵 Facebook 的样式表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T16:49:52.167

您应该查看与您正在使用的 facebook 应用程序相关的文档。

# c# - 实体框架表每个类型的继承 - 将继承的类型添加到数据库给出错误“无效的列名”

> ID：14609189
> 
> 赞同：2
> 
> 时间：2013-01-30T16:45:27.153
> 
> 标签：c#, asp.net-mvc, database, entity-framework

我已经有一段时间了，我真的无法弄清楚。我正在使用 EF5、Mvc 4、table-per-type 继承。

我有继承自 UserProfile 的租户和房东类。注册用户时选择他们想要的帐户类型，并根据此选择将他们在表单上输入的详细信息（用户名、名字、姓氏、电子邮件、帐户类型、密码）添加到 UserProfile 表中。然后，我希望将该表的 PK 作为外键添加到与他们选择的帐户类型（租户或房东）匹配的表中。

[我试图使用这种方法](https://stackoverflow.com/questions/14591181/adding-object-to-database-using-table-per-type-inheritance-in-mvc-4)来实现上述目的，但这导致了该问题中描述的问题。

我现在创建了一个 RegisterTenantModel 类，其属性映射到租户，并且我将 RegisterTenantModel 类型的对象传递给 AccountController/Register，如下所示......

```
// ...
if (tenantModel.AccountType == AccountType.Tenant)
                {
                    using (var db = new LetLordContext())
                    {
                        var t = db.UserProfile.Create<Tenant>();

                        WebSecurity.CreateUserAndAccount(tenantModel.UserName, tenantModel.Password,
                             t = new Tenant
                            {
                               AccountType = tenantModel.AccountType,
                               DateWantToRentFrom = DateTime.Now, 
                               DateWantToRentTo = DateTime.Now, 
                               DesiredPropertyLocation = "",
                               Email = tenantModel.Email, 
                               FirstName = tenantModel.FirstName,
                               UserId = WebSecurity.CurrentUserId, 
                               UserName = WebSecurity.CurrentUserName

                               // More properties that map to Tenant entity
                               // ...
                            },
                            false);

                        db.SaveChanges(); 
```

...但是现在我`Invalid column name`在`t= new Tenant`.

有没有人不得不做类似的事情？我以正确的方式接近这个吗？帮助将不胜感激。

**编辑**

根据 Antonio Simunovic 在下面发布的内容，我想我已经意识到问题所在了。我`WebSecurity.InitializeDatabaseConnection()`的是这样的...

```
WebSecurity.InitializeDatabaseConnection("LetLordContext", "UserProfile", 
"UserId", "UserName", autoCreateTables: true); 
```

...所以当我调用它时`Websecurity.CreatUserAndAccount()`，`AccountController/Register`它会根据`WebSecurity.InitializeDatabaseConnection()`. 查看上面链接的问题，您会看到，根据表单上选择的帐户类型，租户或房东将通过调用...添加到 UserProfile 表中。

```
var tenant = db.UserProfile.Create<Tenant>();
//...
db.UserProfile.Add(tenant);
db.SaveChanges(); 
```

...导致将重复条目添加到 UserProfile 表中。

*我认为*解决方案是创建一个新表并指向`WebSecurity.InitializeDatabaseConnection()`它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T19:44:44.893

您的 WebSecurity.InitializeDatabaseConnection() 方法调用是什么样的？该调用标识数据库表以存储用户数据。

WebSecurity.CreateUserAndAccount() 方法不使用上下文来存储提供的数据，它只是将第三个调用参数的对象属性名称映射到 InitializeDatabaseFile() 方法中定义的表中的列。

如果您不熟悉 SimpleMembership 机制，请查看这篇文章： [http ://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the -new-asp-net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx](http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-25T17:09:10.927

我看到了完全相同的症状，这是因为我没有将基类声明`DbSet<BaseClassName>`为`DbContext`.

（违反直觉，我从不需要在我的应用程序中引用基类实体的集合，但你去吧。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T16:56:22.483

当我忘记用 TPT 中的表名注释子类时，我看到了这个错误。

```
[Table("Tenant")]
public class Tenant : UserProfile { ... 
```

可以这么简单吗？

**编辑**

快速搜索还建议将实体中的字段配对并一次将它们添加回来，以查看是否应归咎于单个字段（它将提供指示许多失败列的错误消息）。这对我来说听起来有点可疑，但可能值得一试：

[实体框架 5 无效的列名错误](https://stackoverflow.com/questions/10518353/entity-framework-5-invalid-column-name-error)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-17T05:53:28.007

### 解决方案

1.  确保**所有**派生类都**显式**映射到表。两种简单的方法是：
    1.  `TableAttribute`类属性：`[Table("Tenant")]`
    2.  `ToTable`流利的API方法：`ToTable("Tenant")`
2.  确保基本类型是`abstract`.
3.  确保您**没有为****任何**表调用`MapInheritedProperties`配置方法。该方法意味着 TPC。
***   确保**将基本类型**注册为模型的一部分。两种简单的方法是：

    1.  将访问器属性添加到您的子类`DbContext`：

        ```
        public DbSet<UserProfile> Users { get; set; } 
        ```

    2.  `OnModelCreating`在您的子类中覆盖`DbContext`并调用[`DbModelBuilder.Entity`](http://msdn.microsoft.com/en-us/library/gg696542.aspx)：

        ```
        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            base.OnModelCreating(modelBuilder);
            modelBuilder.Entity<UserProfile>();
        } 
        ```** 

 **### 解释

如错误消息所示，Entity Framework 似乎正在“派生”表中查找“基”表的列。这表明它正在尝试使用“每个具体类型的表”（TPC）继承而不是“每个类型的表”（TPT）。

使 Entity Framework 使用 TPT 是相当繁琐的。如果您**非常仔细地**研究了[*使用 EF 代码优先继承：第 2 部分 – 每个类型的表 (TPT)*](http://weblogs.asp.net/manavi/archive/2010/12/28/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part-2-table-per-type-tpt.aspx#TPTImplementation)[中的示例实现](http://weblogs.asp.net/manavi/archive/2010/12/28/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part-2-table-per-type-tpt.aspx#TPTImplementation)*，您可能会发现您遗漏了什么。[后续文章*Inheritance with EF Code First: Part 3 – Table per Concrete Type (TPC)*](http://weblogs.asp.net/manavi/archive/2011/01/03/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part-3-table-per-concrete-type-tpc-and-choosing-strategy-guidelines.aspx)总结了所需的配置如下：*

 *> 如您目前所见，我们使用它的 Requires 方法来自定义 TPH。我们还使用它的`ToTable`方法来创建 TPT，现在我们正在使用它的`MapInheritedProperties`with`ToTable`方法来创建我们的 TPC 映射。

我的实验表明，上面的总结过于简单化了。看起来，一个看似无关的配置差异可能会导致使用意外的继承策略。***

# android - Android - 仅在线程完成时运行线程并获取变量值

> ID：14609191
> 
> 赞同：0
> 
> 时间：2013-01-30T16:45:40.477
> 
> 标签：android, multithreading

当线程完成时，我需要获取一个变量值：

1）类你好：运行一个线程X；

2) 线程 X 会做一些事情并设置一个变量 J 一些值

3)Class hello：线程X结束后获取变量J值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T17:06:34.317

您现有的步骤“3)”应分为两个步骤：

3）类你好：加入线程X

4）类hello：获取变量J

请参阅[http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.html#join()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.html#join())

# ruby-on-rails - 为什么在重定向到路由时，rails 重定向工作，而在重定向到操作时不工作？

> ID：14609194
> 
> 赞同：0
> 
> 时间：2013-01-30T16:45:48.563
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, rails-routing, controllers

几个星期以来，我一直在为 rails 双重渲染错误而苦苦挣扎（在此操作中多次调用了渲染和/或重定向。请注意，您只能调用渲染或重定向，并且在 mos ....etc... ）。

我发现如果我有这样的声明：

```
redirect_to action_name and return 
```

我得到双重渲染错误。但是，当我指定一个名为 action_name_path 的路由时，并执行如下语句：

```
redirect_to action_name_path 
```

我不再收到双重渲染错误。这是为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T17:08:56.710

redirect_to 应该用于转到另一个控制器或外部网页并自动返回一些东西......

使用 redirect_to 时，您需要指定要呈现的控制器和操作。您可以通过调用路由 (action_name_path(:params[])) 来做到这一点。

当您想在同一个控制器中调用其他方法或渲染不同的视图时，您不需要渲染控制器，而不是 redirect_to 您可以使用渲染方法。

请参阅文档

*   [重定向到](http://api.rubyonrails.org/classes/ActionController/Redirecting.html)
*   [使成为](http://guides.rubyonrails.org/layouts_and_rendering.html#rendering-by-default-convention-over-configuration-in-action)

# image - 在 div 内滚动的整页背景图像

> ID：14609201
> 
> 赞同：0
> 
> 时间：2013-01-30T16:46:11.097
> 
> 标签：image, html, css, background

我希望为电视制作一个“10 英尺”可用的网站。理想情况下，它将有一个全屏背景图像，一个小标题，导航将被放置在其中，并在其下方有一个内容容器。我希望容器本身有一个滚动条，与浏览器有滚动条相反，因为这会丢失我的顶部标题。

基本上顶部标题应该是固定的，一个背景图像和一个在自身内部滚动的容器。我曾尝试为此在线查找模板或起点，但结果非常差。到目前为止我发现的最好的是[http://css-tricks.com/examples/FullPageBackgroundImage/progressive.php](http://css-tricks.com/examples/FullPageBackgroundImage/progressive.php)

这几乎是我需要的，除了容器溢出屏幕所以滚动条在浏览器中。另外这篇文章是在 2010 年写的，也许现在有更好的方法来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:54:41.647

您可以使用 CSS 来设置 div 的样式。

```
div.scroll {
   background-color:#00FFFF;
   width:100px;
   height:100px;
   overflow-y:scroll;
} 
```

然后......您所要做的就是根据需要定位该 div 。

# jquery - 带有自动下一步的 jQuery 手风琴

> ID：14609205
> 
> 赞同：0
> 
> 时间：2013-01-30T16:46:27.693
> 
> 标签：jquery, accordion

我有一个可以很好地点击的手风琴，但我需要它在 3 秒后也可以通过下一张幻灯片。我在[这里](https://stackoverflow.com/questions/2777133/how-to-add-auto-rotation-to-a-jquery-horizontal-accordion)搜索并找到了一个想法，但似乎无法使其与实际的点击对应物协同工作。任何想法都非常感谢！

```
/* Part 1 -> Set first to active */
jQuery("#accordionBackground .theSlide:first").addClass('active');
/* Part 2 -> Auto change */
$theNextSlide = jQuery(this).next('.theSlide');
    if($theNextSlide.length==0){$theNextSlide=jQuery('.theSlide:first');}
     $next.find('.theSlide').triggerHandler('click');
},3000);
/* Part 3 -> Manual change */
jQuery("#accordionBackground .theSlide").click(function(){
    jQuery("#accordionBackground .theSlide").not(this).animate({width: "35px"}, {duration:'fast', queue:false});
    jQuery("#accordionBackground .theSlide").not(this).removeClass('active');
    jQuery(this).addClass('active');

    jQuery(this).next('.theSlide').addClass('nextSlide');
    jQuery(this).animate({width: "588px"}, {duration:'fast', queue:false});

}); 
```

谢谢，丹

## 编辑

进一步尝试，但仍然没有运气！->

```
jQuery(document).ready(function(){
    setTimeout('accordionAutoNext()',3000);
});

function autoNext(){
    $theNextSlide = jQuery(this).next();
    if($theNextSlide.length==0){$theNextSlide=jQuery('.theSlide:first');}
     $next.find('.theSlide').triggerHandler('click');
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:54:08.553

找到了！

```
/* Part 1 -> Set first to active */
jQuery("#accordionBackground .theSlide:first").addClass('active');
/* Part 2 -> Manual change */
jQuery("#accordionBackground .theSlide").click(function(){
    jQuery("#accordionBackground .theSlide").not(this).animate({width: "35px"}, {duration:'fast', queue:false});
    jQuery("#accordionBackground .theSlide").not(this).removeClass('active');
    jQuery(this).addClass('active');

    jQuery(this).next('.theSlide').addClass('nextSlide');
    jQuery(this).animate({width: "588px"}, {duration:'fast', queue:false});
});
/* Part 3 -> Auto change */
var nextAccordion = function(){
    $theNextSlide = jQuery('.theSlide.active').next('.theSlide');
    if($theNextSlide.length==0){$theNextSlide=jQuery('.theSlide:first');}
     $theNextSlide.trigger('click');
};
setInterval(nextAccordion,6000);
/*End accordion */ 
```

# http - Chrome 拒绝缓存本地主机

> ID：14609207
> 
> 赞同：4
> 
> 时间：2013-01-30T16:46:33.120
> 
> 标签：http, google-chrome, caching, http-caching

我正在编写一个服务器，它检测`If-Modified-Since`标头值并根据需要进行响应`304`。[问题是，如果不求助于Rest Console](https://chrome.google.com/webstore/detail/rest-console/cokgbflfommojglbmbpenpphppikmonn?utm_source=chrome-ntp-icon)`If-Modified-Since`之类的东西，我无法让 Chrome 发送标头，但我想测试真实世界的条件，而不是根据我的喜好构建的请求。

我正在向`http://localhost:3000/style.css`Chrome 请求。服务器响应`Expires`和`Last-Modified`标头，如下所示：

![请求和响应标头。](../Images/8c66a3ac99d663116d53641669302d44.png)

当我再次请求时，我总是得到与和相同的值的响应`200 OK`（我故意发送相同的值）。Chrome 从不发送带有标头的请求。我可以使用 Rest Console 从我的服务器获取响应，但我需要知道如何让 Chrome自行发送。我试过但没有用。是的，我已经检查过开发人员工具中没有禁用缓存：`Expires``Last-Modified``If-Modified-Since``304 Not Modified``If-Modified-Since``Cahce-Control: max-age=...`

![缓存已启用。](../Images/cc57a72788e0c0c8a814af8018374d51.png)

至此，我希望问题很明显：为什么 Chrome 不发送`If-Modified-Since`标头？作为一个额外的问题：我还应该检查服务器端以确定是否适合响应`304 Not Modified`？

# java - 蓝牙服务器传入缓冲区处理

> ID：14609211
> 
> 赞同：0
> 
> 时间：2013-01-30T16:46:43.967
> 
> 标签：java, string, sockets, bluetooth, buffer

我有以下蓝牙服务器类，它扩展了 a`Thread`以侦听传入流：

```
class SeverThread extends Thread{
    bytes[] inBuffer = new bytes[1024];
    int bytes; 
    while(true){ 
        try{
            bytes = inputStream.read(inBuffer);
        }catch(IOException e){
                    // handle exception 
        }
        System.out.println(new String(inBuffer));
    }
} 
```

**这个实现的问题：**

当客户端第一次发送`"Sanjeev"`时，输出是`"Sanjeev"`. 凉爽的。之后，客户端发送`smk`，现在的输出是`smkjeev`。请注意，前 3 个字母 - `san`- 已变为`smk`。现在当客户端发送时`hell`，输出是`helleev`. 如果客户端再次发送，`"Sanjeev"`则输出为`"Sanjeev"`，因为接收到的字符串的长度与缓冲区内的已用空间相同。

这是基于上述代码的预期行为。但这是一个意想不到的错误。我希望输出`Sanjeev`分别为`smk`和`hello`。问题很明显。内存中的同一个缓冲区被用来接收所有传入的单词。

对于如何解决这个问题，有任何的建议吗？可能的方法：

1.  清除或刷新内部每个循环的缓冲区`while(true)`。我不知道该怎么做。
2.  移动循环`inBuffer` *内*的声明。`while`但是这样会不断的分配内存，浪费很大。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:18:54.790

这个怎么样 ？

```
bytes = inputStream.read(inBuffer);
inBuffer[bytes] = '\0'; 
```

# spring-mvc - REST @RequestMapping 上的 404

> ID：14609214
> 
> 赞同：0
> 
> 时间：2013-01-30T16:46:51.127
> 
> 标签：spring-mvc

我试图弄清楚为什么我在这里收到 404 错误，但我就是看不到它。

这是我的 web.xml：

```
<servlet>
    <servlet-name>ep</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>ep</servlet-name>
    <url-pattern>/ep/*</url-pattern>
</servlet-mapping> 
```

这是我的 ep-servlet.xml（只有“beans”标签围绕以下代码）：

```
<mvc:annotation-driven />

<context:component-scan base-package="server.service2">
</context:component-scan> 
```

这是课程本身：

```
package server.service2;
....

@Controller
@RequestMapping("/user")
public class LoginService
{
    @RequestMapping(value = "/check/{username}", method = RequestMethod.GET)
    public void checkUsername(@PathVariable("username") String username)
    {
    }
} 
```

我用浏览器访问的网址是：

```
http://<server>:<correct-port>/ep/user/check/username 
```

它返回一个 404！谁能发现我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T05:09:42.617

嗨@Amorgos，您可以将文件订购到下一个：

web.xml

```
<servlet>
  <servlet-name>ep</servlet-name>
  <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
  <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
  <servlet-name>ep</servlet-name>
  <url-pattern>/</url-pattern>
</servlet-mapping>

<!-- Add Support for Spring -->
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
<listener>
    <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
</listener>
<listener>
    <listener-class>org.springframework.security.web.session.HttpSessionEventPublisher</listener-class>
</listener> 
```

ep-servlet.xml

```
<context:annotation-config />

<context:component-scan base-package="server.service2" />

<beans:bean class="org.springframework.web.servlet.mvc.support.ControllerClassNameHandlerMapping" />

<!-- Register the bean -->
<beans:bean class="server.service2.LoginService" /> 
```

**我希望这些有帮助:)**

# mysql - rails如何创建带有id的记录

> ID：14609220
> 
> 赞同：0
> 
> 时间：2013-01-30T16:47:01.453
> 
> 标签：mysql, ruby-on-rails-3, migration

我正在使用 rails v3.0.9 和 Mysql 数据库。

我正在使用现有数据迁移表。

我有用户表，所有其他表都包含 user_id 列，现在我需要将用户分成两个（用户和客户）表，

所以我需要使用现有用户记录迁移新客户表，其中用户键入客户

我需要创建一个客户表并将用户类型为客户的用户记录的 id 设置为客户，这将很容易而不是通过检查每个记录与用户的用户类型来迁移许多其他表（**仅供客户使用**）并分配客户表的新 ID。

表格看起来像

用户表：

```
 id  |       name    |   ...
   ------------------------------
    1   |       aaa     |   ...
    2   |       bbb     |   ...
    4   |       ddd     |   ...
    6   |       fff     |   ... 
```

客户表

```
 id  |       name    |   ...
   -------------------------------
    3   |       ccc     |   ...
    5   |       eee     |   ...
    7   |       ggg     |   ... 
```

当我迁移用户现有数据时

在我的迁移文件中

```
def up
  create_table(:customers) do |t|
    t.string :name
  end

  User.joins(:user_type).where(:user_type => {:type_name => 'customer'}).find_in_batches(:batch_size => 100){ |users|
     users.each {|user|
          customer = Customer.new
          customer.id = user.id
          customer.name = user.name
          customer.save(:validate => false)
     }
   }
end 
```

也试过

```
Customer.create!(:id => user.id) instead of save method 
```

它是否正确？

有什么方法可以分配主 id 吗？

如果我错了，请给我一些建议以正确的方式做...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T07:11:07.970

Mysql 允许插入具有主 id 列值的记录。在 Rails 中，您可以通过提供执行方法来执行任何 sql 查询

例如：

```
sql = "insert into users(id, username) values(10, 'iam')"
ActiveRecord::Base.connection.execute(sql) 
```

# php - 计算 MySQL 数据库中今天日期和日期之间的剩余时间

> ID：14609221
> 
> 赞同：-1
> 
> 时间：2013-01-30T16:47:04.547
> 
> 标签：php, mysql, automation, sql-update

我正在为一个非常小的 CMS 使用 PHP 和 MySQL。

功能要求之一是系统返回续订日期前的剩余天数（例如从现在到数据库中的续订字段还剩多少天）

我打算采取的过程是每天早上@3AM，检查所有记录（通过 PHP）并更新必填字段。诀窍是，如果这个数字小于 30（天），那么发送电子邮件给 ....who ever。

这似乎非常不切实际，因为它会在一个循环中可能对数据库过于紧张。

如果我可以让数据库进行此计算，那就更好了（不确定如何）。

然而

无论如何，我仍然必须遍历所有记录，以查看是否有 <30 天前续订（发送电子邮件）。

如果有人有更好的建议，我将不胜感激。下面是一些我想做的presudo代码

```
$q = "SELECT * FROM testDB ";
$r = mysql_query($q);

while ( $a = mysql_fetch_assoc($r) ) {

$rnlDate= stripslashes($a['renewal_Date']); //get Date inserted in table

$thisId= stripslashes($a['id']); // current record id

$timeLeft=$rnlDate-date(); // get time left

if($timeLeft <=30)
{
$makeEmail= createEmail(field_ID); // not sure how to wait until this function completes
}

doUpdate($timeLeft);

function doUpdate($timeLeft)
{
"UPDATE INTO testDB WHERE 'id' =$thisId; VALUES('','$timeLeft',)";
} 
```

显然只是在这里传递这个想法，但非常欢迎任何其他解决方案。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:49:15.540

您可以使用[TIMESTAMPDIFF()](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_timestampdiff)函数在 MySQL 中执行此操作，例如

```
SELECT TIMESTAMPDIFF(DAY,NOW(),column_name) AS diff
FROM table
WHERE id = 'whatever'; 
```

这将为您提供剩余的天数，插入变量 $days。然后

```
if(($days > 0) && ($days <30)) {
    // do something
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T16:49:28.313

在您的查询中执行此操作。这要容易得多：

```
$q = "SELECT * 
      FROM testDB 
      WHERE renewal_Date < CURRENT_TIMESTAMP - INTERVAL 30 DAY"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T16:51:06.117

带斜杠？你真的真的真的需要升级你的 php 版本。默认情况下，magic_quotes 已被禁用很长时间，启用它表示服务器配置严重错误，和/或 PHP 安装严重过时。

话虽如此，除非您处理数十亿行，否则您的查询不会“繁重”或“糟糕”...

```
SELECT ...
FROM ...
WHERE renewal_date  > (CURDATE() - INTERVAL 30 DAY) AND (renewal_date < CURDATE() ) 
```

应该获取更新日期在过去 30 天内的所有记录。

# ios - 判断 UIImageView 是否已经旋转

> ID：14609223
> 
> 赞同：9
> 
> 时间：2013-01-30T16:47:08.290
> 
> 标签：ios, objective-c

我以这种方式旋转 UIImageView：

```
-(IBAction)rotateImageView:(id)sender{
photoView.transform = CGAffineTransformRotate(photoView.transform, M_PI);
} 
```

如您所见，图像可以向上或向下。是否有可能检测图像是向上还是向下，以便执行以下操作：

```
if(image is up).... 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-30T20:30:10.887

如果您只想判断图像是否已使用仿射变换旋转，正如您的问题所暗示的那样，您可以这样做：

```
if (CGAffineTransformIsIdentity(photoView.transform)) { 
    // not rotated
    ...
} else {
    // rotated
    ...
} 
```

如果要检查特定旋转，请执行以下操作：

```
CGAffineTransform t = CGAffineTransformMakeRotation(M_PI);
if (CGAffineTransformEqualToTransform(photoView.transform, t)) {
    // rotated by M_PI
    ...
} 
```

请注意，上述两种解决方案仅在您没有将其他仿射变换与旋转变换同时应用于视图的情况下才有效。如果您还应用其他变换，也许您最好只跟踪变量中的旋转状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-29T05:39:46.553

您可以检查 的角度`photoView`，如果它是 0.00 表示它向上，如果它是 3 或 3.13 或任何接近它的值，那么它表明它向下。（您可以记录下的确切值）。

`CGFloat angle = [(NSNumber *)[photoView valueForKeyPath:@"layer.transform.rotation.z"] floatValue]; NSLog(@"%f", angle);`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-06-06T07:09:38.330

**斯威夫特 4**

```
if transform.isIdentity { } 
```

# c# - 如何替换字符串中的未知字符？通配符？

> ID：14609226
> 
> 赞同：1
> 
> 时间：2013-01-30T16:47:18.400
> 
> 标签：c#, regex, string, replace

我有一个字符串..让我们说：

```
string MyString = "SELECT Stuff FROM Table WHERE Code = "Foo" AND DATE=20120101"; 
```

我想`20120101`用`?`. 但是，`20120101`我搜索的字符串并不总是相同的。它总是以 a 开头`2`，并且总是包含 8 个字符。可能是 20121225、20130510 等。

我可以以某种方式使用通配符吗？如：

```
string Fixed = MyString.Replace("2*******", "?"); 
```

我正在寻找的是这个结果：

```
MyString = "SELECT Stuff FROM Table WHERE Code = "Foo" AND DATE=?"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T16:50:46.723

您可以使用正则表达式：

```
Regex.Replace(input,@"DATE=""\d*""", "?"); 
```

但是，如果这是一个 SQL 查询，最好使用参数化查询来避免 SQL 注入攻击等。这是做这些事情的行业标准方式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T17:19:23.483

```
string Fixed = Regex.Replace( MyString, @"DATE=2\d{7}", "DATE=?" ); 
```

或者，使用积极的后视

```
 Replace( MyString, @"(?<=DATE=)2\d{7}", "?" ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T16:55:47.977

您可以使用正则表达式替换方法：

```
 string oldstring = "20120101";
    string newstring = Regex.Replace(oldstring, @"^2[0-9]{7}", "?"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T17:07:15.907

这就是你要找的吗？

`string MyString = "SELECT Stuff FROM Table WHERE Code = {0} AND DATE={1}";`

这将允许您在 {0} 和 {1} 中使用与您想要的任何内容相同的字符串，例如：

`String.Format(MyString, codeString, dateString);`

您可以使用您想要的任何参数重用查询字符串。

# video - 使用 ffmpeg 设置从图像创建的视频的帧速率（放慢速度）

> ID：14609227
> 
> 赞同：0
> 
> 时间：2013-01-30T16:47:20.613
> 
> 标签：video, ffmpeg

我正在使用 ffmpeg 和多个图像使用以下命令制作视频：

```
ffmpeg -f image2 -i img%d.png v.mpg 
```

视频制作完成，但播放速度非常快。我可以放慢一点吗？（几乎双倍持续时间）如果可能的话，请在创建本身时设置速度。

我还需要在正在制作的视频中添加音频“a.wav”，可能在同一个命令中。那可能吗？

请给我命令 谢谢

当我使用这个命令时，下面是我得到的错误：

```
ffmpeg -r 12 -i pic\s%d.png -i rmt.wav -shortest -r 25 v.mpg

FFmpeg version SVN-r16573, Copyright (c) 2000-2009 Fabrice Bellard, et al.
configuration: --extra-cflags=-fno-common --enable-memalign-hack --enable-pthreads --enable-libmp3lame --enable-libxvid --enable-libvorbis --enable-libtheora --enable-libspeex --enable-libfaac --enable-libgsm --enable-libx264 --enable-libschroedinger --enable-avisynth --enable-swscale --enable-gpl
libavutil     49.12\. 0 / 49.12\. 0
libavcodec    52.10\. 0 / 52.10\. 0
libavformat   52.23\. 1 / 52.23\. 1
libavdevice   52\. 1\. 0 / 52\. 1\. 0
libswscale     0\. 6\. 1 /  0\. 6\. 1
built on Jan 13 2009 02:57:09, gcc: 4.2.4
Input #0, image2, from 'pic\s%d.png':
Duration: 00:03:53.00, start: 0.000000, bitrate: N/A
Stream #0.0: Video: png, rgb24, 1366x768, 12.00 tb(r)
Input #1, wav, from 'rmt.wav':
Duration: 00:12:16.19, bitrate: 64 kb/s
Stream #1.0: Audio: pcm_u8, 8000 Hz, mono, s16, 64 kb/s
Stream #0.0: Video: mpeg1video, yuv420p, 1366x768, q=2-31, 200 kb/s, 25.00 tb(c)
Stream #0.1: Audio: mp2, 8000 Hz, mono, s16, 64 kb/s
Stream mapping:
Stream #0.0 -> #0.0
Stream #1.0 -> #0.1
[mp2 @ 0x1738390]Sampling rate 8000 is not allowed in mp2
Error while opening codec for output stream #0.1 - maybe incorrect parameters such as bit_rate, rate, width or height 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T17:50:23.533

如果您未声明输入帧速率，则将默认帧速率 25 应用于输入图像。您可以使用`-framerate`作为输入选项来设置帧速率，例如：

```
ffmpeg -framerate 30 -i img%d.png v.mpg 
```

输出将继承相同的帧速率。您也可以分别为输入和输出设置帧速率，但 ffmpeg 将简单地复制或复制帧以补偿差异。这样做的一个原因是 MPEG1/2 不支持任意帧速率。

此示例将使用 12 的输入帧速率，约为默认 25 的一半，并以 25 输出。ffmpeg 将复制帧以达到 25：

```
ffmpeg -framerate 12 -i img%d.png -r 25 v.mpg 
```

可以使用 来控制视频质量`-qscale:v`，对于 mpeg* 视频，它是 1-31 的线性比例，其中 1 是最高质量，或者`-b:v`采用以比特为单位的比特率值。

您还可以添加音频文件：

```
ffmpeg -framerate 12 -i img%d.png -i audio.wav -shortest -r 25 v.mpg 
```

默认情况下，`mp2`将为此输出格式选择音频编码器。使用`-shortest`将导致输出持续时间与最短输入持续时间相同。

# ajax - 使用 AJAX 和 jQuery 将多个 POST 请求链接在一起

> ID：14609229
> 
> 赞同：1
> 
> 时间：2013-01-30T16:47:26.510
> 
> 标签：ajax, jquery

我收到了一个来自先前问题的建议，我需要一起修改我的代码**链**一系列 POST 请求，但我不知道如何完成此操作。具体来说，我得到的建议是：

> 触发一个帖子，让其成功处理程序触发下一个帖子，等等......然后当所有帖子完成后，最后一个帖子的成功处理程序触发 get

这个策略对我来说很有意义，但我不知道如何实施。我试图在所有对 POST 的调用完成之前阻止对 GET 的调用。目前，我已经实现`$.when.apply`了延迟 GET 的发送。这是代码：

```
function(){ 
$.when.apply(undefined, InsertTheAPPs()).done(function () {
$.ajax({
url: sURL + "fileappeal/send_apps_email",
success: function() {  
    var m = $.msg("my message",
    {header:'my header', live:10000});
    setTimeout(function(){
        if(m)m.setBody('...my other message.');             
    },3000);
    setTimeout(function(){
        if(m)m.close(function(){
              window.location.replace(sURL+'client/view');
        });
    },6000);
    $('#ajaxShield').fadeOut(1000);},
error: function(){
    $.msg("error message",
    {header:'error header', live:10000});
    }
}); 
}); 
} 
```

这是 jQuery $.each 循环的代码。这是不仅需要开始，而且必须在上面对 fileappeal/send_apps_email 的 ajax 调用之前结束的代码：

```
function InsertTheAPPs(){
$('input[name=c_maybe].c_box').each(function(){         
    var jqxhrs = [];
    if($(this).prop('checked')){ 
        var rn = $(this).prop('value'); 
        jqxhrs.push(
            $.ajax({
            url: sURL + 'fileappeal/insert_app',
            type:"POST",
            dataType: 'text',
            data: {'rn': rn},
            error: function(data) {console.log('Error:'+rn+'_'+data);}
            })
        )
    return jqxhrs;
    } 
}); 
} 
```

有人可以演示我如何修改上面的代码以实现将多个 POST 调用链接在一起的策略吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T16:51:46.873

不要从`.each`. 它不是那样工作的。而是这样做：

```
var jqxhrs = [];
$(...).each(...
});
return jqxhrs; 
```

的返回值没有分配任何内容`.each`，无论如何您都无法获得。从每个返回允许它像中断/继续一样使用，这在您的上下文中没有意义。

此外，`var jqxhrs`每个循环的内部会导致在循环的每次迭代中在该上下文中声明一个新变量。

# sql-server - 在 T-SQL 查询中计算年龄

> ID：14609230
> 
> 赞同：1
> 
> 时间：2013-01-30T16:47:27.413
> 
> 标签：sql-server, database, tsql

我知道有人问过这个问题，但我发现以下代码似乎工作正常，只是想让这里的所有专业人士快速查看一下。

我在银行工作，需要它 100% 的工作，我注意到很多查询有时可能是不正确的。也是`N.NameBirthdate`我从数据库中提取的列。

先感谢您。

```
SELECT 
   CASE 
      WHEN (MONTH(GETDATE()) * 100) + DAY(GETDATE()) >= (MONTH(N.NameBirthdate) * 100) +  DAY(N.NameBirthdate) 
      THEN DATEDIFF(Year, N.NameBirthdate, GETDATE()) 
      ELSE DATEDIFF(Year, N.NameBirthdate, GETDATE())-1 
   END AS 'Age', 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T16:55:59.503

好吧，我不确定这是否会 100% 有效，但您是否愿意接受其他查询想法？我总是用这个：

```
SELECT FLOOR(DATEDIFF(d, N.NameBirthDate, GETDATE()) / 365.25) AS Age 
```

如果我需要计算年龄。365.25 允许闰年。

但是，如果此人没有经历过闰年并且取决于运行查询的时间，您可能会遇到轻微的不准确。看到[这个](http://www.wiseowl.co.uk/blog/s216/calculating_age_in_sql_server.htm)了解更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-30T16:59:50.583

我知道这很旧，但我一直在寻找一种快速正确计算某人年龄的方法，但我找不到任何东西。这些答案工作正常，但我不想要任何案例陈述，我希望它完全准确，所以我开发了这个：

```
SELECT DATEPART(YY,GETDATE()-COALESCE(DOB,GETDATE()))-DATEPART(YY,0) 
```

前任。

```
DATEPART(YY,GETDATE()-COALESCE(DOB,GETDATE())) 
```

日期部分（YY，'07-30-2014' - '10-03-2000'）= 1913...

1913 - 日期（年，0）...

1913 - 1900 = 13

我更喜欢这种方法，因为如果 DOB 为空，那么您将得到 0，并且无论日期系统是什么，减法`DATEPART(YY,0)`都可以解决。因此，如果日期系统是 1904 年，则不是 1913，而是 1917 - 1904 = 13（我知道 excel 有这个，DBs 吗？？？ IDK；IDC）而且，它只有 61 个字符。如果您的数据库允许空集，那么您可以`NULLIF`像这样使用：

```
SELECT DATEPART(YY,GETDATE()-COALESCE(NULLIF(DOB,''),GETDATE()))-DATEPART(YY,0) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T17:19:45.273

你所拥有的应该工作。我可能会使用一个变体，只是因为我发现它更易读/更明显：

```
SELECT DATEDIFF(Year, N.NameBirthdate,getdate()) - 
    (case when month(N.NameBirthdate) > month(getdate()) or (month(N.NameBirthdate) = month(getdate()) and day(N.NameBirthdate) > day(getdate()) ) then 1 else 0 end) 
```

对我来说，这是有道理的，因为这就是你（或我）如何确定某人的年龄。OK：你是哪一年出生的，现在是哪一年？我们现在是几月？是你的出生月份吗？今天是什么日子？

我个人不喜欢闰年的做法。首先，它不是 365.25，而是 0.24。准确地说是 365.24219647。如果你使用 .25 你会错的。示例：[http ://www.sqlfiddle.com/#!3/d41d8/8267](http://www.sqlfiddle.com/#!3/d41d8/8267)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-20T15:18:02.337

```
SELECT DATEDIFF(yy, BirthDate, GETDATE()) - CASE
    WHEN MONTH(BirthDate) > MONTH(GETDATE())
          OR (MONTH(BirthDate) = MONTH(GETDATE())
             AND DAY(BirthDate) > DAY(GETDATE()))
    THEN 1
    ELSE 0
END AS Age; 
```

# lwuit - Lwuit S40 暗色表格

> ID：14609232
> 
> 赞同：1
> 
> 时间：2013-01-30T16:47:31.097
> 
> 标签：lwuit, nokia-s40, lwuit-dialog

我正在开发一个 LWUIT S40 应用程序。指南规定，当对话框打开时，包括状态栏、标题栏、类别栏在内的背景必须变暗 - 60% 黑色。

我认为这会自动发生，但事实并非如此。

有人知道这样做的方法吗？使标题栏和类别栏变暗，就像这个捕获（这是一个 lcdui 警报）

![LCDUI 警报](../Images/cdc1a861f2d39e64903e03cf7750c5a3.png).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T16:41:19.127

我更喜欢使用来自诺基亚 LCDUI 的原生 Alert。Series 40 的 LWUIT 允许我们将 LCDUI 组件与 LWUIT 组件结合起来。

例如，这是我的代码：

```
Alert loading = new Alert("MIG33", "Loading user", null, null);
loading.setIndicator(new Gauge(null, false, Gauge.INDEFINITE, Gauge.CONTINUOUS_RUNNING));
javax.microedition.lcdui.Display.getDisplay(this).setCurrent(loading); 
```

由于 LWUIT 有它自己的 Display 类，我们在 midlet 中使用。它必须像上面那样写。因此它可以与 LCDUI 中的 Display 有所不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T09:11:09.087

您需要将父窗体的色调颜色设置为`0xaa000000`（绘制背景的 ARGB 值）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T11:52:56.600

我不认为 LWUIT S40 可以访问标题栏和类别栏，您需要获得诺基亚签名的应用程序才能编辑类别栏颜色。对我来说，我自定义了加载对话框并设置了这样的标题： dialogObj.setTitle(" "); 所以对话框标题中什么也没有出现。

同样对于使用类别栏的应用程序，我使用加载 GIF 或 APNG 以及任何加载消息来刷新表单的内容，而不是这种方法。

# android - 当我单击状态栏中的通知时，应用程序未启动

> ID：14609236
> 
> 赞同：0
> 
> 时间：2013-01-30T16:47:43.890
> 
> 标签：android, push-notification, statusbar, google-cloud-messaging

我尝试开发一个使用 GCM 库的应用程序，但是当我单击状态栏中的通知时，应用程序没有启动...

这是我的 GCMIntentService 类中的源代码：

```
private static void generateNotification(Context context, String message) {

    int icon = R.drawable.ic_launcher;
    long when = System.currentTimeMillis();

    NotificationManager notificationManager = (NotificationManager) 
            context.getSystemService(Context.NOTIFICATION_SERVICE);

    Notification notification = new Notification(icon, message, when);      

    String title = context.getString(R.string.app_name);
    Intent notificationIntent = new Intent(context, LauncherActivity.class);

    notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | 
            Intent.FLAG_ACTIVITY_SINGLE_TOP);

    PendingIntent intent = PendingIntent.getActivity(context, 0,   
            notificationIntent, 0);

    notification.setLatestEventInfo(context, title, message, intent);
    notification.flags |= Notification.FLAG_AUTO_CANCEL;
    notification.defaults |= Notification.DEFAULT_SOUND;
    notification.defaults |= Notification.DEFAULT_VIBRATE; 
    notificationManager.notify(1, notification);
} 
```

清单中的代码：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.smarttram.caen"
android:versionCode="7"
android:versionName="1.0" >    

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="16" />

<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />  
<uses-permission android:name="android.permission.INTERNET" />  
<uses-permission android:name="android.permission.GET_ACCOUNTS" />  
<uses-permission android:name="android.permission.WAKE_LOCK" />

<permission
    android:name="com.smarttram.caen.permission.C2D_MESSAGE"
    android:protectionLevel="signature" />

<uses-permission android:name="com.smarttram.caen.permission.C2D_MESSAGE" />  
<uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />   
<uses-permission android:name="android.permission.VIBRATE" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/Theme.Sherlock.Light.DarkActionBar" > 

    <activity
        android:name="com.smarttram.caen.LauncherActivity"
        android:label="@string/title_activity_main"
        android:screenOrientation="portrait"
        android:hardwareAccelerated="true">    

        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>

    </activity>

    <activity android:name="com.google.ads.AdActivity"             
              android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize" />

    <receiver
        android:name="com.google.android.gcm.GCMBroadcastReceiver"
        android:permission="com.google.android.c2dm.permission.SEND" >

        <intent-filter>               
            <action android:name="com.google.android.c2dm.intent.RECEIVE" />            
            <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
            <category android:name="com.smarttram.caen" />
        </intent-filter>

    </receiver>

    <service android:name=".GCMIntentService" />         

</application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:07:35.940

您正在尝试启动`LauncherActivity.class`对吗？

删除行：

`notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP);`

尝试在`PendingIntent`

`PendingIntent pintent = PendingIntent.getActivity(context, 0, intent, Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_NEW_TASK);`

# c++ - 在多个文件中使用全局变量

> ID：14609241
> 
> 赞同：2
> 
> 时间：2013-01-30T16:48:00.053
> 
> 标签：c++, global-variables, linker-errors

我有一个使用 cocos2d-x 库的项目，其中包含很多类。我有一个 .h 文件包含一个全局向量。我想在程序在介绍页面类中启动时对其进行初始化。介绍页面类有一个图形界面和一个加载器。然后我想在我的主类中使用那个向量。全局向量的代码如下：

```
//globals.h
#ifndef _GLOBAL_H
#define _GLOBAL_H
#include <vector>

vector<int> a;
#endif 
```

我在介绍页面类中使用 push_back。我使用了**外部**和**静态**关键字。我的程序出现运行时链接器错误，它说您的向量已在 appDelegate 类（cocos2d 的基类）中声明。当我在它后面放一个静态关键字时，它不会给我那个链接器错误，但它不能正常工作。
我该如何纠正这个错误？如果您有其他想法而不是这个想法，请分享。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T16:52:36.063

您应该有如下设计：

**共享.cpp**

```
vector<int> a; 
```

**共享.h**

```
extern vector<int> a; 
```

**某处.cpp**

```
#include "shared.h"
void code() {
  a.push_back(10);
} 
```

请注意，由于您使用的是 C++，因此您可以使用类作为命名空间以避免混淆全局命名空间，例如：

**共享.cpp**

```
vector<int> Common::a; 
```

**共享.h**

```
class Common {
  public:
    static vector<int> a;
} 
```

**某处.cpp**

```
#include "shared.h"
void code() {
  Common::a.push_back(10);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T16:49:34.553

您可能有多个对象声明，但您应该只有一个定义。要做到这一点，使用`extern`来标记声明和缺少`extern`来标记定义。

在您的头文件中，执行以下操作：

```
extern std::vector<int> a; 
```

在您的源代码文件之一中，执行以下操作：

```
std::vector<int> a; 
```

# google-drive-api - 列出文件：后端错误（无错误代码）Google Drive SDK

> ID：14609246
> 
> 赞同：0
> 
> 时间：2013-01-30T16:48:13.513
> 
> 标签：google-drive-api

我们构建了一个网络应用程序，它可以根据用户定义的业务规则自动索引电子邮件附件并将其直接保存到 Google Drive。我们在同步某些 Google Drive 帐户时看到失败，并且无法找出问题所在。

这是错误：

> 列出文件错误：后端错误 /mnt/opt/openera/current/app/models/cloud_account/google_drive.rb:299:in 'list_files' /mnt/opt/openera/current/app/models/cloud_account/google_drive.rb: 220：在“do_discover_files”/mnt/opt/openera/current/app/models/cloud_account/base.rb：304：在“发现文件”/mnt/opt/openera/current/app/workers/worker/file_synchronizer.rb： 10：在'执行'/mnt/opt/openera/current/vendor/bundle/ruby/1.9.1/gems/sidekiq-2.6.5/lib/sidekiq/processor.rb:45：在'块（3级）进行中' /mnt/opt/openera/current/vendor/bundle/ruby/1.9.1/gems/sidekiq-2.6.5/lib/sidekiq/middleware/chain.rb:109:in '调用' /mnt/opt /openera/current/vendor/bundle/ruby/1.9.1/gems/sidekiq-2.6.5/lib/sidekiq/middleware/chain.rb:109:in 'block in voke'/mnt/opt/openera/current/lib/sidekiq_repeat_jobs/middleware/server/repeat_jobs.rb:36:in 'call' /mnt/opt/openera/current/vendor/bundle/ruby/1.9.1/gems/sidekiq- 2.6.5/lib/sidekiq/middleware/chain.rb:111:in 'block in voke' /mnt/opt/openera/current/vendor/bundle/ruby/1.9.1/gems/sidekiq-2.6.5/ lib/sidekiq/middleware/server/timeout.rb:14:in 'cal l' /mnt/opt/openera/current/vendor/bundle/ruby/1.9.1/gems/sidekiq-2.6.5/lib/sidekiq/ middleware/chain.rb:111:in 'block in in voke' /mnt/opt/openera/current/vendor/bundle/ruby/1.9.1/gems/sidekiq-2.6.5/lib/sidekiq/middleware/server/ active_record.rb:6:in '调用'/mnt/opt/openera/current/vendor/bundle/ruby/1.9.1/gems/sidekiq-2.6.5/lib/sidekiq/middleware/chain.rb:111:in '在 voke 中阻止' /mnt/opt/openera/current/vendor/bundle/ruby/1.9.1/gems/sidekiq-2.6.5/lib/sidekiq/middleware/server/retry_jobs.rb:49:in '调用' /mnt/opt/openera/current/vendor/bundle/ruby/1.9.1/gems/sidekiq -2.6.5/lib/sidekiq/middleware/chain.rb:111:in 'block in in voke' /mnt/opt/openera/current/vendor/bundle/ruby/1.9.1/gems/sidekiq-2.6.5 /lib/sidekiq/middleware/server/logging.rb:11:in 'block in call' /mnt/opt/openera/current/vendor/bundle/ruby/1.9.1/gems/sidekiq-2.6.5/lib /sidekiq/logging.rb:22:in 'with_context' /mnt/opt/openera/current/vendor/bundle/ruby/1.9.1/gems/sidekiq-2.6.5/lib/sidekiq/middleware/server/logging. rb:7:in 'call' /mnt/opt/openera/current/vendor/bundle/ruby/1.9.1/gems/sidekiq-2.6.5/lib/sidekiq/middleware/chain.rb:111:in 'block在调用'/mnt/opt/openera/current/vendor/bundle/ruby/1.9.1/gems/sidekiq-2.6。5/lib/sidekiq/middleware/chain.rb:114:in 'call' /mnt/opt/openera/current/vendor/bundle/ruby/1.9.1/gems/sidekiq-2.6.5/lib/sidekiq/middleware /chain.rb:114:in 'invoke' /mnt/opt/openera/current/vendor/bundle/ruby/1.9.1/gems/sidekiq-2.6.5/lib/sidekiq/processor.rb:44:in '进程中的块（2个级别）' /mnt/opt/openera/current/vendor/bundle/ruby/1.9.1/gems/sidekiq-2.6.5/lib/sidekiq/processor.rb:80:in 'stats' / mnt/opt/openera/current/vendor/bundle/ruby/1.9.1/gems/sidekiq-2.6.5/lib/sidekiq/processor.rb:43:in 'block in process' /mnt/opt/openera/current /vendor/bundle/ruby/1.9.1/gems/celluloid-0.12.4/lib/celluloid/calls.rb:23:in 'call' /mnt/opt/openera/current/vendor/bundle/ruby/1.9\. 1/gems/celluoid-0.12.4/lib/celluoid/calls.rb:23:in 'public_send'/mnt/opt/openera/current/vendor/bundle/ruby/1.9.1/gems/celluloid-0.12.4/lib/celluloid/calls.rb:23:in 'dispatch' /mnt/opt/openera/current/ vendor/bundle/ruby/1.9.1/gems/celluloid-0.12.4/lib/celluloid/future.rb:18:in 'block in initiali ze' /mnt/opt/openera/current/vendor/bundle/ruby/ 1.9.1/gems/celluloid-0.12.4/lib/celluloid/internal_pool.rb:48:in 'call' /mnt/opt/openera/current/vendor/bundle/ruby/1.9.1/gems/celluoid-0.12 .4/lib/celluloid/internal_pool.rb:48:in 'block in create'rb:48:in 'call' /mnt/opt/openera/current/vendor/bundle/ruby/1.9.1/gems/celluloid-0.12.4/lib/celluloid/internal_pool.rb:48:in 'block in c复习'rb:48:in 'call' /mnt/opt/openera/current/vendor/bundle/ruby/1.9.1/gems/celluloid-0.12.4/lib/celluloid/internal_pool.rb:48:in 'block in c复习'

更新：这是我们高级开发人员的实际代码。

在此处开发 (ffoeg) 添加调用的实际代码：

```
def list_files
 pageToken = nil
 params = {'maxResults' => 65535, 'q' => 'trashed = false'}
 files = [] 
 drive = session.discovered_api("drive", "v2")
 while true do
   call_params = pageToken.blank? ? params : params.merge('pageToken' => pageToken)
   result = session.execute(api_method: drive.files.list, parameters: call_params)
   if result.status == 200
     files += result.data.items
     break if result.data['nextPageToken'].blank?
     pageToken = result.data['nextPageToken']
   else 
     raise "List Files Error: #{result.data['error']['message']}"
   end  
 end  
 files
end 
```

再次更新：

我们更新了代码以获得确切的错误 - 这里是：

```
List Files Error: {"errors"=>[{"domain"=>"global", "reason"=>"backendError", 
"message"=>"Backend Error"}], "code"=>503, "message"=>"Backend Error"} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T18:11:14.543

问题是 maxResults 的值。它*太大*了，会导致请求超时。不幸的是，“安全”值非常小，每页大约 200 个结果。您可以更大，但结果会因用户而异。语料库较小的用户可能会在较大的页面尺寸下正常工作，但语料库较大的用户似乎更敏感。好吧，至少基于对我的一些帐户的一些非常快速/非正式的测试。

FWIW，我记得使用更大的页面尺寸会更好。将检查是否有任何可能超出预期的限制。

# android - 如何使用资源中的文件附件启动电子邮件意图？

> ID：14609248
> 
> 赞同：3
> 
> 时间：2013-01-30T16:48:20.673
> 
> 标签：android, email, resources, attachment, email-attachments

我是Android开发的初学者。

我正在尝试通过意图启动外部电子邮件应用程序，并且我想将资源文件附加到它。

我已经能够通过 Gmail 应用程序附加图像资源文件，但由于某种原因，默认的电子邮件应用程序没有附加它。这是代码：

```
Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
                    emailIntent.setType("image/png");

String path = "android.resource://" + getPackageName() + "/" + R.drawable.icon; 
Uri emailUri = Uri.parse(path);

emailIntent.putExtra(Intent.EXTRA_STREAM, emailUri);                        
startActivity(Intent.createChooser(emailIntent, "Send mail...")); 
```

此外，即使它适用于 Gmail，当我发送文件时，图像文件的名称和扩展名都丢失了。有没有办法保留与文件关联的所有信息？

帮助将不胜感激！

# ruby - 处理红宝石鞋框架中的表格

> ID：14609255
> 
> 赞同：3
> 
> 时间：2013-01-30T16:48:40.660
> 
> 标签：ruby, ruby-on-rails-3.1, shoes

谁能告诉我一个关于如何在 ruby​​ shoes 框架中创建编辑和删除表的好教程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T18:30:54.780

我为鞋子创建了一个表格小部件。看看那里[http://hackety.com/users/kwicher/programs/table](http://hackety.com/users/kwicher/programs/table)

# c# - 在特定属性更改时评估多重绑定

> ID：14609256
> 
> 赞同：3
> 
> 时间：2013-01-30T16:48:43.357
> 
> 标签：c#, .net, wpf, multibinding

我有一个看起来像这样的 MultiBinding：

```
<MultiBinding Converter="{StaticResource MyConverter}">
    <Binding Path="Object1.Object2.MyObject" />
    <Binding Path="Object1.Object2.MyCollection[1]" />
    <Binding Path="MyBoolean" />
</MultiBinding> 
```

我只想在 MyObject 更改时评估此 MultiBinding（并因此调用 MyConverter.Convert()）。我知道我可以将 MultiBinding 的 UpdateSourceTrigger 设置为 Explicit，但考虑到 Object1 和 Object2 会定期重新分配，我必须在后面的代码中连接很多 PropertyChanged 事件。是否有可能在 XAML 中实现这一点？

任何帮助将不胜感激 - 谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T17:49:44.653

尝试将`DataContext`您的主机控制设置为`Object2`. 然后就可以`MyObject`直接绑定了。这有帮助吗？当然，这仍然意味着改变，`MyCollection`也会`MyBoolean`触发`MultiBinding`重新评估。

如果您提供了使用您的上下文的上下文，这也会有所帮助`MultiBinding`（即，这是返回的文本`TextBlock`吗？

编辑：

回应您的评论，也许有不同的方式。我假设您的 3 个多重绑定属性具有单独的 PropertyChanged 事件。如果您的应用程序允许，也许您可​​以将这些事件从`MyCollection`and`MyBoolean`属性中移出并移到`MyObject`属性中。例如：

```
public object MyObject
{
    get { ... }
    set
    {
        ...
        OnPropertyChanged("MyObject");
        OnPropertyChanged("MyCollection");
        OnPropertyChanged("MyBoolean");
    }
} 
```

现在我知道这有点骇人听闻，但这会触发`MultiBinding`.`MyObject`

编辑＃2：

另一种选择是将 a 添加`EventTrigger`到托管控件，例如：

```
<EventTrigger RoutedEvent="MyObject.TargetUpdated">
   <Setter TargetName="yourCheckBox" Property="Value">
       <Setter.Binding>
           <MultiBinding Converter="{StaticResource MyConverter}">
               <Binding Path="MyObject" />
               <Binding Path="MyCollection" />
               <Binding Path="MyBoolean" />
           </MultiBinding>
       </Setter.Binding>
   </Setter>                
</EventTrigger> 
```

只有在这里才能确保`Mode=TwoWay`您的复选框绑定。

我提到了这个[链接](https://stackoverflow.com/questions/6198077/wpf-fire-datatrigger-when-property-changes-regardless-of-new-value)。

# linux - 仅当文件未设置可执行文件时才需要在当前目录中运行命令

> ID：14609260
> 
> 赞同：0
> 
> 时间：2013-01-30T16:48:56.147
> 
> 标签：linux, bash, shell, tar

这是问题所在：

使用 bash for 循环遍历当前目录中包含字符串“osl-guest”和“.tar.gz”的文件（使用 'ls' 命令，参见下面的示例输出），然后运行命令 'tar - zxf' 仅在文件未设置为可执行文件时单独在每个文件上。例如，要对文件“file1”运行“tar -zxf”命令，该命令将是：`tar -zxf file1`

“ls -l”的示例输出：

```
-rw-r--r--   1 lance lance   42866 Nov  1  2011 vmlinuz-2.6.35-gentoo-r9-osl-guest_i686.tar.gz
-rwxr-xr-x   1 lance lance   42866 Nov  1  2011 vmlinuz-3.4.5-gentoo-r3-osl-guest_i686.tar.gz
-rw-r--r--   1 lance lance   42866 Nov  1  2011 vmlinuz-3.5.3-gentoo-r2-osl-guest_i686.tar.gz 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:20:02.050

您可以通过以下方式执行循环，而无需调用`ls`：

```
# For each file matching the pattern
for f in *osl-guest*.tar.gz; do
    # If the file is not executable
    if [[ ! -x "$f" ]]; then 
            tar -zxf $f;
    fi; 
done; 
```

只需使用`*osl-guest*.tar.gz`shell 扩展来获取您想要的文件列表，而不是调用它`ls`。

该`if`语句检查文件是否可执行，`-x`是对可执行文件的测试，使用`!`否定结果，因此它只会`if`在文件不可执行时进入块。

# git - 推送到 github 时出错 - 更新被拒绝，因为推送的分支提示位于其远程后面

> ID：14609263
> 
> 赞同：16
> 
> 时间：2013-01-30T16:49:07.313
> 
> 标签：git, heroku

我在推送到不同的 heroku 遥控器时遇到问题。

为了检查自己，我将整个项目目录重命名为 _backup，然后：

```
git clone account/repo_name

git remote add repo2 git@heroku.com:repo2.git

git push repo2 branch_abc:master 
```

但我仍然得到

```
hint: Updates were rejected because a pushed branch tip is behind its remote
hint: counterpart. Check out this branch and merge the remote changes
hint: (e.g. 'git pull') before pushing again.
hint: See the 'Note about fast-forwards' in 'git push --help' for details. 
```

我已经尝试了几个 SO 问题和答案，但对我没有用，无论如何仍然会收到错误。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-01-30T16:53:59.933

**如果您不关心 repo2 中当前的内容并且确信完全覆盖它是**可以的，那么您可以使用：

```
$ git push -f git@heroku.com:<heroku repo name>.git 
```

请记住，如果其他开发人员更改自您上次从存储库中撤出后发布，这`push -f` **可能会抹杀其他开发人员的更改**……所以在多开发人员团队中使用时要格外小心！
在这种情况下，heroku 总是在下游，而 github 是管理和维护代码的地方，因此这使得`push -f`heroku 成为一个比其他方式更安全的选择。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-04-17T18:58:31.583

我一直是使用 git pull --rebase 然后 git push origin master 的忠实粉丝。我工作过的几个地方，因为很多地方都不允许 push -f（尤其是使用 bitbucket 的地方）。

```
git pull --rebase 
git push origin master 
```

rebase 会将您的更改应用到远程（在线网站）之后。该视频从字面上介绍了您的确切问题并使用 git pull --rebase [https://youtu.be/IhkvMPE9Jxs?t=10m36s解决了它](https://youtu.be/IhkvMPE9Jxs?t=10m36s)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-05-18T06:59:02.317

如果你先拉另一个 repo：

**git拉回购2**

这将合并到您可以添加和提交的其他存储库的更改中。

然后你可以将 repo 推回去。

# css - HTML 5 按钮，在活动时放下一个 1px 的按钮，搞砸了，影响超过 1 个按钮，如何解决？

> ID：14609264
> 
> 赞同：0
> 
> 时间：2013-01-30T16:49:08.460
> 
> 标签：css, html

好吧，我有这段相当简单的代码，当它处于活动状态（鼠标点击它）时，应该将 HTML 5 按钮元素的 margin-top 设置为 1px。但是我得到的是一个混乱的布局，因为按钮只做了它应该做的事情，它只为两个紧挨着的按钮做它。你能告诉我是什么导致这个错误发生吗？

这是一个示例 HTML 代码（因为我不能只链接到 jsfiddle），但是到 jsfiddle 的链接就在底部

```
<header id="main_header"> <!-- this is your header with logo, menu, login and get started now buttons -->
    <div id="header_accent"></div> <!-- small accent image, barely seen on top of the page -->
    <div id="header_holder"> <!-- this guy centers the header to the middle of the page's width -->
        <img src="images/logo.png" alt="ssl8.com" id="logo"/> <!-- logo image -->
        <div id="nav_holder"> <!-- positions the navigation and buttons -->
            <nav>
                <ul> <!-- navigation -->
                    <li class="active"><a href="#">prices</a></li>
                    <li><a href="#">features</a></li>
                    <li><a href="#">contact</a></li>
                </ul>
            </nav>
            <button class="login">login</button> <!-- login button -->
            <button class="getStartedNow">Get started now</button> <!-- get started now button -->
        </div>
        <div id="header_shadow"></div> <!-- holds the background shadow for the header (in CSS file) -->
    </div>
</header> <!-- END of header --> 
```

这是jsfiddle。忽略丢失的图片等，只需单击橙色按钮，您就会看到我在说什么。

[jsfiddle](http://jsfiddle.net/emfwA/)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:57:19.547

我会将`nav_holder`and`getStartedNow`类设置为`position:relative`，然后`top:1px`将其向下移动一个像素。这似乎可以解决问题。

```
button.getStartedNow:active {
  position: relative;
  top: 1px;
} 
```

我认为之前的问题是由边距的工作方式引起的，但我不太了解这个问题。

您还希望使用`login`按钮执行此操作以在此处获得相同的效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T17:08:34.313

这是我的解决方案[http://jsfiddle.net/burn123/emfwA/16/](http://jsfiddle.net/burn123/emfwA/16/)

**我改变了什么**

1.  您为两个按钮上设置的按钮设置了 、 、 和 ，这是`opacity`多余`box-shadow`的`transitions`。`border-radius`我改变了它，使它适用于所有按钮
2.  `box-shadow`或不需要浏览器前缀`border-radius`
3.  对于您的登录按钮，您忘记了登录类之前的句点，因此 css 试图找到一个名为 login 的元素，该元素不存在
4.  从两个元素中删除活动和悬停并设置通用`active`和`hover`伪元素
5.  添加了相对于每个按钮的位置
6.  激活时，按钮将被赋予一个属性`top: 1px`
7.  将标题的大小更改为，`min-width:100%`以便该行将一直穿过

主要问题在于您的按钮设置在静态位置，因此通过应用`margin-top`of `1px`，您将整个顶部向下移动。通过设置相对位置，您可以添加诸如`top`或之类的属性`left`，它将沿该方向移动元素，同时仍将元素的空间保持在相同位置

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T17:12:15.163

添加 position: 相对于 .getStartedNow 类，并将活动片段更改为：

```
button.getStartedNow:active {
 bottom: -1px;
} 
```

这是一个活生生的例子：http: [//jsfiddle.net/emfwA/17/](http://jsfiddle.net/emfwA/17/) ..

# iphone - NSCachesDirectory 的内容可以在应用打开时被系统删除吗？

> ID：14609266
> 
> 赞同：3
> 
> 时间：2013-01-30T16:49:12.823
> 
> 标签：iphone, ios, objective-c

如题。

**当我在前台运行时**，我存储在其中的文件是否有可能`NSCachesDirectory`被系统删除（即在存储空间不足的情况下） ？

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T12:13:37.630

[文件系统编程指南](http://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/FileSystemProgrammingGUide/FileSystemOverview/FileSystemOverview.html)

> 在 iOS 5.0 及更高版本上，系统可能会在系统磁盘空间非常低的极少数情况下删除 Caches 目录。**这在应用程序运行时永远不会发生。**但是，您应该知道，iTunes 恢复不一定是可以擦除 Caches 目录的唯一条件。

所以答案是 - 不，当应用程序在前台运行时，不可能删除 NSCachesDirectory。

但是，对于在后台运行的应用程序，它们的措辞有些含糊。**

# mysql - 我如何合并这两个选择语句？

> ID：14609272
> 
> 赞同：-1
> 
> 时间：2013-01-30T16:49:24.637
> 
> 标签：mysql

我有 2 条选择语句，一条用于获取最新的失败状态，一条用于获取最新的错过状态。在第三个中，如果最新状态是错过或失败但它似乎已经合并了数据，我需要有一个声明？我使用 LIKE 因为错过和失败可能会略有不同

```
mysql> select max(scheduled_start),node_name,schedule_name,status from `events_server` WHERE status LIKE '%Failed%'and node_name='name';
+----------------------+----------------+---------------+-----------+
| max(scheduled_start) | node_name      | schedule_name | status    |
+----------------------+----------------+---------------+-----------+
| 2013-01-30 15:00:00  | name           | name_1500     | Failed  1 |
+----------------------+----------------+---------------+-----------+
1 row in set (0.01 sec)

mysql> select max(scheduled_start),node_name,schedule_name,status from `events_server` WHERE status LIKE '%Missed%'and node_name='name';
+----------------------+----------------+---------------+--------+
| max(scheduled_start) | node_name      | schedule_name | status |
+----------------------+----------------+---------------+--------+
| 2013-01-23 08:00:00  | name           | NAME_0800     | Missed |
+----------------------+----------------+---------------+--------+
1 row in set (0.01 sec)

mysql> select max(scheduled_start),node_name,schedule_name,status from `events_server` WHERE (status LIKE '%Failed%' OR status LIKE '%Missed%') and node_na
me='name';
+----------------------+----------------+---------------+--------+
| max(scheduled_start) | node_name      | schedule_name | status |
+----------------------+----------------+---------------+--------+
| 2013-01-30 15:00:00  | name           | NAME_0800     | Missed |
+----------------------+----------------+---------------+--------+
1 row in set (0.01 sec) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:53:00.913

您是否尝试过类似于此的方法，它将*旋转*数据并为每个状态返回一个单独的列。这将为您`max(scheduled_start)`提供`Failed`和`Missed`状态。但是您还需要添加 a`GROUP BY`才能得到结果：

```
select 
    max(case when status LIKE '%Failed%' then scheduled_start end) Failed,
    max(case when status LIKE '%Missed%' then scheduled_start end) Missed,
    node_name,
    schedule_name
from `events_server`
where node_name='name'
 AND (status LIKE '%Missed%' OR status LIKE '%Failed%')
group by node_name, schedule_name 
```

# jpa - 显示过时值的 JSF 视图

> ID：14609276
> 
> 赞同：0
> 
> 时间：2013-01-30T16:49:31.127
> 
> 标签：jpa, view, jsf-1.2, java-ee-5

我的应用程序中有两个实体和一个支持 bean。以下是它的简化版本：

**控制器和型号：**

```
class BackingBean {
    private List<A> collectionOfA;
    private A currentA;
    private B currentB;

    private String newDescription;

    // accessors

    public void prepareForUpdate(ActionEvent e) {
        currentA = (A) e.getComponent().getAttributes().get("a");
        currentB = (B) e.getComponent().getAttributes().get("b");
    }

    public void save(ActionEvent e) {
        // method to save b
        b.setName("changing the name");
        b.setSomeNumber(2);
        b.setDescription(newDescription);
        entityManager.merge(b);
    }
}

@Entity
class A {
    private String name;

    @OneToMany
    private List<B> bs;
}

@Entity
class B {
    private String name;
    private String description;
    private int someNumber;
} 
```

**看法：**

```
<div>
    <!-- some popup with inputs for updating B -->
    <h:inputText value="#{backingBean.currentB}" />
    <h:commandLink actionListener="#{backingBean.save}" />
</div>

<ui:repeat value="#{backingBean.collectionOfA}" var="a">
    <h:outputText>#{a.name}</h:outputText>

    <ui:repeat value="#{a.bs}" var="b">
        #{b.name}
        #{b.description}
        #{b.someNumber}
        <h:commandLink actionListener="#{backingBean.prepareForUpdate}">
            <f:attribute name="a" value="#{a}" />
            <f:attribute name="b" value="#{b}" />
        </h:commandLink>
    </ui:repeat>
</ui:repeat> 
```

假设，当我单击`commandLink`for`prepareForUpdate()`时，弹出窗口显示，我的问题是：当我保存`currentB`实体时，实体的每个字段都在视图中更新。但是，不久之后，该字段`b.description`将再次使用旧值呈现。当我检查数据库时，描述实际上是更新的，就像我刷新页面一样。

关于为什么会发生这种情况的任何想法？

# c# - 在编译时将字符串嵌入到 .NET 程序集中

> ID：14609278
> 
> 赞同：1
> 
> 时间：2013-01-30T16:49:33.743
> 
> 标签：c#, .net-2.0

我想在编译时指定一个嵌入到我的程序集中的值。本质上，我想要定义一个 C 预处理器定义，然后我可以在我的代码中使用它并在运行时引用它。我知道你不能在.NET 中完全做到这一点，所以我试图弄清楚我的下一个最佳选择是什么。

编辑：添加一个示例以希望使我的目标更加清晰。我想将一些时间戳和作者信息嵌入到编译的程序集中。因此，当我将我的可执行文件复制到另一台机器上时，我可以准确地知道它是何时构建的以及由谁构建的（例如，在 about 框中）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T17:31:26.857

不完全清楚你想要什么，但也许你需要根据环境/命令行参数生成一些常量值？

一种选择（它使您也可以使用 C 预处理器自爆）：在构建时生成 .CS 文件并进行编译。您可以在“构建前”步骤轻松完成，只需将生成的文件添加到项目中即可。

* * *

以下是在构建时生成一些文件的基本步骤。有一些 CMD 文件在项目文件夹中创建 CS：

```
:-----   generate.cmd {file.Name}  - generates some CS:
echo class Generated { public const int Value=42;} >%1 
```

添加到构建步骤之前（解决方案->属性->构建事件

```
$(ProjectDir)generate.cmd $(ProjectDir)Generated.cs 
```

将“Generated.cs”（上面的步骤将在项目根目录中）添加到您的项目中。

比`Generated.Value`根据需要使用。

* * *

这种方法的更好实现是在项目文件 (.csproj) 中定义自定义属性并在运行构建时设置它（请参阅[MSBuild](http://msdn.microsoft.com/en-US/library/ms164311%28v=VS.80%29.aspx)的“/property:name=value”参数）。比直接实现您在项目中需要的东西（您可以使用 [WriteLinesToFile 任务](http://msdn.microsoft.com/en-US/library/ms164305%28v=vs.80%29.aspx)在 .csproj 中生成文件）或将属性传递给外部工具。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T16:51:50.250

您可以像这样声明常量字段，然后您可以像访问任何其他字段一样访问：

```
private const string c_String = "FooFooFoo!"; 
```

# asp.net-mvc - jqGrid 过滤器工具栏和日期和选择过滤器

> ID：14609284
> 
> 赞同：1
> 
> 时间：2013-01-30T16:49:44.747
> 
> 标签：asp.net-mvc, jqgrid, filtering

我有一个 jqGrid：

```
$('#jqgFileInfoList').jqGrid({
    url: '@Url.Action("GetFiles", "File")',
    datatype: 'json',
    mtype: 'POST',
    colNames: ['Id', 'Name', 'Interface', 'Amount', 'Type', 'Created', 'Status'],
    colModel: [
        { jsonmap: 'Id', name: 'Id', formatter: 'integer', align: 'right', hidden: true },
        { jsonmap: 'Name', name: 'Name', align: 'right', hidden: true },
        { jsonmap: 'InterfaceName', name: 'InterfaceName', align: 'left', width: '100%', sorttype: 'text', frozen: true, search: true },
        { jsonmap: 'Amount', name: 'Amount', formatter: 'currency', align: 'right', width: '100%', sorttype: 'number', search: true },
        { jsonmap: 'Type', name: 'Type', align: 'right', width: '100%', sorttype: 'text', search: true },
        { jsonmap: 'RunDate', name: 'RunDate', formatter: 'date', align: 'right', width: '100%', sorttype: 'date', search: true },
        { jsonmap: 'Status', name: 'Status', align: 'right', width: '100%', sorttype: 'text', formatter: formatStatus, search: true }
    ],
    sortname: 'RunDate',
    sortorder: 'desc',
    pager: $('#jqgPagerFileInfoList'),
    rowNum: 5,
    viewrecords: true,
    height: '100%',
    autowidth: true,
    refresh: true,
    ignoreCase: true,
    jsonReader: {
        repeatitems: false,
        root: "rows"
    },
    altRows: true,
    altclass: 'jqGridAltRow',
    loadComplete: function () {
        $("tr.jqgrow:odd").addClass('jqGridAltRow');
    }
});

$('#jqgFileInfoList').jqGrid('filterToolbar', { searchOnEnter: false, enableClear: true, stringResult: true }); 
```

过滤正在工作，除了我要修改的几列。

Created/RunDate 列我想以某种方式过滤一个范围。选择一个日期是没有用的。

我想使用下拉菜单的接口、类型和状态列。最好的方法是什么？

我发现 jqGrid 文档很难理解，有很多选择。我花了一个小时才弄清楚我需要`stringResult: true`将过滤器选项放入`GridSettings.Where`控制器中的属性中。

如果重要的话，它是一个 .Net 4.0、MVC 应用程序。

***编辑***：**奖金问题**：我如何使它不区分大小写。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T18:01:29.720

我同意[官方文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:jqgriddocs)只能更多地作为参考，而不是作为开始使用它的开发人员的介绍，尤其是对于 .NET 开发人员。

对于您的问题：

1）没有简单的方法来实现按日期范围搜索。可以制作一些技巧，例如[此处](https://stackoverflow.com/a/8953934/315935)描述的技巧。`beforeSearch`高级搜索的回调`filterToolbar`或回调的使用`onSearch`允许在应用搜索过滤器之前“预处理”搜索过滤器，但所有这些都非常棘手。在使用服务器端排序的情况下，您可以直接在服务器端实现相同的操作。

2）jqGrid中实现下拉的方式有很多种。主要的替代方法是[searchoptions](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:search_config#colmodel_options)`value`的使用或`dataUrl`属性。最佳选择取决于您的确切要求。

`value`如果列有一些更静态的值作为动态值，则使用非常实用。例如，如果您`formatter: "checkbox"`在网格中使用将布尔数据显示为复选框，则您希望确保在列的过滤器中使用下拉菜单。在使用如下设置的情况下

```
stype: "select", searchoptions: { sopt: ["eq", "ne"], value: ":All;true:Yes;false:No" } 
```

会很实用。顺便说一句，您可以`value`在对象形式中使用

```
value: {"": "All", true:"Yes", false: "No"} 
```

在其他情况下，如果您有少量值，您可以使用`value`它在搜索过滤器中实现下拉菜单。

`dataUrl`如果您从数据库中动态获取的值列表，则应使用 one的用法。我可以[回答](https://stackoverflow.com/a/7877286/315935)你解释相应实现的主要思想的答案。

[答案](https://stackoverflow.com/a/5329014/315935)显示了简单的纯 JavaScript 代码，它演示了如何仅在客户端实现选择和自动完成。在服务器端分页和过滤的情况下，应该选择另一种实现方式。[答案](https://stackoverflow.com/a/7392816/315935)显示了如何在 ASP.NET MVC 解决方案中实现 jQuery UI 自动完成。

我认为 jQuery UI Autocomplete 在某些情况下可能是一个不错的选择，尤其是在可能的选项数量非常多的情况下。

**更新**：有很多方法可以使搜索不区分大小写。在使用*本地*搜索的情况下（使用`datatype`其他作为`"json"`或`xml"`使用`loadonce: true`），应该只使用`ignoreCase: true`jqGrid 的选项。在*服务器端搜索的情况下，您应该**在服务器端*使搜索不敏感。我个人在过滤期间只使用[COLLATE 。](http://msdn.microsoft.com/en-us/library/ms184391.aspx)例如，而不是像这样的结构

```
WHERE Name LIKE ('%' + @s + '%') 
```

我用

```
WHERE Name COLLATE SQL_Latin1_General_CP1_CI_AS LIKE ('%' + @s + '%') 
```

关于您发布的代码的另一个小评论：

*   使用**总是** `gridview: true`选项。有关更多详细信息，请参阅[答案](https://stackoverflow.com/a/12519858/315935)。
*   始终在 form`pager: "#jqgPagerFileInfoList"`而不是 form中指定寻呼机`pager: $("#jqgPagerFileInfoList")`。
*   不要使用不存在的选项，例如`refresh: true`
*   我建议您使用`autoencode: true`选项强制将从服务器返回的数据解释为文本而不是 HTML 片段。如果没有这些选项，您可能无法显示具有`<`等的文本`&`。
*   我建议您检查属性的默认值`colModel`（请参阅[文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:colmodel_options)）。你会看到你可以从你的代码中删除`align: 'left'`，`sorttype: 'text'`等等`search: true`。
*   您应该对 的属性使用允许的值`colModel`。例如`width: '100%'`不正确，将被解释为默认值`width: 150`。
*   您使用的所有值都与属性`jsonmap`的值相同。`name`所以你可以删除这些值。
*   我建议您删除隐藏列`name: 'Id'`。jqGrid 使用代表网格行的`id`属性。`<tr>`你使用`repeatitems: false`里面的`jsonReader`. 您可以添加`jsonReader`属性`id: "Id"`以指定 jqGrid 应使用`"Id"`行数据中的项目属性作为 rowid。

# umbraco - 如何在指向 umbraco 中的页面时构造 URL？

> ID：14609288
> 
> 赞同：0
> 
> 时间：2013-01-30T16:49:53.713
> 
> 标签：umbraco

如何在 umbraco 中构建 URL？所以我有一个公司列表，现在当我点击公司名称时，我希望它显示公司的资料。

公司列表和公司简介是两个独立的用户控件，并有两个嵌入用户控件的 Umbraco 页面（节点）。

所以我需要 dev.xxx.com/322.aspx?firmId=242 但我不会知道 322.apsx 中的页面名称，并且我不想对其进行硬编码。

有任何想法吗？

啾啾

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:19:58.010

您可以使用 Umbraco 内置的 UrlRewrite 模块为您的带有公司列表的页面和带有公司简介的页面创建“虚拟”页面。 有关类似示例，[请参阅我的另一篇文章](https://stackoverflow.com/questions/14414680/umbraco-dynamic-pages/14426489#14426489)

# gwt - 如何使用 RequestBuilder 发送 POST 参数？

> ID：14609290
> 
> 赞同：4
> 
> 时间：2013-01-30T16:50:00.263
> 
> 标签：gwt, webserver

我正在尝试发出 POST 请求，但我不确定如何设置参数。就像是：

```
RequestBuilder rb = new RequestBuilder(RequestBuilder.POST, url);

StringBuilder sb = new StringBuilder();
sb.append("key1=val1");
sb.append("&key2=val2");
sb.append("&key3=val3");
rb.setRequestData(sb.toString()); 
```

不过，这似乎不是当前的方式。用 POST 发送这样的参数的正确方法是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-30T16:55:39.067

[答案](https://stackoverflow.com/questions/3985309/making-post-requests-with-parameters-in-gwt?rq=1)应该在这里`builder.setHeader("Content-type", "application/x-www-form-urlencoded");`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-02-05T10:42:49.020

它正在打开新窗口，但没有`Post`使用 GWT 将参数传递给新窗口。

```
rb.setRequestData(json);
Request response = rb.sendRequest(json.toString(), new RequestCallback() {
    public void onError(Request request, Throwable exception) {}
    public void onResponseReceived(Request request, Response response) {
        Window.open(rb.getUrl(), postTarget, postWinFeatures);
    }
}); 
```

# asp.net-mvc - ASP.NET MVC - 在客户端缓存页面

> ID：14609291
> 
> 赞同：2
> 
> 时间：2013-01-30T16:50:06.237
> 
> 标签：asp.net-mvc, asp.net-mvc-3, outputcache

我有以这种方式缓存的代码：

```
[OutputCache(Duration="3600", Location=OutputCacheLocation.Client)] 
```

现在，我不完全知道这个输出缓存是如何工作的。它究竟在哪里保存页面的副本？`OutputCacheLocation.Client`和之间有什么区别`OutputCacheLocation.Browser`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-30T16:56:31.233

> 它究竟在哪里保存页面的副本？

缓存的存储位置[`Location`](http://msdn.microsoft.com/en-us/library/system.web.mvc.outputcacheattribute.location%28v=vs.108%29.aspx)由`OutputCacheAttribute`. 在您的情况下，您设置`Location=OutputCacheLocation.Client`它会将缓存保留在客户端浏览器上。

> OutputCacheLocation.Client 和 OutputCacheLocation.Browser 有什么区别？

`OutputCacheLocation.Browser`不存在。这是一个无效的值。枚举类型的文档[`OutputCacheLocation`](http://msdn.microsoft.com/en-us/library/system.web.ui.outputcachelocation.aspx)包含可能的值及其用法说明：

> *   **任何**- 输出缓存可以位于浏览器客户端（请求的来源）、参与请求的代理服务器（或任何其他服务器）或处理请求的服务器上。此值对应于 HttpCacheability.Public 枚举值。
> *   **客户端**- 输出缓存位于请求发起的浏览器客户端上。此值对应于 HttpCacheability.Private 枚举值。
> *   **下游**- 输出缓存可以存储在源服务器以外的任何支持 HTTP 1.1 缓存的设备中。这包括代理服务器和发出请求的客户端。
> *   **服务器**- 输出缓存位于处理请求的 Web 服务器上。此值对应于 HttpCacheability.Server 枚举值。
> *   **无**- 为请求的页面禁用输出缓存。此值对应于 HttpCacheability.NoCache 枚举值。
> *   **ServerAndClient** - 输出缓存只能存储在源服务器或请求客户端。不允许代理服务器缓存响应。此值对应于 HttpCacheability.Private 和 HttpCacheability.Server 枚举值的组合。

# java - Java EE EntityManager 如何管理数据库连接

> ID：14609293
> 
> 赞同：1
> 
> 时间：2013-01-30T16:50:08.510
> 
> 标签：java, jakarta-ee, jpa

假设我有一个`EntityManager`object `em`，并且我有以下伪代码：

```
@PersistenceContext(unitName = "myPU")
private EntityManager em;

public void runQuery()
{
    for(int i=0; i<100; i++)
    {   Query q = em.createNativeQuery(someQuery);
        List list = q.getResultList();
        //process result
        ...
        ...
    } 
} 
```

entityManager 是如何管理底层数据库连接的？上述代码是否只有 1 个连接会话或 100 个会话？

我问的原因是，对于每个连接会话，我需要在运行查询之前创建一个临时表。我想做的是这样的：

```
 for(int i=0; i<100; i++)
    {   //first check if temp table does not exist
         createTemptTable;
       // then run the query
        Query q = em.createNativeQuery(someQuery);
        List list = q.getResultList();
        //process result
        ...
        ...
    } 
```

但是我怎么能确定它会在同一个会话中创建表和运行查询呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T19:13:23.473

注入的 EntityManager 与数据库有一个连接，该连接取自容器管理的连接池。因此，上述代码中的所有查询都将在与数据库的同一连接上运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T14:06:26.020

在 Java EE 中，在 SessionBean 中，持久性上下文由 Java EE 容器管理。注入的 EntityManager 通常是持有真正 JPA EntityManager 的代理。在每个 JTA 事务边界上，代理将释放其 JPA EntityManager 并获取一个新的（或至少 clear() 它）。在事务之外，容器可以为每个操作获取一个新的 EntityManager，或者可以保存一个（这在规范中没有很好地定义，但假设它是每个请求的一个新的）。

由 JTA 管理的 JPA EntityManager 将在 JTA 事务期间使用相同的 JDBC/数据库连接。因此，只要您的方法在 JTA 事务中，您的代码就会有相同的连接。通常 SessionBean 方法默认是事务性的，所以每个方法都应该在它自己的事务中，除非你有不同的配置。

见， [http ://en.wikibooks.org/wiki/Java_Persistence/Runtime#Java_Enterprise_Edition](http://en.wikibooks.org/wiki/Java_Persistence/Runtime#Java_Enterprise_Edition)

# iphone - 如何不将图像复制到 UITextView

> ID：14609298
> 
> 赞同：-1
> 
> 时间：2013-01-30T16:50:41.053
> 
> 标签：iphone, ios, objective-c

我的应用程序用于`UITextView`从用户那里获取一些输入，我使用 Xcode4.5 模拟器来进行 Ipad 5.1 ，ARC

如果用户尝试复制和粘贴带有公告或图像的文本，我会收到以下错误：

```
 Mapping '/Users/user/Library/Application Support/iPhone Simulator/5.1/Library/Caches/com.apple.keyboards/images/1848901318' failed: 'Cannot allocate memory' (12)

GuardMalloc[W]: Failed to VM allocate 16384 bytes
GuardMalloc[W]: Explicitly trapping into debugger!!! 
```

我厌倦了用户以防止使用任何奇怪的字符或图像粘贴但无法使其工作，它甚至不会触发。

```
- (void)paste:(id)sender {
    UIPasteboard *pasteBoard = [UIPasteboard generalPasteboard];
    NSString *string = pasteBoard.string;
    NSLog(@"Pasteboard string: %@", string);
    [self.wodDescription insertText:string]; //woddesription is the textview
} 
```

为什么我得到上述错误？解决此崩溃的最佳方法是什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-02T00:38:46.093

我想我可以通过查看如何不粘贴来解决您的问题，而不是如何不使用[此现有线程](https://stackoverflow.com/a/13317175/306212)进行复制：

```
- (void)paste:(id)sender
{
    UIPasteboard *pasteBoard = [UIPasteboard generalPasteboard];
    NSString *string = pasteBoard.string;
    [self insertText:string];
} 
```

# ember.js - EmberJS 中的表单验证

> ID：14609303
> 
> 赞同：11
> 
> 时间：2013-01-30T16:50:53.870
> 
> 标签：ember.js

我只是想知道在 EmberJS 中验证表单的一般模式是什么？对于我的 App.IndexView 我有一个表单，当您单击提交按钮时，目标设置为视图，因此我可以进行一些验证。在我需要对有错误的字段做一些事情之前，这非常有效。我只想在有错误的字段中添加一个类，但不确定该怎么做。IndexView 应该验证表单，还是应该为每个字段创建一个视图，以在模糊时验证其自身？以下是我的 IndexView 中的内容。

```
App.IndexView = Ember.View.extend

  create: (model) ->

    valid = @_validate model

    if valid is true
      @get('controller').send 'createUser'
    else
      # HANDLE THE FIELDS WITH ERRORS

  _validate: (model) ->

    invalid = []
    validations = {
      firstName: @_validateString model.get 'firstName'
      lastName: @_validateString model.get 'lastName'
      email: @_validateEmail model.get 'email'
      password: @_validatePassword model.get 'password'
      accountType: @_validateString model.get 'accountType'
    }

    # This will get all of the values then runs uniq to see if the
    # form is valid
    validForm = _.chain(validations).values().uniq().value()

    if validForm.length is 1 and validForm[0]
      true
    else
      # other wise build up an array of the fields with issues
      for field, val of validations
        if val is false
          invalid.push field

      invalid

  _validateString: (str) ->
    return false unless str
    if str isnt '' then true else false

  _validateEmail: (str) ->
    pattern = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/
    pattern.test str

  _validatePassword: (str) ->
    return false unless str
    if str.length >= 6 then true else false 
```

和模板

```
<div class="row">
  <div class="span12">
    <div class="signup">
      <form class="form-horizontal offset3">
        <div class="control-group">
          <label class="control-label" for="first_name">First Name</label>
          <div class="controls">
            {{ view Ember.TextField placeholder="First Name" required="true" valueBinding='firstName' name='first_name' viewName='firstNameField'}}
          </div>
        </div>
        <div class="control-group">
          <label class="control-label" for="last_name">Last Name</label>
          <div class="controls">
            {{ view Ember.TextField placeholder="Last Name" required="true" valueBinding='lastName' name='last_name' viewName='lastNameField'}}
          </div>
        </div>
        <div class="control-group">
          <label class="control-label" for="email">Email</label>
          <div class="controls">
            {{ view Ember.TextField placeholder="Email" required="true" type="email" valueBinding='email' name='email' viewName='emailField'}}
          </div>
        </div>
        <div class="control-group">
          <label class="control-label" for="password">Password</label>
          <div class="controls">
            {{ view Ember.TextField placeholder="Password" required="true" type="password" valueBinding='password' name='password' viewName='passwordField'}}
          </div>
        </div>
        <div class="control-group">
          <label class="control-label" for="">Account Type</label>
          <div class="controls">
            {{#view Ember.RadioButtonGroup name="accountType" required="true" valueBinding="accountType"}}
              <label class="radio">
                {{view RadioButton checked='false' value="landlord"}}
                Landlord
              </label>
              <label class="radio">
                {{view RadioButton checked='false' required="true" value="tenant"}}
                Tenant
              </label>
            {{/view}}
          </div>

        </div>
        <div class="control-group">

          <div class="controls">
            <input class="btn btn-primary" {{action create model target='view' }} type="submit" value="Sign Up">
          </div>

        </div>
      </form>

    </div>

  </div>

</div> 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-30T19:30:21.453

> 我只是想知道在 EmberJS 中验证表单的一般模式是什么？

似乎有几种模式在使用。这在很大程度上取决于正在验证的内容，一般策略是使业务逻辑尽可能远离视图层。以下是一些可能有用的链接：

*   [validations-in-emberjs-application.html](http://blog.bigbinary.com/2012/08/27/validations-in-emberjs-application.html)建议在控制器级别执行验证，视图用于在焦点更改时触发验证。此截屏视频演示了如何使用此模式来验证一些简单的表单字段。

*   [Asynchronous-Form-Field-Validation-With-Ember](http://www.boronine.com/2012/08/09/Asynchronous-Form-Field-Validation-With-Ember/)提供了一些可重用的组件，可用于在视图层执行简单的验证。

*   [ember-validations](https://github.com/dockyard/ember-validations)是一个库，可用于向任何 ember-object 添加活动记录样式验证功能

> 对于我的 App.IndexView 我有一个表单，当您单击提交按钮时，目标设置为视图，因此我可以进行一些验证。在我需要对有错误的字段做一些事情之前，这非常有效。我只想在错误字段中添加一个类，但不确定如何做。

因为您希望一次验证多个字段，所以将这个验证逻辑移到控制器中可能更有意义。无论哪种方式，通常您会将给定字段的类属性绑定到属性，如下所示：

```
<div class="controls" {{bindAttr class=firstNameError:error:success}}>
  {{ view Ember.TextField placeholder="First Name" required="true" valueBinding='firstName' name='first_name' viewName='firstNameField'}}
</div> 
```

因此，在适当的位置添加一个`firstNameError`属性，该属性根据您的验证结果返回真/假。鉴于您的实现，在运行时设置此属性可能是有意义的`_validate`，但它也可能是实时执行验证的计算属性。

> IndexView 应该验证表单，还是应该为每个字段创建一个视图，以在模糊时验证其自身？

这实际上取决于您希望用户体验是什么样的。FWIW 我的投票是模糊。

# php - 为不同的 StoreViews 保存描述不起作用

> ID：14609309
> 
> 赞同：0
> 
> 时间：2013-01-30T16:51:04.600
> 
> 标签：php, magento

我正在尝试更新现有产品的描述。但我只想更新特定 StoreViews 的描述而不更改默认值。

到目前为止我的代码：

```
<?php    
$product = Mage::getModel('catalog/product')->load(42);
$product
    ->setStore(3)        //StoreView #3 is specific for english language
    ->setData(array(
        'name' => 'English name',
        'short_description' => 'English short desc',
        'description' => 'English desc'
    ))
    ->save();
?> 
```

运行后，产品默认值的描述和名称发生了变化。当我在后端打开产品并选择我的英文 StoreView 时，描述字段已选中“使用默认值”复选框。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T17:25:15.710

您必须在加载产品之前设置商店 ID。在您的情况下，您已将产品上的属性“商店”设置为值 3。尝试：

```
$product = Mage::getModel('catalog/product')->setStoreId(3)->load(42);
$product->setData(
    ... 
```

# css - WordPress中的自定义评论表单

> ID：14609311
> 
> 赞同：2
> 
> 时间：2013-01-30T16:51:07.563
> 
> 标签：css, wordpress, comments

我想`comment_form()`在 WordPress 中自定义函数的输出。要编辑字段和文本区域，我使用了以下代码并且一切正常。

```
<?php
    $req = get_option( 'require_name_email' );
    $fields =  array(
            // redefine author field
        'author' => '<p class="comment-form-author">' . '<label for="author">' . __( 'Name:' ) . ( $req ? ' <span class="required">*</span>' : '' ) . '</label>' .
        '<div class="input-prepend"><span class="add-on"><i class="icon-user"></i></span><input id="author" name="author" type="text" value="' . esc_attr( $commenter['comment_author'] ) . '" size="30"' . 'aria-required="true"' . ' required /></p>',
        'email'  => '<p class="comment-form-email"><label for="email">' . __( 'Email Address:' ) . ( $req ? ' <span class="required">*</span><br/>' : '' ) . '</label>' . 
        '<div class="input-prepend"><span class="add-on"><i class="icon-envelope"></i></span><input required id="email" name="email" type="text" value="' . esc_attr(  $commenter['comment_author_email'] ) . '" size="30"' . 'aria-required="true"' . ' required /></div></p>',
        'url'  => '<p class="comment-form-url"><label for="url">' . __( 'Your Website:' ) . '</label>' . 
        '<div class="input-prepend"><span class="add-on"><i class="icon-globe"></i></span><input id="url" name="url" type="text" value="' . esc_attr( $commenter['comment_author_url'] ) . '" size="30" /></div></p>'
        );
    $comments_args = array(
        'fields' => $fields,
            // redefine your own textarea (the comment body)
        'comment_field' => '<p class="comment-form-comment"><label for="comment">' . 'Comment' . '</label><textarea id="comment" name="comment" class="span12" rows="5" aria-required="true"></textarea></p>',
        );
    comment_form( $comments_args );
?> 
```

这是结果：

![自定义评论表单](../Images/29e61e0836e7ede9fc6a29e1d9ff4b7d.png)

现在，我想`class="btn btn-primary"`为提交按钮添加两个 CSS 类（）；如果不使用 jQuery，我怎么能做到这一点？

**笔记：**

有关解决方案，请阅读有关标有绿色符号的答案的评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T20:01:08.730

正如 krizna 所说，您可以修改主题`comments.php`文件以更改`comment_form()`. 我认为在这种情况下这可能是你最好的选择。

如果您查看 Codex 中的函数[参考](http://codex.wordpress.org/Function_Reference/comment_form#Parameters)`comment_form()`，您会注意到您只能修改提交按钮的 ID，而不能修改类。Trac 上有一些关于此的门票：

*   [http://core.trac.wordpress.org/ticket/20446](http://core.trac.wordpress.org/ticket/20446)
*   [http://core.trac.wordpress.org/ticket/15015](http://core.trac.wordpress.org/ticket/15015)

如果`comments.php`在这种情况下修改对您不起作用，您可以尝试应用其中一个补丁。

# c# - 如何将值从 LinkBut ton 发送到服务器？

> ID：14609316
> 
> 赞同：1
> 
> 时间：2013-01-30T16:51:21.053
> 
> 标签：c#, asp.net, .net, linkbutton

我有很多 LinkBut​​ton 例如：

```
<asp:LinkButton runat="server" onclick="cmdCancellaComunicazione_Click">X</asp:LinkButton> 
```

他们调用相同的服务器方法，`cmdCancellaComunicazione_Click`. 但我需要区分它们（例如，传递给服务器一个值）。

我该怎么做？我知道有 CommandArgument，但我无法为其设置一个值，例如 <%= myValue %>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T16:55:00.550

您可以使用事件处理程序的 sender 参数。将其转换为`LinkButton`：

```
protected void cmdCancellaComunicazione_Click(Object sender, EventArgs e) 
{
   LinkButton lbtn = (LinkButton) sender;
} 
```

然后你可以用它的[`CommandName`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.linkbutton.commandname.aspx),[`ID`](http://msdn.microsoft.com/en-us/library/system.web.ui.control.id.aspx)或[`Text`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.linkbutton.text.aspx)来区分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T17:17:35.627

您的代码没有`ID`指定，`LinkButton`这看起来很奇怪。

您应该能够为`CommandArgument`服务器端分配：

```
yourLinkButton.CommandArgument = yourValue; 
```

然后它将在您的`OnClick`处理程序中读取它的服务器端。

```
 protected void cmdCancellaComunicazione_Click(object sender, EventArgs e)
 {
     LinkButton btn = (LinkButton)sender;
     if (btn.CommandArgument.Equals(something here))
     {
          // do something
     }
     else
     {
          // do something else
     }
 } 
```

这是在网格中创建的还是被绑定的？如果是这样，我会`OnDataBinding`为之类的事件实现`LinkButton`：

```
<asp:LinkButton ID="yourLinkButton"
    runat="server" OnDataBinding="yourLinkButton_DataBinding"
    onclick="cmdCancellaComunicazione_Click">X</asp:LinkButton> 
```

服务器端代码（我尽量避免使用内联代码）：

```
protected void protected void lblID_DataBinding(object sender, System.EventArgs e)
{
    LinkButton btn = (LinkButton)sender;
    btn.CommandArgument = yourValue;
} 
```

您的问题中是否还有其他内容未包含在您的问题中？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T16:56:06.960

在您的方法中，您可以将`sender`a 转换为 a`LinkButton`并检查那里的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T16:58:06.497

`OnCommand`在这里将是一个不错的选择。

```
protected void ButtonCommand(object sender, CommandEventArgs e)
{
    string theCommand = e.CommandArgument.ToString();
} 
```

只需将`OnCommand`and添加`CommandArgument`到`LinkButton`.

```
<asp:LinkButton id="LinkButton1" Text="The Text" OnCommand="ButtonCommand" CommandArgument="YourInfo" runat="server"></asp:LinkButton> 
```

# entity-framework - 如何重新创建我的 EF CodeFirst 表？

> ID：14609320
> 
> 赞同：10
> 
> 时间：2013-01-30T16:51:31.313
> 
> 标签：entity-framework, code-first

我创建了一个 Code First 课程

在 Sql 中自动创建了一个数据库。

我删除了表格:(

我启用了迁移：

```
AutomaticMigrationsEnabled = true;
AutomaticMigrationDataLossAllowed = true;
Database.SetInitializer(new DropCreateDatabaseAlways<SurveyContext>()); 
```

然而在

```
update-database -force

Cannot find the object "dbo.CustomerResponses" because it does not exist or you do not have permissions. 
```

请帮忙。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-30T20:52:11.293

在系统表中有一个表叫做

```
__MigrationHistory 
```

...我删除了它。

在包管理器控制台中运行命令“更新数据库”问题已修复！

更多信息：

[http://blog.oneunicorn.com/2012/02/27/code-first-migrations-making-__migrationhistory-not-a-system-table/](http://blog.oneunicorn.com/2012/02/27/code-first-migrations-making-__migrationhistory-not-a-system-table/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-06-22T22:12:26.120

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T19:38:11.300

我以前收到过那个错误信息....

检查您在连接字符串中指定的数据库是否已创建。如果不是，请创建它然后执行代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-23T16:36:16.670

显然，可能有更好的方法来做到这一点，但由于这是令人惊讶的顶级谷歌帐户，我认为在阅读这些答案后提及我的想法会很好：

这是我面临的问题：我首先更改了由 EF6 代码生成的 FK，然后遇到了错误：

```
Unable to determine the relationship represented by navigation property 'Account.SalaryIncomes' of type 'ICollection<Person>'. Either manually configure the relationship, or ignore this property using the '[NotMapped]' attribute or by using 'EntityTypeBuilder.Ignore' in 'OnModelCreating'. 
```

为了解决这个错误，我尝试了许多定义映射的方法，但是我最终删除了我的 Person 表，并且在完全删除关系以尝试从头开始之后，错误得到了解决。但是，在更新数据库时，它抱怨“人”不存在 - 这导致我来到这里。

在查看了这些答案之后，我决定我懒得重新加载数据并认为迁移生成了 C# UP() 和 Down() 方法 - 我想，也许我可以参考另一个迁移......在提取上下代码之后进入该迁移中的公共方法，并引用新迁移中的方法-更新有效，然后创建了人员。为了安全起见-我将新调用包装在 try catch... 我的新 UP 方法是否如下所示：

```
protected override void Up(MigrationBuilder migrationBuilder)
    {
        try
        {
            new AddPeople().CreatePersonTable(migrationBuilder);
        }
        catch { }

        // Origional generated migration code
    } 
```

这个答案带有我没有测试过下次是否会覆盖此迁移（丢失代码）的 caviat - 但是，如果迁移按顺序运行，那么您实际上可以运行一次，然后将其删除后。

# java - 单击按钮后关闭警报对话框

> ID：14609323
> 
> 赞同：0
> 
> 时间：2013-01-30T16:51:48.933
> 
> 标签：java, android, android-alertdialog, layout-inflater

如果未检测到网络连接，我有以下代码向用户显示一个对话框。

```
private void createNoNetworkDialog() {

    LayoutInflater inflater = LayoutInflater.from(this);
    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    View view = inflater.inflate(R.layout.offline_mode_dialog,null);
    builder.setView(view);
    builder.show();

} 
```

此对话框中有两个按钮，它们具有为其 onClick 操作定义的方法。我想在按下这些按钮中的任何一个后关闭对话框弹出窗口。有任何想法吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:55:30.753

是的，`dismiss()`从`Listener`'s调用，`onClick`因为`DialogInterface`引用已通过，这允许解雇。

例如

```
builder.setPositiveButton ("Yes", new DialogInterface.OnClickListener()
                             {
  public void onClick (DialogInterface dialog, int which)
  {
    //do stuff beforehand
    dialog.dismiss();
  }
}); 
```

或者，如果您的按钮在布局内，则显示对话框并保留对它的引用 ( `final AlertDialog dialog = builder.show()`)。然后使用`dialog.findViewById()`找到相应的按钮。使用您持有的对话框引用分配一个法线`View.OnClickListener`并在其中调用。`dismiss()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T16:57:28.667

试试这个，我正在使用自定义布局，它对我有用。初始化`Button` `custon_dialog.findViewById()`然后写入`OncliclListner()`。它会工作

```
 final Dialog custon_dialog = new Dialog(Login.this);
            custon_dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
            custon_dialog.setContentView(R.layout.forget_custom_dialog);
            custon_dialog.setCancelable(true);
         Button submit_Btn = (Button) custon_dialog
                    .findViewById(R.id.submit);
        Button cancel_Btn = (Button) custon_dialog
                    .findViewById(R.id.cancel);
       submit_Btn.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
      //do your stuf
                        }

            });
        cancel_Btn.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                 custon_dialog.dismiss();
                        }

            });
        custon_dialog.show();
        } 
```

# highcharts - Highcharts 导出服务器配置设置

> ID：14609325
> 
> 赞同：0
> 
> 时间：2013-01-30T16:51:49.627
> 
> 标签：highcharts

Highcharts ( [Highcharts](http://www.highcharts.com/component/content/article/2-news/52-serverside-generated-charts) )，刚刚发布了他们产品的更新，其中包含一个捆绑的导出服务器。这是为了使您能够在服务器端生成图表并将它们自动包含在电子邮件/pdfs/等中。

他们关于如何准备的说明是：[Github instructions](https://github.com/highslide-software/highcharts.com/tree/master/exporting-server/java)

我在 Mountain Lion 上运行 XAMPP。我已经成功构建了war包并打开了演示页面。

我现在正在为生产环境（centOS 6）准备一场战争。生产站点正在运行 Yii 框架。

1.  什么我不明白，需要配置的变量：

    *   app.properties = 网址
    *   dev.properties = 网址
    *   prod.properties = 网址

在 MVC 框架环境（例如 yii）中，这些 url 应该是什么？

2.war创建后，github教程说要上传这个文件。但是，还需要哪些其他文件？整个导出服务器目录？如果是这样，这些文件应该放在服务器上的什么位置？文件位置是应该在 weburl 变量中引用的 url 路径吗？

对于如何设置/部署导出服务器的更多说明将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T07:51:28.767

创建的 .war 文件应该上传到 Java 应用服务器，例如[Tomcat](http://tomcat.apache.org/)、Jboss、TC-server、[Glassfish](http://glassfish.java.net/)等。

它不适合在 PHP 环境中运行。

# box-api - box.com api OAuth 身份验证

> ID：14609327
> 
> 赞同：9
> 
> 时间：2013-01-30T16:51:53.103
> 
> 标签：box-api

要么我很密集，要么文档假设我已经知道他们在告诉我什么，但是我需要对 box.com 应用程序进行身份验证进行一些说明。我真的不明白这是怎么回事。当我读到它时：

1.  在用户机器上运行的应用程序向 Box 发送请求，包括所有小秘密（如果用户知道如何阅读代码，这些秘密就不再是所有秘密了）。
2.  用户被定向到 Box 登录页面，然后该页面将用户发送到我的服务器（未指定页面），并附上验证码。
3.  该应用程序以某种方式神奇地从我的服务器获取该代码，并向 Box 发送访问令牌的请求。
4.  Box 将访问令牌发送到我的服务器？
5.  该应用程序再次神奇地从我的服务器获取访问令牌并发送其 APT 请求。

显然我在某个地方迷路了。

而且，为什么我必须让服务器参与该过程？关于制作 JavaScript 应用程序的文章是指对令牌的直接请求。有没有关于那个地方的文档？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-11T08:08:33.630

1.  您在 Box 上注册您的应用程序
2.  注册后，您会在 Box 网站上收到一次 clientId 和 clientSecret
3.  您在应用程序的某处硬编码您的凭据
4.  当您的应用程序第一次需要访问 Box API 时，它应该将用户重定向到`https://www.box.com/api/oauth2/authorize`，并指定您的 clientId、clientSecret 和 redirectURI 作为参数。关于redirectURI 见下文。
5.  box.com 网站打开。用户在 box.com 上的 Web 表单中输入自己的凭据
6.  用户允许您的应用程序通过 box.com 网站上的 API 访问他的文件
7.  Box 使用之前指定的 redirectURI 将用户重定向回您的应用程序。此请求的参数之一是“代码”。这是一个非常短暂（30 秒）的访问代码，仅适用于获取真正的访问令牌。
8.  在接下来的 30 秒内，您的应用程序应该再次调用 Box API 到下一个 URL: `https://www.box.com/api/oauth2/token`，指定之前获得的代码。如果一切正确，您的应用程序会收到一个 access_token、一个 refresh_token 和“过期”值。
9.  现在您的应用程序可以向 Box API 发出请求，每次都指定 access_token
10.  access_token 的过期秒数，在“expires”字段中指定。它应该是大约 3600 秒或 1 小时。每次您的应用程序看到 access_token 已过期时，它应该使用 refresh_token 向 Box 发出另一个请求，并在另外 1 小时内获取新的 access_token。
11.  refresh_token 本身在 14 天后到期

注意：如果您开发桌面应用程序，那么您应该在步骤 4 中为用户打开浏览器，redirectURI 应该类似于`http://127.0.0.1:8080/Callback`并且您应该运行一个小型网络服务器，以便使用步骤 7 中的代码捕获重定向。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T15:53:31.407

Box 要求您在应用程序的配置文件中指定 redirect_uri，并且它必须是 HTTPS URL。

因此，无法将 box 与 google 的[oauth2 文档](https://developers.google.com/accounts/docs/OAuth2) 称为“客户端”或“已安装”的应用程序一起使用，只允许使用“Web 服务器应用程序”。Web Server 应用程序不存在秘密泄露问题，因为只有服务器知道秘密。如果您希望客户端直接发出 api 请求，您可以在 oauth 事务完成后将访问令牌从您的服务器传递到客户端上的 javascript。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T22:31:53.000

在您的问题中，您并不完全清楚您实际尝试生产的内容。

然而，我怀疑您正在尝试使用他们在 API V2 中提供的 OAUTH2 解决方案编写一个需要对盒子进行身份验证的客户端应用程序。

如果这是针对 iPhone 的，例如 BOX 有一个很好的例子来说明如何处理它。

在 WinForm 应用程序中，您需要在 browser1.isnavigating 事件中捕获由框发回的结果代码。

Windows 控制台应用程序为您注册一个自定义 URI 注册以收集代码。

这些都不需要在 API 开发人员 Application on box 中注册，因为您会将请求中所需的重定向传递到 box。

如果这没有为您指明正确的方向并且您正在编写一个 .NET 应用程序，请再次发布，我将尝试进一步澄清。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-14T13:32:16.027

Box 需要某种形式的用户交互，这在我看来是短视的，但请尝试使用模拟用户交互的 Web 服务，然后您可以将令牌保存/传递到您的应用程序以与 Box“云”同步。

# c++ - C++ 异常规范替换

> ID：14609329
> 
> 赞同：3
> 
> 时间：2013-01-30T16:52:03.787
> 
> 标签：c++, exception

经过一番阅读，我意识到，在 C++ 中，异常规范被认为是一件坏事：

```
int f() throw(A, B);  // bad because a lot of reasons 
```

（一些参考资料：[1](http://www.gotw.ca/publications/mill22.htm)、[2](https://softwareengineering.stackexchange.com/questions/114338/why-are-exception-specifications-bad)等）

我不明白的是*如何*替换它。我如何告诉`f()`'s 调用者他必须捕获异常？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T16:55:53.630

怎么样

```
 //throws: A if something is wrong
 //        B if something else is wrong
 int f(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T16:53:38.727

你没有。什么都不说意味着它可以扔任何东西。

我假设你有一些 Java 背景来问这个问题。编译时异常检查是一个失败的 Java 实验。这就是为什么你在其他任何地方都看不到它。

异常处理的一般规则是：尽可能处理。这通常归结为一个`try-catch`非常高的层次，你基本上告诉用户他试图做的任何事情都失败了。能够从异常中恢复并继续操作是非常罕见的。

当然，您应该提供文档说明您的函数会抛出哪些异常。我不认为这可以替代 throw 规范（其目的非常不同）。您应该记录您的函数抛出的异常，**并且可以由调用者*有意义***地处理，而抛出规范必须列出该函数（及其调用的函数）可能出现的**任何异常。**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T16:57:07.467

您可以将其替换为自动文档工具。

此类工具通常能够很好地格式化方法将抛出的异常，例如 doxygen \exception 命令（或 \throw 或 \throws）。假设您的代码的用户阅读了文档，他们将能够找出要捕获的异常。

```
/** 
 * @exception A 
 * @exception B
 */
int f(); 
```

有关更多有用信息，请参阅此问题：[如何记录函数可能抛出的所有异常？](https://stackoverflow.com/questions/4529810/how-to-document-all-exceptions-a-function-might-throw)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T17:20:16.420

> 我如何告诉 f() 的调用者他必须捕获异常？

您认为调用者*必须*捕获异常表明您的设计可能有问题。您是否使用异常来表示非异常情况，例如文件结束？

强制直接调用者捕获所有可能的异常是糟糕的设计。示例：`push_back`标准库容器的成员函数分配内存，这可能会失败。库的设计者并不期望调用者将每一个都包装`push_back`在一个`try/catch`块中。这没有意义。这样做会使代码更难看，更难测试。此外，您将如何从内存不足的情况中恢复？处理一次，在高层次上，几乎是你所能做的。

# mysql - 如何使用 mysqldump 在表语句中保留 dbspace 名称

> ID：14609333
> 
> 赞同：0
> 
> 时间：2013-01-30T16:52:07.687
> 
> 标签：mysql, mysqldump

## 背景

我们目前基本上像这样转储我们的数据库：

```
mysqldump --complete-insert --opt --hex-blob --all-databases -u -p 
```

转储看起来像这样：

```
USE `DB1`

-- Table structure for table `MYTABLE`
DROP TABLE IF EXISTS `MYTABLE`
CREATE TABLE `MYTABLE`
...
INSERT INTO `MYTABLE` ...

-- Table structure for table `NEXTABLE`
...

USE `DB2`

-- Table structure for table `MYTABLE`
DROP TABLE IF EXISTS `MYTABLE`
CREATE TABLE `MYTABLE`
...
INSERT INTO `MYTABLE` ...

-- Table structure for table `NEXTABLE` 
```

## 问题

在某些恢复场景中，我们需要从备份中提取特定表。我们可能会这样做：

```
cat backup | sed -n -e '/Table structure for table .MYTABLE.$/,/Table structure for table .NEXTABLE.$/p' | mysql -u -p DB2 
```

因为单个表语句不限定 dbspace，所以在这种情况下，表信息`DB1.MYTABLE`将被提取，因此`DB2`将使用来自的备份填充`DB1`

## 问题

有没有办法让备份来限定每个表语句上的 dbspace 名称，以便在`USE`这种情况下不需要该语句？例如

```
USE `DB2`

-- Table structure for table `DB2`.`MYTABLE`
DROP TABLE IF EXISTS `DB2`.`MYTABLE`
CREATE TABLE `DB2`.`MYTABLE`
...
INSERT INTO `DB2`.`MYTABLE` ...

-- Table structure for table `DB2`.`NEXTABLE` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T16:26:28.640

没有答案，似乎没有办法将空间名称添加到转储中，我被迫以不同的方式扫描转储。另请注意，这是一种恢复方案，因此我们不能简单地更改已转储数据库的方式，因为此时为时已晚。

由于空间中的表名是唯一的，因此我最终要做的是首先隔离转储中的 dbspace 指令，然后隔离该表。

**使用它来将表从 dump.sql 恢复到它来自的相同空间：**

```
sed  -n '/^USE .SPACENAMEHERE.;$/,/^USE .*$/p' dump.sql | sed -E -n '/^(USE .*;|-- Table structure for table .TABLENAMEHERE.)$/,/^-- Table structure for table /p' | mysql -u -p 
```

您将`SPACENAMEHERE`用 dbspace 名称和`TABLENAMEHERE`表名替换 。因为 sed 的这种用法将`USE`在输出中包含语句，所以我们不需要在 mysql 命令行上限定要连接到哪个数据库。只要用户有权“使用”该空间，它就可以工作。但是，如果您想将它插入到不同的数据库空间（即临时），那么您将使用它。

**使用它来将表从 dump.sql 恢复到不同的空间（例如临时空间）：**

```
sed  -n '/^USE .SPACENAMEHERE.;$/,/^USE .*$/p' dump.sql | sed -E -n '/^-- Table structure for table .TABLENAMEHERE.$/,/^-- Table structure for table /p' | mysql -u -p DESTINATIONSPACE 
```

# php - Paypal 沙盒令牌已过期

> ID：14609335
> 
> 赞同：0
> 
> 时间：2013-01-30T16:52:19.783
> 
> 标签：php, paypal, sandbox

以前这一切正常，但我认为 paypal iv 已经做了一些改变，现在我不知道如何让它工作。我总是得到这样的回应：

“此快速结帐会话已过期。令牌值不再有效。”

```
array(9) {
["TIMESTAMP"]=>
string(28) "2013%2d01%2d30T16%3a47%3a32Z"
["CORRELATIONID"]=>
string(13) "1c384dff48bb7"
["ACK"]=>
string(7) "Failure"
["VERSION"]=>
string(6) "76%2e0"
["BUILD"]=>
string(7) "4181146"
["L_ERRORCODE0"]=>
string(5) "10411"
["L_SHORTMESSAGE0"]=>
string(54) "This%20Express%20Checkout%20session%20has%20expired%2e"
["L_LONGMESSAGE0"]=>
string(103) "This%20Express%20Checkout%20session%20has%20expired%2e%20   %20Token%20value%20is%20no%20longer%20valid%2e"
["L_SEVERITYCODE0"]=>
string(5) "Error"
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T19:32:27.153

当我在测试期间遇到此错误时，这是​​因为我使用他们刚刚完成付款时使用的相同令牌将客户重定向回 Express Checkout。确保您不会意外将客户退回或重复使用之前获得的令牌。请记住，它们会在 30 分钟后过期 - 最好在客户返回您的网站并尝试重定向回 PayPal 的任何时候设置一个新令牌。

我的应用程序中的循环是由我的退货页面代码中的错误引起的，该错误通过 301 重定向将客户发送回 PayPal，而不是确认已完成付款。就 PayPal 而言，该令牌已完成，他们认为他们已经摆脱了我。但是当行为在我的浏览器中激活时，因为我使用的是 301 重定向，我从未注意到我什至在返回 PayPal 之前返回了我的网站。

希望有帮助。

# c++ - 未编译包含 WinMain 的 Cpp 文件

> ID：14609339
> 
> 赞同：0
> 
> 时间：2013-01-30T16:52:29.223
> 
> 标签：c++, visual-studio

我有一个名为 AquaMain.cpp 的文件

```
#include "AquaGame.h"

using namespace Aqua;

#ifdef _WIN32

int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nShowCmd)
{
     AquaGame::get()->init();

     return AquaGame::get()->run();
}

#endif 
```

该文件位于静态库中。

当我尝试编译使用此静态库的项目时，构建失败并出现此错误

> 1>MSVCRTD.lib(crtexew.obj) : 错误 LNK2019:函数 _ _tmainCRTStartup*中引用的未解析外部符号 WinMain@16*

文件 AquaMain.cpp 没有被编译我不知道为什么......

如果我将 WinMain 函数移动到可执行项目，则该函数已编译并且一切正常，但我希望 WinMain 位于静态库中。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:10:17.983

您需要将您的 WinMain 声明为`extern "C"`

```
extern "C" int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nShowCmd)
{
     AquaGame::get()->init();

     return AquaGame::get()->run();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T17:23:38.843

尽管 AquaMain.cpp 具有扩展名 .cpp，但 Visual Studio 2012 已将其用作标头，因为 AquaMain.cpp 属性页将“项目类型”字段设置为 C/C++ 标头。

将字段更改为 C/C++ 编译器修复了错误。

# c# - c#串口通信：操作接收到的数据

> ID：14609346
> 
> 赞同：0
> 
> 时间：2013-01-30T16:52:44.690
> 
> 标签：c#, serial-port

我正在从我的 c# 应用程序上的微控制器串行接收数据。我正在使用以下简单代码：

```
private void comPort_DataReceived(object sender, SerialDataReceivedEventArgs e){
    RxString = comPort.ReadExisting();
    this.Invoke(new EventHandler(DisplayText));
}

private void DisplayText(object sender, EventArgs e){
    richTextBox1.AppendText(RxString);
} 
```

我收到的正是我从微控制器发送的内容，但问题是我无法修改接收到的字符串。（例如我试图做 `char[] externalModeMsg_array = RxString.ToCharArray();`）但没有成功:(

谁能告诉我我在做什么错误。我应该以不同的方式阅读以及如何操作接收到的字符串（RxString）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-30T19:44:03.583

```
richTextBox1.Invoke((MethodInvoker)(() => richTextBox1.AppendText = RxString); 
```

这可能对你有些用处。

最好的，保罗

# google-chrome - Firefox 是如何详细实现 HSTS 的？

> ID：14609347
> 
> 赞同：4
> 
> 时间：2013-01-30T16:52:47.860
> 
> 标签：google-chrome, firefox, https, strict, transport

我正在详细研究 Firefox 和 Chrome 如何实现 HSTS（HTTP 严格传输安全）。

事实证明，他们有一个预定义的列表，其中包含一些已经实施 HSTS 的站点。这可以在[这里](https://src.chromium.org/viewvc/chrome/trunk/src/net/base/transport_security_state_static.json)和/或[这里](http://src.chromium.org/viewvc/chrome/trunk/src/net/base/transport_security_state.cc?revision=94091&view=markup)看到。而且这些列表似乎以某种方式与源代码本身相关联，这在某种程度上是有意义的……但是 Firefox 和 Chrome 如何处理我自己的 HSTS 标头？他们如何以及在哪里存储我的 URL、我的最大年龄以及我是否包含子域？我无法在 about:config 或类似...中找到它。

所以也许有人比我更了解这个问题，我只是好奇（：谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T06:11:23.903

请参阅[http://hg.mozilla.org/mozilla-central/file/20bbf73921f4/netwerk/protocol/http/nsHttpChannel.cpp#l1072](http://hg.mozilla.org/mozilla-central/file/20bbf73921f4/netwerk/protocol/http/nsHttpChannel.cpp#l1072)然后[http://hg.mozilla.org/mozilla-central/file/20bbf73921f4/ security/manager/boot/src/nsStrictTransportSecurityService.cpp#l249](http://hg.mozilla.org/mozilla-central/file/20bbf73921f4/security/manager/boot/src/nsStrictTransportSecurityService.cpp#l249)调用[http://hg.mozilla.org/mozilla-central/file/20bbf73921f4/security/manager/boot/src/nsStrictTransportSecurityService.cpp#l147](http://hg.mozilla.org/mozilla-central/file/20bbf73921f4/security/manager/boot/src/nsStrictTransportSecurityService.cpp#l147)

所以数据最终存储在权限管理器中，这是每个主机信息存储在 Firefox 中的正常位置。我认为权限管理器将其状态存储在 中`permissions.sqlite`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-17T10:29:11.600

想要强制执行的站点会`HTTP Strict Transport Security (HSTS)`发送一个标头作为响应 -`Strict-Transport-Security: max-age=31536000` 最长期限是它到期的时间。它在每个请求上发送，以便每次请求时它都会更新到更多时间。

浏览器（我只尝试过 Firefox）与它一起存储这些数据，并且每次访问该站点时都会使用它。即使对于隐身模式也是如此。如果您之前曾以非隐身模式访问过该站点，那么即使您现在尝试以隐身模式打开该站点，该站点的详细信息也会被保存和使用。

对于 firefox，此数据存储`SiteSecurityServiceState.txt`在您的 firefox 配置文件夹中名为的文件中。您可以`about:support`在浏览器中输入，然后选择“在文件夹中显示”以打开您的个人资料文件夹，您可以在其中找到该文件。

我不确定预定义的站点，但上面是为 firefox 更新普通站点 HSTS 详细信息的文件。

更多详细信息 -[了解 HTTP 严格传输安全 (HSTS)](http://opensourceforgeeks.blogspot.in/2017/03/understanding-http-strict-transport.html)

PS：以上链接指向我的个人博客，其中包含有关 HSTS 的更多详细信息。

# android - android，获取屏幕的像素大小？

> ID：14609353
> 
> 赞同：0
> 
> 时间：2013-01-30T16:53:01.290
> 
> 标签：android, resolution

我正在为分辨率为 1280 x 800 的平板电脑制作应用程序，我想要为其定制图形。但是当我截取屏幕截图时，分辨率是 1024x600，这是为什么呢？我会制作多大尺寸的背景图片？！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T17:05:12.003

正如这里提到的：http: [//developer.android.com/reference/android/util/DisplayMetrics.html](http://developer.android.com/reference/android/util/DisplayMetrics.html) 如果你想要你的屏幕像素，你可以写

```
DisplayMetrics metrics = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(metrics); 
```

然后，您可以致电：

```
int width = metrics.widthPixels;
int height = metrics.heightPixels; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T17:02:02.663

在模拟器中，它实际上已调整大小以适合您的屏幕，并采用您的屏幕分辨率，您的代码或图像没有任何问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T17:22:06.827

屏幕截图尺寸可能与分辨率不同。

```
you need to make graphics with 1280 x 800. 
```

拍摄的屏幕截图取决于它的创建方式，它不必与显示器的分辨率相同。

# javascript - 在不执行事件的情况下找到（这个）？

> ID：14609360
> 
> 赞同：-1
> 
> 时间：2013-01-30T16:53:18.463
> 
> 标签：javascript, jquery

我有多个类型为 aud 的 div。div没有ID。我无法执行点击功能，然后使用 (this)，因为它必须在页面加载时使用。

每个 div 都有一个名为 file 的属性，我将其分配给一个变量，然后将其放入 html5 音频标签中。我需要 SRC 对 div 是唯一的。

```
 var item = $('.type-aud');
        path = item.attr('file'),
        html = '<audio controls><source src="'+path+'" type="audio/mpeg" class="audio"></audio>',
        playerClass = item.find('.audio');

    if (!playerClass.hasClass('audio')) {
        item.append(html);          
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T16:54:01.993

只需[`.each()`](http://api.jquery.com/each/)在您本来会使用的地方使用`.click()`.

```
$('.type-aud').each(function ()
{
    var item = $(this);
    // audio tag business here
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T16:57:13.540

```
$('.type-aud').each(function(i,ele) {
    var item = $(ele),
        path = item.attr('file'),
        html = '<audio controls><source src="'+path+'" type="audio/mpeg" class="audio"></audio>',
        playerClass = item.find('.audio');

    if (!playerClass.is('.audio')) item.append(html);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T16:58:40.667

您可以循环所有具有类 .type-aud 的 div，然后选择其文件属性

```
$('.type-aud').each(function() {
 var item = $(this);
        path = item.attr('file'),
        html = '<audio controls><source src="'+path+'" type="audio/mpeg" class="audio"></audio>',
        playerClass = item.find('.audio');

    if (!playerClass.hasClass('audio')) {
        item.append(html);          
    }
}); 
```

# javascript - 使用javascript在数组中查找StockNo

> ID：14609374
> 
> 赞同：0
> 
> 时间：2013-01-30T16:53:55.433
> 
> 标签：javascript, arrays

我试图从 Javascript 中的 Array 中找到一个值。我有一个名为 myStockList 的数组，其中有超过 5000 条记录。我有一个名为 myStockNo 的变量，我想检查该库存号是否在数组中。这仅适用于数组中的第一个 StockNo，然后停止。我究竟做错了什么？

这是我的代码：

```
 var myStockNo = '376898';

for (var i = 0; i <= myStockList.length; i++)
    {
        if(myStockNo == myStockList[i])
            {
               alert("StockNo found"); 
            }

    else
            {
                alert("StockNo not found");
                break ;
            }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:56:37.617

您可以[`Array.indexOf()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)为此使用：

```
if (myStockList.indexOf(myStockNo) > -1) {
    alert("StockNo found");
} else {
    alert("StockNo not found");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T17:12:42.137

查看此链接，希望这对您有用...

```
var myStockList=new Array("376891","376892","376893","376894","376895","376896","376897","376898","376899","376898");
var myStockNo = '376898';

for(var i=0; i<=myStockList.length-1; i++)
{
    if(myStockNo==myStockList[i])
    {
        alert("Stock Number Found");
    }
else
{
    alert("Stock Number Not Found");
}
} 
```

# python - 具有存在限制的 SQLAlchemy 选择

> ID：14609376
> 
> 赞同：2
> 
> 时间：2013-01-30T16:53:59.037
> 
> 标签：python, sql, sqlalchemy

我有一个有 4 列（1 PK）的表，我需要从中选择 30 行。在这些行中，两列（A 列和 B 列）必须存在于另一个表中（8 列，1 PK，2 列是 A 和 B）。

第二个表很大，包含数百万条记录，这足以让我知道是否存在包含 col 值的单行。第一张桌子的A和B。

我正在使用下面的代码：

```
query = db.Session.query(db.Table_1).\
        filter(
            exists().where(db.Table_2.col_a == db.Table_1.col_a).\
                     where(db.Table_2.col_b == db.Table_2.col_b)
        ).limit(30).all() 
```

这个查询让我得到了我想要的结果，但是我担心它可能会有点慢，因为它并不意味着`a limit`条件`exists()`起作用，也不意味着它`select 1`只是一个`select *`.

```
exists() does not accept a .limit(1) 
```

如何限制存在以使其不查找整个表，从而使该查询运行得更快？

*   我需要来自 Table_1 的 n 行**，**其中**2 列存在于****Table_2**的记录中

 **谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T00:29:43.410

[您可以使用此处](http://docs.sqlalchemy.org/en/latest/core/selectable.html?highlight=exists#sqlalchemy.sql.expression.exists)提到的更明确的形式来执行“选择 1” ，即

```
exists([1]).where(...) 
```

然而，虽然我一直是一个长期顽固的“选择 1”类型的人，但后来我了解到“1”与“*”的使用现在[是一个神话](https://stackoverflow.com/a/1406497/34549)（[更多](http://www.dbasupport.com/forums/showthread.php?28741.html)/[更多](http://justoracle.blogspot.com/2006/12/count-vs-count1.html)）。

exists() 也是 select() 的一个包装器，所以你可以通过先构造 select() 来获得一个 limit()：

```
s = select([1]).where(
         table1.c.col_a == table2.c.colb
       ).where(
         table1.c.colb == table2.c.colb
       ).limit(30)
s = exists(s) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-04T21:43:19.587

```
query=select([db.Table_1])
query=query.where(
     and_(
           db.Table_2.col_a == db.Table_1.col_a,
           db.Table_2.col_b == db.Table_2.col_b
          )
     ).limit(30)

result=session.execute(query) 
```**

# c# - Windows 窗体 - 从窗体内的面板检测按钮单击

> ID：14609380
> 
> 赞同：1
> 
> 时间：2013-01-30T16:54:06.683
> 
> 标签：c#, winforms, visual-studio-2010

我已经`Windows Form`命名了 -`Form1`在里面`Form1`我有一个名为`panel1`. 我使用这个面板只是为了添加`buttons`他。目前正好有 9 个`buttons`，但如果这与我当前的问题有关，我打算动态更改它们的数量。我需要的是检测何时单击此面板中的按钮的方法（我也有其他按钮，但它们位于`Form1`面板外部）并且还确切知道单击了哪个按钮。我试过这个：

```
private void panel1_Click(object sender, EventArgs e)
        {
            MessageBox.Show("HI" + sender);
        } 
```

正如你所看到的，它并不多，但足以看出我不能使用`pnael1's_click`event. 使用此代码，当我单击面板中除按钮之外的任何位置时，我会收到消息框。那我该怎么做。是否可以从内部进行操作，`panel1`或者我应该使用另一种方法对这些按钮进行分组，但重要的是能够保持现在在其中`panel1`的按钮与我可能（实际上我确实拥有）的其他按钮之间的区别？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T17:08:50.230

创建动态按钮时，您注册该按钮实例的*Click*事件并附加到事件处理程序（单个处理程序可以处理所有按钮的单击事件）：

```
var dynamicButton1 = new Button();
dynamicButton1.Click += MyButtonClickHandler; 
```

只要`MyButtonClickHandler`有一个适合`Click`事件的签名（即任何返回`void`和接受 an`object`和 an的方法`EventArgs`，只要按钮实例存在，处理程序就应该响应动态按钮的点击事件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T16:57:48.437

只要您不随时间动态添加控件，并且在表单初始化后按钮的数量是固定的，您就可以使用它为面板中的所有按钮添加点击事件处理程序：

```
foreach (var button in panel.Controls.OfType<Button>())
{
    button.Click += HandleClick;
} 
```

# cluster-analysis - 同时聚类结构化（数字）和文本数据

> ID：14609382
> 
> 赞同：1
> 
> 时间：2013-01-30T16:54:13.080
> 
> 标签：cluster-analysis, mahout

伙计们，我有一堆有标题和摘要的文件（大约 200k）。每个文档还有其他可用的元数据，例如类别 - （只有烹饪、健康、锻炼等之一）、类型 - （只有幽默、动作、愤怒之一）等。元数据结构良好，所有这些都是可用的在 MySql 数据库中。

当她在我们的网站上阅读这些文档之一时，我需要向我们的用户展示相关文档。我需要为产品经理提供标题、摘要和元数据的权重，以试验这项服务。

我计划在这些数据之上运行聚类，但由于所有 Mahout 聚类示例都使用基于数字的**DenseVectors**或**基于 Lucene 的文本矢量化**这一事实而受到阻碍。

这些示例要么仅为数字数据，要么仅为文本数据。以前有没有人解决过这种问题。我一直在阅读 Mahout in Action 一书和 Mahout Wiki，但没有取得多大成功。

我可以从第一原则做到这一点——将所有标题和摘要提取到数据库中，计算 TFIDF 和 LLR，将每个单词视为一个维度，并通过大量代码编写来进行这个实验。这似乎是一个漫长的解决方案。

简而言之，这就是我被困的地方——我是注定要遵循第一原则，还是存在我以某种方式错过的工具/方法。我很想听听那些解决过类似问题的人的意见。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:02:24.240

我实际上正在研究类似的东西，但不需要区分数字和文本字段。

我决定使用[语义](http://code.google.com/p/semanticvectors/)向量包，它完成了关于 tfidf、语义空间向量构建和相似性搜索的所有部分。它使用 lucene 索引。

请注意，如果语义向量不适合您（当然，如果您走那条路） ，您也可以使用[s-space包。](https://github.com/fozziethebeat/S-Space)

我对这种方法的唯一警告是索引部分不能是迭代的。每次添加新文档或修改旧文档时，我都必须为所有内容编制索引。使用语义向量的人说他们有很好的索引时间。但我不知道他们的语料库有多大。我将使用维基百科转储测试这些问题，看看它有多快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T19:15:26.690

您在这里有一个文本相似性问题，我认为您正在正确考虑它。只需遵循有关文本的任何示例。真的有很多代码吗？一旦你计算了文档中的单词，你就完成了。然后将其馈送到您想要的任何集群器中。术语提取不是你用 Mahout 做的事情，尽管肯定有一些库和工具擅长它。

# ruby-on-rails - Git push heroku master 失败且没有错误

> ID：14609383
> 
> 赞同：0
> 
> 时间：2013-01-30T16:54:12.973
> 
> 标签：ruby-on-rails, heroku

在对我的本地 git 存储库进行更改后，我无法推送到 heroku。Heroku 身份验证有效，rails 应用程序启动并运行，github push 仍然有效，heroku push 过去一直有效 - 当`git push heroku master`本地应用程序根目录突然开始失败而没有错误消息时。只能用 打断`Ctrl-C`。

还没有在网上找到任何提示..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:57:52.707

以下是一些尝试调试并查看发生了什么的提示。首先，检查 Heroku 仪表板并查看 Heroku 是否已启动。过去几次下跌。接下来，设置 GIT_SSH=/pathto/yourscript，其中 yourscript 使用 -vvv 调用 ssh（用于详细调试）。看看是不是网络连接问题。第三，查看您的存储库是否有大量提交（例如 Git 索引中的大量二进制文件）。当我们意识到这一点时，我们曾经很慢，并且很好地拆分了它，使其运行良好。我们还提出了 Heroku 支持票，以在我们的 repo 上远程执行 git gc --prune --aggressive，问题为我们解决了。

# php - PHP 警告：缺少 wpdb::prepare() Wordpress 3.5 的参数 2

> ID：14609384
> 
> 赞同：0
> 
> 时间：2013-01-30T16:54:21.413
> 
> 标签：php, wordpress

您好我收到错误消息：

```
Warning: Missing argument 2 for wpdb::prepare(), called in /home/url.com/wp-content/plugins/WPEC-Personalize-3.8/wpec-personalization.php on line 322 and defined in /home/url.com/wp-includes/wp-db.php on line 990 
```

我在第 322 行找到了代码：

```
$add = $wpdb->get_var($wpdb->prepare("SELECT enabled FROM ". $table_name ." WHERE pers_id  = ". $myresults->pers_id." AND product_id = ".$product_id)); 
```

我正在尝试将其更新为新的 wordpress 标准：

```
$add = $wpdb->get_var$wpdb->prepare("SELECT enabled FROM . %d . WHERE pers_id  = . %d. AND product_id = .%s",$table_name, $myresults->pers_id, $product_id)); 
```

我不确定我错过了什么。不幸的是，我不是这个插件的作者，他也没有计划任何更新:-(。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:01:18.383

抛弃周期。也缺少左括号`get_var`

```
$add = $wpdb->get_var( $wpdb->prepare(
    "SELECT enabled FROM %s WHERE pers_id = %d AND product_id = %d",
    $table_name, 
    $myresults->pers_id, 
    $product_id
)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T17:04:07.117

这一行：

```
$add = $wpdb->get_var$wpdb->prepare("SELECT enabled FROM . %d . WHERE pers_id  = . %d. AND product_id = .%s",$table_name, $myresults->pers_id, $product_id)); 
```

似乎缺少括号，并且查询中有一堆句点，我很确定不应该在那里。

```
$add = $wpdb->get_var($wpdb->prepare("SELECT enabled FROM %d WHERE pers_id  = %d AND product_id = %s",$table_name, $myresults->pers_id, $product_id)); 
```

另外，我不是Wordpress 后端的*专家*`sprintf()`，但它似乎在查询中使用了语法，并`%d`表示一个十进制数，这对于表名来说可能不是超级好。

无论如何，如果插件停止为当前版本工作，您可能应该联系插件作者以获得关于代码中实际应该发生的情况的支持。

# c++ - Ogre3D 和 SkyX - 无法让 SkyX 正常工作

> ID：14609386
> 
> 赞同：1
> 
> 时间：2013-01-30T16:54:23.360
> 
> 标签：c++, c, add-on, ogre, ogre3d

我一直试图让 SkyX 工作一段时间，但没有成功。这是我的代码：

```
//THESE ARE GLOBAL
SkyX::BasicController* skyBasicController = NULL;
SkyX::SkyX* mSkyX = NULL;
Ogre::Camera* camera;
...

    Ogre::SceneManager *sceneManager = ogreMain.getRoot()->createSceneManager(
            Ogre::ST_GENERIC, "MainSceneManager");
    Ogre::SceneNode *rootSceneNode = sceneManager->getRootSceneNode();

    Ogre::ResourceGroupManager& resGrpMgr =
            Ogre::ResourceGroupManager::getSingleton();

    Ogre::String terrainResGrpName = "Terrain";
    resGrpMgr.createResourceGroup(terrainResGrpName);
    resGrpMgr.addResourceLocation(".\\Media\\Terrain\\programs", "FileSystem",
            terrainResGrpName, 0);
    resGrpMgr.addResourceLocation(".\\Media\\Terrain\\scripts", "FileSystem",
            terrainResGrpName, 0);
    resGrpMgr.addResourceLocation(".\\Media\\Terrain\\textures", "FileSystem",
            terrainResGrpName, 0);

    // The function 'initialiseResourceGroup' parses scripts if any in the locations.
    resGrpMgr.initialiseResourceGroup(terrainResGrpName);

    // Files that can be loaded are loaded.
    resGrpMgr.loadResourceGroup(terrainResGrpName);

    Ogre::String skyResGrpName = "SkyX";
    resGrpMgr.createResourceGroup(skyResGrpName);
    resGrpMgr.addResourceLocation(".\\Media\\SkyX", "FileSystem", skyResGrpName,
            0);

    // The function 'initialiseResourceGroup' parses scripts if any in the locations.
    resGrpMgr.initialiseResourceGroup(skyResGrpName);

    // Files that can be loaded are loaded.
    resGrpMgr.loadResourceGroup(skyResGrpName);

    ogreMain.getWindow()->setActive(true);
    ogreMain.getWindow()->setAutoUpdated(false);
    sceneManager->setAmbientLight(Ogre::ColourValue(.6, .6, .6));
    sceneManager->setShadowTechnique(SHADOWTYPE_STENCIL_ADDITIVE);
    sceneManager->setShadowColour(ColourValue(0, 0, 0));

    camera = sceneManager->createCamera();

    Ogre::SceneNode *camera_node = player_node->createChildSceneNode();
    camera_node->attachObject(camera);
    float viewport_width = 1.0f;
    float viewport_height = 1.0f;
    float viewport_left = (1.0f - viewport_width) * 0.5f;
    float viewport_top = (1.0f - viewport_height) * 0.5f;
    unsigned short lMainViewportZOrder = 100;
    Ogre::Viewport *vp = ogreMain.getWindow()->addViewport(camera,
    lMainViewportZOrder, viewport_left, viewport_top, viewport_width,
        viewport_height);

    vp->setAutoUpdated(true);
    //vp->setBackgroundColour(Ogre::ColourValue(0.2f, 0.2f, 0.2f));

    float ratio = float(vp->getActualWidth()) / float(vp->getActualHeight());
    camera->setAspectRatio(ratio);

    camera->setNearClipDistance(1.5f);
    camera->setFarClipDistance(50000);

    camera->setPosition(0, 6, 26);
    camera->setDirection(0, -1, -6.5f);
...

    skyBasicController = new SkyX::BasicController();
    mSkyX = new SkyX::SkyX(sceneManager, skyBasicController);
    mSkyX->create();
    mSkyX->getVCloudsManager()->getVClouds()->setDistanceFallingParams(
            Ogre::Vector2(2, -1));
    ogreMain.getRoot()->addFrameListener(mSkyX);
    ogreMain.getWindow()->addListener(mSkyX);

    setPreset(mPresets[3]);

    ogreMain.getRoot()->clearEventTimes();

... //some var declarations, then main loop

//BELOW HERE IS TAKEN FROM 2ND DEMO

struct SkyXSettings
{
    /** Constructor
        @remarks Skydome + vol. clouds + lightning settings
     */
    SkyXSettings(const Ogre::Vector3 t, const Ogre::Real& tm, const Ogre::Real& mp, const SkyX::AtmosphereManager::Options& atmOpt,
        const bool& lc, const bool& vc, const Ogre::Real& vcws, const bool& vcauto, const Ogre::Radian& vcwd, 
        const Ogre::Vector3& vcac, const Ogre::Vector4& vclr,  const Ogre::Vector4& vcaf, const Ogre::Vector2& vcw,
        const bool& vcl, const Ogre::Real& vclat, const Ogre::Vector3& vclc, const Ogre::Real& vcltm)
        : time(t), timeMultiplier(tm), moonPhase(mp), atmosphereOpt(atmOpt), layeredClouds(lc), volumetricClouds(vc), vcWindSpeed(vcws)
        , vcAutoupdate(vcauto), vcWindDir(vcwd), vcAmbientColor(vcac), vcLightResponse(vclr), vcAmbientFactors(vcaf), vcWheater(vcw)
        , vcLightnings(vcl), vcLightningsAT(vclat), vcLightningsColor(vclc), vcLightningsTM(vcltm)
    {}

    /** Constructor
        @remarks Skydome + vol. clouds
     */
    SkyXSettings(const Ogre::Vector3 t, const Ogre::Real& tm, const Ogre::Real& mp, const SkyX::AtmosphereManager::Options& atmOpt,
        const bool& lc, const bool& vc, const Ogre::Real& vcws, const bool& vcauto, const Ogre::Radian& vcwd, 
        const Ogre::Vector3& vcac, const Ogre::Vector4& vclr,  const Ogre::Vector4& vcaf, const Ogre::Vector2& vcw)
        : time(t), timeMultiplier(tm), moonPhase(mp), atmosphereOpt(atmOpt), layeredClouds(lc), volumetricClouds(vc), vcWindSpeed(vcws)
        , vcAutoupdate(vcauto), vcWindDir(vcwd), vcAmbientColor(vcac), vcLightResponse(vclr), vcAmbientFactors(vcaf), vcWheater(vcw), vcLightnings(false)
    {}

    /** Constructor
        @remarks Skydome settings
     */
    SkyXSettings(const Ogre::Vector3 t, const Ogre::Real& tm, const Ogre::Real& mp, const SkyX::AtmosphereManager::Options& atmOpt, const bool& lc)
        : time(t), timeMultiplier(tm), moonPhase(mp), atmosphereOpt(atmOpt), layeredClouds(lc), volumetricClouds(false), vcLightnings(false)
    {}

    /// Time
    Ogre::Vector3 time;
    /// Time multiplier
    Ogre::Real timeMultiplier;
    /// Moon phase
    Ogre::Real moonPhase;
    /// Atmosphere options
    SkyX::AtmosphereManager::Options atmosphereOpt;
    /// Layered clouds?
    bool layeredClouds;
    /// Volumetric clouds?
    bool volumetricClouds;
    /// VClouds wind speed
    Ogre::Real vcWindSpeed;
    /// VClouds autoupdate
    bool vcAutoupdate;
    /// VClouds wind direction
    Ogre::Radian vcWindDir;
    /// VClouds ambient color
    Ogre::Vector3 vcAmbientColor;
    /// VClouds light response
    Ogre::Vector4 vcLightResponse;
    /// VClouds ambient factors
    Ogre::Vector4 vcAmbientFactors;
    /// VClouds wheater
    Ogre::Vector2 vcWheater;
    /// VClouds lightnings?
    bool vcLightnings;
    /// VClouds lightnings average aparition time
    Ogre::Real vcLightningsAT;
    /// VClouds lightnings color
    Ogre::Vector3 vcLightningsColor;
    /// VClouds lightnings time multiplier
    Ogre::Real vcLightningsTM;
};

/** Demo presets
    @remarks The best way of determinate each parameter value is by using a real-time editor.
             These presets have been quickly designed using the Paradise Editor, which is a commercial solution.
             At the time I'm writting these lines, SkyX 0.1 is supported by Ogitor. Hope that the Ogitor team will 
             support soon SkyX 0.3, this way you all are going to be able to quickly create cool SkyX configurations.
 */
SkyXSettings mPresets[] = {
    // Sunset
    SkyXSettings(Ogre::Vector3(8.85f, 7.5f, 20.5f),  -0.08f, 0, SkyX::AtmosphereManager::Options(9.77501f, 10.2963f, 0.01f, 0.0022f, 0.000675f, 30, Ogre::Vector3(0.57f, 0.52f, 0.44f), -0.991f, 3, 4), false, true, 300, false, Ogre::Radian(270), Ogre::Vector3(0.63f,0.63f,0.7f), Ogre::Vector4(0.35, 0.2, 0.92, 0.1), Ogre::Vector4(0.4, 0.7, 0, 0), Ogre::Vector2(0.8,1)),
    // Clear
    SkyXSettings(Ogre::Vector3(17.16f, 7.5f, 20.5f), 0, 0, SkyX::AtmosphereManager::Options(9.77501f, 10.2963f, 0.01f, 0.0017f, 0.000675f, 30, Ogre::Vector3(0.57f, 0.54f, 0.44f), -0.991f, 2.5f, 4), false),
    // Thunderstorm 1
    SkyXSettings(Ogre::Vector3(12.23, 7.5f, 20.5f),  0, 0, SkyX::AtmosphereManager::Options(9.77501f, 10.2963f, 0.01f, 0.00545f, 0.000375f, 30, Ogre::Vector3(0.55f, 0.54f, 0.52f), -0.991f, 1, 4), false, true, 300, false, Ogre::Radian(0), Ogre::Vector3(0.63f,0.63f,0.7f), Ogre::Vector4(0.25, 0.4, 0.5, 0.1), Ogre::Vector4(0.45, 0.3, 0.6, 0.1), Ogre::Vector2(1,1), true, 0.5, Ogre::Vector3(1,0.976,0.92), 2),
    // Thunderstorm 2
    SkyXSettings(Ogre::Vector3(10.23, 7.5f, 20.5f),  0, 0, SkyX::AtmosphereManager::Options(9.77501f, 10.2963f, 0.01f, 0.00545f, 0.000375f, 30, Ogre::Vector3(0.55f, 0.54f, 0.52f), -0.991f, 0.5, 4), false, true, 300, false, Ogre::Radian(0), Ogre::Vector3(0.63f,0.63f,0.7f), Ogre::Vector4(0, 0.02, 0.34, 0.24), Ogre::Vector4(0.29, 0.3, 0.6, 1), Ogre::Vector2(1,1), true, 0.5, Ogre::Vector3(0.95,1,1), 2),
    // Desert
    SkyXSettings(Ogre::Vector3(7.59f, 7.5f, 20.5f), 0, -0.8f, SkyX::AtmosphereManager::Options(9.77501f, 10.2963f, 0.01f, 0.0072f, 0.000925f, 30, Ogre::Vector3(0.71f, 0.59f, 0.53f), -0.997f, 2.5f, 1), true),
    // Night
    SkyXSettings(Ogre::Vector3(21.5f, 7.5, 20.5), 0.03, -0.25, SkyX::AtmosphereManager::Options(), true)
};

void setPreset(const SkyXSettings& preset)
{
    mSkyX->setTimeMultiplier(preset.timeMultiplier);
    mBasicController->setTime(preset.time);
    mBasicController->setMoonPhase(preset.moonPhase);
    mSkyX->getAtmosphereManager()->setOptions(preset.atmosphereOpt);

    // Layered clouds
    if (preset.layeredClouds)
    {
        // Create layer cloud
        if (mSkyX->getCloudsManager()->getCloudLayers().empty())
        {
            mSkyX->getCloudsManager()->add(SkyX::CloudLayer::Options(/* Default options */));
        }
    }
    else
    {
        // Remove layer cloud
        if (!mSkyX->getCloudsManager()->getCloudLayers().empty())
        {
            mSkyX->getCloudsManager()->removeAll();
        }
    }

    mSkyX->getVCloudsManager()->setWindSpeed(preset.vcWindSpeed);
    mSkyX->getVCloudsManager()->setAutoupdate(preset.vcAutoupdate);

    SkyX::VClouds::VClouds* vclouds = mSkyX->getVCloudsManager()->getVClouds();

    vclouds->setWindDirection(preset.vcWindDir);
    vclouds->setAmbientColor(preset.vcAmbientColor);
    vclouds->setLightResponse(preset.vcLightResponse);
    vclouds->setAmbientFactors(preset.vcAmbientFactors);
    vclouds->setWheater(preset.vcWheater.x, preset.vcWheater.y, false);

    if (preset.volumetricClouds)
    {
        // Create VClouds
        if (!mSkyX->getVCloudsManager()->isCreated())
        {
            // SkyX::MeshManager::getSkydomeRadius(...) works for both finite and infinite(=0) camera far clip distances
            mSkyX->getVCloudsManager()->create(mSkyX->getMeshManager()->getSkydomeRadius(mRenderingCamera));
        }
    }
    else
    {
        // Remove VClouds
        if (mSkyX->getVCloudsManager()->isCreated())
        {
            mSkyX->getVCloudsManager()->remove();
        }
    }

    vclouds->getLightningManager()->setEnabled(preset.vcLightnings);
    vclouds->getLightningManager()->setAverageLightningApparitionTime(preset.vcLightningsAT);
    vclouds->getLightningManager()->setLightningColor(preset.vcLightningsColor);
    vclouds->getLightningManager()->setLightningTimeMultiplier(preset.vcLightningsTM);

    //mTextArea->setCaption(buildInfoStr());

    // Reset camera position/orientation
    //mRenderingCamera->setPosition(0,0,0);
    //mRenderingCamera->setDirection(0,0,1);

    mSkyX->update(0);
} 
```

我没有使用 ExampleApplication 框架或任何其他框架。我已经根据自己的需要编写了自己的小班课程。

我只能看到闪电，与演示相比，它们似乎太近了。此外，所有闪电的来源始终位于相机的顶部，并随之移动。

在我的场景中，我只有几个盒子和一个连接到其中一个的相机。

我已将 SkyX 0.3.1 编译为单独的 DLL，具有与调试配置集相同的 boost 和 ogre 库（与应用程序，所有配置为调试）。

提到 SkyX 的调试输出如下：

```
Creating resource group Terrain
Added resource location '.\Media\Terrain\programs' of type 'FileSystem' to resource group 'Terrain'
Added resource location '.\Media\Terrain\scripts' of type 'FileSystem' to resource group 'Terrain'
Added resource location '.\Media\Terrain\textures' of type 'FileSystem' to resource group 'Terrain'
Initialising resource group Terrain
Parsing scripts for resource group Terrain
Parsing script Terrain.material
Finished parsing scripts for resource group Terrain
Creating resources for group Terrain
All done
Loading resource group 'Terrain' - Resources: 1 World Geometry: 1
Texture: TerrainAmbientMap.jpg: Loading 1 faces(PF_L8,512x512x1) Internal format is PF_L8,512x512x1.
Texture: TerrainTex0.jpg: Loading 1 faces(PF_R8G8B8,512x512x1) Internal format is PF_X8R8G8B8,512x512x1.
Texture: TerrainTex1.jpg: Loading 1 faces(PF_R8G8B8,512x512x1) Internal format is PF_X8R8G8B8,512x512x1.
Finished loading resource group Terrain
Creating resource group SkyX
Added resource location '.\Media\SkyX' of type 'FileSystem' to resource group 'SkyX'
Initialising resource group SkyX
Parsing scripts for resource group SkyX
Parsing script SkyX.material
Finished parsing scripts for resource group SkyX
Creating resources for group SkyX
All done
Loading resource group 'SkyX' - Resources: 1 World Geometry: 1
Texture: Noise.jpg: Loading 1 faces(PF_R8G8B8,1024x1024x1) Internal format is PF_X8R8G8B8,1024x1024x1.
Texture: SkyX_Starfield.png: Loading 1 faces(PF_A8R8G8B8,512x512x1) Internal format is PF_A8R8G8B8,512x512x1.
Texture: SkyX_Moon.png: Loading 1 faces(PF_A8R8G8B8,512x512x1) Internal format is PF_A8R8G8B8,512x512x1.
Texture: SkyX_MoonHalo.png: Loading 1 faces(PF_A8R8G8B8,512x256x1) Internal format is PF_A8R8G8B8,512x256x1.
Finished loading resource group SkyX
...

Can't assign material _NULL_ to SubEntity of SkyXMeshEnt because this Material does not exist. Have you forgotten to define it in a .material script?
[SkyX] VClouds warning: unregistered camera registered, manual unregistering is needed before camera destruction 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T18:52:19.190

只需删除以下行即可解决问题。显然阴影不适用于 SkyX。

```
sceneManager->setShadowTechnique(SHADOWTYPE_STENCIL_ADDITIVE); 
```

您可以在 SkyX 初始化后使用该行，但我不知道它是否有效。

# mysql - 在 MySQL 中导入增量备份

> ID：14609387
> 
> 赞同：0
> 
> 时间：2013-01-30T16:54:25.687
> 
> 标签：mysql, backup

我正在使用以下命令在`MySQL`

```
mysqldump -uusername -ppassword db_name --flush-logs > D:\dbname_incremental_backup.sql 
```

然而，该`sql`文件与完整备份一样大，显然导入它也需要很长时间。谁能告诉我如何创建**增量备份**并仅从每个增量备份中导入新数据，而不是再次导入整个数据库？

我已经阅读了 dev.mysql.com 中的所有相关文章，但仍然不明白该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T17:05:17.267

`mysqldump`仅创建完整备份。增量备份没有内置功能。

对于那种事情，您可能需要[Percona xtrabackup](http://www.percona.com/doc/percona-xtrabackup/)但这仅适用于 InnoDB 表。这通常不是问题，因为使用 MyISAM 表被认为是极其有害的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-24T05:22:28.757

默认情况下，mysql 转储将删除表，从而无法进行增量更新。如果您打开生成的文件，您将看到如下内容： `DROP TABLE IF EXISTS `some_table_name`;`

[您可以使用--no-create-info](https://dev.mysql.com/doc/refman/5.5/en/mysqldump.html#option_mysqldump_no-create-info)选项创建转储而不转储和创建新表。为了使您的转储对增量导入友好，您还应该使用 --skip-extended-import 它将插入拆分为每行一个插入语句。结合 using `--force`on import 将意味着插入存在的行将失败，但导入将继续。您最终会在日志中看到已经存在的行的错误，但会根据需要插入新行。

您应该可以使用以下命令导出（我还建议不要在命令中输入密码，以免它出现在您的历史记录中） `mysqldump -u username -p --no-create-info --skip-extended-insert db_name --flush-logs > D:\dbname_incremental_backup.sql`

然后，您可以使用以下命令导入： `mysql -u username -p --force db_name < D:\dbname_incremental_backup.sql`

# c# - 从 ASP.NET Web 处理程序 (.ashx) 下载文件时的错误处理

> ID：14609389
> 
> 赞同：7
> 
> 时间：2013-01-30T16:54:32.360
> 
> 标签：c#, javascript, asp.net, download

我有一个网页，用户可以通过 ASP.NET Web 处理程序 ( `.ashx`) 下载 PDF 文件。它的实现方式与此[问题](https://stackoverflow.com/questions/10912164/what-is-the-best-way-to-download-file-from-server)中的答案类似。我遇到的问题是，当我在 JavaScript 中执行此`window.top.location.href = url;`操作时，如果处理程序中抛出异常，我无法真正控制会发生什么。当一切正常时，用户体验是他们基本上停留在他们所在的页面上，并且浏览器告诉他们他们可以下载 PDF 文件。但是，当处理程序中抛出异常时，它们将被重定向到处理程序的 URL 并显示一个空白页面。

以下是一些示例代码，以使其更清晰：

JavaScript：

```
function openPDF() {
    var url = GeneratePDFUrl();
    window.top.location.href = url;
} 
```

处理程序：

```
public override void Process(HttpContext context)
{
    byte[] pdfdata = GetPDFData();
    context.Response.ContentType = "application/pdf";
    context.Response.AddHeader("content-disposition", "attachment; filename=\"" + GetPDFFileName() + "\"");
    context.Response.AddHeader("content-length", pdfdata.Length.ToString());
    context.Response.BinaryWrite(pdfdata);
} 
```

当 GetPDFData() 抛出异常时，就会出现问题。我们正在尽我们所能防止 GetPDFData() 抛出异常，但它是从用户输入生成的，因此我们也在此处处理它，以防出现我们无法/无法预测哪些情况会产生错误。

这是我提出的一种解决方案，但它显示了用户错误文本（而不是空白页）

```
public override void Process(HttpContext context)
{
    try
    {
        byte[] pdfdata = GetPDFData();
        WritePDF(pdfdata, GetPDFFileName()); // Executes code in example above
    }
    catch (Exception e)
    {
        context.Response.Clear();
        context.Response.Write(GetErrorMessage(e));
    }
} 
```

理想情况下，我想向用户显示一个弹出窗口，以便他们留在他们所在的页面上。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T00:05:44.327

首先，在[我的这个答案中](https://stackoverflow.com/a/10912955/159270)，用户询问如何使用 javascript 进行下载。但是，如果您有不需要将其添加到 javascript 的链接，您也可以使用常规下载链接添加它。

现在许多网站使用带有一些文字的页面，上面写着“*现在您的下载将在几秒钟内开始。如果没有开始，请点击这里 bla bla bla* ”。原因之一与您的类似，用户必须知道某些内容将在几秒钟内开始下载，如果没有，那么用户就会理解存在其他额外消息的问题。

通常，当您要发送文件进行下载时，您不再位于页面中，您无法在下载过程中发送消息，或者当文件以 pdf 结尾时，可能不会显示任何内容在网页上。因此，从我的角度来看，如果您确实遇到问题并抛出异常，您需要设计一些步骤来告知用户出现问题 - 例如通知用户*“现在您将收到文件的中间页面” - 如果文件在几秒钟内没有开始下载，请这样做“*

> 但是，当处理程序中抛出异常时，它们将被重定向到处理程序的 URL 并显示一个空白页面。

为避免出现该黑页，您可以在出错时返回该代码，并且用户保持在页面上，但仍然没有收到任何错误消息。

```
Response.TrySkipIisCustomErrors = true;
Response.Status = "204 No Content";
Response.StatusCode = 204;
Response.End(); 
```

异常的替代方法，您可以尝试使用以下命令将他重定向到错误页面

```
Response.Redirect("errorpage.aspx"); 
```

也许你可以在那里发送一些错误ID。

您也可以尝试仅显示一条简单的消息

```
context.Response.ContentType = "text/html";
context.Response.Write("Error downloading file - Please contact with us"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T17:00:46.190

如何设置隐藏 iframe 的 src 而不是设置窗口的 href。然后，您可以对隐藏 iframe 中的返回值做一些诡计，例如：

```
context.Response.Clear();
context.Response.Write("<script>alert('" + GetErrorMessage(e) + "');</script>"); 
```

这个粗略的例子只会提醒错误消息。如果你在同一个域上（我怀疑你是！）那么你可以变得更聪明，而不是警报，调用父级中的方法，例如

```
context.Response.Clear();
context.Response.Write("<script>window.parent.someFunction('" + GetErrorMessage(e) + "');</script>"); 
```

这是我在这样做时发现的一个示例：[Retrieving HTTP status code from loaded iframe with Javascript](https://stackoverflow.com/questions/35240/retrieving-http-status-code-from-loaded-iframe-with-javascript)

它是用于上传，而不是下载，而是相同的概念。

# java - XStream 不显示 CData 标签

> ID：14609390
> 
> 赞同：0
> 
> 时间：2013-01-30T16:54:39.777
> 
> 标签：java, xml, xstream

当我使用 XStream 读取 XML 时，它不显示标记`<![CDATA[`和`]]>`. 我希望 XStream 展示它。

例如：这是“test.xml”的一部分

```
<![CDATA[<b>]]> 
```

如果我在浏览器中显示它，浏览器会正确显示它：

```
<![CDATA[ <b> ]]> 
```

但是当我使用 XStream 阅读和显示 XML 时，我只看到：

```
<b> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T17:15:34.603

如果我没记错的话，每个元素都应该有一个名称和一个值（如果它们作为 Xppdom 对象读入）。我猜你正在看的是价值。与它可能有点不同，因为它是未解析的数据，所以名称可能是“！CDATA”或可能根本没有。在正常情况下：如果你有`<node attr1='val1'> text </node>`，当它被读入时，调用`.getName()`将返回`"node"`，`.getValue()`将返回`text`，`.getAttribute("attr1")`并将返回`"val1"`。

如果您想使用标签打印所有内容，您可以创建一种方法`String formatXppDom(XppDom elem)`来格式化带有标签的可打印字符串。

# sql - 使用交叉表创建数据透视表的正确方法

> ID：14609393
> 
> 赞同：1
> 
> 时间：2013-01-30T16:54:50.487
> 
> 标签：sql, postgresql, heroku, case, crosstab

如何使用交叉表将以下查询转换为数据透视表？

```
select (SUM(CASE WHEN added_customer=false
        THEN 1
        ELSE 0 
        END)) AS CUSTOMERS_NOT_ADDED, (SUM(CASE WHEN added_customer=true
        THEN 1
        ELSE 0 
        END)) AS CUSTOMERS_ADDED, 

        (select (SUM(CASE WHEN added_sales_order=false
                THEN 1
                ELSE 0 
                END))  
        FROM shipments_data
        ) AS SALES_ORDER_NOT_ADDED, 

        (select (SUM(CASE WHEN added_sales_order=true
                THEN 1
                ELSE 0 
                END))  
        FROM shipments_data
        ) AS SALES_ORDER_ADDED,

        (select (SUM(CASE WHEN added_fulfillment=false
                THEN 1
                ELSE 0 
                END))  
        FROM shipments_data
        ) AS ITEM_FULFILLMENT_NOT_ADDED, 

        (select (SUM(CASE WHEN added_fulfillment=true
                THEN 1
                ELSE 0 
                END))  
        FROM shipments_data
        ) AS ITEM_FULFILLMENT_ADDED,

        (select (SUM(CASE WHEN added_invoice=false
                THEN 1
                ELSE 0 
                END))  
        FROM shipments_data
        ) AS INVOICE_NOT_ADDED, 

        (select (SUM(CASE WHEN added_invoice=true
                THEN 1
                ELSE 0 
                END))  
        FROM shipments_data
        ) AS INVOICE_ADDED,

        (select (SUM(CASE WHEN added_ra=false
                THEN 1
                ELSE 0 
                END))  
        FROM shipments_data
        ) AS RA_NOT_ADDED, 

        (select (SUM(CASE WHEN added_ra=true
                THEN 1
                ELSE 0 
                END))  
        FROM shipments_data
        ) AS RA_ADDED,

        (select (SUM(CASE WHEN added_credit_memo=false
                THEN 1
                ELSE 0 
                END))  
        FROM shipments_data
        ) AS CREDIT_MEMO_NOT_ADDED, 

        (select (SUM(CASE WHEN added_credit_memo=true
                THEN 1
                ELSE 0 
                END))  
        FROM shipments_data
        ) AS CREDIT_MEMO_ADDED

FROM shipments_data; 
```

此查询以标准行格式为我提供数据，但是我想将其显示为以下格式的数据透视表：

```
 Added    Not_Added
Customers             100            0
Sales Orders           50           50
Item Fulfillemnts       0          100
Invoices                0          100
... 
```

我正在使用运行 v9.1.6 的 Heroku PostgreSQL

另外，我不确定我的上述查询是否可以优化，或者这是否是糟糕的形式。如果可以优化/改进它，我很想学习如何。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T19:39:10.087

提供的[tablefunc](http://www.postgresql.org/docs/current/interactive/tablefunc.html)模块`crosstab()`可用于 9.1（就像千禧年的任何其他版本一样）。Heroku 不让你安装额外的模块吗？你有没有尝试过：

```
CREATE EXTENSION tablefunc; 
```

有关如何使用它的示例，请参阅[手册](http://www.postgresql.org/docs/current/interactive/tablefunc.html)或此相关问题：
[PostgreSQL Crosstab Query](https://stackoverflow.com/q/3002499/939860)

或者[试试这个搜索](https://stackoverflow.com/questions/tagged/crosstab+postgresql)- 有几个很好的答案和关于 SO 的例子。

为了让您开始（就像大多数方式一样..），使用这个大大简化和重新组织的查询作为`crosstab()`调用的基础：

```
SELECT 'added'::text AS col
      ,SUM(CASE WHEN added_customer    THEN 1 ELSE 0 END) AS customers
      ,SUM(CASE WHEN added_sales_order THEN 1 ELSE 0 END) AS sales_order
      ,SUM(CASE WHEN added_fulfillment THEN 1 ELSE 0 END) AS item_fulfillment
      ,SUM(CASE WHEN added_invoice     THEN 1 ELSE 0 END) AS invoice
      ,SUM(CASE WHEN added_ra          THEN 1 ELSE 0 END) AS ra
      ,SUM(CASE WHEN added_credit_memo THEN 1 ELSE 0 END) AS credit_memo
FROM   shipments_data

UNION ALL
SELECT 'not_added' AS col
      ,SUM(CASE WHEN NOT added_customer    THEN 1 ELSE 0 END) AS customers
      ,SUM(CASE WHEN NOT added_sales_order THEN 1 ELSE 0 END) AS sales_order
      ,SUM(CASE WHEN NOT added_fulfillment THEN 1 ELSE 0 END) AS item_fulfillment
      ,SUM(CASE WHEN NOT added_invoice     THEN 1 ELSE 0 END) AS invoice
      ,SUM(CASE WHEN NOT added_ra          THEN 1 ELSE 0 END) AS ra
      ,SUM(CASE WHEN NOT added_credit_memo THEN 1 ELSE 0 END) AS credit_memo
FROM   shipments_data; 
```

如果您的列已定义`NOT NULL`，您可以进一步简化`CASE`表达式。

如果**性能**至关重要，您可以*在 CTE 中的一次扫描中*获取所有聚合，并在下一步中将值拆分为两行。

```
WITH x AS (
   SELECT count(NULLIF(added_customer, FALSE)) AS customers
         ,sum(added_sales_order::int)          AS sales_order
          ...
         ,count(NULLIF(added_customer, TRUE))  AS not_customers
         ,sum((NOT added_sales_order)::int)    AS not_sales_order
          ...
   FROM   shipments_data
   )
SELECT 'added'::text AS col, customers, sales_order, ... FROM x
UNION  ALL
SELECT 'not_added', not_customers, not_sales_order, ...  FROM x; 
```

我还演示了构建聚合的两种替代方法 - 都建立在所有列都是**`boolean NOT NULL`**. 这两种选择在语法上都更短，但不是更快。在之前的测试中，所有三种方法的表现都差不多。

# java - 如何在没有 Seam 的情况下访问 Hibernate Envers 中的 FacesContext？

> ID：14609394
> 
> 赞同：2
> 
> 时间：2013-01-30T16:54:50.480
> 
> 标签：java, hibernate, jsf, jsf-2, hibernate-envers

我们正在我们的数据库审计项目中实施 Envers，但遇到了障碍。我们不知道如何确定是哪个用户进行了更改。我能找到的所有示例都使用 Seam 及其 Component.getInstance 技术。

*   玻璃鱼 3.1.2.2
*   莫哈拉 2.1.13
*   休眠 4.1.6.Final

这是我们的自定义修订实体

```
@Entity
@RevisionEntity(CustomRevisionListener.class)
public class CustomRevisionEntity {
    @Id
    @GeneratedValue
    @RevisionNumber
    private int id;

    private String login;

    getters/setters...
} 
```

以及自定义修订侦听器

```
public class CustomRevisionListener implements RevisionListener {
    @Override
    public void newRevision(Object revisionEntity) {
        CustomRevisionEntity rev = (CustomRevisionEntity) revisionEntity;

        //how do we get the FacesContext/remote user?

        rev.setLogin("unknown");
    }
} 
```

我们已经尝试过注入和作用域，但没有成功，我们还尝试了这个[ClassLoader 解决方案](https://stackoverflow.com/questions/8007789/can-i-access-facescontext-inside-hibernate-event-listener)，我发现似乎是类似的情况，但 getCurrentInstance() 仍然为空；

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T16:02:20.890

adamw 是正确的，FacesContext.getCurrentInstance() 确实在自定义 RevisionListener 中工作。

我们有一个 javax.servlet.Filter 实现试图在 doFilter() 方法中处理事务，无论出于何种原因导致 FacesContext.getCurrentInstance() 在 RevisionListener 中返回 null。我们昨天出于不同的原因从 web.xml 中删除了它，当我今天早上尝试不使用它的 getCurrentInstance() 时，一切正常。

感谢大家的回复，也许有一天这会对其他人有所帮助。

# git - Git远程覆盖导致两个断开的历史

> ID：14609396
> 
> 赞同：2
> 
> 时间：2013-01-30T16:54:51.797
> 
> 标签：git

我对 Git 很陌生，所以在我知道我想为我的开发存储库使用什么工作流程和结构之前，我一直在玩它。我创建了一个本地存储库，我想用它来替换远程存储库。我目前是唯一一个使用它的人（尽管我在不同的机器上克隆）。

基本上，我创建了一个新的本地存储库并按照我想要的方式得到它。我强制推送到远程存储库以覆盖旧存储库，如下所述： [如何选择使用本地提交覆盖远程存储库？](https://stackoverflow.com/questions/8386996/how-can-i-choose-to-overwrite-remote-repository-with-local-commits)...好吧，除了我使用 URL 而不是来源。

然后我添加了远程存储库并检查它是否有效。

```
$ git remote add origin <url> 
```

我查看了完整的历史记录，最终得到了这样的结果：

![gitk——全部](../Images/f70fe8037bae9ef18816bb26b132a6c8.png)

不好了！所以我删除了遥控器，没有任何变化。现在我有这个独立的历史和不存在的分支。所以然后我尝试了这个：[如何从 Git 中删除无效的远程分支引用？](https://stackoverflow.com/questions/1072171/how-do-you-remove-an-invalid-remote-branch-reference-from-git)

它没有帮助。

```
$ git remote show 
```

显示为空。有什么办法可以撤消这个吗？我不明白仅仅添加一个遥控器会如何严重破坏我的工作目录！

编辑：我刚刚注意到旧历史中有一个分支与新历史不同。另外，我在添加远程存储库后确实进行了获取。我可以看到旧的分支

```
$ git reflog --all 
```

它显示为

```
16903f4 refs/remotes/origin/feature/test-feature@{0}: fetch origin: storing head 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:28:45.380

您想将本地历史记录与远程历史记录合并，还是只保留其中一个？

a) 如果要合并它们，则需要先连接 2 个历史记录。然后我猜是你的朋友`rebase`。`--root`

> --root 重新设置所有可从 到达的提交，而不是用 . 这允许您在分支上重新设置根提交。必须与 --onto 一起使用，并且将跳过已包含在（而不是 ）中的更改。当与 --preserve-merges 一起使用时，所有根提交都将被重写为作为父提交。

[http://www.kernel.org/pub/software/scm/git/docs/git-rebase.html](http://www.kernel.org/pub/software/scm/git/docs/git-rebase.html)

b）如果您只想保留本地更改并删除远程更改：只需删除远程参考：

```
 git push origin :badbranch 
```

如果您需要更多说明，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T17:33:34.107

我通过添加具有相同名称的远程并删除不相似的远程分支来修复它。我认为一个更好的解决方案是不手动删除分支（我已经有了我想要使用的存储库和历史记录），但至少我的问题得到了解决！

1.  如果远程仓库被删除

    ```
    $ git remote add <same remote name> <url to the repo> 
    ```

2.  删除不在“新”存储库中的旧远程分支

    ```
    $ git push <same remote name> --delete <branch name> 
    ```

# javascript - jQuery 函数臃肿且无用？

> ID：14609397
> 
> 赞同：0
> 
> 时间：2013-01-30T16:54:58.447
> 
> 标签：javascript, jquery, html

我有一个功能，当用户单击我页面上的按钮时，X 相关的 div 会删除其类，然后将类应用于新的相应 div。

我已经编写了以下内容，可以根据需要使用，我唯一担心的是它看起来很臃肿，如果我继续添加 div，那么我必须添加更多按钮和更多点击功能。他们是更好的方法吗？

```
$('a.one').click(function(e){
        e.preventDefault();
        if ($('.active').parent().is(':last-child')) return;
        $('.active').removeClass('active').parent().find('div.one').addClass('active');
    });
    $('a.two').click(function(e){
        e.preventDefault();
        if ($('.active').parent().is(':last-child')) return;
        $('.active').removeClass('active').parent().find('div.two').addClass('active');
    });
    $('a.three').click(function(e){
        e.preventDefault();
        if ($('.active').parent().is(':last-child')) return;
        $('.active').removeClass('active').parent().find('div.three').addClass('active');
    }); 
```

[http://jsfiddle.net/R4Cz2/](http://jsfiddle.net/R4Cz2/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T16:58:00.810

**在所有**这些元素上添加一个附加类，然后使用`data-*`属性来存储下一个元素的选择器。所以：

```
<a href="www.test.com" class="yourclass one" data-next="div.two">Test</a>
<a href="www.test.com" class="yourclass two" data-next="div.three">Test</a>
... 
```

然后：

```
$('a.yourclass').click(function(e){
    e.preventDefault();
    if ($('.active').parent().is(':last-child')) return;
    $('.active').removeClass('active').parent().find($(this).data('next')).addClass('active');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T17:08:26.563

由于我不知道实际的 HTML 结构，因此我无法改进代码，下面是我可以使用提供的代码段做的最好的事情：

```
// you can give all these elements a common class name to avoid listing all of them
$('a.one, a.two, a.three').click(function(e){
    e.preventDefault();
    if ($('.active').parent().is(':last-child')) return;

    var $this = $(this);
    var divClassName = 'div';

    if($this.is('.one'))
        divClassName += '.one';
    else if($this.is('.two'))
        divClassName += '.two';
    else if($this.is('.three'))
        divClassName += '.three';

    $('.active').removeClass('active').parent().find(divClassName).addClass('active');
}); 
```

# vmc - vmc 中的未知命令“rails-console”

> ID：14609398
> 
> 赞同：1
> 
> 时间：2013-01-30T16:54:59.927
> 
> 标签：vmc

vmc 运行良好，但“rails-console”命令未知。我的 vmc 版本是 0.4.7，操作系统是 mac 10.7.5。但似乎应该支持这个命令。你知道为什么 rails-console 不适用于我的环境吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T11:13:38.193

通过以下命令卸载 vmc 版本 0.4.7

```
 gem uninstall vmc -v 0.4.7 
```

然后安装 vmc 版本 0.3.21 和 caldecott gem。

```
gem install vmc -v 0.3.21
gem install caldecott 
```

尝试运行以下命令：-

```
vmc rails-console application_name 
```

它对我有用。

# python - 如何对具有相交值列表的对象列表进行分类

> ID：14609407
> 
> 赞同：0
> 
> 时间：2013-01-30T16:55:09.770
> 
> 标签：python, list

我有一个对象列表

```
main_streets = [street1, street2, street3 ...] 
```

每条街道都有一个有序的节点列表

```
street.nodes = [nd1, nd2, nd3] 
```

所有街道在现实生活中都相互跟随（因此它们共享一个开始/结束节点），但 main_streets 列表并不代表这个现实。

我如何订购 main_streets？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T18:03:54.093

如果街道形成一个单一的、连续的链条，那么您可以按如下方式对它们进行排序。首先，创建所有连接街道的对：

```
>>> pairs = [(a, b) for a in main_streets for b in main_streets if a.nodes[-1] == b.nodes[0]] 
```

接下来，确定哪条街是第一条街道：

```
>>> seconds = [pair[1] for pair in pairs]
>>> ordered = [s for s in main_streets if s not in seconds]
>>> if len(ordered) > 1:
>>>     raise Exception("Error: There is not one continuous chain.") 
```

现在建立街道链。

```
>>> unordered = [s for s in main_streets if s not in ordered]
>>> for i in range(len(unordered)):
>>>     for (j, s) in enumerate(unordered):
>>>         if s.nodes[0] == ordered[-1].nodes[-1]:
>>>             ordered.append(unordered.pop(j))
>>>             break 
```

如果链中存在中断（即它们并非全部连接），则`unordered`在迭代完成后仍将包含项目。如果您确实有多个链段，则可以从初始`ordered`列表开始，然后分别为每个项目运行上面的最后一部分。

# jquery - jQuery UI - 可排序列表 - 有限项 - 特殊行为

> ID：14609408
> 
> 赞同：2
> 
> 时间：2013-01-30T16:55:12.707
> 
> 标签：jquery, list, user-interface, max

我是第一次使用 jQuery UI。对于我当前的项目，可排序功能非常方便。我正在尝试构建某种播放列表编辑器。有一堆曲目（列表 1），用户应该能够将它们拖放到最多包含 3 个项目的播放列表（列表 2）。
我已经设法设置了最多 3 个项目，但是使用我当前的解决方案，无法对单个列表中的项目进行排序。当播放列表中的最多 3 个项目达到时，我仍然希望用户对列表项进行排序或删除。

你能给我一个提示吗？

```
$(function() {   $( "#playlist, #tracks" ).sortable({
    connectWith: ".mix",
    cursor: "move",
    handle: ".handle",
    revert: 200,
    opacity: 0.8,
    delay: 50,
    placeholder: "sortable-placeholder",
    stop: function(event, ui) {
        var size = $("#playlist li.track").size();
        $("#music").append(size+" ");
        sizeCheck();
        if (playlistFull) {
            $("#music").append("full ");
            } else { 
            $("#music").append("space ");
            };
        playlistWatcher();
        },
    start: function(event, ui) {
        if (playlistFull) {
            // $(ui.item).sortable('cancel');  // What to do here?
            };
        },
    }).disableSelection();
}); 
```

JSfiddle：http: [//jsfiddle.net/9yzea/2/](http://jsfiddle.net/9yzea/2/)

# module - Opencart在另一个模块中添加模块

> ID：14609410
> 
> 赞同：0
> 
> 时间：2013-01-30T16:55:24.747
> 
> 标签：module, custom-controls, opencart

我有两个模块。

1.  自定义页脚。
2.  见证。

现在我正在尝试在自定义页脚中显示推荐模块。就像我添加的另一个[stackoverflow帖子一样](https://stackoverflow.com/questions/8819839/opencart-how-to-manually-display-a-module-inside-a-template-file/8841843#8841843)

```
// Display testimonial part
        $this->data['testimonial_block'] = $module = $this->getChild('module/testimonial', array(
        'limit' => 5,
        'image_width' => 80,
        'image_height' => 80
        )); 
```

在`"catalog/controller/common/customfooter.php"`之前`$this->render ();`

并`<?php echo $testimonial_block; ?>`在里面添加`customfooter.tpl`

添加后我收到此错误

```
Notice: Undefined index: testimonial_title in C:\xampp\htdocs\magichomegym\catalog\controller\module\testimonial.php on line 6
Notice: Undefined index: testimonial_limit in C:\xampp\htdocs\magichomegym\catalog\controller\module\testimonial.php on line 22 
```

有谁知道我哪里出错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T18:50:56.577

您需要在数组中提供相关数据

```
$this->data['testimonial_block'] = $module = $this->getChild('module/testimonial', array(
    'limit' => 5,
    'image_width' => 80,
    'image_height' => 80,
    'testimonial_title' => 'Title here',
    'testimonial_limit' => 5,
)); 
```

将 5 替换为您想要显示的推荐数量，并将“此处的标题”替换为您想要的标题

# validation - CakePHPform 复选框验证错误未显示，但输入错误

> ID：14609413
> 
> 赞同：-2
> 
> 时间：2013-01-30T16:55:26.323
> 
> 标签：validation, cakephp-2.1

我有一个包含必填字段的表单，一个字段是一个复选框。将显示所有验证错误，但复选框字段没有错误。我安装了 DebugKit-Plugin 并看到，会有一个验证错误，但消息不会显示。

```
class Users extends AppModel {

public $name = 'Users';
public $validate = array(
    'email' => array(
        'notEmpty' => array(
            'rule' => 'notEmpty',
            'message' => 'Bitte geben Sie ihre Email-Adresse ein',
            'allowEmpty' => false,
        ),
        'isUnique' => array(
            'rule' => 'isUnique',
            'message' => 'Diese Adresse ist bereits angemeldet',
        ),
        'email' => array(
            'rule' => array('email',true),
            'message' => 'Bitte geben Sie eine gültige Email-Adresse ein',
            'allowEmpty' => false,
        ),
    ),
    'terms' => array(
            'rule' => array('comparison','!=',0),
            'message' => 'Sie müssen unseren Nutzungsbedingungen zustimmen',
            'allowEmpty' => false,
    ),
    );    
} 
```

形式：

```
<div class="right text-right" id="register_form">
    <?php
    echo $this->Form->create('Users', array('action' => 'register', 'inputDefaults' => array()));
    echo $this->Form->input('gender', array('label' => 'Anrede: &nbsp;', 'class' => 'inputField', 'options' => array('m' => 'Herr', 'f' => 'Frau')));
    echo $this->Form->input('first_name', array('label' => 'Vorname: ', 'class' => 'inputField'));
    echo $this->Form->input('last_name', array('label' => 'Nachname: ', 'class' => 'inputField'));
    echo $this->Form->input('email', array('label' => 'Email: ', 'class' => 'inputField'));
    echo $this->Form->input('terms', array('div' => true, 'type' => 'checkbox', 'value' => 0, 'label' => false, 'before' => ' <label for="UsersTerms">Ich akzeptiere die '.$this->Html->link('AGB', array('controller' => 'pages', 'action' => 'terms')).' </label>'));
    echo $this->Form->submit('Anmelden', array('class' => 'button'));
    echo $this->Form->end();
    ?>
</div> 
```

控制器：

```
public function register() {
    if ($this->Auth->user())
        $this->redirect($this->referer('/'));
    if ($this->request->is("post")) {
        $this->Users->create();
        $this->Users->set(Sanitize::clean($this->request->data));
        #if ($this->Users->validates())
        #    die(debug($this->Users->validationErrors));
        $this->_hash = $this->Auth->password($this->Users->data['Users']['email']);
        $this->_password = $this->__randomString(8, 8);
        $this->Users->set('password', $this->Auth->password($this->_password));
        if ($this->Users->save()) {
            $this->Users->id = $this->Users->getLastInsertID();
            $this->_sendActivationMail();
            $this->Session->setFlash('An die angegebene Emailadresse wurde soeben ein Aktivierungslink versendet.', 'default', array('class' => 'yellow'));
            $this->redirect($this->referer());
        } else {
            $this->Session->setFlash('Ein Fehler ist aufgetreten', 'default', array('class' => 'red'));
        }
    }
} 
```

我尝试使用“$this->Form->error('terms');” 但是当我调试这条线时，如果出现错误，只会有

```
<div class="error_message"></div> 
```

CakePHP 是最后一个版本。从 4 小时开始搜索寻求帮助，但谷歌没有答案。你？

问候 M。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-31T06:53:55.350

如果有人有同样的问题，我可以解决我的问题：

问题是特殊字符“ü”。我试图用 ISO 8859-1 保存我的文件，但它需要用 UTF8 保存。现在将显示错误消息。

# jquery - jQuery 不显示位于用户控件中的文本框的值

> ID：14609416
> 
> 赞同：0
> 
> 时间：2013-01-30T16:55:31.753
> 
> 标签：jquery, asp.net, user-controls

我有这个文本框位于用户控件中的 gridview 内。我正在尝试使用下面的 jQuery 代码检查文本框是否为空。

```
$(document).ready(function () {//when Dom is ready to be used
   $('input[type=submit]').click(function () {
    CheckIfCheckBoxIsChecked(this); //Use the clicked button to proceed
   });
 });

function CheckIfCheckBoxIsChecked(e) {
   var $id = $(e).prop('id'); //get the id of the clicked button
   var $gvid = "";

//Set the name of the gridview
if ($id.indexOf('IT') != -1) {
    $gvid = "contentMain_cklistIT_gvCKList";
}
else if ($id.indexOf('HR') != -1) {
    $gvid = "contentMain_cklistHR_gvCKList";
}
else if ($id.indexOf('Marketing') != -1) {
    $gvid = "contentMain_cklistMarketing_gvCKList";
}
else if ($id.indexOf('Payroll') != -1) {
    $gvid = "contentMain_cklistPayroll_gvCKList";
}
else if ($id.indexOf('Property') != -1) {
    $gvid = "contentMain_cklistProperty_gvCKList";
}

var $AllHM = $('#' + $gvid + ' input[id*="ckHMreq"]:checkbox:checked'); //select only checked checkboxes that have ckHMreq as part of their name 
var n = $AllHM.length;
if (n == 0) {//If there's none, telle the user
    alert('Please check at least one row to proceed');
}
else {//If there's at least one
    $.each($AllHM, function () {//Loop through each of them
        cid = $(this).prop('id');
        var nrow = cid.match('\\d+'); //find the row number

        var ckDpt = $('#' + $gvid + ' input[id*="ckDpt_' + nrow + '"]:checkbox'); //select the appropriate checkbox
        if ($(ckDpt).prop('checked') == true) {// if the checkbox is selected
            var a = $('#contentMain_cklistHR_gvCKList_txtCompletedBy_' + nrow);
            if (a.val() == "") {
                alert('Please enter your name to proceed');
                //more to come...
            }
        }
    });        
} 
```

}

问题是当我输入一些东西时，仍然会弹出警告消息框。唯一不弹出警报的时间是文本框显示来自服务器的文本时（即页面加载时）。

有什么理由吗？

# 编辑

此 HTML 来自浏览器：

```
<input name="_ctl0:contentMain:cklistIT:gvCKList:_ctl2:txtCompletedBy" type="text" id="contentMain_cklistIT_gvCKList_txtCompletedBy_0" /> 
```

除了最后一个字符是 0、1、.. 到 5 之外，它们都是相同的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T17:42:10.350

实际文本框的 is 与 jQuery 用于搜索的值不匹配。

实际文本框的 id 是：

```
id="contentMain_cklistIT_gvCKList_txtCompletedBy_0" 
```

但被检查的 id 是：

```
'#contentMain_cklistHR_gvCKList_txtCompletedBy_' + nrow 
```

（chklist 部分不同 - 一个是 HR，一个是 IT）。

# maven - Maven 多模块加外部测试加 JaCoCo 加声纳

> ID：14609417
> 
> 赞同：0
> 
> 时间：2013-01-30T16:55:33.250
> 
> 标签：maven, sonarqube, jacoco

在我们公司，我们有几个项目模块，每个模块都有几个单元测试，但是我们有基于类而不是模块的系统测试。我们的系统测试使用每个模块的几个类（不是全部）。我们无法计算此测试的集成覆盖率和单元覆盖率。我们想合并系统测试的结果来计算所有产品的覆盖率。

任何人都知道我们如何做到这一点？任何人都可以提供任何带有示例的教程吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T08:10:37.333

您可以在此处找到重现此案例的示例应用程序：[https ://github.com/SonarSource/sonar-examples/tree/master/projects/code-coverage/combined%20ut-it/combined-ut-it-multimodule- maven-jacoco](https://github.com/SonarSource/sonar-examples/tree/master/projects/code-coverage/combined%20ut-it/combined-ut-it-multimodule-maven-jacoco)

这应该可以帮助你。

# c# - FileStream Seek 在第二次调用时对大文件失败

> ID：14609419
> 
> 赞同：3
> 
> 时间：2013-01-30T16:55:34.797
> 
> 标签：c#, large-data-volumes, large-data

我正在处理大文件，从 10Gb 开始。我正在将文件的部分加载到内存中进行处理。以下代码适用于较小的文件（700Mb）

```
 byte[] byteArr = new byte[layerPixelCount];
 using (FileStream fs = File.OpenRead(recFileName))
    {
        using (BinaryReader br = new BinaryReader(fs))
        {
            fs.Seek(offset, SeekOrigin.Begin);

            for (int i = 0; i < byteArr.Length; i++)
            {
                byteArr[i] = (byte)(br.ReadUInt16() / 256);
            }
         }
    } 
```

打开一个10Gb的文件后，第一次运行这个函数就OK了。但第二个`Seek()`抛出`IO`异常：

```
An attempt was made to move the file pointer before the beginning of the file. 
```

数字是：

**fs.Length = 11998628352**

**偏移量 = 4252580352**

**byteArr.Length = 7746048**

我假设 GC`fs`在第二次调用之前没有收集关闭的引用并尝试了

```
 GC.Collect();
    GC.WaitForPendingFinalizers(); 
```

但没有运气。

感谢任何帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T17:00:37.027

我猜这是因为您的有符号整数索引器或`offset`滚动到负值。尝试声明`offset`并且`i`只要。

```
//Offest is now long
long offset = 4252580352;

byte[] byteArr = new byte[layerPixelCount];
using (FileStream fs = File.OpenRead(recFileName))
{
   using (BinaryReader br = new BinaryReader(fs))
    {
        fs.Seek(offset, SeekOrigin.Begin);

        for (long i = 0; i < byteArr.Length; i++)
        {
            byteArr[i] = (byte)(br.ReadUInt16() / 256);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-26T04:19:45.560

我的以下书面代码逻辑适用于超过 4GB 的大文件。需要注意的关键问题是与 SEEK 方法一起使用的 LONG 数据类型。因为 LONG 能够指向超过 2^32 个数据边界。在此示例中，代码首先处理 1GB 块中的大文件，在处理完整个 1GB 大块之后，处理剩余的 (<1GB) 字节。我使用此代码计算超过 4GB 大小的文件的 CRC。（在本例中使用[https://crc32c.machinezoo.com/](https://crc32c.machinezoo.com/)进行 crc32c 计算）

```
private uint Crc32CAlgorithmBigCrc(string fileName)
{
    uint hash = 0;
    byte[] buffer = null;
    FileInfo fileInfo = new FileInfo(fileName);
    long fileLength = fileInfo.Length;
    int blockSize = 1024000000;
    decimal div = fileLength / blockSize;
    int blocks = (int)Math.Floor(div);
    int restBytes = (int)(fileLength - (blocks * blockSize));
    long offsetFile = 0;
    uint interHash = 0;
    Crc32CAlgorithm Crc32CAlgorithm = new Crc32CAlgorithm();
    bool firstBlock = true;
    using (FileStream fs = new FileStream(fileName, FileMode.Open, FileAccess.Read))
    {
        buffer = new byte[blockSize];
        using (BinaryReader br = new BinaryReader(fs))
        {
            while (blocks > 0)
            {
                blocks -= 1;
                fs.Seek(offsetFile, SeekOrigin.Begin);
                buffer = br.ReadBytes(blockSize);
                if (firstBlock)
                {
                    firstBlock = false;
                    interHash = Crc32CAlgorithm.Compute(buffer);
                    hash = interHash;
                }
                else
                {
                    hash = Crc32CAlgorithm.Append(interHash, buffer);
                }
                offsetFile += blockSize;
            }
            if (restBytes > 0)
            {
                Array.Resize(ref buffer, restBytes);
                fs.Seek(offsetFile, SeekOrigin.Begin);
                buffer = br.ReadBytes(restBytes);
                hash = Crc32CAlgorithm.Append(interHash, buffer);
            }
            buffer = null;
        }
    }
    //MessageBox.Show(hash.ToString());
    //MessageBox.Show(hash.ToString("X"));
    return hash;
} 
```

# google-app-engine - App Engine 端点

> ID：14609424
> 
> 赞同：4
> 
> 时间：2013-01-30T16:55:48.617
> 
> 标签：google-app-engine, rest, google-cloud-endpoints

我用 AppEngine 启动了一个新应用程序，我需要一个 REST 服务。

我在看端点，我认为它们正是我需要的。我还阅读了 Google 不建议在生产中使用 Endpoints，但我的应用程序的第一个版本大约要到 4 月才会发布。

您认为 App Engine Endpoints 有多成熟？

你推荐使用它们还是我应该找到另一个 REST 框架。

如果是这样，是否有任何其他类似于 App Engine Endpoints 的 REST 框架？

或者你推荐哪一个，Restlet？或者将它与 Spring MVC 一起使用？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T20:29:45.833

我有点偏见（作为 Google 员工和 App Engine 团队的成员），但我认为 Endpoints 值得一试。关于在生产中使用 Endpoints 的一般免责声明，我们允许一些开发人员在生产中启动，只要他们先与我们交谈。

[我在此处](https://stackoverflow.com/questions/9453561/restful-service-framework-for-appengine/11680605#11680605)为有关 RESTful 开发的相关问题提供了另一个答案。开发人员尝试了 Endpoints 并决定将其用于其他选项。

# javascript - 检测光标是否在内容可编辑的 li 内

> ID：14609433
> 
> 赞同：1
> 
> 时间：2013-01-30T16:56:10.103
> 
> 标签：javascript, jquery, css, contenteditable

`<br>`当您在内容可编辑的 div 中按 Enter键时，我有插入的工作代码。（浏览器有各种默认的插入`<div>`或`<p>`代替）

问题在于，在构建有序或无序列表时，它会破坏按回车键添加另一个列表项的默认行为。所以我的问题是，你能检测到文本插入点是否在列表项中，如果是，禁用处理回车键的 javascript？

工作代码：http: [//jsfiddle.net/kthornbloom/RCdhS/](http://jsfiddle.net/kthornbloom/RCdhS/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T00:21:57.033

您需要对包含选择的节点进行一些 DOM 树检查。这是一个适用于所有主流浏览器的演示：

[http://jsfiddle.net/CeMxs/2/](http://jsfiddle.net/CeMxs/2/)

代码：

```
function isSelectionInsideElement(tagName) {
    var sel, containerNode;
    tagName = tagName.toUpperCase();
    if (window.getSelection) {
        sel = window.getSelection();
        if (sel.rangeCount > 0) {
            containerNode = sel.getRangeAt(0).commonAncestorContainer;
        }
    } else if ( (sel = document.selection) && sel.type != "Control" ) {
        containerNode = sel.createRange().parentElement();
    }
    while (containerNode) {
        if (containerNode.nodeType == 1 && containerNode.tagName == tagName) {
            return true;
        }
        containerNode = containerNode.parentNode;
    }
    return false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T17:16:41.957

[http://jsfiddle.net/RCdhS/2/](http://jsfiddle.net/RCdhS/2/)

```
.on('keypress', 'document', function (e) {
    if (!$('li').focus();) {
    ...
    }
  }
}); 
```

# selenium - Selenium Webdriver 中的“意外错误。好的”

> ID：14609436
> 
> 赞同：0
> 
> 时间：2013-01-30T16:56:17.023
> 
> 标签：selenium, selenium-webdriver

我第一次看到这个错误，我以前从来没有遇到过这个错误，谁能告诉我这个错误是什么？

我所做的唯一新事情是添加这行代码：

```
IWebDriver driver = new FirefoxDriver();
driver.Manage().Timeouts.SetPageLoadTimeout(TimeSpan.FromSeconds(2)); 
```

错误：

```
 Unexpected error. ok

at OpenQA.Selenium.Remote.RemoteWebDriver.UnpackAndThrowOnError(Response errorResponse) in c:\Projects\WebDriver\trunk\dotnet\src\WebDriver\Remote\RemoteWebDriver.cs:line 1002
   at OpenQA.Selenium.Remote.RemoteWebDriver.Execute(String driverCommandToExecute, Dictionary`2 parameters) in c:\Projects\WebDriver\trunk\dotnet\src\WebDriver\Remote\RemoteWebDriver.cs:line 809
   at OpenQA.Selenium.Remote.RemoteWebDriver.InternalExecute(String driverCommandToExecute, Dictionary`2 parameters) in c:\Projects\WebDriver\trunk\dotnet\src\WebDriver\Remote\RemoteWebDriver.cs:line 709
   at OpenQA.Selenium.Remote.RemoteWebElement.Execute(String commandToExecute, Dictionary`2 parameters) in c:\Projects\WebDriver\trunk\dotnet\src\WebDriver\Remote\RemoteWebElement.cs:line 803
   at OpenQA.Selenium.Remote.RemoteWebElement.Click() in c:\Projects\WebDriver\trunk\dotnet\src\WebDriver\Remote\RemoteWebElement.cs:line 329 
```

![在此处输入图像描述](../Images/1d5773851d730dfa938a040150ed584c.png)

# opengl - 着色器中的 OpenGL 纹理插值

> ID：14609437
> 
> 赞同：0
> 
> 时间：2013-01-30T16:56:18.837
> 
> 标签：opengl, textures, interpolation

如何在 GLSL 着色器中插入纹理坐标？

我正在尝试将图像从屏幕尺寸缩小到其原始尺寸的 1/4。这是一个非常简单的过程，但它似乎并不正确。我有一个 FBO，带有一个单一颜色的附件，用作 1/4 屏幕大小的目标。

为了对纹理进行下采样，我要绘制一个简单的全尺寸四边形，其坐标如下：

```
v[0].v.position.x = -1.f; v[0].v.position.y = -1.f; v[0].v.position.z = 0.f;
v[1].v.position.x = -1.f; v[1].v.position.y =  1.f; v[1].v.position.z = 0.f;
v[2].v.position.x =  1.f; v[2].v.position.y = -1.f; v[2].v.position.z = 0.f;
v[3].v.position.x =  1.f; v[3].v.position.y =  1.f; v[3].v.position.z = 0.f; 
```

现在，我的顶点着色器简单地缩放和偏置输入坐标以生成纹理坐标，通过顶点而不需要转换它们，也不需要我将纹理坐标与几何体一起传递，如下所示：

```
#version 420

layout(location = 0) in vec3 attrib_Position;

out vec2 attrib_Fragment_Texture;

void main()
{
    attrib_Fragment_Texture = attrib_Position.xy * 0.5 + 0.5; 

    gl_Position = vec4(attrib_Position.xy, 0.0, 1.0);
} 
```

因此，纹理坐标输出为 *attrib_Fragment_Texture* 将从 0.0 变为 1.0，因为顶点坐标从 -1 变为 1。然而，使用以下着色器对此进行一点测试，似乎表明 uv.x 和 uv.y 只会走从 0.0 到 0.25。我希望它们能从 0.0 插值到 1.0！

```
#version 420

in vec2 attrib_Fragment_Texture;

out vec4 Out_Colour;

void main(void)
{
    vec2 uv = attrib_Fragment_Texture.xy;

    Out_Colour = vec4(uv.x, uv.y, 1.0, 1.0);
} 
```

谁能发现我明显简单的错误/误解可能是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:04:49.423

我怀疑您正在使用原始视口进行渲染，该视口是 FBO 大小的 4 倍，导致大部分图元被剪裁。

# bash - 使用同一行上的两个值迭代文件

> ID：14609441
> 
> 赞同：0
> 
> 时间：2013-01-30T16:56:21.750
> 
> 标签：bash, shell, unix

我需要传递一系列作为 c++ 软件参数的值。所以我写了这个脚本：

```
while read randomNumbers; do
                lambda = $randomNumbers | cut -f1 -d ' '
                mi = $randomNumbers | cut -f2 -d ' '
                ./queueSim mm1-queue $lambda $mi 
done < "randomNumbers" 
```

其中第一个参数是文件“randomNumbers”中每一行的第一个值，第二个值是第二个值（当然）。我遇到了段错误和“找不到命令”。

如何分配从行中获得的 lambda 和 mi 值并将此变量传递给 c++ 软件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T17:10:44.223

没必要剪。让 read 为你分行：

```
while read lambda mi; do
    ./queueSim mm1-queue $lambda $mi 
done < randomNumbers 
```

请注意，它也通常与 IFS 结合使用，以将输入行拆分到不同的字段上。例如，要解析`/etc/passwd`（用冒号分隔的文件），您会经常看到：

```
while IFS=: read username passwd uid gid info home shell; do ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T17:08:50.983

我建议分配这样的值：

```
lambda=$(echo $randomNumbers | cut -f1 -d ' ')
mi=$(echo $randomNumbers | cut -f2 -d ' ') 
```

按照您的操作方式，您实际上尝试运行一个命令，该命令的名称与`$randomNumbers`.

**编辑：** 另一件事：由于您的列由空格字符分隔，您也可以将整行读入一个数组，其元素也由空格分隔。实现这一目标的一种方法是：

```
columns=( $(echo "$randomNumbers" | grep -o "[^ ]*") )
./queueSim mm1-queue ${columns[@]::2} 
```

第一行分别匹配所有不包含任何空格的子字符串，并将它们放入数组`columns`中。第二行与您的实现中的对应行执行相同的操作：将前两列作为参数插入。由于是通过切片完成的：您获取整个数组`${columns[@]}`，但通过应用`::2`右侧的边界来选择它的某个子序列，该边界返回`columns`从左侧开始的每个元素（位置`0`），而不是在位置上`>=2`。

# ruby - 如何在 ruby 项目中使用 SettingsLogic gem？

> ID：14609443
> 
> 赞同：3
> 
> 时间：2013-01-30T16:56:27.067
> 
> 标签：ruby, settingslogic

根据[GitHub](https://github.com/binarylogic/settingslogic)页面，可以在 Ruby 项目（Rails 之外）中使用 SettingsLogic，但没有文档向您展示如何使用。

谁能向我提供一些示例代码，说明它如何与缺少 Rails.env 之类的东西一起工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T17:10:27.150

这是一个源自[specs](https://github.com/binarylogic/settingslogic/tree/master/spec)的“hello world”示例。首先配置文件*settings.yml*

```
foo: 'hello world' 
```

和代码：

```
require 'settingslogic'

class Settings < Settingslogic
  source "#{File.dirname(__FILE__)}/settings.yml"
end

p Settings.foo    # => "hello world" 
```

# php - 如何使用自定义变量更改 url 变量

> ID：14609450
> 
> 赞同：0
> 
> 时间：2013-01-30T16:56:38.413
> 
> 标签：php, url, mod-rewrite, seo

> **可能重复：**
> [如何：用 PHP 重写 URL？](https://stackoverflow.com/questions/1039725/how-to-url-re-writing-in-php)

我的意图是用另一个变量（自定义文本）更改 URL 上传递的变量（id）。为了更清楚，我想改变：

从

```
www.mysite.com/page.php?id=14 
```

至

```
www.mysite.com/page.php?id=the_best_product_for_them 
```

甚至更好

```
www.mysite.com/product/the_best_product_for_them 
```

我的数据库中已经有一个表将 id='14' 与文本 'the_best_product_for_them' (id, product_name) 相关联

我想这就是 wordpress 对永久链接所做的事情。我也知道如何使用 .htaccess 文件手动执行此操作，但我想动态执行此操作。我需要的是一个从哪里开始的方向以及实现这一目标所需的东西。

服务器是 Apache，代码是 PHP。

非常感谢，朱利奥

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:02:09.950

我想你会在这里找到解决方案：[Url Mod-Rewrite Get new Page with ID](https://stackoverflow.com/questions/9659370/url-mod-rewrite-get-new-page-with-id)

```
# catch URL and  rewrite to index.php
RewriteRule ^product/([A-Za-z0-9-]+)/?$ index.php?id=$1 [NC,L] 
```

*   确保你的 Apache 服务器上有 mod_rewrite

# android - 从 http 格式化响应数组

> ID：14609454
> 
> 赞同：0
> 
> 时间：2013-01-30T16:56:50.017
> 
> 标签：android, parsing, android-asynctask, httpresponse, android-maps-v2

请帮助我格式化来自 http 的回复。使用 AsynckTask 发布

```
protected String doInBackground(String... params) {
        // TODO Auto-generated method stub
         HttpClient httpclient = new DefaultHttpClient();

            HttpPost httppost = new HttpPost("http/test.php");

            try {
                // Add user name and password
             String latitude = "44.754535";
             String longitude = "11.178589";
             String range = "222";

               List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair(2);
                nameValuePairs.add(new BasicNameValuePair("latitude", latitude));
                nameValuePairs.add(new BasicNameValuePair("longitude",longitude));
                nameValuePairs.add(new BasicNameValuePair("range", range));

                httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

                // Execute HTTP Post Request
                Log.w("SENCIDE", "Execute HTTP Post Request");
                HttpResponse response = httpclient.execute(httppost);

                String str = inputStreamToString(response.getEntity().getContent()).toString();
                Log.w("SENCIDE", str);

                if(str.toString().contains("da"))
                {

                content=str.toString();

                }else
                {

                 System.out.print(str);             
                }

            } catch (ClientProtocolException e) {
             e.printStackTrace();
            } catch (IOException e) {
             e.printStackTrace();
            }
            return content;
        } 
```

日志是这个：

```
`{"success":0,"error_message":" 16.07 km da Motta"} 
```

`

所以目标是在不改变 php 部分的情况下只有**16.07 公里 da Motta 。**看到数组中有 3 个项目，有一些想法可以从数组中获取第 3 个对象。提前Tnx。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:59:17.603

您从 server 获得 JSONObject 作为响应。您可以从中获取值：

```
// convert Response String to JSONObject
JSONObject json=new JSONObject(str); //str=response string from server

// set error_message from json
String str_error_message=json.getString("error_message");

// set success from json
String str_success=json.getString("success"); 
```

# linux - Ubuntu 12.10 风扇超速

> ID：14609457
> 
> 赞同：-3
> 
> 时间：2013-01-30T16:57:00.237
> 
> 标签：linux, ubuntu

我已经安装了 Ubuntu 12.10，留下了 Win 7 许可版本。但是像往常一样，我需要解决很多问题。

这次风扇产生了很多噪音。我正在寻找解决方案并找到以下内容：

```
sudo tee /sys/devices/system/cpu/cpu0/cpufreq/scaling_max_freq < \
  /sys/devices/system/cpu/cpu0/cpufreq/cpuinfo_min_freq 
```

但我读到 cpufreq 是用于 CPU 频率的。现在做什么？我已经执行了命令。在 Ubuntu 12.10 中我的风扇声音问题的解决方案是什么。在win 7中，这不是问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:00:49.777

我相信你正在寻找 [fancontrol](http://manpages.ubuntu.com/manpages/hardy/man8/fancontrol.8.html)

# python - Python & pylast - AttributeError: 'NoneType' 对象没有属性 'encode' python

> ID：14609467
> 
> 赞同：1
> 
> 时间：2013-01-30T16:57:31.513
> 
> 标签：python, api, python-2.7, last.fm

我是一个刚开始学习 Python 的菜鸟。我正在使用 Last.fm 的 pylast 库来拉取用户邻居及其一些属性的列表，但是当我尝试打印邻居的国家/地区时，出现以下错误：

```
thrillofme
None
0
Traceback (most recent call last):
  File "/Users/Moi/DSR/Week 2/My tutorials/my-lastfm-thing-3.py", line 24, in <module>
    print country
  File "/Library/Python/2.7/site-packages/pylast.py", line 944, in r
    return _string(funct(*args))
  File "/Library/Python/2.7/site-packages/pylast.py", line 3497, in _string
return text.encode("utf-8")
AttributeError: 'NoneType' object has no attribute 'encode' 
```

查看此错误消息的其他一些解决方案，我得到的印象`country`是未正确编码以进行打印，但我不知道该怎么做。任何帮助将不胜感激！这是我的代码。

```
import pylast

api_key = "XXX"
username = "Strangelove"
network = pylast.LastFMNetwork(api_key = api_key)
user = pylast.User(username, network)

# Let's pull a list of the specified user's Last.fm neighbours.
# Neighbours are users with a similar taste in music.

neighbours = user.get_neighbours()

for i in neighbours:
    gender = i.get_gender()
    age = i.get_age()
    country = i.get_country()
    print i
    print gender
    print age
    print country 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T17:06:16.613

缺少国家名称，但`pylast`图书馆没有正确处理这种情况。您必须自己测试空的国家/地区案例：

```
if country.name:
    print country 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-01T11:03:54.643

我已经在我[的 pylast 分支中](https://github.com/hugovk/pylast)修复了这个问题。

当您调用 时`country = i.get_country()`，它现在返回`None`而不是`Country`对象 where `name`is `None`。

# javascript - 如何从 Nodejs 中的 setTimeout 获取整数？

> ID：14609469
> 
> 赞同：9
> 
> 时间：2013-01-30T16:57:40.557
> 
> 标签：javascript, node.js, redis, settimeout

关于 nodejs 计时器的文档说 setTimeout 将返回一个 timeoutId [http://nodejs.org/api/timers.html#timers_cleartimeout_timeoutid](http://nodejs.org/api/timers.html#timers_cleartimeout_timeoutid)

当我在网络浏览器中使用 javascript 时，我会得到一个整数作为返回值。

```
var b = setTimeout(function(){console.log("Taco Bell")})
// b = 20088 
```

当我使用节点并做同样的事情时，回报是

```
var b = setTimeout(function(){console.log("Taco Bell")})
// { _idleTimeout: 60000,
//   _idlePrev: 
//     { _idleNext: [Circular],
//       _idlePrev: [Circular],
//       ontimeout: [Function] },
//   _idleNext: 
//     { _idleNext: [Circular],
//       _idlePrev: [Circular],
//       ontimeout: [Function] },
//   _onTimeout: [Function],
//   _idleStart: Wed Jan 30 2013 08:23:39 GMT-0800 (PST) } 
```

我想做的是将 setTimeout 整数存储到 redis 中，然后再将其清除。所以我尝试做这样的事情

```
var redis = require('redis');
var redisClient = redis.createClient();
var delay = setTimeout(function(){console.log("hey")}, 20000);
var envelope  = { 'body' : 'body text', 'from' : 'test@test.com', 'to' : 'test@test.com', 'subject' : 'test subject', 'delay' : delay };
redisClient.hset("email", JSON.stringify(envelope), redis.print); 
```

但后来我从 JSON.stringify 收到一个关于无法处理圆形对象的错误。有没有办法让 setTimeout 返回 ID 或将足够的对象存储到 redis 以便以后清除？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-08T16:17:54.330

我真的不相信在 nodejs 中（我非常喜欢）你会被迫制作这样的功能。

幸运的是，在 setTimeout 的 return(setInterval 也有它！)上有一个未记录的方法，称为`close`

```
var timer = setInterval(doSomething, 1000);
setTimeout(function() {
    // delete my interval
    timer.close()
}, 5000); 
```

希望有用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T20:18:42.157

我将对 setTimeout 的调用包装到一个函数中，该函数将 setTimeout 的结果存储在一个对象中，这样您就可以通过它们的 ID 检索超时。

像这样的东西：

```
var timeouts = {};
var counter = 0;

function setTimeoutReturnsId(callback, delay) {
  var current = counter++;
  timeouts[current] = setTimeout(function() {
      timeouts[current] = null;
      callback();
    }, delay);
  return current;
}

function getTimeoutFromId(id) {
  return timeouts[id];
} 
```

当然，当你的节点服务器重启时，你需要清除 redis。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-25T20:59:29.717

一直在努力解决这个问题，所以这里有一个现代的技巧：

在最新版本的节点中，[节点计时器](https://nodejs.org/api/timers.html#timers_class_timeout)为此使用[符号；](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol)计时器对象具有三个符号键。我需要将计时器的唯一 ID 添加到我的开发调试日志中，但是当我没有计时器系统的该字段的私有符号时，在句柄的映射中查找该字段是一个障碍。

*（如果我在生产中*需要易于打印的 id，那么在接受的答案中实现整个外观是我这样做的唯一方法；但是构建该外观只是为了调试一些棘手的计时器交互并再次将其撕掉是太多的突变我正在尝试调试的非常代码。）

我发现的唯一 kludge 是使用 util.inspect 对 unstringable 进行字符串化，并且由于我只保持 kludge 足够长的时间来调试我当前的模块，所以我不担心另一个具有相同描述性字符串的符号潜入从发布或添加其他库：

```
function getId(timer) {
    var ids = Object.getOwnPropertySymbols(timer); // this currently returns three symbols
    var key;
    ids.forEach(id => {
        if (util.inspect(id) === 'Symbol(triggerId)') key = id;
    });
    if (!key) throw new Error('Symbol(triggerId) not found in timer');
    return timer[key];
} 
```

# git - 从 MSBuild 获取 Git 长哈希

> ID：14609470
> 
> 赞同：3
> 
> 时间：2013-01-30T16:57:45.663
> 
> 标签：git, github, msbuild, cruisecontrol.net, msbuild-task

我正在使用`Git`+ `MSBuild`。我需要从中获取 Git Long Hash 编号，`MSBuild`以便将构建与哈希编号联系起来（并找出构成该“修订”的文件）

我可以使用内置任务`MSBuild`来获取哈希数吗？

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T01:47:08.070

我建议将它作为 CI 服务器本身的属性传递，它的工作是处理 VCS，这样开发人员可以对不是 git repo 的普通文件夹使用相同的脚本，例如用于黑客攻击的愚蠢复制/粘贴从 CLI 提供它。也就是说，可能有适当的基于 api 的社区任务，但我是这样做的：

```
<Target Name="Foo">
    <Exec Command="git rev-parse HEAD > head" />
    <ReadLinesFromFile File="head">
        <Output TaskParameter="Lines" PropertyName="Head" /> 
    </ReadLinesFromFile>
    <Delete Files="head" />
    <Message Text="Head: $(Head)" />
</Target>

<Target Name="Bar">
    <PropertyGroup>
        <Head>$([System.IO.File]::ReadAllText(".git\refs\heads\master").Trim())</Head>
    </PropertyGroup>
    <Message Text="Head: $(Head)" />
</Target> 
```

# websocket - Ember.js 和 HTML 5 WebSockets

> ID：14609477
> 
> 赞同：3
> 
> 时间：2013-01-30T16:58:03.127
> 
> 标签：websocket, ember.js

将 HTML5 Websockets 集成到 Ember.js 应用程序中的最佳方式通常是什么？

我过去使用过 Pusher.com，并使用了与此类似的设置：http: [//blog.pusher.com/backbone-js-now-realtime-with-pusher/](http://blog.pusher.com/backbone-js-now-realtime-with-pusher/)

我正在寻找与 Ember.js 等效的东西

多谢你们！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T00:36:26.700

我已经使用套接字设置了一个应用程序。我这样做的方式是我的主 App 文件有一个套接字对象，然后从 socket.io 接收消息并将它们放入一个数组中。任何可能对侦听某些套接字消息感兴趣的控制器都绑定到数组并获取传入的新消息。例如，我的 chatController 关心聊天消息，而我的 eventController 关心基于触发的套接字事件显示或隐藏图像。

下面是一些关于我如何设置的咖啡脚本代码。

```
window.App = Ember.Application.create

  init: ->
    @_super()
    @setSocketIO()

  ##
  # socket - socket.io object for communicating with the server
  socket: null

  ##
  # socketMessages - array used to store any socket.io messages emitted from the server 
  socketMessages: []

  ##
  # setSocketIO - setup socket.io connection and message endpoints
  setSocketIO: ->
    @set 'socket', io.connect()

    ##
    # if the socket errors out, then reconnect it
    App.socket.on "error", (err) ->
      App.socket.socket.reconnect()

    ##
    # receive new messages
    App.socket.on "event-message-receive", (data) =>
      @createSocketMessage 'event-message-receive', data

    ##
    # image url recieved
    App.socket.on "event-image-set-receive", (data) =>
      @createSocketMessage 'event-image-set-receive', data

    ##
    # hide image recieved
    App.socket.on "event-image-hide-receive", () =>
      @createSocketMessage 'event-image-hide-receive' 
```

然后在我的聊天控制器中，我只收听收到的新消息

```
App.ChatController = Ember.ArrayController.extend

    ##
    # chat messages
    chatMessages: []

    ##
    # socketMessageBinding - bind to the App.socketMessage message queue for receiving new    messages from the server
    socketMessagesBinding: 'App.socketMessages'

    ##
    # socketMessageAdded - called whenever a socket.io message is sent from teh server
    socketMessageAdded: (->
      # get the newest item on the stack
      socketMessage = @socketMessages[@socketMessages.length-1] 

      if socketMessage.type == 'event-message-receive'
        @chatMessages.pushObject socketMessage.data                    
  ).observes('socketMessages.@each') 
```

在我的事件控制器中，我监听图像显示和图像隐藏

```
App.EventController = Ember.ArrayController.extend

  ##
  # property to show or hide an img on the page
  showImage: false

  ##
  # socketMessageBinding - bind to the App.socketMessage message queue for receiving new    messages from the server
  socketMessagesBinding: 'App.socketMessages'

  ##
  # socketMessageAdded - called whenever a socket.io message is sent from teh server
  socketMessageAdded: (->
    # get the newest item on the stack
    socketMessage = @socketMessages[@socketMessages.length-1] 

     if socketMessage.type == 'event-image-set-receive'     
       @set 'showImage', true
     else if socketMessage.type == 'event-image-hide-receive'
       @set 'showImage', false                   
  ).observes('socketMessages.@each') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T17:06:41.323

你可以[在 GitHub 上](https://github.com/emberjs/data/issues/261)查看8 个月前的以下内容，但目前还没有`WebSocketsAdapter`，尽管我很想看到一个。在大多数情况下，人们似乎在`WebSocketAdapter`为自己的场景制作 ad-hoc。

我想一旦 EmberJS 发布 1.0 版，你就会开始看到更多的第三方插件。由于 EmberJS，特别是 EmberJS 的 DS (DataStore) 变化如此之快，`WebSocketAdapter`除非您完全致力于使其保持最新，因为 EmberJS/DS 从一天到下一个。

# php - SQL查询失败但事务回滚不起作用

> ID：14609478
> 
> 赞同：0
> 
> 时间：2013-01-30T16:58:04.443
> 
> 标签：php, mysql, transactions

实际的列名是 account 和 passwd，所以第二个查询将失败，但第一个查询仍然插入到数据库中。

```
$sql1 = "INSERT INTO users (account, passwd) VALUES ('account+1', 'password+1')";
$sql2 = "INSERT INTO users (account, password) VALUES ('account+2', 'password+2')";
try {

 $db->beginTransaction();
 $db->query($sql1);
 $db->query($sql2);
 $db->commit();

} catch (Exception $e) {
  $db->rollback();
  die($e->getMessage());
} 
```

事务成功启动，没有错误，问题是它不回滚，无论查询失败，总是插入行。

MySQL 版本 5.5.25，表类型为 InnoDB。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:00:29.327

你打开异常了吗？默认情况下 pdo 不会抛出它们并默默地忽略错误。

```
$db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T17:00:05.143

```
$sql1 = "INSERT INTO user (account, passwd) VALUES ('account+1', 'password+1')";
$sql2 = "INSERT INTO users (account, password) VALUES ('account+2', 'password+2')";
try {

 $db->beginTransaction();
 $db->query($sql1);
 $db->query($sql2);
 $db->commit();

} catch (Exception $e) {
  $db->rollback();
  die($e->getMessage());
} 
```

`$mysql`引用是错误的，你必须使用，`$db->rollback();`

# xcode - 游戏中心实施错误 - Apple Mach-O

> ID：14609484
> 
> 赞同：0
> 
> 时间：2013-01-30T16:58:11.247
> 
> 标签：xcode, game-center

我需要帮助这是我的错误：

体系结构 i386 的未定义符号：“_OBJC_CLASS_$_GameCenterManager”，引用自：ViewController.o 中的 objc-class-ref ld：未找到体系结构 i386 的符号 clang：错误：链接器命令失败，退出代码为 1（使用 -v查看调用）

我正在尝试实现游戏中心。

这是我的 ViewController.h #import：

```
#import <GameKit/GameKit.h>
#import "GameCenterManager.h" 
```

这是我的 ViewController.m #import：

```
#import "ViewController.h"
#import "AppSpecificValues.h"
#import "GameCenterManager.h" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T10:09:53.123

[Xcode链接器错误？](https://stackoverflow.com/questions/9660718/xcode-linker-error/11772282#11772282)为我工作

> 转到您的项目，单击构建阶段，编译源，添加`GameCenterManager.m`到列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T17:01:07.903

请务必将`GameKit`框架导入您的项目。也放在'头文件`#import <GameKit/GameKit.h>`的顶部。`ViewController`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T17:16:43.200

你可以试试这个。转到您的项目构建设置并选择架构为 armv6 或 armv7。清理您的项目并再次构建。

# hibernate - 在 JPA 中以一对多关系获取数据的问题

> ID：14609485
> 
> 赞同：0
> 
> 时间：2013-01-30T16:58:14.083
> 
> 标签：hibernate, jpa, one-to-many, dao, many-to-one

我试图让问题更小，但我无法让它更小:(

我有 2 个实体，这就是它们的关联方式：

```
Collection (1) ----> (n) Item
Item (0 or 1) -----> (n) Item 
```

即每个`Item`都与一个有关`Collection`。此外，每个都`Item`可以有 0 个或多个孩子`Item`。如果有一个孩子`Item`，孩子`Item`将有一个非空`parent_item_id`；

**表：**

收藏品

```
collection_id raw 
```

项目

```
item_id raw
collection_id raw
parent_item_id raw 
```

**映射：**

```
class Collections
{
   @Id @Column("collection_id")
   String id;

   @OneToMany(fetch=FetchType.EAGER, cascadeType.ALL, mappedBy="collection")
   List<Items> items;
}

class Items
{
  @Id @Column("item_id")
  String id;

  @ManyToOne(optional=false)
  @JoinColumn(name="collection_id")
  Collections collection;

  @ManyToOne(optional=true)
  @JoinColumn(name="parent_item_id")
  Items parentItem;
} 
```

假设我创建了一个像这样的对象：

```
//Constructor parameters are the Ids.
Collections collection1 = new Collections("1234");
Items i1 = new Items("111");
Items i2 = new Items("222");
item1.parentItem = item2;
item1.collection = collection1;
item2.collection = collection1;
List<Items> listItems = new ArrayList<Items>(1);
listItems.add(item2);
collection1.items = listItems; 
```

我们有一个数据访问层 (DA)，它是 JPA 和 Hibernate 的包装器。接下来，我执行两个操作：

```
Collections collection1 = DA.merge(collection1);
Collections collection2 = DA.find(collection1.id); 
```

我希望`collection2.items.size()`返回 2。但它返回 1。（PS：实际上有 2 项与 collection1 相关）。

可以解释吗？这是预期的还是 DA 中的错误？JPA 是否缓存集合？

稍后，如果在不同的事务中，我尝试获取`Collections collectionNew = DA.find("1234").items.size()`它返回 2（预期）；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T17:05:25.770

合并前后 collection1 中的 items.size() 是什么？JPA 实体是常规对象，因此如果大小不是 2，除非您从数据库刷新实体，否则它不会在查找之后。

# jquery - jQuery组合框多个实例

> ID：14609491
> 
> 赞同：0
> 
> 时间：2013-01-30T16:58:29.500
> 
> 标签：jquery, combobox

我在我的网站上为两个“选择”下拉菜单使用[组合框。](http://jqueryui.com/autocomplete/#combobox)

我需要检查用户单击了哪些组合框。

选择是这样的：

```
<select name="select1" id="combobox"/>
<select name="select2" id="combobox"/> 
```

如果用户在下拉列表中找不到值，则在表单提交时将该值添加到数据库中。我得到了这个的php方面。当组合框无法匹配时，我只需要更改表单元素的值。我已经为 1 选择工作了，我打赌我无法区分用户输入了哪个组合框。

jquery代码是这样的：

```
 (function( $ ) {
$.widget( "ui.combobox", {
  _create: function() {
    var input,
      that = this,
      select = this.element.hide(),
      selected = select.children( ":selected" ),
      value = selected.val() ? selected.text() : "",
      wrapper = this.wrapper = $( "<span>" )
        .addClass( "ui-combobox" )
        .insertAfter( select );

    function removeIfInvalid(element) {
      var value = $( element ).val(),
        matcher = new RegExp( "^" + $.ui.autocomplete.escapeRegex( value ) + "$", "i" ),
        valid = false;
      select.children( "option" ).each(function() {
        if ( $( this ).text().match( matcher ) ) {
          this.selected = valid = true;
          return false;
        }
      });
      if ( !valid ) {
        // remove invalid value, as it didn't match anything
        $( element )
         // .val( "" )
          .attr( "title", value + " will be added as new." )
          .tooltip( "open" );
        //select.val( "" );
        //add new site
        $('#new_site_added').val(value);
        alert(ui.item.option);

        setTimeout(function() {
          input.tooltip( "close" ).attr( "title", "" );
        }, 2500 );
        //input.data( "autocomplete" ).term = "";
        return false;
      }
    }

    input = $( "<input>" )
      .appendTo( wrapper )
      .val( value )
      .attr( "title", "" )
      .addClass( "ui-state-default ui-combobox-input" )
      .autocomplete({
        delay: 0,
        minLength: 0,
        source: function( request, response ) {
          var matcher = new RegExp( $.ui.autocomplete.escapeRegex(request.term), "i" );
          response( select.children( "option" ).map(function() {
            var text = $( this ).text();
            if ( this.value && ( !request.term || matcher.test(text) ) )
              return {
                label: text.replace(
                  new RegExp(
                    "(?![^&;]+;)(?!<[^<>]*)(" +
                    $.ui.autocomplete.escapeRegex(request.term) +
                    ")(?![^<>]*>)(?![^&;]+;)", "gi"
                  ), "<strong>$1</strong>" ),
                value: text,
                option: this
              };
          }) );
        },
        select: function( event, ui ) {
          ui.item.option.selected = true;
          that._trigger( "selected", event, {
            item: ui.item.option
          });
          $('#hidden_element_on_page').val("0"); // this is where i would like to check which combobox is selected.

        },
        change: function( event, ui ) {
          if ( !ui.item )
            return removeIfInvalid( this );
        }
      })
      .addClass( "ui-widget ui-widget-content ui-corner-left" );

    input.data( "autocomplete" )._renderItem = function( ul, item ) {
      return $( "<li>" )
        .data( "item.autocomplete", item )
        .append( "<a>" + item.label + "</a>" )
        .appendTo( ul );
    };

    $( "<a>" )
      .attr( "tabIndex", -1 )
      .attr( "title", "Show All Items" )
      .tooltip()
      .appendTo( wrapper )
      .button({
        icons: {
          primary: "ui-icon-triangle-1-s"
        },
        text: false
      })
      .removeClass( "ui-corner-all" )
      .addClass( "ui-corner-right ui-combobox-toggle" )
      .click(function() {
        // close if already visible
        if ( input.autocomplete( "widget" ).is( ":visible" ) ) {
          input.autocomplete( "close" );
          removeIfInvalid( input );
          return;
        }

        // work around a bug (likely same cause as #5265)
        $( this ).blur();

        // pass empty string as value to search for, displaying all results
        input.autocomplete( "search", "" );
        input.focus();
      });

      input
        .tooltip({
          position: {
            of: this.button
          },
          tooltipClass: "ui-state-highlight"
        });
  },

  destroy: function() {
    this.wrapper.remove();
    this.element.show();
    $.Widget.prototype.destroy.call( this );
  }
});
  })( jQuery );

  $(function() {
   $( "#combobox, #combobox2" ).combobox();
    $( "#toggle" ).click(function() {
      $( "#combobox, #combobox2" ).toggle();
    });
  }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T01:04:20.490

W3C 将 ID 定义为“元素的唯一标识符”。因此，您不能在一页上有两个相同的 ID。

```
<select name="select1" id="combobox1"/>
<select name="select2" id="combobox2"/> 
```

现在您可以访问它了。

更好的方法是使用 id=combobox1 和 id=combobox2 将选择包装在 div 中

```
<div id="combobox1">
    <select name="select1"/>
</div>

<div id="combobox2">  
    <select name="select2"/>  
</div> 
```

所以你可以做例如。得到

```
$("#combobox1 .ui-autocomplete-input").attr("tabindex", "1");
$("#combobox2 .ui-autocomplete-input").attr("tabindex", "2"); 
```

希望这可以帮助。

# excel - Excel VBA 单击一次应用程序

> ID：14609500
> 
> 赞同：-1
> 
> 时间：2013-01-30T16:58:59.013
> 
> 标签：excel, clickonce, vba

如何将我的 .xlsb 文件添加到 Visual Studio Tools for Office 解决方案？我的 .xlsb 文件后面有 VBA 代码。一旦我完成了这个，我应该可以将它发布为 Click Once 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T20:08:57.367

让我确定我是否理解你的问题！！！您想使用单击一次来部署办公室。

如果那是你的问题.. 使用 vs 开始一个解决方案，选择一个类型（excel，word ...）。将您的工作 xlsb 放入您的解决方案中。运行发布。

你不必编码任何东西！

# cakephp - 如何验证来自同一模型的一对值？

> ID：14609501
> 
> 赞同：1
> 
> 时间：2013-01-30T16:59:03.047
> 
> 标签：cakephp, cakephp-2.0

**用例**
我的用例是我需要验证乒乓球得分。

**形式**

```
<input name="data[MatchesPlayer][1][score]" type="number" id="MatchesPlayer1Score">
<input name="data[MatchesPlayer][2][score]" type="number" id="MatchesPlayer2Score"> 
```

**约束**

*   一个分数必须大于 11。
*   如果分数高于 11，则一个分数必须是 2 分或高于另一个分数。

**问题**
当 cake 验证来自同一模型的多行时，模型数据被设置为该记录。这意味着无法比较这两个值，因为它们在`$this->data`. 在我使用时，`saveAll()`每条记录都设置为模型，然后在保存之前进行验证。

**问题**
我想知道是否有一种好方法可以验证这对数据，而无需在验证之前将其保存到会话或类似中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:24:48.560

我通常在这里做的是为该`save`方法创建一个包装器。这使我可以执行模型回调无法执行的自定义操作，甚至可以使用自定义事务等。

在你的情况下，它会是这样的：

```
class MatchesPlayer extends Model {

    protected $_saveData = null;

    public function updateScore($data) {
        $this->_saveData = $data;
        try {
            // You can use saveAll to validate
            // only, and not actually save
            $saved = $this->saveAll($data, array('validate' => 'only'));
        } catch (Exception $e) {
            // Catch exceptions here in case the
            // saveAll is instead something that throws Exceptions
            // Or your database uses exceptions
            $saved = false;
        }

        $this->_saveData = null;
        return $saved
    }
} 
```

然后，您可以`$this->_saveData`在整个模型中使用。如果你想聪明一点，你可以检测所有保存在 中的子模型，`$data`然后`$this->_saveData`也设置它们——我当然会把它作为一种`AppModel`方法。

`updateScore()`请注意，当验证失败时，您可能希望从此方法抛出异常。如果验证失败抛出异常 - 与保存 - 将允许您为用户设置自定义闪存消息，甚至有一个以不同状态代码响应的 api。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-01T10:11:57.630

在 MatchesPlayer 模型中使用自定义验证规则，请查看 [http://book.cakephp.org/2.0/en/models/data-validation.html#adding-your-own-validation-methods](http://book.cakephp.org/2.0/en/models/data-validation.html#adding-your-own-validation-methods)

# symfony - Symfony/Doctrine：将数据作为对象获取，仍然得到数组

> ID：14609505
> 
> 赞同：0
> 
> 时间：2013-01-30T16:59:14.750
> 
> 标签：symfony, doctrine, entity

我的控制器中有 $id 它是一个外键

```
 $query = $em->getRepository('SurgeryPatientBundle:Patients')->findPatientByUserID($id); 
```

在我的存储库文件中，这个函数

```
 public function findPatientByUserID($id)
{

    return $this->getEntityManager()
        ->createQuery('SELECT p FROM SurgeryPatientBundle:Patients p WHERE p.user ='.$id.'')
        ->execute();

} 
```

我想得到一个对象的实例，但仍然得到一个数组。使用 find($id) 查询效果很好

编辑问题解决了，我太笨了，我调用了 $query[0]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T01:08:21.180

`$query->getSingleResult();`你也可以使用

看这里

[http://docs.doctrine-project.org/en/2.1/reference/dql-doctrine-query-language.html#query-result-formats](http://docs.doctrine-project.org/en/2.1/reference/dql-doctrine-query-language.html#query-result-formats)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T17:09:45.280

如果你想抓取对象，你不应该使用 DQL。Doctrine 实体有一个[find](http://symfony.com/doc/current/book/doctrine.html#querying-for-objects)函数可以为你处理这个问题。

而不是所有的代码，你可以使用（在你的控制器中）：

```
$em->getRepository('SurgeryPatientBundle:Patients')->find($id); 
```

DQL 非常强大，但是对于像这样的简单查找，使用内置的 find 方法会更有效并将实体作为教义对象提供。

# three.js - 从 Three.js r52 升级到 r55 时无法再更改不透明度

> ID：14609508
> 
> 赞同：2
> 
> 时间：2013-01-30T16:59:25.007
> 
> 标签：three.js, webgl

基本上我正在升级我的应用程序，从 r52 到 r55。这个应用程序使用动画（Tweens）来更新线条，但也是一个粒子系统。在 r52 中一切正常，缩放、移动和改变不透明度。

我使用了这些 WebGLRenderer 构造函数设置：

```
 clearColor: 0x1f1f1f
    clearAlpha: 1
    antialias: true
    sortObjects: false 
```

我从示例中获取了一个简单的着色器：

```
<script type="x-shader/x-vertex" id="vertexshader">
    attribute float size;
    attribute vec3 customColor;
    attribute float customOpacity;

    varying vec3 vColor;
    varying float vOpacity;

    void main() {
        vColor = customColor;
        vOpacity = customOpacity;

        vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
        gl_PointSize = size * ( 300.0 / length( mvPosition.xyz ) );
        gl_Position = projectionMatrix * mvPosition;
    }

</script>

<script type="x-shader/x-fragment" id="fragmentshader">
        uniform vec3 color;
        uniform sampler2D texture;

        varying vec3 vColor;
        varying float vOpacity;

        void main() {
            gl_FragColor = vec4( color * vColor, vOpacity );
            gl_FragColor = gl_FragColor * texture2D( texture, gl_PointCoord );
        }
</script> 
```

我使用以下方法初始化了粒子 ShaderMaterial：

```
 blending       : THREE.AdditiveBlending
    depthTest      : false
    transparent    : false 
```

和粒子系统通过手动设置：

```
 system.sortParticles = true
  system.matrixAutoUpdate = true
  system.visible = true
  system.dynamic = true 
```

所以这里是如何在 Three.js r52 中呈现的：

![前](../Images/abb96b71fc6c1d5b20d1150afcfd849f.png)

现在我已经阅读了 Migration wiki 页面，并得出结论我只需要更改几个名称，WebGLRenderer 构造函数、材质或着色器属性中没有任何内容。

我已经升级到 r55，现在视觉效果坏了：

![后](../Images/16808172c391647439181a023e0fa2b7.png)

线条和粒子现在都是明亮的（不考虑不透明度）。

此外，对于粒子，现在 alpha 蒙版已损坏（如果您仔细观察颜色不同，并且与其他粒子重叠时会出现“方形切割”，这是我在 r52 中使用的，只需调整 WebGLRender 设置即可修复）

有什么可以改变的？我试图更改 WebGL 构造函数中的设置、alphas、背景颜色.. 但它没有帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T17:11:43.983

很可能，您需要将着色器材质设置为透明：

```
material.transparent = true; 
```

三.js r.55

# java - 如何使用输入字段永久保存到网页？

> ID：14609509
> 
> 赞同：0
> 
> 时间：2013-01-30T16:59:26.020
> 
> 标签：java, php, html, input, hyperlink

首先，我不是编程专家。我精通 VB，可以使用 html 和 php，并且对 java 有点流利。

我在我的企业网站上创建了一个受密码保护的部分，基本上有常用的参考资料和大量有组织的链接到我们经常使用的其他网站。现在，如果我想添加一个新链接，我必须进入 html 并对按钮进行编码。（旁注：我们一直在使用通过 xMarks 进行书签同步。虽然它很实用，但我需要可以在多台计算机上更轻松地访问的东西，有时甚至是公共计算机和客户拥有的计算机，所以我不想成为受 xMarks 的限制...我们基本上将 URL 存储在智能手机上的笔记中，因此我们可以在需要时输入它们...过时，我知道）

似乎可以简单地拥有一个表格。URL 的一个字段，标题的一个字段，当我单击提交时，它将永久添加为该页面上的按钮......但我什至无法真正弄清楚从哪里开始。我觉得这可能是Java的工作，但我只是不知道该往哪个方向发展。

您不必为我编写代码（无论如何，如果您有这个愿望，请随意）我只需要知道该往哪个方向走！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T17:02:39.803

这是“任何编程语言”的工作（由您的服务器支持，或者您愿意为您的服务器添加支持）。

在您的标签中，您可以使用 Java 或 PHP。我个人的偏好可能是 Perl 或 Python。

基础是：

HTML 表单提交到将数据添加到数据库的服务器端程序。对于这样的低流量系统，该数据库可能是 SQLite。

加：从数据库生成链接列表的服务器端程序。它会查询数据库中的所有链接（可能在列表达到一定大小时添加分页）然后循环遍历结果并为每个链接输出 HTML。

在您的编程语言中使用模板语言是明智的。确保您了解如何保护自己免受 SQL 注入和 XSS 攻击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T17:08:03.270

这可以使用 PHP 轻松完成

# ibm-mq - AMQ9504：检测到通道的协议错误

> ID：14609511
> 
> 赞同：2
> 
> 时间：2013-01-30T16:59:32.797
> 
> 标签：ibm-mq, websphere-7

我无法通过 WebSphere MQ 的队列管理器从 WebSphere Application Server 远程连接。无论如何，它从安装在同一台机器上的 WAS 连接到队列管理器。我正在使用 WebSphere MQ 7.5 版和 WebSphere Application Server 7.0 版。

在尝试将 WAS 远程连接到队列管理器时，记录了以下错误消息。

**来自 WebSphere MQ 的错误消息：**

> 1/30/2013 21:12:09 - 进程（3624.6）用户（MUSR_MQADMIN）程序（amqrmppa.exe）主机（KHILT-269）安装（安装1）VRMF（7.5.0.0）QMgr（QM.TEST）AMQ9504：A检测到通道“TEST_CHANNEL”的协议错误。解释：在与远程队列管理器通信期间，通道程序检测到协议错误。故障类型为 11，关联数据为 0。 操作：与系统管理员联系，系统管理员应检查错误日志以确定故障原因。

**WebSphere Application Server 上的错误消息：**

> 由于以下原因，无法与 WebSphere MQ 建立连接：CC=2;RC=2009

从日志中可以看出，我将队列管理器创建为 QM.TEST，将通道创建为 TEST_CHANNEL。为队列管理器定义的侦听器端口是 1417 以及协议 TCP。

我做了很多谷歌，但没有找到任何合适的解决方案。我感谢在这方面的任何帮助。

感谢广告，KAmeer

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-11T14:29:50.473

我有一个类似的问题，我有 WAS 7 和 WMQ 7.5。我能够连接到我现有的 WMQ 7.0 QM，但不能连接到我的新 WMQ 7.5 QM。显然，在初始版本 7.0.0.0 之后，与 WAS 7 捆绑的 WMQ 组件发生了变化。更新资源适配器后，我能够成功连接到两个队列管理器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-16T01:59:12.367

队列管理器在收到来自客户端的意外 TSH 流时会生成协议错误并立即终止连接。结果，客户端收到 2009 错误。从技术上讲，低级别 MQ 客户端将能够与更高版本的 MQ 队列管理器通信，反之亦然，除非存在已知限制和/或存在 MQ 缺陷/APAR。错误消息表明队列管理器在 MQ 7500 上运行，这是 MQ 基本 7.5 版本。建议将队列管理器升级到可用的最新修订包以排除任何已知问题。您还可以尝试在 SVRCONN 上禁用共享转换（即设置 SHARECNV 为 0）并检查它是否可以解决问题，直到问题得到解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T17:37:52.737

与 IBM 一起打开 PMR，因为这听起来像是一个错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-21T17:51:30.223

原因是 mq 7 客户端无法与 mq 7.5 通信，客户端需要使用 mq 7.5 jar 文件

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-17T13:22:41.077

我有这个问题。在我的情况下，mq 库正在使用无限循环执行 MQGET，因此当我调用 kill 并生成事件并尝试在 get 仍在运行时断开连接时，lib 被锁定在 mqget 上。由于 mqget 不支持通过信号解锁，我不得不更改代码以在 get 时不保持无限，并在 kill 命令上添加一些标志，以便应用程序可以检测到它从 get 返回时死亡的时间。

# php - php包含来自根目录以外的目录的文件

> ID：14609512
> 
> 赞同：2
> 
> 时间：2013-01-30T16:59:36.807
> 
> 标签：php, include

我有一个全局模板页面，`/layout_header.php`以及存储在`/aFolder/index.php`.

在`/layout_header.php`中，我有：

```
<?php
    // Reference to scripts and other files
    echo "<img src='img/lollipop.png'/>";
    echo "<script src='js/move.js'/>";
    echo "<a href='aFolder/movement.php'>Click here!</a>";
?> 
```

在`/aFolder/index.php`中，我有：

```
<?php
    include "../layout_header.php";
?> 
```

现在，调用文件`/aFolder/index.php`没有问题。`/layout_header.php`不幸的是，因为目录是 now `/aFolder`，所以我面临以下问题：

*   无法查看图像，因为图像现在链接为`/aFolder/img/lollipop.png`（不存在）
*   由于上面列出的原因，无法执行脚本。
*   由于上述原因，URL 无效。

我的许多脚本和 css 文件都使用相对路径。换句话说，如果`index.php`放在根文件夹中，一切正常。

我应该如何解决子目录中的文件问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T17:34:10.690

您可以在所有 PHP 框架（至少是专业人士）中看到一个变量/常量，如 APPPATH、BASEPATH 等。因此您需要在项目中定义类似的变量/常量并根据需要使用它。

```
<?php
// a.php: assuming this included everywhere at very first line 
// and located in root directory
// preferable, define a constant instead of variable, cos it 
// may used in functions directly without "global $ROOT";

// for "include"
define('ROOT', __DIR__); // for PHP >= 5.3
define('ROOT', realpath(dirname(__FILE__)));  // for PHP < 5.3
// for "src, href" etc
define('HTTP', $_SERVER['SERVER_NAME']); // for local development support i.e foo.com.local

// includes
include ROOT .'/layout_header.php';
include ROOT .'/classes/mailer.php';
include ROOT .'/foo/bar/baz.php';
...

// src,href
printf('<script src="%s/js/move.js" />', HTTP);
printf('<img src="%s/img/lollipop.png" />', HTTP);

print '<a href="'. HTTP .'/aFolder/movement.php">Click here!</a>';
...
?> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-30T17:04:12.997

始终使用 $_SERVER['DOCUMENT_ROOT'].'path/to/file' 来包含相对的 php 文件。

对于图像和脚本文件以及 css 文件，请使用 yourdomain.com/path/to/file.extension

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T17:18:15.233

您是否尝试过使用完整的根目录而不是相对目录。

```
define('WEB_ROOT', 'http://yourdomain.com/');  // localhost path etc

echo "<img src=".WEB_ROOT."img/lollipop.png'/>";
echo "<script src=".WEB_ROOT."'js/move.js'/>";
echo "<a href='".WEB_ROOT."aFolder/movement.php'>Click here!</a>"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T17:10:14.357

您可以执行许多解决方案：

*   转到您的配置文件以更改项目的根目录。

*   将 index.php 留在文件夹 aFolder/index.php 中并从它重定向到另一个文件

*   更改您的 htacess 文件以进行重定向

*   通过从服务器获取 url 来更改所有路径。

我将采用第二个（复制索引并将其与 /layout_header.php 放在一起）从 aFolder/index.php 中删除内容并添加到另一个索引文件的重定向：

```
<?php

   header( 'Location: ../index.php' ) ;

?> 
```

# tabs - GXT TabPanel 在左上角和右上角有标签

> ID：14609513
> 
> 赞同：1
> 
> 时间：2013-01-30T16:59:39.137
> 
> 标签：tabs, gxt, tabpanel

我是 GXT 的新手，我正在尝试创建 TabPanel，它在左侧有一些选项卡，在右侧有一些选项卡（如图 2 所示）。我可以毫无问题地创建最简单的 TabPanel，如图 1 所示。

![在此处输入图像描述](../Images/85fca835a8ae8f4c152342895ef832a6.png)

在 GWT 中，我设法以这种方式将一些选项卡移动到右侧：

```
tabLayoutPanel.getTabWidget(i).getParent().addStyleName("right"); 
```

和 CSS：

```
.right {
   float: right;
   margin-right: 6px;
} 
```

但我在 GXT TabPanel 中找不到像*getTabWidget这样的选项。*

你能帮我处理这个案子吗？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T10:28:14.660

您必须做一些小技巧才能访问 GXT 3 中的选项卡处理程序。

```
class StylableTabPanel extends TabPanel {
    public void applyTabStyles(Widget widget, String styles) {
        findItem(getWidgetIndex(widget)).applyStyles(styles);
    }
} 
```

然后：

```
tabPanel = new StylableTabPanel();
HTML shortText = new HTML("Lorem ipsum...");
tabPanel.add(shortText, "Short Text");
HTML longText = new HTML("<b>lorem ipsum dolor sit amet...</b>");
tabPanel.add(longText, "Long Text");
tabPanel.applyTabStyles(longText, "margin-left: 300px;"); 
```

不幸的是，您必须手动计算左边距，因为您不能在此处使用“float: right”：GXT 开发人员决定分配“width: 1000000px;” 到包含标签的 UL 元素。所以这样的浮动规则只是将它推到容器的右边缘之外（除非你的屏幕宽度超过 1000000 像素；]）。

我希望这有帮助。

# c# - 如何在其父窗体的顶部或附近显示消息框？

> ID：14609516
> 
> 赞同：-2
> 
> 时间：2013-01-30T16:59:46.827
> 
> 标签：c#, winforms, error-handling

> **可能重复：**
> [在父窗体中居中 MessageBox](https://stackoverflow.com/questions/1732443/center-messagebox-in-parent-form)

我正在尝试制作一个 C# 应用程序，并且我想让我的 messageBox 出现在父级附近。我试过了：

```
MessageBox.Show(this,"this operation does not work"); 
```

这是行不通的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T17:53:31.620

假设您使用的是 Windows 窗体，请创建一个扩展 System.Windows.Form 以模仿 MessageBox 的新类。根据您的新类 Parent.Location 属性设置 Location 属性。

# c++ - 转换运算符重载 - 函数歧义

> ID：14609517
> 
> 赞同：2
> 
> 时间：2013-01-30T16:59:56.677
> 
> 标签：c++, interop, directx, ambiguity, ambiguous

我试图通过创建重载转换运算符来创建我的数学库和一些 DirectX 内置方法之间的互操作性。基本上，我的结构需要将自己转换为 DirectX 库中与之相关的对象或对象的指针。下面的例子：

```
//overloaded conversion operators
Vector3D::operator D3DXVECTOR3() const;
Vector3D::operator D3DXVECTOR3*() const; 
```

我的问题在于某些 DirectX 方法具有同时采用引用和指针的重载，因此当我尝试传递我的对象时收到一个模棱两可的调用错误。我想让最终用户尽可能无缝，因此我不想使用显式转换方法（例如 ToD3DXVECTOR3()）或显式调用操作员。

所以我希望它表现得像这样：

```
//signature for DirectX method
//D3DXVec3Add(D3DXVECTOR3* vect1, D3DXVECTOR3* vect2) or
//D3DXVec3Add(D3DXVECTOR& vect1, D3DXVECTOR3& vect2)

Vector3D v1(1,1,1);
Vector3D v2(2,2,2);

D3DXVec3Add(v1, v2); 
```

而不是这样：

```
D3DXVec3Add(v1.toD3DXVECTOR3(), v2.toD3DXVECTOR3()); 
```

我不确定这是否可行，但是对于如何解决歧义有什么建议吗？

编辑：

虽然我不能只依赖于隐式转换，但我将接受 Mr.C64 留下的建议。但是，一个区别是 Vector3D 结构不包含可以转换为成员变量的对象：

```
struct Vector3D
{
float X;
float Y;
float Z;

...

//Implicit conversion operators
operator D3DXVECTOR3() const;
operator D3DXVECTOR3*() const;
operator DirectX::XMFLOAT3() const;
operator DirectX::XMFLOAT3*() const;
operator DirectX::XMVECTOR() const;
operator DirectX::XMVECTOR*() const;

...

//Explicit conversion methods
D3DXVECTOR3         ToD3DXVECTOR3() const;
static Vector3D     FromD3DXVECTOR3(const D3DXVECTOR3& vector);
DirectX::XMFLOAT3   ToXMFLOAT3() const;
static Vector3D     FromXMFLOAT3(const DirectX::XMFLOAT3& value);
DirectX::XMVECTOR   ToXMVECTOR() const;
static Vector3D     FromXMVECTOR(const DirectX::XMVECTOR& value);

private:

...

}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T17:14:24.983

你有可能**从中派生出**你的`Vector3D`课程`D3DXVECTOR3`吗？就像`ATL::CRect`类派生自 Win32`RECT`结构一样（添加方便的方法）。

如果这是不可能的，或者只是不适合您的特定设计上下文，请考虑提供显式转换方法，就像`std::string`提供`.c_str()`获取`const char*`指针的方法一样，而不是使用隐式转换。您可能会发现这篇博文也很有趣：

[读者问答：为什么现代智能指针不隐式转换为 *？](http://herbsutter.com/2012/06/21/reader-qa-why-dont-modern-smart-pointers-implicitly-convert-to/)

此外，我注意到[`D3DXVec3Add()`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb205504%28v=vs.85%29.aspx)仅使用**指向**. `D3DXVECTOR3`因此，如果您无法从中派生自己的类（正如您在评论中所述），提供几个 getter（包括非版本）是`D3DXVECTOR3`有意义的，如下所示：`const``const`

```
class Vector3D
{
public:

  ....

  // Get read-only access to wrapped D3DX vector
  const D3DXVECTOR3* Get() const
  {
      return &m_vec;
  }

  // Get read-write access to wrapped D3DX vector
  D3DXVECTOR3* Get()
  {
      return &m_vec;
  }

private:
  D3DXVECTOR3 m_vec;
}; 
```

然后像这样使用它们：

```
Vector3D v1;
Vector3D v2;
Vector3D vSum;
D3DXVec3Add(vSum.Get(), v1.Get(), v2.Get()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T17:06:43.623

如果您可以使用 C++11 标准进行编译，则可以进行转换`explicit`。见[https://stackoverflow.com/a/8239402/713961](https://stackoverflow.com/a/8239402/713961)

# javascript - 只允许数字和一位小数

> ID：14609521
> 
> 赞同：3
> 
> 时间：2013-01-30T17:00:11.850
> 
> 标签：javascript

伙计们，我有这段 JavaScript 代码，它只允许数字和一个小数点。我遇到的问题是，当我切换到我的文本框控件时，它会突出显示该值，但我必须按退格键擦除然后输入一个数字。这是我想防止的额外击键。

找到创建它的人的道具（[http://www.coderanch.com/t/114528/HTML-CSS-JavaScript/decimal-point-restriction](http://www.coderanch.com/t/114528/HTML-CSS-JavaScript/decimal-point-restriction)），这是代码。我把它放在 keyUp 事件上。

```
 <script>
  // Retrieve last key pressed.  Works in IE and Netscape.
  // Returns the numeric key code for the key pressed.
  function getKey(e)
  {
    if (window.event)
       return window.event.keyCode;
    else if (e)
       return e.which;
    else
       return null;
  }
  function restrictChars(e, obj)
  {
    var CHAR_AFTER_DP = 2;  // number of decimal places
    var validList = "0123456789.";  // allowed characters in field
    var key, keyChar;
    key = getKey(e);
    if (key == null) return true;
    // control keys
    // null, backspace, tab, carriage return, escape
    if ( key==0 || key==8 || key==9 || key==13 || key==27 )
       return true;
    // get character
    keyChar = String.fromCharCode(key);
    // check valid characters
    if (validList.indexOf(keyChar) != -1)
    {
      // check for existing decimal point
      var dp = 0;
      if( (dp = obj.value.indexOf( ".")) > -1)
      {
        if( keyChar == ".")
          return false;  // only one allowed
        else
        {
          // room for more after decimal point?
          if( obj.value.length - dp <= CHAR_AFTER_DP)
            return true;
        }
      }
      else return true;
    }
    // not a valid character
    return false;
  }
</script> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-01-27T14:42:55.330

```
<input type="text" class="decimal" value="" /> 
```

在 Js 中使用这个

```
$('.decimal').keyup(function(){
    var val = $(this).val();
    if(isNaN(val)){
         val = val.replace(/[^0-9\.]/g,'');
         if(val.split('.').length>2) 
             val =val.replace(/\.+$/,"");
    }
    $(this).val(val); 
}); 
```

检查这个小提琴：http: [//jsfiddle.net/2YW8g/](http://jsfiddle.net/2YW8g/)

这对我有用，我从“Nickalchemist”那里得到了这个答案，却不相信它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-30T17:35:44.387

如果您不能使用已经稳定且广为人知的库，您可以尝试以下方法：

```
document.write('<input id="inputField" onkeyup="run(this)" />');

function run(field) {
    setTimeout(function() {
        var regex = /\d*\.?\d?/g;
        field.value = regex.exec(field.value);
    }, 0);
} 
```

我知道它并不能防止出现错误的字符，但它确实有效。

PS：这`setTimeout(..., 0)`是在字段的值已经修改后执行函数的技巧。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-09-21T15:19:40.910

这是一个示例解决方案，它只接受带有一 (1) 个小数点的数字。例如 1.12、11.5

```
Enter a number with one(1) decimal point only<br />
<input type="text" id="decimalPt"> <br />

$('.decimalPt').keypress(function(evt) {
  evt = (evt) ? evt : window.event;
  var charCode = (evt.which) ? evt.which : evt.keyCode;
  if (charCode == 8 || charCode == 37) {
    return true;
  } else if (charCode == 46 && $(this).val().indexOf('.') != -1) {
    return false;
  } else if (charCode > 31 && charCode != 46 && (charCode < 48 || charCode > 57)) {
    return false;
  }
  return true;
}); 
```

看看这个：[https ://jsfiddle.net/sudogem/h43r6g7v/12/](https://jsfiddle.net/sudogem/h43r6g7v/12/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T17:04:26.260

我认为最好使用已经存在的东西......比如带有 jQ ​​uery 的[Masked Input Plugin](http://digitalbush.com/projects/masked-input-plugin/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-05T05:51:31.680

我用这样的方法解决了我的问题。

```
const sanitize = (value = '') => value.replace(/(-(?!\d))|[^0-9|-]/g, '') || ''

export const toNumeric = value => {
  let digits = sanitize(value)

  // parseInt with 0 fix/avoid NaN
  digits = parseInt(0 + digits)
  let newValue = digits.toString().padStart(4, 0)

  return newValue
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-08-21T17:09:23.533

请务必在任何浏览器上进行测试。接受的答案在 Firefox 上不起作用。

试试 HTML5 类型号：

```
<input type="number" placeholder="1.0" step="0.1"> 
```

你可以定义 `min="0" max="10"`

参考： [https ://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/number#Controlling_input_size](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/number#Controlling_input_size)

**注意：** Internet Explorer 9 及更早版本不支持 type="number"。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-10-14T10:35:22.850

尝试这个，

```
$('input').on('keydown', function (event) {
    return isNumber(event, this);
});
function isNumber(evt, element) {
    var charCode = (evt.which) ? evt.which : evt.keyCode;
    if ((charCode != 190 || $(element).val().indexOf('.') != -1)  // “.” CHECK DOT, AND ONLY ONE.
            && (charCode != 110 || $(element).val().indexOf('.') != -1)  // “.” CHECK DOT, AND ONLY ONE.
            && ((charCode < 48 && charCode != 8)
                    || (charCode > 57 && charCode < 96)
                    || charCode > 105))
        return false;
    return true;
} 
```

# c# - 如何将信息传递到 Umbraco 中的所有页面

> ID：14609524
> 
> 赞同：2
> 
> 时间：2013-01-30T17:00:22.987
> 
> 标签：c#, xslt, umbraco

主模板中作为项目使用的信息如何`umbraco`传递给子模板？

```
Master template
        Child template 1
        Child template 2 
```

在`Master template`我有

```
<umbraco:Item field="training" runat="server" /> 
```

该字段是在的内容选项卡`training`中输入的文本。`umbraco`此信息需要输入一次并显示在使用 Child 的页面占位符中`template 1 and 2`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T00:08:22.837

如果主模板的文档类型包含此训练字段，则可以在使用子模板的节点中获取该值 - 使用递归选项。

我已经用宏完成了这个，在哪里可以得到一个孩子的训练项目（但在主人中设置）你使用'$'前缀（[http://our.umbraco.org/wiki/reference/templates/umbracomacro-元素/宏参数/高级宏参数语法](http://our.umbraco.org/wiki/reference/templates/umbracomacro-element/macro-parameters/advanced-macro-parameter-syntax)）：

```
<umbraco:macro alias="macroAlias" parm1="[$training]" runat="server"/> 
```

递归项目的使用频率较低（我不知道我是否曾经使用过这种技术 - 更常见的是使用包含 razor/ascx 或 xslt 的宏来处理重复的内容）。在这种情况下，您想要获取递归项目值（[http://our.umbraco.org/wiki/how-tos/xslt-useful-tips-and-snippets/settings-in-root-node-and-value -from-recursive-search](http://our.umbraco.org/wiki/how-tos/xslt-useful-tips-and-snippets/settings-in-root-node-and-value-from-recursive-search)）所以你会使用：

```
<umbraco:Item field="training" recursive="true" runat="server"></umbraco:Item> 
```

在这两种情况下，umbraco 都会在查看父节点之前检查当前节点的值。

# php - 获取 SharePoint 日历事件的 CAML 查询

> ID：14609527
> 
> 赞同：2
> 
> 时间：2013-01-30T17:00:26.187
> 
> 标签：php, sharepoint, soap, caml

我正在尝试使用 CAML 查询获取未来 12 个月内特定视图的所有日历事件。我正在使用 PHP SoapClient 来执行此操作。这是我的代码；

```
$query = "<Query>
    <Where>
        <DateRangesOverlap>
            <FieldRef Name='EventDate' />
            <FieldRef Name='EndDate' /><FieldRef Name='RecurrenceID' />
            <Value Type='DateTime'><Year /></Value>
        </DateRangesOverlap>
    </Where>
    <OrderBy><FieldRef Name='EventDate' /></OrderBy>
</Query>";

$query_options = "<QueryOptions>
    <RecurrencePatternXMLVersion>v3</RecurrencePatternXMLVersion>
    <ExpandRecurrence>TRUE</ExpandRecurrence>
    <CalendarDate>2013-01-01T12:00:00Z</CalendarDate>
</QueryOptions>";

$soapClient = new SoapClient($wsdl, $authParams);
$params = array('listName' => $list_name, 'viewName' => $view_name, 'rowLimit' => $row_limit, "query" => $query, "query_options" => $query_options);

$rawXMLresponse = $soapClient->GetListItems($params)->GetListItemsResult->any; 
```

结果是从正确的视图中提取的，但它会返回从列表开始（2012 年 9 月）到最后一个事件（2013 年 7 月）的所有事件。无论我是更改“CalendarDate”还是将 DateTime 值更改为“Month”，它仍然会给我相同的结果。当然，这个查询应该只获取 DateTime 期间的事件？

任何帮助将非常感激！

# trigger.io - 找不到 DeviceSupport 目录

> ID：14609529
> 
> 赞同：2
> 
> 时间：2013-01-30T17:00:31.463
> 
> 标签：trigger.io

我收到此错误（见下文）我一直安装 xcode，除了要触发的更新之外没有任何变化，我可以做些什么来修复它？

> 找不到 DeviceSupport 目录。
> 
> [！！] 这可能意味着您没有安装 Xcode，您需要手动启动应用程序并且不会显示日志输出！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T17:59:06.227

您在设备上使用什么版本的 iOS？最近升级到6.1了吗？

问题可能是 Xcode 尚未下载与设备通信所需的内容。如果您打开 Xcode 并查看管理器，您应该会看到左侧边栏中设备旁边的状态指示灯变为绿色。

# apache - 将所有子域重定向到子文件夹，不包括 www

> ID：14609532
> 
> 赞同：1
> 
> 时间：2013-01-30T17:00:37.420
> 
> 标签：apache, .htaccess

这是我到目前为止所拥有的，它有效，但我想排除（www）

```
RewriteBase /
RewriteCond %{HTTP_HOST} [^.]+\.example\.com.*$
RewriteRule (.*) sub/$1 [L] 
```

**编辑：**
例如`jason.example.com`会重定向到`example.com/sub/`
但`www.example.com`会留在根目录：`example.com/`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T00:02:17.647

如果您希望在主机名以子域开头`www`或根本没有子域时不应用该规则，则可以通过修改正则表达式来排除它：

```
RewriteBase /
RewriteCond %{HTTP_HOST} ^((?!www).*)\.example\.com$ [NC]
RewriteRule (.*) sub/$1 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T17:22:46.597

我建议您在 Apache 中使用虚拟主机而不是配置文件。

这是一个很酷的教程：

[http://www.thegeekstuff.com/2011/07/apache-virtual-host/](http://www.thegeekstuff.com/2011/07/apache-virtual-host/)

干杯!

# xcode - 实现解锁现有功能的应用内购买的正确方法是什么？

> ID：14609533
> 
> 赞同：0
> 
> 时间：2013-01-30T17:00:39.710
> 
> 标签：xcode, ios5, in-app-purchase

所以我构建了一个 iOS 应用程序（我的第一个），我想免费分发它。这是一个内容创建应用程序，我的计划是允许用户完全访问以记录最多 5 条内容记录，以用于评估。如果用户喜欢该应用并希望继续生成新内容，则必须通过应用内购买购买解锁。

我查看了文档，我将使用 MKStoreKit 来执行此操作。我知道我将要创建一个非消耗品、非订阅产品来销售。

所以我的问题是，虽然我可以找到很多关于如何进行实际 IAP 的信息，但我找不到任何关于在哪里或如何跟踪它购买的信息。也就是说，我该如何确保应用程序已解锁？是否需要在每次应用启动时往返于 AppStore 服务器？如果是这种情况，我有点担心，因为网络连接不是保证。

我一直在考虑的另一种可能性是在购买解锁时在某处编写某种信号量，无论是文件还是仅修改 .plist 中的设置。从用户体验的角度来看，这当然是最佳的，但它很容易被黑客入侵吗？如果我写一个文件，用户可以拿走那个文件并将它分发给任何人吗？

是否有一些通常在这里使用的标准机制或方法？

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:56:10.990

如果内容已解锁，我通常会检查 Apple 服务器。如果是这样，我更改 .plist 中的某些属性并检查它以解锁内容。有两种常见的方法可以实现：第一种是仅检查属性是否未设置（或具有特定值），另一种更安全，但我认为，不是最好的，是在您的应用程序每次执行时都会再次验证 Apple 服务器。您需要记住的是，如果您的应用程序被黑客入侵，您将无能为力，但是有大量用户（其中​​大多数）不关心黑客攻击，甚至不关心越狱......所以忘记它并在应用程序打开时应用检查，并且仅在尚未解锁时应用。

# jquery - 使用 Deferred.then() 将一些已解决的案例过滤为被拒绝的案例

> ID：14609539
> 
> 赞同：1
> 
> 时间：2013-01-30T17:00:56.063
> 
> 标签：jquery, jquery-deferred, jquery-1.8

我正在做一个可以返回`{status: ok}`或`{status: error}`与其他数据一起返回的 ajax 调用。

我想做一个`.then(doneFilter)`检查`status`成员然后修改的事情，这样延迟的现在只会在状态正常的情况下解决。

我不确定它的语法。有人可以给我写一个例子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T17:14:37.047

这是一个典型的例子：

```
/*  Returns a deferred object.  It is resolved if the ajax call succeeded, and
    is rejected otherwise.
*/
function doAjaxThing() {
    var df = $.Deferred();
    $.ajax('http://someurl.org/path/whatever').done( function(data) {
        if('test for success here')
            df.resolve();
        else
            df.reject();
    }).fail( function() {
        df.reject();
    });

    return df;  
}

doAjaxThing().then( 
    function() { 'success!'; },
    function() { 'failure.'; }
); 
```

不仅要处理成功案例，还要处理失败案例，这一点很重要。您的 ajax 调用可能会失败有两种方式：请求返回`{status: error}`或请求本身由于某种服务器错误而失败。

您还有其他可用的选项。您可以将解析/拒绝调用中的数据传递给您的处理程序。您还可以使用`acceptWith()`and`rejectWith()`将上下文（一个`this`对象）传递给您的处理程序。

如果您还没有阅读[延迟对象文档](http://api.jquery.com/category/deferred-object/)，我建议您阅读。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T17:27:55.490

我认为您想修改 ajax deferred 本身以根据返回状态触发不同的回调。你不能因为`Promise`对象只能被解析一次。看这个例子：

```
var fai = $.Deferred();
fai.then(function () {
    fai.reject();
    console.log(fai.state());
}).done(function () {
    console.log(fai.state()); 
});
fai.resove(); 
```

[http://jsfiddle.net/ExplosionPIlls/QreYY/](http://jsfiddle.net/ExplosionPIlls/QreYY/)

事件链将是调用`.resolve`，然后是`.then`回调。 `.then`来电`.reject`。但是，如果您运行它，您将看到`.reject`调用后的状态仍然是“已解决” *，并且*会`.done`触发回调。

也就是说，如果您的 ajax 请求成功，它将已经被设置为`.resolved`状态并且您无法撤消该状态。

相反，你可以做这样的事情，我认为这更简单：

```
$.ajax(...).done(function (json) {
   if (json && json.status == 'ok') {
      //handle success right here
   }
   else {
      //handle failure right here
   }
}); 
```

# c# - 如何过滤/禁用 WCF 跟踪中记录的异常？

> ID：14609540
> 
> 赞同：0
> 
> 时间：2013-01-30T17:00:57.323
> 
> 标签：c#, wcf, exception, trace

1.  有没有办法防止在 WCF 跟踪中记录某种类型的异常？
2.  更好的是，有没有办法防止记录*一个*特定的异常（我的意思是在特定的代码行抛出一个异常）？

**说明：**

我正在开发两个 Windows 服务 (A) 和 (B)。在服务 (A) 上，我在*app.config*文件中启用了 WCF 跟踪，如下所示：

```
<system.diagnostics>
    <sources>
        <source name="System.ServiceModel" switchValue="Warning" 
                propagateActivity="true">
            <listeners>
                <add name="traceListener" 
                     type="System.Diagnostics.XmlWriterTraceListener"
                     initializeData="C:\WCF-log.txt" />
            </listeners>
        </source>
    </sources>
</system.diagnostics> 
```

在此服务 (A) 上，我有一些代码用于检测其他服务 (B) 是否已关闭，如下所示：

```
try {
    serviceB.Ping(); // Exception is thrown here when serviceB is down, and 
                     // logged in the C:\WCF-log.txt file
} catch {
    // Manage failed ping (log...)
} 
```

现在，服务（B）有时可能会宕机，这很正常。我希望那些引发的异常不要记录在 WCF 跟踪中，因为它们已经由我的应用程序处理，并且我希望只有在存在“真实”时才需要查看*C:\WCF-log.txt*文件问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T07:35:12.927

您应该在跟踪侦听器配置中添加过滤器类型，如下所示

```
<system.diagnostics>
        <sources>
            <source name="System.ServiceModel" switchValue="Warning"
                    propagateActivity="true">
                <listeners >
                    <add name="traceListener"
                         type="System.Diagnostics.XmlWriterTraceListener"
                         initializeData="C:\WCF-log.txt" >
                        <filter type="FilterExceptions"/>
                    </add>                  
                </listeners>
            </source>
        </sources>
    </system.diagnostics> 
```

并且 FilterException 类型应该继承 System.Diagnostics.TraceListener 并覆盖 ShouldFilter 方法，如下所示

```
 public class FilterExceptions : TraceFilter
    {
        public override bool ShouldTrace(TraceEventCache cache, string source, TraceEventType eventType, int id, string formatOrMessage, object[] args, object data1, object[] data)
        {
            // Add exception filter in below if when event type is error
            if (eventType == TraceEventType.Error)
            {
                return false;
            }

            return true;
        }
    } 
```

# ios - 使用 iOS 6 的 iPhone 应用程序中嵌入的 vimeo 视频无法播放

> ID：14609542
> 
> 赞同：4
> 
> 时间：2013-01-30T17:01:01.087
> 
> 标签：ios, objective-c, uiwebview, ios6

我似乎无法在 iOS 6 中播放任何视频。无论是在设备 (iP4) 上还是在模拟器上。

我拥有的是 IB 中的 UIWebView 设置。然后在我的`viewDidLoad`我有以下代码：

```
NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"http://domain.com/app/player.php?vid=%@", [videoDetails objectForKey:@"vid"]]];
NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
[videoWebView loadRequest:requestObj]; 
```

解释一下，vimeo上的视频设置是只允许托管在特定域上，否则会显示错误消息。所以我在 player.php 中设置了一些简单的 HTML，只调用 vimeo 嵌入代码。

当我转到上面有 UIWebView 的视图，并且视频已经加载并且您在 vimeo 视频中看到“播放”图标时，我单击它，然后视频显示一个加载图标，然后大约 5-10秒，控制台输出下面和 UIWebView 只是变白。

控制台输出：

```
2013-01-30 16:50:11.809 My App[2807:907] [MPAVController] Autoplay: Enabling autoplay
2013-01-30 16:50:11.821 My App[2807:907] [MPAVController] Autoplay: Skipping autoplay, disabled (for current item: 0, on player: 1)
2013-01-30 16:50:11.831 My App[2807:907] [MPAVController] Autoplay: Enabling autoplay
2013-01-30 16:50:12.042 My App[2807:907] [MPCloudAssetDownloadController] Prioritization requested for media item ID: 0
2013-01-30 16:50:21.254 My App[2807:907] [MPAVController] Autoplay: Skipping autoplay, disabled (for current item: 0, on player: 1)
2013-01-30 16:50:22.000 My App[2807:907] [MPAVController] Autoplay: Enabling autoplay
2013-01-30 16:50:22.244 My App[2807:907] [MPAVController] Autoplay: Disabling autoplay for pause
2013-01-30 16:50:22.246 My App[2807:907] [MPAVController] Autoplay: Disabling autoplay
2013-01-30 16:50:22.354 My App[2807:907] [MPAVController] Autoplay: Disabling autoplay
2013-01-30 16:50:22.591 My App[2807:907] [MPAVController] Autoplay: Enabling autoplay
2013-01-30 16:50:22.593 My App[2807:907] [MPAVController] Autoplay: Skipping autoplay, disabled (for current item: 0, on player: 1)
2013-01-30 16:50:22.655 My App[2807:907] [MPAVController] Autoplay: Enabling autoplay
2013-01-30 16:50:22.973 My App[2807:907] [MPAVController] Autoplay: Enabling autoplay
2013-01-30 16:50:23.057 My App[2807:907] [MPAVController] Autoplay: Skipping autoplay, disabled (for current item: 0, on player: 1) 
```

在 iOS 5 上，视频按预期播放。问题是，这不仅仅与 vimeo 有关。我尝试了以下方法：

Vimeo 随机公共视频（未嵌入在 domain.com 上托管的文件中）

```
NSString *htmlStringToLoad = [NSString stringWithFormat:@"http://player.vimeo.com/video/32424117?title=0&byline=0&portrait=0&width=320&height=181&frameborder=0"];
[videoWebView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:htmlStringToLoad]]]; 
```

然后再次使用 YouTube：

```
[videoWebView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.youtube.com/watch?v=dABo_DCIdpM"]]]; 
```

我唯一关心的是让它与 Vimeo 视频一起使用，因为这是它们都存储的地方。但我看不出 vimeo 是这里的问题，因为它在 YT 上也不起作用，所以一定是我做错了什么才能让 iOS 6 开心吗？我用谷歌搜索了一下，我似乎根本找不到任何解决方案，即使我不认为只有我发生了这种情况。

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-01T09:55:06.913

为此，我不得不完全放弃 UIWebView。

我不知道您是否在免费 vimeo 帐户上获得此功能，但在我们的 PRO 帐户上，视频设置中有一个“视频文件”选项卡，底部有一个标有“HTTP Live Streaming”的字段，实际上有一个直接链接到您的视频。

然后我使用 MPMoviePlayerViewController 代替 UIWebView 来播放视频。

将 MediaPlayer.framework 添加到“Link Binary With Libraries”设置中。在具有 UIImageView、几个标签和一个播放按钮的视图控制器的 .h 文件中，我导入`#import <MediaPlayer/MediaPlayer.h>`并设置了一个属性`@property(nonatomic, readonly) MPMoviePlayerViewController *player;`

然后，在 .m 文件中：

```
-(IBAction)playVideo:(id)sender{
    NSString *videoString = @"http://player.vimeo.com/external/THE_VIDEO_ID.m3u8?p=standard,mobile&s=UNIQUE_VALUE_FOR_EACH_VIDEO";
    player = [[MPMoviePlayerViewController alloc] initWithContentURL:[NSURL URLWithString:videoString]];
    [player.moviePlayer prepareToPlay];
    [player.view setFrame: self.view.bounds];
    [self.view addSubview: player.view];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(MPMoviePlayerDidExitFullscreen:) name:MPMoviePlayerDidExitFullscreenNotification object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(MPMoviePlayerDidExitFullscreen:) name:MPMoviePlayerPlaybackDidFinishNotification object:nil];
    [player.moviePlayer play];
}

- (void)MPMoviePlayerDidExitFullscreen:(NSNotification *)notification{
    [[NSNotificationCenter defaultCenter] removeObserver:self name:MPMoviePlayerDidExitFullscreenNotification object:nil];
    [[NSNotificationCenter defaultCenter] removeObserver:self name:MPMoviePlayerPlaybackDidFinishNotification object:nil];
    [player.moviePlayer stop];
    [player.moviePlayer.view removeFromSuperview];
} 
```

我确实尝试将 HTTP Live Stream URL 加载到 UIWebView 中，但它似乎不起作用。黑屏短暂出现，中间有 vimeo 播放按钮。然后在一秒钟内全屏播放器打开大约一秒钟，然后关闭，然后 UIWebView 变白。

我仍在对此进行测试，到目前为止，我已经成功地在 iOS 6 和 5.1 上通过 WiFi 播放了我们最长的视频，1 小时 45 分钟，没有问题。但希望这将帮助其他人作为一个开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-13T14:22:35.677

您仍然可以通过从 UIMoviePlayerController 注册通知并处理相应的事件来使用 UIWebview...

```
-(void)viewDidLoad
{

...

[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(videoStarted:)   name:@"UIMoviePlayerControllerDidEnterFullscreenNotification" object:nil];
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(videoFinished:) name:@"UIMoviePlayerControllerDidExitFullscreenNotification" object:nil];
}

-(void)videoStarted:(NSNotification *)notification{
// your code here
}

-(void)videoFinished:(NSNotification *)notification{
// your code here
} 
```

# tkinter - 在 IDLE 中工作，Tkinter 窗口在没有 mainloop() 的情况下不会打开，但会出现错误

> ID：14609544
> 
> 赞同：0
> 
> 时间：2013-01-30T17:01:05.513
> 
> 标签：tkinter, python-idle

我对制作 GUI 很陌生。我在 IDLE (2.7.3) 中工作，想用一个按钮打开一个简单的窗口。这是我的代码：

```
from Tkinter import *
import sys
win=Tk()
button1=Button(win, text = "ok", command = sys.exit, foreground = "red")
button1.pack()
mainloop() 
```

如果我不使用`mainloop()`，窗口将不会打开。如果我确实使用`mainloop()`了，当我单击“确定”按钮时会出现此错误，并且带有该按钮的窗口不会关闭：

```
Traceback (most recent call last):
  File "C:\Python27\GUI.py", line 6, in <module>
    mainloop()
  File "C:\Python27\lib\lib-tk\Tkinter.py", line 325, in mainloop
    _default_root.tk.mainloop(n)
  File "C:\Python27\lib\lib-tk\Tkinter.py", line 1412, in __call__
    raise SystemExit, msg 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T17:32:50.503

我将您的代码复制粘贴到 python 文件中，并在 Windows 7 上从命令提示符运行它，它运行良好。也许这是您的 Tkinter 安装的问题？

顺便说一句，“mainloop”行是强制性的。粗略地解释一下，这就是将 UI 绘制到屏幕上的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T17:48:44.453

如果您在 IDLE 中运行 Tkinter 的东西，请尝试`command = sys.exit`用`command = win.destroy`. 这样你的小部件就会被破坏，但你不会弄乱 IDLE 本身，这也取决于 Tkinter 的运行。

这些讨论也很重要：

*   [使用 IDLE 时退出 tkinter](http://bytes.com/topic/python/answers/29278-exiting-tkinter-when-using-idle)
*   [退出 tkinter gui 程序](http://www.daniweb.com/software-development/python/threads/66698/exit-a-tkinter-gui-program)

# java - Java中的多线程通信

> ID：14609548
> 
> 赞同：0
> 
> 时间：2013-01-30T17:01:08.883
> 
> 标签：java, multithreading

我创建了许多线程。我知道每个线程的名称（假设通过我设置线程名称的外星机制。）现在我在一个线程内，想向另一个线程发送消息。

我正在尝试编写 Pastry 和 Chord 协议的模拟器。我不能有多个分布式节点，所以我创建了多个线程。现在我希望每个线程彼此发送和接收消息。我已将每个节点名称设置为其 IP（随机生成的数字）。现在我不知道如何将消息从一个节点发送到另一个节点。如果您知道另一个线程的名称，请告诉我如何将消息从一个线程发送到另一个线程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T17:07:54.833

我会建议某种消息系统。最简单的方法是创建一个线程安全的 FIFO 并将其传递给每个线程。如果您想直接向每个不同的线程发送消息，请为每个线程创建一个“主题”。

不要试图在使用线程名称时破解某些东西，它只会在以后限制你。

从评论中粘贴，以便我可以解析它：

```
私有静态 BlockingQueue[] 队列；
私有静态 int queueNum = 0;
公共静态无效新队列（字符串 ip）
{
    queue[queueNum] = new ArrayBlockingQueue(1024);
    尝试{队列[queueNum].put(ip); }
    catch (InterruptedException e){e.printStackTrace(); }
    队列号++；
}

```

哦，我明白你的问题了。您永远不会为 BlockingQueue 分配值。尝试将该行更改为：

```
私有静态 BlockingQueue[] queue=new BlockingQueue[10];
```

这将允许你 10 个队列。

我还建议您使用 HashMap 而不是数组，这样您就可以随意命名、添加和删除队列。而不是 queue[2] 您将解决 queue.get("Thread1Queue") 或更具描述性的内容。

注意对评论的回应： HashMap 通常可以替换数组，它的查找速度几乎一样快，但它使用任何索引而不是数字——字符串、枚举、对象，任何你想要的（只要它有哈希和等于方法被覆盖），但通常是字符串。

因此，如果您要存储一堆队列，并且想要具体命名它们，您可以说：

```
HashMap queues=new HashMap();
queues.put("queue1", new ArrayBlockingQueue(1024));
queues.put("queue2",new ArrayBlockingQueue(1024));
...

```

然后，每当您想访问一个时，您都可以使用：

```
queues.get("queue1").put(new ThingToAddToArrayBlockingQueue())...

```

将“要添加的内容”放入 queue1。

如果您只想要其中的“一堆”并且不需要知道哪个是哪个（只是可以提供通用任务的线程集合），则并发包中有特定的集合/模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T17:04:31.890

线程之间通信的常用方法是将对象传递给每个线程，然后允许它们之间进行通信。请记住，由多个线程访问的该对象的所有字段和方法都应该[同步](http://docs.oracle.com/javase/tutorial/essential/concurrency/sync.html)。

但是当你想模拟一个网络协议时，为什么不一路走，使用[网络套接字](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/Socket.html)进行进程间通信呢？只需让每个线程监听 127.0.0.1 上的不同套接字即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T17:34:51.670

如果您想发送消息，然后让它们由其他线程处理，您需要一个共享对象（队列、映射等），线程可以将消息泵入其中。接收线程必须检查传入的消息，拉取它们并进行必要的处理。

# c# - 数据绑定到改变元素属性

> ID：14609549
> 
> 赞同：0
> 
> 时间：2013-01-30T17:01:16.670
> 
> 标签：c#, wpf, binding

我正在开发一个小型 WPF 应用程序，其中我有一个绑定到后面代码中的 ObservableCollection 的组合框：

```
public Molecule CurrentMolecule { get; set; }
public ObservableCollection<string> Formulas { get; set; }

public MainWindow()
{
     CurrentMolecule = new Molecule();
     Formulas = new ObservableCollection<string>(CurrentMolecule.FormulasList.ToList());
     DataContext = this;

     InitializeComponent();
}

<ComboBox x:Name="cmbFormula" ItemsSource="{Binding Path=Formulas}" SelectionChanged="cmbFormula_SelectionChanged"/> 
```

这可以很好地填充我的组合框，`CurrentMolecule.FormulasList`但是如果在某些时候我设置`CurrentMolecule`为 Molecule 的新实例，则数据绑定不再有效。我是否需要实现某种 OnPropertyChanged 事件，以便无论组合框的内容如何，​​都将与`CurrentMolecule.FormulasList`?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T17:14:34.640

您必须实施`INotifyPropertyChanged`，然后更改才会在 UI 中更新。

这是我对您的代码所做的修改。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using System.ComponentModel;
using System.Collections.ObjectModel;

namespace WpfApplication1
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window, INotifyPropertyChanged
    {
        private Molecule _CurrentMolecule;

        public Molecule CurrentMolecule
        {
            get
            {
                return _CurrentMolecule;
            }
            set
            {
                _CurrentMolecule = value;
                OnPropertyChanged("CurrentMolecule");
                Formulas =  new ObservableCollection<string>(CurrentMolecule.FormulasList.ToList());
            }
        }

        private ObservableCollection<string> _Formulas;

        public ObservableCollection<string> Formulas
        {
            get { return _Formulas; }
            set
            {
                _Formulas = value;
                OnPropertyChanged("Formulas");
            }
        }

        public MainWindow()
        {
            InitializeComponent();

            CurrentMolecule = new Molecule();
            DataContext = this;
        }

        public event PropertyChangedEventHandler PropertyChanged;

        public void OnPropertyChanged(string propertyName)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
            }
        }
    }
} 
```

编辑：更好的方法是创建一个 ViewModel，然后将其绑定到`Window`.

定义一个新类`ViewModel`，如下所示。请注意，您可能想要更改命名空间

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.ComponentModel;
using System.Collections.ObjectModel;

namespace WpfApplication1
{
    public class ViewModel : INotifyPropertyChanged
    {
        #region Properties
        private Molecule _CurrentMolecule;
        public Molecule CurrentMolecule
        {
            get
            {
                return _CurrentMolecule;
            }
            set
            {
                _CurrentMolecule = value;
                OnPropertyChanged("CurrentMolecule");
                Formulas = new ObservableCollection<string>(CurrentMolecule.FormulasList.ToList());
            }
        }

        private ObservableCollection<string> _Formulas;
        public ObservableCollection<string> Formulas
        {
            get { return _Formulas; }
            set
            {
                _Formulas = value;
                OnPropertyChanged("Formulas");
            }
        }
        #endregion

        #region Constructor
        public ViewModel()
        {
            CurrentMolecule = new Molecule();
        }
        #endregion

        #region INotifyPropertyChanged implementation
        public event PropertyChangedEventHandler PropertyChanged;
        public void OnPropertyChanged(string propertyName)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
            }
        }
        #endregion
    }
} 
```

修改`MainWindow`文件后面的代码如下

```
public MainWindow()
{
    InitializeComponent();

    DataContext = new ViewModel();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T17:13:47.750

您可能缺少 WPF 控件数据上下文基础知识。如果您使用 {Binding CurrentMolecule.FormulasList} 之类的绑定或父控件 datacontext 在您交换该项目的 DataContext 时绑定到“CurrentMolecule”，则绑定将重置。如果您希望即使在父数据上下文发生更改时也将数据上下文绑定到 FormulasList。您需要将该上下文直接绑定到 FormulasList 属性，并确保其他父控件不使用 CurrentMolecule 作为数据上下文，即使它的实例在您的 ViewModel 中发生更改。

# javascript - JQuery 滚动条错误

> ID：14609554
> 
> 赞同：0
> 
> 时间：2013-01-30T17:01:32.097
> 
> 标签：javascript, jquery

我正在使用页面滚动器的这个示例，它还将导航设置为滚动时处于活动状态。

[例子](http://jsfiddle.net/m2zQE/)

希望你能帮忙。

在控制台中，我看到了这个错误。

> TypeError: $(...).offset(...) is undefined [Break On This Error]
> 
> contentTop.push( $( $(this).attr('href') ).offset().top );

HTML

```
<nav id="nav">
    <ul>
        <li><a href="#1">B</a></li>
        <li><a href="#2">B</a></li>
        <li><a href="#3">C</a></li>
        <li><a href="#4">D</a></li>
        <li><a href="#5">E</a></li>
        <li><a href="#6">F</a></li>
    </ul>
</nav> 
```

JS

```
smoothScroll: function() {
     var topRange      = 200,  // measure from the top of the viewport to X pixels down
         edgeMargin    = 20,   // margin above the top or margin from the end of the page
         animationTime = 1200, // time in milliseconds
         contentTop = [];

     // Stop animated scroll if the user does something
     $('html,body').bind('scroll mousedown DOMMouseScroll mousewheel keyup', function(e){
     if ( e.which > 0 || e.type == 'mousedown' || e.type == 'mousewheel' ){
      $('html,body').stop();
     }
    })

     // Set up content an array of locations
     $('#nav').find('a').each(function(){
      contentTop.push( $( $(this).attr('href') ).offset().top );
     })

     // Animate menu scroll to content
      $('#nav').find('a').click(function(){
       var sel = this,
           newTop = Math.min( contentTop[ $('#nav a').index( $(this) ) ], $(document).height() - $(window).height() ); // get content top or top position if at the document bottom
       $('html,body').stop().animate({ 'scrollTop' : newTop }, animationTime, function(){
        window.location.hash = $(sel).attr('href');
       });
       return false;
     })

     // adjust side menu
     $(window).scroll(function(){
      var winTop = $(window).scrollTop(),
          bodyHt = $(document).height(),
          vpHt = $(window).height() + edgeMargin;  // viewport height + margin
      $.each( contentTop, function(i,loc){
       if ( ( loc > winTop - edgeMargin && ( loc < winTop + topRange || ( winTop + vpHt ) >= bodyHt ) ) ){
        $('#nav li a')
         .removeClass('selected')
         .eq(i).addClass('selected');
       }
      })
     })
  }, 
```

# python - Python MySQLdb从一个文件执行多个语句而不解析

> ID：14609555
> 
> 赞同：0
> 
> 时间：2013-01-30T17:01:33.500
> 
> 标签：python, mysql-python

是否可以使用 Python mysqldb 库应用 MySQL 批处理文件。到目前为止，我试图“执行”文件的内容：

```
cur = connection.cursor()
cur.execute(file(filename).read())
cur.commit() # and without commit 
```

这仅适用于单个语句。否则我得到错误：

```
Failed to apply content. Error 2014: Commands out of sync; you can't run this command now 
```

我打算支持任何类型的 MySQL 模式、表更改，因此不能选择逐行解析文件。除了从 Python 调用 mysql 客户端之外，还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T10:38:10.420

我想你正在使用 cx_oracle？问题是由于在游标中调用了一个不存在的方法，因为它应该在连接中调用。应该是

```
 cur = connection.cursor()
    cur.execute(file(filename).read())
    connection.commit() 
```

# sql-server-2008-r2 - 如何清除超过 6 个月的数据？

> ID：14609556
> 
> 赞同：0
> 
> 时间：2013-01-30T17:01:35.067
> 
> 标签：sql-server-2008-r2, delete-row

我创建了一个 SQL 作业来清除保留期超过 6 个月的数据，但它正在从表中删除数据。

这是我的脚本的样子：

```
DECLARE @Retention_Date DATETIME = DATEADD(MM, -6, GETDATE()) 

PRINT 'Step Start: Purge'

DELETE FROM DBA.PD_WaitStats            WHERE Created_On > @Retention_Date

DECLARE @StepEndTime DATETIME = GETDATE()
PRINT 'Step End Time : ' + CONVERT(VARCHAR, @StepEndTime, 109)
GO 
```

如何删除 x 个月前的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:03:38.117

很简单：-

```
DELETE FROM DBA.PD_WaitStats WHERE Created_On < @Retention_Date 
```

注意小于符号。你想删除旧数据，对吧？

# c# - 保护 HttpWebRequest 以便我可以发送凭据？

> ID：14609559
> 
> 赞同：0
> 
> 时间：2013-01-30T17:01:47.720
> 
> 标签：c#, asp.net

我有以下代码连接到我的 php 服务器并从中检索数据。唯一的事情是，我需要将用户名和密码从这个 web 请求安全地发送到 PHP 服务器。查看 webrequest 类的文档，有一个 credentials 属性和一个 preauthenticate 属性。我假设这些是用于网络凭据（我所有的用户都在 AD 中）。

是否可以使用凭据来保护此发布请求，或者这只是一个坏主意？我还找到了 SetBasicAuthHeader - 我会阅读这个，看看它是否有帮助。所有流量都将通过 SSL 从 ASPX 站点到 PHP 站点

```
 // variables to store parameter values
    string url = "https://myphpserver.php";

    // creates the post data for the POST request
    string postData = "Username=" + username + "&Password=" + "&UID=" + UniqueRecID;

    // create the POST request
    HttpWebRequest webRequest = (HttpWebRequest)WebRequest.Create(url);
    webRequest.Method = "POST";
    webRequest.ContentType = "application/x-www-form-urlencoded";
    webRequest.ContentLength = postData.Length;

    // POST the data
    using (StreamWriter requestWriter2 = new StreamWriter(webRequest.GetRequestStream()))
    {
        requestWriter2.Write(postData);
    }

    //  This actually does the request and gets the response back
    HttpWebResponse resp = (HttpWebResponse)webRequest.GetResponse();

    string responseData = string.Empty;

    using (StreamReader responseReader = new StreamReader(webRequest.GetResponse().GetResponseStream()))
    {
        // dumps the HTML from the response into a string variable
        responseData = responseReader.ReadToEnd();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T17:08:04.033

使用 HTTPS 时，您的数据在消息和传输范围内是安全的。这意味着没有人可以对其进行解码或嗅探数据包。我建议你阅读这篇文章[HTTPS Wiki](http://en.wikipedia.org/wiki/HTTP_Secure)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T17:08:47.233

SetBasicAuthHeader 用于[HTTP 基本访问身份验证](http://en.wikipedia.org/wiki/Basic_access_authentication)，因此在您处理应用程序级别的身份验证时无济于事。真的，这并不比在浏览器中访问页面更不安全。我看到您正在使用 SSL，因此您的请求无论如何都会被加密，您无需担心。

如果您出于其他原因担心（尽管我想不出为什么），听起来您可以控制 PHP 端，因此您可以加密密码并添加额外的 POST 参数，以便服务器知道解密它。

# git - Git 存储库结构和模块化

> ID：14609566
> 
> 赞同：1
> 
> 时间：2013-01-30T17:02:10.917
> 
> 标签：git, repository, directory-structure

我一起工作的团队决定从 svn 转向 git，我相信这是一件好事。我负责迁移并重新构建当前的 svn 布局。

我们目前在**svn**中的内容如下所示：

```
/externals  (external libs copyed there like cunit, etc.)
/include    (public headers only)
    /libA
    /libB
    /libC
/source     (source and private headers)
    /libA
    /libB
    /libC
/tests      (tests projects)
    /libA
    /libB
    /libC 
```

在对 git 进行一些研究时，我发现模块化方法是首选。所以我想出了这个结构：

```
/externals      (repo externals.git)
/libA           (repo libA.git)
   /include
   /source
   /tests
/libB           (repo libB.git)
    ... 
```

**但是，我认为如果**它们相互依赖（libB 需要 libA，libD 需要 libA 和 libC），我认为这种方式打破了模块化和拥有不同库的意义。您需要离开 libB 的范围才能将 libA 添加为依赖项。

那么我应该在每个库中添加一个“依赖项”文件夹并将它们作为子模块添加到那里，还是应该保留初始的 git 布局？

这里的首选方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:44:11.230

More reliable approach is to have independent project lifecycle for each module. Also, when you release a library, you should maintain version number. The dependency should tell which module and which version of library, e.g. libB:1.0.0 needs libA:1.2.5, libD:3.4.5 needs libA:1.3.7 and libC:5.3.9\. There are dependency management systems, e.g. `maven` in java world, `deb` in linux distributives, `nuget` in c#. They allow to track exact versions and see conflicts in version numbers, e.g. if you have a myApp:6.2.5 which needs libB:1.0.0 and libD:3.4.5 it means that the myApp depends on two different (potentially incompatible) versions of libA - 1.2.5 and 1.3.7.

When you could have a Continious Integration server which will build changed modules and rebuild dependencies and run tests to hunt down compatibility issues very fast.

In other words, the version dependency management is not task for version control system such as git or svn, better to use special tools. However you could use the git submodules or svn-externals to handle it, but it doesn't work very well.

# ruby-on-rails - has_and_belongs_to_many 和 accept_nested_attributes_for

> ID：14609569
> 
> 赞同：1
> 
> 时间：2013-01-30T17:02:24.270
> 
> 标签：ruby-on-rails, ruby-on-rails-3, has-and-belongs-to-many

```
class Trip
  has_many   :trip_places
  has_many   :places, through: :trip_places

  accepts_nested_attributes_for :places
end

class Place
  has_many :trip_places
  has_many :trips, through: :trip_places

  validates :name, uniqueness: true
end

class TripPlace
  belongs_to :trip
  belongs_to :place
end 
```

因此，我们通过trip places 得到了一个包含许多地方的trip，并接受地方的嵌套属性。此外，地点的名称必须是唯一的。

我想拥有以下功能，但找不到优雅的解决方案：

假设我们创建了一个 trip `T`，有两个地方`P1 = 'hawaii'`和`P2 = 'costa rica'`

如果我编辑行程并更改`hawaii`为`bora bora`，它将修改`Place`.

问题是我想创建一个名为的新地点`bora bora`并修改 TripPlace 模型以使用新地点更新`place_id`。

同样的事情会破坏，如果我破坏`place`表单中的 a ，我只想从 中删除引用`TripPlace`，而不是实际的`Place`

当然，创建功能应该是相似的，如果地点存在，只需创建 TripPlace 引用。

现在，我不认为 accept_nested_attributes_for 真的有帮助，但想不出一个好的解决方案

# ms-access - 访问 VBScript ADODB.Command 给出“参数类型错误”错误

> ID：14609572
> 
> 赞同：1
> 
> 时间：2013-01-30T17:02:37.453
> 
> 标签：ms-access, vbscript

我有一个打开 Access DB 的 VBscript，我需要从其中一个表中创建一个查询，然后导出该表。我需要创建查询，因为我需要格式化数字列，因为在 DB 中它们有 10 个小数位，但导出时只有 2 个。我需要全部 10 个。我不控制这个 Access DB，而是下载它所以要求来源进行此查询不是一种选择。

以下错误是：“ADODB.Command：参数类型错误，超出可接受范围，或相互冲突。” 我错过了什么？

```
Dim oAccess
Set oAccess = CreateObject("Access.Application")

oAccess.OpenCurrentDatabase("dbfile here")

Dim oQry
Set oQry = CreateObject("ADODB.Command")

oQry.ActiveConnection = oAccess.CurrentProject.Connection
oQry.CommandType = 1
oQry.CommandText = "create view qryTable as select * from table"
oQry.Execute

Set oQry = Nothing
Set oAccess = Nothing 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T18:15:23.530

给`.ActiveConnection`一个字符串值对我有用。

```
oQry.ActiveConnection = oAccess.CurrentProject.Connection.ConnectionString 
```

请注意，如果该字符串中的*Provider*是“ *Jet.OLEDB* ”并且您使用的是 64 位 Windows，则必须以 32 位模式运行脚本；我使用了`cscript.exe`from的版本`\Windows\SysWOW64`。

但是我不确定为什么要打开 Access 应用程序实例，然后创建并执行`ADODB.Command`. 也许这是一种重新使用应用程序的尝试，`CurrentProject.Connection`这样您就不需要从头开始创建一个。

不管是什么原因，如果你有一个 Access 实例，你就不需要`ADODB.Command`. 只需`.Execute`使用`CurrentProject.Connection`.

```
Dim oAccess, sSql

Set oAccess = CreateObject("Access.Application")
oAccess.OpenCurrentDatabase("dbfile here")

sSql = "create view qryTable as select * from [table]"
oAccess.CurrentProject.Connection.Execute sSql

Set oAccess = Nothing 
```

# networking - 多播订户对交换机施加了多少额外负载？

> ID：14609573
> 
> 赞同：0
> 
> 时间：2013-01-30T17:02:37.807
> 
> 标签：networking, multicast

如果您的交换机至少有一个多播地址的订阅者，那么每个额外的订阅者会增加多少额外的负载？

示例：您有一个 10G 交换机（带 IGMP），有 10 个服务器，没有其他活动。当 Server1 订阅 1G 组播馈送时，交换机将有 1G 负载。Server2 和 Server3 订阅后的负载是多少？显然到交换机的流量不会增加，但是交换机的内部负载呢？

如果没有 IGMP，答案会有什么不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T22:31:08.093

首先，为您提供一些背景信息。

路由器和交换机的传统定义大致如下：

*   路由器：能够将数据包从一个 IP 子网路由到不同 IP 子网的设备
*   交换机：能够在同一 IP 子网内交换数据包的设备

然而，这一传统定义如今已不再适用，因为我们的交换机可以将流量从一个 IP 子网路由到另一个 IP 子网，甚至可以以线速执行复杂的操作，例如 QoS。

因此，通常更容易重新定义路由器和交换机，如下所示：

*   路由器：使用 CPU 路由数据包的设备，通常检查 OSI 层更高的部分数据包。
*   交换机：带有 ASIC(s)（又名交换芯片）的设备，它以全线速切换/路由流量。这意味着如果交换机有 24 个 1Gbps 端口，它将能够切换 24Gbps 双向流量而不会丢失任何数据包。

现在，要回答您的问题，重要的是要确定交换机中的 ASIC 是否能够处理多播流量。如果是这样，添加“负载”确实不是问题，只要您确保每个交换机端口不拥塞（例如，2Gbps 的流量试图从 1Gbps 端口流出）。如果交换机中的 ASIC 无法处理多播流量，则交换机很可能只会将所有多播流量发送到 CPU。然后由软件决定每个数据包的去向。交换机上的 CPU 并不强大，因为它们的主要作用不是路由/交换数据包，而是*管理*交换机（例如，配置 ASIC 以便正确交换数据包）。因此，如果您的交换机正在向 CPU 发送数据包，则交换机将会出现问题。您不会通过 CPU 获得接近 1Gbps 的多播。

如果没有 IGMP，默认情况下，交换机将淹没所有端口上的流量。同样，这对交换机本身来说不是问题，因为它可以以线速处理。它可能会导致网络的其他部分出现问题，因为流量被不必要地复制了。

之所以这么长的答案是因为您的示例中的“10G 交换机”一词非常具有误导性，它使我相信您可能认为功能强大的 CPU 位于交换机的中心，能够执行 10Gbps 双向方向切换。事实并非如此，因此谈论交换机上的“负载”通常没有什么意义。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T17:12:51.227

多播的整个想法是它是高效的。一个用户下游的存在会导致交换机发送其自己的上游的 IGMP 加入请求，并将传入的多播传递到下游，而不会重复。除了增加该组的内部订阅者计数之外，添加更多下游订阅者根本没有任何影响。当它变回零时，它会发送自己上游的 IGMP 离开请求。

我不知道您所说的“没有 IGMP”是什么意思。没有 IGMP 就没有 UDP 多播这样的东西。这在术语上是矛盾的。

# c - 将字符数组打印到 GDB 中的文件

> ID：14609577
> 
> 赞同：13
> 
> 时间：2013-01-30T17:02:57.683
> 
> 标签：c, gdb

我有一个包含大约 100k 个条目的字符数组。似乎在我的功能中 `print *buffer`它被过早地切断了。我能做些什么来延长 gdb 将打印到控制台的字符数量吗？如果没有，我可以将此变量打印到文件中吗？我尝试使用转储命令，但似乎想不出正确的方法。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-09-13T06:45:30.857

我想你想要这样的东西：

```
(gdb) dump binary memory ~/file.bin 0x100390f4c (0x100390f4c + 940) 
```

转储命令使用起来有点尴尬。它需要一个开始和结束地址，以及指示转储内容的表达式（您可以使用`value`而不是`memory`指定表达式，如果这对您有用，但有时我宁愿具体。）但它似乎（正如我'已经在上面测试过）无论如何你都可以使用表达式，因为我已经根据我想要转储的起始地址以及我想要的字节数指定了上面的结束地址。

您还可以执行以下操作（传入导致指针值而不是指针本身值的表达式）：

```
(gdb) dump binary memory ~/file.bin buf (buf + len) 
```

有关详细信息，请参阅[此处的文档](http://sourceware.org/gdb/onlinedocs/gdb/Dump_002fRestore-Files.html)。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-30T17:13:54.743

```
(gdb) help x
Examine memory: x/FMT ADDRESS.
ADDRESS is an expression for the memory address to examine.
FMT is a repeat count followed by a format letter and a size letter.
Format letters are o(octal), x(hex), d(decimal), u(unsigned decimal),
  t(binary), f(float), a(address), i(instruction), c(char) and s(string).
Size letters are b(byte), h(halfword), w(word), g(giant, 8 bytes).
The specified number of objects of the specified size are printed
according to the format.

Defaults for format and size letters are those previously used.
Default count is 1\.  Default address is following last thing printed
with this command or "print".
(gdb) x/8b array
0xbffd7670:     0       0       0       0       0       0       0       0
(gdb) x/16b array
0xbffd7670:     0       0       0       0       0       0       0       0
0xbffd7678:     0       0       0       0       0       0       0       0
(gdb) x/128b array
0xbffd7670:     0       0       0       0       0       0       0       0
0xbffd7678:     0       0       0       0       0       0       0       0
0xbffd7680:     0       0       0       0       0       0       0       0
0xbffd7688:     0       0       0       0       0       0       0       0
0xbffd7690:     0       0       0       0       0       0       0       0
0xbffd7698:     0       0       0       0       0       0       0       0
0xbffd76a0:     0       0       0       0       0       0       0       0
0xbffd76a8:     0       0       0       0       0       0       0       0
0xbffd76b0:     0       0       0       0       0       0       0       0
0xbffd76b8:     0       0       0       0       0       0       0       0
0xbffd76c0:     0       0       0       0       0       0       0       0
0xbffd76c8:     0       0       0       0       0       0       0       0
0xbffd76d0:     0       0       0       0       0       0       0       0
0xbffd76d8:     0       0       0       0       0       0       0       0
0xbffd76e0:     0       0       0       0       0       0       0       0
0xbffd76e8:     0       0       0       0       0       0       0       0
(gdb) 
```

如果您还想打印 ASCII 字符符号，请使用`x/<size>c`.

```
(gdb) set logging file ~/gdb_dump.txt
(gdb) set logging on
Copying output to /home/mminich/gdb_dump.txt.
(gdb) x/26c array
0xbfff4b20:     97 'a'  98 'b'  99 'c'  100 'd' 101 'e' 102 'f' 103 'g' 104 'h'
0xbfff4b28:     105 'i' 106 'j' 107 'k' 108 'l' 109 'm' 110 'n' 111 'o' 112 'p'
0xbfff4b30:     113 'q' 114 'r' 115 's' 116 't' 117 'u' 118 'v' 119 'w' 120 'x'
0xbfff4b38:     121 'y' 122 'z'
(gdb) set logging off
Done logging to /home/mminich/gdb_dump.txt.
(gdb) 
```

顺便说一句，我完全同意 William Pursell 在您的问题下的评论：“我发现在执行数据转储的代码中定义函数要容易得多，只需从 gdb 调用它们。（将定义包装在 #ifdef DEBUG 中）”

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-06-25T05:53:57.137

要将无限字符打印到控制台，请使用

```
set print elements 0 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-01-18T15:52:50.213

我个人使用嵌入式 python 来转储数据。例如：

```
(gdb) pi open("output_data.log","w").write(gdb.execute("print myarray@100000",to_string=True)) 
```

# html - 为什么and不起作用？

> ID：14609578
> 
> 赞同：11
> 
> 时间：2013-01-30T17:02:58.553
> 
> 标签：html, css, css-reset

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-30T17:05:54.037

因为[reset.css](http://www.korsholm-jagtrejser.dk/fileadmin/templates/reset.css)样式表`font: inherit;`覆盖了浏览器的 CSS：

```
html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
b, u, i, center,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td,
article, aside, canvas, details, embed,
figure, figcaption, footer, header, hgroup,
menu, nav, output, ruby, section, summary,
time, mark, audio, video { margin: 0; padding: 0; border: 0; font: inherit; font-size: 100%; vertical-align: baseline;} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-30T17:06:15.870

重置样式表有`font: inherit;`一个选择器，该选择器匹配许多不同的东西，包括`b`和`i`。[`font`](http://www.w3.org/TR/css3-fonts/#font-prop)包括`font-weight`，`font-style`因此它将这些设置为父元素的值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T17:07:13.270

您在第 19 行的 reset.css 中`inherit`为标签设置了“字体” 。删除 b 标签或为其添加新选择器以更改字体粗细。`b`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T17:07:47.447

当您使用 CSS Reset 时，它会重置所有样式。现在您需要使用 CSS UnReset。我推荐使用[**Vanilla CSS Un-Reset**](http://noscope.com/vanilla-css)。

完整的代码在这里给出：

```
/**
 * Start Vanilla CSS 1.0.2 
 */ 
body {
    font: 9pt/1.5em sans-serif;
}
pre, code, tt {
    font: 1em/1.5em 'Andale Mono', 'Lucida Console', monospace;
}
h1, h2, h3, h4, h5, h6, b, strong {
    font-weight: bold;
}
em, i, dfn {
    font-style: italic;
}
dfn {
    font-weight:bold;
}
p, code, pre, kbd {
    margin:0 0 1.5em 0;
}
blockquote {
    margin:0 1.5em 1.5em 1.5em;
}
cite {
    font-style: italic;
}
li ul, li ol {
    margin:0 1.5em;
}
ul, ol {
    margin:0 1.5em 1.5em 1.5em;
}
ul {
    list-style-type:disc;
}
ol {
    list-style-type:decimal;
}
ol ol {
    list-style: upper-alpha;
}
ol ol ol {
    list-style: lower-roman;
}
ol ol ol ol {
    list-style: lower-alpha;
}
dl {
    margin:0 0 1.5em 0;
}
dl dt {
    font-weight:bold;
}
dd {
    margin-left:1.5em;
}
table {
    margin-bottom:1.4em;
    width:100%;
}
th {
    font-weight:bold;
}
th, td, caption {
    padding:4px 10px 4px 5px;
}
tfoot {
    font-style:italic;
}
sup, sub {
    line-height:0;
}
abbr, acronym {
    border-bottom: 1px dotted;
}
address {
    margin:0 0 1.5em;
    font-style:italic;
}
del {
    text-decoration: line-through;
}
pre {
    margin:1.5em 0;
    white-space:pre;
}
img.centered, .aligncenter, div.aligncenter {
    display: block;
    margin-left: auto;
    margin-right: auto;
}
img.alignright {
    display: inline;
}
img.alignleft {
    display: inline;
}
.alignright {
    float: right;
    margin-left: 10px;
}
.alignleft {
    float: left;
    margin-right: 10px;
}
img {
    max-width: 100%;
}
* html .clearfix {
    height: 1%;
}
* + html .clearfix {
    display: inline-block;
}
.clearfix:after {
    content: ".";
    display: block;
    height: 0;
    clear: both;
    visibility: hidden;
}
* html .group {
    height: 1%;
}
* + html .group {
    display: inline-block;
}
.group:after {
    content: ".";
    display: block;
    height: 0;
    clear: both;
    visibility: hidden;
}
/**
* End Vanilla CSS
*/ 
```

好消息是，您可以使用任何需要和不需要的东西。

# ios - 每次我按下调试行调用 NSMakeRange 的跳过按钮时都会进入 NSMakeRange

> ID：14609582
> 
> 赞同：0
> 
> 时间：2013-01-30T17:03:27.453
> 
> 标签：ios, xcode, step-into

当我调试我的应用程序时，每次我按下调试行调用 NSMakeRange 的**跳过按钮时，它都会****进入NSMakeRange。**为什么我会收到此错误？

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:31:21.323

发生这种情况是因为`NSMakeRange`它是一个内联函数，这意味着它不是一个真正的函数，编译器会在你使用它的任何地方复制它的代码（有点像宏），所以它的代码实际上是你代码的一部分。**

# jquery - jQuery ajax 智能恢复调用

> ID：14609583
> 
> 赞同：2
> 
> 时间：2013-01-30T17:03:36.163
> 
> 标签：jquery, ajax

在某些情况下，ajax 请求失败并且没有理由重新尝试重新发送最后一个请求，例如当收到错误代码 404、405 等时 - 因为新的尝试将始终导致相同的结果。

但在某些情况下，如服务器繁忙、超时和其他情况（？）可能会很有趣，让一个例程不断尝试重新发送请求，并且当它达到限制时，如果用户想要停止请求，则向用户显示一条消息尝试 - 就像在 gmail 中，当用户失去连接时。

下面我有我需要的开始。

```
$.ajaxSetup({
   error: function(msg,e) { 
      console.warn(msg); // Example: "NetworkError: 405 Method Not Allowed ..."
      console.warn(e); // Exception obj
   }
}); 
```

通常除了繁忙的服务器，超时和其他情况我可以重试吗？如果是这样，我如何从ajax（URL，发布数据......）获取错误代码和最后一个请求？

# ios - 有趣的重叠 UIScrollView 难题

> ID：14609584
> 
> 赞同：3
> 
> 时间：2013-01-30T17:03:37.740
> 
> 标签：ios, uiscrollview, touch, logic

假设您有两个滚动视图，一个是垂直的，一个是水平的，它们以“加号”模式相交。假设您在加号的中心有一个对象（例如 UIImageView）。如果触摸对象并向上滚动，则希望对象在垂直滚动视图中向上滚动。但是，如果您触摸对象并横向滚动，您希望它在水平滚动视图中滚动。

问题：

1.  对象最初在哪个滚动视图中？还是两者都没有？在检测到哪个滚动视图开始滚动之前，您不知道对象在哪个滚动视图中。

2.  如果垂直滚动视图在顶部，水平滚动视图将不会在滚动视图重叠的中心区域接收触摸。

谁能想到这个问题的任何解决方案？（改变设计不是解决方案）

另一种思考方式是：您有一个 100x100 的瓷砖网格，但您一次只能在屏幕上看到一个 10x10 的网格。您希望能够横向滚动每一行，但也希望能够垂直滚动每一列。显然，在每次新的触摸/滚动开始之前，滚动位置必须锁定到最接近的磁贴大小倍数。但这意味着在任何给定时间，任何图块都可以处于水平或垂直滚动​​视图中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-10T08:16:50.120

使用（单个）滚动视图（带有`directionLockEnabled = YES`）作为其物理特性，但实际上不要使其成为您的瓷砖的超级视图。

有关此技术的更多信息，请参阅 WWDC2012 视频“使用滚动视图增强用户体验”。

# ruby - 如何在 Ruby 中显示动态 case 语句

> ID：14609586
> 
> 赞同：-1
> 
> 时间：2013-01-30T17:03:38.133
> 
> 标签：ruby, case

我将如何编写一个`case`语句来列出数组中的所有元素，允许用户选择一个，并对该元素进行处理？

我有一个数组：

```
array = [ 'a', 'b', 'c', 'd' ] 
```

最终我希望它表现得像这样：

```
Choices:
1) a
2) b
3) c
4) d

Choice => 
```

在用户选择 3 之后，我将根据用户的选择进行处理。我可以很容易地在 bash 中做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:44:13.070

Ruby 没有像 shell 脚本语言那样的内置菜单。在做菜单时，我倾向于构建一个可能选项的哈希并对其进行操作：

```
def array_to_menu_hash arr
  Hash[arr.each_with_index.map { |e, i| [i+1, e] }]
end

def print_menu menu_hash
  puts 'Choices:'
  menu_hash.each { |k,v| puts "#{k}) #{v}" }
  puts
end

def get_user_menu_choice menu_hash
  print 'Choice => '
  number = STDIN.gets.strip.to_i
  menu_hash.fetch(number, nil)
end

def show_menu menu_hash
  print_menu menu_hash
  get_user_menu_choice menu_hash
end

def user_menu_choice choice_array
  until choice = show_menu(array_to_menu_hash(choice_array)); end
  choice
end

array = %w{a b c d}
choice = user_menu_choice(array)

puts "User choice was #{choice}" 
```

魔法发生在`array_to_menu_hash`：

Hash的`[]`方法将具有表单的数组转换`[ [1, 2], [3, 4] ]`为哈希`{1 => 2, 3 => 4}`。为了得到这个数组，我们首先调用`each_with_index`原始的菜单选择数组。这将返回一个在迭代时发出 [element, index_number] 的 Enumerator。这个 Enumerator 有两个问题：第一个是 Hash[] 需要一个数组，而不是 Enumerator。第二个是 Enumerator 发出的数组中的元素顺序错误（我们需要 [index_number, element]）。这两个问题都用`#map`. 这将 Enumerator 从 each_with_index 转换为数组数组，并且赋予它的块允许我们更改结果。在这种情况下，我们将向从零开始的索引添加 1 并反转子数组的顺序。

# javascript - 跨浏览器onclick问题

> ID：14609588
> 
> 赞同：-1
> 
> 时间：2013-01-30T17:03:56.303
> 
> 标签：javascript

在 Firefox 浏览器中，删除功能被称为 onclick，但在 chrome 浏览器中却没有。我错过了什么明显的事情吗？

```
<button id="button_5875418" class="small-button" onclick="remove('5875418','0','551130','http://www.google.com');"><span><em>Remove</em></span></button> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T18:20:01.477

该问题是由于正在使用的函数名称引起的。我将函数名称从“remove”重命名为“removeItem”，它现在可以在 Chrome 中运行（在 FF 中也是如此）。显然，“remove”是 jquery 中的一个内置函数，它导致删除按钮在 chrome 中消失，而不是调用我们定义的函数。

# sql - 在 Crystal Reports 中将 SQL 语句转换为 SQL 表达式字段

> ID：14609589
> 
> 赞同：1
> 
> 时间：2013-01-30T17:03:55.853
> 
> 标签：sql, crystal-reports, crystal-reports-2008

我有一个 SQL 语句可以提取我需要的数据，但我无法在 Crystal Reports 中获得正确的语法。

此语句在 SQL 中有效：

```
SELECT
    max([meter_reading])
FROM [Forefront].[dbo].[EC_METER_HISTORY_MC]
WHERE [Meter_Number] = '1' AND [Transaction_Date] < '20130101'
GROUP BY 
    [Company_Code], [Equipment_Code], [Meter_Number] 
```

这是我在水晶中将其更改为的，但我无法获得正确的语法。

```
SELECT     
   Maximum({EC_METER_HISTORY_MC.meter_reading}) 
FROM [EC_METER_HISTORY_MC] 
WHERE {EC_METER_HISTORY_MC.Meter_Number} = '1' 
AND {EC_METER_HISTORY_MC.Transaction_Date}  <  {1?Startdate}
GROUP BY {EC_METER_HISTORY_MC.Company_Code}
,{EC_METER_HISTORY_MC.Equipment_Code}
,{EC_METER_HISTORY_MC.Meter_Number} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T19:30:44.910

您的第一步应该是阅读 SQL 表达式在 Crystal 中的工作方式。[这是一个很好的链接，可以帮助您入门](http://cogniza.com/wordpress/2005/11/07/crystal-reports-using-sql-expression-fields/)。

您的一些问题包括：

1.  使用参数字段。SQL 表达式与 CR 参数不兼容，不能在其中使用。
2.  SQL 表达式只能为报表的每行返回标量值。这意味着您对 GROUP BY 的使用没有任何用途。
3.  您使用花括号意味着您*在主报表查询中*引用这些字段，而不是在您尝试使用此表达式创建的子查询中。

这是一个简化的示例，可以找到特定仪表的最大仪表读数（对于 Oracle，因为这是我所知道的，您没有指定您正在使用哪个数据库）：

```
case when {EC_METER_HISTORY_MC.Meter_Number} is null then null
else (select max(Meter_Reading)
      from EC_METER_HISTORY_MC
      where Meter_Number={EC_METER_HISTORY_MC.Meter_Number} --filter by the meter number from main query
       and Transaction_Date < Current_Date) --filter by some date. CAN'T use parameter here.
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T13:14:14.920

遗憾的是，您不能在 SQL 表达式中使用参数字段。也许您可以将`Transaction_Date`与主查询中的表相关联。否则，我建议使用命令。

命令有两个选项：

1.  使用单个 Command 对象作为整个报告的数据源——这涉及（可能）大量的返工。
2.  将命令添加到现有表集（在数据库“专家”中）。根据需要将其链接到其他表。这将执行一秒钟`SELECT`并将结果加入内存中（WhileReadingRecords，如果我没记错的话）。轻微的性能损失可能值得我们受益。

# c# - HTTP ERROR (404) with uploadify and custom uploader for asp net [ASP NET MVC 4]

> ID：14609590
> 
> 赞同：0
> 
> 时间：2013-01-30T17:03:56.677
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4, uploadify

我需要在我的 asp net mvc 4 应用程序上实现 uploadify。

我已经用这个简单的类替换了 uploadify.php 只是为了测试目的：

```
public class uploadify : IHttpHandler
{
    public void ProcessRequest(HttpContext context)
    {
        HttpPostedFile oFile = context.Request.Files["Filedata"];

        oFile.SaveAs("C:\\" + oFile.FileName);
    }

    public bool IsReusable
    {
        get { return false; }
    }
} 
```

配置是这样的：

```
$('#file_upload').uploadify({
    'swf': '../../Components/uploadify/uploadify.swf',
    'uploader': '../../Scripts/uploadify/uploadify.cs',
    'auto': false,
    'buttonText': 'Selecionar',
    'debug': true
}); 
```

我得到一个`HTTP ERROR (404)` Uploadify.cs 的路径是正确的，所以我不明白为什么找不到这个资源。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T17:07:32.720

如果您在 MVC 4 中创建站点，为什么不直接使用控制器而不是 IHttpHandler？

'[如何让 jQuery 的 Uploadify 插件与 ASP.NET MVC 一起使用？](https://stackoverflow.com/questions/1002680/how-do-i-get-jquerys-uploadify-plugin-to-work-with-asp-net-mvc)'

# jquery - 如何动态重置表格宽度 - 数据表？

> ID：14609592
> 
> 赞同：2
> 
> 时间：2013-01-30T17:03:59.907
> 
> 标签：jquery, datatables

我正在使用 kike table 插件来动态扩展/缩小列宽。一切似乎都工作正常，除了当列宽减小时表格宽度没有减小因此表格的最后一列占据了可用的额外宽度。

有没有办法将列宽重置回原始列宽？

我将 sScrollx 设置为 100%

```
"sScrollX": "100%", 
```

我有一个功能可以将表格重置回原来的宽度。

```
function resizeTable(tableId)
{
var oTable = $("#" + tableId).dataTable();
var oSettings = oTable.fnSettings();
oSettings.oScroll.sX = "840px"; // <- updated!
oTable.fnDraw(false);
} 
```

我尝试使用上面的代码在单击按钮时重置滚动 x 值，但这似乎对表格的宽度没有任何影响。

我尝试使用`oTable.fnAdjustColumnSizing();`，但它也没有帮助我......

有人可以让我知道解决此问题的最佳方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T09:50:39.440

您可以尝试`bAutoWidth : false`在 dataTables 设置中指定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T18:34:24.843

Kike 表（表类）覆盖了数据表（类），因此我无法在这些表上使用任何数据表函数，因此我想出了如下解决方案，

```
function resizeDataTable(dataTableid){
 $("#" + dataTableid).removeClass('kiketable-colsizable'); // Remove kike column class
    var oTable = $("#" + dataTableid).dataTable(); 
    $(oTable).css({ width: $(oTable).parent().width() }); // Perform datatable functions
    oTable.fnAdjustColumnSizing(); 
  $("#" + dataTableid).addClass('kiketable-colsizable'); // Add kike column class
} 
```

这完美无缺。

# android - 无法加载 QuickAction

> ID：14609596
> 
> 赞同：-1
> 
> 时间：2013-01-30T17:04:16.490
> 
> 标签：android

对于 Android 编程类，我试图实现一个 QuickAction Activity，但我无法将它加载到我的程序中。这是我认为加载失败的代码。

```
 import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.AdapterView;
import android.widget.ImageButton;
import android.widget.Toast;
import android.widget.AdapterView.OnItemClickListener;

public class MainActivity extends Activity
{

    @Override

    protected void onCreate(Bundle savedInstanceState)
    {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        //show on iBtn1
        ImageButton iBtn1 = (ImageButton) this.findViewById(R.id.iBtn1);
        iBtn1.setOnClickListener(new View.OnClickListener()
        {

            @Override
            public void onClick(View v)
            {

                startActivity(new Intent(getApplicationContext(),
                        QuickActionBar.class));
            }

        });

        final QuickActionIcons edit = new QuickActionIcons();;

        edit.setTitle("Edit");
        edit.setIcon(getResources().getDrawable(R.drawable.edit));

        edit.setOnClickListener(new OnClickListener()
        {

            public void onClick(View v)
            {
                Toast.makeText(MainActivity.this,"Edit Contact",Toast.LENGTH_SHORT).show();
            }

        });

        final QuickActionIcons call = new QuickActionIcons();;

        call.setTitle("Call");
        call.setIcon(getResources().getDrawable(R.drawable.call));

        call.setOnClickListener(new OnClickListener()
        {

            public void onClick(View v)
            {
                Toast.makeText(MainActivity.this,"Call Contact",Toast.LENGTH_SHORT).show();
            }

        });

        final QuickActionIcons call3 = new QuickActionIcons();;

        call3.setTitle("Call3");
        call3.setIcon(getResources().getDrawable(R.drawable.call));

        call3.setOnClickListener(new OnClickListener()
        {

            public void onClick(View v)
            {
                // Toast.makeText(QuickActionSampleAppActivity.this,"Call Contact",Toast.LENGTH_SHORT).show();
            }

        });

        final QuickActionIcons call1 = new QuickActionIcons();;

        call1.setTitle("Call 1");      
        call1.setIcon(getResources().getDrawable(R.drawable.call));

        call1.setOnClickListener(new OnClickListener()
        {

            public void onClick(View v)
            {
                // Toast.makeText(QuickActionSampleAppActivity.this,"Call Contact",Toast.LENGTH_SHORT).show();
            }

        });

        final QuickActionIcons call2 = new QuickActionIcons();;

        call2.setTitle("Call 2");       
        call2.setIcon(getResources().getDrawable(R.drawable.call));

        call2.setOnClickListener(new OnClickListener()
        {

            public void onClick(View v)
            {
                // Toast.makeText(QuickActionSampleAppActivity.this,"Call Contact",Toast.LENGTH_SHORT).show();
            }

        });

        final QuickActionIcons send_data = new QuickActionIcons();;

        send_data.setTitle("Send Data");      
        send_data.setIcon(getResources().getDrawable(R.drawable.bluetooth));

        send_data.setOnClickListener(new OnClickListener()
        {

            public void onClick(View v)
            {
                //  Toast.makeText(QuickActionSampleAppActivity.this,"Start Transfer of Data",Toast.LENGTH_SHORT).show();
            }

        });

        QuickActionBar qab = new QuickActionBar(iBtn1);
        qab.addItem(edit);
        qab.addItem(call);
        qab.addItem(send_data);
        qab.addItem(call1);
        qab.addItem(call2);
        qab.addItem(call3);
        qab.setAnimationStyle(QuickActionBar.GROW_FROM_LEFT);
        qab.show();

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) 
    {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

这是我的 LogCat

```
 01-30 17:16:39.650: E/Trace(810): error opening trace file: No such file or directory (2)
    01-30 17:16:39.650: W/Trace(810): Unexpected value from nativeGetEnabledTags: 0
    01-30 17:16:39.650: W/Trace(810): Unexpected value from nativeGetEnabledTags: 0
    01-30 17:16:39.650: W/Trace(810): Unexpected value from nativeGetEnabledTags: 0
    01-30 17:16:40.038: W/Trace(810): Unexpected value from nativeGetEnabledTags: 0
    01-30 17:16:40.038: W/Trace(810): Unexpected value from nativeGetEnabledTags: 0
    01-30 17:16:41.618: D/dalvikvm(810): GC_CONCURRENT freed 67K, 7% free 2811K/3000K, paused 18ms+5ms, total 90ms
    01-30 17:16:41.618: D/dalvikvm(810): WAIT_FOR_CONCURRENT_GC blocked 56ms
    01-30 17:16:41.638: I/dalvikvm-heap(810): Grow heap (frag case) to 3.933MB for 1127536-byte allocation
    01-30 17:16:41.718: D/dalvikvm(810): GC_FOR_ALLOC freed 3K, 5% free 3909K/4104K, paused 74ms, total 75ms
    01-30 17:16:41.838: D/dalvikvm(810): GC_CONCURRENT freed <1K, 5% free 4098K/4296K, paused 9ms+20ms, total 124ms
    01-30 17:16:42.058: D/AndroidRuntime(810): Shutting down VM
    01-30 17:16:42.058: W/dalvikvm(810): threadid=1: thread exiting with uncaught exception (group=0x40a70930)
    01-30 17:16:42.108: E/AndroidRuntime(810): FATAL EXCEPTION: main
    01-30 17:16:42.108: E/AndroidRuntime(810): java.lang.RuntimeException: Unable to start activity ComponentInfo{edu.rasmussen.mobile/edu.rasmussen.mobile.MainActivity}: android.view.WindowManager$BadTokenException: Unable to add window -- token null is not valid; is your activity running?
    01-30 17:16:42.108: E/AndroidRuntime(810):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
    01-30 17:16:42.108: E/AndroidRuntime(810):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
    01-30 17:16:42.108: E/AndroidRuntime(810):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
    01-30 17:16:42.108: E/AndroidRuntime(810):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
    01-30 17:16:42.108: E/AndroidRuntime(810):  at android.os.Handler.dispatchMessage(Handler.java:99)
    01-30 17:16:42.108: E/AndroidRuntime(810):  at android.os.Looper.loop(Looper.java:137)
    01-30 17:16:42.108: E/AndroidRuntime(810):  at android.app.ActivityThread.main(ActivityThread.java:5039)
    01-30 17:16:42.108: E/AndroidRuntime(810):  at java.lang.reflect.Method.invokeNative(Native Method)
    01-30 17:16:42.108: E/AndroidRuntime(810):  at java.lang.reflect.Method.invoke(Method.java:511)
    01-30 17:16:42.108: E/AndroidRuntime(810):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
    01-30 17:16:42.108: E/AndroidRuntime(810):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
    01-30 17:16:42.108: E/AndroidRuntime(810):  at dalvik.system.NativeStart.main(Native Method)
    01-30 17:16:42.108: E/AndroidRuntime(810): Caused by: android.view.WindowManager$BadTokenException: Unable to add window -- token null is not valid; is your activity running?
    01-30 17:16:42.108: E/AndroidRuntime(810):  at android.view.ViewRootImpl.setView(ViewRootImpl.java:567)
    01-30 17:16:42.108: E/AndroidRuntime(810):  at android.view.WindowManagerGlobal.addView(WindowManagerGlobal.java:246)
    01-30 17:16:42.108: E/AndroidRuntime(810):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:69)
    01-30 17:16:42.108: E/AndroidRuntime(810):  at android.widget.PopupWindow.invokePopup(PopupWindow.java:993)
    01-30 17:16:42.108: E/AndroidRuntime(810):  at android.widget.PopupWindow.showAtLocation(PopupWindow.java:847)
    01-30 17:16:42.108: E/AndroidRuntime(810):  at android.widget.PopupWindow.showAtLocation(PopupWindow.java:811)
    01-30 17:16:42.108: E/AndroidRuntime(810):  at edu.rasmussen.mobile.QuickActionBar.show(QuickActionBar.java:120)
    01-30 17:16:42.108: E/AndroidRuntime(810):  at edu.rasmussen.mobile.MainActivity.onCreate(MainActivity.java:141)
    01-30 17:16:42.108: E/AndroidRuntime(810):  at android.app.Activity.performCreate(Activity.java:5104)
    01-30 17:16:42.108: E/AndroidRuntime(810):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
    01-30 17:16:42.108: E/AndroidRuntime(810):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
    01-30 17:16:42.108: E/AndroidRuntime(810):  ... 11 more

Here are the Console
[2013-01-30 11:13:08 - GeoTag] ------------------------------
[2013-01-30 11:13:08 - GeoTag] Android Launch!
[2013-01-30 11:13:08 - GeoTag] adb is running normally.
[2013-01-30 11:13:08 - GeoTag] Performing edu.rasmussen.mobile.MainActivity activity launch
[2013-01-30 11:13:08 - GeoTag] Automatic Target Mode: launching new emulator with compatible AVD 'Galaxy'
[2013-01-30 11:13:08 - GeoTag] Launching a new emulator with Virtual Device 'Galaxy'
[2013-01-30 11:13:13 - GeoTag] New emulator found: emulator-5554
[2013-01-30 11:13:13 - GeoTag] Waiting for HOME ('android.process.acore') to be launched...
[2013-01-30 11:14:50 - GeoTag] HOME is up on device 'emulator-5554'
[2013-01-30 11:14:50 - GeoTag] Uploading GeoTag.apk onto device 'emulator-5554'
[2013-01-30 11:14:50 - GeoTag] Installing GeoTag.apk...
[2013-01-30 11:16:28 - GeoTag] Success!
[2013-01-30 11:16:28 - GeoTag] Starting activity edu.rasmussen.mobile.MainActivity on device emulator-5554
[2013-01-30 11:16:31 - GeoTag] ActivityManager: Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] cmp=edu.rasmussen.mobile/.MainActivity } 
```

堆栈跟踪

```
GeoTag [Android Application]    
    DalvikVM[localhost:8789]    
        Thread [<1> main] (Running) 
        Thread [<10> Binder_2] (Running)    
        Thread [<9> Binder_1] (Running) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:34:25.620

异常消息：

> 无法添加窗口——token null 无效；您的活动正在运行吗？

当您的 Activity 尚未准备好处理它时，您正尝试在您的 Activity 之上添加一个窗口（该 Activity 的窗口尚未显示）。有很多方法可以处理这个问题。一种解决方案可能是使用 post-runnable，因此操作会延迟。

```
view.post(new Runnable() {
   public void run() {
      // show your quick action here
   }
}); 
```

# jaxb - JAXB 有多灵活？

> ID：14609597
> 
> 赞同：2
> 
> 时间：2013-01-30T17:04:18.113
> 
> 标签：jaxb

我正在考虑使用 JAXB 进行 XML 解析，但到目前为止我遇到了几个问题，这让我相信它可能不够灵活，无法满足我的需求。

我将解析第三方提供的 XML 以符合我将发布的 XSD。因此，我希望足够灵活地处理没有命名空间的文件或指定旧版本的命名空间并且实际上可能包含无效元素。

JAXB 是否可以实现这种灵活性？目前，如果未提供命名空间，则无法解析。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T18:11:05.920

> JAXB 有多灵活？

非常

> 因此，我希望足够灵活地处理没有命名空间的文件或指定旧版本的命名空间并且实际上可能包含无效元素。

**命名空间过滤器**

下面是一个`XmlFilter`可用于应用缺失名称空间的 SAX。

```
import org.xml.sax.*;
import org.xml.sax.helpers.XMLFilterImpl;

public class NamespaceFilter extends XMLFilterImpl {

    private static final String NAMESPACE = "http://www.example.com/customer";

    @Override
    public void endElement(String uri, String localName, String qName)
            throws SAXException {
        super.endElement(NAMESPACE, localName, qName);
    }

    @Override
    public void startElement(String uri, String localName, String qName,
            Attributes atts) throws SAXException {
        super.startElement(NAMESPACE, localName, qName, atts);
    }

} 
```

**演示**

下面是如何将 SAX`XMLFilter`与 JAXB 一起应用的示例。

```
import javax.xml.bind.*;
import javax.xml.parsers.*;
import org.xml.sax.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        // Create the JAXBContext
        JAXBContext jc = JAXBContext.newInstance(Customer.class);

        // Create the XMLFilter
        XMLFilter filter = new NamespaceFilter();

        // Set the parent XMLReader on the XMLFilter
        SAXParserFactory spf = SAXParserFactory.newInstance();
        SAXParser sp = spf.newSAXParser();
        XMLReader xr = sp.getXMLReader();
        filter.setParent(xr);

        // Set UnmarshallerHandler as ContentHandler on XMLFilter
        Unmarshaller unmarshaller = jc.createUnmarshaller();
        UnmarshallerHandler unmarshallerHandler = unmarshaller
                .getUnmarshallerHandler();
        filter.setContentHandler(unmarshallerHandler);

        // Parse the XML
        InputSource xml = new InputSource("src/blog/namespace/sax/input.xml");
        filter.parse(xml);
        Customer customer = (Customer) unmarshallerHandler.getResult();
    }

} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2012/11/applying-namespace-during-jaxb-unmarshal.html](http://blog.bdoughan.com/2012/11/applying-namespace-during-jaxb-unmarshal.html)

# ios - SKPaymentTransactionStateFailed 何时发生？

> ID：14609598
> 
> 赞同：1
> 
> 时间：2013-01-30T17:04:22.107
> 
> 标签：ios

`SKPaymentTransactionStateFailed`（签入）是否只能`updatedTransactions`发生在新购买或恢复的交易中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T20:30:24.910

您只会获得 SKPaymentTransactionStateRestored 作为已恢复交易的交易状态，而不是其他任何东西。

如果恢复失败，事务观察者将收到 paymentQueue:restoreCompletedTransactionsFailedWithError: 消息。

如果恢复成功完成，所有以前的交易都会立即交付给 updatedTransactions，状态为 SKPaymentTransactionStateRestored。

如果恢复失败，您将收到 failedWithError 消息，但根本不会调用 updatedTransactions。

# c# - 添加 Windows Azure 缓存会使 Visual Studio 2012 崩溃，并出现 datacachefactory 参数空异常

> ID：14609600
> 
> 赞同：3
> 
> 时间：2013-01-30T17:04:24.250
> 
> 标签：c#, caching, azure, azure-caching

我已将 Windows Azure Cache 1.8.0 nuget 包添加到我的解决方案中，但在我加载项目时它最终导致 Visual Studio 崩溃。我发现我可以通过从 bin 文件夹中删除 dll 来“防止”崩溃，然后在项目加载时 Visual Studio 将它们添加回 bin 时再次这样做。

我要删除的 dll 是：

```
Microsoft.ApplicationServer.Caching.AzureClientHelper.dll
Microsoft.ApplicationServer.Caching.AzureCommon.dll
Microsoft.ApplicationServer.Caching.Client.dll
Microsoft.ApplicationServer.Caching.Core.dll 
```

当我查看 Visual Studio 崩溃的事件查看器时，我得到以下信息：

```
Application: devenv.exe
Framework Version: v4.0.30319
Description: The process was terminated due to an unhandled exception.
Exception Info: System.ArgumentNullException
    Stack:
    at System.Threading.Monitor.Enter(System.Object)
    at Microsoft.ApplicationServer.Caching.DataCacheFactory.Close()
    at Microsoft.ApplicationServer.Caching.DataCacheFactory.Finalize() 
```

我不确定为什么 VS 在项目加载时使用 dll 做事，但我承认我不是这方面的专家。

我基本上按照此页面上描述的过程为缓存添加了一个专用的缓存工作者角色：http: [//www.windowsazure.com/en-us/develop/net/how-to-guides/cache/](http://www.windowsazure.com/en-us/develop/net/how-to-guides/cache/)

我尝试删除并重新安装软件包，删除并重新安装 Visual Studio SDK（2012 年 10 月），但问题又回来了。

另外，我没有安装 App Fabric Server。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T17:47:39.013

万一其他人遇到这个问题，我在这里提供似乎对我有用的东西。

为了让 Visual Studio 加载项目，我从项目中删除了 DLL。我还在项目加载时删除了它们，VS 将 dll 放回 bin 文件夹中。

我删除了对 dll 的引用。然后我删除了使用 datacachefactory 的代码。

最后，我认为这是由于在我执行构建的代码中不当使用缓存造成的。我能够更正它的用法，构建解决方案并将所有 dll 重新放入项目中。

以前通过数据缓存对象已经不是静态的。

这是我对数据缓存工厂的正确用法：

```
using System;
using Microsoft.ApplicationServer.Caching;

namespace WebRole1.Classes
{
    public class AzureCache
    {
        public static DataCache cache { get; set; }
        public static DataCacheFactory dataCacheFactory { get; set; }

    public AzureCache()
    {
        if (cache == null){
            DataCacheFactoryConfiguration cfg = new DataCacheFactoryConfiguration();
            cfg.AutoDiscoverProperty = new DataCacheAutoDiscoverProperty(true, "CacheWorkerRole1"); 
            dataCacheFactory = new DataCacheFactory(cfg);
            cache = dataCacheFactory.GetDefaultCache();
        }
    }

    public void Add(string item, object value)
    {                                                                              
       cache.Add(item, value);
    }
    public void Add(string item, object value, TimeSpan timeout)
    {
       cache.Put(item, value, timeout);
    }
    public object Get(string item)
    {   
        return cache.Get(item);
    }

    public TimeSpan TimeRemaining (string item)
    {
        DataCacheItem DCitem = cache.GetCacheItem(item);
        return DCitem.Timeout;
    }

    public void Flush()
    {
        cache.Clear();
        DataCacheFactory cacheFactory = new DataCacheFactory();
        cache = cacheFactory.GetDefaultCache();

    }

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T11:58:42.613

这不是与 Visual Studio 完全相关的问题。我在运行我的 webrole 时得到它。查看[另一篇文章](http://social.msdn.microsoft.com/Forums/en-US/windowsazuredata/thread/2e212b14-fca5-4014-8e72-b59a1ba7f42e/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T21:47:17.563

我们可能需要捕获 Visual Studio 进程 (devenv.exe) 的转储，以查看导致此异常的原因。您可以使用 debugdiag(" [http://www.microsoft.com/en-us/download/details.aspx?id=26798](http://www.microsoft.com/en-us/download/details.aspx?id=26798) ") 来捕获转储。您可能需要让 Microsoft 支持服务（“ [http://www.windowsazure.com/en-us/support/contact/](http://www.windowsazure.com/en-us/support/contact/) ”）进一步调查此问题，因为异常来自缓存代码本身。

# grammar - 不包括所有零的 VXML 数字语法

> ID：14609603
> 
> 赞同：1
> 
> 时间：2013-01-30T17:04:30.160
> 
> 标签：grammar, vxml

我正在寻找一种构建 VXML 语法的方法，该语法需要输入一定数量的数字，但也要求输入不能全为零。

用例是银行号码。例如，我想为路由号码强制输入 9 位数字（语音或 DTMF，没关系），但要求并非所有数字都为零。（暂时忽略模数检查，我不关心这里）。

鉴于 and 的语法结构`<one-of>`，`<item>`我可以通过枚举所有可能性（例如本问题末尾的规则）来看到这是可能的。然而，这似乎很荒谬。有没有更好的方法我还没有遇到过？任何帮助，将不胜感激。

```
<rule>
    <one-of>
        <item>
            <item repeat="1">
                <item>1</item>
                <item>2</item>
                <item>3</item>
                <item>4</item>
                <item>5</item>
                <item>6</item>
                <item>7</item>
                <item>8</item>
                <item>9</item>
            </item>
            <item repeat="8">
                <item>0</item>
                <item>1</item>
                <item>2</item>
                <item>3</item>
                <item>4</item>
                <item>5</item>
                <item>6</item>
                <item>7</item>
                <item>8</item>
                <item>9</item>
            </item>
        </item>
        <item>
            <item repeat="1">
                <item>0</item>
                <item>1</item>
                <item>2</item>
                <item>3</item>
                <item>4</item>
                <item>5</item>
                <item>6</item>
                <item>7</item>
                <item>8</item>
                <item>9</item>
            </item>
            <item repeat="1">
                <item>1</item>
                <item>2</item>
                <item>3</item>
                <item>4</item>
                <item>5</item>
                <item>6</item>
                <item>7</item>
                <item>8</item>
                <item>9</item>
            </item>
            <item repeat="7">
                <item>0</item>
                <item>1</item>
                <item>2</item>
                <item>3</item>
                <item>4</item>
                <item>5</item>
                <item>6</item>
                <item>7</item>
                <item>8</item>
                <item>9</item>
            </item>
        </item>
        <item>
            <item repeat="2">
                <item>0</item>
                <item>1</item>
                <item>2</item>
                <item>3</item>
                <item>4</item>
                <item>5</item>
                <item>6</item>
                <item>7</item>
                <item>8</item>
                <item>9</item>
            </item>
            <item repeat="1">
                <item>1</item>
                <item>2</item>
                <item>3</item>
                <item>4</item>
                <item>5</item>
                <item>6</item>
                <item>7</item>
                <item>8</item>
                <item>9</item>
            </item>
            <item repeat="6">
                <item>0</item>
                <item>1</item>
                <item>2</item>
                <item>3</item>
                <item>4</item>
                <item>5</item>
                <item>6</item>
                <item>7</item>
                <item>8</item>
                <item>9</item>
            </item>
        </item>
                    etc....
    </one-of>
</rule> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T21:44:37.640

这样的事情怎么样

```
<rule id="zero">
  <oneof>
    <item>0</item>
  </oneof>
</rule>

<rule id="nonzero">
  <oneof>
    <item>1</item>
    <item>2</item>
    <item>3</item>
    <item>4</item>
    <item>5</item>
    <item>6</item>
    <item>7</item>
    <item>8</item>
    <item>9</item>
  </oneof>
</rule>

<rule id="alldigits">
  <oneof>
    <item>
      <ruleref uri="#zero"/>
    </item>
    <item>
      <ruleref uri="#nonzero"/>
    </item>
  </oneof>
</rule>

<rule id="account-num">
  <oneof>
    <item>
      <item repeat="7">
       <ruleref uri="#alldigits"/>
      </item>
      <item repeat="1">
         <ruleref uri="#nonzero"/>
      </item>
    </item>
  </oneof>
</rule> 
```

规则 account-num 指定至少一个数字不能为零。

# javascript - 我的 Jquery 代码有什么问题.. 我的循环不起作用

> ID：14609605
> 
> 赞同：2
> 
> 时间：2013-01-30T17:04:31.467
> 
> 标签：javascript, jquery, jquery-ui, javascript-events

所以我试图纠正下面的Jquery代码..在ESNList文本字段中，需要输入多个值，用逗号分隔，但它们必须在同一范围内..例如，在循环中的以下条件中，如果您在 ESNList 中输入一个介于 986329 和 999999 之间的数字，则 ESNList 字段中的第二个输入应与第一个输入在同一范围内，依此类推，否则我会发出警告，说两个 ESN 应在同一范围内..我做了一个循环来执行检查，但它不起作用..有人可以向我展示错误在哪里..小提琴会有所帮助，有时我很难理解人们在这里试图说什么而没有很好地证明我在哪里出错了..下面是我的代码..

```
<html>
    <head>
    <script type="text/javascript" src="jquery/jquery-1.8.3.js"></script>
    <script type="text/javascript">

    $(function () {

    $(":text").css("border", "2px solid red");
      $(":text").keyup(function(){
        var enteredData = $(this).val()
        console.log(enteredData);
        if (enteredData == "") {
          $(this).css("border", "2px solid red");
        } else {
          $(this).css("border", "inherit");
        }
        if ($(this).attr("id") == "ESNList"){
       esnList = enteredData.split(',');
           }

           for(var i = 0; i < esnList.length; i++) {
            if  ( parseInt(esnList[i]) >= 986329 && parseInt(esnList[i]) <= 999999) {
                $("#ddl_StxName").val("stx2");
                $("#ddl_rtumodel").val("globalstar");
                }
            else if ( parseInt(esnList[i]) >= 660000 && parseInt(esnList[i]) <= 699999) {
                $("#ddl_StxName").val("mmt");
                $("#ddl_rtumodel").val("globalstar");
                 }
            else if ( parseInt(esnList[i]) >= 200000 && parseInt(esnList[i]) <= 299999) {
                $("#ddl_StxName").val("stm3");
                $("#ddl_rtumodel").val("stmcomtech");
                 }
            else if ( parseInt(esnList[i]) >= 1202114 && parseInt(esnList[i]) <= 1299999) {
                $("#ddl_StxName").val("smartone");
                $("#ddl_rtumodel").val("globalstar");
          }

          else { alert("ESNs should be within the same range"); }

        }

      });
      });
    </script> </head>
    <body>
    <form id="provision">
        ESNList:    <input  type="text" id="ESNList" name="ESNList" size="30" /> <br />
        ESN Start:<input type="text" id="ESNStart" name="ESNStart" size="10" /> <br />
        ESN End: <input type="text" id="ESNStart" name="ESNStart" size="10" /> <br />
        UnitName:<input type="text" id="STxName" name="STxName" size="30"  />  <br />  
         Unit Model:   <select name="STxName" id="ddl_StxName">
        <option value="stx2">STX2</option>
        <option value="stm3" selected>STM3</option>
        <option value="acutec">Acutec</option>
         <option value="trackpack">Trackpack</option>
        <option value="mmt">MMT</option>
        <option value="smartone">Smartone</option>
        <option value="smartoneb" >SmartOneB</option>
        </select> <br />
        RTU Model Type:
         <select name="rtumodel" id ="ddl_rtumodel">
        <option value="globalstar">GlobalStar</option>
        <option value="both">Both</option>
        <option value="comtech">Comtech</option>
        <option value="stmcomtech">STMComtech</option>
        </select> <br />
        <input type="submit" value ="submit"  />
        </form>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T17:09:01.720

试试这个进行调试：

行前`for(...)`，放

```
console.log(esnList.length); 
```

然后在该`for(...)`行之后：

```
console.log("entering for loop, i = " + i ); 
```

这些将被写入 javascript 控制台，您可以在大多数浏览器的开发人员工具中查看。在您的 if/else 语句中包含类似的日志记录，您可以通过查看其中哪些被触发来缩小问题所在。

您使用的方法是正确的`alert()`，只需使用它或`console.log()`更频繁。

# f# - 通过交替元素拆分列表

> ID：14609606
> 
> 赞同：2
> 
> 时间：2013-01-30T17:04:34.123
> 
> 标签：f#

我试图通过采用备用元素将 F# 列表分成两部分。这是我的尝试：

```
let split l =  
    let rec loop l isEven result1 result2 =  
        match l with  
        | [] -> result1 result2  
        | [head::tail] when isEven -> loop tail (not isEven) head::result1 result2  
        | [head::tail] -> loop tail (not isEven) result1 head::result2  
    loop l false [] [] 
```

这给了我一个错误：

```
Program.fs(5,39): error FS0001: Type mismatch. Expecting a  
    'a    
but given a  
    'b -> 'a list      
The resulting type would be infinite when unifying ''a' and ''b -> 'a list' 
```

我不明白它怎么可能是无限的，我不明白为什么它认为我给它一个从 'b 到 'a 列表的函数。有人可以告诉我哪里出错了吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T19:03:56.047

杰克很好地解释了问题所在。这是一次匹配两个元素的替代解决方案。F# 的[模式匹配文档](http://msdn.microsoft.com/library/dd547125.aspx)有很多很好的例子。

```
let split list = 
    let rec split odd even list =
        match list with
        | a::b::tail -> split (a::odd) (b::even) tail
        | a::tail -> split (a::odd) even tail
        | [] -> List.rev odd, List.rev even

    split [] [] list 
```

示例输出。

```
printfn "%A" (split [1 .. 10])
System.Console.ReadLine() |> ignore

([1; 3; 5; 7; 9], [2; 4; 6; 8; 10]) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-30T17:15:43.567

这是一个固定版本：

```
let rec loop l isEven result1 result2 =
    match l with
    | [] ->
        result1, result2
    | head :: tail when isEven ->
        loop tail (not isEven) (head :: result1) result2
    | head :: tail ->
        loop tail (not isEven) result1 (head :: result2) 
```

*   在第一种情况 ( `[]`) 中，我添加了一个逗号，因为`loop`函数需要将值作为元组返回。没有逗号，你基本上`result1`就像一个函数一样对待并应用`result2`它。
*   空列表模式是正确的 ( `[]`)，但在其他情况下，您不使用方括号 - 仅使用 cons ( `::`) 模式。
*   您需要将`head :: result`括号括起来，否则 F# 会像您编写以下代码一样读取代码：`(loop tail (not isEven) head) :: (result1 result2)`.

哦，如果您希望返回的列表与原始列表的顺序相同，则需要在返回列表时使用 List.rev，如下所示：

```
match l with
| [] ->
    List.rev result1, List.rev result2 
```

最后，这是您的函数的一个稍微简化的版本——您实际上并不需要`isEven`参数来使函数工作。相反，您只需尝试保持列表的长度相同：

```
let rec loop (result1, result2) l =
    match l with
    | [] ->
        List.rev result1, List.rev result2
    | hd :: tl ->
        if List.length result1 = List.length result2 then
            loop (hd :: result1, result2) tl
        else
            loop (result1, hd :: result2) tl 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T17:54:36.577

最简单的解决方案不是尾递归，但非常容易理解：

```
let prepend2 (x, y) (xs, ys) = x::xs, y::ys

let rec split = function
  | [] | [_] as xs -> xs, []
  | x0::x1::xs -> prepend2 (x0, x1) (split xs) 
```

# objective-c - 视图控制器在推入导航控制器时取消设置他的标签

> ID：14609614
> 
> 赞同：2
> 
> 时间：2013-01-30T17:05:01.500
> 
> 标签：objective-c, xcode, tags, viewcontroller, navigationcontroller

... 我猜。这是这种情况：

这是一个简单的方法，在视图控制器中，我们可以按下按钮进入另一个视图：

```
- (IBAction)actionNext:(UIButton *)sender {

    self.numeriUtiliListaViewController = [[ALCNumeriUtiliListaViewController alloc] init];
    [self.numeriUtiliListaViewController.view setTag:[sender tag]];
    [self.delegate vai:self.numeriUtiliListaViewController title:@"Numeri Utili"];
    } 
```

委托的方法是：

```
- (void)vai:(id)view title:(NSString *)title
{
    ALCParentViewController *viewController = (ALCParentViewController *)view;  
    viewController.delegate = self;
    NSLog(@"tag: %d",[viewController.view tag]);

    [self.myNavigationController pushViewController:viewController animated:YES];
} 
```

该系统运行良好，但唯一的是我在最后一种方法中登录的标签，这里打印正确，但是在导航控制器加载的视图中，当我尝试捕获 viewDidLoad 中的值时，它是0。

有任何想法吗？

提前致谢

**更新 1 2013-01-30：**

如果我尝试在导航控制器中推送的视图控制器的 viewWilAppear 方法中打印标签，我会给出正确的值......为什么？我不知道

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T19:11:40.713

这里发生的情况是，在您的 actionNext 方法中，当您使用 self.numeriUtiliListaViewController.view 设置 viewController 的视图标签时，一旦您访问 viewController 的视图属性，就会在 viewController 中调用 viewDidLoad 方法。因此，即使在 setTag 函数执行之前，viewDidLoad 已经执行，并且显示 tag = 0。但是只有在实际视图出现并且 setTag 已经执行时才会调用您的 viewWillAppear/viewDidAppear 方法，因此它显示正确价值。说得通？希望这可以帮助

# ruby - Ruby TestUnit、VCR 和 HTTP API 请求

> ID：14609615
> 
> 赞同：2
> 
> 时间：2013-01-30T17:05:04.827
> 
> 标签：ruby, api, testunit, vcr, webmock

我正在构建一个 API 包装器并为它编写一些测试，我有几个问题。

1）我如何`assert`为不存在数据的调用编写一个？例如，使用 API 通过 id 查找成员，但该用户尚不存在。
2）我如何编写`assert`测试`PUT`和`DELETE`请求？

我已经掌握了测试`GET`和`POST`请求，只是不确定其他 2 个动词。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T21:42:21.620

对于您的问题第 1 部分...

对于不存在的数据，您有几个选择：

1.  您可以提前创建数据，例如使用测试种子文件、夹具或工厂。对于具有更复杂数据安排的大型项目，我喜欢这种选择。我也喜欢这种让事情先运行的选择，因为它更直接地查看数据。

2.  您可以创建一个测试替身，例如存根方法或假对象。我喜欢这个选择以获得最快的测试性能和最好的隔离。对于最快的测试，我会尽早拦截呼叫。权衡是我没有进行端到端测试。

对于您的问题第 2 部分...

您应该编辑您的问题以显示您的实际代码；这将帮助这里的人回答你。

你的录像机代码是这样的吗？

```
VCR.use_cassette('test_unit_example') do
  response = Net::HTTP.get_response('localhost', '/', 7777)
  assert_equal "Hello", response.body
end 
```

如果是这样，您更改 HTTP get to put，如下所示：

```
uri = URI.parse(...whatever you want...)
json = "...whatever you want..."
req = Net::HTTP::Put.new(uri)
req["content-type"] = "application/json"
req.body = json
request(req) 
```

与 HTTP 删除相同：

```
Net::HTTP::Delete.new(uri) 
```

一篇好的博文是 http://www.rubyinside.com/nethttp-cheat-sheet-2940.html>Net::HTTP 备忘单摘录在这里：

```
# Basic REST.
# Most REST APIs will set semantic values in response.body and response.code.
require "net/http"

http = Net::HTTP.new("api.restsite.com")

request = Net::HTTP::Post.new("/users")
request.set_form_data({"users[login]" => "quentin"})
response = http.request(request)
# Use nokogiri, hpricot, etc to parse response.body.

request = Net::HTTP::Get.new("/users/1")
response = http.request(request)
# As with POST, the data is in response.body.

request = Net::HTTP::Put.new("/users/1")
request.set_form_data({"users[login]" => "changed"})
response = http.request(request)

request = Net::HTTP::Delete.new("/users/1")
response = http.request(request) 
```

# javascript - 使用 AJAX 使用 jQuery 填充表

> ID：14609617
> 
> 赞同：0
> 
> 时间：2013-01-30T17:05:06.113
> 
> 标签：javascript, jquery, html, ajax

在使用 AJAX 调用获取 JSON 数据后，我试图在表中添加行，但它不显示任何行：

```
 function populateTable() {
    var request = $.ajax({
        url: "http://app.evolution-betting.net/public/ajaxevents",
        type: "GET",
        dataType: "json"
    });

    request.done(function (data) {
        $.each(data, function (index, element) {

            var ns = '';
            var tip = '';
            var status = '';
            if (element.ev_f == '1') {
                if (element.ev_ns1 == '' && element.ev_ns2 != '' && element.ev_f == '1') {
                    ns = '<td id="ns1" class="hidden-phone" style="border:1px solid #CC0000;"></td>
                                                                                                        <td id="ns2" class="hidden-phone">' + element.ev_ns2 + '</td>';
                } else if (element.ev_ns1 != '' && element.ev_ns2 == '' && element.ev_f == '1') {
                    ns = '<td id="ns1" class="hidden-phone">' + element.ev_ns1 + '</td>
                                                                                                        <td id="ns2" class="hidden-phone" style="border:1px solid #CC0000;"></td>';
                } else if (element.ev_ns1 == '' && element.ev_ns2 == '' && element.ev_f == '1') {
                    ns = '<td id="ns1" class="hidden-phone" style="border:1px solid #CC0000;border-right:0px"></td>
                                                                                                        <td id="ns2" class="hidden-phone" style="border:1px solid #CC0000;"></td>';
                } else {
                    ns = '  <td id="ns1" class="hidden-phone">' + element.ev_ns1 + '</td>
                                                                                                        <td id="ns2" class="hidden-phone">' + element.ev_ns2 + '</td>';
                }
            } else {
                ns = '<td id="ns1" class="hidden-phone"></td>
                                                                                                        <td id="ns2" class="hidden-phone"></td>'
            }
    if (element.ev_f == '1' && (element.ev_ns1 != '' || element.ev_ns2 != '')) {
                if (element.ev_tip == '1' && (element.ev_ns1 > element.ev_ns2)) {
                    tip = ' <td class="hidden-phone"><span class="label label-success">Win</span></td>';
                } else if (element.ev_tip == '1X' && (element.ev_ns1 >= element.ev_ns2)) {
                    tip = '      <td class="hidden-phone"><span class="label label-success">Win</span></td>';
                } else if (element.ev_tip == '2' && (element.ev_ns1 < element.ev_ns2)) {
                    tip = ' <td class="hidden-phone"><span class="label label-success">Win</span></td>';
                } else if (element.ev_tip == '2X' && (element.ev_ns1 <= element.ev_ns2)) {
                    tip = ' <td class="hidden-phone"><span class="label label-success">Win</span></td>'
                } else if (element.ev_tip == '12' && ((element.ev_ns1 > element.ev_ns2) || (element.ev_ns1 < element.ev_ns2))) {
                    tip = ' <td class="hidden-phone"><span class="label label-success">Win</span></td>';
                } else if (element.ev_tip == 'X' && (element.ev_ns1 == element.ev_ns2)) {
                    tip = '<td class="hidden-phone"><span class="label label-success">Win</span></td>';
                } else {
                    tip = '<td class="hidden-phone"><span class="label label-warning">Lose</span></td>';
                }
            } else {
                tip = '<td class="hidden-phone"><span class="label label-info">Pending</span></td>'
            }
            if (element.ev_f == '0' && element.ev_s == '1') {
                status = '<td class="hidden-phone"><span class="label label-info">In progress</span></td>';
            } else if (element.ev_s == '0' && element.ev_f == '0') {
                status = '<td class="hidden-phone"><span class="label label-warining">Not started</span></td>';
            } else {
                status = '<td class="hidden-phone"><span class="label label-success">Finished</span></td>';
            }

            var _row = '<tr id="' + element.ev_id + '" class="odd gradeX">
                                                <td>
                                                    <div id="desc" style="display:none">' + element.ev_desc + '</div>
                                                    <div id="etime" style="display:none">' + element.ev_etime + '</div>
                                                    <div id="edate" style="display:none">' + element.ev_edate + '</div>
                                                </td>
                                                <td id="op1">' + element.ev_op1 + '</td>
                                                <td id="op2" class="hidden-phone">' + element.ev_op2 + '</td>
                                                <td id="host" class="hidden-phone">' + element.ev_host + '</td>
                                                <td id="stime" class="hidden-phone center">' + element.ev_stime + '</td>
                                                                                                <td id="date" class="hidden-phone center">' + element.ev_date + '</td>
                                                                                                <td id="tip" class="hidden-phone center">' + element.ev_tip + '</td>
                                                                                                <td id="coef1" class="hidden-phone">' + element.ev_coef1 + '</td>
                                                                                                <td id="coef2" class="hidden-phone">' + element.ev_coef2 + '</td>' + ns + '

                                                                                                <td id="cat" class="hidden-phone">' + element.ev_cat + '</td>'

            + tip + '

                                                ' + status + '

                                                <td class="center">

                                                    <a id="del" data-id="' + element.ev_id + '"href="#" >Delete</a>&nbsp;
                                                                                                        <a id="edit" data-id="' + element.ev_id + '" href="#widget-config" data-toggle="modal" >Edit</a>
                                                </td>
                                            </tr>
';

            $("#sample_1").find('tbody')
                .append(_row);              

        });
    });
    request.fail(function (jqXHR, textStatus) {
        alert("Request failed: " + textStatus);
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-09T15:29:35.070

这是使用 AJAX 调用将数据加载到 html 表的工作示例。如果您要添加更多数据行，只需按如下方式循环即可。

```
$.ajax({

type: "GET",
 url: "/controllerURL.html", //controller URL
 contentType: "application/json; charset=utf-8",
 dataType: "json",    

 success: function (results) {
    console.log(results)
     var success = results.success;
    if(success){            
         var finaldata = "<tbody><thead><tr><th>ID</th><th>header1</th><th>header2</th><th>header3</th></tr></thead>"; //data
    var data = results.message;
        data = jQuery.parseJSON(data);
    alert(data);
        for(var i = 0; i < data.length; i++){
            var value = data[i];                
            finaldata = finaldata+  "<tr><th>"+value.ID+"</th><th>"+value.variable1+"</th><th>"+value.variable2+"</th></tr>";
                                        }
        finaldata = finaldata + "</tbody>";
    $("#tableID").html(finaldata);
     }            
 },
 error: function (data) {       
    alert("fail");
 console.log('ajax call error');    

 } 
```

# visual-studio - 所以Visual Studio现在正式支持Git了。这意味着什么？

> ID：14609620
> 
> 赞同：14
> 
> 时间：2013-01-30T17:05:13.063
> 
> 标签：visual-studio, git, version-control, tfs, visual-studio-2012

我刚刚阅读了一篇非常有趣的[文章](http://blogs.msdn.com/b/visualstudioalm/archive/2013/01/30/getting-started-with-git-in-visual-studio-and-team-foundation-service.aspx)，显然在过去的 Visual Studio 2012 更新中，它现在内置了官方的 Git 支持。

我的问题是，这到底是什么意思？这是否意味着 TFS 服务器现在可以托管 Git 存储库？或者，Visual Studio 是否使用类似`git-tfs`幕后的东西来使用带有 Git 桥的常规 TFS 存储库？或者这是否适用于 TFS 服务器？也在 Visual Studio 之外使用 Git，它托管在 TFS plain ol' vanilla git 上，还是像 git-tfs 桥？

此外，是否有任何关于将 TFS 存储库转换为具有此支持的 Git 存储库的文档？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-30T17:16:30.080

[Visual Studio Online](http://tfs.visualstudio.com/)托管 git 存储库并提供与 TFS 工作项跟踪和构建的集成。我们将这些信息存储在适当的 git 存储库中——它不是一个透明的**[`git-tf`](http://gittf.codeplex.com/)**桥梁。相反，我们存储 git 引用和对象，尽管我们将它们存储在 SQL Server (SQL Azure) 中，而不是传统的磁盘 git 存储库格式。我们这样做是为了与现有的 TFS 可管理性和 Team Foundation Service 扩展集成。

TFS 2013 中的 Team Foundation Server 是驻留在数据中心的本地产品，支持 git 存储库托管。许多功能在到达本地产品之前到达托管的 Visual Studio Online。

同样，Visual Studio 集成是一个合适的 git 客户端——同样，它不是`git-tf`. 它使用**[libgit2](http://libgit2.github.com)**和**[libgit2sharp](http://libgit2sharp.com)**项目提供对本地 git 存储库的存储库访问，以及网络访问以提供对任何使用 HTTP 的 git 托管服务的推送和拉取。（目前不支持 SSH 传输。）这意味着您可以推送和拉取到 Bitbucket 或 GitHub，例如，您无需与 Team Foundation Server 对话。

# asp.net - 数据库“主”中的 CREATE DATABASE 权限被拒绝

> ID：14609623
> 
> 赞同：1
> 
> 时间：2013-01-30T17:05:19.780
> 
> 标签：asp.net, sql-server, visual-studio-2010, iis-7

尝试使用登录时收到此错误`ipadd/loginpage.aspx`。当我尝试使用另一台机器登录我的局域网时会发生这种情况：

> 数据库“master”中的 CREATE DATABASE 权限被拒绝。尝试为文件 E:\StoreDB.mdf 附加自动命名数据库失败。存在同名数据库，或无法打开指定文件，或位于 UNC 共享上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T07:17:26.477

您无法创建数据库或附加数据库，因为您没有这样做的特权。这是我的解决方法：

首先，以“管理员”身份运行 SQL Server Management Studio。然后，登录到您的帐户。接下来，单击 Security 文件夹 --> 单击 Logins --> 选择您的帐户名 --> 检查属性并验证状态是否有权连接到数据库引擎。

我希望它对你有帮助。

# ios - 用乘法混合模式覆盖 UIImageViews？

> ID：14609629
> 
> 赞同：8
> 
> 时间：2013-01-30T17:05:47.527
> 
> 标签：ios, uiimageview, calayer, core-image

我有 2 个 UIImageViews 显示在彼此之上。其中一个可以使用手势识别器拖动。

有没有一种方法可以使用像 Multiply 这样的混合模式来渲染 ImageView？这样当它们在每个顶部移动时，它们会以该混合模式呈现？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-30T19:47:08.750

您必须覆盖父视图上的 drawRect: 函数，以实现如下效果：

```
 - (void)drawRect:(CGRect)rect
{
    CGContextRef ctx = UIGraphicsGetCurrentContext();

    [image1.image drawInRect:image1.frame blendMode:kCGBlendModeMultiply alpha:1];
    [image2.image drawInRect:image2.frame blendMode:kCGBlendModeMultiply alpha:1];
    [super drawRect:rect];
} 
```

它所做的是获取当前的 graphicsContext，并使用乘法混合模式将两个图像绘制到其中。

为了能够看到这一点，您需要将两个图像的 alpha 设置为 0，否则新绘制的内容将被遮挡。由于父视图正在重绘它们，因此您将看到结果相乘的版本。

此外，每当图像的位置更新时，您都需要在父视图上调用 setNeedsDisplay，以强制它再次调用 drawRect。

我确信可能有更有效的方法可以利用 Quartz 2D 来实现您想要的，但这可能是最简单的。

# c# - GotFocus 分布在所有对象图上

> ID：14609631
> 
> 赞同：0
> 
> 时间：2013-01-30T17:05:50.963
> 
> 标签：c#, .net, silverlight, silverlight-4.0

我在 silverlight 上有一个页面，它有一个文本框，我需要处理文本框上的 GotFocus 事件，但问题是这个特定事件分布在所有对象图上，所以当任何其他对象抛出 GotFocus 事件时，文本框的 GotFocus我也想处理程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:54:13.073

GotFocus 是一个路由事件，这意味着它将沿着可视树向上工作，直到有东西将其标记为已处理。

您正在描述事件类型所期望的内容。

如果事件继续“冒泡”而产生一些不良副作用。您可以将事件标记为已处理以停止它。

您还可以检查事件的 OriginalSource 属性以查看该事件是否源自您的 TextBox。

```
void OnGotFocus(object sender, RoutedEventArgs e)
{ 
    var myTextBox = e.OriginalSource as TextBox;
    if(myTextBox != null && myTextBox.Name == "MyTextBoxName")
    {
        e.Handled = true;
    }
} 
```

# html - ASP经典：将写入的页面作为字符串获取

> ID：14609634
> 
> 赞同：0
> 
> 时间：2013-01-30T17:06:01.387
> 
> 标签：html, asp-classic, vbscript, get

我的问题是下一个：

我有一个提交给自身的 ASP 页面。单击确认按钮时，将调用 javascript 函数确认，最后提交完成。在那个函数中，在我提交之前，我可以让书面页面执行“document.childNodes[0].outerHTML”。

我想要的是在确认javascript函数中获取我在“document.childNodes [0] .outerHTML”中执行的字符串，但在VBScript部分提交之后。

有人知道这个问题吗？有人可以帮我吗？

比你非常好，最好的问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T08:05:41.823

只需将其作为隐藏表单字段的值传递即可。

HTML：

```
<input type="hidden" name="outerHTML" /> 
```

然后在提交之前的 JavaScript 代码中：

```
document.forms["form_name"].elements["outerHTML"].value = document.childNodes[0].outerHTML; 
```

您可以在服务器端代码中阅读它：

```
<%
Dim rawHTML
If (form was submitted) Then
    rawHTML = Request("outerHTML")
    '...
End If
%> 
```

# c# - 绑定到 DataGrid ControlTemplate 中的 DataGrid ItemsSource

> ID：14609635
> 
> 赞同：-4
> 
> 时间：2013-01-30T17:06:02.163
> 
> 标签：c#, binding, silverlight-4.0, mvvm-light

为 SL DataGrid 实现摘要标题行我找不到绑定到 DataGrids`ItemsSource`属性（并应用`IValueConverter`）的方法。

当简单地指定绑定转换器接收 ViewModel 作为 DataGrids DataContext 但我宁愿不将 ViewModel 耦合到我的转换器：

```
<!-- somewhere in my DataGrid ControlTemplate -->
<sdk:DataGridCell Content="{Binding Converter={StaticResource SummaryRow}}" /> 
```

我试图创建一个`RelativeSource`，但 xaml 抱怨我不能`AncestorType`在这种情况下使用：

```
<sdk:DataGridCell Content="{Binding RelativeSource={RelativeSource FindAncestor AncestorType={x:Type DataGrid}}, Converter={StaticResource SummaryRow}}" /> 
```

我的 DataGrid 本身绑定到`CollectionViewSource`处理分组和排序的。

我已经实现了`DataGridRowGroupHeader`使用第一种方法显示列总和，并且相应的转换器接收到一个`CollectionViewGroup`我可以从中检索项目而无需耦合到 ViewModel。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:11:27.597

我想出了实现这一点的正确方法，并将`ListCollectionView`绑定到 DataGrids传递到我自定义`ItemsSource`的内部：`IValueConverter``ControlTemplate`

```
<Style TargetType="sdk:DataGrid">
  <Setter Property="Template">
    <Setter.Value>
    <ControlTemplate TargetType="sdk:DataGrid">

    <!-- Rest of ControlTemplate xaml omitted -->

    <sdk:DataGridCell 
        Content="{Binding Path=ItemsSource, 
                          RelativeSource={RelativeSource}, 
                          Converter={StaticResource SummaryRow}}" />
    <!-- ... -->

    </ControlTemplate>
    </Setter.Value>
  </Setter>
</Style> 
```

# java - 奇怪的 Math.sin 行为

> ID：14609636
> 
> 赞同：0
> 
> 时间：2013-01-30T17:06:05.450
> 
> 标签：java, audio, trigonometry

我正在制作一个播放音高变化的正弦波的程序，我正在处理我以前从未见过的东西：程序应该播放从 220 赫兹到 0 赫兹的正弦波，我可以看到频率从 220 到 0，但我听到的是一个从 220 到 0 再回到 220 的正弦波。我不知道这段代码是如何做到的

[http://pastebin.com/HS36k7XJ](http://pastebin.com/HS36k7XJ)（因为布局搞砸了，不得不在这里发布）

（其中 t 是以秒为单位的时间，f 是当前频率（通过简单的线性插值计算，其行为正常））

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:32:07.870

您可以`f`线性缩小到零。这意味着表达式`t * Math.PI * 2`也将缩小为零。您传递的值`sin()`从最初的 0（因为 t=0）变为某个正值（因为 t>0 和 f>0），然后回到 0（因为 f=0）。

让我们看看`t * Math.PI * 2 * f`随着时间的推移和频率的值：

*   在 t=0 时，该值为 0，并且会随着速度 220 的增加而增加
*   在 t=0.5 时，值为 345，将停止增加
*   在 t=1 时，该值再次为 0，并将随着速度 -220 减小

它正在反转它的方向，因为`t * Math.PI * 2`乘以 f，并且 f 越来越小。这意味着随着 t 接近 1，整个表达式将变得更小。

试试这个代码：

```
double ct = 0;
for (;;) {
      if(t>=1) break;
            //System.out.println(t+" "+e.getValueAt(t));
            for (int i = 0; i < buff.length; i++) {
                double f=lerp(fa,fb,t);
                buff[i] = (short) (Short.MAX_VALUE * 0.5 * Math.sin(Math.PI * 2 * ct));
                toSoundCard[2 * i] = (byte) buff[i];
                toSoundCard[2 * i + 1] = (byte) (buff[i] >> 8);   //(i know i could avoid doing this)
                t += 1.0 / 44100.0;
                ct += f / 44100.0;
            }
            speaker.write(toSoundCard, 0, toSoundCard.length);
        } 
```

# c++ - Python 抱怨 SWIG 模块不存在

> ID：14609637
> 
> 赞同：3
> 
> 时间：2013-01-30T17:06:06.207
> 
> 标签：c++, python, linux, swig

按照网络上的不同教程，我尝试使用 SWIG 在 python 中制作 c++ 类的包装器。

我的课看起来像这样：

```
/*file libraryInstance.h*/
struct LibraryInstance
{
    void init();
    void terminate();
private:
    std::shared_ptr<AnObject> m_spAnObject;
}; 
```

对于 python 博览会，我制作了这个 .i 文件：

```
%module LibraryInstance
%{
#include "libraryInstance.h"
%}
%include "libraryInstance.h" 
```

然后我执行了命令`swig -c++ -python -o ./src/libraryInstance_wrap.cpp ./src/libraryInstance.i`

没有任何输出错误，swig 生成了两个文件，`libraryInstance_wrap.cpp`并且`LibraryInstance.py`

然后我编译 c++ 文件，包括`libraryInstance_wrap.cpp`. 所有编译都很好，我得到了我的库 .so 文件。

当我查看生成的 swig 时`LibraryInstance.py`，我可以清楚地看到`class LibraryInstance`：

[参看。整个生成的 python 包装器在这里。](http://pastebin.com/f8L8KThw)

`python LibraryInstance.py`但是当我在与我的 .so 相同的目录中启动 command 时，我看到了这个错误输出：

```
Traceback (most recent call last):
  File "LibraryInstance.py", line 26, in <module>
    _LibraryInstance = swig_import_helper()
  File "LibraryInstance.py", line 18, in swig_import_helper
    import _LibraryInstance
ImportError: No module named _LibraryInstance 
```

而且当我查看LibraryInstance.py的代码时，它看起来好像抛出了异常ImportError，python找不到模块。（第 18 行）。

知道我应该怎么做才能纠正这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T18:28:13.483

在 SWIG 文档中，[第 31.2.2 段](http://www.swig.org/Doc1.3/Python.html#Python_nn13)指出库 .so 的名称应该是`_NameOfTheModule.so`

所以我重命名了我的 library `_LibraryInstance.so`，而不是`LibraryInstance.so`... 现在我的模块加载正常。

# android - 设置安装位置不起作用

> ID：14609638
> 
> 赞同：0
> 
> 时间：2013-01-30T17:06:08.807
> 
> 标签：android, adb, android-4.0-ice-cream-sandwich

我需要将我的 android 设置为在外部 SD 上安装应用程序。这么多教程，在其中很多我都找到了 set-install-location 命令。

我使用它，并使用 get-install-location 查看实际安装位​​置，并且似乎是正确的（2[外部]）。但是，当我去手机尝试安装一些东西时，他没有安装并显示空间不足的消息。

安卓版本是4.0.3，手机是LG Optimus L5

PS：抱歉有些英文错误，我是巴西人，不习惯用英文写作（对谷歌翻译没有耐心）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T18:52:00.227

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="com.carefreegroup"
        android:versionCode="1"
        android:versionName="1.0"
        android:installLocation="preferExternal" > 
```

属性**android:installLocation**可以有以下可能的值。

**internalOnly**：应用程序必须仅安装在内部设备存储上。如果设置了此项，应用程序将永远不会安装在外部存储上。如果内部存储已满，则系统将不会安装该应用程序。如果您未定义 android:installLocation，这也是默认行为。

**auto：**应用可以安装在外置存储上，但系统默认将应用安装到内置存储上。如果内部存储已满，则系统会将其安装到外部存储上。安装后，用户可以通过系统设置将应用程序移动到内部或外部存储。

**preferExternal：**应用程序首选安装在外部存储（SD 卡）上。无法保证系统会遵守此请求。如果外部媒体不可用或已满，或者应用程序使用前向锁定机制（外部存储不支持），则应用程序可能安装在内部存储上。安装后，用户可以通过系统设置将应用程序移动到内部或外部存储。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-11-04T14:11:34.827

兄弟

上述方法不适用于任何Android ICS 及以上版本的手机。没用的谷歌已经把ICS及以上版本中非常优秀的功能去掉了。

# php - PHP检查字符串是否包含所有单词且仅包含所有单词

> ID：14609641
> 
> 赞同：1
> 
> 时间：2013-01-30T17:06:15.013
> 
> 标签：php

```
$string = 'boo-hello--word';
$array = array(
  "boo - hello",
  "boo - hello world",
  "boo - hello world foo",
);

...

foreach ($array as $element) {
  if (string_contains_all_words($string, $element) {
    // True
    $match = $element; // this should be "boo hello world"
   }
} 
```

正如（希望）上面的 php 所示，我有一个包含多个破折号的字符串（有时是一个，也许是两个）。我想在一个数组中搜索以查看是否所有单词（并且只有所有单词）（不包括破折号）都存在。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T17:17:50.503

这是一种非常简单的方法，可以解决您描述的问题。

```
$string = 'boo-hello--word';
$array = array(
    "boo hello",
    "boo hello world",
    "boo hello word",
    "boo hello world foo",
);

$rep_dashes = str_replace('-', ' ', $string);
$cleaned = str_replace('  ', ' ', $rep_dashes);

if (in_array($cleaned, $array)) {
    echo 'found!';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T17:19:30.440

从您的问题中不清楚这些词是否可以按任何顺序排列，但我假设不会。以下代码是我认为您所追求的。:)

```
<?php
$array = array("boo hello", "boo hello world", "boo hello world foo");
//Removes any dashes (1 or more) from within the string and replaces them with spaces.
$string = trim(preg_replace('/-+/', ' ', $string), '-');
    if(in_array($string, $array) {
        $match = $string;
    } else {
        //not match
    }
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T17:16:25.467

```
$string = 'boo-hello--world';
$array = array(
  0 => "boo hello",
  1 => "boo hello world",
  2 => "boo hello world foo",
);
$match = null;

$string = preg_replace('~-+~', ' ', $string);
foreach ($array as $i => $element) {
    if ($string == $element) {
    // if (preg_match("~^($string)$~", $element)) { // or
        $match = $element;
        break;
    }
}
print $i; // 1 
```

# github - 如何获取特定的 github 通知，例如拉取请求或分配的问题？

> ID：14609652
> 
> 赞同：23
> 
> 时间：2013-01-30T17:06:36.457
> 
> 标签：github

Github 通过邮件或网络提供通知，基于观察到的 repos。但是有没有办法得到更详细的信息？就像只看一个特定的请求或分配的问题？我觉得我从与我无关的其他拉取请求的评论中收到垃圾邮件。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-30T20:45:39.350

2020 年 11 月更新：您现在拥有“[自定义通知控件](https://github.blog/2020-11-20-whatcha-watchin-custom-notification-controls/)”

> 本周，我们将让您更好地控制您在 GitHub 上收到通知的内容类型：
> 
> [![观看变得细化](../Images/e7408f93e4ae3d89653d822c0a914091.png)](https://i.stack.imgur.com/ogEJs.gif)
> 
> 监视存储库通常是一把双刃剑。
> 您想了解项目的最新动态，但如果您在社区中有特定的兴趣或角色，您别无选择，只能订阅所有内容的更新。
> 不再。
> 
> 在观看按钮下方，您会发现我们进行了一些更改：我们使语言更清晰，以便您知道您将收到什么更新，我们使界面更易于访问，我们引入了新的自定义类别。
> 在此，您可以选择您希望收到通知的内容类型。
> 
> 你专注于代码审查吗？将通知限制为拉取请求。
> 你是社区管理员吗？选择讨论。
> 随着新类型通知的添加，您将在此菜单中找到它们。
> 
> 您将在所有存储库页面和观看页面上找到这些控件，您可以在其中自定义已观看的存储库的通知。

* * *

2019 年 5 月更新：您现在拥有“**[自定义线程订阅](https://github.blog/changelog/2019-05-09-custom-thread-subscriptions/)**”

> 您现在可以将收到的任何问题和拉取请求的通知类型限制为特定于合并、重新打开和/或关闭的事件。

[![https://github.blog/wp-content/uploads/2019/05/custom-subscription-notifications-1.jpg?resize=1354%2C780w=1354](../Images/07d7161e8b34fa3e7e93363a1e342654.png)](https://i.stack.imgur.com/3hH0T.jpg)

这应该可以进一步控制收到的电子邮件数量。

* * *

2017 年 7 月更新：您现在可以在 GitHub 存储库中声明[**代码所有者**](https://help.github.com/articles/about-codeowners/)。
任何涉及由所述代码所有者管理的文件的拉取请求都会触发对该人的通知。

请参阅“[更新拉取请求后回购所有者自动通知](https://stackoverflow.com/a/44990620/6309)”

* * *

2015：是的，例如，对于某个项目的特定问题（[问题 2595](https://github.com/gitlabhq/gitlabhq/issues/2595)），您可以通过单击页面右侧的“订阅”按钮进行注册（自 2015 年起）。

单击后，它将显示为“取消订阅”（如果您不想再收到任何通知，请单击）

[![通知](../Images/aac745adb95e73e9e24bf8c1a453e75d.png)](https://i.stack.imgur.com/pS2Ro.png)

所以你不必看所有的回购，你可以只订阅特定的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-17T10:35:37.467

不确定这是否已经改变，但现在右上角有一个订阅按钮：

[https://help.github.com/articles/subscribing-to-conversations/](https://help.github.com/articles/subscribing-to-conversations/)

# jquery - 单击时将带有 jQ uery 的图标添加到选择器

> ID：14609656
> 
> 赞同：0
> 
> 时间：2013-01-30T17:06:45.190
> 
> 标签：jquery, css

我设置了一个常见问题解答页面，以在单击问题时显示答案。这是一个具有相同设置[的 jsFiddle 。](http://jsfiddle.net/soncraig/nqgzL/)当答案可见时，我想添加一个向上的三角形，但我无法让它正常工作。我已经尝试了从纯 CSS 到 jQuery 的所有方法，但我无法让它正常工作。有任何想法吗？

这是HTML：

```
<div id="faqs">
    <h3 class="question">Question 1? <span class="faqsIcon" aria-hidden="true" data-icon="&#9660;"></span></h3>
    <div>
        <p class="answer">Answer 1</p>
    </div>
    <h3 class="question">Question 2? <span class="faqsIcon" aria-hidden="true" data-icon="&#9660;"></span></h3>
    <div>
        <p class="answer">Answer 2</p>
    </div>
</div> 
```

这是 jQuery：（来自[http://davidwalsh.name/jquery-sliders](http://davidwalsh.name/jquery-sliders)）

```
$(document).ready(function() {  
    $('#faqs h3').each(function() {
        var tis = $(this), state = false, answer = tis.next('div').slideUp();
        tis.click(function() {
            answer.slideToggle(state);
            tis.toggleClass('active', state);
            $(this).find('span.faqsIcon').data('data-icon',"&#9650;");
        }); // end click function
    }); // end faqs a_function
}); // end ready 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T17:10:21.250

你可以使用这个 CSS ：

```
.question.active:before {
    content: "\25B2  ";
    padding-right: 3px;
} 
```

如果问题是活跃的，前面有这个三角形：▲</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T17:14:41.093

在您的 toggleClass 调用中删除 flase 参数：

```
tis.toggleClass('active'); 
```

**[jsFiddle 示例](http://jsfiddle.net/nqgzL/2/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T17:14:47.293

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T17:39:42.620

这就是你想要的。您可以切换该课程，但它可能无法完全满足您的需求，因为您需要 2 个课程。我只使用了javascript。

**我在每个 h3 中设置了一个active**属性，并且每次都检索它。有趣的事实：不要放入布尔值，因为它们会被重新解释为字符串。

```
if (active) $(this).find('span.faqsIcon').html("&#9650;");
else $(this).find('span.faqsIcon').html("&#9660;"); 
```

[http://jsfiddle.net/DzrdG/](http://jsfiddle.net/DzrdG/)

# c# - 子元素事件监听器

> ID：14609660
> 
> 赞同：0
> 
> 时间：2013-01-30T17:07:13.667
> 
> 标签：c#, winforms, events

在 C# Winform 应用程序上。想象一下，我有一个面板，里面有一些标签。

如何在面板点击事件中侦听此标签的所有点击事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:12:26.367

您可以通过在`Form_Load`事件处理程序或任何其他合适的事件处理程序中调用以下代码以编程方式执行此操作。

```
foreach (Label label in panel1.Controls.OfType<Label>())
{
    label.Click += LabelOnClick;
} 
```

然后在事件处理程序中执行您的操作：

```
private void LabelOnClick(object sender, EventArgs eventArgs)
{
    MessageBox.Show("Label In Panel Clicked");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T17:09:56.883

为什么不向面板中的所有类型按钮控件添加额外的事件处理程序？

示例代码：

```
 private void SetupButtonClickListenerForPanel1()
    {
        panel1.Click += ListenForAllButtonClickOnPanel1;
        foreach (Control control in panel1.Controls)
        {
            var tb = control as Button;
            if (tb != null)
            {
                tb.Click += ListenForAllButtonClickOnPanel1;
            }
        }

    }

    private void ListenForAllButtonClickOnPanel1(object sender, EventArgs eventArgs)
    {
        //
        Button tb = (Button) sender; // casting will fail if click is on Panel1 itself!
        MessageBox.Show(tb.Name);
    } 
```

Linq 添加 Handler 的方式：

```
 private void SetupButtonClickListenerForPanel1()
    {
        panel1.Click += ListenForAllButtonClickOnPanel1;
        foreach (var tb in panel1.Controls.OfType<Button>())
        {
            tb.Click += ListenForAllButtonClickOnPanel1;
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T17:17:03.050

如果您的标签是面板的子级，则面板上 Click 事件的侦听器将侦听其子级的所有未重新定义的侦听器。

示例代码：

```
{ 
  //Form init
   panel1.Click += new System.EventHandler(this.panel1_Click);
  ....
}

private void panel1_Click(object sender, EventArgs e)
    {
        //The clicked label will be sender.
        Label l = (Label) sender; //Should be a safe cast. Will crash if sender is not a label

    } 
```

# java - 是否可以为特定（错误/秒）调用快速修复解决方案（eclipse）？

> ID：14609667
> 
> 赞同：1
> 
> 时间：2013-01-30T17:07:38.903
> 
> 标签：java, eclipse

我有一个程序可以扫描 Java 文件以查找错误。我从 Eclipse 调用编译器并对 Java 文件运行扫描并获取行号、开始位置和结束位置作为输出。我编写了一个程序来从文件中提取错误。

我想要做的是访问 eclipse 中的 quickfix 组件，列出可能的问题修复列表，并将该列表打印到控制台。

下面是我如何调用编译器并将详细信息打印在控制台上的程序的一部分：

```
Iterable fileObjects = fileManager.getJavaFileObjectsFromStrings(
        Arrays.asList(fileToCompile));  
CompilationTask task = compiler.getTask(null, fileManager, listener, null,
        null, fileObjects); 
Boolean result = task.call();
if(result == true) {
    System.out.println("Compilation has succeeded");
}
myerrors = listener.getlistofErrors();
for (CaptureErrors e : myerrors) {
    System.out.println("Code: " + e.getCode());
    System.out.println("Kind: " + e.getKind());
    System.out.println("Line Number: " + e.getLinenumber());
//  System.out.println("Message: "+ e.getMessage(Locale.ENGLISH));
//  System.out.println("Source: " + diagnostic.getSource());
    System.out.println("End position"+ e.getEndposition());
    System.out.println("Position: "+ e.getPosition());
    System.out.println("\n");
} 
```

* * *

```
class MyDiagnosticListener implements DiagnosticListener {
    List<CaptureErrors> errors = new ArrayList<CaptureErrors>();
    public void report(Diagnostic diagnostic) {
        CaptureErrors single_error = new CaptureErrors(diagnostic.getCode(),
                diagnostic.getKind(), diagnostic.getLineNumber(),
                diagnostic.getMessage(Locale.ENGLISH), diagnostic.getPosition(),
                diagnostic.getEndPosition());
        errors.add(single_error);  
    }

    public List<CaptureErrors> getlistofErrors() {
        return errors;
    }
} 
```

我还有一个程序可以转到行号并在特定位置提取文本（错误）。

对于我发现的特定错误，我如何调用 eclipse quickfix 解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:21:40.933

对的，这是可能的。确切的细节比 StackOverflow 的答案更容易包含。

Eclipse 通过使用插件进行扩展。[此处](http://www.vogella.com/articles/EclipsePlugIn/article.html)详细介绍了“Hello World”插件，在完成初始学习曲线后，您可以下载其他插件以了解 eclipse 内部的工作原理。

我想您最好检查一下 eclipse 当前的代码突出显示功能并阅读这些插件的源代码作为指南，但**前提**是您对插件开发的工作原理有所了解。

# php - 数组键存在但无法从 cookie 中读取

> ID：14609676
> 
> 赞同：1
> 
> 时间：2013-01-30T17:08:03.070
> 
> 标签：php, cookies, json, kohana-3.3

这是一个奇怪的问题，所以请耐心等待。问你们真的是我最后的手段。

需要明确的是，我使用的是 Kohana 3.3，尽管我什至不确定这与问题有关。

我正在使用 cookie 来跟踪网站上的已读项目。cookie 包含一个 json_encoded 数组。添加到该数组不是问题，每次读取新项目时都会添加对象。数组中的一个项目包含一个带有`last_view_date`和 a的对象`view_count`为了更新视图计数，我需要检查该项目是否已被读取`array_key_exists`，然后添加到视图计数中。这是我设置cookie的方式：

```
// Get the array from the cookie.
$cookie_value = Cookie::get_array('read_items');

// Update the view_count based on whether the id exists as a key.
$view_count = (array_key_exists($item->id, $cookie_value)) ? 
                $cookie_value[$item->id]['view_count'] + 1 : 1;

// Create the item to be added to the cookie.
$cookie_item = array(
    'last_view_date' => time(),
    'view_count' => $view_count
);

// Push $cookie_item to the cookie array.
Cookie::push('read_items', $item->id, $cookie_item); 
```

我在[Kohana 的 Cookie 类](http://kohanaframework.org/3.3/guide-api/Cookie)中添加了两个方法，`Cookie::push`和`Cookie::get_array`，在上面的代码中使用：

```
class Cookie extends Kohana_Cookie {

    public static function push($cookie_name, $key, $value)
    {
        $cookie_value = parent::get($cookie_name);

        // Add an empty array to the cookie if it doesn't exist.
        if(!$cookie_value)
        {
            parent::set($cookie_name, json_encode(array()));
        }
        else
        {
            $cookie_value = (array)json_decode($cookie_value);

            // If $value isn't set, append without key.
            if(isset($value))
            {
                $cookie_value[$key] = $value;
            }
            else
            {
                $cookie_value[] = $key;
            }
            Cookie::set($cookie_name, json_encode($cookie_value));
        }
    }

    public static function get_array($cookie_name)
    {
        return (array)json_decode(parent::get($cookie_name));
    }
} 
```

现在，这是我的问题。运行`var_dump`on`$cookie_value`输出以下内容：

```
array(1) {
  ["37"]=>
  object(stdClass)#43 (2) {
    ["last_view_date"]=>
    int(1359563215)
    ["view_count"]=>
    int(1)
  }
} 
```

但是当我尝试访问时`$cookie_value[37]`，我不能：

```
var_dump(array_key_exists(37, $cookie_value));
// Outputs bool(false);

var_dump(is_array($cookie_value));
// Outputs bool(true);

var_dump(count($cookie_value));
// Outputs int(1);

var_dump(array_keys($cookie_value));
// Outputs:
// array(1) {
//   [0]=>
//   string(2) "37"
// } 
```

**添加调试代码：**

```
var_dump(isset($cookie_value["37"]));
// Outputs bool(false).

var_dump(isset($cookie_value[37]));
// Outputs bool(false).

var_dump(isset($cookie_value[(string)37]));
// Outputs bool(false). 
```

我希望它足够清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:13:31.120

使用以下方式访问值：-

```
$cookie_value["37"] 
```

“37”（键）是字符串格式。您将其指定为整数（$cookie_value[37]）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T17:22:36.513

看看[json_decode](http://php.net/manual/en/function.json-decode.php)。目前，您正在将结果转换为数组。如果您将 true 作为第二个参数传递给 json_decode，您将得到一个数组而不是 stdObject。

该问题也可能与您检查 int 与字符串键有关。您可以通过在服务器上运行此代码进行测试：

```
<?php  

$one = array("37" => "test");
$two = array(37 => "test");

var_dump(array_key_exists(37,$one)); // true or false?
var_dump(array_key_exists(37,$two)); // true

?> 
```

# ruby - 对哈希值求和

> ID：14609688
> 
> 赞同：1
> 
> 时间：2013-01-30T17:08:44.513
> 
> 标签：ruby, hashmap

在 ruby​​ 中求和哈希值的最佳方法是什么：

```
@price = { :price1 => "100", :price2 => "100", :price3 => "50" } 
```

我现在做这样的事情：

```
@pricepackage = @price[:price1] + @price[:price2] + @price[:price3] + 500 
```

请解释您的答案，我想了解原因，而不仅仅是如何。=)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T17:10:43.310

你可以做：

```
@price.values.map(&:to_i).inject(0, &:+) 
```

编辑：添加解释

所以@price.values 返回一个数组，该数组收集散列的所有值。比如说`["1", "12", "4"]`。然后`.map(&:to_i)`应用于`to_i`这个数组的每个元素，因此你得到`[1,12,4]`. 最后`.inject(0,&:+)`preform 注入初始值为 0 并使用函数进行累加`+`，因此它在最后一步中对数组的所有元素求和。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T17:13:37.963

如果您的数据集如下所示：

```
prices = {price1: 100, price2: 100, price3: 50} 
```

那么这将对值求和：

```
prices.values.inject(0) {|total, v| total += v} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T17:14:24.650

把事情简单化

```
@prices = ....
@price = 0.0

@prices.each do |p|
   @price += p
end 
```

# ios - SoundCloud API 登录在 IOS 6.0 设备上打开 iTunes 应用程序？

> ID：14609702
> 
> 赞同：0
> 
> 时间：2013-01-30T17:09:22.987
> 
> 标签：ios, soundcloud

已在应用程序中实现 SoundCloud API。一切正常，使用 SoundCloud IOS 快速入门指南。

```
- (IBAction) login:(id) sender
{
    SCLoginViewControllerCompletionHandler handler = ^(NSError *error) {
    if (SC_CANCELED(error)) {
        NSLog(@"Canceled!");
    } else if (error) {
        NSLog(@"Error: %@", [error localizedDescription]);
    } else {
        NSLog(@"Done!");
    }
};

[SCSoundCloud requestAccessWithPreparedAuthorizationURLHandler:^(NSURL *preparedURL) {
    SCLoginViewController *loginViewController;

    loginViewController = [SCLoginViewController
                           loginViewControllerWithPreparedURL:preparedURL
                                            completionHandler:handler];
    [self presentModalViewController:loginViewController animated:YES];
}];
} 
```

但是，当我在设备 iPhone IOS 6.0 上测试并尝试登录时，SoundCloud 屏幕出现，我添加了我的详细信息，但是当我单击连接 [to SoundCloud] 时，iTunes 播放器打开并且我的应用程序关闭。（这很烦人）我可以重新打开我的应用程序并登录到 SoundCloud。为什么iTunes会打开？当我登录 SoundCloud 时？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T21:56:43.747

你把什么定义为你的`URL-Scheme`in `YourApplication-Info.plist`？

请注意，它需要与您`Redirect URI`在`https://soundcloud.com/you/apps/`.

有关自定义 URL 方案的更多信息，请查看[Apple 的文档](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/AdvancedAppTricks/AdvancedAppTricks.html)

### 注册自定义 URL 方案

`"To register a URL type for your app, include the CFBundleURLTypes key in your app’s Info.plist file. The CFBundleURLTypes key contains an array of dictionaries, each of which defines a URL scheme the app supports. "`

让我知道这是否可以解决您的问题。

# joomla2.5 - Joomla - mod_articles_latest 不显示最新的

> ID：14609704
> 
> 赞同：0
> 
> 时间：2013-01-30T17:09:34.020
> 
> 标签：joomla2.5, joomla-extensions, joomla-module

我试过在网站和谷歌上四处搜索，但没有运气，所以就这样；

在 joomla 中，使用模块 mod_articles_latest，它没有显示最新消息的原因可能是什么？我按照我的要求收到了 4 条新闻，我告诉它选择已发布的日期，但当我将新文章添加到我告诉它使用的类别时，它似乎没有更新。

我认为缓存可能是原因，但我为模块关闭了它。

使用 joomla 2.5。

提前感谢您的建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T17:31:05.733

首先确保您没有修改 mod_articles_latest 的任何文件。如果您已修改，则将其还原并检查。其次检查文章列表及其发表日期。即使它不起作用，也有许多免费模块显示 Joomla 扩展站点上的最新文章列表。如果你有半个小时并且你知道如何构建 Joomla 模块，你可以继续。最后 mod_articles_latest 模块非常适合我。谢谢

# c# - 在 http 请求中加密登录凭据的正确方法是什么？

> ID：14609705
> 
> 赞同：2
> 
> 时间：2013-01-30T17:09:34.450
> 
> 标签：c#, .net, security, httprequest, credentials

如果我需要向需要登录凭据的站点发出 HttpRequest，我可以使用类似于以下的代码，但正如您所见，用户名和密码只是 base64 编码，这意味着如果有人要拦截所有 http 请求他们要做的是搜索与“授权”标头关联的值，并且他们有我的登录信息。

```
 HttpWebRequest request = (HttpWebRequest)WebRequest.Create("https://...");

        request.Headers.Add("Authorization",
        string.Format("Basic {0}", Convert.ToBase64String(Encoding.Default.GetBytes(
        string.Format("{0}:{1}", username, password)))));

        using (HttpWebResponse response = (HttpWebResponse)request.GetResponse())
        {
            using (Stream s = response.GetResponseStream())
            {
                using (StreamReader r = new StreamReader(s))
                {
                    DoSomething(r.ReadToEnd());
                }
            }
        } 
```

下面的代码是更好的选择，还是它也使用“基本”授权标头发出 http 请求？

```
 WebClient wc = new WebClient();
        wc.Credentials = new NetworkCredential(username, password);
        DoSomething(wc.DownloadString("https://...")); 
```

如果两个代码都没有导致“隐藏”登录凭据的 http 请求，并且实际上有一种方法可以“隐藏”它们，那么正确的方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T17:12:31.247

如果您使用 HTTPS 向服务器发出 Web 请求，您的整个消息（包括标头）都会被加密。因此，您基本上无需担心加密数据。如果您打开 Wireshark 并尝试嗅探数据包，您会发现它们不可读。

.NET Framework 将根据您发送请求的 URL 处理底层所需的 SSL 加密。

更多信息可以在 MSDN 上找到：http: [//msdn.microsoft.com/en-us/library/ds8bxk2a.aspx](http://msdn.microsoft.com/en-us/library/ds8bxk2a.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T17:14:54.843

这两个都将使用 HTTP 基本访问身份验证，但由于您似乎使用的是 HTTPS，因此您不必担心这一点，因为无论如何整个请求都会被加密。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T17:22:16.657

我建议使用 WebClient 而不考虑它是加密的一部分，我只是认为它是一种更清洁的方法，如果你真的关心登录凭据，你可以使用

```
SecureString testString = new SecureString(); 
```

[http://blogs.msdn.com/b/fpintos/archive/2009/06/12/how-to-properly-convert-securestring-to-string.aspx](http://blogs.msdn.com/b/fpintos/archive/2009/06/12/how-to-properly-convert-securestring-to-string.aspx)

;

# javascript - 从 ajax post 函数中取出返回的数据

> ID：14609707
> 
> 赞同：-3
> 
> 时间：2013-01-30T17:09:38.903
> 
> 标签：javascript, jquery, ajax

我需要根据从 post 函数之外的 ajax post 返回的数据创建一个条件

```
function post(){

   $.post('page.php',$('#form').serialize(), function(data) {
   if(data !== 'good'){alert(data); return false;} // take this out of here
});
    //and place it here

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T17:18:59.223

如下代码应该可以正常工作。

```
function post(){
   var data;
   $.ajax({url:'page.php',
           async:false,
           type:'POST',
           data:$('#form').serialize(), 
           success:function(res) {
                 data = res;
           }
     });
     if(data !== 'good'){alert(data); return false;} // take this out of here
} 
```

但请记住，同步 ajax 调用将冻结您的页面，直到请求完成，您可能会发现最好找到一种方法来做您需要的事情，而无需移动`if(data !== 'good'){alert(data); return false;}`到成功回调函数之外。

**UPD**：错过指定请求类型，它应该`POST`代替 default `GET`。代码已更新。

# java - 在 bash 中构建较旧的 NetBeans 项目会导致错误

> ID：14609710
> 
> 赞同：0
> 
> 时间：2013-01-30T17:09:50.973
> 
> 标签：java

我正在打开一个较旧的 NetBeans 项目，我想`ant`在`bash`debian 中使用它来构建它。但是，当我尝试运行时`ant`，出现此错误

> 构建失败/home/karelbilek/NetBeansProjects/oldProject/nbproject/build-impl.xml:528：执行此行时发生以下错误：/home/karelbilek/NetBeansProjects/oldProject/nbproject/build-impl.xml:261：无法找到一个javac编译器；com.sun.tools.javac.Main 不在类路径中。也许 JAVA_HOME 不指向 JDK。当前设置为“/usr/lib/jvm/java-7-openjdk-i386/jre”

这意味着什么？我该怎么办？在“/usr/lib/jvm/java-7-openjdk-i386/jre”中，当我查看时似乎有一个实际的 JRE，那么问题是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T17:11:07.483

您指向的是 JRE（Java*运行时环境*），而不是 JDK（Java*开发工具包*）。

只有 JDK 包含编译器 ( `javac`)。JRE 用于运行 Java 程序，但不携带 JDK 的额外组件（编译器等）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-01T15:13:51.260

它发生在我身上，我通过安装 jdk 解决了它

```
sudo apt-get install openjdk-7-jdk 
```

安装jdk后，classpath执行正确

# ruby - 从续集 gem 中检索行

> ID：14609711
> 
> 赞同：0
> 
> 时间：2013-01-30T17:09:52.267
> 
> 标签：ruby, postgresql, rake, sequel

我正在尝试从我的模型类所在的数据集中检索一行

需要 'sequel' 类 Item < Sequel::Model end

我的一个 hello.rb 文件是

```
require "rubygems"
require './post'
require "sequel"
require './item'
# connect to an in-memory database
#DB = Sequel.connect('postgres://ritesh:newpassword@localhost')

puts Item.filter(:id =>'1').first 
```

它给了我输出

```
#<Item:0xb693996c> 
```

我想获取 id 字段为 1 的行的所有列 查询应该是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:15:33.363

尝试

```
puts Item.filter(:id =>'1').first.inspect 
```

或者

```
puts Item.filter(:id =>'1').first.to_yaml 
```

`yaml`（如果您的代码中有这样的要求，则可以更好地格式化`require 'yaml'`）

# plone - 签入文件夹工作副本会破坏子工作副本

> ID：14609714
> 
> 赞同：1
> 
> 时间：2013-01-30T17:10:01.023
> 
> 标签：plone

克隆 4.1.5
克隆应用程序迭代 2.1.5

要查看行为：

1.  创建一个文件夹（'foo'）
2.  在文件夹'foo'中创建一个页面（'bar'）
3.  签出页面'bar'的工作副本（'copy_of_bar'）
4.  签出文件夹 'foo' 的工作副本 ('copy_of_foo')
5.  签入'copy_of_foo'

现在，“栏”仍然被锁定，但不再显示链接到工作副本的信息视图。'copy_of_bar' 似乎已成为正常（非 wc）页面。有趣的是，如果您在签出文件夹后签出页面（即在“copy_of_foo”中签出“bar”），则不会发生此中断。

看起来它在文件夹结帐时中断了。如果您查看“copy_of_foo”中的页面，“copy_of_bar”已经表现得像一个非 wc 页面。

# python - NumPy 数组中的第一个和最后一个元素

> ID：14609720
> 
> 赞同：48
> 
> 时间：2013-01-30T17:10:18.183
> 
> 标签：python, arrays, numpy

我正在尝试从数组中动态获取第一个和最后一个元素。

所以，让我们假设数组有 6 个元素。

```
test = [1,23,4,6,7,8] 
```

如果我想获得`first and last = 1,8`,`23,7`和`4,6`. 有没有办法按这个顺序获取元素？我看了几个问题[Link](https://stackoverflow.com/questions/12218796/python-slice-first-and-last-element-in-list) [Link2](https://stackoverflow.com/questions/930397/how-to-get-the-last-element-of-a-list)。我在这些链接的帮助下想出了这个原型..

```
#!/usr/bin/env python

import numpy

test = [1,23,4,6,7,8]
test1 = numpy.array([1,23,4,6,7,8])
len_test = len(test)
first_list = [0,1,2]
len_first = len(first_list)
second_list = [-1,-2,-3]
len_second = len(second_list)

for a in range(len_first):
        print numpy.array(test)[[first_list[a] , second_list[a]]]
        print test1[[first_list[a], second_list[a]]] 
```

但是，如果您有超过 6 个元素，则此原型将无法扩展。所以，我想知道是否有办法动态获取这对元素。

谢谢！

* * *

## 回答 #1

> 赞同：158
> 
> 时间：2014-01-16T17:46:15.907

我到此结束，因为我搜索了“python 数组的第一个和最后一个元素”，并找到了除此之外的所有其他内容。所以这里是标题问题的答案：

```
a = [1,2,3]
a[0] # first element (returns 1)
a[-1] # last element (returns 3) 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-01-30T17:14:07.020

怎么样：

```
In [10]: arr = numpy.array([1,23,4,6,7,8])

In [11]: [(arr[i], arr[-i-1]) for i in range(len(arr) // 2)]
Out[11]: [(1, 8), (23, 7), (4, 6)] 
```

根据 的大小`arr`，在 NumPy 中编写整个内容可能会更高效：

```
In [41]: arr = numpy.array([1,23,4,6,7,8]*100)

In [42]: %timeit [(arr[i], arr[-i-1]) for i in range(len(arr) // 2)]
10000 loops, best of 3: 167 us per loop

In [43]: %timeit numpy.vstack((arr, arr[::-1]))[:,:len(arr)//2]
100000 loops, best of 3: 16.4 us per loop 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-30T17:22:55.067

使用 Numpy 的精美索引：

```
>>> test
array([ 1, 23,  4,  6,  7,  8])

>>> test[::-1]  # test, reversed
array([ 8,  7,  6,  4, 23,  1])

>>> numpy.vstack([test, test[::-1]])  # stack test and its reverse
array([[ 1, 23,  4,  6,  7,  8],
       [ 8,  7,  6,  4, 23,  1]])

>>> # transpose, then take the first half;
>>> # +1 to cater to odd-length arrays
>>> numpy.vstack([test, test[::-1]]).T[:(len(test) + 1) // 2]
array([[ 1,  8],
       [23,  7],
       [ 4,  6]]) 
```

`vstack`复制数组，但所有其他操作都是常量时间指针技巧（包括反转），因此非常快。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2020-03-07T08:27:01.220

```
arr = np.array([1,2,3,4])
arr[-1] # last element 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-30T17:13:55.160

```
>>> test = [1,23,4,6,7,8]
>>> from itertools import izip_longest
>>> for e in izip_longest(test, reversed(test)):
    print e

(1, 8)
(23, 7)
(4, 6)
(6, 4)
(7, 23)
(8, 1) 
```

另外一个选项

```
>>> test = [1,23,4,6,7,8]
>>> start, end = iter(test), reversed(test)
>>> try:
    while True:
        print map(next, [start, end])
except StopIteration:
    pass

[1, 8]
[23, 7]
[4, 6]
[6, 4]
[7, 23]
[8, 1] 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-30T17:14:36.490

这个怎么样？

```
>>> import numpy
>>> test1 = numpy.array([1,23,4,6,7,8])
>>> forward = iter(test1)
>>> backward = reversed(test1)
>>> for a in range((len(test1)+1)//2):
...     print forward.next(), backward.next()
... 
1 8
23 7
4 6 
```

`(len(test1)+1)//2`确保奇数长度数组的中间元素也被返回：

```
>>> test1 = numpy.array([1,23,4,9,6,7,8]) # additional element '9' in the middle
>>> forward = iter(test1)                                                      
>>> backward = reversed(test1)
>>> for a in range((len(test1)+1)//2):
...     print forward.next(), backward.next()
1 8
23 7
4 6
9 9 
```

使用 just`len(test1)//2`会删除奇数长度数组的中间元素。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-30T17:20:08.470

这样做。请注意，对于奇数个元素，中间的元素将不包括在内。

```
test = [1, 23, 4, 6, 7, 8, 5]    
for i in range(len(test)/2):
    print (test[i], test[-1-i]) 
```

输出：

```
(1, 5)
(23, 8)
(4, 7) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-10-08T13:43:19.777

您可以简单地使用`take`元素的方法和索引（最后一个索引可以是**-1**）。

```
arr = np.array([1,2,3])

last = arr.take(-1)
# 3 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2013-01-30T17:16:04.723

假设列表有偶数个元素，你可以这样做：

```
test = [1,23,4,6,7,8]
test_rest = reversed(test[:len(test)/2])

for n in len(test_rest):
    print [test[n], test_test[n]] 
```

# eclipse - eclipse juno 中无法解析导入 org.apache.commons

> ID：14609722
> 
> 赞同：32
> 
> 时间：2013-01-30T17:10:23.983
> 
> 标签：eclipse, servlets, apache-commons-fileupload

在 Eclipse 中编译我的项目时遇到问题。它显示错误**The import org.apache.commons cannot be resolved**。

![在此处输入图像描述](../Images/9583fd8c81f2862df25212d567161d9f.png)

请告诉我这个错误是什么意思以及如何解决它。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-30T17:15:20.173

编译时类路径中不存在提到的包/类。基本上，当你说要导入这个和那个时，Java 不知道你在说什么。它在类路径中找不到它们。

它是[Apache Commons FileUpload](http://commons.apache.org/fileupload)的一部分。只需下载 JAR 并将其放入`/WEB-INF/lib`webapp 项目的文件夹中，此错误就会消失。不要忘记对[Apache Commons IO](http://commons.apache.org/io)做同样的事情，这是 FileUpload 依赖的地方，否则在运行时你会遇到同样的问题。

* * *

**与具体问题无关**，我看到您使用的是 Tomcat 7，它是与 Servlet 3.0 兼容的容器。你知道你可以使用新的[`request.getPart()`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getPart%28java.lang.String%29)方法来获取上传的文件，而不需要整个 Commons FileUpload 的东西吗？只需将`@MultipartConfig`注释添加到 servlet 类，以便您可以使用它。另请参阅[如何使用 JSP/Servlet 将文件上传到服务器？](https://stackoverflow.com/questions/2422468/how-to-upload-files-to-server-using-jsp-servlet/2424824#2424824)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-11-26T11:54:13.170

如果你有一个[Apache Maven](http://maven.apache.org/ref/3.1.0/)项目，很容易在你的项目中使用这个包。只需在您的`pom.xml`:

```
<project>
...

    <properties>
        <version.commons-io>2.4</version.commons-io>
    </properties>

    <dependencies>
        <dependency>
            <groupId>commons-io</groupId>
            <artifactId>commons-io</artifactId>
            <version>${version.commons-io}</version>
        </dependency>
    </dependencies>

...
</project> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-02-22T12:10:35.077

展开“Java 资源”，然后展开“库”（在 Eclipse 项目中）。确保“Apache Tomcat”存在。

如果不跟随-右键单击项目->“构建路径”->“Java构建路径”->“添加库”->选择“服务器运行时”->下一步->选择“Apache Tomcat”->单击完成

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-11-11T02:25:25.393

您可以将一个所需的外部 jar 文件添加到项目中。转到您的项目--> java 构建路径--> 库，添加外部 JARS。然后添加从正式网站下载的文件。我的默认名称是 commons-codec-1.10.jar

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-29T05:13:55.763

**寻找“poi-3.17.jar”！！！**

1.  从“ [https://poi.apache.org/download.html](https://poi.apache.org/download.html) ”下载。
2.  点击一个 Binary Distribution -> poi-bin-3.17-20170915.tar.gz
3.  解压缩文件下载并查找此“poi-3.17.jar”。

问题解决了，错误消失了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-08T09:52:53.777

您还可以将外部 jar 文件添加到项目中。转到您的项目--> 属性--> java 构建路径--> 库，添加外部 JARS。然后添加你下载的jar文件。

# android - 在 SurfaceView 中显示对话框

> ID：14609723
> 
> 赞同：0
> 
> 时间：2013-01-30T17:10:25.480
> 
> 标签：android, dialog, surfaceview

我的游戏被绘制到`SurfaceView`. 我正在使用对话框作为关卡完成屏幕，但无法显示 ( `Dialog.show()`)。

我不断收到以下错误：

```
01-30 16:45:34.425: E/AndroidRuntime(3415): java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare() 
```

我有一个 Game 类，它扩展了 Activity 并持有`SurfaceView`. 我认为`runOnUiThread()`可能是解决方案，但经过不知疲倦的搜索后，不知道如何在我的`SurfaceView`.

任何帮助表示赞赏，如果需要，我会发布我的代码（只是不确定目前哪些位实际上是相关的）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T19:19:01.357

您正在尝试从会给出这些错误的工作线程修改 UI 线程。为了防止这种情况，请尝试调用该`runOnUiThread()`方法...

```
Game.this.runOnUiThread(new Runnable() {
    public void run() {
        customDialogObject.show();
    }
}); 
```

# java - 您如何使用 PowerMock/Mockito 和 TestNG 为最终类的（公共）方法编写_spy_？

> ID：14609726
> 
> 赞同：2
> 
> 时间：2013-01-30T17:10:32.250
> 
> 标签：java, testng, mockito, powermock

（是的，我知道，有些人考虑不得不诉诸 PowerMock 承认失败）

你好，

版本：TestNG 6.8、Mockito 1.9.5 和 PowerMock 1.5。

尽管谷歌搜索了很长一段时间，但我找不到这样的例子。

有问题的类`SyntaxProcessor`有一个`process()`进行初步检查的方法，如果该检查通过，它会调用`validate()`。

在这里，我故意使初步检查失败。我想检查一下`validate()`确实从未调用过。

在@user1951544 的帮助下，我想出了：

```
@PrepareForTest(SyntaxProcessor.class)
public final class SyntaxProcessorTest
{
    // ....

    @ObjectFactory
    public IObjectFactory getObjectFactory()
    {
        return new PowerMockObjectFactory();
    }

    // ....

    @DataProvider
    public Iterator<Object[]> notSchemas()
    {
        return SampleNodeProvider.getSamplesExcept(NodeType.OBJECT);
    }

    @Test(dataProvider = "notSchemas")
    public void syntaxProcessorYellsOnNonSchemas(final JsonNode node)
        throws ProcessingException
    {
        final ArgumentCaptor<ProcessingMessage> captor
            = ArgumentCaptor.forClass(ProcessingMessage.class);

        final ProcessingReport report = PowerMockito.mock(ProcessingReport.class);
        final JsonSchemaTree tree = new CanonicalSchemaTree(node);
        final ValidationData data = new ValidationData(tree);

        final Map<String, SyntaxChecker> map = Maps.newHashMap();
        final SyntaxProcessor processor = PowerMockito.spy(new SyntaxProcessor(map));

        processor.process(report, data);

        // No PowerMockito.verify()??
        // "any()" is from org.mockito.Matchers
        Mockito.verify(processor, never())
            .validate(any(SyntaxReport.class), any(JsonSchemaTree.class));

        final JsonNode msgNode = captor.getValue().asJson();
        assertEquals(msgNode.get("message").textValue(),
            "document is not a JSON Schema: not an object");
    }
} 
```

不幸的是，这个测试失败了，有一个巨大的堆栈跟踪：

```
java.lang.RuntimeException: java.lang.ExceptionInInitializerError
    at org.testng.internal.MethodInvocationHelper.invokeDataProvider(MethodInvocationHelper.java:143)
    at org.testng.internal.Parameters.handleParameters(Parameters.java:426)
    at org.testng.internal.Invoker.handleParameters(Invoker.java:1383)
    at org.testng.internal.Invoker.createParameters(Invoker.java:1075)
    at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1180)
    at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:127)
    at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:111)
    at org.testng.TestRunner.privateRun(TestRunner.java:767)
    at org.testng.TestRunner.run(TestRunner.java:617)
    at org.testng.SuiteRunner.runTest(SuiteRunner.java:334)
    at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:329)
    at org.testng.SuiteRunner.privateRun(SuiteRunner.java:291)
    at org.testng.SuiteRunner.run(SuiteRunner.java:240)
    at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:52)
    at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:86)
    at org.testng.TestNG.runSuitesSequentially(TestNG.java:1198)
    at org.testng.TestNG.runSuitesLocally(TestNG.java:1123)
    at org.testng.TestNG.run(TestNG.java:1031)
    at org.testng.remote.RemoteTestNG.run(RemoteTestNG.java:111)
    at org.testng.remote.RemoteTestNG.initAndRun(RemoteTestNG.java:204)
    at org.testng.remote.RemoteTestNG.main(RemoteTestNG.java:175)
    at org.testng.RemoteTestNGStarter.main(RemoteTestNGStarter.java:111)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)
Caused by: java.lang.ExceptionInInitializerError
    at org.mockito.internal.exceptions.stacktrace.ConditionalStackTraceFilter.<init>(ConditionalStackTraceFilter.java:17)
    at org.mockito.exceptions.base.MockitoException.filterStackTrace(MockitoException.java:30)
    at org.mockito.exceptions.base.MockitoException.<init>(MockitoException.java:19)
    at org.mockito.exceptions.misusing.MockitoConfigurationException.<init>(MockitoConfigurationException.java:18)
    at org.mockito.internal.configuration.ClassPathLoader.loadImplementations(ClassPathLoader.java:145)
    at org.mockito.internal.configuration.ClassPathLoader.findPluginImplementation(ClassPathLoader.java:110)
    at org.mockito.internal.configuration.ClassPathLoader.findPlatformMockMaker(ClassPathLoader.java:106)
    at org.mockito.internal.configuration.ClassPathLoader.<clinit>(ClassPathLoader.java:59)
    at org.mockito.internal.util.MockUtil.<clinit>(MockUtil.java:21)
    at org.mockito.internal.configuration.injection.scanner.MockScanner.<init>(MockScanner.java:22)
    at org.mockito.internal.configuration.InjectingAnnotationEngine.injectMocks(InjectingAnnotationEngine.java:96)
    at org.powermock.api.mockito.internal.configuration.PowerMockitoInjectingAnnotationEngine.process(PowerMockitoInjectingAnnotationEngine.java:38)
    at org.powermock.api.extension.listener.AnnotationEnabler.injectSpiesAndInjectToSetters(AnnotationEnabler.java:58)
    at org.powermock.api.extension.listener.AnnotationEnabler.beforeTestMethod(AnnotationEnabler.java:53)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.powermock.reflect.internal.WhiteboxImpl.performMethodInvocation(WhiteboxImpl.java:2014)
    at org.powermock.reflect.internal.WhiteboxImpl.invokeMethod(WhiteboxImpl.java:744)
    at org.powermock.reflect.Whitebox.invokeMethod(Whitebox.java:415)
    at org.powermock.modules.testng.internal.PowerMockTestNGMethodHandler.injectMocksUsingAnnotationEnabler(PowerMockTestNGMethodHandler.java:72)
    at org.powermock.modules.testng.internal.PowerMockTestNGMethodHandler.invoke(PowerMockTestNGMethodHandler.java:47)
    at com.github.fge.jsonschema.processing.syntax.SyntaxProcessorTest_$$_javassist_0.notSchemas(SyntaxProcessorTest_$$_javassist_0.java)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:80)
    at org.testng.internal.MethodInvocationHelper.invokeDataProvider(MethodInvocationHelper.java:135)
    ... 26 more
Caused by: java.lang.NullPointerException
    at org.mockito.internal.exceptions.stacktrace.StackTraceFilter.<clinit>(StackTraceFilter.java:21)
    ... 56 more 
```

我还尝试阅读[此页面](http://code.google.com/p/powermock/wiki/TestNG_usage)以使测试扩展`PowerMockTestCase`，但随后失败并出现另一个错误：

```
java.lang.RuntimeException: Can't invoke method public void com.github.fge.jsonschema.processing.syntax.SyntaxProcessorTest.syntaxProcessorYellsOnNonSchemas(com.fasterxml.jackson.databind.JsonNode) throws com.github.fge.jsonschema.processing.ProcessingException, probably due to classloader mismatch 
```

那么，如何编写这样的测试呢？

（编辑：还尝试将 TestNG、mockito 和 powermock 的版本降级为 @user1951544 建议的版本。它适用于他，而不是我......但这次我在两种情况下都得到了第二个更短的例外）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T17:21:47.830

这可以通过 PowerMock 完成，您必须为单元测试添加 2 个注释：@RunWith @PrepareForTest，然后用 PowerMockito 替换 Mockito 的 spy/mock 方法。

你可以在这里找到一些常用的例子： [http ://www.smartics.de/archives/1233](http://www.smartics.de/archives/1233)

最简单的测试可能如下所示：

```
@RunWith(PowerMockRunner.class)
@PrepareForTest(MyClass.class)
public class MyClassTest {
    @Test
    public void test(){
        MyClass myClass = PowerMockito.spy(new MyClass());

        myClass.interfaceMethod(some arguments);
        Mockito.verify(myClass,Mockito.never()).otherMethod();              
    }

} 
```

在 TestNG 的情况下，必须设置适当的 ObjectFactory（而不是 @RunWith），例如[http://almirsadikovic.blogspot.fr/2011/07/testng-and-powermockito-powermock.html](http://almirsadikovic.blogspot.fr/2011/07/testng-and-powermockito-powermock.html)或[Cant mock 静态函数使用 powermock-easymock-testng（非 Maven 项目）](https://stackoverflow.com/questions/4633885/cant-mock-static-functions-with-powermock-easymock-testng-non-maven-project)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T19:15:12.567

我能够找到第二个问题的解决方法。

如此处所述，testng/powermock 版本似乎存在某种问题： [http ://code.google.com/p/powermock/issues/detail?id=414](http://code.google.com/p/powermock/issues/detail?id=414)

在我的测试用例中，我将 powermock 版本更改为 1.4.11，将 testng 更改为 6.4，一切正常：）

棘手的东西...

# google-app-engine - NDB 并行小任务

> ID：14609730
> 
> 赞同：0
> 
> 时间：2013-01-30T17:10:46.443
> 
> 标签：google-app-engine, app-engine-ndb

请查看此并行 tasklet 代码片段 #1。

```
@ndb.tasklet
def get_data_parallel(e):  
  usr, det = yield (e.user.get_async(),                          
                    MyKind.query(ancestor = e.key).fetch_async())  
  raise ndb.Return((e, usr, det)) 
```

如果 e.user 是 None 这会引发异常。

我正在尝试这个片段#2。但是我仍然得到异常：“TypeError：预期的未来，收到：无”

```
@ndb.tasklet
def get_data_parallel(e):
  usr, det = yield (e.user.get_async() if e.user else None, 
                    MyKind.query(ancestor = e.key).fetch_async())
  raise ndb.Return((e, usr, det)) 
```

我怎样才能做类似片段＃2的事情？有可能返回 future(None) 或 future('') 或类似的东西？？

谢谢并恭祝安康。

莫伊塞斯·贝尔钦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:40:47.160

对于那些对此感兴趣的人，Google AppEngine Group 已经回答了这个问题：

[Google App Engine 小组讨论](https://groups.google.com/d/msg/google-appengine/fy8aSqiLs0s/VUj_-zZR4tUJ)

谢谢大家。

# php - PHP MySQLi错误处理1062重复键条目

> ID：14609734
> 
> 赞同：5
> 
> 时间：2013-01-30T17:10:55.340
> 
> 标签：php, error-handling, mysqli

如何优雅地捕获发生 1062 错误代码（重复键输入）的列名？

当我做：

```
$db = @new mysqli('localhost', 'root', '******', 'database');

$pstmt = $db->prepare("INSERT INTO users (person_id, user_name, password, e_mail) VALUES (LAST_INSERT_ID(), ?, ?, ?)");
$pstmt->bind_param("sss", $_POST["register_user_name"], md5($_POST["register_password"]), $_POST["register_e_mail"]);
// error occurred
if (!$pstmt->execute()) {
    if ($db->errno == 1062) {
      $column_duplicate_key_entry = /*how to obtain the column name(s)?*/;
    }
} 
```

唯一列是`user_name`和`e_mail`

我知道我可以`$db->error`通过自己调用和解析字段来获取错误字符串。但这在我看来并不优雅。还有其他更好的解决方案吗？

我想要做的是尝试插入一个新用户。如果插入的用户名已经存在，则会抛出 1062 错误，即当电子邮件地址已经存在时。我想检查是否只使用了用户名，或者只使用了电子邮件地址，或者两者兼而有之。再说一遍，我想以一种优雅的方式来做，而不是先选择电子邮件和用户名，然后检查它们是否已经存在。如果可能的话，我想做一个插入查询并从中获取所有信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T19:27:27.323

MySQL 以数字、状态和消息的形式返回错误。如果不解析消息，您将无法确定重复的列。

此外，MySQL 将在第一次失败时进行轰炸。因此，如果您有`user_name`和`e_mail`作为重复项，则只会在消息中返回遇到的第一个重复项。

# java - JAXB MOXy 2.4.1 属性重载不起作用

> ID：14609737
> 
> 赞同：1
> 
> 时间：2013-01-30T17:11:01.990
> 
> 标签：java, jaxb, eclipselink, moxy

我有两个继承的类（`ClassTop`--> `ClassChild`），每个类都具有继承的属性（`ClassTopData`--> `ClassChildData`）：

**类顶：**

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlRootElement(name="root")
public class ClassTop {

    @XmlElement(name="title")
    private String title = null;

    @XmlElement(name="meta")
    private ClassTopData meta = new ClassTopData();

    public String getTitle() {return title;}
    public void setTitle(String title) {this.title = title;}

    public ClassTopData getMeta() {return meta;}
    public void setMeta(ClassTopData meta) {this.meta = meta;}

} 
```

**ClassChild 扩展 ClassTop:** 重要:`ClassChild`也有**`property meta`**, 但继承了`ClassTopData`:

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlRootElement(name="news")
public class ClassChild extends ClassTop {

    @XmlElement(name="childName")
    private String childName = null;

    @XmlElement(name="meta") // same property name...
    private ClassChildData meta = new ClassChildData(); //... but subclassed data 

    public String getChildName() {return childName;}
    public void setChildName(String childName) {this.childName = childName;}

    public ClassChildData getMeta() {return meta;}
    public void setMeta(ClassChildData meta) {this.meta = meta;}
} 
```

还有两个数据类：

**类TopData**：

```
@XmlAccessorType(XmlAccessType.FIELD)
public class ClassTopData {

    private String data1 = null;
    private String data2 = null;

    public String getData1() {return data1;}
    public void setData1(String data1) {this.data1 = data1;}

    public String getData2() {return data2;}
    public void setData2(String data2) {this.data2 = data2;}

} 
```

**类儿童数据**：

```
@XmlAccessorType(XmlAccessType.FIELD)
public class ClassChildData extends ClassTopData {

    private String data3 = null;

    public String getData3() {return data3;}
    public void setData3(String data3) {this.data3 = data3;}

} 
```

当我编组 ClassChild 并将其读回时，data3 为空：

```
 ClassChild a = new ClassChild();
    a.setTitle("title");
    a.getMeta().setData1("1");
    a.getMeta().setData2("2");
    a.getMeta().setData3("3");

    // Write:
    JAXBContext context = JAXBContext.newInstance(ClassChild.class);
    Marshaller m = context.createMarshaller();
    m.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, Boolean.TRUE);
    m.setProperty(Marshaller.JAXB_ENCODING, "UTF-8");
    ... get some OutputStream os ...
    m.marshal(a, os);

    // Read back:
    JAXBContext jc = JAXBContext.newInstance(ClassChild.class);
    Unmarshaller u = jc.createUnmarshaller();
    ... get the InputStream is ...
    ClassChild r = (ClassChild)(u.unmarshal(is));
    System.out.println("data3: "+r.getMeta().getData3()); 
```

输出是

```
data3: null 
```

XML 如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<news>
   <title>title</z:title>
   <meta>
      <data1>1</data1>
      <data2>2</data2>
      <data3>3</data3>
   </meta>
</news> 
```

# xcode - xcode-select 在哪里存储信息

> ID：14609738
> 
> 赞同：1
> 
> 时间：2013-01-30T17:11:05.937
> 
> 标签：xcode

我正在编写一个从 Xcode 路径运行的工具。该工具通过运行 /usr/bin/xcode-select 获取 Xcode 的位置，但我想重新制作它，以便它直接从磁盘读取 Xcode 位置，而不是运行 xcode-select。我尝试调试 xcode-select （这是 xcrun 的符号链接），但没有设法找到它如何存储/读取 Xcode 的位置（它是存储在环境还是文件中？）。如果您知道如何在不运行 xcode-select（和 xcrun）的情况下获取 Xcode 的位置，请帮忙！提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T22:29:52.487

使用 NSWorkspace，您可以执行以下操作：

```
[NSWorkspace sharedWorkspace]fullPathForApplication:@"Xcode"]; 
```

`/Applications/Xcode.app`当它安装在默认位置时返回。

```
// …or, as I have seen in the documentation, there's also
- (NSURL *)URLForApplicationWithBundleIdentifier:(NSString *)bundleIdentifier
// which returns the URL for the application with the specified identifier. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T11:39:43.623

使用[dtruss](https://developer.apple.com/library/mac/#DOCUMENTATION/Darwin/Reference/ManPages/man1/dtruss.1m.html)命令打印 xcode-select 的所有打开的系统调用。

```
dtruss -f -t open xcode-select -print-path 
```

发现它试图读取 /usr/share/xcode-select/xcode_dir_path 并从那里获取 Xcode 位置。如果不存在，则采用默认的 Xcode 位置，即 /Applications/Xcode.app/。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-16T01:00:07.013

从 Xcode 6 开始，该位置是一个符号链接，位于`/var/db/xcode_select_link`. 您可以使用命令将链接的目标输出到终端`readlink /var/db/xcode_select_link`。如果没有链接（例如，您运行`xcode-select --reset`），则使用默认的 xcode 安装。

# ios - 在 UIViewController 中嵌入 UIContainerView 作为屏幕的一部分

> ID：14609740
> 
> 赞同：1
> 
> 时间：2013-01-30T17:11:07.243
> 
> 标签：ios, uiview, uicollectionview, embedding, collectionview

我的故事板中有一个屏幕，我想将容器视图嵌入到屏幕的一部分中。我不知道是否应该从对象库中添加新的容器视图或视图，然后拖入集合视图控制器或集合视图（或以不同的方式处理它？）。我已经尝试了所有组合，但最终嵌入视图显示为黑色，即使我拖动集合视图单元格并设置背景颜色来测试它。一旦我可以完成这项工作，我计划从外部数据库填充单元格。

请问有什么建议吗？我正在尽可能使用情节提要。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T18:03:57.700

将容器视图拖入视图后，您会自动获得一个嵌入式视图控制器，其大小与容器视图的大小相匹配。您应该删除该控制器，然后拖入 UICollectionViewController。控制从容器视图拖动到此控制器并在松开时选择嵌入——这将调整集合视图控制器的大小。你可以给集合视图一个背景颜色，这样你就会看到它在哪里，但是给单元格一个背景颜色不会显示，直到你在控制器中实现方法来填充这些单元格。

# javascript - 试图提交“按钮复选框”的集合

> ID：14609741
> 
> 赞同：0
> 
> 时间：2013-01-30T17:11:15.777
> 
> 标签：javascript, twitter-bootstrap

我爱上了 twitter-bootstrap，我喜欢可以用于我的应用程序的简单风格。

我想使用元素**按钮复选框**而不是常规**复选框**。

```
<div class="control-group">
    <div class="controls">
        <div class="btn-group btn-group-vertical" data-toggle="buttons-checkbox">
            <button type="button" class="btn btn-info btn-small" value="1" id="LanguagesAvailable_0__Code" name="LanguagesAvailable[0].Code">
                Value 1
            </button>
            <button type="button" class="btn btn-info btn-small" value="2" id="LanguagesAvailable_1__Code" name="LanguagesAvailable[1].Code">
                Value 2
            </button>
            <button type="button" class="btn btn-info btn-small" value="3" id="LanguagesAvailable_2__Code" name="LanguagesAvailable[2].Code">
                Value 3
            </button>
            <button type="button" class="btn btn-info btn-small" value="4" id="LanguagesAvailable_3__Code" name="LanguagesAvailable[3].Code">
                Value 4
            </button>
        </div>
    </div>
</div> 
```

可悲的是，我可以发布这些类型的元素。

是否有任何解决方法可以使用 twitter-bootstrap 设置我的复选框并将这些元素发布到 FORM 中？

我在[这里](http://jsfiddle.net/vandalo/6n2HE/1/)准备了一把小提琴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T09:59:03.100

您可以使用此解决方案：

[http://jsfiddle.net/charettes/SauLj/](http://jsfiddle.net/charettes/SauLj/)

jQuery：

```
jQuery(document).ready(function($){
    $('#radio_3').prop('disabled', true);
    $('#radio_2').prop('checked', true);
}); 
```

CSS：

```
.btn-group > input {
    display: none;
}

.btn-group input:first-child + .btn {
     /* This is an actual copy/paste of the .btn-group .btn:first-child style */
    border-bottom-left-radius: 4px;
    border-top-left-radius: 4px;
    margin-left: 0;
}

input:checked + label.btn {
    /* This is an actual copy/paste of the .btn:active style */
    background-color: #E6E6E6;
    background-image: none;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15) inset, 0 1px 2px rgba(0, 0, 0, 0.05);
    color: rgba(0, 0, 0, 0.5);
    outline: 0 none;
}

input[disabled] + label.btn {
    /* This is an actual copy/paste of the .btn:disabled style */
    background-color: #E6E6E6;
    background-image: none;
    box-shadow: none;
    cursor: default;
    opacity: 0.65;
} 
```

HTML：

```
<input type="checkbox" class="hidden" id="single_checkbox" />
<label class="btn" for="single_checkbox">Single</label>
<br/><br/>
<div class="btn-group">
    <input type="checkbox" id="checkbox_1" />
    <label class="btn" for="checkbox_1">Checkbox one</label>
    <input type="checkbox" id="checkbox_2" />
    <label class="btn" for="checkbox_2">Checkbox two</label>
    <input type="checkbox" disabled id="checkbox_3" />
    <label class="btn" for="checkbox_3">Disabled checkbox three</label>
</div>
<br/>
<div class="btn-group">
    <input type="radio" name="radios" id="radio_1" />
    <label class="btn" for="radio_1">Radio one</label>
    <input type="radio" name="radios" id="radio_2" />
    <label class="btn" for="radio_2">Radio two</label>
    <input type="radio" name="radios" id="radio_3" />
    <label class="btn" for="radio_3">Disabled radio three</label>
</div> 
```

# node.js - 如何使用 Node.js 访问 OpenSSL？

> ID：14609745
> 
> 赞同：0
> 
> 时间：2013-01-30T17:11:37.557
> 
> 标签：node.js, openssl

我想使用 Node.js 中的一些 OpenSSL 功能，这些功能没有使用 Node 的`crypto`模块提供，例如创建一个 CSR。

我目前唯一的解决方案是使用子进程来运行`openssl`命令行实用程序，但这不是理想的解决方案，因为您依赖于某些路径，...

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T18:37:00.033

如果你想在 linux 或 mac 上生成它，你可以使用 [https://github.com/andris9/pem](https://github.com/andris9/pem)

如果你想做自己的窗口，你可以使用 openssl 二进制文件。

当然，在这两种情况下都使用了子进程。我认为这是您获得它的唯一方法

# maven - 具有 OSGI 依赖项的 Maven

> ID：14609746
> 
> 赞同：0
> 
> 时间：2013-01-30T17:11:38.957
> 
> 标签：maven, osgi

我正在使用 maven 复制依赖项将我的 OSGI 捆绑包依赖项复制到某个位置。在我的依赖图中的某个地方，我有两个版本的相同工件，而 maven 的分辨率忽略了一个。无论如何，我可以避免这种情况并强制 maven 解决同一工件的多个版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-20T18:41:45.193

您可以在 maven-bundle-plugin 中使用 Embed-Dependency 标签，但这可能不是最好的方法。

> 我创建了这个博客，它详细解释了如何以多种方式处理这个 OSGi 问题，您可能想要选择最适合您的一个：[http ://www.citizenrandom.com/?cat=2](http://www.citizenrandom.com/?cat=2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T20:26:27.907

maven 的核心功能之一是[依赖中介](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Transitive_Dependencies)。如果您有相同工件的两个版本，则图形 maven 将尝试找到最接近的版本（它不会“忽略一个”，而是决定使用另一个）：

引用：

> “依赖中介——这决定了当遇到一个工件的多个版本时将使用哪个版本的依赖。目前，Maven 2.0 仅支持使用“最近定义”，这意味着它将使用与您的项目最接近的依赖版本在依赖树中。”

与 OSGi 相反，您可以在不同版本中拥有相同的包，maven 将始终以工件仅存在于一个（最近的）版本中的方式解决依赖关系。如果这是不可能的（例如因为强制使用不同的版本），您将遇到冲突并且构建将失败。

# git - 如何将完整的项目上传到 Git 存储库？

> ID：14609747
> 
> 赞同：-2
> 
> 时间：2013-01-30T17:11:41.687
> 
> 标签：git

存在以下问题：我是Git新手，我只做了一个项目。我使用以下方式在 Git 中启动一个新项目：1）创建一个新文件夹 2）在这个文件夹中初始化一个 git 3）使用 Eclipse 创建一个新项目 4）使用这个项目

但是知道我有一个大项目（不是新项目），我想将它上传到 Git 存储库中。请告诉我，我该怎么做？如果我只是用我的项目初​​始化文件夹中的 git，我没有新文件，对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T17:27:02.597

你应该四处寻找一些 Git 教程（我已经写了一篇你可以在[这里](https://gist.github.com/3998315)找到的，而且我相信 Bitbucket 甚至有一些不错的教程），但你要做的基本知识是：

*   克隆存储库，这将创建您的目录并初始化 Git 以指向远程存储库，例如`git clone <Bitbucket repository path> <directory name>`

*   [创建一个`.gitignore`忽略您不想](https://help.github.com/articles/ignoring-files)推送到存储库的文件（例如个人配置文件和构建代码时生成的文件，如目标文件和构建的可执行文件）。

*   [使用git add](http://git-scm.com/docs/git-add)添加其余文件。

*   [使用git commit](http://git-scm.com/docs/git-commit)提交这些文件

*   [使用git push](http://git-scm.com/docs/git-push)推送你的提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T17:18:02.327

您需要在此文件夹中正确初始化 git。但是您将获得新的文件夹和文件，例如 .git 或 .gitignore。如果您上传文件，文件将不会出现，一切看起来都一样！

初始化过程：

```
cd my_project
git init
git add *
git commit -m "My initial commit message"
git remote add origin git@example.com:my_project.git
git push -u origin master 
```

# php - 使用 ajax 在点击时将 id 名称传递给 php

> ID：14609748
> 
> 赞同：0
> 
> 时间：2013-01-30T17:11:41.913
> 
> 标签：php, javascript, jquery, mysql, ajax

我正在使用 Ajax 来制作过滤搜索系统。我有三个不同的选项卡，用户可以在其中按名称、类别和位置进行搜索。当用户在搜索框（tab-1）中输入名称时，我可以搜索。在第二个选项卡中，我如何使用相同的 Ajax，所以当用户单击一个链接时，id 在 ajax 脚本中传递给我的 php，并且该 id 在我的 mysql 查询中作为变量传递。

第一次使用 Ajax，任何帮助将不胜感激。

AJAX 脚本：

```
$(document).ready(function () {
    $("#search_results").slideUp();
    $("#button_find").click(function (event) {
        event.preventDefault();
        search_ajax_way();
    });
    $("#search_query").keyup(function (event) {
        event.preventDefault();
        search_ajax_way();
    });
});

function search_ajax_way() {
    $("#search_results").show();
    var search_this = $("#search_query").val();
    $.post("search.php", {
        searchit: search_this
    }, function (data) {
        $("#display_results").html(data);
    })
} 
```

html:

```
<form id="searchform" method="post">
    <input id="search_query" name="search_query" placeholder="What You Are Looking For?"   
        size="50" type="text" />
    <input id="button_find" value="Search" type="submit" />
</form>
<div id="display_results">
</div>

<div class="tab">
    <input id="tab-2" name="tab-group-1" type="radio" />
    <label for="tab-2">Search by Category</label>
    <div class="content">
        <div id="searchbycategory">
            <div id="nav_1_a">      
                <ul>
                    <li><a href="#">All Categories</a></li>
                    <li><a href="#" id="dummy">Category-1</a></li>
                    <li><a href="#">Category-2</a></li>
                    <li><a href="#">Category-3</a></li>
                </ul>
                <div id="display_results">
                </div>
            </div>
            <!-- END nav_1_a -->
        </div>
    </div>
</div>
<div class="tab">
    <input id="tab-3" name="tab-group-1" type="radio" />
    <label for="tab-3">Search by location</label>
    <div class="content">
        <div id="searchbylocation">
            <div id="nav_1_a">      
                <ul>
                    <li><a href="#">All</a></li>
                    <li><a href="#">Location-1</a></li>
                    <li><a href="#">Location-2</a></li>
                    <li><a href="#">Location-3</a></li>
                    <li><a href="#">Location-4</a></li>
                </ul>
            </div> 
```

搜索.php：

```
<?php
$connection = mysql_connect('localhost', 'user', 'pwd');
$db = mysql_select_db('db', $connection);
$term = strip_tags(substr($_POST['searchit'],0, 100));
$term = mysql_escape_string($term); 
echo "Enter name to search";
else{
$sql = mysql_query("select col1,col2 from tab2 where tab2.somecolm like 
  '{$term}%'", $connection);

 echo "<ul>";
if (mysql_num_rows($sql)){
while($info = mysql_fetch_array($sql, MYSQL_ASSOC ) ) {
echo "<li>";
    echo "<a href=\"http://" . $info['col1'] . ".html\">" . $info['col2'] . "</a>";
    echo "</li>";
}

}else{
echo "No matches found!";
}

echo "</ul>";
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T17:27:51.803

将块 id 传递给`search_ajax_way`函数：

```
$("#search_query").keyup(function(event){
    event.preventDefault();
    search_ajax_way(this.id);
}); 
```

然后在 ajax 请求的数据参数中传递块 ID：

```
function search_ajax_way(blockId){
   $("#search_results").show();
   var search_this=$("#search_query").val();
   $.post("search.php", {searchit : search_this, 'blockId': blockId}, function(data){
      $("#display_results").html(data);

   })
} 
```

现在 blockId 将在您的 php 脚本中作为`$_POST['blockId']`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T18:33:15.290

你说你想在点击链接时传递 id，但你没有任何处理链接点击的代码。为链接添加点击处理程序，并修改`search_ajax_way()`以接受点击链接时的可选 id：

```
$("a").click(function (event) {
    event.preventDefault();
    search_ajax_way(this.id);
});

function search_ajax_way(clickedId) {
    $("#search_results").show();
    var postData = { searchit: $("#search_query").val() };
    if (clickedId) {
        postData.clickedId = clickedId;
    }
    $.post("search.php", postData, function (data) {
        $("#display_results").html(data);
    })
} 
```

id 将在 PHP 中作为`$_POST['clickedId']`

**编辑：**实际上，我会重构以`search_ajax_way()`用作事件处理程序，而不是从匿名事件处理程序中调用它：

```
$("#button_find,a").click(search_ajax_way);
$("#search_query").keyup(search_ajax_way);

function search_ajax_way(event) {
    event.preventDefault();
    $("#search_results").show();
    var postData = {
        searchit: $("#search_query").val(),
        clickedId: this.id
    };
    $.post("search.php", postData, function (data) {
        $("#display_results").html(data);
    })
} 
```

# android - 如何设置部分背景颜色

> ID：14609753
> 
> 赞同：0
> 
> 时间：2013-01-30T17:11:46.680
> 
> 标签：android, view, draw, android-canvas, background-color

我有一个实现视图的类

```
**DrawView.class**
     public class DrawView extends View {
    Paint paint = new Paint();

 public DrawView(Context context, AttributeSet attrs){
    super(context, attrs);
 } 
```

和我的**file.xml**

```
 <com.example.sliding.DrawView 
        android:id="@+id/tv_listRow_item1"
    android:tag="tv_listRow_item1_1"
    android:layout_height="0dip"
    android:layout_width="fill_parent"
    android:layout_weight="1"
    android:gravity="center"
    android:width="100dip"
    android:height="30dip"
    android:background="@drawable/textview_listrow_border"/> 
```

这个视图有 30 个高度倾角。**我怎样才能只为这 30 次蘸酱中的 30% 着色？** 谁能给我一个例子？感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T17:45:21.700

一种方法是使用 LayerDrawable

但这仅在视图高度固定为 80dp 时才有效。

**在您的可绘制文件夹中创建一个 xml 文件。**

```
<?xml 版本="1.0" 编码="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <项目>
      <形状>
          <solid android:color="#FFFFFFFF" />
      </形状>
    </项目>
    <item android:top="10dp">
      <形状>
          <solid android:color="#FF000000"/>
      </形状>
    </项目>
    <item android:top="60dp">
      <形状>
          <solid android:color="#FFFFFFFF"/>
      </形状>
    </项目>
</layer-list>

```

**并将其设置为视图的背景。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T17:25:08.437

我不完全确定这会起作用，但您可以制作一个 9 色块，其中 30% 的颜色和 70% 的透明，然后以适当的百分比定义两个可拉伸区域（每个区域一个）。当拉伸 9 个补丁时，它们应该尊重多个拉伸区域的比例，所以我认为它会起作用。

[http://developer.android.com/guide/topics/graphics/2d-graphics.html#nine-patch](http://developer.android.com/guide/topics/graphics/2d-graphics.html#nine-patch)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T18:12:12.767

我需要一个有 2 个参数的函数。这首先表明颜色的开始。第二个表示结束。高度=80dp。示例的第一个参数是 20，例如，第二个参数是 30。此区间内的像素具有颜色......

![在此处输入图像描述](../Images/bfc157bd3751313d6b033c33b38eb935.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T18:32:22.430

我想最简单的方法是覆盖 onDraw(Canvas canvas) 函数并像这样绘制一个矩形。

```
 double mStart = -1;
    double mEnd = -1;

    public void addRectangle( double startInPercent, double endInPercent ) {
        if( startInPercent < 0 || endInPercent > 1 || endInPercent > startInPercent )
            return;

        mStart = startInPercent;
        mEnd = endInPercent;

        //this will make the view to refresh the UI
        invalidate();
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);

        if( mStart >= 0 && mEnd >= 0)
            canvas.drawRect(0, getHeight() * mStart, getWidth(), getHeight() * mEnd, mPaint);
    } 
```

*此代码将绘制一个在addRectangle()*方法中指定的矩形。在我的实现中，我打算将该函数的参数设置为视图高度的百分比。

这是该[drawRect( ... )](http://developer.android.com/reference/android/graphics/Canvas.html#drawRect%28float,%20float,%20float,%20float,%20android.graphics.Paint%29)调用的文档。更改您可以根据需要在顶部、左下角和右下角绘制的参数。

为了获得你想要的颜色，你必须像这样在视图构造函数中初始化 mPaint：

```
 Paint mPaint = new Paint();
    mPaint.setColor( Color.RED ); 
```

当然这是最愚蠢的代码，你可以围绕这 2 个概念来玩，基本上得到你想要的。

执行此操作的主要类（以及 Andorid UI 中的几乎所有内容）是：

*   [帆布](http://developer.android.com/reference/android/graphics/Canvas.html)
*   [看法](http://developer.android.com/reference/android/view/View.html)
*   [画](http://developer.android.com/reference/android/graphics/Paint.html)

# android - 接近传感器手势

> ID：14609755
> 
> 赞同：2
> 
> 时间：2013-01-30T17:11:51.283
> 
> 标签：android, gestures, proximity

我尝试在谷歌上搜索解决方案，但找不到。有大量的应用程序使用接近传感器（可能是环境光传感器）来检测手势。他们如何做到这一点？我目前能够从接近传感器获取传感器值，但我将如何创建检测人们在其设备上使用的实际挥手手势的逻辑？有人可以指出我正确的方向来让自己继续这样做吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T17:20:47.953

使用[SensorManager](https://developer.android.com/reference/android/hardware/SensorManager.html)类（链接中的代码示例）来侦听由接近传感器 ( ) 注册的更改`Sensor.TYPE_PROXIMITY`。但据我所知，它只识别“近”和“远”，它不是光传感器（`Sensor.TYPE_LIGHT`），它真的只有这两个非常基本的状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T19:40:02.177

由于接近传感器只能报告远/近状态，因此做出关于波的决定的唯一方法是计算远近状态之间的时间间隔。快波-短间隔，慢-长。

# ember.js - emberjs 1.0.0pre4 如何将上下文对象传递给资源“...索引”路由？

> ID：14609757
> 
> 赞同：3
> 
> 时间：2013-01-30T17:11:58.970
> 
> 标签：ember.js

在一个简单的 ember 应用程序中，我有一个带有索引模板的资源（“详细信息”）。在应用程序索引模板中，我有一个调用`transitionTo('detail',obj)`索引控制器的按钮，`obj`单击的内容项在哪里。这`obj`作为`model`参数传递给我的`DetailRouter.setupController`函数，但**不**传递给我的`DetailIndexRouter.setupController`函数。如何将我的上下文对象一直传递到“叶”路由？

[我在这里](https://stackoverflow.com/questions/12063066/transitiontoroute-context-passes-context-base-route-not-to-the-route-reque)看到了一个类似的问题，但我正在处理路线中的动态段。

这是一个[jsfiddle](http://jsfiddle.net/Qw8Q3/)。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T18:10:07.870

要为 设置模型`DetailIndexRouter`，请覆盖它的模型钩子，然后用于`modelFor('detail')`从父路由访问内容项。例如：

```
App.DetailIndexRoute = Ember.Route.extend({
  model: function(params) {
    return this.modelFor("detail");
  }
}); 
```

在这里更新小提琴：http: [//jsfiddle.net/Qw8Q3/2/](http://jsfiddle.net/Qw8Q3/2/)

# android - 在 Android 上使用 OpenSL ES 通过套接字通信流式传输 MP3 音频

> ID：14609759
> 
> 赞同：8
> 
> 时间：2013-01-30T17:12:05.570
> 
> 标签：android, audio-streaming, audiotrack, opensl

我正在尝试通过接入点使用 WiFi 将 MP3 从 Android 手机流式传输到另一部 Android 手机。问题是 OpenSL ES 似乎只支持 PCM 音频缓冲区作为源（除非使用 URI）。与其在发送之前在“主”端解码一个潜在的巨大文件，我更愿意让“客户端”将 MP3 解码为 PCM。请记住，这必须在文件流传输时发生，而不是简单地发送整个文件然后解码。有没有办法使用 OpenSL ES 来完成这个？音轨？这似乎是一个相当普遍的要求。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T23:09:21.803

您是正确的，opensl 似乎没有使用带有 mp3 源的简单缓冲区队列。话虽如此，您应该能够改用 SLDataLocator_URI。现在，我知道您在开始时没有可用的完整文件（因为您正在流式传输），但是有一种方法可以解决这个问题。如果您创建一个空文件，并将其用作 opensl URI 播放器的源，那么一切都应该可以正常工作。当您获取数据（mp3 文件的位）时，只需将此数据添加到您创建的空文件中。您可以让 OpenSL 在完成向其附加数据之前从该文件开始播放。

创建一个空文件：

```
RandomAccessFile raf = new RandomAccessFile(new File(mFileUri), "rw");
raf.setLength(audioFileSize); 
```

将您的音频源创建为：

```
SLDataLocator_URI loc_uri = {SL_DATALOCATOR_URI, (SLchar *) fileLoc};
SLDataFormat_MIME format_mime = {SL_DATAFORMAT_MIME, NULL, SL_CONTAINERTYPE_UNSPECIFIED};
SLDataSource audioSrc = {&loc_uri, &format_mime}; 
```

加载缓冲区：

```
for (int i = 0; i < BUFFER_COUNT; i++) {
    // get byte[] data from stream
    raf.seek(i*Constants.BUFFER_SIZE);
    raf.write(data);
} 
```

随时使用 OpenSL 开始播放音频，然后继续加载缓冲区。只要您在流式传输过程中保持领先，就应该没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-14T10:00:23.533

你必须使用opensl。MediaCodec（在 Android 4.2 中可用）可以将 mp3 解码为可传递给 AudioTrack 的 PCM 块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T13:36:11.350

您是否尝试过这个 Victor Lazzarini 的 OpenSL ES 音频编程示例 [http://audioprograming.wordpress.com/2012/10/29/lock-free-audio-io-with-opensl-es-on-android/](http://audioprograming.wordpress.com/2012/10/29/lock-free-audio-io-with-opensl-es-on-android/)

它提供了基于[http://mobilepearls.com/labs/native-android-api/ndk/docs/opensles/的良好流实现](http://mobilepearls.com/labs/native-android-api/ndk/docs/opensles/)

# java - 非阻塞数据报套接字？

> ID：14609760
> 
> 赞同：3
> 
> 时间：2013-01-30T17:12:07.987
> 
> 标签：java, android, sockets

我目前正在为 Android 开发一个客户端应用程序，它应该通过 UDP 进行数据包的非阻塞接收。有什么方法可以设置 DatagramSocket 以使其在接收（）上不阻塞？

基本上我要问的是如何为 DatagramSocket 设置 MSG_DONTWAIT 标志。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T17:17:46.807

您正在寻找的是`java.nio.channels.DatagramChannel`和朋友。

# javascript - 了解 Instagram 的实时 api - node.js

> ID：14609761
> 
> 赞同：3
> 
> 时间：2013-01-30T17:12:11.737
> 
> 标签：javascript, node.js, express, instagram

我按照[Instagram-Developers-Site](http://instagram.com/developer/realtime/)上的说明一步一步地订阅了一个标签。现在，当我的 node.js 服务器启动并运行时，我会提示`req.body`看看我得到了什么。这些是 Instagram 发送给我的 POST 请求：

```
[ { changed_aspect: 'media', 
subscription_id: 2844823, 
object: 'tag', 
object_id: 'food', 
time: 1359561407 } ] 
```

这也如指南中所述，我现在的问题是：我能用它做什么？我的意思是我期望一个包含所有必要数据的 JSON 对象来在我的页面上显示照片。例如，参数是：名称、PicURL、评论、位置，但我得到的只是上面的。那么你能告诉我我收到的这些信息在哪些方面有用吗？

所以一个简短的总结： - 我想在我的页面上显示某个标签的照片 - 使用 Node 和 Express - PubSub 正在工作 - 我收到一张新图片 postet 但我从哪里获得有关该特定图片的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-15T18:03:41.963

这个 JSON 只是一个有新照片的通知。然后你必须使用 instagram api 请求获取最后一张照片。

```
api.instagram.com/v1/tags/[your tag]/media/recent?count=1&..... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-31T14:54:29.570

你可以查看这个 Instagram Real-time API Demo App 来获得灵感：[https ://github.com/Instagram/Realtime-Demo](https://github.com/Instagram/Realtime-Demo)

# c - C中的struct由1个字段组成，是相同类型的字段吗？

> ID：14609763
> 
> 赞同：1
> 
> 时间：2013-01-30T17:12:18.900
> 
> 标签：c, types, struct

```
 typedef struct _name name;
 struct _name { char name[256]; };

 // ...
 name Name;
 char *buf = (char*)malloc( 256*sizeof(char) );

 // ...
 // if I do not want to write strcpy (Name.name,buf); 
 // and write: list_name_insert (&List,0,&Name);
 // if just write:
 list_name_insert (&List,0 /* index */,(name*)buf /* pointer to elem */);
 // Will it be correct?
 // ... 
```

在函数 list_name_insert 标准 C 逐字段元素复制中执行。换句话说，`srtuct { char[]; }`在`char*`ANSI C 中是否相同？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T17:15:05.020

这两个问题合而为一的答案是“不”和“不”。

一个成员的A`struct`有一个`struct`类型；它的类型与其单个成员不同。

此外，数组和指针不是一回事。数组可以衰减为指针，如

```
char buf[256];
char *p = buf; 
```

但不是相反。

# javascript - 对象不支持此属性或方法。IE7从多维javascript数组中检索值

> ID：14609765
> 
> 赞同：1
> 
> 时间：2013-01-30T17:12:26.920
> 
> 标签：javascript, arrays, internet-explorer-7, multidimensional-array

我正在尝试使用 javascript 从多维数组中检索一些值。我有以下代码：

```
var imgArray = [{
    image: '1358267998.jpg',
    table: '1358602091.jpg',
    orientation: 1,
    margin: 182,
    desc: 'First Image, posters',
    title: 'First Image, posters',
    price: '0.00'
}];
var imgNo = 0;
switchImg(imgNo);

function switchImg(imgNo) {
    title = imgArray[imgNo].title;

    //also doesn't work: imgArray[imgNo]['title'];
    //bizarrely, this works: imgArray[imgNo].image;

    $('.pageTitle').html(title);
} 
```

似乎 IE7 无法检索这些值……除了第一个“图像”；我可以正确获得值“1358267998.jpg”

有没有人有办法解决吗？

谢谢。

# wordpress - 在使用 Symfony 框架的网站上实现博客的最佳方式是什么？

> ID：14609767
> 
> 赞同：0
> 
> 时间：2013-01-30T17:12:28.330
> 
> 标签：wordpress, symfony, blogs

我们公司的网站是使用 Symfony 框架构建的。我们想在子目录中添加一个博客（因此网站将是 www.ourwebsite.com/blog）。最简单的方法是什么？

理想情况下，我想使用 WordPress，因为它是我最有经验的，但是将整个网站切换到 WordPress 不是一种选择。一种选择是为博客创建一个子域（blog.ourwebsite.com），但我们在 SEO 上投入了大量资金，而且我们的网站已经有了不错的排名。我们想使用博客来进一步提高我们网站的排名，我觉得将它放在子域中会减慢我们实现目标的速度，因为我所做的研究数量有限。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T22:11:28.457

我会在网络服务器级别解决这个问题。假设 Symfony 应用程序位于`/var/www/example.com`.Wordpress 博客位于`/var/www/blog.example.com`.

对于 Apache，应该这样做：

```
<VirtualHost example.com:80>
    DocumentRoot /var/www/example.com
    ServerName example.com

    <Directory /var/www/example.com>
        # Your Symfony config here
    </Directory>

    Alias /blog /var/www/blog.example.com

    <Directory /var/www/blog.example.com>
        # Your Wordpress config here
    </Directory>
</VirtualHost> 
```

有关详细信息，请参阅[别名指令](http://httpd.apache.org/docs/2.2/mod/mod_alias.html#alias)。如果您明白了，如果您不使用 Apache，那么将其适应其他网络服务器（例如 Nginx）应该很简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T19:47:10.637

或者，如果您愿意更多地了解代码，您可以选择：[symblog.co.uk 。](http://symblog.co.uk/)

# opengl - 我应该什么时候使用 GLSL？

> ID：14609775
> 
> 赞同：0
> 
> 时间：2013-01-30T17:12:47.817
> 
> 标签：opengl, glsl

我已经使用 Opengl 一个学期了，但使用的是传统方式，例如：glBegin...glEnd。

我听说有人说 GLSL 是 OpenGL 的未来，我只是想知道我是否需要跳入 GLSL 而不是传统的 OpenGL？

此外，GLSL 是否只适用于好的 GPU？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T17:56:59.140

简短回答：是的，您确实需要更新您的 OpenGL 使用，因为您通常会从 glBegin/glEnd 获得糟糕的性能，并通过将自己限制在旧的固定管道行为来限制您可以做的事情。

长答案：

你混淆了两个不同的问题。其中之一是立即模式（glBegin glVertex ... glEnd 等）与批处理模式（glVertexPointer 等）。为了充分发挥现代 GPU 的性能，您需要使用批处理。请参阅此 SO 讨论：[VBO 何时比“简单”OpenGL 基元 (glBegin()) 更快？](https://stackoverflow.com/questions/430555/when-are-vbos-faster-than-simple-opengl-primitives-glbegin).

另一个是固定管道与可编程着色器（glEnable 状态等。与 GLSL）。在许多情况下，这可能是一个性能问题，但更重要的是它是一个灵活性问题。使用 GLSL，您可以更好地控制事物的渲染方式，因此您可以完成使用固定管道实际上不可能完成的事情——至少不是以可用的帧速率。可编程着色器也更好地反映了现代 GPU 的实际工作方式——事实上，如果您使用固定管道，它可能只是在引擎盖下使用着色器进行模拟。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T17:47:39.943

GLSL 不是 OpenGL 的未来，它是当前的编程方式。正如 Aeluned 所说，glBegin 和 glEnd 已被弃用（甚至在 OpenGL ES 中也不支持。）

好的 GPU 是什么意思？即使是英特尔集成显卡也支持着色器，使用 GLSL 并不仅仅因为是 GLSL 而变慢。在做繁重的工作时，您可能会获得较慢的性能，但如果您实施固定管道，我认为您将获得相同的性能。

我想说学习 GLSL 是要走的路。

# php - 将关联数组推入另一个数组

> ID：14609777
> 
> 赞同：1
> 
> 时间：2013-01-30T17:12:52.020
> 
> 标签：php, wordpress, associative-array

我正在尝试进行自定义 WP_query 循环并将结果放入关联数组的数组中。它工作得不太好。我意识到 array_push 会覆盖任何具有相同索引的数组，所以我有索引增量 +1循环所以它们不相同..但是它仍然不起作用..我的结果仅在第一个索引（零）上显示正确..这是我的代码：

```
<?php 
    $permlink='permalink';
    $excerpt='exerpt';
    $title='title';
    $id='id';    
    $finalarray=array();

    for ($i = 0; $i <= 10; $i++) {
        $newitem = array(array(
            'id'.$i =>$id.$i,
            'title'.$i => $title.$i, 
            'excerpt'.$i => $excerpt.$i,
            'permalink'.$i => $permlink.$i 
        ));
        array_push($finalarray, $newitem); 
    }

    $count=0;
    foreach($finalarray as $item){
        echo $count.':'.'<br>';
        echo $item[$count]['title'.$count];
        echo $item[$count]['id'.$count];
        echo $item[$count]['permalink'.$count];
        $count++;
    }

    var_dump($finalarray);
?> 
```

我的任何结果都显示：

```
0:
title0id0permalink01:
2:
3:
4:
5:
6:
7:
8:
9:
10:
array(11) { [0]=> array(1) { [0]=> array(4) { ["id0"]=> string(3) "id0" ["title0"]=> string(6) "title0" ["excerpt0"]=> string(7) "exerpt0" ["permalink0"]=> string(10) "permalink0" } } [1]=> array(1) { [0]=> array(4) { ["id1"]=> string(3) "id1" ["title1"]=> string(6) "title1" ["excerpt1"]=> string(7) "exerpt1" ["permalink1"]=> string(10) "permalink1" } } [2]=> array(1) { [0]=> array(4) { ["id2"]=> string(3) "id2" ["title2"]=> string(6) "title2" ["excerpt2"]=> string(7) "exerpt2" ["permalink2"]=> string(10) "permalink2" } } [3]=> array(1) { [0]=> array(4) { ["id3"]=> string(3) "id3" ["title3"]=> string(6) "title3" ["excerpt3"]=> string(7) "exerpt3" ["permalink3"]=> string(10) "permalink3" } } [4]=> array(1) { [0]=> array(4) { ["id4"]=> string(3) "id4" ["title4"]=> string(6) "title4" ["excerpt4"]=> string(7) "exerpt4" ["permalink4"]=> string(10) "permalink4" } } [5]=> array(1) { [0]=> array(4) { ["id5"]=> string(3) "id5" ["title5"]=> string(6) "title5" ["excerpt5"]=> string(7) "exerpt5" ["permalink5"]=> string(10) "permalink5" } } [6]=> array(1) { [0]=> array(4) { ["id6"]=> string(3) "id6" ["title6"]=> string(6) "title6" ["excerpt6"]=> string(7) "exerpt6" ["permalink6"]=> string(10) "permalink6" } } [7]=> array(1) { [0]=> array(4) { ["id7"]=> string(3) "id7" ["title7"]=> string(6) "title7" ["excerpt7"]=> string(7) "exerpt7" ["permalink7"]=> string(10) "permalink7" } } [8]=> array(1) { [0]=> array(4) { ["id8"]=> string(3) "id8" ["title8"]=> string(6) "title8" ["excerpt8"]=> string(7) "exerpt8" ["permalink8"]=> string(10) "permalink8" } } [9]=> array(1) { [0]=> array(4) { ["id9"]=> string(3) "id9" ["title9"]=> string(6) "title9" ["excerpt9"]=> string(7) "exerpt9" ["permalink9"]=> string(10) "permalink9" } } [10]=> array(1) { [0]=> array(4) { ["id10"]=> string(4) "id10" ["title10"]=> string(7) "title10" ["excerpt10"]=> string(8) "exerpt10" ["permalink10"]=> string(11) "permalink10" } } } 
```

所以看起来值在数组中，但是，只有第一个索引（零）打印正确..有什么建议吗？另外，有什么办法可以推送一个关联数组并且它不会被覆盖，所以我不必增加索引？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T17:24:48.913

这里有几个问题。

```
for ($i = 0; $i <= 10; $i++) {
    $newitem = array(array(
        'id'.$i =>$id.$i,
        'title'.$i => $title.$i, 
        'excerpt'.$i => $excerpt.$i,
        'permalink'.$i => $permlink.$i 
    ));
    array_push($finalarray, $newitem); 
} 
```

您正在将一个包含 4 个元素的数组推入`$finalarray`. 不需要外层`array()`。你可以这样做`$newitem = array(...)`。 `array_push`追加到数组的末尾，为您增加索引。

其次，在您的 中`foreach`，您的`$count`变量根本不需要。使用时`foreach`，`$item`是数组的元素。无需通过索引查找。

不过，如果你想要索引，`foreach`可以给你。

```
foreach($finalarray as $count=>$item){
    echo $count.':'.'<br>';
    echo $item['title'.$count];
    echo $item['id'.$count];
    echo $item['permalink'.$count];
} 
```

您的原始代码不起作用，因为每个`$item`都有一个数组。该数组有一个项目。在每个元素中，内部数组*始终*位于索引 0 处。递增`$count`使其只有第一个元素起作用，其他元素不起作用，因为`$item[1]`不存在，它*始终* `$item[0]`是。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-30T17:19:03.610

```
for ($i = 0; $i <= 10; $i++) {
        $newitem = array(array(
            'id'.$i =>$id.$i,
            'title'.$i => $title.$i, 
            'excerpt'.$i => $excerpt.$i,
            'permalink'.$i => $permlink.$i 
        ));
        $finalarray[] = $newitem; 
        unset($newitem);
    } 
```

由于您不关心最终数组的键，只需使用 $finalarray[] 将其添加

# java - Callable和Future的实际实现

> ID：14609778
> 
> 赞同：10
> 
> 时间：2013-01-30T17:12:55.353
> 
> 标签：java, concurrency, theory, future, callable

我正在了解细粒度的 util.concurrency。Java 的实现在哪里`Callable`并`Future`位于 JVM 中？

我找到了[Future 类](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/concurrent/Future.java)，它在 Java 语言中描述了高级别的未来，我试图找到它在较低级别上描述的地方。

总而言之，找到 Future 和 Callable 的实际实现会很有趣，例如：处理 Future.get() 或 Callable.call() 并规定它们应该如何工作的 JVM 部分。

期待您的回复，Akonkagva

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-30T17:31:54.533

> Java Callable 和 Future 的实现在 JVM 中的什么位置？

`Future`接口的主要实现是[`FutureTask`类](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/FutureTask.html)。类使用它`ExecutorService`来表示提交的作业等。 `Callable`（如`Runnable`）是您自己实现的简单接口。它包装了您希望`ExecutorService`线程池执行的任务。您应该下载这些类的源 jar 并自己查看 Java 代码。

这些类都不包含任何 JVM 黑魔法或任何东西。例如，如果您构建一个`Callable`类，除非您将其提交到线程池，否则它不会在另一个线程中运行。您可以`Callable`在许多与线程无关的地方使用 。

JVM“黑魔法”主要包含在`Future`类中。它具有底层本机支持，可与操作系统线程一起完成在另一个线程中运行任务的实际工作。如果您想看看它的作用，其中仍然有很多 Java 代码，但是有本机和操作系统调用才是真正的魔力。`Callable``Thread`

这是一个[很好的教程，介绍如何使用](http://docs.oracle.com/javase/tutorial/essential/concurrency/exinter.html)1.5 中添加到 Java 的执行器服务。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T17:26:30.830

[Guava](https://github.com/google/guava/)库有自己的: `Future`（[`AbstractFuture`](https://github.com/google/guava/blob/master/guava/src/com/google/common/util/concurrent/AbstractFuture.java)和子类，如[`SettableFuture`](https://github.com/google/guava/blob/master/guava/src/com/google/common/util/concurrent/SettableFuture.java)）实现，它是`FutureTask`.

如果您有兴趣了解如何实现这些东西，这可能也很有趣。通常番石榴代码写得很好。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-30T17:16:48.633

`Future`是一个接口。它本身没有实现，它只是指定方法签名。您可以检查实现此接口的任何类的源代码。与 JVM 捆绑的一些公共类是：

*   [未来任务](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/FutureTask.html)
*   [摇摆工人](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html)

您可以使用 grepcode 查看它们的实现。

# linux - 如何配置 bash 来处理 CRLF shell 脚本？

> ID：14609779
> 
> 赞同：12
> 
> 时间：2013-01-30T17:13:03.060
> 
> 标签：linux, windows, bash, line-endings

我想执行碰巧使用 Windows/CRLF 行结尾的 bash 脚本。

我知道 tofrodos 包，以及如何归档`fromdos`，但如果可能的话，我想在不做任何修改的情况下运行它们。

是否有一个环境变量会强制 bash 处理 CRLF？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-30T17:54:07.283

也许像这样？

```
dos2unix < script.sh|bash -s 
```

编辑：正如评论中指出的，这是更好的选择，因为它允许脚本通过运行 dos2unix 而不是 bash 在子shell中从标准输入读取：

```
bash <(dos2unix < script.sh) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-30T17:56:21.167

这是一个透明的解决方法：

```
cat > $'/bin/bash\r' << "EOF"
#!/bin/bash
script=$1
shift
exec bash <(tr -d '\r' < "$script") "$@"
EOF 
```

通过允许您像使用 UNIX eol（带`./yourscript`）一样执行系统的所有 Windows CRLF 脚本，而不必为每个特定调用指定它，这样一劳永逸地解决了这个问题。（但要注意：`bash yourscript`或者`source yourscript`仍然会失败）。

它之所以有效，是因为从 UNIX 的角度来看，DOS 样式文件将解释器指定为“/bin/bash^M”。我们覆盖该文件以从脚本中删除回车并在结果上运行实际的 bash。

如果你愿意，你可以对不同的口译员做同样的事情`/bin/sh`。

# objective-c - 取消归档我的数组后，它突然包含 NSRects 而不是 NSValues。如何找回，

> ID：14609781
> 
> 赞同：0
> 
> 时间：2013-01-30T17:13:11.277
> 
> 标签：objective-c, arrays, load, save, nsarchiving

我将 s 包裹`NSRect`在`NSValue`s 中以将它们放入 NSMutableArray。我现在想为我的应用程序添加保存/加载功能，所以我想我会使用`NSKeyedArchiver`and `NSKeyedUnarchiver`。**错误的！** `NSKeyedArchiver cannot archive structs`. 经过一番搜索，我找到了一个有同样问题的人的论坛帖子。他通过使用`NSArchiver`and解决了这个问题`NSUnarchiver`。我实现了这一点，但再一次，它没有用。我现在可以对其进行编码，但如果我解码我的数组，我会得到一个*`NSRect`s*数组！您甚至不能将它们放入数组中！但我不在乎，只要我能恢复我的直肠。但我不能，因为`NSArray`只有检索对象的方法。结构不是对象，所以我无法检索我的矩形。这怎么可能？如何检索我存档的矩形？

MyDocument.m 的一部分：

```
- (NSData *)dataOfType:(NSString *)typeName error:(NSError **)outError
{
    NSMutableArray *array = odview.ovals;
    return [NSArchiver archivedDataWithRootObject:array];
}

- (BOOL)readFromData:(NSData *)data ofType:(NSString *)typeName error:(NSError **)outError
{
    NSMutableArray *array = [NSUnarchiver unarchiveObjectWithData:data];
    NSMutableArray *newOvals = [NSMutableArray array];
    NSLog(@"array: %@", array);
    NSUInteger i, count = [array count];
    for (i = 0; i < count; i++) {
        NSRect rect = [array objectAtIndex:i];            // I can't do that because a struct is not an object!
        [newOvals addObject:[NSValue valueWithRect:rect]];
    }
    odview.ovals = newOvals;
    return YES  ;
} 
```

**包装 NSValues 怎么可能消失，我怎样才能安全地保存和加载我的 NSRects？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T17:31:23.007

我认为最简单的方法是使用 NSStringFromCGRect 和 CGRectFromString 来回转换——将矩形存储为数组中的字符串，然后使用 writeToFile:atomically: (或 writeToURL:atomically:) 来保存数组。

# c++ - 表示小波的数据结构

> ID：14609791
> 
> 赞同：2
> 
> 时间：2013-01-30T17:13:43.773
> 
> 标签：c++, algorithm, wavelet

我正在用 C++ 编写图像的小波表示，以便快速访问。什么是适合小波的数据结构？

这是一个典型的小波，由不同大小的图像组成。这取决于高度和方向的数量。

1) 高通：512x512

2) 带方向的子带：256x256 256x256 256x256 256x256

3）其他子带：128x128 128x128 128x128 128x128

...

4) 低通：8x8

我应该使用递归数据结构吗？还是简单地将所有内容转换为一维数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:34:55.387

答案是：视情况而定。从编程抽象的角度来看，为每个子图像创建单独的数组可能是最简单的。我会让它们成为你在抽象中作为二维访问的一维数组。抵消的冲动是分配一个大数组并从其中的一部分中取出，基本上是在做你自己的内存管理。很多 C++ 程序大部分时间都花在 malloc()/free() 上，所以这看起来很吸引人，但我认为这不值得。把时间花在算法上，而不是工具上。稍后，如果您需要调整它以获得最后一点性能，您可以这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T18:37:36.773

希望谈论相同的主题，我认为[小波矩阵](http://www.dcc.uchile.cl/~gnavarro/ps/spire12.4.pdf)文章会澄清。

# macos - 仅在特定值上停止 NSScrollView - 像 UIScrollView 分页

> ID：14609793
> 
> 赞同：15
> 
> 时间：2013-01-30T17:13:51.047
> 
> 标签：macos, nsscrollview, scroll-paging

我正在开发一个使用 SDK 10.7 作为部署目标的 Mac OS X 应用程序。NSScrollView 包含图像缩略图的水平列表。ScrollView 中心的缩略图表示所选图像，该图像以全尺寸显示在 ScrollView 下方。这与 Finder Cover-Flow 的工作方式非常相似，除了我的应用程序中的图像不会流动而只是滚动离开。

我想将滚动限制为仅在缩略图恰好位于中心时停止。NSView 方法**adjustScroll:**是无解的。这将禁用“平滑”滚动并让 ScrollView 从一个缩略图跳到下一个。

我需要某种**动作/回调**来告诉我 ScrollView 完成了滚动。我可以检查位置是否正常（如果缩略图在中心）或向后/向前滚动到最近的缩略图。但是 NSScrollView 不提供这样的回调。

我试图观察 ScrollViews contenView 框架的变化。每当框架发生变化时，我都会启动一个计时器。如果计时器在触发之前没有重新启动，我假设滚动停止。这不是很好。如果滚动只停止很短的时间（例如，因为手指被移动以进行另一个滑动手势），下一次滚动会干扰位置的校正。

在 iOS 下使用 UIScrollView 可以毫无问题地解决这个任务。NSScrollView的类似**分页**功能将是一个完美的解决方案。

有谁知道如何解决这个问题？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-07-30T23:25:05.027

您可以使用[`NSScrollViewDidEndLiveScrollNotification`](https://developer.apple.com/documentation/appkit/nsscrollviewdidendlivescrollnotification)：

```
NSScrollView* scrollView;
const CGFloat interval = 100;
[[NSNotificationCenter defaultCenter]
 addObserverForName:NSScrollViewDidEndLiveScrollNotification
 object:scrollView
 queue:nil
 usingBlock:^(NSNotification* notification) {
     CGFloat offset = scrollView.contentView.bounds.origin.y;
     offset = round(offset / interval) * interval;
     [scrollView.contentView.animator setBoundsOrigin:NSMakePoint(0, offset)];
 }]; 
```

您可以使用它[`NSAnimationContext`](https://developer.apple.com/documentation/appkit/nsanimationcontext)来调整动画的持续时间和时间。

* * *

注意：根据文档，此通知是在 10.9 中引入的，因此对于原始问题中提到的 10.7 部署目标，它不是一个选项。

# java - 如何关闭junit之间共享的资源？

> ID：14609797
> 
> 赞同：0
> 
> 时间：2013-01-30T17:13:57.970
> 
> 标签：java, junit

我有许多带有许多测试的 junit 4 测试类。其中许多测试需要 DataSource 来访问数据库。

为了加快测试速度，我想为所有测试类共享一个数据源。这将避免连接成本。

所以我把数据源放在一个静态变量中。

但是我还没有找到关闭它的方法！

使用@Rule + TestWatcher，我们可以在单个测试之前和之后执行代码......使用@ClassRule + TestWatcher，我们可以在单个测试类之前和之后执行代码......

但是在执行完所有执行的测试类之后如何执行代码呢？

测试套件似乎不合适，因为我正在执行所有、一个或任何 junits 测试的子集。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T06:51:01.523

You can use [ClassRule](http://kentbeck.github.com/junit/javadoc/4.10/org/junit/ClassRule.html)

```
public static class GlobalDataSource extends ExternalResource
  private int count = 0;
  private DataSource dataSource;

  private GlobalDataSource() {};

  public static final GlobalDataSource INSTANCE = new GlobalDataSource();

  public DataSource get() {
    if (dataSource == null) {
      throw new IllegalStateException();
    }
    return dataSource;
  }

  @Override
  protected void before() throws Throwable {
    if (count++ == 0) {
      dataSource = createDataSource();
    }
  }

  @Override
  protected void after() {
    if (--count == 0) {
      try {
        destroyDataSource(dataSource);
      } finally {
        dataSource = null;
      }
    }
  };
}; 
```

In your tests:

```
@RunWith(JUnit4.class)
public class FooTest {
  @ClassRule public static GlobalDataSource source = GlobalDataSource.INSTANCE;

  @Test
  public void readDataSource() {
    ...
  }
} 
```

Then create a suite:

```
@RunWith(Suite.class)
@SuiteClasses(FooTest.class, BarTest.class ...)
public class AllTests {
  @ClassRule public static GlobalDataSource source = GlobalDataSource.INSTANCE;
} 
```

Be aware that global state in tests can be just as problematic as global state in code. A failure in one test could lead other tests to fail.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T13:35:40.223

在这种情况下，安装[JVM 关闭挂钩](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Runtime.html#addShutdownHook%28java.lang.Thread%29)并不会显得太难看。

比仅在对象被垃圾回收时调用的 finalize() 方法可靠得多。

如果进程中断，则不会调用，但在这种情况下，无论如何都无能为力。所以我没有发现主要的缺点。

谢谢。

# ios - UIProgressView 未按预期更新

> ID：14609798
> 
> 赞同：0
> 
> 时间：2013-01-30T17:14:01.353
> 
> 标签：ios, xcode, uiprogressview, uiprogressbar

按照这个问题中概述的答案[，](https://stackoverflow.com/questions/7412795/how-to-use-the-progress-bar-in-the-iphone-app)我设法让 UIProgressView*工作*，但它似乎在它应该之前完成更新（即栏“填满”）。

我尝试添加一些日志语句以查看发生了什么：

```
float actual = [_progressBar progress];

if (actual < 1) {
    _progressBar.progress = actual + ((float)numberOfFIlesAlreadyDownloaded/(float)numberOfFilesToBeDownloaded);

    NSLog(@"progress = %f", _progressBar.progress);
    NSLog(@"expected = %d", numberOfFilesToBeDownloaded);
    NSLog(@"received = %d", numberOfFIlesAlreadyDownloaded);
    NSLog(@"actual = %f", actual);

    [NSTimer scheduledTimerWithTimeInterval:0.05 target:self selector:@selector(animateProgressBar) userInfo:nil repeats:NO];
} 
```

这输出：

```
 progress = 0.114286
 expected = 35
 received = 4
 actual = 0.000000
 progress = 0.285714
 expected = 35
 received = 6
 actual = 0.114286
 progress = 0.571429
 expected = 35
 received = 10
 actual = 0.285714
 progress = 0.857143
 expected = 35
 received = 10
 actual = 0.571429
 progress = 1.000000
 expected = 35
 received = 10
 actual = 0.857143 // this is the last output 
```

这表明即使文件已经收到的值不是并且我不明白为什么，进度也在增加。

我有一种感觉，我错过了一些明显的东西，但如果有人能指出我做错了什么，我会很感激？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:22:09.773

假设下载了 50% 的文件，因此进度为 0.5。接下来，如果下载仍然有延迟，它会根据 `_progressBar.progress = actual + ((float)numberOfFIlesAlreadyDownloaded/(float)numberOfFilesToBeDownloaded);`

所以仔细看看你是如何调用这个函数的，这将解决问题

# amazon-s3 - 大于 5 GB 的文件的 S3 错误，通过 s3cmd 1.1.0 beta 上传

> ID：14609803
> 
> 赞同：1
> 
> 时间：2013-01-30T17:14:11.983
> 
> 标签：amazon-s3, s3cmd

我正在使用 s3cmd 1.1.0beta 将大于 5 GB 的文件上传到 Amazon S3。这是因为早于 1.1.0 的 s3cmd 无法上传大于 5 GB 的文件（亚马逊单部分上传限制），而最新的 beta 版本能够使用多部分上传将这些文件上传到 S3。

问题是：我无法对通过 s3cmd 1.1.0 上传的大于 5 GB 的文件执行任何操作。我怀疑这可能是因为 s3cmd 设置的 Etag 与亚马逊期望的 Etag 不匹配：

具体问题如下（均通过web控制台）：

1.  当我尝试将这些文件从一个存储桶复制到另一个存储桶时，Amazon S3 抱怨：“由于来自以下的错误，以下对象未被复制：”
2.  当我尝试更改这些文件的任何属性时，S3 抱怨：“由于以下对象的错误，未启用或禁用附加属性：”

有什么方法可以修复大于 5 GB 文件中的 Etag，以便我能够对这些文件执行操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T17:09:06.327

好的，经过一番调查，我发现问题与 Amazon S3 无法本地处理大于 5 GB 的文件有关。

为了对大于 5 GB 的文件进行复制或任何操作，您必须专门使用亚马逊的分段上传和相关 API 来处理大文件。

显然，即使是亚马逊的 AWS Web 控制台也只使用简单的 API，这些 API 仅适用于小于 5 GB 的文件，因此如果您想对大于 5 GB 的文件执行任何操作，则需要编写自己的代码使用 AWS API 对这些文件进行操作！

# ruby - Ruby 如果没有给出 ARGV

> ID：14609809
> 
> 赞同：15
> 
> 时间：2013-01-30T17:14:33.877
> 
> 标签：ruby

这是我的代码：

```
if ARGV[0] == false
    puts "Usage: ./script.rb argument"
    exit
end
print "Yey we got an argument: " ARGV[0] 
```

但是我不能让代码检查是否给出了 ARGV[0]，我应该怎么做？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-30T17:17:10.630

检查它是否`empty?`（或检查它的长度）：

```
if ARGV.empty?
  puts ...
  exit
end 
```

考虑使用任何 Ruby 命令行参数解析器，例如[OptionParser](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/optparse/rdoc/OptionParser.html)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-30T17:22:54.473

处理位置参数（除了使用 gem 来做）的最简单方法是一次一个地[关闭](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-shift)它们：

```
arg1 = ARGV.shift
arg2 = ARGV.shift 
```

缺少的参数将为零。让我们利用它给 arg2 一个默认值：

```
arg1 = ARGV.shift
arg2 = ARGV.shift || 'default value goes here' 
```

检查所需的参数很简单：

```
raise "missing argument" unless arg1 
```

也很容易看出是否提供了太多参数：

```
raise "too many arguments" unless ARGV.empty? 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-11-15T14:11:16.780

我意识到已经给出了一个很好的解决方案，但是没有人提到你的例子不起作用的真正原因。

您的示例代码的问题是，如果没有给出参数，`ARGV[0]`将返回`nil`，并且`nil == false`为假。`nil`是“假的”，但不等于假。你可以做的是：

```
unless ARGV[0]
  puts "Usage: ..."
  exit 1
end 
```

这会起作用，因为这个陈述现在取决于虚假性，而不是与实际的相等性`false`。

但是不要使用这段代码，如果你陈述你的实际意图，那就更清楚了，那就是你想知道是否有任何参数（而不是第一个参数是否是假的）。所以使用其他人建议的代码：

```
if ARGV.empty?
  puts "Usage..."
  exit 1
end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-10T20:07:57.223

检查是否给出了 ARGV[0]（或更多参数）：

```
puts 'Usage: ...' if ARGV.length == 0 
```

你也可以使用 ARGV.empty？（@DaveNewton 的回答）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T17:17:22.323

可以查看长度`ARGV`。如果它有零个元素，则`ARGV[0]`没有给出。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-09-28T16:07:52.190

我这样做并工作：

```
url = ARGV[0] 

if url.nil?
  puts "The shell script needs the arguments."
  exit
end 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2014-01-24T15:22:47.417

这就是我所做的：

```
a = 'defaultvalue' if (a = ARGV.shift).nil? 
```

其他人建议这样做：

```
a = ARGV.shift || 'defaultvalue' 
```

这是错误的，因为任何错误值都会导致`defaultvalue`被分配，例如：

```
args=[false]; a=args.shift||true; # a has final value true when it should be false 
```

# asp.net - Context.Handler 转换错误

> ID：14609810
> 
> 赞同：1
> 
> 时间：2013-01-30T17:14:34.807
> 
> 标签：asp.net, type-conversion, httpcontext

尝试进行以下转换：

```
CType(Context.Handler, MyCustomHandler) 
```

但它会引发以下错误。

```
Unable to cast object of type 'ASP.MyWebForm_aspx' to type 'MyCustomHandler'. 
```

甚至“Context.Handler”和“MyCustomHandler”都是 IHttpHandler 类型。

** *MyCustomHandler 实现 IHttpHandler。*

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:21:08.147

我认为除了接口`Handler`公开的内容之外，可能还有更多的方法或属性。`IHttpHandler`尝试投射到`IHttpHandler`这个应该工作。

我认为您不能在实现接口的两个类之间进行转换，因为您不能在派生自抽象类的两个类之间进行转换，但是您可以将它们都转换为基类或接口

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T10:26:17.943

经过几个小时的努力，解决了这个问题。转换是合法的，但我注册的自定义处理程序符合 IIS6 和更早版本。由于我在集成模式下在 IIS7 上本地运行我的网站，它在 下的部分中查找已注册的处理程序，并且该处理程序未在此处注册。有两种可能的解决方案：

1) 在第 2 节中添加自定义处理程序
) 在 II7 中将集成更改为经典模式

我和第二个一起去了。

**这也解决了为什么当我使用 IIS6（经典）而不是本地（具有集成模式的 II7）在服务器上发布时它工作的问题

# php - 如何将高度格式化的文本表格数据转换为 HTML？

> ID：14609816
> 
> 赞同：-6
> 
> 时间：2013-01-30T17:14:43.020
> 
> 标签：php, html, html-table, ascii-art

这个 ASCII-art 表实际上是我需要解析的：

```
\---------\-------------\-------------\
| Username| IP          | Connected   |
\---------\-------------\-------------\
| test    | 127.0.0.1   | Yes         |
| atest   | 192.168.2.1 | No          |
| aaa     | 1.2.3.4     | Yes         |
\---------\-------------\-------------\ 
```

我必须像这样将它转换成 HTML

```
 <thead>
        <tr>
            <td>Username</td>
            <td>IP</td>
            <td>Connected</td>
        </tr>
    </thead>
    <tr>
        <td>Test</td>
        <td>127.0.0.1</td>
        <td>Yes</td>
    </tr>
    <tr>
        <td>Atest</td>
        <td>192.168.2.1</td>
        <td>No</td>
    </tr>
    <tr>
        <td>aaa</td>
        <td>1.2.3.4</td>
        <td>Yes</td>
    </tr>
</table> 
```

当然内容只是一个例子。这些行可以是 40 行，只有 3 行。

问题解决了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:25:44.800

像这样的东西应该工作。示例是一个名为的文本文件`my_data.txt`，其中包含以下内容，实际上是基于您的示例：

```
\---------\-------------\-------------\
| Username| IP          | Connected   |
\---------\-------------\-------------\
| test    | 127.0.0.1   | Yes         |
| atest   | 192.168.2.1 | No          |
| aaa     | 1.2.3.4     | Yes         |
\---------\-------------\-------------\ 
```

下面是 PHP 脚本，它使用 将文件读入数组[`file`](http://php.net/manual/en/function.file.php)，然后将其解析为`<table>`：

```
<?php

$data = file('my_data.txt');

if (!empty($data)) {
    $value_array = array();
    // Strip out lines like this `\---------\-------------\-------------\`
    $data = preg_replace("/\\|-/", "", $data);
    $data = trim($data);
    if(!empty($data)) {
        echo '<table border="1">';
        foreach ($data as $key => $value) {
            if (!empty($value)) {
                echo '<tr>';
                $value_array = preg_split("/|/", $value);
                foreach ($value_array as $table_cell_value) {
                    echo '<td>' . $table_cell_value . '</td>';
                }
                echo '</tr>';
            }
        }
        echo '</table>';
    }
}

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T17:16:26.303

您必须逐行解析文本文件并将其拆分为字段。看看`explode`php 函数，它可以通过将每一行分成不同的列来帮助你。它应该看起来像`$columns = explode( "|", $line);`

运行explode 后，您会收到一个php 数组，您可以循环使用`for`或`foreach`然后打印出html。

您可能希望`trim`在从爆炸中返回的每个部分上运行，以删除所有空白并仅保留有趣的文本。

如果您不确定如何将文本拆分为行，您也可以使用 explode 来实现，使用类似的东西`$lines = explode( "\n", $string );`

如果您不确定如何读取文本文件，请查看 php 函数`file_get_contents`

就是这样，你应该在这里拥有所有的构建块，是时候自己把它们拼凑起来了:)

还有一个提示，如果您担心水平分隔线，可以通过比较每行的第一个字符来跳过它们，并跳过以 . 开头的那些`\`。类似的东西`$line[0] == '\'`应该可以解决问题。

# php - How to find the index number of an array that contains a certain key/value

> ID：14609818
> 
> 赞同：1
> 
> 时间：2013-01-30T17:14:48.343
> 
> 标签：php, arrays, multidimensional-array

```
(
    [1] => Array
        (
            [rules_properties_id] => 1
            [operator] => >=
            [value] => 2
            [function] => NumOrdersPlaced
            [rules_properties_params] => Array
                (
                    [num_days] => 30
                    [customer_id] => 5
                )

        )

    [2] => Array
        (
            [rules_properties_id] => 1
            [operator] => >=
            [value] => 5
            [function] => NumOrdersPlaced
            [rules_properties_params] => Array
                (
                    [num_days] => 90
                    [customer_id] => 5
                )

        )

    [3] => Array
        (
            [rules_properties_id] => 2
            [operator] => >
            [value] => 365
            [function] => CustAcctAge
            [rules_properties_params] => Array
                (
                    [customer_id] => 5
                )

        )

) 
```

That's the `print_r` of an array that I'm getting back from my database. I need to find the index number of the sub-array that contains the function called NumOrdersPlaced (the expected result would be 2.) Is the only way to do this by looping through the array and subarrays and comparing (as in [this answer](https://stackoverflow.com/questions/1019076/how-to-search-by-key-value-in-a-multidimensional-array-in-php))? Or is there a more efficient, elegant (i.e. one-liner) function available that I don't know about?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T17:31:10.320

不，没有一个用于在 PHP 中搜索多维数组的衬垫，希望您自己为它编写一个函数并将其用作一个衬垫 :)

方法是：

1.  将数据结构更改为有利于搜索操作的程度。例如带有 xpath 的 xml
2.  从您的问题创建数组时，创建另一个数组，其中索引是函数名称，哪些值是指向原始数组的子数组的指针
3.  使用数据库进行该操作。它针对它进行了优化
4.  ...

在搜索“正确”方式时，您必须在搜索、插入、更新、删除操作、内存消耗和易用性之间找到折衷。

* * *

当您要求使用 PHP 解决方案时，这里有一个示例，我将如何在 PHP 中使用和附加索引数组：（*方法 2\. 来自上面的列表*）

```
// we need two arrays now:
$data = array(); 
$index = array();

// imagine you loop through database query results
foreach($db_result as $record) {
    // create a copy of $record as the address
    // of record will contain the last(!) element agter foreach
    $item = $record;

    // store pointers to that array in data and index
    $data []= &$item;
    $index[$item->function] = &$item;
}

// here is your one liner
$found = isset($index['NumOrdersPlaced']) ? $index['NumOrdersPlaced'] : NULL;

// another index seach:
$found = isset($index['CustAcctAge']) ? $index['CustAcctAge'] : NULL;

// note there is no additonal loop. The cost is the 
// additional memory for $index 
```

# windbg - 协助在 WinDbg 中进行调试

> ID：14609826
> 
> 赞同：1
> 
> 时间：2013-01-30T17:15:31.663
> 
> 标签：windbg

在 DebugDiag 工具中运行 Crash/Hang Analyzer 后，它会列出线程 17 正在锁定。

在 windbg 中运行 !locks 命令也指向线程 17。

我到这一步了...

```
0:000> ~17 kb
ChildEBP RetAddr  Args to Child              
0261fcc4 7c827b69 77e6202c 00000002 0261fd14 ntdll!KiFastSystemCallRet
0261fcc8 77e6202c 00000002 0261fd14 00000001 ntdll!ZwWaitForMultipleObjects+0xc
0261fd70 77e62fbe 00000002 7a3d0468 00000000 kernel32!WaitForMultipleObjectsEx+0x11a
0261fd8c 79f9a9d2 00000002 7a3d0468 00000000 kernel32!WaitForMultipleObjects+0x18
0261fdac 79f9ab07 000f2ab0 0261feb0 000f32b0 mscorwks!SVR::WaitForFinalizerEvent+0x77
0261fdc0 79eac697 0261feb0 00000000 00000000 mscorwks!SVR::GCHeap::FinalizerThreadWorker+0x49
0261fdd4 79eac633 0261feb0 0261fe5c 79fb685f mscorwks!Thread::DoADCallBack+0x32a
0261fe68 79eac553 0261feb0 3aa1ce47 00000000 mscorwks!Thread::ShouldChangeAbortToUnload+0xe3
0261fea4 79f4431c 0261feb0 00000000 0010f080 mscorwks!Thread::ShouldChangeAbortToUnload+0x30a
0261fecc 79f4432d 79f9aabc 00000008 0261ff14 mscorwks!ManagedThreadBase_NoADTransition+0x32
0261fedc 79f45ecb 79f9aabc 3aa1cff7 00000000 mscorwks!ManagedThreadBase::FinalizerBase+0xd
0261ff14 79fd2733 00000000 00000003 ffffffff mscorwks!SVR::GCHeap::FinalizerThreadStart+0xbb
0261ffb8 77e6482f 000f32b0 00000000 00000000 mscorwks!Thread::intermediateThreadProc+0x49
0261ffec 00000000 79fd26ed 000f32b0 00000000 kernel32!BaseThreadStart+0x34 
```

据我了解，线程 17 中的堆栈试图最后运行
`0261fcc4 7c827b69 77e6202c 00000002 0261fd14 ntdll!KiFastSystemCallRet`

我该怎么做才能进一步分析？

# javascript - 单击打印 Codeigniter, Javascript 时打开两个窗口

> ID：14609832
> 
> 赞同：0
> 
> 时间：2013-01-30T17:15:44.207
> 
> 标签：javascript, codeigniter

我做了这个打开2页的JS函数

```
 function edit(id){
    window.open('<?php echo site_url();?>store_out/store_out_print/'+id);
    window.open('<?php echo site_url();?>store_out/delivery_print/'+id);
    document.getElementById('print').target = '_blank';
} 
```

我有该表显示用户可以选择一行并单击打印图像的所有可能记录，因此打开了两个页面：

```
 <?php
         for($i=0;$i<sizeof($storeout);$i++){ ?>
   <tr class="gradeZ" id="<?php echo $storeout[$i]->storeout_id;?>" onclick="edit(this.id); ">
                <td><?php printf("%06d",$i+1);?></td>
                <td><?php echo $storeout[$i]->storeout_id;?></td>
                <td><?php echo $storeout[$i]->storeout_modified_time;?></td>
                <td><?php echo $account[$i][0]->account_name;?></td>
                <td><?php echo $storeout[$i]->rof_id != 0 ? "R.O.F" : "S.O";?></td>

            </tr>
        <?php } ?> 
```

我想当我选择特定行并单击打印图像时，执行两个函数来打开两个不同的页面（delivery/store_out）。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:27:36.440

我将假设`td`is in a`tr`是在循环中以编程方式生成的（即，您将拥有多个 1 `tr`、`td`和`img`）。我还将假设 jQuery 是可用的。

第一个问题是，如果您在循环中创建了超过 1 行，那么您将拥有一堆具有相同`id="print"`. 这不是好的js。

`store_out`您应该将（或您尝试获取控制器的任何 id）附加到 id 属性。类似的东西`id="print_<?php echo $thing->id;?>"`。这将让您获得要传递给编辑功能的 id。我还会添加一个`class="print"`这将使以下内容更容易。所以，整行看起来像：

```
<td width="5%"><a id="print_<?php echo $thing->id; ?>" class="print" href="#" ><img src="<?php echo site_url();?>/images/print.png" border="0" title="Print" height="25" width="25"/> </a></td> 
```

这将输出如下内容：

```
<td width="5%"><a id="print_1234" class="print" href="#" ><img src="http://example.com/images/print.png" border="0" title="Print" height="25" width="25"/> </a></td> 
```

`id`其次，据我所知，您没有传递给该方法。考虑到您注意到上述内容，您可以从 id 属性中提取 id 。

```
$('.print').click(function(){
    var id = $(this).attr('id').split('_')[1];
    edit(id);
}) 
```

# php - TbNavbar 下拉项中的表单

> ID：14609834
> 
> 赞同：2
> 
> 时间：2013-01-30T17:15:53.923
> 
> 标签：php, twitter-bootstrap, yii

我正在尝试使用 Yii Bootstrap 添加下拉登录表单，就像附加的教程一样，但我无法将 HTML 表单添加到`TbNavbar` `items`. 我该如何适应它？

跟随教程：[http ://mifsud.me/adding-dropdown-login-form-b​​ootstraps-navbar/](http://mifsud.me/adding-dropdown-login-form-bootstraps-navbar/)

代码：

```
 <?php $this->widget('bootstrap.widgets.TbNavbar',array(
                'items'=>array(
                    array(
                        'class'=>'bootstrap.widgets.TbMenu',
                        'htmlOptions'=>array('class'=>'pull-right'),
                        'items'=>array(
                            array('label'=>'Login', 'url'=>'#', 'visible'=>Yii::app()->user->isGuest, 'items'=>array(
                                'FORM HTML CODE', // here is the problem, the HTML Form is not working.
                            )),
                        ),
                   ),
            )); ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T23:14:03.630

将您的按钮和表单移出`TbMenu`items 数组并移入`TbNavbar`items 数组。`TbNavBar`允许 html 但不允许`TbMenu`.

```
 <?php $this->widget('bootstrap.widgets.TbNavbar',array(
            'items'=>array(
                array(
                    'class'=>'bootstrap.widgets.TbMenu',
                    'htmlOptions'=>array('class'=>'pull-right'),
                    'items'=>array(

                    ),
               ),

              '<ul class="nav pull-right">
                   <li><a href="/users/sign_up">Sign Up</a></li>
                   <li class="divider-vertical"></li>
                   <li class="dropdown">
                       <a class="dropdown-toggle" href="#" data-toggle="dropdown">Sign In <strong class="caret"></strong></a>
                       <div class="dropdown-menu" style="padding: 15px; padding-bottom: 0px;">
                          <!-- Login form here -->
                       </div>
                   </li>
               </ul>'
            ),
        )); ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T13:22:34.087

此外，为了将 html 标记保持在最低限度，您还可以使用“模板”数组键：

```
<?php $this->widget('bootstrap.widgets.TbNavbar',array(
'items'=>array(
    array(
        'class'=>'bootstrap.widgets.TbMenu',
        'htmlOptions'=>array('class'=>'pull-right'),
        'items'=>array(
            array('label'=>'Login', 'url'=>'#', 'visible'=>Yii::app()->user->isGuest, 'items'=>array(
                array(
                    'label'=>'{menu}',
                    'template'=>'<form class="navbar-form pull-left" style="padding-left:15px;padding-right:15px;">
                                    <input type="text" class="span2" placeholder="Login">
                                    <input type="password" class="span2" placeholder="Password">
                                    <button type="submit" class="btn">Submit</button>
                                </form>'
                )
            )),
        ),
    ),
))); ?> 
```

在定义的模板字符串中，您还可以使用 {menu} 占位符来替换您的链接。

# xcode - 在 Objective-C 中解析 JSON 后的随机结果

> ID：14609836
> 
> 赞同：-1
> 
> 时间：2013-01-30T17:15:55.893
> 
> 标签：xcode, json, parsing, uitableview, nsarray

我需要从远程服务器上的多个源解析多个 JSON 对象，并且需要使用单个解析的每个值填充 UITableView：

**单个 JSON 源，例如 h**p://WWW.REMOTESERVERWITHJSONSOURCE.NET/A1：**

```
{
  "id": 0001,
  "main": {
    "mainA": 100,
  },
} 
```

**单个 JSON 源，例如 h**p://WWW.REMOTESERVERWITHJSONSOURCE.NET/A2：**

```
{
  "id": 0002,
  "main": {
    "mainA": 200,
  },
} 
```

**单个 JSON 源，例如 h**p://WWW.REMOTESERVERWITHJSONSOURCE.NET/A3：**

```
{
  "id": 0003,
  "main": {
    "mainA": 300,
  },
} 
```

**在这里，我分配并初始化包含单个 URL 的数组：**

```
 - (void)viewDidLoad {

        // other stuff

        arrayA = [[NSMutableArray alloc] initWithObjects:@"A1", @"A2", @"A3", nil]; //each object A1, A2...An is the single subdirectory of URL for JSON source I need to parse
    } 
```

**解析方法：**

```
- (void)LoadParse { // this method is called by a UIButton

        main = [[NSMutableArray alloc] init];

        for (int i=0; i < [arrayA count]; i++) {

            NSURL *url = [NSURL URLWithString:
                          [NSString stringWithFormat:
                           @"http://WWW.REMOTESERVERWITHJSONSOURCE.NET/%@",[arrayA objectAtIndex:i]]];

            NSURLRequest *request = [NSURLRequest requestWithURL:url cachePolicy:NSURLRequestReloadIgnoringLocalAndRemoteCacheData timeoutInterval:5.0];

            AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {

            NSMutableDictionary *arrayMain = [JSON valueForKey:@"main"];
            [mainA addObject:[arrayMain objectForKey:@"mainA"]];

            NSLog(@"%@",mainA);

            [table reloadData]; // mainA objects populates rows of UITableView
            [table scrollRectToVisible:CGRectMake(0, 0, 1, 1) animated:YES];

            }

            failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON){

            }];

            [operation start];

            }
    } 
```

**NSLog(@"%@",mainA) 的结果；**

```
1st parsing -> NSLog result = random (100-200-300 or 100-300-200 or 200-300-100 or 200-100-300 or 300-200-100 or 300-100-200)
2nd parsing -> (after a few seconds) NSLog result = random (100-200-300 or 100-300-200 or 200-300-100 or 200-100-300 or 300-200-100 or 300-100-200)
3rd parsing -> (after other few seconds) NSLog result = random (100-200-300 or 100-300-200 or 200-300-100 or 200-100-300 or 300-200-100 or 300-100-200)
... 
```

**错误**：正如您所看到的，每次按下 UIButton 并开始解析时，我都会得到 mainA 对象的不同序列（然后在表行中），例如：在第一次解析之后，我期望什么？100-200-300 .. 而不是，我得到 100-300-200 或 300-200-100 或其他，所以在下一次解析中，每次加载 parseMethod 时，我都会得到 mainA 的随机序列，而我可以保证远程服务器上的 A1-A2-A3 mainA 对象分别为 100-200-300。那么，你能帮我吗，这里有什么问题？我头晕了，谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T18:28:51.593

每次执行循环时，都会向服务器发出一个*异步*请求。每个请求都有一个完成块，当结果从网络服务器返回时执行，但由于这些是异步的，你不知道它们将执行的顺序（无论哪个服务器响应首先到达，都会在它的完成块中首先处理） .

要解决此问题，您可以在声明数组时预先填充数组：

```
 main = [@[@"A",@"B",@"C"] mutableCopy]; 
```

然后在您的循环中，您可以将每个响应分配给它在数组中的相应位置：

```
 [main replaceObjectAtIndex:i withObject:[arrayMain objectForKey:@"mainA"]]; 
```

您应该预先填充数组，因为您不能在大于数组现有长度的索引处添加对象。

*编辑*我不清楚您的代码中`arrayA`（您预先填充）、`main`和之间的关系`mainA`，但我相信您可以了解原理。

# javascript - 将 jQuery 单击事件绑定到常规 javascript 按钮

> ID：14609838
> 
> 赞同：2
> 
> 时间：2013-01-30T17:16:12.427
> 
> 标签：javascript, jquery, validation

我正在尝试在 jquery 中创建一个简单的函数，以在单击取消按钮时将用户的浏览器引导到上一页，但我对如何执行此操作有点迷惑，因为我对 jquery 的经验很少。

```
<input type="button" id="cancelBc2" name="cancelForm" value="Cancel">
$(document.ready(function() {
    $('cancelBc2').click(function() {
        var cancel = confirm("Are you sure you want to leave the page?");
        if (cancel == true) {
            window.location = "chooseConfig.php";
        }
    });
}); 
```

我是遗漏了什么还是页面完全忽略了

```
$(document.ready(function()? 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T17:17:24.530

您缺少选择器上的 #

```
$('cancelBc2')  //looking for an element <cancelBc2 />
$('#cancelBc2')  //looking for an element with id="cancelBc2" 
```

你有一个错字

```
$(document.ready 
```

应该

```
$(document).ready(function() 
```

更好

```
$(function(){}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T17:17:29.227

应该添加前缀 # 以在 jQuery 中选择 Id

```
$('#cancelBc2').click(function() {
    var cancel = confirm("Are you sure you want to leave the page?");
    if (cancel == true) {
        window.location = "chooseConfig.php";
    } 
```

});

信息：[http ://api.jquery.com/id-selector/](http://api.jquery.com/id-selector/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T17:21:21.227

您的代码很好，但您缺少正确的选择器。它应该是`$('#cancelBc2')`

这将选择 DOM 中具有 id 的元素`cancelBc2`

对于 jQuery 选择器的完整列表，请使用：

[http://www.w3schools.com/jquery/jquery_ref_selectors.asp](http://www.w3schools.com/jquery/jquery_ref_selectors.asp)

# java - 使用 Spring 或单独的库/模式实现数据库访问？

> ID：14609839
> 
> 赞同：0
> 
> 时间：2013-01-30T17:16:23.830
> 
> 标签：java, spring, design-patterns, spring-jdbc

我正在开发一个应用程序，它使用硬编码的 sql 语句从数据库中检索数据，然后将这些数据填充到 pojo 中。正在使用 Spring jdbc 模板，因此无需担心打开/关闭连接。使用硬编码的 sql 语句似乎是错误的？

是否有设计模式或库可以用来抽象 sql 语句？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:07:05.807

使用`JdbcTemplate`，您的应用程序代码仍然有责任提供`sql`，`JdbcTemplate`然后可以执行 SQL 查询或更新，迭代 ResultSets 并捕获 JDBC 异常。如果你想摆脱编写硬编码的 sql 语句，你需要研究一个 ORM 工具`Hibernate`，比如`iBatis`等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T17:22:37.843

看看[MyBatis](http://www.mybatis.org)（以前称为 iBatis）。

*   它让您可以将硬编码的 SQL 提取到 XML 文件（甚至是注释）中，
*   它与 Spring 容器集成，可以使用 Spring Transaction。

还有很多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T17:25:37.207

以下是关于在使用原始 SQL 或 ORM 工具之间进行选择的一些问题的良好讨论：

[Hibernate、iBatis、Java EE 或其他 Java ORM 工具](https://stackoverflow.com/questions/716532/hibernate-ibatis-java-ee-or-other-java-orm-tool)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T18:13:29.413

在 Java 类中使用 SQL 本质上没有任何问题（尽管它有点争议）。如果您想外部化 SQL 查询，您可以：

*   使用非常成熟的[MyBatis](http://blog.mybatis.org/)
*   把 SQL 放到你的`applicationContext.xml`Spring 配置文件中，并注入到 POJO（穷人的 MyBatis）
*   将 SQL 隐藏在 DAO 模式后面（`interface SomeDao`并且`class SqlSomeDao`封装了 SQL）
*   ...如果你已经有 SQL，那么像 JPA 这样的完整 ORM 不是最好的主意

^(还可以查看[Spring Data JDBC generic DAO](https://github.com/nurkiewicz/spring-data-jdbc-repository) - small DAO implementation on top of `JdbcTemplate`and `RowMapper<T>`。免责声明：我是这个库的作者。)

# xcode - 如何编程抓取以在 applescript xcode 中捕获窗口

> ID：14609846
> 
> 赞同：0
> 
> 时间：2013-01-30T17:16:36.717
> 
> 标签：xcode, window, applescript

我需要让应用程序“Grab”在 xcode 3.2 中使用 applescript 捕获一个窗口。这可能是什么脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:29:09.003

我没有在 AppleScript World 中找到任何可直接使用的东西，所以我建议使用`screencapture`- 一个命令行工具 - 并从你的脚本中调用它。`man screencapture`在**Terminal.app**中执行以查看其手册。

旁注：执行 shell 脚本的 AppleScript 命令是`do shell script`（来自“StandardAdditions”）。

（“Grab”不支持 AppleScript）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-12-01T21:54:58.590

以下 applescript 代码将截取屏幕的一部分并将其保存到桌面上的文件中。如上所述，它使用屏幕截图应用程序。

```
set x1 to 0
set x1 to x1 + 1
set thename to "screencapture -x -R20,20,640,380 ~/Desktop/screen_" & x1 & ".png"

tell application "Terminal"

activate

do script thename in window 1

end tell 
```

# tomcat - 多个 tomcats 如何在它们之间共享数据？

> ID：14609855
> 
> 赞同：0
> 
> 时间：2013-01-30T17:17:00.743
> 
> 标签：tomcat

不知道我是否在问一个有效的问题！但突然有了这个疑问，所以试图清除我的疑问。

考虑有 2 个 tomcat 正在运行，当客户端请求 servlet 并且此请求由 tomcatA 处理时，如果另一个依赖于第一个请求的请求由 tomcatB 处理，我想知道 tomcats 如何共享数据他们之间？？第二个请求是否会暂停，直到第一个请求被完全处理？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T17:51:59.720

有很多方法可以做到这一点，你的问题是非常开放的，所以如果它被投票关闭，我不会感到惊讶。同时，我可以想到几种在 Tomcat 实例之间“共享”数据的方法：

1.  [内存缓存](http://memcached.org/)
2.  [JMX](http://en.wikipedia.org/wiki/Java_Message_Service)
3.  古老的关系数据库
4.  手动通知系统直接通过套接字等进行通信。

至于让一个请求“等待”另一个请求完成，这就是事情开始变得危险的地方：您可以轻松地在系统中设计死锁，这可能会在每个请求等待另一个请求时锁定整个集群。

我无法想象这样一个用例，其中多个客户端在完成工作之前正在等待彼此的工作完成，但客户端不会容忍丢失先决条件数据。

# css - 具有精确视觉 div 放置的 Dreamweaver 替代方案？

> ID：14609857
> 
> 赞同：-2
> 
> 时间：2013-01-30T17:17:03.907
> 
> 标签：css, dreamweaver

我主要是一名程序员，虽然我有丰富的 Photoshop 和 Illustrator 经验，以及对 html5 和 CSS 的良好理解，但我从来没有能够使用 Dreamweaver 进行适当的所见即所得拖放网站设计（有点像你可以使用visual studio.net 或eclipse windows builder）。

不明白为什么这么难？CSS div 和图层的放置非常复杂，您必须进行所有这些计算，有时会增加边距，减少边距，div 的类型，也许只有我一个人，但经过数月的头痛后，我转而使用网站构建器例如由 webeden.co.uk 提供的一个（这不是广告，我不隶属于他们，）。我的意思是我想要做的只是拖放几个 div，单击几个按钮，然后它们就可以正常工作，webeden 可以在线完成，而专门为 web 开发设计的软件 dreamweaver 不能。我迫切希望切换回 Dreamweaver，因为它功能强大得多，但做布局是一场噩梦。

只是我，我是否只需要数百小时才能让我所有的 div 和 span 都恰到好处？或者我不适合作为偶尔的网络开发人员？还是adobe因为我离开了dreamweaver而诅咒了我？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T17:28:02.183

对我来说不幸或幸运的是，要拥有良好编码的自定义网站，您需要一个具有编程经验和最新技术知识的人。当然，您可以创建一个 word 文档并将其保存为 html 文件，但是您看过它背后的代码吗？呜呜。但是您作为设计师可能并不关心这一点，开发人员会关心这些，看到您臃肿网站的服务器人员也会如此关心带宽。所以答案是，你不适合做临时开发者，就像开发者不适合做临时设计师一样，不管他们的绘画技巧有多好

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-19T19:53:34.127

In all honesty dreamweaver is bloatware. It costs too much, and a real professional wouldn't touch it.

That being said. The guy talking about crap code and bandwidth is obviously a derp. The code itself on even a large site will not chew up that much bandwidth. The major bandwidth usage in any site will be it's media.. i.e. images, videos, music etc..

In my honest opinion, one only needs notepad to create a decent website.

As for drag-n-drop technology. I have yet to see an implementation of it that is fast, powerful, and complex enough to have the options for what i want to do. That isn't counting what the resulting code would look like.

My suggestion to anyone creating a website, is for them to learn html, and css. There are more powerful languages out there to build sites with, but for a beginner, html, and css are a great foundation. After that if you wish, go on to learn javascript, php, perl, and python.

# javascript - 在苹果设备上运行 Websocket 时网络性能不佳

> ID：14609858
> 
> 赞同：8
> 
> 时间：2013-01-30T17:17:08.340
> 
> 标签：javascript, c++, websocket, boost-asio

我正在研究在移动设备上运行的 HTML/Javascript，它与在 PC 上运行的 Qt/C++ 应用程序进行通信。移动设备和 PC 都在本地网络上。HTML 页面（客户端）和 C++ 应用程序（服务器）之间的通信是使用 Websockets 完成的。

HTML 页面是 C++ 应用程序的远程控制，因此需要在移动设备和 PC 之间建立低延迟连接。

当使用任何非 Apple 设备作为客户端时，数据以 60 到 120 帧/秒之间的速率发送，这是完全可以接受的。使用 Apple 设备时，此速率降至 3-4 帧/秒。我还检查了 ping 时间（Websocket 实现，而不是命令行中的 ping 命令）。只要设备不传输数据，它们对于 Apple 设备是可以接受的（1-5 毫秒）。每当它传输数据时，这个 ping 时间都会增加到 200 毫秒。

从 Javascript 方面来看，Apple 设备始终以 60 帧/秒的一致速率发送数据，就像任何其他设备一样。但是，在服务器端，**当客户端是 Apple 设备时**，这 60 帧中只接收到 3 到 4 帧。

有谁知道会发生什么？

这是我的 Javascript 代码：

```
<script language="javascript" type="text/javascript">

        var wsUri = document.URL.replace("http", "ws");
        var output;
        var websocket;

        function init()
        {
            output = document.getElementById("output");
            wsConnect();
        }

        function wsConnect()
        {
            console.log("Trying connection to " + wsUri);
            try
            {
                output = document.getElementById("output");
                websocket = new WebSocket(wsUri);
                websocket.onopen = function(evt)
                {
                        onOpen(evt)
                };
                websocket.onclose = function(evt)
                {
                        onClose(evt)
                };
                websocket.onmessage = function(evt)
                {
                        onMessage(evt)
                };
                websocket.onerror = function(evt)
                {
                        onError(evt)
                };
            }
            catch (e)
            {
                console.log("Exception " + e.toString());
            }
        }

        function onOpen(evt)
        {
            alert("Connected to " + wsUri);
        }

        function onClose(evt)
        {
            alert("Disconnected");
        }

        function onMessage(evt)
        {
            alert('Received message : ' + evt.data);
        }

        function onError(evt)
        {
            alert("Error : " + evt.toString());
        }

        function doSend(message)
        {
            websocket.send(message);
        }

        window.addEventListener("load", init, false);
</script> 
```

使用 dosend() 函数从 Javascript 端发送数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-10T10:19:49.537

获得更多洞察力的最佳方法是使用[AutobahnTestsuite](http://autobahn.ws/testsuite)。您可以使用该套件测试客户端和服务器，并找出问题所在。

我创建了[QWebSockets](https://github.com/KurtPattyn/QWebSockets/)，一个基于 Qt 的 websockets 实现，并多次使用它来创建服务器。Apple 设备的性能非常出色。

但是，当涉及到大消息时，Safari 似乎存在严重问题（请参阅[https://github.com/KurtPattyn/QWebSockets/wiki/Performance-Tests](https://github.com/KurtPattyn/QWebSockets/wiki/Performance-Tests)）。也许这就是问题所在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T18:49:43.390

很少有想法和建议。

*   检查服务器是否支持客户端的 WebSocket 协议。 [这个](https://stackoverflow.com/a/9957664)问题和答案讨论了不同协议版本是一个问题的情况。
*   WebSocket[标准](https://www.rfc-editor.org/rfc/rfc6455)允许实现任意延迟传输和执行分段。此外，Ping 等控制帧不支持分段，但允许插入。这些允许的行为差异可能会导致时间差异。
*   检查[`bufferedAmount`](http://www.w3.org/TR/websockets/#dom-websocket-bufferedamount)WebSocket 上的属性是否确定 WebSocket 是否正在缓冲数据。如果`bufferedAmount`属性通常为零，则数据已传递给操作系统，操作系统可能会根据操作系统或套接字配置（例如[Nagle](http://en.wikipedia.org/wiki/Nagle%27s_algorithm) ）对其进行缓冲。
*   [这个](https://stackoverflow.com/questions/13373519)问题和答案提到通过让服务器为每条消息发送确认来解决延迟。
*   为了更深入地了解交互，执行数据包跟踪可能很有用。 [Mac 开发人员库中的此](http://developer.apple.com/library/mac/#qa/qa1176/_index.html)技术问答可能会提供一些有关如何完成此操作的资源。

# syntax - 语法错误，意外的 T_OBJECT_OPERATOR

> ID：14609860
> 
> 赞同：0
> 
> 时间：2013-01-30T17:17:12.707
> 
> 标签：syntax, mysqli

在 php 和 mysql/mysqli 方面，我是个新手。我有这段代码，我得到一个 PHP Parse 错误：语法错误，第 17 行 /home/byeroman/public_html/register.php 中的意外 T_OBJECT_OPERATOR。这是代码：

```
$stmt = mysqli->prepare("SELECT COUNT(*) FROM users WHERE username=? LIMIT 1" or die($db->error()));
        $stmt->bind_param("s", $username);
    $stmt->execute();
    $stmt->store_result();
        $count=$stmt->num_rows;
        $stmt->close();
        if($count>0) exit(); 
```

怎么了？多谢你们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:32:46.567

这是愚蠢的语法问题，您只是忘记了右括号。
为了减少这样的事情发生并且使您的代码可读，请将您的语句分成单独的行：

```
$sql  = "SELECT COUNT(*) FROM users WHERE username=? LIMIT 1";
$stmt = $mysqli->prepare($sql) or trigger_error($mysqli->error())); 
```

您还需要确定您正在使用哪个变量（$mysqli 或 $db）
此外，`num_rows()`使用的函数是错误的，您需要使用常规函数`fetch`。

顺便说一下，考虑使用一些数据库抽象库。它可以让你的生活更轻松，代码更短，就像这样（它取代了你所有的代码，请注意）：

```
$num = $db->getOne("SELECT COUNT(*) FROM users WHERE username=?",$username);
if($num) { ... 
```

# javascript - Errors with Javascript preloader and load() command

> ID：14609862
> 
> 赞同：0
> 
> 时间：2013-01-30T17:17:16.170
> 
> 标签：javascript, javascript-events

I am scripting some buttons whose onclick command loads an external html file and changes the src of an image. However, upon opening the .html file in a browser I'm met with all of my javascript code showing in plain-jane ASCII, clearly unexecuted! :(

*EDIT* Fixed the problem with the "script type" command. Now, It seems as though the script itself is not executing at all. Any suggestions about what may be going wrong?

Here's the code:

```
<script='javascript'>

/*image preloader*/

incompanyImage = new Image(); 
incompanyImage.src = " http://us.123rf.com/400wm/400/400/dotshock/dotshock1211/dotshock121100869/16581370-group-of-happy-young-business-people-in-a-meeting-at-office.jpg"; 
/*alt image 1: http://www.123rf.com/photo_16522931_group-of-happy-young-business-people-in-a-meeting-at-office.html */
/*img source: http://www.123rf.com/photo_16581370_group-of-happy-young-business-people-in-a-meeting-at-office.html */

grupoImage = new Image(); 
grupoImage.src = " http://us.123rf.com/400wm/400/400/dotshock/dotshock1209/dotshock120901786/15403105-business-people-team-group-on-a-meeting-have-success-and-make-deal.jpg";
/*img source: http://www.123rf.com/photo_15403105_business-people-team-group-on-a-meeting-have-success-and-make-deal.html */
/*alt images */

particularImage = new Image(); 
particularImage.src = "http://us.123rf.com/400wm/400/400/auremar/auremar1210/auremar121001327/15672624-concerned-business-associates.jpg";
/*img source: http://www.123rf.com/photo_15672624_concerned-business-associates.html */
/*alt images  */

intensivoImage = new Image();
intensivoImage.src = "http://us.123rf.com/400wm/400/400/dotshock/dotshock1211/dotshock121100861/16581384-group-of-happy-young-business-people-in-a-meeting-at-office.jpg";
/*img source male:  http://www.123rf.com/photo_16580996_portrait-of-a-handsome-young-business-man-on-a-meeting-in-offce-with-colleagues-in-background.html */
/*img source female:  http://www.123rf.com/photo_16581362_business-woman-with-her-staff--people-group-in-background-at-modern-bright-office-indoors.html */

tecnicoImage = new Image();
tecnicoImage.src = "http://us.123rf.com/400wm/400/400/dotshock/dotshock1211/dotshock121100861/16581384-group-of-happy-young-business-people-in-a-meeting-at-office.jpg";
/*img source : http://www.123rf.com/photo_16581384_group-of-happy-young-business-people-in-a-meeting-at-office.html */
/*alt image: */

entrevistaImage = new Image();
entrevistaImage.src = "http://us.123rf.com/400wm/400/400/dotshock/dotshock1211/dotshock121100912/16581362-business-woman-with-her-staff--people-group-in-background-at-modern-bright-office-indoors.jpg";
/* img source: http://www.123rf.com/photo_16581362_business-woman-with-her-staff--people-group-in-background-at-modern-bright-office-indoors.html */
/* alt image (better): http://www.123rf.com/photo_16523034_group-of-happy-young-business-people-in-a-meeting-at-office.html */
/*http://www.123rf.com/photo_16523034_group-of-happy-young-business-people-in-a-meeting-at-office.html */

palestraImage = new Image();
palestraImage.src = "http://us.123rf.com/400wm/400/400/dotshock/dotshock1204/dotshock120400224/13112547-young-male-business-man-giving-a-presentation-at-a-meeting-seminar-at-modern-conference-room-on-a-ta.jpg";  
/*img source: http://www.123rf.com/photo_13112547_young-male-business-man-giving-a-presentation-at-a-meeting-seminar-at-modern-conference-room-on-a-ta.html */

/*these are the buttons for types of english classes offered*/
functon buttonInCompany()
{
$('#desc').load('incompany.html');
document.images["midimg"].src = incompanyImage.src;
}

functon buttonGrupo()
{
$('#desc').load('grupo.html');
document.images["midimg"].src = grupoImage.src;
}

functon buttonParticular()
{
$('#desc').load('particular.html');
document.images["midimg"].src = particularImage.src;
}

functon buttonIntensivo()
{
$('#desc').load('intensivo.html');
document.images["midimg"].src = intensivoImage.src;
}

function buttonEntrevista()
{
$('desc').load('entrevista.html');
document.images["midimg"].src = entrevista.html;    
}    

functon buttonTecnico()
{
$('#desc').load('tecnico.html');
document.images["midimg"].src = tecnicoImage.src;
}

function buttonPalestra()
{
$('#desc').load('palestra.html');
document.images["midimg"].src = palestraImage.src;
}

</script> 
```

Now comes the HTML.

```
<div>
    <p style="text-align: center;"><img name="midimg" width="233" height="350"  class="art-lightbox" src="images/Fotolia_5170186_X-01.jpg"><br></p>
</div>
<div>
    <p class="desc" name="desc">hasdf</p>
</div>
  <div class="art-button" onClick:"buttonParticular()">Aulas Particulares</div>
  <div class="art-button" onClick:"buttonGrupo()">Aulas em Grupo</div>
  <div class="art-button" onClick:"buttonInCompany()">Aulas in-Company</div>
  <div class="art-button" onClick:"buttonIntensivo()">Aulas Intensivos</div>
  <div class="art-button" onClick:"buttonEntrevista()">Aulas para Entrevista</div>
  <div class="art-button" onClick:"buttonTecnico()"> Aulas sobre sua Area</div>
  <div class="art-button" onClick:"buttonPalestra()">Palestras</div> 
```

What am I doing wrong?

Thanks in Advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:31:30.637

The problem (as others have commented, but not posted as answers) is your opening `<script='javascript'>`. You're looking for:

```
<script type='text/javascript'> 
```

also: some of your `function` declarations are misspelled 'functon'

and you should follow the `onclick` with an `=` instead of a `:`

```
<div onclick="..."> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T17:31:24.127

Simply change `<script='javascript'>` to `<script type='javascript'>`. Because of no space after `script` browse get a tag called `script='javascript'` (which is not familiar to it) instead of `script`

Also:

```
<div class="art-button" onClick:"buttonParticular()">Aulas Particulares</div> 
```

should be

```
<div class="art-button" onClick="buttonParticular()">Aulas Particulares</div> 
```

In html, you should place `=` between attribute name (`onclick` in your case) and value (`"buttonParticular()"`)

# sql - Rails，按匹配标签数量排序，然后按名称排序

> ID：14609866
> 
> 赞同：0
> 
> 时间：2013-01-30T17:17:25.080
> 
> 标签：sql, ruby-on-rails, ruby-on-rails-3, has-many-through, sql-order-by

这就是我想做的：与through`Listing`建立多对多关系。我想允许用户通过（列表）和（零个或多个标签）搜索列表。我想首先按匹配标签数量最多的列表排序结果数量，然后按标题排序。`Tag``Taggings``title``name`

似乎这个问题以前已经做过了——它可能就像从 MySQL中匹配这个问题（ [Ordering items with matching tags by number of tags that match ）一样简单。](https://stackoverflow.com/questions/3783923/ordering-items-with-matching-tags-by-number-of-tags-that-match)但是，我根本不懂 SQL，这就是我寻求帮助的原因。

**更新：** 这是我想要的一个例子。

假设我有 3 个列表。

`listing1`有标签“幽默”、“搞笑”和“搞笑”。

`listing2`= 2 有标签“有趣”、“愚蠢”和“愚蠢”。

`listing3`= 3 有标签“有趣”、“愚蠢”和“愚蠢”。

`listing4`= 4 有标签“完全严重”。

如果我使用标签“有趣”和“愚蠢”进行搜索，我应该得到的是列表 2、列表 3、列表 1 和列表 4（暂时忽略标题）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T00:16:03.497

有趣的问题。我认为您可能必须使用一些 SQL 糖来执行此范围。

像这样的东西：

```
Listing
  .joins("LEFT JOIN taggings ON taggings.listing_id = listings.id")
  .joins('LEFT JOIN tags ON tags.id = taggings.tag_id AND tags.name IN ("funny","silly")')
  .group(:id)
  .order("count(tags.id), name DESC") 
```

这有帮助吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T17:55:12.393

假设您想要一个纯 ActiveRecord 的解决方案，以免触及任何 SQL ......

```
Listing.order("tags.count DESC, title") 
```

在这种情况下，您最好使用[计数器缓存](http://railscasts.com/episodes/23-counter-cache-column)来优化您的查询。

# xpages - XPages 自定义验证器

> ID：14609867
> 
> 赞同：0
> 
> 时间：2013-01-30T17:17:26.803
> 
> 标签：xpages

最终我需要做一些跨领域验证，并认为我会使用自定义验证器来做到这一点。但我什至无法得到一个简单的例子来工作。以下代码（与“Mastering XPages”第 116 页上的代码非常相似，允许任何值（包括空字段）。我是否遗漏了一些明显的东西？

```
 <xp:inputText
                id="field1"
                value="#{document1.field1}">
                <xp:this.validators>
                    <xp:customValidator>
                        <xp:this.validate><![CDATA[#{javascript:if (value == "") {
return new javax.faces.application.FacesMessage("Please enter a value");
}}]]></xp:this.validate>
                    </xp:customValidator>
                </xp:this.validators>
            </xp:inputText> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-31T08:28:55.507

无法使用验证器验证空字段。验证器仅在值存在时运行。在 XPages 中，您拥有允许检查空字段的字段的*必需属性；*这是解决此问题的一种解决方法，并且（据我所知）无法创建自己的“必需”验证器。

如果您想创建自己的，则必须创建一个转换器

**更新 21.06.2013**

可以通过一个小解决方法创建自己*需要的验证器：* [http ://hasselba.ch/blog/?p=764](http://hasselba.ch/blog/?p=764)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T21:24:16.163

您需要返回一个包含错误消息的字符串 - 而不是 FacesMessage 对象。

因此，在您的情况下，请改为执行以下操作：

```
<xp:inputText id="field1" value="#{document1.field1}">
    <xp:this.validators>
        <xp:customValidator>
            <xp:this.validate><![CDATA[#{javascript:
                if (value == "") {
                    return "Please enter a value";
                }
            }]]></xp:this.validate>
        </xp:customValidator>
    </xp:this.validators>
</xp:inputText> 
```

# html - 为什么这个下拉菜单中的文本在 Firefox 中不是垂直居中的？

> ID：14609868
> 
> 赞同：4
> 
> 时间：2013-01-30T17:17:28.960
> 
> 标签：html, css, firefox

> **可能重复：**
> [我想在选择框中垂直对齐文本](https://stackoverflow.com/questions/5439782/i-want-to-vertical-align-text-in-select-box)

在这个[小提琴](http://jsfiddle.net/pollo/pYrBs/)中，下拉列表中的文本在 IE 和 Chrome 中垂直居中......但在 Firefox 中不是垂直顶部对齐的。如何在不干扰其他浏览器的情况下将其置于 Firefox 中？

## HTML

```
<select>
    <option value="One" selected="selected">Test text one</option>
    <option value="Two">Test text two</option>
    <option value="Three">Test text three</option>
    <option value="Four">Test text four</option>
</select> 
```

## CSS

```
select {
    height: 30px;
    width: 260px;
    border: 1px solid #A9A3A3;
    font-family: Verdana,Geneva,sans-serif;
    font-size: 11px;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T16:06:31.900

处理此问题的最佳方法不是为选择分配高度，而是添加填充以匹配其他元素的高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T17:21:40.103

问题在于小提琴。他们的 iframe 将只有最小的必要大小（至少在 Firefox 中）。尝试类似的东西

```
div {
    height: 10em;
    display: table-cell;
    vertical-align: middle;
} 
```

并`<div>`在您的`<select>`. 在实际场景中，您可能想要使用`height: 100%`绝对定位或只是修改包含您选择的任何标签的属性。

* * *

* * *

一开始误读了你的问题，这里是*水平*对齐的答案

```
body {
    text-align: center;
} 
```

（或上面的任何标签`<select>`）

* * *

或者添加以下内容

```
margin-left:auto;
margin-right:auto; 
```

但总的来说，最好为 设置一些值`body`以避免跨浏览器的差异（例如填充、边距和文本对齐）。

# c++ - 6“错误LNK2019：无法解析的外部符号”

> ID：14609871
> 
> 赞同：0
> 
> 时间：2013-01-30T17:17:33.510
> 
> 标签：c++, linker-errors, game-engine, sfml, unresolved-external

我有 6 个未解决的外部问题。我知道这意味着什么，但我不知道如何解决它。

碰撞.cpp

```
#include "Collision.h"

void Collision::Collide(Entity &entity1, Entity &entity2)
{
    if(entity1.getX() + entity1.getWidth() > entity2.getX() ||
        entity1.getX() < entity2.getX() + entity2.getWidth() ||
        entity1.getY() + entity1.getHeight() > entity2.getY() ||
        entity1.getY() < entity2.getY() + entity2.getHeight())
    {
        entity1.setX(entity1.getX());
        entity1.setY(entity1.getY());

    }
} 
```

碰撞.h

```
#ifndef COLLISION_H
#define COLLISION_H

#include "Map.h"
#include "Animation.h"
#include "Entity.h"

class Collision
{
public:
    void Collide(Entity &entity1, Entity &entity2);
protected:
    Map map;
};

#endif 
```

碰撞被称为

```
collision.Collide(player, enemy); 
```

实体.h

```
#ifndef Entity_H
#define Entity_H

#include<SFML/Graphics.hpp>
#include"Animation.h"
#include"Camera.h"

class Entity
{
    public:

        void Initialize();
        void LoadContent();
        void Update(sf::RenderWindow &Window);
        void Draw(sf::RenderWindow &window);
        void setX(float newX);
        void setY(float newY);
        int getHeight();
        int getWidth();
        float getX();
        float getY();
    private:
        Camera camera;
        float x, y;
        int currentFrameX, currentFrameY;
        sf::Clock clock;
};

#endif // Entity_H 
```

未解决的外部

```
1>Collision.obj : error LNK2019: unresolved external symbol "public: void __thiscall Entity::setX(float)" (?setX@Entity@@QAEXM@Z) referenced in function "public: void __thiscall Collision::Collide(class Entity &,class Entity &)" (?Collide@Collision@@QAEXAAVEntity@@0@Z)
1>Collision.obj : error LNK2019: unresolved external symbol "public: void __thiscall Entity::setY(float)" (?setY@Entity@@QAEXM@Z) referenced in function "public: void __thiscall Collision::Collide(class Entity &,class Entity &)" (?Collide@Collision@@QAEXAAVEntity@@0@Z)
1>Collision.obj : error LNK2019: unresolved external symbol "public: int __thiscall Entity::getHeight(void)" (?getHeight@Entity@@QAEHXZ) referenced in function "public: void __thiscall Collision::Collide(class Entity &,class Entity &)" (?Collide@Collision@@QAEXAAVEntity@@0@Z)
1>Collision.obj : error LNK2019: unresolved external symbol "public: int __thiscall Entity::getWidth(void)" (?getWidth@Entity@@QAEHXZ) referenced in function "public: void __thiscall Collision::Collide(class Entity &,class Entity &)" (?Collide@Collision@@QAEXAAVEntity@@0@Z)
1>Collision.obj : error LNK2019: unresolved external symbol "public: float __thiscall Entity::getX(void)" (?getX@Entity@@QAEMXZ) referenced in function "public: void __thiscall Collision::Collide(class Entity &,class Entity &)" (?Collide@Collision@@QAEXAAVEntity@@0@Z)
1>Collision.obj : error LNK2019: unresolved external symbol "public: float __thiscall Entity::getY(void)" (?getY@Entity@@QAEMXZ) referenced in function "public: void __thiscall Collision::Collide(class Entity &,class Entity &)" (?Collide@Collision@@QAEXAAVEntity@@0@Z) 
```

我认为没有正确重载 Player/Enemy 类中的 Entity getX() 等是一个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:24:16.080

事实证明，`Entity.cpp`我的项目中没有包含它。

谢谢克里斯和西蒙克！

# android - 从 Sqlite 检索数据并存储到 CSV 文件中

> ID：14609873
> 
> 赞同：4
> 
> 时间：2013-01-30T17:17:40.023
> 
> 标签：android, csv

我试图从数据库中返回数据并将其保存在 SD 卡中的 CSV 文件中，并附加文件并通过电子邮件发送，这一切都很完美，数据在 Excel 上应该是这样的。

**例子**

A栏............ B栏

123123232.......约翰

964803400........史密斯

657484738........迈克

我的问题是当我打开 Excel 时，数据显示如下

A栏............ B栏

123123232.......

964803400.......

657484738.......

约翰

史密斯

麦克风

这是代码**Names.Java**

```
dbUser.open();

                File root=null;     
             try {  
                    // check for SDcard   
                    root = Environment.getExternalStorageDirectory();                   
                    Log.i(TAG,"path.." +root.getAbsolutePath());  

                    //check sdcard permission  
                    if (root.canWrite()){  
                        File fileDir = new File(root.getAbsolutePath()+"/fun/");  
                        fileDir.mkdirs();  

                        Log.d("PATH",fileDir.toString());

                        File file= new File(fileDir, "itisfun.csv");  
                        FileWriter filewriter = new FileWriter(file);  
                        BufferedWriter out = new BufferedWriter(filewriter); 
                        String[] div = dbUser.getVname_Mnumber(sharedUsername1,product).toString().split(",");

                        Log.d(sharedUsername1, product);

                        Log.d("VVVVVVVVVV", dbUser.getVname_Mnumber(sharedUsername1,product).toString());

                        for (int i =0; i<div.length;i++)
                        out.write( div[i] +"\n" );

                        out.close();  
                    }  
                } catch (IOException e) {  
                    Log.e("ERROR:---", "Could not write file to SDCard" + e.getMessage());  
                } 
```

这是我的**数据库适配器**

```
public String getVname_Mnumber(String date , String Vname) throws SQLException {    

    String[] whereArgs = new String[]{date,Vname}; 

    Cursor mcursor = db.rawQuery("SELECT MeterNumber,VendorName FROM " + SCAN_TABLE + " WHERE  Date = ? AND VendorName = ? ",whereArgs);

    ArrayList<String> results = new ArrayList<String>();
    ArrayList<String> results1 = new ArrayList<String>();
    while (mcursor.moveToNext()) {
        results.add(mcursor.getString(0));
        results1.add(mcursor.getString(1));
    }

    return results + ","+ results1;

} 
```

将感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T17:33:37.177

您基本上是在创建两个 ArrayList - 第一个仅包含来自 Cursor 的第 0 列，第二个仅包含第 1 列。然后您返回所有第 0 列的结果，后跟一个“，”，然后是第 1 列的所有结果。

尝试`StringBuilder`整个事情。例子...

```
StringBuilder sb = new StringBuilder();
while (mcursor.moveToNext()) {
    sb.append(mcursor.getString(0) + "," + mcursor.getString(1) + "\n");
}
return sb.toString(); 
```

# powershell - PowerShell：开始作业，接收作业：无返回值

> ID：14609875
> 
> 赞同：1
> 
> 时间：2013-01-30T17:17:43.373
> 
> 标签：powershell, custom-object, start-job

好的，这是我的脚本

```
$server=@("SERVER1","SERVER2")
$A=@()

foreach($srv in $server){
    start-job -scriptblock {Get-AppHangs $srv}}

while (Get-Job -State "Running"){}

foreach($JB in Get-Job){$A+=Receive-Job $JB}

Remove-Job *

$A|Out-GridView

function Get-AppHangs($srv){
    $A=@()
    $XX=Get-EventLog -ComputerName $srv -LogName "application" | Where-Object {$_.InstanceID -ge 1000 -and $_.InstanceID -lt 1005} | select -First 5

    foreach($x in $XX){
        $time = $_.Time.ToString()
        $obj=New-Object PSObject
        $obj|Add-Member -MemberType "NoteProperty" -Name Server -Value $srv
        $obj|Add-Member -MemberType "NoteProperty" -Name Index -Value $x.Index
        $obj|Add-Member -MemberType "NoteProperty" -Name Time -Value $x.Time -SecondValue System.string
        $obj|Add-Member -MemberType "NoteProperty" -Name EntryType -Value $x.EntryType
        $obj|Add-Member -MemberType "NoteProperty" -Name Source -Value $x.Source
        $obj|Add-Member -MemberType "NoteProperty" -Name InstanceID -Value $x.InstanceID
        $obj|Add-Member -MemberType "NoteProperty" -Name Message -Value $x.Message
        $A+=$obj
    }
    $obj3=New-Object PSObject
    $A+=$obj3
    return $A
} 
```

我的问题是我期望 $A|Out-GridView 行能产生一些有意义的东西。但gridview甚至没有弹出。

所以如果我低头看这个剧本，我看不到任何刺眼的东西，但我希望有一双新的眼睛可以回顾......

此脚本的目的是能够在事件查看器中找到一组服务器的所有应用程序挂起 ID，并显示在一个漂亮的网格视图中......

如果我切断了开始工作和接受工作的业务，我可以看到网格视图，但我想让它运行得更快、更高效。

heeeeelp ;) 提前致谢！此外，我不知道如何将 Time 属性放入我的自定义对象中……如果您对此有提示，那也很棒。

更新脚本：

```
 $server=@("SERVER1","SERVER2")
    $A=@()

    foreach($srv in $server)
    {
        start-job -scriptblock {
                                $A=@()
                                $XX=Get-EventLog -ComputerName $srv -LogName "application" | Where-Object {$_.InstanceID -ge 1000 -and $_.InstanceID -lt 1005} | select -First 5

                                foreach($x in $XX){
                                    $obj=New-Object PSObject
                                    $obj|Add-Member -MemberType "NoteProperty" -Name Server -Value $srv
                                    $obj|Add-Member -MemberType "NoteProperty" -Name Index -Value $x.Index
                                    $obj|Add-Member -MemberType "NoteProperty" -Name EntryType -Value $x.EntryType
                                    $obj|Add-Member -MemberType "NoteProperty" -Name Source -Value $x.Source
                                    $obj|Add-Member -MemberType "NoteProperty" -Name InstanceID -Value $x.InstanceID
                                    $obj|Add-Member -MemberType "NoteProperty" -Name Message -Value $x.Message
                                    $A+=$obj}

                                $obj3=New-Object PSObject
                                $A+=$obj3

                                return $A
                                }
    }
    while (Get-Job -State "Running"){}
    foreach($JB in Get-Job){$A+=Receive-Job $JB}
    Remove-Job *
    $A|Out-GridView 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T18:09:39.093

您必须传入服务器参数。该作业在单独的进程中运行，`$srv`如果您不将其作为参数传递，则无法访问您的字符串。在 PS3.0 中，您可以使用“使用”范围（例如`$using:srv`），但在 PS2.0 中，您需要在脚本块`param(..)`中使用并`-Argumentlist`发送对象。试试这个：

```
$server=@("SERVER1","SERVER2")

foreach($srv in $server)
{
    Start-Job -scriptblock {
        param($serv)
        $out=@()
        $XX=Get-EventLog -ComputerName $serv -LogName "application" | Where-Object {$_.InstanceID -ge 1000 -and $_.InstanceID -lt 1005} | select -First 5

        foreach($x in $XX){
            $obj=New-Object PSObject
            $obj|Add-Member -MemberType "NoteProperty" -Name Server -Value $srv
            $obj|Add-Member -MemberType "NoteProperty" -Name Index -Value $x.Index
            $obj|Add-Member -MemberType "NoteProperty" -Name EntryType -Value $x.EntryType
            $obj|Add-Member -MemberType "NoteProperty" -Name Source -Value $x.Source
            $obj|Add-Member -MemberType "NoteProperty" -Name InstanceID -Value $x.InstanceID
            $obj|Add-Member -MemberType "NoteProperty" -Name Message -Value $x.Message
            $out += $obj
        }
        $out
    } -ArgumentList $srv
}

$A = Get-Job | Wait-Job | Receive-Job
$A | Out-GridView 
```

如果您想排除 runspaceid（start-job 添加的属性之一以指定创建对象的位置），请尝试以下操作：

```
$A | Select-Object -Property * -ExcludeProperty RunspaceID | Out-GridView 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T17:38:53.243

我相信您的问题出在您执行的脚本块中。“{Get-AppHangs $srv}}”仅包含 Get-AppHangs 及其参数，除非该函数在脚本块中提供，否则它不会执行 - 据我所知。尝试在脚本块中包含您的函数并报告结果。

# objective-c - Objective-C中实体组件模式的可用框架？

> ID：14609876
> 
> 赞同：0
> 
> 时间：2013-01-30T17:17:44.933
> 
> 标签：objective-c

我正在尝试找出支持实体组件模式的objective-c 框架。我查看了 Cocos2d、Kobold2d、KoboldTouch.. 但它们似乎都与此无关。如果objective-c有任何可用的框架，任何人都可以指导我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T20:19:23.293

您可以手动将实体组件模式添加到 cocos2d/etc，尽管它没有直接内置到 API 中。

1.  在实体中使用`-addChild:`(et al) 添加组件。
2.  在组件中使用`-parent`以访问其实体。
3.  在组件中使用`-update:`以更新其实体。

**SomeCCNodeEntity.m**

```
- (id)init {
    if (self = [super init])
    {
        [self addChild:[MoveComponent node]];
    }
    return self;
} 
```

**移动组件.m**

```
CGPoint velocity;

- (id)init {
    if (self = [super init])
    {
        velocity = CGPointMake(0, -50);
        [self scheduleUpdate];
    }
    return self;
}

- (void)update:(ccTime)delta {
    [[self parent] setPosition:ccpAdd([[self parent] position], ccpMult(velocity, delta))];
} 
```

每当调用组件的 -update: 方法时，上面的代码都会移动实体。[这在 Learn-Cocos2d: Prefer Composition over Inheritance](http://www.learn-cocos2d.com/2010/06/prefer-composition-inheritance/)上有所介绍

至于不同实体之间的消息传递系统，您还必须自己推出。Apple 的 API 使用委托、通知和观察者的想法来告诉其他对象。只有一个对象可以成为委托，为另一个对象执行可选或必需的任务。多个对象可以注册通知，或成为观察者。

这会很快变得复杂，特别是如果你有 10 个对象注册为观察者，并且它们接收观察消息的顺序很重要。他们是否应该根据注册的顺序（例如 FIFO 或 LIFO）来获取消息？更复杂的东西？ETC...

# javascript - 通过浏览器设置元素的高度而不切断内容

> ID：14609878
> 
> 赞同：0
> 
> 时间：2013-01-30T17:17:48.040
> 
> 标签：javascript, jquery, html, css

我能够通过很棒的浏览器确定它（下面的链接），但现在唯一的问题是在较小的屏幕上查看它时会切断内容，并且在浏览器代理打开的情况下刷新谷歌浏览器中的页面时它会切断为此也是如此。

如何在不切断内容的情况下让背景适合浏览器。

--link -->[如何获得与浏览器分辨率相同高度的元素？](https://stackoverflow.com/questions/14486395/how-to-get-an-element-the-same-height-as-browser-resolution)

```
<script type="text/javascript"> 
$(document).ready(function() { 
var height = window.innerHeight; 
$(".bg").css("height", height); }); 
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T17:22:33.807

您可以计算窗口的高度和宽度，而不是使用这些值操作元素：

[**这是工作的jsFiddle。**](http://jsfiddle.net/P97xg/6/)

```
var background = $('.wrapper');
function arrange() {
    var windowH = $(window).height();
    var windowW = $(window).width();
    background.css({'height':windowH+'px','width':windowW+'px','background-size':windowW+'px '+windowH+'px'});
}
arrange(); //for setting sizes on load

$(window).resize(function() {arrange();}); //setting size on window resize 
```

# excel - VBA Vlookup 总是返回 #N/A

> ID：14609885
> 
> 赞同：0
> 
> 时间：2013-01-30T17:18:04.187
> 
> 标签：excel, vba

我有两个单独的数据工作簿。我正在尝试使用 vlookup 查找单元格值匹配项。

工作簿 1 中的列包含字母数字数据，与工作簿 2 中的列进行比较也是如此。

我有以下代码来尝试确定匹配项：

```
 Sub VirtualHostLookUp()

    'TO DO: iterate through all required workbooks and do lookup

    'open the workbook of interest
    'Workbooks.Open ("C:\Documents and Settings\1147808\My Documents\Pete\Data\tester.xlsx")

    'define this workbook
    Dim campus As Workbook
    Set campus = Workbooks(1)

    'define the lookup range - currently opens the first second open workbook
    Dim rng As range
    If Workbooks.Count > 1 Then
        With Workbooks(2)
            Set rng = .Worksheets(2).UsedRange
        End With
    End If

    'initialise starting point
    Dim currRow, currCol As Integer
    currRow = 3
    currCol = 19

    'get first value to compare
    Dim currVal As Variant
    currVal = Cells(currRow, currCol).Value

    'find the number of rows in the column
    Dim totalRows As Long
    With campus.Worksheets(1)
        totalRows = .Cells(.Rows.Count, "S").End(xlUp).Row
    End With

    campus.Activate

    'iterate through the rows
    For i = currRow To totalRows

        Dim cell As Variant
        Set cell = campus.Worksheets(1).Cells(currRow, currCol + 2)

        If currVal <> Empty Then
            cell.Value = Application.VLookup(currVal, rng, 2, False)

            If Not IsError(cell.Value) Then
                If cell.Value = Empty Then
                    cell.Value = "MATCH"
                End If
            End If
        End If

        'cell.Value = ""

        currRow = currRow + 1
        currVal = Cells(currRow, currCol).Value
    Next 
End Sub 
```

我知道两列之间存在匹配，但总是返回值“#N/A”，我不知道为什么？

我已将范围定义为 Workbook2 中的 UsedRange，这可以正常工作并返回正确的值。要匹配的数据在工作簿 2 的第 2 列中。

我究竟做错了什么？！？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:25:38.993

尝试这个：

```
For i = currRow To totalRows

    Dim cell As Variant
    Set cell = campus.Worksheets(1).Cells(currRow, currCol + 2)

    currVal=cell.Value

    If currVal <> Empty Then
        cell.Value = Application.VLookup(currVal, Workbooks(2).Sheets(2).UsedRange, 2, False)

        If Not IsError(cell.Value) Then
            If cell.Value = Empty Then
                cell.Value = "MATCH"
            End If
        End If
    End If

    currRow = currRow + 1
    currVal = Cells(currRow, currCol).Value
Next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T17:28:03.967

`currVal`未初始化，您需要在开始使用它之前为其分配正确的值。

# python - 如何测试 LoopingCall()？

> ID：14609888
> 
> 赞同：3
> 
> 时间：2013-01-30T17:18:22.047
> 
> 标签：python, twisted, trial

在我的代码中，我`task.LoopingCall()`习惯每秒运行一些延迟函数。我想确保该函数为一定数量的事物返回正确的值。所以，我想我可以使用 a`task.clock()`并调用`advance()`它的方法。但是，我没有得到正确数量的预期响应。

知道我做错了什么吗？

这是一个测试代码来说明我的意思。首先是服务器：

```
from twisted.internet.protocol import Factory
from twisted.protocols.basic import LineReceiver
from twisted.internet import reactor
from twisted.internet import task
import time

class Chat(LineReceiver):

    def __init__(self):
        self.echo = None

    def connectionMade(self):
        self.echo = task.LoopingCall(self.echo_print)
        self.echo.start(1)

    def connectionLost(self, reason='whatever'):
        if self.echo is not None and self.echo.running:
            self.echo.stop()

    def lineReceived(self, line):
        if line == 'stop':
            self.echo.stop()

    def echo_print (self):
        self.sendLine("Echo")

class ChatFactory(Factory):

    def __init__(self):
        pass

    def buildProtocol(self, addr):
        return Chat()

if __name__ == "__main__":
    reactor.listenTCP(8123, ChatFactory())
    reactor.run() 
```

现在是测试用例：

```
from twisted.internet import task, base
from twisted.trial import unittest
from twisted.test import proto_helpers
from chat import ChatFactory

class TestChat (unittest.TestCase):

    def setUp (self):
        self.factory = ChatFactory()
        self.clock = task.Clock()
        self.proto = self.factory.buildProtocol(('127.0.0.1', 0))
        self.tr = proto_helpers.StringTransport()
        self.proto.callLater = self.clock.callLater
        self.proto.makeConnection(self.tr)

    def tearDown (self):
        if self.proto:
            self.proto.connectionLost()

    def test_echo (self):
        self.proto.dataReceived('ook\n')
        seconds_elapsed = 5
        self.clock.advance(seconds_elapsed)
        expected = 'Echo\r\n' * seconds_elapsed
        self.assertEqual(self.tr.value(), expected) 
```

当我对此运行 py.test 时，我得到：

```
E           FailTest: not equal:
E           a = 'Echo\r\n'
E           b = 'Echo\r\nEcho\r\nEcho\r\nEcho\r\nEcho\r\n' 
```

请注意，添加`import time; time.sleep(5)`确实使测试通过。所以，我怀疑问题是`task.clock`没有正确使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T13:48:06.083

我相信我已经找到了问题所在。

1.  `LoopingCall`默认使用reactor。我需要设置它，以便它通过类变量使用我自己的时钟`clock`。请参阅[task.clock](https://twistedmatrix.com/documents/15.1.0/api/twisted.internet.task.Clock.html)类文档。
2.  `self.clock.advance(x)`将时钟设置为 time `x`。它不会通过`(x-1, x-2, ..., now)`，因此应该在这些中间步骤上运行的任何延迟都不会运行。因此，测试中的错误是正确的行为。`self.clock.advance(1)`在从 0 开始并以结束的循环中调用`seconds_elapsed`确实具有预期的效果。

[关于单元测试](http://twistedmatrix.com/documents/15.1.0/core/development/policy/test-standard.html)的 Twisted 部分值得多读几遍，以便您熟悉发生了什么。如果您有更多问题，请查看扭曲的内部单元测试！

# wpf - WPF 中的线程问题

> ID：14609890
> 
> 赞同：2
> 
> 时间：2013-01-30T17:18:41.733
> 
> 标签：wpf, datagrid, observablecollection, dispatcher, background-thread

您不能绑定到 WPF `DataGrid's`Columns 属性，因此解决方法是使用[在此 SO question/answer](https://stackoverflow.com/questions/320089/how-do-i-bind-a-wpf-datagrid-to-a-variable-number-of-columns)中找到的附加属性。我的视图模型公开了一个`ObservableCollection`包含 的`DataGridColumns`，我`DataGrid`通过这个附加属性将它绑定到 。

后台线程负责填充集合，我正在使用`Dispatcher.Invoke`它来执行此操作，我认为这可以避免线程问题。后台线程本身工作正常，但在上面附加的属性代码中引发了异常：

> 调用线程无法访问此对象，因为不同的线程拥有它。

（在`else if`处理 Add 动作的地方，特别是 line `dataGrid.Columns.Add(column);`）。

知道可能出了什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:21:28.720

如果您使用的是 .NET 4.5，最简单的选择是使用[BindingOperations.EnableCollectionSynchronization](http://msdn.microsoft.com/en-us/library/hh198845.aspx)。这允许您直接在后台线程上更新集合，而无需担心绑定中的同步。

否则，您需要确保对集合的所有更改都发生在用户界面线程上。尽管有更优雅的解决方案，例如[The Helper Trinity](http://thehelpertrinity.codeplex.com/)和其他项目中的绑定集合，但使用`Dispatcher.Invoke`应该可以工作（前提是您获得了正确的实例）。`Dispatcher`

# jquery - 使用 requirejs 优化器加载 jquery.mobile.iscrollview

> ID：14609894
> 
> 赞同：1
> 
> 时间：2013-01-30T17:19:01.000
> 
> 标签：jquery, jquery-mobile, requirejs, iscroll

我有一个使用 jquery、jquery mobile 和 requireJS (2.0) 的工作项目。现在我在将 jquery.mobile.iscrollview 集成到 requireJS 世界时遇到了问题。

我的 requirejs 配置如下所示：

```
(function (require) {
    "use strict";
    require.config({
        paths:{
            'angular':'../external-libs/angular-1.0.3',
            'jquery':'../external-libs/jquery-1.7.2',
            'jquery.mobile':'../external-libs/jquery.mobile-1.2.0',
            'adapter': '../external-libs/jquery-mobile-angular-adapter-1.2.0',
            'moment': '../external-libs/moment-1.6.2.min',
            'iscroll': '../external-libs/iscroll',
            'iscrollview': '../external-libs/jquery.mobile.iscrollview'
        },
        shim:{
            'angular':{ deps:['jquery'], exports:'angular' },
            'iscroll':{ deps:['jquery'], exports:'iscroll' },
            'iscrollview':{ deps:['jquery.mobile', 'iscroll'], exports:'iscrollview' }
        }
    });

    require([
        "jquery",
        "jquery.mobile",
        "adapter",
        "moment",
        "iscroll",
        "iscrollview",
        "myApp"
    ], function () {
    //
    });
  }(require)); 
```

这工作得很好，只要 requireJS 优化器没有在生产模式下运行，只有一个大的 JS 文件应该提供给客户端。即使将优化器设置为不优化任何东西（优化：无），它也只是将所有 js 文件连接在一起，它不起作用。

加载网站时的错误消息是

> 未捕获的类型错误：无法读取未定义的属性“ignoreContentEnabled”

它发生在文件“jquery.mobile.iscrollview.js”中，从代码中可以明显看出，在解析文件时 $.mobile 对象尚不可用，因为它仅在 jquery 就绪事件之后创建（我思考）。

知道如何解决这个问题吗？

谢谢！

马可

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T07:53:20.040

现在通过将 jquery.mobile.iscrollview 转换为 AMD 模块，我自己解决了这个问题。像这样：

```
 define(function () {

    function iScrollView($) {
        //here comes the iscrollview code, but without event handler to pagecreate
    }

    jQuery(document).bind("pagecreate", function (e) {
        "use strict";
        iScrollView(jQuery); //this is doing the init stuff that normally happens
                             //when script is loaded, lines after this are the 
                             //original event handler

        var elements = jQuery(e.target).find(":jqmData(iscroll)");
        elements.iscrollview();
    });

    return iScrollView;

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T01:05:46.280

这里的问题可能是加载时间与 jQuery 核心运行时间。（这就是为什么我个人更喜欢 CurlJS。从来没有时间问题）

尽管如此，如果配置系统的笨拙让您失望，请自行控制并明确声明顺序：

```
require.config({
    paths:{
        'angular':'../external-libs/angular-1.0.3',
        'jquery':'../external-libs/jquery-1.7.2',
        'jquery.mobile':'../external-libs/jquery.mobile-1.2.0',
        'adapter': '../external-libs/jquery-mobile-angular-adapter-1.2.0',
        'moment': '../external-libs/moment-1.6.2.min',
        'iscroll': '../external-libs/iscroll',
        'iscrollview': '../external-libs/jquery.mobile.iscrollview'
    }
});

require(["jquery"], function($){
    require(["angular", "jquery.mobile"], function(angular){
        require(["adapter","iscroll"], function(){
            require(["myApp","moment","iscrollview"], function(myApp){
                // do something with
                myApp, $, angular
            })
        })
    })
}) 
```

我不知道“时刻”是什么，所以把它放在最后，因为根据你的垫片结构，它不依赖于任何东西。

# c# - 如何使泛型类在类型上可转换？

> ID：14609901
> 
> 赞同：2
> 
> 时间：2013-01-30T17:19:25.090
> 
> 标签：c#, generics

如果我有一个通用类：

```
class Collection < G >  {
    public G[] stuff
} 
```

我还有另外两个类，其中一个可以转换为另一个（尽管比这更复杂！）

```
class Foo {
    public Foo( int i ) { myInt = i; }
    public int myInt;
}
class Bar {
    public Bar( float f ) { myFloat = f; }
    public float myFloat;
    public static implicit operator Foo( Bar bar ) {
        return new Foo( Math.Ceil(bar.myFloat) );
    }
} 
```

我收集了这两个：

```
Collection < G >  fooCollection = new Collection < Foo > ();
Collection < G >  barCollection = new Collection < Bar > (); 
```

我希望能够做这样的事情：

```
Collection < G > fooCollection2 = barCollection.Convert( typeof(Foo) ); 
```

我该怎么做呢？

***编辑：这是针对 Unity 的，我相信它仍然在 .NET 2.0 上。***

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T17:23:55.237

```
Collection<Foo> fooCollection = new Collection<Foo> { stuff = barCollection.stuff.Select(bar => (Foo)bar).ToArray() }; 
```

如果您愿意，可以向 Collection 添加扩展方法：

```
public static Collection<TResult> Select<TResult, T>(this Collection<T> c, Func<T, TResult> projection)
{
   return new Collection<TResult> { stuff = c.stuff.Select(x => projection(x)).ToArray() };
} 
```

然后你可以这样称呼它：

```
Collection<Foo> fooCollection2 = barCollection.Select(bar => (Foo)bar); 
```

# xcode - xcode 不再显示源代码管理图标

> ID：14609904
> 
> 赞同：1
> 
> 时间：2013-01-30T17:19:35.527
> 
> 标签：xcode, macos, git

这是一个疯狂的...

XCode 不再在项目导航器中显示源代码管理图标。我已经使用 git 一段时间了（更不用说在我目前的项目中成功使用了 3 年）。无论出于何种原因，那些小 M、A、? 等图标都不再出现。更烦人的是版本浏览器现在根本打不开。

你们中是否有人偶然发生了这种情况并想通了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T21:04:21.087

iMac：myAppName 船员 $ git status 致命：参考格式无效：'refs/remotes/origin/master（MBP.home 的冲突副本 2013-01-20）'致命：'git status --porcelain' 在子模块 myAppName/Libraries 中失败/FMDB

子模块中的某些内容已损坏。不知道为什么，但我删除了它并重新克隆了我的回购。现在一切都好。多谢你们。

# jquery - 复选框工作一次，然后停止

> ID：14609905
> 
> 赞同：0
> 
> 时间：2013-01-30T17:19:37.717
> 
> 标签：jquery, checkbox

以下代码的惊人问题：

```
<head>
    <script>
    $(function() {
        $('.select-all').click(function() {
            var isChecked = $(this).is(':checked');
            $(this).closest('section').find('input:checkbox').each(function() {
                $(this).attr('checked', isChecked);
            });
        });
    });
    </script>

</head>
<body>
    <section id="sect_1">
        <input type="checkbox" id="cb_1_1">1.1
        <input type="checkbox" id="cb_1_2">1.2
        <input type="checkbox" id="cb_1_3">1.3
        <input type="checkbox" class="select-all">All
    </section>
    <section id="sect_2">
        <input type="checkbox" id="cb_2_1">2.1
        <input type="checkbox" id="cb_2_2">2.2
        <input type="checkbox" id="cb_2_3">2.3
        <input type="checkbox" class="select-all">All"
    </section>
</body> 
```

1.  单击一个部分的“全部”CB 会检查该部分内的所有其他 CB。正如预期的那样
2.  再次单击某个部分的“所有”CB 将取消选中该部分内的所有其他 CB。正如预期的那样
3.  再次单击某个部分的“全部”CB 不会再检查该部分内的所有 CB。

在 Chrome 和 Firefox 上检查，我可以看到`checked="checked"`属性在每个内部出现和消失，`<input type="checkbox" id="cb_x_x">`但不影响显示的 CB

任何想法？

**编辑**

重要提示：上面的代码确实修改了 DOM。单击后，`.select-all`选中时，父部分中的所有`#cb_x_x`标签都会更新并检查我可以看到的 DOM `<input type="checkbox" id="cb_x_x" checked="checked">`：.

再次单击取消选中`.select-all`，DOM 也更新了：都`#cb_x_x`失去了他们的属性`checked`。

继续点击重新勾选/重新取消勾选，父节内的`.select-all`所有标签仍然更新，属性继续出现/消失在父节内的所有标签上**但**显示不更新：所有CB保持*显示*即使在检查 DOM 时添加/删除了它们的属性，也未选中。`#cb_x_x``checked="checked"``#cb_x_x`**`#cb_x_x`*`checked="checked"`***

 ***此处提供实时代码：http: [//jsbin.com/orehor/3/](http://jsbin.com/orehor/3/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T17:23:25.807

从 jQuery 1.6 开始，用于修改元素属性的`prop`方法应该使用，而不是`attr`，你也不需要`each`方法，jQuery`each`内部调用。

```
$(function() {
   $('.select-all').change(function() {
      $(this).siblings('input[type=checkbox]').prop('checked', this.checked);
      // $(this).closest('section').find('input[type=checkbox]').prop('checked', this.checked);
   });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T08:54:48.910

找到了解决方法：使用 prop() 而不是 attr()。与 JQuery 1.6+ 的向后兼容性被破坏。见[http://api.jquery.com/prop/](http://api.jquery.com/prop/)

```
<script>
$(function() {
    $('.select-all').click(function() {
        $(this).closest('section').find('input:checkbox').prop('checked', $(this).is(':checked'));
    });
});
</script> 
```***

# eclipse - 不完全支持对 test-jar 类型的项目 foo 的依赖。

> ID：14609908
> 
> 赞同：18
> 
> 时间：2013-01-30T17:19:43.013
> 
> 标签：eclipse, maven, m2e

在我的 maven 项目中，我使用了 m2e 不喜欢的 test-jar 类型的依赖项，并给出了以下警告。

> “不完全支持对具有类型 test-jar 的项目 foo 的依赖。可能会出现类路径和/或部署问题。尝试 Maven->禁用工作区”

为什么会出现这个问题，为什么禁用工作区分辨率会解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T09:14:47.103

test-jar 的问题在 Eclipse 中，请参阅[Bug 365419 - Classpath for Integration Test](https://bugs.eclipse.org/bugs/show_bug.cgi?id=365419)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-19T05:21:03.580

我已经尝试使用下面的 hack 使这个警告消失，但是它有一个副作用，即无法从 eclipse 运行测试，因为当运行代码没有正确设置时，eclipse 中的测试的类路径。我在这里发帖是希望有人可以改进这个黑客并使其发挥作用。

在 pom 文件中创建配置文件在 eclipse 中是关闭的，但在 eclipse 之外运行 maven 时会自动打开。

```
<profiles>
        <profile>
            <id>test-jars</id>
            <activation>
                <property>
                    <name>!m2e.version</name>
                </property>
            </activation>
            <dependencies>
                <dependency>
                    <groupId>com.example</groupId>
                    <artifactId>foo</artifactId>
                    <version>${project.version}</version>
                    <type>test-jar</type>
                    <scope>test</scope>
                </dependency>
                <dependency>
                    <groupId>com.example</groupId>
                    <artifactId>bar</artifactId>
                    <version>${project.version}</version>
                    <type>test-jar</type>
                    <scope>test</scope>
                </dependency>
            </dependencies>
        </profile>
    </profiles> 
```

在 eclipse 中定义了 m2e.version 属性，因此 m2e 忽略了 test-jar 依赖项，并且不会生成警告。但是，在命令行上运行 maven 时，配置文件会激活，因为没有 m2e.version 属性，因此警告消失了。

# ios - UIActivityViewController 关闭后的正确方向

> ID：14609911
> 
> 赞同：2
> 
> 时间：2013-01-30T17:19:50.603
> 
> 标签：ios, rotation, orientation, uideviceorientation, uiactivityviewcontroller

我正在从我的控制器展示 UIActivityViewController。我遇到了旋转问题。在选择了一些数据共享选项后，比如说“邮件”，邮件撰写视图控制器就会出现。但是如果我之后旋转设备并关闭邮件控制器，我的 VC 不会旋转到当前方向。我尝试为 UIActivityViewController 设置完成处理程序，如下所示：

1)

```
[activityViewController setCompletionHandler:^(NSString *activityType, BOOL completed){
            [UIViewController attemptRotationToDeviceOrientation];
        }]; 
```

或者

2)

```
[activityViewController setCompletionHandler:^(NSString *activityType, BOOL completed){
        UIInterfaceOrientation currentOrientation = [[UIApplication sharedApplication] statusBarOrientation];
        [self layoutForInterfaceOrientation:currentOrientation];
    }]; 
```

第一个解决方案根本没有帮助。第二种解决方案使导航栏保持不变（高度差 12 点）。

请告知如何处理这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T06:04:45.963

我已经解决了这个问题。首先，我应该说我的 VC 在 MailComposeVC 被关闭后总是旋转为纵向，而不管当前设备方向及其在显示邮件之前的状态如何......并且在 MailComposeVC 开启时自动旋转期间调用的唯一 VC 方法屏幕是`viewWillLayoutSubviews/viewDidLayoutSubviews`。（`willAnimateRotationToInterfaceOrientation`未调用！）因此，如果我的 VC 不可见，我重置导航栏以恢复其高度并调用我的自定义布局方法，如下所示：

```
(void) viewDidLayoutSubviews {
    // HACK: forcing the bars to refresh themselves - this helps to get the shorter version when switching to landscape and the taller one when going back!!!
    if (amIhidden) { 
        [self.navigationController setNavigationBarHidden:YES animated:NO];
        [self.navigationController setNavigationBarHidden:NO animated:NO];
        UIInterfaceOrientation currentOrientation = [[UIApplication sharedApplication] statusBarOrientation];
        [self layoutForInterfaceOrientation:currentOrientation];
    }
} 
```

`amIhidden BOOL`在呈现MailComposeViewController时设置，如下：

```
UIActivityViewController *activityViewController = [[UIActivityViewController alloc]
                                                        initWithActivityItems:@[self]
                                                        applicationActivities:nil];
amIhidden = YES;
[activityViewController setCompletionHandler:^(NSString *activityType, BOOL completed){
        amIhidden = NO;
}];
[self presentViewController:activityViewController animated:YES completion:nil]; 
```

希望我的解决方案对其他人有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-29T21:49:14.620

如果接受的解决方案不适合您（像我一样），我已经回答了类似的问题，这个问题既简单又干净。[Objective c - UIActivityViewController 方向模式](https://stackoverflow.com/questions/14978432/objective-c-uiactivityviewcontroller-orientation-mode/25025492#25025492)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-06T07:45:38.910

我在 Swift 3 中找到了一个解决方案。但我认为它也应该在 Objective-C 中工作。

在`AppDelegate`function`application(_ application: UIApplication, supportedInterfaceOrientationsFor window: UIWindow?) -> UIInterfaceOrientationMask`中，返回特定视图控制器的正确方向。

**棘手的部分是您必须挖掘出您希望方向基于的视图控制器。**就像我的情况一样，什么时候`UIActivityViewController`出现，`window?.currentViewController()`并且`window?.topMostController()`都是`UIActivityViewController`. 因为我`UIActivityViewController`在其他地方使用，所以不能作为线索。然后我查了一下`window?.currentViewController()?.presentingViewController`，发现是一个`UINavigationController`。因为我知道我想要基于的视图控制器是那个的顶视图控制器，所以`UINavigationController`我的解决方案如下：

```
func application(_ application: UIApplication, supportedInterfaceOrientationsFor window: UIWindow?) -> UIInterfaceOrientationMask {

    if window?.currentViewController() is MyLandscapeViewController{
        return [UIInterfaceOrientationMask.landscapeLeft, UIInterfaceOrientationMask.landscapeRight]
    }

    if let presenting = window?.currentViewController()?.presentingViewController{
        if let nav = presenting as? UINavigationController{
            if nav.topViewController is MyLandscapeViewController{
                return [UIInterfaceOrientationMask.landscapeLeft, UIInterfaceOrientationMask.landscapeRight]
            }
        }
    }

    return UIInterfaceOrientationMask.portrait;
} 
```

使用此代码，在显示 MyLandscapeViewController 时选择共享选项后，屏幕不再旋转为纵向而是保持横向。

# c# - 在wpf中将一个整个数据网格的值分配给另一个

> ID：14609920
> 
> 赞同：0
> 
> 时间：2013-01-30T17:20:17.150
> 
> 标签：c#, wpf, datagrid, wpfdatagrid

我是 C# 和 wpf 的新手。现在关于我的问题，我有两个 wpf 窗口，每个窗口都有一个 datagrid 工具。我动态填充datarid的值。我想要做的是，单击一个按钮，我想将当前窗口中的数据网格的值复制到下一个 wpf 窗口中的数据网格。请指导我。

我正在使用参数化构造函数将当前窗口的数据网格传递给下一个窗口。

```
 Bill b = new Bill(dataGrid1);
        this.Close();
        b.Show(); 
```

在 Bill 窗口中，我在构造函数中接收它。

```
 public Bill(DataGrid temp)
    {
        InitializeComponent();
        //have to do something here

    } 
```

现在有了接收到的对象，我需要在当前窗口中填充数据网格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:16:50.310

使用数据表解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T18:06:58.207

你应该能够做类似的事情......

TheOtherGrid.DataSource = temp.DataSource; TheOtherGrid.DataBind;

# c# - 我可以在一行中从 DBNull 转换为 Nullable Bool 吗？

> ID：14609921
> 
> 赞同：16
> 
> 时间：2013-01-30T17:20:22.423
> 
> 标签：c#, type-conversion, nullable

我有一个数据库查询，它将返回`NULL`或返回一个布尔（位）值。

我希望将此值存储`Nullable<bool>`在 C# 中的类型变量中。

我似乎无法找到可接受的显式转换和转换组合，它们以简单的方式执行此操作而不会引发异常。

它可以在一个可读的行中完成吗？

**编辑：**按要求编码

```
private Nullable<bool> IsRestricted;
...//data access
IsRestricted = (bool?)DataBinder.GetPropertyValue(dataObj, "IsRestricted"); 
```

也许

```
IsRestricted = (bool?)(bool)DataBinder.GetPropertyValue(dataObj, "IsRestricted"); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-30T17:31:17.293

假设你有一个数据阅读器博士：

```
bool? tmp = Convert.IsDBNull(dr["dbnullValue"]) ? null: (bool?) dr["dbnullValue"]; 
```

- -添加 - -

或者你可以使用 ?? 如果您不必检查 DBNull 但我不确定编译器会喜欢这个（我现在无法测试）

```
bool? tmp = dr["dbnullValue"] ?? (bool?) dr["dbnullValue"]; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-30T17:21:46.500

你可以写`value as bool?`。如果不是 type ，
这将返回。`null``value``bool`

请注意，[这有点低效](https://stackoverflow.com/q/1583050/34397)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T19:59:39.413

```
 while (reader.Read()) {
    bool? IsRestricted = (reader.IsDBNull(reader.GetOrdinal("IsRestricted"))) ? (null) : ((bool)reader.GetOrdinal("IsRestricted")));
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T20:30:34.227

我使用扩展方法来解决这个问题。

```
var isRestricted = dataRecord.GetNullableValue<bool>("IsRestricted"); 
```

有 GetNullableValue 方法的代码：

```
 public static Nullable<TValue> GetNullableValue<TValue>(
        this IDataRecord record, 
        string name) where TValue : struct
    {
        return record.GetValue<TValue, Nullable<TValue>>(name);
    } 
```

GetValue 方法还有一个简单的代码：

```
 private static TResult GetValue<TValue, TResult>(
        this IDataRecord record,
        string name)
    {
        var result = record[name];
        return !result.Equals(DBNull.Value) ? (TResult)result : default(TResult);
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-12-18T12:58:53.617

您可以执行以下操作

`bool? myNullableBoolean = SqlConvert.ToType<bool?>(reader["myNullableBooleanColumn"]);`

# google-plus - Google+ 没有正确解析页面数据

> ID：14609930
> 
> 赞同：0
> 
> 时间：2013-01-30T17:21:11.497
> 
> 标签：google-plus

我的问题是，当我想在 google+ 上分享我的图片上传网站的 url 时，它没有显示任何图片。网址是这样的：http: [//picstore.eu/k/DSCF0802.jpg](http://picstore.eu/k/DSCF0802.jpg)（它不是广告） g+ 上不显示任何图像。在 facebook 上它的工作......显示的图像没有任何问题。你能帮我看看我遗漏了什么元标记或者出了什么问题吗？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:59:44.227

您需要站点上的 schema.org 元数据，使用[片段工具](https://developers.google.com/+/plugins/snippet/)进行配置。在您的示例中，以下内容可能会修复您的标记：

将以下内容添加到您的标签中：

```
<meta itemprop="name" content="DSCF0802.jpg adatai">
<meta itemprop="description" content="A picstore egy képfeltöltő aminek segítségével megoszthatod a képeidet másokkal">
<meta itemprop="image" content="http://p1.picsto.re/DSCF0802.jpg"> 
```

您也可以将 itemprop / content 值直接添加到 HTML 中，但这是最简单的解决方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T13:12:17.950

我已经修好了。问题是 url 以`something.jpg`google plus 结尾，并且将其识别为某些图像，因此它无法正常工作......现在我已将 url 更改为此，所以我删除了扩展名：http: [//picstore.eu/ k/DSCF0802](http://picstore.eu/k/DSCF0802) 现在好了！

# c# - 在 C# 项目中构建 VisualMicro Arduino 项目

> ID：14609931
> 
> 赞同：1
> 
> 时间：2013-01-30T17:21:18.777
> 
> 标签：c#, c++, visual-studio, arduino

我在 Visual Studio 2012 中使用 C# 构建应用程序。部分要求是将其与 Arduino 板连接。为此，我使用了一个名为[Visual Micro](http://visualmicro.codeplex.com/)的 Visual Studio 插件。

插件只需构建它即可工作，如果连接了草图，[草图就会部署到板上。](http://www.arduino.cc/en/Tutorial/Sketch)我一直在尝试使用 C# 代码本身来构建这个 Arduino 项目，所以一旦我完成了我的应用程序的开发，我就可以通过我的 C# 可执行应用程序将草图部署到板上。可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:25:51.377

你想要_____吗，

1.  编译 C# 代码并烧入 Arduino 板（或）

2.  您正在开发 UI 应用程序以将基于[C](http://en.wikipedia.org/wiki/C_%28programming_language%29) / [C++](http://en.wikipedia.org/wiki/C++)的应用程序部署到板上？

    1.  不可能，因为您无法在 Arduino 板上运行 C# 应用程序（除非该板基于[ARM](http://en.wikipedia.org/wiki/ARM_architecture)控制器并且您在其中托管[.NET CE](http://en.wikipedia.org/wiki/.NET_Compact_Framework)框架。）

    2.  这个有可能。您需要下载和操作一个名为[AVRDUDE](http://www.nongnu.org/avrdude/)的命令行工具，它可以为您解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-01T15:10:39.117

要从使用宏的 Visual Studio 中进行部署，所有 Visual Micro Arduino 命令都可用作宏。

或者，Visual Micro 为每个项目使用一个常量构建文件夹，因此您可以调用 avrdude.exe 来执行编译程序的上传。

# c# - 单击时放大图像 - Windows 窗体

> ID：14609933
> 
> 赞同：0
> 
> 时间：2013-01-30T17:21:23.910
> 
> 标签：c#, .net, winforms

我正在开发一个 Windows 窗体应用程序，如下所示。我想捕获屏幕截图，将它们显示为缩略图存储在图片框中（动态）并将其添加到添加控制按钮上方的 FlowLayoutPanel 中。我已经做到了。

在 FlowLayoutPanel 的顶部，我希望在单击相应的图片框控件时放大并显示缩略图。现在我意识到我不再可以访问动态生成的图片框了。

谁能帮我实现它？

![在此处输入图像描述](../Images/64bfeddf5c4552d5774002a81b0744df.png)

![在此处输入图像描述](../Images/f1e1005ec8a7f5fc0c1107155ff01efd.png)

```
 namespace Snapper
{
    public partial class Main : Form
    {
        static int imgCounter = 0;//keeps track of img for naming
        public Main()
        {
            InitializeComponent();
        }

        private void TestFlowButton_Click(object sender, EventArgs e)
        {            
            CaptureScreen();
        }

        private void CaptureScreen()
        { 
            /*This method captures a snapshot of screen and 
             * adds it to the ImageFlowLayoutPanel
             */             

            Rectangle bounds = Screen.GetBounds(Point.Empty);
            Bitmap bmp = new Bitmap(bounds.Width,bounds.Height);
            Graphics g = Graphics.FromImage(bmp);
            g.CopyFromScreen(Point.Empty, Point.Empty, bounds.Size); 
            imgCounter += 1;
            bmp.Save("snap" + imgCounter.ToString() + ".jpg", ImageFormat.Jpeg);

            //creating a picturebox control and add it to the flowlayoutpanel
            PictureBox tempPictureBox = new PictureBox();                

            //generates a thumbnail image of specified size
            tempPictureBox.Image = bmp.GetThumbnailImage(100,100,
                                   new Image.GetThumbnailImageAbort(ThumbnailCallback),
                                   IntPtr.Zero);
            tempPictureBox.Size = new System.Drawing.Size(100, 100);
            tempPictureBox.Click += new EventHandler(this.tempPictureBox_Click);                             
            ImageFlowLayoutPanel.Controls.Add(tempPictureBox);

        }

        //This click event will be used to display the enlarged images
        private void tempPictureBox_Click(object sender, EventArgs e)
        {            
            PreviewPictureBox.Image = ((PictureBox)sender).Image;
        }
        public bool ThumbnailCallback()
        {
            return true;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T17:27:08.300

`Click`如果为动态添加的图片框设置它，则可以在事件中访问它：

`tempPictureBox.Click += new ...`

然后在`Click`Visual Studio 为您生成的方法中，您将拥有该`object sender`参数。您必须强制转换`sender as PictureBox`然后才能访问它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T18:03:28.207

好的，这是一些使用 PictureBoxes 的单击事件的更新代码：

```
namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        static int imgCounter = 0;//keeps track of img for naming
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            CaptureScreen();
        } 

        private void tempPictureBox_Click(object sender, EventArgs e)
        {
            //Put code here
        }

        private void CaptureScreen()
        {
            /*This method captures a snapshot of screen and 
             * adds it to the ImageFlowLayoutPanel
             */

            Rectangle bounds = Screen.GetBounds(Point.Empty);
            Bitmap bmp = new Bitmap(bounds.Width, bounds.Height);
            Graphics g = Graphics.FromImage(bmp);
            g.CopyFromScreen(Point.Empty, Point.Empty, bounds.Size);
            imgCounter += 1;
            bmp.Save("snap" + imgCounter.ToString() + ".jpg", ImageFormat.Jpeg);

            //creating a picturebox control and add it to the flowlayoutpanel
            PictureBox tempPictureBox = new PictureBox();

            //generates a thumbnail image of specified size
            tempPictureBox.Image = bmp.GetThumbnailImage(100, 100,
                               new Image.GetThumbnailImageAbort(ThumbnailCallback),
                               IntPtr.Zero);
            tempPictureBox.Size = new System.Drawing.Size(100, 100);
            tempPictureBox.Click += new System.EventHandler(this.tempPictureBox_Click);
            tempPictureBox.Cursor = System.Windows.Forms.Cursors.Hand;
            flowLayoutPanel1.Controls.Add(tempPictureBox);

        }
        public bool ThumbnailCallback()
        {
            return true;
        }
    }
} 
```

请注意，我还获得了一些乐趣，并让图片框光标成为一只手。如果你愿意，你可以改变它。

所以总结一下，只要把放大事件放在这个里面：

```
private void tempPictureBox_Click(object sender, EventArgs e)
{
    //Put code here
} 
```

祝你好运！

# mysql - 如何使用 Rails 查询获取区分大小写的数据

> ID：14609934
> 
> 赞同：0
> 
> 时间：2013-01-30T17:21:26.187
> 
> 标签：mysql, ruby-on-rails, ruby-on-rails-3

假设有一个社区同时拥有“apple”和“APPLE”标签。

然后如果我用参数“apple”执行这个

```
@communities = Community.joins(taggings: :tag).where(tags: { name: params[:tag] }) 
```

结果页面出现2组同一个社区来。
这可能是因为它使用大写和小写的 params[:tag] 获取。

我怎样才能严格这一点并使其不`like`搜索？我想要区分大小写和完全匹配。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T17:50:50.117

尝试将属性名称包含在二进制文件中。

```
 @communities = Community.joins(taggings: :tag).where(['binary(tags.name) = ?', params[:tag]]) 
```

# c++-cli - C++/CLI 语法说明

> ID：14609936
> 
> 赞同：1
> 
> 时间：2013-01-30T17:21:29.583
> 
> 标签：c++-cli

在查看 marshal_as 函数调用之一需要以下格式：

```
System::String^ const & 
```

`const &`托管指针之后的目的是什么？

这不适合我：

```
static std::wstring GetString(const System::String^ value)
{
    return msclr::interop::marshal_as<std::wstring>(value);
} 
```

错误 1 ​​错误 C4996：

'msclr::interop::error_reporting_helper<_To_Type,_From_Type>::marshal_as'：库不支持此转换或不包含此转换所需的头文件。请参阅有关“如何：扩展编组库”的文档以添加您自己的编组方法。c:\程序文件 (x86)\microsoft visual studio 9.0\vc\include\msclr\marshal.h 203

这样做：

```
static std::wstring GetString(const System::String^ value)
{
    return msclr::interop::marshal_as<std::wstring>(const_cast<System::String^>(value));
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T16:06:19.833

marshal_as 方法由此模板定义：

```
template <class _To_Type, class _From_Type>
inline _To_Type marshal_as(const _From_Type&); 
```

extra 的主要目的`const &`是符合这个模板声明。

这确实会影响函数的调用方式：我检查了 IL，并且`String^`正如人们所期望的那样，它作为 const 间接引用传递，但这并不是一个重大变化。

如果该方法是独立的，则可能会在没有 的情况下声明它`const &`，并且几乎没有区别。

* * *

您正在尝试`String^ const &`使用`String^ const`. 编译器无法自动（安全地）进行该转换。

您对 const_cast 所做的就是`String^ const`将`String^`. 编译器*可以*安全、自动地`String^`转入。`String^ const &`

我只是`const`从你的本地方法声明中删除。这为我编译：

```
static std::wstring GetString(System::String^ value)
{
    return msclr::interop::marshal_as<std::wstring>(value);
} 
```

为什么编译器不能进行这种转换？请注意，`String^ const &`和`const String^ const &`不是一回事。第一个说“指向字符串对象的常量指针”。第二个说“指向*常量字符串对象*的常量指针”。在你的方法中`(const System::String^ value)`，你有一个常量字符串对象，你调用的函数需要一个指向非常量字符串对象的指针。我们知道 String 类是不可变的，但编译器不可变，因此它不会将 const 对象的地址传递给认为该对象是非常量的方法。

（我使用的是 Visual Studio 2010 SP1，但我不相信编组方法在 2008 年和 2010 年之间有任何重大变化。）

# soap - 将标头添加到 Java 4 JAX-RPC SOAP 处理程序时出现 java.lang.AbstractMethodError

> ID：14609937
> 
> 赞同：1
> 
> 时间：2013-01-30T17:21:32.757
> 
> 标签：soap, handlers, jax-rpc, java1.4

我必须在 Java 4 中编写一个 JAX-RPC SOAP 消息处理程序，并且我需要在消息中添加一个安全标头。

目前，当我尝试发送消息时出现`java.lang.AbstractMethodError: org.apache.axis.message.SOAPHeader.addHeaderElement(Ljavax/xml/namespace/QName;)Ljavax/xml/soap/SOAPHeaderElement;`错误。

我在网上找不到太多关于这个错误的信息，所以任何帮助都将不胜感激！

我的代码如下：

```
public final boolean handleRequest(MessageContext context) {
    SOAPMessageContext soapContext = (SOAPMessageContext) context;
    String authId = "test";
        try {
            SOAPMessage soapMsg = soapContext.getMessage();
            SOAPEnvelope soapEnv = soapMsg.getSOAPPart().getEnvelope();
            SOAPHeader soapHeader = soapEnv.getHeader();
            /* If no header, add one */
            if (soapHeader == null) {
                soapHeader = soapEnv.addHeader();
            }

            /* Add a soap header, name as AUTH_ID_KEY */
            QName qname = new QName(TARGET_NAMESPACE, AUTH_ID_KEY);
            SOAPHeaderElement soapHeaderElement = soapHeader.addHeaderElement(qname);
            soapHeaderElement.addTextNode(authId);
            soapMsg.saveChanges();
        } catch (SOAPException e) {
            throw new ProtocolException(e);
        }

    return true;
} 
```

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T09:39:12.930

所以`org.apache.axis.message.SOAPHeader`实现`javax.xml.soap.SOAPHeader`但保持`addHeaderElement(QName)`方法抽象。

当使用这个实现时，我不得不使用这个`addHeaderElement(javax.xml.soap.Name)`方法。

最终的工作代码如下：

```
SOAPMessage soapMessage = soapContext.getMessage();
SOAPEnvelope soapEnvelope = soapMessage.getSOAPPart().getEnvelope();
SOAPHeader soapHeader = soapEnvelope.getHeader();
/* If no header, add one */
if (soapHeader == null) {
    soapHeader = soapEnvelope.addHeader();
}

/* Add a soap header, name as AUTH_ID_KEY */
Name name = soapEnvelope.createName(AUTH_ID_KEY);
SOAPHeaderElement soapHeaderElement = soapHeader.addHeaderElement(name);
soapHeaderElement.addTextNode(authId);
soapMessage.saveChanges(); 
```

# sencha-touch - 煎茶触控 2.1。ItemId 不工作？

> ID：14609938
> 
> 赞同：0
> 
> 时间：2013-01-30T17:21:34.027
> 
> 标签：sencha-touch, sencha-touch-2.1

尝试在 Sencha Touch 2.1 中创建表单登录

```
...
xtype: 'fieldset',
title: 'My Login',
items: [
    {
        xtype: 'emailfield',
        placeHolder: 'Username',
        itemId: 'userNameTextField',
        name: 'userNameTextField',
        required: true
    },
    {
        xtype: 'passwordfield',
        placeHolder: 'Password',
        itemId: 'passwordTextField',
        name: 'passwordTextField',
        required: true
    }
]
... 
```

但在 Chrome 控制台中

```
<input id="ext-element-14" class="x-input-el x-form-field x-input-email" type="email" autocapitalize="off" placeholder="Username" name="userNameTextField"> 
```

为什么 ItemId 不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:17:48.413

按照

[http://www.sencha.com/forum/showthread.php?196697-itemId-alone-not-working-for-ref-selectors&p=783360&viewfull=1#post783360](http://www.sencha.com/forum/showthread.php?196697-itemId-alone-not-working-for-ref-selectors&p=783360&viewfull=1#post783360)，

如果在查询中引用了父组件，Ext.ComponentQuery 只能使用 itemId 解析组件，因此您最好使用`id`，因为我认为您的应用程序不会有很多登录面板，您可以轻松访问这些字段，例如：

```
var pwd = Ext.getCmp('passwordTextField'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-04T07:58:31.243

您可以使用以下命令在 Sencha Touch 中调用 itemid：“#itemID”

```
var field = frmLogin.query("#userNameTextField")[0]; 
```

希望可以帮助你有同样的问题。！

# c# - 无法以编程方式将项目添加到 HTML5 缓存清单

> ID：14609943
> 
> 赞同：0
> 
> 时间：2013-01-30T17:21:48.203
> 
> 标签：c#, asp.net, sql, html, cache-manifest

我正在使用 HTML5 缓存清单来构建即使没有 Internet 连接也能够加载一些 ASP.NET 页面（文本和图像）。

我将数据存储在数据库中，并希望在连接可用时访问此数据，并将我记录中的图像名称添加到缓存清单文件中，以便可以在离线时缓存和访问它们。图像将始终位于同一文件夹中，但当人们通过 CMS 从服务器添加或删除图像时，此文件夹的内容（图像）会发生变化。

我正在使用 asp.net 和 c#。请问我该怎么做？有没有办法以编程方式将图像名称实际添加到缓存清单文件中，然后刷新它？我可以缓存整个文件夹吗？请问什么是最简单的？

谢谢，让

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T17:51:13.627

是的。生成缓存清单的方式与在站点上生成任何其他动态页面的方式相同。扫描目录中的文件并将它们输出到清单中。

但是，由于每次更新清单时浏览器都会尝试下载清单中的所有内容，因此您必须小心设置适当的过期标头，以便客户端不必重复下载他们永远不会真正查看的图像.

如果图像每隔一分钟左右就会被添加到这个文件夹中，或者不那么频繁，但图像很大，那么 appcache 方法对它们来说效果不佳。那么你最好设置一个后备图像，表明文件没有被缓存。

# ruby-on-rails - 设置自动链接的正则表达式

> ID：14609944
> 
> 赞同：1
> 
> 时间：2013-01-30T17:21:51.053
> 
> 标签：ruby-on-rails, regex, ruby-on-rails-3

我有一个文章模型：

```
class Article < ActiveRecord::Base
  attr_accessible :name, :content
end 
```

我现在想添加一个 before_save :createlinks 回调，它会自动用链接替换文章中的所有单词，以防该单词也是另一篇文章的名称。例如，我有一篇名为“测试”的文章，我创建了一篇新文章，其中包含：内容“您可以在此处查看测试”。我需要一个自动链接到“a”和“here”之间的“测试”文章。

我的做法是在article.rb中添加：

```
before_save :createlinks

def createlinks
  Article.all.each do |article|
    unless self.name == article.name
      self.content.gsub!(/#{article.name}/i, "<%= link_to '#{article.name}', 'http://localhost:3000/articles/#{article.id}' %>")
    end
  end
end 
```

第一个除非行只是为了避免链接到自身的文章。这适用于第一个更新操作，但秒更新用“link_to 'link_to' 等”替换所有“link_to 'Test'.etc...”。

所以我想排除 gsub 替换两个 '-characters 之间的所有名称（这意味着它已经替换为 link_to 'Test'）。我的做法是：

除非 self.content =~ /'#{article.name}'/ || self.name == 文章名

原则上，这也有效，但这会导致一旦创建一个链接，就不会再设置其他链接，因为一旦找到一个“测试”，整个 gsub 就会被跳过。

解决这个问题的最佳方法是什么？是否有“替换所有 self.content 是 article.name 但仅当 article.name 在单词前没有 ' 的地方”的正则表达式？换句话说，如何在不应该​​存在的正则表达式中添加一个字符？还是有更好的方法来解决整个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T18:00:00.823

```
 def extract_name(title)
  match = title.match /'(.*)'/
  match ? match[1] : title
end

def createlinks
  Article.all.each do |article|
    extracted_title = extract_name(article.name)
    unless self.name == extracted_title
      self.content.gsub!(/#{article.name}/i, link_to(extracted_title, 'http...'), 'http://localhost:3000/articles/#{article.id}' %>")
    end
  end
end 
```

# fortran - Fortran I/O：调整已打开的顺序输出文件的 RECL 参数

> ID：14609950
> 
> 赞同：0
> 
> 时间：2013-01-30T17:22:10.297
> 
> 标签：fortran

是否有语句或方法可以在 Fortran 中为已打开的顺序格式化输出文件调整 RECL 参数？或者我是否必须关闭文件并使用新的 RECL 重新打开它作为这样做的唯一方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T17:28:33.463

不可以，此类特征只能在 OPEN 语句中指定。

# c# - 在 Compact Framework 中获取组件的父容器

> ID：14609954
> 
> 赞同：1
> 
> 时间：2013-01-30T17:22:18.593
> 
> 标签：c#, .net, compact-framework, system.componentmodel

我基本上需要做同样的事情： [获取组件的父表单](https://stackoverflow.com/questions/371464/get-components-parent-form)

但是在**紧凑的框架**中没有定义

```
IDesignerHost 
```

知道怎么做吗？

编辑：它是`System.ComponentModel.Component`我想放弃一些`System.Windows.Forms.Container`控制的派生组件。我需要参考这个的原因是我不想在我将组件放置到的每个表单中为我的组件手动设置父容器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:59:57.933

在 Compact Framework 中，Form 的组件包含在成员 Container 变量中。除了 Form 创建了实例之外，该 Container 和 Form 本身之间没有直接关系。就此而言，该实例可以很容易地传递给其他一些 Form 或非 Form 类，以及原始父 Disposed。

这意味着没有办法确定组件的“包含表单”。该信息根本不存储在任何地方（GC 可以看到根，但这有点不同，无论如何都不可查询）。

现在，如果您只想要对 IContainer 的引用，而不是将实例保存到 IContainer 的 Form，您可以 query `component.Site.Container`，但即使这样也有很多潜在的漏洞。

例如，如果您将 SerialPort 组件拖放到表单上，则设计器会将其添加到组件集合中并`serialPort.Site.Container`进行设置。但是，如果将 Timer 组件拖放到 Form 上，*则不*会将 Timer添加到 Components 集合中，`timer.Site`实际上`null`也是如此，因此即使尝试查询 Container 也会抛出 NullReferenceException。

为了让它更有趣，像 SerialPort 这样的组件还具有允许在没有 IContainer 的情况下创建的构造函数，因此在设计器中将 SerialPort 拖放到 Form 时会将其添加到 Form 的组件中，如果开发人员手动创建 SerialPort，这是非常罕见的它将被添加到组件集合中。

基本上，我认为您需要重新考虑您的预期架构。你必须想出一些不依赖于父容器的机制。

# jquery - jQuery 使用 $.ajax 更改值

> ID：14609955
> 
> 赞同：0
> 
> 时间：2013-01-30T17:22:18.797
> 
> 标签：jquery, ajax, asp-classic, each

我有一张这样的桌子：

```
<table id="table-name">
    <tr><td id="td-name">something</td></tr>
    <tr><td id="td-name">something</td></tr>
    <tr><td id="td-name">something</td></tr>
    <tr><td id="td-name">something</td></tr>
</table> 
```

我正在尝试使用 jQuery 更改“某物”值，如下所示：

```
$("#table-name #td-name").each(function () {
    $.ajax({
    type: "POST",
    url: "file.asp",
    data: $(this).html()        
    }).done(function r(returnOfASP) {
        $(this).html(returnOfASP);
    });         
}); 
```

它使用“file.asp”进行数据库查询。“某事”是数据库查询的参数。“file.asp”正确返回查询，但我无法更改`<td>`值（html）。我想`$(this)`Ajax 的“完成”是不正确的，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:26:17.333

像这样更改您的 jQuery 代码：

```
$("#table-name td").each(function () {
    var self = this;
    $.ajax({
        type: "POST",
        url: "file.asp",
        data: $(this).html()        
    }).done(function r(returnOfASP) {
    $(self).html(returnOfASP);
    });         
}); 
```

您不能在一个页面上有多个 id，这可能会弄乱您的选择器。如果你想过滤更多，你可以使用类。此外，保存`this`到变量可能会解决这个问题。

你还有一个额外的东西`});`，之后不应该在那里`$(this).html()`

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T17:28:22.480

使用 jQuery [$.proxy()](http://api.jquery.com/jQuery.proxy/)在不同的上下文中委托执行。在你的情况下，它是父母。

```
$("#table-name #td-name").each(function () {
    $.ajax({
        type: "POST",
        url: "file.asp",
        data: $(this).html()        
    }).done($.proxy(function(response) { $(this).html(returnOfASP); }, this));
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T17:29:49.080

你的 td 需要唯一的 id 或者它应该被称为类。

如果你想循环它们然后给 td 类

```
<table id="table-name">
    <tr><td class="tdName">something</td></tr>
    <tr><td class="tdName">something</td></tr>
    <tr><td class="tdName">something</td></tr>
    <tr><td class="tdName">something</td></tr>
</table> 
```

Javascript 测试

```
$("#table-name .tdName").each(function () {
    // do code in here

    // test output in firebug with
    console.log($(this));
}); 
```

# c - 缓存友好的 C 代码

> ID：14609960
> 
> 赞同：0
> 
> 时间：2013-01-30T17:22:36.487
> 
> 标签：c, caching

我想计算使用此代码片段的每次循环迭代的缓存未命中率：

```
int x[2][256];
int i;
int sum = 0;

for(i = 1;i < 256; i++) {
    sum += x[0][i] * x[1][i];
} 
```

假设：

1.  数组 x 从 0x0 开始
2.  缓存为空
3.  大小为 1024 字节和块大小为 32 字节的直接映射缓存

我会说我们每次循环迭代的未命中率是一次，因为我们还要遍历 x 的列。这样对吗？

下一个问题：如果缓存大小为 2048 字节，那么未命中率是多少？

# xsd-validation - 元素“xs:schema”的前缀“xs”未绑定

> ID：14609971
> 
> 赞同：6
> 
> 时间：2013-01-30T17:23:02.150
> 
> 标签：xsd-validation

以下是我在为 SOAP 服务生成客户端时尝试使用的 xsd，Eclipse 抛出错误：元素“xs:schema”的前缀“xs”未绑定。

```
<xs:schema version="1.0" 
           targetNamespace="bdo.com.ph/RemitAPI">
  <xs:element name="CheckServiceResponse" 
              nillable="true" type="xs:string"/>
  <xs:element name="apiRequest" nillable="true" type="tns:APIRequest"/>
  .............................
      <xs:element name="referenceNo" type="xs:string" form="qualified"/>
    </xs:sequence>
  </xs:complexType>
</xs:schema> 
```

我从网络服务中得到了这个 xsd

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-31T11:15:08.570

```
 xmlns:xs="http://www.w3.org/2001/XMLSchema" 
```

未在 Schema XSD 中添加。添加它使我继续下一步。

```
xmlns:tns="http://www.bdo.com.ph/RemitAPI 
```

XSD 中不存在，尽管它存在于封闭的 WSDL 中。

当从 WSDL 提取 XSD 到本地机器时，XSD 中的命名空间引用不会从 WSDL 中获取，它们需要在 XSD 中声明。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-19T07:30:04.693

这主要是因为缺少命名空间声明。

```
 "<elem "namespace" ..xsi:nil=true.>" 
```

将工作。基本上，XML 验证器需要一个命名空间来验证。

# asp.net - Winforms APP中的远程ASP.Net LOGIN网页

> ID：14609975
> 
> 赞同：0
> 
> 时间：2013-01-30T17:23:36.547
> 
> 标签：asp.net, .net, winforms, security

我有一个使用 ASMX webservice 并显示信息的 Win 表单应用程序，我在 SQLSERVER 中使用自定义用户名密码，所有连接都由 asmx webservice 完成。

现在我想显示一个实际显示 SWF (FLashPlayer, Live Stream) 的 ASP.NET 网页。并在我的 Winform 应用程序中打开。

该页面托管在我的 IIS 上，无论如何都可以自定义，

**保护它的最佳方法是什么，它只在我的应用程序中打开，用户无法通过其他浏览器打开它。**

# windows-phone-7 - 我可以在 windows 8 应用商店使用 windows phone 7 应用吗

> ID：14609976
> 
> 赞同：1
> 
> 时间：2013-01-30T17:23:37.063
> 
> 标签：windows-phone-7, windows-8, windows-runtime, windows-phone-8, windows-store-apps

我在 windows phone 7 上开发了近 20 个应用程序，它也适用于 windows phone 8，现在我想将这些应用程序上传到 windows 8 商店。我可以在 Windows 8 应用商店上传我所有的应用程序还是我必须进行一些更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T17:27:11.723

编辑：

> 我可以在 Windows 8 应用商店上传我所有的应用程序吗...？

不，您必须转换您的应用程序，因为 WP7 和 WinRT 使用的 .NET Framework 不同。

看看“将 Windows Phone 7 应用程序迁移到 XAML” [http://msdn.microsoft.com/en-us/library/windows/apps/hh465136%28v=VS.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh465136%28v=VS.85%29.aspx)：

将适用于 Windows Phone 的 Microsoft Silverlight 应用程序移植到使用 C++、C# 或 Visual Basic 为 Windows 构建的 Windows 应用商店应用程序相对容易，尽管它确实存在一些挑战。你的大部分知识和经验将转移到使用 XAML 的 Windows 应用商店应用模型，你的大部分 XAML UI 设计也将如此。

您的应用移植工作将包括两个主要部分：

*   调整您的 UI 以利用新的 Windows UI 功能和设计指南。尽管您可以重用您的设计，但您通常会重写大部分或全部 XAML 代码。
*   从代码隐藏文件中调用的 Silverlight API 转移到相应的 Windows 运行时 API。根据您的应用程序，您可能无需更改即可移植大部分代码，但您通常需要重写其中的 10% 到 30%。

# crystal-reports - 如何使用交叉表所有页面在每个页面上显示组标题？

> ID：14609978
> 
> 赞同：2
> 
> 时间：2013-01-30T17:23:38.687
> 
> 标签：crystal-reports, header, report, crosstab

我有一个报表交叉表，第一页显示来自我的文本对象（工具）的交叉表的标题。但下一页它不显示标题。

**输出：**

```
(First Page)
Position | EmpNo | FLName <<< Header
001 | 12316 | A
002 | 43621 | B

(Next Page) <<< No Header
003 | 43523 | C
004 | 05832 | D 
```

**但我需要结果：**

```
(First Page)
Position | EmpNo | FLName <<< Header
001 | 12316 | A
002 | 43621 | B

(Next Page) 
Position | EmpNo | FLName <<< i need show Header all page
003 | 43523 | C
004 | 05832 | D 
```

**我的报告交叉** ![报告交叉表](../Images/2455529d2552b9f9f06a6a292c85d834.png) 表我需要显示所有页面的标题，我尝试设置组专家>检查“在每页上重复组标题”，但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:49:51.213

您是否尝试过使用页眉部分而不是组页眉？因为这将在每个页面上重复，而无需调整任何设置。

现在当然取决于您的其他内容，这可能不适用于您的特定情况，但看起来您目前没有使用详细信息或页面标题。

# python - cv2.HoughCircles 的结果不可靠

> ID：14609980
> 
> 赞同：8
> 
> 时间：2013-01-30T17:23:44.050
> 
> 标签：python, image-processing, opencv

我有一个包含 5 个油滴的视频，我正在尝试使用 cv2.HoughCircles 来找到它们。

这是我的代码：

```
import cv, cv2
import numpy as np

foreground1 = cv2.imread("foreground1.jpg")
vid = cv2.VideoCapture("NB14.avi")

cv2.namedWindow("video")
cv2.namedWindow("canny")
cv2.namedWindow("blur")

while True:
    ret, frame = vid.read()
    subtract1 = cv2.subtract( foreground1, frame)
    framegrey1 = cv2.cvtColor(subtract1, cv.CV_RGB2GRAY)
    blur = cv2.GaussianBlur(framegrey1, (0,0), 2)
    circles =  cv2.HoughCircles(blur, cv2.cv.CV_HOUGH_GRADIENT, 2, 10, np.array([]), 40, 80, 5, 100)
    if circles is not None:
            for c in circles[0]:
                    cv2.circle(frame, (c[0],c[1]), c[2], (0,255,0),2)
    edges = cv2.Canny( blur, 40, 80 )
    cv2.imshow("video", frame)
    cv2.imshow("canny", edges)
    cv2.imshow("blur", blur)
    key = cv2.waitKey(30) 
```

我会说精明的边缘检测器看起来非常好，而霍夫变换的结果非常不稳定，每一帧都会提供不同的结果。

例子：

![框架1](../Images/e41e4bea4e4f3ac9939648d5184bd354.png)

![框架2](../Images/7064f0f653306ac1434b4947c0ac2268.png)

![框架3](../Images/310b7adfb71155ebee042a600c15aa31.png)

我一直在玩参数，老实说我不知道​​如何获得更稳定的结果。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-30T22:46:58.023

最初我虽然在你的油滴中不会有重叠，但是有。因此，Hough 可能确实是在这里使用的好方法，但是在将 RANSAC 与它结合使用时，我有更好的经验。我建议对此进行探索，但在这里我将提供一些与此不同的东西。

首先，由于我没有这个“foreground1.jpg”图像，所以我无法执行您所做的背景减法（因此可以轻松改善结果）。我也不关心画圆，但你可以这样做，我只是画出我认为是圆的对象的边框。

所以，首先让我们假设没有重叠。然后找到图像中的边缘（简单），通过 Otsu 对边缘检测器的响应进行二值化，填充孔，最后测量圆度就足够了。现在如果有重叠，我们可以使用分水岭变换结合距离变换来分离水滴。那么问题是你不会得到真正的圆形物体，我不太在乎，但你可以调整。

在下面的代码中，我还必须使用`scipy`标记连接的组件（对于构建分水岭的标记很重要），因为 OpenCV 缺少它。代码不是很短，但应该很容易理解。此外，给定完整的当前代码，不需要循环检查，因为在分水岭分割之后，只剩下你想要的对象。最后，有一些基于到对象中心的粗略距离的简单跟踪。

```
import sys
import cv2
import math
import numpy
from scipy.ndimage import label

pi_4 = 4*math.pi

def segment_on_dt(img):
    border = img - cv2.erode(img, None)

    dt = cv2.distanceTransform(255 - img, 2, 3)
    dt = ((dt - dt.min()) / (dt.max() - dt.min()) * 255).astype(numpy.uint8)
    _, dt = cv2.threshold(dt, 100, 255, cv2.THRESH_BINARY)

    lbl, ncc = label(dt)
    lbl[border == 255] = ncc + 1

    lbl = lbl.astype(numpy.int32)
    cv2.watershed(cv2.cvtColor(img, cv2.COLOR_GRAY2RGB), lbl)
    lbl[lbl < 1] = 0
    lbl[lbl > ncc] = 0

    lbl = lbl.astype(numpy.uint8)
    lbl = cv2.erode(lbl, None)
    lbl[lbl != 0] = 255
    return lbl

def find_circles(frame):
    frame_gray = cv2.cvtColor(frame, cv2.COLOR_RGB2GRAY)
    frame_gray = cv2.GaussianBlur(frame_gray, (5, 5), 2)

    edges = frame_gray - cv2.erode(frame_gray, None)
    _, bin_edge = cv2.threshold(edges, 0, 255, cv2.THRESH_OTSU)
    height, width = bin_edge.shape
    mask = numpy.zeros((height+2, width+2), dtype=numpy.uint8)
    cv2.floodFill(bin_edge, mask, (0, 0), 255)

    components = segment_on_dt(bin_edge)

    circles, obj_center = [], []
    contours, _ = cv2.findContours(components,
            cv2.RETR_LIST, cv2.CHAIN_APPROX_SIMPLE)

    for c in contours:
        c = c.astype(numpy.int64) # XXX OpenCV bug.
        area = cv2.contourArea(c)
        if 100 < area < 3000:
            arclen = cv2.arcLength(c, True)
            circularity = (pi_4 * area) / (arclen * arclen)
            if circularity > 0.5: # XXX Yes, pretty low threshold.
                circles.append(c)
                box = cv2.boundingRect(c)
                obj_center.append((box[0] + (box[2] / 2), box[1] + (box[3] / 2)))

    return circles, obj_center

def track_center(objcenter, newdata):
    for i in xrange(len(objcenter)):
        ostr, oc = objcenter[i]
        best = min((abs(c[0]-oc[0])**2+abs(c[1]-oc[1])**2, j)
                for j, c in enumerate(newdata))
        j = best[1]
        if i == j:
            objcenter[i] = (ostr, new_center[j])
        else:
            print "Swapping %s <-> %s" % ((i, objcenter[i]), (j, objcenter[j]))
            objcenter[i], objcenter[j] = objcenter[j], objcenter[i]

video = cv2.VideoCapture(sys.argv[1])

obj_center = None
while True:
    ret, frame = video.read()
    if not ret:
        break

    circles, new_center = find_circles(frame)
    if obj_center is None:
        obj_center = [(str(i + 1), c) for i, c in enumerate(new_center)]
    else:
        track_center(obj_center, new_center)

    for i in xrange(len(circles)):
        cv2.drawContours(frame, circles, i, (0, 255, 0))
        cstr, ccenter = obj_center[i]
        cv2.putText(frame, cstr, ccenter, cv2.FONT_HERSHEY_COMPLEX, 0.5,
                (255, 255, 255), 1, cv2.CV_AA)

    cv2.imshow("result", frame)
    cv2.waitKey(10)
    if len(circles[0]) < 5:
        print "lost something" 
```

这适用于您的整个视频，这里有两个示例：

![在此处输入图像描述](../Images/026be283c587cada0da4f4f105b56323.png) ![在此处输入图像描述](../Images/8172754e6163301ed6648d6a17cf9338.png)

# excel - Excel 日期/时间差

> ID：14609987
> 
> 赞同：3
> 
> 时间：2013-01-30T17:24:09.363
> 
> 标签：excel, worksheet-function

我想计算出自指定日期和时间以来的当前时间。

如果指定的数据是：`19/01/2013 16:44:00`
现在时间是：`19/01/2013 16:45:00`

差异是 0 年 0 个月 0 天 0 小时 1 分钟 0 秒

这可以很容易地通过获取当前时间并减去以前的时间并格式化它来完成，但这很难处理数据所以我想要做的是将每个日期/时间段分成自己的单元格

假设单元格 A1 有以前的时间，单元格 A2 有当前时间

单元格 a5 到 f5 将包含 0 年 0 个月 0 天 0 小时 1 分钟 0 秒

关于这个问题的第二个注意事项是否可以`=NOW()`通过 VBA 强制每 x 秒更新一次而无需交互？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T18:58:16.263

您不能使用`YEAR`函数来获取年份差异，因为这将在 2012 年 12 月 31 日和 2013 年 1 月 1 日之间给出 1 年，而只有一天.....

....类似地，您可能会遇到 MONTH 和 DAY 的问题（例如，MONTH 总是返回 1 到 12 之间的数字，而在这种情况下，您只会期望 0 到 11 之间的数字）

然后尝试`DATEDIF`前 3 个`HOUR`，正如贾斯汀建议的`MINUTE`那样`SECOND`

假设 A2 中的开始日期/时间和 B2 中的结束日期/时间分别为年、月、日、小时、分钟和秒尝试这些公式

`=DATEDIF(A2,B2-(MOD(A2,1)>MOD(B2,1)),"y")`

`=DATEDIF(A2,B2-(MOD(A2,1)>MOD(B2,1)),"ym")`

`=DATEDIF(A2,B2-(MOD(A2,1)>MOD(B2,1)),"md")`

`=HOUR(B2-A2)`

`=MINUTE(B2-A2)`

`=SECOND(B2-A2)`

将所有单元格格式化为一般格式

由于月/年长度不同，您可能会遇到一些差异......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T17:29:27.593

使用`A5 = Year(A1)-Year(A2)`等

使用

`Year(...)` `Month(...)` `Day(...)` `Hour(...)` `Minute(...)` `Second(...)`

有关基于计时器创建自更新工作表的更多详细信息，请查看这[两个](https://stackoverflow.com/questions/11867225/how-do-i-show-a-running-clock-in-excel) [帖子](https://stackoverflow.com/questions/2319683/vba-macro-on-timer-style-to-run-code-every-set-number-of-seconds-i-e-120-secon)并设置计时器以执行该`Worksheet.Calculate`方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-07T10:45:53.207

```
Private Sub CommandButton1_Click()
    DoDateA
End Sub

Sub DoDateA()
    Dim D1 As Date, D2 As Date, DC As Date, DS As Date
    Dim CA: CA = Array("", "yyyy", "m", "d", "h", "n", "s", "s")
    Dim Va%(7), Da(7) As Date, Ci%
    D1 = Now + Rnd() * 420  ' vary the  * factors for range of dates
    D2 = Now + Rnd() * 156
    If D1 > D2 Then
        [b4] = "Larger"
    Else
        [b4] = " smaller"
        DS = D1
        D1 = D2
        D2 = DS
    End If
    [d4] = D1
    [e4] = D2
    DC = D2
    For Ci = 1 To 6
        Va(Ci) = DateDiff(CA(Ci), DC, D1)
        DC = DateAdd(CA(Ci), Va(Ci), DC)
        Va(Ci + 1) = DateDiff(CA(Ci + 1), DC, D1)
        If Va(Ci + 1) < 0 Then  ' added too much
            Va(Ci) = Va(Ci) - 1
            DC = DateAdd(CA(Ci), -1, DC)
            Cells(9, Ci + 3) = Va(Ci + 1)
            Cells(8, Ci + 3) = Format(DC, "yyyy:mm:dd hh:mm:ss")
        End If
        Da(Ci) = DC
        Cells(5, Ci + 3) = CA(Ci)
        Cells(6, Ci + 3) = Va(Ci)
        Cells(7, Ci + 3) = Format(Da(Ci), "yyyy:mm:dd hh:mm:ss")
        Cells(10, Ci + 3) = DateDiff(CA(Ci), D2, D1)
    Next Ci
End Sub 
```

# jquery - jQuery 滑块 - 进度条

> ID：14609988
> 
> 赞同：0
> 
> 时间：2013-01-30T17:24:11.020
> 
> 标签：jquery, slider, progress-bar, gallery, progress

类似于：[带有进度条的 Jquery 滑块](https://stackoverflow.com/questions/12835790/jquery-slider-with-progress-bar)

我有这个滑块和进度条，但我希望进度条与“上一个”和“下一个”按钮同步。因此，当您单击“下一步”时，进度条将从头开始。

[http://jsfiddle.net/aidenguinnip/8rJws/](http://jsfiddle.net/aidenguinnip/8rJws/)

```
$(window).load(function(){
var currentIndex = 0;// store current pane index displayed
var ePanes = $('#slider .panel'), // store panes collection
    time   = 3000,
    bar = $('.progress_bar');

function showPane(index){// generic showPane
    // hide current pane
    ePanes.eq(currentIndex).stop(true, true).fadeOut();
    // set current index : check in panes collection length
    currentIndex = index;
    if(currentIndex < 0) currentIndex = ePanes.length-1;
    else if(currentIndex >= ePanes.length) currentIndex = 0;
    // display pane
    ePanes.eq(currentIndex).stop(true, true).fadeIn();
    // menu selection
    $('.nav li').removeClass('current').eq(currentIndex).addClass('current');
}
// bind ul links
$('.nav li').click(function(ev){showPane($(this).index());});
// bind previous & next links
$('.previous').click(function(){showPane(currentIndex-1);});
$('.next').click(function(){showPane(currentIndex+1);});
// apply start pane
showPane(0);

function run(){
    bar.width(0);
    showPane(currentIndex+1);
    bar.animate({'width': "+=400"}, time, run);
}

run();

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:33:38.057

干得好...

[http://jsfiddle.net/8rJws/1/](http://jsfiddle.net/8rJws/1/)

我在更改幻灯片时停止了动画并将条形宽度重置为 0，然后重新启动了动画（参见第 10 行）...

```
bar.stop(true, true).css("width", 0).animate({'width': "+=400"}, time, run); 
```

# javascript - 我需要帮助让正则表达式正确 2

> ID：14609992
> 
> 赞同：0
> 
> 时间：2013-01-30T17:24:16.607
> 
> 标签：javascript, regex

需要一个快速的大师帮助:) 得到了 url [http://www.blahblah.com/?ssct=654654654654654#games/park](http://www.blahblah.com/?ssct=654654654654654#games/park) 我需要应用正则表达式从 url 中删除 ?ssct=654654654654654。我有 replace(/\?.*#/, '') 这个地方，但它摆脱了我需要的 # 符号。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T17:31:33.037

使用[零宽度正前瞻](http://www.regular-expressions.info/lookaround.html)：

```
replace(/\?.*(?=#)/, ''); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T17:33:06.293

最简单的变化是

```
/\?[^#]*/ 
```

它匹配一个文字`'?'`字符，后跟除 . 之外的任意数量的字符`'#'`。

```
"http://www.blahblah.com/?ssct=654654654654654#games/park".replace(/\?[^#]*/, '')

===

"http://www.blahblah.com/#games/park" 
```

这可以正确处理 URI 引用始终是分层的（`http`与`mailto`“不透明”）并具有查询组件的情况。

* * *

# 警告

不过，使用简单的正则表达式是有可能出错的。例如，这种方法存在以下问题

```
"http://www.blahblah.com/#games/park?duck" 
```

其中第一个`?`出现在片段内而不是在查询中。

为了防弹，您确实需要正确解析 URI。 [RFC 3986 附录 B](http://www.ietf.org/rfc/rfc3986.txt)包含：

> 以下行是将格式良好的 URI 引用分解为其组件的正则表达式。

因此，要对所有分层 URI 正确，您需要执行类似的操作

```
var myUrl = "http://www.blahblah.com/?ssct=654654654654654#games/park";
myUrl.replace(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/, "$1$3$5$8") 
```

这可能是一次性的，但另一种选择是使用提供适当 URI 处理原语的 JS 库，如[Closure 的 Uri 模块](http://closure-library.googlecode.com/svn/docs/class_goog_Uri.html)

```
var urlWithoutQuery =
   new goog.Uri("http://www.blahblah.com/?ssct=654654654654654#games/park")
   .setQuery('')
   .toString() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T17:26:04.160

你可以用'#'代替空字符串吗？ `replace(/\?.*#/, '#')`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-30T18:30:01.870

正则表达式不是最理想的解决方案。在有效的 URI 格式中，只有一个“？” 特点。所以最好的解决方案是：

```
var a = location.href;
a = a.substring(0, a.indexOf("?")); 
```

# qt - Qt：“聊天记录”控件

> ID：14609993
> 
> 赞同：0
> 
> 时间：2013-01-30T17:24:24.280
> 
> 标签：qt

我们一直在使用 Qt 的 WebKit 作为聊天历史控件。类似于Skype，它列出了对话历史，突出显示人名，显示他/她的文本，并允许轻松选择和复制。

由于某些我无法控制的原因，我的应用程序不再被允许使用 Qt 的 WebKit。我正在寻找在 qt 的基本产品中理想地使用控件的替代品（我非常愿意扩展）。

1.  显示带有人名、文本和时间戳的类似 Skype 的聊天记录
2.  能够为聊天记录行设置奇偶背景颜色
3.  可滚动
4.  用鼠标以自由形式轻松选择文本
5.  动态能够添加聊天历史记录行，并滚动到底部以显示它们，以防用户向上滚动

有什么建议么？你认为我可以为此使用富编辑控件吗？它有只读模式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T21:02:11.847

可以使用 QTextBrowser + html 组合，这可以实现非常高级的 html 格式设置。例如（假设 ui->textBrowser 是 QTextBrowser）：

```
MainWindow::MainWindow(QWidget *parent)
        : QMainWindow(parent)
        , ui(new Ui::MainWindow)
{
    ui->setupUi(this);
    ui->textBrowser->setHtml(QString());

    on_User1Message_received("Message from user 1");
    on_User2Message_received("Message from user 2");
}

void MainWindow::on_User1Message_received(const QString &msg)
{
    ui->textBrowser->append(QString().sprintf("<font color=\"red\"> %s </font>",msg.toStdString().c_str()));
}

void MainWindow::on_User2Message_received(const QString &msg)
{
    ui->textBrowser->append(QString().sprintf("<font color=\"blue\"> %s </font>",msg.toStdString().c_str()));
} 
```

以不同颜色打印来自两个用户的消息。on_UserXMessage_received 方法最终可能会很复杂，添加用户名、时间戳等...

# java - 在java中比较字节[i]和字符串

> ID：14609994
> 
> 赞同：0
> 
> 时间：2013-01-30T17:24:33.137
> 
> 标签：java

我有这样的字符串

```
String text = "f001050000000000003d61c1c1df400200c0000009181600ef014000003f20" 
```

我将其转换为字节以将其作为字节循环

```
byte[] bytes = new BigInteger(text,16).toByteArray();        
    for (int i = 1; i < bytes.length; i++) 
    {            
        System.out.print(String.format("%02x ", bytes[i]));
    } 
```

我想将 i 的字节值`bytes[i]`与类似的等效字符串进行比较

```
for (int i = 1; i < bytes.length; i++) 
    {      
        if (bytes[i] == "f0")
        {
            break;
        }
        System.out.print(String.format("%02x ", bytes[i]));
    } 
```

这肯定行不通，但我该怎么做这个比较

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T17:27:06.587

`byte`是数字类型，所以你可以简单地做

```
if(bytes[i] == (byte)0xf0) { ... } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T17:27:34.933

`bytes[i] == "f0"` 始终为假，因为您将 a 的值与 a`byte`的引用进行比较`String`

将您的条件更改为

```
(bytes[i] & 0xFF) == 0xF0 
```

`&oxFF`因为这样我们屏蔽字节并进行`int`比较。这样，条件将为真，`bytes[i] == -16`其位表示为`0xF0`。

更改了引用*@isvforall评论的代码*