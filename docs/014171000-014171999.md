# StackOverflow 问答 14171000-14171999

# php - Php nowdoc (heredoc without parsing) 正在解释 HTML 标记字符 - 不可取

> ID：14171004
> 
> 赞同：0
> 
> 时间：2013-01-05T10:47:10.227
> 
> 标签：php, heredoc, nowdoc

我的 PHP 看起来像这样：

```
$func_code = <<<'EOT'
foo1
foo2 '<foo3>'. foo4 . '</div>';
EOT;

echo $func_code; 
```

输出如下所示：

```
one_half   
foo1 foo2 ''. foo4 . '';
foo1 foo2 ''. foo4 . ''; 
```

如您所见，并且都被完全删除。PHP 文档声称 nowdoc 不会解析文本块内的任何内容，但它显然会解析 < 和 > 符号。

有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T10:54:01.690

解析它的不是 PHP。这是你的浏览器。检查页面的来源。

如果您希望浏览器不解释这些，请`Content-type`事先发送一个标头：

```
header('Content-type: text/plain'); //This should be placed before any output is sent! 
```

# ruby-on-rails - 如何临时保存用户偏好，直到用户登录应用程序

> ID：14171008
> 
> 赞同：0
> 
> 时间：2013-01-05T10:47:47.667
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

在我的 rails 应用程序中，我希望用户能够在不登录的情况下浏览和探索，但是，当用户尝试创建记录时，它应该让他只有在他/她登录后才能保存它。如果用户未登录，那么它应该将他引导到注册过程。用户不应该费力地重新创建记录。

例如，用户可以去任何购物网站，将商品添加到购物车。结帐时，系统会提示用户注册/登录。即使用户被引导到注册页面，商品仍然存在于购物车中（用户不必添加它们）

有宝石吗？或者如何在 Rails 应用程序中实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T10:55:00.080

很快，您要做的是为每个未登录并访问您的站点的用户创建一个访客用户实例。您将此用户视为注册用户，并相应地将所有内容保存到数据库中。然后，当用户到了必须注册您更改他在数据库中的来宾用户详细信息的地步时，这样他作为来宾所做的一切都将保持不变。

您可以在此处找到一个截屏视频，详细说明如何实现您的目标：[Guest User Record - RailsCasts](http://railscasts.com/episodes/393-guest-user-record)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T11:00:27.977

您可以将此信息存储在会话中，然后当用户注册并登录该站点时，您可以在会话中显示存储的信息。

# android - 在 android 上使用 phonegap 设置城市飞艇推送通知

> ID：14171011
> 
> 赞同：1
> 
> 时间：2013-01-05T10:48:10.020
> 
> 标签：android, cordova, push-notification, urbanairship.com

我有一个 PhoneGap / Cordova 应用程序，并想使用 PhoneGap 的[城市飞艇](http://urbanairship.com)插件添加推送通知。看起来很有希望。我尝试按照[Urban Airship 的说明查看](https://docs.urbanairship.com/display/DOCS/Client:+PhoneGap:+Android+Integration)[GitHub 上](https://github.com/urbanairship/phonegap-ua-push/tree/master/android-sample)的示例。问题是我是 html5-css3-JavaScript 开发人员，而不是 Java / Android 开发人员。我正在使用 Eclipse。

我像示例中一样更改了 AndroidManifest.xml 文件，将我的包名称放在适当的位置。

我将 .java 文件 PushNotificationPlugin.java、IntentReceiver.java 和 MainApplication.java 导入到 src 文件夹中的项目树中。现在出现错误，例如“无法解决导入 com.urbanairship.UAirship”。

有关我到目前为止的进度和错误，请参见下面的屏幕显示。

![在此处输入图像描述](../Images/e78f926c00f83a70cea6439516e1a03f.png)

我的问题是：

“将 PushNotificationPlugin.java 和 IntentReceiver.java 文件安装到您的 Android 项目中。” 我必须将这些文件放在项目树中的什么位置，我是否必须以任何方式链接到它们？我是否还应该在某处安装文件 MainApplication.java 以及如何安装？

“在您的应用程序类中初始化 Urban Airship 库” 我的 PhoneGap 项目树中的哪个文件是应用程序类，我可以在该文件的哪个位置复制粘贴 Urban Airship 代码？

“检测您的主要活动类” 我必须将那几行 Java 添加到 Cordova 主要活动中。哪个文件包含 Cordova 主要活动，我可以在该文件的哪个位置复制粘贴如此需要的 Urban Airship 代码？

任何帮助将不胜感激！如果你帮我完成这项工作，我什至会为你构建一个简单的 Sencha Touch 应用程序......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T11:59:15.423

我也很难设置它。这就是我为最终让它工作所做的工作，以补充[本](https://docs.urbanairship.com/display/DOCS/Client%3a+PhoneGap%3a+Android+Integration#ClientPhoneGapAndroidIntegration-Integrationwithanexistingproject)教程中所说的内容：

1.  将 urbanairship[...].jar 文件复制到项目的 libs 文件夹中（这个丢失的文件是打印屏幕上出现错误的原因）
2.  将 MainApplication.java、IntentReceiver.java 文件导入您的主包 (come.waywayway.easyapp)。更新这些文件中的包名称。我还必须在 IntentReceiver 中用 ACTION_SUFFIX_LOCATION_SERVICE_BOUND 替换 ACTION_LOCATION_SERVICE_BOUND
3.  在 com.urbanairship.phonegap.plugins 包中导入 PushNotificationPlugin.java 文件（将其放在 src/com/urbanairship/phonegap/plugins 中），使用您的包名称更新 IntentReceiver 导入，并确保链接到 res 中的插件/xml/config.xml，例如：

    ```
    <plugin name="PushNotificationPlugin" value="com.urbanairship.phonegap.plugins.PushNotificationPlugin"/> 
    ```

4.  更新您的主要活动类 (easyapp.java) 以匹配示例应用程序主要活动类 (UAPhonegapSample.java)
5.  按照教程中的说明导入和更新您的 airship.properties 和 location.properties 文件
6.  根据示例应用 AndroidManifest.xml 文件，更新您的。不要忘记将 android:name=".MainApplication" 作为属性添加到应用程序对象

完成此操作后，您应该能够从城市飞艇控制台发送测试通知。当您启动应用程序时，您的设备 APID 应该显示在 Eclipse 控制台中。如果您只想接收通知，则不需要 Javascript 文件。

# android - ListView 错误地显示项目

> ID：14171015
> 
> 赞同：0
> 
> 时间：2013-01-05T10:49:09.037
> 
> 标签：android, listview

在我的应用程序中，我使用了一个列表视图，它显示来自 CustomAdapter 的数据。在我的数组列表中，我有两个项目。我的列表视图显示最后添加的数据两次而不是第一个项目。这是我的自定义适配器：

```
public class NodeListViewCustomAdapter extends BaseAdapter {
    LayoutInflater inflater;
    Activity mActivity;
    ArrayList<Node> mNodeList;
    double mRecvProgress;
    double mSentProgress;
    String repeatSentprogress;
    String repeatRecvprogress;
    ViewHolder holder;
    Node node;
    public NodeListViewCustomAdapter(Activity aContext,Node node,ArrayList<Node> nodeList){
        super();
        mActivity = aContext;
        this.node = node;
        this.inflater = (LayoutInflater)aContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        this.mNodeList = nodeList;
    }
    @Override
    public int getCount() {
        return mNodeList.size();
    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return 0;
    }
    @Override
    public void notifyDataSetChanged() {
        super.notifyDataSetChanged();
    }

    public static class ViewHolder
    {
        TextView txtViewnodeTitle;
        TextView sentStatustxtView;
        TextView recvStatustxtView;
        TextView msgsentvalue;
        TextView msgrecvvalue;
        TextView sentindicator;
        TextView recvindicator;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        if(convertView==null)
        {
            holder = new ViewHolder();
            convertView = inflater.inflate(R.layout.nodelistitem_row, null);
        }   else{
            holder=(ViewHolder)convertView.getTag();
        }
            if(node.advertise)
                convertView.setBackgroundColor(Color.YELLOW);
            node.advertise = false;
            convertView.setBackgroundColor(Color.BLACK);
            holder.txtViewnodeTitle = (TextView) convertView.findViewById(R.id.txtViewnodeTitle);
            holder.sentStatustxtView = (TextView) convertView.findViewById(R.id.sentstatustxtView);
            holder.recvStatustxtView = (TextView) convertView.findViewById(R.id.recvstatustextView);
            holder.msgsentvalue = (TextView) convertView.findViewById(R.id.msgsenttitle);
            holder.msgrecvvalue = (TextView) convertView.findViewById(R.id.msgrecvtitle);
            convertView.setTag(holder);

        holder.sentStatustxtView.setGravity(Gravity.LEFT);
        holder.recvStatustxtView.setGravity(Gravity.LEFT);

        computeProgress();
        holder.txtViewnodeTitle.setText(String.valueOf(node.nodeID));
        holder.msgsentvalue.setText("< "+String.valueOf(node.ms)+"/"+node.MS);
        holder.sentStatustxtView.setText(repeatSentprogress);
        holder.msgrecvvalue.setText("> "+String.valueOf(node.mr)+"/"+node.MR);
        holder.recvStatustxtView.setText(repeatRecvprogress);
        return convertView;
    }
    private void computeProgress() {
        mSentProgress = ((double)node.ms/(double)node.MS)*20;
        mRecvProgress = ((double)node.mr/(double)node.MR)*20;
        repeatSentprogress = new String(new char[(int)mSentProgress]).replace('\0', (char) 9608);
        repeatRecvprogress = new String(new char[(int)mRecvProgress]).replace('\0', (char) 9608);
        if(node.ms == node.MS)holder.sentStatustxtView.setTextColor(Color.GREEN);
        else holder.sentStatustxtView.setTextColor(Color.BLUE);
        if(node.mr == node.MR)holder.recvStatustxtView.setTextColor(Color.GREEN);
        else holder.recvStatustxtView.setTextColor(Color.BLUE);
    }

} 
```

这是我的活动：

```
public class Nodes extends Activity implements OnItemClickListener {
    ListView mListView;
    NodeListViewCustomAdapter mNodeListAdapter;
    public  ArrayList <Node> mNodesList ;
    TextView nodeIdView; 
    Timer mTimer;
    Timer mInnerTimer;
    int delay = 500;
    int period = 500;
    boolean found = false; 
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.nodes);
        mListView = (ListView)findViewById(R.id.node_list);
        mNodesList = new ArrayList<Node>();
        doTimerTask();
        mListView.setOnItemClickListener(this);
    }
    private void doTimerTask() {
        mTimer = new Timer();
        mTimer.scheduleAtFixedRate(new TimerTask() {

            @Override
            public void run() {

                runOnUiThread(new Runnable() {
                    public void run() {
                        while(true){
                            try{
                                String PeardOutput = null; 
                                synchronized(AndroidPeardServer.nodestatsqe){
                                    PeardOutput = AndroidPeardServer.nodestatsqe.poll();
                                    if (PeardOutput == null) return; 
                                }
                                String msg  = PeardOutput.substring(3); 
                                process_nodeStats(msg); 
                                mNodeListAdapter.notifyDataSetChanged();
                            }
                            catch(Exception e){
                                e.printStackTrace();
                            }
                        }
                    }
                });
            }
        }, delay, period);

    }

    @Override
    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {

    }
    private void process_nodeStats(String msg) {
        String[] nodeStats = msg.split(":");
        String  type    = nodeStats[0];
        int     nodeID  = Integer.parseInt(nodeStats[1]);
        int     value   = Integer.parseInt(nodeStats[2]); 
        int     cycle   = Integer.parseInt(nodeStats[3]);

        // Iterate through the nodelist
        found = false; 
        for(Node node: mNodesList){
            if (node.nodeID != nodeID) {
                continue;
            }
            else found = true; 
            populateNode(node,type, nodeID, value, cycle);
            mNodeListAdapter = new NodeListViewCustomAdapter(getParent(),node,mNodesList);
            mListView.setAdapter(mNodeListAdapter); 
            break; 
        }
        if (!found){
            Node node = new Node();         
            mNodesList.add(node);
            populateNode(node,type,nodeID,value,cycle);
            mNodeListAdapter = new NodeListViewCustomAdapter(getParent(),node,mNodesList);
            mListView.setAdapter(mNodeListAdapter); 
        }
    }
    private void populateNode(Node node,String type,int nodeId, int value, int cycle) {

        node.nodeID = nodeId;
        if(type.equals("MS")){
            node.MS = value;
            node.CS = cycle;
            node.ms = 0;
        }else if(type.equals("MR")){
            node.MR = value;
            node.CR = cycle;
            node.mr = 0;
        }else if(type.equals("ms")){
            if(cycle==node.CS) node.ms = + value;
            else node.ms = value;
        }else if(type.equals("mr")){
            if(cycle==node.CR) node.mr = + value;
            else node.mr = value;
        }else if (type.equals("NL")){
            mNodesList.remove(node);
        }else if(type.equals("NA")){
            node.advertise = true;
        }
    }

    //========= Node class to store in NodeList =================
    public  class Node {
         int nodeID;
         int MS; //Total Messages to Send to nodeID 
         int ms; //number of Messages sent so far
         int MR ; //Total Messages expected from nodeID
         int mr; //number of Messages received so far
         int CS; //Investigation Cycle for Sending
         int CR; //Investigation Cycle for Receiving
         boolean advertise = false; // To know the advertisements received
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T11:47:47.607

我终于得到了正确的答案。我没有从数组列表中获取节点。所以这条线为我完成了。

```
node = mNodeList.get(position); 
```

谢谢大家。

# android - android中熵（`/dev/random/）的用途是什么？

> ID：14171016
> 
> 赞同：1
> 
> 时间：2013-01-05T10:49:14.823
> 
> 标签：android, ubuntu, random

[我在这里](http://forum.xda-developers.com/showthread.php?t=1987032&nocache=0)阅读了这篇博文。

帖子说 Chrome，地图应用程序使用`/dev/random`. 我想知道他们为什么要使用它们。那是`/dev/random`在硬件的帮助下生成随机数吗？

这是仅在android中还是在linux os中也是如此？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T10:59:01.957

您应该查看其他[XDA 文章](http://www.xda-developers.com/android/entropy-seed-generator-not-all-its-hacked-up-to-be/)。

他们说`/dev/random`大多数应用程序都没有使用它，性能提升可能是由于 CPU 速度的提高。

# emacs - Emacs rebind self-inserting key

> ID：14171017
> 
> 赞同：1
> 
> 时间：2013-01-05T10:49:28.027
> 
> 标签：emacs

On Emacs, Italian keyboard, I'd like the alphanumeric keys above the alphabet (1/!, 2/", 3/£, 4/$, ...) to insert the shifted character (e.g. ! " £ $) when pressed alone. Is there a way to do that?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T13:35:30.963

For each number/char pair, you'll need to install two key bindings to swap them, and a third one to avoid messing up the keypad (since the `kp-0`-`kp-9` keys are translated to `0`-`9`, but I guess you don't want `kp-1` to insert `!`)

Here is a macro to avoid creating all those key bindings by hand:

```
(defmacro swap-keys (list)
  `(progn
     ,@(mapcar
        (lambda (keys)
          (let ((key1 (car keys))
                (key2 (cdr keys)))
            `(progn
               (global-set-key ,key1 (lambda () (interactive) (insert ,key2)))
               (global-set-key ,key2 (lambda () (interactive) (insert ,key1)))
               (global-set-key (kbd ,(format "<kp-%s>" key1))
                               (lambda () (interactive) (insert ,key1))))))
        list)))

(swap-keys (("1" . "!")
            ("2" . "\""))) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-05T17:06:24.980

You can set up a custom input method that has those keys flipped ([doc](http://www.gnu.org/software/emacs/manual/html_node/emacs/Select-Input-Method.html)).

ex I have this in my .emacs for the layout I use:

```
(eval-after-load 'quail
  '(progn
      (add-to-list 'quail-keyboard-layout-alist
     '("us-pgr-dvk" . "\
                              \
$~&%[7{5}3(1=9*0)2+4]6!8#`    \
  ;:,<.>pPyYfFgGcCrRlL/?@^\\|  \
  aAoOeEuUiIdDhHtTnNsS-_      \
  '\"qQjJkKxXbBmMwWvVzZ        \
                              "))
   ))
(quail-set-keyboard-layout "us-pgr-dvk") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T12:26:38.753

You can write:

```
(global-set-key (kbd "1") (lambda () (interactive) (insert "!"))) 
```

etc.

# android - 如何限制android中服务发送的通知数量？

> ID：14171018
> 
> 赞同：1
> 
> 时间：2013-01-05T10:49:49.080
> 
> 标签：android, service, geolocation, android-notifications

我的 Android 项目提供基于位置的提醒。在一项服务中，我正在计算从当前位置到数据库中所有位置的距离。如果距离小于 500m，则通知用户。问题是，由于距离的计算和通知的发送是在服务内完成的，如果距离<500m，通知会不断地重复发送到同一位置。最终应用程序必须被强制关闭。这是服务类的 onLocationChanged 方法：

```
 public void onLocationChanged(Location location) {
    double lat = location.getLatitude(),lng = location.getLongitude(),dblat = 0,dblng=0;

    Location currentlocation = new Location("current Location");
    currentlocation.setLatitude(lat);
    currentlocation.setLongitude(lng);

    int NOTIFICATION_ID = 1;
    String ns = Context.NOTIFICATION_SERVICE;

     String title,date,today;
        NotificationManager mNotificationManager = (NotificationManager) getSystemService(ns);
        Calendar cal=Calendar.getInstance();
        today = String.valueOf(cal.get(Calendar.YEAR)) + "-"
                + String.valueOf(cal.get(Calendar.MONTH)) + "-"
                + String.valueOf(cal.get(Calendar.DAY_OF_MONTH));

    SQLiteDatabase database = new SQLiteHelper(getApplicationContext()).getWritableDatabase();
    Cursor c = database.rawQuery("select title,reminderdate,latitude,longitude from Reminder where type=1", null);

    int icon = R.drawable.ic_launcher;
    if(c.getCount()>0)
    { //System.out.println("c not null");
    c.moveToFirst();
    while(!c.isAfterLast())
    {
        title=c.getString(0);
        date=c.getString(1);
        if(date.equals(today))
        {
        dblat=c.getDouble(2);
        dblng=c.getDouble(3);
        Location dblocation = new Location("db Location");
        dblocation.setLatitude(dblat);
        dblocation.setLongitude(dblng);

        Double distance = (double) currentlocation.distanceTo(dblocation);
    if(distance<500)

        //Toast.makeText(this, "distance " + distance, Toast.LENGTH_LONG).show();

      {    long when = System.currentTimeMillis();
          Notification notification = new Notification(icon,title, when);

          RemoteViews contentView = new RemoteViews(getPackageName(), R.layout.custom_notification);
          contentView.setImageViewResource(R.id.notification_image, R.drawable.ic_launcher);
          contentView.setTextViewText(R.id.notification_title, "My custom notification title");
          contentView.setTextViewText(R.id.notification_text, "My custom notification text");
          notification.contentView = contentView;

          Intent notificationIntent = new Intent(this, ShowReminder.class);
          notificationIntent.putExtra("title", title);
          PendingIntent contentIntent = PendingIntent.getActivity(this, 0, notificationIntent, 0);

          notification.contentIntent = contentIntent;

          notification.flags |= Notification.FLAG_NO_CLEAR; //Do not clear the notification
          notification.defaults |= Notification.DEFAULT_LIGHTS; // LED
          notification.defaults |= Notification.DEFAULT_VIBRATE; //Vibration
          notification.defaults |= Notification.DEFAULT_SOUND; // Sound

          mNotificationManager.notify(NOTIFICATION_ID, notification);       
    }   }
        c.moveToNext();
    }}

    c.close();
    database.close();

} 
```

每当我靠近某个特定位置时，我怎样才能让一个通知只出现一次，而不是重复出现？任何帮助将不胜感激。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T03:29:52.617

您必须在服务中添加一些逻辑，以便更仔细地决定何时触发通知。

例如，您可以在表中添加一列，以跟踪用户当前是否“足够接近”（在您的示例中小于 500）到给定位置以得到通知；每次您重新计算距离时，如果您发现您现在“足够近”但该列尚未反映这一点，您就知道用户刚刚进入该位置的附近，是时候将通知排入队列了关于它。在数据库中记下用户现在靠近该位置，以便您可以禁止有关该位置的冗余通知。离开附近后，请务必清除“足够近”位。

如果您正处于“足够接近”的边缘，仍然会有一些多余的通知，因此您需要添加一些去抖动功能，但这应该能让您顺利上路。

# php - 使用没有foreach的php解析json单个数组

> ID：14171019
> 
> 赞同：-1
> 
> 时间：2013-01-05T10:49:53.953
> 
> 标签：php, json

> **可能重复：**
> [能够在 print_r() 的输出中看到一个变量，但不确定如何在代码中访问它](https://stackoverflow.com/questions/6322084/able-to-see-a-variable-in-print-rs-output-but-not-sure-how-to-access-it-in-c)

解析json的PHP代码：

```
<?php
$url = "http://xxx.com/request-url?type=json";
$string = file_get_contents($url);      
$json = json_decode($string);

if (count($json)) {
  echo $json->book->title;
} else {
  echo "No book found";
}
?> 
```

示例 json 响应：

```
{"book":[{"title":"Good day"}]} 
```

由于单个数组，我删除了 foreach: foreach($json->book as $books)

我试过：
$json->book->title、
$json->title、
$json[book][title]、
$json[title]。

都不起作用。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T10:55:26.787

当[`print_r($json)`](http://php.net/print_r)你得到

```
stdClass Object
(
    [book] => Array
        (
            [0] => stdClass Object
                (
                    [title] => Good day
                )

        )

) 
```

`->`您可以使用和数组访问 StdClass 属性`[]`

所以，很明显，这是

```
$json->book[0]->title; 
```

[点击演示](http://codepad.org/TppnMqco)

如果这不起作用，那么您的 JSON 可能无效。检查它与[http://www.jsonlint.com](http://www.jsonlint.com)

# python - Matplotlib 饼图：如何用绝对值替换自动标记的相对值

> ID：14171021
> 
> 赞同：15
> 
> 时间：2013-01-05T10:49:56.453
> 
> 标签：python, matplotlib, pie-chart

我正在根据 matplotlib-demo 创建一个饼图：[https ://matplotlib.org/1.2.1/examples/pylab_examples/pie_demo.html](https://matplotlib.org/1.2.1/examples/pylab_examples/pie_demo.html)

每个的百分比`frac`似乎是自动标记的。如何用绝对值替换饼图上绘制的这些自动标记的相对值 (%) `fracs[]`？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-05T11:22:23.687

`help(pie)` says:

```
 *autopct*: [ *None* | format string | format function ]
    If not *None*, is a string or function used to label the
    wedges with their numeric value.  The label will be placed inside
    the wedge.  If it is a format string, the label will be ``fmt%pct``.
    If it is a function, it will be called. 
```

so you can turn the percentages back into original values by multiplying by the total size of the pie and dividing by 100:

```
figure(1, figsize=(6,6))
ax = axes([0.1, 0.1, 0.8, 0.8])
labels = 'Frogs', 'Hogs', 'Dogs', 'Logs'
fracs = [15, 30, 45, 10]
total = sum(fracs)
explode=(0, 0.05, 0, 0)
pie(fracs, explode=explode, labels=labels,
    autopct=lambda(p): '{:.0f}'.format(p * total / 100),
    shadow=True, startangle=90)
show() 
```

![](../Images/a440ea8b919668f500e1fabd8fd38485.png)

# prolog - 解决序言中的逻辑练习

> ID：14171024
> 
> 赞同：0
> 
> 时间：2013-01-05T10:50:16.043
> 
> 标签：prolog

我正在尝试学习 Prolog，但我在逻辑练习方面遇到了一些麻烦。

> Bob、Tom、Sam 在银行担任会计师、出纳员和经理。以下是关于它们的更多事实：
> 
> *   如果 Sam - 收银员，而不是 Tom - 经理。
> *   如果山姆 - 经理，汤姆 - 会计师。
> *   如果汤姆不是收银员，鲍勃 - 不是经理。
> *   如果 Bob - 会计师，Sam - 经理。
> 
> 找出汤姆、山姆和鲍勃的职业。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T22:29:25.047

给定小数据集，您可以使用**generate 和 test**解决，请参阅[permutation](http://www.swi-prolog.org/pldoc/doc_for?object=permutation/2) /2 。为了轻松翻译每条规则，请使用工作人员名称命名一个变量。我将只显示第一个条件

```
q([sam=Sam, tom=Tom, bob=Bob]) :-
  ...,
  ( Sam = cashier -> Tom = manager ; true ),
  .... 
```

有了这个，我得到了这些解决方案

```
?- q(X).
X = [sam=accountant, tom=cashier, bob=manager] ;
X = [sam=manager, tom=accountant, bob=cashier] ;
X = [sam=accountant, tom=manager, bob=cashier] ;
false. 
```

# java - 从另一个安卓应用下载并安装安卓应用

> ID：14171025
> 
> 赞同：0
> 
> 时间：2013-01-05T10:50:22.923
> 
> 标签：java, android, installation, android-manifest, google-play

是否可以从另一个 android 应用程序下载和安装 android 应用程序（来自 Google Play）？如果是这样，您能否提供一个如何实现它的示例？谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T10:57:19.223

您可以在 Play 商店应用程序的帮助下做到这一点：

```
 Uri uri = Uri.parse("market://details?id=" + "the.package.name");
    Intent intent = new Intent(Intent.ACTION_VIEW, uri);
    activity.startActivity(intent); 
```

# job-scheduling - 为 FileWatcher Autosys 作业指定多个文件

> ID：14171027
> 
> 赞同：-1
> 
> 时间：2013-01-05T10:51:15.013
> 
> 标签：job-scheduling, autosys

我想设置一个 FileWatcher 作业，在它开始之前寻找多个信号文件。在触发子作业之前，有什么方法可以检查是否存在多个文件？或者我是否必须创建多个文件观察者作业，每个文件一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T20:17:52.757

File Trigger (R11) 或 File watcher (legacy) 作业只能在 watch_file 属性中取一个值。R11 确实允许使用通配符，但这可能不是您想要的。我会为每个信号文件创建一个单独的作业，将这些作业放在一个盒子中，并在盒子成功时运行下游作业。

# maven - 使用 Nexus 时无法编译 Spring Roo 项目

> ID：14171028
> 
> 赞同：3
> 
> 时间：2013-01-05T10:51:15.717
> 
> 标签：maven, spring-roo, nexus

使用 Nexus 时无法编译 Spring Roo (1.2.3.RELEASE) 项目。

mvn 说找不到 roo.annotations:jar

```
[ERROR] Failed to execute goal on project Roo123: Could not resolve dependencies for project com.example.roo:Roo123:jar:0.1.0.BUILD-SNAPSHOT: Failure to find org.springframework.roo:org.springframework.roo.annotations:jar:1.2.3.RELEASE in http://192.168.16.232:8081/nexus/content/groups/public was cached in the local repository, resolution will not be reattempted until the update interval of nexus has elapsed or updates are forced -> [Help 1] 
```

但是这个 jar 已经在本地 maven 存储库中。

禁用 Nexus 时，通过重命名 .m2\settings.xml，它可以正常工作。

settings.xml 只配置了 1 个镜像

```
<mirror>
  <id>nexus</id>
  <mirrorOf>*</mirrorOf>
  <url>http://192.168.16.232:8081/nexus/content/groups/public</url>
</mirror> 
```

如何配置 Nexus？

（添加[http://spring-roo-repository.springsource.org/release](http://spring-roo-repository.springsource.org/release)作为代理存储库没有帮助）

更新：添加图片。在左侧添加 spring-roo-repository 没有帮助。下面的两个长答案也无济于事。

![Nexus 公开](../Images/4398396a2bc3856d1566b9da9f89aef5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T11:26:04.377

It's not enough to configuration a mirrorof only you have to configure the following:

```
<settings>
  <mirrors>
    <mirror>
      <!--This sends everything else to /public -->
      <id>nexus</id>
      <mirrorOf>*</mirrorOf>
      <url>http://localhost:8081/nexus/content/groups/public</url>
    </mirror>
  </mirrors>
  <profiles>
    <profile>
      <id>nexus</id>
      <!--Enable snapshots for the built in central repo to direct -->
      <!--all requests to nexus via the mirror -->
      <repositories>
        <repository>
          <id>central</id>
          <url>http://central</url>
          <releases><enabled>true</enabled></releases>
          <snapshots><enabled>true</enabled></snapshots>
        </repository>
      </repositories>
     <pluginRepositories>
        <pluginRepository>
          <id>central</id>
          <url>http://central</url>
          <releases><enabled>true</enabled></releases>
          <snapshots><enabled>true</enabled></snapshots>
        </pluginRepository>
      </pluginRepositories>
    </profile>
  </profiles>
  <activeProfiles>
    <!--make the profile active all the time -->
    <activeProfile>nexus</activeProfile>
  </activeProfiles>
</settings> 
```

Apart from your configuration you need to delete your local repository and retry the build. Have you configured Nexus correctly to have access to the internet like maven central etc. ?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T11:28:12.920

我不知道您是否拥有 Nexus 安装的管理员权限，但您必须在 Nexus 安装中添加[一个新的代理存储库](http://www.sonatype.com/books/nexus-book/reference/config-sect-new-repo.html)。

您必须添加的回购是

```
http://spring-roo-repository.springsource.org/release 
```

您应该有一个如下所示的设置文件（与 khmarbaise 的版本略有不同）：

```
<settings
    xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd">
      <servers>  
          <server>  
              <id>central</id>  
              <username>your-user</username>  
              <password>your-user</password>  
          </server>  
          <server>  
              <id>mirror</id>  
              <username>your-user</username>  
              <password>your-user</password>  
          </server>  
      </servers>  
      <mirrors>  
        <mirror>  
            <id>mirror</id>  
            <url>https://url.to.your.nexus</url>  
            <mirrorOf>*</mirrorOf>  
        </mirror>  
      </mirrors>  
      <profiles>  
          <profile>  
              <id>defaultprofile</id>  
              <repositories>  
                  <repository>  
                      <id>central</id>  
                    <name>Repository for your artifacts</name>  
                      <url>https://url.to.your.nexus</url>  
                      <releases>  
                          <enabled>true</enabled>  
                    </releases>  
                      <snapshots>  
                          <enabled>true</enabled>  
                    </snapshots>  
                  </repository>  
              </repositories>  
              <pluginRepositories>  
                  <pluginRepository>  
                      <id>central</id>  
                    <name>Repository for your artifacts</name>  
                      <url>https://url.to.your.nexus</url>  
                      <releases>  
                          <enabled>true</enabled>  
                    </releases>  
                      <snapshots>  
                          <enabled>true</enabled>  
                    </snapshots>  
                  </pluginRepository>  
              </pluginRepositories>  
              <properties>  
                  <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>  
              </properties>  
              <activation>  
                  <activeByDefault>true</activeByDefault>  
              </activation>  
          </profile>  
      </profiles>  
      <activeProfiles>  
          <activeProfile>defaultprofile</activeProfile>  
      </activeProfiles>  
</settings> 
```

您必须覆盖`central`（见上文），以便 Maven 不会连接到默认值`central`( `repo1.maven.org`)。

# java - 所选项目未显示在微调器 android 上

> ID：14171030
> 
> 赞同：1
> 
> 时间：2013-01-05T10:51:48.187
> 
> 标签：java, android, android-spinner

我有一个微调器，并为微调器添加了自定义样式。问题是当我选择一个项目时，它不会显示在微调器上，但是当我使用 android 微调器样式时，它会显示我在微调器上选择的内容。是否需要添加更多代码以使其正常工作？否则，微调器的一切工作。当在微调器中选择一个项目以显示文本时，我已经编写了该应用程序。这些东西有效。但它没有显示我选择的内容。

这是我的代码

```
MyAdapter  dataAdapter3 = new MyAdapter(this, R.layout.spinner, list3);
spinner1.setAdapter(dataAdapter3); 
```

清单 3 指的是一个清单

```
List<String> list3 = new ArrayList<String>(); 
```

这是自定义微调器样式的类

```
public class MyAdapter extends ArrayAdapter<String>
    {
      private List<String> listString = new ArrayList<String>();

      public MyAdapter(Context context, int textViewResourceId, List<String> objects) {
        super(context, textViewResourceId, objects);

      this.listString  = objects;
      }

      @Override
      public View getDropDownView(int position, View convertView,ViewGroup parent) {
            return getCustomView(position, convertView, parent);
      }

      @Override
      public View getView(int position, View convertView, ViewGroup parent) {
            return getCustomView(position, convertView, parent);
      }

      public View getCustomView(int position, View convertView, ViewGroup parent) {

       LayoutInflater inflater=getLayoutInflater();
       View row=inflater.inflate(R.layout.spinner, parent, false);
       TextView label=(TextView)row.findViewById(R.id.textView1);
       label.setText(listString.get(position)); 

       return row;

      }
    } 
```

请问有人能告诉我这里是否犯了任何错误吗？这是我选择项目时微调器的显示方式 ![在此处输入图像描述](../Images/7a8c82f7b6531631c901f8e425ac73f9.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-06T05:05:18.483

我在这个问题上尝试了几天。其实代码还不错。问题出在 spinner.xml 文件中。我在 textview 中添加了一个大的填充。因此，尽管微调器工作，但微调器上的选定项目不可见。重点是我忘记了 xml 文件。:D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-05T16:12:06.143

将布局 spinner.xml 文件中的填充修改为较低的值，例如：

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:padding="8dp"
android:textColor="#000000"
android:textSize="14sp" /> 
```

# c# - 使用 C# 代码将图像保存在 Informix 数据库中？

> ID：14171033
> 
> 赞同：1
> 
> 时间：2013-01-05T10:52:14.483
> 
> 标签：c#, database, informix

如何使用 C# 代码将图像保存在 Informix 数据库中？

目前，我无法使用 C# 代码将图像保存在 Informix 数据库中。

所有步骤都有效，只有在查询即将执行时才会抛出错误“E42000：（-201）发生语法错误”。

下面是代码。

```
mycon.Open();
int len = Upload.PostedFile.ContentLength;
byte[] pic = new byte[len];
HttpPostedFile img = Upload.PostedFile;
Response.Write("Size of file = " + pic);
img.InputStream.Read(pic, 0, len);
//Upload.PostedFile.InputStream.Read(pic,0,len);
string str = "insert into imageinfo (name,address,photo) values('" + txtname.Text + "','" + txtaddress.Text + "'," + pic + ")";//,photo,@photo
mycmd = new OleDbCommand(str, mycon);
//mycmd.Parameters.AddWithValue("@id", int.Parse(txtid.Text));
mycmd.Parameters.AddWithValue("@name", txtname.Text);
mycmd.Parameters.AddWithValue("@address", txtaddress.Text);
mycmd.Parameters.AddWithValue("@photo", pic);
mycmd.ExecuteNonQuery();
mycon.Close();
lblMessage.Text = "Image details inserted successfully";
Response.Redirect("~/RetriveImage.aspx");
mycon.Close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T11:28:59.940

首先是您的代码是来自至少 2 个来源的复制/粘贴混乱，因为它没有任何意义。

您的插入直接具有值 - 抱歉，您不能像那样放入 pic - 但您定义了未使用的参数。2 源代码。

然后代码被盲目地复制/粘贴。您定义命名参数，但 OleDb 不支持命名参数 (http://social.msdn.microsoft.com/Forums/en-US/vsreportcontrols/thread/637db5d4-e205-489c-b127-7ca14abc48e3/) 仅按位置参数，它告诉我你曾经通过 OleDb 使用 Informix 的参数并且只是将代码复制/粘贴在一起。

*   去掉INSERT语句中的直接数据，放入参数标记。
*   然后使用参数，根据我发送给您的 MS 链接（位置，标记是？）。

然后它将起作用。

有时它可能需要您实际阅读文档，而不是仅仅将来自不同来源的代码拼接在一起并寻求帮助。

# asp.net - 当 radnumerictextbox 处于只读模式时，如何使旋转按钮起作用..？

> ID：14171034
> 
> 赞同：0
> 
> 时间：2013-01-05T10:52:14.557
> 
> 标签：asp.net, telerik, telerik-radinput

当 radnumerictextbox 处于只读模式时，如何使旋转按钮起作用..？

我正在使用带有旋转按钮的 Telerik... 我需要 RadNumericTextBox 处于只读模式，但它需要使用旋转按钮进行更新...

```
<telerik:RadNumericTextBox ID="radntxt_TimePickers" AutoPostBack="false" runat="server"
                                MinValue="1" MaxValue="20" ClientEvents-OnValueChanged="radntxt_TimePickers_CreateTimePickers" 
                                NumberFormat-AllowRounding="true" NumberFormat-DecimalDigits="0" NumberFormat-GroupSeparator="" 
                                IncrementSettings-InterceptMouseWheel="true" Width="40px" ShowSpinButtons="true" ReadOnly="true">
                               </telerik:RadNumericTextBox> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T11:23:56.033

It sounds like you want to make it readonly or not along with the spinning buttons.

You could use the code found here to make it readonly: [http://www.telerik.com/community/forums/aspnet-ajax/input/radtextbox-set-read-only.aspx](http://www.telerik.com/community/forums/aspnet-ajax/input/radtextbox-set-read-only.aspx)

Set it to false to make it editable.

```
<script type="text/javascript">  
function setReadOnly()  
{  
    var TextBox1 = $find("<%= RadTextBox1.ClientID %>");  
    TextBox1._textBoxElement.readOnly = true;  
}  
</script> 
```

Note that $find is specifically for ASP.NET

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-22T13:35:53.583

我在文本框中添加了一个 OnKeyPress 客户端事件，然后添加了一个 Javascript 函数来取消该事件

```
 <telerik:radnumerictextbox id="RadTextBox1" showspinbuttons="true" runat="server">  
         <ClientEvents OnKeyPress="OnKeyPress" />  
    </telerik:radnumerictextbox> 
```

```
<!-- begin snippet: js hide: false console: true babel: false -->
```

```
<script type="text/javascript"> 
function OnKeyPress(sender, eventArgs) 
{ 
   eventArgs.set_cancel(true);    
} 
</script> 
```

# python - lxml 截断包含“小于”字符的文本

> ID：14171035
> 
> 赞同：5
> 
> 时间：2013-01-05T10:52:34.060
> 
> 标签：python, html-parsing, lxml

```
>>> s = '<div> < 20 </div>'
>>> import lxml.html
>>> tree = lxml.html.fromstring(s)
>>> lxml.etree.tostring(tree)
'<div> </div>' 
```

有没有人知道任何解决方法？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-05T11:43:54.880

您的 HTML 输入已损坏；那个`<`左尖括号应该被编码为`&lt;`。从有关解析损坏的 HTML的[`lxml`文档中：](http://lxml.de/parsing.html)

> 对解析损坏的 HTML 的支持完全取决于 libxml2 的恢复算法。如果您发现文档严重损坏以至于解析器无法处理它们，这不是 lxml 的错。也不能保证生成的树将包含原始文档中的所有数据。解析器在努力继续解析时可能不得不丢弃严重损坏的部分。尤其是放错位置的元标记可能会受到这种影响，这可能会导致编码问题。

换句话说，您可以从此类文档中获得什么，`lxml`处理损坏的 HTML 的方式是不可配置的。

*您可以*尝试的一件事是使用*不同*的HTML 解析器。试试[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)，它的 HTML 处理功能可能会为您提供该文档的不同版本，从而为您提供所需的内容。BeautifulSoup 可以重用不同的解析器后端，包括`lxml`and `html5lib`，所以它会给你更多的灵活性。

`html5lib`解析器确实为您提供了字符`<`（转换为`&lt;`转义）：

```
>>> BeautifulSoup("<div> < 20 </div>", "html5lib")
<html><head></head><body><div> &lt; 20 </div></body></html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T10:54:43.510

您`<`实际上应该是`&lt;`，因为`<`有点像 html 中的“保留字符”。然后它应该工作。

# vb.net - 如何从 vb.net 中的另一个表单中清除列表视图

> ID：14171043
> 
> 赞同：-1
> 
> 时间：2013-01-05T10:53:10.507
> 
> 标签：vb.net, winforms, listview

我想知道，如何从另一个表单中清除列表视图项目。例如，我有一个带有 ListView 的 Form A，我想从 Form B 中清除 Form A ListView Items。我尝试的是，在 Form A 中创建一个函数来清除 listView 并从 Form B 调用该函数。但是它不管用。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T18:05:18.317

这是一种快速简便的方法；这将使用 for each 从列表框中删除所有项目...

```
 Private Sub btnClearListView_Click(sender As System.Object, e As System.EventArgs) Handles btnClearListView.Click

            For Each I In FormA.ListView1.Items
              FormA.ListView1.Items.Remove(I)
            Next

      End Sub 
```

谢谢！

# java - 如何使按钮在 Onclick 事件中出现和消失

> ID：14171044
> 
> 赞同：2
> 
> 时间：2013-01-05T10:53:17.963
> 
> 标签：java, android, layout

我有 2 个按钮邀请和共享，如果我单击邀请线性布局栏 1 将出现，其中包含 4 个图像视图，对于共享按钮，在这 4 个图像视图选项中也有相同的线性布局栏 2，如果我单击邀请和共享按钮，两个布局栏都会出现，但对我来说，当我点击邀请或分享时，一次应该只出现一个相应的栏......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T10:56:43.177

如果我理解正确的话，这样的事情就可以解决问题：

```
invite.setOnClickListener(new OnClickListener(){
    public void onClick(View v){
        linearlayoutbar1.setVisibility(View.VISIBLE);
        linearlayoutbar2.setVisibility(View.GONE);
    }
});

share.setOnClickListener(new OnClickListener(){
    public void onClick(View v){
        linearlayoutbar2.setVisibility(View.VISIBLE);
        linearlayoutbar1.setVisibility(View.GONE);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T11:06:39.843

*根据您的要求插入 LinearyLayout*

```
<merge>
<LinearLayout
    android:id="@+id/main"
    android:layout_height="fill_parent"
    android:layout_width="fill_parent"
    android:visibility="gone"  
    />
<LinearLayout
    android:id="@+id/sub"
    android:layout_height="fill_parent"
    android:layout_width="fill_parent"
    android:visibility="gone"  
    />  
</merge> 
```

`depending upon your invite and share button you can put these code invite.setOnClickListener() or share.setOnClickListener()`

*根据您的逻辑插入 LinearLayout 的可见性*

```
LinearLayout mainLayout=(LinearLayout)this.findViewById(R.id.main);
LinearLayout subLayout=(LinearLayout)this.findViewById(R.id.sub);

invite.setOnClickListener(new OnClickListener()
{
   public void onClick(View v)
    {
    mainLayout.setVisibility(View.VISIBLE);        
    }
});

 share.setOnClickListener(new OnClickListener()
 {
   public void onClick(View v)
    {
    subLayout.setVisibility(View.VISIBLE);        
    }
 }); 
```

# c - strlen(char*) 上的分段错误，但 char* 已终止

> ID：14171045
> 
> 赞同：0
> 
> 时间：2013-01-05T10:53:20.380
> 
> 标签：c, char, segmentation-fault

我有一个非常非常简单的函数，它只是将 char 转换为 char*，它表示 char 的二进制值，其中 0 和 1 作为字符。

```
char* stringToBin(char symbol) {
    int pos = 0;
    int value = (int) symbol;
    int rest;

    char* result = (char*) malloc(sizeof(char) * 9);

    while(value > 0) {
            if(value % 2 == 0) {
                    result[7-pos] = '0';
            }
            else {
                    result[7-pos] = '1';
            }
            pos++;
            value = value / 2;
    }

    while(pos < 8) {
            result[7-pos] = '0';
            pos++;
    }

    result[8] = '\0';

    puts(result);
    puts(strlen(result));

    return result;
} 
```

我的问题是我无法打印 char* 的长度。打印整个 char* 效果很好，但不计算大小。我总是遇到分段错误。我认为问题很简单，但我现在没有得到它。所以请给我缺少的提示；）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-05T10:55:59.467

问题不在于字符串的 NUL 终止，这很好。反而，

```
puts(strlen(result)); 
```

是错的。`puts()`需要一个 C 字符串，而你给它一个`size_t`. 改为：

```
printf("%zu\n", strlen(result)); 
```

（这假设 C99 格式说明符`%zu`可用`size_t`。如果不是，则使用：

```
printf("%u\n", (unsigned)strlen(result)); 
```

反而。）

# c++ - OpenCV 的 cvWriteFrame(..) 什么都不做

> ID：14171047
> 
> 赞同：1
> 
> 时间：2013-01-05T10:54:01.227
> 
> 标签：c++, qt, video, opencv

我花了几个小时试图用`CvVideoWriter`. 我总是得到一个大小为 5.54KB 且没有帧的文件。我检查了是否`CvVideoWriter`不为空，但不是。我还尝试显示我的 IplImage`cvShowImage`并正确显示。我尝试了多种编解码器（DIVX、H264、..）。

我发现当 VideoWriter 定义如下时，该函数将帧保存在 jpg 文件中：

```
CvVideoWriter* recorder = cvCreateVideoWriter("test0001.jpg", CV_FOURCC('I', 'Y', 'U', 'V'), -1, Size(w,h), true); 
```

这是我的程序：

```
IplImage* myIplFrame=...;
CvVideoWriter* recorder = cvCreateVideoWriter("test.avi", CV_FOURCC('I', 'Y', 'U', 'V'), 10, Size(w,h), true);

cvShowImage("test",myIplFrame); //showing image properly
cvWriteFrame(recorder, myIplFrame);
cvWaitKey(500); //not helping

cvReleaseVideoWriter(&recorder); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T18:37:57.770

应该内置 IYUV 编解码器，以便 videowriter 始终可以创建这种类型的文件。

您可以创建一个文件，因此权限是正确的。

您使用旧的 iplimage 而不是 cv 标准格式有充分的理由吗？
这是我要检查的第一件事。

见[http://docs.opencv.org/](http://docs.opencv.org/)

附言。如果您不显示图像，则不需要 waitkey()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T18:47:11.153

我在 SO 上找到了另一个类似的线程，有人提到你应该用 MinGW 而不是 VS 编译。我这样做了，并在 .pro 文件（Qt）中包含了新的库和包含这样的路径：

```
INCLUDEPATH += C:\OpenCV-2.3.1\mingwBuild\install\include

LIBS += -LC:\\OpenCV-2.3.1\\opencv\\build\\x86\\mingw\\lib \
    -lopencv_core231 \
    -lopencv_highgui231 
```

注意我是如何使用`opencv`文件夹中的库的；例如，在您使用 CMake 配置和生成它之后，这是包含源的文件夹。

另一个提示你，读者，有同样的问题是如果 cv::Mat 没有被识别，或者你得到一些奇怪的错误 - *simpleFree*函数未定义（或类似的东西，不记得了）例如

希望能帮助到你。

# jquery - Grails：在 Twitter Bootstrap 中包含 JQuery 自动完成功能

> ID：14171053
> 
> 赞同：2
> 
> 时间：2013-01-05T10:55:02.893
> 
> 标签：jquery, grails, twitter-bootstrap, autocomplete

我正在使用 Twitter Bootstrap 2.2.2 开发一个 web 应用程序。

我正在尝试为多个值包含 JQuery 自动完成功能：http: [//jqueryui.com/autocomplete/#multiple](http://jqueryui.com/autocomplete/#multiple)

这是为了允许用户从两个域类之间的 hasMany 关系中进行多项选择。

我已经在没有引导程序的新 grails 项目中测试了 jquery 自动完成功能，它运行良好。

但是，一旦我将它包含到我的项目中并将引导布局添加到标题中的视图中，文本字段的样式就会改变，并且自动完成功能不再起作用。

因此，我认为它与文本字段的引导样式有关，但我不知道如何解决这个问题。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T06:15:54.640

听起来你有冲突。我建议查看浏览器控制台以查看任何错误输出。

如果发现有冲突，请尝试更改 Bootstrap 命名空间：

**[引导文档](http://twitter.github.com/bootstrap/javascript.html)**

> “有时需要将 Bootstrap 插件与其他 UI 框架一起使用。在这种情况下，有时会发生命名空间冲突。如果发生这种情况，您可以在要恢复其值的插件上调用 .noConflict。”

```
var bootstrapButton = $.fn.button.noConflict() // return $.fn.button to previously assigned value
$.fn.bootstrapBtn = bootstrapButton            // give $().bootstrapBtn the bootstrap functionality 
```

或者，您可以[更改 JQuery UI 命名空间](https://stackoverflow.com/questions/1535691/how-to-change-namespace-of-jquery)。不过，这两个 UI 框架应该可以很好地协同工作。[JQuery UI Bootstrap](http://addyosmani.github.com/jquery-ui-bootstrap/)项目就是一个例子。

# groovy - 将 FPGrowth 与 rapidminer 一起使用时如何获取频繁项集值？

> ID：14171055
> 
> 赞同：-1
> 
> 时间：2013-01-05T10:55:10.927
> 
> 标签：groovy, rapidminer

在**rapidminer**中，**FPgrowth 算法**的应用并没有给出属性的实例，而是给出了属性的名称及其支持。我的问题是如何通过`Groovy`. 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T23:51:30.610

FPGrowth 算法是一种处理二进制值的算法。因此 RapidMiner 的 FPGrowth 将任何属性视为二进制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T10:12:25.047

好吧，rapidminer 中 fpgrowth 的实现只接受二项式值，这意味着**二进制 fpgrowth 实现。如果属性有值，则 fpgrowth 将其读取为 1，否则将其视为 0。解决方案是创建实现非线性 fpgrowth 的新运算符。谢谢。

# entity-framework - 使用 ADO.net 实体框架时不会映射多对多关系

> ID：14171056
> 
> 赞同：0
> 
> 时间：2013-01-05T10:55:17.717
> 
> 标签：entity-framework, entity-framework-4, ado.net

我在我的 sql 服务器中有这三个表，但是当使用 EF 映射这些表时，我将丢失表示 MM 关系的表 - accountsitemapping 表 - 在这种情况下，我将无法知道哪些帐户链接到哪些站点。
为了解决这个问题，我刚刚在 AccountSiteMapping 表中添加了一个新列，然后我再次重新映射了这些表，然后我可以访问 AccountSiteMapping 表。

![在此处输入图像描述](../Images/ef6e8c8473693ddcebcefa6ffbbedf7e.png)

但是有没有办法在不需要修改我的表设计的情况下解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T11:05:50.567

默认情况下，实体框架将隐藏多对多关系中的所有映射表。您必须以这种方式进行查询：

例如，`SiteDefinitions`与给定关联的查找`org_ID`：

```
db.SiteDefinitions.Where(a => a.AccountDefinitions.Any(b => b.ORG_ID == org_ID)); 
```

# android - 在 imageview 上添加文本并保存

> ID：14171061
> 
> 赞同：0
> 
> 时间：2013-01-05T10:56:18.653
> 
> 标签：android, android-layout, android-canvas, android-imageview, android-image

我正在尝试创建一个向图像添加文本的应用程序。在此我的图像来自画廊，文本由用户添加。为此，我创建了我的布局

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/relativelayout"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<ImageView
    android:id="@+id/myImageView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"/>

<TextView
    android:id="@+id/myImageViewText"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/myImageView"
    android:layout_alignLeft="@+id/myImageView"
    android:layout_alignRight="@+id/myImageView"
    android:layout_alignTop="@+id/myImageView"
    android:layout_margin="1dp"
    android:gravity="center"
    android:text="Hello"
    android:textColor="#000000" /> 
```

活动如下：

```
public class AddText extends Activity {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);

    setContentView(R.layout.add_text);

    findViewById(R.id.relativelayout).setDrawingCacheEnabled(true);
    Bitmap finalImg = findViewById(R.id.relativelayout).getDrawingCache();

    String save_location = Environment.getExternalStorageDirectory()
            .getAbsolutePath() + "/texted";
    File dir = new File(save_location);
    if (!dir.exists())
        dir.mkdirs();
    File f = new File(dir, "tmp.jpg");
    FileOutputStream out;
    try {
        out = new FileOutputStream(f);
        finalImg.compress(Bitmap.CompressFormat.PNG, 90, out);

        out.flush();
        out.close();
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

现在我想用文本保存整个图像。用文字保存图像的方法是什么？

错误是：

![在此处输入图像描述](../Images/7af72e9b9ffd0255977b57f9130a2285.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T11:01:27.293

您的布局应该将启用的绘图缓存设置为 true。您可以通过 setter 设置它`View.setDrawingCacheEnabled(true);`然后您应该能够`View`使用`View.getDrawingCache()`. `View`该方法返回一个表示' 内容的 Bitmap 实例。您可以使用`Bitmap.compress(..)`, 来存储它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-05T11:54:48.653

After the image selection, provide the user an edit text box where he enters the text. Instead of relative layout use Frame layout so that text will appear over the image.

You have to convert the view into a Bitmap

here is the code

```
 public static Bitmap loadBitmapFromView(View v)
 { 
Bitmap b = Bitmap.createBitmap(v.getLayoutParams().width, v.getLayoutParams().height, Bitmap.Config.ARGB_8888); 
Canvas c = new Canvas(b); v.layout(0, 0, v.getLayoutParams().width,v.getLayoutParams().height); v.draw(c); 
return b;
 } 
```

# android - 在单个活动中将大字符串显示到多个页面中

> ID：14171065
> 
> 赞同：2
> 
> 时间：2013-01-05T10:56:41.773
> 
> 标签：android

我对android开发很陌生。我正在尝试创建一个简单的基于两个活动的 ebbok 类型应用程序，其中`activity1`是目录并`activity2`显示详细信息。我在 Activity1 中有一个列表视图，其中列出了目录。单击任何特定内容时，我会加载`activity2`. 在`onCreate`中`activity2`，我将内容加载到字符串中（来自资产中的 txt 文件）。并在 textView 中显示（在`activity2`.xml 中定义）。到目前为止，一切都很好。现在的挑战是按页面显示内容，因为到目前为止，我的所有字符串都被加载到`activity2`. 所以我在底部添加了两个按钮`activity2`（在 中定义`activity2.xml`）。我现在计划的逻辑是

1.  获取屏幕高度（我可以得到）
2.  获取底部高度并从 1) 中减去 2)。现在我不能这样做，因为我无法获得按钮`onCreate`高度`Activity2`
3.  然后找到我可以在一页中容纳多少文本，相应地找到页数，使用页面索引并使用页面分隔符，当用户单击“下一步”按钮时，继续将剩余的文本加载到下一页中。

所以我需要帮助 - 如何获得按钮宽度，正如我在 2) 中提到的那样 - 您可以共享以执行上述 3) 的任何示例代码也将对我有所帮助。

任何一位专家的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T11:56:15.763

使用 Fragments 将解决您的问题。

[**片段**](http://developer.android.com/guide/components/fragments.html)：

Fragment 表示 Activity 中的一种行为或用户界面的一部分。您可以在单个活动中组合多个片段以构建多窗格 UI 并在多个活动中重用一个片段。您可以将片段视为活动的模块化部分，它有自己的生命周期，接收自己的输入事件，并且可以在活动运行时添加或删除（有点像“子活动”，您可以在不同的活动中重复使用）。

例如，一个新闻应用程序可以使用一个片段在左侧显示文章列表，另一个片段在右侧显示一篇文章——两个片段并排出现在一个活动中，每个片段都有自己的一组生命周期回调方法并处理自己的用户输入事件。因此，用户可以选择一篇文章并在同一个活动中阅读所有文章，而不是使用一个活动来选择一篇文章和另一个活动来阅读文章

有关片段的更多信息，只需通过[此链接](http://developer.android.com/guide/components/fragments.html)。希望它会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-03T22:25:39.767

我想出了一种非常有效的方法来显示跨页数的长字符串。-我将长文本显示到文本视图中并禁用滚动-然后找出布局中的行和单个屏幕上的行，因此我知道长字符串将跨越多少个屏幕（页面）-然后每当用户单击按钮转到下一页或滑动屏幕转到下一页然后我使用 TexView.scrollTo() 函数向前移动到行数（屏幕上的行数）。所以它变得和移动到下一页一样好

# git - 如何解决 git 合并冲突？

> ID：14171076
> 
> 赞同：1
> 
> 时间：2013-01-05T10:57:19.217
> 
> 标签：git

> **可能重复：**
> [无法与 Git 合并](https://stackoverflow.com/questions/5772908/trouble-merging-with-git)

我下载了一个 git repo 做了一些更改（删除了一些文件），然后提交了它。然后我做了 git checkout -b "new branch"。在这里我没有删除文件，但我做了一些更改并提交了它。现在我回到我的主分支并尝试做一个 git merge new_branch_i_created 但它说：

```
fatal: 'merge' is not possible because you have unmerged files.
Please, fix them up in the work tree, and then use 'git add/rm <file>' as
appropriate to mark resolution and make a commit, or use 'git commit -a'. 
```

我究竟做错了什么？

如果我尝试从我的主分支结帐到新分支，它会说：

```
GDCatalog/.classpath: needs merge
GDCatalog/src/com/cyrilmottier/android/gdcatalog/CatalogActivity.java: needs merge
GDCatalog/src/com/cyrilmottier/android/gdcatalog/PagedViewActivity.java: needs merge
GreenDroid-GoogleAPIs/.classpath: needs merge
GreenDroid/.classpath: needs merge
GreenDroid/src/greendroid/widget/PagedView.java: needs merge
error: you need to resolve your current index first 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T11:54:17.103

The error message from git say it all. You have un-merged changes between your two branches that need to be resolved before submitted the merge commit. Those merge conflicts happen because the file have been modified in the two branches.

To resolve this, you need to edit the files in conflict. For each file, you'll have to resolve the merge. The conflicts will be surrounded by `<<<<<<<<<<<`, `===========` and `>>>>>>>>>>` markers. How you resolve them will depends on the changes (you may want to keep your changes, the changes in the remote branch or a combination of the two).

Once you've resolved all the conflicts, then you'll have to do `git add` for each file. And then `git commit`. The pre-filled commit message will indicate this is a merge commit and that there were some conflict resolved. You probably don't have to edit it unless your coding style mandate some particular formatting of your commit message.

So, to summarise, you'll have to do:

```
$ emacs GDCatalog/.classpath
... resolve conflict ...
$ git add GDCatalog/.classpath
... do the same for all other files ...
$ git commit 
```

# android - 标题未显示在 Titanium 的复选框中

> ID：14171078
> 
> 赞同：0
> 
> 时间：2013-01-05T10:57:46.147
> 
> 标签：android, checkbox, titanium, title

我有一个根据 xml 文件的标签创建复选框的例程。

复选框的标题不会显示在屏幕上。

```
switch (items.item(i).getAttribute("type")) 
    {
        case 'checkbox':

                var tempViewCheckBoxes = Ti.UI.createView({backgroundColor:'white', layout:'vertical'});
                var tempRespuestas = items.item(i).getElementsByTagName("Respuesta");

                for (var j=0;j<tempRespuestas.length;j++) 
                {
                    var checkBox = Titanium.UI.createSwitch({
style:Titanium.UI.Android.SWITCH_STYLE_CHECKBOX,
                                                     title:tempRespuestas.item(j).text,
                                                        value:false,
                                                        visible : true,
                                                        top:10,
                                                        left:10,
                                                        height : 'auto',
                                                        width : 'auto'
                                                });

                    var tempLabelCheckBox = Ti.UI.createLabel({
                            text: tempRespuestas.item(j).text,
                            font:{fontSize:30},
                            top:'30',
                            left:'10',
                            textAlign:'center',
                            color:'black',
                            width:'auto',
                            height:'auto'
                          });

                    tempViewCheckBoxes.add(checkBox);
                    tempViewCheckBoxes.add(tempLabelCheckBox);

                }
                tempView.add(tempViewCheckBoxes);
                break;
       }

    scrollView.addView(tempView);
} 
```

虽然我可以看到标签显示正确的文本，但我没有看到复选框中显示的文本。

谁能解释一下为什么不显示文字？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T09:16:38.133

就像添加颜色一样简单：'#000'，我相信默认颜色是黑色而不是白色。

```
var checkBox = Titanium.UI.createSwitch({
                                       style:Titanium.UI.Android.SWITCH_STYLE_CHECKBOX,
                                       title:tempRespuestas.item(j).text,
                                       value:false,
                                                    color: '#000',
                                                    visible : true,
                                                    top:10,
                                                    left:10,
                                                    height : 'auto',
                                                    width : 'auto'
                                            }); 
```

# android - 如何在 onDestroy() 中获取结果代码？

> ID：14171079
> 
> 赞同：1
> 
> 时间：2013-01-05T10:57:51.207
> 
> 标签：android

当我的活动被破坏时，我想检查结果代码是否`RESULT_OK`要进行一些清理。有一种`setResult`方法，但没有getter。

我如何*从活动中*检查活动是否要结束`RESULT_OK`？

```
@Override
public void onDestroy() {
    super.onDestroy();

    if (isFinishing()) {
        if (???result??? == RESULT_CANCELED) {
            // Do stuff
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T11:05:56.953

你不能直接在里面做`onDestroy`，你不应该依赖它。结果代码是`onActivityResult`回调的形式参数。如果你想在里面检查它的值，`onDestroy`你可以将它存储在一个具有类作用域的变量中。

# c# - 是否需要导入 System.web.UI 才能访问 C# 类库中的 Session？

> ID：14171081
> 
> 赞同：0
> 
> 时间：2013-01-05T10:58:09.390
> 
> 标签：c#

我需要在 C# 类库中使用 Session。为此，我需要使用 System.Web.UI 导入。我的部分代码是

```
using System.IO;
using System.Globalization;
using System.Web

    namespace sundss_framework
    {
        public class package
        {

           Session["Sesval"]="12121";
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T11:00:22.670

你不需要`System.Web.UI`，只要`System.Web`。然后像这样访问会话：

```
 HttpContext.Current.Session["Sesval"] = "12121"; 
```

# php - 为什么我在 Joomla 2.5 中没有处理这个水平菜单的模块？

> ID：14171086
> 
> 赞同：0
> 
> 时间：2013-01-05T10:58:31.717
> 
> 标签：php, joomla, content-management-system, joomla2.5

我正在使用 Joomla 2.5 创建这个网站：http: [//scorejava.com/](http://scorejava.com/)

我使用名为 business_14a 的模板

我有一个问题要问您：如您所见，我在网站徽标部分下方有一个水平菜单，在模板右侧放置了一个垂直主菜单

问题是，如果我进入管理面板并打开我的模块管理部分，我只有一个用于右侧主菜单的模块，但我没有用于水平菜单的模块。

为什么？怎么可能？水平菜单不是由模块处理的？

这对我来说是个问题，因为我会用下拉菜单更改这个水平菜单，但在这种情况下，我不能将另一个模块放在它的位置......

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T12:44:03.613

你有[这个](http://www.jm-experts.com/templates/business-14)模板吗？

你检查过模板的设置吗？一些模板有自己的集成菜单，默认使用。正如您在上面的链接中看到的，您有自己的主菜单位置，因此您可以下载并安装其他菜单插件并将它们放置在同一位置（...如果您可以停用默认位置）。

你已经联系过开发商了吗？

# c++ - 在 Qt 中告诉主类一个项目被点击

> ID：14171087
> 
> 赞同：2
> 
> 时间：2013-01-05T10:58:49.470
> 
> 标签：c++, qt, mouseevent

**情况**：

我`Dialog`在 QT 有一堂课，我在上面画了一个正方形的栅格。正方形在`MySquare`类 ( `MySquare: QGraphicsItem`) 中实现。

MySquare 内部有许多函数（mysquare.h protected: ）

```
 void mousePressEvent(QGraphicsSceneMouseEvent *event);
    void mouseReleaseEvent(QGraphicsSceneMouseEvent *event);
    void keyPressEvent(QKeyEvent *event);
    void mouseMoveEvent(QGraphicsSceneMouseEvent *event); 
```

当我单击一个正方形时，它会使用以下函数为我提供正方形的相对坐标。

```
void MySquare::mousePressEvent(QGraphicsSceneMouseEvent *event)
{
    update();
    QGraphicsItem::mousePressEvent(event);
    qDebug() << "mouse Pressed";
    qDebug() << "coordinates:";
    qDebug() << "X:"<< x/w << " Y:" << y/h ;
} 
```

![在此处输入图像描述](../Images/b7caa3ad3d9c3f4e0fd105b42e3b131f.png)

其中 x 和 y 是光栅中的 x 和 y 位置，w 和 h 代表宽度和高度

但是我的**问题**是如何让我的 Dialog 类知道点击了哪个方块？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T12:25:47.103

您可以`MySquare`通过 Qt 的信号/槽机制在和您的 Dialog 之间进行通信。当一个方块被点击时，它会发出一个信号，并且对话框有一个连接到该信号的插槽。

要确定*是哪个*方格发送了信号，有几种可能性：

*   正方形的坐标在信号中传递
*   发出信号的`this`指针`MySquare`被传递
*   在插槽中，您可以使用该`sender`函数来确定是谁发出了信号。

# .net - 基于 ServiceStack.Razor 的网站的 AppHarbor 预编译失败

> ID：14171088
> 
> 赞同：2
> 
> 时间：2013-01-05T10:58:57.307
> 
> 标签：.net, razor, servicestack, appharbor

我正在尝试将当前基于[ServiceStack.Razor](http://razor.servicestack.net/)的非常简单的 Web 应用程序部署到 AppHarbor，但它在 asp.net 预编译步骤中失败：

```
Microsoft (R) ASP.NET Compilation Tool version 4.0.30319.17929
Utility to precompile an ASP.NET application
Copyright (C) Microsoft Corporation. All rights reserved.

d:\temp\ueggj0qu.hf5\temp\root\61980531\2c38de0c\App_Web_431dglyw.0.cs(15): error CS0146: Circular base class dependency involving 'RazorOutput.ViewPage' and 'RazorOutput.ViewPage'

[HttpCompileException]: d:\temp\ueggj0qu.hf5\temp\root\61980531\2c38de0c\App_Web_431dglyw.0.cs(15): error CS0146: Circular base class dependency involving 'RazorOutput.ViewPage' and 'RazorOutput.ViewPage'
   at System.Web.Compilation.AssemblyBuilder.Compile()
   at System.Web.Compilation.WebDirectoryBatchCompiler.CompileAssemblyBuilder(AssemblyBuilder builder)
   at System.Web.Compilation.WebDirectoryBatchCompiler.<CompileNonDependentBuildProviders>b__0(AssemblyBuilder assemblyBuilder)
   at System.Web.Compilation.CompilationUtil.CompileParallel(ICollection assemblyBuilders, Action`1 action)
   at System.Web.Compilation.WebDirectoryBatchCompiler.CompileNonDependentBuildProviders(ICollection buildProviders)
   at System.Web.Compilation.WebDirectoryBatchCompiler.Process()
   at System.Web.Compilation.BuildManager.BatchCompileWebDirectoryInternal(VirtualDirectory vdir, Boolean ignoreErrors)
   at System.Web.Compilation.BuildManager.BatchCompileWebDirectory(VirtualDirectory vdir, VirtualPath virtualDir, Boolean ignoreErrors)
   at System.Web.Compilation.BuildManager.PrecompileWebDirectoriesRecursive(VirtualDirectory vdir, Boolean topLevel)
   at System.Web.Compilation.BuildManager.PrecompileWebDirectoriesRecursive(VirtualDirectory vdir, Boolean topLevel)
   at System.Web.Compilation.BuildManager.PrecompileAppInternal(VirtualPath startingVirtualDir, IEnumerable`1 excludedVirtualPaths)
   at System.Web.Compilation.BuildManager.PrecompileApp(VirtualPath startingVirtualDir, IEnumerable`1 excludedVirtualPaths)
   at System.Web.Compilation.BuildManager.PrecompileApp(ClientBuildManagerCallback callback, IEnumerable`1 excludedVirtualPaths)
   at System.Web.Compilation.BuildManagerHost.PrecompileApp(ClientBuildManagerCallback callback, List`1 excludedVirtualPaths)
   at System.Web.Compilation.BuildManagerHost.PrecompileApp(ClientBuildManagerCallback callback, List`1 excludedVirtualPaths)
   at System.Web.Compilation.ClientBuildManager.PrecompileApplication(ClientBuildManagerCallback callback, Boolean forceCleanBuild)
   at System.Web.Compilation.ClientBuildManager.PrecompileApplication(ClientBuildManagerCallback callback)
   at System.Web.Compilation.Precompiler.Main(String[] args) 
```

我确实知道我可以关闭预编译，但我宁愿现在深入了解这一点，然后再为项目增加更多复杂性。

该项目目前包含以下非常基本的版本：

*   视图/_Layout.cshtml
*   视图/SomeServiceResponseView.cshtml
*   内容/SomeStaticView.cshtml

静态视图不是 100% 静态的（它仍然是 Razor 生成的视图），它只是不基于服务 DTO 模型。

_Layout 和 StaticView 都派生自 ViewPage（例如`@inherits ViewPage`）。
ServiceResponseView 派生自 ViewPage 的通用模型版本（例如`@inherits ViewPage<SomeDtoResponse>`）。

我已经在本地运行了 aspnet_compiler.exe 工具，但只能获得与上面相同的输出（[AppHarbor FAQ](http://support.appharbor.com/kb/getting-started/frequently-asked-questions/)建议在本地运行它以帮助调试预编译问题，但我还没有找到任何方法让它给我任何更多信息...？）。

有没有人见过类似的错误信息？
任何对 Razor 在幕后所做的事情有更多了解的人都知道可能导致这种情况的任何线索？
这是由于 ServiceStack.Razor 和普通 ASP.NET MVC Razor 之间的差异而导致的问题，在这种情况下关闭预编译是正确的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T17:48:24.510

我也必须在 AppHarbor 上禁用 View Pre-compiled。

我相当肯定它不可能启用，因为 ServiceStack Razor 页面有自己的构建过程，而且它们也不依赖 System.Web.Mvc。

我认为 AppHarbor 进程需要 System.Web.Mvc Razor 视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T18:00:43.720

我在 IIS Express 本地运行时遇到了同样的错误，发现如果我将它添加到 web.config 中它会起作用：

```
<appSettings>
  <add key="webPages:Enabled" value="false" />
</appSettings> 
```

我在 ServiceStack 的 RazorRockstar 示例中找到了该设置，然后将其与我自己的项目逐行比较，以了解为什么我的项目不起作用。

# symfony - Symfony2 在捆绑包中使用第三方供应商

> ID：14171089
> 
> 赞同：0
> 
> 时间：2013-01-05T10:58:59.133
> 
> 标签：symfony, composer-php, bundle, cpanel

我正在创建一个 CpanelBundle，它将 Cpanel xmlapi 集成到 Symfony 中。我将在这里使用 CpanelInc 提供的类：[https](https://github.com/CpanelInc/xmlapi-php) ://github.com/CpanelInc/xmlapi-php 。

我想让这个包可以跨项目使用，也可以开源。

Symfony 文档说你不应该将第三方库放入你的包中。Cpanel 类也没有命名空间，它不在作曲家上。

我可以并且应该将 Cpanel 类放在供应商文件夹中，但是如何将它添加到自动加载和我的包*composer.json*中，这样当我发布我的包时，用户也会得到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T12:23:15.180

您好，您可以使用 Composer 加载此文件。请参阅[作曲家自动加载文档](http://getcomposer.org/doc/04-schema.md#files)

您的 composer.json 看起来像：

```
{
    "name": "my/bundle",
    "autoload": {
       "psr-0": {"": "src"}
    },
    "require": {
         "php": ">=5.3.2",
         "symfony/framework-bundle": ">=2.1,<2.3-dev",
         "CpanelInc/xmlapi-php": "*"
    },
    "repositories": [
        {
            "type": "package",
            "package": {
                "name": "CpanelInc/xmlapi-php",
                "version": "master-dev",
                "dist": {
                    "url": "http://github.com/CpanelInc/xmlapi-php/zipball/master",
                    "type": "zip"
                },
                "source": {
                    "url": "git://github.com/CpanelInc/xmlapi-php.git",
                    "type": "git",
                    "reference": "master"
                },
                "autoload": {
                    "files" : ['xmlapi.php']
                }
            }
        }
    ]
} 
```

当您创建 composer.json 并将其添加到 CpanelInc/xmlapi-php 并执行 PR 时会更好 :)

# common-lisp - 如何获取 clisp 内存映像的代码

> ID：14171092
> 
> 赞同：0
> 
> 时间：2013-01-05T10:59:11.537
> 
> 标签：common-lisp, clisp

我有一个记忆图像，我找不到它的来源，我想再次从中取出代码。我该怎么做才能实现这一目标？我显然可以加载图像，但是我需要猜测函数名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T11:11:00.427

你可以用 (apropos "") 得到“有趣的”符号，用 and 得到函数`WITH-PACKAGE-ITERATOR`名`FBOUNDP`。但是源代码（可能）丢失了：在函数上尝试 DISSASSEMBLE 并查看那里的*信息*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-27T16:23:35.010

除此之外[`DISASSEMBLE`](http://www.lispworks.com/documentation/HyperSpec/Body/f_disass.htm)，你不妨试试[`EXT:UNCOMPILE`](http://www.clisp.org/impnotes/debugger.html#uncompile)。但是请注意，它仅适用于在交互式会话中编译的函数（即从 REPL），而不适用于从编译`.fas`文件加载的函数。

因此，建议的程序是：

1.  [`LIST-ALL-PACKAGES`](http://www.lispworks.com/documentation/HyperSpec/Body/f_list_a.htm)- 找出哪些包是有趣的。

2.  [`DO-EXTERNAL-SYMBOLS`](http://www.lispworks.com/documentation/HyperSpec/Body/m_do_sym.htm)- 找出有趣包中的哪些符号很有趣。

3.  `DISASSEMBLE`或`EXT:UNCOMPILE`在那些有趣的符号上。

但是，最简单的方法是联系您的供应商。请记住，[CLISP 是在 GNU GPL 下分发的](http://sourceforge.net/p/clisp/clisp/ci/default/tree/COPYRIGHT)。

# html - 智能手机上的 HTML5 输入滑块很难

> ID：14171095
> 
> 赞同：1
> 
> 时间：2013-01-05T10:59:39.397
> 
> 标签：html

我目前遇到了 HTML5 输入 [type=range] 的问题。它在桌面上的 chrome 中很好，但在智能手机上存在一些问题。用大手指很难改变滑块。加上你不能真正滑动，你只能点击范围输入。

您是如何将其集成到您的 HTML5 网站中的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T15:44:58.430

HTML5 input[type="range"] 显示了一个在桌面上运行良好的滑块。

在触摸屏手机上，您必须点击；不滑动。除了在 iOS 上，您首先必须点击滑块按钮，然后才能滑动它。

如果您想在智能手机上构建更好的滑块，您可能应该看看 jQuery UI 或某种移动框架（jQtouch、jquery mobile 等）。他们将根据设备优化输出。

# c# - 将 DataGrid 绑定到 ObservableCollection

> ID：14171098
> 
> 赞同：12
> 
> 时间：2013-01-05T10:59:58.153
> 
> 标签：c#, wpf, data-binding, dictionary

我有一个`ObservableCollection<Dictionary>`并且想将它绑定到一个`DataGrid`.

```
ObservableDictionary<String,Object> NewRecord1 = new ObservableDictionary<string,object>();

Dictionary<String,Object> Record1 = new Dictionary<string,object>();
Record1.Add("FirstName", "FName1");
Record1.Add("LastName", "LName1");
Record1.Add("Age", "32");

DictRecords.Add(Record1);

Dictionary<String, Object> Record2 = new Dictionary<string, object>();
NewRecord2.Add("FirstName", "FName2");
NewRecord2.Add("LastName", "LName2");
NewRecord2.Add("Age", "42");

DictRecords.Add(Record2); 
```

我希望键成为标题，`DataGrid`每个`Dictionary`项目的值成为行。设置`ItemsSource`不起作用。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-05T14:04:51.590

您可以使用可绑定的动态字典。这会将每个字典条目作为属性公开。

```
/// <summary>
/// Bindable dynamic dictionary.
/// </summary>
public sealed class BindableDynamicDictionary : DynamicObject, INotifyPropertyChanged
{
    /// <summary>
    /// The internal dictionary.
    /// </summary>
    private readonly Dictionary<string, object> _dictionary;

    /// <summary>
    /// Creates a new BindableDynamicDictionary with an empty internal dictionary.
    /// </summary>
    public BindableDynamicDictionary()
    {
        _dictionary = new Dictionary<string, object>();
    }

    /// <summary>
    /// Copies the contents of the given dictionary to initilize the internal dictionary.
    /// </summary>
    /// <param name="source"></param>
    public BindableDynamicDictionary(IDictionary<string, object> source)
    {
        _dictionary = new Dictionary<string, object>(source);
    }
    /// <summary>
    /// You can still use this as a dictionary.
    /// </summary>
    /// <param name="key"></param>
    /// <returns></returns>
    public object this[string key]
    {
        get
        {
            return _dictionary[key];
        }
        set
        {
            _dictionary[key] = value;
            RaisePropertyChanged(key);
        }
    }

    /// <summary>
    /// This allows you to get properties dynamically.
    /// </summary>
    /// <param name="binder"></param>
    /// <param name="result"></param>
    /// <returns></returns>
    public override bool TryGetMember(GetMemberBinder binder, out object result)
    {
        return _dictionary.TryGetValue(binder.Name, out result);
    }

    /// <summary>
    /// This allows you to set properties dynamically.
    /// </summary>
    /// <param name="binder"></param>
    /// <param name="value"></param>
    /// <returns></returns>
    public override bool TrySetMember(SetMemberBinder binder, object value)
    {
        _dictionary[binder.Name] = value;
        RaisePropertyChanged(binder.Name);
        return true;
    }

    /// <summary>
    /// This is used to list the current dynamic members.
    /// </summary>
    /// <returns></returns>
    public override IEnumerable<string> GetDynamicMemberNames()
    {
        return _dictionary.Keys;
    }

    public event PropertyChangedEventHandler PropertyChanged;

    private void RaisePropertyChanged(string propertyName)
    {
        var propChange = PropertyChanged;
        if (propChange == null) return;
        propChange(this, new PropertyChangedEventArgs(propertyName));
    }
} 
```

然后你可以像这样使用它：

```
 private void testButton1_Click(object sender, RoutedEventArgs e)
    {
        // Creating a dynamic dictionary.
        var dd = new BindableDynamicDictionary();

        //access like any dictionary
        dd["Age"] = 32;

        //or as a dynamic
        dynamic person = dd;

        // Adding new dynamic properties.  
        // The TrySetMember method is called.
        person.FirstName = "Alan";
        person.LastName = "Evans";

        //hacky for short example, should have a view model and use datacontext
        var collection = new ObservableCollection<object>();
        collection.Add(person);
        dataGrid1.ItemsSource = collection;
    } 
```

Datagrid 需要自定义代码来构建列：

XAML：

```
<DataGrid AutoGenerateColumns="True" Name="dataGrid1" AutoGeneratedColumns="dataGrid1_AutoGeneratedColumns" /> 
```

AutoGeneratedColumns 事件：

```
 private void dataGrid1_AutoGeneratedColumns(object sender, EventArgs e)
    {
        var dg = sender as DataGrid;
        var first = dg.ItemsSource.Cast<object>().FirstOrDefault() as DynamicObject;
        if (first == null) return;
        var names = first.GetDynamicMemberNames();
        foreach(var name in names)
        {
            dg.Columns.Add(new DataGridTextColumn { Header = name, Binding = new Binding(name) });            
        }            
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-24T10:05:47.007

根据韦斯顿的回答，我想出了另一个解决方案，而不使用自定义的 BindableDynamicDictionary 类。

`ExpandoObject`在命名空间中调用了一个类`System.Dynamic`（在 ASP.NET 中大量使用）。

它基本上与 westons BindableDynamicDictionary 做同样的事情，但缺点是没有索引运算符可用，因为它显式实现了接口`IDictionary<string, object>`

```
private void MyDataGrid_AutoGeneratedColumns(object sender, EventArgs e)
{
  var dg = sender as DataGrid;
  dg.Columns.Clear();
  var first = dg.ItemsSource.Cast<object>().FirstOrDefault() as IDictionary<string, object>;
  if (first == null) return;
  var names = first.Keys;
  foreach (var name in names)
  {
    dg.Columns.Add(new DataGridTextColumn { Header = name, Binding = new Binding(name) });
  }
} 
```

请注意，这里唯一的区别是您必须将 to 强制`ExpandoObject`转换`IDictionary<string, object>`为通过索引运算符访问/添加值或属性。

# javascript - 如何读取带有字符串“2012-12-13”的json作为其在javascript中的键？

> ID：14171099
> 
> 赞同：0
> 
> 时间：2013-01-05T10:59:59.940
> 
> 标签：javascript, json, jsonp

> **可能重复：**
> [如何访问数字属性？](https://stackoverflow.com/questions/2026741/how-to-access-a-numeric-property)

我写了一个页面来访问其他网站的 api。它以以下格式传递一个 json

```
{
    "a": {
        "2013-01-03": 3965,
        "total": 52284,
        "2013-01-05": 2636,
        "2013-01-04": 4086
    },
    "b": {
        "2013-01-03": 1969,
        "total": 25594,
        "2013-01-05": 1852,
        "2013-01-04": 2031
    },
    "c": {
        "2013-01-03": 6,
        "total": 443,
        "2013-01-05": 13,
        "2013-01-04": 19
    }
} 
```

在我的页面中，我尝试访问，例如 data.a.total 它将返回 52284，但我无法访问 data.a.2013-01-03，它会产生错误。似乎数字不能成为json的关键。有人可以告诉我解决方案是什么吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T11:00:37.650

您可以将其解读为`a['2012-12-13']`使用`[]`访问命名属性的表示法。

例如：

```
var data = {"a": {"2013-01-03": 3965, "total": 52284, "2013-01-05": 2636, "2013-01-04": 4086}, "b": {"2013-01-03": 1969, "total": 25594, "2013-01-05": 1852, "2013-01-04": 2031}, "c": {"2013-01-03": 6, "total": 443, "2013-01-05": 13, "2013-01-04": 19}}; 
```

`data.a['2013-01-03']`会给你`3965`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T11:02:00.943

如果键包含作为 JavaScript 标识符无效的字符，请使用方括号表示法：

```
json.a["2013-01-03"] // 3965 
```

# jquery - Jquery ajax加载内容两次

> ID：14171101
> 
> 赞同：0
> 
> 时间：2013-01-05T11:00:17.367
> 
> 标签：jquery, ajax

我在 jQuery 中通过 AJAX 编写了简单的加载内容：

```
$('.bar a[rel]').live('click', function() {
    if($('.modal-'+ $(this).attr('rel')).length == 0) {
        $.ajax({
            url: 'users/'+ $(this).attr('rel'),
            success: function(data) {
                $('header + .container').children().animate({
                    'height': 0,
                    'padding': 0,
                    'opacity': 0
                }, 500, function() {
                    $(this).remove();

                    $(data).hide().appendTo('header + .container').fadeIn(1000);
                });                 
            }
        });
    }

    return false;
}); 
```

为什么这段代码加载内容（appendTo）两次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T11:23:19.413

动画代码为每个孩子执行一次；您还没有提供您的 HTML，但由于它运行了两次，我认为假设有两个是安全的。修改函数以直接在父级上工作：

```
$('header + .container').animate({
    'height': 0,
    'padding': 0,
    'opacity': 0
}, 500, function () {
    $(this).empty();

    $(data).hide().appendTo('header + .container').fadeIn(1000);
}); 
```

根据您尝试实现的效果，还有其他替代方案，包括将动画排队到孩子身上，并且仅在全部完成后附加数据。一种更粗略的方法也可能是延迟数据附加至少是动画时间（在本例中为 500 毫秒）的孩子长度的倍数。这实际上完全取决于您希望它看起来像什么，但不知何故，我希望简单的方法会很好。

PS您的选择器看起来很奇怪，但是由于您完全可以使用附加功能，因此我怀疑这只是本论坛目的的缩写形式或错字。否则肯定有问题。

# indexing - 索引内的索引，neo4j

> ID：14171105
> 
> 赞同：0
> 
> 时间：2013-01-05T11:00:23.983
> 
> 标签：indexing, neo4j, nested-lists

假设我有以下数据：

我有一个**索引餐**
在索引**餐**中，我想要另一个名为**比萨饼**的索引，以及以下**成分**：

关系是：餐->披萨->配料

例如，

```
(meal index)
HAWAIIAN pizza(pizza) using sugar,oil,pineapple,others(ingredients)
  Indian pizza(pizza) using curry powder,butter,others(ingredients) 
```

1.  如何在 neo4j 中设置**嵌套列表？**
2.  如何设置键值对？

# excel - Excel VBA按顺序生成随机数并根据多少

> ID：14171106
> 
> 赞同：2
> 
> 时间：2013-01-05T11:00:23.037
> 
> 标签：excel, vba, random, formula, sorted

天，

我有一个棘手的问题，即根据 VBA 代码或 VBA 中的公式需要多少来按排序顺序获取随机数。这种需求是在 1 到 10 之间随机生成的。

它开始时看起来像这样。

![在此处输入图像描述](../Images/dc4bb28bf37ae030ad4e50c7d6ee1dd3.png)

这是我想到的效果，它根据示例中失败的数量显示排序的数字。

![在此处输入图像描述](../Images/bd1bd979355c84ef8b64b20ab0be7368.png)

这是我做的 VBA 的一次尝试，其中单元格 J7 包含我需要的随机数，但数字没有完全排序。我愿意在这里接受建议/反馈。非常感谢。

```
Public Const BeCoolMachineCounter As String = "J7"
Public Const BeCoolMachineRange As String = "Q03:Q12"
'Generate the random data according to how many needed.
Call CreateNumbers(Range(BeCoolMachineRange), Range(BeCoolMachineCounter).Value)
Private Sub CreateNumbers(Which As Range, HowMany As Integer)
' Declaration of variables
    Dim c As Range
    Dim iCheck As Long

    iCheck = 1

' Generate random failures based on the number of required for each supplier
    For Each c In Which
        If iCheck <= HowMany Then
            c.Value = Random1to2192
            iCheck = iCheck + 1
        End If
    Next c
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T23:47:08.017

您可以在目标范围内使用数组公式和返回数组的 UDF。

它为您提供了您所展示的结果。

所以，UDF：

```
Public Function GetRandomFailures(count As Long) As Variant
    Dim result As Variant, numbers As Variant
    ReDim result(100)
    ReDim numbers(count - 1)

    For i = 0 To count - 1
        numbers(i) = Application.WorksheetFunction.RandBetween(1, 10000)
    Next i

    Call QuickSort(numbers, LBound(numbers), UBound(numbers))

    For i = 0 To 99
        If i < count Then
            result(i) = numbers(i)
        Else
            result(i) = ""
        End If
    Next i

    GetRandomFailures = Application.WorksheetFunction.Transpose(result)
End Function

Public Sub QuickSort(vArray As Variant, inLow As Long, inHi As Long)

  Dim pivot   As Variant
  Dim tmpSwap As Variant
  Dim tmpLow  As Long
  Dim tmpHi   As Long

  tmpLow = inLow
  tmpHi = inHi

  pivot = vArray((inLow + inHi) \ 2)

  While (tmpLow <= tmpHi)

     While (vArray(tmpLow) < pivot And tmpLow < inHi)
        tmpLow = tmpLow + 1
     Wend

     While (pivot < vArray(tmpHi) And tmpHi > inLow)
        tmpHi = tmpHi - 1
     Wend

     If (tmpLow <= tmpHi) Then
        tmpSwap = vArray(tmpLow)
        vArray(tmpLow) = vArray(tmpHi)
        vArray(tmpHi) = tmpSwap
        tmpLow = tmpLow + 1
        tmpHi = tmpHi - 1
     End If

  Wend

  If (inLow < tmpHi) Then QuickSort vArray, inLow, tmpHi
  If (tmpLow < inHi) Then QuickSort vArray, tmpLow, inHi

End Sub 
```

和一个示例公式：

```
{=GetRandomFailures(A1)} 
```

（Excel添加的大括号）

您当然可以简单地从宏中调用此 UDF，但恕我直言，使用数组公式可以改善用户体验，因为一切都是透明的，并且每次更改计数时都会刷新列表。

注意：快速排序的实现来自这里：[VBA 数组排序功能？](https://stackoverflow.com/questions/152319/vba-array-sort-function)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T23:17:45.923

我不确定我是否理解您所说的，但基于之前和之后我假设您已经在列中拥有 10 个数字，并且您想从它们中获取大小为*HowMany*的随机样本，然后确保然后按顺序对所取的数字进行排序。

```
Public Sub RandomSample(Data10 As Range, HowMany As Integer)

    ' Insert random numbers next to the data
    Data10.Cells(1, 2).FormulaR1C1 = "=RAND()"
    Data10.Cells(1, 2).AutoFill Destination:=Range(Data10.Cells(1, 2), Data10.Cells(10, 2))

    ' Sort the data by the random numbers
    Range(Data10.Cells(1, 1), Data10.Cells(10, 2)).Sort key1:=Data10.Cells(1, 2), header:=xlNo
    ' Remove the random numbers
    Range(Data10.Cells(1, 2), Data10.Cells(10, 2)).ClearContents

    ' Remove numbers surplus to HowMany
    If HowMany < 10 Then
        Range(Data10.Cells(HowMany + 1, 1), Data10.Cells(10, 1)).ClearContents
    End If

    ' Resort the remaining numbers
    Range(Data10.Cells(1, 1), Data10.Cells(HowMany, 1)).Sort key1:=Data10.Cells(1, 1), header:=xlNo

End Sub 
```

您可以使用**RandomSample Range("B3:B12"),6调用它**

# objective-c - 使用 JSON (iOS) 的 Cocoa 错误 3840

> ID：14171111
> 
> 赞同：38
> 
> 时间：2013-01-05T11:01:21.490
> 
> 标签：objective-c, ios, json, cocoa-touch

我正在尝试将数据发送到服务器并以 JSON 格式接收响应。问题是服务器必须返回“成功”或“失败”，但它返回“（null）”。

这是返回的错误：

> 错误域 = NSCocoaErrorDomain 代码 = 3840 “操作无法完成。（可可错误 3840。）”（JSON 文本没有以数组或对象开头，并且允许未设置片段的选项。） UserInfo=XXXXXXXXX {NSDebugDescription=JSON 文本没有以数组或对象和允许未设置片段的选项开头。}

错误是否可能在服务器脚本中？

这是我发送数据和接收响应的函数：

```
- (void) putData:(NSString *)parameter valor:(NSString *)valor {

    NSString *rawString = [NSString stringWithFormat:@"%@=%@", parameter, valor];
    NSData *data = [rawString dataUsingEncoding:NSUTF8StringEncoding];
    NSURL *url = [NSURL URLWithString:@"http://www.xxx.xxx/xxx.php"];
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];
    [request setHTTPMethod:@"PUT"];
    [request setHTTPBody:data];
    NSURLResponse *response;
    NSError *error;
    NSData *responseData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];
    NSMutableDictionary *json = [NSJSONSerialization JSONObjectWithData:responseData options:kNilOptions error:&error];
    NSLog(@"responseData: %@ error: %@", json, error);
} 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-05T11:32:25.530

除非您将选项传递`NSJSONReadingAllowFragments`给`[NSJSONSerialization JSONObjectWithData:options:error:]`来自服务器的响应，否则必须是有效的 JSON，其顶级容器是数组或字典。

例如：

```
 { "response" : "Success" } 
```

PS如果你想要一个可变字典，你还必须`NSJSONReadingMutableContainers`在你的选项中包括。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-05-13T09:17:09.000

您的服务器的响应可能不包含有效的 JSON。

从技术上讲，JSON 对象必须以“数组”或“对象（字典）”开头。

所以，无论你的服务器返回什么都不是。

而且，无论使用 NSJSONReadingAllowFragments 选项，您都可以强制使用 JSON。

通过使用 ，

```
AFJSONResponseSerializer *responseSerializer = [AFJSONResponseSerializer serializerWithReadingOptions:NSJSONReadingAllowFragments]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-15T12:20:57.577

如果您在 iOS 设备上连接到 VPN，您可能会遇到此问题。

# jquery - 单击时更改链接的颜色并在再次单击时更改回来

> ID：14171112
> 
> 赞同：0
> 
> 时间：2013-01-05T11:01:21.927
> 
> 标签：jquery, colors, hyperlink, navigation

我的网站顶部有一个水平导航栏。其中两个选项具有子菜单，单击时会下拉，再次单击时会隐藏，使用 javascript。我想让这两个选项中的每一个在其各自的子菜单被显示时都会改变颜色，并变回它们再次被隐藏。

HTML结构：

```
<ul id="navigationbar">
  <li><a id="parentitem1">Option 1</a></li> 
     <nav id="dropdownmenu1">
       <ul>
         <li><a id="childitem 1a">sub-option 1a</a></li>
         <li><a id="childitem 1b">sub-option 1b</a></li>
         <li><a id="childitem 1c">sub-option 1c</a></li>
       </ul>   
     </nav>  
  <li><a id="parentitem2">Option 2</a></li>   
     <nav id="dropdownmenu2">
       <ul>
         <li><a id="childitem 2a">sub-option 2a</a></li>
         <li><a id="childitem 2b">sub-option 2b</a></li>
         <li><a id="childitem 2c">sub-option 2c</a></li>
       </ul>   
     </nav>   
</ul> 
```

当父项被按下时，带有子项的导航部分会使用 javascript 显示。我想这样做，当我单击父项以显示其子菜单时，父项变为灰色……当您再次单击它以隐藏其子菜单时，它又变为橙色。我还想这样做，以便当您从一个父项单击另一个父项时，它也会将第一个父项更改回橙色。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T11:06:32.417

```
$('#super_horizontal_bla').find('.super_toggler').click(function(){

  $('.splendid').removeClass('splendid');
  $(this).toggleClass('splendid');

}); 
```

CSS

```
.splendid{
  super-attribute : here ;
} 
```

[http://api.jquery.com/toggleClass/](http://api.jquery.com/toggleClass/)

# java - 使用 xmlAdapter 时将日期发布到 RESTful 服务时出现异常

> ID：14171116
> 
> 赞同：0
> 
> 时间：2013-01-05T11:01:35.157
> 
> 标签：java

我编写了以 json 格式接受和响应的 RESTful 服务。

我编写了一个 xmlAdapter 类，当 ii 在将日期传递给服务时出现异常时说“日期剂量具有零参数构造函数”。

适配器类看起来像这样。

```
public class SqlDateAdapter extends XmlAdapter<String, Date> {
public String marshal(java.sql.Date d) {
    return d.toString();
}

public Date unmarshal(String v) {
    SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-mm-dd"); // QueryConstants.DATE_FORMATE
    java.sql.Date sqlDate = null;
    try {
        java.util.Date convertedDate = dateFormat.parse(v);
        sqlDate = new java.sql.Date(convertedDate.getTime());
    } catch (ParseException e) {
        e.printStackTrace();
    }
    return sqlDate;
} 
```

}

现在，当我将数据发布到服务时，出现以下异常。

“类 java.util.Date 不能使用带有单个字符串参数的构造函数来实例化”

谁能帮我这个。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T06:40:21.697

我通过在我的服务方法中将日期作为字符串，然后使用 SimpleDateFormat 解析它来解决这个问题。

# c - sizeof算子的实现

> ID：14171117
> 
> 赞同：27
> 
> 时间：2013-01-05T11:01:36.093
> 
> 标签：c, linux, gcc, sizeof, typecast-operator

我已经尝试实现 sizeof 运算符。我是这样做的：

```
#define my_sizeof(x) ((&x + 1) - &x) 
```

但它总是以任何一种数据类型的结果为“1”。

然后我用谷歌搜索了它，我发现了以下代码：

```
#define my_size(x) ((char *)(&x + 1) - (char *)&x) 
```

如果是**typecasted**，代码就可以工作，我不明白为什么。这段代码也完美地填充了一个结构。

它也适用于：

```
#define my_sizeof(x) (unsigned int)(&x + 1) - (unsigned int)(&x) 
```

任何人都可以解释一下如果类型转换它是如何工作的？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-05T11:04:59.877

指针减法的结果是*元素*而不是字节。因此，第一个表达式`1`根据定义计算为。

除此之外，你真的应该在宏中使用括号：

```
#define my_sizeof(x) ((&x + 1) - &x)
#define my_sizeof(x) ((char *)(&x + 1) - (char *)&x) 
```

否则尝试`my_sizeof()`在表达式中使用可能会导致错误。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-05T11:05:29.647

运算符是 C（和 C++）语言规范的`sizeof`一部分，并在编译器（前端）内部实现。没有办法用其他 C 构造来实现它（除非你使用像[typeof](http://gcc.gnu.org/onlinedocs/gcc/Typeof.html)这样的 GCC 扩展），因为它可以接受类型或表达式作为操作数，而不会产生任何副作用（例如`sizeof((i>1)?i:(1/i))`，当`i==0`你的宏`my_sizeof`会崩溃时不会崩溃）除以零）。另请参阅[C 编码指南](http://c0x.coding-guidelines.com/6.5.3.4.html)和[维基百科](http://en.wikipedia.org/wiki/Sizeof)。

您应该了解 C[指针算法](http://www.cs.umd.edu/class/sum2003/cmsc311/Notes/BitOp/pointer.html)。参见例如[这个问题](https://stackoverflow.com/questions/2117486/c-pointer-arithmetic)。指针差异以元素而不是字节表示。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-02-03T14:29:56.067

> ```
> #define my_sizeof(x) ((char *)(&x + 1) - (char *)&x) 
> ```

此`my_sizeof()`宏在以下情况下不起作用：

1.  `sizeof 1`- 4 字节（对于具有 4 字节的平台`int`）
    `my_sizeof(1)`- 根本无法编译。

2.  `sizeof (int)`- 4 字节（对于具有 4 字节的平台`int`）
    `my_sizeof(int)`- 根本不会编译代码。

它仅适用于变量。它不适用于 , 等数据类型，不适用于`int`, `float`,`char`等文字`2`，也不适用于or等​​右值表达式。`3.4``'A'``a+b``foo()`

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-05-04T05:47:17.430

```
#define my_sizeof(x) ((&x + 1) - &x) 
```

`&x`给出在程序中声明的变量的地址（假设是 double x）并将其递增 1 给出了可以存储 x 类型的下一个变量的地址（这里`addr_of(x) + 8`，对于 double 的大小是 8Byte）。

差异给出的结果是，有多少类型的变量`x`可以存储在该内存量中，对于类型 x 显然是 1（用 1 递增它并取差是我们所做的）。

```
#define my_size(x) ((char *)(&x + 1) - (char *)&x) 
```

将其类型转换并获取差异将告诉我们在给定的内存空间中可以存储`char*`多少类型的变量（差异）。`char`由于每个`char`都只需要 1 字节的内存，因此（内存量）/1 将给出传递给宏的变量类型的两个连续内存位置之间的字节数，从而给出类型变量所需的内存量`x`。

但是您将无法将任何文字传递给该宏并知道它们的大小。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-01-05T11:04:57.643

> 但它总是以任何一种数据类型的结果为“1”

是的，这就是指针算法的工作原理。它以所指向的类型为单位工作。因此，转换为 的`char *`工作单位`char`，这就是您想要的。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-08-09T07:19:08.810

这适用于文字和变量。

```
#define my_sizeof(x) (char*) (&(((__typeof__(x) *)0)[1])) - (char *)(&(((__typeof__(x) *)0)[0])) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-06-26T14:21:26.583

我昨天搜索了这个，我发现了这个宏：

```
#define mysizeof(X)  ((X*)0+1) 
```

它仅将 X 扩展一次（没有错误，因为像 x++ 这样的表达式的双重评估），并且直到现在它都可以正常工作。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-11-14T17:51:56.797

```
#define my_sizeof(x) ((&x + 1) - &x) 
```

*   这基本上是（两个内存值的差异）/（数据类型的大小）。

*   它为您提供了可以存储多少 x 类型的元素的数字。那就是 1。你可以在这个内存空间中容纳一个完整的 x 元素。

*   当我们将其类型转换为其他数据类型时，它表示该数据类型的元素数量可以存储在该内存空间中。

```
#define my_size(x) ((char *)(&x + 1) - (char *)&x) 
```

*   将其类型转换为 (char *) 可为您提供确切的内存字节数，因为 char 为一个字节。

```
#define my_sizeof(x) (unsigned int)(&x + 1) - (unsigned int)(&x) 
```

*   当您将指针类型强制转换为 int 时，它会给您带来编译错误。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2015-10-24T08:28:29.210

# 定义 my_sizeof(x) ((&x + 1) - &x)

&x 给出变量的地址并将其加一 (&x + 1)，将给出地址，其中可以存储另一个 x 类型的变量。现在，如果我们对这些地址进行算术运算，例如 ((&x + 1) - &x)，那么它将告诉在 ((&x + 1) - &x) 地址范围内，可以存储 1 个 x 类型的变量。

现在，如果我们用 (char *) 对内存量进行类型转换[因为 char 的大小是 1 个字节，并且 char * 递增只会移动一个字节]，那么我们将得到类型 x 消耗的字节数

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2019-03-13T21:11:42.967

```
#include<bits/stdc++.h>

using namespace std;
//#define mySizeOf(T) (char*)(&T + 1) - (char*)(&T)

        template<class T>
size_t mySizeOf(T)
{
        T temp1;
        return (char*)(&temp1 + 1) - (char*)(&temp1);
}
int main()
{
        int num = 5;
        long numl = 10;
        long long numll = 100;
        unsigned int num_un_sz = 500;

        cout<<"size of int="<<mySizeOf(num) << endl;
        cout<<"size of long="<<mySizeOf(numl) << endl;
        cout<<"size of long long ="<<mySizeOf(numll) << endl;
        cout<<"size of unsigned int="<<mySizeOf(num_un_sz) << endl;
        return 0;
} 
```

# jquery - Backbone.js：为什么事件没有在列表视图中触发？

> ID：14171120
> 
> 赞同：1
> 
> 时间：2013-01-05T11:02:03.780
> 
> 标签：jquery, html, backbone.js

我有这个主干代码，但我无法弄清楚为什么我认为的事件不起作用。我的应用程序应该是一个可编辑的画廊。因此，我在 html 元素 $( ) 中创建了一个视图（画廊视图），`#obrazekDetail`并使用`ObrazekViews`. 我想触发事件，但`ObrazekView`我无法让它工作。很抱歉再次提出相同类型的问题。但我找不到任何合适的解决方案。主干 JavaScript 和 HTML 代码如下：

```
<table id="obrazekDetail" cellspacing="0" cellpadding="2">
</table>
  <!-- Templates -->
<script type="text/html" id="template-obrazek">
    <tr id="<%= order %>">
        <td><img src="<%= obrazek %>"/>
        </td>
        <td>Nadpis:<input name="nadpis" value="<%= nadpis %>" /></td>
        <td>Popis:<input name="popis" value="<%= nadpis %>" /></td>
        <td><input class="edit" type="submit" name="action" value="Edit" /></td>
        <td><input  class="delete" type="submit" name="action" value="Delete" /></a></td>
    </tr>
</script>

<script type="text/template" id="galerie-template">

</script>

// js code

$(function(){

    window.app = window.app || {};
    window.app.obrazek = new Obrazek();
    window.app.obrazky = new Obrazky();
    window.app.view = new GalerieView();
});

var Obrazek = Backbone.Model.extend({
url : function() {
  return  "/ajax-obrazek/" + this.id + "/";
}
});

var Obrazky = Backbone.Collection.extend({
    model: Obrazek,
    initialFetch: function() {
        var self = this;
        $.each(obrazky_data, function(i, object) {
            var obrazek = new Obrazek();
            obrazek.set({
                id: object.pk,
                nadpis: object.fields.nadpis,
                popis: object.fields.popis,
                order: object.fields.order,
                obrazek: object.fields.obrazek
                 });
            self.model = obrazek;
            self.add(self.model);
        });
    }
});
var ObrazekView = Backbone.View.extend({
    template: _.template($("#template-obrazek").html()),
    events: {
        "click input.edit"   : "edit",
        "click input.delete" : "clear"
    },
    initialize: function() {
        this.model.bind('change', this.render, this);
        this.model.bind('destroy', this.remove, this);
        console.log(this);
    },
    render: function() {
        this.$el.html(this.template(this.model.toJSON()));
        return this;
    },
    clear: function() {
        console.log('test');
      this.model.destroy();
    },
    edit: function() {
            console.log('test');

    }

});
var GalerieView = Backbone.View.extend({
    el: $("#obrazekDetail"),

    initialize: function() {
        window.app.obrazky.bind('add', this.addOne, this);
        window.app.obrazky.bind('reset', this.addAll, this);
        window.app.obrazky.bind('all', this.render, this);
        window.app.obrazky.initialFetch();
    },
    render: function() {
        return this;
    },
    addOne: function(obrazek) {
        var view = new ObrazekView({model: obrazek});
        this.$el.append(view.render().el.innerHTML);
    },
    addAll: function() {
          window.app.obrazky.each(this.addOne);
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T12:29:20.487

当您这样做时，`this.$el.append(view.render().el.innerHTML);`您将提取纯 html 并剥离附加到它们的所有事件。当您使用定义事件时

`events: { "click input.edit" : "edit" },`

您可能认为事件是直接附加的，`input.edit`但事实并非如此。Backbone 将事件附加到 el 并将其委托给与选择器匹配的子元素。因此，在运行时，如果附加另一个`input.edit`元素，该事件仍将对其起作用。

因此，只需使用这种传统方式`this.$el.append(view.render().el);`来维护所有事件并且不会产生令人惊讶的结果！

# javascript - 在不改变其他元素位置的情况下增加悬停尺寸

> ID：14171130
> 
> 赞同：2
> 
> 时间：2013-01-05T11:03:21.563
> 
> 标签：javascript, jquery, html, css, css-transforms

假设我`10 divs`的形式是`squares`. 让我们称之为`home`页面。在这 10 个中， `3 divs`有课`.event1` `5 divs`有课`.event2` `2 divs`有课`.event3`

```
<div class="boxes event1">
   ....//3-times
   ....                
</div>
<div class="boxes event2">
   ....//5-times
   ....                
</div>
<div class="boxes event3">
   ....//2-times
   ....                
</div> 
```

这些盒子并排放置。

当我单击`event1`时，所有框都淡出，除了那些有类的框`event1`。同样，对于所有类。单击`home`时，所有框将再次淡入。

```
<div id="navi">
    <a href="#"><div id="t0"><span>Home</span></div></a>
    <a href="#"><span>Event1</span></a>
    <a href="#"><span>Event2</span></a>
    <a href="#"><span>Event3</span></a>
</div> 
```

我的 JQuery 代码`fadeOut`：

```
<script type="text/javascript">
    $(function () {
        $('#t0').click(function() {
            $("*").animate({ 
                opacity: 1.0
                }, 500 );
        });
        $("#navi a").click(function() {
            c = $(this).text().toLowerCase();
            if (c!="home"){
                $('.' + c).animate({ 
                   opacity: 1.0
                 }, 500 ).addClass('w1');
                $('.boxes').not('.' + c).animate({ 
                   opacity: 0.0
                 }, 500 );
            }
        });
    });
</script> 
```

**类的 CSS**：

```
.boxes, .event1, .event2, .event3 {
    background:rgba(0, 0, 0, .30);
    float:left;
    position:relative;
    overflow:hidden;
    width:100px;
    height:100px;
    margin:2px;
    box-shadow:0 0px 15px rgba(0,0,0,0.75) inset;
    -moz-box-shadow:0 0px 15px rgba(0,0,0,0.75) inset;
    -webkit-box-shadow:0 0px 15px rgba(0,0,0,0.75) inset;
}

   .w1:hover{
        background:rgba(0, 0, 0, .30);
        float:left;
        width:200px;
        height:200px;
        position:absolute;
        overflow:hidden;
        box-shadow:0 0px 15px rgba(0,0,0,0.75) inset;
        -moz-box-shadow:0 0px 15px rgba(0,0,0,0.75) inset;
        -webkit-box-shadow:0 0px 15px rgba(0,0,0,0.75) inset;
    } 
```

现在，当鼠标指针悬停时，我只想增加一个**特定框**的大小（ ）。`width:200px; height:200px`我找不到办法。

当我`.w1`在`javascript`代码中添加类时，它被应用于所有具有类`event1`或`event2`或`event3`（无论选择哪一个）的元素。因此，当我将鼠标悬停在该类的特定框（已选中）时，所有框都会进行转换并且框会移动。

我只想要一个盒子来改变尺寸，而其他盒子在原来的地方。此外，`hovering`必须为特定事件激活此事件，以便在选择`hover`时无法在元素`home`上。我什至尝试通过更改来做到这一点，`z-index`但页面变得非常混乱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T11:58:38.813

也许这就是你正在寻找的：

```
 .w1:hover{
            <!--Removed the position absolute-->
            background:rgba(0, 0, 0, .30);
            float:left;
            width:200px;
            height:200px;
            overflow:hidden;
            box-shadow:0 0px 15px rgba(0,0,0,0.75) inset;
            -moz-box-shadow:0 0px 15px rgba(0,0,0,0.75) inset;
            -webkit-box-shadow:0 0px 15px rgba(0,0,0,0.75) inset;
            margin-bottom: -100px;
        }
        .w1:hover +div{
            margin-left: -100px;
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T14:01:44.420

我可以自由地重建您的项目。在此示例中，我使用 javascript 而不是 css。这个例子的要点是，我不调整现有框的大小。我建立了一个新的 div，复制旧 div 的内容，将其绝对定位并将旧的不透明度设置为 0。jsfiddle 链接：http: [//jsfiddle.net/56yeQ/8/](http://jsfiddle.net/56yeQ/8/)

html:

```
 <div id="navi">
        <a href="#"><div id="t0"><span>Home</span></div></a>
        <a href="#"><span>Event1</span></a>
        <a href="#"><span>Event2</span></a>
        <a href="#"><span>Event3</span></a>
    </div>
    <div class="boxes event1">
        1
    </div>
    <div class="boxes event1">
        2
    </div>
    <div class="boxes event1">
        3
    </div>
    <div class="boxes event2">
        4
    </div>
    <div class="boxes event2">
        5
    </div>
    <div class="boxes event2">
        6
    </div>
    <div class="boxes event2">
        7
    </div>
    <div class="boxes event2">
        8
    </div>
    <div class="boxes event3">
        9
    </div>
    <div class="boxes event3">
        10
    </div> 
```

CSS：

```
 .boxes, .event1, .event2, .event3 {
            background:rgba(0, 0, 0, .30);
            float:left;
            position:relative;
            overflow:hidden;
            width:100px;
            height:100px;
            margin:2px;
            box-shadow:0 0px 15px rgba(0,0,0,0.75) inset;
            -moz-box-shadow:0 0px 15px rgba(0,0,0,0.75) inset;
            -webkit-box-shadow:0 0px 15px rgba(0,0,0,0.75) inset;
        }

        .w1{
            background:rgba(0, 0, 0, .30);
            float:left;
            width:100px;
            height:100px;
            position:absolute;
            overflow:hidden;
            margin: 2px;
            box-shadow:0 0px 15px rgba(0,0,0,0.75) inset;
            -moz-box-shadow:0 0px 15px rgba(0,0,0,0.75) inset;
            -webkit-box-shadow:0 0px 15px rgba(0,0,0,0.75) inset;
            opacity: 1;
        } 
```

javascript:

```
 var isHome = true;

        $(function () {

            $("#navi a").click(function() {
                c = $(this).text().toLowerCase();
                isHome = c=="home";
                if (isHome){
                    $("*").animate({ 
                        opacity: 1.0
                    }, 500 );
                } else {
                    $('.boxes').not('.' + c).animate({ 
                        opacity: 0.0
                    }, 500 );
                    $('.' + c).animate({ 
                        opacity: 1.0
                    }, 500 )
                }
            });
        });

        function hoverIn(element){

            if(!isHome && $(this).css("opacity")==1){
                $(".w1").each(function(i){
                    var oldDiv= $(this).data("oldDiv");
                    $(oldDiv).css({opacity:1});
                    $(this).remove(); 
                });
                var posX = $(this).position().left+2;
                var posY = $(this).position().top+2;
                var newDiv = $("<div>").html($(this).html());
                $(newDiv).mouseleave(hoverOut);
                $(newDiv).addClass("w1");
                $("body").append(newDiv);
                $(this).css({opacity: 0});
                $(newDiv).offset({top:posY, left: posX});
                $(newDiv).data("oldDiv",this);
                $(newDiv).animate({height:"200px",width:"200px"},500);
            }
        }

        function hoverOut(element){

             var oldDiv= $(this).data("oldDiv");
             $(oldDiv).css({opacity:1});

             $(this).remove();
        }

        $(".boxes").mouseenter(hoverIn); 
```

# actionscript-3 - Flash AS3 上的平滑滚动

> ID：14171133
> 
> 赞同：0
> 
> 时间：2013-01-05T11:03:49.690
> 
> 标签：actionscript-3, flash, bitmapdata

是否可以在 Flash (ActionScript 3) 中进行完全平滑的滚动？在下面的测试中，我将创建一个包含随机噪声的位图，然后定期将其向左移动。我没有在后台运行繁重的任务。我正在寻找的是与 1987 年的 Amiga 500 相当的平滑度 :-)

```
package {
    import flash.display.*;
    import flash.events.TimerEvent;
    import flash.utils.Timer;

    public class Game extends Sprite {
        var noiseBitmap;

        public function Game() {
            var noiseBitmapData = new BitmapData(stage.stageWidth * 3, stage.stageHeight);
            noiseBitmapData.noise(0, 0, 255, 7, true);
            noiseBitmap = new Bitmap(noiseBitmapData);
            addChild(noiseBitmap);

            var t = new Timer(1000/30, 999999);
            t.addEventListener("timer", function (e:TimerEvent) {
                noiseBitmap.x--;
            });
            t.start();
        }
    }
} 
```

“渲染代码”在我的计算机（2.4 GHz Mac）上运行需要不到 1 毫秒，但运动偶尔会卡住一两帧，使运动显得生涩。

FPS 在 Flash 中设置为 30。我尝试使用“测试电影”和浏览器（Chrome）运行它。目标是 Flash Player 11.2。我也尝试调用 e.updateAfterEvent() 来强制重绘。我还尝试将延迟和 FPS 设置为略有不同的值，但没有任何改善。

这与[AS3 中的不平滑滚动](https://stackoverflow.com/questions/8037843/not-smooth-scrolling-in-as3)不同，因为我已经在使用 BitmapData。我也尝试过使用 ENTER_FRAME 事件而不是计时器，如对该问题的回复中所建议的那样，但它没有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T17:15:58.317

我建议你试试 Greensock 的 TweenLite。它是一个高度优化的引擎，可以通过代码进行各种补间，适用于 AS2 和 AS3。你可以在[这里](http://www.greensock.com/tweenlite/)找到它。

Walkietokyo 的解决方案仍然是基于框架的，不会消除您遇到的问题。而是使用基于时间的动画（TweenLite 实际实现）。有关详细信息，请参阅[这篇文章](http://www.flashgamesclassroom.com/classroom/actionscript/frame-based-vs-time-based-animation)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-05T11:43:08.670

使用计时器时，您不会与帧速率完全同步。正如您所提到的，帧速率略有波动，使您的计时器有时会在一帧内触发两次或跳过一帧。为了确保与帧速率更加同步，您应该收听该`Event.ENTER_FRAME`事件。

一个例子：

```
this.addEventListener(Event.ENTER_FRAME, updateFrame); 
```

⋮</p>

```
function updateFrame(e:Event):void {
    noiseBitmap.x--;
} 
```

# c++ - VirtualQueryEx 错误 - 页面过多

> ID：14171136
> 
> 赞同：0
> 
> 时间：2013-01-05T11:04:02.273
> 
> 标签：c++, windows, winapi, memory-management, paging

我正在使用 VirtualQueryEx 使用以下代码枚举模块的内存页：

```
unsigned char *p = (unsigned char *)module;
    MEMORY_BASIC_INFORMATION info;
    unsigned long usage = 0;
    for ( ;VirtualQueryEx(hProcess, p, &info, sizeof(info)) == sizeof(info);
        p += info.RegionSize ) 
    {
        printf("%#10.10x (%6uK)\t", info.BaseAddress, info.RegionSize/1024);

        switch (info.State) {
        case MEM_COMMIT:
            printf("Committed");
            break;
        case MEM_RESERVE:
            printf("Reserved");
            break;
        case MEM_FREE:
            printf("Free");
            break;
        }
        printf("\t");
        switch (info.Type) {
        case MEM_IMAGE:
            printf("Code Module");
            break;
        case MEM_MAPPED:
            printf("Mapped     ");
            break;
        case MEM_PRIVATE:
            printf("Private    ");
        }
        printf("\t");

        if ((info.State == MEM_COMMIT) && (info.Type == MEM_PRIVATE))
            usage +=info.RegionSize;

        int guard = 0, nocache = 0;

        if ( info.AllocationProtect & PAGE_NOCACHE)
            nocache = 1;
        if ( info.AllocationProtect & PAGE_GUARD )
            guard = 1;

        info.AllocationProtect &= ~(PAGE_GUARD | PAGE_NOCACHE);

        switch (info.AllocationProtect) {
        case PAGE_READONLY:
            printf("Read Only");
            break;
        case PAGE_READWRITE:
            printf("Read/Write");
            break;
        case PAGE_WRITECOPY:
            printf("Copy on Write");
            break;
        case PAGE_EXECUTE:
            printf("Execute only");
            break;
        case PAGE_EXECUTE_READ:
            printf("Execute/Read");
            break;
        case PAGE_EXECUTE_READWRITE:
            printf("Execute/Read/Write");
            break;
        case PAGE_EXECUTE_WRITECOPY:
            printf("COW Executable");
            break;
        }

        if (guard)
            printf("\tguard page");
        if (nocache)
            printf("\tnon-cachable");
        printf("\n");
    } 
```

代码取自这里的另一篇文章。

问题是：VirtualQueryEx 不会停止枚举当前模块的页面（它只是在内存超出进程时停止）并且结果是**错误的**

这是我的输出和 VMMap 的输出

![在此处输入图像描述](../Images/42da50f438b1bc51f4d1a7c49c71a7ff.png)

正如您所看到的，从突出显示的地址开始，页面都是错误的，VirtualQueryEx 甚至不会停止枚举它们。

我哪里错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T15:57:00.783

VMMap 知道[pe](/questions/tagged/pe "显示标记为“pe”的问题")文件格式（.data、.text、ext 部分），VirtualQueryEx 不知道。MEMORY_BASIC_INFORMATION.RegionSize - 所有页面具有相同保护属性的区域大小（屏幕截图中的 RW）。这就是计算区域 VMMap 和 VirtualQueryEx 不匹配的原因。

![在此处输入图像描述](../Images/ba34a5b09b9b7643d14053ebe4a77444.png)

VirtualQueryEx 甚至不会停止枚举它们。

```
p += info.RegionSize 
```

扫描整个用户模式虚拟内存地址空间。如果要停止扫描，请检查 AllocationBase 字段。

# xml - Marshall/UnMarshall Java 对象：GWT 中的 REST 服务（客户端）

> ID：14171137
> 
> 赞同：0
> 
> 时间：2013-01-05T11:04:12.413
> 
> 标签：xml, rest, gwt, marshalling, unmarshalling

我的服务器上有一些 REST 服务（使用 RESTeasy）。

我想在客户端 (GWT) 上调用我的服务。我收到执行 GET 请求的 xml 响应，但我被困在解组响应中。我对 POST 请求有同样的问题，我需要发送序列化的 java 对象并解组响应。

听说过Overlay对象，piriti/RestyGWT（不支持xml），Errai（这对我的小项目来说似乎是一个太重的解决方案），自己解析xml并在之后重建对象，JAXB（是否推荐使用它在客户端？），...

最好的做法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T22:55:01.083

简单的回答。使用 Errai。它简化了 de/marshalling 过程并且非常易于使用。即使是较小的项目。使用 devmode 时编组需要一些时间，但您已经习惯了在这部分等待，不是吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T19:07:12.713

我不知道 GWT 中有任何成熟的 jaxb 项目。我想这是因为在客户端（以及在服务器端）有一个很好的 xml 替代方案 - JSON。所以这方面的“最佳实践”并不多。我只能建议看看 gwtjaxb 项目

[http://code.google.com/p/gwtjaxb/](http://code.google.com/p/gwtjaxb/)

但似乎它不会解决你所有的问题。

如果你不能改变你的服务器端，我认为你必须使用 piriti 之类的东西——也许这将是不平凡的，但至少是可能的。

# c++ - Dijkstra 算法中的堆

> ID：14171147
> 
> 赞同：0
> 
> 时间：2013-01-05T11:05:11.530
> 
> 标签：c++, algorithm, dijkstra

有人可以解释一下***HeapDesc*在 ShaneSaunders Dijkstra 算法中**的重要性以及它是如何在这里使用的吗？一般来说，我知道 Dijkstra 算法是如何工作的。但是，我没有在实现中得到堆部分。

它是一个大代码。因此，如果您想查看它，我会发布一个链接。

这里去[http://www.cosc.canterbury.ac.nz/research/RG/alg/dijkstra.cpp](http://www.cosc.canterbury.ac.nz/research/RG/alg/dijkstra.cpp)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T11:10:31.067

在 Dijkstra 中，您需要一个高效的数据结构，为您提供最低成本的边缘，让您可以到达另一个顶点。

[堆](http://en.wikipedia.org/wiki/Heap_%28data_structure%29)正是一种数据结构，它允许您存储一组边并以最低成本有效地检索一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T11:18:13.477

HeapDesc 可能实现了工厂设计模式来创建不同种类的堆。如果您检查文件[http://www.cosc.canterbury.ac.nz/research/RG/alg/dijkstra.h](http://www.cosc.canterbury.ac.nz/research/RG/alg/dijkstra.h)，您会注意到构造函数中的堆变量是 Heap 类型的对象。

查看本文以了解工厂设计模式。 [http://en.wikipedia.org/wiki/Factory_method_pattern](http://en.wikipedia.org/wiki/Factory_method_pattern)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T11:09:43.150

[Dijkstra 的算法](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)涉及大量“最低成本路径”查找。

最小或最大查找是[堆](http://en.wikipedia.org/wiki/Heap_%28data_structure%29)优化的对象（ O(1) ），这就是使用它的原因。

就`HeapDesc`其本身而言，它只是[一个工厂方法](http://www.cosc.canterbury.ac.nz/research/RG/alg/heap.h)，用于分配一个堆对象。

```
Heap *newInstance(int n) const { return new T(n); }; // from heap.h 
```

# r - 如何告诉 CRAN 自动安装包依赖项？

> ID：14171148
> 
> 赞同：80
> 
> 时间：2013-01-05T11:05:15.153
> 
> 标签：r, cran, r-forge

我在 R 中开发了一个包，当我在本地计算机中检查并构建它时，它可以正常工作。但是当我在 CRAN 中尝试它时，我得到一个包依赖项错误。我的包依赖于其他包的两个功能。

如果我在`description`using`Depends`或下列出其他包`imports`，它会自动与新包一起安装吗？或者我是否需要在`install.packages("packagename")`我使用过其他包的函数下显式调用该函数。如果这一切都错了，解决包依赖关系`R`以通过测试`R CMD check`并`build`提交给 CRAN 的最佳方法是什么？

谢谢你。

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2013-01-05T14:52:04.117

在您自己的系统上，尝试

```
install.packages("foo", dependencies=...) 
```

与`dependencies=`论点被记录为

```
dependencies: logical indicating to also install uninstalled packages
      which these packages depend on/link to/import/suggest (and so
      on recursively).  Not used if ‘repos = NULL’.  Can also be a
      character vector, a subset of ‘c("Depends", "Imports",
      "LinkingTo", "Suggests", "Enhances")’.

      Only supported if ‘lib’ is of length one (or missing), so it
      is unambiguous where to install the dependent packages.  If
      this is not the case it is ignored, with a warning.

      The default, ‘NA’, means ‘c("Depends", "Imports",
      "LinkingTo")’.

      ‘TRUE’ means (as from R 2.15.0) to use ‘c("Depends",
      "Imports", "LinkingTo", "Suggests")’ for ‘pkgs’ and
      ‘c("Depends", "Imports", "LinkingTo")’ for added
      dependencies: this installs all the packages needed to run
      ‘pkgs’, their examples, tests and vignettes (if the package
      author specified them correctly). 
```

所以你可能想要一个值`TRUE`。

在您的包中，列出所需的内容`Depends:`，请参阅 [Writing R Extensions](http://cran.r-project.org/doc/manuals/r-release/R-exts.html)手册，这很清楚。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-11-26T09:34:21.737

另一种可能性是在 R 包安装程序的右下角选择安装依赖项复选框：

[![在此处输入图像描述](../Images/05e395c412badade9ccb2bea2abe40a1.png)](https://i.stack.imgur.com/v33Ez.png)

# php - 使用一些自动加载的类创建一个没有控制器的 zf2 模块

> ID：14171154
> 
> 赞同：0
> 
> 时间：2013-01-05T11:05:44.150
> 
> 标签：php, zend-framework2, zend-loader

我正在尝试创建一个 Zend Framework 2 模块，该模块具有一些我想在我的一些控制器中使用的通用类。

我在“供应商”目录中创建了一个名为“tux-drink-zf2-module”的目录。

我将该目录添加到“application.config.php”。

我的 Module.php 具有以下内容：

```
<?php

namespace TuxDrink;

use Zend\ModuleManager\Feature\AutoloaderProviderInterface;

class Module implements AutoloaderProviderInterface
{
public function getAutoloaderConfig()
{
    return array(
        'Zend\Loader\ClassMapAutoloader' => array(
            __DIR__ . '/autoload_classmap.php',
        ),
        'Zend\Loader\StandardAutoloader' => array(
            'namespaces' => array(
                __NAMESPACE__ => __DIR__ . '/src/' . __NAMESPACE__,
            ),
        ),
    );
}
} 
```

# 更新

新的：

我的 autoload_classmap.php 有以下内容：

```
<?php
// Generated by ZF2's ./bin/classmap_generator.php
return array(
'TuxDrink\Module'                                  => __DIR__ . '/Module.php',
'TuxDbCassandra'                                   => __DIR__ . '/src/TuxDrink/TuxDb/Cassandra/TuxDbCassandra.php',
'TuxDrink\Drink\Model\AlcoholSum'                  => __DIR__ . '/src/TuxDrink/TuxDb/Mysql/Drink/Model/AlcoholSum.php',
'TuxDrink\Drink\Model\AlcoholSumTable'             => __DIR__ . '/src/TuxDrink/TuxDb/Mysql/Drink/Model/AlcoholSumTable.php',
'TuxDrink\Drink\Model\Drink'                       => __DIR__ . '/src/TuxDrink/TuxDb/Mysql/Drink/Model/Drink.php',
'TuxDrink\Drink\Model\DrinkBrand'                  => __DIR__ . '/src/TuxDrink/TuxDb/Mysql/Drink/Model/DrinkBrand.php',
'TuxDrink\Drink\Model\DrinkBrandTable'             => __DIR__ . '/src/TuxDrink/TuxDb/Mysql/Drink/Model/DrinkBrandTable.php',
'TuxDrink\Drink\Model\DrinkCompany'                => __DIR__ . '/src/TuxDrink/TuxDb/Mysql/Drink/Model/DrinkCompany.php',
'TuxDrink\Drink\Model\DrinkCompanyTable'           => __DIR__ . '/src/TuxDrink/TuxDb/Mysql/Drink/Model/DrinkCompanyTable.php',
'TuxDrink\Drink\Model\DrinkFlavor'                 => __DIR__ . '/src/TuxDrink/TuxDb/Mysql/Drink/Model/DrinkFlavor.php',
'TuxDrink\Drink\Model\DrinkFlavorTable'            => __DIR__ . '/src/TuxDrink/TuxDb/Mysql/Drink/Model/DrinkFlavorTable.php',
'TuxDrink\Drink\Model\DrinkFlavorType'             => __DIR__ . '/src/TuxDrink/TuxDb/Mysql/Drink/Model/DrinkFlavorType.php',
'TuxDrink\Drink\Model\DrinkFlavorTypeTable'        => __DIR__ . '/src/TuxDrink/TuxDb/Mysql/Drink/Model/DrinkFlavorTypeTable.php',
'TuxDrink\Drink\Model\DrinkIngredient'             => __DIR__ . '/src/TuxDrink/TuxDb/Mysql/Drink/Model/DrinkIngredient.php',
'TuxDrink\Drink\Model\DrinkIngredientTable'        => __DIR__ . '/src/TuxDrink/TuxDb/Mysql/Drink/Model/DrinkIngredientTable.php',
'TuxDrink\Drink\Model\DrinkIngredientType'         => __DIR__ . '/src/TuxDrink/TuxDb/Mysql/Drink/Model/DrinkIngredientType.php',
'TuxDrink\Drink\Model\DrinkIngredientTypeTable'    => __DIR__ . '/src/TuxDrink/TuxDb/Mysql/Drink/Model/DrinkIngredientTypeTable.php',
'TuxDrink\Drink\Model\DrinkTable'                  => __DIR__ . '/src/TuxDrink/TuxDb/Mysql/Drink/Model/DrinkTable.php',
'TuxDrink\Drink\Model\DrinkType'                   => __DIR__ . '/src/TuxDrink/TuxDb/Mysql/Drink/Model/DrinkType.php',
'TuxDrink\Drink\Model\DrinkTypeTable'              => __DIR__ . '/src/TuxDrink/TuxDb/Mysql/Drink/Model/DrinkTypeTable.php',
'TuxDrink\Drink\Model\GlobalImage'                 => __DIR__ . '/src/TuxDrink/TuxDb/Mysql/Drink/Model/GlobalImage.php',
'TuxDrink\Drink\Model\GlobalImageLink'             => __DIR__ . '/src/TuxDrink/TuxDb/Mysql/Drink/Model/GlobalImageLink.php',
'TuxDrink\Drink\Model\GlobalImageLinkPending'      => __DIR__ . '/src/TuxDrink/TuxDb/Mysql/Drink/Model/GlobalImageLinkPending.php',
'TuxDrink\Drink\Model\GlobalImageLinkPendingTable' => __DIR__ . '/src/TuxDrink/TuxDb/Mysql/Drink/Model/GlobalImageLinkPendingTable.php',
'TuxDrink\Drink\Model\GlobalImageLinkTable'        => __DIR__ . '/src/TuxDrink/TuxDb/Mysql/Drink/Model/GlobalImageLinkTable.php',
'TuxDrink\Drink\Model\GlobalImageTable'            => __DIR__ . '/src/TuxDrink/TuxDb/Mysql/Drink/Model/GlobalImageTable.php',
'TuxDrink\Drink\Model\GlobalImageType'             => __DIR__ . '/src/TuxDrink/TuxDb/Mysql/Drink/Model/GlobalImageType.php',
'TuxDrink\Drink\Model\GlobalImageTypeTable'        => __DIR__ . '/src/TuxDrink/TuxDb/Mysql/Drink/Model/GlobalImageTypeTable.php',
'TuxDrink\Drink\Model\LiquidColor'                 => __DIR__ . '/src/TuxDrink/TuxDb/Mysql/Drink/Model/LiquidColor.php',
'TuxDrink\Drink\Model\LiquidColorTable'            => __DIR__ . '/src/TuxDrink/TuxDb/Mysql/Drink/Model/LiquidColorTable.php',
'TuxDrink\Drink\Model\LiquidColorType'             => __DIR__ . '/src/TuxDrink/TuxDb/Mysql/Drink/Model/LiquidColorType.php',
'TuxDrink\Drink\Model\LiquidColorTypeTable'        => __DIR__ . '/src/TuxDrink/TuxDb/Mysql/Drink/Model/LiquidColorTypeTable.php',
'TuxDrink\Drink\Model\PendingDrinkCommits'         => __DIR__ . '/src/TuxDrink/TuxDb/Mysql/Drink/Model/PendingDrinkCommits.php',
'TuxDrink\Drink\Model\PendingDrinkCommitsTable'    => __DIR__ . '/src/TuxDrink/TuxDb/Mysql/Drink/Model/PendingDrinkCommitsTable.php',
'TuxDrink\TuxDb\Mysql\Drink\TuxDbMysqlDrink'       => __DIR__ . '/src/TuxDrink/TuxDb/Mysql/Drink/TuxDbMysqlDrink.php',
'TuxDrink\TuxDb\Drink\Util\AlcoholCalc'            => __DIR__ . '/src/TuxDrink/TuxDb/Mysql/Drink/Util/AlcoholCalc.php',
'TuxDrink\TuxDb\Mysql\TuxDbMysql'                  => __DIR__ . '/src/TuxDrink/TuxDb/Mysql/TuxDbMysql.php',
'TuxDrink\TuxDb\TuxDbAbstract'                     => __DIR__ . '/src/TuxDrink/TuxDb/TuxDbAbstract.php',
'TuxDrink\TuxDb\TuxDbInterface'                    => __DIR__ . '/src/TuxDrink/TuxDb/TuxDbInterface.php',
'TuxDrink\TuxDb\TuxDrinkInterface'                 => __DIR__ . '/src/TuxDrink/TuxDb/TuxDrinkInterface.php',
'TuxDrink\TuxDb\TuxTableInterface'                 => __DIR__ . '/src/TuxDrink/TuxDb/TuxTableInterface.php',
); 
```

但是当我尝试刷新我的项目时，仍然出现以下错误：

```
 Fatal error: Uncaught exception 'Zend\ModuleManager\Exception\RuntimeException' with message 'Module (tux-drink-zf2-module) could not be initialized.' in /Volumes/2g-storage/projects/php-projects/myalcoholist/vendor/zendframework/zendframework/library/Zend/ModuleManager/ModuleManager.php on line 144 
```

也许我错过了一些其他文件以便将其正确配置为模块？请记住，这是一个源包，没有控制器、视图和操作。

任何有关该问题的信息将不胜感激。

# 更新

当我修复目录结构时，这个问题得到了解决。

但是当我尝试在其中一个控制器中使用该模块时。

就我而言，我需要使用 TuxDrink 模块中的两个类。

“TuxDbMysqlDrink”类和“TuxDbMysql”类。

我需要在“drink-brand-autocomplete”操作中的控制器“DrinkController”中使用它们。

我使用以下代码：

```
use \TuxDb\Mysql\Drink\TuxDbMysqlDrink;

use \TuxDb\Mysql\TuxDbMysql;

public function drinkBrandAutocompleteAction() {
    $param=$this->getRequest()->getQuery('q');
    if ($param) {
        $drink = new TuxDbMysqlDrink();
        $result=$drink->autoCompleteDrinkBrand($param);
        return $result;
    }
} 
```

我收到以下错误消息：

```
 Fatal error: DrinkManagement\Controller\DrinkController cannot use TuxDrink\TuxDb\Mysql\Drink\TuxDbMysqlDrink - it is not a trait in /Volumes/2g-storage/projects/php-projects/myalcoholist/module/DrinkManagement/src/DrinkManagement/Controller/DrinkController.php on line 197 
```

有任何想法吗？

尝试谷歌，无法理解“这不是特征”是什么意思

# 更新

用这段代码解决了它：

```
public function drinkBrandAutocompleteAction() {
    $param=$this->getRequest()->getQuery('q');
    if ($param) {
        $drink = new \TuxDrink\TuxDb\Mysql\Drink\TuxDbMysqlDrink();
        $result=$drink->autoCompleteDrinkBrand($param);
        die(var_export($result,1));
     ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T11:12:02.270

根据错误，模块名称是`tux-drink-zf2-module`. 考虑到消毒，我假设您的模块是 CamelCased 之类的`TuxDrinkZf2Module`。因此，您在内部分配的名称空间`Module.php`不匹配，因为它只是`TuxDrink`.

所以我的猜测是，你的名字都不正确。

# c# - 如何在 Asp.net 中自动执行命令/功能以在没有用户登录的情况下发送电子邮件/短信

> ID：14171159
> 
> 赞同：1
> 
> 时间：2013-01-05T11:06:02.587
> 
> 标签：c#, asp.net

> **可能重复：**
> [在 asp.net 中进行预定的后台工作](https://stackoverflow.com/questions/7645302/doing-scheduled-background-work-in-asp-net)

我想在 Asp.net C# 中自动向我的用户发送电子邮件/短信，即使他们没有登录。

我想做：在用户生日时自动向用户发送电子邮件/短信说生日快乐。

运行站点示例：Way2SmS.com 在用户生日时自动发送用户短信 当用户将其设置为发送（用户提供日期和时间）时，Way2Sms 也会自动发送短信。

你能帮我解决这个问题吗？

有这样做的可能性吗？

如果是，请提供一些代码或链接或详细信息。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T16:48:35.183

您可能更喜欢您安排的控制台应用程序或 Windows 服务。否则，您必须保持您的网站“活跃”并使用计时器等。这更像是一种解决方法。

在我看来，最好的解决方案是一个 Windows 服务，它可以定期检查日期和您的数据库并执行所需的操作。没有人需要登录。如果您担心负载，您甚至可以在另一台机器上运行该服务。

# iphone - 制作稳定的表头视图

> ID：14171164
> 
> 赞同：0
> 
> 时间：2013-01-05T11:06:33.150
> 
> 标签：iphone, uitableview, custom-cell

我有 4 个按钮`headerView`，当我们滚动 tableView 时，我只是希望它们在屏幕顶部稳定，如何使其稳定（即使我们滚动表格也保持在 1 个位置）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T11:14:56.073

这是不可能的，所以创建一个新视图并将其设置在 tableview 上方。

# android - 在活动 A 和 C (A -> B -> C) 之间共享变量

> ID：14171167
> 
> 赞同：0
> 
> 时间：2013-01-05T11:06:39.873
> 
> 标签：android, android-intent

正如标题中所写，我想在活动 A 和 C 之间共享一个变量，而不在活动 B 中检索该变量？可能吗 ？

我想要这样的东西：

```
Intent intent = new Intent(A.this,C.class);
intent.putExtra(variableA, variableC); 
```

...（我应该在这里写什么）

实际上我的应用程序正在这样做：

```
Intent intent = new Intent(A.this, B.class);
startActivity(intent); 
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T11:12:20.350

Intent.putExtra 像 HashMap 一样工作，具有键/值逻辑。第一个论点是关键。密钥必须唯一。如果您尝试使用相同的键存储不同的值，则只会插入最后一个值。

```
 Intent intent = new Intent(A.this,C.class);
    intent.putExtra("variableAKey", variableA);
    intent.putExtra("variableCKey", variableC); 
```

当调用目标活动的 onCreate 时，您可以通过以下方式检索值：

```
Intent intent = getIntent();
intent.getIntExtra("variableAKey"); 
```

如果`variableA`是`int`. Intent 有一个用于原始类型和 String 以及可序列化/可打包对象的 getter。你应该参考[文档](http://developer.android.com/reference/android/content/Intent.html#getIntExtra%28java.lang.String,%20int%29)

# java - 在 Activity A 中预加载 Webview 并将其传递给 Activity B 以加快加载速度

> ID：14171170
> 
> 赞同：8
> 
> 时间：2013-01-05T11:07:06.590
> 
> 标签：java, android, background, webview

在我的一个应用程序中，我使用 webview 加载页面，场景是我有 Activity A 和 Activity B，Activity A 显示菜单列表，在选择列表中的任何项目时，它将在 Activity 中打开 Activity B BI 正在执行所有与 webview 相关的活动，例如使用 URL 加载 webview，但它需要花费大量时间来显示该页面，我的问题是无论如何我可以在活动 A 中预加载 webview 并将其传递给 B 以立即加载。

如果可以在 Activity A 中预加载 webview 并将其传递给 Activity B 以立即渲染，请告诉我它是如何实现的？

注意：我可以在 Activity A 中使用进度对话框，直到 webview 加载（等到 onPageFinished）被调用并启动 Activity B，但是我怎样才能在此处立即加载 webview？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T08:48:49.927

您不能以任何方式在活动之间共享传输视图。所以你应该停留在单一的活动中（你可以使用片段来组织你的视图）。创建 webview，隐藏它，开始加载数据。加载数据时显示 webview。

PS 您可以手动下载 html 源代码和/或一些资源，以便稍后与 webview 一起使用......但这可能很棘手。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T09:58:17.047

您不能在活动之间共享视图，但**根据**您从 url 加载的页面类型，您可以将 html 缓存到 sd 卡上的文件中，然后从该文件加载活动 B 中的 WebView。

# javascript - 以编程方式确定 div 元素的高度

> ID：14171173
> 
> 赞同：2
> 
> 时间：2013-01-05T11:07:28.873
> 
> 标签：javascript, html

我正在尝试获取 div 的高度，然后根据高度定位它。我已经阅读了有关此的各种文章，但结果我似乎总是得到 NaN。是的，在绘制 div 之后，javascript 会在正文的末尾加载。

我正在使用 asp.net 动态创建这个 javascript。到目前为止我的输出是：

```
var resultsDiv = document.getElementById('resultsDiv');
var resultsInnerDiv = document.getElementById('resultsInnerDiv');
resultsInnerDiv.innerHTML = "test";
var h = parseInt(resultsInnerDiv.style.offsetHeight);
alert(parseInt(resultsInnerDiv.style.offsetHeight));
resultsInnerDiv.style.top = ((h / 2) -125) + 'px'; 
```

我需要得到实际高度，而不是`NaN`. `NaN`像素显然无效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T11:31:50.463

我认为这是你需要的：

```
var resultsDiv = document.getElementById('resultsDiv');
var resultsInnerDiv = document.getElementById('resultsInnerDiv');
resultsInnerDiv.innerHTML = "test";
var h = parseInt(resultsInnerDiv.offsetHeight);
alert(parseInt(resultsInnerDiv.offsetHeight));
resultsInnerDiv.style.top = ((h / 2) -125) + 'px'; 
```

`offsetHeight`不是 的属性`element.style`，而是元素本身（参见[此处](https://developer.mozilla.org/en/docs/DOM/element.offsetHeight)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T11:38:23.947

试试这个：

```
var resultsDiv = document.getElementById('resultsDiv');
var resultsInnerDiv = document.getElementById('resultsInnerDiv');

resultsInnerDiv.innerHTML = "test";

var h = parseInt(resultsInnerDiv.offsetHeight);

alert(h);

resultsInnerDiv.style.top = ((h / 2) -125) + 'px'; 
```

# php - 我可以告诉 mod_deflate 和 PHP 只在一个目录上跳过压缩吗？

> ID：14171176
> 
> 赞同：7
> 
> 时间：2013-01-05T11:07:55.737
> 
> 标签：php, apache, .htaccess, mod-deflate

为了压缩我的所有网页，我使用了这个 .htaccess 代码。如果可能，它使用 Apache`deflate`模块，否则应用`PHP` `ob_gzhandler`压缩。

一切正常，但出于特定原因，我不想对文件夹应用压缩`./folderWithoutCompression`。

**问题：如果在下面的以下脚本中`deflate`定义或未定义Apache 模块（PHP 案例），我如何添加此异常？`ob_gzhandler`**

```
<IfModule mod_deflate.c>
  # force deflate for mangled headers
  # developer.yahoo.com/blogs/ydn/posts/2010/12/pushing-beyond-gzipping/
  <IfModule mod_setenvif.c>
    <IfModule mod_headers.c>
      SetEnvIfNoCase ^(Accept-EncodXng|X-cept-Encoding|X{15}|~{15}|-{15})$ ^((gzip|deflate)\s*,?\s*)+|[X~-]{4,13}$ HAVE_Accept-Encoding
      RequestHeader append Accept-Encoding "gzip,deflate" env=HAVE_Accept-Encoding
    </IfModule>
  </IfModule>

  # HTML, TXT, CSS, JavaScript, JSON, XML, HTC:
  <IfModule filter_module>
    FilterDeclare   COMPRESS
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $text/html
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $text/css
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $text/plain
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $text/xml
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $text/x-component
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $application/javascript
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $application/json
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $application/xml
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $application/xhtml+xml
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $application/rss+xml
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $application/atom+xml
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $application/vnd.ms-fontobject
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $image/svg+xml
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $application/x-font-ttf
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $font/opentype
    FilterChain     COMPRESS
    FilterProtocol  COMPRESS  DEFLATE change=yes;byteranges=no
  </IfModule>

  <IfModule !mod_filter.c>
    # Legacy versions of Apache
    AddOutputFilterByType DEFLATE text/html text/plain text/css application/json
    AddOutputFilterByType DEFLATE application/javascript
    AddOutputFilterByType DEFLATE text/xml application/xml text/x-component
    AddOutputFilterByType DEFLATE application/xhtml+xml application/rss+xml 
    AddOutputFilterByType DEFLATE application/atom+xml
    AddOutputFilterByType DEFLATE image/svg+xml application/vnd.ms-fontobject 
    AddOutputFilterByType DEFLATE application/x-font-ttf font/opentype
  </IfModule>
</IfModule>

<IfModule !mod_deflate.c>
    #Apache deflate module is not defined, active the page compression through PHP ob_gzhandler
    php_flag output_buffering On
    php_value output_handler ob_gzhandler
</IfModule> 
```

**编辑**

作为解决方法，我`content-type`对 folderWithoutCompression 文件夹中存在的所有文件使用自定义。

我确信可以使用[`<Location>`](http://httpd.apache.org/docs/2.2/mod/core.html#location), [`<LocationMatch`>](http://httpd.apache.org/docs/2.2/mod/core.html#locationmatch) , [`<DirectoryMatch`>](http://httpd.apache.org/docs/2.2/mod/core.html#directorymatch)或[`<Directory`>](http://httpd.apache.org/docs/2.2/mod/core.html#directory)来排除某些目录，但是当我尝试处理时，我总是得到一个 Apache 错误 500

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-30T06:51:37.863

我终于在这里找到了答案：

[如何在 apache2 中禁用 mod_deflate？](https://stackoverflow.com/questions/1922934/how-to-disable-mod-deflate-in-apache2)

谢谢@Gumbo

```
# for URL paths that begin with "/foo/bar/"
SetEnvIf Request_URI ^/foo/bar/ no-gzip=1

# for files that end with ".py"
<FilesMatch \.py$>
    SetEnv no-gzip 1
</FilesMatch> 
```

# jquery - 如何使用 jQuery 验证登录表单？

> ID：14171179
> 
> 赞同：1
> 
> 时间：2013-01-05T11:08:38.387
> 
> 标签：jquery, jquery-validate

谁能告诉我如何使用 jQuery Validate 插件验证登录表单？

我试过这段代码：

```
 <script src="jquery-1.8.3.js"></script>
<script src="loginbut/js/login.js"></script>
<script src="jquery.validate.js" type="text/javascript">
</script>
<script>
$(document).ready(function(){
$("#loginform").validate({
rules:{
//name:"required",
username:"required",

password:"required",
gender:"required",

},
messages:{
email:"This field cannot be empty",

password:{
required:"specify password",

},

});

});

</script> 
```

和html代码为：

```
<div id="bar">
    <div id="container">
        <!-- Login Starts Here -->
        <div id="loginContainer">
            <a href="#" id="loginButton"><span>Login</span><em></em></a>
            <div style="clear:both"></div>
            <div id="loginBox">                
                <form id="loginForm">
                    <fieldset id="body">
                        <fieldset>
                            <label for="email">Username</label>
                            <input type="text" name="email" id="email" class="required"/>
                        </fieldset>
                        <fieldset>
                            <label for="password">Password</label>
                            <input type="password" name="password" id="password" class="required"/>
                        </fieldset>
                        <input type="submit" id="login" value="Sign in" />
                        <label for="checkbox"><input type="checkbox" id="checkbox" />Remember me</label>
                    </fieldset>
                    <span><a href="#">Forgot your password?</a></span>
                </form>
            </div>
        </div>
        <!-- Login Ends Here -->
    </div>
</div> 
```

验证不起作用。

请帮帮我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-05T18:43:53.827

它不起作用，因为您有大量的语法和格式错误。该`validate()`插件使用字段`name`上的属性`input`。您的两个字段正在使用`email`and`password`为他们的`name` `attribute`. 我什至不知道为什么你的函数 contains `gender`，因为它没有包含在我能看到的任何地方的 HTML 中。

你的代码有很多问题：

*   缺少右括号，`}`
*   您没有名为 的字段`"gender"`，因此我删除了此规则。
*   `username:"required",`不是此规则的典型格式。应该`required: true,`
*   当字段`"username"`的`name`属性为`"email"`
*   `#loginForm`你的 jQuery 代码拼错了
*   如果要在 jQuery 中指定规则，则不需要，因此请从 HTML 中删除`class="required"`它。`input`
*   删除了许多“尾随逗号”，这将导致某些版本的资源管理器出现问题

**提示：**当代码正确缩进时，您的许多语法错误会更容易发现。

假设您的 HTML`form`是正确的，您的**jQuery**应该如下所示：

```
$(document).ready(function(){

    $("#loginForm").validate({
        rules: {
            email: {
                required: true
            },
            password: {
                required: true
            }
        },
        messages: {
            email: {
                required: "specify email"
            },
            password: {
                required: "specify password"
            }
        }
    });

}); 
```

**工作演示：**

**[http://jsfiddle.net/fYdkL/1/](http://jsfiddle.net/fYdkL/1/)**

* * *

**文档：**

[http://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)

**官方示例：**

[http://jquery.bassistance.de/validate/demo/](http://jquery.bassistance.de/validate/demo/)

# web-services - EJB 作为 WebService 上下文根消失了

> ID：14171181
> 
> 赞同：1
> 
> 时间：2013-01-05T11:08:44.040
> 
> 标签：web-services, glassfish, ejb, jax-ws

我正在使用 JAX-WS 开发一个项目。

当我用 WSDL 注释我的端点类时，`@WebService`在控制台中标记为

```
.../<context-root>/XXXService?wsdl 
```

当我`@Stateless`在这些端点上添加时，WSDL 没有在控制台中标记，实际地址是

```
.../XXXService/XXXEndpoint?wsdl 
```

这是正常的还是预期的？

**更新**

供更多读者参考。

我找不到任何解决方案。我决定不使用混合`@Stateless`+ `@WebService`。我拆分了那些`@EJB`s 和`@WebServices`清晰的模块分离。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T20:32:53.827

你所经历的是预期的行为。如果服务不起作用，那就另当别论了。当 EJB 3.x 无状态 bean 部署为 WS 时，它的命名默认为您在此处看到的，

```
Servername/SIBnameService/SIBName. 
```

原因很明显：EJB 不在 Web 应用程序的上下文中运行，因此不能这样处理。您可以使用注释`serviceName`上的属性自定义默认名称`@WebService`

从apache看[这个](https://cwiki.apache.org/GMOxKB/what-is-the-endpoint-address-of-my-web-service.html)

# php - 在codeigniter中重命名文件？

> ID：14171191
> 
> 赞同：2
> 
> 时间：2013-01-05T11:10:38.337
> 
> 标签：php, codeigniter, file-upload

我需要在codeigniter中上传时重命名文件名，默认情况下它会创建一个文件名，如`sample.png`，`sample1.png`同时再次上传相同的文件，但我需要对使用随机数上传的文件进行一些身份验证，如`1234_sample.png`，`1232_sample.png`。

任何方式来做到这一点。?

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T11:35:16.680

在您的控制器中，在您运行实际上传代码之前，请输入以下内容：

```
$config['encrypt_name'] = TRUE; 
```

根据 CodeIgniter[文档](http://ellislab.com/codeigniter/user-guide/libraries/file_uploading.html)：

> 如果设置为 TRUE，文件名将被转换为随机加密字符串。如果您希望以上传者无法识别的名称保存文件，这将很有用。

这应该在你运行之前放置：

```
$this->load->library('upload', $config); // need to pass $config array 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T11:25:27.873

您尚未发布代码，但`rand()`如果您遇到重名问题，您仍然可以使用 PHP 函数：

你可以这样做：

```
$file_name=rand(1,1000)."_sample.png"; 
```

或者

```
$file_name=time()."_sample.png"; 
```

希望它会帮助你。

# wpf - GraphSharp 库 - 绑定布局

> ID：14171194
> 
> 赞同：0
> 
> 时间：2013-01-05T11:11:32.580
> 
> 标签：wpf, xaml, data-binding, graph-sharp

在我们的项目中，我们使用 GraphSharp 库。当我们想从图中删除所有边和顶点时，我们遇到了一些问题。

在每个示例中，在 xaml 中都有类似的东西

```
<zoom:ZoomControl  Grid.Row="1"  Zoom="0.2" ZoomBoxOpacity="0.5" Background="#ff656565">

                    <toProjectGraph:EntityGraphLayout x:Name="graphLayout" Margin="10"
                    Graph="{Binding Path=GraphViewModel.EntityGraph}"
                    LayoutAlgorithmType="{Binding Path=GraphViewModel.LayoutAlgorithmType, Mode=OneWay}"
                    OverlapRemovalAlgorithmType="FSA"
                    HighlightAlgorithmType="Simple" 
                      />
                </zoom:ZoomControl> 
```

xaml 创建我们类的实例`EntityGraphLayout`并使用它来可视化所有内容。

是否有可能以某种方式将此实例“绑定”`EntityGraphLayout`到我们视图模型中的某个属性，以便我们可以在我们的视图模型代码中引用它？

或者也许有一种方法可以创建此类的实例并告诉 xaml 从某个路径获取对对象的引用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T13:30:03.567

听起来您想要的是在视图模型中创建对象，将其公开为属性，并将其绑定到`Content`缩放控件的属性，如下所示：

视图模型：

```
public class ViewModel {
    private EntityGraphLayout _layout = new EntityGraphLayout();
    public EntityGraphLayout EntityGraphLayoutProperty
    { 
        get { return _layout; } 
        set { _layout = value; }
    }
} 
```

XAML：

```
<zoom:ZoomControl Content="{Binding EntityGraphLayoutProperty}" Grid.Row="1"  Zoom="0.2" ZoomBoxOpacity="0.5" Background="#ff656565" >
</zoom:ZoomControl> 
```

请注意，您需要确保将`DataContext`缩放控件设置为您的视图模型。

如果您希望在 XAML 中创建它，您还可以通过`graphLayout`在 XAML 中定义的名称引用它来访问视图模型中的对象。这将需要在您的视图模型中引用视图，这可能并不理想。

# c++ - 插入排序 C 实现

> ID：14171195
> 
> 赞同：-1
> 
> 时间：2013-01-05T11:11:36.337
> 
> 标签：c++, c

我将插入排序实现为：

```
void insertion_sort(int * list, int len ) {
int i, j;
for(j=1; j<len; j++) {
  int   key = list[j];
  i =   j - 1;
  while(i >= 0 && list[i] > key) {
    list[i + 1] = list[i];
    i   = i - 1;
  }
  list[i + 1]   = key;
  }
} 
```

当我这样调用这个函数时：

```
int list[] = {5, 6, 4, 3, 1, 2};
insertion_sort(list, sizeof(list)/sizeof(list[0])); 
```

它工作正常。但是当我将列表声明为：

```
int * list = {5, 6, 4, 3, 1, 2}; 
```

它失败。我知道我如何使用指针存在一些问题，但你能详细说明一下吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T11:13:11.897

没有问题，`sizeof`以字节为单位为您提供参数的大小-第一个是数组，因此它为您提供元素数量乘以元素大小，第二个是指针，因此它为您提供指针...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-05T11:12:58.830

一方面，`sizeof(list)/sizeof(list[0])`不再评估数组的大小。

# optimization - CUDA：由于迭代过程优化延迟

> ID：14171196
> 
> 赞同：0
> 
> 时间：2013-01-05T11:11:57.900
> 
> 标签：optimization, cuda, fft, latency

我有一个迭代计算，每次迭代都涉及傅立叶变换。

在高级情况下，它看起来像这样：

```
// executed in host , calling functions that run on the device
B = image
L = 100
while(L--) {
    A = FFT_2D(B)
    A = SOME_PER_PIXEL_CALCULATION(A)
    B = INVERSE_FFT_2D(A)
    B = SOME_PER_PIXEL_CALCULATION(B)
} 
```

我正在使用“cufft”库进行转换。

现在的问题是我一直在使用全局内存，

基本上，如果有办法用共享内存做一些工作，那就太好了，

但似乎使用 FFT 不允许我绕过这一点，因为只能从主机调用“cufft”库函数，并将输入和输出存储在全局内存中。

我应该如何解决这个问题？

谢谢。

* * *

编辑：

因为存在数据依赖性。似乎我无能为力，只能优化“每像素”计算......

瓶颈仍然是由于内核通过全局内存传递数据。在这种情况下，这似乎是不可避免的。

所以基本上我必须进行转换的事实是相反的，这使我无法共享中间计算数据。

目前我正在探索在频率空间中进行大部分计算的方法。（更多的数学问题）

那么有没有人知道如何在给定 F{f(x,y)} 的情况下[近似](https://math.stackexchange.com/questions/271031/need-numerical-approximation-for-fouriermax0-fx-given-fourierfx)F{max(0,f(x,y))} ？

* * *

编辑：

注意 f(x,y) 在时域中，因此是实值，

f(x,y) 也是在计算 pointwise max(0,f(x,y)) 之前处理的，因此确实有可能出现负值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T22:24:34.657

关于 FFT/IFFT，我认为您错误地假设 CUFFT 例程不在内部使用共享内存。FFT 计算的典型算法将整个 FFT 拆分为适合一个线程块的较小的算法，因此它们可能已经在内部利用共享内存，例如参见[论文](http://research.microsoft.com/pubs/131400/FftGpuSC08.pdf)。

关于 PER_PIXEL_CALCULATIONS，共享内存通常用于使线程块内的线程相互协作。我的问题是：PER_PIXEL_CALCULATIONS 是否相互独立？如果是这样，则可能不需要线程协作，您也不需要共享内存并仅使用寄存器来安排计算。

无论如何，要更具体地说明后一点，您应该提供有关您实际需要的更多信息（通过编辑原始帖子）。您的代码是否与 Gerchberg-Saxton 算法的实现有关？

# playframework - Play 2.0表单如何添加全局表单错误提示乐观锁失败

> ID：14171200
> 
> 赞同：5
> 
> 时间：2013-01-05T11:12:47.230
> 
> 标签：playframework, playframework-2.0

我有一个简单的模型对象：

```
case class Region(id: String, revision: Option[String], name: String)

object Region {        
    // Returns Some(region) if successful, None if revision doesn't match the latest
    // in the data store
    def insertOrUpdate(region: Region): Promise[Option[Region]]
} 
```

在我的控制器中，我想做这样的事情，但我不知道如何在响应中指示锁定失败。我想添加一个全局表单错误，但无法从 API 中看到。

```
def update(id: String) = Action {
    implicit request => regionForm.bindFromRequest.fold(
        formWithErrors => BadRequest(views.html.regions.edit(formWithErrors)),        
        region => Async{
            Region.insertOrUpdate(region).map{
                _ match {
                    case None => {
                    // How do I add a global form error indicating there were server side changes detected
                        BadRequest(views.html.regions.edit(regionForm.fill(region))
                    }
                    case Some(r) => Redirect(views.html.regions.index).flashing(("success", "Update successful")
            }
        }
    )
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-05T13:02:24.820

**玩 2.0.4**

全局错误实际上是没有键的错误（参见[`globalErrors`](https://github.com/playframework/Play20/blob/2.0.4/framework/src/play/src/main/scala/play/api/data/Form.scala#L155)方法）。

没有帮助添加错误，但你可以自己做，像这样：

```
regionForm.fill(region)
  .copy(errors = FormError("", "Your Error Message") +: errors) 
```

**玩 2.1**

您可以使用以下[`withGlobalError`](https://github.com/playframework/Play20/blob/master/framework/src/play/src/main/scala/play/api/data/Form.scala#L253)方法：

```
regionForm.fill(region)
  .withGlobalError("Your error message"))) 
```

# php - NO QUERY using CakePHP Authentication component

> ID：14171206
> 
> 赞同：-1
> 
> 时间：2013-01-05T11:13:07.400
> 
> 标签：php, cakephp, cakephp-2.0

I'm using CakePHP 2.2.4, and I have started to work with Atuh Componenet.

This is my AppController:

```
class AppController extends Controller {
    public $components = array('Auth', 'Session');

    public function beforeFilter() {
        $this->Auth->authorize = array('Controller');
        $this->Auth->authenticate = array(
            'Form' => array (
                'scope'  => array('User.active' => 1),
                'fields' => array('username' => 'email', 'password' => 'password'),
            )
        );      
    }

    public function isAuthorized($user) {

        debug($user);

        return true;
    }
} 
```

This is my User.php model

```
class User extends AppModel {

    public $name = 'User';

    /* Relazioni */
    public $hasOne = 'Profile';

    public $belongsTo = 'Role';

    public $hasMany = array(
        'Lead' => array(
            'className' => 'Lead'
        )
    );  

} 
```

and this is my UserController.php

```
<?php

App::uses('AppController', 'Controller');

class UsersController extends AppController 
{   
    public $name = 'Users';

    public $uses = array();

    public function beforeFilter() 
    {
        parent::beforeFilter();        
    }

    public function login()
    {
        if ($this->request->is('post')) 
        {
            if ($this->Auth->login()) 
            {
                debug('Logged');
            } 
            else 
            {
                $this->Session->setFlash('Login non autorizzato', 'default', array('class' => 'errore'), 'login');
            }
        }   
    }

    public function logout()
    {
        $this->redirect($this->Auth->logout());
    }

} 
```

I have a strange problem using Auth Component, because at the end of the layout I have sql_dump element, that prints NO QUERY.

However, If i put correct values I do not login

Why does Auth component is not working ?

**EDIT:**

The data of the request is:

```
Array
(
    [User] => Array
        (
            [email] => test@test.it
            [pwd] => abc
        )

) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T14:44:57.010

Your code in AppController is wrong

```
public function beforeFilter() {
    $this->Auth->authorize = array('Controller');
    $this->Auth->authenticate = array(
        'Form' => array (
            'scope'  => array('User.active' => 1),
              // password != pwd as you post it
            'fields' => array('username' => 'email', 'password' => 'password'), 
        )
    );      
} 
```

Change it to

```
'fields' => array('username' => 'email', 'password' => 'pwd'), 
```

or make sure to post `password` instead of `pwd` in your form

Please see [https://github.com/cakephp/cakephp/blob/master/lib/Cake/Controller/Component/Auth/FormAuthenticate.php](https://github.com/cakephp/cakephp/blob/master/lib/Cake/Controller/Component/Auth/FormAuthenticate.php) for documentation on the matter

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-03T22:06:29.177

I'd like to post-fix this answer for anyone arriving here, who is unable to get logged in using Auth for which this example does not DIRECTLY Apply.

An **important** thing to remember is that Auth is expecting the underlying database columns to be "username" and "password". If for whatever reason you defer from this, for example if you want to validate on a users email (very common) and you change the table's column name to reflect this, than you **must** tell Auth about this.

The reason is because the underlying query will fail. Ultimately all that's happening behind the scene is a simply query matching the specified fields. For example (not exact - simply for demonstration purposes -- select *'s are bad):

```
SELECT * FROM users WHERE username = 'blahblahblah' AND password = 'someInsan31yh4sh3dpassw0rd' 
```

If your underlying table is missing a "username" column in loo of an "email" column, than this query will obviously fail. Resulting in the inability to login and usually with no indication that the query failed (it is even omitted from the SQL dump). The following code in your AppController however will solve you issues:

```
public $components = array(
    'Auth' => array(
        'authenticate' => array(
          'Form' => array(
             'fields' => array('username' => 'columnUsedForValidatingUsername', 'password' => 'columnUserForValidatingPassword')
          )
        )
    )
); 
```

Jippi's answer was completely correct in this case. But I feel as though as an answerER on StackOverflow you owe it to anyone finding this to explain WHY the problem is occurring and provide an unspecific answer.

Cheers

# iphone - 我怎么能欺骗 [CALayer renderInContext: ] 只渲染图层的一部分？

> ID：14171207
> 
> 赞同：13
> 
> 时间：2013-01-05T11:13:07.983
> 
> 标签：iphone, objective-c, ios, ipad, calayer

我很清楚，除了渲染整个视图和裁剪之外，没有很好的方法可以将 UIView 的一小部分渲染到图像上。（在 iPad 3 之类的设备上非常昂贵，生成的图像很大）。有关 renderInContext 方法的描述，请参见[此处](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CALayer_class/Introduction/Introduction.html)（没有其他选择）。

我要渲染的视图部分无法预先确定，这意味着我无法将小部分的视图层次结构设置为它自己的 UIView（因此是 CALayer）。

## 我的点子...

我有一个想法，但如果我要成功，我需要一些方向。如果我在 UIView（或 CALayer）上创建一个类别，该类别添加一个方法如下：

```
[UIView renderSubframe:(CGFrame)frame]; 
```

如何？好吧，我在想，如果创建了一个子框架大小的虚拟视图，那么视图可以暂时转移到这个上面。然后虚拟视图的层可以调用renderInContext:，从而获得一种高效且快速的方式来获取视图。

## 所以...

我真的没有跟上 CALayer/Quartz 核心的速度……这有机会工作吗？如果没有，还有什么方法可以达到同样的效果——我可以达到相同结果的最有效方法是什么（或者其他人已经面临这个问题并提出不同的解决方案）？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-06T12:34:49.653

这是我最终写的类别。多亏了方便的 CGAffineTransform，没有我最初想的那么难。

```
#import "UIView+RenderSubframe.h"
#import <QuartzCore/QuartzCore.h>

@implementation UIView (RenderSubframe)

- (UIImage *) renderWithBounds:(CGRect)frame {

    CGSize imageSize = frame.size;

    UIGraphicsBeginImageContextWithOptions(imageSize, NO, 0.0);
    CGContextRef c = UIGraphicsGetCurrentContext();

    CGContextConcatCTM(c, CGAffineTransformMakeTranslation(-frame.origin.x, -frame.origin.y));
    [self.layer renderInContext:c];

    UIImage *screenshot = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return screenshot;

}

@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T11:16:13.537

您可以通过几种不同的方式执行此操作：

1.  `CGContextClipToRect`在调用 renderInContext 之前为您的上下文指定 a ；

2.  采用：

> setNeedsDisplayInRect：
> 
> 将指定矩形内的区域标记为需要更新。
> 
> ```
>  - (void)setNeedsDisplayInRect:(CGRect)theRect 
> ```

这将使渲染仅在指定的矩形中发生。我不确定这是否符合您的要求。

我认为第一个选项应该无缝工作。

# java - 内存不足异常

> ID：14171210
> 
> 赞同：0
> 
> 时间：2013-01-05T11:13:20.100
> 
> 标签：java, android, exception, out-of-memory

我是安卓新手。我正在做 sd-card 的图像列表表格。以下代码给我错误“614416 字节分配上的内存不足”。

```
public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater layoutInflater = (LayoutInflater) ctx
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        convertView = layoutInflater.inflate(R.layout.ll_sponsor_list_item,
                parent, false);

        final ImageView img = (ImageView) convertView
                .findViewById(R.id.imggrid_item_image);
        String imgurl = ImageName.get(position);

        AsyncImageLoaderv asyncImageLoaderv = new AsyncImageLoaderv();
        Bitmap cachedImage = asyncImageLoaderv.loadDrawable(imgurl,
                new AsyncImageLoaderv.ImageCallback() {
                    public void imageLoaded(Bitmap imageDrawable,
                            String imageUrl) {
                        img.setImageBitmap(imageDrawable);

                    }
                });
        img.setImageBitmap(cachedImage);
        cachedImage.recycle();
        return convertView;
    } 
```

班级：

```
class AsyncImageLoaderv  {
    int width;
    int height;
    float aspectRatio;
    int newWidth;
    int newHeight;

    public Bitmap loadDrawable(final String imageUrl,
            final ImageCallback imageCallback) {
        final Handler handler = new Handler() {
            @Override
            public void handleMessage(Message message) {
                imageCallback.imageLoaded((Bitmap) message.obj, imageUrl);
            }
        };
        new Thread() {
            @Override
            public void run() {
                try {
                    Log.d("ur", imageUrl);
                    Bitmap drawable = BitmapFactory.decodeFile(imageUrl);
                    width = drawable.getWidth();
                    height = drawable.getWidth();
                    aspectRatio = (float) width / (float) height;
                    newWidth = 98;
                    newHeight = (int) (98 / aspectRatio);
                    Bitmap.createScaledBitmap(drawable, newWidth, newHeight,
                            true);
                    Message message = handler.obtainMessage(0, drawable);
                    handler.sendMessage(message);
                    //this.sleep(1000);

                } catch (Exception e) {
                    Log.e("thread stellent", e.toString());
                }
            }
        }.start();
        return null;
    }

    public interface ImageCallback {
        public void imageLoaded(Bitmap imageBitmap, String imageUrl);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T11:32:31.523

正如我在那个问题中回答的那样：

[Android - decodefile 或 decodeStream 将所选 Uri 转换为位图时出现内存不足错误](https://stackoverflow.com/questions/13973936/android-outofmemory-error-by-decodefile-or-decodestream-to-convert-the-uri-sel/13974240#13974240)

位图不能容纳重量级图片。阅读这篇文章，可以减小图像的大小。

# javascript - TypeError：document.getElementbyId 不是函数

> ID：14171212
> 
> 赞同：29
> 
> 时间：2013-01-05T11:14:12.623
> 
> 标签：javascript, html

在以下代码段中，一切都按预期工作，但是当我单击“显示源”时，Firefox 会产生此错误：

```
--
[11:07:30.630] TypeError: document.getElementbyId 不是函数@ http://localhost:8888/html5/native-rich-text.html:10

```

Safari 也会产生类似的错误。这是什么原因造成的？

```
function showSource() {
  var content = document.getElementbyId("edit").innerHTML
  content.replace(/</g, '&lt;');
  content.replace(/>/, '&gt: ');
  prompt("Your Code:", content);

}

function createLink() {
  var url = prompt("Enter URL:", "http://");
  if (url)
    document.execCommand("createlink", false, url);
}
```

```
<h1>Native Rich Text</h1>
<p>No textboxes here, that's a &lt;div&gt; element!</p>
<div>
  <input type="button" value="Bold" onclick="document.execCommand('bold', false, null);">
  <input type="button" value="Italic" onclick="document.execCommand('italic', false, null);">
  <input type="button" value="Underline" onclick="document.execCommand('underline', false, null);">
  <input type="button" value="Add Link" onclick="createLink();">
  <input type="button" value="Show Source" onclick="showSource();">
</div>
<div id="edit" style="border:solid black; height: 300px; width: 400px;" contenteditable="true">
  Hello!
</div>
```

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-01-05T11:17:41.490

区分大小写：（`document.getElementById`注意大写`B`）。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-01-05T11:17:41.213

JavaScript 区分大小写。`b`in`getElementbyId`应该大写。

```
var content = document.getElementById("edit").innerHTML; 
```

# c++ - 传递参数或在类优化中使用它

> ID：14171213
> 
> 赞同：0
> 
> 时间：2013-01-05T11:14:27.533
> 
> 标签：c++, optimization, argument-passing

我正在制作一个 gomoku 人工智能，我想知道我自己的最佳优化方法是让我的表在我的所有功能中都可用。此表采用`char map[MAPSIZE][MAPSIZE]`. 在我的算法中，我对该表进行了很多读取访问。

如果通过以下方式访问此地图是否更快：

*   我所有函数中的一个参数。
*   我的算法课的成员。
*   一个全局变量。
*   函数的参数，但作为指针。

在不久的将来，我将不得不制作该表的大量副本来实现搜索树。

谢谢你的时间，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T11:16:34.813

如果它成为一个类成员是有意义的——让它成为一个类成员。这是一个不应该出于优化考虑而做出的设计决策（至少现在还没有，如果您认为值得，您可以稍后在测量之后权衡设计以换取性能）。

另一种方法是通过引用（或指针，但引用更多是 C++-ish）传递它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T11:17:26.950

> 如果通过以下方式访问此地图是否更快：...

不同的方法确实会产生不同的运行时成本。然而，差异几乎肯定是无关紧要的，除非你做了一些非常低效的事情（例如，在每个方法中不必要地复制整个表）。

我建议您在设计时考虑到正确性和清晰性，并担心以后的优化。

# c# - Xaml.Controls.TextBox 中字符的文本换行

> ID：14171215
> 
> 赞同：2
> 
> 时间：2013-01-05T11:14:50.270
> 
> 标签：c#, xaml, windows-8, windows-store-apps

# 环境

我正在开发一个 Windows 应用商店应用程序我创建了一个带有自动换行功能的 TextBox

```
<ScrollViewer x:Name="ScrollView"  Margin="0" Grid.Row="1" Background="Black" BorderThickness="2" BorderBrush="White" KeyDown="keyDown" VerticalScrollBarVisibility="Auto" HorizontalScrollMode="Disabled" ZoomMode="Disabled" IsHorizontalRailEnabled="False" IsHorizontalScrollChainingEnabled="False">
    <Grid x:Name="Canvas" SizeChanged="setConsoleWidth">
        <TextBox x:Name="textbox" Text="TextBox" Foreground="White" FontSize="24" FontFamily="Assets/inconsolata.ttf#inconsolata" AcceptsReturn="True" BorderThickness="0" Background="{x:Null}" SelectionChanged="handleCaret" Margin="0" IsTextPredictionEnabled="False" TextWrapping="Wrap"/>
        <Rectangle x:Name="Caret" Stroke="Black" Fill="White" StrokeThickness="0" Margin="571,260,0,0" HorizontalAlignment="Left" VerticalAlignment="Top" Width="0" Height="0"/>
    </Grid>
</ScrollViewer> 
```

这个想法是您可以垂直滚动但不能在“文本框”中水平滚动。

# 问题

我希望文本框将边界外的所有字符换行。单词不必完整保存。当字符超出边界时，该字符应出现在新行上。此外，前一个字符应该留在上一行。这应该使用包括空格在内的所有字符来完成。

# 当前行为

当前的行为可以用下图来解释：

![示例行为](../Images/026c58e2f185f9dc1af5eb7d712a0020.png "示例行为") **图 1：示例行为**

当插入符号位于我们行的最后一个字符时（图 1.1），当您输入一个字符时，可能会发生两件事，具体取决于字符类型：

*   字符类型：~~非空格（包括制表符）~~所有字符

    **当前行为** 您要附加字符的单词被简单地换行。见图 1.2。

    **期望** 的行为 只有字符被换行，在图 1.2 的情况下，字符 'd' 只会在第二行。

*   ~~字符类型：空格~~

    **当前行为** 空格和索引没有换行，只是在当前行继续（见图 1.3）。插入另一个空格不会使该空格换行（参见图 1.4，插入符号在屏幕外）。下一个非空格字符被换行，但空格字符将只保留在第一行。

    **期望** 的行为 空格被换行，在图 1.2 的情况下，字符 'd' 只会在第二行。

~~**如何实现这种期望的行为（该页面由 c# 支持）？**~~

 ~~## 编辑：

通过用不间断空格（“\u00A0”）替换所有空格，我能够将字符空间行为更改为非空格行为。现在我只需要第一部分的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T14:01:05.170

用不间断空格替换空格（见上文）似乎可以解决所有问题。使用不间断空格，文本框会认为只有一个单词，因此不能“智能”换行。

## 编辑

这不适用于所有字符，例如“example1>example2”仍被视为两个单词“example1>”和“example2”。也许我可以在每个字符之间插入一个不可见的单词分隔符？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T13:47:32.137

按照您的想法，您可以在每个字符后插入一个零宽度空格。它是 unicode 符号 200B ( [http://en.wikipedia.org/wiki/Zero-width_space](http://en.wikipedia.org/wiki/Zero-width_space) )。我刚刚尝试使用 Windows 窗体，它在那里工作。~~

# python - 为什么 Thrift Binary 协议序列化这么慢？

> ID：14171227
> 
> 赞同：3
> 
> 时间：2013-01-05T11:16:11.663
> 
> 标签：python, thrift, thrift-protocol

我是节俭的新手。我用python写了一个thrift服务器，也用python写了一个客户端。

# 这是我的节俭定义：

```
struct RatingByReport {
    1: required string ticker,
    2: required i32 cnt_institution,
    3: optional list<string> strong_buy,
    4: optional list<string> buy,
    5: optional list<string> neutral,
    6: optional list<string> sell,
    7: optional list<string> strong_sell,
    8: optional i32 cnt_maintain,
    9: optional i32 cnt_upgrade,
    10: optional i32 cnt_downgrade,
    11: optional i32 avg_score,
    12: optional string adjustment
}

struct TableRatingByReport {
    1: required list<string> head,
    2: required list<RatingByReport> body,
    3: optional struct.CadaTranslation translation
}

service china{
    void ping(),
    TableRatingByReport rating_byreport(1:string ticker) throws (1:struct.CadaInternalError error)
} 
```

# 这是我的服务器端：

```
handler = StockChinaHandler()
processor = china.Processor(handler)
#startup()

transport = TSocket.TServerSocket(port=30303)
tfactory = TTransport.TBufferedTransportFactory()
pfactory = TBinaryProtocol.TBinaryProtocolFactory()

server = TServer.TSimpleServer(processor, transport, tfactory, pfactory)
#server = TProcessPoolServer.TProcessPoolServer(processor, transport,
#        tfactory, pfactory)

print "Start server..."
import cProfile
print >>open('/tmp/test.log', 'w'), cProfile.run('server.serve()',
        sort='cumulative')
#server.serve()
print "done!" 
```

# 客户端：

```
# Make socket
transport = TSocket.TSocket('localhost', 30303)

# Buffering is critical. Raw sockets are very slow
transport = TTransport.TBufferedTransport(transport)

# Wrap in a protocol
protocol = TBinaryProtocol.TBinaryProtocol(transport)

# Create a client to use the protocol encoder
client = china.Client(protocol)

# Connect!
transport.open()

client.ping()
print "ping()"

print msg
msg = client.rating_byreport('2012-01-04')
print msg
transport.close() 
```

# cProfile 结果：

```
 ncalls  tottime  percall  cumtime  percall filename:lineno(function)
        1    0.000    0.000  230.968  230.968 <string>:1(<module>)
        1    0.000    0.000  230.968  230.968 TServer.py:74(serve)
        3    0.000    0.000  225.967   75.322 TSocket.py:172(accept)
        3    0.000    0.000  225.967   75.322 socket.py:194(accept)
        3  225.967   75.322  225.967   75.322 {method 'accept' of '_socket.socket' objects}
        5    0.003    0.001    4.993    0.999 china.py:140(process)
        1    0.000    0.000    3.200    3.200 china.py:177(process_rating_byreport)
        1    0.000    0.000    2.366    2.366 china.py:500(write)
        1    0.003    0.003    2.366    2.366 ttypes.py:515(write)
     1455    0.261    0.000    2.363    0.002 ttypes.py:364(write)
   155556    0.246    0.000    1.995    0.000 TCompactProtocol.py:38(nested)
   145880    0.298    0.000    1.640    0.000 TCompactProtocol.py:255(__writeString)
       18    1.370    0.076    1.370    0.076 {method 'recv' of '_socket.socket' objects}
        5    0.000    0.000    1.292    0.258 TCompactProtocol.py:306(readMessageBegin)
       13    0.000    0.000    1.292    0.099 TCompactProtocol.py:286(__readUByte)
       26    0.000    0.000    1.291    0.050 TTransport.py:54(readAll)
       26    0.000    0.000    1.291    0.050 TTransport.py:154(read)
        5    0.000    0.000    1.291    0.258 TSocket.py:101(read) 
```

在我的例子中，TableRatingByReport 实例有一个包含 1400 行（list\）的主体，生成二进制内容的成本超过 3 秒（函数 *process_rating_byreport*，由 thift 自动生成）。我不知道为什么这么慢。

使用 json 序列化相同的数据，只需不到 200 毫秒。

我想知道我是否使用不正确的方式来操纵节俭？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T08:09:24.157

如果速度很重要，请使用 TBinaryProtocolAccelerated。它是用 C 实现的，比 TBinaryProtocol 的 Python 实现快大约 10 倍。

此外，在您的基准测试中，将原始 JSON 解析与完整的 Thrift 解析进行比较，这不是一个公平的比较。尝试从解析的 JSON 中创建所有 Thrift 对象，以查看开销是否来自解析或实例化这么多 PyObject。

无论如何，如果您关心解析性能并且 JSON 足以满足您的应用程序（即您不使用二进制数据，您不想要一个好的 RPC 接口等），那么您应该使用它。

# eclipse - 在黑莓 10 sdk 中添加 QtCore 库

> ID：14171229
> 
> 赞同：2
> 
> 时间：2013-01-05T11:16:32.570
> 
> 标签：eclipse, qt, blackberry-10

大家好，我正在使用 cocos2d-x 和黑莓创建一个简单的游戏。我需要一些地方来存储我的游戏设置，类似于 ios 和 android 中的共享首选项。我找到了一些使用 qsettings 的代码，但问题是我无法添加 QtCore 库。

我使用 RightClick->configure->add Library 和 Standard BlackBerry Platform Library 添加库。该库已成功添加。

```
#include "dataProcessor.h"
#include <QtCore>

void dataProcessor::setup(){
    QDir dir;
    dir.mkpath("data/files/text");
    dir.cd("data/files/text");
} 
```

但是当我编译上面的代码时，我得到了错误`C:/Users/I076636/Documents/target_10_0_9_1673/qnx6/usr/include/qt4/QtCore/qatomic.h:45:28: fatal error: QtCore/qglobal.h: No such file or directory`

但我注意到两件事，1.qglobal.h 文件在我包含的 QtCore 目录中。2.inside qatomic.h 如果我改变

```
#ifndef QATOMIC_H
#define QATOMIC_H

#include <QtCore/qglobal.h>
#include <QtCore/qbasicatomic.h> 
```

进入

```
#ifndef QATOMIC_H
#define QATOMIC_H

#include <qglobal.h>
#include <QtCore/qbasicatomic.h> 
```

qglobal 的错误发生了，现在 qbasicatomic.h 也出现了同样的错误。

我认为这很简单，比如 QtCore 关键字和包含目录或其他东西之间的映射不正确。

请看一看。

IDE是在eclipse上制作的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T07:16:58.460

如果您仔细查看错误消息，您可以了解出了什么问题：

```
/target_10_0_9_1673/qnx6/usr/include/qt4/QtCore/qatomic.h:45:28:
fatal error: QtCore/qglobal.h: No such file or directory 
```

错误不在您的包含中`QtCore`，而是`QtCore/qatomic.h`在第 45 行的 中发生（您可以在 中找到此文件`[YOUR BBNDK DIRECTORY]/target_10_0_9_1673/qnx6/usr/include/qt4/QtCore/qatomic.h`）：

```
#include <QtCore/qglobal.h> 
```

`qatomic.h`已经在`QtCore`目录中，您也会在`qglobal.h`那里找到一个目录。所以这意味着 qatomic.h 期望*父目录*位于包含路径上，因此包含`<QtCore/qglobal.h>`将起作用。

所以你只需要添加`[YOUR BBNDK DIRECTORY]/target_10_0_9_1673/qnx6/usr/include/qt4`到你的包含目录。

像这样做：

1.  在 Project Explorer 中右键单击您的项目并选择`Properties`
2.  将树展开到`C/C++ General`/`Paths and Symbols`
3.  将路径和符号框架中的配置更改为`[All configurations]`
4.  单击`Includes`标签并`GNU C`在语言列表中进行选择（或对每种语言执行此操作）。
5.  单击`Add...`并键入`${QNX_TARGET}/usr/include/qt4`并按下`OK`
6.  单击`Add...`并键入`${QNX_TARGET}/usr/include/qt4/QtCore`并按下`OK`

现在你的 #include <QtCore> 应该可以工作了。

下一步：链接错误；-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T18:51:07.387

听起来您的 BB10 NDK 没有正确安装，或者您的项目没有正确设置。如果您扩展您的项目和包含您应该看到的（以及其他）：

```
<NDK_INSTALL_LOCATION>/target_<VERSION>/qnx6/usr/include/qt4/QtCore 
```

# c - 生产者和消费者代码不出现在屏幕上

> ID：14171230
> 
> 赞同：2
> 
> 时间：2013-01-05T11:16:33.323
> 
> 标签：c, mutex, semaphore

我有以下代码，但生产者和消费者代码没有出现。它只是打印“退出程序”。就像消费者和生产者功能永远不会执行一样。我不明白为什么会这样。谁能解释为什么？代码如下：

```
/* buffer.h */
typedef int buffer_item;
#define BUFFER_SIZE 18

/* main.c */

#include <stdlib.h>
#include <stdio.h>
#include <pthread.h>
#include <semaphore.h>
/* #include "buffer.h" */

#define RAND_DIVISOR 100000000
#define TRUE 1

/* The mutex lock */
pthread_mutex_t mutex;

/* the semaphores */
sem_t full, empty;

/* the buffer */
buffer_item buffer[BUFFER_SIZE];

/* buffer counter */
int counter;

pthread_t tid;       //Thread ID
pthread_attr_t attr; //Set of thread attributes

void *producer(void *param); /* the producer thread */
void *consumer(void *param); /* the consumer thread */

void initializeData()
{

    /* Create the mutex lock */
    pthread_mutex_init(&mutex, NULL);

    /* Create the full semaphore and initialize to 0 */
    sem_init(&full, 0, 0);

    /* Create the empty semaphore and initialize to BUFFER_SIZE */
    sem_init(&empty, 0, BUFFER_SIZE);

    /* Get the default attributes */
    pthread_attr_init(&attr);

    /* init buffer */
    counter = 0;
}

/* Producer Thread */
void *producer(void *param)
{
    buffer_item item;

    while(TRUE)
    {
        /* sleep for a random period of time */
        int rNum = rand() / RAND_DIVISOR;
        sleep(rNum);

        /* generate a random number */
        item = rand();

        /* acquire the empty lock */
        sem_wait(&empty);
        /* acquire the mutex lock */
        pthread_mutex_lock(&mutex);

        if (insert_item(item))
            fprintf(stderr, " Producer report error condition\n");
        else
            printf("producer produced %d\n", item);

        /* release the mutex lock */
        pthread_mutex_unlock(&mutex);
        /* signal full */
        sem_post(&full);
    }
}

/* Consumer Thread */
void *consumer(void *param)
{
    buffer_item item;

    while(TRUE) {
        /* sleep for a random period of time */
        int rNum = rand() / RAND_DIVISOR;
        sleep(rNum);

        /* aquire the full lock */
        sem_wait(&full);
        /* aquire the mutex lock */
        pthread_mutex_lock(&mutex);
        if (remove_item(&item)) {
           fprintf(stderr, "Consumer report error condition\n");
        } else {
            printf("consumer consumed %d\n", item);
        }
        /* release the mutex lock */
        pthread_mutex_unlock(&mutex);
        /* signal empty */
        sem_post(&empty);
    }
}

/* Add an item to the buffer */
int insert_item(buffer_item item)
{
    /* When the buffer is not full add the item
      and increment the counter*/
    if (counter < BUFFER_SIZE) {
        buffer[counter] = item;
        counter++;
        return 0;
    } else { /* Error the buffer is full */
        return -1;
    }
}

/* Remove an item from the buffer */
int remove_item(buffer_item *item)
{
    /* When the buffer is not empty remove the item
      and decrement the counter */
    if (counter > 0) {
        *item = buffer[(counter-1)];
        counter--;
        return 0;
    } else { /* Error buffer empty */
        return -1;
    }
}

int main(int argc, char *argv[])
{
    /* Loop counter */
    int i;

     /* Verify the correct number of arguments were passed in */
    if(argc != 4) {
        fprintf(stderr, "USAGE:./main.out <INT> <INT> <INT>\n");
    }

    int mainSleepTime = atoi(argv[1]); /* Time in seconds for main to sleep */
    int numProd = atoi(argv[2]); /* Number of producer threads */
    int numCons = atoi(argv[3]); /* Number of consumer threads */

    /* Initialize the app */
    initializeData();

    /* Create the producer threads */
    for(i = 0; i < numProd; i++) {
        /* Create the thread */
        pthread_create(&tid,&attr,producer,NULL);
    }

    /* Create the consumer threads */
    for(i = 0; i < numCons; i++) {
        /* Create the thread */
        pthread_create(&tid,&attr,consumer,NULL);
    }

    /* Sleep for the specified amount of time in milliseconds */
    sleep(mainSleepTime);

    /* Exit the program */
    printf("Exit the program\n");
    exit(0);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T11:48:41.927

首先，您需要为您的线程应用不同的 tid。

`pthread_t tid1, tid2;`

然后使用这些 tid 的：

`pthread_create(&tid1, &attr, producer, NULL);`

`pthread_create(&tid2, &attr, consumer, NULL);`

最后，跳过睡眠并加入线程。

`pthread_join(tid1, NULL);`

`pthread_join(tid2, NULL);`

我已经对其进行了测试，并且可以在我的系统上运行。以下是完整的工作代码。

```
#include <stdlib.h>
#include <stdio.h>
#include <pthread.h>
#include <semaphore.h>
#include "buffer.h"

#define RAND_DIVISOR 100000000
#define TRUE 1

/* The mutex lock */
pthread_mutex_t mutex;

/* the semaphores */
sem_t full, empty;

/* the buffer */
buffer_item buffer[BUFFER_SIZE];

/* buffer counter */
int counter;

pthread_t tid1, tid2;       //Thread ID
pthread_attr_t attr; //Set of thread attributes

void *producer(void *param); /* the producer thread */
void *consumer(void *param); /* the consumer thread */

void initializeData() {

   /* Create the mutex lock */
   pthread_mutex_init(&mutex, NULL);

   /* Create the full semaphore and initialize to 0 */
   sem_init(&full, 0, 0);

   /* Create the empty semaphore and initialize to BUFFER_SIZE */
   sem_init(&empty, 0, BUFFER_SIZE);

   /* Get the default attributes */
   pthread_attr_init(&attr);

   /* init buffer */
   counter = 0;
}

/* Producer Thread */
void *producer(void *param) {
   buffer_item item;

   while(TRUE) {
      /* sleep for a random period of time */
      int rNum = rand() / RAND_DIVISOR;
      sleep(rNum);

      /* generate a random number */
      item = rand();

      /* acquire the empty lock */
      sem_wait(&empty);
      /* acquire the mutex lock */
      pthread_mutex_lock(&mutex);

      if(insert_item(item)) {
         fprintf(stderr, " Producer report error condition\n");
      }
      else {
         printf("producer produced %d\n", item);
      }
      /* release the mutex lock */
      pthread_mutex_unlock(&mutex);
      /* signal full */
      sem_post(&full);
   }
}

/* Consumer Thread */
void *consumer(void *param) {
   buffer_item item;

   while(TRUE) {
      /* sleep for a random period of time */
      int rNum = rand() / RAND_DIVISOR;
      sleep(rNum);

      /* aquire the full lock */
      sem_wait(&full);
      /* aquire the mutex lock */
      pthread_mutex_lock(&mutex);
      if(remove_item(&item)) {
         fprintf(stderr, "Consumer report error condition\n");
      }
      else {
         printf("consumer consumed %d\n", item);
      }
      /* release the mutex lock */
      pthread_mutex_unlock(&mutex);
      /* signal empty */
      sem_post(&empty);
   }
}

/* Add an item to the buffer */
int insert_item(buffer_item item) {
   /* When the buffer is not full add the item
      and increment the counter*/
   if(counter < BUFFER_SIZE) {
      buffer[counter] = item;
      counter++;
      return 0;
   }
   else { /* Error the buffer is full */
      return -1;
   }
}

/* Remove an item from the buffer */
int remove_item(buffer_item *item) {
   /* When the buffer is not empty remove the item
      and decrement the counter */
   if(counter > 0) {
      *item = buffer[(counter-1)];
      counter--;
      return 0;
   }
   else { /* Error buffer empty */
      return -1;
   }
}

int main(int argc, char *argv[]) {
   /* Loop counter */
   int i;

   /* Verify the correct number of arguments were passed in */
   if(argc != 4) {
      fprintf(stderr, "USAGE:./main.out <INT> <INT> <INT>\n");
   }

   int mainSleepTime = atoi(argv[1]); /* Time in seconds for main to sleep */
   int numProd = atoi(argv[2]); /* Number of producer threads */
   int numCons = atoi(argv[3]); /* Number of consumer threads */

   /* Initialize the app */
   initializeData();

   /* Create the producer threads */
   for(i = 0; i < numProd; i++) {
      /* Create the thread */
      pthread_create(&tid1,&attr,producer,NULL);
    }

   /* Create the consumer threads */
   for(i = 0; i < numCons; i++) {
      /* Create the thread */
      pthread_create(&tid2,&attr,consumer,NULL);
   }

   /* Sleep for the specified amount of time in milliseconds */
   //sleep(mainSleepTime);

   pthread_join(tid1, NULL);
   pthread_join(tid2, NULL);

   /* Exit the program */
   printf("Exit the program\n");
   exit(0);
} 
```

# css - 在 jquery mobile 中定义大小（字体大小、边距、填充、..）的最佳方法

> ID：14171232
> 
> 赞同：1
> 
> 时间：2013-01-05T11:16:35.390
> 
> 标签：css, jquery-mobile

我正在开发一个 jquery 移动网站，它在视网膜显示器上也应该看起来不错。

现在，我想知道哪种单位或方式是最好的，用于定义填充、边距、字体大小等大小/距离？

如果我使用像素，我不会在不同的屏幕分辨率下看起来很好。常用的方法是什么？

# c# - 自定义对象之间的销售队伍中的父子关系？

> ID：14171234
> 
> 赞同：1
> 
> 时间：2013-01-05T11:17:16.020
> 
> 标签：c#, asp.net

通过 .Net (C#)使用`Salesforece`API 我尝试在自定义对象之间实现父子关系。

无论哪个将成为细节对象，都会创建一个指向另一个对象的主细节字段。这将实现关系。我想同时创建父自定义对象和子自定义对象？有没有办法通过外键在自定义对象之间创建父子关系？

当给定对象对其父对象的引用时，`Salesforce`会给出错误状态：

> 实体中的外部外键引用中提供了超过 1 个字段：ChidObj__c

# c# - 母版页数据未显示在 asp.net 的其他页面中

> ID：14171235
> 
> 赞同：1
> 
> 时间：2013-01-05T11:17:16.223
> 
> 标签：c#, asp.net, .net, header

我是asp.net 的新手，我目前处于master.pages 的基础。

我正在测试如何将图像标题放到我的母版页中。

这是我的master.master：

```
<%@ Master Language="C#" AutoEventWireup="true" CodeFile="master.master.cs" Inherits="master" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <asp:ContentPlaceHolder id="head" runat="server">

    </asp:ContentPlaceHolder>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:ContentPlaceHolder id="ContentPlaceHolder1" runat="server">
            <asp:Image ID="headerImage" runat="server" ImageUrl="~/images/cross-header.gif" />
        </asp:ContentPlaceHolder>
    </div>
    </form>
</body>
</html> 
```

这是 Default.aspx：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/master.master" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="_Default" %>

<asp:Content ID="Content1" ContentPlaceHolderID="head" Runat="Server">

</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" Runat="Server">
</asp:Content> 
```

当我运行它时，我放入 master.master 的 imageHeader 没有出现。

你们的任何帮助将不胜感激。

感谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T11:21:00.743

如果您尝试在所有页面中查看图像，请从 MasterPage 中的 ContentPlaceHolder 中移出图像

```
 <asp:ContentPlaceHolder id="ContentPlaceHolder1" runat="server">
        <asp:Image ID="headerImage" runat="server" ImageUrl="~/images/cross-header.gif" />
    </asp:ContentPlaceHolder> 
```

到 ：

```
 <asp:Image ID="headerImage" runat="server" ImageUrl="~/images/cross-header.gif" />
    <asp:ContentPlaceHolder id="ContentPlaceHolder1" runat="server">
    </asp:ContentPlaceHolder> 
```

# c# - 停止我的线程

> ID：14171240
> 
> 赞同：0
> 
> 时间：2013-01-05T11:17:50.260
> 
> 标签：c#, multithreading

我有一个线程，我试图停止。我所做的是以下。

```
randomImages = new Thread(new ThreadStart(this.chooseRandomImage));
            randomImages.Start(); 
```

这是线程调用的方法

```
bool threadAlive = true;
public void chooseRandomImage()
    {
        while(threadAlive)
        {
           try
            {
                //do stuff

            }

            catch (Exception exe)
            {
                MessageBox.Show(exe.Message, "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
            }

        }
    } 
```

现在，单击停止线程按钮后，我只需将 threadAlive 设置为 false。问题是线程不会立即停止，就好像它已经聚集了一种动力。如何立即停止线程，并可能再次重新启动它？

```
 private void butStopThread_Click(object sender, EventArgs e)
    {

        threadAlive = false;

        if(threadAlive == false)
        {
           //do stuff
        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T11:36:40.987

对不起，这是最好的方法。向上使用 .NET 4.0，您应该使用任务，而不是线程，然后有一个叫做 CancellationToken 的东西与您的变量几乎相同。

然后，取消后，等待处理完成。如果这需要快速发生，那么 - 好吧 - 使取消检查更加细化，即更频繁地检查。

[如http://www.interact-sw.co.uk/iangblog/2004/11/12/cancellation](http://www.interact-sw.co.uk/iangblog/2004/11/12/cancellation)中所述，中止线程可能具有显着的副作用- 这就是通常不应使用该方法的原因。

不，停止的线程等不能神奇地重新启动 - 你必须将它放入你的逻辑中（重新启动点，保存点，长时间运行的事务，记住它在哪里完成）。

作为旁注 - 如果您坚持不使用任务并且可以访问 .NET 的最新版本，那么如果您使用互锁访问类方法，则不需要 Volatile，这之前是一些根据定义是线程安全的汇编程序指令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T11:21:20.937

> 可以通过调用 Abort 从另一个线程终止一个线程，但这会强制终止受影响的线程，而不用担心它是否已完成其任务并且没有提供清理资源的机会。此示例中显示的技术是首选。

您需要使用[Abort 方法，](http://msdn.microsoft.com/en-us/library/system.threading.thread.abort%28v=vs.80%29.aspx) **但不推荐使用**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T11:41:43.817

根据您提供的信息，工作线程和 UI 线程似乎都在访问*threadAlive*变量。[尝试使用volatile](http://msdn.microsoft.com/en-us/library/x13ttww7%28v=vs.80%29.aspx)关键字声明 threadAlive ，以确保在没有同步问题的情况下进行跨线程访问。

```
volatile bool threadAlive; 
```

要重新启动线程，您首先需要确保它执行所有必要的清理。在主/UI 线程中对您的线程对象使用[Join](http://msdn.microsoft.com/en-us/library/system.threading.thread.join.aspx)方法调用，以确保您的线程安全终止。要重新启动，只需在线程上调用 Start 方法。

```
randomImages.Join(); 
```

# java - 如何在 Spring Security 3.1 中通过 FilterChainProxy 使用并发控制

> ID：14171241
> 
> 赞同：0
> 
> 时间：2013-01-05T11:18:07.467
> 
> 标签：java, spring, spring-security

嗨，我正在尝试使用 spring security3.1 实现并发控制，但它不起作用。我正在使用 FilterChainProxy，所以我不知道如何在其中使用并发控制。我尝试过的代码低于我所缺少的，请帮助我出去？

豆文件

```
 <?xml version="1.0" encoding="UTF-8"?>

    <beans xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:security="http://www.springframework.org/schema/security"
        xsi:schemaLocation="
            http://www.springframework.org/schema/beans 
            http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
            http://www.springframework.org/schema/security 
            http://www.springframework.org/schema/security/spring-security-3.1.xsd
        ">

        <!--    Custom code by rajesh -->
        <!-- =================================================================== -->

        <!-- Create sessionRegistry Implementation Bean -->
        <bean id="sessionRegistry"  class="org.springframework.security.core.session.SessionRegistryImpl" />

        <bean name="concurrencyFilter" class="org.springframework.security.web.session.ConcurrentSessionFilter">
          <property name="sessionRegistry" ref="sessionRegistry"/>
          <property name="expiredUrl" value="/modules/my/login.do"/>
        </bean>

        <bean id="sas" class="com.xxxx.xxx.security.filter.MyConcurrentSessionControlStrategy">
            <constructor-arg name="sessionRegistry" ref="sessionRegistry" />
            <property name="securityImpl" ref="SecurityImpl"/>
        </bean>
        <!-- =================================================================== -->
        <!--     Custom code ended by rajesh -->

        <!-- Create ISecurity Implementation Bean -->
        <bean id="SecurityImpl" class="com.xxxx.xxx.security.impl.SecurityImpl">
            <property name="dao">
                <bean class="com.xxxx.xxx.security.impl.SecurityDAO">
                    <property name="sessionFactory" ref="mySessionFactory" />
                </bean>
            </property>
            <property name="sessionRegistry"  ref="sessionRegistry" />
            <property name="persistentRememberMeTokenRepositoryImpl" >
                <bean
                    class="com.xxxx.xxx.impl.core.security.persisted.tokens.PersistentRememberMeTokenRepositoryImpl">
                    <property name="dao">
                        <bean
                            class="com.xxxx.xxx.impl.core.security.persisted.tokens.PersistentRememberMeTokenDAO">
                            <property name="sessionFactory" ref="mySessionFactory" />
                        </bean>
                    </property>
                </bean>
            </property>
        </bean>

     <bean id="ISecurityImpl"
            class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean">
            <property name="transactionManager" ref="myTransactionManager" />
            <property name="target" ref="SecurityImpl" />
            <property name="proxyTargetClass" value="false" />
            <property name="transactionAttributes">
                <props>
                    <prop key="set*">PROPAGATION_REQUIRED</prop>
                    <prop key="checkPasswordExpiry">PROPAGATION_REQUIRED</prop>
                    <prop key="expireSessionBySessionId">PROPAGATION_REQUIRED</prop>
                </props>
            </property>
        </bean>

        <bean id="myFilterSecurityInterceptor" class="org.springframework.security.web.FilterChainProxy">
            <security:filter-chain-map request-matcher="ant" >
                <security:filter-chain pattern="/**" 
                    filters="securityContextPersistenceFilter,concurrencyFilter, logoutFilter, usernamePasswordAuthenticationFilter, rememberMeAuthenticationFilter, passwordExpiryFilter , anonymousAuthenticationFilter, accountExpiryFilter, exceptionTranslationFilter, filterSecurityInterceptor" />
            </security:filter-chain-map>
        </bean>
        <bean id="securityContextPersistenceFilter"
            class="org.springframework.security.web.context.SecurityContextPersistenceFilter" />

        <bean id="logoutFilter"
            class="org.springframework.security.web.authentication.logout.LogoutFilter">
            <!-- the post-logout destination -->
            <constructor-arg value="/modules/my/login.do" />
            <constructor-arg>
                <array>
                    <ref bean="myRememberMeService"/>
                    <bean class="org.springframework.security.web.authentication.logout.SecurityContextLogoutHandler" />
                </array>
            </constructor-arg>
            <property name="filterProcessesUrl" value="/logout_my" />
        </bean>

        <bean id="usernamePasswordAuthenticationFilter"
            class="org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter">
            <property name="sessionAuthenticationStrategy" ref="sas" />
            <property name="authenticationManager" ref="myAuthenticationManager" />
            <property name="rememberMeServices" ref="myRememberMeService" />
            <property name="filterProcessesUrl" value="/my_authentication_service"></property>
            <property name="usernameParameter" value="loginid" />
            <property name="passwordParameter" value="password" />
            <property name="authenticationFailureHandler" ref="AuthenticationFailureHandler" />
            <property name="authenticationSuccessHandler" ref="AuthenticationSuccessHandler" />
        </bean>
        <bean id="accountExpiryFilter" class="com.xxxx.xxx.security.filter.MyAccountExpiryFilter">
            <property name="securityImpl" ref="SecurityImpl"/>
            <property name="authenticationFailureHandler" ref="AuthenticationFailureHandler" />
            <property name="authenticationSuccessHandler" ref="AuthenticationSuccessHandler" />
        </bean>
        <bean id="passwordExpiryFilter"
            class="com.xxxx.xxx.security.filter.MyPasswordExpiryFilter">
            <property name="securityImpl" ref="SecurityImpl"/>
            <property name="authenticationFailureHandler" ref="AuthenticationFailureHandler" />
            <property name="authenticationSuccessHandler" ref="AuthenticationSuccessHandler" />
        </bean>

        <bean id="AuthenticationFailureHandlerImpl"
            class="com.xxxx.xxx.security.impl.AuthenticationFailureHandlerImpl">
            <property name="dao">
                <bean class="com.xxxx.xxx.security.impl.SecurityDAO">
                    <property name="sessionFactory" ref="mySessionFactory" />
                </bean>
            </property>
            <property name="defaultFailureUrl" value="/modules/my/login.do?error=1" />
        </bean>

        <bean id="AuthenticationFailureHandler"
            class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean">
            <property name="transactionManager" ref="myTransactionManager" />
            <property name="target" ref="AuthenticationFailureHandlerImpl" />
            <property name="proxyTargetClass" value="true" />
            <property name="transactionAttributes">
                <props>
                    <prop key="onAuthenticationFailure">PROPAGATION_REQUIRED</prop>
                </props>
            </property>
        </bean>

        <bean id="AuthenticationSuccessHandlerImpl"
            class="com.xxxx.xxx.security.impl.AuthenticationSuccessHandler">
            <property name="dao">
                <bean class="com.xxxx.xxx.security.impl.SecurityDAO">
                    <property name="sessionFactory" ref="mySessionFactory" />
                </bean>
            </property>
            <property name="targetUrlParameter" value="redirect-to"></property>
        </bean>

        <bean id="AuthenticationSuccessHandler"
            class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean">
            <property name="transactionManager" ref="myTransactionManager" />
            <property name="target" ref="AuthenticationSuccessHandlerImpl" />
            <property name="proxyTargetClass" value="true" />
            <property name="transactionAttributes">
                <props>
                    <prop key="onAuthenticationSuccess">PROPAGATION_REQUIRED</prop>
                </props>
            </property>
        </bean>

        <bean id="rememberMeAuthenticationFilter"
            class="com.xxxx.xxx.security.filter.MyRememberMeAuthenticationFilter">
            <property name="rememberMeServices" ref="myRememberMeService" />
            <property name="authenticationManager" ref="myAuthenticationManager" />
            <property name="securityImpl" ref="SecurityImpl"/>
        </bean>

        <bean id="anonymousAuthenticationFilter"
            class="org.springframework.security.web.authentication.AnonymousAuthenticationFilter">
            <property name="userAttribute" value="anonymousUser,ROLE_ANONYMOUS" />
            <property name="key" value="XXXXXXXX" />
        </bean>
        <bean id="exceptionTranslationFilter"
            class="org.springframework.security.web.access.ExceptionTranslationFilter">
            <property name="authenticationEntryPoint">
                <bean
                    class="org.springframework.security.web.authentication.LoginUrlAuthenticationEntryPoint">
                    <property name="loginFormUrl" value="/modules/my/login.do" />
                </bean>
            </property>
            <property name="accessDeniedHandler" ref="AccessDeniedHandler" />
        </bean>

        <bean id="AccessDeniedHandlerImpl" class="com.xxxx.xxx.security.impl.AccessDeniedHandlerImpl">
            <property name="dao">
                <bean class="com.xxxx.xxx.security.impl.SecurityDAO">
                    <property name="sessionFactory" ref="mySessionFactory" />
                </bean>
            </property>
            <property name="errorPage" value="/modules/errors/accessDenied.do" />
        </bean>

        <bean id="AccessDeniedHandler"
            class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean">
            <property name="transactionManager" ref="myTransactionManager" />
            <property name="target" ref="AccessDeniedHandlerImpl" />
            <property name="proxyTargetClass" value="true" />
            <property name="transactionAttributes">
                <props>
                    <prop key="handle">PROPAGATION_REQUIRED</prop>
                </props>
            </property>
        </bean>

        <bean id="filterSecurityInterceptor" class="org.springframework.security.web.access.intercept.FilterSecurityInterceptor">
            <property name="authenticationManager" ref="myAuthenticationManager" />
            <property name="accessDecisionManager" ref="myAffirmativeBasedAccessDecisionManager" />
            <property name="securityMetadataSource">
                <security:filter-security-metadata-source
                    use-expressions="true" lowercase-comparisons="true">
                    <!-- Core Actions -->
                    <security:intercept-url pattern="/modules/my/login.do"
                        access="permitAll" />
                    <security:intercept-url pattern="/modules/my/credentialExpired.do"
                        access="hasRole('ROLE_ANONYMOUS')" />
                    <security:intercept-url pattern="/modules/my/*"
                        access="hasRole('ROLE_ADMIN')" />
                </security:filter-security-metadata-source>
            </property>
        </bean>

        <bean class="org.springframework.security.access.vote.AffirmativeBased"
            id="myAffirmativeBasedAccessDecisionManager">
            <property name="decisionVoters">
                <list>
                    <bean id="webExpressionVoter"
                        class="org.springframework.security.web.access.expression.WebExpressionVoter">
                        <property name="expressionHandler" ref="MyWebSecurityExpressionHandler" />
                    </bean>
                    <bean class="org.springframework.security.access.vote.RoleVoter" />
                    <bean class="org.springframework.security.access.vote.AuthenticatedVoter" />
                </list>
            </property>
        </bean>

        <bean id="MyWebSecurityExpressionHandler"
            class="com.xxxx.xxx.security.spring.web.MyWebSecurityExpressionHandler">
            <property name="iSecurity" ref="SecurityImpl" />
            <property name="roleHierarchy">
                <bean
                    class="org.springframework.security.access.hierarchicalroles.RoleHierarchyImpl">
                    <property name="hierarchy">
                        <value>
                            ROLE_MY > ROLE_ADMIN
                            ROLE_ADMIN > ROLE_USER
                            ROLE_USER > ROLE_PORTAL_USER
                            ROLE_PORTAL_USER > ROLE_GUEST
                            ROLE_GUEST > ROLE_ANONYMOUS
                        </value>
                    </property>
                </bean>
            </property>
        </bean>

        <bean id="myAuthenticationManager"
            class="org.springframework.security.authentication.ProviderManager">
            <property name="authenticationEventPublisher" ref="myAuthEventPublisher" />
            <property name="providers">
                <list>
                    <bean
                        class="org.springframework.security.authentication.dao.DaoAuthenticationProvider">
                        <property name="userDetailsService" ref="myUserDetailsService" />
                        <property name="passwordEncoder">
                            <bean id="myPasswordEncoder"
                                class="com.xxxx.xxx.security.spring.MyPasswordEncoder">
                                <property name="passwordEncryptor" ref="myPasswordEncryptor"></property>
                            </bean>
                        </property>
                    </bean>
                    <bean
                        class="org.springframework.security.authentication.AnonymousAuthenticationProvider ">
                        <property name="key" value="xxxxxxxxxxxxxx" />
                    </bean>
                    <bean
                        class="org.springframework.security.authentication.RememberMeAuthenticationProvider">
                        <property name="key" value="MY_SECURE_REMME_MY_APP" />
                    </bean>
                </list>
            </property>
        </bean>

        <bean id="myUserDetailsService" class="com.xxxx.xxx.impl.core.users.UserImpl">
            <property name="dao" ref="userDao" />
            <property name="passwordEncryptor" ref="myPasswordEncryptor" />
        </bean>

        <!-- like for example at new user sign-up. -->

        <bean id="myRememberMeService"
            class="com.xxxx.xxx.security.impl.DefaultMyRememberMeServices">
            <property name="tokenRepository">
                <bean
                    class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean">
                    <property name="transactionManager" ref="myTransactionManager" />
                    <property name="target">
                        <bean
                            class="com.xxxx.xxx.impl.core.security.persisted.tokens.PersistentRememberMeTokenRepositoryImpl">
                            <property name="dao">
                                <bean
                                    class="com.xxxx.xxx.impl.core.security.persisted.tokens.PersistentRememberMeTokenDAO">
                                    <property name="sessionFactory" ref="mySessionFactory" />
                                </bean>
                            </property>
                        </bean>
                    </property>
                    <property name="proxyTargetClass" value="false" />
                    <property name="transactionAttributes">
                        <props>
                            <prop key="*">PROPAGATION_REQUIRED</prop>
                        </props>
                    </property>
                </bean>
            </property>
            <property name="userDetailsService" ref="myUserDetailsService" />
            <property name="key" value="MY_SECURE_REMME_MY_APP" />
            <property name="alwaysRemember" value="false" />
            <property name="useSecureCookie" value="true" />
            <property name="cookieName" value="MY_SECURE_REMME" />
            <property name="parameter" value="MY_REMME" />
            <property name="dao">
                <bean class="com.xxxx.xxx.security.impl.SecurityDAO">
                    <property name="sessionFactory" ref="mySessionFactory" />
                </bean>
            </property>
        </bean>

        <bean id="myPasswordEncryptor" class="com.xxxx.xxx.security.spring.MyPasswordEncryptor" />

        <bean id="myAuthEventPublisher"
            class="org.springframework.security.authentication.DefaultAuthenticationEventPublisher" />
        <bean id="authenticationListener"
            class="org.springframework.security.authentication.event.LoggerListener" />
        <bean id="authorizationListener"
            class="org.springframework.security.access.event.LoggerListener" />

        <bean id="DatabaseConfigImpl" class="com.xxxx.xxx.impl.core.database.config.DatabaseConfigImpl"></bean>
        <bean id="IDatabaseConfig" class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean">
            <property name="target" ref="DatabaseConfigImpl" />
            <property name="proxyTargetClass" value="false"/>
            <property name="transactionAttributes">
                <props>
                    <prop key="add*">PROPAGATION_REQUIRED</prop>
                    <prop key="update*">PROPAGATION_REQUIRED</prop>
                    <prop key="delete*">PROPAGATION_REQUIRED</prop>
                </props>
            </property>
        </bean>
    </beans> 
```

在这个 MyConcurrentSessionControlStrategy 类中，使用自定义实现扩展了 ConcurrentSessionControlStrategy 类。我也在使用自定义过滤器。我还在 web.xml 中添加了 HttpSessionEventPublisher

我的应用程序正在运行。我不知道如何应用并发控制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T14:51:09.423

由于您没有显示 的​​配置`usernamePasswordAuthenticationFilter`，我的第一个猜测是您忘记通过将 注入`ConcurrentSessionControlStrategy`该 bean 来添加必要的钩子。在添加您自己的自定义版本的类之前，您应该证明您可以让它与标准类一起使用。[参考手册](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#concurrent-sessions)中有一个示例配置。从那里开始，确保它有效，然后尝试添加您的`MyConcurrentSessionControlStrategy`. 如果没有看到该类的代码，很容易出现错误。

此外，如果您试图描述一个问题，您应该详细解释什么是“不起作用”，即使只是在您认为应该启用时该功能似乎没有启用。调试日志也是有用的信息来源。

# vba - 使用 VBA 在 MS Word 中定位新图像，如以前的图像

> ID：14171244
> 
> 赞同：0
> 
> 时间：2013-01-05T11:18:26.237
> 
> 标签：vba, ms-word, ms-office

我正在尝试使用以下方法替换 MS Word 标题中的图像：

```
For Each tmp In ActiveDocument.Sections(1).Headers(wdHeaderFooterPrimary).Shapes
    If tmp.Type = msoPicture Then
        Set dShape = tmp
    End If
Next
Dim w, h, t, l As Single
Dim lic As Long
Dim rhp As WdRelativeHorizontalPosition
Dim rvp As WdRelativeVerticalPosition

dShape.RelativeVerticalPosition = wdRelativeVerticalPositionMargin
dShape.RelativeHorizontalPosition = wdRelativeHorizontalPositionMargin

With dShape
    w = .Width
    h = .Height
    t = .Top
    l = .Left
    lic = .LayoutInCell
End With

Dim shp As Shape
Set shp = ActiveDocument.Sections(1).Headers(wdHeaderFooterPrimary).Shapes.AddPicture("C:\aa.jpg", False, True, l, t, w, h)
shp.RelativeVerticalPosition = rvp
shp.RelativeHorizontalPosition = rhp
shp.LayoutInCell = lic

dShape.Select
dShape.Delete 
```

但是新图像不会放在以前的图像位置！
问题是什么？如何将新图像准确地放置在以前的图像位置上？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T13:38:18.387

要遵循的一些步骤：

**当您尝试添加新图像时，您的旧图像仍在原位......所以删除旧图像**......；）

*   在删除之前保存旧图像的位置、大小和其他属性（`inline with text`, `square`..etc）
*   删除旧图像
*   插入新图像`top, left, width, height`以及与旧图像的值匹配的其他属性

代码更改：

```
Dim shp As Shape

'--other codes including the ones that saves properties
dShape.Delete '--hey you don't need to select to delete :)

Set shp = ActiveDocument.Sections(1).Headers(wdHeaderFooterPrimary)_ 
         .Shapes.AddPicture("C:\aa.jpg", False, True, l, t, w, h)
shp.RelativeVerticalPosition = rvp
shp.RelativeHorizontalPosition = rhp
shp.LayoutInCell = lic 
```

# cxf - jax-rs，主动 mq 集成

> ID：14171249
> 
> 赞同：0
> 
> 时间：2013-01-05T11:19:11.247
> 
> 标签：cxf, activemq, cxfrs

谁能给我一个示例源代码，我可以在其中使用 restful jax-rs Web 服务作为使用活动 mq 的消息代理的接口。要求是流量通过 jax-rs webservice 进入应用程序，消息被传输到异步处理的活动 mq，活动 mq 上的消费者将数据插入数据库。谁能提供示例代码，那太好了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T22:24:08.437

这个问题非常模糊。在执行此类接口时需要考虑多个问题，因为 jax-rs 是一个 http 接口（同步、非事务性、非持久性、不保证交付），而 activemq (jms) 是相反的方式，异步、事务性和执着的。

我建议你看看[Apache Camel](http://camel.apache.org)，它是一个轻量级的集成框架，与 ActiveMQ 配合得非常好。它也支持[JAX-RS](http://camel.apache.org/cxfrs)。Camel 网站上有多个代码示例，如果您的案例已完全设计，则将 rest 与 activemq 连接起来相当容易。

# paypal - Adaptive Payments Paypal：返回没有数据的 url？

> ID：14171251
> 
> 赞同：1
> 
> 时间：2013-01-05T11:19:14.020
> 
> 标签：paypal, return-value, paypal-adaptive-payments

我正在测试 PayPal 的自适应付款，但我不明白当用户在成功付款后重定向时如何从 PayPal 获得一些有效的数据信息。

PayPal 不向此 URL 返回数据？我被迫使用IPN？它被称为“ReturnUrl”的事实本身就是一个可靠的信息？我必须通过GET发送数据吗？

唯一的选择是使用带有 notify_url 的标准按钮和带有 PND 的重定向参数？

我很混乱... ：（

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T04:46:54.747

1.  当用户返回 returnUrl 端点时，您调用 PaymentDetails API 并检查状态并继续。
2.  要处理用户可能已付款但未返回您的站点的极端情况，请等待 IPN 消息以继续您的订单发货等，
3.  如果用户取消付款，他们将被带到 cancelUrl 端点，您可以相应地处理流程
4.  如果出现错误（如超出限制、不支持货币等），支付操作实际上会引发错误，您将能够将其作为错误/异常捕获流程的一部分进行处理。

API调用时请使用以下参数

returnUrl 在 paypal.com 上批准付款后，发件人的浏览器重定向到的 URL

cancelUrl 如果发件人取消对 paypal.com 付款的批准，则将发件人的浏览器重定向到的 URL。

ipnNotificationUrl 此付款的所有 IPN 消息发送到的 URL

建议下载 SDK 并查看作为其中一部分捆绑的示例。

[https://www.x.com/developers/paypal/documentation-tools/paypal-sdk-index](https://www.x.com/developers/paypal/documentation-tools/paypal-sdk-index)

# sql - 信用卡密码的最佳 sql 类型

> ID：14171253
> 
> 赞同：1
> 
> 时间：2013-01-05T11:19:36.883
> 
> 标签：sql, passwords, sqldatatypes

我正在做一个与人们的钱交互的信用卡项目，所以我需要存储一个密码。此密码不应包含任何字符，只能包含数字 [0-9]，并且始终应为 4 位数字。

我不知道该密码使用什么 sql 数据类型。

以下是我想到的一些情况：
**A.**如果我选择`int`，我应该检查密码在 1000 到 9999 之间
**B.**如果我选择`Char(4)`，那么我应该检查密码是否只有数字（而不是字符）
**C.**如果我选择Decimal(4,0) 那么我确定它低于 10000 但我仍然需要检查它是否大于 999

**你对这样的密码有什么建议**，****为什么**？**

 *** * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T11:34:05.627

您应该将密码存储为 Char(4)。如果您选择“int”，您将遇到一些诸如“0042”之类的密码问题，因为它会在没有零的情况下存储。如果您选择 Char(4)，您可以通过此方法 Char.IsNumber(ch) 验证 pin 码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T11:54:34.020

Normally, I would say that you shouldn't store the password at all, but a [hash](http://en.wikipedia.org/wiki/Cryptographic_hash_function#Password_verification) of it. However, with only 10,000 possible passwords, there's not really much point — no amount of [key stretching](http://en.wikipedia.org/wiki/Key_stretching) is going to stop an attacker from brute forcing a four-digit password if your database is compromised.

However, what you *could* do, at least, is to encrypt the password (combined with a random [salt](http://en.wikipedia.org/wiki/Salt_%28cryptography%29), so that two identical passwords don't map to the same ciphertext) with a key stored in some secure manner. Ideally, you should store the key in a [hardware security module](http://en.wikipedia.org/wiki/Hardware_security_module) from which it cannot be extracted, and have the HSM take care of encrypting and verifying the passwords.

(The HSM should not allow decrypting a password, either; the only allowed queries should be "encrypt this password with a random salt" and "check if this password matches this encrypted string". If possible, the module should also feature some built-in rate limiting, so that even if an attacker manages to take over the server connected to the HSM, they still at least have to spend some time to crack all the passwords. Ideally, them module should also report the rate at which it is being queried, and the fraction of successful queries, to another, physically separate monitoring server.)

Anyway, if you're dealing with credit card data, it's likely that there are other fields in your database that also should be stored securely. Generally, there are quite detailed industry regulations and/or laws governing all this stuff — have you already checked which of them apply to you and what they say?**

# vim - 为什么 Vim 会在文件末尾添加新行？

> ID：14171254
> 
> 赞同：47
> 
> 时间：2013-01-05T11:19:50.857
> 
> 标签：vim, diff, newline

我经常使用 Wordpress，有时我会临时更改 Wordpress 核心文件以了解发生了什么，尤其是在调试时。今天我得到了一个小惊喜。当我准备好将我的更改提交到我的 git 存储库时，我注意到`git status`将其中一个 Wordpress 文件标记为未暂存以进行提交。我记得在关闭它之前我已经恢复了我对该文件所做的所有更改，所以我决定使用它`diff`来查看发生了什么变化。我将项目中的文件与我保存在下载目录中的 Wordpress 副本中的文件进行了比较。事实证明，文件最后不同。`diff`表示原始文件末尾缺少换行符：

```
1724c1724
< }
\ No newline at end of file
---
> } 
```

我什至从来没有碰过那条线。我在大文件中间某处所做的更改。这让我认为 vim 在文件末尾添加了一个换行符。为什么会这样？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2015-07-15T09:28:08.643

我在这里看到的所有答案都解决了“*如何防止 Vim 在文件末尾添加换行符？* ”的问题，而问题是“*为什么 Vim 会在文件末尾添加新行？* ”。我的浏览器的搜索引擎把我带到了这里，但我没有找到那个问题的答案。

它与 POSIX 标准如何定义行有关（请参阅[为什么文件应以换行符结尾？](https://stackoverflow.com/questions/729692/why-should-files-end-with-a-newline)）。所以，基本上，一行是：

> **3.206线**
> 
> 零个或多个非 <newline> 字符加上终止 <newline> 字符的序列。

因此，它们都需要以换行符结尾。这就是为什么 Vim 默认总是添加一个换行符（因为根据 POSIX，它应该一直存在）。

它不是唯一这样做的编辑。[Gedit ，](https://wiki.gnome.org/Apps/Gedit) [GNOME](https://www.gnome.org/)中的默认文本编辑器，做同样的事情。

* * *

## 编辑

许多其他工具也需要换行符。参见例如：

*   [多么`wc`期待。](https://stackoverflow.com/a/7741505/3577054)
*   [GCC 对此发出警告](https://stackoverflow.com/a/729725/3577054)。

此外，您可能对以下内容感兴趣：[Vim 在文件末尾显示换行符](https://stackoverflow.com/questions/15639511/vim-show-newline-at-the-end-of-file)。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-01-05T11:26:48.143

Because `vim` is a *text* editor, it can sometimes "clean up" files for you. See [http://vimhelp.appspot.com/vim_faq.txt.html#faq-5.4](http://vimhelp.appspot.com/vim_faq.txt.html#faq-5.4) for details on how to write without the ending newline, paraphrased below:

> **How do I write a file without the line feed (EOL) at the end of the file?**
> 
> You can turn off the `eol` option and turn on the `binary` option to write a file without the EOL at the end of the file:
>    `:set binary`
>    `:set noeol`
>    `:w`
> 
> Alternatively, you can use:
>    `:set noeol`
>    `:w ++bin`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-05T11:25:27.060

Adding a newline is the default behavior for Vim. If you don't need it, then use this solution: [VIM Disable Automatic Newline At End Of File](https://stackoverflow.com/questions/1050640/vim-disable-automatic-newline-at-end-of-file)

To disable, add this to your .vimrc

```
set fileformats+=dos 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-05T11:25:43.903

You can put the following line into your .vimrc

```
autocmd FileType php setlocal noeol binary 
```

Which should do the trick, but actually your approach is somewhat wrong. First of all `php` won't mind that ending at all and secondly if you don't want to save your changes don't press `u` or worse manually try to recreate the state of the file, but just quit without saving `q!`. If you left the editor and saved for some reason, try `git checkout <file>`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-19T18:40:43.413

> 3.206 行 零个或多个非字符加上一个终止字符的序列。

有趣的是，vim 将允许您打开一个新文件，写入该文件，该文件将是零字节。如果您打开一个新文件并使用`o`然后写入该文件附加一行，它将是两个字符长。如果您打开所述文件备份并删除第二行`dd`并写入文件，它将是一个字节长。打开文件备份并删除剩下的唯一行并写入文件，它将是零字节。所以 vim 只会让你写一个零字节的文件，只要它是完全空的。似乎违反了上面的 posix 定义。我猜...

# android - LibGDX 无法加载特定图像

> ID：14171255
> 
> 赞同：7
> 
> 时间：2013-01-05T11:19:51.853
> 
> 标签：android, file-io, libgdx, filenotfoundexception, pixmap

我过去已经成功加载了所有图像，并且我使用的是 OpenGL ES 2.0，因此图像不需要是 2 的幂（我有几个成功加载但不是）。

有问题的代码是这样的：

```
Line 96: splashSheet = new Texture(Gdx.files.internal("test.png")); 
```

这是我的错误信息：

```
 Exception in thread "LWJGL Application" com.badlogic.gdx.utils.GdxRuntimeException: com.badlogic.gdx.utils.GdxRuntimeException: Couldn't load file: test.png
    at com.badlogic.gdx.backends.lwjgl.LwjglApplication$1.run(LwjglApplication.java:111)
Caused by: com.badlogic.gdx.utils.GdxRuntimeException: Couldn't load file: test.png
    at com.badlogic.gdx.graphics.Pixmap.<init>(Pixmap.java:140)
    at com.badlogic.gdx.graphics.glutils.FileTextureData.prepare(FileTextureData.java:64)
    at com.badlogic.gdx.graphics.Texture.load(Texture.java:175)
    at com.badlogic.gdx.graphics.Texture.create(Texture.java:159)
    at com.badlogic.gdx.graphics.Texture.<init>(Texture.java:133)
    at com.badlogic.gdx.graphics.Texture.<init>(Texture.java:122)
    at com.panini.game.GameScreen.show(GameScreen.java:96)
    at com.badlogic.gdx.Game.setScreen(Game.java:59)
    at com.panini.game.Splash.render(Splash.java:29)
    at com.badlogic.gdx.Game.render(Game.java:46)
    at com.badlogic.gdx.backends.lwjgl.LwjglApplication.mainLoop(LwjglApplication.java:190)
    at com.badlogic.gdx.backends.lwjgl.LwjglApplication$1.run(LwjglApplication.java:108)
Caused by: java.io.IOException: couldn't load pixmap
    at com.badlogic.gdx.graphics.g2d.Gdx2DPixmap.<init>(Gdx2DPixmap.java:57)
    at com.badlogic.gdx.graphics.Pixmap.<init>(Pixmap.java:138)
    ... 11 more 
```

这就是使这成为一个有趣的问题的原因。我可以加载[这个](http://s13.postimage.org/nforqw8s7/test.png)文件，但我不能加载[这个](http://s13.postimage.org/hq8j6l2lz/splash_Sprites.png)。前者基本上只是我要使用的截图的裁剪截图。我提供的第二张图片（不起作用）是原图。它被称为 splashSprites.png 但我尝试将其重命名为 test.png 并正确引用它但它仍然不起作用，所以我知道这绝对不是命名问题或任何东西。如果我将这两个文件分别放在名为 test1.png 和 test2.png 的资产或 bin 目录中，那么如果我要求加载 test1.png，则代码有效，但如果我要求加载 test2.png，则代码无效，所以这不是我m 也将文件放在错误的位置。这两个似乎是最有可能的候选人，但我已经排除了他们。

我尝试了其他方法，例如重新导出第一张图像等，但它从未奏效（起作用的是截屏，这就是我在这里的原因）。我的猜测是它可能与其中一张图像中的 alpha 有关（因为这确实是与两者不同的唯一东西 - 一个有 alpha 而另一个没有）但这不太可能，因为我能够加载其他一些确实有 alpha 的纹理。我真的很难过。

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-05T21:52:41.840

我找到了答案。显然 LibGDX 不支持 16 位 png（对吗？），因为在 OS X 上使用 Preview 将我的 spritesheet 转换为 8 位深度后，我发现问题消失了。

感谢 PT 提供升级 LibGDX 的建议，因为这就是我收到以下错误消息的方式：

```
Caused by: java.io.IOException: couldn't load pixmap 8bit only 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-05T19:42:31.960

在图像上运行[pngcrush](http://pmt.sourceforge.net/pngcrush/)以将其转换为更常见的 PNG 格式。

这个截图是用 libGDX 论坛的截图代码生成的吗？我也使用了它，但生成的 PNG 非常大，我相信我在加载/编辑它们时也遇到了一些问题。无论如何`pngcrush`为我解决了这个问题。

pngcheck工具可能能够隔离您拥有的两个图像之间的不同之处[。](http://www.libpng.org/pub/png/apps/pngcheck.html)

查看 libGDX 源代码，我看到最近（11 天前）对 libGDX 图像加载器的更改：[https](https://github.com/libgdx/libgdx/commit/4fac29aef94e3afafdd47d71e60faf256fa171b0) ://github.com/libgdx/libgdx/commit/4fac29aef94e3afafdd47d71e60faf256fa171b0 （看起来 IOException 应该包含更多关于真正出错了），所以您可以尝试针对 libGDX nightlies 运行？

# gcc - 如何在 MinGW 中将错误消息控制设置为详细？

> ID：14171256
> 
> 赞同：0
> 
> 时间：2013-01-05T11:19:53.057
> 
> 标签：gcc, compiler-errors, mingw

我从 gcc 手册[http://gcc.gnu.org/onlinedocs/gnat_ugn_unw/Output-and-Error-Message-Control.html](http://gcc.gnu.org/onlinedocs/gnat_ugn_unw/Output-and-Error-Message-Control.html)读到的是命令行开关是`-gnatv`.

但是在 MinGW 中使用这个开关会给出：`cc1plus.exe: error: unrecognised debug output level "natv"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:05:20.620

您可以使用 ...

**`-Wall`**：一些用户认为有问题的结构的所有警告，并且很容易避免）

*激活警告：*

```
 -Waddress   
  -Warray-bounds (only with -O2)  
  -Wc++11-compat  
  -Wchar-subscripts  
  -Wenum-compare (in C/ObjC; this is on by default in C++) 
  -Wimplicit-int (C and Objective-C only) 
  -Wimplicit-function-declaration (C and Objective-C only) 
  -Wcomment  
  -Wformat   
  -Wmain (only for C/ObjC and unless -ffreestanding)  
  -Wmaybe-uninitialized 
  -Wmissing-braces (only for C/ObjC) 
  -Wnonnull  
  -Wparentheses  
  -Wpointer-sign  
  -Wreorder   
  -Wreturn-type  
  -Wsequence-point  
  -Wsign-compare (only in C++)  
  -Wstrict-aliasing  
  -Wstrict-overflow=1  
  -Wswitch  
  -Wtrigraphs  
  -Wuninitialized  
  -Wunknown-pragmas  
  -Wunused-function  
  -Wunused-label     
  -Wunused-value     
  -Wunused-variable  
  -Wvolatile-register-var 
```

**`-Wextra`**：这会启用一些额外的警告标志，这些标志未启用`-Wall`

```
 -Wclobbered  
  -Wempty-body  
  -Wignored-qualifiers 
  -Wmissing-field-initializers  
  -Wmissing-parameter-type (C only)  
  -Wold-style-declaration (C only)  
  -Woverride-init  
  -Wsign-compare  
  -Wtype-limits  
  -Wuninitialized  
  -Wunused-parameter (only with -Wunused or -Wall) 
  -Wunused-but-set-parameter (only with -Wunused or -Wall)  
  *(and some more)* 
```

有关更多信息，请参阅**[GCC 警告选项](http://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html)**。

# matlab - Matlab 代码在三维数组上运行太慢

> ID：14171258
> 
> 赞同：1
> 
> 时间：2013-01-05T11:20:00.043
> 
> 标签：matlab, vector, for-loop, vectorization

我正在尝试对以下代码进行矢量化：

```
% code before 
% code before 
% a lot of code before we got to the current comment 
% 
% houghMatrix holds some values 
for i=1:n
    for j=1:m
        for k = 1:maximalRadius            
            % get the maximal threshold 
            if houghMatrix(i,j,k) > getMaximalThreshold(k)                           
                lhs = [j i k];

                % verify that the new circle is not listed 
                isCircleExist = verifyCircleExists(circles,lhs,circleCounter);

                % not listed - then we put it in the circles vector 
                if isCircleExist == 0
                    circles(circleCounter,:) = [j i k];                    
                    fprintf('Circle % d: % d, % d, % d \n', circleCounter, j, i, k);
                    circleCounter = circleCounter + 1;                    
                end
            end
        end
    end
end 
```

使用 tic tac 我得到以下输出：

```
>> x = findCircles(ii);
Circle  1:  38,  38,  35 
Circle  2:  89,  51,  34 
Circle  3:  72,  66,  11 
Circle  4:  33,  75,  30 
Circle  5:  90,  81,  31 
Circle  6:  54,  96,  26 

    Elapsed time is 3.111176 seconds.
>> x = findCircles(ii);
Circle  1:  38,  38,  35 
Circle  2:  89,  51,  34 
Circle  3:  72,  66,  11 
Circle  4:  33,  75,  30 
Circle  5:  90,  81,  31 
Circle  6:  54,  96,  26 

    Elapsed time is 3.105642 seconds.
>> x = findCircles(ii);
Circle  1:  38,  38,  35 
Circle  2:  89,  51,  34 
Circle  3:  72,  66,  11 
Circle  4:  33,  75,  30 
Circle  5:  90,  81,  31 
Circle  6:  54,  96,  26 

    Elapsed time is 3.135818 seconds. 
```

意义——平均3.1秒。

我试图对代码进行矢量化，但问题是我需要使用`i,j,k`内部`for`（第 3 个`for`）主体中的索引。

任何有关如何矢量化代码的建议将不胜感激

谢谢

**编辑 ：**

```
% -- function [circleExists] = verifyCircleExists(circles,lhs,total) --
%
%
function [circleExists] = verifyCircleExists(circles,lhs,total)

    MINIMUM_ALLOWED_THRESHOLD = 2;

    circleExists = 0;
    for index = 1:total-1                
        rhs = circles(index,:);
        absExpr = abs(lhs - rhs);
        maxValue = max( absExpr );
        if  maxValue <= MINIMUM_ALLOWED_THRESHOLD + 1
            circleExists = 1;
            break
        end
    end

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T21:36:47.633

这是我认为您想要做的：对于每个有效的坐标三元组，您要检查附近是否已经存在三元组，否则，将其添加到列表中。如果没有“链接”的可能性，即如果每个可能的候选体素集群只能容纳一个中心，则该操作可以完全矢量化。在这种情况下，您只需使用：

```
%# create a vector of thresholds
maximalThreshold = getMaximalThreshold(1:maximalRadius);

%# make it 1-by-1-by-3
maximalThreshold = reshape(maximalThreshold,1,1,[]);

%# create a binary array the size of houghMatrix with 1's 
%# wherever we have a candidate circle center
validClusters = bsxfun(@gt, houghMatrix, maximalThreshold);

%# get the centroids of all valid clusters
stats = regionprops(validClusters,'Centroid');

%# collect centroids, round to get integer pixel values
circles = round(cat(1,stats.Centroid)); 
```

或者，如果您想遵循选择有效圆圈的方案，您可以从`validClusters`以下获取 ijk 索引：

```
[potentialCircles(:,1),potentialCircles(:,2), potentialCircles(:,3)]= ...  
       sub2ind(size(houghMatrix),find(validClusters));

nPotentialCircles = size(potentialCircles,1);

for iTest = 2:nPotentialCircles
    absDiff = abs(bsxfun(@minus,potentialCircles(1:iTest-1,:),potentialCircles(iTest,:)));

    if any(absDiff(:) <= MINIMUM_ALLOWED_THRESHOLD + 1)
       %# mask the potential circle
       potentialCircles(iTest,:) = NaN;
    end
end

circles = potentialCircles(isfinite(potentialCircles(:,1)),:); 
```

# mysql - 硬编码的数据库选择。ID vs 名称 vs 其他东西？

> ID：14171260
> 
> 赞同：1
> 
> 时间：2013-01-05T11:20:44.763
> 
> 标签：mysql, database, language-agnostic, web

我目前正在重构一个项目，到目前为止，很多数据在代码中保存为常量和数组。还有很多裁员。现在我想将所有这些数据移动到数据库中，但我不确定我将如何进行映射。很少根据用户输入动态选择数据，而是在代码中专门选择数据。它在应用程序的非常核心级别使用，但它实际上不是核心。此外，已经使用了一个数据库，因此不会有真正的额外工作。

我的想法是使用一个 Mapping 类，其中有指向相应行 ID 的常量。这是一个好主意吗？

另一个想法是索引名称行并直接查询名称。

数据库可能有以下列：id、name、polynom 和 params。所以，基本上我们在谈论数学数据。例如：1、“价格近似”、20x^3 - 5x^2 + 11x”、“非累计”。

我认为这个问题与语言无关，但由于可能存在特定于语言（甚至特定于框架）的最佳实践，因此我使用的是：PHP5 with the Yii Framework。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T11:32:21.710

我对 PHP 和 Yii 没有太多经验，但这是我的 2 美分...

如果这些是从技术上定义您的应用程序的常量和常量集合（应用程序架构常量），但最终用户不应控制，我会将它们放在配置文件而不是您的数据库中，除非您已经构建了一个模块以轻松访问和修改它们。是否实现映射类（或配置类）来检索它们并不重要，但在检索它们的方式上保持一致。如果您在配置文件中有太多需要管理的内容，则将它们存储在数据库中是合适的，但请确保您提供了一种简单的方法来修改它们。为了使您的源代码可读，我将使用人类可以理解的描述符并将这些描述符映射到您提到的相应行。

如果这些是用户定义的常量，那么您绝对应该提供一个接口。但保持与应用程序架构常量相同的架构。

在一个完美的程序/应用程序（甚至更好的应用程序框架）中，没有什么是硬编码的，一切都由常量（开关）控制。如果您能够在无需维护源代码的情况下成功实现这一目标，您将获得诺贝尔和平奖。

# sql - plpgsql 中的语法错误

> ID：14171265
> 
> 赞同：1
> 
> 时间：2013-01-05T11:21:18.207
> 
> 标签：sql, postgresql, plpgsql, exists, postgresql-8.4

我在 PostgreSQL 中有一个存储过程

```
CREATE OR REPLACE FUNCTION show_senti_lang_setting(IN _senti_id bigint)
RETURNS TABLE(lang_code character, native_name character varying, is_active boolean) AS
$BODY$
BEGIN
RETURN QUERY 
    SELECT
        l.lang_code,
        l.native_name,
        (CASE WHEN s.senti_id is NULL THEN FALSE
            ELSE TRUE
        END) is_active
    FROM
        language l
    LEFT JOIN senti_lang s
    ON s.lang_code=l.lang_code
    AND s.senti_id=_senti_id;
END;
$BODY$
LANGUAGE plpgsql VOLATILE STRICT; 
```

错误是：

```
ERROR:  syntax error at or near "$1"
LINE 1: ...HEN s.senti_id is NULL THEN FALSE ELSE TRUE END)  $1  FROM l...
                                                         ^
QUERY:   SELECT l.lang_code, l.native_name, (CASE WHEN s.senti_id is NULL THEN FALSE ELSE TRUE END)  $1  FROM language l LEFT JOIN senti_lang s ON s.lang_code=l.lang_code AND s.senti_id= $2 
CONTEXT:  SQL statement in PL/PgSQL function "show_senti_lang_setting" near line 13

********** Error **********

ERROR: syntax error at or near "$1"
SQL state: 42601
Context: SQL statement in PL/PgSQL function "show_senti_lang_setting" near line 13 
```

似乎错误是由于`CASE`plpgsql 引起的。相同的函数在 SQL 中运行良好：

```
CREATE OR REPLACE FUNCTION show_senti_lang_setting(bigint)
    RETURNS TABLE(lang_code character, native_name character varying, is_active boolean) AS
$BODY$

    SELECT
        l.lang_code,
        l.native_name,
        CASE WHEN s.senti_id is NULL THEN FALSE
            ELSE TRUE
        END is_active
    FROM
        language l
    LEFT JOIN senti_lang s
    ON s.lang_code=l.lang_code
    AND s.senti_id=$1;

$BODY$
  LANGUAGE sql VOLATILE STRICT; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-05T14:58:01.723

### 至于你有什么：

8.4 版在返回的行 ( )`OUT`中存在与列别名同名的参数的问题。`is_active`这已经被修改了，它适用于 PostgreSQL 9.1 或更高版本（甚至可能是 9.0）。这就是您的语法错误的原因。

列别名只是这个星座中的噪音。它们被丢弃以支持声明的`OUT`参数。他们唯一的目的可能是文档，所以只需将其作为注释并避免冲突：

```
 CASE WHEN s.senti_id is NULL THEN FALSE ELSE TRUE END -- AS is_active 
```

还：

*   您应该将关键字`AS`与列别名一起使用（而对于表别名，通常可以跳过它）。
*   `CASE`语句周围不需要括号。

### 更好的形式

按照您的方式，您始终返回表中的所有行`language`- 以及找到匹配项的一个或多个实例`senti_lang`。同时您定义了您的函数`STRICT`，因此当您为`_senti_id`. 很难想象一个合理的用例。

如果在`senti_lang`. 所以你可以简化为：

```
CREATE OR REPLACE FUNCTION show_senti_lang_setting(IN _senti_id bigint)
RETURNS TABLE(lang_code character, native_name varchar, is_active boolean) AS
$func$
BEGIN
RETURN QUERY 
   SELECT l.lang_code
         ,l.native_name
         ,EXISTS (SELECT 1 FROM senti_lang s
                  WHERE  s.lang_code = l.lang_code
                  AND    s.senti_id = _senti_id) -- AS is_active
   FROM   language l;
END
$func$ LANGUAGE plpgsql VOLATILE STRICT; 
```

我会提出是否需要这样的问题`STRICT`。

### 的意思`Select 1`

在下面的评论中回复后续问题。我引用[手册`EXISTS`](http://www.postgresql.org/docs/current/interactive/functions-subquery.html#FUNCTIONS-SUBQUERY-EXISTS)：

> 由于结果仅取决于是否返回任何行，而不取决于这些行的内容，因此子查询的输出列表通常不重要。一个常见的编码约定是以 EXISTS(SELECT 1 WHERE ...) 的形式编写所有 EXISTS 测试。

基本上，您可以编写任何语法上有效的表达式。无论如何它都会被丢弃。
我们一直在[这个相关问题](https://stackoverflow.com/questions/7710153/what-is-easier-to-read-in-exists-subqueries)下讨论可读性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T13:48:33.923

这似乎是参数和`case`.

如果您在选择查询中重命名别名，它应该可以工作

```
SELECT
    l.lang_code,
    l.native_name,
    (CASE WHEN s.senti_id is NULL THEN FALSE
        ELSE TRUE
    END) as active_flag  -- <### this is the change 
FROM
    language l
LEFT JOIN senti_lang s
ON s.lang_code=l.lang_code
AND s.senti_id=_senti_id; 
```

SQLFiddle 示例：[http ://sqlfiddle.com/#!11/49075/1](http://sqlfiddle.com/#!11/49075/1)

case 表达式的值由位置映射到“输出”参数。所以他们可以有不同的名字（显然必须）。

# iphone - SQLite-如何在 ios 中插入数据

> ID：14171267
> 
> 赞同：0
> 
> 时间：2013-01-05T11:21:47.697
> 
> 标签：iphone, xcode, sqlite

当我用这段代码插入记录时，我尝试了一些 sqlite 程序进行练习，它给出了一些错误

```
-(void) insertRecordIntoTableNamed:(NSString *) tableName
                            withField1:(NSString *) field1
                           field1Value:(NSString *) field1Value
                             andField2:(NSString *) field2
                           field2Value:(NSString *) field2Value {
        NSString *sql = [NSString stringWithFormat:
                         @"INSERT INTO ‘%@‘ (‘%@‘, ‘%@‘) VALUES (‘%@‘,’%@‘)",tableName, field1, field2, field1Value, field2Value];
        char *err;
        if (sqlite3_exec(db, [sql UTF8String], NULL, NULL, &err) != SQLITE_OK) {
            sqlite3_close(db);
            NSAssert(0, @"Error updating table.");
        }
    } 
```

错误信息是

```
** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Error updating table.' 
```

我尝试通过终端插入数据并正确检索数据

所以请帮助我通过程序插入数据

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T17:39:41.943

当您使用 char * as sql 语句作为 NSString 对象时，它可能会更好地工作。例如：

char *sql = "插入'?' ('?', '?') 值 ('?' ....";

更换？与您的 NSString 参数一起使用下面的函数。

sqlite3_bind_text(insert_statement, 1, [tableName UTF8String], -1, SQLITE_TRANSIENT); sqlite3_bind_text(insert_statement, 2, [field1 UTF8String], -1, SQLITE_TRANSIENT); ETC....

首先，您必须定义 insert_statement。静态 sqlite3_stmt *insert_statement = nil; ...最后你应该用 sqlite3_reset(insert_statement); 重置语句

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T11:28:46.727

左单引号不适合在 SQLite 中引用标识符或值。用 " (\x22) 引用标识符，用 ' (\x27) 引用数据。

另外，我希望您的程序足够简单，以至于潜在的 SQL 注入无关紧要。

# java - 在 Android/Java 中删除 \b

> ID：14171268
> 
> 赞同：0
> 
> 时间：2013-01-05T11:21:51.230
> 
> 标签：java, android, regex

我正在通过 JSON 解析数据，其中我得到一个特殊字符（偶尔）`\b`，该字符是从数据库中获取并作为 JSON 响应发送的。获取的数据显示在中，`ListView`但数据显示为`DemoData[]`（类似这样）。

我对`\b`角色的问题很少，

1.  `DemoData[]`&`DemoData`一样吗？**编辑 1:-**不是
2.  如何删除特殊字符？**编辑 1：-**此问题已解决。

由于特殊字符偶尔会出现，请指导我寻求更具体的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T11:44:50.170

您可以将所有“\b”字符替换为“”

```
YourJsonString.replaceAll("\b", ""); 
```

希望它会帮助你。

# php - PHP Autoload ignorecase

> ID：14171273
> 
> 赞同：4
> 
> 时间：2013-01-05T11:22:33.513
> 
> 标签：php

Is there any way to call require_once with some "case insensitive flag" ? In windows it's okay, but linux is case sensitive. Is there any way to override ? Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T11:25:26.263

Sure, load

```
strtolower($className . ".php") 
```

and name your files in lowercase.

* * *

Regardless of how you try to load your files, only the lowercase version will ever be loaded.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T11:47:43.177

您可以在每次加载时使用它来自动加载适当的类。您必须更改目录取决于您的项目。您可以使用 echo 或 print_r 打印每次调用某些内容时加载的类。您所有的类名也必须具有相同的格式，例如，className.class.php，例如 Dashboard.class.php、Category.class.php。您可以使用 ucwords 将首字母大写。

```
function __autoload($className) 
{
    if (file_exists(__DIR__ . '/../library/' . strtolower($className) . '.class.php')) 
    {
        require_once(__DIR__ . '/../library/' . strtolower($className) . '.class.php');
    }
    else if (file_exists(__DIR__ . '/../application/controllers/' . strtolower($className) . '.php')) 
    {
        require_once(__DIR__ . '/../application/controllers/' . strtolower($className) . '.php');
    }
    else if (file_exists(__DIR__ . '/../application/models/' . strtolower($className) . '.php')) 
    {
        require_once(__DIR__ . '/../application/models/' . strtolower($className) . '.php');
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T12:28:04.217

只需在 header.php 或其他一些常见文件中的其他位置包含一些内容。，

```
<?php
$filename = basename($_SERVER['SCRIPT_FILENAME']);
$request = basename($_SERVER['SCRIPT_NAME']);

if($filename != $request)
  die('Case of filename and request do not match!');
?> 
```

我认为这可以帮助您解决问题。另请参阅以下位置[https://superuser.com/questions/431342/linux-both-case-sensitive-and-case-insensitive-and-always-inconvenient](https://superuser.com/questions/431342/linux-both-case-sensitive-and-case-insensitive-and-always-inconvenient)

# php - do i have to install aptana studio plugin for eclipse PDT?

> ID：14171280
> 
> 赞同：-5
> 
> 时间：2013-01-05T11:23:01.650
> 
> 标签：php, eclipse, codeigniter, aptana, eclipse-pdt

currently i am working on a code igniter and using eclipse PDT for it .. as i google it and some says that add aptana plugin with eclipse is best. so i just want 2 ask you should i have to install aptana plugin for eclipse PDT .what difference should it make. or what should i do more to make eclipse even better for php or code igniter.? and one more thing if let say i installed the plugin ,is the syntax coloring also get change.? as i like the syntax coloring of aptana studio rather then eclipse?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-05T11:29:05.927

“有人说用 eclipse 添加 aptana 插件是最好的”

![XKCD：真正的程序员](../Images/7bc083a2a3cdd72bfbbc7bbdbe432a6a.png)

底线：使用您觉得最舒服的编辑器

# javascript - Can not close Firefox browser using JavaScript

> ID：14171281
> 
> 赞同：-3
> 
> 时间：2013-01-05T11:23:05.997
> 
> 标签：javascript

I have the following JavaScript code:

```
 <text>Welcome <strong>@User.Identity.Name</strong>! </text>  
   <a href="javascript:window.opener='x';window.close();">[ Close ] </a> 
```

but it will not be able to force firefox browser to close it will only work for IE.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T11:56:23.777

[根据 MDN](https://developer.mozilla.org/en-US/docs/DOM/window.close)：

> 仅允许为使用 window.open 方法的脚本打开的窗口调用此方法。如果窗口不是由脚本打开的，JavaScript 控制台中会出现以下错误：

```
Scripts may not close windows that were not opened by script. 
```

基本上，如果您没有通过 打开窗口`window.open()`，您将无法以编程方式关闭窗口。

# java - Spring集成文件-在写入文件之前通过入站通道适配器读取文件

> ID：14171283
> 
> 赞同：2
> 
> 时间：2013-01-05T11:23:09.020
> 
> 标签：java, spring, spring-integration

我正在测试[SI 样本](https://github.com/SpringSource/spring-integration-samples/tree/master/basic/file)，我遇到了以下问题。

我的 SI 版本 1.0.4

为了便于理解，我粘贴以下内容：

**文件CopyDemo-text.xml**

```
 <file:inbound-channel-adapter id="filesIn"
                                  directory="file:${java.io.tmpdir}/spring-integration-samples/input" filename-pattern=".*\.xml">
        <integration:poller id="poller" >
            <integration:interval-trigger initial-delay="1000" interval="2000" fixed-rate="true"/>
        </integration:poller>
    </file:inbound-channel-adapter>

    <integration:service-activator input-channel="filesIn"
                                   output-channel="filesOut"
                                   ref="handler"/>

    <file:outbound-channel-adapter id="filesOut"
                                   directory="file:${java.io.tmpdir}/spring-integration-samples/output"
                                   delete-source-files="true"/>

    <bean id="handler" class="org.springframework.integration.samples.filecopy.Handler"/> 
```

**FileBasedCopyTest.java**

```
public class FileBasedFileCopyTest {

    public static void main(String[] args)
    {
        ApplicationContext ac = new ClassPathXmlApplicationContext("/META-INF/spring/integration/fileCopyDemo-file.xml");
    }
} 
```

**处理程序.java**

```
public class Handler {

    public File handleFile(File input) {
        System.out.println("Copying file: " + input.getAbsolutePath());
        return input;
    }
} 
```

我有另一个 java 类，它在输入文件夹中创建一个文件。

**示例.java**

```
public static void main(String[] args) {

    try {
        String str = "SomeMoreTextIsHere";
        File newTextFile = new File("C:/Windows/Temp/spring-integration-samples/input/thetextfile.xml");

        FileWriter fw = new FileWriter(newTextFile);
        fw.write(str);
        fw.close();

    } catch (IOException iox) {
        iox.printStackTrace();
    }
} 
```

我已经运行了 FileBasedCopyTest，它现在正在监听输入文件夹。

**问题** 我正在调试模式下运行 Sample.java 文件和 momemt

> FileWriter fw = new FileWriter(newTextFile);

执行我在 Handler.java 中接收控制，理想情况下我想在文件关闭后接收控制。如何处理这种情况？

PS：我也读过[这个](http://static.springsource.org/spring-integration/docs/1.0.x/spring-integration-reference/htmlsingle/spring-integration-reference.html#files)，但不确定在这种情况下如何处理。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T15:10:44.907

无论您是否使用 Spring Integration，这都是一个常见问题。

一种常见的方法（由 SI 在出站适配器中使用）是使用临时名称（例如 ）写入文件，`foo.txt.writing`然后`foo.txt`在写入后将其重命名为。

# c# - C# Datagrid 事件在加载时触发（禁用此）

> ID：14171284
> 
> 赞同：1
> 
> 时间：2013-01-05T11:23:15.780
> 
> 标签：c#, event-handling, startup

正如刚才提到的，

如何禁用（或以编程方式解决某些问题）这个？

一些伪代码可能是：

```
cellvaluechangedevent/rowaddedevent(sender,e){
     If(initial load of datagrid){
          //trap this, end of method
     }
     else{
          //do work
     }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T12:56:31.100

我倾向于将我的数据加载分离到它自己的方法中。因此，我可以分离可能在加载或刷新期间触发的处理程序，然后在该过程完成时简单地重新附加。这也使得从代码中的其他位置刷新 dgv 数据变得更容易（如果适用）。

就您的问题而言，关键是：

1.  分离处理程序
2.  填充`DataGridView`或附加数据源，但是您正在这样做。
3.  重新附加处理程序

```
private void LoadDataGrid()
{
    this.dataGridView1.CellValueChanged -= new 
        DataGridViewCellEventHandler(dataGridView1_CellValueChanged);

    // Your code to load data here

    this.dataGridView1.CellValueChanged +=new 
        DataGridViewCellEventHandler(dataGridView1_CellValueChanged);
}

void dataGridView1_CellValueChanged(object sender, DataGridViewCellEventArgs e)
{
    // Your code to handle the cell value changing
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T12:07:03.480

似乎您只想绕过它第一次触发。
假设您的`DataGridView`named`dataGridView1`并分配了原始处理程序`dataGridView1_CellValueChanged`，那么您可以执行以下操作：

```
private void dataGridView1_CellValueChanged(object sender, DataGridViewCellEventArgs e) {
    dataGridView1.CellValueChanged-=dataGridView1_CellValueChanged;

    dataGridView1.CellValueChanged+=
        (sender_, e_) => {
            MessageBox.Show("fired after first time");
        };
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T13:06:45.880

您可以使用`DataGridView.IsCurrentCellDirty`或`IsCurrentRowDirty`

```
cellvaluechangedevent/rowaddedevent(sender,e){
 if (dataGridView1.IsCurrentCellDirty) {
     If(initial load of datagrid){ 
          //trap this, end of method 
     }
     else{
          //do work
     }
   }
 } 
```

# android - How to set an application to be default instead of making the user choose between several ones

> ID：14171288
> 
> 赞同：0
> 
> 时间：2013-01-05T11:23:36.470
> 
> 标签：android, android-manifest

I developed a dial up application and I installed it to my phone. Now I want to "on click a button" in my app to set the built in dialer as the default dialing application "automatically" without giving the user to choose between my app and the default dialer application.

This code gives the user the choice,

```
startActivityForResult(new Intent("android.intent.action.DIAL",
Uri.parse("tel:" + someNumber)), 1); 
```

I don't want this, I want to set the default application to be built in dialer without asking the user.

Note: Once the user is not using my app he will be given the choice, Howevre, if he clicked that button in my app .. it will set the default app automatically.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T11:26:32.750

Try this. This should open default dialer .

```
Intent i = new Intent(Intent.ACTION_DIAL, Uri.parse("tel:0000000000"));
startActivity(i); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:41:59.390

您不能在没有用户交互的情况下强制执行默认活动。你为什么不直接按下按钮给你的班级打电话？

```
Intent intent = new Intent(this, mydialer.class))
intent.putExtra("PHONENUMBER", _phoneNumber);

startActivityForResult(intent); 
```

# c# - MVC3 从数据库提交两个带有下拉列表的模型视图

> ID：14171289
> 
> 赞同：0
> 
> 时间：2013-01-05T11:23:49.997
> 
> 标签：c#, asp.net-mvc-3, ienumerable, html.dropdownlistfor

我正在尝试从数据库中查询列表，该列表将显示在 dropdownlistfor 视图中，并且选择的结果将被发布。

问题是我正在使用两个模型，我尝试了更多选项

我迷路了，我不知道如何发布它。数据显示在列表框中没有问题。当我尝试发布时出现此错误：

> “没有具有键 'Item2.idcity' 的 'IEnumerable' 类型的 ViewData 项。” System.Exception {System.InvalidOperationException}

城市模型

```
public class CityModel
{
    public int idcity { get; set; }
    [Required]
    public string cityName { get; set; }

    public IEnumerable<CityModel> citys { get; set; }
} 
```

医院模型

```
public class HospitalShowModels
{
    [Required]
    public string hospitalName { get; set; }
    [Required]
    public string cityName { get; set; }
} 
```

HospitalControler.Create()

```
public ActionResult Create()
{
        ViewBag.cityModel = new SelectList(DataAccess.DAL.showCity(), "idcity", "cityName");
        var tuple = new Tuple<DataAccess.HospitalShowModels, DataAccess.CityModel>(new DataAccess.HospitalShowModels(), new DataAccess.CityModel());
        return View(tuple);
}

[HttpPost]
public ActionResult Create(DataAccess.HospitalShowModels model, DataAccess.CityModel model1)
{
        if (ModelState.IsValid) {
            DataAccess.DAL.insertHospital(model.hospitalName, model1.cityName);     
        }else{
            ModelState.AddModelError("","Invalid options");
        }
        return View();
} 
```

查看.创建

```
@model Tuple<ProjektZaja.DataAccess.HospitalShowModels,ProjektZaja.DataAccess.CityModel>
@using (Html.BeginForm()) {
@Html.ValidationSummary(true)
<fieldset>
    <legend>Create Hospital</legend>

    <div class="editor-label">
        @Html.LabelFor(model => model.Item1.hospitalName)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Item1.hospitalName)
        @Html.ValidationMessageFor(model => model.Item1.hospitalName)
    </div>
    <div class="editor-label">
        @Html.LabelFor(model => model.Item1.cityName)
    </div>
    <div class="editor-field">
        @Html.DropDownListFor(model => Model.Item2.idcity,(IEnumerable<SelectListItem>)ViewBag.cityModel)
        @Html.ValidationMessageFor(model1 => Model.Item2.idcity) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T12:34:25.090

您视图中的模型类型应与发布操作中的模型类型相匹配。因此它应该是一个元组（尽管我个人不会使用它）或具有 2 个属性的新模型类型（一个用于城市，一个用于医院）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T13:43:30.280

您不能对多个模型强输入视图。您需要创建一个视图模型，它只是一个包含其他两个类的复合类，并将视图强类型化到该视图模型。

```
public class CreateViewModel
{
  public CityModel CityModel {get; set;}
  public HospitalShowModel HospitalShowModel {get; set;}
} 
```

然后将您的视图强输入到视图模型中

```
@ model Full.Path.To.CreateViewModel 
```

并适当地访问模型属性

```
Model.CityModel.cityName //etcetera... 
```

并在 post 方法中绑定

```
[HttpPost]
public ActionResult Create(CreateViewModel viewModel)
{
  //... 
```

# concurrency - shop scenario racing conditions

> ID：14171292
> 
> 赞同：3
> 
> 时间：2013-01-05T11:24:21.787
> 
> 标签：concurrency, webshop

Imagine a little webshop which uses its own currency.

In the database, there is a table for items, which can be bought. The count of each item is limited. This limit is stored in a collumn in this table as integer.

Also, there is a table for the user's cash accounts, whereas for each account the current balance is saved.

If, for example, two users conduct their purchases at the same time and only one item is available, it could be possible that both users pay but only one receives the item due to racing conditions.

How can such racing conditions be resolved, without relying on entity framework throwing exceptions on saving?

How can I ensure the count of available items and the account balance of the buyer is correctly updated?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T11:34:15.820

这并不是实体框架所特有的问题，它几乎适用于任何商店场景。这归结为一个政策问题 - 确保两个客户不购买同一商品的唯一方法是在他们将商品添加到购物车或开始结账过程时允许在该商品上放置临时锁，类似于音乐会门票或航班的销售方式。如果在设定的时间内未完成购买，此锁定将过期，并且该项目将被释放以供其他客户购买。

在电子商务环境中，这不太合适，因为人们可能会将商品添加到购物车而不结账，或者花费额外的时间来选择其他商品。这可能会导致您有待售物品但无法购买，因为它们在某人的购物车中，而该人不打算结账。相反，允许重复订单，但付款通常只经过预授权，然后在发货或订单确认时完成，因此即使第二位客户输入所有详细信息并按购买，他们的卡也不会被收取费用，因为项目将无法发货。

您可以在结帐过程中的不同阶段实施检查，以确保购物车中的物品仍然可用，或者在最简单的级别，将其留给最后一页上的最终“立即付款”按钮。最终，这只是减少了竞争条件的可能性，而不是消除它。

# .htaccess - mod-rewrite forwarding without changing URL

> ID：14171293
> 
> 赞同：2
> 
> 时间：2013-01-05T11:24:34.163
> 
> 标签：.htaccess, seo, apache2, url-encoding

I have a small problem with my Apache configuration when creating "pretty" URLs. I've got it to the stage where typing (or linkig for that matter) to

> index.html

forwards you to

> index.php?pageID=Forside

that is exactly what I want. **But how can I get index.html to stay in the address bar of the browser?** Right now it forwards and changes the URL to the original one.

Here my .htaccess:

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} index\.html
RewriteRule .* http://www.radoor-designs.dk/index.php?pageID=Forside [L] 
```

And before someone comments on it: Options +FollowSymLinks is missing since it triggers an error 500 on a one.com webhotel.

Thanks in advance!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T11:37:02.607

尝试以下操作：

```
RewriteEngine On
RewriteRule ^index\.html$ /index.php?pageID=Forside [L] 
```

我认为这可以帮助您解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T11:41:09.600

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^index.html$  /index.php?pageID=Forside [L] 
```

这将为您执行重定向，同时在浏览器窗口中显示 index.html。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T11:28:40.497

奇怪的是符号链接会创建一个错误 500，如果你希望它重定向到 index.html?pageID=Forside 然后做

RewriteRule .* /index.html?pageID=Forside [QSA,L,R=301]

我不能 100% 确定你想用这个实现什么，你能解释一下吗？

# meteor - Meteorjs loading message

> ID：14171294
> 
> 赞同：1
> 
> 时间：2013-01-05T11:24:49.057
> 
> 标签：meteor

I built the application and it is taking time to load the initial set of data from mongodb and I want to show the loadin gif till the data loading is done. Could you please help me in doing this?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-05T11:50:32.717

`Session`在函数的`onReady()`回调中使用`Meteor.subscribe()`，订阅完成时调用。

```
Meteor.subscribe('subscribe_to_this', function onReady(){
         // set a session key to true to indicate that the subscription is completed.
         Session.set('subscription_completed', true);
}); 
```

然后将此会话值从您的模板助手返回为：

```
Template.myTemplate.isSubscriptionComplete = function(){
     return Session.get('subscription_completed'); 
} 
```

现在在您的 html 中，如果数据未加载，则很容易显示加载器；如果数据已完成加载，则可以轻松呈现模板。

```
<template name="myTemplate">
    {{#if isSubscriptionComplete }}
          <!-- Data loading is done, so render your template here -->
          {{> yourFinalTemplate}}
    {{else}}
          <!-- Data loading still remaining, so display loader here -->
         <img src="images/load.gif">
    {{/if}}
</template> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T11:47:25.047

这可以通过 Session 变量来完成。这只是一个让您入门的示例：

在您的客户端代码中：

```
var yourData;

Meteor.startup(function() {
  Session.set("dataLoaded", false);
});  

...

// Load your initial data
yourData = SampleCollection.find(query).fetch();
Session.set("dataLoaded", true); 
```

示例模板：

```
<template name="main">
  {{#if dataLoaded}}
     <h1>Welcome to my application!</h1>
     Your data:
     {{#each yourData}}
       ...
     {{/each}}    
  {{else}
     <div>Loading data...</div>
  {{/if}}
</template> 
```

模板助手：

```
Template.main.dataLoaded = function() {
  return Session.get("dataLoaded")
}

Template.main.data = function() {
  return yourData;
} 
```

# asp.net-mvc - ASP.Net MVC 4: Update Profile after Windows authentication only once after login

> ID：14171295
> 
> 赞同：0
> 
> 时间：2013-01-05T11:24:55.123
> 
> 标签：asp.net-mvc, asp.net-profiles, asp.net-authorization

I have an Intranet application with Windows authentication set for user authentication which works fine, only problem is that I do not want to say 'Hello, mydomain\user!' but use the user's full display name which I find in the Active Directory.

In fact I want to populate the profile with even more details from our domain, the problem is that I only want to do this AD query only once after the user has been authenticated on his first call to the application. I have all the AD and profile things working, but I do not find a good place to put the code so that it is called exactly once after login. I suspect a custom AuthorizeAttribute might be a way... Any help is greatly appreciated. Thanks!!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T12:30:07.503

尝试将信息存储在会话中或客户端的 cookie 或本地存储中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T16:33:21.390

Well, I finally came up with a solution - can this be considered as a as a valid answer? Basically I wrote a custom AuthorizationFilter and put a flag into the session to do the whole work only once. However I hoped to find an event "User_Authenticated" which is fired only once. But I guess this is more appropriate for Forms authentication.

```
public class ProfileUpdater : IAuthorizationFilter
    {
        public void OnAuthorization(AuthorizationContext filterContext)
        {
            // if there is a profile already in the session we do not update this
            Controller controller = filterContext.Controller as Controller;
            if (controller != null && controller.Session["ProfileUpdated"] != null)
            {
                return;
            }
            else if (controller == null) 
            {
                return;
            }

            UserPrincipal domainUser = DomainHelper.GetDomainUser(controller.User.Identity.Name);

            if (domainUser != null)
            {
                controller.Profile.SetPropertyValue("DisplayName", domainUser.DisplayName);

                controller.Session["ProfileUpdated"] = true; // just put a marker object into the session to show we alreay updated the Profile
            }

            return;
        }
    } 
```

# android - 解析来自服务器的 json 响应时在字符 0 处输入结束

> ID：14171305
> 
> 赞同：0
> 
> 时间：2013-01-05T11:26:27.363
> 
> 标签：android, httprequest, httpresponse, json

我正在将数据发送到服务器，并尝试解析格式为 json 的响应`{"count":"2"}`，但我遇到了异常

这是我的代码

```
post(serverUrl, params);

HttpClient httpClient = new DefaultHttpClient();
try{
    get = new HttpPost(url);
    r = httpClient.execute(get);
    he = r.getEntity();
    InputStream is = he.getContent();
    BufferedReader reader = new BufferedReader(new InputStreamReader(is, "UTF-8"), 8);
    StringBuilder sb = new StringBuilder();

    String line = null;
    while ((line = reader.readLine()) != null) { sb.append(line + "\n"); }

    String result = sb.toString();
    jObj = new JSONObject(result);
    Log.d(TAG, "Count is" + jObj);
    count = jObj.getString("count");
    Log.d(TAG, "Count is" + count);
}
catch (Exception e) { e.printStackTrace(); } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T12:32:36.697

响应中可能存在空白值。它不能被认为是空的。这个错误是因为空白响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T12:47:29.487

这是我的服务器代码，我保持默认值，所以它肯定不能为空

```
$jsonOutput = array('count' => $i);
header('Content-type: application/json');
echo json_encode($jsonOutput); 
```

# java - 结果集验证

> ID：14171308
> 
> 赞同：0
> 
> 时间：2013-01-05T11:26:47.607
> 
> 标签：java, jdbc, resultset

我确实有一个结果集，我只需要验证一些字段，然后更新到另一个表，真的我不知道如何验证它并将其传递回原始结果集？有什么办法可以更好地进行。我确实有大量数据，所以我还需要考虑性能

```
while (rs.next()) {
    dataValidation.insertRegDataValidation(rs);

} 
```

其中 insertRegDataValidation(rs) 是发生验证的方法，如果验证返回 false，我不想更新表，而不是我想抛出错误，有没有人知道关于相同的更好的概念。我从不想使用任何框架，并以优化的方式在 java 中完成

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T11:57:08.133

如果结果集不是很大；您可以首先使用 ResultSet 对象迭代所有 resultSet --> 对每个结果进行验证 --> 将传递的记录放在一个 ArrayList 中。

当上述迭代完成时；迭代这个arrayList，你可以使用相同的resultSet对象来执行插入..

其他方法可以是使用两个结果集。一个用于选择；而其他所有插入。

# iphone - UITableView 中的第二个视图不会显示来自 JSON 的解析数据

> ID：14171315
> 
> 赞同：0
> 
> 时间：2013-01-05T11:28:20.240
> 
> 标签：iphone, ios, json, uitableview, nsjsonserialization

我有一个来自 JSON 文件的解析数据。它在我的 UITableView 的第一个视图中就像一个魅力。但是，当我点击一个项目时，它会显示一个空白的第二个视图。

主视图.h

```
@interface MasterViewController : UITableViewController
{
    NSArray *json;
}

@property (nonatomic, retain) NSArray *json;

@end 
```

主视图.m

```
#import "MasterViewController.h"
#import "InformationViewController.h"

@interface MasterViewController ()

@end

@implementation MasterViewController

@synthesize json;

- (void)viewDidLoad
{
    [super viewDidLoad];

    NSData *jsonData = [NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://j4hm.t15.org/ios/console.php"]];
    [self performSelectorOnMainThread: @selector(fetchedData:) withObject: jsonData waitUntilDone: YES];
}

- (void)fetchedData:(NSData *)responseData
{
    NSError *error;

    self.json = [NSJSONSerialization JSONObjectWithData: responseData options: kNilOptions error: &error];

    NSLog(@"String is %@", self.json);
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [json count];
}

// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    }

    cell.textLabel.text = [[json objectAtIndex: indexPath.row] objectForKey: @"Console"];

    [cell setAccessoryType: UITableViewCellAccessoryDisclosureIndicator];

    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    InformationViewController *informationViewController = [[InformationViewController alloc] initWithStyle:UITableViewStylePlain];

    informationViewController.title  = [[json objectAtIndex: indexPath.row] objectForKey: @"Console"];
    informationViewController.Information = [[json objectAtIndex: indexPath.row] objectForKey: @"Model"];

    NSLog(@"String is %@", informationViewController.Information);

    [self.navigationController pushViewController: informationViewController animated:YES];

} 
```

信息视图.h

```
@interface InformationViewController : UITableViewController

@property (nonatomic, strong) NSArray * Information;

@end 
```

信息视图.m

```
@interface InformationViewController ()

@end

@implementation InformationViewController

@synthesize Information;

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    // Configure the cell...

    cell.textLabel.text = [[Information objectAtIndex: indexPath.row] objectForKey: @"Model"];

    [cell setAccessoryType: UITableViewCellAccessoryDisclosureIndicator];

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T10:02:45.037

在这里，我发布了另一个答案，只是因为我不想引起混乱。

[项目代码](http://www.cogzentappz.com/demo/iostutorial/TestJson.zip)： http: [//www.cogzentappz.com/demo/iostutorial/TestJson.zip](http://www.cogzentappz.com/demo/iostutorial/TestJson.zip)

而不是传递选定的值，而是传递整个`Array`并`NSUsedDefaults`使用以下代码检索它们。

```
 - (void)fetchedData:(NSData *)responseData
    {
        NSError *error;

        self.json = [NSJSONSerialization JSONObjectWithData: responseData options: kNilOptions error: &error];

        NSLog(@"String is %@", self.json);

     NSUserDefaults *standardDefaults = [NSUserDefaults standardUserDefaults];
        NSMutableArray *arrayObj = [[NSMutableArray alloc] init];

        for(int i = 0 ; i<[self.json count] ; i++) {
            [arrayObj addObject:[json objectAtIndex:i]]];
        }

        [standardDefaults setObject:arrayObj forKey:@"longArray"];
        [arrayObj release];

    } 
```

在下一个视图中，您可以使用以下方法检索数据。在`ViewDidLoad`使用`informationViewcontroller`这个

```
//reading

NSUserDefaults *standardDefaults = [NSUserDefaults standardUserDefaults];
NSArray *arrayObj = [standardDefaults objectForKey:@"longArray"];

for(int i = 0 ; i<[arrayObj count] ; i++) {
        NSLog(@"String is %@",[arrayObj objectAtIndex:i]);
    } 
```

根据您的链接，Json 输出如下所示：

```
NSArray-->NSDictionary-->NSArray-->NSDictionary-->NSArray-->NSDictionary 
```

转到链接： http: [//json.bloople.net](http://json.bloople.net)并发布所有 json 输出并按回车键。

因此，您必须根据该格式获取值。

```
for(int i = 0 ; i<[self.json count] ; i++) {
 NSArray *info_Array=[[self.json objectAtIndex:i ]valueForKey:@"Information"];
    NSLog(@"info_Array is %@", info_Array);

    for(int j = 0 ; j<[info_Array count] ; j++)
    {

        NSLog(@"Model is %@", [[info_Array objectAtIndex:j ]valueForKey:@"Model"]);
        NSArray *title_Array=[[info_Array objectAtIndex:j ]valueForKey:@"Title"];
        for(int k = 0 ; k<[title_Array count] ; k++)
        {
            NSLog(@"Game is %@", [[title_Array objectAtIndex:k ]valueForKey:@"Game"]);
            NSLog(@"Publisher is %@", [[title_Array objectAtIndex:k ]valueForKey:@"Publisher"]);
        }

    }

    NSString *Console_string= [[dataArray objectAtIndex:i ]valueForKey:@"Console"];
    NSLog(@"String is %@", Console_string);

}

NSString *Console_string= [[self.Json objectAtIndex:i ]valueForKey:@"Console"];
NSLog(@"String is %@", Console_string);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T11:43:04.933

用这个改变你的 MaterView.m 代码

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
InformationViewController *informationViewController = [[InformationViewController alloc] initWithStyle:UITableViewStylePlain];
informationViewController.title  = [[json objectAtIndex: indexPath.row] objectForKey: @"Console"];
informationViewController.Information = [[json objectAtIndex: indexPath.row] objectForKey: @"Model"];
NSLog(@"String is %@", informationViewController.Information);
[self.navigationController pushViewController: informationViewController animated:YES];
} 
```

希望对你有帮助...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T11:53:29.587

我认为您必须在获取数据后重新加载数据。现在，您指定`NSArrray *json`为空，因为计数返回 0。因此，您禁止填充表视图。`[tableView reloadData];`获取数据后调用。

# android - 从 web 视图中的 raw 文件夹加载 html 文件

> ID：14171316
> 
> 赞同：31
> 
> 时间：2013-01-05T11:28:21.857
> 
> 标签：android, android-webview

如何从文件夹中加载`html`文件。我不知道如何在函数中添加这些文件的路径。我知道如何从文件夹中加载文件，但这里遇到了文件夹问题。`WebView``raw``html``WebView.loadData()``asset``WebView``raw`

提前致谢

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-01-05T11:34:20.563

使用此代码从 Web 视图中的原始文件夹加载 html 文件：

有关更多信息，请参阅[WebView 的 javadoc](http://developer.android.com/reference/android/webkit/WebView.html)：

```
 public class ViewWeb extends Activity {  
            @Override  
            public void onCreate(Bundle savedInstanceState) {  
                super.onCreate(savedInstanceState);
                setContentView(R.layout.webview);  

                WebView lWebView = (WebView)findViewById(R.id.webView);
                lWebView.loadUrl("file:///android_res/raw/your_file_name.html");
            }  
        } 
```

# php - facebook登录连接mysql

> ID：14171317
> 
> 赞同：0
> 
> 时间：2013-01-05T11:28:32.983
> 
> 标签：php, mysql, facebook

假设用户可以在我的网站上正常注册旧的用户名：电子邮件：和密码：字段。

但是，如果我实现这一点，假设用户决定通过 facebook 在我的网站上注册。现在说，当用户在 facebook 上注册时，我要求他们通过用户名并在那里提交包含该信息的电子邮件。

但是当用户通过 facebook 登录时，我如何将它与我的 mysql 数据库中的用户匹配或知道我与谁登录？

假设我的 mysql 包含用户：通过：电子邮件：我需要一个新的列来以某种方式传达这两个登录名吗？那将如何工作。

我在[这里查看 Facebook 登录方法。](https://developers.facebook.com/docs/concepts/login/login-architecture/)不确定需要哪个 id？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T12:21:34.580

用户的电子邮件地址是这里的关键。除了其他权限列表之外，您还可以请求电子邮件地址权限。然后您可以与您保存在数据库中的那个进行比较。如果电子邮件地址存在，则登录相应的用户，如果不存在，则另存为新用户。

# ruby-on-rails-3 - Chrome 自动完成字段中的错误

> ID：14171321
> 
> 赞同：0
> 
> 时间：2013-01-05T11:29:03.183
> 
> 标签：ruby-on-rails-3, forms, browser, autocomplete, passwords

我正在使用设计进行身份验证

在设置中，我有 3 个字段：

密码（用于输入新密码）

```
<input autocomplete="off" class="controls" id="user_password" name="user[password]" size="30" type="password"> 
```

确认密码

```
<input class="controls" id="user_password_confirmation" name="user[password_confirmation]" size="30" type="password"> 
```

当前密码

```
<input class="controls" id="user_current_password" name="user[current_password]" size="30" type="password"> 
```

我希望自动完成当前密码，但由于某种原因 chrome 会自动完成密码确认

有没有办法告诉 chrome 哪个字段是要自动完成的密码字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T20:07:30.920

您仅在 user_password 上设置了 autocomplete="off"。也许您应该将其设置在您想要的位置。

# java - 如何去除“垃圾”字符而不丢失有效的“奇怪”字符？

> ID：14171324
> 
> 赞同：4
> 
> 时间：2013-01-05T11:29:10.153
> 
> 标签：java, string, text, utf-8, special-characters

我有一堆输入数据，有时我会得到一些垃圾字符，例如：

> “点婴儿送礼会邀请函”

显然在过去的某个时候它是`"Dots Baby Shower Invitations"`。但它对我来说是乱码。在这种情况下，我很乐意删除垃圾`â`字符。

但是我的数据集非常大，仅删除所有非英文字符可能有点**幼稚**，就像单词 naïve 一样。我当然不想`ï`被删除。

那么这个问题是否有潜在的自动化解决方案？有没有人来过我这个问题？这是“计算机不如人类聪明”的案例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T00:58:18.213

您可以使用[WordNet](http://wordnet.princeton.edu/)之类的英语词典，只修改其中找不到的单词。例如， *naïve*包含一个“奇怪”字符，但在字典中，因此它不会被更改。*â*另一方面，Dots 也包含一个奇怪的字符，但不会（希望）出现在字典中，因此将对其进行修改并删除*â 。*

这可能需要付出太多努力，但是正如您所说，您需要一个快速可行的解决方案，也许值得一试……而且它可能比快速破解的启发式更好！

# java - 如何在 App Engine (JAVA) Datastore 中获取今天的记录？

> ID：14171329
> 
> 赞同：1
> 
> 时间：2013-01-05T11:29:53.570
> 
> 标签：java, google-app-engine, datetime

我在 Google App Engine 上的实体中有一个日期时间属性。当我插入新记录时，我将此属性设置为：

```
Date date = new Date();
newEntity.setProperty("dateTime", date); 
```

如何使用 datetime 属性查询今天保存的记录？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T15:07:07.617

对您的实体执行查询，按`dateTime`属性过滤。

首先计算今天开始的时间，如下所示：

```
Calendar c = Calendar.getInstance(); // You might wanna get instance based on user's time zone
c.set( Calendar.HOUR_OF_DAY, 0 );
c.set( Calendar.MINUTE, 0 );
c.set( Calendar.SECOND, 0 );
c.set( Calendar.MILLISECOND, 0 );
Date dayStart = c.getTime(); 
```

并过滤其`dateTime >= dayStart`，不知何故像这样的实体：

```
Query q = new Query( "YourEntityName" );
q.setFilter( new FilterPredicate( "dateTime", FilterOperator.GREATER_THAN_OR_EQUAL, dayStart ) );

// And execute the query:
DatastoreService ds = DatastoreServiceFactory.getDatastoreService();
for ( final Entity e : ds.prepare( q ).asIterable() ) {
    // Do something with the entity
} 
```

# java - 获取与线程和 arrayLists 相关的错误

> ID：14171331
> 
> 赞同：3
> 
> 时间：2013-01-05T11:30:09.733
> 
> 标签：java, multithreading, arraylist

嗨，我正在写一个非常简单的游戏。玩家可以使用鼠标移动飞船，每 200 毫秒发射一次新光束。该光束在 while(true) 循环中移动，当它的 y 为 0 或 400（帧的边界）时，我使用 break 来结束循环（和线程）。每根梁都有自己的线程。还有在背景中移动的星星。他们每个人都像梁一样移动，并有自己的线程。如您所见，arrayLists 中经常有添加和删除。一切正常，但有时我会收到这样的错误：

```
Exception in thread "AWT-EventQueue-0" java.util.ConcurrentModificationException
    at java.util.ArrayList$Itr.checkForComodification(ArrayList.java:819)
    at java.util.ArrayList$Itr.next(ArrayList.java:791)
    at spacecommander.MainPanel.paintComponent(MainPanel.java:50) 
```

他们在游戏中没有任何问题，但我怎样才能消除它们？也许我应该使用同步或其他东西？

编辑：这是代码

```
public class MainPanel extends JPanel {
    private Player player = new Player(100, 100, 3, 3);
    private Point2D targetPoint = new Point2D.Float(130, 350); //Poczatkowa pozycja statku
    private ArrayList<Beam> beams = new ArrayList<Beam>();
    private InputMap imap = getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW);
    private ActionMap amap = getActionMap();
    private Random rand = new Random();

    public MainPanel() {
        setPreferredSize(new Dimension(300, 400));

        addMouseMotionListener(new MouseMotionHandler());

        //Rozpoczynanie watkow
        Thread t = new Thread(new PlayerMoveRunnable());
        t.start();
        Thread t2 = new Thread(new PlayerShootRunnable());
        t2.start();
    }

    public void paintComponent(Graphics g) {
        Graphics2D g2 = (Graphics2D)g;
        g2.setColor(Color.BLACK);
        g2.fillRect(0, 0, 300, 400);
        //Rysowanie gracza
        g2.drawImage(player.getImage(), (int)player.getX(), (int)player.getY(), null);
        //Rysowanie pociskow
        for (Beam beam : beams) {
            g2.drawImage(beam.getImage(), (int)beam.getX(), (int)beam.getY(), null);
        }
    }

    public void makeShortcut(String name, String keys, AbstractAction action) {
        imap.put(KeyStroke.getKeyStroke(keys), name);
        amap.put(name, action);
    }

    //Watek dziala caly czas bo gracz i tak caly czas sie rusza
    private class PlayerMoveRunnable implements Runnable {
        public void run() {
            try {
                while (true) {
                    player.moveToPoint(targetPoint);
                    repaint();
                    Thread.sleep(15);
                }
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    }

    //Takze dziala caly czas. Dodaje nowy pocisk co 200ms
    private class PlayerShootRunnable implements Runnable {
        public void run() {
            try {
                while (true) {
                    //Wybranie pocisku do wystrzelenia w zaleznosci od mode gracza
                    Thread t;
                    switch (player.getBeamMode()) {
                    case 1:
                        t = new Thread(new BeamMoveRunnable(new Beam1(100, 100, 10, 10, 10)));
                        break;
                    }
                    t.start();
                    Thread.sleep(200);
                }
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    }

    private class BeamMoveRunnable implements Runnable {
        private Beam beam;

        public BeamMoveRunnable(Beam beam) {
            this.beam = beam;
        }

        public void run() {
            Beam beam = this.beam;
            beams.add(beam);
            try {
                while (true) {
                    if (beam.getY() <= 0) {
                        beams.remove(beam);
                        break;
                    }
                    beam.move();
                    repaint();
                    Thread.sleep(20);
                }
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    }

    private class MouseMotionHandler extends MouseAdapter {
        public void mouseMoved(MouseEvent event) {
            targetPoint = event.getPoint();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T11:59:04.447

正如您所怀疑的，这似乎是一个同步问题。可能在您的绘图代码迭代`beams`-list 时， a`BeamMoveRunnable`同时修改列表（添加或删除梁），并导致*ConcurrentModificationException*。就我个人而言，我不会使用单独的线程来移动梁，而是一个简单的循环，它首先更新游戏（一次移动所有梁等），然后重绘屏幕。但是，您也可以只同步对列表的访问，这样一次只有一个线程可以访问它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T11:31:29.960

当您尝试在迭代时从列表中添加或删除项目时，通常会发生这种情况：

```
for (String s : list) {
    list.add("abc"); //ConcurrentModificationException
} 
```

如果没有看到 MainPanel 类的第 50 行附近的代码，很难更具体（参见 stacktrace: `at spacecommander.MainPanel.paintComponent(MainPanel.java:50)`）。

**编辑**

在您进行编辑之后，一个简单的更改是使用线程安全的 CopyOnWriteArrayList 而不是 ArrayList 来保存您的 Beam 对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T12:00:31.937

由于您使用多个线程，因此不同的线程正在尝试修改您的`beams arraylist`. 您可以使用同步块来避免并发修改异常，如下所示

循环列表

```
synchronized (beams) {
    for (Iterator it = beams.iterator(); it.hashNext(); ) {
        Beam beam = (Beam) it.next();
       g2.drawImage(beam.getImage(), (int)beam.getX(), (int)beam.getY(), null);
    }
} 
```

将项目添加到列表

```
syncronized (beams) {
    beams.add(beam);
} 
```

从列表中删除项目

```
syncronized (beam) {
    list.remove(beam);
} 
```

# php - 满足条件时如何从数组中删除元素

> ID：14171332
> 
> 赞同：7
> 
> 时间：2013-01-05T11:30:17.347
> 
> 标签：php, arrays, multidimensional-array

给定以下数组：

```
Array
(
    [0] => Array
        (
            [id_contract] => 1
            [contract_months] => 5
            [months_with_expenses] => 1
        )

    [1] => Array
        (
            [id_contract] => 2
            [contract_months] => 12
            [months_with_expenses] => 0
        )

    [2] => Array
        (
            [id_contract] => 3
            [contract_months] => 1
            [months_with_expenses] => 1
        )

) 
```

如何从数组中删除键“contract_months”与键“month_with_expenses”不匹配的所有元素？

我正在使用 PHP。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-05T11:35:07.883

尝试这个：

```
foreach ($array as $key => $element) {
    if (conditions) {
        unset($array[$key]);
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-05T11:36:04.027

你可以试试这个：

```
foreach($arr as $key=>$value) {
    if($value['contract_months'] != $value['months_with_expenses']) {
       unset($arr[$key]);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T11:34:48.007

带有 if 条件和未设置的简单循环将起作用

```
<?php
    for( i=0; i<count($arr); i++){
        if($arr[i]['contract_months'] != $arr[i]['months_with_expenses']) {
            unset($arr[i]);
        }
    } 
```

# css - 如何将 CSS3 解析器与 HtmlUnitDriver 一起使用

> ID：14171334
> 
> 赞同：1
> 
> 时间：2013-01-05T11:30:31.120
> 
> 标签：css, selenium, jquery-selectors, webdriver, htmlunit

例如。我有一个活动菜单项的选择器：

```
$("ul#menu li a[href='/']") 
```

其余菜单项的选择器 (1)：

```
$("ul#menu li a:not([href='/'])") 
```

但是 ":not" 出现在 CSS3 中并且不受 HtmlUnitDriver 支持。我试过了

> org.seleniumhq.selenium：selenium-htmlunit-driver：2.28.0

我也试过下一个选择器（2）

```
$("ul#menu li a[href!='/']") 
```

(1) 和 (2) 都可以通过 jQuery 在 Firefox 或 Google Chrome 等真实浏览器中正常工作。(1) 适用于 FirefoxDriver，(2) 不适用。

我应该使用哪个版本的 HtmlUnitDriver 来启用 CSS3 支持？我在哪里可以得到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T20:50:37.143

似乎 HtmlUnit 开发人员尝试添加 CSS3 支持，但由于某些原因失败并恢复了它。 [http://sourceforge.net/p/htmlunit/code/7898](http://sourceforge.net/p/htmlunit/code/7898)

因此，在他们完成工作之前，我们不会看到正确的 HtmlUnitDriver。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T14:58:13.687

我有一个想法。尝试使用js代码并以这种方式将其插入到jsExecutor中： ![在此处输入图像描述](../Images/c5dbbd3a404d78d1e36ff8b285c7ec3d.png)

```
JavascriptExecutor js = (JavascriptExecutor) driver;
        StringBuilder stringBuilder = new StringBuilder();
        stringBuilder.append("var x = ($("ul a:not([href='/'])")[23]);");
        stringBuilder.append("x.click();");
        js.executeScript(stringBuilder.toString()); 
```

希望这对你有用。

# jsf - 鼠标悬停在图形图像上时如何调用 bean 方法？

> ID：14171335
> 
> 赞同：1
> 
> 时间：2013-01-05T11:30:39.567
> 
> 标签：jsf, primefaces, mouseover, actionmethod, graphicimage

我要求在鼠标悬停时`<p:graphicImage>`调用 JSF 支持 bean 方法，该方法将动态显示一些数据。

我怎样才能做到这一点？请不要向我推荐 JavaScript 代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T11:39:55.277

[此链接](http://www.horstmann.com/corejsf/jsf-tags.html#Table4_12)显示`<h:graphicImage>`支持该`mouseover`事件。由于您使用的是 Primefaces，您应该能够执行类似的操作

```
<h:graphicImage ...>
    <p:ajax event="mouseover" actionListener="myMethod"/>
</h:graphicImage> 
```

# core-data - 在 CoreData 对象中设置属性会导致保存错误

> ID：14171338
> 
> 赞同：0
> 
> 时间：2013-01-05T11:31:05.067
> 
> 标签：core-data

当我更新 NSManagedObject 并保存它时，出现错误：无法完成操作。（可可错误 1560。）

*   该对象已经在数据库中，所以实际上我在保存它时正在更新
*   当我在修改之前保存对象时，没有错误
*   我通过设置对象的属性来修改它。使用 KVP 有相同的结果
*   原始保存（对象已在不久之前创建）和更新后的保存都在主线程中完成。该对象永远不会被另一个线程触及。

方法 validateForUpdate: 总是返回 NO。即使对象没有更改，我也不确定此方法是否应该返回 YES：如果对象 X 保存时没有错误，然后我调用 validateForUpdate：它返回 NO。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T11:38:36.443

您更改的属性对其值可能是什么有限制。您的更新违反了它们，因此使您无法保留无效更改。

# php - 困境：实时创建虚拟主机还是使用 crontab？

> ID：14171340
> 
> 赞同：1
> 
> 时间：2013-01-05T11:31:26.817
> 
> 标签：php, apache, bash, shell, virtual-hosts

我正在开发一个带有 codeigniter 的虚拟主机托管控制面板。到目前为止，一切都很好。:)

现在我正在研究创建虚拟主机的解决方案。我创建虚拟主机的 shell 脚本有效，所以我的第一个想法是在 cronjob 中触发该脚本，假设每 15 分钟一次。那应该行得通。

但并不是每 15 分钟就不会创建一个新的虚拟主机。所以，我认为每 15 分钟重新加载一次 apache 配置实在是太过分了。

顺便说一句，在 codeigniter 端，它只是使用该新虚拟主机所属的值创建一个简单的文本文件。

那么，是否有实时保存的解决方案？我的猜测是，这是实时使用 shell_exec() 的唯一方法，但这不是一种保存方法。

我必须说我的 shell scipting 非常新手，所以也许有一种方法可以触发 if 或 else 语句来选择创建虚拟主机或什么都不做。但我该怎么做？然后我不需要实时进行。

这是我的 shell 脚本：

```
#!/bin/bash
vhroot='/etc/apache2/sites-available/' 
NEW_DOMAINS="/home/domain.txt"

cat ${NEW_DOMAINS} | \

while read domain user email
do

echo "<VirtualHost *:80>
  ServerName  "$domain"
  ServerAlias www."$domain"
  ServerAdmin "$email"
  DocumentRoot /home/"$user"/domains/"$domain"/public_html
</VirtualHost>" > $vhroot/$domain

#mkdir /home/$user/domains/domain
#mkdir /home/$user/domains/$domain/public_html
#chown -R $user.$user /home/$user/domains/$domain

echo "111.21.111.111       $domain" >> host.txt
#a2ensite $hostname
done

echo "" > /home/domain.txt

# /etc/init.d/apache2 reload 
```

我希望有人对这个问题有一个简单但有效的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T11:42:47.150

您可以只在脚本中添加一个[bool 变量](https://stackoverflow.com/a/2953673/11963 "如何在 shell 脚本中声明和使用布尔变量？")，并且只有在添加了新的虚拟主机时才重新启动网络服务器。

未经测试：

```
#!/bin/bash
vhroot='/etc/apache2/sites-available/' 
NEW_DOMAINS="/home/domain.txt"
has_new_domains=false #No new domains by default = do not reload the apache config.

cat ${NEW_DOMAINS} | \

while read domain user email
do
  has_new_domains=true #true = at least one new domain = reload apache config
  echo "<VirtualHost *:80>
  ServerName  "$domain"
  ServerAlias www."$domain"
  ServerAdmin "$email"
  DocumentRoot /home/"$user"/domains/"$domain"/public_html
</VirtualHost>" > $vhroot/$domain

  #mkdir /home/$user/domains/domain
  #mkdir /home/$user/domains/$domain/public_html
  #chown -R $user.$user /home/$user/domains/$domain

  echo "111.21.111.111       $domain" >> host.txt
  #a2ensite $hostname
done

echo "" > /home/domain.txt

if $has_new_domains ; then #only reload the apache config if there is at least one new domain
  /etc/init.d/apache2 reload
fi 
```

顺便说一句：我希望里面的一切都是安全的，`$user`并且`$domain`不能用于将除您的虚拟主机之外的其他内容注入配置中。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-11T16:22:19.197

很有用。我制作了一个新版本的脚本，它也删除了虚拟主机，查看了另一个 .txt 文件。文档根文件夹存储在 /var/www/html/websites 中。根据您的需要更改它。该脚本还检查变量 $domain 是否为空，以确保脚本不会运行，以防域名出现问题

```
#!/bin/bash
vhroot='/etc/apache2/sites-available/'
NEW_DOMAINS="adddomain.txt"
has_new_domains=false #No new domains by default = do not reload the apache config.

cat ${NEW_DOMAINS} | \

while read domain 
do
  if [ ! -z "$domain" ];
  then
      has_new_domains=true #true = at least one new domain = reload apache config
      echo "<VirtualHost *:80>
      ServerName  "$domain"
      ServerAlias www."$domain"
      ServerAdmin postmaster@"$domain"
      DocumentRoot /var/www/html/websites/"$domain"
      </VirtualHost>" > $vhroot/"$domain".conf #.conf extension needed to make a2ensite work in apache -debian
      mkdir /var/www/html/websites/
      mkdir /var/www/html/websites/$domain
      chown -R root:www-data /var/www/html/websites
      chmod -R 755 /var/www/html/websites

      #create index.html file 
      echo "<!DOCTYPE html>
      <html>
      <head>
      <title>Welcome to nginx on Debian!</title>
      <style>
        body {
            width: 35em;
            margin: 0 auto;
        font-family: Tahoma, Verdana, Arial, sans-serif;
        }
      </style>
      </head>
      <body>
      <h1>Welcome to "$domain"</h1>
      <p>If you see this page, the Apache web server is successfully installed and working.</p>

      <p>
      You can start building your website 
      </p>

      </body> </html>">/var/www/html/websites/$domain/index.html
      #echo "111.21.111.111       $domain" >> host.txt
      a2ensite "$domain".conf
    else echo 'No new domains'
    fi
done

> adddomain.txt # with echo "" an empty line is still present in file
DEL_DOMAINS="deldomain.txt"
cat ${DEL_DOMAINS} | \

while read deldomain 
do
  has_new_domains=true #true = at least one new domain = reload apache config
  #Make sure we don't delete all parent directory , in case variable is empty
  if [ ! -z "$deldomain" ]; then
      a2dissite "$deldomain".conf
      echo "dominio "$deldomain" eliminado"
      rm -r /var/www/html/websites/$deldomain
      rm $vhroot/"$deldomain".conf
  fi
done
> deldomain.txt
if $has_new_domains ; then #only reload the apache config if there is at least one new domain
    /etc/init.d/apache2 reload
fi 
```

# java - org.hibernate.ejb.QueryImpl 不能强制转换为 spring roo 中的类

> ID：14171348
> 
> 赞同：1
> 
> 时间：2013-01-05T11:32:20.867
> 
> 标签：java, spring, hibernate, jakarta-ee, spring-roo

```
@RequestMapping(method = RequestMethod.POST, produces = "text/html")
public String create(@Valid Standup standup, BindingResult bindingResult, Model uiModel, HttpServletRequest httpServletRequest, Principal principal, Employee employee) {
    if (bindingResult.hasErrors()) {

        populateEditForm(uiModel, standup);
        return "standups/create";
    }

    uiModel.asMap().clear();

    String name = SecurityContextHolder.getContext().getAuthentication().getName();

    Employee empByName = (Employee) Employee.findEmployeesByNameEquals(name);

    System.out.println(empByName.getName());
    standup.persist();
    return "redirect:/standups/" + encodeUrlPathSegment(standup.getId().toString(), httpServletRequest);
} 
```

那是我的代码的一部分。一切都很好，除了我试图通过它的名字找到它来创建员工的那一行。Employee 是一个活动的记录类，finder 是默认的。我刚刚添加了它。

错误说：

```
org.hibernate.ejb.QueryImpl cannot be cast to com.example.standupmanager.domain.Employee 
```

和堆栈跟踪：

```
com.example.standupmanager.web.StandupController.create(StandupController.java:44)
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
java.lang.reflect.Method.invoke(Method.java:616)
org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:219)
org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:132)
org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:104)
org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:746)
org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:687)
org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:925)
org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:856)
org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:915)
org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:822)
javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:796)
javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter.doFilterInternal(OpenEntityManagerInViewFilter.java:180)
org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:311)
org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:116)
org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:101)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:150)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:182)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:173)
org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:857)
org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
java.lang.Thread.run(Thread.java:679) 
```

我正在添加由 roo 自动生成的员工查找器代码的内容。

```
 public static TypedQuery<Employee> Employee.findEmployeesByNameEquals(String name) {
        if (name == null || name.length() == 0) throw new IllegalArgumentException("The name argument is required");
        EntityManager em = Employee.entityManager();
        TypedQuery<Employee> q = em.createQuery("SELECT o FROM Employee AS o WHERE o.name = :name", Employee.class);
        q.setParameter("name", name);
        return q;
    } 
```

我究竟做错了什么？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T12:12:35.203

您的方法`findEmployeesByNameEquals`正在返回 Query 对象，但您的控制器期望该方法返回查询**结果**。尝试更改您的方法以执行查询并返回结果：

```
public static Employee findEmployeesByNameEquals(String name) {
    if (name == null || name.length() == 0) throw new IllegalArgumentException("The name argument is required");
    EntityManager em = Employee.entityManager();
    TypedQuery<Employee> q = em.createQuery("SELECT o FROM Employee AS o WHERE o.name = :name", Employee.class);
    q.setParameter("name", name);
    return q.getSingleResult();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T12:17:29.433

如果 Employee.findEmployeesByNameEquals 是自动生成的代码；很可能你会不愿意修改它。修改员工empByName = (Employee) Employee.findEmployeesByNameEquals(name);

到

```
Employee empByName = (Employee) Employee.findEmployeesByNameEquals(name).getSingleResult(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T12:15:11.997

该方法`TypedQuery<Employee> Employee.findEmployeesByNameEquals(String name)`返回一个 TypedQuery ，您不能直接将其转换为域对象，但可以在调用该方法后添加此行：

```
TypedQuery<Employee> q = Employee.findEmployeesByNameEquals(name);
List<Employee> res = q.getResultList();
for(Employee employee : res){
      // do something here;
} 
```

希望能帮助到你。

# c# - 如何通过转换为通用单位将土地面积显示为网格视图

> ID：14171350
> 
> 赞同：1
> 
> 时间：2013-01-05T11:32:26.937
> 
> 标签：c#, asp.net

我在 Asp.Net(C#) 中有一个简单的表单，用户可以在其中输入他的详细信息。详细信息包括用户的总土地面积及其单位（公顷、米、英尺等）。此详细信息保存到 Sql 数据库中。此详细信息应显示在网格视图中。我已经做到了这一点，但我的问题是土地面积将以一个共同的单位（公顷）显示。限制是在从数据库中获取提交的数据时应该转换它。有没有人有解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T12:29:58.253

您的方案的简单选项是：

*   如果您的数据库系统支持它们（例如 SQL Server 支持），则直接在数据库上创建一个计算列并从存储过程中返回它

*   修改用于获取数据的存储过程，以便它进行转换（例如，在 SQL Server 中使用 case 语句

    case t.unit
        当 'hectare' 然后 t.area
        当 'sqmeter' 然后 t.area / 10000
        当 'sqfeet' 然后 t.area / xxxx
    end

*   在数据表中添加一列并在绑定数据之前计算值（数据表也可以有计算列，但公式语法非常有限，因此在 C# 中手动执行似乎更好）

    table.Columns.Add("AreaInHectare");
    foreach (var row in table) {
        row["AreaInHectare"] = GetAreaInHectare((decimal)row["Area"], (string)row["Unit"];
    }

很可能您还想应用一些舍入来去除不需要的小数位。

# jquery - 基于字体系列的条件字体大小

> ID：14171353
> 
> 赞同：9
> 
> 时间：2013-01-05T11:32:51.677
> 
> 标签：jquery, html, css, conditional, font-size

有没有办法在 CSS 或 jQuery 中基于 font-family 编写条件字体大小？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-05T12:24:17.107

并不真地。但在某种有限且相对无用的意义上，是的。

在 CSS 中，属性是相互独立的，除非 CSS 规范定义了关系。

在脚本中，你可以做很多事情，但是简单的 jQuery 方式，查询`css('font-family')`只给你*指定*的列表。如果你声明`font-family: Ariel, Helvetia, sansserif`（这个声明是故意破坏的，虽然形式上是有效的），它会给你 string `Ariel, Helvetia, sansserif`，即使这些字体实际上都没有用于元素。因此，这种方法对于最常见的用例（您想要使用字体列表，以涵盖不同的系统，并希望根据实际使用的字体来改变字体大小）是无用的。

在 JavaScript 中，有一些棘手的方法可以尝试找出元素实际使用的字体。它们通常基于评估某些文本的宽度并将结果与​​某些字体中该文本的宽度进行比较。

最后，还有一种合乎逻辑但支持不佳的使用[`font-size-adjust`](https://developer.mozilla.org/en-US/docs/CSS/font-size-adjust). 只有 Firefox 支持它，并且部分支持被严重破坏（它使用了错误的 x 高度信息；例如，[Verdana 的 x 高度](http://www.cs.tut.fi/~jkorpela/x-height.html)实际上是 0.545。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T11:54:03.523

Yes you can easyly with jquery:

[http://jsbin.com/acuzah/1/edit](http://jsbin.com/acuzah/1/edit)

```
if ($("div").css('font-family') === 'Arial')
{
  $("div").css({'color': '#00FF00'});
} 
```

Using css() you read the property font-family, check if its Arial for example, then set whatever css property you want. Or add a class.

[http://api.jquery.com/css/](http://api.jquery.com/css/)

[http://api.jquery.com/addClass/](http://api.jquery.com/addClass/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T11:59:19.220

```
if ($("div").css('font-family') === 'Arial')
{
  $("div").css({'font-size': '100px'});
} 
```

# java - 关闭 jframes 当前窗口而不是整个应用程序

> ID：14171356
> 
> 赞同：0
> 
> 时间：2013-01-05T11:33:10.453
> 
> 标签：java

我需要关闭我的应用程序当前窗口而不关闭整个应用程序我的代码如下设置一个可见的窗口但是当我单击右上角的红十字按钮时它会关闭所有当前打开的窗口

```
 private void lb_helpMouseClicked(java.awt.event.MouseEvent evt) {                                     
          new Reports().setVisible(true);
    }          
private void lb_certMouseClicked(java.awt.event.MouseEvent evt) {                                     
        new ChooseCert().setVisible(true);
    } 
private void lb_reportMouseClicked(java.awt.event.MouseEvent evt) {
        new Reports().setVisible(true);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T11:39:53.503

```
public void closeWindow() {
    WindowEvent wev = new WindowEvent(this, WindowEvent.WINDOW_CLOSING);
    Toolkit.getDefaultToolkit().getSystemEventQueue().postEvent(wev);

    setVisible(false);
    dispose();
}

public void closeApplication() {
    System.exit(0);
} 
```

之后只需调用适当的方法。

# dart - DART - 调整 div 元素大小事件

> ID：14171358
> 
> 赞同：2
> 
> 时间：2013-01-05T11:33:32.720
> 
> 标签：dart

我正在使用 CSS3`resize: vertical;`来允许用户调整 Div 的大小，并希望在发生这种情况时得到通知（以便我可以在必要时使用 Dart 代码调整其他元素的大小）。

如何为用户调整大小事件附加事件侦听器？（`DivElement.on.resize`不存在。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T18:02:36.667

当您想观察`on`getter 下未列出的事件时，可以使用[`$dom_addEventListener`](http://api.dartlang.org/docs/bleeding_edge/dart_html/Element.html#%24dom_addEventListener)设置事件侦听器。

因此，如果您想使用类似 unexisting 的东西`divElement.on.resize`，可以使用：

```
divElement.$dom_addEventListener("resize", (e) {
  // event occurs
}); 
```

也就是说，与`click`事件不同，`resize`事件似乎没有被触发（即使在*javascript*中）。

# c# - C#/SQL 解析错误

> ID：14171361
> 
> 赞同：0
> 
> 时间：2013-01-05T11:34:17.570
> 
> 标签：c#, sql, sql-server-ce

我正在尝试使用 C# 和 SQL 构建注册用户脚本。但是，当我尝试将用户详细信息添加到数据库时，我遇到了解析错误。此错误如下

```
There was an error parsing the query. [ Token line number = 1,Token line offset = 38,Token in error = = ]

Description: An unhandled exception occurred during the execution of the current web    request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.Data.SqlServerCe.SqlCeException: There was an error parsing the query. [ Token line number = 1,Token line offset = 38,Token in error = = ]

Source Error: 

Line 48:         {
Line 49:             var db = Database.Open("Database");
Line 50:             var users = db.QuerySingle("SELECT * FROM Users WHERE Username =  ", username);
Line 51:             if (users == null)
Line 52:             {

Source File: c:\Users\***\Documents\Visual Studio 2012\WebSites\CatSystem\Account\Login.cshtml    Line: 50 

Stack Trace: 

[SqlCeException (0x80004005): There was an error parsing the query. [ Token line number = 1,Token line offset = 38,Token in error = = ]]
   System.Data.SqlServerCe.SqlCeCommand.ProcessResults(Int32 hr) +136
   System.Data.SqlServerCe.SqlCeCommand.CompileQueryPlan() +798
   System.Data.SqlServerCe.SqlCeCommand.ExecuteCommand(CommandBehavior behavior, String method, ResultSetOptions options) +363
   System.Data.SqlServerCe.SqlCeCommand.ExecuteReader(CommandBehavior behavior) +59
   System.Data.SqlServerCe.SqlCeCommand.ExecuteDbDataReader(CommandBehavior behavior) +41
   System.Data.Common.DbCommand.ExecuteReader() +12
   WebMatrix.Data.<QueryInternal>d__0.MoveNext() +152
   System.Linq.Enumerable.FirstOrDefault(IEnumerable`1 source) +164
   WebMatrix.Data.Database.QuerySingle(String commandText, Object[] args) +103
   ASP._Page_Account_Login_cshtml.Execute() in c:\Users\***\Documents\Visual Studio 2012\WebSites\CatSystem\Account\Login.cshtml:50
   System.Web.WebPages.WebPageBase.ExecutePageHierarchy() +197
   System.Web.WebPages.WebPage.ExecutePageHierarchy(IEnumerable`1 executors) +69
   System.Web.WebPages.WebPage.ExecutePageHierarchy() +151
   System.Web.WebPages.StartPage.RunPage() +17
   System.Web.WebPages.StartPage.ExecutePageHierarchy() +62
   System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext,     TextWriter writer, WebPageRenderingBase startPage) +76
   System.Web.WebPages.WebPageHttpHandler.ProcessRequestInternal(HttpContext context) +249

Version Information: Microsoft .NET Framework Version:4.0.30319; ASP.NET     Version:4.0.30319.18010 
```

我正在使用的脚本是

```
@{// Initialize page
var email = "";
var username = "";
var password = "";
var confirmPassword = "";
var firstname = "";
var lastname = "";
var housenumberorname = "";
var street = "";
var city = "";
var county = "";
var postcode = "";
var tel = "";
var mobile = "";
var dob = "";
var ErrorMessage = "";

// If this is a POST request, validate and process data
if (IsPost)
{
    email = Request.Form["email"];
    username = Request.Form["username"];
    password = Request.Form["password"];
    confirmPassword = Request.Form["confirmPassword"];
    firstname = Request.Form["firstname"];
    lastname = Request.Form["lastname"];
    housenumberorname = Request.Form["housenumberorname"];
    street = Request.Form["street"];
    city = Request.Form["city"];
    county = Request.Form["county"];
    postcode = Request.Form["postcode"];
    tel = Request.Form["tel"];
    mobile = Request.Form["mobile"];
    dob = Request.Form["dob"]; 

    if (username.IsEmpty() || password.IsEmpty()) {
        ErrorMessage = "You must specify both email and password.";
    } 

    if (password != confirmPassword) 
    {
        ErrorMessage = "Password and confirmation do not match.";
    }

    // If all information is valid, create a new account
    if (ErrorMessage=="")
    {
        var db = Database.Open("Database");
        var user = db.QuerySingle("SELECT * FROM Users WHERE Username = ", username);
        if (user == null)
        {
            db.Execute("INSERT INTO User (Username, Password, Firstname, Lastname, House, Street, City, County, Postscode, Tel, Mobile, Email, Dob) VALUES (@0, @1, @2, @3, @4, @5, @6, @7, @8, @9, @10, @11, @12)", username, password, firstname, lastname, housenumberorname, street, city, county, postcode, tel, mobile, email, dob);
            WebSecurity.CreateAccount(username, password, false);

            // Navigate back to the homepage and exit
            Response.Redirect("~/");
        } 
        else 
        {
            ErrorMessage = "Email address is already in use.";
        }
    }
}
}

@if (ErrorMessage!="")
{
<p>@ErrorMessage</p> 
<p>Please correct the errors and try again.</p>
} 
```

我认为 SQL 命令有问题，但由于我不熟悉 MS SQL，所以我看不到问题所在。对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T11:35:41.157

SQL 无效。如果`Username`是 a `VARCHAR`or`CHAR`类型，则需要将值括在 中`'`，尽管更好的选择是使用[参数化查询](https://stackoverflow.com/questions/1836016/sqlserverce-problem-with-parameterized-queries-from-net)，因为使用字符串连接/格式化意味着您的应用程序对[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)开放。

```
var users = db.QuerySingle(
               string.Format("SELECT * FROM Users WHERE Username = '{0}'", 
                             username)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T11:39:13.540

您应该更改代码以使用插入中的参数化：

```
var user = db.QuerySingle("SELECT * FROM Users WHERE Username = @0", username); 
```

目前您的查询不包含用户名，`username`它只是

```
SELECT * FROM Users WHERE Username = 
```

这是无效的语法。

来自：[http ://wekeroad.com/2011/01/13/someone-hit-their-head](http://wekeroad.com/2011/01/13/someone-hit-their-head)

```
var db = Database.Open("TDL");
var selectQueryString = "SELECT * FROM Articles WHERE slug = @0";
show =  db.QuerySingle(selectQueryString, slug); 
```

# c# - 从控制台窗口（C++ 应用程序）重定向到文本框（C# 应用程序）

> ID：14171363
> 
> 赞同：3
> 
> 时间：2013-01-05T11:34:33.187
> 
> 标签：c#, c++, winapi, findwindow

我正在创建需要运行另一个应用程序的应用程序（C#）。这个。应用程序是游戏（C++，Directx7，GDI，我没有源代码），它显示用于从 dll（静态）进行调试的控制台窗口。对于显示控制台窗口，此 dll 具有以下行：

```
AllocConsole();
freopen("CONIN$","rb",stdin);   
freopen("CONOUT$","wb",stdout);
freopen("CONOUT$","wb",stderr); 
```

在我的 c# 应用程序中。我想隐藏控制台窗口并将文本从控制台窗口重定向到文本框。对于隐藏控制台窗口，我使用的是 winapi **FindWindow**，**ShowWindow**没有问题。但是我如何将文本（输出）从控制台窗口重定向到文本框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T12:24:57.297

您可以使用以下代码运行游戏：

```
 Process process = new Process();
     process.StartInfo.FileName = "\"" + pathToGame + "\"";
     //process.StartInfo.Arguments = args;
     process.StartInfo.RedirectStandardOutput = true;
     process.StartInfo.RedirectStandardError = true;
     process.StartInfo.UseShellExecute = false;
     process.OutputDataReceived += new DataReceivedEventHandler(ReadOutput);
     process.ErrorDataReceived += new DataReceivedEventHandler(ReadOutput);

     process.Start();
     process.BeginOutputReadLine();
     process.BeginErrorReadLine();

     //process.WaitForExit(); 
```

CL 输出和错误将出现在此处

```
 private static void ReadOutput(object sender, DataReceivedEventArgs e)
  {
     if (e.Data != null)
     {
        //your output here
     }
  } 
```

# udp - NTP 请求包

> ID：14171366
> 
> 赞同：7
> 
> 时间：2013-01-05T11:35:07.180
> 
> 标签：udp, request, ntp, cortex-m3, lwip

我试图弄清楚我需要在 NTP 请求包中发送（客户端）什么以从服务器检索 NTP 包。我正在使用 Cortex M3 上的 LWIP，Stellaris LM3S6965

我知道我将收到一个 UDP 标头，然后是具有不同时间戳的 NTP 协议以消除延迟。我可能需要制作一个 UDP 标头，但我需要添加什么作为数据？

线鲨图片： ![在此处输入图像描述](../Images/849d0c91cbc4f07942a6a2e4e1377509.png)

我希望你们能帮助我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-05-22T23:20:44.810

客户端请求数据包与服务器回复数据包相同 - 只需将第一个字中的 MODE 位设置为 3（客户端）即可。

将整个 48 字节的数据包发送到服务器，它会以相同的方式回复。

最简单的数据包是 0x1B 后跟 47 个零。（版本 = 3，模式 = 3）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T11:47:42.713

这是给初学者的：[http ://www.eecis.udel.edu/~mills/ntp/html/warp.html](http://www.eecis.udel.edu/%7Emills/ntp/html/warp.html)

如果您还没有，请检查一下：[https ://www.rfc-editor.org/rfc/rfc5905](https://www.rfc-editor.org/rfc/rfc5905)

然后看看这个：[http](http://wiki.wireshark.org/NTP) : //wiki.wireshark.org/NTP 并查看他们上传的示例 pcap 文件。

我不确定这是否有帮助，但我希望如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-14T01:46:01.183

我在这里使用此代码编写了一个 Arduino 以连接到 NTP 服务器，

[http://www.instructables.com/id/Arduino-Internet-Time-Client/step2/Code/](http://www.instructables.com/id/Arduino-Internet-Time-Client/step2/Code/)

查看名为 getTimeAndDate 和 sendNTPpacket 的方法。

那就是发送的数据包。这是设置缓冲区并显示在 48 个字符的缓冲区中设置了二进制 (0b) 和十六进制 (0x)。地址是NTP时间服务器，

```
memset(packetBuffer, 0, NTP_PACKET_SIZE);
packetBuffer[0] = 0b11100011;
packetBuffer[1] = 0;
packetBuffer[2] = 6;
packetBuffer[3] = 0xEC;
packetBuffer[12]  = 49;
packetBuffer[13]  = 0x4E;
packetBuffer[14]  = 49;
packetBuffer[15]  = 52;                 
Udp.beginPacket(address, 123);
Udp.write(packetBuffer,NTP_PACKET_SIZE);
Udp.endPacket(); 
```

这是收到的数据包发生的情况，

```
Udp.read(packetBuffer,NTP_PACKET_SIZE);  // read the packet into the buffer
unsigned long highWord, lowWord, epoch;
highWord = word(packetBuffer[40], packetBuffer[41]);
lowWord = word(packetBuffer[42], packetBuffer[43]); 
epoch = highWord << 16 | lowWord;
epoch = epoch - 2208988800 + timeZoneOffset;
flag=1;
setTime(epoch); 
```

setTime 是 arduino 时间库的一部分，因此纪元应该是自 1900 年 1 月 1 日以来的秒数，如此处建议（搜索纪元），

[https://en.wikipedia.org/wiki/Network_Time_Protocol](https://en.wikipedia.org/wiki/Network_Time_Protocol)

但是如果你想要一个 C# 版本，我在这里找到了这个，在例外答案下编译了代码并且它可以工作。这可能对您更有意义，并且确实显示了 epoch 1/1/1900 的使用。

[如何使用 C# 查询 NTP 服务器？](https://stackoverflow.com/questions/1193955/how-to-query-an-ntp-server-using-c)

很容易看出相似之处。

# c# - C#：字符串连接不起作用

> ID：14171368
> 
> 赞同：1
> 
> 时间：2013-01-05T11:35:13.607
> 
> 标签：c#, string, concatenation

今天我遇到了一个以前从未遇到过的问题。我正在尝试从 Windows 注册表中的值检查文件是否存在。更具体地说，我从 Flight Simulator 获取安装路径并检查是否安装了模块。

我得到注册表项就好了，它被转换为一个字符串（从一个对象），但我似乎无法在它之后连接文件名（之前很好）。

```
RegistryKey pRegKey = Registry.CurrentUser;
pRegKey = pRegKey.OpenSubKey(@"Software\Microsoft\Microsoft Games\Flight Simulator\10.0");
string fSPath = pRegKey.GetValue("AppPath").ToString(); // Receives "S:/Apps/FSX/" 
```

如果我显示这样的消息框，它不会连接：

```
MessageBox.Show(fSPath + "Modules"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T12:04:42.553

尝试其他重载方法[`GetValue`](http://msdn.microsoft.com/en-us/library/3b7w04dz.aspx)：

```
GetValue Method (String, Object)
GetValue Method (String, Object, RegistryValueOptions) 
```

并使用[`RegistryKey.GetValueKind`](http://msdn.microsoft.com/en-us/library/microsoft.win32.registrykey.getvaluekind.aspx)方法获取与指定名称关联的值的注册表数据类型。

我们有[三种](http://msdn.microsoft.com/en-us/library/microsoft.win32.registryvaluekind.aspx)用于字符串的注册表数据类型：

> ***`String`***以 null 结尾的字符串。此值等效于`Win32 API`注册表数据类型`REG_SZ`。
> 
> ***`ExpandString`***一个以 null 结尾的字符串，其中包含对环境变量的未扩展引用，例如`%PATH%`，在检索值时会扩展这些引用。此值等效于`Win32 API`注册表数据类型`REG_EXPAND_SZ`。
> 
> ***`MultiString`*** 一个以空字符结尾的字符串数组，以两个空字符结尾。此值等效于`Win32 API`注册表数据类型`REG_MULTI_SZ`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T11:48:00.103

添加以下行：

```
string fSPath = fsPath.Replace("\0",""); 
```

在使用消息框之前。

# python - 将日期转换为数字 python

> ID：14171370
> 
> 赞同：4
> 
> 时间：2013-01-05T11:35:16.937
> 
> 标签：python, matlab, datetime

> **可能重复：**
> [在 python 中从浮点数中获取日期时间，反之亦然](https://stackoverflow.com/questions/6706231/fetching-datetime-from-float-and-vice-versa-in-python)

`Matlab`像许多人一样，我从`Python`. `Matlab`将每个日期表示为一个数字。（`Integers`是从 开始的天数`00-00-0000`，分数是一天中的时间）。我相信`python`除了开始日期不同之外，这样做也是一样的`0-0-0001`

我一直在玩`datetime`，但似乎无法摆脱`datetime`物体和`timedeltas`。我确信这很简单，但是我如何使用普通的旧数字（浮点数）？

也许作为一个背景：

我引入了日期和时间戳并将它们连接起来以产生一个时间值：

```
from datetime import datetime
date_object1 = datetime.strptime(date[1][0] + ' ' + date[1][1], '%Y-%m-%d %H:%M:%S')
date_object2 = datetime.strptime(date[2][0] + ' ' + date[2][1], '%Y-%m-%d %H:%M:%S') 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-05T11:51:23.240

Try this out:

```
import time
from datetime import datetime

t = datetime.now()
t1 = t.timetuple()

print time.mktime(t1) 
```

It prints out a decimal representation of your date.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T11:42:55.777

[datetime](http://docs.python.org/3.3/library/datetime.html#datetime-objects)类提供两种方法，[datetime.timestamp()](http://docs.python.org/3.3/library/datetime.html#datetime.datetime.timestamp)为您提供 a`float`和 [datetime.fromtimestamp(timestamp)](http://docs.python.org/3.3/library/datetime.html#datetime.datetime.fromtimestamp//docs.python.org/3.3/library/datetime.html#datetime.date.fromtimestamp)进行反向转换。要获取与当前时间相对应的时间戳，您可以使用[time.time()](http://docs.python.org/3.3/library/time.html#time.time)函数。

请注意，POSIX 纪元是 1970-01-01。

# cloud-foundry - CloudFoundry 实例。vmc 错误：“拒绝：不允许操作”

> ID：14171376
> 
> 赞同：0
> 
> 时间：2013-01-05T11:36:12.920
> 
> 标签：cloud-foundry, vmc

我使用 uaa 设置在 vSphere 之上部署了自己的 Cloud Foundry 实例：

```
uaa:
    catalina_opts: -Xmx768m -XX:MaxPermSize=256m
    jwt:
      signing_key: |
        -----BEGIN RSA PRIVATE KEY-----
        My key
        -----END RSA PRIVATE KEY-----
      verification_key: |
        -----BEGIN PUBLIC KEY-----
        My key
        -----END PUBLIC KEY-----
    cc:
      token_secret: aaabxaiC371JM
      client_secret: aaaF5DMNDZIfCb9A
    clients:
      dashboard:
        secret: aaauKyUCZF53kBKS
        scope: openid,dashboard.user
        authorities: uaa.admin,uaa.resource,tokens.read,scim.read,scim.write
        authorized-grant-types: client_credentials,authorization_code,refresh_token
    admin:
      client_secret: aaa5fER8evgEisjj
    login:
      client_secret: aaad2FyZS5jb20iL
    batch:
      username: aaaH2AKay2jAc
      password: aaaTiplI5Q83n
    scim:
      users:
      - b29|admin|openid,dashboard.user 
```

我可以登录到我的实例，但我的所有命令（vmc push、vmc delete-user 等）都因此错误而完成：

```
FAILED
Denied: Operation not permitted 
```

是uaa配置错误吗？云控制器和 uaa 关系中的一些问题？

# javascript - fabricjs 删除背景图片

> ID：14171378
> 
> 赞同：7
> 
> 时间：2013-01-05T11:36:21.557
> 
> 标签：javascript, html, html5-canvas, fabricjs

是否可以在设置后删除背景`fabric.Canvas`图像：

```
canvas.setBackgroundImage('img_url',function() { 
    canvas.renderAll(); 
```

或者只是回到标准背景？设置`backgroundColor`为`white`不起作用。

感谢您的帮助！问候马克斯

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-05T12:40:07.527

这是来自`renderAll`函数的片段`fabric.Canvas`；

```
...
if (this.backgroundColor) {
    canvasToDrawOn.fillStyle = this.backgroundColor;
    canvasToDrawOn.fillRect(0, 0, this.width, this.height);
}

if (typeof this.backgroundImage === 'object') {
    this._drawBackroundImage(canvasToDrawOn);
}
... 
```

显然，实际上，当您这样做时，背景颜色被设置为白色`canvas.backgroundColor = white;`。但是，因为`canvas.backgroundImage`它仍然是一个`Image`对象，所以它被绘制在您填充背景的任何颜色上。

因此，当您不想`backgroundImage`绘制 时，需要将其设置为`0`. 它不适用于`null`，因为`typeof this.backgroundImage === 'object'`仍然评估为`true`in `renderAll`，提示`backgroundImage`被绘制。不过，它适用于`canvas.backgroundImage = 0;`。

**[例子](http://jsfiddle.net/EQEBT/)**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-07-29T21:50:00.497

嗨，我的**FabricJs**版本是**4.5.1**

这两种解决方案都不适合我。因为我在织物类型中使用有角度的**FabricJs**。

当我检查 FabricJs 源代码时，我找到了解决方案。

我们可以简单地

> 设置背景图像

有一个空的

> Fabric.Image 对象。

这样我们就可以实现**删除背景图片**的功能。

这是可用于此解决方案的代码片段。

```
const image = new fabric.Image('');
canvas.setBackgroundImage(image, canvas.renderAll.bind(canvas)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-22T05:41:06.570

将背景图像设置为`null`将删除它。

```
canvas.setBackgroundImage(null, canvas.renderAll.bind(canvas)); 
```

您还可以编写这样的函数来清除背景图像和背景颜色，这很方便。

```
function clearCanvasBackground() {
  if (canvas) {
    canvas.setBackgroundImage(null);
    canvas.setBackgroundColor('');
    canvas.renderAll();
  }
} 
```

# android - TableRow 高度不会根据 android TableLayout 中的内容增加？

> ID：14171381
> 
> 赞同：2
> 
> 时间：2013-01-05T11:37:00.517
> 
> 标签：android, android-layout, android-tablelayout

我在具有三个 TableRow 元素的 Android 中使用 TableLayout。每个 TableRow 元素都有两个子元素（都是 TextView）。我的问题是，当我将数据放入这些 TextView 时，单元格的高度不会根据内容及其显示不完整的数据。我的 xml 如下所示：

```
<TableLayout
        android:id="@+id/pTable"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_marginLeft="5.0dip"
        android:layout_marginRight="5.0dip"
        android:layout_marginTop="10.0dip" >

        <TableRow
            android:id="@+id/fHeader"
            android:background="@drawable/uppar"
            android:padding="10.0dip" >

            <ImageView
                android:id="@+id/fImage"
                android:src="@drawable/ic_bs" />

            <TextView
                android:id="@+id/fText"
                android:layout_gravity="center_vertical"
                android:text="Test"
                android:textColor="@color/black"
                android:textStyle="bold" />
        </TableRow>

        <TableRow
            android:id="@+id/feFrom"
            android:background="@drawable/middle"
            android:padding="5.0dip" >

            <TextView
                android:id="@+id/coloumnFrom"
                android:layout_marginLeft="10dp"
                android:text="From :"
                android:textStyle="bold" />

            <TextView
                android:id="@+id/coloumnFromValue"
                android:layout_marginLeft="20dp"
                android:text=""
                android:textStyle="bold" />
        </TableRow>

        <TableRow
            android:id="@+id/fDestination"
            android:background="@drawable/middle"
            android:padding="5.0dip" >

            <TextView
                android:id="@+id/coloumnDestination"
                android:text="To :"
                android:layout_marginLeft="10dp"
                android:textStyle="bold" />

            <TextView
                android:id="@+id/coloumnDestinationvalue"
                android:layout_marginLeft="20dp"
                android:text=""
                android:textStyle="bold" />
        </TableRow>

        <TableRow
            android:id="@+id/fVia"
            android:background="@drawable/middle"
            android:padding="5.0dip" >

            <TextView
                android:id="@+id/coloumnVia"
                android:layout_marginLeft="10dp"
                android:text="Via :"
                android:textStyle="bold" />

            <TextView
                android:id="@+id/coloumnViaValue"
                android:layout_marginLeft="20dp"
                android:text=""
                android:textStyle="bold" />
        </TableRow>
    </TableLayout> 
```

在第三个 TableRow 中，我有两个 TextView。一个有“Via”作为文本，另一个有 200 个字符的数据。但它只显示 70 个字符。我尝试增加单元格和行的高度，但没有任何效果。请帮助...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-22T13:27:40.430

这个话题还是真实的？

也许尝试为`android:layout_weight="1"`您的每个 TableRows 使用。它应该迫使他们以适当的方式扩展。

# javascript - 在jQuery中计算年龄

> ID：14171383
> 
> 赞同：-4
> 
> 时间：2013-01-05T11:37:03.053
> 
> 标签：javascript, jquery, html, date-arithmetic

嗨，我想在 jquery 中计算我的年龄。像这样的东西-

计算我的年龄，18 岁 4 个月 2 周 6 天 5 小时 17 分 8 秒

第二个计数器应该正在运行。可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T11:48:07.007

jQuery 可能不合适。试试 moment.js，你可以轻松地进行疯狂的日期操作。[http://momentjs.com/docs/#/manipulating/](http://momentjs.com/docs/#/manipulating/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T11:42:41.063

有可能的！做一个检查你的生日和现在之间的差异的函数。让它每秒运行一次

让它每秒运行一次，使用 setTimeout

[计时事件](http://www.w3schools.com/js/js_timing.asp)

# jquery - jQuery Flot 无法显示图表数据

> ID：14171385
> 
> 赞同：0
> 
> 时间：2013-01-05T11:37:14.210
> 
> 标签：jquery, flot

我正在使用出色的图表插件 Flot 将 html 页面中的字符串替换为图表。然而，不知何故，情节本身并没有显示出来。

占位符：

```
<div class="chart" id="example1" style="width:300px; height:150px">2009:12.90,2010:12.80,2011:13.90,2012:14.50</div>
<div class="chart" id="example2" style="width:300px;height:150px">1:2,2:1,3:6,4:3</div> 
```

jQuery 代码：

```
$(".chart").each(function(index, value) {

    var id = this.id;

    var obj = $("#" + id).html().split(",");
    var chartdata = [];

    $.each(obj, function(i, val) {
         chartdata[i] = "[" + val.replace(":","," ) + "]";
         console.log(val);
    });

    var thechart = chartdata.join(",");
    console.log(thechart);

    var d1 = "[" + thechart + "]";
    console.log("#" + id + " -> " + d1);

    $.plot($("#" + id), [
        {
            data: d1,
            lines: { show: true, fill: true }
        },
    ]);

 }); 
```

当我用实际数据替换 d1 时，它可以工作。我怀疑这与以字符串或其他形式呈现的数据有关。虽然不能正确。我不想将数据添加到 jquery 调用中，因为我使用的是 cms，因此用户可以在编辑页面时更改图表数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T15:03:04.923

是的，这是因为您将数据创建为一个大字符串，而不是一个值数组。以这一行为例：

```
chartdata[i] = "[" + val.replace(":","," ) + "]"; 
```

相反，您应该（大致）使用如下代码：

```
values = val.split(":");
chartdata[i] = [parseInt(values[0]), parseInt(values[1])]; 
```

剩下的大部分代码都是不必要的；obj 已经是一个列表。

你可以通过使用 jQuery 的 'map' 而不是 'each' 让整个事情变得更简单；那么你甚至不需要单独的图表数据变量；大致（未经测试）是这样的：

```
$(".chart").each(function() {

    var id = this.id;
    var data = $("#" + id).html().split(",");

    $.map(data, function(point) {
        return $.map(point.split(":"), function(value) {
            return parseInt(value);
        });
    });

    $.plot("#" + id, [{
        data: data,
        lines: {
            show: true,
            fill: true
        }
    }]);
}); 
```

# cocos2d-x - 为什么我们除以 2 getContentSize？

> ID：14171391
> 
> 赞同：0
> 
> 时间：2013-01-05T11:38:33.653
> 
> 标签：cocos2d-x

在[Cocos2d-x 教程](http://www.cocos2d-x.org/projects/cocos2d-x/wiki/Chapter_3_-_How_to_Move_a_sprite)中我们描述 actionMove的示例中

```
CCFiniteTimeAction* actionMove = 
CCMoveTo::create( (float)actualDuration, 
ccp(0 - target->getContentSize().width/2, actualY) ); 
```

我们设置一个点 ccp(0 - target->getContentSize().width/2, actualY)。如果我们有宽度为 20 的目标，那么我们有点 (-10, actualY)，并且一半的目标必须是可见的，但事实并非如此。为什么？

初始目标位置

```
target->setPosition( 
  ccp(winSize.width + (target->getContentSize().width/2), 
  actualY) ); 
```

这里我们也除以 2，但我理解它（winSize.width + 任意数字和目标变得不可见，在屏幕外）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T01:11:36.767

Cocos2d-x 使用对象的中心作为原点/锚点，而不是角点。因此，如果您希望一半对象在屏幕边缘可见，请使用：

```
ccp(0, actualY) 
```

或者

```
ccp(winSize.width) 
```

如果您希望对象完全离开屏幕，则添加一半的 contentSize。

# c++ - 使用异步调用与在线程中使用同步调用相同吗？

> ID：14171393
> 
> 赞同：2
> 
> 时间：2013-01-05T11:38:37.643
> 
> 标签：c++, multithreading, boost, asynchronous, boost-asio

我正在使用 boost 并且希望这样：

```
// --- some random function ---
boost::asio::io_service io;
boost::asio::ip::tcp::socket sock;
char b[256];
// connect and stuff here
boost::asio::async_read( sock,
    boost::asio::buffer(b, 256),
    boost::bind( &onRead, _1, _2)
    ); 
```

是一样的

```
// --- some random function ---
boost::asio::io_service io;
boost::asio::ip::tcp::socket sock;
boost::thread *read_thread;
char b[256];
// connect and stuff here
read_thread = new boost::thread( 
    boost::bind( &boost::asio::io_service::run, &( io))
    );
io.post( &read, b, sock);

// --- read function
bool read( char b[], boost::asio::ip::tcp::socket sock){
    boost::asio::read( sock,
        boost::asio::buffer(b, 256),
        boost::bind( &onRead, _1, _2)
        );
} 
```

我只是想在异步调用中发生什么以及它与同步有什么不同。

编辑：我的主要问题是：异步调用阻塞了与 io_service 绑定的线程？

编辑2：这解决了我的问题：[http ://www.ibm.com/developerworks/linux/library/l-async/?ca=dgr-lnxw02aUsingPOISIXAIOAPI](http://www.ibm.com/developerworks/linux/library/l-async/?ca=dgr-lnxw02aUsingPOISIXAIOAPI)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T11:43:50.467

同步调用在其工作完成后返回，工作结果可在下一条语句中获得。这样的调用很可能会*阻塞*。

异步调用立即返回，但工作状态不确定。工作完成后，注册的回调函数由 ioservice 调用，并且由于您在单独的线程中运行该服务，因此回调也在该单独的线程中运行。

异步编程在控制流方面要困难得多，但在性能方面要优越得多。如果读取和写入是服务器正在进行的操作的一部分，那么使用异步模型几乎总是更好（尽管这很可能是单线程的，而不是使用 Boost）。另一方面，运行一次并按顺序执行一堆事情的简单工具可能只使用同步调用，这更易于编写和理解，并且如果您需要等待操作的结果可能不会有什么不同反正。

# jquery - jQuery返回gridview方法

> ID：14171394
> 
> 赞同：0
> 
> 时间：2013-01-05T11:38:41.750
> 
> 标签：jquery, asp.net, gridview

```
<script type="text/javascript">
    jQuery(document).ready(function () {
        // note: the `Delete` is case sensitive and is the title of the button
        var DeleteButtons = jQuery('#<%= gvShoppingCart.ClientID %> :button[value=Delete]');
       DeleteButtons.each(function () {
           var onclick = jQuery(this).attr('onclick');
           jQuery(this).attr('onclick', null).click(function () {
               if (confirm("Are you sure you want to delete item from shopping cart?")) {
                   return onclick();
               }
               else {
                   return false;
               }
           });
       });
   });
</script> 
```

如果为true（而不是onclick（）），我如何更改上面的代码以返回下面的方法

```
 protected void gvShoppingCart_RowDeleting(object sender, GridViewDeleteEventArgs e)
    {
        //code here
    } 
```

编辑：下面的新代码 -

```
 <script type="text/javascript">
     jQuery(document).ready(function () {
         $('.deleteStyle').click(function () {
             return confirm("Are you sure you want to delete");
         });
     });
</script>
<style type="text/css">
    .deleteStyle
    {
    }
</style> 
```

网格视图删除：

```
<asp:CommandField ControlStyle-CssClass="deleteStyle" ShowDeleteButton="True" ButtonType="Button"   /> 
```

gvRoles_RowDeleting（注意我现在在 Roles Gridview 上测试它！）

```
protected void gvRoles_RowDeleting(object sender, GridViewDeleteEventArgs e)
    {
        BusinessLayer.Roles rls = new BusinessLayer.Roles();
        rls.deleteRole(rls.getRole(gvRoles.DataKeys[e.RowIndex].Value.ToString()));
        this.BindRoles();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T12:42:32.693

如果你决定使用 jQuery，这里有一个简单的例子：

## 示例 1：

请注意，对于此示例，您应该`ButtonType="Button"`从 CommandField中删除

```
 <script type="text/javascript">
        jQuery(document).ready(function () {
            $('.deleteStyle').click(function () {
                return confirm("Are you sure you want to delete item from shopping cart?");
            });
        });
    </script>
    <style type="text/css">
        .deleteStyle
        {
        }
    </style>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:GridView ID="gvShoppingCart" runat="server" OnRowDeleting="gvShoppingCart_RowDeleting">
            <Columns>
                <asp:CommandField ControlStyle-CssClass="deleteStyle" DeleteText="Delete" ShowDeleteButton="true" />
            </Columns>
        </asp:GridView>
    </div>
    </form>
</body> 
```

## 示例 2：

此示例向您展示如何使用以下方法实现相同的功能`ButtonType="Button"`：

只需将网格视图 ID 更改为所需的值；

```
<script type="text/javascript">
    jQuery(document).ready(function () {
        jQuery('#<%= gvShoppingCart.ClientID %> :button[value=Delete]').each(function () {
            var onclick = jQuery(this).attr('onclick');
            jQuery(this).attr('onclick', null).click(function () {
                var gridViewName = "gvShoppingCart";
                if (confirm("Are you sure you want to delete item from shopping cart?")) {
                    var deleteItem = onclick.replace("javascript:__doPostBack('gvShoppingCart','", "");
                    deleteItem = deleteItem.replace("')", "");
                    __doPostBack('gvShoppingCart', deleteItem);
                }
                else {
                    return false;
                }
            });
        });
    });
</script>

<asp:CommandField ShowDeleteButton="True" ButtonType="Button" /> 
```

# sql - 我想从一张桌子上找到第二个最高薪水的名字？

> ID：14171396
> 
> 赞同：-1
> 
> 时间：2013-01-05T11:39:04.520
> 
> 标签：sql, oracle10g

我是甲骨文的新手。

我想从一张桌子上找到第二个最高薪水的名字？

这里是示例表：

```
R.no    name       employee_id     salary
201     Sanjay      78781          1000
202     Mohan       78782          2500 
203     Viji        78783          5000
204     Vinay       78784          3000
205     Ishanth     78785          8000 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T11:46:54.870

```
select *
from (
   select name, 
          salary, 
          dense_rank() over (order by salary desc) as rnk
   from table_name
) t
where rnk = 2 
```

SQLFiddle 示例：[http ://sqlfiddle.com/#!4/e93c3/1](http://sqlfiddle.com/#!4/e93c3/1)

# stored-procedures - 使用 Oledb 提供程序的 Visual Foxpro 数据库存储过程

> ID：14171397
> 
> 赞同：1
> 
> 时间：2013-01-05T11:39:10.730
> 
> 标签：stored-procedures, visual-foxpro

我正在使用 Visual Foxpro 8.0 数据库。下面的过程我用来根据条件匹配从数据库返回记录，但它引发了错误：

> “功能未实现。”

Foxpro 程序 -------------

```
PROCEDURE FX_Proc_ValidateUser (paramUserName AS Character, paramPassword AS Character)
LOCAL VarUserName AS Character, varXml
VarUserName = IIF(VARTYPE(paramUserName)!="N","",paramUserName)
LOCAL VarPassword AS Character
VarPassword = IIF(VARTYPE(paramPassword)!="N","",paramPassword)
SELECT userinfoid, ;
        username, ;
        password ;
FROM tm_userinfo.dbf ;
WHERE username = VarUserName AND password = VarPassword ;
INTO CURSOR procResult  
varXml = ""
CURSORTOXML("procResult","varXml",1,32,0,"1")
RETURN varXml
ENDPROC 
```

调用此过程的前端代码------

```
string ConnectionString = "Provider=VFPOLEDB.1;Data Source=C:\Users\raj\Documents\Visual FoxPro Projects\dbFoxMaster.dbc;Collating Sequence=machine;" providerName="System.Data.OleDb.OleDbConnection, System.Data, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089";
OledbConnection objOleDbConnection = new OleDbConnection(ConnectionString);
objOleDbConnection.Open();
OleDbCommand objOleDbCommand = new OleDbCommand();
objOleDbCommand.CommandType = CommandType.StoredProcedure;
objOleDbCommand.CommandText = "FX_Proc_ValidateUser";
objOleDbCommand.Connection = objOleDbConnection;
objOleDbCommand.Parameters.Add("paramUserName", OleDbType.Char).Value = "abc";
objOleDbCommand.Parameters.Add("paramPassword", OleDbType.Char).Value = "123";
var xmlString = oOleDbCommand.ExecuteScalar().ToString();
    DataTable table = new DataTable();
    using (var reader = new StringReader(xmlString))
    {
        var dataSet = new DataSet();

        // creating a dataset from the xml 
        dataSet.ReadXml(reader);
        table = dataSet.Tables[0];
    } 
```

如何使用 OledbCommand 从 foxpro 8.0 存储过程中获取结果集？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T21:17:24.410

看起来问题在于您将结果放入数组中，并且只返回数组中的第一项。您应该更改存储过程，以便它使用游标。

VFP9 示例

下面是来自 northwind.dbc 的存储过程示例： ![在此处输入图像描述](../Images/36bc53987a2623e314cd70b80edb1f1c.png)

以下是使用 C# 调用存储过程的示例：

```
var northwindDbcPath = @"C:\Program Files (x86)\Microsoft Visual FoxPro 9\Samples\Northwind\Northwind.dbc";
var connectionString = "Provider=VFPOLEDB.1;Data Source=" + northwindDbcPath;
var table = new DataTable();

using(var connection = new OleDbConnection(connectionString)) {
    using(var command = connection.CreateCommand()) {
        command.CommandType = CommandType.StoredProcedure;
        command.CommandText = "CustOrdersDetail";
        command.Parameters.Add("x", 10248);

        var adapter = new OleDbDataAdapter(command);

        adapter.Fill(table);
    }
} 
```

VFP8 示例：（我没有 VFP8 的副本，但我相信这会起作用） ![在此处输入图像描述](../Images/aff957156c4b35bf8787e24430a0975d.png)

```
var northwindDbcPath = @"C:\Program Files (x86)\Microsoft Visual FoxPro 9\Samples\Northwind\Northwind.dbc";
var connectionString = "Provider=VFPOLEDB.1;Data Source=" + northwindDbcPath;
DataTable table;

using(var connection = new OleDbConnection(connectionString)) {
    using(var command = connection.CreateCommand()) {
        command.CommandType = CommandType.StoredProcedure;
        command.CommandText = "CustOrdersDetail2";
        command.Parameters.AddWithValue("x", 10248);

        connection.Open();      
        // executing stored procedure and getting xml result
        var xml = command.ExecuteScalar() as string;

        connection.Close();

        using(var reader = new StringReader(xml)) {
            var dataSet = new DataSet();

            // creating a dataset from the xml 
            dataSet.ReadXml(reader);
            table = dataSet.Tables[0];
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T13:38:04.700

我没有 VFP，我上次使用 VFP 时仍然是 3.0 版...

我会根据[这里](http://msdn.microsoft.com/en-us/library/aa978148%28v=vs.71%29.aspx)的规格尝试这样的事情。[在这里](http://msdn.microsoft.com/en-us/library/aa975325%28v=vs.71%29.aspx)学习其余的阅读

```
PROCEDURE insertData (pusername, ppassword)

                    SELECT userinfoid, username, password 
                    FROM tm_userinfo.dbf 
                    WHERE username = pusername AND password = ppassword
                    INTO ARRAY results
     RETURN results
ENDPROC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T01:23:43.007

Visual Foxpro 存储过程基本上是使用 Visual Foxpro 代码来执行任务，例如在插入或更新或删除时验证列。

例如，您可以将以下代码添加到 VFP 数据库存储过程以验证“状态”列：

```
PROCEDURE ValidateState()
IF address.state <> [OH]
    MESSAGEBOX([Incorrect State value!], 48, [Invalid State])
ENDIF
ENDPROC 
```

要查询 Foxpro 数据库中的表，您可能需要查看创建本地视图。您可以通过右键单击 foxpro 数据库并选择“新建本地视图”来执行此操作，然后使用查询生成器定义您的视图。在“过滤器”选项卡的“示例”列下，您可以使用“？”定义参数 例如“？用户名”。

下面是从 Foxpro 代码调用视图的方法：

```
 LOCAL pusername AS Integer   
 pusername = "SomeUserName"    &&Use this to filter the view
 SELECT 0
 USE MyViewName       &&This will call the view and perform the filter. 
```

您还可以使这些视图可更新并针对视图执行插入操作。

# css - CSS3动画悬停状态并返回

> ID：14171401
> 
> 赞同：1
> 
> 时间：2013-01-05T11:39:21.167
> 
> 标签：css, css-transitions, css-animations

我需要一个最初没有动画的元素，然后在悬停时动画到不同的状态（一次，没有循环），在悬停后它应该动画回到原来的状态。

基本上就像你用`:hover`style 和`transition`.

有没有办法通过 CSS3 动画实现这一点？

这是我当前的用例：http: [//jsfiddle.net/yjD73/11/](http://jsfiddle.net/yjD73/11/)

在悬停时，元素会从 opacity: 0 淡化到 opacity: 1 并返回。这是我认为过渡不可能做到的。

编辑：按照这里的要求，来自 jsfiddle 的确切代码

一个`div`有四个图像

```
<div class="zoombox">
    <img src="http://maps.googleapis.com/maps/api/staticmap?sensor=false&size=300x300&maptype=hybrid&zoom=4&center=51.561998,-1.605100">
    <img src="http://maps.googleapis.com/maps/api/staticmap?sensor=false&size=300x300&maptype=hybrid&zoom=7&center=51.561998,-1.605100">
    <img src="http://maps.googleapis.com/maps/api/staticmap?sensor=false&size=300x300&maptype=hybrid&zoom=12&center=51.561998,-1.605100">
    <img src="http://maps.googleapis.com/maps/api/staticmap?sensor=false&size=300x300&maptype=hybrid&zoom=16&center=51.562606,-1.605100">
</div> 
```

相互堆叠的图像和悬停时的简单 CSS 动画

```
.zoombox {
  position: relative;
  margin: 50px;
  float: left;
}

/* initial state */
.zoombox img:not(:first-child) {
  position: absolute;
  top: 0;
  opacity: 0;
}

/* On hover in */
.zoombox:hover img:nth-child(1) {
  -webkit-animation: first-in 400ms 0ms 1 normal ease-in both;
}

.zoombox:hover img:nth-child(2) {
  -webkit-animation: middle-in 1600ms 0ms 1 linear both;
}

.zoombox:hover img:nth-child(3) {
  -webkit-animation: middle-in 1600ms 1200ms 1 linear both;
}

.zoombox:hover img:nth-child(4) {
  -webkit-animation: last-in 400ms 2400ms 1 linear both;
}

@-webkit-keyframes first-in {
  0% {
    -webkit-transform: scale(1);
    opacity: 1;
  }
  100% {
    -webkit-transform: scale(1.5);
    opacity: 0;
  }
}

@-webkit-keyframes middle-in {
  0% {
    -webkit-transform: scale(0.5);
    opacity: 0;
  }
  25%, 75% {
    -webkit-transform: scale(1);
    opacity: 1;
  }
  100% {
    -webkit-transform: scale(1.5);
    opacity: 0;
  }
}

@-webkit-keyframes last-in {
  0% {
    -webkit-transform: scale(0.5);
    opacity: 0;
  }
  100% {
    -webkit-transform: scale(1);
    opacity: 1;
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T22:10:18.960

Conic，我创建了一个 JSFiddle，它可以通过 css3 动画复制您想要的大部分内容。

## [这里是。](http://jsfiddle.net/nbatothemax/bttDX/13/)

在 CSS 中使这一切成为可能的代码是：

```
@-webkit-keyframes changeImage {
  0%  {background: url("http://maps.googleapis.com/maps/api/staticmap?sensor=false&size=300x300&maptype=hybrid&zoom=4&center=51.561998,-1.605100");}
  33%  {background: url("http://maps.googleapis.com/maps/api/staticmap?sensor=false&size=300x300&maptype=hybrid&zoom=7&center=51.561998,-1.605100");}
  67%  {background: url("http://maps.googleapis.com/maps/api/staticmap?sensor=false&size=300x300&maptype=hybrid&zoom=12&center=51.561998,-1.605100");}
  100% {background: url("http://maps.googleapis.com/maps/api/staticmap?sensor=false&size=300x300&maptype=hybrid&zoom=16&center=51.562606,-1.605100");}
} 
```

现在，jsfiddle 正在让图像在悬停时通过动画并返回到原始图像。让我知道您是否需要发生任何事情，顺便说一下，由于缺乏悬停状态的可能性，这在任何触摸设备上都不起作用。

# mongoose - 下划线：比较猫鼬 ob jectIds 失败

> ID：14171403
> 
> 赞同：1
> 
> 时间：2013-01-05T11:39:23.837
> 
> 标签：mongoose, underscore.js

我在比较 mongoose ObjectId 或它们的 String 值时遇到问题。

我有两个数组，第一个是：

```
a = [
"50dfb24123c43a501400000e",
"50d1bda330eb531c1400000d",
"50d1bdcf30eb531c1400000f",
"50d1beac30eb531c14000012",
"50dfb26223c43a501400000f"
] 
```

第二个是：

```
b = [
"50dfb26223c43a501400000f"
] 
```

running`_.intersection(a,b)`给了我一个空数组`[]`，而不是`b`.

a 和 b 的值`_.pluck`来自 Mongoose 模型返回的结果。我尝试将每个数组值转换为字符串，但我仍然得到空数组的相同结果。

我搜索了类似的问题，但我发现的解决方案没有帮助（即转换为字符串）。

有什么我想念的吗？我知道问题出在 Mongoose ObjectIds 上，因为如果我与上面粘贴的原始数组相交，我会得到正确的结果。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-03-04T16:35:30.830

在 lodash4 中，您现在可以这样做：

```
_.intersectionWith(a, b, _.isEqual) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T16:42:33.563

在这种情况下，您不能使用`_.intersection`with 数组，`ObjectId`因为`intersection`使用简单的引用相等来比较元素，而不是比较它们的内容。要比较两个`ObjectId`s 是否相等，您需要使用该`ObjectId.equals`方法。

所以最简单的解决方案是将数组转换为字符串，这样`intersection`就可以了。我知道你说过你试过了，但你可能在某个地方有一个错误，因为它确实有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-05T06:22:28.620

您可以使用 _.isEqual(object, other) 来测试 2 个 mongoose ObjectID 是否具有相同的内容。

例如，

```
var ret=[];
_.each(b,function(x){
    ret.push(_.filter(a,function(y){
        return _.isEqual(x,y);
    }))
}) 
```

现在，您应该将 ret 包含“50dfb26223c43a501400000f”作为 Mongoose 的 ObjectId 的数据类型。

# asp.net-mvc-3 - 如何在 VIEW MVC3 Razor 中显示 webforms 页面 .aspx

> ID：14171404
> 
> 赞同：7
> 
> 时间：2013-01-05T11:39:49.827
> 
> 标签：asp.net-mvc-3, webforms, reporting-services

我的项目是在 MVC3 Razor Tech 中开发的。我的母版页和内容页是使用 Razor MVC3 开发的。我想在我的项目中显示一个 SSRS 报告生成器。我在博客中搜索并得知我们无法在 MVC3 Razor 中显示 SSRS 报告。由于我们可以`'webform'`在 MVC3 中使用，我们可以显示报告。

问题：在我的项目中，母版页和内容页都是用 Razor 开发的，`.cshtml`因为访问`.aspx`很困难。如果我错了，请纠正我。

要求：请帮助我在`'VIEW'`MVC3 Razor 框架中显示网络表单。即我的项目登录页面是`webform`. 在该网页表单页面中，我需要显示 SSRS 报告

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-05T12:03:58.913

我必须这样做，所以我为我工作：

假设您有一个名为**Summary**的控制器。对于此实施，您无需添加或修改您拥有的任何操作。

然后，正如您告诉我的，您在视图文件夹中添加一个名为“SkillReport.aspx”的文件

```
 Views/Summary/SkillReport.aspx 
```

（最初留在空白 SkillReport.aspx 或只是添加一些文本，如“技能报告”）

在 Global.asax 中：

```
 public static void RegisterRoutes(RouteCollection routes)
    {
       routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

       routes.MapPageRoute("Report", "Report/{rptController}/{rptName}", "~/Views/{rptController}/{rptName}.aspx");
       ...
    } 
```

> > ****--> 我附上了我的解决方案资源管理器的快照 ![enter image description here](../Images/65ea949db8f3f09fe91e276576d47b36.png) 我的 routes.Mappageroute 代码是 " *routes.MapPageRoute("Report", "Report/Summary", "~/Views/Summary/SkillReport.aspx");* " 请更改上述文件夹结构的 mapPageRoute。** <--

The values ​​enclosed in **{}** are **placeholders**. You must not give the name of the controller or report there. When a request is received, this route determines which controller to invoke by adding the suffix "rptController" to the controller value in the URL to determine the type name of the controller that will handle the request. The *rptName* value in the URL determines which *WebForm.aspx* to call.

Suppose you need other two reports.

1.  In **Summary** controller, and report name *FullNames*
2.  In a controller named **Product**, and report name *List*.

Using the parameters you avoid having to create a route for each report.

```
routes.MapPageRoute("Report", "Report/{rptController}/{rptName}", "~/Views/{rptController}/{rptName}.aspx");

http://localhost/Report/Summary/SkillReport  --> /Views/Summary/SkillReport.aspx
http://localhost/Report/Summary/FullNames    --> /Views/Summary/FullNames.aspx
http://localhost/Report/Product/List         --> /Views/Product/List.aspx 
```

On this route we added:

1.  "Report" is the name of this route, you can put any other

2.  "Report/**{rptController}**/*{rptName}*" : This is the pattern URL to identify when to invoke your Report-WebForm, "Report" works as "key" and **{rptController}** is the name of the controller. rptController will be assigned with the Controller name. In this case **Summary** and *rptName* with *SkillReport*

3.  "~/Views/**{rptController}**/*{rptName}*.aspx" is the physical path. When using this route with **Summary** controller, and call *SkillReport* this will invoke to Views/**Summary**/*SkillReport*.aspx

Routing documentation: [http://msdn.microsoft.com/en-us/library/cc668201(v=vs.100).aspx#url_patterns](http://msdn.microsoft.com/en-us/library/cc668201(v=vs.100).aspx#url_patterns)

At this point you can verify that you can access your SkillReport.aspx in your development environment using :

```
http://localhost/Report/Summary/SkillReport 
```

Or maybe at some particular port... like

```
http://localhost:1057/Report/Summary/SkillReport 
```

Finally, SkillReport.aspx (like this... check ProcessingMode...)

```
 <%@ Page Language="C#" AutoEventWireup="true" CodeBehind="SkillReport.aspx.cs" Inherits="XXX.SkillReport" %>

    <%@ Register Assembly="Microsoft.ReportViewer.WebForms, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"
        Namespace="Microsoft.Reporting.WebForms" TagPrefix="rsweb" %>

    <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" >

    <html xmlns="http://www.w3.org/1999/xhtml">
    <head runat="server">
        <title></title>
        <meta http-equiv="X-UA-Compatible" content="IE=100"/>
    </head>
    <body>
        <form id="frmRpt" runat="server">
        <div>
            <asp:ScriptManager ID="sm" runat="server">
            </asp:ScriptManager>
            <rsweb:ReportViewer ID="rpt" runat="server" Width="100%" Height="90%" AsyncRendering="false" ProcessingMode="Local" ShowRefreshButton="false">
            </rsweb:ReportViewer>
        </div>
        </form>
    </body>
    </html> 
```

With this tag

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" > 
```

you achieve that show in Safari and other browsers.

To access the report from a VIEW (.cshtml) need to add a link. i. e. :

```
<a href="/Report/Summary/SkillReport" >Show My Report :) </a> 
```

As a last comment, I recommend that after creating SkillReport.aspx enter in "**Design Mode**" and **drag from the toolbox the Reporting's controls**. This will automatically register the required values ​​in **web.config**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-03T23:34:28.623

Answer #1 was useful:

Just make sure that your order of MapRoutes is in the right order of precedence:

e.g.:

```
 public static void RegisterRoutes(RouteCollection routes)
 {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

           routes.MapPageRoute(
           routeName: "Report/", 
           routeUrl: "Report/{rptController}/{rptName}", 
           physicalFile: "~/Views/{rptController}/{rptName}.aspx"
       );

        routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
        );
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T11:57:19.647

虽然这不是推荐的做法，但它是可行的。我正在复制一个链接，该链接向您展示如何在同一个项目中使用两个视图引擎。

[http://weblogs.asp.net/gunnarpeipman/archive/2010/07/29/asp-net-mvc-3-using-multiple-view-engines-in-same-project.aspx](http://weblogs.asp.net/gunnarpeipman/archive/2010/07/29/asp-net-mvc-3-using-multiple-view-engines-in-same-project.aspx)

让我知道这是否适合您。

**更新：** 这也可能有帮助，另一个选项看起来像为您的 aspx 页面注册路由。

*[StackOverflow 帖子]* [MVC3 中的 Aspx 页面](https://stackoverflow.com/questions/8298666/aspx-page-in-mvc3)

# c++ - cocos2d-x 中的多层触摸处理

> ID：14171411
> 
> 赞同：0
> 
> 时间：2013-01-05T11:41:30.913
> 
> 标签：c++, touch, cocos2d-x

我对 cocos2d-x 触摸处理程序有疑问。我有两个`CCLayers`。第一层是主应用程序，第二层是工具箱。工具箱可以滑过第一层。主应用程序有一个特殊的触摸处理，工具箱也有触摸处理。当我向下滑动工具箱并单击它时，cocos2d-x 会运行主要的应用程序事件和处理程序。我想在单击它时运行工具箱处理程序功能，并且在单击它时也需要运行主应用程序处理程序。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T07:43:18.023

在您的 CCLayer 工具箱中，覆盖功能`registerWithTouchDispatcher()`以将触摸优先级设置为最高。

```
void ToolBoxLayer::registerWithTouchDispatcher()
{
    CCTouchDispatcher::sharedDispatcher()->addTargetedDelegate(this, numeric_limits <int> ::min(), true);
} 
```

# iphone - 表视图加载更多单元格？

> ID：14171414
> 
> 赞同：1
> 
> 时间：2013-01-05T11:41:51.127
> 
> 标签：iphone, objective-c, ios, uitableview

试图制作一个加载更多的单元格，但我无法让它出现在其他单元格之后，抱歉含糊不清，但我会告诉你我的代码......

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return [rows count] + 1;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *postCellId = @"postCell";
    UITableViewCell *cell = nil;

    cell = [self.tableView dequeueReusableCellWithIdentifier:postCellId];

    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:postCellId];

    NSUInteger row = [indexPath row];
    NSUInteger count = [rows count];

    if (row == count) {
        loadMore = [[UILabel alloc] initWithFrame:CGRectMake(0, 30, 320, 25)];
        loadMore.backgroundColor = [UIColor colorWithRed:255.0 / 255.0 green:255.0 / 255.0 blue:255.0 / 255.0 alpha:1.0];
        loadMore.font = [UIFont fontWithName:@"AvenirNext-Bold" size:18.0];
        loadMore.textColor = [UIColor colorWithRed:60.0 / 255.0 green:58.0 / 255.0 blue:55.0 / 255.0 alpha:1.0];
        loadMore.text = @"Load More...";
        loadMore.textAlignment = UITextAlignmentCenter;
        [cell.contentView addSubview:loadMore];

        displaying = [[UILabel alloc] initWithFrame:CGRectMake(0, 50, 320, 25)];
        displaying.backgroundColor = [UIColor colorWithRed:255.0 / 255.0 green:255.0 / 255.0 blue:255.0 / 255.0 alpha:1.0];
        displaying.font = [UIFont fontWithName:@"AvenirNext-Bold" size:12.0];
        displaying.textColor = [UIColor colorWithRed: 115.0 / 255.0 green: 113.0/ 255.0 blue:112.0 / 255.0 alpha:1.0];
        displaying.text = [NSString stringWithFormat:@"Displaying %i Results", rows.count];
        displaying.textAlignment = UITextAlignmentCenter;
        [cell.contentView addSubview:displaying];

    } else {

    dict = rows[indexPath.row];

    thumbimgView = [[UIImageView alloc] initWithFrame:CGRectMake(10, 10, 80, 80)];
    businessLabel = [[UILabel alloc] initWithFrame:CGRectMake(103, 10, 207, 25)];
    locationLabel = [[UILabel alloc] initWithFrame:CGRectMake(103, 35, 207, 35)];
    locimgView = [[UIImageView alloc] initWithFrame:CGRectMake(220, 75, 20, 15)];
    distanceLabel = [[UILabel alloc] initWithFrame:CGRectMake(240, 75, 60, 15)];

    businessLabel.backgroundColor = [UIColor colorWithRed:255.0 / 255.0 green:255.0 / 255.0 blue:255.0 / 255.0 alpha:1.0];
    businessLabel.font = [UIFont fontWithName:@"AvenirNext-Bold" size:18.0];
    businessLabel.textColor = [UIColor colorWithRed:60.0 / 255.0 green:58.0 / 255.0 blue:55.0 / 255.0 alpha:1.0];
    businessLabel.text = dict[@"business"];
    [cell.contentView addSubview:businessLabel];

    locationLabel.backgroundColor = [UIColor colorWithRed:255.0 / 255.0 green:255.0 / 255.0 blue:255.0 / 255.0 alpha:1.0];
    locationLabel.font = [UIFont fontWithName:@"AvenirNext-Regular" size:14.0];
    locationLabel.text = dict[@"location"];
    locationLabel.textColor = [UIColor colorWithRed: 115.0 / 255.0 green: 113.0/ 255.0 blue:112.0 / 255.0 alpha:1.0];
    locationLabel.numberOfLines = 2;
    locationLabel.lineBreakMode = UILineBreakModeTailTruncation;

    [cell.contentView addSubview:locationLabel];

    listingLoc = [[CLLocation alloc] initWithLatitude:[dict[@"lat"] doubleValue] longitude:[dict[@"lon"] doubleValue]];

    AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];

    float kilometers = [appDelegate.currentLoc distanceFromLocation:listingLoc] / 1000;

    int milesint = kilometers * 0.621371192;

    NSString *milesOut = [NSString stringWithFormat:@"%i miles", milesint];

    distanceLabel.backgroundColor = [UIColor colorWithRed:255.0 / 255.0 green:255.0 / 255.0 blue:255.0 / 255.0 alpha:1.0];
    distanceLabel.font = [UIFont fontWithName:@"AvenirNext-Regular" size:12.0];
    distanceLabel.textColor =  [UIColor colorWithRed:128.0 / 255.0 green:128.0 / 255.0 blue:128.0 / 255.0 alpha:1.0];
    distanceLabel.text = milesOut;
    [cell.contentView addSubview:distanceLabel];

    NSArray *splitImages = [dict[@"image1"] componentsSeparatedByString:@", "];

    icon = [[UIImage alloc] initWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:[splitImages objectAtIndex:0]]]];

    [thumbimgView setContentMode:UIViewContentModeScaleAspectFill];
    [thumbimgView setClipsToBounds:YES];

    thumbimgView.image = icon;
    [cell.contentView addSubview:thumbimgView];

    locimgView.image = [UIImage imageNamed:@"location-icon.png"];
    [cell.contentView addSubview:locimgView];

    cell.textLabel.text = dict[@"business"];
    cell.textLabel.hidden = YES;

    }

    return cell;
} 
```

它所做的只是从数组中返回数据，并且在加载更多之后没有添加任何单元格。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T13:52:04.580

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    NSUInteger row = [indexPath row];
    NSUInteger count = [rows count];
    UITableViewCell *cell = nil;    

    if (row == count) {
      // This is the bottom most cell, therefore display the More-Cell
      static NSString *postCellId = @"moreCell";

      cell = [self.tableView dequeueReusableCellWithIdentifier:postCellId];
      if (cell == nil) {  // it cannot be re-used, so create a new one

         cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:postCellId];
         // now add all sub views such as labels and buttons. 
         // If the layout is always the same then you may set it here. 

      }
      // Now it is either re-used or newly created. However, it carries all the subviews. 
      // Here set the values. You may set the layout here too, if the layout depends on data.

    } else {
      // Display a regular Post-Cell    
      static NSString *postCellId = @"postCell";

      cell = [self.tableView dequeueReusableCellWithIdentifier:postCellId];
      if (cell == nil) { // it cannot be re-used, so create a new one

         cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:postCellId];
         // now add all sub views such as labels and buttons. 
         // If the layout is always the same then you may set it here. 

      }
      // Now it is either re-used or newly created. However, it carries all the subviews. 
      // Here set the values. You may set the layout here too, if the layout depends on data.

    }

    return cell;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T17:54:24.893

我认为您实施此方法的方式没有问题。我简化了您的代码（主要在“else”子句中）并创建了一个虚拟数组，一切正常。请注意，我正在使用新的范例来创建表格视图单元格，这使得没有必要使用“如果单元格为 nil”语句。

```
@implementation TableController {
    NSArray *rows;
}

- (void)viewDidLoad {
    [super viewDidLoad];
    [self.tableView registerClass:[UITableViewCell class] forCellReuseIdentifier:@"postCell"];
    rows = @[@"One",@"Two",@"Three",@"Four"];

}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return [rows count] + 1;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    UITableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier:@"postCell" forIndexPath:indexPath];

    NSUInteger row = [indexPath row];
    NSUInteger count = [rows count];

    if (row == count) {
        UILabel *loadMore = [[UILabel alloc] initWithFrame:CGRectMake(0, 30, 320, 25)];
        loadMore.backgroundColor = [UIColor colorWithRed:255.0 / 255.0 green:255.0 / 255.0 blue:255.0 / 255.0 alpha:1.0];
        loadMore.font = [UIFont fontWithName:@"AvenirNext-Bold" size:18.0];
        loadMore.textColor = [UIColor colorWithRed:60.0 / 255.0 green:58.0 / 255.0 blue:55.0 / 255.0 alpha:1.0];
        loadMore.text = @"Load More...";
        loadMore.textAlignment = NSTextAlignmentCenter;
        [cell.contentView addSubview:loadMore];

        UILabel *displaying = [[UILabel alloc] initWithFrame:CGRectMake(0, 50, 320, 25)];
        displaying.backgroundColor = [UIColor colorWithRed:255.0 / 255.0 green:255.0 / 255.0 blue:255.0 / 255.0 alpha:1.0];
        displaying.font = [UIFont fontWithName:@"AvenirNext-Bold" size:12.0];
        displaying.textColor = [UIColor colorWithRed: 115.0 / 255.0 green: 113.0/ 255.0 blue:112.0 / 255.0 alpha:1.0];
        displaying.text = [NSString stringWithFormat:@"Displaying %i Results", rows.count];
        displaying.textAlignment = NSTextAlignmentCenter;
        [cell.contentView addSubview:displaying];
    } else {
        cell.textLabel.text = rows[indexPath.row];
    }
    return cell;
} 
```

# java - DBUnit - 违反完整性约束：外键无动作；SYS_FK_10556

> ID：14171423
> 
> 赞同：5
> 
> 时间：2013-01-05T11:43:04.167
> 
> 标签：java, database, eclipse, unit-testing, dbunit

我目前正在使用 dbunit（使用 hsqldb）进行编码测试。但是，我在初始化数据库时遇到了一个巨大的问题：

这是代码：

```
/**
     * Init before a test starts
     */
    @Before
    public void initialise() {
        IDataSet dataSetRating = null;
        IDataSet dataSetMovie = null;

        log.info("enter init test");

        try {
            con = datasource.getConnection();
            icon = new DatabaseConnection(con);
            File rating = new File("./src/test/resources/startDatabaseRating.xml");         
            dataSetRating = new FlatXmlDataSetBuilder().build(rating);
            DatabaseOperation.CLEAN_INSERT.execute(icon, dataSetRating);
        } catch (Exception e) {
            e.printStackTrace();
            log.error(e);
            System.exit(-1);
        }
    } 
```

我的创建语句如下所示：

```
CREATE TABLE Rating
(
    rid INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    mid INTEGER FOREIGN KEY REFERENCES Movie(movieId), 
    rating INTEGER NOT NULL, 
); 
```

我的 startDatabaseRating.xml 看起来像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<dataset>
    <Rating rid="0" mid="0" rating="1" />
    <Rating rid="1" mid="0" rating="2" />
    <Rating rid="2" mid="0" rating="3" />
    <Rating rid="3" mid="0" rating="4" />

    <Movie movieid="0" title="Movie1" moviePath="C" />
    <Movie movieid="1" title="Movie2" moviePath="D" />
</dataset> 
```

当我运行测试时，我得到：

> java.sql.SQLIntegrityConstraintViolationException：完整性约束违规：外键无动作；SYS_FK_10556 表：评级

为什么会出现此异常，因为 *.xml 文件中仍有数据集。如何解决这个问题？

**更新：**

```
CREATE TABLE Movie
(
    movieId INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    title VARCHAR(255) NOT NULL,
    moviePath VARCHAR(500) NOT NULL
); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-05T12:11:06.507

插入评分时，引用的电影必须已存在于`movie`表中。因此，您以错误的顺序插入行。

您需要先插入电影，**然后再**插入收视率。

```
<?xml version="1.0" encoding="UTF-8"?>
<dataset>
    <Movie movieid="0" title="Movie1" moviePath="C" />
    <Movie movieid="1" title="Movie2" moviePath="D" />

    <Rating rid="0" mid="0" rating="1" />
    <Rating rid="1" mid="0" rating="2" />
    <Rating rid="2" mid="0" rating="3" />
    <Rating rid="3" mid="0" rating="4" />
</dataset> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-03T14:48:02.487

此外，我建议您为列使用常规标签，**尤其是 id 和外键**，因为如果有一天另一个人负责您的代码，它更容易理解和维护！

```
<?xml version="1.0" encoding="UTF-8"?>
<dataset>
    <Movie id="0" title="Movie1" moviePath="C" />
    <Movie id="1" title="Movie2" moviePath="D" />

    <Rating id="0" movie_id="0" rating="1" />
    <Rating id="1" movie_id="0" rating="2" />
    <Rating id="2" movie_id="0" rating="3" />
    <Rating id="3" movie_id="0" rating="4" />
</dataset> 
```

# powershell - PowerShell 作业队列

> ID：14171425
> 
> 赞同：3
> 
> 时间：2013-01-05T11:43:06.757
> 
> 标签：powershell, queue, start-job

为列表中的每个服务器运行一个作业。我只希望一次运行 5 个作业。当作业完成时，它应该在列表中的下一个服务器上启动一个新作业。到目前为止，这是我所拥有的，但在前 5 个工作运行之后，我无法让它开始新工作：

```
 $MaxJobs = 5
   $list = Get-Content ".\list.csv"
   $Queue = New-Object System.Collections.Queue
   $CurrentJobQueue = Get-Job -State Running
   $JobQueueCount = $CurrentJobQueue.count

   ForEach($Item in $list)
  {
  Write-Host "Adding $Item to queue"
  $Queue.Enqueue($Item)
  }

 Function Global:Remote-Install
 {
 $Server = $queue.Dequeue()
 $j = Start-Job -Name $Server -ScriptBlock{

        If($JobQueueCount -gt 0)
        {
        Test-Connection $Server -Count 15
        }##EndIf
    }##EndScriptBlock

  }

For($i = 0 ;$i -lt $MaxJobs; $i++) 
{
Remote-Install
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T17:57:10.380

如果您使用，PowerShell 将为您执行此操作，`Invoke-Command`例如：

```
Invoke-Command -ComputerName $serverArray -ScriptBlock { .. script here ..} -ThrottleLimit 5 -AsJob 
```

顺便说一句，我认为您对 .NET 队列的使用不会起作用，因为 Start-Job 会启动另一个 PowerShell 进程来执行该作业。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-05T18:18:07.543

您可以查看`Split-Pipeline`模块[SplitPipeline](https://github.com/nightroman/SplitPipeline)的 cmdlet 。代码将如下所示：

```
Import-Module SplitPipeline
$MaxJobs = 5
$list = Get-Content ".\list.csv"
$list | Split-Pipeline -Count $MaxJobs -Load 1,1 {process{
    # process an item from $list represented by $_
    ...
}} 
```

`-Count $MaxJobs`限制并行作业的数量。`-Load 1,1`告诉将 1 个项目准确地输送到每个作业。

这种方法的优点是代码本身是同步调用的，并且它从作业中输出结果，就好像所有都是顺序调用的一样（甚至输出顺序也可以通过 switch 保留`Order`）。

但是这种方法不使用远程处理。该代码在多个运行空间中的当前 PowerShell 会话中工作。

# php - 为 VPS 上的大多数用户替换文件（在相同的相对路径）

> ID：14171427
> 
> 赞同：1
> 
> 时间：2013-01-05T11:43:15.620
> 
> 标签：php, file, centos, cpanel, whm

我们与大约 230 个客户一起运行 CentOS WHM/cPanel VPS，其中大多数客户使用我们自己的 CMS 软件。该软件内置了版本控制和更新，但由于各种原因，它没有在我们的部分网站上激活，因此我无法将它用于我想要推出的更新。

我正在寻找某种方法从一个位置获取一个新的（在此示例中）updates.php，并为服务器上的每个用户替换 public_html/admin/updates.php 中存在的任何其他updates.php。

对于拥有它的 VPS 上的每个用户，需要更新的文件位于相同的重播路径（即 /home/[USERNAME]/public_html/admin/updates.php）。显然，因此任何没有它的用​​户都需要被跳过（以避免在整个地方创建 updates.php 文件。

我们的 PHP 也设置为在 SuExec 下运行，所以我不能简单地编写一个 PHP 脚本并运行它——所以假设它需要通过某种 shell——这绝对不是我擅长的。也就是说，我确实有 root 访问权限，所以可以根据需要在那里做任何事情。

喜欢听听您的想法/解决方案，显然很乐意回答任何问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T11:56:10.227

像这样写一个shell脚本

```
for i in /home/* ; do
  if [ -d "$i" ]; then
    echo "found $i"
          if [ -f "$i/public_html/admin/updates.php" ]; then
            cp /home/updates.php $i/public_html/admin/updates.php
          fi
  fi
done 
```

首先如果检查目录，即检查所有用户目录。然后在每个目录中检查更新文件是否存在。如果是这样，请将文件 /home/updates.php （你应该放在哪里）复制到那里。

编辑：将代码放入文件`applyUpdate.sh`中，用于`chmod +x applyUpdate.sh`使其可执行，然后使用`./applyUpdate.sh`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T12:09:24.943

如果此文件的名称是 upgrade.php，并且这是您的用户目录中唯一的 upgrade.php，请考虑使用此文件：

```
find /home/ -name upgrade.php -exec cp -p /path/to/new_upgrade {} \; 
```

# c - printf 以防止 c 中的分段错误

> ID：14171430
> 
> 赞同：0
> 
> 时间：2013-01-05T11:43:46.807
> 
> 标签：c, segmentation-fault

下面是一个函数的一部分。

```
l->length[l->cl] = atoi(p->wds[p->cw]);
printf("FD %d\n", l->length[l->cl]);
p->cw = p->cw + 1;
l->cl = l->cl + 1; 
printf("prevent from seg fault\n");
instr(p); 
```

如果我删除`printf("prevent from seg fault\n");`我得到分段错误，但如果我保持它运行并转到嵌套函数等等。

所以我的问题是一般为什么会发生这种情况，我知道我没有显示足够的代码，所以你可以看到为什么会发生分段，但是如果对此有任何一般性解释，我在我的另一个地方也有这个程序，但最后我可以删除它吗？

问候奥里

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-05T11:59:30.593

就标准而言，对调用未定义行为的程序所做的任何更改都可能产生任何结果——其背后不必有逻辑。事实上，当遇到未定义的行为时，尝试推理给定实现的行为方式很少有成效。

也就是说，如果对`printf`（或任何其他函数）的调用改变了你的程序的行为（当然，除了打印它应该做的明显变化之外），一种可能的解释是你在某个地方有一个指向本地的无效指针超出范围的变量。如果该变量以前存在于堆栈内存中，现在由`printf`它自己的局部变量使用，这意味着指针指向的内存现在将被新值覆盖。这当然可以改变任何使用指针的代码的行为。

# sql - 将数值变量插入 SQL 语句

> ID：14171434
> 
> 赞同：1
> 
> 时间：2013-01-05T11:44:03.213
> 
> 标签：sql, sql-server-2008

如何在存储过程中的语句中插入数值变量（这是我的尝试）：

```
...
declare @SQL1 nvarchar(1500)
declare @calc numeric(18,2)
Set @calc = 18.00
SET @SQL1= 'insert into Table1(cv) values(' + @calc + ')' 
```

我在最后一行得到的错误是：

> *将数据类型 varchar 转换为数字时出错。*

如果我插入如下类型的变量`nvarchar`：

```
SET @SQL1= 'insert into Table1(cn) values(''' + @column_name + ''')' 
```

它就像一个魅力 - 但不是当我尝试在第一个示例中插入一个数字字段时。谢谢！

PS：表 Table1 已正确定义其列以匹配变量类型。Table1 有 2 列：`cn`of type`nvarchar(50)`和`cv`of type `numeric(18,2)`。`@column_name`是`nvarchar(50)`和`@calc`是`numeric(18,2)`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T11:47:25.607

您需要**将**您的数字转换为`nvarchar`- 试试这个：

```
declare @SQL1 nvarchar(1500)
declare @calc numeric(18,2)

Set @calc = 18.00

SET @SQL1 = N'insert into Table1(cv) values(' + CAST(@calc AS NVARCHAR(10)) + N')' 
```

# java - 机器人将鼠标放在窗口中

> ID：14171438
> 
> 赞同：1
> 
> 时间：2013-01-05T11:44:50.920
> 
> 标签：java, input, mouse, lwjgl

我有一个 fps“相机”，最近才设法设置鼠标移动来旋转视角。相机的一个问题是鼠标可以离开窗口并且角度将不再旋转。我知道我可以使用类似的机器人方法`mouseMove()`，但是，我听说它使相机旋转感觉非常生涩。有没有其他方法可以将鼠标保持在窗口中，比如 Minecraft？我以 Minecraft 为例，因为我的程序也使用了 LWJGL，我想知道 Notch 是如何做到的。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T19:47:46.233

`Mouse.setGrabbed(true)`在启动的那一刻，

并且对于每个游戏循环（帧）：

捕捉鼠标移动`Y_Angle += Mouse.getDX()*0.1f`，

然后围绕 Y 轴以`Y_Angle`度数/弧度旋转您的视图矩阵。

对于围绕 X 和 Z 轴的旋转`Mouse.getDY()`，请自行考虑如何为它们实现右矩阵旋转，但这是*主要思想*。

# c - apache可移植运行时是否支持信号量

> ID：14171440
> 
> 赞同：1
> 
> 时间：2013-01-05T11:45:32.387
> 
> 标签：c, semaphore, apr

```
gcc 4.7.2
c89 
```

你好，

我在 utils 库中使用 APR 安全线程队列。我的设计是使用一个线程将消息推送到队列，并使用另一个线程从队列中弹出消息。这部分可以使用 apr 线程池和内存池。

但是，我想阻止，直到有东西从队列中弹出。我想使用信号量来指示队列中有一些东西要弹出。但是，我在 APR-Utils 中看不到任何信号量。

我可以使用 posix 信号量，但我宁愿使用更便携的东西。当我使用 APR 时，我宁愿坚持这一点。

APR 是否有信号量，我看不到任何信号量？

非常感谢您的任何建议，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T11:55:40.390

`apr_queue_pop`如果队列为空，则阻塞，因此不需要信号量。

# c++ - 向量下标未能添加元素

> ID：14171443
> 
> 赞同：2
> 
> 时间：2013-01-05T11:46:49.757
> 
> 标签：c++, vector, cin, subscript

在使用子脚本运算符编写了一些非常简洁的 C++ 之后，我在程序中有一个小错误 - 没有输出。

我输入这个（Linux）

```
54 73 89 43 38 90 
```

然后按 Cntrl + D 获取 EOF。该程序不输出任何内容并停止执行。

资源：

```
#include <iostream>
#include <string>
#include <vector>

using std::cin;
using std::vector;
using std::cout;
using std::endl;

int main() {
vector<unsigned> scores(11, 0); //11 buckets, all initially 0
unsigned grade;
while(cin >> grade) //read the grades
{
   if(grade <=100) //handles only valid inputs
  {
   ++scores[grade/10]; //increment counter for the current cluster
  }
 }
} 
```

我没有更改我在 VIM 中的设置，所以编码风格略有不同。我无法想象出了什么问题，while 循环非常标准。它会读入成绩，直到发现流无效。然后我检查输入是否小于 100（含）。最后一段代码（非常简洁）在向量中找到正确的元素来增加计数器。

我有一种感觉，可能是我的输入导致程序无法输出。

编辑 1：我添加了输出语句，我通过取消引用 a 来做到这一点，它始终是一个引用。

```
#include <iostream>
#include <string>
#include <vector>

using std::cin;
using std::vector;
using std::cout;
using std::endl;

int main() {
vector<unsigned> scores(11, 0); //11 buckets, all initially 0
unsigned grade;
while(cin >> grade) //read the grades
{
   if(grade <=100) //handles only valid inputs
  {
   ++scores[grade/10]; //increment counter for the current cluster
  }
 }
for(auto it = scores.begin(); it != scores.end(); ++it) {
cout << *it << endl;
 }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-05T11:48:26.247

> 我有一种感觉，可能是我的输入导致程序无法输出。

不完全的。程序中没有输出语句导致它不输出。

# sql - 使用 EF 是否可以使用“非此即彼”字段，还是必须使用检查约束？

> ID：14171457
> 
> 赞同：1
> 
> 时间：2013-01-05T11:48:23.540
> 
> 标签：sql, sql-server, asp.net-mvc, entity-framework, entity-framework-5

我正在使用 MVC4、EF5 和 SQL Server 2012 Express LocalDB。`Customer`域模型具有`Phone`和`Email`字段。任何一个都可以为空，但*至少必须填充一个*。

我在客户端和服务器端都使用 FluentValidation 来确保这一点。

但是，当我需要保留模型时，我遇到了 EF5 的限制。如果我将两者都设为必需，则持久代码将失败，但如果我将它们都设为可选：

```
...
this.Property(q => q.Phone).IsOptional();
this.Property(q => q.Email).IsOptional(); 
```

那么这不符合我的要求。

**Q1**：我如何对此建模 - 有没有简单的方法，或者我必须使用检查约束？这个检查约束好吗：

```
ALTER TABLE dbo.[Customer]
  ADD CONSTRAINT constraintAtLeastOneContactDetailRequired
    CHECK ( ([Phone] IS NOT NULL) OR ([Email] IS NOT NULL) )
  --CHECK ( NOT(COALESCE([Phone], [Email]) IS NULL) )    <--or this?
; 
```

**Q2**：我对这两个字段都有一个 UNIQUE 约束，所以如果我允许它们为空并添加检查约束，我会遇到问题，因为可以有多个空值，根据定义，它们不是唯一的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T17:55:18.480

看起来 EF 不处理约束，所以我需要求助于 SQL。这就是我正在做的，但可能有更好的方法：

```
-- enforce the either-or rule:
ALTER TABLE Customer ADD CONSTRAINT chk1 CHECK ((Phone IS NOT NULL) OR (Email IS NOT NULL));

-- columns cannot be declared as unique (because of multiple nulls), so use workaround:
CREATE UNIQUE NONCLUSTERED INDEX idx1 ON Customer(Phone) WHERE Phone IS NOT NULL;
CREATE UNIQUE NONCLUSTERED INDEX idx2 ON Contact(Email) WHERE Email IS NOT NULL; 
```

[这里讨论](https://stackoverflow.com/a/767702/1711500)唯一性问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T13:05:22.897

我认为上面的 MarkG 有解决方案。创建一个单独的表/实体 CustomerContectDetails：

```
Field           Type
CustomerID      int (Foreign key link to cusotomer tables)
ContactType     int (enumerator - initially either phone or email)
ContactDetails  nvarchar(255) to hold either the email or phone number 
```

然后是一个简单的计数

```
if (CustomerContectDetails.Count(x => x.CustomerID == localCustomerID) > 0)
{ // positive actions}
else
{ // negative actions} 
```

该解决方案还可以在未来扩展到其他联系人，并且可以根据联系人类型添加其他规则。并且不需要数据库约束，业务规则保留在一个地方。

希望有帮助。

# java - 如何报告不同班级的进度

> ID：14171461
> 
> 赞同：0
> 
> 时间：2013-01-05T11:48:37.247
> 
> 标签：java, android, android-asynctask

我有一个从网站下载信息的课程。我目前正在使用 AsyncTask 来获取它，因此 ui 将保持响应。

我了解如何使用 publishProgress 和 onProgessUpdate 更新 GUI，但是如果我在不同的类中有一个大方法（或函数）怎么办？

使用代码更容易显示：

```
@Override
protected ArrayList<Card> doInBackground(Void... voids)
{
    Looper.prepare();
    publishProgress("Creating object");
    SomeClass someClass = new SomeClass();
    publishProgress("Performing a long operation");
    ArrayList<Card> = someClass.getCards();//This method takes a long while. I would like to call the "publishProgress" method from the "someClass".

    return athopGetter.getCards();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T12:30:40.997

您可以将任务引用传递给“someClass”，因为 publishProgress 是受保护的 final，您需要实现自己的发布方法，该方法只需调用 publishProgress，

```
task = new AsyncTask<...>() {
   ...
   public void myPublish(Progress... values) {
       publishProgress(values);
   } 
}; 
```

或者您可以使用反射直接调用 publishProgress。

# nginx - Gitlab：运行独角兽的问题，Resque with Passenger/Nginx

> ID：14171465
> 
> 赞同：6
> 
> 时间：2013-01-05T11:49:10.110
> 
> 标签：nginx, passenger, resque, unicorn, gitlab

我在全新的 Ubuntu (10.04) 上安装了 Gitlab，它几乎可以正常工作。Gitlab 可以通过 HTTP 访问，我可以通过 git 向服务器推送/拉取数据。但是，缺少一件事，活动提要没有更新。所以我认为git钩子有问题。我完全遵循[Gitlab](https://github.com/gitlabhq/gitlabhq/blob/master/doc/install/installation.md)的安装过程，除了我想使用Passenger 来运行 Nginx 以部署多个应用程序。

我正在运行`sudo -u gitlab -H bundle exec rake gitlab:env:info RAILS_ENV=production`查看是否一切设置正确，但它说，`Redis`没有运行。`ps aux`说，`redis-server`起来了。所以它不是 git 钩子。Gitlab docu 说，重启 gitlab 服务来解决这个问题。在这种情况下，我收到一个错误，我认为这是我需要解决的问题：

```
$ sudo /etc/init.d/gitlab restart
Error, unicorn not running! 
```

我的问题是，我该如何解决这个问题？如何运行独角兽，我以为 gitlab 服务会启动它？我没有使用 Nginx 吗？在我开始重新安装整个东西而不使用Passenger之前，我想我可能会提前在这里问这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T21:52:37.480

正如[OP pabera所](https://stackoverflow.com/users/1062438/pabera)[提到](https://stackoverflow.com/questions/14171465/gitlab-problems-running-unicorn-resque-with-passenger-nginx#comment19642379_14171465)的，并且必须启动，GitLab 的其他组件（、和 now ）才能正常运行。`nginx``mysql``redis``unicorn``sidekiq`

官方[`/etc/init.d/gitlab`来了](https://github.com/gitlabhq/gitlab-recipes/blob/master/init.d/gitlab)。

我有[自己的`gitlabd`(here)](https://github.com/VonC/compileEverything/blob/master/gitlab/gitlabd)版本，因为我[`sidekiq`在自己的脚本](https://github.com/VonC/compileEverything/blob/master/gitlab/sidekiqd)中进行管理，并且不需要将脚本作为`root`.

[您可以在此脚本中](https://github.com/VonC/compileEverything/blob/master/sbin/demod)查看所有服务的运行顺序：

*   SSH
*   Apache 和/或 NGiNX
*   mysql
*   雷迪斯
*   GitLab（将启动 unicorn 和 sidekiq）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T04:48:19.220

有点像在黑暗中戳...

在 GitLab installation.md 中，README 状态如下：

**"**

启动 GitLab 实例：

```
sudo service gitlab start
# or
sudo /etc/init.d/gitlab restart 
```

**"**

我做了第一个和第二个，得到了这个确切的错误。但是，我跳过了“或”并继续使用 Nginx 命令，它似乎可以工作。

希望这可以帮助！

# c - 康威的生命游戏，数邻居

> ID：14171466
> 
> 赞同：0
> 
> 时间：2013-01-05T11:49:13.063
> 
> 标签：c, matrix, counting

我的代码中某处有错误，我想我正在进入一个无限循环。基本上我得到一个矩阵和两个索引 i,j，我需要计算 [i][j] 周围有多少邻居的值为 1 或 2。

这是我的代码：

```
int number_of_living_neighbors(matrix mat,int i, int j, int n,int m)
{
    int counter=0,row_index=0,column_index=0;
    for(row_index=i-1;row_index<=i+1;row_index++)
    {
        for(column_index=j-1;column_index=j+1;column_index++)
        {
            if((row_index>=0)&&(row_index<n)&&(column_index>=0)&&(column_index<m))
            {
                if((mat[row_index][column_index]==1)||(mat[row_index][column_index]==2))
                    counter++;
                if((row_index==i)&&(column_index==j)&&(mat[i][j]==1))
                    counter--;
            }
        }
    }
    printf("The number of living neighbors is %d", counter);
    return counter;
} 
```

它不打印任何东西。mat 是我得到的矩阵，i,j 是指针，n 是行数，m 是列数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T11:50:51.033

```
for(column_index = j-1 ; column_index = j+1; column_index++) 
```

您的条件包含分配，而不是比较。您可能想使用`<=`而不是`=`：

```
for(column_index = j-1 ; column_index <= j+1; column_index++) 
```

# android - 从水平 ProgressBar 中删除垂直填充

> ID：14171471
> 
> 赞同：138
> 
> 时间：2013-01-05T11:49:54.317
> 
> 标签：android, android-progressbar

默认情况下，ProgressBar 在栏本身的上方和下方都有一定的填充。有没有办法删除这个填充，以便最后只有条？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2013-03-25T09:19:22.233

我使用以下方法解决此问题。

```
android:layout_marginBottom="-8dp"
android:layout_marginTop="-4dp" 
```

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2016-03-28T14:25:53.123

这就是我使用 Juozas 的答案的方式：

我的高度`ProgressBar`是 4dp。所以我创建了一个`FrameLayout`高度为 4dp 并将`layout_gravity`of设置`ProgressBar`为`center`. 它就像一个魅力。

```
<FrameLayout
    android:layout_width="match_parent"
    android:layout_height="4dp">

    <ProgressBar
        style="?android:attr/progressBarStyleHorizontal"
        android:layout_width="match_parent"
        android:layout_height="4dp"
        android:layout_gravity="center"
        android:indeterminate="true" />
</FrameLayout> 
```

**注意：** a 的`FrameLayout`作用是将多余的东西剪掉，所以如果你遇到`ProgressBar`仍然很薄的问题，只需将 的 设置`layout_height`为`ProgressBar`一些较大的数字，例如`100dp`。它将完全覆盖 FrameLayout，并且只会显示`4dp`它。

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2016-09-03T15:03:58.707

我最终使用自定义库来解决这个问题。大多数其他解决方案都有效，但不同设备的结果并不一致。

> **材质进度条**
> 
> *   在 Android 4.0+ 上保持一致的外观。
> *   跨平台正确着色。
> *   能够移除框架 ProgressBar 的内在填充。
> *   能够隐藏框架水平ProgressBar的轨迹。
> *   用作框架 ProgressBar 的直接替代品。

要添加为 gradle 依赖项：

```
compile 'me.zhanghai.android.materialprogressbar:library:1.1.7' 
```

要在布局中添加没有内部填充的 ProgressBar：

```
<me.zhanghai.android.materialprogressbar.MaterialProgressBar
    android:layout_width="wrap_content"
    android:layout_height="4dp"
    android:indeterminate="true"
    app:mpb_progressStyle="horizontal"
    app:mpb_useIntrinsicPadding="false"
    style="@style/Widget.MaterialProgressBar.ProgressBar.Horizontal" /> 
```

`app:mpb_useIntrinsicPadding="false"`成功了。有关更多详细信息，请参阅[GitHub 页面](https://github.com/DreaminginCodeZH/MaterialProgressBar)。

* * *

## 回答 #4

> 赞同：39
> 
> 时间：2018-11-06T12:29:43.560

如果有人仍然需要帮助可以试试这个：

```
<androidx.core.widget.ContentLoadingProgressBar
    android:id="@+id/progress"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    style="@style/Widget.AppCompat.ProgressBar.Horizontal"
    app:layout_constraintEnd_toEndOf="parent"
    app:layout_constraintTop_toTopOf="@+id/guideline"
    android:indeterminate="true"
    android:visibility="visible"
    app:layout_constraintBottom_toTopOf="@+id/guideline" /> 
```

这里，进度条在*ConstraintLayout*内部，且*constraintTop_toTopOf*和*constraintBottom_toTopOf*属性必须应用于同一个元素（在这种情况下，它是指南）。

***** 完整的解决方案：*****

```
<androidx.constraintlayout.widget.ConstraintLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="48dp">

    <View
        android:id="@+id/guideline"
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:orientation="vertical"
        android:visibility="invisible"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintStart_toStartOf="parent" />

    <ProgressBar
        android:id="@+id/progress_bar"
        style="?android:attr/progressBarStyleHorizontal"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:indeterminate="true"
        app:layout_constraintBottom_toTopOf="@+id/guideline"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintTop_toTopOf="@+id/guideline" />
</androidx.constraintlayout.widget.ConstraintLayout> 
```

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2019-01-14T03:50:49.557

要删除 的垂直填充`ProgressBar`，您可以通过

*   固定高度`ProgressBar`
*   使用 scaleY="value" (value = height/4) (4是进度条的默认高度)

示例包含 1 wrap_content `ProgressBar`、 1 8dp `ProgressBar`、 1 100dp`ProgressBar`

[![在此处输入图像描述](../Images/4d7a4da72ff93f7b3d765c7ae9deee06.png)](https://i.stack.imgur.com/7rh4o.png)

```
<ProgressBar
    style="?android:attr/progressBarStyleHorizontal"
    ...
    android:layout_height="8dp"
    android:scaleY="2" /> 
```

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2016-03-14T12:57:15.793

可以在父级内绘制垂直居中的 ProgressBar 以剪掉填充。由于 ProgressBar 无法将自身绘制得比父级大，因此我们必须创建一个大父级以放置在剪辑视图中。

```
<FrameLayout
    android:id="@+id/clippedProgressBar"
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="4dp"
    tools:ignore="UselessParent">

    <FrameLayout
        android:layout_width="match_parent"
        android:layout_height="16dp"
        android:layout_gravity="center_vertical">

        <ProgressBar
            style="?android:attr/progressBarStyleHorizontal"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:indeterminate="true"/>

    </FrameLayout>

</FrameLayout> 
```

* * *

## 回答 #7

> 赞同：14
> 
> 时间：2013-09-16T15:56:30.730

这个问题的完整解决方案如下。以防万一有人需要代码片段，这就是我所做的。

1.  复制了所有 8 个不确定的水平进度条可绘制对象
2.  使用一些图像操纵器编辑了可绘制对象并删除了不必要的填充
3.  从 android 平台复制名为 progress_indeterminate_horizo​​ntal_holo.xml 的可绘制 XML
4.  复制样式 Widget.ProgressBar.Horizo​​ntal 及其父项
5.  在布局中手动设置样式和 min_height

这是progress_indeterminate_horizo​​ntal_holo.xml

```
<animation-list
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:oneshot="false">
    <item android:drawable="@drawable/progressbar_indeterminate_holo1" android:duration="50" />
    <item android:drawable="@drawable/progressbar_indeterminate_holo2" android:duration="50" />
    <item android:drawable="@drawable/progressbar_indeterminate_holo3" android:duration="50" />
    <item android:drawable="@drawable/progressbar_indeterminate_holo4" android:duration="50" />
    <item android:drawable="@drawable/progressbar_indeterminate_holo5" android:duration="50" />
    <item android:drawable="@drawable/progressbar_indeterminate_holo6" android:duration="50" />
    <item android:drawable="@drawable/progressbar_indeterminate_holo7" android:duration="50" />
    <item android:drawable="@drawable/progressbar_indeterminate_holo8" android:duration="50" />
</animation-list> 
```

样式资源复制到我的本地样式文件。

```
<style name="Widget">
    <item name="android:textAppearance">@android:attr/textAppearance</item>
</style>

<style name="Widget.ProgressBar">
    <item name="android:indeterminateOnly">true</item>
    <item name="android:indeterminateBehavior">repeat</item>
    <item name="android:indeterminateDuration">3500</item>
</style>

<style name="Widget.ProgressBar.Horizontal">
    <item name="android:indeterminateOnly">false</item>
    <item name="android:indeterminateDrawable">@drawable/progress_indeterminate_horizontal_holo</item>
</style> 
```

最后，在我的本地布局文件中将最小高度设置为 4dp。

```
<ProgressBar
    android:id="@+id/pb_loading"
    style="@style/Widget.ProgressBar.Horizontal"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:indeterminate="true"
    android:minHeight="4dp"
    android:minWidth="48dp"
    android:progressDrawable="@drawable/progress_indeterminate_horizontal_holo" /> 
```

* * *

## 回答 #8

> 赞同：10
> 
> 时间：2016-12-01T08:15:55.833

我在使用水平样式的进度条时遇到了同样的问题。

根本原因是进度条的默认 9-patch 可绘制： (progress_bg_holo_dark.9.png) 有一些垂直透明像素作为填充。

对我有用的最终解决方案：自定义进度可绘制对象，我的示例代码如下：

**custom_horizo​​ntal_progressbar_drawable.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@android:id/background">
        <shape android:shape="rectangle">
            <solid android:color="#33ffffff" />
        </shape>
    </item>
    <item android:id="@android:id/secondaryProgress">
        <clip>
            <shape android:shape="rectangle">
                <solid android:color="#ff9800" />
            </shape>
        </clip>
    </item>
    <item android:id="@android:id/progress">
        <clip>
            <shape android:shape="rectangle">
                <solid android:color="#E91E63" />
            </shape>
        </clip>
    </item>
</layer-list> 
```

**布局片段：**

```
<ProgressBar
    android:id="@+id/song_progress_normal"
    style="@style/Widget.AppCompat.ProgressBar.Horizontal"
    android:layout_width="match_parent"
    android:layout_height="5dp"
    android:layout_alignParentBottom="true"
    android:progressDrawable="@drawable/custom_horizontal_progressbar_drawable"
    android:progress="0"/> 
```

* * *

## 回答 #9

> 赞同：8
> 
> 时间：2017-12-27T12:07:10.700

一个技巧是在进度条中添加负边距。

下面是 XML 代码的示例，假设它位于屏幕顶部：

```
<ProgressBar
    android:id="@+id/progressBar"
    style="@style/Widget.AppCompat.ProgressBar.Horizontal"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="-7dp"
    android:layout_marginBottom="-7dp"
    android:indeterminate="true" /> 
```

[![代码结果](../Images/25cc4e46e567775f6f21280f2d6f57bc.png)](https://i.stack.imgur.com/A4LLO.png)

* * *

## 回答 #10

> 赞同：8
> 
> 时间：2021-01-14T09:50:27.630

```
<com.google.android.material.progressindicator.LinearProgressIndicator
    android:id="@+id/progress_loading"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:visibility="visible"
    android:indeterminate="true"
    app:indicatorColor="@color/colorAccent"
    app:layout_constraintTop_toBottomOf="@+id/app_bar_pdfview"/> 
```

我正在使用这个新的进度条

```
implementation 'com.google.android.material:material:1.3.0' 
```

*   trackThickness：指标和轨迹的厚度。
*   indicatorColor：指标的颜色。
*   trackColor：轨道的颜色。
*   trackCornerRadius：指标和轨迹的圆角半径。
*   indeterminateAnimationType：不确定动画的类型。
*   indicatorDirectionLinear：指标的扫掠方向。

[![查看此水平进度条的结果](../Images/462ba1fb9f3c2abbad1cb3fff2829b30.png)](https://i.stack.imgur.com/7w47u.png)

* * *

## 回答 #11

> 赞同：7
> 
> 时间：2020-01-23T11:20:51.350

如果有人仍在寻找解决方案 - 请查看此评论

将最小高度设置为***4 dp***

```
 android:minHeight="4dp" 
```

-

```
 <ProgressBar
    android:id="@+id/web_view_progress_bar"
    style="@style/Widget.AppCompat.ProgressBar.Horizontal"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:indeterminate="false"
    android:max="100"
    android:min="0"
    android:progress="5"
    android:minHeight="4dp"
    android:progressTint="@color/vodafone_red"
    app:layout_constraintEnd_toEndOf="parent"
    app:layout_constraintStart_toStartOf="parent"
    app:layout_constraintTop_toTopOf="parent"
    tools:progress="60" /> 
```

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2016-06-01T16:58:14.137

Subin 的答案似乎是（目前）唯一一个在 Android ProgressBar 的未来版本中不会被破坏的脆弱黑客。

但是，与其费力地分解资源、修改它们并无限期地维护它们，我选择使用[MaterialProgressBar 库](https://github.com/DreaminginCodeZH/MaterialProgressBar)，它可以为我们做到这一点：

```
<me.zhanghai.android.materialprogressbar.MaterialProgressBar
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:indeterminate="true"
    android:layout_gravity="bottom"
    custom:mpb_progressStyle="horizontal"
    custom:mpb_showTrack="false"
    custom:mpb_useIntrinsicPadding="false"
    style="@style/Widget.MaterialProgressBar.ProgressBar.Horizontal.NoPadding"
/> 
```

在 build.gradle 中：

```
// Android horizontal ProgressBar doesn't allow removal of top/bottom padding
compile 'me.zhanghai.android.materialprogressbar:library:1.1.6' 
```

该项目有一个[很好的演示](https://github.com/DreaminginCodeZH/MaterialProgressBar/blob/master/sample/src/main/res/layout/main_activity.xml)，展示了它与内置 ProgressBar 之间的差异。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2021-06-18T10:22:11.823

对我来说，这是有效的。进度条很清晰。它非常适合。我尝试了不同高度的框架和进度。

```
<FrameLayout             
    android:layout_width="match_parent"             
    android:layout_height="4dp">    

   <ProgressBar
       style="?android:attr/progressBarStyleHorizontal"
       android:layout_width="match_parent"
       android:layout_height="16dp"
       android:layout_gravity="center"
       android:indeterminate="true"/>
</FrameLayout> 
```

[预习](https://i.stack.imgur.com/UFXzR.png)

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2016-05-11T15:06:00.297

我使用 minHeight 和 maxHeigh。它有助于不同的 Api 版本。

```
<ProgressBar
    android:id="@+id/progress_bar"
    style="@style/Base.Widget.AppCompat.ProgressBar.Horizontal"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:maxHeight="3dp"
    android:minHeight="3dp" /> 
```

它需要同时使用两者。Api 23 很好用

```
android:layout_height="wrap_content"
android:minHeight="0dp" 
```

但在这种情况下，较低的 Api 版本会将进度条高度增加到 maxHeight。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2019-11-05T05:20:13.983

像这样使用，在Linearlayout里面

```
 <LinearLayout
     android:layout_width="match_parent"
     android:background="#efefef"
     android:layout_height="wrap_content">

     <ProgressBar
         android:id="@+id/progressBar"
         android:layout_width="fill_parent"
         android:layout_height="wrap_content"
         android:indeterminate="true"
         android:visibility="gone"
         android:layout_marginTop="-7dp"
         android:layout_marginBottom="-7dp"
         style="@style/Widget.AppCompat.ProgressBar.Horizontal" />
 </LinearLayout> 
```

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2017-06-28T00:56:48.290

尝试以下操作：

```
<ProgressBar
    android:id="@+id/progress_bar"
    style="@android:style/Widget.ProgressBar.Horizontal"
    android:progress="25"
    android:progressTint="@color/colorWhite"
    android:progressBackgroundTint="@color/colorPrimaryLight"
    android:layout_width="match_parent"
    android:layout_height="4dp" /> 
```

...然后根据您的需要配置进度条，因为它最初会显示一个中等大小的进度条，带有黄色进度色调和灰色进度背景色调。另外，请注意没有垂直填充。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2016-06-17T01:11:20.250

将 android:progressDrawable 添加到 drawable 中定义的图层列表为我解决了这个问题。它通过在自定义可绘制对象中屏蔽进度条来工作

[https://stackoverflow.com/a/4454450/1145905](https://stackoverflow.com/a/4454450/1145905)中描述的示例实现

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2020-06-16T01:54:20.753

只需使用没有隐藏边距的 Material ProgressIndicator 即可。

```
<com.google.android.material.progressindicator.ProgressIndicator
        android:id="@+id/progressBar"
        style="@style/Widget.MaterialComponents.ProgressIndicator.Linear.Indeterminate"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        app:indicatorColor="@color/colorPrimary"
        app:trackColor="@color/colorAccent" /> 
```

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2019-04-18T00:07:31.313

无需下载任何新模块，甚至无需在进度条周围放置 FrameLayout。这些都只是黑客。只有2个步骤：

在你的whatever.xml

```
<ProgressBar
    android:id="@+id/workoutSessionGlobalProgress"
    android:layout_width="match_parent"
    android:layout_height="YOUR_HEIGHT"
    android:progressDrawable="@drawable/progress_horizontal"
    android:progress="0"
    <!-- High value to make ValueAnimator smoother -->
    android:max="DURATION * 1000"
    android:indeterminate="false"
    style="@style/Widget.MaterialProgressBar.ProgressBar.Horizontal"/> 
```

progress_horizo​​ntal.xml，随意更改值。

不喜欢圆角？
去除圆角半径

不喜欢颜色？更改颜色等。完成！

```
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:id="@android:id/background">
        <shape>
            <corners android:radius="5dip" />
            <gradient
                    android:startColor="#ff9d9e9d"
                    android:centerColor="#ff5a5d5a"
                    android:centerY="0.75"
                    android:endColor="#ff747674"
                    android:angle="270"
                    />
        </shape>
    </item>

    <item android:id="@android:id/secondaryProgress">
        <clip>
            <shape>
                <corners android:radius="5dip" />
                <gradient
                        android:startColor="#80ffd300"
                        android:centerColor="#80ffb600"
                        android:centerY="0.75"
                        android:endColor="#a0ffcb00"
                        android:angle="270"
                        />
            </shape>
        </clip>
    </item>

    <item android:id="@android:id/progress">
        <clip>
            <shape>
                <corners android:radius="5dip" />
                <gradient
                        android:startColor="#ffffd300"
                        android:centerColor="#ffffb600"
                        android:centerY="0.75"
                        android:endColor="#ffffcb00"
                        android:angle="270"
                        />
            </shape>
        </clip>
    </item>

</layer-list> 
```

通常，这些是更改您不喜欢的任何代码的步骤。只需找到源代码并弄清楚要更改的内容。如果您遵循 ProgressBar 源代码，您会发现它引用了一个名为 progress_horizo​​ntal.xml 的文件。基本上我如何解决我所有的 XML 问题。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2017-04-01T12:51:09.587

我正在使用`style="@style/Widget.AppCompat.ProgressBar.Horizontal"`，它很容易摆脱边缘。这种风格是：

```
 <item name="progressDrawable">@drawable/progress_horizontal_material</item>
    <item name="indeterminateDrawable">@drawable/progress_indeterminate_horizontal_material</item>
    <item name="minHeight">16dip</item>
    <item name="maxHeight">16dip</item> 
```

我只是覆盖了最小/最大高度：

```
 <ProgressBar
        style="@style/Widget.AppCompat.ProgressBar.Horizontal"
        android:layout_width="match_parent"
        android:layout_height="2dp"
        android:indeterminate="true"
        android:minHeight="2dp"
        android:maxHeight="2dp" /> 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2020-05-24T09:51:53.003

```
<androidx.core.widget.ContentLoadingProgressBar
                    android:id="@+id/progressBar"
                    style="@style/Widget.AppCompat.ProgressBar.Horizontal"
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:indeterminate="true"
                    android:paddingTop="2dp"
                    app:layout_constraintTop_toTopOf="parent"
                    app:layout_constraintBottom_toTopOf="parent"
                    app:layout_constraintEnd_toEndOf="parent"
                    app:layout_constraintStart_toStartOf="parent"/> 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2019-02-05T13:02:15.550

```
 <ProgressBar
        android:layout_marginTop="-8dp"
        android:layout_marginLeft="-8dp"
        android:layout_marginRight="-8dp"
        android:id="@+id/progress_bar"
        style="?android:attr/progressBarStyleHorizontal"
        android:layout_width="match_parent"
        android:layout_height="4dp"
        android:indeterminate="false"
        android:indeterminateTint="@color/white"
        android:max="100"
        android:paddingStart="8dp"
        android:paddingRight="0dp"
        android:progressDrawable="@drawable/progress_bg" /> 
```

* * *

## 回答 #23

> 赞同：-1
> 
> 时间：2021-02-16T18:45:35.250

一种不需要任何额外视图或摆弄边距的向上移动进度条的简单方法是使用属性`android:translationZ`

这样您就可以在 XML 中使用它

```
<Progressbar
 android:layout_height="wrap_content"
 android:layout_width="match_parent"
 android:translateY="-6dp"
/> 
```

**或者**

从样式中使用它

```
<style name="MyTheme.Progressbar.Horizontal" parent="Widget.AppCompat.Progressbar.Horizontal">
    <item name="android:translateY">-6dp</item>
</style> 
```

然后像这样在布局中引用它

```
<Progressbar
 android:layout_height="wrap_content"
 android:layout_width="match_parent"
 style="@style/MyTheme.Progressbar.Horizontal"
 /> 
```

* * *

## 回答 #24

> 赞同：-1
> 
> 时间：2021-03-18T12:13:21.057

使progressBar 的大小变得非常大（我的意思是高度），然后将其放入您希望progressBar 需要的大小的frameLayout 中。

```
<FrameLayout
    android:layout_width="match_parent"
    android:layout_height="10dp">

    <ProgressBar
        android:id="@+id/progress_bar"
        style="?android:attr/progressBarStyleHorizontal"
        android:layout_width="match_parent"
        android:layout_height="100dp"
        android:layout_gravity="center"
        android:backgroundTint="@android:color/transparent"
        android:indeterminate="true"
        android:indeterminateTint="@color/white" />

</FrameLayout> 
```

* * *

## 回答 #25

> 赞同：-1
> 
> 时间：2019-06-14T21:46:05.700

最好的解决方案应该是

```
android:minHeight="0dp" 
```

没有解决方法，就像一个魅力。

* * *

## 回答 #26

> 赞同：-1
> 
> 时间：2017-09-02T12:53:04.920

一个与任何版本的 Android 兼容且不需要外部库的简单无技巧解决方案是在内部伪造`ProgressBar`两个. 这就是我最终的结果。看起来很整洁，而且这种方法非常灵活——你可以用时髦的方式对其进行动画处理，添加文本等。`Views``LinearLayout`

布局：

```
<LinearLayout
    android:id="@+id/inventory_progress_layout"
    android:layout_width="match_parent"
    android:layout_height="4dp"
    android:orientation="horizontal">

    <TextView
        android:id="@+id/inventory_progress_value"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

    <TextView
        android:id="@+id/inventory_progress_remaining"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />
</LinearLayout> 
```

代码：

```
public void setProgressValue(float percentage) {
    TextView progressValue = (TextView) findViewById(R.id.inventory_progress_value);
    TextView progressRemaining = (TextView) findViewById(R.id.inventory_progress_remaining);

    LinearLayout.LayoutParams paramsValue = new LinearLayout.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.MATCH_PARENT);
    LinearLayout.LayoutParams paramsRemaining = new LinearLayout.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.MATCH_PARENT);

    paramsValue.weight = (100 - percentage);
    paramsRemaining.weight = percentage;

    progressValue.setLayoutParams(paramsValue);
    progressRemaining.setLayoutParams(paramsRemaining);

} 
```

结果（添加了一些海拔）：

[![在此处输入图像描述](../Images/cf76cfb6f6833d5546f83eae8daf0e4b.png)](https://i.stack.imgur.com/PpmFa.png)

* * *

## 回答 #27

> 赞同：-1
> 
> 时间：2021-04-13T23:28:32.680

这是一个简单的材质水平进度条**，无需添加文件、缩放或更改尺寸**

```
 style="@android:style/Widget.ProgressBar.Horizontal"
    android:progressTint="Your Progress Color"
    android:progressTintMode="src_over"
    android:progressBackgroundTint="Your Background Color"
    android:backgroundTintMode="src_over" 
```

这通过着色呈现的进度或背景颜色来工作`Widget.ProgressBar.Horizontal`

# ios - 使用 NSFetchedResultsController 动态创建部分

> ID：14171474
> 
> 赞同：13
> 
> 时间：2013-01-05T11:50:12.550
> 
> 标签：ios, objective-c

我正在使用`NSFetchedResultsController`(NSFRC) 在`UITableView`. 我正在尝试为用户创建选项，以按部分而不是按字母顺序对单元格进行排序。问题是，然后将使用下载的信息来确定这些部分。最重要的是，每个项目的部分将相对经常更改，因此我不想保存该部分。我注意到在我对类似问题的研究中提到了瞬态属性，但是在我不确定是否可以使用它们之前我从未使用过这些属性，因为记住所有计算都是在数据已经加载后完成的，并且我还希望这个解决方案与我以前的`Core Data database`. 而且我不是特别擅长`Core Data`，（也不`Objective-C`擅长！）所以我不完全确定我将如何去做。

所以如果我们使用瞬态属性，这就是我想要的（下一点是理论上的，因为我不知道瞬态属性是否是正确的前进方式）。我想要 4 个可能的部分，0-3（我将使用 重命名它们`TableView delegate`以解决排序问题）。计算完成后，将为每个单元格分配瞬态属性（如果需要，默认部分为 2）。我希望这一切都有意义。

对，现在是一些理论代码。首先，我在数据模型屏幕中创建瞬态属性，并通过选中瞬态复选框使其瞬态......听起来很简单。

在计算代码中`willDisplayCell`（出于几个原因需要在 wDC 中完成），实体可以这样保存：

```
MyEntity *myEntity = [self.fetchedResultsController objectAtIndexPath:indexPath];

myEntity.sectionTransientProperty = 2;

if (![self.managedObjectContext save:&error]) {
    NSLog(@"Error: %@", error);
    FATAL_CORE_DATA_ERROR(error);
    return;
} 
```

完成了，对吧？这就是我们为瞬态属性赋值的方式吗？

然后我在分配时更改 NSFRC 中的排序选项：

```
fetchedResultsController = [[NSFetchedResultsController alloc]
                                initWithFetchRequest:fetchRequest
                                managedObjectContext:self.managedObjectContext
                                sectionNameKeyPath:@"sectionTransientProperty"
                                cacheName:@"MyEntity"]; 
```

我们过得怎么样，我还需要做什么？或者我把这个弄错了，我应该放弃`Core Data and NSFRC?`如果你们能帮助指导我完成这个，我真的很感激。如果您需要我发布更多代码，我将很乐意。

问候，
迈克

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-05T12:07:07.340

如果你想要一个带有部分的 FRC，你必须在 fetch 请求中添加一个排序描述符，并且该排序描述符不能基于瞬态属性。

请参阅[initWithFetchRequest:managedObjectContext:sectionNameKeyPath:cacheName:` 的文档：](http://developer.apple.com/library/ios/#documentation/CoreData/Reference/NSFetchedResultsController_Class/Reference/Reference.html#//apple_ref/occ/instm/NSFetchedResultsController/initWithFetchRequest:managedObjectContext:sectionNameKeyPath:cacheName:)

> 如果控制器生成节，则数组中的第一个排序描述符用于将对象分组为节；它的键必须与 sectionNameKeyPath 相同，或者使用其键的相对顺序必须与使用 sectionNameKeyPath 的顺序匹配。

并在“核心数据编程指南”中[获取谓词和排序描述符：](http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/CoreData/Articles/cdPersistentStores.html#//apple_ref/doc/uid/TP40002875-SW11)

> 另一方面，SQL 存储将谓词和排序描述符编译为 SQL，并在数据库本身中评估结果。这样做主要是为了性能，但这意味着评估发生在非 Cocoa 环境中，因此依赖 Cocoa 的排序描述符（或谓词）无法工作。支持的排序选择器是……
> **此外，您不能使用 SQLite 存储对瞬态属性进行排序。**

这意味着您*不能*仅根据瞬态属性创建部分。您需要一个为部分创建排序的持久属性。

*更新：*瞬态属性的典型用法`sectionNameKeyPath`是：您的对象具有“timeStamp”属性，并且您希望将对象分组为每月一个部分的部分（请参阅 iOS 开发人员库中的[DateSectionTitles](http://developer.apple.com/library/ios/#samplecode/DateSectionTitles/Introduction/Intro.html)示例代码）。在这种情况下，您有

*   一个持久属性“timeStamp”，
*   使用“timeStamp”作为获取请求的第一个排序描述符，
*   一个瞬态属性“sectionIdentifier”，用作`sectionNameKeyPath`. “sectionIdentifier”由“timeStamp”计算得出，返回一个字符串，表示时间戳的年份和月份，例如“2013-01”。

FRC 做的第一件事是根据“timeStamp”属性对所有获取的对象进行*排序。*然后根据“sectionIdentifier”属性将对象*分组为多个部分。*

因此，对于 FRC 将对象分组为部分，您*确实需要*一个持久属性。最简单的解决方案是将持久属性“sectionNumber”添加到您的实体，并将其用于“sectionNameKeyPath”*和*第一个排序描述符。

# html - Chrome 中特定缩放级别的 .svg 图像模糊

> ID：14171475
> 
> 赞同：12
> 
> 时间：2013-01-05T11:50:12.200
> 
> 标签：html, css, xml, google-chrome, svg

我决定将我的网站徽标设为 svg，但它似乎在 chrome 中渲染得并不好。在 100% 缩放级别，它看起来很模糊，但如果我缩小几次，它看起来还不错。这是我正在使用它的网站：

[www.confide.re/confide](http://www.confide.re/confide)

有谁知道这可能是什么原因以及如何解决它？谢谢

如果这很重要，我在 Illustrator CS5 中制作了 svg。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-05T12:07:13.397

原因是您使用百分比来设置徽标所在元素的宽度（父元素）

这意味着徽标首先从矢量光栅化为内部位图，该位图是您为图像设置的大小的 100%。然后在您的#header css 规则中，您将 80% 用于图像所在的标题元素。

发生的情况是浏览器用来保存光栅化矢量图像的内部位图从 100% 缩放到 80%，而不是重新光栅化矢量。由于这涉及插值，因此会导致一些模糊的边缘。这是浏览器针对父级内容做出的性能选择。

解决方案是去除标题（父）元素的 80% 缩放。您可以添加新规则并像这样设置图像宽度（您当然可以改用百分比 - 只要父元素没有缩放，这不会是问题） - f.ex：

```
#header {
    margin: 0 auto;
    padding: 0;
    text-align: center;
    /*width: 80%;*/
}

.header-img {
    width:200px;
    height:auto;
    } 
```

然后在您的 html 代码中：

```
<img class="header-img" src="logo.svg" alt="" /> 
```

（您可以设置`#header img {...}`，但这会降低性能）。

这是概念验证（100% 到 80% 的小差异，但可见 - 比较最后一部分）：

使用 100% 光栅化位图将徽标大小按浏览器缩放到 80%：

![在此处输入图像描述](../Images/c3821b4bf7f0a26cabec64c6b65a1d54.png)

从标题（父）元素中删除 80%，例如将图像宽度设置为 200px：

![在此处输入图像描述](../Images/a359cbfb980dc0a0b4618565f93bb284.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T12:00:44.610

我不相信你的 SVG 有问题，因为它是 100% 矢量（没有嵌入的 PNG 文件）。

最可能的原因是您的图像尺寸相对较小，以及它如何以 72 dpi（常规屏幕像素密度）呈现。字体的不规则边缘被像素化，导致图像看起来略微模糊。

在高分辨率 MacBook Pro 和 iPhone Retina 上，您的徽标看起来精致而清晰。

它也可以放大。

![在此处输入图像描述](../Images/52092104c8e60c7b17437d02c84b0c6d.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-20T14:22:26.417

将此代码放在使用 Panzoom 的页面上：

```
<style>
        .panzoom {
            -webkit-backface-visibility: initial !important;
            -webkit-transform-origin: 50% 50%;
        }
</style> 
```

# c - 获取整数的位数

> ID：14171478
> 
> 赞同：2
> 
> 时间：2013-01-05T11:50:32.920
> 
> 标签：c

```
 bool isValidId(int* id)
  {
        if(log10(*id) != 6)
        {
           return false;
        }

   return true;
  }

  printf("Enter ID: ");
  gets(input);
  c.id = atoi(input);
  validID= isValidId(c.id);
  if(!validID)
  {
     printf("Invalid ID format -(Use example 123456 format). \n");
  } 
```

这就是它现在的样子。我要求用户输入一个 ID 并使用 isValidId 方法检查它是否有效，但是当我输入一个 ID 时我的程序崩溃了。请帮忙！谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-05T12:03:59.460

```
return *id >= 100000 && *id < 1000000; 
```

我认为这可能是一个很好的解决方案，既易于阅读又高效。

如果只是想判断它是否是有效的id，则无需获取它的长度

程序崩溃是因为isValidId的参数是指向int的指针，而不是int，所以

```
validID = isValidId(c.id); 
```

应该

```
validID = isValidId(&c.id); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T12:04:31.817

首先，我看不出有任何理由将指针传递给`isValidId`函数。您可以传递一个整数并计算位数。

```
bool isValidId(int id) {
    // count digits here
} 
```

现在至少有两种方法可以计算位数。第一个是使用`log10`. 10 基整数 n 的位数是`(int)(log10(n) + 1)`。您需要导入`math.h`才能使用`log10`. `n <= 0`您可以在调用之前检查是否`log10`。

第二种方法是循环遍历`n`。

```
int count = 0;

while (n > 0) {
    count++;
    n /= 10;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T14:10:22.673

1.  你已经声明`isValidId`了一个指向 an 的指针`int`，但是你传递给它一个 plain `int`; 在这种情况下，没有理由使用指针，所以最好`isValidId`改为使用常规`int`.

2.  **永远永远永远永远永远不要使用 Gets - 它*会*在您的代码中引入一个故障点/重大安全漏洞**。改为使用`fgets(input, sizeof input, stdin)`。

3.  如何`input`声明？它是否足够大，可以容纳尽可能多的数字`int`，加上一个符号，再加上一个 0 终止符？

4.  `log10`返回一个`double`，而不是一个`int`。要正确计算数字`log10`，您需要编写类似 `(int)floor(log10(id)) + 1`.

您可以`isValidId`稍微简化您的功能：

```
bool isValidId(int id)
{
  return (int) floor(log10(id)) + 1 == 6;
} 
```

Boolean 数据类型是 C 语言的后来者（在 C99 中引入），所以我们很多旧类型倾向于避免在我们的代码中使用 Boolean 常量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-05T12:01:21.913

我已经很久没有做过 C 但是尝试这样的事情

```
bool isValidId(int* id)
{
    char str[15];
    sprintf(str, "%d", id)
    if(strlen(str) != 6)
    {
        return false;
    }

    return true;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-05T11:57:33.343

像这样更容易：

```
#include <math.h>
bool isValidId(int *id)
{
    return (int)log10(*id) == 6;
} 
```

# virtualbox - Virtualbox Headless: not starting via systemd

> ID：14171481
> 
> 赞同：2
> 
> 时间：2013-01-05T11:50:51.707
> 
> 标签：virtualbox, archlinux, systemd

Already tried [this Topic](https://bbs.archlinux.org/viewtopic.php?id=147591) but doesn't solved it

I have placed a file called vbox.service under /lib/systemd/system/vbox.service with the following content:

```
[Unit]
Description=Virtualbox Headless VM

[Service]
ExecStart=/usr/bin/VBoxHeadless --startvm 4decf7c1-7eda-461c-92aa-835d2405a22e
ExecStop=/usr/bin/VBoxManage controlvm 4decf7c1-7eda-461c-92aa-835d2405a22e poweroff
User=my_user

[Install]
WantedBy=muti-user.target 
```

If I start and stop it via `sudo systemctl start vbox` and `sudo systemctl stop vbox`, everything works fine Then i entered the following: `sudo systemctl enable vbox`, but it wont start at boot Here is the output

```
sudo systemctl status vbox
vbox.service - Virtualbox Headless VM
      Loaded: loaded (/usr/lib/systemd/system/vbox.service; enabled)
      Active: inactive (dead)
      CGroup: name=systemd:/system/vbox.service

Jan 05 02:38:59 exia pulseaudio[1428]: [pulseaudio] main.c: Daemon startup failed.
Jan 05 02:40:08 exia systemd[1]: Started Virtualbox Headless VM.
Jan 05 02:42:02 exia systemd[1]: Stopping Virtualbox Headless VM...
Jan 05 02:42:02 exia VBoxManage[1546]: 0%...10%...20%...30%...40%...50%...60%...70%...80%...90%...100%
Jan 05 02:42:02 exia VBoxHeadless[1375]: Oracle VM VirtualBox Headless Interface 4.2.6_OSE
Jan 05 02:42:02 exia VBoxHeadless[1375]: (C) 2008-2012 Oracle Corporation
Jan 05 02:42:02 exia VBoxHeadless[1375]: All rights reserved.
Jan 05 02:42:02 exia VBoxHeadless[1375]: VRDE server is listening on port 3389.
Jan 05 02:42:02 exia VBoxHeadless[1375]: VRDE server is inactive.
Jan 05 02:42:02 exia systemd[1]: Stopped Virtualbox Headless VM. 
```

/usr/bin/VBoxHeadless --startvm 4decf7c1-7eda-461c-92aa-835d2405a22e works fine Any ideas, though?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T21:32:46.143

[Arch Linux wiki 上的这个页面](https://wiki.archlinux.org/index.php/VirtualBox#Starting_virtual_machines_with_a_service)包含一个稍微灵活的 systemd.service 文件和一些可能持有关键的附加选项。

该页面还提到 VirtualBox 4.2 有一个内置的自动启动机制，它可能会更好地工作。

`/etc/systemd/system/vboxvmservice@.service`

```
[Unit]
Description=VBox Virtual Machine %i Service
Requires=systemd-modules-load.service
After=systemd-modules-load.service

[Service]
User=user
Group=vboxusers
ExecStart=/usr/bin/VBoxHeadless -s %i
ExecStop=/usr/bin/VBoxManage controlvm %i savestate

[Install]
WantedBy=multi-user.target 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-21T11:03:38.180

您的服务未在引导时启用自动启动，因为您已为其提供了一个不存在的目标的名称，以便在启用时成为其中的一部分。正确的写法是。`WantedBy=mu**l**ti-user.target`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T00:01:37.977

如果运行后没有创建`sudo systemctl enable vbox`符号链接`/etc/systemd/system/multi-user.target.wants/vbox.service`，您可以继续手动创建它

```
sudo ln -sf /lib/systemd/system/vbox.service /etc/systemd/system/multi-user.target.wants/vbox.service 
```

那应该可以解决问题。

[一些类似的问题就这样解决了](https://bbs.archlinux.org/viewtopic.php?id=146154)。

另一个对我有用的替代方法是将`.service`文件保存在`/etc/systemd/system/`而不是`/lib/systemd/system/`. 这样做可以`systemctl enable`正常工作。

# c# - Why autocomplete intellisense doesn't work when trying to write a word that is a part of some other word?

> ID：14171482
> 
> 赞同：0
> 
> 时间：2013-01-05T11:50:57.973
> 
> 标签：c#, .net, visual-studio-2010, visual-studio, intellisense

When you try to auto complete a word that contains the same part of it's prefix in it, such as (UpdateDate) and try to write: Date, the intellisense won't view the word UpdateDate, but will view words such as CreateDate, this is obvious that the reason is that the word UpdateDate contains (date) and (Date), how to solve this?

# multithreading - 位图 Delphi 中的异步线程绘制

> ID：14171485
> 
> 赞同：3
> 
> 时间：2013-01-05T11:51:19.283
> 
> 标签：multithreading, delphi, graphics, asynchronous, bitmap

如果许多异步线程在一个全局 TBitmap 中绘制，它会给我一个错误？我应该使用关键部分创建我的代码吗？（我在网上冲浪时发现 TBitmap.Draw 不是线程安全的）

另一个问题：如果许多同步线程在全局 TBitmap 中绘制，而 VCL Timer 从 TBitmap 异步读取内容，这会引发错误吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-05T18:55:56.237

是的，您确实需要保护`TBitmap`跨多个线程的并发访问。关键部分可以序列化您的绘图代码，但是这本身还不够！主线程缓存 GDI 资源并定期对它们执行清理，这将影响您的`TBitmap`. 因此，您还需要随时`Lock/Unlock()`进行`TBitmap.Canvas`绘图/渲染，以确保 VCL 不会在您背后剥夺其资源。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-05T11:57:17.883

由于您的线程都在修改同一个位图，因此您需要序列化对该位图的所有访问。这意味着读取它的内容以及写入它。

当然，这假设多个线程绘制到共享位图是解决问题的正确方法。在不知道您的实际问题是什么的情况下，我无法对此发表评论。

**更新**

[由于Remy's answer](https://stackoverflow.com/a/14175192/505088)中描述的问题，您还必须`Lock/Unlock`在绘制位图时使用。这应该是这个问题的公认答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T12:24:38.347

当您的 TBitmap 像素发生更改时，使用监视器或信号量来控制您的线程！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-05T11:57:21.843

您可以改用 TThread.Synchronize 方法吗？

[http://docs.embarcadero.com/products/rad_studio/delphiAndcpp2009/HelpUpdate2/EN/html/delphivclwin32/Classes_TThread_Synchronize@TThread@TThreadMethod.html](http://docs.embarcadero.com/products/rad_studio/delphiAndcpp2009/HelpUpdate2/EN/html/delphivclwin32/Classes_TThread_Synchronize@TThread@TThreadMethod.html)

根据 TThread 类的文档

> 以下是使用线程时需要注意的问题和建议：
> 
> 跟踪太多线程会消耗 CPU 时间；建议的限制是单处理器系统上每个进程 16 个活动线程。
> 
> 当多个线程更新相同的资源时，它们必须同步以避免冲突。
> 
> 大多数访问对象和更新表单的方法只能在主线程中调用或使用同步对象，例如 TMultiReadExclusiveWriteSynchronizer。

# c# - 为什么要将 AsEnumerable() 方法应用于数组？

> ID：14171491
> 
> 赞同：5
> 
> 时间：2013-01-05T11:51:48.893
> 
> 标签：c#, arrays, linq, list, ienumerable

我正在阅读[C# AsEnumerable](http://www.dotnetperls.com/asenumerable)：

> “IEnumerable 接口是一个泛型接口。这意味着它定义了一个类型可以为循环实现的模板。AsEnumerable 方法是一种泛型方法，允许您将特定类型转换为其 IEnumerable 等效项”

进一步，一个代码示例：

```
using System;
using System.Linq;

class Program
{
   static void Main()
   {
       // Create an array type.
        int[] array = new int[2];
        array[0] = 5;
        array[1] = 6;
        // Call AsEnumerable method.
        var query = array.AsEnumerable();
        foreach (var element in query)
        {
            Console.WriteLine(element);
        }
    }
} 
```

听起来我需要将数组转换为**IEnumerable**类型对象才能使用循环（**foreach**？）。

但是将**foreach**直接应用于**数组**会产生完全相同的结果：

```
using System;
//using System.Linq;

class Program
{
    static void Main()
    {
        // Create an array type.
        int[] array = new int[2];
        array[0] = 5;
        array[1] = 6;
        // Call AsEnumerable method.
        //var query = array.AsEnumerable();
        foreach (var element in array)
        {
            Console.WriteLine(element);
        }
    }
} 
```

所以，整个网页都解释了**AsEnumerable()**方法对我来说是无效的。
我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T12:33:31.650

这个例子很糟糕，应该感觉很糟糕。这是一个更好的例子，虽然有点做作：

如果我在数组类型上定义了扩展方法，例如：

```
public static class ArrayExtension {

    public static bool Any<T>(this T[] source, Func<T,bool> predicate)
    {
       Console.WriteLine("Undesirable side behaviour");
       SomeResourceIntensiveOperation();

       Console.WriteLine("Inefficient implementation");
       return source.Where(predicate).Count() != 0;
    }

} 
```

我愿意

```
int[] nums = new []{1,2,3,4,5};
nums.Any(n=> n % 2 == 0); 
```

If 将执行并运行我的实现，即使我不需要它。通过做

```
nums.AsEnumerable().Any(n => n % 2 == 0); 
```

它将调用默认实现。

真正的好处是当您使用`IQueryable`实现（例如 LINQ-to-SQL）时，因为例如，[`Where`for IEnumerable](http://msdn.microsoft.com/en-us/library/bb534803.aspx)被定义为

```
public static IEnumerable<TSource> Where<TSource>(
this IEnumerable<TSource> source,
Func<TSource, bool> predicate) 
```

但[`IQueryable.Where`](http://msdn.microsoft.com/en-us/library/bb535040.aspx)定义为

```
public static IQueryable<TSource> Where<TSource>(
this IQueryable<TSource> source,
Expression<Func<TSource, bool>> predicate) 
```

当 IQueryable 行为不受欢迎时，可以调用`AsEnumerable()`来强制 IEnumerable 行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T12:01:26.097

来自[MSDN](http://msdn.microsoft.com/en-us/library/bb335435.aspx)

( `AsEnumerable<TSource>`)`IEnumerable<TSource>`方法除了将源的编译时类型从实现的类型更改`IEnumerable<T>`为`IEnumerable<T>`自身之外没有任何作用。

`AsEnumerable<TSource>`( `IEnumerable<TSource>`) 可用于在序列实现`IEnumerable<T>`但也有一组不同的公共查询方法可用时在查询实现之间进行选择。例如，给定一个通用类 Table，它实现`IEnumerable<T>`并拥有自己的方法，例如`Where`、`Select`和`SelectMany`，调用`Where`将调用 Table 的公共`Where`方法。表示数据库表的 Table 类型可以具有 Where 方法，该方法将谓词参数作为表达式树并将树转换为 SQL 以进行远程执行。如果不需要远程执行，例如因为谓词调用本地方法，则`AsEnumerable<TSource>`可以使用该方法隐藏自定义方法，而是使标准查询运算符可用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T11:56:56.773

在您的示例中逻辑上没有意义（即来自数组）。我会假设第一个代码是由初学者编写的，或者 - 更进一步 - 一个示例。

它在 LINQ 的意义上确实有意义，因为“AsEnumerable”触发了查询的评估并取决于 ORM 这可能意味着释放数据库连接以在循环中重用。

那说：

你读了太多的例子。在一个例子中，代码不是为了“好”而是为了展示一个观点。在这种情况下，演示使用 AsEnumerable 可能是有意义的 - 并且 Array 是初始化最快的可枚举对象（就代码行而言），以保持示例简短。示例指出了具体的事情，它们不是任何事情的“好代码”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-29T13:42:18.090

这只是另一个例子。假设我有这个方法：

```
static void MyMeth(int[] numbers)
{
  var query = numbers.Reverse();  // works fine, calls Linq extension

  // ... use query ...
} 
```

然后我决定改为`numbers`a `List<int>`，然后尝试：

```
static void MyMeth(List<int> numbers)
{
  var query = numbers.Reverse();  // will not compile!

  // ... use query ...
} 
```

这里的问题是`List<>`该类有*另一个*方法，也称为`Reverse`. 该方法返回`void`（因为它就地修改了原始方法`List<>`）。我不想要那个。一种解决方案是`numbers`明确地向上转型：

```
static void MyMeth(List<int> numbers)
{
  var query = ((IEnumerable<int>)numbers).Reverse();  // fine; Linq

  // ... use query ...
} 
```

但另一个解决方案是`AsEnumerable<>`，所以：

```
static void MyMeth(List<int> numbers)
{
  var query = numbers.AsEnumerable().Reverse();  // fine too; Linq

  // ... use query ...
} 
```

**结论：**方法的目的`AsEnumerable`是“忘记”专门类型上的方法，而这些方法恰好“隐藏”了通用类型上的扩展方法`IEnumerable<>`。`IQueryable<>`这在“专门”类型是/继承有（扩展）方法的情况下非常重要`Where`，`Select`等等，这些方法做一些不同的事情（即将 lambda 作为表达式树，分析它，然后“翻译”它成 SQL 什么的）比做`Where`等等`Select`。`IEnumerable<>`

# jsf - 如何在 valueChangeListener 方法中获取更新的模型值？

> ID：14171493
> 
> 赞同：10
> 
> 时间：2013-01-05T11:52:12.580
> 
> 标签：jsf, valuechangelistener

我在 valueChangeListener 上遇到了一个问题。我在 Weblogic 6.0 上使用 JSF 1.2。

我有一个页面，页面顶部有 2 个单选按钮，名称分别为 Name1 和 Name2。单击 Name1 时，单选按钮下方会显示 Name1 详细信息（大约有 30 个字段），单击 Name2 时会显示 Name2 详细信息。现在用户可以更新点击的命名细节。例如，用户单击 Name1 并更改地址字段，然后单击 Name2 并更改 Name2 的年龄。当用户单击 Name1 时，地址应该会显示为使用新值更新，当用户再次单击 Name2 时，应该会更新年龄。

我使用 valueChangeListener 来解决它，因为我需要更改事件的旧值和新值。问题是，在验证阶段结束时调用 valueChangeListener，我没有在 valueChangeListener 方法中获取 Name1 字段的更新地址。有人可以帮我解决任何问题吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-05T14:18:03.277

> *由于在验证阶段结束时调用了 valueChangeListener，我没有在 valueChangeListener 方法中获取 Name1 字段的更新地址*

将事件排队到`INVOKE_ACTION`阶段，使其充当动作（侦听器）方法。

```
public void valueChangeListenerMethod(ValueChangeEvent event) {
    if (event.getPhaseId() != PhaseId.INVOKE_APPLICATION) {
        event.setPhaseId(PhaseId.INVOKE_APPLICATION);
        event.queue();
        return;
    }

    // Do your original job here. 
    // It will only be entered when current phase ID is INVOKE_APPLICATION.
} 
```

随着`INVOKE_ACTION`阶段的运行`UPDATE_MODEL_VALUES`，更新后的模型值将以“通常的方式”可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-10T08:45:58.987

*（对 BalusC 答案的扩展）*
正如我在对 BalusC 答案的评论中所指出的，这里是带有使用示例的支持方法：

```
public static boolean moveToEndOfUpdateModel(FacesEvent event) {
    if (event.getPhaseId() == null  ||  event.getPhaseId().getOrdinal() < PhaseId.UPDATE_MODEL_VALUES.getOrdinal()) {
        // see UIViewRoot.processUpdates():  first components.processUpdates(), then broadcastEvents()
        event.setPhaseId(PhaseId.UPDATE_MODEL_VALUES);
        event.queue();
        return true;
    }
    return false;
} 
```

（*并重复我进行相关更改的原因*：
事件被放在*队列的末尾*，所以如果你有一个 valueChangeEvent 和一个动作方法，那么事件将在动作方法**之后**执行——通常不是什么你要。）

在侦听器方法中，我像这样使用它：

```
public void myValueChangeMethod(ValueChangeEvent vce) {
    if (JSFUtils.moveToEndOfUpdateModel(vce))  return;
    // ... perform my actions here, with access to already updated bean values ...
} 
```

对于 JSF 2+，您可以更好地使用`<f:ajax listener="...">`- 如果您不被迫使用不支持此功能的组件库（如旧的特立尼达）。

# lucene - Calculate DF using Lucene doesn't work

> ID：14171494
> 
> 赞同：0
> 
> 时间：2013-01-05T11:52:15.003
> 
> 标签：lucene, tf-idf

I have an index with 2 docs at the moment (will add some more after everything will work ok). I try to `calculate the df` for a specific term but I get all the time the total number of docs in the index as a result.for debug purpose I entered a unique string in one doc so the result of the df should be **1**. but, it returns **2**. at the end of the process I'll need a `tf/idf` score for every word in the index.

I've tried the following code:

```
public void calcDF (String term) throws IOException
{

     //open the index file
    Directory dir = FSDirectory.open(new File("d:/index"));
    //create a reader
    IndexReader ir = IndexReader.open(dir);
    //for debug
    System.out.println("num of docs in index : " + ir.maxDoc()); 
    Term t = new Term("content",term);
    int df = ir.docFreq(t);
} 
```

Tried also with `IndexSearcher searcher = new IndexSearcher(ir);` instead of `indexReader` but no luck.

**P.S:** I'm using `lucene 3.5`

# ruby-on-rails - Shopify API: does Shopify cache API queries? How can I refresh one?

> ID：14171497
> 
> 赞同：0
> 
> 时间：2013-01-05T11:52:40.243
> 
> 标签：ruby-on-rails, shopify

I'm building a Shopify App and I got stuck as the app was behaving strangely.

I investigated the issue and I found out that saving a product with the Shopify API and then asking Shopify to read the just saved values still outputs outdated information.

Reading the product again after a few seconds outputs the true values of the saved product.

It seems Shopify is caching the query of a product and for a few seconds (with my tests the threshold seem to be 7 seconds) still replies with old data. Is this true?

In this case is there a way to tell Shopify to refresh the data of a product? For example in Ruby on Rails I could just use the ".reload" method on the object.

My problem is that if a user is using the Shopify website admin and updates a product rapidly - lets say it is entering updated stock quantity for different variants - the product-update webhook is called rapidly and the second webhook call doesn't read the changes made by the first webhook call.

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T16:29:42.930

也许来自 shopify 的人会有更好的答案，但我注意到了同样的行为 - 我的假设不是它正在缓存，而是更改排队，所以在处理之前可能会有延迟。我通过在我的 webhook 处理中添加延迟来解决它 - 所以当 webhook 进入时我的脚本会立即响应（使用 200，并关闭连接），但然后延迟执行以在应用我的更改之前让更改生效.

# apache - Cakephp RSS - Exhausting memory causing blank page for website

> ID：14171499
> 
> 赞同：0
> 
> 时间：2013-01-05T11:53:08.167
> 
> 标签：apache, cakephp, rss, crash, feed

When I put `Router::parseExtensions('rss');` to `routes.php`, Apache crashes. So i can't make rss feed. Any ideas ?

here is a [screenshot](https://dl.dropbox.com/u/29931274/screen.jpg)

```
[Sat Jan 05 13:02:35.131540 2013] [mpm_winnt:notice] [pid 1576:tid 252] AH00428: Parent: child process exited with status 3221225477 -- Restarting.
[Sat Jan 05 13:02:35.686942 2013] [ssl:warn] [pid 1576:tid 252] AH01873: Init: Session Cache is not configured [hint: SSLSessionCache]
[Sat Jan 05 13:02:35.733742 2013] [mpm_winnt:notice] [pid 1576:tid 252] AH00455: Apache/2.4.3 (Win32) OpenSSL/1.0.1c PHP/5.4.7 configured -- resuming normal operations
[Sat Jan 05 13:02:35.733742 2013] [mpm_winnt:notice] [pid 1576:tid 252] AH00456: Server built: Aug 18 2012 12:41:37
[Sat Jan 05 13:02:35.733742 2013] [core:notice] [pid 1576:tid 252] AH00094: Command line: 'c:\\xampp\\apache\\bin\\httpd.exe -d C:/xampp/apache'
[Sat Jan 05 13:02:35.733742 2013] [mpm_winnt:notice] [pid 1576:tid 252] AH00418: Parent: Created child process 4156
[Sat Jan 05 13:02:36.794544 2013] [ssl:warn] [pid 4156:tid 264] AH01873: Init: Session Cache is not configured [hint: SSLSessionCache]
[Sat Jan 05 13:02:36.856944 2013] [mpm_winnt:notice] [pid 4156:tid 264] AH00354: Child: Starting 150 worker threads. 
```

this is err log

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T23:12:57.713

从错误屏幕上看，您的 RSS 中可能包含太多数据并且正在耗尽内存。您应该检查返回的数据并确保它是有限的。

# c# - ABCpdf 访问登录区域内的页面

> ID：14171503
> 
> 赞同：2
> 
> 时间：2013-01-05T11:53:56.567
> 
> 标签：c#, asp.net, abcpdf

在我的网站中，我使用[ABCpdf](http://www.websupergoo.com/abcpdf-1.htm)从 HTML 动态生成 pdf。我有两个条件：

1.  用户已登录，显示第一页并将第一页绘制为 pdf
2.  用户未登录显示的第二页并将第二页绘制为 pdf

我的代码是这样的：

```
 string url = HttpContext.Current.Request.Url.AbsoluteUri;
        Doc theDoc = new Doc();
        theDoc.AddImageUrl(url);
        theDoc.Save(HttpContext.Current.Server.MapPath("~/media/pdf/1212.pdf"));
        theDoc.Clear(); 
```

现在问题是这样的，当用户登录时，我可以看到第一页，但是当绘制 PDF 时，它包含未登录的页面（第二页）。

我正在使用 inproc 会话模式来存储我的登录详细信息。据我了解，即使用户已登录，当此代码执行时，服务器会返回未登录页面，获取 HTML 以呈现 PDF 的请求不会延续会话，而是创建一个新的会话。

任何人都可以给我任何线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T11:29:16.280

原因可能是 ABCPdf 在呈现 HTML 时的工作方式是不是用户访问要呈现的页面，而是服务器和服务器不会有用户登录会话，它会访问页面，就像你刚刚键入一样服务器上浏览器中的 URL。因此，当您通过 ABCpdf 访问该页面时，它就像用户未登录一样。

我过去克服此问题的方法是将加密的查询字符串 pram 传递到页面并在 PDF 呈现页面上检查这一点，并根据该 pram 值更改显示的结果。

# asp.net - 在实体框架中检索延迟加载列表时出现“内存不足”异常

> ID：14171506
> 
> 赞同：0
> 
> 时间：2013-01-05T11:54:12.367
> 
> 标签：asp.net, .net, entity-framework

在访问实体列表时，系统会抛出“内存不足”异常。

调用堆栈有一个重复的调用块，直到应用程序内存不足。

调用堆栈：

```
.
.
.
at System.Data.Query.InternalTrees.BasicOpVisitorOfT`1.VisitNode(Node n)
/* Repeating Block */
at System.Data.Query.InternalTrees.BasicOpVisitorOfNode.VisitChildren(Node n)
at System.Data.Query.PlanCompiler.JoinElimination.VisitDefaultForAllNodes(Node n)
at System.Data.Query.PlanCompiler.JoinElimination.VisitDefault(Node n)
at System.Data.Query.InternalTrees.BasicOpVisitorOfNode.VisitPhysicalOpDefault(PhysicalOp op, Node n)
at System.Data.Query.InternalTrees.BasicOpVisitorOfT`1.Visit(PhysicalProjectOp op, Node n)
at System.Data.Query.InternalTrees.PhysicalProjectOp.Accept[TResultType](BasicOpVisitorOfT`1 v, Node n)
at System.Data.Query.InternalTrees.BasicOpVisitorOfT`1.VisitNode(Node n)
/* Repeating Block */
at System.Data.Query.PlanCompiler.JoinElimination.Process()
at System.Data.Query.PlanCompiler.PlanCompiler.Compile(List`1& providerCommands, ColumnMap& resultColumnMap, Int32& columnCount, Set`1& entitySets)
at System.Data.Query.PlanCompiler.PlanCompiler.Compile(DbCommandTree ctree, List`1& providerCommands, ColumnMap& resultColumnMap, Int32& columnCount, Set`1& entitySets)
at System.Data.EntityClient.EntityCommandDefinition..ctor(DbProviderFactory storeProviderFactory, DbCommandTree commandTree)
at System.Data.EntityClient.EntityProviderServices.CreateCommandDefinition(DbProviderFactory storeProviderFactory, DbCommandTree commandTree)
at System.Data.EntityClient.EntityProviderServices.CreateDbCommandDefinition(DbProviderManifest providerManifest, DbCommandTree commandTree)
at System.Data.Common.DbProviderServices.CreateCommandDefinition(DbCommandTree commandTree)
at System.Data.Objects.Internal.ObjectQueryExecutionPlan.Prepare(ObjectContext context, DbQueryCommandTree tree, Type elementType, MergeOption mergeOption, Span span, ReadOnlyCollection`1 compiledQueryParameters, AliasGenerator aliasGenerator)
at System.Data.Objects.EntitySqlQueryState.GetExecutionPlan(Nullable`1 forMergeOption)
at System.Data.Objects.ObjectQuery`1.GetResults(Nullable`1 forMergeOption)
at System.Data.Objects.ObjectQuery`1.Execute(MergeOption mergeOption)
at System.Data.Objects.DataClasses.EntityCollection`1.Load(List`1 collection, MergeOption mergeOption)
at System.Data.Objects.DataClasses.EntityCollection`1.Load(MergeOption mergeOption)
at System.Data.Objects.DataClasses.RelatedEnd.Load()
at System.Data.Objects.DataClasses.RelatedEnd.DeferredLoad()
at System.Data.Objects.Internal.LazyLoadBehavior.LoadProperty[TItem](TItem propertyValue, String relationshipName, String targetRoleName, Boolean mustBeNull, Object wrapperObject)
at System.Data.Objects.Internal.LazyLoadBehavior.<>c__DisplayClass7`2.<GetInterceptorDelegate>b__1(TProxy proxy, TItem item) 
```

关于这里可能是什么问题的任何线索，或者可能是关于如何调试问题的一些提示？

我试图建模的层次结构有点大，具有 3 级继承：

![在此处输入图像描述](../Images/b87cc9f97244b28a39245057beb068db.png)

从 A1 派生的类大约有 20 个，从 A2 派生的类大约有 30 个。当我尝试访问“A”类型的对象时，系统会“内存不足”。问题似乎在于 EF 如何尝试生成执行计划和相应的 SQL 以访问“A”类型的项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T06:47:04.000

我能够解决将映射从 TPT 移动到 TPH 的问题。我还必须通过重命名具有相同名称的列来避免EF Code First 中[记录的错误](http://entityframework.codeplex.com/workitem/583)。

现在我遇到了一个跨越数小时的 EF 启动时间问题。我已经在 SO, [here](https://stackoverflow.com/questions/14315425/entity-framework-taking-a-lot-of-time-initializing-model)发布了相同的内容。

# c# - Search inside List for 2 columns that match

> ID：14171508
> 
> 赞同：2
> 
> 时间：2013-01-05T11:54:21.057
> 
> 标签：c#, linq, list

I want to store objects in a List and have therefore created a class with 3 properties; prop1\. prop2 and prop3.

To add a new Item to my List I'm using for example

```
_st.Add(new Bld(100,20,"Test1");
_st.Add(new Bld(101,20,"Test2");
_st.Add(new Bld(102,54,"Test3"); 
```

Now: How can I search the list to get the index of an Item that contains `myObj.prop2 = 20 AND myObj.prop3="Test1"`?

I've tried something like

```
_st.Where(tk => tk.prop1 == 1000 AND tk.Title == "Test1"); 
```

but this obviously doesn't work.

Any idea how to solve this problem?

Thanks in advance

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T11:56:55.323

您应该使用[FindIndex](http://msdn.microsoft.com/en-us/library/x1xzf2ca.aspx)方法，并使用`&&`而不是`AND`

```
_st.FindIndex(tk => tk.prop1 == 1000 && tk.Title == "Test1"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T12:02:11.337

要获取项目的索引，请使用**[FindIndex](http://msdn.microsoft.com/en-us/library/x1xzf2ca.aspx)**方法，例如

```
_st.FindIndex(tk => tk.prop1 == 1000 && tk.Title == "Test1") 
```

希望这会有所帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T11:58:52.297

SQL 运算符不需要应用：

```
_st.Where(tk => tk.prop1 == 1000 && tk.Title == "Test1"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-05T11:59:06.083

你必须试试这个：[FindIndex 方法](http://msdn.microsoft.com/en-us/library/x1xzf2ca.aspx)

```
int index = _st.FindIndex(tk => tk.prop1 == 1000 && tk.Title == "Test1"); 
```

或者

```
int index1 = _st.Select((tk, index) => new { _st = tk, Index = index })
          .FirstOrDefault(tk => tk._st.prop1 == 1000 && tk._st.Name_ar == "Test1")
          .Index; 
```

# magento - 产品没有显示在magento主页？

> ID：14171511
> 
> 赞同：0
> 
> 时间：2013-01-05T11:54:56.620
> 
> 标签：magento, magento-1.7, product

我在 magento 管理面板中添加了一些产品，但我不知道如何将其显示到我的主页..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:19:56.153

在主页中使用以下代码

{{block type="catalog/product_view" product_id="166" template="catalog/product/view.phtml"}}

或者

在您的模板目录访问中创建新的 singleproduct.phtml 文件

[http://www.magentocommerce.com/boards/viewthread/19173/](http://www.magentocommerce.com/boards/viewthread/19173/)

了解更多详情

# java - Cannot log in with xmpp server using smack library in java

> ID：14171512
> 
> 赞同：0
> 
> 时间：2013-01-05T11:54:59.343
> 
> 标签：java, ssl, xmpp, smack

I develop xmpp server and client application smack library. And connection between Server/Client established easily but when i call 'connection.login (user,password)' function then following exception occurs.

**SASL authentication PLAIN failed:incorrect-encoding:**

```
at org.jivesoftware.smack.SASLAuthentication.authenticate(SASLAuthentication.java:337)
at org.jivesoftware.smack.XMPPConnection.login(XMPPConnection.java:203)
at org.jivesoftware.smack.Connection.login(Connection.java:348)
at com.test.Client1Gui.connect(Client1Gui.java:86)
at com.test.Client1Gui$1.actionPerformed(Client1Gui.java:52)
at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
at java.awt.Component.processMouseEvent(Unknown Source)
at javax.swing.JComponent.processMouseEvent(Unknown Source)
at java.awt.Component.processEvent(Unknown Source)
at java.awt.Container.processEvent(Unknown Source)
at java.awt.Component.dispatchEventImpl(Unknown Source)
at java.awt.Container.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
at java.awt.Container.dispatchEventImpl(Unknown Source)
at java.awt.Window.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
at java.awt.EventQueue.access$000(Unknown Source)
at java.awt.EventQueue$1.run(Unknown Source)
at java.awt.EventQueue$1.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue$2.run(Unknown Source)
at java.awt.EventQueue$2.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue.dispatchEvent(Unknown Source)
at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-04T08:02:47.613

试试这个代码：

```
SASLAuthentication.supportSASLMechanism("PLAIN");
config.setSASLAuthenticationEnabled(true); 
```

# ruby-on-rails - 创建具有 3 个嵌套级别的哈希的干净方法，如果它们不存在则创建级别

> ID：14171517
> 
> 赞同：2
> 
> 时间：2013-01-05T11:55:30.327
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, hash, activesupport

这就是我现在所做的

```
h = Hash.new { |h1, k1| h1[k1] = Hash.new { |h2, k2| h2[k2] = {} } } 
```

虽然它有效，但它看起来有点模棱两可。也许有更好的方法来做同样的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T16:58:03.527

```
h = hash.new{ |h,k| h[k] = Hash.new(&h.default_proc) } 
```

Then you can assign in anyway you like,

```
h[:a][:b][:c][:d] = 3 
```

Reference: [ref](https://stackoverflow.com/questions/10253105/dynamically-creating-a-multi-dimensional-hash-in-ruby/10253359#10253359)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T14:56:15.240

您可以像这样递归地创建一个。

```
def create n
  return {} if n == 0
  Hash.new {|h, k| h[k] = create(n - 1)}
end

h  = create 3
h[1][1][1] = 2
p h[1][1][1]       # => 2
p h[2][1][2]       # => {}
h[2][1][2] = 3
p h                # => {1=>{1=>{1=>2}}, 2=>{1=>{2=>3}}} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T15:44:18.900

你的代码是正确的。您可以对其进行分类：

```
class NestedHash < Hash

  def initialize(depth)
    self.default_proc = Proc.new {|h,k| h[k] = NestedHash.new(depth-1)} if depth && depth > 1
  end

end

h = NestedHash.new(3) 
```

# ios - 使用“模态推送”到 viewController 并且无法在顶部添加 UINavigationItem-(Controller, Bar)

> ID：14171518
> 
> 赞同：0
> 
> 时间：2013-01-05T11:55:35.430
> 
> 标签：ios, uiviewcontroller, uinavigationcontroller, uinavigationbar, uinavigationitem

在我的项目中，我有**1** `viewController`被所有其他“**模态推送**`viewControllers`”推送。我正在尝试向它添加一个`UINavigationItem`（顶部的栏），但它不起作用。我在项目的另一个地方有一个类似的 viewController，据我所知，我用它做了完全相同的事情并且能够添加`UINavigationItem`到它？

现在我需要帮助了解为什么我无法添加`UINavigationItem`到我的 viewController？我正在尝试使用以下代码：

```
 self.navigationItem.rightBarButtonItems = [NSArray arrayWithObjects:self.nextButton,  self.menuButton, nil]; 
```

我没有收到任何错误或任何迹象表明它为什么不能在我的 viewController 上运行，只是什么也没发生？这是它的屏幕：[http ://tinypic.com/view.php?pic=2itisgp&s=6](http://tinypic.com/view.php?pic=2itisgp&s=6)

viewController 都连接到 a `tabBar`，`UINavigationController`但它应该没关系，因为我决定用“**模态**”推动它？如果我使用正常的“推送”，`UINavigationItem`则会出现，并将链接到应用程序的其余部分。但这就是问题所在，我希望它是一张有自己的`UINavigationBar`（项目、控制器）或任何你称之为的幻灯片。这背后的原因要复杂得多，在这里解释起来只会让人厌烦。因此，让我们关注*为什么*我无法`UINavigationItem`在使用“**模态推送**”时在此视图控制器上添加（栏、控制器）？？？？？？有知道的请赐教！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T12:20:12.457

一种简单的方法来实现这一点：

```
UINavigationController *navigationController = [[UINavigationController alloc]initWithRootController:yourViewController];

[viewController presentModalViewController:navigationController animated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T13:45:34.360

如果您使用 Storyboard，则必须将导航控制器直接嵌入到呈现的模态控制器（编辑器 > 嵌入 > 导航控制器）

您的情节提要应如下所示：

```
FirstVC -> Navigation Controller -> SecondVC 
```

# ajax - 如何在 django 中调试 ajax 请求

> ID：14171520
> 
> 赞同：1
> 
> 时间：2013-01-05T11:55:40.790
> 
> 标签：ajax, django

我知道例如：

```
def home(request):
    if request.method == 'POST':
        k = 'p' % 1
        return HttpResponse(simplejson.dumps(dict()),  mimetype='application/javascript')
    else:
        k = 'p' % 1
        return render_to_response('index.html',locals());

url(r'^$', 'app.home'), 
```

如果我使用浏览器访问主页，django会返回一个调试页面给我，并显示有错误`k = 'p' % 1`

但是如果我使用`$.ajax()`向这个视图发送帖子，chrome 的控制台只会显示`POST http://(some url here):8000/ 500 (INTERNAL SERVER ERROR)`

那么有什么好的方法来调试第二种情况吗？我不知道调试 django，有没有人有更好的方法来调试 django？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T11:57:00.220

看看[哨兵](https://github.com/getsentry/sentry)（和相应的乌鸦）

（该`Network`选项卡应该能够向您显示请求和相应的响应。如果请求是 ajax，我相信较新的 django 版本甚至可以为您提供更简单的堆栈跟踪版本）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T12:09:31.633

`error CallBack`在ajax中有一个。它会吐出实际的错误。

```
$.ajax({
        type: 'POST',
        url: '{% url 'url_name_for_your_view_here' %}',
        data: {'csrfmiddlewaretoken': '{{csrf_token}}'},
        dataType: "text",
        success: function(response) {
            //do something here if everything goes well
        },
        error: function(rs, e) {
            alert(rs.responseText); //throw actual error, just for debugging purpose
            alert('Oops! something went worng..'); // alert user that something goes wrong
         }
     }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T16:37:46.843

有许多第三方应用程序使调试 ajax 更容易。我过去曾成功使用过它：[https ://github.com/yaniv-aknin/django-ajaxerrors](https://github.com/yaniv-aknin/django-ajaxerrors)

或者，如果您不喜欢使用应用程序，chrome 开发人员工具可能就足够了，正如此线程中所建议的那样：[Django：Are there any tools/tricks to use on debugging AJAX response？](https://stackoverflow.com/questions/8059071/django-are-there-any-tools-tricks-to-use-on-debugging-ajax-response)

# jquery - 如何连接到另一个位置

> ID：14171524
> 
> 赞同：-1
> 
> 时间：2013-01-05T11:56:24.437
> 
> 标签：jquery

如何连接到另一个位置

我想从外部站点下载数据

我想将它包含在我的网站中

用过这个

```
<head>
<script>
$(function(){
    $.ajax({
        url: "https://www.google.com.sa" ,
        datatype: "html",
        success : function(){
            $("#abc").append(data);
        }
    });
});
</script>
</head>

<body>
<div id='abc'></div>    
</body> 
```

但是没有成功

我试过这个

```
<script>
$(function(){
    $("#abc").load("http://google.com");
});
</script> 
```

但是没有成功

我想从外部站点下载数据

对吗？？

但是怎么办？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T12:06:17.477

您不能使用 java 脚本在加载 JS 的域之外调用。您可以尝试的另一件事是使用 iframe

试试这个方法

```
$(document).ready(function(){
    $("iframe").attr("src","http://www.google.com")
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T12:03:09.617

您的第一个代码工作正常。但是，您必须通过网络服务器执行它，而不是在本地执行。

看这个线程：[Access-Control-Allow-Origin 不允许 Origin null](https://stackoverflow.com/questions/8456538/origin-null-is-not-allowed-by-access-control-allow-origin)

# excel - 使用 Excel 的 vb6 中对象“~”的方法“~”失败

> ID：14171526
> 
> 赞同：1
> 
> 时间：2013-01-05T11:56:27.177
> 
> 标签：excel, vb6

我们的 VB 6.0 应用程序之一遇到问题。有一行代码通过 Excel.Workbook 将文本文件转换为 excel 文件。当我们通过 Windows 应用程序运行时，此代码工作正常。

但是，如果我们从用 C#.Net 开发的 Windows 服务运行相同的 exe，那么它会在这一行出现此错误

```
oWB.SaveAs FileName, XlFileFormat.xlExcel8 
```

我试图在谷歌上搜索，但没有成功。

任何建议都会非常有帮助。

提前致谢。

问候 AR

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T14:49:34.893

虽然不能回答您的具体问题，但您可能会考虑：

[Office 服务器端自动化的注意事项](http://support.microsoft.com/KB/257757)

> **Microsoft 目前不推荐也不支持任何无人值守、非交互式客户端应用程序或组件（包括 ASP、ASP.NET、DCOM 和 NT 服务）的 Microsoft Office 应用程序自动化，因为 Office 可能表现出不稳定的行为和/或在此环境中运行 Office 时出现死锁。**

粗体字在文章中是粗体。

基本上你不应该尝试你正在做的事情。

# sql - SQL Server 查询顶行以选择条件

> ID：14171527
> 
> 赞同：2
> 
> 时间：2013-01-05T11:56:45.713
> 
> 标签：sql, sql-server, database

我想跳过前 5 条记录，然后选择 10 条记录

我`email`在表中有一列`user`。在这里，我尝试`user`使用此查询从表中选择前 10 个唯一行

```
select DISTINCT TOP 10 email from user 
```

现在我正在尝试从跳过前 5 条记录的表中选择前 10 个唯一行

```
select DISTINCT SKIP 5 TOP 10 email from user 
```

这没有完成并返回错误..谁能帮助我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T12:07:51.917

```
SELECT A.NAME FROM
(SELECT distinct RANK() OVER(ORDER BY NAME) RNK,NAME FROM USERS) A
WHERE A.RNK>4 AND A.RNK<16 
```

使用`LIMIT`并不能保证您会以正确的顺序获得顶行。如果你使用`ANALYTIC`函数，它会给你正确的结果。

[**SQL_LIVE_DEMO**](http://sqlfiddle.com/#!3/598f5/2)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T12:10:25.727

这是一种方法。我喜欢将公用表表达式用于这样的一些事情，因为它使查询易于理解，尽管这并不是特别复杂。

```
WITH CTE AS
(
    Select Distinct Email From User
 )
 ,
 CTE1 AS
 (
    Select Email, ROW_NUMBER() over (ORDER BY Email) AS RowNumber
    From CTE
 )

Select Top 10 * From CTE1 Where RowNumber > 5 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T12:10:17.470

```
with t2 as
(
select t1.*,
 row_number() over (order by id) rn 
from 
  (select email, max(id) as id from [user] group by email) as  t1
)

select * from t2 where rn between 5 and 10 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-05T12:25:29.250

这个怎么样：

```
SELECT * 
FROM (SELECT *, ROW_NUMBER() OVER (ORDER BY email) AS row 
      FROM user ) a 
WHERE row > 5 and row <= 10 
```

我认为您使用 SKIP 不正确，它应该是 ORDER BY 子句的一部分。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-05T10:28:32.630

```
SELECT DISTINCT TOP(10) Email FROM TableName WHERE Email not in (SELECT TOP(5) Email From TableName) 
```

您可以尝试此代码，在此查询中获取不同的 10 个电子邮件 ID，如您在此问题中所说，跳过 5 条记录。

# android - 属性缺少 android 命名空间前缀

> ID：14171529
> 
> 赞同：18
> 
> 时间：2013-01-05T11:56:55.360
> 
> 标签：android, xml

我正在创建一个使用 res 文件夹中的 menu.xml 文件的 android 应用程序。但我收到了上述错误。这是什么意思？我该如何解决？

**菜单.xml：**

```
<?xml version="1.0" encoding= "utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">

<item id="@+id/my_location"
android:icon="@drawable/my_location"
android:title:="Current location" />

<item id="@+id/mapview_satellite"
android:icon="@drawable/satelliteview"
android:title="Satellite View" />

<item id="@+id/mapview_normal"
android:icon="@drawable/normalview"
android:title="Normal view" />
</menu> 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-05T12:00:51.917

更改`<item id="@+id/my_location"`为`<item android:id="@+id/my_location"`。这在所有三个地方。

另外，在这里：`android:title:="Current location"`删除`title`.

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-12-25T17:34:02.853

您还需要确保以下两行在您的属性列表中：

```
xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools" 
```

如果您忽略这些，Eclipse 只会给您“缺少 android 前缀”错误。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-06-28T05:01:42.733

信不信由你，对于任何试图通过下载书籍中的示例来工作的人，您可能需要确保您有真正的引号，因为编译器可以理解它们。当我尝试以小方式修改 XML 文件时，我遇到了与 OP 相同的错误，以及许多类似的解析错误。然后我注意到粘贴的代码片段中的引号与我键盘上的引号不同（在片段中它们向右倾斜，如果我自己输入它们，它们是直上直下的）。

我知道这听起来很疯狂，我自己都不敢相信，但是当我重新输入我的报价时，它工作得很好。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-05-14T01:34:11.117

添加**android:**在属性解决我的问题之前。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-22T02:49:56.740

有时 XML 代码可能编写正确，因此您需要简单地剪切当前拥有的内容，然后将其从行号中删除，然后重新粘贴，错误应该会得到修复。如果没有，那么您就知道您的代码是错误的。xml 默认是识别您首先放置的内容，需要删除才能重新开始。相信我，我刚刚在那个问题上花了 3 天时间，并且完全按照上面所说的做了，祝你好运。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-05T12:01:52.090

在项目目录中创建一个 XML 文件`res/menu/`不在`res`文件夹 &

不要忘记为 id 属性添加前缀。

**试试这样**：

```
<?xml version="1.0" encoding= "utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/my_location"
        android:icon="@drawable/my_location"
        android:title="Current location" />

    <item android:id="@+id/mapview_satellite"
        android:icon="@drawable/satelliteview"
        android:title="Satellite View" />

    <item android:id="@+id/mapview_normal"
        android:icon="@drawable/normalview"
        android:title="Normal view" />
</menu> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-01-12T20:07:32.123

如果你有这样的事情：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android">
   <data>
        <variable  name="person" type="com.abc.PersonEntity"/>
    </data> 
```

将数据移动到布局标签内：

```
<layout xmlns:android="http://schemas.android.com/apk/res/android"  >
       <data>
          <variable  name="person" type="com.abc.PersonEntity"/>
       </data>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"> 
... 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-05T12:03:05.910

您忘记为`id`属性添加前缀。尝试这样做：

```
<?xml version="1.0" encoding= "utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/my_location"
        android:icon="@drawable/my_location"
        android:title="Current location" />

    <item android:id="@+id/mapview_satellite"
        android:icon="@drawable/satelliteview"
        android:title="Satellite View" />

    <item android:id="@+id/mapview_normal"
        android:icon="@drawable/normalview"
        android:title="Normal view" />
</menu> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-01-05T12:03:46.053

有两个错误愚蠢的错误

```
- id isn't it attribute is android:id
- First itme android:title:= you have written extra colon after title 
```

这是实现的代码

```
<?xml version="1.0" encoding= "utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

    <item
        android:id="@+id/my_location"
        android:icon="@drawable/my_location"
        android:title="Current location"/>
    <item
        android:id="@+id/mapview_satellite"
        android:icon="@drawable/satelliteview"
        android:title="Satellite View"/>
    <item
        android:id="@+id/mapview_normal"
        android:icon="@drawable/normalview"
        android:title="Normal view"/>

</menu> 
```

# vector-graphics - 描边形状而不使其变大（AI 或 CorelDraw）

> ID：14171538
> 
> 赞同：0
> 
> 时间：2013-01-05T11:58:08.530
> 
> 标签：vector-graphics, adobe-illustrator, coreldraw

在 Illustrator 或 CorelDraw 中是否有办法描边多个形状并保持它们之间的当前距离？还是在不使它们变大的情况下抚摸它们？

我有一张包含很多形状的地图，我必须将它们全部描边，但是由于描边是 50:50 并且形状彼此非常接近，我将不得不重新定位它们（​​这意味着重新定位超过150 个形状，我不知道确切的数量；最棘手的部分是，因为它们代表了一张地图，所以它们有很多必须适合的边缘 - 一个一个地重新定位它们将是一场噩梦）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T05:46:18.360

如果您的形状是闭合路径，则可以将笔划与内部对齐。有关[adobe 帮助页面的更多信息。](http://help.adobe.com/en_US/illustrator/cs/using/WSA1E31D7D-13E6-41ac-AA8C-4AD129B9FC1Ca.html#WS714a382cdf7d304e7e07d0100196cbc5f-6511a)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T06:15:53.047

CorelDraw 脚本：

```
Sub BoxInset()
Optimization = True
Set d = ActiveDocument
d.BeginCommandGroup "Box Inset"
For Each sl In ActiveSelection.Shapes
    With sl
        ow# = .Outline.Width
        .GetSize x#, y#
        .SetSize x - ow, y - ow
        .Move ow / 2, -ow / 2
    End With
Next
d.EndCommandGroup: Optimization = False: ActiveWindow.Refresh
End Sub 
```

# android - 选项卡布局和 Android sdk

> ID：14171544
> 
> 赞同：1
> 
> 时间：2013-01-05T11:58:51.937
> 
> 标签：android, android-layout, sdk, android-tabs

到目前为止，我一直在使用 TabActivity 进行选项卡布局。

由于不推荐使用此 Activity 形成选项卡界面的最佳方式是什么？

我看到很多教程展示了 TabFragments 的使用，但这仅适用于高 sdk 版本（15 及更高版本）。

那么考虑到它应该与 API 10 及更高版本一起使用并且当然不被弃用，我可以将哪些对象用于选项卡布局？

一个例子会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T12:11:28.100

正如Commonsware[在这里](https://stackoverflow.com/questions/10297293/andorid-how-can-i-replace-the-deprecated-tabhost)所说::

Android 中的“已弃用”表示“我们认为您应该调查更好的解决方案”。“已弃用”很少意味着“它无法使用”。TabHost，AFAIK，在 Android 4.0 上运行良好。

还有一个名为[ActionBarSherlock](http://actionbarsherlock.com/)的项目，其演示具有兼容性库的所有功能。源代码也可以在 github 上找到。

还有[这个](http://mobile.tutsplus.com/tutorials/android/android-compatibility-working-with-fragments/)教程可以帮助你如何使用 TabFragement。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T12:17:51.863

我之前也遇到过同样的问题，最好的解决方案是将 ActionBarSherlock 与 Fragments 一起使用，并且有一个非常好的教程如何在您的应用程序中实现 TabHost，您可以在此处找到：

[ActionBarSherlock:FragmentTabs](https://github.com/JakeWharton/ActionBarSherlock/blob/master/samples/fragments/src/com/actionbarsherlock/sample/fragments/FragmentTabs.java)。

它对我有用，希望它也对你有用:)

PS 还有一件事，当您构建应用程序以寻找设计指南和构建应用程序的最佳方法时，这真的很好，这样您就可以利用 Android 应用程序开发中的最新消息。

# jquery - 使用 Flux-Slider 效果更改 Jquery 标准效果

> ID：14171547
> 
> 赞同：0
> 
> 时间：2013-01-05T11:59:15.913
> 
> 标签：jquery, slider, jquery-effects, flux

这是我的代码：

```
 $("#headerimg" + currentContainer).fadeOut(function() {
        setTimeout(function() {
            $("#headertxt").css({"display" : "block"});
            animating = false;
        }, 500);
    });
}; 
```

但我不想要这种效果（**fadeOut**），我想使用 Flux-Slider 的效果。（示例：**Warp**）我没有更改此代码以获得新效果。我该如何改变？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-23T09:47:06.147

通过为其创建链接来调用 Warp 效果而不是 fadeOut。

```
<ul id="sliderOptions">
    <li><a href="#warp">View next</a></li>
</ul> 
```

# php - 如何使用 PHP 将 CSV 文件读入 MySQL

> ID：14171552
> 
> 赞同：1
> 
> 时间：2013-01-05T11:59:33.827
> 
> 标签：php, mysql, csv, yahoo-finance

> **可能重复：将**
> [CSV 文件直接导入 MySQL](https://stackoverflow.com/questions/4143938/import-csv-file-directly-into-mysql)
> [从 Mysql 导出 CSV](https://stackoverflow.com/questions/4607357/export-csv-from-mysql)

我想将系统上的 CSV 文件 (C:/xampp/htdocs/live/quotes.csv) 读取到我的 MySQL 表中。

我创建了这样的表：

```
mysql_query("CREATE TABLE IF NOT EXISTS datas(
                                 id int(255) NOT NULL auto_increment,
                                 symbol_t char(6) NOT NULL,
                                 last_trade_price_only_t varchar(100) NOT NULL,
                                 a varchar(30) NOT NULL,
                                 b varchar(30) NOT NULL,
                                 c varchar(30) NOT NULL,
                                 d varchar(30) NOT NULL,
                                 e varchar(30) NOT NULL,
                                 PRIMARY KEY (id) 
)"); 
```

现在想像这样在表中写入 CSV：

```
$location="C:/xampp/htdocs/live/quotes.csv";
$sql = "LOAD DATA LOCAL INFILE '{$location}'
        INTO TABLE '{datas}'
        FIELDS TERMINATED BY ','
        OPTIONALLY ENCLOSED BY '\"'
        LINES TERMINATED BY '\n'
        ('symbol_t', 'last_trade_price_only_t','a','b','c','d','e')";

mysql_query($sql); 
```

但不知何故它不起作用。我是不是把位置设置错了？

我还有另一个问题。如果我想使用 url 获取外部 csv（yahoo 财务 csv）：http: [//finance.yahoo.com/d/quotes.csv?](http://finance.yahoo.com/d/quotes.csv?s=) s= $ticker_url&f=sl1=.csv （$ticker_url 是股票代码的集合符号）。我的 $location var 必须只有 url，还是我必须先用 fopen(url) 打开它？

现在：

```
$data_tablename="data_".date("m_d_Y",time());
$filename="C:\\xampp\\htdocs\\live\\quotes.csv";
$sql = "LOAD DATA LOCAL INFILE '{$filename}'
        INTO TABLE '{$data_tablename}'
        FIELDS TERMINATED BY ','
        OPTIONALLY ENCLOSED BY '\"'
        LINES TERMINATED BY '\r\n'
        ('symbol_t', 'last_trade_price_only_t','a','b','c','d','e')"; 
```

![桌子](../Images/7ddf77aaeed4d6e0635a03e768cce099.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T12:13:31.530

由于您使用的是 Windows，因此您的 CSV 文件中的行可能会终止，`\r\n`因此您需要更改：

```
LINES TERMINATED BY '\n' 
```

到

```
LINES TERMINATED BY '\r\n' 
```

根据[文档](https://dev.mysql.com/doc/refman/5.1/en/load-data.html)：

> 如果您在 Windows 系统上生成了文本文件，则可能必须使用 LINES TERMINATED BY '\r\n' 来正确读取文件，因为 Windows 程序通常使用两个字符作为行终止符。某些程序（例如写字板）在写入文件时可能会使用 \r 作为行终止符。要读取此类文件，请使用 LINES TERMINATED BY '\r'。

还：

```
'{datas}' 
```

可能是为了：

```
'{$datas}' 
```

还：

```
('symbol_t', 'last_trade_price_only_t','a','b','c','d','e')"; 
```

需要是：

```
(`symbol_t`, `last_trade_price_only_t`, `a`, `b`, `c`, `d`, `e`)"; 
```

# php - 比较两个 MySQL 表以过滤结果

> ID：14171562
> 
> 赞同：1
> 
> 时间：2013-01-05T12:01:09.917
> 
> 标签：php, mysql, comparison

我有一个具有以下结构的 MySQL 数据库：

表格1

*   UniqueID (int) (PrimaryKey & AutoIncrement)
*   标题 ID (varchar)
*   描述 ID (varchar)
*   ContentRating (varchar)

表2

*   UID (int) (PrimaryKey & AutoIncrement)
*   活动（varchar）
*   内容限制 (varchar)

我想要做的是从 ContentLimit （在 Table2 中）中获取值并将其与 Table1 中的（ContentRating）进行比较，如果它们匹配则显示所有匹配的行。我正在使用 PHP 和 MySQL 来实现这一点。

下面是一个例子：

表格1

```
UniqueID | TitleID | DescriptionID | ContentRating
------------------------------------------------------
1        |  Hello  | I Am Text     | Universal
2        |  Again  | Yet More Text | Universal
3        |  This   | Yet More Text | Universal
4        |  Is     | Yet More Text | Parental Guidance
5        |  Some   | Yet More Text | Universal
6        |  Dummy  | Yet More Text | Parental Guidance
7        |  Text   | Yet More Text | Parental Guidance
8        |  I      | Yet More Text | Parental Guidance
9        |  Think  | Yet More Text | Parental Guidance 
```

表2

```
UID | Name        | Activity | ContentLimit
---------------------------------------------
1   | John Smith  | IsActive | Universal
2   | Jane Smith  | IsActive | Universal
3   | Felix Tiger | IsActive | Parental Guidance
4   | Spring Load | InActive | Universal 
```

如果“Felix Tiger”已登录，那么他将能够看到任何提交的带有“家长指导”评级的内容以及任何带有“通用”评级的内容。

但如果“Jane Smith”已登录，那么她将只能查看以“通用”评级提交的任何内容

如果我不清楚，我会道歉，并会澄清任何可能被误读或难以理解的内容。

预先感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T12:03:18.497

试试这个：

```
SELECT 
    a.*, 
    b.* 
FROM table1 a 
JOIN table2 b ON a.ContentRating = b.ContentLimit 
```

# javascript - 多个 video.js 播放器在 Flash 回退时失败

> ID：14171563
> 
> 赞同：0
> 
> 时间：2013-01-05T12:01:10.847
> 
> 标签：javascript, video, flash, video.js

我的页面[http://video-stock.co.uk](http://video-stock.co.uk)设置了 4 个视频，全部使用 video.js。它适用于使用 html5 实现的 chrome 等，但是当我在 ie7/8 和 flash 回退中查看时，大视频和第一个小视频都很好，但其他 2 个小视频是黑色的，并且没有播放按钮覆盖，并且对单击没有响应，尽管右键单击确实会调出 Flash 上下文菜单。

我几乎不知道如何使用 Flash 播放视频，除了 Wordpress 中的奇怪嵌入，我很高兴找到 Video.js 来为我解决所有这些问题。我在代码中只能看到正确的视频文件似乎被发送到闪存中，但可能是因为闪存播放器 (.swf) 文件被多次调用？只是新手猜测。感激地收到任何帮助。

编辑，为了完整起见，我在 chrome 等页面上设置了 flash 测试 - 如果您访问[http://video-stock.co.uk/?flashdefault](http://video-stock.co.uk/?flashdefault)，您可以查看所有播放器在 flash 中的页面。它适用于 chrome、ff 甚至 IE7+8。要获得我使用的 Flash 默认值：

_V_.options.techOrder = ["flash", html5, "links"];

如果我没有收到您的回复，我会将默认设置更改为该订单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T12:31:58.137

编辑后，我在没有 flashdefault 查询变量的情况下在 IE 中访问了该站点，并且所有四个播放器都在工作。

我唯一改变的是在小视频中添加 preload="auto" ，这似乎是修复。虽然它可以使用修复它的 flashdefault 将 flash 视频放入缓存，但在添加一些新视频之前，我们不会发现。版主们，我应该现在接受这个答案还是等我确定后再接受？

# java - java 读写 unicode / UTF-8 文件名（不是内容）

> ID：14171565
> 
> 赞同：7
> 
> 时间：2013-01-05T12:01:23.347
> 
> 标签：java, macos, encoding, filenames

我有一些带有日文字符的目录/文件。如果我尝试读取包含（例如）一个 ku 的文件名（而不是内容），我会收到一个包含�的字符串。如果我尝试创建一个包含 ク 的文件/目录，则会出现一个包含 ? 的文件​​/目录。

例如：我列出了文件。

```
File file = new File(".");  
String[] filesAndDirs = file.list(); 
```

filesAndDirs 数组现在包含特殊字符的目录。字符串现在只包含����。它接缝没有什么要解码的，因为 getbytes 仅显示文件名中每个字符的“-17 -65 -67”，即使对于不同的字符也是如此。

我使用 MacOS 10.8.2 Java 7_10 和 Netbeans。

有任何想法吗？

先感谢您 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T12:41:01.443

这些字节是 0xef 0xbf 0xbd，这是您看到的 \ufffd 字符的 UTF-8 编码形式，而不是日文字符。看起来 Java 用来列出文件的任何操作系统函数实际上都返回了那些不正确的字符。

也许 Files.newDirectoryStream 会更可靠。试试这个：

```
try (DirectoryStream<Path> dir = Files.newDirectoryStream(Paths.get("."))) {
    for (Path child : dir) {
        String filename = child.getFileName().toString();

        System.out.println("name=" + filename);
        for (char c : filename.toCharArray()) {
            System.out.printf("%04x ", (int) c);
        }
        System.out.println();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-24T14:13:34.273

这是旧的 java File api 中的一个错误（可能只是在 mac 上）。无论如何，这一切都在新的 java.nio 中得到了修复。

我有几个文件在文件名和内容中包含无法使用 java.io.File 和相关类加载的 unicode 字符。在将我的所有代码转换为使用[java.nio.Path](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Path.html)之后，一切都开始工作了。我用[java.nio.Files](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html)替换了 org.apache.commons.io.FileUtils （有同样的问题） ......

...并确保使用适当的字符集读取和写入文件的内容，例如： Files.readAllLines(myPath, StandardCharsets.UTF_8)

# java - SimpleDateFormat 无法格式化日期间隔？

> ID：14171568
> 
> 赞同：3
> 
> 时间：2013-01-05T12:01:45.127
> 
> 标签：java, date, timezone

我尝试使用 SimpleDateFormat 格式化时间间隔。

```
import java.text.*;
import java.util.*;

public class DateFormatTest {
  public static void main(String[] args) {
    SimpleDateFormat sdf = new SimpleDateFormat("hh:mm:ss");
    long interval = 1000;
    System.out.println("Interval in millis: " + interval);
    System.out.println("Expected result: 00:00:01");
    System.out.println("Result using Date and SimpleDateFormat: " +
      sdf.format(new Date(interval)));
  }
} 
```

我得到以下结果：

```
Interval in millis: 1000
Expected result: 00:00:01
Result using Date and SimpleDateFormat: 01:00:01 
```

我在 GMT+1 时区。但它不应该反映在结果中。

当然可以用 System.out.printf 解决，但我正在寻找的是原因。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T12:05:20.097

> 我在 GMT+1 时区。但不应该反映在结果中。

是什么让你这么想的？`new Date(0)`是 1970 年 1 月 1 日格林威治标准时间上午 00:00。因此，如果您的默认时区是格林威治标准时间 + 1，那么它是上午 01:00。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-05T12:06:28.330

> 我在 GMT+1 时区。但它不应该反映在结果中。

然后你应该在`SimpleDateFormat`. `SimpleDateFormat`正在做*完全*正确的事情 - 它正在格式化它正在工作的时区中的时间瞬间（就在**UTC** 1970午夜之后）。

要更改时区，只需使用：

```
sdf.setTimeZone(TimeZone.getTimeZone("etc/UTC")); 
```

不过，尚不清楚您是否*真的*应该使用`SimpleDateFormat`。您不是在尝试格式化日期/时间 - 您是在尝试格式化*interval*，给定您的变量名称。

我建议你使用[Joda Time](http://joda-time.sf.net)，它有*更*丰富的类型系统，可以让你表达你*真正*想要的。

此外，如果您*真的*想使用`SimpleDateFormat`，您可能希望在格式字符串中使用`HH`而不是。`hh`（`hh`是 12 小时值，1-12。您想要 00:00:01，而不是 12:00:01。）当您的模式中*也*没有 am/pm 指示符`hh`时，很少适用。

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-02-09T19:43:32.227*

# magento - 在magento中applyDesign的作用是什么

> ID：14171569
> 
> 赞同：0
> 
> 时间：2013-01-05T12:01:51.547
> 
> 标签：magento, magento-1.7

我正在使用magento 1.7。我正在扩展以快速查看产品。我无法理解以下代码。

```
Mage::getModel('catalog/design')->applyDesign($product, Mage_Catalog_Model_Design::APPLY_FOR_PRODUCT); 
```

谁能告诉我这个函数的目的是什么，`applyDesign`因为我已经尝试评论这一行但没有发生任何变化，所以我想知道为什么这段代码用于????

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T16:16:46.047

参考。[`Mage_Catalog_Model_Design::applyDesign()`（链接）](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/code/core/Mage/Catalog/Model/Design.php#L58)。

这是应用包+主题设计设置的一种已弃用的方法，可以在产品级别进行设置。如果您没有看到变化，那是因为该实体没有实体级别的数据集（这是正常的）。

# jquery - 单击上的按钮时如何抑制单击事件？

> ID：14171571
> 
> 赞同：2
> 
> 时间：2013-01-05T12:01:55.607
> 
> 标签：jquery

我在执行操作的表行上有一个单击事件。但是，当我单击同一行上的按钮时，我想阻止 on-row-click 事件并简单地执行按钮的操作，但我不知道如何实现这一点。

我创建了一个 --> [fiddle](http://jsfiddle.net/houmie/VhYdD/2/) <-- 来证明这一点。只需单击表格行，您就会看到一个按钮出现。然后点击按钮。您将看到在单击按钮时再次执行了行单击事件。我该如何防止这种情况？

```
 <table id="tab_open_deals" class="table table-condensed table-striped cb_table-hover">
  <thead>
    <tr>
      <th>A</th>
      <th>B</th>
      <th>C</th>
    </tr>
  </thead>
  <tbody id="search_result">
    <tr>
      <td><a class="btn my_btn hidden2" href="#">Button</a></td>
      <td>39.90</td>
      <td>29 Dec 2012</td>
    </tr>
  <tr>
    <td><a class="btn my_btn hidden2" href="#">Button</a></td>
    <td>1499.00</td>
    <td>8 Jan 2013</td>
  </tr>
 </tbody>
</table> 
```

**CSS：**

```
.hidden2{
    display: none;
} 
```

**jQuery：**

```
$(document).ready(function() {
    $('#tab_open_deals tbody tr').off('click').on('click', function() {
        var row = $('<tr/>');
        row.load('/echo/html/', {
            html: '<td class="override" colspan="4"><table class="table-striped sub_table-hover"><thead><tr><th>Sub1</th><th>Sub2</th></tr></thead><tbody><tr><td>1</td><td>2</td></tr><tr><td>3</td><td>4</td></tr></tbody></table></td>'
        });

        row.insertAfter($(this));
      $(this).find(".my_btn").off('click').on('click', function(){ alert("clicked") })
        $(this).find(".my_btn").show();
    });
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-05T12:05:28.773

使用它来停止传播事件

```
 event.stopPropagation(); 
```

看这里[链接](http://jsfiddle.net/houmie/VhYdD/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T12:05:20.877

您只需`return false;`在`click`

```
$(this).find(".my_btn").off('click').on('click', function () {
  alert("clicked");
  return false;
}) 
```

[http://jsfiddle.net/VhYdD/4/](http://jsfiddle.net/VhYdD/4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T12:21:16.450

您应该从该按钮所在的 TR 中删除单击行为。您可以使用 jQuery 方法，就像`$(this).closest('tr')`我们可以通过 DOM 从按钮向上搜索以查找 TR，或者您可以使用 jQuery 中的父函数查找父项。一旦我们找到我们正在寻找的元素（TR），我们就可以`unbind`获得点击功能。

因此，您的最终通话将如下所示：

```
$(this).closest('tr').unbind('click'); 
```

我已将其插入到您的代码中，它按预期工作，从 TR 中删除了点击事件

```
$(document).ready(function() {
    $('#tab_open_deals tbody tr').on('click', function() {
        var row = $('<tr/>');
        row.load('/echo/html/', {
        html: '<td class="override" colspan="4"><table class="table-striped sub_table-hover"><thead><tr><th>Sub1</th><th>Sub2</th></tr></thead><tbody><tr><td>1</td><td>2</td></tr><tr><td>3</td><td>4</td></tr></tbody></table></td>'
    });
  $(this).find(".my_btn").on('click', function(){
       $(this).closest('tr').unbind('click');
       alert("clicked") })
       $(this).find(".my_btn").show();
       row.insertAfter($(this));
    });
}); 
```

我希望这对你有用。

# emacs - Paredit：删除不需要的键绑定

> ID：14171598
> 
> 赞同：2
> 
> 时间：2013-01-05T12:05:29.313
> 
> 标签：emacs, key-bindings, paredit

我正在尝试 ParEdit 模式，这不是我想要的方式：它隐藏了原始绑定`C-M-F`并将其替换为`C-M-f`. 即它转发 sexp 而不是选择它：| 乍一看，我找不到定义绑定的地方。

有什么办法可以取消这种行为？或者 ParEdit 中用于选择性别的模拟命令是什么？

**编辑：**

为了让您更好地了解会发生什么，如果我`C-h k`在 ParEdit 处于活动状态时这样做，那么`C-M-S-f`这就是我得到的：

```
C-M-f (translated from C-M-S-f) runs the command paredit-forward,
which is an interactive compiled Lisp function in `paredit.el'.

It is bound to C-M-f.

(paredit-forward)

Move forward an S-expression, or up an S-expression forward.
If there are no more S-expressions in this one before the closing
  delimiter, move past that closing delimiter; otherwise, move forward
  past the S-expression following the point.

C-M-f

(foo |(bar baz) quux)
  ->
(foo (bar baz)| quux)

(foo (bar)|)
  ->
(foo (bar))|

[back] 
```

我不希望它翻译任何东西，这绝对是不受欢迎的行为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-13T14:27:23.813

Paredit 没有翻译密钥。Emacs 是。在每种模式下都是一样的。如果 CMF 没有绑定，Emacs 将尝试使用 CMf。

如果你想在点之后选择 S 表达式，标准的 Emacs 键是 CM-SPC。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T12:29:59.353

您可以使用：

```
(eval-after-load "paredit"
  '(progn
    (define-key paredit-mode-map (kbd "C-M-f") nil))) 
```

严格来说 progn 是不必要的，但您可能想在之后重新定义/删除更多键

**编辑**

与 forward-sexp 不同，paredit-forward 不检查是否按下了 shift。你可以尝试使用这个

```
(eval-after-load "paredit"
  '(progn
    (define-key paredit-mode-map (kbd "C-M-S-f") 
     (lambda ()
       (interactive)
       (unless (region-active-p)
         (set-mark (point)))
       (paredit-forward))))) 
```

**编辑**

做同样事情的另一种方法（选择以下 sexp）是 CM 空间。然后，如果您想这样做，您可以使用 Cx Cx 交换点和标记（或 Cx（此处没有延迟）如果您使用 CUA，则为 Cx Cx）

**编辑（最后？）**

当按下 shift 时，使函数也标记的正确方法是：

```
(put 'paredit-forward 'CUA 'move) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-13T14:51:31.953

复活一个非常古老的问题，但我想我知道一个更通用的解决方案。

`paredit`是一种非常古老的包装，早于现代包装卫生。即默认键绑定的激进设置。

要撤消该操作，请在加载 paredit 包后运行：

```
 (paredit-do-commands (spec keys _fn _examples) nil
    (dolist (key keys)
      (define-key paredit-mode-map (read-kbd-macro key) nil))) 
```

现在您又回到了没有键绑定的状态，您可以使用常规机制。阅读上面的值（不是文档）`paredit-commands`以查看哪些命令可用以及它们的默认绑定是什么，其中一些您可能希望保留。

# php - 如何使下拉列表中的第一个选项成为不可接受的答案？

> ID：14171599
> 
> 赞同：0
> 
> 时间：2013-01-05T12:05:31.627
> 
> 标签：php, html, selection, required-field

好的，我有一个表格，在这个表格中有一堆必填字段。此表单的生日部分由 3 个字段组成：月、日和年。现在我想做的是在下拉列表的顶部有“月：”、“日：”和“年：”这些词，但我不希望这些选项成为可接受的答案！当我提交表单时没有选择实际的月、日和年，当我打印错误时，它应该说需要月、日和年！我怎样才能做到这一点？使字段成为必需字段的“if 语句”位于此代码的底部：

```
<form action="" method="post">  
        <ul id="register">
            <li>
                Birthday:

                <select name="month">
                    <option value="month">Month:</option>
                    <option value="January">January</option>
                    //all the other months
                </select>

                <select name="day">
                    <option value="day">Day:</option>
                    <option value="1">1</option>
                    //all the other days of the month
                </select>

                <select name="year">
                    <option value="year">Year:</option>
                    <option value="2013">2013</option>
                    //more year options
                </select><br><br>
            </li>

            <li>
                <input type="submit" name="registrationform" value="Sign up">
            </li>
        </ul>
    </form>
    <?php
    if (!empty($_POST['registrationform'])) {
    if(isset($_POST['registrationform'])){
        $required_fields = array('month', 'day', 'year');
        foreach ( $required_fields as $key=>$value) {
         if (!isset($_POST[$value]) || $_POST[$value]=='') {
              $errors[$value] = $key." is required";

            }
   }

   print_r($errors);
}
    }

    ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T12:08:35.357

使用 optgroup

```
<select name="month">
  <optgroup label="Month:">
    <option value="January">January</option>
    //all the other months
  </optgroup>
</select>

etc. 
```

[JSFiddle](http://jsfiddle.net/5VJKE/)

或禁用该选项并选择标题，如果您希望显示标题 - 一旦触摸列表，标题将无法选择。

```
<select name="month">
    <option disabled="disabled" selected="selected">Month:</option>
    <option value="January">January</option>
    //all the other months
</select> 
```

[JSFiddle](http://jsfiddle.net/5VJKE/3/)

![在此处输入图像描述](../Images/ff6e341a89dfd0af3cdce4d660ea040e.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T12:20:06.043

我同意 PassKit 但请在您的代码中添加一些验证

```
if (!is_int($_POST[$value])) {
  // not valid
} 
```

并且不要将月份发布为一月，而是发布为 1 .. 12，因为它更安全、更容易验证

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T12:20:14.017

给它一个空/无值并验证它

# java - 立即更新 Java 中的 JCombobox

> ID：14171600
> 
> 赞同：2
> 
> 时间：2013-01-05T12:05:38.687
> 
> 标签：java, mysql, sql, swing, jcombobox

一个人希望向数据库添加一个新工作。列出数据库中已有的`Combobox`现有雇主，以便添加新工作。但是，如果雇主不在场，客户可以选择单击按钮添加雇主。添加后，雇主应立即显示在文本字段中。

我正在尝试使用我的编码和 mysql 数据库来实现上述场景，但想不出这样做的逻辑......

表雇主

```
CREATE TABLE "Employer" ("employerID" INTEGER PRIMARY KEY  NOT NULL ,
"name" CHAR,
"industry" CHAR,
"contact1" CHAR,
"contact2" CHAR,
"email" CHAR,
"website" CHAR,
"facts" CHAR,
"phone" VACHAR) 
```

表作业

```
CREATE TABLE "Job" ("jobID" INTEGER PRIMARY KEY  NOT NULL ,
"employerID" INTEGER,
"title" CHAR,
"description" CHAR,
"type" CHAR,"salary" CHAR,
"benefits" CHAR,
"vacancies" INTEGER,
"closing" CHAR,
"requirement" CHAR,
"placement" BOOL,
"applyTo" CHAR,
"status" CHAR,
"posted" CHAR, 
"location" CHAR) 
```

类 Employer_GUI - 由一个简单的表单和保存按钮组成，用于将新的 EMPLOYERS 保存到`Employer`表中

```
private void SaveEmpButtonActionPerformed(java.awt.event.ActionEvent evt) {

    try {
        String sql = "INSERT INTO Employer (name,industry,contact1,contact2,email,website,facts,phone) VALUES (?,?,?,?,?,?,?,?)";
        pst = conn.prepareStatement(sql);

                    pst.setString(1, txtName.getText());
                    pst.setString(2, txtInd.getText());
                    pst.setString(3, txtC1.getText());
                    pst.setString(4, txtC2.getText());
                    pst.setString(5, txtEmail.getText());
                    pst.setString(6, txtWeb.getText());
                    pst.setString(7, txtFacts.getText());
                    pst.setString(8, txtPhone.getText());
                    pst.execute();
        JOptionPane.showMessageDialog(null, ""+txtName.getText()+" added to database!");
        this.setVisible(false);
    }

    catch (Exception e) {
            JOptionPane.showMessageDialog(null, ""+txtName.getText()+" could not be added!");
    }
    finally {
       try {
        rs.close(); pst.close();  }
         catch(Exception e) { } }  

} 
```

//Class Job_GUI - 由一个 FORM 组成，仅将 JOBS 添加到`Job`表中

```
private void fillCombo() {
    try {
        String sql = "SELECT * FROM Employer";
        pst = conn.prepareStatement(sql);
        rs = pst.executeQuery();

        while(rs.next()) {
            String empName = rs.getString("name");
            comboEmployer.addItem(empName);

        }
    } 
```

怎么可能`JComboBox` `comboEmployer`立即将所选项目作为刚刚添加的新雇主名称？

![在此处输入图像描述](../Images/fb08e2e1da776c0cd8fa25762b05da52.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T12:17:01.060

如果我理解您希望添加的新员工成为组合框中选择的内容？

获得新员工姓名并将其添加到组合框后，只需[`JComboBox#setSelectedItem(Object o)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComboBox.html#setSelectedItem%28java.lang.Object%29)使用新员工的姓名进行调用即可。

IE：

```
String newEmpName=...;
//code to add new employee goes here
//code to fill combobox with update values goes here
//now we set the selecteditem of the combobox
comboEmployer.setSelectedItem(newEmpName); 
```

**更新**

根据您的评论：

基础：

1）从添加员工对话框中获取新员工姓名或任何与组合框中项目匹配的标识符。

2）比简单地调用`setSelectedItem(name) after the data has been added to`组合框`。

因此，您可能会看到“*添加雇主*”对话框返回一个名称或有一个方法来获取添加到数据库中的名称。在对话框关闭后的组合框类中，您将使用新条目刷新组合框，通过添加员工对话框获取添加的名称，并使用我们使用 getter 或静态变量`JComboBox#setSelectedItem(..)`从*添加雇主对话框中获得的名称调用*

IE：

```
class SomeClass {

    JFrame f=...;
    JComboBox cb=new ...;

    ...

    public void someMethod() {
       AddEmployerDialog addEmpDialog=new AddEmployerDialog(f);//wont return until exited or new name added

       String nameAdded=addEmpDialog.getRecentName();//get the name that was added

      //clear combobox of all old entries
      DefaultComboBoxModel theModel = (DefaultComboBoxModel)cb.getModel();
      theModel.removeAllElements();

       //refresh combobox with the latest names from db
       fillCombo();

       //now we set the selected item of combobox with the new name that was added
       cb.setSelectedItem(nameAdded);
  }

}

class AddEmployerDialog {

    private JDialog dialog;
    private String empName;//emp name will be assigned when save is pressed or whatever

    public AddEmployerDialog(JFrame frame) {

        dialog=new JDialog(f);
        dialog.setDefaultCloseOperation(JDialog.DISPOSE_ON_CLOSE);
        dialog.setModal(true);//so that we dont return control until exited or done
        //add components etc
        dialog.pack();
        dialog.setVisible(true);

    }

    public String getRecentName() {
        return empName;
    }

} 
```

# java - gwt requestfactory 查看数据库

> ID：14171605
> 
> 赞同：-3
> 
> 时间：2013-01-05T12:06:24.497
> 
> 标签：java, database, gwt, requestfactory

与`request factory`in相关`gwt`。

如何/在哪里可以查看数据库中的实体记录（不使用任何代码）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T13:43:52.153

RequestFactory 是关于在您的客户端和服务器之间发送实体和其他对象以及要在它们上执行的操作。一旦对象到达服务器，就由您来管理它们的持久性。您可以使用 JPA、JDO、Objectify、Morphia 等，具体取决于您是否要使用 SQL DB、AppEngine Datastore、MongoDB 等。

RequestFactory 与 GWT-RPC 非常相似，如果这能让您更清楚的话。

# sublimetext2 - Sublime Text 2 和 Backspace(left_delete) 问题

> ID：14171608
> 
> 赞同：4
> 
> 时间：2013-01-05T12:06:41.860
> 
> 标签：sublimetext2, key-bindings

我遇到了`backspace`键绑定问题，它不会仅删除**Sublime Text 2**中的单词。为了退格，我必须突出显示要删除的字符并按退格键或用于`ctrl + z`返回。并且，`ctrl + backspace`删除输入的单词，而不仅仅是一个字符。此外，`shift + backspace`即使它假设与退格键执行相同的操作，也没有任何效果。

我启用`sublime_log_commands(True)`了实时显示键绑定，并且日志显示了正确的绑定，但是它根本没有删除任何字符。

`backpace`=>`command: left_delete`

`shift + backspace`=>`command: left_delete`

&

`Ctrl + backspace`=> `command: delete_word {"forward": false}`（这个我很好）

然后，我安装了`FindKeyConflicts`插件，看看是否有任何冲突，但输出似乎很好，IMO。

```
[shift+backspace]
left_delete                              Default
  .
  .
  .
[ctrl+shift+backspace]
left_delete                              Default               
run_macro_file                           Default
 .
 .
[ctrl+backspace]
delete_word                              Default 
.
 .
[backspace]
left_delete                              Default               
run_macro_file                            Default           
         [{"operator": "equal", "operand": true, "key": "setting.auto_match_enabled"}, {"operator":            
        "regex_contains", "operand": "^\"", "match_all": true, "key": "following_text"}, {"operator": 
        "regex_contains", "operand": "\"$", "match_all": true, "key": "preceding_text"}, {"operator": 
         "equal", "operand": true, "match_all": true, "key": "selection_empty"}]
run_macro_file                           Default            
          [{"operator": "equal", "operand": true, "key": "setting.auto_match_enabled"}, {"operator": 
         "regex_contains", "operand": "^'", "match_all": true, "key": "following_text"}, {"operator": 
          "regex_contains", "operand": "'$", "match_all": true, "key": "preceding_text"}, {"operator": 
         "equal", "operand": true, "match_all": true, "key": "selection_empty"}]
 run_macro_file                           Default              
          [{"operator": "equal", "operand": true, "key": "setting.auto_match_enabled"}, {"operator":  
          "regex_contains", "operand": "^\\)", "match_all": true, "key": "following_text"}, 
         {"operator": "regex_contains", "operand": "\\($", "match_all": true, "key": "preceding_text"}, 
          {"operator": "equal", "operand": true, "match_all": true, "key": "selection_empty"}]
 run_macro_file                           Default               
         [{"operator": "equal", "operand": true, "key": "setting.auto_match_enabled"}, {"operator": 
         "regex_contains", "operand": "^\\]", "match_all": true, "key": "following_text"}, {"operator":  
         "regex_contains", "operand": "\\[$", "match_all": true, "key": "preceding_text"}, {"operator": 
           "equal", "operand": true, "match_all": true, "key": "selection_empty"}]
 run_macro_file                           Default              
          [{"operator": "equal", "operand": true, "key": "setting.auto_match_enabled"}, {"operator": 
          "regex_contains", "operand": "^\\}", "match_all": true, "key": "following_text"}, 
           {"operator": "regex_contains", "operand": "\\{$", "match_all": true, "key": 
           "preceding_text"}, {"operator": "equal", "operand": true, "match_all": true, "key": 
           "selection_empty"}]
run_macro_file                           CSS                  
          [{"operator": "equal", "operand": true, "key": "setting.auto_match_enabled"}, {"operator": 
          "regex_contains", "operand": "^;", "match_all": true, "key": "following_text"}, {"operator": 
          "regex_contains", "operand": ":$", "match_all": true, "key": "preceding_text"}, {"operator": 
           "equal", "operand": true, "match_all": true, "key": "selection_empty"}, {"operator":  
          "equal", "operand": "source.css - meta.selector.css", "match_all": true, "key": "selector"}] 
```

如果有人对如何恢复正常操作有任何建议或解决方法`backspace`，我很想听听。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T00:30:31.193

既然你说它解决了这个问题，我会添加它作为答案：

关闭所有实例，转到您的[*Sublime Text 2*文件夹](http://docs.sublimetext.info/en/latest/basic_concepts.html#the-data-directory)并重命名为*Sublime Text 2 - Backup* （对于 linux，sublime-text-2.backup）。这样你就不会丢失任何重要的东西。重新打开崇高。这将使用默认绑定重新添加上述文件夹，并且没有额外的插件。

要查看导致问题的原因：开始一一添加您正在使用的插件，并查看哪些会破坏退格键。这也可能是键绑定冲突的问题。因此，以与插件相同的方式添加个人绑定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-02T20:00:23.617

我有同样的问题，看，我搜索了如何解决这个问题，是这样的：

1.  重新安装 sublime text

2.  使用十六进制编辑器软件，我使用 Ghex for Fedora/Ubuntu，运行它并菜单 File->Open，打开 sublime text 可执行文件（安装文件夹），然后转到菜单：edit->go to byte，并通过 0x590ADC 搜索, 将 33 替换为 32，保存然后执行并粘贴许可证，就这样，退格键应该可以工作。‎ 使用 Sublime Text 2.0.2 测试（Linux 版）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-22T14:58:52.180

您应该“重置”崇高文本 2 的设置。首先关闭 sublime text 2，然后打开终端并输入：

```
mv ~/.config/sublime-text-2/ ~/.config/sublime-text-2.org 
```

然后重新启动 sublime text 2。:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-09T23:26:27.483

这只是发生在我身上（在 SublimeText3 中），结果我仍然在后台打开了“这是免费副本”警报。关闭它解决了这个问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-16T10:54:56.700

我在安装 Kubuntu 时遇到了这个问题。这很简单：当您尝试破解您的 sublime 时，通过将 33 42 的十六进制值更改为 32 42，它将在 255 个字符后阻止简单的退格 (left_delete) 和 del (right_backspace)。（试试看：写 256 个字符，然后尝试删除最后一个）。

解决此问题的方法是选择要删除的所需字符，然后执行 left_delete/right_delete。

如果您想解决此问题，请按照其他建议进行操作，即重新安装您的 sublime（未注册版本）。

在 Windows 上未发现此问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-17T10:01:59.030

轻松转到 Preferences -> Key Binding - 默认搜索键别名并编辑您想要保存的任何内容，然后就可以使用了

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-01-17T13:22:20.810

我今天也遇到了同样的问题，查了一下文档，找到了问题的原因和解决方法。

出现此问题是因为您可能不小心更改了某些设置。所以你必须恢复这些设置。

现在，转到 Preferences -> settings -> user settings 现在检查 "ignored_pa​​ckages": ["Vintage"] 并将其从用户设置中删除。现在您的快捷键就可以正常工作了。

# java - MuPDF 错误，关于使用 ndk-build 构建

> ID：14171612
> 
> 赞同：0
> 
> 时间：2013-01-05T12:07:09.843
> 
> 标签：java, android, mupdf, pdfrenderer, vudroid

经过长时间的 RND，选择了一个开源库（即 MuPDF）来创建 PDF VIEWER，​​但是从上周开始，我发现它也不是稳定版本或者不知道它到底是什么，删除错误仍然出错再次出错..，这是我公司的第 4 个项目，我完成了 3 个项目，但这一个成为瓶颈。

有人帮我吗？我真的很感谢！

> *   我已经从 Android.mk 中删除了“-ljnigraphics”作为自己的 stackoverflow 的一个答案，说它没用，所以我有，没有影响！
>     
>     
> *   我从 Core.mk 中删除了以下几行，因为它导致错误并且没有找到解决这些问题的任何方法，下面提到了相应的错误！！

* * *

## $(MY_ROOT)/draw/draw_simple_scale.c \

> 错误：需要注册！

* * *

## $(MY_ROOT)/pdf/pdf_cmap_table.c \

```
cmap_GBpc_EUC_V.usecmap_name[9]') [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:4281:2: error: initializer element is not c
omputable at load time
jni/../../pdf/../generated/cmap_gb.h:4281:2: error: (near initialization for 'cm
ap_GBpc_EUC_V.usecmap_name[9]')
jni/../../pdf/../generated/cmap_gb.h:4920:2: warning: initialization from incomp
atible pointer type [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:4920:2: warning: (near initialization for '
cmap_GBT_EUC_H.storable.free') [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:4921:2: warning: braces around scalar initi
alizer [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:4921:2: warning: (near initialization for '
cmap_GBT_EUC_H.usecmap_name[3]') [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:4921:2: warning: braces around scalar initi
alizer [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:4921:2: warning: (near initialization for '
cmap_GBT_EUC_H.usecmap_name[3]') [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:4921:2: warning: excess elements in scalar
initializer [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:4921:2: warning: (near initialization for '
cmap_GBT_EUC_H.usecmap_name[3]') [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:4921:2: warning: excess elements in scalar
initializer [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:4921:2: warning: (near initialization for '
cmap_GBT_EUC_H.usecmap_name[3]') [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:4921:2: warning: braces around scalar initi
alizer [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:4921:2: warning: (near initialization for '
cmap_GBT_EUC_H.usecmap_name[3]') [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:4921:2: warning: excess elements in scalar
initializer [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:4921:2: warning: (near initialization for '
cmap_GBT_EUC_H.usecmap_name[3]') [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:4921:2: warning: excess elements in scalar
initializer [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:4921:2: warning: (near initialization for '
cmap_GBT_EUC_H.usecmap_name[3]') [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:4921:2: warning: excess elements in scalar
initializer [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:4921:2: warning: (near initialization for '
cmap_GBT_EUC_H.usecmap_name[3]') [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:4922:2: warning: large integer implicitly t
runcated to unsigned type [-Woverflow]
jni/../../pdf/../generated/cmap_gb.h:4922:2: warning: large integer implicitly t
runcated to unsigned type [-Woverflow]
jni/../../pdf/../generated/cmap_gb.h:4922:2: warning: initialization makes integ
er from pointer without a cast [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:4922:2: warning: (near initialization for '
cmap_GBT_EUC_H.usecmap_name[6]') [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:4922:2: error: initializer element is not c
omputable at load time
jni/../../pdf/../generated/cmap_gb.h:4922:2: error: (near initialization for 'cm
ap_GBT_EUC_H.usecmap_name[6]')
jni/../../pdf/../generated/cmap_gb.h:4923:2: warning: large integer implicitly t
runcated to unsigned type [-Woverflow]
jni/../../pdf/../generated/cmap_gb.h:4923:2: warning: large integer implicitly t
runcated to unsigned type [-Woverflow]
jni/../../pdf/../generated/cmap_gb.h:4923:2: warning: initialization makes integ
er from pointer without a cast [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:4923:2: warning: (near initialization for '
cmap_GBT_EUC_H.usecmap_name[9]') [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:4923:2: error: initializer element is not c
omputable at load time
jni/../../pdf/../generated/cmap_gb.h:4923:2: error: (near initialization for 'cm
ap_GBT_EUC_H.usecmap_name[9]')
jni/../../pdf/../generated/cmap_gb.h:4941:2: warning: initialization from incomp
atible pointer type [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:4941:2: warning: (near initialization for '
cmap_GBT_EUC_V.storable.free') [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:4942:2: warning: braces around scalar initi
alizer [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:4942:2: warning: (near initialization for '
cmap_GBT_EUC_V.usecmap_name[3]') [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:4942:2: warning: braces around scalar initi
alizer [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:4942:2: warning: (near initialization for '
cmap_GBT_EUC_V.usecmap_name[3]') [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:4942:2: warning: excess elements in scalar
initializer [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:4942:2: warning: (near initialization for '
cmap_GBT_EUC_V.usecmap_name[3]') [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:4942:2: warning: excess elements in scalar
initializer [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:4942:2: warning: (near initialization for '
cmap_GBT_EUC_V.usecmap_name[3]') [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:4943:2: warning: initialization makes integ
er from pointer without a cast [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:4943:2: warning: (near initialization for '
cmap_GBT_EUC_V.usecmap_name[6]') [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:4943:2: error: initializer element is not c
omputable at load time
jni/../../pdf/../generated/cmap_gb.h:4943:2: error: (near initialization for 'cm
ap_GBT_EUC_V.usecmap_name[6]')
jni/../../pdf/../generated/cmap_gb.h:4944:2: warning: initialization makes integ
er from pointer without a cast [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:4944:2: warning: (near initialization for '
cmap_GBT_EUC_V.usecmap_name[9]') [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:4944:2: error: initializer element is not c
omputable at load time
jni/../../pdf/../generated/cmap_gb.h:4944:2: error: (near initialization for 'cm
ap_GBT_EUC_V.usecmap_name[9]')
jni/../../pdf/../generated/cmap_gb.h:5583:2: warning: initialization from incomp
atible pointer type [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:5583:2: warning: (near initialization for '
cmap_GBT_H.storable.free') [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:5584:2: warning: braces around scalar initi
alizer [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:5584:2: warning: (near initialization for '
cmap_GBT_H.usecmap_name[3]') [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:5584:2: warning: braces around scalar initi
alizer [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:5584:2: warning: (near initialization for '
cmap_GBT_H.usecmap_name[3]') [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:5584:2: warning: excess elements in scalar
initializer [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:5584:2: warning: (near initialization for '
cmap_GBT_H.usecmap_name[3]') [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:5584:2: warning: excess elements in scalar
initializer [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:5584:2: warning: (near initialization for '
cmap_GBT_H.usecmap_name[3]') [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:5585:2: warning: large integer implicitly t
runcated to unsigned type [-Woverflow]
jni/../../pdf/../generated/cmap_gb.h:5585:2: warning: large integer implicitly t
runcated to unsigned type [-Woverflow]
jni/../../pdf/../generated/cmap_gb.h:5585:2: warning: initialization makes integ
er from pointer without a cast [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:5585:2: warning: (near initialization for '
cmap_GBT_H.usecmap_name[6]') [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:5585:2: error: initializer element is not c
omputable at load time
jni/../../pdf/../generated/cmap_gb.h:5585:2: error: (near initialization for 'cm
ap_GBT_H.usecmap_name[6]')
jni/../../pdf/../generated/cmap_gb.h:5586:2: warning: large integer implicitly t
runcated to unsigned type [-Woverflow]
jni/../../pdf/../generated/cmap_gb.h:5586:2: warning: large integer implicitly t
runcated to unsigned type [-Woverflow]
jni/../../pdf/../generated/cmap_gb.h:5586:2: warning: initialization makes integ
er from pointer without a cast [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:5586:2: warning: (near initialization for '
cmap_GBT_H.usecmap_name[9]') [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:5586:2: error: initializer element is not c
omputable at load time
jni/../../pdf/../generated/cmap_gb.h:5586:2: error: (near initialization for 'cm
ap_GBT_H.usecmap_name[9]')
jni/../../pdf/../generated/cmap_gb.h:5604:2: warning: initialization from incomp
atible pointer type [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:5604:2: warning: (near initialization for '
cmap_GBT_V.storable.free') [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:5605:2: warning: braces around scalar initi
alizer [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:5605:2: warning: (near initialization for '
cmap_GBT_V.usecmap_name[3]') [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:5605:2: warning: braces around scalar initi
alizer [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:5605:2: warning: (near initialization for '
cmap_GBT_V.usecmap_name[3]') [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:5605:2: warning: excess elements in scalar
initializer [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:5605:2: warning: (near initialization for '
cmap_GBT_V.usecmap_name[3]') [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:5605:2: warning: excess elements in scalar
initializer [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:5605:2: warning: (near initialization for '
cmap_GBT_V.usecmap_name[3]') [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:5606:2: warning: initialization makes integ
er from pointer without a cast [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:5606:2: warning: (near initialization for '
cmap_GBT_V.usecmap_name[6]') [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:5606:2: error: initializer element is not c
omputable at load time
jni/../../pdf/../generated/cmap_gb.h:5606:2: error: (near initialization for 'cm
ap_GBT_V.usecmap_name[6]')
jni/../../pdf/../generated/cmap_gb.h:5607:2: warning: initialization makes integ
er from pointer without a cast [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:5607:2: warning: (near initialization for '
cmap_GBT_V.usecmap_name[9]') [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:5607:2: error: initializer element is not c
omputable at load time
jni/../../pdf/../generated/cmap_gb.h:5607:2: error: (near initialization for 'cm
ap_GBT_V.usecmap_name[9]')
jni/../../pdf/../generated/cmap_gb.h:6246:2: warning: initialization from incomp
atible pointer type [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:6246:2: warning: (near initialization for '
cmap_GBTpc_EUC_H.storable.free') [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:6247:2: warning: braces around scalar initi
alizer [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:6247:2: warning: (near initialization for '
cmap_GBTpc_EUC_H.usecmap_name[3]') [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:6247:2: warning: braces around scalar initi
alizer [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:6247:2: warning: (near initialization for '
cmap_GBTpc_EUC_H.usecmap_name[3]') [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:6247:2: warning: excess elements in scalar
initializer [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:6247:2: warning: (near initialization for '
cmap_GBTpc_EUC_H.usecmap_name[3]') [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:6247:2: warning: excess elements in scalar
initializer [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:6247:2: warning: (near initialization for '
cmap_GBTpc_EUC_H.usecmap_name[3]') [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:6247:2: warning: braces around scalar initi
alizer [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:6247:2: warning: (near initialization for '
cmap_GBTpc_EUC_H.usecmap_name[3]') [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:6247:2: warning: excess elements in scalar
initializer [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:6247:2: warning: (near initialization for '
cmap_GBTpc_EUC_H.usecmap_name[3]') [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:6247:2: warning: excess elements in scalar
initializer [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:6247:2: warning: (near initialization for '
cmap_GBTpc_EUC_H.usecmap_name[3]') [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:6247:2: warning: excess elements in scalar
initializer [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:6247:2: warning: (near initialization for '
cmap_GBTpc_EUC_H.usecmap_name[3]') [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:6247:2: warning: braces around scalar initi
alizer [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:6247:2: warning: (near initialization for '
cmap_GBTpc_EUC_H.usecmap_name[3]') [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:6247:2: warning: excess elements in scalar
initializer [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:6247:2: warning: (near initialization for '
cmap_GBTpc_EUC_H.usecmap_name[3]') [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:6247:2: warning: excess elements in scalar
initializer [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:6247:2: warning: (near initialization for '
cmap_GBTpc_EUC_H.usecmap_name[3]') [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:6247:2: warning: excess elements in scalar
initializer [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:6247:2: warning: (near initialization for '
cmap_GBTpc_EUC_H.usecmap_name[3]') [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:6248:2: warning: large integer implicitly t
runcated to unsigned type [-Woverflow]
jni/../../pdf/../generated/cmap_gb.h:6248:2: warning: large integer implicitly t
runcated to unsigned type [-Woverflow]
jni/../../pdf/../generated/cmap_gb.h:6248:2: warning: initialization makes integ
er from pointer without a cast [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:6248:2: warning: (near initialization for '
cmap_GBTpc_EUC_H.usecmap_name[6]') [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:6248:2: error: initializer element is not c
omputable at load time
jni/../../pdf/../generated/cmap_gb.h:6248:2: error: (near initialization for 'cm
ap_GBTpc_EUC_H.usecmap_name[6]')
jni/../../pdf/../generated/cmap_gb.h:6249:2: warning: large integer implicitly t
runcated to unsigned type [-Woverflow]
jni/../../pdf/../generated/cmap_gb.h:6249:2: warning: large integer implicitly t
runcated to unsigned type [-Woverflow]
jni/../../pdf/../generated/cmap_gb.h:6249:2: warning: initialization makes integ
er from pointer without a cast [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:6249:2: warning: (near initialization for '
cmap_GBTpc_EUC_H.usecmap_name[9]') [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:6249:2: error: initializer element is not c
omputable at load time
jni/../../pdf/../generated/cmap_gb.h:6249:2: error: (near initialization for 'cm
ap_GBTpc_EUC_H.usecmap_name[9]')
jni/../../pdf/../generated/cmap_gb.h:6267:2: warning: initialization from incomp
atible pointer type [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:6267:2: warning: (near initialization for '
cmap_GBTpc_EUC_V.storable.free') [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:6268:2: warning: braces around scalar initi
alizer [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:6268:2: warning: (near initialization for '
cmap_GBTpc_EUC_V.usecmap_name[3]') [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:6268:2: warning: braces around scalar initi
alizer [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:6268:2: warning: (near initialization for '
cmap_GBTpc_EUC_V.usecmap_name[3]') [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:6268:2: warning: excess elements in scalar
initializer [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:6268:2: warning: (near initialization for '
cmap_GBTpc_EUC_V.usecmap_name[3]') [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:6268:2: warning: excess elements in scalar
initializer [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:6268:2: warning: (near initialization for '
cmap_GBTpc_EUC_V.usecmap_name[3]') [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:6269:2: warning: initialization makes integ
er from pointer without a cast [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:6269:2: warning: (near initialization for '
cmap_GBTpc_EUC_V.usecmap_name[6]') [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:6269:2: error: initializer element is not c
omputable at load time
jni/../../pdf/../generated/cmap_gb.h:6269:2: error: (near initialization for 'cm
ap_GBTpc_EUC_V.usecmap_name[6]')
jni/../../pdf/../generated/cmap_gb.h:6270:2: warning: initialization makes integ
er from pointer without a cast [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:6270:2: warning: (near initialization for '
cmap_GBTpc_EUC_V.usecmap_name[9]') [enabled by default]
jni/../../pdf/../generated/cmap_gb.h:6270:2: error: initializer element is not c
omputable at load time
jni/../../pdf/../generated/cmap_gb.h:6270:2: error: (near initialization for 'cm
ap_GBTpc_EUC_V.usecmap_name[9]')
In file included from jni/../../pdf/pdf_cmap_table.c:7:0:
jni/../../pdf/../generated/cmap_japan.h:5:1: error: expected '}' before 'static'

make: *** [obj/local/armeabi/objs-debug/mupdfcore/__/__/pdf/pdf_cmap_table.o] Er
ror 1 
```

* * *

## $(MY_ROOT)/pdf/pdf_fontfile.c \

```
jni/../../pdf/pdf_fontfile.c:11:37: fatal error: ../generated/font_droid.h: No s
uch file or directory
compilation terminated.
make: *** [obj/local/armeabi/objs-debug/mupdfcore/__/__/pdf/pdf_fontfile.o] Erro
r 1
some file 
```

* * *

删除上述三行（文件参考）后，我构建并收到以下错误..

静态库：libmupdfthirdparty.a
共享库：libmupdf.so

```
../Android/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/
windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androidea
bi/bin/ld.exe: ./obj/local/armeabi/objs-debug/mupdf/mupdf.o: in function Java_co
m_artifex_mupdf_MuPDFCore_drawPage:jni/mupdf.c:178: error: undefined reference t
o 'AndroidBitmap_getInfo'

../Android/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/
windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androidea
bi/bin/ld.exe: ./obj/local/armeabi/objs-debug/mupdf/mupdf.o: in function Java_co
m_artifex_mupdf_MuPDFCore_drawPage:jn/mupdf.c:190: error: undefined reference t
o 'AndroidBitmap_lockPixels'

../Android/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/
windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androidea
bi/bin/ld.exe: ./obj/local/armeabi/objs-debug/mupdf/mupdf.o: in function Java_co
m_artifex_mupdf_MuPDFCore_drawPage:jni/mupdf.c:257: error: undefined reference t
o 'AndroidBitmap_unlockPixels'

../Android/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/
windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androidea
bi/bin/ld.exe: ./obj/local/armeabi/libmupdfcore.a(draw_device.o): in function fz
_transform_pixmap:jni/../../draw/draw_device.c:884: error: undefined reference t
o 'fz_scale_pixmap'

../Android/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/
windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androidea
bi/bin/ld.exe: ./obj/local/armeabi/libmupdfcore.a(draw_device.o): in function fz
_transform_pixmap:jni/../../draw/draw_device.c:908: error: undefined reference t
o 'fz_scale_pixmap'

../Android/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/
windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androidea
bi/bin/ld.exe: ./obj/local/armeabi/libmupdfcore.a(draw_device.o): in function fz
_transform_pixmap:jni/../../draw/draw_device.c:921: error: undefined reference t
o 'fz_scale_pixmap'

../Android/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/
windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androidea
bi/bin/ld.exe: ./obj/local/armeabi/libmupdfcore.a(draw_device.o): in function fz
_draw_fill_image:jni/../../draw/draw_device.c:992: error: undefined reference to
 'fz_scale_pixmap'

../Android/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/
windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androidea
bi/bin/ld.exe: ./obj/local/armeabi/libmupdfcore.a(pdf_font.o): in function pdf_l
oad_builtin_font:jni/../../pdf/pdf_font.c:184: error: undefined reference to 'pd
f_lookup_builtin_font'

../Android/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/
windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androidea
bi/bin/ld.exe: ./obj/local/armeabi/libmupdfcore.a(pdf_font.o): in function pdf_l
oad_substitute_font:jni/../../pdf/pdf_font.c:200: error: undefined reference to
'pdf_lookup_substitute_font'

../Android/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/
windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androidea
bi/bin/ld.exe: ./obj/local/armeabi/libmupdfcore.a(pdf_font.o): in function pdf_l
oad_substitute_cjk_font:jni/../../pdf/pdf_font.c:217: error: undefined reference
 to 'pdf_lookup_substitute_cjk_font'

../Android/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/
windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androidea
bi/bin/ld.exe: ./obj/local/armeabi/libmupdfcore.a(pdf_cmap_load.o): in function
pdf_load_system_cmap:jni/../../pdf/pdf_cmap_load.c:119: error: undefined referen
ce to 'pdf_load_builtin_cmap'

../Android/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/
windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androidea
bi/bin/ld.exe: ./obj/local/armeabi/libmupdfcore.a(pdf_cmap_load.o): in function
pdf_load_system_cmap:jni/../../pdf/pdf_cmap_load.c:125: error: undefined referen
ce to 'pdf_load_builtin_cmap'

collect2: ld returned 1 exit status
make: *** [obj/local/armeabi/libmupdf.so] Error 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T23:18:44.297

在我使用 R6 版本的 Android NDK 之前，我遇到了完全相同的问题。

我通过简单地将 URL 中的 'r8d' 更改为 'r6' 从 Android 网站获得它。

对于 OSX：http: [//dl.google.com/android/ndk/android-ndk-r6-darwin-x86.tar.bz2](http://dl.google.com/android/ndk/android-ndk-r6-darwin-x86.tar.bz2)

视窗：http: [//dl.google.com/android/ndk/android-ndk-r6-windows.zip](http://dl.google.com/android/ndk/android-ndk-r6-windows.zip)

Linux：http: [//dl.google.com/android/ndk/android-ndk-r6-linux-x86.tar.bz2](http://dl.google.com/android/ndk/android-ndk-r6-linux-x86.tar.bz2)

我希望这会有所帮助。

# javascript - 如何从网络摄像头重新加载图片并将其显示在多个 div 中？

> ID：14171615
> 
> 赞同：0
> 
> 时间：2013-01-05T12:07:18.690
> 
> 标签：javascript, jquery

我正在使用这个：

```
<html>
<head>
   <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>

<script type="text/javascript">
$(document).ready(function() {
    setInterval('reloadImages()', 2000); // 2 seconds
});
function reloadImages()
{
   $('#picone').attr('src', 'http://www.someserver/pic.jpg?' + Math.random());
}

</script>

<title>Webcam</title>
</head>
<body>
<div id="first">
<img src="pic.jpg" id="picone" border="1" />
<div>
</body>
</html> 
```

如何复制/克隆图片并将其显示在第二个/第三个/第四个...任何 div 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T12:29:00.047

如果图片要保持不变（我假设它是？）那么你不需要克隆它。因此，如果您还有两个图像，例如：

```
<img src="pic.jpg" id="pictwo" border="1" />
<img src="pic.jpg" id="picthree" border="1" /> 
```

然后你可以这样做：

```
$('#picone, #pictwo, #picthree').attr('src', 'http://www.someserver/pic.jpg?' + Math.random()); 
```

这当然可能不是你想要的......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T12:50:53.740

我想你的第二，第三，第四...... div结构的HTML如下所示：

```
<div id="first">
    <img src="pic.jpg" id="picone" border="1" />
</div>
<div id="second"></div>
<div id="third"></div>
<div id="fourth"></div> 
```

然后你可以这样做：

```
$(document).ready(function(){
    $('#second, #third, #fourth').each(function(){
        $(this).prevAll("#first").children("img").clone().appendTo($(this));
    });
}); 
```

# windows - GetWindowThreadProcessID 和使用 TIB 获取线程 id 有什么区别？

> ID：14171617
> 
> 赞同：-2
> 
> 时间：2013-01-05T12:07:36.510
> 
> 标签：windows, winapi

我想获取一个进程的主线程ID，我看到有两种方法：

首先是使用 threadID=GetWindowThreadProcessId(hWnd,NULL) 其中 hWnd 是我们想要的进程的句柄

二是使用

```
_asm
    {
        mov eax, fs:[18h]
        add eax, 36
        mov [lpThId], eax
    }

    HANDLE hProcess = OpenProcess(PROCESS_VM_READ, FALSE, pId);
    if(hProcess == NULL)
        return NULL;

    DWORD tId;
    ReadProcessMemory(hProcess, lpThId, &tId, sizeof(tId), NULL) == FALSE) 
```

那么有什么区别呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T12:12:00.040

从 MSDN [GetWindowThreadProcessId](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633522%28v=vs.85%29.aspx)：

> 检索**创建指定窗口**的线程的标识符，以及（可选）创建窗口的进程的标识符。

与TIB无关。不同之处在于这两个是不同的标识符，这可能是巧合。

# html - 选择框在 Opera 中看起来不同？

> ID：14171618
> 
> 赞同：1
> 
> 时间：2013-01-05T12:07:37.177
> 
> 标签：html, css, cross-browser, opera

以下是我想要的结果。它在 Chrome、IE 和 FF 中运行良好：

![完美的](../Images/7373cc5ea3a7da70baabdeb05320ffda.png)

这是我使用 Opera 时的结果：

![破碎的](../Images/7bec68d3566dc31ab75cc93a8c4a5819.png)

演示网站：[http ://www.unforgivengamers.com](http://www.unforgivengamers.com)

请帮忙？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T12:21:07.240

我能够通过将高度分配给输入来修复差异。

看这个例子，在任何浏览器中都没有高度差异：

[http://jsbin.com/ijuzas/1/edit](http://jsbin.com/ijuzas/1/edit)

如果为 select 和 input 元素分配相同的高度，它应该相等。

使用 operas 检查元素，我将高度更改为 14px，它看起来一样。

```
#menu form input[type="text"] {
height:14px;
} 
```

但是，最好在 select 和 input 上设置相同的高度，而不是保持未设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T13:13:49.763

我最终使用了一个丑陋的 css hack，只针对选择填充略有不同的歌剧。

```
x:-o-prefocus, #menu select {
 padding: 5px 2px 5px 0;
} 
```

# css - 删除第一个菜单项分隔符 wordpress

> ID：14171621
> 
> 赞同：2
> 
> 时间：2013-01-05T12:08:27.110
> 
> 标签：css, wordpress

我试图在除第一个以外的所有菜单项之前插入“/”作为分隔符。我设法插入了分隔符，但无法弄清楚如何只删除第一个。这是CSS：

```
.nav li a:before {content:' / ';}
.nav li a:first-child:before {content:'';} 
```

这对我来说很有意义，但是第二行代码删除了所有分隔符，而不是第一行。我还尝试了以下方法：

```
.nav li:before {content:' / ';}
.nav li:first-child:before {content:'';} 
```

现在第一个分隔符已被删除，但所有分隔符都位于菜单链接上方和之间。我使用骨骼启动器主题。请帮助一个菜鸟。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T12:14:53.293

试试这个：

```
.nav li a:before {content:' / ';}
.nav li:first-child a:before {content:'';} 
```

the`<a/>`永远是 the 的第一个孩子，`<li />`所以你需要得到第一个`<li/>`

# windows-8 - Windows 应用商店应用程序 (C#/XAML) 上的 Bing 地图在点击图钉时显示弹出窗口

> ID：14171622
> 
> 赞同：0
> 
> 时间：2013-01-05T12:08:33.220
> 
> 标签：windows-8, windows-runtime, winrt-xaml, bing, bing-maps

我在我的 Windows 应用商店应用程序中使用**Bing 地图**，我显示了一些带有一些位置的图钉。

我想要做的是当用户点击图钉时，会出现一个弹出窗口，其中包含一些与该图钉位置相关的信息。类似于用户在 Microsoft 地图应用程序中点击我的位置时弹出的内容

如何才能做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T13:05:43.080

非常简单，您可以使用*Pushpin*`Tapped`的事件来触发弹出窗口，然后使用 a来定位您的弹出窗口，请参见[http://msdn.microsoft.com/en-us/library/hh846488.aspx](http://msdn.microsoft.com/en-us/library/hh846488.aspx)*`MapLayer.SetPosition`*

 *像这样

```
currentLocationPushpin.Tapped += Current_location_pushpin_tapped; 
```

然后

```
void Current_location_pushpin_tapped(object sender, TappedRoutedEventArgs e)
{
  MapLayer.SetPosition(placesAroundYou,location);
  MapLayer.SetPositionAnchor(placesAroundYou, new Point(-200, 40));
  BingMap.Children.Add(_mapLayer);
} 
```

尝试使用**弹出**控件或像这样的假的

您可以使用*Popup 控件*（请参阅[此处的 MSDN 文档](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/jj150602.aspx)）或切换**Border**元素的可见性以使用Popup来伪造*Popup*`Visibility="Collapsed"`，试试这个

```
<Border Background="#FFC3C2BF" Opacity="50" Margin="38,0,0,376" BorderThickness="1" BorderBrush="Black" CornerRadius="8" HorizontalAlignment="Left" MinWidth="50" Width="126" Height="auto">
    <TextBlock x:Name="PushpinText" HorizontalAlignment="Left" TextWrapping="Wrap" VerticalAlignment="Top" Foreground="Black" Padding="10,10,10,10" />
</Border> 
```*

# php - 设置 Google 登录并获取用户数据

> ID：14171624
> 
> 赞同：0
> 
> 时间：2013-01-05T12:08:36.070
> 
> 标签：php, oauth

我是新来的。所以，需要各位帮忙。

我有两个目标。

1) 我需要在我的网站上设置“使用 Google 帐户登录”按钮。

2）访客登录后，我想获取登录访客的个人资料。

我希望你们能指导我正确的方向。我正在尝试在 PHP 中执行此操作。

问候！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T13:26:09.233

Try this tutorial on how to login to Youtube: [http://www.conseo.cc/web-programming/477-youtube-oauth](http://www.conseo.cc/web-programming/477-youtube-oauth) . Just change the scope variable to whatever you need and that's it.

# iphone - 当一个变量在 ARC 中既是 __block 又是 __weak 是什么意思？

> ID：14171628
> 
> 赞同：2
> 
> 时间：2013-01-05T12:09:15.707
> 
> 标签：iphone, objective-c, ios, memory, automatic-ref-counting

我了解 ARC 中的 __block 保留了该变量。然后可以在分配变量之前访问块中的变量时使用它，如下所示：

```
 __block __weak id observer = [[NSNotificationCenter defaultCenter] addObserverForName:MPMoviePlayerPlaybackDidFinishNotification object:player queue:[NSOperationQueue mainQueue] usingBlock:^(NSNotification* notif){
    // reference the observer here. observer also retains this block,
    // so we'd have a retain cycle unless we either nil out observer here OR
    // unless we use __weak in addition to __block. But what does the latter mean?
  }]; 
```

但我无法解析这个。如果`__block`导致观察者被块保留，那么有效地同时强和弱意味着什么？在这里做什么`__weak`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-05T12:33:33.523

`__block`意味着该变量就像全局变量一样，在当前帧堆栈中存在，并且可以由您将在范围中声明的块访问。

`__weak`意味着变量不保留指向的对象，但如果对象被释放，`__weak`指针将被设置为 nil。

在您的情况下，观察者会捕获 addObserverForName:object:queue:usingBlock: 的返回值，因此它不需要很强。如果是强的，那么它会保留观察者，使其成为全局并生存，直到强参考设置为零。

**例子**

```
#import <Foundation/Foundation.h>

void (^foo()) ()
{
    NSString* str= [[NSString alloc]initWithFormat: @"Hey"];
    __block __weak NSString* x= str;
    return ^
    {
        NSLog(@"%@",x);
    };
}

int main(int argc, char** argv)
{
    @autoreleasepool
    {
        void (^block) ()= foo();
        block();
    }
    return 0;
} 
```

这个例子打印（null），让我们看看发生了什么：

*   字符串 @"Hey" 的 ARC 引用计数为 1；
*   它在块中使用，但由于它很弱，它没有被块保留，所以它仍然计数为1；
*   块被返回并执行，因为我们退出了 foo 函数作用域，字符串被释放并且指针 x 被设置为 nil。

所以你可以这样做：

```
void (^foo()) ()
{
    NSString* str= [[NSString alloc]initWithFormat: @"Hey"];
    return ^
    {
        NSLog(@"%@",str);
    };
} 
```

没问题： str 默认情况下是强的，所以它被捕获，你不需要 __block 说明符。

# c# - Microsoft TPL（任务并行库）与 Intel TBB（线程构建块）

> ID：14171630
> 
> 赞同：1
> 
> 时间：2013-01-05T12:09:26.647
> 
> 标签：c#, c++, multithreading, task-parallel-library, tbb

我的问题是，正如标题所说：在一般层面上（易用性、对所发生情况的控制程度等），您会为小型并行程序推荐哪一个？微软的 TPL 还是英特尔的 TBB ？

先感谢您

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-05T13:54:07.760

真的不容易回答这个问题。TBB 是一个 C++ 模板库，而 TPL 是一个 .NET 库。假设您可以选择您喜欢的任何语言，它们都提供类似的通用并行结构，主要是：

*   并行循环：`Parallel.For`在 TPL 和`parallel_for`TBB 中
*   并行任务：`Task`在 TPL 和`tbb:task`TBB 中
*   各种并发集合
*   其他并行模式，例如`parallel_reduce`TBB 中的，可以用 TPL 中的 plinq 模拟

但是同样，根据您选择的语言，您实际上并没有在两者之间做出选择。

# javascript - JavaScript 工厂模式和 OO 继承

> ID：14171633
> 
> 赞同：1
> 
> 时间：2013-01-05T12:09:59.903
> 
> 标签：javascript, oop, inheritance

为什么使用**多页**“类型”会覆盖数组中的所有项目，但在使用“基本类型”**工具**时不会？

注释/取消注释第 52 行（从 js 底部开始的 9）进行测试。

**JavaScript**：

定义了两种类型，一种是作为抽象基本类型的“工具”，另一种是从工具“多页”继承的具体类型。

“模型”对象定义了动态创建的有效类型，getNewInstance() 函数返回一个有效类型的新实例。

viewmodel 'vmDesigner' 包含我们创建的多页的可观察数组。

```
// Contsructor - Inherited
var Tool = function () {
    var self = this;

    //Public Fields
    self.id = ko.observable().extend({
        required: true
    });
    self.type = ko.observable();
    self.xPos = ko.observable();
    self.yPos = ko.observable();
    self.xSize = ko.observable();
    self.ySize = ko.observable();
};

var MultiPage = function () {
    var self = this;
    self.tools = ko.observableArray();
};

// Inherit from Tool.
MultiPage.prototype = new Tool();
$.extend(MultiPage, Tool);

function Model(tool, multipage) {
    var types = {
        tool: tool,
        multipage: multipage
    };
    return types;
}
var model = new Model(Tool, MultiPage);

function getNewInstance(type, initisations) {
    var _Type = model[type];
    return (_Type ? new _Type().id(initisations.id) : null);
}

function vmDesigner() {
    var tools = ko.observableArray();
    return {
        tools: tools
    };
}

var vd = new vmDesigner();

var type = 'multipage';
//var type = 'tool';

var dataItem = new Tool(); //tmp data

vd.tools.push(getNewInstance(type, { id: 1, xPos: 50, yPos: 50 }));
vd.tools.push(getNewInstance(type, { id: 2, xPos: 60, yPos: 60 }));
vd.tools.push(getNewInstance(type, { id: 3, xPos: 70, yPos: 70 }));

ko.applyBindings(vd); 
```

**HTML**：

标记绑定到视图模型并显示工具数组中的所有项目。

```
<div id="view-design" data-bind="foreach: tools">
  Tool:<span data-bind="text: id"></span>
  <br />
</div> 
```

# mysql - 同时获取列的最大值和特定记录的同一列

> ID：14171634
> 
> 赞同：1
> 
> 时间：2013-01-05T12:10:09.777
> 
> 标签：mysql, sql, select, if-statement

我有一张这样的桌子：

```
_id integer
column_1 text
column_2 integer 
```

我想获取是否存在的值，`column_2`如果`_id = 1`不存在则获取最大值`column_2`

```
SELECT max(column_2), column_2
where _id = 2 
```

这肯定会失败，有没有办法在同一个查询中获取这两个值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T12:14:52.700

试试这个查询

```
SELECT 
     IFNULL(column_2,l.MValue) 
FROM mytable 
LEFT JOIN (
          SELECT 
            id,   
            MAX(column_2) as MValue 
          FROM mytable 
          ) as l ON l.id = mytable.id 
WHERE mytable.id = 1 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/7839c/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T13:11:21.573

尝试这个：

```
SELECT IFNULL(column_2, (SELECT MAX(column_2) FROM test)) column2  
FROM test WHERE id = 1; 
```

检查[**SQL FIDDLE 演示**](http://sqlfiddle.com/#!2/7839c/25)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T13:13:43.187

如果我的问题是正确的，这可能会对您有所帮助。

```
select 
    IF(column_2 IS NULL, X.maxv, column_2) 
from test,(select max(column_2) as maxv from test)as X 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-05T12:16:08.033

您可以使用 (Exist) SQL 语句

# string - 汇编打印字符串

> ID：14171636
> 
> 赞同：0
> 
> 时间：2013-01-05T12:10:21.100
> 
> 标签：string, assembly, x86, dos

我在打印从键盘读取的字符串时遇到问题，如果字符串是最大长度，那么它可以工作，但是如果我只输入 3 个字符，例如我得到一个空白的黑色空间，这是代码：

```
assume cs:code,ds:data

data segment
    sir db 12 dup (?),'$'
    mesaj db "Who`s your daddy?",13,10,"$"
data ends

code segment
start:
    mov ax,data
    mov ds,ax
    mov dx,offset mesaj
    mov ah,09h
    int 21h
    mov bx,offset sir
    mov sir[0],11
    mov dx,bx
    mov ah,0ah
    int 21h
    mov dx,offset sir
    mov ah,09h
    int 21h
    mov ah,01h
    int 21h
    mov ax,4c00h
    int 21h
code ends

end start 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-08T01:12:00.080

如果您更改您的`sir db 12 dup (?), '$'`to `sir db 12 dup('$'),'$'`，并且您的`mov dx, offset sir`to`mov dx, offset sir + 2`就像其他人在评论中建议的那样，您的代码应该可以工作。

但是，如果您想清楚地看到结果，则需要打印一些换行符。

这是因为`0ah`例程（字符串输入）：

1.  `0dh`将您的输入回显到终端，包括按 Enter 时它拾取的回车符 ( )，但不包括`0ah`将光标移动到下一行的换行符 ( )

2.  将您的所有输入（包括回车）放在指定的内存位置，但同样没有换行。

这意味着在输入例程运行后，您的光标立即位于*您输入的行的开头，该行*仍然包含您的回显输入。因此，在您执行任何其他操作之前，打印一个换行符以使其进入下一行。

接下来，当你打印出字符串时，最后的回车被拾起，光标返回到行首，但同样没有换行。之后写入的任何内容（由您的程序或系统上的任何其他程序）很可能会覆盖您打印的内容。因此，再次打印一个换行符，使其首先进入下一行。

打印换行应该很简单：

```
data segment
....
    lf db 10, '$'
....

code segment
....
    mov dx, offset lf
    mov ah, 9
    int 21h
....

    mov dx, offset lf
    mov ah, 9
    int 21h
.... 
```

# android - 为什么我的程序在尝试在 SherlockListFragment 上加载自定义 ListView 时抛出错误

> ID：14171637
> 
> 赞同：0
> 
> 时间：2013-01-05T11:19:41.517
> 
> 标签：android, android-listview, android-fragments, actionbarsherlock, android-listfragment

我是 android 开发的新手，我试图使用字符串数组中的值创建一个幻灯片菜单。我想这样做是因为我想使用适当的图标自定义每一行，然后将幻灯片菜单的文本自定义为多语言。当我加载代码时，它显示正在读取所有值，但随后抛出异常，这是我的代码：（我的代码基于此示例[教程：Android 中的 ListView 使用自定义 ListAdapter 和缓存视图](http://www.framentos.com/en/android-tutorial/2012/07/16/listview-in-android-using-custom-listadapter-and-viewcache/)）

我的代码：

```
public class Slide_Menu extends SherlockListFragment {

    private String TAG = getClass().getSimpleName();;
    private ListView listView;
    private Context ctx;
    private View view;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        Log.i(TAG,"Slide Menu is called");
        this.view = inflater.inflate(R.layout.slide_menu, null);
        this.ctx = getActivity();
        return this.view;

    }

      @Override
      public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        Log.i(TAG,"Slide Menu is on onActivityCreated");
        try {
            List menu_list= new ArrayList();
            Resources res = getResources();
            String[] menu_values = res.getStringArray(R.array.slide_menu_options);
            for(int i=0; i<=menu_values.length;i++)
            {
                Log.i(TAG,"Adding the items on the Slide Menu: " + menu_values[i].toString());
                menu_list.add(new SlideMenu_Contents(menu_values[i].toString(),"search"));
            }
            Log.i(TAG,"Slide Menu is on Loop");
            this.listView = (ListView) this.view.findViewById(R.id.list);
            this.listView.setAdapter( new SlideMenu_Adapter(this.ctx, R.layout.single_row_slidingmenu, menu_list ) );
        }
        catch (Exception e) {
            Log.i(TAG,"Error on loading the string menu on Slide Menu.");
        }
      }
} 
```

SlideMenu_Adapter、SlideMenu_Contents 等其他文件与示例相同，我根据需要更改了它们，例如 SlideMenu_Contents 只有文本和图像。

这是我的布局： **single_row_slidingmenu.xml**

```
 <!--  ListRow Left sied Thumbnail image -->
    <LinearLayout android:id="@+id/thumbnail"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="3dip"
        android:layout_alignParentLeft="true"
        android:layout_marginRight="5dip">

        <ImageView
            android:id="@+id/image_option"
            android:layout_width="50dip"
            android:layout_height="50dip"
            android:contentDescription=""/>

    </LinearLayout>

    <!-- Title Of Song-->
    <TextView
        android:id="@+id/slidemenu_text_option"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignTop="@+id/thumbnail"
        android:layout_toRightOf="@+id/thumbnail"
        android:text=""
        android:textColor="#040404"
        android:typeface="sans"
        android:textSize="15sp"
        android:textStyle="bold"/>

</RelativeLayout> 
```

**幻灯片菜单.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:background="@drawable/slidemenu_list_selector">

    <ListView xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" 
        android:paddingLeft="@dimen/list_padding"
        android:paddingRight="@dimen/list_padding"
        android:divider="#1e1e1e"
        android:dividerHeight="2dp"
        android:textColor="@color/slidemenu_textcolour"
        android:listSelector="@drawable/slidemenu_list_selector">

    </ListView>
 </LinearLayout> 
```

# android - 软键盘问题

> ID：14171639
> 
> 赞同：0
> 
> 时间：2013-01-05T12:10:32.160
> 
> 标签：android, keyboard

所以，我玩了 SoftKeyboard Demo Project，我有 5 个问题和 1 个问题：

1）我的问题，当输入一个单词，并切换到符号键盘时，输入一个符号，之前输入的单词被删除，如果：i输入单词>>在建议列表中选择>>切换到符号，在这种情况下字没删，怎么处理？

2) 如何更改背景键颜色？，例如。：就像在 CyanogenMode 键盘中一样，键是灰色的，而 Shift-EnterSpace 等更暗，我的意思是键的背景颜色，而不是图标

3）当长按一个键时，我设法获得更多键的弹出窗口，例如。：'a'，弹出窗口出现并且工作正常，但是一个十字图标（如寡妇中）出现关闭弹出窗口，如何在释放键时自动关闭弹出窗口，如在CM键盘中？

4）如何处理长按 Space/Enter ，例如。: 更改语言或显示输入设置？

5) 我在哪里可以找到所有对应的键码列表？例如：'a' = 97 ？

6) 软键盘支持外接字典吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T05:08:48.053

克隆这`git clone https://android.googlesource.com/platform/packages/inputmethods/LatinIME`将回答上面几乎所有的问题，这是 android 默认键盘。

# c# - 在 C# 中默认将接口设置为公共

> ID：14171643
> 
> 赞同：5
> 
> 时间：2013-01-05T12:10:51.743
> 
> 标签：c#, .net, visual-studio-2010

Visual Studio 有什么方法可以创建我的“公共”界面？例如，右键单击文件夹 -> 创建新项目 -> 代码 -> 界面。

每当创建文件时，都没有访问修饰符。

```
interface IMyInterface 
{

} 
```

有什么方法可以默认将其公开吗？

```
public interface IMyInterface
{

} 
```

我总是忘记手动将它们更改为公开（当需要时）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-05T12:20:43.883

`IMyInterface`使用上面显示的公共界面打开您的项目。

去`File > Export Template`。

按照步骤操作（确保选择*item* template 而不是*Project template*）并将其保存在您选择的名称下。

当您重新启动 Visual Studio 并打开一个项目时，它将在添加项目对话框中可用。您将能够像使用其他项目一样从对话框中设置界面的名称。

请注意，这不会覆盖随 Visual Studio 安装的默认界面模板，因此您仍然可以在需要时轻松创建私有界面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T13:12:33.123

您还可以为公共接口创建一个代码片段，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<CodeSnippets
xmlns="http://schemas.microsoft.com/VisualStudio/2005/CodeSnippet">
<CodeSnippet Format="1.0.0">
    <Header>
        <Title>public interface</Title>
    </Header>
    <Snippet>
        <Code Language="csharp">
            <![CDATA[
    public interface IMyInterface
        {
            }
    ]]>
        </Code>
    </Snippet>
</CodeSnippet> 
```

并将其保存为 publicinterfacecsharp.snippet。然后转到 Tools -> Code Snippets Manager...
选择语言为 C# 和 My Code Snippets 文件夹，然后单击 Import.. 并指向保存代码片段的位置。现在在任何新项目中，您可以右键单击编辑器窗口并选择插入代码片段 -> 我的代码片段 -> publicinterfacecsharp。

# gwt - 使用 JSNI 创建 Labeled Marker 导致 Object function MarkerLabel_(marker, crossURL, handCursorURL){ ...} 没有方法 'getSharedCross'

> ID：14171647
> 
> 赞同：0
> 
> 时间：2013-01-05T12:11:09.670
> 
> 标签：gwt, google-maps-api-3, jsni

我尝试通过使用**JSNI**调用**google-maps-utility-library-v3 的 markerwithlabel.js**来创建**标签标记**。但是，我总是收到此异常：

 ****```
com.google.gwt.core.client.JavaScriptException: (TypeError) @com.gwt.map.client.GWTMap::setLabeledMarker(Lcom/google/gwt/maps/client/base/LatLng;Lcom/google/gwt/maps/client/MapImpl;)([JavaScript object(51), JavaScript object(19)]): Object function MarkerLabel_(marker, crossURL, handCursorURL){ ...} has no method 'getSharedCross' 
```

这是我创建的 JSNI 方法：

```
 public final native void setLabeledMarker(LatLng ll,MapImpl myMap)
/*-{
   var marker = new $wnd.MarkerWithLabel({
   position: ll,
   draggable: true,
   raiseOnDrag: true,
   labelContent: "Hello",
   labelAnchor: new $wnd.google.maps.Point(22, 0),
   labelClass: "labels", // the CSS class for the label
   labelStyle: {opacity: 1.0}
 });

 marker.setMap(myMap);
}-*/; 
```

我正在使用[Branflake 的 GWT Map 版本 3.8.1](https://github.com/branflake2267/GWT-Maps-V3-Api)和[google-maps-utility-library-v3 的 markerwithlabel.js](http://google-maps-utility-library-v3.googlecode.com/svn/tags/markerwithlabel/1.1.7/src/)

请给我你的建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T09:26:41.007

你是如何加载 markerwithlabel.js 脚本的？您应该在 google maps API 库之后通过将脚本元素附加到 DOM 来动态加载它。****

# asp.net-mvc - NuGet 卸载 Foundation 3 Core 文件错误

> ID：14171648
> 
> 赞同：0
> 
> 时间：2013-01-05T12:11:24.393
> 
> 标签：asp.net-mvc, visual-studio-2012, nuget

我正在尝试在 Visual Studio 2012 中使用 Manage NuGet Packages 从我的 ASP.NET MVC 项目中卸载 Foundation 3 Core 文件。

当我单击卸载时，我收到此错误：

> 无法卸载“Foundation3_Core 3.2”，因为“Foundation3_MVC4 2.2.32”依赖于它。

我必须做什么才能从我的项目中卸载它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T12:11:05.607

我从 packages.config 中删除了 Foundation 的错误条目，之后我可以使用 NuGet 将其卸载。

# c# - Click / MouseClick 事件永远不会到达我的 WinForms UserControls

> ID：14171650
> 
> 赞同：0
> 
> 时间：2013-01-05T12:11:32.133
> 
> 标签：c#, winforms, event-handling, mouseevent

我有以下情况（简化）： 在 WinForms 表单中，我有一个 GroupBox。它里面有一些 UserControl_A 对象，每个对象都包含几个 UserControl_B 对象（当然，它们都是从 UserControl 派生的）。

我有一个用于 GroupBox 的 ContextMenuStrip，每次右键单击都可以正常工作，无论是在任何 UserControl_A/B 对象上还是在 GroupBox 背景本身上。

但我还需要处理左键单击。处理 GroupBox 的 Click 和 MouseClick 事件是有效的，但仅在背景上。只要指针位于 UserControl_A 或 UserControl_B 对象内，就不会发生任何事情。我试图处理两个 UserControl 类的 Click 和 MouseClick 事件，但根本不会调用处理程序。

任何提示这里出了什么问题？或者如何调试这样的事件处理问题？

非常感谢你，斯特凡

补充：我现在做了一个全新的、精简的项目来探索情况，一切正常。那么我怎样才能检测到我的真实项目出了什么问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T12:34:29.380

您必须将您`UserControls`的子控件添加到`GroupBox`：

```
groupBox.Controls.Add(yourUserControl); // correct way 
```

在这种类型中，右键单击适用于您的父控件（GroupBox）的所有子控件。

```
form.Controls.Add(groupBox);
form.Controls.Add(yourUserControl); // wrong way 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T06:10:57.787

你把鼠标事件放在 UserControl_A 中（我认为它的类继承了 Control）当你在（你的 GroupBox ）上的鼠标（over，down，等等......）在那个（UserControl）上时，事件将触发组框

# javascript - Chrome扩展 - 如何选择标签的所有文本并复制

> ID：14171654
> 
> 赞同：4
> 
> 时间：2013-01-05T12:11:42.177
> 
> 标签：javascript, google-chrome, plugins, browser, google-chrome-extension

谁能告诉如何复制整个页面，类似于按 Ctrl+A，然后将当前选项卡复制到剪贴板。

目前我有这个，但尽管扩展已成功添加到 chrome，但它什么也没做：

**清单文件**

```
"permissions":
[
   "clipboardRead",
   "clipboardWrite"
],
// etc 
```

**内容脚本**

```
chrome.extension.sendRequest({ text: "text you want to copy" }); 
```

**背景页面**

```
<html>
 <head>
 <script type="text/javascript">
   chrome.extension.onRequest.addListener(function (msg, sender, sendResponse) {

      var textarea = document.getElementById("tmp-clipboard");

      // now we put the message in the textarea
      textarea.value = msg.text;

      // and copy the text from the textarea
      textarea.select();
      document.execCommand("copy", false, null);

      // finally, cleanup / close the connection
      sendResponse({});
    });
  </script>
  </head>

  <body>
    <textarea id="tmp-clipboard"></textarea>
  </body>
</html> 
```

**弹出**

```
<textarea id="tmp-clipboard"></textarea>
<input type="button" id="btn" value="Copy Page"> 
```

我无法让它工作，想知道我在这里缺少什么。

任何人都可以指导如何在当前选项卡中模仿`Ctrl`+`A`后跟`Ctrl`+`C`以便它存储在剪贴板中吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-05T14:00:54.783

您的代码中存在多个问题

*   从 Chrome 20 开始，sendRequest 被[弃用](http://developer.chrome.com/extensions/whats_new.html#20)，取而代之的是 sendMessage
*   从 Chrome 20 开始，[不推荐使用](http://developer.chrome.com/extensions/whats_new.html#20)onRequest.addListener ，取而代之的是 onMessage.addListener
*   [由于 CSP](http://developer.chrome.com/stable/extensions/tut_migration_to_manifest_v2.html#inline_scripts)，您的代码中不能有标签

消除这些问题后，您的代码将按预期工作。

# 示范

您的用例的示例演示

## 清单.json

确保清单具有所有权限和注册

```
{
"name":"Copy Command",
"description":"http://stackoverflow.com/questions/14171654/chrome-extension-how-to-select-all-text-of-tab-and-copy",
"version":"1",
"manifest_version":2,
"background":{
    "page":"background.html"
},
"permissions":
[
   "clipboardRead",
   "clipboardWrite"
],
"content_scripts":[
{
"matches":["<all_urls>"],
"js":["script.js"]
}
]
} 
```

## 背景.html

确保它尊重所有安全更改

```
<html>
<head>
<script src="background.js"></script>
</head>
<body>
<textarea id="tmp-clipboard"></textarea>
</body>
</html> 
```

## 背景.js

为模拟`Ctrl`+`A`和`Ctrl`+添加了监听器`C`

```
chrome.extension.onMessage.addListener(function (msg, sender, sendResponse) {
    //Set Content
    document.getElementById("tmp-clipboard").value = msg.text;
    //Get Input Element
    document.getElementById("tmp-clipboard").select();

    //Copy Content
    document.execCommand("Copy", false, null);
}); 
```

## 内容脚本.js

传递要复制的内容

```
chrome.extension.sendMessage({ text: "text you want to copy" }); 
```

# 参考

*   [清单 v2 更改](http://developer.chrome.com/stable/extensions/tut_migration_to_manifest_v2.html)
*   [铬 20 变化](http://developer.chrome.com/extensions/whats_new.html#20)
*   [背景页面](http://developer.chrome.com/stable/extensions/background_pages.html)

# c++ - ticpp逆序遍历节点

> ID：14171656
> 
> 赞同：0
> 
> 时间：2013-01-05T12:12:31.290
> 
> 标签：c++, xml-parsing, iterator

我正在使用 ticpp 以一种简单的方式来处理 xml 文件。但是迭代器接口使用起来有点尴尬。我是否正确假设没有办法以相反的顺序遍历某个父级的子级？（[文档](http://ticpp.googlecode.com/svn/docs/classticpp_1_1Iterator.html)）

迭代器接口确实有一个`operator--()`. 然而，在“结束”迭代器上调用它会导致“访问冲突读取位置 0x00000000。”。我错过了什么吗？有没有一种快速的方法来处理这个？

我目前正在考虑的解决方案是简单地遍历列表两次：首先将所有子项存储在一个`std::array`（数组最好在这里？）..然后再次以相反的顺序检查所有元素。但正如所说：我不禁认为我一定错过了一些功能......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T11:13:44.923

结果是我错过了一些东西；除了使用 ticpp 提供的迭代器接口，我还可以使用 tixml 的基于节点的接口。（ticpp 只是一个抽象层）。

以下循环允许的函数很少：

```
for(ticpp::Node* pchild(elem.LastChild()); 
    pchild != nullptr; 
    pchild = pchild->PreviousSibling(false)) { 
```

# iphone - ECGraph 的动态值

> ID：14171664
> 
> 赞同：0
> 
> 时间：2013-01-05T12:13:52.380
> 
> 标签：iphone, ios, graph, nsarray, drawrect

我在我的应用程序中使用[ECGraph](http://code.google.com/p/ecgraph/)，我需要`myTopNameStr`动态添加在（继承自）`drawRect`中定义的方法中`DisplayView.m``UIView``NSArray``ECGraphViewController.m`

```
 - (void)drawRect:(CGRect)rect {
NSLog(@"==========%@",topPlace);
// Drawing code
CGContextRef _context = UIGraphicsGetCurrentContext();
ECGraph *graph = [[ECGraph alloc] initWithFrame:CGRectMake(0,0, 320, 480)
                                    withContext:_context isPortrait:YES];
ECGraphItem *item1 = [[ECGraphItem alloc] init];
item1.isPercentage = YES;
item1.yValue = 71;
item1.width = 55;
item1.myTopNameStr = [topPlace objectAtIndex:0];
 // item1.name = @"item1";

ECGraphItem *item2 = [[ECGraphItem alloc] init];
item2.isPercentage = YES;
item2.yValue = 61;
item2.width = 55;
 // item2.myTopNameStr =[_topNameAry objectAtIndex:1];
//item2.name = @"item2";

ECGraphItem *item3 = [[ECGraphItem alloc] init];
item3.isPercentage = NO;
item3.yValue = 51;
item3.width = 55;
 // item3.myTopNameStr =[_topNameAry objectAtIndex:2];
 // item3.name = @"item3";

NSArray *items = [[NSArray alloc] initWithObjects:item1,item2,item3,nil];
 // [graph setXaxisTitle:@"name"];
 // [graph setYaxisTitle:@"Percentage"];
 // [graph setGraphicTitle:@"Top Chat.Points"];
[graph setDelegate:self];
[graph setBackgroundColor:[UIColor whiteColor]];
[graph drawHistogramWithItems:items lineWidth:0 color:[UIColor clearColor]];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T09:33:28.297

我也在寻找如何在 iOS 应用程序中集成 ecgraph 并在应用程序的特定区域显示图形.. 对于您的问题，您可以先将数据设置到某个中心位置（如 AppDelegate 或一些共享实例类）和然后你可以在 drawRect 方法中访问它。

# javascript - 如何使用 javascript 绑定 Angular 的控制器功能

> ID：14171666
> 
> 赞同：1
> 
> 时间：2013-01-05T12:14:33.737
> 
> 标签：javascript, angularjs

AngularJS中有没有一种方法可以仅使用javascript（而不是使用`ng-*`标记）以编程方式绑定控制器方法？

就像是

```
$("#foo").click(FooController.foo) 
```

PS：我无权访问`$compile`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T14:27:48.097

你真的需要控制器的方法或作用域吗？

如果您需要范围，您可以使用`angular.element('#myid').scope().method`

但请记住，如果您在 AngularJS 事件处理之外进行任何对范围值的修改，则不会检测到它们，因此您需要将代码包装到范围的 $apply 函数中。

还要记住，在 AngularJS 中，来自 JS 的 DOM 修改通常是“大忌”

当然还有控制器的功能（使用“this.xxx = function () ..”创建）。我不确定访问它们是否很好，因为它们是私有的，但您应该能够以相同的方式访问：element(..).controller().method

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T12:43:05.200

它不受官方支持。当然，通过一些技巧在技术上是可行的，但是从 JavaScript 绑定事件处理程序意味着从控制器访问 DOM 元素，这违反了 AngularJS 的原则。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T20:34:19.180

你可以，但你不应该。你可能会在路上遇到麻烦。

如果您可以对为什么要执行此操作提供更多解释，则可能会有更好（更简单）的方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-05T23:18:02.867

为了在某​​种程度上扩展@Valentyn 的答案，如果您想访问控制器方法（而不是 $scope 方法）——例如，`this`在控制器构造函数中定义的方法（在 Angular 主页上，“tabs”指令定义了函数控制器上的“addPane”使用`this`)——你可以使用

```
angular.element('#myid').controller().method() 
```

# android - ListView 中的行号

> ID：14171671
> 
> 赞同：1
> 
> 时间：2013-01-05T12:14:56.913
> 
> 标签：android, listview

我有一个 ListView，它使用 SimpleCursorAdapter 从 sqlite 读取数据，该表大约有 1000 行，但我已经按日期过滤了我的 Activity 中的列表，所以过滤后的光标包含那个特殊日子的 2 行。因此我想添加一个自定义行号（不能使用 _id）作为我的列表。我一直在讨论的一个解决方案是 ViewBinder，这是我的代码：

```
adapter.setViewBinder(new ViewBinder() {
    public boolean setViewValue(View aView, Cursor aCursor, int aColumnIndex) {
        if (aColumnIndex == 0) {
            aCursor.moveToFirst();
            if(aCursor.moveToFirst()) {
                TextView textView = (TextView) aView;
                textView.setText("" + WeeklyListRowNumber);
                WeeklyListRowNumber = WeeklyListRowNumber + 1;
            }
            return true;
        }
        return false;
    }
}); 
```

我的列表中有 11 列，并且 WeeklyListRowNumber 在顶部初始化为 1，我的问题是我的行号变为 7,8 但它必须是 1 、 2。有人可以告诉我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T12:51:53.307

由于您正在将适配器用于列表视图，因此您可能会在 getview 中获取位置变量。使用该位置 (int) 作为自定义列表行号，它将从零 (0) 开始。

根据需求设置...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T12:23:53.160

最后我用 ViewBinder 解决了我的问题：

```
adapter.setViewBinder(new SimpleCursorAdapter.ViewBinder() {

        public boolean setViewValue(View aView, Cursor aCursor, int aColumnIndex) {
            if (aColumnIndex == 0) {
                    TextView textView = (TextView) aView;
                    int CursorPos = aCursor.getPosition() + 1;
                    textView.setText(Integer.toString(CursorPos));

                return true;
             }

            return false;
        }}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T04:55:17.203

```
public View getView(int position, View convertView, ViewGroup parent) {
        View retval = null;

            retval = LayoutInflater.from(parent.getContext()).inflate(
                    R.layout.content, null);

            title = (TextView) retval.findViewById(R.id.contactName);
            number = (TextView) retval.findViewById(R.id.contactNumber);
            title.setText(text to display in list);
            number.setText(""+position);//add row number to list //fixed the variable
        } 
```

# oop - C++ 游戏设计原则

> ID：14171674
> 
> 赞同：2
> 
> 时间：2013-01-05T12:15:30.047
> 
> 标签：oop, design-principles, 2d-games

我是stackover的新手，这是我第一次发帖，所以请温柔:-)

我正在开发一个多层次的射击游戏，并且我正在质疑针对我的目的最好的 OOP 设计，明确地管理子弹。

一般来说，游戏有多个玩家和多个敌人，每个人都有一把可以发射子弹的枪。有一些子弹类可以很好地管理多个子弹，它们的位置、动画、渲染等，这些都可以正常工作。

**我的问题是，我是最好为每个敌人实例化这些子弹类的实例，还是最好为管理所有子弹的关卡实例化一个实例（不管是谁发射的）？**

单个实例的好处是子弹管理和渲染可以同时针对它们进行优化，但是它们需要额外的状态信息，以便我们记住哪些子弹属于谁，每个敌人可以存在多少子弹等，并且没有那么松散耦合。每个敌人一个单独的实例的好处是它更整洁，每个子弹需要存储的状态信息更少，但是它们将在每个敌人或玩家的单独调用中进行管理和渲染。子弹间的碰撞也将被证明更加困难，但幸运的是这不是这个特定游戏的要求。

有没有其他人写过类似的东西，你是如何构建它的？在决定之前我应该​​考虑哪些因素，是否有任何游戏设计原则？

问候尼克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T12:36:41.533

对于一般游戏结构，您可能需要阅读[此](http://cowboyprogramming.com/index.php?s=full+aggregation)。

* * *

这可能是我个人的见解，但我认为子弹的全级别处理程序应该更加通用。当玩家射击子弹时，它会向 Bullet-handler 对象发送一个信号，并将子弹计数减一。子弹必须存储哪个玩家射击它，因此您可以回顾哪个玩家射击了哪个玩家，或增加统计数据。更不用说一个级别范围的子弹处理器可以在以后扩展以处理手榴弹、地雷、爆炸的火药填充的狂暴黄鼠狼或诸如此类的东西。

# java - 为什么要使用与它们所在的当前类相同类型的变量？

> ID：14171675
> 
> 赞同：1
> 
> 时间：2013-01-05T12:15:32.807
> 
> 标签：java, linked-list, nested-class

我刚刚找到了一个使用类型为当前类本身的变量的 Java 示例。我不明白为什么以及何时使用这样的东西！这本书的作者没有解释它，因为它只是关于其他东西的示例代码的一部分！谁能帮我理解这种方法的效用？它与“单例设计模式”之类的东西有关吗？此外，我还尝试实例化`test1`，`test2`但出现错误！

```
public class Test {
    public Test() {
        Test test1;
        Test test2;
    }
} 
```

原始片段是关于嵌套类的：

```
public class Tree {

    ExampleNode master;

    public Tree() {
    }

    //...
    class ExampleNode {
        ExampleNode rightNode;
        ExampleNode leftNode;

        //...
        void printMaster() {
            System.out.println( master );
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-05T12:18:00.907

一个有用的简单示例是在[链表中](http://en.wikipedia.org/w/index.php?title=Special:Search&search=linked-list)，其中每个节点都需要对其邻居的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T12:17:31.290

使用可以在该类内部创建类的对象来调用类方法。考虑以下示例：

```
public class SomeClass {
  public void callMethod() {

  }

  public static void main(String... args) {
    SomeClass sc = new SomeClass();
    sc.callMethod();
  }
} 
```

如果不使用方法所属类的实例，我们就不能从静态方法调用非静态或实例方法。正确的？

[与Singleton Pattern](http://en.wikipedia.org/wiki/Singleton_pattern)没有关系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T18:55:22.420

您需要实例化的是测试。正如我所见，与单例模式没有关系，你不会错过任何代码吗？

# php - 用 php imap 帮助我？

> ID：14171676
> 
> 赞同：-1
> 
> 时间：2013-01-05T12:15:34.097
> 
> 标签：php, html, encoding, imap, plaintext

> **可能重复：**
> [PHP imap 问题](https://stackoverflow.com/questions/14158961/php-imap-problems)

我需要能够从 php 脚本中使用我的邮件 (gmail)。但是无论我在哪里尝试，电子邮件正文都会出现像 =3D 和随机等号这样的字符的垃圾。有时它以 base64 的形式出现，或者根本没有。如果没有可用的 html，我如何获取电子邮件并将其显示在 HTML Purifier clean html 或 pre 标签中的纯文本中。？

```
$overview = imap_fetch_overview($inbox,$email_number,0);

$body_pre = imap_fetchbody($inbox, $email_number, 2.1); 

$message = imap_fetchbody($inbox, $email_number, 2.2); 

$message = base64_decode($message);

if (empty($message)){

  $message = $body_pre;
  $message = preg_replace('@(https?://([-\w\.]+)+(:\d+)?((/[\w/_\.%\-+~]*)?(\?\S+)?)?)@', '<a href="$1">$1</a>',$message);
  $message = '<pre>'.htmlentities($message).'</pre>';  

}else{

  $cleanconfig = HTMLPurifier_Config::createDefault();
  $cleanconfig->set('Core.Encoding', 'UTF-8');
  $cleanconfig->set('HTML.Doctype', 'HTML 4.01 Transitional');
  $purifier = new HTMLPurifier($cleanconfig);

  $message = $purifier->purify($message);

} 
```

这段代码，$message 只是空白。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T13:16:06.547

带有“=3D 和随机等号之类的字符”的消息是带引号的可打印编码的。您可以使用带有quoted_printable_decode 的php 进行解码。

邮件消息的编码方式有多种，例如quitd-printable 或base64。发送者决定使用的编码。

# database - 快照隔离 MVCC & B+ 树

> ID：14171681
> 
> 赞同：1
> 
> 时间：2013-01-05T12:16:33.977
> 
> 标签：database, algorithm, database-design, concurrency, snapshot-isolation

我正在开发一个 NoSQL 数据库，它的一些索引使用 64 位基于哈希的 B+ 树，现在我正在研究在持久性 B+ 树上应用快照隔离多版本并发控制 (SI MVCC)。

我遇到的第一个问题是 B+ 树中的每个节点都有一个指向树中下一个节点的指针。一个 64 位指针，指向下一个节点所在文件中的字节地址。因此，当我更新记录节点时，B+ 树的该分支中的所有节点一直到根节点都必须更新 - 是否有更好/更简单的方法来避免如此多的磁盘更新（通常是 4 '磁盘扇区/节点必须在每次记录写入时更新，每个节点都适合单个磁盘扇区）？一个单独的目录记录可能包含所有链接节点的概述？

# java - 下载 OSM Tiles，由对等方重置连接

> ID：14171683
> 
> 赞同：0
> 
> 时间：2013-01-05T12:16:58.150
> 
> 标签：java, android, osmdroid, download

我一直在尝试基于固定区域下载 OSM Tiles 以供离线使用，并且代码已经运行了一段时间。

但是，我最近一直面临这个错误：

```
ERROR(8936): recvfrom failed: ECONNRESET (Connection reset by peer) 
```

我只是想知道这是否是由于 OSM 的服务器问题，还是某种低效的编码约定导致了这个问题？

这些是我的下载代码：

```
for (int y = placeTopLeft.getYTile(); y <= placeBottomLeft.getYTile(); y++){
    for(int x = placeTopLeft.getXTile(); x <= placeBottomRight.getXTile(); x++){
        try {
            String urlStr = "http://a.tile.openstreetmap.org/"+ v +"/"+x+"/"+y+".png";
            URL url = new URL(urlStr);
            HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();
            InputStream in = new BufferedInputStream(urlConnection.getInputStream());
            File newFileDir = new File(Environment.getExternalStorageDirectory().toString() 
                                + "/test/"+ tID+ "/"+v+"/"+x);

            newFileDir.mkdirs();
            File newFile = new File(newFileDir, y+".png");
            OutputStream output = new FileOutputStream(newFile);
            int read;
            while ((read = in.read()) != -1) {
                output.write(read);
                output.flush();
            }
            urlConnection.disconnect();

        } catch (Exception e) {
            mNotificationHelper.cancelled();
            Log.e("URL::: ERROR", e.getMessage());
            e.printStackTrace();
        }
        loopCount++;
        publishProgress( (int) ((loopCount/totalLoopCount) * 100 ) );
    }
} 
```

如果我遗漏了任何其他详细信息以便更清楚地展示此错误，请告诉我，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T10:11:38.017

你看过之前拿到的瓷砖吗？它们是真正的 mapnik 瓷砖吗？当我使用 a.tile.openstreetmap.org、b.tile.openstreetmap.org 或 c.tile.openstreetmap.org 时，很快这些图块只显示 Open Street Map 徽标和消息“此应用程序因过度使用而被阻止.. ..我们的服务器”。

# php - 将 Silverlight 应用程序插入 Symfony 1.4 布局

> ID：14171689
> 
> 赞同：0
> 
> 时间：2013-01-05T12:17:52.013
> 
> 标签：php, silverlight, symfony1, symfony-1.4

我在将 Silverlight 应用程序作为网站的一部分插入时遇到了困难（例如作为促销横幅）。我使用从 PROJECTNAMEtestPage.html 生成的代码。

文件`/apps/frontend/modules/static/templates/gameSuccess.php`：

```
<div id="silverlightControlHost">
    <object data="data:application/x-silverlight-2," type="application/x-silverlight-2"
        width="640px" height="480px">
        <param name="source" value="snake.xap" />
        <param name="onError" value="onSilverlightError" />
        <param name="background" value="white" />
        <param name="minRuntimeVersion" value="3.0.40818.0" />
        <param name="autoUpgrade" value="true" />
        <a href="http://go.microsoft.com/fwlink/?LinkID=149156&amp;v=3.0.40818.0" style="text-decoration: none">
            <img src="http://go.microsoft.com/fwlink/?LinkId=161376" alt="Get Microsoft Silverlight"
                style="border-style: none" />
        </a>
    </object>
    <iframe id="_sl_historyFrame" style="visibility: hidden; height: 0px; width: 0px;
        border: 0px"></iframe>
</div> 
```

`snake.xap`是我的 SL 文件的名称。我应该把它放在`/web`Symfony 项目的目录中吗？FireBug 给了我一些关于预期文件位置的信息：

> 网络错误：404 未找到 -`http://192.168.56.101/frontend_dev.php/static/snake.xap`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T09:36:00.903

如果文件位置是，则必须从`/`更改`value="snake.xap"`开始。`value="/snake.xap"``/web/snake.xap`

# ember.js - Ember JS :: Uncaught TypeError: Object App.Router has no method 'map'

> ID：14171693
> 
> 赞同：3
> 
> 时间：2013-01-05T12:18:37.250
> 
> 标签：ember.js

在路由器上使用 map() 方法时出现未捕获的错误。有任何想法吗 ？？

```
App.Router.map(function(match) {
        match('/').to('index');
        match('/models').to('models');
    }); 
```

错误:: Ember JS :: Uncaught TypeError: Object App.Router has no method 'map'

灰烬版本： [http ://cloud.github.com/downloads/emberjs/ember.js/ember-latest.js](http://cloud.github.com/downloads/emberjs/ember.js/ember-latest.js)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T16:46:02.617

在官方 github 上找到更新有点棘手。不过，您可以在此处获取它的副本：

[https://github.com/sh4n3d4v15/ember-todos/blob/master/app/scripts/vendor/ember.js](https://github.com/sh4n3d4v15/ember-todos/blob/master/app/scripts/vendor/ember.js)

# download - Google 网站：列表模板 + 本地电子表格/数据库

> ID：14171694
> 
> 赞同：2
> 
> 时间：2013-01-05T12:18:43.163
> 
> 标签：download, google-apps-script, spreadsheet, google-sites, list-template

我正在谷歌网站上构建几个“列表”（基于页面模板）页面。这一切都很棒。但问题是我想要一个本地副本（电子表格）作为备份或离线使用。

我的第一个问题是：我可以以某种方式将列表下载为电子表格吗？

此外，如果我可以使用列表模板的出色功能（即，一个简单的表格来输入条目的所有数据；我已经在我的列表模板中使用它，包括下拉列表，以及能够按列排序！），同时能够下载列表的副本或将其保存在我的驱动器中。

那可能吗？如何？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-09-26T17:13:34.390

是的，你可以...整理一下。可以使用以下功能在 Google 表格中进行一些基本的网络抓取：

[`IMPORTHTML`](https://support.google.com/docs/answer/3093339?hl=en&ref_topic=3105411&vid=1-635787171800270557-1611248032)

[`IMPORTXML`](https://support.google.com/docs/answer/3093342?hl=en)

在两者之间，`IMPORTXML`可以很好地获取特定数据，同时`IMPORTHTML` 非常适合[使用 Google 表格作为基本的网络](https://www.benlcollins.com/spreadsheets/google-sheet-web-scraper/)抓取工具来抓取表格。

从那里您可以下载带有列表的 Google 表格，并通常在您的 Google Drive 中保留一份副本，甚至可以将其导出为 PDF 或 Excel 文件。

# python - Python从json中提取顶级用户名

> ID：14171696
> 
> 赞同：1
> 
> 时间：2013-01-05T12:19:02.067
> 
> 标签：python, twitter

我正在尝试从加载的字典中获取排序列表或用户表。我能够按如下方式打印它们，但我不知道如何根据示例中用户名发出的推文数量按降序对它们进行排序。如果我能够做到这一点，我可能会弄清楚如何跟踪用户。谢谢！

```
tweets = urllib2.urlopen("http://search.twitter.com/search.json?q=ECHO&rpp=100")
tweets_json = tweets.read() 
data = json.loads(tweets_json)                                                                                                              

for tweet in data['results']:                                                                                           
...    print tweet['from_user_name']                                                                                                                                                               
...    print tweet['to_user_name']                                                                                          
...    print 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T12:23:50.820

```
tweets = data['results']
tweets.sort(key=lambda tw: tw['from_user_name'], reverse=True) 
```

假设`tw['from_user_name']`包含来自给定用户名的推文数量。

如果`tw['from_user_name']`包含用户名，则：

```
from collections import Counter

tweets = data['results']
count = Counter(tw['from_user_name'] for tw in tweets)
tweets.sort(key=lambda tw: count[tw['from_user_name']], reverse=True) 
```

要按他们发送的推文数量打印前 10 个用户名，您不需要对推文进行排序：

```
print("\n".join(count.most_common(10))) 
```

# jquery - 如何防止某些事件不传播 - JQuery

> ID：14171697
> 
> 赞同：0
> 
> 时间：2013-01-05T12:19:18.370
> 
> 标签：jquery, click

我想在变量“$myvar”的值为“myvalue”时显示一个弹出窗口，所以我输入了这段代码

```
<script type="text/javascript">
    $(document).ready(function(){
            if($myvar=='my value'){
            $("#overlay").removeClass("invisible");
            $("#message").removeClass("invisible");
            }
        $('#message #close').live('click',function() {
            $("#overlay").addClass("invisible");
            $("#message").addClass("invisible");
        });
    });
</script> 
```

这与

```
<div id="overlay" class="invisible"></div>
        <div class="invisible" id="message">
    <div class="header">
        <h2><span><?php echo _('some message!') ?></span>    </h2>
        <div id="close"></div>
   </div>
</div> 
```

所以当用户来到这个页面并且变量设置为'myvalue'时，弹出窗口出现，但是当我点击#close标签时我无法关闭它。事件“点击”是否冒泡以便再次处理脚本？如果是，如何预防？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T12:29:04.857

您的代码对我来说看起来不错，唯一的问题是您的 html 没有`id="follow_message"`您的 JS 似乎期望的包装元素。我假设你只是错过了你的问题。

修复它似乎工作正常：http: [//jsfiddle.net/vcQrV/](http://jsfiddle.net/vcQrV/)

**编辑：**因此修复了您的 JS 以使用`#message`它仍然有效：http: [//jsfiddle.net/vcQrV/1/](http://jsfiddle.net/vcQrV/1/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-05T12:27:10.420

这里：

```
$('#close').die('click');
$('#close').live('click',function() {
}); 
```

`live()`但是，已弃用。改为使用`on()`。

干杯!

# android - 在按钮上方显示 textview 而无需在 xml 中硬编码高度

> ID：14171698
> 
> 赞同：7
> 
> 时间：2013-01-05T12:19:28.060
> 
> 标签：android

我在活动中显示一个文本视图（我打算填充整个屏幕，不包括它下面的按钮）和一个按钮（底部的小按钮）。我希望将 textview 放置在按钮上方。我不想硬编码任何高度/宽度。

因此，对于按钮，我将高度广告宽度保持为 word_wrap 对于文本视图，我将宽度保持为填充父级。

我想知道的是，无论如何我可以将文本视图高度指定为屏幕高度按钮高度。我想在 xml 文件中这样做，但不是在我的代码中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-05T12:24:30.467

为了实现这一点，你必须创建这样的东西：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_above="@+id/button1"
        android:text="TextView" />

    <Button
        android:id="@+id/button1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:text="Button" />

</RelativeLayout> 
```

并且您有一个文本视图，它将停留在您的按钮上方并适合整个屏幕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T12:23:14.737

使用RelativeLayout，设置textview的尺寸为fill_parent，然后在其下方放置按钮，设置按钮的android:layout_below="@+id/textview"和按钮的尺寸为wrap_content。

检查视觉设计器或设备中的结果，它应该可以工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T12:25:10.703

您可以使用 layout_weight 属性

```
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="0dip"
        android:layout_weight="1"
        android:text="TextView" />

    <Button
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Button" />

</LinearLayout> 
```

# php - Facebook PHP SDK 会话丢失，需要刷新 JS SDK

> ID：14171699
> 
> 赞同：6
> 
> 时间：2013-01-05T12:19:30.290
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk, connect

真的很奇怪，使用 PHP SDK (v 3.2.2) 似乎 Facebook 会话丢失了 ($user = 0)。JS SDK 需要重新加载我的页面以恢复 Facebook 会话。这个问题不时发生，有时 Facebook 会话丢失，有时它工作得很好。

```
session_start();

// Run Facebook API
$facebook = new Facebook(array(
  'appId'  => $config['facebook']['id'],
  'secret' => $config['facebook']['secret']
));

// Fetch user
$user = $facebook->getUser();
if($user) {
  try {
    // Just to be sure, add access token to each request
    $user['access_token'] = $facebook->getAccessToken();    

    // Fetch user details
    $user = $facebook->api('/me?access_token='.$user['access_token']);          
  }
  catch (FacebookApiException $e) {
    error_log($e);
    $user = null;
  } 
} 
```

主要问题是 $user = $facebook->getUser(); 返回 0。但是，当用户实际连接时，JS SDK 检测到 auth.login 事件并重新加载页面（另一件奇怪的事情，我使用 auth.login，因为 auth.authResponseChange 事件每秒都会被触发）。现在 $user = $facebook->getUser(); 返回用户的 uid。

```
window.fbAsyncInit = function() {
  FB.init({
    appId : appId,
    channelUrl : '//domain.com/signon/channel.php',
    status     : true,
    cookie     : true,
    xfbml      : true 
  });
  FB.Event.subscribe('auth.login', function(response) {
    location.reload();
  });
}; 
```

在 Facebook 开发人员中，我定义了应用程序域 (domain.com) 和站点 URL ( [http://domain.com/](http://domain.com/) )。已经尝试了带/不带斜杠的站点 URL，但没有解决问题。

知道发生了什么，为什么 Facebook PHP SDK 没有立即检测到用户的会话/不断丢失用户的会话并需要重新加载？这个问题确实会导致糟糕的用户体验。

非常感谢！

罗宾

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T20:42:44.433

我最近遇到了同样的问题，似乎如果在 5 分钟左右不活动后重新加载，会话不会持续。有时有效，有时无效。

上周我一直在研究它，我能想到的唯一解决方案是使用 JS SDK 进行页面重新加载：

```
FB.Event.subscribe('auth.login', function(response) {
      window.location.reload();
    }); 
```

但我同意，就用户体验而言，这不是一个非常优雅的解决方案。您应该传递 `cookie`PHP SDK 中的参数和 JS SDK 中的 oauth 参数，看看是否可行（它不适合我）：

```
$facebook = new Facebook(array(
  'appId'  => $config['facebook']['id'],
  'secret' => $config['facebook']['secret'],
  'cookie' => true
)); 
```

**和**

```
FB.init({
    appId : appId,
    channelUrl : '//domain.com/signon/channel.php',
    status     : true,
    cookie     : true,
    xfbml      : true,
    oauth      : true
  }); 
```

更奇怪的是，我从 Github 重新下载了[最新的 PHP SDK](http://github.com/facebook/facebook-php-sdk)并将其上传到沙箱环境（Apache，PHP 5.4）。我按原样运行示例（使用 JS SDK），它有同样的问题！

现在，如果以上只是没有减少芥末，我还有一些建议。

**稍微改变一下 SDK**

首先，通过

`$facebook->getAccessToken();`

如果返回 0 对你没有好处`$user`。但是，在进行了一些挖掘之后`base_facebook.php`，我注意到该方法`getCode()`实际上用于`$_REQUEST`从查询参数中检索授权码。

从 PHP 手册中，$_REQUEST 是

> 默认情况下包含 $_GET、$_POST 和 $_COOKIE 内容的关联数组。

**但**

它与 $_GET、$_POST 或 $_COOKIE 非常不同。

根据您的设置，这可能有点麻烦。因此，请找到如下所示的`getCode()`函数`base_facebook.php`：

```
protected function getCode() {
if (isset($_REQUEST['code'])) {
    if ($this->state !== null &&
            isset($_REQUEST['state']) &&
            $this->state === $_REQUEST['state']) {

        // CSRF state has done its job, so clear it
        $this->state = null;
        $this->clearPersistentData('state');
        return $_REQUEST['code'];
    } else {
        self::errorLog('CSRF state token does not match one provided.');
        return false;
    }
}

return false;
} 
```

并将查询合并到一个新的数组/变量（让我们称之为`$code_array`）以包含 `$_GET`, `$_POST`&`$_COOKIE`数组，[`array_merge()`](http://php.net/array_merge)如下所示：

```
$code_array = array_merge($_GET,$_POST,$_COOKIE); 
```

你最终得到的是一个包含来自各个请求的所有数据的数组。只需继续并在函数内部替换`$_REQUEST`，`$code_array`即

```
\\replace $_REQUEST with $code_array;
if (isset($code_array['code'])) {
if ($this->state !== null &&
        isset($code_array['state']) && 
        $this->state === $code_array['state']) { //...and so on for the rest 
```

这应该很好地完成工作（希望如此）。

**可选 - 延长您的访问令牌生命周期**

这是可选的，但我还是包含了它。大多数新应用程序已经拥有长期存在的访问令牌，但以防万一，您可以使用该`$facebook->setExtendedAccessToken();`方法来转换您现有的访问令牌。

**注意：**您必须`$facebook->setExtendedAccessToken();`在使用该方法实际获取访问令牌之前调用`getAccessToken()`。

现在，使用您的代码，您将拥有

```
$user = $facebook->getUser();
  if($user) {
    try {
    // Just to be sure, add access token to each request
    $facebook->setExtendedAccessToken();
    $access_token = $facebook->getAccessToken();
    // Fetch user details
    $user = $facebook->api('/me?access_token='.$access_token);
    }
//and so on.. 
```

**结论**

将 $_REQUEST 分解为 $_GET、$_POST 和 $_COOKIE（即使默认情况下它包含所有三个）似乎可以确保我们可以轻松获取 SDK 设置的 cookie。我说似乎是因为见鬼，我自己也不是 100% 确定。

我使用上述方法让它在我的情况下工作，所以我希望分享一些知识，因为我已经为这个问题失去了太多的睡眠，并且找不到可行的解决方案。

希望这可以帮助！

**编辑：**我忘了提，更改 API 请求

```
$user_profile = $facebook->api('/me'); 
```

至

```
$user_profile = $facebook->api('/'.$user.'?access_token='.$access_token); 
```

是我也做过的事情，它有所作为。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-04T13:41:01.380

可能是因为 Facebook PHP SDK 不是 ajax，而且我们使用的是 PHP 页面，而且我们的服务器加载速度比 Facebook 的身份验证过程更快，以读取有效会话。Facebook PHP SDK 需要的是从我们的应用程序中刷新会话验证页面的东西，这应该内置到 Facebook Javascript SDK 中，但看起来它不是。

# php - 如何使用 WAMP 在 Web 上访问 Web 应用程序？

> ID：14171700
> 
> 赞同：-2
> 
> 时间：2013-01-05T12:19:38.173
> 
> 标签：php, apache, web-applications, wamp

我刚刚在运行 Windows 7 的计算机上安装了 WAMP Server 2.2，以便构建 Web 应用程序并使其在线可用。但是，作为一个完整的新手，我不知道我是如何做到这一点的。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T12:29:34.593

简而言之，确保：

*   您的计算机直接连接到 Internet，或者任何为您提供 NAT 的路由器正在将端口 80 (HTTP) 和 443 (HTTPS) 从面向 Internet 的 IP 转发到 LAN 上的计算机
*   端口 80 和 443 未被计算机上的软件防火墙阻止
*   Apache 配置为在网络接口上侦听，现在只在 localhost

也就是说，**不要这样做**。住宅网络连接不是托管网站的最佳选择（有些人禁止这样做）。这将要求您让您的计算机一直运行。您的服务器的任何安全问题都可能将您的专用网络暴露给 Internet 上的攻击者。

改为购买一些第三方虚拟主机。仅将本地安装的服务器用于开发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T12:25:21.297

您需要购买主机并将文件从本地计算机移动到远程服务器，否则将无法在网络上访问。

查看[Tizag 托管指南](http://www.tizag.com/webhost/)了解更多信息。

WAMP 用于本地开发，而不是在 Web 上托管您的网站。

# c - 管道输出到 bc 计算器

> ID：14171701
> 
> 赞同：7
> 
> 时间：2013-01-05T12:19:40.790
> 
> 标签：c, bash, pipe, bc

**简洁版本：**

我正在尝试使用管道让这样的东西在 c 中工作：

```
echo 3+5 | bc 
```

**更长的版本：**

按照[http://beej.us/guide/bgipc/output/html/multipage/pipes.html](http://beej.us/guide/bgipc/output/html/multipage/pipes.html)上有关管道的简单说明，我尝试在该页面上创建类似于上一个示例的内容。准确地说，我尝试使用 2 个进程在 c 中创建管道。子进程将其输出发送给父进程，父进程使用该输出进行计算，使用 bc 计算器。我基本上复制了先前链接页面上的示例，对代码进行了一些简单的调整，但它不起作用。

**这是我的代码：**

```
#include <sys/wait.h>
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <string.h>

int main(void)
{
    int pfds[2];
    pipe(pfds);

    if (!fork()) {
        close(1);       /* close normal stdout */
        dup(pfds[1]);   /* make stdout same as pfds[1] */
        close(pfds[0]); /* we don't need this */
        printf("3+3");
        exit(0);
    } else {
        close(0);       /* close normal stdin */
        dup(pfds[0]);   /* make stdin same as pfds[0] */
        close(pfds[1]); /* we don't need this */
        execlp("bc", "bc", NULL);
    }
    return 0;
} 
```

我得到 (standard_in) 1: 运行时的语法错误消息。我也尝试使用读/写，但结果是一样的。

我究竟做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-05T12:33:25.720

`bc`您必须以换行符结束输入。采用

```
printf("3+3\n"); 
```

它会神奇地起作用！顺便说一句，您可以验证这是问题所在

```
$ printf '3+3' | bc
bc: stdin:1: syntax error: unexpected EOF
$ printf '3+3\n' | bc
6 
```

# php - PHP 运行时或逻辑异常？

> ID：14171714
> 
> 赞同：4
> 
> 时间：2013-01-05T12:21:08.843
> 
> 标签：php, exception, runtime, logic

在 PHP 中，如果一个值被认为是“未知的”（本身不是无效的），这是否应该引发逻辑或运行时异常？

```
<?php
function foo($bar) {
    // logic
    if(!is_string($bar)) {
        throw new \InvalidArgumentException('invalid *argument*');
    }
    if(strlen($bar) < 4) {
        throw new \DomainException('invalid *bar*');
    }
    static $knownBars = array('bar1', 'bar2');
    if(!in_array($knownBars)) {
        throw new \DomainException('unknown *bar*');
        //throw new \UnexpectedValueException('unknown *bar*');
    }

    // runtime
    $bar;
} 
```

前两个例外是显而易见的，但最后一个对我来说仍然有点不清楚。两者似乎都有道理；逻辑/域错误，因为我们期望定义的数据集之一，运行时/意外值错误，因为我们实际上得到了意外值。

我应该扔哪一个？

另外，如果逻辑部分是单个 setter 方法，而我们想用数据库查找替换静态数组（数据集）怎么办……由于数据库故障等原因，可以预期逻辑代码中出现运行时异常吗？或者我们应该将数据库查找移动到运行时代码，如果“bar”被认为是未知的，仍然会抛出逻辑异常？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-05T12:38:29.710

逻辑异常适用于编译时发生的错误。由于 PHP 在这个意义上没有编译时间，它通常被解释为“在开发过程中发生的错误”，（比如当开发人员忘记传递依赖或其他东西时），而运行时异常是针对不可预见的错误（通常源于用户输入）当代码运行时。

但坦率地说，整个 Spl Exception 层次结构是 Fubar。因此，只需使用您想要的或创建您自己的。

另请参阅[https://wiki.php.net/rfc/spl-improvements/exceptions](https://wiki.php.net/rfc/spl-improvements/exceptions)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T13:28:04.003

我将使用这个**域**，因为数据集是静态的（因此签入`setFoo()`）......`unexpectedvalue`如果数据集是动态的（因此签入），我会选择`doSomethingWithFoo()`。

# c++ - 与 shell 脚本不同，批处理文件是不可执行的吗？

> ID：14171715
> 
> 赞同：3
> 
> 时间：2013-01-05T12:21:09.117
> 
> 标签：c++, windows, boost, process, win32-process

我正在使用`boost.process`一些给定的输入来运行外部进程。用户可以指定该外部进程。所以大多数时候用户指定一个shell脚本或批处理脚本。

我只是在做`boost::process::launch(_script, arguments, context);`，只要它们可以按预期执行（+x），它既可以用于真正的可执行文件，也可以用于 shell 脚本。但是当我在 Windows 中运行它时。它不起作用如果我传入一个批处理文件，`_script`但是如果我指定一个真正的可执行文件，它就会起作用。

这让我觉得在 Windows 中批处理脚本根本不是可执行文件？它们只是通过 cmd.exe 解释的！这是真的 ？

我可以启动`cmd.exe`并指定`/c _script argv`为命令行参数。但这不会是跨平台的。

而且我不想`system()`打电话，因为我无法完全控制创建的进程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T12:26:01.070

没错，批处理文件不能直接执行，需要命令处理器来运行它们。

也就是说，解决可移植性问题应该相当简单，并且可以在编译时（通过预处理器宏）或运行时（Windows 特定的环境变量？脚本文件扩展名？）

我可能会选择前者更健壮。

# python - django virtualenv - 错误：没有名为 south 的模块

> ID：14171719
> 
> 赞同：3
> 
> 时间：2013-01-05T12:21:39.817
> 
> 标签：python, django, virtualenv, django-south

当我尝试这个时，我收到了这个错误：

> 来源 ./env/bin/activate
> 
> sudo python manage.py syncdb
> 
> 错误：没有名为 south 的模块

我在激活虚拟环境后安装了南，使用 pip install south（以及 django）。

在 settings.py 中安装的应用程序：

```
INSTALLED_APPS = (
    'south',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles', 
```

可能是什么问题呢？

更新：尝试在没有 sudo 的情况下同步时出现此错误。也许它与“南方”问题有关：

(env)andrius@ubuntu:~/djcode/myproject$ python manage.py syncdb

```
Syncing...
Traceback (most recent call last):
  File "manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "/home/andrius/env/local/lib/python2.7/site-packages/django/core/management/__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "/home/andrius/env/local/lib/python2.7/site-packages/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/home/andrius/env/local/lib/python2.7/site-packages/django/core/management/base.py", line 196, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/home/andrius/env/local/lib/python2.7/site-packages/django/core/management/base.py", line 232, in execute
    output = self.handle(*args, **options)
  File "/home/andrius/env/local/lib/python2.7/site-packages/django/core/management/base.py", line 371, in handle
    return self.handle_noargs(**options)
  File "/home/andrius/env/local/lib/python2.7/site-packages/south/management/commands/syncdb.py", line 90, in handle_noargs
    syncdb.Command().execute(**options)
  File "/home/andrius/env/local/lib/python2.7/site-packages/django/core/management/base.py", line 232, in execute
    output = self.handle(*args, **options)
  File "/home/andrius/env/local/lib/python2.7/site-packages/django/core/management/base.py", line 371, in handle
    return self.handle_noargs(**options)
  File "/home/andrius/env/local/lib/python2.7/site-packages/django/core/management/commands/syncdb.py", line 57, in handle_noargs
    cursor = connection.cursor()
  File "/home/andrius/env/local/lib/python2.7/site-packages/django/db/backends/__init__.py", line 306, in cursor
    cursor = self.make_debug_cursor(self._cursor())
  File "/home/andrius/env/local/lib/python2.7/site-packages/django/db/backends/postgresql_psycopg2/base.py", line 177, in _cursor
    self.connection = Database.connect(**conn_params)
  File "/home/andrius/env/local/lib/python2.7/site-packages/psycopg2-2.4.6-py2.7-linux-x86_64.egg/psycopg2/__init__.py", line 178, in connect
    return _connect(dsn, connection_factory=connection_factory, async=async)
psycopg2.OperationalError: FATAL:  Peer authentication failed for user "django" 
```

我使用这些命令为数据库创建了数据库和用户：

```
template1=# create database finance;
CREATE DATABASE
template1=# grant all privileges on database finance to django;
ERROR:  role "django" does not exist
template1=# create user django with password 'mydb123';
CREATE ROLE
template1=# grant all privileges on database finance to django;
GRANT
template1=# \q 
```

我在 settings.py 中的数据库设置：

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql_psycopg2', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': 'finance',                      # Or path to database file if using sqlite3.
        'USER': 'django',                      # Not used with sqlite3.
        'PASSWORD': 'mydb123',                  # Not used with sqlite3.
        'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.
        'PORT': '',                      # Set to empty string for default. Not used with sqlite3.
    } 
```

}

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-05T15:25:48.383

安装南或运行同步数据库时不要成为 sudoer。做就是了

```
点安装南
python manage.py syncdb

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-18T10:05:02.340

只需从已安装的应用程序中删除南

Django 1.7 及更高版本不需要 South

要删除 south 使用 pip uninstall south 然后 y 完全删除它

# sql - 通过整数数组中的索引查询表

> ID：14171720
> 
> 赞同：1
> 
> 时间：2013-01-05T12:21:42.273
> 
> 标签：sql, arrays, postgresql

在从 VB.NET 转换数据“to_timestamp”和“to_number”获得出色结果后，我想知道 PostgreSQL 是否有可能通过 .NET 的整数数组查询表索引？

说，我有一个充满`(1, 3, 5, 6, 9)`. PostgreSQL 是否有可能将这些索引中的数据行返回到“odbc.reader”？
这比我现在做的循环和查询 5 次要快得多。

像这样的东西：

```
SELECT myindexes, myname, myadress from mytable WHERE myindexes IS IN ARRAY 
```

如果这是可能的，一个简单的查询应该是什么样子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T14:06:36.070

这是可能的。

### 任何

```
SELECT myindex, myname, myadress
FROM   mytable
WHERE  myindex = ANY ($my_array) 
```

整数数组示例：

```
...
WHERE  myindex = ANY ('{1,3,5,6,9}'::int[]) 
```

[手册中有关的详细信息`ANY`。](http://www.postgresql.org/docs/current/interactive/functions-comparisons.html#AEN18025)

### 在

还有用于相同目的的 SQL[`IN()`表达式。](http://www.postgresql.org/docs/current/interactive/functions-comparisons.html#AEN17987)
PostgreSQl 在其当前实现中`= ANY (array)`在执行之前将其转换为内部，因此可以想象它会慢一些。

* * *

加入*长*列表的示例（根据评论）：

### JOIN 到 VALUES 表达式

```
WITH x(myindex) AS (
    VALUES
    (1),(3),(5),(6),(9)
    )
SELECT myindex, myname, myadress
FROM   mytable
JOIN   x USING (myindex) 
```

我在示例中使用了[CTE](http://www.postgresql.org/docs/current/interactive/queries-with.html)（这是可选的，也可以是子查询）。为此，您需要更高版本的 PostgreSQL 8.4。
[关于`VALUES`.](http://www.postgresql.org/docs/current/interactive/sql-values.html)

### 加入未嵌套的数组

或者你可以[`unnest()`](http://www.postgresql.org/docs/current/interactive/functions-array.html#ARRAY-FUNCTIONS-TABLE)一个数组和`JOIN`它：

```
SELECT myindex, myname, myadress
FROM   mytable
JOIN  (SELECT unnest('{1,3,5,6,9}'::int[]) AS myindex) x USING (myindex) 
```

这些方法中的每一种在性能上都*远远优于*为每个值运行单独的查询。

# php - 使用 PHP 使用 header() 发送标头的问题

> ID：14171722
> 
> 赞同：1
> 
> 时间：2013-01-05T12:21:59.660
> 
> 标签：php, http, http-headers, httpresponse

我正在尝试做一个向网站发送 HTTP 请求并获得 HTTP 回复的小型应用程序。我使用标头上的状态来查看请求发生了什么。代码很简单，很短，但不知何故我仍然得到默认值`HTTP/1.1 200 OK`当一切正常时，我仍然得到默认值而不是我的个性化消息。

注意：请求可以有 2 或 3 个部分。2 部分仅进行身份验证，第三部分表示应该添加一些内容。如果您对代码的任何其他部分有任何评论，我也很高兴看到它们。注意2：令牌是用户名，因为不确定我以后是否真的需要它。

```
<?php
if(isset($_POST['usernameUS'])&&isset($_POST['passwordUS'])&&!empty($_POST['usernameUS'])&&!empty($_POST['passwordUS']))  {
    try {
        $hostname = "";
        $database = "";
        $username = "";
        $password = "";
        $pdo = new PDO("mysql:host=$hostname;dbname=$database", $username, $password);
        $stmt = $pdo->prepare("SELECT salt, password FROM users WHERE account=:account");
        $stmt->bindParam(':account', $_POST['usernameUS'], PDO::PARAM_STR);
        $stmt->execute();
        $row = $stmt->fetch(PDO::FETCH_ASSOC);
        $passwordUS = $pdo->quote($_POST['passwordUS']);
        $Blowfish_Pre = '$2a$05$';
        $Blowfish_End = '$';
        $bcrypt_salt = $Blowfish_Pre . $row['salt'] . $Blowfish_End;
        $hashed_password = crypt($passwordUS, $bcrypt_salt);
        if ($hashed_password == $row['password']) {
            if(isset($_POST['message']))    {
                try {
                    $stmt = $pdo->prepare("INSERT INTO newData (ip , account , token, message) VALUES (:ip, :username, :token, :message)");
                    $stmt->bindParam(':ip', $_POST['usernameUS'], PDO::PARAM_STR);
                    $stmt->bindParam(':username', $_POST['usernameUS'], PDO::PARAM_STR);
                    $stmt->bindParam(':token', $_POST['usernameUS'], PDO::PARAM_STR);
                    $stmt->bindParam(':message', $_POST['message'], PDO::PARAM_STR);
                    $value = $stmt->execute();
                    if($value)  {
                        header("HTTP/1.1 200 Added");
                    }
                    else {
                        header("HTTP/1.1 400 Could not add information");
                    }
                } catch (PDOException $e) {
                    header("HTTP/1.1 400 Cannot insert message", false);
                    file_put_contents('PDOErrors.txt', $e->getMessage(), FILE_APPEND);
                }
            }
                header("HTTP/1.1 200 Authenticated", false);
        } 
        else {
            header("HTTP/1.1 400 Incorrect Login Information", false);
        }
    } catch(PDOException $e) {
        header("HTTP/1.1 400 Could not connect", false);
        file_put_contents('PDOErrors.txt', $e->getMessage(), FILE_APPEND);
    }
}
else {
    header( 'Location: http://www.example.com/' ) ;
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T17:23:26.547

找到了答案，但没有找到解释。使用 200 代码，将始终设置为“Ok”，所以如果我将其更改为 400，那么我可以设置自己的回复。

不确定回答我自己的问题是否意味着我要求快速，或者我至少一直在寻找解决方案：S

# javascript - 在 Mongoose Schema 中的另一个数组中写入一个数组

> ID：14171723
> 
> 赞同：1
> 
> 时间：2013-01-05T12:22:00.433
> 
> 标签：javascript, node.js, mongoose

这是猫鼬模式：

```
var userschema = new mongoose.Schema({

   user: String,
   imagen: [{ 

              tags: [String],

           }]

}); 
```

我得到了这个标签：

```
var bodytags = req.body.tags;
var tags = tbags.split(" "); 
```

我从 req.body 获取标签，并将它们全部放在一个数组中。但是问题来了：

```
var img = usermodel.findOne({ user: req.session.user }, function(err, user){

  var img = user.imagen.push({

     tags: undefined

  });
}); 
```

img.tags.push(标签);

当，我收到一个错误 sais `TypeError: Cannot call method 'push' of undefined`。如何将我的标签数组推送到我的架构的标签数组中？

谢谢提前！

编辑：

这将是我想要的结果：

```
 {

     user: randomuser,
     imagen: [{
                tags: ["one", "two", "three"
              }] 

 } 
```

并且，例如，如果有两个 imagen 对象：

```
 {

     user: randomuser,
     imagen: [{
                tags: ["one", "two", "three"]
              },
              {

                tags: ["four", "five", "six"]

              }] 

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T15:31:29.510

似乎错误可能是由于变量分配不一致。所以已经创建了一个独立的例子来测试并且它可以工作

```
 var mongoose = require('mongoose');
 mongoose.connect('mongodb://localhost/images');

 var UserSchema = new mongoose.Schema({
    user: String,
    imagen: [ {
             tags: [String]
          } ]
 });

 var User  = mongoose.model('User', UserSchema);

 var newUser = new User({ user: 'Almypal'});

 var bodytags = 'Home basic tutor';
 var tagarray = bodytags.split(" ");

 newUser.save(function(err, result){
   if(err)
   {
       console.log(JSON.stringify(err));
   }
   else
       {
           result.imagen.push({ tags: tagarray });
           result.save( function(error, data){
             if(error){
               console.log(JSON.stringify(error));
             }
             else{
               console.log(JSON.stringify(data));
             }
       });
    }
}); 
```

MongoDB 现在有以下文档

```
 { "_id" : ObjectId("50e84425862a2af616000001"), "imagen" : [ { "tags" : [ "Home", "basic", "tutor" ] } ], "user" : "Almypal" } 
```

希望这可以帮助。

# ios - UITextView 未显示在屏幕上

> ID：14171725
> 
> 赞同：0
> 
> 时间：2013-01-05T12:22:27.140
> 
> 标签：ios, uiview, uitextview

在我的应用程序中，我拥有一个调用多个视图的视图控制器。所有这些视图都是 UIView。这工作正常，但并非在所有情况下。被调用的视图之一有一些标签、文本字段和两个 UITextView。一切都正确显示，但 UITextViews。视图以这种方式调用：

```
[[self view] addSubview:tasteView];
//tasteView = [[TasteView alloc] init];
[self setCurrentView:tasteView]; 
```

我调用视图的 init 方法来显示 UITextViews：

编辑：菲利普米尔斯发表评论后，这略有改变！不再调用初始化。

```
- (id)init
{
   if (self)
    {
        [tv1 setNeedsDisplay];
        CGRect frame = tv1.frame;
        frame.size.height += 1;
        tv1.frame = frame;
    }
    return self;
} 
```

当我看到 setNeedsDisplay 没有效果时，我更改了相应帧的大小以强制重绘。不幸的是，这也没有效果。顺便说一句，视图最初是在视图控制器的 viewDidLoad 中加载的：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [self setCurrentView:placeholder];
    [self configureView];

    wineryView = [self loadWineryView];
    wineView = [self loadWineView];
    tasteView = [self loadTasteView];
} 
```

加载视图的方法如下所示：

```
- (UIView *) loadTasteView
{
    NSArray *nibViews = [[NSBundle mainBundle] loadNibNamed:@"TasteView" owner:self options:nil];
    UIView *tView;
    for (id view in nibViews)
    {
        if ([view isKindOfClass:[TasteView class]])
        {
            tView = (TasteView*) view;
        }
    }
   return tView;
} 
```

我不知道为什么没有显示那些 UITextViews。我是不是忘记了什么？为了真正展示所有内容，以下是我在 InterfaceBuilder 中建立的连接： ![在此处输入图像描述](../Images/ab0c600232b07c8644b7cd7de3684c36.png)

![在此处输入图像描述](../Images/ada3283872bf69c004b655417bc581e0.png)

有谁知道我做错了什么并且可以帮助我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T12:37:02.207

如果您在代码中创建视图（您的第一个示例），`alloc`以及在尝试将其添加为子`init`视图**之前的视图。**

如果您从另一个 nib（最后一个代码部分）加载它，您仍然需要将它添加到视图层次结构中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T12:42:46.750

我认为您的初始代码应该是这样的：

```
tasteView = [[TasteView alloc] init];
[[self view] addSubview:tasteView];
[self setCurrentView:tasteView]; 
```

`addSubView`分配后

希望对你有帮助

# jquery - jQuery中的切换功能设计

> ID：14171726
> 
> 赞同：0
> 
> 时间：2013-01-05T12:22:44.570
> 
> 标签：jquery, cross-browser

在这个**[小提琴](http://jsbin.com/utoyej/18/edit)**`#chatList`中，每当用户单击`#showUserList`应用程序左侧的 div（应用程序左上角的一个小 div）时，我都会尝试显示 ul ，该应用程序的高度与聊天应用程序的高度相同。当用户`#showUserList`再次点击时，我试图隐藏它。我认为这发生在聊天应用程序的后面，而不是它的左侧。

并且每当用户点击其中的任何一个时`li`，`#chatList`我都想**隐藏** `#chatList`。我不知道该怎么做，因为要隐藏它，它需要切换函数调用（我想是的）

而且有时下面的代码会在很长一段时间后执行。我不想发生这种情况。

这是我尝试过的：

```
var sameWidth = $('#chat-outline').width();
var sameHeight = $('#chat-outline').height();

$('#showUserList').click(function() {
   $('#chatList').toggle('slow', function() {
     $("#chatList").animate({
        position: "absolute",
        width: sameWidth,
        left: sameWidth,
        height:'100%',
        fontSize: "1em"
     }, 1000 );
  });
}); 
```

**编辑**：我在这里尝试，我得到了一些接近预期的结果

请检查此链接[http://jsbin.com/utoyej/34/](http://jsbin.com/utoyej/34/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T12:44:22.040

你的意思是这样的吗？

**代码**

```
$(document).ready(function(){

  $("h1").on('click',function(){
    $("div#content").slideToggle();
  });

}); 
```

[JSFiddle](http://jsfiddle.net/mAMjT/)

# java - 替换字符串后如何使文本文件内容保持相同的格式

> ID：14171732
> 
> 赞同：1
> 
> 时间：2013-01-05T12:23:29.047
> 
> 标签：java, eclipse, file

我有一个包含内容的文本文件：

```
love 
test
me
once 
```

我的 Java 程序将“love”一词替换为“liverpool”。但是文本文件失去了格式，变成了这样：

```
Liverpool  test me once 
```

所有字符串都出现在一行上。

这是我到目前为止所拥有的：

```
import java.io.*;
public class Replace_Line {
public static void main(String args[]) {
    try {
        File file = new File("C:\\Users\\Antish\\Desktop\\Test_File.txt");
        BufferedReader reader = new BufferedReader(new FileReader(file));
        String line = "", oldtext = "";
        while ((line = reader.readLine()) != null) {
            oldtext += line + " ";
        }
        reader.close();
        // replace a word in a file
        // String newtext = oldtext.replaceAll("boy", "Love");

        // To replace a line in a file
        String newtext = oldtext.replaceAll("love", "Liverpool");

        FileWriter writer = new FileWriter(
                "C:\\Users\\Antish\\Desktop\\Test_File.txt");
        writer.write(newtext);
        writer.close();
    } catch (IOException ioe) {
        ioe.printStackTrace();
    }
}
} 
```

任何有助于保持文件格式相同并仅替换字符串的帮助。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T12:28:31.480

像这样阅读时会丢失换行符：

```
while((line = reader.readLine()) != null) {
    oldtext += line + " ";
} 
```

要修复它，您应该将循环内的代码替换为

```
oldtext += line + "\n"; 
```

但请注意，逐行读取文件并将每一行连接起来`+=`是非常低效的。在学习 Java 时可以这样做，但在任何生产代码中都不能这样做。使用一个`StringBuilder`或一些外部库来处理 IO。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T12:28:38.420

当您按行阅读时，您将删除所有换行符，然后用空格替换它们。

```
oldtext += line + " "; 
```

需要是

```
oldtext += line + System.lineSeparator(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T12:30:11.220

代替

```
oldtext += line + " "; 
```

经过

```
oldtext += line + "\n"; 
```

请注意，这会将换行符（可能是 \r 或 \r\n）转换为 \n。另请注意，在循环中使用 + 运算符进行连接非常低效，因为它会产生大量大型一次性 STring 实例。你最好使用 StringBuilder 或 StringWriter。

为什么不简单地将整个文件读取为单个字符串，然后调用 replaceAll 并重写所有内容。见[Guava 的方法](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/io/CharStreams.html#toString%28java.lang.Readable%29)或[commons-io 方法](http://commons.apache.org/io/apidocs/org/apache/commons/io/FileUtils.html#readFileToString%28java.io.File,%20java.nio.charset.Charset%29)

# ios - 带有 iOS 工具链的 CMake：找不到线程

> ID：14171740
> 
> 赞同：7
> 
> 时间：2013-01-05T12:24:14.193
> 
> 标签：ios, cmake

我正在尝试使用[ios-cmake](http://code.google.com/p/ios-cmake/)生成针对 iOS 的 Xcode 项目。但是，它找不到线程。这是一个用于演示的简单 CMake 脚本：

```
CMAKE_MINIMUM_REQUIRED (VERSION 2.8)
PROJECT (MyCITest)

SET (CMAKE_MODULE_PATH "${CMAKE_SOURCE_DIR}/cmake/modules")

########################
# EDIT: I've also tried adding the lines below prior to posting this question, 
# but there doesn't seem to be any effect.
# (http://stackoverflow.com/questions/8386897)

SET (CMAKE_REQUIRED_INCLUDES ${CMAKE_IOS_SDK_ROOT}/usr ${CMAKE_IOS_SDK_ROOT}/usr/include)
SET (CMAKE_CXX_FLAGS "--sysroot=${CMAKE_IOS_SDK_ROOT} ${CMAKE_CXX_FLAGS}")
SET (CMAKE_C_FLAGS "--sysroot=${CMAKE_IOS_SDK_ROOT} ${CMAKE_C_FLAGS}")

########################

FIND_PACKAGE (ZLIB REQUIRED)
FIND_PACKAGE (LibXml2 REQUIRED)
FIND_PACKAGE (Threads REQUIRED) 
```

从终端运行 CMake：

```
cmake .. -DCMAKE_TOOLCHAIN_FILE=../cmake/toolchains/iOS.cmake -GXcode 
```

这是我得到的输出：

```
-- Toolchain using default iOS SDK: /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk
-- Found ZLIB: /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk/usr/lib/libz.dylib (found version "1.2.5") 
-- Found LibXml2: /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk/usr/lib/libxml2.dylib (found version "2.7.8") 
-- Looking for include file pthread.h
-- Looking for include file pthread.h - not found
CMake Error at cmake/modules/FindPackageHandleStandardArgs.cmake:97 (MESSAGE):
  Could NOT find Threads (missing: Threads_FOUND)
Call Stack (most recent call first):
  cmake/modules/FindPackageHandleStandardArgs.cmake:288 (_FPHSA_FAILURE_MESSAGE)
  cmake/modules/FindThreads.cmake:166 (FIND_PACKAGE_HANDLE_STANDARD_ARGS)
  CMakeLists.txt:8 (FIND_PACKAGE)

-- Configuring incomplete, errors occurred! 
```

我已经三重检查了 pthread.h 位于 中`/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk/usr/include`，此外，它位于 ZLib 和 LibXML2 没有问题，所以我不确定我做错了什么。

```
> cmake --version
cmake version 2.8.10.2 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-09-24T22:21:08.173

这些解决方案似乎都不起作用。我发现唯一对我有用的是设置 FindThreads.cmake 设置的变量。换句话说，在您的工具链文件中定义以下内容：

```
set(CMAKE_THREAD_LIBS_INIT "-lpthread")
set(CMAKE_HAVE_THREADS_LIBRARY 1)
set(CMAKE_USE_WIN32_THREADS_INIT 0)
set(CMAKE_USE_PTHREADS_INIT 1) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-12-04T17:00:04.727

问题确实是由于调用`try_compile`FindThreads.cmake 失败所致。但对我来说设置`CMAKE_CXX_COMPILER_WORKS`是不够的。相反，我将执行的测试类型`try_compile`从尝试构建可执行文件更改为尝试构建静态库，方法是将其放入工具链文件中：

```
set(CMAKE_TRY_COMPILE_TARGET_TYPE STATIC_LIBRARY) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T14:56:59.640

事实证明，iOS 工具链目前不支持`TRY_COMPILE`，由 使用`CheckIncludeFiles.cmake`，而后者又由`FindThreads.cmake`. 工具链当前设置为跳过`TRY_COMPILE`使用：

```
set (CMAKE_CXX_COMPILER_WORKS TRUE)
set (CMAKE_C_COMPILER_WORKS TRUE) 
```

参考：[http ://code.google.com/p/ios-cmake/issues/detail?id=1&can=1](http://code.google.com/p/ios-cmake/issues/detail?id=1&can=1)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-24T07:18:41.153

您可以使用工具链中的下一个变量来修复`try_compile`命令：

```
# toolchain.cmake    
set(CMAKE_MACOSX_BUNDLE YES)
set(CMAKE_OSX_SYSROOT "iphoneos")
set(CMAKE_XCODE_ATTRIBUTE_CODE_SIGN_IDENTITY "iPhone Developer")
set(MACOSX_BUNDLE_GUI_IDENTIFIER "com.example") 
```

和简约的例子：

```
# CMakeLists.txt
cmake_minimum_required(VERSION 2.8)
project(Foo)

find_package(Threads REQUIRED)
add_executable(foo foo.cpp) 
```

生成输出：

```
> cmake -H. -B_builds -DCMAKE_TOOLCHAIN_FILE=toolchain.cmake -GXcode
...    
-- Looking for include file pthread.h
-- Looking for include file pthread.h - found
-- Looking for pthread_create
-- Looking for pthread_create - found
-- Found Threads: TRUE
... 
```

*   [完整的解决方案](https://github.com/ruslo/polly/wiki/Toolchain-list#ios)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-08-29T13:38:21.017

# [2019 年 9 月] 修复 XCode 11 和 iOS 13

正如[这里](https://gitlab.kitware.com/cmake/cmake/issues/18993#note_631388)所解释的。

需要使用`XCODE_ATTRIBUTE_CODE_SIGNING_ALLOWED`而不是`CMAKE_XCODE_ATTRIBUTE_CODE_SIGNING_REQUIRED`下面来完成这项工作：

```
set(CMAKE_TRY_COMPILE_PLATFORM_VARIABLES "XCODE_ATTRIBUTE_CODE_SIGNING_ALLOWED")
set(XCODE_ATTRIBUTE_CODE_SIGNING_ALLOWED "NO")

find_package(Threads REQUIRED)

unset(CMAKE_TRY_COMPILE_PLATFORM_VARIABLES)
unset(XCODE_ATTRIBUTE_CODE_SIGNING_ALLOWED) 
```

# [2019 年 8 月]：来自 CMake 问题跟踪器的信息

该问题已在[此处](https://gitlab.kitware.com/cmake/cmake/issues/18993)讨论并由@alcroito 解释。它不使用自定义 ios-cmake 工具链，而是使用新的[原生 iOS 工具链](https://cmake.org/cmake/help/v3.14/manual/cmake-toolchains.7.html#cross-compiling-for-ios-tvos-or-watchos)（CMake 3.14+），但问题是一样的。

### 问题的来源

使用 Xcode 生成器时，它会默认尝试对应用程序进行签名。查找时`Threads`，CMake 调用`FindThreads.cmake`将调用`TRY_COMPILE`Xcode 将尝试签名并失败的测试。

### 适当的解决方案：

禁用`try_compile`内部签名`FindThreads`（见[此处](https://gitlab.kitware.com/cmake/cmake/issues/18993#note_618294)）：

```
set(CMAKE_TRY_COMPILE_PLATFORM_VARIABLES "CMAKE_XCODE_ATTRIBUTE_CODE_SIGNING_REQUIRED")
set(CMAKE_XCODE_ATTRIBUTE_CODE_SIGNING_REQUIRED "NO")

find_package(Threads REQUIRED)

unset(CMAKE_TRY_COMPILE_PLATFORM_VARIABLES)
unset(CMAKE_XCODE_ATTRIBUTE_CODE_SIGNING_REQUIRED) 
```

### 此线程中的其他解决方案

1.  制作该`try_compile`静态的二进制文件，它不会被签名（见[这里](https://stackoverflow.com/a/53618014/3783833)）。这不是很好，因为它应该是可执行文件而不是静态库。

2.  传递适当的信息以便能够签署`try_compile`可执行文件（参见[此处](https://stackoverflow.com/a/24380608/3783833)）。这实际上对我不起作用。

3.  跳过`try_compile`（见[此处](https://stackoverflow.com/a/14198386/3783833)）：不太安全，因为您将跳过所有编译器测试。那对我也不起作用。

4.  `Threads`通过覆盖做什么来硬编码`FindThreads`（见[这里](https://stackoverflow.com/a/32771883/3783833)）：相当肮脏的解决方法。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-12-10T06:48:34.970

顺便提一下，我在项目中也遇到了同样的问题。我注释掉了这一`find_package(Threads REQUIRED)`行并生成了 Xcode proejct。编译的代码没有错误。也许 Xcode 可以自动与 posix 线程库链接。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2016-03-10T06:09:16.993

对我来说，解决方案是结合我面前的 2 个答案。注释掉禁用的 2 行`try_compile`

```
# Skip the platform compiler checks for cross compiling
set (CMAKE_CXX_COMPILER_WORKS TRUE)
set (CMAKE_C_COMPILER_WORKS TRUE) 
```

然后将其添加到 IOS.cmake 工具链文件的顶部。

```
set(MACOSX_BUNDLE_GUI_IDENTIFIER com.example)
set(CMAKE_MACOSX_BUNDLE YES)
set(CMAKE_XCODE_ATTRIBUTE_CODE_SIGN_IDENTITY "iPhone Developer") 
```

# c# - Fluent NHibernate 自动将 2 个类映射到一个实体

> ID：14171742
> 
> 赞同：0
> 
> 时间：2013-01-05T12:24:18.423
> 
> 标签：c#, nhibernate, orm

如何将两个类自动映射到一个数据库实体？

```
public abstract class Root
{
        public virtual int Id { get; set; }
        public virtual string Item { get; set;}
}

public class First
{
        public override string ToString()
        {
                return "First " + Id;
        }
}

public class Second
{
        public override string ToString()
        {
                return "Second " + Id;
        }
} 
```

此代码生成 2 个实体到数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T14:31:21.427

[Fluent NHibernate 文档](https://github.com/jagregory/fluent-nhibernate/wiki/Automapping-inheritance)很好地解释了这一点。第一步是让您的扩展类从基类继承：

```
public class First : Root 
```

由于您的基类是抽象的，因此您指示 FNH 不要将其映射为具体类：

```
AutoMap.AssemblyOf<Entity>(cfg).IgnoreBase<Entity>(); 
```

FNH 默认使用 table-per-subclass 映射策略。如果您想使用按层次结构表映射（我推荐），请覆盖 IsDiscriminated 方法：

```
public override bool IsDiscriminated(Type type)
{
   return true;
} 
```

# android - 动态更改微调器字符串数组资源

> ID：14171748
> 
> 赞同：0
> 
> 时间：2013-01-05T12:24:51.417
> 
> 标签：android, arrays, string, spinner

我在使用微调器和字符串数组时遇到问题。我想根据条件更改微调器项目（我的术语中的模式）

以下是我所做的代码：

```
public class MainActivity extends Activity {

    .
    .
    .

    ArrayAdapter<CharSequence> aaParam1;
    ArrayAdapter<CharSequence> aaParam2;
    ArrayAdapter<CharSequence> aaParam3;   
    .
    .
    .

    @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    .
            .
            .

    ReSpin(1);
            .
            .
            .
    }

    public void ReSpin(int mode){
            int stepval = Integer.parseInt(setting.getString("steps", "1")); 

            switch(mode){
            case 1:
                aaParam1 = ArrayAdapter.createFromResource(this, R.array.mode1param1, android.R.layout.simple_spinner_dropdown_item);
                aaParam2 = ArrayAdapter.createFromResource(this, R.array.mode1param2, android.R.layout.simple_spinner_dropdown_item);
                aaParam3 = ArrayAdapter.createFromResource(this, R.array.mode1param3, android.R.layout.simple_spinner_dropdown_item);
                break;
            case 2:
                aaParam1 = ArrayAdapter.createFromResource(this, R.array.mode2param1, android.R.layout.simple_spinner_dropdown_item);
                aaParam2 = ArrayAdapter.createFromResource(this, R.array.mode2param2, android.R.layout.simple_spinner_dropdown_item);
                aaParam3 = ArrayAdapter.createFromResource(this, R.array.mode2param3, android.R.layout.simple_spinner_dropdown_item);
                break;
            case 3:
                aaParam1 = ArrayAdapter.createFromResource(this, R.array.mode3param1, android.R.layout.simple_spinner_dropdown_item);
                aaParam2 = ArrayAdapter.createFromResource(this, R.array.mode3param2, android.R.layout.simple_spinner_dropdown_item);
                aaParam3 = ArrayAdapter.createFromResource(this, R.array.mode3param3, android.R.layout.simple_spinner_dropdown_item);
                break;
            }

            aaParam1.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
            aaParam2.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
            aaParam3.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

            spinParam1.setAdapter(aaParam1);
            spinParam2.setAdapter(aaParam2);
            spinParam3.setAdapter(aaParam3);

    }

} 
```

当从 OnCreate() 调用 ReSpin() 函数时，上述代码总是崩溃/退出

日志：

```
01-05 17:02:04.151: W/dalvikvm(22040): threadid=1: thread exiting with uncaught exception (group=0x41cc0930)
01-05 17:02:04.183: E/AndroidRuntime(22040): FATAL EXCEPTION: main
01-05 17:02:04.183: E/AndroidRuntime(22040): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.micom.testspin/com.micom.testspin.MainActivity}: java.lang.NullPointerException
01-05 17:02:04.183: E/AndroidRuntime(22040):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
01-05 17:02:04.183: E/AndroidRuntime(22040):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
01-05 17:02:04.183: E/AndroidRuntime(22040):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
01-05 17:02:04.183: E/AndroidRuntime(22040):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
01-05 17:02:04.183: E/AndroidRuntime(22040):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-05 17:02:04.183: E/AndroidRuntime(22040):    at android.os.Looper.loop(Looper.java:137)
01-05 17:02:04.183: E/AndroidRuntime(22040):    at android.app.ActivityThread.main(ActivityThread.java:5039)
01-05 17:02:04.183: E/AndroidRuntime(22040):    at java.lang.reflect.Method.invokeNative(Native Method)
01-05 17:02:04.183: E/AndroidRuntime(22040):    at java.lang.reflect.Method.invoke(Method.java:511)
01-05 17:02:04.183: E/AndroidRuntime(22040):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-05 17:02:04.183: E/AndroidRuntime(22040):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-05 17:02:04.183: E/AndroidRuntime(22040):    at dalvik.system.NativeStart.main(Native Method)
01-05 17:02:04.183: E/AndroidRuntime(22040): Caused by: java.lang.NullPointerException
01-05 17:02:04.183: E/AndroidRuntime(22040):    at com.micom.testspin.MainActivity.ReSpin(MainActivity.java:273)
01-05 17:02:04.183: E/AndroidRuntime(22040):    at com.micom.testspin.MainActivity.onCreate(MainActivity.java:67)
01-05 17:02:04.183: E/AndroidRuntime(22040):    at android.app.Activity.performCreate(Activity.java:5104)
01-05 17:02:04.183: E/AndroidRuntime(22040):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
01-05 17:02:04.183: E/AndroidRuntime(22040):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
01-05 17:02:04.183: E/AndroidRuntime(22040):    ... 11 more
01-05 17:02:04.206: W/ActivityManager(390):   Force finishing activity com.micom.testspin/.MainActivity 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T03:53:43.873

根据堆栈跟踪，您在 MainActivity.java 的第 273 行有一个空指针异常。看看那里，看看哪个变量可能没有被初始化。

# solr - org.springframework.data.solr.UncategorizedSolrException：无法转换为 org.apache.solr.common.SolrInputDocument 类型

> ID：14171751
> 
> 赞同：0
> 
> 时间：2013-01-05T12:24:59.250
> 
> 标签：solr, spring-data-jpa

我使用[spring-data-solr](https://github.com/SpringSource/spring-data-solr.git)将 spring-data-jpa 与 solr 集成，但是当我使用 SolrOperations 来 saveBean(org.domain.Article) 时，会抛出异常：

org.springframework.data.solr.UncategorizedSolrException：无法从类型 org.kb.domain.Article 转换为类型 org.apache.solr.common.SolrInputDocument 值'Article [id = 1，title = test-1，description = test-1，内容=test-1，作者=test-1，链接=test-1，附件=test-1，日期=2013 年 1 月 5 日星期六 20:06:12 CST，类别=org.kb.domain.Category @67e6cf07]'; 嵌套异常是 org.apache.solr.client.solrj.beans.BindingException: Invalid setter 方法。必须只有一个参数；嵌套异常是 org.springframework.core.convert.ConversionFailedException: 无法从类型 org.kb.domain.Article 转换为类型 org.apache.solr.common.SolrInputDocument 值'Article [id=1,title=test-1 , description=test-1, content=test-1, author=test-1, link=test-1, attachment=test-1, date=Sat Jan 05 20:06:12 CST 2013, category=org.kb。domain.Category@67e6cf07]'; 嵌套异常是 org.apache.solr.client.solrj.beans.BindingException: Invalid setter 方法。必须只有一个参数

这是我的豆：

```
import java.util.Date;
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.JoinColumn;
import javax.persistence.ManyToOne;
import javax.persistence.Table;
import org.apache.solr.client.solrj.beans.Field;
import com.fasterxml.jackson.annotation.JsonFormat;
@Entity
@Table(name="article")
public class Article extends IdEntity{

private static final long serialVersionUID = -5170398606065544445L;

private String title;

private String description;

private String content;

private String author;

private String link;

private String attachment;

private Date date;

private Category category;

public Article() {
    super();
}

@ManyToOne
@JoinColumn(name="category_id")
public Category getCategory() {
    return category;
}
public void setCategory(Category category) {
    this.category = category;
}

@Column(name="title")
@Field("title")
public String getTitle() {
    return title;
}

public void setTitle(String title) {
    this.title = title;
}

@Column(name="description")
@Field("description")
public String getDescription() {
    return description;
}
public void setDescription(String description) {
    this.description = description;
}

@Column(name="content")
@Field("content")
public String getContent() {
    return content;
}
public void setContent(String content) {
    this.content = content;
}

@Column(name="author")
@Field("author")
public String getAuthor() {
    return author;
}
public void setAuthor(String author) {
    this.author = author;
}

@Column(name="link")
@Field("link")
public String getLink() {
    return link;
}
public void setLink(String link) {
    this.link = link;
}

@Column(name="attachment")
@Field("attachment")
public String getAttachment() {
    return attachment;
}

public void setAttachment(String attachment) {
    this.attachment = attachment;
}

@Column(name="date")
@JsonFormat(pattern="yyyy-MM-dd", timezone="GMT+08:00")
public Date getDate() {
    return date;
}
public void setDate(Date date) {
    this.date = date;
}

@Override
public String toString() {
    return "Article [id=" + id + ",title=" + title + ", description=" +     description
            + ", content=" + content + ", author=" + author + ", link="
            + link + ", attachment=" + attachment + ", date=" + date
            + ", category=" + category + "]";
} 
```

}

```
import java.io.Serializable;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.MappedSuperclass;
import org.apache.solr.client.solrj.beans.Field;

@MappedSuperclass
public abstract class IdEntity implements Serializable{

/**
 * 
 */
private static final long serialVersionUID = -5676694680777491651L;
protected Long id;

@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
@Field("id")
public Long getId() {
    return id;
}

public void setId(Long id) {
    this.id = id;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T10:17:38.803

问题出在您的 solrj Field 注释中。看看[文档](https://wiki.apache.org/solr/Solrj#Directly_adding_POJOs_to_Solr)：

> @Field 注解可以应用于字段或 setter 方法。

您应该将 Field 注释移动到 setId setter 方法或 id 字段本身。您甚至可以删除 id 限定符，因为字段名称已经是 id，这就足够了：

```
@Field
protected Long id;

@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
public Long getId() {
    return id;
}

public void setId(Long id) {
    this.id = id;
} 
```

# javascript - window.URL 未定义

> ID：14171752
> 
> 赞同：0
> 
> 时间：2013-01-05T12:25:00.157
> 
> 标签：javascript, html, asynchronous, fileapi

我有一个填充有 blob 的数组（它工作正常），我想在得到 blob 后立即将*blob*转换为*图像*。

```
(function(index) {

    images[index] = new Image();

    xhr.onload = function() {

        blobs[index] = new Blob([this.response], {type: 'image/png'});

        console.log(index + " loaded.");
        console.log(blobs[index]); // It works as expected.

        (function(b) {

            var img = window.URL.createObjectURL(b); // window.URL is undefined.
            console.log(img); // Failed.

        })(blobs[index]);

    };

})(i); 
```

匿名函数不会在 之后立即调用`console.log`，它会引发错误：

> 类型错误：window.URL 未定义

我正在使用 Firefox 17，它已经具有**window.URL**功能，所以这不是问题。实际上，我可以在这个函数之外使用 window.URL。

**编辑：**我有一个名为 URL 的全局范围变量，没有值，所以 window.URL 引用了它。（由于我的声誉低，无法自我回答）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T22:34:49.707

我有一个名为 URL 的全局范围变量，没有值，所以 window.URL 引用了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T12:33:28.087

我想您应该检查参数的值`b`以确保它确实具有价值。在我看来，它没有，因此将导致`window.URL`在施工期间未定义。

听起来您对此并不陌生，所以我不会坐在这里告诉您如何调试它，但我认为这是最好的查看位置，从我在这里看到的内容来看，您的代码看起来符合预期。

**注意：** Mark Dee 所说的也是一个非常有效的选项，您应该确保文档已准备好，然后尝试您的功能，看看是否有帮助。

jQuery

```
$(document).ready(function() {
   //CODE HERE
}); 
```

旧 JavaScript

```
window.onload = function ()
{
    //CODE HERE
} 
```

# android - 自定义滚动条 Android

> ID：14171755
> 
> 赞同：23
> 
> 时间：2013-01-05T12:25:27.517
> 
> 标签：android, scrollbar

我如何制作这个滚动条：

![](../Images/9ad0fd2f6fba0118781f679aeed2990c.png)

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-23T19:20:18.953

要更改拇指图像，您只需创建以下样式并将其应用于您的 ScrollView：

```
<style name="your_style_name">  
    <item name="android:scrollbarAlwaysDrawVerticalTrack">true</item>
    <item name="android:scrollbarStyle">outsideOverlay</item>
    <item name="android:scrollbars">vertical</item>
    <item name="android:fadeScrollbars">false</item>
    <item name="android:scrollbarThumbVertical">@drawable/scroller_thumb</item>
</style> 
```

其中 scroller_thumb 是滚动拇指的自定义图像。

还要注意以下属性：

1.  "android:fadeScrollbars" 设置为 false 以使拇指图像永久保留。
2.  “android:scrollbarStyle”设置为 outsideOverlay 以使拇指图像绘制在“视图边缘并覆盖”，如下所述：[android:scrollbarStyle](http://developer.android.com/reference/android/view/View.html#attr_android%3ascrollbarStyle)

现在，为了将您想要的细线放在滚动条下，只需将包含线条图像的图像视图添加到 ScrollView 的直接子级（RelativeLayout 子级作为 ScrollView 的直接子级将允许您将图像定位在视图的右侧 - 所以这是我的选择）。

就是这样。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-12-04T20:24:58.250

设置 android:scrollbarThumbVertical 不是最好的解决方案，它会根据列表大小拉伸拇指图像...

你最好使用 android:fastScrollThumbDrawable

这是一个例子：

```
<ListView
    android:id="@+id/list"
    android:layout_width="match_parent"
    android:layout_height="fill_parent"
    android:fadeScrollbars="false"
    android:scrollbarAlwaysDrawVerticalTrack="true"
    android:scrollbarSize="0dip"
    android:scrollbarStyle="outsideInset"
    android:fastScrollAlwaysVisible="true"
    android:fastScrollEnabled="false"
    android:scrollbars="vertical" /> 
```

然后在您添加的 styles.xml AppTheme

```
<style name="AppTheme" parent="AppBaseTheme">
    <item name="android:fastScrollThumbDrawable">@drawable/scroller_style</item>
</style> 
```

并在 res/drawable 文件夹上创建文件：scroller_style.xml 和内容

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:drawable="@drawable/scroller_active" android:state_pressed="true"/>
    <item android:drawable="@drawable/scroller"/>

</selector> 
```

其中 scroller 是您的拇指图像，而 scroller_active 是您的活动拇指图像（可选）

# java - Java 编译器挂起

> ID：14171765
> 
> 赞同：0
> 
> 时间：2013-01-05T12:26:28.183
> 
> 标签：java, ant, compilation, javac, freeze

这个问题与[我之前的问题有关](https://stackoverflow.com/questions/14115597/use-of-java-generics-could-be-hanging-the-compiler)；我特地在这里寻求帮助，了解如何获得更多输出，而不是扩展之前的问题。我正在尝试在配置为通常在 Win XP 中启动的笔记本电脑的 NTFS 文件系统上从 Ubuntu 10.4 安装中编译我的 Java 项目。

我的Java版本是：

```
OpenJDK Runtime Environment (IcedTea6 1.11.5) (6b24-1.11.5-0ubuntu1~10.04.2)
OpenJDK Client VM (build 20.0-b12, mixed mode, sharing) 
```

java编译器版本为：

```
javac 1.6.0_24 
```

在我的 Java 项目的以下目录中：

```
~/NetBeansProjects/CliqueSpace/trunk/CliqueSpace 
```

我输入以下命令来编译我的项目：

```
ant -v clean jar 
```

这是输出的最后一行。它对应于我项目的最终列出的模块。

```
[javac]     /home/owen/NetBeansProjects/CliqueSpace/trunk/CliqueSpace/src/cliquespace/core/exception/cliquespace/undisclosed/identifier/UndisclosedIdentifier_FactoryNotGiven.java 
```

在“编译”我的项目库的最后一个模块之后，编译器似乎挂起。因此，我认为编译步骤没有问题。但我不确定。

问题：我如何知道发生了什么？javac会给我任何调试信息吗？它与构建脚本的下一步有关吗？

我不知道发生了什么，因为我以前从未见过这个问题，所以我不知道该怎么做才能找出答案。

我难住了。欢迎任何建设性的建议和提示。

谢谢。

编辑：我有信心在 javac 编译器中发生挂起。编译器在显示上面显示的行之后显示所有语法错误；我现在明白，上面的行是 ant 在脚本启动编译器之前以详细模式输出给开发人员的注释。虽然我还没有找到导致挂起的问题的根源，但我认为我处于领先地位......我可能会在我之前关于 Java 泛型讨论解决方案的问题中披露一些内容.

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-06T13:57:16.680

我相信我已经找到了这个问题的充分答案。我已经重新编辑了这个问题并在那里提出了一个建议。

# .htaccess - htaccess 文件保护但没有通过提示

> ID：14171768
> 
> 赞同：0
> 
> 时间：2013-01-05T12:26:51.037
> 
> 标签：.htaccess, .htpasswd

嗨，我在 .htaccess 文件中有以下内容：

AuthType Basic
AuthName “限制区域”
AuthUserFile /web/clients/.htpasswd
需要有效用户

这可以使目录私有，但是我收到 403 错误并且没有密码/用户弹出似乎甚至给了我机会？关于我做错了什么的任何想法，htaccess 和 htpasswd 都在我想要保护的目录中。

谢谢

# sockets - TCP 套接字和连接

> ID：14171769
> 
> 赞同：-1
> 
> 时间：2013-01-05T12:26:54.830
> 
> 标签：sockets, tcp, connection

如果我错了，请纠正我。

当服务器在一台机器上运行时，会创建一个将自身绑定到服务器正在运行的端口的套接字，并且该套接字会侦听传入的连接。当客户端连接到服务器时（使用服务器 ip 和端口号），如果服务器接受连接，则会在服务器机器上的同一端口（端口服务器正在运行）上再创建一个套接字，并将套接字绑定到客户端 ip 和端口。同样，在客户端，创建一个套接字。

在整个过程中，创建了 3 个套接字。1\. 在服务器上，监听传入连接。2\. 在服务器上，绑定到客户端 ip 和端口 3\. 在客户端上，绑定到服务器 ip 和端口。

我对么？我是套接字编程的新手。是否有任何网络链接/资源，我可以从中阅读套接字编程的基础知识？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T12:58:41.107

你说的很对。我认为您可以从 python 文档中学到很多东西：

*   [http://docs.python.org/2/howto/sockets.html](http://docs.python.org/2/howto/sockets.html)
*   [http://docs.python.org/2/library/socket.html](http://docs.python.org/2/library/socket.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T13:20:17.373

是的，你是对的。之所以说 TCP 所需的两个服务器套接字纯属历史原因，两者之间没有任何联系。它们是非常不同的东西。

# android - 未处理 Android 处理程序操作

> ID：14171772
> 
> 赞同：0
> 
> 时间：2013-01-05T12:26:59.197
> 
> 标签：android, android-handler

我试图将消息从线程传递给处理程序，但是，处理程序 switch 语句的处理程序操作永远不会被处理。

这是我的处理程序：

```
private Handler mHandler = new Handler() {
    @Override
    public void handleMessage(Message msg) {
        // TODO Auto-generated method stub
        super.handleMessage(msg);
        switch(msg.what) {

        case SUCCESS:
            ConnectedThread connectedThread = new ConnectedThread((BluetoothSocket)msg.obj);
            String s = "Successfully Connected";
            connectedThread.write(s.getBytes());
            break;
        case MESSAGE_READ:
            byte[] readBuff = (byte[])msg.obj;
            String string = new String(readBuff);
            Toast.makeText(getApplicationContext(), string, 0).show();
        }
    }

}; 
```

这是将消息传递给 Handler 的 Thread run() 方法。Thread 是一个内部类。

```
public void run() {
        if (D) Log.e(TAG, "-- ConnectThread --");
        // Cancel discovery because it will slow down the connection
        mBtAdapter.cancelDiscovery();

        try {
            // Connect the device through the socket. This will block
            // until it succeeds or throws an exception
            mmSocket.connect();
        } catch (IOException connectException) {
            // Unable to connect; close the socket and get out
            try {
                mmSocket.close();
            } catch (IOException closeException) { }
            return;
        }

        // Do work to manage the connection (in a separate thread)

        mHandler.obtainMessage(SUCCESS, mmSocket).sendToTarget();
        if (D) Log.e(TAG, "--SUCCESS--");
    } 
```

我不确定为什么没有执行这些行动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T21:31:52.263

通过查看您的代码很难说出问题所在。基本上，第二个线程需要对第一个线程的处理程序的引用。但是，您的第二个线程中的 mHandler 引用与您的主线程中的 mHandler 对象的关联尚不清楚。他们属于同一类吗？第二个线程是包含 mHandler 对象的类的内部类吗？

由于我很想自己做一个 Handler Message 实现，所以我写了一个小例子。也许以下示例会对您有所帮助：

```
public class MessageHandlerActivity extends Activity {

public TextView tv;
private static final int SUCCESS = 0;
private static final int FAIL = 1;
private MessageActivityHandler mHandler = new MessageHandlerActivity.MessageActivityHandler(this);

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    tv = new TextView(this);
    tv.setText("waiting!");
    setContentView(tv);
    new Thread(new MessageSenderActivity()).start();
}

static class MessageActivityHandler extends Handler {

    private final WeakReference<MessageHandlerActivity> mActivity;

    MessageActivityHandler(MessageHandlerActivity activity) {
        mActivity = new WeakReference<MessageHandlerActivity>(activity);
    }

    public void handleMessage(Message msg) {
        super.handleMessage(msg);
        switch(msg.what){
        case SUCCESS:
            mActivity.get().tv.setText("juhu!");
            break;
        case FAIL:
            mActivity.get().tv.setText("fail!");
            break;
        }

    }

};

private class MessageSenderActivity implements Runnable {
    @Override
    public void run() {
        mHandler.obtainMessage(SUCCESS).sendToTarget();
    }
}

} 
```

# ruby-on-rails - 存根助手 rspec

> ID：14171773
> 
> 赞同：1
> 
> 时间：2013-01-05T12:27:06.940
> 
> 标签：ruby-on-rails, ruby, rspec

我在 application_helper 中有一个名为 admin_rights 的方法？检查用户是否应该能够向网站添加内容。我还没有实现用户系统，所以它现在只返回 true。但我正在尝试测试它，但我似乎无法找到如何将它存根，因此它在测试中返回 false。规范检查仅在 admin_rights 时才可见的链接？返回真。当我通过更改 admin_rights 手动测试它时？为假，它按预期工作。所以我显然没有正确地把它存根。

规格是：

```
context "no admin rights" do
  before do 
    page.stub(:admin_rights?).and_return(false)
    visit fencers_path
  end
  it "should not have add fencer link" do
    expect(page).not_to have_link('+ Fekter', href: new_fencer_path)
  end
end 
```

我正在寻找将其存根的正确方法或测试它的替代方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T13:59:09.367

您发布的测试用例是验收测试。它启动一个服务器实例并遍历整个堆栈。在这类测试中，你真的不应该依赖 stubbing 和 mocking。他们应该确保应用程序作为一个整体可以正常工作，并且应该将您的应用程序视为一个黑匣子。替换少量代码是非常脆弱的验收测试的秘诀。此外，如果您使用运行 Javascript 的驱动程序运行测试，那么就没有机会让存根工作，因为服务器运行在与您的测试不同的进程中。

您应该实现逻辑`admin_rights?`，然后调整逻辑实际返回的验收测试设置`false`。例如，使用没有管理员权限的普通用户登录。最后，您希望您的验收测试与现实世界的场景紧密匹配。

# android - 应用程序无声崩溃：try catch finally 不起作用

> ID：14171774
> 
> 赞同：1
> 
> 时间：2013-01-05T12:27:07.273
> 
> 标签：android, crash, try-catch-finally

我有一个小应用程序，我可以在其中通过代码激活活动。那里我有一个奇怪的问题，我的应用程序在启用第二个活动后死了。

这是我的设置活动：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_settings);

    Log.e(getClass().getSimpleName(), "enableing activity...");

    PackageManager pm = getPackageManager();
    try {
        ComponentName componentName = new ComponentName(this, Lancher.class);
        pm.setComponentEnabledSetting(componentName,
                             PackageManager.COMPONENT_ENABLED_STATE_ENABLED, 0);
    } catch(Exception e) {
        Log.e(getClass().getSimpleName(), "Got some trouble:", e);
    } finally {
        Log.e(getClass().getSimpleName(), "reached finally block");
    }

    Log.e(getClass().getSimpleName(), "wohoo activity is enabled");
// ... 
```

这是我的 logcat 的一些行（我删除了不相关的输出）：

> I/ActivityManager(1384):**开始活动**: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp= **com.example.test/.Settings** } 来自 pid 6566
> 。 ..
> E/Settings(6592):**启用活动...**
> I/PackageManager(1384): **setEnabledSetting** (), pkgName= **com.example.test** , clsName= **com.example.test.Lancher** , state=1, flag=0 , pid=6592, uid=10203
> ...
> D/WindowManagerImpl(1384): finishRemoveViewLocked, mViews[1]: com.android.internal.policy.impl.PhoneWindow$DecorView@4054d318
> D/Process(1384): killProcess, pid =6592
> I/ActivityManager(1384): 强制停止包**com.example.test** uid=10203
> I/RegisterService(6601): android.intent.action.PACKAGE_REMOVED 包: **com.example.test**

我的清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.test"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".Settings"
            android:label="@string/app_name"
            android:exported="true">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".Lancher"
            android:enabled="false"
            android:exported="false">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.DEFAULT" />
                <category android:name="android.intent.category.HOME" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

你知道为什么我的应用程序在 finally 块没有任何输出的情况下崩溃了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T12:53:27.267

当您将标志从 0 更改为 1 或`PackageManager.DONT_KILL_APP`

```
pm.setComponentEnabledSetting(componentName,
                              PackageManager.COMPONENT_ENABLED_STATE_ENABLED,
                              PackageManager.DONT_KILL_APP); 
```

也许这是一个 android 问题或误解 android 文档。

你真的需要标志== 0吗？

# testing - 输入数据很大时如何测试和调试程序

> ID：14171777
> 
> 赞同：0
> 
> 时间：2013-01-05T12:27:21.787
> 
> 标签：testing

在开发输入大小合理的程序时，可以开发边缘情况并发现程序中存在的错误。但是当程序的输入非常大时（例如，图像处理程序），调试的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-24T12:57:52.957

同样在 delta-debugging 上，我认为提及该主题的第一篇论文很重要：[https ://www.cs.purdue.edu/homes/xyzhang/fall07/Papers/delta-debugging.pdf](https://www.cs.purdue.edu/homes/xyzhang/fall07/Papers/delta-debugging.pdf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T12:32:41.790

也许 delta 调试方法可以帮助您。参考[这篇](http://www.cs.ucdavis.edu/~su/theses/GM-thesis.pdf)文章

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-23T11:00:18.683

## 如何测试

[模糊测试（维基百科）](https://en.wikipedia.org/wiki/Fuzz_testing)可以帮助识别尚未发现的错误。

如果您有可用的源代码，则可以使用进行*白盒测试*的工具。[Agitar](http://www.agitar.com/solutions/products/automated_junit_generation.html)就是这样一个 Java 工具。它将识别`if`代码中的条件（如语句）并创建代码以测试边缘情况并确保覆盖所有路径。

## 如何调试

一旦您发现代码中的问题，您可能想要应用其他人之前提到的 delta 调试算法。这可以帮助您将输入降至最低，但仍会重现错误。模糊测试和白盒测试生成不保证最小输入。

除此之外，调试很大程度上取决于您可用的编程语言和工具，因此我认为这部分问题过于宽泛而无法回答。

# vector - 再次细分错误

> ID：14171779
> 
> 赞同：0
> 
> 时间：2013-01-05T12:27:38.773
> 
> 标签：vector, matrix, segmentation-fault

你能帮我吗，我的代码有问题，我无法修复它。它说：程序收到信号 SIGSEGV，分段错误，但它没有显示它出现在哪一行。请帮忙！

```
#include<stdio.h>
int main(){
freopen("puncte5.in","r",stdin);
freopen("puncte5.out","w",stdout);
int t[5001][5001],cx,cy,n,k,x,y,l,s,mx=0,my=0,lmax=32001;
scanf("%d%d",&n,&k);
for(int i=1;i<=n;i++){
    scanf("%d%d",&x,&y);
    t[x][y]=1;
    if(x>mx)mx=x;
    if(y>my)my=y;}
for(x=1;x<=mx-1;x++)
    for(y=1;y<=my-1;y++)
        for(l=1;x+l<=mx&&y+l<=my;l++,s=0)
            for(cx=x;cx<=x+l;cx++)
                for(cy=y;cy<=y+l;cy++){
                    s+=t[cx][cy];
                    if(s>=k)
                        if(l<=lmax)
                            l=lmax;
                    }
printf("%d",lmax);
return 0;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T12:30:09.983

你有没有尝试过

> 如果 l< lmax

代替

> l<=lmax

# python - 在 python 2.7 和 BS4 中 $ ， ^ 和 * 符号在做什么

> ID：14171790
> 
> 赞同：3
> 
> 时间：2013-01-05T12:28:52.977
> 
> 标签：python, python-2.7, beautifulsoup

在他们使用的[Selenium Doc](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#css-selectors)`^`中，`$`以及在下面代码中`*`的运算符之前`=`：但是没有一个解释为什么这些**特殊符号**

```
soup.select('a[href="http://example.com/elsie"]')
# [<a class="sister" href="http://example.com/elsie" id="link1">Elsie</a>]

soup.select('a[href^="http://example.com/"]')
# [<a class="sister" href="http://example.com/elsie" id="link1">Elsie</a>,
#  <a class="sister" href="http://example.com/lacie" id="link2">Lacie</a>,
#  <a class="sister" href="http://example.com/tillie" id="link3">Tillie</a>]

soup.select('a[href$="tillie"]')
# [<a class="sister" href="http://example.com/tillie" id="link3">Tillie</a>]

soup.select('a[href*=".com/el"]')
# [<a class="sister" href="http://example.com/elsie" id="link1">Elsie</a>] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-05T12:34:57.750

这些是[改编自 CSS 3 的子字符串匹配属性选择器](http://www.w3.org/TR/css3-selectors/#attribute-substrings)：

*   `=`仅当给定值*等于*元素的属性值时才匹配。
*   `^=`仅当给定值是元素属性值*的前缀*时才匹配。
*   `$=`仅当给定值是元素属性值*的后缀*时才匹配。
*   `*=`仅当给定值*包含*在元素的属性值中时才匹配。

在你的情况下：

*   `a[href="http://example.com/elsie"]`选择属性值等于`a`的任何元素。`href``http://example.com/elsie`
*   `a[href^="http://example.com/"]`选择其属性值以 . 开头的任何`a`元素。`href``http://example.com/`
*   `a[href$="tillie"]`选择其属性值以 . 结尾的任何`a`元素。`href``tillie`
*   `a[href*=".com/el"]`选择其属性值包含的任何`a`元素。`href``.com/el`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-05T12:34:31.147

你看到的是 CSS 选择器：

[http://www.w3.org/TR/css3-selectors/#selectors](http://www.w3.org/TR/css3-selectors/#selectors)

# c# - 如何在 C# 中从 SQL Server 数据库中检索数据？

> ID：14171794
> 
> 赞同：47
> 
> 时间：2013-01-05T12:29:07.320
> 
> 标签：c#, sql, sql-server

我有一个包含 3 列的数据库表`firstname`，`Lastname`并且`age`. 在我的 C# Windows 应用程序中，我有 3 个名为的文本框`textbox1`......我使用以下代码连接到我的 SQL Server：

```
SqlConnection con = new SqlConnection("Data Source = .;
                                       Initial Catalog = domain;
                                       Integrated Security = True");
con.Open();
SqlCommand cmd = new SqlCommand("Select * from tablename", con); 
```

我想从我的数据库中获取值；如果我给它一个值，`textbox1`它必须匹配数据库中的值并将其他详细信息检索到相应的文本框。

我尝试了这种方法，但它不起作用：

```
cmd.CommandText = "select * from tablename where firstname = '" + textBox1.Text + "' "; 
```

如何将所有其他值检索到文本框？

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2013-01-05T13:05:48.840

```
 public Person SomeMethod(string fName)
        {
            var con = ConfigurationManager.ConnectionStrings["Yourconnection"].ToString();

            Person matchingPerson = new Person();
            using (SqlConnection myConnection = new SqlConnection(con))
            {
                string oString = "Select * from Employees where FirstName=@fName";
                SqlCommand oCmd = new SqlCommand(oString, myConnection);
                oCmd.Parameters.AddWithValue("@Fname", fName);           
                myConnection.Open();
                using (SqlDataReader oReader = oCmd.ExecuteReader())
                {
                    while (oReader.Read())
                    {    
                        matchingPerson.firstName = oReader["FirstName"].ToString();
                        matchingPerson.lastName = oReader["LastName"].ToString();                       
                    }

                    myConnection.Close();
                }               
            }
            return matchingPerson;
        } 
```

这里有几件事需要注意：我使用了参数化查询，这使您的代码更安全。使用部件制作 select 语句的方式使您面临`"where x = "+ Textbox.Text +""`SQL 注入。

我已将其更改为：

```
 "Select * from Employees where FirstName=@fName"
  oCmd.Parameters.AddWithValue("@fname", fName); 
```

所以这段代码要做的是：

对您的数据库执行一条 SQL 语句，查看是否有与您提供的名字匹配的名字。如果是这种情况，该人将被存储在 Person 对象中（请参阅下面的类答案）。如果没有匹配，则 Person 对象的属性将为`null`.

显然我不完全知道你要做什么，所以有几点需要注意： 当有超过 1 个人的名字匹配时，只有最后一个会被保存并返回给你。如果您希望能够存储这些数据，可以将它们添加到`List<Person>`.

Person 类使其更清洁：

```
 public class Person
    {
            public string firstName { get; set; }
            public string lastName { get; set; }
    } 
```

现在调用该方法：

```
Person x = SomeMethod("John"); 
```

然后，您可以使用来自 Person 对象的值填充文本框，如下所示：

```
txtLastName.Text = x.LastName; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-17T13:16:57.587

创建一个名为 DbManager 的类：

```
Class DbManager
{
 SqlConnection connection;
 SqlCommand command;

       public DbManager()
      {
        connection = new SqlConnection();
        connection.ConnectionString = @"Data Source=.     \SQLEXPRESS;AttachDbFilename=|DataDirectory|DatabaseName.mdf;Integrated Security=True;User Instance=True";
        command = new SqlCommand();
        command.Connection = connection;
        command.CommandType = CommandType.Text;
     } // constructor

 public bool GetUsersData(ref string lastname, ref string firstname, ref string age)
     {
        bool returnvalue = false;
        try
        {
            command.CommandText = "select * from TableName where firstname=@firstname and lastname=@lastname";
            command.Parameters.Add("firstname",SqlDbType.VarChar).Value = firstname;
 command.Parameters.Add("lastname",SqlDbType.VarChar).Value = lastname; 
            connection.Open();
            SqlDataReader reader= command.ExecuteReader();
            if (reader.HasRows)
            {
                while (reader.Read())
                {

                    lastname = reader.GetString(1);
                    firstname = reader.GetString(2);

                    age = reader.GetString(3);

                }
            }
            returnvalue = true;
        }
        catch
        { }
        finally
        {
            connection.Close();
        }
        return returnvalue;

    } 
```

然后双击表单上的检索按钮（例如 btnretrieve）并插入以下代码：

```
 private void btnretrieve_Click(object sender, EventArgs e)
    {
        try
        {
            string lastname = null;
            string firstname = null;
            string age = null;

            DbManager db = new DbManager();

            bool status = db.GetUsersData(ref surname, ref firstname, ref age);
                if (status)
                {
                txtlastname.Text = surname;
                txtfirstname.Text = firstname;
                txtAge.Text = age;       
               }
          }
       catch
          {

          }
   } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-07-30T20:32:07.630

从数据库中检索数据：

```
private SqlConnection Conn;
 private void CreateConnection()
 {
    string ConnStr =
    ConfigurationManager.ConnectionStrings["ConnStr"].ConnectionString;
    Conn = new SqlConnection(ConnStr);
 }
 public DataTable getData()
 {
 CreateConnection();
    string SqlString = "SELECT * FROM TableName WHERE SomeID = @SomeID;";
    SqlDataAdapter sda = new SqlDataAdapter(SqlString, Conn);
    DataTable dt = new DataTable();
    try
    {
        Conn.Open();
        sda.Fill(dt);
    }
    catch (SqlException se)
    {
        DBErLog.DbServLog(se, se.ToString());
    }
    finally
    {
        Conn.Close();
    }
    return dt;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-12-03T11:43:54.830

设置**连接**后，您可以使用这个简单的方法：

```
private void getAgentInfo(string key)//"key" is your search paramter inside database
    {
        con.Open();
        string sqlquery = "SELECT * FROM TableName WHERE firstname = @fName";

        SqlCommand command = new SqlCommand(sqlquery, con); 
        SqlDataReader sReader;

        command.Parameters.Clear();
        command.Parameters.AddWithValue("@fName", key);
        sReader = command.ExecuteReader();

        while (sReader.Read())
        {
            textBoxLastName.Text = sReader["Lastname"].ToString(); //SqlDataReader
            //["LastName"] the name of your column you want to retrieve from DB

            textBoxAge.Text = sReader["age"].ToString();
            //["age"] another column you want to retrieve
        }
        con.Close();
    } 
```

现在您可以通过 textBoxFirstName 将密钥传递给此方法，例如：

```
getAgentInfo(textBoxFirstName.Text); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-04-09T06:16:55.980

我们可以使用这种类型的代码段，我们通常也使用这种代码来测试和验证 DB 到 API 字段的数据

```
class Db
{
    private readonly static string ConnectionString =
            ConfigurationManager.ConnectionStrings
                        ["DbConnectionString"].ConnectionString;
    public static List<string> GetValuesFromDB(string LocationCode)
    {
        List<string> ValuesFromDB = new List<string>();
        string LocationqueryString = "select BELocationCode,CityLocation,CityLocationDescription,CountryCode,CountryDescription " +
            $"from [CustomerLocations] where LocationCode='{LocationCode}';";
        using (SqlConnection Locationconnection =
                                 new SqlConnection(ConnectionString))
        {
            SqlCommand command = new SqlCommand(LocationqueryString, Locationconnection);
            try
            {
                Locationconnection.Open();
                SqlDataReader Locationreader = command.ExecuteReader();
                while (Locationreader.Read())
                {
                    for (int i = 0; i <= Locationreader.FieldCount - 1; i++)
                    {
                        ValuesFromDB.Add(Locationreader[i].ToString());
                    }
                }
                Locationreader.Close();
                return ValuesFromDB;
            }
            catch (Exception ex)
            {
                Console.WriteLine(ex.Message);
                throw;
            }
        }

    }

} 
```

希望这可能会有所帮助

> 注意：你们需要连接字符串（在我们的例子中是“DbConnectionString”）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-19T13:54:29.680

```
 DataTable formerSlidesData = new DataTable();
    DformerSlidesData = searchAndFilterService.SearchSlideById(ids[i]);
                if (formerSlidesData.Rows.Count > 0)
                {
                    DataRow rowa = formerSlidesData.Rows[0];

                    cabinet = Convert.ToInt32(rowa["cabinet"]);
                    box = Convert.ToInt32(rowa["box"]);
                    drawer = Convert.ToInt32(rowa["drawer"]);
                } 
```

# java - 关于检查 Map 是否包含某个键

> ID：14171798
> 
> 赞同：-1
> 
> 时间：2013-01-05T12:29:32.573
> 
> 标签：java, collections

我有一个有价值的患者 ID，它是我从应用程序的后端获取的，如下所示

```
 String PatientId = rxDetails.getPatient().getPatientID() ; //patient ID recieved from backend 
```

这是另一个存储详细信息的地图，如下所示

```
 Map <String ,List<String>> m = new LinkedHashMap LinkedHashMap<String,List<String>>();
  List<String> info = new ArrayList<String>();
                info.add("ScriptInfo");
                info.add("Name");
                info.add("PhoneNo");
  m.put(PatientID ,info);
  transaction.setValue(ITransaction.PATIENT_DETAILS_FOR_CCV, ppvdetails);//please ignore this line as it is my framework dependent and in this line I am storing the Map 
```

如图所示，它还存储了患者 ID

现在我的查询是我必须在某些条件下交叉检查我从后端获得的患者 ID 第一个是否已经存在于 Map m 中

现在如下所示，我在另一个名为 ValidatedPatientList 的 Map 中引用 Map m

```
Map ValidatedPatientList = (LinkedHashMap)transaction.getValue(ITransaction.VALIDATED_CCV_PH_NBR);//please ignore this line as it is my framework dependent and in this line I am retreving the Mao
if(ValidatedPatientList != null && !ValidatedPatientList.isEmpty())
      {
       Iterator iterator = ValidatedPatientList.keySet().iterator();
          if(iterator.hasNext())
          { 
```

如上所示现在我必须先提取 ValidatedPatientList 的所有键，然后必须比较它是否包含第一个患者 id，请告知如何实现这一点..!!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T12:35:17.697

使用`HashMap#containsKey`. 如果映射包含指定键的映射，它将返回 true。

Javadoc 用于`java.util.HashMap`

```
/**
 * Returns <tt>true</tt> if this map contains a mapping for the
 * specified key.
 *
 * @param   key   The key whose presence in this map is to be tested
 * @return <tt>true</tt> if this map contains a mapping for the specified
 * key.
 */
public boolean containsKey(Object key) {
    return getEntry(key) != null;
} 
```

代码示例：

```
Map<String ,List<String ValidatedPatientList = (LinkedHashMap<String ,List<String)transaction.getValue(ITransaction.VALIDATED_CCV_PH_NBR);
if(ValidatedPatientList != null && !ValidatedPatientList.isEmpty())
{  
   if (validatedPatientList.containsKey(patientId)) //returns true if map contains the key
   {...}
} 
```

# join - 在运行 HIVE Join 查询时，Reducers 在 66.68% 处停止工作

> ID：14171806
> 
> 赞同：5
> 
> 时间：2013-01-05T12:30:10.400
> 
> 标签：join, hadoop, mapreduce, hive

尝试连接 6 个表，每个表中大约有 500 万行。尝试加入在所有表格上按升序排序的帐号。Map 任务成功完成，reducers 停止工作的比例为 66.68%。尝试了增加减速器数量等选项，还尝试了其他选项 set hive.auto.convert.join = true; 并设置 hive.hashtable.max.memory.usage = 0.9; 并设置 hive.smalltable.filesize = 25000000L; 但结果是一样的。尝试使用少量记录（如 5000 行），查询效果非常好。

请建议在这里可以做些什么来使它工作。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-05T20:43:42.113

66% 的 reducer 开始执行实际的 reduce（0-33% 是 shuffle，33-66% 是 sort）。在与 hive 的连接中，reducer 在两个数据集之间执行笛卡尔积。

我猜测至少有一个外键经常出现在所有数据集中。注意 NULL 和默认值。

例如，在连接中，假设键“abc”在六个表中的每个表中出现十次 (10^6)。那是那个键的一百万条输出记录。如果“abc”在一个表中出现 1000 次，在另一个表中出现 1000 次，在另一个表中出现 1000 次，然后在其他三个表中出现两次，您将获得 80 亿条记录 (1000^3 * 2^3)。你可以看到这是如何失控的。我猜至少有一个键会导致大量的输出记录。

这也是在 Hive 之外的 RDBMS 中避免的一般良好做法。在多对多关系之间进行多个内部连接会给您带来很多麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T01:12:10.183

对于现在和将来的调试，您可以使用 JobTracker 来查找和检查有问题的 Reducer 的日志。然后，您可以检测 reduce 操作以更好地处理正在发生的事情。小心你当然不要用伐木把它炸毁！例如，尝试查看输入到 reduce 操作的记录数。

# macos - 在 Mac 应用程序中获取类似 UINavigationController 的行为

> ID：14171808
> 
> 赞同：3
> 
> 时间：2013-01-05T12:30:11.730
> 
> 标签：macos, cocoa, cocoa-sheet

我对mac应用程序很陌生。以前我只为 iPhone 应用程序工作过，现在我开始学习 mac 应用程序。我创建了一个简单的应用程序，对于每个应用程序，我们在屏幕顶部都有默认工具栏。因此，在单击新建时，我想停留在当前窗口上并切换到不同的视图，其中我有一个后退按钮，单击时我想移回上一个视图。与 iphone 中的“ ***PushviewController*** ”和“ ***Popviewcontroller*** ”相同，请以任何方式建议我。我已尝试使用以下代码，但它们无法按我的需要正常工作。

```
-(IBAction)newDocument:(id)sender
{
    NSLog(@"<><><>Test");

    NewWindow *newWindow = [[[NewWindow alloc] initWithWindowNibName:@"NewWindow"] autorelease];
    NSView *view = [[newWindow window] contentView];
    NSLog(@"%@",view);
    [[self window] setContentView:view];
    //[[newWindow window] becomeKeyWindow];
    //[NSApp beginSheet:[newWindow window] modalForWindow:[self window] modalDelegate:self didEndSelector:nil contextInfo:nil];

}

- (IBAction)goBack:(NSButton *)sender
{
    [[self window] resignKeyWindow];
} 
```

# iphone - CCLabelTTF 值未更新（cocos2d）

> ID：14171810
> 
> 赞同：0
> 
> 时间：2013-01-05T12:30:19.960
> 
> 标签：iphone, cocos2d-iphone

我有两层控制层，其中包含用于得分的 CCLabelTTF，第一层用于检测我的对象的碰撞。我想从我的第一层更新控制层中的分数（即 CCLabelTTF 值）。

这是我的代码...

我的场景.m

```
-(id)init{

    self=[super init];   

    FirstLayer *fl=[FirstLayer node];

    [self addChild:fl];

    controlLayer *cl=[controlLayer node];

    [self addChild:cl z:3 tag:1];

    return self;

       } 
```

控制层.h

```
@interface controlLayer : CCLayer{
     CCLabelTTF * score ;
     int score_value;        
}

@property(nonatomic,retain)CCLabelTTF * score ;
@property int score_value;

-(void)displayScore;    
@end 
```

控制层.m

```
-(id)init{        
   // my code..            
        [self displayScore];            
    }

    return self;
}

-(void)displayScore{        
    CGSize screenSize=[[CCDirector sharedDirector]winSize];    
    CCLabelTTF * score_lbl = [CCLabelTTF labelWithString:@"Score" fontName:@"Arial" fontSize:16.0];    
    score_lbl.position=ccp(screenSize.width*0.10,screenSize.height*0.90);        
    [self addChild:score_lbl z:99];

    score =[CCLabelTTF labelWithString:[NSString stringWithFormat:@"test:%d",score_value] fontName:@"Arial" fontSize:16.0] ;          
    NSString *str = [score string];        
    NSLog(@"SCORE control:%@",str);    
    score.position=ccp(screenSize.width*0.20,screenSize.height*0.90);        
    [self addChild:score];        
} 
```

第一层.h

```
@interface FirstLayer : CCLayer     
{           
    controlLayer *cl;                
    }

@property(nonatomic,retain)controlLayer *cl;    

@end 
```

第一层.m

```
@implementation FirstLayer

@synthesize cl;    
    -(id)init{

 ---

cl=[controlLayer new];
[self schedule:@selector(tick:)];

    return self;

}

-(void)tick:(ccTime)dt{           
    bool blockFound=false;        
    world->Step(dt, 10, 10);      

    std::vector<MyContact>::iterator pos;
    for(pos = _contactListener->_contacts.begin(); 
        pos != _contactListener->_contacts.end(); ++pos) {
        MyContact contact = *pos;          

        b2Body *bodyA = contact.fixtureA->GetBody();
        b2Body *bodyB = contact.fixtureB->GetBody();
        if (bodyA->GetUserData() != NULL && bodyB->GetUserData() != NULL) {
            CCSprite *spriteA = (CCSprite *) bodyA->GetUserData();
            CCSprite *spriteB = (CCSprite *) bodyB->GetUserData();                         

            // Sprite A = ball, Sprite B = Block
            if (spriteA.tag == 1 && spriteB.tag == 2) {                    

                cl.score_value=cl.score_value+5;

                [cl.score setString:[NSString stringWithFormat:@"%d",cl.score_value]];                                   

                NSString *str = [cl.score string];

                NSLog(@"SCORE in GAME:%@",str);

               // [cl displayScore];                        

                if (std::find(toDestroy.begin(), toDestroy.end(), bodyB) 
                    == toDestroy.end()) {
                    toDestroy.push_back(bodyB);

                }
            }
            // Sprite B = block, Sprite A = ball
            else if (spriteA.tag == 2 && spriteB.tag == 1) {                      

                cl.score_value=cl.score_value+5;

               [cl.score setString:[NSString stringWithFormat:@"%d",cl.score_value]];

                NSString *str = [cl.score string];

                NSLog(@"SCORE in GAME:%@",str);

             //    [cl displayScore];                    

            }               

        }                 
    } 
```

出了什么问题？，我总是得到分数：测试 0 ！:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T13:38:44.483

您的声明`cl=[controlLayer new];`没有获得添加到游戏场景中的 controlLayer 的引用。正如您的游戏 scene.m 代码所示，FirstLayer 和 controlLayer 实例都已初始化并作为子项添加到 CCScene。要从 FirstLayer 中正确引用您的 controlLayer，请执行以下操作：

```
FirstLayer.m

-(void) onEnter {
[super onEnter];
cl = (controlLayer*)[self.parent getChildByTag:1];
} 
```

您必须将其放入 onEnter 的原因`self.parent`是在 FirstLayer 的 init 方法中无效。 `onEnter`初始化完成后调用。这应该为您提供对添加到游戏场景中的实际 controlLayer 的引用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-05T12:52:24.480

我认为从外观上看，您正在向控制层发送一个新的分数值，但您并没有更新标签，因为您只设置了一次。如果 score_value 发生变化，它不会自动更新。我认为您需要在控制层中安排一个更新方法来更新分数标签。

# java - eclipse html文件中的Java Applet问题

> ID：14171815
> 
> 赞同：0
> 
> 时间：2013-01-05T12:31:40.497
> 
> 标签：java, html, applet, codebase

我想为这个问题道歉，我发现这是`codebase`更改后的 Eclipse 问题：

```
codebase="F:\Apps Workspace\Java24\bin" 
```

以及将内部网络浏览器的使用更改为外部网络浏览器并使其在 IExplorer 上运行良好，感谢您的宝贵时间，再次抱歉。

* * *

我目前正在通过阅读“Sam 在 24 小时内自学 Java”一书来学习 Java，目前我在第 19 小时并正在开发一个示例小程序。到目前为止，我一直没有问题地阅读这本书，直到本章和第 18 章，这是关于 Applets 的。

我目前的问题是在他使用 Netbeans 的书中测试 Applets，而我正在使用 Eclipse，我目前使用 Eclipse 的唯一原因是为了适应它，我将编写的下一本书是 Android 编程，这就是他们只使用日食。

我的问题是当书中谈到测试我们制作的小程序时，它说要制作一个 HTML 文件来测试小程序。html代码是这样的：

```
<applet code = "LinkRotator.class"
        codebase = "..\\build\\classes"   <===This is where I think my issue is.
        width = "300"
        height = "100">
</applet> 
```

现在，当我保存 HTML 并在 eclipse 中打开它时，我只得到一个空白页，从我在谷歌搜索中阅读的内容来看，代码库是在这种情况下文件夹或项目的位置`LinkRotator.class`。我试过了多次更改但仍然没有骰子。现在，它所在的文件夹位于 `F:\Apps Workspace\Java24\bin\LinkRotator.class`. 奇怪的是我已经安装了 Netbeans，看看如果我只是将文件移到那里，它是否可以在那里工作，但它仍然没有运行。

所以我的主要问题是如何让这个 html 文件点正确指向我正在处理的小程序并让它在 Eclipse 中正确加载？

还有两件事，我可以通过在 eclipse 中点击 run 来运行 Applets，但我只是想让它像书上所说的那样从网页加载。对于任何想了解更多信息的人来说，可以在[此处](http://workbench.cadenhead.org/book/java-7-24-hours/chapter.php/19)找到包含作品副本的网站。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T13:20:50.727

The applets are supposed to deploy on the server and run on the client. If you are creating the applet project in Eclipse then the default project html should be created by the wizard. So, you can launch it from the IDE or from the appletviewer on the local side. The `<applet` tag is deprecated and use

> CODEBASE = codebaseURL This OPTIONAL attribute specifies the base URL of the applet--the directory that contains the applet's code. If this attribute is not specified, then the document's URL is used.

should be a valid URL. An Example that `<object` tag

```
 <object id="appletId" type="application/x-java-applet" archive="yourappletcode.jar" height="300" width="400">
    <param name="code" value="YourApplicationmainClass" />
    <param name="archive" value="yourappletcode.jar" />
  </object> 
```

better to use an archive your code into the jar before deploy it on the server.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T12:40:03.707

尝试以下步骤：

在 Package Explorer 中，选择包含要启动的小程序的 Java 编译单元或类文件。按工作台工具栏中的运行 [ ] 按钮或从工作台菜单中选择运行 > 运行。或者，从 Package Explorer 弹出菜单中选择 Run As > Java Applet，在工作台菜单栏中选择 Run > Run As > Java Applet，或在 Run 工具栏按钮的下拉菜单中选择 Run As > Java Applet . 您的程序现已启动。

# angularjs - 使用 JSON 请求正文测试 laravel 控制器

> ID：14171816
> 
> 赞同：11
> 
> 时间：2013-01-05T12:31:42.103
> 
> 标签：angularjs, laravel, phpunit, laravel-3

我正在尝试为 Laravel 控制器编写一个 phpunit 测试，该控制器需要带有 JSON 格式正文的发布请求。

控制器的简化版本：

```
class Account_Controller extends Base_Controller
{
    public $restful = true;

    public function post_login()
    {
        $credentials = Input::json();
        return json_encode(array(
            'email' => $credentials->email,
            'session' => 'random_session_key'
        ));
    }
} 
```

目前我有一个测试方法可以正确地将数据作为 urlencoded 表单数据发送，但我无法弄清楚如何将数据作为 JSON 发送。

我的测试方法（我在[这里](https://gist.github.com/3079291)写测试的时候使用了github gist）

```
class AccountControllerTest extends PHPUnit_Framework_TestCase {
    public function testLogin()
    {
        $post_data = array(
            'email' => 'user@example.com',
            'password' => 'example_password'
        );
        Request::foundation()->server->set('REQUEST_METHOD', 'POST');
        Request::foundation()->request->add($post_data);
        $response = Controller::call('account@login', $post_data);
        //check the $response
    }
} 
```

我在前端使用 angularjs，默认情况下，发送到服务器的请求是 JSON 格式。我不希望将其更改为发送 urlencoded 表单。

有谁知道我如何编写一个为控制器提供 JSON 编码主体的测试方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-03-19T12:12:54.057

在 Laravel 5 中，`call()`方法发生了变化：

```
$this->call(
    'PUT', 
    $url, 
    [], 
    [], 
    [], 
    ['CONTENT_TYPE' => 'application/json'],
    json_encode($data_array)
); 
```

我认为 Symphony 的`request()`方法被称为： [http ://symfony.com/doc/current/book/testing.html](http://symfony.com/doc/current/book/testing.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-07-10T11:13:07.610

这就是我在 Laravel4 中执行此操作的方式

```
// Now Up-vote something with id 53
$this->client->request('POST', '/api/1.0/something/53/rating', array('rating' => 1) );

// I hope we always get a 200 OK
$this->assertTrue($this->client->getResponse()->isOk());

// Get the response and decode it
$jsonResponse = $this->client->getResponse()->getContent();
$responseData = json_decode($jsonResponse); 
```

`$responseData`将是一个等于 json 响应的 PHP 对象，并允许您测试响应:)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-03-12T16:10:47.153

这对我有用。

```
$postData = array('foo' => 'bar');
$postRequest = $this->action('POST', 'MyController@myaction', array(), array(), array(), array(), json_encode($postData));
$this->assertTrue($this->client->getResponse()->isOk()); 
```

的第七个参数`$this->action`是`content`。[请参阅http://laravel.com/api/source-class-Illuminate.Foundation.Testing.TestCase.html#_action](http://laravel.com/api/source-class-Illuminate.Foundation.Testing.TestCase.html#_action)上的文档

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-19T01:47:25.940

有很多更简单的方法可以做到这一点。您可以简单地将 Input::$json 属性设置为要作为 post 参数发送的对象。请参阅下面的示例代码

```
 $data = array(
        'name' => 'sample name',
        'email' => 'abc@yahoo.com',
 );

 Input::$json = (object)$data;

 Request::setMethod('POST');
 $response = Controller::call('client@create');
 $this->assertNotNull($response);
 $this->assertEquals(200, $response->status()); 
```

我希望这对您的测试用例有所帮助

更新：原始文章可在此处获得[http://forums.laravel.io/viewtopic.php?id=2521](http://forums.laravel.io/viewtopic.php?id=2521)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-05T12:45:44.330

一个简单的解决方案是使用 CURL - 然后它还允许您从服务器捕获“响应”。

```
class AccountControllerTest extends PHPUnit_Framework_TestCase
{

 public function testLogin()
 {
    $url = "account/login";

    $post_data = array(
        'email' => 'user@example.com',
        'password' => 'example_password'
    );
    $content = json_encode($post_data);

    $curl = curl_init($url);
    curl_setopt($curl, CURLOPT_HEADER, false);
    curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($curl, CURLOPT_HTTPHEADER, array("Content-type: application/json"));
    curl_setopt($curl, CURLOPT_POST, true);
    curl_setopt($curl, CURLOPT_POSTFIELDS, $content);

    $json_response = curl_exec($curl);

    $status = curl_getinfo($curl, CURLINFO_HTTP_CODE);

    curl_close($curl);

    $response = json_decode($json_response, true);

    // Do some $this->Assert() stuff here on the $status
  }
} 
```

CURL 实际上将使用 JSON 模拟原始 HTTP 帖子——因此您知道您正在真正测试您的功能；

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-06-09T17:49:37.207

从 Laravel 5.1 开始，有一种更简单的方法可以通过 PHPunit 测试 JSON 控制器。只需传递一个包含数据的数组，它就会自动编码。

```
public function testBasicExample()
{
    $this->post('/user', ['name' => 'Sally'])
         ->seeJson([
            'created' => true,
         ]);
} 
```

来自文档： http: [//laravel.com/docs/5.1/testing#testing-json-apis](http://laravel.com/docs/5.1/testing#testing-json-apis)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-03-22T19:23:11.887

由于至少 Laravel 5.2 有一个`json()`方法， [`Illuminate\Foundation\Testing\Concerns\MakesHttpRequests`](https://github.com/laravel/framework/blob/8.x/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php)因此您可以执行以下操作：

```
$data = [
  "name" => "Foobar"
];
$response = $this->json('POST', '/endpoint', $data); 
```

此外，从 Laravel 5.3 开始，还有一些方便的方法，如`putJson()`,`postJson()`等。因此它甚至可以进一步缩短为：

```
$data = [
  "name" => "Foobar"
];
$response = $this->postJson('/endpooint', $data); 
```

然后你可以这样做`$response->assertJson(...)`：

```
$response->assertJson(fn (AssertableJson $json) => $json->hasAll(['id', 'name'])); 
```

# javascript - 分析html中的按钮以检查是否可以注册事件

> ID：14171825
> 
> 赞同：0
> 
> 时间：2013-01-05T12:33:12.557
> 
> 标签：javascript, html

我想使用 javascript addEventListener 或类似的东西在网页中的按钮上注册事件。但是该网页似乎没有标准的表单按钮。下面的 html 片段是页面上显示为按钮的 html 标记。

我想检测mousedown（或mouseclick或equiv）。有什么方法可以检测到用户点击了这个按钮？

```
<a href="javascript:" id="WIN_0_536870914" arid=536870914 artype="Control" ardbn="Dial"    artcolor="null" class="btn btn3d arfid536870914 ardbnDial" style="top:247&#59; left:115&#59; width:46&#59; height:21&#59;z-index:1001&#59;">
<div class="btntextdiv" style="top:0&#59; left:0&#59; width:46&#59; height:21&#59;">
<div class="f1" style="&#59;width:46">Dial</div>
</div>
</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T12:51:46.517

唯一棘手的一点是首先从 DOM 中获取元素。如果您知道，`id`那么获取此特定按钮很简单：

```
var elem = document.getElementById('WIN_0_536870914');

elem.addEventListener('click', function () {
  alert('click!');
}); 
```

[http://jsfiddle.net/ugsYB/](http://jsfiddle.net/ugsYB/)

尽管您可能希望按其类定位所有按钮：

```
var elems = document.getElementsByClassName('btn');

var i;
for(i = 0; i < elems.length; i++) {
  var elem = elems[i];
  elem.addEventListener('click', function () {
    alert('click!');
  });
} 
```

[http://jsfiddle.net/ugsYB/1/ （注意：](http://jsfiddle.net/ugsYB/1/) [getElementByClassName](http://caniuse.com/getelementsbyclassname)存在跨浏览器问题）

当然，jQuery 让这种事情变得微不足道：

```
$('.btn').click(function () { alert('click!'); }); 
```

[http://jsfiddle.net/ugsYB/2/](http://jsfiddle.net/ugsYB/2/)

但这对于您的需求可能有点过头了。

# android - 使用 FFMPEG 为 Android 转换视频

> ID：14171826
> 
> 赞同：33
> 
> 时间：2013-01-05T12:33:14.503
> 
> 标签：android, video, ffmpeg

我想要做的是将视频转换为将在 Android 中播放的 mp4 格式。

我已经浏览了[http://developer.android.com/guide/appendix/media-formats.html](http://developer.android.com/guide/appendix/media-formats.html)

我正在设置以下选项

```
-vcodec libx264 -vprofile baseline -acodec libfaac -ar 44100 -ac 1 -ab 128k 
```

但我收到错误消息“抱歉，此视频不适用于流式传输到此设备”

我使用videoJS [http://video-js.zencoder.com/oceans-clip.mp4](http://video-js.zencoder.com/oceans-clip.mp4)在android浏览器中播放了视频，它工作正常。

我下载了视频 oceans-clip.mp4 并尝试使用极简选项进行转换

```
-y -i working.mp4 -vprofile baseline pleasework.mp4 
```

但我收到相同的错误消息。

以下是视频文件的 FFMPEG 信息转储

**工作.mp4**

```
Array
(
    [0] => ffmpeg version N-40229-g24e3f44-syslint Copyright (c) 2000-2012 the FFmpeg developers
    [1] =>   built on Apr 29 2012 22:01:41 with gcc 4.1.2 20080704 (Red Hat 4.1.2-52)
    [2] =>   configuration: --prefix=/usr/local/cpffmpeg --enable-shared --enable-nonfree --enable-gpl --enable-pthreads --enable-libopencore-amrnb --enable-decoder=liba52 --enable-libopencore-amrwb --enable-libfaac --enable-libmp3lame --enable-libtheora --enable-libvorbis --enable-libx264 --enable-libxvid --extra-cflags=-I/usr/local/cpffmpeg/include/ --extra-ldflags=-L/usr/local/cpffmpeg/lib --enable-version3 --extra-version=syslint
    [3] =>   libavutil      51\. 48.100 / 51\. 48.100
    [4] =>   libavcodec     54\. 17.101 / 54\. 17.101
    [5] =>   libavformat    54\.  3.100 / 54\.  3.100
    [6] =>   libavdevice    53\.  4.100 / 53\.  4.100
    [7] =>   libavfilter     2\. 72.100 /  2\. 72.100
    [8] =>   libswscale      2\.  1.100 /  2\.  1.100
    [9] =>   libswresample   0\. 11.100 /  0\. 11.100
    [10] =>   libpostproc    52\.  0.100 / 52\.  0.100
    [11] => Input #0, mov,mp4,m4a,3gp,3g2,mj2, from 'working.mp4':
    [12] =>   Metadata:
    [13] =>     major_brand     : isom
    [14] =>     minor_version   : 1
    [15] =>     compatible_brands: isomavc1
    [16] =>     creation_time   : 2010-05-18 04:24:00
    [17] =>   Duration: 00:00:46.54, start: 0.000000, bitrate: 3342 kb/s
    [18] =>     Stream #0:0(und): Video: h264 (Constrained Baseline) (avc1 / 0x31637661), yuv420p, 640x264 [SAR 132:133 DAR 320:133], 3195 kb/s, SAR 127:128 DAR 635:264, 23.98 fps, 23.98 tbr, 24k tbn, 47.95 tbc
    [19] =>     Metadata:
    [20] =>       creation_time   : 2010-05-18 04:24:00
    [21] =>       handler_name    : GPAC ISO Video Handler
    [22] =>     Stream #0:1(und): Audio: aac (mp4a / 0x6134706D), 44100 Hz, stereo, s16, 144 kb/s
    [23] =>     Metadata:
    [24] =>       creation_time   : 2010-05-18 04:24:01
    [25] =>       handler_name    : GPAC ISO Audio Handler
    [26] => At least one output file must be specified
) 
```

**不工作.mp4**

```
Array
(
    [0] => ffmpeg version N-40229-g24e3f44-syslint Copyright (c) 2000-2012 the FFmpeg developers
    [1] =>   built on Apr 29 2012 22:01:41 with gcc 4.1.2 20080704 (Red Hat 4.1.2-52)
    [2] =>   configuration: --prefix=/usr/local/cpffmpeg --enable-shared --enable-nonfree --enable-gpl --enable-pthreads --enable-libopencore-amrnb --enable-decoder=liba52 --enable-libopencore-amrwb --enable-libfaac --enable-libmp3lame --enable-libtheora --enable-libvorbis --enable-libx264 --enable-libxvid --extra-cflags=-I/usr/local/cpffmpeg/include/ --extra-ldflags=-L/usr/local/cpffmpeg/lib --enable-version3 --extra-version=syslint
    [3] =>   libavutil      51\. 48.100 / 51\. 48.100
    [4] =>   libavcodec     54\. 17.101 / 54\. 17.101
    [5] =>   libavformat    54\.  3.100 / 54\.  3.100
    [6] =>   libavdevice    53\.  4.100 / 53\.  4.100
    [7] =>   libavfilter     2\. 72.100 /  2\. 72.100
    [8] =>   libswscale      2\.  1.100 /  2\.  1.100
    [9] =>   libswresample   0\. 11.100 /  0\. 11.100
    [10] =>   libpostproc    52\.  0.100 / 52\.  0.100
    [11] => Input #0, mov,mp4,m4a,3gp,3g2,mj2, from 'pleasework.mp4':
    [12] =>   Metadata:
    [13] =>     major_brand     : isom
    [14] =>     minor_version   : 512
    [15] =>     compatible_brands: isomiso2avc1mp41
    [16] =>     creation_time   : 2010-05-18 04:24:00
    [17] =>     encoder         : Lavf54.3.100
    [18] =>   Duration: 00:00:46.54, start: 0.000000, bitrate: 1843 kb/s
    [19] =>     Stream #0:0(und): Video: h264 (Constrained Baseline) (avc1 / 0x31637661), yuv420p, 640x264 [SAR 127:128 DAR 635:264], 1715 kb/s, 23.98 fps, 23.98 tbr, 24k tbn, 47.95 tbc
    [20] =>     Metadata:
    [21] =>       creation_time   : 2010-05-18 04:24:00
    [22] =>       handler_name    : VideoHandler
    [23] =>     Stream #0:1(und): Audio: aac (mp4a / 0x6134706D), 44100 Hz, stereo, s16, 124 kb/s
    [24] =>     Metadata:
    [25] =>       creation_time   : 2010-05-18 04:24:00
    [26] =>       handler_name    : SoundHandler
    [27] => At least one output file must be specified
) 
```

元数据看起来几乎相同，但似乎无法在 android 中播放。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-05T14:18:02.513

ffmpeg 创建的 MP4 在尾部有 moov 标头。这就是您收到此错误消息的原因。ffmpeg 可以将 moov header 放在前面（适合流式传输）。

只需运行：

```
ffmpeg -i <input> -c:v libx264 -c:a aac -movflags +faststart output.mp4 
```

另请参阅[ffmpeg 中的后处理以在 MP4 文件中移动“moov atom”（qt-faststart）](https://stackoverflow.com/questions/8061798/post-processing-in-ffmpeg-to-move-moov-atom-in-mp4-files-qt-faststart)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-09-10T03:11:35.590

不再支持 libfaac，您可以使用此配置：

```
ffmpeg -i <input> -s 480x320 -vcodec mpeg4 -acodec aac -strict -2 -ac 1 -ar 16000 -r 13 -ab 32000 -aspect 3:2 <output> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-28T23:16:18.560

对我有用的解决方案是：

```
ffmpeg -i <INPUT_VIDEO> -c:v libx264 -profile:v baseline -c:a libvo_aacenc -ar 44100 -ac 2 -b:a 128k -movflags faststart output.mp4 
```

我正在使用 Ubuntu 16.04.1 LTS

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-13T17:00:08.347

对我有用的解决方案是：

```
ffmpeg -y -i input_file.mp4 -s 352x288 -b:v 384k -flags +loop+mv4 -cmp 256 -partitions +parti4x4+parti8x8+partp4x4+partp8x8 -subq 6 -trellis 0 -refs 5 -bf 0 -coder 0 -me_range 16 -g 250 -keyint_min 25 -sc_threshold 40 -i_qfactor 0.71 -qmin 10 -qmax 51 -qdiff 4 -c:a aac -ac 1 -ar 16000 -r 13 -ab 32000 -aspect 3:2 -strict experimental output_file.3gp 
```

我转换为3gp。它使用 VideoView 在 API 16 或更高版本中工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-08T17:43:52.063

我在这里所做的是用我的 Android 设备录制视频，看看它用 FFMPEG 配置了什么：

```
C:\Users\muradgui\Documents\SmartTrust\Software\ffmpeg-20170418-6108805-win64-static\bin>ffmpeg -i android.mp4
ffmpeg version N-85588-g6108805 Copyright (c) 2000-2017 the FFmpeg developers
  built with gcc 6.3.0 (GCC)
  configuration: --enable-gpl --enable-version3 --enable-cuda --enable-cuvid --enable-d3d11va --enable-dxva2 --enable-libmfx --enable-nvenc --enable-avis
e-fontconfig --enable-frei0r --enable-gnutls --enable-iconv --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libfreetype --e
m --enable-libilbc --enable-libmodplug --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenh264 --enable-libopenjpe
-librtmp --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libtheora --enable-libtwolame --enable-libvidstab --enable-libvo-amrwbenc --enabl
 --enable-libwavpack --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxavs --enable-libxvid --enable-libzimg --enable-lzma --enable-zlib
  libavutil      55\. 61.100 / 55\. 61.100
  libavcodec     57\. 93.100 / 57\. 93.100
  libavformat    57\. 72.101 / 57\. 72.101
  libavdevice    57\.  7.100 / 57\.  7.100
  libavfilter     6\. 84.101 /  6\. 84.101
  libswscale      4\.  7.101 /  4\.  7.101
  libswresample   2\.  8.100 /  2\.  8.100
  libpostproc    54\.  6.100 / 54\.  6.100
[h264 @ 00000000003184e0] no frame!
[aac @ 000000000050c900] Input buffer exhausted before END element found
Input #0, mov,mp4,m4a,3gp,3g2,mj2, from 'android.mp4':
  Metadata:
    major_brand     : mp42
    minor_version   : 0
    compatible_brands: isommp42
    creation_time   : 2018-03-08T17:30:26.000000Z
    com.android.version: 6.0.1
  Duration: 00:00:00.86, start: 0.000000, bitrate: 2160 kb/s
    Stream #0:0(eng): Video: h264 (Baseline) (avc1 / 0x31637661), yuv420p, 720x1280, 2107 kb/s, 31.72 fps, 29.97 tbr, 90k tbn, 180k tbc (default)
    Metadata:
      creation_time   : 2018-03-08T17:30:26.000000Z
      handler_name    : VideoHandle
    Stream #0:1(eng): Audio: aac (LC) (mp4a / 0x6134706D), 44100 Hz, mono, fltp, 56 kb/s (default)
    Metadata:
      creation_time   : 2018-03-08T17:30:26.000000Z
      handler_name    : SoundHandle
At least one output file must be specified 
```

我不是很技术，但这是最吸引我注意的地方：

```
Stream #0:0(eng): Video: h264 (Baseline) (avc1 / 0x31637661), yuv420p, 720x1280, 2107 kb/s, 31.72 fps, 29.97 tbr, 90k tbn, 180k tbc (default) 
```

我使用以下命令成功转换了我的视频，以便可以在我的 Android 上播放：

```
ffmpeg -i out.avi -vcodec h264 -s 720x1280 test3.mp4 
```

我怀疑我的问题是我的原始视频的分辨率对我的设备来说太大了。这是之前的情况：

```
C:\Users\muradgui\Documents\SmartTrust\Software\ffmpeg-20170418-6108805-win64-static\bin>ffmpeg -i out.avi
ffmpeg version N-85588-g6108805 Copyright (c) 2000-2017 the FFmpeg developers
  built with gcc 6.3.0 (GCC)
  configuration: --enable-gpl --enable-version3 --enable-cuda --enable-cuvid --enable-d3d11va --enable-dxva2 --enable-libmfx --enable-nvenc --enable-avisynth --enable-bzlib --enable-fontconfig --enable-frei0r --enable-gnutls --enable-iconv --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libfreetype --enable-libgme --enable-libgsm --enable-libilbc --enable-libmodplug --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenh264 --enable-libopenjpeg --enable-libopus --enable-librtmp --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libtheora --enable-libtwolame --enable-libvidstab --enable-libvo-amrwbenc --enable-libvorbis --enable-libvpx --enable-libwavpack --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxavs --enable-libxvid --enable-libzimg --enable-zma --enable-zlib
  libavutil      55\. 61.100 / 55\. 61.100
  libavcodec     57\. 93.100 / 57\. 93.100
  libavformat    57\. 72.101 / 57\. 72.101
  libavdevice    57\.  7.100 / 57\.  7.100
  libavfilter     6\. 84.101 /  6\. 84.101
  libswscale      4\.  7.101 /  4\.  7.101
  libswresample   2\.  8.100 /  2\.  8.100
  libpostproc    54\.  6.100 / 54\.  6.100
Input #0, avi, from 'out.avi':
  Metadata:
    encoder         : Lavf57.72.101
  Duration: 00:00:10.00, start: 0.000000, bitrate: 4788 kb/s
    Stream #0:0: Video: mpeg4 (Simple Profile) (FMP4 / 0x34504D46), yuv420p, 2250x4000 [SAR 1:1 DAR 9:16], 4596 kb/s, 25 fps, 25 tbr, 25 tbn, 25 tbc
    Stream #0:1: Audio: mp3 (U[0][0][0] / 0x0055), 44100 Hz, stereo, s16p, 192 kb/s 
```

它具有 2250x4000 的分辨率（它是来自同一设备的图像，我用这篇文章[https://superuser.com/questions/617392/ffmpeg-image-sequence-with-various-durations](https://superuser.com/questions/617392/ffmpeg-image-sequence-with-various-durations)转换成视频）。

我尝试简单地调整图像大小而不将编解码器更改为 h264，但这并没有产生非常好的图像。h264 为我做的 :)

希望这可以帮助！！<3

# sql - 创建一个预言机函数

> ID：14171832
> 
> 赞同：0
> 
> 时间：2013-01-05T12:33:38.607
> 
> 标签：sql, plsql, sqlplus

`get_age`以下代码使用 oracle sql*plus创建一个带有函数的对象表。

```
Create Type C_type as Object(
  Cname varchar(30),
  dob  Date,
  classification Number,
  sample_clip Blob
)
/

ALTER TYPE C_type
  ADD MEMBER FUNCTION get_age RETURN INTEGER;

CREATE OR REPLACE TYPE BODY C_type AS
MEMBER FUNCTION get_age RETURN INTEGER IS
currenttime_age integer; 
BEGIN
  currenttime_age := (SYSDATE - dob)/365.25; 
  RETURN currenttime_age;   
END get_age;
END;
/ 
```

我的目的是添加另一个返回字符的函数

*   分类为“短”（如果低于 5）、“中”（在 5-45 之间）和“长”（超过 45）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T17:09:24.790

试试这个。我的错。

```
DROP TYPE c_type
/

CREATE TYPE C_type AS OBJECT
(
   Cname VARCHAR (30),
   dob DATE,
   classification NUMBER,
   sample_clip BLOB,
   MEMBER FUNCTION get_age
      RETURN INTEGER,
   MEMBER FUNCTION get_class
      RETURN VARCHAR2
)
/

CREATE OR REPLACE TYPE BODY C_type
AS
   MEMBER FUNCTION get_age
      RETURN INTEGER
   IS
      currenttime_age   INTEGER;
   BEGIN
      currenttime_age := (SYSDATE - dob) / 365.25;
      RETURN currenttime_age;
   END get_age;

   MEMBER FUNCTION get_class
      RETURN VARCHAR2
   IS
      result   VARCHAR2 (10);
   BEGIN
      result :=
         CASE
            WHEN classification < 5 THEN 'short'
            WHEN classification BETWEEN 5 AND 45 THEN 'medium'
            WHEN classification > 45 THEN 'long'
         END;

      RETURN result;
   END get_class;
END;
/ 
```

# verilog - 关于错误“范围必须以常量表达式为界”

> ID：14171833
> 
> 赞同：1
> 
> 时间：2013-01-05T12:33:46.220
> 
> 标签：verilog

```
always @(numint or numfrac)
  begin
     begin : BIT_DET
     for (i=22;i>0;i=i-1)
       begin
         if (numint[i]==1'b1)
           begin

           ieeesign <= numsign ;
            ieeeexp [7:0] <=  127+i;
            ieeemant[22:0] <= { numint[i-1:0] , numfrac[22:i] } ;
            ieeeop [31:0] <=  { ieeesign, ieeeexp , ieeemant[22:0] } ;
            disable BIT_DET;
           end
     end
   end
  end
endmodule 
```

请告诉我如何消除错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T18:39:24.577

错误是`[i-1:0]`和`[22:i]`。部分选择不能有可变范围。位选择可以使用变量。每个位都`ieeemant`需要单独分配。

改变：

```
ieeemant[22:0] <= { numint[i-1:0] , numfrac[22:i] } ; 
```

到：

```
for(j=0; j<23; j+=1) begin
    ieeemant[j] <= (i+j < 23) ? numfrac[j+i] : numint[j-i];
end 
```

# javascript - 从预定义的 emailID 通过 HTML 发送电子邮件

> ID：14171834
> 
> 赞同：0
> 
> 时间：2013-01-05T12:33:48.983
> 
> 标签：javascript, jquery, html

我有一个反馈表，其中包含 5 个字段，如姓名、联系电话等，以及一个发送按钮。我希望每当用户输入字段并点击发送按钮时，应将包含这些字段值的电子邮件发送到特定的邮件 ID bur“来自我定义的”邮件地址，我不想要 mailto 选项，因为它允许用户从他的帐户。我知道这与 ASP.NET 但我需要简单的 HTML 或 javascript 或 jquery。

请帮忙。谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T14:20:08.600

您**需要**服务器端技术来发送电子邮件。

如果您想使用 JavaScript，那么[npm 中有许多用于发送电子邮件的包](https://npmjs.org/browse/keyword/smtp)。（请注意，这是*服务器端*JavaScript，浏览器不提供任何可用于此目的的工具）。

仅使用常见的客户端技术，您可以通过电子邮件提交表单数据最接近的[`mailto:`方案](http://isolani.co.uk/articles/mailto.html)是：

*   你已经拒绝了
*   无论如何大部分时间都不起作用

# ruby-on-rails - 你如何处理 Rails 中的此类路由错误

> ID：14171835
> 
> 赞同：0
> 
> 时间：2013-01-05T12:33:49.573
> 
> 标签：ruby-on-rails, rails-routing

我偶尔会在日志文件中看到这样的错误，我该如何处理。

```
Started GET "/w00tw00t.at.ISC.SANS.Win32:)" for 69.25.37.166 at 2013-01-02 00:06:05 +0000

ActionController::RoutingError (No route matches [GET] "/w00tw00t.at.ISC.SANS.Win32:)"):
  actionpack (3.2.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.6) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.6) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.6) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.6) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.1) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.6) lib/active_support/cache/strategy/local_cache.rb:72:in `call' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T12:39:30.140

尝试这样的事情：

**路线.rb**

```
match '*a', :to => 'errors#routingIssue' 
```

**创建错误控制器 - errors_controller.rb**

```
class ErrorsController < ApplicationController
  def routingIssue
    render_404
  end
end 
```

# sql - 将变量设置为存储过程中执行语句的结果

> ID：14171836
> 
> 赞同：0
> 
> 时间：2013-01-05T12:33:58.887
> 
> 标签：sql, sql-server-2008, dynamic-sql

你有关于变量语法的简明教程吗？这是存储过程的一部分：

```
Set @sql = 'Set ' + @calc + '= SUM(datalength(' + @column_name + '))/2 from ' + @table_name 
exec (@sql) 
```

它不起作用 - 我得到一个`Error converting data type varchar to numeric.`这是模拟的例子：

```
DECLARE @calc numeric(18,2)
DECLARE @sql nvarchar(1500), @column_name nvarchar(50), @table_name nvarchar(50)
Set @column_name = 'EID'
Set @table_name = 'CTY_SUPPORTED'
Set @sql = 'Select @calc = SUM(datalength(' + @column_name + '))/2 from ' + @table_name
exec (@sql)
print @calc 
```

我有兴趣将以下值归因于变量@calc：`SUM(datalength(column_x))/2 from table_x`

另外，如果您知道语法课程（最好不是百科全书）-非常感谢，再见！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T12:36:48.133

```
Set @sql = 'Select @calc = SUM(datalength(' + @column_name + '))/2 from ' + @table_name 
exec (@sql) 
```

# android - jquery中的click，tap，touchstart是什么时候？如何？

> ID：14171841
> 
> 赞同：1
> 
> 时间：2013-01-05T12:34:24.720
> 
> 标签：android, jquery, gestures

所以.. 我正在开发我的网站的移动版本，并注意到我的“评级”脚本让用户选择一定数量的星星在 iPad 上不起作用。

该功能在普通网络浏览器中与 jquery .on('click' 一起使用。

我用谷歌搜索并找到了点击和触摸启动

将功能更改为 .on('click touchstart' 使其可以在 iPad 上运行。太棒了！

我现在已经实现了一个表单，其中在选中复选框时会显示/隐藏一些额外的字段。我再次使用 .on('click' - 这次我在 Android 手机上尝试它。.on('click' 对复选框不起作用..？我尝试添加 touchstart 但没有成功。然后我添加了点击和宾果游戏有用。

做更多的研究我注意到其他人说不要绑定两个手势，因为在某些情况下，事件可能会被触发两次。很公平。

有人可以因此建议并解释“点击”如何与普通网络浏览器、Android 设备和 i 设备上的不同元素一起使用。

一个示例，说明如何仅使用一种手势来实现，但取决于设备的正确手势会很棒。

注意我只是使用普通的 jquery。

非常感谢

# c++ - 在 C++ 中返回 unique() 函数

> ID：14171843
> 
> 赞同：3
> 
> 时间：2013-01-05T12:34:29.493
> 
> 标签：c++, arrays, stl, iterator, unique

我遇到了以下函数，它对 main() 传递的数组进行排序，删除重复项，并返回唯一元素的数量。这是我很难缠住头的最后一点。

```
int reduce(long ar[], int n) {
  sort(ar, ar + n);
  return unique(ar, ar + n) - ar; // ??? 
} 
```

据我了解，unique() 返回一个指向存储数组中唯一值的段末尾的指针。但是我不明白为什么从迭代器中减去数组名称会导致 int 等于唯一元素的数量，或者为什么`unique(ar, ar+n)`不能将其类型转换为 int 以获得相同的结果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-05T12:36:09.900

> 为什么不能将 unique(ar, ar+n) 类型转换为 int 以获得相同的结果。

因为，正如你所说，`unique`返回一个指针。指针是内存地址，而不是索引。因此，将指针转换为 int 是没有意义的。

> 为什么从迭代器中减去数组名称会导致 int 等于唯一元素的数量

减去两个指针（到同一个数组中）计算它们之间的元素数。^*

* * *

[* 正如@Nawaz 在下面的评论中指出的那样，此结果已签名。所以`(p1 - p2) == -(p2 - p1)`。]

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-05T12:39:44.323

假设你有一个这样的数组：

```
{1, 2, 2, 3, 4, 4, 5} 
```

在调用之后`std::unique`，你可能会得到这个（谢谢你，Nawaz），新端之后的元素会像调用之前一样：

```
{1, 2, 3, 4, 5, 4, 5}
               ^ 
```

`std::unique`将迭代器返回到数组的新端，即箭头所在的位置。从那里减去数组的开头将返回唯一元素的数量是合乎逻辑的。如果你想更明确一点，你可以使用`return std::distance(ar, std::unique(ar, ar + n));`，当迭代器不支持减法时，它也可以工作。

# sql - 如何根据列值进行条件连接

> ID：14171845
> 
> 赞同：4
> 
> 时间：2013-01-05T12:34:52.193
> 
> 标签：sql, sql-server, tsql, stored-procedures, join

我有一张桌子：

```
Activities{ActivityId, ActivityTypeId, CreatedByUserId, ItemId, FollowId}
Items{ItemId, Title}
Followings{FollowId, FollowerId, FollowingId} 
```

在`Activity`表中`ItemId`或`FollowId`可以为空（从不两者）。
现在我需要以某种方式基于或`ActivityTypeId`或如果其中之一`ItemId`或`FollowId`如果为空来连接到`Items`表或`Followings`表。
如何编写这种条件查询？

如果`ItemId`为空，我需要加入`Followings`表。
如果`ItemId`不为空，我需要加入`Items`表。
我还问了，`ActivityTypeId`因为检查活动类型可能更容易，并以此为基础加入 Items 或 Follows 表。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T12:44:17.937

以下每一项都将返回不同的结果。第一个将返回（活动和项目）和（活动和关注）之间的每个关系。第二个将返回（活动和项目）和（活动和关注）之间关系的每个组合。尝试它们，看看哪个最适合您。

（注意：我没有测试过这些——我是徒手写的——可能有语法错误）

```
SELECT  a.ActivityId, 
        a.ActivityTypeId,
        a.CreatedByUserId,
        i.ItemId,
        i.Title,
        null as FollowId,
        null as FollowerId,
        null as FollowingId
FROM    Activities a INNER JOIN Items i ON a.ItemId = i.ItemId
UNION ALL
SELECT  a.ActivityId, 
        a.ActivityTypeId,
        a.CreatedByUserId,
        null as ItemId,
        null as Title,
        f.FollowId,
        f.FollowerId,
        f.FollowingId
FROM    Activities a INNER JOIN Followings f ON a.FollowId = f.FollowId 
```

或者：

```
SELECT  a.ActivityId, 
        a.ActivityTypeId,
        a.CreatedByUserId,
        i.ItemId,
        i.Title,
        f.FollowId,
        f.FollowerId,
        f.FollowingId
FROM    Activities a 
        LEFT OUTER JOIN Items i ON a.ItemId = i.ItemId
        LEFT OUTER JOIN Followings f ON a.FollowId = f.FollowId 
```

# build - 将 Common Lisp 编译为可执行文件

> ID：14171849
> 
> 赞同：39
> 
> 时间：2013-01-05T12:35:53.177
> 
> 标签：build, common-lisp, sbcl

我最近开始使用 SBCL 学习 Common Lisp。如何将我的 Lisp 程序编译成 Windows 二进制文件？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-10-29T08:30:22.653

制作hello.exe：

```
* (defun main () (print "hello"))

MAIN
* (sb-ext:save-lisp-and-die "hello.exe" :toplevel #'main :executable t)
[undoing binding stack and other enclosing state... done]
[saving current Lisp image into hello.exe:
writing 3160 bytes from the read-only space at 0x22000000
writing 2592 bytes from the static space at 0x22100000
writing 30134272 bytes from the dynamic space at 0x22300000
done]
> dir hello.exe
31,457,304 hello.exe
> hello.exe

"hello" 
```

31 MB 可执行文件！

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-05T12:44:12.010

使用`SB-EXT:SAVE-LISP-AND-DIE`. 有关详细信息，请参阅[http://www.sbcl.org/manual/#Saving-a-Core-Image](http://www.sbcl.org/manual/#Saving-a-Core-Image)。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-01-06T14:18:26.220

有几种工具可以做到这一点。您可以从[Buildapp](http://www.xach.com/lisp/buildapp/)开始。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-09-29T13:55:08.760

```
(defun main ()
    (format t "Hello, world!~%"))

(sb-ext:save-lisp-and-die "hello-world.exe"
:executable t
:toplevel 'main) 
```

# html - CSS“左”不起作用

> ID：14171855
> 
> 赞同：13
> 
> 时间：2013-01-05T12:36:43.017
> 
> 标签：html, css, positioning

我有 2 个 div，父母和孩子，我希望孩子的左侧（左边框）位于父母的中心。

为什么这段代码不起作用？那是`left: 50%`给孩子的，不工作。

```
<div id="outher">
    <div id="inner">

    </div>
</div> 
```

CSS：

```
#outher {
   width: 1000px;
   height: 1000px;
   background-color: #ccc;
}

#inner {
   width: 400px;
   height: 300px;
   background-color: #090;
   left: 50%;
} 
```

演示[http://jsfiddle.net/vrse2/5/](http://jsfiddle.net/vrse2/5/)

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-05T12:38:30.287

您需要设置`position`为`absolute`或`relative`：

```
#inner {
   width: 400px;
   height: 300px;
   background-color: #090;
   position: absolute;
   left: 50%;
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-05T12:42:05.330

CSS`left`仅适用于定位元素。

[引自 W3C](http://www.w3.org/wiki/CSS/Properties/left)

```
Values  <length> | <percentage> | auto | inherit
Initial value   auto
Applies to  positioned elements
Inherited   No 
```

尝试

```
#inner {
   width: 400px;
   height: 300px;
   background-color: #090;
   position: absolute;
   left: 50%;
} 
```

* * *

**好读**

1.  [**MDN：CSS 参考 -left（最好的恕我直言）**](https://developer.mozilla.org/en-US/docs/CSS/left)
2.  [W3C：CSS/属性/左](http://www.w3.org/wiki/CSS/Properties/left)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-05T12:38:36.787

您需要添加`position: absolute;`到您的 CSS。`left`用于绝对定位。

在你的情况下：

```
#inner {
   width: 400px;
   height: 300px;
   background-color: #090;
   position: absolute;
   left: 50%;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-05T12:39:12.910

采用：

```
margin-left: 50%; 
```

或者：

```
position:relative;
left:50%; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-05T12:43:05.020

***尝试以下方法：***

**HTML部分：**

```
<div id="outher">
    <div id="inner">

    </div>
</div> 
```

**CSS部分：**

```
#outher {
    width: 1000px;
    height: 1000px;
    background-color: #ccc;
}

#inner {
    width: 400px;
    height: 300px;
    background-color: #090;
    left: 50%;  
    margin:0 auto;
    position: absolute;
} 
```

我认为这可以帮助您解决问题。

# javafx-2 - JavaFX 2动画的圆形路径

> ID：14171856
> 
> 赞同：6
> 
> 时间：2013-01-05T12:36:43.797
> 
> 标签：javafx-2

如何在 JavaFX 2 中创建圆形（或椭圆） *javafx.scene.shape.Path ？*

我发现了一些使用 CubicCurveTo 的例子：

```
Path path = new Path();
path.getElements().add(new CubicCurveTo(30, 10, 380, 120, 200, 120)); 
```

但我不明白贝塞尔坐标。我需要一个完整的动画路径。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-05T14:36:49.560

您可以利用`ArcTo`path 元素来绘制圆形或椭圆形路径：

```
public class ArcToDemo extends Application {

    private PathTransition pathTransitionEllipse;
    private PathTransition pathTransitionCircle;

    private void init(Stage primaryStage) {
        Group root = new Group();
        primaryStage.setResizable(false);
        primaryStage.setScene(new Scene(root, 600, 460));

        // Ellipse path example
        Rectangle rect = new Rectangle(0, 0, 40, 40);
        rect.setArcHeight(10);
        rect.setArcWidth(10);
        rect.setFill(Color.ORANGE);
        root.getChildren().add(rect);

        Path path = createEllipsePath(200, 200, 50, 100, 45);
        root.getChildren().add(path);

        pathTransitionEllipse = PathTransitionBuilder.create()
                .duration(Duration.seconds(4))
                .path(path)
                .node(rect)
                .orientation(OrientationType.ORTHOGONAL_TO_TANGENT)
                .cycleCount(Timeline.INDEFINITE)
                .autoReverse(false)
                .build();

        // Cirle path example

        Rectangle rect2 = new Rectangle(0, 0, 20, 20);
        rect2.setArcHeight(10);
        rect2.setArcWidth(10);
        rect2.setFill(Color.GREEN);
        root.getChildren().add(rect2);

        Path path2 = createEllipsePath(400, 200, 150, 150, 0);
        root.getChildren().add(path2);

        pathTransitionCircle = PathTransitionBuilder.create()
                .duration(Duration.seconds(2))
                .path(path2)
                .node(rect2)
                .orientation(OrientationType.ORTHOGONAL_TO_TANGENT)
                .cycleCount(Timeline.INDEFINITE)
                .autoReverse(false)
                .build();
    }

    private Path createEllipsePath(double centerX, double centerY, double radiusX, double radiusY, double rotate) {
        ArcTo arcTo = new ArcTo();
        arcTo.setX(centerX - radiusX + 1); // to simulate a full 360 degree celcius circle.
        arcTo.setY(centerY - radiusY);
        arcTo.setSweepFlag(false);
        arcTo.setLargeArcFlag(true);
        arcTo.setRadiusX(radiusX);
        arcTo.setRadiusY(radiusY);
        arcTo.setXAxisRotation(rotate);

        Path path = PathBuilder.create()
                .elements(
                new MoveTo(centerX - radiusX, centerY - radiusY),
                arcTo,
                new ClosePath()) // close 1 px gap.
                .build();
        path.setStroke(Color.DODGERBLUE);
        path.getStrokeDashArray().setAll(5d, 5d);
        return path;
    }

    @Override
    public void start(Stage primaryStage) throws Exception {
        init(primaryStage);
        primaryStage.show();
        pathTransitionEllipse.play();
        pathTransitionCircle.play();
    }

    public static void main(String[] args) {
        launch(args);
    }
} 
```

ArcTo 功能的良好参考是[ArcTo (JavaFX 8)](http://download.java.net/jdk8/jfxdocs/javafx/scene/shape/ArcTo.html)。虽然是第 8 版，但功能的含义是相似的。
输出：
![在此处输入图像描述](../Images/69bcdde7470d825f6373f08556e034de.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-05-02T14:46:28.980

这是@Uluk Biy 答案的更新版本。

```
import javafx.animation.PathTransition;
import javafx.animation.PathTransition.OrientationType;
import javafx.animation.Timeline;
import javafx.application.Application;
import javafx.scene.Group;
import javafx.scene.Scene;
import javafx.scene.paint.Color;
import javafx.scene.shape.ArcTo;
import javafx.scene.shape.ClosePath;
import javafx.scene.shape.MoveTo;
import javafx.scene.shape.Path;
import javafx.scene.shape.Rectangle;
import javafx.stage.Stage;
import javafx.util.Duration;

public class PathTDemo extends Application
{

    private PathTransition pathTransitionEllipse;
    private PathTransition pathTransitionCircle;

    private void init(Stage primaryStage)
    {
        Group root = new Group();
        primaryStage.setResizable(false);
        primaryStage.setScene(new Scene(root, 600, 460));

        // Ellipse path example
        Rectangle rect = new Rectangle(0, 0, 40, 40);
        rect.setArcHeight(10);
        rect.setArcWidth(10);
        rect.setFill(Color.ORANGE);
        root.getChildren().add(rect);

        Path path = createEllipsePath(200, 200, 50, 100, 45);
        root.getChildren().add(path);

        pathTransitionEllipse = new PathTransition();
        pathTransitionEllipse.setDuration(Duration.seconds(4));
        pathTransitionEllipse.setPath(path);
        pathTransitionEllipse.setNode(rect);
        pathTransitionEllipse.setOrientation(OrientationType.ORTHOGONAL_TO_TANGENT);
        pathTransitionEllipse.setCycleCount(Timeline.INDEFINITE);
        pathTransitionEllipse.setAutoReverse(false);

        // Cirle path example
        Rectangle rect2 = new Rectangle(0, 0, 20, 20);
        rect2.setArcHeight(10);
        rect2.setArcWidth(10);
        rect2.setFill(Color.GREEN);
        root.getChildren().add(rect2);

        Path path2 = createEllipsePath(400, 200, 150, 150, 0);
        root.getChildren().add(path2);

        pathTransitionCircle = new PathTransition();
        pathTransitionCircle.setDuration(Duration.seconds(2));
        pathTransitionCircle.setPath(path2);
        pathTransitionCircle.setNode(rect2);
        pathTransitionCircle.setOrientation(OrientationType.ORTHOGONAL_TO_TANGENT);
        pathTransitionCircle.setCycleCount(Timeline.INDEFINITE);
        pathTransitionCircle.setAutoReverse(false);
    }

    private Path createEllipsePath(double centerX, double centerY, double radiusX, double radiusY, double rotate)
    {
        ArcTo arcTo = new ArcTo();
        arcTo.setX(centerX - radiusX + 1); // to simulate a full 360 degree celcius circle.
        arcTo.setY(centerY - radiusY);
        arcTo.setSweepFlag(false);
        arcTo.setLargeArcFlag(true);
        arcTo.setRadiusX(radiusX);
        arcTo.setRadiusY(radiusY);
        arcTo.setXAxisRotation(rotate);

        Path path = new Path();
        path.getElements().addAll(
                new MoveTo(centerX - radiusX, centerY - radiusY),
                arcTo,
                new ClosePath()); // close 1 px gap.
        path.setStroke(Color.DODGERBLUE);
        path.getStrokeDashArray().setAll(5d, 5d);
        return path;
    }

    @Override
    public void start(Stage primaryStage) throws Exception
    {
        init(primaryStage);
        primaryStage.show();
        pathTransitionEllipse.play();
        pathTransitionCircle.play();
    }

    public static void main(String[] args)
    {
        launch(args);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-29T08:04:00.580

我通过容器的rotateProperty 动画解决了同样的问题。只需两行即可创建动画。

```
 animationTimeLine = new Timeline(60, new KeyFrame(Duration.seconds(5), new KeyValue(circlePane.rotateProperty(), 360.0)));

    animationTimeLine.setCycleCount(INDEFINITE); 
```

# scrapy - Scrapy：如何更改图像名称

> ID：14171857
> 
> 赞同：0
> 
> 时间：2013-01-05T12:36:42.783
> 
> 标签：scrapy

我正在使用scrapy做一个项目。我在 html 中获得了图像名称和图像 url，如何使用该名称而不是哈希名称来命名该图像？

我得到了这个网址：[http](http://a3.mzstatic.com/us/r1000/104/Purple/v4/55/35/20/55352022-0aba-260b-76ed-314eacd8c1fc/mzm.zqqzrdix.175x175-75.jpg) ://a3.mzstatic.com/us/r1000/104/Purple/v4/55/35/20/55352022-0aba-260b-76ed-314eacd8c1fc/mzm.zqqzrdix.175x175-75.jpg 它的名字是：iBook 我想让我的scrapy 下载这张图片并用iBook 重命名它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T02:11:57.503

您必须使用图像管道和类似的东西

```
class MyImagesPipeline(ImagesPipeline):

    def image_key(self, url):
        image_guid = url.split('/')[-1]
        return 'full/%s' % (image_guid) 
```

它将使用原始图像名称。对于自定义文件名，使用类似

`return 'ibook.jpg'`但它会用相同的文件覆盖所有图像。当心

从这个 Scrapy 图像下载中获得更多想法[如何使用自定义文件名](https://stackoverflow.com/questions/6194041/scrapy-image-download-how-to-use-custom-filename?rq=1)

# css - spring mvc 在哪里放置 css/js/img 文件

> ID：14171862
> 
> 赞同：13
> 
> 时间：2013-01-05T12:38:15.197
> 
> 标签：css, spring-mvc

0 并且有问题将公共文件放在[哪里我试过在 spring-mvc 应用程序中放置图像/CSS 的位置？](https://stackoverflow.com/questions/4169266/where-to-place-images-css-in-spring-mvc-app)这个解决方案，但它不适合我

我试图将我的公用文件夹放在`WEB-INF`外面目录中的每个位置，但仍然没有

web.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.springframework.org/schema/beans 
http://www.springframework.org/schema/beans/spring-beans-3.0.xsd 
http://www.springframework.org/schema/mvc 
http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd 
http://www.springframework.org/schema/context 
http://www.springframework.org/schema/context/spring-context-3.0.xsd">

  <display-name>s-mvc</display-name>
  <servlet>
    <servlet-name>frontController</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>frontController</servlet-name>
    <url-pattern>/</url-pattern>
  </servlet-mapping>

  <mvc:resources mapping="/css/**" location="/css/"/>

</web-app> 
```

前端控制器-servlet.xml

```
<mvc:annotation-driven/>

    <context:component-scan base-package="pl.skowronline.controller" />

    <bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="prefix" value="/WEB-INF/views/"/>
        <property name="suffix" value=".jsp"/>
    </bean> 
```

以及我如何调用css文件 `<link type="text/css" href="/css/bootstrap.css" rel="stylesheet" />`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-14T20:50:32.930

我认为您对`web.xml`和感到困惑`application-context.xml`。

`web.xml`应该包含这样的xsd`webapp`声明，以及 Dispatcher Servlet 的映射。

```
 <?xml version="1.0" encoding="UTF-8"?>
 <web-app version="2.4" xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee   http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">
  <display-name>s-mvc</display-name>
  <servlet>
    <servlet-name>frontController</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>frontController</servlet-name>
    <url-pattern>/</url-pattern>
  </servlet-mapping>
 </web-app> 
```

其中`application-context.xml`包含`spring-framework`xsd 声明，如下所示

```
<?xml version="1.0" encoding="UTF-8"?>
 <beans xmlns="http://www.springframework.org/schema/beans"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xmlns:mvc="http://www.springframework.org/schema/mvc"
     xmlns:context="http://www.springframework.org/schema/context"
     xsi:schemaLocation="http://www.springframework.org/schema/mvc  http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
     http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
     http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

 <mvc:resources mapping="/css/**" location="/css/"/>
 <mvc:annotation-driven />
 <context:component-scan base-package="pl.skowronline.controller" />

 <bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix" value="/WEB-INF/views/"/>
    <property name="suffix" value=".jsp"/>
 </bean>

</beans> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-14T10:27:57.407

JB Nizet 的回答是正确的。但是，您的应用程序的问题似乎不仅仅是放置 css/js 文件的地方。对于 Spring MVC，你必须把所有配置都正确，否则它将无法工作。

为简单起见，只需将 css 文件夹放在 WEB-INF 文件夹（/WEB-INF/css）中，这样您就可以在页面中这样访问它：

```
<a href="<c:url value='/css/bootstrap.css'/>" 
```

该链接应将您直接带到 css 文件。如果有效，您可以将`<a>`标签更改`<link>`为 CSS 样式的标签。

如果它不起作用，有几件事需要检查：

1) 禁止您访问文件的 Spring Security 约束

2）各种过滤器/拦截器的影响可能会阻碍您的文件访问

3) web.xml 中的 Servlet 配置。确保没有调度程序拦截您对 CSS 文件的访问。

通常，`<mvc:resources>`会为您做以上所有事情。但万一它失败了，你可能想看看。

**对于`<mvc:resources>`错误：**

> 匹配的通配符是严格的，但找不到元素“mvc:resources”的声明。

看起来您还没有声明正确的架构。例如，您应该在文件的开头添加以下行：

> http://www.springframework.org/schema/beans [http://www.springframework.org/schema/beans/spring-beans-3.0.xsd](http://www.springframework.org/schema/beans/spring-beans-3.0.xsd) [http://www.springframework.org/schema/mvc](http://www.springframework.org/schema/mvc) [http:// /www.springframework.org/schema/mvc/spring-mvc-3.0.xsd](http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd) [http://www.springframework.org/schema/context](http://www.springframework.org/schema/context) [http://www.springframework.org/schema/context/spring-context-3.0 .xsd](http://www.springframework.org/schema/context/spring-context-3.0.xsd) >

更新：

作为您的回应，问题似乎在这里：

```
<servlet-mapping>
    <servlet-name>frontController</servlet-name>
    <url-pattern>/</url-pattern>
  </servlet-mapping> 
```

您应该将其更改为：

```
<servlet-mapping>
    <servlet-name>frontController</servlet-name>
    <url-pattern>/*.html</url-pattern>
  </servlet-mapping> 
```

这将保存 css/images 文件的 URL，以免与控制器（您的 servlet）的 URL 映射冲突，并让 mvc:resources 发挥作用。当然，您可以对“html”部分使用您想要的任何扩展名。对于一个漂亮的URL，我们可以使用[Turkey URL rewrite](http://tuckey.org/urlrewrite/)之类的库来解决问题

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-05T12:47:01.573

这在文档的[以下部分中进行了描述](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/htmlsingle/spring-framework-reference.html#mvc-config-static-resources)。按照那里给出的说明进行操作，然后更改您的`href`:`/css/bootstrap.css`表示：在*server*`css`根目录下的文件夹中。因此，除非您的应用程序被部署为根应用程序，否则它将无法工作，因为您需要预先添加应用程序的上下文路径：

 *```
href="<c:url value='/css/bootstrap.css'/>" 
```

这意味着：在 css 文件夹中，就在*webapp 的根目录下*。如果您的 webapp 的上下文路径是`/myFirstWebApp`，则生成的 href 将是

```
href="/myFirstWebApp/css/bootstrap.css" 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-08T11:22:34.113

您可以尝试使用上下文路径来定位资源文件。

```
<link type="text/css" href="${pageContext.request.contextPath}/css/bootstrap.css" rel="stylesheet" /> 
```

阅读[本文](http://docs.oracle.com/javaee/1.4/tutorial/doc/JSPIntro7.html)以了解更多信息。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-03-18T08:16:31.390

我也有同样的问题。请执行以下步骤以使其正常工作，这对我和我的队友也很有效。

Step1 :- 在 Web-INF 中创建一个名为“resources”的文件夹

Step2 :- 上传你的引导程序、css 和 js（如果你已经有的话，或者如果你想在这个文件夹中写的话）

第 3 步：- 现在更新您的调度程序 servlet xml，如下所示

1.  在 beans 标签中添加下面的代码

    ```
    <mvc:resources mapping="/resources/**" location="/resources/" />
            <mvc:annotation-driven /> 
    ```

    2.  将以下代码添加到此 xml 顶部的 xsi:schemaLocation

        [http://www.springframework.org/schema/mvc](http://www.springframework.org/schema/mvc) [http://www.springframework.org/schema/mvc/spring-mvc-4.0.xsd](http://www.springframework.org/schema/mvc/spring-mvc-4.0.xsd) ">

第 4 步：- 现在您可以在代码中使用 css、bootstrap 资源，如下所示

```
<header class="custem_header_bg"><img src="resources/img/product_banner.png" class="img-responsive"> </header> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-01T09:32:26.340

您只能按照以下步骤设置基于 JSP。然后就不需要在 web.xml 中设置 mvc:resources 了。只需将基础设置如下。我们也可以使用头文件来设置这个值。然后我们可以将该 header.jsp 包含到我们在应用程序中使用的任何页面中。然后我们不需要在每个 JSP 中设置这个值。

您需要设置`<base/>`如下...

```
<c:set var="req" value="${pageContext.request}" />

<c:set var="url"> ${req.requestURL} </c:set>
<c:set var="uri" value="${req.requestURI}" />

<head>
    <title></title>
    <base href="${fn:substring(url, 0, fn:length(url) - fn:length(uri))}${req.contextPath}/" /> 
```

然后你可以像下面这样导入任何 JS 或 CSS..

```
<script src="assets/js/angular/angular.js"></script> 
```*

# java - 是与 struts 2.3.4 捆绑的 JSON 插件

> ID：14171879
> 
> 赞同：-6
> 
> 时间：2013-01-05T12:39:45.780
> 
> 标签：java, javascript, jquery, struts2

我在 netbeans 中使用 Struts 2.3.4。我需要在我的项目中实现 AJAX 功能。在开始之前，我已经用谷歌搜索了 struts，并在某处阅读了 struts 2.1+ JSON 插件与 struts 发行版捆绑在一起的内容。我正在按照网上的教程来实现 JSON，但我无法这样做。任何人都可以请

1.  告诉我如何在我的 netbeans IDE 中获取 Struts 2.3.4 发行版随附的列表插件

2.  给我一些链接到 Struts Ajax 实现的详细解释，并为使用 Struts 动态创建的表添加自动完成功能。

我已经使用 jQuery 使用核心 java 和 javascript 实现了所有这些，但我是 Struts 的新手......

注意我在客户端使用 jQuery javascript 框架

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T13:46:46.070

是的，JSON 插件与 Struts 2.3.4 捆绑在一起。

获取捆绑插件列表的最简单方法是执行以下操作`ls`（或者`dir`如果您不幸在 Windows 下运行）：

```
[...b/struts/struts-2.3.4.1/lib]$ ls *plugin*
struts2-codebehind-plugin-2.3.4.1.jar      struts2-osgi-plugin-2.3.4.1.jar
struts2-config-browser-plugin-2.3.4.1.jar  struts2-oval-plugin-2.3.4.1.jar
struts2-convention-plugin-2.3.4.1.jar      struts2-pell-multipart-plugin-2.3.4.1.jar
struts2-dojo-plugin-2.3.4.1.jar            struts2-plexus-plugin-2.3.4.1.jar
struts2-dwr-plugin-2.3.4.1.jar             struts2-portlet-plugin-2.3.4.1.jar
struts2-embeddedjsp-plugin-2.3.4.1.jar     struts2-rest-plugin-2.3.4.1.jar
struts2-gxp-plugin-2.3.4.1.jar             struts2-sitegraph-plugin-2.3.4.1.jar
struts2-jasperreports-plugin-2.3.4.1.jar   struts2-sitemesh-plugin-2.3.4.1.jar
struts2-javatemplates-plugin-2.3.4.1.jar   struts2-spring-plugin-2.3.4.1.jar
struts2-jfreechart-plugin-2.3.4.1.jar      struts2-struts1-plugin-2.3.4.1.jar
struts2-jsf-plugin-2.3.4.1.jar             struts2-testng-plugin-2.3.4.1.jar
struts2-json-plugin-2.3.4.1.jar            struts2-tiles-plugin-2.3.4.1.jar
struts2-junit-plugin-2.3.4.1.jar 
```

至于你的第二个问题，我不确定“将自动完成添加到表格中”是什么意思。表格不是输入元素。

从字面上看，有成千上万个 jQuery 自动完成示例，并且 JSON 结果从文档中应该是不言自明的。如果不是，请提出具体问题。

如果可能的话，我会考虑使用[Struts 2 jQuery 插件](http://code.google.com/p/struts2-jquery/)，因为看起来你可能有点过头了；它可以使某些功能更容易实现，并且有一组强大的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T18:39:29.757

如果你想使用带有 JSON 插件的 Struts2，那么你需要下载两个 jar 中的任何一个。

1.  jsonplugin0.33.jar 或 jsonplugin0.34.jar
2.  struts-jasonplugin2.1.1.jar

对于第一个（来自第一个的两个中的一个）：作为结果类型，您需要在 struts.xml 中输入 json 类型，其中提到的类为`com.googlecode.json.JSONResult`.

而对于第二个，您需要使用：`org.apache.json.JSONResult`。

# php - 使用 CodeIgniter 对控制器的 AJAX 调用不成功

> ID：14171880
> 
> 赞同：2
> 
> 时间：2013-01-05T12:40:01.663
> 
> 标签：php, jquery, ajax, codeigniter

我已经开始了我的第一个 CodeIgniter 项目，并且在对我的控制器进行 Ajax 调用时遇到了很多麻烦。我在控制器中放了一个简单的 echo 语句，但在浏览器中出现控制台错误 - `POST http://localhost:8888/lotto/get_results/ 404 (Not Found)`。这让我相信我没有在 AJAX 调用中正确引用控制器。下面是相关代码。

**查看 - index.php**

```
$(document).ready(function(){
    $('#notification').hide();
    retrieveValues();
});

$('.numDraws').change(function(){
    retrieveValues();
});

function retrieveValues() {
    if (!checkConnection()) {
        $('#notification').html("<span>No internet connection available</span>");
        $('#notification').slideDown(500, 'linear');
        return;
    } else {
        $('#notification').slideUp(500, 'linear');
        $('#loading').fadeIn(200);
        var numOfDraws = parseInt($('.numDraws').find('option:selected').val());
        if (isNaN(numOfDraws)) {
            numOfDraws = "ALL"; 
        }
        $.ajax({
            url: "/lotto/get_results/",
            type: "post",
            data: {numOfDraws:numOfDraws},
            success: function (data) {
                // var json = $.parseJSON(data);
                // setTimeout(function(){displayResults(json)} ,1200);
                alert(data);
            }
        }); 
    }

} 
```

**控制器 - lotto.php**

```
<?php 

class Lotto extends CI_Controller {

    public function __construct()
    {
        parent::__construct();
        $this->load->model('lotto_model');
    }

    public function index()
    {
        $data['title'] = "Home";

        $this->load->view('templates/header', $data);
        $this->load->view('lotto/index');
        $this->load->view('templates/footer');

    }

    public function get_results($numOfDraws) {
        //$data['results'] = $this->lotto_model->get_results(1);
        echo "Reached the controller";
    }
}
?> 
```

同样在我的配置文件中，我有以下内容：

```
$config['base_url'] = '';
$config['index_page'] = '';
$config['uri_protocol'] = 'AUTO'; 
```

任何帮助将不胜感激 - 我在这方面花了很多时间，但似乎无法弄清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T12:51:46.033

您可能会遇到错误，因为该方法需要您未提供的参数（并且路由器无法正确调用）。试试这 2 件事：

1）使用内置函数创建一个 url（以避免出现问题）：

```
url: "<?php echo site_url('lotto/get_results');?>" 
```

2）由于该方法看起来应该接收一个 POST 变量，而不是一个 GET 变量，因此您需要以正确的方式获取它：

```
public function get_results() {
        $numOfDraws = $this->input->post('numOfDraws');
        //do something with $numOfDraws here
        echo $numOfDraws; // just to check the value is being passed
    } 
```

如果变量来自 HTTP GET 请求，则将参数传递给方法有效，这不是您的情况。如果这是您的意图，那么您需要删除 AJAX 调用中的“POST”类型，并在构建 AJAX url 时提供一个值。有点像

```
url: "<?php echo site_url('lotto/get_results');?>/"+numOfDraws; 
```

在这种情况下，您的方法将是`get_result($draws)`, 带有参数

# android - 我可以在 windows pc 上开发 IOS 应用程序和移动 sw 还是必须购买 mac？

> ID：14171883
> 
> 赞同：-5
> 
> 时间：2013-01-05T12:40:06.170
> 
> 标签：android, ios, macos, windows-8, windows-phone-7.1.1

我想开发 ios 编程和其他移动编程，所以我想买一个 mac。但它们对我来说很贵，其他拥有更多内存和更好处理器的电脑比 mac 更脆。所以你认为，我可以在虚拟机中开发 ios。我听说这种情况有点困难，因为所有的电脑都无法处理。我要购买的电脑装有 Windows 8：

*   16 GB RAM，DDR3，Intel Core i7 3632QM，2,20 GHz，2 GB Nvidia GT630M Optimus

另一方面，mac 具有以下属性：

*   苹果 MACBOOKPRO，核心 İ5 3210M，2.5GHZ-4GB DDR3-500 GB-CAM-BT-MCX LION，13.3"- Intel Graphics 4000

那么，哪个最适合开发 ios、android 和 windows phone 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T12:44:21.570

我敢打赌你可以在 Windows 上以某种方式提取它。我的意思是 .. 在理论中 :) [重建编译器，复制头文件并重做设备驱动程序]

**但实际上你不能没有 osx**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T12:44:43.810

iOS 开发必须在 OS X 下进行。正确的做法是购买 Mac 硬件。如果您愿意，您可以构建一个[Hackintosh](http://www.hackintosh.com/)，但您不能在虚拟机中安装 OS X。

如果您想针对多个平台（Windows Phone、iOS、Android），您可以做的是使用跨平台开发工具。您可能（我还没有检查过）找到一个在 Windows 下运行并且可以为 iOS 编译的软件。但是，您仍然有上传到 App Store 的问题，因为该过程现在已集成到 Xcode（Apple 的开发环境）中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T12:51:30.223

您可以在虚拟机上安装 osx，但这是不合法的。

您也可以使用一些跨平台的移动 sdk，例如[Marmalde](https://www.madewithmarmalade.com/)，在 Windows/Visual Studio 上开发并购买便宜的 Macbook 或 Mac Mini 用于测试/发布到应用商店。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-05T13:39:12.607

请记住，如果您购买一些旧 Mac，它可能无法与 SDK 一起使用。它需要 Intel cpu，不支持旧的 PowerPc。甚至不要尝试在 VirtualBox 上安装 iAtkos，因为它是非法的。

# python - 使用 AJAX 在 jinja2 Framework for Python 中动态加载行

> ID：14171887
> 
> 赞同：4
> 
> 时间：2013-01-05T12:41:02.273
> 
> 标签：python, ajax, google-app-engine, jinja2

当用户到达页面末尾时，我正在尝试动态加载新内容。我的网络应用程序使用 gae-python。我使用 ajax & jquery 来更新 html 中的查询。

**HTML**：

```
{% block content %}

<div class="hero-unit special-padding">
  {% for h in hots %}
    {{ h.imageid.get().render() | safe }}

  {% endfor %}

{% include 'pager.html' %}
 </div>
{% endblock %} 
```

**jQuery & AJAX：**

```
 $(window).scroll(function () {
     if ($(window).scrollTop() + $(window).height() > $('.hero-unit').height() - 100 && !isLoading) {$('#loadpage').click(function() {
        var page=$('#loadpage').attr('name');
        $.ajax({
            type: "POST",
            dataType:"json",
            url: '/loadpage', 
            data : {'page': page}, 
            success: updatehtml,  
        });
        return false;
        });
                    });

    function updatehtml(e){
        for (var i = 0; i < e.length; i++) {
            var html= "{{ "+e[i]['imageid']+".get().render() | safe }}";
            $('.hero-unit').append(html);
        }
    } 
```

我序列化数据存储实体并作为 json 传递。它将更新 HTML

```
{{ datastoreKey.get().render()|safe }} 
```

现在我希望 jinja2 框架`.render()`在 ajax 更新我的 HTML 时调用 python 函数。

我知道它可以通过用javascript编写整个HTML代码来完成，但我想知道是否有其他简单/更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T13:53:16.883

```
function updatehtml(e){
        for (var i = 0; i < e.length; i++) {
            var html= "{{ "+e[i]['imageid']+".get().render() | safe }}";
            $('.hero-unit').append(html);
        }
    } 
```

当有人请求您的 URI 时，只会呈现一次。

因此，该行将`var html= "{{ "+e[i]['imageid']+".get().render() | safe }}";`被渲染并包含对您的porpuse 的无效渲染。

您需要使用 html 从您的 lodapage 处理程序进行响应才能做到这一点。只需将其“移动/采用”`html= "{{ "+e[i]['imageid']+".get().render() | safe }}";`到您的加载页面处理程序，然后使用简单的模板文件或内联渲染它，并使其成为 html 响应。AJAX 请求将能够获取 html 格式的数据，然后您可以轻松地附加它。您必须小心 id，不要让它们依赖于 html，而是依赖于模型/id，以免重复等。

之后，您只需添加可以从`e`参数中轻松获取的 html

# java - 我们真的需要EDT吗？

> ID：14171892
> 
> 赞同：1
> 
> 时间：2013-01-05T12:42:13.493
> 
> 标签：java, multithreading, swing, thread-safety, awt

很多时候我想为什么`Java`强迫我们在工作时使用[EDT](http://en.wikipedia.org/wiki/Event_dispatching_thread)`Swing`？`Swing`从任何`Thread`或换句话说它可以是更新组件会不会容易得多`multithreaded`。

确实，`SwingUtilities.invokeAndWait`并且`SwingUtilities.invokeLater`帮助我们排列`Swing`事件，但是，如果`GUI` 组件可以从任何其他`Thread`.

而且，Java 制造商真的忘记了`Swing`线程安全吗？

如果 swing 是多线程的，可能会出现什么问题？由于这个原因，我的 Java 程序已经“冻结”了十几个时间：/

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-05T12:47:01.397

> 如果 swing 是多线程的，可能会出现什么问题？Java 开发者真的忘记了使 Swing 线程安全吗？

已经进行了许多尝试来创建多线程 GUI，但[大多数都失败](https://stackoverflow.com/a/13520062/829571)了，因为它们无法正常工作，或者它们过于复杂而无法正确使用。单线程模型是标准且最简单的解决方案。

> 由于这个原因，我的 Java 程序“冻结”了十几次

那是因为您没有按照应有的方式使用 Swing。它是单线程的这一事实并不能阻止您在另一个线程上运行长任务（您应该这样做以防止冻结）。您可以[在 Swing 教程中的并发中](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)了解更多信息。尤其：

> 谨慎使用并发对于 Swing 程序员来说尤为重要。一个编写良好的 Swing 程序使用并发来创建一个永远不会“冻结”的用户界面——该程序总是响应用户交互，无论它在做什么。要创建响应式程序，程序员必须了解 Swing 框架如何使用线程。

# javascript - 使用目标C处理嵌入在json中的javascript代码

> ID：14171895
> 
> 赞同：1
> 
> 时间：2013-01-05T12:42:44.687
> 
> 标签：javascript, objective-c

我正在构建的 iPad 应用程序有一些由数据驱动的行为。通过数据，我的意思是一些嵌入在从服务器端发送的 json 文件中的 javascript 代码。

以以下为例：

```
if ((q12+q13+q14*2-2)>0){
    goto(q45);
    show(q1,q2);
}else{
    goto(q34);  
} 
```

从 iOS 端，我知道 q12/13/14 的值，我想执行 javascript 中定义的逻辑并接收结果，以便我可以执行各种界面行为。可能吗？我使用 UIWebView 标头我可以从 javascript 中获取结果，但我的情况是 javascript 在 json 中而不是 HTML url 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T15:37:56.160

确实可以让 UIWebView 执行任意 JavaScript 并捕获作为结果返回的任何值。不过，我不确定我是否完全理解您正在执行的代码的性质，所以我只是演示了下面的基本方法。如果您可以提供有关您希望执行的 JavaScript 逻辑类型的更具体的详细信息，我可能会提供更多帮助。

```
UIWebView *webView = [[UIWebView alloc] init];

NSNumber *q1 = @20;
NSNumber *q2 = @30;

// Create a simple JavaScript addition statement.
NSString *javascript;
javascript = [NSString stringWithFormat:@"%@ + %@", q1, q2];

// Note, the result will always be an NSString
NSString *result = [webView stringByEvaluatingJavaScriptFromString:javascript];
// result is @"50" 
```

我还想更正一些术语。您说“嵌入在 JSON 文件中的 JavaScript 代码”。实际上，JSON 符号格式只能包含名称/值对。它不能包含可执行的 JavaScript 代码。也许您的意思是说您正在从服务器加载 JavaScript 文件？

最后，当像这样执行从应用程序外部加载的代码时，您应该始终采取适当的技术设计预防措施，以防止有人试图欺骗您的应用程序加载的恶意 JavaScript。

# node.js - 使用 Express.JS 发送额外的 http 标头

> ID：14171899
> 
> 赞同：36
> 
> 时间：2013-01-05T12:42:55.530
> 
> 标签：node.js, express

我有一些使用 Express.JS 提供的静态页面。设置很简单：

```
var app = express();

app.configure(function(){
  app.use(express.static(path.join(application_root, "StaticPages")));
  app.use(express.errorHandler({ dumpExceptions: true, showStack: true }));
}); 
```

我希望响应包含一个额外的 http 标头（**Access-Control-Allow-Origin:***）。应该放在哪里？我尝试了以下示例，但标题当然只出现在默认页面上：

```
app.get('/', function(req, res){
  res.setHeader("Access-Control-Allow-Origin", "*");
  res.send('Hello World');
}); 
```

谢谢。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-01-05T13:55:45.163

> 我尝试了下面的示例，但标题当然只出现在默认页面上

是的，那是因为您只为`GET /`路线定义了它，而不是为其他路径定义了它。您应该改用中间件。

如果您希望为所有请求设置标头：

```
app.configure(function(){
  app.use(function(req, res, next) {
    res.setHeader("Access-Control-Allow-Origin", "*");
    return next();
  });
  app.use(express.static(path.join(application_root, "StaticPages")));
  app.use(express.errorHandler({ dumpExceptions: true, showStack: true }));
}); 
```

如果您只想为静态文件夹执行此操作，则没有通用方法。您可能可以更改 express.static（来自[connect.static](http://www.senchalabs.org/connect/static.html)）。另一种方法是匹配 url 并在 url 匹配时设置标题。

```
app.configure(function(){
  app.use(function(req, res, next) {
    var matchUrl = '/StaticFolder';
    if(req.url.substring(0, matchUrl.length) === matchUrl) {
      res.setHeader("Access-Control-Allow-Origin", "*");
    }
    return next();
  });
  app.use(express.static(path.join(application_root, "StaticPages")));
  app.use(express.errorHandler({ dumpExceptions: true, showStack: true }));
}); 
```

注意：中间件需要在路由之前才能生效，也就是说你不能把中间件放在静态中间件之后。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-08-30T15:37:34.527

其他方式 ：

```
app.use(express.static(
    path.join(application_root, "StaticPages"),
    {
        setHeaders: (res) => {
            res.setHeader('Access-Control-Allow-Origin', '*')
        }
    }
)) 
```

# javascript - 错误'$.type 不是函数 var obj = $.type(pref);' 在 jqGrid 中提交表单时

> ID：14171900
> 
> 赞同：0
> 
> 时间：2013-01-05T12:43:03.177
> 
> 标签：javascript, jquery, jqgrid, grid

最近，我在使用 jqGrid 来表示我的业务数据集，我发现 jqGrid 有编辑/添加/删除/查看功能，所以我尝试使用它。但是我遇到了一个问题，我尽力而为后无法解决。

我按照本网站的示例进行操作：

```
jQuery("#deptGrid").jqGrid('navGrid', '#deptNav', {
    view : true
}, 
{
    jqModal : true,
    checkOnUpdate : true,
    savekey : [ true, 13 ],
    navkeys : [ true, 38, 40 ],
    checkOnSubmit : true,
    reloadAfterSubmit : false,
    closeOnEscape : true,
    bottominfo : "Fields marked with (*) are required"
}, {
    jqModal : true,
    checkOnUpdate : true,
    savekey : [ true, 13 ],
    navkeys : [ true, 38, 40 ],
    checkOnSubmit : true,
    reloadAfterSubmit : false,
    closeOnEscape : true,
    bottominfo : "Fields marked with (*) are required"
}, {
    reloadAfterSubmit : false,
    jqModal : false,
    closeOnEscape : true
}, {
    closeOnEscape : true
}, {
    navkeys : [ true, 38, 40 ],
    height : 250,
    jqModal : false,
    closeOnEscape : true
}); 
```

**更新：**以下是我的全部内容：

```
<link rel="stylesheet" type="text/css" href="<%=BASE_PATH %>admin/styles/stylesheet.css" />
<link rel="stylesheet" type="text/css" href="<%=BASE_PATH %>admin/js/jquery/ui/themes/ui-lightness/ui.all.css" />

<link rel="stylesheet" type="text/css" media="screen" href="<%=BASE_PATH %>jqGrid4.4.1/themes/redmond/jquery-ui-1.8.2.custom.css" />
<link rel="stylesheet" type="text/css" media="screen" href="<%=BASE_PATH %>jqGrid4.4.1/themes/ui.jqgrid.css" />
<link rel="stylesheet" type="text/css" media="screen" href="<%=BASE_PATH %>jqGrid4.4.1/themes/ui.multiselect.css" />

<!-- Including JS -->
<script type="text/javascript" src="<%=BASE_PATH %>admin/js/jquery/jquery.min.js"></script>
<script type="text/javascript" src="<%=BASE_PATH %>admin/js/jquery/jquery-ui-1.8.custom.min.js"></script>
<script type="text/javascript" src="<%=BASE_PATH %>admin/js/jquery/superfish/js/superfish.js"></script>
<script type="text/javascript" src="<%=BASE_PATH %>admin/js/jquery/tab.js"></script>
<script type="text/javascript" src="<%=BASE_PATH %>admin/js/global.js"></script>
<script type="text/javascript" src="<%=BASE_PATH %>admin/js/jquery/thickbox/thickbox.js"></script>
<link  rel="stylesheet" type="text/css" href="<%=BASE_PATH %>admin/js/jquery/thickbox/thickbox.css" />
<script type="text/javascript" src="<%=BASE_PATH %>admin/js/jquery/jquery.form.js"></script>
<script type="text/javascript" src="<%=BASE_PATH %>admin/js/jquery/jquery.validate.js"></script>
<script type="text/javascript" src="<%=BASE_PATH %>admin/js/jquery/jquery-ui-timepicker-addon.js"></script>
<script src="<%=BASE_PATH %>admin/js/jquery/ui/jquery.bgiframe-2.1.2.js" type="text/javascript"></script>
<script src="<%=BASE_PATH %>admin/js/jquery/ui/jquery.ui.core.js" type="text/javascript"></script>
<script src="<%=BASE_PATH %>admin/js/jquery/ui/jquery.ui.widget.js" type="text/javascript"></script>
<script src="<%=BASE_PATH %>admin/js/jquery/ui/jquery.ui.mouse.js" type="text/javascript"></script>
<script src="<%=BASE_PATH %>admin/js/jquery/ui/jquery.ui.button.js" type="text/javascript"></script>
<script src="<%=BASE_PATH %>admin/js/jquery/ui/jquery.ui.draggable.js" type="text/javascript"></script>
<script src="<%=BASE_PATH %>admin/js/jquery/ui/jquery.ui.position.js" type="text/javascript"></script>
<script src="<%=BASE_PATH %>admin/js/jquery/ui/jquery.ui.resizable.js" type="text/javascript"></script>
<script src="<%=BASE_PATH %>admin/js/jquery/ui/jquery.ui.dialog.js" type="text/javascript"></script>
<script src="<%=BASE_PATH %>admin/js/jquery/ui/jquery.effects.core.js" type="text/javascript"></script>
<script src="<%=BASE_PATH %>js/kevinshi.js" type="text/javascript"></script>

<script src="<%=BASE_PATH %>jqGrid4.4.1/js/jquery.jqGrid.src.js" type="text/javascript"></script>
<script src="<%=BASE_PATH %>jqGrid4.4.1/js/i18n/grid.locale-en.js" type="text/javascript"></script> 
```

更新：每当我单击按钮进行编辑/添加/删除时，它总是会在萤火虫中导致错误：

```
$.type is not a function 
var obj = $.type( pref ); 
```

我将其跟踪到 jqGrid 源代码中，此错误发生在文件的第 52 行，`jquery.jqGrid.src.js`如下所示：

```
stripPref : function (pref, id) {
var obj = $.type( pref ); // Happened at this line.
if( obj == "string" || obj =="number") {
pref = String(pref);
id = pref !== "" ? String(id).replace(String(pref), "") : id;
}
return id;
}, 
```

所以，就在这一刻，我可以说`jQuery.type()`方法找到了，但是我已经包含了 library `jquery.min.js`，我很困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T13:32:14.980

将两个 JavaScript 文件多次包含在同一个模块的实现中是错误的。此外，以正确的顺序包含 JavaScript 文件也很重要。此外，您不应包含任何您不使用的插件。

通常一种用途

```
i18n/grid.locale-en.js
jquery.jqGrid.src.js 
```

在开发一些解决方案和使用过程中

```
i18n/grid.locale-en.js
jquery.jqGrid.min.js 
```

在最终解决方案中。请参阅[文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3afirst_grid#html_file)。

应该在任何 jqGrid JavaScript 文件*之前*包含 jQuery 。`ui.jqgrid.css`还需要包括 of和 jQuery UI CSS。

如果您仍然有错误，您应该发布`jquery.jqGrid.src.js`错误发生位置的确切行号。您应该发布您使用的更完整的 JavaScript 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T21:31:48.733

I just encountered the exact same error message. I'm posting what worked for me in case it might help anyone else. I was getting the **TypeError: b.type is not a function** when trying to save from a form. The version of jqgrid I am using is 4.4.3, and I was calling an older version of jquery (1.4.2). Using a newer version of jquery (1.7.2 in my case) fixed the problem. I guess the function 'type' was not in version 1.4.2.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-02T04:37:17.513

解决了这个问题。只是因为**`jqGrid`**不支持**`jQuery 1.9`**。

# flash - 使用列表自定义 IconItemRender Lag

> ID：14171907
> 
> 赞同：0
> 
> 时间：2013-01-05T12:43:29.247
> 
> 标签：flash, apache-flex, mobile, builder

我在列表中使用了自定义 IconItemRender。当我将图像嵌入列表并在设备上进行测试时，列表滚动的动画并不酷，它是滞后的。如果不嵌入图像列表滚动的动画是好的。

任何建议为什么列出滞后？

这是代码：

```
package components
{
import flash.display.Bitmap;
import flash.display.DisplayObject;
import flash.display.Sprite;
import flash.text.Font;
import flash.text.TextField;
import flash.text.TextFormat;

import mx.core.DPIClassification;

import spark.components.IconItemRenderer;
import spark.components.Image;
import spark.components.LabelItemRenderer;
import spark.components.supportClasses.StyleableTextField;

public class Shops extends IconItemRenderer
{   
    private static var bkgColor:Boolean;

    protected var storeName:StyleableTextField;
    protected var floor:StyleableTextField;
    protected var _data:Object;
    protected var floorTextSize:int;
    protected var promotions:Image;
    protected var promotionHolder:Sprite;

    [Embed(source="assets/map_list320.png")]
    public static const mapList:Class;

    public function Shops()
    {
        //TODO: implement function
        super();

        switch (applicationDPI) {

            case DPIClassification.DPI_160:

                floorTextSize = 11;
                break;

            case DPIClassification.DPI_240:

                floorTextSize = 20;
                break;

            case DPIClassification.DPI_320:

                floorTextSize = 16;
                break;
        }
    }

    /**
     * @private
     *
     * Override this setter to respond to data changes
     */
    override public function set data(value:Object):void
    {
        _data = value;

        if (storeName) storeName.text = _data.title;
        if (floor) floor.text = 'етаж: ' + _data.floor;

        // the data has changed.  push these changes down in to the 
        // subcomponents here           
    } 

    /**
     * @private
     * 
     * Override this method to create children for your item renderer 
     */ 
    override protected function createChildren():void
    {   
        // promotion if exist
        promotionHolder = new Sprite();
        addChild(promotionHolder);

        // store name
        storeName = new StyleableTextField();
        storeName.defaultTextFormat = new TextFormat( getStyle( "fontFamily" ), getStyle( "fontSize" ), getStyle('color') );
        addChild( storeName );

        // floor
        floor = new StyleableTextField();
        floor.defaultTextFormat = new TextFormat(getStyle( "fontFamily" ), floorTextSize, 0x999999);
        addChild(floor);

        // map

        var img:Image = new Image();
        img.source = mapList;
        img.cacheAsBitmap = true;
        img.width = 64;
        img.height = 64;
        addChild(img);
    }

    /**
     * @private
     * 
     * Override this method to change how the item renderer 
     * sizes itself. For performance reasons, do not call 
     * super.measure() unless you need to.
     */ 
    override protected function measure():void
    {

    }

    /**
     * @private
     * 
     * Override this method to change how the background is drawn for 
     * item renderer.  For performance reasons, do not call 
     * super.drawBackground() if you do not need to.
     */
    override protected function drawBackground(unscaledWidth:Number, unscaledHeight:Number):void
    {
        graphics.beginFill(bkgColor ? 0xFFFFFF : 0xf0f4fb, 1);
        graphics.drawRect(0, 0, unscaledWidth, unscaledHeight);

        bkgColor = !bkgColor;
    }

    /**
     * @private
     *  
     * Override this method to change how the background is drawn for this 
     * item renderer. For performance reasons, do not call 
     * super.layoutContents() if you do not need to.
     */
    override protected function layoutContents(unscaledWidth:Number, 
                                               unscaledHeight:Number):void
    {
        super.layoutContents(unscaledWidth, unscaledHeight);
        // layout all the subcomponents here            
    }

    override protected function updateDisplayList(unscaledWidth:Number, unscaledHeight:Number):void
    {

        // position the field 
        storeName.x = unscaledWidth / 10;
        storeName.y = (unscaledHeight - (storeName.textHeight + floor.textHeight + (unscaledHeight/10))) / 2;

        floor.x = unscaledWidth / 10;
        floor.y = storeName.y + storeName.textHeight + (unscaledHeight/10);

        // we draw a separator line between each item
        var lineY:int = unscaledHeight -1;
        graphics.clear();
        graphics.lineStyle(1, 0xd9d9d9);
        graphics.moveTo( 0, lineY );
        graphics.lineTo( unscaledWidth, lineY );

        drawBackground(unscaledWidth, unscaledHeight);
    }
} 
```

}

# android - 在 OnPostExecute 执行完成之前，从 OnPostExecute 调用的函数不会更新 UI

> ID：14171908
> 
> 赞同：1
> 
> 时间：2013-01-05T12:43:49.840
> 
> 标签：android, android-asynctask

我正在编写一个需要从 api 收集数据并显示它的应用程序。我动态创建视图并将其添加到线性布局，如果我使用线程和处理程序，它工作正常，但它在 AsyncTask 中表现得很奇怪。

以下是我的 OnPostExecute

```
protected void onPostExecute(String result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);
        productInfoFetched = productInfoFetched
                + productDetailTempList.size();

        insertItems(productDetailTempList);
        tvLoading.setVisibility(View.GONE);
        if ((productInfoFetched != 0)
                && (productInfoFetched == totalProductCount)
                && (totalProductCount > 10))
            btnSearch.setVisibility(View.VISIBLE);
        else
            btnSearch.setVisibility(View.GONE);
        downloading = false;
        Log.v("in download info task", "Last line of post exe");
    } 
```

insertItems(productDetailTempList); 获取应该更新视图的 Arraylist。确实如此，但在此行执行 Log.v("in download info task", "Last line of post exe"); 之前什么都不会显示

我的 insertItem 函数如下：

```
public void insertItems(
        final ArrayList<ProductDetailsDTO> productDetailList2) {
    // infoTaskObj = null;
    infoTaskObj.cancel(true);
    Log.v("AT status", infoTaskObj.getStatus().toString());

    for (final ProductDetailsDTO product : productDetailList2) {

        final Holder holder = new Holder();

        View row = ((LayoutInflater) viewObject).inflate(
                R.layout.product_id, null, false);

        holder.product_image = (ImageView) row
                .findViewById(R.id.product_image);
        holder.product_name = (TextView) row.findViewById(R.id.name);
        holder.sku = (TextView) row.findViewById(R.id.sku);

        holder.price = (TextView) row.findViewById(R.id.price);
        holder.ivOverlay = (ImageView) row.findViewById(R.id.ivOverLay);
        holder.edbuton = (Button) row.findViewById(R.id.ibtnDel);
        lstButton.add(holder.edbuton);
        Log.v(TAG, "before immage set");
        try {
            URL url = new URL(product.url);

            Bitmap bmp = BitmapFactory.decodeStream(url.openConnection()
                    .getInputStream());
            Bitmap btmp = Bitmap.createScaledBitmap(bmp, 80, 80, true);

            holder.product_image.setImageBitmap(btmp);

        } catch (MalformedURLException e1) {
            e1.printStackTrace();
        } catch (Exception e) {
            e.printStackTrace();
        }

        holder.product_name.setText(product.name);
        holder.sku.setText(product.sku);
        holder.price.setText(product.price);
        if (product.status.equalsIgnoreCase("0")) {
            holder.ivOverlay.setVisibility(View.VISIBLE);
        } else {
            holder.ivOverlay.setVisibility(View.GONE);
        }

        if (ed_flag) {
            holder.edbuton.setVisibility(View.VISIBLE);
            row.setOnClickListener(null);

        } else {
            holder.edbuton.setVisibility(View.GONE);
            row.setOnClickListener(new View.OnClickListener() {
                public void onClick(View view) {
                    Log.v("Row clicked", "yes");
                    Object obj = view.getTag();
                    String tag = (String) obj;

                    try {
                        // Intent child = new Intent(productListActivity,
                        // ProductThumb.class);
                        if (holder.ivOverlay.getVisibility() == View.VISIBLE)
                            holder.ivOverlay.setVisibility(View.GONE);
                        else
                            holder.ivOverlay.setVisibility(View.VISIBLE);

                        Intent child = new Intent(productListActivity
                                .getParent(),
                                ProductCompleteDetailActivity.class);
                        child.putExtra("ProductDetailDTOList",
                                productDetailList);
                        child.putExtra("ProductDetailDTO", product);
                        productListActivity.startActivity(child);

                        // Intent intent = new
                        // Intent(productListActivity.getParent(),ProductCompleteDetailActivity.class);
                        // TabGroupActivity parentActivity =
                        // (TabGroupActivity)
                        // productListActivity.getParent();
                        // intent.putExtra("ProductDetailDTO", mData);
                        // parentActivity.startChildActivity("DisplayDetail",
                        // intent);

                    } catch (Exception e) {
                        // TODO: handle exception
                        e.printStackTrace();
                    }
                    // Toast.makeText(parent.getContext(),
                    // "Product id: " + mData.get(position).productId,
                    // Toast.LENGTH_SHORT).show();
                }
            });

        }
        holder.edbuton.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

                // TODO Auto-generated method stub
                String status;
                status = product.status;
                Log.v("Id of product clicked in array list",
                        product.productId);
                Log.v("Status of product", status);
                if (status.equalsIgnoreCase("1")) {
                    disableProduct(product.productId, "0");
                    product.status = "0";
                } else {
                    disableProduct(product.productId, "1");
                    product.status = "1";
                }
            }
        });

        llMainView.addView(row);
        scroll = true;
    }

} 
```

我认为每个项目都应该在 llMainView.addView(row); 时开始显示 该行执行。但事实并非如此。它等待 OnPostExecute 完成，然后所有项目一起显示。我这里有什么问题吗？

# c# - 如何在 C#/MVC 中缓存 Web 服务结果，而不是一直调用 Web 服务

> ID：14171915
> 
> 赞同：4
> 
> 时间：2013-01-05T12:44:42.180
> 
> 标签：c#, web-services, caching

我正在构建一个*小型*Web 应用程序，它本质上将用于调用外部 REST/JSON Web 服务、传递一些参数并将结果以表的形式返回给用户。

我知道来自此外部服务的数据不会经常更改（可能每天一次），并且我想防止多次调用 Web 服务以进行相同的查询。

什么是实现某种缓存的好方法？

目前我整理了一些东西（哪种方法有效，但我认为这不是正确的方法）：

1.  用户输入搜索参数

2.  尝试 { LINQ Query 从列表中选择结果}

3.  Catch { 调用 web 服务，用结果填充列表，然后重新运行 LINQ 查询。如果仍然没有结果，则抛出异常}

我想我会在一天结束时清空列表，所以每天它都会重建。

代码有点乱，但似乎*大部分*时间都可以工作——有没有更好的方法来实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T13:03:53.037

您可能希望使用现有的缓存类之一来为您处理过期策略，例如 System.Web.HttpContext.Current.Cache。您可以从查询参数创建缓存键，并首先在缓存中查找它。如果数据不存在，您可以调用 Web 服务并将结果添加到缓存中，绝对过期时间为 12 小时 - 如果仍然没有结果，则抛出异常。

如果您使用的是 .Net 4，那么 System.Runtime.Caching 命名空间中有一些额外的缓存选项，或者您可以查看企业库中的缓存应用程序块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T13:07:36.710

[例如，您可能希望查看本教程中](http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/improving-performance-with-output-caching-cs)描述的内置 ASP.NET MVC 输出缓存功能。

简洁版本：

只需将`[OutputCache(Duration=%duration_in_seconds%, VaryByParam="none")]`属性添加到要为其缓存结果的 MVC 方法。

# ios - iOS 或 MonoTouch 中的固有内存泄漏？

> ID：14171921
> 
> 赞同：4
> 
> 时间：2013-01-05T12:45:29.520
> 
> 标签：ios, memory-leaks, xamarin.ios, long-running-processes

我们正在与 iPad 应用程序中的内存泄漏作斗争，该应用程序必须足够稳定才能保持 24/7 全天候运行，因此，内存泄漏是无法容忍的。

作为一个简单的测试，我们使用“Single View”模板创建了一个新的 iPad MonoTouch 项目，并使用 iPad 本身的 Instruments 执行它（iPad 3rd gen，没有其他应用程序在运行/在内存中）。

在 Instruments 中，如果我们经常点击“Mark Memory”按钮，它就会不断消耗内存。不多，但每隔一段时间就会有一点：

![在此处输入图像描述](../Images/173a68e08e53d914192e2a7f20c4e736.png)

该应用程序实际上并没有对我们做任何事情，但显然正在执行一些分配内存的事情。

这是 iOS 问题、MonoTouch 问题还是其他问题？

创建 24/7 全天候 iPad 应用程序的计划是否现实？我们担心当我们开始添加代码时，内存泄漏量也会升级。显然，由于上图中的泄漏，该应用程序可以运行相当长一段时间，但如果它加速运行，内存满的截止日期将会更快。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-06T01:20:57.683

屏幕截图显示分配 - 不是内存泄漏。您可以要求 Instruments 跟踪泄漏，即没有找到对分配内存的引用。

但是，如果没有更多数据，就不可能说这些是否*正常*。我们至少需要知道分配来自哪里？Instruments 可以告诉您有关每个分配的更多详细信息。尝试向下钻取每个 heapshot 下的树，以查看分配的来源。

类似的情况*通常*是由于缓存造成的——这在每个级别都完成了。在应用程序代码之外，您会注意到 iOS 和它的框架进行缓存（例如图像、webkit ...）。

Mono 本身进行缓存，并且还使用在需要时会增长的内存池。将显示分配（即使已释放），但它不是泄漏 - 释放时，如果可能（例如大小），内存将被重用。

当然，它也可能是一个错误（在应用程序、任何框架、单点触控、iOS 中）。给定时间，如果应用程序发生在错误的位置（例如，运行循环的一部分、处理通知......），一个小的泄漏就足以使应用程序崩溃。只有找到分配的来源以及它们是否是重复分配（来自同一来源）才能告诉您这些分配的重要性。

**编辑（更多）**

所以昨晚我用自己的应用程序做了一个实验。下面的屏幕截图显示了 13 小时 45 分钟内的堆增长。

![堆增长超过 13h45m](../Images/b8eff6eb49434a781b58871efb981379.png)

在前 4 小时 (1-13) 中，应用程序处于前台。最后一部分 (14) 应用程序在后台（晚上屏幕关闭）。记录在#14 之后也停止了，所以这个数字没有机会随着时间的推移而下降。

我的应用程序更大（初始基线为 5MB），启动后我没有使用它。一旦我知道初始化完成（它正在加载一个[相当大](http://blog.xamarin.com/handling-large-assets-on-ios/)的 80MB 数据库），我的第一个“标记堆”就完成了。OTOH 还[监听网络事件](http://spouliot.wordpress.com/2012/12/11/airplay-vs-ios-api/)，使用`NSNetServiceBrowser`回调到托管代码（没有任何视觉线索）。

展开 Heapshot #1 显示单个对象，48 字节，堆栈跟踪以`_ZL13_cache_mallocm`, `cache_fill`, `lookupMethod`, `_class_lookupMethodAndLoadCache3`... 结尾，在调用者中没有显示我的应用程序或单声道。

展开 Heapshot #2 显示了四个对象，前两个在其堆栈跟踪中带有`CA::Render::Encoder::ObjectCacche::invalidate(...)`和。`CGNotificationCenterPostNotification`第三个带有`_cache_addForwardEntry`，第四个看起来像 Heapshot #1 但是，就像第三个一样，它来自`_XReceivedStatusBarDataAndAction`（不是我的应用程序或 monotouch 直接完成的事情）。

展开 Heapshot #3 显示 10 个对象......列出它们有点长，但它们都在同一个`_XReceivedStatusBarDataAndAction`调用下。

扩展 heapshot #4 时的模式相同。

Heapshot #5 有一个区别（共 11 个），其中分配来自调度队列 (_xpc_connection_init)，但没有可见的托管 (app) 或 mono[touch] 堆栈帧。

扩展堆 #6、#7、#8 时的模式相同（与 #3 相同）。

堆 #9 为空（未分配）。

Heapshot #10, #11 和 #3 一样。

Heapshot #12 也是空的。

Heapshot #13 与 #3 非常相似，但它也缓存相同的图像，并且在收到通知时发生`CA::Render::Image::caches_encoding()`另一个`_cache_fill`+ （不是托管的或下面的 MT 堆栈帧）。其他一些分配与通知有关。`lookUpMethod``_significantTimeChange``UIApplicationMain`

Heapshot #14 主要是关于通知（可能被告知它将进入后台）。还有一些`_cache_fill`分配。

> 这是 iOS 问题、MonoTouch 问题还是其他问题？

上面没有任何内容指向 MonoTouch 甚至我的应用程序。OTOH 我没有将它与 ObjC 应用程序进行比较（可能没有时间这样做），但我相信你会看到一些非常接近的东西 - 取决于正在使用的 API/服务（并且执行相同操作的应用程序应该显示相同）分配）。

就像我在 YMMV 之前所说的那样，泄漏（或意外的内存保留）通常是特定于 API 的。如果您在仪器会话中发现奇怪的堆栈跟踪，请填写关于它们的错误报告（给 Xamarin 或 Apple，取决于堆栈跟踪），以便可以分析和修复它们（如果有错误）。

> 创建 24/7 全天候 iPad 应用程序的计划是否现实？

至于 24/7 运行应用程序，我认为它可以完成 - 但它需要用户的合作（这可能是不现实的）。切换到另一个应用程序（主页按钮、手势）意味着您的应用程序不会在前台，Apple 可以终止任何后台应用程序以回收内存。例如，App X 内存不足，iOS 开始询问，然后杀死后台应用程序以满足前台应用程序。

# image-processing - 从 jpeg 读取多个二维码

> ID：14171925
> 
> 赞同：-1
> 
> 时间：2013-01-05T12:45:49.450
> 
> 标签：image-processing, qr-code

有任何软件、sdk 或 lib 可以在一张 jpeg 图像中检测多个二维码（实际上是网站截图），并解码所有检测到的二维码？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T12:48:31.317

我不知道，但我会试试ZXing。如果它不能完成你的任务，我会尝试将图像分割成每个包含一个二维码的子图像，然后用 ZXing 处理它们。

# javascript - 使用 jquery 解析 RSS 提要的属性

> ID：14171926
> 
> 赞同：2
> 
> 时间：2013-01-05T12:45:58.933
> 
> 标签：javascript, jquery, xml, rss

我正在将 tumblr 博客中的 rss 提要解析到我的网站上。我正在尝试做的是使用 jQuery 来解析提要中的一些特定信息。下面是一个片段：

```
<rss xmlns:dc="http://purl.org/dc/elements/1.1/" version="2.0">
<channel>
<atom:link xmlns:atom="http://www.w3.org/2005/Atom" rel="hub" href="http://tumblr.superfeedr.com/"/>
[lots of stuff]
</channel>
</rss> 
```

现在，我想做的是从提要中获取*href="http://tumblr.superfeedr.com/"*因为这将帮助我确认提要实际上来自 tumblr 博客。

然而，问题是我对如何做到这一点有点困惑。我一直在尝试使用以下内容：

```
$.get(blogUrl, 
function(data) {
    var xml = $(data);          
    var foo = xml.find('atom:link').attr('href');
    alert("link href=" + foo);
}); 
```

其中 blogUrl 是相关 rss 提要的 url。我已经尝试了很多变化 - 如此之多以至于我开始绕圈子 - 所以我想我会在这里问。我尝试将 'atom:link' 更改为 'atom\:link' 并将 '.text()' 添加到 find 命令的末尾，但没有运气。我也可以得到整个频道的全文，除了开头的atom:link数据，很接近但也不对！

那么，我怎样才能获得我想要的信息呢？我看到的所有代码指南和以前的问题都集中在迭代 rss 提要中的多个重复项（这当然是有道理的，因为这是你应该对 rss 提要执行的操作），但我只是想确认所选的 Feed 是预期的正确类型的 Feed。

谢谢！

* * *

**更新：**感谢 Jasd 的以下帮助，我得以完成这项工作。这是更新的代码。

```
$.get(blogUrl, 
    function(data) {    
        var doc = data.getElementsByTagNameNS("http://www.w3.org/2005/Atom", "link")[0];
        var href = dic.getAttribute("href");
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T13:10:50.247

因为冒号分隔的标签名称 like`atom:link`是指在不同命名空间（`atom`是命名空间）中定义的标签，所以没有命名空间就无法查询它。您还必须提供要在其中查找标签的命名空间的 URL。

这就是它在 Chrome 中的工作方式（我认为在除 IE 之外的所有其他浏览器中）（为简洁起见，省略了错误检查）：

```
var xmlString = "<rss...>...</rss>";
var doc = new DOMParser().parseFromString(xmlString, "text/xml");
var elem = doc.getElementsByTagNameNS("http://www.w3.org/2005/Atom", "link")[0];
var href = elem.getAttribute("href"); 
```

我不知道 jQuery 是否提供了一种从中抽象出来的功能，可以在所有浏览器上运行。如果没有，请在 IE 中使用`ActiveXObject`而不是`DOMParser`（另请参阅[JavaScript 中变量字符串的 XML 解析](https://stackoverflow.com/questions/649614/xml-parsing-of-a-variable-string-in-javascript)）。

更新：使用 jQuery 时，您可以使用`$(doc).find("atom\\:link").attr("href")`命名空间查询标签（有关更多详细信息，请参见[http://www.rfk.id.au/blog/entry/xmlns-selectors-jquery/](http://www.rfk.id.au/blog/entry/xmlns-selectors-jquery/)和一个 jQuery 插件，它应该使用命名空间更容易）。

# php - 查询加入 2 个表（使用 LIKE 和准备好的语句）

> ID：14171930
> 
> 赞同：2
> 
> 时间：2013-01-05T12:46:27.753
> 
> 标签：php, mysql

亲爱的朋友们！我要感谢大家对我这样的菜鸟的帮助和理解。这是我的第二个问题，所以请原谅。

我想加入 2 个表（AUTHORS 和 BOOKS），以便表 2 中的 AUTHOR_REF 将是表 1 中作者的完整名称（而不是 AUTHOR_REF）。（authors.id 和 books.author_ref 之间存在外键约束关系

这 2 个表是：

```
 **ID     LAST NAME     FIRST NAME**
      1      Palahniuk     Chuck
      2      Faulkner      William 
      3      Beckett       Samuel

    **ID     TITLE               AUTHOR_REF**
      1      Fight Club              1
      2      Absalom, Absalom!!      2
      3      Choke                   1
      4      Waiting for Godot       3 
```

**案例/问题：** 用户在网站上搜索某本书。我使用准备好的语句来准备查询：

```
 $stmt = mysqli_prepare($db, "SELECT title, autor_ref FROM books WHERE title LIKE CONCAT('%', ?, '%')" ); 
```

我知道我应该使用一些带有 WHERE 条件的 JOIN，类似于：'authors.last_name=books.author_ref'，但我已经从第一个 SELECT 中获得了 WHERE 条件。我怎样才能实现我的目标？

我真的很困惑。我的数据库设计不好？

任何帮助将不胜感激。问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T13:01:22.730

不，您实际上是在正确的轨道上，并且您的数据库设计正确。`JOIN`遗嘱有自己的条件`ON`，不属于该`WHERE`条款：

```
SELECT
  title, 
  `FIRST NAME`,
  `LAST NAME`
FROM
  books
  /* Join brings over the author name */
  JOIN authors ON books.AUTHOR_REF = authors.ID
/* WHERE clause does not change */
WHERE title LIKE CONCAT('%', ?, '%') 
```

如果您有任何*没有*已知作者 ( `AUTHOR_REF IS NULL`) 的书籍，请使用 a`LEFT JOIN`代替，这样书名仍会返回，并带有`NULL`s 作为作者姓名。

```
SELECT
  title, 
  `FIRST NAME`,
  `LAST NAME`
FROM
  books
  /* Left join ensures a row returned for the book even if it has no author */
  LEFT JOIN authors ON books.AUTHOR_REF = authors.ID
WHERE title LIKE CONCAT('%', ?, '%') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T13:09:33.743

我会在这个数据库上构建一个有点不同的数据库......

```
AUTHORID     LAST NAME     FIRST NAME
  1          Palahniuk     Chuck
  2          Faulkner      William 
  3          Beckett       Samuel

BOOKID     TITLE               AUTHORID
  1        Fight Club              1
  2        Absalom, Absalom!!      2
  3        Choke                   1
  4        Waiting for Godot       3 
```

然后通过使用加入他们：

```
SELECT title, `FIRST NAME`,`LAST NAME`
FROM books
LEFT JOIN author USING (AUTHORID) 
WHERE title LIKE CONCAT('%', ?, '%') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T13:12:46.077

```
 $stmt = mysqli_prepare($db, "SELECT a.*, b.autor_ref FROM authors as a, books as b WHERE b.author_ref = a.id AND b.title LIKE '%$search%'" ); 
```

获取此内容后，您可以显示完整的作者姓名等等（例如该作者的更多电影）。

# java - 类型不能引用在不同方法中定义的内部类中的非最终变量 Asortiment

> ID：14171931
> 
> 赞同：0
> 
> 时间：2013-01-05T12:46:34.197
> 
> 标签：java, android

我在我的应用程序中添加了简单的类：

```
public class Nomenklatura implements Serializable
    {
        private Boolean SmenaIsOpen=false;
        public Nomenklatura()
        {
            SmenaIsOpen=false;
        }
        public String OpenSmena()
        {
            SmenaIsOpen=true;
            return "ok";
        }
        public String CloseSmena()
        {
            return "ok";
        }
        public Boolean GetSmenaIsOen()
        {
            return SmenaIsOpen;
        }
        public void SetSmenaIsOen(Boolean val)
        {
            SmenaIsOpen=val;
        }

    } 
```

应用程序应该使用此类的一个对象。当我在活动中使用它时：

```
@Override
    protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.presmena);  
        Nomenklatura Asortiment;
         Asortiment=(Nomenklatura) getIntent().getExtras().getSerializable("Nomenklatura");
         Button but1=(Button) findViewById(R.id.button1);
            but1.setOnClickListener(new OnClickListener() 
            {
                @Override
                public void onClick(View arg0) 
                {
                    if(Asortiment.GetSmenaIsOen()) Asortiment.CloseSmena();
                    else Asortiment.OpenSmena();
                }
            });
    } 
```

我收到错误：无法在不同的方法 Presmena.java 中定义的内部类中引用非最终变量 Asortiment。帮助理解，有什么问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T12:50:46.040

您必须将您的 Asortiment 变量声明为 final

```
final Nomenklatura Asortiment; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T12:51:10.453

像这样声明

```
final Nomenklatura Asortiment = ... 
```

它应该可以工作。当您声明内部类并让它们使用您的局部变量时（如果您考虑一下，通常会超出内部范围），它们需要被捕获。在 Java 中，您需要将此类变量标记为`final`, 以避免意外行为。

# objective-c - iPhone autorelease 是否适用于 c 数组？

> ID：14171933
> 
> 赞同：1
> 
> 时间：2013-01-05T12:46:43.883
> 
> 标签：objective-c, arrays, nsautoreleasepool, static-array

自动释放会释放我的非对象 c 数组吗？我想知道，因为也许只有对象知道它们的引用计数？这是我的代码：

```
-(int *)getCombination{
    int xIndex = arc4random() % [self._num1 count] + 1;
    int yIndex = arc4random() % [self._num2 count] + 1;
    int *combination;
    combination[0] = [[self._num1 objectAtIndex:xIndex]intValue];
    combination[1] = [[self._num2 objectAtIndex:yIndex]intValue];
    return combination;
} 
```

这是我的 main() 函数：

```
int main(int argc, char *argv[])
{
    @autoreleasepool {
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([YYAAppDelegate class]));
    }
} 
```

那么自动释放是否仅适用于对象，还是会从 getCombination 中释放我的 c 数组？

编辑：由于答案是否定的，自动释放不适用于 c 数组/指针，我使用了以下使用 NSArrays 的代码：

```
#import <Foundation/Foundation.h>

@interface Multiplication : NSObject

@property (strong, nonatomic) NSMutableArray *_combinations;

-(id)initArrays;
-(NSArray *)getCombination;

@end

#import "Multiplication.h"

@implementation Multiplication
@synthesize _combinations;

-(void)initializeArray{
    self._combinations = [[NSMutableArray alloc]init];
    for (int i = 1; i <= 10; i++) {
        for (int j = 1; j <= 10; j++) {
            NSNumber *x = [NSNumber numberWithInt:i];
            NSNumber *y = [NSNumber numberWithInt:j];
            [self._combinations addObject:[NSArray arrayWithObjects:x, y, [NSNumber numberWithInt:([x intValue] * [y intValue])], nil]];
        }
    }
}

-(NSArray *)getCombination{
    if ([self._combinations count] == 0) {
        [self initializeArray];
    }

    int index = arc4random() % [self._combinations count];
    NSArray *arr = [self._combinations objectAtIndex:index];
    [self._combinations removeObjectAtIndex:index];
    return arr;
}

-(id)initArrays{
    self = [super init];
    if (self) {
        [self initializeArray];
    }
    return self;
}

@end 
```

顺便说一句，此功能应该提供一种方法，用于随机显示 10X10 乘法表中的每个组合，并在所有组合都显示且次数相等时重新启动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T12:54:10.920

Autorelease 用于 Objective-C 对象。此外，您不是在创建 C 数组，而是创建一个指针变量。您的作业`combination[n]`正在写入未分配的内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T13:06:48.040

`autorelease`是可以发送到 Objective C 对象的消息。在 ARC 之前，您需要明确地执行此操作，如下所示：

```
MyObject *obj = [[[MyObject alloc] init] autorelease]; 
```

在 ARC 下，编译器会为您计算出`autorelease`部分，但消息仍会发送到对象；结果，该对象被添加到自动释放池中。当自动释放池被耗尽时，其中的所有对象都会发送一条`release`消息。如果没有对该对象的其他引用，则其引用计数将降至零，并且该对象将被清理。

C 数组不响应`autorelease`或`release`消息：它们不是 Objective C 实体，因此它们根本不响应消息。因此，您必须手动处理为这些数组分配的内存，方法是调用`malloc`¹和`free`.

当然，您可以将自动释放的对象放在 C 数组中，这些对象将在常规操作过程中被清除。例如

```
NSNumber **numbers = malloc(2, sizeof(NSNumber*));
numbers[0] = [NSNumber numberWithInt:123];
numbers[1] = [NSNumber numberWithInt:456];
return numbers; 
```

如果调用者在数组中没有`retain` `NSNumber`对象`numbers`，这些对象将被自动释放²。但是，该`numbers`对象需要单独清理：

```
free(numbers); 
```

* * *

¹你没有调用`malloc`你的代码，所以访问`combinatopn[...]`是未定义的行为。

²导致过程中引用挂起。

# php - 通过 foreach 迭代对象时如何调用 Iterator 方法

> ID：14171937
> 
> 赞同：3
> 
> 时间：2013-01-05T12:47:23.203
> 
> 标签：php, iterator

我浏览了[迭代器](http://php.net/manual/en/class.iterator.php)并了解了为什么应该使用它，但我没有得到的是迭代器类的方法如何调用通过 foreach 迭代对象。

考虑以下从 php 手册页复制的示例

```
class myIterator implements Iterator {
    private $position = 0;
    private $array = array(
        "firstelement",
        "secondelement",
        "lastelement",
    );  

    public function __construct() {
        $this->position = 0;
    }

    function rewind() {
        var_dump(__METHOD__);
        $this->position = 0;
    }

    function current() {
        var_dump(__METHOD__);
        return $this->array[$this->position];
    }

    function key() {
        var_dump(__METHOD__);
        return $this->position;
    }

    function next() {
        var_dump(__METHOD__);
        ++$this->position;
    }

    function valid() {
        var_dump(__METHOD__);
        return isset($this->array[$this->position]);
    }
} 
```

在这里，我想了解当我使用 foreach 时，如下所示。

myIterator 类的方法如何自动调用？

```
$it = new myIterator;

foreach($it as $key => $value) {
    var_dump($key, $value);
    echo "\n";
} 
```

这里有什么魔力？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T13:18:22.743

如果您想这样称呼它，“魔术”只是当您尝试使用实现`Iterator`接口的对象进行迭代时，PHP 具有定义的行为。

正如您可能知道的那样，接口只是程序员和应用程序之间的合同，规定将定义某些方法。如果在没有实现接口中的方法的情况下定义了一个类，PHP 将抛出一个致命错误并且程序将终止。这意味着当 a`foreach`遇到实现`Iterable`接口的对象时，保证该对象具有称为`current`、`key`、`next`和`rewind`的方法`valid`。

除了 valid 之外，这些方法也都存在于普通数组中，尽管它们是过程函数而不是对象方法。（`valid`对于数组不存在，因为选择新项目的函数将返回该项目，因此您可以说它`valid`已融入这些函数。）这表明，在幕后，`foreach`循环以或多或少相同的方式工作在数组和`Iterable`对象上。

[在您在问题中链接的手册页](http://www.php.net/manual/en/class.iterator.php)`Iterable`上的示例中显示或至少暗示了迭代对象的过程，但我可以看到它可能会造成混淆。以下是该过程的基本解释：

通常，`foreach`循环会将可迭代对象的指针（注意这里的小 I - 我指的是实现`Iterable`接口的数组或对象）回到其第一个位置。换句话说，它以与倒带磁带相同的方式“倒带”可迭代对象——年轻一代可能会忘记这一概念。正如您可能想象的那样，这是`rewind`接口所需的方法。

一旦数组被倒回，就会`foreach`尝试读取当前选择的任何元素。使用该方法检索当前元素的数据`current`，并使用该方法检索该元素的键`key`。这些项目被放入您在`foreach`循环中定义的变量中，并且循环运行它的迭代。

循环迭代完成后，`foreach`将尝试使用该`next`方法获取下一个元素。然后它通过执行与上一段中相同的步骤来处理循环。

在对象上，在使用and`Iterable`读取任何数据之前，循环将调用该方法。如果此方法返回或 PHP 认为与其等效的值（如 0 或），则假定没有任何其他内容需要处理并完全退出循环，您的程序将照常继续。`current``key``foreach``valid``FALSE``NULL``foreach`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T13:00:41.373

没有魔法。`foreach`将简单地检查一个对象是否实现了 Iterator 接口，然后以正确的顺序调用适当的方法。

您可能会在这里找到更多详细信息：http: [//lxr.php.net/xref/PHP_5_4/Zend/zend_interfaces.c](http://lxr.php.net/xref/PHP_5_4/Zend/zend_interfaces.c)

# html - 选项卡到 html元素 我有一个 FORM，其中有几个 INPUT 和 SELECT 元素。我的问题是我可以选择 INPUT，但不能选择 SELECT 下拉菜单。我尝试了 tabindex="2" 属性，但它没有影响任何东西。有没有办法做到这一点？关于您上一个已结束的问题... // ==UserScript== // @name Graph reader // @namespace http://gm.wesley.eti.br // @include http://www.quantc

ID：14171940

赞同：0

时间：2013-01-05T12:48:13.820

标签：html, forms, select, drop-down-menu, tabs

# ios - Gimbal 示例项目 (Mallmart) 架构 armv7 的未定义符号：

> ID：14171944
> 
> 赞同：4
> 
> 时间：2013-01-05T12:48:42.697
> 
> 标签：ios, xcode

我正在尝试从万向节[https://www.gimbal.com/运行示例项目（Mallmart）](https://www.gimbal.com/)

Mallmart 已成功运行，但当我尝试使用 IR 运行 Mallmart 时出现此错误

```
Undefined symbols for architecture armv7:
  "QCAR::State::getNumActiveTrackables() const", referenced from:
      -[EAGLView renderFrameQCAR] in ContextIR
  "_OBJC_CLASS_$_CMMotionManager", referenced from:
      objc-class-ref in libQCAR.a(libQCAR.a-armv7-master.o)
  "QCAR::State::getActiveTrackable(int) const", referenced from:
      -[EAGLView renderFrameQCAR] in ContextIR
ld: symbol(s) not found for architecture armv7
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我尝试从 vuforia-sdk-ios-2-0-29 添加 libQCAR.a 但我仍然收到此错误

有人可以帮我解决这个问题吗？

对不起我的英语不好，我希望你明白我的意思。

非常感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-23T20:35:09.940

在您的项目目标**Build Settings**上，您应该从**Valid Architectures**中删除**armv7s**。

 ***libQCAR.a*很可能不是针对此架构编译的。通过从您的项目中删除它，它将不再尝试在此架构中编译您的项目，这应该可以解决您的问题。

即使您不为 armv7s 编译，您的应用程序仍然可以在较新的 iOS 设备上运行，但它不会对该架构进行所有优化。**

# java - 按下键时 GWT onPreviewNativeEvent 运行 2 次

> ID：14171946
> 
> 赞同：3
> 
> 时间：2013-01-05T12:49:03.410
> 
> 标签：java, events, gwt

当我按下 ESC 键时，我使用该事件显示一条消息，但它显示了两次警报。错误在哪里？

```
Event.addNativePreviewHandler(new Event.NativePreviewHandler() {
    @Override
    public void onPreviewNativeEvent(Event.NativePreviewEvent event) {
        NativeEvent nativeEvent = event.getNativeEvent();
            if( nativeEvent.getKeyCode() == 27){
            Windows.alert("HELLO");
        }
        }
    }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-05T13:23:29.463

它同时触发 KeyDown 和 KeyUp 事件。你应该做：

```
public void onPreviewNativeEvent(NativePreviewEvent event) {
    NativeEvent nativeEvent = event.getNativeEvent();
    if ("keydown".equals(nativeEvent.getType())) {
        if (nativeEvent.getKeyCode() == KeyCodes.KEY_ESCAPE) {
            Windows.alert("HELLO");
        }
    }
} 
```

# jquery - 在带有 knockoutjs 的超链接中启用输入类型的图像

> ID：14171950
> 
> 赞同：0
> 
> 时间：2013-01-05T12:49:18.973
> 
> 标签：jquery, knockout.js

我显示带有输入类型图像的超链接。默认情况下应禁用该按钮，当某个条件为真时，应通过 knockoutjs 启用绑定启用该按钮。

但这不会阻止用户执行超链接。

我怎样才能做到这一点？

```
<a class="areaLink" href="/Module/Create" id="CreateModule">
<input src="/Content/Images/createmodule.png" title="Create module" type="image">
</a>

 $('#CreateModule').click(function (e) {
            e.preventDefault();
            // do something
 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T16:36:27.463

您不需要将其包装在超链接中，因为输入将具有自己的事件，您可以绑定到这些事件。为输入提供一个 ID 并使用它来绑定单击并进行启用。

# php - MYSQL Select 更新查询多个连接错误

> ID：14171952
> 
> 赞同：0
> 
> 时间：2013-01-05T12:49:48.000
> 
> 标签：php, mysql, select, join

我正在尝试更新变量表中的变量行。这是我的查询：

// 编辑：删除双...

```
UPDATE `ec`.`category_id` AS `category_id`,`e`.`title` AS `title`,
    `r`.`first_name` AS `first_name`,
    `r`.`last_name` AS `last_name`,`r`.`email` AS `email`,
    `r`.`comment` AS `comment`,`r`.`amount` AS `amount`,
    `r`.`published` AS `published`,`r`.`transaction_id` AS `transaction_id`,
    `r`.`register_date` AS `register_date`,
max((case `f`.`id` when 1 then `v`.`field_value` else '' end)) AS `pand`,
max((case `f`.`id` when 52 then `v`.`field_value` else '' end)) AS `achternaam`,
max((case `f`.`id` when 53 then `v`.`field_value` else '' end)) AS `voornaam`,
max((case `f`.`id` when 20 then `v`.`field_value` else '' end)) AS `gebdat`,
max((case `f`.`id` when 32 then `v`.`field_value` else '' end)) AS `geslacht`,
max((case `f`.`id` when 31 then `v`.`field_value` else '' end)) AS `kleinkind`,
max((case `f`.`id` when 21 then `v`.`field_value` else '' end)) AS `straat`,
max((case `f`.`id` when 54 then `v`.`field_value` else '' end)) AS `postcode`,
max((case `f`.`id` when 55 then `v`.`field_value` else '' end)) AS `plaats`,
max((case `f`.`id` when 26 then `v`.`field_value` else '' end)) AS `telthuis`,
max((case `f`.`id` when 27 then `v`.`field_value` else '' end)) AS `telmir`,
max((case `f`.`id` when 28 then `v`.`field_value` else '' end)) AS `gsmdeelnemer`,
max((case `f`.`id` when 29 then `v`.`field_value` else '' end)) AS `gsmpapa`,
max((case `f`.`id` when 56 then `v`.`field_value` else '' end)) AS `gsmmama`,
max((case `f`.`id` when 30 then `v`.`field_value` else '' end)) AS `graad`,
max((case `f`.`id` when 88 then `v`.`field_value` else '' end)) AS `bestelling`,
max((case `f`.`id` when 34 then `v`.`field_value` else '' end)) AS `eigendom`,
max((case `f`.`id` when 57 then `v`.`field_value` else '' end)) AS `zodiac`,
max((case `f`.`id` when 42 then `v`.`field_value` else '' end)) AS `tshirt`,
max((case `f`.`id` when 39 then `v`.`field_value` else '' end)) AS `helpdag`,
max((case `f`.`id` when 40 then `v`.`field_value` else '' end)) AS `helpinfo`,
max((case `f`.`id` when 36 then `v`.`field_value` else '' end)) AS `vervoerjanee`,
max((case `f`.`id` when 37 then `v`.`field_value` else '' end)) AS `vervoerinfo`
from ((((`dat_eb_field_values` `v` join `dat_eb_registrants` `r` on((`v`.`registrant_id` = `r`.`id`)))
join `dat_eb_fields` `f` on((`v`.`field_id` = `f`.`id`)))
join `dat_eb_events` `e` on((`r`.`event_id` = `e`.`id`)))
join `dat_eb_event_categories` `ec` on((`ec`.`event_id` = `e`.`id`)))
where ((`ec`.`category_id` = 4) and (`e`.`published` = 1))
SET $rowname=$newvalue WHERE transaction_id=$transid 
```

通常，此查询使用 SELECT 作为第一个参数而不是 UPDATE。最后一行也是我加的。$rowname、$newvalue 和 $transid 都已定义，它给我以下错误：

```
Not unique table/alias: 'first_name'. 
```

在此先感谢，劳伦特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T12:54:48.060

问题就在这里

```
`r`.`first_name`,`r`.`first_name` AS `first_name`, 
```

你有模棱两可的别名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T12:56:30.277

UPDATE 子句的语法是这样的

```
UPDATE table JOIN table1 ON table.field = table1.field SET table.field2 = 'value' WHERE table.field3 = 'value2' 
```

您没有提供任何要选择的字段，因为 UPDATE 子句没有选择任何内容。因此，您应该从 SELECT 子句中删除字段并在 SET 之后添加 WHERE pats。

```
UPDATE 
((((`dat_eb_field_values` `v` join `dat_eb_registrants` `r` on((`v`.`registrant_id` = `r`.`id`)))
join `dat_eb_fields` `f` on((`v`.`field_id` = `f`.`id`)))
join `dat_eb_events` `e` on((`r`.`event_id` = `e`.`id`)))
join `dat_eb_event_categories` `ec` on((`ec`.`event_id` = `e`.`id`)))

SET $rowname=$newvalue

WHERE ((`ec`.`category_id` = 4) and (`e`.`published` = 1)) AND transaction_id=$transid 
```

# dart - Dart SDK 中的 Canvas 注释/文档

> ID：14171954
> 
> 赞同：1
> 
> 时间：2013-01-05T12:49:58.030
> 
> 标签：dart

是否可以明确解释以下代码的作用，而不是仅显示无意义的参考。

请注意，这段代码取自 dart:html 包 (html_dartium.dart)，其中定义了类 CanvasRenderingContext2D。

```
/// @domName CanvasRenderingContext2D
class CanvasRenderingContext2D extends CanvasRenderingContext {
  CanvasRenderingContext2D.internal(): super.internal();

  /** @domName CanvasRenderingContext2D.fillStyle */
  dynamic get fillStyle native "CanvasRenderingContext2D_fillStyle_Getter";

  ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T19:11:01.073

使用`fillStyle` `getter`代码`native`。因此那里的代码有点神秘。要了解有关 Dart 中本机代码的更多信息，我会推荐这篇文章：

[http://www.dartlang.org/articles/native-extensions-for-standalone-dart-vm/](http://www.dartlang.org/articles/native-extensions-for-standalone-dart-vm/)

这是一段摘录：

```
The Dart library defines classes and top-level functions as usual, but declares that
some of these functions are implemented in native code, using the native keyword. The
native library is a shared library, written in C or C++, that contains the 
implementations of those functions. 
```

Dart 没有更改`Canvas`api，因此您可以阅读该 api 并很好地了解代码在做什么。这是一个很好的起点：

[https://developer.mozilla.org/en-US/docs/HTML/Canvas/Drawing_Graphics_with_Canvas](https://developer.mozilla.org/en-US/docs/HTML/Canvas/Drawing_Graphics_with_Canvas)

如果您对缺乏明确的文档有更普遍的抱怨（尤其是在`native`使用代码的地方），您总是可以提交错误。

# c - 错误的寄存器 '%rbx' 与 'l' 后缀一起使用

> ID：14171955
> 
> 赞同：5
> 
> 时间：2013-01-05T12:50:23.517
> 
> 标签：c, linux, gcc, assembly, inline-assembly

我正在尝试使用 gcc 编译器在 linux 下编译此代码：

```
static inline unsigned long get_current(void)
{
    unsigned long current;

    asm volatile (
    " movl %%esp, %%eax;"
    " andl %1, %%eax;"
    " movl (%%eax), %0;"
    : "=r" (current)
    : "i" (0xfffff000)
    );
    return current;
} 
```

但我收到了这个错误：

```
program.c: Assembler messages: program.c:455: Error: incorrect
register `%rbx' used with `l' suffix 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-05T12:56:47.017

显然，您正在编译 64 位。如果它不是您想要的，请尝试使用 gcc -m32，或者使用 64 位寄存器（%esp 在 x64 上根本没有意义）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-05T16:28:21.387

虽然以上是正确的，但我希望它实际上不是正确的解决方案。如果你为 x86-64 编译它，你应该使用 64 位操作来“获取当前”。（如果（内核？）堆栈仍然只有 1 页，否则您将需要不同的掩码常量来计算堆栈的底部。）

```
asm volatile (
  " movq %1, %%rax \n"
  " andq %%rsp, %%rax;"         // discard the low 12 bits
  " movq (%%rax), %0;"
  : "=r" (current)
  : "i" (0xfffffffffffff000)
  : "rax"       // Remember to mark any temporary registers modified in "clobber"
    , "memory"  // and we read memory at an address that might hold a C object
); 
```

如果此内存位置从未用纯 C 编写，则省略`"memory"`clobber 可能是安全的。

我重新排列了指令，因为大多数指令不能使用 64 位立即数。（虽然*这个*特定的常量确实适合带符号的 32 位 imm32，所以`and $imm, %rax`本来可以，但是这样做可能更有效，因为它避免在 AND 之前复制 RSP。该常量不适合 imm8，所以两种方式都有相同的代码大小。）

您可以`%0`将堆栈指针向下舍入到 4k 页面的开头，而不是破坏 RAX。替换模板字符串中的任何地方，并删除`%%rax`clobber 。或者只是使用内联 asm 来获取，并在 C 中执行加载部分，例如.`%0``"rax"``uintptr_t rsp``*(volatile uinptr_t*)(rsp & -4096)`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-19T18:27:34.540

我会这样编码：

```
static inline unsigned long get_current(void)
{
    unsigned register long current asm("sp");

    asm volatile ("" : "=r"(current));

    return (current & ~ (unsigned long)0xfff);
} 
```

这可以在 64 位和 32 位上编译；创建以下代码：

```
部分.text的反汇编：

0000000000000000 <get_current>:
   0: 48 89 e0 移动 %rsp,%rax
   3: 48 25 00 f0 ff ff 和 $0xfffffffffffff000,%rax
   9：c3 retq
```

分别对于 32 位：

```
部分.text的反汇编：

00000000 <get_current>:
   0: 89 e0 移动 %esp,%eax
   2: 25 00 f0 ff ff 和 $0xfffff000,%eax
   7：c3 ret
```

gcc 的内联汇编器的一大优点是能够将变量绑定到寄存器，是的，如图所示，它可以`sp`在 x86 上识别。

**编辑：**哎呀......刚刚注意到 gcc 3.4.5 为上面创建了有趣的代码 - 即使在高优化级别，它通常会自行消除帧指针，上面的源代码将创建一个帧指针（对于非静态函数的实例化）。在 gcc 3.4.5 上显式编译`-fomit-frame-pointer`或使用 gcc 4.x 会创建现在显示的正确代码（有关 gcc 3.4.5 的作用，请参阅发布历史记录）。

# windows - ProgramA 在命令行中使用 -variables 执行 ProgramB。我怎样才能找到它正在使用的变量？

> ID：14171958
> 
> 赞同：0
> 
> 时间：2013-01-05T12:50:45.877
> 
> 标签：windows

所以，一个特定的游戏程序运行另一个程序（这是同一个游戏，有两个程序）。第一个程序 ProgramA 运行第二个程序 ProgramB，其中包含一长串变量（我知道其中一个是 -runtime）。我如何知道它与第二个程序一起使用的所有变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T13:17:00.303

您可以将 ProgramB 替换为您自己的程序，该程序将命令行转储到文件/控制台/GUI。如果您只需要检查一次命令行参数，则应该这样做。

如果您需要一个不干扰正常操作的有效解决方案，您应该让您自己的程序启动原始 ProgramB，并传递您提供的命令行参数。

* * *

更新：对于不涉及编写任何代码的解决方案，您可以使用[Process Explorer](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx "进程浏览器")检查正在运行的进程的属性。右键单击一个进程并从菜单中选择“*属性*”将显示 - 其中包括 - 用于启动该进程的命令行。

# php - 选择所需的结果 SQL。使用连接或左连接的多个表

> ID：14171965
> 
> 赞同：2
> 
> 时间：2013-01-05T12:51:30.660
> 
> 标签：php, mysql

我正在尝试提出一个网络应用程序，有点像*分步*或*程序*应用程序。我无法真正描述它，也不知道如何称呼它，但它是一个应用程序，它提供了有关如何实现某些东西**的分步说明，例如工作申请。**

*“帮助用户做事的应用程序。”*

所以我设置了一些 GUI，现在我面临问题的核心：数据库设置。

在我设计的 GUI 中，我决定是这样的：

![图 1.0](../Images/5569f5e8f36ba06c2294e13c34ec7455.png)

**传奇：**

*   **带支票的**绿色- 已完成****
***   **橙色**- 用户当前处于该步骤*   **灰色**- 他还没有开始那里的任何子步骤。**

 **如图所示，我有 3 个**顶级程序**，以及*每个程序下***的** 其他一些子程序。该图片中缺少的一件事是**顶级程序也属于某个类别**。

 ***而我想要实现的是跟踪用户的活动。这是交易：

1.  没有必要必须完成第一个顶层程序才能进入下一个程序，您可以跳过并返回 -> 这没有问题。
2.  完成所有子过程后，顶级过程为该特定用户标记 1，表示它已完成。
3.  类别也是如此，当该类别下的所有顶级程序都完成时，该类别为该特定用户标记 1，表示他/她完成了该类别。

我打算像这样设置我的数据库：

**-tbl_users-**

```
 id    |    username    |    password    |
 -----------------------------------------
   1   |    some_user   |  adf8jkdfndsa  |
... 
```

**tbl_step_cat**

```
 id    |      cat_name      |
 ---------------------------
   1   |    some_category   |
... 
```

**tbl_steps**

```
 id    |      step_shortdesc     |    step_longdesc      |  cat_id 
 -------------------------------------------------------------------
   1   |      some step one      |  do the following...  |     1
 -------------------------------------------------------------------
   2   |      some step two      |  do the following...  |     1
 -------------------------------------------------------------------
   3   |      some step three    |  do the following...  |     2
... 
```

**tbl_substeps**

```
 id    |     substep_shortdesc   |    substep_longdesc   |  step_id 
 -------------------------------------------------------------------
   1   |    some substep one     |  do the following...  |     1
 -------------------------------------------------------------------
   2   |    some substep two     |  do the following...  |     1
 -------------------------------------------------------------------
   3   |    some substep three   |  do the following...  |     1
 -------------------------------------------------------------------
   4   |    some substep a       |  do the following...  |     2
 -------------------------------------------------------------------
   5   |    some substep b       |  do the following...  |     2
 -------------------------------------------------------------------
   6   |    some substep 1       |  do the following...  |     3
... 
```

然后是用户和步骤之间的关系表

**tbl_user_stepcat**

```
 id    |     user_id   |    stepcat_id   |  datetime 
 -------------------------------------------------------------------
   1   |      1        |       1         |  sometime
 -------------------------------------------------------------------
   2   |      1        |       2         |  sometime
 ------------------------------------------------------------------- 
```

**tbl_user_step**

```
 id    |     user_id   |     step_id     |  datetime 
 -------------------------------------------------------------------
   1   |      1        |       1         |  sometime
 -------------------------------------------------------------------
   2   |      1        |       2         |  sometime
 ------------------------------------------------------------------- 
```

**tbl_user_substep**

```
 id    |     user_id   |    substep_id   |  datetime 
 -------------------------------------------------------------------
   1   |      1        |       1         |  sometime
 -------------------------------------------------------------------
   2   |      1        |       2         |  sometime
 ------------------------------------------------------------------- 
```

对不起，如果这有点长，那只是因为代码。

现在我的问题是如何返回我想要的结果。如您所见，当用户登录应用程序时，我希望他/她立即看到这些信息。

到目前为止我还没有尝试过，因为我的大脑刚刚关闭并且注意力不集中，这是我迄今为止最好的时间。

如果我要编写这个应用程序的 SQL，我当然会做多个连接。

我想首先选择所有类别并将其输出给用户。

```
SELECT * FROM tbl_step_cat 
```

这会给我所有的类别，我接下来要做的是找出哪个步骤完成与否，这样我就可以做“造型”

我可能会

```
SELECT cat_name FROM tbl_step_cat JOIN
tbl_user_stepcat ON tbl_user_stepcat.stepcat_id = tbl_step_cat.id
... 
```

我现在注意力不集中，无法思考。我该怎么做：

1.  输出所有猫/步骤/子步骤
2.  在关系表中获取那些有条目的人，这意味着它已经完成
3.  在哪里`user = session['user']`

非常感谢，我只是需要指导。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T14:47:54.437

好的，如果您只是指定 JOIN，那将是一个 INNER JOIN，因此将排除用户尚未完成每​​个步骤和子步骤的结果。因此，为了确保您可以获得每个联接的结果，我将其设为 LEFT JOIN。这可能会将其与空结果连接起来，这很好，因为您可以测试子类别字段是否为空，以便填充表单上的刻度部分。

我一直认为将数据库逻辑拆分为单独的查询没有什么害处，而不是尝试编写一个将所有内容连接到所有内容的巨型查询，这可能是多余的。

我想我会为每个类别做一个单独的查询，即：

（伪）

```
SELECT * FROM CATEGORIES 
foreach (category) {
    SELECT * FROM SUBCATEGORIES WHERE CATEGORY = CATEGORYID
    foreach (SUBCATEGORY) {
        SELECT * FROM SUBSUBCATEGORIES WHERE SUBCATEGORY = SUBCATEGORYID
    }
} 
```

并且在每个点查询用户表以查看用户是否在您遍历列表时完成了每个步骤，并使用该循环来填充您的刻度。

它可能不像单个巨型连接那样优雅，但如果这不是你的事，我认为简化查询逻辑以帮助你理解没有任何害处。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T16:13:03.927

您不需要这些表`user_stepcat`，`user_step`因为它们只会存储冗余信息。

每个`completed`状态都是由子步骤的完成触发的，并且可以通过这个查询来检索

```
-- cat completed or not
SELECT
  sc.*, 
  MIN( IF( uss.substep_id IS NULL, 0, 1 ) ) completed,
  IF( MIN( IF( uss.substep_id IS NULL, 0, 1 ) ), 
    MAX( uss.datetime ), 
    NULL ) completed_at
FROM
  step_cat sc
LEFT JOIN steps s ON s.cat_id = sc.id
LEFT JOIN substeps ss ON ss.step_id = s.id
LEFT JOIN user_substep uss ON uss.user_id = 1 AND uss.substep_id = ss.id
GROUP BY sc.id;

-- steps completed or not
SELECT
  s.*, 
  MIN( IF( uss.substep_id IS NULL, 0, 1 ) ) completed,
  IF( MIN( IF( uss.substep_id IS NULL, 0, 1 ) ), 
    MAX( uss.datetime ), 
    NULL ) completed_at
FROM
  steps s
LEFT JOIN substeps ss ON ss.step_id = s.id
LEFT JOIN user_substep uss ON uss.user_id = 1 AND uss.substep_id = ss.id
GROUP BY s.id;

-- substeps completed or not
SELECT
  ss.*, 
  IF( uss.substep_id IS NULL, 0, 1 ) completed,
  uss.datetime completed_at
FROM
  substeps ss
LEFT JOIN user_substep uss ON uss.user_id = 1 AND uss.substep_id = ss.id; 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/73a5a/6)

**更新**

为了给您更相关的 GUI 答案，我更新了示例数据以匹配您的屏幕截图。

对于演示，您需要知道当前用户 ID、类别 ID 和步骤 ID

```
SET @user_id = 1; -- actual user
SET @cat_id = 1; -- actual category
SET @step_id = 2; -- actual step 
```

你可以得到当前的类别和完整的状态

```
SELECT
  sc.*, 
  MIN( IF( uss.substep_id IS NULL, 0, 1 ) ) completed,
  IF( MIN( IF( uss.substep_id IS NULL, 0, 1 ) ), MAX( uss.datetime ), NULL ) completed_at
FROM
  step_cat sc
LEFT JOIN steps s ON s.cat_id = sc.id
LEFT JOIN substeps ss ON ss.step_id = s.id
LEFT JOIN user_substep uss ON 
-- limit to user
uss.user_id = @user_id 
AND uss.substep_id = ss.id
-- limit to cat
WHERE sc.id = @cat_id
GROUP BY sc.id; 
```

类别步骤和完成状态与此

```
SELECT
  s.*, 
  MIN( IF( uss.substep_id IS NULL, 0, 1 ) ) completed,
  IF( MIN( IF( uss.substep_id IS NULL, 0, 1 ) ), MAX( uss.datetime ), NULL ) completed_at
FROM
  steps s
LEFT JOIN substeps ss ON ss.step_id = s.id
LEFT JOIN user_substep uss
-- limit to user_id
ON uss.user_id = @user_id 
AND uss.substep_id = ss.id
-- limit to cat_id
WHERE s.cat_id = @cat_id
GROUP BY s.id; 
```

以及至少子步骤及其完整状态

```
SELECT
  ss.*, 
  IF( uss.substep_id IS NULL, 0, 1 ) completed,
  uss.datetime completed_at
FROM
  substeps ss
LEFT JOIN user_substep uss 
-- limit to user_id
ON uss.user_id = @user_id 
AND uss.substep_id = ss.id
-- limit to step_id
WHERE ss.step_id = @step_id; 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/d02b4/14)

通过所有这 3 个查询，您可以获得 GUI 演示所需的所有信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T13:40:50.443

您现在可能过于关注数据库结构：

*   如果您在分步过程的分步页面上，您可以查看该步骤是否已完成。更新步骤的状态。
*   如果您在一个步骤页面上，您还可以查询该步骤所属的所有步骤，并且当您在访问单个步骤页面时保持数据最新时，您可以只显示该步骤的状态。
*   如果没有分步程序，则需要一次更新所有步骤，但仅在您第一次进入分步程序时更新。
*   如果一个步骤和其他成就一样，那么它就像其他成就一样。将步骤的配置数据保留在成就（单步骤）之外。

然后你可以减少你的数据库结构，同时保持它更灵活，也更容易重用你的成就系统的程序。

例如，如果你决定有一天你想创造一项成就，如果有人完成了你所谓的继猫的整个类别，*如果*我没看错你的问题。

你需要做的就是检查*一个*或*n个*成就是否已经完成。因此，无论是否包含其他成就，都将所有成就保存在一张表中）。这属于其他地方。与类别相同。

一种常见的方法是对数据进行部分去规范化，例如，您可以在每个成就中保留一些自由文本，以在其中存储一些数据，以便分解处理可以使用。

运行管理员作业以保持数据井然有序，还可以检查您是否错过了检查更高级别的一些成就。无论如何，您都需要这样做，因为当您在处理过程中引入错误的第一刻，即使在完全标准化的形式中您不会违反任何约束，您的数据也会被破坏。因此，无论如何您都需要进行“手动”检查。

因为这一切，就去做吧。不要把头包得太紧，保持简单，完成工作，然后你可以考虑改进它。我可以给出的第一个建议是保持简单，这样你就不会犯那么多错误。您的系统将具有此处的答案无论如何都无法涵盖的专业。

所以你只需要：

1.  有一个定义成就的表
2.  有一个表来存储用户是否完成了一项成就。
3.  具有可以判断成就是否已完成的处理。
4.  有处理完成一个成就。

尽管：

*   多步形式的每一步也是一项成就。

是否是多步骤只是不是很有趣。这只是一个标准的成就。那将是最大的好处。将差异封装到处理中，而不是数据结构中。这将允许您现在和将来采用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-13T20:57:40.967

您的意思是您的 SQL 架构看起来像 step_cat <- steps <- substeps 吗？

如果是这样，表 tbl_user_stepcat 和 tbl_user_step 是无用的，因为您可以使用 JOIN 查询从给定的子步骤/步骤/猫获取所有父信息。

如果你想关注用户的成就，你应该有一个“achievement_history”表，关注用户、子步骤和定义的状态，它可能会根据其成就取一个特定的值。这样每行都引用给定的用户子步骤成就，然后每次给定子步骤将具有正确的成就状态，用户将能够处理另一个子步骤并插入新行。

请记住，使用嵌套查询是**一种丑陋的方式，**因为 DBMS 将永远无法计划查询，并且可能存储预定义的方式来获得应有的快速结果，如果正确设置，则使用索引和外键.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-14T10:39:49.437

你必须在后端编写 3 个存储过程，并使用前端的输入 Session[Username] 调用它们。

> > > storedprocedure1 .. listofcategories.. 输入 - 无，输出 - 类别属性
> > > 
> > > storedprocedure2.. listofcategories_filtered_by_user.. input- Session[UserName] output- 类别属性
> > > 
> > > 在这个存储过程中写入你写的 Join SELECT cat_name FROM tbl_step_cat JOIN tbl_user_stepcat ON tbl_user_stepcat.stepcat_id = tbl_step_cat.id
> > > 
> > > storedprocedure3.. listofsubcategories_filtered_by_user.. input- Session[UserName] output-（子类别属性）
> > > 
> > > 在这个存储过程中，为子类别编写 Join
> 
> **> 现在使用输入 Session[UserName] 参数从前端调用每个存储过程*******

# php - PHP、MySQL：通过 3 个表加载数据

> ID：14171967
> 
> 赞同：0
> 
> 时间：2013-01-05T12:51:36.947
> 
> 标签：php, mysql, sql, join

我有这 3 张桌子：

**字段**

```
- id
- field 
```

**学生们**

```
- id
- name
- birthday
- location
- ... 
```

**学生字段**

```
- id
- student_id
- field_id 
```

我想根据表**student_fields中所有****字段**的条件从数据库中加载所有学生，但是该怎么做呢？到现在为止，我有一个简单的加载学生：

 **```
//$s = "SELECT * FROM students JOIN WHERE name LIKE '%$search%'";
//$students = mysql_query($s); 
```

**编辑：**示例：表**字段**包含：

```
id | field
1  | Citizenship
2  | Geography
3  | History
4  | Languages
5  | Literacy
6  | Music
7  | Numeracy 
```

各个学生的表**student_fields**包含：

```
id | student_id | field_id
1  | 1          | 6
2  | 1          | 7 
3  | 1          | 3
4  | 2          | 7 
```

**目标：**对于 ID 为**1**的学生，我想打印出**他的字段**，在本例中为**Music**、**Numeracy**、**History**。

谢谢你们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T13:06:13.583

您正在编写的查询无效。要从表中选择（使用条件），SQL 应该是这样的：

`SELECT FROM students WHERE id > 10 AND age > 18`

另外，我建议您使用 PDO 或 Mysqli 语句，因为从 PHP 5.5 开始，PHP 正在弃用 mysql 函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T13:14:04.010

您的查询不符合您的问题，并且您没有提供更多信息，但是您可以尝试此查询

```
 SELECT * FROM fields f 
   INNER JOIN student_fields sf
   ON sf.field_id = f.id 
   INNER JOIN students s
   ON  s.id = sf.student_id
   WHERE s.name LIKE '%$search%' 
```

**编辑** 或者你可以使用`group_concat`

像那样

```
SELECT s.id ,s.name ,s.birthday,s.birthday ,s.location,group_concat(f.field) field 
FROM fields f 
INNER JOIN student_fields sf
ON sf.field_id = f.id 
INNER JOIN students s
ON  s.id = sf.student_id
WHERE s.name LIKE '%$search%' 
```

[**演示 SQL 小提琴**](http://sqlfiddle.com/#!2/cafe3/6)**

# android-emulator - 如何通过连接到电脑的安卓手机发送和接收消息

> ID：14171971
> 
> 赞同：0
> 
> 时间：2013-01-05T12:51:50.403
> 
> 标签：android-emulator

如何通过连接到pc的android手机发送和接收消息。应用程序是使用eclipse创建的。通过模拟器完成发送选项时，消息必须从连接的手机发送。因为我是 android 新手，请帮助我。

谢谢......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T13:02:10.950

如果您只想使用模拟器而不是真机，您可以按照给定的步骤操作：

打开一个控制台，通过 telnet 连接到正在运行的模拟器：telnet localhost 5554（你可以在模拟器的标题中找到端口号）输入：sms send senderPhoneNumber textmessage

否则，请检查链接：

[https://play.google.com/store/apps/details?id=act.main#?t=W251bGwsMSwxLDUwMSwiYWN0Lm1haW4iXQ](https://play.google.com/store/apps/details?id=act.main#?t=W251bGwsMSwxLDUwMSwiYWN0Lm1haW4iXQ) ..

# javascript - 如何在按钮 onClick 上调用多个函数？

> ID：14171974
> 
> 赞同：0
> 
> 时间：2013-01-05T12:52:10.723
> 
> 标签：javascript, asp.net, c#-4.0

我有一个搜索功能来搜索我的母版页中的人员记录，并且已经实现了自定义验证器。但奇怪的是，在某些页面中它可以工作，而对于其他页面，它会显示错误消息但导航到第二页。

因此，我尝试首先使用 JavaScript 进行验证，然后随着网站的发布以及对 html 和 CSS 的许多更改已在已发布的网站上进行了许多更改，并且对源代码进行相同的更改需要更多时间。想知道如何在 JS 中调用按钮的 onClick 函数，以便首先我检查 JS，如果条件为真，它会调用 onClick 函数，否则留在同一页面上。

```
<asp:Button runat="server" mouseClick="" ID="SearchButton" Text="Instant Search" OnClick="SearchButton_Click"  />

<asp:CustomValidator ID="CustomValidator1" runat="server" ErrorMessage="Please enter first name"
            ControlToValidate="firstname" 
            ForeColor="#FF3300" Font-Bold="True" 
            ValidateEmptyText="True" ClientValidationFunction="validateFname"></asp:CustomValidator>

function validateFname(source, arguments) {

            if (arguments.Value != "First Name...") {
                arguments.IsValid = true;
            } else {
                arguments.IsValid = false;
                alert("Please enter First Name")
                return false;
            }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T13:01:24.697

我认为您将必须创建一个调用多个函数的函数。通过这样做，您调用了一个函数，该函数将调用多个函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T20:51:41.863

请看看这些问题。它可以帮助您实现您的尝试

[从 javascript 调用 asp.net 代码隐藏函数](https://stackoverflow.com/questions/12425797/calling-asp-net-codebehind-function-from-javascript)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T12:31:59.763

您必须使用 onClientClick 事件来调用进行验证的 Javascript 函数。

`<asp:Button OnClientClick="validateFname();" runat="server" />`

# tsql - PostgreSQL DB 的 Lazarus Pascal TSQLQuery 参数类型

> ID：14171975
> 
> 赞同：2
> 
> 时间：2013-01-05T12:52:12.227
> 
> 标签：tsql, postgresql, compatibility, lazarus, sqldatatypes

我一直在 Lazarus 中使用**ParamByName**来指定用于不同字段的参数。它主要是**AsString**或**AsBoolean** ...

但现在我需要使用一个具有 8 个精度和 3 个十进制数字的数值。这当然不是货币（IMO）。

在 PostgreSQL 后端，我将其定义为**Numeric(8,3)**。

但是我如何在 Lazarus Pascal 中指定这一点？

使用**AsFloat**是否正确？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T14:20:24.757

我认为 Asfloat 是正确的。较新的 FPC 版本也可能支持 asBCD 或 asfmtbcd

我认为这并不重要，因为参数作为字符串数组传递给 postgresql。使用 BCD 可能会避免一些 float 的 base2 与 base10 舍入问题，但它的支持相对较新。

# sql - 在 T sql 查询方面需要帮助

> ID：14171982
> 
> 赞同：3
> 
> 时间：2013-01-05T12:53:31.993
> 
> 标签：sql, tsql, sql-server-2008-r2

我有两张桌子。其中的数据如下所示：

表格1：

```
Col1      Col2
----------------
A          A1
A          A2
A          A3
B          B1
B          B2
B          B3 
```

表 2：

```
Col1        Col2
------------------
A            A1
A            A4
A            A5
B            B1
B            B4
B            B5 
```

我需要根据 Col1 中的值找出两个表的 Col2 中的数据差异。输出应如下所示：

输出：

```
Col    MismatchValuesInTable1     Mismatchvaluesintable2
---------------------------------------------------------
A               A2                       A4
                A3                       A5
B               B2                       B4
                B3                       B5 
```

请帮我查询以实现上述目标。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-05T13:04:53.427

```
select isnull(t1.Col1,t2.Col2) as Col,
  t1.Col2 as MismatchValuesInTable1, 
  t2.Col2 as MismatchValuesInTable2

from t1
FULL JOIN t2 on (t1.Col1=T2.Col1) and (t1.Col2=t2.Col2)
where t1.Col2 is null or t2.Col2 is null
order by Col 
```

[SQLFiddle 演示](http://sqlfiddle.com/#!3/1c33d/5)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T16:30:09.073

这将生成您拥有的输出表。不确定职位是否对您的问题很重要？如果是这样，则基于表 T1 中 A 的第二个值与表 T2 中 A 的第二个值不匹配这一事实匹配。

```
create table T1
(col1 varchar(10),
col2 varchar(10))

create table T2
(col1 varchar(10),
col2 varchar(10))

insert into T1
select 'A','A1'
union all
select 'A','A2'
union all
select 'A','A3'
union all
select 'B','B1'
union all
select 'B','B2'
union all
select 'B','B3'

insert into T2
select 'A','A1'
union all
select 'A','A4'
union all
select 'A','A5'
union all
select 'B','B1'
union all
select 'B','B4'
union all
select 'B','B5'

select T1.col1, T1.col2, T2.col2
from (select row_number() over(partition by Col1 order by Col1, Col2) as row_number, 
* from T1) as T1
inner join 
(select row_number() over(partition by Col1 order by Col1, Col2) as row_number, 
* from B) as T2
on T1.col1 = T2.col1
and T1.row_number = T2.row_number
where T1.col2 <> T2.col2 
```

# c# - 与服务器同步时处理客户端数据库中的主键冲突

> ID：14171987
> 
> 赞同：0
> 
> 时间：2013-01-05T12:54:30.557
> 
> 标签：c#, sql-server, microsoft-sync-framework

**问题**

如何避免客户端/服务器数据库中的主键冲突

**背景**

我正在同步多个数据库。我有一个中央 SQL Server 数据库和许多客户端 SQL Server 数据库。现在说我在数据库中有一个表 X，它有一个主键 ID。

在第一个客户端中，我们在表 X 中有以下 ID：

X（客户端 1）
--------
1|SomeValue
2|SomeValue
3|SomeValue
4|SomeValue

在第二个客户中，我有

X（客户端 2）
--------
1|SomeValue
2|SomeValue
3|SomeValue
4|SomeValue

当我同步时，我希望客户端只上传他们的数据而不是下载它们。

现在，当我将第一个客户端与服务器同步时，它将添加来自 (1 .. 4) 的主键。但是，当我与第二个客户端同步时，会出现 PRIMARY KEY CLASH。我怎么解决这个问题？

我正在使用 SQL Server 2008 R2、同步框架和 C#。

我已经考虑过使用 GUID 作为主键的想法，这在我的情况下是不可行的，因为我正在处理旧数据库。此外，重新播种 IDENTITY 值的想法有点容易出错。如何在不插入值的情况下增加标识列？PS：主键设置为 IDENTITY，增量为 1。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-05T15:17:23.657

为了支持能够插入记录的分布式客户端，模式必须支持客户端数据库创建没有冲突的行。这意味着要么使用 PK 的 GUID，要么使用串联的密钥。(ID + ClientID) *无论哪种方式，架构更改。

否则，手动同步客户端数据库意味着要么在插入之前检查冲突的 ID，要么处理异常然后替换 ID，或者允许为冲突的记录生成身份。这意味着更新所有 FK 关系。耗时且容易出错。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T16:46:38.270

有几种方法可以做到这一点。第一个是是否有保证唯一键，上游和下游数据库都可以通过该键来引用该记录。在 SQL Server 的情况下，您想要的密钥类型是 UNIQUEIDENTIFIER（又名 GUID）。

现在，如果由于某种原因您不能使用 UNIQUEIDENTIFIER，那么第二好的选择是为位置或类似的东西添加一个额外的列。此列将标识记录来自的单个数据库。例如，第一个客户端的位置 ID 可能为 1，第二个客户端的位置 ID 为 2，依此类推。然后，您可以将现有主键修改为该位置 ID 和当前 ID 的复合键。

第三种选择是根本不修改客户端数据库，而仅将位置 ID 列添加到“主”数据库中的表中。如果您在代码中手动同步，则代码需要考虑记录的来源并酌情添加 id。这可能很困难，但肯定是可能的。

除非您必须重新设定客户端数据库的种子，才能在特定点启动它们的身份值。例如，客户端 1 可能会获得 1 到 10000 的值，客户端 2 可能会获得 10001 到 20000 的值。但是，您可以在此处看到失败的可能性。不仅如果客户端超出了您允许的范围，而且如果您设置了其他客户端并且有人搞砸了种子值。此外，修复所有现有客户将是一个完整的 PITA。

* * *

附带说明一下，在构建您知道将有一个需要合并的分布式数据库的应用程序时，简单地使用 GUID 作为主键几乎是普遍的明智之举。是的，它会分割索引等，但在这种情况下，这些缺点比完整的 PITA 更可取，并且当您最终将所有这些数据合并在一起时可能发生的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T02:56:51.880

除了@Chris 的第三个选项，如果您使用的是 Sync Framework，您实际上可以“欺骗”它为服务器端 PK 添加一个额外的列。

请参阅：[第 1 部分 – 客户端和服务器主键不同的上传同步](http://jtabadero.wordpress.com/2011/03/14/upload-synchronization-where-the-client-and-server-primary-keys-are-different/)

# iphone - 如何在xcode上制作一个按钮？

> ID：14171989
> 
> 赞同：0
> 
> 时间：2013-01-05T12:54:36.063
> 
> 标签：iphone, xcode

我在 Xcode 上设计一个按钮时遇到了麻烦。

我正在使用以下代码：

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundRect];
button.frame=CGRectMake(80.0,210,160,40);
[self.view addSubview:button]; 
```

代码是构建成功。但是这个错误来了：

> 线程 1：EXC_BAD_ACCESS（代码=2，地址=0xbf7ffffdc）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T12:59:48.107

这是您可以根据所需的背景和文本颜色创建自定义按钮的方式。

```
 btn_fbLogin = [[UIButton alloc]initWithFrame:CGRectMake(95,254,130,41)];
[btn_fbLogin setTitle:@"FLogin" forState:UIControlStateNormal];
[btn_fbLogin addTarget:self action:@selector(FacebookLogin) forControlEvents:UIControlEventTouchUpInside];
[btn_fbLogin setBackgroundColor:[UIColor whiteColor]];
btn_fbLogin.clipsToBounds = YES;
btn_fbLogin.layer.cornerRadius = 5.0f;
[btn_fbLogin setTitleColor:[UIColor colorWithRed:244/255.0  green:185/255.0 blue:25/255.0 alpha:1.0] forState:UIControlStateNormal];
[btn_fbLogin setTitleColor:[UIColor whiteColor] forState:UIControlStateHighlighted];     
[self.view addSubview:btn_fbLogin]; 
```

并且不要忘记导入`#import <QuartzCore/QuartzCore.h>`

希望这可以帮助..：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T12:56:15.657

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
button.frame = CGRectMake(80.0,210,160,40);
[button setTitle:@"Submit" forState:UIControlStateNormal];
[self.view addSubview:button]; 
```

您得到的错误似乎不是 UIButton 的原因。你能指定更多吗？

# ruby-on-rails-3 - rails如何在与父级更新时合并嵌套属性中的用户ID

> ID：14171990
> 
> 赞同：1
> 
> 时间：2013-01-05T12:54:40.247
> 
> 标签：ruby-on-rails-3, has-many-through, update-attributes

我正在使用导轨 3.0.9

我有`has_many :through`关联模型，用户可以在创建新父记录时创建新的子记录，在更新父记录时，用户可以创建/删除子记录

例如：

```
class Post < ActiveRecord::Base
  has_many :comments_posts
  has_many :comments, :through => :comments_posts
  attr_accessible :title, :post_text, :comments_attributes
  accepts_nested_attributes_for :comments
  validates :user_id, :title, :post_text, :presence => true
end

class Comment < ActiveRecord::Base
  attr_accessible :comment_text
  has_many :comments_posts
  has_many :posts, :through => :comments_posts
  validates :comment_text, :user_id, :presence => true
end

class CommentsPost < ActiveRecord::Base
  belongs_to :comment
  belongs_to :post
end 
```

在posts_controller.rb 中，我还保存/更新评论记录`fields_for`，用于在Post 中形成nested_attributes，`form_for`并按预期形成参数。

```
def edit
  @post = Post.find(params[:id])
end

def update
  @post = Post.find(params[:id])
  @post.update_attributes(params[:post])
end 
```

**问题是：**

在这里，我无法合并`user_id`每个新嵌套评论属性的列，`params[:post][:comments_attributes]`其中将被忽略`attr_accessible`。

有没有最好的方法将`user_id`列合并/分配给每个评论记录？

# c++ - C++映射函数中的向量相等

> ID：14171992
> 
> 赞同：0
> 
> 时间：2013-01-05T12:55:24.317
> 
> 标签：c++, map

有一段代码我改成了更清晰的代码。这里是：

```
map <TwoWayHostPair, Traffic> traffic;
static map <TwoWayHostPair, Traffic>::iterator trafficItr;

trafficItr = traffic.find(hostPair);
if (trafficItr == traffic.end()) { 
      trafficItr = traffic.insert(make_pair(hostPair, Traffic())).first;
} 
```

这不是完整的代码。这只是代码的一部分。所以它不会编译不是答案，现在它编译

`traffic.first`是类的一个属性`TwoWayHostPair`。我认为`if(trafficItr == traffic.end())`意味着 if`trafficItr`不等于`traffic`which 可能不正确。

有谁知道我的说法是否属实？如果它是真的，什么时候`trafficItr`等于`traffic`结果会是什么？是不是有点像`trafficItr == traffic.begin()`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T12:57:20.933

这不是正确的`c++`代码。`find`如果未找到该元素，则返回映射中元素的迭代器或结束迭代器。将映射分配给 find 的结果将无法编译。您也不能将地图与另一张地图的结束迭代器进行比较。另请注意，您必须通过才能找到 TwoWayHostPair 的实例或可转换为此类实例的东西。

代码的想法如下：

```
map <TwoWayHostPair, ClassA> variableA, variableB;
//variableA is set to a proper value

map <TwoWayHostPair, ClassA>::iterator iter;
iter = variableB.find(TwoWayHostPair_instance)

if(iter == variableB.end())
     //do something 
```

仅当在地图中找不到元素时才执行操作。

# java - 无法连接到相机服务，错误 -2147483648

> ID：14171994
> 
> 赞同：1
> 
> 时间：2013-01-05T12:55:30.420
> 
> 标签：java, android

我想使用以下方法在 Android 手机上打开一个新的 Camera 实例：

```
camera = Camera.open(); 
```

在我这样做之前，我会检查是否有带有 PacketManager 的摄像头。我还在清单中添加了`permission.CAMERA`and 功能`hardware.camera`。如果我尝试打开实例，我总是会得到一个

```
01-05 13:47:48.720: E/Camera(6555): Error -2147483648 
```

谁能告诉我为什么会发生这种情况以及如何打开一个实例？

```
 01-05 16:54:39.670: E/AndroidRuntime(9295): FATAL EXCEPTION: Thread-17341
    01-05 16:54:39.670: E/AndroidRuntime(9295): java.lang.RuntimeException: Fail to   connect to camera service
    01-05 16:54:39.670: E/AndroidRuntime(9295):     at    android.hardware.Camera.native_setup(Native Method)
    01-05 16:54:39.670: E/AndroidRuntime(9295):     at android.hardware.Camera.<init>(Camera.java:302)
    01-05 16:54:39.670: E/AndroidRuntime(9295):     at android.hardware.Camera.open(Camera.java:279)
    01-05 16:54:39.670: E/AndroidRuntime(9295):     at com.arcticcoding.nxtphone.MainActivity$GetCameraInstance.getCameraInstance(MainActivity.java:73)
    01-05 16:54:39.670: E/AndroidRuntime(9295):     at com.arcticcoding.nxtphone.MainActivity$GetCameraInstance.run(MainActivity.java:84)
    01-05 16:54:39.670: E/AndroidRuntime(9295):     at java.lang.Thread.run(Thread.java:856) 
```

这是我打开相机实例的方法

```
 private Camera getCameraInstance() {
    Camera camera = null;
    try {
        Log.d(TAG, "Opening camera instance");
        camera = Camera.open();
    } catch(Exception e) {
        Log.d(TAG, "Error while opening camera");
        e.printStackTrace();
    }
    return camera;
} 
```

## 显现

```
 ...
    <uses-permission android:name="android.permission.CAMERA"/>
    <uses-feature android:name="android.hardware.camera"/>
    ... 
```