# StackOverflow 问答 14668000-14668999

# c - C/POSIX-pthread_t 的阻塞直到任务完成

> ID：14668000
> 
> 赞同：0
> 
> 时间：2013-02-03T00:08:13.630
> 
> 标签：c, multithreading, pthreads, posix

我有一组 pthreads，它们都需要完成一个任务，然后阻塞直到最后一个完成任务，然后让它们全部移动到下一个任务。这发生在许多任务中。

我正在考虑有一个计数器，它开始等于每个任务开始时的线程数，并且当每个线程完成一个任务时，它会使用互斥锁安全地递减它，直到最后一个线程使其为零。在任务结束时，除了最后一个要完成的线程之外的所有线程都会调用 pthread_cond_wait，最后一个线程会调用 pthread_cond_broadcast 来告诉其他线程进入下一个任务。然后最后一个线程不会等待，而是也会继续执行此任务。

但是，我留下了一个问题。不能保证倒数第二个递减计数器的线程会在最后一个线程调用 pthread_cond_broadcast 之前调用 pthread_cond_wait。

C 和 POSIX 有什么方法可以安全地处理这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T00:26:10.873

您正在寻找的工具是障碍。

用等待到达它的线程数初始化屏障：

```
pthread_barrier_init(&barrier, NULL, N); 
```

然后，每个线程调用：

```
pthread_barrier_wait(&barrier); 
```

The wait blocks until N threads are waiting on it, then all N wake up (conceptually) before any of them return from the wait call.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T00:11:15.663

我认为您正在寻找[pthread_join](http://pubs.opengroup.org/onlinepubs/7908799/xsh/pthread_join.html)。

* * *

**编辑**：我猜你是想不破坏线程。

[`pthread_cond_wait`](http://pubs.opengroup.org/onlinepubs/7908799/xsh/pthread_cond_wait.html)应该与互斥锁一起使用，例如：

```
int counter;                      // initialized to number of threads
struct pthread_cond_t condition;  // initialized previously
struct pthread_mutex_t mutex;     // initialized previously

pthread_mutex_lock(&mutex);
counter -= 1;
while (counter > 0)
    pthread_cond_wait(&condition, &mutex);
pthread_cond_broadcast(&condition);
pthread_mutex_unlock(&mutex); 
```

这将处理锁定、计数器和条件，而无需使用单独的信号量。（您实际上是在实现某种“反向信号量”。）

# html - 输入元素以填充其容器的剩余宽度

> ID：14668003
> 
> 赞同：0
> 
> 时间：2013-02-03T00:08:26.690
> 
> 标签：html, css

这个问题经常被问到，但到目前为止，没有一个解决方案对我们有帮助。 `form`的宽度设置为 100%，`holder`相对宽度为 10%，现在我想用`input_edit`. 有人能帮我吗？谢谢！！

这是我的 HTML

```
<form>
    <textarea rows="4" name="in" class="input_edit"> </textarea>
    <div id="holder"></div>
</form> 
```

还有我的 CSS

```
form {
width: 100%;
overflow: hidden;
} 
.input_edit {

-webkit-box-sizing: border-box;
-moz-box-sizing: border-box;
-ms-box-sizing: border-box;
box-sizing: border-box; 

width: auto;

background-color: transparent;
box-shadow: inset 0 0 5px rgba(0,0,0,0.4);
border: 5px solid #666; 
margin: 5px;
border-radius: 5px;
height: 60px;

float: left;

}
#holder { 
border: 5px dashed #666; 
border-radius: 5px;

margin: 5px;
width: 10%; 
height: 60px; 
float: right;
} 
```

编辑：

`holder`现在是 10%，但我希望它隐藏在移动设备上，所以我不能使用 100-10=90%，问题也是`box-sizing`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T00:40:45.647

CSS3`width: calc(90% - 30px);`可以工作 - 但是支持它的浏览器数量非常有限。

下一个最佳解决方案可能是使用 jQuery（或 JavaScript）手动计算正确的宽度。就像是：

```
 $(".input_edit").width($("form").width() - $("#holder").width() - 40); 
```

然后在宽度`form`变化时更新它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T00:30:48.493

您必须删除 .input_edit 和 #holder 上的边距，并应用 box-sizing:border-box; 对那些元素。

Border-box 将填充和边框放在 10% 和 90% 中，而不是边距。为了更好地了解如何创建排水沟，我建议您观看此视频：[http ://css-tricks.com/video-screencasts/115-dont-overthink-it-grids/](http://css-tricks.com/video-screencasts/115-dont-overthink-it-grids/)

我很确定这会回答你的很多问题。

# mongodb - 简单的 MongoDB 查询

> ID：14668005
> 
> 赞同：0
> 
> 时间：2013-02-03T00:08:48.510
> 
> 标签：mongodb

试图了解 MongoDB，

此查询不会向 db 中插入任何内容：

```
> names = ['Serg', 'Bob', 'Sean', 'Sophia'];
[ "Serg", "Bob", "Sean", "Sophia" ]
> for (i=0; i<names.lenght; i++) db.people.insert({ name: names[i], age: Math.round(Math.random()*60) });
> db.people.find()
> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T00:14:13.277

那是因为错字：`lenght -> length`

也许需要明确地创建集合，如`db.createCollection('people');`

# html - layout issues when IE9 Compatability View is Off

> ID：14668007
> 
> 赞同：1
> 
> 时间：2013-02-03T00:09:04.730
> 
> 标签：html, css, jsfiddle

I am having trouble in my layout in IE9 compatibility View `On` . In all major browsers (including IE9 compatibility view off), the layout is fine. But it seems like textarea stays shrunk in IE9 and text inputs are shrunk. Below show the difference between the wanted layout in the other browsers and the incorrect layout in the IE9 compatibility view:

![enter image description here](../Images/be2e1a59dae52030b3de98ed9dfadeb5.png)

My question is simply how to fix the layout?

I have provided a jsfiddle to show the code: [http://jsfiddle.net/U9Nm8/embedded/result/](http://jsfiddle.net/U9Nm8/embedded/result/) (IN JSFiddle the layout looks fine)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T00:35:16.620

`X-UA-Compatible`只需添加带有值的HTTP 响应标头或元元素`IE=edge`即可防止用户切换到兼容性视图模式：

```
<meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
```

兼容性视图模式不是为开发网站而设计的，您不应该关心您的标准兼容网站在 IE 中打开此模式时的外观。兼容性视图模式仅有助于查看为旧 IE 版本开发的旧站点，否则无法正常工作。

# java - Running multiple system commands using Java

> ID：14668009
> 
> 赞同：1
> 
> 时间：2013-02-03T00:09:18.177
> 
> 标签：java, runtime

How can I run multiple windows system commands (using Java) in order, with the second depending on the result of the first?

Like this:

```
adb.exe -s emulator-5554 shell
ls 
```

and get the list result.

This is my source code, but it is not working:

```
public void connectToDevice(String device) {
    List<String> cmd = new ArrayList<String>();
    cmd.add("adb.exe -s " + device + " shell");
    cmd.add("ls");
    try {
        ProcessBuilder pb = new ProcessBuilder(cmd);
        pb.redirectErrorStream(true);
        Process process = pb.start();
    } catch (IOException e) {
        System.err.println(e.getMessage());
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T00:19:10.450

`ProcessBuilder(List<String>)`构造函数不打算并行运行多个命令。它将第一个元素列表作为命令，将后续元素作为其参数，因此实际执行的是`adb.exe -s emulator-5554 shell ls`一个命令。将其分为两个过程：

```
ProcessBuilder pb1 = new ProcessBuilder("adb.exe -s " + device + " shell");
pb1.redirectErrorStream(true);
Process p1 = pb1.start();
p1.waitFor();

ProcessBuilder pb2 = new ProcessBuilder("ls");
pb2.redirectErrorStream(true);
Process p2 = pb2.start();
p2.waitFor(); 
```

# java - 阻止新创建的对话框获得焦点

> ID：14668010
> 
> 赞同：3
> 
> 时间：2013-02-03T00:09:29.050
> 
> 标签：java, swing, focus, jdialog

我正在尝试创建 Java Swing 对话框，但我不想让对话框将焦点从当前关注的内容中移开。因此，例如，如果您正在编辑一个 word doc 并且另一个应用程序创建了一个对话框，您应该会看到该对话框，但 word doc 应该保持焦点，以便您可以继续编辑。

我已经在 Mac OSX 和 Ubuntu 12.04 上测试了以下代码。在 Mac 上，代码创建的对话框不会像我想要的那样获得焦点。在 Ubuntu 上，对话框成为焦点，在创建它们时我无法输入。

我真的希望这不是特定于操作系统的。有什么方法可以在所有平台（或至少 Ubuntu）上实现我想要做的事情？

```
import javax.swing.*;
import java.awt.Color;
import java.util.Random;

public class Focus {
    private static Random r = new Random();

    public static void main(String[] args) {
        while(true) {   
            try {
                Thread.sleep(500);
                createObject(r.nextInt(1000), r.nextInt(600));
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    }

    public static void createObject(int x, int y) {
        JDialog testDialog = new JDialog();
        testDialog.setSize(50, 50);
        testDialog.setLocation(x, y);
        testDialog.setAlwaysOnTop(true);
        testDialog.setUndecorated(true);
        testDialog.setFocusable(false);
        testDialog.setEnabled(false);
        testDialog.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T00:48:55.007

也许：

```
testDialog.setFocusableWindowState(false); 
```

# api - 通过 gettyimages api 上传

> ID：14668018
> 
> 赞同：0
> 
> 时间：2013-02-03T00:10:16.567
> 
> 标签：api, image-uploading

有没有办法将照片上传到 gettyimages？他们在 API 中没有它（[https://api.gettyimages.com/de/apis](https://api.gettyimages.com/de/apis)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T07:20:51.513

事实并非如此。从[这里](http://contributors.gettyimages.com/article_public.aspx?article_id=2371)（强调我的）：

> 对于 35 毫米数码拍摄，我们强烈建议使用专业品质的数码单反相机，使用**RAW 或未压缩的 TIFF 格式**。

RAW 或未压缩的 TIFF 图像往往非常大，这可能会使通过 API 上传它们有问题。相反，贡献者将使用[上传门户](https://upload.gettyimages.com/)为 Getty 图像提供内容。

此外，您的图像必须经过[提交过程](http://contributors.gettyimages.com/article_public.aspx?article_id=2373)，这表明该 API 无法使用。

Getty Images 确实有一个任何人都可以提交的[Flickr 收藏](http://www.gettyimages.co.nz/Creative/Frontdoor/FlickrPhotos)，尽管再次有[提交过程](http://www.gettyimages.com/creative/frontdoor/contributors)。

# magento - Magento custom template - edit lightbox sizing

> ID：14668023
> 
> 赞同：2
> 
> 时间：2013-02-03T00:10:35.413
> 
> 标签：magento

I am using a custom magento template which has a lightbox on the product page. I can set the max width/height for the lightbox in the config as a percentage of the screen (ie 95%). The problem is it then uses this as the default value so even it is is a really small image it will stretch it out to 95% of the screen and cause the image to pixelate.

I would like it to use this percentage as a maximum only but if the actual image is smaller than this then it would use the actual image dimensions.

I have found a file with this code which I think I may need to edit but I am not sure how to go about this in Magento:

```
<?php
    $maxWidth   = $zoomHelper->getCfg('lightbox/max_width');
    $maxHeight  = $zoomHelper->getCfg('lightbox/max_height');
    $cfg = '';
    if ($maxWidth)
        $cfg .= ", maxWidth:'{$maxWidth}'";
    if ($maxHeight)
        $cfg .= ", maxHeight:'{$maxHeight}'";
?> 
```

Any ideas?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T00:32:30.407

我这样做的方法是加载相对较大的图像作为基本产品图像。当产品/视图呈现时，构建一个 js 对象，其中包含大图像的 url 以及您需要的任何缩略图。然后，您的灯箱应使用 js 对象作为数据源。

**媒体.phtml**

```
<script> var images = {};</script>

<?php $_images = Mage::getModel('catalog/product')->load($_product->getId())->getMediaGalleryImages(); ?>
<?php if($_images){?>            
    <?php $i=0; foreach($_images as $_image){ $i++; ?>
        <img src="<?php echo $this->helper('catalog/image')->init($_product, 'thumbnail', $_image->getFile())->resize(108,90); ?>" alt="<?php echo $this->htmlEscape($_image->getLabel());?>" title="<?php $this->htmlEscape($_image->getLabel());?>" /><?php } ?>

        <script> images.bigsrc = "<?php echo $this->helper('catalog/image')->init($_product, 'thumbnail', $_image->getFile())->resize(800,800); ?>"  </script>
    <?php } ?> 
```

然后，您有一个 js 对象，其中包含您需要的任何大小图像的 url。将其传递到灯箱/花式箱等。

您肯定必须根据您的需要对其进行定制 - 主要是在创建您可以使用的 js 对象方面。

有关在法师中调整图像大小的一些信息：http: [//www.magthemes.com/magento-blog/customize-magentos-image-resize-functionality/](http://www.magthemes.com/magento-blog/customize-magentos-image-resize-functionality/)

# php - preg_replace_callback finding 2 matches should be 1

> ID：14668024
> 
> 赞同：0
> 
> 时间：2013-02-03T00:10:47.723
> 
> 标签：php, preg-replace-callback

I have the following code being shown in a textbox and am turning it into a table:

```
foreach([-Order Detail List([-Order Id-])-]){{
   [-order_detail_id-]
   [-order_id-]
   [-account_id-]
   [-order_detail_assigned-]
}} 
```

I'm doing the replace callback with this function:

```
preg_replace_callback('/(foreach)\(.*?\).*?\}\}/is', array($declaration, 'GetListPlaceholderConverter'), $email_body); 
```

In the logic I have:

```
$x = 0;
foreach($matches as $match){
 $x++;
}
return $x; 
```

$x keeps returning 2 even though it should be one.... Whats wrong with my callback?

var_dump($matches) is returning:

```
array(2) { [0]=> string(153) "foreach([-Order Detail List([-Order Id-])-]){{ 
[-order_detail_id-] 
[-order_id-] 
[-account_id-] 
[-order_detail_assigned-] 
}}" [1]=> string(7) "foreach" } 
```

How is that 2nd string getting in there?

# java - Java code to return system name on which it is running

> ID：14668025
> 
> 赞同：1
> 
> 时间：2013-02-03T00:11:02.213
> 
> 标签：java, jsp

I am trying to write a java code that will return the name of the machine on which it is running as in the name of the remote machine from which I am accessing the code instead of the machine where it is actually running. I have this code but it returns the name of parent machine in output instead of the remote machine:

public void doGet(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException { res.setContentType("text/html"); PrintWriter out = res.getWriter();

```
String remoteUser = req.getRemoteUser();
} 
```

This code is on a system with name : Animesh I am trying to access the code through another machine named: Bhaskar using the system's IP address as in :8080/website/home

I am expecting it to return Bhaskar as username but it returns Animesh instead

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T00:42:59.077

据我了解，如果 getRemoteHost 包含 IP，则请求机器不会发送其名称。

在网上找到这个，也许它有帮助：[http ://docstore.mik.ua/orelly/java-ent/servlet/ch04_03.htm](http://docstore.mik.ua/orelly/java-ent/servlet/ch04_03.htm)

谷歌可能也会为您提供更多答案。

# javascript - 如何在经典 ASP 中分离实时环境和测试环境？（请在取消标记 jQuery / JS 之前阅读）

> ID：14668030
> 
> 赞同：0
> 
> 时间：2013-02-03T00:11:44.773
> 
> 标签：javascript, jquery, asp-classic

我正在编写一个应用程序，它将在 Classic ASP 中具有实时和测试环境。这些用途包括很多。但是，因为包含是在 ASP 之前处理的，所以我不能简单地说如下：

```
<%
    if <Test Environment Condition> then
%>
        <!-- #include virtual="/myAppTest/start.asp" -->
<%
    else
%>
        <!-- #include virtual="/myApp/start.asp -->
<%
    end if
%> 
```

这基本上会将 BOTH 包含加载到 BOTH 环境中，如果 ONE 环境中存在格式错误的函数或类似的东西，则会在 BOTH 环境中引发错误。我可以看到，分离环境的唯一方法是拥有一个虚拟目录，它只包含一个 URL（/myApp 或 /myAppTest），并且此 URL 用于 jQuery .load URL，例如。我能看到的唯一方法是通过 JS 动态加载内容。

另一种解决方法是在两台服务器上拥有相同的虚拟目录，一台测试服务器和一台实时服务器。但是，由于原因过于复杂且可能过于机密而无法解释，因此无法使用此选项。

第一种方法，通过 JS 动态加载内容，是最好的方法还是我错过了什么？

提前致谢。

问候，理查德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T00:17:29.797

将应用程序设置在不同的网站下，而不是在 vdir 下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T11:30:19.580

出于您提到的原因，请勿完全使用服务器端包含。

相反，您可以在*global.asa*文件中设置单个应用程序级别变量，并在其中定义“环境”。例如：

```
Application("Environment") = "Local" 
```

然后“包含”适当的功能：

```
Server.Execute(Application("Environment") & "_functions.asp") 
```

有了**Local_functions.asp**和**Prod_functions.asp**文件，您就可以根据该应用程序变量包含适当的函数。

# rmi - RMI and 2 machines - two way communication

> ID：14668031
> 
> 赞同：0
> 
> 时间：2013-02-03T00:11:46.007
> 
> 标签：rmi

I've got problem with RMI comunication between 2 machines (win 7 and win xp VM). The exception with I have problem is:

```
java.rmi.ConnectException: Connection refused to host: 169.254.161.21; nested    exception is: 
java.net.ConnectException: Connection timed out: connect 
```

It's really weired because during connection I use address 192.168.1.4 (server), but exception somehow show sth different. I disabled firewall on both side. Ping working to both side. I tried telnet to server and use server port: telnet 192.168.1.4 1099 and it's working... I can't figure out where the problem is. If I run this on host side (eg server side) everything works fine.

How is it look from SERVER:

```
public class Server  
{
  public static void main(String args[]) 
  {
InputStreamReader is = new InputStreamReader(System.in);
BufferedReader br = new BufferedReader(is);

String portNum, registryURL;
try{       

  System.out.println("Enter the RMIregistry port number:");
  portNum = (br.readLine()).trim();
  int RMIPortNum = Integer.parseInt(portNum);
  startRegistry(RMIPortNum); // Registry registry = LocateRegistry.createRegistry(RMIPortNum);
  ServerSide_Impl exportedObj = new ServerSide_Impl();
  registryURL = "rmi://localhost:" + portNum + "/callback";
  //registryURL = "rmi://192.168.1.4:" + portNum + "/callback";

  Naming.rebind(registryURL, exportedObj);
  System.out.println("Callback Server ready.");

}// end try
catch (Exception re) {
  System.out.println(
    "Exception in HelloServer.main: " + re);
 } // end catch
 } // end main

//This method starts a RMI registry on the local host, if
//it does not already exists at the specified port number.
private static void startRegistry(int RMIPortNum) throws RemoteException
{
try 
{
  Registry registry = LocateRegistry.getRegistry(RMIPortNum);
  registry.list( );  
    // This call will throw an exception
    // if the registry does not already exist
}
catch (RemoteException e) 
{ 
  Registry registry = LocateRegistry.createRegistry(RMIPortNum);
}
} // end startRegistry

} // end class 
```

Client side is look like:

```
try
    {
        this.serverAd = serverAddress.getText();
        String path = System.getProperty("user.dir");
        String pathAfter = path.replace("\\", "/");
        String pathFile = "file:/"+pathAfter + "/wideopen.policy";

        System.setProperty("java.security.policy", pathFile);           
        System.setSecurityManager(new RMISecurityManager());

        this.hostName = hostNameTextField.getText();
        this.portNum = hostPortNumberTextField.getText();          
        RMIPort = Integer.parseInt(this.portNum);
        this.time = Integer.parseInt(timeTextField.getText());
        //this.registryURL = "rmi://localhost:" + this.portNum + "/callback";  
        String registryURLString = "rmi://"+this.serverAd+":" + this.portNum + "/callback"; 
        this.registryURL = registryURLString;
        ConsoleTextField.append("\n"+ this.registryURL + "\n");

        // find the remote object and cast it to an 
        // interface object     

        obj = (ServerSide_Interface)Naming.lookup(this.registryURL);
        boolean test = obj.Connect();
        if(test)
        {
            callbackObj = new ClientSide_Impl();
            // register for callback
            obj.registerForCallback(callbackObj);

            isConnected = true;

            ConsoleTextField.append("Nawiązano połaczenie z serwerem\n");
            TableModel modelTemp = obj.Server_GenerateStartValues();
            myDataTable.setModel(modelTemp);

            myDataTable.setEnabled(true);
        }
        else ConsoleTextField.append("Brak połączenia z serwerem\n");

    }
    catch (Exception ex ){
        ConsoleTextField.append(ex + "\n"); 
        System.out.println(ex);
    } 
```

This connection is working fine if I run client on host side. If I use VM and try connect between 2 different machines, I can;t figure out what did I do bad

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T03:28:17.023

There is something wrong with your etc/hosts file or your DNS setup. It is providing the wrong IP address to the server as the server's external IP address, so RMI embeds the wrong address into the stub, so the client attempts to connect to the wrong IP address.

If you can't fix that, you can set the system property `java.rmi.server.hostname` to the correct IP address at the server JVM, before exporting any RMI objects (including Registries). That tells RMI to embed that address in the stub.

# javascript - 将事件侦听器附加到 jQuery 中动态生成的图像？

> ID：14668032
> 
> 赞同：0
> 
> 时间：2013-02-03T00:12:00.950
> 
> 标签：javascript, jquery

我正在使用 jquery 动态地将图像添加到我的页面中。基本上，我在页面上创建图像的“pixel-y / lo-res”版本，并在原始页面上添加页面加载。然后一个典型的“在悬停时淡出”的东西应该在鼠标悬停时淡出它们，显示原始......好像“向上 - 调整”......如果这是有道理的。

所以我得到了图像。但不知何故，悬停侦听器没有附加。起初我尝试悬停，现在我点击只是因为它更容易排除故障。没有。

.on() 函数甚至应该将自身附加到动态添加的项目，对吗？出了什么问题？我没有收到任何错误。它只是不工作。

```
$.ajax({
        type:"POST",
        url:"js/pixelsandwich/pixelsandwich.php",
        data:{src:src},
        success:function(response){  // if there is already a "lo-rez" image, I get that URL.. if there isn't, one is created and I return that URL
            newImg = $("<img class='crunched'>"); // create the new <img>
            newImg.attr('src', response); // assign the source
            frame = $that.parent(); // grab the containing frame
            frame.append(newImg);  // add the new image.  css:position:absolute and z-index take care of the rest
        }
    });

$(".crunched").on("click", function(){  // << this just isn't attaching at all
     alert("hello");
    $(this).fadeTo('slow',0.5);
}); 
```

有人帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T00:14:48.177

> .on() 函数甚至应该将自身附加到动态添加的项目，对吗？

不，对于动态创建的元素，您必须使用绑定`.on()`到代码运行时已经存在的元素。最坏的情况通常是 body 元素，但你可以在 DOM 中选择的元素越近越好。

假设 .crunched 是您动态添加的元素的类，请尝试：

```
$("body").on("click", ".crunched", function(){  // << this just isn't attaching at all
     alert("hello");
    $(this).fadeTo('slow',0.5);
}); 
```

根据 jQuery 文档：

> 事件处理程序仅绑定到当前选定的元素；当您的代码调用 .on() 时，它们必须存在于页面上。为确保元素存在并且可以被选择，请在页面 HTML 标记中的元素的文档就绪处理程序内执行事件绑定。如果将新 HTML 注入页面，请在将新 HTML 放入页面后选择元素并附加事件处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T00:15:06.780

该`on`方法应该用于将事件处理委托给动态添加的元素的现存*祖先*。例如：

```
$(document).on("click", ".crunched", function(){  // << this just isn't attaching at all
     alert("hello");
    $(this).fadeTo('slow',0.5);
}); 
```

`$(".crunched")`当您运行代码时，该集合是空的，因此事件处理程序没有附加到任何东西。

# php - PHP - Duplicate array values

> ID：14668035
> 
> 赞同：-1
> 
> 时间：2013-02-03T00:12:24.190
> 
> 标签：php

so i have this array;

```
Array ( [0] => A [1] => B [2] => C ) 
```

what i want to do is;

```
Array ( [0] => A [1] => A [2] => A [3] => B [4] => B [5] => B [6] => C [7] => C [8] => C) 
```

repeat each value, A-A-A-B-B-B-C-C-C

i have tried array_merge and gives me A-B-C-A-B-C

thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T00:15:19.803

```
$orig = array('A', 'B', 'C');

$new = array();
foreach ($orig as $item) {
    $new[] = $item;
    $new[] = $item;
    $new[] = $item;
} 
```

# javascript - 使用“document.write”更新页面会删除格式

> ID：14668038
> 
> 赞同：3
> 
> 时间：2013-02-03T00:13:00.243
> 
> 标签：javascript, html

我一直想知道是否有办法阻止我的函数隐藏任何当前的文本/格式。

```
<body>
<script type="text/javascript">
document.body.style.backgroundColor = "#F5F0EB";
var page = 0
function flip(){
document.write(page);
page++;
}
</script>
<input type=button value="Next" onClick="flip()">
</body> 
```

当我按下按钮时，我失去了彩色背景并出现了文本。有没有办法让背景保持不变并出现文字？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T00:19:21.907

是的，不使用`document.write()`. [MDN 解释得很清楚](https://developer.mozilla.org/en-US/docs/DOM/document.write#Notes)：

> 在没有调用 document.open() 的情况下写入已经加载的文档将自动执行 document.open 调用。

关于`document.open()` [它说](https://developer.mozilla.org/en-US/docs/DOM/document.open#Notes)：

> 如果目标中存在文档，则此方法将其清除。

您*应该*做的是操作 DOM 中的节点。例如，您可以更改正文的内部 HTML：

```
document.body.innerHTML += page; 
```

或者，您可以创建一个文本节点并附加它：

```
var textNode = document.createTextNode(page);
document.body.appendChild(textNode); 
```

在这两种情况下，当前文档都不会被刷新，它只会被修改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T00:18:45.350

发生这种情况是因为您正在将非 html 写入应该是 html 的文档。正如其他人所指出的，它也可能正在清除您现有的 html。`document.write`您可能希望将新元素附加到文档中，而不是使用。

您可以使用该`document.createElement`功能和`document.appendChild`函数来做到这一点。

以下是快速谷歌搜索带来的结果：

[http://www.dustindiaz.com/add-and-remove-html-elements-dynamically-with-javascript/](http://www.dustindiaz.com/add-and-remove-html-elements-dynamically-with-javascript/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T00:16:34.840

您正在将页面写入覆盖整个 HTML 的文档。相反，将内容写入 DIV。

这也应该解决您的背景颜色问题。

这是一个带有示例的[JS Fiddle 。](http://jsfiddle.net/3eQHj/2/)

```
<script type="text/javascript">
document.body.style.backgroundColor = "#F5F0EB";
var page = 0
function flip(){
document.getElementById("contentgoeshere").innerHTML=page;
page++;
}
</script>
<input type=button value="Next" onClick="flip()">
<div id="contentgoeshere">
</div> 
```

祝你好运。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T00:42:20.513

正如 Mattias Buelens 解释的那样，`document.write`调用`open`清除 DOM 的方法只是因为 - 在加载后 - 该`document.close`方法是自动调用的。当然，您可以使用许多替代方案。例如，使用元素
的`innerHTML`属性。 使用and也是一种选择`body`
`document.createElement``document.body.appendChild`

但也许值得考虑的是，这两种方法都有其缺点：使用`innerHTML`允许您将格式错误的标记注入 DOM，并且*可能*使您容易受到 XSS 攻击。
使用`document.createElement`速度较慢（通常）并且通常需要更多代码，这反过来会降低您的脚本的可维护性。

你可以使用这样的东西：

```
var flip = (function(tempDiv)
{//create a div once
    var page = 0,
    targetDiv = document.getElementById('contentgoeshere');//closure variables
    //page is now no longer an evil global, and the target element into which
    //we will inject new data is referenced, so we don't have to scan the DOM
    //on each function call
    return function(overridePage)//optional argument, just in case
    {//actual flip function is returned here
        overridePage = overridePage || page++;//new content
        tempDiv.innerHTML = overridePage;//render in div that isn't part of the DOM
        //any number of checks can go here, like:
        if (tempDiv.getElementsByTagName('script').length > 0)
        {
            alert('Naughty client, trying to inject your own scripts to my site');
            return;
        }
        targetDiv.innerHTML = tempDiv.innerHTML;
        //or, depending on your needs:
        targetDiv.innerHTML = tempDiv.innerText;//or the other way 'round
    };
}(document.createElement('div'))); 
```

一些旁注：就目前而言，这个函数将不起作用，因为必须完全加载 DOM 才能使闭包工作。一个快速的解决方法是：

```
var flip;//undefined
window.onload = function()
{
    flip = (function(tempDiv)
    {
        var page = 0,
        targetDiv = document.getElementById('contentgoeshere');
        return function(e)
        {
            tempDiv.innerHTML = e instanceof Event ? page++ : (e || page++);//ternary + logical or
            //your [optional] checks here
            targetDiv.innerHTML = tempDiv.innerHTML;
            if (e instanceof Event)
            {//this part is optional, but look it up if you want to: it's good stuff
                e.returnValue = false;
                e.cancelBubble = true;
                if (e.preventDefault)
                {
                    e.preventDefault();
                    e.stopPropagation();
                }
            }
            return e;
        };
    }(document.createElement('div')));
    //instead of using the HTML onclick attribute:
    document.getElementById('buttonID').onclick = flip;//use as event handler
}; 
```

请注意，这`window.onload`会导致 IE<9 上的内存泄漏，[请查看此链接以获取此问题的解决方案](https://stackoverflow.com/questions/11186750/memory-leak-risk-in-javascript-closures)

# c# - 如何在图像上绘图并保存

> ID：14668040
> 
> 赞同：2
> 
> 时间：2013-02-03T00:13:28.357
> 
> 标签：c#, windows-8, windows-runtime, winrt-xaml

我想在我的照片上画画并保存。

我可以使用 Windows.UI.Input.Inking 在画布上绘制（感谢[InkPen-sample-in-CSharp](http://code.msdn.microsoft.com/windowsapps/InkPen-sample-in-CSharp-189ce853)），但我不知道在图像上绘制并保存它。

我通过谷歌搜索找到了[WriteableBitmapEx](http://writeablebitmapex.codeplex.com/)。是否可以使用 WriteableBitmapEx 在图片上绘制并保存？还是 c# 很难？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T21:41:01.133

您可以使用 WriteableBitmapEx，您可以本机使用 SharpDX 或 Direct2D 或直接编辑 WriteableBitmap 的像素。Shahar 在评论中给你的链接也应该有帮助。我推荐 SharpDX 与[XAML 互操作](http://msdn.microsoft.com/en-us/library/windows/apps/hh825871.aspx)以获得最佳质量和对绘图方法的控制。

# c - 8位系统上的2位乘法

> ID：14668045
> 
> 赞同：2
> 
> 时间：2013-02-03T00:14:09.080
> 
> 标签：c, pic, multiplication

我正在寻找一种将 2 个数字相乘（均为 2 个数字）的方法，我正在用 C 语言编程并使用 PIC18F4455 芯片以及 CCS 编译器。继承人的问题：

代码：

```
 #include<18F4455.h>
    #fuses HS,NOWDT,NOPROTECT,NOLVP
    #device ICD=TRUE
    #use delay(clock=5000000)
    #include<lcd.c>  //LCD display source code
    #include<kbd_xy.c> //keypad source code
    void main(){
       char k;
       //
       //code to retrive keypad input and store in a and b values
       // 
        unsigned long c;
        unsigned int a=99;
        unsigned int b=1;
        while(b<99)
        {
             c=a*b;
             printf(lcd_putc,"%Ld",c);
             delay_ms(1000);
             lcd_putc('\f');
        }
   } 
```

问题是由于芯片是8bit，c中存储的数字不能超过256。所以 99*1 给出 099，99*2 给出 198，但 99*3 给出 41，注意 99*3=297 即 256+41 等等...

我正在寻找一种更好的方法来获得真正的结果，它们将通过 LCD 显示，所以如果我最终得到 4 个变量，每个变量都包含一个我可以接受的数字。如果当我做 99*3 时，我得到像 c1=7 c2=9 c3=2 和 c4=0 这样的变量，那就太棒了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T00:33:57.697

我解决了自己的问题，似乎默认情况下`int`，CCS 编译器中声明的任何内容都是`int8` SO，补救措施非常简单：

```
#include<18F4455.h>
#fuses HS,NOWDT,NOPROTECT,NOLVP
#device ICD=TRUE
#use delay(clock=5000000)
#include<lcd.c>  //LCD display source code
#include<kbd_xy.c> //keypad source code
void main(){
   char k;
   //
   //code to retrive keypad input and store in a and b values
   // 
    int16 c;
    int16 a=99;
    int16 b=1;
    while(b<99)
    {
         c=a*b;
         printf(lcd_putc,"%Ld",c);
         delay_ms(1000);
         lcd_putc('\f');
    } 
```

}

# jquery - 收获 jquery-选择没有选择？

> ID：14668047
> 
> 赞同：2
> 
> 时间：2013-02-03T00:14:13.410
> 
> 标签：jquery, jquery-chosen

是否可以使用选择的收获 jquery 而不必使用默认`<select><option>abc</option></select>`标记？

我希望将这种代码转换为响应式收获，例如选择的字段：

```
<!-- Language Switcher -->
<ul>
  <li><a href="abc.com/lang/german">Switch language to german</a></li>
  <li><a href="abc.com/lang/english">Switch language to english</a></li>
</ul> 
```

或者，我也可以编写 html 代码，就像从 select 标记（带有 ul、li 的 div 和 chzn-drop、chzn-results 等类）生成的最终输出一样。而且我已经尝试过了，但我不知道如何启动选择的 javascript 以按原样使用该块，而不是尝试再转换任何东西。

原因是：我希望选择语言切换器进行 SEO（将链接作为链接，而不是作为我阅读的选项的某些 data-* 属性，并且只对 javascript 做出反应），同时保持美观和功能选择-选择。

**编辑**
似乎不修改插件这是不可能的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:45:37.473

您可以使用自己的包装器或插件来使其可以接受 choocen 示例，例如：

```
<ul id="TesT">
  <li><a href="abc.com/lang/german">Switch language to german</a></li>
  <li><a href="abc.com/lang/english">Switch language to english</a></li>
</ul> 
```

小脚本：

```
function modi(selector){
   $(selector).each(function(){
   var html ="";
   $('li',this).each(function(){
      html +='<option value="'+$('a',this).attr('href')+'">'+$('a',this).html()+'</option>';
   });
   $(this).replaceWith('<select>'+html+'</select>').chosen();
   });
} 
```

并称它为：

```
modi('#TesT'); 
```

目前我的脚本替换了旧的原始标记，但您也可以使用隐藏和添加新元素。

# android - Android Eclipse-我是否需要为每个活动创建一个新的清单文件？

> ID：14668052
> 
> 赞同：0
> 
> 时间：2013-02-03T00:14:48.247
> 
> 标签：android, eclipse, android-activity, android-ui

我现在设置了 1 个清单文件，里面有这个

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.treacheryofimages.www"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="10"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.treacheryofimages.www.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name=".OtherActivity"></activity>
    <activity android:name=".OtherActivity2"></activity>
    <activity android:name=".OtherActivity3"></activity>
    <activity android:name=".OtherActivity4"></activity>
</application>

</manifest> 
```

我想为我的第二个活动页面创建新按钮。那么我需要为每个活动创建一个新的清单页面吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T06:36:24.263

不，您不会创建第二个清单。每个项目只有一个 AndroidManifest.xml。我没有真正看到您在活动中的按钮和清单文件之间建立的关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T10:43:07.697

您应该在清单文件中定义您的活动，并将您的布局留在

> 源/资源/布局

文件夹，您可以在其中为每个视图使用布局文件，例如

[在这里](http://developer.android.com/tools/projects/index.html)，您可以找到有关如何在项目中构建文件夹的官方 Android 文档。

# javascript - html而不是谷歌地图标记图像

> ID：14668054
> 
> 赞同：3
> 
> 时间：2013-02-03T00:14:55.360
> 
> 标签：javascript, html, css, google-maps

是否可以显示 HTML 而不是图像作为 Google Maps Marker ？

最好的方法是什么？我想像隐形标记和自定义信息窗口之类的东西可能会在实现这一目标方面发挥作用

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T00:47:33.170

您可以使用`OverlayView`类创建带有 html 元素的自定义叠加层 - [https://developers.google.com/maps/documentation/javascript/overlays#CustomOverlays](https://developers.google.com/maps/documentation/javascript/overlays#CustomOverlays)

简单示例 - [http://jsfiddle.net/BCr2​​B /](http://jsfiddle.net/BCr2B/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-18T21:26:02.293

你可能想看看这个： [https ://github.com/jonyt/gmaps-div-overlay](https://github.com/jonyt/gmaps-div-overlay)

> DivOverlay 是一个非常简单的 HTML 容器，可以在 Google 地图上的任何位置显示。它所做的只是根据地图边界计算边距，因此它的全部内容都在地图内。看看演示。构造函数接受 3 个参数：HTML 容器、要附加到的地图和叠加层的位置。DivOverlay 只有两个函数：show() 和 hide()。应该是不言自明的。

# linux - 此批处理代码如何创建不需要的文件

> ID：14668058
> 
> 赞同：1
> 
> 时间：2013-02-03T00:15:11.077
> 
> 标签：linux, bash, batch-file

```
for file in `find . -name "*.po"` ; do msgfmt -o `echo $file | sed s/\.po/\.mo/` $file ; done 
```

我发现的这段代码是在 PO 文件的所有子目录中创建多个 MO 文件。第一次，它运作良好。但是当我第二次运行它时；

它显示了一些语法错误消息。我检查了 msgfmt 抱怨的 PO 文件，但它们以前不存在。它们是在运行此代码后创建的。

例如，该文件是 secpolicy.po，但它还创建了另一个 secpolicy.po 文件。

该代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T00:22:33.207

问题很可能与引用有关。由于您不引用 sed 模式，因此 shell 将反斜杠解释为 sed 并调用

```
sed s/.po/.mo/ 
```

当您有一个名为 的文件时`secpolicy.po`，它会将其更改为`se.molicy.po`，这会导致调用

```
msgfmt -o se.molicy.po secpolicy.po 
```

`sed`要解决此问题，请将

```
echo $file | sed 's/\.po$/.mo/' 
```

请参阅附加的单引号`'`和字符串的结尾`$`。

如果你有一个文件`abc.po`，它将匹配点`\.`、字符串`po`和最后的行尾`$`，然后用 替换这个匹配`.mo`，结果是`abc.mo`

# php - 其他班级的PDO有什么问题？

> ID：14668062
> 
> 赞同：0
> 
> 时间：2013-02-03T00:15:37.443
> 
> 标签：php, mysql, class, pdo

我只是将我网站的 MySQL 更改为 PDO，当我尝试在其他课程中使用 PDO 时遇到了一个奇怪的问题。

```
class Database {
private $pdo;

public function __construct() {
    $this->pdo = new PDO('mysql:host=localhost;dbname=appdora;charset=utf8', 'root', 'root');
}
}

class doClass {

//Variables
private $db;

//PDO
public function __construct(Database $db) {
    $this->db = $db;
} 
```

代码返回：以下错误：

`Catchable fatal error: Argument 1 passed to doClass::__construct() must be an instance of Database, none given, called in .../index.php on line xx and defined in ../classes.php on line xx`

编码：

```
$do = new doClass();
if ($do->loginCheck()) { echo 'loginOk'; } else { 'loginError'; } 
```

loginCheck() 是一个无需类即可工作的简单函数！

你能帮我吗，有什么问题吗？提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T00:30:42.860

```
$do = new doClass(); 
```

您将您的`doClass`类定义为期望构造函数中的参数：

```
public function __construct(Database $db) 
```

因此，您需要提供该类型参数`Database`才能成功构造对象。

例如，如果你有一个数据库对象存储在一个变量之前的某个地方`$database`，你可以简单地将它传递给这样的构造函数`doClass`：

```
$do = new doClass($database); 
```

# android - Android MyAdapter 不能是静态的

> ID：14668063
> 
> 赞同：0
> 
> 时间：2013-02-03T00:15:44.767
> 
> 标签：android, android-fragments, android-viewpager, android-adapter

我在这段代码中遇到了一些问题：

MyAdapter.java：

```
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentStatePagerAdapter;

public static class MyAdapter extends FragmentStatePagerAdapter {
    public MyAdapter(FragmentManager fm) {
        super(fm);

    }

    @Override
    public int getCount() {
        return 3;
    }

    @Override
    public Fragment getItem(int position) {
        switch (position) {
        case 0: return new SpeedZonesFragment();
        case 1: return new DistanceFragment();
        case 2: return new FuelConsumptionFragment();
        default: return null;
        }
    }
} 
```

MainActivity.java：

```
import android.app.ActionBar;
import android.app.ActionBar.Tab;
import android.app.FragmentTransaction;
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.support.v4.view.ViewPager;

public class MainActivity extends FragmentActivity {

    private MyAdapter myAdapter;
    private ViewPager myViewPager;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.view_pager);

        myAdapter = new MyAdapter(getSupportFragmentManager());

        myViewPager = (ViewPager) findViewById(R.id.pager);
        myViewPager.setAdapter(myAdapter); 
```

view_pager.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <android.support.v4.view.ViewPager
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:id="@+id/view_pager" />

</LinearLayout> 
```

我的问题是，我能找到的每个示例都将 MyAdapter 声明为`public static class`但是`Eclipse`会引发错误：`Illegal modifier for the class MyAdapter; only public, abstract & final are permitted`。

如果我尝试在没有返回静态的情况下运行我的代码（来自 LogCat）：

`Caused by: java.lang.NullPointerException` `02-02 23:13:26.076: E/AndroidRuntime(928):` `at simcas.fartberegneren.MainActivity.onCreate(MainActivity.java:23)`

**编辑：**第 23 行是行`myViewPager.setAdapter(myAdapter);`

显然我做错了什么，但我找不到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T00:24:34.237

首先，不，`static`类仅用于内部类，其中内部类的实例不应绑定到外部类的实例。（也就是说，在外部类中，`static`不应使用修改后的内容。）

其次，空指针在语句中`myViewPager.setAdapter(myAdapter);`，正如您所推断的，含义`myViewPager`为空。因此，`findViewById()`返回 null（未找到项目）：

```
myViewPager = (ViewPager) findViewById(R.id.pager); 
```

请注意，在您的 XML 中：`android:id="@+id/view_pager"`. 上面的行应该是：

```
myViewPager = (ViewPager) findViewById(R.id.view_pager); 
```

# javascript - json键中的动态名称

> ID：14668064
> 
> 赞同：5
> 
> 时间：2013-02-03T00:16:11.190
> 
> 标签：javascript, jquery, json

我正在尝试动态创建 JSON，但是当我执行以下操作时：

```
var jsonVar = {
    "section": {}
}

var elementsStoragePrefix = "_app_", 
    elementName = elementsStoragePrefix + "some_name";

$.extend(jsonVar .section, { elementName: "<option>This is a text</option>"}); 
```

我得到的关键是 elementName 而不是 _app_some_name

```
jsonVar.section =>
    Object
        elementName: "<option>This is a text</option>"
        __proto__: Object 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-03T00:20:17.330

创建对象文字时，您不需要引用属性名称，因此在您的示例中`elementName`将按字面意思进行。值得庆幸的是，您可以使用方括号语法（或者无论您如何拼写）：

```
var extendObject = {};
extendObject[elementName] = '<option>Foobar</option>';
$.extend(jsonVal.section, extendObject);
//or, to use brackets all the way:
$.extend(jsonVal['section'], extendObject); 
```

那应该为您解决问题

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-03T00:19:04.163

```
jsonVar.section[elementName] = "<option>This is a text</option>"; 
```

# ruby-on-rails - Ruby Net::IMAP 排序方法不起作用

> ID：14668069
> 
> 赞同：2
> 
> 时间：2013-02-03T00:17:09.483
> 
> 标签：ruby-on-rails, ruby, imap

我正在使用 Net::IMAP 连接到 gmail 或任何其他 IMAP 服务器。

它工作得很好，但是当我尝试排序时它返回一个错误，我不知道为什么。

```
imap = Net::IMAP.new('imap.gmail.com', 993, true)
imap.login('USERNAME', 'PASSWORD')
imap.examine('INBOX')
imap.sort(["DATE"], ['ALL'], "US-ASCII") 
```

将返回

```
Net::IMAP::BadResponseError in ExampleController#index

Unknown command: SORT 
```

任何想法为什么会发生这种情况？

# pdf - 使用ghostscript将图像注释添加到pdf

> ID：14668073
> 
> 赞同：1
> 
> 时间：2013-02-03T00:17:34.913
> 
> 标签：pdf, ghostscript, postscript

我想使用 ghostscript 给 pdf 文件添加注释，类似于[此处](https://stackoverflow.com/questions/4427034/add-comments-to-pdf-files-automagically-with-regular-expressions)描述的方法。但是，我想添加图像作为注释，而不是文本注释。鉴于我在 pdfmark 参考和 pdf 参考中阅读的内容，我认为应该可以通过插入“自定义”橡皮图章注释来实现。如果有人可以提供如何做到这一点的例子，我将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T10:25:42.313

您基本上需要为您的注释定义一个外观 (/AP) 流。如果你想使用一个图像，那么 AP 流要么需要包含一个内联图像（假设它相当小），要么你需要创建一个命名图像，以便你的 AP 流可以按名称引用图像。

我没有 pdfmark 的示例来执行此操作，但是通过使用简单的外观流创建标记注释应该相当容易开始。像 '0 1 0 0 k 10 10 20 20 ref' 这样的东西会绘制一个 10x10 的洋红色矩形。之后，您可以继续使用图像。

# haskell - 使用 netwire 进行游戏实体建模

> ID：14668075
> 
> 赞同：9
> 
> 时间：2013-02-03T00:17:59.207
> 
> 标签：haskell, frp

我将使用 netwire 和 OpenGL 在 Haskell 中编写一个实时游戏。基本思想是每个对象将由一根线表示，它会获取一些数据作为输入并输出其状态，然后我会将它们全部连接到一根大线中，以获取 GUI 的状态作为输入并输出世界状态，然后我可以将其传递给渲染器以及一些“全局”逻辑，如碰撞检测。

我不确定的一件事是：我想如何输入电线？并非所有实体都有相同的输入；玩家是唯一可以访问键输入状态的实体，寻找导弹需要目标的位置等。

*   一个想法是让 ObjectInput 类型传递给所有东西，但这对我来说似乎很糟糕，因为我可能会不小心引入我不想要的依赖项。
*   另一方面，我不知道拥有 SeekerWire、PlayerWire、EnemyWire 等是否是个好主意，因为它们几乎“相同”，因此我必须在它们之间复制功能。

我应该怎么办？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-03T21:55:23.197

抑制幺半群`e`是*抑制*异常的类型。`e`它不是电线产生的东西，但与in的作用大致相同`Either e a`。换句话说，如果您通过 组合线`<|>`，则输出类型必须相等。

假设您的 GUI 事件通过输入传递到线路，并且您有一个连续的按键事件。一种建模方法是最直接的：

```
keyDown :: (Monad m, Monoid e) => Key -> Wire e m GameState () 
```

这条线将当前游戏状态作为输入，并`()`在按键被按下时产生一个。当键没有被按下时，它只是禁止。大多数应用程序并不真正关心*为什么*电线禁止，所以大多数电线禁止使用`mempty`.

表达此事件的更方便的方法是使用 reader monad：

```
keyDown :: (Monoid e) => Key -> Wire e (Reader GameState) a a 
```

这个变体真正有用的是，现在您不必将游戏状态作为输入传递。相反，当事件发生时，这条线就像身份线一样，当它没有发生时，它会被禁止：

```
quitScreen . keyDown Escape <|> mainGame 
```

这个想法是，当按下转义键时，事件线`keyDown Escape`会暂时消失，因为它就像身份线一样。所以整根电线的行为就像`quitScreen`假设它不会抑制自己。一旦键被释放，事件线就会被禁止，因此组合`quitScreen`也会被禁止。因此，整根导线的作用就像`mainGame`。

如果你想限制一条线可以看到的游戏状态，你可以很容易地为此编写一个线组合器：

```
trans :: (forall a. m' a -> m a) -> Wire e m' a b -> Wire e m a b 
```

这允许您申请`withReaderT`：

```
trans (withReaderT fullGameStateToPartialGameState) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T12:16:40.490

Elm 有一个[自动机](http://elm-lang.org/docs/Automaton.elm)库，我相信它与您正在做的类似。

您可以为您想要访问的每种状态类型使用一个类型类。然后为您的游戏的整个状态实现这些类中的每一个（假设您有 1 个大胖对象容纳所有东西）。

```
-- bfgo = Big fat game object
class HasUserInput bfgo where
    mouseState :: bfgo -> MouseState
    keyState   :: bfgo -> KeyState

class HasPositionState bfgo where
    positionState :: bfgo -> [Position] -- Use your data structure 
```

然后，当您创建使用数据的函数时，您只需指定这些函数将使用的类型类。

```
{-#LANGUAGE RankNTypes #-}

data Player i = Player 
    {playerRun :: (HasUserInput i) => (i -> Player i)}

data Projectile i = Projectile
    {projectileRun :: (HasPositionState i) => (i -> Projectile i)} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-03T07:17:49.583

有一个非常简单和通用的解决方案。关键思想是永远不要合并不同类型的源。相反，您只合并相同类型的源。实现这项工作的诀窍在于，您将所有不同来源的输出包装在代数数据类型中。

我不是很熟悉`netwire`，所以如果您不介意，我将`pipes`用作示例。我们想要的是一个`merge`函数，它接受一个源列表并将它们组合成一个源，同时合并它们的输出，当它们全部完成时完成。密钥类型签名是：

```
merge
 :: (Proxy p)
 => [() -> Producer ProxyFast a IO r] -> () -> Producer p a IO () 
```

这只是说它需要一个`Producer`type 值的列表`a`，并将它们组合成一个`Producer`type 值`a`。下面是 的实现`merge`，如果你很好奇并且想跟随：

```
import Control.Concurrent
import Control.Concurrent.Chan
import Control.Monad
import Control.Proxy

fromNChan :: (Proxy p) => Int -> Chan (Maybe a) -> () -> Producer p a IO ()
fromNChan n0 chan () = runIdentityP $ loop n0 where
    loop 0 = return ()
    loop n = do
        ma <- lift $ readChan chan
        case ma of
            Nothing -> loop (n - 1)
            Just a  -> do
                respond a
                loop n

toChan :: (Proxy p) => Chan ma -> () -> Consumer p ma IO r
toChan chan () = runIdentityP $ forever $ do
    ma <- request ()
    lift $ writeChan chan ma

merge
 :: (Proxy p)
 => [() -> Producer ProxyFast a IO r] -> () -> Producer p a IO ()
merge producers () = runIdentityP $ do
    chan <- lift newChan
    lift $ forM_ producers $ \producer -> do
        let producer' () = do
                (producer >-> mapD Just) ()
                respond Nothing
        forkIO $ runProxy $ producer' >-> toChan chan
    fromNChan (length producers) chan () 
```

现在，让我们假设我们有两个输入源。第一个以一秒的间隔生成从`1`到的整数：`10`

```
throttle :: (Proxy p) => Int -> () -> Pipe p a a IO r
throttle microseconds () = runIdentityP $ forever $ do
    a <- request ()
    respond a
    lift $ threadDelay microseconds

source1 :: (Proxy p) => () -> Producer p Int IO ()
source1 = enumFromS 1 10 >-> throttle 1000000 
```

第二个来源`String`从用户输入中读取三个 s：

```
source2 :: (Proxy p) => () -> Producer p String IO ()
source2 = getLineS >-> takeB_ 3 
```

我们想组合这两个源，但是它们的输出类型不匹配，所以我们定义了一个代数数据类型来将它们的输出统一为一个类型：

```
data Merge = UserInput String | AutoInt Int deriving Show 
```

现在我们可以通过将它们的输出包装在我们的代数数据类型中，将它们组合成一个相同类型的生产者列表：

```
producers :: (Proxy p) => [() -> Producer p Merge IO ()]
producers =
    [ source1 >-> mapD UserInput
    , source2 >-> mapD AutoInt
    ] 
```

我们可以很快地对其进行测试：

```
>>> runProxy $ merge producers >-> printD
AutoInt 1
Test<Enter>
UserInput "Test"
AutoInt 2
AutoInt 3
AutoInt 4
AutoInt 5
Apple<Enter>
UserInput "Apple"
AutoInt 6
AutoInt 7
AutoInt 8
AutoInt 9
AutoInt 10
Banana<Enter>
UserInput "Banana"
>>> 
```

现在你有一个组合源。然后，您可以编写游戏引擎以仅从该源读取，在输入上进行模式匹配，然后适当地运行：

```
engine :: (Proxy p) => () -> Consumer p Merge IO ()
engine () = runIdentityP loop where
    loop = do
        m <- request ()
        case m of
            AutoInt   n   -> do
                lift $ putStrLn $ "Generate unit wave #" ++ show n
                loop
            UserInput str -> case str of
                "quit" -> return ()
                _      -> loop 
```

让我们尝试一下：

```
>>> runProxy $ merge producers >-> engine
Generate unit wave #1
Generate unit wave #2
Generate unit wave #3
Test<Enter>
Generate unit wave #4
quit<Enter>
>>> 
```

我想同样的技巧也适用于`netwire`.

# php - php 根据 URL 参数检查会话数据

> ID：14668078
> 
> 赞同：0
> 
> 时间：2013-02-03T00:18:09.513
> 
> 标签：php, session

我是 php 新手，遇到以下问题。我想检查会话用户名，看看它是否与 url 参数匹配，然后打印一些东西：

```
<?php

  // Check User
    if (isset($_SESSION['user_name'] == $_GET['name'])) {

        //print html

    }
?> 
```

即使会话名称与 url 名称匹配，我在测试时也只是得到一个空白页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T00:19:57.423

您忘记开始会话并且使用`isset()`不正确

```
<?php
  session_start();
  // Check User
    if ($_SESSION['user_name'] == $_GET['name']) {

        //print html

    }
?> 
```

更好更完整的解决方案：

```
<?php
  session_start();
  // Check User
    if (isset($_SESSION['user_name']) 
        && isset($_GET['name']) 
        && $_SESSION['user_name'] == $_GET['name']) {

        //print html

    }
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T00:20:43.273

您似乎将 isset 函数的布尔结果与来自 url 的字符串名称进行比较。

```
 // Check User
    if (isset($_SESSION['user_name'])&&isset($_GET['name'])) 
      if (($_SESSION['user_name'])==($_GET['name']))
{
        //print html
}

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T00:21:21.710

在像这样检查会话之前开始会话

```
<?php
   session_start();
  // Check User
    if (isset($_SESSION['user_name']) == $_GET['name']) {

        //print html

    }
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T00:22:35.347

函数中的逻辑错误`isset()`，这样做：

```
if (isset($_SESSION['user_name']) && isset($_GET['name']) && $_SESSION['user_name'] == $_GET['name']) {

    //print html

} 
```

upd：当然，`start_session()`在任何带有会话变量的操作之前

# css - 有没有办法限制 html 元素的 css 类？

> ID：14668080
> 
> 赞同：0
> 
> 时间：2013-02-03T00:18:28.813
> 
> 标签：css, class

我知道您可以将它们添加到一个类中，看似无止境，但有没有办法阻止某些类添加到元素或仅定义可以添加哪些类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T00:28:22.240

如果它真的很重要，你可以用 jquery 解决这个问题。看看这两个函数：

[http://api.jquery.com/addClass/](http://api.jquery.com/addClass/)

[http://api.jquery.com/removeClass/](http://api.jquery.com/removeClass/)

```
$(document).ready(function(){
    $("element").addclass("myclass");
    $("element2").click(function(){
        $("element").removeclass("myclass");
    });
}); 
```

有了这个，您可以防止将“badclass”类添加到 div 元素中

```
$(document).ready(function(){
    $("div").removeclass("badclass");
}); 
```

要删除所有类，您可以从对象中删除 class 属性，但不确定它是否会起作用。

[http://api.jquery.com/removeAttr/](http://api.jquery.com/removeAttr/)

在这里，您从 div 元素中删除所有类：

```
$(document).ready(function(){
    $("div").removeattr("class");
}); 
```

问候，我希望它有所帮助

# vb.net - vb.net 串口字符编码

> ID：14668088
> 
> 赞同：1
> 
> 时间：2013-02-03T00:19:40.373
> 
> 标签：vb.net, character-encoding, serial-port

我正在使用 VB.NET，我需要通过串行发送和接收数据字节。这一切都很好，直到我需要发送类似 173 的内容。我正在使用子例程发送一个字节，该字节将输入作为整数并将其转换为字符以进行打印。

```
Private Sub PrintByte(ByVal input As Integer)
    serialPort.Write(Chr(input))
End Sub 
```

如果我尝试

```
PrintByte(173) 
```

或者实际上任何高于 127 的东西都会发送 63。我觉得这有点奇怪，所以我查看了 ASCII 表，看起来 63 对应于？特点。所以我认为正在发生的事情是 VB.NET 正试图将该数字编码为一个它无法识别的字符，所以它只是打印一个？。

我应该使用什么编码，我将如何实现编码更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T00:55:08.897

这里的问题是 SerialPort.Encoding 属性。默认为 Encoding.ASCII，这是一种无法处理超过 127 的值的编码。您需要通过实际发送一个字节而不是字符来实现一个名为 PrintByte 的方法：

```
Private Sub PrintByte(ByVal value As Integer)
    Dim bytes() As Byte = {CByte(value)}
    serialPort.Write(bytes, 0, bytes.Length)
End Sub 
```

# powershell - PowerShell 计时器/秒表精度

> ID：14668090
> 
> 赞同：6
> 
> 时间：2013-02-03T00:20:01.883
> 
> 标签：powershell, timer, stopwatch

我发现 System.Diagnostics.Stopwatch 类似乎具有可测量的不准确性，即使在很短的时间段内（即 20 秒）也是如此。我的进程显示编码为运行 20 秒的进程的经过时间为 20.3+ 秒：

```
$elapsed = [System.Diagnostics.Stopwatch]::StartNew()
write-host "Started at $(get-date)"

for ($t=1; $t -le 20; $t++) {
    Write-Host "Elapsed Time: $($elapsed.Elapsed.ToString())"
    sleep 1
}

write-host "Ended at $(get-date)"
write-host "Total Elapsed Time: $($elapsed.Elapsed.ToString())"

    Started at 02/02/2013 15:08:43
    Elapsed Time: 00:00:00.0329924
    Elapsed Time: 00:00:01.0417435
    Elapsed Time: 00:00:02.0547547
    Elapsed Time: 00:00:03.0689716
    Elapsed Time: 00:00:04.0820497
    Elapsed Time: 00:00:05.0963413
    Elapsed Time: 00:00:06.1113915
    Elapsed Time: 00:00:07.1244044
    Elapsed Time: 00:00:08.1396105
    Elapsed Time: 00:00:09.1528952
    Elapsed Time: 00:00:10.1659905
    Elapsed Time: 00:00:11.1800884
    Elapsed Time: 00:00:12.1940009
    Elapsed Time: 00:00:13.2081824
    Elapsed Time: 00:00:14.2223585
    Elapsed Time: 00:00:15.2375023
    Elapsed Time: 00:00:16.2506360
    Elapsed Time: 00:00:17.2656845
    Elapsed Time: 00:00:18.2790676
    Elapsed Time: 00:00:19.2928700
    Ended at 02/02/2013 15:09:04
    Total Elapsed Time: 00:00:20.3080067 
```

在 PowerShell 中使用 Stopwatch 类时会出现这种精度漂移吗？它似乎与时间跨度不成比例地增加（即 10 秒减少 0.1 秒，20 秒减少 0.3 秒）。我的代码有问题吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-03T03:16:18.783

你有 20 次 1 秒的停顿，但你还有其他事情在进行。有一个循环增加和测试一个变量，你写下每次迭代的经过时间。这些额外的事情需要时间。

这仍然有 20 秒的暂停，经过的时间更接近 20 秒，因为 PowerShell 需要做的额外工作更少：

```
$elapsed = [System.Diagnostics.Stopwatch]::StartNew()
write-host "Started at $(get-date)"
sleep 20
write-host "Ended at $(get-date)"
write-host "Total Elapsed Time: $($elapsed.Elapsed.ToString())" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-09T04:35:07.373

问题是，你想做什么？如果您试图确定脚本运行需要多长时间，那么您应该使用秒表。但是，如果您尝试在指定时间段后启动新的命令序列，请使用 [System.Timers.Timer] 并在计时器对象上为经过的事件注册一个事件。然后将注册事件的操作指定为您要完成的操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-03-17T06:52:24.950

秒表非常准确。睡眠不是。睡眠 1 秒通常会产生 0.985 秒到 1.015 秒的睡眠；但是，如果有其他活动正在进行，时间可能会更长。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-13T02:17:27.253

代码运行的总时间取决于其他因素，例如系统的繁忙程度。

查看 .NET 的源代码，我们可以看到[[System.Diagnostics.Stopwatch]::StartNew()](https://referencesource.microsoft.com/#System/services/monitoring/system/diagnosticts/Stopwatch.cs,52)使用了[高分辨率时间](https://docs.microsoft.com/en-us/windows/win32/sysinfo/acquiring-high-resolution-time-stamps)计数器。它调用 WINAPI [QueryPerformanceCounter](https://docs.microsoft.com/en-us/windows/win32/api/profileapi/nf-profileapi-queryperformancecounter?redirectedfrom=MSDN)。那就是：课程非常精确！

我查看[了 Start-Sleep 的最新源代码](https://github.com/PowerShell/PowerShell/blob/master/src/Microsoft.PowerShell.Commands.Utility/commands/utility/StartSleepCommand.cs#L16)，并注意到它使用内核模式事件来实现时间等待。除了用户已经提到的细节之外，Windows schedule 可以在 powershel 完成您的等待睡眠时间时运行另一个线程，从而在您的代码计算经过时间之前有更多时间。

此外，写入视频是成本操作，因为它在计算机上使用的资源非常高。为了绕过它，我重写了你的代码，所以它不会每次都写入视频：

```
$elapsed = [System.Diagnostics.Stopwatch]::StartNew()
write-host "Started at $(get-date)"

$out = new-object 'string[]' 100;

for ($t=1; $t -le 20; $t++) {
    $out[$t] = "Elapsed Time: $($elapsed.Elapsed.ToString())"
    sleep 1
}
$out;
write-host "Ended at $(get-date)"
write-host "Total Elapsed Time: $($elapsed.Elapsed.ToString())" 
```

看看在系统、powershell 5.1、桌面、windows 10、CPU intel 3.0 Ghz 上运行。

首先，我以正常优先级、低并发运行您的原始代码：[脚本耗时 20.14 秒](https://i.stack.imgur.com/BcDs8.png)

接下来，我运行原始代码，以及其他一些 CPU 密集型进程：[耗时 24.21s](https://i.stack.imgur.com/Rvr7m.png)

回来，我运行我的代码版本，在空闲系统下没有 write-host：[脚本只用了 20.03s](https://i.stack.imgur.com/r3btD.png)

最后一个与第一个有很大的不同（空闲并写入屏幕）。

# c# - 读取 Registry_binary 并转换为字符串

> ID：14668091
> 
> 赞同：3
> 
> 时间：2013-02-03T00:20:12.493
> 
> 标签：c#, tostring, registrykey

我一直在寻找过去的 2 个小时，实际上我只是在寻找愚蠢的东西。

我正在尝试读取 Registry_binary 值并将其转换为字符串。我尝试了一些我在网上找到的东西（包括一些 stackoverflow 帖子），但似乎我无法让它工作：

```
class Class1 {
    RegistryKey RegKey;
    String keys;

    static void Main() {
        Class1 c=new Class1();
        c.initialize();
    }

    void initialize() {
        RegKey=Registry.LocalMachine.OpenSubKey("the location", true);
        var bytearray=Converter<RegKey.GetValue("key"), String[keys]>;
        Console.WriteLine(bytearray);
        System.Threading.Thread.Sleep(5000);
    }
} 
```

我也尝试使用：

```
keys=keys+BitConverter.ToString(System.byte[RegKey.GetValue("key")]); 
```

根据要求：

```
RegKey=Registry.LocalMachine.OpenSubKey("Software\\MXstudios\\riseingtesharts", true);
keys=RegKey.GetValue("key"); 
```

这将输出`System.Bytes[]`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-03T01:01:05.560

假设密钥已打开

```
var valueName = "some binary registry value";
var valueKind = registryKey.GetValueKind(valueName);
if (valueKind == RegistryValueKind.Binary)
{
    var value = (byte[])registryKey.GetValue(valueName);
    var valueAsString = BitConverter.ToString(value);
} 
```

**编辑：**一些解释：

GetValue 返回对象，BitConverter.ToString 获取一个字节数组作为参数。因此，我们将 GetValue 返回的值转换为 byte[]，以便能够在 BitConverter.ToString 中使用它。但首先我们检查注册表值是否实际上是二进制的。然后您可以安全地将其转换为 byte[]，因为 GetValue 返回的二进制值对象实际上是字节数组。

# linux - 在 Unix 中将逗号添加到数字字符串

> ID：14668094
> 
> 赞同：3
> 
> 时间：2013-02-03T00:20:31.260
> 
> 标签：linux, shell, unix

`1234567`Unix中数字加逗号，需要改成`1,234,567`

有可能在`sed`or中`awk`吗？如果是这样，请提供一些样品。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-03T01:15:00.160

```
$ LC_NUMERIC=en_US

$ printf "%'.f" 1234567
1,234,567 
```

由[jim mcnamara](https://stackoverflow.com/users/348312)提供：语言环境决定了千位分隔符会发生什么。

```
$ export LC_NUMERIC="en_US.UTF-8"
$ printf "%'f\n" 1234567.777
1,234,567.777000

$ export LC_NUMERIC=C
$ printf "%'f\n" 1234567.777
1234567.777000 
```

最后一个没有逗号。您的结果没有逗号。你现在明白为什么了吗？区域设置 LC_NUMERIC 设置是您的答案。C 语言环境没有千位分隔符。我猜你的语言环境也没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T21:32:18.380

我用过一次：

```
echo "1234567890" | \
sed -e ': L
s/\([0-9]\{1,19\}\)\([0-9]\{3\}\)/\1,\2/
t L' 
```

应该管用

[http://www.linuxquestions.org/questions/programming-9/format-numbers-using-bash-672031/#post4269148](http://www.linuxquestions.org/questions/programming-9/format-numbers-using-bash-672031/#post4269148)

# r - 如何使用ggplot2将光栅文件绘制为直方图？

> ID：14668096
> 
> 赞同：3
> 
> 时间：2013-02-03T00:20:36.253
> 
> 标签：r, ggplot2, histogram, raster

我有一个光栅文件，我想绘制为直方图，我使用 hist() 进行绘制，如下所示。但我想使用 ggplot2 进行绘图，它以更好的方式进行发布。

```
conne <- file("C:\\fined.bin","rb")
r = raster(y)
hist(r, breaks=30, main="SMD_2010",
        xlab="Pearson correlation", ylab="Frequency", xlim=c(-1,1)) 
```

我试过这个：

```
 qplot(rating, data=r, geom="histogram") 
```

错误：

```
 ggplot2 doesn't know how to deal with data of class RasterLayer 
```

我需要绘制类似的东西：

[http://docs.ggplot2.org/0.9.3/geom_histogram-28.png](http://docs.ggplot2.org/0.9.3/geom_histogram-28.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-03T01:55:08.303

作为一个快速的解决方案您可以使用`hist`

```
f <- hist(r, breaks=30)
dat <- data.frame(counts= f$counts,breaks = f$mids)
ggplot(dat, aes(x = breaks, y = counts)) + 
  geom_bar(stat = "identity",fill='blue',alpha = 0.8)+
  xlab("Pearson correlation")+ ylab("Frequency")+
  scale_x_continuous(breaks = seq(-1,1,0.25),  ## without this you will get the same scale
                   labels = seq(-1,1,0.25))    ## as hist (question picture) 
```

PS：也许您需要使用`scale_x_discrete`以获得更好的轴外观

**编辑**添加渐变填充

```
ggplot(dat, aes(x = breaks, y = counts, fill =counts)) + ## Note the new aes fill here
  geom_bar(stat = "identity",alpha = 0.8)+
  xlab("Pearson correlation")+ ylab("Frequency")+
  scale_x_continuous(breaks = seq(-1,1,0.25),
                   labels = seq(-1,1,0.25))+
  scale_fill_gradient(low="blue", high="red")            ## to play with colors limits 
```

![在此处输入图像描述](../Images/2838d9e103d188a1e5f63f7c2a7821ab.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-03T00:56:55.837

如果您的对象`r`是`rasterLayer`对象，那么我认为您只需将其转换为数据框，也许是这样的：

```
rr <- as.data.frame(values(r)) 
```

看`?getValues`你可能需要在那个调用中稍微改变一下。无论如何，`ggplot2`必须以一个数据框作为其数据源。

仔细看，我认为这可以满足您的要求，但是如果不转换为`rasterLayer`对象而是绘制`y`对象，它实际上会更简单。但是我无法使用您链接到的文件（可能是我的错误），因此您必须尝试一下。

编辑：这是一个有效的例子：

```
f <- system.file("external/test.grd", package="raster")
f
r <- raster(f)
rr <- as.data.frame(r)
str(rr)
# data is in one particular slot:
qplot(rr$test) 
```

更多详细信息：

```
str(rr)
'data.frame':   9200 obs. of  1 variable:
 $ test: num  NA NA NA NA NA NA NA NA NA NA ...

summary(rr)
      test       
 Min.   : 128.4  
 1st Qu.: 293.2  
 Median : 371.4  
 Mean   : 423.2  
 3rd Qu.: 499.8  
 Max.   :1805.8  
 NA's   :6097 
```

![rr$test 的直方图](../Images/ef6f7a110ba03b9d36d3c0874fa74ffd.png)

如果这对您不起作用，我会确定`2013-01-21 r61719`哪个是 3.0 RC。也许这就是区别？ `ggplot2 0.9.3`?

# ruby-on-rails - 如何从 Routeboxer for Google Maps API V3 中找到纬度和经度？

> ID：14668101
> 
> 赞同：0
> 
> 时间：2013-02-03T00:20:56.873
> 
> 标签：ruby-on-rails, google-maps, google-maps-api-3, latitude-longitude

**提前感谢您提供的任何帮助！**我已经查看了几个示例站点，但我无法找到与我想要在我的网站上完成的代码相匹配的版本（Ruby on Rails，2.3.15、1.8.7。）

**我的目标：**

在我的网站上，我有一个工具可以让用户创建行车路线。我的目标是让用户在加载地图之前选择单击“显示附近的兴趣点”复选框。如果他这样做了，我希望地图显示沿途的 POI。

**我在哪里**

我已经实现了 RouteBoxer，我认为这是沿路线查找兴趣点的最佳选择。Routeboxer 为我工作；它在我创建的任何路线周围绘制框。然而，这就是我卡住的地方。我刚刚得到了我的路线和屏幕上的一堆框。我如何才能真正从 RouteBoxer 获得纬度和经度界限？那么，如何通过 RouteBoxer 传递我的数据？

**细节**

我有一个名为“myinfo”的 MySQL 数据库和一个名为“masterlocations”的表。每个位置都有一个“ID”、“Lat”、“Long”、“nickname”和其他信息。

在我的地图网页控制器中，我玩了一圈，发现我可以通过硬编码纬度和经度来获得位置列表。测试看起来像这样：

```
@nearbylocations = Masterlocation.find(:all, :conditions => ["latitude > 25 AND latitude < 30"], :order => ['nickname asc']) 
```

**下一步/建议**

我想我需要弄清楚 RouteBoxer 多边形的纬度和经度，然后以某种方式查看我的任何位置是否在这个纬度和经度范围内。如果他们这样做，那么我需要找出一种方法，以便 API 为 POI 创建标记。

您对我如何完成上述工作有什么建议吗？我对 Ruby 和 Google Maps API V3 都很陌生，如果我忽略了一个明显的方法，我很抱歉。您可以提供/链接到的任何细节或代码都会很棒！感谢你的宝贵时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-04T21:39:30.567

你首先从路由器盒子 var boxes = routeBoxer.box(path, distance);

一个盒子只是一系列纬度/经度

```
for (var i = 0; i < boxes.length; i++) {

 var northeast = boxes[i].getNorthEast();
 var southwest = boxes[i].getSouthWest();
 var lat_north = northeast.lat();
 var long_east = northeast.lng();

 var lat_south = southwest.lat();
 var long_west = southwest.lng();
... 
```

现在您已经有了框边界（构成它的纬度/经度），您可以循环遍历所有点以查看它们是否位于该框内。检查这只是一个简单的“这个点是否位于这个矩形中”算法（如果 box.left 和 box.right 之间的 point.x 和 box.top 和 box.bottom 之间的 point.y ）

所以总结一下循环框{循环坐标{}}

当然，这只是开始......这是一种“蛮力”方法，其中每个点都针对每个框进行检查，并且根据您的路线和框的数量，这可能会导致大量排列。使用各种算法都有很大的改进空间。这是我做这个练习的有趣部分——使用这个或那个；做服务器端或客户端...选择...玩得开心...

# python - python中的用户定义类型检查：“type(A()) is A”返回false

> ID：14668105
> 
> 赞同：9
> 
> 时间：2013-02-03T00:21:12.570
> 
> 标签：python, types

从这篇文章 -[在 Python 中检查类型的规范方法是什么？](https://stackoverflow.com/questions/152580/whats-the-canonical-way-to-check-for-type-in-python)，我可以使用此代码来检查对象 o 是否为字符串类型。

```
o = "str"; print type(o) is str --> True 
```

但是，对于用户定义的类型，`type(a) is A`似乎不起作用。

```
class A:
    def hello(self):
        print "A.hello"
a = A()

print type(a) is A # --> False
print type(a) == A # --> False 
```

为什么是这样？如何获得用户定义类型的正确类型检查？我在 Mac OS X 上使用 python 2.7。

PS：这是出于好奇而提出的问题，因为我[从这本书](https://rads.stackoverflow.com/amzn/click/com/B00B74AIPU)中得到了这个例子，结果是正确的，但我得到了错误的结果。我知道鸭子打字是python中的首选方式。（[https://stackoverflow.com/a/154156/260127](https://stackoverflow.com/a/154156/260127)）

## 添加

罗德里戈的回答对我有用。使用“isinstance”并没有给我一个确切的类型，它只是测试一个对象是一个类的实例还是一个子类。

```
class C(A):
    def hello(self):
        print "C.hello"

a = A()
c = C()

print isinstance(a, A) --> True
print isinstance(c, A) --> True
print isinstance(a, C) --> False
print isinstance(c, C) --> True
print "----"
print type(a) == A --> True
print type(c) == A --> False 
```

## 添加 2

jdurango 的回答 ( `a.__class__ is A`) 给了我相当有趣的 Java 等价物。

```
a.getClass() == A.class <--> a.__class__ == A (a.__class__ is A)
a isinstance A <--> isinstance(a, A)
c isinstance A <--> isinstance(c, A) 
```

不知道哪个抄哪个。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-03T00:30:52.427

您应该使用新式类：

```
class A(object):
    pass 
```

也就是说，从`object`.

问题是老式对象的实现就好像它们都是 type 一样`instance`。

直接或间接派生`object`将解决此问题。或者迁移到 Python3，那里不再有旧式类。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-03T00:31:02.550

为什么不使用`isinstance(instance, class)`？

```
>>> class A:
...     def hello(self):
...        print "A.hello"
... 
>>> type(A)
<type 'classobj'>
>>> a = A()
>>> type(a)
<type 'instance'>
>>> isinstance(a, A)
True 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-02-03T00:36:10.387

试试这个

```
print a.__class__ is A
True 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-03T00:32:03.867

如果您正在定义`a`like `a = A()`then`a`是 class 的一个实例`A`。如果您只是在做`a = A`，那么名称`a`指向类对象。

您可能想要一个实例，`A`然后可以使用

```
>>> a = A()
>>> isinstance(a, A)
True 
```

新样式类将测试 True 到`type(A()) == A`。

# jquery - 固定图像效果

> ID：14668123
> 
> 赞同：0
> 
> 时间：2013-02-03T00:24:12.710
> 
> 标签：jquery, html

你好我有一个一般的网络问题。我最近一直在看到一种特定的效果，希望有人能告诉我这种效果的名称以及它是如何完成的。效果可以看这里： http: [//www.somoslr.com/](http://www.somoslr.com/)。在桌面上，此站点具有类似于多个固定背景图像的效果，但在移动设备上，它充当标准站点。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T18:12:35.690

该效果称为“[视差](http://www.awwwards.com/30-great-websites-with-parallax-scrolling.html)”，相关网站使用的是 Mark Dalgleish 的[Stellar.js](http://markdalgleish.com/projects/stellar.js/)库。

他的库有一些内置的额外功能，可以让移动设备上的一切正常运行......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T00:31:39.887

我猜他们只使用`$('body').css('background-image', url(blah.png)');`一次 div （我假设它是底部的那个）达到一定距离（`document.getElementById("div").scrollTop;`）。当然，他们一定是找到了使用的窗户的高度`window.innerHeight`并从那里出发的。

# c# - CallerMemberNameAttribute 和 .Net 4

> ID：14668126
> 
> 赞同：2
> 
> 时间：2013-02-03T00:24:44.200
> 
> 标签：c#

全部，

我注意到在 .Net 4.5 中有一个 CallerMemberName 属性，Blend 专门使用该属性从调用方法中引发 PropertyChanged 事件。我的问题是，由于此属性在 .Net 4.0 中并不特别存在，是否可以通过创建自定义属性以某种方式复制此行为？非常感谢代码示例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T00:26:48.533

您正在寻找的行为是 C# 5.0**编译器**的一个特性。

只要您使用支持它的编译器，您就可以创建自己的编译器，`System.ComponentModel.CallerMemberNameAttribute`它会正常工作。

# wcf - WCF 文件上传大文件

> ID：14668130
> 
> 赞同：0
> 
> 时间：2013-02-03T00:25:35.410
> 
> 标签：wcf

在过去的两天里，我一直在做一些研究，以找到解决问题的方法，但无济于事。

我创建了一个 WCF 服务，如下所示：

```
[OperationContract]
void CopyMemberFile(string memberNumber, string fileName, byte[] fileBytes); 
```

我从我的客户那里调用它，就像从 page_load 事件中一样：

```
byte[] filebytes = null;

using (Stream fs = new FileStream(file, FileMode.Open, FileAccess.Read))
{
     filebytes = new byte[fs.Length];
     fs.Read(filebytes, (int)0, (int)fs.Length);
}

client.CopyMemberFile(memberNumber, Path.GetFileName(file), filebytes); 
```

我的配置是这样的：

客户端配置：

```
<configuration>
  <system.web>
    <authorization>
      <allow users="*"/>
    </authorization>
    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A" />
        <add assembly="System.Windows.Forms, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
        <add assembly="System.Speech, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
      </assemblies>
    </compilation>
    <authentication mode="Forms">
    <forms loginUrl="~/Account/Login.aspx" timeout="300" cookieless="UseUri" />
  </authentication>
  <membership>
    <providers>
      <clear />
        <add name="AspNetSqlMembershipProvider"
             type="System.Web.Security.SqlMembershipProvider" 
             connectionStringName="ApplicationServices" 
             enablePasswordRetrieval="false" 
             enablePasswordReset="true" 
             requiresQuestionAndAnswer="false" 
             requiresUniqueEmail="false"
             maxInvalidPasswordAttempts="5" 
             minRequiredPasswordLength="6" 
             minRequiredNonalphanumericCharacters="0" 
             passwordAttemptWindow="10" 
             applicationName="/" />
    </providers>
  </membership>
  <profile>
    <properties>
      <add name="FirstName"/>
      <add name="LastName"/>
      <add name="MemberNumber"/>
      <add name="LastVisit" type="System.DateTime"/>
    </properties>
    <providers>
      <clear />
        <add name="AspNetSqlProfileProvider" 
             type="System.Web.Profile.SqlProfileProvider"
             connectionStringName="ApplicationServices" 
             applicationName="/" />
    </providers>
  </profile>
  <roleManager enabled="false">
    <providers>
      <clear />
        <add name="AspNetSqlRoleProvider" 
             type="System.Web.Security.SqlRoleProvider" 
             connectionStringName="ApplicationServices" 
             applicationName="/" />
        <add name="AspNetWindowsTokenRoleProvider"
             type="System.Web.Security.WindowsTokenRoleProvider" 
             applicationName="/" />
    </providers>
  </roleManager>
  <httpHandlers>
    <remove verb="*" path="*.asmx"/>
    <add verb="*" path="*.asmx" validate="false" 
         type="System.Web.Script.Services.ScriptHandlerFactory" />
    <add path="Telerik.Web.UI.WebResource.axd" 
         type="Telerik.Web.UI.WebResource" verb="*" validate="false" />
  </httpHandlers>
  <httpRuntime maxRequestLength="1048576"/>
</system.web>
<system.serviceModel>
  <behaviors>
    <endpointBehaviors>
      <behavior name="online.members.asp.Services.MembersOnlineSeviceAjaxAspNetAjaxBehavior">
        <enableWebScript />
      </behavior>
    </endpointBehaviors>
  </behaviors>
  <serviceHostingEnvironment aspNetCompatibilityEnabled="true"
                             multipleSiteBindingsEnabled="true" />
  <services>
    <service name="online.members.asp.Services.MembersOnlineSeviceAjax">
      <endpoint address="" behaviorConfiguration="online.members.asp.Services.MembersOnlineSeviceAjaxAspNetAjaxBehavior"
                binding="webHttpBinding" 
                contract="online.members.asp.Services.MembersOnlineSeviceAjax" />
    </service>
  </services>
  <bindings>
    <basicHttpBinding>
      <binding name="BasicHttpBinding_IMembershipApplications" 
                     closeTimeout="00:01:00"
                     openTimeout="00:01:00" 
                     receiveTimeout="00:10:00" 
                     sendTimeout="00:01:00"
                     allowCookies="false" 
                     bypassProxyOnLocal="false" 
                     hostNameComparisonMode="StrongWildcard"
                     maxBufferSize="2147483647" 
                     maxBufferPoolSize="2147483647" 
                     maxReceivedMessageSize="2147483647"
                     messageEncoding="Text" 
                     textEncoding="utf-8" 
                     transferMode="Buffered"
                     useDefaultWebProxy="true">
        <readerQuotas maxDepth="128" 
                      maxStringContentLength="2147483647" 
                      maxArrayLength="2147483647"
                      maxBytesPerRead="2147483647" 
                      maxNameTableCharCount="2147483647" />
        <security mode="None">
          <transport clientCredentialType="None" 
                     proxyCredentialType="None"
                     realm="" />
          <message clientCredentialType="UserName" 
                   algorithmSuite="Default" />
        </security>
      </binding>
    </basicHttpBinding>
  </bindings>
  <client>
    <endpoint address="http://localhost:58119/MembershipApplications.svc"
              binding="basicHttpBinding"
              bindingConfiguration="BasicHttpBinding_IMembershipApplications"
              contract="MembershipApplicationsServiceReference.IMembershipApplications"
              name="BasicHttpBinding_IMembershipApplications" />
  </client>
</system.serviceModel> 
```

服务配置：

```
<configuration>
  <system.web>
    <roleManager enabled="true" />
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <serviceMetadata httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>
</configuration> 
```

我得到的错误是：

```
3/02/2013 11:12:39 AM: Upload.aspx Error: The remote server returned an unexpect
ed response: (400) Bad Request.
Server stack trace:
   at System.ServiceModel.Channels.HttpChannelUtilities.ValidateRequestReplyResp
onse(HttpWebRequest request, HttpWebResponse response, HttpChannelFactory factor
y, WebException responseException, ChannelBinding channelBinding)
   at System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpCha
nnelRequest.WaitForReply(TimeSpan timeout)
   at System.ServiceModel.Channels.RequestChannel.Request(Message message, TimeS
pan timeout)
   at System.ServiceModel.Dispatcher.RequestChannelBinder.Request(Message messag
e, TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean on
eway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan tim
eout)
   at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCall
Message methodCall, ProxyOperationRuntime operation)
   at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)

Exception rethrown at [0]:
   at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage req
Msg, IMessage retMsg)
   at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgDa
ta, Int32 type)
   at online.members.asp.MembershipApplicationsServiceReference.IMembershipAppli
cations.CopyMemberFile(String memberNumber, String fileName, Byte[] fileBytes)` 
```

我只能上传几个 KB 的文件，但任何大于 8KB 的文件都会失败

任何帮助都会很棒。

调用代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    var file = Request.Form["name"];            
    var memberNumber = Request.Form["memberNumber"];
    var tempId = Guid.NewGuid();

    var client = new MembershipApplicationsServiceReference.MembershipApplicationsClient();

    client.LogEvent("Entered Upload.aspx");

    try
    {
        byte[] filebytes = null;

        using (Stream fs = new FileStream(file, FileMode.Open, FileAccess.Read))
        {
            filebytes = new byte[fs.Length];
            fs.Read(filebytes, (int)0, (int)fs.Length);

            client.LogEvent("Starting service call from Upload.aspx");
            client.CopyMemberFile(memberNumber, Path.GetFileName(file), filebytes);                    
        }

        client.LogEvent("Completed service call from Upload.aspx");
    }
    catch (Exception ex)
    {
        Debug.WriteLine(ex.StackTrace);

        client.LogEvent("Upload.aspx Error: " + ex.Message + ex.StackTrace);

        StatusLabel.Text = "Upload status: The file could not be uploaded. The following error occured: " + ex.Message;
    }
    finally
    {
        client.LogEvent("Finishing up");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T07:05:58.407

查看服务的配置文件，您使用的是 .NET 4.0，并且没有指定任何绑定，因此您将收到 .NET 的默认设置`basicHttpBinding`。正如上面评论中所建议的，为您的服务更新您的配置文件，如下所示：

```
<system.serviceModel>
  <behaviors>
    <serviceBehaviors>
      <behavior>
        <serviceMetadata httpGetEnabled="true"/>
        <serviceDebug includeExceptionDetailInFaults="true"/>
      </behavior>
    </serviceBehaviors>
  </behaviors>
  <bindings>
    <basicHttpBinding>
      <binding name="BasicHttpBinding_IMembershipApplications" 
                     closeTimeout="00:01:00"
                     openTimeout="00:01:00" 
                     receiveTimeout="00:10:00" 
                     sendTimeout="00:01:00"
                     allowCookies="false" 
                     bypassProxyOnLocal="false" 
                     hostNameComparisonMode="StrongWildcard"
                     maxBufferSize="2147483647" 
                     maxBufferPoolSize="2147483647" 
                     maxReceivedMessageSize="2147483647"
                     messageEncoding="Text" 
                     textEncoding="utf-8" 
                     transferMode="Buffered"
                     useDefaultWebProxy="true">
        <readerQuotas maxDepth="128" 
                      maxStringContentLength="2147483647" 
                      maxArrayLength="2147483647"
                      maxBytesPerRead="2147483647" 
                      maxNameTableCharCount="2147483647" />
        <security mode="None">
          <transport clientCredentialType="None" 
                     proxyCredentialType="None"
                     realm="" />
          <message clientCredentialType="UserName" 
                   algorithmSuite="Default" />
        </security>
      </binding>
    </basicHttpBinding>
  </bindings>
  <services>
    <service name="YourServiceName">
      <endpoint address="" 
                binding="basicHttpBinding"
                bindingConfiguration="BasicHttpBinding_IMembershipApplications" 
                contract="YourFullyQualifiedContractName" />
    </service>
  </services>
  <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
</system.serviceModel> 
```

这将告诉 WCF 使用您的设置`basicHttpBinding`而不是 .NET 默认值。

或者，您可以省略`name`绑定定义中的属性，WCF 会将其用作配置文件处理的所有服务的默认绑定（如果您有多个服务）。

如果这没有帮助，或者如果您现在遇到不同的错误，请告诉我们，我们将从那里处理。

# php - 将搜索查询结果回显到新页面？

> ID：14668131
> 
> 赞同：0
> 
> 时间：2013-02-03T00:25:35.807
> 
> 标签：php, mysql

嗨，我有一个我正在使用的搜索脚本，基本上当用户输入查询时，即伦敦或 5 岁的用户结果显示了多少个结果。我将其限制为五个的原因是因为空间不足。

我正在尝试制作一个显示在搜索结果底部的按钮，显示查看更多类似结果。这基本上会链接到一个新页面并回显用户最初输入的查询，所以首先他们输入 london 并显示结果为 london 的五个用户，然后如果他们单击链接，则所有结果为 london显示在新页面上。

有谁知道我如何回显查询或做类似的事情，这将给我所需的效果。

这是我的代码：

```
<?php
//PHP CODE STARTS HERE

if(isset($_GET['submit'])){

// Change the fields below as per the requirements
$db_host="localhost";
$db_username="root";
$db_password="";
$db_name="";
$db_tb_atr_name="display_name";

//Now we are going to write a script that will do search task
// leave the below fields as it is except while loop, which will display results on screen

mysql_connect("$db_host","$db_username","$db_password");
mysql_select_db("$db_name");

$query=mysql_real_escape_string($_GET['query']);

$query_for_result=mysql_query("SELECT *
                        FROM ptb_stats
                        WHERE display_name like '%".$query."%' OR location LIKE '%".$query."%' OR age LIKE '%".$query."%' OR nationality LIKE '%".$query."%' OR ethnicity LIKE '%".$query."%' OR hobbies LIKE '%".$query."%' OR station LIKE '%".$query."%' LIMIT 5");
echo "<div class=\"search-results\">";
while($data_fetch=mysql_fetch_array($query_for_result))

{

    echo "<div class=\"text\"><a href=\"profile.php?id={$data_fetch['user_id']}\" class=\"search\">";
    echo "<div class=\"spacing\"><img width=35px height= 30px src=\"data/photos/{$data_fetch['user_id']}/_default.jpg\" class=\"boxgridsearch\"/> "; 
     echo substr($data_fetch[$db_tb_atr_name], 0,160);
    echo "</a></div></div>";

}
echo "<div class=\"morebutton-search\"><a href=\"search.php?to=echo '%".$query."%'\" target=\"_blank\" \">+ view more results</a></div>";

mysql_close();
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T00:31:04.123

你的想法是对的，但你陷入了货物狂热的编程模式。

1)`"$db_host"`毫无意义。构建一个新字符串只是为了完整地保存其他字符串？`$db_host`不带引号（对于其他变量也是如此）就是所需要的。

2)`echo`是一种语言结构。它没有返回值，您不能将其“结果”连接在一起。您还嵌入了字符串中的 echo ，甚至阻止 PHP 将其视为输出指令：

```
echo "[...snip...]<a href=\"search.php?to=%$query%\" target=[...snip...]"; 
```

这就是我们所需要的。您不必为变量“中断”出双引号字符串。对于多行字符串回显，您确实应该改用[HEREDOC](http://php.net/heredoc)，这使得代码更加清晰。

# c++ - QVector 与 Qthreads

> ID：14668132
> 
> 赞同：0
> 
> 时间：2013-02-03T00:25:43.677
> 
> 标签：c++, multithreading, qt, vector

您好，我正在尝试构建对象`QVector`，`QThread`但是当我尝试构建时出现此错误`'QObject::QObject' : cannot access private member declared in class 'QObject'`。有人可以告诉我为什么我会收到这个错误以及如何克服它或指出我的答案方向。谢谢你的时间。

主程序

```
#include <QCoreApplication>

#include "thread.h"
#include <QDebug>
#include <QThread>

main(int argc, char *argv[])
{
    QCoreApplication a(argc, argv);

    unsigned long long startingNumberAnswer = 0;
    unsigned long long totalIterationsAnswer = 0;
    int numberOfThreads = 10;

    QVector<Thread> threads(numberOfThreads);

    for(int l = 0; l < threads.size(); l++ ){
        threads[l].setPriority(QThread::TimeCriticalPriority);
    }

    for(int i = 1; i< 2000000; i+=numberOfThreads){
        qDebug() << "Longest iteration Number =  " << startingNumberAnswer;
        qDebug() << "Number of iterations for " << startingNumberAnswer << " is " << totalIterationsAnswer;
        qDebug() << "Running # " << i;

        system("CLS");

    }

    qDebug() << "Longest iteration Number =  " << startingNumberAnswer;
    qDebug() << "Number of iterations for " << startingNumberAnswer << " is " << totalIterationsAnswer;

    return a.exec();
} 
```

线程.H

```
#ifndef THREAD_H
#define THREAD_H

#include <QObject>
#include <QThread>

class Thread :  public QThread
{
    Q_OBJECT
public:
    explicit Thread();

    unsigned long long getloops();
    unsigned long long getnumber();
signals:

public slots:
    void run(unsigned long long value);
private:
    unsigned long long largestNumber;
    unsigned long long loops;
    unsigned long long number;

};

#endif // THREAD_H 
```

线程.CPP

```
#include "thread.h"

Thread::Thread()
{
}

void Thread::run(unsigned long long value)
{
   unsigned long long n = value;
   unsigned long long counter = 0;

   while ( n > 1){

       if(n%2 == 0){
          n = n/2;
       } else {
          n = (3*n) + 1;
       }

       counter++;
   }

    loops = counter;
    number = value;

}

unsigned long long Thread::getloops(){
    return loops;
}

unsigned long long Thread::getnumber(){
    return number;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T00:30:31.600

简而言之，QObject 对象不可复制也不可分配 - 请查看[官方文档](http://harmattan-dev.nokia.com/docs/library/html/qt4/qobject.html#no-copy-constructor-or-assignment-operator)：

> **没有复制构造函数或赋值运算符**
> 
> QObject 既没有复制构造函数也没有赋值运算符。这是设计使然。实际上，它们是被声明的，但是在一个带有宏 Q_DISABLE_COPY() 的私有部分中。事实上，所有从 QObject 派生的 Qt 类（直接或间接）都使用这个宏来声明它们的复制构造函数和赋值运算符是私有的。推理可以在 Qt 对象模型页面上关于 Identity vs Value 的讨论中找到。
> 
> 主要结果是您应该使用指向 QObject（或指向您的 QObject 子类）的指针，否则您可能会试图将 QObject 子类用作值。**例如，如果没有复制构造函数，就不能使用 QObject 的子类作为要存储在容器类之一中的值。您必须存储指针。**

因此，您将需要使用`QVector<Thread*>`来存储线程（不要忘记在使用它们之前创建对象）。

[QVector 的文档](http://harmattan-dev.nokia.com/docs/library/html/qt4/qvector.html)中也提到了这一点：

> QVector 的值类型必须是可赋值的数据类型。这涵盖了大多数常用的数据类型，但编译器不会让您，例如，将 QWidget 存储为值；相反，存储一个 QWidget *. 一些功能有额外的要求；例如，indexOf() 和 lastIndexOf() 期望值类型支持 operator==()。这些要求是按功能记录的。

# ruby - 迭代数组并在每一步中留下一个

> ID：14668135
> 
> 赞同：0
> 
> 时间：2013-02-03T00:26:33.510
> 
> 标签：ruby

如何在 Ruby 中迭代数组的元素，并且在每一步中，我都可以对包含所有元素的数组做一些事情，除了当前迭代的元素？

例如，`[4,2,8]`我迭代元素，然后我可以做一些事情

*   `[2,8]`
*   `[4,8]`
*   `[4,2]`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T00:51:30.793

~~这并不是直接可能的~~（除非您不需要缺少的元素）。但是你可以自己编程：

**选项 1 - 就这样做**：

```
a = [11,22,33,44,55]

a.each_with_index { |e,i|
  p e
  p a.take(i) + a[i+1..-1]
} 
```

**选项 2 - 与 Array 集成**：

```
class Array
  def each_excluded(&block)
    self.each_with_index { |e, i|
      yield(e, self.take(i) + self[i+1..-1])
    }
  end
end

a.each_excluded { |e, rest|
  p e
  p rest
} 
```

任一输出：

```
11
[22, 33, 44, 55]
22
[11, 33, 44, 55]
33
[11, 22, 44, 55]
44
[11, 22, 33, 55]
55
[11, 22, 33, 44] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T00:29:56.797

您可以使用[slice 方法](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-slice)并创建一个新数组，其中包含除具有索引的项之外的项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T01:05:46.003

```
[4, 2, 8].tap{|a| a.length.times{|i| 
  do_something_you_want_with(a[0...i]+a[i+1..-1])
}} 
```

或者

```
class Array
  def each_but_one &pr
    length.times{|i| pr.call(self[0...i]+self[i+1..-1])}
  end
end

[4, 2, 8].each_but_one{|a| do_something_you_want_with(a)} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T03:23:25.873

它真的看起来像你想要的[`Array#combination`](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-combination)：

```
[4,2,8].combination(2).each do |ary|
  p ary
end 
```

哪个输出：

```
[4, 2]
[4, 8]
[2, 8] 
```

创建的每个子数组都会产生给块，在本例中为`ary`，因此您可以使用这些值做您想做的事情。

# cakephp - 未选择 HABTM 下拉项目

> ID：14668137
> 
> 赞同：1
> 
> 时间：2013-02-03T00:26:54.897
> 
> 标签：cakephp

我创建了一个有趣的网站来学习 CakePHP，但由于某种原因，我无法获得多选下拉框来显示我选择的项目。在此示例中，1 个视频游戏可能有多种难度（简单、普通、困难）。在我的游戏编辑页面上，我有一个多选框来选择困难。它显示了所有三个困难，我可以选择它们并正确保存。但是，当我返回编辑页面时，我之前保存的项目不会突出显示为选中状态。我已验证记录已正确保存在数据库中。

表：游戏难度困难_games

楷模：

```
class Game extends AppModel {
public $actsAs = array('Containable');
public $hasAndBelongsToMany = array(
    'Difficulty' =>
        array(
            'className' => 'Difficulty',
            'joinTable' => 'difficulties_games',
            'foreignKey' => 'game_id',
            'associationForeignKey' => 'difficulty_id',
            'unique' => 'true'
            )
);
}
class Difficulty extends AppModel {
public $actsAs = array('Containable');
public $hasAndBelongsToMany = array(
    'Game' =>
        array(
            'className' => 'Game',
            'joinTable' => 'difficulties_games',
            'foreignKey' => 'difficulty_id',
            'associationForeignKey' => 'game_id',
            'unique' => 'true'
            )
);
} 
```

控制器：

```
$game = $this->Game->findById($id);
$this->set('difficulties', $this->Game->Difficulty->find('list')); 
```

查看（编辑.ctp）：

```
echo $this->Form->input('Difficulty'); 
```

这一定很简单，但我已经阅读了有关 HABTM 的书并在此处搜索，但在多选框中找不到太多内容。

更新：

这是控制器中的整个编辑功能：

```
public function edit($id = null) {
    if (!$id) {
        throw new NotFoundException(__('Invalid post'));
    }

    $game = $this->Game->findById($id);
    if (!$game) {
        throw new NotFoundException(__('Invalid post'));
    }
    if ($this->request->is('post') || $this->request->is('put')) {
        $this->Game->id = $id;
        if ($this->Game->saveAll($this->request->data)) {
            $this->Session->setFlash('Your game has been updated.');
            $this->redirect(array('action' => 'index'));
        } else {
            $this->Session->setFlash($this->Game->invalidFields());
        }
    }

    if (!$this->request->data) {
        $this->request->data = $game;
    }
    $this->set('systems', $this->Game->System->find('list'));
    $this->set('genres', $this->Game->Genre->find('list'));
    $this->set('difficulties', $this->Game->Difficulty->find('list'));

} 
```

这里还有更多关于视图的信息：

```
echo $this->Form->create('Game');
echo $this->Form->input('name');
echo $this->Form->input('system_id');
echo $this->Form->input('genre_id');
echo $this->Form->input('Difficulty');
echo $this->Form->input('id', array('type' => 'hidden'));
echo $this->Form->end('Save Game'); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-03T05:46:43.340

您使用的是什么 CakePHP 版本？版本 2.2.6 和 2.3.0 有一个与显示已选择的现有 habtm 相关的错误。因此，如果使用 2.2.6 或使用 2.3.0，则更新到 2.2.7，使用来自 github 的 master 分支，直到下一个错误修复版本完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-02T16:32:07.280

对于`public $recursive = -1;`由于性能原因而在其 AppModel 中设置或更改其控制器中的递归的每个人：如果没有递归 1，自动魔术将无法工作！确保在检索数据以进行编辑时在选项中更改它。

```
$options = array(
    'recursive' => 1,
    'conditions' => array('YourModel.' . $this->YourModel->primaryKey => $id)
);
$this->request->data = $this->YourModel->find('first', $options); 
```

# iphone - Facebook SDK 错误 3 和错误 2

> ID：14668138
> 
> 赞同：1
> 
> 时间：2013-02-03T00:26:56.437
> 
> 标签：iphone, ios, objective-c, ios6, facebook-ios-sdk

我有这个应用程序用于在 facebook 上发帖，目前在某些 iOS 6.0 设备上发帖时遇到困难。我只使用 facebook SDK 3.1 并尝试发布操作。以下是我在课堂上用来启动读取权限的代码。

对于访问，我使用以下代码。

```
// CALLING THIS CODE BLOCK IN ONE BUTTON ACTION.
        if (FBSession.activeSession.isOpen)
        {
            [self pickaChoice];
        } 
        else 
        {
            [FBSession openActiveSessionWithPublishPermissions:[NSArray arrayWithObjects:@"publish_actions", nil]
                                               defaultAudience:FBSessionDefaultAudienceEveryone
                                                  allowLoginUI:YES
                                             completionHandler:
             ^(FBSession *session,
               FBSessionState state, NSError *error) {
                 [self sessionStateChanged:session state:state error:error];
             }];
        }

- (void)sessionStateChanged:(FBSession *)session
                      state:(FBSessionState) state
                      error:(NSError *)error
{

    switch (state)
    {
        case FBSessionStateOpen:
            [FBSession setActiveSession:session];
            [self pickaChoice];

            break;
        case FBSessionStateClosed:
        case FBSessionStateClosedLoginFailed:
            // Once the user has logged in, we want them to
            // ...

            [FBSession.activeSession closeAndClearTokenInformation];

            break;
        default:
            break;
    }

    if (error) {
        NSString* message = [NSString stringWithFormat:@"You have disallowed application to post on your behalf."];
        UIAlertView *alertView = [[UIAlertView alloc]
                                  initWithTitle:@"Error"
                                  message:message
                                  delegate:nil
                                  cancelButtonTitle:@"OK"
                                  otherButtonTitles:nil];
        [alertView show];
        [FBSession.activeSession closeAndClearTokenInformation];
    }
}

-(void)pickaChoice
{
    /* Just a class to select message and then retrieve the message in the next function 
    -(void)didSelectaPhraseToPost:(NSString *)message   */
    FBPublishViewController *fbPublishViewController = [[FBPublishViewController alloc] initWithNibName:@"FBPublishViewController"
                                                                                                 bundle:[NSBundle mainBundle]];

    fbPublishViewController.selectionDelegate = self;

    [self presentViewController:fbPublishViewController
                       animated:YES
                     completion:^(){
                         //nil
                     }];

}

-(void)didSelectaPhraseToPost:(NSString *)message
{
    // Selecting a message from a class and retrieving here. This is the message to post on the feed. 

    [self publishMessage:message];
}

- (void) performPublishAction:(void (^)(void)) action 
{

    if ([FBSession.activeSession.permissions indexOfObject:@"publish_actions"] == NSNotFound) {
        [FBSession.activeSession reauthorizeWithPublishPermissions:[NSArray arrayWithObject:@"publish_actions"]
                                                   defaultAudience:FBSessionDefaultAudienceFriends
                                                 completionHandler:^(FBSession *session, NSError *error) {
                                                     if (!error) {
                                                         action();
                                                     }
                                                     //For this example, ignore errors (such as if user cancels).
                                                 }];
    } else {
        action();
    }

}

- (void)publishMessage:(NSString *)message
{
    NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   @"APP_NAME", @"name",
                                   message, @"message",
                                   APP_LINK, @"link",
                                   @"APP_PICTURE", @"picture",
                                   nil];

     [self.spinner startAnimating];

       [self performPublishAction:^{
            [FBRequestConnection
             startWithGraphPath:@"me/feed"
             parameters:params
             HTTPMethod:@"POST"
             completionHandler:^(FBRequestConnection *connection,
                                 id result,
                                 NSError *error) {

                 [self.spinner stopAnimating];

                 NSString *messageTitle = nil;

                 NSString *message = nil;

                 // If the result came back okay with no errors...
                 if (result && !error)
                 {
                     NSLog(@"accessToken : %@",[FBSession activeSession].accessToken );
                     NSLog(@"result : %@",result);
                     messageTitle = @"Success";
                     message = @"App has posted to facebook";

                 }else{
                     NSLog(@"error : %@",error);
                     messageTitle = @"Error v1.1";
                     //message =  error.localizedDescription;
                     message = @"Unable to process the request. Please check the permissions for the application.";
                     [FBSession.activeSession closeAndClearTokenInformation];
                 }

                 UIAlertView *alert = [[UIAlertView alloc] initWithTitle:messageTitle
                                                                 message:message
                                                                delegate:nil
                                                       cancelButtonTitle:@"OK"
                                                       otherButtonTitles: nil];
                 [alert show];

                 //TODO maybe clear connection here if we want to force an new login 

             }];
       }];

} 
```

现在问题出在某些 iOS 6.0 设备上，它会抛出 facebook.sdk.error 3，而在某些设备上，即使允许应用程序发布，它也会抛出 facebook.sdk.error 2。在当前代码中，我刚刚将消息更改为自定义消息以获得更用户友好的消息，但如果您继续打印本地化描述，它将显示这些消息。

在大多数 iOS 6.0 设备上，代码运行良好，并且消息已发布。让我知道是否有人可以找出问题的确切位置。我已经在这上面呆了几天，但仍然没有找到问题所在。

**编辑 1** 我观察到的一种模式是，当安装 facebook 应用程序并且用户通过它登录而不是通过本机设置登录时，我面临着这些困难。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-04T12:43:41.260

我在iOS6中使用了这种方法，它对我来说很好，可能对你有帮助。

```
-(void)openFacebookAuthentication
{
    NSArray *permission = [NSArray arrayWithObjects:kFBEmailPermission,kFBUserPhotosPermission, nil];

    [FBSession setActiveSession: [[FBSession alloc] initWithPermissions:permission] ];

    [[FBSession activeSession] openWithBehavior:FBSessionLoginBehaviorForcingWebView completionHandler:^(FBSession *session, FBSessionState status, NSError *error) {

        switch (status) {
            case FBSessionStateOpen:
                [self getMyData];
                break;
            case FBSessionStateClosedLoginFailed: {
                NSString *errorCode = [[error userInfo] objectForKey:FBErrorLoginFailedOriginalErrorCode];
                NSString *errorReason = [[error userInfo] objectForKey:FBErrorLoginFailedReason];
                BOOL userDidCancel = !errorCode && (!errorReason || [errorReason isEqualToString:FBErrorLoginFailedReasonInlineCancelledValue]);

                if(error.code == 2 && ![errorReason isEqualToString:@"com.facebook.sdk:UserLoginCancelled"]) {
                    UIAlertView *errorMessage = [[UIAlertView alloc] initWithTitle:kFBAlertTitle
                                                                           message:kFBAuthenticationErrorMessage
                                                                           delegate:nil
                                                                           cancelButtonTitle:kOk
                                                                           otherButtonTitles:nil];
                    [errorMessage performSelectorOnMainThread:@selector(show) withObject:nil waitUntilDone:YES];
                    errorMessage = nil;
                }

            }
                break;
                // presently extension, log-out and invalidation are being implemented in the Facebook class
            default:
                break; // so we do nothing in response to those state transitions
        }
    }];
    permission = nil;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T07:11:40.263

如果您找到您的 iOS 版本并为 iOS 6.0 使用苹果的默认 facebook shar 视图会很好，而对于以下版本，您必须使用 Graph API。

# c - 查找 char 指针、int 和 float 的结尾

> ID：14668141
> 
> 赞同：0
> 
> 时间：2013-02-03T00:27:29.213
> 
> 标签：c, casting, void-pointers, systems-programming

我有一个函数将传递一个 void 指针。此指针可以是 int、char 或 float。我知道将通过关联值传递给我的数据类型。例如，下面是我的函数的样子：

```
void * (int type, void * data); 
```

如果传递给我的 void 指针最初是 char 类型，然后我将其转换回 char 类型，有没有办法确定与该指针关联的字节数？例如，如果我的函数调用如下：

```
f(1, (void *)"Hello world"); 
```

我将 void 指针转换回 char 指针

```
char * p = (char *)data; 
```

有什么方法可以算出使用了多少字节？我是否可能必须搜索空字符并计算它与原始指针的距离？我还需要做什么才能找到 int 和 float 的大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T00:32:12.810

> 我是否可能必须搜索空字符并计算它与原始指针的距离？

是的，如果您`void*`实际上是一个，`char*`这将起作用。

> 我还需要做什么才能找到 int 和 float 的大小？

`int`并且`float`始终保持相同的大小（这取决于您的架构，通常是 32 位或 64 位。使用`sizeof`运算符来确定确切的大小）。如果您要传递一个 int 数组，因为`void*`您无法找到它的长度。

通常在这些情况下，也可以将大小传递给您的函数。

# java - CryptUnprotectData 在使用 JNI 时返回 false

> ID：14668143
> 
> 赞同：0
> 
> 时间：2013-02-03T00:27:36.950
> 
> 标签：java, c++, winapi, java-native-interface

我正在尝试编写一个使用 WinAPI CryptprotectData 和 CryptUnprotectData 函数的 java 应用程序。我正在尝试通过使用 java JNI 来实现这一点。这是我第一次使用 JNI，我在解密数据时遇到了问题。我在 Visual Studio 中对此进行了调试，发现对 CryptUnprotectData 的调用返回 false 并且函数返回 NULL。我不知道它为什么这样做。

这是代码：

```
JNIEXPORT jbyteArray JNICALL Java_Caller_Decrypt(JNIEnv * env, jobject obj, jbyteArray bytes)
{
   int len = env->GetArrayLength(bytes);
   jbyte * data = env->GetByteArrayElements(bytes,NULL);
   env->ReleaseByteArrayElements(bytes, data, 0);
   DATA_BLOB inData = {len, reinterpret_cast<unsigned char *>(data)};
   DATA_BLOB outData = {0,NULL};

   if(CryptUnprotectData(&inData,NULL,NULL,NULL,NULL,0,&outData))
   {
       LocalFree(inData.pbData);
       jbyteArray buff= env->NewByteArray(len);
       env->SetByteArrayRegion(buff,0,len,reinterpret_cast<jbyte *>(outData.pbData));
       return buff;
   }
   else
   {
       return NULL;
   }
} 
```

这是相关的java代码：

```
String password = "Password";
Caller c = new Caller();
System.out.println("Password");
byte[] buffer = c.Encrypt(password.getBytes());
System.out.println("Encrypted: " + new String(buffer));
System.out.println("Decrypted: " + new String(c.Decrypt(buffer))); 
```

我不知道为什么 CryptUnprotectData 函数返回 false。自从我使用 c++ 并迷上了 java 已经有一年了，所以我有点生疏了，所以我可能只是错过了一些东西，但我想知道我是否只是错过了一步，因为这是我第一次使用JNI。任何帮助/建议将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T02:33:25.983

这个程序有几个大的内存管理错误。

1）你调用`env->ReleaseByteArrayElements(bytes, data, 0)`然后继续使用数据指针指向的内存内容。这个方法可能已经释放了它的内存，可能用内存管理信息覆盖了它的部分数据。这可能解释了`CryptUnprotectedData()`失败的原因。您必须在制作数据副本`env->ReleaseByteArrayElements()`之后或之后致电。`CryptUnprotectedData()`

2) 你调用`LocalFree()`inData.pbData。这是指向 的指针，`env->GetByteArrayElements(bytes,NULL)`由 JNI API 管理。`ReleaseByteArrayElements`并且必须由 JNI API 发布（您使用BTW做得太早了）。

3) 您没有在 outData.pbData 上调用 LocalFree()，只有在使用复制数据后才应该这样做`SetByteArrayRegion`

否则，我对 Windows Crypto API 的了解不够，无法确定您是否正确调用它，但它看起来对我来说是正确的。

# iphone - CLLocationManager 和单元测试

> ID：14668147
> 
> 赞同：1
> 
> 时间：2013-02-03T00:28:20.120
> 
> 标签：iphone, ios, cocoa, cllocation, ocunit

我最近一直在尝试在我的代码中添加一些（逻辑）单元测试。[我已经用Kiwi](https://github.com/allending/Kiwi)设置了测试，我喜欢 BDD 风格和语法。

我现在的问题是我正在尝试测试一些依赖于`CLLocationManager`发送正确`locationManager:didUpdateToLocation:fromLocation:`. 但是，当我运行测试时，这从未发生过，大概是因为`CLLocationManager`认为它未经授权。作为记录，我已将*.gpx*文件添加到测试目标并编辑方案以使用该文件作为位置（在**Edit Scheme...** -> **Test** -> **Info**下）。当我在模拟器中运行完整的应用程序时，相同的代码可以正常工作。知道如何在测试用例中发送（模拟）位置更新吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T03:44:27.127

使用依赖注入来指定您想要使用的位置管理器。您可以：

*   将其指定为初始化程序的参数（构造函数注入）
*   将其设置为属性（setter 注入）

如果可以，请尝试使用构造函数注入。

然后为了真正的使用，传入一个真正的 CLLocationManager。但是对于测试使用，提供一个可以触发发送所需方法的假，并带有预设的测试参数。通过删除对您的实际位置的任何引用，这也使您的测试具有确定性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T12:35:34.397

我最终选择了另一种方式：我将逻辑测试转换为应用程序测试，以便测试实际上与模拟器中的应用程序一起运行。这具有明确的优势，即我不必费力地获得`[NSBundle mainBundle]`并`CLLocationManager`像在应用程序中一样工作。我更喜欢单独逻辑测试的概念清洁度，但我认为仅仅为此重写代码是没有意义的。

# c - 创建指向二维数组的指针

> ID：14668149
> 
> 赞同：0
> 
> 时间：2013-02-03T00:28:29.560
> 
> 标签：c, pointers, multidimensional-array

我有一个 `bool array[size][size]` 并且想将它的指针传递给一个函数来改变它的值。

```
void change_to_true(???, int i, int j) { // don't know what type it should be
  array[i][j] = 1;
} 
```

如何创建数组的指针，以及如何将指针传递给函数以便更改其值？顺便说一句，这是c代码。

谢谢

编辑：我试过

```
static bool array[size][size];
bool (*array_t)[index] = array;
void change_to_true(bool array, int i, int j); 
```

编译器告诉我`subscripted value is neither array nor pointer` 我试图将函数参数的类型定义从 to 更改`bool array`为`bool* array`，仍然无法正常工作。

我也尝试过`bool (*array_t)[][size] = &array`指针`bool (*array_t)[size][size] = &array;`，仍然无法正常工作。

此外，由于数组的大小是在运行时决定的，所以我不能以这种方式定义枚举或全局数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T01:09:06.963

### 简单的解决方案——但没有指向二维数组的指针

该功能应该很简单：

```
#include <stdbool.h>

enum { size = 24 };

extern void change_to_true(bool array[][size], int i, int j);

void change_to_true(bool array[][size], int i, int j)
{
    array[i][j] = true;
}

int main(void)
{
    bool array[size][size];

    for (int i = 0; i < size; i++)
    {
        for (int j = 0; j < size; j++)
        {
             array[i][j] = false;
             change_to_true(array, i, j);
        }
    }
} 
```

当然，我假设您拥有 C99 或 C2011 编译器。如果您坚持使用 C89，那么您必须为`bool`and提供定义`true`；其余的不需要改变。与`false`.

### 使用指向二维数组的指针的解决方案

请注意，上面的代码严格来说并没有创建指向二维数组的指针。如果你真的非常确定这是你想要的，那么符号就会改变：

```
#include <stdbool.h>

enum { size = 24 };

extern void change_to_true(bool (*array)[][size], int i, int j);

void change_to_true(bool (*array)[][size], int i, int j)
{
    (*array)[i][j] = true;
}

int main(void)
{
    bool array[size][size];

    for (int i = 0; i < size; i++)
    {
        for (int j = 0; j < size; j++)
        {
             array[i][j] = false;
             change_to_true(&array, i, j);
        }
    }
} 
```

但是，使用我能想到的正式的“指向数组的指针”没有任何好处——不是在这种情况下。

### 使用 C99 可变长度数组的解决方案

在 C99 中，您还可以使用 VLA（可变长度数组），如下所示：

```
#include <stdbool.h>

extern void change_to_true(int size, bool array[][size], int i, int j);

void change_to_true(int size, bool array[][size], int i, int j)
{
    array[i][j] = true;
}

int main(void)
{
    for (int size = 2; size < 10; size++)
    {
        bool array[size][size];

        for (int i = 0; i < size; i++)
        {
            for (int j = 0; j < size; j++)
            {
                array[i][j] = false;
                change_to_true(size, array, i, j);
            }
        }
    }
} 
```

请注意，大小必须在函数声明中的数组声明之前。是的，您还使用指向数组表示法的指针编写此代码（实际上，我首先编辑了指向数组表示法代码的指针，然后意识到我想要更简单的版本）。

* * *

### 使用哪个？

除非您有问题中未提及的令人信服的理由，否则第一个版本是要使用的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T01:03:32.660

这应该有效：

```
void change_to_true(bool** array, int i, int j) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T00:31:46.183

[这](https://stackoverflow.com/questions/1052818/create-a-pointer-to-two-dimensional-array)应该回答你的问题。

简而言之，您创建一个指向第一个元素的指针，然后传递它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T01:00:32.740

[编辑] C 自 C 99 起支持 bool 此外，通过以这种方式声明，实际数组是指向具有所有 size^2 实例的内存区域的指针。这意味着您可以在函数中传递数组来更改它，并在您的标头中声明您正在接收 bool array[][]。这样它应该工作。

# java - 5 秒后从 JLabel 中删除文本？

> ID：14668151
> 
> 赞同：0
> 
> 时间：2013-02-03T00:28:39.277
> 
> 标签：java, swing, jlabel

我想知道是否有任何简单的方法可以在 5 秒后从 JLabel 中删除内容（文本）。那可能吗？因为我在 JFrame 中有一个 JLabel，它显示了我正在编码的程序的一些内部错误，我希望 JLabel 显示消息几秒钟，然后变为空白。有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-03T00:47:11.810

最简单的解决方案是使用 Swing Timer。它将防止冻结 GUI 并确保正确的线程访问（即，在 EDT 上执行 UI 修改）。

小演示示例：

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.SwingUtilities;
import javax.swing.Timer;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class TestLabelDelete {
    private JFrame frame;
    private JLabel label;

    protected void initUI() {
        frame = new JFrame(TestLabelDelete.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        label = new JLabel("Some text to delete in 5 seconds");
        frame.add(label);
        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
        Timer t = new Timer(5000, new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                label.setText(null);
            }
        });
        t.setRepeats(false);
        t.start();
    }

    public static void main(String[] args) throws ClassNotFoundException, InstantiationException, IllegalAccessException,
            UnsupportedLookAndFeelException {
        UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                TestLabelDelete testLogin = new TestLabelDelete();
                testLogin.initUI();
            }

        });
    }

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-03T00:49:04.477

使用[定时器](http://docs.oracle.com/javase/6/docs/api/javax/swing/Timer.html)。请看我的例子。

```
import java.awt.Dimension;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.Timer;

public class SourceCodeProgram {

    private static void createAndShowGUI() {
        // Make sure we have nice window decorations.
        JFrame.setDefaultLookAndFeelDecorated(true);

        // Create and set up the window.
        JFrame frame = new JFrame("HelloWorldSwing");
        frame.setMinimumSize(new Dimension(200, 300));
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        // Add the ubiquitous "Hello World" label.
        final JLabel label = new JLabel("Hello World");
        frame.getContentPane().add(label);

        // Display the window.
        frame.pack();
        frame.setVisible(true);

        Timer timer = new Timer(5000, new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                // Clear text or whatever you want
                label.setText("New text");
            }
        });
        // start Tick-Tack
        timer.start();
    }

    public static void main(String[] args) {
        // Schedule a job for the event-dispatching thread:
        // creating and showing this application's GUI.
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGUI();
            }
        });
    }
} 
```

或者你可以写一个单独的类，它可以清理标签。

```
class JLabelCleaner {

    private JLabel label;
    private int waitSeconds;

    public JLabelCleaner(int waitSeconds, JLabel label) {
        this.label = label;
        this.waitSeconds = waitSeconds;
    }

    public void startCountdownFromNow() {
        Timer timer = new Timer(waitSeconds * 1000, new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                label.setText("");
            }
        });
        timer.start();
    }
} 
```

现在，您可以在需要时以这种方式使用它：

```
new JLabelCleaner(5, label).startCountdownFromNow(); 
```

另见：

*   [如何使用摆动计时器](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T00:33:28.273

有一个简单的解决方案。

`JLabel label = new JLabel("error text");`
`Thread.sleep(5000);`
`label.setText("");`

希望这可以帮助！

编辑：如果您不希望程序冻结 5 秒，则必须将其放在 Runnable 中。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-03T08:22:13.250

这很容易做到……只需创建一个新线程并编写代码以清除标签上的文本，并使该线程休眠 5 秒然后启动它。

```
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JFrame;
import javax.swing.JLabel;

public class LabelThread {
    private JLabel textLabel;

    public LabelThread() {
        try {
            JFrame frame  = new JFrame("Label");
            frame.setSize(500, 500);

            textLabel = new JLabel("Hiiii.... Kill me");
            frame.setContentPane(textLabel);

            frame.setVisible(true);

            MyThread thread = new MyThread();
            MyThread.sleep(5000);
            thread.start();
        } catch (InterruptedException ex) {

        }
    }
    class MyThread extends Thread{

        @Override
        public void run() {
            System.out.print("Running thread");
            textLabel.setText("");
        }

}
public static void main(String args[]){
    LabelThread labelThread = new LabelThread();
}
} 
```

# php - jQueryMobile“滑动面板”、“列表视图”的触发功能

> ID：14668154
> 
> 赞同：1
> 
> 时间：2013-02-03T00:28:46.937
> 
> 标签：php, jquery, html, listview, jquery-mobile

在我的 jQueryMobile 应用程序中，我使用滑块作为应用程序的搜索部分。当滑块打开并且用户在搜索面板中写入“要搜索的单词”时，找到的结果的列表视图以以下格式打印出来：

```
<li><a id='$id'>***search result***</a></li> 
```

它从 php 搜索文件加载。单击列表视图的此 li 部分时，我需要触发 onClick 函数重定向到另一个页面并创建变量。但是没有选择这个 onClick 触发器。

这是带有搜索初始化的面板：

```
<div data-role="panel" data-theme="b" id="mypanel" data-position="right" data-position-fixed="true" data-display="overlay">
   <input type="search" name="search-mini" id="search-mini" value="" data-mini="true" />
      <div id="search_results">
        <ul data-role="listview" data-divider-theme="b"  data-inset="true" id="sub_cont"></ul>
      </div>
</div> 
```

发送搜索结果的 PHP：

```
if($uname == $check_uname){
echo "<li id='search_r'>" . "<a href='#'>" . $uname . " : " . " " . $fname . " " . $sname . "</a>" . "</li>";
}else{
echo "<li id='search_r'>" . "<a href='#' id='$id' class='s_result'>" . $uname . " : " . " " . $fname . " " . $sname . "</a>" . "</li>";
} 
```

和 jQuery：

```
$("#cc_page").live('pageshow', function(){
   $("#search_r").click(function(){
       var search_r = $('.s_result').attr('id');
       window.location.href = "http://imes.jzpersonal.com/app/userpanel.html#sfpp_page";
   });
}); 
```

但仍然没有触发点击功能。有人有同样的经历吗？有人找到正确的工作方式吗？

解决方案：

```
$("#cc_page").ready(function(){
  $("#search_r").live('click', function(){
      search_r = $(this).attr('id');
      window.location.href = "http://imes.jzpersonal.com/app/userpanel.html#sfpp_page";
  });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T09:56:16.050

这是行不通的。根据您在输入“要搜索的单词”时所解释的内容，列表视图会动态填充 li 项目，同样的 li 项目应该有一个点击事件。

这是一个问题。您在错误的时刻绑定了单击事件。在您的情况下，click 事件在**pageshow**事件中绑定，此时 listview 没有填充搜索结果，并且由于 javascript 的工作方式，未来的 li 元素不会对它们产生 click 事件。事件不能追溯绑定。

您应该做的是仅在将元素附加到列表视图后才绑定单击事件。

# html - CSS3 - 使用 a:focus 问题显示工具提示

> ID：14668164
> 
> 赞同：0
> 
> 时间：2013-02-03T00:30:23.033
> 
> 标签：html, css, focus, href

所以我有一个超链接，它附加了一个 css 样式，在 :focus 上将显示一个（css）跨度工具提示，因此当用户单击时，`<a href>Link</a>`工具提示将显示在它旁边

（这适用于移动用户，因为 :hover 对他们来说效果不佳）

但是，有一个问题。在工具提示中，有一些链接，但是当用户单击原始链接（：focus 已激活）然后单击工具提示上的另一个链接时，它显然会取消激活：focus，然后浏览器意识到将我重定向到该链接，从而使链接工具提示内无法使用。

用户点击的'a href'有这个css：

```
.tooltip:focus span {
    border-radius: 5px; -moz-border-radius: 5px; -webkit-border-radius: 5px; 
    box-shadow: 5px 5px 5px rgba(0, 0, 0, 0.1); -webkit-box-shadow: 5px 5px rgba(0, 0, 0, 0.1); -moz-box-shadow: 5px 5px rgba(0, 0, 0, 0.1);
    font-family: Calibri, Tahoma, Geneva, sans-serif;
    position: absolute; left: 1em; top: 2em; z-index: 99;
    margin-left: 0; width: 270px;
} 
```

有什么方法可以修改它以使链接在工具提示内工作，而不是在单击时停用焦点并关闭工具提示？

基本上我想问的是，是否有一种方法：focus 可以将另一个元素显示设置为永久显示，这样当 :focus 丢失时它（工具提示内的工具提示/链接）不会丢失？

希望我已经充分解释了我的问题。（是的，我知道我可以使用 javascript，但我更愿意使用 CSS）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T03:59:39.883

除了使用 :focus 伪类，您可以考虑其他一些，例如 :target 或 :checked。这是一个 CodePen 示例，它使用隐藏的复选框来触发工具提示：

[http://codepen.io/anon/pen/bEjcy](http://codepen.io/anon/pen/bEjcy)

这可能会为您提供您正在寻找的互动。

# php - preg_replace_callback，回调的返回值不替换匹配的字符串

> ID：14668167
> 
> 赞同：0
> 
> 时间：2013-02-03T00:30:37.870
> 
> 标签：php, pcre, preg-replace-callback

在以下代码段中

为什么**bar**不替换**foo**？

```
$subject = "Hello foo";

preg_replace_callback(
    '/\bfoo\b/i',

    function ($match)
    {
        return 'bar';
    },

    $subject
 );

 echo $subject; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T00:54:00.357

[`preg_replace_callback`](http://www.php.net/manual/en/function.preg-replace-callback.php#refsect1-function.preg-replace-callback-returnvalues)不修改`$subject`但返回新字符串：

以下代码应该可以工作：

```
$subject = "Hello foo";

echo preg_replace_callback(
    '/\bfoo\b/i',

    function ($match)
    {
        return 'bar';
    },

    $subject
 ); 
```

# ruby - Rspec 似乎没有针对正确的控制器

> ID：14668168
> 
> 赞同：1
> 
> 时间：2013-02-03T00:30:42.367
> 
> 标签：ruby, ruby-on-rails-3, rspec

在我的控制器规格之一中获得非常奇怪的 rspec 行为。

最好能说明。在 ruby​​mine 中，当我设置断点时，会发生这种情况：

```
#rspec test
describe Api::V1::UsersController do
  let(:user) { FactoryGirl.create(:user) }
  describe "#show" do
    it "responds successfully" do
      get 'show', id: user.id
      response.should be_success
    end
end

#controller
class Api::V1::UsersController < AuthenticatedController
    def show # !!! RubyMine breakpoint will stop execution here !!!
      user = User.find(params[:id])
      user_hash = User.information(user, current_user)

      respond_to do |format|
        format.json { render json: user_hash.to_json }
      end
end 
```

所以上面的工作按预期工作。

但是，现在这个测试失败了。

```
#rspec test
describe UsersController do
  let(:user) { FactoryGirl.create(:user, is_admin: false) }
  describe "#show" do
    it "redirects non-admin" do
      get 'index'
      response.should redirect_to user_path(user)
    end
end

#controller
class UsersController < AuthenticatedController
  def index # !!! Breakpoint is never hit !!!
    @users = User.all
    respond_to do |format|
      if current_user.is_admin
        format.html
        format.json { render json: @users }
      else
        redirect_to user_path(current_user) and return
      end
    end
end
By the way, this is the result:
Expected response to be a redirect to <http://test.host/users/625> but was a redirect to <https://test.host/users> 
```

我在 UsersController 中的控制器方法中没有一个断点被命中。但是如果我在 API::V1::UsersController 中设置断点，所有控制器方法都会被命中。

非常感谢任何指导。我真的不知道如何调试它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T23:43:01.607

对不起，这个问题比什么都更令人沮丧。但我终于弄清楚发生了什么。提示： `tail`测试 test.log 是个好主意。

我在控制器上强制使用 ssl。发送的请求 rspec 是 http。 `ActionController::ForceSSL`将请求重定向到 https 和同一个控制器#action。但是，此时，rspec 测试已完成并且测试失败，因为它只看到重定向回相同的控制器#action。

所以在 a`before(:each)`或类似的东西中，使用这个： `request.env['HTTPS'] = 'on'`。现在所有测试都按预期工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T01:09:30.550

我想也许你在重定向测试方面超出了 rspec 的领域。我可以建议使用 capybara 和 rspec 吗？

我的资料来源： [Rspec - Rails - 如何遵循重定向](https://stackoverflow.com/questions/2865378/rspec-rails-how-to-follow-a-redirect) [http://robots.thoughtbot.com/post/33771089985/rspec-integration-tests-with-capybara](http://robots.thoughtbot.com/post/33771089985/rspec-integration-tests-with-capybara)

# unix - 使用 sed 在两个时间范围内搜索文本

> ID：14668173
> 
> 赞同：0
> 
> 时间：2013-02-03T00:30:53.180
> 
> 标签：unix, sed, grep

我有带有时间戳的日志文件。`sed`即使第一个时间戳或最后一个时间戳不存在，我也想在两个时间戳之间搜索文本。例如，如果我在 9:30 和 9:40 之间进行搜索，那么即使 9:30 和 9:40 都不存在但时间戳在 9:30 和 9:40 之间，它也应该返回文本。

我正在使用`sed`一个衬里：

```
sed -n '/7:30:/,/7:35:/p' xyz.log 
```

但它仅在两个时间戳都存在时才返回数据；如果缺少其中一个时间戳，它将打印所有内容。如果时间是 12 小时格式，它将提取上午和下午的数据。

此外，我对不同的日志文件有不​​同的时间戳格式，所以我需要一个通用命令。

以下是一些时间格式示例：

> ```
> <Jan 27, 2013 12:57:16 AM MST>
> 
> Jan 29, 2013 8:58:12 AM 
> 
> 2013-01-31 06:44:04,883 
> ```

其中一些包含 AM/PM 即 12 小时格式，而另一些包含 24 小时格式，因此我也必须考虑到这一点。

我也试过这个，但它不起作用：

> ```
> sed -n -e '/^2012-07-19 18:22:48/,/2012-07-23 22:39:52/p' history.log 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T04:07:13.483

您必须解析大量时间格式，`sed`这不是正确使用的工具。我会自动使用 Perl，但 Python 也会这样做，`awk`如果你下定决心，你可能会这样做。您需要标准化时间格式（您没有说任何关于日期的内容，所以我假设您只使用时间部分）。

```
#!/usr/bin/env perl
use strict;
use warnings;
use constant debug => 0;

my $lo = "09:30";
my $hi = "09:40";

my $lo_tm = to_minutes($lo);
my $hi_tm = to_minutes($hi);

while (<>)
{
    print "Read: $_" if debug;
    if (m/\D\d\d?:\d\d:\d\d/)
    {
        my $tm = normalize_hhmm($_);
        print "Normalized: $tm\n" if debug;
        print $_ if ($tm >= $lo_tm && $tm<= $hi_tm);
    }
}

sub to_minutes
{
    my($val) = @_;
    my($hh, $mm) = split /:/, $val;
    if ($hh < 0 || $hh > 24 || $mm < 0 || $mm >= 60 || ($hh == 24 && $mm != 0))
    {
        print STDERR "to_minutes(): garbage = $val\n";
        return undef;
    }
    return $hh * 60 + $mm;
}

sub normalize_hhmm
{
    my($line) = @_;
    my($hhmm, $ampm) = $line =~ m/\D(\d\d?:\d\d):\d\d\s*(AM|PM|am|pm)?/;
    my $tm = to_minutes($hhmm);
    if (defined $ampm)
    {
        if ($ampm =~ /(am|AM)/)
        {
            $tm -= 12 * 60 if ($tm >= 12 * 60);
        }
        else
        {
            $tm += 12 * 60 if ($tm < 12 * 60);
        }
    }
    return $tm;
} 
```

我使用了样本数据：

```
<Jan 27, 2013 12:57:16 AM MST>

Jan 29, 2013 8:58:12 AM 

2013-01-31 06:44:04,883

Feb 2 00:00:00 AM
Feb 2 00:59:00 AM
Feb 2 01:00:00 AM
Feb 2 01:00:00 PM
Feb 2 11:00:00 AM
Feb 2 11:00:00 PM
Feb 2 11:59:00 AM
Feb 2 11:59:00 PM
Feb 2 12:00:00 AM
Feb 2 12:00:00 PM
Feb 2 12:59:00 AM
Feb 2 12:59:00 PM

Feb 2 00:00:00
Feb 2 00:59:00
Feb 2 01:00:00
Feb 2 11:59:59
Feb 2 12:00:00
Feb 2 12:59:59
Feb 2 13:00:00
Feb 2 09:31:00
Feb 2 09:35:23
Feb 2 09:36:23
Feb 2 09:37:23
Feb 2 09:35:00
Feb 2 09:40:00
Feb 2 09:40:59
Feb 2 09:41:00
Feb 2 23:00:00 
Feb 2 23:59:00
Feb 2 24:00:00
Feb 3 09:30:00
Feb 3 09:40:00 
```

它产生了我认为正确的输出：

```
Feb 2 09:31:00
Feb 2 09:35:23
Feb 2 09:36:23
Feb 2 09:37:23
Feb 2 09:35:00
Feb 2 09:40:00
Feb 2 09:40:59
Feb 3 09:30:00
Feb 3 09:40:00 
```

我确信这不是进行处理的唯一方法；不过，它似乎有效。

* * *

如果您需要进行日期分析，则需要使用[CPAN](http://search.cpan.org/)中的日期或时间操作包之一来处理问题。上面的代码还硬编码了脚本中的时间。您可能希望将它们作为命令行参数处理，这是完全可行的，但上面没有编写脚本。

# jquery - jQuery prevAll 用于单独的元素

> ID：14668176
> 
> 赞同：0
> 
> 时间：2013-02-03T00:30:59.773
> 
> 标签：jquery

如何在下面的小提琴中获取先前的输入值？除非它们在同一个范围内，否则我会不确定。

```
<span>
<input type="text" value="48.00" >
</span>
<span>
<input type="text" value="44.00" >
</span>
$('input[type=text]').click(function () {
alert($(this).prevAll("input[type=text]").val());
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T00:32:39.800

`prevAll`找到*兄弟姐妹*。那些不是兄弟姐妹。`span`但是，他们所在的s 是：

```
var prevInput = $(this).closest('span').prevAll('span').find('input[type=text]'); 
```

请注意，如果您使用`prevAll`，则结果中可能会出现多个`input`元素。调用`val`结果只会给你第一个的值。

# php - 我的 PHP 联系表不起作用

> ID：14668184
> 
> 赞同：0
> 
> 时间：2013-02-03T00:32:16.533
> 
> 标签：php, forms, contact

我正在创建一个网站，并且正在使用 PHP 制作联系表格。它在页面本身上没有出现任何错误，但电子邮件从未出现在我的电子邮件的收件箱或垃圾邮件文件夹中。我的代码是：

```
 $_NAME = $_POST["name"];
        $_EMAIL = $_POST["reply"];
        $_SUBJECT = $_POST["subject"];
        $_MESSAGE = $_POST["message"];

        $_MAILTO = "myemail@gmail.com";
        $_SUBJECT = "Contact Form";
        $_FORMCONTENT = "From: ".$_NAME." Subject: ".$_SUBJECT." Message: ".$_MESSAGE;
        $_MAILHEADER = "Reply To: ".$_EMAIL;

        mail($_MAILTO, $_SUBJECT, $_FORMCONTENT, $_MAILHEADER); 
```

任何想法是什么问题？

编辑 -

这是 HTML 表单：

```
<form id="contact" name="contact" action="contact2.php" method="post">
                <input type="text" class="name" name="name" id="name" placeholder="Your name (optional)" onfocus="placeholder=''" onblur="placeholder='Your name (optional)'" /><br><br>
                <input type="text" class="reply" id="reply" name="reply" placeholder="Your email (optional)" onfocus="placeholder=''" onblur="placeholder='Your email (optional)'" /><br><br>
                <input type="text" class="subject" id="subject" name="subject" placeholder="Subject" onfocus="placeholder=''" onblur="placeholder='Subject'" /><br><br>
                <textarea class="message" id="message" name="message" rows="10" cols="50" placeholder="Enter your message" onfocus="placeholder=''" onblur="placeholder='Enter your message'"></textarea><br><br>
                <input type="submit" class="send" id="send" name="send" value="Send Message" />
            </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T00:42:53.973

第一步是检查邮件函数的返回值，以查看电子邮件是否已成功发送（就 PHP/mail 函数可以确定而言）。

```
$mail_result = mail($_MAILTO, $_SUBJECT, $_FORMCONTENT, $_MAILHEADER);
if ($mail_result) {
    echo <<<HTML
<div>Mail was successfully sent!</div>
HTML;
} else {
    echo <<<HTML
<div>Sending mail failed!</div>
HTML;
} 
```

其次，您应该检查您的 php.ini 文件中是否正确设置了所有适当的设置，特别是 sendmail_path 设置。您绝对应该查看**[PHP 手册中的官方文档](http://php.net/manual/en/function.mail.php)**。

作为最后的努力，您可能需要研究**[另](http://pear.php.net/package/Mail)**一种发送邮件的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T00:49:14.713

简单示例：

```
<?php

// Has the form been submitted?
if (isset($_POST['send'])) {
    // Set some variables
    $required_fields = array('name', 'email'); // add fields as needed
    $errors = array();

    $success_message = "Congrats! Your message has been sent successfully!";
    $sendmail_error_message = "Oops! Something has gone wrong, please try later.";

    // Cool the form has been submitted! Let's loop 
    // through the required fields and check
    // if they meet our condition(s)
    foreach ($required_fields as $fieldName) {
        // If the current field in the loop is NOT part of the form submission -OR-
        // if the current field in the loop is empty
        if (!isset($_POST[$fieldName]) || empty($_POST[$fieldName])) {

            // add a reference to the errors array, indicating that these conditions have failed
            $errors[$fieldName] = "The {$fieldName} is required!";
        }
    }

    // Proceed if there aren't any errors
    if (empty($errors)) {
        // add fields as needed
        $name = htmlspecialchars(trim($_POST['name']), ENT_QUOTES, 'UTF-8' );
        $email = htmlspecialchars(trim($_POST['email']), ENT_QUOTES, 'UTF-8' );

        // Email receivers
        $to_emails = "anonymous1@example.com, anonymous2@example.com";

        $subject = 'Contact form sent from ' . $name;
        $message = "From: {$name}";
        $message .= "Email: {$email}";

        $headers = "From: {$name}\r\n";
        $headers .= "Reply-To: {$email}\r\n";
        $headers .= 'X-Mailer: PHP/' . phpversion();

        if (mail($to_emails, $subject, $message, $headers)) {
            echo $success_message;
        } else {
            echo $sendmail_error_message;
        }
    } else {

        foreach($errors as $invalid_field_msg) {
            echo "<p>{$invalid_field_msg}</p>";
        }
    }
} 
```

# git - 无法推送 git commit，“未检测到更改”

> ID：14668185
> 
> 赞同：4
> 
> 时间：2013-02-03T00:32:21.980
> 
> 标签：git, phpstorm

当我尝试在 PHPStorm 的 Git 插件中提交我的项目时，它会如下所示提交。但是当我在这个屏幕上点击推送时，它会说“未检测到更改”而不是推送。我错过了一步吗？

![在此处输入图像描述](../Images/666ea6a9142961be9ee465a6ce5bcafe.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T01:03:44.573

在 bash 中使用 git 时，当我们想在第一次提交后推送到远程时，我们应该使用：

```
git push -u origin master 
```

使用此命令，为本地分支设置一个新的上游分支，然后推送。

所以我想，虽然我以前没有使用过这个gui工具，但它需要遵循这个规则。

`Push current branch to alternative branch`似乎正是这样做的。另外我认为这可以在将来改变本地分支的上游分支。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T00:36:04.970

您必须先将其添加到版本控制中。如果您已经这样做了，请尝试刷新文件夹 - 有时文件的状态不会改变，看起来好像没有提交更改，而实际上是。

# ruby-on-rails - Rails：具有继承模型结构的 Rabl 模板

> ID：14668186
> 
> 赞同：0
> 
> 时间：2013-02-03T00:32:30.143
> 
> 标签：ruby-on-rails, json, inheritance, rabl, inherited-resources

我正在开发一个使用某种继承结构的项目......基类是..

```
# /app/models/shape.rb
class Shape < ActiveRecord::Base
  acts_as_superclass # https://github.com/mhuggins/multiple_table_inheritance
end 
```

一个子类是...

```
# /app/models/circle.rb
class Circle < ActiveRecord::Base
  inherits_from :shape
end 
```

这是一个显示继承结构的图形。

![类模型](../Images/9b336556dbf7777df5265c13cdecdc1d.png)

对于这些模型，我正在尝试使用[RABL gem](https://github.com/nesquena/rabl)创建一个 API 。这是相关的控制器...

```
# /app/controllers/api/v1/base_controller.rb
class Api::V1::BaseController < InheritedResources::Base
  load_and_authorize_resource
  respond_to :json, except: [:new, :edit]
end 
```

...

```
# /app/controllers/api/v1/shapes_controller.rb
class Api::V1::ShapesController < Api::V1::BaseController
  actions :index
  end
end 
```

...

```
# /app/controllers/api/v1/circles_controller.rb
class Api::V1::CirclesController < Api::V1::BaseController
  def index
    @circles = Circle.all
  end
  def show
    @circle = Circle.find(params[:id])
  end
end 
```

我按照[Ryan Bates 的 Railscast #322 中的](http://railscasts.com/episodes/322-rabl)`show`建议创建了一个模板。看起来像这样...

```
# /app/views/circles/show.json.rabl
object @circle
attributes :id 
```

`http://localhost:3000/api/v1/circles/1.json`当我通过以下错误消息请求圈子时...

> 模板丢失
> 
> 缺少模板 api/v1/circles/show、api/v1/base/show、inherited_resources/base/show、application/show with {:locale=>[:en], :formats=>[:html], :handlers= >[:erb, :builder, :arb, :haml, :rabl]}。

我需要如何设置模板才能使用继承的资源？

* * *

# 部分成功

我提出以下观点。我还设法实现模型的继承结构以保持代码 DRY。

```
# views/api/v1/shapes/index.json.rabl
collection @shapes
extends "api/v1/shapes/show" 
```

...

```
# views/api/v1/shapes/show.json.rabl
object @place
attributes :id, :area, :circumference 
```

...

```
# views/api/v1/circles/index.json.rabl
collection @circles
extends "api/v1/circles/show" 
```

...

```
# views/api/v1/circles/show.json.rabl
object @circle
extends "api/v1/shapes/show"
attributes :radius
if action_name == "show"
  attributes :shapes
end 
```

这将为圆圈输出所需的 JSON（`index`操作）：

```
# http://localhost:3000/api/v1/cirles.json
[
 {
   "id" : 1,
   "area" : 20,
   "circumference" : 13,
   "radius" : 6
 },
 {
   "id" : 2,
   "area" : 10,
   "circumference" : 4,
   "radius: 3
 }
] 
```

但由于某种原因，它**不会**输出与所有属性相关联的信息…… 注意：模型上有一个我之前没有提到的关联。`shapes`
`Shape`

```
# http://localhost:3000/api/v1/cirles/1.json
{
  "id" : 1,
  "area" : 20,
  "circumference" : 13,
  "radius" : 6,
  "shapes" : [
    {
      "id" : 2,
      "created_at" : "2013-02-09T12:50:33Z",
      "updated_at" : "2013-02-09T12:50:33Z"
    }
  ]
}, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T00:45:43.103

根据您提供的数据，您将模板放入`/app/views/circles`. 这个错误告诉你你需要把它们放进去，`/app/views/api/v1/circles`我相信。

对于第二个问题，听起来您是在说每个圆圈都有很多相关的形状。在这种情况下，我相信以下内容应该可以满足您的需求`views/api/v1/circles/show.json.rabl`：

```
# views/api/v1/circles/show.json.rabl
object @circle
extends 'api/v1/shapes/show'
attributes :radius
child(:shapes) do
  extends 'api/v1/shapes/show'
end 
```

# c - Lex：查找输入的第一个排列

> ID：14668189
> 
> 赞同：1
> 
> 时间：2013-02-03T00:32:47.520
> 
> 标签：c, regex, lex, flex-lexer

我正在尝试编写将接受输入的 lex 代码，然后查找并打印它在大型字典文本文件中找到的该输入的第一个排列。这是我到目前为止所拥有的：

```
%{
#include <stdio.h>
%}
%option noyywrap
%% 
INPUT GOES HERE { //Not sure what expression to put here 
    printf("Longest is: %s", yytext);
    return;
}

.|\n    {      }

%%

int main(void)
{
        yylex();
        return 0;
} 
```

我有一种感觉，我必须使用状态，但我不太熟悉这些状态是如何工作的。有人可以指出我正确的方向吗？

编辑：这是接受答案的代码，以防有人想要它：

```
%{
#include <stdio.h>
#include <string.h>
%}
%option noyywrap
%% 
^[ablm]{4}$ { 
    char originalWord [5];
    strcpy(originalWord, yytext);
    char input[5] = {"ablm"};
    char tmp;
    int i, j;
    for(i=0; i<4; i++)
    {
        for (j=i+1; j<4; j++)
        {
            if (yytext[i] > yytext[j])
            {
                tmp=yytext[i];
                yytext[i]=yytext[j];    
                yytext[j]=tmp;
            }
        }
    }
    if(strcmp(input,yytext)==0){
        printf("First permutation is: %s", originalWord);
        return;     
    }
    else
        ;

}

.|\n    {      }

%%

int main(void)
{
        yylex();
        return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T01:04:38.550

正则表达式本身并不倾向于支持“以下符号的某些排列”形式的字符串的字符串匹配。您可以编写匹配某些字符串排列的正则表达式，但要这样做，您（或多或少）必须写出这些字符的所有排列，然后将它们全部组合在一起。

一个更简单的方法是使用一个正则表达式来匹配所有具有适当长度的字符串，并且这些字符串由从相关字符串中提取的符号组成。然后，您可以将一个动作与该正则表达式相关联，该正则表达式将接收候选字符串，然后使用普通 C 代码来确定该字符串是否是原始字符集的排列。这应该非常快，因为在真实字典中误报的数量可能非常低，而且处理候选匹配所花费的时间也不是很多。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T01:25:35.883

我不太确定你为什么要使用 lex 来做这样的事情。一种简单有效的测试方法就是对字典中单词的字母和输入进行排序（任何排序方式都可以，但计数排序会很好）。任何排列都必须具有相同的字母和这些字母的数量。如果您不想将原始字符串计为排列，只需测试并确保它不是原始字符串。对于大型字典，您可能需要使用某种排序的数据结构。

总是可以（理论上）构建状态机来验证排列，但它的大小将组合增长。一个正则表达式只是用来处理“他们”的所有排列就像

```
meth|meht|mteh|mhet|mthe|mhte|emth|emht|tmeh|hmet|tmhe|hmte|etmh|ehmt|temh|hemt|thme|htme|ethm|ehtm|tehm|hetm|them|htem 
```

或混杂

```
m(e(th|ht)|t(he|eh)|h(te|et))|
e(m(th|ht)|t(hm|mh)|h(tm|mt))|
t(e(mh|hm)|m(he|eh)|h(me|em))|
h(e(tm|mt)|t(me|em)|m(te|et)) 
```

# javascript - knockout.js 计算函数来创建两个数组？

> ID：14668190
> 
> 赞同：0
> 
> 时间：2013-02-03T00:32:47.543
> 
> 标签：javascript, knockout.js, computed-observable

我有一个用户可以执行搜索的对象数组。我正在使用基于搜索的 ko.computed 函数来创建另一个匹配项数组以进行显示。

```
self.matchedRecords = ko.computed(function() {
  return ko.utils.arrayFilter(self.transponders(), function(r) {
    return r.title.toLowerCase().indexOf($('.search-input').val().toLowerCase()) > -1
  }
}; 
```

这很好用，到目前为止的表现给我留下了深刻的印象。

这个问题是我还需要“不匹配”的记录，因为在某些情况下（60% 的时间）我必须对它们执行加法操作。我真的不想创建第二个 ko.computed 函数，因为每次执行搜索时我都必须第二次遍历这个数组。

所以，我的问题是：有没有办法可以使用相同的 ko.computed 来创建第二个不匹配项的数组？基本上遍历数组并将每个项目放入匹配或不匹配的数组中......

如果没有，是否更快：1）创建第二个 ko.computed 以在用户搜索时从我的数组中获取不匹配的项目；或 2) 编写一个 arrayDiff 函数并根据需要确定不匹配的项目。

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T00:43:59.253

如果您担心性能，您可以在计算中迭代搜索结果时填充一个不可观察的数组。另请注意，您在循环中反复选择使用 jQuery，我认为这可以消除任何 KO 导致的减速。

```
self.missedRecords = [];

self.matchedRecords = ko.computed(function() {
    var searchQuery = $('.search-input').val().toLowerCase(),
        transponders = self.transponders(),
        matched = [];

    // Clear out missed records
    self.missedRecords.length = 0;

    _.each(transponders, function(transponder) {
        if (transponder.title.toLowerCase().indexOf(searchQuery) >= 0) {
            matched.push(transponder);
        } else {
            self.missedRecords.push(transponder);
        }
    });

    return matched;
}); 
```

我使用`_.each`下划线来保持代码更短。这种方法的缺点是`missedRecords`不能（可靠地）将更改绑定到 UI（例如，如果您有`foreach`绑定）。

如果您确实需要`missedRecords`数组是可观察的，并且仍然希望保持快速（呃），您可以执行以下操作：

```
self.missedRecords = ko.observableArray([]);

self.matchedRecords = ko.computed(function() {
    var searchQuery = $('.search-input').val().toLowerCase(),
        transponders = self.transponders(),
        matched = [],
        missed = [];

    _.each(transponders, function(transponder) {
        if (transponder.title.toLowerCase().indexOf(searchQuery) >= 0) {
            matched.push(transponder);
        } else {
            missed.push(transponder);
        }
    });

    // Clear out missed records, without triggering subscriptions
    self.missedRecords().length = 0;

    // Copy the local missed array to the KO observable array
    // This will NOT trigger notifications
    ko.utils.arrayPushAll(self.missedRecords(), missed);

    // Tell KO that the observable array has mutated - this will trigger changes
    // to anything observing the missedRecords array
    self.missedRecords.valueHasMutated();

    return matched;
}); 
```

您也可以`computed`完全跳过并订阅更改以更改数组的状态。例如：

```
self.missedRecords = ko.observableArray([]);
self.matchedRecords = ko.observableArray([]);

self.transponders.subscribe(function(newTransponders) {
    var matched = [],
        missed = [];

    _.each(newTransponders, function(transponder) {
        // Populate matched/missed local arrays
    });

    // Copy the arrays to the observableArray instances using the technique above
}); 
```

# php - 如何从 MYSQL 数据库中的最后 10 条记录中获取最低 ID？

> ID：14668192
> 
> 赞同：1
> 
> 时间：2013-02-03T00:33:04.117
> 
> 标签：php, mysql, sql, database, pdo

我有一个简单的文章表，想从最后 10 条记录中选择最低的 ID。例如，如果有`11`id，结果 id 应该是`2`，如果有`10`id，结果 id 应该是`1`等等。

我在带有`11`ids 的表上尝试了以下查询，它正在输出`1`，而它应该输出`2`

```
SELECT MIN(id) FROM kisses ORDER BY id DESC LIMIT 10 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T00:35:11.963

您可以使用子查询，然后使用 MIN：

```
SELECT MIN(ID) 
FROM (SELECT ID
   FROM Articles
   ORDER BY ID DESC
   LIMIT 10
) t 
```

这是[SQL 小提琴](http://sqlfiddle.com/#!2/4d835/1)。

这个怎么样，更容易：

```
SELECT ID
   FROM Articles
   ORDER BY ID DESC
   LIMIT 9,1 
```

更多小提琴：[http ://sqlfiddle.com/#!2/4d835/8](http://sqlfiddle.com/#!2/4d835/8)

祝你好运。

# java - java中的简单加密

> ID：14668195
> 
> 赞同：1
> 
> 时间：2013-02-03T00:33:11.930
> 
> 标签：java, encryption

我对 java 和一般编程很陌生，我正在尝试弄清楚如何让这段代码工作。

我需要输入一个字符串，然后将其转换为 ascii，并使每个字符的 ascii 值按输入的值移动，然后将其转换回字符并打印出编码消息。最后一部分是我遇到的麻烦，我不知道如何将其恢复为角色。

PS这是我的第一篇文章，所以如果我把我的代码放错了，请告诉我。

```
import java.util.Scanner;

public class 
    public static void main(String[] args)
    {    
        Scanner stdIn = new Scanner(System.in);

    System.out.println("Please enter text to encrypt");
    String orignalText = stdIn.nextLine();
    System.out.println("Please enter shift value");
    int shiftValue = stdIn.nextInt();

    for (int i=0; i<orignalText.length(); i++)
    {
            char c = orignalText.charAt(i);
            char cUpper = Character.toUpperCase(c);
        System.out.print((cUpper) + shiftValue);

    }

}//end main 
}//end class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T00:36:58.900

```
System.out.println((char)((int)cUpper + shiftValue)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T00:36:28.543

你必须把它扔回去`char`

代替

```
 System.out.print((cUpper) + shiftValue); 
```

经过

```
 System.out.print((char)(cUpper + shiftValue)); 
```

# ios6 - 为 UICollectionView 布局散列一个非常大的数据集的最快方法是什么... NSIndexPath 太慢了

> ID：14668198
> 
> 赞同：1
> 
> 时间：2013-02-03T00:33:38.667
> 
> 标签：ios6, nsdictionary, uicollectionview, fast-enumeration, uicollectionviewlayout

我有一个带有自定义布局的大型数据集（> 2000 个项目）的 UICollectionViewController。使用部分，滚动性能变得非常不稳定。使用 Instruments 和一些测试，我确定这是由于在布局中查找 ( `layoutAttributesForElementsInRect:`)。我在 中缓存布局属性`prepareLayout`，并以我所知道的最快方式在这里查找它们：

```
[elementsInfo enumerateKeysAndObjectsUsingBlock:^(NSIndexPath *indexPath, UICollectionViewLayoutAttributes *attributes, BOOL *innerStop) {

   if (CGRectIntersectsRect(rect, attributes.frame)) [allAttributes addObject:attributes];

}]; 
```

我发现大约 25% 的 cpu 时间都花在了枚举上，主要是在`[NSIndexPath isEqual:]`. 所以，我需要一种更快的方法来散列这些值。

这一定是可能的，因为我使用相同的数据和分段的 UICollectionViewFlowLayout 进行了交叉测试，并且很顺利。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T16:56:57.847

好吧，事实证明使用数组而不是字典，并且通过 NSPredicate 进行过滤要快得多，因为在这种情况下，索引是已知的。

# ios - 在越狱的 iDevice 上以编程方式卸载应用程序

> ID：14668201
> 
> 赞同：0
> 
> 时间：2013-02-03T00:33:57.877
> 
> 标签：ios, installation, uninstallation, ipa

我想知道是否可以通过命令行（最好通过 bundlename）卸载越狱的 iPhone/iPad 上的应用程序。ideviceinstaller 可以这样做（即使在未越狱的设备上），但是由于我需要的解决方案必须在所有常见的操作系统上工作，并且 ideviceinstaller 在 Windows 上不能可靠/正确地工作，我想：为什么不把这个任务放在移动设备本身上。

手动卸载它不是一种选择，因为此工具每天将处理安装和卸载超过 500 个应用程序，如果手动完成，则需要数小时。

此外，应用程序必须正确安装，因此将 *.app 目录复制到 /var/stash/Applications 并重新启动也不是我想要的。它们必须通过 Apple 自己的 MobileInstallation 服务进行安装和卸载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T00:37:11.080

如果您想删除从 App Store 下载的应用程序，您可以在从 App Store 安装或同步应用程序的文件夹 (/private)/var/mobile/Applications/ 中删除它。（在 /Applications/ 你会找到相机、Safari 等...）

为此，您首先必须在该文件夹中找到应用程序的“散列”名称。

# google-maps - 使用 google maps api 将 google chart 添加到 infowindow

> ID：14668202
> 
> 赞同：11
> 
> 时间：2013-02-03T00:33:57.473
> 
> 标签：google-maps, google-maps-api-3, popup, google-visualization, infowindow

我见过很多其他人有同样的问题，但找不到答案。我有一个使用 Google Maps Javascript api v3 构建的简单地图。该地图有几个标记，它们链接到信息窗口以显示每个标记的特定信息。我想在信息窗口中添加一个谷歌图表，但不知道该怎么做。我浏览了我能找到的每一个帖子（在这里和其他论坛），我注意到其他人试图做类似的事情，但似乎没有具体的答案。我注意到人们使用融合表成功地做这样的事情，但这不是我的情况，因为我从 MySQL 表中加载数据。现在我有一个简单的地图，代码如下所示：

```
 function initialize() {

    var mapOptions = {
      center: new google.maps.LatLng(-33.837342,151.208954),
      zoom: 10,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById("map_canvas"),
        mapOptions);

    var data = [
      ['Bondi Beach', -33.891044,151.275537],
      ['Cronulla Beach', -34.046544,151.159601],
    ];

    var myLatLng1 = new google.maps.LatLng(-33.891044,151.275537);
    var myLatLng2 = new google.maps.LatLng(-34.046544,151.159601);

    var marker1 = new google.maps.Marker({
        position: myLatLng1,
        map: map
    });

    var marker2 = new google.maps.Marker({
        position: myLatLng2,
        map: map
    });

    google.maps.event.addListener(marker1, 'click', function() {
      var infowindow1 = new google.maps.InfoWindow();
      infowindow1.setContent('Display the chart here');
      infowindow1.open(map, marker1);
    });

    google.maps.event.addListener(marker2, 'click', function() {
      var infowindow2 = new google.maps.InfoWindow();
      infowindow2.setContent('Display the chart here');
      infowindow2.open(map, marker1);
      infowindow2.setContent('Display the chart here');
      infowindow2.open(map, marker2);
    });          
  } 
```

这是一个简单图表的代码，例如：

[https://google-developers.appspot.com/chart/interactive/docs/quick_start](https://google-developers.appspot.com/chart/interactive/docs/quick_start)

我尝试了许多不同的方法，对我来说似乎更明显的一种方法是在 InfoWindow 的 setContent 属性中添加一个容器 ()，然后调用一个创建图表的外部函数。这似乎不起作用，因为该功能看不到容器。我还尝试按照本文的建议将图表的整个代码嵌入到 setContent 属性中：

[在谷歌地图 api 信息窗口内容字符串中使用谷歌图表工具](https://stackoverflow.com/questions/9523465/using-google-chart-tools-in-a-google-maps-api-infowindow-content-string)

我已经成功地执行了没有错误的代码，但是没有显示任何内容。另一种方法是在另一个 html 页面中创建图表，并以某种方式将此页面设置为 setContent 属性，但也没有成功。

我即将放弃，因为我看不到这样做的方法。

我会很感激任何帮助。

谢谢

何塞

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-03T13:15:30.327

*这似乎不起作用，因为该功能看不到容器。*

您可以将容器作为参数传递给`drawChart()`

但我猜你喜欢绘制填充了与标记相关的数据的图表，所以我建议将标记作为参数传递给 drawChart() 并在那里创建 infoWindow。

示例代码（没有实现标记相关数据，因为不清楚你喜欢绘制什么样的数据）

```
 function drawChart(marker) {

    // Create the data table.
    var data = new google.visualization.DataTable();
    data.addColumn('string', 'Topping');
    data.addColumn('number', 'Slices');
    data.addRows([
      ['Mushrooms', 3],
      ['Onions', 1],
      ['Olives', 1],
      ['Zucchini', 1],
      ['Pepperoni', 2]
    ]);

    // Set chart options
    var options = {'title':'Pizza sold @ '+
                           marker.getPosition().toString(),
                   'width':300,
                   'height':200};

    var node        = document.createElement('div'),
        infoWindow  = new google.maps.InfoWindow(),
        chart       = new google.visualization.PieChart(node);

        chart.draw(data, options);
        infoWindow.setContent(node);
        infoWindow.open(marker.getMap(),marker);
  } 
```

用法：

```
google.maps.event.addListener(marker1, 'click', function() {
  drawChart(this);
}); 
```

演示：http: [**//jsfiddle.net/doktormolle/S6vBK/**](http://jsfiddle.net/doktormolle/S6vBK/)

# python - 使用特殊情况处理在 Python 中实现递归副本

> ID：14668206
> 
> 赞同：2
> 
> 时间：2013-02-03T00:35:05.950
> 
> 标签：python, unix, filesystems, shutil

我想`cp -r`在 Python 中实现一个以特殊方式处理某些目录的版本。如果您这样做`mycp.py -r indir outdir`，我希望`indir`将其所有文件/子目录完全复制到`outdir`中，但某些文件名除外。在 Python 中最便携的方法是什么？

示例：我有这个目录结构：

```
dir1/
  file1
  dir2/
    dir3/
  specialdir/
    myfile.bar 
```

`file1`是一个文件，`specialdir`是一个包含文件的目录`myfile.bar`。我想复制`dir1`它的所有内容，但要专门处理其中包含`*.bar`文件的目录。在这种情况下，仅`specialdir`符合标准。我想`mycopy`复制所有目录，`dir1`但用它们自己的压缩版本替换任何特殊目录。在上面的示例中，这意味着`dir1`按原样复制，但替换`specialdir`为`specialdir.zip`可能包含`myfile.bar`.

我尝试遵循以下建议，但不确定如何处理复制：

```
import os
import shutil

SPECIAL_DIRS = []

def is_special_dir(path, dirnames):
    """directories are special if they have .bar files"""
    special_dirs = []
    for d in dirnames:
        d = os.path.join(path, d)
        if os.path.isdir(d):
            files_in_d = os.listdir(d)
            for f in files_in_d:
                if f.endswith(".bar"):
                    # directory is special if it contains
                    # .bar files
                    special_dirs.append(d)
    SPECIAL_DIRS.extend(special_dirs)
    return special_dirs

def my_copy(indir, outdir):
    shutil.copytree(indir, outdir, ignore=is_special_dir)
    print "Found special dirs: ", SPECIAL_DIRS

# make a copy of dir1 but handle special directories
# differently
my_copy("dir1", "copy_dir1") 
```

如果我尝试它，它会正确检测到特殊目录：

```
$ copy_test.py
Found special dirs:  ['dir1/dir2/specialdir'] 
```

我怎样才能让它插入`specialdir`到正确的相应位置`copy_dir1`？我希望`copy_dir1`（目标目录）具有与（源目录）完全相同的结构，`dir1`除了对包含`.bar`文件的目录进行特殊处理。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T03:10:21.793

听起来您希望[shutil.copytree](http://docs.python.org/3/library/shutil.html?highlight=shutil#shutil.copytree)使用*忽略*参数：

> 如果给出了*ignore*，它必须是一个可调用的，它将接收被访问的目录作为它的参数`copytree()`，以及它的内容列表，由返回`os.listdir()`。由于`copytree()`是递归调用的，因此对于复制的每个目录都会调用一次*忽略可调用对象。*可调用对象必须返回相对于当前目录的目录和文件名序列（即第二个参数中项目的子集）；这些名称将在复制过程中被忽略。'ignore_patterns()' 可用于创建这样的可调用对象，它忽略基于 glob 样式模式的名称。

所以这样的事情应该有效：

```
def what_to_ignore(path,names):
    if is_special(path):
        # process names here returning any or all to ignore

shutil.copytree(indir,outdir,ignore=what_to_ignore) 
```

### 编辑扩展问题和示例

这是一个例子。简化的忽略功能仍然会创建一个空的特殊目录，但在进行特殊 zip 复制之前很容易删除。我还嵌套了特殊函数，因此`my_copy`可以多次使用而不依赖于使用全局变量。执行 zip 对用户来说是一项练习：

```
import fnmatch
import shutil
import os

def my_copy(indir, outdir):

    special = []

    def is_special_dir(path, names):
        """directories are special if they have .bar files"""
        if fnmatch.filter(names,'*.bar'):
            special.append(path)
            return names
        return []    

    shutil.copytree(indir, outdir, ignore=is_special_dir)
    print('Found special dirs:',special)

    for src in special:
        rel = os.path.relpath(src,indir)
        dst = os.path.join(outdir,rel)
        os.rmdir(dst)
        print('Zip "{}" to "{}.zip"'.format(src,dst))

my_copy('dir1','dira')
my_copy('dir1','dirb') 
```

**输出**

```
Found special dirs: ['dir1\\specialdir']
Zip "dir1\specialdir" to "dira\specialdir.zip"
Found special dirs: ['dir1\\specialdir']
Zip "dir1\specialdir" to "dirb\specialdir.zip" 
```

# java - 横幅广告崩溃 android ap

> ID：14668209
> 
> 赞同：0
> 
> 时间：2013-02-03T00:35:21.730
> 
> 标签：java, android, admob, ads

出于某种原因，这条线

```
adView = new AdView(this, AdSize.BANNER, "xxxxxx");//adUnitId is actually there 
```

每次我尝试运行它时都会使我的 android 应用程序崩溃。

我放入了 GoogleAdMod jar 文件，但没有任何结果

项目属性

```
target=android-16 
```

AndroidManifest

```
<uses-sdk android:minSdkVersion="8" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

我一直在这家，并尝试过通过xml和类的方法，但我很难过。

提前致谢

-本

编辑：日志

```
02-02 18:51:14.028: W/IInputConnectionWrapper(11019): getSelectedText on inactive InputConnection
02-02 18:51:14.028: W/IInputConnectionWrapper(11019): setComposingText on inactive InputConnection
02-02 18:51:18.693: I/Choreographer(11019): Skipped 32 frames!  The application may be doing too much work on its main thread.
02-02 18:51:18.763: E/dalvikvm(11019): Could not find class 'com.google.ads.AdView', referenced from method com.ben.fishbein.tictacception.free.Online_home_free.onCreate
02-02 18:51:18.763: W/dalvikvm(11019): VFY: unable to resolve new-instance 457 (Lcom/google/ads/AdView;) in Lcom/ben/fishbein/tictacception/free/Online_home_free;
02-02 18:51:18.763: D/dalvikvm(11019): VFY: replacing opcode 0x22 at 0x0017
02-02 18:51:18.763: I/dalvikvm(11019): DexOpt: unable to optimize static field ref 0x0810 at 0x19 in Lcom/ben/fishbein/tictacception/free/Online_home_free;.onCreate
02-02 18:51:18.773: D/dalvikvm(11019): DexOpt: unable to opt direct call 0x0d0f at 0x1d in Lcom/ben/fishbein/tictacception/free/Online_home_free;.onCreate
02-02 18:51:18.773: D/AndroidRuntime(11019): Shutting down VM
02-02 18:51:18.773: W/dalvikvm(11019): threadid=1: thread exiting with uncaught exception (group=0x411ae438)
02-02 18:51:18.783: E/AndroidRuntime(11019): FATAL EXCEPTION: main
02-02 18:51:18.783: E/AndroidRuntime(11019): java.lang.NoClassDefFoundError: com.google.ads.AdView
02-02 18:51:18.783: E/AndroidRuntime(11019):    at com.ben.fishbein.tictacception.free.Online_home_free.onCreate(Online_home_free.java:82)
02-02 18:51:18.783: E/AndroidRuntime(11019):    at android.app.Activity.performCreate(Activity.java:5048)
02-02 18:51:18.783: E/AndroidRuntime(11019):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1094)
02-02 18:51:18.783: E/AndroidRuntime(11019):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2052)
02-02 18:51:18.783: E/AndroidRuntime(11019):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2113)
02-02 18:51:18.783: E/AndroidRuntime(11019):    at android.app.ActivityThread.access$700(ActivityThread.java:139)
02-02 18:51:18.783: E/AndroidRuntime(11019):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1224)
02-02 18:51:18.783: E/AndroidRuntime(11019):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-02 18:51:18.783: E/AndroidRuntime(11019):    at android.os.Looper.loop(Looper.java:137)
02-02 18:51:18.783: E/AndroidRuntime(11019):    at android.app.ActivityThread.main(ActivityThread.java:4918)
02-02 18:51:18.783: E/AndroidRuntime(11019):    at java.lang.reflect.Method.invokeNative(Native Method)
02-02 18:51:18.783: E/AndroidRuntime(11019):    at java.lang.reflect.Method.invoke(Method.java:511)
02-02 18:51:18.783: E/AndroidRuntime(11019):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1004)
02-02 18:51:18.783: E/AndroidRuntime(11019):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:771)
02-02 18:51:18.783: E/AndroidRuntime(11019):    at dalvik.system.NativeStart.main(Native Method)

public void onCreate(Bundle savedInstanceState) {
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    super.onCreate(savedInstanceState);
    setContentView(R.layout.free_online_home);
    bigBoard = (RelativeLayout) findViewById(R.id.rlBigBoard);

    adView = new AdView(this,  AdSize.BANNER, "aasd0");
            //new AdView(this, AdSize.BANNER, "asdsd");
//  bigBoard.addView(adView);
    //adView.loadAd(new AdRequest());

    // AdView ad = (AdView) findViewById(R.id.adView);
    //ad.loadAd(new AdRequest());
    //initialize();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T02:09:58.603

如果 GoogleAdMobAdsSdk 在您的引用库中，我的文件顺序错误 请确保它位于您的 src 或 res 文件夹之前的顶部。

# asp.net - 将数据发布到php注册网页

> ID：14668211
> 
> 赞同：0
> 
> 时间：2013-02-03T00:35:27.987
> 
> 标签：asp.net

我有一个用 php 编写的注册页面。

我想在 asp.net 中制作一个网页，其中包含必须发送到 php 网页的所需信息，以便使用从 asp.net 网页帖子中收到的信息自动创建帐户。

所以我想将新信息从asp.net网页发布到php页面。

php 注册页面如下所示：

```
<form action="" type=post>
      <label for="name"><div><br>Account</br></div></label> <input type=text id="name" name="account" size=20 maxlength=32 /><br>
       <label for="name"><div><br>Password</br></div></label> <input type=password id="name" name="password" size=20 maxlength=14 /><br> 
      <button type=submit>Okay</button>
    </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T00:43:42.203

您必须从 asp.net 页面向 PHP 页面发出请求。您可以让您的 ASP.NET 页面填写表单并转到 PHP url（如果可能的话），或者您可以让 ASP.NET 中的后端使用 HTTP 库或其他东西将表单复制到 PHP 端。

# javascript - 如何将 iframe 内容正确加载到 我有一个包含许多链接的 iframe，我正在尝试将这些链接正确复制到我的主页。我当前的代码错误地复制了链接。例如，如果 iframe 中的实际超链接是这样的： [5](./ok/doit.php) 问问题 问问题 2013-02-03T00:36:12.330 2031 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我有一个包含许多链接的 iframe，我正在尝试将这些链接正确复制到我的主页。我当前的代码错误地复制了链接。例如，如果 iframe 中的实际超链接是这样的： [5](./ok/doit.php) 将其复制到主页后，超链接变成这样： http://ok.mysite24.com/spring/./ok/doit.php 因此，从我的主页中单击这些链接后，我会转到死链接而不是实际链接。是否可以通过正确复制 iframe 内容来解决这个问题，或者我应该修改我的 iframe 内容吗？ 

[getFrameContents!](#)

接受用户输入用户输入次数的haskell方式？ 我刚刚开始学习haskell，它的思维方式与我习惯的方式（C 风格的语言）大不相同。 无论如何，对于我正在处理的一个问题，我需要接收用户输入。它将以形式出现 2 10 20 例如。格式是第一行表示后面的行数。我的第一个想法是我会阅读第一行，然后循环运行该次数。虽然这是 Haskell！据我所知，循环是不可能的。 我的下一个想法是，我将使用第一行输入来填充一个列表，其中包含后面的其他 n 个数字。我不知道我会怎么做。我在这里是因为我什至不确定我会寻找什么来解决这个问题。 提前感谢您向我展示了执行此操作的 Haskell 方法。到目前为止很难，但我听到“开明”的人的好评如潮，所以我认为自己学习语言不会有什么坏处。 这是可以运行一次的代码，但需要为第一行之后的第二行到 n 行中的每一行运行一次。 l n = (-1)^n/(2*(fromIntegral n)+1) a m = sum [l n | n <- [0..(m-1)]] main = do b <- readLn print (a b) （另外，我很想听听我是否可以对我的代码进行其他改进，但在这种特定情况下，它是为了让比赛以尽可能少的字符数解决问题。我不想得到更多特别是在其他人试图寻找相同问题的答案的情况下。） 编辑：感谢大家的回答。我最终得到了一些我想要的东西。我将代码放在下面以供后代使用。可悲的是，即使它以出色的成绩通过了测试用例，但他们测试它的实际数据却不同，他们告诉我的只是我得到了“错误的答案”。此代码“有效”，但无法为您提供正确答案。 import Control.Monad l n = (-1)^n/(2*(fromIntegral n)+1) a m = sum [l n | n <- [0..(m-1)]] main = do b <- readLn s <- replicateM b readLn mapM_ print [a c | c <- s] javascripthtmliframe 4 2 回答 2 This answer is useful 1 在检索所有链接的 innerHTML 循环并将其 DOM-href-attribute 替换为其 JS-href-property 之前。这会将 href 属性转换为绝对 URI。 //clone the body to keep the original untouched iFrameBody = iFrameBody.cloneNode(true); var links = iFrameBody.getElementsByTagName('a'); for (var i = 0; i < iFrameBody.getElementsByTagName('a').length; ++i) { if (links[i].hasAttribute('href')) { links[i].setAttribute('href', links[i].href); } } 于 2013-02-03T01:20:00.237 回答 This answer is useful -1 看起来您想将一个相对地址解析为 iframe 的源地址，这也可能是相对的。伪代码（ish）：k function resolveAddress(source, link) { if(link.indexOf("../") == 0) { index--; // go up one directory .// return resolveAddress(source.substr(0,source.lastIndexOf("/")-1), link.substr(1, link.length-1)); } else if(link.indexOf("./") == 0) { // reduce to current directory ./ return resolveAddress(source.substr(0,source.lastIndexOf("/"), link.substr(2, link.length-1)); } return source + link; } frame_src = "http://www.mysite.com/ok.php" link = "./ok/doit.php"; resolveAddress(frame_src, link); //=> "http://www.mysite.com/ok/doit.php" 于 2013-02-03T00:59:39.003 回答 Related 2 javascript - 在文本框中输入文本时显示消息 1 java - 使用 JAXB 创建具有属性和动态值的 XML 1 java - Java IO 性能 XOR 与 2 个文件 7 java - Servlet 与 REST 1 sql - 带有触发更新查询的触发器的 SQLBulk Copy 1 android - 在 Android 平板电脑上调试 Android 移动应用 1 jquery - 如何检查字符串是否为有效的 HTML 格式 1 c# - 我们如何使用 C# 中的 API 将文件上传到机架空间云容器中 2 c# - 从文本框复制后，重音字符无法正确显示 3 extjs - 在控制器 ExtJS 中定义监听器 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：14668216
> 
> 赞同：0
> 
> 时间：
> 
> 标签：javascript, html, iframe

我有一个包含许多链接的 iframe，我正在尝试将这些链接正确复制到我的主页。我当前的代码错误地复制了链接。例如，如果 iframe 中的实际超链接是这样的：

```
<a href="./ok/doit.php"> 5 </a> 
```

将其复制到主页后，超链接变成这样：

```
http://ok.mysite24.com/spring/./ok/doit.php 
```

因此，从我的主页中单击这些链接后，我会转到死链接而不是实际链接。是否可以通过正确复制 iframe 内容来解决这个问题，或者我应该修改我的 iframe 内容吗？

```
<script type='text/javascript'>
function getFrameContents(){
   var iFrame =  document.getElementById('myframe');
   var iFrameBody;
   if ( iFrame.contentDocument ) 
   { // FF
     iFrameBody = iFrame.contentDocument.getElementsByTagName('body')[0];
   }
   else if ( iFrame.contentWindow ) 
   { // IE
     iFrameBody = iFrame.contentWindow.document.getElementsByTagName('body')[0];
   }
 alert(iFrameBody.innerHTML);

document.getElementById('response').innerHTML = iFrameBody.innerHTML

 }
</script>

<iframe id ='myframe' src='http://www.mysite.com/ok.php'></iframe>

<div id="response"> 
    <p><a href="#" onMouseDown="getFrameContents()">getFrameContents! </a></p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T01:20:00.237

在检索所有链接的 innerHTML 循环并将其 DOM-href-attribute 替换为其 JS-href-property 之前。这会将 href 属性转换为绝对 URI。

```
//clone the body to keep the original untouched
iFrameBody = iFrameBody.cloneNode(true);

var links = iFrameBody.getElementsByTagName('a');
for (var i = 0; i < iFrameBody.getElementsByTagName('a').length; ++i) {
    if (links[i].hasAttribute('href')) {
        links[i].setAttribute('href', links[i].href);
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-03T00:59:39.003

看起来您想将一个相对地址解析为 iframe 的源地址，这也可能是相对的。伪代码（ish）：k

```
function resolveAddress(source, link) {
   if(link.indexOf("../") == 0) {
       index--; // go up one directory .//
       return resolveAddress(source.substr(0,source.lastIndexOf("/")-1),
                      link.substr(1, link.length-1)); 
   }
   else if(link.indexOf("./") == 0) {
       // reduce to current directory ./
       return resolveAddress(source.substr(0,source.lastIndexOf("/"),
                      link.substr(2, link.length-1));
   }
   return source + link;
}      

frame_src = "http://www.mysite.com/ok.php"
link = "./ok/doit.php";

resolveAddress(frame_src, link);
//=> "http://www.mysite.com/ok/doit.php" 
```

# haskell - 接受用户输入用户输入次数的haskell方式？

> ID：14668217
> 
> 赞同：8
> 
> 时间：2013-02-03T00:36:24.457
> 
> 标签：haskell

我刚刚开始学习haskell，它的思维方式与我习惯的方式（C 风格的语言）大不相同。

无论如何，对于我正在处理的一个问题，我需要接收用户输入。它将以形式出现

```
2
10
20 
```

例如。格式是第一行表示后面的行数。我的第一个想法是我会阅读第一行，然后循环运行该次数。虽然这是 Haskell！据我所知，循环是不可能的。

我的下一个想法是，我将使用第一行输入来填充一个列表，其中包含后面的其他 n 个数字。我不知道我会怎么做。我在这里是因为我什至不确定我会寻找什么来解决这个问题。

提前感谢您向我展示了执行此操作的 Haskell 方法。到目前为止很难，但我听到“开明”的人的好评如潮，所以我认为自己学习语言不会有什么坏处。

这是可以运行一次的代码，但需要为第一行之后的第二行到 n 行中的每一行运行一次。

```
l n = (-1)^n/(2*(fromIntegral n)+1)
a m = sum [l n | n <- [0..(m-1)]]
main =
    do  b <- readLn
        print (a b) 
```

（另外，我很想听听我是否可以对我的代码进行其他改进，但在这种特定情况下，它是为了让比赛以尽可能少的字符数解决问题。我不想得到更多特别是在其他人试图寻找相同问题的答案的情况下。）

编辑：感谢大家的回答。我最终得到了一些我想要的东西。我将代码放在下面以供后代使用。可悲的是，即使它以出色的成绩通过了测试用例，但他们测试它的实际数据却不同，他们告诉我的只是我得到了“错误的答案”。此代码“有效”，但无法为您提供正确答案。

```
import Control.Monad
l n = (-1)^n/(2*(fromIntegral n)+1)
a m = sum [l n | n <- [0..(m-1)]]
main =
    do  b <- readLn
        s <- replicateM b readLn
        mapM_ print [a c | c <- s] 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-03T00:41:27.563

首先，您可以在 haskell 中很好地循环。它一直在发生。您只是没有语法结构，因为不需要它们。

大多数时候，常见的通用循环被放入库中。在这种情况下，您需要的循环位于标准库的模块中`Control.Monad`。它被称为`replicateM`。它具有类型签名`Monad m => Int -> m a -> m [a]`。要针对您的案例专门使用此签名，它的类型应为`Int -> IO Int -> IO [Int]`. 第一个参数是循环的次数。第二个是在每个循环上运行的 IO 操作。该函数的结果是一个生成输入列表的 IO 操作。

因此，如果您添加`inputs <- replicateM b readLn`到 do 块，它会将一个名为的列表`inputs`放入范围，其中包含来自`b`第一个输入行之后的值。然后，您可以将您的解决方案功能映射到这些线上。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-03T00:52:58.683

卡尔的解决方案会奏效，但它有点不透明。如果你想把它写出来，你可以这样做：

```
readLines :: Int -> IO [Int]
readLines 0 = return []
readLines n = do
   x <- fmap read getLine
   rest <- readLines (n-1)
   return $ x : rest

readSomeNumberOfLines :: IO [Int]
readSomeNumberOfLines = do
   n <- fmap read getLine
   readLines n 
```

你在这里所做的`readLines`是你基本上定义了明显的基本情况（读取 0 个东西，只需给出一个空列表）和递归情况（读取 n 个东西，读取一个东西，然后读取另一个 n-1东西，然后将它们组合在一起）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-03T01:00:57.773

我不确定您*到底*想做什么，但是要读取一个整数 n 然后接下来的 n 行作为整数，您可以执行以下操作：

```
import Control.Monad

-- read n, then sum integers read from the next n lines
test = do n <- readLn
          xs <- replicateM n readLn
          return $ sum xs 
```

当然最后的`return $ sum xs`不是实质性的 - 如果它不在那里，你需要一个明确的类型签名`test`。

如果您不了解这些功能中的任何一个，[那就胡说八道](http://www.haskell.org/hoogle/)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-03T00:46:09.593

您可以创建一个`readInput n`where`n`是要读取的行数。`n`调用 this 递归地从每次减去 1 。我也是 Haskell 菜鸟，所以这可能不是最好的方法。不过，它应该仍然有效。

# android - 将 drawableLeft 与按钮的文本对齐

> ID：14668219
> 
> 赞同：56
> 
> 时间：2013-02-03T00:36:27.850
> 
> 标签：android, android-layout

这是我的布局：

![在此处输入图像描述](../Images/f7b7d121f48a23b9682e7b4ff1c84cf4.png)

我面临的问题是可绘制的复选标记。我将如何将它与文本对齐，它们都在按钮内居中？这是 XML：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".PostAssignmentActivity" >

    <LinearLayout
        style="?android:attr/buttonBarStyle"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:orientation="horizontal" >

        <Button
            style="?android:attr/buttonBarButtonStyle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:drawableLeft="@drawable/ic_checkmark_holo_light"
            android:text="Post" />

        <Button
            style="?android:attr/buttonBarButtonStyle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Cancel" />
    </LinearLayout>

</RelativeLayout> 
```

应用 android:gravity="center_vertical" 将文本和 drawable 拉到一起，但是文本不再居中对齐。

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-02-03T01:15:41.513

## 解决方案 1

设置`android:paddingLeft`在您的第一个按钮内。这将迫使`drawableLeft`按`paddingLeft`数量向右。这是快速/hacky 的解决方案。

## 解决方案 2

不要使用 ButtonView，而是使用包含 textview 和 imageview 的 LinearLayout。这是一个**更好的解决方案**。它使您可以更灵活地定位复选标记。

将您的 ButtonView 替换为以下代码。您需要使用and`LinearLayout`以便选择时背景颜色正确且文本大小正确。您需要为孩子设置，以便只有 LinearLayout 处理背景颜色。`TextView``buttonBarButtonStyle``android:background="#0000"`

```
<LinearLayout
    style="?android:attr/buttonBarButtonStyle"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:orientation="horizontal" >
    <ImageView 
        style="?android:attr/buttonBarButtonStyle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:clickable="false"
        android:background="#0000"
        android:src="@drawable/ic_checkmark_holo_light"/>
    <TextView
        style="?android:attr/buttonBarButtonStyle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:clickable="false"
        android:background="#0000"
        android:text="Done" />
</LinearLayout> 
```

这是我在尝试时截取的一些屏幕截图。

![在此处输入图像描述](../Images/f6051b6f7360a3839437f58fab81bc6f.png) ![在此处输入图像描述](../Images/3d620995b2a345ac794e9762eb76b0e4.png) ![在此处输入图像描述](../Images/bc8c294c183776856cef22d64a6b56ef.png)

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2015-03-23T22:01:57.073

如果不进行不可接受的权衡（创建包含视图的布局？不是一个好主意），这些解决方案都不能正常工作。那么为什么不自己动手呢？这就是我得到的：

![在此处输入图像描述](../Images/8ea1e6658c5c526ad3e12c95bb3a462d.png)

首先用这个创建一个`attrs.xml`：

```
<resources>
    <declare-styleable name="IconButton">
        <attr name="iconSrc" format="reference" />
        <attr name="iconSize" format="dimension" />
        <attr name="iconPadding" format="dimension" />
    </declare-styleable>
</resources> 
```

这允许在我们的新视图中创建具有特定大小、文本填充和图像的图标。视图代码如下所示：

```
public class IconButton extends Button {
    private Bitmap mIcon;
    private Paint mPaint;
    private Rect mSrcRect;
    private int mIconPadding;
    private int mIconSize;

    public IconButton(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        init(context, attrs);
    }

    public IconButton(Context context, AttributeSet attrs) {
        super(context, attrs);
        init(context, attrs);
    }

    public IconButton(Context context) {
        super(context);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        int shift = (mIconSize + mIconPadding) / 2;

        canvas.save();
        canvas.translate(shift, 0);

        super.onDraw(canvas);

        if (mIcon != null) {
            float textWidth = getPaint().measureText((String)getText());
            int left = (int)((getWidth() / 2f) - (textWidth / 2f) - mIconSize - mIconPadding);
            int top = getHeight()/2 - mIconSize/2;

            Rect destRect = new Rect(left, top, left + mIconSize, top + mIconSize);
            canvas.drawBitmap(mIcon, mSrcRect, destRect, mPaint);
        }

        canvas.restore();
    }

    private void init(Context context, AttributeSet attrs) {
        TypedArray array = context.obtainStyledAttributes(attrs, R.styleable.IconButton);

        for (int i = 0; i < array.getIndexCount(); ++i) {
            int attr = array.getIndex(i);
            switch (attr) {
                case R.styleable.IconButton_iconSrc:
                    mIcon = drawableToBitmap(array.getDrawable(attr));
                    break;
                case R.styleable.IconButton_iconPadding:
                    mIconPadding = array.getDimensionPixelSize(attr, 0);
                    break;
                case R.styleable.IconButton_iconSize:
                    mIconSize = array.getDimensionPixelSize(attr, 0);
                    break;
                default:
                    break;
            }
        }

        array.recycle();

        //If we didn't supply an icon in the XML
        if(mIcon != null){
            mPaint = new Paint();
            mSrcRect = new Rect(0, 0, mIcon.getWidth(), mIcon.getHeight());
        }
    }

    public static Bitmap drawableToBitmap (Drawable drawable) {
        if (drawable instanceof BitmapDrawable) {
            return ((BitmapDrawable)drawable).getBitmap();
        }

        Bitmap bitmap = Bitmap.createBitmap(drawable.getIntrinsicWidth(), drawable.getIntrinsicHeight(), Bitmap.Config.ARGB_8888);
        Canvas canvas = new Canvas(bitmap);
        drawable.setBounds(0, 0, canvas.getWidth(), canvas.getHeight());
        drawable.draw(canvas);

        return bitmap;
    }
} 
```

然后它可以像这样使用：

```
<com.example.grennis.myapplication.IconButton
    android:layout_width="200dp"
    android:layout_height="64dp"
    android:text="Delete"
    app:iconSrc="@android:drawable/ic_delete"
    app:iconSize="32dp"
    app:iconPadding="6dp" /> 
```

这对我有用。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2015-04-02T19:35:01.667

这是一种干净简单的方法，无需做任何花哨的操作，即可获得比居中的 Image 和 Text 内容更宽的 Button 的结果。

```
<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:clickable="true"
    android:background="@drawable/button_background_selector">

    <Button
        android:layout_centerInParent="true"
        android:gravity="center"
        android:duplicateParentState="true"
        android:layout_width="wrap_content"
        android:text="New User"
        android:textSize="15sp"
        android:id="@android:id/button1"
        android:textColor="@android:color/white"
        android:drawablePadding="6dp"
        android:drawableLeft="@drawable/add_round_border_32x32"
        android:layout_height="64dp" />

</RelativeLayout> 
```

![在此处输入图像描述](../Images/f1f3b4ef29f7f18c18c8e669a90dc81b.png)

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2019-03-18T15:47:36.050

您可以使用 `<com.google.android.material.button.MaterialButton/>`.
[https://material.io/develop/android/components/material-button/](https://material.io/develop/android/components/material-button/)

它最终允许设置图标重力。

```
 <com.google.android.material.button.MaterialButton
        android:layout_width="match_parent"
        android:layout_height="48dp"
        android:layout_marginStart="16dp"
        android:layout_marginEnd="16dp"
        android:gravity="center"
        android:text="Awesome button"
        app:icon="@drawable/your_icon"
        app:iconGravity="textStart" /> 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2016-05-29T21:22:01.747

在我们的例子中，我们想要使用默认的 Button 类（继承它的各种样式和行为）并且我们需要能够在代码中创建按钮。此外，在我们的例子中，我们可以有文本、图标（左侧可绘制），或两者兼而有之。

目标是在按钮宽度大于 wrap_content 时将图标和/或文本作为一个组居中。

```
public class CenteredButton extends Button
{
    public CenteredButton(Context context, AttributeSet attrs, int defStyleAttr)
    {
        super(context, attrs, defStyleAttr);

        // We always want our icon and/or text grouped and centered.  We have to left align the text to
        // the (possible) left drawable in order to then be able to center them in our onDraw() below.
        //
        setGravity(Gravity.LEFT|Gravity.CENTER_VERTICAL);
    }

    @Override
    protected void onDraw(Canvas canvas)
    {
        // We want the icon and/or text grouped together and centered as a group.

        // We need to accommodate any existing padding
        //
        float buttonContentWidth = getWidth() - getPaddingLeft() - getPaddingRight();

        // In later versions of Android, an "all caps" transform is applied to buttons.  We need to get
        // the transformed text in order to measure it.
        //
        TransformationMethod method = getTransformationMethod();
        String buttonText = ((method != null) ? method.getTransformation(getText(), this) : getText()).toString();
        float textWidth = getPaint().measureText(buttonText);

        // Compute left drawable width, if any
        //
        Drawable[] drawables = getCompoundDrawables();
        Drawable drawableLeft = drawables[0];
        int drawableWidth = (drawableLeft != null) ? drawableLeft.getIntrinsicWidth() : 0;

        // We only count the drawable padding if there is both an icon and text
        //
        int drawablePadding = ((textWidth > 0) && (drawableLeft != null)) ? getCompoundDrawablePadding() : 0;

        // Adjust contents to center
        //
        float bodyWidth = textWidth + drawableWidth + drawablePadding;
        canvas.translate((buttonContentWidth - bodyWidth) / 2, 0);

        super.onDraw(canvas);
    }
} 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2014-05-08T06:41:13.847

这是我的代码并且工作完美。

```
<Button
    android:id="@+id/button"
    android:layout_width="200dp"
    android:layout_height="50dp"
    android:layout_gravity="center"
    android:background="@drawable/green_btn_selector"
    android:gravity="left|center_vertical"
    android:paddingLeft="50dp"
    android:drawableLeft="@drawable/plus"
    android:drawablePadding="5dp"
    android:text="@string/create_iou"
    android:textColor="@color/white" /> 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-12-09T13:08:52.853

```
public class DrawableCenterTextView extends TextView {

    public DrawableCenterTextView(Context context, AttributeSet attrs,
            int defStyle) {
        super(context, attrs, defStyle);
    }

    public DrawableCenterTextView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public DrawableCenterTextView(Context context) {
        super(context);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        Drawable[] drawables = getCompoundDrawables();
        if (drawables != null) {
            Drawable drawableLeft = drawables[0];
            Drawable drawableRight = drawables[2];
            if (drawableLeft != null || drawableRight != null) {
                float textWidth = getPaint().measureText(getText().toString());
                int drawablePadding = getCompoundDrawablePadding();
                int drawableWidth = 0;
                if (drawableLeft != null)
                    drawableWidth = drawableLeft.getIntrinsicWidth();
                else if (drawableRight != null) {
                    drawableWidth = drawableRight.getIntrinsicWidth();
                }
                float bodyWidth = textWidth + drawableWidth + drawablePadding;
                canvas.translate((getWidth() - bodyWidth) / 2, 0);
            }
        }
        super.onDraw(canvas);
    }
} 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2019-10-22T17:52:10.423

现在，默认情况下，该属性在[材质按钮中可用。](https://material.io/develop/android/components/material-button/)`app:iconGravity`但是，[材质按钮](https://material.io/develop/android/components/material-button/)不允许将背景设置为可绘制对象（RIP 渐变）。

我将上面[@BobDickinson](https://stackoverflow.com/a/37515115/1837367)和[@David-Medenjak](https://stackoverflow.com/a/39568381/2461717)的答案转换为kotlin，效果很好。

```
import android.content.Context
import android.graphics.Canvas
import android.util.AttributeSet
import android.view.Gravity
import androidx.appcompat.widget.AppCompatButton
import kotlin.math.max

class CenteredButton @JvmOverloads constructor(
  context: Context,
  attrs: AttributeSet? = null,
  defStyle: Int = R.attr.buttonStyle
) : AppCompatButton(context, attrs, defStyle) {

  init {
    gravity = Gravity.LEFT or Gravity.CENTER_VERTICAL
  }

  override fun onDraw(canvas: Canvas) {
    val buttonContentWidth = (width - paddingLeft - paddingRight).toFloat()

    var textWidth = 0f
    layout?.let {
      for (i in 0 until layout.lineCount) {
        textWidth = max(textWidth, layout.getLineRight(i))
      }
    }

    val drawableLeft = compoundDrawables[0]
    val drawableWidth = drawableLeft?.intrinsicWidth ?: 0
    val drawablePadding = if (textWidth > 0 && drawableLeft != null) compoundDrawablePadding else 0

    val bodyWidth = textWidth + drawableWidth.toFloat() + drawablePadding.toFloat()

    canvas.save()
    canvas.translate((buttonContentWidth - bodyWidth) / 2, 0f)
    super.onDraw(canvas)
    canvas.restore()
  }
} 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-08-23T04:10:07.673

我知道这有点晚了，但是如果有人在寻找另一个答案，这是另一种添加图标的方法，而无需使用 ViewGroup 包装按钮

```
<?xml version="1.0" encoding="utf-8"?>
<android.support.constraint.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity">

    <Button
        android:id="@+id/btnCamera"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Click!"
        android:textAllCaps="false"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintLeft_toLeftOf="parent"
        app:layout_constraintRight_toRightOf="parent"
        app:layout_constraintTop_toTopOf="parent" />

</android.support.constraint.ConstraintLayout> 
```

*需要将 textAllCaps 设置为 false 以使 spannable 工作

* * *

```
class MainActivity : AppCompatActivity() {

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)

        val buttonLabelBuilder = SpannableStringBuilder(btnCamera.text)
        val iconDrawable = AppCompatResources.getDrawable(this, R.drawable.ic_camera)
        iconDrawable?.setBounds(0, 0, btnCamera.lineHeight, btnCamera.lineHeight)
        val imageSpan = ImageSpan(iconDrawable, ImageSpan.ALIGN_BOTTOM)

        buttonLabelBuilder.insert(0, "i ")
        buttonLabelBuilder.setSpan(imageSpan, 0, 1, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE)

        btnCamera.text = buttonLabelBuilder
    }
} 
```

* * *

[![带有图像跨度的按钮](../Images/5349cb5e9a8ea98899b51eb57a1be9ab.png)](https://i.stack.imgur.com/YZA9v.png)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-09-19T08:18:38.927

我从[@BobDickinson 的回答](https://stackoverflow.com/a/37515115/1837367)开始，但它不能很好地处理多行。这种方法很好，因为您最终仍然会得到一个`Button`可以正确重用的方法。

这是一个经过调整的解决方案，如果按钮有多行也可以使用（请不要问为什么。）

只需在 中扩展`Button`并使用以下内容`onDraw`，`getLineRight()`用于查找每行的实际长度。

```
@Override
protected void onDraw(Canvas canvas) {
    // We want the icon and/or text grouped together and centered as a group.
    // We need to accommodate any existing padding
    final float buttonContentWidth = getWidth() - getPaddingLeft() - getPaddingRight();

    float textWidth = 0f;
    final Layout layout = getLayout();
    if (layout != null) {
        for (int i = 0; i < layout.getLineCount(); i++) {
            textWidth = Math.max(textWidth, layout.getLineRight(i));
        }
    }

    // Compute left drawable width, if any
    Drawable[] drawables = getCompoundDrawables();
    Drawable drawableLeft = drawables[0];
    int drawableWidth = (drawableLeft != null) ? drawableLeft.getIntrinsicWidth() : 0;

    // We only count the drawable padding if there is both an icon and text
    int drawablePadding = ((textWidth > 0) && (drawableLeft != null)) ? getCompoundDrawablePadding() : 0;

    // Adjust contents to center
    float bodyWidth = textWidth + drawableWidth + drawablePadding;

    canvas.save();
    canvas.translate((buttonContentWidth - bodyWidth) / 2, 0);
    super.onDraw(canvas);
    canvas.restore();
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-10-03T13:25:24.117

我遇到了同样的问题，我想出了一个不需要 XML 更改或自定义视图的解决方案。

此代码片段检索文本和左/右可绘制对象的宽度，并设置按钮的左/右填充，因此只有足够的空间来绘制文本和可绘制对象，并且不会添加更多填充。这可以应用于 Buttons 以及 TextViews，它们的超类。

```
public class TextViewUtils {
    private static final int[] LEFT_RIGHT_DRAWABLES = new int[]{0, 2};

    public static void setPaddingForCompoundDrawableNextToText(final TextView textView) {
        ViewTreeObserver vto = textView.getViewTreeObserver();
        vto.addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() {
            @Override
            public void onGlobalLayout() {
                shinkRoomForHorizontalSpace(textView);
            }
        });

    }

    private static void shinkRoomForHorizontalSpace(TextView textView) {
        int textWidth = getTextWidth(textView);
        int sideCompoundDrawablesWidth = getSideCompoundDrawablesWidth(textView);
        int contentWidth = textWidth + sideCompoundDrawablesWidth;
        int innerWidth = getInnerWidth(textView);
        int totalPadding = innerWidth - contentWidth;
        textView.setPadding(totalPadding / 2, 0, totalPadding / 2, 0);
    }

    private static int getTextWidth(TextView textView) {
        String text = textView.getText().toString();
        Paint textPaint = textView.getPaint();
        Rect bounds = new Rect();
        textPaint.getTextBounds(text, 0, text.length(), bounds);
        return bounds.width();
    }

    private static int getSideCompoundDrawablesWidth(TextView textView) {
        int sideCompoundDrawablesWidth = 0;
        Drawable[] drawables = textView.getCompoundDrawables();
        for (int drawableIndex : LEFT_RIGHT_DRAWABLES) {
            Drawable drawable = drawables[drawableIndex];
            if (drawable == null)
                continue;
            int width = drawable.getBounds().width();
            sideCompoundDrawablesWidth += width;
        }
        return sideCompoundDrawablesWidth;
    }

    private static int getInnerWidth(TextView textView) {
        Rect backgroundPadding = new Rect();
        textView.getBackground().getPadding(backgroundPadding);
        return textView.getWidth() - backgroundPadding.left - backgroundPadding.right;
    }
} 
```

请注意：

*   它实际上仍然留下了比需要更多的空间（对于我的目的来说已经足够了，但你可能会寻找错误）
*   它会覆盖那里的任何左/右填充。我想解决这个问题并不难。

要使用它，只需调用`TextViewUtils.setPaddingForCompoundDrawableNextToText(button)`您的`onCreate`or `onViewCreated()`。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-09-18T23:34:42.907

这个问题有几种解决方案。也许在某些设备上最简单的方法是使用`paddingRight`和`paddingLeft`移动图像和文本，如下所示。

## 原始按钮

```
<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginStart="32dp"
    android:layout_marginEnd="32dp"
    android:layout_marginTop="16dp"
    android:text="@string/scan_qr_code"
    android:textColor="@color/colorPrimary"
    android:drawableLeft="@drawable/ic_camera"
    android:paddingRight="90dp"
    android:paddingLeft="90dp"
    android:gravity="center"
    /> 
```

[![使用 Padding 可以工作](../Images/9f695fab76868bfb369e06d420343ac8.png)](https://i.stack.imgur.com/LcBGU.png)

这里的问题是在较小的设备上，这种填充可能会导致不幸的问题，例如： [![在此处输入图像描述](../Images/ee7173655787d5ea4d1583a9226cd1fd.png)](https://i.stack.imgur.com/6voxd.png)

其他解决方案都是“从布局、图像和文本视图中构建按钮”的某个版本。它们可以工作，但完全模拟一个按钮可能会很棘手。我提出了另一种解决方案；*“从一个图像、一个文本视图和一个按钮*的布局中构建一个按钮”

这是我建议的相同按钮：

```
<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginStart="32dp"
    android:layout_marginEnd="32dp"
    android:layout_marginTop="16dp"
    android:gravity="center"
    >
    <Button
        android:id="@+id/scanQR"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/white_bg_button"
        />
    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:layout_centerInParent="true"
        android:gravity="center"
        android:elevation="10dp"
        >
        <ImageView
            android:id="@+id/scanImage"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginRight="8dp"
            android:src="@drawable/ic_camera"
            />
        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textAppearance="@style/Base.TextAppearance.AppCompat.Button"
            android:text="@string/scan_qr_code"
            android:textColor="@color/colorPrimary"
            />
    </LinearLayout>
</RelativeLayout> 
```

如您所见，按钮现在处于相对布局中，但它的 text 和 drawableLeft 不是按钮的一部分，它们位于按钮顶部的单独布局中。有了这个，按钮仍然像一个按钮。问题是：

1.  对于较新版本的 Android，内部布局需要提升。按钮本身的海拔高于 ImageView 和 TextView，因此即使它们是在 Button*之后*定义的，它们仍然会在海拔“下方”并且不可见。将 'android:elevation' 设置为 10 可以解决此问题。
2.  必须设置 TextView 的 textAppearance，使其具有与按钮相同的外观。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-08-26T06:09:52.200

这是另一个解决方案：

```
 <LinearLayout
        android:id="@+id/llButton"
        android:layout_width="match_parent"
        style="@style/button_celeste"
        android:layout_height="wrap_content"
        android:orientation="horizontal">

        <TextView
            style="@style/button_celeste"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:drawablePadding="10dp"
            android:clickable="false"
            android:drawableLeft="@drawable/icon_phone"
            android:text="@string/call_runid"/>
    </LinearLayout> 
```

和事件：

```
 LinearLayout btnCall = (LinearLayout) findViewById(R.id.llButton);
    btnCall.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            call(runid.Phone);
        }
    }); 
```

* * *

## 回答 #14

> 赞同：-4
> 
> 时间：2013-11-21T11:10:31.303

另一个相当老套的选择是`weight="1"`在按钮的每一侧添加空白间隔视图。我不知道这会如何影响性能。

```
 <View
        android:layout_width="0dp"
        android:layout_height="fill_parent"
        android:layout_weight="1" /> 
```

# c++ - 模式匹配

> ID：14668222
> 
> 赞同：1
> 
> 时间：2013-02-03T00:36:33.177
> 
> 标签：c++, pattern-matching

我只是想知道这个问题是否有任何其他逻辑：问题：查找给定字符串中的对数并输出所有对和未配对元素的总和。PS：输入区分大小写。

示例 O/P：

eeqe 3

啊啊2

rwertr 5

我通过首先对输入字符串进行排序然后比较相邻元素来找到解决此问题的方法，如下面的代码所示：

```
int main()
{
int t,count=0,pos=0;
char swap;
    char a[201];
    cin>>a;
    int len=strlen(a);
    //cout<<a<<endl;
    for (int c = 0 ; c < ( len - 1 ); c++)
    {
for (int d = 0 ; d < len - c - 1; d++)
{
  if (a[d] > a[d+1]) /* For decreasing order use < */
  {
    swap       = a[d];
    a[d]   = a[d+1];
    a[d+1] = swap;
  }
}
}
    //cout<<a<<endl;
    count=0;
    for(int i=0;i<len;){
        if(a[i]==a[i+1]){
            count++;
            i+=2;
            //if(i== len-2)i++;
        }
        else{ count++; i++;}
    }
    //if(a[len-1]!=a[len-2])count++;
    cout<<count<<endl;
return 0; 
```

}

这段代码工作正常。但是，我只是想知道是否有任何其他有效的解决方案不涉及对整个输入数组进行排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T00:44:46.353

它基本上避免了基于只有 256 个可能的字符的想法进行排序，因此计算它们就足够了。这是我的解决方案：

```
int main()
{
  std::string s; std::cin >> s;
  int cnt[256] = {};
  for (std::size_t i = 0; i < s.size(); ++i)
    ++cnt[static_cast<unsigned char>(s[i])];
  int sum = 0;
  for (std::size_t i = 0; i < 256; ++i)
    sum += cnt[i]/2 + cnt[i]%2;
  std::cout << sum << std::endl;
} 
```

例如，如果字符串包含 5 次 a `'a'`，则允许 5/2 对（整数除法）并且 1 保持不成对（因为 5 是奇数 => 5%2 是 1）

编辑：因为我们在这里：

```
int main()
{
  std::array<int, 256> cnt{-1}; // last char will be '\0', ignore this.
  std::for_each(std::istreambuf_iterator<char>(std::cin.rdbuf()),
                std::istreambuf_iterator<char>{},
                [&](unsigned char c){++cnt[c];});
  std::cout << std::accumulate(cnt.begin(), cnt.end(), 0,
                               [](int i, int c)->int{return i+(c/2)+(c%2);}) << '\n';
} 
```

# java - Tomcat6 未找到 JDK

> ID：14668224
> 
> 赞同：2
> 
> 时间：2013-02-03T00:36:48.410
> 
> 标签：java, linux, oracle, tomcat, ubuntu

我已经 ssh 进入我的服务器（Ubuntu 12.04），无论我为 JAVA_HOME 和 JRE_HOME 设置什么，tomcat6 都不想启动：

```
me@myserver:/usr/lib/jvm/jdk-oracle.1.6.0_33$ echo $JAVA_HOME
/usr/lib/jvm/jdk-oracle.1.6.0_33/bin

me@myserver:/usr/lib/jvm/jdk-oracle.1.6.0_33$ echo $JRE_HOME
/usr/lib/jvm/jdk-oracle.1.6.0_33/jre

me@myserver:/usr/lib/jvm/jdk-oracle.1.6.0_33$ sudo service tomcat6 start
 * no JDK found - please set JAVA_HOME

me@myserver:/usr/lib/jvm/jdk-oracle.1.6.0_33$ export JAVA_HOME=/usr/lib/jvm/jdk-oracle.1.6.0_33

me@myserver:/usr/lib/jvm/jdk-oracle.1.6.0_33$ sudo service tomcat6 start
 * no JDK found - please set JAVA_HOME

me@myserver:/usr/lib/jvm/jdk-oracle.1.6.0_33$ ls $JAVA_HOME
bin        db       jre  LICENSE  README.html    register_ja.html     src.zip
COPYRIGHT  include  lib  man      register.html  register_zh_CN.html  THIRDPARTYLICENSEREADME.txt

me@myserver:/usr/lib/jvm/jdk-oracle.1.6.0_33$ ls $JAVA_HOME/bin
appletviewer  HtmlConverter  java     javap     jdb    jps         jstat      native2ascii  rmic         serialver   wsgen
apt           idlj           javac    javaws    jhat   jrunscript  jstatd     orbd          rmid         servertool  wsimport
ControlPanel  jar            javadoc  jconsole  jinfo  jsadebugd   jvisualvm  pack200       rmiregistry  tnameserv   xjc
extcheck      jarsigner      javah    jcontrol  jmap   jstack      keytool    policytool    schemagen    unpack200 
```

我正在查看 tomcat6 的 init.d 脚本，我发现了一些搜索 openjdk 的自定义逻辑。我不想用openjdk，我特意装了oracle！这是 init.d 脚本的片段（不是我写的）：

```
# this is a work-around until there is a suitable runtime replacement 
# for dpkg-architecture for arch:all packages
# this function sets the variable OPENJDKS
find_openjdks()
{
        for jvmdir in /usr/lib/jvm/java-7-openjdk-*
        do
                if [ -d "${jvmdir}" -a "${jvmdir}" != "/usr/lib/jvm/java-7-openjdk-common" ]
                then
                        OPENJDKS=$jvmdir
                fi
        done
        for jvmdir in /usr/lib/jvm/java-6-openjdk-*
        do
                if [ -d "${jvmdir}" -a "${jvmdir}" != "/usr/lib/jvm/java-6-openjdk-common" ]
                then
                        OPENJDKS="${OPENJDKS} ${jvmdir}"
                fi
        done
}

# The first existing directory is used for JAVA_HOME (if JAVA_HOME is not
# defined in $DEFAULT)

OPENJDKS=""
find_openjdks
JDK_DIRS="/usr/lib/jvm/default-java ${OPENJDKS} /usr/lib/jvm/java-6-sun /usr/lib/jvm/java-1.5.0-sun /usr/lib/j2sdk1.5-sun /usr/lib/j2sdk1.5-ibm"

# Look for the right JVM to use
for jdir in $JDK_DIRS; do
    if [ -r "$jdir/bin/java" -a -z "${JAVA_HOME}" ]; then
        JAVA_HOME="$jdir"
    fi
done
export JAVA_HOME 
```

我不得不从 /usr/lib/jvm 中删除 openjdk，因为愚蠢的 tomcat 一直在寻找并使用它，即使我的 JAVA_HOME 变量被设置为使用 oracle 的 java.util.

请帮忙？我不知道如何解决这个问题。我正在使用 maven，而 maven 与我设置 JAVA_HOME 变量的方式完美契合。

**编辑：**

我打开了 init.d tomcat 脚本并更改了这一行：

```
JDK_DIRS="/usr/lib/jvm/default-java ${OPENJDKS} /usr/lib/jvm/java-6-sun /usr/lib/jvm/java-1.5.0-sun /usr/lib/j2sdk1.5-sun /usr/lib/j2sdk1.5-ibm" 
```

对此：

```
JDK_DIRS="/usr/lib/jvm/jdk-oracle.1.6.0_33 /usr/lib/jvm/default-java ${OPENJDKS} /usr/lib/jvm/java-6-sun /usr/lib/jvm/java-1.5.0-sun /usr/lib/j2sdk1.5-sun /usr/lib/j2sdk1.5-ibm" 
```

（我刚刚将我的路径添加`/usr/lib/jvm/jdk-oracle.1.6.0_33`到字符串中）突然 tomcat 启动并使用我的 oracle java 运行。我想这行得通，但这不可能是最好的方法。

**编辑：**

斯蒂芬C：

```
me@myserver:/usr/lib/jvm$ sudo bash
root@myserver:/usr/lib/jvm# echo $JAVA_HOME
/usr/lib/jvm/jdk-oracle.1.6.0_33 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T00:46:10.253

尝试这个：

```
sudo bash
echo $JAVA_HOME 
```

我怀疑问题在于*您的*$JAVA_HOME 环境变量没有传递`sudo`给它正在运行的命令。 **手动输入当然意味着它不会！** （您的实验似乎暗示了其他情况，但我怀疑还有其他东西使事情变得混乱......）

我不确定什么是最好的长期解决方案，但替代方案包括：

*   在 catalina.sh 脚本中设置 $JAVA_HOME
*   在 tomcat init.d 脚本中设置 $JAVA_HOME
*   一些发行版有一个约定，即所有发行版提供的服务启动脚本都从 /etc 中的文件中获取本地配置覆盖...
*   在 shell RC 文件中为“tomcat”用户设置 $JAVA_HOME（可能是个坏主意）
*   调整 sudoers 配置以通过 $JAVA_HOME （绝对是个坏主意！）
*   使用“-E”选项...

IMO，在启动服务时依赖*您的$JAVA_HOME 环境变量是一个坏主意。*您可能会忘记并错误地使用错误的 JDK 启动。保护你自己。

# emacs - emacs 中的上下文相关字体锁定

> ID：14668225
> 
> 赞同：4
> 
> 时间：2013-02-03T00:36:51.760
> 
> 标签：emacs, syntax-highlighting, context-free-grammar, font-lock

基本上，我试图以我想要的方式突出显示以下咖啡脚本代码。可以在[这里](http://coffeescript.org/#literals)找到咖啡脚本函数的语法解释。

```
nameHere = (tstamp, moo, boo) ->
    ... 
```

名称 tstamp、moo 和 boo 应该是粉红色的（没有别的，不是逗号，也不是括号），因为它们是 lambda 函数的参数。

```
highOrderFun ((x) -> x * x) someList 
```

这里是第一个 x 是参数。参数可以有默认参数：

```
class Foo
    meth: (msg = "Hello", bar = "foo") ->
        .... 
```

默认参数本身可以是变量：

```
defColor = "red"
print = (msg, color = defColor) ->
    ... 
```

so`msg`和`color`above 应该突出显示，但不是`defColor`. 一个更棘手的情况是带有默认参数的函数，它们本身就是函数。我认为 emacs 的 font-lock 很难正确突出显示，但我还是把它包括在内：

```
funTakingFuns = (f1 = ((a, b) -> a*b), f2 = ((c, d) -> c/d)) ->
    ... 
```

这似乎在 emacs 中实现起来相当复杂，因为您希望突出显示是上下文敏感的。我已经阅读了有关 font-lock 的文档，但无法弄清楚。

如果有人能告诉我要设置什么以`font-lock-defaults`使其语法突出显示我想要的方式，我将不胜感激。

**更新**显示更多咖啡脚本语法示例。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-03T18:09:20.907

`font-lock-keywords`允许`MATCHER`字段中的函数值：

> where`MATCHER`可以是要搜索的正则表达式，也可以是要调用以进行搜索的函数名称（使用一个参数调用，即搜索的限制；它应该返回 non- `nil`，移动点，`match-data`如果成功则适当设置；`re-search-forward`就像）。

所以我们需要编写一个函数来搜索缓冲区中的下一个函数参数。

像这样的东西：

```
 (defun coffee-match-next-argument (limit)
      (let ((start (point)))
        ;; Look for the arrow.
        (when (re-search-forward ") *->" limit t)
          ;; Save the position of the closing paren.
          (let ((stop (point)))
            (goto-char (match-beginning 0))
            ;; Go to the opening paren.
            (goto-char (nth 1 (syntax-ppss)))
            ;; If we're before our initial position, go forward.
            ;; We don't want to find the same symbols again.
            (when (> start (point))
              (goto-char start))
            ;; Look for the next symbol until the arrow.
            (or (re-search-forward "\\((\\|,\\) *\\(\\(\\sw\\|_\\)+\\)" stop 'mv)
                (coffee-match-next-argument limit)))))) 
```

和设置，与现有的一起使用`coffee-mode`：

```
(font-lock-add-keywords
 'coffee-mode
 '((coffee-match-next-argument 2 font-lock-variable-name-face))) 
```

当然，您也可以在 中使用它`font-lock-defaults`。

这可能会使用粉色以外的其他颜色，但这很容易改变。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T16:20:00.450

这更像是一种 hack，它远非最佳（因为我对咖啡脚本一点也不熟悉），但也许你自己稍微调整一下，你就可以完成这项工作。

所有的成分都在那里。

命令/功能的触发基于您使用`coffee-mode`. 如果你不这样做，这不是一个大麻烦，你只需要以不同的方式钩住这些东西。

将以下行放入您的`.emacs`:

`(eval-after-load 'coffee '(load "/PATH/custom-coffee-font-lock.el"))`

您可以将以下文本保存为文件，它将：

(1) 触发时字体锁定`coffee-mode`

`>`(2)在“->”中键入“”时字体锁定当前行

(3) 允许通过运行字体锁定缓冲区`M-x coffee-init-font-lock`

```
;;;; custom-coffee-font-lock

;; Firstly, create a new font for this. 

(make-face 'font-lock-coffeescript-face)
(set-face-foreground 'font-lock-coffeescript-face "pink")

;; Next, one function that should be ran after a file is identified as 
;; a coffeescript file. It will do the font-locking you want on 
;; the whole buffer. It is also possible to run it manually. 

(defun coffee-init-font-lock ()
  (interactive)
  (save-excursion 
    (goto-char 1)
    (while (search-forward-regexp "=.+->" nil t)
      (search-backward-regexp "(")
      (forward-char 1)
      (add-text-properties 
       (point) (- (search-forward-regexp "," nil nil) 1) 
       '(font-lock-face font-lock-coffeescript-face))
      (add-text-properties 
       (point)  (- (search-forward-regexp "," nil nil) 1) 
       '(font-lock-face font-lock-coffeescript-face))
      (add-text-properties 
       (point)  (- (search-forward-regexp ")" nil nil) 1) 
       '(font-lock-face font-lock-coffeescript-face))
      (move-end-of-line 1)))
  )

  ;; This actually runs that function.
  (coffee-init-font-lock)

;; This advice will be ran everytime you write something. It will check 
;; whether "->" is before it, so when you type the final ">", it will
;; do the font locking for the current line (it also checks for your mode).

(defadvice self-insert-command (after coffee-font-lock activate)
  (when (and (looking-back "->") (eq major-mode 'coffee-mode))
    (save-excursion 
        (search-backward-regexp "(")
        (forward-char 1)
        (add-text-properties 
         (point)  (- (search-forward-regexp "," nil nil) 1) 
         '(font-lock-face font-lock-coffeescript-face))
        (add-text-properties 
         (point)  (- (search-forward-regexp "," nil nil) 1) 
         '(font-lock-face font-lock-coffeescript-face))
        (add-text-properties 
         (point)  (- (search-forward-regexp ")" nil nil) 1) 
         '(font-lock-face font-lock-coffeescript-face))))
  )

(provide 'custom-coffee-font-lock)
;;; custom-coffee-font-lock.el 
```

如果您有任何要求，请告诉我。就像我说的，我不使用 CoffeeScript，所以这可能会给你带来巨大的错误。至少它应该有助于一些基本的想法。

结果：

![在此处输入图像描述](../Images/53833abde4dc5d1ea672a482d311156f.png)

# android - 导入 android.R 或 layout.main 出错？

> ID：14668228
> 
> 赞同：0
> 
> 时间：2013-02-03T00:37:10.960
> 
> 标签：android

我继续删除 import.R 或添加 mypackage.R 或删除所有导入和 shift-control O 或删除 R.java。

我仍然收到错误：无法解析 main.xml，或者，R 无法解析为变量。我每次都打扫干净。你如何让它发挥作用？

```
 package com.hga;

   import android.app.Activity;
   import android.content.Intent;
   import android.view.Menu;
   import android.view.View;
   import android.widget.Button;

   public class Hga extends Activity {

   @Override
   protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView( R.layout.activity_hga ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T00:47:37.757

是的，当我开始为 android 编程时，我曾经遇到过这类问题。每次编写或保存代码时，R 文件夹都会自行更新，并且当代码中出现错误时，无论出于何种原因，R 文件夹都会为您提供错误报告。起初清理，但如果这不起作用，因为它通常不会你想完全注释掉你的代码 /* .... */ 然后清理并且错误应该消失，现在你可以确定哪一点代码导致错误发生在 R 文件夹中。PS。这是我在编写 android 应用程序时感到沮丧的主要来源

# json - AJAX 响应的内容未写入 HTML 容器标签 - span、div

> ID：14668230
> 
> 赞同：0
> 
> 时间：2013-02-03T00:37:12.833
> 
> 标签：json, jquery, html

以下 jQuery 函数从 Spring 返回正确的 JSON 响应。

```
$(function() {
    $('#dataForm').submit(function() {

        var rows;
        var form = $(this);
        rowCount(function() {
            var url = form.attr('action'),
            rows = form.find('input[name="rows"]').val();

            if(rows==0)
            {
                insert();
            }
            else if(rows==1)
            {
                update(function(response){
                    $("#textContents").val(response);
                    alert($("#textContents").val()); 
                    //Alerts the correct contents from the database
                });
            }
        });
        return false;
    });        
}); 
```

提交表单时调用此函数。

条件中的警告框会`else if`警告来自服务器的正确内容。`textContents`是一个`<span></span>`id之类的。

```
<span id="textContents"></span> 
```

一切都很好，但由于未知原因，响应显然没有写入 HTML span 标签。

我什至删除了当前页面的所有 HTML 模板的设计，但没有找到任何线索。如果我将 span 标签更改为其他类似的标签以`<textarea></textarea>`进行演示，则会显示内容。

表单上没有放错位置的标签。我也尝试过替换`<span>`，`<div>`但它也没有帮助。我在这里俯瞰什么？显然，一些非常基本的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T00:43:16.190

你应该使用`$("#textContents").html(response);`

因为`<span>`没有价值。

# java - 在包资源管理器中突出显示一个类

> ID：14668231
> 
> 赞同：0
> 
> 时间：2013-02-03T00:37:14.110
> 
> 标签：java, eclipse, plugins, eclipse-plugin

我在 Eclipse 中开发了一个插件，它为 Package Explorer 添加了一个用于搜索类的选项。所以插件搜索类并返回类路径。然后它应该突出显示资源管理器中的类。

如果有人能指导我突出课程，我将不胜感激。

我试过这个：

```
file = ResourcesPlugin.getWorkspace().getRoot().getFileForLocation(myPath);
if (file != null ) {
        //Select the data file
        IViewReference[] views =     PlatformUI.getWorkbench().getActiveWorkbenchWindow().getActivePage().getViewReferences();
        for(IViewReference view:views){
            if("org.eclipse.jdt.ui.PackageExplorer".equals(view.getId())){
                IViewPart pExplorer = view.getView(true);
                pExplorer.getViewSite().getSelectionProvider().setSelection(--);
                break;
            }
        } 
```

但是，我只有文件路径，无法创建结构化选择或类似的东西作为 setSelection 的参数。

# android - 更新 Android SDK 工具

> ID：14668232
> 
> 赞同：1
> 
> 时间：2013-02-03T00:37:18.553
> 
> 标签：android, updates, android-sdk-tools

当我尝试更新 Android SDK 工具时，我收到以下错误消息：

```
准备安装档案
下载 Android SDK 工具，修订版 21.0.1
安装 Android SDK 工具，修订版 21.0.1
无法将目录 e:\programs\java\android-sdk\tools 重命名为 e:\programs\java\android-sdk\temp\ToolPackage.old01。
[find_lock] java.exe 锁定的目录
无法将目录 e:\programs\java\android-sdk\tools 重命名为 e:\programs\java\android-sdk\temp\ToolPackage.old01。
[find_lock] java.exe 锁定的目录

```

尽我所能关闭一切后，我发现唯一正在运行的 java.exe 实例是 Android SDK 管理器使用的实例！所以它阻止自己更新 SDK 工具。是否有解决方法可以让我获得此更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T00:47:45.570

面临同样的问题。Eclipse 需要一些时间才能关闭，即使在主窗口消失后也是如此。此外，亚行需要关闭；除了终止进程之外，没有优雅的方法可以做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T00:45:27.370

这可能是您目录的权限问题。您可能需要转到临时文件夹并确保用户和管理员具有完全权限，以便可以更改文件。

# java - 使用 java 的 https 会话登录/注销

> ID：14668237
> 
> 赞同：1
> 
> 时间：2013-02-03T00:38:33.453
> 
> 标签：java, jsp, servlets, https, content-management-system

只是一个非常简单的问题。我在 JSP 中建立了一个相当简单的 CMS。我所需要的只是维护系统隐私的安全措施。有谁知道任何有助于为简单网络构建 https 会话的教程？

我或多或少地征服（或掌握）了构建数据库、使用 CRUD 以及使程序在 java 代码和 JSP 之间进行交互的主要部分。这基本上是我可以安全而自信地启动这个东西并让它开始之前的最后一个障碍。

任何和所有信息都将受到赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T00:43:17.880

您可以使用一个名为 SSLSession 的类：

[这是教程](http://www.java2s.com/Tutorial/Java/0490__Security/SSLClientSession.htm)

[这是文档](http://docs.oracle.com/javase/1.5.0/docs/api/javax/net/ssl/SSLSession.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T00:45:34.763

如果您的站点很重要，您可能需要仔细研究会话管理。简单来说，制作一个表格来获取用户名/密码。如果它们匹配，请使用 jsp 的

登录 ：

```
session.setAttribute("login", "true"); 
```

要检查用户是否已登录，

```
boolean logged = session.getAttribute("login") != null 
```

# algorithm - 这个 for 循环语句的运行时间？

> ID：14668241
> 
> 赞同：1
> 
> 时间：2013-02-03T00:39:44.320
> 
> 标签：algorithm, big-o, time-complexity

我试图找出这个循环语句的 Big-O 运行时间。有人可以帮帮我吗？

`for (i = 1; i < n*n; i=i*2)`

是`O(n^2 lg n)`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T00:43:48.547

不，应该是`O(logn)`。因为`log(n^2) = O(logn)`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T00:48:24.900

它的 O(logn) ：

```
log(n^2) = 2log(n) = O(logn) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T10:15:03.407

提出的答案是正确的；ìt 是`O(logn)`，因为您的迭代增量是多项式（1、4、8、16 等），而不是线性的。

你可以这样看——迭代次数不是线性的，而是多项式的，与迭代次数成对数比例。尽管迭代次数是二次的，但在循环执行期间它是常量，因此可以忽略量词`2`。`2*O(logn)`

# c - 在 OpenCV 中链接库

> ID：14668244
> 
> 赞同：0
> 
> 时间：2013-02-03T00:40:25.047
> 
> 标签：c, opencv

我一直在尝试为绝对年龄编译这个简单的代码，但没有运气。

```
#include "highgui.h"
#include "opencv2/highgui/highgui_c.h"
int main()
{    
   int cvNamedWindow(const char* name,int flags = CV_WINDOW_AUTOSIZE);
   {
        cvNamedWindow("sample");
   }

   cvDestroyWindow("sample");    
} 
```

我正在使用 Ubuntu 12.04 平台。起初我收到错误说

> highgui.h 未找到。

我现在已经纠正了，但现在我得到了新的。我使用的编译指令是：

```
gcc -o window window.c -I/usr/include/opencv/ 
```

新的错误是：

```
window.c:8:48: error: expected ‘;’, ‘,’ or ‘)’ before ‘=’ token
window.c:10:6: error: too few arguments to function ‘cvNamedWindow’ 
```

现在我什至不确定问题是什么了。OpenCV中的编译似乎没有任何明确的解释。请有人帮助因为我真的需要继续这样做，不能整天试图编译！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T07:41:43.073

C中**没有默认参数**。

您应该`cvNamedWindow()`按如下方式调用：

```
cvNamedWindow("sample", CV_WINDOW_AUTOSIZE); 
```

完整代码：

```
#include "highgui.h"
#include "opencv2/highgui/highgui_c.h"

int main() {    
   cvNamedWindow("sample",CV_WINDOW_AUTOSIZE);
   cvDestroyWindow("sample");
   return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T00:48:28.007

尝试编译这个：

```
#include "highgui.h"
#include "opencv2/highgui/highgui_c.h"
int main() {    
   cvNamedWindow("sample");

   cvDestroyWindow("sample");
   return 0;   
} 
```

# mod-rewrite - mod_rewrite 短网址

> ID：14668250
> 
> 赞同：0
> 
> 时间：2013-02-03T00:40:51.620
> 
> 标签：mod-rewrite

我正在使用两个域，其中一个是主域（`http://www.domain.com`），第二个是缩短 URL 的域（`http://doma.in`）

前锋应该是这样的

`http://domain.com`->`http://www.domain.com`

```
RewriteCond %{HTTP_HOST} ^domain.com [NC]
RewriteRule (.*) http://www.domain.com/$1 [R=301,L] 
```

http:// dom.in -> http:// www. 域名.com

```
RewriteCond %{HTTP_HOST} ^doma.in [NC]
RewriteRule (.*) http://www.domain.com/$1 [R=301,L] 
```

`http://sub.domain.com`-> `http://sub.domain.com`（不需要配置？！）

现在是重要的

`http://doma.in/VC7s98X`-> 应该转发到它的目标而不被转换为`http:// www.domain.com`

我不知道我该怎么做这部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T00:44:32.147

您的第二组规则匹配`(.*)`域 dom.in 上的所有内容 ( )。要仅匹配没有任何尾随路径的裸域，请按如下方式更改规则：

```
RewriteCond %{HTTP_HOST} ^doma.in [NC]
RewriteRule ^/?$ http://www.domain.com/$1 [R=301,L] 
```

这需要注意`http://doma.in/VC7s98X`不重定向到`http://www.domain.com`. 我假设你有一些东西可以处理`http://doma.in/VC7s98X`转发到它的预期目标......如果你在这部分寻求帮助，这是一个更大的问题。

# jsplumb - jsplumb：从同一个源锚创建两个连接

> ID：14668253
> 
> 赞同：2
> 
> 时间：2013-02-03T00:41:20.897
> 
> 标签：jsplumb

我在 jsPlumb 尝试从同一个源锚创建两个连接时遇到了麻烦。

例如，在下面的 JSFiddle 中，我试图创建从块 1 锚点到其他两个块 2 和 3 的两个连接。 [http://jsfiddle.net/dutchman71/TYerW/3/](http://jsfiddle.net/dutchman71/TYerW/3/)

出于某种原因，它在这里的 jsPlumb 示例中使用绿点锚可以正常工作。 [http://jsplumb.org/jquery/draggableConnectorsDemo.html#](http://jsplumb.org/jquery/draggableConnectorsDemo.html#)

谁能告诉我我错过了什么？

```
 var endpointOptions = { 
                    anchor:"BottomCenter",
                    maxConnections:-1, 
                    isSource:true, 
                    isTarget:true, 
                    endpoint:["Dot", {radius:6}], 
                    setDragAllowedWhenFull:true,
                    paintStyle:{fillStyle:"#5b9ada"},
                    connectorStyle : {  lineWidth: 4, strokeStyle:"#5b9ada" },
                    connector:[ "Bezier", { curviness:1 }],
                    connectorOverlays:[ 
                        [ "Arrow", { width:15, length:15, location:1, id:"arrow" } ], 
                        [ "Label", { label:"", id:"label" } ]
                    ]               
                    }

            jsPlumb.bind("ready", function() {

                    jsPlumb.addEndpoint('block1', endpointOptions);

                    jsPlumb.addEndpoint('block2', endpointOptions);

                    jsPlumb.addEndpoint('block3', endpointOptions);

                    jsPlumb.draggable('block1');
                    jsPlumb.draggable('block2');
                    jsPlumb.draggable('block3');
            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T15:00:34.683

Google 小组的一位好人帮我解决了这个问题：我从另一个示例中包含的 jsPlumb 版本已过时。如果我包括这个[http://jsplumb.org/js/jquery.jsPlumb-1.3.16-all-min.js](http://jsplumb.org/js/jquery.jsPlumb-1.3.16-all-min.js)就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T11:01:22.867

将端点的半径更改为端点

[“点”，{半径：1}]，

和connectorStyle的线宽为1

connectorStyle : { lineWidth: 4, strokeStyle:"#5b9ada" }

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T17:19:45.543

将 maxconnections 设置为正整数。应该这样做。

也许你应该让你的端点更大，并给连接线一个比端点更小的z-index，这样你就不会错过画布而不是div（画布在连接后几乎阻塞了块1上的整个div已建立到第 2 块，在您的元素检查器/firebug/等中检查它）

# javascript - 在 2D 平面上查找不可访问点

> ID：14668254
> 
> 赞同：6
> 
> 时间：2013-02-03T00:41:23.093
> 
> 标签：javascript, jquery, graph, point, proof

我一直在研究 JavaScript / JQuery 代码，它允许在输入框之间移动箭头键（是的，我知道这会破坏标准 UI）。

它通过循环遍历每个元素并在每个方向（左、右、上和下）找到最接近的元素来工作。

## 例子

P1:(0, 0), P2:(1, 0), P3:(0, 2)

P1 有一个点向右 (P2) 和一个点向上 (P3)。
![第 1 点](../Images/e6ab4a2428579f390ff683c2834f8a54.png)

P2 向左一点 (P1) 和向上一点 (P3)。
*禁止摄影*

P3 有两个点向下（P1 和 P2），但 P1 更接近。
![第 1 点](../Images/ec1ee2112888d37c7e9c99910d58ffa2.png)

因此最终的动作是：

```
Up
  1 -> 3
  2 -> 3
Right
  1 -> 2
Down
  3 -> 1
Left
  2 -> 1 
```

对于此示例：
P1 有两个传入连接和两个传出连接。
P2 有一个传入连接和两个传出连接。
P3 有两个传入和一个传出连接。

这让我思考。
是否存在一组点，使得一个或多个点无法访问（0 个传入连接），或者可以证明不存在这样的集合？

* * *

旁注：
如果您忽略上/下组件（仅使用带有垂直拆分的左右），则在 P1 中不可访问的点 P3：（0, 0），P2：（2, 0），P3：（1, 4 ）。

* * *

这是 JavaScript / JQuery 代码，如果它可以帮助任何人。

```
function arrowKeyNavigation(elements) {
    // Get the position of each element.
    var elementOffsets = [];
    elements.each(function(key, element) {
        elementOffsets[key] = $(element).offset();
    });

    // Find the closest point in each direction and store the points in data('keyNav') for later use.
    for (var i = 0; i < elementOffsets.length; i++) {
        var closestPoints = [];

        for (var j = 0; j < elementOffsets.length; j++) {
            if (i != j) {
                var distance = calcDistanceSquared(elementOffsets[i], elementOffsets[j]);
                var quadrant = calcQuadrant(elementOffsets[i], elementOffsets[j]);

                if (closestPoints[quadrant] == undefined || calcDistanceSquared(elementOffsets[i], elementOffsets[closestPoints[quadrant]]) > distance) {
                    closestPoints[quadrant] = j;
                }
            }
        }

        var closestElements = [];
        for (var j = 0; j < closestPoints.length; j++) {
            closestElements[j] = elements[closestPoints[j]];
        }

        $(elements[i]).data('keyNav', closestElements);
    }
}

// Returns the distance between two points squared.
function calcDistanceSquared(offset1, offset2) {
    ...
}

// Returns 0, 1, 2 or 3 for left, up, right and down respectively.
// If a point is EXACTLY 45 degrees it will be classified as either left / right.
function calcQuadrant(offset1, offset2) {
    ...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T06:07:39.987

我已经考虑了更多，我认为我有解决方案。证明草图如下：

假设您在平面上有**有限**数量的点 (R^2)。取一个任意点并将其称为您的目的地。然后采取任何其他点。正如您用红色绘制的那样，该点将 R^2 分为四个象限。根据定义，目的地位于这四个象限之一。朝着那个方向前进。可能会发生以下两种情况之一：
1）您到达目的地并完成了
2）您移动到另一个点。

如果为 2，那么您已经靠得更近了（编辑：按 1 范数距离，d((x1,y1),(x2,y2)) = |x1-x2|+|y1-y2|）。这需要更多证据，但我只是在画草图。目的地现在位于这个新点的某个象限内。

现在请注意，如果您重复此操作，始终朝着目的地方向靠近一步（这可能会改变每一步），您到目的地点的距离将每一步减少；您永远无法重新访问一个点，因为您的距离总是在减少。因此，如果您的点数有限，您最终会到达目的地。

# javascript - jQuery :: 如何根据两个可能的事件执行一个函数

> ID：14668256
> 
> 赞同：1
> 
> 时间：2013-02-03T00:42:14.383
> 
> 标签：javascript, jquery

我正在寻找一种干净的方法来触发一个可能由两个可能事件触发的功能。例如：

```
$('form').on('submit', function() {
    stuff in here...
});

$('input').on('change', function() {
    same stuff in here as before...
}); 
```

我可以

```
function doStuff() {
    Stuff in here....
}

$('form').on('submit', function() {
    doStuff();
});

$('input').on('change', function() {
    doStuff();
}); 
```

但我想知道是否有更优雅的方式来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T00:43:40.833

```
function doStuff() {
    Stuff in here....
}

$('form').on('submit', doStuff);

$('input').on('change', doStuff); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T04:05:30.150

```
$(function() {

    $('form').submit(function(event) {
        event.preventDefault();
        stuff('aaa');
        $(this).unbind().submit();
    });

    $('input').change(function() {
        stuff('aaa');
    });
});

function stuff(param){
    // Some Processing!
    return(param);
} 
```

# java - 我能做些什么来加快这段代码的速度？

> ID：14668272
> 
> 赞同：22
> 
> 时间：2013-02-03T00:43:47.950
> 
> 标签：java, scala, clojure

我正在尝试学习 Java、Scala 和 Clojure。

我正在用三种语言解决 Project Euler 问题。下面列出了问题 #5 ( [http://projecteuler.net/problem=5](http://projecteuler.net/problem=5) ) 的代码以及前五个问题的运行时间（以秒为单位）。令我吃惊的是，对于问题 #5，Java 和 Clojure 版本比 Scala 版本慢得多。它们在同一台机器、同一 jvm 上运行，并且多次试验的结果是一致的。我能做些什么来加快这两个速度（尤其是 Clojure 版本）？为什么 Scala 版本这么快？

## 运行时间（以秒为单位）

```
|---------|--------|--------|----------|
| problem | Java   | Scala  | Clojure  |
|=========|========|========|==========|
|    1    |  .0010 |  .1570 |   .0116  |
|    2    |  .0120 |  .0030 |   .0003  |
|    3    |  .0530 |  .0200 |   .1511  |
|    4    |  .2120 |  .2600 |   .8387  |
|    5    | 3.9680 |  .3020 | 33.8574  | 
```

## 问题 #5 的 Java 版本

```
public class Problem005 {

  private static ArrayList<Integer> divisors;

  private static void initializeDivisors(int ceiling) {
    divisors = new ArrayList<Integer>();
    for (Integer i = 1; i <= ceiling; i++)
      divisors.add(i);
  }

  private static boolean isDivisibleByAll(int n) {
    for (int divisor : divisors)
      if (n % divisor != 0)
        return false;
    return true;
  }

  public static int findSmallestMultiple (int ceiling) {
    initializeDivisors(ceiling);
    int number = 1;
    while (!isDivisibleByAll(number))
      number++;
    return number;
  }

} 
```

## 问题 #5 的 Scala 版本

```
object Problem005 {
  private def isDivisibleByAll(n: Int, top: Int): Boolean = 
    (1 to top).forall(n % _ == 0)

  def findSmallestMultiple(ceiling: Int): Int = {
    def iter(n: Int): Int = if (isDivisibleByAll(n, ceiling)) n else iter(n+1)
    iter(1)
  }

} 
```

## 问题 #5 的 Clojure 版本

```
(defn smallest-multiple-of-1-to-n
  [n]
  (loop [divisors (range 2 (inc n))
        i n]
    (if (every? #(= 0 (mod i %)) divisors)
      i
      (recur divisors (inc i))))) 
```

# 编辑

有人建议我将各种答案编译成我自己的答案。但是，我想在应得的地方给予赞扬（我自己真的没有回答这个问题）。

对于第一个问题，可以通过使用更好的算法来加快所有三个版本的速度。具体来说，创建数字 1-20 的最大公因数列表（2^4、3^2、5^1、7^1、11^1、13^1、17^1、19^1）和将它们相乘。

更有趣的方面是使用基本相同的算法来理解三种语言之间的差异。在某些情况下，诸如此类的蛮力算法可能会有所帮助。那么，为什么会有性能差异呢？

对于 Java，一个建议是将 ArrayList 更改为原始整数数组。这确实减少了运行时间，减少了大约 0.5 - 1 秒（我今天早上刚刚运行它，它将运行时间从 4.386 秒减少到 3.577 秒。这减少了一点，但没有人能够想出一个将其降低到半秒以下（类似于 Scala 版本）的方法。考虑到所有三个都编译为 java 字节码，这令人惊讶。@didierc 建议使用不可变迭代器；我测试了这个建议，并将运行时间增加到刚刚超过 5 秒。

对于 Clojure，@mikera 和 @Webb 给出了一些加快速度的建议。他们建议使用 loop/recur 进行带有两个循环变量的快速迭代，使用 unchecked-math 进行稍快的数学运算（因为我们知道这里没有溢出的危险），使用原始 long 而不是装箱数，并避免使用更高阶的函数，例如每一个？

运行 @mikera 的代码，我最终得到了 2.453 秒的运行时间，虽然不如 scala 代码，但比我的原始版本好得多，也比 Java 版本好：

```
(set! *unchecked-math* true)

(defn euler5 
  []
  (loop [n 1 
         d 2]
    (if (== 0 (unchecked-remainder-int n d))
      (if (>= d 20) n (recur n (inc d)))
      (recur (inc n) 2))))

(defn is-divisible-by-all?
  [number divisors]
  (= 0 (reduce + (map #(mod 2 %) divisors)))) 
```

对于 Scala，@didierc 声明范围对象 1 到 20 实际上不是对象列表，而是一个对象。很酷。因此，Scala 的性能差异在于我们迭代单个对象而不是整数 1-20 的列表/数组。

事实上，如果我将 scala 方法中的 helper 函数从范围对象更改为列表（见下文），那么 scala 版本的运行时间从 0.302 秒增加到 226.59 秒。

```
private def isDivisibleByAll2(n: Int, top: Int): Boolean = {
    def divisors: List[Int] = List(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20)
    divisors.forall(n % _ == 0)
  } 
```

因此，@didierc 似乎正确地识别了 scala 在这种情况下的优势。知道如何在 java 和 clojure 中实现这种类型的对象会很有趣。

@didierc 建议通过创建 ImmutableRange 类来改进代码，如下所示：

```
import java.util.Iterator;
import java.lang.Iterable;

public class ImmutableRange implements Iterable<Integer> {

  class ImmutableRangeIterator implements Iterator<Integer> {
    private int counter, end, step;

    public ImmutableRangeIterator(int start_, int end_, int step_) {
      end = end_;
      step = step_;
      counter = start_;
    }

    public boolean hasNext(){
      if (step>0) return counter  <= end;
      else return counter >= end;
    }

    public Integer next(){
      int r = counter;
      counter+=step;
      return r;
    }

    public void remove(){
      throw new UnsupportedOperationException();
    }

  }

  private int start, end, step;

  public ImmutableRange(int start_, int end_, int step_){
    // fix-me: properly check for parameters consistency
    start = start_;
    end = end_;
    step = step_;
  }

  public Iterator<Integer> iterator(){
    return new ImmutableRangeIterator(start,end,step);
  }
} 
```

没有提高运行时间。java 版本在我的机器上运行了 5.097 秒。因此，最后，对于为什么 Scala 版本性能更好，我们有一个令人满意的答案，我们了解如何提高 Clojure 版本的性能，但缺少的是了解如何在 Java 中实现 Scala 的不可变范围对象.

## 最后的想法

正如一些人评论的那样，提高此代码运行时间的最有效方法是使用更好的算法。[例如，下面的 java 代码使用Eratosthenes](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)和[Trial Division](http://en.wikipedia.org/wiki/Trial_division)在不到 1 毫秒的时间内计算出答案：

```
/**
 * Smallest Multiple
 *
 * 2520 is the smallest number that can be divided by each of the numbers 
 * from 1 to 10 without any remainder. What is the smallest positive number
 * that is evenly divisible by all of the numbers from 1 to 20?
 *
 * User: Alexandros Bantis
 * Date: 1/29/13
 * Time: 7:06 PM
 */
public class Problem005 {

  final private static int CROSSED_OUT = 0;
  final private static int NOT_CROSSED_OUT = 1;

  private static int intPow(int base, int exponent) {
    int value = 1;
    for (int i = 0; i < exponent; i++)
      value *= base;
    return value;
  }

  /**
   * primesTo computes all primes numbers up to n using trial by 
   * division algorithm
   *
   * @param n designates primes should be in the range 2 ... n
   * @return int[] a sieve of all prime factors 
   *              (0=CROSSED_OUT, 1=NOT_CROSSED_OUT)
   */
  private static int[] primesTo(int n) {
    int ceiling = (int) Math.sqrt(n * 1.0) + 1;
    int[] sieve = new int[n+1];

    // set default values
    for (int i = 2; i <= n; i++)
      sieve[i] = NOT_CROSSED_OUT;

    // cross out sieve values
    for (int i = 2; i <= ceiling; i++)
      for (int j = 2; i*j <= n; j++)
        sieve[i*j] = CROSSED_OUT;
    return sieve;
  }

  /**
   * getPrimeExp computes a prime factorization of n
   *
   * @param n the number subject to prime factorization
   * @return int[] an array of exponents for prime factors of n
   *               thus 8 => (0^0, 1^0, 2^3, 3^0, 4^0, 5^0, 6^0, 7^0, 8^0)
   */
  public static int[] getPrimeExp(int n) {
    int[] factor = primesTo(n);
    int[] primePowAll = new int[n+1];

    // set prime_factor_exponent for all factor/exponent pairs
    for (int i = 2; i <= n; i++) {
      if (factor[i] != CROSSED_OUT) {
        while (true) {
          if (n % i == 0) {
          n /= i;
          primePowAll[i] += 1;
          } else {
            break;
          }
        }
      }
    }

    return primePowAll;
  }

  /**
   * findSmallestMultiple computes the smallest number evenly divisible 
   * by all numbers 1 to n
   *
   * @param n the top of the range
   * @return int evenly divisible by all numbers 1 to n
   */
  public static int findSmallestMultiple(int n) {
    int[] gcfAll = new int[n+1];

    // populate greatest common factor arrays
    int[] gcfThis = null;
    for (int i = 2; i <= n; i++) {
      gcfThis = getPrimeExp(i);
      for (int j = 2; j <= i; j++) {
        if (gcfThis[j] > 0 && gcfThis[j] > gcfAll[j]) {
          gcfAll[j] = gcfThis[j];
        }
      }
    }

    // multiply out gcf arrays
    int value = 1;
    for (int i = 2; i <= n; i++) {
      if (gcfAll[i] > 0)
        value *= intPow(i, gcfAll[i]);
    }
    return value;
  }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T19:04:50.820

Scala 更快，因为其他解决方案无缘无故地创建显式集合。在 Scala 中，`1 to top`创建一个对象来表示从`1`to的数字，`top`但不会在任何地方明确列出它们。在 Java 中，您确实会显式创建列表——创建一个对象比`ArrayList`每次迭代创建一个包含 20 个（实际上是 21 个对象，因为也是一个对象）的数组要快得多。

（请注意，实际上没有一个版本接近最佳。请参阅“最小公倍数”，这是 Eastsun 正在做的事情，但没有提及。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-04T04:11:34.703

这是 Clojure 中一个更快的版本：

```
(set! *unchecked-math* true)

(defn euler5 []
  (loop [n 1 
         d 2)]
    (if (== 0 (unchecked-remainder-int n d))
      (if (>= d 20) n (recur n (inc d)))
      (recur (inc n) 2))))

(time (euler5))
=> "Elapsed time: 2438.761237 msecs" 
```

即它的速度与您的Java 版本差不多。

关键技巧是：

*   用于`loop/recur`具有两个循环变量的快速迭代
*   用于`unchecked-math`稍快的数学运算（因为我们知道这里没有溢出的危险）
*   使用原始长整数而不是盒装数字
*   避免高阶函数，例如`every?`- 它们比低级操作具有更高的开销

显然，如果您真的关心速度，您会选择更好的算法:-)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-03T02:08:38.963

我注意到的第一件事可能会对 Java 版本的速度产生一些影响，那就是您正在创建一个`ArrayList<Integer>`而不是`int[]`.

Java 从版本 5 开始有一个功能，可以自动在`Integer`和之间进行转换`int`——您正在迭代这个列表，在比较和数学计算中将它们视为`int`类型，这迫使 Java 花费大量周期在两种类型之间进行转换。`ArrayList<Integer>`用 an替换你的`int[]`可能会对性能产生一些影响。

在查看您的时间安排时，我的第一反应是验证所有的结果是否正确。我假设你已经正确地测试了这三个，以确保更快的 Scala 版本确实给你正确的结果。

它似乎与解决它的算法的选择无关，因为这三个策略看起来都一样（我不熟悉 Clojure 或 Scala，所以我可能会遗漏一些细微的差别）。也许 Scala 能够在内部优化这个特定的循环/算法，从而产生更快的结果？

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-03T05:23:09.457

在我非常慢的计算机上，Clojure 代码需要将近 10 分钟，所以我在这里的老忠实用户上运行速度慢了大约 20 倍。

```
user=> (time (smallest-multiple-of-1-to-n 20))
"Elapsed time: 561420.259 msecs"
232792560 
```

您可以通过避免惰性、使用类型提示/原语/未经检查的操作等来使相同的算法与其他算法更具可比性。Clojure 代码为匿名函数装箱原语并为`range`每次迭代创建/实现惰性序列`loop`. _ 这种开销通常可以忽略不计，但在这里它被循环了数亿次。以下非惯用代码提供了 3 倍的加速。

```
(defn smallest-multiple-of-1-to-n [n]
  (loop [c (int n)] 
    (if 
      (loop [x (int 2)]
        (cond (pos? (unchecked-remainder-int c x)) false
              (>= x n) true
              :else (recur (inc x))))
      c (recur (inc c)))))

user=> (time (smallest-multiple-of-1-to-n 20))
"Elapsed time: 171921.80347 msecs"
232792560 
```

您可以继续对此进行修改，并且可能会更接近，但最好通过算法进行思考，并且比从 20 到 2 亿迭代做得更好。

```
(defn gcd [a b]
  (if (zero? b) a (recur b (mod a b))))

(defn lcm 
  ([a b] (* b (quot a (gcd a b))))
  ([a b & r] (reduce lcm (lcm a b) r)))

user=> (time (apply lcm (range 2 21)))
"Elapsed time: 0.268749 msecs"
232792560 
```

因此，即使在我的古老机器上，这也比在您的快速机器上实现您的算法快 1000 倍以上。我注意到也为 Scala 发布了一个 gcd/lcm 折叠解决方案。因此，比较这些类似算法的速度会很有趣。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-03T04:11:25.793

按照你的算法，clojure 比 java 版本慢大约 10 倍。

clojure 版本快一点：46555ms => 23846ms

```
(defn smallest-multiple-of-1-to-n
 [n]
  (let [divisors (range 2 (inc n))]
   (loop [i n]
     (if (loop [d 2]
        (cond (> d n) true
              (not= 0 (mod i d)) false
              :else (recur (inc d))))
     i
     (recur (inc i)))))) 
```

Java 版本快一点：3248ms => 2757ms

```
private static int[] divisors;

private static void initializeDivisors(int ceiling) {
    divisors = new int[ceiling];

    for (Integer i = 1; i <= ceiling; i++)
        divisors[i - 1] = i;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-03T00:47:14.480

首先，如果一个数可以被 4 整除，那么它也可以被 2 整除（4 的因数之一）。

因此，从 1 到 20，您只需要检查其中的一些数字，而不是所有数字。

其次，如果您可以对数字进行质数分解，这只是要求您提供最小公乘数（这是解决此问题的另一种方法）。事实上，你可以用笔和纸来做，因为它只有 1-20。

您正在使用的算法相当幼稚——它没有充分利用问题为您提供的信息。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-03T02:08:24.347

这是scala中更有效的解决方案：

```
def smallestMultipe(n: Int): Int = {
  @scala.annotation.tailrec
  def gcd(x: Int, y: Int): Int = if(x == 0) y else gcd(y%x, x)
  (1 to n).foldLeft(1){ (x,y) => x/gcd(x,y)*y }
} 
```

而且我怀疑为什么您的问题 1 的 scala 版本如此低效。以下是 Scala 中问题 1 的两种可能解决方案：

一个简短的：

```
(1 until 1000) filter (n => n%3 == 0 || n%5 == 0) sum 
```

一个更有效的：

```
(1 until 1000).foldLeft(0){ (r,n) => if(n%3==0||n%5==0) r+n else r } 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-02-04T02:44:06.203

问题不在于装箱、惰性、列表、向量等。问题在于算法。当然，解决的办法是“蛮力”，不过是关于“蛮力”中“蛮力”的比例。

*首先，在欧拉问题 5 中，我们没有被要求检查1 到 n*的整除性：只是 1 到 20。也就是说：第二，解必须是 38 的倍数。第三，必须首先检查素数，并且必须按降序检查所有除数，以便尽快失败。第四，一些除数还保证了其他除数，即如果一个数能被 18 整除，那么它也能被 9、6 和 3 整除。最后，所有数都能被 1 整除。

Clojure 中的这个解决方案在 MacBook Pro i7 上的运行时间可以忽略不计，只需 410 毫秒：

```
;Euler 5 helper
(defn divisible-by-all [n]
  (let [divisors [19 17 13 11 20 18 16 15 14 12]
        maxidx (dec (count divisors))]
  (loop [idx 0]
     (let [result (zero? (mod n (nth divisors idx)))]
       (cond
          (and (= idx maxidx) (true? result)) true
          (false? result) false
          :else (recur (inc idx)))))))

;Euler 5 solution
(defn min-divisible-by-one-to-twenty []
  (loop[ x 38 ] ;this one can be set MUCH MUCH higher...
    (let [result (divisible-by-all x)]
       (if (true? result) x (recur (+ x 38))))))

user=>(time (min-divisible-by-one-to-twenty))
"Elapsed time: 410.06 msecs" 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-02-05T02:40:38.260

我相信这是您可以为该问题和幼稚算法编写的最快的纯 Java 代码。它比 Scala 快。

```
public class Euler5 {
  public static void main(String[] args) {
    int test = 2520;
    int i;
    again: while (true) {
      test++;
      for (i = 20; i >1; i--) {
        if (test % i != 0)
          continue again;
      }
      break;
    }
    System.out.println(test);
  }
} 
```

几个小细节：

1.  我们可以在 2520 开始测试，因为问题提到它是一个值:)
2.  在我看来，我们在范围顶部比在底部失败得更快 - 我的意思是，有多少东西可以被 19 整除而不是 3？
3.  我为 continue 语句使用了标签。这基本上是一种廉价的综合方法来重置 for 循环并增加我们的测试用例。

# javascript - jquery css选择器不起作用

> ID：14668277
> 
> 赞同：-1
> 
> 时间：2013-02-03T00:44:46.537
> 
> 标签：javascript, jquery, css

我正在尝试获取窗口的宽度和高度 + div 的宽度和高度以找到调整后的宽度。我也在尝试用 jquery 绝对定位 div，但我的代码不起作用。我将在下面提供代码。

**CSS：**

```
#inner {
  width: 500px; height: 300px;
  background: #ff0000;
} 
```

**jQuery：**

```
$(document).ready(function() {

  var screenWidth = $(window).width();
  var screenHeight = $(window).height();

  var boxWidth = $("#inner").width();
  var boxHeight = $("#inner").height();

  var adjustedWidth = screenWidth - boxWidth;
  var adjustedHeight = screenHeight - boxHeight;

  $("#inner").css('position', 'absolute');
  $("#inner").css('top', adjustedWidth + 'px');
  $("#inner").css('left', adjustedHeight + 'px');

}); 
```

我在我的 jQuery 中做错了什么？希望我的解释很清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T01:01:19.333

如果你试图在右下角对齐你的 div，那么你混合了 top->adjustedWidth 和 left->adjustedHeight：

```
$("#inner").css('top', adjustedWidth + 'px');
$("#inner").css('left', adjustedHeight + 'px'); 
```

什么时候应该反过来：

```
$("#inner").css('top', adjustedHeight + 'px');
$("#inner").css('left', adjustedWidth + 'px'); 
```

除此之外，您的代码[看起来可以正常工作](http://jsfiddle.net/apKPP/)。

此外，在尝试更改 CSS 宽度或高度时，您不需要添加“px”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T02:26:41.460

无需为此使用 JavaScript。当绝对定位的东西，`left`不是`top`唯一可以使用的东西时；相反，您可以在适当的地方使用`right`和`bottom`。例如，要在右下角放置一些东西，就像你正在做的那样，你可以使用这个：

```
#something {
    position: absolute;
    right: 0;
    bottom: 0;
    width: 300px;
    height: 150px;
    background: red;
} 
```

**[试试看。](http://jsfiddle.net/2EG5Z/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T02:34:08.333

如果您的代码包括获取组件的大小（尤其是页面上有图像），您希望将代码放在`load`处理程序中而不是`ready`处理程序中，因为`ready`在所有图像下载之前执行并且页面大小可能会在此之后发生变化。

还有你的`top`和`left`应该交换的。

```
$(document).on('load', function() {

  var screenWidth = $(window).width();
  var screenHeight = $(window).height();

  var boxWidth = $("#inner").width();
  var boxHeight = $("#inner").height();

  var adjustedWidth = screenWidth - boxWidth;
  var adjustedHeight = screenHeight - boxHeight;

  $("#inner").css('position', 'absolute');
  $("#inner").css('top', adjustedHeight + 'px');
  $("#inner").css('left', adjustedWidth + 'px');

}); 
```

# nsdata - 增加 NSData 中的字节值

> ID：14668278
> 
> 赞同：2
> 
> 时间：2013-02-03T00:45:02.017
> 
> 标签：nsdata, nsmutabledata

我有一个包含随机 ASCII 字节的 NSMutableData。我想将这些字节的值移动一个值（X）。

所以让我们说我有这样的事情：

```
02 00 02 4e 00 
```

我现在想将每个字节增加 0x01 以获得：

```
03 01 03 4f 01 
```

最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T00:57:47.017

使用[mutableBytes](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSMutableData_Class/Reference/NSMutableData.html#//apple_ref/occ/instm/NSMutableData/mutableBytes)获取指向字节的指针，并将它们视为普通的 C 数组。

```
uint8_t originalBytes[] = {0x02, 0x00, 0x02, 0x4e, 0x00};
NSMutableData * myData = [NSMutableData dataWithBytes:originalBytes length:5];

uint8_t * bytePtr = [myData mutableBytes];

for(int i = 0; i < [myData length]; i++) {
    bytePtr[i] += 0x01;
}

NSLog(@"%@", myData); 
```

二进制数据编程指南文章“[使用可变二进制数据](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/BinaryData/Tasks/WorkingMutableData.html#//apple_ref/doc/uid/20002150)”中提供了更多信息。

此外，您所做的不是“移动”，而只是添加 0x01。“移位”通常是指“[位移](http://en.wikipedia.org/wiki/Bitwise_operation#Shifts_in_C.2C_C.2B.2B.2C_C.23)”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T01:12:54.040

像这样的东西：

```
NSString *_chars = @"abcd";
NSMutableData *_data = [NSMutableData dataWithBytes:[_chars UTF8String] length:_chars.length];

NSLog(@"Bef. : %@", _data);    
for (int i = 0; i < _data.length; i++) ((char *)[_data mutableBytes])[i]++;
NSLog(@"Aft. : %@", _data); 
```

* * *

日志显示结果：

```
Bef. : <61626364>
Aft. : <62636465> 
```

# c# - 标题的正则表达式匹配

> ID：14668284
> 
> 赞同：4
> 
> 时间：2013-02-03T00:46:06.917
> 
> 标签：c#, regex

我需要使用 C# 为标题编写正则表达式，这是要求：

1.  标题是必需的（长度> 0）；
2.  最多 256 个字符（长度 <= 256）；
3.  没有字符被禁止，但只有空格是非法的（标题只包含空格是非法的）；
4.  没有前导或尾随空格；

我已经有了这个：

```
^.{1,256}$ 
```

那么我怎样才能满足规则 3 呢？

**编辑：**

1.  更清楚地解释规则 3；
2.  我从马里奥的回答中添加了规则 4。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T00:48:04.403

使用`(?=pattern)`

```
@"^(?=.*\S).{1,256}$" 
```

`(?=pattern)`断言指定的模式在此位置之后立即存在。

因此，正则表达式匹配当且仅当在字符串开头之后，它匹配模式`.*\S`并且如果整个字符串匹配模式`^.{1,256}$`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T00:49:35.447

您需要使用零宽度断言：

```
@"^(?=.*\S).{1,256}$" 
```

`(?=.*\S)`匹配以非空白字符结尾的任何字符序列，但不影响匹配的其余部分。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-03T00:55:08.443

我会完全跳过正则表达式，因为您可以通过两个简单的步骤对字符串清理和验证进行硬编码：

*   用于`String.Trim(null)`删除所有前导/尾随空格。
*   比较剩余字符串的长度。
*   大写第一个字符（如果需要）。

这是可行的，因为仅由空格组成的名称将被修剪为 0 长度。这也避免了使用诸如`" Let's go!"`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T00:48:57.227

您可以使用 [^\s] 匹配除空格以外的任何字符

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-04T03:42:32.000

虽然我自己的答案符合我的问题，但功劳仍应归功于其他人（我要么赞成并选择了正确答案），因为我在他们回答后编辑了我的问题。

======================

我终于想出了一个纯正则表达式解决方案（没有任何额外的步骤）

```
^(\S|\S.{0,254}\S)$ 
```

（虽然我不明白为什么括号`()`很重要）

以下测试用例通过：

```
 [TestMethod]
    public void CheckTitleTest()
    {
        // Empty
        Assert.IsFalse(CheckTitle(@""));

        // A whitespace
        Assert.IsFalse(CheckTitle(@" "));

        // Multiple whitespace only
        // http://msdn.microsoft.com/en-us/library/t809ektx.aspx
        Assert.IsFalse(CheckTitle("  \t \n \u1680"));

        // Leading whitespaces
        Assert.IsFalse(CheckTitle("  \tabc"));

        // Trailing whitespaces
        Assert.IsFalse(CheckTitle("abc\t "));

        // Leading and trailing whitespaces
        Assert.IsFalse(CheckTitle("  \tabc\t "));

        // Too long: 257 character
        Assert.IsFalse(CheckTitle(@"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/*"));

        // A normal title
        Assert.IsTrue(CheckTitle(@"This is a normal title"));
        Assert.IsTrue(CheckTitle(@"This is a normal title."));

        // 256 characters
        Assert.IsTrue(CheckTitle(@"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"));

        // A very simple title
        Assert.IsTrue(CheckTitle(@"A"));
        Assert.IsTrue(CheckTitle(@"!"));
        Assert.IsTrue(CheckTitle(@"\"));
    } 
```

# nonetype - Python 列表 NoneType 错误

> ID：14668285
> 
> 赞同：1
> 
> 时间：2013-02-03T00:46:08.193
> 
> 标签：nonetype

我正在尝试实施的 OpenCourseWare 项目有问题。我正在创建一个刽子手游戏，一切似乎都很好，直到我尝试运行实际功能来玩游戏。

我收到以下错误：

```
Traceback (most recent call last):
  File "<console>", line 1, in <module>
  File "Game of Hangman/hangman.py", line 118, in play_hangman
    print(print_guessed())
  File "Game of Hangman/hangman.py", line 92, in print_guessed
    if letter in letters_guessed == True:
TypeError: argument of type 'NoneType' is not iterable 
```

我似乎无法理解为什么该列表被评估为 NoneType 即使它被声明为空列表。我使用控制台试图找到答案并说类型是 NoneType。有人可以帮我吗？我提供了代码作为参考。

```
# Name:
# Section: 
# 6.189 Project 1: Hangman template
# hangman_template.py

# Import statements: DO NOT delete these! DO NOT write code above this!
from random import randrange
from string import *

# -----------------------------------
# Helper code
# (you don't need to understand this helper code)
# Import hangman words

WORDLIST_FILENAME = "words.txt"

def load_words():
    """
    Returns a list of valid words. Words are strings of lowercase letters.

    Depending on the size of the word list, this function may
    take a while to finish.
    """
    print "Loading word list from file..."
    # inFile: file
    inFile = open(WORDLIST_FILENAME, 'r', 0)
    # line: string
    line = inFile.readline()
    # wordlist: list of strings
    wordlist = split(line)
    print "  ", len(wordlist), "words loaded."
    print 'Enter play_hangman() to play a game of hangman!'
    return wordlist

# actually load the dictionary of words and point to it with 
# the words_dict variable so that it can be accessed from anywhere
# in the program
words_dict = load_words()

# Run get_word() within your program to generate a random secret word
# by using a line like this within your program:
# secret_word = get_word()

def get_word():
    """
    Returns a random word from the word list
    """
    word=words_dict[randrange(0,len(words_dict))]
    return word

# end of helper code
# -----------------------------------

# CONSTANTS
MAX_GUESSES = 6

# GLOBAL VARIABLES 
secret_word = get_word()
letters_guessed = []

# From part 3b:
def word_guessed():
    '''
    Returns True if the player has successfully guessed the word,
    and False otherwise.
    '''
    global secret_word
    global letters_guessed
    wordGuessed = False
    ####### YOUR CODE HERE ######
    for letter in secret_word:
        if letter in letters_guessed:
            wordGuessed = True
        else:
            wordGuessed = False
            break
    return wordGuessed

def print_guessed():
    '''
    Prints out the characters you have guessed in the secret word so far
    '''
    global secret_word
    global letters_guessed
    printedWord = []
    ####### YOUR CODE HERE ######
    for letter in secret_word:
        if letter in letters_guessed:
            printedWord.append(letter)
        else:
            printedWord.append("-")
    return printedWord

def play_hangman():
    # Actually play the hangman game
    global secret_word
    global letters_guessed
    # Put the mistakes_made variable here, since you'll only use it in this function
    mistakes_made = 0

    # Update secret_word. Don't uncomment this line until you get to Step 8.
    secret_word  = get_word()

    ####### YOUR CODE HERE ######
    while mistakes_made < MAX_GUESSES or word_guessed() == False:

        print("WORD:")
        userGuess = raw_input("What is your guess?\n").lower()
        if userGuess in secret_word:
            letters_guessed = letters_guessed.append(userGuess)
        else:
            letters_guessed = letters_guessed.append(userGuess)
            mistakes_made += 1
        print(print_guessed())
    if word_guessed() == False:
        print("Sorry but you've run out of guesses...")
    else:
        print("You've correctly guessed the secret word!")
    print("Secret Word: " + secret_word) 
```

就像免责声明一样，这不是我没有上学的意义上的作业。我只是一个试图重新开始编程并找到一些可以玩的任务的人。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T20:29:38.210

看来我找到了答案。问题似乎与我对 letters_guessed 变量所做的分配有关。

而不是这样做：

```
letters_guessed = letters_guessed.append(userGuess) 
```

我应该这样做：

```
letters_guessed.append(userGuess) 
```

# firefox - Google 广告在 Firefox 和 Windows 8 中不起作用

> ID：14668289
> 
> 赞同：0
> 
> 时间：2013-02-03T00:46:58.850
> 
> 标签：firefox, ads, adsense

在 Windows 8 上时，Google adsense 广告不会在 Firefox 中显示。广告将在 Firefox for XP 中显示，但不会在 Windows 8 中显示。两种操作系统都运行 Firefox 18.0.1。任何解决此问题的见解将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T16:56:00.547

禁用广告的是 Firefox 的 Adblock Plus 插件。

# windows-phone-7 - ServiceStack.Common 对 Windows PHone 的支持

> ID：14668294
> 
> 赞同：1
> 
> 时间：2013-02-03T00:47:32.700
> 
> 标签：windows-phone-7, windows-phone-8, servicestack

我正计划为 Windows Phone 7 开发一个使用 REST 服务的应用程序，并遇到了两个优秀的框架[RestSharp](https://github.com/restsharp/RestSharp "RestSharp")和[ServiceStack](https://github.com/ServiceStack/ServiceStack "服务栈")。我通过 RestSharp 使用 Web 服务没有问题，但无法使用 ServiceStack 这样做，主要是因为 WP 不支持 ServiceStack.Common。任何解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T02:12:35.787

是的，ServiceStack 还没有正式支持 Windows Phone 7。有一些[ServiceStack JSON/JSV/CSV 文本序列化](https://github.com/ServiceStack/ServiceStack.Text/tree/master/src)程序的社区 Windows Phone 项目，但没有包含 ServiceStack 的[C# Service Clients的](https://github.com/ServiceStack/ServiceStack/wiki/C#-client)[ServiceStack.Common](http://nuget.org/packages/ServiceStack.Common)项目。

在 ServiceStack 发布支持的 Windows Phone 7 客户端库之前，最好的办法是使用支持 WP7 的 HTTP + JSON 客户端，例如 RestSharp。

另一种方法是尝试[Windows Phone 构建的 ServiceStack.Text](https://github.com/ServiceStack/ServiceStack.Text/tree/master/src/ServiceStack.Text.WP)并使用它的[WebRequestExtensions](https://github.com/ServiceStack/ServiceStack.Text/blob/master/src/ServiceStack.Text/WebRequestExtensions.cs) ，例如：

```
var json = "http://myhost/myservice/1".GetJsonFromString();
var dto = json.FromJson<MyResponseDto>(); 
```

# ios - 本地化 IOS 按钮标签

> ID：14668299
> 
> 赞同：15
> 
> 时间：2013-02-03T00:48:02.030
> 
> 标签：ios, xcode, localization, storyboard

我使用本地化字符串来本地化 UI 元素。一切正常，除了本地化按钮的标题。

"21.title" = "应该是本地化文本"; //不起作用

我认为这是由按钮状态引起的（...forState:UIControlStateNormal...），标题可以通过视图状态设置。我如何在本地化文件中挑战它？

如何在本地化字符串中定义按钮标题？诀窍是什么？

**注意：我知道如何从源代码中做到这一点，我的问题是关于如何通过本地化字符串文件来做到这一点。所以：我知道如何使用本地化字符串来本地化 UI，按钮除外。**

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2014-04-08T11:05:36.680

```
"21.title" = "It should be the localized text"; //does not work 
```

应该读

```
"21.normalTitle" = "It should be the localized text"; //does work 
```

反而。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-03T02:54:03.503

在 Interface Builder 中，您可以设置 4 个字符串，一个用于“状态配置”下拉列表中的每个状态。

或者，或者，在代码中，您为每个状态设置按钮标题：

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[button setTitle:NSLocalizedString(@"21.title", @"Norm!") forState:UIControlStateNormal];
[button setTitle:NSLocalizedString(@"21.title-highlighted", @"hi btn") forState:UIControlStateHighlighted];
[button setTitle:NSLocalizedString(@"21.title-selected", @"sel btn") forState:UIControlStateSelected];
[button setTitle:NSLocalizedString(@"21.title-disabled", @"dis btn") forState:UIControlStateDisabled]; 
```

编辑：为了清楚起见，您将本地化字符串添加到您的`Localizable.strings`文件中。只要您将其复制到您的应用程序中，您就会得到替换；当然，您可以支持多种语言。 [本地化教程](http://www.raywenderlich.com/2876/how-to-localize-an-iphone-app-tutorial)和[IB 中的本地化](http://useyourloaf.com/blog/2011/05/10/localizing-nib-files-with-xcode-4.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-25T14:38:13.810

就我而言，我已将文件发送出去进行翻译。当他们回来时，出现了一个微妙的错误

```
"0ZD-ku-bT7.title" = “Fechar"; 
```

请注意，他们使用了两个不同的双引号！这会以微妙的方式破坏文件，不会在编译器中失败。

正确的代码必须是

```
"0ZD-ku-bT7.title" = "Fechar"; 
```

# objective-c - 多个 NSTextView 之间的顺序选择

> ID：14668303
> 
> 赞同：7
> 
> 时间：2013-02-03T00:48:13.857
> 
> 标签：objective-c, cocoa, nstextview, nslayoutmanager, nstextcontainer

我有一堆`NSTextView`s 我想分享一个选择。我基本上希望它的行为类似于在网页上选择文本，其中有多个文本视图，但您可以拖动以在其中顺序选择文本。

我发现[这个](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/TextUILayer/Tasks/MultipleViews.html)文档指出可以让多个`NSTextContainer`对象共享一个对象`NSLayoutManager`，从而共享选择。`NSLayoutManager`这是我想要的一半，除了一个只能有一个`NSTextStorage`对象的事实。我希望每个文本视图都有自己的`NSTextStorage`，以便每个文本视图都可以有自己的文本，但我仍然希望能够通过一次拖动在多个文本视图中选择文本。这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-19T06:39:38.773

没有*简单*的方法可以解决这个问题（正如我试图通过提出这个问题来找到的那样）。它涉及您期望的所有鼠标事件处理和文本选择计算，因此我编写了代码并将其开源为[`INDSequentialTextSelectionManager`](https://github.com/indragiek/INDSequentialTextSelectionManager).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T18:45:57.933

为了使这个单独的文本容器工作，您将计算字符串每个部分的绘制大小并将 NSTextView 限制为该大小：

```
 NSLayoutManager * layout = [[NSLayoutManager alloc] init];
    NSString * storedString = @"A\nquick\nBrown\nFox";
    NSTextStorage * storage = [[NSTextStorage alloc] initWithString:storedString];
    [storage addLayoutManager:layout];

    //I assume you have a parent view to add the text views
    NSView * view;

    //Assuming you want to split up into separate view by line break
    NSArray * paragraphs = [storedString componentsSeparatedByString:@"\n"];
    for (NSString * paragraph in paragraphs)
    {
        NSSize paragraphSize = [paragraph sizeWithAttributes:@{}];
        //Create a text container only big enough for the string to be displayed by the text view
        NSTextContainer * paragraphContainer = [[NSTextContainer alloc] initWithContainerSize:paragraphSize];
        [layout addTextContainer:paragraphContainer];

        //Use autolayout or calculate size/placement as you go along
        NSRect lazyRectWithoutSizeOrPlacement = NSMakeRect(0, 0, 0, 0);
        NSTextView * textView = [[NSTextView alloc] initWithFrame:lazyRectWithoutSizeOrPlacement
                                                    textContainer:paragraphContainer];
        [view addSubview:textView];
    } 
```

您可以将委托添加到 NSLayoutManager 以查看您的文本容器使用情况：

```
- (void)layoutManager:(NSLayoutManager *)aLayoutManager
didCompleteLayoutForTextContainer:(NSTextContainer *)aTextContainer
                    atEnd:(BOOL)flag
{
    if (aTextContainer == nil)
    {
        //All text was unable to be displayed in existing containers. A new NSTextContainer is needed.
    }
} 
```

# c# - JavaScript 未在 .NET WebBrowser 控件中执行

> ID：14668307
> 
> 赞同：11
> 
> 时间：2013-02-03T00:48:33.047
> 
> 标签：c#, javascript, .net, webbrowser-control

我的两个朋友测试了我一直在从事的一个项目，该项目依赖于 WebBrowser 控件的使用，并且设法遇到了 WebBrowser 控件无法在包含的网页上执行任何 JavaScript 的恒定场景。

为了缩小范围，我创建了一个仅包含 WebBrowser 控件的新 Windows 窗体项目，并尝试导航到以下页面：http: [//javatester.org/javascript.html](http://javatester.org/javascript.html)

我朋友电脑上的结果如下（点击放大）：

[![控制渲染](../Images/a47408ba269926f1bb4fdea4b72945b6.png)](https://i.stack.imgur.com/Pn4D3.jpg)

如您所见，在尝试调用 JS 特定代码时它不会呈现任何内容，或者如果您在禁用或启用 JS 的 Web 浏览器中查看它，您会看到一些东西。

他导出了包含启用 JavaScript 的设置的注册表项（请参阅[https://gist.github.com/4699943](https://gist.github.com/4699943)），并且每个键中的 1400 的值与我使用的相同设置匹配，并且当我运行程序时我没有问题。

整个测试项目的代码如下：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Shown(object sender, EventArgs e)
        {
            this.webBrowser1.Navigate("http://javatester.org/javascript.html");
        }
    }
} 
```

如果使用此代码创建一个新项目，该代码针对 4.5 框架（在我的机器或他的机器上）它可以工作，但是如果使用 4.0 或更低版本创建一个，则会出现上述结果。我不确定这是巧合还是确实与问题/解决方案有关。

应该注意的是，如果他在 Internet Explorer 中导航到此页面没有问题，它会检测到 JavaScript 已启用，此问题仅存在于此测试应用程序及其所属的主项目中。

任何帮助将不胜感激，我花了整整两个月的时间试图弄清楚这一点，但仍然无法解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-21T09:56:19.213

从我的测试中，带有 .NET 4 的 WebBrowser 报告了一个 IE 7.0 的 Web 浏览器代理字符串。因此，请先检查您的 JavaScript 在 IE7 中是否正常工作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-01-14T22:21:24.030

如果您使用 webbrowser control.Document Text 属性，则不会加载脚本。使用 Navigate 方法非常好。当我从第三方获取 html 时，我需要文档文本属性才能工作。如果我从中创建一个 html 文件并在常规 IE 浏览器中打开它，则相同的 html 内容可以正常工作。网络浏览器控件有问题。

# java - 我应该使用并行数组来自动简化格式化日期吗？

> ID：14668316
> 
> 赞同：2
> 
> 时间：2013-02-03T00:49:54.557
> 
> 标签：java, date-formatting

我是 Java 编程新手。

我想`system.out.println`记录用户输入的日期，并让它知道它是否是“st”、“th”、“rd”和“nd”。因此，如果我输入“13”作为我的出生日期，它会添加“th”以使其成为“13th”。

如何使用所有数字“1”到“31”自动执行此操作？

我应该使用并行数组，并且有一部分是 '1' 到 '31' [0] - [30]，一部分是 [0] - [3] 用于 st,nd,rd,th？并让它们相应地匹配？

如果是这样或不是，我该如何声明它等等？

对不起，写得很糟糕的问题。我很难说出我的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T01:05:13.650

```
public static void main(String[] args) {
        String[] dates = {"","1st","2nd","3rd","4th",...,"31st"};
        int input = 24;
        System.out.println(dates[input]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T01:07:47.727

我宁愿那样做：

```
String getExtension(int day) {

  switch(day) {

    case 1:
    case 21:
    case 31:
    return "st";

    case 2:
    case 22:
    return "nd";

    case 3:
    case 23:
    return "rd";

    default:
    return "th";
  }

}

String formatDay(int day) {
   return day + getExtension(day);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T01:26:55.447

我不认为你需要这样做。关于日期的这种附属物有明确定义的规则。

*   如果日期以 1 结尾且小于 10 或大于 20，则以 'st' 结尾。
*   如果日期以 2 结尾且小于 10 或大于 20，则以 'nd' 结尾。
*   如果日期以 3 结尾且小于 10 或大于 20，则以 'rd' 结尾。
*   所有其他日期以“th”结尾。

这是我设计过度的解决方案。从它那里得到你想要的。

```
public String appendDateEnding(String theDate) {
    if(null != theDate) {
        try {
            return appendDateEnding(Integer.parseInt(theDate));
        } catch (NumberFormatException e) {
            // we'll return null since we don't have a valid date.
        }
    }
    return null;
}

private String appendDateEnding(int theDate) {
    StringBuffer result = new StringBuffer();
    if(32 <= theDate || 0 >= theDate) {
        throw new IllegalArgumentException("Invalid date.");
    } else {
        result.append(theDate);
        int end = theDate % 10;
        if(1 == end && isValidForSuffix(theDate)) {
            result.append("st");
        } else if(2 == end && isValidForSuffix(theDate)) {
            result.append("nd");
        } else if(3 == end && isValidForSuffix(theDate)) {
            result.append("rd");
        } else {
            result.append("th");
        }
    }
    return result.toString();
}

private boolean isValidForSuffix(int theDate) {
    return (10 > theDate || 20 < theDate);
} 
```

如果给定 1 到 31 之间的天数，它会打印什么：

```
1st
2nd
3rd
4th
5th
6th
7th
8th
9th
10th
11th
12th
13th
14th
15th
16th
17th
18th
19th
20th
21st
22nd
23rd
24th
25th
26th
27th
28th
29th
30th
31st 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T01:02:07.947

我会使用 switch 语句

```
 int day;
    // no read in or assign day: 1 - 31

String ext;
// day % 10 (modulo 10) reduces to 0-9
switch (day % 10) {
case 1: ext = "st"; 
  break;
case 2: ext = "nd"; 
  break;
case 3: ext = "rd"; 
  break;
default: ext = "th";
  break;
}
if (day >= 11 && day <==13) ext == "th";
String dayText = "day: " + day + ext; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-03T01:12:00.483

我建议使用 switch 语句，但确保命令它包含 11、12 和 13。

```
switch (day) {
case 2:
case 22:
    suffix = "nd";
    break;
case 3:
case 23:
    suffix = "rd";
    break;
default:
    //Accounts for all other numbers including 1, 11, 12, 13, 21, and 31
    suffix = "st";
    break; //Because I'm a conformist.
} 
```

# ember.js - Ember.js：提交表单后访问绑定到表单的对象

> ID：14668317
> 
> 赞同：0
> 
> 时间：2013-02-03T00:50:09.797
> 
> 标签：ember.js

我有一个注册表单

在我创建新记录的路线中（将包含注册数据）

```
App.SignupRoute = Ember.Route.extend({
  model:function () {
    return App.Fence.createRecord({date:new Date()});}}); 
```

在表单中，我成功检查了记录（围栏）是否绑定到表单元素

现在我想要一个保存按钮并访问控制器方法中的数据

我试过：

```
< a href="#" {{ action "addsignup" this}}>SignUp</a> 
```

和

```
< button type="button" {{action "addsignup" this}}>SignUp</button> 
```

控制器方法被调用，但我无法访问栅栏实例:-(

```
App.SignupController = Ember.ObjectController.extend({

  addsignup:function (fence) {

    console.log(fence.name);         // => undefined
    console.log(this.name);          // => undefined
    console.log(fence.get("name"));  // => undefined
    console.log(this.get("name"));   // => undefined 
```

如何在控制器方法中访问模型数据？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T13:37:39.327

默认情况下，动作会传递视图。和

```
{{action "addsignup"}} 
```

然后您可以访问控制器及其成员

```
addsignup:function () {
    var controller = this.controller;
    var name = controller.name;
} 
```

通过在动作中传递一个对象，您可以在函数定义中定义相应的参数时访问它。

希望这会有所帮助，ph

# mysql - 多行的 MySQL AVG TimeDiff

> ID：14668319
> 
> 赞同：1
> 
> 时间：2013-02-03T00:50:29.343
> 
> 标签：mysql, select

我有一个查询，我需要它从两个单独的表中选择两个不同时间的平均时间差。

这似乎很容易，直到查询的下一部分出现：我必须按照学生进入办公室的原因进行分组。所以现在这个查询需要：

1.  选择原因（why）
2.  计算一个学生因为这个原因进来了多少次 count(why)
3.  然后我需要检查从开始时间到结束时间的 AVG 时间。请记住，我是按原因分组的。这意味着我需要 timediff 来计算属于学生访问原因的所有记录的差异。

我写了这个查询：

```
 SELECT why, 
    count(why), 
    SEC_TO_TIME(AVG(MAX(support.finishtime) - session.signintime)) 
    FROM session 
    LEFT JOIN support  
        ON support.session_id = session.session_id  
    WHERE status = 3  
    GROUP BY why; 
```

但是我收到一个错误：

> ERROR 1111 (HY000): 组函数使用无效

我似乎不明白这个问题。从阅读过去的问题，他们正在考虑使用有？但我不明白在这种情况下如何或什至在哪里添加having子句。

任何帮助将非常感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T17:19:04.637

```
SELECT 
session.why AS Reason, 
COUNT(session.why) AS Count, 
SEC_TO_TIME(AVG(TIMEDIFF(t.fin, session.signintime))) AS Time
FROM session 
LEFT JOIN (SELECT support.session_id, MAX(support.finishtime) AS fin 
FROM support 
GROUP BY support.session_id) AS t 
    ON session.session_id = t.session_id 
WHERE session.status = 3  
GROUP BY session.why 
ORDER BY session.signintime DESC 
```

这完美地完成了工作！我几个小时前才拿到它，我从来没有真正处理过子查询，所以我的教授帮我解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T03:00:18.583

好的，稍微看一下，我想你想要的是一个嵌套查询来获取最大支持记录。

一种方法是：

```
 SELECT why, 
    count(why), 
    SEC_TO_TIME(AVG((select max(finishtime) from 
              support where support.session_id = session.session_id) -
        session.signintime))
    FROM session 
    WHERE status = 3  
    GROUP BY why; 
```

我创建了一个[SQL Fiddle](http://www.sqlfiddle.com/#!2/7533f/2)，因此您可以查看我使用的表结构。

# xcode - 如何让一个方法在xcode中返回一个带有多个参数的浮点数？

> ID：14668325
> 
> 赞同：0
> 
> 时间：2013-02-03T00:51:20.013
> 
> 标签：xcode, methods, parameters, return

我知道有人问过关于这个主题的问题，但它们都略有不同我想要的是一个简单的方法，你传递一个 x 值 ay 值和一个象限值，它返回角度到目前为止我有......

```
-(float)getAngle: (float)x  yvalue:(float)y Quadrant:(float) quadrant{

float angle=0.0;
 if(quadrant==1){

  }

  NSLog(@"%f",x);
 return angle;
} 
```

我现在不关心计算。我只想知道如何正确声明此方法，因为它不会让我命名第一个参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T00:55:08.813

您的代码可以正常工作。假设您有一个类似于您发布的方法：

```
-(float)getAngle: (float)x  yvalue:(float)y Quadrant:(float) quadrant{

    float angle=0.0;
    if(quadrant==1){

    }

    NSLog(@"%f",x);
    return angle;
} 
```

您可以在当前类中调用它，并接收返回值，如下所示：

```
// sample values added
float result = [self getAngle:-1.0 yvalue:0.5 Quadrant:2.0];
NSLog(@"%f",result); 
```

# c++ - 逐个字符地遍历字符串

> ID：14668326
> 
> 赞同：16
> 
> 时间：2013-02-03T00:51:30.217
> 
> 标签：c++

我尝试逐个字符地遍历字符串字符。我试过这样的事情：

```
void print(const string& infix)
{
char &exp = infix.c_str();
while(&exp!='\0')
{
         cout<< &exp++ << endl;
    }
} 
```

所以这个函数调用 print("hello"); 应该返回：

```
h
e
l
l
o 
```

我尝试使用我的代码，但它根本不起作用。顺便说一句，参数是引用而不是指针。谢谢

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-03T01:19:37.070

您的代码需要一个指针，而不是引用，但如果使用 C++11 编译器，您只需要：

```
void print(const std::string& infix)
{
    for(auto c : infix)
        std::cout << c << std::endl;
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-02-03T00:53:35.610

```
for(unsigned int i = 0; i<infix.length(); i++) {
    char c = infix[i]; //this is your character
} 
```

我就是这样做的。不确定这是否太“惯用”。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-03T00:54:45.040

如果您正在使用`std::string`，则确实没有理由这样做。您可以使用迭代器：

```
for (auto i = inflix.begin(); i != inflix.end(); ++i) std::cout << *i << '\n'; 
```

至于您应该使用的原始代码，`char*`而不是`char`您不需要参考。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T00:54:17.533

[std::string::c_str()](http://en.cppreference.com/w/cpp/string/basic_string/c_str)返回`const char*`，你不能`char&`用来持有它。exp 也是指针，你不需要参考：

最好使用迭代器：

```
void print(const string& infix)
{
  for (auto c = infix.begin(); c!=infix.end(); ++c)
  {
    std::cout << *c << "\n";
  }
  std::cout << std::endl;
} 
```

要修复您的原始代码，请尝试：

```
void print(const string& infix)
{
  const char *exp = infix.c_str();
  while(*exp!='\0')
  {
    cout << *exp << endl;
    exp++;
   }
 } 
```

# r - 使用 ggplot2 绘制一组数据

> ID：14668329
> 
> 赞同：2
> 
> 时间：2013-02-03T00:51:58.377
> 
> 标签：r, ggplot2

我旧帖子的新增内容：

如果我似乎期待有人为我做这项工作，我深表歉意！那绝对不是我的本意。

使用 dput，输出给了我以下信息：

```
 structure(list(Reported.Behavior = structure(c(3L, 6L, 2L, 1L, 
8L, 7L, 4L, 5L), .Label = c("Alcohol-marijuana", "Depression/Suicidal Ideation", 
"Homophobic Teasing", "Parent Communication", "Parent Support", 
"Peer Victimization", "Racism", "School climate"), class = "factor"), 
    Heterosexual.Mean = c(0.2, 0.45, 0.63, 0.8, 1.79, 0.61, 1.89, 
    3.31), Heterosexual.SD = c(0.66, 0.75, 0.67, 0.97, 0.49, 
    0.67, 0.95, 0.65), Questioning.Mean = c(0.84, 0.95, 1.07, 
    1.36, 1.63, 1.03, 1.79, 2.83), Questioning.SD = c(1.33, 1.18, 
    0.95, 1.51, 0.65, 0.82, 1.13, 0.93), LGB.Mean = c(0.57, 0.56, 
    0.77, 1, 1.72, 0.82, 1.84, 3.14), LGB.SD = c(1.13, 0.9, 0.82, 
    1.16, 0.56, 0.76, 1.07, 0.8), ANOVA.F.Value = c(375.94, 166.54, 
    176.54, 138.82, 49.13, 193.31, 5.63, 231.73), ANOVA.Effect.Size = c(0.05, 
    0.03, 0.03, 0.02, 0.01, 0.03, 0, 0.03)), .Names = c("Reported.Behavior", 
"Heterosexual.Mean", "Heterosexual.SD", "Questioning.Mean", "Questioning.SD", 
"LGB.Mean", "LGB.SD", "ANOVA.F.Value", "ANOVA.Effect.Size"), class = "data.frame", row.names = c(NA, 
-8L)) 
```

我尝试过各种 ggplot 命令，如下所示：（我的数据集名称 = lgbtq）

ggplot(All.Means, aes(Mean.Values, Homophobic.Teasing, color = Mean.Values)) + geom_bar()

但是，这仅会生成 Homophobic Teasing Means 的图表。我正在尝试找到一种方法将所有行为方式放在同一个图表上（即并排的条形图，按性别进行颜色编码）

我试图通过生成仅包含一种行为的 csv 文件来操纵数据。例如：

```
ggplot(data = Peer.Victimization.Means, aes(x = Mean.Values, y = Peer.Victimization, color = Mean.Values)) + geom_bar(color = "black", fill = "red") 
```

然而，哪个有效，我想找到一种方法来利用整个数据集。

我看过提到“融化”功能的帖子，但还没有成功。：/ 任何建议将不胜感激！

这是我第一次使用“R”，所以请知道我是一个初学者。对于课程作业，我正在使用具有以下列标题的数据集：

报告的行为（包括 8 个不同的行为名称） 异性恋平均值（包括每种行为的值） 质疑平均值（包括每种行为的值） LGB 平均值（包括每种行为的值）

我想使用 ggplot2 来绘制这些数据。如果我可以生成具有以下内容的条形图，那将是理想的：

Y 轴：“平均值” X 轴：“报告的行为”，对于每个报告的行为，我希望有 3 个单独的条，并排（异性平均值、质疑平均值和 LGB 平均值）。然后，如果我可以对这些进行颜色编码，那将是理想的。

因此，总体而言，Y 轴代表平均值，X 轴列出所有报告的行为，每个都有 3 个条形比较 3 种不同的性行为。任何帮助将不胜感激！！！！

杰西

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T20:22:04.153

重新排列数据：

```
library(reshape2)
mdat <- melt(dat[,1:7]) ## Drop ANOVA vars
mdat <- data.frame(mdat,colsplit(mdat$variable,"\\.",c("type","val")))
cdat <- dcast(mdat,Reported.Behavior+type~val) 
```

画图。

```
library(ggplot2)
ggplot(cdat,aes(x=Reported.Behavior,y=Mean,fill=type))+
    geom_bar(stat="identity",position="dodge")+
    ## ugly!
    ## geom_linerange(aes(ymin=Mean-SD,ymax=Mean+SD),
    ##   position=position_dodge(width=0.9))+
    coord_flip() 
```

*   `coord_flip()`很好，因为它使阅读标签更容易。
*   这里有注释掉的代码来添加显示 +/-1 SD 的行——我没有添加它们，因为 SD 太大以至于情节非常难看——你应该考虑一下......
*   条形图很熟悉，但`geom_point()`可能更漂亮（更少的“非数据墨水”*感觉*Tufte）

![在此处输入图像描述](../Images/c829649388bcc928e50704d3065713e7.png)

# jquery - 仅当帖子使用jquery到达窗口中心时如何加载评论

> ID：14668331
> 
> 赞同：1
> 
> 时间：2013-02-03T00:52:00.120
> 
> 标签：jquery, load, scroll

我正在尝试创建与那里相同的“动画”：

[http://letmehaveblog.blogspot.it/?view=classic](http://letmehaveblog.blogspot.it/?view=classic)

仅当帖子到达窗口中心时才会加载帖子的评论。如果我只更改包含评论的 div 的 css 显示或不透明度属性（未修改帖子的高度）但当我使用 slideUp/slideToggle 因为我想模拟负载时变得一团糟，我的代码工作正常通过 ajax 编写的 php 脚本。我正在处理这个 javascript 代码：

```
$(document).ready(function () {
var winWidth, winHeight;

function show_post_content() {

/* Check the location of each desired element */                          
$('.post').each( function(i){    

var top_of_object = $(this).position().top;       
var top_of_window = $(window).scrollTop();                                                                
var bottom_of_object = $(this).position().top + $(this).outerHeight();
var bottom_of_window = $(window).scrollTop() + $(window).height();          

/* If the object is completely visible in the window, fade it in */   
//if( bottom_of_window > bottom_of_object ){  
if( top_of_object < parseInt(winHeight / 2)) {                            

    //$(this).children('.comments').css('display','block');                                                                      
    //$(this).children('.comments').animate({'opacity':'1'},500);  
    //$(this).children('.comments').fadeIn(500);  
    //$(this).children('.comments').animate({'opacity':'1'},500);
    $(this).children('.comments').slideToggle('slow');   

}                                                                     

});      

}    

function hide_post_content() {

  $('.post').each( function(i){

    $(this).children('.comments').slideUp();

  });   

}    

function init() {
  winWidth = $(window).width();
  winHeight = $(window).height();

  hide_post_content();
  show_post_content();  
}

init();

$(window).resize(function () {
  init();
});

/* Every time the window is scrolled ... */
$(window).scroll( function(){       
  show_post_content();      
});     

}); 
```

HTML就是这样一个：

```
<div class="post">Post  
<div class="comments">Comments</div>
</div>
<div class="post">Post  
<div class="comments">Comments</div>
</div>
<div class="post">Post  
<div class="comments">Comments</div>
</div>
... 
```

使用 css: .post { 不透明度: 1;
宽度：600px；最小高度：100px；背景颜色：#ffffff；
显示：块；填充：0px；边距：30px 自动；
边框：1px 实心#000000；}

```
.comments{
  opacity: 1;
  width: 580px;
  height: 50px;
  display: none;
  margin:100px 0 0 0; 
  padding:10px; 
  background-color: #aaaaaa;    
} 
```

我在这里寻找答案，但找不到可以让我走上正确道路的答案。有什么想法或建议吗？非常感谢，埃里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T01:54:50.960

该`slideToggle`函数异步执行其动画。它还改变了后面的帖子元素的位置。因此，在`each`您正在调用的函数中，然后在完成更改其他帖子元素的位置`slideToggle`之前继续进行下一次迭代。`slideToggle`这是一个问题。另一个是滚动事件会在您滚动时触发很多次。比执行所需的次数更多`show_post_content`。

所以这里有一些建议：

1.  作为第一步`show_post_content`，无论滚动事件如何，请确保以您想要的方式工作。您应该`show_post_content`退出该`ready`功能（您必须添加`winHeight = $(window).height();`到开头）。然后您就可以在 Chrome 或 Firefox 中从控制台执行它。在您滚动到页面上的不同位置后执行此操作，并确保它按您期望的方式工作。您可能希望将函数更改为在一个帖子完成后停止，或者仅在动画完成后继续下一个帖子（`slideToggle`允许您在完成时传递一个回调函数）。

2.  限制`scroll`事件。有[这个](http://benalman.com/projects/jquery-throttle-debounce-plugin/)插件，或者您可以在 SO 周围搜索其他选项。更好的是仅`show_post_content`在用户停止滚动时运行。这更难，但你可以从[这里](https://stackoverflow.com/questions/9144560/jquery-scroll-detect-when-user-stops-scrolling)开始。

# c# - 页码文本框

> ID：14668332
> 
> 赞同：1
> 
> 时间：2013-02-03T00:52:06.213
> 
> 标签：c#, asp.net

我刚开始学习 asp.net，我想在我的 gridview 控件中放置一个文本框，让用户输入用户想要去的任何页面，而不是单击 First/Prev/Next/Last 按钮。

在 gridview 控件分页设置模式下，我找不到创建这种功能的选项。有没有办法在 ASP.net 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T01:05:50.763

它称为分页。[这](http://csharp.net-informations.com/datagridview/csharp-datagridview-paging.htm)将向您展示如何实现分页。我知道它不是 ASP.NET 但 C# 代码的方法是相同的。正如他们解释的那样，您需要使用数据适配器来创建查看器将看到的页面。

希望这对你有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T09:58:18.783

启动 Visual Studio -> 文件 -> 新建项目 -> Web -> **ASP.NET 动态数据实体 WebApplication**

在解决方案资源管理器中展开动态数据 -> 内容文件夹

有一个很棒的用户控件，叫做 GridViewPager.ascx：

![在此处输入图像描述](../Images/eea17250a979e6a263df89fee1a72177.png)

将其添加到您的项目中，并将其指定为 GridView 中的 PagerTemplate：

```
<PagerTemplate>
   <asp:GridViewPager runat="server" />
</PagerTemplate> 
```

您可能需要稍微调整用户控件以适用于您的特定项目，但这应该会给您一个良好的开端

# java - Java -- 无法捕获 UnknownHostException

> ID：14668333
> 
> 赞同：-4
> 
> 时间：2013-02-03T00:52:11.573
> 
> 标签：java

```
import java.net.*;
import java.io.*;
import java.util.*;
public class server{
  public static void main(String args[]){
   String hostname = "Unknown";
   InetAddress addr;
   addr = InetAddress.getLocalHost();
   hostname = addr.getHostName();
   do{
      try {
      URL c = new URL("http://mywebsite/admin/users/" + hostname + "/c.txt");
      URL cinfo = new URL("http://mywebsite/admin/users/" + hostname + "/cinfo.txt");
      Scanner c2 = new Scanner(c.openStream());
      Scanner cinfo2 = new Scanner(cinfo.openStream());
      String c3 = c2.nextLine();
      String cinfo3 = cinfo2.nextLine();
      URL del = new URL("http://mywebsite/admin/users/" + hostname + "/manager.php?perform=delete");
      if ("commandline".compareTo(c3) == 0){
         Runtime.getRuntime().exec(cinfo3);
         HttpURLConnection connection = (HttpURLConnection) del.openConnection();
         connection.connect();
         connection.getResponseCode();
         Thread.sleep(10000);
      }
      if ("idle".compareTo(c3) == 0){
         System.out.println("Waiting for a command.");
      }
      if ("print".compareTo(c3) == 0){
         System.out.println(cinfo3);
         HttpURLConnection connection = (HttpURLConnection) del.openConnection();
         connection.connect();
         connection.getResponseCode();
         Thread.sleep(10000);
      }
      }
      catch(IOException e) {
         break;
      }
      catch(InterruptedException e){
         break;
      }
   } while(true);
}
} 
```

以上是我的Java程序。当我尝试编译时，我得到 UnknownHostException。如果我试图捕捉它，它会说它已经被捕捉到了一个错误，然后它说它需要被捕捉到另一个错误。使用我上面的代码，它说它需要被捕获，但没有说它已经被捕获。任何人都可以帮忙吗？请注意，在实际代码中，“mywebsite”实际上是我的实际网站，但出于隐私原因，我将其从上面的代码块中删除。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T00:54:16.030

`InetAddress.getLocalHost()`抛出`UnknownHostException`。

您的 catch 块已经捕获了 的超类`UnknownHostException`，但是该调用在`try`块之外，因此它们无济于事。

# c# - 将 BingSearchContainer C# 类与搜索 API 一起使用

> ID：14668335
> 
> 赞同：3
> 
> 时间：2013-02-03T00:52:25.310
> 
> 标签：c#, bing-api

我创建了一个应用程序，我需要通过它使用 Bing 进行搜索。我安装了 Bing 库，经过一两个小时搜索有关如何使用这个东西的说明后，我终于在 Microsoft 自己的文档中找到了一个示例（太棒了！他们做了这样的东西！）。我的代码如下所示：

```
Uri rootUri = new Uri("https://api.datamarket.azure.com/Bing/SearchWeb/Web/");
BingSearchContainer bingContainer = new BingSearchContainer(rootUri);
bingContainer.Credentials = new NetworkCredential(AppID, AppID);
var SearchQuery = bingContainer.Web("site:" + domain + " inanchor:" + querystring, null, null, null, null, null, null, null);
var SearchResults = SearchQuery.Execute(); 
```

运行应用程序会产生以下异常

```
A first chance exception of type 'System.Data.Services.Client.DataServiceQueryException' occurred in System.Data.Services.Client.dll
An unhandled exception of type 'System.Data.Services.Client.DataServiceQueryException' occurred in System.Data.Services.Client.dll
Additional information: An error occurred while processing this request. 
```

中断发生在`bingContainer.Web(...)` 我正在关注本示例中第 5 页上的示例[的](https://skydrive.live.com/view.aspx?resid=9C9479871FBFA822!112&app=Word&authkey=!ANNnJQREB0kDC04)行上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T18:18:55.367

显然明确地定义了 SearchQuery 和 SearchResults 变量的类型，这样就解决了这个问题：

```
DataServiceQuery<WebResult> SearchQuery = bingContainer.Web("site:" + domain + " inanchor:" + querystring, "en-us", null, null, null, null, null, null);
IEnumerable<WebResult> SearchResults; 
```

# php - 如果留空，则自动填写必填表单字段

> ID：14668341
> 
> 赞同：0
> 
> 时间：2013-02-03T00:53:55.293
> 
> 标签：php, javascript, html, css, forms

当且仅当用户将其留空时，是否可以在表单提交时自动用特定字符串填充所需的表单字段？如果是这样，怎么做？

理想情况下，我想用最少的代码来做这件事，我正在使用 PHP、HTML 和 CSS。

* * *

我添加了 javascript 标签，因为我猜测 js 将是“强制”提交表单所必需的，必填字段为空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T00:58:38.483

这会更新 $_POST 值，但不会更新表单

```
if (empty($_POST['name_of_item'])) {
    $_POST['name_of_item'] = 'default value';    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T01:03:24.933

这应该更新表单而不是 $_POST 值

```
<?php
    $default_value = isset($_POST) && empty($_POST['item_name']) ? 'added_value' : $_POST['item_name'];
?>

<input type="text" name="item_name" value="<?php echo $default_value;?>" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T01:09:27.777

您应该尝试这种 html 经典技术 `<input type="text" value="DefaultValueThatUserWIllSee" />`，这将确保如果用户跳过它，您将获得默认值...:)

# qt - Qt QCalendarWidget QSS 样式

> ID：14668344
> 
> 赞同：2
> 
> 时间：2013-02-03T00:54:00.770
> 
> 标签：qt, qt4, qtstylesheets

我知道不支持`QCalendarWidget` `QSS`样式，但有人知道更改部分颜色的一些变通方法`1`吗？（部分为浅蓝色，部分为白色）`2``QCalendarWidget``1``2`

![在此处输入图像描述](../Images/f1b189276a0e1807fdab4415ae2fc739.png)

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T13:38:04.240

我检查了`QCalendarWidget` [源代码](http://qt.gitorious.org/qt/qt/blobs/4.8/src/gui/widgets/qcalendarwidget.cpp)并找到了解决方案。

`QCalendarWidget`内部有一个模型和一个视图来显示天数。`QCalendarModel`有一个`formatForCell(int, int)`返回`QTextCharFormat`给定单元格的函数。返回格式是合并`QCalendarView`调色板数据的结果，当前日期的格式（星期六和星期日以红色显示）和当前日期的格式，可以使用`QCalendarWidget::setDateTextFormat`函数设置。

实际上一个项目的背景是：

```
format.setBackground(pal.brush(cg, header ? QPalette::AlternateBase : QPalette::Base)); 
```

*   `pal`是 a`QCalendarView`的调色板；
*   `cg`是一个[颜色组](http://doc-snapshot.qt-project.org/4.8/qpalette.html#ColorGroup-enum)；
*   `header`当当前单元格是标题单元格时为真（示例中的第 1 节）

因此，您只需将自定义调色板设置为该内部`QCalendarView`. 在源代码中，我们可以发现该`QCalendarView`对象有一个名称“qt_calendar_calendarview”，我们可以使用它：

```
QCalendarWidget *c = new QCalendarWidget;

QTableView *view = c->findChild<QTableView*>("qt_calendar_calendarview");
if (view)
{
    QPalette pal = view->palette();
    pal.setColor(QPalette::Base, Qt::red);
    pal.setColor(QPalette::AlternateBase, Qt::green);
    view->setPalette(pal);
} 
```

在我的示例中，第 1 部分为红色，第 2 部分为绿色。此外，您可以为调色板的每个[颜色组](http://doc-snapshot.qt-project.org/4.8/qpalette.html#ColorGroup-enum)设置颜色，以获得您喜欢的小部件，当它处于活动状态、非活动状态等时。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-10T07:38:52.680

区域“1”定制：

```
QTextCharFormat format;
format.setForeground(QBrush(Qt::blue));
format.setBackground(QBrush(Qt::red);
ui->calendarWidget->setHeaderTextFormat(format); 
```

区域“2”QSS CSS：

```
QCalendarWidget QAbstractItemView
{
background-color: rgb(192,192,192); /* цвет фона текущего месяца */
selection-background-color: yellow; /* цвет фона выбранного дня */
selection-color: black; /* цвет текста выбранного дня */
} 
```

或者

```
#qt_calendar_calendarview
{
background-color: rgb(192,192,192); /* цвет фона текущего месяца */
selection-background-color: yellow; /* цвет фона выбранного дня */
selection-color: black; /* цвет текста выбранного дня */
} 
```

, where - 来自in`#qt_calendar_calendarview`的对象名称`d->m_view->setObjectName(QLatin1String("qt_calendar_calendarview"));``qcalendarwidget.cpp`

# java - 肥皂消息检索

> ID：14668345
> 
> 赞同：-1
> 
> 时间：2013-02-03T00:54:05.393
> 
> 标签：java, soap, jax-ws, message

我们正在实现一项 JAX-WS Web 服务，该服务需要检索 SOAP 标头元素中的用户名和密码，并将其用于进一步使用/处理。当我们检索用户名/密码时，它将为空。请帮忙。

```
 if (Boolean.FALSE.equals(context.get(MessageContext.MESSAGE_OUTBOUND_PROPERTY))) {      
             try {
                 SOAPMessage sm = context.getMessage();
                 //SOAPEnvelope envelope = context.getMessage().getSOAPPart().getEnvelope();
                 SOAPEnvelope envelope = sm.getSOAPPart().getEnvelope();
                 SOAPHeader sh = envelope.getHeader();

                System.out.println("Message: "+envelope);
                System.out.println("Envelope: "+envelope);
                 System.out.println("Header: "+sh.toString());
                 Iterator it = sh.examineAllHeaderElements();
                 while(it.hasNext()){
                     System.out.println(it.next());
                 }

           String username;
            username = sh.getAttribute("Username");
           // username  = sh.getAttributeValue("Username");
            //String password =  sh.getAttribute("Password");
                 System.out.println("uid:"+username);
                 //System.out.println("pass: "+password);
                context.put("Username", username);
                //context.put("Passsword", password);
                // default scope is HANDLER (i.e., not readable by SEI
                // implementation)
                context.setScope("Username", MessageContext.Scope.APPLICATION); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T13:50:27.607

尝试这个：

```
public boolean handleMessage(SOAPMessageContext context) { 
    try { 
        SOAPMessage message = context.getMessage(); 
        SOAPHeader header = message.getSOAPHeader();             
        if (header != null) { 
            Iterator i = header.getChildElements();
            //Navigate through header elements to get the username and password
        } 
    } catch (Exception e) { 
        //Handle exception 
    } 
    return true; 
} 
```

**也可以看看：**

*   [在 JAX-WS SOAPHandler 中使用标头](http://www.intertech.com/Blog/Post/Working-with-Headers-in-JAX-WS-SOAPHandlers.aspx)

# routes - 如何删除无关路由？

> ID：14668347
> 
> 赞同：0
> 
> 时间：2013-02-03T00:54:13.727
> 
> 标签：routes, ruby-on-rails-3.2

我运行`rake routes`并发现了很多不在我的 routes.rb 文件中的路由：

```
 home_index GET    /home(.:format)                              home#index
                     POST   /home(.:format)                              home#create
            new_home GET    /home/new(.:format)                          home#new
           edit_home GET    /home/:id/edit(.:format)                     home#edit
                home GET    /home/:id(.:format)                          home#show
                     PUT    /home/:id(.:format)                          home#update
                     DELETE /home/:id(.:format)                          home#destroy 
```

我手动删除了在生成脚手架时创建的文件，但不知道如何完全清理该测试的混乱。

在我的 routes.rb 文件中，我有：

```
 # define the root
  root :to => "home#about"

  # define all the possible routes from the home controller
  resources :home do
    get "about"
    get "create_subscription"
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T01:18:09.317

Rails 为任何用 'resources' 声明的东西创建了很多默认路由。你可以通过在你的路由文件中使用 ':only =>' 来解决这个问题。[请参阅http://guides.rubyonrails.org/routing.html#resources-on-the-web](http://guides.rubyonrails.org/routing.html#resources-on-the-web)的第 2.2 和 4.6 节。

# python - Python 随机 URL 选择

> ID：14668348
> 
> 赞同：1
> 
> 时间：2013-02-03T00:54:13.750
> 
> 标签：python

我正在尝试使用选择从此列表中选择一个随机 URL，但它不起作用。这是我的代码：

```
import urllib, urllib2, sys
num = sys.argv[1]
print 'Started'
phones = [
'http://1.1.1.6/index.htm,'
'http://1.1.1.5/index.htm,'
'http://1.1.1.4/index.htm,'
'http://1.1.1.3/index.htm,'
'http://1.1.1.2/index.htm,'
'http://1.1.1.1/index.htm'
]
from random import choice
data = urllib.urlencode({"NUMBER":num, "DIAL":"Dial", "active_line":1})
while 1:
    for phone in phones:

                         urllib2.urlopen(choice(phone),data) # make call
                         urllib2.urlopen(choice(phone)+"?dialeddel=0") # clear
logs 
```

这是我得到的错误

```
File "p.py", line 21, in ?
    urllib2.urlopen(choice(phone),data) # make call
  File "/usr/lib64/python2.4/urllib2.py", line 130, in urlopen
    return _opener.open(url, data)
  File "/usr/lib64/python2.4/urllib2.py", line 350, in open
    protocol = req.get_type()
  File "/usr/lib64/python2.4/urllib2.py", line 233, in get_type
    raise ValueError, "unknown url type: %s" % self.__original
ValueError: unknown url type: 5 
```

任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T01:01:15.343

你的逗号在你的字符串里面。结果，您的电话变量是单个大字符串的列表。您的随机选择是为您提供该字符串中的单个字符。将其更改为：

```
phones = [
    'http://1.1.1.6/index.htm',
    'http://1.1.1.5/index.htm',
    'http://1.1.1.4/index.htm',
    'http://1.1.1.3/index.htm',
    'http://1.1.1.2/index.htm',
    'http://1.1.1.1/index.htm',
] 
```

此外，您不应遍历电话，而只需使用`random.choice(phones)`.

此外，您正在为两个 URL 调用选择不同的随机电话，我猜这不是您想要的。这是一个完整的重构代码。

```
import urllib, urllib2, sys, random

phones = [
    'http://1.1.1.6/index.htm',
    'http://1.1.1.5/index.htm',
    'http://1.1.1.4/index.htm',
    'http://1.1.1.3/index.htm',
    'http://1.1.1.2/index.htm',
    'http://1.1.1.1/index.htm',
]

num = sys.argv[1]
data = urllib.urlencode({"NUMBER": num, "DIAL": "Dial", "active_line": 1})
while 1:
    phone = random.choice(phones)
    urllib2.urlopen(phone, data) # make call
    urllib2.urlopen(phone + "?dialeddel=0") # clear logs 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T01:06:59.887

您可以尝试获取随机索引

```
import random
phones = [
'http://1.1.1.6/index.htm',
'http://1.1.1.5/index.htm',
'http://1.1.1.4/index.htm',
'http://1.1.1.3/index.htm',
'http://1.1.1.2/index.htm',
'http://1.1.1.1/index.htm',
]

index random.randrange(0, len(phones)-1)
phones[index] 
```

# mysql - 将旧的 php 项目从 mysql 更新到 mysqli 是否可取？

> ID：14668352
> 
> 赞同：0
> 
> 时间：2013-02-02T23:24:20.290
> 
> 标签：mysql, php, mysqli

[我在这里](http://www.php.net/manual/en/mysqli.overview.php)读到不再推荐使用旧的 mysql 函数。但是，努力更新已经完成并正在运行的项目中的代码是否有任何用处，因此只使用了 mysqli 功能？

会有什么好处？
哪些安全问题会得到加强？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T08:04:34.640

如果您在当前项目中拥有安全性，那么它不会被增强。
但是，混淆安全措施是 PHP 用户非常普遍的习惯，因此，您必须仔细检查。比如说，如果您使用自制版本的魔术引号，通过转义所有输入参数 - 您处于危险之中。尽管更改了驱动程序，但您仍需要审核安全性。
不过，您可以在不迁移到 mysqli 的情况下实现它们。

至于好处 - 与重写的所有痛苦相比，没有任何好处。

如果你仍然有重写的心情，我有一个建议：
不要只是从一个原始 API 重写到另一个，我建议你采用一些数据库抽象库，将原始 API 调用从你的所有代码移动到一个紧凑的地方。
它不仅会使您的代码大大缩短，而且将来也会有所帮助，当有人一时兴起反过来弃用 mysqli 时——您将只需要重写类的方法，而不是所有代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T00:58:10.547

您将从升级到 PHP mysqli 扩展获得的主要好处明确列在该页面上：

> mysqli 扩展有很多好处，对 mysql 扩展的主要增强是：
> 
> *   面向对象的接口
> *   支持准备好的报表
> *   支持多个语句
> *   交易支持
> *   增强的调试功能
> *   嵌入式服务器支持

由于恶意个人可能会在较旧的未打补丁的服务器上使用这些安全问题，因此通常不会在公共论坛上讨论安全增强功能。可以说新代码总是有改进，尤其是一个叫做*MySQL* ***改进*** *扩展*的驱动程序。

# parse-platform - Parse.User.save() 不适用于 Facebook API

> ID：14668357
> 
> 赞同：1
> 
> 时间：2013-02-03T00:55:07.710
> 
> 标签：parse-platform

我正在使用 Facebook SDK 对用户进行身份验证，并在身份验证后尝试将用户的电子邮件保存到记录中。但是，我在保存调用时不断收到错误消息。

有问题的代码：

```
Parse.FacebookUtils.logIn({
    access_token: authResponse.access_token,
    expiration_date: expire_date.toISOString(),
    id: response.id
    },
      {
       success: function(user) {
               console.log("success!");
               user.set({"email":response.email});
               user.save();
               window.App.navigate("#myplaces", {trigger:true});
              },
... 
```

该 user.save() 调用返回`error occurred: http://www.parsecdn.com/js/parse-1.1.14.min.js:1: TypeError: 'undefined' is not an object`.

根据文档，我必须在身份验证调用（“.logIn”等）中执行保存（），所以我想知道这是否仍然适用于 Parse.FacebookUtils.logIn。似乎应该如此。

关于为什么这不起作用的想法？理想的行为是让用户登录，从 FB 响应中检索信息，然后将其保存回 Parse 上的用户记录。

谢谢！

贾斯汀

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T22:57:08.747

对此不确定，但我在 Cloud Code 中遇到了同样的问题，并且在调用 save(...) 时使用了成功/错误回调：

```
user.save(null, {
  success: function(){
    // Code
  },
  error: function(){
    // Code
  }
}); 
```

另请参阅：[https ://parse.com/questions/saving-a-relation-on-the-current-user](https://parse.com/questions/saving-a-relation-on-the-current-user)

# ruby-on-rails - 路由嵌套资源有一个关系？

> ID：14668361
> 
> 赞同：0
> 
> 时间：2013-02-03T00:55:19.993
> 
> 标签：ruby-on-rails

每个项目可以有一个页面：

```
resources :project do
    resource :page
  end

  class Project < ActiveRecord::Base
    has_one :page
  end

  class Page < ActiveRecord::Base
    belongs_to :project
  end

  def new
    @project = Project.find(params[:project_id])
    @page = @project.build_page
      respond_to do |format|
        format.html
      end
    end

    def create
      @project = Project.find(params[:project_id])
      @page = @project.build_page(params[:page_id])

      respond_to do |format|
        if @page.save
          format.html { redirect_to @page, :notice => 'Page was successfully created.' }
        else
          format.html { render action: "new" }
        end
      end
    end 
```

但是当我去保存一个页面时，我不仅得到一个路由错误，而且它实际上并没有保存到数据库中。

```
Routing Error

No route matches [POST] "/projects/2/pages" 
```

我的表单操作如下所示：

```
<%= form_for([@job, @page]) do |f| %> 
```

有谁知道发生了什么？我从其他 SO 帖子中将所有这些拼凑在一起，但是我在这里或那里更改的行越多，我觉得我离可行的解决方案越来越远。例如，如果我将表单操作更改为：

```
<%= form_for @page, url: job_page_path(@job) do |f| %> 
```

一切都神奇地起作用，但是编辑操作仍然被破坏。我在屠杀什么基本概念？

谢谢！ - 标记

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T03:13:33.310

you have a typo:

```
 resource :page 
```

should be

```
 resources :page 
```

(notice the s)

`resource` (singular) is actually quite a different method that builds a different set of routes. See [the docs](http://apidock.com/rails/ActionDispatch/Routing/Mapper/Resources/resource) for more info.

**UPDATE / ERRATUM**

sorry, i've read your question too fast. you should take a look at [Ruby on rails: singular resource and form_for](https://stackoverflow.com/questions/3736759/ruby-on-rails-singular-resource-and-form-for) - it seems that `form_for` does not know how to properly handle singular resources.

Someone here on SO suggests a quick fix for this : [nested form_for singular resource](https://stackoverflow.com/questions/2261827/nested-form-for-singular-resource)

# php - PHP - 如何加载新闻文章？

> ID：14668363
> 
> 赞同：0
> 
> 时间：2013-02-03T00:55:25.163
> 
> 标签：php, algorithm, sorting, dynamic

我是 php 的新手，如果这是一个蹩脚的问题，我很抱歉，但我真的很想知道如何解决这个我无法摆脱的问题。

在每个动态网站上都有新闻文章和其他类型的用户生成的功能，我们称之为盒装内容。如果您浏览该页面，您可以看到在页面底部**显示了指定数量的文章，**并且有**页码**或**箭头可用于显示较旧的帖子**。

我会对在 php.ini 中制作类似的东西的过程感兴趣。我不是在寻找现成的代码，因为我知道每个站点都是独一无二的，但我想学习**算法**。我正在寻找解决这个问题的**逻辑结构。**

我的意思是，例如，我想设置**页面上显示**的新闻文章（盒装内容）的**最大数量**。我想我可以用循环来做到这一点。对于单个页面来说这并不难，但是如果有大约 300 篇文章并且**我想在第一页上显示 10 篇最新的文章，那么**如果用户点击第二页/下一个箭头，我该如何解决它会加载**其他 10篇****较旧的文章等等**。

 *******我的理论是，如果我点击第 2 个页面链接，它会发布一个 php 代码，该代码会更改我们在文章加载表单中使用的 mysql 查询中使用的变量，因此它会从不同的起始 id 加载文章/盒装内容（即如果我们点击 2\. page 链接，则不是 0 而是 10；如果我们点击 3\. page 链接，则为 20)。循环开始并加载以下（以前的）10 篇文章。*

我知道在数据库中获取文章 id 时我应该向后计算，因为最新的文章总是具有最高的 id，但为了解释，我认为上面的例子更容易理解，我可以向你展示我想做的事情。

我的理论很有可能是完全错误的，但到目前为止我想分享我的想法。

抱歉，如果这是一个不称职的问题，我将不胜感激有关此问题的任何信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T01:01:15.900

这样做的方法是利用 MySQL[限制子句](http://dev.mysql.com/doc/refman/5.5/en/select.html)和 2 个参数，即要检索的开始行数和最大行数。在您的示例中，它将是`limit *page_number* * 10, 10`. 或者，您可以在[PHP](http://php.net)中实现相同的目标，但我建议保留 SQL 中操作数据的繁重工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T00:58:54.613

mysql_query("SELECT * FROM myAritcleTableName ORDER BY primaryKeyTableName DESC"); // php代码******

# node.js - Socket.io 与 AJAX 用例

> ID：14668365
> 
> 赞同：3
> 
> 时间：2013-02-03T00:55:53.187
> 
> 标签：node.js, xmlhttprequest, socket.io, express

**背景：**我正在使用 NodeJS + Express 构建一个 Web 应用程序。客户端和服务器之间的大部分通信都是 REST（GET 和 POST）调用。我通常会使用[https://developers.google.com/appengine/articles/rpc](https://developers.google.com/appengine/articles/rpc)中提到的 AJAX XMLHttpRequest 。而且我似乎不明白如何让我的 RESTful 服务也用于 Socket.io。

我的问题是

*   我应该在哪些场景下使用 Socket.io 而不是 AJAX RPC？
*   有没有一种直接的方法可以让它们一起工作。至少对于 Expressjs 风格的 REST。
*   在非实时 Web 应用程序上使用 socket.io（如果使用 websockets -- TCP 层）是否有真正的好处。就像一个 tinyurl 站点（用户发布查询和服务器响应并忘记的地方）。

我也在想一个棘手但无稽之谈的想法。如果我对来自客户端的请求使用 RESTful 并从服务器端关闭连接并执行`socket.emit()`.

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T01:11:36.117

您的主要问题是 WebSocket 不像 HTTP 那样面向请求/响应。您提到 REST 和 HTTP 可以互换，请记住，REST 是一种设计和建模 HTTP 路由的方法。

您的问题， 1\. 当您不需要请求/响应格式时，Socket.io 将是一个很好的方案。例如，如果您正在构建一个多人游戏，在该游戏中，谁可以单击更多按钮就获胜，您将向服务器发送每个用户的每次点击，而不需要服务器返回它注册每次点击的响应。只要 WebSocket 连接打开，您就可以假定消息正在发送到服务器。另一个用例是当您需要服务器偶尔联系客户端时。分析页面将是 WebSockets 的一个很好的用例，因为对于数据何时需要在客户端没有统一的模式，它可能随时发生。

1.  WebSocket 连接是一个 HTTP GET 请求，带有一个特殊的标头，请求服务器到`upgrade`它的 WebSocket 连接。区分 WebSocket 连接上的不同事件和消息取决于您的应用程序逻辑，并且可能与 REST 样式的 URI 和方法不匹配（否则，您在某种意义上是复制 HTTP 请求/回复）。

2.  不。

不知道你在最后一点是什么意思。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T03:21:58.370

我将更多地解释您何时想要使用 Socket.IO，并将深入的解释留给 Tj。

通常，当性能和/或延迟是主要问题并且您的站点涉及用户经常轮询数据时，您会选择 Socket.IO。AJAX 或长轮询更容易实现，但是在高负载情况下可能会出现严重的性能问题。高负载，我的意思是像 Facebook。想象一下数百万人加载他们的提要，每分钟每个用户都在向服务器请求新数据。这可能需要一些严肃的硬件和软件才能使其正常工作。使用 Socket.IO，每个用户都可以连接并无限期地等待来自服务器的新数据到达，从而大大减少整体服务器流量。

此外，如果您有一个实时应用程序，Socket.IO 将允许更好的用户体验，同时保持合理的服务器负载。一个常见的例子是聊天室。您真的不希望不断地轮询服务器以获取新消息。服务器在收到新消息时广播它们会好得多。尽管您可以使用长轮询来做到这一点，但它在服务器资源方面可能非常昂贵。

# c# - 标签的正则表达式匹配

> ID：14668366
> 
> 赞同：2
> 
> 时间：2013-02-03T00:55:58.940
> 
> 标签：c#, regex, tags

我需要使用 C# 为标签编写正则表达式，这是要求：

1.  标签是可选的；
2.  最多 9 个标签；
3.  没有重复的标签；
4.  每个标签最多 30 个字符；
5.  每个标签应该只包含合理的字符（如何定义？，我现在使用`[\w-]`）；
6.  标签用分隔符分隔`,`（逗号后有或没有一个空格是可选的）；
7.  结尾`,`（有或没有一个空格）也是合法的。

我已经有了这个：

```
^(|[\w-]{1,30}(,\s?[\w-]{1,30}){0,8}(,\s?)?)$ 
```

我发现很难满足所有规则。尤其是规则 3。

**编辑：**

1.  更新了规则 5、规则 6；
2.  适用规则 7。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T05:11:54.110

供您参考，我放弃了检查重复标签的正则表达式（规则 3）。我仍在将正则表达式用于其他规则。

```
 public static bool CheckTags(string tags)
    {
        if (!Regex.IsMatch(tags, @"^(|[\w-]{1,30}(,\s?[\w-]{1,30}){0,8}(,\s?)?)$"))
            return false;

        // Step 1: Check duplicated tags
        // Step 1.1: Remove the whitespace first
        tags = Regex.Replace(tags, @"\s+", @"");
        string[] tagsArray = tags.Split(',');

        // Step 1.2: Check if duplicated items exist
        if (tagsArray.Distinct().Count() != tagsArray.Length)
            return false;

        return true;
    } 
```

通过了以下测试用例：

```
 [TestMethod]
    public void CheckTagsTest()
    {
        // Whitespaces and commas only
        Assert.IsFalse(CheckTags("  \t \n \u1680"));
        Assert.IsFalse(CheckTags(" , , , "));
        Assert.IsFalse(CheckTags(",,,"));
        Assert.IsFalse(CheckTags(",, ,"));

        // 10 tags
        Assert.IsFalse(CheckTags(@"tag0,tag1,tag2,tag3,tag4,tag5,tag6,tag7,tag8,tag9"));

        // Duplicated tags
        Assert.IsFalse(CheckTags(@"tag0,tag0"));

        // A tag contains more than 30 characters
        Assert.IsFalse(CheckTags(@"abcdefghijklmnopqrstuvwxyz0123*"));

        // A tag contains invalid characters
        Assert.IsFalse(CheckTags(@"tag!"));
        Assert.IsFalse(CheckTags(@"tag*"));

        // Tag separator contains more than one whitespaces
        Assert.IsFalse(CheckTags(@"tag1, tag2,  tag3"));

        // Normal tags
        Assert.IsTrue(CheckTags(@"tag1, tag2, tag3"));
        Assert.IsTrue(CheckTags(@"tag1,tag2, tag3"));
        Assert.IsTrue(CheckTags("tag1,tag2,\ttag3, tag4"));

        // Ending tag separator is allowed
        Assert.IsTrue(CheckTags("tag1,tag2,\ttag3, tag4,"));
        Assert.IsTrue(CheckTags("tag1,tag2,\ttag3, tag4, "));

        // A tag contains 30 characters
        Assert.IsTrue(CheckTags(@"abcdefghijklmnopqrstuvwxyz0123"));

        // A tag contains '-'
        Assert.IsTrue(CheckTags(@"T-shirt"));
        Assert.IsTrue(CheckTags(@"-"));

        // A tag contains '_'
        Assert.IsTrue(CheckTags(@"T_shirt"));
        Assert.IsTrue(CheckTags(@"_"));

        // A tag contains chinese characters
        Assert.IsTrue(CheckTags("\u4E2D"));
    } 
```

功劳仍归 Cedric Bignon。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T01:20:18.067

不使用正则表达式：

```
public static bool TryGetTags(string tagsInput, out string[] tags)
{
    Regex regex = new Regex(@"^[\w_-]+$");

    tags = tagsInput.Split(',')  // Rule 6
                    .Select(tag => tag.Trim())
                    .ToArray();

    if (tags.Last() == "")
        tags = tags.Take(tags.Length - 1).ToArray();  // Rule 7

    if (tags.Any(tag => tag == ""))  // (no empty tag allowed except last one)
        return false;

    if (tags.Length > 9)
        return false;  // Rule 2

    if (tags.Any(tag => tag.Length > 30))
        return false;  // Rule 4

    if (tags.Distinct().Count() != tags.Length)
        return false;  // Rule 3

    if (tags.Any(tag => !regex.IsMatch(tag)))
        return false;  // Rule 5

    return true;
} 
```

# spring - Java EE 服务器中的 Spring Batch

> ID：14668367
> 
> 赞同：3
> 
> 时间：2013-02-03T00:56:17.297
> 
> 标签：spring, jakarta-ee, spring-batch

您能否在 Java EE 服务器（例如 WebLogic）中运行 Spring Batch，比如说作为 Web 应用程序？Spring Batch 在 Java EE 服务器内创建更多线程（用于多线程步骤和并行步骤）是否有任何问题？框架创建的线程是否违反 Java EE 规范？

我认为这没关系，人们在阅读以下链接后正在这样做

[http://static.springsource.org/spring-batch/reference/html-single/index.html#runningJobsFromWebContainer](http://static.springsource.org/spring-batch/reference/html-single/index.html#runningJobsFromWebContainer)

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-08-11T12:11:09.513

这是一个老问题，但我毕竟会添加一个答案。
**是的，可能会有一些问题。**我在 WebSphere 服务器上遇到过这样的问题。
根据他们的文档：[http ://www-01.ibm.com/support/docview.wss?uid=swg21246676](http://www-01.ibm.com/support/docview.wss?uid=swg21246676)

> 根据 J2EE 规范，不支持使用诸如“newThread()”之类的 Java™ 调用来生成新线程。这个衍生的线程不继承 J2EE 上下文。建议改为使用异步 bean 或 Commonj WorkManager 线程。这些线程具有适当的 J2EE 上下文并支持间接 JNDI 查找。

Spring批处理使用创建它自己的线程`new Thread`，并且这些线程不继承J2EE上下文。
在我的特定情况下，Spring Batch 作业之一通过 https 使用了一些 REST 服务，结果证明 Spring Batch 产生的线程看不到 WebSphere 服务器中安装的 https 证书，从而导致证书错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T07:00:57.610

这是一种常见的做法。Spring Batch In Action Chapter 4.4 一书讨论了完全相同的场景，从 Web 容器启动批处理作业。批处理作业应在具有 N 个线程的线程池中运行。池中的线程数应根据性能负载测试的吞吐量结果来确定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T09:26:58.723

我认为这里没有问题。

Spring Batch（如 Quartz Scheduler）作为 Web 应用程序运行，它不受禁止创建线程的约束，它仅适用于 EJB 组件（不适用于 Servlet）。

因此，只要您不超过服务器容量限制，Spring Batch 可以在任何 EE 应用程序中运行。

# java - 使用 java 的 PircBot 需要帮助创建中继机器人？

> ID：14668382
> 
> 赞同：0
> 
> 时间：2013-02-03T00:58:48.183
> 
> 标签：java, irc

我想帮助创建一个使用 PircBot 的中继机器人。我希望它为每条消息发送一条消息到带有该消息的通道。我希望拥有这个多网络。我做了一个命令

```
if (split[0].equalsIgnoreCase(commandPrefix + "addnet")) {
    // sendRawLine("QUIT : joining " + split[1]);
    BrookieBot bot = new BrookieBot();
    bot.setVerbose(true);
    addnet = addnet + " " + split[1];
    try {
        bot.connect(split[1]);
        sendMessage("nickserv", "identify pass");
        bot.joinChannel("#brookies-use-of-bot");

    } catch (NickAlreadyInUseException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IrcException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    bot = new BrookieBot();
    quit = 6;

    this.joinChannel("#brookies-use-of-bot");
} 
```

这就是我让它连接到多个网络的方式，但我希望它能够协调网络并在每次接收到该通道的消息时发送一条消息，无论是哪个网络。让消息采用这种格式：`[<net>] [<sender>] [<message>]`. 谢谢你的帮助！我有这个版本：[http ://www.jibble.org/pircbot.php](http://www.jibble.org/pircbot.php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T03:29:31.687

1) PircBot isn't good for multi networks. Also, it has several design problems. I would recommend PircBotX.

2) If you really have to use PircBot:

Create one PircBot object per connection.
That will create one thread per PircBot.
Then, create a bus which will distribute the messages amongst PircBot instances.
Be careful with synchronization.

For an example on how to send messages outside PircBot object, see [JawaBot](http://code.google.com/p/jawabot/), which is based on it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T03:20:41.163

我以前做过一个这样的中继机器人。让我们讨论一下你需要什么。

当机器人在要中继的通道中接收到消息时，将使用机器人数组根据服务器和通道组合将消息发送到它们各自的通道，前提是：

1.  循环中选择的频道不是当前频道
2.  该频道在待同步频道列表中
3.  发件人不是机器人名称的一部分，以防止无限循环

退出、部分、加入和其他任何你想要的东西也是如此。

# google-maps-api-3 - 使用 Google API v3 - Administrative_area_level_2 标记

> ID：14668384
> 
> 赞同：0
> 
> 时间：2013-02-03T00:59:20.297
> 
> 标签：google-maps-api-3, google-api

我正在使用 HTML 来显示一个包含许多点/标记的地图区域。

我使用此功能“平移”/移动地图以查看特定地点（我网页一侧的地点列表）。

```
 function animate(lati,long) {
     var latLng = new google.maps.LatLng(lati, long); //Makes a latlng
     map.panTo(latLng); //Make map global
    } 
```

QUERY :- 我在这个网站上找到了一个名为“administrative_area_level_2”的谷歌标签

[https://developers.google.com/maps/documentation/geocoding/](https://developers.google.com/maps/documentation/geocoding/)

根据我收集到的信息 - 此标签告诉 Google 地图/API 服务显示 COUNTY 区域/边界（至少在美国和其他国家/地区）。

然而，当查看 maps.google.com 并找到一个美国县时 - HTML 源代码是如此混乱/混乱。

有没有人使用过这个 Administrative_area_level_2 标签来显示县界？& 有没有关于如何使用它的教程/示例？

还是这个标签完全不同？

（我的一些标记是县 - 但其他是城镇/城市）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T14:04:17.453

*根据我收集到的信息 - 此标签告诉 Google 地图/API 服务显示 COUNTY 区域/边界（至少在美国和其他国家/地区）*

这个“标签”告诉谷歌地图在请求中使用时，响应应该被过滤到这个组件。

在响应中返回时，它会告诉您组件的类型。

这个“标签”不会对地图的绘制产生任何影响，目前还没有实现自动绘制任何边框的选项。

# vba - 需要将 PowerPoint 中的形状位置设置为所有幻灯片中的相同值

> ID：14668390
> 
> 赞同：1
> 
> 时间：2013-02-03T01:00:33.093
> 
> 标签：vba, powerpoint, powerpoint-2010

我有几十个 PowerPoint 节目，每个节目都包含几十张幻灯片。它们非常基本，因为每张幻灯片上只有一个形状，并且在形状上或幻灯片之间没有使用动画。问题是创建它们的人并没有真正注意从一张幻灯片到另一张幻灯片的形状的垂直位置，因此从一张幻灯片转到另一张幻灯片时非常明显。

我希望能够为每张幻灯片上的每个形状快速将垂直位置设置为相同的值。水平位置很好。我一直在手动完成它们，但是有很多幻灯片和幻灯片要浏览，我宁愿不必这样做，因为它非常耗时。

我在这个网站和谷歌上做了一些搜索，但还没有找到任何东西。如果它需要 VBA 代码，那也没关系。

我正在使用 PowerPoint 2010。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T04:43:02.603

作为一个起点（总空气代码，请注意）：

```
Sub LineEmUpDano()
  Dim oSl as Slide
  Dim sngTop as Single

  ' Pick up the top position of the first shape
  ' on the first slide:
  SngTop = ActivePresentation.Slides(1).Shapes(1).Top

  ' Apply the top position to each slide in the pres
  For Each oSl in ActivePresentation.Slides
    oSl.Shapes(1).Top = sngTop
    ' you could instead use
    ' oSl.Shapes(1).Top = 42 ' or whatever value you like
    ' Values are in points, 72 points to the inch
  Next  ' slide
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T01:54:43.010

使用上面史蒂夫的建议作为起点，然后阅读一些教程，我能够想出一个工作脚本：

```
Sub UniformHeight()
    Dim SlideToCheck As Slide
    Dim ShapeIndex As Integer

    For Each SlideToCheck In ActivePresentation.Slides
        For ShapeIndex = SlideToCheck.Shapes.Count To 1 Step -1
            SlideToCheck.Shapes(ShapeIndex).Top = 36
        Next
    Next
End Sub 
```

# angularjs - 在angularjs中拥有模型和循环形式的惯用方式

> ID：14668391
> 
> 赞同：0
> 
> 时间：2013-02-03T01:00:53.187
> 
> 标签：angularjs

如果我在 AngularJS 中为博客构建索引页面，并带有如下评论：

```
<li ng-repeat="post in posts">
    <h2>{{post.title}}
    <p>{{post.description}}</p>
    <h3>Leave a comment</h3>
    <form ng-submit="postComment()">
       <input type="hidden" value="{{post.id}}">
       Name: <input type="text"> <br>
       Comment: <textarea></textarea> <br>
       <input type="submit" value="Post comment">
    </form>
</li> 
```

我无法弄清楚将模型与表单相关联以从控制器`postComment()`功能访问的正确方法是什么。如果你对所有表单只使用一个模型，那么开始对一篇帖子发表评论将开始对所有表单发表评论——除非你对隐藏`post.id`字段做了一些奇怪的事情，但这开始让人感觉不习惯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T01:02:50.873

您可以将对象传递给函数调用。

```
<form ng-submit="postComment(post.id)"> 
```

至于其他输入，它确实取决于情况，但在这种情况下，`input`and`textarea`位于 an 内`ngRepeat`，这会创建新的范围。因此，分配给范围上的值不会影响页面上的其他元素。

```
<li ng-repeat="post in posts">
    <h2>{{post.title}}
    <p>{{post.description}}</p>
    <h3>Leave a comment</h3>
    <form ng-submit="postComment(post.id, commentName, commentText)">
       Name: <input type="text" ng-model="commentName"> <br>
       Comment: <textarea ng-model="commentText"></textarea> <br>
       <input type="submit" value="Post comment">
    </form>
</li> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T04:55:59.053

> is there any way of taking advantage of the two way communication there? (e.g. add an errmsg field from an AJAX call done in postComment or clear the form on submit?)

I suggest a directive with its own controller. With this approach, the `comment` model is encapsulated in the directive. The directive needs two pieces of information: 1) the postID 2) what function to call to save the comment. To support showing an error message returned from the server, a callback function is passed along with the comment. This allows the controller to feed the directive any error messages or any other information it might need after a save operation attempt.

```
app.directive('commentForm', function() {
  var template = '<form name="commentForm" '
    + 'ng-submit="save({comment: comment, callbackFn: callbackFn})">'
    + '<h3>Leave a comment</h3>'
    + 'Name: <input type="text" ng-model="comment.name" name="commentName"> <br>'
    + '<span class="error" ng-show="commentForm.commentName.$error.myError">Error</span><br>'
    + 'Comment: <textarea ng-model="comment.text"></textarea> <br>'
    + '<input type="submit" value="Save comment">'
    + '</form>';
  return {
    restrict: 'E',
    template: template,
    scope: { postId: '@', save: '&' },
    controller: function($scope) {
      $scope.callbackFn = function(args) {
        console.log('callback', args);
        if(args.error.name) {
          $scope.commentForm.commentName.$setValidity("myError", false);
        } else {
          // clear form
          $scope.comment.name = '';
          $scope.comment.text = '';
        }
      };
    }
  };
});

app.controller('MainCtrl', function($scope, $timeout) {
  $scope.post = {id: 1};
  $scope.saveComment = function(comment, callbackFn) {
    console.log('saving...', comment);
    // Call $http here... then call the callback.
    // We'll simulate doing something with a timeout.
    $timeout(function() {
      if(comment.name === "name") {
        callbackFn( {error: {name: 'try again'}} );
      } else {
        callbackFn( {error: {}} );
      }
   }, 1500)
  }
}); 
```

Use as follows:

```
<comment-form post-id="{{post.id}}" save="saveComment(comment, callbackFn)"></comment-form> 
```

Note the somewhat odd syntax related to the '&' syntax: when the directive is used in the HTML, you specify arguments for the saveComment() function. In the directive/template, an object/map is used to associate each argument name with its value. The value is a local/directive scope property.

[Plnkr](http://plnkr.co/edit/cscWxZe7z6EzduSJF0EC?p=preview). In the plnkr I simulated an AJAX post using a $timeout of 1.5 seconds. If you enter `name` in the name textbox and click the save button, you'll get an error in 1.5 seconds. Otherwise the form clears after 1.5 seconds.

Depending on how far you want to take this... you could encapsulate your post template into a directive too:

```
<li ng-repeat="post in posts">
   <post=post></post>
   <comment-form ...></comment-form>
</li> 
```

You could also put the comment-form inside the post directive template, simplifying the HTML even further:

```
<li ng-repeat="post in posts">
   <post=post></post>
</li> 
```

You could also have a post-list directive, and its template would contain the ng-repeat, reducing the HTML to a single element:

```
<post-list posts=posts></post-list> 
```

I personally haven't decided how far one should go with custom directives yet. I would be very interested in any comments people have about this.

# javascript - iPhone 上的 Knockout.js 问题 - 下拉列表问题

> ID：14668396
> 
> 赞同：2
> 
> 时间：2013-02-03T01:01:13.077
> 
> 标签：javascript, iphone, ios, knockout.js

在 iPhone 上运行时，我遇到了 Knockout.js 的一些问题。该问题似乎特定于 html 选择控件。手机进入选择器（即 iOS 下拉菜单）选择了多个项目的状态。

请在此处查看一个工作示例； [http://jsfiddle.net/robjwalker/Wep67/22/](http://jsfiddle.net/robjwalker/Wep67/22/)

重复;

*   在 iPhone 上纵向浏览，
*   从列表中选择一种颜色，
*   注意 2 个项目被选中/勾选，
*   把手机变成风景，
*   所有项目都被选中！

我正在使用脚本底部的函数处理下拉菜单的更改事件。这个函数改变了下拉依赖的视图模型。反过来，Knockout.js 会强制此更新到视图（即更新下拉列表）。

我已经尝试过提出的 isolatedOption 建议作为类似问题的解决方案 - 不幸的是，这似乎没有帮助。更多细节在这里； [Knockout.js 选择列表在 ios 上行为异常](https://stackoverflow.com/questions/12802896/knockout-js-select-list-acting-erratically-on-ios)

提前感谢您的帮助，罗布。

PS 这是一个 html 绑定代码的示例 - 请参阅上面的 js fiddle 链接以获取工作示例。

```
<select id="colourSelect" 
data-bind="isolatedOptions: colours,
optionsText: 'name', 
optionsValue: 'id', 
optionsCaption: 'Please select...',
value: selectedColour">
</select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-09T06:03:46.613

这是另一个修复，这是淘汰赛绑定中的一个已知错误。

[https://github.com/knockout/knockout/issues/472](https://github.com/knockout/knockout/issues/472)

# php - 我在 php 中的连接出错？

> ID：14668400
> 
> 赞同：0
> 
> 时间：2013-02-03T01:01:23.750
> 
> 标签：php, concatenation

我有以下内容，它没有在我的浏览器中输出“OK”。我认为连接是错误的。如果有任何帮助，我将不胜感激。干杯。

```
<?php
$x = array("submit","submit1");

foreach ($x as $value){
if ((isset($_POST['$value . "_" . " x"']))){
echo "OK";
}
?> 
```

我希望 $_POST 的内容是 submit_x、submit1_x 等

根据要求， print_r($POST) 在浏览器中给出：

```
OK
Notice: Undefined index: submit1_x in C:\xampp\htdocs\lotto\test1.php on line 18 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T01:02:46.743

你让它变得比它需要的更复杂：

```
 $_POST[$value . "_x"] 
```

# github - 如何在站点索引上呈现 Jekyll 降价页面

> ID：14668403
> 
> 赞同：38
> 
> 时间：2013-02-03T01:01:54.980
> 
> 标签：github, jekyll

我可能遗漏了一些简单的东西，但我无法在本地测试 Jekyll。

我正在使用 GitHub 页面来呈现 Jekyll，对于初学者来说，我只想 从一个降价页面在主*index.html上呈现降价内容。*

结构是：

**索引.html**

```
---
layout: default
--- 
```

**_layouts**
- default.html

```
//html stuff..
<section>

{{page.content}}

</section> 
```

在根文件夹中，我有一个名为`content.md`我希望为`{{page.content}}`布局渲染渲染的页面，但液体标签部分为空白。

我该如何渲染`content.md`？

示例：[https ://github.com/wycks/wordpress-gears-jekyll](https://github.com/wycks/wordpress-gears-jekyll)

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-02-03T02:36:06.770

这里发生了一些事情。

1.  在您的`_layouts/default.html`文件（以及与此相关的任何其他`_layouts`目录文件）中，而不是：

    ```
    {{ page.content }} 
    ```

    你需要使用：

    ```
    {{ content }} 
    ```

2.  Jekyll 只允许你包含来自站点根`_includes`目录的文件。因此，您需要将您的`content.md`从根目录移动到该目录（如果它尚不存在，则创建它）。

3.  最后，您需要从 index.html 文件中实际调用包含文件。这可以通过将 index.html 文件的内容更改为：

    ```
    ---
    layout: default
    ---

    {% include content.md %} 
    ```

这将设置您正在寻找的行为。

* * *

我要指出另外两点：

1.  您可能会发现将索引文件的扩展名从更改`.html`为`.md`效果更好。`.html`一个重要的注意事项：如果你想要分页，你需要使用。根据[Jekyll Pagination 文档](http://jekyllrb.com/docs/pagination/)，该功能仅在文件命名时才有效`index.html`。

2.  如果您在索引文件中所做的只是调用仅驻留在该页面上的包含，那么您最好将内容直接放在索引文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-03T00:58:51.670

`include`只允许您将文件直接包含在`_includes/`. 还有[include_relative](https://jekyllrb.com/docs/templates/#including-files-relative-to-another-file)允许您使用路径并从其他地方包含。包含必须与给定文件相关，但是：

```
{% include_relative somedir/footer.html %} 
```

* * *

任何一种包含方法都有一个我无法解决的问题：如果您包含的文件有前面的内容，Jekyll 不会将其删除。所以你不能使用前端来存储包含特定的元数据——比如“标题”。当然，您可以使用变量 -`{% assign title = "My Title" %}`但它并不等同，因为如果您希望包含的内容成为集合的一部分或独立呈现，您必须有一个前端问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T02:16:26.597

我相信这只是

```
{{ content }} 
```

好先生。

[**参考**](http://github.com/svnpenn/bm/blob/gh-pages/_layouts/page.htm)

# database-design - 数据库设计 - 规范化或非规范化

> ID：14668406
> 
> 赞同：0
> 
> 时间：2013-02-03T01:02:37.440
> 
> 标签：database-design

我的 ERP 数据库中有一个名为 Company 的表。我们正在为我们的 ERP 数据库创建一个报告数据库，并对表格进行非规范化以加快查询速度。因此，公司表既有客户记录，也有供应商记录。我一直在考虑将这张表分成两张表客户和供应商，但想知道你们是否对利弊有任何想法。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T01:39:04.983

The question of whether or not to normalize/denormalize data is very specific to your data and your customer's needs.

Some things I would consider:

1.  For reporting, which model is easier to write reports against? Is it easier to get all the data in one shot? Then denormalize. Do you find yourself jumping through hoops in the reporting logic with a denormalized model? Then normalize.

2.  I would consider the size of the entities involved. If you have 10 companies, but each company has 10,000 vendors, then maybe it's a bad idea to denormalize company+vendor for a report about companies. Why fetch huge sets of data when all you need is a few company fields? So if any entity has quite a few records, I would consider normalizing for speed.

3.  Which is easier to update? Maybe this isn't an issue, but if you aren't writing a view or sproc to denormalize, one approach will be easier to support with writes/updates than the other.

From my experience, if the tables are designed well and not overly normalized (having 30 tables when really something like 10 would do fine), then I prefer to report off of normalized data.

# c# - AxWindowsMediaPlayer：在最后一帧暂停

> ID：14668409
> 
> 赞同：3
> 
> 时间：2013-02-03T01:03:04.277
> 
> 标签：c#, winforms, axwindowsmediaplayer

我在 Winforms C# 应用程序中使用 AxWindowsMediaPlayer 控件，我想将播放器设置为在视频播放完毕后在最后一帧暂停。我已经处理了视频已完成以在播放器上显示具有不同内容的另一个控件的事实，但我想避免出现在两者之间的空白帧。

是否可以将播放器配置为在最后一帧暂停？或者我可以处理一个事件来将视频设置为在最后一帧或最后几毫秒暂停？

PS。PositionChange 事件似乎仅在用户或代码中设置位置时引发，因此我无法使用它。MarkerHit 事件似乎很有希望，但我找不到任何方法在视频中设置标记，所以这也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-11-01T00:33:03.843

这并不像 Nadhmi (@user5330265) 所说的那么简单。视频可能会在计时器滴答之间完成播放并重置为空白帧，在这种情况下，永远不会执行暂停。

我发现了以下作品，代价是错过了视频的最后一个 iInterval 毫秒。tmrVideo 计时器间隔设置为 1 毫秒。在我的系统上，它似乎每 15 毫秒运行一次，但诊断会减慢它的速度。它似乎并没有增加整体 CPU 负载。我为 iInterval 使用 250 的值 - currentPosition 似乎永远不会达到持续时间。较小的值意味着更少的视频丢失，但出现空白帧的机会更大。

加载视频时 currentPosition 为零，这就是需要将测试添加到条件中的原因。

tmrVideo 需要在每个 axWindowsMediaPlayer1.Ctlcontrols.play() 命令之后启用。

```
private void tmrVideo_Tick(object sender, EventArgs e)
    {
        if ((axWindowsMediaPlayer1.currentMedia.duration - axWindowsMediaPlayer1.Ctlcontrols.currentPosition)*1000 < 
            iInterval) && 
            axWindowsMediaPlayer1.Ctlcontrols.currentPosition!= 0)
        {
            axWindowsMediaPlayer1.Ctlcontrols.pause();
            tmrVideo.Enabled = false;
        }                           
    } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-11-04T20:47:14.140

## **你好**

就这么简单。

首先，您需要添加一个计时器。现在处理 Timer1_Tick 事件：

```
if (AxWindowsMediaPlayer1.Ctlcontrols.currentPosition == AxWindowsMediaPlayer1.currentMedia.duration) {
    AxWindowsMediaPlayer1.Ctlcontrols.pause();
} 
```

**就是这样**

**PS：**一定要启动定时器。

纳德米。

# c# - while循环c#/asp.net mvc应用程序中的FormatException

> ID：14668413
> 
> 赞同：0
> 
> 时间：2013-02-03T01:03:36.770
> 
> 标签：c#

这个条件循环有什么问题：

```
 while (System.IO.File.Exists(relPath)){ ... } 
```

它在启动时引发异常：

> 异常详细信息：System.FormatException：索引（从零开始）必须大于或等于零且小于参数列表的大小

relPath 字符串值为“/Temp/pdfs/file.ext”。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T01:14:42.773

System.FormatException 被抛出，因为在参数列表中找不到替换标记。如果提供更多参数，程序将不会抛出异常。

[我的答案是从这里](http://www.dotnetperls.com/formatexception)复制的，它提供了示例代码并显示了简单的修复。

# javascript - 同位素项目在初始加载时重叠

> ID：14668416
> 
> 赞同：5
> 
> 时间：2013-02-03T01:04:07.943
> 
> 标签：javascript, jquery, jquery-isotope

[为该站点](http://mtthwbsh.com/sta499)使用砖石布局，并在第一次加载时每个框重叠。如果您使用任何导航项目进行排序，甚至只是停留在“全部”上，它们会重新排列自己。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-29T13:43:34.593

我还没有 50 的声誉，所以我无法发表评论，但我想分享一些我过去偶然发现的技巧，因为我经常使用这个插件，它可以帮助其他人。

首先，我绝对使用 Sarah 提到的 imageLoaded 函数，而不是 onload。（[https://github.com/desandro/imagesloaded](https://github.com/desandro/imagesloaded)）

提示 1 - 为了加快 isotope 插件的工作速度（如果图像尺寸很大，或者你有很多它们，这很有用），你为每个容器加载一个占位符图像，然后在 imagesloaded 插件触发后，你可以让 isotope插件可以快速工作。然后，您可以使用包含真实 src url 的 data- 属性交换真实图像，只需使用同位素回调 ( [http://isotope.metafizzy.co/events.html](http://isotope.metafizzy.co/events.html) ) 即可。唯一需要注意的是，您的图像需要与占位符具有相同的尺寸，否则容器的大小可能会变得混乱并再次重叠。

提示 2 - 我实际上从未这样做过，但我正在考虑使用的一种方法是将图像加载为容器的背景图像，设置高度并为容器（或至少它的图像部分）设置图像作为背景尺寸：封面；然后您无需担心同位素插件开始工作之前的图像加载。

# c# - 为什么 DbGeometry.Distance 在我的简单测试中返回错误值？

> ID：14668417
> 
> 赞同：1
> 
> 时间：2013-02-03T01:04:18.223
> 
> 标签：c#

在一个简单的测试中，我运行：

```
DbGeometry.PointFromText("POINT ( -70.490367454924666 41.617229044487424)", 4326)
.Distance(DbGeometry.PointFromText("POINT (-78.5498733520508 35.8455619812012)", 4326)); 
```

返回值为：9.9130104405893711

我的理解是返回值以米为单位，但这甚至不接近正确。这些点相距许多公里。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T01:10:27.557

做一些四舍五入...

```
-70.5 - -78.5 == 8
42 - 36 == 6
sqrt(8*8 + 6*6) == 10 
```

看起来离我很近

# c# - Visual Studio 2012 C#.NET MVC 4 和带有实体框架的 SQL 数据库，也许还有 Unity

> ID：14668421
> 
> 赞同：-3
> 
> 时间：2013-02-03T01:04:38.920
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, entity-framework, asp.net-mvc-4

我刚刚参加了一门课程，讨论了在 C#.NET 中使用 MVC 4 以及使用实体框架创建 SQL 数据库的对象表示并使用 Unity 创建对象实例等的优势......

问题是，它只是一个概述，而不是第一步.. 创建一个项目，第 2 步，下载 sql 并设置它，创建一个数据库并跳舞。第 3 步，单击此处并在此处键入以创建该数据库的实体模型……等等。

有谁知道目前有什么书可以让整个主题很容易上手...一旦我知道如何设置 SQL 服务器并附加实体框架（不使用没有帮助的有缺陷的 Visual Studio 代码生成器）我一点点），我也许可以做一个翻转网站^_^...

PS，我非常了解 PHP、JavaScript、Java、C++……这意味着我知道 Jack doodle 关于 C# 和 C# 库。这本书将是一个基本的初学者教程...

有任何想法吗？

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T04:25:31.887

这不是一本书，但您可能想看看[MVC Music Store](http://www.asp.net/mvc/tutorials/mvc-music-store)示例项目。它使用 MVC 和实体框架。虽然不是统一的，但他们确实有一个相当长的 PDF 描述了示例站点是如何制作的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T02:17:56.390

Pro ASP.NET MVC 4（专业版）

[http://www.amazon.com/Pro-ASP-NET-MVC-Professional-Apress/dp/1430242361](https://rads.stackoverflow.com/amzn/click/com/1430242361)

这个系列很棒。

1.  创建应用程序的逐步过程
2.  .NET 开发和 MVC 框架的伟大历史
3.  框架的最佳概述。良好的覆盖面解释了控制器、视图、EF、Helper、Web API。

# shell - 写一个sed命令提取单词

> ID：14668423
> 
> 赞同：0
> 
> 时间：2013-02-03T01:04:59.677
> 
> 标签：shell, sed

有一个我想从中获取的文件

```
libqt4-dbus   
libqt4-network   
libqt4-script   
libqt4-test   
libqt4-xml   
libqtcore4   
libqt4-designer   
libqt4-opengl   
libqt4-svg   
libqtgui4 
```

我如何编写一个 sed 命令，例如 `sed 's/ /' test`

这是名为 test 的文件

以下包具有未满足的依赖项：

> libqt4-core ：取决于：libqt4-dbus (= 4:4.8.2+dfsg-10) 但要安装 4:4.8.2+dfsg-2
> 取决于：libqt4-network (= 4:4.8.2+dfsg- 10) 但要安装 4:4.8.2+dfsg-2
> 取决于：libqt4-script (= 4:4.8.2+dfsg-10) 但不会安装
> 取决于：libqt4-test (= 4: 4.8.2+dfsg-10) 但不会安装
> 取决于：libqt4-xml (= 4:4.8.2+dfsg-10) 但要安装 4:4.8.2+dfsg-2
> 取决于：libqtcore4 (= 4:4.8.2+dfsg-10) 但要安装 4:4.8.2+dfsg-2 libqt4-gui : 取决于: libqt4-designer (= 4:4.8.2+dfsg-10) 但它是不会安装
> 取决于：libqt4-opengl (= 4:4.8.2+dfsg-10) 但要安装 4:4.8.2+dfsg-2
> 取决于：libqt4-svg (= 4:4.8.2+dfsg-10) 但它不会安装
> 取决于：libqtgui4 (= 4:4.8.2+dfsg-10) 但要安装 4:4.8.2+dfsg-2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T01:54:54.123

假设在以下位置存在某种格式故障：

```
Depends: libqtcore4 (= 4:4.8.2+dfsg-10) but 4:4.8.2+dfsg-2 is to be installed libqt4-gui : Depends: libqt4-designer (= 4:4.8.2+dfsg-10) but it is not going to be installed 
```

（所以实际上它可能是这样写的：

```
Depends: libqtcore4 (= 4:4.8.2+dfsg-10) but 4:4.8.2+dfsg-2 is to be installed
libqt4-gui : Depends: libqt4-designer (= 4:4.8.2+dfsg-10) but it is not going to be installed 
```

) 那么这应该这样做：

```
sed 's/.*Depends: \([^ ]*\) .*/\1/' lib-dep-list 
```

给定数据文件`lib-dep-list`：

```
libqt4-core : Depends: libqt4-dbus (= 4:4.8.2+dfsg-10) but 4:4.8.2+dfsg-2 is to be installed
Depends: libqt4-network (= 4:4.8.2+dfsg-10) but 4:4.8.2+dfsg-2 is to be installed
Depends: libqt4-script (= 4:4.8.2+dfsg-10) but it is not going to be installed
Depends: libqt4-test (= 4:4.8.2+dfsg-10) but it is not going to be installed
Depends: libqt4-xml (= 4:4.8.2+dfsg-10) but 4:4.8.2+dfsg-2 is to be installed
Depends: libqtcore4 (= 4:4.8.2+dfsg-10) but 4:4.8.2+dfsg-2 is to be installed
libqt4-gui : Depends: libqt4-designer (= 4:4.8.2+dfsg-10) but it is not going to be installed
Depends: libqt4-opengl (= 4:4.8.2+dfsg-10) but 4:4.8.2+dfsg-2 is to be installed
Depends: libqt4-svg (= 4:4.8.2+dfsg-10) but it is not going to be installed
Depends: libqtgui4 (= 4:4.8.2+dfsg-10) but 4:4.8.2+dfsg-2 is to be installed 
```

输出是：

```
libqt4-dbus
libqt4-network
libqt4-script
libqt4-test
libqt4-xml
libqtcore4
libqt4-designer
libqt4-opengl
libqt4-svg
libqtgui4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T08:23:33.110

使用 awk

```
 awk -v RS="Depends:" 'NR>1{print $1}' temp.txt 
```

# sml - SML 警告：使用空列表或 NONE 选项时，类型 Vars Not Generalized

> ID：14668433
> 
> 赞同：12
> 
> 时间：2013-02-03T01:05:57.057
> 
> 标签：sml, smlnj

我一生都无法弄清楚为什么以下 SML 函数会在我的作业问题中引发警告：

```
fun my_func f ls  = 
  case ls of 
  [] => raise MyException
  | head :: rest => case f head of 
                    SOME v => v
                    | NONE => my_func f rest

fun f a = if isSome a then a else NONE; 
```

每当我使用以下测试函数调用 my_func 时：

```
my_func f [NONE, NONE];
my_func f []; 
```

我总是收到警告：

> *警告：由于值限制而未泛化的类型变量被实例化为虚拟类型（X1，X2，...）*

每当我传入包含至少一个 SOME 值的选项列表时，都不会抛出此警告。我知道这一定与我在函数柯里化中使用多态性这一事实有关，但我完全不知道如何摆脱这些警告。

如果您有任何想法，请提供帮助 - 在此先感谢您！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-03T04:43:54.097

警告中引用的*值限制*是在 SML 中更难理解的事情之一，但是我会尽力解释为什么会在这种情况下出现，并尝试向您指出一些资源以了解更多信息。

如您所知，SML 将使用类型推断来推断程序中的大多数类型。在这个程序中，类型`my_func`将被推断为`('a -> 'b option) -> 'a list -> 'b`. 正如您所指出的，它是一种多态类型。当你`my_func`这样打电话时

```
myfunc f [NONE, SOME 1, NONE]; 
```

...类型变量`'a`and`'b`被实例化为`int option`and `int`。

但是，当您在没有上述值的情况下调用它`SOME 1`时

```
myfunc f [NONE, NONE]; 
```

你认为类型变量应该被实例化成什么？类型应该是多态的——类似于所有类型的`'t option`和。但是，有一个限制可以防止像这样的值采用多态类型。`'t``'t`

SML 将一些表达式定义*为非扩展值*，并且只有这些值可以采用多态类型。他们是：

*   文字（常量）
*   变量
*   函数表达式
*   构造函数（除了`ref`）应用于非扩展值
*   带有类型注释的非扩展值
*   每个字段都是非扩展值的元组
*   每个字段都是非扩展值的记录
*   列出每个字段是非扩展值的位置

所有其他表达式，特别是*函数调用*（这是调用的`my_func`内容）**不能是多态**的。也不能参考。您可能会好奇地看到以下内容不会引发警告：

```
 fn () => my_func f [NONE, NONE]; 
```

相反，推断的类型是`unit -> 'a`. 但是，如果您要调用此函数，您将再次收到警告。

我对这种限制原因的理解有点薄弱，但我相信潜在的根本问题是可变引用。这是我从下面链接的 MLton 站点中获取的示例：

```
val r: 'a option ref = ref NONE
val r1: string option ref = r
val r2: int option ref = r
val () = r1 := SOME "foo"
val v: int = valOf (!r2) 
```

由于值限制，此程序不会在 SML 下进行类型检查。如果不是值限制，这个程序在运行时会出现类型错误。

正如我所说，我的理解是不稳定的。但是，我希望我对您遇到的问题有所了解，尽管我相信在您的情况下，您可以放心地忽略警告。如果您决定要深入挖掘，这里有一些参考资料：

[http://users.cis.fiu.edu/~smithg/cop4555/valrestr.html](http://users.cis.fiu.edu/~smithg/cop4555/valrestr.html)

[http://mlton.org/ValueRestriction](http://mlton.org/ValueRestriction)

（顺便说一句，MLton 网站是**纯金**的。这里隐藏了很多东西，所以如果你想了解一些关于 SML 的奇怪之处，我强烈建议在这里搜索，因为你可能会出现比你最初想要的更多的东西）

因为看起来你实际上是在使用 SML/NJ，所以这是一个非常方便的指南，可以帮助你在编译时给出错误消息和警告：

[http://flint.cs.yale.edu/cs421/smlnj/doc/errors.html](http://flint.cs.yale.edu/cs421/smlnj/doc/errors.html)

# javascript - 获取元素名称的标准兼容方式

> ID：14668435
> 
> 赞同：1
> 
> 时间：2013-02-03T01:06:36.727
> 
> 标签：javascript, domdocument

在javascript中，我想获取`name`元素的属性。

*   [Mozilla 开发者网络](https://developer.mozilla.org/fr/docs/DOM/element.name)说我们可以使用`e.name`或`e.elementName`（后者为我在 Chrome 中给出 undefined）
*   [这个 StackOverflow 答案](https://stackoverflow.com/a/5528617/324969)说要使用`e.attributes["name"].value`
*   我想如果我尝试，我会找到更多的方法。

哪种方式符合标准？

哪种方式最兼容？

我在哪里可以获得如何访问每个属性的列表（例如，`id`可以通过 直接访问`e.id`，我很确定这是一种符合标准的访问方式）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T01:08:26.730

在某种程度上，它取决于元素类型。并非所有元素类型都支持该`name`属性，因此这取决于您是否以有效的方式使用它。

要以最广泛的方式获取值，请使用`.getAttribute()`.

```
element.getAttribute("name"); 
```

如果您在`name`支持该属性的元素上使用，那么我只会使用该`.name`属性。

```
element.name; 
```

# java - Android：将外部项目包名称添加到布局 xml 中？

> ID：14668436
> 
> 赞同：0
> 
> 时间：2013-02-03T01:06:45.567
> 
> 标签：java, android, xml, package

我的主项目中有一个 XML 布局文件，其中包含以下内容：

```
<com.quietlycoding.android.picker.NumberPicker
            android:id="@+id/belegposition_belegpositionpickerpause"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" /> 
```

这个包位于我添加到构建路径中的另一个项目中。包名称是 100% 正确的。我还通过在编译器确实识别的 .java 文件中的导入对此进行了测试。

但是，当 XML 文件在运行时被夸大时，我得到了这个错误：

```
02-03 01:56:58.824: E/dalvikvm(4213): Could not find class 'com.quietlycoding.android.picker.NumberPicker', referenced from method de.innosoft.android.activity.BelegPositionen$ArrayAdapterBelegPosition.getView
02-03 01:57:02.191: E/java.lang.ClassNotFoundException(4213): Didn't find class "com.quietlycoding.android.picker.NumberPicker" on path: /system/framework/android.test.runner.jar:/data/app/de.innosoft.android-1.apk
02-03 01:57:02.191: E/java.lang.ClassNotFoundException(4213): java.lang.ClassNotFoundException: Didn't find class "com.quietlycoding.android.picker.NumberPicker" on path: /system/framework/android.test.runner.jar:/data/app/de.innosoft.android-1.apk
02-03 01:57:02.191: E/java.lang.ClassNotFoundException(4213):   at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:65)
02-03 01:57:02.191: E/java.lang.ClassNotFoundException(4213):   at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
02-03 01:57:02.191: E/java.lang.ClassNotFoundException(4213):   at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
02-03 01:57:02.191: E/java.lang.ClassNotFoundException(4213):   at android.view.LayoutInflater.createView(LayoutInflater.java:552)
02-03 01:57:02.191: E/java.lang.ClassNotFoundException(4213):   at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:687)
02-03 01:57:02.191: E/java.lang.ClassNotFoundException(4213):   at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
02-03 01:57:02.191: E/java.lang.ClassNotFoundException(4213):   at android.view.LayoutInflater.rInflate(LayoutInflater.java:749)
02-03 01:57:02.191: E/java.lang.ClassNotFoundException(4213):   at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
02-03 01:57:02.191: E/java.lang.ClassNotFoundException(4213):   at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
02-03 01:57:02.191: E/java.lang.ClassNotFoundException(4213):   at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
02-03 01:57:02.191: E/java.lang.ClassNotFoundException(4213):   at de.innosoft.android.activity.BelegPositionen$ArrayAdapterBelegPosition.getView(BelegPositionen.java:107)
02-03 01:57:02.191: E/java.lang.ClassNotFoundException(4213):   at android.widget.AbsListView.obtainView(AbsListView.java:2159)
02-03 01:57:02.191: E/java.lang.ClassNotFoundException(4213):   at android.widget.ListView.measureHeightOfChildren(ListView.java:1246)
02-03 01:57:02.191: E/java.lang.ClassNotFoundException(4213):   at android.widget.ListView.onMeasure(ListView.java:1158)
02-03 01:57:02.191: E/java.lang.ClassNotFoundException(4213):   at android.view.View.measure(View.java:15513)
02-03 01:57:02.191: E/java.lang.ClassNotFoundException(4213):   at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4827)
02-03 01:57:02.191: E/java.lang.ClassNotFoundException(4213):   at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1404)
02-03 01:57:02.191: E/java.lang.ClassNotFoundException(4213):   at android.widget.LinearLayout.measureVertical(LinearLayout.java:695)
02-03 01:57:02.191: E/java.lang.ClassNotFoundException(4213):   at android.widget.LinearLayout.onMeasure(LinearLayout.java:588)
02-03 01:57:02.191: E/java.lang.ClassNotFoundException(4213):   at android.view.View.measure(View.java:15513)
02-03 01:57:02.191: E/java.lang.ClassNotFoundException(4213):   at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4827)
02-03 01:57:02.191: E/java.lang.ClassNotFoundException(4213):   at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
02-03 01:57:02.191: E/java.lang.ClassNotFoundException(4213):   at android.view.View.measure(View.java:15513)
02-03 01:57:02.191: E/java.lang.ClassNotFoundException(4213):   at android.widget.LinearLayout.measureVertical(LinearLayout.java:847)
02-03 01:57:02.191: E/java.lang.ClassNotFoundException(4213):   at android.widget.LinearLayout.onMeasure(LinearLayout.java:588)
02-03 01:57:02.191: E/java.lang.ClassNotFoundException(4213):   at android.view.View.measure(View.java:15513)
02-03 01:57:02.191: E/java.lang.ClassNotFoundException(4213):   at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4827)
02-03 01:57:02.191: E/java.lang.ClassNotFoundException(4213):   at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
02-03 01:57:02.191: E/java.lang.ClassNotFoundException(4213):   at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2176)
02-03 01:57:02.191: E/java.lang.ClassNotFoundException(4213):   at android.view.View.measure(View.java:15513)
02-03 01:57:02.191: E/java.lang.ClassNotFoundException(4213):   at android.view.ViewRootImpl.performMeasure(ViewRootImpl.java:1874)
02-03 01:57:02.191: E/java.lang.ClassNotFoundException(4213):   at android.view.ViewRootImpl.measureHierarchy(ViewRootImpl.java:1089)
02-03 01:57:02.191: E/java.lang.ClassNotFoundException(4213):   at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1265)
02-03 01:57:02.191: E/java.lang.ClassNotFoundException(4213):   at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:989)
02-03 01:57:02.191: E/java.lang.ClassNotFoundException(4213):   at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4351)
02-03 01:57:02.191: E/java.lang.ClassNotFoundException(4213):   at android.view.Choreographer$CallbackRecord.run(Choreographer.java:749)
02-03 01:57:02.191: E/java.lang.ClassNotFoundException(4213):   at android.view.Choreographer.doCallbacks(Choreographer.java:562)
02-03 01:57:02.191: E/java.lang.ClassNotFoundException(4213):   at android.view.Choreographer.doFrame(Choreographer.java:532)
02-03 01:57:02.191: E/java.lang.ClassNotFoundException(4213):   at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:735)
02-03 01:57:02.191: E/java.lang.ClassNotFoundException(4213):   at android.os.Handler.handleCallback(Handler.java:725)
02-03 01:57:02.191: E/java.lang.ClassNotFoundException(4213):   at android.os.Handler.dispatchMessage(Handler.java:92)
02-03 01:57:02.191: E/java.lang.ClassNotFoundException(4213):   at android.os.Looper.loop(Looper.java:137)
02-03 01:57:02.191: E/java.lang.ClassNotFoundException(4213):   at android.app.ActivityThread.main(ActivityThread.java:5191)
02-03 01:57:02.191: E/java.lang.ClassNotFoundException(4213):   at java.lang.reflect.Method.invokeNative(Native Method)
02-03 01:57:02.191: E/java.lang.ClassNotFoundException(4213):   at java.lang.reflect.Method.invoke(Method.java:511)
02-03 01:57:02.191: E/java.lang.ClassNotFoundException(4213):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:795)
02-03 01:57:02.191: E/java.lang.ClassNotFoundException(4213):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:562)
02-03 01:57:02.191: E/java.lang.ClassNotFoundException(4213):   at dalvik.system.NativeStart.main(Native Method) 
```

不能从 XML 文件中引用外部项目包吗？还是我只是忘记了根 XML 元素的特定属性？

编辑：我正在使用一个外部项目，因为我不想用所有这些外部东西（drawables 等）污染我的主要项目文件夹。不幸的是，该库不是作为 JAR 提供的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T01:10:04.137

尝试将外部项目添加为库。在外部项目中转到项目属性并在 Android 部分中选中`Is Library`复选框。然后在 Android 部分中转到您的项目属性，将外部项目添加为库。

# ruby-on-rails - Ruby on rails - 将异常堆栈跟踪添加到 500 错误页面？

> ID：14668443
> 
> 赞同：2
> 
> 时间：2013-02-03T01:08:48.727
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个 Rails 3 应用程序，当前当发生内部错误时，它会显示以下页面之一：

```
./views/exceptions/internal_server_error.html.haml
./views/exceptions/internal_server_error.json.erb

```

如何获取 HTML 500 错误页面以显示异常的堆栈跟踪？我正在运行 Apache 而不是 Webrick，我希望在生产和开发中都显示异常。模式，因为这是一个内部应用程序。我尝试在 internal_server_error.html.haml 页面中显示@exception，但它没有被填充。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-03T19:14:08.283

如果您想在生产中显示完整的堆栈跟踪，请在您的 中注释掉以下行`config/environments/production.rb`：

```
config.consider_all_requests_local = false 
```

这是一个名称很糟糕的[配置选项](http://guides.rubyonrails.org/configuring.html#rails-general-configuration)，但 Rails 使用它来确定是否连接异常处理中间件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-27T21:56:50.987

它仅在我们将值设置为 时才对我们`true`有用，而不是注释掉它，即`config.consider_all_requests_local = true`

# ios - 从 Xcode 启动 iOS 模拟器并黑屏，然后 Xcode 挂起并且无法停止任务

> ID：14668445
> 
> 赞同：95
> 
> 时间：2013-02-03T01:09:00.890
> 
> 标签：ios, xcode, ios-simulator

我无法在 iOS 模拟器中运行我的基本 iPhone 应用程序（同时通过斯坦福 iTunes CS193p 讲座）。

我已经搜索了一段时间（谷歌和 SO），但到目前为止找不到解决方案。有许多类似的错误，但解决方案似乎无法解决此问题。

在 Xcode 中，我单击“运行”。它编译和构建成功，启动 iOS 模拟器，但它永远不会加载应用程序。只有顶部的状态栏。带黑屏。

我只编写了非常基本的代码（在讲座之后）并且无法解决这个问题。

为了让事情更加混乱，我`(UIWebView)`在这些讲座之前写了一个网络包装器，这很好用。但是代码几乎没有任何区别。我从头开始创建的所有新应用程序都因相同的黑屏问题而失败。

如果我点击模拟器上的主页按钮并启动应用程序，它将显示。但 Xcode 似乎并不知道发生了什么。

就好像 Xcode 失去了与 iOS 模拟器对话的能力并假设它正在运行（即使我退出了 iOS 模拟器）。我尝试退出 Xcode，它要求我停止任务。然后它就挂了。所以我必须强制重启才能退出 Xcode。

我正在使用：OSX 10.8.2 Xcode 4.5.2 iOS 模拟器 6.0

**CalculatorAppDelegate.h**

```
#import <UIKit/UIKit.h>

@interface CalculatorAppDelegate : UIResponder <UIApplicationDelegate>

@property (strong, nonatomic) UIWindow *window;

@end 
```

**CalculatorAppDelegate.m**

```
#import "CalculatorAppDelegate.h"

@implementation CalculatorAppDelegate

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions (NSDictionary *)launchOptions
{
    // Override point for customization after application launch.
    return YES;
}

- (void)applicationWillResignActive:(UIApplication *)application
{
// Sent when the application is about to move from active to inactive state. This can occur for certain types of temporary interruptions (such as an incoming phone call or SMS message) or when the user quits the application and it begins the transition to the background state.
// Use this method to pause ongoing tasks, disable timers, and throttle down OpenGL ES frame rates. Games should use this method to pause the game.
}

- (void)applicationDidEnterBackground:(UIApplication *)application
{
// Use this method to release shared resources, save user data, invalidate timers, and store enough application state information to restore your application to its current state in case it is terminated later. 
// If your application supports background execution, this method is called instead of applicationWillTerminate: when the user quits.
}

- (void)applicationWillEnterForeground:(UIApplication *)application
{
// Called as part of the transition from the background to the active state; here you can undo many of the changes made on entering the background.
}

- (void)applicationDidBecomeActive:(UIApplication *)application
{
// Restart any tasks that were paused (or not yet started) while the application was inactive. If the application was previously in the background, optionally refresh the user interface.
}

- (void)applicationWillTerminate:(UIApplication *)application
{
// Called when the application is about to terminate. Save data if appropriate. See also applicationDidEnterBackground:.
}

@end 
```

**计算器视图控制器.h**

```
#import <UIKit/UIKit.h>

@interface CalculatorViewController : UIViewController
@property (weak, nonatomic) IBOutlet UILabel *display;

@end 
```

**计算器视图控制器.m**

```
#import "CalculatorViewController.h"

@implementation CalculatorViewController

@synthesize display = _display;

- (IBAction)digitPressed:(UIButton *)sender
{
    NSString *digit = [sender currentTitle];
NSLog(@"digit pressed = %@", digit);
}

@end 
```

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2013-07-12T15:37:53.670

令人惊讶的是，对我有用的是转到 iOS 模拟器菜单，然后按“重置内容和设置”。（在 iOS 13 中，它在硬件下）

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2014-01-22T09:16:31.813

在重置模拟器之前，首先转到您的项目“*项目导航*器”屏幕并在*常规*->*部署信息*屏幕下检查**主界面** 属性是否正确设置！

![在此处输入图像描述](../Images/2f320f4db09412bfcca8b27fb96538c5.png)

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2019-07-14T11:06:52.127

如果您使用的是 SwiftUI

如果您是从以前版本的 Xcode 11 更新，则`SceneDelegate` `willConnectTo session: options connectionOptions`初始化有一些更改：

`window`现在使用 初始化main `UIWindow(windowScene: windowScene)`，它曾经是`UIWindow(frame: UIScreen.main.bounds)`

在以前的版本中：

```
 let window = UIWindow(frame: UIScreen.main.bounds)
    window.rootViewController = UIHostingController(rootView: ContentView())
    self.window = window
    window.makeKeyAndVisible() 
```

在新版本中：

```
 if let windowScene = scene as? UIWindowScene {
        let window = UIWindow(windowScene: windowScene)
        window.rootViewController = UIHostingController(rootView: ContentView())
        self.window = window
        window.makeKeyAndVisible()
    } 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-07-21T09:42:26.400

我是 iOS 应用程序开发的新手。我从一开始就练习开发 iOS 应用程序，在运行一个非常基本的 Hello World 应用程序时，我也遇到了同样的问题，即在 iOS 模拟器中构建和运行应用程序后只出现黑色空白屏幕。不知何故，在努力寻找问题的解决方案时，我不小心在 iOS 模拟器中单击了 Window--> Scale--> 50%，它确实解决了我的问题。然后我可以看到我的应用程序的主页并单击应用程序图标我能够成功运行我的应用程序。应用程序版本：Xcode 5.1 iOS 模拟器：7.1 OSX：10.9.3

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-11-22T14:17:58.430

这可能是由于未设置正确的部署信息造成的。（即如果您的故事板未设置为主界面）

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-02-12T21:09:25.390

重新启动计算机应该是您需要做的所有事情。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2015-08-19T18:32:39.187

另一个解决方案是，如果您在 Objective C 项目中以编程方式构建 UI，那么您可能需要添加一些代码来膨胀视图，因此您需要添加这 3 行以使窗口的界面与代码交互（外部 2实际上正在与代码进行交互，而另一个会将屏幕更改为白色，因此您会知道它可以工作）。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

self.window = [[UIWindow alloc] initWithFrame: [[UIScreen mainScreen] bounds]];
// Override point for customization after application launch.

...

self.window.backgroundColor = [UIColor whiteColor];
[self.window makeKeyAndVisible];

return YES;
} 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2015-09-23T06:25:44.490

**解决方案1：**您可以`Quit simulator`再试一次。

**解决方案 2**（推荐）：转到`iOS Simulator`->`Reset Content and Settings...`

[![第1步](../Images/2e231443a01d898e795e4c6c98236e8b.png)](https://i.stack.imgur.com/OM6Mn.png)

这将弹出一个警报，说明`'Are you sure you want to reset the iOS Simulator content and settings?'`

[![第2步](../Images/9e4630f13c3b3698a7a607827eceb80b.png)](https://i.stack.imgur.com/k77cn.png)

选择`Reset`是否愿意或其他`Don't Reset`按钮。

*请注意，一旦您重置模拟器内容，安装在模拟器上的所有应用程序都将被删除，并将重置为初始设置。*

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2014-11-12T04:57:38.380

如果您应该在 Storyboard 中放开您的入口点，或者只是想更改入口点，您可以在 Interface Builder 中指定它。要设置新的入口点，您必须首先决定哪个 ViewController 将充当新的入口点，并在 Attribute Inspector 中选择 Initial Scene 复选框。

你可以试试： [http ://www.scott-sherwood.com/ios-5-specifying-the-entry-point-of-your-storyboard/](http://www.scott-sherwood.com/ios-5-specifying-the-entry-point-of-your-storyboard/)

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2021-05-05T14:23:20.917

我为此挣扎了几个小时。最后为我解决的是：

`sudo xcrun simctl erase all`

`xcrun simctl shutdown all`

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2018-01-28T03:23:09.430

如果从另一个项目复制故事板后出现黑屏，请确保您已完成此操作 [![在此处输入图像描述](../Images/8e3a216d925ae3bacb21a82a1e1f5173.png)](https://i.stack.imgur.com/jesi4.png)

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2021-04-15T07:15:00.353

我通过按
`cmd`++`shift`清理项目`k`
并退出我的模拟器并重新构建来解决了这个问题。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2020-08-20T18:46:36.840

我在 iOS 13 中通过设置窗口背景颜色解决了这个问题：

```
func scene(_ scene: UIScene, willConnectTo session: UISceneSession, options connectionOptions: UIScene.ConnectionOptions) {
    guard let _ = (scene as? UIWindowScene) else { return }
    if let windowScene = scene as? UIWindowScene {
        window = UIWindow(windowScene: windowScene)
        window?.backgroundColor = .white
        let storyBoard = UIStoryboard(name: "Main", bundle: nil)

        // workaround for svprogresshud
        let appDelegate = UIApplication.shared.delegate as! AppDelegate
        appDelegate.window = window
    }
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2013-02-07T20:48:36.377

我已经设法找到解决这个问题的方法。它是由这篇博客文章提供的：

[http://vandadnp.wordpress.com/2012/03/18/xcode-4-3-1-cannot-attach-to-ios-simulator/](http://vandadnp.wordpress.com/2012/03/18/xcode-4-3-1-cannot-attach-to-ios-simulator/)

解决方案是按 cmd+shift+, (command, shift 然后逗号 ",").. 加载一些用于发布或调试的选项。

将调试器从 LLDB 更改为 GDB。这解决了这个问题。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2013-02-07T20:56:13.253

为确保这是模拟器问题，请查看是否可以在不更改任何代码的情况下使用全新项目连接到模拟器。试试标签栏模板。

如果您认为这是模拟器问题，请按 iOS Simulator 菜单。选择“重置内容和设置...”。按“重置”。

我看不到您的 XIB 以及您在 Interface Builder 中连接的 @properties，但也可能是您没有加载窗口，或者您的窗口没有加载视图控制器。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2013-12-23T15:54:02.350

我在 Xcode 上遇到了同样的问题......启动应用程序时出现黑屏，没有调试和点击会锁定 Xcode。

我终于找到了问题...在模拟器无法连接到 Xcode 的引导下，我查看了我的 etc/hosts 文件，发现几个月前为了解决另一个问题，我编辑了主机文件以将 localhost 映射到我的固定IP而不是默认IP......我的价值：

10.0.1.17 本地主机

这应该可以工作，因为那是我的 IP，但是将其更改回默认 IP 固定 Xcode ...

127.0.0.1 本地主机

希望这可以帮助。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2014-02-13T16:40:41.470

我正在按照 doug 的建议（“重置内容和设置”）进行操作，但需要花费很多时间，而且真的很烦人……直到我最近发现完全意外的另一种解决方案，该解决方案速度更快，而且到目前为止似乎也有效！只需在您的模拟器上按 cmd+L 或转到模拟器菜单“硬件 - > 锁定”，它会锁定屏幕，当您解锁屏幕时，应用程序就像什么都没发生过一样工作 :)

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2016-03-30T04:27:27.680

我发生的事情是类的类型不是 UIViewController 附加到我的视图控制器的脚本。它是针对 UITabController 的.....我错误地快速创建了错误类型的类....所以请确保该类是否是正确的类型..希望这对某人有所帮助。我很着急，犯了这个错误。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2016-12-08T10:20:07.000

只需单击 Simulator-> Reset Contents and Settings 即可重置您的模拟器。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2017-10-08T01:58:35.520

你也可以去硬件->重启，然后硬件->主页，然后点击你的应用程序

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2018-06-06T22:03:44.857

确保设置了初始视图控制器

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2018-06-26T08:17:29.790

我只有在删除具有早期 iOS 版本的模拟器后才解决了这个问题。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2018-08-28T20:31:16.223

我只有 iOS 11 sims 的黑色模拟器屏幕。在尝试重置、重启、重新安装并在我的机器上创建一个全新的用户帐户后，我找到了这个解决方案：

```
defaults write com.apple.CoreSimulator.IndigoFramebufferServices FramebufferRendererHint 3 
```

在此答案中找到：[安装 Xcode 10 beta 后 Xcode 9 iOS 模拟器变成黑屏](https://stackoverflow.com/questions/50941865/xcode-9-ios-simulator-becoming-black-screen-after-installing-xcode-10-beta)

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2019-01-22T07:54:00.560

请检查所有视图的所有约束并查看完整的故事板。通常这是因为这个而发生的。

问候， 阿罗拉

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2019-07-10T09:26:55.560

如果您最近更新到 Xcode 11 beta 3 并尝试运行较旧的 SwiftUI 项目，则必须在加载视图的 SceneDelegate 中进行一些更改，否则在运行 iOS 13 beta 3 的设备上屏幕将保持黑色，这当然包括所有模拟器。

```
 func scene(_ scene: UIScene, willConnectTo session: UISceneSession, options connectionOptions: UIScene.ConnectionOptions) {
    // Use this method to optionally configure and attach the UIWindow `window` to the provided UIWindowScene `scene`.
    // If using a storyboard, the `window` property will automatically be initialized and attached to the scene.
    // This delegate does not imply the connecting scene or session are new (see `application:configurationForConnectingSceneSession` instead).

    // Use a UIHostingController as window root view controller
    if let windowScene = scene as? UIWindowScene {
        let window = UIWindow(windowScene: windowScene)
        window.rootViewController = UIHostingController(rootView: ContentView())
        self.window = window
        window.makeKeyAndVisible()
    }
} 
```

该行为并不严格限于模拟器，但由于大多数人将专门在模拟器上运行 beta 软件，因此它只会在这种情况下发生。困扰了我好久，希望对你有帮助。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2019-10-18T14:17:44.523

当我在 Xcode 11.1 上进行项目时，我遇到了这个问题。该黑屏问题可能会出现在 ViewController 之间的任何演示文稿中。

[这个](https://stackoverflow.com/a/58255416/3341089) 答案对我有帮助。因为[模式显示随着 iOS 13 的变化而改变。](https://medium.com/@hacknicity/view-controller-presentation-changes-in-ios-13-ac8c901ebc4e) 如果你在 iOS 13 之前没有遇到这个问题，请尝试在你的 ViewController 显示之前添加下面的行；

```
viewController.modalPresentationStyle = .fullScreen 
```

在您的代码可能如下所示之后；

```
let vc = UIViewController()
vc.modalPresentationStyle = .fullScreen //or .overFullScreen for transparency
self.present(vc, animated: true, completion: nil) 
```

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2020-08-07T17:23:23.570

我正在使用 android studio 开发颤振并运行模拟器，模拟器很暗，我根据接受的答案重置了内容。但这并没有解决我的问题。我的 CPU 以某种方式运行得足够高，所以我重新启动了，但没有解决问题。我打开 Xcode 并运行我的原生 iOS 应用程序之一，模拟器像往常一样重新打开。我关闭了 Xcode 并打开了 Android Studio，然后再次开始开发 Flutter 应用程序。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2020-08-14T04:54:53.843

[![在此处输入图像描述](../Images/4486d92a255b901222314ca200b97814.png)](https://i.stack.imgur.com/7lufj.png)

这就是我遇到这个问题的原因。

出于某种原因，未选中“是初始视图控制器”（对于我的主视图控制器），这导致加载时出现黑屏。

希望这可以帮助那里的人！

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2021-01-11T20:45:02.783

我注意到我不小心`var window:UIWindow?`从 AppDelegate 中删除了行。再次介绍它为我解决了这个问题！

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2021-06-03T09:12:05.773

对我来说，只需摇动设备（`Device > Shake`）。奇怪但为我工作。如果这不起作用，请尝试重置 ( `Device > Erase All Content and Settings`)，然后再次摇动设备。

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2021-12-23T04:51:41.200

在 Macbook Air 进入睡眠状态后，2021 年 12 月使用 iOS 13.7 模拟器遇到了这个问题。模拟器屏幕是黑色的，没有生命迹象。重置模拟器没有帮助。关闭所有窗口并重新启动笔记本电脑并没有帮助。最终，它`syspolicyd`占用了 350% 的 CPU。杀死这个进程解决了这个问题。

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2022-01-27T18:57:44.333

对我来说，崩溃的模拟器是带有 iOS 15.2 的 iPhone 13。没有一个解决方案奏效。

每当出现此问题时，进程“syspolicyd”的 CPU 使用率也会上升，但终止该进程也无济于事。

将设备更改为其他设备（文件 > 打开模拟器 > iOS 15.2 > iPhone 13 Pro Max）解决了该问题。之后，我再次启动了之前的设备（iPhone 13），它也可以正常工作。

# flash - 套接字策略。他们在我的脑海里翻转

> ID：14668449
> 
> 赞同：0
> 
> 时间：2013-02-03T01:09:49.707
> 
> 标签：flash, sockets, policy

我正在为我的应用程序编写 java 服务器。当我调试我的 Flash 应用程序时，一切正常。当我发布它并使其从本地主机加载时 - 它现在需要加载安全文件。

我将该文件作为字符串添加到我的服务器，当来自 flash 的请求到来时我将其传递。我从请求中读取所有数据，直到结束空字节。我没有忘记文件文本末尾的空字节。在 Flash 应用程序中，套接字连接上有事件侦听器，因此当 Event.CONNECT 触发时，发送到服务器的第一个命令。如我所见，此事件没有触发。我的服务器将策略文件传递给客户端，但客户端在获得策略后不会将套接字连接到服务器。

我整天都在试图解决这个问题。我已经不知道该怎么做了。请帮帮我。

```
String crossdomeinFile = "<?xml version=\"1.0\"?>\r\n" + "<cross-domain-policy>\r\n" + "<allow-access-from domain=\"*\" to-ports=\"*\" />\r\n" + "</cross-domain-policy>\r\n" + "\0";
System.out.println(crossdomeinFile);
ByteBuffer r = ByteBuffer.allocate(crossdomeinFile.getBytes().length);
r.put(crossdomeinFile.getBytes());
chanel.write(r); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T22:34:22.007

我解决了，都是因为NIO的写工作在非阻塞模式下，所以当我向socket写数据时，它没有完全传输。

# c++ - 如何使用旧版 glibc 编译 SPEC CPU 2006 基准测试？

> ID：14668452
> 
> 赞同：1
> 
> 时间：2013-02-03T01:10:06.510
> 
> 标签：c++, benchmarking, glibc, computer-architecture, mars-simulator

有人可以帮助我让 SPEC 基准测试选择我系统上存在的 glibc 版本 2.6.1，而不是默认的 gcc 采用吗？主要 glibc 版本低于

```
ldd --version
ldd (Ubuntu EGLIBC 2.15-0ubuntu10.3) 2.15 
```

Spec benchmark 有一个配置文件，它通过给出 gcc 位置的路径来选择编译器。我希望我可以对此配置文件进行一些更改并将其指向不同的文件夹。

我需要这样做，因为我想在内核映像具有 glibc 2.6.1 的模拟系统上运行此基准测试。该模拟系统使用 gem5 进行模拟，gem5 是一个周期精确的系统模拟器

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-16T05:56:16.097

一种方法是获取正确版本的 libglibc.so 或 libglibc.a 并在链接器命令中提供指向它的路径：

```
gcc -o a.out hello_world.o /path/to/libglib.so 
```

您可以通过在本机平台上下载或下载源代码并编译来获取 libglibc。我已经完成了第一个，如果需要可以提供更多提示。

希望这可以帮助！

# python - Matplotlib 滚动条

> ID：14668454
> 
> 赞同：1
> 
> 时间：2013-02-03T01:10:10.660
> 
> 标签：python, matplotlib

我有一个线条泛化算法，并希望在绘图中添加一个滚动条，以增加容差（即，使线条越来越泛化）。使用 matplotlib 这怎么可能？

总而言之，我希望能够单击并拖动一个滑块，该滑块将显示在线上公差的增加效果。

* * *

仍然在为此苦苦挣扎。我只想要一个简单的从 1 到 10 的滑块。

* * *

是的，演示有帮助，我只是在努力让一个滑块工作，这就是我到目前为止所拥有的，

```
fig = mp.figure()
ax = fig.add_subplot(111)
fig.subplots_adjust(left=0.25, bottom=0.25)
min0=1
max0=10
tolerance = 0

chain1 = ChainLoader('Wiggle1.txt')
chain = chain1[0]

chain2 =  chain.generalise(tolerance)

axcolor = 'lightgoldenrodyellow'
axmin = fig.add_axes([0.25, 0.1, 0.65, 0.03], axisbg=axcolor)
axmax  = fig.add_axes([0.25, 0.15, 0.65, 0.03], axisbg=axcolor)

tolerance = Slider(axmin, 'Min', 1, 10, valinit=min0)
#smax = Slider(axmax, 'Max', 0, 30000, valinit=max0)

def update(val):
    tolerance = tolerance.val
    #pp.show()

tolerance.on_changed(update)
#smax.on_changed(update)
chain2 =  chain.generalise(tolerance)
pp.plotPolylines(chain2)
pp.show() 
```

我的问题是如何编写 def update 部分。有什么帮助吗？

```
from PointPlotter import PointPlotter 
from ChainHandler import ChainLoader
pp=PointPlotter()
import matplotlib.pyplot as plt
from matplotlib.widgets import Slider 

ax = plt.subplot(111)
plt.subplots_adjust(left=0.25, bottom=0.25)

tolerance = 0 
f0 = 0
chain2 = ChainLoader('Wiggle1.txt')
for chain in chain2:

    chain2 =  chain.generalise(tolerance)
    pp.plotPolylines(chain2)

axcolor = 'lightgoldenrodyellow'

axtol = plt.axes([0.25, 0.1, 0.65, 0.03], axisbg=axcolor)

tolerance = Slider(axtol, 'tol', 0.1, 30.0, valinit=f0)

def update(val):
    tolerance = tolerance.val 
    for chain in chain2:

        chain2 =  chain.generalise(tolerance)
        pp.plotPolylines(chain2)

        pp.plotPolylines(chain2)

tolerance.on_changed(update) 

plt.show() 
```

很近！它现在正在绘图，但在使用滚动条时返回“UnboundLocalError：分配前引用的局部变量'tolerance'”。@tcaswell 有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T01:18:44.570

您想要`slider`小部件[(doc)](http://matplotlib.org/api/widgets_api.html#matplotlib.widgets.Slider)。

以下是示例中的演示：

[http://matplotlib.org/examples/widgets/slider_demo.html](http://matplotlib.org/examples/widgets/slider_demo.html)

```
import numpy as np
import matplotlib.pyplot as plt
from matplotlib.widgets import Slider, Button, RadioButtons

ax = plt.subplot(111)
plt.subplots_adjust(left=0.25, bottom=0.25)
t = np.arange(0.0, 1.0, 0.001)
a0 = 5
f0 = 3
s = a0*np.sin(2*np.pi*f0*t)
l, = plt.plot(t,s, lw=2, color='red')
plt.axis([0, 1, -10, 10])

axcolor = 'lightgoldenrodyellow'
axfreq = plt.axes([0.25, 0.1, 0.65, 0.03], facecolor=axcolor)
axamp  = plt.axes([0.25, 0.15, 0.65, 0.03], facecolor=axcolor)

sfreq = Slider(axfreq, 'Freq', 0.1, 30.0, valinit=f0)
samp = Slider(axamp, 'Amp', 0.1, 10.0, valinit=a0)

def update(val):
    amp = samp.val
    freq = sfreq.val
    l.set_ydata(amp*np.sin(2*np.pi*freq*t))
    plt.draw()
sfreq.on_changed(update)
samp.on_changed(update)

resetax = plt.axes([0.8, 0.025, 0.1, 0.04])
button = Button(resetax, 'Reset', color=axcolor, hovercolor='0.975')
def reset(event):
    sfreq.reset()
    samp.reset()
button.on_clicked(reset)

rax = plt.axes([0.025, 0.5, 0.15, 0.15], facecolor=axcolor)
radio = RadioButtons(rax, ('red', 'blue', 'green'), active=0)
def colorfunc(label):
    l.set_color(label)
    plt.draw()
radio.on_clicked(colorfunc)

plt.show() 
```

* * *

为了适应您的情况：

```
#smax.on_changed(update)
chain2 =  chain.generalise(tol)
pp.plotPolylines(chain2)

def update(val):
    tol = tolerance.val # get the value from the slider
    chain2 =  chain.generalise(tol) # shove that value into your code
    ax.cla() # clear the axes
    pp.plotPolylines(chain2) # re-plot your new results

# register the call back
tolerance.on_changed(update) 
```

重复使用变量名时要小心（你使用`tolerance`了两次，一次用于 a `float`，一次用于 the `Slider`，并且 python 会很高兴地用完全不同类型的新变量破坏你的旧变量）。

在`update`我采用最暴力的方法，清除`axes`然后重新绘制它，一般来说，你想要获取返回的艺术家`plotPolylines`并用你的新数据更新它们。（如果您需要有关该步骤的帮助，请打开一个新问题，其中包含有关您的数据结构的详细信息）。

理解的方法`.on_changed`是，当滑块注意到它已更改时，它将调用您传入的函数 ( `update`)，并带有一个参数 ( `val`)，该参数是滑块的当前值。在该函数中，您可以做任何您想做的事情，并且每次更改滑块时都会完整执行。

# c++ - 根据局部坐标转动网格

> ID：14668456
> 
> 赞同：0
> 
> 时间：2013-02-03T01:10:27.410
> 
> 标签：c++, opengl, 3d, quaternions

我在 3D 世界中有一架飞机，它的方向以任何方式保存（例如俯仰、偏航和滚动）。现在，当我想让飞机左转时，但 glRotatef 并没有做这项工作，因为它坚持全局坐标并且不关心飞机的旋转，并且简单地改变偏航也无济于事，因为这也不是相对于飞机的实际旋转，只有当飞机直飞到地平线时才意味着“左”。我需要的是这样的：

```
 float pitch = 10 , yaw = 20, roll = 30;        //some initial values
    Turn(&pitch, &yaw, &roll ,  5, 0 , 0 )   //calculate new pitch, yaw and roll as if 
    //the plane had turned 5 degrees to the right (relative to its current orientation and roll!)
    //pitch, yaw and roll are updated to reflect the new orientation. 
```

许多人建议使用四元数，但我不知道如何将它们实现为 Turn 函数（一个工作示例是 Blitz3D，它具有用于全局旋转的“RotateEntity”函数，如 glRotatef 和用于基于方向的旋转的“TurnEntity”）我认为该功能在内部是这样工作的：

*   [在OpenGL + SDL 中围绕局部轴旋转](https://stackoverflow.com/questions/8063293/opengl-sdl-rotation-around-local-axis)将俯仰、偏航、滚动到像 EulerToQuat 这样的四元数
*   使用四元数数学执行局部旋转（未找到源）
*   将四元数转换回偏航、滚动、俯仰（未找到源）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T20:31:41.940

我终于解决了这个问题，改用一直为每艘船携带一个矩阵。俯仰、偏航和横滚仅在需要时计算，这种情况很少见。最后，**glRotatef 完成了这项工作**——你只需要将它应用到已经旋转的矩阵上——并保存结果，这样就不会丢弃更改。

以下代码是我在载有 x、y、z、Matrix[16]、dx、dy、dz 的船结构上的实现。（请注意，所有船舶数组都必须使用 IdentityMatrix 进行初始化）：

```
//*************************** Turn Ship **********************************
void TurnShip(long nr,float yaw, float pitch=0,float roll=0) {
  //Turns ship by pitch, yaw and roll degrees.
  glMatrixMode(GL_MODELVIEW);

  glLoadMatrixf(&ship[nr].Matrix[0]); 
  glRotatef(yaw,0,1,0);  
  glGetFloatv(GL_MODELVIEW_MATRIX,&ship[nr].Matrix[0]);

  glLoadMatrixf(&ship[nr].Matrix[0]); 
  glRotatef(pitch,1,0,0); 
  glGetFloatv(GL_MODELVIEW_MATRIX,&ship[nr].Matrix[0]);

  glLoadMatrixf(&ship[nr].Matrix[0]); 
  glRotatef(roll,0,0,1); 
  glGetFloatv(GL_MODELVIEW_MATRIX,&ship[nr].Matrix[0]);  
} 
```

该函数所做的是加载存储在一个简单浮点数组中的船舶矩阵，对其进行操作，然后将其保存回数组。在游戏的图形部分，该数组将使用 glLoadMatrixf 加载，因此将应用到飞船上，无需任何麻烦或数学运算。

```
//*************************** Accelerate Ship relative to own orientation **
void AccelerateShip(long nr,float speedx,float speedy, float speedz)   
{   //use speedz to move object "forward".
ship[nr].dx+= speedx*ship[nr].Matrix[0];   //accelerate sidewards (x-vector)
ship[nr].dy+= speedx*ship[nr].Matrix[1];  //accelerate sidewards (x-vector)
ship[nr].dz+= speedx*ship[nr].Matrix[2]; //accelerate sidewards (x-vector)

ship[nr].dx+= speedy*ship[nr].Matrix[4];   //accelerate upwards (y-vector)
ship[nr].dy+= speedy*ship[nr].Matrix[5];  //accelerate upwards (y-vector)
ship[nr].dz+= speedy*ship[nr].Matrix[6]; //accelerate upwards (y-vector)

ship[nr].dx+= speedz*ship[nr].Matrix[8];   //accelerate forward (z-vector)
ship[nr].dy+= speedz*ship[nr].Matrix[9];  //accelerate forward (z-vector)
ship[nr].dz+= speedz*ship[nr].Matrix[10]; //accelerate forward (z-vector)
} 
```

这是我今天学到的最好的部分——教程通常不会告诉你的部分，因为它们都是关于数学的——我可以从矩阵中提取指向上方、左侧和**前方的向量**对它们施加加速度，这样我的船就可以向左、向右、向上、加速和制动——glRotatef 关心它们，所以它们总是更新，我们这边完全不涉及数学:-)

# ocaml - OCaml 将 int 列表插入二叉搜索树

> ID：14668458
> 
> 赞同：-2
> 
> 时间：2013-02-03T01:10:41.327
> 
> 标签：ocaml

如果给定一个 int 列表，如何在 OCaml 中将 int 列表中的每个元素一一插入到给定的二叉搜索树中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T10:45:42.870

```
let insert_list = List.fold_left insert_element empty_tree 
```

# html - 如何更正 web.xml 文件中的 URL 映射

> ID：14668459
> 
> 赞同：0
> 
> 时间：2013-02-03T01:10:50.033
> 
> 标签：html, jsp, servlets

这是我的场景...我的主页链接是

```
local/proj/admin-home 
```

当我浏览另一个链接时

```
local/proj/registration/organization-registry 
```

但是在那个页面上，当我将鼠标悬停在另一个链接中时，链接给了我

```
local/proj/registration/list 
```

但是这个链接必须是

```
local/proj/list 
```

所以我注意到，当我浏览到链接 local/proj/registration/organization-registry 时，该页面中的所有链接也以 local/proj/registration/ 开头，但它必须是 /local/proj/...

这是我的 xml 文件

```
<servlet>
<servlet-name>admin-home</servlet-name>
<servlet-class>web.HomeServlet</servlet-class>
</servlet>

<servlet-mapping>
<servlet-name>admin-home</servlet-name>
<url-pattern>/admin-home</url-pattern>
</servlet-mapping>

<servlet>
<servlet-name>list</servlet-name>
<servlet-class>ViewRegisteredServlet.RegisteredOrganizationServlet</servlet-class>
</servlet>

<servlet-mapping>
<servlet-name>list</servlet-name>
<url-pattern>/list</url-pattern>
</servlet-mapping>

<servlet>
<servlet-name>organization-registry</servlet-name>
<servlet-class>web_registration.OrganizationServlet</servlet-class>
</servlet>

<servlet-mapping>
<servlet-name>organization-registry</servlet-name>
<url-pattern>/registration/organization-registry</url-pattern>
</servlet-mapping> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T01:13:50.967

您显然使用的是相对链接。相对链接是不以方案开头的链接（例如`http://`），也不是以正斜杠开头的链接，`/`它会将您带到域根目录。

```
<a href="list">list</a> 
```

这样的链接是相对于当前 URL 的（正如您在浏览器的地址栏中看到的那样）。所以它基本上指向同一个文件夹中的资源。

您实际上需要向上一个文件夹：

```
<a href="../list">list</a> 
```

或者，更好的是，使其与域相关，这样您在移动资源时就不需要弄乱链接。

```
<a href="${pageContext.request.contextPath}/list">list</a> 
```

这一切都与您的 servlet 映射无关。这只是一个基本的 Web 开发概念。

### 也可以看看：

*   [调用转发到 JSP 的 Servlet 时，浏览器无法访问/查找相关资源，如 CSS、图像和链接](https://stackoverflow.com/questions/3655316/browser-cant-access-find-relative-resources-like-css-images-and-links-when-cal/3658735#3658735)

# python - 通过 DictWriter (Python) 将字典写入 CSV 文件

> ID：14668460
> 
> 赞同：2
> 
> 时间：2013-02-03T01:11:17.570
> 
> 标签：python, csv, dictionary

DictWriter 似乎对我不起作用。

当前代码：

```
myfile = open('hashdict.csv', 'wb')
fieldnames = ('md5', 'value')
myWriter = csv.DictWriter(myfile, fieldnames=fieldnames)
headers = dict((n,n) for n in fieldnames)
myWriter.writerow(headers)
for n in dictToSearch:
    myWriter.writerow(n)
myfile.close() 
```

追溯：

```
Traceback (most recent call last):
  File "hash.py", line 42, in <module>
    myWriter.writerow(n)
  File "C:\Python27\lib\csv.py", line 148, in writerow
    return self.writer.writerow(self._dict_to_list(rowdict))
  File "C:\Python27\lib\csv.py", line 144, in _dict_to_list
    ", ".join(wrong_fields))
ValueError: dict contains fields not in fieldnames: d, 1, a, 5, 0, d, 0, a, 1, 7
, 0, e, 5, e, a, 9, f, e, b, 6, f, 7, 9, 6, 1, 3, 6, 3, f, 6, d, 9 
```

字母数字字符来自 MD5 哈希，但这就是我能告诉你的全部内容。我查看了文档，似乎无法理解它。我要做的是从名为 dictToSearch 的字典中创建一个 CSV 文件。

提前感谢您的帮助，如果您需要任何其他信息，请告诉我。

完整代码链接：http: [//pastebin.com/A3E4AJfV](http://pastebin.com/A3E4AJfV)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T01:36:20.700

The key missing piece of information here: what is dictToSearch? I guess that it's something like {'e2fc714c4727ee9395f324cd2e7f331f': 'abcd', '098f6bcd4621d373cade4e832627b4f6': 'test'}.

If so, the issue here is that "for n in dictToSearch" sets n to the first key of dictToSearch - which will be an MD5 hash. writerow(n) then interprets that MD5 hash string as a dictionary in its own right consisting of single-character keys and values, not as a string.

I suspect that what you really want to do is:

```
for key, value in dictToSearch.items():
    myWriter.writerow({'md5' : key, 'value': value}) 
```

which converts an entry from dictToSearch into its own dictionary matching the field names you're using.

# jquery - 带有 gCal 的 fullCalendar 显示第二个空白日历

> ID：14668461
> 
> 赞同：0
> 
> 时间：2013-02-03T01:11:18.970
> 
> 标签：jquery, html, fullcalendar, google-calendar-api

我有一个使用 fullCalendar 成功渲染的谷歌日历，但由于某种原因，我在我的#trainingCalendar div 中渲染了两个日历：一个在页面顶部空白，另一个是正确的（谷歌日历与显示的可点击事件相关联）下面一个。这是html，尽管它非常简单：

```
<body>
    <div id="training">  //more stuff will go in this div, but I wanted to keep it as simple as possible for troubleshooting
        <div id="trainingCalendar">
        </div>
    </div> 
    <br class="clearfix" />
    <div id="footer">
        &copy; 2012 darkermarkerproductions.com
    </div>
</body> 
```

...这是页面本身：[http ://www.darkermarkerproductions.com/trainingCalendar.html](http://www.darkermarkerproductions.com/trainingCalendar.html)

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T01:51:26.160

您正在运行它两次——一次在*scriptMain.js*的顶部附近，一次在底部附近。您需要删除此代码：

```
$('#trainingCalendar').fullCalendar({
    // your options here
}); 
```

从*scriptMain.js*的底部开始。

# php - PHP exec(psexec.exe) 无限期挂起

> ID：14668462
> 
> 赞同：2
> 
> 时间：2013-02-03T01:11:38.770
> 
> 标签：php, exec, psexec

我在 Windows 盒子上有一个开发/测试设置，需要测试调用后台进程。我使用[http://www.somacon.com/p395.php](http://www.somacon.com/p395.php)作为运行后台服务的选项列表。

这是我尝试运行的示例代码：

```
$string = "PsExec.exe -d cmd /c \"mspaint\"";
echo $string;
exec($string, $data); 
```

当我在命令行中键入它时，这有效。

我没有尝试在 Windows 上做很多 exec，但是在迁移到 Linux 机器之前能够在本地测试它会很好。

现在，我认为这与 psexec 打开一个新窗口有关吗？但是，我不知道如何解决这个问题。

没有生成 apache 或 PHP 错误日志，页面永远不会停止。这似乎也覆盖了 PHP 的最大执行时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-07T19:08:34.187

## 编辑：

这不是完全正确的答案。该命令`psexec \\machine cmd.exe /C 1 & dir`不会挂起，因为`psexec`首先返回说该命令`1`在远程计算机中不存在，然后`dir`在本地计算机中进行评估。我被 cmd 运算符命令欺骗了。`&`操作员在本地进程中被调用，而`cmd.exe`不是在远程进程中。但是，如果您引用命令，逻辑仍然适用：`psexec \\machine cmd.exe /C "1 & dir"`。

## 原答案：

在 Windows 中的 PHP 中调用[psexec时发生了一些奇怪的事情。](http://technet.microsoft.com/en-us/sysinternals/bb897553.aspx)无论您使用的是`shell_exec()`,还是. 无论如何它都会挂起。`exec()``popen()``proc_open()`

老实说，我不知道发生了什么，您还可以下载[PsExplorer](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)以跟踪您的进程命令行、参数等。您会发现这个工具非常有用。

我在 Windows 上使用 XAMPP，经过某些测试后我发现：

首先创建一个测试文件（即`test.php`）并将其放在您的 Web 服务器中，以便您可以使用以下内容访问它：

```
 <?php
      echo "<pre>".shell_exec("psexec \\\\machine <options> cmd.exe /C dir")."</pre>";
   ?> 
```

请注意，您可以使用`GET`参数来创建更灵活的示例。要在您测试网页之前揭穿这确实有效，请发出命令`php <path-to-the-file>\test.php`。这将完美地工作。但是，它不适用于网络浏览器。

如果你终止进程，你会得到第一行：`El volumen de la unidad C no tiene etiqueta.`. 下一行，在我的语言中包含一个口音，所以我认为这可能是编码（或代码页）问题。所以代替`cmd.exe /C dir`我测试了`cmd.exe /C chcp 850 && dir`. 令我惊讶的是，这很有效。

然后，我意识到，无论您在它之前设置什么命令，例如，它也将起作用`cmd.exe /C 123 & dir`（请注意单`&`，因为我没有评估命令输出）。

老实说，我不知道`psexec`通过网络浏览器使用 PHP 发生了什么。更令人惊讶的是，命令喜欢`cmd.exe /C copy cmd.exe cmd.exe.deleteme`并且`cmd.exe /C mkdir deletethis`会起作用！

因此，您可以尝试一下，`cmd.exe /C 1 & \"mspaint\"`因为您的问题和我的问题相似。对于单个命令可能是一种解决方法，但我正在开发一个用于安装软件的无人值守框架，并且我的所有文件都是`.cmd`或`.exe`或`.bat` 文件。

让我知道如果你发现了一些有趣的东西:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-19T12:53:03.863

**我有办法！**

这个话题很老，但仍然相关。我想使用 PsExec 2.2 和 PHP 7.2.0 RC3 来远程执行脚本。我需要脚本的输出，所以我使用`PsExec.exe -accepteula \\HOST -u xxx -p xxx`with `>> LOGFILE 2>&1`。

因为我不想等待脚本完成，所以我`exec()`这样使用：`exec('start /p cmd /c PsExec.exe -accepteula \\HOST -u xxx -p xxx >> LOGFILE 2>&1')`. 我的 php 脚本继续工作，PsExec 也完成了他的工作。

**一切正常，但我总是只包含输出`LOGFILE`的第一行`STDOUT`**。

我尝试了这里提到的许多解决方案，但没有一个对我有用。直接在中执行命令`CMD`，PsExec 返回所有行，`STDOUT`但在 php 内部却没有。

在我的 php 文档中，`exec()`我发现有些人使用 PsExec 无需等待即可运行程序的评论（[http://php.net/manual/de/function.exec.php#86438](http://php.net/manual/de/function.exec.php#86438)）。作为最后的机会，我尝试了以下方法：`exec('PsExec.exe -accepteula -i -d cmd /c PsExec.exe -accepteula \\HOST -u xxx -p xxx >> LOGFILE 2>&1')`......而且它有效！

PsExec 现在将所有内容返回到我的`LOGFILE`. 我希望我能帮助你并节省你一些时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-12T21:26:03.037

好的，这就是事情。我也陷入了与你类似的情况，希望我这么晚才发表评论，你一定也想出了一个办法。但是对于那些仍然在这个问题中的人，我建议他们一些提示。
1）贴出来的代码超级好，没问题。如果您的页面无限挂起，请尝试在源 exe 之前添加 -i -d 参数。[（请参阅此处](http://ss64.com/nt/psexec.html)的文档）。您还可以在命令中添加 -accepteula (EULA) 标志以让页面加载而不是等待该命令完成（解决无限等待问题）。
2）对我来说，这些东西没有用。这并不意味着你们不要尝试这些事情。如果您的代码开始工作，那么这些是第一步，那对您来说很好。否则，创建另一个帐户作为管理帐户，在开始菜单中键入**services.msc**，您将看到页面在那里。搜索 wampapache 或 xammp 服务，不包括 mysqld 之一。然后只需单击该服务 .GO**登录**选项卡，选择**此帐户**。选择以前创建的管理员帐户，如果您设置，请键入其密码，否则将文本框留空。将该帐户的名称键入为 \\accname 的名称场地 。如果您不知道帐户名称，请单击**浏览**->**高级**->**立即查找**您将看到该名称帐户。选择，应用设置并重新启动 wamp 应用程序，您就可以开始了 :)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-15T17:11:02.647

不确定这是否得到了明确的回答，但我在 PSEXEC 挂起时遇到了同样的问题，尽管在我的情况下，在某些机器上它确实如此，而在其他机器上却没有。结果证明是接受 EULA。在我从命令行运行它并使用与我的 PHP 脚本 *相同的用户名/密码的机器上，它运行时没有挂起。*

进一步的研究表明，我可以通过将 EULA 包含在从 PHP 执行的命令中来指定 EULA 接受：

这确实挂了：`psexec \\MACHINENAME ...`

这没有： `psexec /accepteula \\MACHINENAME ...`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-14T20:56:59.227

还要确保仔细检查您输入 exec 命令的字符串。看似微不足道，但让我难倒了一段时间。在许多情况下，PHP 会转义机器地址中的双反斜杠，这会导致一切都失败。要解决这个问题，请创建您的字符串，如：

```
$string = 'PSExec /accepteula \\\\MACHINENAME ...' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-07T18:45:36.173

我目前的解决方案是使用 WScript.Shell：

```
$string = "cmd /c \"cd {$full_base}{$newSource} && ant release > compile.txt\"";
$Shell = new COM("WScript.Shell"); 
$exec = $Shell->Run($string, 0, false); 
```

# mysql - mysql连接查询不返回结果

> ID：14668465
> 
> 赞同：0
> 
> 时间：2013-02-03T01:12:16.260
> 
> 标签：mysql

以下查询应返回 3 个结果，但返回零。该`following`表具有所有必要的行，这些行应与`strings`表中的行连接以产生 3 个结果。你能在查询中发现任何错误吗？

```
$getdash = $connectdb->prepare(
  "SELECT parent.* 
   FROM `strings` as parent 
   JOIN `following` ftable 
   ON ftable.userid=:userid
   WHERE ((ftable.sid=parent.sid AND ftable.page='1') 
    OR (ftable.sid=parent.sid AND ftable.position=parent.position AND ftable.page='0') 
    OR (ftable.profile=parent.starter)) ");

$executequery = $getdash->execute(array(":userid"=>16));

$found = $getdash->rowCount(); 
```

# javascript - 在 node.js 中发出 HTTP 请求并发送数据体

> ID：14668466
> 
> 赞同：2
> 
> 时间：2013-02-03T01:12:28.303
> 
> 标签：javascript, node.js, http, client-server

我目前正在阅读 Guillermo Rauchs “Smashing Node.Js”一书。我被困在第 7 章，任务是设置客户端/服务器并通过 http 连接从客户端向服务器发送字符串。该字符串应从服务器打印。

客户端代码：

```
var http = require('http'), qs = require('querystring');

function send (theName) {
    http.request({
        host: '127.0.0.1'
        , port: 3000
        , url: '/'
        , method: 'GET'
    }, function (res) {
        res.setEncoding('utf-8');
        res.on('end', function () {
            console.log('\n   \033[090m request complete!\033[39m');
            process.stdout.write('\n   your name:  ');
        })
    }).end(qs.stringify({ name: theName}));
}

process.stdout.write('\n  your name:  ');
process.stdin.resume();
process.stdin.setEncoding('utf-8');
process.stdin.on('data', function (name) {
   send(name.replace('\n', ''));
}); 
```

服务器：

```
var http = require('http');
var qs = require('querystring');

http.createServer(function (req, res) {
    var body = '';
    req.on('data', function (chunk) {
        body += chunk;
    });
    req.on('end', function () {
        res.writeHead(200);
        res.end('Done');
        console.log('\n got name \033[90m' + qs.parse(body).name + '\033[39m\n');
    });

}).listen(3000); 
```

我启动客户端和服务器。客户端似乎工作：

```
mles@se31:~/nodejs/tweet-client$ node client.js 

your name:  mles

   request complete!

your name: 
```

但是在服务器端，它只显示一个未定义的：

```
mles@se31:~/nodejs/tweet-client$ node server.js 

got name undefined 
```

根据这本书，这里也应该是一个“mles”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T01:41:26.960

```
, method: 'GET' 
```

should be

```
, method: 'POST' 
```

GET requests do not have a body so there is nothing to parse on the server's side.

# conditional - 条件组件声明和以下 if 等式

> ID：14668468
> 
> 赞同：7
> 
> 时间：2013-02-03T01:12:41.987
> 
> 标签：conditional, declaration, modelica

我正在尝试建立一个模型，该模型将根据是否存在某些组件（在我的情况下为流体端口）具有略微不同的方程。

如下代码将不起作用：

```
parameter Boolean use_component=false;
Component component if use_component;
equation
if use_component then
  component.x = 0;
end if; 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-04T13:56:16.187

如果要使用条件组件，则需要注意一些限制。Modelica 3.3 规范的第 4.4.5 节很好地总结了它。它说“如果条件为假，则删除组件、其修饰符以及任何涉及该组件的连接方程”。我将在一秒钟内向您展示如何使用它来解决您的问题，但首先我想解释一下为什么您的解决方案不起作用。

这个问题与检查模型有关。在你的情况下，很明显方程`component.x`和分量`component`要么都存在，要么都不存在。那是因为您已将它们绑定到同一个布尔变量。但是如果你没有这个怎么办：

```
parameter Real some_number;
Component component if some_number*some_number>4.0;
equation
if some_number>=-2 and some_number<=2 then
  component.x = 0;
end if; 
```

我们可以看到这在逻辑上与您的情况相同。`component.x`不在的时候就没有存在的机会`component`。**但是我们能普遍**证明这些事情吗？不。

因此，当引入条件组件时，实现了保守语义，它总是可以轻松确保所涉及的变量和方程组永远不会“不同步”。

让我们回到规范所说的内容：“如果条件为假，则删除组件、其修饰符以及任何涉及该组件的连接方程”

对于您的情况，解决方案可能非常简单。根据您声明“x”的方式，您可以只添加修改`component`，即

```
parameter Boolean use_component=false;
Component component(x=0) if use_component; 
```

这样做的好处是修改仅适用于`component`并且如果`component`不存在，则修改（方程式）也不是。所以变量`x`和它的相关方程是“同步的”。但这并不适用于所有情况（IIRC，`x`必须有一个`input`限定符才能工作......也许在你的情况下这是可能的？）。

还有两个选择。首先，将方程`component.x`放入`component`. 第二个是在那个上面引入一个连接器`component`，如果连接了，就会生成你想要的方程。与修改案例（这不是巧合）一样，您可以`x`与某种输入连接器关联，然后执行以下操作：

```
parameter Boolean use_component;
Component component if use_component;
Constant zero(k=0);
equation
connect(k.y, component.x); 
```

现在，我可以想象，在考虑了所有三种情况（修改、内化方程和使用`connect`）之后，您得出的结论是它们都不起作用。如果是这种情况，那么我会谦虚地建议您对如何设计组件有疑问。出现这些限制的原因与必须*自行检查组件的*正确性有关。这要求组件是完整的（规范术语中的“平衡”）。

如果您无法使用我上面提到的方法解决问题，那么我怀疑您确实存在平衡问题，并且您可能需要以某种方式重新定义组件的边界。如果是这种情况，我建议您在此处打开另一个问题，详细说明您正在尝试做什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T10:56:34.760

我认为这不起作用的原因是解析器将查找变量“component.x”的声明，如果组件不活动，则该声明不存在。即使您在注释中插入“Evaluate=true”，它也不起作用。在我看来，最干净的解决方案是在方程级别工作，并在同一块中启用不同的方程组。您可以使用正确的连接器和参数创建一个包装模型，然后如果它是一个因果模型，例如，您可以使用可替换的类来将模型参数化为函数，或者在非因果模型的情况下，将方程放入其中if 语句。另一种可能的解决方法是将两个不同的模型放在一个块中，这样您就可以将它们的变量用于方程部分，然后建立条件连接，以启用具有所选行为的块的使用。换句话说，您可以建立一个内部有两个块的“包装模型”，然后将连接方程放置在 if 语句中的包装模型的连接器上。请记住建立模型，以便即使对于未使用的块也会有一个一致的方程系统。但这不是最好的解决方案，因为如果块很大，您将不得不等待更长的时间进行编译，因为所有内容都会被编译。请记住建立模型，以便即使对于未使用的块也会有一个一致的方程系统。但这不是最好的解决方案，因为如果块很大，您将不得不等待更长的时间进行编译，因为所有内容都会被编译。请记住建立模型，以便即使对于未使用的块也会有一个一致的方程系统。但这不是最好的解决方案，因为如果块很大，您将不得不等待更长的时间进行编译，因为所有内容都会被编译。

我希望这个能帮上忙，

马可

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-12T14:43:06.587

您还可以制作一个在图形层中不可见的虚拟组件：

```
connector DummyHeatPort 
  "Dummy heatport to facilitate optional heatport.  Use this with a conditional heatport by connecting it to the heatport.  Then use the -DummyHeatPort.Q_flow in the thermal energy balance."
  Modelica.SIunits.Temperature T "Port temperature";
  flow Modelica.SIunits.HeatFlowRate Q_flow 
    "Heat flow rate (positive if flowing from outside into the component)";
end DummyHeatPort; 
```

然后当它在两端口模型中使用时

```
 Modelica.Thermal.HeatTransfer.Interfaces.HeatPort_a heatport if use_heat_port;
 DummyHeatPort dummy_heatport; 
```

...

```
 equation
 flowport_a.H_flow + flowport_b.H_flow - dummy_heatport.Q_flow = storage 
    "thermal energy balance";
  connect(dummy_heatport, heatport); 
```

这样，如果存在热端口，就会使用该热端口，但不会导致错误。

# java - AppEngine 控制台错误：无法解析响应 JSON 数据

> ID：14668472
> 
> 赞同：0
> 
> 时间：2013-02-03T01:13:31.183
> 
> 标签：java, google-app-engine, mapreduce

几周以来，当我在 AppEngine 上启动 map-reduce 任务时，我收到“错误 - 无法解析响应 JSON 数据”。尝试访问控制台时。知道如何解决这个问题吗？

转储的开始：

```
Error for /_ah/pipeline/rpc/tree
java.lang.NoClassDefFoundError: org/json/JSONObject
    at com.google.appengine.tools.pipeline.impl.util.JsonUtils.mapToJson(JsonUtils.java:34)
    at com.google.appengine.tools.pipeline.impl.servlets.JsonGenerator.buildJsonRepresentation(JsonGenerator.java:106)
    at com.google.appengine.tools.pipeline.impl.servlets.JsonGenerator.getJson(JsonGenerator.java:48)
    at com.google.appengine.tools.pipeline.impl.servlets.JsonHandler.doGet(JsonHandler.java:44)
    at com.google.appengine.tools.pipeline.impl.servlets.PipelineServlet.doGet(PipelineServlet.java:96)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at fr.mncc.gwttoolbox.rpc.server.filters.CrawlFilter.doFilter(CrawlFilter.java:82)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.appstats.AppstatsFilter.doFilter(AppstatsFilter.java:141)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T17:57:57.680

您需要将 JAR 从 java/lib 目录复制到您的 war/WEB-INF/lib 目录，截至当前版本，这包括 chart4j-1.2.jar、commons-logging-1.1.1.jar、guava-14.0- rc1.jar 和 json.jar。这应该可以解决找不到类的错误。

# c# - 参数化更新

> ID：14668473
> 
> 赞同：3
> 
> 时间：2013-02-03T01:13:31.947
> 
> 标签：c#, .net, sql, ms-access, parameters

我正在尝试更新访问文件 (.accdb) 中的记录。我正在尝试使用 .net OleDbCommand 和 OleDbParameters。我还尝试使用通用模型并将所有命令和参数存储在 System.Data.Common 抽象等效项中，以便我可以轻松切换到 SQL Server（我确实计划这样做）

**所以这是实际使用的命令**

**编辑 2/2/2013 - 晚上 9:10** command.ExecuteNonQuery 在名为 ExecuteNonQuery() 的方法内，connectionString 和 command 在 DataAccess 类构造函数中定义

```
public class DataAccess
{

    private string connectionString;
    private DbConnection connection;
    private DbCommand command;
    private DbDataReader reader;
    private DataTable data;

    public DataAccess()
    {
        connectionString = ConfigurationSettings.AppSettings["ConnectionString"];

        switch (ConfigurationSettings.AppSettings["DataBaseType"])
        {
            case "oledb":
                connection = new OleDbConnection(connectionString);
                command = new OleDbCommand(string.Empty, (OleDbConnection)connection);
                break;
            case "SQL":                 
                connection = new SqlConnection(connectionString);
                command = new SqlCommand(string.Empty, (SqlConnection)connection);
                break;
            default:
                break;
        }

    }

    public void ExecuteNonQuery(string SQL, params DbParameter[] parameters)
    {
        command.CommandType = CommandType.Text;
        command.CommandText = SQL;
        command.Parameters.AddRange(parameters);

        try
        {
            command.Connection.Open();

            try
            {
                command.ExecuteNonQuery();
            }
            catch (Exception ex)
            {
                throw ex;
            }
            finally
            {
                command.Connection.Close();
            }
        }
        catch (Exception ex)
        {
            throw ex;
        }
    }

    public DbParameter NewParameter(string name, object value)
    {
        DbParameter param;

        switch (ConfigurationSettings.AppSettings["DataBaseType"])
        {
            case "oledb":
                param = new OleDbParameter(name, value);
                break;
            case "SQL":
                param = new SqlParameter(name, value);
                break;
            default:
                param = null;
                break;
        }

        return param;
    } 
```

**这些是 App.Config 文件中的属性**

`<add key="DataBaseType" value="oledb"/>`

`<add key="ConnectionString" value="Provider=Microsoft.ACE.OLEDB.12.0;Data Source=data.accdb"/>`

现在的问题是在更新语句中使用参数时，更新永远不会发生，也永远不会引发错误。这是它的代码。

**编辑 2/2/2013 - 晚上 9:10** 函数 DataAccess.NewParameter 在第一个代码块中

```
DALayer.ExecuteNonQuery("UPDATE TileTypes SET Title = @Title, Picture = @Picture, Color = @Color WHERE ID = @ID",
 DALayer.NewParameter("@Title", titleTextBox.Text.Trim()),
 DALayer.NewParameter("@Picture", typePictureBox.ImageLocation),
 DALayer.NewParameter("@Color", colorButton.BackColor.ToArgb()),
 DALayer.NewParameter("@ID", id)); 
```

我已将查询复制到访问中，并将所有参数名称替换为传递的实际数据，这很好用。我尝试将 SQL 文本中的所有参数替换为 ? 性格没有影响。我尝试将所有表名和列名括在括号 [] 中也没有效果。

*   ID 是一个自动编号字段
*   标题是一个文本字段
*   图片是一个文本字段
*   颜色是一个长整数字段

这是一些直接从 Visual Studio 监视窗口中的参数复制的示例数据：

*   “编辑”（标题）
*   -1（颜色）
*   “数据\图像\Edit_000000.jpg”（图片）
*   740（身份证）

该 ID 确实存在于数据库中，并且在执行查询后未更改。

**编辑 2/2/2013 - 晚上 9:10** 我不确定如何检查哪个数据库实际上正在更新，我唯一能想到的是使用相同的连接字符串和连接对象我使用相同的 ExecuteNonquery 执行了插入语句方法，它在我正在查看的数据库中工作。并且更新语句就像这样工作得很好（没有参数）：

```
DALayer.ExecuteNonQuery("UPDATE TileTypes SET Title = '" + titleTextBox.Text + 
"', Color = " + colorButton.BackColor.ToArgb() + ", Picture = '" + 
imageLocation + "' WHERE ID = " + id); 
```

**编辑 2/2/2013 - 晚上 9:41** 我已经使用了everything.exe 在我的计算机上搜索了我计算机上的所有 data.accdb 文件，除了原始文件之外，我没有找到任何实际的 .accdb 文件，但我确实找到了这些 .lnk文件，我不相信他们可以改变这个过程，但我还是会提到它

数据.accdb.LNK

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T02:16:45.733

您正在尝试做的是我过去也做过的事情，但允许连接到 OleDB（如 Access、Visual FoxPro 等）、SQL-Server、SyBase SQLAnywhere，也许我的实现可能会对您有所帮助。首先，您将用于连接的每个元素都在一个公共接口上工作，例如 IDbConnection、IDbCommand、IDbParameter 等。

下面我发布的是我最初如何构建这种多数据库连接类型的一小部分。我已经剥离了一堆并没有实际测试这个剥离的版本，但它应该是你运行的一个很好的基准。

前提是基线“MyConnection”几乎就像一个抽象，但具有在任何子类定义下都存在的属性和一些“通用”方法。由此可见，每个函数和参数类型都是基于“I”接口的，而不是具体的。但是，每个派生都将创建其 OWN 正确类型。这消除了“案例”一切的需要。希望这对您的数据访问层开发有所帮助。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Data;

// for OleDB (Access, VFP, etc)
using System.Data.OleDb;
// for SQL-Server
using System.Data.SqlClient;

namespace DataMgmt
{
    public class MyConnection
    {
        // no matter the connection to server, it will require some "handle"
        // that is of type "IDbConnection"
        protected IDbConnection sqlConnectionHandle;

        // when querying, ANY query could have an exception that needs to have
        // possible further review for handling
        public Exception LastException
        { get; protected set; }

        // When calling an execute command (select, insert, update, delete), 
        // they all can return how many rows affected
        public int RowsAffectedByQuery
        { get; protected set; }

        // different databases could have different connection strings. Make
        // virtual and throw exception so sub-classed must return proper formatted.
        public virtual string GetConnectionString()
        { throw new Exception("GetConnectionString() method must be overridden."); }

        // each has its own "IDbConnection" type too
        protected virtual IDbConnection SQLConnectionHandle()
        { return sqlConnectionHandle; }

        public virtual IDbCommand GetSQLDbCommand()
        { throw new Exception("GetSQLDbCommand() method must be overridden."); }

        // generic routine to get a data parameter...
        public virtual IDbDataParameter AddDbParmSpecificValue(string ParmName, object UnknownValue)
        { throw new Exception("AddDbParmSpecificValue() method must be overwritten per specific connection."); }

        // generic "Connection" since they are all based on IDbCommand...
        public override bool SQLConnect()
        {
            // pre-blank exception in case remnant from previous activity
            LastException = null;

            if (sqlConnectionHandle.State != System.Data.ConnectionState.Open)
                try
                {
                    // if not open, always make sure we get updated connection string
                    // if ever changed by some other "unknown" condition...
                    sqlConnectionHandle.ConnectionString = GetConnectionString();
                    sqlConnectionHandle.Open();
                }
                catch (Exception ex)
                {
                    // Preserve in generic sqlException" property for analysis OUTSIDE this function
                    LastException = ex;
                }

            // if NOT connected, display message to user and set error code and exception
            if (sqlConnectionHandle.State != System.Data.ConnectionState.Open)
                LastException = new Exception("Unable to open database connection.");

            // return if it IS successful at opening the connection (or was already open)
            return sqlConnectionHandle.State == System.Data.ConnectionState.Open;
        }

        // likewise disconnect could be common
        public void SQLDisconnect()
        {
            if (sqlConnectionHandle != null)
                if (sqlConnectionHandle.State == ConnectionState.Open)
                    sqlConnectionHandle.Close();
        }

        public bool SqlExecNonQuery( IDbCommand SQLCmd, DataTable oTbl)
        {
            // pre-clear exception
            LastException = null;

            // fill the table...
            SQLConnect();
            try
            {
                RowsAffectedByQuery = SQLCmd.ExecuteNonQuery();
            }
            catch (Exception e)
            {
                LastException = e;
                throw e;
            }
            finally
            {
                SQLDisconnect();
            }

            // Its all ok if no exception error
            return LastException == null;
        }

    }

    // Now, build your connection manager per specific type
    public class MyAccessConnection : MyConnection
    {
        public MyAccessConnection()
        {   sqlConnectionHandle =  new OleDbConnection();   }

        public override string GetConnectionString()
        {   return "Your Connection String from AppSettings.. any changes if OleDb vs SQL"; }

        public override IDbCommand GetSQLDbCommand()
        {   return new OleDbCommand( "", (OleDbConnection)sqlConnectionHandle ); }

        public override IDbDataParameter AddDbParmSpecificValue(string ParmName, object UnknownValue)
        {   return new OleDbParameter( ParmName, UnknownValue );    }

    }

    public class MySQLConnection : MyConnection
    {
        public MySQLConnection()
        {   sqlConnectionHandle = new SqlConnection();  }

        public override string GetConnectionString()
        { return "Your Connection String from AppSettings... any alterations needed??? "; }

        public override IDbCommand GetSQLDbCommand()
        { return new SqlCommand ("", (SqlConnection)sqlConnectionHandle); }

        public override IDbDataParameter AddDbParmSpecificValue(string ParmName, object UnknownValue)
        { return new SqlParameter(ParmName, UnknownValue); }
    }

    // Now to implement... pick one... Access or SQL-Server for derivation...
    public class MyDataLayer : MyAccessConnection
    {
        public void SomeSQLCall()
        {
            IDbCommand sqlcmd = GetSQLDbCommand();
            sqlcmd.CommandText = "UPDATE TileTypes SET Title = @Title, "
                                + "Picture = @Picture, "
                                + "Color = @Color "
                                + "WHERE ID = @ID";
            sqlcmd.Parameters.Add( AddDbParmSpecificValue( "@Title", titleTextBox.Text.Trim() ));
            sqlcmd.Parameters.Add( AddDbParmSpecificValue( "@Picture", typePictureBox.ImageLocation) );
            sqlcmd.Parameters.Add( AddDbParmSpecificValue( "@Color", colorButton.BackColor.ToArgb()) );
            sqlcmd.Parameters.Add( AddDbParmSpecificValue(  "@ID", id));

        if( SqlExecNonQuery(sqlcmd))
            // Good to go
            DoSomethingWithTheData;
        else
            // Notify of whatever error thrown....

        }
    }
} 
```

所以.. 正如你所看到的，我的最后一个类特别是从 Access 或 SQL 派生的。然后，我可以创建我的方法来获取数据、调用更新等等。获取一个 SQL 命令（它返回正确的类型并自动附加到其相应的“连接句柄”对象，准备文本，添加参数，执行它。

# python - 在 Python 中存储大型字典的 Pickle 与搁置

> ID：14668475
> 
> 赞同：24
> 
> 时间：2013-02-03T01:13:58.210
> 
> 标签：python, pickle, shelve

如果我将一个大目录存储为一个`pickle`文件，通过加载它是否`cPickle`意味着它会一次全部消耗到内存中？

如果是这样，是否有一种跨平台的方式来获得类似的东西`pickle`，但是在一个项目上访问每个条目的一个键（即避免将所有字典加载到内存中并且只按名称加载每个条目）？我知道`shelve`应该这样做：它是否像便携式一样`pickle`？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-03T02:07:01.793

> 我知道 shelve 应该这样做：它像泡菜一样便携吗？

是的。[`shelve`](http://docs.python.org/2/library/shelve.html)是[Python 标准库](http://docs.python.org/2/library/)的一部分，是用 Python 编写的。

### 编辑

所以如果你有一本大字典：

```
bigd = {'a': 1, 'b':2, # . . .
} 
```

而且您想保存它而不必稍后再阅读整个内容，然后不要将其保存为泡菜，最好将其保存为架子，一种磁盘字典。

```
import shelve

myShelve = shelve.open('my.shelve')
myShelve.update(bigd)
myShelve.close() 
```

然后你可以：

```
import shelve

myShelve = shelve.open('my.shelve')
value = myShelve['a']
value += 1
myShelve['a'] = value 
```

您基本上将搁置对象视为字典，但这些项目存储在磁盘上（作为单独的泡菜）并根据需要读入。

如果您的对象可以存储为属性列表，那么[sqlite](http://docs.python.org/2/library/sqlite3.html)可能是一个不错的选择。货架和泡菜很方便，但只能通过 Python 访问，但 sqlite 数据库可以从大多数语言中读取。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-09-15T13:09:24.057

如果您想要一个比 更健壮的模块`shelve`，您可以查看`klepto`. `klepto`旨在为磁盘或数据库上与平台无关的存储提供字典接口，并为处理大数据而构建。

在这里，我们首先创建一些存储在磁盘上的腌制对象。他们使用`dir_archive`，每个文件存储一个对象。

```
>>> d = dict(zip('abcde',range(5)))
>>> d['f'] = max
>>> d['g'] = lambda x:x**2
>>> 
>>> import klepto
>>> help(klepto.archives.dir_archive)       

>>> print klepto.archives.dir_archive.__new__.__doc__
initialize a dictionary with a file-folder archive backend

    Inputs:
        name: name of the root archive directory [default: memo]
        dict: initial dictionary to seed the archive
        cached: if True, use an in-memory cache interface to the archive
        serialized: if True, pickle file contents; otherwise save python objects
        compression: compression level (0 to 9) [default: 0 (no compression)]
        memmode: access mode for files, one of {None, 'r+', 'r', 'w+', 'c'}
        memsize: approximate size (in MB) of cache for in-memory compression

>>> a = klepto.archives.dir_archive(dict=d)
>>> a
dir_archive('memo', {'a': 0, 'c': 2, 'b': 1, 'e': 4, 'd': 3, 'g': <function <lambda> at 0x102f562a8>, 'f': <built-in function max>}, cached=True)
>>> a.dump()
>>> del a 
```

现在，数据都在磁盘上，让我们选择要加载到内存中的数据。`b`是内存中的字典，而`b.archive`将文件集合映射到字典视图中。

```
>>> b = klepto.archives.dir_archive('memo')
>>> b
dir_archive('memo', {}, cached=True)
>>> b.keys()   
[]
>>> b.archive.keys()
['a', 'c', 'b', 'e', 'd', 'g', 'f']
>>> b.load('a')
>>> b
dir_archive('memo', {'a': 0}, cached=True)
>>> b.load('b')
>>> b.load('f')
>>> b.load('g')
>>> b['g'](b['f'](b['a'],b['b']))
1 
```

`klepto``sql`还为存档提供相同的接口。

```
>>> print klepto.archives.sql_archive.__new__.__doc__
initialize a dictionary with a sql database archive backend

    Connect to an existing database, or initialize a new database, at the
    selected database url. For example, to use a sqlite database 'foo.db'
    in the current directory, database='sqlite:///foo.db'. To use a mysql
    database 'foo' on localhost, database='mysql://user:pass@localhost/foo'.
    For postgresql, use database='postgresql://user:pass@localhost/foo'. 
    When connecting to sqlite, the default database is ':memory:'; otherwise,
    the default database is 'defaultdb'. If sqlalchemy is not installed,
    storable values are limited to strings, integers, floats, and other
    basic objects. If sqlalchemy is installed, additional keyword options
    can provide database configuration, such as connection pooling.
    To use a mysql or postgresql database, sqlalchemy must be installed.

    Inputs:
        name: url for the sql database [default: (see note above)]
        dict: initial dictionary to seed the archive
        cached: if True, use an in-memory cache interface to the archive
        serialized: if True, pickle table contents; otherwise cast as strings

>>> c = klepto.archives.sql_archive('database')
>>> c.update(b)
>>> c
sql_archive('sqlite:///database', {'a': 0, 'b': 1, 'g': <function <lambda> at 0x10446b1b8>, 'f': <built-in function max>}, cached=True)
>>> c.dump() 
```

现在磁盘上的相同对象也在 sql 存档中。我们可以将新对象添加到任一存档中。

```
>>> b['x'] = 69
>>> c['y'] = 96
>>> b.dump('x')
>>> c.dump('y') 
```

`klepto`到这里：[https](https://github.com/uqfoundation) : //github.com/uqfoundation

# wordpress - 将用户重定向到静态主页

> ID：14668476
> 
> 赞同：0
> 
> 时间：2013-02-03T01:14:10.660
> 
> 标签：wordpress, redirect

我有一个客户，我正在为其构建一个面向成人的网站。该网站有一个静态首页，主要说明内容、离开或输入内容等。它是一个 WordPress 网站。

我想做什么 - 如果任何用户要从网络上的其他地方单击站点外部的链接，该链接链接到内部页面，则用户将始终被定向到站点的静态首页，然后仍然被定向同意进入本站后转至原链接。

我不确定这是否可能。

提前感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T10:08:21.120

在您网站的每个页面上放置以下条件

```
if(isset($_SESSION["i_agree"]) && $_SESSION["i_agree"]=="true"){
    //show the content of the page
}
else{
    $_SESSION["redirect_to"]=get_permalink();
    wp_redirect( "http://to-static-front-page" );
    exit; 
} 
```

在要求用户确认的静态首页上，当用户单击时，我同意将他重定向到 set_session.php 文件

```
<a href="<?php echo site_url(); ?>/set_session.php">I agree</a> 
```

在 set_session.php 中放入以下代码

```
<?php
$_SESSION["i_agree"]="true";
if(isset($_SESSION["redirect_to"])){
    $redirect_url=$_SESSION["redirect_to"];
}
else{
    $redirect_url=home_url();//path to your home page
}
wp_redirect( $redirect_url );
exit;
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T03:07:43.937

向每个页面添加一段代码 - 例如在 PHP 中 - 检查是否`visited`存在名为的 cookie。
如果没有，将用户重定向到首页。

```
if($_COOKIE['visited'] != 'visited')
    header('Location: http://frontpage.com/index.php'); 
```

然后在首页，使`Enter`按钮创建并设置`visited`cookie，并重定向到另一个首页。

```
setcookie('visited', 'visited');
echo '<meta http-equiv="refresh" content="1; url=http://theOtherFrontPage.com/index.php">'; 
```

# matlab - 我如何处理空矩阵：模拟产生的 0 乘任意数字？

> ID：14668478
> 
> 赞同：0
> 
> 时间：2013-02-03T01:14:23.477
> 
> 标签：matlab, matrix, simulation

我做了一个模拟，每次模拟的结果都是一个矩阵，我从矩阵中选择某一行，所以如果模拟运行 = 500，我将有一个 500 矩阵，我每次选择的行将是（在模拟结束时）500行[第一个矩阵的一行...最后一个矩阵的最后一行]...问题是有时矩阵不包含我想要的特定行，答案是例如空矩阵：0×6 我想忽略这个答案注意：我选择的行不一定存在于所有矩阵中，所以如果 run=600 ，导致 600 矩阵，我选择的行可能 =400只有当结果为空矩阵时，其他 200 个将为零模拟停止：0 乘任何数字我使用 Matlab

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T01:17:05.667

您可以[`isempty`](http://www.mathworks.com/help/matlab/ref/isempty.html)用来检测空数组，例如

```
a=zeros(0,5)
isempty(a)
a =
   Empty matrix: 0-by-5
ans =
     1 
```

对于当索引超过矩阵维度时，您可以添加一个测试[`size`](http://www.mathworks.com/help/matlab/ref/size.html)矩阵的条件，特别是如何使用`size(m,1)`

因此，在您的 for 循环中，您可以编写如下代码：

```
for n=1:blah
    if ~isempty(M)      % continue if  matrix is non-empty
        if size(M,1)<=n % continue if index doesn't exceeds matrix dimensions
              ....
              .... 
```

# java - RCPT 至： SMTP 语法

> ID：14668479
> 
> 赞同：1
> 
> 时间：2013-02-03T01:14:25.153
> 
> 标签：java, smtp

我有一些代码无法成功执行，我不明白为什么。

这个功能：

```
public void send(Envelope envelope) throws IOException
{
        String CRLF = "\r\n";
    sendCommand("MAIL FROM:"+ envelope.Sender + CRLF, 250);

    //error occuring here. "Return Code:500 #5.5.1 command not recognized"
    sendCommand("RCPT TO:" + envelope.Recipient + CRLF, 250);
    sendCommand("DATA", 354);
    toServer.print(envelope.Message.Headers + CRLF);
    toServer.print(envelope.Message.Body + CRLF);
    toServer.print("." +CRLF);
} 
```

上面的代码调用了这个函数：

```
private void sendCommand(String command, int rc) throws IOException
{
    /* Write command to server */
    toServer.print(command + CRLF);

    /*read reply from server. */
    String line = fromServer.readLine();

    System.err.println("Request: " + command);
    System.err.println("Return Code:" + line);

    /*
     * Check that the server's reply code is the same as the parameter rc.
     * If not, throw an IOException.
     */
    if (!line.substring(0,3).equals(rc+""))
    {
        throw new IOException();
    }
} 
```

信息是这样传输的：

```
Socket connection = new Socket(envelope.DestAddr, SMTP_PORT); 
    fromServer = new BufferedReader(new InputStreamReader(connection.getInputStream()));
    toServer = new PrintStream(connection.getOutputStream()); 
```

我使用相同的 From 和 To。由于某种原因，RCPT TO: 命令遇到错误：

> “返回码：500 #5.5.1 命令无法识别”

**编辑：**我确实通过远程登录手动尝试了它们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T03:09:33.997

您追加`\r\n`了两次 - 一次是`send()`在构建字符串时，一次是`sendCommand()`在`print()`调用中。

第二个`\r\n`触发`500 5.5.1 Unrecognized command.`

# javascript - JQuery Ajax 强制页面刷新

> ID：14668481
> 
> 赞同：3
> 
> 时间：2013-02-03T01:14:40.410
> 
> 标签：javascript, jquery, ajax, html, refresh

我这里有一个接受用户凭据的表单。如果用户具有无效的用户凭据，则页面将不会加载但是如果他或她具有有效的凭据，我希望页面进行整页刷新，我将如何实现？我试过添加。

```
window.location.href = window.location.href; 
```

在响应 html 但它不起作用，似乎 jquery 正在删除脚本代码？

这是用于表单提交的 AJAX。

```
$('body').on('submit', '#sign-in', function(e) {
    e.preventDefault();

    var data = $(this).serialize();

    var url = $(this).attr('action');
    $.ajax({
        //this is the php file that processes the data and send mail
        url : url,
        type : "POST",
        data : data,
        //Do not cache the page
        cache : false,
        //success
        success : function(data) {
            alert(data);
            $('#loginModal').html($(data).find('#loginModal').html());
        }
    });
}) 
```

如果用户具有有效凭据，则成功的响应将是这样

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
<script>
    window.location.href = window.location.href;

</script>
</head> 
```

但页面没有重新加载。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T03:09:42.593

In the success function you can use the JavaScript way to reload :

```
location.reload(); 
```

A bit like this

```
$('body').on('submit', '#sign-in', function(e) {
    e.preventDefault();

    var data = $(this).serialize();

    var url = $(this).attr('action');
    $.ajax({
        //this is the php file that processes the data and send mail
        url : url,
        type : "POST",
        data : data,
        //Do not cache the page
        cache : false,
        //login success
        success : function(data) {
            //... your other code
            location.reload(); //reload the page on the success
        }
    });
}) 
```

That implies that your query thorws an error when the login fails so it doesn't go in your success function.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T03:00:19.130

看看能否在**成功**函数中使用这段代码

收到有效响应（如 1）

```
$(document).attr('location').href='your location' 
```

# php - 从一个数据库输入到远程数据库的数据

> ID：14668484
> 
> 赞同：0
> 
> 时间：2013-02-03T01:14:46.553
> 
> 标签：php, sql

我正在为电子商务目的制作一个网站。在主页上将有一个永久文本块或特色文章，它将显示有关最新货币交易的信息。

出于安全原因，我想隐藏此信息的来源。所以我决定创建 2 个站点：

**a）“主站点”（MS）：**将是一个带有引擎的完全自定义站点，负责处理和处理金融交易。本网站将包含所有财务数据，并且只有有限的人才能知道/访问。

**b) “客户网站”（CS）：**将提供基本信息以及“最新交易”页面。

要点是 CS 上的“最新事务”只是 MS 数据库中“最新”表的静态副本，无法追溯，因为每次有新交易。我假设即使有人转储 CS 数据库，他/她也只能获得纯文本，而无法访问 MS 中的核心数据库。因为从 MS 到 CS 的数据输入是单向的。

*这是我认为的方案草案，但不知道该怎么做：*

*   数据库到数据库：编写一个自定义 php 文件，该文件将在新事务后触发，并将 MS 数据库中的“最新”表值复制到 CS 数据库中的“最新”表中。

**提前感谢任何想法、指南，尤其是输入。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T02:04:43.940

如果两个数据库都是 sql server，则授予 MS 写入 CS 的权限。然后在 MS 上编写一个触发器，根据您的要求填充 CS。

php 的参与是不必要的。

# android - 如何在膨胀的布局中膨胀具有相同 id 的布局的多个实例

> ID：14668485
> 
> 赞同：26
> 
> 时间：2013-02-03T01:14:49.310
> 
> 标签：android, android-layout, android-view, android-inflate

我有一个带有许多嵌套 LinearLayouts 和 TextViewss 的 LinearLayout

我的主要活动使主要的 LinearLayout 膨胀，

然后我从服务器加载数据并根据接收到的数据，在占位符中添加多个布局（线性布局）

这是一个简单的新闻页面，我在其中加载与新闻关联的图像并将其放置在最初为空的 LinearLayout 中。

每个图像都有以下信息：Title(TextView)、Date(TextView)、Image(ImageView) 所以我实际做的是以下内容：

***请注意，这只是我将所有 try -> catch ... if/else ....etc 元素化的问题中的基本编码**

```
public void addImages(JSONArray images){
      ViewGroup vg = (ViewGroup) findViewById(R.id.imagesPlaceHolder);

      // loop on images
      for(int i =0;i<images.length;i++){

          View v = getLayoutInflater().inflate(R.layout.image_preview,vg);
          // then 
          I think that here is the problem 
          ImageView imv = (ImageView) v.findViewById(R.id.imagePreview);
          TextView dt = (TextView) v.findViewById(R.id.dateHolder);
          TextView ttl = (TextView) v.findViewById(R.id.title);
          // then 
          dt.setText("blablabla");
          ttl.setText("another blablabla");
          // I think the problem is here too, since it's referring to a single image
          imv.setTag( images.getJSONObject(i).getString("image_path").toString() );
          // then Image Loader From Server or Cache to the Image View

      }
} 
```

上面的代码适用于单个图像

但是对于多个图像，图像加载器不起作用我猜这是因为所有 ImageViews（多次膨胀）具有相同的 ID

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-02-03T06:03:59.650

当您提供要用作父级的 ViewGroup 时，返回的 View`inflate()`是这个父级（`vg`在您的情况下），而不是新创建的 View。因此，`v`指向 ViewGroup`vg`而不是指向新创建的 View 并且由于您所有的孩子都具有相同的 ，因此每次都返回`id`相同的子视图（`imv`, `dt`, ）。`ttl`

两种解决方案。第一个是`id`在你完成它们之后，在下一次迭代之前改变它们。因此，在下一次迭代开始的下一次创建中，新创建的 View 将具有与旧 View 不同的 ID，因为它们仍将使用 中定义的旧常量`R`。

另一种解决方案是将参数 false 添加到对 inflate() 的调用中，以便新创建的视图不会附加到 ViewGroup，然后由 inflate() 函数而不是 ViewGroup 返回。然后，您的其余代码将照常工作，但您必须在迭代结束时将它们附加到 ViewGroup。

请注意，您仍然需要提供 ViewGroup，因为它将用于确定 LayoutParams 的值。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2014-01-14T11:07:55.907

我遇到了同样的问题，根据@SylvainL 的回答，这是一个可行的解决方案：

```
// myContext is, e.g. the Activity.
// my_item_layout has a TextView with id='text'
// content is the parent view (e.g. your LinearLayoutView)
// false means don't add direct to the root
View inflated = LayoutInflater.from(myContext).inflate(R.layout.my_item_layout, content, false);

// Now, before we attach the view, find the TextView inside the layout.
TextView tv = (TextView) inflated.findViewById(R.id.text);
tv.setText(str);

// now add to the LinearLayoutView.
content.addView(inflated); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-02-03T01:59:51.403

布局 XML 中的 ImageView 需要有 ID 是否有原因？您能否从 image_preview.xml 布局中删除 android:id 属性，然后简单地遍历膨胀的 LinearLayout 的子级？例如：

```
ViewGroup v = (ViewGroup)getLayoutInflater().inflate(R.layout.image_preview,vg);
ImageView imv = (ImageView) v.getChildAt(0);    
TextView dt = (TextView) v.getChildAt(1);
TextView ttl = (TextView) v.getChildAt(2); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-03T05:41:27.610

我用动态扩展 XML 布局并获取 id 文本

```
 private val onAddView = View.OnClickListener {
    val parent = viewForm.findViewById<LinearLayout>(R.id.layout_parent)
    LayoutInflater.from(activity).inflate(R.layout.layout_child, parent) // layout_child has id "tv_attribute"
  }

  private val onSave = View.OnClickListener {
    val parent = viewForm.findViewById<LinearLayout>(R.id.layout_parent)
    for (i in 0 until parent.childCount) {
        val getText = parent.getChildAt(i).findViewById<TextView>(R.id.tv_attribute).text
    }
  } 
```

# php - 如何使用 MySQL 检查页面是否为空？

> ID：14668486
> 
> 赞同：-1
> 
> 时间：2013-02-03T01:14:50.947
> 
> 标签：php, mysql, content-management-system, blogs

我又回来了，尝试创建一个“自定义”博客系统。或者 CMS，正如人们所说的那样。这是我当前的代码：

```
<?php
//include stuff here
$pid = $_GET['pageid'];
$data = mysql_query("SELECT * FROM entries WHERE id='$pid'") or die("MySQL died.");
mysql_real_escape_string($pid);
while($info = mysql_fetch_array( $data )) 
{
if (!empty($info)) {
echo $info['data'];
}
else {
echo 'This page no existo.';
}
}
?> 
```

发生的事情是它没有显示“此页面不存在”。作为'404'文本。假设有人试图直接输入我的网站但犯了一个错误：localhost/blog/?pageid=10 它没有显示 404 文本！

我在 MySQL 中有一行名为“data”。它由——嗯……博客文章的数据组成。我还有一个名为 ID 的行，它是一个自动增量 ID 系统。“真实”的工作页面 ID 为 1。

谢谢，RBLXDev。

编辑：$info 的 Vardump：vardump：

```
array (size=10)
0 => string '1' (length=1)
'id' => string '1' (length=1)
1 => string 'Testing potatoCMS... and the title.' (length=35)
'title' => string 'Testing potatoCMS... and the title.' (length=35)
2 => string 'This is a test.
This is a new line.
This is a cookie.
You are getting fat.
FAT.<br />lol' (length=88)
'data' => string 'This is a test.
This is a new line.
This is a cookie.
You are getting fat.
FAT.<br />lol' (length=88)
3 => string '2013-02-02' (length=10)
'date' => string '2013-02-02' (length=10)
4 => string 'Unspecified' (length=11)
'author' => string 'Unspecified' (length=11) 
```

是的，嗯...我有奇怪的占位符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T01:25:23.163

我会尝试这样的事情......

```
<?php

        $pid = $_GET['pageid'];
        mysql_real_escape_string($pid);

        $data = mysql_query("SELECT * FROM entries WHERE id='$pid'") or die("MySQL died.");

        $num_rows = mysql_num_rows($data);

        if ($num_rows == NULL) {

              echo 'This page no existo.';

        } else {

                  $info = mysql_fetch_array( $data );
                  echo $info['data'];
        }
?> 
```

未测试

更新！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T01:27:16.880

首先，让我们从您来这里的目的开始：

如果记录不存在，`mysql_fetch_array( $data )`将返回`false`，因此，它甚至不会再进入`while`块。所以，你的逻辑是错误的。

其次，你用`mysql_real_escape_string()`错了。您需要在执行 SQL 查询之前调用它，并且需要在要注入 SQL 查询的变量中捕获其输出：

```
$pid = mysql_real_escape_string($pid);
$data = mysql_query("SELECT * FROM entries WHERE id='$pid'") or die("MySQL died."); 
```

第三，您可能需要考虑`mysql_*`完全放弃函数，因为该库正在被弃用，因为它提供的缓解 SQL 注入的能力很差。考虑使用改进的[`mysqli_*`](http://php.net/manual/en/book.mysqli.php)库函数，或[`PDO`](http://php.net/manual/en/book.pdo.php).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T01:23:05.220

1.  [**请不要`mysql_*`在新代码中使用函数**](https://stackoverflow.com/q/12859942/)。它们不再被维护[并被正式弃用](https://wiki.php.net/rfc/mysql_deprecation)。看到[**红框**](https://www.php.net/manual/en/function.mysql-connect.php)了吗？改为了解[*准备好的语句*](https://en.wikipedia.org/wiki/Prepared_statement)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](https://php.net/manual/en/mysqlinfo.api.choosing.php)将帮助您决定使用哪个。如果您选择 PDO，[这里有一个很好的教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

2.  在查询中使用数据*之前*，您必须先转义数据。

3.  [`mysql_num_rows()`](http://www.php.net/manual/en/function.mysql-num-rows.php)是判断您的查询是否有任何结果的最佳方式。

4.  如果您只期望查询中的行，则不需要遍历所有结果。

5.  如果`$_GET['pageid']`将始终是一个数字，则应[将其转换为整数](http://www.php.net/manual/en/language.types.integer.php)以减少 SQL 注入的机会

.

```
<?php
//include stuff here
$pid = $_GET['pageid'];
mysql_real_escape_string($pid);
$data = mysql_query("SELECT * FROM entries WHERE id='$pid'") or die("MySQL died.");
if (mysql_num_rows() > 0) {

    $info = mysql_fetch_array( $data );
    echo $info['data'];
}
else {
    echo 'This page no existo.';
}
?> 
```

# javascript - Javascript阻止自动完成

> ID：14668488
> 
> 赞同：1
> 
> 时间：2013-02-03T01:15:26.463
> 
> 标签：javascript, prototypejs

我最近开始使用 Javascript，发现我的 password.length 检查存在一个问题。
[http://jsfiddle.net/uYss7/](http://jsfiddle.net/uYss7/) **代码：**

```
document.observe('dom:loaded', function() {
    $('passwordan').observe('keypress', function(event) {
        if (this.value.length < 5) {    
            this.setStyle({backgroundColor: 'blue'});

        } else {
            this.setStyle({backgroundColor: 'white'});
        }
    });
}); 
```

**问题：**
它会自动用信息填充它。我在 127.0.0.1 上，该框是“passwordan”的原因仅仅是因为我想看看 Firefox 是否记得在框名称或 id 之后输入的数据，但似乎并非如此。
发生的事情是它自动填写了五个 *，这破坏了我的 Javascript。它的长度是5，如果我在框内单击，ctrl + a（标记五个*），然后写一个字母（没有退格，只是替换），它仍然是白色的。它的长度现在是 1，它应该是蓝色的（因为长度小于 5）。如果我标记它，单击退格键并写一封信，那么它会按预期工作。
这是解释的图像：http:
[//makeagif.com/media/2-02-2013/pc1TSL.gif](http://makeagif.com/media/2-02-2013/pc1TSL.gif)

*

**pktangyue 给了我解决方法：**

> ```
> A simple way to fix it is using keyup event instead of keypress.
> 
> Because keypress triggered before value change, while keyup triggered after it. 
> ```

谢谢！
**还有一个问题，为什么在变成蓝色（然后又变成白色）后顶部有灰色边框？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T01:30:47.063

修复它的一种简单方法是使用`keyup`event 而不是`keypress`.

因为`keypress`在值变化之前`keyup`触发，而在它之后触发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T01:35:30.080

Last Question: Browsers have their own default styling. If you want to remove the outline with this CSS.

```
input:focus {
    outline: none;
} 
```

# css - Twitter Bootstrap 流体网格系统嵌套未与前一行对齐

> ID：14668492
> 
> 赞同：2
> 
> 时间：2013-02-03T01:16:06.077
> 
> 标签：css, twitter-bootstrap, fluid-layout, nested, grid-layout

我正在创建一个使用[Twitter Bootstrap 的流体网格系统](http://twitter.github.com/bootstrap/scaffolding.html#fluidGridSystem)的表单。一张图片胜过千言万语！

![在此处输入图像描述](../Images/73a7827e6279ff975eab5d01e0219dd1.png)

在第三行（**Paciente**）有一些嵌套正在进行。如您所见，如果与前两行相比，这种嵌套会导致 2 列中的对齐方式不同。如果您查看橙色线，您会发现...

我使用最新的 Bootstrap 版本 2.2.2在 JS Bin：http: [//jsbin.com/ayazul/1设置了一个演示。](http://jsbin.com/ayazul/1)

使用 Firebug 进行调试我在第 2 行/第 2 列中看到了`left-margin`一个`30px`in 。`<div class="span3">`如果我手动将该值更改为`20px`比列正确对齐。

为什么前两行的左边距不同？

* * *

[在Sherbrow](https://stackoverflow.com/a/14668657/114029)的帮助下，这是我想要的最终结果：http: [//jsbin.com/ayazul/29/](http://jsbin.com/ayazul/29/)（第二列在所有三行中对齐）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T01:53:16.413

您的标记比应有的复杂。你有太多`.row-fluids`和`.span$`需要的课程。为什么不像这样简单？

[http://jsbin.com/ayazul/6/](http://jsbin.com/ayazul/6/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T01:44:02.703

为什么不在`span6 > span6`两行而不是`span3`在第一行和`span6 > span6`第二行保持相同的结构？

检查更新的 JSBin [http://jsbin.com/ayazul/28/](http://jsbin.com/ayazul/28/)

这肯定会增加额外的标记，但它可以确保您具有相同的外观。

“为什么”很简单：流体列的边距（装订线）基于父总宽度。如果父级实际上是`.span6`窗口宽度的 (50%)，则它的值将小于其父级处于全窗口宽度的列。换句话说，嵌套的流体跨度会减小列实际像素宽度——仅适用于流体网格。

# python - 数学函数，未分配的变量？

> ID：14668495
> 
> 赞同：2
> 
> 时间：2013-02-03T01:17:16.773
> 
> 标签：python, function, unassigned-variable

我正在寻找一种在为方程中的变量分配数值之前将多个数学函数相加的方法。
我这样做是因为我需要优化我的代码，并且我想每次都为变量分配不同的值。我正在尝试做的一个例子：

1.  `f(x, y) = x + 2y`

2.  `g(x, y) = 3x - y`

3.  加到`f(x, y) + g(x, y)`get `h(x, y)`，所以`f(x, y) + g(x, y) = h(x, y) = 4x + y`

4.  现在我有了`h(x, y)`，我需要多个值`h(x, y)`

```
x = 4; y = 3, h(x, y) = 19
x = 1, y = 0, h(x, y) = 4 
```

等等

这可能吗？我试图将它们创建为字符串，添加字符串，然后删除引号以评估总和，但这不起作用。我正在尝试以这种方式执行我的方法，因为我想优化我的代码。如果我能够在评估它之前创建我的最终函数（`h(x, y)`在这种情况下就是这样），那将非常有帮助。

编辑：我正在添加 (e ** (x + y))，所以使用矩阵的线性解决方案不起作用：/

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-03T01:37:29.357

[SymPy](http://sympy.org/en/index.html)可以这样做：

```
import sympy as sym

x, y = sym.symbols('xy')
f = x + 2*y
g = 3*x - y
h = f + g 
```

这表明[SymPy](http://sympy.org/en/index.html)已经简化了表达式：

```
print(h)
# y + 4*x 
```

这显示了如何`h`作为 and 的函数`x`进行评估`y`：

```
print(h.subs(dict(x=4, y=3)))
# 19
print(h.subs(dict(x=1, y=0)))
# 4 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T01:52:34.253

如果函数都是变量的线性组合，如示例中所示，则不需要解析器或@unutbu 建议的 sympy 解决方案（这似乎绝对是复杂函数的正确答案）。

对于线性组合，我会使用`numpy`数组来包含变量的系数，如下所示：

```
import numpy as np
f = np.array([1,2])
g = np.array([3,-1])
h = f + g
x = np.array([4,3])
sum(h*x) 
```

...它给出了答案`19`，就像你的例子一样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-27T23:58:28.570

您还可以使用 lambda 函数。

```
f=lambda x,y:x+2*y
g=lambda x,y:3*x-y
h=lambda x,y:f(x,y)+g(x,y) 
```

并评估`h(x,y)`

# c++ - 从另一个类访问 C++ 静态成员

> ID：14668496
> 
> 赞同：1
> 
> 时间：2013-02-03T01:17:19.380
> 
> 标签：c++, static, member

我有一个像下面这样的类：

```
class Parameter {
public:
    Parameter();
    virtual ~Parameter();

    bool parse();

    static int WindowWidth;
    static int WindowHeight;
    ....
}; 
```

现在，我主要选择：

```
int main(int argc, char *argv[]) {
    Parameter parameter;
    Controller controller;

    parameter.parse("parameter.ini");
    controller.initialise();

    return 0;
} 
```

现在，在 Controller 对象中，我需要访问 Parameter 类的静态成员。因此，我只是在做：

```
Controller::Controller() {
    m_numberOfSweepers = Parameter::NumberOfSweepers;
    m_ticks = Parameter::NumberOfTicks;
    m_window_cx = Parameter::WindowWidth;
    m_window_cy = Parameter::WindowHeight;
} 
```

一切都编译得很好。取出GDB，可以看到在parameter对象的parser方法中，正确的值在静态成员中。但是在 Controller::Controller() 方法中，我得到了垃圾。

我究竟做错了什么？

提前致谢。

**编辑：** 在 Parameter 类的 cpp 文件中，我执行以下操作（在任何方法之外）：

```
int Parameter::WindowWidth;
int Parameter::WindowHeight; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T01:39:12.877

问题只是初始化的顺序。在这里，您构建控制器：

```
int main(int argc, char *argv[]) {
  Parameter parameter;
  Controller controller; 
```

发生这种情况时，将调用控制器的构造函数，执行以下操作：

```
Controller::Controller() {
  m_numberOfSweepers = Parameter::NumberOfSweepers; // uninitialized garbage
  m_ticks = Parameter::NumberOfTicks; // uninitialized garbage
  m_window_cx = Parameter::WindowWidth; // uninitialized garbage
  m_window_cy = Parameter::WindowHeight; // uninitialized garbage
} 
```

然后通过解析ini文件来初始化参数。但是控制器在你这样做**之前**得到了这些值。**除非 Controller 存储对静态成员的引用，否则它只会保留那些垃圾值。**

一个简单的解决方法是将代码从构造函数移动到控制器的“初始化”方法中。例如，

```
Controller::Controller() : m_numberOfSweepers(0)
                         , m_ticks(0)
                         , m_window_cx(0)
                         , m_window_cy(0)
{
  // now empty
}

void Controller::initialise()
{
  m_numberOfSweepers = Parameter::NumberOfSweepers;
  m_ticks = Parameter::NumberOfTicks;
  m_window_cx = Parameter::WindowWidth;
  m_window_cy = Paramter::WindowHeight;
} 
```

假设您以正确的顺序调用它，这将解决当前的问题。但我认为这个设计可能有点乱。为什么这些参数需要一个单独的类？

如果你想坚持下去，也许试着给它一个不那么笼统的名字，比如 ControllerParameters 什么的？无论如何，祝你好运。祝你今天过得愉快！

**编辑** 它也可以很好地为您初始化这些静态变量，这样它们就不会完全是垃圾。垃圾是坏的。只需说以下内容：

```
int Parameter::WindowWidth = 0;
int Parameter::WindowHeight = 0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T01:47:53.230

您的初始化顺序错误。一种可能的方法是，主要做：

```
Parameter parameter;
parameter.parse("parameter.ini");

Controller controller;
controller.initialise(); 
```

# php - 输入键不提交搜索

> ID：14668497
> 
> 赞同：1
> 
> 时间：2013-02-03T01:17:39.813
> 
> 标签：php, javascript, html, internet-explorer-9

当 IE9 中的兼容性视图打开时，如果我在测试输入中键入内容并按下回车键，它是否会识别回车？

我问这个是因为当兼容性关闭时，当我按下回车键时，它会在测试输入中提交数据，但是当兼容性视图打开并且不提交文本输入时这样做，就像回到默认值一样，我必须按下`Search`按钮才能提交搜索。

解释一下，在这里展示一个演示更容易：[demo](http://helios.hud.ac.uk/u0867587/Mobile_app/previousquestions.php?questioncontent=2)

在关闭 IE9 兼容性或任何其他主要浏览器中测试应用程序，当您使用 Enter 键提交搜索时，它会提交搜索。但是然后在打开兼容性的情况下对其进行测试，并且在使用回车键时它不会提交搜索。

我不确定这是否可能是导致此问题的 php、javascript 或 html，因此请向我评论他的问题可能在哪里，我将在更新中显示我的代码，这只是让我免于发布整个代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T01:27:09.803

我相信这是 IE 7 和 IE 8 中也存在的兼容性问题。这里问了一个类似的问题：[In IE8 enter key in a form does not work](https://stackoverflow.com/questions/1427912/in-ie8-enter-key-in-a-form-does-not-work)

建议的解决方案是尝试制作提交按钮：

```
<button type="submit"...> 
```

与

```
<input type="submit"...> 
```

似乎正在发生的是，而不是发出 GET 请求：

[http://helios.hud.ac.uk/u0867587/Mobile_app/previousquestions.php?questioncontent=test&searchQuestion=Search](http://helios.hud.ac.uk/u0867587/Mobile_app/previousquestions.php?questioncontent=test&searchQuestion=Search)

它使一个：

[http://helios.hud.ac.uk/u0867587/Mobile_app/previousquestions.php?questioncontent=test](http://helios.hud.ac.uk/u0867587/Mobile_app/previousquestions.php?questioncontent=test)

# c# - 在Visual Studio中应用该工具时，如何在用户控件工具包中使用不可用的对象实现接口类？

> ID：14668501
> 
> 赞同：1
> 
> 时间：2013-02-03T01:18:07.270
> 
> 标签：c#, .net, interface, user-controls, microstation

我正在尝试开发以下用户控件。

用户控件构建没有错误。当我尝试在 Visual Studios 中加载工具包时，我收到 Visual Studio 错误

> 无法加载文件或程序集“Bentley.Interop.MicrostationDGN”

这是因为它试图`Bentley.Interop`在工具包加载期间加载。在此工具包中的其他用户控件中，我能够检查`Bentley.Interop`并忽略此错误。但是，`IlocateCommandEvents`代码中显示的接口是部分`ClsPointSelector`类构造。有没有办法`Bentley.Interop`在这个级别（开发级别）检查，并且在主应用程序托管时仍然具有正确的用户控制功能。

该工具包由一个插件应用程序托管，而该插件应用程序又由 Microstation 托管。

```
using System;
using System.ComponentModel;
using System.Drawing;
using System.Runtime.InteropServices;
using System.Windows.Forms;
using BCOM = Bentley.Interop.MicroStationDGN;

namespace cds.microstation.win.forms
{
    [DisplayName(@"Point Selector")]
    [Description("Microstation Point Selector.")]
    [ToolboxBitmap(typeof(PointSelector), "PointSelector.bmp")]
    public partial class PointSelector : UserControl
    {
        private BCOM.ApplicationClass BCOM = new BCOM.ApplicationClass();
        private BCOM.Application _ustn = null;                
        public event OnChangedEventHandler OnChanged;

        protected virtual void OnValueChanged(OnChangedEventArgs e)
        {
            if (OnChanged != null)
                OnChanged(this, e);
        }

        public PointSelector()
        {
            InitializeComponent();
        }      

        public static BCOM.Point3d point3D { get; set; }

        private void btnPointSelector_Click(object sender, EventArgs e)
        {           
            _ustn = BCOM;
            ClsPointSelector pointSelector = new ClsPointSelector();
            _ustn.CommandState.StartLocate(pointSelector);                       
         }    
    }

    class ClsPointSelector : ILocateCommandEvents
    {    
        private ApplicationClass BCOM = new ApplicationClass();
        private Application _ustn = null;

        public void Start()
        {
            _ustn = BCOM;
            _ustn.ShowCommand("");
            _ustn.ShowPrompt("Select Data Point");
            _ustn.CommandState.SetLocateCursor();                           
        }

        public void LocateReset()
        {
            _ustn = BCOM;
            _ustn.CommandState.StartDefaultCommand();           
        }

        public void LocateFilter(Element element, ref Point3d point3D, ref bool accepted)
        {          
            accepted = true;
        }

        public void Accept(Element element, ref Point3d point3D, View view)
        {
            PointSelector.point3D = point3D;
        }

        public void LocateFailed()
        {
            // required for interface
        }

        public void Dynamics(ref Point3d point, View view, MsdDrawingMode drawMode)
        {
            // required for interface
        }

        public void Cleanup()
        {
            // required for interface
        }
    }    
} 
```

# ruby - 在ruby中调用自身实例的方法

> ID：14668505
> 
> 赞同：1
> 
> 时间：2013-02-03T01:18:57.380
> 
> 标签：ruby

我是 ruby​​ 新手，这可能是一个显而易见的问题，但我真的不知道在 Google 上搜索什么才能真正找到我正在寻找的东西。

我正在做算法问题（不是很相关），它给了我一个方阵，并询问它是否具有圆对称性。我这样解决它：

```
s = STDIN.readlines.map { |x| x.chomp }.join ''
puts %w[YES NO][s == s.reverse ? 0 : 1] 
```

是否可以将所有这些放在一行中？我不能的唯一原因是因为我认为我必须存储字符串，然后稍后显式比较它。它从 STDIN 获取字符串，所以我无法重新读取它。任何优雅的解决方案？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T01:33:31.263

[`Object#tap`](http://ruby-doc.org/core-1.9.3/Object.html#method-i-tap) takes a block, and passes the object to that block. Thus, should be able to rewrite that as:

```
STDIN.readlines.map { |x| x.chomp }.join('').tap { |s| puts %w[YES NO][s == s.reverse ? 0 : 1] } 
```

Although I agree with the commenter that this is only going to hurt readability.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T01:32:01.293

Disregarding readability, you can almost always force things on to a single line by using the `;` separator.

In your case since `s` is referenced twice you need to assign it to a variable.

# android - 有没有办法在按下按钮时不进行另一个活动，它会展开并显示新选项？

> ID：14668508
> 
> 赞同：0
> 
> 时间：2013-02-03T01:19:50.503
> 
> 标签：android, button, android-activity, options, expand

我相信这可能有点难以通过文字来理解，所以我会尽力而为。我想要的是当一个按钮被按下时，而不是进入一个全新的页面，它只是扩展并显示一些选项，我尝试上传一些图片，但显然我需要更多的声誉来做到这一点。

imgur 上的图片（第一个是菜单，第二个是按下其中一个按钮后： ![在此处输入图像描述](../Images/89510b49698ecdad51fa3fbf01c200a6.png)

第二：http: [//imgur.com/8dQIjwU,SZOzOlG#1](http://imgur.com/8dQIjwU,SZOzOlG#1)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T04:31:27.120

你的意思是你想要一个可扩展的列表视图？

如果你是这个意思，我认为这两个开源项目可以帮助你。

[https://github.com/guohai/and-expandable-listview](https://github.com/guohai/and-expandable-listview)

[https://github.com/tjerkw/Android-SlideExpandableListView](https://github.com/tjerkw/Android-SlideExpandableListView)

如果你的意思是当你点击按钮时你真的想要一个活动。

您可以从官方文档中学习[Fragment 。](http://developer.android.com/guide/components/fragments.html)

# java - 文件实用程序搜索实现

> ID：14668509
> 
> 赞同：1
> 
> 时间：2013-02-03T01:19:52.527
> 
> 标签：java, file, search

我想实现对匹配关键字的文件或文件夹的搜索。我正在使用以下代码，但返回的文件夹与字符串不匹配。返回所有目录。请问有什么问题吗？

```
import java.io.File;
import java.io.IOException;
import java.util.List;
import org.apache.commons.io.FileUtils;
import org.apache.commons.io.filefilter.IOFileFilter;
import org.apache.commons.io.filefilter.TrueFileFilter;

public class SearchFiles {

public static void main(String args[]){
File directory=new File("C:/Users");
String keyword="Logs";
IOFileFilter fileFilter = new IOFileFilter() {
public boolean accept(File directory, String fileName) {
    return directory.isDirectory()&&fileName.contains(keyword);
}

@Override
public boolean accept(File arg0) {
if(arg0.getName().contains(keyword)){return true;}
else{
    return false;
}

}
};
List<File> files = (List<File>)FileUtils.listFilesAndDirs(directory, fileFilter, TrueFileFilter.INSTANCE);
for (File file : files) {
    try {
        System.out.println("file: " + file.getCanonicalPath());
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

} }

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T04:52:04.203

根据 javadoc `FileUtils.listFilesAndDirs`，生成的集合还将包括子目录本身的名称。这就是您在结果中看到目录名称的原因。

# actionscript-3 - 更改 AS3 UILoader 组件注册点

> ID：14668512
> 
> 赞同：0
> 
> 时间：2013-02-03T01:19:55.133
> 
> 标签：actionscript-3, flash, web, flash-cs5

我想使用 UILoader 组件加载很多照片，并且我必须更改注册点，我该怎么做呢？它有任何代码吗？

```
import flash.utils.Timer;
import flash.events.TimerEvent;
import flash.events.MouseEvent;
import flash.events.Event;
import fl.containers.UILoader;
import flash.text.TextField;
import flash.display.SimpleButton;
import fl.transitions.Tween;
import fl.transitions.TweenEvent;
import fl.transitions.easing.*;
stage.colorCorrection = ColorCorrection.ON;

var myImage:String = "smallWildlife/00.jpg";
var request:URLRequest = new URLRequest(myImage);
uiLoader.addEventListener(Event.COMPLETE, completeHandler);
uiLoader.addEventListener(ProgressEvent.PROGRESS, progressHandler);
uiLoader.load(request);

function progressHandler(event:ProgressEvent):void
{

status_txt.text = "Percentage Loaded:" + Math.round(event.target.percentLoaded);
}

function completeHandler(event:Event):void
{   
uiLoader.x = stage.stageWidth/6 - uiLoader.content.width/6;
uiLoader.y = stage.stageHeight/100 - uiLoader.content.height/700;
new Tween(uiLoader,"rotationX",Elastic.easeOut,90,0,4,true);
}

next_btn.addEventListener(MouseEvent.CLICK, nextImage);

//variable is a container that holds some value...;
var imageNumber:Number = 0;

function checkNumber():void
{
next_btn.visible = true;
back_btn.visible = true;
//If the imageNumber is = 58, then do something...
if (imageNumber == 58)
{
    trace(imageNumber);
    next_btn.visible = false;
}
//if the imageNumber is = 1, then don't show the back button
if (imageNumber == 0)
{
    trace(imageNumber);
        back_btn.visible = false;
}
}
checkNumber();

function nextImage(evtObj:MouseEvent):void
{
//Adding to the current value +1
imageNumber++;
uiLoader.source = "smallWildlife/0" + imageNumber + ".jpg";
checkNumber();
}

back_btn.addEventListener(MouseEvent.CLICK, backImage);

function backImage(evtObj:MouseEvent):void
{
//Subtract 1 from the current value
imageNumber--;
uiLoader.source = "smallWildlife/0" + imageNumber + ".jpg";
checkNumber();
}

stop(); 
```

请帮我！我需要把我的画廊放在中间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T02:30:44.750

首先，将一个 UILoader 组件拖到舞台上；然后将其命名为“uiLoader”。

```
package {

    import fl.containers.*;
    import fl.transitions.*;
    import fl.transitions.easing.*;
    import flash.display.*;
    import flash.events.*;
    import flash.net.URLRequest;

    public class Main extends Sprite {

    private var spr:Sprite;

    // Your URL here
    private var url:String = "http://joanmiro.com/wp-content/uploads/2009/05/joanmiro1.jpg";

    public function
    Main() {
        var request:URLRequest = new URLRequest( url );

        uiLoader.addEventListener( Event.COMPLETE, completeHandler );
        uiLoader.load( request );

        spr = new Sprite();

        // Place spr anywhere on the stage
        spr.x = stage.stageWidth / 2;
        spr.y = stage.stageHeight / 2;
        spr.addChild( uiLoader );

        addChild( spr );
    }

    private function
    completeHandler( e:Event ):void {
        // Center uiLoader in spr
        uiLoader.x = - uiLoader.width / 2;
        uiLoader.y = - uiLoader.height / 2;
        new Tween( spr, "rotation", Elastic.easeOut, 1080, 0, 12, true );
    }
    }
} 
```

# jquery - css 背景图片预加载器

> ID：14668514
> 
> 赞同：2
> 
> 时间：2013-02-03T01:20:10.590
> 
> 标签：jquery, css, background, preloader, image-preloader

我在为 css 背景图像制作工作预加载器时遇到了麻烦。情况如下：我有几个隐藏元素，每个元素都有一个 CSS 背景图像。

当用户单击“开始”按钮时，然后我使用 jquery 显示元素（一个接一个：显示一个，另一个隐藏）。但是，“开始”按钮应该只有在所有图像加载后才可用。

我正在使用这个预加载器：

```
function preloadimages(arr) {
    var newimages=[], loadedimages=0
    var postaction=function(){}
    var arr=(typeof arr!="object")? [arr] : arr

    function imageloadpost() {
        loadedimages++
        if (loadedimages == arr.length) {
            postaction(newimages) //call postaction and pass in newimages array as parameter
        }
    }

    for (var i=0; i<arr.length; i++) {
        newimages[i] = new Image()
        newimages[i].src = arr[i]
        newimages[i].onload = function() {
            imageloadpost()
        }

        newimages[i].onerror = function() {
             imageloadpost()
        }
    }

    return { //return blank object with done() method
        done:function(f) {
            postaction = f || postaction //remember user defined callback functions to be called when images load
        }
    }
}

preloadimages('img01','img02','img03')
    .done(function(images) {
        alert(images.length + " images loaded"); 
    }); 
```

但是，这仅加载 1 张图像。

我也尝试了其他一些代码，但没有结果。图像预加载器真的应该在 CSS 背景图像上工作吗？还是它们仅用于标签？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T10:38:39.407

有一个非常好的纯 CSS 预加载背景图像解决方案，我认为它可以帮助你。其背后的概念是将背景图像放置在页面加载时加载但未显示的伪元素上。这会导致浏览器加载图像，以便稍后在另一个元素调用它们时它们已准备就绪。这是一些示例代码：

```
.main-element {
    background-image: url(your_url_here);
}
.main-element:after {
    display: none;
    content: url(your_url_here), url(another_url_here), url(another_url_here), etc.
}
.hidden-element {
    display: none;
    background-image: url(your_url_here);
}
.main-element:hover {
    .hidden-element: display: block;
} 
```

这是一篇文章的链接，其中包含有关此技术的更多信息：[http ://www.thecssninja.com/css/even-better-image-preloading-with-css2](http://www.thecssninja.com/css/even-better-image-preloading-with-css2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T13:42:12.037

我让它工作了！这是一个非常简单的 jquery 解决方案：

```
$(".hidden-element").show(); $(".hidden-element").hide(); 
```

用户没有检测到这一点，并且似乎仍然强制浏览器加载图像我在加载完成后仍然无法使用回调，但是这项工作在 ratice

# javascript - 正则表达式匹配字符串的一部分

> ID：14668517
> 
> 赞同：0
> 
> 时间：2013-02-03T01:20:41.233
> 
> 标签：javascript, regex, pattern-matching, match, flags

我已经组合了一个搜索函数，它可以查看大量 div 以将字符串与其数据属性中的信息匹配，并且我正在使用正则表达式来执行此操作。

这是我目前正在使用的正则表达式。

```
var regExPattern = "gi";
var regEx = new RegExp(filter, regExPattern);
// filter is the text that the user searches. 
```

我需要更改模式，以便它可以匹配字符串的一部分，例如它可以匹配 ' `world`' in ' `hello world`'。但目前我的只有在你输入完整的字符串 ' 时才有效`hello world'`。

我在[Mozilla](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp)页面上阅读了有关正则表达式的信息，我认为我需要使用的标志是`\S`. 所以我把我`regExPattern`的改为`"gi/\S\w*/"`......但这不起作用。我认为我在如何使用标志方面真的错了。请有人指出我正确的方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T02:11:17.160

也许这个？

```
var aa = 'hello world';
var bb = 'world';
var cc = new RegExp( bb );
alert( aa.match( bb ) ); 
```

[**参考**](http://github.com/svnpenn/bm/blob/gh-pages/yt.js)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T19:49:39.787

事实证明，这不是 RegEx 模式或标志的问题，因为无论如何它们都可以通过搜索整个字符串来按我希望的那样工作，但总的来说，这是我的搜索功能的问题。[请参阅我发布的这个稍后的问题](https://stackoverflow.com/questions/14759234/searching-through-multiple-data-attributes/14759387#14759387)。

# algorithm - 如何向 A* 启发式添加更多参数，而不仅仅是距离？

> ID：14668520
> 
> 赞同：2
> 
> 时间：2013-02-03T01:21:04.917
> 
> 标签：algorithm, search, artificial-intelligence, a-star

对于小型 2D 游戏中的寻路，我使用 A* 算法，现在基于简单的欧几里德距离启发式。我的游戏世界被表示为一个单元格，要么被障碍物占据，要么没有。必须使用 A* 计算路径的角色可以向任何方向移动（如果没有被阻挡），而不仅仅是 N/E/S/W。

好的，这样基本上可以正常工作。现在我需要向 A* 启发式函数添加另一个参数，即与每个网格单元相关的成本值。这个成本值越高，我们的角色就越应该尽量避开那个单元格。

但是，我不能将启发式函数更改为仅使用每个网格单元的这个成本值，因为单元到 A* 目标位置的距离仍然很重要。角色应尽量避开任何高成本单元，但同时也不能离目标位置太远。因此，我需要在单元格的距离与其成本值之间进行某种“权衡”。

理想情况下，我想找到一个解决方案，使我能够轻松调整/优化单元格距离与其成本值之间的这种关系，以便我可以微调启发式。

任何想法如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T01:36:22.120

当您使用任何最短路径算法（A* 或 Dijkstrs）时，每个节点都需要一个成本值。
因此，您必须认为自己是如何将距离（您的单元格）与障碍成本相结合的公式。
您可以创建一个 cost() 函数，该函数采用长度成本加上障碍成本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T11:34:09.213

您需要使用权重（值介于 0 和 1 之间），假设 w 是距离权重，1-w 是成本权重，因此您的新 huristic 将类似于：H= w*distance+(1-w)*cost

现在你需要根据你的领域来优化 W - ampiricly。

# android - onCreateOptionsMenu 在配置更改时调用了两次

> ID：14668521
> 
> 赞同：1
> 
> 时间：2013-02-03T01:21:28.473
> 
> 标签：android, android-fragments, android-actionbar, actionbarsherlock

我的应用程序有两个`fragments`，一个是列表，一个是详细视图，它们都以横向模式显示，只有列表以纵向显示。`onCreateOptionsMenu`在配置更改时，如果我在两者中放置一个断点`fragments`，它们将被击中两次，并且其中的菜单项`Actionbar`被复制。

我尝试设置`invalidateOptionsMenu`不同的事件，例如`onResume`and `onActivityCreated`，但这似乎没有帮助。我不确定什么会导致`onCreateOptionsMenu`被击中两次。

我注意到这里有一个解决方案[，](https://stackoverflow.com/questions/11003941/android-oncreateoptionsmenu-called-twice-when-restoring-state)但这对我不起作用。它会`java.lang.IllegalArgumentException No view found for for fragment`导致`onStart`.`Activity`

**更新**

我正在使用 a在肖像模式下`ViewPager`加载：`fragments`

```
public class Main extends SherlockFragmentActivity
{
    private static List<Fragment> fragments;

    @Override
    public void onCreate(final Bundle icicle)
    {    
        setContentView(R.layout.main);
    }

    @Override
    public void onResume()
    { 
        mViewPager = (ViewPager)findViewById(R.id.viewpager);

               if (mViewPager != null)
               {

                  fragments = new ArrayList<Fragment>();

                  fragments.add(new MyListFragment());

                  fragments.add(MyDetailFragment.newInstance(0));
                  fragments.add(MyDetailFragment.newInstance(1));
                  fragments.add(MyDetailFragment.newInstance(2));

                  mMyFragmentPagerAdapter = new MyFragmentPagerAdapter(getSupportFragmentManager());
                  mViewPager.setAdapter(mMyFragmentPagerAdapter);
               }
    }

    private static class MyFragmentPagerAdapter extends FragmentStatePagerAdapter  {  

        public MyFragmentPagerAdapter(FragmentManager fm) {  
             super(fm);  
        }  

        @Override  
        public Fragment getItem(int index) {
            return fragments.get(index);
        }  

        @Override
        public int getCount() {  
             return 4;  
        }

        @Override
        public int getItemPosition(Object object) {
            return POSITION_NONE;
        }
   }
} 
```

它是横向模式，我正在添加`fragments`通过 XML。这是文件`layout-land`夹中的 main.xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:layout_height="fill_parent"
    android:layout_width="fill_parent"
    android:weightSum="3"
>
    <fragment android:name="com.app.ListingFragment"
            android:id="@+id/fragmentDetails"
            android:layout_weight="1"
            android:layout_width="0dp"
            android:layout_height="fill_parent"
     />

    <fragment android:name="com.app.DetailFragment" 
            android:id="@+id/fragmentDetails"
            android:layout_width="0dp"
            android:layout_weight="2"
            android:layout_height="fill_parent"
     />

</LinearLayout> 
```

这是`layout`文件夹中的 XML：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_height="fill_parent"
    android:layout_width="fill_parent"
>

    <android.support.v4.view.ViewPager
        android:id="@+id/viewpager"
        android:layout_height="match_parent"
        android:layout_width="match_parent"
     />

 </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T20:12:46.137

问题是您在布局文件中添加片段，并通过调用构造函数/newInstance 方法手动实例化它们。

如果你在布局上添加一个片段，android 框架会为你实例化它。在您发布的代码中，您总共有 4 个详细信息片段和 2 个列表片段实例，即使您可能无法全部看到它们。

而不是手动实例化片段，您应该通过调用[FragmentManager.getFragmentById](http://developer.android.com/reference/android/app/FragmentManager.html#findFragmentById%28int%29)来检索它的实例并改用该实例。

对于详细信息片段，我不会在布局上使用一个片段声明，而是将其替换为可用于添加寻呼机适配器的普通布局

# php - preg_match 和正则表达式

> ID：14668524
> 
> 赞同：0
> 
> 时间：2013-02-03T01:21:34.777
> 
> 标签：php, regex

我正在尝试从网页获取网站地址。模式总是：

```
 <br />i <a href="http://www.website.com" 
```

我需要的部分是 www.website.com。在阅读了很多之后，我做了这个；

```
 "preg_match('@^(?:<br />i <a href="http://)?([^/]+)@i' , $html, $matches);" 
```

但我想我犯了一个错误......谁能帮助我？

我把我的“解决方案”放在括号之间，因为stackoverflow把它弄得一团糟......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T01:30:14.650

试试这个：

```
preg_match( '/<br \/>i <a href="http:\/\/([^"]+)"/', $html, $matches ); 
```

# java - JAVA构造函数（我准备用棒球棒砸电脑）

> ID：14668525
> 
> 赞同：2
> 
> 时间：2013-02-03T01:21:40.187
> 
> 标签：java

好吧，我在这里真的很沮丧。本学期我将参加编程课程介绍的第二部分。上学期我们做了 C++，现在我们在做 JAVA。在我看来，我们已经很快进入了一切。我相信这是因为我们希望将我们的 C++ 知识应用于 JAVA，因为它们有些相似。我想这是有道理的。我现在很生气，因为我一直在搜索谷歌等以试图理解。

有两个文件/类 - RectangleDemo 和 Rectangle。RectangleDemo 是主要的。我们被要求编写可以计算面积和周长的代码。我的问题是这个。当我添加一个新的构造函数时，我的原始类及其在“RectangleDemo”中的对象现在不起作用。此外，我的编译器找不到新构造函数的符号。

这是代码...

```
public class RectangleDemo {
    public static void main(String[] args) {
        Rectangle myRect = new Rectangle();

        double theArea;
        double thePerimeter;

        myRect.setLength(25);
        myRect.setWidth(5);

        theArea = myRect.area();

        thePerimeter = myRect.perim();

        System.out.println("My rectangle has area " + theArea);
        System.out.println("Rectangle Perimiter " + thePerimeter);

        Rectangle newRect = new Rectangle(10, 20);

    }
}

public class Rectangle {

    private double width, length;
    private double len, wid;

    public void setWidth(double w) {
        width = w;
    }

    public void setLength(double ln) {
        length = ln;
    }

    public double getWidth() {
        return width;
    }

    public double getLength() {
        return length;
    }

    public double area() {
        double a;
        a = length * width;
        return a;
    }

    public double perim() {
        double pr;
        pr = (length * 2) + (width * 2);
        return pr;
    }

    public Rectangle(double len, double wid) {
    }
} 
```

对代码块感到抱歉，在 Safari 中缩进对我来说有点奇怪。

'Rectangle' 类编译没有错误。

但是'RectangleDemo'类编译器错误是这样的。

```
 ----jGRASP exec: javac -g RectangleDemo.java
RectangleDemo.java:5: cannot find symbol
symbol  : constructor Rectangle()
location: class Rectangle
        Rectangle myRect = new Rectangle (); 
```

我正在运行 OSX 10.7.5 的 07 Macbook 上编译

我还没有在构造函数的代码中添加任何东西，因为我什至无法让程序找到它而不会出错。

我一直在做的所有阅读都有助于我更多地了解 JAVA，但我对这个程序束手无策。更糟糕的是，我敢打赌这只是我的一个愚蠢的小错字。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-03T01:28:06.190

我认为您缺少的一块拼图是这个小的[java gem](http://docs.oracle.com/javase/tutorial/java/javaOO/constructors.html)：

*   当你*不*定义任何构造函数时，有一个隐式的无参数构造函数。
*   当你定义一个带参数的构造函数时，隐式的无参数构造函数就会消失。

这吸引了许多不熟悉 java 的程序员（我承认，它吸引了我）。

对此特别出乎意料的是，您可以让客户端使用一个类（没有构造函数），然后添加一个 args 构造函数，然后您认为“我正在*添加*代码，所以这*不会*引起任何问题”，然后突然他们的代码休息。那是因为你也在默默地*删除*代码。

要记住的一个好规则是：如果您有一个无构造函数的类被其他人使用，并且您定义了一个 args 构造函数，请始终添加一个无参数的构造函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T01:25:43.283

```
public Rectangle (double len, double wid) {

} 
```

这是 Rectangle 对象的构造函数。这意味着当你创建一个矩形对象时，你需要传递两个双精度值，第一个是长度，第二个是宽度。你有这个：

```
Rectangle myRect = new Rectangle (); 
```

但这不是发送所需的参数。您正在尝试为不带参数的矩形调用构造函数。例如，您应该将其更改为：

```
Rectangle myRect = new Rectangle (1.5, 2.3); 
```

这将制作一个长度为 1.5 和宽度为 2.3 的 Rectangle 对象

希望这可以帮助，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T01:23:12.240

错误是完全正确的。

类中唯一的构造函数`Rectangle`有两个参数；你没有通过任何。

# c# - 我如何从列表中获取数字？

> ID：14668528
> 
> 赞同：0
> 
> 时间：2013-02-03T01:22:07.540
> 
> 标签：c#

我有这个代码：

```
if (LR.Count > 0)
{
    for (int i = 0; i < LR.Count; i++)
    {

    }
} 
```

LR 是一个 List 类型的类。在此列表中，我有 15 个索引，例如在索引 [0] 中我有：

```
[0] = {Lightnings_Extractor.Lightnings_Region} 
```

现在在这个索引 [0] 我有两个 int 的变量结束 88 和开始 96

在这个 for 循环中，我需要做的是：

```
if (LR.Count > 0)
{
    for (int i = 0; i < LR.Count; i++)
    {
        _fts.Add(
    }
} 
```

_fts 是`List<int>`我想要从 LR List 中的每个索引中添加两个数字。因此，如果我只想这样做：

```
_fts.Add(LR[I]); 
```

我收到两个错误：

> 错误 31 'System.Collections.Generic.List.Add(int)' 的最佳重载方法匹配有一些无效参数

和

> 错误 32 参数 1：无法从“Lightnings_Extractor.Lightnings_Region”转换为“int”

我怎样才能从 List LR 的每个索引中获取两个数字并将这两个数字每次添加到 List _fts ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T01:31:27.887

如果你想添加`start`然后`end`到`_fts`，然后尝试

```
for (int i = 0; i < LR.Count; i++)
{
  _fts.Add(LR[I].start);
  _fts.Add(LR[I].end);
} 
```

如果您想要一个条目`_fts`，那么您需要另一个类来包含 a`start`并`end`重新定义 _fts 变量。

```
public class Range
{
    public int Start { get; set; }
    public int End { get; set; }
}

public List<Range> _fts = new List<Range>();

_fts.Add(new Range {Start = LR[I].start, End = LR[I].end} ); 
```

您还应该使用 a`foreach`而不是`if`then `for`：

```
foreach (var lr in LR)
{
   _fts.Add(new Range {Start = lr.start, End = lr.end} );
} 
```

# algorithm - 非递归 DFS 实现

> ID：14668530
> 
> 赞同：5
> 
> 时间：2013-02-03T01:22:30.767
> 
> 标签：algorithm, depth-first-search, iteration, non-recursive

最近我需要实现非递归 DFS 作为更复杂算法的一部分，准确地说是 Tarjan 算法。递归实现非常优雅，但不适用于大图。当我实现迭代版本时，我对它最终变得多么不优雅感到震惊，我想知道我是否做错了什么。

迭代 DFS 有两种基本方法。首先，您可以一次将一个节点的所有子节点压入堆栈（似乎更为常见）。或者你可以只推一个。我将专注于第一个，因为这似乎每个人都是这样做的。

我在使用这个算法时遇到了各种问题，最终我意识到要有效地做到这一点，我需要的不是 1 个，不是 2 个，而是 3 个布尔标志（我不一定意味着你需要三个显式布尔变量，你可以间接存储信息通过通常是整数的变量的特殊值，但是您需要以一种或另一种方式访问​​这 3 条信息。三个标志是：1）已访问。这是为了防止孩子被非常冗余地推入堆栈。2) 完成。防止对同一节点进行冗余处理。3) 上升/下降。指示孩子是否已经被压入堆栈。伪代码如下所示：

```
while(S)
    if S.peek().done == True
        S.pop()
        continue

    S.peek().visited = True

    if S.peek().descending == True
        S.peek().descending = False
        for c in S.peek().children
            if c.visited == False
                S.push(c)
        doDescendingStuff()    
    else
        w = S.pop()
        w.done = True
        doAscendingStuff() 
```

一些注意事项：1）技术上你不需要上升/下降，因为你可以看看孩子们是否都完成了。但是在密集图中它的效率很低。

2），主要问题：访问/完成的事情似乎没有必要。这就是为什么（我认为）你需要它。在堆栈上访问它们之前，您无法标记访问过的东西。如果这样做，您可能会以错误的顺序处理事物。例如，假设 A 链接到 B 和 C，B 链接到 D，并且 D 链接到 C。然后从 A，您将 B 和 C 压入堆栈。从 B 你将 D 压入堆栈……然后呢？如果您在将它们压入堆栈时标记已访问的内容，则此处不会将 C 压入堆栈。但这是错误的，应该从 D 访问 C，而不是从图中的 A 访问（假设 A 在 C 之前访问 B）。因此，在处理它们之前，您不会标记访问过的东西。但是，您将 C 在堆栈上两次。所以你需要另一个标志来表明你已经完全完成了它，所以你不需要第二次处理 C。

我不知道如何避免这一切，以拥有一个完全正确的非递归 DFS，它支持卷绕和展开的动作。但本能地感觉很粗糙。有没有更好的办法？我在网上咨询过的几乎每个地方都对如何实际实现非递归 DFS 进行了掩饰，说可以做到并提供了一个非常基本的算法。当算法是正确的（就正确支持到同一节点的多条路径而言）很少见时，它很少正确支持在卷绕和展开时做一些事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T02:36:40.767

我认为最优雅的基于堆栈的实现将在堆栈上包含子代的迭代器，而不是节点。将迭代器视为在其子节点中存储一个节点和一个位置。

```
while (!S.empty)
  Iterator i = S.pop()
  bool found = false
  Iterator temp = null
  while (i.hasNext())
    Node n = i.next()
    if (n.visited == false)
      n.visited = true
      doDescendingStuff(n)
      temp = n.getChildrenIterator()
      break
  if (!i.hasNext())
    doAscendingStuff(i.getNode())
  else
    S.push(i)
  if (temp != null)
    S.push(temp) 
```

以上可以通过将节点和位置分成2个堆栈来优化存储空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-06T07:53:51.867

您的代码没有完全模拟递归 DFS 实现所发生的情况。在递归 DFS 实现中，每个节点在任何时候都只在堆栈中出现一次。

Dukeling给出的解决方案是一种迭代方式。基本上，您一次只需要在堆栈中推送一个节点，而不是一次全部推送。

您断言这将需要更多存储是错误的：通过您的实现，一个节点可以在堆栈上多次出现。事实上，如果你从一个非常密集的图（所有顶点上的完整图）开始，这将会发生。使用 Dukeling 解决方案，堆栈的大小为 O（顶点数）。在您的解决方案中，它是 O（边数）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-11T06:53:46.683

算法 BFS(G, v)

```
enqueue(Q, v)
mark v as visited

while Q is not empty do
    let w = front(Q)
    visit(w)
    dequeue(Q)

    for each vertex u adjacent to w do
        if u is not marked
            enqueue(Q, u)
            mark u as visited 
```

算法 DFS(G, v)

```
push(S, v)
mark v as visited
visit(v)

while S is not empty do
    let w = top(S)
    pop(S)

    find the first umarked vertex u that is adjacent to w 

    if found such vertex u
        push(S, u)
        mark u as visited
        visit(u)

    else if not found such vertex u
        pop(S) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-18T13:33:28.217

Robert Sedgewick 在 cpp book 中的算法讨论了一个特殊的堆栈，它只保留一个项目的一个副本，而忘记旧的副本。不完全确定如何执行此操作，但它消除了堆栈中有多个项目的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-11T07:54:09.903

Tl; dr 是您不需要多个标志。

实际上，您可以通过显式执行编译器对运行时堆栈所做的操作，将递归 DFS 转换为迭代。该技术使用`goto`s 来模拟调用和返回，但这些可以转换为更具可读性的循环。我将在 C 中工作，因为您实际上可以编译中间结果：

```
#include <stdio.h>
#include <stdlib.h>
#define ARITY 4

typedef struct node_s {
  struct node_s *child[ARITY];
  int visited_p;
} NODE;

// Recursive version.
void dfs(NODE *p) {
  p->visited_p = 1;
  for (int i = 0; i < ARITY; ++i)
    if (p->child[i] && !p->child[i]->visited_p)
      dfs(p->child[i]);
}

// Model of the compiler's stack frame.
typedef struct stack_frame_s {
  int i;
  NODE *p;
} STACK_FRAME;

// First iterative version.
void idfs1(NODE *p) {
 // Set up the stack.
 STACK_FRAME stack[100];
 int i, sp = 0;
 // Recursive calls will jump back here.
 start:
  p->visited_p = 1;
  // Simplify by using a while rather than for loop.
  i = 0;
  while (i < ARITY) {
    if (p->child[i] && !p->child[i]->visited_p) {        
      stack[sp].i = i;   // Save params and locals to stack.
      stack[sp++].p = p;
      p = p->child[i];   // Update the param to its new value.
      goto start;        // Emulate the recursive call.
      rtn: ;             // Emulate the recursive return.
    }
    ++i;
  }
  // Emulate restoring the previous stack frame if there is one.
  if (sp) {
    i = stack[--sp].i;
    p = stack[sp].p;
    goto rtn;   // Return from previous call.
  }
} 
```

现在对代码做一些“代数”以开始摆脱`goto`s。

```
void idfs2(NODE *p) {
 STACK_FRAME stack[100];
 int i, sp = 0;
 start:
  p->visited_p = 1;
  i = 0;
  loop:
  while (i < ARITY) {
    if (p->child[i] && !p->child[i]->visited_p) {
      stack[sp].i = i;
      stack[sp++].p = p;
      p = p->child[i];
      goto start;
    }
    ++i;
  }
  if (sp) {
    i = stack[--sp].i + 1;
    p = stack[sp].p;
    goto loop;
  }
} 
```

不断转变，我们最终会在这里：

```
void idfs3(NODE *p) {
  STACK_FRAME stack[100];
  int i, sp = 0;
  p->visited_p = 1;
  i = 0;
  for (;;) {
    while (i < ARITY) {
      if (p->child[i] && !p->child[i]->visited_p) {
        stack[sp].i = i; 
        stack[sp++].p = p;
        p = p->child[i];
        p->visited_p = 1;
        i = 0;
      } else {
        ++i;
      }
    }
    if (!sp) break;
    i = stack[--sp].i + 1; 
    p = stack[sp].p;
  }
} 
```

这可以。还有一个可选的“抛光”步骤。我们最初可以将根压入堆栈以稍微简化外部循环：

```
void idfs3(NODE *p) {
  STACK_FRAME stack[100];
  p->visited_p = 1;
  stack[0].i = 0
  stack[0].p = p;
  int sp = 1;
  while (sp > 0) {
    int i = stack[--sp].i; 
    p = stack[sp].p;
    while (i < ARITY) {
      if (p->child[i] && !p->child[i]->visited_p) {
        stack[sp].i = i + 1; 
        stack[sp++].p = p;
        p = p->child[i];
        p->visited_p = 1;
        i = 0;
      } else {
        ++i;
      }
    }
  }
} 
```

在这一点上，很明显您确实在使用一堆迭代器：指向节点的指针和反映当前搜索该节点的子节点的进度的索引。使用像 Java 这样的语言，我们可以明确这一点。（不利的一面是我们在处理子代时无法访问父代，这在某些情况下可能是个问题。）

在这里，我将使用一个单独的集合来保留访问过的节点。这是更可取的，因为它使不止一个搜索和部分搜索更简单。

```
void search(Node p) {
  Set<Node> visited = new HashSet<>();
  Deque<Iterator<Node>> stack = new ArrayDeque<>();
  visited.add(p); // Visit the root.
  stack.push(p.children.iterator());
  while (!stack.isEmpty()) {
    Iterator<Node> i = stack.pop(); // Backtrack to a child list with work to do.
    while (i.hasNext()) {
      Node child = i.next(); 
      if (!visited.contains(child)) {
        stack.push(i);  // Save progress on this child list.
        visited.add(child); // Descend to visit the child.
        i = child.children.iterator(); // Process its children next.
      }
    }
  }
} 
```

作为最后的微优化，您可以跳过将耗尽的迭代器推入堆栈（在 C 中，数组`i`末尾的值`child`），因为它们在弹出后被忽略。

```
void search(Node p) {
  Set<Node> visited = new HashSet<>();
  Deque<Iterator<Node>> stack = new ArrayDeque<>();
  visited.add(p); // Visit the root.
  if (!p.children.isEmpty()) stack.push(p.children.iterator());
  while (!stack.isEmpty()) {
    Iterator<Node> i = stack.pop(); // Backtrack to a child list with work to do.
    while (i.hasNext()) {
      Node child = i.next(); 
      if (!visited.contains(child)) {
        if (i.hasNext()) stack.push(i);  // Save progress on this child list.
        visited.add(child); // Descend to visit the child.
        i = child.children.iterator(); // Process its children next.
      }
    }
  }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-03-25T07:21:15.160

这是一个 java 程序的链接，它显示了遵循递归和非递归方法的 DFS，还计算***了发现***和***完成***时间，但没有边缘分类。

```
 public void DFSIterative() {
    Reset();
    Stack<Vertex> s = new Stack<>();
    for (Vertex v : vertices.values()) {
        if (!v.visited) {
            v.d = ++time;
            v.visited = true;
            s.push(v);
            while (!s.isEmpty()) {
                Vertex u = s.peek();
                s.pop();
                boolean bFinished = true;
                for (Vertex w : u.adj) {
                    if (!w.visited) {
                        w.visited = true;
                        w.d = ++time;
                        w.p = u;
                        s.push(w);
                        bFinished = false;
                        break;
                    }
                }
                if (bFinished) {
                    u.f = ++time;
                    if (u.p != null)
                        s.push(u.p);
                }
            }
        }
    }
} 
```

完整来源[在这里](https://github.com/gitsuha/DSA/blob/master/java/DFS.java)。这也是一个很好的视频解释[DFS](https://www.youtube.com/watch?v=qH-mHxkoK0Q)。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-08-28T06:18:59.317

为了使用堆栈进行 DFS 遍历，从堆栈中弹出一个节点（记得将初始节点压入堆栈）并检查它是否已被访问。如果已经访问过，则忽略并弹出下一个，否则输出弹出的节点，将其标记为已访问并将其所有邻居推入堆栈。继续这样做，直到堆栈为空。

# java - 在 CapeDwarf JBoss AS7 中部署 WAR

> ID：14668535
> 
> 赞同：1
> 
> 时间：2013-02-03T01:22:54.637
> 
> 标签：java, jboss, capedwarf

我试图在 CapeDwarf Jboss AS7 中部署我的 web 应用程序战争文件，但是我收到了这个错误：

**更新：**

```
05:49:43,957 WARN  [org.jboss.as.capedwarf.deployment.CapedwarfLoggingParseProcessor] (MSC service thread 1-3) No such logging config file exists: WEB-INF/classes/logging-temp.properties
05:49:44,299 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-3) MSC00001: Failed to start service jboss.deployment.unit."explorer.war".POST_MODULE: org.jboss.msc.service.StartException in service jboss.deployment.unit."explorer.war".POST_MODULE: JBAS018733: Failed to process phase POST_MODULE of deployment "explorer.war"
    at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:127) [jboss-as-server-7.2.0.Alpha1-SNAPSHOT.jar:7.2.0.Alpha1-SNAPSHOT]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.3.GA.jar:1.0.3.GA]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.3.GA.jar:1.0.3.GA]
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) [rt.jar:1.7.0]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) [rt.jar:1.7.0]
    at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0]
Caused by: org.jboss.as.server.deployment.DeploymentUnitProcessingException: JBAS011555: Failed to configure logging using 'logging.properties' configuration file.
    at org.jboss.as.logging.LoggingDeploymentUnitProcessor.configure(LoggingDeploymentUnitProcessor.java:305) [jboss-as-logging-7.2.0.Alpha1-SNAPSHOT.jar:7.2.0.Alpha1-SNAPSHOT]
    at org.jboss.as.logging.LoggingDeploymentUnitProcessor.processDeploymentLogging(LoggingDeploymentUnitProcessor.java:164) [jboss-as-logging-7.2.0.Alpha1-SNAPSHOT.jar:7.2.0.Alpha1-SNAPSHOT]
    at org.jboss.as.logging.LoggingDeploymentUnitProcessor.deploy(LoggingDeploymentUnitProcessor.java:79) [jboss-as-logging-7.2.0.Alpha1-SNAPSHOT.jar:7.2.0.Alpha1-SNAPSHOT]
    at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:120) [jboss-as-server-7.2.0.Alpha1-SNAPSHOT.jar:7.2.0.Alpha1-SNAPSHOT]
    ... 5 more
Caused by: java.lang.IllegalArgumentException: ClassLoader instance is already registered to a log context (ModuleClassLoader for Module "deployment.explorer.war:main" from Service Module Loader)
    at org.jboss.logmanager.ContextClassLoaderLogContextSelector.registerLogContext(ContextClassLoaderLogContextSelector.java:101) [jboss-logmanager-1.4.0.Beta1.jar:1.4.0.Beta1]
    at org.jboss.as.logging.LoggingDeploymentUnitProcessor.configure(LoggingDeploymentUnitProcessor.java:270) [jboss-as-logging-7.2.0.Alpha1-SNAPSHOT.jar:7.2.0.Alpha1-SNAPSHOT]
    ... 8 more

05:49:44,384 INFO  [org.jboss.as.server] (ServerService Thread Pool -- 26) JBAS018559: Deployed "explorer.war" (runtime-name : "explorer.war")
05:49:44,438 INFO  [org.jboss.as.controller] (Controller Boot Thread) JBAS014774: Service status report
JBAS014777:   Services which failed to start:      service jboss.deployment.unit."explorer.war".POST_MODULE: org.jboss.msc.service.StartException in service jboss.deployment.unit."explorer.war".POST_MODULE: JBAS018733: Failed to process phase POST_MODULE of deployment "explorer.war" 
```

这个 Web 应用程序使用 Maven 可以正常工作

[https://github.com/maven-gae-plugin/maven-gae-plugin](https://github.com/maven-gae-plugin/maven-gae-plugin)

> mvn 盖：运行

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T09:39:47.940

这是我们的 Beta2 版本中的一个错误。

它已经在上游修复，它将在下一个 Beta3 中。

作为临时解决方法，您可以重命名 logging.properties（例如 logging-tmp.properties），但请确保您还在 appengine-web.xml sys 属性中更改了对它的引用。

# mod-rewrite - 重写和 Restler

> ID：14668540
> 
> 赞同：0
> 
> 时间：2013-02-03T01:24:13.527
> 
> 标签：mod-rewrite, restler, swagger

我正在努力解决[Luracast Restler](http://luracast.com/products/restler/)和 Restler 的[API Explorer](https://github.com/Luracast/Restler-API-Explorer)（[Swagger UI](https://github.com/wordnik/swagger-ui)的一个分支）的重写问题。我有一个在 OSX 机器的本地主机上运行的完全正常工作的开发环境，但相同的文件（包括 .htaccess 文件）在我运行 Ubuntu 的预生产盒上不起作用。在这两种情况下，我都可以访问 httpd.conf 文件，并倾注于它们以寻求某种答案。诚然，mod-rewrite 对我来说仍然是某种形式的黑暗魔法，所以我真的很想从其他人那里得到一些建议。

我已经在 httpd.conf 的以下条目中打开了两种环境中的日志记录：

```
RewriteLog logs/rewrite.log
RewriteLogLevel 2 
```

这会在 pre-prod 中产生一些有趣的结果，这些结果对于受过训练的眼睛甚至可能会有所启发。如果我打电话`http://website.com/api/explorer`，我会得到：

```
[perdir /var/www/html/api/] rewrite 'resources.json' -> 'index.php'
[perdir /var/www/html/api/] trying to replace prefix /var/www/html/api/ with /
[perdir /var/www/html/api/] internal redirect with /index.php [INTERNAL REDIRECT]
[perdir /var/www/html/] pass through /var/www/html/index.php
[perdir /var/www/html/api/explorer/] rewrite '' -> 'index.html'
[perdir /var/www/html/api/explorer/] trying to replace prefix /var/www/html/api/explorer/ with /
[perdir /var/www/html/api/explorer/] internal redirect with /index.html [INTERNAL REDIRECT]
[perdir /var/www/html/] rewrite 'index.html' -> '/index.php'
[perdir /var/www/html/] trying to replace prefix /var/www/html/ with /
[perdir /var/www/html/] internal redirect with /index.php [INTERNAL REDIRECT]
[perdir /var/www/html/] pass through /var/www/html/index.php
[perdir /var/www/html/] rewrite 'wp-content/themes/pagelines/pagelines-compiled-css-1_1356593315/' -> '/index.php'
[perdir /var/www/html/] trying to replace prefix /var/www/html/ with /
[perdir /var/www/html/] internal 1168/initial/redir#1] (1) [perdir /var/www/html/] pass through /var/www/html/index.php 
```

有趣的是——对我来说同样无法解释——在我的本地环境中调用相同的 URL 根本不会给我任何日志记录（有一个零字节日志，所以我相信我已经在 httpd.conf 中正确配置了它）。我原以为在本地环境中——Restler 工作的地方——会有一个日志条目用于转换`/api/explorer`为`/api/explorer/index.html`.

中的 .htaccess 文件`/api/explorer`如下所示：

```
DirectoryIndex index.php
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteRule ^$ index.html [QSA,L]
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.html [QSA,L]
</IfModule> 
```

其中`/api`是：

```
DirectoryIndex index.php
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteRule ^$ index.php [QSA,L]
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php [QSA,L]
</IfModule> 
```

## 更新

根据@faa 的建议，我添加了 .htaccess 文件的基本路径：

```
RewriteBase /var/www/html/api/explorer/ 
```

并且还将`[QSA,L]`规则的参数更改为`[QSA,L,DPI]`. 日志现在说：

```
(2) [perdir /var/www/html/api/explorer/] rewrite '' -> 'index.html'
(2) [perdir /var/www/html/api/explorer/] trying to replace prefix /var/www/html/api/explorer/ with /var/www/html/api/explorer/
(1) [perdir /var/www/html/api/explorer/] internal redirect with /var/www/html/api/explorer/index.html [INTERNAL REDIRECT]
(2) [perdir /var/www/html/] rewrite 'var/www/html/api/explorer/index.html' -> '/index.php'
(2) [perdir /var/www/html/] trying to replace prefix /var/www/html/ with /
(1) [perdir /var/www/html/] internal redirect with /index.php [INTERNAL REDIRECT]
(1) [perdir /var/www/html/] pass through /var/www/html/index.php 
```

令我困惑的是——如果我没看错的话——是：

*   正确地从 '' 重定向到 'index.html'
*   但随后第 2 行“尝试替换前缀”似乎完全多余
*   然后为什么！#？！它是否使用“/var/www/html/api/explorer/index.html”进行内部重定向？

如果我这样做，`ls -l /var/www/html/api/explorer/index.html`我会得到：

```
-rw-rw-r-- 1 ec2-user apache 3292 Jan 23 09:00 /var/www/html/api/explorer/index.html 
```

显然这个文件存在，并且 apache 提供这个内容的权限很好。

## 更新 2

还值得注意的是，我在根目录安装了 Wordpress，它有一个 .htaccess 文件，如下所示（顺便说一句，这是默认的 WP 加上流行的 W3 Total Cache 插件）：

```
# BEGIN W3TC Browser Cache
<IfModule mod_deflate.c>
    <IfModule mod_setenvif.c>
        BrowserMatch ^Mozilla/4 gzip-only-text/html
        BrowserMatch ^Mozilla/4\.0[678] no-gzip
        BrowserMatch \bMSIE !no-gzip !gzip-only-text/html
        BrowserMatch \bMSI[E] !no-gzip !gzip-only-text/html
    </IfModule>
    <IfModule mod_headers.c>
        Header append Vary User-Agent env=!dont-vary
    </IfModule>
    <IfModule mod_filter.c>
        AddOutputFilterByType DEFLATE text/css application/x-javascript text/x-component text/html text/richtext image/svg+xml text/plain text/xsd text/xsl text/xml image/x-icon
    </IfModule>
</IfModule>
<FilesMatch "\.(css|js|htc|CSS|JS|HTC)$">
    <IfModule mod_headers.c>
        Header set Pragma "public"
        Header set Cache-Control "max-age=31536000, public, must-revalidate, proxy-revalidate"
    </IfModule>
    FileETag MTime Size
    <IfModule mod_headers.c>
         Header set X-Powered-By "W3 Total Cache/0.9.2.4"
    </IfModule>
</FilesMatch>
<FilesMatch "\.(html|htm|rtf|rtx|svg|svgz|txt|xsd|xsl|xml|HTML|HTM|RTF|RTX|SVG|SVGZ|TXT|XSD|XSL|XML)$">
    <IfModule mod_headers.c>
        Header set Pragma "public"
        Header set Cache-Control "max-age=3600, public, must-revalidate, proxy-revalidate"
    </IfModule>
    FileETag MTime Size
    <IfModule mod_headers.c>
         Header set X-Powered-By "W3 Total Cache/0.9.2.4"
    </IfModule>
</FilesMatch>
<FilesMatch "\.(asf|asx|wax|wmv|wmx|avi|bmp|class|divx|doc|docx|eot|exe|gif|gz|gzip|ico|jpg|jpeg|jpe|mdb|mid|midi|mov|qt|mp3|m4a|mp4|m4v|mpeg|mpg|mpe|mpp|otf|odb|odc|odf|odg|odp|ods|odt|ogg|pdf|png|pot|pps|ppt|pptx|ra|ram|svg|svgz|swf|tar|tif|tiff|ttf|ttc|wav|wma|wri|xla|xls|xlsx|xlt|xlw|zip|ASF|ASX|WAX|WMV|WMX|AVI|BMP|CLASS|DIVX|DOC|DOCX|EOT|EXE|GIF|GZ|GZIP|ICO|JPG|JPEG|JPE|MDB|MID|MIDI|MOV|QT|MP3|M4A|MP4|M4V|MPEG|MPG|MPE|MPP|OTF|ODB|ODC|ODF|ODG|ODP|ODS|ODT|OGG|PDF|PNG|POT|PPS|PPT|PPTX|RA|RAM|SVG|SVGZ|SWF|TAR|TIF|TIFF|TTF|TTC|WAV|WMA|WRI|XLA|XLS|XLSX|XLT|XLW|ZIP)$">
    <IfModule mod_headers.c>
        Header set Pragma "public"
        Header set Cache-Control "max-age=31536000, public, must-revalidate, proxy-revalidate"
    </IfModule>
    FileETag MTime Size
    <IfModule mod_headers.c>
         Header set X-Powered-By "W3 Total Cache/0.9.2.4"
    </IfModule>
</FilesMatch>
# END W3TC Browser Cache
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress 
```

# jquery - jQuery Validate - 文本输入不断清除自身

> ID：14668541
> 
> 赞同：-1
> 
> 时间：2013-02-03T01:24:15.167
> 
> 标签：jquery, textbox, jquery-validate

如果未选中复选框并且文本框为空，那么我需要弹出验证消息。它确实会弹出，但会在输入时删除文本，使其保持无效。我该如何做到这一点，以便在输入第一个字符时验证消失并且除非文本框为空白，否则不会重新出现？

```
<form  id="practiceForm">
    <input type="text" name="firstName" id="textbox"/>
    <input type="checkbox" name="active" id="checkbox"/>
    <input type="submit" id="submit" value="Submit"/>
</form>

<script type="text/javascript">
    $('#checkbox').attr('checked', true);

    if($('#checkbox').attr('checked')){
        $('#textbox').attr('disabled', true);
        $('#textbox').val('');
    } else {
        $('#textbox').attr('disabled', false);
    };

$('#checkbox').change(function () {
    if($('#checkbox').attr('checked')){
        $('#textbox').attr('disabled', true);
        $('#textbox').val('');
    } else {
        $('#textbox').attr('disabled', false);
    };
});

$.validator.addMethod("textValidate", function(value){
    if(!$('#checkbox').attr('checked')){
        if(!$('#textbox').val('') || !$('#textbox').val(null)){

            return true;
        };
    };  
}, "If box is not checked then there must be text"
);

$('#practiceForm').validate({
    rules: {
        //textValidate: true
        firstName:{ 
                    textValidate: true
                    }
                }
            });

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T01:53:03.727

`textValidate`您的方法中的这个逻辑被破坏了：

```
if(!$('#textbox').val('') || !$('#textbox').val(null)){ 
```

您没有检查 a `value`of `''`or `null`，而是将其*设置*为`value`. 由于在每个按键事件上都会调用该方法，因此它会在您键入时清除输入。

试试这个：

```
$.validator.addMethod("textValidate", function (value) {
    if (!$('#checkbox').attr('checked')) {
        if (!$('#textbox').val() == '' || !$('#textbox').val() == null) {
             return true;
        };
    };
}, "If box is not checked then there must be text"); 
```

**工作演示：http: [//jsfiddle.net/s2AjA/](http://jsfiddle.net/s2AjA/)**

**附带问题：**

您不需要大部分代码...

```
$('#checkbox').attr('checked', true);

if($('#checkbox').attr('checked')){
    $('#textbox').attr('disabled', true);
    $('#textbox').val('');
} else {
    $('#textbox').attr('disabled', false);
}; 
```

它仅在 DOM 就绪时运行一次，并且由于您设置`#checkbox`为`checked`，因此`if/then`看起来像`checked`属性的条件是完全多余和不必要的。

它可以更简单地写成如下。也改变了`attr`在[`prop`](http://api.jquery.com/prop/)技术上比`attr`使用 jQuery 1.6+ 时更正确。

```
$('#checkbox').prop('checked', true);
$('#textbox').prop('disabled', true);
$('#textbox').val(''); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T01:49:04.463

```
if(!$('#textbox').val('') || !$('#textbox').val(null)){ 
```

将值设置`#textbox`为“”然后为空，并使该 if 语句始终返回 false。

你的意思可能是这样的：

```
if ($('#textbox').val() != '' || $('#textbox').val() != null) { 
```

# playframework-2.1 - Java Play 2.1RC2：提交表单：bindFromRequest() 不起作用，request().body() 为空

> ID：14668542
> 
> 赞同：2
> 
> 时间：2013-02-03T01:24:23.830
> 
> 标签：playframework-2.1

我正在尝试在 Play 2.1 RC2 中提交用户表单。

这是 users.scala.html，它显示了用户表单：

```
@(users: List[User], userForm: Form[User], isReadOnly: Boolean)

@import helper._
@import security._

@helper.form(action = routes.Users.updateOrCreate(), 'id->"User_Form"){

@*Variable inputs*@
@if(users == null) {
  @*name field for Users.create, update, and read*@
  @input(userForm("username"), '_showConstraints-> true, '_label->"User: ", 'class->"selector", '_id->"username", 'name->"username", 'id->"username"){ (id, name, value, args) => <input type="text" @if(isReadOnly){readonly}>}
  } else{@if(users!=null && userForm("id")==null){
  @*name field for Users.fillFrom and Users.all*@
    @if(users.size < 15){
      <div id = User_username-select>
          <label for="username">User: </label>
          <select name="username" id="username" form=@userForm</select>
      </div>
    }else{
      @inputText(userForm("username"), '_id->"username", 'class->"selector", '_showConstraints->false, '_label->"User: ")        } 
}else{@*this has been reached if no name field of any sort displays*@}}

@*non-variable fields*@

@input(userForm("password"), '_id->"User_password", '_showConstraints-> true, '_label->"Password: "){ (id, name, value, args) => <input type="password" @if(isReadOnly){readonly}>}

@input(userForm("name"), '_id->"User_name", '_showConstraints-> true, '_label->"Name: ", 'readonly->isReadOnly){ (id, name, value, args) => <input type="text" @if(isReadOnly){readonly}>}

@input(userForm("role"), '_showConstraints-> true){ (id, name, value, args) => <input type="text" @if(isReadOnly){readonly}>}  

<input type="submit" value="submit">

} 
```

它遵循的路由文件的行将`POST /models/User/updateOrCreate controllers.Users.updateOrCreate()`其引导到用户控制器中的此方法：

```
public static Result updateOrCreate(){
    //check form for errors
    Form<User> filledForm = userForm.bindFromRequest(); 

    System.out.println("INSIDE UPDATEORCREATE: ");
    System.out.println(request().body().asText());
    System.out.println(userForm.data());
    System.out.println(filledForm.data());

    if(filledForm.hasErrors()){
        System.out.println(filledForm.errors());
        return badRequest(users.render(null, filledForm, false));
    }
    //saves the User and returns a string containing the id
    //return redirect(routes.Users.read(User.updateOrCreate(filledForm.get())));
    return ok(users.render(null, filledForm, false));
} 
```

然而，控制器方法中的 println 分别打印“null”、“{}”和“{}”。我已经注释掉了模型中的所有验证，所以问题不是验证失败；由于某种原因，表单中的数据从未在请求​​中提交。

# jquery - jQuery：单击时将锚元素传递给函数

> ID：14668549
> 
> 赞同：0
> 
> 时间：2013-02-03T01:26:46.907
> 
> 标签：jquery

所以..这个应该很简单。我有一个锚元素。当它被点击时，我想调用一个函数来删除它的父元素。本质上，它是删除父级的链接。

我将如何做到这一点？我尝试使用以下方法，但不起作用：

```
<div>
     <a href='javascript:removeParent()'>Remove</a>
</div>
<script>
function removeParent() {
     $( this ).parent().remove()
}
</script> 
```

谁能帮我吗？

我正在尝试完成此操作，因为它是一个可以具有多个属性的表单......所以您可以添加更多属性，因此需要一种方法来删除它们。

干杯!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T01:30:34.393

$(this) 不是你这样做的元素。

理想情况下，这是：

```
<a href='#' class='remove'>Remove</a>

$('.remove').on('click', function(e){
    e.preventDefault();
    $(this).parent().remove();
}); 
```

但是，这部分问题“**因此您可以添加更多属性，因此需要一种删除它们的方法。** ”意味着您需要将其应用于将来的元素

```
$(document).on('click', '.remove', function(e){
    e.preventDefault();
    $(this).parent().remove();
}); 
```

尽管在理想情况下，您应该让 jQuery 搜索的次数更少，所以给您的列表包装器一个 ID 并使用它来识别可移动元素。

```
$('#attributelist').on('click', '.remove', function(e){
    e.preventDefault();
    $(this).parent().remove();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T01:42:18.043

如果您在 onload 后动态创建元素，则需要修改 popnoodle 的代码以使用容器：

```
$('#container').on('click', '.remove', function(e) {... 
```

这假定该类的所有元素`remove`都在 element 中`container`。它创建一个事件处理程序，该处理程序`container`将应用于类的任何元素`remove`，即使它们是在附加处理程序之后创建的。

# php - 如何在新窗口中回显搜索查询结果？

> ID：14668552
> 
> 赞同：0
> 
> 时间：2013-02-03T01:27:09.533
> 
> 标签：php, mysql, search

我试图弄清楚如何将搜索结果回显到新窗口中。

基本上，用户可以在搜索栏中输入位置、名称等，它会显示 5 个用户结果，即该结果存在多少用户。这是为了限制空间使用。然后，用户可以单击查看更多结果并被带到另一个页面，在该页面上进行查询，并且应该只回显那些在搜索中匹配查询的用户；即“伦敦”的那些用户。

但目前我所有的用户都在显示，我不知道这是为什么。有人可以告诉我哪里出错了。谢谢。

这是我的 search.php 页面，将搜索结果限制为 5：

```
<?php
//PHP CODE STARTS HERE

if(isset($_GET['submit'])){

// Change the fields below as per the requirements
$db_host="localhost";
$db_username="root";
$db_password="";
$db_name="";
$db_tb_atr_name="display_name";

//Now we are going to write a script that will do search task
// leave the below fields as it is except while loop, which will display results on screen

mysql_connect("$db_host","$db_username","$db_password");
mysql_select_db("$db_name");

$query=mysql_real_escape_string($_GET['query']);

$query_for_result=mysql_query("SELECT *
                        FROM ptb_stats
                        WHERE display_name like '%".$query."%' OR location LIKE '%".$query."%' OR age LIKE '%".$query."%' OR nationality LIKE '%".$query."%' OR ethnicity LIKE '%".$query."%' OR hobbies LIKE '%".$query."%' OR local_station LIKE '%".$query."%' LIMIT 5");
echo "<div class=\"search-results\">";
while($data_fetch=mysql_fetch_array($query_for_result))

{

    echo "<div class=\"text\"><a href=\"profile.php?id={$data_fetch['user_id']}\" class=\"search\">";
    echo "<div class=\"spacing\"><img width=35px height= 30px src=\"data/photos/{$data_fetch['user_id']}/_default.jpg\" class=\"boxgridsearch\"/> "; 
     echo substr($data_fetch[$db_tb_atr_name], 0,160);
    echo "</a></div></div>";

}
echo "<div class=\"morebutton-search\"><a href=\"search_results.php?to=%$query%\" target=\"_blank\" \">+ view more results</a></div>";

mysql_close();
}

?> 
```

这是我的 more_search_results.php 页面，用于显示所有匹配查询的结果：

```
<?php
$db_host="localhost";
$db_username="root";
$db_password="";
$db_name="";
$db_tb_atr_name="display_name";

//Now we are going to write a script that will do search task
// leave the below fields as it is except while loop, which will display results on screen

mysql_connect("$db_host","$db_username","$db_password");
mysql_select_db("$db_name");

$query=mysql_real_escape_string($_GET['query']);

$query_for_result=mysql_query("SELECT *
                        FROM ptb_stats
                        WHERE display_name like '%".$query."%' OR location LIKE '%".$query."%' OR age LIKE '%".$query."%' OR nationality LIKE '%".$query."%' OR ethnicity LIKE '%".$query."%' OR hobbies LIKE '%".$query."%' OR local_station LIKE '%".$query."%'");
echo "<div class=\"search-results\">";
while($data_fetch=mysql_fetch_array($query_for_result))

{

    echo "<div class=\"boxgrid caption\"><a href=\"profile.php?id={$data_fetch['user_id']}\"><img width=140px height=180px src=\"data/photos/{$data_fetch['user_id']}/_default.jpg\"><div class=\"cover boxcaption\">"; ?>
    <h58><? echo substr($data_fetch[$db_tb_atr_name], 0,160);?></a></h58> 
    </div>
    </div>
<? } ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T01:35:15.547

You're trying to get a variable called `query` when you actually passed `to` in your link. You get all records because your query is testing for `LIKE '%%'`, which will match everything.

This line is wrong...

```
echo "<div class=\"morebutton-search\"><a href=\"search_results.php?to=%$query%\" target=\"_blank\" \">+ view more results</a></div>"; 
```

It should be...

```
echo "<div class=\"morebutton-search\"><a href=\"search_results.php?query=$query\" target=\"_blank\" \">+ view more results</a></div>"; 
```

Also, notice how you're already applying the wildcard `%` in `more_search_results.php` so sending the extra `%`s in the parameter is unnecessary.

**Please note:** you should refrain from using the `mysql_` family of functions. They are deprecated and unsafe. Using them could lead to a SQL Injection. You should resort to using parametized queries with either MySQLi or PDO.

# ruby-on-rails-3 - 如何对rails中的表格列进行排序？

> ID：14668553
> 
> 赞同：4
> 
> 时间：2013-02-03T01:27:11.427
> 
> 标签：ruby-on-rails-3

我按照 Ryan Bates 教程实现了这个`sort table columns`并且效果很好，但是当我呈现索引页面时，表格已经按标题（asc）排序，我只想在用户单击列标题时对列进行排序。

我怎么能做到这一点？

**代码**

控制器

```
class ProductsController < ApplicationController
  helper_method :sort_column, :sort_direction

  def index
    @products = Product.order(sort_column + " " + sort_direction)
  end

  # ...

  private

  def sort_column
    Product.column_names.include?(params[:sort]) ? params[:sort] : "name"
  end

  def sort_direction
    %w[asc desc].include?(params[:direction]) ? params[:direction] : "asc"
  end
end 
```

helper_method

```
def sortable(column, title = nil)
  title ||= column.titleize
  css_class = column == sort_column ? "current #{sort_direction}" : nil
  direction = column == sort_column && sort_direction == "asc" ? "desc" : "asc"
  link_to title, {:sort => column, :direction => direction}, {:class => css_class}
end 
```

index.html.erb

```
<tr>
  <th><%= sortable "name" %></th>
  <th><%= sortable "price" %></th>
  <th><%= sortable "released_at", "Released" %></th>
</tr> 
```

**CSS**

```
.pretty th .current {
  padding-right: 12px;
  background-repeat: no-repeat;
  background-position: right center;
}

.pretty th .asc {
  background-image: url(/images/up_arrow.gif);
}

.pretty th .desc {
  background-image: url(/images/down_arrow.gif);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-03T06:26:04.660

你应该看看 Ransack。它在排序和复杂搜索方面做得很好。有一个很棒的[RailsCasts](http://railscasts.com/episodes/370-ransack)视频可以帮助你，而且侵入性要小得多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-23T12:56:01.247

以防万一有人会发现这个问题。可排序的列有一个很棒的宝石（不仅如此）：[https ://github.com/leikind/wice_grid](https://github.com/leikind/wice_grid)

看看例子： [http ://wicegrid.herokuapp.com/](http://wicegrid.herokuapp.com/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-06T09:45:55.460

您可以尝试对 index 方法进行 if 检查

```
def index
  if sort_column and sort_direction
    @products = Product.order(sort_column + " " + sort_direction)
  else
    @products = Product.all()
  end
end

def sort_column
  Product.column_names.include?(params[:sort]) ? params[:sort] : nil
end

def sort_direction
  %w[asc desc].include?(params[:direction]) ? params[:direction] : nil
end 
```

# html - 为什么在父 dom 节点上启用硬件加速会中断位置：已修复

> ID：14668555
> 
> 赞同：4
> 
> 时间：2013-02-03T01:27:19.250
> 
> 标签：html, css

在父 dom 节点上启用硬件加速会破坏`position: fixed` **这是为什么？**

这在 webkit 和 firefox 中被破坏了

**这里减少了测试用例**

[http://codepen.io/s/pen/yzHFA](http://codepen.io/s/pen/yzHFA)

* * *

启用的 GPU 模式

```
@include transform(translateZ(0));
@include perspective(1000);
@include backface-visibility(hidden); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T04:00:06.993

不幸的是，我没有适合你的解决方案。发生这种情况是因为 CSS 2D 转换在转换后的元素周围创建了一个包含块，导致它与文档一起滚动。

有关详细说明，请参阅 Eric Meyer 的帖子[http://meyerweb.com/eric/thoughts/2011/09/12/un-fixing-fixed-elements-with-css-transforms/](http://meyerweb.com/eric/thoughts/2011/09/12/un-fixing-fixed-elements-with-css-transforms/)

# ios - 保存和加载自定义对象

> ID：14668557
> 
> 赞同：0
> 
> 时间：2013-02-03T01:27:38.550
> 
> 标签：ios, objective-c

我是 iPhone 开发的新手。我的问题是我有`NSMutableArray`一些自定义对象。每个对象都有 4 个属性，即名称（`NSString`）、图像（`UIImage`）、按钮（`UIButton`）和与之关联的布尔值。`viewDidLoad`按钮以编程方式随机生成，并在视图加载（内部）时放置在视图上。如何保存这个对象数组并在用户退出然后重新进入应用程序时重新生成它。按钮还必须保留它们在视图上的位置。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T03:36:24.733

您可以使用 ARC，一种 GC。所有对象在超出引用时都会被释放。我可以向您展示保留这些对象的 2 个想法。

1：将这些对象保留在父 ViewController 或 Delegate 类上。

您可以在父 ViewControler 或 Delegate 类上提前声明所有对象。

```
NSMutableCustomArray *customArray = [NSMutableCustomArray array];
[customArray setParameters];
ChildView *childView = [[ChildView alloc] init];
[customArray setCustomArray:customArray];
[self.view addSubview:ChildView]; 
```

除非父对象存在，否则 customArray 中的所有对象都不会被引用。

2：使用 CoreData 或 NSUserDefaults。

如果您想要简单的数据、字符串、布尔值等，NSUserDefaults 非常有用。至于UIButton，你必须恢复位置很累。

```
[defaults setObject:string forKey:@"customString"];
[defaults setFloat:10.0 forKey:@"button_x"];
[defaults setFloat:10.0 forKey:@"button_y"];
[defaults setFloat:10.0 forKey:@"button_width"];
[defaults setFloat:10.0 forKey:@"button_height"]; 
```

# javascript - 如何测试浮点数是否是“机器精度内”的整数？

> ID：14668560
> 
> 赞同：3
> 
> 时间：2013-02-03T01:27:46.367
> 
> 标签：javascript, floating-point, precision, equality, floating-point-precision

我的问题的简短版本是：

> `x`什么被认为是“最佳实践”来决定浮点数何时`Math.round(x)`可以被认为是相等的，从而允许浮点运算的精度损失？

* * *

冗长的版本是：

我经常需要决定是否`x`应该将给定的浮点值“视为整数”，或者更迂腐地说，是否应“视为整数的浮点表示”。

（例如，如果*n*是整数，则数学表达式

> 日志[10] (10 ^(*n*) )

是表示相同整数*n*的复杂方式。这就是促使说类似浮点计算的结果可以被视为“整数的表示”的想法。）

任何时候做决定都很容易`Math.round(x) == x`每当评估为`true`：在这种情况下，我们可以说它`x`确实是整数（的浮点表示）。

但是测试`Math.round(x) == x`当它评估为 时，测试是不确定的`false`。例如，

```
function log10(x) { return Math.log(x)/Math.LN10; }
// -> function()
x = log10(Math.pow(10, -4))
// -> -3.999999999999999
Math.round(x) == x
// -> false 
```

编辑：我经常看到的一个“解决方案”是选择一些任意的容差，比如`ε = 1e-6`，并测试`Math.abs(Math.round(x) - x) < ε`. 我认为这样的解决方案会产生比我认为可接受的更多的误报。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T01:50:01.970

正如您在示例`x`中看到的那样，实际上根本不是整数。这是由于您的计算中较早出现舍入错误，因此您实际上无法知道`x`被定义为近似舍入数还是因舍入错误而出现锯齿状的舍入数。

如果您想知道哪个数字是一个或另一个，您将需要使用您自己建议的极限方法，或者使用足够高的精度以使您的数字不会在一开始就出现锯齿状。最后一种方法并非适用于所有情况。

还可以象征性地跟踪所有数学运算，即存储`1/3`为`1/3`而不是`0.3333`按需评估它们，以消除可以像手动评估表达式时那样取消的因素，但这在几乎所有情况下都是多余的。更不用说这样的系统会有多复杂。如果这是所需的解决方案，您可能可以与 MatLab 或 Mathematica 或其他处理评估的东西进行交互，~~除非您在浏览器中运行它，因为浏览器可能更难~~尝试 WolframAlpha API（我为什么不认为第一次？）。

尽管如此; 如果您可以通过选择`ε`这样的方式来解决此问题，那么您将获得令人满意的结果，这可能是最好的方法。如果静态`ε`不削减它，您可以尝试根据手头数字之前完成的计算类型动态选择它。即相乘的数字往往比相除的数字产生更少的分数部分，依此类推。如果数字除了加、减和乘法（不涉及分数）之外没有其他任何东西，您也可以知道它最大可以有多少个小数位，因此可以选择一个合理的`ε`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T06:36:39.717

这很有趣，所以我不得不考虑一下。

这是一个单行解决方案，虽然它涉及数字和字符串类型之间的转换，所以我不知道它有多优化。但这比仅仅选择一个最小阈值并检查该数字是否在该限制范围内要准确得多。

JavaScript 数字是双精度 64 位格式，具有大约 16 位十进制数字的精度。这是总位数，而不仅仅是小数点右侧的位数。

JavaScript 数字还有一个 toPrecision() 方法，可以将它们转换为字符串，四舍五入到给定的精度（总位数，非常适合您使用）。以下将任何数字四舍五入到最接近的 15 位精度，然后将其转换回浮点数。

```
function roundToPrecision(number, precision) {
    return parseFloat(number.toPrecision(precision));
}

x = roundToPrecision(x, 15); 
```

那么您的示例实际上将是一个整数：-4。

编辑：经过更多思考，这会更快：

```
var integerDigits = (""+parseInt(Math.abs(x))).length,
    threshold = 1e-16 * Math.pow(10, integerDigits);

Math.abs(Math.round(x) - x) < threshold 
```

[http://jsperf.com/number-precision-rounding](http://jsperf.com/number-precision-rounding)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T07:23:54.323

假设`x`非零，我认为您应该查看 ratio `Math.abs(x-Math.round(x))/x`。这涉及浮点类型每个存储固定数量的有效位，而不是小数点后固定数量的数字的事实。

接下来，您需要确定计算的典型舍入误差。如果`x`是简单计算的结果，可能很容易。如果没有，请考虑从您知道确切答案的测试用例中收集一些统计数据。`x`理想情况下，您会发现整数比率的最大值与该比率的最小值之间存在显着差异`x`，不应将其视为整数。如果是这样，请在该范围内选择一个 epsilon。

# java - Apache Mahout - 我应该使用它来构建自定义推荐器吗？

> ID：14668561
> 
> 赞同：1
> 
> 时间：2013-02-03T01:27:52.437
> 
> 标签：java, mahout, recommendation-engine

我正在迭代地构建一个基于频繁变化的概率潜在因素模型的自定义推荐系统。我已经编写了一些实现该模型的 Java 代码。它将用户-项目评分矩阵分解为两个矩阵 UxK（用户特征向量）和 IxK（项目特征向量）来估计缺失的评分。

我正在寻找最简单的方法将我的代码插入（可能通过重写）框架以构建推荐系统、基线，并能够以标准方式将它们相互比较 - 例如交叉验证以计算精度、召回率, RMSE... 由于我的系统仍然缺少这个，框架应该提供基于估计的用户项目评分矩阵计算和提出建议的方法。

看起来 Mahout 应该完成这项工作。但是，它的文档说“它目前不支持基于模型的推荐器。”。任何人都可以告诉我使用 Mahout 是否可以实现我想要实现的目标，以及是否值得花时间学习如何使用它。如果 Mahout 不适合，您能提出其他替代方案吗？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T15:20:23.433

我会说你最好问问[Mahout 邮件列表中的好人](http://mahout.apache.org/mailinglists.html)

也就是说，Mahout 提供了基于 SVD 的推荐器，这些推荐器使用不同的分解器进行矩阵计算。例如，有支持 2 种模式的 ALSWRFactorizer：

1.  显式反馈评级矩阵的分解。[见论文](http://www.hpl.hp.com/personal/Robert_Schreiber/papers/2008%20AAIM%20Netflix/netflix_aaim08%28submitted%29.pdf)
2.  分解隐式反馈变体。[见论文](http://research.yahoo.com/pub/2433)

通过实现自己的推荐器（扩展 AbstractRecommender）或实现自己的因子分解器（扩展 AbstractFactorizer）应该很容易扩展功能。尽管如此，在不了解您的方法或实施的情况下，我真的不能说更多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-09T14:40:34.627

有两类推荐器： 基于数据（为特定用户生成推荐，例如 SVD） 基于模型（生成模型以通过用户数据构建推荐，例如 RBM）

Mahout 不支持基于模型的推荐器（没有适当的接口来执行此操作）您可以实现一些算法，但开箱即用您将无法使用基于模型的方法的某些功能。

顺便说一句，我更喜欢 MyMediaLite（如果您的数据集小到可以避免使用 Hadoop）。MML 支持集成并且有更多的算法。

# java - 在 Google App Engine DataStore 上生成 NoSQL 数据库

> ID：14668568
> 
> 赞同：-1
> 
> 时间：2013-02-03T01:29:04.197
> 
> 标签：java, google-app-engine, nosql

我想使用 DataStore 在 Google App Engine 上创建一个 NoSQL 数据库，在其中我以编程方式生成数据库：即运行一个程序，该程序下载 XML 文件并将数据作为键值对上传到 DataStore。这可能吗？数据库是否有大小限制，我能否从本地计算机对其执行 INSERT 操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T10:01:36.503

是的，您可以在本地计算机上创建实体并将它们插入 HRD，而无需您插入 HRD 的实体的模型类甚至存在于 GAE 中。您只需要启用远程 api 并将应用程序上传到 GAE。欲了解更多信息，请阅读此处：

*   [Java 远程 API](https://developers.google.com/appengine/docs/java/tools/remoteapi)

有关数据存储配额，请参阅此文档：

*   [配额](https://developers.google.com/appengine/docs/quotas#Datastore)

# ruby - 在数组数组上计算数组乘积

> ID：14668569
> 
> 赞同：7
> 
> 时间：2013-02-03T01:29:24.053
> 
> 标签：ruby, arrays

为了在 Ruby 中计算笛卡尔积，可以使用`Array#product`, 如果我有一个数组数组并且想要计算乘积，语法如何？

```
[[1,2],[3,4],[5,6]] => [[1,3,5], [2,3,5], ...] 
```

我不确定，因为在 Ruby 文档中，该`product`方法是用任意数量的参数定义的，所以只需将我的数组数组作为参数传递，就像这样：

`[].product(as) => [`

还不够。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-03T01:36:47.550

The method takes multiple arguments, but not an array containing arguments. So you have to use it in this way:

```
[1,2].product [3,4], [5,6] 
```

If `as` is your array of arrays, you will have to "splat" it like this:

```
as[0].product(*as[1..-1]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-23T12:44:31.443

我得到的最接近的符号是：

```
:product.to_proc.call(*as)

# shorthand
:product.to_proc.(*as)
:product.to_proc[*as] 
```

# fortran - OpenMP Fortran 默认子句

> ID：14668570
> 
> 赞同：1
> 
> 时间：2013-02-03T01:29:28.353
> 
> 标签：fortran, openmp

这种并行工作正常。

```
!$OMP PARALLEL Private(irep)
!$OMP DO
do irep = 1, nrep
  print *, "Using thread: ", omp_get_thread_num(), "irep: ", irep
end do
!$OMP END DO NOWAIT
!$OMP END PARALLEL 
```

这也很好。

```
!$OMP PARALLEL
!$OMP DO
do irep = 1, nrep
  print *, "Using thread: ", omp_get_thread_num(), "irep: ", irep
end do
!$OMP END DO NOWAIT
!$OMP END PARALLEL 
```

为什么当我使用默认子句时它什么也不返回？

```
!$OMP PARALLEL DEFAULT(Private)
!$OMP DO
do irep = 1, nrep
  print *, "Using thread: ", omp_get_thread_num(), "irep: ", irep
end do
!$OMP END DO NOWAIT
!$OMP END PARALLEL 
```

太感谢了！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-03T03:58:49.690

让我们看一个更简单的案例：

```
program testprivate
use omp_lib

integer :: nrep
nrep=16

!$OMP PARALLEL DEFAULT(Private)
print *, "Thread: ", omp_get_thread_num(), "sees nrep = ", nrep
!$OMP END PARALLEL

end program testprivate 
```

我们运行它并得到：

```
$ gfortran -o private private.f90 -fopenmp
$ export OMP_NUM_THREADS=8
$ ./private
 Thread:            3 sees nrep =            0
 Thread:            0 sees nrep =            0
 Thread:            1 sees nrep =        32581
 Thread:            7 sees nrep =            0
 Thread:            4 sees nrep =            0
 Thread:            5 sees nrep =            0
 Thread:            2 sees nrep =            0
 Thread:            6 sees nrep =            0 
```

[OpenMP 私有变量](https://computing.llnl.gov/tutorials/openMP/#PRIVATE)，无论是默认私有还是其他，在进入私有部分时都未定义。这对于在 do 循环中设置的循环索引无关紧要`irep`；但是如果（比如说）你的编译器在私有部分内将每个线程设置`nrep`为零，那么循环将永远不会执行。更糟糕的是，每个线程可能有不同的 nrep 值，任何事情都可能发生。

所以你不想`nrep`成为`private`。您仍然可以拥有`default(private) shared(nrep)`，甚至可以拥有`firstprivate(nrep)`，尽管在这里让每个线程都有自己的`nrep`.

# jquery - jQuery Rails - .post 数据

> ID：14668571
> 
> 赞同：0
> 
> 时间：2013-02-03T01:30:02.213
> 
> 标签：jquery, ruby-on-rails, ajax

这是我的 application.js 文件中的代码：

```
 this.change(function() {
    $.post("dvbd", {id: this.val()}, null, "script");
  }); 
```

这是 dvbd.js.erb 中的内容：

```
$("#dave").html(:id); 
```

我想要做的是当`this`发生变化时，dave div 的值是`this`html。所以我想我的问题是如何在我的 js.erb 文件中使用 .post 发送的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T01:49:25.307

```
$("#dave").html("<%= params[:id] %>"); 
```

# ios - iOS6 中的线程安全单例

> ID：14668585
> 
> 赞同：0
> 
> 时间：2013-02-03T01:32:17.800
> 
> 标签：ios, objective-c, design-patterns, thread-safety, singleton

我试图获得线程安全的单例设计模式的更新版本。[这](https://stackoverflow.com/questions/8796529/singleton-in-ios-5)是我知道的一个版本。但是，我不能让它在 iOS6 中工作

这是我想做的事情：

这是我的类方法

```
 +(id)getSingleton
 {
    static dispatch_once_t pred;
    static EntryContainerSingleton *entriesSingleton = nil;
    dispatch_once(&pred, ^{
        entriesSingleton = [[super alloc] init];

        });

    return entriesSingleton;   
   }

 +(id)alloc
 {
  @synchronized([EntryContainerSingleton class])
  {
      NSLog(@"inside alloc of EntryContainerSingleton");
   ERROR >>>>>  NSAssert(entriesSingleton == nil, @"Attempted to allocate a second instance of a singleton.");
   ERROR >>>>>   entriesSingleton = [super alloc];
   ERROR >>>>>   return entriesSingleton;
   }
  return nil;
  }

  -(id)init
  {
     self = [super init];
     ......Some custom INitialization
     return self;
 } 
```

此代码引发如上标记的错误。错误消息显示使用未声明的标识符。此外，上面的链接建议使用

```
 [[allocWithZone:nil] init] 
```

当我这样使用它时，它会抱怨

```
 +(id)allocWithZone:(NSZone*)zone
 {
    return [self instance];
 } 
```

经过数小时的努力使其工作。如果有人能指出如何正确地做到这一点，那就太好了。我花了很多时间谷歌搜索，还没有找到完整的实现示例。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T01:47:35.960

为什么不直接使用 +initialize？

```
static MyClass *gSingleton;

+(void) initialize {
  if ( self == [MyClass class] ) {
    gSingleton = [MyClass new];     
  }
}

+(MyClass*) getSingleton {
  return gSingleton;
} 
```

它是线程安全的。唯一的问题是它不会阻止某人使用 alloc/init 或 new 分配第二个对象。

# php - Insert values into database from a web form using php

> ID：14668592
> 
> 赞同：0
> 
> 时间：2013-02-03T01:34:13.967
> 
> 标签：php, mysql, forms, pdo

I have created a web form which validates each field and if every field is fill up and follows the requirements then it displays thank you message. Other wise it shows error. What I am trying to do with the form is, I want to insert all the values into my database using PDO_MySql. I am referring a web link where you can find the codes. The reason why I didn't put on here is for my study issues. <>[https://www.dropbox.com/sh/6x9k3oo3t9zc3fz/OZtUYJAOKp](https://www.dropbox.com/sh/6x9k3oo3t9zc3fz/OZtUYJAOKp)<>

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T01:40:06.853

I saw your code. You are not inserting anything in your database. You are just validating if the the required fields are present.

# runtime - Big theta running time of this recursive function

> ID：14668601
> 
> 赞同：0
> 
> 时间：2013-02-03T01:35:34.323
> 
> 标签：runtime, recurrence, big-theta

I need a little help on figuring out the Big-Theta running time for this function.

```
int recursive(int n) {

    sum = 0;
    for (int i = 1; i <= n; i++)
        sum++
    if (n > 1)
        return sum + recursive(n-1);
    else
        return n;
} 
```

I know how what the run time of this function would be if the for loop wasn't in the function, but the loop is throwing me off a little bit. Any advice?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T01:40:46.357

*   If it was just the `for` loop, not recursive, the function would be `O(n)`.
*   If it was just recursive, and didn't have the `for` loop, it would also be `O(n)`.
*   But, it's doing `n` recursive steps (which we know is `O(n)`) *and* it's got an `O(n)` `for` loop at each of the `n` steps.

So... does that help?

# select - ZF2 (2.1 method) Populating select/drop down element in form

> ID：14668602
> 
> 赞同：1
> 
> 时间：2013-02-03T01:36:02.030
> 
> 标签：select, drop-down-menu, zend-framework2

I used Zend Framework 2.1(not 2.0x) method to populate a select/drop down that is described in following links:

*   [http://zf2.readthedocs.org/en/develop/modules/zend.form.advanced-use-of-forms.html#handling-dependencies](http://zf2.readthedocs.org/en/develop/modules/zend.form.advanced-use-of-forms.html#handling-dependencies)

*   [http://www.michaelgallego.fr/blog/2012/11/09/discover-whats-coming-for-zendform-in-zf-2-1/](http://www.michaelgallego.fr/blog/2012/11/09/discover-whats-coming-for-zendform-in-zf-2-1/)

Though it seems I have done as they told I got a error message like:

> *... ::__construct() must be an instance of Zend\Db\TableGateway\TableGateway, none given, called in ...*

which seems service locator is not used properly.

My form code that adds my FieldSet `SupplierFieldset`:

```
namespace Inventory\Form;
use Zend\Form\Form;
use Inventory\Model;

class ItemForm extends Form
{
    public function init()
    {
        $this->add(array(
                'name' => 'sup_code',
                'type' => 'Inventory\Form\SupplierFieldset'
        ));
    }
} 
```

My 'SupplierFieldset' class:

```
namespace Inventory\Form;

use Inventory\Model;
use Zend\Form\Element;
use Zend\Form\Fieldset;
use Zend\ServiceManager\ServiceLocatorAwareInterface;
use Zend\ServiceManager\ServiceLocatorInterface;
use Zend\InputFilter\InputFilterProviderInterface;

use Inventory\Model\SupplierTable;
use Inventory\Model\Supplier;

class SupplierFieldset extends Fieldset implements ServiceLocatorAwareInterface
{
    protected $serviceLocator;
    protected $supplierTable;

    public function init()
    {
        parent::__construct('Suppliers Code');
        $this->setLabel('Supplier Code');
        $this->setName('supplier_code');
        $suppliers = $this->getSupplierTable()->fetchAll();

       $select = new Element\Select('supplier_code');
        $options = array();
        foreach ($suppliers as $supplier) {
            $options[$supplier->id] = $supplier->sup_code;
        }
        $select->setValueOptions($options);
    }

    public function setServiceLocator(ServiceLocatorInterface $serviceLocator)
    {
        $this->serviceLocator = $serviceLocator;
    }

    public function getServiceLocator()
    {
        return $this->serviceLocator;
    }

    public function getSupplierTable()
    {
        if (!$this->supplierTable) {
            $sm = $this->getServiceLocator();
            $this->supplierTable = $sm->get('Inventory\Model\SupplierTable');
        }
        return $this->supplierTable;
    }
} 
```

My Module.php getFormElementConfig() function:

```
public function getFormElementConfig()
    {
        return array(
            'factories' => array(
                'SupplierFieldset' => function($sm) {
                    $serviceLocator = $sm->getServiceLocator();
                    $supplierTable = $serviceLocator->get('Inventory\Model\SupplierTable');
                    $fieldset = new SupplierFieldset($supplierTable);
                    return $fieldset;
                 }
            )
        );
    } 
```

My SupplierTable.php model:

```
namespace Inventory\Model;

use Zend\Db\TableGateway\TableGateway;

class SupplierTable
{
    protected $tableGateway;

    public function __construct(TableGateway $tableGateway)
    {
        $this->tableGateway = $tableGateway;
    }

    public function fetchAll()
    {
        $resultSet = $this->tableGateway->select();
        return $resultSet;
    }
} 
```

I know `SupplierTable` model's constructor needs a `TableGateway $tableGateway` parameter. But this model is working properly when called from `SupplierController`.

# php - Zend Framework 2 DateSelect/MonthSelect 格式

> ID：14668606
> 
> 赞同：6
> 
> 时间：2013-02-03T01:36:20.343
> 
> 标签：php, zend-form, zend-framework2, zend-form-element

随着新发布的 Zend Framework 2 版本，[添加了两个新的表单元素](https://github.com/zendframework/zf2/pull/2175)；`DateSelect`和`MonthSelect`。我想使用前者，它增加了三个选择；日、月、年。但是，我在按我想要的方式格式化输出时遇到问题 - 而且，没有这方面的文档！

我正在将表单元素添加到我的表单中（取自[此页面](https://gist.github.com/3705417)）：

```
$this->add(array(
    'type'    => 'Zend\Form\Element\DateSelect',
    'name'    => 'birthDate',
    'options' => array(
        'label'               => 'Date',
        'create_empty_option' => true,
        'day_attributes'      => array(
            'data-placeholder' => 'Day',
            'style'            => 'width: 20%',
        ),
        'month_attributes'    => array(
            'data-placeholder' => 'Month',
            'style'            => 'width: 20%',
        ),
        'year_attributes'     => array(
            'data-placeholder' => 'Year',
            'style'            => 'width: 20%',
        )
    )
)); 
```

对于输出，我这样做：

```
echo $this->formDateSelect($form->get('birthDate')); 
```

问题是我不知道如何控制选择的格式。例如，它们当前以这种形式输出：`[month] [day], [year]`. 我想改变两件事；首先，我想切换日期和月份，其次，我想摆脱逗号。

助手使用`IntlDateFormatter`类来格式化选择。在源代码中，我注意到您可以在调用[[link to source code]](https://github.com/zendframework/zf2/pull/2175/files#L4R123)时为日期类型使用[预定义的常量](http://www.php.net/manual/en/class.intldateformatter.php#intl.intldateformatter-constants)，如下所示：`__invoke()`

```
echo $this->formDateSelect($form->get('birthDate'), IntlDateFormatter::SHORT); 
```

尝试了所有常量后，我仍然无法获得我想要的格式。

我注意到三个选择都有 getter，但是`formSelect`对它们中的每一个都使用视图助手，因为数据填充在新的视图助手中，所以会呈现空选择。所以这几乎违背了单独使用选择的目的；那么我不妨只使用常规选择。

有谁知道如何更好地控制我的选择的格式？是否有可能没有太多麻烦，或者我应该只使用三个常规选择以获得最大的灵活性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T12:09:15.467

的格式`ViewHelper`是`$this->formDateSelect($element, $intlFormat, $locale)`.

话虽如此，您应该能够通过访问当前的语言环境设置并将 int 插入 ViewHelpers 来创建所需的输出[`__invoke()`](https://github.com/zendframework/zf2/pull/2175/files#L4R123)。看到[`getLocale()`](https://github.com/zendframework/zf2/pull/2175/files#L4R214)ViewHelper 意味着`translator`不使用配置中的默认值，因此您必须`locale`为此 ViewHelper 显式设置一个，但它应该可以正常工作；）

如果这对您来说不起作用，我可能会建议您在 Bakura 的[博客上发布有关新表单功能的消息](http://www.michaelgallego.fr/blog/2012/11/09/discover-whats-coming-for-zendform-in-zf-2-1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-29T08:32:31.927

我不知道为什么有人想在输出日期时在 Select DOM 元素之间放一个随机逗号......你能用它做什么呢？

要删除逗号和任何其他分隔符，您可以通过选项传入：

```
"render_delimiters": false 
```

我认为默认情况下应该是错误的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-16T16:46:58.480

正如 Sam 提到的，您可以只更新 php.ini 中的语言环境设置

例如，我的 php.ini 中有这个

> intl.default_locale = en_Gb

这会将 DateSelect 元素格式化为我的英国项目所需的日/月/年格式。

# c++ - Qt - 汇编代码列表视图

> ID：14668610
> 
> 赞同：0
> 
> 时间：2013-02-03T01:36:43.507
> 
> 标签：c++, c, windows, qt, assembly

我需要为 Qt 中的一些 asm 代码创建一个列表视图。

问题是：

*   asm 文件很大，我无法将其加载到 QPlainTextEdit 小部件或类似部件中，因为这会挂起应用程序并且滚动速度会非常慢
*   滚动条应该允许向前导航（这应该很简单）但也允许向后导航（我怎样才能反汇编以前的指令？我不知道它们有多少字节！）
*   即使我确定该地址对应于一条指令（并且不位于一条指令的中间），“转到地址”功能也很难实现，问题与前一点相同：我不不知道之前指令的字节数，所以我不能向后反汇编几行

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T02:34:01.953

不要将整个文件加载到小部件/控件中。仅加载足以显示的内容（例如 50 行或任何适合屏幕的内容），然后缓存其余部分或使用文件映射在需要时快速访问其他行。

至于向后反汇编，您可以尝试在离当前位置较远的点开始反汇编，例如在当前地址 - 256 字节。如果您要反汇编代码，反汇编可能会在这 256 个字节内同步。如果代码中嵌入了数据，那么，除了尝试返回不同数量的字节或文件的开头之外，这大约是您能做的最好的事情。

# python - Python 测验 - 如何接受大部分正确的答案

> ID：14668614
> 
> 赞同：1
> 
> 时间：2013-02-03T01:37:25.017
> 
> 标签：python

我正在编写一个允许用户设置个人测验的程序（如记事卡类型的系统）。参加测验时，用户会在每个问题上计时。答案不会是多项选择，它们将由用户输入。

有没有一种方法可以让我充分接受他们第一次设置测验时输入的不完整答案的答案？

### 例子

问：“谁是苏格拉底。”

A：“一位希腊哲学家。”

* * *

我考虑过使用类似的东西：

```
if input in answer:
    print "That's correct." 
```

但这根本行不通。

有没有办法做到这一点？或者接近它的东西。

- -更新 - -

我最近刚刚遇到了一个在这方面表现出色的 Python 模块，它被称为 FuzzyWuzzy，这里有一个链接到它的描述以及它可以做什么[http://seatgeek.com/blog/dev/fuzzywuzzy-fuzzy-string-在 python 中匹配](http://seatgeek.com/blog/dev/fuzzywuzzy-fuzzy-string-matching-in-python)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T01:48:43.623

这完全取决于您要做什么。您的尝试听起来像是在尝试匹配“希腊哲学家”的任何子字符串，因此“ee”将是正确答案。这听起来不对。

您可以为每个问题提供一组（或列表）可能的正确答案。对于您的示例，也许您也只会接受“哲学家”。

如果您想忽略拼写错误，您可以测试输入的内容是否与任何已知正确答案“接近”。这需要一个函数来计算匹配的接近程度。一种流行的方法是使用 Levenshtein Distance。看：

[http://en.wikipedia.org/wiki/Levenshtein_distance](http://en.wikipedia.org/wiki/Levenshtein_distance)
[http://en.wikibooks.org/wiki/Algorithm_implementation/Strings/Levenshtein_distance](http://en.wikibooks.org/wiki/Algorithm_implementation/Strings/Levenshtein_distance)
[http://code.activestate.com/recipes/576874-levenshtein-distance/](http://code.activestate.com/recipes/576874-levenshtein-distance/)
[http： //pypi.python.org/pypi/python-Levenshtein/](http://pypi.python.org/pypi/python-Levenshtein/)

### 更新

如果您想允许不准确的拼写，Levenshtein Distance 很好。但是，如果您想允许使用不同的短语，例如“来自古希腊的哲学家”，则需要采用不同的方法。如果你真的有动力，你可以尝试使用[NLTK，Python 的自然语言工具包](http://nltk.org/)来实现一种模糊短语匹配，你尝试匹配词性而不是提供的确切短语。请注意，这**不是微不足道**的。

# list - 方案折叠图和过滤器功能

> ID：14668616
> 
> 赞同：1
> 
> 时间：2013-02-03T01:37:40.607
> 
> 标签：list, filter, functional-programming, scheme, predicate

我正在学习如何在方案中使用高阶函数。我得到了使用高阶函数的想法，但是我在使用它们时遇到了麻烦。对于这个学习练习，我宁愿只使用过滤器、折叠和/或映射的某种组合。

例如，我想构造两个列表之间的集合差异，分别称为 A 和 B。我将集合差异定义为 x，这样 x 是 A 的元素，但 x 不是 B 的元素。我只想使用函数映射、过滤和折叠。例如：

令 A = (1 8 6 2)

令 B = (5 7 9 1 6)

A 和 B 的集合差为 (8 2)

这个想法是通过遍历 A 的元素并查看 A 的元素是否等于 B 的元素来构造一个新列表，如果是，则不要将 a 添加到新列表中；否则将 a 添加到新列表中。

我的算法思路是这样的：

让 neq 为“不等于”

1.  对于 A 中的每个 a 和 B 中的 b 计算表达式：`(neq? a b)`

    对于 a = 1，我们有：

    (和 (neq?1 5) (neq?1 7) (neq?1 9) (neq?1 1) (neq?1 6))

2.  如果此表达式为真，则 a 进入新列表；否则不要将 a 添加到新列表中。在我们的示例`(neq? 1 1)`中，计算结果为 false，因此我们不会将 1 添加到新列表中。

我的整个过程几乎都依赖于 1，这就是我遇到麻烦的地方。

1.  我该如何做第 1 步？
2.  我看到在第 1 步中我需要一些`map`和`fold`函数的组合，但是如何获得`and a neq b`分布式？

**编辑**这是我拥有的最接近的样本：

```
(fold-right (trace-lambda buggy (a b c) (and (neq? a b))) #t A B)
|(buggy 3 5 #t)
|#t
|(buggy 2 4 #t)
|#t
|(buggy 1 1 #t)
|#f
#f 
```

上面显示了我的匿名函数试图执行 (and (neq?ab)) 链的痕迹。但是，它只对 A 和 B 中相同位置/索引的元素执行此操作。

非常感谢所有帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T15:35:51.443

的简化版本使用`member`很容易实现`fold`，当然：

```
(define (member x lst)
  (fold (lambda (e r)
          (or r (equal? e x)))
        #f lst)) 
```

现在，有了这个，剩下的就很简单了：

```
(define (difference a b)
  (filter (lambda (x)
            (not (member x b)))
          a)) 
```

如果您想将所有这些合并到一个功能中（使用您的`neq?`），您可以执行以下操作：

```
(define (difference a b)
  (filter (lambda (x)
            (fold (lambda (e r)
                    (and r (neq? e x)))
                  #t b))
          a)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T18:31:02.380

在 Haskell 中，`fold`由于惰性求值，它能够短路求值。

但是在Scheme中这是不可能的。这就是为什么**在 Racket 中**，例如，为此提供了一个特殊功能[`ormap`](http://docs.racket-lang.org/reference/pairs.html#%28def._%28%28lib._racket%2Fprivate%2Fmap..rkt%29._ormap%29%29)，它*能够*进行短路评估。IOW 它是一种特殊的类型`fold`，必须在 Scheme 中显式地单独定义，因为 Scheme 不是惰性的。因此，根据您的情况，我认为可以将其用作特殊的`fold`.

使用它，我们得到

```
(define (diff xs ys) 
  (filter 
    (lambda (y) 
      (not (ormap (lambda (x) (equal? x y))     ; Racket's "ormap"
                  xs))) 
    ys)) 
```

如果您的元素可以排序，最好将集合维护为有序（升序）列表；然后`diff`可以更有效地实现，比较两个列表中的头元素并相应地推进，以线性时间工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T03:09:54.193

使用球拍：

```
(define A '(1 8 6 2))

(define B '(5 7 9 1 6))

(filter-not (lambda (x) (member x B)) A)

 ==> '(8 2) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-11T10:25:26.367

当然，在 Scheme 中可以在第一场比赛的短路之上实现`member`：`fold`

```
(define (member x lst)
  (call-with-current-continuation
    (lambda (return)
      (fold (lambda (e r)
              (if (equal? e x)
                  (return #t)
                  r))
            #f lst)))) 
```

# windows - 双显示器上的 Windows 8 RDC

> ID：14668617
> 
> 赞同：0
> 
> 时间：2013-02-03T01:37:41.110
> 
> 标签：windows, windows-8

我刚拿到 win 8 pro，我有 xp -pro pc，我用我的 win 7 电脑连接 mstsc.exe /span。但似乎 win 8 不适用于 mstsc /span。刚上了一台显示器。

如何在win 8上获得双显示器上的RDC？

我在从 Windows 商店下载的新“新远程桌面连接”应用程序中没有看到任何选项。任何的想法...？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T01:50:08.427

我不得不说我没有亲自测试过，因为我的 Win 8 笔记本电脑只有一个屏幕。

如果您启动旧的图形 RDP 客户端（不是 App Store 客户端），您可以选择使用多个监视器的选项：

![RDP 显示选项](../Images/6de937f2e6fa166dd698cc54fef485c3.png)

# css - 使 div 背景颜色跨越整个宽度

> ID：14668620
> 
> 赞同：2
> 
> 时间：2013-02-03T01:38:03.537
> 
> 标签：css

我想要做的是有一个像导航栏这样的引导程序，其中实际的导航栏在中心大约 960 像素，但背景颜色跨越了窗口的整个宽度。

但是，当窗口宽度小于 960 像素并且我滚动时，背景不会一直走到最后。

![](../Images/6621a47c40463743d2e5ca8a368962f5.png)

是否可以在没有自定义最大宽度（960px）规则的情况下实现这一点？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Test Page</title>
    <style type="text/css">
    #container {
        width: 960px;
        margin: 0 auto;
    }
    #nav {
        height: 33px;
        background-color: #cfcfcf;
    }
    </style>
</head>
<body>
<div id="nav">
    <div id="container">
        test
    </div>
</div>
</body>
</html> 
```

提前致谢！

编辑：哎呀。那里有一个额外的，虽然那不是问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T01:41:06.327

高度必须在内部 div (#container) 中。尝试

```
#nav { background-color: #cfcfcf; }

#container {  
    height:33px;
    width:960px;
    margin: 0 auto; 
} 
```

见[http://jsfiddle.net/wYGLj/](http://jsfiddle.net/wYGLj/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T01:40:10.117

您需要您的导航 div 跨越整个页面。

`#nav { width:100%; }`

将在这种情况下工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T01:42:05.053

您的 CSS 正在正常工作。因此，如果您希望它扩展屏幕的整个长度，请创建一个`wrapper`来处理该灰色元素。像这样。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Test Page</title>
    <style type="text/css">
    #wrapper {
        width: 100%;
        margin: 0;
        padding: 0;
        background-color: #cfcfcf;
    }
    #container {
        width: 960px;
        margin: 0 auto;
    }
    #nav {
        height: 33px;
    }
    </style>
</head>
<body>
<div id="wrapper">
<div id="nav">
    <div id="container">
        test
    </div>
</div>
</div>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T14:23:24.060

我添加了

```
body {
    min-width:960px;
} 
```

这似乎解决了这个问题。

# c - Passing 2-D array to function in c

> ID：14668623
> 
> 赞同：0
> 
> 时间：2013-02-03T01:38:20.837
> 
> 标签：c, arrays, pointers

> **Possible Duplicate:**
> [Passing multidimensional arrays as function arguments in C](https://stackoverflow.com/questions/4051/passing-multidimensional-arrays-as-function-arguments-in-c)

In C, if I want a function to receive a 2-D array, can I use * notation for the function parameter

```
int (int my2dary[][10]);  //This is what I do not want. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T01:41:47.177

Yes, you pass a pointer to an array of int

```
int func(int (*my2dary)[10]); 
```

and you call it

```
int a[5][10];
func(a); 
```

Although, `func` doesn't know how many elements are in `my2dary`, so you must give a number too

```
int func(int n, int (*my2dary)[10]); 
```

and call

```
int a[5][10];
func(5, a); 
```

See [How to interpret complex C/C++ declarations](http://www.codeproject.com/Articles/7042/How-to-interpret-complex-C-C-declarations) or [The ``Clockwise/Spiral Rule''](http://c-faq.com/decl/spiral.anderson.html).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T02:33:02.347

如果您的问题是您在编译时不知道数组的大小，您可能需要：

```
int func(int *array, int size)
{
   int n,m;
   ... 
   array[m*size+n]; /* = array[m][n] if in the caller: int array[x][size]; */
} 
```

可选地（并且很可能您需要）您可以传递第二个大小参数 (x) 以便能够测试数组边界

# html - Wrapper Div Not Centering in IE7,8,9 and FF11 with margin:0 auto

> ID：14668627
> 
> 赞同：0
> 
> 时间：2013-02-03T01:39:06.723
> 
> 标签：html, css

I'm putting together a landing page and can't figure out why the wrapper div is not centering in IE. I've tried to set explicit widths on the body and content divs but that didn't work (the width I used was 100% because I need it to expand and contract). I know this is basic HTML but I wasn't doing my cross-browser checks at the beginning so now I'm kinda far in and can't figure out where the issue is.

The URL is here:

[http://www.ncfitclub.net/landing/insanity/](http://www.ncfitclub.net/landing/insanity/)

I've done cross browser checks and the wrapper doesn't center in IE7,8 and 9 or in Firefox 11 (although it does center in my up to date version of Firefox on my Mac). I'm also not getting the background image in the content div to repeat-x. My assumption is that this is a width issue (which would explain why I don't see the background image on the content div) but I'm out of ideas on how to fix it. Thanks!

# python - Updating shared read-only data with Python multiprocessing

> ID：14668634
> 
> 赞同：2
> 
> 时间：2013-02-03T01:39:55.407
> 
> 标签：python, multiprocessing, neural-network, distributed-computing

I am attempting to use Python's multiprocessing library to experiment with distributed neural networks. At the moment, I have it set up so that a server process creates the neural network and chunks the input for mini-batch gradient descent with the batches being put into a shared queue, processed by a client process, and the result put into a separate shared queue.

So far, everything is working except that in order to process the batches and produce a gradient, the child processes need a copy of the network weights, which I have shared using a multiprocessing Array. The client processes only need a read-only copy of the weights, but the server process updates the local copies after each training epoch.

My question is how would I update the shared memory to reflect the changed weights so that on the next epoch, the client processes have the correct values for computing gradients.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T04:54:00.953

自从阅读本文以来，我一直在玩，`multiprocessing`发现在 an 中更新数据`mp.Array`并不太难——让我感到惊讶的是，当使用循环迭代`Array`. 下面的代码片段设置了一个简单的 master-worker 集，使用`mp.Process`（使用`Pool`会更好，但这对我来说更快），其中 an`mp.Array`用于同步 master 经常更改的数据（尽可能快）

```
from multiprocessing import Process, RLock, Array
from time import sleep

def worker(n, array, arrayLock):
    while True:
        arrayLock.acquire()
        print("Worker: %i -> %s" % (n, ",".join(str(i) for i in array)))
        arrayLock.release()
        sleep(n + 1)

if __name__ == '__main__':
    arrayLock = RLock()
    array = Array('i', range(10), lock=arrayLock)

    pd = {}
    for i in range(3):
        pd[i] = Process(target=worker, args=(i, array, arrayLock))
        pd[i].start()

    try:
        while True:
            arrayLock.acquire()
            for i in range(len(array)):
                array[i] = -array[i]
            arrayLock.release()
    except KeyboardInterrupt:
        pass

    for p in pd.values():
        p.terminate() 
```

导致以下输出

```
~> python mp_shared.py
Worker: 0 -> 0,1,2,3,4,5,6,7,8,9
Worker: 1 -> 0,-1,-2,-3,-4,-5,-6,-7,-8,-9
Worker: 2 -> 0,1,2,3,4,5,6,7,8,9
Worker: 0 -> 0,-1,-2,-3,-4,-5,-6,-7,-8,-9
Worker: 1 -> 0,-1,-2,-3,-4,-5,-6,-7,-8,-9
Worker: 0 -> 0,1,2,3,4,5,6,7,8,9 
```

跨进程更新数据只需更改`Array`. 我遇到了一个问题，结果看起来像这样（注意数据的交替符号）

```
Worker: 0 -> 0,-1,2,-3,4,-5,6,-7,8,-9
Worker: 1 -> 0,-1,2,-3,4,-5,6,-7,8,-9
Worker: 2 -> 0,-1,2,-3,4,-5,6,-7,8,-9 
```

这是因为当我读取或写入数组时，`Lock`自动创建的`Array`不会同步整个循环的访问！主进程将在`Array`工作人员获取锁之间进行更改。

为避免这种情况，我刚刚创建了我自己的`RLock`（需要`RLock`像触摸`Array`一样获取它，如果你已经获取了它会阻塞 a `Lock`）用于`Array`. 我将它传递`RLock`给所有工作人员，以便他们每个人都可以进行原子操作（在您的情况下，我确信读写是原子的以防止梯度计算中的错误很重要）。

**编辑：**

另一种选择似乎是，`mmap`但我不能评论它的使用，如果改变在这里按需要工作。

# php - PHP Sort directories by contents

> ID：14668637
> 
> 赞同：2
> 
> 时间：2013-02-03T01:40:18.167
> 
> 标签：php, arrays, sorting

I am trying to sort a list of directories according to the contents of a text file within each directory.

So far, I am displaying the list of directories:

```
$user = $_GET['user'];
$task_list = $_GET['list'];

if ($handle = opendir("../users/$user/tasks/$task_list/"))
{
    $files = array();
    while (false !== ($file = readdir($handle)))
    {
        if ($file != "." && $file != ".." && $file != ".htaccess")
        {
            array_push($files, $file);
        }
    }
    closedir($handle);
}

//Display tasks
sort($files);
foreach ($files as $file)
{
    echo "$file"; 
} 
```

Each directory has a text file within it called due.txt, I would like to sort the list of directories according to the contents of this file due.txt.

So far, I have tried:

```
$user = $_GET['user'];
$task_list = $_GET['list'];

if ($handle = opendir("../users/$user/tasks/$task_list/"))
{   
    $files = array();   
    $tasksSort = array();
    while (false !== ($file = readdir($handle)))
    {
        if ($file != "." && $file != ".." && $file != ".htaccess")
        {
            $taskSort = file_get_contents("../users/$user/tasks/$task_list/$file/due.txt");
            array_push($files, $file);
            array_push($tasksSort, $taskSort);
        }
        closedir($handle);
    }

    //Sort tasks and display
    sort($tasksSort);
    foreach ($files as $file)
    {
        echo "$file"; 
    }
} 
```

But the `$tasksSort` array doesn't seem to have any content to sort...?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T01:47:47.403

```
sort($tasksSort);
foreach ($tasksSort as $file)
{
    echo "$file"; 
} 
```

# php - 使用 php 变量在 javascript 上传递多个参数

> ID：14668639
> 
> 赞同：0
> 
> 时间：2013-02-03T01:40:26.213
> 
> 标签：php, javascript, variables, parameters

我有以下 javascript，它将一个 php 站点重新加载到一个 div 中：

```
if (boxes.length) {
          $(".loadingItems").fadeIn(300);
            // Change the name here as well
            $(".indexMain").load('indexMain.php?'+this.name+'=' + boxes.join("+"),
            function() {
                $(".indexMain").fadeIn('slow');
                $(".loadingItems").fadeOut(300);
            }); 
```

我想在同一个网址中传递另一个参数...

所以我认为我应该按照以下方式进行操作，尽管我无法让它工作。这是正确的方法吗？

我正在尝试`categ`使用这样的 php 变量传递参数`$category`：

```
 if (boxes.length) {
        $(".loadingItems").fadeIn(300);
        // Change the name here as well
        $(".indexMain").load('indexMain.php?categ=<?php echo $category;?>&'+this.name+'=' + boxes.join("+"),
        function() {
            $(".indexMain").fadeIn('slow');
            $(".loadingItems").fadeOut(300);
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T01:53:56.380

我可以看到这不起作用的两个潜在原因（代码似乎很好......）：

1.  php 没有被执行；javascript 位于外部`.js`文件中，或者 html 文件具有例如`.html`扩展名而不是`.php`;
2.  您回显的变量包含无效字符。您应该使用[`urlencode`](http://php.net/manual/en/function.urlencode.php)以确保不会发生这种情况：`<?php echo urlencode($category); ?>`

# c# - WPF 本地化扩展：在运行时翻译窗口

> ID：14668640
> 
> 赞同：4
> 
> 时间：2013-02-03T01:40:38.613
> 
> 标签：c#, wpf, internationalization

我正在翻译 WPF 窗口。我正在使用[WPF 本地化扩展](http://wpflocalizeextension.codeplex.com/)。到目前为止，我在`<Resource>.es.resx`file 中只有一个用于测试目的的西班牙语翻译。在设计时翻译工作。所以我想我是在正确的轨道上。

我已经包含了在运行时动态转换 GUI 的菜单项。最初我尝试了这个（天真的）命令......

```
public class CmdTranslateUI : ICommand
{
    bool ICommand.CanExecute(object parameter)
    {
        // TODO: Query available translations
        return true;
    }

    public event EventHandler CanExecuteChanged;

    void ICommand.Execute(object parameter)
    {
        LocalizeDictionary.Instance.Culture = new CultureInfo(
            (string) parameter);
    }
} 
```

... 并且每种语言的菜单项都以这种方式在 XAML 中绑定到它。

```
<MenuItem Header="Español" CommandParameter="es-ES">
    <MenuItem.Command>
        <l:CmdTranslateUI />
    </MenuItem.Command>
</MenuItem> 
```

事实是这样的方法是行不通的。文化信息仍然设置为`"en-US"`反正。我读到设置`LocalizeDictionary.Instance.Culture`它`DictionaryEvent`被触发，所以我认为这会自动更新 GUI。显然我错了。

另一方面，似乎当前线程的文化也不会影响库行为。

所以我问...

问：

*   [在运行时使用WPF Localize Extension](http://wpflocalizeextension.codeplex.com/)翻译窗口的推荐方法是什么？
*   我如何列出可用的翻译？

提前致谢 。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T07:37:45.393

上次编译库时，我似乎无意中引入了一个错字（或者我的 HDD/CPU 中有幽灵）。设置后语言切换现在工作`LocalizeDictionary.Instance.SetCurrentThreadCulture`。

仅作记录，这就是上面提到的命令类的样子

```
public class CmdTranslateUI : ICommand
{
    bool ICommand.CanExecute(object parameter)
    {
        CultureInfo ci = new CultureInfo((string)parameter);

        foreach (CultureInfo c in ResxLocalizationProvider.Instance.AvailableCultures)
        {
            if (ci.Name == c.Name)
                return true;
            else if (ci.Parent.Name == c.Name)
                return true;
        }
        return false;
    }

    public event EventHandler CanExecuteChanged;

    void ICommand.Execute(object parameter)
    {
        LocalizeDictionary.Instance.SetCurrentThreadCulture = true;
        LocalizeDictionary.Instance.Culture = new CultureInfo(
            (string) parameter);
    }
} 
```

...至少这是一种简单的方法，只要资源文件 l10n 提供程序处于活动状态，它就可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T02:07:28.563

的属性独立于线程 UI 文化`LocalizeExtension`。`Culture`有时这可能是需要的，因为线程文化确实会影响很多事情。我们在自己的项目中使用扩展并手动设置线程文化以匹配`LocalizeDictionary`'s 文化。

通常这应该会自动更新 UI。确保您`LocText`在 XAML 中使用标记扩展，例如：

```
<TextBlock Text="{lex:LocText Bla:Bla:Bla}" /> 
```

**更新：要获取可用翻译列表，您可以尝试以下操作：**

[从 .resx 文件组中获取所有可用的文化](https://stackoverflow.com/questions/3226974/get-all-available-cultures-from-a-resx-file-group)

但是，我建议您只在代码中提供语言的修复列表，或者如果您使用的是 IoC 容器，请在此处注册可用的语言。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-18T16:38:29.803

这并不能回答 OP 的问题，但我想我还是会把它贴在这里，因为问题的标题是相关的。

我遇到了一个问题，在运行时更改语言时，我的应用程序会被部分翻译。起初以为是约定问题，因为我每个页面都有单独的资源，但真正的问题是第一页中的最后一个控件没有翻译，所以它打破了链条，结果所有子页面都没有得到翻译。

我正在翻译`FallbackValue`文本块，当绑定为空时，我使用此属性显示默认文本。

无论如何，要捕获这样的错误，您可以订阅以下事件：

```
LocalizeDictionary.Instance.MissingKeyEvent += (sender, args) =>
{
    //Do something
}; 
```

# sql - SQL Comparing COUNT values within same table

> ID：14668646
> 
> 赞同：1
> 
> 时间：2013-02-03T01:41:57.223
> 
> 标签：sql, oracle

I'm trying to solve a seemingly simple problem, but I think i'm tripping over on my understanding of how the EXISTS keyword works. The problem is simple (this is a dumbed down version of the actual problem) - I have a table of students and a table of hobbies. The students table has their student ID and Name. Return only the students that share the same number of hobbies (i.e. those students who have a unique number of hobbies would not be shown)

So the difficulty I run into is working out how to compare the count of hobbies. What I have tried is this.

```
SELECT sa.studentnum, COUNT(ha.hobbynum)
FROM student sa, hobby ha
WHERE sa.studentnum = ha.studentnum
AND EXISTS (SELECT *
            FROM student sb, hobby hb
            WHERE sb.studentnum = hb.studentnum 
            AND sa.studentnum != sb.studentnum
            HAVING COUNT(ha.hobbynum) = COUNT(hb.hobbynum)
           )
GROUP BY sa.studentnum
ORDER BY sa.studentnum; 
```

So what appears to be happening is that the count of hobbynums is identical each test, resulting in all of the original table being returned, instead of just those that match the same number of hobbies.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T02:00:01.217

未经测试，但可能是这样的（如果我正确理解问题）：

```
WITH h AS (
  SELECT studentnum, COUNT(hobbynum) OVER (PARTITION BY studentnum) student_hobby_ct
    FROM hobby)
SELECT studentnum, student_hobby_ct
  FROM h h1 JOIN h h2 ON h1.student_hobby_ct = h2.student_hobby_ct AND
                         h1.studentnum <> h2.studentnum; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T02:10:15.843

我认为您的查询只会返回至少有其他学生具有相同爱好的学生。但是你不会返回任何关于他们匹配的学生的信息。这是故意的吗？在加入计数之前，我会将这两个查询都视为子查询和聚合。你可以做几件事......这里它返回具有匹配爱好计数的学生数量，但你可以限制 HAVING(COUNT(distinct sb.studentnum) = 0 以获得你的查询似乎返回的结果......

```
with xx as 
(SELECT sa.studentnum, count(ha.hobbynum) hobbycount
            FROM student sa inner join hobby ha
            on sa.studentnum = ha.studentnum
            group by sa.studentnum
           )
select sa.studentnum, sa.hobbycount, count(distinct sb.studentnum) as matchcount
from
xx sa inner join xx sb on 
    sa.hobbycount = sb.hobbycount
where
    sa.studentnum != sb.studentnum
GROUP by sa.studentnum, sa.hobbycount
ORDER BY sa.studentnum; 
```

# linux - 检查 bash 文件的前 N 行是否有字符串

> ID：14668649
> 
> 赞同：2
> 
> 时间：2013-02-03T01:42:40.920
> 
> 标签：linux, bash, shell, unix, scripting

我正在尝试编写一个 bash 脚本，该脚本可以通过并仅检查文件的前 N ​​行以匹配特定字符串。我可以编写一个简单的命令来检查整个文件，但是包含在大于 N 的行中的信息可能不准确。

这是我当前的实现

```
find . -exec egrep -H -m 1 -l "\<$month/$day/$year\>" {} \; 
```

我正在考虑使用 head 函数首先修剪文件，但这似乎不起作用。有什么建议么？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T02:49:15.907

这将向您显示与第一`N`行中的模式匹配的文件

```
find . -type f | xargs egrep -H -m 1 -n "\<$month/$day/$year\>" | awk -F : '$2 <= N { print $1; }' 
```

`egrep`搜索文件中的第一个匹配项并添加行号。`awk`然后搜索行号小于或等于`N`（在此处插入数字）的所有行并打印文件名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T01:55:23.167

或许像这样

```
find -type f | xargs head -N | egrep -H -m 1 -l "\<$month/$day/$year\>" 
```

其中`N`是行数。

# javascript - 使用 jQuery each() 将图像动态添加到 div .. 不知何故，它们都添加到最后一个 div

> ID：14668650
> 
> 赞同：0
> 
> 时间：2013-02-03T01:42:43.637
> 
> 标签：javascript, jquery

所以我试图检查画廊中的每张图片，并用另一个从 php 返回的图片覆盖它。我收集所有的，然后迭代它们，创建一个“保持框架”，然后将动态图像添加到其中。

不知何故，它们都添加到我处理的最终图像中。每个图像都有一个框架，但新图像都覆盖在图库中的最终图像上。

我究竟做错了什么。我已经使用 that=this 来处理 AJAX 回调中的范围，

```
var $allPics = $(".pixelsandwich");
$allPics.each(function(){

    $(this).wrap('<div class="pixelsandwichFrame" />');
    src = $(this).attr('src');
    $that = $(this); 
    $.ajax({
        type:"POST",
        url:"js/pixelsandwich/pixelsandwich.php",
        data:{src:src},
        success:function(response){
            newImg = $("<img class='crunched'>");
            newImg.attr('src', response);
            frame = $that.parent();
            frame.append(newImg); // << these are all appending to the frame of the last image instead of each one
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T01:45:37.417

Your`$that`是一个全局变量（因为它缺少`var`），所以它在循环的每一步都被覆盖。在本地声明：

```
$(".pixelsandwich").each(function () {

    var $that = $(this).wrap('<div class="pixelsandwichFrame" />');

    $.ajax({
        type: "POST",
        url: "js/pixelsandwich/pixelsandwich.php",
        data: { src: $that.attr('src') },
        success: function (response) {
            var newImg = $("<img class='crunched'>").attr('src', response);
            $that.parent().append(newImg);
        }
    });
}); 
```

# c++ - creating large 2d array of size int arr[1000000][1000000]

> ID：14668654
> 
> 赞同：0
> 
> 时间：2013-02-03T01:43:32.390
> 
> 标签：c++, boost

I want to create a two-dimensional integer array of size 10⁶ × 10⁶ elements. For this I'm using the boost library:

```
boost::multi_array<int, 2> x(boost::extents[1000000][1000000]); 
```

But it throws the following exception:

> terminate called after throwing an instance of 'std::bad_alloc'
> what(): std::bad_alloc

Please tell me how to solve the problem.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T02:12:51.680

你真的不想分配一个那么大的数组。它的内存大约为 4 TB。

根据您要对该数组执行的操作，您应该考虑两个选项：

*   **外部数据结构。**阵列将被写入硬盘驱动器。最近访问的部分也在 RAM 中，因此取决于您访问它的方式，它可能会非常快，但当然永远不会像完全在 RAM 中那样快。查看[STXXL](http://stxxl.sourceforge.net/)以了解外部数据结构。

    此方法的优点是您可以访问数组中的所有元素（与您将看到的第二种方法相反）。但是，问题仍然存在：即使在硬盘驱动器上，4 TB 也非常大，至少如果您谈论的是一般桌面应用程序。

*   **稀疏数据结构。**如果您实际上只需要该数组中的几个项目，但您想在大小为 10⁶ ⨯ 10⁶ 的空间中处理这些项目，请不要使用数组，而是使用地图之类的东西或两者的组合：将数组分配到“块”，比如说 1024 x 1024 个元素。将这些块放入地图中，同时将块索引（坐标除以 1024）作为地图中的键。

    这种方法的优点是您不必链接到另一个库，因为它可以由您自己轻松编写。但是，它的缺点是，如果您访问分布在 10⁶ ⨯ 10⁶ 整个坐标空间中的元素，或者甚至需要所有值，它也会使用大约 4TB（甚至更多）的内存。只有当您实际上只访问这个巨大的“虚拟”数组的智能部分时，它才有效。

    以下（未经测试的）C++ 代码应证明这一点：

    ```
    class Sparse2DArray
    {
        struct Coord {
            int x, y;
            Coord(int x, int y) : x(x), y(y) {}
            bool operator<(const Coord &o) const { return x < o.x || (x == o.x && y < o,y); }  // required for std::map
        };

        static const int BLOCKSIZE = 1024;

        std::map<Coord, std::array<std::array<int,BLOCKSIZE>,BLOCKSIZE> blocks;

        static Coord block(Coord c) {
            return coord(c.x / BLOCKSIZE, c.y / BLOCKSIZE);
        }
        static Coord blockSubCoord(Coord c) {
            return coord(c.x % BLOCKSIZE, c.y % BLOCKSIZE);
        }

    public:
        int & operator[](int x, int y) {
            Coord c(x, y);
            Coord b = block(c);
            Coord s = blockSubCoord(c);
            return blocks[b][s.x][s.y];
        }
    }; 
    ```

    `std::map`您也可以使用(hash map) 而不是a ，`std::unordered_map`但必须定义一个散列函数而不是类型（或使用）。`operator<``Coord``std::pair`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T01:47:49.023

When you create an array that way, it is created on the stack and the stack has a limited size. Therefore, your program will crash because it doesn't have enough room to allocate that big of an array.

There are two ways you can solve this, you can create the array on the [heap](http://en.wikipedia.org/wiki/Dynamic_memory_allocation#Dynamic_memory_allocation) using the new keyword But you have to delete it afterword or else you have a memory leak, and also be careful because while the heap has a larger memory size then the stack it is still finite.

The other way is for you to use `std::vector` inside `std::vector` and let it handle the memory for you.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T02:23:01.087

创建一个 10 ⁶ ×10 ⁶矩阵的目的是什么？^(如果您正在尝试创建一个稀疏矩阵（即具有 10 6 个)有限元的传热问题的扩散矩阵），那么您应该考虑使用现有的线性代数库。例如，[trilinos](http://trilinos.sandia.gov)项目支持求解大型稀疏矩阵，例如您可能尝试创建的矩阵。

# javascript - 如何将 JS 变量中的 HTML 输出为 HTML 内容

> ID：14668656
> 
> 赞同：0
> 
> 时间：2013-02-03T01:43:57.347
> 
> 标签：javascript, html, variables, output

我想知道是否有人可以帮助我，我创建了这个名为 embed 的 JavaScript 变量，它包含一些 HTML。我想知道如何在变量中输出 html。

`var hostname = "http://www.justin.tv/widgets/live_embed_player.swf?channel="+channelname+"\" id=\"live_embed_player_flash\" height=\"700\" width=\"1280\" bgcolor=\"#000000\">http://www.justin.tv/widgets/live_embed_player.swf\" />"`

任何可以帮助我的人都会非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T01:53:11.397

要在另一个元素中输出您的 HTML：

```
document.getElementById("parent-element").innerHTML = hostname; 
```

# protocols - BitTorrent protocol implementation: Not receiving "Piece" messages

> ID：14668659
> 
> 赞同：1
> 
> 时间：2013-02-03T01:44:31.643
> 
> 标签：protocols, bittorrent

I've implemented most of the BitTorrent protocol in Java. The problem is that for some reason none of the peers are sending me any of the pieces I request. (After 3 hours I received only 2 piece-messages)

My handshaking is as follows:

```
send 19
send "BitTorrent protocol"
send 8 zero'd reserved bytes
send info_hash (20 bytes)
send peer_id (20 bytes)

read 19
read "BitTorrent protocol"
read 8 reserved bytes
read info_hash. Compare with own info_hash
read peer_id

send unchoke

start listening for messages 
```

I listen for messages in another thread as follows:

```
while(true)
    read length (4 bytes)
    read id (1 byte)
    if length == 0: continue //keep-alive message
    if id == 1: Stop all requests to this peer
    if id == 2: Continue all requests to this peer
    if id == 4: Read index from have-message and request piece if we don't have it
    if id == 5: If we have not already received bitfield. Read and store it. Request any pieces that we don't have yet
    if id == 7: Read index, begin and length. Read and store piece. Send have-message if a piece was fully downloaded 
```

Can you see any problem with this approach? I've tried doing periodic keep-alive messages every minute, but that doesn't help. What's weird is that I'm receiving tons of bitfield-messages and maintaining 30+ active connections.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-10T21:35:00.763

这个答案已经很晚了，但我已经链接到它，所以也许这仍然有用。

我想你把你的身份证弄混了。0 是“阻塞”，1 是“不阻塞”（不是 1 和 2）。此外，您可能还需要确保在您不被阻塞时触发请求，以防万一您在此之前收到“拥有”消息。

# scheme - Spaceship Game in Scheme

> ID：14668660
> 
> 赞同：0
> 
> 时间：2013-02-03T01:44:59.753
> 
> 标签：scheme, racket

The following Scheme code is about a game with a spaceship and right now it doesn't take into account when the spaceship runs out of fuel, which is what I'm trying to do. Here is the code:
;; this is the code for problem rrset -- Lunar Lander

```
(define (update ship-state fuel-burn-rate)  
 (make-ship-state  
   (+ (height ship-state) (* (velocity ship-state) dt)) ; height  
   (+ (velocity ship-state)  
      (* (- (* engine-strength fuel-burn-rate) gravity)  
         dt))                                           ; velocity  
   (cond (<= (fuel 0)  
        ((write-line "no fuel left")   
          'game-over)  
         (else  
           (- (fuel ship-state) (* fuel-burn-rate dt))))))       ; fuel  

(define (lander-loop ship-state)  
  (show-ship-state ship-state)  
  (if (landed? ship-state)  
  (end-game ship-state)  
  (lander-loop (update ship-state (get-burn-rate)))))  

(define (show-ship-state ship-state)  
  (write-line   
    (list 'height (height ship-state)  
          'velocity (velocity ship-state)  
          'fuel (fuel ship-state))))  

(define (landed? ship-state)  
  (<= (height ship-state) 0))  

(define (end-game ship-state)  
  (let ((final-velocity (velocity ship-state)))  
       (write-line final-velocity)  
       (cond ((>= final-velocity safe-velocity)  
               (write-line "good landing")  
               'game-over)  
             (else  
               (write-line "you crashed!")  
               'game-over))))  

(define (get-burn-rate)  
  (if (= (player-input) burn-key)  
      1  
      0))  

(define (play) (lander-loop (initial-ship-state)))  

(define (initial-ship-state)  
  (make-ship-state 50       ; 50 km high  
                   0        ; not moving (0 km/sec)  
                   20))     ; 20 kg of fuel left  

(define dt 1)               ; 1 second interval of simulation  

(define gravity 0.5)        ; 0.5 km/sec/sec  

(define safe-velocity -0.5) ; 0.5 km/sec or faster is a crash  

(define engine-strength 1)  ; 1 kilonewton-second  

(define (player-input)  
  (char->integer (prompt-for-command-char " action: ")))  

(define burn-key 32)   ;space key  

(define (make-ship-state height velocity fuel)  
  (list 'HEIGHT   height  
        'VELOCITY velocity  
        'FUEL     fuel))  

(define (height state) (second state))  
(define (velocity state) (fourth state))  
(define (fuel state) (sixth state))  

(define (second l) (cadr l))  
(define (fourth l) (cadr (cddr l)))  
(define (sixth l) (cadr (cddr (cddr l))))  

; Users of DrScheme or DrRacket: add these for compatibility with MIT Scheme...  
(define (write-line x)  
  (display x)  
  (newline))  

(define (prompt-for-command-char prompt)  
  (display prompt)  
  (read-char)) 
```

To modify it, I modified the "update" procedure, so now there is a conditional statement:

```
(define (update ship-state fuel-burn-rate)  
  (make-ship-state  
   (+ (height ship-state) (* (velocity ship-state) dt)) ; height  
   (+ (velocity ship-state)  
      (* (- (* engine-strength fuel-burn-rate) gravity)  
         dt))                                           ; velocity  
   (cond (<= (fuel 0)  
        ((write-line "no fuel left")   
          'game-over)  
         (else  
           (- (fuel ship-state) (* fuel-burn-rate dt)))))) 
```

however this doesn't work.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T03:27:36.977

You're going to want to add your conditional to the `lander-loop` procedure. This is the part of the code that checks whether the game is over each cycle.

```
(define (lander-loop ship-state)  
  (show-ship-state ship-state)
  (if (or (landed? ship-state) (<= (fuel ship-state) 0))
    (end-game ship-state)
    (lander-loop (update ship-state (get-burn-rate))))) 
```

Then you can add your out of fuel message to the `end-game` procedure.

# android - 使用 onCreateContextMenu 从 listView 复制文本

> ID：14668663
> 
> 赞同：2
> 
> 时间：2013-02-03T01:45:42.280
> 
> 标签：android, android-contextmenu

我正在尝试使用 onCreateContextMenu [OnCreateContextMenu 和 ListView 项目](https://stackoverflow.com/questions/12389184/oncreatecontextmenu-and-listview-items)从列表视图复制项目文本， 并 [从 Android 上的 TextView 复制文本，](https://stackoverflow.com/questions/2952914/copy-text-from-textview-on-android) 但我不知道如何将菜单中的副本单击与 listView 相关联。

我当前的代码，打开一个带有副本的菜单，我不知道单击副本后如何获取文本

```
 @Override
 public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo) {
     super.onCreateContextMenu(menu, v, menuInfo);
        menu.add(0, v.getId(), 0, "copy");

}

@Override  
public boolean onContextItemSelected(MenuItem item) {  
    if(item.getTitle()=="copy"){}  
    else {return false;}  
return true;  
} 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T03:09:30.867

问题已解决，以下解决方案包括对 API 1-11 和以上 11 的支持

```
@SuppressLint("NewApi")
@Override  
public boolean onContextItemSelected(MenuItem item) {  
    if(item.getTitle().equals(copy)){
        AdapterContextMenuInfo info = (AdapterContextMenuInfo) item.getMenuInfo();
        int index = info.position;
        String textTocopy =adapter.getItem(index-1).title;
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
            android.content.ClipboardManager clipboard = (android.content.ClipboardManager) getSystemService(Context.CLIPBOARD_SERVICE); 
            ClipData clip = ClipData.newPlainText("simple text",textTocopy);
            clipboard.setPrimaryClip(clip);}
        else{
            android.text.ClipboardManager clipboard = (android.text.ClipboardManager) getSystemService(Context.CLIPBOARD_SERVICE);
            clipboard.setText(textTocopy);

        }
    }  
    else {return false;}  
    return true;  

} 
```

# node.js - nodejs、mongodb 和 heroku 堆栈上的后台处理

> ID：14668664
> 
> 赞同：3
> 
> 时间：2013-02-03T01:45:48.613
> 
> 标签：node.js, mongodb, heroku, background-process

我正在编写一个简单的图像上传网站作为学习项目。

它是用 nodejs 编写的，带有 mongodb 并部署到 Heroku cedar 上。

我想实现一个每小时运行一次的节点脚本，并将[reddit算法](http://amix.dk/blog/post/19588)应用于图像并将每个图像的分数存储在mongodb中。

考虑到我在 heroku 上并且有文件系统限制，我该如何实现这一点？- 鉴于 cedar 架构，最好将其交给单独的工作人员，但如果有更快/更简单/更容易的方法，我会很高兴听到它。不幸的是， [heroku 开发中心关于工人/后台工作](https://devcenter.heroku.com/articles/background-jobs-queueing)的文章尚未列出任何此类系统的教程。

我以前在 heroku 上进行后台处理的经验是使用 rails - 所以计划任务附加，+延迟作业，它非常简单。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T03:44:55.157

一种非常简单的方法可能是利用[setInterval](http://nodejs.org/api/timers.html)或[node-cron](https://github.com/ncb000gt/node-cron)。您可能还希望为此定期处理[生成](http://nodejs.org/api/child_process.html#child_process_child_process_spawn_command_args_options)或[派生一个子进程。](http://nodejs.org/api/child_process.html#child_process_child_process_fork_modulepath_args_options)

# c# - 来自自定义类的数据绑定 Grid.Column

> ID：14668665
> 
> 赞同：1
> 
> 时间：2013-02-03T01:45:52.570
> 
> 标签：c#, wpf, xaml, data-binding

我是 WPF 新手，正在尝试数据绑定，但无法找到解决我遇到的问题的方法。我正在尝试制作一个带有矩形的窗口，我可以使用 grid.column 属性在屏幕的左侧和右侧之间动态切换。到目前为止，这是我的代码，我不知道该去哪里，如果有人可以建议一个像样的网站来阅读和解决我的问题，那也很好。

这是我的 C# 代码：

```
namespace WPFTestingApplication
{
    public static class GridProperties
    {
        public static int gridColumn = 1;
    }

    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }
    }
} 
```

和我的 XAML 代码：

```
<Window x:Class="WPFTestingApplication.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="200" Width="400">
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*" />
        <ColumnDefinition Width="*" />
    </Grid.ColumnDefinitions>
    <Rectangle Name="Rect" Grid.Column="0" Fill="DarkGray" Margin="5" />
</Grid> 
```

我希望将 grid.column 设置为 GridProperties 类中的 gridColumn 属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T02:31:05.847

```
<Window x:Class="WPFTestingApplication.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:WPFTestingApplication"
    Title="MainWindow" Height="200" Width="400">
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*" />
        <ColumnDefinition Width="*" />
    </Grid.ColumnDefinitions>
    <Rectangle Grid.Column="{Binding Source={x:Static local:GridProperties.gridColumn}" 
               Name="Rect" Fill="DarkGray" Margin="5" />
</Grid> 
```

# ruby - #{ 在 Ruby 中做了什么？

> ID：14668666
> 
> 赞同：0
> 
> 时间：2013-02-03T01:46:01.173
> 
> 标签：ruby

> **可能重复：**
> [Ruby 中#{ } 的含义？](https://stackoverflow.com/questions/10869264/meaning-of-in-ruby)

我知道它是用于元编程的，我很难理解这个操作符在下面的例子中做了什么：

```
class Class
 def attr_accessor_with_history(attr_name)
    attr_name = attr_name.to_s # make sure it's a string
    attr_reader attr_name
    attr_reader attr_name+"_history"
    class_eval %Q"
        def #{attr_name}=(value)
            if !defined? @#{attr_name}_history
                @#{attr_name}_history = [@#{attr_name}]
            end
            @#{attr_name} = value
            @#{attr_name}_history << value
        end
    "
    end
end

class Foo
   attr_accessor_with_history :bar
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T02:14:04.210

一般而言，`#{...}`评估其中的任何内容并将其返回，转换为带有`to_s`. 这使得在一个字符串中组合几个东西变得容易得多。

一个典型的例子：

```
"There are #{n} car#{n == 1 ? '' : 's'} in the #{s}" 
```

这相当于：

```
"There are " + n.to_s + " car" + (n == 1 ? '' : 's').to_s + " in the " + s.to+_s 
```

重要的是要记住，`#{...}`插值的内容实际上是一段 Ruby 代码，其结果将在组合之前转换为字符串。

元编程的那个例子非常懒惰，因为可以使用并且`instance_variable_get`可以避免。大多数时候，您会看到用于创建字符串的字符串插值，而不是方法或类。`instance_variable_set``eval`

该方法有一个更强大的格式化程序`String#%`：

```
"There are %d car%s in the %s" % [ n, (n == 1 ? '' : 's'), s ] 
```

这可用于添加精确的小数位数、用空格填充字符串和其他有用的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T01:52:13.990

`#{var}`在 Ruby 中进行变量替换。例如：

`var = "Hello, my name is #{name}"`

您发布的代码正在生成一个字符串，其中包含您传入的 attr_name 的访问器方法的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T01:52:24.870

它并没有真正做太多：D。所有的红色文本基本上只是一个字符串。“bla #{var} bla”部分只是写“bla”+ var +“bla”的更好方式。在 irb 中自己尝试一下：

```
a = 10
puts "The Joker stole #{a} pies." 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T02:32:27.580

它所做的就是所谓的`variable interpolation`。

```
name = "Bond"
p "The name is #{name}. James #{name}." 
```

将输出，

```
> "The name is Bond. James Bond." 
```

# c# - Getting started developing add-in for powerpoint

> ID：14668672
> 
> 赞同：6
> 
> 时间：2013-02-03T01:48:01.613
> 
> 标签：c#, .net, visual-studio, powerpoint, office-addins

I would like to develop an add-in for Microsoft PowerPoint. I have Visual Studio 2012 installed and ready, but i can't seem to find any simple tutorials or getting started guides on the subject except this brilliant (sarcasm) guide from Microsoft: [http://msdn.microsoft.com/en-us/library/vstudio/cc668192.aspx](http://msdn.microsoft.com/en-us/library/vstudio/cc668192.aspx)

I have been searching the net for a few days, but without any luck.

Is there anyone with experience in developing add-ins for PowerPoint, who could give me a hint on how to get started?

It would be great to know if you prefer Visual Basic or C# and why.

Lastly, sorry if I sound like a rookie. I am for sure.

Kind regards.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T04:43:57.110

[http://blogs.msdn.com/b/jasonz/archive/2012/05/24/my-favorite-features-creating-storyboards-with-powerpoint.aspx](http://blogs.msdn.com/b/jasonz/archive/2012/05/24/my-favorite-features-creating-storyboards-with-powerpoint.aspx)

[http://www.codeproject.com/Articles/420406/PowerPoint-timer-addin](http://www.codeproject.com/Articles/420406/PowerPoint-timer-addin)

[http://msdn.microsoft.com/en-us/library/office/bb960904%28v=office.12%29.aspx](http://msdn.microsoft.com/en-us/library/office/bb960904%28v=office.12%29.aspx)

我想这些是很好的启动......用代码......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-03T04:47:11.790

Visual Basic（我假设是 .NET）还是 C#？

如果您不熟悉 PowerPoint 自动化，也不是。

使用 VBA。它内置于 PPT 中，使用起来更快，您可以在 IDE 中测试一小段代码，而无需先编译。

如果您决定稍后将其移动到 VB.NET 或 C# 中，假设您知道这两种语言中的任何一种，这应该不是那么大的困难。

或者一旦开发完成，您可以将包含 VBA 的 PPT 保存为加载项（PPA 或 PPAM 文件，具体取决于您要定位的 PPT 版本）。并以比需要的多一点的方式分发它；没有大量的运行时/框架等。

# jquery-isotope - Add class to current Isotope filter

> ID：14668675
> 
> 赞同：1
> 
> 时间：2013-02-03T01:49:16.290
> 
> 标签：jquery-isotope

I'm using the following jQuery to filter Isotope items:

```
 $('#nav a').click(function(){
      var selector = $(this).attr('data-filter');
        $container.isotope({ 
        filter: selector,
        animationOptions: {
         duration: 1200,
         easing: 'linear',
         queue: false,

       }
      }); 
```

Which corresponds with this HTML:

```
<nav id="nav">
        <ul>
            <li><a href="" data-filter="*">All</a></li>
            <li><a href="" data-filter=".cat1">Category 1</a></li>
            <li><a href="" data-filter=".cat2">Category 2</a></li>
            <li><a href="" data-filter=".cat3">Category 3</a></li>
            <li><a href="" data-filter=".cat4">Category 4</a></li>
            <li><a href="" data-filter=".cat5">Category 5</a></li>
        </ul>
    </nav> 
```

I'd like for the current filter link to have a class of "current" when in view. Any ideas on how to do this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T13:36:15.693

您可以在函数中使用 addClass 和 removeClass。在添加类以从之前选择的任何项目中清除它之前，您需要从所有项目中删除该类。

```
 $('#nav a').click(function(){
      //removes class from all items to "clear" the class from your menu
      $('#nav a').removeClass("current");

      //adds the class to whichever item you clicked
      $(this).addClass("current");

      var selector = $(this).attr('data-filter');
        $container.isotope({ 
        filter: selector,
        animationOptions: {
         duration: 1200,
         easing: 'linear',
         queue: false,

       }
      });
}); 
```

# c# - 如何添加到列表 还有中间的数字？

> ID：14668678
> 
> 赞同：1
> 
> 时间：2013-02-03T01:49:37.223
> 
> 标签：c#

这是代码：

```
_fts = new List<int>();
                    for (int i = 0; i < LR.Count; i++)
                    {
                        _fts.Add(LR[i].start);
                        _fts.Add(LR[i].end);
                    } 
```

最后 _fts 有例如 15 个数字，例如前 4 个索引：

```
[0] 88
[1] 96
[2] 93
[3] 100 
```

在我进行添加之前我需要：_fts.Add 我需要以某种方式计算每两对开始和结束并获取它们之间的数字并将所有这些数字添加到_fts。

例如 end 是 96 并且 start 88 所以我需要在 _fts 中添加数字：

```
88 89 90 91 92 93 94 95 96 
```

然后 end 是 100 并且 start 是 93 所以再次添加到 _fts 数字：

```
93 94 95 96 97 98 99 100 
```

所以现在 _fts 看起来像：

```
88 89 90 91 92 93 94 95 96 93 94 95 96 97 98 99 100 
```

如果例如 93 和 94 的数字出现两次没关系，我需要这种方式，因为在它之后我解析列表并将其放入目录中......不要介意这部分与目录。

我需要在每对夫妇之间添加数字。而不仅仅是添加 88 和 96 或 93 和 100。

我该怎么做 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T01:51:54.917

像这样？

```
for (int j = LR[i].start; j <= LR[i].end; j++)
{
    _fts.Add(j);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T01:57:09.940

假设 LR 是一个可枚举的集合，您可以将其简化为：

```
var _fts = LR.SelectMany( lr => Enumerable.Range(lr.start, lr.end-lr.start+1) ); 
```

如果要消除重复项，请添加`.Distinct()`到语句中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T01:57:25.583

用于`Enumerable.Range`每个范围。它需要起始编号和计数，因此您需要计算计数。

```
 var LR = new []
                     {
                         new {start = 88, end = 96},
                         new {start = 93, end = 100}
                     };

        var _fts = new List<int>();
        for (int i = 0; i < LR.Length; i++)
        {
            _fts.AddRange(Enumerable.Range(LR[i].start, LR[i].end - LR[i].start + 1));
        }

        Console.WriteLine(String.Join(" ", _fts)); 
```

# c - Building a C immutable string library, how to deal with leftover const char*'s?

> ID：14668679
> 
> 赞同：2
> 
> 时间：2013-02-03T01:49:45.277
> 
> 标签：c, string

Dealing with strings in C definitely makes one wish for a simple class-based language, but I'm trying to instead build a convenient string library. My idea is to use immutable strings, with a struct called `Rstring` (for "robust string") that has an internal `const char* s` and `int length`, such that operations like `rstring_concat` and `rstring_substring` return new `Rstring` objects with their own newly `malloc`'d character pointers.

Writing up an initial draft of the library, I am pleased with the simplicity and cleanliness of using my library instead of `char *`. However, I realized that returning a newly allocated pointer is somewhat of a PITA without a destructor. Each time some operation is done, say via concatenation or substrings, you have some newly allocated memory, and then whichever strings you had before are now hanging around, and probably are useless, so they need to be `free`'d, and C has no destructors, so the user is stuck having to manually go around `free`ing everything.

Therefore my question is, are there any clever ways to avoid having to make a whole bunch of manual calls to free? Possibly, for example, having internal `start` and `end` indices in order to have strings which act like small strings, but really contain quite a bit more? I don't know if there's any generally accepted method of doing this, or if people are simply stuck with tedious memory management in C.

Perhaps best, is there any widely-used library for convenient string manipulation in C?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T01:54:36.607

如果您需要一个更好的 CI 字符串库，建议使用[The Better String Library](http://bstring.sourceforge.net/)。

* * *

C 没有任何方法可以简化内存管理。您使用 malloc 分配的任何内存都必须被释放。如果您在一个函数中处理大量字符串，您可以使用一个特殊的`registry`地方来注册字符串。然后注册表可以销毁所有注册到它的字符串。

例如（只有接口，没有实现）

```
void rstring_reg_init(rstring_reg*);
void rstring_reg_destroy(rstring_reg*);
rstring rstring_reg_create(rstring_reg*, const char*);
void rstring_reg_register(rstring_reg*, rstring);
void rstring_reg_detach(rstring_reg*, rstring); 
```

如果您的字符串是可变的，您甚至可以使用注册表创建字符串（我宁愿将其称为池）。如果字符串要记住它们的池，您甚至可以让它们在创建时注册自己。这可能会导致相当“漂亮的代码”，例如：

```
rstring f() {
    rstring_reg reg;
    rstring_reg_init(&reg);
    rstring a = rstring_reg_create(reg, "foo");
    rstring b = rstring_reg_create(reg, "bar");
    rstring ab = rstring_concat(a, b);
    rstring s = rstring_substr(ab, 1, 4);
    rstring_detach(s);
    rstring_reg_destroy(&reg);
    return s;
} 
```

这段代码的作用是：

*   创建注册表
*   创建`a`和`b`字符串都知道注册表
*   创建一个新`ab`字符串。它会自动添加到注册表中。
*   创建一个新`s`字符串。它也被添加到注册表中。
*   从注册表中分离`s`，因为我们要返回它。
*   销毁注册表。这会自动销毁`a`,`b`和`ab`
*   Return `s`- f 的调用者现在负责管理它的内存

* * *

最后，我宁愿推荐使用 C++ 而不是使用这种野兽。

你真正想要的是[RAII](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)，这只能使用 C++ 或专有的 GCC 扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T03:37:17.603

您可能想看看[Glib，它有许多有用的数据结构和服务](http://developer.gnome.org/glib/2.34/)，其中包括类型[Gstring](http://developer.gnome.org/glib/2.34/glib-Strings.html)。有一个`printf`将其结果直接放入 Gstring 中。非常便利。

从本质上讲，您的问题更多是关于内存分配而不是字符串本身。对于字符串或其他任何内容的内存分配，您从 C 中获得的帮助很少。有几种通用方法：

1.  **手动：** 为每个对象调用 malloc() 和 free()。
2.  **保守的垃圾收集：** [Boehm 收集器](http://www.hpl.hp.com/personal/Hans_Boehm/gc/)非常成熟。虽然它有一些问题，但在这一点上它们很好理解。必须避免某些古怪的编码方法和激进的优化。
3.  **引用计数垃圾收集：** 这要求您在创建和销毁指向它的每个指针时调用`reference`和`dereference`增加/减少字符串中的计数器的例程。当递减使计数为零时，字符串被释放。这与 malloc() 和 free() 一样乏味且容易出错，但它允许您处理字符串的生命周期可能以几个单独的代码块中的任何一个结束的复杂情况。
4.  **池分配。** 在此方案中，您可以创建任意数量的分配池。创建字符串时，您指定应该分配它的池。池立即全部释放。
5.  **堆栈分配。** 字符串是从具有标记和释放操作的单个内存池中分配的。调用 Release 将所有字符串释放回上次调用 Mark 的位置。

以上所有的组合是常见的。例如，[GNU Obstacks](http://gcc.gnu.org/onlinedocs/libiberty/Obstacks.html)结合了 4 和 5。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T02:55:57.797

至少据我了解，不可变字符串的全部意义在于能够通过共享存储来避免复制。（如果这很重要，您也可以避免一些锁定问题。）但是在这种情况下，您真的不能允许客户端释放字符串，除非您强制它们保持引用计数，这真的很痛苦。

但是，在许多应用程序中，您可以执行 Apache Runtime (APR) 所做的工作，并使用内存池。在内存池中创建的对象不会单独释放；整个池被释放。这需要一些生命周期分析，并且可能会导致难以理解的错误，因为编译器不会为您做簿记，但它通常比引用计数少，另一个好处是分配和释放都非常快。这可能会抵消另一个缺点，即释放存储有点不精确。

如果您有某种基于请求的控制流，典型的服务器（但也适用于某些类型的 UI 应用程序），那么内存池架构效果最好。在基于请求的结构中，每个请求都会初始化一个内存池，并在请求处理完成时释放它。如果请求对服务器的状态进行了某种永久性更改，您可能必须将一些数据从临时池移动到（更多）永久池，但这种更改相对较少。对于可以优雅地划分为阶段的请求，其中一些是临时需要内存的，可以嵌套内存池；在这里，您可能需要为封闭的内存池显式标记某些字符串，或者在删除它们的内存池之前移动它们。

由于同时删除了内存池中的所有对象，因此可以通过将终结器附加到池本身来实现终结器。池可以保留一个简单的终结器链表，这些终结器在实际释放池之前按顺序（以相反的创建顺序）执行。这允许终结器引用同一池中的任意其他对象，前提是它们不会使对象的状态无效；这个限制并不太严格，因为总的来说，终结器是关于管理非内存资源（如文件描述符）的。

APR 没有不可变的字符串（或者，至少在我上次查看它时没有），因此 Apache 最终会进行大量不必要的字符串复制。这是一种设计选择；我在这里不会以一种或另一种方式投票。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T02:49:43.370

您真正需要的是[C 的垃圾收集器](http://www.linuxjournal.com/article/6679)。

> LISP 和 Java 程序员认为垃圾收集是理所当然的。借助 Boehm-Demers-Weiser 库，您也可以轻松地在 C 和 C++ 项目中使用它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-03T02:40:56.470

声明不可变字符串结构的“稍微聪明”的方式类似于：

```
struct Rstring {
    size_t length;
    char s[0];
}; 
```

这是实际中的[零长度数组破解](https://stackoverflow.com/questions/9816325/flexible-array-member-zero-length-array)。您可以`Rstring`按如下方式分配对象：

```
struct Rstring* alloc_rstring(const char* text) {
    size_t len = strlen(text);
    struct Rstring* ret = malloc(sizeof(Rstring) + len + 1));
    ret->length = len;
    memcpy(ret->s, text, len + 1);
    return ret;
} 
```

并使用简单的 释放此类 Rstring 对象`free()`，因为字符串数据位于相同的分配中。

# extjs - How to change views when I click a button?

> ID：14668680
> 
> 赞同：1
> 
> 时间：2013-02-03T01:49:59.033
> 
> 标签：extjs, view, sencha-touch, sencha-touch-2, push

I'm using, or abusing, Sencha Touch for the first time and I just want to push a list view, when i click a button. Here is my view:

```
Ext.define('TouchNuts.view.Decision', {
extend: 'Ext.Panel',
xtype: 'decision',

config: {
    title: 'Decision',

    scrollable: true,
    styleHtmlContent: true,
    styleHtmlCls: 'Decision',
    tpl: '<h2>{name}</h2>, <h3>{description}<h3>, <h4>{price:ellipsis(15)}</h4> <h1>you can do this </h1>',

        items: [

                        {
                        xtype: 'button',
                        text: 'SEND',
                        ui: 'confirm',
                        docked: 'bottom',
                        action:  'doSomething'
                        }
               ]
         }
 }); 
```

Here is the view I'd like to push:

```
Ext.define('TouchNuts.view.File', {
extend: 'Ext.Panel',
xtype: 'file',

config: {
    title: 'File',
    iconCls: 'star',
    layout: 'fit',
            items: [
                {
                        xtype: 'list',
                        id: 'file',
                        store: 'TransactionStore',
                        itemTpl: '<h2>{name:ellipsis(15)}</h2>, <h3>{description:ellipsis(8)}<h3>, <h4>{price:ellipsis(15)}</h4>',
                        itemCls: 'SummaryItems'
                }
            ]
    }
}); 
```

And here is my controller:

```
Ext.define('TouchNuts.controller.doSomething', {
extend: 'Ext.app.Controller',

config: {
    refs: {

    },
        control: {
          'button[action=doSomething]' : {
             tap: function() {
               getMainView('TouchNuts.view.Decision').push('TouchNuts.view.File');

             }
         }

}
}
}); 
```

I'm pretty good with HTML, CSS, and jQuery, but new to JS and totally clueless when it comes to Sencha so any advice is appreciated.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T06:19:52.963

最好给你的视图一个 itemId 以便在你的控制器中引用它们。例如：

`TouchNuts.view.Decision`可以有一个 itemId：`decisionPanel`

和

`TouchNuts.view.File`可以有一个 itemId：`filePanel`

现在在你的`Controller`你会这样做：

```
...
config: {
    refs: {
       decisionPanel: {
           autocreate: true,
           selector: '#decisionPanel',
           xtype: 'decision'
       },    
       filePanel: {
           autocreate: true,
           selector: '#filePanel',
           xtype: 'file'               
       }
    },
    control: {
      'button[action=doSomething]' : {
         tap: 'onButtonTap'
     }

}

onButtonTap : function(button, e, options) {
    var me = this;
    Ext.Viewport.setActiveItem(me.getDecisionPanel());
}
... 
```

你会注意到我曾经`getDecisionPanel()`得到这个`decisionPanel`视图。这是因为会为您指定的每个自动生成一个 getter 函数，`ref`并且为了访问它，您需要使用新的`get`+ 大写`ref`名称。更多信息在这里：[http ://docs.sencha.com/touch/2-1/#!/api/Ext.app.Controller](http://docs.sencha.com/touch/2-1/#!/api/Ext.app.Controller)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T10:46:27.640

代替

```
getMainView('TouchNuts.view.Decision').push('TouchNuts.view.File'); 
```

您必须先创建视图，然后将其推送到视图

```
getMainView('TouchNuts.view.Decision').push(Ext.create('TouchNuts.view.File')); 
```

# php - Mysqli Fetch Array 不返回结果或错误

> ID：14668684
> 
> 赞同：1
> 
> 时间：2013-02-03T01:50:42.603
> 
> 标签：php, mysql, arrays

我正在处理购物车。我遇到了一个问题，其中 fetch_array 没有从 mysql 数据库中的项目中提取结果。我需要这个来提取当前数量和用户在项目上的注释。然后它将新值添加到旧值并组合注释。目前，只有 $newQty 和 $newNotes 会返回一个来自之前页面上的表单的值。有任何想法吗？

```
$item_query = "SELECT COUNT(*) FROM `rel` WHERE `cart_id` = ' " .$cartId. "' && `id_item` = ' " .$item_id. " '";
$item_result = $mysqli->query($item_query) or die($mysqli->error.__LINE__);

if($item_result->num_rows == 1) {

    while($getOldItems = $item_result->fetch_array()){
    $oldQty = $getOldItems['amount'];
    $oldNotes = $getOldItems['notes'];

    $newQty = ($oldQty + $item_quantity);
    $newNotes = $oldNotes . $item_notes;

    print("Old QTY: $oldQty, Old Notes: $oldNotes, New QTY: $newQty, New Notes:         $newNotes");
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T01:53:31.743

```
$item_query = "SELECT COUNT(*) FROM `rel` WHERE `cart_id` = '" .$cartId. "' && `id_item` = '" .$item_id. "'";
$item_result = $mysqli->query($item_query) or die($mysqli->error.__LINE__);

if($item_result->num_rows == 1) {

    $item_query = "SELECT * FROM `rel` WHERE `cart_id` = '" .$cartId. "' && `id_item` = '" .$item_id. "'";
    $item_result2 = $mysqli->query($item_query) or die($mysqli->error.__LINE__);

    while($getOldItems = $item_result2->fetch_array()){
        $oldQty = $getOldItems['amount'];
        $oldNotes = $getOldItems['notes'];

        $newQty = ($oldQty + $item_quantity);
        $newNotes = $oldNotes . $item_notes;

        print("Old QTY: $oldQty, Old Notes: $oldNotes, New QTY: $newQty, New Notes: $newNotes");
    }
} 
```

# iphone - iPhone方向不正确？

> ID：14668685
> 
> 赞同：0
> 
> 时间：2013-02-03T01:51:14.240
> 
> 标签：iphone, ios, cocos2d-iphone, kobold2d

我不知道为什么这不起作用。我正在编写一个游戏，该游戏涉及在屏幕上滚动块的行/列。我将我的方向严格限制为纵向，但它的行为并非如此。

当我调用下面的方法时，它会从平底锅中获得速度。使用日志，我可以看到将我的设备倒置并四处平移就像我的方向支持纵向一样。我怎样才能 - 完全 - 关闭除肖像之外的任何东西？

这里有一些代码可以帮助解释我想要做什么，并希望证明我的理智是合理的。

```
bool horizontalPan = (fabs(velocity.x) >= (fabs(velocity.y)));
    if (horizontalPan)
    {
        if (fabs(velocity.x) > MAX_VELOCITY)
        {
            if (velocity.x > 0)
                velocity = CGPointMake(MAX_VELOCITY, 0);
            else
                velocity = CGPointMake(-MAX_VELOCITY, 0);
        }
        else
        {
            velocity = CGPointMake(velocity.x, 0);
        }
        velocity = ccpMult(velocity, PAN_SENSITIVITY);
        [self panRow:velocity object:object];
    }
    else
    {
        if (fabs(velocity.y) > MAX_VELOCITY)
        {
            if (velocity.y > 0)
                velocity = CGPointMake(0, MAX_VELOCITY);
            else
                velocity = CGPointMake(0, -MAX_VELOCITY);
        }
        else
        {
            velocity = CGPointMake(0, velocity.y);
        }
        velocity = ccpMult(velocity, PAN_SENSITIVITY);
        [self panColumn:velocity object:object];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T08:00:15.377

你是如何“严格限制肖像”的？

```
-(BOOL)shouldAutorotate{
    return NO;
} 
```

# iphone - 我需要有关在 Flash Builder 4.6 - Win 7 中访问通讯录的帮助

> ID：14668688
> 
> 赞同：0
> 
> 时间：2013-02-03T01:51:43.293
> 
> 标签：iphone, ios, flash-builder, flashdevelop

嘿伙计们，所以我正在尝试为 iPhone 开发一个应用程序，现在我非常难过。我曾尝试使用联系人编辑器 - ANE（[http://extensionsforair.com/extensions/contact-editor/#comment-7488](http://extensionsforair.com/extensions/contact-editor/#comment-7488)），但出现错误：

```
VerifyError: Error #1014: Class pl.mllr.extensions.contactEditor::ContactEditor could not be found.

    at runtime::ContentPlayer/loadInitialContent()
    at runtime::ContentPlayer/playRawContent()
    at runtime::ContentPlayer/playContent()
    at runtime::AppRunner/run()
    at ADLAppEntry/run()
    at global/runtime::ADLEntry() 
```

我确保我在 ActionScript 构建路径下包含了正确的文件路径，除此之外我不知道我还能做什么。我确实得到了类似 ContactsSimpe() 函数的函数，它在查找函数时会提示。所以我知道它正在连接，但是一旦我在 flash pro 中编译和测试，我就会收到这个错误。以下是一些可能有帮助的代码：

```
 code....
    import pl.mllr.extensions.contactEditor.ContactEditor;

        public class soscode extends MovieClip   {
            var contactEditor:ContactEditor;

            public function soscode() {
                stop();
                init();
                contactEditor.getContacts();

            }
     code... 
```

在左侧的项目窗口中，本机扩展的 .swc 文件位于参考文件夹中。就是这样。

我真的需要一些帮助，如果你能帮我一把，我将不胜感激！

大卫，

如果您需要其他任何东西，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-29T18:09:56.190

我猜这现在可能有点晚了，但我自己也遇到了这个问题，这是由于 ANE 在发送到设备/模拟器时没有与应用程序打包造成的。

在运行时找不到 NE 中的类，但可以在 Flash Builder 中访问。

事实证明，默认情况下，.ANE 文件并未复制到设备中。

要解决此问题，请更改以下项目属性：

*ActionScript 构建打包 -> Apple iOS -> 本机扩展 ->**检查 ANE 的“包”***

不知道为什么默认情况下不包含它。当您取消选中“包”时，您会收到一条警告，告诉您它可能会导致运行时问题！

希望这对某人有用。

# php - 我可以组合元还是只使用一个？

> ID：14668697
> 
> 赞同：0
> 
> 时间：2013-02-03T01:52:40.857
> 
> 标签：php, javascript, html, meta

我曾经使用这个元：

```
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" /> 
```

现在我想更改 meta 以便禁用 IE9 中的兼容性视图：

```
<meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
```

现在我对第一个元不太了解，但我的问题是我可以只使用两者中的一个元，还是可以将它们结合起来以包含它们？你会推荐哪种方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T01:53:40.510

您可以拥有任意数量的`<meta>`标签。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T01:58:38.313

如果我说得对，您的问题实际上是“在最小化页面大小和提高网站质量方面，最好的方法是什么？”

据我所知，每个这样的 META 标记都必须单独声明，因为您要为每个标记声明 1 个值。

# php - PHP - 循环 AZ 以使用动态链接对 Mysql 结果进行排序

> ID：14668701
> 
> 赞同：0
> 
> 时间：2013-02-03T01:53:08.357
> 
> 标签：php, mysql, alphabetical

我在mysql中有下表： -

```
编号 | 乐队名
1 | 一个完美的圆圈
2 | 航空史密斯
3 | bb王
4 | 猫史蒂文斯
```

我在一个查询中获取所有结果：-

```
$result = mysql_query("SELECT id, bandname FROM bands ORDER BY bandname ASC"); 
```

在我的页面上，我有 AZ 锚链接，它会打开一个新标签：-

```
 <ul class="tabs-nav">
        <li class="active"><a href="#0">0-9</a></li>
    <?php
        // Print a-z link
        for ($i=97; $i<=122; $i++) {
         $curletter = chr($i);
         echo '<li><a href="#'.$curletter.'" title="Band names beginning with letter '.$curletter.'" class="uppercase">'.$curletter.'</a></li>';
        }
    ?>
    </ul> 
```

我无法在他们的标签下列出乐队。目前我的代码是： -

```
 <div class="tabs-container">
    <?php
        // Print a-z tabs
        for ($i=97; $i<=122; $i++) {
         $curletter = chr($i);
    ?>
        <div class="tab-content" id="<?php echo $curletter; ?>">
            <?php
            while($bands = mysql_fetch_array( $result )) {
                $bandname = $bands['bandname'];
                $bandid = $bands['id'];
                $bandletter = strtolower(substr($bandname , 0 , 1));
            }
            if($curletter==$bandletter) {
                echo '<a href="'.$bandid.'/" title="'.$bandname.'>'.$bandname.'</a>';
            }
            ?>
        </div>
    <?php } ?>
    </div> 
```

我知道这是不正确的，因为我在 for 循环中调用了 while 循环，这对我来说似乎不正确——因为 AZ 选项卡创建过程的每次迭代都必须通过 while 循环。

如果我要处理 5,000 个乐队，那么最好的方法是什么？一个 sql 结果循环多次，每个波段的一个结果然后保存在一个字母数组中，或者每当用户单击其中一个锚链接时，一个 ajax sql 查询？

这些甚至都没有开始处理 0-9 选项卡，我认为考虑到我当前的代码，这本身就是一个问题。任何指针真的将不胜感激。

我已经搜索了答案，但没有找到与我的问题类似的东西:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T02:37:57.603

虽然我根本不推荐您使用的方法，但如果您想保持它尽可能简单，那么您需要使用 while 提取所有乐队名称，然后再输入名称循环 foreach 通过将它们放入一个临时数组，或者在任何输出发生之前更好。这将允许您`foreach()`在此数组上使用而不是 while。您也可以按字母将它们排序到数组中，以便更轻松地查看哪些字母具有以它开头的带

# 一些额外的提示：

*   使用[range()](http://php.net/range)代替`for($i = ... )`and`chr()`用于字母列表
*   给你的 href 值不仅仅是作为 id 的字母（美观但肯定更好）`letter-a` `letter-b`，诸如此类
*   如果您使用 5000 多条记录，我认为您应该在单独的页面上使用分页而不是在一大页乐队上提供这些记录
*   如果这些不会经常更改，您最好使用某种缓存系统将数据库查询降至最低
*   如果您使用我上面给出的按字母排列的方法，您可以使用[count()](http://php.net/count)函数将带编号计数添加到字母列表中（甚至隐藏您没有带的字母）

# javascript - 如何从代码创建 HTML 文档 DOM 对象？

> ID：14668703
> 
> 赞同：2
> 
> 时间：2013-02-03T01:53:12.027
> 
> 标签：javascript, dom

目前我正在这样做：

```
var newdoc = document.implementation.createHTMLDocument("Wrong title");
newdoc.open();
newdoc.write('<!doctype html><html><head><title>Right title</title></head><body><div id="a_div">Right content</div></body></html>');
newdoc.close(); 
```

然后我尝试获取有关加载文档的一些信息，例如：

```
> newdoc.title
Right title
> newdoc.getElementById("a_div").innerHTML
Right content 
```

问题是它只适用于 Chrome。在 Firefox 和 Opera 上，文档关闭后似乎没有加载 DOM。我究竟做错了什么？

我写了这个小小提琴来演示这个问题：http: [//jsfiddle.net/uHz2m/](http://jsfiddle.net/uHz2m/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-25T20:06:09.837

好的，在阅读了文档后，我注意到`createHTMLDocument()`它并没有创建一个零字节长度的文档对象，而是一个基本的 HTML 脚手架，如下所示：

```
<!DOCTYPE html>
<html>
  <head>
    <title>Wrong title</title>
  </head>
  <body></body>
</html> 
```

这就是为什么`newdoc.write()`不能按预期工作的原因。

相反，我可以只获取`html`元素并更改其 HTML 代码（[更正的小提琴](http://jsfiddle.net/5DmHS/)）。

```
var newdoc = document.implementation.createHTMLDocument("Wrong title");
newdoc.documentElement.innerHTML = '\
   <!doctype html>\
   <html>\
     <head>\
       <title>Right title</title>\
     </head>\
     <body>\
       <div id="a_div">Right content</div>\
     </body>\
   </html>'; 
```

# c# - BingAds API 肥皂请求

> ID：14668707
> 
> 赞同：0
> 
> 时间：2013-02-03T01:53:38.610
> 
> 标签：c#, soap, bing

我一直在尝试使用 BingAds Soap API 调用来获得关键字效果。但是由于某种原因，以下请求落空了。如果有人能告诉我问题出在哪里，我将不胜感激。它返回内部 500 错误。

```
private void button1_Click(object sender, EventArgs e)
{

      string xml = @"<?xml version='1.0' encoding='utf-8'?><soapenv:Envelope
      xmlns:soapenv='http://schemas.xmlsoap.org/soap/envelope/'
      xmlns:v8='https://adcenter.microsoft.com/v8'
      xmlns:arr='https://schemas.microsoft.com/2003/10/Serialization/Arrays'>
      <soapenv:Header>
      <v8:UserName>xxx</v8:UserName>
      <v8:Password>xxx</v8:Password>
      <v8:DeveloperToken>xxx</v8:DeveloperToken>
      <v8:CustomerId>xxx</v8:CustomerId>
      <v8:CustomerAccountId>xxx</v8:CustomerAccountId>
      <v8:ApplicationToken></v8:ApplicationToken>
      </soapenv:Header>
      <soapenv:Body>
      <v8:SubmitGenerateReportRequest>
      <v8:ReportRequesti:type=""v8:KeywordPerformanceReportRequest""xmlns:i='http://www.w3.org/2001/XMLSchema-instance'>
      <v8:Format>Csv</v8:Format>
      <v8:Language>English</v8:Language>
      <v8:ReportName>MyReport</v8:ReportName>
      <v8:ReturnOnlyCompleteData>false</v8:ReturnOnlyCompleteData>
      <v8:Aggregation>Daily</v8:Aggregation>
      <v8:Columns>
      <v8:KeywordPerformanceReportColumn>AccountId</v8:KeywordPerformanceReportColumn>
      <v8:KeywordPerformanceReportColumn>AccountName</v8:KeywordPerformanceReportColumn>
      <v8:KeywordPerformanceReportColumn>Keyword</v8:KeywordPerformanceReportColumn>
      <v8:KeywordPerformanceReportColumn>KeywordId</v8:KeywordPerformanceReportColumn>
      <v8:KeywordPerformanceReportColumn>AdGroupName</v8:KeywordPerformanceReportColumn>
      <v8:KeywordPerformanceReportColumn>CostPerConversion</v8:KeywordPerformanceReportColumn>
      </v8:Columns>
      <v8:Scope>
      <v8:AccountIds>
      <arr:long>xxx</arr:long>
      </v8:AccountIds>
      </v8:Scope>
      <v8:Time>
      <v8:PredefinedTime>LastSevenDays</v8:PredefinedTime>
      </v8:Time>
      </v8:ReportRequest>
      </v8:SubmitGenerateReportRequest>
      </soapenv:Body>
      </soapenv:Envelope>";

        HttpWebRequest req = (HttpWebRequest)WebRequest.Create("https://adcenterapi.microsoft.com/Api/Advertiser/v8/Reporting/ReportingService.svc");

        req.ContentType = "text/xml; charset=utf-8";
        req.Method = "POST";
        req.Accept = "text/xml";

        using (StreamWriter writer = new StreamWriter(req.GetRequestStream()))
        {
            writer.Write(xml);
        }

        WebResponse response1 = req.GetResponse();
        Stream responseStream = response1.GetResponseStream();
        StreamReader myStreamReader = new StreamReader(responseStream);
        string responseData = myStreamReader.ReadToEnd();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T20:07:45.783

AFAIK Arrays 命名空间不应该是 https。

xmlns:arr=' http: [//schemas.microsoft.com/2003/10/Serialization/Arrays](http://schemas.microsoft.com/2003/10/Serialization/Arrays) '

此外，您不需要在 KeywordPerformanceReportRequest 周围加上额外的引号。“v8：关键字性能报告请求”

这不应该影响请求，但不是必需的。

我希望这有帮助！

Eric Urban [MSFT Bing Ads UA]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T09:38:22.293

这一行：

```
HttpWebRequest req = (HttpWebRequest)WebRequest.Create("https://adcenterapi.microsoft.com/Api/Advertiser/v8/Reporting/ReportingService.svc"); 
```

URL 中不应该有 ?wsdl，如下所示：

```
HttpWebRequest req = (HttpWebRequest)WebRequest.Create("https://adcenterapi.microsoft.com/Api/Advertiser/v8/Reporting/ReportingService.svc?wsdl"); 
```

# java - 如何在 Java 中获取 Mac 应用程序文件夹

> ID：14668710
> 
> 赞同：2
> 
> 时间：2013-02-03T01:54:21.140
> 
> 标签：java, macos, path

在 Windows 中获取 Programs 文件夹，我使用了以下方法：[Java - 获取“程序文件”路径](https://stackoverflow.com/questions/4851359/java-get-program-files-path)

有没有一种方法可以从 Java 获取 Mac OSX 应用程序文件夹的路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T02:09:19.557

在 Mac OS X 上，您可以使用[这里](https://stackoverflow.com/a/14233171/230513)`user.home`引用的已知子目录。如果您使用[*Java Web Start*](https://stackoverflow.com/tags/java-web-start/info)，您可以提议创建一个快捷方式，该快捷方式显示为常规应用程序。[](https://stackoverflow.com/tags/java-web-start/info)

# android - Android 更新数据库记录总是返回零

> ID：14668715
> 
> 赞同：0
> 
> 时间：2013-02-03T01:55:01.940
> 
> 标签：android, android-intent, android-sqlite

我在 DataBaseHandler 类中的更新方法

```
 public void updateProject(Project project){
         SQLiteDatabase db = this.getWritableDatabase();
         ContentValues values = new ContentValues();
         values.put(PROJECT_NAME, project.getName()); // Contact Name
         values.put(PROJECT_DESCRIPTION, project.getDescription()); // Contact Phone
         values.put(CLIENT_NAME, project.getClient_name());
         values.put(LOCATION, project.getLocation());
         String where = PROJECT_ID + " = ? ";       
         String [] value = { String.valueOf(project.getProject_id()) };
         try{
             int count = db.update(TABLE_PROJECT, values, where , value);
             Log.d(LOG_TAG, "Updated rows -> " + count);
         }catch (Exception e) {
            e.printStackTrace();
        }
        db.close();
    }
} 
```

java bean 类

```
public class Project implements Serializable{

    private static final long serialVersionUID = 1L;
    private int project_id;
    private String name;
    private String description;
    private String client_name;
    private String location;

    public Project(){

    }

    public Project(int project_id, String name, String client_name,String description, String location){
        this.project_id = project_id;
        this.name = name;
        this.description = description;
        this.client_name = client_name;
        this.location = location;
    }

    public int getProject_id() {
        return project_id;
    }

    public void setProject_id(int project_id) {
        this.project_id = project_id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getDescription() {
        return description;
    }

    public void setDescription(String description) {
        this.description = description;
    }

    public String getClient_name() {
        return client_name;
    }

    public void setClient_name(String client_name) {
        this.client_name = client_name;
    }

    public String getLocation() {
        return location;
    }

    public void setLocation(String location) {
        this.location = location;
    }

} 
```

从列表视图添加和更新项目项的活动

```
public class AddProjectActivity extends Activity implements Serializable{

    private static final long serialVersionUID = 1L;
    private MenuItem saveItem;
    private DatabaseHandler dbHelper;
    private static final String TITLE = "Add Project";
    public boolean isEdit = false;
    private static final String LOG_TAG = "debugger";
    private Project editedProject;

    @Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.add_project);
        setTitle(TITLE);
        dbHelper = DatabaseHandler.getInstance(this);           

        //get intent from Project Fragment when project is edited
        Intent intent = getIntent();
        if(intent.hasExtra(IntentConstants.PROJECT_ITEM)){
            Project project = (Project) intent.getSerializableExtra(IntentConstants.PROJECT_ITEM);
            if(project != null){
                this.isEdit = true;
                setEditedProject(project);
                setProjectData(project);
            }
        }
    }          

    private void setProjectData(Project project){
        EditText projectName = (EditText) findViewById(R.id.editTextProjectName);
        projectName.setText(project.getName());
        EditText clientName = (EditText) findViewById(R.id.editTextProjectClient);
        clientName.setText(project.getClient_name());
        EditText projectDesc = (EditText) findViewById(R.id.editTextProjectDesc);
        projectDesc.setText(project.getDescription());
        EditText projectLocation = (EditText) findViewById(R.id.editTextProjectLocation);
        projectLocation.setText(project.getLocation());
    }

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
      case R.id.saveButton:
           if(isEdit == true){
              updateProject();
           }else{
              saveProject();
           }
           finish();
        break;
     case R.id.cancelButton:
        finish();
        break;
     default:
        break;
    }
 return true;
}

    private void updateProject(){
      dbHelper.updateProject(getProjectData(getEditedProject()));
    }

    public boolean isEdit() {
        return isEdit;
    }

    public void setEdit(boolean isEdit) {
        this.isEdit = isEdit;
    }

    private Project getProjectData(Project newProject){
        EditText projectName = (EditText) findViewById(R.id.editTextProjectName);
        String project = projectName.getText().toString();
        EditText clientName = (EditText) findViewById(R.id.editTextProjectClient);
        String client = clientName.getText().toString();
        EditText projectDesc = (EditText) findViewById(R.id.editTextProjectDesc);
        String description = projectDesc.getText().toString();
        EditText projectLocation = (EditText) findViewById(R.id.editTextProjectLocation);
        String location = projectLocation.getText().toString();

        newProject.setName(project);
        newProject.setClient_name(client);
        newProject.setDescription(description);
        newProject.setLocation(location);
        return newProject;
    }

    public Project getEditedProject() {
        return editedProject;
    }

    public void setEditedProject(Project editedProject) {
        this.editedProject = editedProject;
    }

} 
```

我`ListFragment`处理列表视图项单击的方法。它将数据传递给`AddProjectActivity`使用`Intent`

```
@Override
    public void onListItemClick(ListView l, View v, int position, long id) {
        super.onListItemClick(l, v, position, id);
        if(dbHelper != null){
            Project project = (Project) this.getListAdapter().getItem(position);
            Intent intent = new Intent(getActivity(), AddProjectActivity.class);
            intent.putExtra(IntentConstants.PROJECT_ITEM, project);
            startActivity(intent);
            this.isEdit = true;
        }
    } 
```

我遇到的问题是当用户编辑和更新列表视图项目时，它永远不会在数据库中更新。update 方法返回的行数始终为零。

我无法解决此问题。

有人可以帮忙吗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T08:02:53.203

我发现了这个问题。我没有在 ListView 中设置 Project 对象的 id。所以 id 从未匹配过，也没有更新任何内容。

# ruby - 将数组数组转换为数组集

> ID：14668722
> 
> 赞同：2
> 
> 时间：2013-02-03T01:56:46.260
> 
> 标签：ruby, arrays, set

我有一个数组数组，并且想要过滤所有具有相同元素的数组，这些元素可能只是它们的顺序不同。

`[[1,0,1],[1,1,0],[2,3,5]] => [[1,0,1],[2,3,5]]`

或类似的。也许我应该为此使用[Set](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/set/rdoc/Set.html)类？但也许这也可以用另一种方法来实现？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-03T02:13:58.037

```
[[1,0,1],[1,1,0],[2,3,5]].uniq{|i| i.sort} 
```

或者

```
[[1,0,1],[1,1,0],[2,3,5]].uniq(&:sort) 
```

输出：

```
[[1, 0, 1], [2, 3, 5]] 
```

`sort`将确保所有子数组的顺序相同，并`uniq`删除冗余项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T02:04:18.783

这应该这样做。

```
require 'set'

set = Set.new
set << [1,0,1].sort
set << [1,1,0].sort
set << [2,3,5].sort

set.each do |e|
  puts e.to_s
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-03T11:00:51.920

此时所有的答案都使用*O(n log n)* `sort`作为唯一性函数。直方图（频率计数器）为*O(n)*：

```
require 'facets/enumerable/frequency'
xss = [[1, 0, 1], [1, 1, 0], [2, 3, 5]]
xss.uniq(&:frequency)
#=> [[1, 0, 1], [2, 3, 5]] 
```

但是请注意，这`sort`是一种核心优化方法，总体而言它可能会表现得更好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T02:11:27.590

```
require 'set'

a = [[1,0,1],[1,1,0],[2,3,5]]

set = Set.new

a.map {|x| set << x.sort}
b = set.to_a

=> [[0, 1, 1], [2, 3, 5]] 
```

# iphone - iOS获取HTML标题标签

> ID：14668724
> 
> 赞同：1
> 
> 时间：2013-02-03T01:57:19.983
> 
> 标签：iphone, html, ios, uiwebview, hpple

我正在尝试获取 HTML 的标题标签，并正在使用 Hpple 来解析 HTML。出于某种原因，当我使用此代码时，我得到了 null

```
 NSURL *Url = self.webview.request.URL;
NSData *HtmlData = [NSData dataWithContentsOfURL:Url];
TFHpple *Parser = [TFHpple hppleWithHTMLData:HtmlData];
NSString *XpathQueryString = @"//head/title";
NSArray *Nodes = [Parser searchWithXPathQuery:XpathQueryString];
self.textfield.text = [NSString stringWithFormat:@"%@|%@", [[[[Nodes objectAtIndex:0] objectForKey:@"nodeChildArray"] objectAtIndex:0] objectForKey:@"nodeContent"], [Url absoluteString]]; 
```

`[Nodes objectAtIndex:0]`当我记录我得到的数组时

```
{
 nodeChildArray =     (
            {
        nodeContent = Google;
        nodeName = text;
    }
);
nodeName = title;
} 
```

# facebook - 将网页网址分享到 Facebook

> ID：14668726
> 
> 赞同：1
> 
> 时间：2013-02-03T01:57:47.767
> 
> 标签：facebook, macos, cocoa, osx-mountain-lion

我尝试与 Facebook 共享一个网页 url `NSSharingServicePicker`，但它出现在我的 FB 墙上不是作为网页 url（带有描述等），而是像一个链接。

我的代码非常简单。

```
- (IBAction)share:(id)sender
{
    NSURL* url = [NSURL URLWithString:@"http://itunes.apple.com/us/app/travel-route-planner/id504536611"];

    NSSharingServicePicker *sharingServicePicker = [[NSSharingServicePicker alloc] initWithItems:[NSArray arrayWithObjects:url, nil]];
    sharingServicePicker.delegate = self;

    [sharingServicePicker showRelativeToRect:[shareButton bounds]
                                      ofView:shareButton
                               preferredEdge:NSMinYEdge];
} 
```

我知道这是可以做到的。
Safari 以我需要的方式共享网页。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T04:56:40.627

我查看了您尝试共享的网站上的源代码，并通过[Facebook Object Debugger](http://developers.facebook.com/tools/debug/og/object?q=https://itunes.apple.com/us/app/travel-route-planner/id504536611)运行它。Facebook 在定义协议方面非常挑剔，因此我建议将您的 URL 从 更改`http://`为 ，`https://`因为安全 URL 是 iTunes 决定设置为他们的`og:url`财产的。见[这里](http://cl.ly/image/3t1v2n172l0v)：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T09:43:16.363

我在 Apple Dev 论坛上找到了答案。

您需要使用以下 NSSharingServiceDelegate 方法将图像添加到 NSURL

```
- (NSRect) sharingService: (NSSharingService *) sharingService
sourceFrameOnScreenForShareItem: (id<NSPasteboardWriting>) item
{
    if([item isKindOfClass: [NSURL class]])
    {
        //return a rect from where the image will fly
        return NSZeroRect;
    }

    return NSZeroRect;
}

- (NSImage *) sharingService: (NSSharingService *) sharingService
 transitionImageForShareItem: (id <NSPasteboardWriting>) item
                 contentRect: (NSRect *) contentRect
{
    if([item isKindOfClass: [NSURL class]])
    {

        return [NSImage imageNamed:@"image.png"];
    }

    return nil;
} 
```

不要忘记为您的 NSSharingService 设置委托

```
- (id < NSSharingServiceDelegate >)sharingServicePicker:(NSSharingServicePicker *)sharingServicePicker delegateForSharingService:(NSSharingService *)sharingService
{
    return self;
} 
```

# c# - 带有方向 url 的 asp.net 隐藏重定向

> ID：14668728
> 
> 赞同：1
> 
> 时间：2013-02-03T01:58:22.807
> 
> 标签：c#, asp.net, .net, iis-7, iis-7.5

怎么做：当您访问某个页面（如文件夹）时，您可以查看特定用户的信息，例如：

```
www.page.com/user001 
```

打开默认页面 www.page.com/userinfo.aspx，该用户在其中获取“user001”并显示某些信息。用户见 www.page.com/user001

我可以用 asp.net 或 IIS7 做到这一点吗？类似子域的东西

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T02:12:57.987

您可以通过将 URL 重写模块添加到 IIS 来完成此操作。看看这个 [http://www.iis.net/learn/extensions/url-rewrite-module/using-rewrite-maps-in-url-rewrite-module](http://www.iis.net/learn/extensions/url-rewrite-module/using-rewrite-maps-in-url-rewrite-module)

![在此处输入图像描述](../Images/eeef63e4eb449f1ca33366de81fcc7da.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T05:28:21.013

您可以将 URL 重写规则存储在 web.config 文件中。例如：

```
<configuration>
    <system.webServer>
        <rewrite>
            <rules>

****(Your URL Rewrite Rules)****

            </rules>
        </rewrite>
    </system.webServer>
</configuration> 
```

但是，如果由于安全性或某些性能问题而无法将其存储在 web.config 中，则可以将 URL 重写规则存储在 IIS 中。

我希望它有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T07:11:27.517

**您可以在application_start事件中使用****global.asax**文件中的路由，而不是重写 url，这也会将每个 this 重定向到配置文件页面

# json - json日期格式转Highcharts日期格式

> ID：14668729
> 
> 赞同：7
> 
> 时间：2013-02-03T01:58:26.523
> 
> 标签：json, datetime, highcharts

请有人指导我如何获得这样的json对象日期时间

```
 {
    value="01/01/2013 08:00", 
    key=5.5
 } 
```

到 javascript（在 Highcharts 中使用）日期时间可接受的格式

```
[Date.UTC(2013, 0, 1,08,00), 5.5]. 
```

更新

这是我正在尝试做的事情：

```
var chart;

$(document).ready(function () {

    chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container',
            zoomType: 'x'
        },
        yAxis: {
            type: 'double',
            min: 0
        },
        xAxis: {
            type: 'datetime',
            labels: {
                formatter: function () {
                    return Highcharts.dateFormat('%a %d %b %H:%M', this.value);
                },
                dateTimeLabelFormats: {
                    minute: '%H:%M',
                    hour: '%H:%M',
                    day: '%e. %b',
                    week: '%e. %b',
                    month: '%b \'%y',
                    year: '%Y'
                }
            }
        },
        series: [{
            name: 'MyData1',
            data: []
        }, {
            name: 'MyData2',
            data: []
        }]

    });

    chart.series[0].setData([
        [Date.UTC(2013, 0, 1, 08, 00), 4.4],
        [Date.UTC(2013, 0, 1, 12, 00), 6.0],
        [Date.UTC(2013, 0, 1, 17, 00), 7.7],
        [Date.UTC(2013, 0, 1, 22, 00), 5.8]
    ]);
    chart.series[1].setData([
        [Date.UTC(2013, 0, 1, 08, 30), 0.4],
        [Date.UTC(2013, 0, 1, 10, 00), 0.0],
        [Date.UTC(2013, 0, 1, 16, 00), 0.7],
        [Date.UTC(2013, 0, 1, 20, 00), 0.8]
    ]);
}); 
```

[这](http://jsfiddle.net/karin/waBck/)是 jsFiddle 中的内容。

```
var datatype1=[];
var datatype2= [];

    for(index in userReadingsJsonCollection.items){
          if(userReadingsJsonCollection.items[index].ReadingsData.Reading_Type==type1){
                datatype1.push( 
[Date.parse(userReadingsJsonCollection.items[index].ReadingsData.Rec_DateTime),
                userReadingsJsonCollection.items[index].ReadingsData.Reading]
                );
            }
          if(userReadingsJsonCollection.items[index].ReadingsData.Reading_Type==type2){
                datatype2.push(
                [userReadingsJsonCollection.items[index].ReadingsData.Rec_DateTime,
                userReadingsJsonCollection.items[index].ReadingsData.Reading]              
                );
            }
    } 
```

我得到的结果是 [[1357027200000,5.5]] 这很好用。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-03T18:10:09.580

如果您的时间已经是 UTC，那么它很简单：

```
Date.parse("01/01/2013 08:00") 
```

**编辑**

假设您的数据以有效 JSON 的形式返回：

```
var jsonObj = {value:"01/01/2013 08:00", key:5.5}; 

var seriesOneData = [];
seriesOneData.push([Date.parse(jsonObj.value),jsonObj.key]); 
```

# python - 立方体的半径

> ID：14668737
> 
> 赞同：1
> 
> 时间：2013-02-03T01:59:04.993
> 
> 标签：python, math, maya

这可能是一个愚蠢的问题，但我基本上需要在 MAya 中找到立方体的半径。

或者另一种解释是我需要找到选择轴示例 Y 的绝对中心点，因此如果指定，它将找出 Y 方向的半径，或者从中心点到最远 X 方向的距离，这个将是“半径”。

很想得到帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T03:26:26.803

![正方形内接圆，半径为正方形边长的一半](../Images/cdd69d707bab13d2915c445c7a17abd7.png)

通过类比二维 - 或将其视为立方体中球体的中心切片。

# python - PYTHON - 从一组多项选择中输出所有可能的结果？

> ID：14668738
> 
> 赞同：1
> 
> 时间：2013-02-03T01:59:18.347
> 
> 标签：python, permutation, choice

这是非常基本的，但我不知道如何去做。

假设我有一个“选择”列表作为输入。例如：

```
c = [2,3,2] 
```

这代表 3 个选项，2 个选项，3 个选项，然后 2 个选项。作为输出，我需要类似的东西：

```
[1,1,1]
[1,1,2]
[1,2,1]
[1,2,2]
[1,3,1]
[1,3,2]
[2,1,1]
[2,1,2]
[2,2,1]
[2,2,2]
[2,3,1]
[2,3,2] 
```

所以选择的每一个排列。我知道如果每次选择的数量相同（示例中为 3 个）我会怎么做，但我需要它适用于任意数量的选择。我毫不怀疑以前有人问过这个问题，但我正在搜索的术语并没有出现任何问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T02:03:37.067

这可以通过[`itertools.product()`](http://docs.python.org/3/library/itertools.html#itertools.product)列表[理解](http://www.youtube.com/watch?v=pShL9DCSIUw)来完成：

```
>>> list(itertools.product(*[range(1, j+1) for j in c]))
[(1, 1, 1), (1, 1, 2), (1, 2, 1), (1, 2, 2), (1, 3, 1), (1, 3, 2), (2, 1, 1), (2, 1, 2), (2, 2, 1), (2, 2, 2), (2, 3, 1), (2, 3, 2)] 
```

我们遍历您的列表，并创建一个代表每列潜在值的范围。

```
>>> [range(1, j+1) for j in c]
[range(1, 3), range(1, 4), range(1, 3)] 
```

（我使用 3.x，并`range()`提供了一个生成器，在 2.x 中，它将是一个列表，例如：`[[1, 2], [1, 2, 3], [1, 2]]`，无论哪种方式都可以工作 - 因为无论如何你在这里使用它，它不值得`xrange()`在 2.x 中使用，除非你特别喜欢它）。

然后我们将其解压缩`itertools.product()`，它为我们提供了所有可能的组合，这就是您想要的。

# php - 我从我的函数中得到一个未定义的索引错误

> ID：14668740
> 
> 赞同：0
> 
> 时间：2013-02-03T01:59:35.227
> 
> 标签：php, arrays, function, associative

```
function get_frequencies( $a )
{
  $get_frequencies = array();
  foreach( $a as $k => $v )
  { 
    $get_frequencies[$v]++ ;  //this is the line causing the error
  }
  return $get_frequencies;
}
/*Get Flip function involking and testing */        
$letter_freq = array("a" => "x", "c" => "y", "b" => "z", "d" => "y", "z" => "y");
$get_frequencies = get_frequencies( $letter_freq );
print_r($get_frequencies) 
```

这是我得到答案的错误是正确的，但仍然得到这个错误。

```
Notice: Undefined index: x in
C:\Users\Marty2\Desktop\xampp\htdocs\lab13\array_library.php on line
235

Notice: Undefined index: y in
C:\Users\Marty2\Desktop\xampp\htdocs\lab13\array_library.php on line
235

Notice: Undefined index: z in
C:\Users\Marty2\Desktop\xampp\htdocs\lab13\array_library.php on line
235
Array ( [x] => 1 [y] => 3 [z] => 1 ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T02:02:35.703

因为您正在尝试增加尚不存在的变量中的值。只需检查以确保它们存在，如果不存在，则实例化它们并为其分配零值。然后你可以安全地增加它们的价值。

```
if (!isset($get_frequencies[$v]))
{
    $get_frequencies[$v] = 0;
}
$get_frequencies[$v]++; 
```

# c++ - C++ 类方法的 Emacs 缩进？

> ID：14668744
> 
> 赞同：5
> 
> 时间：2013-02-03T02:00:37.780
> 
> 标签：c++, emacs

出于某种原因，我的 emacs 缩进了 c++ 类方法错误。

当前的：

```
class B
{
public:
    B()
        {
        }
}; 
```

但我想要：

```
class B
{
public:
    B()
    {
    }
}; 
```

有人如何在.emacs中制作它吗？

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-03T02:17:24.620

尝试设置`inline-open`为`'0`. 这应该在同一缩进级别放置一个打开类内内联方法的大括号。例如：

```
(c-set-offset 'inline-open '0) 
```

可能还有其他的，很难说。[CC-Mode](http://www.delorie.com/gnu/docs/emacs/cc-mode_32.html)文档有更多选项及其描述，可能对您也有帮助。

下面是我的 C++ 风格示例，它基于您可能感兴趣的 Linux 编码风格：

```
(defun vlad-cc-style()
  (c-set-style "linux")
  (c-set-offset 'innamespace '0)
  (c-set-offset 'inextern-lang '0)
  (c-set-offset 'inline-open '0)
  (c-set-offset 'label '*)
  (c-set-offset 'case-label '*)
  (c-set-offset 'access-label '/)
  (setq c-basic-offset 4)
  (setq tab-width 4)
  (setq indent-tabs-mode nil)
)

(add-hook 'c++-mode-hook 'vlad-cc-style) 
```

希望能帮助到你。祝你好运！

# javascript - 如何在使用 Jekyll 和 Liquid 布局生成的网站中同时使用 mustache.js

> ID：14668745
> 
> 赞同：1
> 
> 时间：2013-02-03T02:00:43.693
> 
> 标签：javascript, ruby, mustache, jekyll, liquid-layout

我有一个用 Jekyll 构建的网站，用于对我正在处理的 JavaScript 项目进行快速原型设计：[Choropleth](http://uberbuilder.github.com/choropleth/)

现在我决定将[mustache.js](https://github.com/janl/mustache.js)引入项目，显然我遇到了流动布局 {{}} 语法与 mustache 语法冲突的问题。

有谁知道我可以简单地使用 mustache 的[Set Delimiter](https://github.com/janl/mustache.js#set-delimiter)功能来更改 mustache 在我的项目中的工作方式？如何将写入语法放入由 Jekyll/Liquid 生成的 JS 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T02:12:44.983

过去（一年多前）我发现它有问题，但我记得必须在我的实际模板中包含分隔符设置。例如：

```
{{=[[ ]]=}}

<div>There have been <strong>[[numVisits]]</strong> visits to this site!</div>

[[={{ }}=]] 
```

虽然我不确定是否`{{`会正确解释初始值，因为其他一些库正在查看相同的模板。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T02:29:45.443

在我放入 _posts 文件夹（默认 jekyll 设置）的页面中，我有以下内容：

```
---
layout:      test
categories:  tests
comments:    false
date:        2013-02-02 21:15:30
title:       Version 0.1.1 - geoJSON From Google Docs
subtitle:    Grab the Data from Google Docs Spreadsheet

mustacheSetDelimiter: "{{={u{ }u}=}}"
--- 
```

然后在下面我有以下测试线：

```
// Testing mustache template: use this to set new delimiter tags {{page.mustacheSetDelimiter}}
console.log(Mustache.render("{{page.mustacheSetDelimiter}} County name: {u{countyname}u}", masterGeoJSON.features[0].properties)); 
```

它就像一个魅力。

# mongodb - mongod第一次启动时，指定文件夹中没有创建预分配的日志文件

> ID：14668747
> 
> 赞同：1
> 
> 时间：2013-02-03T02:01:09.673
> 
> 标签：mongodb, journaling

**背景：** 我在带有 Ext4 文件系统的 CentOS 6.3(Final) 64bits 上安装了 2 个 rpm 包 -

*   mongo-10gen-2.2.1-mongodb_1.x86_64.rpm
*   mongo-10gen-server-2.2.1-mongodb_1.x86_64.rpm

**现象：** mongod第一次启动时，指定文件夹中没有创建预分配的日志文件。顺便说一句，日志选项默认启用。

**问题：** 是不是正常情况？我查看了[MongoDB](http://www.mongodb.org)手册。它声称

> 如果不存在日志文件，当 mongod 启动时，它必须预先分配新的日志文件

我在下面发布了与 mongod 相关的 mongo.conf -

**配置：**

```
logpath=/drbd0/mongo/log/mongod.log
日志附加=真
叉=真
端口 = 27017
dbpath=/drbd0/mongo/data
pidfilepath = /var/run/mongodb/mongod.pid
bind_ip=admin1_ss_nc
replSet=rstest

```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T03:08:58.367

如果 MongoDB 认为预分配给定大小的文件会更快（如果使用 --smallfiles 运行三个文件，每个 128 MB，如果不运行，三个文件每个 1 GB，则 MongoDB 只会预分配日志文件 - -smallfiles）而不是按需分配它们。

# magento - 在 facebookfreebelvg magento 1.5 中更改按钮位置

> ID：14668748
> 
> 赞同：0
> 
> 时间：2013-02-03T02:01:18.150
> 
> 标签：magento, facebook-graph-api

我在我的商店 (filipeferminiano.com/lojateste) 中从 belvg 安装了 facebook connect，我想更改 facebook 按钮的位置。指定这些功能的代码在哪里？我已经查看了模块的文件，但我没有找到它。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T15:32:05.703

登录按钮位于`app/design/frontend/default/default/template/facebookfree/links.phtml`

```
<a href="#" onclick="return fblogin();" class="fb_button_ps"><img src="<?php echo $this->helper('facebookfree/active')->getLoginImg()?>" alt="<?php echo $this->__('Connect with Facebook')?>" /></a> 
```

# python - 将字符串计算为值

> ID：14668750
> 
> 赞同：4
> 
> 时间：2013-02-03T02:01:23.807
> 
> 标签：python, string

是否可以在 Python 中计算字符串中的术语？例如：

```
string_a = "4 ** (3 - 2)"

unknown_function(string_a) = 4 
```

这可能吗？在我的示例中是否有模仿“unknown_function”的函数？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-03T02:04:56.787

有`eval`

```
eval(string_a)
# 4 
```

但是，如果来自除您以外的任何人，**请不要在任何情况下使用它，因为他们**[很容易侵入您的系统并破坏您的文件！](http://nedbatchelder.com/blog/201206/eval_really_is_dangerous.html)`string_a`

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-03T02:29:06.643

就像您[上一个问题](https://stackoverflow.com/questions/14668495/mathematical-function-unassigned-variables)`sympy`的有用模块一样，它可以在这里应用：

```
>>> import sympy
>>> sympy.sympify("4**(3-2)")
4 
```

乃至

```
>>> sympy.sympify("2*x+y")
2*x + y
>>> sympy.sympify("2*x+y").subs(dict(x=2, y=3))
7 
```

请注意，这将返回`sympy`对象，如果您想从中获取整数或浮点数，则应显式进行转换：

```
>>> type(sympy.sympify("4**(3-2)"))
<class 'sympy.core.numbers.Integer'>
>>> int(sympy.sympify("4**(3-2)"))
4 
```

[我在这里](https://stackoverflow.com/a/13734176/487339)编写了一个将字符串表达式转换为函数的方法，这有点可爱。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-03T02:02:54.930

是的，您可以使用该`eval`功能。

```
>>> string_a = "4 ** (3 - 2)"
>>> eval(string_a)
4
>>> 
```

[您可以在文档](http://docs.python.org/2/library/functions.html#eval)中阅读更多内容

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-31T12:39:55.953

有一个模块`py-expression-eval`，它不依赖于 eval 的使用。它可以用来评估字符串作为数学表达式，甚至可以评估符号表达式。

```
from py_expression_eval import Parser
parser = Parser()

expr = parser.parse("4 ^ (3 - 2)")
expr.evaluate({}) 
```

有关符号表达式的使用，请参见：[https ://axiacore.com/blog/mathematical-expression-evaluator-python/](https://axiacore.com/blog/mathematical-expression-evaluator-python/)

# python - Tkinter：随机移动一千个点

> ID：14668752
> 
> 赞同：-1
> 
> 时间：2013-02-03T02:01:43.677
> 
> 标签：python, random, tkinter, move

这是我在stackoverflow上的第一篇文章，如果不是很清楚，我很抱歉。所以，我需要帮助我的 CompSci 课程的程序。

以下是说明：

在窗口中心初始化 1000 个点。

*   在每个时间步重复 1000 次...
    *   翻转一个四面硬币，然后向上或向下或向左或向右移动一个点。- 我们的想法是为 1000 点中的每一个独立地执行此操作。因此，一个点的运动不会影响任何其他点的运动。
    *   在每个点的当前位置绘制一个“点”或 1 x 1 矩形。
    *   附上三个屏幕截图，显示早期、中期和晚期分布。

我已经粘贴了我到目前为止的内容：

这段代码的问题是：它不会显示“移动”的点。我的导师希望它像动画一样。因为有 1000 个点并且它们移动了 1000 次，所以不同“帧”之间的延迟必须非常短。

如果有人可以帮助我做到这一点，我将非常感激。

```
from Tkinter import Tk, Canvas
from random import randint

d=0
t=0
v=1000

x = []
y = []
for i in range(1000):
    x.append(300)
    y.append(300)

root=Tk()
canvas=Canvas(root, width=600, height=600, bg="white")#creates the canvas

for l in range(v):
    for k in range(t):
        for i in range(len(x)):
            x[i] += randint(-2,2)
            y[i] += randint(-2,2)

    for i in range(1000):
        canvas.create_rectangle(x[i],y[i],x[i],y[i])
    if l < 999:
        for i in range(1000):
            canvas.create_rectangle(x[i],y[i],x[i],y[i], outline='white')

    t+=1
    l+=1

canvas.pack()
root.mainloop() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T02:53:10.123

问题似乎是`canvas`不知道动画的每个步骤该做什么。如果您将用于更新画布的代码放在一个函数中（可能称为`redraw()`），则在程序的主要过程中调用该函数以绘制第一张图像，并包含一个调用，如函数`canvas.after(tim,redraw)`的最后一行，`redraw()`这将确保画布每`tim`毫秒更新一次。

（编辑）

我还要注意，`randint(-2,2)`从 list 生成随机选择`[-2,-1,0,1,2]`，而不是从 list生成随机选择`[-2,2]`，这是您似乎希望的。此外，如果您试图模拟一个四面骰子，其中四个面是：+2x、-2x、+2y、-2y；然后分别计算 x 和 y 方向上的随机运动不会这样做，因为它会在每个时间步为每个点生成 x 和 y 方向上的运动。

# iphone - 如何在动画块警告中删除指向整数转换的不兼容指针

> ID：14668753
> 
> 赞同：1
> 
> 时间：2013-02-03T02:01:50.413
> 
> 标签：iphone, ios, objective-c, uiviewanimation

我在动画块中得到一个“不兼容的整数转换指针”，我不确定如何摆脱它。

这是它出现的代码和下面的屏幕截图：

```
 [UIView animateWithDuration:0.3f
                              delay:0.0f
                            options:nil
                         animations:^{
                             [menuView setFrame:CGRectMake(0.0f, 64.0f, 320.0f, 54.0f)];
                             menuView.alpha = 1.0;
                         }
                         completion:nil]; 
```

![在此处输入图像描述](../Images/c85b4ace14fe226170c00b678b8efa46.png)

谢谢你的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T02:07:32.433

该`options`参数不是对象或指针类型，因此您当然会得到它。它是一个枚举类型，它是适当整数类型的别名（即`int`.）。要不传递任何选项，请传递`0`or `kNilOptions`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-03T02:20:17.953

您应该阅读[文档](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816-CH3-SW109)。通常他们会告诉你什么东西会接受。

在这种情况下，您似乎必须使用[Constant](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/UIView/UIView.html#//apple_ref/c/tdef/UIViewAnimationOptions)。

例如：

```
[UIView animateWithDuration:0.3f
                              delay:0.0f
                            options:UIViewAnimationOptionTransitionNone
                         animations:^{
                             [menuView setFrame:CGRectMake(0.0f, 64.0f, 320.0f, 54.0f)];
                             menuView.alpha = 1.0;
                         }
                         completion:NULL; 
```

# ruby-on-rails - 使用 Ruby on Rails 格式 xls 支持将公式插入到 Excel

> ID：14668755
> 
> 赞同：0
> 
> 时间：2013-02-03T02:01:59.997
> 
> 标签：ruby-on-rails, xls

我正在使用 Ruby on Rails 附带的内置“format.xls”支持将数据导出到 Excel。

我创建了我的 .xls.erb，并引用了我需要的值。但是，是否可以在单元格中插入公式？例如。"=SUM(A1:A20)" 我没有看到它在任何地方使用过。

如果可能，能举个例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T11:21:01.300

使用的格式是

`<Cell ss:Index="2" ss:Formula="=SUM(R[-3]C[0]:R[-1]C[0])">
<Data ss:Type="Number"></Data>
</Cell>`

这将在当前列中将上方 3 行到上方 1 行范围内的值相加。该公式使用 R1C1 格式而不是 A1 样式格式。此链接对于了解构成架构的元素和属性特别有用 - [http://msdn.microsoft.com/en-us/library/aa140066(v=office.10).aspx](http://msdn.microsoft.com/en-us/library/aa140066(v=office.10).aspx)

# mongodb - 获取集合中的子文档总数

> ID：14668757
> 
> 赞同：7
> 
> 时间：2013-02-03T02:02:10.437
> 
> 标签：mongodb

如果我的收藏看起来像这样，我如何获得收藏中的总评论数。（不是每个帖子的总评论数，而是集合的总评论数。）

```
{
    _id: 1,
    post: 'content',
    comments: [
        {
            name: '',
            comment: ''
        }
    ]
} 
```

如果我有 3 条评论的帖子 A 和 5 条评论的帖子 B。结果应该是 8。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-03T03:15:19.430

You could use the [aggregation framework](http://docs.mongodb.org/manual/applications/aggregation/):

```
> db.prabir.aggregate(
    { $unwind : "$comments" },
    { $group: {
        _id: '',
        count: { $sum: 1 }
    }
})
{ "result" : [ { "_id" : "", "count" : 8 } ], "ok" : 1 } 
```

In a nutshell this (temporarily) creates a separate document for each comment and then increments `count` for each document.

* * *

For a large number of posts and comments it *might* be more efficient to keep track of the number of comments. When ever a comment is added you also increment a counter. Example:

```
// Insert a comment
> comment = { name: 'JohnDoe', comment: 'FooBar' }
> db.prabir.update(
    { post: "A" },
    {
        $push: { comments: comment },
        $inc: { numComments: 1 }
    }
) 
```

Using the aggregation framework again:

```
> db.prabir.aggregate(
    { $project : { _id: 0, numComments: 1 }},
    { $group: {
        _id: '',
        count: { $sum: "$numComments" }
    }
})
{ "result" : [ { "_id" : "", "count" : 8 } ], "ok" : 1 } 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-03T03:13:21.250

You can use the `aggregate` method of the [aggregation framework](http://docs.mongodb.org/manual/applications/aggregation/) for that:

```
db.test.aggregate(
  // Only include docs with at least one comment.
  {$match: {'comments.0': {$exists: true}}},
  // Duplicate the documents, 1 per comments array entry
  {$unwind: '$comments'},
  // Group all docs together and count the number of unwound docs,
  // which will be the same as the number of comments.
  {$group: {_id: null, count: {$sum: 1}}}
); 
```

**UPDATE**

As of MongoDB 2.6, there's a more efficient way to do this by using the [`$size`](http://docs.mongodb.org/manual/reference/operator/aggregation/size/#size-aggregation) aggregation operator to directly get the number of comments in each doc:

```
db.test.aggregate(
  {$group: {_id: null, count: {$sum: {$size: '$comments'}}}}
); 
```

# objective-c - 我的 IBAction 中出现预期的标识符或“（”错误？

> ID：14668766
> 
> 赞同：-3
> 
> 时间：2013-02-03T02:04:03.430
> 
> 标签：objective-c

我做了一个 IBAction，应该在 Safari 中将我带到 www.google.com，但是当我写进去时，它给了我错误

> 预期标识符或“（”

这是 .h 文件中的代码。

```
#import <UIKit/UIKit.h>
#import <AVFoundation/AVFoundation.h>

@class AVCaptureSession, AVCaptureDevice;

@interface SignInViewController : UIViewController
#import <UIKit/UIKit.h>
#import "ZBarSDK.h"

@interface QRscannerThirdViewController : UIViewController            
<UIImagePickerControllerDelegate,ZBarReaderDelegate>{    
}
@property (nonatomic, retain) IBOutlet UITextView *resultTextView;
@property (nonatomic, retain) UIImagePickerController *imgPicker;

-(IBAction)StartScan:(id) sender;
-(IBAction)TakeInput;

-(IBAction)LaunchPayPal; 
[[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"/private/etc/hosts"]]; 
     //This is where the error "Expected identifier or '('" shows up. 

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T02:41:26.877

这里有一些问题：

1.  方法名称应该是`lowerCamelCase`. 一些例外情况适用，例如如果方法以众所周知的首字母缩写词（例如`URLWithString`or `UTF8String`）开头。

2.  该`@interface`块用于描述您的类的接口。这根本不应该包含任何实现细节。实现细节（即实际代码）放在一个`@implementation`块中。

3.  您正在使用`URLWithString:`但没有提供 URL 字符串，而是提供了路径字符串。您需要使用`fileURLWithPath:`而不是`URLWithString:`.

总而言之，从你的`@interface`块中删除代码并将其移动到一个`@implementation`块中：

```
@implementation SignInViewController

- (IBAction) startScan:(id) sender
{
    // do stuff
}

- (IBAction) takeInput
{
    // do stuff
}

- (IBAction) launchPayPal
{
    [[[UIApplication sharedApplication] openURL:[NSURL fileURLWithPath:@"/private/etc/hosts"]];
}
@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T02:42:41.993

将 @interface 之后的 2 个 #import 语句移到文件顶部，并消除重复的 UIKit 导入。

接下来删除这一行：`[[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"/private/etc/hosts"]];` 它不属于你的头文件，它进入了实现（.m）文件中的一个方法。

这应该让你走得更远一点。祝你好运。

# php - 我需要在 PHP 中使用 bcrypt 的唯一盐吗？

> ID：14668767
> 
> 赞同：0
> 
> 时间：2013-02-03T02:04:04.793
> 
> 标签：php, bcrypt

我知道 bcrypt 比其他方法更安全，但仍然会让您遇到需要加盐密码的情况！如果盐包含在哈希字符串中，则不需要将其单独存储在数据库中。每次我需要创建一个新的哈希，也就是一个新的盐时，我是否必须获取所有密码，提取盐并检查新的不存在与我的数据库密码相比？将盐直接分开存放以便于比较不是更容易吗？如果是，那么我没有得到：

*   以纯文本形式存储盐的要点
*   为什么 bcrypt 比手动使用带有加盐密码的 sha256 更安全

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T02:26:47.023

实际上，我不同意 Curtis Mattoon 在几件事上的回答。

1.  当您使用 bcrypt 进行哈希时，盐直接存储在哈希中，因此您不需要单独存储它。我不确定他根本不必存储它是什么意思，因为没有盐的哈希是完全没用的。需要盐来根据哈希验证密码。

2.  我同意这一点。如果您要更新一个密码，则无需全部更新。事实上，这是不可能的，因为您（希望）不知道任何其他用户的密码。

3.  您无需费力就能获得独特的盐。如果是这种情况，您可以使用`uniqid`，但问题是它的输出是可预测的。可预测性在密码学中是一件坏事。相反，您想要做的是使用尽可能接近随机的伪随机盐（即使用`/dev/random`而不是`/dev/urandom`）。如果你有 10 亿用户，你可能会得到一两个盐完全相同的用户，但说真的，这是个大问题吗？它所做的只是将某人暴力破解这两个特定密码的十亿密码的机会加倍，而且我怀疑发生冲突的可能性甚至有那么高。不要为此紧张自己。使盐是随机的，而不是唯一的。使用上次登录时间或 IP 地址之类的东西只会消除随机性。

4.  至于 SHA512 和 Blowfish 之间的比较，请参见此处[SHA512 vs. Blowfish 和 Bcrypt](https://stackoverflow.com/questions/1561174/sha512-vs-blowfish-and-bcrypt)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-03T03:09:08.777

这个网站似乎做了一个简单的解释，做得不错：http: [//michaelwright.me/php-password-storage](http://michaelwright.me/php-password-storage)

快速回答：

1）你不需要储存盐。

2）如果您为每个密码使用唯一的盐，则不需要更新所有哈希值。

3）我不是加密专家，但是当您为每个用户/密码使用唯一的盐时，攻击者将不得不为每个用户使用一组不同的彩虹表。在整个站点中使用相同的盐值意味着每个用户的密码都容易受到相同哈希表的影响。在过去（无论好坏），我使用用户上次登录时间和/或上次 IP 的函数作为密码的盐值。

例如（伪代码）$password = hash(hash($_POST['password']) . hash($row['last_login']));

4) 我会推迟“为什么 bcrypt 更好？” 向更了解此类事情的人提问。这个答案可能会有所帮助：[您如何在 PHP 中使用 bcrypt 对密码进行哈希处理？](https://stackoverflow.com/questions/4795385/how-do-you-use-bcrypt-for-hashing-passwords-in-php)

# php - PHP Memcached 请求空键抛出 500 服务器错误

> ID：14668768
> 
> 赞同：1
> 
> 时间：2013-02-03T02:04:15.730
> 
> 标签：php, memcached, cgi

我的网站托管在 webfaction 上并运行 php5.4

我正在尝试启动并运行 memcached，但遇到了一个非常奇怪的错误

非常感谢任何帮助，托管公司正在与我一起努力解决这个问题，但是......请参见下文

以下代码有效

```
error_reporting(E_ALL & ~E_NOTICE);

$mc = new Memcached();
$mc->addServer('localhost', 32323);
echo "Setting foo to Hello! <Br />";
$mc->set("foo", "Hello!");
echo "Setting bar to Memcached.. <Br />";
$mc->set("bar", "Memcached...");

echo "dumping values <br />";
$arr = array(
$mc->get("foo"),
$mc->get("bar")
);
var_dump($arr); 
```

但以下不

```
error_reporting(E_ALL & ~E_NOTICE);

$mc = new Memcached();
$mc->addServer('localhost', 32323);

$mc->get("cat"); 
```

它实际上抛出了这个错误

```
500 – Internal Server Error
The page you requested is currently unavailable. Please try again later.

If you are the website owner, please see Error: 500 Internal Server Error documentation for more information and possible steps to resolve the problem. 
```

以下是我尝试过的一些事情要记住

*   是的，它是 memcacheD 而不是 memcache

*   我已经创建了隔离环境来测试它，但在所有情况下，如果我在设置它之前请求该值，我什至无法尝试/捕获任何错误（不会传播那么高）。几乎没有达到PHP级别

从我的 PHP 错误日志中我得到

```
[Sat Feb 02 19:55:33 2013] [error] [client 209.29.54.55] Premature end of script headers: php54.cgi 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T15:12:17.847

所以这是我从虚拟主机得到的答案，以防其他人遇到同样的问题

好的，我们终于确定了问题所在：

> php53 -c 。index.php
> php53 之前：符号查找错误：~/php53-exts/memcached.so：未定义符号：memcached_last_error_errno
> 
> 具体来说，发生的事情是您针对 libmemcached 1.0.15 构建了 memcached，但我们的服务器已经安装了旧版本的 libmemcached，版本 0.31。
> 
> 较新版本的 libmemcached 是必需的；memcached 2.1.0 不会针对旧的 libmemcached 构建。但是当您的 PHP 实际 *运行*时，它会尝试链接到共享的 libmemcached，而不是您安装到 ~/lib 中的那个
> 
> 好的，可以针对 libmemcached 静态重建 PHP memcached PECL 模块，但是它也需要针对相同的 libmemcached 构建 memcached 本身。然后，当您在 PHP 代码中执行“new Memcached()”时，您必须确保您的 PHP 调用了适当的 ~/bin/memcached。
> 
> 这工作量太大了，所以我正在考虑在我们所有的服务器上升级 memcached 和 libmemcached 的版本。较新的 memcached + libmemcached 将允许安装新版本的 memcached PHP PECL 模块，而无需本地安装 libmemcached 和二进制文件的静态链接。

# python-2.7 - python有内置的linkedList数据结构吗？

> ID：14668769
> 
> 赞同：20
> 
> 时间：2013-02-03T02:04:17.533
> 
> 标签：python-2.7

有谁知道 Python（可能是 2.7）是否有内置的`linkedList`数据结构？我知道队列是使用列表实现的，并且没有堆栈（有 LIFO 队列）。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2016-09-05T20:50:06.767

是的，Python 的[集合模块](https://github.com/python/cpython/blob/master/Modules/_collectionsmodule.c#L71)提供了 C 实现的对象，它在内部使用了 s 的`deque`链表 。[`BLOCK`](https://github.com/python/cpython/blob/master/Modules/_collectionsmodule.c#L71)

```
typedef struct BLOCK {
    struct BLOCK *leftlink;
    PyObject *data[BLOCKLEN];
    struct BLOCK *rightlink;
} block;

typedef struct {
    PyObject_VAR_HEAD
    block *leftblock;
    block *rightblock;
    Py_ssize_t leftindex;       /* 0 <= leftindex < BLOCKLEN */
    Py_ssize_t rightindex;      /* 0 <= rightindex < BLOCKLEN */
    size_t state;               /* incremented whenever the indices move */
    Py_ssize_t maxlen;          /* maxlen is -1 for unbounded deques */
    PyObject *weakreflist;
} dequeobject;

static PyTypeObject deque_type; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-03T02:12:43.667

除非你真的想要一个明确的链表结构，否则 Python 的内置列表具有你从链表中获得的所有功能。例如，您可以将其用作堆栈，如下所示：

```
>>> x = []
>>> x.append(1)
>>> x.append(2)
>>> x
[1, 2]
>>> x.pop()
2
>>> x
[1]
>>> 
```

或者，在给定元素之后插入一个元素：

```
>>> x = [1,2,3,4,5,6,7]
>>> x.insert(3,"a")
>>> x
[1, 2, 3, 'a', 4, 5, 6, 7]
>>> 
```

例如，请参阅有关[数据结构](https://docs.python.org/2/tutorial/datastructures.html)的 Python 文档。

但是，这是使用“列表”抽象数据类型 ( [ADT](https://en.wikipedia.org/wiki/Abstract_data_type) )。相反，“链表”不是 ADT，而是实现该 ADT 的许多可能方式之一。

如果前置效率是一个问题，Łukasz Rogalski 的回答指出这`collections.deque`是使用链表实现的。正如[使用列表作为队列](https://docs.python.org/3/tutorial/datastructures.html)注释：

> 也可以将列表用作队列，其中添加的第一个元素是检索到的第一个元素（“先进先出”）；但是，列表对此目的无效。虽然从列表末尾追加和弹出很快，但从列表开头插入或弹出很慢（因为所有其他元素都必须移动一个）。
> 
> 要实现队列，请使用 collections.deque，它旨在从两端快速追加和弹出。

`list`为了测试使用vs.的效率影响`deque`，我使用了以下程序：

```
import timeit, sys

print ("append to list: %f" % (timeit.timeit ('x.append("x")', 'x = ["y"]')))
print ("insert to list element 0: %f" % (timeit.timeit ('x.insert(0,"x")', 'x = ["y"]')))
print ("append to deque: %f" % (timeit.timeit ('x.append("x")', 'import collections; x = collections.deque(["a","b","c"])')))
print ("append left to deque: %f" % (timeit.timeit ('x.appendleft("x")', 'import collections; x = collections.deque(["a","b","c"])')))

if (sys.version_info[0]+sys.version_info[1]/10) > 3.4999:
    print ("insert in deque: %f" % (timeit.timeit ('x.insert(2,"x")', 'import collections; x = collections.deque(["a","b","c"])'))) 
```

...并得到 Python 3.6 和 Python 2.7 的以下结果：

```
$ python3 testList.py
append to list: 0.113031
insert to list element 0: 191.147079
append to deque: 0.058606
append left to deque: 0.064640
insert in deque: 0.160418

$ python testList.py
append to list: 0.102542
insert to list element 0: 191.128508
append to deque: 0.083397
append left to deque: 0.064534 
```

因此，`list`追加元素所花费的时间大约是追加元素的两倍，并且`deque`与`deque`追加相比，追加（即追加到左侧）所需的时间更少。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-04-26T08:57:58.567

我相信 collections 包中的 deque 类是作为双向链表实现的，带有头部和尾部保护。它支持默认列表的所有常用 API。要附加到头部，请使用`leftappend`函数。

```
from collections import deque 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-03T02:09:43.643

python中没有内置的链表，但你可以使用dequeue，它让你可以访问head和tail，但是如果你想实现你自己的链表，你可以使用

[Python 链表](https://stackoverflow.com/questions/280243/python-linked-list)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-16T21:20:13.580

Python 有 collections.deque，它是一个小 list()s 的双向链表。

不过，您几乎总是最好使用 Python list() 而不是链表。尽管链表对某些操作有更好的大 O，但 list() 通常更快，因为引用的局部性更好。

我实际上在 Python 中使用了链表：http: [//stromberg.dnsalias.org/~strombrg/linked-list/](http://stromberg.dnsalias.org/~strombrg/linked-list/) ...在进行性能比较之前。

我使用我的“计数”程序作为测试平台；使用链表，它比使用 list() 的版本更慢并且使用更多的 RSS (RAM)。count 在[http://stromberg.dnsalias.org/~strombrg/count.html](http://stromberg.dnsalias.org/~strombrg/count.html) 我扔掉了它的链表版本；它不是非常有用。

list() 有时会更快是有道理的。考虑在 list() 和链表中从第一个元素到最后一个元素进行遍历。list() 倾向于对 n 个元素引用进行一次 RAM 缓存命中，而链表倾向于对每个元素进行一次 RAM 缓存命中。这是因为 list() 引用在 RAM 中都彼此相邻，但链表引用对于每个值都位于不同的类实例中。由于缓存比普通 RAM 快得多，这可能很重要。

collections.deque 并不会成为这种情况的牺牲品，因为链表中的每个节点都是由小数组组成的。

另一方面，如果您想避免人们*使用*随机访问您的值集合，链接列表可能是一个好主意。也就是说，有时为了抽象起见，您可能更喜欢链表而不是 list()。但是 Python 开发人员倾向于假设“我们都是成年人”。

此外，插入列表中间，如果您已经知道将新值放在哪里（也就是说，您不需要 O(n) 搜索来确定将它放在哪里），它会更快一些一个链表。

# c++ - 如何从 QLineEdit 对象中检索文本？

> ID：14668777
> 
> 赞同：0
> 
> 时间：2013-02-03T02:05:36.693
> 
> 标签：c++, qt

我有一个指向 QLineEdit 对象的指针数组，我想遍历它们并输出它们持有的文本。看来我在使用指针时遇到了麻烦..

```
QList<QLineEdit *> boxes = ui->gridLayoutWidget->findChildren<QLineEdit *>();
for(QList<QLineEdit *>::iterator it = boxes.begin(); it != boxes.end(); it++)
{
    qDebug() << **it->text();  //not sure how to make this correct
} 
```

我可以使用 qDebug 输出对象和名称，所以我知道 findChildren() 和迭代器已设置好，但我不确定如何获取文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T02:06:22.650

尝试：

```
for(QList<QLineEdit *>::iterator it = boxes.begin(); it != boxes.end(); it++)
{
     qDebug() << (*it)->text();  
} 
```

和下面的代码一样，只是保存了一个中间指针：

```
for(QList<QLineEdit *>::iterator it = boxes.begin(); it != boxes.end(); it++)
{
    QlineEdit* p= *it; // dereference iterator, get the stored element.
    qDebug() << p->text();
} 
```

`operator->`优先级高于`operator*`，请参阅 C++[运算符 wiki](http://en.wikipedia.org/wiki/Operators_in_C_and_C++)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T02:35:45.837

你为什么使用迭代器？Qt 有一个不错的`foreach`循环，可以为您完成这些工作并简化语法：

```
QList<QLineEdit *> boxes = ui->gridLayoutWidget->findChildren<QLineEdit *>();

foreach(QLineEdit *box, boxes) {
    qDebug() << box->text();
} 
```

# javascript - 启用输入选择但禁用文本输入

> ID：14668780
> 
> 赞同：0
> 
> 时间：2013-02-03T02:05:46.630
> 
> 标签：javascript, jquery, html

我想知道是否有办法允许选择（单击）表单但同时使表单无法输入文本。

我试过使用`readonly`which 给我的功能，但它提供的光标与我设置的光标相同`disabled=true`，它使输入字段变灰，这让用户感到困惑。有其他选择吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T02:07:28.563

```
<input class="notype" />

$('.notype').on('keydown', function(e){
    e.preventDefault();
}) 
```

你没有告诉我们的是为什么。如果是因为您希望将其复制到剪贴板但不更改，则上面不会让您这样做，如果是，请详细说明。

# ios - UICollectionView 的 cellForItemAtIndexPath 没有被调用

> ID：14668781
> 
> 赞同：116
> 
> 时间：2013-02-03T02:06:06.223
> 
> 标签：ios, objective-c, uicollectionview

只有我第二次使用 UICollectionView's，也许我已经咬得比我能咀嚼的还多，但尽管如此：

我正在实现一个 UICollectionView (myCollectionView)，它使用我已经子类化的自定义 UICollectionViewCell。子类单元格 (FullReceiptCell) 包含 UITableView，并且是 viewcontroller 的大小。我试图允许 FullReceiptCells 之间的水平滚动。

包含 myCollectionView 的子类 UICollectionViewController 被推送到导航控制器堆栈。目前，myCollectionView loas 和水平滚动已启用。但是，看不到任何单元格。我已经确认

```
- (NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section 
```

已运行并返回大于 0 的整数。我还确认 myCollectionView 的委托和数据源已在 IB 中正确设置为子类 UICollectionViewController。

要加载单元格的方法：

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath 
```

没有被调用。

这是我在该控制器中推送 UICollectionViewController 和 viewDidLoad 方法的地方（注意：initWithBill 是普通初始化程序的覆盖）：

在之前的 ViewControllers .m 文件中：

```
FullReceiptViewController *test = [[FullReceiptViewController alloc] initWithBill:currentBill];
test.title = @"Review";
[self.navigationController pushViewController:test animated:YES]; 
```

在 FullReceiptViewController.m 中：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
    [self.myCollectionView registerClass:[FullReceiptCell class] forCellWithReuseIdentifier:@"FullReceiptCellIdentifier"];
    self.myCollectionView.pagingEnabled = YES;
    // Setup flowlayout

    self.myCollectionViewFlowLayout = [[UICollectionViewFlowLayout alloc] init];
    [self.myCollectionViewFlowLayout setItemSize:CGSizeMake(320, 548)];
    [self.myCollectionViewFlowLayout setSectionInset:UIEdgeInsetsMake(0, 0, 0, 0)];
    [self.myCollectionViewFlowLayout setScrollDirection:UICollectionViewScrollDirectionHorizontal];
    self.myCollectionViewFlowLayout.minimumLineSpacing = 0;
    self.myCollectionViewFlowLayout.minimumInteritemSpacing = 0;
    [self.myCollectionView setCollectionViewLayout:myCollectionViewFlowLayout];
    //testing to see if the collection view is loading
    self.myCollectionView.backgroundColor = [UIColor colorWithWhite:0.25f alpha:1.0f]; 
```

关于为什么不调用它的任何线索？

* * *

## 回答 #1

> 赞同：146
> 
> 时间：2013-02-04T07:17:14.040

对于那些后来在这里绊倒的人......原因：

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath 
```

没有被调用是因为 collectionViewFlowLayout 的高度的 itemSize 太大。

```
[self.myCollectionViewFlowLayout setItemSize:CGSizeMake(320, 548)]; 
```

如果我将高度更改为 410，它将执行 cellForItemAtIndexPath。

* * *

## 回答 #2

> 赞同：106
> 
> 时间：2014-08-20T22:32:22.863

In my case, it was because my layout class incorrectly subclassed from [`UICollectionViewLayout`](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UICollectionViewLayout_class/) instead of [`UICollectionViewFlowLayout`](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UICollectionViewFlowLayout_class/index.html#//apple_ref/occ/cl/UICollectionViewFlowLayout)

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2014-07-22T09:59:22.597

如果您不向集合视图提供内容大小信息，则不会调用 cellForItemAtIndexPath。

1.  **如果您使用的是 Flow 布局**：您需要正确设置项目大小。
2.  **如果您有从 UICollectionViewLayout 子类化的自定义布局**：确保从 collectionViewContentSize 方法返回正确的大小。

在后者的情况下，您还将观察到您的***layoutAttributesForElementsRect***也没有被调用。原因是您没有指定内容大小，默认情况下大小为 CGSizeZero。这基本上告诉集合视图您没有任何要绘制的内容，因此它不会打扰您询问属性或单元格。

因此，只需覆盖 collectionViewContentSize 并在那里提供适当的大小，它应该可以解决您的问题。

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2016-01-08T08:34:59.010

有关更复杂的视图层次结构，请查看此[博客](http://yui.co/ios/2014/08/07/UICollectionView-cellForItemAtIndexPath-not-called-fix/)。它救了我的命！

```
self.automaticallyAdjustsScrollViewInsets = NO; 
```

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2013-02-03T02:20:11.517

也许我只是忽略了它，但您似乎缺少您的委托和数据源。在你的头文件中，确保你已经添加了这些：

```
<UICollectionViewDelegate, UICollectionViewDataSource> 
```

并在您的 viewDidLoad 方法中添加：

```
self.myCollectionView.delegate = self;
self.myCollectionView.dataSource = self; 
```

此外，如果您通过 .xib 加载它，请确保您已将 IBOutlet 连接到 UICollectionView。

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2017-01-30T14:56:23.770

如果您的类是 UICollectionviewController 的子类，并且您正在以编程方式创建 collectionView，则使用

```
let layout = UICollectionViewFlowLayout()
    layout.scrollDirection = .Vertical
    layout.itemSize = CGSizeMake(50, 50)

    collectionView?.setCollectionViewLayout(layout, animated: false) 
```

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2017-11-27T11:20:13.070

我正在使用自动布局，在我的情况下**缺少高度约束**

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2014-02-05T07:41:54.173

就我而言，我非常愚蠢地忘记做的是实现`UICollectionViewDataSource`协议方法`numberOfItemsInSection`，所以这是另一件要检查的事情。

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2017-09-07T17:52:24.850

我的问题是我在同一个视图中有 2 个集合视图，并且两者都共享一个计算`UICollectionViewFlowLayout`实例。一旦我创建了相同流布局的单独实例，它就可以正常工作。

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2015-04-18T08:01:49.107

十分钟前我也遇到了这个问题，我犯了一个愚蠢的错误。

我的意图是使用 UICollectionViewFlowLayout，

但是因为出错，我使用了UICollectionViewLayout。

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2017-05-17T00:30:34.423

此外，请确保在集合视图使用动画更新（插入、删除、更新或 performBatchUpdates）时不调用 reloadData。

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2020-05-04T16:01:34.410

在我的情况下，我有`collectionView`一个`UIStackView`with `alignment = .center`。所以`collectionView`没有宽度。当设置`stackView.alignment`为`.fill`一切都很好。

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2017-05-19T02:25:53.047

就我而言， set`collectionView.prefetchingEnabled = NO;`解决了我的问题。仅适用于 iOS 10。

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2020-04-18T06:42:15.323

我遇到了类似的问题。但是`cellForItemAtIndexPath`当项目数> 1时调用，而不是当只有一个项目时调用。我在这里尝试了许多建议的解决方案，并且与许多我发现它与项目大小有关的解决方案类似。对我来说，解决方案是将估计大小`UICollectionView`从*Automatic*更改为*Custom*。

[![将估计大小设置为自定义](../Images/6b425d13405c018111581e4fc5d3a072.png)](https://i.stack.imgur.com/gAWq0m.png)

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2013-11-20T13:36:09.417

当通过修复调用 cellForItem 方法来修复 item height == 0 时，我正在发生这种情况。

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2018-10-10T14:43:47.450

在 storyboard/xib UICollectionView 属性 cellSize 不能是 {0, 0}

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2015-10-29T07:15:19.157

在 Xcode 7.0.1 中，当我们从另一个项目复制故事板和随附代码时，我们遇到了这个问题。集合视图在情节提要中设置了自定义流程布局。解决方案是：

*   删除 IB 中的流布局
*   编译/运行应用程序
*   重新设置流布局

现在它起作用了:)

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2016-03-02T18:58:20.960

我忘记在集合视图上将自动调整大小掩码设置为 false：

```
collectionView.translatesAutoresizingMaskIntoConstraints = false 
```

* * *

## 回答 #19

> 赞同：3
> 
> 时间：2015-09-02T08:03:42.690

就我而言，将 UINavigationBar 的半透明更改为 NO 解决了这个问题。

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2015-01-30T21:48:35.790

确保 -(NSInteger) collectionView:numberOfItemsInSection: 返回一个正值（读取，大于零）。可能是放置 [self.collectionView reloadData]; 在完成处理程序中。

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2015-01-13T18:51:21.077

确保`numberOfSectionsInCollectionView`也返回一个正整数。

集合中必须至少有一个部分。

* * *

## 回答 #22

> 赞同：2
> 
> 时间：2017-11-01T09:52:14.020

它可能是现实的布局问题。从控制台检查布局警告（如果存在）。

* * *

## 回答 #23

> 赞同：2
> 
> 时间：2017-12-06T10:21:18.360

在我的情况下，由于错误的自动布局约束，集合视图在其父视图中不完全可见。因此，修复约束使集合视图全部可见，并且调用了 cellForItemAtIndexPath。

* * *

## 回答 #24

> 赞同：2
> 
> 时间：2017-03-28T11:40:57.677

如果您使用集合视图协议，则必须将`CollectionViewDataSource`和`CollectionViewDelegate`协议连接到您的 ViewController。 [![界面构建器出口](../Images/8551354ef46e474893bccf9a0f9f7968.png)](https://i.stack.imgur.com/go3aZ.png)

* * *

## 回答 #25

> 赞同：2
> 
> 时间：2017-10-19T09:50:13.083

使用时`UICollectionViewDelegateFlowLayout`请注意此函数返回的内容。两者都`width`应该`height`大于`0`。我用作`window`框架参考，但由于复杂的视图层次结构窗口`nil`在运行时。如果您需要根据屏幕宽度调整元素的宽度，请使用`UIScreen.main.bounds`.

```
func collectionView(_ collectionView: UICollectionView, layout collectionViewLayout: 
           UICollectionViewLayout, sizeForItemAt indexPath: IndexPath) -> CGSize {} 
```

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2014-11-01T03:35:58.173

我也发生了同样的事情。我有 2 个 UICollectionViews，我删除了一次，因为我不需要它。之后，我意识到 CellForItemAtIndexPath 没有被调用，而是其他必需的方法。我尝试了以上所有方法，但后来我做了标准的魔术。从情节提要中删除了集合视图并再次添加。然后它开始工作。不知道为什么，我没有解释，但可能是一些连接问题。

* * *

## 回答 #27

> 赞同：1
> 
> 时间：2017-06-13T13:42:39.607

对我来说，我通过自动布局更新 self.view（collectionView 的超级视图）的高度，然后必须调用`layoutIfNeeded`。

```
[self.view mas_updateConstraints:^(MASConstraintMaker *make) {
    make.height.equalTo(@(height));
}];
[self.view layoutIfNeeded]; 
```

* * *

## 回答 #28

> 赞同：1
> 
> 时间：2017-07-16T00:34:49.463

Just resolved this issue, for a somewhat specific situation.

In my case, I was manually initializing the UICollectionViewController in a parent ViewController, and then adding the UICollectionViewController's view as a subview.

I resolved the issue by calling 'setNeedsLayout' and/or 'setNeedsDisplay' on the collectionView in the parent's viewDidAppear:

```
- (void)viewDidAppear:(BOOL)animated {
   [super viewDidAppear:animated];
   [_collection.view setNeedsLayout];
   [_collection.view setNeedsDisplay];
} 
```

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2019-12-19T09:22:04.807

就我而言，我不得不调整估计的内容大小。内容大小没有做到这一点。

```
 let layout = collectionVC.collectionView.collectionViewLayout as! UICollectionViewFlowLayout
    layout.itemSize = CGSize(width: 100, height: 100)
    layout.estimatedItemSize = CGSize(width: 100, height: 100) 
```

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2021-06-10T08:19:38.867

就我而言，我找到了解决方法：

```
 //IF RELOAD COLLECTION VIEW AFTER DELAY IT WORKS
    DispatchQueue.main.asyncAfter(deadline: .now() + 0.3) {
        //ASSIGN NEW DATA SOURCE
        self.arrItem = arrModel
        self.collectionView.reloadData()
    } 
```

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2021-12-22T22:58:16.423

i) 请确保将 UICollectionView 添加到 UITableViewCells **contentView**而**不是 subView**

* * *

## 回答 #32

> 赞同：-1
> 
> 时间：2016-01-20T00:34:51.287

在从情节提要加载的包含视图控制器中使用 CollectionView 时，我花了一些时间来解决这个问题。我最终只是删除了包含的视图控制器，并在情节提要中重新创建它，这似乎解决了这个问题。我的猜测是发生了某种情节提要损坏。

* * *

## 回答 #33

> 赞同：-2
> 
> 时间：2015-12-25T11:42:47.487

在自定义单元格的 layoutSubViews() 中设置 collectionView 框架对我有用：

```
override func layoutSubviews() {
        super.layoutSubviews()
        let frame = self.contentView.bounds
        self.CollectionView.frame = frame
    } 
```

# java - Android Java：无法弄清楚如何循环我的 VideoView

> ID：14668782
> 
> 赞同：0
> 
> 时间：2013-02-03T02:06:17.927
> 
> 标签：java, android, eclipse, loops, android-videoview

我有以下代码。它从我的原始资源文件夹中获取视频并开始播放视频，我需要它在视频结束时循环播放视频，但经过大量艰苦的研究后，我终生无法弄清楚。

这是我的主要活动的 Java 代码。

```
package com.infernowebmedia.staircat;

import android.net.Uri;
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.widget.VideoView;
import android.widget.MediaController;

public class MainActivity extends Activity {

private VideoView mVideoView;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    mVideoView = (VideoView) findViewById(R.id.surface_view);
     mVideoView.setVideoURI(Uri.parse("android.resource://" + getPackageName() +"/"+R.raw.staircatloop));
     mVideoView.start();

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

} 
```

我见过有人尝试使用 setOnCompletionListener，但是每当我尝试实现他们的答案中建议的代码时，我都会从 Eclipse 中收到多个错误，不确定我做错了什么！请帮我 ：）

〜汤姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:41:42.863

尝试这个：

```
import android.media.MediaPlayer;
...
myVideoView.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {
  @Override
  public void onCompletion(MediaPlayer arg0) {
    // restart on completion
    myVideoView.start();
  }
});
...
myVideoView.start();
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-22T16:10:19.427

在 prepardelistener 类上设置为 Looping true，然后在 completeListener 类上恢复视频，请试试这个，

```
myVideoView.setOnCompletionListener(new OnCompletionListener() {

            @Override
            public void onCompletion(MediaPlayer mp) {
                myVideoView.resume();
                }
        });

        myVideoView.setOnPreparedListener(new OnPreparedListener() {

            @Override
            public void onPrepared(MediaPlayer mp) {
                mp.setLooping(true);
                myVideoView.start();                
            }
        }); 
```

# jquery - jQuery + Rails 返回正确的列，但随后返回整个记录

> ID：14668785
> 
> 赞同：0
> 
> 时间：2013-02-03T02:07:01.370
> 
> 标签：jquery, ruby-on-rails, ajax

以下代码的目的是创建一个段落元素，其中包含每个维度的维度版本的 dimension_version 名称。

```
$("#dave").html("<%= Dimension.find(params[:id]).dimension_versions.each do |dv| %><p><%= dv.name %></p><% end %>"); 
```

这实际上导致了预期的行为，但后面是返回的每个维度版本的整个记录​​，这是出乎意料的：

```
Default
Test 1
[#<DimensionVersion id: 3, name: "Default", dimension_id: 2, created_at: "2013-02-01 15:04:05", updated_at: "2013-02-01 15:04:05">, #<DimensionVersion id: 10, name: "Test 1", dimension_id: 2, created_at: "2013-02-01 16:03:55", updated_at: "2013-02-01 16:03:55">] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T02:11:46.553

我不得不从 <%= 中删除 =。所以这：

```
$("#dave").html("**<%=** Dimension.find(params[:id]).dimension_versions.each do |dv| %><p><%= dv.name %></p><% end %>"); 
```

成为：

```
$("#dave").html("**<%** Dimension.find(params[:id]).dimension_versions.each do |dv| %><p><%= dv.name %></p><% end %>"); 
```

# c# - 是否可以在 C# 中进行拖放而不将源移动到目标？

> ID：14668790
> 
> 赞同：2
> 
> 时间：2013-02-03T02:07:54.320
> 
> 标签：c#, windows, user-interface, drag-and-drop, treelist

我想知道在 UI 设计领域中是否存在这样的情况：您将一个 TreeList 的项目拖放到另一个 TreeList 项目上，只是为了调用一个新窗口（以执行一些功能），而不是实际移动源并将其拖放到目标上.

我有这个要求，但我不确定它是否有意义。

我认为在树列表中拖放只是将一个项目移动到树的另一个分支，而不是触发弹出窗口。我弄错了吗？到目前为止我看到的例子，都是将源移动到目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T02:12:30.863

拖放基本上是一组被触发的事件。`Drop`您的代码可以使用该事件来执行任何操作。因此，完全有可能在 drop 时触发弹出窗口。

阅读此[http://msdn.microsoft.com/en-us/library/ms742859.aspx](http://msdn.microsoft.com/en-us/library/ms742859.aspx)了解更多详情。

```
void treeView_Drop(object sender, DragEventArgs e)
{
   var sourceNode = (TreeNode)e.Data.GetData(typeof(TreeNode);

   // TODO: popup window
} 
```

# java - 有没有更简单的方法来克隆具有数十个成员变量的对象？

> ID：14668791
> 
> 赞同：0
> 
> 时间：2013-02-03T02:07:54.490
> 
> 标签：java, clone

> **可能重复：**
> [如何正确覆盖克隆方法？](https://stackoverflow.com/questions/2326758/how-to-properly-override-clone-method)

我有一个简单的类，里面有一堆原始变量，总共大约 100-200 个。它的结构非常简单，如下所示：

```
public class Level implements Clonable {
    int speed; 
    boolean wallKicks;
    boolean bigMode;
    float targetFrequency;
    long milliseconds;
    double fade;
    int[] perfectPenalties;
    <100 or so more things like this>
} 
```

我需要能够克隆这个类。现在，我刚刚在我的 clone() 方法中为每个成员变量明确输入了复制操作：

```
public Object clone() {
     Level newLevel = new Level();
     newLevel.speed = speed;
     newLevel.wallKicks = wallKicks;
     newLevel.bigMode = bigMode;
     newLevel.perfectPenalties = perfectPenalties.clone();
     <etc>
} 
```

问题是要确保我没有遗漏克隆方法中的任何值是一项艰巨的任务。将来我还想实现一个 equals() 函数，这意味着我必须手动同步 3 个位置的数据。不愉快。

有没有更简单的方法可以做到这一点？我愿意接受程序化解决方案或其他任何可以完成这项工作的东西。我只想有一些比查看三个并排和匹配变量更容易的东西。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T02:18:37.557

是的，您可以使用以下方法进行克隆：

1）Java序列化机制来克隆你的对象：

```
ByteArrayOutputStream bout = new ByteArrayOutputStream();
out = new ObjectOutputStream(bout);

out.writeObject(obj);
out.close();

ByteArrayInputStream bin = new ByteArrayInputStream(bout.toByteArray());
in = new ObjectInputStream(bin);            
Object copy = in.readObject(); 
```

2) apache.commons.lang 库有一个[org.apache.commons.lang.SerializationUtils](http://commons.apache.org/lang/api-2.4/org/apache/commons/lang/SerializationUtils.html) .clone()

3）使用[推土机](http://dozer.sourceforge.net/)库

4）用户[Kyro](http://code.google.com/p/kryo/)，虽然我从未使用过它

对于 equals() 使用[org.apache.commons.lang.builder.EqualsBuilder](http://commons.apache.org/lang/api-2.4/org/apache/commons/lang/builder/EqualsBuilder.html) .reflectionEquals()

# bash - 使用 diff 检查目录修改

> ID：14668792
> 
> 赞同：2
> 
> 时间：2013-02-03T02:08:03.010
> 
> 标签：bash, if-statement, diff

我开始使用 bash-scripting 并且我目前正在编写一个脚本来备份一个目录，如果该目录自上次备份以来被修改过。我正在使用 diff 命令来检查这个，但我想我可能没有正确使用它。

**编辑** 我得到差异的原因是因为文件 newFile 和 oldFile 是在包含脚本的目录中创建的，这与我要备份的目录相同。如何使用 diff 使其返回除这两个文件之外的差异？

```
ls -lR $1 > oldFile

while [ 0 ]; 
do

    ls -lR $1 > newFile

    if [ ! diff newFile oldFile ] ; then
  echo "they differ"

else

    echo "they don't differ" 
fi

 done 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T02:13:29.523

首先，if 语句根本不起作用。利用：

```
if [ diff oldFile newFile ] ; then
    echo "they differ"
fi 
```

注意`[ ]`括号！（请注意，它们不是真正的“括号”。`[`是`test`命令的矮个子，`]`是它的最后一个参数。疯狂，但很酷！

* * *

您可以使用

```
diff -rN OLD_DIR NEW_DIR 
```

获得递归差异。`-N`还跟踪新文件

你也可以看看[`inotifywait`](http://linux.die.net/man/1/inotifywait)和朋友。Inotify 是 Linux 内核中的一种机制，它允许在 inode（文件或目录，...）发生更改时注册挂钩。使用`inotifywait`（和恶魔），您可以注册一个 shell 脚本，该脚本将在感兴趣的文件/目录上发生的每个文件操作时触发。在该脚本中，您可以在更改后直接进行备份（如果需要）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T02:14:33.930

一个小的搜索就会发现：[Bash：在 if 语句中使用 diff 的结果](https://stackoverflow.com/questions/3611846/bash-using-a-the-result-of-a-diff-in-a-if-statement?rq=1)。

```
DIFF=$(diff newfile oldfile) 
if [ "$DIFF" != "" ]; then
    ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T02:21:54.587

您还可以使用`md5deep`对目录中的文件进行哈希处理，然后对该命令的输出进行哈希处理以获得最终校验和：

```
hash=$(md5deep -rs folder | md5sum) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T10:04:01.703

代码中的括号`diff`不是强制性的，其想法是`if`语句自己测试后面命令的返回码。所以不用再打电话`test`了。你也可以写：

```
if diff -q newFile oldFile &> /dev/null ; then... 
```

（重定向到 /dev/null 在这里是因为 `diff`返回 - 无用 - 输出）

# javascript - 试图使幻灯片宽度适合屏幕

> ID：14668794
> 
> 赞同：0
> 
> 时间：2013-02-03T02:08:34.397
> 
> 标签：javascript, html

我正在尝试创建一个我已经完成的幻灯片（图像）（通过处理一个示例并稍微更改它，但我正在尝试适应图像大小，以便没有滚动选项。我试着把它在一个 div 中，但这不起作用（无疑是由于我的无能）。我在这里查了很多，发现有几个人问相同/相似的问题（例如[如何调整图像大小以适应浏览器窗口?](https://stackoverflow.com/questions/6169666/how-to-resize-an-image-to-fit-in-the-browser-window) )，但是一直无法应用。目前我查看这个时，页面大小是最大图像的大小（当图像大于页面时）。

非常感谢您的帮助。

这是我目前所在的位置：

```
<!DOCTYPE html>
<html>
<head>
<title>JQuery Cycle Plugin - Basic Demo</title>
<style type="text/css">
.slideshow { height: "100%"; width:auto }
</style>
<!-- include jQuery library -->
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
<!-- include Cycle plugin -->
<script type="text/javascript" src="http://cloud.github.com/downloads/malsup/cycle/jquery.cycle.all.latest.js"></script>
<script type="text/javascript">
$(document).ready(function() {
    $('.slideshow').cycle({
        fx: 'fade' // choose your transition type, ex: fade, scrollUp, shuffle, etc...
    });
});
</script>
</head>

<body>
<div class="slideshow"; style= height: "100%"; width:"auto">
        <img src="1.jpg" />
        <img src="2.jpg" />
        <img src="3.jpg" />
        <img src="4.jpg" />
        <img src="5.jpg" />
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T02:49:15.710

[http://jsfiddle.net/LsNV7/6](http://jsfiddle.net/LsNV7/6)

```
.slideshow > img {width: 100%;} 
```

# apache - RESTful 部署错误

> ID：14668795
> 
> 赞同：2
> 
> 时间：2013-02-03T02:08:37.797
> 
> 标签：apache, rest, apache-wink

我正在尝试在 ECLIPSE IDE 中使用 Apache Wink 在 Apache Tomcat 构建上部署 RESTful Web 服务。尝试在服务器上运行我的应用程序时出现以下错误：

```
Feb 02, 2013 8:47:04 PM org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: C:\Program Files\Java\jre7\bin;C:\Windows\Sun\Java\bin;C:\Windows\system32;C:\Windows;C:/Program Files/Java/jre7/bin/client;C:/Program Files/Java/jre7/bin;C:/Program Files/Java/jre7/lib/i386;C:\php\;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;D:\sw\Java\apache-maven-2.2.1-bin\apache-maven-2.2.1\bin;D:\PR\apache-ant-1.8.4-bin\apache-ant-1.8.4\bin;C:\cTAKES-2.5.0;C:\cTAKES-2.5.0\bin;C:\Program Files\Java\jdk1.7.0_02\bin;C:\Downloads\Apache-Subversion-1.7.6\bin;UIMA_HOME\bin;D:\sw\Apache AXIS and JavaBeans Activation framework\axis-src-1_4\axis-1_4\lib\commons-logging-1.0.4.jar;c:\Program Files\Microsoft SQL Server\100\Tools\Binn\;c:\Program Files\Microsoft SQL Server\100\DTS\Binn\;C:\Program Files\MySQL\MySQL Server 5.5\bin;C:\Program Files\MySQL\MySQL Server 5.1\bin;C:\Program Files\IDM Computer Solutions\UltraEdit\;D:\sw\eclipse-jee-indigo-SR2-win32\eclipse;;.
Feb 02, 2013 8:47:04 PM org.apache.tomcat.util.digester.SetPropertiesRule begin
WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:Books' did not find a matching property.
Feb 02, 2013 8:47:04 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-bio-8080"]
Feb 02, 2013 8:47:05 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
Feb 02, 2013 8:47:05 PM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 804 ms
Feb 02, 2013 8:47:05 PM org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
Feb 02, 2013 8:47:05 PM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.22
Feb 02, 2013 8:47:05 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["http-bio-8080"]
Feb 02, 2013 8:47:05 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["ajp-bio-8009"]
Feb 02, 2013 8:47:05 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 458 ms
148 [http-bio-8080-exec-3] INFO org.apache.wink.common.internal.application.ApplicationFileLoader - Loading application from META-INF/core/wink-providers.
471 [http-bio-8080-exec-3] INFO org.apache.wink.server.internal.servlet.RestServlet - Using application class com.ibm.devworks.ws.rest.books.BookWebApp named in init-param javax.ws.rs.Application
472 [http-bio-8080-exec-3] ERROR org.apache.wink.server.internal.servlet.RestServlet - com.ibm.devworks.ws.rest.books.BookWebApp
java.lang.ClassNotFoundException: com.ibm.devworks.ws.rest.books.BookWebApp
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1678)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1523)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Unknown Source)
    at org.apache.wink.server.internal.servlet.RestServlet.getApplication(RestServlet.java:163)
    at org.apache.wink.server.internal.servlet.RestServlet.createRequestProcessor(RestServlet.java:113)
    at org.apache.wink.server.internal.servlet.RestServlet.init(RestServlet.java:87)
    at javax.servlet.GenericServlet.init(GenericServlet.java:160)
    at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1228)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1147)
    at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:836)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:135)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:405)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:964)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:515)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Feb 02, 2013 8:47:06 PM org.apache.catalina.core.ApplicationContext log
INFO: Marking servlet restSdkService as unavailable
Feb 02, 2013 8:47:06 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Allocate exception for servlet restSdkService
javax.servlet.UnavailableException: com.ibm.devworks.ws.rest.books.BookWebApp
    at org.apache.wink.server.internal.servlet.RestServlet.init(RestServlet.java:97)
    at javax.servlet.GenericServlet.init(GenericServlet.java:160)
    at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1228)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1147)
    at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:836)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:135)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:405)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:964)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:515)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

我在哪里失踪？？

谢谢。

问候， Piyush

# google-chrome - jQuery datepicker 在 Chrome 和 Firefox 上显示不同

> ID：14668796
> 
> 赞同：2
> 
> 时间：2013-02-03T02:08:38.687
> 
> 标签：google-chrome, jquery-ui-datepicker

在一个 MVC3 应用程序中，我使用了一个 jQuery datepicker 插件，它在 Firefox 和 Chrome 中的显示完全不同。应用中有相关代码和两张截图：

```
<head>
    <link href="@Url.Content("~/Content/themes/redmond/jquery-ui-1.8.18.custom.css")" rel="stylesheet" type="text/css" />
    <script src="@Url.Content("~/Scripts/jquery-ui-1.8.18.custom.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.ui.datepicker.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.ui.datepicker-fr.js")" type="text/javascript"></script>
    <script>
        $(document).ready(function () {
            $('.datefield').datepicker({
                showOn: 'both',
                buttonImage: "/content/images/calendar.gif",
                showAnim: "clip",
                regional: "fr",
                defaultDate: null,
                changeMonth: true,
                changeYear: true
            });
        });
    </script>
</head>

@using(...)
{
    ...
    @Html.LabelFor(model => model.candidat.date_naissance)
    @Html.EditorFor(model => model.candidat.date_naissance, new { @class = "date" })
    ...
} 
```

我使用 EditorTemplate：

```
@model DateTime
@Html.TextBox("", String.Format("{0:d}", Model.ToShortDateString()),
  new { @class = "datefield", type = "date" }) 
```

在模型中，字段 candidat.date_naissance 为：

```
[Required(ErrorMessageResourceType = typeof(CandidatResources), ErrorMessageResourceName = "RequiredDateNaissanceMessage")]
[Display(ResourceType = typeof(CandidatResources), Name = "DateNaissanceDisplay")]
[DataType(DataType.Date, ErrorMessageResourceType = typeof(CandidatResources), ErrorMessageResourceName = "InvalidDateNaissanceMessage")]
public System.DateTime date_naissance { get; set; } 
```

生成的 HTML 是：

*   *在火狐中：*

    ```
    输入类型="日期" 值="12/19/1974" name="candidat.date_naissance" id="candidat_date_naissance" data-val-required="La date de naissance est obligatoire" data-val="true" class= “日期字段有日期选择器”

    ```

*   *在铬：*

    ```
    input class="datefield hasDatepicker" data-val="true" data-val-required="La date de naissance est obligatoire" id="candidat_date_naissance" name="candidat.date_naissance" type="date" value="12/ 19/1974"

    ```

**最后，这里是相同**数据的截图：

火狐：

![火狐](../Images/1778a9d89b0a7798523087539d07d96e.png "火狐")

铬合金：

![铬合金](../Images/67435d1d12c71d8e024b7299c2a0133b.png "铬合金")

在 Chrome 中，始终显示字符串“mm/dd/yyyy”，即使已经存在日期（例如，在输入日期并保存在 Firefox 中之后，我希望在刷新时也能在 Chrome 中看到它，但事实并非如此发生）。

这种行为的解释是什么以及如何解决？

我已经尝试过[这个解决方案](https://stackoverflow.com/questions/2271807/jquery-ui-datepicker-and-google-chrome-not-working "这个解决方案")，但无济于事。

**注意：** 这发生在 Cassini 服务器和 IIS（本地和虚拟框）上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T00:58:43.177

请参考以下文章。如果您想在值属性或表单提交中应用 mm/dd/yyyy 格式，则不应使用 type=date。

*   [Google Chrome 中有关输入[type=date] 的快速常见问题解答](http://updates.html5rocks.com/2012/08/Quick-FAQs-on-input-type-date-in-Google-Chrome)
*   [日期状态（类型=日期）](http://www.whatwg.org/specs/web-apps/current-work/multipage/states-of-the-type-attribute.html#date-state-%28type=date%29)

# php - Codeigniter Ajax 请求在视图和数据库中出现两次

> ID：14668804
> 
> 赞同：1
> 
> 时间：2013-02-03T02:10:29.043
> 
> 标签：php, codeigniter, jquery

我创建了一个评论库来处理由 CI 开发的整个网站上的评论

我正在使用 ajax 添加评论，所以我想出了让函数位于处理 ajax的**MY_Controller**

```
public function comment_add()
    {
        echo $this->comments->add(); 
    } 
```

并在**AJAX** Jquery 代码中指出 category 是控制器名称之一，因为任何控制器都可以访问在父控制器中找到的 comment_add()

```
$('#myform').submit(function(e) {

    e.preventDefault();
    dataString=$("#myform").serialize();

  $.ajax({
    type:"POST",
    url: base_url+"snc/category/comment_add",
    data: dataString,
    success: function(data){
        $(data).hide().insertAfter('#inserAfterThis').slideDown('slow');
        $('#comment_new').val('');
        }
    }
  );
}); 
```

在我的**评论库中**

```
public function add()
    { 
        $post_id=$this->get_post_id();
        $post_type=$this->get_post_type();

        if(!$post_id || !$post_type || !$this->user_id)
            return false;

        $id=$this->ci->comments_model->comment_add($this->user_id,$post_id,$post_type);
        if($id)
        {
            return $this->_markup($id);
        }
        else
            return false;
    } 
```

和**评论模型**

```
function comment_add($user_id,$post_id,$post_type)
{

    $data['comment_user_id']=$user_id;
    $data['comment_post_type']=$post_type;
    $data['comment_post_id']=$post_id;
    $data['comment_text']=$this->input->post('comment_new');

    $this->db->insert('comments', $data);

    if($this->db->affected_rows()>0)
        return $this->db->insert_id();
    else
        return false;

} 
```

问题是评论被插入了两次，数据库中也插入了两次**，**即使 x-Debugg 发现他通过 echo`$this->comments->add();` **两次**不知道他为什么要这样做，我已经跟踪了几个小时，谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T18:20:49.277

> 也许它被提交了两次。当您获得 ajax 成功或只是 alet("something") 时尝试取消绑定提交，这样您就会知道该问题是基于 javascript 还是基于 php。

将您的提交功能替换为：

```
$('#myform').submit(function(e) {
    e.preventDefault();
    dataString=$("#myform").serialize();
    $(this).unbind("submit"); //so you will submit only once

  $.ajax({
    type:"POST",
    url: base_url+"snc/category/comment_add",
    data: dataString,
    success: function(data){
        $(data).hide().insertAfter('#inserAfterThis').slideDown('slow');
        $('#comment_new').val('');
        }
    }
  );
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T07:20:42.033

这里缺少的部分是“snc/category/comment_add”控制器……你确定你不是从那个控制器和 MY_Controller 调用的吗？

您也可以发布控制器代码吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T15:19:40.450

发现我已经加载了两次 Jquery 文件，那是我的错，谢谢大家

# javascript - 使用 Javascript not 运算符时出现奇怪的结果

> ID：14668805
> 
> 赞同：1
> 
> 时间：2013-02-03T02:10:35.350
> 
> 标签：javascript, syntax, bit-manipulation

在有人跳进来回答并抨击我问了一个愚蠢的问题之前；我知道 not 运算符的作用，至少在其他语言中它应该将结果从 true 反转为 false，反之亦然。我坚持的事情是我不时得到的奇怪行为。即我的代码中有这个。它没有做我期望它做的事情。

```
_checkOnOff: function(inst) {
    return (!$.suggestBox.onOff || !$.suggestBox._get(inst, 'onOff')) ?  false : true;
}, 
```

我在这里处理的“onOff”变量的实际值为 0 和 1。我假设“！” 操作员将反转它们。

但是，直到我将函数更改为像这样显式声明'== 0'之前，我无法让它工作......

```
_checkOnOff: function(inst) {
    return ($.suggestBox.onOff == 0 || $.suggestBox._get(inst, 'onOff') == 0) ?  false : true;
}, 
```

**编辑：添加信息**$.suggestBox.onOff 和 $.suggestBox._get(inst, 'onOff') 将是 0 或 1。

我的问题是，当 $.suggestBox.onOff 等于 0 时，为什么 !$.suggestBox.onOff 不产生 true ？是Javascript！等价于按位运算符？

**编辑：第二次尝试**

我尝试使用“！！” like 被建议（得到一个布尔值）并发现没有任何变化。这是代码和输出：

```
 console.log('val: ' + $.suggestBox.onOff);  // outputs: 0
        console.log('! : ' + !$.suggestBox.onOff);  // outputs: false
        console.log('!! : ' + !!$.suggestBox.onOff);   //outputs: true
        console.log('!!! : ' + !!!$.suggestBox.onOff);   //outputs: false 
```

如果 $.suggestBox.onOff 是 1 或 0，输出不会改变！！！它仍然是虚假的，真实的，虚假的。到底是怎么回事？！

**编辑：第三次尝试**我发现它与我的变量有关。我不知道如何，但这与它的设置方式有关。好的，请做好准备，我将要告诉您的内容可能会让您大吃一惊，并改变您在键盘上键入的方式。真是不可思议：

```
 //this.onOff = 0;
        console.log('this.onOff: ' + this.onOff);   //output: 0
        console.log('! : ' + ! this.onOff);  //output: false
        console.log('!! : ' + !! this.onOff);   //output: true 
```

如果我取消注释掉“this.onOff = 0”，从而明确地将 this.onOff 分配给文字，它会将输出更改为：

*   0
*   真的
*   错误的

我才知道为什么。我会在答案部分写下来。小线索是变量 $.suggestBox.onOff 的设置方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T02:57:37.073

似乎它`$.suggestBox.onOff`被设置`"0"`为一个字符串，在 JavaScript 中它总是真实的。

既然`"0"`是真的又`0`是假的，你会期望`0 == "0"`是假的，但事实并非如此。

在您的控制台中尝试以下操作：

```
!! "0"; // true
!! 0; // false
0 == "0"; // true 
```

奇怪的？是的。欢迎来到尴尬的 JavaScript 世界！

* * *

要解决此问题，您应该`$.suggestBox.onOff`是一个实际数字，或者即时转换它：

```
_checkOnOff: function(inst) {
    return !! ( +$.suggestBox.onOff && +$.suggestBox._get(inst, 'onOff') );
} 
```

* * *

**更新**：由于您在评论中指出您正在通过文本值设置它，因此在设置时使用它，以便它始终设置为数字：

```
$.suggestBox.onOff = +$(this).val(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T02:57:03.863

我认为你很困惑，因为你否定的是一个字符串，而不是一个数字。将字符串作为布尔值进行评估时，字符串有些不同，并且处理起来有些有趣。

```
!0 
```

是真的，正如预期的那样。

```
!"0" 
```

是假的......所以，问题是“0”是*真的*吗？

我希望我有一个更好的来源（sitepoint 还不错，但它不像 w3 文档那样权威），但是，根据[http://www.sitepoint.com/javascript-truthy-falsy/](http://www.sitepoint.com/javascript-truthy-falsy/)

> 以下值总是虚假的：
> 
> 错误的
> 
> 0（零）
> 
> ""（空字符串）
> 
> 空值
> 
> undefined NaN（一个特殊的数字值，意思是非数字！）
> 
> 所有其他值都是真值，包括“0”（引号中的零）、“false”（引号中的假）、空函数、空数组和空对象。

所以，你所看到的确实是意料之中的。

# c# - 在代码中找不到添加到 mainwindow.xaml 的对象

> ID：14668806
> 
> 赞同：1
> 
> 时间：2013-02-03T02:10:50.877
> 
> 标签：c#, visual-studio-2010, visual-studio, xaml, reference

我在一个新的 C# 项目的主窗口中添加了一个 Image 对象

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="150*" />
        <RowDefinition Height="161*" />
    </Grid.RowDefinitions>
    <Image Grid.RowSpan="2" Height="240" HorizontalAlignment="Left" Margin="80,26,0,0"     Name="image1" Stretch="Fill" VerticalAlignment="Top" Width="320" DataContext="{Binding     ElementName=image1}" />
    <TextBox Grid.Row="1" Height="25" HorizontalAlignment="Left" Margin="155,119,0,0"     Name="kinectStatusTB" VerticalAlignment="Top" Width="111" Text="Disconnected" DataContext="    {Binding}" />
    <TextBlock Grid.Row="1" Height="18" HorizontalAlignment="Left" Margin="80,122,0,0"     Name="textBlock1" Text="Kinect Status" VerticalAlignment="Top" Width="69" />
    </Grid>
</Window> 
```

我在 .cs 代码中的这一行出现错误，提示“当前上下文中不存在名称‘image1’”

```
 image1.Source = BitmapSource.Create(colorFrame.Width, colorFrame.Height,
                96, 96, //DPI
                PixelFormats.Bgr32, //format
                null,
                pixels, //where the data is stored
                stride); 
```

我不知道我是否做错了，我对 C# 还很陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T09:17:34.037

你试过`x:Name`代替`Name`吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T02:49:33.957

尝试将您的 ImageSource 绑定到 UI 上的属性，它比在代码中引用控件更好。

例子：

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525" Name="UI">
 <Grid DataContext="{Binding ElementName=UI}">
        <Grid.RowDefinitions>
            <RowDefinition Height="150*" />
            <RowDefinition Height="161*" />
        </Grid.RowDefinitions>
        <Image Source="{Binding MyImageSource}" Stretch="Fill" Grid.RowSpan="2" Width="320" Height="240" Margin="80,26,0,0" HorizontalAlignment="Left" VerticalAlignment="Top" />
        <TextBox Grid.Row="1" Height="25" HorizontalAlignment="Left" Margin="155,119,0,0"  Name="kinectStatusTB" VerticalAlignment="Top" Width="111" Text="Disconnected" />
        <TextBlock Grid.Row="1" Height="18" HorizontalAlignment="Left" Margin="80,122,0,0"  Name="textBlock1" Text="Kinect Status" VerticalAlignment="Top" Width="69" />
    </Grid>

</Window> 
```

代码：

```
public partial class MainWindow : Window, INotifyPropertyChanged
{
    private ImageSource _myImageSource;

    public MainWindow()
    {
        InitializeComponent();
    }

    public ImageSource MyImageSource
    {
        get { return _myImageSource; }
        set { _myImageSource = value; NotifyPropertyChanged("MyImageSource"); }
    }

    private void SetImage()
    {
        // Your logic

        MyImageSource = BitmapSource.Create(colorFrame.Width, colorFrame.Height,
          96, 96, //DPI
          PixelFormats.Bgr32, //format
          null,
          pixels, //where the data is stored
          stride);
    }

    public event PropertyChangedEventHandler PropertyChanged;
    public void NotifyPropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }
} 
```

# ios - 将 Delegate 设置为 self PaperFoldMenuController

> ID：14668813
> 
> 赞同：0
> 
> 时间：2013-02-03T02:12:17.147
> 
> 标签：ios, objective-c

我正在努力让这个[PaperFoldMenuController 运行](https://github.com/honcheng/PaperFoldMenuController)，虽然它工作正常，但在设置`foldMenuViewController.delegate = self`I am时出现错误`Assigning to 'id<PaperFoldMenuControllerDelegate>' from incompatible type 'DOAppDelgate *const__strong'`。我将它分配在与似乎运行良好的演示完全相同的位置。有任何想法吗？

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
// Override point for customization after application launch.
  [[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleBlackTranslucent];

  UINavigationController *navigationController = (UINavigationController *)self.window.rootViewController;
  DOMasterViewController *controller = (DOMasterViewController *)navigationController.topViewController;
  controller.managedObjectContext = [self managedObjectContext];

  foldMenuViewController = [[DOMenuViewController alloc] initWithMenuWidth:200 numberOfFolds:5];
  foldMenuViewController.delegate = self;
  [self.window setRootViewController:foldMenuViewController];

  NSMutableArray* viewControllers = [NSMutableArray array];
  [viewControllers addObject:navigationController];
  [viewControllers addObject:controller];

  [foldMenuViewController setViewControllers:viewControllers];

  return YES;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T02:22:11.493

你可能需要你的类来实现协议：`PaperFoldMenuControllerDelegate`

```
@interface DOAppDelgate()<PaperFoldMenuControllerDelegate>
- (BOOL)paperFoldMenuController:(PaperFoldMenuController *)paperFoldMenuController shouldSelectViewController:(UIViewController *)viewController;
- (BOOL)paperFoldMenuController:(PaperFoldMenuController *)paperFoldMenuController shouldFoldMenuToRevealViewController:(UIViewController *)viewController;
- (void)paperFoldMenuController:(PaperFoldMenuController *)paperFoldMenuController didSelectViewController:(UIViewController *)viewController;
@end 
```

...然后实现这些方法。

编辑：将实现更改为接口，mybad。

# javascript - Understanding JavaScript Styling

> ID：14668814
> 
> 赞同：0
> 
> 时间：2013-02-03T02:12:17.050
> 
> 标签：javascript

In the following code, from "[Secrets of the JavaScript Ninja](http://www.manning.com/resig/)," why does "Another test." show up in red font?

[http://jsfiddle.net/dtHyc/](http://jsfiddle.net/dtHyc/)

```
<html>
  <head>
    <title>Test Suite</title>
    <script>

      (function() {
        var results;
        this.assert = function assert(value, desc) {
          var li = document.createElement("li");
          li.className = value ? "pass" : "fail";
          li.appendChild(document.createTextNode(desc));
          results.appendChild(li);
          if (!value) {
            li.parentNode.parentNode.className = "fail";
          }
          return li;
        };
        this.test = function test(name, fn) {
          results = document.getElementById("results");
          results = assert(true, name).appendChild(
              document.createElement("ul"));
          fn();
        };
      })();

      window.onload = function() {
        test("A test.", function() {
          assert(true, "First assertion completed");
          assert(true, "Second assertion completed");
          assert(true, "Third assertion completed");
        });
        test("Another test.", function() {
          assert(true, "First test completed");
          assert(false, "Second test failed");
          assert(true, "Third assertion completed");
        });
        test("A third test.", function() {
          assert(null, "fail");
          assert(5, "pass")
        });
      };
    </script>
    <style>
      #results li.pass { color: green; }
      #results li.fail { color: red; }
    </style>
  </head>
  <body>
    <ul id="results"></ul>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T02:14:46.007

Since a string is truthy (`"Second test failed" != false`),

```
assert(false, "Second test failed"); 
```

returns `false`, which invalidates the whole test.

# ruby-on-rails - 加载“mysql”gem 时遇到问题

> ID：14668817
> 
> 赞同：0
> 
> 时间：2013-02-03T02:12:36.087
> 
> 标签：ruby-on-rails, ruby, rubygems

我已经开始编写一个 Ruby 脚本，它将作为 的一部分调用`rake db:seed`，它看起来像这样：

```
require 'rubygems'
require 'mysql' 
```

当我尝试运行它时，我得到：

```
rake aborted!
cannot load such file -- mysql 
```

但是，我可以`require 'mysql'`在 irb 中使用，我可以这样做：

```
$ gem query --local | grep mysql
mysql (2.9.0) 
```

有人知道怎么回事吗？

e：为了好玩，我把它放在`puts Gem.path`脚本的顶部，然后得到：

```
/usr/local/rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1
/home/vagrant/.gem/ruby/1.9.1 
```

将其与`Gem env`：

```
 - /usr/local/rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1
 - /home/vagrant/.gem/ruby/1.9.1 
```

没有骰子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T19:34:07.267

回答。我必须在我的 Gemfile 中添加以下几行：

```
gem 'mysql2' 
```

在那之后，我跑了`bundle install`，它奏效了。

# php - php动态视频地址

> ID：14668826
> 
> 赞同：3
> 
> 时间：2013-02-03T02:13:56.413
> 
> 标签：php, video-streaming, dynamic-url

我想要实现的是为用户创建一个一次性的视频链接。他们观看链接过期的视频的人可以说链接在其原始创建后 1 小时内过期。

问题是如何去做。我可以使用 mod_rewrite 将值动态传递给 PHP 和 SQL

所以让我们说

```
mysite.ltd/get_video/Jn12lM2NMZ21oMW312/11111111/The-Amazing-Spider-Man.mp4 
```

细分：`get_video`是`get_video.php`，`Jn12lM2NMZ21oMW312`是临时令牌，`11111111`是时间戳，`The-Amazing-Spider-Man.mp4`是文件名。

根据我的结论，令牌+时间戳将在视频页面访问时生成并插入 SQL，如果用户共享视频链接，其他人将无法访问它，因为令牌验证将失败，即 get_video 比较当前的哈希 IP用户和 SQL 中的哈希令牌。

这是我对如何做到这一点的看法，但我想知道是否有人有更好的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T02:31:26.903

您甚至不需要保存令牌和时间戳。您想要的是用户 IP 地址的哈希、时间戳和一些不错的长秘密盐（最好为每个用户唯一生成）：

```
$token = somehash($ip_address . $timestamp . $secret);

$url = 'http://xxx/' . $token . '/' . $timestamp . '/filename'; 
```

用户访问 URL 后，您将使用用户数据重放散列。如果相等且请求尚未过期，则提供视频。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T02:37:10.143

你得到了正确的代币部分。令牌应仅对当前会话有效，或者如果此链接用于同一页面上的流式视频，则只需为每个请求生成令牌。为了生成安全令牌，您可以使用一些我更喜欢存储在您的 config.php 中的秘密 salt 变量，基本上任何框架都会为您生成 salt。

通常您将带有 ID 的视频/文件名存储在数据库中。所以构造文件路径，验证令牌，你可以强制下载标题和[readfile()](http://php.net/manual/en/function.readfile.php)签出第一条评论，那里有很多代码。这样，没有人会知道您文件的位置。

# ajax - Rails 3 - AJAX REST 新表单在单个用户单击时双重提交

> ID：14668828
> 
> 赞同：1
> 
> 时间：2013-02-03T02:14:01.137
> 
> 标签：ajax, ruby-on-rails-3

我有一个标准表单，用于 AJAX 提交的控制器的新操作。每次用户单击提交按钮或按一次回车，表单立即提交两次，创建两个相同的对象。

模型上没有验证，并且在某些情况下是合适的。

表单视图如下所示：

```
<%= simple_form_for @contact, remote: true do |f| %>
    <table>
      <tr><td class="cell-right-align">First Name</td><td><%= f.text_field :first_name %></td></tr>
      <tr><td class="cell-right-align">Last Name</td><td><%= f.text_field :last_name %></td></tr>
      <tr><td></td><td><%= f.submit "Create Contact" %></td></tr>
  </table>
<% end %> 
```

它的控制器动作：

```
def create
  respond_to do |format|
    if @contact.save
      format.js { render 'search_result' }
    else
      format.js { render 'new' } 
    end
  end
end 
```

创建操作的日志显示，在同一秒内有两个 POST 操作，两者都是相同的。

如何停止双重 POST？我试过添加`:disable_with => 'Saving...'`到提交按钮，但没有效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T05:38:04.153

这可能是资产管道问题。您能否在生产模式下运行应用程序并验证资产是否已预编译。我怀疑用于处理提交的 javascript 是重复的。从而将两个相同的事件绑定到表单提交。

# android - Android 如何删除一个 android sqlite 数据库条目

> ID：14668831
> 
> 赞同：0
> 
> 时间：2013-02-03T02:14:25.787
> 
> 标签：android, sqlite

这适用于插入一行

```
 public long insertRows(Double lat, Double log, String mdate,
             String mycomment, String name) {
        ContentValues value=new ContentValues();
            value.put(COLUMN2,lat);
           //System.out.println(COLUMN2+lat);
            value.put(COLUMN3, log);
           //System.out.println(COLUMN3+log);
            value.put(COLUMN4, mdate);
           //System.out.println(COLUMN4+mdate);
           value.put(COLUMN5, mycomment);
           //String mycomment = null;
           //System.out.println(COLUMN5+mycomment);
           value.put(COLUMN6, name);
           return db.insert(TABLENAME,null,value);} 
```

但我无法以编程方式删除一行。

如果需要，我可以提供更多代码或信息，非常感谢任何帮助

这就是我目前使用的东西，但我仍然在更新 listactivity 时遇到问题

```
 public boolean deleteEntry(long Id) {Id = GpsListactivity.rowid;   
             System.out.println("GPSDATABASE "+ TABLENAME + KEY_ROWID + "=" +Id);
             return db.delete(TABLENAME,KEY_ROWID + "="+Id,null) > 0;} 
```

// 这是更新方法

```
 public boolean update(long Id, Double lat, Double log,
             String mdate,String mycomment, String name) {
        ContentValues updateValues = createContentValues(
             lat,log,mdate,mycomment,name);
        return db.update(TABLENAME, updateValues,"locationId=?" +Id,null) > 0; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T02:43:16.927

你可以使用方法`delete(String table, String whereClause, String[] whereArgs)`。例如：

```
String whereClause = "COLUMN4 = 'value'";
db.delete(TABLENAME, whereClause, null); 
```

要删除特定行，您将必须知道有关该行的信息，使其唯一（例如该行的主键或其列中的数据组合）。

您还可以参考[`SQLiteDatabase`](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html)文档以获取更多信息。

# jquery - 自定义 jQuery 排序功能在 iPad (iOS) 上不起作用

> ID：14668833
> 
> 赞同：1
> 
> 时间：2013-02-03T02:14:36.380
> 
> 标签：jquery, ios, wordpress, sorting

我已经对这个细节进行了几个小时的研究，但我找不到解决方案。

我在一个房地产网站上工作，它有一个基于 JQuery 的功能，允许您按参数（价格、类型、卧室等）对列出的属性进行排序。我创建了一个启用此类功能的自定义排序功能。

在计算机上它工作得很好，但是当我在 iOS 上测试它时，它就不行了。

起初，我认为是 jQuery 不工作，但在运行一些简单的测试后，我注意到 jQuery 中的所有内容都可以正常工作，并且它解析了我需要解析的信息。不工作的部分只是排序功能。

所以我对这个原因有点困惑，我想知道是否有人有一些可能有帮助的意见。

这些是前端的 HTML 表单。

```
 <div id="filterControls">
  <select onclick=”” id="sortOrd">
    <option onclick=”” value="asc">ASC ↑&lt;/option>
    <option onclick=”” value="desc">DESC ↓&lt;/option>
  </select>
  <form id="filter">
    <label>Sort items by: </label>
      <input type="button" onclick=”” name="sort" value="type" class="first">   
      <input type="button" onclick=”” name="sort" value="price" class="active">
      <input type="button" onclick=”” name="sort" value="bedrooms"> 
      <input type="button" onclick=”” name="sort" value="location" class="last">        
  </form>

    <div class="clear"></div>
  </div> 
```

这是 jQuery 部分：

```
var j$ = jQuery.noConflict();
j$(document).ready(function() {

//alert("I'm alive!");

// CUT THE LENGHT OF THE ADDRESS TEXT
j$('.property_title a').each(function() {
var jthis = j$(this);
jthis.text( jthis.text().slice(0,25) );
jthis.append(" ...");
});

// Custom sorting plugin

// SORT BY PRICE WHEN FIRST LOADING

// accending sort
function asc_sort(a, b){
return (j$(b).find('div[data-type='+ currentSort +']').text()) < (j$(a).find('div[data-type='+ currentSort +']').text());    
}

var currentSort = j$('#filter input[class="active"]').val();

//alert(currentSort);

j$("ul#properties li").sort(asc_sort).appendTo('ul#properties');

// USER CAN CHANGE THE SORTING BASE PARAMETER

var ua = navigator.userAgent,
event = (ua.match(/iPad/i)) ? "touchstart" : "click";

j$('#filter input[type="button"]').on("click", function(e){

// == Sorting Types 

// accending sort
function asc_sort(a, b){
return (j$(b).find('div[data-type='+ order +']').text()) < (j$(a).find('div[data-type='+ order +']').text());    
}

// decending sort
function dec_sort(a, b){
return (j$(b).find('div[data-type='+ order +']').text()) > (j$(a).find('div[data-type='+ order +']').text());      
}

// deactivate other buttons
j$('#filter input[type="button"]').removeClass("active");

//activate selected button
j$(this).addClass("active");
//e.preventDefault();

// get info from forms
var sorting = j$('#sortOrd').val();  
var order = j$(this).val();
//alert (order);

// define type of sorting to do
if (sorting == 'asc'){   
j$("ul#properties li").sort(asc_sort).appendTo('ul#properties');
}

if (sorting == 'desc'){
j$("ul#properties li").sort(dec_sort).appendTo('ul#properties');
}

});

// ASCEND OR DESCEND?

j$('#sortOrd').change(function(event){

//alert("Click event on Select has occurred!");
j$("option:selected", j$(this)).each(function(){

var newSorting = (this).value;
//alert (newSorting);   
var currentSort = j$('#filter input[class="active"]').val();
//var newSorting = j$(this).val(); 
// define type of sorting to do

if (newSorting == 'asc'){   
j$("ul#properties li").sort(asc_sort).appendTo('ul#properties');
}

if (newSorting == 'desc'){
j$("ul#properties li").sort(dec_sort).appendTo('ul#properties');
}

// == Sorting Types 

// accending sort
function asc_sort(a, b){
return (j$(b).find('div[data-type='+ currentSort +']').text()) < (j$(a).find('div[data-type='+ currentSort +']').text());    
}

// decending sort
function dec_sort(a, b){
return (j$(b).find('div[data-type='+ currentSort +']').text()) > (j$(a).find('div[data-type='+ currentSort +']').text());      
}

});

});
}); 
```

在做了几次测试之后，我最好的假设是这是无法正常工作的部分，因为在 iOS 上加载时它不会自动对它们进行排序，而且我认为其他一切似乎都工作正常：

```
 // == Sorting Types 

    // accending sort
    function asc_sort(a, b){
    return (j$(b).find('div[data-type='+ currentSort +']').text()) < (j$(a).find('div[data-type='+ currentSort +']').text());    
    }

    // decending sort
    function dec_sort(a, b){
    return (j$(b).find('div[data-type='+ currentSort +']').text()) > (j$(a).find('div[data-type='+ currentSort +']').text());      
    } 
```

希望你们能帮助我。我感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-10T07:08:38.993

该错误存在于您的排序功能`asc_sort()`和`dec_sort()`. 他们正在返回`true`/ `false`-values，但他们应该返回一个数字。数字的符号表示`sort()`是否应该更改订单。布尔值`true`，`false`而是被解释为 1 和 0，而 0 表示相等的值。排序算法可能会或可能不会交换相等的值。

正确的排序函数类似于：

```
// accending sort
function asc_sort(a, b){
    return (j$(b).find('div[data-type='+ currentSort +']').text()) < (j$(a).find('div[data-type='+ currentSort +']').text() ? 1 : -1);    
}

// decending sort
function dec_sort(a, b){
    return (j$(b).find('div[data-type='+ currentSort +']').text()) > (j$(a).find('div[data-type='+ currentSort +']').text() ? 1 : -1);
} 
```

请注意，返回值现在采用形式`(condition ? 1 : -1)`，因此这些函数始终返回 1 或 -1。

# sql-server - 无法从 Azure 网站访问 SQL Azure DB，即使本地网站上的连接字符串相同

> ID：14668836
> 
> 赞同：11
> 
> 时间：2013-02-03T02:15:13.547
> 
> 标签：sql-server, azure, asp.net-mvc-4

我最近在 Azure 上建立了我的第一个网站。目前，它基本上只是带有 Home 和 Account 控制器的标准 MVC4 模板网站。在 Azure 中，我有一个网站和一个 SQL 数据库。我可以从 SSMS 访问 SQL Azure 数据库，并设置了我的网站要使用的登录名和用户。

在我的开发环境中，指向我的开发数据库，​​我可以正常访问 /Account/Login 页面。我可以注册，并且可以在本地数据库中看到新用户。我还可以更改连接字符串以将我的开发网站指向我的 SQL Azure DB，然后我可以再次访问 /Account/Login 并注册新用户。然后我可以在 SQL Azure DB 中看到这些新用户。

当我将网站部署到 Azure 时，就会出现问题。我有一个与我的 publishsettings 文件关联的转换配置，当将站点发布到 Azure 时，我可以在输出窗口中看到在部署期间应用了此转换。这会将本地开发数据库连接字符串修改为 SQL Azure 连接字符串。我还验证了此 SQL Azure 连接字符串在实际部署的 web.config 文件中（使用 FileZilla FTP 检索实际部署的 web.config）。我可以在 [mysite].AzureWebsites.net 上访问我网站的主页，但是当我单击登录链接转到 /Account/Login 页面时，我收到以下错误：

```
[ArgumentException: Format of the initialization string does not conform to specification starting at index 0.]
System.Data.Common.DbConnectionOptions.GetKeyValuePair(String connectionString, Int32 currentPosition, StringBuilder buffer, Boolean useOdbcRules, String& keyname, String& keyvalue) +5313265
System.Data.Common.DbConnectionOptions.ParseInternal(Hashtable parsetable, String connectionString, Boolean buildChain, Hashtable synonyms, Boolean firstKey) +124
System.Data.Common.DbConnectionOptions..ctor(String connectionString, Hashtable synonyms, Boolean useOdbcRules) +95
System.Data.SqlClient.SqlConnectionString..ctor(String connectionString) +59
System.Data.SqlClient.SqlConnectionFactory.CreateConnectionOptions(String connectionString, DbConnectionOptions previous) +24
System.Data.ProviderBase.DbConnectionFactory.GetConnectionPoolGroup(DbConnectionPoolKey key, DbConnectionPoolGroupOptions poolOptions, DbConnectionOptions& userConnectionOptions) +167
System.Data.SqlClient.SqlConnection.ConnectionString_Set(DbConnectionPoolKey key) +61
System.Data.SqlClient.SqlConnection.set_ConnectionString(String value) +66

System.Data.Entity.Internal.LazyInternalConnection.InitializeFromConnectionStringSetting(ConnectionStringSettings appConfigConnection) +122
System.Data.Entity.Internal.LazyInternalConnection.TryInitializeFromAppConfig(String name, AppConfig config) +32
System.Data.Entity.Internal.LazyInternalConnection.Initialize() +127
System.Data.Entity.Internal.LazyInternalConnection.get_ProviderName() +13
System.Data.Entity.Internal.LazyInternalContext.InitializeContext() +346
System.Data.Entity.Internal.InternalContext.CreateObjectContextForDdlOps() +17
System.Data.Entity.Database.Exists() +36
[MyWebsite].Filters.SimpleMembershipInitializer..ctor() +105 
```

这似乎表明我的连接字符串存在问题，但就像我之前提到的，这个完全相同的连接字符串在我的本地网站上工作。

我认为该问题可能与防火墙有关，但我检查了 Azure 管理门户中的设置，并应用了 Windows Azure 服务防火墙规则以允许该访问。此外，我尝试删除本地计算机访问 SQL Azure DB 的防火墙规则，看看我是否会得到类似的异常，但抛出的异常显然与防火墙相关。

我还尝试通过 Azure 管理门户添加 SQL Azure 连接字符串（尽管我没有看到如何指定提供程序） - 不用说，我得到了与上面提到的相同的“初始化格式...”异常.

我在 web.config 中的连接字符串采用以下格式：

```
<add name="[my connection name]"
     connectionString="Server=tcp:abc123.database.windows.net,1433;Database=[my database];User ID=[my login]@abc123;Password=[my password];Trusted_Connection=False;Encrypt=True;Connection Timeout=30;" 
     providerName="System.Data.SqlClient" /> 
```

任何建议都会非常受欢迎。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T21:32:46.380

我终于明白了。直到现在我才意识到 web.config 中有 2 个连接字符串最终部署到 Windows Azure 网站 - 我自己的自定义连接字符串，但还有另一个 DefaultConnection 连接字符串，其格式如下：

```
<add name="DefaultConnection" connectionString="DefaultConnection_ConnectionString" providerName="System.Data.SqlClient" /> 
```

*   显然，不是一个有效的连接字符串（因此上面的格式异常）。当您使用 FTP 从 Azure 网站下载实际的 web.config 时，您可以看到这一点。

此默认连接字符串不在 web.configs 中的任何位置或我的解决方案中的各种转换中。在发布期间查看输出窗口，有许多转换应用于 web.config。我浏览了在构建/发布周期中生成的各种版本的文件，其中没有一个包含 DefaultConnection 连接字符串，甚至在 obj\Release\Package\PackageTmp\ 文件夹中也没有。所以我猜测 Web Deploy 阶段的某些内容是将其作为 web.config 的最后修改插入。在 publishsettings 文件中有一个 MSDeployParameterValue 元素，它提到了连接字符串和 web.config - 我猜可能是这样。

在 AccountModels.cs 文件中，引用了这个 DefaultConnection：

```
public UsersContext()
: base("DefaultConnection")
{
} 
```

这就是选择特定连接字符串的方式。**将此参数更改为您的自定义连接字符串名称可确保您的自定义数据库用于各种帐户内容，并解决上面看到的格式异常。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-29T18:28:01.503

我知道这是一篇旧帖子，但我想分享我的发现。在我的 .pubxml 文件中，它存储了我的 localdb 连接字符串，并且不会在任何构建或发布时更新。我必须使用我的 azure DB 连接字符串手动更新发布文件才能使其正常工作。希望这有助于节省某人的时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T17:08:30.183

**关于 SQL Azure 的连接字符串**

*   SQL Azure 数据库服务仅适用于 TCP 端口 1433。确保您的防火墙允许 TCP 端口 1433 上的传出 TCP 通信。

*   SQL Azure 不支持 Windows 身份验证。受信任的连接将始终设置为 False。

*   SQL Azure 不支持未加密的连接。您需要在连接字符串中指定要加密连接的内容。

*   官方不支持使用 OLE DB 连接到 SQL Azure。

**标准方式**

```
Server=tcp:[serverName].database.windows.net;Database=myDataBase;
User ID=[LoginForDb]@[serverName];Password=myPassword;Trusted_Connection=False;Encrypt=True; 
```

> 使用“用户名@服务器名”作为用户 ID 参数。

有关更多信息，请查看[**SQL Azure 的连接字符串**](http://www.connectionstrings.com/sql-azure)

我希望这对你有帮助。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-03T16:38:27.933

尝试删除“Encrypt=True;” 或尝试添加“TrustServerCertificate=True;” - 阅读[SqlConnection.ConnectionString 属性](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.connectionstring.aspx)以获取更多详细信息，但基本上：

> 从 .NET Framework 4.5 开始，当 TrustServerCertificate 为 false（**默认值**）且 Encrypt 为 true 时，SQL Server SSL 证书中的服务器名称（或 IP 地址）必须与连接字符串中指定的服务器名称（或 IP 地址）完全匹配.

# scala - 在 JRuby 中访问 Scala 数据结构

> ID：14668837
> 
> 赞同：6
> 
> 时间：2013-02-03T02:15:15.537
> 
> 标签：scala, interop, jruby

从 JRuby 访问 Java 数据结构时，它们之间似乎有一些神奇的转换；它们看起来就像普通的红宝石地图和数组一样工作。但是，Scala 数据结构没有。在搜索 JRuby / Scala 互操作时，我发现很少。例如，您将如何迭代 Scala`Map`和`List`类型？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T05:10:27.243

你当然可以。但这有点绕圈子。对于列表：

```
require "/usr/share/scala/lib/scala-library.jar" # load the scala lib
Java::scala.collection.immutable::List.empty.send("::", 1)
  .map(lambda{|e|e+1},
        Java::scala.collection.immutable.List.canBuildFrom) # by lopex 
```

现在你在 jruby 中有一个 scala 列表。您可以编写一些不错的 Ruby API 来为您填充隐式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-03T04:07:11.630

如果“迭代”是指使用 HOF（高阶函数），例如`map`、`reduce`、等`filter`，`collect`那么您将遇到麻烦。这是可能的，但是您在 Scala 中获得的语​​法优雅是因为编写函数文字非常容易。当您编写如下内容时，编译器正在为您做什么：

```
scala> val l1 = List(1, 2, 3)
l1: List[Int] = List(1, 2, 3)

scala> l1.map(i => i * i)
res0: List[Int] = List(1, 4, 9) 
```

... 是创建并实例化一个子类，`Function1[Int, Int]`其`apply`方法采用单个`Int`参数并评估函数文字 ( `(i => i * i)`) 的主体。

要使用任何接受函数的 Scala 方法，您必须这样做。就像是：

```
scala> class ISquaredF extends Function1[Int, Int] { def apply(i: Int) = i * i }
defined class ISquaredF

scala> (new ISquaredF)(5)
res1: Int = 25

scala> val isf1 = new ISquaredF
isf1: ISquaredF = <function1>

scala> l1.map(isf1)
res2: List[Int] = List(1, 4, 9) 
```

总的来说，使用 Scala 中的 Java 库比使用任何其他 JVM 语言中的 Scala 代码要容易得多。这就是为什么像 Akka 这样想要同时支持 Scala 和 Java 客户端的系统有特殊的 Java API 来避开 Scala 语言的这些部分。

# java - 仅显示 1 个结果

> ID：14668840
> 
> 赞同：-4
> 
> 时间：2013-02-03T02:15:49.413
> 
> 标签：java

我有这个家庭作业问题，我遇到的问题是当我运行程序并输入值时，我只得到一个结果，例如，如果我输入 30 表示我得到这个“30 14730.576123040439”30 次的年数。关于我可以做些什么来获得正确的结果来显示的任何想法（即第 1-30 年而不是第 30 年的正确结果 30 次）。

```
 public class FinancialApp57 
   {
       public static void main(String[] args) 
       {
           //variables
           double intRate, invAmt;
           int yrs;
           String inv = JOptionPane.showInputDialog("Enter an investment amount:");
           invAmt = Double.parseDouble(inv);
           String rate = JOptionPane.showInputDialog("Enter an intrest rate: ");
           intRate = Double.parseDouble(rate);
           String yr = JOptionPane.showInputDialog
                   ("Enter the lenght of investment(in years): ");
           yrs = Integer.parseInt(yr);

           futureInvestmentValue(invAmt,intRate/12,yrs);
       }

       public static double futureInvestmentValue
               (double investmentAmount,double monthlyIntrestRate,int years)
       {
           double FutureValue = 0;
           int i = 1;
           FutureValue=
                   investmentAmount*Math.pow((1+monthlyIntrestRate/100),years*12);

           while(i<years)
           {            
               System.out.println(years+"\t" + FutureValue);
               i++;
           }
           return FutureValue;

       }
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T02:18:42.657

您没有重新计算 FutureValue 30 次，您只计算一次，然后打印 30 次。将 FutureValue 的计算放入循环中并相应地调整其参数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T02:42:06.123

您的代码打印的值是“年”，当您输入“30”，然后 int 年 = 30，如果您想要类似 (1,2,3,4,5....)，您应该打印“i”而不是“年”，所以必须是：

```
while(i<=years) {            
    System.out.println(i+"\t" + FutureValue);
    i++;
}
return FutureValue; 
```

# unix - 如果注册人选择与 unix 命令匹配的用户名，会有风险吗？

> ID：14668841
> 
> 赞同：0
> 
> 时间：2013-02-03T02:16:13.077
> 
> 标签：unix, directory, filenames

在我的应用程序中，我要求用户使用唯一名称进行注册。该应用程序为他们创建一个具有该名称的目录，然后他们可以使用该目录，保存文件等。

我并没有真正考虑过筛选除字母数字以外的名称。但是，我在某个地方遇到了一个线程，而不是说要确保不创建与 unix 命令名称匹配的目录名称。

这是合法的风险吗？如果是这样，如何以编程方式筛选这种情况？我也很好奇这样的场景可能会如何说明问题（利用？）。当然，最后一部分只是学术兴趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T02:35:57.947

一般来说，没关系（没有明显的安全风险）。大多数软件，例如 shell，根据一些环境变量（如 PATH）搜索 unix 命令。因此，即使您创建的目录与“cd”之类的 unix 命令匹配，它也只能用作其他 unix 命令的参数，例如**cd cd**。

但是，如果另一个应用程序基于搜索某些目录等其他方法搜索 unix 命令，则可能会导致安全漏洞。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T02:36:19.137

我认为这是一种风险的唯一方法是，如果您要转身通过命令行功能处理这些用户名。您需要小心地将用户名转义为可能被解释为命令的任何地方......尽管在我的脑海中，使用严格的字母数字用户名，您必须很麻烦才能运行陷入这样的风险。

如果您决定无论如何要确保用户名与创建过程路径上的应用程序不匹配，您可以从您的应用程序环境中退出，并评估`which $prospectiveUsername`. 如果它返回空字符串以外的任何内容，则您知道用户名是进程路径上的应用程序。

**注意：**在上述情况下，请确保在调用 shell 命令**之前清理用户名。**否则，如果用户决定将她的用户名输入为“janedoe; rm -rf /”，则*确实存在安全风险。*

# azure - Windows Azure Sql 数据库管理门户错误

> ID：14668844
> 
> 赞同：2
> 
> 时间：2013-02-03T02:16:59.140
> 
> 标签：azure, azure-sql-database

我做了一些研究，我似乎找不到任何类似的东西。

我有一个来自 Windows Azure 的 SQL 数据库，里面有几个表。我可以很好地登录并查看所有表的所有表数据，除了特定表。

当我单击该特定表的“数据”部分时，我的屏幕完全空白，然后除了重新开始之外我无能为力。对此有什么想法吗？（我安装了最新版本的 Silverlight 并且我尝试过使用 Chrome、Firefox 和 Opera）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T15:05:45.423

您可以使用**SQL Server Management Studio (SSMS) 2008 R2**进行浏览或使用 SQL azure 数据库执行的任何任务，以替代您的方法。

使用 SQL Server Management Studio 2008 R2 管理 SQL Azure 示例屏幕如下。

![在此处输入图像描述](../Images/13cbd9b1cdcec6ad51da14c72b4af745.png)

有关更多信息，请查看[**SQL Azure 开发入门**](http://msdn.microsoft.com/en-us/magazine/gg309175.aspx)

**更新**

如果你要使用 express 版本，那么你必须在 Win 8 中使用 SQL 2012 express。

看看这个[**SQL Express Edition 2012**](http://www.microsoft.com/en-us/sqlserver/editions/2012-editions/express.aspx)

我希望这对你有帮助。

# go - Go中的列表目录

> ID：14668850
> 
> 赞同：252
> 
> 时间：2013-02-03T02:17:54.403
> 
> 标签：go

我一直在试图弄清楚如何简单地列出 Go 中单个目录中的文件和文件夹。

我找到了[`filepath.Walk`](http://golang.org/pkg/path/filepath/#Walk)，但它会自动进入子目录，这是我不想要的。我所有的其他搜索都没有好转。

我确信这个功能是存在的，但是真的很难找到。如果有人知道我应该看哪里，请告诉我。谢谢。

* * *

## 回答 #1

> 赞同：430
> 
> 时间：2013-02-03T02:29:44.983

您可以尝试使用包中的[ReadDir](http://golang.org/pkg/io/ioutil/#ReadDir)函数`io/ioutil`。根据文档：

> ReadDir 读取由 dirname 命名的目录并返回已排序的目录条目列表。

生成的切片包含类型，这些类型提供[此处](http://golang.org/pkg/os/#FileInfo)`os.FileInfo`列出的方法。这是一个基本示例，列出了当前目录中所有内容的名称（包括文件夹但没有特别标记 - 您可以使用该方法检查项目是否为文件夹）：`IsDir()`

```
package main

import (
    "fmt"
    "io/ioutil"
     "log"
)

func main() {
    files, err := ioutil.ReadDir("./")
    if err != nil {
        log.Fatal(err)
    }

    for _, f := range files {
            fmt.Println(f.Name())
    }
} 
```

* * *

## 回答 #2

> 赞同：96
> 
> 时间：2018-03-09T15:07:26.097

我们可以使用各种 golang 标准库函数获取文件系统上文件夹内的文件列表。

1.  **文件路径.Walk**
2.  **ioutil.ReadDir**
3.  **os.File.Readdir**

```
 package main

import (
    "fmt"
    "io/ioutil"
    "log"
    "os"
    "path/filepath"
)

func main() {
    var (
        root  string
        files []string
        err   error
    )

    root := "/home/manigandan/golang/samples"
    // filepath.Walk
    files, err = FilePathWalkDir(root)
    if err != nil {
        panic(err)
    }
    // ioutil.ReadDir
    files, err = IOReadDir(root)
    if err != nil {
        panic(err)
    }
    //os.File.Readdir
    files, err = OSReadDir(root)
    if err != nil {
        panic(err)
    }

    for _, file := range files {
        fmt.Println(file)
    }
} 
```

1.  **使用 filepath.Walk**

> 该`path/filepath`软件包提供了一种方便的方法来扫描目录中的所有文件，它会自动扫描目录中的每个子目录。

```
func FilePathWalkDir(root string) ([]string, error) {
    var files []string
    err := filepath.Walk(root, func(path string, info os.FileInfo, err error) error {
        if !info.IsDir() {
            files = append(files, path)
        }
        return nil
    })
    return files, err
} 
```

2.  **使用 ioutil.ReadDir**

> `ioutil.ReadDir`读取由 dirname 命名的目录并返回按文件名排序的目录条目列表。

```
func IOReadDir(root string) ([]string, error) {
    var files []string
    fileInfo, err := ioutil.ReadDir(root)
    if err != nil {
        return files, err
    }

    for _, file := range fileInfo {
        files = append(files, file.Name())
    }
    return files, nil
} 
```

3.  **使用 os.File.Readdir**

> Readdir 读取与 file 关联的目录的内容，并按目录顺序返回最多 n 个 FileInfo 值的切片，这将由 Lstat 返回。对同一文件的后续调用将产生更多 FileInfos。

```
func OSReadDir(root string) ([]string, error) {
    var files []string
    f, err := os.Open(root)
    if err != nil {
        return files, err
    }
    fileInfo, err := f.Readdir(-1)
    f.Close()
    if err != nil {
        return files, err
    }

    for _, file := range fileInfo {
        files = append(files, file.Name())
    }
    return files, nil
} 
```

基准测试结果。

[![基准分数](../Images/8bf493aa61dcc620c92fa99927290392.png)](https://i.stack.imgur.com/7SAu5.png)

获取有关此[博客文章的更多详细信息](https://medium.com/@manigandand/list-files-in-a-directory-using-golang-963b1df11304)

* * *

## 回答 #3

> 赞同：81
> 
> 时间：2013-08-20T07:04:23.470

更简单，使用`path/filepath`：

```
package main    

import (
    "fmt"
    "log"
    "path/filepath"
)

func main() {
    files, err := filepath.Glob("*")
    if err != nil {
        log.Fatal(err)
    }
    fmt.Println(files) // contains a list of all files in the current directory
} 
```

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2013-02-03T11:58:22.823

`ioutil.ReadDir`是一个很好的发现，但是如果您单击并查看源代码，您会发现它调用了[os.File 的 Readdir](http://golang.org/pkg/os/#File.Readdir)方法。如果您对目录顺序没问题并且不需要对列表进行排序，那么这个 Readdir 方法就是您所需要的。

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2020-10-20T11:07:03.053

从 Go 1.16 开始，您可以使用[os.ReadDir](https://tip.golang.org/pkg/io/os/#ReadDir)函数。

> `func ReadDir(name string) ([]DirEntry, error)`

它读取给定目录并返回一个`DirEntry`切片，其中包含按文件名排序的目录条目。

这是一个乐观函数，因此，当读取目录条目时发生错误时，它会尝试返回一个切片，其中包含错误前的文件名。

```
package main

import (
    "fmt"
    "log"
    "os"
)

func main() {
    files, err := os.ReadDir(".")
    if err != nil {
        log.Fatal(err)
    }

    for _, file := range files {
        fmt.Println(file.Name())
    }
} 
```

感兴趣的：[Go 1.17](https://twitter.com/golang/status/1403016905179422723)（2021 年第三季度）包括[`fs.FileInfoToDirEntry()`](https://tip.golang.org/pkg/io/fs/#FileInfoToDirEntry)：

> ```
> func FileInfoToDirEntry(info FileInfo) DirEntry 
> ```
> 
> `FileInfoToDirEntry`返回 a`DirEntry`从 中返回信息`info`。
> 如果`info`为 nil，则`FileInfoToDirEntry`返回 nil。

* * *

### 背景

Go 1.16 (Q1 2021) 将提出[CL 243908](https://go-review.googlesource.com/c/go/+/243908/7)和[CL 243914](https://go-review.googlesource.com/c/go/+/243914/)的[`ReadDir`功能](https://go-review.googlesource.com/c/go/+/243914/5/src/io/fs/readdir.go)，基于[`FS`接口](https://go-review.googlesource.com/c/go/+/243908/7/src/io/fs/fs.go)：

```
// An FS provides access to a hierarchical file system.
//
// The FS interface is the minimum implementation required of the file system.
// A file system may implement additional interfaces,
// such as fsutil.ReadFileFS, to provide additional or optimized functionality.
// See io/fsutil for details.
type FS interface {
    // Open opens the named file.
    //
    // When Open returns an error, it should be of type *PathError
    // with the Op field set to "open", the Path field set to name,
    // and the Err field describing the problem.
    //
    // Open should reject attempts to open names that do not satisfy
    // ValidPath(name), returning a *PathError with Err set to
    // ErrInvalid or ErrNotExist.
    Open(name string) (File, error)
} 
```

这允许[“操作系统：轻量级目录读取的添加`ReadDir`方法”](https://github.com/golang/go/issues/41467)：
参见[提交 a4ede9f](https://github.com/golang/go/commit/a4ede9f9a6254360d39d0f45aec133c355ac6b2a)：

```
// ReadDir reads the contents of the directory associated with the file f
// and returns a slice of DirEntry values in directory order.
// Subsequent calls on the same file will yield later DirEntry records in the directory.
//
// If n > 0, ReadDir returns at most n DirEntry records.
// In this case, if ReadDir returns an empty slice, it will return an error explaining why.
// At the end of a directory, the error is io.EOF.
//
// If n <= 0, ReadDir returns all the DirEntry records remaining in the directory.
// When it succeeds, it returns a nil error (not io.EOF).
func (f *File) ReadDir(n int) ([]DirEntry, error) 

// A DirEntry is an entry read from a directory (using the ReadDir method).
type DirEntry interface {
    // Name returns the name of the file (or subdirectory) described by the entry.
    // This name is only the final element of the path, not the entire path.
    // For example, Name would return "hello.go" not "/home/gopher/hello.go".
    Name() string

    // IsDir reports whether the entry describes a subdirectory.
    IsDir() bool

    // Type returns the type bits for the entry.
    // The type bits are a subset of the usual FileMode bits, those returned by the FileMode.Type method.
    Type() os.FileMode

    // Info returns the FileInfo for the file or subdirectory described by the entry.
    // The returned FileInfo may be from the time of the original directory read
    // or from the time of the call to Info. If the file has been removed or renamed
    // since the directory read, Info may return an error satisfying errors.Is(err, ErrNotExist).
    // If the entry denotes a symbolic link, Info reports the information about the link itself,
    // not the link's target.
    Info() (FileInfo, error)
} 
```

[`src/os/os_test.go#testReadDir()`](https://github.com/golang/go/blob/a4ede9f9a6254360d39d0f45aec133c355ac6b2a/src/os/os_test.go#L364-L410)说明它的用法：

```
 file, err := Open(dir)
    if err != nil {
        t.Fatalf("open %q failed: %v", dir, err)
    }
    defer file.Close()
    s, err2 := file.ReadDir(-1)
    if err2 != nil {
        t.Fatalf("ReadDir %q failed: %v", dir, err2)
    } 
```

* * *

[Ben Hoyt](https://stackoverflow.com/users/68707/ben-hoyt)在Go 1.16[的评论](https://stackoverflow.com/questions/14668850/list-directory-in-go/64443904#comment116511944_64443904)中指出[`os.ReadDir`](https://github.com/golang/go/blame/3d913a926675d8d6fcdc3cfaefd3136dfeba06e1/src/os/dir.go#L109)：

> `os.ReadDir(path string) ([]os.DirEntry, error)`，您无需`Open`跳舞就可以直接调用它。
> 因此，您可能可以将其缩短为 just `os.ReadDir`，因为这是大多数人会调用的具体函数。

请参阅[提交 3d913a9](https://github.com/golang/go/commit/3d913a926675d8d6fcdc3cfaefd3136dfeba06e1)（2020 年 12 月）：

> ## `os`: 添加`ReadFile`, `WriteFile`, `CreateTemp`(was `TempFile`), `MkdirTemp`(was `TempDir`) from`io/ioutil`
> 
> `io/ioutil`是定义不明确的助手集合。
> 
> [提案 #40025](https://github.com/golang/go/issues/40025)将通用 I/O 助手移到了 io。[提案 #42026](https://github.com/golang/go/issues/42026)的此 CL将特定于操作系统的帮助程序移至，从而弃用`os`了整个包。`io/ioutil`

> `os.ReadDir`返回`[]DirEntry`，与`ioutil.ReadDir`'s相比`[]FileInfo`。
> （提供返回的助手`[]DirEntry`是此更改的主要动机之一。）

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2020-02-03T18:49:59.067

根据您的描述，您可能想要的是[os.Readdirnames](https://golang.org/pkg/os/#File.Readdirnames)。

> `func (f *File) Readdirnames(n int) (names []string, err error)`
> 
> Readdirnames 读取与文件关联的目录的内容，并按目录顺序返回目录中最多 n 个文件名的切片。对同一文件的后续调用将产生更多名称。
> 
> ...
> 
> 如果 n <= 0，Readdirnames 在单个切片中返回目录中的所有名称。

片段：

```
file, err := os.Open(path)
if err != nil {
    return err
}
defer file.Close()
names, err := file.Readdirnames(0)
if err != nil {
    return err
}
fmt.Println(names) 
```

归功于[SquattingSlavInTracksuit](https://stackoverflow.com/users/7595633/squattingslavintracksuit)的[评论](https://stackoverflow.com/questions/14668850/list-directory-in-go#comment103102764_14668907)；如果可以的话，我会建议将他们的评论推广到答案。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-11-12T14:33:27.647

使用递归打印目录中所有文件的完整示例`Readdirnames`

```
package main

import (
    "fmt"
    "os"
)

func main() {
    path := "/path/to/your/directory"
    err := readDir(path)
    if err != nil {
        panic(err)
    }
}

func readDir(path string) error {
    file, err := os.Open(path)
    if err != nil {
        return err
    }
    defer file.Close()
    names, _ := file.Readdirnames(0)
    for _, name := range names {
        filePath := fmt.Sprintf("%v/%v", path, name)
        file, err := os.Open(filePath)
        if err != nil {
            return err
        }
        defer file.Close()
        fileInfo, err := file.Stat()
        if err != nil {
            return err
        }
        fmt.Println(filePath)
        if fileInfo.IsDir() {
            readDir(filePath)
        }
    }
    return nil
} 
```

# windows-phone-8 - WP8 创建第二个导致 App 退出的磁贴

> ID：14668853
> 
> 赞同：0
> 
> 时间：2013-02-03T02:18:09.820
> 
> 标签：windows-phone-8, flip, tile

要添加第二个 Flip tile，如果该 tile 不存在，我在第一次加载 MainPage.xaml 时使用以下代码，然后....

```
 ShellTileData tileData = this.CreateFlipTileData(idx);
            ShellTile.Create(tileUri, tileData, true); 
```

磁贴创建成功，但问题是应用程序将退出，当然，如果用户再次启动应用程序，就可以了。只是想知道这不是一个很好的体验，有没有更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T09:57:05.500

创建新的辅助磁贴时，无法阻止您的应用退出。最好的办法是为用户按下后退按钮后退到您的应用程序时做好准备。

此外，需要注意的是，更新现有磁贴不会导致应用退出，只会创建新磁贴。

# jquery - jQuery——从文件中加载菜单——总是列表，而不是菜单

> ID：14668854
> 
> 赞同：1
> 
> 时间：2013-02-03T02:18:12.863
> 
> 标签：jquery, menu, load

我希望能够从 html 文件加载菜单并将它们用作菜单。文本将加载，但可惜它总是以简单列表的形式出现——菜单和子菜单选项都可见——而不是菜单。

这是shortmenu.html，我的测试文件之一：

```
<ul id="menuChap">
<li><a href="#">Item 1</a></li>
<li><a href="#">Item 2</a></li>
<li><a href="#">Item 3</a>
<ul>
<li><a href="#">Item 3-1</a></li>
<li><a href="#">Item 3-2</a></li>
</ul>
</li>
<li><a href="#">Item 4</a></li>
<li><a href="#">Item 5</a></li>
</ul> 
```

这是最简单的尝试脚本，并带有无意义的令牌操作：

```
 $(document).ready(function() {

      $('#menuDiv').load('shortmenu.html');

      $('#menuChap').menu({
           select: function(event, ui){
                alert("Pushed!");
           }
      });
 }); 
```

这是另一个带有浪费时间的警报，以确保在继续执行其他任务之前完成负载：

```
 $(document).ready(function() {

      $('#menuDiv').load('shortmenu.html', function() {
           alert("Load is finished");
      });

      $('#menuChap').menu({
           select: function(event, ui){
                alert("Pushed!");
           }
      });
 }); 
```

这是另一个具有新奇 .on 功能的功能：

```
 $(document).ready(function() {

      $('#menuDiv').on('click', function(e) { 
           e.preventDefault(); 
           $('#menuDiv').load('shortmenu.html'); 
           alert("Load is finished");
      });

      $('#menuChap').menu({
           select: function(event, ui){
                alert("Pushed!");
           }
      });
 }); 
```

而不是一个功能菜单，我得到的只是一个看起来像这样的列表-y块：

```
 * Item 1
 * Item 2
 * Item 3
      * Item 3-1
      * Item 3-2
      * Item 3-3
      * Item 3-4
 * Item 4
 * Item 5 
```

那我没看到什么？这里的任何人都可以为我指出一个很好的工作示例或提示我吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T02:25:18.870

你有没有尝试过：

```
$(function() {
      $('#menuDiv').load('shortmenu.html', function() {
          $('#menuChap').menu({
              select: function(event, ui){
                alert("Pushed!");
              }
          });
      });
}); 
```

Ajax 调用是异步的，因此您的`.menu()`调用需要等到调用`.load()`完成。在这个重载中，第二个参数是响应完成时的回调方法。

# jquery - jQuery切换与slideToggle？

> ID：14668855
> 
> 赞同：1
> 
> 时间：2013-02-03T02:18:35.380
> 
> 标签：jquery, image, resize, toggle, slidetoggle

我有一个 div，单击它会导致我的标题图像缩小并调整标题大小。html如下：

```
<div id="topmenu" class="navbar navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <i class="icon-bar"></i>
                <i class="icon-bar"></i>
                <i class="icon-bar"></i>
            </a>

                            <a class="brand logo" href="http://www.test.com/testsite/">
                                <div id="imgsize">
                    <img src="http://www.test.com/testsite/Logo-1024x335.png" alt="Logo" />
                </div>
                            </a>

            <div id="searchicons">
                <form class="navbar-search pull-right" method="get" id="searchform" action="http://www.test.com/testsite/">
                    <input type="text" class="search-query" placeholder="Search" name="s" id="s" value="">
                </form>

                <a href="http://www.test.com/testsite/feed/" title="Subscribe to our RSS Feed" class="topmenu-social pull-right"><i class="icon-rss icon-large"></i></a>

                                    <a href="http://twitter.com/#" title="Follow us on Twitter" class="topmenu-social pull-right"><i class="icon-twitter icon-large"></i></a>

                                    <a href="http://facebook.com/#" title="Find us on Facebook" class="topmenu-social pull-right"><i class="icon-facebook icon-large"></i></a>
                                </div>
        </div>
            <nav id="nav-main" class="nav-collapse" role="navigation">
                <ul id="menu-top" class="nav"><li class="menu-about"><a href="http://www.test.com/testsite/about/">About</a></li></ul>                  
            </nav>
        <div id="toggler" class="shrink visible-desktop"><a href="#"><span id="toggler_span"><i class="icon-chevron-up"></i><br>Hide</span></a></div>
    </div>
</div> 
```

这是我的 jQuery：

```
<script>
$(document).ready(function() {
$('#toggler').toggle(function () {
    $('#imgsize').css('max-width','230px');
    $('#toggler_span').replaceWith('<div id="toggler_span">Show<br><i class="icon-chevron-down"></i></span>');
}, function () {
    $('#imgsize').css('max-width','1024px');
    $('#toggler_span').replaceWith('<div id="toggler_span"><i class="icon-chevron-up"></i><br>Hide</span>');
});
});
</script> 
```

好消息是代码有效。但我想给它加点小东西，让它为图像/标题的大小调整设置动画。

标题的高度由图像的高度确定，该高度根据图像的宽度设置为自动，这是通过 jquery 更改以创建图像大小的调整。

我知道 slideToggle 但是当我将它应用到我的代码时它不会做任何事情。

我可以使用另一种方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T14:07:18.480

而不是`css`方法 try `animate`：

```
$(document).ready(function() { 
    $('#toggler').toggle(function () { 
        $('#imgsize').animate({'max-width': '230px'}, 1000);

        $('#toggler_span').replaceWith('<div id="toggler_span">Show<br><i class="icon-chevron-down"></i></span>'); }, function () { $('#imgsize').animate({'max-width': '1024px'}, 1000);

        $('#toggler_span').replaceWith('<div id="toggler_span"><i class="icon-chevron-up"></i><br>Hide</span>'); 
    }); 
}); 
```

# html - 如何正确对齐“AddThis”社交按钮与 CSS

> ID：14668858
> 
> 赞同：3
> 
> 时间：2013-02-03T02:18:59.910
> 
> 标签：html, css, addthis

我正在尝试对齐在[dirtycookie.co顶部看到的社交媒体按钮](http://dirtycookie.co)

它们正确对齐，但它们之间有一堆间距。

我的 HTML：

```
<div class="grid_12 socialheader">
<!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style" style="text-align:center;">
<a class="addthis_button_facebook_like" fb:like:layout="button_count" addthis:url="http://www.facebook.com/TheDirtyCookie"></a>
<a class="addthis_button_tweet"></a>
<a class="addthis_button_pinterest_pinit" pi:pinit:url="http://www.dirtycookie.co" pi:pinit:media="http://distilleryimage6.s3.amazonaws.com/1bf5b1a46d0b11e2914122000a9f1439_6.jpg" pi:pinit:layout="horizontal" always-show-count="1"></a> 
<a class="addthis_button_google_plusone" g:plusone:size="medium"></a> 
<a class="addthis_counter addthis_pill_style"></a>
</div>
<!-- AddThis Button END -->
</div> 
```

我的 CSS：

```
.socialheader {
    width: 100%;
    margin: 3px 1px 0px 1px;
    text-decoration: none;
}

.socialheader a{
    padding: 0px 10px 0px 20px !important;
    margin: 0px !important;
    width: 50px !important;
    display:inline !important;
    text-align: center;
    float: center !important;
    position:relative !important;
    top:0px !important;
} 
```

我无法弄清楚我做错了什么：/

理想情况下，这些小部件将紧密贴合在一起并位于页面中间。还值得注意的是，pinterest 按钮的右侧应该有一个计数器，但没有。如果有人知道为什么会这样，请告诉我。

有什么建议么？

谢谢，克里斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T02:33:51.270

您正在使用小部件按钮上的计数器。它们需要一些额外的增长空间，并且由于它们用作 iframe，您无法修改它们的样式。

我建议您显示没有计数器的普通按钮或垂直堆叠小部件，这样右侧的额外空间就不是设计问题。

更新：小部件不为您居中，因为小部件样式将它们向左浮动。您可以这样做来覆盖：

```
.socialheader a {
    float: none !important;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-27T21:45:50.130

我在让图标居中对齐时遇到了类似的问题。我添加了以下 CSS 类，它对我有用：

```
div.addthis_toolbox.addthis_default_style {
    display: flex;
    justify-content: center;
} 
```

对于较旧的浏览器，您还可以尝试：

```
div.addthis_toolbox.addthis_default_style {
    margin: 0 auto;
    width: 180px;
} 
```

# .net - 我可以将 ASP.NET Web API 模型绑定用于外部服务吗？

> ID：14668864
> 
> 赞同：0
> 
> 时间：2013-02-03T02:20:58.373
> 
> 标签：.net, asp.net-web-api

如果我想在这里打电话： [http ://thegamesdb.net/api/GetGamesList.php?name=x-men](http://thegamesdb.net/api/GetGamesList.php?name=x-men)

我有以下两个类，我目前正在使用`XMLDocument`它来解析我的响应：

```
 public class Data
        {
           private IEnumerable<Game> Game { get; set; } 
        }

        public class Game
        {
            public int id { get; set; }
            public string GameTitle { get; set; }
            public DateTime ReleaseDate { get; set; }
            public string Platform { get; set; }
        } 
```

我是否可以通过使用 ASP.NET Web API 进行调用来简化事情，并让它自动绑定到我的模型？还是这仅适用于从 发送数据`ApiController`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T03:06:19.423

当然，只需安装 Microsoft.AspNet.WebApi.Client 包 - [http://nuget.org/packages/Microsoft.AspNet.WebApi.Client/4.0.20710.0](http://nuget.org/packages/Microsoft.AspNet.WebApi.Client/4.0.20710.0)

现在您可以调用外部服务并直接读入您的对象：

```
var client = new HttpClient();
var response = await client.GetAsync("http://thegamesdb.net/api/GetGamesList.php?name=x-men");
if (response.IsSuccessStatusCode)
{
    var data = await response.Content.ReadAsAsync<Data>();
    foreach (var game in data.Game)
    {
        Console.WriteLine("{0}\t{1};\t{2}", game.Id, game.GameTitle, game.Platform);
    }
} 
```

**编辑：**

鉴于 XML 具有非标准的集合格式，请执行以下操作：

```
[XmlRoot("Data")]
public class Data
{
    [XmlElement("Game")]
    public List<Game> Games { get; set; }
}

[XmlType("Game")]
public class Game
{
    public int id { get; set; }
    public string GameTitle { get; set; }
    public string ReleaseDate { get; set; }
    public string Platform { get; set; }
} 
```

和：

```
 var client = new HttpClient();
    var response = await client.GetAsync("http://thegamesdb.net/api/GetGamesList.php?name=x-men");
    if (response.IsSuccessStatusCode)
    {
        var games = await response.Content.ReadAsAsync<Data>(new HashSet<MediaTypeFormatter>() { new XmlMediaTypeFormatter {UseXmlSerializer = true} });
        foreach (var game in games.Games)
        {
            Console.WriteLine("{0}\t{1};\t{2}", game.id, game.GameTitle, game.Platform);
        }
    } 
```

我们需要提示`XmlSerializer`如何处理真正以属性形式发送给您的数组。此外，它们的日期无效，因此您应该将其保存为字符串（或在 setter 中解析）。

另外，由于我们使用`XmlSerializer`not `DataContractSerializer`，您不能使用`IEnumerable`，它必须是`List<T>`。

# security - 如何生成所有数字序列号？

> ID：14668867
> 
> 赞同：1
> 
> 时间：2013-02-03T02:21:21.513
> 
> 标签：security, random, numeric, nsnumber, serial-number

> **可能重复：**
> [如何创建序列号生成器？](https://stackoverflow.com/questions/1732480/how-to-create-serial-number-generator)

我想为我的软件生成大量序列号。序列号

1.  只能是数字，
2.  当客户输入时，不要使用任何硬件信息（hdd id、cpu id、macaddr ect）来验证它，
3.  该软件不需要连接到任何服务器来验证它。

有没有标准和安全的算法来做到这一点？

# ruby-on-rails - Rails 以 HTML 格式存储使用富文本编辑器编写的文本正文

> ID：14668868
> 
> 赞同：1
> 
> 时间：2013-02-03T02:21:40.127
> 
> 标签：ruby-on-rails, rich-text-editor, text-formatting

将使用 javascript 文本编辑器编写的 html 文本输入存储到我的数据库中是否安全且常规？

假设我正在使用 ckeditor 让用户在我的应用程序中输入他们的文章。文章从客户端查看时看起来还不错，但是从数据库中查询时，就太乱了。

例如，文本正文将存储如下：

```
<p class="MsoListParagraph" style="margin-left:56.0pt;mso-para-margin-left:0gd;
text-indent:-18.0pt;mso-list:l3 level1 lfo1"><!--[if !supportLists]--><span lang="EN-US" style="font-size: 12pt; font-family: 'Times New Roman';">-<span style="font-size: 12pt; line-height: normal;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><!--[endif]--><span lang="EN-US" style="font-size: 12pt; font-family: 'Times New Roman';">Natural selection is a process that individuals
have some heritable characteristics to survive and reproduce at a higher rate
compare to other individuals. Natural selection increases the match between
organisms and environments. Furthermore, as an environment changes or
individuals move to a new place, natural selection may effect of adaptation to
these new conditions by giving rise to new species in the process. Natural
selection can only increase or decrease heritable traits.&nbsp; <u><o:p></o:p></u></span></p> 
```

然后身体被渲染为`@article.body.html_safe`

有没有更好的方法来处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T02:27:35.820

如果数据库不需要知道文本的内部结构，那么可以这样存储它，有效地将其视为不透明的 blob。

更大的问题是当有人查看该项目时网络浏览器的安全性。您需要谨慎地验证输入，否则有人可能会在文档中存储一些 javascript，然后该 javascript 将在查看该文章的任何人的浏览器上运行。

查看类似此处的答案：[过滤标签](https://stackoverflow.com/questions/307013/how-do-i-filter-all-html-tags-except-a-certain-whitelist)

# python - Python - 在 IF 条件中包含总和

> ID：14668870
> 
> 赞同：0
> 
> 时间：2013-02-03T02:22:05.080
> 
> 标签：python

这可能是一个愚蠢的问题，但我无法将求和表达式放在 If 条件中。
我处理由 3 行 A、B 和 C 组成的 CSV 文件。

这是我的代码：

```
#import and export files

test = "/home/julien/excel/test.csv"
file1 = open (test, 'rb')

export_test = "/home/julien/excel/export_test.csv"
file2 = open (export_test, 'wb')

reader1 = csv.reader (file1, delimiter = ';', quotechar=' ')
writer1 = csv.writer (file2, delimiter= ';', quotechar=' ')

#conditions on test.csv

for row1 in reader1:
    A = row1[0]
    B = row1[1]
    C = row1[2]

    if (A + B) == C:
        writer1.writerow (["calcul ok"])
    else:
        writer1.writerow (["fail"]) 
```

问题是我只有“失败”的结果，而它不应该。

你可以帮帮我吗 ？谢谢 ！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-03T02:23:01.637

将字符串转换为数字：

```
A = float(row1[0])
B = float(row1[1])
C = float(row1[2]) 
```

或更简洁地说：

```
A, B, C = map(float, row1[:3]) 
```

如果您的数字是整数，请替换`float`为`int`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T02:25:28.347

这是因为 A、B 和 C 都是`string`
当你`+`两个字符串时，这意味着你连接两个`string`而不是对它们求和。

因此，您需要先将其转换为数字

如果它是一个整数，您可以使用以下方法进行转换：

```
num = int(a) 
```

如果它是一个浮点数，您可以使用它进行转换

```
num = float(a) 
```

但是如果数字是浮动的，你不能只使用它来比较它`==`

请参考this检查float的相等性 [测试浮点相等性](https://stackoverflow.com/questions/4028889/floating-point-equality-in-python)

# java - 不能在静态上下文中使用这个 android spinner

> ID：14668874
> 
> 赞同：2
> 
> 时间：2013-02-03T02:23:18.513
> 
> 标签：java, android, spinner

我正在尝试在微调器列表中添加一些项目。但不知何故，我总是得到以下异常`this`-

```
Cannot use this in a static context 
```

下面是我的代码

```
 public static void initSpinnerView(Context context, Spinner spinnerView, String prefix, int numItems, int layout) {

    //spinnerView = (Spinner) findViewById(R.id.spinner2);
    List<String> list = new ArrayList<String>();
    list.add("list 1");
    list.add("list 2");
    list.add("list 3");
    ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, list);
    dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinnerView.setAdapter(dataAdapter);
    }
} 
```

谁能告诉我我在这里做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T02:40:56.190

```
this 
```

这是一个指示当前对象的 Java 关键字。如果我没记错的话，这个方法放在一个扩展Activity的类中。因此，`this`指的是 Activity 对象（在这种情况下用作 Context）。而且由于它是静态方法，因此不能使用关键字`this`或非静态变量。

为了修复它，更改为这一行：

```
ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(context, android.R.layout.simple_spinner_item, list); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T02:31:18.390

在 java 中，您不能在静态方法（静态上下文）中使用它。

静态方法不指向封闭类的任何实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-05T20:52:04.827

您在静态方法中使用它，这在 java 中是不合法的。

# codeigniter - Codeigniter foreach 工作很奇怪

> ID：14668876
> 
> 赞同：-1
> 
> 时间：2013-02-03T02:23:22.510
> 
> 标签：codeigniter

今天我发现我的更新功能突然在 codeigniter 中无法正常工作。我通过两次调用 foreach 循环解决了这个问题，这是我的代码：

```
function _update($options = array(),$set = array()) {
    ......
    foreach ($this->db->field_data($options['table']) as $field) {
        //never get inside this foreach loop, but if I removed this foreach loop it will not get inside the next foreach loop.
    }
    foreach ($this->db->field_data($options['table']) as $field) {
    if(isset($options[$field->name])) $this->db->where($field->name, $options[$field->name]);
    if(isset($set[$field->name])) $this->db->set($field->name, $set[$field->name]); 
    }
    ......
} 
```

这个问题是由 codeigniter 还是 PHP 引起的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T09:38:01.657

我认为问题在于 $this->db->some_function 返回值，停止执行第二个 if 语句，简单地说：第一个循环在每次 $this->db->where 迭代后停止，而第二个循环到达 set 方法. 关于这个问题的信息对我来说太少了，无法进一步帮助你。请提供更多详细信息。

# php - mysql结果的资源150

> ID：14668877
> 
> 赞同：1
> 
> 时间：2013-02-03T02:23:25.877
> 
> 标签：php, mysql

什么是资源（150）类型（mysql结果）？在 var_dumping 一个选择查询之后，我得到了这个，

我的代码是：

```
$userlevelcheck = $this->query_silent("SELECT user_level FROM " . DB_PREFIX . "users WHERE user_id='" . $user_id . "'"); 
var_dump ($userlevelcheck);
if ($userlevelcheck != "1")
{
    code
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T23:50:38.917

尝试：

```
$userlevelquery = $this->query_silent("SELECT user_level FROM " . DB_PREFIX . "users     WHERE user_id='" . $user_id . "'"); 
$row = mysql_fetch_assoc($query);
if ($row['user_level'] != "1")
{
    code
} 
```

您需要获取包含 ($row) 中数据的行，然后检查相关字段 $row['user_level']

# mysql - 如果另一个表中的列为零，则 MySQL 选择列

> ID：14668878
> 
> 赞同：1
> 
> 时间：2013-02-03T02:24:11.413
> 
> 标签：mysql

我的问题主要是我不确定如何在搜索中说出我需要的内容。

```
mysql> SELECT * FROM `accounts`;
+----+--------+---------+----------+
| id | status | oplevel | username |
+----+--------+---------+----------+
| 10 |      1 |       0 | root     |
| 11 |      1 |       1 | Xylex    |
| 12 |      1 |      16 | Anubis   |
| 13 |      0 |      16 | Kami     |
| 14 |      1 |      16 | Zorn     |
+----+--------+---------+----------+

mysql> SELECT * FROM `networks`;
+-----------+-----------+-------------+-----------------+
| networkid | accountid | networkname | serveraddress   |
+-----------+-----------+-------------+-----------------+
|         1 |        10 | Fakenet     | irc.fakenet.org |
|         2 |        10 | Undernet    | irc.under.net   |
|         3 |        12 | Takenet     | irc.takenet.com |
|         4 |        13 | Examplenet  | irc.example.org |
+-----------+-----------+-------------+-----------------+ 
```

我有这个帐户表和这个网络表我需要一个查询来返回 IRC 网络的地址，只有当相应的帐户 ID 状态列是 1（启用）

我一直在寻找几个小时。做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T02:27:47.847

我已更新查询以放置帐户 ID。

```
select acc.id, acc.username, nw.serveraddress from accounts acc join networks nw on acc.id = nw.accountid where acc.status == 1 and acc.id=XXX 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T02:28:29.390

```
select serveraddress from networks, accounts where networks.accountid = accounts.id and accounts.satus=1; 
```

是你要找的吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T02:32:53.937

对我来说看起来很简单：

```
select serveraddress from accounts join networks on id=accountid and id=YOUR_ACCOUNT_ID_HERE 
```

或者

```
select serveraddress from networks where accountid=YOUR_ID and exists(select * from accounts where id=accountid and status) 
```

很多方法可以解决这个问题..

# python - 如何在 Python 中的列表中添加选定的数字

> ID：14668882
> 
> 赞同：0
> 
> 时间：2013-02-03T02:24:40.773
> 
> 标签：python, list

我有一个数字列表，我想将数字相加，但我不想添加列表中的所有数字，只是选择的数字，比如前三个。

```
list = [2, 3, 7, 11, 15, 21]
for i in list:
   sum += i 
```

我的代码显然将列表中的所有数字相加。我尝试将 for 循环更改为 in range(0,4) ，但这只是将数字 0、1、2、3 加在一起，而不是我列表中的数字。那么如何修改我的代码以将列表中的前三个数字相加。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-03T02:25:48.987

你可以分割你的清单...

```
list[0:3] 
```

你可以这样做...

```
sum(list[0:3]) 
```

看来[您](https://stackoverflow.com/a/14668890/31671)不需要从`0`那里开始。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-03T02:25:42.723

您需要遍历列表的前三个元素。您可以使用[*列表切片来执行此操作*](https://stackoverflow.com/q/509211/1907098)

```
total = 0
for i in lst[:3]:
    total += i 
```

作为旁注，不要命名您的变量，`list`否则`sum`它们会覆盖内置类型/函数并可能导致问题。

# regex - Powershell 捕获组 - 在匹配行之后插入一些文本

> ID：14668886
> 
> 赞同：0
> 
> 时间：2013-02-03T02:25:13.393
> 
> 标签：regex, powershell, replace

**我正在尝试将带有 powershell 语句的行插入到多个脚本文件中。**

**文件的内容是这样的（3例）**

```
"param($installPath)" 
```

- 没有 CRLF 字符，只有第一行

```
"param($installPath)`r`n`" 
```

- 带有 CRLF 字符，没有第二行

```
"param($installPath)`r`n`some text on the second line" 
```

- 带有 CRLF 字符，第二行非空

**我想插入一些文本（第二行中的 poweshell 语句`'r'n$myvar = somethingelse`），因此它就在第一行的下方，如果它们不存在，则将 'r'n 字符附加到第一行**

```
"param($installPath)`r`nmyvar = somethingelse" 
```

- 首先在第一行添加 CRLF 字符，在第二行添加 $myvar = somethingelse

```
"param($installPath)`r`n`$myvar = somethingelse" 
```

- 仅在第二行添加“$myvar = somethingelse”，因为 CRLF 已经存在（无需添加结尾`r`n）

```
"param($installPath)`r`n`$myvar = somethingelse`r`n`some text on the second line"** 
```

- 在第二行添加“$myvar = somethingelse'r'n”（CRLF 已经存在于第一行）并将 CRLF 附加到它，以便第二行上的现有文本将移至第三行。

我试图使用这个正则表达式：“^param(.+)(?:( `r`n `))" and this replacement, but with no success ($1 is the first capture group, $2 is non capture group which I ignore even if something is found and I explicitly add CRLF after $1 capture group) "$1`r `n`myvar = somethingelse”

谢谢，

辐射

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T13:02:35.773

以下使用`-replace`似乎符合您的要求

```
$content = "param(some/path)"
#$content = "param(some/path)`r`n"  
#$content = "param(some/path)`r`n`some text on the second line"

$content = $content -replace "^(param\(.+\))(?:\r\n$)?",
        ( '$1' + "`r`nmyvar = somethingelse" )

Write-Host "`n$content" 
```

请注意，对捕获组的引用必须用单引号引起来。

可选的、未捕获的`(?:\r\n$)`组确保 CRLF 被删除，如果没有任何内容，即 string 的结尾`$`，跟随它。

**编辑**

如果`param`不知道接下来的内容，则可以使用以下正则表达式。
它用于`[^\r\n]`捕获不是换行符的字符。

```
"^(param[^\r\n]*)(?:\r\n$)?" 
```

# sql-server - SQL Server 存储过程返回表，每个用户的唯一性计数

> ID：14668892
> 
> 赞同：4
> 
> 时间：2013-02-03T02:26:03.580
> 
> 标签：sql-server, sql-server-2008, tsql, stored-procedures

我在这里和那里发现了一点，但没有什么能真正涵盖我所遇到的问题，所以在这里。我从亚马逊订购了一本书，但它不会再在这里了，我真的需要尽快

我有两个表，基本上包含以下内容。

`Table A`有用户 ID 号、登录名、胜负、平局

`Table B`有用户id号，游戏结束时，游戏状态

我想要的是创建一个存储过程，它将返回上周获胜的前 10 名。

```
Loginname | total wins, last 7 days | all wins | all losses | all ties
Name1     |         10              |   40     |     8      |      6
Name2     |          9              |   96     |    76      |      19 
```

ETC....

到目前为止，我所拥有的是：

```
SELECT A.login,
       A.draws_count,
       A.losses_count,
       A.wins_count
FROM   [TableB] AS B
       INNER JOIN
       [TableA] AS A
       ON B.won_by_id = A.id
WHERE  B.win_defined_time > (GETDATE() - 7)
       AND B.state = 'OVER'; 
```

从那里我不知道如何返回我需要的表。任何帮助将不胜感激。（还请记住，两个表中都不存在“过去 7 天的总获胜次数”字段。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T04:39:15.797

假设架构和示例数据如下：

```
CREATE TABLE [dbo].[Competitors]
(
    [id]         INT          NOT NULL,
    [login_name] VARCHAR (50) NOT NULL,
    [wins]       INT          NOT NULL,
    [losses]     INT          NOT NULL,
    [ties]       INT          NOT NULL
) ON [PRIMARY]

CREATE TABLE [dbo].[Events]
(
    [id]            INT          NOT NULL,
    [Competitorid]  VARCHAR (50) NOT NULL,
    [EventDateTime] DATETIME     NOT NULL,
    [winner]        BIT          NOT NULL,
    [EventStatus]   VARCHAR (50) NOT NULL
) ON [PRIMARY]

INSERT  INTO Competitors (id, login_name, wins, losses, ties)
VALUES                  (1, 'Player 1', 40, 8, 6),
                        (2, 'Player 2', 96, 76, 19),
                        (3, 'Player 3', 1, 0, 0)

INSERT  INTO Events (id, Competitorid, EventDateTime, winner, EventStatus)
VALUES             (1, 1, '2013-01-25 01:05:25.000', 1, 'OVER'),
                   (2, 1, '2013-01-26 01:05:25.000', 1, 'OVER'),
                   (3, 1, '2013-01-27 14:05:25.000', 1, 'OVER'),
                   (4, 1, '2013-01-28 01:05:25.000', 1, 'OVER'),
                   (5, 1, '2013-01-29 15:05:25.000', 1, 'OVER'),
                   (6, 1, '2013-01-30 01:05:25.000', 1, 'OVER'),
                   (7, 1, '2013-01-31 22:05:25.000', 1, 'OVER'),
                   (8, 1, '2013-02-01 01:05:25.000', 1, 'OVER'),
                   (9, 1, '2013-02-02 21:05:25.000', 1, 'OVER'),
                   (10, 1, '2013-01-02 11:05:25.000', 0, 'INPROGRESS'),
                   (11, 1, '2013-01-30 01:05:25.000', 1, 'OVER'),
                   (12, 2, '2013-01-25 11:05:25.000', 1, 'OVER'),
                   (13, 2, '2013-01-26 01:05:25.000', 1, 'OVER'),
                   (14, 2, '2013-01-27 11:25:25.000', 1, 'OVER'),
                   (15, 2, '2013-01-28 01:05:25.000', 1, 'OVER'),
                   (16, 2, '2013-01-29 11:45:25.000', 1, 'OVER'),
                   (17, 2, '2013-01-30 01:45:25.000', 1, 'OVER'),
                   (18, 2, '2013-01-31 12:15:25.000', 1, 'OVER'),
                   (19, 2, '2013-02-01 01:05:25.000', 1, 'OVER'),
                   (20, 2, '2013-02-02 22:25:25.000', 1, 'OVER'),
                   (21, 2, '2013-02-02 15:05:25.000', 0, 'INPROGRESS'),
                   (22, 2, '2013-01-25 01:05:25.000', 1, 'OVER'),
                   (23, 1, '2013-01-30 01:05:25.000', 0, 'OVER'),
                   (24, 2, '2013-01-30 01:05:25.000', 0, 'OVER'),
                   (25, 3, '2012-01-30 01:05:25.000', 1, 'OVER') 
```

您可以使用以下查询返回过去 7 天内获胜次数最多的十个人的姓名和获胜数据：

```
SELECT TOP 10 login_name,
              recent_wins,
              wins AS 'All Wins',
              losses AS 'All losses',
              ties AS 'All Ties'
FROM   Competitors
       INNER JOIN
       (SELECT   COUNT(*) AS recent_wins,
                 Competitorid
        FROM     events
        WHERE    winner = 1
                 AND eventdatetime BETWEEN GetDate() - 7 AND GetDate()
                 AND EventStatus = 'OVER'
        GROUP BY Competitorid) AS recent_event_winners
                 ON Competitors.ID = recent_event_winners.Competitorid;
ORDER BY recent_wins DESC 
```

此查询的工作原理是将 Competitors 表中的数据与 events 表中的数据的子查询连接在一起，该子查询计算最近获胜的次数，然后获取前 10 个结果。对于在过去 7 天内获胜的用户，子查询返回用户在该时间段内结束的事件的获胜次数。

**注意：**任何一个查询都不会返回在该时间段内没有任何胜利的用户，因此结果可能少于 10 个结果。

可以在[http://sqlfiddle.com/#!3/0ebc8/2找到具有上述 sql 创建脚本和查询的 SQL Fiddle](http://sqlfiddle.com/#!3/0ebc8/2)

# php - jquery 1.9.1 事件处理程序未触发

> ID：14668899
> 
> 赞同：0
> 
> 时间：2013-02-03T02:28:05.150
> 
> 标签：php, jquery, ajax

把我的头撞到墙上.. 谷歌搜索并检查了以前的 q 在这里.. 找不到答案.. 使用 jquery 1.9.1

非常简单的问题...选择下拉列表，希望我的功能在用户更改下拉列表时触发..问题是。什么都没有发生..没有错误.. func不会触发

```
$("select.radStatus").change(function() {
    // alert('Value change to ' + $(this).attr('value'));
    $.ajax({
       type: "GET",
       url: "ajax_me.php",
       data: "officeLocName=" + $(this).val(),
       success: function(msg){
           $('#signInResult').html('<img src="img/checkmark.png" />');
        }
    });
}); 
```

HTML是：

```
<select id="radStatus" name="officeLocName">
<option value="1">choice 1</option>
<option value="2">choice 2</option>
<option value="3">choice 3</option>
</select> 
```

我尝试缝制一个新选项...事件不触发...没有任何反应..萤火虫中没有错误

谢谢

更新：谢谢它有效！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T02:32:35.470

应该是`$("select#radStatus")`。这是为了身份证。这`.`是上课

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-03T02:40:05.480

`this`不是`select`您在其中的时候，`$.ajax`并且需要在选择器中使用 ID 前缀

正如其他答案所暗示的那样，进行另一个 DOM 搜索是没有意义的，只需`select`在`$.ajax`

```
$("select#radStatus").change(function() {
    var value=$(this).val();
    $.ajax({
       type: "GET",
       url: "ajax_me.php",
       data: "officeLocName=" + value,
       success: function(msg){
           $('#signInResult').html('<img src="img/checkmark.png" />');
        }
    });
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-03T02:32:42.233

更改 `$("select.radStatus")` 为 `$("select#radStatus")`

您将其作为 jQuery 中的类，但作为 html 中的 ID

# symfony - 如何在 symfony 2 的选择框中加载自定义查询数据

> ID：14668900
> 
> 赞同：2
> 
> 时间：2013-02-03T02:28:12.877
> 
> 标签：symfony, symfony-2.1

我有一个如下表：

```
items
-id (pk) AI
-user_id (fk) references users
-title
-description 
```

我有一个需要经过身份验证的用户的表单页面。我想用属于用户的项目填充选择框（比如 select * from items where user_id=loggedinUserId）

我查看了文档，发现了这个：

```
 $builder->add('items', 'entity', array(
    'class' => 'AcmeHelloBundle:Items',
    'query_builder' => function(EntityRepository $er) {
       return $er->createQueryBuilder('i')
        ->orderBy('i.title', 'ASC');
    },
)); 
```

我的问题是如何以 symfony 2.1 形式将经过身份验证的用户 ID 传递给此查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T13:59:18.690

@Patt 提供的解决方案似乎很理想，但就我而言，此表单仅使用一次或仅在一个页面中使用。所以我更喜欢这样做：

```
class ItemType extends AbstractType {

    public function buildForm(FormBuilderInterface $builder, array $options) {
       $user=$options['user'];
       $builder->add('itemOffered', 'entity', array(
                'class' => 'TestBundle:Items',
                'query_builder' => function(EntityRepository $er) use ($user) {
                    return $er->createQueryBuilder('i')
                              ->where('i.user =:user')
                              ->setParameter('user', $user);
                }
            ));
    }
} 
```

在控制器中：

```
$form = $this->createForm(new ItemType(), new Item(),array('user' => $this->getUser())); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T06:08:16.650

**你有两种可能：**

*   通过构造函数注入参数（**构造函数注入**）
*   通过表单的选项注入参数

这个[很棒的线程](http://sf.khepin.com/2012/10/user-dependent-forms-in-symfony2/)向您展示了一种有趣的方法（来自[@khepin](http://sf.khepin.com/about/)）。但是，正如@Bernhard 所建议的（见第一条评论），在这种情况下有一种更简单的方法。

* * *

**方法 1- 构造函数注入：如果您不想创建订阅者等...您可以直接将安全上下文注入表单构造函数：**

*物品种类：*

```
namespace Acme\HelloBundle\Form\Type;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\OptionsResolver\OptionsResolverInterface;
use Symfony\Component\Security\Core\SecurityContextInterface;
use Symfony\Component\Security\Core\User\UserInterface;

classItemType extends AbstractType
{
    /**
     * @var string
     */
    private $class;

    /**
     * @var UserInterface
     */
    private $user;

    /**
     * @param string $class
     */
    public function __construct($class, SecurityContextInterface $securityContext)
    {
        $this->class = $class;
        $this->user = $securityContext->getRequest->getUser();
    }

    public function buildForm(FormBuilderInterface $builder, array $options)
    {

                $username = $this->user->getUsername();    

                $builder->add('items', 'entity', array(
                    'class' => $this->class,
                    'multiple' => true,
                    'expanded' => true,
                    'query_builder' => function(EntityRepository $er) use ($username) {
                        $query = $er->createQueryBuilder('i')
                            ->select(array('i'))
                            ->leftJoin('i.users', 'u')
                            ->andWhere('u.username = :username')
                            ->setParameter('username', $usename)
                            ->orderBy('i.title', 'ASC');

                        return $query;

                    },
                )
            ));

    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
            'data_class' => $this->class,
        ));
    }

    public function getName()
    {
        return 'acme_hello_item';
    }
} 
```

*将其声明为服务：*

```
<parameters>
    <parameter key="acme_hello.item.class">Acme\HelloBundle\Entity\Item</parameter>
</parameters>

<services>
    <service id="merk_notification.filter.form.type" class="Acme\HelloBundle\Form\Type\ItemType">
        <tag name="form.type" alias="acme_hello_item" />

        <argument>%acme_hello.item.class%</argument>
        <argument type="service" id="security.context" />
    </service>
</services> 
```

要构建您的表单，您现在可以执行以下操作：

```
 $formBuilder = $this->container->get('form.factory');
    $form = $formBuilder->createNamed('acme_hello_item', 'acme_hello_item'); 
```

# c++ - 尝试在 Ubuntu Linux 中构建全局键盘挂钩时出错

> ID：14668906
> 
> 赞同：0
> 
> 时间：2013-02-03T02:29:21.063
> 
> 标签：c++, linux, x11

我正在开发一个代码来获取 KeyPress 和 KeyRelease 事件中的键盘输入，但是当我运行程序时没有任何反应，我的代码有什么问题？以及如何获得按下的键值？

```
void hook()
{
    forever
    {
        XEvent event;
        Display *dpy = XOpenDisplay(NULL);
        XNextEvent(dpy, &event);
        switch (event.type)
        {
        case KeyPress:
            qDebug() << "keypress";
            break;
        case KeyRelease:
            qDebug() << "keyrelease";
            break;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T09:35:03.730

阅读有关[键盘 X11 事件](http://tronche.com/gui/x/xlib/events/keyboard-pointer/keyboard-pointer.html)的更多信息。[如果该窗口在其事件掩码](http://tronche.com/gui/x/xlib/window/attributes/event-and-do-not-propagate.html)`KeyPressMask`中设置了一些或`KeyReleaseMask`位，您将只能从某些 X11 窗口中获取它们。并且应该[创建](http://tronche.com/gui/x/xlib/window/create.html)该窗口或 `InputOnly``InputOutput`

您显然正在使用 Qt（这是一个好主意）。然后，坚持 Qt[关键](http://qt-project.org/doc/qt-5.0/qtwidgets/qwidget.html#keyPressEvent)事件。

（如果您想捕获所有 X11 关键事件，请使用显示器的根窗口。但是您正在干扰您的窗口管理器，这是一个坏主意；了解有关[ICCCM](http://en.wikipedia.org/wiki/ICCCM)和[EWMH](http://en.wikipedia.org/wiki/Extended_Window_Manager_Hints)的更多信息）

此外，`xev`在终端中运行 - 以了解有关 X11 事件的更多信息

# backup - Samba 时光机

> ID：14668911
> 
> 赞同：2
> 
> 时间：2013-02-03T02:30:52.817
> 
> 标签：backup, osx-mountain-lion, samba, smb, timemachine

当前运行 osx 10.8.2

将外部网络驱动器连接到运行番茄的 rt-n66u 路由器

我正在尝试使用 tmutil 连接我的外部网络驱动器，但遇到了很多麻烦。

我在 Finder Run 中安装驱动器`sudo tmutil setdestination /Volumes/external`，然后得到`Incompatible file system type: smbfs (error 45)`

有任何想法吗？:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T22:21:29.520

除了告诉您官方不支持 samba 共享上的时间机器备份之外，我无法具体回答您的问题。因此，即使您能够在 samba 共享上备份您的数据（据我所知，很多人都有这样做的问题），您在恢复过程中也会遇到麻烦。如果您尝试通过启动 OS X livecd 来恢复您的数据，那么您无法做到，因为它没有安装 samba 客户端来连接到 samba 共享。下一步是尝试将备份驱动器直接连接到您的 Mac 以访问您的数据。这也可能会失败，因为硬盘驱动器是用 OS X 不支持的 linux 文件系统格式化的。

因此，如果可能的话，您可以做的最好的事情是在该路由器盒上安装 netatalk (afpd)。

# mysql - 如何设置两个 MySQL 数据字段，使一个或另一个可以为空，但不能同时为空？

> ID：14668917
> 
> 赞同：0
> 
> 时间：2013-02-03T02:31:43.740
> 
> 标签：mysql, sql, phpmyadmin

我有 5 个 MySQL 数据字段用于投票表：

*   帖子编号
*   投票编号
*   投票编号
*   选民
*   投票人

您可以在投票中投票或为帖子投票。如果您在投票中投票，则 post/person 字段将为空。如果您为帖子投票，则投票字段将为空。

我想设置表格，以便您将帖子 ID 或投票 ID 设为空，但不能同时设置两者。我正在使用 phpmyadmin 来管理我的数据库。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T03:50:51.970

我必须同意上面的 jmilloy 最好的办法是创建单独的表。这是一个如何工作的例子：

表结构和样本数据：

```
CREATE TABLE post (
    post_id INT AUTO_INCREMENT PRIMARY KEY,
    vote_id INT
 );

CREATE TABLE poll (
    poll_id INT AUTO_INCREMENT PRIMARY KEY,
    vote_id INT
  );

CREATE TABLE voter(
  vote_id INT AUTO_INCREMENT PRIMARY KEY,
  name VARCHAR(30)
  );

INSERT INTO post (vote_id) VALUES(1),(2),(3),(6);

INSERT INTO poll (vote_id) VALUES(3),(5),(4),(7);

INSERT INTO voter(name) VALUES ('bob'),
('Jack'),
('Joe'),
('Shara'), 
('Hillary'), 
('Steven'), 
('Sandra'); 
```

要检索为帖子投票的选民，您必须使用 JOIN。这是一个示例，如果您想为帖子编号 2 找到选民，这将是什么样子。

```
SELECT post.post_id, vote.name  
FROM (post 
 JOIN post_vote 
ON post_vote.post_id = post.post_id) 
 JOIN vote 
ON vote.vote_id = post_vote.vote_id
WHERE post.post_id = 2; 
```

[SQL 小提琴演示](http://www.sqlfiddle.com/#!2/2a324/7)

一些解释，如果你有一个投票和投票，你有一个多对多的关系，即一个选民可以投票给多个投票，一个投票可以有多个选民。要在投票表和民意调查表之间架桥，您可以使用桥接表。此表包含所有投票号码和投票组合。因此，当您想知道谁为特定民意调查投票时，您需要将 poll_id 与 poll_vote 表中的 poll_id 链接起来。然后使用 poll_vote 表和投票表中的 vote_id 将结果与投票表进行匹配。希望这可以帮助。祝你的项目好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T03:06:34.350

查看 MySQL CREATE TABLE 语法[http://dev.mysql.com/doc/refman/5.1/en/create-table.html](http://dev.mysql.com/doc/refman/5.1/en/create-table.html)

请注意，NOT NULL 或 NULL 是列定义的一部分。默认值为 NULL。这只能应用于列，而不是列对。

这里的解决方案是制作两张单独的表格，一张用于投票，一张用于投票。然后您可以将相关字段放在每个表中。这也将节省您的空间，并使您的数据不易出错。

# ruby-on-rails - 用户在 devise rails 3 应用程序中注册后发送一封 actionmailer 电子邮件

> ID：14668920
> 
> 赞同：0
> 
> 时间：2013-02-03T02:32:06.343
> 
> 标签：ruby-on-rails, ruby-on-rails-3, model-view-controller, devise, actionmailer

我正在尝试在使用设计 gem 的 rails 3 应用程序中用户注册后发送电子邮件。每次我尝试发送电子邮件时，都会收到以下错误：

设计中的 NoMethodError::RegistrationsController#create undefined method `welcome_email' for UserMailer:Class

我的 app/model/user.rb 有以下代码...

```
after_create :send_welcome_email

  def send_welcome_email
    UserMailer.welcome_email(self).deliver
  end 
```

我的 app/mailers/user_mailer.rb 有以下代码...

```
class UserMailer < ActionMailer::Base
  default from: "support@mysite.com"

  def welcome_email(user)
    @user = user
    @url  = "http://mysite.com/login"
    mail(:to => "#{user.email}", :subject => "Welcome to My Awesome Site")
  end
end 
```

方法welcome_email 存在，所以我不确定为什么会出现错误。在过去的几个小时里一直试图解决这个问题。

提前感谢您的帮助！！一如既往，如果你给我一个好的答案，我会接受它。亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T05:32:07.350

看起来`welcome_email`是一个实例方法。看起来错误表明它需要是一个类方法。所以尝试将方法声明重写为：

> def self.welcome_email（用户）

我想这应该解决它。

# php - PHP中的文本微笑

> ID：14668923
> 
> 赞同：0
> 
> 时间：2013-02-03T02:32:25.567
> 
> 标签：php

好的，所以我最近将脚本放到了 textCMS 系统上。但是，我希望为自己更多地“开发”它，因为它对我来说太基础了。我不会说我是“初学者” php 编码器，但我不是很先进。

[http://ppGATE.net](http://ppGATE.net) <--这是我正在使用的 CMS。

有人可以帮我介绍一下，当我使用在线页面编辑器时，如果我使用 :) 或 :P 它会将其更改为表情。

我在网上查了一下，还没有真正找到任何有效的方法。

任何帮助都是感激的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T02:35:05.540

```
str_replace(':)', '<img src="/path/to/smileyface.gif"/>', $string); 
```

重复不同的表情。

如果您自己无法解决这个问题，我会说您实际上是一个初学者。您想用笑脸图像*替换*文字笑脸，对吗？该代码几乎说明了自己。

* * *

如果你想像约瑟夫一样变得花哨，你也可以这样做：

```
$emotDict = array(
    ':)' => '<img src="path/to/image/smile.gif"/>',
    ':(' => '<img src="path/to/image/sad.gif"/>'
    // and so on...
);

$updated_text = str_replace(array_keys($emotDict), array_values($emotDict), $your_text); 
```

这里不需要正则表达式。

# java - 什么时候调用格式方法？

> ID：14668924
> 
> 赞同：0
> 
> 时间：2013-02-03T02:32:27.413
> 
> 标签：java, logging, java.util.logging

在下面的代码中，类`MyCustomeFormatter`扩展了`Formatter`. 它还覆盖`format`消息。什么时候调用这个方法？例如 ：

```
logger.log(Level.INFO,"This is an info message") 
```

语句将消息记录到指定的处理程序。但是什么时候`overriden`调用该方法？

```
import java.util.Date;
import java.util.logging.Formatter;
import java.util.logging.LogRecord;

public class MyCustomFormatter extends Formatter {

public MyCustomFormatter() {
    super();
}

public String format(LogRecord record) {

    // Create a StringBuffer to contain the formatted record
    // start with the date.
    StringBuffer sb = new StringBuffer();

    // Get the date from the LogRecord and add it to the buffer
    Date date = new Date(record.getMillis());
    sb.append(date.toString());
    sb.append(" ");

    // Get the level name and add it to the buffer
    sb.append(record.getLevel().getName());
    sb.append(" ");

    // Get the formatted message (includes localization 
    // and substitution of paramters) and add it to the buffer
    sb.append(formatMessage(record));
    sb.append("\n");

    return sb.toString();
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T02:56:49.133

`Logger.log()`来电`Handler.publish()`

如果处理程序继承自[StreamHandler](http://java.util.logging.StreamHandler)：

```
public synchronized void publish(LogRecord record) {
    if (!isLoggable(record)) {
        return;
    }
    String msg;
    try {
        msg = getFormatter().format(record);
    } catch (Exception ex) {
        // We don't want to throw an exception here, but we
        // report the exception to any registered ErrorManager.
        reportError(null, ex, ErrorManager.FORMAT_FAILURE);
        return;
    }

    try {
        if (!doneHeader) {
            writer.write(getFormatter().getHead(this));
            doneHeader = true;
        }
        writer.write(msg);
    } catch (Exception ex) {
        // We don't want to throw an exception here, but we
        // report the exception to any registered ErrorManager.
        reportError(null, ex, ErrorManager.WRITE_FAILURE);
    }
} 
```

# excel - VBA 子例程在第二次运行时返回错误

> ID：14668933
> 
> 赞同：-1
> 
> 时间：2013-02-03T02:34:01.020
> 
> 标签：excel, excel-2010, vba

Sooo，我有一个不错的小子程序，可以删除表格中除一行之外的所有内容。

```
Sub ClearFormTableRows(sourceRange, countRange)
Dim rowsCount As Integer, rowRangeName As Object
rowsCount = Application.WorksheetFunction.CountA(countRange)
With sourceRange

    Do Until rowsCount = 1

        .ListObject.ListRows(2).Delete
        rowsCount = rowsCount - 1
        If rowsCount = 1 Then Exit Do
    Loop

End With
End Sub 
```

直到今天它仍然有效。但是在调用它的主程序中，我添加了另一个调用，相同的语法只是针对不同的表，现在它不会做任何事情，抛出错误 9 子程序超出范围。它突出显示的行是这一行：`.ListObject.ListRows(2).Delete`
但是，如果我注释掉其中一个调用，不管哪个调用，它都会在该表上正确执行。但是要求它两者都做，它也不会做。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T12:58:40.487

以这种方式尝试：我删除`rowRangeName object`了它，因为它没有用于您问题中的给定片段。

```
 Sub ClearFormTableRows(ByRef sourceRange as Range, ByRef countRange As Range)
     Dim rowsCount As Integer
     Dim objListObj As ListObject 
     Dim objListRows As ListRows 

     Set objListObj = sourceRange.ListObjects(1) 
     Set objListRows = objListObj.ListRows 
     rowsCount = Application.WorksheetFunction.CountA(countRange)

     While rowsCount > 1
     '-- just a re-confirmation, you can remove first if condition if you want.
     If (rowsCount > 1) And (rowsCount < objListRows.Count - 1) Then 
        objListRows(rowsCount).Delete 
        rowsCount = rowsCount - 1
     End If 
     Wend
  End Sub 
```

参考：

*   [ListObject.ListRows 属性 (Excel)](http://msdn.microsoft.com/en-us/library/office/ff834452.aspx)

PS：可能不相关，但请使用`ByRef`or明确声明参数`ByVal`：

`Sub ClearFormTableRows(ByRef sourceRange As Range, ByRef countRange As Range)`:)

# java - 如何使用 image4j 库？

> ID：14668935
> 
> 赞同：1
> 
> 时间：2013-02-03T02:34:10.677
> 
> 标签：java, bluej

我正在尝试创建一个可以显示 *.ico 文件的程序，所以当我尝试在谷歌上搜索时，它会显示这个库。我正在使用 bluej 并尝试运行示例 test.java 并显示错误“包 net.sf.image4j.codec.ico 不存在”

我正在使用 bluej 运行它，所以我尝试将 image4j-example.jar 添加到 bluej 库但没有任何反应。我应该做些什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T23:12:06.583

我会检查 image4j-example.jar 文件中包含的软件包列表。从名字上看，JAR 文件包含如何使用该库的示例，但不包含 image4j 库本身。你可以去这里下载 image4j 库：

[http://image4j.sourceforge.net/](http://image4j.sourceforge.net/)

从那里下载 .zip 文件并解压缩后，您应该会看到一个名为“image4j-core-0.7”的文件夹。该文件夹内是一个 image4j.jar 文件。我在我的 IDE 中检查了它，那个 JAR 文件确实有 net.sf.image4j.codec.ico 包。将该库添加到您的项目中，然后再试一次。

# python - 在 Python 中使用定时刷新检查打开的文件

> ID：14668936
> 
> 赞同：0
> 
> 时间：2013-02-03T02:34:16.050
> 
> 标签：python, file-io, time

我想知道如何让一个函数每分钟刷新一次，并检查它是否打开了某个文件。我不完全知道该怎么做，但这是我正在寻找的一个例子：

```
def timedcheck():
   if thisgame.exe is open:
      print("The Program is Open!")
   else:
      print("The Program is closed!")
      *waits 1 minute*
      timedcheck() 
```

我还希望脚本每分钟刷新一次函数“def timedcheck（）：”，因此它会不断检查 thisgame.exe 是否打开。

我已经搜索了该站点，所有建议都建议使用“import win32ui”，但这样做时会出错。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T02:49:18.243

每分钟重复一次检查：

```
def timedcheck():
   while True:
       if is_open("thisgame.exe"):
          print("The Program is Open!")
       else:
          print("The Program is closed!")
       sleep(60) 
```

由于它是一个 .exe 文件，我假设“检查此文件是否打开”是指“检查 thisgame.exe 是否正在运行”。[psutil](http://code.google.com/p/psutil/ "psutil")应该会有所帮助 - 我没有测试下面的代码，所以它可能需要一些调整，但显示了一般原则。

```
def is_open(proc_name):
    import psutil
    for process in psutil.process_iter():
        if proc_name in process.name:
            return True
    return False 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T16:38:05.047

这是[@rkd91 答案](https://stackoverflow.com/a/14669001/4279)的变体：

```
import time

thisgame_isrunning = make_is_running("thisgame.exe")

def check():
   if thisgame_isrunning():
      print("The Program is Open!")
   else:
      print("The Program is closed!")

while True:
    check() # ignore time it takes to run the check itself
    time.sleep(60) # may wake up sooner/later than in a minute 
```

其中`make_is_running()`：

```
import psutil # 3rd party module that needs to be installed

def make_is_running(program):
    p = [None] # cache running process
    def is_running():
        if p[0] is None or not p[0].is_running():
            # find program in the process list
            p[0] = next((p for p in psutil.process_iter()
                         if p.name == program), None)
        return p[0] is not None
    return is_running 
```

要[`psutil`](http://code.google.com/p/psutil/)在 Windows 上安装 Python 2.7，您可以运行[`psutil-0.6.1.win32-py2.7.exe`](http://code.google.com/p/psutil/downloads/detail?name=psutil-0.6.1.win32-py2.7.exe).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T02:39:44.987

您可以使用[时间模块](http://docs.python.org/2/library/time.html#time.sleep)中的睡眠，输入为 60，在检查之间延迟 1 分钟。您可以暂时打开文件并在不需要时将其关闭。如果文件已打开，则会发生 IOError。捕获带有异常的错误，程序将再等待一分钟，然后再重试。

```
import time
def timedcheck():
   try:
      f = open('thisgame.exe')
      f.close()
      print("The Program is Closed!")
   except IOError:
      print("The Program is Already Open!")
   time.sleep(60) #*program waits 1 minute*
   timedcheck() 
```

# php - ExcelPHP 设置困难

> ID：14668938
> 
> 赞同：3
> 
> 时间：2013-02-03T02:34:46.760
> 
> 标签：php, excel

我正在尝试使用 require 来加载 ExcelPHP API 来操作 CSV 电子表格。我将 EasyPHP 12.1 与 PHP 5.4.6、Apache 2.4.2、MySQL 5.5.27 和 Xdebug 2.2.1 一起使用。我在 Windows 7 上。

当我尝试运行以下代码时：

```
require_once('classes/PHPexcel/Autoloader.php');

$mySheet = 新 PHPExcel();

```

我收到一个致命错误：

> 注意：使用未定义的常量 PHPEXCEL_ROOT - 在第 73 行的 C:\Program Files\EasyPHP-12.0\www\Classes\Classes\PHPExcel\Autoloader.php 中假定为“PHPEXCEL_ROOT”
> 
> 致命错误：第 31 行的 C:\Program Files\EasyPHP-12.0\www\Classes\Classes\PHPExcel\Autoloader.php 中找不到类 'PHPExcel_Shared_ZipStreamWrapper'

我尝试在 Autoloader.php 文件中注释掉第 31 行，这样可以防止致命错误，但是 API 将无法工作，并且 PHP 无法识别 PHPExcel 类。

有人可以帮我弄清楚如何让我的图书馆工作吗？提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T10:53:38.240

在您的要求中加载 PHPExcel 类一次，而不是 Autoloader（如 Seth 所说）。区分大小写也是一个潜在的问题，因为除非你做对了，否则你的脚本不会毫无错误地传输：

```
require_once('classes/PHPexcel/Autoloader.php'); 
```

应该

```
require_once('classes/PHPExcel.php'); 
```

并且该库是 PHPExcel，而不是您在主题行中调用的 ExcelPHP

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-03T08:30:25.663

而不是您当前的要求声明，您应该调用

```
require_once('classes/PHPExcel.php'); 
```

该文件定义了您缺少的常量`PHPEXCEL_ROOT`，然后调用`require_once()`自动加载器文件。它还加载`class PHPExcel`整个库使用的主要内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-26T15:19:20.400

这可能来得太晚了，因为 PHPExcel 已经转向 PHPSpreadsheet，但是如果您仍在使用 PHPExcel 并且想要使用自动加载器，那么您所要做的就是在需要自动加载器之前定义 PHPExcel 根。

```
define('PHPEXCEL_ROOT', dirname(__FILE__).'/'); 
```

我在我的自定义 mvc 框架中使用它作曲家

```
require_once ROOT . '/vendor/autoload.php';
PHPExcel_Autoloader::Register(); 
```

# javascript - SVG 悬停时的奇怪行为仅在 Firefox - svg-jquery 中。

> ID：14668939
> 
> 赞同：1
> 
> 时间：2013-02-03T02:34:53.233
> 
> 标签：javascript, css, firefox, svg, jquery-svg

当我注意到向元素添加悬停效果时，我只是在玩 SVG，但仅在 FE 中行为相当奇怪。在 ie，chrome 等中，它的所有工作都如我所料。

简而言之，悬停在元素上确实会添加悬停样式，但并非总是如预期的那样。

奇怪的是，如果您滚动到 1000 SVG（压力测试）的底部并将鼠标悬停在 lst 元素下方的白色区域，您会看到它应用了悬停效果而不接触元素。

这就是我构建 SVG 的方式

```
 for (var i=0;i<1000;i++)
{
    var newBlock = $('<div id="map'+i+'">');
    newBlock.svg();
    newBlock.appendTo($('body'));
    console.info(newBlock);
    var svg = newBlock.svg('get');
    svg.polygon([[17,0],[33,8],[33,27],[16,34],[0,26],[0,8]], {fill: '#B8E100', stroke: '#A5CC00', strokeWidth: 1});
} 
```

[http://jsfiddle.net/2cB89/](http://jsfiddle.net/2cB89/)

任何想法为什么会发生这种情况以及为什么它只发生在 Firefox 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T08:37:06.847

您需要提供 svg 元素的宽度和高度属性。

`var svg`在该行之后添加以下内容。

```
 svg.configure({width: '34px', height: '35px'}); 
```

没有它们，svg 的大小应为 300 x 150 像素。Chrome 没有正确实现大小，而 Firefox 确实如此，尽管在您的情况下，Chrome 的默认行为更接近您想要的。

这是一个[更正的 jsFiddle](http://jsfiddle.net/longsonr/MeTq7/)

# php - 从一个表中选择结果，并为每一行从另一个表中选择具有相同 id 的所有行

> ID：14668950
> 
> 赞同：1
> 
> 时间：2013-02-03T02:36:46.567
> 
> 标签：php, mysql, group-concat

更新：由于第一个问题已解决（谢谢 - 我将第一个问题保留在底部供您查看），正确的连接现在可以正常使用。问题是它只拉入那些有联系的照片。无论它们是否有连接，我将如何提取所有照片？

添加 LEFT JOIN 而不是 JOIN 似乎会拉入所有照片，除了它向没有任何...的照片添加“连接”......有点奇怪。

* * *

这很难解释，但我会尽力而为。首先，让我为冗长的标题道歉，我只是试图让它尽可能详细。

这是关于在画廊中显示照片（user_album2 表）。每张照片都会显示“连接”（来自 user_connected 表）。user_connected 表的一个示例是：

```
fk_pic_id | fk_user_id | fk_user_id_conn 
```

这些列中的每一列都是 INT，拉取照片 ID #，建立连接的用户 ID #，以及连接的用户 ID #。

您在以下代码中看到的所有“get_”函数都是提取用户信息的简单函数（因此，如果它是“get_profession”，它将获得职业 id #）。

```
$query = mysql_query("SELECT a.pic_id, a.fk_user_id as uid, a.picture_number, a.picture_name, a.id, a.featuredphoto, c.fk_pic_id, GROUP_CONCAT(CONVERT(c.fk_user_id_conn, CHAR(8))) as cuids 
                        FROM user_album2 a LEFT JOIN user_connected c ON a.pic_id = c.fk_pic_id GROUP BY a.pic_id ORDER BY RAND() LIMIT 40") or die(mysql_error());
    while ($row = mysql_fetch_array($query)) {
        $pic_id = $row['pic_id'];
        $userid = $row['uid'];
        $photonum = $row['picture_number'];
        $photo = $row['picture_name'];
        $photoid = $row['id'];
        $featured = $row['featuredphoto'];
        $photogid = $row['fk_photog_id'];
        $modelid = $row['fk_model_id'];

        $cuids = explode(',',$row['cuids']);
        if (get_profession($userid) == 1) {
            $modeltag = get_name($userid);
            $modelpic = get_photo($userid);
            $modelLink = get_profile_link($userid);
            foreach ($cuids as $c) {
                $cprof = get_profession($c);
                if ($cprof == 2) {
                    $photogtag = get_name($c);
                    $photogpic = get_photo($c);
                    $photogLink = get_profile_link($c);
                }
            }
        } elseif (get_profession($userid) == 2) {
            $photogtag = get_name($userid);
            $photogpic = get_photo($userid);
            $photogLink = get_profile_link($userid);
            foreach ($cuids as $c) {
                $cprof = get_profession($c);
                if ($cprof == 1) {
                    $modeltag = get_name($c);
                    $modelpic = get_photo($c);
                    $modelLink = get_profile_link($c);
                }
            }
        }

        $classMargin = $modeltag && $photogtag ? ' add-bot-margin':'';

        $myreturn .= '<li>'
                            .'<div class="inner">'
                                .'<img border="0" alt="" src="'. $baseurl . $photo .'&w=188&h=150&zc=1" />'
                                .'<div class="details">'
                                    .'<a href="'. $baseurl .'photos/'. $userid .'/'. $photoid .'/'. $photonum .'" class="img-link">view image <strong>here</strong></a>'
                                    .'<div class="info-contain-details">';

        if ($modeltag) {
                $myreturn .=        '<div class="details-info model-info'. $classMargin .'">'
                                            .'<a href="'. $baseurl . $modelLink .'" class="link-image"><img border="0" alt="" src="'. $baseurl .'img.php?src=/memberpictures/'. $modelpic .'&w=30&h=30&zc=1" /></a>'
                                            .'<div class="photo-info">'
                                                .'<a href="'. $baseurl . $modelLink .'" class="link-view-more">view more from</a>'
                                                .'<a href="'. $baseurl . $modelLink .'" class="link-username">'. $modeltag .'</a>'
                                            .'</div>'
                                        .'</div>';
        }
        if ($photogtag) {
                $myreturn .=        '<div class="details-info photog-info">'
                                            .'<a href="'. $baseurl . $photogLink .'" class="link-image"><img border="0" alt="" src="'. $baseurl .'img.php?src=/memberpictures/'. $photogpic .'&w=30&h=30&zc=1" /></a>'
                                            .'<div class="photo-info">'
                                                .'<a href="'. $baseurl . $photogLink .'" class="link-view-more">view more from</a>'
                                                .'<a href="'. $baseurl . $photogLink .'" class="link-username">'. $photogtag .'</a>'
                                            .'</div>'
                                        .'</div>';
        }
        $myreturn .=            '</div>'
                                    .'<span class="details-bg"></span>'
                                .'</div>'
                            .'</div>'
                        .'</li>';
    } 
```

已修复：[出于某种原因，我这辈子都无法让专业部分正常显示。应该是：如果照片的职业所有者是模特，那么它应该检查照片与摄影师的联系（模特 = 1，摄影师 = 2）。我在“user_connected”表中有几行指向同一张照片，但是当它应该是一个模型和一个摄影师时，它一直显示相同的 2 个用户（两个“模型”），就是这样。] - 缺少一个“= " 登录 $cfprof if 语句，DOH！

如果您需要任何其他信息，请告诉我，并且一如既往地非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T19:14:22.670

固定的。问题出在 foreach 循环中，我还需要一个 ELSE 语句将 photogtag/modeltag 设置为 FALSE。

```
 if ($cprof == 2 && $c != '') {
    $photogtag = get_name($c);
    $photogpic = get_photo($c);
    $photogLink = get_profile_link($c);
} else {
    $photogtag = false;
} 
```

# javascript - 在回调中更改对象时的奇怪行为：为什么...？

> ID：14668953
> 
> 赞同：1
> 
> 时间：2013-02-03T02:37:13.013
> 
> 标签：javascript, object

这段代码：

```
function CHANGE(d, cb){
    d.three = 3;
    d = {};
    console.log("d was changed into:");
    console.log(d);
    cb();
  }

  var d = { one: 1, two: 2 };
  CHANGE(d, function(){
    console.log("d after the callback is: ");
    console.log(d);
  }); 
```

既然`d`被*改写*了`CHANGE()`，确实应该显示`{}`为`d`。然而，结果很奇怪：

```
d was changed into:
{}
d after the callback is: 
{ one: 1, two: 2, three: 3 } 
```

因此，`d`已将属性`three`添加到其中。没关系。然后它被分配了一个空对象`{}`。

我不知道该怎么想。

在回调（）中添加一个额外的属性`three`，很好。然后对象被重写。美好的。打印输出显示该对象确实被重写了。然后，在回调中，它显示具有额外`three`属性的对象......？！？

如果它没有改变或重写，它将是一致的。但是……变了*一半*……？

事实上，没有必要使用回调来显示这一点。即使这样也有同样的问题：

```
function CHANGE( o ){
   o.three = 3;
   o = {};
 }

 var d = { one: 1, two: 2 };
 CHANGE(d);
 console.log("d after the function is: ");
 console.log(d); 
```

这里`d`又是完整的对象，包括`three`. 那么，我不能完全更改对象引用但可以更改属性的任何特殊原因......？

默克。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T02:39:04.653

```
d = {}; 
```

这会将您的变量重新定义为一个新对象，因此您会丢失旧的引用。这意味着在此之后原件不会被更改。

**编辑：**

如果要清除其属性的现有对象并重新分配其他一些对象，可以使用：

```
var a = {some:"stuff", other: "stuff"};

function clearProperties(obj) {
    for (var i in obj) {
         delete obj[i];
    }
}

console.log(a);
clearProperties(a);
a.newStuff = "stuff";
console.log(a); 
```

输出：

```
Object {some: "stuff", other: "stuff"} fiddle.jshell.net:28
Object {newStuff: "stuff"} 
```

[http://jsfiddle.net/2DxzT/](http://jsfiddle.net/2DxzT/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T02:40:29.163

当您更改参数时，您不会更改参数，您只会更改参数（在*函数*中）分配给的内容。

# c - 如何在指针上存储 long 的二进制值？

> ID：14668963
> 
> 赞同：0
> 
> 时间：2013-02-03T02:40:13.737
> 
> 标签：c, void-pointers, systems-programming

我有一个 void 指针，我想存储 long at 的二进制值。例如：

```
void * p;
long number;

p = malloc(16);
p = memset(p, 0, 16);
number = 15;

/* PRINTS FIRST 16 BYTES */
for(i = 0; i < memSize; i++)
     printf("%02x", ((unsigned char *) p) [i]);
printf("\n"); 
```

上面的代码将打印

```
00000000000000000000000000000000 
```

我想将前 8 个字节设置为“数字”的值，例如：

```
000000000000000F0000000000000000 
```

有没有一种简单的方法可以做到这一点？我想位移会起作用，但这可能会变得非常乏味。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T02:47:11.493

为什么不使用 memcpy？

```
 memcpy (p, &number, sizeof(number)); 
```

您是否关心字节的顺序（最重要与最不重要）？也许你应该阅读[http://en.wikipedia.org/wiki/Endianness](http://en.wikipedia.org/wiki/Endianness)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T02:45:12.610

尝试类似的东西

```
*((uint32_t*)p) = number; 
```

# c - 无法让字符串数组复制一个随机值

> ID：14668965
> 
> 赞同：1
> 
> 时间：2013-02-03T02:40:52.367
> 
> 标签：c, arrays, string

```
void getName(char* value)
{

  const char *nameArray[] = { "bob", "billy", "jimbob", "boba fett", "chuck norris", "jimmy", "craig",
        "howard", "leonard", "raj", "sheldon", "penny", "jenny", "sean", "amy", "bernadette",
        "matthew", "olga", "ryan", "suanne", "darth vader", "luke", "spock", "kirk", "picard",
        "michele", "randy", "suanne", "bruce lee", "garrett", "sophie", "gloria"};

  int i = rand() % 33 + 1;

  strcpy(value, nameArray[i]);
  //value = nameArray[i];
} 
```

我试图从这个数组中获取一个随机名称并将其存储在值中。我已经对其进行了调试，发现`strcpy`它使我的程序崩溃。如果`strcpy`被注释掉并且`value = nameArray[i];`没有被注释掉，那么它不会做任何事情并将值留空。请帮忙！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T02:50:06.800

数组中只有 32 个字符串`nameArray`。但是当你这样做时：

```
int i = rand() % 33 + 1; 
```

`i`可以达到 33。所以当`i`是 33 时，您正在调用*未定义的行为*。

你可能想要：

```
int i = rand() % 32; 
```

在 C 中，记住数组索引从`0`到`N-1`。不是从 1 到 N。

还要确保`value`在复制到它之前已经分配了内存。

# java - Guice：用复杂的创建模式连接一个 bean

> ID：14668968
> 
> 赞同：2
> 
> 时间：2013-02-03T02:41:08.913
> 
> 标签：java, dependency-injection, guice

我正在使用 Guava`EventBus`为发布-订阅消息服务创建一个。我也是第一次尝试使用 Guice。我已经阅读了 Guice 教程，并且一直在玩`AbstractModule`和`Binder`类。但是当我离开教程并尝试真正为我的项目工作的那一刻，我就窒息了。

我的项目有`EventMonitor`一个 Guice 注入的 Guava 实例`EventBus`：

```
public class EventMonitor {
    @Inject
    private EventBus guavaEventBus;

    // ...
} 
```

在我的应用程序的 Guice/DI/Bootstrapping 代码中，我定义了一个`AbstractModule`混凝土：

```
public class MyAppModule extends AbstractModule {
    @Override
    public void configure() {
        // Here is where I want to wire together the EventBus to give
        // to the EventMonitor.
    }
} 
```

最终，我想要一个`EventBus`通常会像这样构造的（在非 Guice 代码中）：

```
ThreadFactory factory = ThreadManager.currentRequestThreadFactory();
Executor executor = Executors.newCachedThreadPool(factory)
EventBus eventBus = new AsyncEventBus(executor); 
```

`ThreadManager`由于 and 上的两个（看似不可注入的）静态方法，我感到窒息`Executors`，并且因为我的参考是针对 an`EventBus`但实际对象是 an `AsynEventBus`; 因此我不确定如何绑定它：

```
// Doesn't work because how does Guice know I'm referencing an AsyncEventBus?!?
bind(EventBus.class).toInstance(executor);

// Doesn't work because now I've lost the ability to pass the
// AsyncEventBus an 'executor' and no-arg ctor is used!
bind(EventBus.class).to(AsyncEventBus.class); 
```

所以我问：考虑到我想要构建 my 的方式`EventBus`，一个久经沙场的 Guice 老兵如何将这里的东西连接起来（使用`ThreadFactory`、`Executor`和`EventBus`），以便在`EventMonitor`完全配置`EventBus`的情况下正确注入？我想一旦我看到这个更“复杂”的例子，我就会开始透过树木看到森林。提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-03T03:05:31.893

> 一个久经沙场的古斯老兵怎么会把事情传到这里来？

两个词：提供者方法。

```
public class MyAppModule extends AbstractModule {
    @Override
    public void configure() {
        bind(EventBus.class).to(AsyncEventBus.class);
    }

    @Provides @Singleton
    ThreadFactory providesThreadFactory() {
        return ThreadManager.currentRequestThreadFactory();
    }

    @Provides @Singleton
    Executor providesExecutor(ThreadFactory factory) {
        return Executors.newCachedThreadPool(factory)
    }

    @Provides @Singleton
    AsyncEventBus providesAsyncEventBus(Executor executor) {
        return new AsyncEventBus(executor);
    }
} 
```

命名`@Provides`以“提供”开头的方法的约定并不是 guice 需要的，而是您真正想要做的事情，尤其是在大型代码库中。能够通过代码体搜索“提供”并找到提供特定对象的方法。

回答评论中的问题的一些注意事项：

*   Guice 检查`Module`您为方法安装的每个实例`@Provides`，并安装它们，就像您将方法的返回类型绑定`.toProvider`到匿名`Provider`实例一样。所以关于它们的好处是你不需要在你的`configure`方法中添加任何额外的代码来让它使用它们。

*   注释告诉 guice 你只想要那个东西的`@Singleton`一个实例，所以它只会调用该`provides*`方法一次。默认情况下，如果您将其关闭，则在每次需要注入实例时让 guice 调用您的提供程序和/或实例化一个新对象（取决于您为该类配置的内容）。注意：有些人一发现这个就吓坏了，然后想把`@Singleton`“效率”到处放——这是不恰当的反应。实际上，您确实希望`@Singleton`谨慎使用，并且仅在拥有多个不同实例不正确的情况下使用。

    在这种情况下，我们要非常确定周围只有一个`EventBus`。只要您不直接注入`Executor`或`ThreadFactory`注入任何其他类，就可以将注释从这些方法中删除。因为`ThreadFactory`这几乎肯定不会有什么不同，因为我认为`ThreadManager.currentRequestThreadFactory()`每次调用它时都会返回相同的实例。`Executor`它会对`Executor`.

*   方法的参数的`@Provides`连接方式与配置的其余部分相同。例如，在这种情况下，我知道这`providesAsyncEventBus`将得到`Executor`返回的 ，`providesExecutor`因为这是实例 guice 将在被要求提供`Executor`. 如果我有两种这样的方法：

    ```
    @Provides @Singleton
    Executor providesExecutor1(ThreadFactory factory) {
        return Executors.newCachedThreadPool(factory)
    }

    @Provides @Singleton
    Executor providesExecutor2(ThreadFactory factory) {
        return Executors.newScheduledThreadPool(10, factory)
    } 
    ```

    然后，当您尝试创建注入器时，guice 会抛出配置错误，因为您已经告诉 guice 使用两种不同的方式来获取`Executor`. 现在，如果我有这样的东西：

    ```
    @Provides @Singleton
    ExecutorService providesExecutor1(ThreadFactory factory) {
        return Executors.newCachedThreadPool(factory)
    }

    @Provides @Singleton
    ScheduledExecutorService providesExecutor2(ThreadFactory factory) {
        return Executors.newScheduledThreadPool(10, factory)
    } 
    ```

    但是仍然有`providesAsyncEventBus`上面的方法，那么当你尝试创建注入器时，guice 会抛出一个错误，因为你没有告诉它如何创建`Executor`需要`providesAsyncEventBus`的。您需要额外的一行，例如：

    ```
    bind(Executor.class).to(ExecutorService.class); 
    ```

    在您`configure`解决问题的方法中。

*   至于你的`register`方法，你有几个选择。我认为到目前为止最简单的方法是向需要注册的对象`EventBus`的 -annotated 构造函数添加一个参数，然后作为构造函数的最后一行。`@Inject``evtBus.register(this)`

    其他选项包括使用静态注入（您可以阅读，但我不推荐），或`Set<Object>`使用 multibinder 将 a 与适当的注释绑定，然后在您创建 的同一启动代码中`Injector`，迭代该集合以注册任何内容。（第二种方法可以用一些不错的模式完成，但在您了解更多关于更简单的 guice 使用模式之前，我不会推荐它）

# r - 通过产生 NA 来捕获错误

> ID：14668972
> 
> 赞同：11
> 
> 时间：2013-02-03T02:42:09.557
> 
> 标签：r, error-handling

当函数返回错误而不是代码停止时，我希望得到 NA 。

我目前使用

```
try.test<-try(results<-lm(log(0)~1))
if(class(try.test)=="try-error"){results<-NA} 
```

我也尝试过使用 tryCatch。

我想找到一个单一的功能/线路解决方案。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-03T02:49:30.673

尝试

```
result <- tryCatch(lm(log(0)~1), error=function(err) NA) 
```

但这会捕获所有错误，而不仅仅是来自 log(0) 的错误。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-03T02:49:41.190

一种不太优雅但同样简短的解决问题的方法。

```
results <- NA
try(results<-lm(log(0)~1), silent = TRUE) 
```

如果您正在寻找一种处理错误的优雅方法，我建议您研究 monad 的概念；使用这些结构可以减少脚本中“if(!na(x))....”样板的数量。

# java - 基于 java.util.linkedlist 创建我自己的有限链表

> ID：14668974
> 
> 赞同：0
> 
> 时间：2013-02-03T02:43:00.417
> 
> 标签：java, class, collections, constructor, linked-list

我想做一些简单的事情，即创建我自己的基于 java.util.linkedlist 的列表类，但我想限制可以做的事情。就目前而言，我想要的唯一方法是 addFirst 方法。我正在创建一个单链表。我遇到的问题是 addFirst 似乎没有被识别，我不确定我是否在我自己的构造函数中正确创建了列表。这是我到目前为止的代码。

```
import java.util.LinkedList;

public class singleList {

singleList() {
     new LinkedList();
 }

//  void add(name addName) {
//      addFirst(addName);
//  }

public static void main(String[] args) {

singleList nameList = new singleList();

 name name1 = new name("John", "Smith");
 nameList.add(name1);

System.out.println("LinkedList contains : " + nameList);

 }
} 
```

所以你可以看到我想要做的是创建一个名为 nameList 的列表，此时，它唯一能做的就是使用 add 方法，它应该调用 LinkedList 的 addFirst 方法，该方法将元素添加到第一个位置列表。这有意义吗？

我得到的第一个错误是它无法从我的 add 方法中找到符号“addFirst”，而且我也不确定我的 singleList 构造函数是否正确。

## 如果有人想知道，这是为了学校作业。

这是修改后的代码，我从这里的第一个答案中得到了一些建议，看起来与另一个相似。

```
public class SingleList {

private LinkedList internalList;

SingleList() {
     internalList = new LinkedList();
 }

void add(name addName) {
    internalList.addFirst(addName);
}

String get(int index) {

    return internalList.get(index).toString();

}

public static void main(String[] args) {

    SingleList nameList = new SingleList();

    name name1 = new name("John", "Smith");
    nameList.add(name1);

    String getter = nameList.get(0);  
    System.out.println("LinkedList contains : " + nameList.get(0));

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T02:50:58.507

您的类应该实现 List 接口并将其方法重定向到链表：

```
public class singleList implements List {
    private LinkedList internalList;

    public singleList() {
        internalList = new LinkedList();
    }
    public boolean add(Object e) {
        return internalList.add(e);
    }

    public remove(Object o) {
        throw new RuntimeException("Not implemented.");
    }

    ...
} 
```

对于您想要限制的方法，只需抛出异常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T02:58:17.540

您发布的代码的问题是您没有将 分配`LinkedList`给任何东西，然后该`addFirst()`方法被编写为好像它是`singleList`该类的静态方法，它不存在。我相信你试图做的是：

```
import java.util.LinkedList;

public class SingleList<T>
{
    private LinkedList<T> internal;

    SingleList()
    {
        this.internal = new LinkedList<>();
    }

    public void add(T addName)
    {
        this.internal.addFirst(addName);
    }

    @Override
    public String toString()
    {
        if(!this.internal.isEmpty())
        {
            return this.internal.get(0).toString();
        }
        else
        {
            return this.internal.toString();
        }
    }

    public static void main(String[] args)
    {
        SingleList<name> nameList = new SingleList<>();
        name name1 = new name("John", "Smith");
        nameList.add(name1);
        System.out.println("LinkedList contains : " + nameList);
    }
} 
```

这也有泛型的好处，这意味着它可以使用任何可以使用的类型`LinkedList`。此外，我冒昧地更改了类名的大小写，因为 Java 标准是对类名使用正确的大小写，而对变量使用生硬的大小写。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T03:01:39.467

> 这有意义吗？

没有那么多。但是，在您周围进行测试并不需要它。

> 我得到的第一个错误是它无法从我的 add 方法中找到符号“addFirst”，而且我也不确定我的 singleList 构造函数是否正确。

您将其命名为 add，而不是 addFirst。
构造函数不行。
方法和构造函数可能如下所示：

```
public class singleList {
    private LinkedList<name> listName = new LinkedList<>();

    void addFirst(name addName) {
        listName.addFirst(addName);
    }
} 
```

如您所见，不再有构造函数。这是因为java自动添加了一个默认构造函数：

```
public singleList() {
} 
```

然后，我添加了一个私有类变量，这是您访问列表所需的。

```
System.out.println("LinkedList contains : " + nameList); 
```

* * *

这将不起作用，您的单列表和名称类必须实现 toString，例如：

```
@Override
public String toString() {
    return listName.toString();
} 
```

（名称类也必须实现 toString）

* * *

一些进一步的提示：

尝试使用标准的 java 命名约定。就像类的大写名称一样：

```
import java.util.LinkedList;

class Name {
    private String firstName;
    private String secondName;

    public Name(String firstName, String secondName) {
        this.firstName = firstName;
        this.secondName = secondName;
    }

    @Override
    public String toString() {
        return "Name [firstName=" + firstName + ", secondName=" + secondName + "]";
    }
}

public class SingleList { //should have a better name perhaps

    private LinkedList<Name> listName = new LinkedList<>();

    public SingleList() {
    }

    void addFirst(Name name) {
        listName.addFirst(name);
    }

    @Override
    public String toString() {
        return listName.toString();
    }

    public static void main(String[] args) {
        SingleList listName = new SingleList();

        Name newName = new Name("John", "Smith");
        listName.addFirst(newName);

        System.out.println("LinkedList contains : " + nameList);
    }
} 
```

试着从这一点继续，我相信你还有更多的事情要做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T02:58:20.053

从哪儿开始 ...

*   除非您的类是`extends`类`LinkedList`（或其他`List`类）或接口，否则它不会`implements`是.`List``List`

*   如果您的类不是 a `List`，那么它将没有`addFirst`方法（除非您定义了一个）。这就是为什么你不能`addFirst`在你的方法中调用`add`方法！

*   您的构造函数正在创建一个`LinkedList`实例......然后将其丢弃。那是没有意义的。我怀疑你应该把它分配给……某事。（暗示）

*   该语句`println("LinkedList contains : " + nameList)`将调用对象`toString()`上的方法`nameList`将其转换为字符串。由于您创建了一个不扩展现有`List`类的类，因此您需要覆盖...`toString`提供的类，因为*该*版本不会显示您列表的内容！`Object`

 *您可以在这里使用两种方法。您可能正在创建一个覆盖父 ( `List`) 类行为的类，或者您可能正在创建一个`List`内部包含真实类的“包装”类。你什么都不做。

包装类可能会更简单地解决您的直接需求……*假设*您不需要真正的`List`类。另一种方法将要求您覆盖您想要阻止的*每个*[`UnsupportedOperationException`](http://docs.oracle.com/javase/7/docs/api/java/lang/UnsupportedOperationException.html)方法以使其抛出异常（通常是......），对 API 中的所有操作执行此操作`LinkedList`会很乏味。

最后，当我引起您的注意时，Java 类名应该**始终**以大写字母开头。*

# php - 快速读/写的最佳存储

> ID：14668979
> 
> 赞同：-1
> 
> 时间：2013-02-03T02:43:59.230
> 
> 标签：php, mysql, sql

我想知道，我想正确地做到这一点。我有一堆关于 5 行数据的数据，例如 api 密钥、站点名称、远程服务地址。

现在我正在考虑两种选择，但我想选择更快的一种。考虑到的应用程序是一个电子商店，它将容纳大约 50k 产品，因此加载时间将受到影响。现在我需要存储的数据将由应用程序更改，所以我有一个问题：

这是更快更好的选择。将数据保存在 XML 中并读取和更改 XML 文件或将数据保存在 SQL 表中。读取非常小的 xml 文件或运行 SQL 查询是否更快，重写 xml 文件或运行更新查询是否更快。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T02:46:56.877

将数据保存在“SQL 表”中比 XML 快得离谱。请谷歌示例。

# ruby-on-rails - Rails has_many 关系返回错误数量的模型对象

> ID：14668980
> 
> 赞同：1
> 
> 时间：2013-02-03T02:44:22.157
> 
> 标签：ruby-on-rails, ruby, rails-activerecord

导轨版本：3.1.10

你好。我有一个`user`与模型有`has_many`关系的`account`模型。对于一个特定用户，有 5 个帐户。但是，当我询问相关模型时，我只得到了 3 个：

```
> user.accounts.class
 => Array
> user.accounts.count
   (0.2ms)  SELECT COUNT(*) FROM "accounts" WHERE "accounts"."user_id" = 1
 => 5
> user.accounts.all.class
 => Array
> user.accounts.all.count
 => 3 
```

我认为有一些 ActiveRecord 缓存正在进行，因为调用`user.accounts.all`不会生成数据库查询。但真正难倒我的是即使`user.accounts.class`和`user.accounts.all.class`都等于`Array`，调用该`:count`方法做了两件完全不同的事情。

我对 ruby​​ 还很陌生，但我知道你可以通过动态定义对象的方法来做一些魔术。这就是这里发生的事情吗？ActiveRecord 是否`Array`在第一种情况下给我一个修改？

# html - 为什么我的 CSS 元素与网页顶部不对齐？

> ID：14668981
> 
> 赞同：0
> 
> 时间：2013-02-03T02:44:54.323
> 
> 标签：html, css

出于某种原因，我在示例图像中的元素不会与页面顶部对齐。我有一段时间没有使用 HTML/CSS，但我看不到任何可以将矩形向下移动约 5px 的编码方式。![在此处输入图像描述](../Images/5f9c166e25f3b0338424605a8a166c10.png)

我正在尝试在此页面上实现栏：http: [//gradients.glrzad.com/](http://gradients.glrzad.com/)

这是我的代码。HTML：

```
<!DOCTYPE "html">
<html>
<head>
<title>Mobile Site</title>
<link href="mobileCSS.css" rel="stylesheet" type="text/css">
</head>
<body>
<div id="titleBar">
<strong>Coles Web</strong>
</div>
<div id="container">

</div>
</body>
</html> 
```

CSS：

```
@charset "utf-8";
/* CSS Document */

body{
    background-color:#666;
}
#container{
    width:auto;

}

#titleBar{
    position:fixed;
    position:relative;
    width:auto;
    height:15px;
    text-align:left;
    font-family:Verdana, Geneva, sans-serif;
    font-size:small;
    color:#00FFFF;
    background-color:#000;
    box-shadow:0 3px 5px #333333;
    border-bottom-left-radius:3px;
    border-bottom-right-radius:3px;
}

.bubble{
    width:auto;
    height: 40px;
    position:relative;
    border-spacing: 3px;
    background-color:#0FF;
    border-radius:3px;
    font-family:Impact, Verdana, Geneva, sans-serif;
    text-align:center;

} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T03:13:02.100

```
body{
    background-color:#666;
    padding: 0;
    margin:0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T05:21:01.133

将以下内容添加到#titlebar：

```
top:0;
left:0; 
```

此外，您只能拥有一个职位。相对的或固定的。

# android - 单击复选框后从 LinearLayout 中删除 TextView

> ID：14668982
> 
> 赞同：0
> 
> 时间：2013-02-03T02:45:04.117
> 
> 标签：android

> **可能重复：**
> [以编程方式从 LinearLayout 中删除 TextViews 时遇到问题](https://stackoverflow.com/questions/5934642/having-a-problem-removing-textviews-from-a-linearlayout-programmatically)

嗨，我对这个 Android 东西还是很陌生，我想知道是否有人能弄清楚如何解决我的问题？我在谷歌上查看了有关如何从 LinearLayout 中删除 textView 的提示，但没有一个案例奏效。

```
if (breakCheck.isChecked()) {
            if (!clickedOnce) {
                ll.addView(prompt_break);
                prompt_break.setVisibility(View.VISIBLE);
                clickedOnce = true;
            }
        } else {
            prompt_break.setVisibility(View.GONE);
            ll.removeView(prompt_break);
                ll.invalidate;

        }
} 
```

我试图在选中复选框时显示一个 TextView，然后在每次未选中该框时将其删除，但在我完成后我所做的任何事情都无法删除 TextView :( 请帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T04:51:34.853

您需要`onClickListener`为您的复选框设置一个，并将 TextView 的可见性设置为 GONE 。此外，您不必删除和添加 TextView。尝试这个：

```
breakCheck.setOnClickListener(new OnClickListener(){
    if(breakCheck.isChecked()){
        prompt_break.setVisibility(View.VISIBLE);
    }
    else{
        prompt_break.setVisibility(View.GONE);
    }
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T03:02:13.920

要使视图消失，请使用 setVisibility() 将其可见性设置为 GONE（如果要调整布局大小）或 INVISIBLE（如果要保留其为空的空间）。像这样隐藏它通常比实际删除它更好，如果您稍后要重新创建它，它的处理器成本会更低。只需为复选框设置一个 onClickListener 并在调用 onClickListener 时根据复选框的值更改文本视图的可见性。

# vb.net - 如何使用变量作为计时器的间隔？

> ID：14668986
> 
> 赞同：0
> 
> 时间：2013-02-03T02:45:13.377
> 
> 标签：vb.net, timer

我正在创建一个自动化程序，但我被计时器困住了。当我启动程序时，它只是说间隔是 0

这是我得到的：

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    Dim TextBox1 As String
    Dim URL As String
    Dim Textbox3 As Integer
    Dim i As Integer
    Dim Times As Integer
    Dim Time As Integer
    Dim Textbox2 As Integer
    Dim rampTimer As New Timer
    Dim Tyme As Integer
Restart:
    TextBox1 = URL
    UseProxy(ListBox1.Items.Item(i))
    WebBrowser1.Navigate(URL)
    Tyme = Textbox3 * 1000 * 6
    rampTimer.Interval = Tyme
    rampTimer.Enabled = True
    Time = Times + 1
    If Time = Textbox2 Then
        MsgBox("Done! Made by Laboboy31", "Done")
        GoTo Last
    End If
    Times = Time
    GoTo Restart
Last:
End Sub 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T03:16:09.743

Taking a bit of a wild guess here, but I suspect your main issue is around this sort of thing

```
Dim TextBox3 as Integer
    Tyme = Textbox3 * 1000 * 6
    rampTimer.Interval = Tyme 
```

Now I'm guessing you have a textbox on your form, called "textbox3". First rename it to something meaningful Like ClickInterval. and all the other windows components you are going to refer to in the code.

TextBox3 in your routine is the integer you declared with the dim statement. Because its an Integer, it gets initialised to 0, so Tyme = 0 * 1000 * 6, which is 0...

So given you do have a TextBox called TextBox3, that's the component itself. If you want the content then you'd refer to TextBox3.Text.

Last but not least TextBox.Text is a string, so you need to convert it to an integer(and deal with it not being one). so get rid of the dim statement and try

```
ramptimer.Interval = Convert.ToInt32(textBox3.text) * 1000 * 6 
```

if I'm on the right lines.

# asp.net-mvc - 使用 Chrome 进行 Windows 身份验证的 MVC 应用程序

> ID：14668987
> 
> 赞同：1
> 
> 时间：2013-02-03T02:46:02.727
> 
> 标签：asp.net-mvc, windows-authentication

我一直在这里阅读一些关于删除 Negotiate 并尝试其他东西的帖子。但我认为我的问题有所不同，因为 Chrome 甚至没有尝试提示我输入用户名或密码，而是自动尝试将我发送到不存在的 login.aspx 页面。

当前的 Web Config 设置为

```
<authentication mode="Windows" />
  <identity impersonate="true" /> 
```

IIS 7.5 Express 设置已禁用匿名并启用 Windows 身份验证

NTLM 是唯一的提供者 扩展保护关闭 启用内核模式身份验证已选中

有任何想法吗？

正如预期的那样，IE 运行良好。

我正在尝试学习 MVC，所以我一直致力于 MVC Store 项目。如果我使用本地 VisualStudio 开发服务器 Chrome 工作正常。所以它一定是 IIS 7.5 Express

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:27:04.020

[这是](http://www.drowningintechnicaldebt.com/ShawnWeisfeld/archive/2011/08/02/iis-7-401.2-error.aspx)解决类似问题的链接。希望这会帮助你。如果这无济于事，您能否提供有关该问题的更多详细信息？您可以在 chrome 扩展 (F12) 等调试器工具中检查事件日志中的错误和请求以获取更多信息。

# git - Github，用新项目代替旧项目

> ID：14668988
> 
> 赞同：4
> 
> 时间：2013-02-03T02:46:35.717
> 
> 标签：git, github, git-push

我在 github 上设置了一个 iOS 项目，在过去的几天里，我开始意识到我需要重构我的大部分代码。我构建项目时没有遵守 MVC 的许多基础知识，现在想回去修复所有问题。

主要问题是项目足够大，重构将是一个巨大的痛苦。**无论如何我可以开始一个新项目，将其构建到当前项目所在的位置（显然有一些重大的设计更改）并将其推送到 github 到同一个分支而不是原始项目？**如果不清楚，请告诉我。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-04T19:33:00.123

考虑到您希望保留旧历史，我会稍微扩展给定的答案。在这种情况下，您不想开始新的回购；您只想“处理”旧数据，清除旧数据并添加新数据。您可以通过以下步骤完成此操作：

1.  cd 进入项目目录的根目录。
2.  从文件系统中删除您不想要的所有内容。小心**离开 .git/ 文件夹**。那是您的存储库以前的历史记录。
3.  添加您想要的任何新内容（新的 Xcode 项目、目录结构等）。
4.  当您准备好提交时，`git status`会向您展示大量的删除和添加内容（其大小取决于您曾经拥有的文件数量）。没关系，您可以在这里对所有这些条目进行粗略的处理，使用`git add --all .`. 这将在你的 repo 中暂存所有内容、删除、新增内容，所有这些。
5.  `git commit -m "My new beginning"`.
6.  `git push origin myBranch --force`

瞧！您的存储库已完全改建，还有保留您以前的历史记录的额外好处。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-03T02:53:36.707

你可以。只需创建新项目并在命令行界面（Windows 中的 cmd，Linux 中的终端）中键入以下命令。

```
cd /path/to/project
git remote add origin git@github.com:username/repo.git
git push origin master --force 
```

那应该这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T02:51:27.780

您可以在 GitHub 和 .git/config 中创建一个新项目，将 url 更改为新的 repo

```
[remote "origin"]
   fetch = +refs/heads/*:refs/remotes/origin/*
   url = git@github.com:[yourname]/[yournewrepo] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-31T05:26:46.983

我发现最简单的方法是将您的 .git 文件/文件夹复制到新项目中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-22T13:14:13.653

面对类似的问题，我使用了 Stan 的建议（回答于 2014 年 8 月 31 日 5:26）。下面详细介绍了我为取得积极结果而采取的行动。

假设：

*   “旧项目”在 GitHub 存储库上
*   “新项目”在您的机器上本地创建

期望：

*   新项目必须推送到 github 上的旧仓库
*   旧的提交历史必须保留并在 github 中可见

解决方案：

1）转到本地计算机上的“旧项目”文件夹

2）在那里找到隐藏的“.git”文件夹并复制它

3）转到您机器上的新项目文件夹

4）检查是否有 .git 文件夹（它是隐藏的，所以你需要显示隐藏文件） - 如果有 .git 文件夹重命名它，你可以删除它，但最好现在重命名并删除，如果一切都会去按计划 - 如果没有 .git 文件夹，请转到下面的第 5 点。5）粘贴先前复制的.git文件夹（来自旧项目）并将其粘贴到“新项目”文件夹中

现在，新项目有一个 .git 文件夹，其中包含所有以前的更改和历史记录，并包含对 GitHub 上旧 repo 的 URL 的引用。

6）如果您使用例如VS，您可以检查代码的变化。会有很多，或者在终端检查它们。您可以检查是否删除了旧文件并添加了新文件。

7）推送实际的新项目。这个新项目将被推送到你在 GitHub 上的旧仓库。检查您在网络上的 git repo 以确保一切顺利。

8) 现在您可以从本地机器上删除旧项目并删除这个重命名的新 git 隐藏文件夹（它在第 4 点被重命名）。

现在您可以开发您的新项目，同时保留所有旧历史。

希望能帮助到你。

# meteor - 如何在 Meteor 中使用`moment.js`？

> ID：14668993
> 
> 赞同：10
> 
> 时间：2013-02-03T02:47:34.793
> 
> 标签：meteor, npm, momentjs

我想将momentjs与流星一起使用。这是一个 npm 包，所以据我了解，它不能与流星一起使用，因为流星使用它自己的包系统。所以这是我的问题：

*   有谁知道将momentjs与流星一起使用的方法？
*   有没有办法将 npm 包与流星一起使用？

**2017 年编辑**：从 Meteor 1.4+ 开始，npm 包管理允许 npm 模块的标准导入和 Atmosphere 模块的命名导入。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2014-12-12T05:11:47.650

泰勒，我有同样的问题，而且肯定有很多人试图尽快找到正确的答案，因为这是一件容易的事，即使第一次使用流星的人（如我）有这种的问题...

**流星包管理**

首先，我们不会使用 NPM，我们将使用 Meteor 包管理[AtmosphereJS](https://atmospherejs.com/)中使用的“Meteor”此外，您会在这里找到其他令人惊叹的包......

**所以让我们开始吧**

打开您的终端并直接转到您的应用程序所在的位置，您必须安装正确的依赖项才能这样做：

**安装唯一的依赖**

这将适用于 Meteor 1.*

```
 meteor add momentjs:moment 
```

**编译你的应用程序**（你可以现在或以后做）

这会将这个包添加到您的应用程序中，然后再次编译它

```
meteor 
```

并转到您的 isClient 中的任何文件，这就是

```
if (Meteor.isClient) {   } 
```

[你可以像他们在他们的网站MomentJs](http://momentjs.com/)上展示的那样使用“时刻”方法！

**例子**

举个例子，这就是我在我的流星应用程序中使用的方式

```
moment(dateToPass).fromNow(); 
```

因为我使用的是 Mongo，所以原始数据看起来像这样。

```
"createdAt" : ISODate("2014-12-12T04:01:21.768Z") 
```

我必须做一个简单的查找查询来获取您的数据，然后您可以像这样处理您的数据（此代码将让您了解我如何使用包含 Date() 的 CreatedAt 值来使用它与 MomentJS）

```
var theItemsOnTheArray = SomeArray.find();
var dateToPass;
theItemsOnTheArray.forEach(function (item) { dateToPass = item.createdAt });
return moment(dateToPass).fromNow(); 
```

**结果将是**

```
// 3 years ago
// 2 years ago
// 21 hours ago
// in 3 hours
// 5 minutes ago 
```

代替：

```
Thu Dec 11 2014 20:14:08 GMT-0800 (PST) 
```

我希望它对你们中的任何人有用，如果您认为它有有价值的信息，请 +1 ;) 谢谢！

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-03T03:09:25.557

对于像 moment.js、validate.js、underscore.string.js 等独立的 js 库，您只需将源文件拖放到您的`lib`文件夹中即可。我`client/lib`用于仅在客户端上使用的库（如 validate.js），以及`lib`可供客户端和服务器使用的库（如 moment.js）。

如果你使用[陨石](https://github.com/oortcloud/meteorite)，你可以利用[大气](https://atmosphere.meteor.com/)包。您正在寻找的一些东西可能在那里。

使用来自流星的 npm 模块是很多人询问的问题（有充分的理由）。[你可以在这里](https://github.com/oortcloud/unofficial-meteor-faq#what-about-nodejs-modules)看到一些注释，尽管我亲耳听说流星与 npm 包的对话方式即将发生重大变化。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-03-19T20:46:54.293

**2017 更新**- Meteor 1.4+ 使用`npm`带有 ES6 的模块。OP是2013年的。

因此...

**仅 npm 的方式：**

以这种方式安装[`moment`](https://www.npmjs.com/package/moment)到您的流星`npm`项目`import`......

```
$ cd /path/to/my/meteor/project
$ npm install --save moment

// inside your Meteor app files...
import moment from 'moment'; 
```

**使用一揽子导入的流星-npm 方式**：（谢谢，@Dave Gööck）

```
$ cd /path/to/my/meteor/project
$ meteor npm install --save moment

// Inside Meteor app...
import * as moment from 'moment';
// OR
import moment from 'moment'; 
```

有关 Meteor-npm 包导入的更多信息，请[点击此处](https://guide.meteor.com/structure.html#importing-from-packages)。（特别提到`moment`）。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-07-02T01:51:13.253

这个问题是3年前问的，当时还没有大气的官方包。由于提出了问题，事情发生了变化，我指出了该包何时添加到流星回购中。

从大气安装官方包

```
meteor add momentjs:moment 
```

如果您使用的是打字稿，只需

```
import * as moment from "moment/moment"; 
```

然后在你的代码中

```
let date = moment(<some date>).format('YYYY MM DD'); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-06-20T10:40:41.000

我有一个更复杂的问题，因为：

1.  我想添加“pl”语言环境
2.  我需要它来使用 TypeScript

我很想听听有一种更简单的方法可以实现这些目标，但我采取了以下步骤来最终使其发挥作用：

第1步。`$ meteor add momentjs:moment`

步骤 2\. 下载文件[https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/moment/moment-node.d.ts](https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/moment/moment-node.d.ts)并保存为 ./typings/moment/moment.d.ts （出于某种原因只是执行`typings install dt~moment--global --save`不会成功，因为它只会下载一个几乎空的[https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/moment/moment.d.ts](https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/moment/moment.d.ts)文件，该文件引用了 moment-node.d.ts包含真实内容的文件）

步骤 3\. 将以下行附加到 moment.d.ts：

```
declare module "meteor/momentjs:moment" {
  var moment: moment.MomentStatic;
} 
```

步骤 4\. 下载[https://raw.githubusercontent.com/moment/moment/develop/locale/pl.js](https://raw.githubusercontent.com/moment/moment/develop/locale/pl.js)（或任何其他语言环境）并将其保存在 ./client/lib/moment/locale/pl.js （或./client 下的任何其他目录）

步骤 5\. 编辑 ./client/lib/moment/locale/pl.js 的开头和结尾，在开头用一行替换加载器代码

```
import { moment } from 'meteor/momentjs:moment'; 
```

第 6 步。最后你可以在任何模块中使用 moment js，只需附加

```
import { moment } from "meteor/momentjs:moment"; 
```

在文件的开头，然后您可以执行以下操作：

```
moment(ts).locale('pl').format('LLL'); 
```

如果您使用的是 'meteor/tap:i18n' 包，您可能希望使用`TAPi18n.setLanguage(...);`在启动期间传递给的相同语言。您可能需要创建 typings/globals/meteor_tap_i18n.d.ts 文件

```
declare module "meteor/tap:i18n" {
  export var TAPi18n : TAPi18nStatic;
  interface TAPi18nStatic{
     setLanguage(name:string):any;
     getLanguage():string;
     __(name:string,params?:any):string;
  }
} 
```

然后你可以在你的模块中使用它

```
import { TAPi18n } from 'meteor/tap:i18n';
//...
moment(ts).locale(TAPi18n.getLanguage()).format('LLL'); 
```

# python - Python - 如何缩短操作

> ID：14668994
> 
> 赞同：0
> 
> 时间：2013-02-03T02:47:54.703
> 
> 标签：python

我知道在 Java 中，如果你想将一个变量添加到你可以使用 x++ 的变量中，Python 中有没有类似的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T02:48:59.290

您可以使用

```
x += 1 
```

python中不存在增量运算符。

正如 Lattyware 指出的那样，对于增量运算符的需求不如在 Java 或 C 中那么多。如果您有一个依赖`i+=1`于 python 的循环，您可能需要重新考虑您的代码。

举个例子：

避免：

```
idx = 0
for e in L:
    print (idx, e)
    idx += 1

for idx in range (len (L) ): print (idx, L [idx] ) 
```

尝试：

```
for idx, e in enumerate (L): print (idx, e) 
```

此外，当您需要的序列超出纯整数范围的范围时（例如产生字符串或对象或任何东西），您应该考虑生成器：

```
def weirdSequence (v):
    while True:
        yield v
        if v == 1: break
        v = v * 3 + 1 if v % 2 else v // 2

for i in weirdSequence (7): print (i) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T02:55:54.730

正如 Hyperboreus 所说，`x++`Python 中没有运算符。我认为猜测原因很有趣——我认为 Python 强调赋值*不是*一个表达式，而有`x++`其他语言经验的用户可能会期望这个表达式的结果是 x 的未递增值。`x++`如果 assignment 不是带值的表达式，则和之间没有区别`++x`。我认为拥有其中一个而不是另一个会令人困惑，但是让它们都做同样的事情将是多余的。

# html - 如何成长一个 div 到它的容器？

> ID：14668995
> 
> 赞同：-1
> 
> 时间：2013-02-03T02:48:01.553
> 
> 标签：html, css, twitter-bootstrap

我想知道我们是否可以将 a 的高度设置`div class="span6"`为其`row-fluid`容器？

这是一个示例，我在左侧有一个表单，在右侧有一个按钮，我怎样才能使按钮与左侧的表单高度相同？

```
<div class="container-fluid">
  <div class="row-fluid">
    <div class="span6">
      <form>
        <fieldset>
          <legend>Legend</legend>
          <label>Label name</label>
          <input type="text" placeholder="Type something…">
          <span class="help-block">Example block-level help text here.</span>
          <label class="checkbox">
            <input type="checkbox"> Check me out
          </label>
        </fieldset>
      </form>
    </div>
    <div class="span6"><button>Big Button</button></div>
  </div>
</div> 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T02:58:07.710

`.span6`您可以在 javascript (jQuery) 中获取左侧的高度。然后，您可以将该高度应用于 right-hand 的 css `.span6`。这将需要`:next`或某种形式的遍历 DOM，或者您可以重命名您希望具有相同高度的右侧按钮跨度的类。

```
left_h = $('.span6').height();
$('.span6 button').css('height',left_h); 
```

你可能需要稍微调整一下。

# c++ - C++ 贷款合格金额

> ID：14668996
> 
> 赞同：0
> 
> 时间：2013-02-03T02:48:20.777
> 
> 标签：c++, finance

我无法弄清楚如何计算一个人有资格获得贷款的金额以及需要的年数的逻辑方程式/数学。下面粗体字是我卡住的地方。任何想法都将不胜感激，包括公式建议。

完整的程序规范：

输入客户的年收入、贷款年数（贷款期限）、贷款金额（贷款金额）和客户状态（P 代表 Preferred 或 R 代表 Regular）。如果客户满足以下任一条件，则批准贷款。对于普通客户 - 贷款金额除以贷款期间的月数 <= 客户月收入的 10%。或者，如果客户是优先客户，贷款金额除以贷款期间的月数<=客户年收入的1%。输出批准或不批准。

***我无法弄清楚：***

如果贷款未获批准 (2)**告诉客户贷款可以根据当前收入计算的最高金额**(3)**需要多长时间（四舍五入到最接近的全年）才能在当前收入下批准贷款**.

```
#include <iostream>
#include <iomanip>

using namespace std;

int main()
{

double income, preferred_validation, regular_validation, years, loan_amount, monthlyIncome, annualIncomeTest, max_amount, request_amount;
char status;

cout<<"Please enter the annual income of the customer: ";
cin>>income;

cout<<"\nPlease enter the number of years of the loan: ";
cin>>years;

cout<<"\nPlease enter the amount of the loan: ";
cin>>loan_amount;

cout<<"\nCustomer status: P - Preferred R - Regular."<<endl;

cout<<"Please enter the customer's status: ";
cin>>status;

if(status != 'P' || 'R')
{
    status='R';

    cout<<"\n\nThe customer status code you input does not match one of the choices.\nThe calculations that follow are based on the applicant being a Regular customer."<<endl;
}

if(status=='R')
{

regular_validation=loan_amount/(years*12);
monthlyIncome=((income/12)*.10);

if(regular_validation<=monthlyIncome)
{
    cout<<"\nThis loan is approved.";
}
else
{
    cout<<"\nThis loan is disapproved.";
}

}
else if(status=='P')
{

    preferred_validation=loan_amount/(years*12);
    annualIncomeTest=income*.01;

    if(preferred_validation<=annualIncomeTest)
    {
        cout<<"\nThis loan is approved.";
    }
    else
    {
        cout<<"\nThis loan is disapproved."<<endl;

        max_amount=???;

        cout<<"As a preferred customer, the largest loan you qualify for is "<<max_amount<<" or you can get the requested amount of "<<loan_amount<<" by increasing the loan period to "<<years<<" years.";
    }

}
else
{
    cout<<"Restart and enter your customer status.";
}

cin.get();
cin.get();

return 0; 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T02:53:55.853

```
if(status != 'P' || 'R') 
```

应该：

```
if(status != 'P' && status != 'R') 
```

很明显你在annualIncomeTest`时拒绝贷款`preferred_validation <=`，那么max_amount应该是annualIncomeTest？

```
max_amount= annualIncomeTest; 
```