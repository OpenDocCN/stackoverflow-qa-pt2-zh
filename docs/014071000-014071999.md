# StackOverflow 问答 14071000-14071999

# python - 将值传递给不同的类

> ID：14071001
> 
> 赞同：0
> 
> 时间：2012-12-28T14:30:08.943
> 
> 标签：python

我有一个名为 msg.data[2] 的数据数组，我在其中使用了 pubsub 我现在想将此数据传递到 PlotCanvasExample 类

这是我给班级打电话的地方

```
self.pubsubText.SetLabel("This is the Contact Map for the chain "+msg.data[0]+" in the PDB file "+msg.data[1])
    frame = self.GetParent()
    sizer = wx.BoxSizer(wx.VERTICAL)
    self.canvas = PlotCanvasExample(self,0, size=(100,100))
    sizer.Add(self.canvas,1,wx.EXPAND,0) 
```

这是课程本身

```
class PlotCanvasExample(plot.PlotCanvas):
    def __init__(self,parent,id,size):
            plot.PlotCanvas.__init__(self,parent,id,style=wx.BORDER_NONE, size=(300,200))
            self.data = [(1,2),(23,2)]
            line = plot.PolyMarker(self.data)
            gc = plot.PlotGraphics([line],"CM view", "x-axis","y axis")
            self.Draw(gc, xAxis=(0,50), yAxis=(0,50)) 
```

我如何将变量 msg.data 传递给这个类

我是python新手，所以解释一下如何做会很好，这样我下次就可以理解如何做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T14:35:10.600

您可以将 setData 方法添加到 PlotCanvasExample 类并使用此方法吗？

```
def setData(data):
    self.data = data 
```

或者如果您在创建对象时需要此参数，您可以将此参数添加到 PlotCanvasExample 的 init 方法中。

```
class PlotCanvasExample(plot.PlotCanvas):
    def __init__(self,parent,id,size, data): 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T14:35:25.417

```
class P...:
    def __init__(self, parent, id, size, data):
        self.data = data 
        ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T14:37:06.090

试试这个代码...

```
self.pubsubText.SetLabel("This is the Contact Map for the chain "+msg.data[0]+" in the PDB file "+msg.data[1])
    frame = self.GetParent()
    sizer = wx.BoxSizer(wx.VERTICAL)
    self.canvas = PlotCanvasExample(self,0, size=(100,100), msg.data)
    sizer.Add(self.canvas,1,wx.EXPAND,0)

class PlotCanvasExample(plot.PlotCanvas):
    def __init__(self,parent,id,size, msgdata):
            self.msgdata = msgdata
            plot.PlotCanvas.__init__(self,parent,id,style=wx.BORDER_NONE, size=(300,200))
            self.data = [(1,2),(23,2)]
            line = plot.PolyMarker(self.data)
            gc = plot.PlotGraphics([line],"CM view", "x-axis","y axis")
            self.Draw(gc, xAxis=(0,50), yAxis=(0,50)) 
```

希望这可以帮助。

安德鲁

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-28T14:38:07.663

需要传递给类的参数应该放在`__init__`函数中。

[这是关于类](http://docs.python.org/2/tutorial/classes.html)的 Python 文档

代码行`def __init__(self,parent,id,size):`是您需要更改以添加新参数的内容。

下次创建此类时，您可以在`self.canvas - PlotCanvasExample()`

例子：

班级：

```
class PlotCanvasExample(plot.PlotCanvas):
    def __init__(self,parent,id,size,data): 
```

代码：

```
self.canvas = PlotCanvasExample(self,0, size=(100,100), msg.data[2]) 
```

如果您是 Python 新手，我建议您查看文档。另请查看[PEP8](http://www.python.org/dev/peps/pep-0008/)，它会在此处发布代码时有所帮助。

:)

# rest - 将 REST 身份验证添加到 Grails + SpringSecurity 浏览器应用程序

> ID：14071002
> 
> 赞同：3
> 
> 时间：2012-12-28T14:30:11.363
> 
> 标签：rest, authentication, grails, spring-security

我在 STS 3.1 中有一个 Grails 应用程序，在 UrlMappings.groovy 和一组控制器中布置了一个 REST API。我安装了 SpringSecurity 的东西，所以我有 Login/Logout 控制器和 RegistrationCodeController 等。我一直在使用浏览器界面登录，但我需要从 REST 客户端开始登录。

我需要使用哪些具体的 url 和请求来注册/登录/检查登录/注销？

我已经能够通过将 j_username 和 j_password 发布到 /j_spring_security_check 来登录。但是，如果我首先发出一个未通过身份验证的请求，那么 POST 到 /j_spring_security_check 会自动返回初始失败请求的结果。我需要一种登录方式，在成功时总是返回成功/错误状态和 User.id。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T02:50:33.107

在 Config.groovy 中，插入一些配置项：

```
grails.plugins.springsecurity.successHandler.alwaysUseDefault = true
grails.plugins.springsecurity.successHandler.defaultTargetUrl = "/rest/success"
grails.plugins.springsecurity.failureHandler.defaultFailureUrl = "/rest/failed" 
```

这将强制将成功登录重定向到 /rest/success。然后在这个方法中，返回user.id：

```
import grails.converters.JSON
class RestController {

    def springSecurityService

    def success() {
        def response = ['status':'success', 'id':springSecurityService.currentUser.id]
        render response as JSON
    }

    def failed() {
        def response = ['status': 'failed']
        render response as JSON
    }
} 
```

# perl - 将变量从 shell 脚本导出到 perl 脚本

> ID：14071004
> 
> 赞同：1
> 
> 时间：2012-12-28T14:30:25.670
> 
> 标签：perl, bash, unix

**Perl 代码**

```
`. /home/chronicles/logon.sh `; 

print "DATA  : $ENV{ID}\n"; 
```

在 logon.sh 中，我们正在导出变量“ID”（shell 脚本的来源）。

**手动运行**

```
$> . /home/chronicles/logon.sh
$> echo $LOG 
```

当我手动在终端中运行时（而不是从脚本中）。我得到了输出。（但不能从脚本中工作）

我关注了这篇文章：

[如何在 Perl 脚本中导出 shell 变量？](https://stackoverflow.com/questions/2967762/how-to-export-shell-variable-within-perl-script)

但没有解决问题。

**笔记**

我不允许更改“logon.sh”脚本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T14:37:02.913

反引号内的脚本在子进程中执行。虽然环境变量是从*父*进程继承的，但父进程无法访问子进程的环境。

但是，您可以返回子环境变量的内容并将其放入 Perl 变量中，例如

```
use strict; use warnings; use feature 'say';
my $var = `ID=42; echo \$ID`;
chomp $var;
say "DATA: $var"; 
```

输出：

```
DATA: 42 
```

这是一个示例 shell 会话：

```
$ cat test_script
echo foo
export test_var=42
$ perl -E'my $cmd = q(test_var=0; . test_script >/dev/null; echo $test_var); my $var = qx($cmd); chomp $var; say "DATA: $var"'
DATA: 42 
```

正常输出被重定向到`/dev/null`，所以只有`echo $test_var`显示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T14:34:08.417

它行不通。

不能从子进程继承环境变量。

环境变量可以在您的“手动运行”中更新，因为它在同一个“bash”进程中。

source 命令只是在当前 shell 下运行 login.sh 中的每个命令。

您可以参考的更多信息：[我们可以在 perl 脚本中获取 shell 脚本吗](https://stackoverflow.com/questions/3675646/can-we-source-a-shell-script-in-perl-script)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T15:03:43.420

好吧，我找到了一个对我来说听起来*不错*的解决方案：这看起来很健壮，因为它使用经过广泛测试的机制将 shell 环境绑定到 perl（运行 perl）和健壮的库以*perl 变量语法*导出它们以进行重新注入在根 perl 会话中。

该行`export COLOR tty`对于要求我的 bash 导出更新的变量很有用......这似乎工作正常。

```
#!/usr/bin/perl -w

my $perldumpenv='perl -MData::Dumper -e '."'".
    '\$Data::Dumper::Terse=1;print Dumper(\%ENV);'."'";

eval '%ENV=('.$1.')' if `bash -c "
        . ./home/chronicles/logon.sh;
        export COLOR tty ID;
        $perldumpenv"`
    =~ /^\s*\{(.*)\}\s*$/mxs;

# map { printf "%-30s::%s\n",$_,$ENV{$_} } keys %ENV;
printf "%s\n", $ENV{'ID'}; 
```

无论如何，如果您无权访问`logon.sh`，则必须在运行此类解决方案之前**信任它。**

**老的...**

这是我的第一篇文章......出于历史目的，不要再看了。

唯一的方法是解析结果命令，同时要求命令转储环境：

```
my @lines=split("\n",`. /home/chronicles/logon.sh;set`);

map { $ENV{$1}=$2 if /^([^ =])=(.*)$/; } @lines; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-28T15:40:54.677

您可以执行以下操作：

```
#/usr/bin/perl

use strict;
use warnings;

chomp(my @values = `. myscript.sh; env`);

foreach my $value (@values) {
    my ($k, $v) = split /=/, $value;
    $ENV{$k} = $v;
}

foreach my $key (keys %ENV) {
    print "$key => $ENV{$key}\n";
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-01-30T16:20:29.397

现在可以使用[`Env::Modify`模块完成](http://metacpan.org/pod/Env::Modify)

```
use Env::Modify 'source';
source("/home/chronicles/logon.sh");
... environment setup in logon.sh is now available to Perl ... 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-28T14:40:27.357

你的 Perl 进程是 shell 进程的父进程，所以它不会从它继承环境变量。继承以另一种方式起作用，从父母到孩子。

但是，当您使用反引号运行脚本时，如图所示，脚本的标准输出将返回到 Perl 脚本。因此，要么修改 shell 脚本以您显示的 echo $LOG 语句结束，要么创建一个新的 shell 脚本来运行 login.sh，然后使用 echo $LOG。您的 Perl 脚本将是：

```
my $value = `./myscript.sh`;
print $value; 
```

# php - php中电子邮件正文中的问题

> ID：14071010
> 
> 赞同：1
> 
> 时间：2012-12-28T14:31:06.003
> 
> 标签：php

我正在通过 php 发送邮件，在消息部分，我的代码如下：

```
$email_body = "<style type=\"text/css\">
 p {padding:0 !important; margin:0 !important;}
 td {padding:0 10px !important; margin:0 !important; font-family:Verdana, Geneva, sans-serif;}
 td table td {padding:0 !important;}
 </style>
<table align=\"center\" border=\"0\" cellpadding=\"10\" cellspacing=\"0\" style=\"border-collapse:collapse; border:1px solid #565656; font-family:Verdana, Geneva, sans-serif; width:800px;  margin-top:0px; color:#565656;font-weight:normal;font-size:12px; text-align:justify; line-height:1.5em\">
  <tbody>
   <tr>
     <td style=\"border-collapse:collapse; padding-top:10px !important;\">
      message
     </td>
   </tr>
  </tbody>
 </table>"; 
```

但是在我的邮件中，我得到了完整的 html 代码，无论它是为 $email_body 而不是表格格式编写的。怎么做？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T14:46:22.453

您需要设置正确的标题：

```
$to       = 'foo@bar.baz';
$subject  = 'foobar';
$message  = '...'; // the html
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
mail($to, $subject, $message, $headers); 
```

看看手册： http: [//php.net/manual/en/function.mail.php](http://php.net/manual/en/function.mail.php)

* * *

您还需要一个完整的 html 文档，即：

```
html
  head
    title
    style
  body
    table 
```

* * *

还有一个提示，如果您发送 html 邮件，请不要使用样式标签。我经常使用这个 premailer：[http ://premailer.dialect.ca/](http://premailer.dialect.ca/)

# powershell - 如何在 Powershell 中自动对提示回答“是”？

> ID：14071012
> 
> 赞同：27
> 
> 时间：2012-12-28T14:31:14.300
> 
> 标签：powershell

如何在 PowerShell 会话中输入“是”作为交互式问题的答案？我知道，在 Bash 中，`Yes`是在提示符下回答“是”的工具。在我的情况下，我无法抑制提示。

我正在运行的脚本停在

> 如果您想继续，请回复“是”：

powershell如何运行脚本并在提示时“回答”是？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2017-08-10T21:19:16.047

使用 ECHO 对我有用。我在我的 Powershell 脚本中运行 RSKeyMgmt.exe，它提示 Yes(Y)/No(N)。所以当我这样做的时候

`ECHO Y | RSKeyMgmt.exe...`

它没有提示问题并且命令被正确执行。

所以我认为`ECHO 'someoption'`也应该适用于其他情况。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2020-05-18T18:42:03.720

我也有同样的问题。我尝试的解决方案包括：

*   回声'Y' |
*   命令名称-Force
*   $ConfirmPreference = '无'

然而，他们似乎都没有成功。

最终解决问题的是：

```
Powershell-Cmdlet -Confirm:$false 
```

它会在命令执行期间抑制所有确认提示，并且该命令将在没有任何确认的情况下被处理。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2019-09-20T03:17:39.740

受其他答案的启发，这是我的示例：

```
ECHO Y | powershell Enable-WindowsOptionalFeature -Online -FeatureName Microsoft-Hyper-V -All 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-12-28T21:53:40.653

您可以测试这些老式方式：

```
Cmd /c "GpUpdate.exe /FORCE <C:\temp\response.txt"

ECHO 'Y' | GpUpdate.exe /FORCE

Get-Content "C:\temp\response.txt" | GpUpdate.exe /FORCE 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-28T19:02:00.320

对于 Azure CLI 命令 --yes 通常是一个选项。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-02-19T03:42:26.353

以下 Powershell 对我有用：

```
Write-Output 'Y' | .\plink.exe <ip_address> -l <username> -pw <password> 
```

这会将“Y”字符输出到下一个管道对象。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-03-08T20:55:42.813

我尝试使用时遇到了同样的问题：

```
net use * /delete 
```

它总是提示我输入 Y/N 并尝试了这里的解决方案，但没有一个奏效，所以我报告了对我有用的方法：

```
net use * /delete /y 
```

也许每个命令都有一个无声的确认。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-10-13T17:05:39.717

从“不受信任的来源”安装某些东西时，这对我有用：

```
ECHO Y | powershell Install-Module -Name PSWindowsUpdate | ECHO Y 
```

我试图以编程方式安装 Windows Update powershell 工具集:)

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2020-03-26T06:52:57.220

我试图杀死一个讨厌的启动程序，发现 Stop-Process 和/或程序不接受管道输入（没有 Echo Y | 对我来说！）但我改变了 JP 的答案：Stop-Process -name [program.name] -Force ; 以管理员身份运行，它就像一个魅力。

# php - 使用 PHP 在 HTML 上隐藏图像源

> ID：14071014
> 
> 赞同：0
> 
> 时间：2012-12-28T14:31:18.307
> 
> 标签：php, html, image

为了隐藏我的图像目录，让用户不知道图像存储在哪里，我该如何实现这样的东西？

```
<img src="https://photos-1.dropbox.com/t/0/AADkpdIqLbXdAFgmjGbdsKa_InYsOtfwuekNtOyuHgmh3g/10/5642407/jpeg/32x32/6/_/1/2/Pensive%20Parakeet.jpg/HM183nQwcIFtc1PrTIOCRe4rIUK8wBaWKcgqD-g2Ma8?size=32bf&amp;prep_size=1280x960" draggable="true" alt="Pensive Parakeet.jpg" class="sprite sprite_web s_web_page_white_picture_32 icon thumbnail"> 
```

来源： [https ://photos-1.dropbox.com/t/0/AADkpdIqLbXdAFgmjGbdsKa_InYsOtfwuekNtOyuHgmh3g/10/5642407/jpeg/32x32/6/_/1/2/Pensive%20Parakeet.jpg/HM183nQwcIFtc1PrTIOCqDRe4rIUK8wBasizeWKc 32bf&prep_size=1280x960](https://photos-1.dropbox.com/t/0/AADkpdIqLbXdAFgmjGbdsKa_InYsOtfwuekNtOyuHgmh3g/10/5642407/jpeg/32x32/6/_/1/2/Pensive%20Parakeet.jpg/HM183nQwcIFtc1PrTIOCRe4rIUK8wBaWKcgqD-g2Ma8?size=32bf&prep_size=1280x960)

渲染图像没有任何问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T14:49:50.243

这种类型的功能通常通过您的 vhost 或 .htaccess 文件中的 RewriteRule 和某种图像处理功能来实现。例如，您可以将这样的内容放在一个 .htaccess 文件中，例如文档根目录下的 /t 目录：

```
RewriteEngine on
RewriteCond $1 !^(index\.php|robots\.txt)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

这将透明地将幕后的所有调用重定向到，例如（如果放置在 /t 目录中），`/t/0/foo/bar/stuff`到`/t/index.php/0/foo/bar/stuff`. 假设您在该目录中有一个 index.php 文件，那么您可以处理它通过解析获得的 URL 中的所有内容，`$_SERVER['REQUEST_URI']`或者`$_SERVER['PATH_INFO']`确定要返回的确切内容。

`imagepng()`如果您将图像保存在备用位置，则可以通过对它们进行任何处理并使用或将它们推送到浏览器来返回它们`imagejpg()`。 [请参阅其中一个页面上的示例](http://php.net/manual/en/function.imagepng.php)以了解如何执行此操作。

# azure - 尝试使用 SSDT 使现有 SQL Server 数据库与 Windows Azure 平台兼容

> ID：14071015
> 
> 赞同：0
> 
> 时间：2012-12-28T14:31:21.753
> 
> 标签：azure, azure-sql-database, azure-configuration

我正在尝试使用 SSDT 使我现有的 SQL Server 2008 数据库与 Windows Azure 平台兼容，但是由于 TVF 和视图在寻找位于SSMS 中的相同实例。

我已将它寻找的数据库添加到 Azure 中，这不是问题。

我发现如果我加载有问题的代码，我可以将 Azure 服务器地址添加到`FROM`解决错误的语句中（如下所示），但是我有大量依赖于外部数据库并希望可能有一个更快的方法？

```
FROM [myAzureserver.database.windows.net.ExternalDBName.dbo.TableName] as ALIAS 
```

我知道如果我合并数据库，则不会存在此问题，但是目前这是不可能的。

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T18:25:07.930

为什么要尝试使本地 SQL Server Azure 兼容？您是否打算在云中的某个位置移动它？如果是这样，您将无法使用链接服务器。只要数据库保留在本地 SQL Server 实例上，您的 FROM 子句就可以工作。

假设这就是您想要做的，您会问是否有更快的方法来更改您的引用以指向云数据库，对吗？我不确定这是否对你有用，但我在另一个项目中遇到了类似的问题，最终使用了同义词。在此处查看我们的同义词：http: [//msdn.microsoft.com/en-us/library/ms177544.aspx](http://msdn.microsoft.com/en-us/library/ms177544.aspx)。虽然您不能为服务器创建同义词，但您可以为表/视图/过程创建同义词。

同样，这可能不适合你，但让我们试试这个......

假设您有名为 DB1 的主数据库、名为 DB2 的辅助数据库和名为 AzureDB2 的 DB2 云数据库，您可以在 DB2 中创建同义词以指向云数据库，而无需更改来自 DB1 的任何 SQL 语句。

所以假设你今天在 DB1 中有这样的语句：

从 DB2.MyTable 中选择 *

您可以在 DB2 中创建一个名为 MyTable 的同义词：

为 [myAzureserver.database.windows.net.ExternalDBName.dbo.TableName] 创建同义词 MyTable

DB2 基本上成了一座桥梁。您不需要更改 DB1 中的任何语句；只需在 DB2 中创建指向云数据库的同义词。

希望这对你有用。:)

# php - PHP，“Foreach”使用 3 个数组

> ID：14071020
> 
> 赞同：5
> 
> 时间：2012-12-28T14:31:44.043
> 
> 标签：php, arrays, foreach

> **可能重复：**
> [添加三个变量的 foreach](https://stackoverflow.com/questions/7748115/foreach-with-three-variables-add)

如果我有 3 个相同大小的数组，是否可以使用 costruct foreach() 同时循环 3 个数组？

前任。

```
$name contains names

$surname contains surnames

$address contains addresses. 
```

foreach 可以同时取元素 [1], [2], [.....] 进行打印

```
$name[1], $surname[1], $address[1];

$name[2], $surname[2], $address[2]; 
```

等等？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-28T14:34:35.577

SPL 的[multipleIterator](http://www.php.net/manual/en/class.multipleiterator.php)正是为此目的而设计的

```
$mi = new MultipleIterator();
$mi->attachIterator(new ArrayIterator($array1));
$mi->attachIterator(new ArrayIterator($array2));
$mi->attachIterator(new ArrayIterator($array3));

foreach ( $mi as $value ) {
    list($name, $surname, $address) = $value;
    echo $name , ' => ' , $surname , ' => ' , $address , PHP_EOL;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-28T14:34:43.190

假设它们的长度都相同：

```
for ($i = 0; $i < count($names); $i++) {
    echo "{$names[$i]}, {$surnames[$i]}, {$addresses[$i]}";
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-28T14:34:57.450

您可以这样做（如果数组具有相同的键）：

```
foreach ($name as $key => $value) {
    //use $name[$key], $surname[$key], $address[$key]
} 
```

`$key`包含`$name`数组中的键

`$value`=`$name[$key]`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-28T14:35:33.470

尝试这个

```
foreach($arr1 as $i => $val) {
    var_dump($val, $arr2[$i], $arr3[$i]);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-28T14:35:56.937

如果数组键相同，则可以使用`key()`函数。

但是您可以将密钥传递给`foreach($array as $key => value()){}` 这种方式，您可以在不使用函数的情况下通过变量引用密钥。

# windows - 用于删除终端服务器上用户配置文件的 Firefox 缓存的批处理文件

> ID：14071021
> 
> 赞同：2
> 
> 时间：2012-12-28T14:31:46.603
> 
> 标签：windows, batch-file, file-io

我想运行一个批处理文件，删除终端服务器上所有用户配置文件的 firefox 缓存文件夹。就像 ICSweep 删除所有用户的临时 Internet 文件一样。

```
Location: C:\users\ *username*\appdata\local\mozilla\firefox\profiles\ *random*.default\cache 
```

问题是不同的用户名文件夹，并且 firefox\profiles 下的子文件夹的名称包含“*随机字符*.default”，并且对于所有用户都不同。

这可以用批处理文件完成吗？还是我需要类似 vb 脚本的东西？

如果可以这样做，我也会为 Google Chrome 缓存执行此操作

```
C:\users\ *username*\appdata\local\google\chrome\user data\default\cache 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T16:33:32.700

是的，这是可以做到的。它只需要一些简单的批量递归。该脚本已完全可以使用。准备好删除缓存文件夹时，只需将`echo`命令替换为命令即可。`del`

```
:: Hide Commands
@echo off
setlocal EnableExtensions

:: Parse the Local AppData sub path
call :Expand xAppData "%%LocalAppData:%UserProfile%=%%"

set "xFirefox=\mozilla\firefox\profiles"
set "xChrome=\google\chrome\user data"

:: Start at the User directory
pushd "%UserProfile%\.."

:: Loop through the Users
for /D %%D in (*) do if exist "%%~fD%xAppData%" (
    rem Check for Firefox
    if exist "%%~fD%xAppData%%xFirefox%" (
        pushd "%%~fD%xAppData%%xFirefox%"

        rem Loop through the Profiles
        for /D %%P in (*) do (
            if exist "%%~fP\cache" echo "%%~fP\cache"
        )
        popd
    )

    rem Check for Chrome
    if exist "%%~fD%xAppData%%xChrome%" (
        pushd "%%~fD%xAppData%%xChrome%"

        rem Loop through the Profiles
        for /D %%P in (*) do (
            if exist "%%~fP\cache" echo "%%~fP\cache"
        )
        popd
    )
)
popd
goto End

::::::::::::::::::::::::::::::
:Expand <Variable> <Value>
if not "%~1"=="" set "%~1=%~2"
goto :eof

:End
endlocal
pause 
```

* * *

**更新评论**

要使用 Firefox profiles.ini 文件，请将上面的检查 firefox 部分替换为该文件。

```
rem Check for Firefox INI
if exist "%%~fD%xAppData%%xFirefox%\profiles.ini" (
    pushd "%%~fD%xAppData%%xFirefox%\"

    rem Loop through the Profiles
    for /f "tokens=1,* delims==" %%L in (profiles.ini) do (
        if /i "%%~L"=="Path" if exist "%%~fM\cache\" echo "%%~fM\cache"
    )
    popd
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-01T15:38:28.900

上面脚本的更新版本，只有 Firefox ：

```
:: Hide Commands
rem @echo off
setlocal EnableExtensions

:: Parse the Local AppData sub path
call :Expand xAppData "%%LocalAppData:%UserProfile%=%%"

set "xFirefox=\mozilla\firefox\profiles"
set "xChrome=\google\chrome\user data"

:: Start at the User directory
pushd "%UserProfile%\.."

:: Loop through the Users
for /D %%D in (*) do if exist "%%~fD%xAppData%" (
    rem Check for Firefox
    rem if exist "%%~fD%xAppData%%xFirefox%" (
    if exist  "%%~fD%xAppData%%xLocal%%xMozilla%%xFirefox%" (
        rem pushd "%%~fD%xAppData%%xFirefox%"
        pushd "%%~fD%xAppData%%xLocal%%xMozilla%%xFirefox%"

        rem Loop through the Profiles
        for /D %%P in (*) do (
            if exist "%%~fP\cache2" del /F /Q /S "%%~fP\cache2"
        )
        popd
    )
)
popd
goto End

::::::::::::::::::::::::::::::
:Expand <Variable> <Value>
if not "%~1"=="" set "%~1=%~2"
goto :eof

:End
endlocal
pause 
```

# c# - 如何在gridview中修改选中gridviewitem的背景

> ID：14071024
> 
> 赞同：0
> 
> 时间：2012-12-28T14:32:01.517
> 
> 标签：c#, xaml, gridview, windows-8

在windows8中，当我们在gridview中选中一个item时，默认的背景色是紫色，怎么改变颜色呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T14:36:34.750

msdn 上的此链接可能会帮助您解决问题。根据您选择的标签，这听起来很相似：http: [//social.msdn.microsoft.com/Forums/pl-PL/winappswithcsharp/thread/98e6d866-9c54-4ee2-a9e8-767c74363b13](http://social.msdn.microsoft.com/Forums/pl-PL/winappswithcsharp/thread/98e6d866-9c54-4ee2-a9e8-767c74363b13)

# scala - Scala 2.10 中的新行为

> ID：14071027
> 
> 赞同：10
> 
> 时间：2012-12-28T14:32:28.790
> 
> 标签：scala, scala-2.10

[这是两个 REPL 会话（受此问题](https://stackoverflow.com/q/14067406/334519)启发，尽管我的问题不同）：

```
Welcome to Scala version 2.9.2 (Java HotSpot(TM) 64-Bit Server VM, Java 1.7.0).
Type in expressions to have them evaluated.
Type :help for more information.

scala> def ignore(it: String) = 42
ignore: (it: String)Int

scala> ignore(null.asInstanceOf[Nothing])
res0: Int = 42 
```

和：

```
Welcome to Scala version 2.10.0 (Java HotSpot(TM) 64-Bit Server VM, Java 1.7.0).
Type in expressions to have them evaluated.
Type :help for more information.

scala> def ignore(it: String) = 42
ignore: (it: String)Int

scala> ignore(null.asInstanceOf[Nothing])
java.lang.NullPointerException
        at .<init>(<console>:9)
        at .<clinit>(<console>)
        at .<init>(<console>:7)
        at .<clinit>(<console>)
        at $print(<console>)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
... 
```

唯一的区别是第一个是 Scala 2.9.2，第二个是 2.10.0。

有人能指出导致这种新行为的 2.10 中的变化吗？

我知道强制转换`Nothing`是一件愚蠢的事情，答案可能是“这都是未定义的行为，所以停止这样做”，但它看起来可能会对升级者产生影响，我不知道'不记得遇到任何可以解释这一点的变化的讨论。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T20:12:41.403

由于 Scala 对选项的处理`null`方式与`None`case 不同，因此即使 的`null`值`Nothing`也是有问题的—— 的实例应该正好为零`Nothing`，而不是一个实例可能会或可能不会中断，具体取决于您如何使用它。

因此，我看不出旧的行为除了错误之外是什么。应该在发行说明中提到它已修复，但是除了抛出异常之外，依赖于`.asInstanceOf[Nothing]`做*任何事情都*与类型合理性完全相反，我认为不需要更多。（事实上​​，我什至认为不需要发行说明。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-28T14:54:06.960

~~这看起来只是控制台的问题，而不是语言的问题。如果你运行这个调用完全相同的方法的小应用程序，scala 2.10 没有问题。~~

```
object Test extends App {
  override def main(args: Array[String]) {
    println(takesString(null.asInstanceOf[Nothing]))
  }

  def takesString(a: String) = 42
} 
```

为了简化上面的示例，您只需键入

```
null.asInstanceOf[Nothing] 
```

控制台会给你同样的错误。 ~~我认为这与打印出类型有关。~~

**更新：**看起来我不小心碰到了 2.9.2。正如作者在评论中指出的那样，作为 2.10 RC5 中的脚本仍然失败。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-29T19:08:51.597

我知道您并不期待答案“这都是未定义的行为，所以 (...)”，但是当您添加“可能对升级者产生影响的事情”时，我必须记住（即使很明显）人们**可以**根据自己的定义，不要**依赖或期望具有未定义行为的事物的任何结果。**

在您提到的特定情况下，我认为这不是未定义的行为：它应该引发异常。`Nothing`是 的子类`Null`，而不是相反-我的第一个期望，未经测试，是该行`null.asInstanceOf[Nothing]`会抛出 a `ClassCastException`，而`null`不是 a `Nothing`。但是，您可以看到这`null`是一个特殊的实例（就像在 Java 中一样）。尝试运行：

```
scala> "aaa".asInstanceOf[Nothing]
java.lang.ClassCastException: java.lang.String cannot be cast to scala.runtime.N
othing$
        at .<init>(<console>:8)
        at .<clinit>(<console>) 
```

我的猜测是它发生是因为在内部`obj.asInstanceOf[T]`调用`obj.getClass()`以在运行时检查演员表。`null`由于在throws a 上调​​用任何方法`NullPointerException`，该异常都会在`ClassCastException`.

回到您的具体问题，似乎 Scala 2.9.2 以一种（非常）特殊的方式处理该特定情况。运行更多测试：

```
scala> ignore(3.asInstanceOf[String])
java.lang.ClassCastException: java.lang.Integer cannot be cast to java.lang.Stri
ng
        at .<init>(<console>:9)
        at .<clinit>(<console>)
scala> ignore({ println("test"); "aaa" })
test
res6: Int = 42 
```

您可以看到参数总是被评估，除了您的情况。Scala 2.10 绝对具有最一致的行为。然而，这个问题不应该影响任何开发者升级到 Scala 2.10；我看不到任何`obj.asInstanceOf[Nothing]`正确代码的情况。

# ios - 如何刷新 xib 视图？

> ID：14071029
> 
> 赞同：0
> 
> 时间：2012-12-28T14:32:29.743
> 
> 标签：ios, xcode, xib

我有一个带有一些 UILabel 的 xib 文件。在 `- (void)viewDidLoad` 我发送一个请求以从服务器获取 JSON 数据，并且 `- (void)connectionDidFinishLoading:(NSURLConnection *)connection` 我想将从 JSON 字符串中提取的文本放入标签中。我知道我可以从 JSON 字符串中获得所需的信息，因为我可以 NSLog 它，但它不会显示在标签中。我最后尝试 `[self loadView];` 了但没有成功。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T14:36:28.823

如果您只是设置标签的文本，它应该会自动刷新它：

```
myLabel.text = @"some text"; 
```

# magento-1.7 - Magento rest api url 从特定网站检索产品

> ID：14071032
> 
> 赞同：0
> 
> 时间：2012-12-28T14:32:52.940
> 
> 标签：magento-1.7, magento

我的设置看起来像这样

*   默认 -> 主商店 -> MainStoreView
*   网站 1 -> 商店 1 -> StoreView1 商店 2 -> StoreView2

现在我想知道如何仅从 Website1->Store1 或 Website1->Store2 检索产品。我想使用像 www.mysite.com/api/rest/products/ 这样的普通网址并按 storeId 过滤产品，但问题是我没有从 Website1 获得任何产品。我只从默认网站获取产品。

任何人都可以深入了解为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T09:24:24.193

看着`Mage_Catalog_Model_Api2_Product_Rest::_retrieveCollection()`：：

```
$collection = Mage::getResourceModel('catalog/product_collection');
$store = $this->_getStore();
//[...]
$collection->addStoreFilter($store->getId()) 
```

因此，该集合考虑了商店视图过滤器。让我们更深入地研究`_getStore()`方法：

`Mage_Api2_Model_Resource::_getStore()`：

```
protected function _getStore()
    {
        $store = $this->getRequest()->getParam('store');
        try {
            if ($this->getUserType() != Mage_Api2_Model_Auth_User_Admin::USER_TYPE) {
                // customer or guest role
                if (!$store) {
                    $store = Mage::app()->getDefaultStoreView();
                } else {
                    $store = Mage::app()->getStore($store);
                }
            } else {
                // admin role
                if (is_null($store)) {
                    $store = Mage_Catalog_Model_Abstract::DEFAULT_STORE_ID;
                }
                $store = Mage::app()->getStore($store);
            }
        } catch (Mage_Core_Model_Store_Exception $e) {
            // store does not exist
            $this->_critical('Requested store is invalid', Mage_Api2_Model_Server::HTTP_BAD_REQUEST);
        }
        return $store;
    } 
```

基于此，我相信您可以指定：`your_request_url?param...&store=STORE_ID`

# android - TimePickerListener 同时调用两个方法

> ID：14071035
> 
> 赞同：1
> 
> 时间：2012-12-28T14:33:15.433
> 
> 标签：android

嗨，请找到下面的代码，我遇到了时间对话框侦听器方法的问题，它调用了两次侦听器。如何修复一次侦听器。

```
@Override
protected Dialog onCreateDialog(int id) {
    switch (id) {
    case TIME_DIALOG_ID:
        // set time picker as current time
        return new TimePickerDialog(this, timePickerListener, hour, minute,
                false);

    }
    return null;
}

private TimePickerDialog.OnTimeSetListener timePickerListener = new TimePickerDialog.OnTimeSetListener() {
    public void onTimeSet(TimePicker view, int selectedHour,
            int selectedMinute) {

        System.out.println("=========Dialog==================");

        hour = selectedHour;
        minute = selectedMinute;

        // set current time into textview
        tvDisplayTime.setText(new StringBuilder().append(pad(hour))
                .append(":").append(pad(minute)));

        // set current time into timepicker
        timePicker1.setCurrentHour(hour);
        timePicker1.setCurrentMinute(minute);

    }
};

private static String pad(int c) {
    if (c >= 10)
        return String.valueOf(c);
    else
        return "0" + String.valueOf(c);
} 
```

请帮我接听电话，我指的是这个网址： [http ://www.mkyong.com/android/android-date-picker-example/](http://www.mkyong.com/android/android-date-picker-example/)

我正在使用模拟器版本 4.1 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T15:09:26.717

嗨，这个问题仅适用于 android 模拟器 4.1 版，它在另一个版本上运行良好。

# android - Android - 使用带有 android_asset html 文件的 Jsoup

> ID：14071037
> 
> 赞同：5
> 
> 时间：2012-12-28T14:33:22.613
> 
> 标签：android, jsoup

好吧，我一直在使用 Jsoup 从远程 url 解析 html，使用：

```
Jsoup.connect(url).timeout(20000).get(); 
```

我现在正在尝试读取存储在`assets`文件夹中的本地 html 文件。我做了很多搜索，但找不到解决方案。在[Jsoup 示例 - Load a Document from a File](http://jsoup.org/cookbook/input/load-document-from-file)中，他们说要执行以下操作：

```
File input = new File("/tmp/input.html");
Document doc = Jsoup.parse(input, "UTF-8", "http://example.com/"); 
```

根据我的阅读，我的文件的路径是 - `file:///android_asset/results_2009.html`。

![在此处输入图像描述](../Images/94d05bc055bb148df3b381ffd13b803b.png)

但是我总是得到`no such file or directory`，那么如何将本地文件放入 Jsoup？

我需要使用`AssetManager`什么的吗？请有人指出我正确的方向。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-28T14:52:42.780

`Jsoup.parse()`有一个[需要 InputStream 的重载](http://jsoup.org/apidocs/org/jsoup/Jsoup.html#parse%28java.io.InputStream,%20java.lang.String,%20java.lang.String%29)。您可以使用`AssetManager`获取`InputStream`文件并使用它：

```
InputStream is=null;

try {
    is=getAssets().open("results_2009.html");
    Document doc = Jsoup.parse(is, "UTF-8", "http://example.com/");
} catch (IOException e) {
    e.printStackTrace();
} finally {
    if(is!=null)
        is.close();
} 
```

# python - 在列表的每个字典中添加一个元素（列表理解）

> ID：14071038
> 
> 赞同：70
> 
> 时间：2012-12-28T14:33:31.590
> 
> 标签：python, python-3.x, list-comprehension

我有一个字典列表，并且想为这个列表的每个元素添加一个键。我试过：

```
result = [ item.update({"elem":"value"}) for item in mylist ] 
```

但是更新方法返回无，所以我的结果列表中全是无。

```
result = [ item["elem"]="value" for item in mylist ] 
```

返回语法错误。

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2016-01-13T02:40:48.497

如果您想使用列表理解，这里有一个很好的答案： [https ://stackoverflow.com/a/3197365/4403872](https://stackoverflow.com/a/3197365/4403872)

在你的情况下，它会是这样的：

```
result = [dict(item, **{'elem':'value'}) for item in myList] 
```

**例如。：**

```
myList = [{'a': 'A'}, {'b': 'B'}, {'c': 'C', 'cc': 'CC'}] 
```

然后使用

```
result = [dict(item, **{'elem':'value'}) for item in myList] 
```

或者

```
result = [dict(item, elem='value') for item in myList] 
```

最后，

```
>>> result
[{'a': 'A', 'elem': 'value'},
 {'b': 'B', 'elem': 'value'},
 {'c': 'C', 'cc': 'CC', 'elem': 'value'}] 
```

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2012-12-28T14:37:53.097

您无需担心构建新的字典列表，因为对更新字典的引用与对旧字典的引用相同：

```
 for item in mylist:
    item.update( {"elem":"value"}) 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2017-07-16T12:22:22.800

你可以使用地图。

```
result = map(lambda item: dict(item, elem='value'), myList) 
```

如果您已经有了元素列表，您可以执行以下操作：

```
#elements = ['value'] * len(myList)
result = map(lambda item: dict(item[0], elem=item[1]),zip(myList,elements)) 
```

那么你有结果

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2018-11-13T15:27:22.133

@vk1011 的回答很好，可以用扩展运算符简洁地扩展，新的字典对象是一个额外的好处

1.  要使用新键覆盖任何现有键的值，您可以将扩展运算符放在新项目之前

    ```
    result = [{**item, 'elem':'value'} for item in myList] 
    ```

2.  要使用现有条目覆盖新条目的值，请在新条目之后使用扩展运算符

    ```
    result = [{'elem':'value', **item} for item in myList] 
    ```

两种方法都会给出一个字典对象列表，包括新项目

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2021-05-11T15:08:09.010

传统上但比其他（复杂）答案更快：

```
myList = [{'a': 'A'}, {'b': 'B'}, {'c': 'C', 'cc': 'CC'}]
for item in myList: item['elem']='value' 
```

*一些时间：*

```
%timeit result = [dict(item, **{'elem':'value'}) for item in myList]
865 ns ± 8.89 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each)

%timeit result = [dict(item, elem='value') for item in myList]
854 ns ± 5.37 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each)

%timeit result = list(map(lambda item: dict(item, elem='value'), myList))
1.22 µs ± 86.2 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each)

%timeit for item in myList: item.update({'elem':'value'})
464 ns ± 3.72 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each)

%timeit for item in myList: item['elem']='value'
124 ns ± 0.31 ns per loop (mean ± std. dev. of 7 runs, 10000000 loops each)

%timeit [dict(list(item.items()) + [("elem", "value")]) for item in myList]
1.59 µs ± 14.8 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each) 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-12-28T14:37:32.720

```
>>> a = [ { 1:1 }, {2:2}, {3:3} ]
>>> for item in a:
...     item.update( { "test": "test" } )
... 
>>> a
[{'test': 'test', 1: 1}, {'test': 'test', 2: 2}, {'test': 'test', 3: 3}] 
```

您错误地使用了列表推导，调用`item.update`返回一个`None`值，因此您新创建的列表将充满`None`值而不是您的预期`dict`值。

您只需要遍历列表中的项目并相应地更新每个项目，因为列表包含对`dict`值的引用。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-12-28T14:38:31.927

要么不使用列表推导，要么根据原始字典加上新键返回一个*新字典：*

```
[dict(list(item.items()) + [("elem", "value")]) for item in mylist] 
```

# javascript - Javascript：Opera 在中间点击时打开新标签

> ID：14071044
> 
> 赞同：1
> 
> 时间：2012-12-28T14:33:56.183
> 
> 标签：javascript, html, opera

[http://jsfiddle.net/X47f5/1/](http://jsfiddle.net/X47f5/1/)

html:

```
<a href="javascript:void(0);">test link</a>​ 
```

javascript:

```
$('a').bind('click mouseup mousedown',function(e){
    e.preventDefault();
    return false;
});​ 
```

是否有任何解决方法可以防止这种行为？

在所有其他浏览器中，它按预期工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T14:38:29.577

根据[Javascript Madness: Mouse Events](http://unixpapa.com/js/mouse.html)：

> Opera 中的鼠标中键也坏了。它会触发一个事件，但不能禁用默认操作。到目前为止，还没有发生过对其破坏方式的摆弄。

因此，在 Opera 修复之前，您似乎很不走运。

# java - 如何将 Java 桌面应用程序导出到使用某些项目文件的可执行 jar 中

> ID：14071047
> 
> 赞同：-1
> 
> 时间：2012-12-28T14:33:59.557
> 
> 标签：java, eclipse, jar, export

我有一个带有 gui 的 Java 桌面应用程序。我的应用程序正在使用“export”文件夹中的一些 xml 文件。当我将应用程序导出到可运行的 jar 文件时，应用程序无法正常运行，因为 jar 不包含此 xml 文件，或者文件的路径错误。

是否有可能将 Java 应用程序从 eclipse 导出到可执行的 jar 文件中，并以某种方式告诉它包含一个具有相同结构的附加文件夹？

![在此处输入图像描述](../Images/b7d9501be8381b5e6292d75687aaf43b.png)

## 更多信息

我的项目正在使用一些 xml 文件，按以下层次结构组织：

模板 -> 哈希码 fgrtsgdtagsdnjf -> 测试 -> document.xml 模板 -> 哈希码 sgdtfhfnjnjcnjc -> 测试 -> document.xml

当我将项目导出到可执行 jar 文件中时，我不知道如何指定我的应用程序以使用该文件。我有 FileNotFoundException。

到目前为止，我在导出到可执行 jar 文件的过程中成功地导出了带有 XML 文件的文件夹。所以这些文件存在于 jar 档案中。但我不知道如何在我的项目中使用它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T23:35:20.370

既然你说你得到 FileNotFoundException，我假设你正在尝试使用 File、FileStream、FileReader 或类似的；你不能使用那些，你需要使用 class.getResourceAsStream() （首先在与类相同的目录中搜索）或 class.getClassLoader().getResourceAsStream() 或 getSystemResourceAsStream()。

Eclipse 将源文件夹的内容（即 src、export 和 test）打包在 JAR 的根目录中，因此如果您有“export/document.xml”，您将使用 'MyClass.class.getResourceAsStream("document.xml" )'。并记得关闭流。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T14:42:20.763

> 我的应用程序正在使用“导出”文件夹中的一些 xml 文件。

如果导出文件夹只有所需的 xml 文件，则只需将其移动到 src 文件夹中。一旦您导出为可执行 Jar，它将自动包含在内

另一种选择是右键单击文件夹并选择构建路径，尝试它可能会有所帮助。

> 是否有可能将 java 应用程序从 eclipse 导出到可执行 jar 文件中，并以某种方式告诉它包含一个具有相同结构的附加文件夹？

当您导出为可执行 jar 时，可以选择将场景另存为 Ant 脚本。稍后您可以对其进行修改并运行为 -> Ant

# java - 静态元模型、jpa 和字段名称作为字符串

> ID：14071050
> 
> 赞同：2
> 
> 时间：2012-12-28T14:34:10.623
> 
> 标签：java, hibernate, jpa, metamodel

我使用 Hibernate Static Metamodel Generator Annotation Processor 生成实体的元模型。因此，我可以通过使用像这样的字段（编译检查安全）来正确构建标准，而不是直接将字段名称指定为字符串：

```
MyClass_.myField 
```

我将旧代码迁移到这个新系统，但有些函数将字符串作为参数，而不是 SingularAttribute（元模型类型）。

我现在不想更改这些函数的签名。

我的问题：我可以使用元模型访问字段名称并将其转换为字符串吗？

我想做类似的事情，`MyClass_.myField.toString()`但它不返回字段的名称。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-28T14:36:31.220

这太容易了，我没有立即找到它......

只需致电：

```
MyClass_.myField.getName() 
```

# wpf - 带有 CanExecute = null 的 ReactiveAsyncCommand 导致 CanExecute 始终为 false

> ID：14071051
> 
> 赞同：0
> 
> 时间：2012-12-28T14:34:12.033
> 
> 标签：wpf, reactiveui

这个问题与我前段时间发布的一个问题有关（[这里](https://stackoverflow.com/questions/13847742/reactiveui-command-binding)）。

我正在使用`ReactiveAsyncCommand`以下方式：

```
LoadTickets = new ReactiveAsyncCommand(null, 0, RxApp.DeferredScheduler);

LoadTickets.RegisterAsyncFunction(x => loadTickets())
        .ToProperty(this, x => x.Tickets);

Observable.Interval(TimeSpan.FromSeconds(10), RxApp.DeferredScheduler)
        .InvokeCommand(LoadTickets);

LoadTickets.Execute(null); //initial load 
```

因此，每 10 秒我想调用一个命令，它将函数的结果通过管道传输到列表。

但是，在最初的 之后`Execute`，每次后续`CanExecute`的命令都是假的。我检查了使用：

```
Observable.Interval(TimeSpan.FromSeconds(10), RxApp.DeferredScheduler)
                        .Subscribe(_ =>
                         Debug.WriteLine("Can execute in timer " + LoadTickets.CanExecute(null))
                              ); 
```

发生这种情况有原因吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T16:22:25.933

行，

找到它，我忽略了一些东西：

```
LoadTickets = new ReactiveAsyncCommand(null, 1, RxApp.DeferredScheduler); 
```

我已将最大并发设置为 0，这可能解释了为什么该命令`CanExecute`总是错误的。

# mongodb - 在 Mongo 服务器端 javascript 中输出到控制台

> ID：14071052
> 
> 赞同：4
> 
> 时间：2012-12-28T14:34:13.657
> 
> 标签：mongodb

有人想出一种方法来输出到在 Mongo 中执行服务器端的 javascript 函数内的控制台吗？下面的 Groovy 代码：

```
DBCollection js = db.getCollection('system.js')
js.save([
    '_id' : 'product',
    value : new Code("""
        function(x,y) {
            alert('product called!');  // blows up...
            console.log('product called!');  // blows up...
            return x*y;
        }
    """
    )
])
js.eval('product(2,3)') 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-31T08:53:39.440

您可以使用两个函数从 MongoDB 服务器上评估的 JavaScript 中输出（包括 Map/Reduce 函数）：

*   `print()`- 标准的javascript打印
*   `printjson()`- 打印为 JSON

这两个函数都会将它们的输出发送到`mongod`日志中，并且对于调试很有用。

# mysql - 按一个字段分组并计算匹配字段

> ID：14071054
> 
> 赞同：0
> 
> 时间：2012-12-28T14:34:15.763
> 
> 标签：mysql, sql

我有一个看起来像这样的三重连接：

```
 select DATE_FORMAT(Posts.PostDate, '%Y-%m-%d'), (Tags.TagName)
    from Posts
    join PostTags
            on Posts.PK_PostID = PostTags.FK_PostID
        join Tags
            on Tags.PK_TagID = PostTags.FK_TagID
    where Tags.TagName = 'Money' 
```

结果如下所示：

![在此处输入图像描述](../Images/e74c107b76a992cb8996e23fabc52fb8.png)

但我希望它按日期分组，然后在它旁边是标签的使用次数。我想不通。像这样的东西：

```
2012-12-26 10
2012-12-27 4 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T14:37:49.553

没有小提琴，我相信你想要的是这样的：

```
 select DATE_FORMAT(Posts.PostDate, '%Y-%m-%d'), count(Tags.TagName)
    from Posts
    join PostTags
            on Posts.PK_PostID = PostTags.FK_PostID
        join Tags
            on Tags.PK_TagID = PostTags.FK_TagID
    where Tags.TagName = 'Money'
    group by DATE_FORMAT(Posts.PostDate, '%Y-%m-%d') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T14:40:15.243

我没有你的桌子，但试试这个：

```
SELECT DATE_FORMAT(Posts.PostDate, '%Y-%m-%d') as PDate, COUNT(*) FROM Posts
JOIN PostTags ON Posts.PK_PostID = PostTags.FK_PostID
JOIN Tags ON Tags.PK_TagID = PostTags.FK_TagID 
WHERE Tags.TagName = 'Money'
GROUP BY PDate 
```

有关更多详细信息，请参见[http://dev.mysql.com/doc/refman/5.1/en/counting-rows.html](http://dev.mysql.com/doc/refman/5.1/en/counting-rows.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T14:40:28.323

这是一个简单的聚合查询。我选择使用您的查询作为子查询来编写它，尽管这不是绝对必要的：

```
select thedate,
       sum(case when tagname = 'Money' then 1 else 0 end) as NumMoney
from (select DATE_FORMAT(Posts.PostDate, '%Y-%m-%d') as thedate, (Tags.TagName)
      from Posts join
           PostTags
           on Posts.PK_PostID = PostTags.FK_PostID join
           Tags
           on Tags.PK_TagID = PostTags.FK_TagID
     ) t
group by thedate 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-28T14:40:29.523

好吧，您必须使用 group By 子句，如果标签名称在输出中，您也必须按标签名称进行分组。（否则，如果有多行具有相同的日期但不同的标签名称，则应为具有任何特定日期的一行输出哪个标签名称？....

```
 select DATE_FORMAT(p.PostDate, '%Y-%m-%d'), (t.TagName), 
      Count(Distinct t.tagname) tagCount
 from Posts p
     join PostTags pt
        on pt.FK_PostID - p.PK_PostID 
     join Tags t
        on t.PK_TagID = pt.FK_TagID
 group by DATE_FORMAT(p.PostDate, '%Y-%m-%d'), (t.TagName) 
```

如果可以有多行具有相同的日期但不同的标签名称，您需要每个不同标签名称的计数，那么您也需要按标签名称分组。这是你想要的吗 ？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-28T14:51:12.403

您需要按以下方式对组进行 SUB-SELECT：

```
SELECT T.*, Tags.TagName
FROM (select DATE_FORMAT(Posts.PostDate, '%Y-%m-%d'), PostTags.FK_TagID, count(*) PostsCount
from Posts
join PostTags
        on Posts.PK_PostID = PostTags.FK_PostID
group by DATE_FORMAT(Posts.PostDate, '%Y-%m-%d'), PostTags.FK_TagID) as P
inner join Tags
        on Tags.PK_TagID = P.FK_TagID 
```

# sql-server-2008 - 如何将 SSIS 添加到我的 SQL Server 2008 R2 Management Studio 安装中

> ID：14071061
> 
> 赞同：0
> 
> 时间：2012-12-28T14:34:43.927
> 
> 标签：sql-server-2008, ssms

我有一台运行 SQL Server 2008 R2 的服务器，并且分析和集成服务正在该服务器上运行。

我的 Windows XP PC 上装有 Visual Studio 2008 和 SQL Server 2008 R2 Management Studio。

在 Visual Studio 中，当我去打开一个新的 Analysis Services 项目时，它让我。但是，如果我尝试打开一个新的集成服务项目，它不会让我这样做，最后它告诉我：

> *要安装 Integration Services，请运行 SQL Server 安装程序并选择 Integration Services。*

所以我找到安装媒体并运行安装程序并选择了这个选项：

> *新安装或向现有安装添加功能。*

但是，通过这些步骤，它看起来好像要在我的 PC 上安装服务器引擎，所以我犹豫了一下并停止了该过程。

我环顾四周，发现这个[How to install SQL Server Management Studio 2008 component only](https://stackoverflow.com/questions/3536023/how-to-install-sql-server-management-studio-2008-component-only)指的是能够

> *仅安装客户端/工作站组件*

但到目前为止我还没有看到。

我还发现了这个： http: [//www.codefrenzy.net/2011/06/03/how-to-install-sql-server-2008-management-studio/](http://www.codefrenzy.net/2011/06/03/how-to-install-sql-server-2008-management-studio/)她说

> *运行 SQL Server Management Studio 安装程序*

她指的是什么？我在我的媒体上没有看到这一点。

我想知道，通过询问客户端组件或服务器组件或两者来开始安装过程是否合乎逻辑？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T19:30:29.680

请在客户端 PC 上卸载并重新安装 SQL Server Management Studio（客户端/工作站组件），以便与 SSIS 一起使用。

# asp.net-mvc-3 - 如何在多个已安装的 Visual Studio（2010 和 2012）上将 MVC3 安装到 pc

> ID：14071067
> 
> 赞同：0
> 
> 时间：2012-12-28T14:35:02.893
> 
> 标签：asp.net-mvc-3, visual-studio-2010, visual-studio-2012

在开发电脑上安装了 Visual Studio 2010 和 MVC3 以及 Web 平台安装程序。然后在这台机器上安装了 VS2012 Express，我想安装 MVC3。当我启动WPI时，无法选择VS2012：![wpi](../Images/ade201f5fdfda3c21a72be1a795e1ef0.png)

我尝试[使用 nuget 进行安装](http://nuget.org/packages/AspNetMvc/3.0.20105.0)，但它只是安装它们的程序集。

我将不胜感激任何帮助，在此先感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T18:38:09.977

而不是在安装 mvc3 时，使用 Visual Studio 2012 Express for Web。

# html - 为什么大多数音频src标签都使用ogg和mp3

> ID：14071068
> 
> 赞同：0
> 
> 时间：2012-12-28T14:35:05.877
> 
> 标签：html, audio, mp3, wav, ogg

我注意到大多数关于 HTML5 音频标签的教程总是使用 mp3 和 ogg 格式，为什么大多数开发人员在他们的 html5 音频源标签中使用 mp3 和 ogg 格式？为什么不能是mp3和wav？在音频源标签上使用 mp3 和 ogg 是经验法则吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T14:36:06.547

Wave 通常是未压缩的音频数据，这对于 Web 应用程序是不实用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T14:39:58.200

mp3 尤其是 ogg 易于流式传输，并且可以包含视频/音频/文本

如上所述，.wav 是完全未压缩的音频

# php - 一个数据库上的多个域和 CakePHP ACL 权限

> ID：14071069
> 
> 赞同：1
> 
> 时间：2012-12-28T14:35:07.947
> 
> 标签：php, cakephp, acl, crud

**情况**

我们正在开发一个 CakePHP 网上商店应用程序，它为我们提供了对不同域仅使用一个数据库的可能性。例如，我们有 shop1.com、shop2.com 和 shop3.com 都在不同的域上，它们都使用相同的数据库。客户看到不同的商店，但我们可以维护它们并从一个后端处理订单。

**问题**

我们在 CakePHP 中遇到了 ACL 系统的问题。我们希望能够为特定商店设置权限，例如，用户“Roger”无权访问**商店 1**的“admin_edit”页面，但他确实有权访问**商店 2**的“admin_edit”页面。

每个商店都用 Config/bootstrap.php 中的唯一商店 ID 标识。

**可能的解决方案**

我已经尝试将一个名为 store_id 的字段添加到 acos_aros 表中。这将解决问题，因为权限随后取决于执行操作的商店。但是如何以最干净的方式检查该数据库中的 store_id 呢？无需更改 CakePHP 核心..

**事实**

*   我们使用的是 CakePHP 2.2.3
*   我们有一个包含所有产品、用户等的中央数据库。
*   我们在多台服务器上有不同的域（应用程序），所有商店（目前为 3 个）都使用在 Config/bootstrap.php 中设置的唯一 store_id 进行标识。
*   我们正在使用 CRUD 授权。
*   我们不仅要为每个控制器/动作设置权限，还要为每个商店设置权限。否则，商店 1 的所有管理员也可以访问商店 2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-30T15:55:31.357

我有一个解决你关于这个[话题](https://stackoverflow.com/questions/17886916/cakephp-one-core-one-app-one-databsse-multiple-domains-multiple-themes/17887614#17887614)的问题的方法。该解决方案需要域路由器，并且在您为所在的域（domain.id）设置值之后。然后，您可以限制对各种控制器中某些数据的访问。将其与 cakephp 中的 ACL 集成。

# java - Java如何从接收到的UDP字节中解析一个双精度值？

> ID：14071070
> 
> 赞同：1
> 
> 时间：2012-12-28T14:35:08.820
> 
> 标签：java, byte

```
int port = 18000;
DatagramSocket serverSocket = new DatagramSocket(port);
byte[] receiveData = new byte[8];

System.out.println("Server Listing on Port: "+port);
String x;

while (true){
  DatagramPacket receivePacket = new DatagramPacket(receiveData, receiveData.length);
  serverSocket.receive(receivePacket); 
```

?? 双 x = 新的 Doulbe.parseBytes(recievedPacket)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T14:38:18.493

你可以使用[`ByteBuffer`](http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html%3a)

```
Double x = ByteBuffer.wrap(receiveData).getDouble(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T14:40:16.140

利用`java.nio.ByteBuffer`

就像是：

```
private static ByteBuffer buffer = ByteBuffer.allocate(8);    

public static byte[] encodeDouble(double x) {
    buffer.clear();
    buffer.putDouble(0, x);
    return buffer.array();
}

public static double decodeDouble(byte[] bytes) {
    buffer.clear();
    buffer.put(bytes);
    buffer.flip(); 
    return buffer.getDouble();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T14:40:18.360

```
ByteBuffer.wrap(receiveData.getData()).getDouble(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-28T15:04:04.520

```
java.io.DataInputStream.readDouble() 
```

# regex - perl 正则表达式 - 量词 * 不够贪婪，无法在字符串末尾拾取换行符

> ID：14071079
> 
> 赞同：0
> 
> 时间：2012-12-28T14:35:39.960
> 
> 标签：regex, perl

不是量词 * ，贪心吗？不应该`\s*`匹配 0 个或多个出现的空格，而哪个又会匹配所有内容，直到给定输入字符串的结尾？

```
#!/usr/bin/perl
use strict;
use warnings;
my $input="Name :       www.devserver.com\n";
$input=~s/\w+.:\s*//;  # /s* should not it match everthing till \n at the end ?
print $input; 
```

请帮助我理解这种行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T14:45:03.217

`\s*`将仅匹配完全由同一类字符（即空格）组成的字符串。在您的情况下，`www.devserver.com`前导空格和尾随空格之间存在空格。

您可能已尝试使用`.`class 而不是`\s`：

```
$input=~s/\w+.:.*//; 
```

这也不会触及尾随的换行符！根据[perlre](http://perldoc.perl.org/perlre.html)：

> 为了简化多行替换，“.” 除非你使用 /s 修饰符，否则字符永远不会匹配换行符，它实际上告诉 Perl 假装字符串是单行——即使它不是。

因此，总结一下：您所期望的行为可以通过以下替换来重现：

```
$input=~s/\w+.:.*//s; 
```

# c# - MEF - 将默认创建策略更改为 NonShared

> ID：14071080
> 
> 赞同：4
> 
> 时间：2012-12-28T14:35:42.630
> 
> 标签：c#, dependency-injection, inversion-of-control, mef

我目前正在使用 MEF 扫描/编写我的应用程序的扩展。我想将默认创建策略更改为非共享（代替共享），但要让它通过属性覆盖创建策略。换句话说，如果我不指定导出的创建策略，我希望 MEF 使用非共享。

我以前的实现不再适用于我，因为它改变了所有导入所需的创建策略。因此，如果我覆盖创建策略，则导出不会组合。

我四处搜索，我能得到的最接近的是新的 RegisrationBuilder，但我正在使用 VS2010 中的 .NET 4（所以 MEF 1）。我也想不出使用 ExportProviders 的方法。

任何帮助是极大的赞赏; 提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-25T19:29:32.447

我设法创建了一个[MEF 包装器](https://github.com/mnikolovski/Emit.ExtensibilityProvider/)，我将其用作应用程序引导程序。在我使用 MEF 的项目中，我有 mu 自定义属性，用于控制脚趾实例化模式。属性的自定义实现将是：

```
[AttributeUsage(AttributeTargets.Property | AttributeTargets.Field | AttributeTargets.Parameter, AllowMultiple = false, Inherited = false)]
public class BusinessLogicImportAttribute : ConstraintImportAttribute
{
    public BusinessLogicImportAttribute()
        : base(typeof(IBusinessController))
    {
        base.RequiredCreationPolicy = RequiredCreationPolicy = CreationPolicy.NonShared;
    }
} 
```

# ms-access - Microsoft Access 顺序连接键

> ID：14071091
> 
> 赞同：1
> 
> 时间：2012-12-28T14:36:27.930
> 
> 标签：ms-access, composite-primary-key

我的雇主有多个站点（300 多个），并希望通过 siteID 和顺序 jobID 跟踪工作请求。我想要一个 siteID 的连接键，后跟一个顺序的 jobID，以便每个站点的 jobID 与特定站点连续。有没有办法安排这样的自动编号键？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T14:39:23.813

考虑创建一个复合键。第一个字段是站点标识符，第二个字段是身份字段。

# python - Django Tinymce 不显示富文本表单

> ID：14071096
> 
> 赞同：2
> 
> 时间：2012-12-28T14:36:39.550
> 
> 标签：python, django, django-tinymce

我想在我的 Django 项目中使用 TinyMCE，在完成所有必要的设置后，当我访问页面时，表单只呈现普通的 django 表单，而不是 TinyMCE 富文本表单。下面是我的设置。

我将tinymce文件夹复制到媒体文件夹：

```
 C:/Python27/Scripts/nate/media/js/tiny_mce 
```

设置.py

```
 TINYMCE_JS_URL = '/media/js/tiny_mce/tiny_mce.js/'

  TINYMCE_DEFAULT_CONFIG = {
       'plugins': "table,spellchecker,paste,searchreplace",
       'theme': "advanced",
       'cleanup_on_startup': True,
       'custom_undo_redo_levels': 10, 
```

}

```
 TINYMCE_SPELLCHECKER = True
  TINYMCE_COMPRESSOR = True 
```

网址.py

```
 (r'^tinymce/', include('tinymce.urls')), 
```

楷模

```
 class Finmall(models.Model):
       user=models.ForeignKey(User)
       name=models.CharField(max_length=250, unique=True)
       content1 = models.TextField()
       content2 = models.TextField()

       def __unicode__(self):
           return self.user 
```

模板

```
 <head>
     <script type="text/javascript" src="{{ MEDIA_URL }}/js/tiny_mce/tiny_mce.js"></script>
    </script>
    </head>

   {% block content %}

    <div id="postcribbody" class="wrapper">     

     <p class="list">You can make it</p>
      <form enctype="multipart/form-data"  form action="." method="POST">
          {% csrf_token %}
             {{ FinmallForm.as_p }}
  <input type="submit"  class="cribput" value="Submit"/>
      </form>
      </div>
   {% endblock %} 
```

如何让 content1 和 content2 显示 TinyMCE 富文本格式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T14:58:12.513

[文档](http://django-tinymce.readthedocs.org/en/latest/usage.html#using-the-widget)中的一个示例：

```
from django import forms
from tinymce.widgets import TinyMCE

class FinmallForm(forms.ModelForm):
    ...
    content = forms.CharField(widget=TinyMCE(attrs={'cols': 80, 'rows': 30}))
    ...

    class Meta:
        model = Finmall 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T14:42:46.563

问题是您将表单显示为 Django 表单。

富编辑文本字段将是 Django 不会创建的 JS 事物。django.form 功能将创建一个 HTML 元素。

我建议手动将丰富的编辑放入模板中。只要您为丰富的编辑提供与 Django 表单元素相同的“名称”，您就可以在返回的 POST 中使用它。

编辑：您在呈现表单时发布 models.TextField() 。这将在表单中生成一个元素。此表单将只有默认属性。

我不是 100% 确定 TinyMCE 是如何工作的，但您需要通过“id”或“name”值将其绑定到该元素，或者只需将表单代码放入模板中。

我自己不使用 Django 来呈现我自己在模板中创建的表单，并给它们赋予 Django 赋予它们的相同名称。

查看渲染页面的源代码并查看表单的外观。然后用 TinyMCE 建立一个测试页面，让它工作，看看元素之间的区别。

:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-23T18:34:31.747

尝试把上面的表格，`{{ form.media }}`即`{{ FinmallForm.media }}`在你的模板中

```
 <head>
     <script type="text/javascript" src="{{ MEDIA_URL }}/js/tiny_mce/tiny_mce.js"></script>
    </script>
    </head>

   {% block content %}

    <div id="postcribbody" class="wrapper">     

     <p class="list">You can make it</p>
      {{ FinmallForm.media }}
      <form enctype="multipart/form-data"  form action="." method="POST">
          {% csrf_token %}
             {{ FinmallForm.as_p }}
  <input type="submit"  class="cribput" value="Submit"/>
      </form>
      </div>
   {% endblock %} 
```

# visual-studio - OpenSSL WinINET 客户端

> ID：14071099
> 
> 赞同：2
> 
> 时间：2012-12-28T14:37:00.697
> 
> 标签：visual-studio, winapi, ssl, openssl, wininet

我有一个工作客户端和一个服务器，一旦完成，它就会有一个有效的 SSL 证书。

目前，为了进行测试，我只是通过添加标志来禁用客户端中 SSL 验证的需要，`INTERNET_FLAG_IGNORE_CERT_CN_INVALID`如下`SECURITY_FLAG_IGNORE_UNKNOWN_CA`所示：

```
HINTERNET hRequest = HttpOpenRequest(hConnection,
           "GET","index.html",
           NULL,NULL,NULL,
           INTERNET_FLAG_RELOAD|
           INTERNET_FLAG_EXISTING_CONNECT
           #ifdef  __HTTPS__
           | INTERNET_FLAG_SECURE |INTERNET_FLAG_IGNORE_CERT_CN_INVALID|SECURITY_FLAG_IGNORE_UNKNOWN_CA
           #endif
           ,
           dwContext); 
```

我让它在我的笔记本电脑上完美运行。现在我正试图在我的电脑上使用它。完全相同的代码。复制并粘贴了文件（均为 Visual Studio Professional 2008），现在`12045`出现错误。意思是`Invalid Certificate Authority`

我试过禁用 Windows 防火墙，没有用。两台电脑连接到同一个路由器

有什么想法会导致这种情况吗？

谢谢！

**编辑基本上发生的情况与**[Microsoft 此处](http://support.microsoft.com/kb/825828) 描述的相同，只有本文适用于`Windows CE`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T15:12:15.700

[这](http://support.microsoft.com/kb/q182888/en-US)有帮助吗？

> 如果服务器 SSL 证书由未知或无效的证书颁发机构 WinInet HttpSendRequest API 或 MFC CInternetFile::SendRequest 将失败并出现错误 12045 (ERROR_INTERNET_INVALID_CA)。

我认为您应该`InternetSetOption()`在发出请求之前调用请求，就像这样，因为[`HttpOpenRequest()`标志](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384233%28v=vs.85%29.aspx)没有指定`SECURITY_FLAG_IGNORE_UNKNOWN_CA`：

```
HINTERNET hRequest = HttpOpenRequest(hConnection,...

#ifdef  __HTTPS__
    DWORD dwFlags;
    DWORD dwBuffLen = sizeof(dwFlags);
    InternetQueryOption(hRequest, INTERNET_OPTION_SECURITY_FLAGS, (LPVOID)&dwFlags, &dwBuffLen);

    dwFlags |= SECURITY_FLAG_IGNORE_UNKNOWN_CA;

    InternetSetOption (hRequest, INTERNET_OPTION_SECURITY_FLAGS, &dwFlags, sizeof (dwFlags));
#endif

HttpSendRequest(hRequest,... 
```

# android - 自定义 Listview + Xmlparser + Actionbar 4.2 Sherlock Searchview

> ID：14071101
> 
> 赞同：0
> 
> 时间：2012-12-28T14:37:03.140
> 
> 标签：android, search, xml-parsing, actionbarsherlock, android-listfragment

我有一个自定义 ListView，它通过传递 xml 数据 ArrayList 来获取 baseadapter。

我想使用 ActionbarSherlock 4.2 Searchview 执行搜索，因此在用户输入文本并按下按钮后，它将用结果填充新布局。

**最好的指导方针是什么？**

*   我应该在 BaseAdapter 上实现 Filterable 吗？如果是，我如何处理从 Sherlock Searchview 获取 tostring() 而不是 filterText.addTextChangedListener(filterTextWatcher);？
*   我应该创建一个新的 BaseAdapter 以仅通过搜索下载列表视图提示吗？如果是，您是否有任何示例或教程要链接？
*   还是其他方式？

**自定义列表视图：**

```
public class CustomizedListView extends ListFragment {
    // All static variables
    static final String URL = "http://api.androidhive.info/music/music.xml";
    // XML node keys
    static final String KEY_SONG = "song"; // parent node
    static final String KEY_ID = "id";
    static final String KEY_TITLE = "title";
    static final String KEY_ARTIST = "artist";
    static final String KEY_DURATION = "duration";
    static final String KEY_THUMB_URL = "thumb_url";

    ListView list;
    LazyAdapter adapter;

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onActivityCreated(savedInstanceState);

        ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();

        XMLParser parser = new XMLParser();
        String xml = parser.getXmlFromUrl(URL); // getting XML from URL
        Document doc = parser.getDomElement(xml); // getting DOM element

        NodeList nl = doc.getElementsByTagName(KEY_SONG);
        // looping through all song nodes <song>
        for (int i = 0; i < nl.getLength(); i++) {
            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();
            Element e = (Element) nl.item(i);
            // adding each child node to HashMap key => value
            map.put(KEY_ID, parser.getValue(e, KEY_ID));
            map.put(KEY_TITLE, parser.getValue(e, KEY_TITLE));
            map.put(KEY_ARTIST, parser.getValue(e, KEY_ARTIST));
            map.put(KEY_DURATION, parser.getValue(e, KEY_DURATION));
            map.put(KEY_THUMB_URL, parser.getValue(e, KEY_THUMB_URL));

            // adding HashList to ArrayList
            songsList.add(map);
        }

        // Getting adapter by passing xml data ArrayList
        adapter = new LazyAdapter(getActivity(), songsList);        
        setListAdapter(adapter);

    }   
} 
```

**基础适配器：**

```
public class LazyAdapter extends BaseAdapter {

    private FragmentActivity activity;
    private ArrayList<HashMap<String, String>> data;
    private static LayoutInflater inflater=null;
    public ImageLoader imageLoader; 

    public LazyAdapter(FragmentActivity fragmentActivity, ArrayList<HashMap<String, String>> d) {
        activity = fragmentActivity;
        data=d;
        inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        imageLoader=new ImageLoader(activity.getApplicationContext());
    }

    public int getCount() {
        return data.size();
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        View vi=convertView;
        if(convertView==null)

            vi = inflater.inflate(R.layout.list_row, null);

        TextView title = (TextView)vi.findViewById(R.id.title); // title
        TextView artist = (TextView)vi.findViewById(R.id.artist); // artist name
        TextView duration = (TextView)vi.findViewById(R.id.duration); // duration
        ImageView thumb_image=(ImageView)vi.findViewById(R.id.list_image); // thumb image

        HashMap<String, String> song = new HashMap<String, String>();
        song = data.get(position);

        // Setting all values in listview
        title.setText(song.get(CustomizedListView.KEY_TITLE));
        artist.setText(song.get(CustomizedListView.KEY_ARTIST));
        duration.setText(song.get(CustomizedListView.KEY_DURATION));
        imageLoader.DisplayImage(song.get(CustomizedListView.KEY_THUMB_URL), thumb_image);
        return vi;
    }
} 
```

**Sherlock ActionBar 搜索视图：**

```
public abstract class BaseSampleActivity extends SherlockFragmentActivity {
    private static final Random RANDOM = new Random();

    TestFragmentAdapter mAdapter;
    ViewPager mPager;
    PageIndicator mIndicator;

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        super.onCreateOptionsMenu(menu);
         SearchView searchView = new SearchView(getSupportActionBar().getThemedContext());
        searchView.setQueryHint("Procure pelo nome");
        searchView.setOnQueryTextListener(new SearchView.OnQueryTextListener() {

        @Override
        public boolean onQueryTextSubmit(String query) {
            // TODO Auto-generated method stub
            Intent search = new Intent(getApplicationContext(), SearchableActivity.class);
            search.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            search.putExtra(query, query);
            startActivityForResult(search, 0);
            return true;
        }

        @Override
        public boolean onQueryTextChange(String newText) {
            // TODO Auto-generated method stub
            return false;
        }
    });

        menu.add("Search")
            .setIcon(R.drawable.ic_search_inverse)
            .setActionView(searchView)
            .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM | MenuItem.SHOW_AS_ACTION_COLLAPSE_ACTION_VIEW);
        return true;
    } 
```

新活动：

```
public class SearchableActivity extends SherlockListActivity{

    // All static variables
        static final String URL = "http://api.androidhive.info/music/music.xml";
        // XML node keys
        static final String KEY_SONG = "song"; // parent node
        static final String KEY_ID = "id";
        static final String KEY_TITLE = "title";
        static final String KEY_ARTIST = "artist";
        static final String KEY_DURATION = "duration";
        static final String KEY_THUMB_URL = "thumb_url";

    private String message;
    private ListView list;
    private LazyAdapterS adapter;

    protected void onCreate(Bundle savedInstanceState, String query) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        message = getIntent().getExtras().getString(query);
        setContentView(R.layout.main_list_row);

        ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();

        XMLParser parser = new XMLParser();
        String xml = parser.getXmlFromUrl(URL); // getting XML from URL
        Document doc = parser.getDomElement(xml); // getting DOM element

        NodeList nl = doc.getElementsByTagName(KEY_SONG);
        // looping through all song nodes <song>
        for (int i = 0; i < nl.getLength(); i++) {
            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();
            Element e = (Element) nl.item(i);
            // adding each child node to HashMap key => value
            map.put(KEY_ID, parser.getValue(e, KEY_ID));
            map.put(KEY_TITLE, parser.getValue(e, KEY_TITLE));
            map.put(KEY_ARTIST, parser.getValue(e, KEY_ARTIST));
            map.put(KEY_DURATION, parser.getValue(e, KEY_DURATION));
            map.put(KEY_THUMB_URL, parser.getValue(e, KEY_THUMB_URL));

            // adding HashList to ArrayList
            songsList.add(map);
        }

        list=(ListView)findViewById(R.id.list);

        // Getting adapter by passing xml data ArrayList
        adapter = new LazyAdapterS(this, songsList);        
        list.setAdapter(adapter);
        ((Filterable) list.getAdapter()).Filter(message);// Error The method Filter(String) is undefined for the type Filterable
    }

} 
```

更新：我按照@Luksprog 的建议放置了 setOnQueryTextListener。更新：我创建了一个新活动来显示搜索结果，但过滤器仍然出错，我不知道如何处理。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T14:55:39.023

> 我应该在 BaseAdapter 上实现 Filterable 吗？

如果您想对适配器使用标准过滤机制（任何 Android SDK 适配器都会这样做），是的，您需要实现`Filterable`接口并为其两种方法提供适当的实现。

> 如果是，我如何处理从 Sherlock Searchview 获取 tostring() 而不是 filterText.addTextChangedListener(filterTextWatcher);？

看看[`OnQueryTextListener`](http://developer.android.com/reference/android/widget/SearchView.OnQueryTextListener.html)：

```
public boolean onQueryTextSubmit(String query) {
      ((Filterable) listview.getAdapter()).filter(query);
      return true;
} 
```

> 我应该创建一个新的 BaseAdapter 以仅通过搜索下载列表视图提示吗？如果是，您是否有任何示例或教程要链接？

如果您的意思是，再次解析 xml（仅使用与查询字符串匹配的内容）并创建一个新适配器以显示结果，不，因为您将做很多不必要的工作（尤其是您应该真正尝试的所有网络调用在后台线程上移动）。

如果您想在新活动中显示结果，则将查询`String`放入`Intent`启动结果活动并在那里执行/重做过滤。

> 还是其他方式？

见第一点。

# android - 安卓用户界面改进

> ID：14071104
> 
> 赞同：1
> 
> 时间：2012-12-28T14:37:06.230
> 
> 标签：android, android-ui

我目前正在开发一个应用程序，我几乎完成了，但我认为 UI 有点简单，这就是主菜单的样子：

[https://dl.dropbox.com/u/12945652/2012-12-28%2014.25.17.png](https://dl.dropbox.com/u/12945652/2012-12-28%2014.25.17.png)

选择方法： [https ://dl.dropbox.com/u/12945652/2012-12-28%2014.34.45.png](https://dl.dropbox.com/u/12945652/2012-12-28%2014.34.45.png)

设置： [https ://dl.dropbox.com/u/12945652/2012-12-28%2014.34.37.png](https://dl.dropbox.com/u/12945652/2012-12-28%2014.34.37.png)

谁能建议我如何改进用户界面。我曾考虑在操作栏中添加“设置”和“帮助”，但这会使屏幕感觉更空，按钮更少。

同样，目前，在平板电脑上，按钮横跨整个屏幕，我应该为它们应用任何 UI 模式吗？我知道您知道可以为更高分辨率创建不同的 XML 文件，但是如果我将按钮移到一个角落，将会有很多空白空间。

目前我认为菜单看起来有点平淡乏味。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T14:41:45.580

说到平板电脑，试着把你的一些活动分成片段，然后把它们并排放在更大的屏幕上。

至于你的手机用户界面，我不认为它看起来很糟糕。有时简单和干净会更好。如果您要继续向应用程序添加功能，您可能需要额外的空间，这样您就不必大幅更改 UI 以容纳更多项目。

# c - 这个指针类型的措辞在 C99 中是什么意思？

> ID：14071105
> 
> 赞同：2
> 
> 时间：2012-12-28T14:37:07.837
> 
> 标签：c, c99

在 C99 6.2.5 P27

> 所有指向结构类型的指针都应具有彼此相同的表示和对齐要求。所有指向联合类型的指针都应具有彼此相同的表示和对齐要求。指向其他类型的指针不需要具有相同的表示或对齐要求。

这是什么意思？

> 所有指向结构类型的指针都应具有彼此相同的表示和对齐要求。

这个例外的原因是什么？

> 指向其他类型的指针不需要具有相同的表示或对齐要求。

我很感激相关示例的解释。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T14:43:40.500

这意味着您可以将任何指向结构的指针值存储在任何其他指向结构的变量中，并在此过程中创建一个有效的指针对象，并且您可以从中间变量中恢复原始指针。相反，*不允许*使用不同类别的指针作为中间体。例如：

```
struct Foo * p = &x;   // x is a struct Foo
struct Bar * q;

memcpy(&q, &p, sizeof p);  // OK, it's allowed to read (but not dereference!) q
memcpy(&p, &q, sizeof q);  // OK, p is now the same it was before

union Zip * r;
int       * s;

// not allowed to do the same with (p, r) and (p, s)! 
```

`memcpy`s没问题，因为它们`p`都`q`具有相同的大小和对齐方式，因为它们都是指向结构的指针。对于两个指向联合的指针或两个指向 int 的指针也是如此，但您不能混合类别。

这是另一个非常做作但有效的示例：

```
struct Foo { int a; };

int f(struct Bar * p)
{
    return (struct Foo *)(p)->a;
}

int main()
{
    Foo x = { 12 };
    return f((struct Bar *)(&x));
} 
```

如果函数参数是不同类别的指针（例如指向联合的指针或指向 int 的指针），则该程序将*无效。*`f`

*任何*对象指针可以转换为和返回的唯一指针类型是`void *`. （所以我们可以制作`f`a的参数`void *`。这可以说是最常见的样式。但可以想象，将其作为结构指针更有效，因此在某些平台上更可取。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-28T14:41:29.417

这意味着将指向结构类型的指针转​​换为指向另一种结构类型的指针只是一种重新解释。

通常，允许指向不同类型的指针具有不同的大小和不同的对齐要求，例如，a`char*`可能具有 16 的大小和对齐要求并存储地址 big-endian，但`unsigned long long*`只有 8 的大小和对齐要求并且存储地址 little-endian。

但是对于`struct foo *`和`struct bar *`，表示和对齐要求必须相同。（与`union`s 类似。）

一个原因是在 s 中有指向不完整`struct`s 的指针是很常见`struct`的。如果结构指针的表示和对齐要求不相同，那将是不可能的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T16:57:40.033

在非正式语言中，C 语言语义中关于指针表示和转换的重要部分是：

*   void 和字符指针共享一个表示
*   所有结构指针共享一个表示
*   所有联合指针共享一个表示
*   任意对象指针（但通常不是函数指针）可以转换为 void 或字符指针并返回其原始类型
*   任意函数指针可以转换为其他函数指针类型并返回其原始类型

其他一切都取决于实施。

这些特定规则的必要性可以这样证明：

对象指针到字符指针的转换允许按字节访问，而不管类型如何。虽然 void 指针基本上是变相的字符指针，但它们具有不同的语义内涵（没有类型关联的通用指针）。

结构分别 共享表示的联合指针使指向不完整类型（不透明指针）的指针成为可能。

函数指针可能不会转换为 void 指针，因为它们可能驻留在完全不同的地址空间中，并且可能不可用于按字节访问。它们之间是可转换的，因为没有通用函数指针类型（相当于 void 指针）并且可能共享一个表示。据我所知，C 标准不需要单一表示，即原则上函数指针类型之间的转换可能涉及实际转换。但是，由于非原型函数（以及相应的函数指针）需要与所有函数类型兼容，因此可能的转换受到严重限制。

一般来说，C 标准在不人为地限制未来发展的情况下，为实现提供了很多内容以适应广泛的历史优先级。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-28T14:42:34.943

不同的指针类型可能有不同的大小和表示；IOW, an`int *`可能与 a 具有不同的大小和表示，a`char *`可能具有与 a 不同的大小和表示`double *`，等等。

指向任何`struct`类型的指针将具有相同的大小和表示；IOW，`struct T *`并且`struct Q *`看起来一样。对于联合也是类似的，`union T *`并且`union U *`看起来相同（尽管它们可能看起来与`struct`指针不同）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-28T14:41:45.240

例如，这意味着您可以不依赖于函数指针的结构或对齐方式。我认为这也意味着您在处理指向 C++ `class`es 或`struct`s 的指针时不能做出这样的假设（尽管我没有检查 C++ 是如何定义这些的）。

# jquery - Jquery UI 1.9 选项卡 + jquery-ui-tabs-paging 无法正常工作

> ID：14071108
> 
> 赞同：1
> 
> 时间：2012-12-28T14:37:16.470
> 
> 标签：jquery, jquery-ui, jquery-plugins, jquery-ui-tabs

添加许多选项卡后，插件崩溃。我正在使用一些插件来增强我的应用程序面板内的表格。我不知道为什么，但是当我将第三个选项卡添加到第二页时，插件不会激活最后添加的选项卡，这会使表插件崩溃。

## 这是我的一些代码：

```
int port = 18000;
DatagramSocket serverSocket = new DatagramSocket(port);
byte[] receiveData = new byte[8];
System.out.println("Server Listing on Port: "+port);
String x;
while (true)
{
    DatagramPacket receivePacket = new DatagramPacket(receiveData, receiveData.length);
    serverSocket.receive(receivePacket);

function addSearchResult(title, content) {
    id = "tabs-" + tabId.toUpperCase(),
    li="<li><a href='#"+id+"'>"+title.toUpperCase()+"</a><span class='ui-icon ui-icon-close'></span></li>";
    tabs.find( ".ui-tabs-nav" ).append( li );
    tabs.append( "<div id='" + id + "'>" + content + "</div>" );
    tabs.tabs( "refresh" );
    $('#modal').trigger('close');
    tabs.tabs('option','active', $('#'+id).index()-1);
    indexTab++;
    $(".activo").find('.tablaQuotes, .tablaCuatro, .tablaCinco, .tablaSeis').dataTable({
        "aaSorting": [[1,'desc']]
    });
    $(".activo").find('.other').find('.tabui').dataTable({
        "aaSorting": [[2,'desc']],
        "iDisplayLength": 5
    });
    $(".activo").find('.gal').carouFredSel({
        circular:false,
        infinite:false
    });
    $(".activo").find(".grupo").colorbox({
        rel:'pt-'+tabId, transition:"none", width:"75%", height:"75%",
        onComplete:function(){
            $('#cboxLoadedContent').zoom();
        }
    });
} 
```

## 这是标签的代码：

```
var tabs = $( "#tabs" ).tabs({
    beforeActivate: function( event, ui ){
    },
    create: function( event, ui ){
    },
    activate: function( event, ui ){
        $('div').removeClass('activo');
        ui.newPanel.addClass('activo');
    }
});

$( "#tabs" ).tabs('paging'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T14:53:08.990

检查您正在使用的插件的渲染 HTML 输出和 Javascript，因为我发现旧的“globalPanel”功能在 jQuery 1.9 中不再有效。选项卡的所有内容都**必须**是选项卡元素的后代。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T15:41:43.020

Well I've fixed it. i just add $('#tabs').tabs('pagingDestroy'); and $('#tabs').tabs('paging');

to destroy and initialize the plugin each time i add a new tab. I was doing this first but i was doing it in a wrong place ( inside beforeActivate() ), that why never worked. i just moved to addSearchResult();

# android - 如何使用带有特殊字符的电话号码启动拨号程序（井号#）

> ID：14071110
> 
> 赞同：0
> 
> 时间：2012-12-28T14:37:22.717
> 
> 标签：android

我想使用带有英镑字符的电话号码启动 android 拨号器。我不想直接拨打电话，而是打开拨号器让用户拨打电话（这样，我不必在应用程序中请求权限即可拨打电话）。这可能吗？

我尝试了以下方法，但启动拨号器后，没有显示号码。

```
View poundTaxi = this.findViewById( R.id.pound_taxi_big_button );
    poundTaxi.setOnClickListener( new View.OnClickListener() 
    {    
        @Override
        public void onClick( View v ) 
        {
            //Get the number from the URL
            Intent intent = new Intent(Intent.ACTION_DIAL);
            intent.setData(Uri.parse("tel:#8294"));
            startActivity(intent);

        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T17:14:57.620

要拨号，请尝试这样：

```
Intent callIntent = new Intent(Intent.ACTION_DIAL);
callIntent.setData(Uri.parse("tel:" + Uri.encode("#8294")));
startActivity(callIntent); 
```

# php - 使用 jQuery/Ajax/JS 加载 PHP 文件和显示状态的正确或最佳过程

> ID：14071111
> 
> 赞同：0
> 
> 时间：2012-12-28T14:37:27.290
> 
> 标签：php, javascript, jquery, ajax

所以我正在开发一个项目，该项目将使用 PHP 下载带有 CURL 的文件并在服务器上更新它们。我已经处理好了那部分，现在我正在开发一个前端 gui，它将向用户显示进度。

所以我最初的想法是这样使用代码：

```
$('#startupgrade').click(function() {
    $('#upgradeprogress').css({"width": "0%"});
    $('#upgradestatus').append('<p>Starting Upgrade...</p>');
    $('#upgradeprogress').css({"width": "10%"});
    $('#currentstep').load('upgrade.php #statusreturn', 'step=1');
    $('#upgradestatus').append('<p>Step 1 Complete...</p>');
    $('#upgradeprogress').css({"width": "20%"});
}) 
```

这背后的想法是加载 PHP 页面并从 PHP 在 ID #statusreturn 中生成的页面中提取“状态消息”，如果该步骤失败或成功，该消息将附加到当前页面。在上面的示例中，我保持简单，只是继续并附加了第 1 步完成，但我会在其中添加某种类型的标准 JS 来检查第一步是否完成。

我对 JS 和 jQuery 非常陌生，我觉得应该有一种更简单或更正确的方法来做到这一点。也许使用基于步数的 if 语句运行一些标准 JS？

有没有人对如何用更少的代码或更简单的方式完成这项工作有任何建议或建议？我想确保我最终使用和学习的方法是正确的，希望我不会犯新手错误并且使用比必要更多的代码。

感谢您的任何意见，并提前感谢您的帮助。

#upgradeprogress 使用由宽度控制的 Twitter Bootstrap 进度条。#upgradestatus 是一个 Bootstrap 井，它将显示几乎类似于终端的输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T14:42:14.437

加载函数是一个异步函数。这意味着它将直接继续而不等待加载。为了等待加载，将进度条的更新放入成功回调处理程序中：

[http://api.jquery.com/load/](http://api.jquery.com/load/)

```
$('#result').load('steps/step1.php', function() {
  $('#upgradeprogress').css({"width": "10%"}); //update your status bar here

  $('#currentstep').load('upgrade.php #statusreturn', function() {
    $('#upgradeprogress').css({"width": "20%"});
    //add more steps here if required
  });
}); 
```

只有在执行成功函数（）时，您才能确定请求已完成。

# android - 在 android 虚拟设备上使用 Api v2

> ID：14071112
> 
> 赞同：-1
> 
> 时间：2012-12-28T14:37:29.567
> 
> 标签：android, maps

我可以在 android 虚拟设备上使用 APIv2 映射吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T14:40:26.457

不，不可能在虚拟设备上运行 APIv2 映射。您需要在真实设备上测试地图。
[通过](https://developers.google.com/maps/documentation/android/start#installing_the_google_maps_android_v2_api)这个链接。你会明白一切。
为什么要使用 APIv2？您可以使用在虚拟设备上运行的 APIv1。

# php - 在 php/javascript 中打开/浏览对话框？

> ID：14071120
> 
> 赞同：7
> 
> 时间：2012-12-28T14:38:02.733
> 
> 标签：php, javascript, html

我正在开发一个 PHP 项目，当用户从指定目录的打开对话框中选择图像时，我需要在其中存储图像的路径。我怎样才能做到这一点？我不知道如何打开“打开/浏览”对话框以及如何在 PHP/javascript 中获取该路径。而且我希望我的其他表单数据在打开“打开/浏览”对话框时不会刷新。（我想将用户选择的图像文件路径放入我的数据库中，这样我就可以减少我的数据库大小。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T14:42:02.720

您可以使用带有 html 的文件上传表单并将表单发送到您的 PHP 文件以处理文件内容。当一个文件被发送到服务器时，它被存储在一个临时位置。

W3Schools 有一个很好的教程，HTML 变成：

```
<html>
<body>

<form action="upload_file.php" method="post"
enctype="multipart/form-data">
<label for="file">Filename:</label>
<input type="file" name="file" id="file"><br>
<input type="submit" name="submit" value="Submit">
</form>

</body>
</html> 
```

和 PHP：

```
<?php
if ($_FILES["file"]["error"] > 0)
  {
  echo "Error: " . $_FILES["file"]["error"] . "<br>";
  }
else
  {
  echo "Upload: " . $_FILES["file"]["name"] . "<br>";
  echo "Type: " . $_FILES["file"]["type"] . "<br>";
  echo "Size: " . ($_FILES["file"]["size"] / 1024) . " kB<br>";
  echo "Stored in: " . $_FILES["file"]["tmp_name"];
  }
?> 
```

[http://www.w3schools.com/php/php_file_upload.asp](http://www.w3schools.com/php/php_file_upload.asp)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-28T14:42:38.347

您可以使用放置表单元素`<input type="file">`

如果您只想要路径而不上传文件。您可以使用 JavaScript。

如果您将数据发布到服务器文件的信息将可供 PHP 使用，但文件也将被发送到服务器。

如果您想要更多，请在此处查看 Javascript 文件 Api 示例 .. [http://www.html5rocks.com/en/tutorials/file/dndfiles/](http://www.html5rocks.com/en/tutorials/file/dndfiles/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T14:42:17.970

```
<input type="file"> 
```

不？或者我缺少什么？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-11T15:03:24.190

对于 dotNetAddict （如果他们仍然感兴趣）和任何其他类似感兴趣的人，请尝试以下链接以获得有关如何获取文件路径的良好解释...。

[http://www.w3schools.com/jsref/prop_fileupload_value.asp](http://www.w3schools.com/jsref/prop_fileupload_value.asp)

# python - Matplotlib中轮廓下方的网格线

> ID：14071121
> 
> 赞同：6
> 
> 时间：2012-12-28T14:38:06.293
> 
> 标签：python, graph, matplotlib

我有一个关于网格线 matplotlib 的问题。我不确定这是否可行。我正在绘制下图，如图所示。

我不会给出整个代码，因为它涉及到文件的读取。

然而，代码的重要部分在这里 -

```
X, Y = np.meshgrid(smallX, smallY)
Z = np.zeros((len(X),len(X[0])))
plt.contourf(X, Y, Z, levels, cmap=cm.gray_r, zorder = 1)
plt.colorbar()
...
# Set Border width zero
[i.set_linewidth(0) for i in ax.spines.itervalues()]

gridLineWidth=0.1
ax.set_axisbelow(False)
gridlines = ax.get_xgridlines()+ax.get_ygridlines()
#ax.set_axisbelow(True)

plt.setp(gridlines, 'zorder', 5)

ax.yaxis.grid(True, linewidth=gridLineWidth, linestyle='-', color='0.6')
ax.xaxis.grid(False)
ax.xaxis.set_ticks_position('none')
ax.yaxis.set_ticks_position('none') 
```

![在此处输入图像描述](../Images/c1c258865223e3d45e4539f1ef6156f5.png)

现在，我的问题是这样的——

如果我将网格线放在轮廓下方，它们就会消失，因为它们在轮廓下方。如果我将网格线放在轮廓上方，它们看起来就像现在看到的那样。但是，我想要的是网格线应该是可见的，但应该低于轮廓的黑色部分。我不确定这是否可能。

谢谢你 ！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-28T19:59:36.237

除了指定等高线和网格线的 z 顺序之外，您还可以尝试屏蔽等高线数据的零值。

这是一个小例子：

```
import numpy as np
import matplotlib.pyplot as plt

x = np.arange(-2*np.pi, 2*np.pi, 0.1)
y = np.arange(-2*np.pi, 2*np.pi, 0.1)
X, Y = np.meshgrid(x, y)

Z = np.sin(X) - np.cos(Y)
Z = np.ma.masked_less(Z, 0) # you use mask_equal(yourData, yourMagicValue)

fig, ax = plt.subplots()
ax.contourf(Z, zorder=5, cmap=plt.cm.coolwarm)
ax.xaxis.grid(True, zorder=0)
ax.yaxis.grid(True, zorder=0) 
```

和输出： ![在此处输入图像描述](../Images/d3bc1441ab8f1cb512dbb53af4157fa0.png)

# c++ - c++错误C2065：未声明的标识符

> ID：14071123
> 
> 赞同：0
> 
> 时间：2012-12-28T14:38:11.973
> 
> 标签：c++, vector, compiler-errors, undeclared-identifier

> **可能重复：**
> [C++ 未声明的标识符（但已声明？）](https://stackoverflow.com/questions/4528108/c-undeclared-identifier-but-it-is-declared)

`sprite.h(20): error C2065: 'Component' : undeclared identifier`当我尝试编译时出现错误（我也有几个其他文件）。下面是`sprite.h`文件。我一生都无法弄清楚是什么导致了这个问题。

```
#ifndef SPRITE_H
#define SPRITE_H

#include "Image.h"
#include "Rectangle.h"
#include <string>
#include <SDL.h>
#include <vector>
#include "Component.h"

namespace GE2D {

    class Sprite {
    public:
        Sprite();
        Sprite(Image *i);
        Sprite(Image *i, int x, int y);
        Sprite(char *file, bool transparentBg, int x, int y, int w, int h);
        virtual ~Sprite();
        virtual void tick(SDL_Surface *screen, std::vector<Sprite*>* sprites, std::vector<Component*>* components);
        virtual void handleEvent(SDL_Event eve);
        virtual void draw(SDL_Surface *screen);
        void setPosition(int x, int y);
        const Rectangle& getRect() const;
        const Image& getImage() const;
        const Sprite& operator=(const Sprite& other);
        Sprite(const Sprite& other);
    protected:

    private:
        Image image;
        Rectangle rect;
    };

}
#endif 
```

在`.cpp`文件`tick()`中定义如下：

```
void Sprite::tick(SDL_Surface *screen, std::vector<Sprite*>* sprites, std::vector<Component*>* components) {} 
```

`tick()`应该像现在一样采用两个向量，但也许有更好的方法可以解决这个问题？

**编辑** 根据要求，这里`Component.h`也是：

```
#ifndef COMPONENT_H
#define COMPONENT_H

#include "Rectangle.h"
#include "Component.h"
#include "Sprite.h"
#include <vector>
#include <SDL.h>

namespace GE2D {

    class Component {
    public:
        Component();
        virtual ~Component();
        virtual void draw(SDL_Surface *screen) = 0;
        virtual void tick(SDL_Surface *screen, std::vector<Sprite*>* sprites, std::vector<Component*>* components) = 0;
        virtual void handleEvent(SDL_Event eve) = 0;
        const Rectangle& getRect() const;

    protected:
        Component(int x, int y, int w, int h);
    private:
        Rectangle rect;
    };

}
#endif 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T14:44:48.930

`Sprite.h`包括`Component.h`which includes `Sprite.h`，给出一个无法解决的循环依赖。

幸运的是，您根本不需要包含标题。每个类只引用一个指向另一个类的指针，为此一个简单的声明就足够了：

```
class Component; 
```

# android - Android 查找特定蓝牙设备的 UUID

> ID：14071131
> 
> 赞同：12
> 
> 时间：2012-12-28T14:38:36.220
> 
> 标签：android, bluetooth, uuid

我最近开始在 Android 上开发蓝牙。我想构建一个可以通过蓝牙读取传感器记录的数据的应用程序。

我有一些示例代码，但看起来我需要另一个设备的另一个 UUID。它看起来像这样：

```
private static final UUID MY_UUID = UUID
                .fromString("00001101-0000-1000-8000-00805F9B34FB"); 
```

稍后在代码中，它使用此 UUID 进行连接：

```
tmp = device.createRfcommSocketToServiceRecord(MY_UUID); 
```

我在网上做了一些研究，比如[这里][1]。我认为我正在使用的新设备需要一个不同的 UUID 号码。如何获取 UUID 号？

在设备上，有两行数字表示：

**SN：1201L0023
BT：10:00:E8:C5:16:85**

提前致谢！

杰克

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-28T17:14:16.470

UUID 不绑定到特定设备。他们识别软件服务。已定义配置文件的某些 UUID 由 BT 设置。与您的示例一样的 RFCOMM 套接字使用的 UUID 是任意的。你只需要双方都使用同一个。通常，设备连接然后使用服务发现协议来找出远程设备支持哪些服务 (UUID)。

# c++ - 修改按值传递的参数对调用者的变量没有影响

> ID：14071134
> 
> 赞同：0
> 
> 时间：2012-12-28T14:38:51.653
> 
> 标签：c++, winapi, assembly

我正在尝试制作一个函数，当我调整窗口大小时，它可以用它的父窗口缩放窗口的控件，为了实现这一点，我嵌入`CreateWindowEx()`到我自己的函数中`createscalingwindow`

```
int createscalingwindow (HWND cswpara0,DWORD cswpara1,const CHAR* cswpara2,
const CHAR* cswpara3,DWORD cswpara4,int cswpara5,int cswpara6,int cswpara7,
int cswpara8,HWND cswpara9,HMENU cswpara10,HINSTANCE cswpara11,LPVOID cswpara12)
              {
               cswpara0 = CreateWindowEx (cswpara1, cswpara2, cswpara3, cswpara4,
                                          cswpara5,cswpara6,cswpara7,cswpara8,
                                         cswpara9,cswpara10,cswpara11,cswpara12);
               return 0;
              } 
```

在winmain中更改此代码后

```
 mainwin = CreateWindowEx(
       0,                   
       mainclassname,         
       "Mafia Online",       
       WS_OVERLAPPED|WS_CAPTION|WS_THICKFRAME|WS_MINIMIZEBOX|WS_MAXIMIZEBOX
      |WS_SYSMENU, 
       CW_USEDEFAULT,       
       CW_USEDEFAULT,       
       544,                 
       375,                 
       NULL,        
       playmenu,                
       hThisInstance,       
       NULL                 
       ); 
```

到下面的代码

```
createscalingwindow (mainwin, 0, mainclassname, "Mafia Online",
WS_OVERLAPPED|WS_CAPTION|WS_THICKFRAME|WS_MINIMIZEBOX|WS_MAXIMIZEBOX|WS_SYSMENU, 
CW_USEDEFAULT, CW_USEDEFAULT, 544, 375, NULL, playmenu, hThisInstance, NULL);
ShowWindow (mainwin, nCmdShow); 
```

主窗口根本不再显示。`GetLastError()`在嵌入`CreateWindowEx()`返回 error_success之后调用。

在 ollydbg 中检查了程序的两个变体后，我注意到了一些奇怪的事情，使用原型执行程序并没有按照我期望的方式工作。程序调用到`CreateWindowEx`然后从调用返回到一个完全不同的目的地。

以下是我期望程序执行的方式（这是不使用的程序`createscalingwindow`）：（我不允许以新用户的身份发布图像，所以如果一个模组或某人可以为我解决这些问题，那就太好了。 ) [http://s8.postimage.org/qo8tqt5h1/mainnormal.png](http://s8.postimage.org/qo8tqt5h1/mainnormal.png)

以下是它的执行方式： [http ://s8.postimage.org/fa8ytr7qt/mainweird.png](http://s8.postimage.org/fa8ytr7qt/mainweird.png)

感谢您为帮助我所做的任何努力，因此在此先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T14:54:27.587

默认情况下，函数参数是按值传递的，这意味着函数获取自己的变量副本，而不是对调用者变量的引用。对本地副本所做的任何修改都不会影响传递给函数的任何内容。

如果你想要一个参考，然后通过参考传递：

```
int createscalingwindow (HWND & cswpara0 /* etc. */)
                              ^ 
```

现在，您对函数参数所做的任何修改也将修改调用者的变量。

# python - 使用字符串作为名称导入文件

> ID：14071135
> 
> 赞同：23
> 
> 时间：2012-12-28T14:38:52.603
> 
> 标签：python, string, import, path

> **可能重复：**
> [Python 中的动态模块导入](https://stackoverflow.com/questions/301134/dynamic-module-import-in-python)

我打算在不久的将来制作一套文件，组织它的最好方法是有一个列表，该列表将位于文件的最顶部，然后会出现大量可笑的代码来处理该列表控制什么以及它如何运作。我希望只写一次所说的列表，并且所说的列表是这种格式的文件夹和文件名列表：

```
[(folder/filename, bool, bool, int), (folder/filename, bool, bool, int)] 
```

正如你所看到的，`folder/filename`都是一样的（有点）。文件名是`.py`最后的文件夹名称，但是导入 XXX 你不需要导入 XXX.py，所以我认为这不会导致问题。

我面临的问题是使用这种方法导入......

```
for (testName, auto, hardware, bit) in testList:
    print(testName)
    paths = "\\" + testName
    print paths
    addpath(paths)
    sys.modules[testName] = testName # One of a few options I've seen suggested on the net
    print("Path Added")
    test = testName + ".Helloworld()"
    eval(test) 
```

因此，对于我拥有的每个测试，打印名称，组装一个包含路径 ( `"\\testName"`) 的字符串，对于本示例，打印测试路径，然后将路径添加到列表 ( `sys.path.append(path)`)，然后打印以确认它发生了，然后组装一个将由`eval`测试主模块执行并最终评估它的字符串。

如您所见，我目前必须在顶部有一个进口清单。我不能简单地进行导入`testName`（的内容`testName`是我希望导入的模块的名称），因为它会尝试找到一个名为 的模块`testName`，而不是一个名为 的内容的模块`testName`。

我已经看到了一些这样做的例子，但在我的情况下找不到任何工作。如果有人可以从字面上抛出一大块代码，那就太好了。

我还要求我不要挂，画，也不要为了使用 eval 而四分五裂，它是在一个非常受控的环境中使用的（它循环的列表在 .py 文件中，所以没有“最终用户”应该弄乱它）。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-12-28T14:45:20.267

不确定我是否正确理解了所有内容，但您可以使用以下方法动态导入模块`__import__`：

```
mod = __import__(testName)
mod.HelloWorld() 
```

**编辑**：我不知道`__import__`python 文档不鼓励使用用户代码：[__import__ 文档](http://docs.python.org/2/library/functions.html#__import__)（如 Bakuriu 所述）

[这](https://docs.python.org/3/library/importlib.html)也应该有效，并且会被认为是更好的风格：

```
import importlib

mod = importlib.import_module(testName)
mod.HelloWorld() 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-12-28T14:47:01.827

1.  `sys.modules`如果你不知道自己在做什么，就永远不要直接搞砸。
2.  有很多方法可以做你想做的事：
    1.  内置[`__import__`](http://docs.python.org/2/library/functions.html?highlight=__import__#__import__)函数
    2.  使用[`imp.load_module`](http://docs.python.org/2/library/imp.html#imp.load_module)
    3.  使用[`importlib.import_module`](http://docs.python.org/2/library/importlib.html#importlib.import_module)

我会避免`__import__`直接使用，而是选择`importlib.import_module`（在文档末尾也建议`__import__`）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-28T14:55:42.590

将模块所在的路径添加到 sys.path 中。使用 __import__ 函数导入模块，该函数接受字符串变量作为模块名称。

```
import sys
sys.path.insert(0, mypath)  # mypath = path of module to be imported
imported_module = __import__("string_module_name") # __import__ accepts string 
imported_module.myfunction()   # All symbols in mymodule are now available normally 
```

# groovy - Groovy Server Pages (.gsp) 测试变量是否为字符串

> ID：14071137
> 
> 赞同：1
> 
> 时间：2012-12-28T14:38:54.083
> 
> 标签：groovy, gsp

我在 Groovy 服务器页面中有以下代码：

![在此处输入图像描述](../Images/470ca7ec311332d7ba708733b3d09690.png)

如何检查 的值是否`IntegerNameValueListName`是一般的字符串，而不是将其仅与一个特定的字符串进行比较？

`IntegerNameValueListName`具有以下值： ![在此处输入图像描述](../Images/705c718d0f6872eda5b838a48f1068ac.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T14:48:50.020

通常的 Java`instanceof`运算符应该可以工作，但请记住 GString 值不是`instanceof String`这样，因此这可能会给您带来误报。取决于您想要实现的具体内容，一个简单的`!= ''`甚至是 Groovy 的真理`test="${IntegerNameValueListName}"`可能就足够了。

# html - Weebly - Adsense in the vertical menu

> ID：14071140
> 
> 赞同：1
> 
> 时间：2012-12-28T13:56:02.520
> 
> 标签：html, css

I am using weebly as my website builder. I am not able to put Adsense advertisement in the vertical menu - I am only allowed to put it in the content window if I use the editor.

![Screenshot of Weebly page showing desired location of Adsense](../Images/cbdb365bbddac53fc083c34d0c555411.png)

I assume I will have to modify the css/html and create content panel in this area (see screenshot) but unfortunately I have no idea how can I do it. Any ideas please?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T21:43:39.693

Put an adsense ad under the navigation menu seems to be impossible without modify the HTML and CSS code.

To do it, you just have to export your theme (Settings > Un-published > Download the archive) and import it (Design > All themes > My Custom Themes > Import theme). An advice, to import the theme with success, read the recommandations because, otherwise, you will have error messages. After, edit the navigation menu in your new custom theme, add your adsense code, probably, in the #sidebar div and save modifications.

I hope I could help you and say me if you have any other problem.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-29T19:09:26.280

You can insert anything on your vertical menu. I've done that 100%. I was able to insert a search button on the navigation bar and surprisingly, you can insert anything on it.

The technique is simple, just place the HTML on the Lay out area under Design Tab. Then insert the CSS on your sites header or on the main-style.css.

This is rather a long tutorial to make it clear to you. Here is my tutorial on how to insert an element to your navigation: [http://www.myweeblytricks.com/2014/07/inserting-search-box-in-weebly.html](http://www.myweeblytricks.com/2014/07/inserting-search-box-in-weebly.html)

Good luck!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-06T10:59:49.417

Another much simpler way would be add the Column element beside your content, and adjust the settings of the Adsense Element to '**Skyscraper**'

# c - Memset 或 for 循环将多个相同长度的数组归零

> ID：14071141
> 
> 赞同：0
> 
> 时间：2012-12-28T14:39:06.793
> 
> 标签：c, memset

我有多个相同长度的数组，我希望用零填充。让我们看看两种方法：

## 1)

```
int i;
for(i=0;i<ARRAYSLENGTH;i++){
    arr1[i]=0;
    arr2[i]=0;
    arr3[i]=0;
    ...
} 
```

## 2）`memset`所有数组归零。

在最近的一次代码审查中，我被要求将选项 1 更改为选项 2。这让我想知道，这些方法中哪个更好？主要是：

2 是否被认为比 1 更具可读性？

这两种方法在效率方面如何比较？（考虑`memset`通常在汇编中实现，但方法 1 只为多个数组增加一次计数器）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-28T14:42:54.533

您的方法 1（`for`循环）对缓存不利。

因为`arr1`, `arr2`,`arr3`可能不在内存中彼此靠近，并且很可能不会一起在缓存中，您可能会经常出现缓存未命中，并且 CPU 将不得不不断地从内存中获取新的片段，只是为了将它们设置为零。

通过执行一组`memset`操作，您将立即从缓存中命中**ALL** of `arr1`，几乎可以肯定是完全来自缓存。然后，您将`arr2`非常快速地缓存和设置所有内容，等等。

那，并且因为`memset`可能有组装技巧和优化以使其更快，所以我*肯定*更喜欢选项 2 而不是选项 1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T14:43:47.903

我认为大多数程序员应该能够阅读 memset 并知道它在做什么，因此可读性应该不是问题。对于大多数现代编译器，您可能不会看到太大的性能差异，但我会使用 memset，因为这就是它的用途。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T15:11:06.677

您甚至可以使用 bzero 代替更具体的 memset

# java - MVC 验证数据

> ID：14071143
> 
> 赞同：0
> 
> 时间：2012-12-28T14:39:22.957
> 
> 标签：java, model-view-controller

我想在我的 Swing 新项目中使用 MVC。

但我有一些问题。

在我的`MainView`我有一个输入表单和一个提交按钮。当我点击提交时，我`MainController.setUrl(Value)`的被调用。然后我必须验证数据。我必须在哪里验证这些数据`MainController`？在我的`MainModel`？或者在我的`MainController`我称之为方法`MainModel.isValidUrl(Value)`？

如果数据错误，我想向用户显示一个对话框。那么如何在视图中调用一个方法来显示这个框呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T14:44:36.367

您应该在您的 中调用您`MainModel.isValid`的`MainController`，然后从那里显示一个对话框或保留表单（基于是否有效）。`MainModel`应该负责自己的验证。

当您`Controller`从您的 实例化您的时`View`，只需将 的实例传递`View`给您的`Controller`.

伪代码将是这样的：

```
...
// In your view 
private void initTabPane(){
    AbstractModel socialModel = new SocialModel();

    // Pass the View
    AbstractController socialController = new MainController(socialModel, this); 
    ...
}

// In your controller
private AbstractView view;

public MainController(AbstractModel model, AbstracView view) {   
     ...
     this.view = view;
}

public Validate() {
    if (!model.isValid) {
        view.showError();
    }
    else {
        // do your stuff with the valid model 
    }
} 
```

# ruby-on-rails - xhr.setRequestHeader('X-CSRF-Token',token ) 在开发中有效，但在生产中无效

> ID：14071145
> 
> 赞同：0
> 
> 时间：2012-12-28T14:39:29.590
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3, jquery

在我的 Rails 应用程序中，我有一个发出 ajax 请求的操作。当我发出这个 ajax 请求时，使用 xhr.setRequestHeader 设置 CSRF 令牌在开发中可以正常工作，但在生产（heroku）中却不行。什么可能是问题？或者我如何在萤火虫中调试这个？

这是我的ajax设置

```
 jQuery.ajaxSetup({ 
 'beforeSend': function(xhr, settings) {
  xhr.setRequestHeader("Accept", "application/json");
  var token=$('meta[name="csrf-token"]').attr('content');
  xhr.setRequestHeader('X-CSRF-Token',token );
  settings['dataType'] = "json";
  settings['contentType'] = "application/json";
  }
 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T18:51:29.087

最后我想通了，为了在生产中工作，我必须`session_store.rb`按如下方式配置生产域

```
 YourApp::Application.config.session_store :cookie_store, 
   {key: '_yourApp_session', domain: '.yourDomain.com'} 
```

# java - Eclipse BlackBerry 应用程序中未找到源错误

> ID：14071146
> 
> 赞同：0
> 
> 时间：2012-12-28T14:39:37.650
> 
> 标签：java, eclipse, mobile, blackberry, java-me

我是 BlackBerry 应用程序开发的新手。`HttpConnection`在`httpcon.getResponseCode()`方法中给出未找到源的错误时，我有一个愚蠢的错误。

拜托，有人能找出这个错误吗？

这是我的方法：

```
 net.rim.device.api.io.transport.ConnectionFactory cf = new   net.rim.device.api.io.transport.ConnectionFactory();
        httpConn = (HttpConnection) cf.getConnection(url).getConnection();

        httpConn.setRequestMethod(HttpConnection.POST);
        httpConn.setRequestProperty("User-Agent",
                "Profile/MIDP-2.0 Confirguration/CLDC-1.0");
        httpConn.setRequestProperty("Accept_Language", "en-US");
        httpConn.setRequestProperty("Content-Type",
                "application/x-www-form-urlencoded");

        httpConn.setRequestProperty("Content-Length",
                Integer.toString(postData.length));
        os = httpConn.openOutputStream();
        os.write(("LoginID=yahoo@sol.com&Password=yah123")
                .getBytes("UTF-8"));
        os.flush();
        os.close();
        try {
            responseCode = httpConn.getResponseCode();
        } catch (IOException ex1) {
            //check if it's eof, if yes retrieve code again
            if (-1 != ex1.getMessage().indexOf("EOF")) {
                try {
                    responseCode = httpConn.getResponseCode();
                } catch (IOException ex2) {
                    System.out.println(ex2.getMessage());
                    // handle exception
                }
            } else {
                System.out.println(ex1.getMessage());
                // handle exception
            }
        }
        int status = httpConn.getResponseCode();

        if (status == HttpConnection.HTTP_OK) {

            InputStream input = httpConn.openInputStream();

            byte[] bytes = IOUtilities.streamToBytes(input);

            StringBuffer raw = new StringBuffer(new String(bytes));
            raw.insert(0, "bytes received]\n");
            raw.insert(0, bytes.length);
            raw.insert(0, '[');

            url = raw.toString();

            input.close();
        } else {
            url = "response code = " + status;
        }
        httpConn.close();
    } catch (IOCancelledException e) {
        System.out.println(e.toString());
        return "";
    } catch (IOException e) {

        return "";
    }

    return "";
} 
```

**更新：**我不想进入`getResponseCode()`. Eclipse 在此时停止执行，并显示**Source Not Found**错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T10:39:54.843

> @Nate 是的，我们正在进入方法，只有我们得到运行时错误。当调用 Getresponsecode() 时显示错误

您的日食*错误*看起来像这样吗？

![在此处输入图像描述](../Images/c496f296c948352b88a1d25b37a102bc.png)

`getResponseCode()`是`HttpConnection`类中的一个方法。这是 RIM 的代码，不是你的。您通常不需要**进入**该代码。只需在调试时**越过那条线。**您唯一应该想看到的是该方法的*结果*，而不是内部发生的情况。

即使`net_rim_api.jar`包含在您的项目中，它也只会为您提供 RIM 类的二进制版本，包括`HttpConnection`. 它不提供该类的 Java**源代码。**为了**进入**一个方法，你也需要有源代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T06:44:29.607

我发现了我的错误。在调用`HttpConnection. getResponseCode()`该 URL 字符串时，我们必须添加 deviceside=true 然后只会调用 getresponsecode() 而不会引发任何 http 异常。

例如： `httpClient ht = new httpClient(); String str = ht.getHttpClientResponse("https://www.google.co.in;deviceside=true",post);`

注意：（来自@Nate 评论）我们并不总是希望`deviceside=true`在您的连接字符串中。这取决于您是在设备上运行还是在模拟器上运行，以及可用的网络类型。

# android - 这些稍微不同的状态可绘制对象的行为有何不同？

> ID：14071148
> 
> 赞同：8
> 
> 时间：2012-12-28T14:39:42.567
> 
> 标签：android, android-drawable, android-selector

**Q1）**查看`ListView`可绘制的原始状态，因为`listSelector`我们有这样的东西（我剥离了一些代码以简化示例）：

```
<selector>
    <item android:drawable="<TRANSPARENT>" android:state_window_focused="false"/>
    <item android:drawable="<DRAWABLE_1>" android:state_focused="true" android:state_pressed="true"/>
    <item android:drawable="<DRAWABLE_1>" android:state_focused="false" android:state_pressed="true"/>
    <item android:drawable="<DRAWABLE_2>" android:state_focused="true"/>
</selector> 
```

但我一直在我的应用程序上这样做：

```
<selector>
    <item android:drawable="<DRAWABLE_2>" android:state_pressed="false" android:state_focused="true"/>
    <item android:drawable="<DRAWABLE_1>" android:state_pressed="true"/>
    <item android:drawable="<TRANSPARENT>" />
</selector> 
```

这似乎产生了相同的结果，而且更简单。您是否注意到第一个比我自己的版本更好的情况？我只是想确保我没有遗漏一些重要的东西，因为我喜欢让我的代码尽可能短......

**Q2）**我看到许多状态drawables`<item android:drawable="<TRANSPARENT>" android:state_window_focused="false"/>`作为最重要的项目，但我不明白为什么需要它。总是让`state_window_focused`我有点困惑……真的有必要吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-30T07:52:08.730

尽管我不确定，但我不得不将其放入答案中，但这就是我的想法：

**我将从 Q2 开始：**

`state_window_focused`对应于默认行为（“窗口”可见，但未聚焦），我认为它仅用于指出默认行为（`TRANSPARENT`）。

**关于第一季度：**

`DRAWABLE2`在这两种情况下和相同的条件下都将被可视化 - 专注和不受压力，因为：

*第一种情况：*

```
<item android:drawable="<DRAWABLE_2>" android:state_focused="true"/> 
```

*第二种情况：*

```
`<item android:drawable="<DRAWABLE_2>" android:state_focused="true" android:state_pressed="false"/>` 
```

我们有 D2，虽然专注，但在你的情况下，也有没有压力。

`DRAWABLE1`只有在每种情况下按下时才可见。不同之处在于，在第一种情况下，也给出了两个额外的状态`android:state_focused="true/false"`，这没有任何意义，因此案例 1 中的两行可以缩小为一个（正是你拥有的那个）：

```
<item android:drawable="<DRAWABLE_1>"  android:state_pressed="true"/> 
```

所以，总结一下：

案例 1 - 你有：

```
<selector>
    <item android:drawable="<TRANSPARENT>" android:state_window_focused="false"/>
    <item android:drawable="<DRAWABLE_1>" android:state_focused="true" android:state_pressed="true"/>
    <item android:drawable="<DRAWABLE_1>" android:state_focused="false" android:state_pressed="true"/>
    <item android:drawable="<DRAWABLE_2>" android:state_focused="true"/>
</selector> 
```

这相当于：

```
<selector>
    <item android:drawable="<TRANSPARENT>" android:state_window_focused="false"/>
    <item android:drawable="<DRAWABLE_1>"  android:state_pressed="true"/>
    <item android:drawable="<DRAWABLE_2>"  android:state_focused="true"/>
</selector> 
```

和你的案例（案例2），进行比较：

```
<selector>
    <item android:drawable="<DRAWABLE_2>" android:state_pressed="false" android:state_focused="true"/>
    <item android:drawable="<DRAWABLE_1>" android:state_pressed="true"/>
    <item android:drawable="<TRANSPARENT>" />
</selector> 
```

**到目前为止我能看到的唯一区别是，在第一种情况下，`DRAWABLE2`只有在聚焦时才会显示（无论是否按下），但在你的情况下，它也必须是未按下的，这是唯一不同的条件.**

# web - 使用 Google 自定义搜索 API 时是否可以显示“相关搜索”

> ID：14071156
> 
> 赞同：5
> 
> 时间：2012-12-28T14:40:15.550
> 
> 标签：web, google-custom-search

我正在使用谷歌自定义搜索 API 在我的网站上显示谷歌搜索结果，但是，我想显示“相关搜索”，就像在普通谷歌搜索底部显示的那样。

这可能吗？如果是这样，你怎么做？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-13T01:18:28.047

我知道relatedQueries.enabled 可以以“get”格式使用，请参阅返回结果的示例，如下所示，全部来自此链接 [https://developers.google.com/shopping-search/v1/reference-content-module-related -查询](https://developers.google.com/shopping-search/v1/reference-content-module-related-queries)

```
GET https://www.googleapis.com/shopping/search/v1/public/products?country=US&q=shoes&relatedQueries.enabled=true&key=key

{
 "kind": "shopping#products",
 ...
 "relatedQueries": [
  "jordan shoes",
  "nike shoes",
  "dc shoes",
  "puma shoes"
 ]
 ...
 "items": [
  ...
 ]
} 
```

# javascript - 使用 JavaScript 初始化页面加载浏览器指示器/动画图标

> ID：14071170
> 
> 赞同：8
> 
> 时间：2012-12-28T14:41:14.567
> 
> 标签：javascript, browser

有没有一种简单的方法可以在不更改您所在页面的情况下启动和停止浏览器抖动（页面加载指示器）？最好没有外部库或 AJAX 调用。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-28T15:03:32.147

不，您可以尝试通过执行 ajax 调用或其他方式来强制它旋转，但不要这样做。浏览器的那部分不是给你的，它是给浏览器的！

这有点像询问您是否可以更改系统时钟，以便您的包含时间机器的游戏更加逼真。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-25T03:10:12.103

您可以调用一个简单的服务器端脚本，我们称之为“sleep.cgi”，它会停止执行（睡眠）并延迟在隐藏的 iframe 中交付一些简单的自动重新加载页面。这应该使几乎所有主要浏览器都显示您所谓的“浏览器抖动”（页面加载指示器）。一旦完成了希望显示 throbber 的任何原因，您只需将提到的 iframe 位置重置为空字符串。这就是我的做法：

1) 编写一个简单的服务器端脚本，接收请求并暂停执行长达 30 秒，不想碰到浏览器的页面加载超时墙。休眠期结束后，此服务器脚本会响应以下内容：

```
<html><body onload="location.reload();"></body></html> 
```

强制它循环，直到您希望浏览器显示“页面加载”指示器。

2) 编写支持的 JavaScript 函数，这些函数将根据请求启动和停止 'throbber' 并添加我们将使用的 HTML 元素：

```
<script>
  function startThrobber(){
    document.getElementById('throbberFrame').src='sleep.cgi?'+Math.random();
  }
  function endThrobber(){
    document.getElementById('throbberFrame').src='';
  } 
</script>

<div id="throbberWrapper" style="display:none;visibility:hidden;">
  <iframe id="throbberFrame" style="width:1px;height:1px;"></iframe>
</div> 
```

我在 Chrome/IE/Opera/Firefox 中做了一个快速测试，它似乎工作正常。不过，我从来没有必要做这样的事情。

编辑：如果您的网络服务器支持 PHP 脚本，这里是睡眠函数参考： http: [//php.net/manual/en/function.sleep.php](http://php.net/manual/en/function.sleep.php)我不是用 PHP 编写的，但我相信您的 PHP 文档应该看起来不错的行：

```
<html><body onload="location.reload();">
<?php
  // sleep for 29 seconds
  sleep(29);
?>
</body></html> 
```

干杯!

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T09:32:09.970

> 如果加载了占用大量 CPU 资源的内容，则 UI 会冻结，因此您永远不会看到动画 GIF 或进度条。

你有一个 XY 问题。您可以通过使用 setTimeout 将 CPU 密集型操作分成更小的块来防止浏览器冻结。浏览器 throbber 是一个 UI 元素，表示正在从网络加载某些内容；如果您出于任何其他原因使用它，那将非常令人困惑。

# c# - 如何将这个旧的 XNA 代码翻译成 XNA 4.0 代码？

> ID：14071173
> 
> 赞同：1
> 
> 时间：2012-12-28T14:41:36.187
> 
> 标签：c#, xna, xna-4.0, xna-3.0

这个旧代码在 XNA 4.0 中不起作用。必须更改什么才能使代码在 XNA 4.0 中工作？

```
spriteBatch.Begin(SpriteBlendMode.AlphaBlend,SpriteSortMode.Immediate,SaveStateMode.None,Matrix.Identity);
  graphics.GraphicsDevice.SamplerStates[0].MagFilter = TextureFilter.Point;
  graphics.GraphicsDevice.SamplerStates[0].MinFilter = TextureFilter.Point;
  graphics.GraphicsDevice.SamplerStates[0].MipFilter = TextureFilter.Point;
spriteBatch.End(); 
```

我收到以下错误消息：

> 当前上下文中不存在“SpriteBlendMode”
> 当前上下文中不存在“SaveStateMode”“Microsoft.Xna.Framework.Graphics.SamplerState”不包含“MagFilter”的定义，并且没有接受“Microsoft.Xna.Framework”类型的第一个参数的扩展方法“MagFilter”。可以找到 Graphics.SamplerState（您是否缺少 using 指令或程序集引用？）“Microsoft.Xna.Framework.Graphics.SamplerState”不包含“MinFilter”的定义，并且没有扩展方法“MinFilter”接受第一个可以找到“Microsoft.Xna.Framework.Graphics.SamplerState”类型的参数（您是否缺少 using 指令或程序集引用？）“Microsoft.Xna.Framework.Graphics.SamplerState”不包含“MipFilter”的定义并且找不到接受“Microsoft.Xna.Framework.Graphics.SamplerState”类型的第一个参数的扩展方法“MipFilter”（您是否缺少 using 指令或程序集引用？）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T15:34:45.393

以下资源将向您展示如何解决这些问题：

[http://www.nelxon.com/blog/xna-3-1-to-xna-4-0-cheatsheet/](http://www.nelxon.com/blog/xna-3-1-to-xna-4-0-cheatsheet/)

这些都是与将旧 XNA 代码升级到 4.0 相关的非常常见的问题

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-23T02:37:52.260

在使用 XNA 框架 4.0 版本更新您的代码时，您需要注意以下几点：

*   SpriteBatch.Begin 语法略有不同
*   SamplerState.Mag、.Mip 和 .Min 属性都已[合并到 .Filter 属性中](http://blogs.msdn.com/b/shawnhar/archive/2010/04/02/state-objects-in-xna-game-studio-4-0.aspx)
*   SpriteBlendMode 现在[替换为 BlendState 对象](http://blogs.msdn.com/b/shawnhar/archive/2010/06/18/spritebatch-and-renderstates-in-xna-game-studio-4-0.aspx)

另外，还有一件事（在我更新代码时引起了我的注意）：似乎在 XNA 框架的 3.1 和 4.0 版本之间发生了一些变化，这将使 SamplerStates 集合和 SamplerState 对象在图形设备被初始化。我发现创建自己的 SamplerState 对象（并修改那里的属性）有效：

```
SamplerState sState = new SamplerState();
sState.Filter = TextureFilter.Point;
BaseGame.Device.SamplerStates[0] = sState; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T20:33:29.410

```
spriteBatch.Begin(SpriteSortMode.Immediate, BlendState.AlphaBlend, null, null, null, null, Matrix);
spriteBatch.End(); 
```

在 XNA 4.0 中，您无法在不重新启动图形设备的情况下更改采样器状态，因此在您的游戏 Initialize() 方法中，您需要添加 `graphics.GraphicsDevice.SamplerStates[0].Filter = TextureFilter.Point;`

据我所知，这应该是您正在寻找的！

# javascript - 验证文本字段的前 2 个字符

> ID：14071178
> 
> 赞同：1
> 
> 时间：2012-12-28T14:41:47.627
> 
> 标签：javascript, jquery, html, jquery-mobile

我有一个文本框，用户需要输入他/她的手机号码。但是，我需要验证前 2 个数字（字符）以确保手机号码的格式正确（作为验证规则之一）。

手机号码需要以以下 2 位数字中的任何一个开头：

44xxxxxx 55xxxxxx 65xxxxxx 78xxxxxx

谁能告诉我如何验证前两个字符编号并检查它们是否是上述选项之一？

**编辑** 这是我尝试过的，但没有奏效：

HTML

```
<input id="mob" name="mob" type="tel" placeholder="Enter your mobile number">
<a href="#" id="validate">Validate</a> 
```

​ JS

```
var mobile_prefix = $('#mob').subsubstr(0,2);
$('#validate').click(function(){
if (mobile_prefix == 44||55||65||78) {
alert('correct');
}
else {
    alert('incorrect');
}
}); 
```

​</p>

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-28T14:50:22.097

我认为[.match()](http://www.w3schools.com/jsref/jsref_match.asp)有你想要的。只是复习一些[正则表达式](http://www.w3schools.com/jsref/jsref_obj_regexp.asp)。

```
if (StringFromSelectField.match(/^(44|55|65|78)/)) {
    //do something
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T14:47:18.507

`substring`从 javascript使用

```
var FirstTwoLetters = TextFromYourInput.substring(0,2); 
```

然后您可以将前两个字母与您的模式进行比较。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-28T14:53:27.100

使用正则表达式可能是最简单的：

```
({phone number}).match(/^(44|55|65|78).*$/) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T15:55:58.013

因此，输入字段的第一个变量；我的方式；）首先检查该输入是否不为空并且具有 3 个或更多符号。最后是变量，我最后使用它来允许 form.submit()。如果您愿意，可以在每次获取 val() 之前添加`$.trim(postcode.val()) != ''`

```
var postcode = $('#post_code');
        if(postcode.val() != '' && postcode.val().length > 2){
            var shortPostCode = postcode.val().substring(0,2);
            var validPostCode = /^(EH|KY)/;
            if(!shortPostCode.match(validPostCode)){
                postcode.after('<span class="error">Post code must start with EH</span>');
                dataValid = false;
            }
        } 
```

# c# - 从 ajax 调用中获取查询字符串

> ID：14071182
> 
> 赞同：0
> 
> 时间：2012-12-28T14:42:02.387
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3

嗨，我正在尝试从 ajax 调用中获取查询字符串，但它似乎效果不佳。这是我的代码：

```
@Ajax.ActionLink("Add To Cart" ,
                             "AddToCart" ,
                             "Products", 
                             new {
                                    ProductId = @products.ElementAt(0).Value
                                 },
                             new AjaxOptions{
                                               Url = "/Products/AddToCart",
                                               InsertionMode = InsertionMode.Replace,
                                               UpdateTargetId = "UpdateCart",
                                               HttpMethod = "GET"
                                            }) 
```

我的应用程序中的每个链接都调用如下内容：

```
Products/AddToCart?ProductId=5 
```

这是它调用的控制器：

```
public ActionResult AddToCart(string ProductId)
    {
            string ProductCeva = ProductId;
    } 
```

现在，根据我迄今为止对 MVC3 的了解，我假设在我们的例子中参数 ProductId 将是 5，但是当我调试代码时，我得到它是空的。

我在这里做错了什么，如何在这种情况下获取 ProductId 查询字符串？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T14:52:45.090

从`Url = "/Products/AddToCart",`您的`AjaxOptions`.

为什么？

这就是为什么。以下代码：

```
@Ajax.ActionLink(
    "Add To Cart" ,
    "AddToCart" ,
    "Products", 
    new {
        ProductId = @products.ElementAt(0).Value
    },
    new AjaxOptions {
        Url = "/Products/AddToCart",
        InsertionMode = InsertionMode.Replace,
        UpdateTargetId = "UpdateCart",
        HttpMethod = "GET"
    }
) 
```

生成：

```
<a data-ajax="true" data-ajax-method="GET" data-ajax-mode="replace" data-ajax-update="#UpdateCart" data-ajax-url="/Products/AddToCart" href="/Products/AddToCart?ProductId=5">Add To Cart</a> 
```

现在，即使`href`生成的锚点是正确的 ( `/Products/AddToCart?ProductId=5`)，这也不是用于 AJAX 请求的。在发送 AJAX 请求而不是属性时`jquery.unobtrusive-ajax.js`，您正在使用并且不显眼地 AJAX 化所有锚的 使用`data-ajax-url`属性（如果存在）`href`。现在看看`data-ajax-url`属性的值，你就会明白为什么在你的控制器动作中得到 null 了。

如果您使用过 FireBug 或类似的 javascript 调试工具，您也会看到这一点，因为当您检查“网络”选项卡以查看为什么您的 AJAX 请求不起作用时，您会看到使用了错误的 url。

长话短说，从这个问题中要记住两件事（第一件事更重要，因为它可以让你推断出第二件事）：

1.  使用萤火虫
2.  的`Url`属性`AjaxOptions`允许您在发送 AJAX 请求时覆盖要使用的 url。

# java - httpsession验证是否存在

> ID：14071194
> 
> 赞同：1
> 
> 时间：2012-12-28T14:43:13.417
> 
> 标签：java, jsp, servlets

**我是新来的**强文本，需要一种适当的方法来验证。**我跟着**

 **5行代码。它没有 httpsession 但仍会去约会.jsp。为什么这样？我跟着[如何检查会话是否存在？](https://stackoverflow.com/questions/2818251/how-to-check-if-session-exists-or-not)

它正在举行会议。org.apache.catalina.session.StandardSessionFacade@3b59e880 但用户未登录...

确实如此。但我不知道为什么以及如何得到一个？

```
if (request.getSession(false) == null) {
    request.getServletContext().getRequestDispatcher("/login.jsp").forward(request, response);
} else if (request.getSession(false) != null) {
    request.getServletContext().getRequestDispatcher("/appointment.jsp").forward(request, response);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T14:46:23.593

用户登录后不会创建会话，它是在浏览器对容器的第一次请求时创建的。这使容器能够跟踪来自同一浏览器的后续请求。这通常使用具有唯一 ID（会话 ID）的 cookie 来实现。

所以即使它取决于用户注销时发生的事情？你在调用 session.invalidate() 吗？我们不能仅仅因为会话对象不为空就说用户已通过身份验证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T14:52:56.470

总会有一个 HttpSession 对象（好吧，并非总是如此，但大多数时候） - 这不是经过身份验证的用户的指标。

您需要设置会话属性，例如。“已验证”将此会话标记为已验证或未验证。

您可以通过调用 request.getSession().setAttribute(...) 添加它

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T14:57:59.487

默认情况下，JSP 将创建一个会话。您可能不希望您的登录页面出现这种行为，因此请使用以下页面指令`login.jsp`：

```
<%@ page session="false" %> 
```

您还需要确保在成功登录之前访问的任何其他 JSP 不会创建会话。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-28T18:59:31.390

```
if (request.getSession(false).getAttribute("userLoggedIn") != null ) {
    if((Boolean)request.getSession(false).getAttribute("userLoggedIn") ) {
        request.getServletContext().getRequestDispatcher("/appointment.jsp").forward(request, response);
    }
} else {
    request.getServletContext().getRequestDispatcher("/login.jsp").forward(request, response);
} 
```**

# paypal - 每张信用卡的 paypal payer_id 是唯一的吗？

> ID：14071195
> 
> 赞同：3
> 
> 时间：2012-12-28T14:43:13.847
> 
> 标签：paypal

我想知道使用同一张信用卡进行两次单独付款的 paypal payer_id 是否相同。这对于检测可能的欺诈交易显然很有用。

请注意，对于贝宝帐户（即用户使用电子邮件登录，而不是“随时随地”付款，我假设 payer_id 始终相同，即使用户更改电子邮件等）。我的具体问题是关于信用卡付款的。

我将使用 Express Checkout api。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T19:36:43.077

我进行了一些测试，根据沙盒，PayPal 系统确实为“客人结帐”系统中使用的每张信用卡创建了一个唯一的付款人 ID。

我第一次使用带有特定万事达卡的 Guest Checkout 进行了 Express Checkout。在检查 GetExpressCheckoutDetails 后，我确实看到我得到了一个付款人 ID，在这种情况下，它给了我 DKG3GNSK44HV2。

然后我用一张单独的 Visa 卡做了同样的事情，它给了我一个付款人 ID QXQGEYLFMBNY8。

然后我用原来的万事达卡再次做了同样的事情，我得到了与第一次相同的 DKG3GNSK44HV2 付款人 ID。

最后，我再次尝试了 Visa，并获得了与我第一次使用它时相同的付款人 ID QXQGEYLFMBNY8。

基于这些测试，我会说 PayPal 确实为其系统中使用的任何信用卡生成了唯一的付款人 ID。

这是有道理的，因为在他们实际强制您创建帐户之前，他们对您可以通过 Guest Checkout 使用任何给定信用卡花费多少钱有限制，如果那样的话，他们也不会让您在 Guest Checkout 中使用信用卡卡已添加到现有的 PayPal 帐户。

# lisp - LISP - 全局变量在重新初始化后保持其旧值

> ID：14071198
> 
> 赞同：1
> 
> 时间：2012-12-28T14:43:23.963
> 
> 标签：lisp, global-variables

我正在为我的学习创建一个带有 Common Lisp 的专家系统。有一个全局变量：*BF* -> 事实库。

我这样初始化：

```
(defvar *BF* NIL) 
```

我的“主函数”调用函数“初始化”，它用大数据设置全局变量。

```
(defun initialize ()
(setf *BF* 
    '(
        (metric (
            (CPU-utilization NIL)
            (RPI NIL)
            (ART NIL)
            (concurent-invocation NIL)
            (stall-count NIL)
            (GC-bytes-in-use NIL)
            (available-thread NIL)
            (available-connection NIL)
            (instance-count NIL)
        ))
        (problem (
            (livelock T)
            (memory-leaks T)
            (code-inefficient T)
            (overload T)
            (under-allocation T)
            (internal-chokepoint T)
            (thread-leaks T)
            (blocking-deadlock T)
            (unending-retries T)
            (overuse-external-system T)
            (pig-in-a-python T)
            (too-many-layers T)
            (backend-bottleneck T)
            (frequent-GC-resource-leaks T)
            (slow-backend T)
            (suddenly-slow-backend T)
            (nonblocking-deadlock T)
            (thread-leaks T)
        )) 
        (category ( 
            (sudden T) 
            (consistent T) 
            (periodic T) 
            (progressive T) 
        ))
    )
)
) 
```

在第一次使用此功能时，当我打印*BF*时，没关系。然后我调用一个修改*BF*的函数：

```
(defun apply-rule (type name value)
    ; Get conclusion list for this rule
    (let ((conclusion (get-conclusion name value)))
        (if (null conclusion)
            (if (not (equal 3 value))
                (return-from appliquer-regle NIL)
                (return-from appliquer-regle 'T)
            )
        )
        ; Iterate on all problems in *BF*
        (dolist (e (cadr (assoc 'problem *BF*)))
            ; If the problem is not in conclusion list, set it value to false 
            (if (and (member (car e) conclusion) (equal (cadr e) 'T))
                ()
                (setf (cadr e) NIL)
            )
        )
        (return-from apply-rule 'T)
    )
    (return-from apply-rule NIL)    
) 
```

这个功能起作用。但是当我想再次使用“初始化”功能时，它就不起作用了。当我打印*BF*时，它包含旧值...如何重新初始化我的全局变量？

对不起我的英语，我是法国人^

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T14:57:15.227

您正在修改文字数据。最好避免它，因为它的效果在可移植代码中是未定义的。想象一个通过共享文字列表来节省空间的编译器。

确保您的变量`*BF*`具有新分配的数据。每次初始化变量时，使用[COPY-TREE复制列表。](http://www.lispworks.com/documentation/HyperSpec/Body/f_cp_tre.htm)

# javascript - 来自 Json 文件的主干集合并缓存在 localstorage 上

> ID：14071203
> 
> 赞同：4
> 
> 时间：2012-12-28T14:43:38.377
> 
> 标签：javascript, json, jquery-mobile, backbone.js, requirejs

我在主干库中相对较新。我正在尝试构建一个基于骨干网 + requirejs + jquery-mobile 的移动应用程序。我可以用现有的 json 本地文件填充我的集合。（将来可能来自远程服务器）。现在我试图让这个集合只被调用一次，然后将它存储在 localStorage 中以供读取。为此，我正在尝试使用此适配器（[https://github.com/jeromegn/Backbone.localStorage](https://github.com/jeromegn/Backbone.localStorage)），但我不明白如何。

## 示例代码

```
// models
define([
  'underscore',
  'backbone'
], function(_, Backbone) {
  var AzModel = Backbone.Model.extend({
    defaults: {
      item: '',
      img:"img/gi.jpg"
    },
    initialize: function(){
    }
  });
  return AzModel;
});

// Collection
define(['jquery', 'underscore', 'backbone', 'models/az'], function($, _, Backbone, AzModel) {
    var AzCollection = Backbone.Collection.extend({
     localStorage: new Backbone.LocalStorage("AzStore"), // Unique name within your app.       
    url : "json/azlist.json",
    model : AzModel
    parse : function(response) {
         return response;
    }
});

return AzCollection;
});

define(['jquery', 'underscore', 'backbone', 'collections/azlist', 'text!templates/karate/az.html'], function($, _, Backbone, AzList, AzViewTemplate) {
    var AzView = Backbone.View.extend({
        id:"az",
        initialize: function() {
            this.collection = new AzList(); 
            var self = this;
            this.collection.fetch().done(function() {
                //alert("done")
                self.render();
            }); 

        },
        render : function() {
            var data = this.collection;
            if (data.length == 0) {
                // Show's the jQuery Mobile loading icon
                $.mobile.loading("show");
            } else {
                 $.mobile.loading("hide");
                console.log(data.toJSON());
                  this.$el.html(_.template(AzViewTemplate, {data:data.toJSON()}));
                  // create jqueryui
                 $(document).trigger("create");
            }
            return this;
        }
    });
    return AzView;
}); 
```

有人可以给我指路吗。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T15:04:45.760

Backbone 本地存储适配器覆盖了集合`Collection.sync`时使用的函数`fetch`或集合中`save`的模型。如果您设置该`Collection.localStorage`属性，它会将调用重定向到本地存储而不是服务器。这意味着您可以拥有或——读取和写入本地存储或服务器——但不能同时拥有两者。

这给你留下了两个选择：

1.  执行 initial `fetch`，它从服务器填充数据，然后才设置 localStorage 属性：

    ```
    var self = this;

    self.collection.fetch().done(function() {
        self.collection.localStorage = new Backbone.LocalStorage("AzStore");
        self.render();
    }); 
    ```

2.  `Collection.localStorage`像现在一样设置属性，并使用 手动获取初始数据集`Backbone.ajaxSync`，这是`Backbone.sync`本地存储适配器提供的别名：

    ```
    Backbone.ajaxSync('read', self.collection).done(function() {
        self.render();
    } 
    ```

后一个选项可能更可取，因为它不会阻止您稍后在需要时从服务器加载数据。

您可以非常巧妙地将功能包装为集合中的方法：

```
var AzCollection = Backbone.Collection.extend({
    localStorage: new Backbone.LocalStorage('AzStore'),
    refreshFromServer: function() {
        return Backbone.ajaxSync('read', this);    
    }    
}); 
```

当您想从服务器加载数据时，您可以调用该方法：

```
collection.refreshFromServer().done(function() { ... }); 
```

当你想使用本地存储时，你可以使用 native `fetch`：

```
collection.fetch().done(function() { ... }); 
```

**编辑**以纠正示例代码中的错误，以造福于路过的 googlers。

# c# - GOTO 是退出双 Foreach 的唯一方法吗？

> ID：14071205
> 
> 赞同：1
> 
> 时间：2012-12-28T14:43:45.677
> 
> 标签：c#, .net, vb.net, goto

> **可能重复：**
> [打破/退出嵌套在 vb.net](https://stackoverflow.com/questions/5312291/breaking-exit-nested-for-in-vb-net)

是`GOTO`从双 ForEach 退出的唯一方法吗？

```
For Each city in cities
  For Each person in city.People
    If IsOK(person) GOTO Found_
  Next person
Next city

Found_: 
' ... 
```

问题是针对 VB.NET，但也想知道 C#...

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-28T14:48:31.737

把它放在单独的函数中

```
 Private Function FindPerson(cities As List(of City)) As Person
     For Each city in cities
        For Each person in city.People
           If IsOK(person) Return person
        Next person
     Next city
     Return Nothing
  End Function 
```

和...

```
 Private Function ContainsPerson(cities As List(of City)) As Bool  
     For Each city in cities
        For Each person in city.People
           If IsOK(person) Return True
        Next person
     Next city
     Return False
  End Function 
```

**编辑：**固定 VB 语法

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-28T15:06:52.173

为什么不只使用 LINQ？

C＃：

```
// Or use SingleOrDefault(...) if there can ever only be one.
var person = Cities.SelectMany(city => city.People)
                   .FirstOrDefault(person => IsOK(person));

if (person != null)
{
    ...
} 
```

VB.Net（我最好的尝试，我没有那么详细）：

```
// Or use SingleOrDefault(...) if there can ever only be one.
Dim person = Cities.SelectMany(Function(city) city.People)
                   .FirstOrDefault(Function(person) IsOK(person));

If person Not Nothing Then
    ...
End If 
```

* * *

如果您要做的只是查看是否有任何`IsOK(person)`，请改用`Any(...)`扩展方法：

C＃：

```
var isOK = Cities.SelectMany(city => city.People)
                 .Any(person => IsOK(person)); 
```

VB.Net（我最好的尝试，我没有那么详细）：

```
Dim isOK = Cities.SelectMany(Function(city) city.People)
                 .Any(Function(person) IsOK(person)); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-28T15:06:19.630

正如 Heinzi 在[这个问题](https://stackoverflow.com/questions/5312291/breaking-exit-nested-for-in-vb-net)中回答的那样：

不幸的是，没有`exit two levels of for`声明，但是有一些解决方法可以避免`Goto`，这被[认为是不好的做法](http://en.wikipedia.org/wiki/Go_To_Statement_Considered_Harmful)：

*   **假外块**

    ```
    Do
        For Each item In itemList
            For Each item1 In itemList1
                If item1.Text = "bla bla bla" Then
                    Exit Do
                End If
            Next
        Next
    Loop While False 
    ```

    或者

    ```
    Try
        For Each item In itemlist
            For Each item1 In itemlist1
                If item1 = "bla bla bla" Then
                    Exit Try
                End If
            Next
        Next
    Finally
    End Try 
    ```

*   **单独的函数**：将循环放在一个单独的函数中，可以用 退出`return`。不过，这可能需要您传递大量参数，具体取决于您在循环中使用了多少局部变量。另一种方法是将块放入多行 lambda，因为这将在局部变量上创建一个闭包。

*   **布尔变量**：这可能会使您的代码的可读性降低，具体取决于您拥有多少层嵌套循环：

    ```
    Dim done = False

    For Each item In itemList
        For Each item1 In itemList1
            If item1.Text = "bla bla bla" Then
                done = True
                Exit For
            End If
        Next
        If done Then Exit For
    Next 
    ```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-28T14:46:53.887

您可以在第一个循环中放置一个 bool 并在内部循环中将其设置为 false 然后中断。如果布尔为假，则在外循环中中断。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-28T14:47:20.613

你也可以抛出异常：

```
Try
  For Each city in cities
    For Each person in city.People
      If IsOK(person) Throw New FoundException
    Next person
  Next city
Catch ex As FoundException
  DoFoundStuff
End Try 
```

**警告：**我的意思只是表明异常是退出多个嵌套循环的一个选项，而不是在此代码示例的特定情况下合适。特别是，异常通常应限于“异常/错误”条件而不是“正常”条件。例如，如果您只是将“If”更改为“If **Not** IsOK ....”，则例外可能是正确的解决方案。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-28T14:50:18.463

添加一个布尔值并将其设置为真，当找到该人并从内部循环中断时。然后检查发现是否为真。如果是这样，则从外部循环中中断。

```
bool found;
For Each city in cities
    For Each person in city.People
        If IsOK(person) 
            found = true
            Exit For
        End If
    Next person
    If (found) 
        Exit For
    End If
 Next city 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-28T14:56:34.433

写 vb.net 已经很长时间了，但以下应该可以工作（我认为）

```
 Dim found As Boolean
    For Each city In cities
        If found = True Then
            Exit For
        End If
        For Each person In city.People

            If IsOK(person) Then
                found = True
                Exit For
            End If
        Next person
    Next city 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-28T16:47:09.760

In addition to 888's answer: An extra function does not necessarily need params to be passed:

```
Dim a, b, c As Integer
    a = 100
    b = 50
    c = 20

    Dim r = Function()
                For i = 1 To a
                    For j = 1 To b
                        For k = 1 To c
                            If i * j * k = 150 Then Return 1
                        Next
                    Next
                Next
                Return 2
            End Function

    Console.WriteLine(r) 
```

**Keyword:** closure

# javascript - jquery克隆输入没有看到值的变化

> ID：14071209
> 
> 赞同：4
> 
> 时间：2012-12-28T14:44:10.610
> 
> 标签：javascript, jquery, jquery-ui

我有一个带有隐藏输入的表单。

我 .clone() 它们并在 .dialog() 中将它们显示给用户。

用户进行了一些更改，我使用 .val() 更改隐藏字段。

但是，下次我克隆表单（不重新加载页面）时，我再次获得了初始值，而不是更新的值。

似乎有这个奇怪的错误/结果？请参阅[http://jsfiddle.net/YvBfP/](http://jsfiddle.net/YvBfP/) （也因可见输入而中断）

```
$(this).closest('td').find('button').click( function ()
{
    var d = $('#pagamento_anticipato').html();

    $(d).dialog({
        modal: true,
        width: 400,
        height: 300,
        close: function( event, ui ) {
                var importo = $(this).find('input[type="text"]').val();
                var descrizione = $(this).find('textarea').val();
                var select = $(this).find('select').val();
                $(this).remove();

                $('#pagamento_anticipato').find('input[id="importo"]').val( importo );
                $('#pagamento_anticipato').find('#descrizione').val( descrizione );
                $('#pagamento_anticipato').find('#tipo').find('option[value="' + select + '"]').attr('selected', true);

            }
    });
    return false;
}); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-28T14:51:45.027

使用[.val()](http://api.jquery.com/val/)设置/获取当前值，而不是元素的属性。

```
$(element).val(value) // sets current value
$(element).val() // <-- will always return the current value 
```

要更改您必须使用的属性[.attr()](http://api.jquery.com/attr/)

```
$(element).attr('value',value) 
```

然后你会看到 HTML 的变化

[http://jsfiddle.net/wirey00/bJjjw/](http://jsfiddle.net/wirey00/bJjjw/)

**编辑：**

刚刚发现这不适用于 jQuery 1.5.x 及更低版本.. 使用 jQuery 1.6.0+ 对其进行了测试并且效果很好

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-28T14:54:27.753

您正在设置输入的 value 属性，但检查 value 属性是否已更改。要查看元素值`.val()`，请不要检查其 html。但是，如果您需要更改元素值属性，请使用[`setAttribute`](https://developer.mozilla.org/en-US/docs/DOM/element.setAttribute)

```
$('#money')[0].setAttribute('value', 3000); 
```

[http://jsfiddle.net/YvBfP/4/](http://jsfiddle.net/YvBfP/4/)

# r - 如何为 ggplot2 图形提供超链接？

> ID：14071210
> 
> 赞同：8
> 
> 时间：2012-12-28T14:44:17.953
> 
> 标签：r, svg, ggplot2

我正在尝试提供带有超链接的 ggplot2 图：

这有效：

```
library(gridSVG)
library(lattice)

xyplot(mpg~wt, data=mtcars, main = "Link to R-project home")
mainGrobName <- grep("main", grid.ls()[[1]], value=TRUE)
grid.hyperlink(mainGrobName, "http://www.r-project.org")
gridToSVG("HyperlinkExample.svg") 
```

这不是：

```
p = ggplot(mtcars, aes(wt, mpg)) + geom_point()+ labs(title="link")
print(p)
mainGrobName <- grep("title", grid.ls()[[1]], value=TRUE)
grid.hyperlink(mainGrobName, "http://www.r-project.org")
gridToSVG("HyperlinkExample.svg") 
```

对此有任何提示吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T09:20:11.487

我问过 gridSVG 包的作者之一 Simon Potter：这是他的（工作）答案：

我建议你在这里尝试开发版本：

[http://r-forge.r-project.org/R/?group_id=1025](http://r-forge.r-project.org/R/?group_id=1025)

它包含一个专门用于处理 gTables（以及因此 ggplot2 图形）的解决方法。

因此，要尝试让您的示例正常工作，请启动一个新的 R 会话并运行以下代码：

```
install.packages("gridSVG", repos="http://R-Forge.R-project.org")
library(gridSVG)
library(ggplot2)
(p <- ggplot(mtcars, aes(wt, mpg)) + geom_point() + labs(title="link"))
titleGrobName <- grep("title", grid.ls(print=FALSE)$name, value=TRUE)
grid.hyperlink(titleGrobName, "http://www.r-project.org/")
gridToSVG("HyperlinkExample.svg", "none", "none") 
```

这里唯一真正的区别是给 gridToSVG() 的附加参数。这主要是为了将输出减少到仅 SVG 文件和 HTML 包装器（否则您还会得到一些 JSON 数据，这对您的示例没有用处）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T03:15:18.907

就获得正确的代码而言`mainGrobName`，此代码将成功（并且不会通过设置来产生分散注意力的副作用`print=FALSE`）：

```
grep("title", grid.ls(print=FALSE)$name, value=TRUE)
#[1] "title.2-4-2-4" 
```

plot 对象的结构显然比 lattice 的情况更复杂，gridToSVG 默认不捕获它：

```
grep("title", grid.ls()$name, value=TRUE)
#--------------------
GRID.gTableParent.125
  background.1-5-6-1
  spacer.4-3-4-3
  panel.3-4-3-4
    grill.gTree.103
      panel.background.rect.94
      panel.grid.minor.y.polyline.96
      panel.grid.minor.x.polyline.98
      panel.grid.major.y.polyline.100
      panel.grid.major.x.polyline.102
    geom_point.points.90
    panel.border.zeroGrob.91
  axis-l.3-3-3-3
    axis.line.y.zeroGrob.113
    axis
  axis-b.4-4-4-4
    axis.line.x.zeroGrob.107
    axis
  xlab.5-4-5-4
  ylab.3-2-3-2
  title.2-4-2-4 
```

这也是一个有趣的输出，但我看不到如何让 gridToSVG 将其转换为有用的 HTML 对象：

```
grid.ls( print=pathListing )$name 
```

# facebook - Facebook Like 按钮未在 Firefox 和 IE 中显示

> ID：14071213
> 
> 赞同：0
> 
> 时间：2012-12-28T14:44:38.660
> 
> 标签：facebook, internet-explorer, firefox, facebook-like

我有奇怪的问题。我正在尝试在我的网站上添加 Facebook Like 按钮，但它没有出现在 Internet Explorer 和 Firefox 中。是的，我已经添加了这个：

```
<html xmlns:fb="http://ogp.me/ns/fb#"> 
```

和 FB-Root 和 JS SDK。每当我尝试添加 XFBML 或 HTML5 版本时，它总是不会出现在 IE 和 Firefox 中。在 Chrome 和 Safari 中它运行良好。

`div`但是，当我在鼠标悬停时将光标留在显示的包含类似 FB 的框的按钮上时，它将正确显示。此外，当我将这个赞按钮放在我网站上的任何其他位置时，它会显示出来。

这是代码：

```
<li id="menu-item-21" class="ikonka menu-item menu-item-type-custom menu-item-object-custom menu-item-21">
<a href="#"><span class="fb ikoneczka"></span> 
<div class="box_pop">
<p>Text</p><hr/>
<div class="fb-like" data-href="http://facebook.com/facebook" data-send="false" data-layout="button_count" data-width="150" data-show-faces="false"></div>  
</div>
</a>
</li> 
```

看起来 Firefox 和 IE 正在加载页面开始时呈现此框。但是，他们为他们留下了空间。有点奇怪。

我希望你能帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T14:10:56.817

好的，所以我找到了解决这个问题的方法。

首先，我已经清除了我的 css 文件中的所有 z-index 并设置`z-index: 8;`为`.box_pop`.

其次，设置`.ikonka div`为一无所有（你不能把它放在 css 中）`display: none;`。`.ikonka:hover div`

第三，我设置了一些 jQuery：

```
 <script>
 $(document).ready(function() {
 $('#your-li-id').hover(function() {
 $(this).addClass('pretty-hover');
 }, function() {
 $(this).removeClass('pretty-hover');
 });

 });
 </script> 
```

注意：`#your-li-id`您必须将`li`元素的 id 放在哪里。该脚本会将`pretty-hover`类添加到您的`li`. 然后，在 CSS 中，输入：

```
.pretty-hover div{
    display: block;
} 
```

它现在应该可以工作了。

正如你所看到的，你**不能**设置`display: none;`到你的 CSS 中，然后 - 也通过 CSS - 只需`display: block;`在悬停时添加。

如果你这样做，iFrame 将不会在 IE 甚至 FF 中可见。你必须用 jQuery 来做这个技巧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-22T10:01:33.910

我只在 Firefox (v.29.0.1) 上遇到了同样的问题，结果是 AdBlock plus (v.2.6) 阻止了“喜欢”和“分享”按钮的渲染。

# jquery - 用于水平图像滑动的 jquery 插件，带有可由用户移动的滑块

> ID：14071216
> 
> 赞同：0
> 
> 时间：2012-12-28T14:44:58.120
> 
> 标签：jquery, slider

![滑块要求](../Images/84be59fe4d426b4da384ada36ea9b200.png)

大家好，我有一个滑块元素，如图所示。当我滑动滑块时，（1）图像轮播应该以圆形方式旋转（2）滑块离中心越远，旋转速度越大

任何示例 jquery 代码或插件？任何帮助表示赞赏。谢谢：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T04:45:08.877

用了这个插件。它有许多自定义方法，如播放、暂停，可根据滑块移动使用。[http://caroufredsel.dev7studios.com/](http://caroufredsel.dev7studios.com/)谢谢:)

# javascript - 仅当值更改时才应执行 onkeypress

> ID：14071219
> 
> 赞同：0
> 
> 时间：2012-12-28T14:45:08.057
> 
> 标签：javascript

我有一个函数说 jsFunEnter(e)

```
<input name="name" id="id" onkeypress="jsFunEnter(event)"  size="2" value="13"/>

function jsFunEnter(e)
{
if (e.keyCode == 13) 
     {
       callAnother();
     }
} 
```

简而言之，如果值没有改变，我不需要在按下回车键时调用函数 jsFunEnter(e)。例如：如果我在文本框中有“7”。我将 '7' 更改为 '8' 并按回车键应该执行该功能。但是，如果我更改“7”并再次输入“7”并按 Enter，则不会调用该函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T14:47:50.500

将旧值保留在另一个全局变量上，并在方法开始时检查更改。在方法结束时更新全局变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T14:49:29.587

您需要存储以前的值并对照新值进行检查：

```
var oldInput;

function jsFunEnter(e)
{
     if (e.keyCode == 13) 
     {
       newInput = document.getElementById("id").value;
       if (newInput != oldInput) {
           oldInput=newInput;
           callAnother();
       }

     }
} 
```

# android - 如何从生成的 wifi 网络列表中连接 wifi 网络？

> ID：14071221
> 
> 赞同：1
> 
> 时间：2012-12-28T14:45:10.147
> 
> 标签：android, wifi

我已经在我的 android 设备附近生成了一个可用的 wifi 网络列表。现在，如果我从列表中单击任何 wifi 网络，我想打开一个对话框询问密码，如果我输入正确的密码，那么它必须连接到该 wifi 网络。我该怎么做。

# list - VAL keyword within IF condition won't allow reassignment in SML

> ID：14071226
> 
> 赞同：1
> 
> 时间：2012-12-28T14:45:28.630
> 
> 标签：list, sml, smlnj

Given this following code (which does not work):

```
fun func() = 

val decimal = 0 (* the final result *)
val multiple = 0 (* keeps track of multiples, eg. In XXV, X would be a multiple *)
val current = 0 (* the digit currently being processed *)
val top = 0   (* value of the last element in the list *)
val last_add = 0 (* the last digit that wasn't a multiple, or subtraction operation *)
val last_sub = 0
val problem = 0 (* if value is 1 then there is a problem with the input *)

val myList = [1,2,3,4,5] (* the list has more values *)
val current = tl(myList) (* grab the last element from the list *)
val myList = tl(myList) (* remove the last element from the list *)
val top = tl(myList) (* grab the value at the end of the list *)

while (not(myList = []))    (* run while the list is not empty *)

if ( (not(myList = [])) andalso (current > top))
   then      

            val decimal = decimal + current - top
            val last_sub = top;
            val myList = tl(myList)
   else     
       if ( (myList = []) andalso (current = top))
          then val decimal = decimal + current
               val multiple = multiple + 1
          else
              if (last_sub = current)
                 then val problem = 1

                 else
                      val decimal = decimal + current
                      val multiple = 0
                      val last_add = current 
```

This is only a partial code , which doesn't work at the moment , since the `val` is not possible within an `if` statement .

1.  I want to run in a `while` loop , how can I do that in ML ?

2.  How can I assign and reassign values into variables that were previously declared in ML ?

3.  The `val` keyword is not possible within the IF condition , so I cannot update the variables , any idea how to solve that ?

Regards

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T19:43:23.793

> How can I assign and reassign values into variables that were previously declared in ML ?

You cannot assign to variables after they are declared in ML.

> The val keyword is not possible within the IF condition , so I cannot update the variables , any idea how to solve that ?

Except at the top level, you usually use `val` and `fun` inside a `let`:

```
let
  val x = blah blah
  val y = blah blah
  fun f x y = blah blah
in
  some expression
end 
```

However, note that this creates a *new* variable (which may hide any existing variable of the same name), which exists inside the scope of the body of the let. As said before, you cannot assign to an existing variable.

> I want to run in a while loop , how can I do that in ML ?

You are almost there. The syntax is `while condition do ( ... )`. But a while loop is useless without mutable state.

If you want mutable state, you can use a mutable data structure. The language provides a simple "mutable cell" called `ref`: you create it by passing the initial value to the `ref` function, you get the current value with the `!` operator, and you set a new value with the `:=` operator. You also have to remember that if you want to run multiple imperative "statements", you must separate them with the `;` operator, and possibly enclose the whole "block" of statements in parentheses due to precedence issues.

But using while loops and mutable state is really not the right way to go here. You are using a functional language, and it would be much better for you to re-write your algorithm to be purely functional. It's not hard to do. You would turn the body of your while loop into a tail-recursive helper function, and the "variables" that change between iterations of the loop would become arguments to this function. Instead of trying to "set" the values of these variables, it would simply recursively call itself with the new values for the next iteration. If it's tail-recursive, it's equivalent to iteration memory-wise.

# css - @media 不起作用

> ID：14071227
> 
> 赞同：2
> 
> 时间：2012-12-28T14:45:30.440
> 
> 标签：css, media-queries

我正在使用媒体查询为较小的屏幕重写我的页面样式：

```
@media only screen 
and (min-width : 400px) 
and (max-width : 1024px) {
#container {
right:10px;
top:50px;
font-size:24px;
position:absolute;
min-height: 85%;
margin-left:auto;
width:100px;
}   
#portfolio {
width:100px;
min-height:550px;
-webkit-box-shadow:  0px 2px 10px 4px rgba(9, 9, 9, 0.2);
box-shadow:  0px 2px 10px 4px rgba(9, 9, 9, 0.2);
-webkit-border-radius: 10px;
border-radius: 10px;}
#whoami {
width:100px;
min-height:550px;
-webkit-box-shadow:  0px 2px 10px 4px rgba(9, 9, 9, 0.2);
box-shadow:  0px 2px 10px 4px rgba(9, 9, 9, 0.2);
-webkit-border-radius: 10px;
border-radius: 10px;    }
#blog {
width:100px;
min-height:550px;
-webkit-box-shadow:  0px 2px 10px 4px rgba(9, 9, 9, 0.2);
box-shadow:  0px 2px 10px 4px rgba(9, 9, 9, 0.2);
-webkit-border-radius: 10px;
border-radius: 10px;    
}
#contact {
width:100px;
min-height:550px;
-webkit-box-shadow:  0px 2px 10px 4px rgba(9, 9, 9, 0.2);
box-shadow:  0px 2px 10px 4px rgba(9, 9, 9, 0.2);
-webkit-border-radius: 10px;
border-radius: 10px;
}

} 
```

什么都没有工作。我通过我的 Dreamweaver CS6 兼容性视图查看了网页，但它没有工作，所以我通过调整浏览器窗口的大小来检查它，但也没有工作。任何想法为什么它不起作用？它不适用于ID吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T15:10:14.680

尝试在您的标题上添加此元数据：

```
<meta name="viewport" content="width=device-width" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T15:47:50.370

发布的代码就是这样工作的，所以问题出在其他地方，例如在构造内部的规则中或在使用不支持媒体查询的浏览器中（这实际上意味着 IE 8 或更早版本 - 否则[浏览器支持](http://caniuse.com/#feat=css-mediaqueries)非常好）。

要检查情况，请先使用最小的文档进行测试，例如

```
<!doctype html>
<title>Testing media queries</title>
<style>
@media only screen 
and (min-width : 768px) 
and (max-width : 1024px) {
  body { background: green; }
}
</style>
Hello world 
```

您还应该测试构造内部的样式表，将其取出，使其成为无条件的，以查看它是否有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-18T21:25:15.107

这也发生在我身上，在 Chrome 和 Firefox 上。

我发现当默认`visibility`设置为`hidden`或为时`display`出现问题`none`（受css影响的元素的可见性由js控制）。

# android - 控制默认联系人列表和消息应用程序

> ID：14071228
> 
> 赞同：0
> 
> 时间：2012-12-28T14:45:38.330
> 
> 标签：android

有没有办法可以控制联系人列表和消息显示的内容？我想制作一个应用程序，如果启用它将隐藏某些人的某些联系人或消息。我不确定这是否可行请让我知道这是否可以通过编程方式完成。请注意，我指的是 android 附带的默认联系人/消息应用程序，我希望能够控制它从我的应用程序中显示的内容

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T17:09:07.607

> 请注意，我指的是 android 附带的默认联系人/消息应用程序，我希望能够控制它从我的应用程序中显示的内容

幸运的是，这是不可能的，除非修改实际数据，如对您问题的评论中所述。您不能像某些脚本小子一样入侵其他应用程序。

请注意，由于同步，删除联系人可能最终会从上游数据源中删除它们。用户可能不理解这一点。

欢迎您构建自己的联系人应用程序，以维护自己的过滤联系人列表。

# android - Android Maps Library V2 缩放控件自定义位置

> ID：14071230
> 
> 赞同：28
> 
> 时间：2012-12-28T14:45:51.440
> 
> 标签：android, google-maps, google-maps-android-api-2

如何自定义 GoogleMap V2 中内置缩放控件的位置？

Google Maps library 的第 1 版有很多与此主题相关的问题。

[在 MapView 中放置缩放控件](https://stackoverflow.com/questions/263507/placing-zoom-controls-in-a-mapview)

[如何重新定位 MapView 中的内置缩放控件？](https://stackoverflow.com/questions/4035347/how-to-reposition-built-in-zoom-controls-in-mapview)

[如何使用 setBuiltInZoomControls(true) 布局缩放控件？](https://stackoverflow.com/questions/1768097/how-to-layout-zoom-control-with-setbuiltinzoomcontrolstrue)

但是，我找不到与图书馆 V2 相关的任何问题。

在 V2 中，没有方法

```
(LinearLayout) mapView.getZoomControls(); 
```

前面提到的所有问题都已过时。

提前致谢

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-12-05T21:17:59.783

根据您尝试执行的操作，您可能会发现[GoogleMap.setPadding()](https://developers.google.com/android/reference/com/google/android/gms/maps/GoogleMap#setPadding(int,%20int,%20int,%20int))很有用（于 2013 年 9 月添加）。

```
map.setPadding(leftPadding, topPadding, rightPadding, bottomPadding); 
```

从 API 文档：

> 此方法允许您在地图上定义可见区域，通过在地图的四个边缘中的每一个上设置填充来向地图发出信号，表明边缘周围的地图部分可能会被遮挡。地图功能将适应填充。例如，缩放控件、指南针、版权声明和 Google 徽标将被移动以适应定义的区域，相机移动将相对于可见区域的中心等。

另请参阅有关[填充如何在 GoogleMap 中工作的描述](https://developers.google.com/maps/documentation/android-sdk/map#map_padding)。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-02-19T07:17:07.040

是的，您可以通过小技巧更改**ZoomControl**和**MyLocation**按钮的位置。在我的示例中，我有**SupportMapFragment**，它是从 xml 布局膨胀的。

ZoomControl 和 MyLocation 按钮的视图 ID：

```
ZoomControl id = 0x1
MyLocation button id = 0x2 
```

更新 ZoomControl 位置的代码：

```
// Find map fragment
SupportMapFragment mapFragment = (SupportMapFragment) getFragmentManager().findFragmentById(R.id.map);

// Find ZoomControl view
View zoomControls = mapFragment.getView().findViewById(0x1);

if (zoomControls != null && zoomControls.getLayoutParams() instanceof RelativeLayout.LayoutParams) {
    // ZoomControl is inside of RelativeLayout
    RelativeLayout.LayoutParams params = (RelativeLayout.LayoutParams) zoomControls.getLayoutParams();

    // Align it to - parent top|left
    params.addRule(RelativeLayout.ALIGN_PARENT_TOP);
    params.addRule(RelativeLayout.ALIGN_PARENT_LEFT);

    // Update margins, set to 10dp
    final int margin = (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, 10,
            getResources().getDisplayMetrics());
    params.setMargins(margin, margin, margin, margin);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-22T23:57:30.473

我使用 MapFragment 而不是 SupportMapFragment：

```
import android.util.TypedValue; 
```

在 onCreate

```
 // Find map fragment

    MapFragment mapFragment = (MapFragment) getFragmentManager().findFragmentById(R.id.mapview);

    int ZoomControl_id = 0x1;
    int MyLocation_button_id = 0x2;

    // Find ZoomControl view
    View zoomControls = mapFragment.getView().findViewById(ZoomControl_id);

    if (zoomControls != null && zoomControls.getLayoutParams() instanceof RelativeLayout.LayoutParams) {
        // ZoomControl is inside of RelativeLayout
        RelativeLayout.LayoutParams params = (RelativeLayout.LayoutParams) zoomControls.getLayoutParams();

        // Align it to - parent top|left
        params.addRule(RelativeLayout.ALIGN_PARENT_TOP);
        params.addRule(RelativeLayout.ALIGN_PARENT_LEFT);

        // Update margins, set to 10dp
        final int margin = (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, 10,
                getResources().getDisplayMetrics());
        params.setMargins(margin, margin, margin, margin);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-17T10:24:25.297

仅作记录：

导航控件是`0x4`

所以总的来说：

```
@LayoutRes final int ZOOM_CONTROL_ID = 0x1;
@LayoutRes final int MY_LOCATION_CONTROL_ID = 0x2;
@LayoutRes final int NAVIGATION_CONTROL_ID = 0x4; 
```

# android - 如何让后退按钮在水平滚动中转到某个片段？立即退出应用程序

> ID：14071233
> 
> 赞同：2
> 
> 时间：2012-12-28T14:45:56.567
> 
> 标签：android, android-fragments, android-fragmentactivity, fragmentpageradapter

标题几乎解释了它。

我设置了水平滚动，第一个屏幕有其他片段以及整个水平滚动系统的按钮。我希望用户能够在其中一个片段上按下后退按钮，并使应用程序返回所有按钮的第一个屏幕。

从那里我希望后退按钮成为一个 AlertDialog 询问用户是否要退出应用程序。目前正在发生这种情况（在所有片段上，当您按下后退按钮时，我创建的 AlertDialog 会弹出）。

我研究了 Fragment 事务和“addToBackStack()”，但我不知道如何实现它。我已经查看了该站点上的开发指南和某些问题，但获得一两行代码并不能帮助实现它。

我有一个带有 FragmentPagerAdapter 的 FragmentActivity，每个 Fragment 都有自己的 Java 文件。我有 5 个片段，它们都在 FragmentActivity 和 FragmentPagerAdapter 中调用。

我认为我暂时不需要向你们展示我的任何代码，因为它都是以正常方式设置的。如果你这样做，请告诉我。

我在其他问题上发现的一些代码，尤其是其中一个问题如下：

```
FragmentTransaction tx = fragmentManager.beginTransation();
tx.replace( R.id.fragment, new MyFragment() ).addToBackStack( "tag" ).commit(); 
```

不过，要继续这样做有点困难。

我将衷心感谢您的帮助。

编辑：我的代码已删除 - 不需要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T09:48:27.333

如果您使用`ViewPager`我之前回答的问题中的 并且您想回到`ViewPager`用户按下`BACK`按钮时的第一个片段，然后覆盖这样的`onBackPressed`方法：

```
@Override
public void onBackPressed() {
    if (getSupportFragmentManager().findFragmentByTag("outDialog") != null
            && ((DialogFragment) getSupportFragmentManager()
                    .findFragmentByTag("outDialog")).isVisible()) {
        // we have the out dialog visible and the user clicked back so let
        // the
        // normal events happen
        super.onBackPressed();
        return;
    }
    int currentPosition = mViewPager.getCurrentItem();
    if (currentPosition != 0) {
        // if the page the ViewPager shows isn't the first one then move it
        // to the first one
        mViewPager.setCurrentItem(0);
    } else {
        // we are at the first position already and the user wants out, so
        // annoy him with a dialog that asks him once again if he wants out.
        DialogFragment askHim = new DialogFragment();
        askHim.show(getSupportFragmentManager(), "outDialog");
        // in the dialog listener, if the user presses ok, finish the activity
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T15:16:13.637

您是否尝试过覆盖`Activity.onBackPressed()`？我用过`addToBackStack()`，效果很好，但我不知道它是否适用于`PagerAdapter`. 我认为您可以覆盖`Activity.onBackPressed()`并在该方法中，您可以检查当前页面是否为首页并执行您想做的任何工作。

这是我认为的伪代码。

```
public void onBackPressed() {
  if( pager.getCurrentPage() == 0 ) { //I'm not sure this method exists or not. just example. :-)
      //exit code here
  } else {
      // show first page
  }
} 
```

# xml - 如何在模式中使用联合

> ID：14071235
> 
> 赞同：-1
> 
> 时间：2012-12-28T14:46:04.150
> 
> 标签：xml, xsd

在下面的模式中，创建了三种不同的简单类型（即 TestSexType、TestSexType2 和 TestSEXCodeSimpleType）。前两个定义了一个枚举值，而后者是由前两种类型组成的联合。然后，创建两个元素，一个是 TestSexType2 类型，一个是 TestSEXCodeSimpleType 类型。TextSexType（在联合中定义）未在从架构生成的类中定义。关于我做错了什么的任何想法？

```
<?xml version="1.0" encoding="UTF-8"?>
<!-- edited with XMLSpy v2012 rel. 2 sp1 (http://www.altova.com) by CA/CST/ES (US DEPT OF STATE) -->
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns="base" targetNamespace="base" elementFormDefault="unqualified" attributeFormDefault="unqualified">
  <xs:simpleType name="TestSexType">
    <xs:restriction base="xs:token">
      <xs:enumeration value="Y"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="TestSexType2">
    <xs:restriction base="xs:token">
      <xs:enumeration value="Z"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="TestSEXCodeSimpleType">
    <xs:union memberTypes="TestSexType TestSexType2"/>
  </xs:simpleType>
  <xs:element name="TestSex" type="TestSEXCodeSimpleType"/>
  <xs:element name="SexElement" type="TestSexType2"/>
</xs:schema> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T20:27:36.383

您提到“从模式生成的类”这一事实表明您正在使用某种数据绑定工具。你需要告诉我们是哪一个。有很多，它们在可以处理的 XSD 构造方面都有不同的限制。

# scala - Kiama：dup 非法参数异常

> ID：14071238
> 
> 赞同：2
> 
> 时间：2012-12-28T14:46:14.513
> 
> 标签：scala

我正在`dup illegal arguments exception`输入以下代码。

```
package tests.kiama

import org.junit.runner.RunWith
import org.scalatest.FunSuite
import org.scalatest.junit.JUnitRunner
import org.kiama.rewriting.Rewriter._

@RunWith(classOf[JUnitRunner])
class KiamaRewrite extends FunSuite {
    test("test1") {
        abstract class E
        case class B(l: E, r: E) extends E
        case class P() extends E
        case class Q() extends E
        case class PP() extends E
        case class QQ() extends E

        val t = B(P(), Q())
        val d = rule {
            case P() => PP()
            case Q() => QQ()
        }

        val s = bottomup(d)(t)
        println("done")
    }
} 
```

例外：

```
java.lang.RuntimeException: dup illegal arguments: public tests.kiama.KiamaRewrite$$anonfun$1$B$2(tests.kiama.KiamaRewrite$$anonfun$1,tests.kiama.KiamaRewrite$$anonfun$1$E$1,tests.kiama.KiamaRewrite$$anonfun$1$E$1) (PP(),QQ()), expects 3 
```

我正在使用 kiama 图书馆。[http://code.google.com/p/kiama/](http://code.google.com/p/kiama/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T22:04:14.030

Kiama`dup`方法负责创建与现有实例相同类型的新实例。`dup`使用反射来查找构造函数并抱怨构造函数参数与给定的参数不匹配。在您的测试中，它试图创建一个`B`具有两个子节点的节点，但`B`构造函数具有三个参数，因为`B`它是`KiamaRewrite`.

将`B`etc 类声明移出，`KiamaRewrite`测试通过。

# java - 使用 Hadoop MapReduce 处理不同节点上的不同文件

> ID：14071246
> 
> 赞同：0
> 
> 时间：2012-12-28T14:46:42.983
> 
> 标签：java, hadoop, mapreduce, cloudera

我以前使用过 Pig 和 Hive，但对 Hadoop MapReduce 还是陌生的。我需要编写一个应用程序，它有多个小文件作为输入（比如 10 个）。它们有不同的文件结构，所以我想在不同的节点上并行处理它们，以便可以快速处理它们。我知道 Hadoop 的优势在于处理大数据，但这些输入文件虽然很小，但需要大量处理，所以我希望利用 Hadoop 的并行计算能力。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T03:55:31.577

简而言之：尝试一下`NLineInputFormat`。

将所有输入文件复制到所有节点没有问题（如果您愿意，可以将它们放入分布式缓存）。您真正想要分发的是支票处理。

使用 Hadoop，您可以创建（单个！）格式为 (filename,check2run) 或 (filename,format,check2run) 的输入控制文件，并用于`NLineInputFormat`向您的节点提供指定数量的检查（mapreduce.input.lineinputformat.linespermap 控制行馈送到每个映射器）。

注意：Hadoop 输入格式决定了拆分的计算方式；`NLineInputFormat`（不像`TextInputFormat`）不关心块。

根据您检查的性质，您可能能够计算linespermap 值以覆盖一波映射器中的所有文件/检查（或者可能根本无法使用这种方法:)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T14:56:39.987

这是可能的，但您可能不会获得太多价值。你有这些力量反对你：

### 混乱的输入

您需要编写一个可以处理所有不同输入格式的映射器（通过检测输入格式，或使用输入的文件名来决定期望的格式）

### 多个输出

您需要使用 Hadoop 的稍微复杂的多输出文件处理功能，或者将输出写为 reducer（或映射器，如果您可以确定每个文件将转到不同的节点）的副作用

### 初始化成本高

每个 hadoop map reduce 作业都伴随着高昂的启动成本，在小型集群上大约需要 30 秒，在大型集群上则更多。仅这一点可能会让你失去更多的时间，而不是你希望通过并行获得的时间。

# java - 使用 jersey 创建 RESTful Web 服务客户端

> ID：14071248
> 
> 赞同：2
> 
> 时间：2012-12-28T14:46:49.397
> 
> 标签：java, web-services, rest

我有下面列出的代码来使用一个安静的 web 服务，但它总是报告下面列出的错误。我曾尝试使用 jersey api 1.8 和 1.9，但没有任何效果。

我的代码：

```
public class JerseyClient {
    public static void main(String[] args) {
        Client client = Client.create(); // faulty line

        WebResource resource;

        resource = client.resource("http://localhost:8080/CustomerApp/webresources/entities.customer");

        String string = resource.path("1")
            .accept(MediaType.APPLICATION_XML)
            .get(String.class);
        System.out.println(string);
    }
} 
```

错误：

```
Dec 28, 2012 8:17:06 AM com.sun.jersey.spi.inject.Errors processErrorMessages

Exception in thread "main" com.sun.jersey.spi.inject.Errors$ErrorMessagesException 
at com.sun.jersey.spi.inject.Errors.processErrorMessages(Errors.java:170) 
at com.sun.jersey.spi.inject.Errors.postProcess(Errors.java:136) 
at com.sun.jersey.spi.inject.Errors.processWithErrors(Errors.java:199) 
at com.sun.jersey.api.client.Client.(Client.java:187) at com.sun.jersey.api.client.Client.(Client.java:159) 
at com.sun.jersey.api.client.Client.create(Client.java:669) 
at client.JerseyClient.main(JerseyClient.java:20) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T14:23:06.713

获取 Jersey 客户端 jar 文件，jersey 客户端的 maven 位置是

```
<!-- language: lang-xml -->      
<dependency>
<groupId>com.sun.jersey</groupId>
<artifactId>jersey-client</artifactId>
<version>1.13-b01</version>
</dependency> 
```

在此确保您的服务运行与否并运行此客户端类之后，它将运行良好。[您可以在此处](http://www.smashplus.info/2013/04/create-restful-web-service-using-eclipse.html)找到创建 RESTful Web 服务的教程

# php - 如何将两个表单放在同一个页面上？

> ID：14071250
> 
> 赞同：19
> 
> 时间：2012-12-28T14:46:54.857
> 
> 标签：php, html, forms

我想将注册和登录表单放在同一页面上。
他们都以：

```
if (!empty($_POST)) ... 
```

所以，我需要类似的东西：

```
if (!empty($_POST_01))...  // regForm
  and 
if (!empty($_POST_02))...  //loginForm 
```

另外，如果第二个表单很忙，如何防止执行第一个表单，反之亦然（用户单击两者）
我的想法是在启动进程时创建一个简单的变量，例如`$x = 1`在进程结束时`$x = 0`，所以：

```
if ((!empty($_POST_01)) And $x = 0)... 
```

可能，有更好的方法。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-12-28T14:52:56.033

您可以使用 2 个不同的操作制作两个表单

```
<form action="login.php" method="post">
    <input type="text" name="user">
    <input type="password" name="password">
    <input type="submit" value="Login">
</form>

<br />

<form action="register.php" method="post">
    <input type="text" name="user">
    <input type="password" name="password">
    <input type="submit" value="Register">
</form> 
```

或者这样做

```
<form action="doStuff.php" method="post">
    <input type="text" name="user">
    <input type="password" name="password">
    <input type="hidden" name="action" value="login">
    <input type="submit" value="Login">
</form>

<br />

<form action="doStuff.php" method="post">
    <input type="text" name="user">
    <input type="password" name="password">
    <input type="hidden" name="action" value="register">
    <input type="submit" value="Register">
</form> 
```

然后你的 PHP 文件将作为一个 switch($_POST['action']) 工作......此外，他们不能同时点击两个链接或同时发出请求，每次提交都是一个单独的请求。

然后，您的 PHP 将继续执行切换逻辑或使用不同的 php 文件执行登录程序然后执行注册程序

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-28T14:51:07.667

好吧，您可以让每个表单转到**不同**的页面。（这是更可取的）

或者对某个输入和基础帖子有不同的值：

```
switch($_POST['submit']) {
    case 'login': 
    //...
    break;
    case 'register':
    //...
    break;
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-10-28T12:14:24.973

为两种表单的提交按钮指定不同的名称，并使用 PHP 检查哪个按钮已提交数据。

表单一按钮 - btn1 表单二按钮 -btn2

PHP代码：

```
if($_POST['btn1']){
    //Login
}elseif($_POST['btn2']){
    //Register
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-10-06T20:26:11.780

您可以使用这个最简单的方法。

```
<form action="validator.php" method="post" id="form1">
    <input type="text" name="user">
    <input type="password" name="password">
    <input type="submit" value="submit" form="form1">
</form>

<br />

<form action="validator.php" method="post" id="form2">
    <input type="text" name="user">
    <input type="password" name="password">
    <input type="submit" value="submit" form="form2">
</form>
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-28T14:52:09.527

希望这会帮助你。假设登录表单有：用户名和密码输入。

```
if(isset($_POST['username']) && trim($_POST['username']) != "" && isset($_POST['password']) && trim($_POST['password']) != ""){
//login
} else {
//register
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-03-11T12:09:11.903

这是两个带有两个提交按钮的表单：

```
<form method="post" action="page.php">
  <input type="submit" name="btnPostMe1" value="Confirm"/>
</form>

<form method="post" action="page.php">
  <input type="submit" name="btnPostMe2" value="Confirm"/>
</form> 
```

这是您的 PHP 代码：

```
if (isset($_POST['btnPostMe1'])) { //your code 1 }
if (isset($_POST['btnPostMe2'])) { //your code 2 } 
```

# php - 如何在 Phalcon 中设置 404 页面

> ID：14071261
> 
> 赞同：21
> 
> 时间：2012-12-28T14:47:32.797
> 
> 标签：php, http-status-code-404, phalcon, volt

当控制器/动作不存在时，如何在 Phalcon 中设置 404 页面显示？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-12-28T14:47:32.797

您可以设置调度程序为您执行此操作。

当您引导您的应用程序时，您可以这样做（`$di`是您的 DI 工厂）：

```
use \Phalcon\Mvc\Dispatcher as PhDispatcher;

$di->set(
    'dispatcher',
    function() use ($di) {

        $evManager = $di->getShared('eventsManager');

        $evManager->attach(
            "dispatch:beforeException",
            function($event, $dispatcher, $exception)
            {
                switch ($exception->getCode()) {
                    case PhDispatcher::EXCEPTION_HANDLER_NOT_FOUND:
                    case PhDispatcher::EXCEPTION_ACTION_NOT_FOUND:
                        $dispatcher->forward(
                            array(
                                'controller' => 'error',
                                'action'     => 'show404',
                            )
                        );
                        return false;
                }
            }
        );
        $dispatcher = new PhDispatcher();
        $dispatcher->setEventsManager($evManager);
        return $dispatcher;
    },
    true
); 
```

创建一个`ErrorController`

```
<?php

/**
 * ErrorController 
 */
class ErrorController extends \Phalcon\Mvc\Controller
{
    public function show404Action()
    {
        $this->response->setStatusCode(404, 'Not Found');
        $this->view->pick('404/404');
    }
} 
```

和 404 视图 ( `/views/404/404.volt`)

```
<div align="center" id="fourohfour">
    <div class="sub-content">
        <strong>ERROR 404</strong>
        <br />
        <br />
        You have tried to access a page which does not exist or has been moved.
        <br />
        <br />
        Please click the links at the top navigation bar to 
        navigate to other parts of the site, or
        if you wish to contact us, there is information in the About page.
        <br />
        <br />
        [ERROR]
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-07-09T08:09:51.410

您可以使用路由来处理 404 not found 页面：

```
$router->notFound(array(
    "controller" => "index",
    "action" => "route404"
)); 
```

参考：[http ://docs.phalconphp.com/en/latest/reference/routing.html#not-found-paths](http://docs.phalconphp.com/en/latest/reference/routing.html#not-found-paths)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-07-14T14:51:31.393

Dimopoulos 提出的解决方案不起作用。它产生一个循环条件。

Phalcon 路由器组件有一个默认行为，它提供了一个非常简单的路由，它总是需要一个匹配以下模式的 URI：/:controller/:action/:params。这会导致很多问题，因为当服务器接收到一个与任何定义的路由都不匹配的 URL 请求时，Phalcon 将搜索一个不存在的控制器。

因此，首先，您**必须禁用**此行为。这可以`FALSE`在 Router 实例创建期间传递，如下所示：

```
$router = Phalcon\Mvc\Router(FALSE); 
```

此时您可以使用@Nguyễn Trọng Bằng 提出的解决方案。

```
$router->notFound(
  [
    "namespace" => "MyNamespace\Controller"
    "controller" => "index",
    "action" => "route404"
  ]
); 
```

重要的是要注意，如果您使用命名空间，调度程序将无法找到控制器，除非您指定它，就像我在上面所做的那样。

这不仅是最简单的解决方案，而且是唯一有效的解决方案。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-09-12T20:02:12.017

您还可以使用在 errorController 中设置标题

```
class ErrorController extends ControllerBase
{
     public function error404Action()
    {
        $this->response->setHeader('HTTP/1.0 404','Not Found');
        // $this->response->setHeader(404, 'Not Found'); <- did not work
    }
} 
```

而之前，在控制器中，发生错误的地方，您可以转发到这个错误控制器。

```
class IndexController extends ControllerBase
{
    public function indexAction()
    {
        $id = (int)$this->getId($param);
        if ($id > 0) {

           // do you stuff
        } else {
           $this->dispatcher->forward(array(
               'controller' => 'error', 'action' =>   'error404')
           );
        }
    }
} 
```

这是一种快速而肮脏（？）的方式，并且很好，如果您从数据库中获取内容并且想要抛出错误，如果没有找到任何东西。

# vba - 访问 2010 VBA ptrVar 不起作用

> ID：14071263
> 
> 赞同：1
> 
> 时间：2012-12-28T14:47:37.197
> 
> 标签：vba, ms-access, pointers, compiler-errors

我在 Access 2010 中的 VBA 代码有问题。我声明了一个类型，但是当我尝试获取这种类型的变量的指针（使用函数 VarPtr）时，我得到一个`compilation error: incompatible type`.

```
Dim dm As DEVMODE
Dim pd As PRINTER_DEFAULTS

pd.pDevMode = VarPtr(dm) ' the line that throws the error

' pDevMOde is a Long that is supose to contain the adress of the dm variable

Private Type DEVMODE
  dmDeviceName As String * CCHDEVICENAME ' (1 To CCHDEVICENAME) As Byte
  dmSpecVersion As Integer
  dmDriverVersion As Integer
  dmSize As Integer
  dmDriverExtra As Integer
  dmFields As Long
  dmOrientation As Integer
  dmPaperSize As Integer
  dmPaperLength As Integer
  dmPaperWidth As Integer
  dmScale As Integer
  dmCopies As Integer
  dmDefaultSource As Integer
  dmPrintQuality As Integer
  dmColor As Integer
  dmDuplex As Integer
  dmYResolution As Integer
  dmTTOption As Integer
  dmCollate As Integer
  dmFormName As String * CCHFORMNAME '(1 To CCHFORMNAME) As Byte
  dmUnusedPadding As Integer
  dmBitsPerPel As Integer
  dmPelsWidth As Long
  dmPelsHeight As Long
  dmDisplayFlags As Long
  dmDisplayFrequency As Long
End Type 
```

问题是此代码是在早期版本的 Access 中创建的，并且在 2003 及以下版本中完美运行。我不知道为什么它在 Access 2010 中不起作用。我查看了 2010 和 2003 版本之间的差异，但我没有找到与此相关的任何内容。

有人有线索吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T15:02:14.440

我终于找到了问题所在。64位版本实际上是有区别的。VarPtr 不再返回 Long 类型，它返回 LongPtr 类型变量，我的代码无法将 LongPtr 放入 Long

参考这里：http: [//msdn.microsoft.com/en-us/library/ee691831.aspx](http://msdn.microsoft.com/en-us/library/ee691831.aspx)

> 变量指针 | 变体转换器。| 在 64 位版本上返回 LongPtr，在 32 位版本（4 字节）上返回 Long。

希望它可以帮助别人！

# wpf - WPF TreeView 未填充

> ID：14071264
> 
> 赞同：0
> 
> 时间：2012-12-28T14:47:39.440
> 
> 标签：wpf, treeview, viewmodel, populate

我正在尝试使用 ViewModel 动态填充 WPF 树，但是由于某种原因它不起作用。要么绑定不正确，要么我在代码后面的某个地方搞砸了。

这是我所拥有的样本。在 XAML 中，我像这样定义我的 TreeView...

```
<TreeView DockPanel.Dock="Left" Width="200" DataContext="{Binding MessageTree}" ItemsSource="{Binding MessageTree}">
    <TreeView.ItemContainerStyle>
            <Style TargetType="{x:Type TreeViewItem}">
            <Setter Property="IsExpanded" Value="{Binding IsExpanded, Mode=TwoWay}" />
            <Setter Property="IsSelected" Value="{Binding IsSelected, Mode=TwoWay}" />
            <Setter Property="FontWeight" Value="Normal" />
            <Style.Triggers>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="FontWeight" Value="Bold" />
                </Trigger>
            </Style.Triggers>
        </Style>
        </TreeView.ItemContainerStyle>
        <TreeView.ItemTemplate>
            <HierarchicalDataTemplate DataType="viewModel:Mail" ItemsSource="{Binding Children}">
            <TextBlock Text="{Binding Subject}" />
        </HierarchicalDataTemplate>
    </TreeView.ItemTemplate>
</TreeView> 
```

在代码行为中，我有...

```
private Mail MessageTree { get; set; } 
```

和

```
using (var mail = new MailParser())
{
    int count = mail.GetMessageCount(DateTime.Today.AddDays(-10), DateTime.Today.AddDays(1));
    MessageTree = new Mail();
    for (int i = count - 1; i >= 0; i--)
    {
        MailMessage msg = mail.RetrieveMessage(i);
        if (msg != null)
        {
            MessageTree.Add(msg);
        }
        if (backgroundWorker != null)
        {
            decimal perc = (100.0m - (((i + 1.0m)*100.0m)/count));
            backgroundWorker.ReportProgress((int) perc, "Recebendo mensagens... " + perc.ToString("N2") + "%");
            if (backgroundWorker.CancellationPending)
            {
                e.Cancel = true;
                break;
            }
        }
    }
} 
```

邮件定义为

```
public sealed class Mail : INotifyPropertyChanged
{
    private readonly ObservableCollection<Mail> _children;
    private readonly MailMessage _msg;
    private readonly Mail _parent;

    private bool _isExpanded;
    private bool _isSelected;

    public Mail()
    {
        _msg = new MailMessage {Subject = "Empty"};
        _parent = null;
        _children = new ObservableCollection<Mail>();
    }

    public Mail(MailMessage msg, Mail parent = null)
    {
        _msg = msg;
        _parent = parent;
        _children = new ObservableCollection<Mail>();
    }

    public IEnumerable<Mail> Children
    {
        get { return _children; }
    }

    public string Subject
    {
        get { return _msg.Subject; }
    }

    public bool IsExpanded
    {
        get { return _isExpanded; }
        set
        {
            if (value != _isExpanded)
            {
                _isExpanded = value;
                OnPropertyChanged();
            }
            if (_isExpanded && _parent != null)
                _parent.IsExpanded = true;
        }
    }

    public bool IsSelected
    {
        get { return _isSelected; }
        set
        {
            if (value != _isSelected)
            {
                _isSelected = value;
                OnPropertyChanged();
            }
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;

    public void Add(MailMessage msg)
    {
        _children.Add(new Mail(msg, this));
        OnPropertyChanged("Children");
    }

    private void OnPropertyChanged([CallerMemberName] string propertyName = null)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null) handler(this, new PropertyChangedEventArgs(propertyName));
    }
} 
```

我在其中找不到任何与在网上找到的示例如此不同的东西，以至于它不起作用。Add 方法不完整，我仍然需要一些逻辑来决定是将它们添加到集合中还是添加到集合成员之一的集合中，但是我的所有邮件对象都已添加到集合中但未显示在树视图。

我错过了什么完全明显的事情？当我将项目添加到集合中时，TreeView 不应该自动更新吗？

我想要的是让 TreeView 显示 MessageTree 属性的孩子，以及那些孩子的孩子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T15:06:05.513

在没有看到整个设置的情况下，我并不肯定，但我的猜测是，由于 MessageTree 是一个普通的 CLR 属性（而不是引发 PropertyChanged 或 DependencyProperty 之类的东西，绑定发生在您的`MessageTree = new Mail();`调用之前。当你设置它时对于一个新实例，绑定系统不会收到通知，因为它是一个普通属性。

另一个潜在的问题是您说代码在代码隐藏中。仅使用该 Binding 语法不会从代码隐藏中获取属性。您可能在代码中的其他地方设置了它，而您没有向我们展示。但通常您不会从视图绑定到代码隐藏，而是绑定到用作视图本身的 DataContext 的 ViewModel。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T15:23:36.313

编辑：无法在我的手机上看到全部内容 - 根据实际查看所有内容的能力修改了答案。:)

MOREEDIT：根据评论更新，让我们从头开始！

首先，如果您设置使用窗口/任何作为数据上下文，让我们将其设为 `INotifyPropertyChange...接下来，让我们将“MessageTree”设为邮件集合，而不仅仅是一个邮件（它将生成绑定语义更简单，相信我）

```
public class WhateverContainsTheTree : Window, INotifyPropertyChanged
{
    public WhateverContainsTheTree()
    {
        this.Loaded += OnLoaded;
        this._messageTree = new ObservableCollection<Mail>();
        this.DataContext = this;
    }

    private void OnLoaded(object sender, RoutedEventArgs e)
    {
        _worker = new BackgroundWorker();
        _worker.DoWork += WorkerWorkin;
        _worker.RunWorkerAsync();
    }

    private BackgroundWorker _worker;
    private ObservableCollection<Mail> _messageTree;    
    public ObservableCollection<Mail> MessageTree 
    { 
        get { return _messageTree; }  
        set { _messageTree = value; RaisePropertyChanged("MessageTree"); } 
    }

    public event PropertyChangedEventHandler PropertyChanged = delegate {};
    private void RaisePropertyChanged(string propertyName)
    {
        PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }

    private void WorkerWorkin(object sender, DoWorkEventArgs e)
    {
                // obviously, change this to your stuff; I added a ctor so I could pass a string
        Thread.Sleep(3000);
        Console.WriteLine("Ok, setting message tree");
        Dispatcher.Invoke(
            System.Windows.Threading.DispatcherPriority.Normal,
            (Action)(() => 
            { 
                var mail1 = new Mail("Mail#1:Changed from background thread");
                var mail2 = new Mail("Mail#2:Submail of mail #1");
                var mail3 = new Mail("Mail#3:Submail of mail #2");
                var mail4 = new Mail("Mail#4:Submail of mail #1");
                var mail5 = new Mail("Mail#5:Submail of mail #4");
                mail1.Children.Add(mail2);
                mail1.Children.Add(mail4);
                mail2.Children.Add(mail3);
                mail4.Children.Add(mail5);
                MessageTree.Add(mail1);
            })
        );
    }
} 
```

另外，就像我在原始回复中所说的那样，让我们​​稍微调整一下 Mail.Children：

```
public ObservableCollection<Mail> Children
{
    get { return _children; }
} 
```

这是我用于树视图 xaml 的内容：

```
<TreeView DockPanel.Dock="Left" Width="200" ItemsSource="{{Binding MessageTree}}">
    <TreeView.ItemContainerStyle>
            <Style TargetType="{{x:Type TreeViewItem}}">
            <Setter Property="IsExpanded" Value="{{Binding IsExpanded, Mode=TwoWay}}" />
            <Setter Property="IsSelected" Value="{{Binding IsSelected, Mode=TwoWay}}" />
            <Setter Property="FontWeight" Value="Normal" />
            <Style.Triggers>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="FontWeight" Value="Bold" />
                </Trigger>
            </Style.Triggers>
        </Style>
        </TreeView.ItemContainerStyle>
        <TreeView.ItemTemplate>
            <HierarchicalDataTemplate DataType="viewModel:Mail" ItemsSource="{{Binding Children}}">
                <TextBlock Text="{{Binding Subject}}" />
            </HierarchicalDataTemplate>
    </TreeView.ItemTemplate>
</TreeView> 
```

如果这仍然不起作用，我将粘贴我放在一起的整个 LINQPad blob 来测试它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T17:03:41.067

不得不给TreeView（树）起个名字，然后

```
MessageTree = new Mail(); 
```

插入

```
Tree.ItemSource = MessageTree.Children; 
```

我觉得这很难看，但至少现在可以了。感谢大家尝试提供帮助。

# php - 函数结束时是否清除了局部函数变量的内存？

> ID：14071268
> 
> 赞同：0
> 
> 时间：2012-12-28T14:47:50.693
> 
> 标签：php, function, memory, memory-management, local-variables

考虑以下情况..

```
$var = 'Lots of information';

function go($var) {

    // Do stuff

} 
```

现在，当 PHP 退出函数时，它会自动清除函数内所有局部变量的内存还是我应该这样做：

```
unset($var); 
```

...在存储大量数据的任何局部变量的函数内？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T14:51:13.870

它将在函数范围内清除自己。这意味着函数的`$var`参数在函数调用后将不再存在。请注意，`$var = 'Lots of information';`它在功能块之外，因此不会被自动清除。在这种情况下`$var`，全局范围内和`$var`函数范围内是两个不同的东西，功能块内部只有`$var`在函数范围内才会存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T14:51:00.290

这个问题涉及变量范围的概念。在函数内部，变量是“包含”的，除非声明为全局变量，否则与函数外部的同名变量无关。因此，如果您在函数内部创建了一个大变量，并且想要 unset() 它，则需要在函数内部 unset()。这个页面很重要，尤其是关于“全局”和“静态”变量的部分。PHP 还有一种方法可以通过引用在变量名前使用与号来传递变量。在这种情况下，函数对变量本身进行操作，而不是函数的变量副本。 [http://php.net/manual/en/language.variables.scope.php](http://php.net/manual/en/language.variables.scope.php)

# java - HTTP Google 登录 - Cookie 已关闭

> ID：14071269
> 
> 赞同：1
> 
> 时间：2012-12-28T14:47:51.473
> 
> 标签：java, cookies, login, apache-httpclient-4.x

我正在尝试登录我的 Google 帐户。我读过旧文章使用[HTTP-Fox](https://addons.mozilla.org/de/firefox/addon/httpfox/)获取所有参数。所以我添加了所有，包括隐藏的。

```
package com.businessLogic;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.List;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;

public class Browser {
 public static void main (String [] arg ){

    HttpClient client = new DefaultHttpClient();
    HttpPost post = new HttpPost("https://accounts.google.com/ServiceLogin");
    try {
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1);
        nameValuePairs.add(new BasicNameValuePair("service", "lso"));
        nameValuePairs.add(new BasicNameValuePair("passive", "1209600"));
        nameValuePairs.add(new BasicNameValuePair("continue", "https://accounts.google.com/o/oauth2/auth?....."));
        nameValuePairs.add(new BasicNameValuePair("ltmpl", "embedded"));
        nameValuePairs.add(new BasicNameValuePair("shdf", "CoMBCxIRdGhpcmR...."));
        nameValuePairs.add(new BasicNameValuePair("scc", "1"));
        nameValuePairs.add(new BasicNameValuePair("dsh", "-2602464068824153107"));
        nameValuePairs.add(new BasicNameValuePair("GALX", "qqYU2P_8USM"));
        nameValuePairs.add(new BasicNameValuePair("pstMsg", "1"));
        nameValuePairs.add(new BasicNameValuePair("dnConn", ""));
        nameValuePairs.add(new BasicNameValuePair("checkConnection", "youtube:816:1"));
        nameValuePairs.add(new BasicNameValuePair("checkedDomains", "youtube"));
        nameValuePairs.add(new BasicNameValuePair("timeStmp", ""));
        nameValuePairs.add(new BasicNameValuePair("secTok", ""));
        nameValuePairs.add(new BasicNameValuePair("_utf8", "â"));
        nameValuePairs.add(new BasicNameValuePair("bgresponse", "!A0LfAt2vXHmPiURq..."));
        nameValuePairs.add(new BasicNameValuePair("Email", "XXX"));
        nameValuePairs.add(new BasicNameValuePair("Passwd", "XXX"));
        nameValuePairs.add(new BasicNameValuePair("signIn", "Anmelden"));

        post.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        HttpResponse response = client.execute(post);
        BufferedReader rd = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
        String line = "";
        while ((line = rd.readLine()) != null) {
            System.out.println(line);
        }   
    } catch (IOException e) {
        e.printStackTrace();
    }
}
} 
```

回复：

```
<html><head><title>Google Accounts</title>
</head>
<body dir="ltr" bgcolor="#ffffff" text="#000000" link="#0000cc" vlink="#551a8b" alink="#ff0000">
<div class="topbar aligns" style="font-size:smaller; margin-bottom:0 15px 1px 15px; white-space:nowrap;">
        <a>
              Google Home
</a>
|

<a>Sign in</a></div>
<div class="header margins" style="height: 40px; margin: 13px 15px 9px 15px;"><a href="https://accounts.google.com/"><img src="/googleaccountslogo/en.gif" border="0" class="floats-normal" alt="Google"></a>
</div>
<div style="clear:both;"></div>
<div class="body"><p>Your browser&#39;s cookie functionality is turned off. Please turn it on.
[<a href="http://www.google.com/support/accounts/bin/answer.py?answer=61416&amp;hl=en&amp;ctx=ch_ServiceLogin&amp;p=lso" target="_blank">?</a>]</p>
&copy;2012 Google

</body></html> 
```

登录失败。“登录”选项也可用。我不知道如何处理这些答案/Cookie。我找不到有用的解决方案，因为每个人都使用旧 API，`httpclient`而`org.apache.common.*`.

那你能帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T16:04:09.957

httpFox 将在 FireFox 中向您显示请求的 cookie。看看那些 cookie，它应该会为你提供一些线索。显然，这些 cookie 中的一个或多个必须存在，该 URL 才能回答您。

http 客户端有一种方法可以指定要与请求/POST 一起传递的 cookie。

# objective-c - 如何在 iOS 中将 URL 添加到 Safari 的阅读列表？

> ID：14071270
> 
> 赞同：5
> 
> 时间：2012-12-28T14:47:59.673
> 
> 标签：objective-c, ios, safari, url-scheme

在我的 UIWebView 中，我想添加一个选项以将当前页面添加到 Safari 的阅读列表中。我知道此功能存在，因为 GMail 在长按链接时提供它，但我找不到有关使用什么 URL 方案的任何信息。

可能重复：[如何从 iOS 以编程方式访问 Safari 的阅读列表](https://stackoverflow.com/questions/11529493/how-to-programmatically-access-safaris-reading-list-from-ios)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-19T07:58:01.730

iOS 7 添加了一个 API 来实现这一点：

```
#import <SafariServices/SafariServices.h>

SSReadingList * readList = [SSReadingList defaultReadingList];
NSError * error = [NSError new];

BOOL status =[readList addReadingListItemWithURL:[NSURL URLWithString:urlToAdd] title:titleToAdd previewText:previewText error:&error];

if(status)
{
        NSLog(@"Added URL");

}
else    NSLog(@"Error"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-27T05:44:26.427

我相信您在 gmail 中看到的操作表只是 UIWebView 的内置，开发人员无法访问。

# c# - Application.Quit() 不会退出应用程序

> ID：14071271
> 
> 赞同：3
> 
> 时间：2012-12-28T14:48:10.553
> 
> 标签：c#, monodevelop, gtk#

我有这段简单的`C#`代码`GTK#`：

`Main.cs`：

```
using System;
using Gtk;

namespace Apu{
    class MainClass{
        public static void Main(string[] args){
            Application.Init();
            new ShowForm();
            Application.Run();
        }
    }
} 
```

`ShowForm.cs`

```
public partial class ShowForm: Gtk.Window{  
    public ShowForm(): base(Gtk.WindowType.Toplevel){
        MessageDialog md = new MessageDialog(
            this, 
            DialogFlags.DestroyWithParent, 
            MessageType.Error,
            ButtonsType.None,
            "Test"
        );

        md.SetPosition(Gtk.WindowPosition.CenterAlways);
        md.Title = "Test window";
        md.AddButton("Don't stop", ResponseType.Ok);
        md.AddButton("Stop", ResponseType.Cancel);

        ResponseType result = (ResponseType)md.Run();

        if (result.Equals(ResponseType.Cancel)) {
            Console.WriteLine("Quit!");
            md.DestroyEvent += delegate {
                Application.Quit();
            };
            /*md.DeleteEvent += delegate {
                Application.Quit();
            };*/
        }

        md.Destroy();
    }
} 
```

控制台输出`Quit!`，但程序没有退出。既不`DestroyEvent`也不`DeleteEvent`工作。谁能解释为什么？这是我的第一个应用程序`c#`，我第一次使用`gtk#`。我使用 monodevelop 作为我的 IDE。

**编辑**

`Application.Exit()`给出错误：`Gtk.Application does not contain a definition for 'Exit'`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T15:26:24.650

如果您想关闭该进程，请尝试 Environment.Exit(0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T15:18:29.687

尝试：

```
md.Destroyed += delegate {
    Application.Quit();
}; 
```

# rest - REST 资源中的 Spring MVC 授权

> ID：14071272
> 
> 赞同：0
> 
> 时间：2012-12-28T14:48:15.357
> 
> 标签：rest, spring-mvc, authorization

我有用于访问“派对”的 REST api，URL 如下所示：

```
/parties
/parties/{partyId} 
```

使用 Spring 控制器和 @PathVariable 我能够实现这个接口。但是为了防止用户访问他们无权访问的各方，我必须为*每个*方法调用添加检查，这有点重复我自己，我可能会忘记在任何地方添加它：

```
@RequestMapping(value="/parties/{partyId}", method=RequestMethod.GET)
public @ResponseBody Party getParty(@PathVariable Integer partyId){
    authorizeForParty(partyId);
    ... 
```

现在我想做的是创建一个检查，每次用户输入这样的 url 时都会调用它：

```
/parties/{partyId}/** 
```

我该怎么做这样的事情？我是否必须创建一些 servlet 过滤器并自己解析 url？如果我必须解析 url，那么是否有至少可以简化它的工具？我希望有一种方法可以将方法添加到控制器，该方法将在方法之前调用，但仍可以使用 @PathVariables 等...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T13:07:43.457

我最终得到的是使用 Spring MVC 拦截器并以与 Spring 相同的方式解析路径变量。所以我为 REST url 定义了一个拦截器：

```
<mvc:interceptors>
    <mvc:interceptor>
        <mvc:mapping path="/parties/*/**" />
        <bean class="PartyAuthorizationInterceptor" />
    </mvc:interceptor>
</mvc:interceptors> 
```

PartyAuthorizationInterceptor 必须实现 HandlerInterceptor，我们必须在其中实现 preHandle。它具有 HttpServletRequest 作为参数，因此我们可以获取请求 URL，但我们仍然必须从 url 中解析 partyId。在阅读了 Spring MVC 是如何做到的之后，我发现他们有一个名为 org.springframework.util.AntPathMatcher 的类。它可以从 URL 中读取路径变量并将值放在地图中。该方法称为 extractUriTemplateVariables。

所以结果看起来像这样：

```
@Override
public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception {
    String partyIdStr = new AntPathMatcher().extractUriTemplateVariables("/parties/{partyId}/**", request.getPathInfo()).get("partyId");
    ... 
```

这使得解析几乎与在 MVC 控制器方法中使用 @PathVariable 一样简单。您仍然需要自己进行转换（例如 String -> Integer）。

现在，我可以在访问此拦截器中的一方的所有 url 上实现授权逻辑，并将该逻辑排除在各个控制器方法之外。没有我希望的那么容易，但它完成了工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T16:13:52.083

您是否已经在应用程序中使用某种安全库，例如 Spring Security？

因为您要实现的逻辑类型是[`AccessDecisionVoter`](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/access/AccessDecisionVoter.html)身份验证链中的经典案例。您只需将 API 置于 Spring Security 的保护之下，并将自定义检查作为安全链的一部分来实现。

但是，如果您根本不使用安全框架，那么实现 a 的想法`HandlerInterceptor`可能是最好的选择。但这将要求您（如您所提到的）考虑用户可能使用的各种混淆以获取对其他 URL 的访问权（例如，字母、`../../`模式等的 % 编码）。

# excel - 我们可以在 Dictionary Item() 方法中放置一个函数吗？

> ID：14071274
> 
> 赞同：0
> 
> 时间：2012-12-28T14:48:39.470
> 
> 标签：excel, vbscript, vba

我遇到的一个严重的场景，完全让我的脚本有问题，如下所示：

```
On Error Resume Next

For IndexSearch = 0 To ArrayListTaskDetails.Count - 1 Step 4

    If ArrayListTaskDetails(IndexSearch + 5) <> "" Then

        ArrayListTaskDetails(IndexSearch + 2) = ArrayListTaskDetails(IndexSearch + 5)

    'Else

        'ArrayListTaskDetails(IndexSearch + 2) = DicForProcessEndDate.Item(ob9.Cells(RowCount,1))

    End If 

Next

If Err Then

    Err.Clear
    MsgBox(IndexSearch) '4
    ArrayListTaskDetails(IndexSearch + 2) = DicForProcessEndDate.Item(ob9.Cells(RowCount,1))
    MsgBox(ob9.Cells(RowCount,1)) '47166954
    MsgBox(DicForProcessEndDate.Item(47166954)) ' here i am getting its value
    MsgBox(DicForProcessEndDate.Item(ob9.Cells(RowCount,1))) ' here i didn't see any value for the key ob9.Cells(RowCount,1). Even "47166954" and ob9.Cells(RowCount,1) are same

End If

On Error GoTo 0 
```

你能帮我理解问题是什么吗？如果这确实是一个问题，并通过更改此处的方法来帮助我解决它。

**编辑**

当`Array out of range`从该行发生错误时，`If ArrayListTaskDetails(IndexSearch + 5) <> ""`控制转到错误处理部分，这很完美，但`IndexSearch`计数增加了`4`. 可以说当`IndexSearch`= 0 时，然后引发异常，并且在 Exception 块中我得到了`IndexSearch`价值，而`4`不是，`0`- 为什么会这样？请告诉我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T15:50:05.447

很可能`ob9.Cells(RowCount,1)`正在返回一个字符串值。

当您尝试时，`MsgBox(DicForProcessEndDate.Item(47166954))`您已经为传递给的键硬编码了一个数值`DicForProcessEndDate`。

Dictionary 对象的 key 属性将`47166954`和`"47166954"`视为不同的值。这是有道理的，因为一个是数字，另一个是字符串。

[为避免您的问题，您可以通过将密钥包装在Clng()](http://www.w3schools.com/vbscript/func_clng.asp)中来将其转换为数值。像这样：

```
MsgBox(DicForProcessEndDate.Item(clng(ob9.Cells(RowCount,1)))) 
```

或者，如果您想使用字符串值，您可以使用[Cstr()](http://www.w3schools.com/vbscript/func_cstr.asp)

* * *

编辑：针对您的第二个问题：

你在做一个无效的假设。VBScript 错误捕获与 Excel VBA 的工作方式不同。具体来说，您不能执行类似`On Error goto ErrorCorrection`.

由于该行`On Error Resume Next`，无论是否发生错误，您的 for 循环都将继续。

如果您想停止 for 循环，就像您暗示的那样，您需要将您的逻辑更新为如下内容：

```
For IndexSearch = 0 To ArrayListTaskDetails.Count - 1 Step 4
    If ArrayListTaskDetails(IndexSearch + 5) <> "" Then
        'Check to see if proceeding line caused an error
        If err then
            'Clear the error
            err.clear
            'Exit the loop
            exit for 
```

# iphone - 石英中具有光滑圆角的 UIImage

> ID：14071278
> 
> 赞同：2
> 
> 时间：2012-12-28T14:49:06.340
> 
> 标签：iphone, ios, uiimage, rounded-corners, smooth

我只是在 UIImage 上测试以下代码来圆角：

```
- (UIImage *)makeRoundedImage:(UIImage *)image radius:(float)radius;
{
    CALayer *imageLayer = [CALayer layer];
    imageLayer.frame = CGRectMake(0, 0, image.size.width, image.size.height);
    imageLayer.contents = (id) image.CGImage;

    imageLayer.masksToBounds = YES;
    imageLayer.cornerRadius = radius;

    UIGraphicsBeginImageContext(image.size);
    [imageLayer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *roundedImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return roundedImage;
} 
```

除非您仔细查看生成的图像，否则我看起来很好。边角不光滑。我怎样才能使角落更平滑/更柔软？

**编辑：**

石英圆角处理后的图像：

![在此处输入图像描述](../Images/3fa2cc3dccc3d3f209e9670f790426e9.png)

就像你可以看到角落不光滑。

这是 UIImageView 的cornerRadius 版本更平滑。

![在此处输入图像描述](../Images/558484b5424441b185c9e0460df22ca1.png)

问题在哪里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T15:37:02.660

这是 UIImage 类别：

```
- (UIImage *) imageWithRoundedCornersRadius: (float) radius
{
    // Begin a new image that will be the new image with the rounded corners
    UIGraphicsBeginImageContextWithOptions(self.size, NO, 0);

    // Add a clip before drawing anything, in the shape of an rounded rect
    CGRect rect = CGRectMake(0, 0, self.size.width, self.size.height);
    [[UIBezierPath bezierPathWithRoundedRect:rect cornerRadius:radius] addClip];

    // Draw your image
    [self drawInRect:rect];

    // Get the image, here setting the UIImageView image
    UIImage *roundedImage = UIGraphicsGetImageFromCurrentImageContext();

    // Lets forget about that we were drawing
    UIGraphicsEndImageContext();

    return roundedImage;
} 
```

# javascript - JavaScript - 在 iPad/iPhone 上未触发 mousemove 事件

> ID：14071285
> 
> 赞同：0
> 
> 时间：2012-12-28T14:49:31.223
> 
> 标签：javascript, ipad, mousemove, onmousemove

我在 E-learning 项目上工作了一段时间，我必须编写一个加载到全局框架上的 HTML 文件的脚本。我曾经使用：

`$('#myobject').on('mousedown' ... 'mousemove' ... 'mouseup' , function(){}`)

它在任何地方都运行良好（Chrome、IE、iOS ...等）

现在我正在做一个个人项目，在浏览器中一切正常，但在 iDevices（iPad、iPhone 等）上似乎没有触发“mousemove”。

这是我编写的简单代码，在 iPad 上不起作用：

```
    $(窗口).load(函数() {

        document.ontouchmove = 函数（e）{
            e.preventDefault();
        }   

        $(document).on('mousemove',onmm);
        函数 onmm(e){
            var a = e.pageX;
            var b = e.pageY;
            $('#txt1').html(a);
            $('#txt2').html(b);
        }

    });

```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T12:12:18.940

只需使用 jquery.event.move。移动事件提供了一种在鼠标和触摸设备上设置按下-移动-释放交互的简单方法。因此，您不必担心您的用户拥有哪种设备。

来源和例子：[http ://stephband.info/jquery.event.move/](http://stephband.info/jquery.event.move/)

# iphone - 使用 NSDate 范围搜索 NSArray

> ID：14071286
> 
> 赞同：1
> 
> 时间：2012-12-28T14:49:43.530
> 
> 标签：iphone, ios, ipad, nsarray, nsdate

我有一个 NSArray，其中包含以下名称和日期对。注意：日期始终在我的自定义数组的索引 1 中

```
MyCustomArray: 
(
"Toms Bday"
"2012-01-10"
)
(
"Jesscia Bday"
"2012-01-27"
)
(
"Jills Bday"
"2012-03-03"
)
(
"Joes Bday"
"2012-04-15"
) 
```

我的数组中有数百个名称日期对。因此，对于给定的 StartDate = "2012-01-01" 和 endDate = "2012-01-31" 我只想获得以下记录。我怎么做？

```
(
    "Toms Bday"
    "2012-01-10"
    )
    (
    "Jesscia Bday"
    "2012-01-27"
    ) 
```

我查看了这篇文章[为什么不能使用 < 或 > 比较 NSDate？](https://stackoverflow.com/questions/13301980/why-cant-nsdate-be-compared-using-or)但仍然无法弄清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T14:56:49.863

考虑到您的日期格式非常简单，您可以将它们作为字符串进行比较，结果应该是正确的：

```
NSString *start = @"2012-01-01";
NSString *end = @"2012-01-31";

NSString *date = @"2012-01-10";

if ([start compare:date] == NSOrderedAscending &&
    [end compare:date] == NSOrderedDescending) {
    // Note: might be descending for start and ascending for end, i'm not 100% sure, try both

    // valid date
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T15:20:05.867

如果您可以自己决定数据结构（即，它们不是外部要求），那么也许您想考虑将内部数组（可以说是数据集的记录）转换为字典。

将字典用于记录的优势在于 Cocoa 框架提供了存储、过滤和通常连接数据所需的一切。

因此，请允许我提出如下设置：

```
// For the purposes of this piece of code, a hard coded array of dictionaries: 
NSArray *fullArray = @[
    @{@"desc": @"Toms Bday",    @"bday": [NSDate dateWithString:@"2012-01-10 00:00:00 +00:00"]},
    @{@"desc": @"Jesscia Bday", @"bday": [NSDate dateWithString:@"2012-01-27 00:00:00 +00:00"]}
// etc...
];

// The interval of NSDates that you want to filter
NSDate *intervalBeginning = [NSDate dateWithString:@"2012-01-15 00:00:00 +00:00"];
NSDate *intervalEnd       = [NSDate dateWithString:@"2012-01-31 23:59:59 +00:00"];

// Find the relevant record(s):
NSArray *filteredArray = [fullArray filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"bday >= %@  and bday <= %@", intervalBeginning, intervalEnd]]; 
```

完毕！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T15:26:38.620

假设`entries`你`NSArray`的`NSArray`s 的`NSString`s。

```
NSDateFormatter * formatter = [NSDateFormatter new];
[formatter setDateFormat:@"yyyy-MM-dd"];

NSString * start = @"2012-01-01";
NSDate * startDate = [formatter dateFromString:start];

NSString * end = @"2012-01-31";
NSDate * endDate = [formatter dateFromString:end];

NSIndexSet * indexes = [entries indexesOfObjectsPassingTest:^BOOL(id obj, NSUInteger idx, BOOL *stop) {
    NSString * dateString = obj[1]; // retrieve the date string
    NSDate * date = [formatter dateFromString:dateString];

    return !([date compare:startDate] == NSOrderedAscending ||
             [date compare:endDate] == NSOrderedDescending);
}];

NSArray * results = [entries objectsAtIndexes:indexes]; 
```

我在这里所做的是过滤通过块定义的测试（在开始日期和结束日期之间）的索引，然后创建一个仅包含这些索引的数组。

在此之前，您显然需要使用`NSDateFormatter`.

我个人更喜欢块而不是谓词，因为我认为它们更容易阅读。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-28T15:42:15.380

感谢大家帮助我。这是我的 Kal-Calendar 项目中现在正在运行的代码。我希望这可以帮助任何可能对未来感兴趣的人。虽然回答这篇文章的其他人有更好的通用答案

```
- (void)loadHolidaysFrom:(NSDate *)fromDate to:(NSDate *)toDate delegate:(id<KalDataSourceCallbacks>)delegate
{
    NSLog(@"Fetching B-Days between %@ and %@...", fromDate, toDate);

    NSDateFormatter *fmt = [[[NSDateFormatter alloc] init] autorelease];
    [fmt setDateFormat:@"yyyy-MM-dd"];

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

    NSString *stringsPlistPath = [[paths objectAtIndex:0] stringByAppendingPathComponent:@"birthdays.plist"];

    //READ IN
    NSMutableArray *arryData = [[NSMutableArray alloc] initWithObjects:nil];
    NSMutableDictionary *dictionary = [[NSMutableDictionary alloc] initWithContentsOfFile:stringsPlistPath];

    for (id key in dictionary) 
    {
        [arryData addObject:[dictionary objectForKey:key]];
    }

    for (int i=0; i<[arryData count]; i++)
    {

        NSMutableArray *bdayArray = [[NSMutableArray alloc] initWithArray:[arryData objectAtIndex:i]];

        NSString *nameStr = [bdayArray objectAtIndex:0];
        NSString *bdayStr = [bdayArray objectAtIndex:1];

        NSLog(@"nameStr:%@ ... bdayStr:%@ ...", nameStr,bdayStr);

        NSDate *BirthdayDate = [fmt dateFromString:bdayStr];

        if ([fromDate compare:BirthdayDate] == NSOrderedAscending &&
            [toDate compare:BirthdayDate] == NSOrderedDescending) 
        {
            // valid date
            //do something interesting here ... and it does!
        }

    } 
```

# opengl - 将数据传递到不同的着色器

> ID：14071290
> 
> 赞同：1
> 
> 时间：2012-12-28T14:50:03.853
> 
> 标签：opengl, shader

假设我的着色器程序包含一个顶点着色器和一个片段着色器。

我怎样才能将信息直接传递给碎片着色器？

当我使用 gl_uniform... 并指定我想在片段着色器中寻址的变量时，它会抛出这样的错误：

```
Using ShaderProgram: The fragment shader uses varying myVarHere, but previous 
shader doesnot write to it. 
```

由于我首先附加了顶点着色器，我发现我需要使用 in 和 out 来“通过”顶点着色器“传递信息”。

我不确定这是否是要走的路，所以我的问题是：有没有办法告诉opengl在某个着色器中处理变量，或者我在做/理解什么可怕的错误？

顶点着色器：

```
#version 130

precision highp float;

uniform mat4 projection;
uniform mat4 view;
uniform mat4 model;

in vec3 vertexData;
in vec3 normalData;

out vec3 normal;

void main(void)
{
    normal = (model * view * vec4(normalData, 0)).xyz;
    gl_Position = projection * model * view * vec4(vertexData, 1);
} 
```

分段：

```
#version 130

precision highp float;

in vec3 light0;  // <- this is what i want to fill with data

const vec3 ambient = vec3(0.0, 0.0, 0.0);

const vec3 lightColor = vec3(0.6, 0.0, 0.0);

in vec3 normal;
out vec4 out_frag_color;

void main(void)
{
     float diffuse = clamp(dot(normalize(light0), normalize(normal)), 0.5, 1.0);
     out_frag_color = vec4(ambient + diffuse * lightColor, 1.0);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T15:56:16.050

看来*你*想`light0`成为制服。

只需使其成为制服：

```
#version 130

precision highp float;

uniform vec3 light0;  

... 
```

# python - Collectstatic 命令在 Django 1.4 中不可用

> ID：14071294
> 
> 赞同：4
> 
> 时间：2012-12-28T14:50:40.473
> 
> 标签：python, django, python-2.7

所以我试图运行 collectstatic 将一些文件推送到 AWS，但我不断收到“未知命令”错误。运行 manage.py help 时，我得到一个子命令列表，并且确实不存在 collectstatic。我还查看了 settings.py 的已安装应用程序部分，并安装了静态文件应用程序。Python 是 2.7 版，Django 是 1.4

这个项目不是我建的。我只是一个被拖入编程世界的前端开发人员 D：也许解决方案真的很简单。

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-28T14:59:08.073

检查 settings.py 的`django.contrib.staticfiles`in`INSTALLED_APPS`和`django.core.context_processors.static`in`TEMPLATE_CONTEXT_PROCESSORS`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-27T20:11:24.520

对于那些接受的答案不起作用的人，做

`python manage.py collectstatic` **工作**时

`python django-admin.py collecstatic` *没有*。

也许这可以帮助一些人。

# android - 来自 android 应用程序的 SIP Asterisk CLI 命令

> ID：14071305
> 
> 赞同：1
> 
> 时间：2012-12-28T14:51:17.240
> 
> 标签：android, command-line-interface, sip, asterisk

有没有办法从 Android 应用程序向 Asterisk CLI 发送命令？像这样：'sip show peers' 查看哪些用户在线和离线。也许还有另一种方法可以检查用户注册状态并将其显示在 Android 应用程序中？有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T16:48:57.573

你有两个简单的选择。首先是让您的 Asterisk 启用网络，然后从浏览器应用程序对其进行 REST 调用。或者，您可以获得一些不错的 Android SSH/TTY 客户端，它们可以让您连接到您的 Asterisk 服务器。我用我的 Android ICS 平板电脑做到这一点。

# java - AppEngine ClassNotFoundException：com.google.appengine.api.datastore.DatastoreServiceFactory

> ID：14071310
> 
> 赞同：7
> 
> 时间：2012-12-28T14:51:52.517
> 
> 标签：java, google-app-engine

当我尝试在 AppEngine 中使用低级 DataStore API 时，我得到了一个有趣的`ClassNotFoundException`. 此异常发生在云服务器中，而不是本地实例中。我在本地使用`appengine-java-sdk-1.7.4`.

```
java.lang.NoClassDefFoundError: com/google/appengine/api/datastore/DatastoreServiceFactory
    at org.himadri.scradiolisteners.server.FetchingServlet.writeDataLowLevel(FetchingServlet.java:47)
    at org.himadri.scradiolisteners.server.FetchingServlet.doGet(FetchingServlet.java:39)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at com.google.apphosting.utils.servlet.ParseBlobUploadFilter.doFilter(ParseBlobUploadFilter.java:102)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.runtime.jetty.SaveSessionFilter.doFilter(SaveSessionFilter.java:35)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.apphosting.runtime.jetty.AppVersionHandlerMap.handle(AppVersionHandlerMap.java:266)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
    at com.google.apphosting.runtime.jetty.RpcRequestParser.parseAvailable(RpcRequestParser.java:76)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at com.google.apphosting.runtime.jetty.JettyServletEngineAdapter.serviceRequest(JettyServletEngineAdapter.java:146)
    at com.google.apphosting.runtime.JavaRuntime$RequestRunnable.run(JavaRuntime.java:447)
    at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:454)
    at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:461)
    at com.google.tracing.TraceContext.runInContext(TraceContext.java:703)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:338)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:330)
    at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:458)
    at com.google.apphosting.runtime.ThreadGroupPool$PoolEntry.run(ThreadGroupPool.java:251)
    at java.lang.Thread.run(Thread.java:679)
Caused by: java.lang.ClassNotFoundException: com.google.appengine.api.datastore.DatastoreServiceFactory
    at com.google.appengine.runtime.Request.process-e485d13152ebc944(Request.java)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
    at org.himadri.scradiolisteners.server.FetchingServlet.writeDataLowLevel(FetchingServlet.java:47)
    at org.himadri.scradiolisteners.server.FetchingServlet.doGet(FetchingServlet.java:39)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:454)
    at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:461)
    at com.google.tracing.TraceContext.runInContext(TraceContext.java:703)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:338)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:330)
    at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:458)
    ... 1 more 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T18:15:10.057

对我来说，这听起来像是两件事之一。

1：您试图在单元测试中运行 GAE 代码，在这种情况下，您需要使用[此页面](https://developers.google.com/appengine/docs/java/tools/localunittesting)中指定的代码。

2：您没有将所有必需的 jar 添加到类路径中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-28T21:27:54.307

问题是我没有`appengine-api-1.0-sdk.jar`在上传的内容中包含：

```
<dependency>
    <groupId>com.google.appengine</groupId>
    <artifactId>appengine-api-1.0-sdk</artifactId>
    <version>1.7.4</version>
    <scope>provided</scope>
</dependency> 
```

通过删除范围：提供的行，问题已经解决。只是没想到云服务器上没有这个API。

# asp.net - 从具有不同列数的多个表创建视图

> ID：14071312
> 
> 赞同：0
> 
> 时间：2012-12-28T14:52:05.127
> 
> 标签：asp.net, sql, sql-server, sql-server-2008

我想将多个表合并为一个`VIEW`。
我的理解是，如果列数不同，我们不能使用`UNION`.
我该如何解决这个问题？

我有以下三个`TABLES`：

1.**表名-相册**

![在此处输入图像描述](../Images/6e33c0d7f290542d3f66255085b8133e.png)

2.**表名-AlbumPictures**

![在此处输入图像描述](../Images/17a42ee7af50d265647b23fe0b22efe9.png)

3.**表名-Stories**

![在此处输入图像描述](../Images/b8665565bfe97a6297b1f7d27deb4bfb.png)

我想要如下 3 个表：（我可以使用 INNER JOINS 来完成这部分 - 如果我错了，请纠正我）

**对于故事：** StoryID、AlbumID、StoryTitle、AlbumCover、Votes

**对于专辑：专辑**ID、专辑名称、专辑封面、投票

**图片：** AlbumPictureID、Votes

我想将从上述查询中检索到的所有行合并为一个`VIEW`并将它们打乱。由于上述每个结果集中的列数不同，我可以将它们组合成一个`VIEW`吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-28T14:54:45.090

因此，在您的 UNION sql 中，要么从具有太多表的 sql 中删除额外的列，要么将具有恒定默认值的额外列添加到具有较少列的表的 sql 中。

根据您的示例输出，添加额外的常量值可能如下所示...

```
Select StoryID id, AlbumID, 
    StoryTitle name, AlbumCover, Votes
From Stories
 UNION
Select AlbumID id, AlbumID, 
     AlbumName name, AlbumCover, Votes
From Albums
   UNION
Select AlbumPictureID id, null AlbumId, 
     null AlbumCover, Votes
From pictures
Order By id, Votes, name 
```

但这让我想问为什么？？？

编辑：要排序，只需使用输出列名添加一个顺序，如上所示....

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T15:15:43.537

为了使用`UNION`or`UNION ALL`运算符，每个查询返回的列数和列的数据类型必须相同。

您可以使用的一个技巧是为某些查询中“缺失”的列返回 NULL 值。

出于性能考虑，如果不需要删除重复项，我建议您使用`UNION ALL`运算符代替运算符。`UNION`

每当我需要做这样的事情时，我通常会在每个查询中包含一个文字，作为该行来自哪个查询的标识符。

例如

```
SELECT 'a'     AS source
     , a.id    AS id
     , a.name  AS name 
  FROM table_a a
 UNION ALL
SELECT 'b'     AS source
     , b.id    AS id
     , NULL    AS name
  FROM table_b b
 ORDER BY 1,2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T15:08:39.677

你可以做这样的事情。*`All three tables are given similar columns with null values`*和*`TableName column is to identify the table which brings the data`*

**编辑：** *我不得不说，这不是正确的方法。我想向您展示如何合并表，但我认为现在根据您的评论编辑它时变得很难看。*

```
--Note: Vote is on all three table, I have selected from Stories
select s.storyId, a.albumId, s.storyTitle, null albumName, 
       ap.albumCover, s.votes , null albumPictureId, 'stories-albums-albumPics' tableName
from Stories s join Albums a on s.albumId = a.albumId 
               join AlbumPictures ap on a.albumid = ap.albumId

UNION ALL 
select null storyId, a.albumID, null storyTitle, a.albumName,
       ap.albumCover, a.votes, null albumPictureId, 'albums-albumPics' tableName
from Albums a join AlbumPictures ap on a.albumid = ap.albumId

UNION ALL --use required table here as well  
select null storyId, null albumId, null storyTitle, null albumName, 
       null albumCover, votes, albumPictureId, 'pictures' tableName 
from Pictures 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-28T15:09:07.200

我想这没什么意义，

```
Select StoryID+'SID' id, AlbumID, 
    StoryTitle name, AlbumCover, Votes
From Stories
 UNION
Select AlbumID+'AID' id, AlbumID, 
     AlbumName name, AlbumCover, Votes
From Albums
   UNION
Select AlbumPictureID+'APID' id, null AlbumId, 
     null AlbumCover, Votes
From pictures 
```

连接 'SID'、'AID' 和 'APID'，当你看到 UI 数据时它会很有意义

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-28T14:57:02.153

```
select * from Stories as s
inner join Albums as a on a.AccountID = s.AccountID
inner join Pictures as p on p.AccountID = s.AccountID 
```

将返回所有，只要`AccountID`在所有 3 个表中定义

仅获取您想要的列的唯一列更改 *

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-30T02:18:25.423

为什么你需要数据都在同一个视图中？只需返回 3 组数据。例如，如果您使用 Web 浏览器作为前端，则可以执行三个查询并将它们作为一组 JSON 返回，例如：

```
{
   Albums: [
      {AlbumID: 1, AlbumName: 'blah', ... },
      {AlbumID: 2, AlbumName: 'gorp', ... } 
   ],
   AlbumPictures: [
      {AlbumID: 1, URL: 'http://fun.jpg'},
      {AlbumID: 1, URL: 'http://fun2.jpg'}
   ],
   Stories [
      {StoryID: 3, StoryTitle: 'Jack & Jill', ... },
      { etc. }
   ]
} 
```

绝对没有编程架构约束迫使您将所有内容放在一个视图中。

# css - 更改突出显示/选定文本的颜色

> ID：14071314
> 
> 赞同：3
> 
> 时间：2012-12-27T11:10:41.253
> 
> 标签：css

我想更改页面上突出显示的文本的颜色。

目前，这就是我处理这个问题的方式：

```
::selection, ::-moz-selection {
    background-color: #ffffff;
} 
```

不幸的是，如果字符串由换行符分隔，我无法更改突出显示文本的背景颜色，如下所示：

```
Hello
  World 
```

这方面的一个例子可以在我当前的 Web 应用程序项目中找到：http: [//term.qt.io](http://term.qt.io)通过执行 CTRL+A（对于大多数浏览器来说是全选）来突出显示所有文本。您会注意到它在某些区域显示为灰色，而在其他区域显示为蓝色。我希望所有突出显示的文本在某些区域都是灰色背景而不是蓝色。

![在此处输入图像描述](../Images/0456ee977eb5da473fe6de848ef9d0dc.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T18:19:30.293

的使用`span`是破坏它的原因。像这样编码它工作正常：

```
<p class="prompt">Welcome to term.
    <br>
    <br>
    login as: <span class="input blinker">&nbsp;</span>
</p> 
```

它是更好的语义海事组织。

# jquery - Kendo Treeview / jQuery：循环遍历无序列表中的孩子的孩子

> ID：14071315
> 
> 赞同：1
> 
> 时间：2012-12-28T14:52:14.783
> 
> 标签：jquery, kendo-ui, kendo-treeview

我正在尝试获取所选节点中所有子节点的 innerText 。

因此，如果用户单击其中一个 UL，我想获取该 UL 和任何子项（UL 和/或 LI）的文本并将其写入控制台。

```
$("#removeNode").click(function (e) {
    var treeview = $("#treeview").data("kendoTreeView");
    var selectedNode = treeview.select();

    console.log(selectedNode.text());
}); 
```

上面的 console.log 以“LLC-A Alpine LLC-B Seminole LLC-C Commons Chase”为例，但我需要将每个单独列出为：

LLC-A
Alpine
LLC-B
塞米诺尔
LLC-C
Commons
Chase

示例无序列表：

```
<ul class="k-group" style="border-style: none;">
<li class="k-item k-first k-last" data-id="BASE" id="BASE" data-uid="31f1f67d-89f9-40e7-b646-29a9597056c7">
    <div class="k-top k-bot"><span class="k-icon k-minus"></span><span class="k-in" data-expanded="true">Test</span></div>
    <ul class="k-group" style="border-style: none;">
        <li class="k-item k-last" data-uid="aec27c8c-ca89-49e8-bfd3-0cede391a55e">
            <div class="k-bot"><span class="k-icon k-minus"></span><span class="k-in" data-expanded="true">LLC-A</span></div>
            <ul class="k-group" style="border-style: none;">
                <li class="k-item" data-uid="78810005-52ad-42ae-92dd-7245b6960eb6">
                    <div class="k-top"><span class="k-icon k-minus"></span><span class="k-in" data-expanded="true">LLC-B</span></div>
                    <ul class="k-group" style="border-style: none;">
                        <li class="k-item" data-uid="bd9866fb-c997-41ae-a4c2-d5576f391a9c">
                            <div class="k-top"><span class="k-icon k-minus"></span><span class="k-in" data-expanded="true">LLC-C</span></div>
                            <ul class="k-group" style="border-style: none;">
                                <li class="k-item" data-uid="31c48db8-c9d2-4f40-b2ba-f42197811e56">
                                    <div class="k-top"><span class="k-icon k-minus"></span><span class="k-in" data-expanded="true">LLC-D</span></div>
                                    <ul class="k-group" style="border-style: none;">
                                        <li class="k-item k-last" data-uid="778c3538-7fbc-4daf-8b7d-b6f3cca5b6fd">
                                            <div class="k-bot"><span class="k-in">Beacon</span></div>
                                        </li>
                                    </ul>
                                </li>
                                <li class="k-item k-last" data-uid="f9e673c0-902c-4ede-b5c4-ccd2232391a4">
                                    <div class="k-bot"><span class="k-in">Willows</span></div>
                                </li>
                            </ul>
                        </li>
                        <li class="k-item" data-uid="c0f42f30-cb84-4f66-a37e-e96a0b0cfcbf">
                            <div class="k-mid"><span class="k-in">Chase</span></div>
                        </li>
                        <li class="k-item k-last" data-uid="7b7053bd-38ee-4312-9e78-484b4da48e0d">
                            <div class="k-bot"><span class="k-icon k-minus"></span><span class="k-in" data-expanded="true">LLC-F</span></div>
                            <ul class="k-group" style="border-style: none;">
                                <li class="k-item" data-uid="c0dad4b9-1839-4dca-ac1f-2fe9fc2df5ed">
                                    <div class="k-top"><span class="k-in">Seminole</span></div>
                                </li>
                                <li class="k-item k-last" data-uid="8c4073be-4b8c-4036-a85c-efe36bda1466">
                                    <div class="k-bot"><span class="k-in">Commons</span></div>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <li class="k-item k-last" data-uid="39644343-4b0c-4be0-be08-701f63096195">
                    <div class="k-bot"><span class="k-in">Alpine</span></div>
                </li>
            </ul>
        </li>
    </ul>
</li> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T16:08:38.373

这就是我最终做的事情，它似乎正在工作......到目前为止。

```
 var lis = $(".k-in", selectedNode);

            for (var i = 0; i < lis.length; i++) {
                var name = lis[i].innerText;
                console.log(name);
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T19:06:13.090

text jQuery 函数将返回 DOM 节点及其所有子节点的内部文本。在这种特殊情况下，您可以只拆分文本，然后将其加入。这就是我的意思：

[http://jsbin.com/edahit/1/edit](http://jsbin.com/edahit/1/edit)

# java - Java 在 C 中是否有类似 sizeof() 的运算符？

> ID：14071317
> 
> 赞同：0
> 
> 时间：2012-12-28T14:52:42.220
> 
> 标签：java, sizeof

> **可能重复：**
> [Java 中是否有类似 sizeof 的方法？](https://stackoverflow.com/questions/2370288/is-there-any-sizeof-like-method-in-java)

Java 在 C 中是否有类似 sizeof() 的运算符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T14:56:55.213

答案是**否定**的。

但是，有一些简单的方法可以实现这一目标。编写自己的 sizeof 方法。

```
public static int sizeof(Class cl)
{
    if (cl == Integer.class || cl == int.class) return 4;
    if (cl == Character.class || cl == char.class) return 2;
    //...
} 
```

对象的大小将取决于 JVM 实现。Java [SizeOf](http://sizeof.sourceforge.net)项目可以正确处理所有情况。

# php - 跟踪 ajax 错误并提醒它

> ID：14071319
> 
> 赞同：1
> 
> 时间：2012-12-28T14:52:46.767
> 
> 标签：php, jquery, ajax

我在 jquery 中使用 ajax 调用来处理一些数据库操作，在 ajax 代码中我有一个关于错误属性的警报，它给出了我的错误消息，但我想知道错误是什么？

这是我的ajax代码

```
 $.ajax(
    {
            type: "POST",
            url: "server/assign_gifts_get_usr_details.php",
            data: "",
            success: function(xml)
            {
                    alert(xml);
            },
            error: function()
            {
                alert("Error, Please try again");   
            }
    }); 
```

弹出此警报， `alert("Error, Please try again");`

但我想知道错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T14:54:09.763

好吧，如果它到达代码的错误部分，则页面**无法**正确加载。

这基本上就是错误。

还有一些参数传递给你也可以使用的错误回调。

[查看文档](http://api.jquery.com/jQuery.ajax/)

错误回调获取传入的以下参数：`(jqXHR, textStatus, errorThrown)`
来自文档：

> 请求失败时调用的函数。该函数接收三个参数：jqXHR（在 jQuery 1.4.x 中，XMLHttpRequest）对象，一个描述发生的错误类型的字符串和一个可选的异常对象（如果发生）。第二个参数（除了 null）的可能值是“timeout”、“error”、“abort”和“parsererror”。发生 HTTP 错误时，errorThrown 会接收 HTTP 状态的文本部分，例如“未找到”或“内部服务器错误”。从 jQuery 1.5 开始，错误设置可以接受一个函数数组。每个函数都会被依次调用。注意：跨域脚本和 JSONP 请求不调用此处理程序。这是一个 Ajax 事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T14:57:09.143

这样做，以获取错误详细信息。

```
error: function(jqXHR, textStatus, errorThrown)
{
  alert("Error: "+errorThrown+" , Please try again");   
} 
```

# ios - 沿 x 和 y 轴旋转

> ID：14071320
> 
> 赞同：1
> 
> 时间：2012-12-28T14:52:53.007
> 
> 标签：ios, opengl-es-2.0, powervr-sgx

我正在为我的 opengl-es 2.0 3D 应用程序使用 GLKit 和 PowerVR 库。3D 场景加载了几个模拟车库环境的网格。我在车库中央有一辆车。我正在尝试向应用程序添加触摸处理，用户可以在其中旋转房间（例如，查看汽车周围的所有 4 面墙）。我也想允许在 x 轴上旋转，尽管限制在一个很小的范围内。基本上，他们可以从车顶的一点点看到地板的上方。

我可以在 Y 或 X 上旋转，但不能同时旋​​转。一旦我在两个轴上旋转，汽车就会偏离轴。汽车不再与相机保持水平。我希望我能更好地解释这一点，但希望你们能理解。

这是我的触摸实现：

```
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {

    UITouch * touch = [touches anyObject];
    CGPoint location = [touch locationInView:self.view];    
    CGPoint lastLoc = [touch previousLocationInView:self.view];
    CGPoint diff = CGPointMake(lastLoc.x - location.x, lastLoc.y - location.y);

    float rotX = -1 * GLKMathDegreesToRadians(diff.x / 4.0);
    float rotY = GLKMathDegreesToRadians(diff.y / 5.0);

    PVRTVec3 xAxis = PVRTVec3(1, 0, 0);
    PVRTVec3 yAxis = PVRTVec3(0,1,0);

    PVRTMat4 yRotMatrix, xRotMatrix;

    // create rotation matrices with angle
    PVRTMatrixRotationXF(yRotMatrix, rotY);
    PVRTMatrixRotationYF(xRotMatrix, -rotX);

    _rotationY = _rotationY * yRotMatrix;
    _rotationX = _rotationX * xRotMatrix;
} 
```

这是我的更新方法：

```
- (void)update {

    // Use the loaded effect
    m_pEffect->Activate();

    PVRTVec3    vFrom, vTo, vUp;
    VERTTYPE    fFOV;
    vUp.x = 0.0f;
    vUp.y = 1.0f;
    vUp.z = 0.0f;

    // We can get the camera position, target and field of view (fov) with GetCameraPos()
    fFOV = m_Scene.GetCameraPos(vFrom, vTo, 0);

    /*
     We can build the world view matrix from the camera position, target and an up vector.
     For this we use PVRTMat4LookAtRH().
     */
    m_mView = PVRTMat4::LookAtRH(vFrom, vTo, vUp);

    // rotate the camera based on the users swipe in the X direction (THIS WORKS)
    m_mView = m_mView * _rotationX;

    // Calculates the projection matrix
    bool bRotate = false;
    m_mProjection = PVRTMat4::PerspectiveFovRH(fFOV, (float)1024.0/768.0, CAM_NEAR, CAM_FAR, PVRTMat4::OGL, bRotate);
} 
```

我尝试先将新的 X 旋转矩阵与当前场景旋转相乘，然后再将新的 Y 旋转矩阵相乘。我尝试了相反的方法，认为乘法的顺序是我的问题。那没有帮助。然后我尝试在乘以当前旋转之前将新的 X 和 Y 旋转矩阵加在一起，但这也不起作用。我觉得我很接近，但在这一点上我只是没有想法。

你们能帮忙吗？谢谢。-瓦莱丽

**更新：**为了解决这个问题，我试图简化一点。我已经更新了上面的代码，删除了 Y 旋转范围内的任何限制。基本上，我根据用户在屏幕上的滑动来计算 X 和 Y 旋转。

如果我理解正确，我想我想用 _rotationX 的计算来旋转视图矩阵（相机/眼睛）。

我想我需要使用 World 矩阵（原点 0,0,0）进行 _rotationY 计算。我会试着得到一些我在说什么的图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T18:45:17.603

哇，搞定了！我用 X 旋转矩阵旋转了视图矩阵（由 LookAt 方法创建）。我用 Y 旋转矩阵旋转了模型视图矩阵。

这是修改后的更新方法：

```
- (void)update {

    PVRTVec3    vFrom, vTo, vUp;
    VERTTYPE    fFOV;

    // We can get the camera position, target and field of view (fov) with GetCameraPos()
    fFOV = m_Scene.GetCameraPos(vFrom, vTo, 0);

    /*
     We can build the world view matrix from the camera position, target and an up vector.
     For this we use PVRTMat4LookAtRH().
     */
    m_mView = PVRTMat4::LookAtRH(vFrom, vTo, PVRTVec3(0.0f, 1.0f, 0.0f));

    // rotate on the X axis (finger swipe Y direction)
    m_mView = m_mView * _rotationY;

    // Calculates the projection matrix
    m_mProjection = PVRTMat4::PerspectiveFovRH(fFOV, (float)1024.0/768.0, CAM_NEAR, CAM_FAR, PVRTMat4::OGL, false);

} 
```

这是修改后的触摸移动方法：

```
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {

    UITouch * touch = [touches anyObject];
    CGPoint location = [touch locationInView:self.view];    
    CGPoint lastLoc = [touch previousLocationInView:self.view];
    CGPoint diff = CGPointMake(lastLoc.x - location.x, lastLoc.y - location.y);

    float rotX = -1 * GLKMathDegreesToRadians(diff.x / 2.5);
    float rotY = GLKMathDegreesToRadians(diff.y / 2.5);

    PVRTMat4 rotMatrixX, rotMatrixY;

    // create rotation matrices with angle
    PVRTMatrixRotationYF(rotMatrixX, -rotX);
    PVRTMatrixRotationXF(rotMatrixY, rotY);

    _rotationX = _rotationX * rotMatrixX;
    _rotationY = _rotationY * rotMatrixY;

} 
```

# ruby-on-rails - 帖子属于用户

> ID：14071330
> 
> 赞同：1
> 
> 时间：2012-12-28T14:53:47.393
> 
> 标签：ruby-on-rails, ruby

我有一个我想属于用户的帖子模型。当我这样做时，我无法在视图中引用任何用户的东西。我正在使用设计。

帖子模型：

```
class Post < ActiveRecord::Base
  attr_accessible :album, :artist, :song
  belongs_to :user
  validates_presence_of :album, :artist, :song
end 
```

用户模型：

```
class User < ActiveRecord::Base
  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :username, :password, :password_confirmation, :remember_me
  has_many :posts

  validates_uniqueness_of :username
  validates_presence_of :username, :password, :password_confirmation
end 
```

我试图用`<%= post.user.username %>`. 我也试过`<%= post.user%>`和`<%= post.user.name %>`。

**更新**：我添加`user_id`到表中。但是，当我发帖时，并没有设置`username`和值。`user_id`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T16:25:14.887

谢谢大家，我修好了。[这是我的创建动作](http://pastie.org/5589383)。我计划重构它以使用工厂模式。

```
@post = Post.new(params[:post])
@post.username = current_user.username
@post.user_id = current_user.id
if @post.save
  redirect_to action: "index"
  @posts = Post.find(:all)
else
  render action: 'new'
end 
```

# ruby-on-rails - 安装带有本机扩展的 linecache19 (0.5.12)

> ID：14071331
> 
> 赞同：1
> 
> 时间：2012-12-28T14:53:48.483
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

当我运行 bundle install 命令时，我必须运行一个现有项目。它挂了将近半个小时，仍然没有完成 bundle install 命令。我使用的是 ruby​​1.9.3p327，我的 rails 版本是 3.2.9和项目的gem文件

```
source 'https://rubygems.org'

gem 'rails', '3.2.8'
gem 'pg', '0.14.1'

gem 'compass', git: 'git://github.com/chriseppstein/compass.git'
gem 'sass-rails',   '~> 3.2.3'
gem 'jquery-rails', '~> 2.0.0'

gem 'devise', '~> 2.0.0'
gem 'bootstrap-sass', '2.1.1.0'
gem 'simple_form', '2.0.4'

#gem 'refinerycms', '2.0.8'
gem 'refinerycms-dashboard'
gem 'refinerycms-images'
gem 'refinerycms-pages'
gem 'refinerycms-resources'

gem 'refinerycms-bootstrap', git: 'git://github.com/ghoppe/refinerycms-bootstrap.git'
gem 'rest-client', '1.6.7', require: 'rest_client'
gem 'hashie', '1.2.0'

gem 'faye'
gem 'restforce'

# gems from old site's gemfile
gem 'databasedotcom' # we may get rid of this
gem 'databasedotcom-rails' # we may get rid of this
gem 'haml'
gem 'will_paginate'
gem 'httparty'

gem 'ruby-openid', :git => "git://github.com/mbleigh/ruby-openid.git"
gem 'openid_active_record_store'
gem 'omniauth-twitter'
gem 'omniauth-github'
gem 'omniauth-facebook'
gem 'omniauth-linkedin'
gem 'omniauth-openid'
gem 'omniauth-salesforce'
gem 'savon'

gem 'redis'
gem 'aws-s3', :require => 'aws/s3' # no longer needed?
gem 'thin'
gem 'resque', :git => 'http://github.com/hone/resque.git', :branch => 'keepalive', :require => 'resque/server'
gem "recaptcha", :require => "recaptcha/rails"
gem 'flash_messages_helper'
gem 'remote_syslog_logger'
gem 'dalli'
gem 'encryptor'
gem 'airbrake'

gem 'chosen-rails'
gem 'fog'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'coffee-rails', '~> 3.2.1'
  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby
  gem 'uglifier', '>= 1.0.3'
end

group :development, :test do
  gem 'annotate', '2.4.0'
  gem 'guard'
  gem 'guard-bundler'
  gem 'guard-rspec'
  gem 'spork'
  gem "guard-spork"
  gem 'growl'
  gem 'ruby-debug19'
  gem 'sqlite3'
  gem 'rspec-rails'
  gem 'sextant'
  gem 'quiet_assets'  
  gem 'vcr'
  gem 'rb-fsevent', '~> 0.9.1'
  gem 'sql-logging'
end

group :test do
  # Pretty printed test output
  gem 'turn', :require => false
  gem "minitest"
  gem "rake"
  gem 'webmock'
  gem "mocha"
end 
```

并且它停留很长时间的线是

安装带有本机扩展的 linecache19 (0.5.12)

任何人都可以帮助如何安装这个项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T16:43:08.373

使用最新的 rubies 1.9+，一些 gem 喜欢`ruby-debug`并且`linecache`安装起来非常痛苦。但是，替代方案`debugger`通常`debugger-linecache`可以解决问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T15:30:21.317

我发现它挂了很长时间的原因是由于某种原因它无法找到Ruby源（它在构建本机扩展时需要某些头文件），所以它再次下载它。由于包相当大，服务器速度很慢且负载很重，因此需要很长时间（30 分钟以上），并且由于没有反馈，整个事情似乎已经挂起。

如果您在执行此操作时使用 ^C 闯入，您可能会收到如下错误消息：

```
/home/xxxx/.rvm/rubies/ruby-1.9.3-p392/bin/ruby extconf.rb
checking for vm_core.h... no
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
        --with-opt-dir
        --with-opt-include
        --without-opt-include=${opt-dir}/include
        --with-opt-lib
        --without-opt-lib=${opt-dir}/lib
        --with-make-prog
        --without-make-prog
        --srcdir=.
        --curdir
        --ruby=/home/xxxx/.rvm/rubies/ruby-1.9.3-p392/bin/ruby
        --with-ruby-dir
        --without-ruby-dir
        --with-ruby-include
        --without-ruby-include=${ruby-dir}/include
        --with-ruby-lib
        --without-ruby-lib=${ruby-dir}/lib
Requesting http://ftp.ruby-lang.org/pub/ruby/1.9/ruby-1.9.3-p392.tar.gz
Downloading http://ftp.ruby-lang.org/pub/ruby/1.9/ruby-1.9.3-p392.tar.gz 
```

底部的两行是正在发生的事情的线索。

我认为您应该能够在“gem install”或“bundle config”上使用“--with-ruby-include”选项来强制它使用您已经拥有的源，但在我的（有限）测试中似乎没有用，一旦我意识到发生了什么，我就没有深入挖掘。

以下是一些提到这一点的链接 - 希望你会比我有更多的运气：

[通过 rvm](https://stackoverflow.com/questions/6650567/installing-linecache19-for-ruby-1-9-2-via-rvm)
[https://github.com/mark-moseley/ruby-debug/wiki/Installation%3A-command-line-version为 Ruby 1.9.2 安装 linecache19](https://github.com/mark-moseley/ruby-debug/wiki/Installation%3A-command-line-version)

# objective-c - 无法将 JSON 放入 NSDictionary

> ID：14071341
> 
> 赞同：2
> 
> 时间：2012-12-28T14:54:19.810
> 
> 标签：objective-c, json, nsdictionary

我正在尝试将我的 JSON 转换为`NSDictionary`. 我正在执行以下操作：

```
 NSData *innerData = [json objectForKey:@"data"];
                NSLog(@"Inner Description %@", innerData);

                NSError* error;
                NSDictionary* json = [NSJSONSerialization
                                      JSONObjectWithData:innerData 
                                      options:kNilOptions
                                      error:&error];
                NSLog(@"dict: %@",json); 
```

由于此错误，它在创建字典时不断崩溃。

```
-[__NSCFDictionary bytes]: unrecognized selector sent to instance 0x1e8d6100 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-28T14:58:59.020

innerData 在运行时是一个 NSDictionary ，而不是您期望的 NSData 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T14:59:00.717

`[json objectForKey:@"data"]`已经是字典而不是 NSData。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T14:59:23.410

您的对象`json`可能正在返回一个`NSDictionary`on`[json objectForKey:@"data"];`

检查您的实际对象类型`innerData`

# javascript - JavaScript：使用 IF 语句和 navigator.onLine 来检查互联网连接

> ID：14071342
> 
> 赞同：1
> 
> 时间：2012-12-28T14:54:19.483
> 
> 标签：javascript, networking, navigator

我正在使用以下脚本来检查互联网连接。如果结果是“在线”或结果是“离线”，我想要做点什么。

```
<body>
  <p><span id="status">checking...</span></p>

<script>
var statusElem = document.getElementById('status')

setInterval(function () {
  statusElem.className = navigator.onLine ? 'online' : 'offline';
  statusElem.innerHTML = navigator.onLine ? 'online' : 'offline';  
}, 250);
</script>
</body> 
```

有任何想法吗？基本上我想使用一个 IF 语句： IF online then, else ..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T15:20:56.993

使用您的间隔代码：

```
setInterval(function () {
    if(navigator.onLine) {
        statusElem.className = 'online';
        statusElem.innerHTML = 'online';
    } else {
        statusElem.className = 'offline';
        statusElem.innerHTML = 'offline';
   }
}, 250); 
```

[`online`但是，您可以通过使用/`offline`事件侦听](https://developer.mozilla.org/en-US/docs/Online_and_offline_events)器更优雅地做同样的事情：

```
window.addEventListener("offline", function () {
    statusElem.className = 'offline';
    statusElem.innerHTML = 'offline';
}, false);

window.addEventListener("online", function () {
    statusElem.className = 'online';
    statusElem.innerHTML = 'online';
}, false); 
```

# jquery - jquery移动网格视图和列表视图在同一页面上

> ID：14071347
> 
> 赞同：1
> 
> 时间：2012-12-28T14:54:35.660
> 
> 标签：jquery, html, listview, jquery-mobile, gridview

jQuery Mobile 的新手。我有一个股票清单，我希望能够在同一页面上更改视图。所以我有我的列表，然后我希望能够在页面顶部有两个按钮：

*   列表视图（默认）
*   网格视图

然后我可以根据单击的按钮更改库存视图。我有一个工作示例：

这是[一个示例 URL](http://themeforest.net/item/bolt-jquery-mobile-website/full_screen_preview/2959847)视图预览，然后单击“投资组合”

怎么可能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T15:18:17.187

尝试这个：

**CSS**

```
#Container ul { list-style: none; alignment-adjust:central; }
#Container .list li { //your list specs }
#Container .grid li { //your grid specs }​ 
```

**HTML**

```
<div data-role="content" id="Container">
    <ul data-role="listview" class="list">
        <li>list1</li>
        <li>list2</li>
        <li>list3</li>
    </ul>
    <ul data-role="listview" class="grid">
        <li>grid1</li>
        <li>grid2</li>
        <li>grid3</li>
        <li>grid4</li>
    </ul>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T14:59:43.353

我认为你可以通过最简单的方式做到这一点。`toggle`只需在您的站点和它们中添加列表视图和网格视图。

# python - Python：如果字典键在行

> ID：14071348
> 
> 赞同：1
> 
> 时间：2012-12-28T14:54:41.500
> 
> 标签：python, rss, python-2.7

找到了关于如何检查字符串列表是否在一行中的好答案 如何检查一行是否包含 [列表中的一个字符串？](https://stackoverflow.com/questions/8583615/python-check-if-a-line-has-one-of-the-strings-in-a-list)

但是尝试用字典中的键做类似的事情似乎对我没有用：

```
import urllib2

url_info = urllib2.urlopen('http://rss.timegenie.com/forex.xml')
currencies = {"DKK": [], "SEK": []}
print currencies.keys()
testCounter = 0

for line in url_info:
    if any(countryCode in line for countryCode in currencies.keys()):
        testCounter += 1
    if "DKK" in line or "SEK" in line:
        print line
print "testCounter is %i and should be 2 - if not debug the code" % (testCounter) 
```

输出：

```
['SEK', 'DKK']
<code>DKK</code>
<code>SEK</code>
testCounter is 377 and should be 2 - if not debug the code 
```

认为也许我的问题是因为***.keys()***给了我一个数组而不是一个列表..但还没有弄清楚如何转换它..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T15:13:40.640

改变：

```
any(countryCode in line for countryCode in currencies.keys()) 
```

到：

```
any([countryCode in line for countryCode in currencies.keys()]) 
```

您的原始代码使用生成器表达式，而（我认为）您的意图是列表理解。请参阅：[生成器表达式与列表理解](https://stackoverflow.com/questions/47789/generator-expressions-vs-list-comprehension)

**更新**：我发现使用导入了 pylab 的 ipython 解释器得到了与您相同的结果（377 个计数与预期的 2 个计数）。我意识到问题在于“任何”来自 numpy 包，该包旨在处理数组。接下来，我加载了一个没有 pylab 的 ipython 解释器，这样 'any' 来自**builtin**。在这种情况下，您的原始代码有效。因此，如果您使用 ipython 解释器类型：

```
help(any) 
```

并确保它来自内置模块。如果是这样，您的原始代码应该可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T15:47:16.357

这不是检查 xml 文件的好方法。

1.  它很慢。您正在进行潜在的 N*M 子字符串搜索，其中 N 是行数，M 是键数。
2.  XML 不是面向行的文本格式。您的子字符串搜索也可以找到属性名称或元素名称，这可能不是您想要的。如果 XML 文件碰巧将其所有元素放在没有空格的一行上（这对于机器生成和处理的 XML 很常见），那么您得到的匹配项将比您预期的要少。

如果您有面向行的文本输入，我建议您从键列表中构造一个正则表达式：

```
import re
linetester = re.compile('|'.join(re.escape(key) for key in currencies))

for match in linetester.finditer(entire_text):
    print match.group(0)

#or if entire_text is too long and you want to consume iteratively:

for line in entire_text:
        for match in linetester.find(line):
            print match.group(0) 
```

然而，既然你有 XML，你应该使用一个实际的 XML 处理器：

```
import xml.etree.cElementTree as ET

for elem in forex.findall('data/code'):
    if elem.text in currencies:
        print elem.text 
```

如果您只对存在的代码感兴趣并且不关心您可以使用 set intersection 的特定条目：

```
codes = frozenset(e.text for e in forex.findall('data/code'))

print codes & frozenset(currencies) 
```

# opengl - 如何取消阻塞的 OpenGL 调用

> ID：14071350
> 
> 赞同：0
> 
> 时间：2012-12-28T14:54:44.700
> 
> 标签：opengl, glsl, gpgpu

我正在研究使用 OpenGL + GLSL 进行 GPGPU 编程。一个问题是，如果您有一个着色器需要很长时间才能完成，那么取消它似乎是不可能的。

设置完所有内容后，我发出最终`glReadPixels`调用，该调用会阻塞，直到所有像素都被渲染到帧缓冲区。根据着色器的不同，这可能需要很长时间，甚至几秒钟。有没有办法取消呼叫（从另一个线程）甚至查询进度？如果在着色器中设置无限循环会发生什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T10:06:46.567

您可以使用不阻塞的 PixelBufferObjects 而不是 glReadPixels。glReadPixels 将等待（在您的主线程中）结果，但 PBO 将继续......稍后在代码中的某处您可以检查 PBO 中的数据是否可用。

[http://www.songho.ca/opengl/gl_pbo.html](http://www.songho.ca/opengl/gl_pbo.html)

[http://www.opengl.org/wiki/Pixel_Buffer_Object](http://www.opengl.org/wiki/Pixel_Buffer_Object)

如果您需要一些更高级的计算，那么您可能想要使用 OpenCL，这将为您提供更大的灵活性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T10:08:49.593

> 如果在着色器中设置无限循环会发生什么？

我想你会得到视频驱动程序的崩溃。

# angularjs - 如何使用路由更改时已经存在的 AngularJS 控制器？

> ID：14071353
> 
> 赞同：1
> 
> 时间：2012-12-28T14:55:04.140
> 
> 标签：angularjs

我有这个html：

```
<div ng-controller="MyCtrl">
  <div ng-view></div>
</div>

<script type="text/ng-template" id="/a">
  // SomeHtml with Angular templates
</script>

<script type="text/ng-template" id="/b">
  // SomeHtml with Angular templates
</script> 
```

和：

```
angular.module('ngView', [], function($routeProvider, $locationProvider) {
  $routeProvider.when('/a', {
    templateUrl: '/a',
    controller: MyCtrl
  });

  $routeProvider.when('/b', {
    templateUrl: '/b',
    controller: MyCtrl
  });
}); 
```

控制器“MyCtrl”有一些引导代码，在第一次加载 html 时调用，这个引导代码设置了一些“/a”和“/b”模板都应该使用的状态。模板“/a”和“/b”将呈现在引导期间获得的数据以不同方式呈现。

我希望没有控制器并且仍然能够从我的模板访问 MyCtrl 范围。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T16:39:51.960

我会删除包装控制器，并让我的路线每个都有自己的控制器。如果这些控制器需要共享数据，那么我会将保存这些数据的专用对象添加到控制器的依赖项列表中。这是一个示例：[https ://stackoverflow.com/a/9407953/410102](https://stackoverflow.com/a/9407953/410102)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T16:40:20.817

Angular 网站旁边说您应该指向一些不需要执行此操作的控制器，并且如果具有该`ng-view`属性的标签被包装到另一个具有 a 的标签中，`ng-controller`那么呈现的模板将能够像往常一样访问父范围。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T16:09:49.550

您的模板控制器将有一个父控制器（您所谓的包装控制器），它继承。因此，您可以从包装控制器执行功能和访问属性。

```
function TemplateAController($scope) {
 ...
}

function WrappingController($scope) {
   $scope.execute = function() {
      ...
   }
    ...
   } 
```

在您的模板中：

```
<a ng-click="execute()">Execute</a> 
```

# zend-framework - 从 Zend_Db_Adapter::exec() 获取错误消息

> ID：14071356
> 
> 赞同：0
> 
> 时间：2012-12-28T14:55:18.657
> 
> 标签：zend-framework, database-versioning

我正在编写一个脚本来简化我们的数据库版本控制。为了做到这一点，我们有许多文件（每个文件至少包含一个语句，有几个有超过一百个）包含我们需要更新使用分号分隔的模式的 SQL 查询。它在 90% 的时间里都能正常工作，只是偶尔其中一个语句会失败，而且我们在修复这些问题时遇到了问题。发生这种情况时，我们必须删除数据库并手动将每个 SQL 语句复制并粘贴到失败的文件中以对其进行测试。某些查询会导致异常，但对于某些查询，该函数仅返回 1。

我正在使用以下代码，但我不知道如何找到有问题的语句：

```
$db = Zend_Db_Table::getDefaultAdapter();

try{
    // loop through all the files
    foreach($files as $file){
        echo 'Running ', $file, PHP_EOL;

        // use the connection directly to load sql in batches
        if($db->exec(file_get_contents($dir . $file)) == 1){
            // *how do I get the problem line here?*
            return false;
        }

        $db->exec('INSERT INTO database_history SET file = "' . $file .'";');
    }
} catch (Exception $e) {
    echo 'AN ERROR HAS OCCURED:' . PHP_EOL;
    echo $e->getMessage() . PHP_EOL;
    return false;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T15:29:50.340

像下面的例子一样初始化一个计数器变量。每次迭代将其递增一。出现错误时输出计数器 var。我`$line`在这个例子中调用了 var。在`exit`var 输出后终止脚本。如果你不想这样，你可以把它排除在外。

```
$line = 0;
foreach($files AS $file){
    $line++;
    // ...
     if($db->exec(file_get_contents($dir . $file)) == 1){
        echo '<pre>'; print_r($line); echo '</pre>'; exit;
        return false;
    }
    // ...
} 
```

# java - Java如何在java中解析uint8？

> ID：14071361
> 
> 赞同：11
> 
> 时间：2012-12-28T14:55:41.747
> 
> 标签：java, bit-manipulation

我有一个来自 UDP 数据包的**uint8** *（无符号 8 位整数） 。*Java 只使用签名的原语。如何用java正确解析这个数据结构？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-28T14:58:23.330

只需将其作为字节读取，然后转换为 int。

```
byte in = udppacket.getByte(0); // whatever goes here
int uint8 = in & 0xFF; 
```

需要位掩码，否则，位 8 设置为 1 的值将被转换为负整数。例子：

```
This:                                   10000000
Will result in: 11111111111111111111111110000000 
```

因此，当您随后对其应用位掩码 0xFF 时，前导 1 将被取消。供你参考：`0xFF == 0b11111111`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-28T14:57:43.247

`0xFF & number`将数字视为无符号字节。但结果类型是`int`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-28T14:57:46.630

您可以将 8 位存储在 a`byte` 如果您确实需要将其转换为无符号值（通常不需要），您可以使用掩码

```
byte b = ...
int u = b & 0xFF; // unsigned 0 .. 255 value 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-28T14:58:05.320

你可以这样做：

```
int value = eightBits & 0xff; 
```

运算符（与 Java 中的`&`所有整数运算符一样）向上转换`eightBits`为`int`（通过对符号位进行符号扩展）。由于这会将大于 0x7f 的值转换为负值`int`，因此您需要屏蔽除最低 8 位之外的所有值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-28T14:59:04.323

您可以简单地将其解析为 a`short`或 an `int`，它们有足够的范围来保存无符号字节的所有值。

# python - 使用python通过单行代码更改目录信息

> ID：14071364
> 
> 赞同：2
> 
> 时间：2012-12-28T14:56:15.997
> 
> 标签：python

我有这个代码来更改 python 中的目录信息。我想将 '/a/b/c' 更改为 '/x/b/c'。

```
import os

x = "/a/b/c"
y = x.split(os.sep)
y[1] = 'x'
os.sep.join(y) 
```

现在我只想知道python是否可以使它成为单线。我不能简单地使用`os.sep.join(x.split(os.sep)[1] = 'x')`它，因为它会导致语法错误。python中的其他选项可能是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T15:02:36.430

```
os.sep.join('x' if idx == 1 else element
            for idx, element in enumerate(x.split(os.sep))) 
```

结果：

```
'/x/b/c' 
```

说明：`enumerate`将 的每个元素`x.split(os.sep)`与其索引配对。`'x' if idx == 1 else element`如果它是第 1 个元素，则用 'x' 替换该元素，否则保持原样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T15:03:01.377

这可能是相当低效的：

```
y = os.sep.join([x.split(os.sep)[0]] + ['x'] + x.split(os.sep)[2:]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T15:20:40.253

这似乎也有效：

```
y = os.sep + 'x'+ x[2:] 
```

# mysql - Mysql并在日期时间列中插入''（空不为空）

> ID：14071368
> 
> 赞同：1
> 
> 时间：2012-12-28T14:56:46.863
> 
> 标签：mysql

我有一个系统，可以将一些日期时间字段作为空字符串 '' 插入，**它可以工作**。但是，我尝试在另一台机器上安装，但它失败了。

它返回

```
Error Code: 1292\. Incorrect datetime value: '' for column 'MyDate' at row 1 0.000 sec 
```

顺便说一句，我无法更改系统，并且两个系统（工作系统和新系统）都在 Windows 上运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T15:01:29.220

禁用[STRICT_MODE](http://dev.mysql.com/doc/refman/5.0/en/server-sql-mode.html)（在 Windows 安装中默认启用）

# ruby-on-rails - 狂欢中的 CheckoutController#edit 在哪里？

> ID：14071372
> 
> 赞同：3
> 
> 时间：2012-12-28T14:57:00.940
> 
> 标签：ruby-on-rails, ruby, gem, spree

我需要使用`edit`CheckoutController 的操作，我在服务器日志中看到它，我在[文档](http://edgeguides.spreecommerce.com/checkout.html)中看到它，但我在 gem 的代码中找不到它。

魔法在哪里？大礼包版本是 1.2.2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T15:05:32.843

`spree_core`你可以在宝石里面找到它

```
spree_core-1.3.0/app/controllers/spree/checkout_controller.rb 
```

您可能会发现使用诸如[ack](http://betterthangrep.com/)之类的工具来搜索文件很有用。我通过`ack-grep CheckoutController`在 gems 目录中运行找到了它。

请注意，这`ack-grep`只是`ack`避免 ubuntu 上的名称冲突的别名。

# c++ - 无法在 C++ 中注册 mcast 地址

> ID：14071374
> 
> 赞同：1
> 
> 时间：2012-12-28T14:57:01.903
> 
> 标签：c++, vmware, cisco

我正在为 centos 上的 C++ 中的路由算法协议工作。centos 在 vmware 上运行。当我的接口卡在 vmware 中以桥接模式连接时，我能够注册 mcast 地址 224.0.0.9。但是当我使用 gns3 cloud 将我的 centos 与 cisco 路由器连接时，我遇到了错误

所以总体拓扑结构就像

cenots++bridgemode-----bridgemode+centos //可以加入群组

centos+--vmnet1-----------+vmnet1(gns3cloud---cisco router) //无法加入群组

```
h=gethostbyname("224.0.0.9");
if(h==NULL) {
     cout << "unknown group address"<<endl; 
  exit(1);
} 
```

if memcpy((char *) &mcastAddr.sin_addr.s_addr,h->h_addr_list[0],h->h_length);

```
mreq.imr_multiaddr.s_addr=mcastAddr.sin_addr.s_addr;   //
mreq.imr_interface.s_addr=htonl(INADDR_ANY);

int mc = setsockopt(soc,IPPROTO_IP,IP_ADD_MEMBERSHIP,(void *) &mreq, sizeof(mreq));
if(mc<0) {
 cout <<"unable to join MCAST GROUP"<<endl;
 printf("ERROR: %s\n", strerror(errno));
exit(1); 
```

}

错误返回。错误：没有这样的设备

ps# 只有一个接口 eth0 可以用来 ping cisco 路由器

欢迎任何指针

谢谢

# types - 程序正在处理整数，但不是双精度数

> ID：14071376
> 
> 赞同：1
> 
> 时间：2012-12-28T14:57:08.877
> 
> 标签：types, integer, double

我应该输入实数，直到遇到输入 0，然后程序应该终止。我让这段代码适用于整数数据类型：

```
#include<stdio.h>

int main()
{
    int i;
    int a[60];

    for(i=0;i<60;i++)
        a[i]=-1;

    for(i=0;;i++)
    {
        scanf("%d",&a[i]);
        if(a[i]==0)
            break;
    }

    return 0;
} 
```

但是当我在双数据类型上尝试相同的代码时，在输入 0 时不会发生程序终止。这是代码：

```
#include<stdio.h>

int main()
{
    int i;
    double a[60];

    for(i=0;i<60;i++)
        a[i]=-1.0;

    for(i=0;;i++)
    {
        scanf("%f",&a[i]);
        if(a[i]==0.0)
            break;
    }

    return 0;
} 
```

有人会费心解释为什么会这样吗？我想不出任何理由。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T15:03:15.790

一方面，您的解析字符串不正确：对于双精度，它应该是“%lf”，而不是用于浮点数的“%f”。

其次，通常比较浮点类型是否相等容易出错，因为它们本质上是近似的，尽管在这种情况下，0 是一个可以精确表示的值。

# c - c - 初始化一个指向函数的指针数组

> ID：14071378
> 
> 赞同：7
> 
> 时间：2012-12-28T14:57:15.630
> 
> 标签：c, pointers

我想初始化一个大小为 5 的指针数组，该数组包含指向没有参数且返回 int 的函数的指针（可以是任何满足这些要求的函数）。

这是我迄今为止尝试过的，但出现语法错误：

```
int (*func)() fparr[5] = int (*func)(); 
```

这种语法有什么问题？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-28T15:00:07.887

如果调用要作为数组默认内容提供的函数`func`，则

1.  你最好使用 a `typedef`,
2.  你必须使用数组初始化器

考虑：

```
typedef int (*IntFunc)(void);
IntFunc fparr[5] = { func, func, func, func, func }; 
```

或者可读性较差的方式，如果您希望避免`typedef`：

```
int (*fparr[5])(void) = { func, func, func, func, func }; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-28T15:00:29.677

因为您实际上并没有初始化函数指针数组...尝试：

```
int (*fparr[5])(void) = { func1, func2, func3, func4, func5 }; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-28T15:02:33.687

**第1步：**

将函数的签名定义为类型`FN`：

```
typedef int (*FN)(); 
```

**第2步：**

`FN`用签名定义 5 个函数：

```
int f1(void) { ; }
int f2(void) { ; }
... 
```

**第 3 步：**

定义并初始化一个包含 5 个类型函数的数组`FN`：

```
FN fparr[5] = {f1,f2,f3,f4,f5} 
```

* * *

**否则**：

如果您不想定义单独的签名，您可以这样做——如前所述——所以：

```
 int ((*)fpar []) () = {f1,f2, ...} 
```

如果您在声明时知道数组中的函数数量，则无需编写`5`，如果您在声明的同一行初始化数组，编译器会为您分配此内存。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-28T15:11:14.087

嗯，我来晚了……

```
#include <stdio.h>

int fun0()
{
    return 0;
}

int fun1()
{
    return 1;
}

int fun2()
{
    return 2;
}

int main(int argc, char* argv[])
{
    int (*f[]) (void) = {fun0, fun1, fun2};
    printf("%d\n", f[0]());
    printf("%d\n", f[1]());
    printf("%d\n", f[2]());
    return 0;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-01-21T07:34:07.553

可以使用默认值以另一种方式初始化函数指针数组。

* * *

## 示例代码

```
 #include <stdio.h>

void add(int index, int a, int b){
    printf("%d. %d + %d = %d\n", index, a, b, a + b);
}
void sub(int index, int a, int b){
    printf("%d. %d - %d = %d\n", index, a, b, a - b);
}
int main(){
    void (*func[10])(int, int, int) = {[0 ... 9] = add};
    func[4] = sub;
    int i;
    for(i = 0; i < 10; i++)func[i](i, i + 10, i + 2);
} 
```

如果你运行上面的程序，你会得到下面的输出。所有元素都使用函数**add**初始化，但数组中的第 4 个元素分配给函数**sub**

* * *

## 输出

```
0\. 10 + 2 = 12
1\. 11 + 3 = 14
2\. 12 + 4 = 16
3\. 13 + 5 = 18
4\. 14 - 6 = 8
5\. 15 + 7 = 22
6\. 16 + 8 = 24
7\. 17 + 9 = 26
8\. 18 + 10 = 28
9\. 19 + 11 = 30
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-12-29T15:53:59.070

我只是在上面的答案中添加了更多内容。函数指针数组可以由枚举变量索引，显示每个索引的操作类型。看看下面的例子。在这里，我们使用 tyepdef 作为函数指针运算符。然后我们创建一个名为act 的函数指针数组。最后，我们将数组初始化为递增和递减函数。在这种情况下，索引 0 表示递增，索引 1 表示递减。我们不使用这种原始索引，而是使用具有 INCR 和 DECR 的枚举，对应于索引 0、1。

```
#include<stdio.h>
#include<stdlib.h>

typedef void (*operate)(int *, int);
void increment(int *, int);
void decrement(int *, int);

enum {
   INCR, DECR
    };

 int main(void){

   int a = 5;

  operate act[2] = {increment,decrement};

  act[INCR](&a,1);

  printf("%d\n",a);

  act[DECR](&a,2);

  printf("%d\n",a);
     return 0;
 }

 void increment(int *a, int c){
 *a += c;
 }
 void decrement(int *a, int c){
 *a -= c;
  } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-28T15:08:46.770

这是一个显示正确语法的工作示例：

```
#include <stdio.h>

int test1(void) {
    printf("test1\n");
    return 1;
}

int test2(void) {
    printf("test2\n");
    return 2;
}

int main(int argc, char **argv) {
    int (*fparr[2])(void) = { test1, test2 };

    fparr[0]();
    fparr[1]();

    return 0;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-28T15:09:36.700

示例代码：

```
static int foo(void) { return 42; }

int (*bar[5])(void) = { foo, foo, foo, foo, foo }; 
```

请注意，类型`int (*)()`和`int (*)(void)`是不同的类型 - 前者表示具有固定但未指定数量的参数的函数，而后者表示没有参数的函数。

另请注意，C 声明符语法遵循与表达式相同的规则（特别是运算符优先级），因此从内到外读取：

`bar`表示指向函数 ( `bar[5]`) 的指针 ( )和数组 ( )。括号是必要的，因为后缀函数调用比前缀指针间接绑定更紧密。`*bar[5]``int (*bar[5])(void)``(*bar[5])`

# c# - 如何在 IsGenericTypeDefinition 为 def 的情况下计算相同的类型

> ID：14071379
> 
> 赞同：3
> 
> 时间：2012-12-28T14:57:16.213
> 
> 标签：c#, keyvaluepair

我有一个问题，我想确定一个对象是否属于类型`KeyValuePair<,>`

当我比较时：

```
else if (item.GetType() == typeof(KeyValuePair<,>))
{
    var key = item.GetType().GetProperty("Key");
    var value = item.GetType().GetProperty("Value");
    var keyObj = key.GetValue(item, null);
    var valueObj = value.GetValue(item, null);
    ...
} 
```

这是错误的，因为`IsGenericTypeDefinition`对他们来说是不同的。

有人可以解释一下为什么会发生这种情况以及如何以正确的方式解决这个问题（我的意思是不比较名称或其他琐碎的字段。）

提前谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T15:00:00.410

找到这段代码，试一试：

```
public bool IsKeyValuePair(object o) 
{
    Type type = o.GetType();

    if (type.IsGenericType)
    {
        return type.GetGenericTypeDefinition() != null ? type.GetGenericTypeDefinition() == typeof(KeyValuePair<,>) : false;
    }

    return false;
} 
```

资源：

[http://social.msdn.microsoft.com/Forums/hu-HU/csharpgeneral/thread/9ad76a19-ed9c-4a02-be6b-95870af0e10b](http://social.msdn.microsoft.com/Forums/hu-HU/csharpgeneral/thread/9ad76a19-ed9c-4a02-be6b-95870af0e10b)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T15:06:39.163

```
item.GetType() == typeof(KeyValuePair<,>) 
```

以上永远不会奏效：不可能创建一个类型为 的对象`KeyValuePair<,>`。

原因是它`typeof(KeyValuePair<,>)`不代表一个类型。相反，它是一个*泛型类型定义*- 一个`System.Type`用于检查其他泛型类型的结构的对象，但它们本身并不代表有效的 .NET 类型。

如果 an`item`是，比如说， a `KeyValuePair<string,int>`，那么`item.GetGenericTypeDefintion() == typeof(KeyValuePair<,>)`

以下是修改代码的方法：

```
...
else if (item.IsGenericType() && item.GetGenericTypeDefintion() == typeof(KeyValuePair<,>)) {
    ...
} 
```

# java - 与类名一起使用时，意图无法按预期工作

> ID：14071385
> 
> 赞同：2
> 
> 时间：2012-12-28T14:57:36.230
> 
> 标签：java, android, android-intent

我在从 ListActivity 扩展的名为 Menu 的类中有以下代码。当我单击 listitem 时，Toast 行正在正确执行，但之后没有任何反应，我猜 catch 块中的代码正在执行，并且 Intent 部分正在引发一些异常。你觉得这个定义有什么问题吗？

```
protected void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);
    try {
        Toast.makeText(Menu.this, "Clicked!!", 5000).show();
        Class myClass = Class.forName("com.palye.first.MainActivity");
        Intent menuI = new Intent(Menu.this, myClass);
        startActivity(menuI);
    }
    catch (ClassNotFoundException e) {
        e.printStackTrace();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T15:02:26.150

有时

```
 Class myClass = Class.forName("com.example.first.MainActivity"); 
```

还不够，因为它不会加载类。我需要做一个`myClass.newInstance()`；而不是使用`myClass`, 即使我没有使用创建的对象。

试试吧，也许它会解决你的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T16:27:59.887

你知道如果你拥有 Activity 你可以创建一个明确的意图：

```
 Intent intent = new Intent(Menu.this, MainActivity.class); 
```

`try catch`那么你不需要

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T16:11:50.763

在某个地方，我看到一些包名称被排除在加载、部署之外，忘记了哪些。我记得一个是“android”，另一个是“internal”或“example”。因为我正在切换/混合 iOS / Android / Java EE，所以我不确定哪些地方不允许，哪个不允许。

尝试将“”重命名/重构为`example`“ `my`”包，也许它会解决。对于 Android Market，肯定不允许使用“ `example`”进行部署

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-28T16:24:27.697

你为什么不试试`MainActivity.class`呢？例如，`Intent menuI = new Intent(Menu.this, MainActivity.class);`

您可以发布 logcat 输出吗？

# java - Rest set @Path 用于资源更新

> ID：14071388
> 
> 赞同：0
> 
> 时间：2012-12-28T14:57:53.713
> 
> 标签：java, rest, jersey, jax-rs

使用 Jersey，**RESTish**的方法是什么，我应该创建一个像这样以“update”开头的方法，还是应该在 accountseetings 路径下创建一个子资源（或任何 Jax-Rs 东西）？或者我应该简单地使用不同动词的相同方法名称？

```
@GET
@Path("/accountsettings")
public Settings accountSettings() {

}

@PUT
@Path("/updateaccountsettings")
public void updateAccountSettings() {

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T15:00:48.487

在 REST 中，动词定义你在做什么，而 URL 定义你在做什么。

所以这里的 PUT to`/accountsettings`似乎是正常的做法。

调用该方法`updateAccountSettings()`似乎很有意义。

# c# - 将对象放在 SurfaceListBox 和 ScatterView 上时获取 SurfaceListBoxItem 和 ScatterViewItem

> ID：14071389
> 
> 赞同：3
> 
> 时间：2012-12-28T14:57:57.430
> 
> 标签：c#, xaml, pixelsense

我正在使用事件将对象 ( `ScatterViewItem`) 放在 a上，并且在检测到整个放置时它工作正常，但是，我想知道该对象被放置在哪个位置。`SurfaceListBox``s:SurfaceDragDrop``SurfaceListBox``SurfaceListBoxItem`

我也想这样做，但为了一个，`ScatterView`即检测对象被丢弃在哪个对象上。 `ScatterViewItem``ScatterView`

我的代码是这样的：

```
<s:SurfaceListBox 
    x:Name="listBoxList"
    Background="{x:Null}"
    AllowDrop="True"
    s:SurfaceDragDrop.Drop="ListBox_Drop" >
</s:SurfaceListBox>

<s:ScatterView 
    x:Name="scatterList"
    Background="{x:Null}"
    AllowDrop="True"
    s:SurfaceDragDrop.Drop="Scatter_Drop" >
</s:ScatterView> 
```

然后我添加我的项目：

```
listBoxList.Items.Add("ListBox Item 1");
listBoxList.Items.Add("ListBox Item 1");
listBoxList.Items.Add("ListBox Item 1");

scatterList.Items.Add("ScatterViewItem A");
scatterList.Items.Add("ScatterViewItem B");
scatterList.Items.Add("ScatterViewItem C"); 
```

那么我怎样才能得到`ListBox_Drop`and上的项目`Scatter_Drop`呢？

**编辑**

通过罗伯特的回答，我设法解决了我的问题。所以生成的代码将是这样的（对于`ScatterView`）：

```
<s:ScatterView
    x:Name="scatterList"
    Background="{x:Null}">
    <s:ScatterView.ItemContainerStyle>
        <Style TargetType="s:ScatterViewItem">
            <EventSetter Event="s:SurfaceDragDrop.Drop" Handler="Scatter_Drop"/>
            <Setter Property="AllowDrop" Value="True" />
        </Style>
    </s:ScatterView.ItemContainerStyle>
</s:ScatterView> 
```

对于`SurfaceListBox`：

```
<s:SurfaceListBox
    x:Name="listBoxList"
    Background="{x:Null}">
    <s:SurfaceListBox.ItemContainerStyle>
        <Style TargetType="s:SurfaceListBox">
            <EventSetter Event="s:SurfaceDragDrop.Drop" Handler="ListBox_Drop"/>
            <Setter Property="AllowDrop" Value="True" />
        </Style>
    </s:SurfaceListBox.ItemContainerStyle>
</s:SurfaceListBox> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T15:00:57.880

您需要`AllowDrop`为每个单独的`ScatterViewItem`&设置和连接 Drop 事件处理程序`ListBoxItem`。然后事件的来源将是被丢弃的项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-11T10:05:38.453

我认为对上述解决方案的一个小修正。

```
<Style TargetType="s:SurfaceListBoxItem"> 
```

反对

```
<Style TargetType="s:SurfaceListBox"> 
```

# android - 如何在新线程 task.onDone() 中更改 UI 元素？

> ID：14071394
> 
> 赞同：0
> 
> 时间：2012-12-28T14:58:17.273
> 
> 标签：android, multithreading, user-interface, task

我怎样才能做到这一点？

```
Thread t = new Thread(new Runnable() {
    @Override
    public void run() {
        FacebookConnectTask task = 
                new FacebookConnectTask("facebookId", "token", "email", facebookGender,0, 0);
        task.setOnPreExecuteListener(this);
        task.setOnDoneListener(this);
        task.execute();
    }
});
t.start();

public void onPreExecute() { 
    progressbar.setVisibility(View.VISIBLE);
}

public void onDone() { 
    progressbar.setVisibility(View.GONE);
} 
```

由于我正在打开一个新线程，因此我无法更改其中的 UI 元素，那么，我该如何设法对 UI 做一些事情，任务何时开始以及何时完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T15:01:25.370

你可以在`AyncTask`. 在另一个线程内`AsyncTask`执行所有内容`doInBackground()`，该线程无权访问您的视图所在的 GUI。

`preExecute()`并`postExecute()`在此新线程中发生繁重工作之前和之后为您提供对 GUI 的访问，您甚至可以将长时间操作的结果传递`postExecute()`给然后显示任何处理结果。

更多信息：http: [//developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

此处示例：[http ://www.vogella.com/articles/AndroidPerformance/article.html](http://www.vogella.com/articles/AndroidPerformance/article.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T15:09:56.283

在您的活动中

```
private Handler myHandler=new Handler(); 
```

在你的完成回调中的下一个

```
public void onDone() { 
myHandler.post(new Runnable(){
   @Override
   public void run() {
      progressbar.setVisibility(View.GONE)
   }
})
} 
```

但正如已经说过的那样。AsyncTask 更适合它

# java - 更改 S3 对象上的元数据（上次修改）

> ID：14071399
> 
> 赞同：2
> 
> 时间：2012-12-28T14:58:37.097
> 
> 标签：java, amazon-web-services, amazon-s3

我必须重新组织 S3 对象——基本上将它们从一个前缀移动到另一个前缀。

我通过将原始对象从源路径复制到目标路径来做到这一点。

我想保留原始对象上的原始时间戳。

我正在使用 Java sdk 来执行此任务。

我试图通过以下方式做到这一点：

```
 // Create a meta object to apply to the new object
        ObjectMetadata newObjectMetadata = new ObjectMetadata();

        // Next I set the lat mod date on the new meta object from the old object summary
        newObjectMetadata.setLastModified(Original_objectSummary.getLastModified());

        // Next I create a CopyObjectRequest
        CopyObjectRequest cor = new CopyObjectRequest(bucket, objectSummary.getKey(), bucket, targetKey);

        // Next I set the new object meta data on the copy request 
        cor.setNewObjectMetadata(newObjectMetadata); 
```

但是，当创建对象时，它会将 AWS 管理控制台中看到的最后修改日期设置为创建新对象的日期。

任何帮助或澄清表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T15:30:32.850

当我需要这样做时，由于您指定的原因，我最终不得不将原始的 last_modified 时间戳保存为单独的 x-amz-meta- 属性。那是使用其他语言（Perl 和 Python），所以我认为这不是 Java SDK 问题。

# .net - 如何将 .net 程序集添加到全局程序集缓存 (GAC)

> ID：14071401
> 
> 赞同：4
> 
> 时间：2012-12-28T14:58:52.157
> 
> 标签：.net, ajaxcontroltoolkit, gac

如何将库添加到 GAC？我可以在 Visual Studio 中列出来自 GAC 的程序集吗？我只想在 GAC 库 DLL 中添加一个文件，它是 AjaxControlToolkit。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-28T15:01:47.793

您可以使用 Gacutil.exe 将程序集添加到 GAC。 [看这里](http://msdn.microsoft.com/en-us/library/ex0ss12c.aspx)。语法是：

```
gacutil [options] [assemblyName | assemblyPath | assemblyListFile] 
```

您还可以使用 GACUtil.exe 通过以下命令查看 GAC 的内容：

```
gacutil –l 
```

在 2010 之前的 Visual Studio 版本中，可以使用程序集缓存查看器，只需在 Windows 资源管理器中导航到 <系统驱动器>:\< Windows 文件夹>\程序集即可查看 GAC 中的程序集列表。但是，从 .net 4 开始，程序集缓存查看器[已被删除。](http://msdn.microsoft.com/en-us/library/34149zk3%28v=vs.100%29.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-28T17:07:19.667

您只需打开程序集文件夹（C:\Windows\Assembly），拖放您想要的程序集...

# python - 多层次抽象软件的设计

> ID：14071402
> 
> 赞同：0
> 
> 时间：2012-12-28T14:58:53.683
> 
> 标签：python, design-patterns

我现在正在设计一个软件，它有几个抽象层次。这可能是我开始设计的最复杂的一段代码，并且它要求易于升级，所以我想在开始编写任何代码之前确保我走在正确的轨道上。

基本上，将有 3 个主要级别的课程。这两个班级需要互相交谈。

首先是输入源数据。目前有两种主要类型的输入数据，它们产生相似但不相同的输出。这些类的主要目标是从两个不同的源中获取数据并将其转换为通用接口，以供程序的其余部分使用。

第二组将是外部库的适配器。该库一直在定期更新，我没有理由怀疑它不会在这些年中继续更新。最有可能的是，每次升级都将与前一次非常相似，但可能会进行一些小的更改以支持新的库版本。这个级别将负责获取输入，并将它们格式化以使用输出类。

最后一类是输出。我认为这不需要多个版本，但至少需要指定两个不同的输出目录。我怀疑最简单的做法是在创建输出类时简单地传入一个输出目录，这是唯一需要的抽象级别。这个类会经常更新，但不要求支持多个版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T14:58:53.683

如下设置代码，基本上遵循[桥接模式](http://en.wikipedia.org/wiki/Bridge_pattern)，但具有多个抽象层。

输入类将是抽象。目前获取输出的两种不同方式是两个不同的具体类，如果需要可以添加更多具体类。

包装类将是一个[工厂模式](http://en.wikipedia.org/wiki/Factory_method_pattern)。大多数代码在各种实现之间应该是通用的，因此这应该可以很好地处理微小的差异。

输出类将作为实现类的一部分包含在内。没有真正需要的模式，因为这个类只需要一个版本。此外，实现者很可能是单身人士。

# svn - 使用 awk 到 svn 日志以获取特定用户提交的文件列表

> ID：14071404
> 
> 赞同：1
> 
> 时间：2012-12-28T14:58:55.290
> 
> 标签：svn, awk, terminal

我发现了这个漂亮的小脚本，我把它做成了一个 bash 脚本。

```
#!/bin/bash
svn log -v -r{$1}:HEAD | awk '/^r[0-9]+ / {user=$3} /./{if (user=="'$2'") {print}}' | grep -E "^   M|^   G|^   A|^   D|^   C|^   U" | awk '{print $2}' | sort | uniq

$1 = 2012-10-01 //for example
$2 = George //for example 
```

该脚本似乎有效，但它仅打印出来自主干的提交。当我从终端 svn 登录时，无论分支如何，我都会看到所有提交。

到目前为止，我已将问题缩小到 awk。我们在分支文件夹名称中使用空格。不确定这是否有问题。

/./ 在 awk 区域是问题吗？

到目前为止，我从 svn info 获取 url 并将其放入变量中。

```
theURL=$(svn info | grep -E "^(URL: )http(s)?:")
theURL=${theURL:5} 
```

也许我可以告诉 awk 只打印出与我的 url 方案的一部分匹配的行？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T15:13:22.733

`svn log`没有路径参数使用默认的“。” 路径（在您的情况下，它必须并且只能是工作副本 - 链接到 repo 的主干）

`svn log URL`同时可以与远程存储库*的树的任何部分*一起使用，与（某些）WC的当前设置无关。

只需添加并使用第三个参数

# php - 如何使用键移动多个 PHP 数组元素？

> ID：14071407
> 
> 赞同：-4
> 
> 时间：2012-12-28T14:58:59.447
> 
> 标签：php, arrays, sorting

我需要使用 cms_before 或 cms_after 键从数组中移动元素。例如，文件夹 B 在使用 GUID (0E3B180C-F4AA-484F-A19D-318E6D4D2A6C) 的文件夹 A 之后。

数组：

```
大批
(
    [0] => 数组
        (
            [cms_parent_node] => 0
            [cms_before] =>
            [cms_after] =>
            [cms_guid] => 0E3B180C-F4AA-484F-A19D-318E6D4D2A6C
            [cms_title] => 档案 A
            [级别] => 数组
                (
                    [0] => 数组
                        (
                            [cms_parent_node] => 0E3B180C-F4AA-484F-A19D-318E6D4D2A6C
                            [cms_before] =>
                            [cms_after] =>
                            [cms_guid] => D94840DC-7CD8-E7AA-7C69-A237306D24E6
                            [cms_title] => 档案 AA
                            [级别] => 数组
                                (
                                    [0] => 数组
                                        (
                                            [cms_parent_node] => D94840DC-7CD8-E7AA-7C69-A237306D24E6
                                            [cms_before] =>
                                            [cms_after] =>
                                            [cms_guid] => 1B20700B-70F0-FFE5-47AC-3DA35460C702
                                            [cms_title] => 档案 AAA
                                            [级别] => 数组
                                                (
                                                )
                                        )
                                )
                        )
                )
        )
    [1] => 数组
        (
            [cms_parent_node] => 0
            [cms_before] =>
            [cms_after] => 1CBF252E-0C28-36E9-D5DF-66F361FB00E9
            [cms_guid] => 57F64452-B6BE-3039-F30A-1BE413936A71
            [cms_title] => 档案 C
            [级别] => 数组
                (
                )
        )
    [2] => 数组
        (
            [cms_parent_node] => 0
            [cms_before] =>
            [cms_after] => 57F64452-B6BE-3039-F30A-1BE413936A71
            [cms_guid] => 44269A70-FF01-EB17-7437-8B1EFB746E0D
            [cms_title] => 档案 D
            [级别] => 数组
                (
                )
        )
    [3] => 数组
        (
            [cms_parent_node] => 0
            [cms_before] =>
            [cms_after] => 0E3B180C-F4AA-484F-A19D-318E6D4D2A6C
            [cms_guid] => 1CBF252E-0C28-36E9-D5DF-66F361FB00E9
            [cms_title] => 档案 B
            [级别] => 数组
                (
                )
        )
)

```

返回数组必须按以下顺序：

```
一个
  AA
   AAA
乙
C
D

```

结果：

```
大批
   (
       [0] => 数组
           (
               [cms_parent_node] => 0
               [cms_before] =>
               [cms_after] =>
               [cms_guid] => 0E3B180C-F4AA-484F-A19D-318E6D4D2A6C
               [cms_title] => 档案 A
               [级别] => 数组
                   (
                       [0] => 数组
                           (
                               [cms_parent_node] => 0E3B180C-F4AA-484F-A19D-318E6D4D2A6C
                               [cms_before] =>
                               [cms_after] =>
                               [cms_guid] => D94840DC-7CD8-E7AA-7C69-A237306D24E6
                               [cms_title] => 档案 AA
                               [级别] => 数组
                                   (
                                       [0] => 数组
                                           (
                                               [cms_parent_node] => D94840DC-7CD8-E7AA-7C69-A237306D24E6
                                               [cms_before] =>
                                               [cms_after] =>
                                               [cms_guid] => 1B20700B-70F0-FFE5-47AC-3DA35460C702
                                               [cms_title] => 档案 AAA
                                               [级别] => 数组
                                                   (
                                                   )

                                           )

                                   )

                           )

                   )

           )

    [1] => 数组
        (
            [cms_parent_node] => 0
            [cms_before] =>
            [cms_after] => 0E3B180C-F4AA-484F-A19D-318E6D4D2A6C
            [cms_guid] => 1CBF252E-0C28-36E9-D5DF-66F361FB00E9
            [cms_title] => 档案 B
            [级别] => 数组
                (
                )

        )

       [2] => 数组
           (
               [cms_parent_node] => 0
               [cms_before] =>
               [cms_after] => 1CBF252E-0C28-36E9-D5DF-66F361FB00E9
               [cms_guid] => 57F64452-B6BE-3039-F30A-1BE413936A71
               [cms_title] => 档案 C
               [级别] => 数组
                   (
                   )

           )

       [3] => 数组
           (
               [cms_parent_node] => 0
               [cms_before] =>
               [cms_after] => 57F64452-B6BE-3039-F30A-1BE413936A71
               [cms_guid] => 44269A70-FF01-EB17-7437-8B1EFB746E0D
               [cms_title] => 档案 D
               [级别] => 数组
                   (
                   )

           )

   )

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T15:13:47.057

像这样的东西。

```
function reorder($folders) {
  $current = null;
  $after = array();

  foreach ($folders as &$folder) {
    if ($folder['cms_after']) $after[$folder['cms_after']] =& $folder;
      else $current =& $folder;
  }

  $list = array();
  while ($current) {
    $list[] = $current;
    $current = isset($after[$current['cms_guid']]) ? $after[$current['cms_guid']] : null;
  }

  return $list;
} 
```

锻炼你的提问技巧......

# asp.net - 通过 Google 帐户登录 ASP.net 应用程序

> ID：14071414
> 
> 赞同：9
> 
> 时间：2012-12-28T14:59:21.310
> 
> 标签：asp.net, c#-4.0, authentication, openid

我的客户有一个请求，他想通过 Google 帐户登录 ASP.net Web 应用程序。因为我从来没有做过这样的事情，所以我有些担心。

困扰我的是他想为特定帐户添加角色（管理员、用户），这让我感到困惑，因为我不确定如何将 Google 帐户数据与我的数据库连接起来。我假设我将无法获得可以存储到我自己的数据库中的密码或用户名。

从哪儿开始？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-28T16:07:03.447

使用 OpenID。这是在[DotNetOpenAuth](http://www.dotnetopenauth.net)库中的 ASP.NET 中实现的。它包括用于 Google 登录的示例，而且非常简单。

这些角色应该起作用。在构建用户表时，只需将用户添加到适当的角色。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-28T15:18:38.123

看看这个：

[http://www.asp.net/vnext/overview/aspnet/oauth-in-the-default-aspnet-45-templates](http://www.asp.net/vnext/overview/aspnet/oauth-in-the-default-aspnet-45-templates)

Scott Hanselman 简要介绍了 .NET4.5 中的 OpenID 功能。这对您来说可能是一个很好的起点。

在 MSDN 上：http: [//blogs.msdn.com/b/webdev/archive/2012/08/15/oauth-openid-support-for-webforms-mvc-and-webpages.aspx](http://blogs.msdn.com/b/webdev/archive/2012/08/15/oauth-openid-support-for-webforms-mvc-and-webpages.aspx)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-28T15:16:10.567

我建议你看看这个 codeplex miniproject：[http](http://loginwithgoogle.codeplex.com/) ://loginwithgoogle.codeplex.com/ 。您可能会发现它很有帮助。

问候

# java - 是否可以使用休眠映射不同的字段类型？

> ID：14071417
> 
> 赞同：1
> 
> 时间：2012-12-28T14:59:23.760
> 
> 标签：java, hibernate, orm, hibernate-mapping

我想知道是否可以映射不同的数据类型。例如，我在 Java 中有一个 Visit 数据类型，它有一个字符串类型的 userEmail 字段，我可以用 hibernate 将它映射到一个具有 userID 而不是 userEmail 的数据库表吗？根据 id 它会找到电子邮件并将电子邮件返回给 java，反之亦然？这可能吗？

如果是，那么映射会是什么样子？或者这应该是什么样子：

```
<many-to-one name="patientEmail" 
    column="idPatient" 
    not-null="true" 
    class="com.my.myapp.datamodel.Patient"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T15:01:54.860

是的你可以。

您必须创建一个扩展为 Hibernate 的 UserType 的类。

[自定义用户类型休眠](http://blog.xebia.com/2009/11/09/understanding-and-writing-hibernate-user-types/)

它可以是像这样的用户：

```
@Column(name = "commission_type")
        @Type(type = "com.core.commission.model.FNEnumUserType", parameters = @Parameter(name = "type", value = "com.core.commission.dto.CommissionType"))
        private CommissionType commissionType; 
```

其中 FNEnumUserType 是 cstom 数据类型，与您的访问相同

# python - 在 Python 中自动使用 ElementTree 的正确方法是什么？

> ID：14071420
> 
> 赞同：0
> 
> 时间：2012-12-28T14:59:35.930
> 
> 标签：python, xml

我正在使用 Python 生成一些由另一个设备使用的 XML 文件。我有一个可行的解决方案，但我正在努力改进它。XML 必须包含的内容之一是时间表。这是星期一的条目在 XML 中的样子。

```
<Monday open="08:00" close="17:00" /> 
```

我在 Python 中使用 ElementTree 生成它没有问题，但现在我每天都被困在一行代码中。所以我的 Python 代码片段如下所示：

```
SubElement(schedule, 'Monday', open='08:00', close='17:00')
SubElement(schedule, 'Tuesday', open='08:00', close='17:00')
.
.
.
SubElement(schedule, 'Sunday', open='08:00', close='17:00') 
```

XML 文件最终会在其中包含多个计划，并且将所有这些都输入出来似乎是不必要的重复。而不是这个，我想创建一个函数，它遍历一个列表来构建传递给 SubElement 的参数。作为该函数的一部分，我创建了这个字符串来替换我的 SubElement 调用中的时间。

```
"open=" + "\'08:00\'" + ", " + "close=" + "\'17:00\'" 
```

如果我将其打印出来，它看起来与我在长时间输入代码时传递给 SubElement 的内容相同。但是，它显然与我在尝试运行脚本时收到以下错误不同。

```
File "C:\Python27\lib\xml\etree\ElementTree.py", line 528, in SubElement
   attrib = attrib.copy()
AttributeError: 'str' object has no attribute 'copy' 
```

我查看了 SubElement 代码，它似乎在期待一本字典。但是，当我长时间输入内容时，我似乎也没有提供字典作为输入，所以我不明白为什么该函数应该接受该输入，而不是在我看来是等效的字符串. 有什么办法可以做我想做的事情，还是我被很多重复的代码行困住了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T15:07:13.407

您应该将属性字典而不是“属性字符串”传递给 SubElement，例如：

```
SubElement(schedule, 'Sunday', {'open': '08:00', 'close': '17:00'}) 
```

或者

```
times = {'open': '08:00', 'close': '17:00'}
SubElement(schedule, 'Sunday', times) 
```

# java - 如何在 Swing 中获取“系统托盘”独有的桌面大小

> ID：14071424
> 
> 赞同：0
> 
> 时间：2012-12-28T14:59:51.023
> 
> 标签：java, swing

在 Swing 中，我如何计算桌面的大小，不包括系统托盘？我想调整我的应用程序框架的大小以填充该大小。`Toolkit.getScreenSize()`返回包含系统托盘的大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T15:03:32.437

所以你想将应用程序设置为全屏，是吗？在这种情况下，请执行以下操作：

```
frame.setExtendedState(Frame.MAXIMIZED_BOTH); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T15:15:31.307

尝试

```
GraphicsEnvironment env = GraphicsEnvironment.getLocalGraphicsEnvironment();
Rectangle bounds = env.getMaximumWindowBounds();
frame.setMaximizedBounds(bounds); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T15:24:43.697

要将 Swing 应用程序 JFrame 设置为最大化，请使用以下命令：

```
frame.setExtendedState(frame.getExtendedState() | Frame.MAXIMIZED_BOTH); 
```

要获取最大化框架的大小，请使用以下命令：

```
GraphicsEnvironment env = GraphicsEnvironment.getLocalGraphicsEnvironment();
Rectangle bounds = env.getMaximumWindowBounds(); 
```

# php - 如何在 Volt (Phalcon) 中设置用户定义的函数

> ID：14071428
> 
> 赞同：8
> 
> 时间：2012-12-28T15:00:00.933
> 
> 标签：php, phalcon, volt

如何在 Volt 中设置用户定义函数？例如，我想调用一个函数来翻译我的视图中的字符串，如下所示：

```
<div class='page-header'>
    <h2>{{ tr('session_login_title') }}</h2>
</div> 
```

我想`tr`映射到一个函数`\My\Locale::translate($key)`

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-28T15:00:00.933

Volt 函数充当字符串替换，实际上并不调用底层函数。Volt 将函数翻译成相关的字符串，然后由 PHP 解释。

假设你有一个`Locale`类，它有`translate`这样的方法：

```
public static function translate()
{
    $return = '';

    if (isset(self::$_phrases[$key]))
    {
        $return = self::$_phrases[$key];
    }

    return $return;
} 
```

此方法使用`$_phrases`内部数组查找您传递的相关键并返回您想要的短语的文本。如果未找到，则返回一个空字符串。

现在我们需要在 Volt 中注册该函数。

```
 $di->set(
        'volt',
        function($view, $di) use($config)
        {
            $volt = new \Phalcon\Mvc\View\Engine\Volt($view, $di);
            $volt->setOptions(
                array(
                    'compiledPath'      => $config->app_volt->path,
                    'compiledExtension' => $config->app_volt->extension,
                    'compiledSeparator' => $config->app_volt->separator,
                    'stat'              => (bool) $config->app_volt->stat,
                )
            );
            $volt->getCompiler()->addFunction(
                'tr',
                function($key)
                {
                    return "\\My\\Locale::translate({$key})";
                }
            );

            return $volt;
        },
        true
    ); 
```

注意`tr`函数是如何注册的。`\My\Locale::translate({$key})`它返回一个带有传递`$key`参数的字符串。此 Volt 语法将被转换为 PHP 指令并由 PHP 执行。因此视图字符串：

```
<div class='page-header'>
    <h2>{{ tr('session_login_title') }}</h2>
</div> 
```

在 Volt 处理之后，它变成：

```
<div class='page-header'>
    <h2><?php echo \My\Locale::translate('session_login_title') ?></h2>
</div> 
```

# iphone - 应用程序停止在设备上运行 - “没有这样的文件或目录”

> ID：14071431
> 
> 赞同：0
> 
> 时间：2012-12-28T15:00:14.333
> 
> 标签：iphone, xcode4.2, xcode4.5

***最初我开始使用Xcode 4.2**构建一个 iPhone 应用程序（应用程序仍处于开发阶段），它在设备和模拟器上都运行良好。后来，我们想添加对**iPhone 5**（4 英寸显示屏）的支持。当我在**Xcode 4.5**（包括 Default-568h.png）上运行它时，它运行良好（在 3.5 英寸和 4 英寸的模拟器上）。但是当我尝试在设备上运行它时，它一直给我错误*

`"Could not launch appname.app” No such file or directory (/Users/<user>/Library/Developer/Xcode/DerivedData/appname-ffotpypmbvaguyhfvnnejhjotpbp/Build/Products/Debug-iphoneos/appname.app/appname).`

*我尝试了以下步骤，但没有运气:(*

*   从设备中删除了应用程序。重新启动了设备。
*   退出 XCode.Trashed 来自 `DerivedData.Cleaned 项目的所有文件夹。重新启动机器。
*   设置`Build for active architecture`为是
*   `Required device capabilities`从 -info.plist 中删除

*我还有其他选择可以尝试，还是应该一次又一次地重复这些？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T15:09:56.813

上次我遇到类似问题时，正常清理是不够的，因为它会留下一些派生数据。在 Xcode 中，选择 Product 菜单并按住选项键以显示“Clean Build Folder...”，或者更好的是，关闭 Xcode 并`/Users/<user>/Library/Developer/Xcode/DerivedData/`完全删除。

# eclipse - JDBC 入门

> ID：14071438
> 
> 赞同：1
> 
> 时间：2012-12-28T15:00:46.367
> 
> 标签：eclipse, ms-access, jdbc, odbc

我刚开始使用 JDBC，我正在使用这里提到的视频：[http](http://www.youtube.com/watch?v=kxi-H7359LA)
://www.youtube.com/watch?v=kxi-H7359LA 虽然他一开始很好，但他在中间变得混乱。
参考视频：

*   我有一个 32 位的 Office 2010*   32 位 JDK 和 JRE*   我下载了 32 位的 AccessDriverEngine.exe*   然后我去控制面板搜索ODBC然后我点击`SystemDSN`选项卡，那里**没有驱动程序**
我或不应该在那里看到驱动程序吗？AFAIK 从做一些 Visual Basic 开始，你必须在创建一个包含各种表的文件**后将**
它添加到那里。（图片下方的问题） **问题** 1\. 我是否正确完成了开始使用 JDBC 的步骤？ 2.我必须先在Access中创建一个数据库，对吗？ 3\. 如果我想使用 Eclipse IDE 开始编码，我该怎么办？比如我设置了什么路径等？**`.mdb`![在此处输入图像描述](../Images/93bfeebbcab3b4c9b5c7928b9906882e.png) *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T15:26:31.587

您还需要使用 32 位 ODBC。看看这个链接：

[http://sqlblog.com/blogs/john_paul_cook/archive/2010/03/16/32-bit-odbc-on-windows-server-2008-r2.aspx](http://sqlblog.com/blogs/john_paul_cook/archive/2010/03/16/32-bit-odbc-on-windows-server-2008-r2.aspx)

我想一旦你克服了这个障碍，你就可以解决你的其他问题。****

# asp.net - 为什么 ASP.NET 成员资格提供程序不加密我的密码

> ID：14071440
> 
> 赞同：0
> 
> 时间：2012-12-28T15:00:53.500
> 
> 标签：asp.net

我的应用程序使用 ASP.NET 成员资格提供程序。正确配置并在配置文件中指定密码格式后，用户密码仍以纯文本形式存储，而不是散列值。
我究竟做错了什么？
这是我的网络配置文件

```
<?xml version="1.0" encoding="utf-8"?>
<configuration> 
```

```
<section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
</configSections>
<connectionStrings>
<add name="db_connection" providerName="System.Data.SqlClient" connectionString="Data Source=192.168.11.10;Integrated Security=true;Initial Catalog=TestDB;User ID=sysad;Password=abc@123_ec"/>
</connectionStrings>
<system.web>
<compilation debug="true" targetFramework="4.5" />
<httpRuntime targetFramework="4.5" />
<pages>
  <namespaces>
    <add namespace="System.Web.Optimization" />
  </namespaces>
  <controls>
    <add assembly="Microsoft.AspNet.Web.Optimization.WebForms" namespace="Microsoft.AspNet.Web.Optimization.WebForms" tagPrefix="webopt" />
    <add tagPrefix="ajaxToolkit" assembly="AjaxControlToolkit" namespace="AjaxControlToolkit" />
    <add assembly="JuiceUI" namespace="Juice" tagPrefix="juice" />
  </controls>
</pages>
<authentication mode="Forms">
  <forms loginUrl="~/Account/Login.aspx" timeout="25" />
</authentication>

<membership defaultProvider="Myprovider">
  <providers>
    <add name="Myprovider"
    type="System.Web.Security.SqlMembershipProvider"
    passwordFormat="Hashed"
    connectionStringName="db_connection"
    enablePasswordRetrieval="false"
    enablePasswordReset="true"
    requiresQuestionAndAnswer="false"
     requiresUniqueEmail="false"
     maxInvalidPasswordAttempts="3"
     minRequiredPasswordLength="7"
     minRequiredNonalphanumericCharacters="1"
     passwordAttemptWindow="10"
     applicationName="" />
  </providers>
</membership>

 </system.web>

</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T17:21:33.233

在我看来，您的~~身份验证标签~~machinekey 标签~~不完整~~。阅读以下链接，让我们知道它是如何进行的。我的网站也有类似的问题，遵循这些教程就像一个魅力。

[http://www.asp.net/web-forms/tutorials/security/introduction/forms-authentication-configuration-and-advanced-topics-vb](http://www.asp.net/web-forms/tutorials/security/introduction/forms-authentication-configuration-and-advanced-topics-vb)

我会更详细地介绍，但它是午餐时间，所以你一个人:) 祝你好运。

* * *

编辑：我划掉了我所说的关于您的身份验证标签的内容。我的意思是你的机器钥匙标签丢失了。创建它的说明与身份验证标签教程在同一页面上，我将它们混合在一起。

这是您需要的代码：

```
<configuration>

 <system.web>

 ... Some markup was removed for brevity ...

 <machineKey

 decryption="AES"

 validation="SHA1"

 decryptionKey="1513F567EE75F7FB5AC0AC4D79E1D9F25430E3E2F1BCDD3370BCFC4EFC97A541"

 validationKey="32CBA563F26041EE5B5FE9581076C40618DCC1218F5F447634EDE8624508A129"

 />

 </system.web>

</configuration> 
```

那里列出的密钥取自教程站点，但您需要自己生成。它们可以使用一些流行的随机密钥生成器之一生成。我建议使用 Steve Gibson 的[Perfect Passwords Web Page](https://www.grc.com/passwords.htm)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T15:13:27.680

注意：我还没有研究过这个。

看看[http://msdn.microsoft.com/en-us/library/wfdhbte0.aspx](http://msdn.microsoft.com/en-us/library/wfdhbte0.aspx)和一个名为的[`HashAlgorithmType`](http://msdn.microsoft.com/en-us/library/system.web.configuration.membershipsection.hashalgorithmtype.aspx)属性

> 获取或设置用于敏感成员信息的加密类型。

`<membership defaultProvider="Myprovider" hashAlgorithmType="someValue">`
“somevalue”可以是`SHA1`或`MD5`。

对不起，我对此无能为力。这纯粹是基于查看 MSDN 文档。

# .htaccess - 如何将流量重定向到网站的登录页面到 LinkedIn 个人资料页面？

> ID：14071442
> 
> 赞同：0
> 
> 时间：2012-12-28T15:00:54.103
> 
> 标签：.htaccess, url, linkedin

当谈到服务器指令操作时，我是一个完全的新手。话虽如此，我发现很难将流量从基本上是空的网站登录页面（例如[http://picselbocs.com ）重定向到 LinkedIn 个人资料页面（例如](http://picselbocs.com)[http://ro.linkedin.com /in/andreioniga](http://ro.linkedin.com/in/andreioniga)），但没有通过使用 .htaccess 文件将流量重定向到同一网站的其他页面（例如[http://picselbocs.com/projects/cakemyface/](http://picselbocs.com/projects/cakemyface/)）到 LinkedIn 上的同一个人资料页面？

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T17:27:57.580

在**picselbocs.com**域的文档根目录中的 htaccess 文件中，添加：

```
RedirectMatch ^/$ http://ro.linkedin.com/in/andreioniga 
```

`301`如果您希望重定向是永久的，请包括：

```
RedirectMatch 301 ^/$ http://ro.linkedin.com/in/andreioniga 
```

或者，您可以使用 mod_rewrite 代替 mod_alias：

```
RewriteEngine On
RewriteRule ^/?$  http://ro.linkedin.com/in/andreioniga [L,R=301] 
```

`,R=301`如果您*不*想要永久重定向，请删除。

# sql-server - 无法弄清楚为什么我收到无效的列名错误

> ID：14071444
> 
> 赞同：0
> 
> 时间：2012-12-28T15:00:58.220
> 
> 标签：sql-server, tsql, sql-server-2008

我有这两个我正在使用的临时表（它们实际上是由以前的开发人员编写的，我正试图在不使用游标的情况下调整他的代码以更快，但这不是重点）而且我遇到了一点我无法弄清楚的问题。

这是一些代码：

```
CREATE TABLE #bc1 (
         [ContractID] decimal
        ,[custid] int
        ,[PostDate] date
        ,[RouteID] varchar(50)
        ,[RouteCommission] money
        ,[ContractTotal] money
        ,[ContractTotal0] money
    )

    INSERT INTO #bc1 ( [ContractID], [custid], [PostDate], [RouteID], [RouteCommission] )
    SELECT
         t.[ContractID]
        ,t.[custid]
        ,t.[PostDate]
        ,t.[RouteID]
        ,t.[RouteCommission]
    FROM 
        #tc1 t; 
```

现在，如您所见，它非常简单。正在创建一个有五列的`#bc1`表，它从另一个有 7 列的表中获取所有数据。这在查询的中间（大约四页，这就是我没有包括它的原因）几乎是一团糟，这就是它中断的地方。它告诉我

> *消息 207，级别 16，状态 1，第 178
> 行列名“custid”无效。*

它让我发疯。顺便说一句，第 178 行是插入语句。

有任何想法吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-28T15:24:55.720

```
 Can you try 'SELECT * FROM #tc1' as a test (without inserting into #bc1 table). 
```

# android - 您如何确定小部件的尺寸？

> ID：14071446
> 
> 赞同：0
> 
> 时间：2012-12-28T15:01:16.260
> 
> 标签：android

我正在尝试使用 RemoteViews.setTextViewTextSize 动态设置小部件的文本大小。我希望它与小部件的尺寸成正比。

您如何确定小部件的尺寸？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T15:32:02.047

实际上，您自己将您的尺寸放入`AppWidget`文件`XML`中。所以你不需要确定任何尺寸！在可调整大小的小部件实例的情况下，您无法获得尺寸！

# javascript - CSS & jQuery 调整大小问题

> ID：14071447
> 
> 赞同：1
> 
> 时间：2012-12-28T15:01:20.023
> 
> 标签：javascript, jquery, css

我正在尝试创建一个可调整大小的聊天框。我几乎拥有它，除非我调整底部的大小时分离，并且我不能将 userList 设置为固定大小，这不会受到调整大小的影响。

[jsbin](http://jsbin.com/ibimaq/3/edit)。

**HTML：**

```
 <div id="chatWindow">
    <div id="dragBar"></div>
    <div id="container">
      <div class="content">
      <p>aici vine niste text</p></div>
      <div class="content">
      <p>aici vine niste text</p></div>
    </div>

    <div id="usersList">
      <div class="user"></div>
      <div class="user"></div>
      <div class="user"></div>
      <div class="user"></div>
      <div class="user"></div>
      <div class="user"></div>
      <div class="user"></div>
      <div class="user"></div>
      <div class="user"></div>
      <div class="user"></div>
      <div class="user"></div>
      <div class="user"></div>
      <div class="user"></div>
      <div class="user"></div>
      <div class="user"></div>
      <div class="user"></div>
      <div class="user"></div>
      <div class="user"></div>
      <div class="user"></div>
      <div class="user"></div>
    </div>

  <div id="inputTxt"></div>

  </div> 
```

**CSS：**

```
body{
    background: #e6e6e6 
}

#chatWindow{
width:750px;
height:400px;
background-color:white;
border-style:solid;
border-width:1px;
border-color:darkgray;
}

#usersList{
  position:relative;
  background-color:#CCC;
  height:88%;
  width:25%;
  position:relative;
  float:right;
  overflow-y:scroll;
}

#dragBar{
  background-color:darkblue;
  width:750px;
  min-height:23px;
  max-height:23px;

}

#container{
 float:left;
  width:75%;
  height:88%;
  background-color:#CCC;
  clear:both;
  overflow-y:scroll;
  word-wrap:break-word;
}

.content{
  width:95%;
  min-height:10px;
  background-color:lightgray;
  float:left;
  margin:5px;
  clear:both;
}

#inputTxt{
  position:absolute;
  width:100%;
  height:25px;
  background-color:green;
  clear:both;
  bottom:0px;
}

.user{
  margin:4px;
  width:150px;
  height:30px;
  background-color:white;
  margin-left: auto ;
  margin-right: auto ;

} 
```

**JS：**

```
$(function() {
  $( "#chatWindow" ).resizable({
    alsoResize: '#dragBar',

   });
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T15:16:28.607

### 使底部固定。

```
body{
background: #e6e6e6 
}

#chatWindow{
width:750px;
height:400px;
background-color:white;
border-style:solid;
border-width:1px;
border-color:darkgray;
  position: relative;
  padding-bottom: 48px;
}

#usersList{
  position:relative;
  background-color:#CCC;
  height:100%;
  width:25%;
  position:relative;
  float:right;
  overflow-y:scroll;
}

#dragBar{
  background-color:darkblue;
  width:750px;
  min-height:23px;
  max-height:23px;

}

#container{
 float:left;
  width:75%;
  height:100%;
  background-color:#CCC;
  clear:both;
  overflow-y:scroll;
  word-wrap:break-word;
}

.content{
  width:95%;
  min-height:10px;
  background-color:lightgray;
  float:left;
  margin:5px;
  clear:both;
}

#inputTxt{
  position:absolute;
  width:100%;
  height:25px;
  background-color:green;
  clear:both;
  bottom:0;
  z-index: 1;
}

.user{
  margin:4px;
  width:150px;
  height:30px;
  background-color:white;
  margin-left: auto ;
  margin-right: auto ;

} 
```

### 小提琴：http: [//jsbin.com/ibimaq/18/edit](http://jsbin.com/ibimaq/18/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T15:21:17.183

尝试将溢出：隐藏添加到#chatWindow。

```
#chatWindow{overflow:hidden;} 
```

[http://jsbin.com/ibimaq/19/edit](http://jsbin.com/ibimaq/19/edit)

# zend-framework2 - ZendFramework2 AbstractTableGateway getSql

> ID：14071448
> 
> 赞同：0
> 
> 时间：2012-12-28T15:01:20.767
> 
> 标签：zend-framework2, zend-db, zend-db-table, zend-db-select

我有一个 ZF2 项目，它有 2 个模型 PostTable/TopTable，它扩展了 AbstractTableGateway。

我想对这些表的结果进行分页，所以我在这两个表中都有一个分页功能。

这就是 PostTable 模型的样子：

```
...
class PosTable extends AbstractTableGateway {

public function __construct($adapter) {
    $this->table = 'pos';
    $this->adapter = $adapter;
}
...
public function getPosPaginator($tid) {
    $sql = $this->getSql();
    $select = $sql->select();
    $select->where('tid = '.$tid)->where('deleted = 0')->order('crdate ASC');
    $adapter = new \Zend\Paginator\Adapter\DbSelect($select, $sql);
    $paginator = new \Zend\Paginator\Paginator($adapter);
    return $paginator;
}
... 
```

效果很好。但在我的 TopTable 中，它看起来像这样：

```
...
class TopTable extends AbstractTableGateway {

public function __construct($adapter) {
    $this->table = 'top';
    $this->adapter = $adapter;
}

public function getTopPaginator($fid) {
    $sql = $this->getSql();
    $select = $sql->select();
    $select->where('fid = '.$fid)->where('deleted = 0');
    $adapter = new \Zend\Paginator\Adapter\DbSelect($select, $sql);
    $paginator = new \Zend\Paginator\Paginator($adapter);
    return $paginator;
}

 ... 
```

对于 PostTable，我的控制器看起来像这样：

```
 ...       
  public function posAction(){
            ...
    $pos = $this->getPosTable()->getPosPaginator($tid);

    $pos->setCurrentPageNumber($pageid)->setItemCountPerPage(19);
            ... return $pos etc... 
```

相同的控制器 topAction：

```
 ...
public function topAction(){
            ...
        $top = $this->getTopTable()->getTopPaginator($fid);
    $top->setCurrentPageNumber($pageid)->setItemCountPerPage(20);
            ...return $top etc.. 
```

在那个控制器中，我还获得了这些功能：

```
 public function getTopTable(){
    return $this->getServiceLocator()->get('Application\Model\TopTable');
}
public function getPosTable(){
    return $this->getServiceLocator()->get('Application\Model\PosTable');
} 
```

PostTable 分页工作完美，但 TopTable 分页不起作用。我收到此错误：

```
Fatal error: Call to a member function select() on a non-object in .... 
```

看起来像

```
 $sql = $this->getSql(); 
```

不返回对象。我怎么解决这个问题？一个有效，一个无效，没有明显的原因。

我的 module.php 看起来像这样：

```
 namespace Application;

class Module
{
    public function getAutoloaderConfig()
    {
        return array('Zend\Loader\StandardAutoloader' =>
                array('namespaces' =>
                        array(__NAMESPACE__ => __DIR__ . '/src/' . __NAMESPACE__,),
                ),
        );
    }

    public function getConfig()
    {
        return include __DIR__ . '/config/module.config.php';
    }

    public function getServiceConfig()
    {
        return array(
                'factories' => array(

'Application\Model\TopTable' =>  function($sm) {
                        $dbAdapter = $sm->get('Zend\Db\Adapter\Adapter');
                        $table     = new \Application\Model\TopTable($dbAdapter);
                        return $table;
                    },
                    'Application\Model\ForTable' =>  function($sm) {
                        $dbAdapter = $sm->get('Zend\Db\Adapter\Adapter');
                        $table     = new \Application\Model\ForTable($dbAdapter);
                        return $table;
                    },
                    'Application\Model\PosTable' =>  function($sm) {
                        $dbAdapter = $sm->get('Zend\Db\Adapter\Adapter');

                        $table     = new \Application\Model\PosTable($dbAdapter);
                            return $table;
                        },
                ),
        );
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T16:03:22.633

好的，在通过 TableGateway 代码和您的扩展类之后，我发现您的实现没有调用初始化哪个设置 sql 对象尝试调用父表网关，下面是您的 PosTable 和 TopTable 的修改构造函数

```
 /* for PosTable */
class PosTable extends TableGateway {

    public function __construct($adapter) {
        parent::__construct('pos', $adapter);
    }
...

    /* for TopTable */
class TopTable extends TableGateway {

    public function __construct($adapter) {
        parent::__construct('top', $adapter);
    }
... 
```

# javascript - Google Apps Script Listbox Populate 基于以前的 ListBox 我可以让 2 工作但不能 3

> ID：14071453
> 
> 赞同：0
> 
> 时间：2012-12-28T15:01:50.563
> 
> 标签：javascript, google-apps-script

需要一点帮助来确定如何根据前一个列表框填充 3 个列表框。到目前为止，我拥有的是从电子表格填充的 1 个列表框。有人可以帮助我进行设置，以便第二个列表框将根据第一个列表框填充，第三个列表框将根据第一个列表框填充吗？这是代码：

```
function doGet(e){
  var app = UiApp.createApplication();
  var mainPage = app.createVerticalPanel().setId('mainPage');
  var dataItemsLB = app.createListBox().setId('dataItemsLB').setName('dataItemsLB'); 
  var dataItemsLbl = app.createLabel('Data Items'); 
  dataItems(dataItemsLB);
  mainPage.add(dataItemsLB);
  app.add(mainPage);
  return app;
  }

  function dataItems(listbox){
  var app = UiApp.getActiveApplication();
  var ss = SpreadsheetApp.openById('0AhraBJOts4V3dDhYbERTR0hFNUtNdEhZd2c4OElpY0E');
  var list = ss.getSheetByName('dataItems');
  var values = list.getRange(1,1,ss.getLastRow(),1).getValues();
  for (var i in values){
  listbox.addItem(values[i][0].toString());
  }
  return app;
  } 
```

上面的代码仅适用于 1 个列表框，但我认为它会帮助我从底部开始，所以我理解任何解释。感谢您的任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T15:24:02.030

回复社区试试这个代码：

```
function doGet(e){
  var app = UiApp.createApplication();
  var mainPage = app.createVerticalPanel().setId('mainPage');
  var dataItemsLB = app.createListBox().setId('dataItemsLB').setName('dataItemsLB'); // create a basic list box
  var dataItemsLB2 = app.createListBox().setId('dataItemsLB2').setName('dataItemsLB2'); // create a basic list box
  var dataItemsLB3 = app.createListBox().setId('dataItemsLB3').setName('dataItemsLB3'); // create a basic list box
  var dataItemsLbl = app.createLabel('Data Items'); 
  dataItems(dataItemsLB); // call the "dataItems" function to populate the list box

  // Create Server Handlers
  var sHandlerLB = app.createServerHandler("listLBSelect");
  sHandlerLB.addCallbackElement(mainPage);
  dataItemsLB.addChangeHandler(sHandlerLB);
  dataItemsLB2.addChangeHandler(sHandlerLB);  

  mainPage.add(dataItemsLB);
  mainPage.add(dataItemsLB2);
  mainPage.add(dataItemsLB3);
  app.add(mainPage);

  return app;
}

function dataItems(listbox){
  var app = UiApp.getActiveApplication();
  var ss = SpreadsheetApp.openById('0AhraBJOts4V3dDhYbERTR0hFNUtNdEhZd2c4OElpY0E');
  var list = ss.getSheetByName('dataItems');
  var values = list.getRange(1,1,ss.getLastRow(),1).getValues();
  for (var i in values){
    listbox.addItem(values[i][0].toString());
  }
  return app;
}

function listLBSelect(e) {
  var app = UiApp.getActiveApplication();
  Logger.log(e);
  Logger.log("Listbox changed: " + e.parameter.source);
  // check which listbox has been changed:
  switch(e.parameter.source) {
    case "dataItemsLB":
      var dataItemsLB2 = app.getElementById("dataItemsLB2");
      dataItemsLB2.addItem("aaaaaa"); 
      dataItemsLB2.addItem("bbbbbb"); 
      dataItemsLB2.addItem("cccccc"); 
      break;
    case "dataItemsLB2":
      var dataItemsLB3 = app.getElementById("dataItemsLB3");
      dataItemsLB3.addItem("hhhhhh"); 
      dataItemsLB3.addItem("jjjjjj"); 
      dataItemsLB3.addItem("kkkkkk"); 
      break;     
  }
  return app;
} 
```

# javascript - 如何在 JavaScript 中合并 TypedArrays？

> ID：14071463
> 
> 赞同：54
> 
> 时间：2012-12-28T15:02:52.063
> 
> 标签：javascript, typed-arrays

我想合并多个数组缓冲区来创建一个 Blob。但是，如您所知， [TypedArray](https://developer.mozilla.org/en-US/docs/JavaScript/Typed_arrays/Int8Array)没有“推送”或有用的方法......

例如：

```
var a = new Int8Array( [ 1, 2, 3 ] );
var b = new Int8Array( [ 4, 5, 6 ] ); 
```

结果，我想得到`[ 1, 2, 3, 4, 5, 6 ]`.

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-12-28T15:07:28.837

使用`set`方法。但请注意，您现在需要两倍的内存！

```
var a = new Int8Array( [ 1, 2, 3 ] );
var b = new Int8Array( [ 4, 5, 6 ] );

var c = new Int8Array(a.length + b.length);
c.set(a);
c.set(b, a.length);

console.log(a);
console.log(b);
console.log(c); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2019-09-15T16:41:59.193

对于客户端〜ok解决方案：

```
const a = new Int8Array( [ 1, 2, 3 ] )
const b = new Int8Array( [ 4, 5, 6 ] )
const c = Int8Array.from([...a, ...b]) 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-02-25T17:15:21.100

我总是使用这个功能：

```
function mergeTypedArrays(a, b) {
    // Checks for truthy values on both arrays
    if(!a && !b) throw 'Please specify valid arguments for parameters a and b.';  

    // Checks for truthy values or empty arrays on each argument
    // to avoid the unnecessary construction of a new array and
    // the type comparison
    if(!b || b.length === 0) return a;
    if(!a || a.length === 0) return b;

    // Make sure that both typed arrays are of the same type
    if(Object.prototype.toString.call(a) !== Object.prototype.toString.call(b))
        throw 'The types of the two arguments passed for parameters a and b do not match.';

    var c = new a.constructor(a.length + b.length);
    c.set(a);
    c.set(b, a.length);

    return c;
} 
```

不检查 null 或类型的原始函数

```
function mergeTypedArraysUnsafe(a, b) {
    var c = new a.constructor(a.length + b.length);
    c.set(a);
    c.set(b, a.length);

    return c;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-01-24T19:29:36.703

如果我有多个类型化数组

```
 arrays = [ typed_array1, typed_array2,..... typed_array100] 
```

我想将所有 1 到 100 个子数组连接成单个“结果”，这个函数对我有用。

```
 single_array = concat(arrays)

function concat(arrays) {
  // sum of individual array lengths
  let totalLength = arrays.reduce((acc, value) => acc + value.length, 0);

  if (!arrays.length) return null;

   let result = new Uint8Array(totalLength);

      // for each array - copy it over result
      // next array is copied right after the previous one
      let length = 0;
      for(let array of arrays) {
            result.set(array, length);
            length += array.length;
      }

      return result;
   } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-06-08T15:32:13.733

作为一个单行，它将采用任意数量的数组（`myArrays`此处）和混合类型，只要结果类型将它们全部（`Int8Array`此处）：

```
let combined = Int8Array.from(Array.prototype.concat(...myArrays.map(a => Array.from(a)))); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-09-04T09:40:18.277

对于喜欢单线的人：

```
 const binaryData = [
    new Uint8Array([1, 2, 3]),
    new Int16Array([4, 5, 6]),
    new Int32Array([7, 8, 9])
  ];

  const mergedUint8Array = new Uint8Array(binaryData.map(typedArray => [...new Uint8Array(typedArray.buffer)]).flat()); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-11-17T03:20:15.573

```
function concat (views: ArrayBufferView[]) {
    let length = 0
    for (const v of views)
        length += v.byteLength

    let buf = new Uint8Array(length)
    let offset = 0
    for (const v of views) {
        const uint8view = new Uint8Array(v.buffer, v.byteOffset, v.byteLength)
        buf.set(uint8view, offset)
        offset += uint8view.byteLength
    }

    return buf
} 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2019-07-11T16:09:30.520

我喜欢@prinzhorn 的回答，但我想要一些更灵活和紧凑的东西：

```
var a = new Uint8Array( [ 1, 2, 3 ] );
var b = new Float32Array( [ 4.5, 5.5, 6.5 ] );

const merge = (tArrs, type = Uint8Array) => {
  const ret = new (type)(tArrs.reduce((acc, tArr) => acc + tArr.byteLength, 0))
  let off = 0
  tArrs.forEach((tArr, i) => {
    ret.set(tArr, off)
    off += tArr.byteLength
  })
  return ret
}

merge([a, b], Float32Array) 
```

# deployment - JBossAS 7.1 + Apache2 多个应用程序/网站

> ID：14071465
> 
> 赞同：0
> 
> 时间：2012-12-28T15:03:08.583
> 
> 标签：deployment, jboss, apache2, jboss7.x

我需要在我的 Apache2 + JBoss7AS 独立环境中部署*www.first.com*和*www.second.com 。*

我成功配置了 mod_jk，并运行了第一个 Web 应用程序。

Standalone.xml 有：

```
<subsystem xmlns="urn:jboss:domain:web:1.1" default-virtual-server="default-host" native="false">
            <connector name="http" protocol="HTTP/1.1" scheme="http" socket-binding="http"/>
            <connector name="ajp" protocol="AJP/1.3" scheme="http" socket-binding="ajp"/>
            <virtual-server name="default-host" enable-welcome-root="false">
                <alias name="localhost"/>
                <alias name="www.first.com"/>
            </virtual-server>
        </subsystem> 
```

而我的 jboss-web.xml，在这两个应用程序中都是：

```
<?xml version="1.0" encoding="UTF-8"?>
<jboss-web>
    <security-domain>java:/jaas/test</security-domain>
    <context-root>/</context-root>
</jboss-web> 
```

如何让 www.first.com 指向 first.war 部署的应用程序和 www.second.com 指向 second.war 部署的应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T15:19:53.807

直接来自[JBoss AS7 社区 Wiki](https://community.jboss.org/wiki/VirtualHostsWithJBossAS7?_sscc=t)：

> 要使用您的 Web 应用程序定义其他虚拟主机，请不要忘记将 default-web-module 设置为 Web 模块的名称，默认情况下是没有“.war”扩展名的战争名称：

```
<subsystem xmlns="urn:jboss:domain:web:1.0" default-virtual-server="virtualServerName">
    <connector name="http" protocol="HTTP/1.1" socket-binding="http" scheme="http"/>
    <virtual-server name="first.com" default-web-module="first" enable-welcome-root="false">
        <alias name="localhost"/>
        <alias name="www.first.com"/>
    </virtual-server>
    <virtual-server name="second.com" default-web-module="second" enable-welcome-root="false">
        <alias name="www.second.com"/>
    </virtual-server>
</subsystem> 
```

# python - 每个文档中 ISODates 之间的区别？

> ID：14071466
> 
> 赞同：1
> 
> 时间：2012-12-28T15:03:13.280
> 
> 标签：python, mongodb, datetime, pymongo, timedelta

**是否可以计算文档服务器端**中两个日期之间的差异并对其进行查询？（就像 SQL 的[`DATEDIFF`](http://msdn.microsoft.com/en-au/library/ms189794.aspx)函数）

假设我有很多这样的文件：

```
>>> db.collection.find()
[
    { "id" : ObjectId("1"), 
      "starttime" : ISODate("2011-12-01T05:01:00"), # 5:01 AM
      "endtime" : ISODate("2011-12-01T05:02:00")    # 5:02 AM 
    }, 

    { "id" : ObjectId("2"), 
      "starttime" : ISODate("2011-12-01T06:01:00"), # 6:01:00 AM
      "endtime" : ISODate("2011-12-01T06:01:30")    # 6:01:30 AM 
    }
] 
```

有没有办法实现类似的东西？

返回时差：

```
>>> db.collection.date_difference_seconds(endtime, starttime)
[60, 30] 
```

或查询：

```
>>> db.collection.find("timediff(endtime-starttime) < 40 seconds")
[
    { "id" : ObjectId("2"), ...} # Just second document (30s diff)
] 
```

我已经阅读了有关[服务器端 JS](http://docs.mongodb.org/manual/applications/server-side-javascript/)和的信息`eval()`，但文档说不推荐这些 - 它们是最佳选择吗？

* * *

（我显然可以将时间差以秒为单位添加为附加字段（`"time_diff": 30`），或者在 Python 客户端计算差异，但我想知道它是否可能在服务器端）

客户端计算：

```
>>> for doc in (collection.find(None, {'starttime': 1, 'endtime': 1 }))
        doc['endtime']-doc['startime']
0:01:00.000000
0:00:30.000000 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T21:13:47.303

正如 Sammaye 所建议的，我认为唯一的方法是使用 aggregate() 函数。例如，执行以下操作：

```
db.collection.aggregate([{$project: {timediff: {$subtract: ['$endtime' , '$starttime']}}}]) 
```

您实际上是在定义一个新的运行时字段“timediff”，它是根据现有数据计算的。然后，您应该能够向`$match`管道添加一个步骤以过滤差异：

```
db.collection.aggregate([{$project: {timediff: {$subtract: ['$endtime' , '$starttime']}}}, {$match: {timediff: {$lte: 40}}}]) 
```

我还没有尝试过这个具体的例子，所以可能会有一些丢失的大括号或括号......但希望你明白这一点。就您可以定义的数据管道而言，聚合框架非常强大。

祝你好运！

# c#-4.0 - 在写作之前删除所有以前的文本

> ID：14071475
> 
> 赞同：12
> 
> 时间：2012-12-28T15:03:47.640
> 
> 标签：c#-4.0, stream, streamwriter

我正在写一个文本文件，每次我写我都想**清除**文本文件。

```
try
{
    string fileName = "Profile//" + comboboxSelectProfile.SelectedItem.ToString() + ".txt";
    using (StreamWriter sw = new StreamWriter(("Default//DefaultProfile.txt").ToString(), true))
    {
        sw.WriteLine(fileName);
        MessageBox.Show("Default is set!");
    }
    DefaultFileName = "Default//DefaultProfile.txt";
}
catch 
{ 
} 
```

我该怎么做呢？我想从**DefaultProfile.txt**中删除所有以前的内容。

我实际上必须知道从文本文件中删除所有内容的方法或方式（可能只是一个名称）。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-28T15:07:55.663

您可以将一个空字符串写入现有文件：

```
File.WriteAllText(@"Default\DefaultProfile.txt", string.Empty); 
```

或者更改`StreamWriter`构造函数中的第二个参数`false`以*替换*文件内容而不是*附加*到文件中。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-28T15:11:45.837

你可以看看**Truncate**方法

```
FileInfo fi = new FileInfo(@"Default\DefaultProfile.txt");
using(TextWriter txtWriter = new StreamWriter(fi.Open(FileMode.Truncate)))
{
    txtWriter.Write("Write your line or content here");
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-05-04T02:52:42.240

最直接有效的技术是使用 StreamWriter 构造函数的布尔参数。当它设置为 false 时，它​​会用当前操作覆盖文件。例如，我必须将数学运算的输出保存到文本文件中。每次我只想要文本文件中的当前答案。因此，在第一个 StreamWriter 操作中，我将布尔值设置为 false，随后的调用将 bool val 设置为 true。结果是，对于每一个新的操作，之前的答案都会被覆盖，只显示新的答案。

```
 int div = num1 / denominator;
        int mod = num1 % denominator;
        Console.Write(div);
        using (StreamWriter writer = new StreamWriter(FILE_NAME, false ))
        {
            writer.Write(div);
        }
        Console.Write(".");
        using (StreamWriter writer = new StreamWriter(FILE_NAME, true))
        {
            writer.Write(".");
        } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-04-13T04:22:14.927

您可以使用`FileMode.Truncate`. 代码看起来像

```
FileStream fs = new 
FileStream(filePath, FileMode.Truncate, FileAccess.Write )
{  
  fs.Close();
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-28T15:08:01.140

`System.IO.File.Delete`，或`System.IO.FileStream`指定的构造函数重载之一`FileMode.Create`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-09-10T09:19:09.577

只需将的构造函数中的第二个参数从 更改`true`为。`false``StreamWriter`

```
using (StreamWriter sw = new StreamWriter(("Default//DefaultProfile.txt").ToString(), **false**)) 
```

请参阅[StreamWriter 构造函数](https://docs.microsoft.com/en-us/dotnet/api/system.io.streamwriter.-ctor?view=netframework-4.7.2#System_IO_StreamWriter__ctor_System_String_System_Boolean_)

# python - Python 打印语句中的语法错误

> ID：14071479
> 
> 赞同：1
> 
> 时间：2012-12-28T15:04:09.380
> 
> 标签：python, eclipse, python-2.7, syntax-error

我试图弄清楚为什么我在 Eclipse 中的 Python 打印语句中收到以下语法错误：

```
 print(md5_to_hex(md5(message)),' <= "',message.decode('ascii'),'"', sep='')
                                                                           ^
SyntaxError: invalid syntax 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T15:06:55.777

```
from __future__ import print_function 
```

Print 还不是一个函数，导入未来版本的 print 让它以这种方式运行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-28T15:08:50.253

在 python-2.x 中

```
print(whatever) 
```

大致*相当于

```
print whatever 
```

在你的情况下，`whatever`是

```
md5_to_hex(md5(message)),' <= "',message.decode('ascii'),'"', sep='' 
```

这不是一个有效的表达式。

* （如果`(whatever)`是元组，则不正确）

# c - 将 POSIX 显示为没有 gmtime 和 asctime 的日历日期

> ID：14071481
> 
> 赞同：1
> 
> 时间：2012-12-28T15:04:30.910
> 
> 标签：c, date, time, time.h

我目前有一个包含 POSIX 时间戳的双精度，并且我成功地使用 gmtime 和 asctime 通过 time_t 结构显示日历日期：

```
 time_t input = posix;
    printf("%s",asctime(gmtime(&input))); 
```

这很好用，除非（显然）当 POSIX 时间超出 time.h 库的限制（即 1901-2038）时，在这种情况下它返回 1901 年的日期。gmtime/asctime/time.h 是否有任何简单的替代方法，还是我只需要处理原始数据？

编辑：我应该补充一点，结果很可能超出这些限制，因为 posix double 是计算的结果，而不是当前系统时间的实例化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T17:05:37.197

阅读[关于 Unix 时间的 Wikipedia 条目](http://en.wikipedia.org/wiki/Unix_time)：

> `<time.h>`POSIX 和 Open Group Unix 规范包括 C 标准库，其中包括头文件中定义的时间类型和函数。ISO C 标准规定`time_t`必须是算术类型，但不强制要求任何特定类型或编码。

如果您需要以可移植的方式处理大范围的时间，您可能必须使用自己的时间库。我认为您甚至不能指望`struct tm`覆盖 1901 年到 2038 年以外的范围。

您可能还想阅读[有关 time_t 的 StackOverflow 答案](https://stackoverflow.com/a/471287/266392)。

# c++ - 基类的变化需要重新编译派生

> ID：14071485
> 
> 赞同：1
> 
> 时间：2012-12-28T15:04:50.170
> 
> 标签：c++, implementation

在 Bjarne 的“C++ ...”中，我刚刚读过

> 大多数 C++ 实现的工作方式意味着基类大小的变化需要重新编译所有派生类

$12.4.3 p.318

在大小？或者更确切地说是总体上的变化？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T15:13:58.867

在典型情况下，大小的变化需要重新编译所有派生类。其他更改也可能需要重新编译派生类（例如，更改成员的顺序和/或类型可能需要重新编译，即使大小保持不变）。

我认为 Bjarne 试图得到的大部分内容是，从内存布局的角度来看，派生通常被实现为聚合。例如，如果您从以下内容开始：

```
struct A { 
   int x;
   int y;
};

struct B : A { 
   int a;
   int b;
};

B b; 
```

的内存布局`b`将如下所示：

```
| X | Y | a | b | 
```

...因此，当/如果大小发生`A`变化时， 的成员`B`将存储在复合对象中的不同偏移量处。

对于典型的构建系统，对包含基类定义的标头的任何更改都将导致重新编译所有派生类，无论更改是否需要重新编译（即，如果标头具有更新的更改日期与依赖它的源文件相比，源文件将被重新编译，即使所做的所有更改都是，例如，对代码没有任何影响的注释）。

# ruby - end_with 返回的结果不正确？红宝石法

> ID：14071488
> 
> 赞同：1
> 
> 时间：2012-12-28T15:05:01.067
> 
> 标签：ruby, regex

我正在尝试使用以下代码检查 HTML img 标记中的图像 src

```
extension.end_with?(/[.jpg|.gif|.png|.jpeg]/).should eq(true) 
```

其中扩展 =“teaser_image610x450.jpg”

我也试过

```
 extension.end_with?(/[.]jpg|gif|png|jpeg/).should eq(true) 
```

在这两种情况下，我都得到了错误。上面的代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T15:09:43.047

您可以使用以下表格：

```
extension.end_with?(".jpg",".gif",".png",".jpeg") 
```

或者，像这样：

```
extensions = [".jpg",".gif",".png",".jpeg"]
if extensions.include?(extension)
  # do something here
end 
```

我以前从未见过这种方法与正则表达式一起使用。

# ios - 从 url IOS 下载 uimageview 时未显示微调器

> ID：14071493
> 
> 赞同：1
> 
> 时间：2012-12-28T15:05:41.887
> 
> 标签：ios, spinner, lazy-loading

当从一个视图移动到另一个视图时，我希望在我的第二个视图中，只要正在下载图像以查看微调器（这样第二个视图将立即打开而不需要任何时间，并且用户等待微调器结束）。

这是我的代码：

在第二个视图中，打开的那个：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.

    UIActivityIndicatorView *spinner=[[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
    spinner.center=CGPointMake(160.0,240.0 );
    spinner.hidesWhenStopped=YES;
    [self.view addSubview:spinner];
    [spinner startAnimating];

NSString *urlString=[NSString stringWithFormat:@"http://mysite.com/projects/test/test.jpg"];

    NSLog(@"URL is:%@",urlString);
    NSURL *url=[NSURL URLWithString:urlString];
    [more_info_image setImage:[UIImage imageWithData:[NSData dataWithContentsOfURL:url]]];

    [spinner stopAnimating];
} 
```

我根本看不到微调器。我不认为这是因为我的互联网连接太胖了。另一方面，当按下按钮并等待视图打开时，我看到了一点延迟——就像它尝试下载图像的时候一样。

我想打开视图，拥有微调器，下载图像，然后让微调器消失。

我必须改变什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T15:11:16.750

`UIActivityIndicatorView`由于您`[NSData dataWithContentsOfURL:url]`在主线程上使用，您可能看不到。这会阻止主线程显示，`UIActivityIndicatorView`直到图像下载完成，然后您将其删除。

您可能想要执行以下操作：

但请确保您在文件中定义`spinner`了`*.h`此功能。

```
- (void)viewDidLoad
{
   ...

   //This code will make downloadImage run in the background thread
   [self performSelectorInBackground:@(downloadImage) withObject:nil]

   ...
}

- (void) downloadImage{
    NSLog(@"URL is:%@",urlString);
    NSURL *url=[NSURL URLWithString:urlString];
    UIImage *downloadedImage = [UIImage imageWithData:[NSData dataWithContentsOfURL:url]];

    //This code will make setImage run in the main thread since it is changing UI
    [more_info_image performSelectorOnMainThread:@selector(setImage:) withObject:downloadedImage waitUntilDone:NO];
    //This code will make stopAnimating run in the main thread since it is changing UI
    [spinner performSelectorOnMainThread:@selector(stopAnimating) withObject:nil waitUntilDone:NO];

} 
```

另一种方法是使用[Grand Central Dispatch](https://developer.apple.com/library/mac/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)并执行以下操作：

```
- (void)viewDidLoad
{

    [super viewDidLoad];
    // Do any additional setup after loading the view.

    UIActivityIndicatorView *spinner=[[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
    spinner.center=CGPointMake(160.0,240.0 );
    spinner.hidesWhenStopped=YES;
    [self.view addSubview:spinner];
    [spinner startAnimating];

    //This is the new GCD code
    dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0ul);
    dispatch_async(queue, ^{
        //This code will run on a background thread
        NSString *urlString=[NSString stringWithFormat:@"http://mysite.com/projects/test/test.jpg"];

        NSLog(@"URL is:%@",urlString);
        NSURL *url=[NSURL URLWithString:urlString];
        UIImage *downloadedImage = [UIImage imageWithData:[NSData dataWithContentsOfURL:url]];

        dispatch_sync(dispatch_get_main_queue(), ^{
            //this code runs on the main thread since it is UI changes
            [more_info_image setImage:downloadedImage];

            [spinner stopAnimating];
        });
    });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T15:14:58.613

当您在 viewDidLoad 方法中下载图像时，因此在下载图像时它没有加载您的视图，这就是您遇到延迟的原因，试试这个

在你的头文件中添加一个 UIActivityIndi​​cator 的实例

```
UIActivityIndicator *spinner; 
```

在你的实现文件中做这样的事情

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.

    spinner=[[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
    spinner.center=CGPointMake(160.0,240.0 );
    spinner.hidesWhenStopped=YES;
    [self.view addSubview:spinner];
    [spinner startAnimating];
    [self performSelector:@selector(downloadYourImageMethod) withObject:nil afterDelay:1];
}

-(void)downloadYourImageMethod
{
    NSString *urlString=[NSString stringWithFormat:@"http://mysite.com/projects/test/test.jpg"];
    NSURL *url=[NSURL URLWithString:urlString];
    [myIMageview setImage:[UIImage imageWithData:[NSData dataWithContentsOfURL:url]]];

    [spinner stopAnimating];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T15:09:49.933

将您的代码修改为

```
 - (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.

    UIActivityIndicatorView *spinner=[[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
    spinner.center=CGPointMake(160.0,240.0 );
    spinner.hidesWhenStopped=YES;
    [self.view addSubview:spinner];
    [spinner startAnimating];
     [self performSelector:@selector(downloadImage) withObject:nil afterDelay:0.1];
}

-(void)downloadImage
{
NSString *urlString=[NSString stringWithFormat:@"http://mysite.com/projects/test/test.jpg"];

    NSLog(@"URL is:%@",urlString);
    NSURL *url=[NSURL URLWithString:urlString];
    [more_info_image setImage:[UIImage imageWithData:[NSData dataWithContentsOfURL:url]]];

    [spinner stopAnimating];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-28T01:07:38.970

有时，这完全取决于您如何放置您的视图。微调器应该是添加到层次结构中的最后一个东西，以便在视图加载时成为顺序中的第一个。这是我的问题，我希望这可以帮助其他遇到这个答案的人。:)

# asp.net-mvc-3 - MVC3 视图更新问题

> ID：14071494
> 
> 赞同：0
> 
> 时间：2012-12-28T15:05:52.190
> 
> 标签：asp.net-mvc-3, image, modelstate

这是一个设置`ViewBag`要显示的图像的操作。

```
public ActionResult UploadPhoto()
{
    List<string> images = new List<string>();

    foreach (var file in Directory.GetFiles(AlbumManager.GetAlbumName(SessionManager.CurrentSession.PropertyId, true)))
    {
        images.Add(Server.RelativePath(file));
    }

    ViewBag.Images = images;

    return PartialView("UploadPhoto");
} 
```

这是一个发布操作，用于删除所选图像。

```
[HttpPost]
public ActionResult DeletePhoto(string imageName)
{
    AlbumManager.DeletePhoto(SessionManager.CurrentSession.PropertyId, imageName);
    return UploadPhoto();
} 
```

如您所见，一旦删除完成，我会将其重定向到`UploadPhoto`必须打印当前存在的图像的操作。但是在回发后，删除的图像仍在显示。我非常不确定这种行为。请帮我解决这个问题。

我尝试使用以下代码清除模型状态`DeletePhoto`，但没有用。

```
ModelState.Clear(); 
```

我的观点：

```
@using (Html.BeginForm("DeletePhoto", "Add", FormMethod.Post, new { id = "PhotoDelete" }))
{
    <input type="hidden" name="imageName" id="imageName" />

    <div class="thumnailsBox">
        @foreach (var image in ViewBag.Images)
        {
            <div class="thumnailTails">
                <span class="thumbimage">
                    <input id="imageSubmit" type="image" alt="No Image" src="@Url.Content(image)" /></span>
            </div>
        }
    </div>
} 
```

* * *

## **解决方案：**

除了[IronMan84](https://stackoverflow.com/users/391762/ironman84)的回答，这里是我的问题的实际解决方案：

```
[HttpPost]
public ActionResult DeletePhoto(string imageName)
{
    AlbumManager.DeletePhoto(SessionManager.CurrentSession.PropertyId, imageName);
    return JavaScript("location.reload(true)");
} 
```

我正在渲染一个脚本以在此处重新加载页面。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T15:09:20.200

您没有重定向到`UploadPhoto`操作。

用于`RedirectToAction("UploadPhoto");`重定向。

此外，您可以尝试调试代码以检查您`AlbumManager`是否未缓存数据或未执行删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T15:14:39.900

我认为 MVC 正在缓存第一种方法的操作输出。您应该检查[OutputCache](http://msdn.microsoft.com/en-us/library/system.web.mvc.outputcacheattribute%28v=vs.100%29.aspx)的文档，您可以尝试设置`NoStore`属性，如果这不起作用，也许`Duration`0 会阻止缓存？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T15:25:05.733

您在 UploadPhoto 中返回一个 PartialView，但您的表单实际上并未针对 DOM 对象来使用该 PartialView 的结果进行更新。我建议切换到`Ajax.BeginForm()`, 并在您的 AjaxOptions 中包含您要更新的 DOM 对象的名称。有关更多信息，请尝试查看[此页面](http://geekswithblogs.net/blachniet/archive/2011/08/03/updating-partial-views-with-unobtrusive-ajax-in-mvc-3.aspx)。

# android - 检查 JSONArray 的特定值

> ID：14071495
> 
> 赞同：24
> 
> 时间：2012-12-28T15:05:54.180
> 
> 标签：android, json

在我的 Android 活动中，我通过包含用户名的 HTTP 获取 JSONArray。数组如下所示：

```
[{"username":"Julia"},{"username":"Anja"},{"username":"Hans"},{"username":"Sophia"},{"username":"Sarah"}] 
```

如果给定的用户名已经存在，我想检查 Android Activity。

最有效的方法是什么？还是我必须遍历整个数组？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-12-28T15:23:20.453

使用简单的字符串函数/方法，如

```
private boolean userexists(JSONArray jsonArray, String usernameToFind){
    return jsonArray.toString().contains("\"username\":\""+usernameToFind+"\"");
} 
```

# java - 从另一个 Java 文件动态编译和运行 Hadoop 作业

> ID：14071496
> 
> 赞同：1
> 
> 时间：2012-12-28T15:05:54.827
> 
> 标签：java, dynamic, hadoop, classnotfoundexception

我正在尝试编写一个 Java 文件来接收 MapReduce 作业的源代码，动态编译它并在 Hadoop 集群上运行该作业。为此，我编写了 3 个方法，称为 compile()、makeJAR() 和 run_Hadoop_Job()。JAR 文件的编译和创建一切正常。但是，当作业提交到 Hadoop 时，一旦作业开始，它就会面临查找所需 Mapper/Reducer 类的问题，并为 Mapper_Class 和 Reducer_Class 抛出 ClassNotFoundException ***(java.lang.ClassNotFoundException: reza.rCloud.Mapper_Reducer_Classes $Mapper_Class.class)***. 我知道我引用所需的 Mapper/Reducer 类的方式应该有问题，但是在几次之后我无法弄清楚。非常感谢任何有关如何解决问题的帮助/建议。

**关于项目的详细信息：**我有一个名为“rCloud_test/src/reza/Mapper_Reducer_Classes.java”的文件，其中包含 Mapper_Class 和 Reducer_Class 的源代码。该文件最终在运行时收到，但现在我将 Hadoop WordCount 示例复制到其中，并将其本地存储在与我的主类文件相同的文件夹中：rCloud_test/src/reza/Platform2.java。

下面你可以看到 Platform2.java 的 main() 方法，这是我这个项目的主要类：

```
 public static void main(String[] args){
    System.out.println("Code Execution Started");
    String className = "Mapper_Reducer_Classes";
    Platform2 myPlatform = new Platform2();

    //step 1: compile the received class file dynamically:
    boolean compResult = myPlatform.compile(className); 
    System.out.println(className + ".java compilation result: "+compResult);

    //step 2: make a JAR file out of the compiled file:
    if (compResult) {
        compResult  = myPlatform.makeJAR("jar_file", myPlatform.compilation_Output_Folder);
        System.out.println("JAR creation result: "+compResult);
    } 
    //step 3: Now let's run the Hadoop job:
    if (compResult) {       
        compResult = myPlatform.run_Hadoop_Job(className);
        System.out.println("Running on Hadoop result: "+compResult);
    } 
```

导致我所有问题的方法是 run_Hadoop_Job() ，如下所示：

```
private boolean run_Hadoop_Job(String className){
try{
    System.out.println("*Starting to run the code on Hadoop...");
    String[] argsTemp = { "project_test/input", "project_test/output" };

    Configuration conf = new Configuration();
    conf.set("fs.default.name", "hdfs://localhost:54310");
    conf.set("mapred.job.tracker", "localhost:54311");

    conf.set("mapred.jar", jar_Output_Folder + "/jar_file"+".jar");

    conf.set("libjars", required_Execution_Classes);

    //THIS IS WHERE IT CAN'T FIND THE MENTIONED CLASSES, ALTHOUGH THEY EXIST BOTH ON DISK 
    // AND IN THE CREATED JAR FILE:??????
    System.out.println("Getting Mapper/Reducer package name: " + 
                        Mapper_Reducer_Classes.class.getName());
    conf.set("mapreduce.map.class", "reza.rCloud.Mapper_Reducer_Classes$Mapper_Class");
    conf.set("mapreduce.reduce.class", "reza.rCloud.Mapper_Reducer_Classes$Reducer_Class");

    Job job = new Job(conf, "Hadoop Example for dynamically and programmatically compiling-running a job");
    job.setJarByClass(Platform2.class);

    job.setOutputKeyClass(Text.class);
    job.setOutputValueClass(IntWritable.class);

    FileInputFormat.addInputPath(job, new Path(argsTemp[0]));
    FileSystem fs = FileSystem.get(conf);
    Path out = new Path(argsTemp[1]);
    fs.delete(out, true);
    FileOutputFormat.setOutputPath(job, new Path(argsTemp[1]));

    //job.submit();
    System.out.println("*and now submitting the job to Hadoop...");
    System.exit(job.waitForCompletion(true) ? 0 : 1); 
    System.out.println("Job Finished!");        
} catch (Exception e) {         
            System.out.println("****************Exception!" ); 
            e.printStackTrace();
            return false; 
    }
return true;
} 
```

如果需要，这里是 compile() 方法的源代码：

```
private boolean compile(String className) {
    String fileToCompile =  JOB_FOLDER   + "/" +className+".java";
    JavaCompiler compiler = ToolProvider.getSystemJavaCompiler();       
    FileOutputStream errorStream = null;        
    try{
        errorStream = new FileOutputStream(JOB_FOLDER + "/logs/Errors.txt");
    } catch(FileNotFoundException e){ 
        //if problem creating the file, default wil be console 
    }   

    int compilationResult = 
            compiler.run(   null, null, errorStream, 
                            "-classpath", required_Compilation_Classes,
                            "-d", compilation_Output_Folder,
                            fileToCompile);
    if (compilationResult == 0) {
        //Compilation is successful:
        return true;
    } else {
        //Compilation Failed:
        return false;
    }   
} 
```

以及 makeJAR() 方法的源代码：

```
private boolean makeJAR(String outputFileName, String inputDirectory) {
    Manifest manifest = new Manifest();
    manifest.getMainAttributes().put(Attributes.Name.MANIFEST_VERSION,
            "1.0");

    JarOutputStream target = null;                      
    try {       
        target = new JarOutputStream(new FileOutputStream(
                jar_Output_Folder+ "/"  
                + outputFileName+".jar"                      ), manifest);
        add(new File(inputDirectory), target);
    } catch (Exception e) { return false; }
    finally {
        if (target != null)
            try{
                target.close();
            } catch (Exception e) { return false; }
    }
    return true;
}

    private void add(File source, JarOutputStream target) throws IOException
{
  BufferedInputStream in = null;
  try
  {
    if (source.isDirectory())
    {
      String name = source.getPath().replace("\\", "/");
      if (!name.isEmpty())
      {
        if (!name.endsWith("/"))
          name += "/";
        JarEntry entry = new JarEntry(name);
        entry.setTime(source.lastModified());
        target.putNextEntry(entry);
        target.closeEntry();
      }
      for (File nestedFile: source.listFiles())
        add(nestedFile, target);
      return;
    }

    JarEntry entry = new JarEntry(source.getPath().replace("\\", "/"));
    entry.setTime(source.lastModified());
    target.putNextEntry(entry);
    in = new BufferedInputStream(new FileInputStream(source));

    byte[] buffer = new byte[1024];
    while (true)
    {
      int count = in.read(buffer);
      if (count == -1)
        break;
      target.write(buffer, 0, count);
    }
    target.closeEntry();
  }
  finally
  {
    if (in != null)
      in.close();
  }
} 
```

最后是用于访问文件的固定参数：

```
private String JOB_FOLDER = "/Users/reza/My_Software/rCloud_test/src/reza/rCloud";
private String HADOOP_SOURCE_FOLDER = "/Users/reza/My_Software/hadoop-0.20.2";
private String required_Compilation_Classes = HADOOP_SOURCE_FOLDER + "/hadoop-0.20.2-core.jar";
private String required_Execution_Classes = required_Compilation_Classes + "," +
     "/Users/reza/My_Software/ActorFoundry_dist_ver/lib/commons-cli-1.1.jar," +
     "/Users/reza/My_Software/ActorFoundry_dist_ver/lib/commons-logging-1.1.1.jar";
public String compilation_Output_Folder = "/Users/reza/My_Software/rCloud_test/dyn_classes";
private String jar_Output_Folder = "/Users/reza/My_Software/rCloud_test/dyn_jar"; 
```

运行 Platform2 后，磁盘上的项目结构如下：

rCloud_test/classes/reza/rCloud/Platform2.class：包含 Platform2 类 rCloud_test/dyn_classes/reza/rCloud/ 包含 Mapper_Reducer_Classes.class、Mapper_Reducer_Classes$Mapper_Class.class 和 Mapper_Reducer_Classes$Reducer_Class.class 的类。 jar 包含创建的 jar 文件

修订版：这是 rCloud_test/src/reza/rCloud/Mapper_Reducer_Classes.java 的源代码：

```
package reza.rCloud;

import java.io.IOException;
import java.lang.InterruptedException;
import java.util.StringTokenizer;

import org.apache.hadoop.io.IntWritable;
import org.apache.hadoop.io.Text;
import org.apache.hadoop.conf.Configuration;
import org.apache.hadoop.fs.Path;
import org.apache.hadoop.mapreduce.Job;
import org.apache.hadoop.mapreduce.Mapper;
import org.apache.hadoop.mapreduce.Reducer;
import org.apache.hadoop.mapreduce.lib.input.FileInputFormat;
import org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;
import org.apache.hadoop.util.GenericOptionsParser;

public class Mapper_Reducer_Classes {
/**
 * The map class of WordCount.
 */
public static class Mapper_Class
    extends Mapper<Object, Text, Text, IntWritable> {

    private final static IntWritable one = new IntWritable(1);
    private Text word = new Text();

    public void map(Object key, Text value, Context context)
        throws IOException, InterruptedException {
        StringTokenizer itr = new StringTokenizer(value.toString());
        while (itr.hasMoreTokens()) {
            word.set(itr.nextToken());
            context.write(word, one);
        }
    }
}
/**
 * The reducer class of WordCount
 */
public static class Reducer_Class
    extends Reducer<Text, IntWritable, Text, IntWritable> {
    public void reduce(Text key, Iterable<IntWritable> values, Context context)
        throws IOException, InterruptedException {
        int sum = 0;
        for (IntWritable value : values) {
            sum += value.get();
        }
        context.write(key, new IntWritable(sum));
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T19:16:12.290

尝试使用[setClass()](http://hadoop.apache.org/docs/r1.1.1/api/org/apache/hadoop/conf/Configuration.html#setClass%28java.lang.String,%20java.lang.Class,%20java.lang.Class%29)方法设置它们：

```
conf.setClass("mapreduce.map.class", 
              Class.forName("reza.rCloud.Mapper_Reducer_Classes$Mapper_Class"),
              Mapper.class);

conf.setClass("mapreduce.reduce.class",
              Class.forName("reza.rCloud.Mapper_Reducer_Classes$Reducer_Class"),
              Reducer.class); 
```

# performance - 有效地对数据帧进行采样，避免循环

> ID：14071498
> 
> 赞同：1
> 
> 时间：2012-12-28T15:06:02.220
> 
> 标签：performance, r, loops, sampling

我有一个数据框，它由第一列（experiment.id）组成，其余列是与此实验 id 关联的值。每行都是一个唯一的实验 ID。我的数据框有 10⁴ - 10⁵ 的列。

```
data.frame(experiment.id=1:100, v1=rnorm(100,1,2),v2=rnorm(100,-1,2) ) 
```

这个数据框是我的样本空间的来源。我想做的是为每个唯一的experiment.id（行）随机抽样（替换）与此id相关的值v1，v2，....，v10000之一并构造一个样本s1。在每个样本 s1 中，都表示了所有实验 ID。

最终我想执行 10⁴ 样本，s1，s2，.....，s 10⁴ 并计算一些统计数据。

执行此采样过程的最有效方式（计算上）是什么。我想尽可能避免 for 循环。

**更新：** 我的问题不仅涉及采样，还涉及存储样本。我想我真正的问题是除了

```
d<-data.frame(experiment.id=1:1000, replicate (10000,rnorm(1000,100,2)) )
results<-data.frame(d$experiment.id,replicate(n=10000,apply(d[,2:10001],1,function(x){sample(x,size=1,replace=T)}))) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T15:25:11.850

这是一个选择其中一列（不包括第一列）的表达式。它不会复制第一列，您需要将其作为单独的步骤提供。

对于数据框`d`：

```
d[matrix(c(seq(nrow(d)), sample(ncol(d)-1, nrow(d), replace=TRUE)+1), ncol=2)] 
```

那是一个样本。要获取`N`样本，只需将选择相乘（如约翰的回答）：

```
mm <- matrix(c(rep(seq(nrow(d)), N), sample(ncol(d)-1, nrow(d)*N, replace=TRUE)+1), ncol=2)

result <- matrix(d[mm], ncol=N) 
```

但是你会有记忆问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T16:33:05.293

最短和最易读的恕我直言，仍然可以使用，但要充分利用向量化`apply`的事实：`sample`

```
results <- data.frame(experiment.id = d$experiment.id,
                      t(apply(d[, -1], 1, sample, 10000, replace = TRUE))) 
```

如果 3 秒对您的需求来说太慢了，那么我建议您使用矩阵索引。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-28T15:31:04.100

没有任何循环是可能的。如果将第一个列之后的列转换为矩阵，这将变得很容易，因为矩阵可以作为 [row, column] 或按顺序寻址，因为它是基础向量。

```
mat <- as.matrix(datf[,-1])
nr <- nrow(mat); nc <- ncol(mat)
sel <- sample( 1:nc, nr, replace = TRUE )
sel <- sel + ((1:nr)-1) * nc
x <- t(mat)[sel]
seldatf <- data.frame( datf[,1], x = x ) 
```

现在，要获得大量样本，只需将相同的逻辑相乘即可。

```
ns <- 10 # number of samples / row
sel <- sample(1:nc, nr * ns, replace = TRUE )
sel <- sel + rep(((1:nr)-1) * nc, each = ns)
x <- t(mat)[sel]
seldatf <- cbind( datf[,1],  data.frame(matrix(x, ncol = ns, byrow = TRUE)) ) 
```

如果您要设置`ns <- 1e5`并且有很多行，它可能会成为一个非常大的数据框。您可能需要注意内存不足。出于可读性的原因，我做了一些不必要的复制。您可以消除内存和速度的问题，因为一旦您使用大量内存，您将换出其他正在运行的程序。那很慢。您不必分配和保存 x、mat 甚至 sel。不这样做的结果将为您提供最快的答案。

# objective-c - 在 monotouch 中构建静态库

> ID：14071500
> 
> 赞同：5
> 
> 时间：2012-12-28T15:06:06.090
> 
> 标签：objective-c, xamarin.ios

是否可以使用**MonoTouch**构建一个可供 Xcode 开发人员使用的静态库？标题呢？

我来自 C# 背景，我有一个大型库可以移植到 iOS。

如果我可以将它保存在 C# 中并根据需要进行调整，它会为我节省大量时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T11:35:04.160

AFAIK 这是不可能的。看这里：

[MonoTouch：从 Obj-C 到 MonoTouch](https://stackoverflow.com/questions/5472993/monotouch-talking-from-obj-c-to-monotouch)

哪个链接到一个*试图*做你想做的事情的项目：

[http://www.guidebee.biz/forum/redirect.php?fid=16&tid=176&goto=nextoldset](http://www.guidebee.biz/forum/redirect.php?fid=16&tid=176&goto=nextoldset)

# php - 我无法在 SugarCRM 中解决此错误

> ID：14071503
> 
> 赞同：1
> 
> 时间：2012-12-28T15:06:16.150
> 
> 标签：php, sugarcrm, sugarbean

在SugarCRM（项目管理）模块中称为“项目”，默认不附带“导入”，它添加了以下编程步骤：

```
http://forums.sugarcrm.com/f148/how-add-importación-opción-custom-modules-45612/ 
```

现在我在导入 Next 时抛出错误：

> 致命错误：Llamada a una función miembro get_importable_fields () en un no-objeto en C:\Archivos de programa\Apache Software Foundation\Apache2.2\htdocs\Azúcar\modules\Import\views\view.step3.php en línea 217

请有人帮助我...如有必要...我将上传文件，以便他们帮助 view.step3.php

这是第 217 行：

```
 $fields  = $this->bean->get_importable_fields();
        $options = array();
        $defaultField = '';
        global $current_language;
        $moduleStrings = return_module_language($current_language, $this->bean->module_dir); 
```

在这里，我发布了以上几行：

```
class ImportViewStep3 extends ImportView 
```

{

```
protected $pageTitleKey = 'LBL_STEP_3_TITLE';
protected $currentFormID = 'importstep3';
protected $previousAction = 'Confirm';
protected $nextAction = 'dupcheck';

/**
 * @see SugarView::display()
 */
public function display()
{
    global $mod_strings, $app_strings, $current_user, $sugar_config, $app_list_strings, $locale;

    $this->ss->assign("IMPORT_MODULE", $_REQUEST['import_module']);
    $has_header = ( isset( $_REQUEST['has_header']) ? 1 : 0 );
    $sugar_config['import_max_records_per_file'] = ( empty($sugar_config['import_max_records_per_file']) ? 1000 : $sugar_config['import_max_records_per_file'] );
    $this->ss->assign("CURRENT_STEP", $this->currentStep);
    // attempt to lookup a preexisting field map
    // use the custom one if specfied to do so in step 1
    $mapping_file = new ImportMap();
    $field_map = $mapping_file->set_get_import_wizard_fields();
    $default_values = array();
    $ignored_fields = array();

    if ( !empty( $_REQUEST['source_id']))
    {
        $GLOBALS['log']->fatal("Loading import map properties.");
        $mapping_file = new ImportMap();
        $mapping_file->retrieve( $_REQUEST['source_id'],false);
        $_REQUEST['source'] = $mapping_file->source;
        $has_header = $mapping_file->has_header;
        if (isset($mapping_file->delimiter))
            $_REQUEST['custom_delimiter'] = $mapping_file->delimiter;
        if (isset($mapping_file->enclosure))
            $_REQUEST['custom_enclosure'] = htmlentities($mapping_file->enclosure);
        $field_map = $mapping_file->getMapping();
        //print_r($field_map);die();
        $default_values = $mapping_file->getDefaultValues();
        $this->ss->assign("MAPNAME",$mapping_file->name);
        $this->ss->assign("CHECKMAP",'checked="checked" value="on"');
    }
    else
    {
        $classname = $this->getMappingClassName(ucfirst($_REQUEST['source']));

        //Set the $_REQUEST['source'] to be 'other' for ImportMapOther special case
        if($classname == 'ImportMapOther')
        {
            $_REQUEST['source'] = 'other';
        }

        if (class_exists($classname))
        {
            $mapping_file = new $classname;
            $ignored_fields = $mapping_file->getIgnoredFields($_REQUEST['import_module']);
            $field_map2 = $mapping_file->getMapping($_REQUEST['import_module']);
            $field_map = array_merge($field_map,$field_map2);
        }
    }

    $delimiter = $this->getRequestDelimiter();

    $this->ss->assign("CUSTOM_DELIMITER", $delimiter);
    $this->ss->assign("CUSTOM_ENCLOSURE", ( !empty($_REQUEST['custom_enclosure']) ? $_REQUEST['custom_enclosure'] : "" ));

   //populate import locale  values from import mapping if available, these values will be used througout the rest of the code path

    $uploadFileName = $_REQUEST['file_name'];

    // Now parse the file and look for errors
    $importFile = new ImportFile( $uploadFileName, $delimiter, html_entity_decode($_REQUEST['custom_enclosure'],ENT_QUOTES), FALSE);

    if ( !$importFile->fileExists() ) {
        $this->_showImportError($mod_strings['LBL_CANNOT_OPEN'],$_REQUEST['import_module'],'Step2');
        return;
    }

    $charset = $importFile->autoDetectCharacterSet();

    // retrieve first 3 rows
    $rows = array();

    //Keep track of the largest row count found.
    $maxFieldCount = 0;
    for ( $i = 0; $i < 3; $i++ )
    {
        $rows[] = $importFile->getNextRow();
        $maxFieldCount = $importFile->getFieldCount() > $maxFieldCount ?  $importFile->getFieldCount() : $maxFieldCount;
    }
    $ret_field_count = $maxFieldCount;

    // Bug 14689 - Parse the first data row to make sure it has non-empty data in it
    $isempty = true;
    if ( $rows[(int)$has_header] != false ) {
        foreach ( $rows[(int)$has_header] as $value ) {
            if ( strlen(trim($value)) > 0 ) {
                $isempty = false;
                break;
            }
        }
    }

    if ($isempty || $rows[(int)$has_header] == false) {
        $this->_showImportError($mod_strings['LBL_NO_LINES'],$_REQUEST['import_module'],'Step2');
        return;
    }

    // save first row to send to step 4
    $this->ss->assign("FIRSTROW", base64_encode(serialize($rows[0])));

    // Now build template
    $this->ss->assign("TMP_FILE", $uploadFileName );
    $this->ss->assign("SOURCE", $_REQUEST['source'] );
    $this->ss->assign("TYPE", $_REQUEST['type'] );
    $this->ss->assign("DELETE_INLINE_PNG",  SugarThemeRegistry::current()->getImage('basic_search','align="absmiddle" alt="'.$app_strings['LNK_DELETE'].'" border="0"'));
    $this->ss->assign("PUBLISH_INLINE_PNG",  SugarThemeRegistry::current()->getImage('advanced_search','align="absmiddle" alt="'.$mod_strings['LBL_PUBLISH'].'" border="0"'));

    $this->instruction = 'LBL_SELECT_MAPPING_INSTRUCTION';
    $this->ss->assign('INSTRUCTION', $this->getInstruction());

    $this->ss->assign("MODULE_TITLE", $this->getModuleTitle(false));
    $this->ss->assign("STEP4_TITLE",
        strip_tags(str_replace("\n","",getClassicModuleTitle(
            $mod_strings['LBL_MODULE_NAME'],
            array($mod_strings['LBL_MODULE_NAME'],$mod_strings['LBL_STEP_4_TITLE']),
            false
            )))
        );
    $this->ss->assign("HEADER", $app_strings['LBL_IMPORT']." ". $mod_strings['LBL_MODULE_NAME']);

    // we export it as email_address, but import as email1
    $field_map['email_address'] = 'email1';

    // build each row; row count is determined by the the number of fields in the import file
    $columns = array();
    $mappedFields = array();

    // this should be populated if the request comes from a 'Back' button click
    $importColumns = $this->getImportColumns();
    $column_sel_from_req = false;
    if (!empty($importColumns)) {
        $column_sel_from_req = true;
    }

    for($field_count = 0; $field_count < $ret_field_count; $field_count++) {
        // See if we have any field map matches
        $defaultValue = "";
        // Bug 31260 - If the data rows have more columns than the header row, then just add a new header column
        if ( !isset($rows[0][$field_count]) )
            $rows[0][$field_count] = '';
        // See if we can match the import row to a field in the list of fields to import
        $firstrow_name = trim(str_replace(":","",$rows[0][$field_count]));
        if ($has_header && isset( $field_map[$firstrow_name] ) ) {
            $defaultValue = $field_map[$firstrow_name];
        }
        elseif (isset($field_map[$field_count])) {
            $defaultValue = $field_map[$field_count];
        }
        elseif (empty( $_REQUEST['source_id'])) {
            $defaultValue = trim($rows[0][$field_count]);
        }

        // build string of options
        $fields  = $this->bean->get_importable_fields(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T11:56:08.547

这是我的编码 project.php：

class Project extends SugarBean { // 数据库表列

```
var $id;
var $date_entered;
var $date_modified;
var $assigned_user_id;
var $modified_user_id;
var $created_by;
var $name;
var $description;
var $deleted;

// related information
var $assigned_user_name;
var $modified_by_name;
var $created_by_name;

var $account_id;
var $contact_id;
var $opportunity_id;
var $email_id;
var $estimated_start_date;

// calculated information
var $total_estimated_effort;
var $total_actual_effort;

var $object_name = 'Project';
var $module_dir = 'Project';
var $new_schema = true;
var $table_name = 'project';
var $importable = true;

// This is used to retrieve related fields from form posts.
var $additional_column_fields = array(
    'account_id',
    'contact_id',
    'opportunity_id',
);

var $relationship_fields = array(
    'account_id' => 'accounts',
    'contact_id'=>'contacts',
    'opportunity_id'=>'opportunities',
    'email_id' => 'emails',
);

//////////////////////////////////////////////////////////////////
// METHODS
//////////////////////////////////////////////////////////////////

/**
 *
 */
function Project()
{
    parent::SugarBean();
}

/**
 * overriding the base class function to do a join with users table
 */

/**
 *
 */
function fill_in_additional_detail_fields()
{
    parent::fill_in_additional_detail_fields();

    $this->assigned_user_name = get_assigned_user_name($this->assigned_user_id);
    //$this->total_estimated_effort = $this->_get_total_estimated_effort($this->id);
    //$this->total_actual_effort = $this->_get_total_actual_effort($this->id);
}

/**
 *
 */
function fill_in_additional_list_fields()
{
    parent::fill_in_additional_list_fields();
    $this->assigned_user_name = get_assigned_user_name($this->assigned_user_id);
    //$this->total_estimated_effort = $this->_get_total_estimated_effort($this->id);
    //$this->total_actual_effort = $this->_get_total_actual_effort($this->id);
}

/**
* Save changes that have been made to a relationship.
*
* @param $is_update true if this save is an update.
*/
function save_relationship_changes($is_update, $exclude=array())
{
    parent::save_relationship_changes($is_update, $exclude);
    $new_rel_id = false;
    $new_rel_link = false;
    //this allows us to dynamically relate modules without adding it to the relationship_fields array
    if(!empty($_REQUEST['relate_id']) && !in_array($_REQUEST['relate_to'], $exclude) && $_REQUEST['relate_id'] != $this->id){
        $new_rel_id = $_REQUEST['relate_id'];
        $new_rel_relname = $_REQUEST['relate_to'];
        if(!empty($this->in_workflow) && !empty($this->not_use_rel_in_req)) {
            $new_rel_id = $this->new_rel_id;
            $new_rel_relname = $this->new_rel_relname;
        }
        $new_rel_link = $new_rel_relname;
        //Try to find the link in this bean based on the relationship
        foreach ( $this->field_defs as $key => $def ) {
            if (isset($def['type']) && $def['type'] == 'link'
            && isset($def['relationship']) && $def['relationship'] == $new_rel_relname) {
                $new_rel_link = $key;
            }
        }
        if ($new_rel_link == 'contacts') {
            $accountId = $this->db->getOne('SELECT account_id FROM accounts_contacts WHERE contact_id=' . $this->db->quoted($new_rel_id));
            if ($accountId !== false) {
                if($this->load_relationship('accounts')){
                    $this->accounts->add($accountId);
                }
            }
        }
    }
}
/**
 *
 */
function _get_total_estimated_effort($project_id)
{
    $return_value = '';

    $query = 'SELECT SUM('.$this->db->convert('estimated_effort', "IFNULL", 0).') total_estimated_effort';
    $query.= ' FROM project_task';
    $query.= " WHERE parent_id='{$project_id}' AND deleted=0";

    $result = $this->db->query($query,true," Error filling in additional detail fields: ");
    $row = $this->db->fetchByAssoc($result);
    if($row != null)
    {
        $return_value = $row['total_estimated_effort'];
    }

    return $return_value;
}

/**
 *
 */
function _get_total_actual_effort($project_id)
{
    $return_value = '';

    $query = 'SELECT SUM('.$this->db->convert('actual_effort', "IFNULL", 0).') total_actual_effort';
    $query.=  ' FROM project_task';
    $query.=  " WHERE parent_id='{$project_id}' AND deleted=0";

    $result = $this->db->query($query,true," Error filling in additional detail fields: ");
    $row = $this->db->fetchByAssoc($result);
    if($row != null)
    {
        $return_value = $row['total_actual_effort'];
    }

    return $return_value;
}

/**
 *
 */
function get_summary_text()
{
    return $this->name;
}

/**
 *
 */
function build_generic_where_clause ($the_query_string)
{
    $where_clauses = array();
    $the_query_string = $GLOBALS['db']->quote($the_query_string);
    array_push($where_clauses, "project.name LIKE '%$the_query_string%'");

    $the_where = '';
    foreach($where_clauses as $clause)
    {
        if($the_where != '') $the_where .= " OR ";
        $the_where .= $clause;
    }

    return $the_where;
}

function get_list_view_data()
{
    $field_list = $this->get_list_view_array();
    $field_list['USER_NAME'] = empty($this->user_name) ? '' : $this->user_name;
    $field_list['ASSIGNED_USER_NAME'] = $this->assigned_user_name;
    return $field_list;
}
  function bean_implements($interface){
    switch($interface){
        case 'ACL':return true;
    }
    return false;
}

function create_export_query(&$order_by, &$where, $relate_link_join='')
{
    $custom_join = $this->custom_fields->getJOIN(true, true,$where);
    if($custom_join)
            $custom_join['join'] .= $relate_link_join;
    $query = "SELECT
            project.*,
            users.user_name as assigned_user_name ";
    if($custom_join){
        $query .=  $custom_join['select'];
    }
    $query .= " FROM project ";

    if($custom_join){
        $query .=  $custom_join['join'];
    }
    $query .= " LEFT JOIN users
                ON project.assigned_user_id=users.id ";

    $where_auto = " project.deleted=0 ";

    if($where != "")
        $query .= "where ($where) AND ".$where_auto;
    else
        $query .= "where ".$where_auto;

    if(!empty($order_by)){
        //check to see if order by variable already has table name by looking for dot "."
        $table_defined_already = strpos($order_by, ".");

        if($table_defined_already === false){
            //table not defined yet, define accounts to avoid "ambigous column" SQL error
            $query .= " ORDER BY $order_by";
        }else{
            //table already defined, just add it to end of query
            $query .= " ORDER BY $order_by";
        }
    }
    return $query;
}
function getAllProjectTasks(){
    $projectTasks = array();

    $query = "SELECT * FROM project_task WHERE project_id = '" . $this->id. "' AND deleted = 0 ORDER BY project_task_id";
    $result = $this->db->query($query,true,"Error retrieving project tasks");
    $row = $this->db->fetchByAssoc($result);

    while ($row != null){
        $projectTaskBean = new ProjectTask();
        $projectTaskBean->id = $row['id'];
        $projectTaskBean->retrieve();
        array_push($projectTasks, $projectTaskBean);

        $row = $this->db->fetchByAssoc($result);
    }

    return $projectTasks;
} 
```

} ?>

# c - Linux OS / Intel 64 位架构的 CPU 温度

> ID：14071505
> 
> 赞同：3
> 
> 时间：2012-12-28T15:06:20.630
> 
> 标签：c, linux-kernel, load, cpu, temperature

我遇到了几篇文章来阅读 CPU 温度和风扇速度 [ [1](https://stackoverflow.com/questions/1195112/how-to-get-cpu-temperature) , [2]](https://stackoverflow.com/questions/1195112/how-to-get-cpu-temperature)，但找不到使用 Linux 操作系统的 64 位 i7 Intel 架构（四核）的任何文章。任何人都可以指向任何可以读取单个核心温度和可能的风扇速度的文章和/或源代码。我一直在浏览英特尔架构中的性能计数器，我发现[第 14 章](http://www.intel.com/content/dam/www/public/us/en/documents/manuals/64-ia-32-architectures-software-developer-vol-3a-part-1-manual.pdf)描述了热状态信息的[热监视器](http://www.intel.com/content/dam/doc/manual/64-ia-32-architectures-software-developer-vol-3b-part-2-manual.pdf)。任何读取这些信息/寄存器的示例 C 代码都会有很大帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T15:15:34.923

一种常见的方法是阅读`/sys/class/thermal/thermal_zone0/temp`。

你可以看一下 i3status 的源代码，它是用 C 编写的并且能够显示 CPU 温度：[print_cpu_temperature.c](http://code.stapelberg.de/git/i3status/tree/src/print_cpu_temperature.c)

# c++ - 如何在不更改命令行的情况下禁用断言？

> ID：14071513
> 
> 赞同：2
> 
> 时间：2012-12-28T15:07:04.730
> 
> 标签：c++, debugging, assert

我有带有断言的 C++ 代码。当我使用选项编译代码时，`g++ -D NDEBUG`不会执行任何断言命令。但是，当我在代码中包含 NDEBUG 并在`#define NDEBUG`没有选项的情况下编译它时`-D NDEBUG`，会执行 assert 命令。如何在不更改命令行的情况下禁用断言？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-28T15:09:57.670

您必须`NDEBUG`在包含定义`assert`. 尝试

```
#define NDEBUG
#include <assert.h> 
```

在要禁用断言的源文件的顶部。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-28T15:14:46.220

通过定义`NDEBUG`. 在实践中，你永远不会 `-D NDEBUG`在命令行中编译。您应该定义自己的调试命令，然后当探查器显示您无法负担特定函数中的检查时，将该函数包装为：

```
//  Non-critical code...

#ifdef MYDEBUGOFF
#define NDEBUG
#endif
#include <assert.h>

//  Critical function

#undef NDEBUG
#include <assert.h>

//  More non-critical code. 
```

您可以随意添加`<assert.h>`；每次它`assert`根据当时是否定义宏来重新定义宏`NDEBUG`。因此，您可以随心所欲地调整；只是`#define NDEBUG`或`#undef NDEBUG`每次在您包含标题之前。

# java - 命令行和 groovyConsole 上的 groovy 错误

> ID：14071516
> 
> 赞同：2
> 
> 时间：2012-12-28T15:07:20.897
> 
> 标签：java, groovy

当我尝试运行以下代码时，出现错误：

++++++++++++++++++++++++++++++++++++++++

```
groovy:000> 1st = [1, 2, 3] 
```

++++++++++++++++++++++++++++++++++++++++

这是我得到的错误：

```
ERROR groovy.lang.MissingMethodException:
No signature of method: java.lang.Integer.call() is applicable for argument types: (java.util.ArrayList) values: [[1, 2, 3]]
Possible solutions: wait(), any(), abs(), wait(long), any(groovy.lang.Closure), and(java.lang.Number)
        at groovysh_evaluate.run (groovysh_evaluate:2) 
```

任何想法可能是什么问题？

铁螳螂7x

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T15:10:05.300

变量不能以数字开头。将 1st 更改为 first 足以使一切按预期工作：

```
 first = [1,2,3] 
```

# search - REDIS 哈希 HMSET 中的 COUNT 和 SEARCH

> ID：14071517
> 
> 赞同：3
> 
> 时间：2012-12-28T15:07:27.350
> 
> 标签：search, count, redis, hash

请REDIS高手帮忙。我想在 redis 哈希中计数和搜索。

我的用户数据：

```
| id | name    | age | country |
| 1  | jaspal  | 32  | US
| 2  | singh   | 45  | UK
| 4  | manjot  | 24  | US
| 5  | tarleen | 20  | UK
| 7  | daljeet | 30  | US
| 8  | sutdhar | 40  | US 
```

... 等等

我使用 HMSET 将此用户数据存储在 redis 中，例如：

```
HMSET user:1 name "jaspal"  age "32" country "US"
HMSET user:2 name "singh"   age "45" country "UK"
HMSET user:4 name "manjot"  age "24" country "US"
HMSET user:5 name "tarleen" age "20" country "UK"
HMSET user:7 name "daljeet" age "30" country "US"
HMSET user:8 name "sutdhar" age "40" country "US" 
```

现在我想要以下内容：

1.  计算哈希用户中的记录数。
2.  只获取记录`WHERE country=US AND age BETWEEN 31 AND 40`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T13:35:30.667

你不能只用哈希来做到这一点。Redis 不支持按值搜索；在您的情况下，您需要使用[排序集](http://redis.io/commands#sorted_set)将年龄和国家/地区存储在分数中，将用户 ID 存储在值中。例如：

```
zadd user:ages 30 1 34 2 45 3 and so on... 
```

比您可以选择指定年龄范围内的所有用户：

```
zrangebyscore user:ages 30 40 
```

国家也一样（您需要使用数字国家表示）

您可以使用 lua 脚本在 redis 端相交或联合选择结果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-02T09:12:43.070

要计算哈希用户中的记录数，请使用[HLEN](http://redis.io/commands/HLEN)。它返回存储在 key 的哈希中包含的字段数。

`HLEN user:1`

它将返回“3”。

# asp.net - 为什么这个程序没有进入我的 ElseIf 语句——System.DBNull

> ID：14071519
> 
> 赞同：3
> 
> 时间：2012-12-28T15:07:43.830
> 
> 标签：asp.net, vb.net, if-statement, dbnull

我将 Excel 文件导入到 ASP.NET 数据表中。有些值是空白的，特别是在索引 2 和 3 处，我想将这些空白字段设置为`0`.

`row.item(2)`调试时，和的值`row.item(3)`都是`System.DBNull`. 有趣的是，程序进入`If`语句并将`row.item(2)`值设置为 0，但它从未进入`ElseIf`语句。到底是怎么回事？这是我的代码：

```
If row.Item(2) Is Nothing OrElse row.Item(2).ToString = "" OrElse IsDBNull(row.Item(2)) Then
    dt.Rows.Item(i).SetField(2, 0)

ElseIf row.Item(3) Is Nothing OrElse row.Item(3).ToString = "" OrElse IsDBNull(row.Item(3)) Then
    dt.Rows.Item(i).SetField(3, 0)
End If 
```

编辑：

根据 Tim 的建议，我将代码修改如下：

```
If Not row.Field(Of Int32?)(2).HasValue Then
    dt.Rows.Item(i).SetField(2, 0)
End If

If Not row.Field(Of Int32?)(3).HasValue Then
    dt.Rows.Item(i).SetField(3, 0)
End If 
```

但是，这会引发错误-`Object cannot be cast from DBNull to other types`

调试时，在第一个循环中：

`row.Item(2) = 17`

`row.Item(3) = 1`

理论上，它应该跳过这个迭代并继续下一个迭代。但是，我的程序会立即捕获带有上述错误的异常。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-28T15:10:51.233

由于您`if`正在执行，因此您`else if`将不会执行。

如果您希望您的`else if`逻辑即使执行也能`if`执行，只需将其设为自己的`if`块：

```
If row.Item(2) Is Nothing OrElse row.Item(2).ToString = "" OrElse IsDBNull(row.Item(2)) Then
    dt.Rows.Item(i).SetField(2, 0)
End If

If row.Item(3) Is Nothing OrElse row.Item(3).ToString = "" OrElse IsDBNull(row.Item(3)) Then
    dt.Rows.Item(i).SetField(3, 0)
End If 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T15:11:08.340

你不提供样本数据，所以我们只需要猜测。但我的猜测是你想要两个 If 语句.. 而不是 ElseIf。ElseIf 将仅在 If 语句返回 false 时进行评估。

# raphael - 如何在 Rally sdk 2.0 中添加自定义 HTML？

> ID：14071523
> 
> 赞同：1
> 
> 时间：2012-12-28T15:08:01.023
> 
> 标签：raphael, rally, graphael, justgage

我正在使用 Rally SDK 2.0 创建一个带有一些自定义仪表的应用程序。这需要一些自定义 HTML。我从示例中获取了一个 rake 编译的 app.html 文件作为起点。使用 JustGage 作为我的仪表。这是我的启动功能。

```
launch: function () {
                var info = this.getStoriesForProject(); //Gets some aggregate info

                $('#header label').html(info.Title);
                var g = new JustGage({
                    id: "devgauge",
                    value: info.DevPercent,
                    levelColors: ['#f80404', '#f8f804', '#50ed0e'],
                    min: 0,
                    max: 100,
                    title: "Dev %"
                });

                this.add('foo');

            }, 
```

然后我在 app.html 中添加了一些自定义 HTML。

![在此处输入图像描述](../Images/871f0ce3fcda41ad7ca1d7e8a6f4b61d.png)

现在，如果我在没有代码“this.add('foo')”的情况下运行它，应用程序会在正文中添加一个带有 class="x-container" 的新 div，并将我的自定义 HTML 放在该 div 之外，从而有效地隐藏它。

如果我使用“this.add('foo') 它不会创建 div class=x-container 并且它显示我的小部件就好了。

什么是完成我正在尝试使用 2.0 sdk 的正确方法？我意识到 add 方法是用于添加 Ext 组件，但是以某种方式调用它会导致我的 HTML 渲染正常。查看我们在旧 SDK 中开发的一些应用程序，使用自定义 HTML 在这些应用程序中运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T17:32:45.377

Ext 喜欢知道布局方面发生了什么，如果你在它不知道的情况下手动操作它下面的 dom，它经常会感到困惑。通常，如果我们有一些已知的初始布局集，我们会通过应用程序上的项目集合添加它们：

```
Ext.define('My.App', {
    extend: 'Rally.app.App',
    items: [
        {
            xtype: 'container',
            itemId: 'header'
        },
        {
            xtype: 'container',
            itemId: 'devguage'
        }
    ]
}); 
```

然后在启动过程中，您可以向以下内容添加内容：

```
this.down('#devguage').add({
    //some other component
}); 
```

你也可以一直下降到元素级别：

```
this.down('#header').getEl().dom //the raw html element 
```

默认情况下，应用程序使用自动布局，因此任何项目都应该按照您对普通 html 的预期流动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-25T22:07:40.030

或者，您可以使用其 id 属性设置容器元素的 id，而不是使用 itemId：

```
Ext.define('My.App', {
    extend: 'Rally.app.App',
    items: [
        {
            xtype: 'container',
            id: 'header'
        },
        {
            xtype: 'container',
            id: 'devguage'
        }
    ]
}); 
```

生成的 html 元素将使用这些 id，这允许您使用自己的自定义渲染直接定位它们。

# mysql - 将 mySQL 从开发转移到生产

> ID：14071524
> 
> 赞同：1
> 
> 时间：2012-12-28T15:08:02.970
> 
> 标签：mysql, dev-to-production

我需要将开发 mysql 数据库与生产数据库同步。生产数据库通过用户点击和通过网络生成的其他数据进行更新。开发数据库通过处理数据进行更新。

实现这一目标的最佳做法是什么？

我找到了一些差异工具（例如 mySQL 差异），但它们不管理更新的记录。我还找到了一些应用程序解决方案：[http](http://www.isocra.com/2004/10/dumptosql/) ://www.isocra.com/2004/10/dumptosql/ 但我不确定这是一个好习惯，因为在这种情况下，我每次添加新的与 innodb 相关的代码时都需要重新测试我的代码表。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T15:20:23.300

看看`mysqldump`。它可能会为您提供足够的服务。

假设您的表都使用某种唯一键进行索引，您可以进行转储并让它省略“删除/创建表”位。让它作为“插入忽略”运行，您将获得新数据而不影响现有数据。

另一种选择是使用 mysqldump 的查询部分仅从生产端转储新记录。再次 - 让 mysqldump 去掉“删除/创建”位。

# wordpress - 此页面上使用的是什么 WP 幻灯片插件？

> ID：14071527
> 
> 赞同：0
> 
> 时间：2012-12-28T15:08:18.510
> 
> 标签：wordpress, slideshow

我试图找出他们在此页面上为幻灯片内容使用的插件 - 我尝试阅读代码，但它没有给我任何关于它具体内容的指示。

[http://www.rd.com/slideshows/15-secrets-the-emergency-room-staff-wont-tell-you/?trkid=outbrain-all#slideshow=slide15](http://www.rd.com/slideshows/15-secrets-the-emergency-room-staff-wont-tell-you/?trkid=outbrain-all#slideshow=slide15)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T16:25:40.903

我不认为这是一个 WordPress 插件。源代码似乎表明他们自己创建了这个 jQuery 插件。（幻灯片的对象以 命名`rd`，即域名，又名读者文摘）。

他们*使用*jQuery hashchange 事件插件来帮助控制前进和后退按钮的状态。（在此处查看更多信息：http: [//benalman.com/projects/jquery-hashchange-plugin/](http://benalman.com/projects/jquery-hashchange-plugin/)）。

# kineticjs - 事件不适用于 kineticjs 中的自定义形状

> ID：14071528
> 
> 赞同：2
> 
> 时间：2012-12-28T15:08:18.910
> 
> 标签：kineticjs

我已经使用 Kinetic.Shape 在 kineticjs 中绘制了自定义形状，然后我试图将鼠标事件附加到这个形状上。但是该事件永远不会触发：

```
var myShape = new Kinetic.Shape({
      drawFunc: function (canvas) {
              var context = canvas.getContext();
              context .beginPath();
              context .moveTo(47.1, 139.8);
              context .lineTo(50.5, 137.6);
              .
              .
              .
              context .closePath();
              context .fillStyle = color;
              context .fill();

          },
          fill: '#2369e7',
          stroke: 'black',
          strokeWidth: 2
      });

myShape.on('mousedown', function ()
      {
          //this never fires
      }); 
```

我尝试了使用 Circle 和 Rectangle 的事件，例如示例文档，它可以工作。但是对于 Kinetic.Shape 对象，事件永远不会触发。任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T15:38:23.823

通过在 drawFunc 的末尾添加它来修复它：

```
canvas.fillStroke(this); 
```

# javascript - jQuery UI 对话框的最小边距

> ID：14071531
> 
> 赞同：0
> 
> 时间：2012-12-28T15:08:45.320
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-dialog

默认情况下，对话框是这样居中的：

```
$(el).dialog('option', 'position', 'center'); 
```

有什么方法可以设置与侧面的“最小”距离？（例如顶部位置应不小于 50px）。当对话框位置改变时是否有任何事件触发？找不到...

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T15:15:31.423

您看过[jQuery UI 定位实用程序](http://api.jqueryui.com/position/)吗？它说：

> 每个维度还可以包含偏移量，以像素或百分比为单位，例如“right+10 top-25%”。百分比偏移量是相对于被定位的元素的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T16:09:27.433

我放弃了与这个`position`选项的斗争，只是这样做了：

```
$(el).dialog('option', 'position', 'center');
var dWindow = $(el).closest('.ui-dialog');
if( parseInt( dWindow.css('top'), 10) < 50 )  {
    dWindow.css('top', '50px');
} 
```

# jquery - 悬停其他菜单项时隐藏活动子菜单

> ID：14071534
> 
> 赞同：0
> 
> 时间：2012-12-28T15:08:46.797
> 
> 标签：jquery, menu, navbar

我正在使用一个 CSS 类：

`#navbar .current-menu-ancestor ul.sub-menu {display:inline;}`

使其页面的子菜单具有粘性。

如果我悬停在其他顶级菜单项上，我需要隐藏它（通过 jQuery）。

例子：

热门项目 1
- 菜单 1a
- 菜单 1b
热门项目 2
热门项目 3
- 菜单 3a
- 菜单 3b
- 菜单 3c

如果我在菜单 1b 页面上，我现在显示了 Top Item 1 的所有子菜单。
当我将鼠标悬停在 Top Item 3 上以显示其子菜单并隐藏“活动”子菜单时，我需要它。

（这些是具有透明背景的水平子菜单......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T17:01:50.680

有一些方法可以通过 CSS 来做到这一点，这可能更可行。

Red Team Design.com 发布了一些非常流行的实现目标的方法：

*   [CSS动画下拉菜单教程](http://www.red-team-design.com/css3-animated-dropdown-menu)
*   [CSS 动画下拉菜单演示](http://www.red-team-design.com/wp-content/uploads/2011/11/css3-animated-dropdown-menu-demo.html)

这是一个很好的例子，它们也提供了有用的教程。但是，如果您绝对必须使用 jquery（例如，如果这是某种分配），我会坚持点击事件以避免复杂的代码，那么我真的很懒 :)

你可以很容易地做这样的事情：

演示：http: [//jsfiddle.net/jrb9249/5n5Bp/4/](http://jsfiddle.net/jrb9249/5n5Bp/4/)

HTML：

```
<html>
    <body>
        <div class="div_parent">
            <ul class="top_menu">
                <li><a href="#">Home</a></li>
                <li id="shop_li"><a href="#" onClick="javascript:mouseEvent('#shop_div')">Shop</a>
                    <div class="sub_div" id="shop_div">
                        <ul id="shopmenu" class="sub_menu">
                            <li>Electronics</li>
                            <li>Software</li>
                            <li>Mail-Order Brides</li>
                            <li>Insert bazaar product here</li>
                        </ul>
                    </div>
                </li>
                <li id="contact_li"><a href="#" onClick="javascript:mouseEvent('#contact_div')">Contact Us</a>
                    <div class="sub_div" id="contact_div">
                            <ul id="contactmenu" class="sub_menu">
                                <li>Email</li>
                                <li>Phone</li>
                            </ul>
                    </div>
                </li>
            </ul>
        </div>
    </body>
</html> 
```

Javascript：

```
var anim;

$(document).click(function(event){
    if(event.target.nodeName != 'LI' && (anim==0)){
        $('.sub_div').fadeOut('fast');
    };
});

anim = 0;
function mouseEvent(myid){
    $('.top_menu li > div').each(function(){
        $(this).fadeOut('fast');
    });
    anim = 1;
    $(myid).fadeIn('fast', function(){
        anim = 0;
    });
}; 
```

CSS：

```
.div_parent
{
    background:transparent;
    padding:5px;
    margin:0px;
    float:left;
    border:solid 1px gray;
}

.sub_div
{
    paddin:0px;
    margin:0px;
    position:absolute;
    margin-top:3px;
    display:none;
}

.top_menu, .sub_menu
{
    margin:0px;
    padding:0px;
    background:transparent;
}

.top_menu li
{
    float: left;
    display:inline;
    margin:0px 5px 0px 5px;
}

a:link,a:active,a:visited
{
    color:blue;
    text-decoration:none;
}

a:hover
{
    text-decoration:underline;
}

.sub_menu li
{
    clear:both;
    float:left;
    background:#E2EDD5;
    border:solid 1px white;
    padding:2px;
    width:150px;
}

.sub_menu li:hover
{
    cursor:pointer;
    background:#FFFFE8;
} 
```

这使用jquery的fadeOut动画（简单）和变量“anim”来避免打开和关闭表单之间的冲突。CSS 会为你整理好一切。我尝试在这个演示中尽可能多地使用 jquery。我希望它有所帮助。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T15:14:30.867

绑定到`.mouseleave()`事件。如同

```
$('.main_menu_container').mouseleave( function () {
    $(this).children('.submenu').hide();
}); 
```

# node.js - nodejs中的内存泄漏

> ID：14071540
> 
> 赞同：0
> 
> 时间：2012-12-28T15:09:15.403
> 
> 标签：node.js

我正在使用 http-proxy 将请求转发到特定端口

这是代码：

```
var httpProxy = require('http-proxy');

options   = {
    hostnameOnly:true,
    router: {
        'appname.nodejs.mydomain.com':'127.0.0.1:8001',
        'otherapp.nodejs.mydomain.com':'127.0.0.1:8002'
    }
}
httpProxy.createServer(options).listen(80); 
```

当我开始它工作得很好但在线用户超过 300 个用户后，出现警告

```
we have 338 users online.
(node) warning: possible EventEmitter memory leak detected. 11 listeners added. Use      emitter.setMaxListeners() to increase limit.
Trace
    at Socket.EventEmitter.addListener (events.js:175:15)
at Socket.EventEmitter.once (events.js:196:8)
at ClientRequest.HttpProxy.proxyRequest (/usr/local/lib/node_modules/http-proxy/lib/node-http-proxy/http-proxy.js:316:12)
at ClientRequest.g (events.js:192:14)
at ClientRequest.EventEmitter.emit (events.js:126:20)
at ClientRequest.onSocket (http.js:1525:9)
at process.startup.processNextTick.process._tickCallback (node.js:244:9)
we have 339 users online. 
```

你能给我关于这个问题的任何建议吗？

# javascript - 在随机 Javascript 中将 RGB 值转换为 HSL 值

> ID：14071556
> 
> 赞同：2
> 
> 时间：2012-12-28T15:10:28.080
> 
> 标签：javascript, css, random, rgb, hsl

我在这个网站的媒体框上有一个随机的颜色覆盖。

[http://www.reportageborsen.se/reportageborsen/wordpress/](http://www.reportageborsen.se/reportageborsen/wordpress/)

我从 stackoverflow 的伙伴那里得到了一些非常好的帮助，最终得到了这个脚本：

```
var getRandomInRange = function(min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
};
$('.media-box').each(function() {
    var mediaBox = $(this);
    var mask = mediaBox.find('.mask');
    var hue = 'rgb(' + getRandomInRange(100, 255) + ',' + getRandomInRange(100, 255) + ',' + getRandomInRange(100, 255) + ')';
    mask.css({
            backgroundColor : hue,
        opacity : 0.7            
             });
    mediaBox.hover(function() {
        mask.stop(true, true).fadeIn();
    }, function() {
        mask.stop(true, true).fadeOut();
    });
});​ 
```

小提琴链接：http: [//jsfiddle.net/b5ZPq/3/](http://jsfiddle.net/b5ZPq/3/)

然而，我希望有更多更亮的颜色和更少的灰色。我知道可以使用 HSL 值而不是 RGB 值来完成。

所以我尝试将 css 背景 rgb 值转换为 hsl 值并转换脚本，但我没有让它工作。

```
var getRandomInRange = function(min, max) {
    return Math.floor(Math.random() * (max - min + 1), 10) + min;
};
$('.media-box').each(function() {
    var mediaBox = $(this);
    var mask = mediaBox.find('.mask');
    var hue = 'hsl(' + getRandomInRange(0, 360) + ',' + getRandomInRange(70, 100) + '%' + getRandomInRange(45, 55) + '%)';
    mask.css({
        backgroundColor: hue,
        opacity: 0.7
    });
    mediaBox.hover(function() {
        mask.stop(true, true).fadeIn();
    }, function() {
        mask.stop(true, true).fadeOut();
    });
});​ 
```

[http://jsfiddle.net/zolana/Kc9U4/5/](http://jsfiddle.net/zolana/Kc9U4/5/) （小提琴，更新，工作：http: [//jsfiddle.net/zolana/Kc9U4/9/](http://jsfiddle.net/zolana/Kc9U4/9/) ）

（我不是在寻找将所有 RGB 值转换为 HSL 值的脚本（我知道有用于此目的的脚本），而是为这个特定任务提供可靠的脚本。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T15:14:23.763

请记住，当您使用 HSL 颜色（和其他颜色）时，您需要用逗号分隔每个值并使用正确的符号。在这种情况下，它如下所示。

> **hsl**（int*色调*，int*饱和度* **％**，int*亮度* **％**）

您在第二个参数之后缺少逗号（特别是在百分号之后）。

```
var hue = 'hsl(' + getRandomInRange(0, 360) + ',' + getRandomInRange(70, 100) + '%,' + getRandomInRange(45, 55) + '%)'; 
```

[http://jsfiddle.net/b5ZPq/4/](http://jsfiddle.net/b5ZPq/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T15:16:51.427

看看我写的这段代码：

```
function randomColor(){
    var h = Math.random();
    var s = 0.99;
    var v = 0.99;

    h = h + 0.618033988749895;
    h = h % 1;

    var r, g, b;

    var i = Math.floor(h * 6);
    var f = h * 6 - i;
    var p = v * (1 - s);
    var q = v * (1 - f * s);
    var t = v * (1 - (1 - f) * s);

    switch(i % 6){
        case 0: r = v, g = t, b = p; break;
        case 1: r = q, g = v, b = p; break;
        case 2: r = p, g = v, b = t; break;
        case 3: r = p, g = q, b = v; break;
        case 4: r = t, g = p, b = v; break;
        case 5: r = v, g = p, b = q; break;
    }

    return "rgba("+Math.floor(r*255)+","+ Math.floor(g*255)+","+ Math.floor(b*255)+","+ 0.2+")";
} 
```

它生成一个随机色调值，s 和 v 的恒定值。所以这会返回一个随机明亮的 rgb 颜色。因为我使用了黄金比例，所以颜色也很明亮和不同。如果遇到任何问题，请尝试使用它并返回。

# c++ - 奇怪的 strncpy 用法

> ID：14071557
> 
> 赞同：1
> 
> 时间：2012-12-28T15:10:35.383
> 
> 标签：c++, string

我已经看到这种方法的一个非常奇怪的（对我来说）用法：

```
strncpy(somePointer,"%d",someInt); 
```

这实际上是做什么的？整数说明符`"%d"`作为来源对我来说很难理解。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T15:11:45.470

它按照它在 tin 上所说的做：它将文字字符串复制`"%d"`到 char 指向的缓冲区中`somePointer`，或者至少`someInt`是它的第一个字节（最多三个）。

不要被百分号所困扰，它只是另一个角色......

# windows - 内核模式驱动程序和用户模式应用程序之间的双向通信？

> ID：14071565
> 
> 赞同：1
> 
> 时间：2012-12-28T15:10:55.703
> 
> 标签：windows, driver, interrupt, wfp, windows-kernel

我需要内核模式 WFP 驱动程序和用户模式应用程序之间的双向通信。驱动程序通过将 URL 传递给应用程序来启动通信，然后应用程序对该 URL 进行分类（娱乐、新闻、成人等）并将该类别传递回驱动程序。驱动程序需要知道过滤功能中的类别，因为它可能会根据该信息阻止某些网页。我在应用程序中有一个线程正在发出 I/O 请求，驱动程序将使用 URL 和 GUID 完成，然后应用程序会将类别写入该 GUID 下的注册表中，驱动程序将在其中提取它。不幸的是，正如驱动程序验证者所指出的那样，这是不稳定的，因为 Zw 注册表函数必须在 PASSIVE_LEVEL 运行。我正在考虑用映射的内存缓冲区尝试同样的事情，但我不确定中断要求是什么。另外，我想过在注册表函数调用之前降低中断级别，但我不知道这样做的副作用是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T10:36:42.470

您只需要有两种不同类型的 I/O 请求。

如果您[`DeviceIoControl`](http://msdn.microsoft.com/en-us/library/aa363216%28v=vs.85%29.aspx)用于检索 URL（我认为这将是最合适的方法），这就像添加第二个 I/O 控制代码一样简单。

如果您正在使用`ReadFile`或等效，事情通常会变得有点混乱，但在这种特定情况下，您只有两种操作，其中一种是读取（驱动程序->应用程序），另一种是写入（应用程序->驱动程序）。因此，您可以只使用`WriteFile`发送回复，当然包括 GUID，以便驱动程序可以将您的回复与正确的查询相匹配。

另一种方法（更类似于您原来的方法）是使用共享内存缓冲区。有关更多详细信息，请参阅[此答案](https://stackoverflow.com/a/11047456/886887)。这个想法的问题是你要么需要使用自旋锁（以系统性能和功耗为代价，当然不能在单核系统上工作），要么需要轮询（这既低效又不太适合时间敏感的操作）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T20:57:17.437

PASSIVE_LEVEL 没有什么不稳定的地方。对注册表的访问必须处于 PASSIVE_LEVEL，因此如果驱动程序以更高的 IRQL 运行，则无法直接访问。不过，您可以通过卸载到工作项来做到这一点。通常不建议降低 IRQL，因为它与操作系统的意图相矛盾。

您的协议确实听起来有些麻烦，并且直接进行应用程序驱动程序通信可能更可取。您可以在此处找到有关此的有用信息：http: [//msdn.microsoft.com/en-us/library/windows/hardware/ff554436 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/ff554436(v=vs.85).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-01T23:42:01.813

由于标注在 DISPATCH 中，您的处理必须在工作线程或 DPC 中完成，这将允许您使用 ZwXXX。您应该出于通信目的使用反向回调，OSR 上有一个很好的文档。

我刚刚开始研究 WFP，但看起来即使在他们提供的示例中，Microsoft 也会重新注入数据包。我没有仔细研究它，但似乎他们丢弃数据包并在处理时重新注入。这足以让您的使用模式引擎做出决定。您还应该将数据包捕获限制在特定端口（在您的情况下为 80），这样您就不会进行不需要的额外处理。

# c# - 按约定注册组件时未正确过滤 CustomAttribute

> ID：14071573
> 
> 赞同：1
> 
> 时间：2012-12-28T15:11:23.643
> 
> 标签：c#, dependency-injection, attributes, castle-windsor, conventions

我有以下自定义属性；它是标记需要显式注册的接口，而不是根据 Castle Windsor 中的约定进行注册：

```
using System;

[AttributeUsage(
        AttributeTargets.Interface | AttributeTargets.Class, 
        Inherited = true)]
public class ExplicitDependencyRegistrationRequiredAttribute : Attribute
{
} 
```

然后将其应用于接口，如下所示：

```
using Dependencies.Attributes;

[ExplicitDependencyRegistrationRequired]
public interface IRandomNumberGenerator
{
    int GetRandomNumber(int max);
} 
```

下面有一个简单的具体实现：

```
using System;

public class RandomNumberGenerator : IRandomNumberGenerator
{
    private readonly Random random = new Random();

    public int GetRandomNumber(int max)
    {
        return random.Next(max);
    }
} 
```

这个想法是，当在 Castle Windsor 中按照惯例注册组件时，我们不必担心重复注册或添加异常；相反，我们只需要确保接口标记有这个属性。然后过滤它的代码如下：

```
Type exclusionType = typeof(ExplicitDependencyRegistrationRequiredAttribute);

BasedOnDescriptor selectedTypes =
    Classes
      .FromAssembly(assembly)
      .Where(t => !Attribute.IsDefined(t, exclusionType, true))
      .WithServiceAllInterfaces(); 
```

问题是`Attribute.IsDefined`过滤器似乎不起作用，从具有属性的接口继承的组件仍在注册中。

当我将属性显式添加到`RandomNumberGenerator`类时，过滤器起作用；但是它似乎没有从界面继承，*或者*Castle Windsor 没有正确选择自定义属性。

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T15:20:22.857

接口上的属性[不会被实现接口的类继承](https://stackoverflow.com/questions/540749/can-a-c-sharp-class-inherit-attributes-from-its-interface)。您需要（再次）在类上声明属性，以使其按您想要的方式工作。

# licensing - 是否有 Gradle 许可证插件或处理依赖项许可证的最佳方法是什么？

> ID：14071574
> 
> 赞同：8
> 
> 时间：2012-12-28T15:11:37.350
> 
> 标签：licensing, gradle

我即将发布一个小小的爱好开源项目。由于它捆绑了一堆依赖项，因此我必须处理各种许可证要求。大多数情况下，这意味着向发行版添加一些许可证文件（至少这是我的理解，但你永远不知道律师）。

是否有一个 Gradle 插件可以解决这个问题，至少对于常见的开源许可证？

如果没有 Gradle 插件，是否有一种可接受的方法来处理这个问题，比如在自己的许可证之后列出所有 jars + 许可证，或者在每个 *.jar 文件旁边放置一个 *.license 文件或其他东西？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-31T08:10:52.727

Github 上有一个[Gradle License Plugin](https://github.com/hierynomus/license-gradle-plugin)（我是维护者）。目前，该插件仅向您的源文件添加和删除许可证标头。尚不支持将 jar 依赖项的许可证添加到 LICENSE 文件中，但这不应该太难添加，只是还没有时间。

# spring - 使用 Hibernate 的 Spring Security 自定义 UserDetailsS ervice

> ID：14071575
> 
> 赞同：2
> 
> 时间：2012-12-28T15:11:42.013
> 
> 标签：spring, hibernate, jboss, spring-security

在我的应用程序中，我使用的是 Spring 3.1.1.RELEASE、Hibernate 4.1，并且我使用的是带有 JDK7 的 JBoss AS7。

我想使用我的数据库（将是 Postgres，但为了简单起见，现在它是 Hypersonic）来存储我的用户凭据，而不是将它们保存在文件或配置文件本身中。

由于我已经在 Hibernate 中使用了 ORM，我想继续使用它来处理我的用户数据。我已经读到这需要一个自定义的 UserDetailsS​​ervice，但我无法让它工作。

看起来我的服务注册不正确，Spring当然无法接受它......任何帮助将不胜感激。

我的堆栈跟踪如下

```
08:33:33,354 INFO  [org.springframework.transaction.jta.JtaTransactionManager] (MSC service thread 1-4) Using JTA UserTransaction: org.jboss.tm.usertx.client.ServerVMClientUserTransaction@f0be919
08:33:33,354 INFO  [org.springframework.transaction.jta.JtaTransactionManager] (MSC service thread 1-4) Using JTA TransactionManager: com.arjuna.ats.jbossatx.jta.TransactionManagerDelegate@36eb5fab
08:33:33,355 INFO  [org.springframework.transaction.jta.JtaTransactionManager] (MSC service thread 1-4) Using JTA TransactionSynchronizationRegistry: com.arjuna.ats.internal.jta.transaction.arjunacore.TransactionSynchronizationRegistryImple@16d5efb8
08:33:33,395 INFO  [org.springframework.security.web.DefaultSecurityFilterChain] (MSC service thread 1-4) Creating filter chain: Ant [pattern='/static/**'], []
08:33:33,426 INFO  [org.springframework.beans.factory.support.DefaultListableBeanFactory] (MSC service thread 1-4) Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@6428975c: defining beans [tagDaoImpl,contentDaoImpl,userAccountDaoImpl,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.internalPersistenceAnnotationProcessor,org.springframework.aop.config.internalAutoProxyCreator,org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0,org.springframework.transaction.interceptor.TransactionInterceptor#0,org.springframework.transaction.config.internalTransactionAdvisor,entityManagerFactory,entityManager,dataSource,transactionManager,org.springframework.security.config.debug.SecurityDebugBeanFactoryPostProcessor#0,org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler#0,org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource#0,org.springframework.security.access.vote.AffirmativeBased#0,org.springframework.security.access.intercept.aopalliance.MethodSecurityInterceptor#0,org.springframework.security.methodSecurityMetadataSourceAdvisor,org.springframework.security.filterChains,org.springframework.security.filterChainProxy,org.springframework.security.web.DefaultSecurityFilterChain#0,org.springframework.security.web.PortMapperImpl#0,org.springframework.security.web.PortResolverImpl#0,org.springframework.security.config.authentication.AuthenticationManagerFactoryBean#0,org.springframework.security.authentication.ProviderManager#0,org.springframework.security.web.context.HttpSessionSecurityContextRepository#0,org.springframework.security.core.session.SessionRegistryImpl#0,org.springframework.security.web.authentication.session.ConcurrentSessionControlStrategy#0,org.springframework.security.web.savedrequest.HttpSessionRequestCache#0,org.springframework.security.web.access.expression.DefaultWebSecurityExpressionHandler#0,org.springframework.security.access.vote.AffirmativeBased#1,org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0,org.springframework.security.web.access.DefaultWebInvocationPrivilegeEvaluator#0,org.springframework.security.authentication.AnonymousAuthenticationProvider#0,org.springframework.security.web.authentication.rememberme.TokenBasedRememberMeServices#0,org.springframework.security.authentication.RememberMeAuthenticationProvider#0,org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter#0,org.springframework.security.userDetailsServiceFactory,org.springframework.security.web.DefaultSecurityFilterChain#1,daoAuthenticationProvider,authenticationManager,org.springframework.security.authentication.dao.DaoAuthenticationProvider#0,org.springframework.security.authentication.DefaultAuthenticationEventPublisher#0,org.springframework.security.authenticationManager,org.springframework.context.annotation.ConfigurationClassPostProcessor$ImportAwareBeanPostProcessor#0,springSecurityFilterChain]; root of factory hierarchy
08:33:33,433 ERROR [org.springframework.web.context.ContextLoader] (MSC service thread 1-4) Context initialization failed: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.filterChains': Cannot resolve reference to bean 'org.springframework.security.web.DefaultSecurityFilterChain#1' while setting bean property 'sourceList' with key [1]; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.web.DefaultSecurityFilterChain#1': Cannot create inner bean '(inner bean)' of type [org.springframework.security.web.session.ConcurrentSessionFilter] while setting constructor argument with key [1]; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name '(inner bean)#9': Cannot resolve reference to bean 'org.springframework.security.web.authentication.rememberme.TokenBasedRememberMeServices#0' while setting bean property 'logoutHandlers' with key [1]; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.web.authentication.rememberme.TokenBasedRememberMeServices#0': Cannot create inner bean '(inner bean)' while setting constructor argument; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name '(inner bean)#10': Instantiation of bean failed; nested exception is org.springframework.beans.factory.BeanDefinitionStoreException: Factory method [org.springframework.security.core.userdetails.UserDetailsService org.springframework.security.config.http.UserDetailsServiceFactoryBean.cachingUserDetailsService(java.lang.String)] threw exception; nested exception is org.springframework.context.ApplicationContextException: No UserDetailsService registered.
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:328) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:106) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveManagedList(BeanDefinitionValueResolver.java:353) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:153) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1360) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1118) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:567) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913) [spring-context-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464) [spring-context-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:385) [spring-web-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:284) [spring-web-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111) [spring-web-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.apache.catalina.core.StandardContext.contextListenerStart(StandardContext.java:3392) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:3850) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:90) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811)
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) [rt.jar:1.7.0_09-icedtea]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) [rt.jar:1.7.0_09-icedtea]
    at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_09-icedtea]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.web.DefaultSecurityFilterChain#1': Cannot create inner bean '(inner bean)' of type [org.springframework.security.web.session.ConcurrentSessionFilter] while setting constructor argument with key [1]; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name '(inner bean)#9': Cannot resolve reference to bean 'org.springframework.security.web.authentication.rememberme.TokenBasedRememberMeServices#0' while setting bean property 'logoutHandlers' with key [1]; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.web.authentication.rememberme.TokenBasedRememberMeServices#0': Cannot create inner bean '(inner bean)' while setting constructor argument; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name '(inner bean)#10': Instantiation of bean failed; nested exception is org.springframework.beans.factory.BeanDefinitionStoreException: Factory method [org.springframework.security.core.userdetails.UserDetailsService org.springframework.security.config.http.UserDetailsServiceFactoryBean.cachingUserDetailsService(java.lang.String)] threw exception; nested exception is org.springframework.context.ApplicationContextException: No UserDetailsService registered.
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveInnerBean(BeanDefinitionValueResolver.java:281) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:125) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveManagedList(BeanDefinitionValueResolver.java:353) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:153) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.ConstructorResolver.resolveConstructorArguments(ConstructorResolver.java:616) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:148) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1035) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:939) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:485) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:322) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    ... 25 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name '(inner bean)#9': Cannot resolve reference to bean 'org.springframework.security.web.authentication.rememberme.TokenBasedRememberMeServices#0' while setting bean property 'logoutHandlers' with key [1]; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.web.authentication.rememberme.TokenBasedRememberMeServices#0': Cannot create inner bean '(inner bean)' while setting constructor argument; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name '(inner bean)#10': Instantiation of bean failed; nested exception is org.springframework.beans.factory.BeanDefinitionStoreException: Factory method [org.springframework.security.core.userdetails.UserDetailsService org.springframework.security.config.http.UserDetailsServiceFactoryBean.cachingUserDetailsService(java.lang.String)] threw exception; nested exception is org.springframework.context.ApplicationContextException: No UserDetailsService registered.
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:328) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:106) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveManagedList(BeanDefinitionValueResolver.java:353) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:153) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1360) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1118) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveInnerBean(BeanDefinitionValueResolver.java:270) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    ... 39 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.web.authentication.rememberme.TokenBasedRememberMeServices#0': Cannot create inner bean '(inner bean)' while setting constructor argument; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name '(inner bean)#10': Instantiation of bean failed; nested exception is org.springframework.beans.factory.BeanDefinitionStoreException: Factory method [org.springframework.security.core.userdetails.UserDetailsService org.springframework.security.config.http.UserDetailsServiceFactoryBean.cachingUserDetailsService(java.lang.String)] threw exception; nested exception is org.springframework.context.ApplicationContextException: No UserDetailsService registered.
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveInnerBean(BeanDefinitionValueResolver.java:281) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:125) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.ConstructorResolver.resolveConstructorArguments(ConstructorResolver.java:630) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:148) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1035) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:939) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:485) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:322) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    ... 47 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name '(inner bean)#10': Instantiation of bean failed; nested exception is org.springframework.beans.factory.BeanDefinitionStoreException: Factory method [org.springframework.security.core.userdetails.UserDetailsService org.springframework.security.config.http.UserDetailsServiceFactoryBean.cachingUserDetailsService(java.lang.String)] threw exception; nested exception is org.springframework.context.ApplicationContextException: No UserDetailsService registered.
    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:581) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1015) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:911) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:485) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveInnerBean(BeanDefinitionValueResolver.java:270) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    ... 59 more
Caused by: org.springframework.beans.factory.BeanDefinitionStoreException: Factory method [org.springframework.security.core.userdetails.UserDetailsService org.springframework.security.config.http.UserDetailsServiceFactoryBean.cachingUserDetailsService(java.lang.String)] threw exception; nested exception is org.springframework.context.ApplicationContextException: No UserDetailsService registered.
    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:169) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:570) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    ... 64 more
Caused by: org.springframework.context.ApplicationContextException: No UserDetailsService registered.
    at org.springframework.security.config.http.UserDetailsServiceFactoryBean.getUserDetailsService(UserDetailsServiceFactoryBean.java:99) [spring-security-config-3.1.3.RELEASE.jar:3.1.3.RELEASE]
    at org.springframework.security.config.http.UserDetailsServiceFactoryBean.cachingUserDetailsService(UserDetailsServiceFactoryBean.java:39) [spring-security-config-3.1.3.RELEASE.jar:3.1.3.RELEASE]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.7.0_09-icedtea]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) [rt.jar:1.7.0_09-icedtea]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.7.0_09-icedtea]
    at java.lang.reflect.Method.invoke(Method.java:601) [rt.jar:1.7.0_09-icedtea]
    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:149) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    ... 65 more 
```

我的相关配置和代码如下：

**角色.java**

```
@Entity
@Table(uniqueConstraints = @UniqueConstraint(columnNames = "name"))
public class Role implements Serializable {

    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue
    private Long id;

    @NotNull
    @Size(min=1,max=25)
    @Pattern(regexp = "[A-Za-z]*", message = "must contain only letters")
    private String name;

    //Getters & Setters
} 
```

**用户帐户.java**

```
@Entity
@Table(uniqueConstraints = @UniqueConstraint(columnNames = {"username","email"}))
public class UserAccount implements Serializable {

    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue
    private Long id;

    @NotNull
    @Size(min=6,max=25)
    @Pattern(regexp = "[A-Za-z0-9 ]*", message = "must contain only letters, numbers and spaces")
    private String username;

    @NotNull
    @NotEmpty
    @Email
    private String email;

    @NotNull
    @NotEmpty
    private String password;

    @NotNull
    private boolean active;

    @OneToMany
    @JoinTable(
        name="roles",
        joinColumns = { @JoinColumn( name="useraccount_id") },
        inverseJoinColumns = @JoinColumn( name="role_id")
    )
    private Set<Role> roles;

    //Getters & Setters
} 
```

**UserAccountDao.java**

```
public interface UserAccountDao {
    public UserAccount findById(Long id);
    public UserAccount findByUsername(String username);
    public UserAccount findByEmail(String email);
    public void add(UserAccount userAccount);
    public void modify(UserAccount userAccount);
    public void delete(UserAccount userAccount);
} 
```

**UserDetailsS​​erviceImpl.java**

```
@Service("userDetailsServiceImpl")
public class UserDetailsServiceImpl implements UserDetailsService {

    @Autowired
    private UserAccountDao userDao;

    @Autowired
    private Assembler assembler;

    @Override
    public UserDetails loadUserByUsername(String username)
            throws UsernameNotFoundException, DataAccessException {

            UserAccount userAccount = userDao.findByUsername(username);

            if(userAccount == null) {
                    throw new UsernameNotFoundException("user not found");
            }

            return assembler.buildUserFromUserEntity(userAccount);
    }

} 
```

**汇编程序.java**

```
@Service("assembler")
public class Assembler {

    @Transactional(readOnly = true)
    public User buildUserFromUserEntity(UserAccount userAccount) {
        String username = userAccount.getUsername();
            String password = userAccount.getPassword();
            boolean enabled = userAccount.isActive();
            boolean accountNonExpired = enabled;
            boolean credentialsNonExpired = enabled;
            boolean accountNonLocked = enabled;

            Collection<GrantedAuthority> authorities = new ArrayList<GrantedAuthority>();
            for(Role role : userAccount.getRoles()) {
                    authorities.add(new SimpleGrantedAuthority(role.getName()));
            }

            User user = new User(username,password,enabled,accountNonExpired,credentialsNonExpired,accountNonLocked,authorities);
            return user;
        }
    } 
```

**applicationContext-security.xml**

```
...
<beans:bean id="daoAuthenticationProvider" class="org.springframework.security.authentication.dao.DaoAuthenticationProvider">
    <beans:property name="userDetailsService" ref="userDetailsService"/>
</beans:bean>

<beans:bean id="authenticationManager" class="org.springframework.security.authentication.ProviderManager">
    <beans:property name="providers">
        <beans:list>
            <beans:ref local="daoAuthenticationProvider" />
        </beans:list>
    </beans:property>
</beans:bean>

<authentication-manager>
    <authentication-provider user-service-ref="userDetailsService">
        <password-encoder hash="md5"/>
    </authentication-provider>
</authentication-manager>
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T15:22:28.427

`userDetailsService`--> `userDetailsServiceImpl`?

您将其命名为`@Service("userDetailsServiceImpl")`，但`"userDetailsService"`在上下文声明中使用

# delphi - 使用delphi的简单数字签名

> ID：14071578
> 
> 赞同：5
> 
> 时间：2012-12-28T15:12:11.723
> 
> 标签：delphi, digital-signature

我正在寻找一个简单的解决方案来生成一对密钥（公钥/私钥）加密/散列一个字符串，然后能够检查该字符串是否使用公钥加密/散列。

有没有一个简单的解决方案（CryptoAPI）？

我正在寻找一个起点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T15:20:35.400

您可以查看不久前开源的[Turbopower Lockbox](http://sourceforge.net/projects/tplockbox/)。我认为这`RSA sign & verify`是你需要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T15:57:42.687

看起来这已经被问过并回答过，这个线程中有很多很好的反馈： [Delphi 的免费加密库](https://stackoverflow.com/questions/1402380/free-encryption-library-for-delphi)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T10:25:56.733

LockBox3 或 Spring4Delphi 库

# linq - Linq：删除具有主外键关系的表条目

> ID：14071585
> 
> 赞同：-2
> 
> 时间：2012-12-28T15:12:59.860
> 
> 标签：linq, windows-phone

我有带有表 A 的 Windows Phone 应用程序，而表 B 具有主外键关系。我需要从表 A 中删除一个条目。我该怎么做？

表 A 包含 Shape 类型的对象并具有字段 ShapeColor。表 B 具有 ShapeColor 类型的对象。

当我尝试使用 DeleteOnSubmit 后跟 SubmitChanges 从表 A 中删除 Shape 时抛出异常

> "{"无法删除主键值，因为对该键的引用仍然存在。[外键约束名称 = ShapeColor_Shape ]"}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T16:10:54.957

您可以使用：

```
context.DeleteOnSubmit(EntityA.ReferenceToTableB)
context.DeleteOnSubmit(EntityA) 
```

先删除关系，再删除实体，将更改提交到数据库。

# bash - 在 bash 的测试语句中运行命令

> ID：14071586
> 
> 赞同：4
> 
> 时间：2012-12-28T15:13:01.393
> 
> 标签：bash, shell

我有一段代码可以在目录中找到第一个文件：

```
bash~> $( echo eval "ls | head -1" )
arguprog.sh 
```

然后将此片段添加到 if 语句中，如果该文件是 arguprog.sh，则运行一组不同的命令：

```
bash~>  if [[ $( echo eval "ls | head -1" ) == "arguprog.sh" ]]; then echo "TRUE"; else echo "FALSE"; fi;
FALSE 
```

然而，这不是我想要的。即使第一个文件是 arguprog.sh，它也会返回 FALSE！

有没有办法解决这个问题，同时仍然完全在测试块内进行字符串比较？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-28T15:50:20.927

首先，`eval`它是邪恶的，尤其是在不需要它的时候。在您的情况下`eval`，*不需要*！

将您显示的编码恐惧替换为：

```
ls | head -1 
```

并将其包含在您的测试语句中：

```
if [[ $(ls | head -1) = "arguprog.sh" ]]; then echo "TRUE"; else echo "FALSE"; fi 
```

但这是*错误的和损坏*的（见下文）。

现在更一般*的事情：不要解析`ls`*. 如果要在当前目录中查找第一个文件（或目录或...），请使用 glob 和以下方法：

```
shopt -s nullglob
files=( * )
# The array files contains the names of all the files (and directories...)
# in the current directory, sorted by name.
# The first one is given by the expansion of "${files[0]}". So:
if [[ "${files[0]}" = "arguprog.sh" ]]; then echo "TRUE"; else echo "FALSE"; fi 
```

请注意，您的方法，解析`ls`是*错误*的。看：

```
$ # Create a new scratch dir
$ mkdir myscratchdir
$ # Go in there
$ cd myscratchdir
$ # touch a few files:
$ touch $'arguprog.sh\nwith a newline' "some other file"
$ # I created 2 files, none of them is exactly arguprog.sh. Now look:
$ if [[ $(ls | head -1) = "arguprog.sh" ]]; then echo "TRUE"; else echo "FALSE"; fi
TRUE
$ # HORROR! 
```

对此有一些扭曲的解决方法，但实际上，最好的方法是我刚刚给你的方法。

完毕！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T15:39:11.423

的值`$( echo eval "ls | head -1" )`不是，因此你`"eval ls | head -1"`得到.`"arguprog.sh"``FALSE`

看看这个：

```
$ a=$( echo eval "ls | head -1" )
$ echo $a
eval ls | head -1 
```

`arguprog.sh`运行时看到的原因`bash~> $( echo eval "ls | head -1" )`是因为 bash 执行命令 is`eval ls | head -1`并返回结果 is `arguprog.sh`。

为了在您的 if 语句中执行相同的操作，您还需要通过将其包含在另一组 中来执行它`$(...)`，如下所示：

```
$ if [[ $($( echo eval "ls | head -1" )) == "arguprog.sh" ]]; then echo "TRUE"; else echo "FALSE"; fi;
TRUE 
```

但不要那样做！简单地使用它要容易得多：

```
$ if [[ $(ls | head -1) == "arguprog.sh" ]]; then echo "TRUE"; else echo "FALSE"; fi;
TRUE 
```

另请注意，解析的输出`ls`不是一个好习惯。有关详细信息，请参阅[ParsingLs](http://mywiki.wooledge.org/ParsingLs)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T15:23:05.627

试试这个方法：

```
 if [[ `ls | head -1` = "04 dynamic-programming.pdf" ]]; then 
      echo "TRUE"
 else 
      echo "FALSE"
 fi 
```

您应该只使用`=`而不是`==`并跳过该`eval`部分。

# php - PHP，通过 POST 传递数组

> ID：14071587
> 
> 赞同：23
> 
> 时间：2012-12-28T15:13:06.740
> 
> 标签：php, arrays, http, post

通过哪种方式发送数组最安全`POST`？

```
foreach ($id as $array)
{
<input type="hidden" name="prova[]" value="<?php echo $array; ?>"/>
}
<input type="submit" name="submit"/> 
```

或`implode()`用于创建单个变量，传递变量，然后用于`explode()`将值取回新数组？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-28T15:20:22.810

***编辑***如果您询问安全性，请参阅底部的我的附录***编辑***

PHP 有一个为此特定目的提供的[序列化函数。](http://php.net/manual/en/function.serialize.php)给它一个数组，它会给你一个字符串表示。当您想将其转换回数组时，只需使用[unserialize](http://php.net/manual/en/function.unserialize.php)函数。

```
$data = array('one'=>1, 'two'=>2, 'three'=>33);
$dataString = serialize($data);
//send elsewhere
$data = unserialize($dataString); 
```

懒惰的编码人员经常使用它来将数据保存到数据库中。不推荐，但可以作为快速/肮脏的解决方案。

***附录***

我的印象是您正在寻找一种可靠地而不是“安全地”发送数据的方法。无论您如何传递数据，如果它通过用户系统，您根本无法信任它。通常，您应该将其存储在服务器上的某个位置并使用凭据（cookie、会话、密码等）来查找它。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-03-23T11:07:47.697

[http://php.net/manual/en/reserved.variables.post.php](http://php.net/manual/en/reserved.variables.post.php)

第一条评论回答了这个问题。

```
<form ....>
<input name="person[0][first_name]" value="john" />
<input name="person[0][last_name]" value="smith" />
...
<input name="person[1][first_name]" value="jane" />
<input name="person[1][last_name]" value="jones" />
</form>

<?php
var_dump($_POST['person']);

array (
0 => array('first_name'=>'john','last_name'=>'smith'),
1 => array('first_name'=>'jane','last_name'=>'jones'),
)
?> 
```

名称标签可以作为一个数组工作。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-12-28T15:24:12.673

你可以把它放在会话中：

```
session_start();
$_SESSION['array_name'] = $array_name; 
```

或者，如果您想通过表单发送它，您可以将其序列化：

```
<input type='hidden' name='input_name' value="<?php echo htmlentities(serialize($array_name)); ?>" />

$passed_array = unserialize($_POST['input_name']); 
```

请注意，要使用序列化数组，您需要使用 POST 作为表单的传输方法，因为 GET 的大小限制约为 1024 个字符。

我会尽可能使用会话。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-12-28T15:31:07.100

有两件事需要考虑：用户可以修改表单，并且您需要防止跨站点脚本 (XSS)。

**跨站脚本**

XSS 是指用户在其输入中输入 HTML。例如，如果用户提交了这个值怎么办？：

```
" /><script type="text/javascript" src="http://example.com/malice.js"></script><input value=" 
```

这将被写入您的表单，如下所示：

```
<input type="hidden" name="prova[]" value="" /><script type="text/javascript" src="http://example.com/malice.js"></script><input value=""/> 
```

防止这种情况的最佳方法是使用`htmlspecialchars()`来保护您的输入。这会将字符编码为`<`into `&lt;`。例如：

```
<input type="hidden" name="prova[]" value="<?php echo htmlspecialchars($array); ?>"/> 
```

您可以在此处阅读有关 XSS 的更多信息：[https ://www.owasp.org/index.php/XSS](https://www.owasp.org/index.php/XSS)

**表格修改**

如果我在您的网站上，我可以使用 Chrome 的开发人员工具或 Firebug 来修改您页面的 HTML。根据您的表单的用途，这可能会被恶意使用。

例如，我可以将额外的值添加到您的数组中，或者添加不属于数组的值。如果这是一个文件系统管理器，那么我可以添加不存在的文件或包含敏感信息的文件（例如：替换`myfile.jpg`为`../index.php`or `../db-connect.php`）。

简而言之，您总是需要稍后检查您的输入以确保它们有意义，并且只在表单中使用安全输入。文件 ID（一个数字）是安全的，因为您可以检查该数字是否存在，然后从数据库中提取文件名（这假设您的数据库包含经过验证的输入）。由于上述原因，文件*名不安全。*您必须重新验证文件名，否则我可以将其更改为任何内容。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-12-28T15:15:04.017

如果您已经在服务器（PHP）端拥有它，为什么还要通过帖子发送它？

为什么不将数组保存到 s`$_SESSION`变量中，以便在提交表单时可以使用它，这可能会使其更加“安全”，因为那时客户端无法通过编辑源来更改变量。

这一切都取决于你*真正*想做什么。

# hive - Hive 中的日期比较

> ID：14071589
> 
> 赞同：11
> 
> 时间：2012-12-28T15:13:16.447
> 
> 标签：hive, timestamp, hiveql, ddl

我正在使用 Hive，我有一个结构如下的表：

```
CREATE TABLE t1 (
  id INT,
  created TIMESTAMP,
  some_value BIGINT
); 
```

我需要找到`t1`不到 180 天的每一行。即使表中存在与搜索谓词匹配的数据，以下查询也不会产生任何行。

```
select * 
from t1 
where created > date_sub(from_unixtime(unix_timestamp()), 180); 
```

在 Hive 中执行日期比较的适当方法是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-28T17:54:33.510

怎么样：

```
where unix_timestamp() - created < 180 * 24 * 60 * 60 
```

如果您可以使用实际的时间戳值来计算，那么日期数学通常是最简单的。

还是您希望它只在一整天内切断？然后我认为问题在于您如何在整数和字符串之间来回转换。尝试：

```
where created > unix_timestamp(date_sub(from_unixtime(unix_timestamp(),'yyyy-MM-dd'),180),'yyyy-MM-dd') 
```

遍历每个 UDF：

1.  `unix_timestamp()`返回一个 int：自纪元以来的当前时间（以秒为单位）
2.  `from_unixtime(,'yyyy-MM-dd')`转换为给定格式的字符串，例如 '2012-12-28'
3.  `date_sub(,180)`从该字符串中减去 180 天，并返回相同格式的新字符串。
4.  `unix_timestamp(,'yyyy-MM-dd')`将该字符串转换回 int

如果这一切都变得太麻烦，您总是可以编写一个 UDF 自己来做。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-29T00:55:55.647

或者，您也可以使用**datediff**。然后 where 子句将是
字符串时间戳（jdbc 格式）的情况：

```
datediff(from_unixtime(unix_timestamp()), created) < 180; 
```

如果是 Unix 纪元时间：

```
datediff(from_unixtime(unix_timestamp()), from_unixtime(created)) < 180; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-29T00:52:46.353

我认为这可能是处理**时间戳**类型的 Hive 错误。我最近一直在尝试使用它并得到不正确的结果。如果我将您的架构更改为使用字符串*而不是*时间戳，并在

> yyyy-MM-dd HH:mm:ss

格式，然后选择查询对我有用。

根据文档，Hive 应该能够将表示纪元秒的 BIGINT 转换为时间戳，并且所有现有的日期时间 UDF 都可以使用时间戳数据类型。

用这个简单的查询：

> select from_unixtime(unix_timestamp()), cast(unix_timestamp() as timestamp) from test_tt limit 1;

我希望这两个字段是相同的，但我得到：

> 2012-12-29 00:47:43 1970-01-16 16:52:22.063

我也看到了其他奇怪的东西。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-10-27T21:40:54.750

TIMESTAMP 是毫秒
unix_timestamp 是秒
您需要将 RHS 乘以 1000。

```
where created > 1000 * date_sub(from_unixtime(unix_timestamp()), 180); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-28T16:54:29.000

在查看此内容并参考[Hive 中不到 15 分钟的日期差异后，](https://stackoverflow.com/questions/11589084/date-difference-less-than-15-minutes-in-hive)我想出了一个解决方案。虽然我不确定为什么 Hive 不能有效地将日期作为字符串执行比较（它们应该按字典顺序排序和比较），但以下解决方案有效：

```
FROM (
    SELECT  id, value,
            unix_timestamp(created) c_ts, 
            unix_timestamp(date_sub(from_unixtime(unix_timestamp()), 180), 'yyyy-MM-dd') c180_ts
    FROM    t1
) x
JOIN t1 t ON x.id = t.id
SELECT  to_date(t.Created), 
        x.id, AVG(COALESCE(x.HighestPrice, 0)), AVG(COALESCE(x.LowestPrice, 0))
WHERE   unix_timestamp(t.Created) > x.c180_ts
GROUP BY to_date(t.Created), x.id ; 
```

# c# - 创建 HashSet 的最坏情况复杂度 从一个集合

> ID：14071591
> 
> 赞同：10
> 
> 时间：2012-12-28T15:13:20.733
> 
> 标签：c#, .net, complexity-theory

我有一组值，我用以下方式`int`填充 a -`HashSet<int>`

```
var hashSet = new HashSet<int>(myIEnumerable); 
```

假设迭代`IEnumerable`is `O(n)`，以这种方式创建 a的**最坏情况**`HashSet<int>`复杂度是多少？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-28T15:16:19.467

该文档实际上指出：

> 此构造函数是一个 O(n) 操作，其中 n 是集合参数中的元素数。

[http://msdn.microsoft.com/en-us/library/bb301504.aspx](http://msdn.microsoft.com/en-us/library/bb301504.aspx)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-28T15:15:15.590

*当集合达到其最大大小时，*`O(N^2)`您可以通过将所有散列到同一存储桶的对象提供最坏的情况。例如，如果您传递一个 17519的序列，构造为*`int`*

 *```
x[i] = i * 17519 
```

在`i`1 到 17519 之间（包括 1 和 17519），所有数字都将散列到 Microsoft 实现的初始存储桶中`HashSet<int>`，`O(N^2)`插入：

```
var h = new HashSet<int>(Enumerable.Range(1, 17519).Select(i => i*17519)); 
```

设置一个断点，并`h`在调试器中检查。查看原始视图/非公共成员/m_buckets。观察初始存储桶有 17519 个元素，而其余 17518 个元素都为零。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-28T15:25:27.547

简并哈希码（一个常数）的快速实验表明它是二次的。

```
for(int n=0;n<100;n++)
{
    var start=DateTime.UtcNow;
    var s=new HashSet<Dumb>(Enumerable.Range(0,n*10000).Select(_=>new Dumb()));
    Console.Write(n+" ");
    Console.WriteLine((int)((DateTime.UtcNow-start).TotalSeconds*10));
} 
```

输出：

```
0 0
1 8
2 34
3 73
4 131 
```

* * *

现在有些人声称您不会遇到`HashCode`for int 的多次冲突。虽然这在技术上是正确的，但对性能而言重要的不是 HashCode 的冲突，而是桶索引的冲突。我认为`HashSet<T>`使用类似`bucket = (hash&0x7FFFFFFF)%Capacity`. 因此，如果您添加一个整数序列是首选存储桶大小的倍数，它仍然会非常慢。*

# r - 删除 csv 文件中的列和存储数据的问题？

> ID：14071600
> 
> 赞同：-3
> 
> 时间：2012-12-28T15:13:55.597
> 
> 标签：r, csv

我有一个具有以下格式的 csv 文件：

```
 1           3           1          4
1415670_at  1   8.512147859 8.196725061 8.174426394 8.62388149
1415671_at  2   9.119200527 9.190318548 9.149239039 9.211401637
1415672_at  3   10.03383593 9.575728316 10.06998673 9.735217522
1415673_at  4   5.925999419 5.692092375 5.689299161 7.807354922 
```

我通过删除不是 1 或 2 的列对这些数据进行了一些操作：

```
m<-read.csv("table.csv")
smallerdat <- m[ c(1,2, grep("^X1$|^X2$|X1\\.|X2\\." , names(m) ) ) ] 
```

现在我想再次将此结果保存到 csv 文件中，所以我这样做：

```
write.csv(smallerdat,"tablemodified.csv",ncolumns=length(smallerdat),sep=",") 
```

但我收到一条错误消息：

```
Error in cat(list(...), file, sep, fill, labels, append) : 
  argument 1 (type 'list') cannot be handled by 'cat' 
```

我的问题是如何将修改后的表存储到 csv 文件中。有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T16:27:05.000

~~该`write.csv`函数需要将文件名作为命名参数给出（所有`write.*`表亲也是如此）。~~ 试试这个（编辑）：

```
write.csv(smallerdat, file="tablemodified.csv" ) 
```

我最初的猜测适用于 save() 函数而不是 write.table 变体。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T15:17:39.373

我正要告诉您阅读`?read.csv`并注意指向`write.csv`...的“另请参阅”部分，但事实并非如此。

所以，使用`write.csv`. :)

# magento - Magento - 目录布局

> ID：14071602
> 
> 赞同：0
> 
> 时间：2012-12-28T15:14:08.177
> 
> 标签：magento, layout, anchor

我通过在产品名称旁边添加制造商名称来使用 list.phtml 修改了我的 magento 目录页面。现在，这适用于所有将“锚”设置为“否”的类别。它不会显示“锚”设置为“是”的类别的变化。你能帮我解决这个问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T16:16:17.923

锚和非锚类别的布局在这里有所不同：

```
<catalog_category_default> 
```

和

```
<catalog_category_layered> 
```

在 catalog.xml 也许你的模板只使用非锚 list.phtml 并回退到锚类别的基本/默认？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T15:04:52.283

在 list.phtml 我添加了制造商

```
<?php echo $_helper->productAttribute($_product, $_product->getAttributeText('manufacturer'),'name') ?> - <?php echo $_helper->productAttribute($_product, $_product->getName() , 'name'); ?></a> 
```

# c# - 为什么 Task.Delay 在这种情况下不起作用

> ID：14071606
> 
> 赞同：24
> 
> 时间：2012-12-28T15:14:36.107
> 
> 标签：c#, async-await

我正在测试`async`，我发现这种情况我无法理解：

```
var watch = Stopwatch.StartNew();

var t1 = Task.Factory.StartNew(async () =>
{
    await Task.Delay(2000);

    return 2;
});

var t2 = Task.Factory.StartNew(() =>
{
    Task.Delay(1000);

    return 1; 
});

await Task.WhenAll(t1, t2);

var result = watch.ElapsedMilliseconds; 
```

我想了解为什么结果总是0！为什么不是1000、2000或者两个任务的总和3000？为什么不`Task.WhenAll`等待任务完成？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-12-28T15:32:54.340

好的，所以，第二个是简单的，所以让我们处理那个。

对于第二个任务 ，`t2`您不会对 的结果做任何事情`Task.Delay(1000)`。你不这样做`await`，你不这样做`Wait`，等等。鉴于该方法不是`async`我认为你的意思是它是一个阻塞等待。为此，您需要添加`Wait()`到`Delay`调用的末尾以使其成为阻塞等待，或者只使用`Thread.Sleep()`.

* * *

对于第一个任务，你被你正在使用的事实所困扰`var`。不使用时会发生什么更清楚`var`：

```
Task<Task<int>> t1 = Task.Factory.StartNew(async () =>
{
    await Task.Delay(2000);

    return 2;
}); 
```

您正在返回一个 task of 的任务`int`，而不仅仅是一个`Task`of `int`。一旦内部任务完成启动，外部任务就“完成”了。当您使用时，`WhenAll`您不关心外部任务何时完成，您关心的是*内部*任务何时完成。有很多方法可以处理这个问题。一是使用`Unwrap`。

```
Task<int> t1 = Task.Factory.StartNew(async () =>
{
    await Task.Delay(2000);

    return 2;
}).Unwrap(); 
```

现在您已经达到了预期`Task<int>`，并且`WhenAll`将至少花费 2000 毫秒，正如预期的那样。您还可以添加另一个`await`调用来做同样的事情：

```
Task<int> t1 = await Task.Factory.StartNew(async () =>
{
    await Task.Delay(2000);

    return 2;
}); 
```

正如 svick[在评论](https://stackoverflow.com/questions/14071606/)中提到的那样，另一种选择是只使用`Task.Run`而不是`StartNew`. 对于接受 a并返回 a并自动为您解包它们的`Task.Run`方法有一组特殊的重载：`Func<Task<T>>``Task<T>`

```
Task<int> t1 = Task.Run(async () =>
{
    await Task.Delay(2000);

    return 2;
}); 
```

出于这个原因，`Task.Run`当您创建异步 lambda 时，最好将其用作默认选项，因为它会为您“处理”此问题，尽管对于您无法使用的复杂情况，最好注意它`Task.Run`。

* * *

最后我们来到了你没有做的选项，这就是你在这种情况下可能应该实际做的事情。由于`Task.Delay`已经返回了一个任务，所以没有必要把它`StartNew`放在首位。而不是创建一个嵌套任务并使用`Unwrap`你不能首先包装它：

```
var t3 = Task.Delay(3000);
await Task.WhenAll(t1, t2, t3); 
```

如果您实际上只想等待固定的时间，那您应该这样做。

# python - 编写在文本文件中搜索正则表达式小节组合的工具的最佳方法

> ID：14071610
> 
> 赞同：1
> 
> 时间：2012-12-28T15:14:52.467
> 
> 标签：python, regex

我有一个大文本文件，每一行都是一个独特的概念。每行可能只有少量模式。

如果我想遍历文本文件并找到行之间的共同模式，以供以后使用该行的每个子部分的正则表达式提取；最好的方法是什么，或者是否有任何现有的工具？我更喜欢 Python。

所以一行可能会遵循以下模式：

```
(1 to 5 alpha letters)(,)(space)(Sentence)
(word)(.)(space)(Sentence)(Sentence)
(word)(number)(.)(space)(Sentence)(Sentence)
(word)(!)(space)(Sentence)(Sentence) 
```

例如，我可能不知道 (!)。

基本上，它应该提取一个正则表达式列表，这些正则表达式总共涵盖了每条可能的行，但具有定义的构建块；像（1 到 5 个字母）（句子）（任何未包含在构建块中的内容）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T16:08:13.773

您正在寻找的是一种用于[模式识别](http://en.wikipedia.org/wiki/Pattern_recognition)和/或[数据挖掘](http://en.wikipedia.org/wiki/Data_mining)的算法，它们是非常复杂的人工智能子领域。

我建议您要么选择一本关于该主题的书，要么尝试以不同的方式解决您的问题。

# android - android线性布局垂直不显示全部

> ID：14071613
> 
> 赞同：0
> 
> 时间：2012-12-28T15:15:10.057
> 
> 标签：android, android-linearlayout

我正在做一个 android 应用程序，我想这样做：

![信息.xml](../Images/009bbfb425f82ee88210ba3f400603c0.png)

但现在它只显示照片和文本视图。

这是我的 info.xml：

```
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:id="@+id/linear1"
 android:layout_width="match_parent"
 android:layout_height="match_parent" 
 android:orientation="vertical">

 <LinearLayout 
    android:id="@+id/linear2"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal">

    <ImageView 
     android:id="@+id/image_profile"
     android:layout_height="48dp"
     android:layout_width="48dp"
     android:layout_marginTop="15dp"
     android:layout_marginLeft="20dp"/>

    <TextView
    android:id="@+id/nom_profile"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:textAppearance="?android:attr/textAppearanceMedium" 
    android:layout_weight="1"
    android:layout_marginTop="20dp"
    android:layout_marginLeft="10dp"/>

   </LinearLayout>

    <TextView
    android:id="@+id/SocialNetworks"
    android:layout_width="wrap_content"
    android:layout_height="0dp"
    android:text="Redes Sociales"
    android:textAppearance="?android:attr/textAppearanceMedium" 
    android:layout_weight="1"/>

    <ListView
    android:id="@+id/listaRedesSociales"
    android:layout_width="fill_parent"
    android:layout_height="0dp" 
    android:layout_weight="4">
    </ListView>

  </LinearLayout> 
```

我不知道为什么只向我显示这个，我不知道为什么当我放置垂直时，第一个线性布局会放置水平！info.xml 不刷新吗？还是糟糕的编程？

有人能帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T15:23:47.670

使用 match_parent* 的 *fill_parent instend，也许你应该改变 linear2 的高度：**layout_height='wrap_content'**或**layout_height="0dp" layout_weight="1"**

.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T15:30:07.027

这样做的原因是您在第二个 LinearLayout 中将**match_parent**赋予了**android:layout_height**并且也没有为相同的 layout_weight 指定。由于这种水平线性布局将高度作为整个屏幕

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/linear1"
android:layout_width="match_parent"
android:layout_height="match_parent" 
android:orientation="vertical">

<LinearLayout 
android:id="@+id/linear2"
android:layout_width="match_parent"
android:layout_height="0dp"
android:orientation="horizontal"
android:layout_weight="1">

<ImageView 
 android:id="@+id/image_profile"
 android:layout_height="48dp"
 android:layout_width="48dp"
 android:layout_marginTop="15dp"
 android:layout_marginLeft="20dp"/>

<TextView
android:id="@+id/nom_profile"
android:layout_width="0dp"
android:layout_height="wrap_content"
android:textAppearance="?android:attr/textAppearanceMedium" 
android:layout_weight="1"
android:layout_marginTop="20dp"
android:layout_marginLeft="10dp"/> 
```

```
<TextView
android:id="@+id/SocialNetworks"
android:layout_width="wrap_content"
android:layout_height="0dp"
android:text="Redes Sociales"
android:textAppearance="?android:attr/textAppearanceMedium" 
android:layout_weight="1"/>

<ListView
android:id="@+id/listaRedesSociales"
android:layout_width="fill_parent"
android:layout_height="0dp" 
android:layout_weight="4">
</ListView> 
```

试试上面的代码。如果这不能正常工作，请从所有视图中更改（或删除）layout_weight 属性（如果删除 layout_weight，请记住也要更改 layout_height 属性）

# objective-c - 在 iOS 框架内播放视频（并将其居中）

> ID：14071615
> 
> 赞同：0
> 
> 时间：2012-12-28T15:15:23.037
> 
> 标签：objective-c, ios

我不想全屏播放视频，是否可以在视图内播放视频？

这是我的代码。它确实创建了一个框架并在其中播放视频。问题是我不知道如何在屏幕上居中框架（它出现在屏幕的右侧）

[截屏](http://s9.postimage.org/eou3rrf0f/Captura_de_pantalla_2012_12_28_a_la_s_10_13_42.png)

```
NSBundle *bundle = [NSBundle mainBundle];
NSURL *url = [NSURL fileURLWithPath:[bundle pathForResource:@"movie" ofType:@"mov"]];

_moviePlayer = [[MPMoviePlayerController alloc] initWithContentURL:url];

[[NSNotificationCenter defaultCenter] addObserver:self
                                       selector:@selector(moviePlayBackDidFinish:)
                                           name:MPMoviePlayerPlaybackDidFinishNotification
                                         object:_moviePlayer];

_moviePlayer.controlStyle = MPMovieControlStyleEmbedded;
_moviePlayer.view.frame = CGRectMake(184, 200, 400, 300);
[self.view addSubview:_moviePlayer.view];
_moviePlayer.shouldAutoplay = YES; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T15:19:43.563

用下面给出的替换一行将解决您的问题。

```
_moviePlayer.view.center = self.view.center; 
```

# java - Spring @AspectJ：建议未应用

> ID：14071619
> 
> 赞同：3
> 
> 时间：2012-12-28T15:15:31.617
> 
> 标签：java, spring, aspectj

我试图在调用之前编织代码`start();`

这是我想建议的 TestClass：

```
package com.test;

public class TestClass {

    public static void main(String[] args) {

        new TestClass().start();
    }
    private void start() {

        System.out.println("Test started");
    }
} 
```

这是包括建议的方面：

```
package com.test;

import org.aspectj.lang.JoinPoint;
import org.aspectj.lang.annotation.Aspect;
import org.aspectj.lang.annotation.Before;
import org.springframework.stereotype.Component;

@Aspect
@Component
public class LogAspect {

    @Before("call(void com.test.TestClass.start())")
    public void logBefore(JoinPoint joinPoint) {
        System.out.println("logBefore() is running");
    }

} 
```

这是我的 spring.xml：

```
 <beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xmlns:aop="http://www.springframework.org/schema/aop"
xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-3.0.xsd 
http://www.springframework.org/schema/aop 
http://www.springframework.org/schema/aop/spring-aop-3.0.xsd ">

<aop:aspectj-autoproxy/>
<context:annotation-config/>
<context:component-scan base-package="com.test"/> 
```

我还尝试在 XML 中显式命名 bean，如下所示：

```
<aop:aspectj-autoproxy/>
<bean id="test" class="com.test.TestClass" />
<bean id="aspect" class="com.test.LogAspect" /> 
```

这是我的项目设置（我使用的是 Spring Tool Suite 3.1.0 版）：

![项目设置](../Images/1a8b6335f374aecf142bde5e04ace5ff.png)

结果是 TestClass.start 被调用得很好，但没有应用建议。

我必须改变什么才能应用建议？

谢谢。

**编辑**：我终于让它工作了：

根据您的建议编辑我的代码后，我查看了本[教程](http://www.mkyong.com/spring3/spring-aop-aspectj-annotation-example/)。这导致我让我的 TestClass**实现一个接口**。这解决了问题。

这是我的最终设置：

![最终设置](../Images/3783a9b40bb874ee215ac32bfcb3f281.png)

TestClass 包括它的接口：

```
package com.test;

import org.springframework.context.support.ClassPathXmlApplicationContext;

interface TestClass {
    void start();
}

public class TestClassImpl implements TestClass {

    public static void main(String[] args) {
        ClassPathXmlApplicationContext appContext = new ClassPathXmlApplicationContext(
                "Spring-Config.xml");

        TestClass t1 = (TestClass) appContext.getBean("myTest");
        t1.start();
    }

    @Override
    public void start() {
        System.out.println("test");
    }
} 
```

方面：

```
package com.test;

import org.aspectj.lang.JoinPoint;
import org.aspectj.lang.annotation.Aspect;
import org.aspectj.lang.annotation.Before;

@Aspect
public class LogAspect {
    @Before("execution(void com.test.TestClass.start(..))")
    public void logBefore(JoinPoint joinPoint) {

        System.out.println("logging before "
                + joinPoint.getSignature().getName());
    }
} 
```

和 Spring-Config.xml

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:aop="http://www.springframework.org/schema/aop"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd 
    http://www.springframework.org/schema/aop 
    http://www.springframework.org/schema/aop/spring-aop-3.0.xsd ">

    <aop:aspectj-autoproxy/>    
    <bean id="myTest" class="com.test.TestClassImpl" />
    <bean id="logAspect" class="com.test.LogAspect" />

</beans> 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T15:24:44.403

当从另一个类*调用*`call`该方法时，将应用 AspectJ 切入点。当您自己直接调用它时，您应该使用*执行*切入点，因此请更改：

 **```
@Before("call(void com.test.TestClass.start())") 
```

到

```
@Before("execution(void com.test.TestClass.start())") 
```

也让`Spring`创建 bean 而不是自己直接创建一个。

* * *

*旁白：*请注意，您可以将`Spring`XML 文件与源文件分开保存`src/resources`，它们将被`ClassPathXmlApplicationContext`.**

# java - 网络错误404 Spring安全

> ID：14071623
> 
> 赞同：0
> 
> 时间：2012-12-28T15:15:38.013
> 
> 标签：java, spring, spring-mvc

我有一个在 Tomcat 6.0.35 上运行的 Spring MVC 应用程序。所有页面都由 Spring security 保护，我希望允许测试人员使用特定页面进行登录模拟。该页面称为“preinicio”。以下是 xml 配置文件的相关部分：

**web.xml**

* * *

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
<display-name>gestion_tramite_gfhl</display-name>
<context-param>
    <param-name>log4jConfigLocation</param-name>
    <param-value>classpath:properties/gestion_tramite_gfhl/log4j.properties</param-value>
</context-param>
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/context/spring-base.xml </param-value>
</context-param>
<context-param>
    <param-name>webAppRootKey</param-name>
    <param-value>gestion_tramite_gfhl</param-value>
</context-param>
<!-- Define the basename for a resource bundle for I18N -->
<context-param>
    <param-name>javax.servlet.jsp.jstl.fmt.localizationContext</param-name>
    <param-value>messages</param-value>
</context-param>
<listener>
    <listener-class>org.springframework.web.util.Log4jConfigListener</listener-class>
</listener>
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
<filter>
    <filter-name>encodingFilter</filter-name>
    <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
    <init-param>
        <param-name>encoding</param-name>
        <param-value>UTF-8</param-value>
    </init-param>
    <init-param>
        <param-name>forceEncoding</param-name>
        <param-value>true</param-value>
    </init-param>
</filter>
<filter-mapping>
    <filter-name>encodingFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<!--<filter>
    <filter-name>autoLoginFilter</filter-name>
    <filter-class>gob.osinergmin.common.filter.AutoLoginFilter</filter-class>
    <init-param>
        <param-name>checkClientIP</param-name>
        <param-value>false</param-value>
    </init-param>
    <init-param>
        <param-name>checkDate</param-name>
        <param-value>true</param-value>
    </init-param>
    <init-param>
        <param-name>invalidParamPage</param-name>
        <param-value>/error/invalidAutoLogin.html</param-value>
    </init-param>
</filter>-->
<!--<filter>
    <filter-name>UserOnSessionFilter</filter-name>
    <filter-class>gob.osinergmin.gestion_tramite_gfhl.controller.filter.UserOnSessionFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>UserOnSessionFilter</filter-name>
    <url-pattern>/pages/*</url-pattern>
</filter-mapping>-->
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>
<!--filter-mapping>
    <filter-name>autoLoginFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping-->
<!--    <filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>*.jsp</url-pattern>
</filter-mapping>-->
<!--    <filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/pages/*</url-pattern>
</filter-mapping>    -->
<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>        
<!--    <filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/j_spring_security_logout</url-pattern>
</filter-mapping>    -->
<!--    <filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/pages/inicio</url-pattern>
</filter-mapping>      -->
<!-- Handles all requests into the application -->
<servlet>
    <servlet-name>Spring MVC Dispatcher Servlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/context/spring-mvc.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>Spring MVC Dispatcher Servlet</servlet-name>
    <url-pattern>/pages/*</url-pattern>
</servlet-mapping>
<session-config>
    <session-timeout>30</session-timeout>
</session-config>
<welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
</welcome-file-list>
<error-page>
    <error-code>500</error-code>
    <location>/error/error.jsp</location>
</error-page>
<error-page>
    <error-code>400</error-code>
    <location>/error/error.jsp</location>
</error-page>
<error-page>
    <error-code>403</error-code>
    <location>/error/403.jsp</location>
</error-page>
<error-page>
    <error-code>404</error-code>
    <location>/error/404.jsp</location>
</error-page> 
```

**弹簧安全.xml**

* * *

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:security="http://www.springframework.org/schema/security"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
       http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.0.xsd">

    <security:http auto-config='false' entry-point-ref="authenticationProcessingFilterEntryPoint" use-expressions="true">        
    <security:intercept-url pattern="/pages/public/**" access="permitAll" />
    <security:intercept-url pattern="/pages/login.jsp" access="permitAll" />
    <!--*LOOK THIS LINE BELOW*-->
    <security:intercept-url pattern="/pages/preinicio" access="permitAll" />  
    <security:intercept-url pattern="/stylesheets/**" access="permitAll" />
    <security:intercept-url pattern="/javascript/**" access="permitAll" />
    <security:intercept-url pattern="/images/**" access="permitAll" />
    <security:intercept-url pattern="/pages/**" access="hasRole('ROLE_USER')" />
    <security:intercept-url pattern="/**" access="permitAll" />
    <security:custom-filter position="FORM_LOGIN_FILTER" ref="customAuthenticationFilter"/>
    <security:logout success-handler-ref="logoutHandler" />
    </security:http> 
```

问题是当我在 firefox 中运行应用程序并尝试访问 URL“http://localhost:8086/myApplicationContext/pages/preinicio”时，我在 Firebug 中得到 404 页面和以下错误：

网络错误：404 未找到 -`http://localhost:8086/hidrovirtual/pages/preinicio"`

页面和所有资源都在正确的路径中，因为当我在没有弹簧安全性的情况下测试它时，一切正常。

如果有人可以帮助我，我将不胜感激。我花了几个小时来解决这个问题。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T17:30:37.957

你有没有试过直接去jsp。

将 precinio 页面的拦截网址更改为

```
<intercept-url pattern="/pages/preinicio.jsp" access="permitAll"/> 
```

并将网址更改为

```
http://localhost:8086/hidrovirtual/pages/preinicio.jsp 
```

# sql - 使用 to_date 以自定义格式存储日期时出错

> ID：14071624
> 
> 赞同：1
> 
> 时间：2012-12-28T15:15:37.633
> 
> 标签：sql, jdbc, oracle11gr2, to-date

目标：

1.  我想以`dd/MM/yyyy`格式将日期存储在数据库中。

2.  我首先使用`DateFormat`它对其进行格式化，从而将其更改为`String`数据类型，然后尝试使用函数将其转换回日期数据类型，`to_date`但它以`19-DEC-12`ie`dd-MON-yy`格式存储。

代码：

```
DateFormat df = new SimpleDateFormat("dd/MM/yyyy"); 
java.util.Date dob=JDateChooser.getDate();  
java.sql.Date dobloc=new java.sql.Date(dob.getTime()); 
String dobloc1=df.format(dobloc);   
String sql="INSERT INTO ADMIN.DEPARTMENT(date_of_birth) VALUES (to_date(?,'dd/MM/yyyy'))"
PreparedStatement pst = conn.prepareStatement(sql);  
pst.setString(1, dobloc1); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T15:33:40.020

日期不会以您在任何数据库中指定的格式保存（除非您使用字符串字段） 大多数数据库系统将日期时间值存储为“双精度”值。

当您从数据库获取数据或将其呈现给用户时，您应该将日期放入数据库并担心格式化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T15:45:23.390

我认为您误解了日期在 Oracle 中的实际工作方式。
日期不像“19-DEC-12”或“19/12/2012”那样存储，它存储为 7 个字节。

有关详细信息，请参见[此处](http://www.ixora.com.au/notes/date_representation.htm)。

如果选择日期列，则使用 NLS_DATE_FORMAT 对其进行格式化。这是用于格式化这些 7 字节的默认掩码。

当然，如果您使用自定义格式掩码，如`to_char(sysdate,'YYYY MM DD')`默认 NLS_DATE_FORMAT 将被忽略。

正如我在上面的评论中所读到的

> 实际上，我正在尝试以正确的格式存储，因为我正在使用 JTable 在其他一些表单上显示我的数据库表的纯副本，以便直接显示存储日期的日期格式。我不想在我的大量 Jtables 上转换日期格式，这可能会让我随着我的表格不断增加而一次又一次地更改日期格式

我建议您还将用于格式化日期的特定格式掩码保存在 DB-Table 的另一列中。在 JTable 中显示您的日期之前，您可以使用此掩码对其进行格式化`DateFormat`。

# c - 关于C中的switch case，为什么它不打印出来？

> ID：14071627
> 
> 赞同：1
> 
> 时间：2012-12-28T15:15:51.140
> 
> 标签：c, switch-statement

> **可能重复：**
> [switch语句中第一个“case”之前的代码](https://stackoverflow.com/questions/2101393/code-before-the-first-case-in-a-switch-statement)

我在 C 中有以下一组代码：

```
void isFindValue(int value1, int value2)
{
    switch (value1)
    {
    case 1:
      printf("value1 is found!\n");
      break;

    case 2:
      printf("value1 is found!\n");
      break;

    case 3:
      switch(value2)
      {
    printf("aaaaaaaaaaaaa\n");
     case 6:
         printf("bbbbbbbbbbbb\n");
         printf("value2 is found!\n");
         break;
      }
     default:
     break;    
} 
```

如果我按原样调用函数 isFindValue(3,6); 出现的printf `bbbbbbbbbbbb`，但是`aaaaaaaaaaaaa`没有出现，为什么会这样呢？我们不应该在案件之前做点什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-28T15:20:05.837

因为`switch ()`使用标签工作。它跳转到满足条件的标签。所以当到达

```
switch(value2) {
    printf("aaaaaaaaaaaaa\n");
    case 6: 
```

控制流立即跳转到标签`case 6:`，以便跳过对`printf()`.

解决方案是将其正确放置在内部开关之外：

```
case 3:
    printf("aaaaa\n");
    switch (value2) { 
```

等等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T15:18:07.830

“aaaaaaaaaaaaa”没有出现，因为它放错了位置（它不包含在标签中，因此无法访问）。您需要将其移至第二个 switch 语句之前：

```
case 3:
    printf("aaaaaaaaaaaaa\n");
    switch(value2)
    {
        // body
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T15:18:33.740

`printf`语句中对函数的调用：

```
printf("aaaaaaaaaaaaa\n"); 
```

无法到达，因为它在`case`第二个的第一个语句之前`switch`。

请参阅[switch 语句中第一个“案例”之前的代码](https://stackoverflow.com/questions/2101393/code-before-the-first-case-in-a-switch-statement/2102434#2102434)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-28T15:19:42.373

"aaaaaaaaaaaaa\n" 没有在任何`case`. 您的代码结构不正确。

尝试将语句移出`switch`块，如下所示：

```
printf("aaaaaaaaaaaaa\n");
switch(value2)
{
    case 6:
        printf("bbbbbbbbbbbb\n");
        printf("value2 is found!\n");
        break;
}
break; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-28T15:20:33.750

switch 总是寻找`case`，这就是为什么`aaaaaaaaaaaa`被跳过。它将执行相关`case`块的语句。

# python - 为什么我的元类没有按预期运行

> ID：14071628
> 
> 赞同：1
> 
> 时间：2012-12-28T15:15:56.317
> 
> 标签：python, metaclass

好的，所以我开始使用元类来处理 voodoo 和 Python 的阴暗面，我想在进一步修改它之前获得一个简单的示例，为什么在执行此代码时它不打印 print 语句，

```
class Versioned(type):
    def __new__(cls, name, bases, dct):
        return type.__new__(cls, name, bases, dct)

    def __setattr__(cls, key, value):
        print "Setting attr %s to %s" % (key, value)
        return object.__setattr__(cls, key, value)

class Test(object):
    __metaclass__ = Versioned

    def __init__(self):
        self.a = 1
        self.b = 2

a = Test()
a.b = 31
print dir(a) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T17:10:53.870

要理解的是，元类本身并不是一个*类*——它是一个*返回类的可调用对象——一个**类*工厂。它的目的与[`type(__name__, __bases__, __dict__)`](http://docs.python.org/2/library/functions.html#type).

```
>>> type('myclass', (), {})
<class '__main__.myclass'> 
```

当你定义时`__metaclass__`，你只是[`overriding the default class factory for that specific class or module`](http://docs.python.org/2/reference/datamodel.html#__metaclass__)。例如，这是一个元类：

```
def setattr_logging_class(name, bases, dict_):
    """I am a metaclass"""
    def __setattr__(self, k, v):
        print "{} set attribute {} to {}".format(self, k, v)
        super(self.__class__, self).__setattr__(k, v)
    dict_['__setattr__'] = __setattr__
    cls = type(name, bases, dict_)
    return cls

class MyClass(object):
    __metaclass__ = setattr_logging_class
    def __init__(self):
        self.a = 1

obj = MyClass()
obj.b = 2

print obj.__dict__ 
```

**最重要的是，元类不参与创建类的方法解析**（除非您更改`bases`）。这就是为什么您的实例`Versioned.__setattr__`看不到您的原因。`Test`所做的只是返回一个具有相同`Versioned`的新类（类型`Versioned`而不是类型`type`）`name`，`bases`并且Python 运行时从您的块中`dict_`解析出来。`class Test(object):`

类本身是可调用的（通过它们的[`__new__`](http://docs.python.org/2/reference/datamodel.html#object.__new__)方法）。（`__new__`对于类什么`__call__`是实例。）

```
class MyClass(object):
    def __new__(cls_self, *args, **kwargs):
        print "I am {} called with {} and {}".format(cls_self, args, kwargs)
        return None

myobj = MyClass(1,2,3,a=4,b=5,c=6)
print myobj # == None 
```

由于类是可调用的，因此您可以将类用作元类。其实`type`就是一个类。虽然，*您也可以将实例与`__call__`方法一起使用！* 这两个示例是相似的，您可能想做的任何事情都不能以任何一种方式完成。（事实上​​，使用对象通常更直接。）

```
class MetaClass(type):
    def __new__(cls, name, bases, dict_):
        print "I am {} called with {}, {}, {}".format(cls, name, bases, dict_)
        return type.__new__(cls, name, bases, dict_)

class MetaObject(object):
    def __call__(self, name, bases, dict_):
        print "I am {} called with {}, {}, {}".format(self, name, bases, dict_)
        return type(name, bases, dict_)

class MyClass(object):
    __metaclass__ = MetaClass

class MyClass2(object):
    __metaclass__ = MetaObject() 
```

请注意，除了元类之外，Python 还有许多其他元编程方法。特别是，Python >= 2.6 添加了对类装饰器的支持，它涵盖了元类的大多数用例，具有更简单的接口。（而不是自己创建类，你会得到一个你修改的已经创建的类对象。）

[您可以在我最近写的这个 stackoverflow 答案](https://stackoverflow.com/questions/13610654/how-to-make-built-in-containers-sets-dicts-lists-thread-safe/13618333#13618333)中看到对多种元编程方法的调查。最初的问题是“如何使内置的 Python 容器类型线程安全？”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T15:40:30.313

我从未真正使用过元类，但我认为您将继承与元类混合在一起。元类用于构建实例，但它们不会隐式地向您的实例添加任何内容。没有理由将`__setattr__`方法导入`Test`. 要显式添加它，您需要修改`Test`dict ( `dct`)。类似的东西`dct["__setattr__"] = cls.__setattr__`。但是，它不起作用，我不明白为什么。我发现使它起作用的唯一方法是：

```
class Versioned(type):
    def __new__(cls, name, bases, dct):
        print("BLAH")
        def __setattr__(cls, key, value):
            print("Setting attr %s to %s" % (key, value))
            return object.__setattr__(cls, key, value)
        dct["__setattr__"] = __setattr__
        return type.__new__(cls, name, bases, dct) 
```

我希望这可以帮助:-)

最后，这个[链接](https://stackoverflow.com/questions/100003/what-is-a-metaclass-in-python)可以帮助你理解python中的元类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T17:16:10.863

您正在`__setattr__`为类本身定义，而不是为它的实例定义。这将导致 print 语句执行：

```
Test.key = value 
```

# sql - PostgreSQL 日期差异

> ID：14071630
> 
> 赞同：9
> 
> 时间：2012-12-28T15:16:00.097
> 
> 标签：sql, postgresql, datetime, plpgsql, postgresql-9.1

我有一个计算日期差异的 PostgreSQL 函数：

```
CREATE OR REPLACE FUNCTION testDateDiff () RETURNS int AS $BODY$
DECLARE startDate TIMESTAMP;
DECLARE endDate TIMESTAMP;
DECLARE diffDatePart int ;
BEGIN
Select evt_start_date From events Where evt_id = 5 INTO startDate ;
Select evt_start_date From events Where evt_id = 6 INTO  endDate ;
SELECT EXTRACT(day FROM TIMESTAMP startDate - endDate) INTO diffDatePart;
RETURN diffDatePart;
END;
$BODY$
LANGUAGE plpgsql 
COST 100 
```

如果直接减去日期，则计算差异。但在我的情况下，日期存在于变量 as`startDate`和`endDate`中，这会导致问题。

如何减去变量中包含的日期？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-30T15:40:34.587

### 调试

您的功能正在做的事情可以做得*更*简单。语法错误的实际原因在这里：

```
SELECT EXTRACT(day FROM TIMESTAMP startDate - endDate) INTO diffDatePart; 
```

看起来您正在尝试强制`startDate`转换为`timestamp`，这从一开始就是无稽之谈，因为您的参数`startDate`已声明为`timestamp`。

它也不起作用。我在这里引用[手册](http://www.postgresql.org/docs/current/interactive/sql-syntax-lexical.html#SQL-SYNTAX-CONSTANTS-GENERIC)：

> 为避免语法歧义，type 'string' 语法只能用于指定简单文字常量的类型。

它*会*像这样工作：

```
SELECT EXTRACT(day FROM startDate - endDate)::int INTO diffDatePart; 
```

但这仍然没有多大意义。您在谈论“日期”，但仍将您的参数定义为`timestamp`. 你*可以*像这样对你拥有的东西进行消毒：

```
CREATE OR REPLACE FUNCTION f_date_diff()
  RETURNS int AS
$BODY$
DECLARE
    start_date date;
    end_date   date;
    date_diff  int;
BEGIN
SELECT evt_start_date FROM events WHERE evt_id = 5 INTO start_date;
SELECT evt_start_date FROM events WHERE evt_id = 6 INTO end_date;
date_diff := (endDate - startDate);
RETURN date_diff;
END
$BODY$ LANGUAGE plpgsql; 
```

*   `DECLARE`只需要一次。
*   `date`声明为正确类型的列`date`。
*   不要使用大小写混合的标识符，除非您确切地知道自己在做什么。
*   从*结尾*减去*开头*以获得正数或应用[绝对值运算符](http://www.postgresql.org/docs/current/interactive/functions-math.html)。*[`@`](http://www.postgresql.org/docs/current/interactive/functions-math.html)*
**   由于减去*日期*（而不是减去*时间戳*，它产生一个`interval`）已经产生`integer`，简化为：

    ```
    SELECT (startDate - endDate) INTO diffDatePart; 
    ```

    甚至更简单的 plpgsql 赋值：

    ```
    diffDatePart := (startDate - endDate); 
    ```* 

 *### 简单查询

您可以通过简单的查询来解决简单的任务 - 使用子查询：

```
SELECT (SELECT evt_start_date
        FROM   events
        WHERE  evt_id = 6) 
      - evt_start_date AS date_diff
FROM   events
WHERE  evt_id = 5; 
```

或者您可以`CROSS JOIN`将基表设置为自身（每个实例的 1 行，所以没关系）：

```
SELECT e.evt_start_date - s.evt_start_date AS date_diff
FROM   events e
      ,events s
WHERE  e.evt_id = 6
AND    s.evt_id = 5; 
```

### SQL 函数

如果您坚持使用某个函数，请使用一个简单的 sql 函数：

```
CREATE OR REPLACE FUNCTION f_date_diff(_start_id int, _end_id int)
  RETURNS int LANGUAGE sql AS
$func$
SELECT e.evt_start_date - s.evt_start_date
FROM   events s, events e
WHERE  s.evt_id = $1
AND    e.evt_id = $2
$func$; 
```

称呼：

```
SELECT  f_date_diff(5, 6); 
```

### PL/pgSQL 函数

如果您坚持使用 plpgsql ...

```
CREATE OR REPLACE FUNCTION f_date_diff(_start_id int, _end_id int)
  RETURNS int LANGUAGE plpgsql AS
$func$
BEGIN

RETURN (SELECT evt_start_date 
             - (SELECT evt_start_date FROM events WHERE evt_id = _start_id)
        FROM   events WHERE evt_id = _end_id);
END
$func$; 
```

同样的调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T00:09:59.730

我会这样写查询：

```
create function testDateDiff()
  returns integer as $$
  declare 
    startDate timestamp;
    endDate timestamp;
  begin
    startDate := (select evt_start_date From events Where evt_id = 5);
    endDate   := (select evt_start_date From events Where evt_id = 6);
    return (select extract(day from startDate - endDate));
  end;
  $$ language 'plpgsql'; 
```

在上面的上下文中使用`:=`和之间的区别在于，使用你的查询必须返回一个值。如果您使用您的查询可以返回单行（即多于一列）。`into``:=``into`

有关使用`select`with`into`和 plpgsql 的完整说明，您应该阅读[http://www.postgresql.org/docs/9.1/static/plpgsql-statements.html](http://www.postgresql.org/docs/9.1/static/plpgsql-statements.html)。具体来说，PostgreSQL 文档的第 39.5.3 节。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T05:06:10.707

你真的需要一个函数吗？

这个查询也可以工作：

```
SELECT (SELECT evt_start_date::date FROM events WHERE evt_id = 5) 
        - evt_start_date::date 
        FROM events WHERE evt_id = 6; 
```*

# grammar - 用于识别语法产生正确性的标准算法

> ID：14071631
> 
> 赞同：0
> 
> 时间：2012-12-28T15:16:01.123
> 
> 标签：grammar

我确信有一种标准的方法可以做到这一点，但我什至不知道从哪里开始搜索它。

我如何以任何语言识别结构（语法），例如：

```
Exp ::= Number |(Exp) | Exp + Exp 
Number ::= Number Digit | Digit
Digit ::= 0 | ... | 9 
```

我的意思是，给定一个类似 的字符串`32 + (43 + 23)`，我如何判断它是否合法？有没有标准算法之类的？我不知道要搜索什么，所以我也无法搜索这个网站。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T15:51:05.183

**您正在寻找解析算法 (membership algorithim)**。解析是分析形式语言中的一串语言符号的过程。是的，**对于任何上下文无关的语法**，都有一种可能的解析算法**——Brute-Force 是一种基本算法，但效率低下**，就像短语结构解析一样，它的最坏情况复杂度是 O(n ³ ) [（你要从这里）] [**REFF1**](http://www.stanford.edu/~mjkay/covington.pdf)。但是如果语法是标准（受限）形式，那么更有效的算法是可能的。有各种解析算法，例如 LL 解析器和 LR 解析器..等。[**参考**](http://en.wikipedia.org/wiki/Category%3aParsing_algorithms)

# android - 适用于 Android 的免费 Phonegap OCR 插件

> ID：14071634
> 
> 赞同：0
> 
> 时间：2012-12-28T15:16:05.923
> 
> 标签：android, cordova, plugins, ocr

我正在尝试实现一个 Android Phonegap 应用程序，但我找不到免费的 OCR 插件。我希望它是一个 phonegap 项目，以便以后可以在其他平台上使用该代码。

我能找到的是 OCRApiService phonegap 插件，但它不是免费软件。

谁能给我一些关于这个的信息？还有其他适用于android的phonegap ocr插件吗？

如果这是不可能的，那么我如何实现一个普通的基于 java 的 android ocr 插件并在我的 phonegap 项目中使用它？这是一个简单的过程吗？如果是这样的话，以后如果我希望我会为其他平台使用其他 OCR 插件。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T15:38:58.223

实际上最好的免费引擎是**Tesseract**，您可以通过搜索**Tesseract android fork**找到如何为 android 实现它。但这有点难，当然在windows上这是不可能的。（你应该安装android NDK）

另一个开源项目是`javaOCR`. 但这非常依赖于您的训练数据。

* * *

**编辑**

抱歉回答不完整。
我认为[这](https://github.com/jcesarmobile/PhonegapOCRPlugin)应该是您在 iOS 上所需要的。
而[这个](https://github.com/phonegap/phonegap-plugins/tree/master/Android/OcrApiService)适用于Android。

# qt - 当子小部件具有焦点时如何更改父小部件的背景？

> ID：14071647
> 
> 赞同：11
> 
> 时间：2012-12-28T15:16:55.027
> 
> 标签：qt, qt4, focus, qwidget

我想突出显示一个 QFrame，如果它的其中一个子小部件具有焦点（因此用户知道在哪里寻找光标 ;-)

![](../Images/b58dcab44ae7fe00e868ba3c76e1f87e.png)

一起使用某些东西

```
ui->frame->setFocusPolicy(Qt::StrongFocus);
ui->frame->setStyleSheet("QFrame:focus {background-color: #FFFFCC;}"); 
```

当我单击它时突出显示 QFrame，但是一旦选择了它的一个子小部件，它就会失去焦点。

可能的方法：

*   如果它是我的 QFrame 的子对象，我可以`connect()` `QApplication::focusChanged(old,now)`检查每个新对象，但这会变得混乱。

*   我还可以对每个子小部件进行子类化并重新实现`focusInEvent()`/`focusOutEvent()`并对此做出反应，但是对于许多不同的小部件，这也是很多工作。

有没有更优雅的解决方案？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-28T16:12:13.607

好吧，您可以扩展`QFrame`以使其监听其子小部件的焦点变化。或者你也可以在子部件上安装一个事件过滤器来捕捉`QFocusEvent`。

这是一个例子：

**我的框架.h**

```
#ifndef MYFRAME_H
#define MYFRAME_H

#include <QFrame>

class MyFrame : public QFrame
{
    Q_OBJECT

public:

    explicit MyFrame(QWidget* parent = 0, Qt::WindowFlags f = 0);

    void hookChildrenWidgetsFocus();

protected:

    bool eventFilter(QObject *object, QEvent *event);

private:

    QString m_originalStyleSheet;
};

#endif // MYFRAME_H 
```

**我的框架.cpp**

```
#include <QEvent>
#include "MyFrame.h"

MyFrame::MyFrame(QWidget *parent, Qt::WindowFlags f)
    : QFrame(parent, f)
{
    m_originalStyleSheet = styleSheet();
}

void MyFrame::hookChildrenWidgetsFocus()
{
    foreach (QObject *child, children()) {
        if (child->isWidgetType()) {
            child->installEventFilter(this);
        }
    }
}

bool MyFrame::eventFilter(QObject *object, QEvent *event)
{
    if (event->type() == QEvent::FocusIn) {
        setStyleSheet("background-color: #FFFFCC;");
    } else if (event->type() == QEvent::FocusOut) {
        setStyleSheet(m_originalStyleSheet);
    }

    return QObject::eventFilter(object, event);
} 
```

**主窗口.cpp**

```
#include <QHBoxLayout>
#include <QVBoxLayout>
#include <QLineEdit>
#include "MyFrame.h"
#include "mainwindow.h"

MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent)
{
    setWindowTitle(tr("Test"));

    MyFrame *frame1 = new MyFrame(this);
    frame1->setLayout(new QVBoxLayout());
    frame1->layout()->addWidget(new QLineEdit());
    frame1->layout()->addWidget(new QLineEdit());
    frame1->layout()->addWidget(new QLineEdit());
    frame1->hookChildrenWidgetsFocus();

    MyFrame *frame2 = new MyFrame(this);
    frame2->setLayout(new QVBoxLayout());
    frame2->layout()->addWidget(new QLineEdit());
    frame2->layout()->addWidget(new QLineEdit());
    frame2->layout()->addWidget(new QLineEdit());
    frame2->hookChildrenWidgetsFocus();

    QHBoxLayout *centralLayout = new QHBoxLayout();
    centralLayout->addWidget(frame1);
    centralLayout->addWidget(frame2);

    QWidget *centralWidget = new QWidget();
    centralWidget->setLayout(centralLayout);

    setCentralWidget(centralWidget);
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-04-24T12:34:26.320

我相信你给出的两个答案都是错误的。它们适用于简单的情况，但非常脆弱和笨拙。我相信最好的解决方案是您在问题中实际提出的建议。我会去连接到`QApplication::focusChanged(from, to)`. 您只需将主框架对象连接到此信号，然后在插槽中检查`to`对象（接收焦点的对象）是否是框架对象的子对象。

```
Frame::Frame(...)
{
// ...
  connect(qApp, &QApplication::focusChanged, this, &Frame::onFocusChanged);
// ...
}

// a private method of your Frame object
void Frame::onFocusChanged(QWidget *from, QWidget *to)
{
  auto w = to;
  while (w != nullptr && w != this)
    w = w->parentWidget();

  if (w == this) // a child (or self) is focused
    setStylesheet(highlightedStylesheet);
  else // something else is focused
    setStylesheet(normalStylesheet);
} 
```

优势很明显。这段代码简洁明了。你只连接一个信号槽，你不需要捕捉和处理事件。它可以很好地响应对象创建后所做的任何布局更改。如果你想优化掉不必要的重绘，你应该缓存信息是否有任何孩子被聚焦，并且只有当这个缓存的值被改变时才改变样式表。那么解决方案将是完美的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-28T19:45:19.260

首先，创建一个简单的子类，`QFrame`它重新实现了`eventFilter(QObject*, QEvent*)`虚函数：

```
class MyFrame : public QFrame {
    Q_OBJECT

public:
    MyFrame(QWidget *parent = 0, Qt::WindowFlags f = 0);
    ~MyFrame();

    virtual bool eventFilter(QObject *watched, QEvent *event);
}; 
```

使用`MyFrame`而不是`QFrame`包含您的小部件。然后，在代码中创建包含在 中的小部件的某处，`MyFrame`在这些小部件上安装事件过滤器：

```
 // ...
    m_myFrame = new MyFrame(parentWidget);
    QVBoxLayout *layout = new QVBoxLayout(myFrame);
    m_button = new QPushButton("Widget 1", myFrame);

    layout->addWidget(m_button);
    m_button->installEventFilter(myFrame);
    //... 
```

此时，`MyFrame::eventFilter()`将**在**任何事件传递给小部件之前调用，让您在小部件意识到之前对其进行操作。在 内`MyFrame::eventFilter()`，`true`如果您想过滤掉事件（即您不希望小部件处理事件），则返回，`false`否则返回。

```
bool MyFrame::eventFilter(QObject *watched, QEvent *event)
{
    if (watched == m_button) { // An event occured on m_button
        switch (event -> type()) {
            case QEvent::FocusIn:
                // Change the stylesheet of the frame
                break;
            case QEvent::FocusOut:
                // Change the stylesheet back
                break;
            default:
                break;
        }
    }

    return false; // We always want the event to propagate, so always return false
} 
```

# c# - 关于 c# 中的在线交互式 PDF Web 表单

> ID：14071650
> 
> 赞同：0
> 
> 时间：2012-12-28T15:17:09.677
> 
> 标签：c#, asp.net, itextsharp, itext

我想学习如何使用 Visual Studios 2010 创建一个在线 PDF WEB 表单，它可以将数据存储到我的 SQL 数据库中，只是不知道从哪里开始。

我找到了一本名为“iText In Action”的书，但它似乎更适合 Java 开发人员。有没有更适合 C# 和创建 web pdf 表单的书籍？任何关于我应该从哪里开始的帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T15:22:15.790

您可以尝试 iTextSharp，它是 Java iText 的 .NET 端口。我找到了这个资源 [http://www.4guysfromrolla.com/articles/030911-1.aspx](http://www.4guysfromrolla.com/articles/030911-1.aspx)

我已经使用这个库来制作 PDF 表单，它非常简单。该过程类似于使用 Adob​​e Acrobat 等外部工具创建 PDF 表单，然后，您的程序必须读取它并使用您需要的数据设置字段。像这样的东西：

```
using (var existingFileStream = File.OpenRead(_pdfTemplatePath))
using (var memoryStream = new MemoryStream())
{
    // Open existing PDF  
    var pdfReader = new PdfReader(existingFileStream);

    // PdfStamper, which will create  
    var stamper = new PdfStamper(pdfReader, memoryStream);

    var form = stamper.AcroFields;

    form.SetField("Field_A", yourDataForA);
    form.SetField("Field_B", yourDataForB);
    form.SetField("Field_C", yourDataForC);

    stamper.FormFlattening = true;
    stamper.Close();
    pdfReader.Close();

    string cd = "inline";

    // And then send to the browser
    HttpContext.Current.Response.Clear();
    HttpContext.Current.Response.ContentType = "application/pdf";
    HttpContext.Current.Response.AddHeader("content-disposition", 
        string.Format("{0};filename={1}.pdf", cd, string.IsNullOrEmpty(_theFilename)
                                                                     ? "documento"
                                                                     : _theFilename));
    HttpContext.Current.Response.BinaryWrite(memoryStream.ToArray());

} 
```

# javascript - 使用javascript后css悬停事件不起作用？

> ID：14071652
> 
> 赞同：5
> 
> 时间：2012-12-28T15:17:20.903
> 
> 标签：javascript, css

这是我遇到问题的代码-

```
<!DOCTYPE html>
<html>
<head>
<style type="text/css">
p {
    font-family: Tahoma;
    line-height: 170%;
    color: #000;
    font-size: 15px;
    padding: 5px 0px 5px 0px;
    text-align: center;
}
#col1 {
    //some propeties
}
#col1:hover ~ p {
    color: #f00;
}

#col2 {
    //some propeties
}
#col2:hover ~ p {
    color: #ff0;
}
</style>
</head>
<body>
<div id="col1"><span>Hover to view and click to select this color.</span></div>
<div id="col2"><span>Hover to view and click to select this color.</span></div>

<p>This is some text.</p>

<script type="text/javascript">

var pElements = document.getElementsByTagName("p");

$('#col1').click(function(){
for(var i = 0; i < pElements.length; i++) {
   pElements[i].style.color = "#f00";
}
});

$('#col2').click(function(){
for(var i = 0; i < pElements.length; i++) {
   pElements[i].style.color = "#ff0";
}
});

</script>
</body>
</html> 
```

我真正想要的是，当我悬停颜色 div 时，p 标签中文本的颜色仅在颜色 div 悬停时发生变化。单击颜色 div 时，文本的颜色应永久更改。

问题在于，一旦我单击颜色 div 中的 1 个以将其最终确定为 p 标签，然后将另一种颜色悬停，颜色变化就不会发生。颜色会在点击时永久改变，因为它应该发生。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-28T15:32:02.233

当您设置`p`元素样式时，`pElements[i].style.color = "#f00";`您将设置一种更具体的样式，然后是悬停应用的样式。在 CSS 中，最具体的样式被应用到元素上。您定义的 CSS 悬停类将永远不会应用，因为它不够具体，无法覆盖您的 javascript 代码应用的内联样式。

您可以修改您的 CSS 悬停类以使用该`!important`标签，这应该允许您应用悬停样式，即使它不像内联样式那样具体。

```
#col2:hover ~ p {
    color: #ff0 !important;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T15:39:09.210

如果使用 JQuery 没有问题，我认为这就是您想要的：[**Live Example**](http://jsfiddle.net/GQWzj/1/)

**HTML 代码片段**

```
<div id="col1"><span>Hover to view and click to select this color.</span></div>
<div id="col2"><span>Hover to view and click to select this color.</span></div>

<p>This is some text.</p> 
```

**CSS 代码片段**

```
p {
    font-family: Tahoma;
    line-height: 170%;
    color: #000;
    font-size: 15px;
    padding: 5px 0px 5px 0px;
    text-align: center;
}
#col1 {
    //some propeties
}
#col1:hover ~ p {
    color: #f00 !important;
}
#col2 {
    //some propeties
}
#col2:hover ~ p {
    color: #ff0 !important;
}​ 
```

**JS代码片段**

```
$("#col1").click(function () {
    $("p").css("color","#f00");
});

$("#col2").click(function () {
    $("p").css("color","#ff0");
}); 
```

希望能帮助到你！

# python - PyMaps：如何在 python 中与 javascript 交互

> ID：14071654
> 
> 赞同：1
> 
> 时间：2012-12-28T15:17:23.233
> 
> 标签：python, python-3.x, google-maps-api-2

好的，所以我使用[此](http://code.google.com/p/pymaps/)代码设置了一个简单的程序。基本上它只是在 python 的地图上设置点。很基础。现在的问题是我有一个条件，当这种情况发生时，它会用一个简单的`QWebView.setHtml()`. 我现在要做的是找到一种方法来获取地图的当前缩放和中心信息并保存。无论如何要进入javascript并获取该信息，将其存储，然后将其写入html，就像在我进行刷新之前这段代码已经完成的那样？

抱歉，如果这令人困惑或宽泛，我只是想不出一种使用 python 从地图中获取信息的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T15:39:52.220

有多种方法可以与来自服务器的客户端代码 (Python) 进行交互。您可以在客户端设置 cookie，从 Javascript 向服务器发送 AJAX 请求，提交表单，或者采用更奇特的路线，例如 WebSockets。如果没有更多信息，我不确定我们能否告诉您哪个是最好的。

你用的是什么网络框架？

编辑：

哦，我明白了-您正在使用可编写脚本的 Web 视图...也许类似于`zoom = view.evaluateJavaScript('map.getZoom();')`？从我对库的了解来看，困难的部分可能是在 JS 中获取对 map var 的引用。

编辑：

我认为如果不修改或扩展 pymaps，这是不可能的，因为它在 JS 中本地限定 GMap 并且不会在任何地方公开它。我已经大致做到了这[一点](https://gist.github.com/4399621)。然后，您可以使用类似于上述内容的方式访问缩放`zoom = view.evaluateJavaScript("PyMaps[0].gmap.getZoom();")`。

编辑：

万一这不清楚 - 我包含的要点要求您使用`MyPyMap`而不是`PyMap`.

从另一个[StackOverflow 问题](https://stackoverflow.com/questions/11060439/filling-out-a-form-using-pyqt-and-qwebview)，我意识到你不能`evaluteJavaScript`直接在视图上做。后续代码看起来更像这样

```
doc = view.page().mainFrame().documentElement()
zoom_level = doc.evaluateJavaScript("PyMaps[0].gmap.getZoom();") 
```

# knockout.js - 淘汰订阅选择与 KendoUI 不一致的触发

> ID：14071659
> 
> 赞同：0
> 
> 时间：2012-12-28T15:17:41.823
> 
> 标签：knockout.js, kendo-ui

我有一个选择控件，我有一个订阅。当我不应用剑道样式时，控件按预期工作，订阅代码触发一次并且不会重新触发 onBlur 或任何其他原因。当我确实应用了 kendoDropDownList 时，订阅的行为*始终如一*。

```
$("select").kendoDropDownList(); 
```

不稳定的行为是选择一个值，订阅触发。单击另一个控件，订阅事件再次触发并且值未定义，即使选择控件将值显示为未更改。随后的选择会按预期触发订阅。使用剑道时，在选择控件上使用向下/向上箭头也不会触发。

```
<select id="newExperienceFrequency"   data-bind="value: frequency, options: $root.controls.frequencies,  optionsText: 'name', optionsValue: 'id', optionsCaption: 'Select', event: { mouseover: mouseoverFrequency, mouseout: mouseoffFrequency }" class="select frequencyTip" title="foo"></select>

    self.proficiency.subscribe(function () {
        self.proficiencyId = self.proficiency();
        console.log('proficiency subscribed: ' + self.proficiency());
        my.setCounterHint($("#newExperienceFrequency").val(), self.proficiency());

        var tip = "Don't just list those skills your strongest in. It's just as important to add new skills you are aquiring!";
        var result = $.grep(my.ajaxData.member.Proficiencies, function (e) { return e.Id == self.proficiency(); });
        if (result.length == 0) {
            // not found
        } else if (result.length == 1) {
            // access the foo property using result[0].foo
            tip = result[0].Name + ':\nAutonomy: ' + result[0].Autonomy + '\nContext: ' + result[0].nContext + '\nKnowledge: ' + result[0].Knowledge + '\nWorkmanship: ' + result[0].Workmanship;
        } else {
            // multiple items found
        }
        $(".proficiencyTip").attr('title', tip).attr('alt', tip);
        $(".proficiencyQuestionMark").fadeIn('slow');
    }); 
```

这是一个已知问题，还是我只是做错了什么？我是否通过尝试将 Kendo 与 Knockout 一起使用来为自己做更多的工作？如果我只是使用剑道并放弃淘汰赛，这些问题会消失吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T16:17:59.250

我对 KendoUI 的了解不如对淘汰赛的了解。但是，如果我不得不猜测，那将是剑道在元素上触发了一个更改的事件，这导致淘汰赛的触发次数比通常情况下要多。

我建议为您的订阅提供新值的参数，而不是`self.proficiency()`在订阅中引用。然后您可以检查该值是否在订阅中定义。

另外，我建议重新评估一种避免在视图模型中执行 jquery 的方法。如果您必须执行 jquery，请制作自定义动画或新绑定。您很可能可以将您的 Ui 绑定到 VM 中的另一个属性并解耦您的视图/虚拟机。

例如，问号元素可以绑定到布尔可观察对象。制作自定义绑定fadeVisible。我依稀记得文档中有一个样本。制作起来并不难。（提示： http: [//knockoutjs.com/examples/animatedTransitions.html](http://knockoutjs.com/examples/animatedTransitions.html)）

```
self.proficiency.subscribe(function(val) {
    if (typeof(val) === 'undefined')) {
        return;
    }
}); 
```

# xcode - MagicalRecord 在重新启动应用程序时删除核心数据存储

> ID：14071661
> 
> 赞同：0
> 
> 时间：2012-12-28T15:18:06.627
> 
> 标签：xcode, core-data, magicalrecord

我不知道为什么，但每次我重新启动应用程序时，MagicalRecord 都会删除我的商店，我在文档中看到：

> 当使用设置了 DEBUG 标志的默认 sqlite 数据存储时，如果您更改模型而不创建新模型版本，Magical Record 将删除旧存储并自动创建一个新存储。每次进行更改时不再需要卸载/重新安装！（[见magicRecord github页面](https://github.com/magicalpanda/MagicalRecord)

去掉了DEBUG标志，尝试创建新模型版本，MR还在删除我的商店...

请帮帮我 ：-）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T17:07:39.030

这可能是一个错误。请向 github 存储库添加一个[问题。](https://github.com/magicalpanda/magicalrecord/issues)或者，如果您需要加快速度，您可以查看代码，并注释掉检查您的模型是否与您的持久存储兼容的行。

# visual-studio-2012 - Visual Studio Web 发布日志

> ID：14071670
> 
> 赞同：8
> 
> 时间：2012-12-28T15:18:40.607
> 
> 标签：visual-studio-2012

是否可以在 Visual Studio 中查看网站发布时间的日志？我们遇到过这样一种情况，即我们网站的目录被删除，但“样式”子文件夹除外。

试图确定这是 Visual Studio 发布失败还是其他原因。剩余的“样式”文件夹有一个最后修改日期，因此了解它是否与发布时间匹配会很有帮助。

# url - 使用 .htaccess 从 URL 末尾删除查询字符串

> ID：14071671
> 
> 赞同：7
> 
> 时间：2012-12-28T15:18:44.687
> 
> 标签：url, mod-rewrite

我正在尝试从 URL 末尾删除字符串：

例如我有这样的结构：

```
http://sitename.com/category/first-category-name/?post_type=question
http://sitename.com/category/second-category-name/?post_type=question
http://sitename.com/category/...-category-name/?post_type=question 
```

我想`?post_type=question`从 URL 的末尾删除。

我在stackoverflow上找到了很多例子，但没有一个适合我。

谢谢你。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-29T15:36:06.447

这很简单，只需使用：

```
RewriteCond %{QUERY_STRING}    "post_type=" [NC]
RewriteRule (.*)  /$1? [R=301,L] 
```

如果要将其添加到 wordpress 网站，则需要在任何 wordpress 规则之前添加它：

```
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L] 
```

但是之后

```
RewriteBase / 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-28T20:57:29.920

只需执行以下操作：

```
RewriteEngine On
RewriteBase /
# Make sure there is a query string
RewriteCond %{QUERY_STRING} .
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule .*  /? [R=301,L] 
```

将 a`?`放在末尾以在存在时删除查询。

# android - env->GetFloatArrayElements 错误 安卓

> ID：14071673
> 
> 赞同：-2
> 
> 时间：2012-12-28T15:19:03.860
> 
> 标签：android, c++, eclipse, java-native-interface

android项目：我有c。文件 ：

```
 /* DO NOT EDIT THIS FILE - it is machine generated */
     #include <com_jp_algi_Corelib.h>
           /* Header for class com_jp_algi_Corelib */
       #ifdef __cplusplus
       #define EXTCFUNC extern "C"
          #elseif
        #define EXTCFUNC extern
        #endif

        JNIEXPORT jfloatArray JNICALL Java_com_jp_algi_Corelib_vector
        (JNIEnv * env, jobject clazz, jfloatArray input){

      jfloatArray result;

              }

                jfloat* flt1 = env->GetFloatArrayElements(input,0) 
```

;insiperd by : 堆栈流中的 Eiegen android。

并且有一些错误：

```
C:/AA/FileBroswerActivity/jni/com_jp_algi_Corelib.c:23: error: 'env' undeclared here (not in a function)
C:/AA/FileBroswerActivity/jni/com_jp_algi_Corelib.c:23: error: 'input' undeclared here (not in a function)
/cygdrive/c/android-ndk-r5c/build/core/build-binary.mk:217: recipe for target `/cygdrive/c/AA/FileBroswerActivity/obj/local/armeabi/objs/com_jp_algi_Corelib/com_jp_algi_Corelib.o' failed
make: *** [/cygdrive/c/AA/FileBroswerActivity/obj/local/armeabi/objs/com_jp_algi_Corelib/com_jp_algi_Corelib.o] Error 1 
```

16:52:03 构建完成（耗时 672 毫秒）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T16:04:26.880

你的帖子真的不清楚，但你的文件应该是这样的

*   .h 文件：

    ```
    #include <jni.h>

    #ifdef __cplusplus
    extern "C" {
    #endif

    jfloatArray JNICALL Java_com_jp_algi_Corelib_vector(JNIEnv * env, jobject clazz, jfloatArray input);

    #ifdef __cplusplus
    }
    #endif 
    ```

*   .cpp 文件：

    ```
    #include "yourheader.h"

    #ifdef __cplusplus
    extern "C" {
    #endif

    jfloatArray JNICALL Java_com_jp_algi_Corelib_vector(JNIEnv * env, jobject clazz, jfloatArray input)
    {
      jfloat* flt1 = env->GetFloatArrayElements(input,0);
    }

    #ifdef __cplusplus
    }
    #endif 
    ```

**编辑**（编辑后）：

```
jfloat* flt1 = env->GetFloatArrayElements(input,0); 
```

在函数体之外

# android - 插入或更新，仅当给定时间戳更新时才更新

> ID：14071676
> 
> 赞同：1
> 
> 时间：2012-12-28T15:19:20.913
> 
> 标签：android, sqlite

我想要

*   如果它不存在，则在我的表中插入一个新行
*   如果 key 已经存在，则更新条目，但前提是字段时间戳日期比存储的字段更新。我用 sqlite 试过这个，但它在 where 附近给了我一个错误。我也不确定这是否正确以及如何正确执行。

代码：

```
String sql = "INSERT OR REPLACE INTO "+TABLE_USER+" (...)" +
     " VALUES ('"..."'" + 
     ") WHERE " + timestamp + 
         " > (select " + COLUMN_TIMESTAMP + 
         " from " + TABLE_USER + " where " + COL_NUMBER + " = '" nr + "')" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T15:30:05.450

插入或替换不允许使用 where 子句。我想你必须分两步完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-11T11:12:17.443

仅当 updated_at 字段较新时才更新的示例。

```
-- https://www.db-fiddle.com/f/7jyj4n76MZHLLk2yszB6XD/22

DROP TABLE IF EXISTS db;

CREATE TABLE db
(
 id PRIMARY KEY,
 updated_at,
 other
);

INSERT INTO db (id,updated_at,other) VALUES(1,1,1);

SELECT * FROM db;

INSERT INTO db (id,updated_at,other) VALUES(1,2,2)
ON CONFLICT(id) DO UPDATE SET updated_at=excluded.updated_at;

SELECT * FROM db;

-- WHERE is FALSE
INSERT INTO db (id,updated_at,other) VALUES(1,2,3)
ON CONFLICT(id) DO UPDATE SET updated_at=excluded.updated_at, other=excluded.other
WHERE excluded.updated_at > updated_at;

SELECT * FROM db;

-- ok to SET a PRIMARY KEY. WHERE is TRUE
INSERT INTO db (id,updated_at,other) VALUES(1,3,4)
ON CONFLICT(id) DO UPDATE SET id=excluded.id, updated_at=excluded.updated_at, other=excluded.other
WHERE excluded.updated_at > updated_at;

SELECT * FROM db; 
```

# scala - InvalidActorNameException - 演员名称 {name} 不是唯一的

> ID：14071681
> 
> 赞同：4
> 
> 时间：2012-12-28T15:19:45.850
> 
> 标签：scala, playframework, playframework-2.0, akka

所以我开始在我的 Play 2.0 应用程序中使用 Akka 演员。我很快注意到重复调用向同一个参与者发送消息，通过以下方式指定：

```
val myActor = Akka.system.actorOf(Props[MyActor], name = "myactor") 
```

结果`InvalidActorNameException`.

然后我开始阅读这个[文档中的 Actors 的创建](http://doc.akka.io/docs/akka/2.0.2/scala/actors.html#Creating_Actors_with_default_constructor)

该文档似乎建议创建一个“主” Actor 类，其中指定了所有单独的演员。`receive`反过来，这个 Actor 类的 将匹配消息并将消息委托给适当的 Actor 。

所以我尝试了这个，现在有类似的东西：

```
class MasterActor extends Actor{
  import context._
  val emailActor = actorOf(Props[EmailActor], name = "emailActor")
  protected def receive = {
    case reminder : BirthdayReminder => emailActor ! reminder
  }

} 
```

问题是我和以前一样。`InvalidActorNameException`当我尝试以下操作时，我不知道如何避免：

```
 val myActor = Akka.system.actorOf(Props[MasterActor], name = "MasterActor")
    myActor ! BirthdayReminder(someBirthday) 
```

那么组织我的演员的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T15:24:25.183

如果您只想要一个 MasterActor，为什么要创建多个？您应该只查找您已经创建的那个：

```
val actorRef = context.actorFor("MasterActor")
actorRef ! BirthdayReminder(someBirthday) 
```

# java - chrome扩展和java服务器之间的Websocket连接

> ID：14071688
> 
> 赞同：1
> 
> 时间：2012-12-28T15:20:28.663
> 
> 标签：java, javascript, google-chrome, google-chrome-extension, websocket

我正在尝试在运行以下代码的 chrome 扩展之间建立 websocket 连接：

```
if('WebSocket' in window){
  connect('ws://localhost:8181/chat');
}

function connect(host) {
  var ws = new WebSocket(host);
  ws.onopen = function () {
    alert('connected');
  };

  ws.onmessage = function (evt) {  
    alert('reveived data:'+evt.data);
  };

  ws.onclose = function () {
    alert('socket closed');
  };
}; 
```

和一个 Java 服务器。

```
import java.io.*;
import java.net.*;
import java.util.logging.Level;
import java.util.logging.Logger;

public class ServerThread extends Thread {
    Socket socket = null;
    int NumberOfThread;
    Main Mainthread;

    public ServerThread(Socket socket) {
    super("ServerThread");
    this.socket = socket;
    }

    @Override
    public void run(){

        try {
            while(true){

            BufferedReader SS_BF = new BufferedReader(new             InputStreamReader(socket.getInputStream()));

            String temp = SS_BF.readLine();
            System.out.println(temp);

            }

       } catch (IOException ex) {

           suicide();
        }

}

public void suicide(){
    try {

        /*this.socket.shutdownInput();
        this.socket.shutdownOutput();

        this.socket.close();*/

        Mainthread.Coroner(NumberOfThread);

    } catch (IOException ex) {
        Logger.getLogger(ServerThread.class.getName()).log(Level.SEVERE, null, ex);
    }
}
public void identify(int n, Main m)throws IOException{

    NumberOfThread=n;
    Mainthread=m;

}
public void Send(String s)throws IOException{
    PrintStream SSPS = new PrintStream(socket.getOutputStream());
    SSPS.println(s);
    System.out.println ("Sent text to CLIENT_" + NumberOfThread);
}
} 
```

所以我可以建立连接，直到握手，然后什么也没有。客户端挂起或断开连接，但永远不会触发 onOpen 事件。

我希望我已经提供了足够的信息。谁能告诉我如何从 google chrome 扩展程序中的客户端和在桌面上运行的 java 服务器建立 websocket 连接？

提前致谢！斯莫列特。

# jquery - encodeURIComponent 没有给我想要的输出

> ID：14071689
> 
> 赞同：1
> 
> 时间：2012-12-28T15:20:33.220
> 
> 标签：jquery, url, encoding, urlencode, encodeuricomponent

我正在创建一个应用程序，它在用户输入（街道、城市）的帮助下屏幕抓取网站。但是，街道或城市可能有字符“å”、“ä”和“ö”，需要对其进行编码。

我尝试过 encodeURIComponent，但是当直接在页面上的表单中输入街道和城市时，它的输出与我要抓取的站点不同（见下文）。我可以使用/做什么来获得所需的输出？

```
var url = 'http://www.foosite.com/result.jspv?street=' +
encodeURIComponent(street) + '&city=' + encodeURIComponent(city);

From my app:   http://www.foosite.com/result.jspv?street=Vaktarev%C3%A4gen&city=M%C3%B6nster%C3%A5s
From the site: http://www.foosite.com/result.jspv?street=Vaktarev%E4gen&city=M%F6nster%E5s 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T15:54:16.270

该站点可能正在使用`escape`，它返回一个 Unicode 代码点。相反，`encodeURIComponent`生成一个 UTF-8 值。（向下滚动到[http://www.utf8-chartable.de/](http://www.utf8-chartable.de/)`U+00E4`上的代码点以获取 的不同值。）`ä`

我通常不鼓励使用该[`escape`](https://developer.mozilla.org/en-US/docs/DOM/window.escape)功能，因为它没有在任何标准中指定。但是，由于这可能是匹配站点行为的最简单方法（遗憾的是，它不使用首选`encodeURIComponent`），因此它肯定是您在这里的最佳选择。尽管是非标准的，但它几乎可以在所有浏览器中运行。

# javascript - JS下拉索引没有改变

> ID：14071692
> 
> 赞同：0
> 
> 时间：2012-12-28T15:20:34.900
> 
> 标签：javascript, jquery-mobile, html-select

我在尝试以编程方式更改的 Javascript 中有一个下拉菜单，但它不合作。首先，框中的文本保持在第一个选项。如果我单击它以拉下下拉列表，那么我会看到我设置的索引被突出显示。但是，我无法选择该选项，但我可以选择菜单中的任何其他选项。这是我在 $(document).ready 上使用的代码：

```
document.getElementById("filteredSubDropdown").selectedIndex = localStorage["currentMonth"]; 
```

编辑：创建下拉列表的一些 HTML

```
<div data-role="content" id="box">
    <ul data-role="listview" data-inset="true" id="merchAccountDetails" data-theme="b" data-content-theme="b">
        <div data-role="content">
            <div id="firstDrop">
                <center><font size="4" color="Green" face="times new roman">Filter Data by:</font></center>
                <select id="filterByDropdown">
                </select>
            </div>
            <center><font size="4" color="Green">Filter Data by month:</font></center>
            <select id="filteredSubDropdown">
            </select>
            </center>
            <center><font size="4" color="Green">Filter Data by Account:</font><br>
            </center>
            <center>
            <select id="accountDropdown">
            </select>
            </center>
        </div>
        <div id="chicken">
            <center><img src="spin.gif" alt="loading.."/>Loading Data...</center>
        </div>
        <p id="finInfo">
        </p>
        <br/>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T15:23:38.710

### 建议：

1.  您是否尝试提供一个数字并检查它是否有效？
2.  的价值是`localStorage["currentMonth"]`多少？

### 尝试以这种方式更改代码：

```
document.getElementById("filteredSubDropdown")
                           .selectedIndex = localStorage.getItem("currentMonth"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T15:58:27.873

我同意 Praveen Kumar 的回答。否则，如果你可以使用 jquery，

`$("#filteredSubDropdown").attr('selectedIndex', localStorage.getItem("currentMonth"));`

确保在元素加载后运行 javascript，以便选择器不会返回 null。

还要确保您的目标 id 输入正确，区分大小写。

**此外，确保您定位的选择元素实际上具有您尝试选择的选项。**

根据您之前的编辑，您似乎正在尝试定位选择元素没有的选项。您是否尝试将此选项添加到下拉框中？

# php - 如何使用 mod_fcgid 在 Apache 中启用 ForceType

> ID：14071697
> 
> 赞同：0
> 
> 时间：2012-12-28T15:20:41.390
> 
> 标签：php, apache, fastcgi, mod-fcgid

我有，所以我必须[按照 Google 的说明](https://developers.google.com/speed/spdy/mod_spdy/php)`mod_spdy`启用`mod_fcgid`PHP 。配置如下所示：

```
<Location />
AddHandler fcgid-script .php
Options +ExecCGI
FcgidWrapper /usr/bin/php-cgi .php
</Location> 
```

但是，现在`ForceType application/x-httpd-php`不起作用。

这是我以前的：

```
<FilesMatch (index.html|foo|bar)>
ForceType application/x-httpd-php
</FilesMatch> 
```

但它现在被忽略了——即 PHP 被渲染而不是预处理。这是发生的事情：

```
$ curl -i http://blahblah.ca/
HTTP/1.1 200 OK
Date: Fri, 28 Dec 2012 15:19:22 GMT
Server: Apache/2.2.22 (Ubuntu)
Last-Modified: Wed, 07 Apr 2010 20:49:57 GMT
ETag: "494bb1-676-483abb4742740"
Accept-Ranges: bytes
Content-Length: 1654
Vary: Accept-Encoding
Content-Type: application/x-httpd-php 
```

如何让 ForceType 与 mod_fcgid 一起使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T11:19:42.990

尝试这个

```
<FilesMatch (index.html|foo|bar)>
  SetHandler fcgid-script
  FCGIWrapper /usr/bin/php-cgi
</FilesMatch> 
```

# python - 在 scipy 中积分多维积分

> ID：14071704
> 
> 赞同：20
> 
> 时间：2012-12-28T15:21:28.463
> 
> 标签：python, math, numpy, scipy, scientific-computing

**动机：**我有一个多维积分，为了完整起见，我在下面复制了它。它来自于存在显着各向异性时的第二维里系数的计算：

![在此处输入图像描述](../Images/3e715eec8c68f3f392ffb4c877a52843.png)

这里 W 是所有变量的函数。这是一个已知函数，我可以为它定义一个 python 函数。

**编程问题：**如何`scipy`整合这个表达式？我正在考虑将两个三重四边形 ( [`scipy.integrate.tplquad`](http://docs.scipy.org/doc/scipy/reference/generated/scipy.integrate.tplquad.html#scipy.integrate.tplquad)) 链接在一起，但我担心性能和准确性。中是否有更高维的积分器`scipy`，可以处理任意数量的嵌套积分？如果没有，最好的方法是什么？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-12-28T20:46:07.960

对于像这样的高维积分，蒙特卡洛方法通常是一种有用的技术 - 它们将答案收敛为函数评估次数的平方根倒数，这对于高维更好，然后你通常会得到偶数相当复杂的自适应方法（除非你知道关于你的被积函数的一些非常具体的东西——可以利用的对称性等）

[mcint](http://pypi.python.org/pypi/mcint/)包执行蒙特卡洛积分：运行一个非平凡但仍可积分的非平凡`W`，因此我们知道我们得到的答案（请注意，我已将 r 截断为来自 [0,1）；您必须进行某种对数转换或其他操作才能将该半无界域转换为大多数数值积分器易于处理的东西）：

```
import mcint
import random
import math

def w(r, theta, phi, alpha, beta, gamma):
    return(-math.log(theta * beta))

def integrand(x):
    r     = x[0]
    theta = x[1]
    alpha = x[2]
    beta  = x[3]
    gamma = x[4]
    phi   = x[5]

    k = 1.
    T = 1.
    ww = w(r, theta, phi, alpha, beta, gamma)
    return (math.exp(-ww/(k*T)) - 1.)*r*r*math.sin(beta)*math.sin(theta)

def sampler():
    while True:
        r     = random.uniform(0.,1.)
        theta = random.uniform(0.,2.*math.pi)
        alpha = random.uniform(0.,2.*math.pi)
        beta  = random.uniform(0.,2.*math.pi)
        gamma = random.uniform(0.,2.*math.pi)
        phi   = random.uniform(0.,math.pi)
        yield (r, theta, alpha, beta, gamma, phi)

domainsize = math.pow(2*math.pi,4)*math.pi*1
expected = 16*math.pow(math.pi,5)/3.

for nmc in [1000, 10000, 100000, 1000000, 10000000, 100000000]:
    random.seed(1)
    result, error = mcint.integrate(integrand, sampler(), measure=domainsize, n=nmc)
    diff = abs(result - expected)

    print "Using n = ", nmc
    print "Result = ", result, "estimated error = ", error
    print "Known result = ", expected, " error = ", diff, " = ", 100.*diff/expected, "%"
    print " " 
```

运行给

```
Using n =  1000
Result =  1654.19633236 estimated error =  399.360391622
Known result =  1632.10498552  error =  22.0913468345  =  1.35354937522 %

Using n =  10000
Result =  1634.88583778 estimated error =  128.824988953
Known result =  1632.10498552  error =  2.78085225405  =  0.170384397984 %

Using n =  100000
Result =  1646.72936 estimated error =  41.3384733174
Known result =  1632.10498552  error =  14.6243744747  =  0.8960437352 %

Using n =  1000000
Result =  1640.67189792 estimated error =  13.0282663003
Known result =  1632.10498552  error =  8.56691239895  =  0.524899591322 %

Using n =  10000000
Result =  1635.52135088 estimated error =  4.12131562436
Known result =  1632.10498552  error =  3.41636536248  =  0.209322647304 %

Using n =  100000000
Result =  1631.5982799 estimated error =  1.30214644297
Known result =  1632.10498552  error =  0.506705620147  =  0.0310461413109 % 
```

您可以通过矢量化随机数生成等来大大加快速度。

当然，您可以按照您的建议链接三重积分：

```
import numpy
import scipy.integrate
import math

def w(r, theta, phi, alpha, beta, gamma):
    return(-math.log(theta * beta))

def integrand(phi, alpha, gamma, r, theta, beta):
    ww = w(r, theta, phi, alpha, beta, gamma)
    k = 1.
    T = 1.
    return (math.exp(-ww/(k*T)) - 1.)*r*r*math.sin(beta)*math.sin(theta)

# limits of integration

def zero(x, y=0):
    return 0.

def one(x, y=0):
    return 1.

def pi(x, y=0):
    return math.pi

def twopi(x, y=0):
    return 2.*math.pi

# integrate over phi [0, Pi), alpha [0, 2 Pi), gamma [0, 2 Pi)
def secondIntegrals(r, theta, beta):
    res, err = scipy.integrate.tplquad(integrand, 0., 2.*math.pi, zero, twopi, zero, pi, args=(r, theta, beta))
    return res

# integrate over r [0, 1), beta [0, 2 Pi), theta [0, 2 Pi)
def integral():
    return scipy.integrate.tplquad(secondIntegrals, 0., 2.*math.pi, zero, twopi, zero, one)

expected = 16*math.pow(math.pi,5)/3.
result, err = integral()
diff = abs(result - expected)

print "Result = ", result, " estimated error = ", err
print "Known result = ", expected, " error = ", diff, " = ", 100.*diff/expected, "%" 
```

这很慢，但对于这个简单的情况给出了非常好的结果。哪个更好取决于您的复杂`W`程度以及您的准确性要求。简单（快速评估）的高精度 W 将推动您采用这种方法；具有中等精度要求的复杂（评估缓慢）W 将推动您使用 MC 技术。

```
Result =  1632.10498552  estimated error =  3.59054059995e-11
Known result =  1632.10498552  error =  4.54747350886e-13  =  2.7862628625e-14 % 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-10-23T21:42:10.193

[Jonathan Dursi 给出](https://stackoverflow.com/a/14075572/10548649)了一个非常好的答案。我将补充他的答案。

现在`scipy.integrate`有一个名为的函数`nquad`，可以毫不费力地执行多维积分。有关更多信息，请参阅[此链接](https://docs.scipy.org/doc/scipy/reference/generated/scipy.integrate.nquad.html#scipy.integrate.nquad)。`nquad`下面我们使用Jonathan 的示例计算积分：

```
from scipy import integrate
import math
import numpy as np

def w(r, theta, phi, alpha, beta, gamma):
    return(-math.log(theta * beta))

def integrand(r, theta, phi, alpha, beta, gamma):
    ww = w(r, theta, phi, alpha, beta, gamma)
    k = 1.
    T = 1.
    return (math.exp(-ww/(k*T)) - 1.)*r*r*math.sin(beta)*math.sin(theta)

result, error = integrate.nquad(integrand, [[0, 1],             # r
                                            [0, 2 * math.pi],   # theta
                                            [0, math.pi],       # phi
                                            [0, 2 * math.pi],   # alpha
                                            [0, 2 * math.pi],   # beta
                                            [0, 2 * math.pi]])  # gamma
expected = 16*math.pow(math.pi,5)/3
diff = abs(result - expected) 
```

结果比链式更准确`tplquad`：

```
>>> print(diff)
0.0 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-07T20:56:58.050

我将就如何准确地进行这种积分做一些一般性的评论，但这个建议并不特定于 scipy（评论太长，即使它不是答案）。

我不知道您的用例，即您是否对具有几位数准确度的“好”答案感到满意，这可以使用 Jonathan Dursi 的回答中概述的蒙特卡洛直接获得，或者您是否真的想推动数字尽可能准确。

我自己对维里系数进行了分析、蒙特卡罗和正交计算。如果你想准确地做积分，那么你应该做一些事情：

1.  尝试尽可能多地进行积分；很可能在您的某些坐标中集成非常简单。

2.  考虑转换积分变量，使被积函数尽可能平滑。（这对蒙特卡洛和正交都有帮助）。

3.  对于 Monte Carlo，使用重要性采样以获得最佳收敛。

4.  对于求积，使用 7 个积分，使用 tanh-sinh 求积可能获得真正快速的收敛。如果您可以将其降低到 5 个积分，那么您应该能够为您的积分获得 10 位数的精度。为此，我强烈推荐 mathtool / ARPREC，可从 David Bailey 的主页获得：[http ://www.davidhbailey.com/](http://www.davidhbailey.com/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-28T17:35:03.510

首先要说我数学不是很好，所以请善待。无论如何，这是我的尝试：
请注意，在您的问题中有**6 个**变量但有**7 个**积分！？
在`Python`使用中`Sympy`：

```
>>> r,theta,phi,alpha,beta,gamma,W,k,T = symbols('r theta phi alpha beta gamma W k T')
>>> W = r+theta+phi+alpha+beta+gamma
>>> Integral((exp(-W/(k*T))-1)*r**2*sin(beta)*sin(theta),(r,(0,2*pi)),(theta,(0,pi)),(phi,(0,2*pi)),(alpha,(0,2*pi)),(beta,(0,pi)),(gamma,(0,pi)))  

>>> integrate((exp(-W)-1)*r**2*sin(beta)*sin(theta),(r,(0,2*pi)),(theta,(0,pi)),(phi,(0,2*pi)),(alpha,(0,2*pi)),(beta,(0,pi)),(gamma,(0,pi))) 
```

结果如下：[LateX 代码]

```
\begin{equation*}- \frac{128}{3} \pi^{6} - \frac{\pi^{2}}{e^{2 \pi}} - \frac{\pi}{e^{2 \pi}} - \frac{2}{e^{2 \pi}} - \frac{\pi^{2}}{e^{3 \pi}} - \frac{\pi}{e^{3 \pi}} - \frac{2}{e^{3 \pi}} - 3 \frac{\pi^{2}}{e^{6 \pi}} - 3 \frac{\pi}{e^{6 \pi}} - \frac{2}{e^{6 \pi}} - 3 \frac{\pi^{2}}{e^{7 \pi}} - 3 \frac{\pi}{e^{7 \pi}} - \frac{2}{e^{7 \pi}} + \frac{1}{2 e^{9 \pi}} + \frac{\pi}{e^{9 \pi}} + \frac{\pi^{2}}{e^{9 \pi}} + \frac{1}{2 e^{8 \pi}} + \frac{\pi}{e^{8 \pi}} + \frac{\pi^{2}}{e^{8 \pi}} + \frac{3}{e^{5 \pi}} + 3 \frac{\pi}{e^{5 \pi}} + 3 \frac{\pi^{2}}{e^{5 \pi}} + \frac{3}{e^{4 \pi}} + 3 \frac{\pi}{e^{4 \pi}} + 3 \frac{\pi^{2}}{e^{4 \pi}} + \frac{1}{2 e^{\pi}} + \frac{1}{2}\end{equation*} 
```

你可以为你的问题多玩一点；）

# networking - 如何编写批处理文件来切换我的网络适配器？

> ID：14071706
> 
> 赞同：5
> 
> 时间：2012-12-28T15:21:47.147
> 
> 标签：networking, windows-7, batch-file

在我的工作中，有一个我可以连接到的公司 Intranet，以及一个 Wifi 网络。但是，我们不能在一台机器上同时连接到两个网络是公司政策。

不过，我需要在不同的时间使用任一网络，而我能够这样做的唯一方法是转到控制面板网络部分中某处的“更改适配器设置”，然后禁用我正在使用的任何适配器（局域网或wifi）并启用另一个。

作为一名程序员，这项任务的重复性和乏味让我感到困扰，那么我可以编写一个脚本来切换这些吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-28T15:29:16.907

你应该看看netsh：

前任：`netsh interface set interface "Local Area Connection" DISABLED`

（或`ENABLED`）

创建 2 个脚本，在您想要的一个上执行 ENABLED，在另一个上执行 DISABLED，反之亦然（或 1 个脚本，首先查看哪个是向上的，哪个是向下的，然后反转）

此命令还可以列出接口的状态。

但它在几种风格的窗口之间表现不同（或使用不同的语法）......所以你也可以看看[MicroSoft 的 devcon](http://lanbook.com/enable-disable-wireless-card-command-line/)。或另一种可能性：[wmic](http://answers.microsoft.com/en-us/windows/forum/windows_7-hardware/enabledisable-network-interface-via-command-line/17a21634-c5dd-4038-bc0a-d739209f5081)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T15:24:39.103

您可以使用 powershell 和网络适配器命令行开关来执行此操作。

[禁用-NetAdapter](http://technet.microsoft.com/en-us/library/jj130903.aspx) : PS C:> 禁用-NetAdapter -Name "Ethernet 2"

[Enable-NetAdapter](http://technet.microsoft.com/en-us/library/jj130876.aspx) : PS C:> Enable-NetAdapter -Name "Ethernet 2"

# c - printf("%llx") 有什么问题？

> ID：14071713
> 
> 赞同：14
> 
> 时间：2012-12-28T15:22:22.997
> 
> 标签：c, types, platform-independent

我有这段代码挑战了我对 C 的所有知识。这里我有：

```
int main(void){
    unsigned long long int massage ;

    scanf("%llX", &massage); //input: 0x1234567890abcdef
    printf("%llX", massage);
    return 0;
} 
```

在我的“64bit - Corei5 - Fedora - GCC”上，它会准确地打印出我输入的内容。但在我好友的系统（32 位、MS XP、MinGW）上，它会打印`90ABCDEF`. 我不明白为什么。有人知道吗？

顺便说一句：`sizeof(unsigned long long int)`在他的系统上是 8。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-28T15:29:29.303

问题是编译器所相信的（反映在`sizeof`：`sizeof(unsigned long long int)`在编译时评估）和运行时库相信的（反映在`printf`：`printf`函数在运行时被调用，所以这是它的格式 -说明符生效）。

根据[MinGW 文档中的“C99”](http://www.mingw.org/wiki/C99)：

> GCC 不包含 C 运行时库。这是平台提供的。GCC 的 MinGW 端口使用 Microsoft 的原始（旧）Visual C 运行时 MSVCRT，它是 Microsoft Visual Studio 6（1998 年发布）的目标。
> 
> […]
> 
> 因为 MinGW 依赖于 MSVCRT，它有许多与 Visual Studio 6 相同的限制和兼容性问题。您应该假设 MinGW 应用程序不能依赖 C99 行为，只能依赖 C89。例如，不支持 printf 中较新的格式字符，如 %a 和 %ll，尽管存在[%ll 的解决方法](http://www.mingw.org/wiki/FAQ)。

（它提到的解决方法是使用`I64`而不是`ll`: so, `%I64X`。令人讨厌的是，至少在我的系统上，当 GCC 在文本格式字符串中看到它时会发出警告，因为它假设它会有更好的运行 -时间图书馆。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-28T15:28:55.027

Windows C 库使用“%I64d”而不是“%lld”来打印“long long”类型的参数。

参考： http: [//gcc.gnu.org/ml/gcc-patches/2004-11/msg01966.html](http://gcc.gnu.org/ml/gcc-patches/2004-11/msg01966.html)

# asp.net-mvc - 将动态 JSON 对象传递给 Web API - Newtonsoft 示例

> ID：14071715
> 
> 赞同：11
> 
> 时间：2012-12-28T15:22:28.613
> 
> 标签：asp.net-mvc, json, asp.net-mvc-4, asp.net-web-api

我需要将动态 JSON 对象传递给我的 Web API 控制器，以便我可以根据它的类型对其进行处理。我曾尝试使用[**此处可以看到的 JSON.NET 示例，**](http://www.west-wind.com/weblog/posts/2012/Aug/30/Using-JSONNET-for-dynamic-JSON-parsing)但是当我使用 Fiddler 时，我可以看到传入的 JObect 始终为空。

这是粘贴到 Fiddler 中的示例的一个尝试：

```
POST http://localhost:9185/api/Auto/PostSavePage/  HTTP/1.1
User-Agent: Fiddler
Content-type: application/json
Host: localhost
Content-Length: 88

{AlbumName: "Dirty Deeds",Songs:[ { SongName: "Problem Child"},{ SongName:  
"Squealer"}]} 
```

Ans 这是我非常简单的 Web API 控制器方法：

```
 [HttpPost]
 public JObject PostSavePage(JObject jObject)
 {        
     dynamic testObject = jObject;         
     // other stuff here
 } 
```

我是新手，我对此领域有几个问题：

在这个特定的例子中我做错了什么吗？

可以说，更重要的是，是否有更好的方法来传递动态 JSON 对象（来自 JavaScript AJAX 帖子）？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-28T17:37:15.240

根据 Perception 的评论，您的 JSON 看起来无效。通过[JSONLint](http://jsonlint.com/)运行它，你会得到：

```
Parse error on line 1:
{    AlbumName: "Dirty De
-----^
Expecting 'STRING', '}' 
```

将其更改为在字段名称周围有 "：

```
{
    "AlbumName": "Dirty Deeds",
    "Songs": [
        {
            "SongName": "Problem Child"
        },
        {
            "SongName": "Squealer"
        }
    ]
} 
```

您是否也尝试过将您的 JObject 换成 JToken 或 Dynamic 对象（例如[此处](http://www.hanselman.com/blog/TinyHappyFeatures2ASPNETWebAPIInVisualStudio2012.aspx)）？

```
[HttpPost]
 public JObject PostSavePage(JToken testObject)
 {                
     // other stuff here
 } 
```

或者

```
 [HttpPost]
 public JObject PostSavePage(dynamic testObject)
 {                
     // other stuff here
 } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-02T16:18:02.963

感谢所有在这里提供帮助的人。不幸的是，我从来没有弄清问题所在。

我将项目一块一块地移植到一个新项目中，它工作正常。

对于信息，我有一个 RouteConfig 类，目前非常简单：

```
public class RouteConfig
{       
    private static string ControllerAction = "ApiControllerAction";

    public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapHttpRoute(
            name: ControllerAction,
            routeTemplate: "api/{controller}/{action}/{id}",
            defaults: new { id = RouteParameter.Optional }
        );
    }
} 
```

我对 API 的调用现在使用 JSON.Stringify：

```
$.ajax("http://localhost:54997/api/values/PostSavePage/", {
    data:  JSON.stringify(jObject),                               
    contentType: 'application/json',
    type: 'POST'
}); 
```

原始 API 操作有效。

请注意，我目前只是在玩这个，所以代码不是最好的，但我认为它在基本形式中可能很有用，以防其他人有类似的问题。

# javascript - 如果未设置 cookie，如何为某些浏览器显示消息

> ID：14071717
> 
> 赞同：1
> 
> 时间：2012-12-28T15:22:32.593
> 
> 标签：javascript

嗨，我遇到了浏览器检测和 cookie 的问题。我希望通过“不再显示”复选框向访问我网站的 iPhone 或 Android 用户显示消息。我不能使用 PHP 或 Jquery，所以我必须坚持使用 strait javascript。我需要以下事件发生：

如果 Android
并且
如果 Cookie 尚未设置，则显示消息
，否则不执行任何操作

我是编码新手，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T16:28:13.243

您可以使用 cookie，但网络存储更易于使用。较旧的浏览器（IE7 和opera mini）可能不支持网络存储，但[iOS safari 和Android 浏览器都](http://caniuse.com/#feat=namevalue-storage)支持。

关于浏览器检测（您应该使用特征检测），该`navigator`对象存储了几个有用的属性，即`userAgent`和`platform`。`appName`也可用，但似乎没有用（Chrome 23 报告“Netscape”）。

从用户代理中推断出很多东西是一件棘手的事情，但是

*   Android 默认浏览器`Android`在其用户代理中报告“”（[参考](http://www.useragentstring.com/pages/Android%20Webkit%20Browser/)）
*   对于 iOS，在用户代理中检测“ `iPad`”和“ ”似乎就足够了（[参考](http://www.useragentstring.com/pages/Safari/)）`iPhone`

尝试：

```
if(window.localStorage
  && !localStorage.getItem("dialogShown")
  && /Android|iPad|iPhone/.test(navigator.userAgent)
){
  // show the dialog (unhide an element)
} 
```

当对话框被关闭时：

```
var checkbox /* = document.getElementById(...) */;

if(checkbox.checked){
  localStorage.setItem("dialogShown",true);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T16:32:51.867

所以你有两件事要完成：

**1st - 浏览器检测**

通过 javascript 进行浏览器检测是一件棘手的事情，我建议您看看[这篇文章](http://www.nczonline.net/blog/2010/01/12/history-of-the-user-agent-string/)以了解它。

您必须捕获 Android 和 iPhone 浏览器，并且它们的用户代理中都有“mobile”字符串（就像所有体面的移动浏览器一样），因此您可以使用以下功能来做到这一点：

```
function isMobile() {
    return (/mobile/i).test(window.navigator.userAgent);
} 
```

在移动浏览器中，此函数将返回 true。

看看[这个问题](https://stackoverflow.com/questions/1005153/auto-detect-mobile-browser-via-user-agent)的替代方法。

**第二 - Cookie 访问**

cookie“API”是一个更糟糕的接口。要处理它，您必须将 key=value 数据写入 document.cookie（阅读[MDN 的文档](https://developer.mozilla.org/en-US/docs/DOM/document.cookie)）。

因此，如果您想在 cookie 上存储用户偏好，您可以执行以下操作：

```
document.cookie = "skip_message=1" 
```

正如我所说，cookie API 接口有时可能非常棘手，因此您应该使用 3rd 方库来读取写入 cookie。MDN 文档中的小框架是一个很好的框架。

您的目标浏览器具有更高级的功能，因此如果您不需要支持旧版浏览器，我建议您使用 localStorage

# c# - 查询数据库然后从返回的项目中删除条目的最有效方法

> ID：14071718
> 
> 赞同：1
> 
> 时间：2012-12-28T15:22:39.207
> 
> 标签：c#, database, entity-framework

我有一个应用程序，可让您关注人们的博客更新。我有一个页面，用户可以在其中选择要关注的人。可以关注的人存储在数据库中（表名 - 人员），当用户选择要关注的人时，也存储在数据库中（表名 - 关注）。

我遇到的问题是当用户重新访问页面以关注另一个人时，查询数据库并仅显示用户未关注的人的最佳方式是什么。

我正在使用实体框架。

我有以下工作。我需要一个 where 语句。`followBloggers`正在返回用户关注的博主列表，并且`Uow.People.GetPeople()`正在返回所有博主。

```
var followedBloggers = Uow.FollowBlogger.GetLinks(companyId).ToList();
return Uow.People.GetPeople().Select(p => new { p }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T15:26:20.260

你可以使用这样的东西：

```
var AlreadyFollowed = currentUser.followBloggers.Select( f => f.Id);
Uow.People.GetPeople().Where( p => !AlreadyFollowed.Contains(p.Id)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T16:19:54.043

试试这个（假设 Follow 对 PersonID 上的 People 有一个 FK）：

```
var followedIDs = user.followBloggers.Select(follow => follow.PersonID);
return Uow.People.GetPeople().Where(p => !followedIDs.Contains(p.PersonID)); 
```

# android - 两两网格中的片段布局

> ID：14071720
> 
> 赞同：0
> 
> 时间：2012-12-28T15:22:54.393
> 
> 标签：android, android-layout, dynamic, fragment

我正在尝试取四个片段，并在屏幕的左上角、右上角、左下角和右下角等比例放置它们。诚然，我迷路了。这是我对程序化布局的尝试：

```
// instantiated fragments this way for viewpager in phone version:
    fragments = new Vector<Fragment>();
    fragments.add(Fragment.instantiate(this, LevelsFragment.class.getName()));
    fragments.add(Fragment.instantiate(this, KBFragment.class.getName()));
    fragments.add(Fragment.instantiate(this, WaveFragment.class.getName()));
    fragments.add(Fragment.instantiate(this, EnvFragment.class.getName()));

    FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
    ft.add(R.id.linear_layout, fragments.get(2));
    ft.add(R.id.linear_layout, fragments.get(3));
    ft.add(R.id.linear_layout, fragments.get(1));
    ft.add(R.id.linear_layout, fragments.get(0));     
    ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);
    ft.commit();
    getSupportFragmentManager().executePendingTransactions(); 
```

和基本的xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/linear_layout"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">

</LinearLayout> 
```

这只是用第一个片段填充屏幕。我更喜欢编程解决方案，以便以后可以替换片段。

编辑：我应该提一下，我想要一些足够灵活的东西，将来可以在顶部放置 2 个片段，在底部放置 1 个片段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T17:16:10.073

参考我之前的评论，这里介绍了如何使用相对布局和在中心设置的不可见锚视图来避免嵌套布局权重。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <View
        android:id="@+id/anchor"
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:layout_centerInParent="true" />

    <FrameLayout
        android:id="@+id/top_left"
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:layout_above="@+id/anchor"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_toLeftOf="@+id/anchor" />

    <FrameLayout
        android:id="@+id/top_right"
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:layout_above="@+id/anchor"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:layout_toRightOf="@+id/anchor" />

    <FrameLayout
        android:id="@+id/bottom_left"
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/anchor"
        android:layout_toLeftOf="@+id/anchor" />

    <FrameLayout
        android:id="@+id/bottom_right"
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/anchor"
        android:layout_toRightOf="@+id/anchor" />

</RelativeLayout> 
```

像以前一样添加片段：

```
ft.add(R.id.top_left, fragments.get(2));
ft.add(R.id.top_right, fragments.get(3));
ft.add(R.id.bottom_left, fragments.get(1));
ft.add(R.id.bottom_right, fragments.get(0)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T16:00:39.373

经过更多尝试，这有效：

```
 ft.add(R.id.top_left, fragments.get(2));
    ft.add(R.id.top_right, fragments.get(3));
    ft.add(R.id.bottom_left, fragments.get(1));
    ft.add(R.id.bottom_right, fragments.get(0)); 
```

使用此 xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/linear_layout"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:orientation="vertical">
<LinearLayout
    android:baselineAligned="false"
    android:layout_weight="1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="horizontal">
    <RelativeLayout
        android:layout_weight="1"
        android:id="@+id/top_left"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal">

    </RelativeLayout>
    <RelativeLayout
        android:layout_weight="1"
        android:id="@+id/top_right"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal">

    </RelativeLayout>
</LinearLayout>
<LinearLayout
    android:baselineAligned="false"
    android:layout_weight="1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="horizontal">
    <RelativeLayout
        android:layout_weight="1"      
        android:id="@+id/bottom_left"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal">

    </RelativeLayout>
    <RelativeLayout
        android:layout_weight="1"
        android:id="@+id/bottom_right"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal">

    </RelativeLayout>
</LinearLayout>
</LinearLayout> 
```

我仍然愿意接受更好的答案，因为 nester layout_weight 让 eclipse 生气。

# css - 菜单背景没有完全改变

> ID：14071728
> 
> 赞同：0
> 
> 时间：2012-12-28T15:23:45.323
> 
> 标签：css

我正在开发一个菜单栏。我完成了，但离开了悬停动作。我正在寻找要更改的菜单的整个背景，但菜单背景仅在文本后面更改。

[这](http://jsfiddle.net/NmFHW/)是小提琴。

```
<div class="nav">
    <ul>
        <li ><a href="#">Zardari</a></li>
        <li><a href="#">Kutta</a></li>
    </ul>
</div>​ 
```

这是CSS，

```
.nav{background:#454545;line-height:1;overflow:hidden;position:relative; padding-top:10px;padding-bottom:10px;   padding-left:10px;}

.nav a{
    color:#fff;text-decoration:none;
    font-style:italic;
    margin-right:10px;
}

    .nav i{position:relative;top:-3px}
    .nav li{float:left;overflow:hidden}
    .nav ul{list-style:none;margin:0;overflow:hidden;padding:0;width:100%}
    .nav .active{background:#454545}
    .nav ul a:hover{
            color:#FFF;
            background:#000;            

    }
​ 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T15:37:59.907

将您的标签`padding:10px`放在`a`标签上，而不是`.nav`. 这样，您将让整个链接区域从上到下更改颜色。（你也必须添加`display: block;`到你`a`的。

```
.nav a{
  color:#fff;
  text-decoration:none;
  font-style:italic;
  margin-right:10px;
  padding:10px;
  display: block;
} 
```

[小提琴](http://jsfiddle.net/scrimothy/4wWe5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T15:51:56.863

我想我通过使用 Jquery 实现了你想要的。我编辑了 css 以消除您在 Jquery 中实现的更改背景的尝试。

```
CSS:

.nav{background:#454545;line-height:1;overflow:hidden;position:relative; padding-top:10px;padding-bottom:10px;   padding-left:10px;}

.nav a{
    color:#fff;text-decoration:none;
    font-style:italic;
    margin-right:10px;
}

    .nav i{position:relative;top:-3px}
    .nav li{float:left;overflow:hidden}
    .nav ul{list-style:none;margin:0;overflow:hidden;padding:0;width:100%}
    .nav .item{display:block;font-family:Oswald,Arial Narrow,Arial,Helvetica,sans-serif;font-size:15.6px;line-height:1;padding:5px 8px;text-transform:uppercase}​ 
```

然后在`head`你的 html 文件中包含 Jquery 库。您可以下载它并将其托管在您的服务器上或使用 Google 的 CDN 作为库，如下所示：

```
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
</head> 
```

现在在您的 HTML 中`body`添加我为您编写的 jquery 函数：

```
$("li").mouseover(function () {
    $(".nav").css("background-color","#000");
});

$("li").mouseout(function () {
    $(".nav").css("background-color","#454545");
}); 
```

当鼠标悬停在`li`（每个按钮）上时，导航栏的背景会发生变化。如果这是你想要的，没关系，否则如果你想要不同的东西，请告诉我，我会改变它。

在这里你可以找到关于[jsfiddle的 DEMO](http://jsfiddle.net/XNhdg/7/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T15:28:53.327

那这个呢？

```
.nav{background:#454545;line-height:1;overflow:hidden;position:relative; padding-top:10px;padding-bottom:10px;   padding-left:10px;}

.nav a{
color:#fff;text-decoration:none;
font-style:italic;
margin-right:10px;
} 

.nav i{position:relative;top:-3px}
.nav li{float:left;overflow:hidden}
.nav ul{list-style:none;margin:0;overflow:hidden;padding:0;width:100%}
.nav .item{display:block;font-family:Oswald,Arial Narrow,Arial,Helvetica,sans-serif;font-size:15.6px;line-height:1;padding:5px 8px;text-transform:uppercase}
.nav .item:hover{background:#454545;color:#FFF}
.nav .active{background:#454545}
.nav:hover{
        color:#FFF;
        background:#000;            

} 
```

​</p>

# c++ - QTreeWidgetItem editingFinished() 信号？

> ID：14071734
> 
> 赞同：1
> 
> 时间：2012-12-28T15:24:16.623
> 
> 标签：c++, qt, qt4, qtreewidget, qtreewidgetitem

我有一个`QTreeWidget`里面有一些物品。但是，由于我的数据结构，当有人完成编辑它时，我需要让`QTreeWidget`（或）告诉我。`QTreeWidgetItem`

我已经有了两者的子类`QTreeWidget`and `QTreeWidgetItem`，如果这样更容易解决的话。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T19:18:59.910

QTreeWidget 发出信号`QTreeWidget::itemChanged ( QTreeWidgetItem * item, int column )`。这应该可以完成这项工作。

问题是，当您从代码中填充或更改树时，它也会被调用。因此使用`QObject::blockSignals(bool)`来解决这个问题。

苏龙仔

# c++ - C++ 阿拉比卡（通过 Xerces-c）getNodeValue() 方法不返回实际值

> ID：14071736
> 
> 赞同：1
> 
> 时间：2012-12-28T15:24:37.910
> 
> 标签：c++, xml-parsing, xerces-c

我使用阿拉比卡包装 Xerces-c 来解析 XML。下面的示例代码在使用 .getNodeName() 方法时返回正确的名称，但在使用 .getNodeValue() 方法时返回正确的值：

```
bool readXML(bfs::path xmlfullfile) 
{
  // first check to see if the file exists
  if (!bfs::is_regular_file(xmlfullfile)) return false;

  Arabica::SAX2DOM::Parser<std::string> domParser;
  Arabica::SAX::CatchErrorHandler<std::string> eh;
  Arabica::DOM::Document<std::string> xmlDoc; 
  Arabica::SAX::InputSource<std::string> is;

  domParser.setErrorHandler(eh);
  is.setSystemId(xmlfullfile.string());
  domParser.parse(is);

  if(!eh.errorsReported()) 
  {
    xmlDoc = domParser.getDocument();
    xmlDoc.normalize();

    Arabica::DOM::NodeList<string_type> objects = xmlDoc.getElementsByTagName("object");
    for (size_t t = 0; t < objects.getLength(); t++) 
    {
      Arabica::DOM::Node<std::string> object = objects.item(t);
      Arabica::DOM::NodeList<std::string> values = object.getChildNodes(); 
      for (size_t u = 0; u < values.getLength(); u++) 
      {
        values.item(u).normalize(); 
        string name = values.item(u).getNodeName(); 
        string val = values.item(u).getNodeValue(); 
        cout << "Node streaming = \"" << values.item(u) << "\", meaning that name = \"" << name << "\" and value = \"" << val << "\"" << endl; 
      }
    }
    return true;
  } else {
    std::cerr << eh.errors() << std::endl;
    eh.reset();
    return false;
  }
} 
```

我试图解析的示例 XML 是：

```
<annotation>
    <filename>1a.jpg</filename>
    <folder>Sample</folder>
    <source>
        <database>Some database</database>
        <annotation>Annotator</annotation>
        <image>Some source</image>
    </source>
    <size>
        <width>3264</width>
        <height>1840</height>
        <depth>0</depth>
    </size>
    <segmented>0</segmented>
    <object>
        <name>somename</name>
        <pose>Unspecified</pose>
        <truncated>0</truncated>
        <difficult>0</difficult>
        <occluded>0</occluded>
        <bndbox>
            <xmin>48</xmin>
            <ymin>671</ymin>
            <xmax>3213</xmax>
            <ymax>1616</ymax>
        </bndbox>
    </object>
</annotation> 
```

输出类似于：

```
Node streaming = "
                ", meaning that name = "#text" and value = "
                "
Node streaming = "<name>somename</name>", meaning that name = "name" and value = ""
Node streaming = "
                ", meaning that name = "#text" and value = "
                "
Node streaming = "<pose>Unspecified</pose>", meaning that name = "pose" and valu
e = ""
Node streaming = "
                ", meaning that name = "#text" and value = "
                "
Node streaming = "<truncated>0</truncated>", meaning that name = "truncated" and
 value = ""
Node streaming = "
                ", meaning that name = "#text" and value = "
                "
Node streaming = "<difficult>0</difficult>", meaning that name = "difficult" and
 value = ""
Node streaming = "
                ", meaning that name = "#text" and value = "
                "
Node streaming = "<occluded>0</occluded>", meaning that name = "occluded" and va
lue = ""
Node streaming = "
                ", meaning that name = "#text" and value = "
                "
Node streaming = "<bndbox>
                        <xmin>48</xmin>
                        <ymin>671</ymin>
                        <xmax>3213</xmax>
                        <ymax>1616</ymax>
                </bndbox>", meaning that name = "bndbox" and value = ""
Node streaming = "
        ", meaning that name = "#text" and value = "
        " 
```

不太确定我做错了什么。由于 getNodeName() 返回正确的名称（当它当然不是 #text 时），所以 getNodeValue() 不返回任何内容的事实让我感到奇怪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T10:13:07.350

您也在计算仅空白文本节点。在该位置添加一个不允许文本节点的 DTD 可能会有所帮助。非验证解析器必须报告所有空白节点，并且不允许对可忽略和不可忽略的内容做出假设。

底线，如果你想摆脱空白文本节点，你必须自己在你的 DOM 程序中编程

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T21:03:29.210

在将我的代码与其他一些 XML 库进行比较后，我找到了解决方案。显然，节点的值不是一个简单的文本字段，必须获得该简单叶节点的第一个子节点才能访问文本值。不知道我这样做的方式是否是最好的方式，但这里是代码以防其他人遇到同样的问题：

```
for (size_t u = 0; u < values.getLength(); u++) 
{
  string name = values.item(u).getNodeName();
  if (name == "#text") continue;
  string val = values.item(u).getFirstChild().getNodeValue(); 
  cout << "Node streaming = \"" << values.item(u) << "\", meaning that name = \"" << name << "\" and value = \"" << val << "\"" << endl; 
} 
```

注意：生产代码应该考虑到并非所有节点都是简单叶节点的事实。所以我的代码只是解决方案的一半。

# java - 从 Java 列表生成 p:tabs

> ID：14071741
> 
> 赞同：3
> 
> 时间：2012-12-28T15:24:43.607
> 
> 标签：java, jsf, jsf-2, primefaces

我想从 Java 列表创建 Primefaces 选项卡。我测试了这段代码：

```
<p:tabView value="#{DatacenterProfileController.data}" var="listItem">
    <p:tab title="#{listItem.name}">
        <ui:insert>
            <ui:include src="#{listItem.page}" />
        </ui:insert>
    </p:tab>
</p:tabView> 
```

* * *

```
private List<PagesObj> dataList = new ArrayList<>();

    public class PagesObj {

        private String name;
        private String page;

        public PagesObj(String name, String page) {
            this.name = name;
            this.page = page;
        }

        public String getName() {
            return name;
        }

        public void setName(String name) {
            this.name = name;
        }

        public String getPage() {
            return page;
        }

        public void setPage(String page) {
            this.page = page;
        }
    }

    @PostConstruct
    public void datagenerate(){
        dataList.add(new PagesObj("General", "DCProfileTabGeneral.xhtml"));
        dataList.add(new PagesObj("Zones", "DCProfileTabZones.xhtml"));
        dataList.add(new PagesObj("Generators", "DCProfileTabGenerators.xhtml"));
        dataList.add(new PagesObj("HVAC", "DCProfileTabHVACs.xhtml"));
    }

    public List<PagesObj> getdata() {

        return dataList;
    } 
```

但由于某种原因，选项卡的正文未正确加载 - 我得到空的正文选项卡可能是因为找不到文件。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T10:34:40.110

我发现这是一个问题，使用包含 tabView[问题 4051](http://code.google.com/p/primefaces/issues/detail?id=4051)

所以这是工作示例：

```
<p:tabView  id="tabW">
    <c:forEach items="#{DatacenterProfileController.data}" var="listItem"> 
        <p:tab title="#{listItem.name}">
            <h:panelGrid columns="2" cellpadding="10">
                <ui:include src="#{listItem.page}.xhtml"  />
            </h:panelGrid>
        </p:tab>
    </c:forEach>
</p:tabView> 
```

取自此[primefaces 论坛](http://forum.primefaces.org/viewtopic.php?f=3&t=21807)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T15:44:10.610

现在无法测试它，但我认为不需要**ui:insert 。**因此你的代码应该是

```
<p:tabView value="#{DatacenterProfileController.data}" var="listItem">
    <p:tab title="#{listItem.name}">
         <ui:include src="#{listItem.page}" />
    </p:tab>
</p:tabView> 
```

还要确保此页面与包含的页面位于同一目录中

# javascript - 如何在网页中使用 jQuery 选择第二个 div？

> ID：14071742
> 
> 赞同：17
> 
> 时间：2012-12-28T15:24:50.803
> 
> 标签：javascript, jquery

如果一个网页有 2 个 div 标签，例如

```
<div>hello</div>
<div>hello</div> 
```

我如何选择第二个 div，是否可以使用 jQuery？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-28T15:27:19.310

下面将使用[`eq`](http://api.jquery.com/eq)方法获取第二个div：

```
$("div:eq(1)"); 
```

**[例子](http://jsfiddle.net/GM2s8/)**

请注意@Cerbrus 的回答也是正确的，你可以在没有 jQuery 的情况下做到这一点。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-28T15:25:42.770

你不需要 jQuery：

```
var secondDiv = document.getElementsByTagName('div')[1]; 
```

`getElementsByTagName('div')`获取页面上所有 s 的数组`div`，然后使用 . 从该（零索引）数组中获取第二个元素`[1]`。

如果需要 jQuery 功能，还可以应用 jQuery 包装器：

```
var $secondDiv = $(document.getElementsByTagName('div')[1]); //($ in the var name is merely used to indicate the var contains a jQuery object) 
```

**[例子](http://jsfiddle.net/HS3vp/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T16:11:50.217

您也可以使用`nth-child`选择器。

[http://api.jquery.com/nth-child-selector/](http://api.jquery.com/nth-child-selector/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-04T16:14:56.567

奇怪的`:nth-child`是，这对我不起作用。我最终使用

`$(someElement).find("select").eq(0)`

# php - PHP在模板方式上的区别

> ID：14071749
> 
> 赞同：1
> 
> 时间：2012-12-28T15:25:06.473
> 
> 标签：php, html, templates

我正在尝试使我的网站与不同的模板不同，以便更容易控制。现在我使用简单`include 'tpl/something.inc'`但我听说过类似 PHP 上的模板引擎（使用 ob_start()），那么它们之间有什么区别？按照我的方式做安全吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T15:31:40.660

尽管您提供的信息很少，但我不会将这种模板系统归类为不安全的。您可以使用该模型创建非常安全的模板系统。但是，如果您使用预制模板系统而不是您自己制作的模板系统，您可以获得更多功能、安全性和可靠性。我强烈推荐使用免费和开源的[TWIG 。](http://twig.sensiolabs.org/)它具有庞大的功能集并且具有高度的可扩展性，无论是使用社区插件还是通过自己创建功能。

# php - PHP 在回显中回显 PHP 代码

> ID：14071750
> 
> 赞同：2
> 
> 时间：2012-12-28T15:25:06.673
> 
> 标签：php, security, echo

我在这里很新。我正在尝试制作一个允许用户发布自己的日记的博客/日记网站。我仍然很不愿意做，因为我真的很害怕恶意代码注入。

所以这里有一个示例代码：

```
 <?php
 $test = "<b>blah</b>"; //User input from SQL
 echo "$test";
 ?> 
```

会出现的只是粗体字“blah”吗？我试图实现的是回显“ `<b>blah</b>`”。我不希望人们放置一些实际上会弄乱我的整个网页的 PHP 代码。请记住，该变量`$test`实际上是一个 MYSQL 查询，因此需要该变量作为示例。我知道你可以做到`echo '$test';`，但结果却是`"$test"`相反。我想把我的头发拉出来我还想不通。

我知道的第二个解决方案是`htmlspecialchars();`函数，但我希望字符串显示为我输入的内容，而不是转换后的字符串......

有什么办法可以做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T15:40:32.103

Echo 不会从字符串执行 PHP 代码。这是不可能的，这不是代码中的安全漏洞。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T15:28:43.710

我认为 OP 希望将 HTML 本身输出到页面，而不是剥离标签。为此，您可以先运行字符串`htmlentities()`

```
$test = '<b>blah</b>';
echo htmlentities($test); 
```

这将输出：

```
&lt;b&gt;blah&lt;/b&gt; 
```

这将在页面中呈现为

```
<b>blah</b> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T15:41:14.933

例如，您可以使用[Twig](http://twig.sensiolabs.org/)之类的模板引擎。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-28T15:35:02.730

如果`htmlspecialchars();`不是您要寻找的，请尝试该`header()`选项。

```
header('Content-type: text/plain'); 
```

当您要给`<b>Hi</b>`浏览器时，它将**以**粗体显示，而不是返回文本。但是您可以尝试这种方式，将其输出到`<textarea></textarea>`.

* * *

或者另一种方法是使用[`htmlentities()`](http://php.net/manual/en/function.htmlentities.php)：

```
<?php
$test = "<b>blah</b>"; //User input from SQL
echo htmlentities("$test");
?> 
```

# java - 在 Java 中有没有办法通过指定 x 和 y 位置来获取 AWT 组件对象？

> ID：14071752
> 
> 赞同：1
> 
> 时间：2012-12-28T15:25:12.927
> 
> 标签：java, awt

在 Java 中，我有一个 AWT 框架并在框架内添加了四个 AWT 组件，这些 AWT 组件使用 AbsoluteLayout 定位。

现在我需要知道如果我通过 x 和 y 位置，有什么方法可以让我获得 AWT 组件实例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T15:33:56.310

您始终可以使用查询父组件`getComponentAt()`

```
公共组件 getComponentAt(int x, int y)

确定此组件或其直接子组件之一是否包含
(x, y) 位置，如果是，则返回包含组件。这种方法
只看一层深。如果点 (x, y) 在一个子组件内
它本身有子组件，它不会向下查找子组件树。

如果 (x, y) 坐标位置在其边界框内，则 Component 的 locate 方法简单地返回组件本身，否则返回 null。

    参数：
        x - x 坐标
        y - y 坐标
    回报：
        包含 (x, y) 位置的组件或子组件；如果位置在此组件之外，则为 null
    自从：
        JDK1.0
    也可以看看：
        包含（int，int）

```

Java 7： [http ://docs.oracle.com/javase/7/docs/api/java/awt/Component.html#getComponentAt%28int,%20int%29](http://docs.oracle.com/javase/7/docs/api/java/awt/Component.html#getComponentAt%28int,%20int%29)

Java 6： [http ://docs.oracle.com/javase/6/docs/api/java/awt/Component.html#getComponentAt%28int,%20int%29](http://docs.oracle.com/javase/6/docs/api/java/awt/Component.html#getComponentAt%28int,%20int%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T15:34:01.433

是的，请参阅[参考资料](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Container.html#getComponentAt%28int,%20int%29)：

```
Container.getComponentAt() 
```

# java - 没有名为 authenticationManager 的 bean

> ID：14071759
> 
> 赞同：11
> 
> 时间：2012-12-28T15:26:00.103
> 
> 标签：java, spring, spring-security

> **可能重复：**
> [出现错误 org.springframework.beans.factory.NoSuchBeanDefinitionException：未定义名为“springSecurityFilterChain”的 bean](https://stackoverflow.com/questions/5090890/getting-error-org-springframework-beans-factory-nosuchbeandefinitionexception-n)

在我的 Spring Application 中，我不断收到此错误：

```
No bean named 'org.springframework.security.authenticationManager' is defined: Did you forget to add a gobal <authentication-manager> element to your configuration (with child <authentication-provider> elements)? Alternatively you can use the authentication-manager-ref attribute on your <http> and <global-method-security> elements. 
```

在我的 Spring Security 上下文 xml 文件中，我定义了以下内容：

```
<beans:bean id="myUserDetailsService" class="com.myProject.core.security.MyUserDetailsService" />

<beans:bean id="encoder" class="com.myProject.core.security.HmacPasswordEncoder" />

<authentication-manager id="clientAuthenticationManager" >
    <authentication-provider user-service-ref="myUserDetailsService">
        <password-encoder ref="encoder" />
    </authentication-provider>
</authentication-manager> 
```

当我明确定义了我的身份验证管理器和身份验证提供者时，任何想法为什么会抱怨？

注意：这可能会有所帮助，它是一个更具描述性的错误：

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with 
name 'org.springframework.security.filterChains': Cannot resolve reference to bean
'org.springframework.security.web.DefaultSecurityFilterChain#2' while setting bean
property 'sourceList' with key [2]; nested exception is org.springframework.beans.factory.BeanCreationException:
Error creating bean with name 'org.springframework.security.web.DefaultSecurityFilterChain#2':
Cannot resolve reference to bean 'org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter#0'
while setting constructor argument with key [1]; nested exception is
org.springframework.beans.factory.BeanCreationException: Error creating bean with
name 'org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter#0':
Cannot resolve reference to bean 'org.springframework.security.authentication.ProviderManager#0'
while setting bean property 'authenticationManager'; nested exception is
org.springframework.beans.factory.BeanCreationException: Error creating bean with
name 'org.springframework.security.authentication.ProviderManager#0': Cannot resolve
reference to bean 'org.springframework.security.config.authentication.AuthenticationManagerFactoryBean#0'
while setting constructor argument; nested exception is org.springframework.beans.factory.BeanCreationException:
Error creating bean with name 'org.springframework.security.config.authentication.AuthenticationManagerFactoryBean#0':
FactoryBean threw exception on object creation; nested exception is
org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named
'org.springframework.security.authenticationManager' is defined: Did you forget to
add a gobal <authentication-manager> element to your configuration (with child
<authentication-provider> elements)? Alternatively you can use the authentication-manager-ref
attribute on your <http> and <global-method-security> elements. 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-28T15:32:10.940

authenticationManager 按名称查找，因此只需将其更改为以下内容：

```
<authentication-manager alias="authenticationManager">
    <authentication-provider user-service-ref="myUserDetailsService">
        <password-encoder ref="encoder" />
    </authentication-provider>
</authentication-manager> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T16:11:14.537

您需要更改 Spring Security Context 文件以查找 clientAuthenticationManager。您可以将此行添加到您的 http 设置

```
<http use-expressions="true" authentication-manager-ref="clientAuthenticationManger"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T15:31:19.613

看看这个链接：

*   [获取错误 org.springframework.beans.factory.NoSuchBeanDefinitionException：没有定义名为“springSecurityFilterChain”的 bean](https://stackoverflow.com/questions/5090890/getting-error-org-springframework-beans-factory-nosuchbeandefinitionexception-n)

> 请注意，过滤器实际上是一个 DelegatingFilterProxy，而不是实际实现过滤器逻辑的类。DelegatingFilterProxy 所做的是将过滤器的方法委托给从 Spring 应用程序上下文获取的 bean。
> 
> ...
> 
> 您需要定义一个名为 springSecurityFilterChain 的 bean，它在您的应用程序上下文中实现 javax.servlet.Filter。

# - QTreeWidgetItem

> ID：14071762
> 
> 赞同：0
> 
> 时间：2012-12-28T15:26:16.800
> 
> 标签：

QTreeWidgetItem 类是 Qt 框架的一部分，它提供了一个与 QTreeWidget 类一起使用的项目。

# jquery - 在 IE 8 中单击两次后打开 Kendo UI 窗口

> ID：14071769
> 
> 赞同：0
> 
> 时间：2012-12-28T15:26:29.707
> 
> 标签：jquery, kendo-ui

我有一个要打开的 kendoUI 窗口，该代码在 Firefox 中运行良好，但是为了在 IE8 中打开它，我需要单击该按钮两次。我一生都无法弄清楚为什么会这样。

这是按钮的代码（HTML）：

```
<div id="CCA_UserAdministration_NewUserRequest">
    Content of the Window
</div>
<div id="CCA_UserAdministration_UserRequestBtn" onclick="javascript:CCA.UserAdministration.OpenUserRequestWindow();" class="k-button">New User Request</div> 
```

（JS）：

```
CCA.UserAdministration.OpenUserRequestWindow = function () {

        CCA.UserAdministration.UserRequestWin = $("#CCA_UserAdministration_NewUserRequest").kendoWindow({
            height: "200px",
            title: "New User Request Form",
            visible: false,

            width: "500px"
        }).data("kendoWindow");
        $('#CCA_UserAdministration_NewUserRequest').show();
     CCA.UserAdministration.UserRequestWin.center().open();     
}; 
```

我在 JS 文件中定义了一个命名空间：

```
var CCA = CCA || {};
CCA.UserAdministration = CCA.UserAdministration || {}; 
```

**编辑**

我还应该提到，在最初的第一次单击时，该图像隐藏在 IE8 中。不知道为什么。

```
<img src="/_layouts/images/fgimg.png" alt="" style="left:-0px !important;top:-128px !important;position:absolute;"> 
```

此外，如果我打开 modal = true，当黑屏出现时，它将不允许我第二次单击。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T15:39:22.527

我会尝试替换 CCA_UserAdministration_UserRequestBtn DIV 并使其成为锚点：

```
<a id="CCA_UserAdministration_UserRequestBtn" href="javascript:CCA.UserAdministration.OpenUserRequestWindow();" class="k-button">New User Request</a> 
```

IE 可能在使用类似的语法时遇到困难： `onclick="javascript:CCA.UserAdministration.OpenUserRequestWindow();"`，通常您在处理程序中没有该`javascript:`部分`onclick`，因此您可能也只想制作它`onclick="CCA.UserAdministration.OpenUserRequestWindow()"`。但是，当使用该`href`属性时，您需要该`javascript:`部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T18:54:38.663

该问题与 jquery 版本 jQuery 1.8.+ 有关。您可以使用 jQuery 1.7.# 或使用 animation:false 禁用窗口动画来解决此问题。

```
CCA.UserAdministration.OpenUserRequestWindow = function () {

    CCA.UserAdministration.UserRequestWin = $("#CCA_UserAdministration_NewUserRequest").kendoWindow({
        height: "200px",
        title: "New User Request Form",
        visible: false,
        animation: false,
        width: "500px"
    }).data("kendoWindow");
    $('#CCA_UserAdministration_NewUserRequest').show();
 CCA.UserAdministration.UserRequestWin.center().open();   }; 
```

# objective-c - 在加载视图之前显示加载指示器

> ID：14071771
> 
> 赞同：0
> 
> 时间：2012-12-28T15:26:33.117
> 
> 标签：objective-c, ios, cocoa-touch, mbprogresshud

我有一个视图，这个视图需要一些时间来加载，所以在我点击*“显示视图”*按钮后，加载大约需要 2 秒。

这次我没有问题，但我想从按下按钮的那一刻起添加一条*“正在加载”消息，直到显示新视图。*

我正在使用`MBProgressHUD`，但我正在使用不同的线程来加载视图，所以这不是一个好主意。

* * *

## 到目前为止我的代码

```
[MBProgressHUD showHUDAddedTo:self.view animated:YES];
dispatch_async(dispatch_get_global_queue( DISPATCH_QUEUE_PRIORITY_LOW, 0), ^{
    [self presentModalViewController:testViewController animated:YES];

    dispatch_async(dispatch_get_main_queue(), ^{
        [MBProgressHUD hideHUDForView:self.view animated:YES];
    });
}); 
```

我只想显示*“加载”*，直到下一个视图实际加载。使用这种方法，我在下一个视图中有很多问题，因为没有`viewDidLoad`在主线程中执行方法。

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T15:44:59.063

您要做的是在主线程上加载另一个视图，一旦加载了视图，就会显示`MBProgressHUD`. 然后使用该`dispatch_async`方法在后台执行需要一段时间的操作。

# php - Zend 框架发送邮件

> ID：14071774
> 
> 赞同：0
> 
> 时间：2012-12-28T15:26:43.387
> 
> 标签：php, zend-framework, magento

是否可以将数组值作为 zend 邮件的正文发送。例如，

```
$mail=new Zend_Mail();
$params=$this->getRequest()->getParams();
$mail->setSubject('Order products');
$mail->addTo('recipient@gmail.com','Recipient');
$mail->setBodyText($params['products']); // $params['products'] array
$mail->setFrom('someone@gmail.com','Name'); 
```

但这似乎不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T15:59:01.247

这样你总是会有一个空的身体，你需要将你的数组转换成字符串

BodyText 是一个对象（Zend_Mime_Part），与其他信息一起，该对象包含一个内容字段，问题是：在将内容添加到 mime_part 对象之前，它会通过 rtrim()，因此您将获得一个空字符串作为内容。

rtrim() 期望参数 1 是字符串，....\library\Zend\Mime.php 在第 170 行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T10:10:34.663

```
$mail = new Zend_Mail('utf-8');
$mail->setBodyHtml($message)
->setFrom('abc@gty.com', 'abc')
->addTo($to, 'admin')
->setSubject($subj); 
```

这里`$message`包含从 检索到的所有表格内容`Post`。
给出的建议`@Pekka`很重要。
希望这对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T05:48:28.720

我用这种方式，它对我有用..

```
$mail = new Zend_Mail();
$mail->setFrom('someone@gmail.com');
$mail->setBodyHtml($oForm->getValue('text'));
$mail->addTo(array('xyz.aaa@web.com', 'eee@web.com'));
$mail->setSubject('support mail'); 
```

# ruby-on-rails - 无法使用 CarrierWave 和 MiniMagick 上传和处理图像

> ID：14071776
> 
> 赞同：0
> 
> 时间：2012-12-28T15:26:55.907
> 
> 标签：ruby-on-rails, imagemagick, carrierwave, minimagick

我正在尝试使用 CarrierWave 和 MiniMagick 实现图像上传。我可以使用carrierwave上传图片，但是当我实现MiniMagick来调整上传图片的大小时，它返回了这个错误：

```
Errno::ENOENT in ItemsController#create

No such file or directory - identify -ping /var/folders/6y/j8zfcgmd02x5s439c0np8fjh0000gn/T/mini_magick20121228-71203-bdoeul.jpg 
```

image_uploader.rb

```
class ImageUploader < CarrierWave::Uploader::Base

  include CarrierWave::MiniMagick

  storage :file

  def store_dir
    "uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}"
  end

  version :thumb do
    process :resize_to_fill => [100, 100]
  end

end 
```

我已经安装了 imagemagick。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T16:31:41.577

不知道出了什么问题，但是在我卸载 MacPort 及其所有端口、安装 Homebrew 并重新安装 ImageMagick 之后，一切都按预期工作。

# excel - 如何删除excel列中每个单元格的第一个字母？

> ID：14071778
> 
> 赞同：1
> 
> 时间：2012-12-28T15:27:10.230
> 
> 标签：excel, excel-formula

我在 excel 中有如下列，

```
'04-Feb-01
'04-Mar-01
'08-Apr-01
'06-May-01
'03-Jun-01
'08-Jul-01
'05-Aug-01 
```

我想删除`'`所有单元格中的字符我该怎么做？

我已经试过`=RIGHT(A1,LEN(A1)-1)` 这个了..不工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T19:38:48.330

使用 DATEVALUE 将文本转换为日期。然后根据自己的喜好应用日期格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T23:45:18.687

当您在单元格中输入数据时，Excel 会尝试将其转换为正确的类型（是文本、数字还是日期）。单引号是 Excel 的说法，将后面的内容视为文本。在输入电话号码等 Excel 可能认为是数字且不会显示前导零的内容时，它会派上用场。在您的示例中，单元格中的实际值是没有单引号的文本，您可以通过复制单元格然后粘贴到记事本来检查这一点，结果中不会有引号。

为什么要删除报价？如果是因为您希望单元格包含日期而不是文本，您可以使用 DATEVALUE 函数或仅使用复制和粘贴特殊值来转换它。

# c++ - 使用异常检查 C++ 流时出错

> ID：14071781
> 
> 赞同：1
> 
> 时间：2012-12-28T15:27:30.747
> 
> 标签：c++, exception, fstream

我有一个类 X，它有一个 writeBinary(ostream) 方法，如果流发生问题，它可以抛出一个自定义异常。

写入 fstream 和错误检查的正确方法是什么？

这是我的版本：我想知道我是否遗漏了什么或者我需要捕获错误。

```
 ofstream ofs("X.binary.tmp");
    if (!ofs) {
       cerr << "Could not open file for writing";
       throw runtime_error("Could not open file for writing");
    }
    try {
      x.writeBinary(ofs);
     } catch(CustomException& e) {
      // remove the temporary file
       int x = unlink("X.binary.tmp");
       if (x) {
        cerr << "Failed to remove file";
       }
       throw;
     }

    if (!ofs) { // is this check necessary?
     int x = unlink("X.binary.tmp"):
    if (x) {
        cerr << "Failed to remove file";
       }
       throw std::runtime_error("Stream error");
    }
   rename("X.binary.tmp", "X.binary"); 
```

可以简化这种大杂烩的异常吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T16:08:10.993

让事情变得不那么混乱的一种方法是创建一个资源处理对象 - 所以一个“临时文件”对象，它通过给构造函数的名称打开一个新文件，如果文件名不为空，则在析构函数中调用 unlink . 然后让它有一个重命名函数，例如重命名文件并将名称设置为空白。当然还有一个函数可以为您提供来自对象的 ofstream。

我敢肯定它的代码量一样多，但它看起来会更干净，它会让生活变得更轻松。

编写处理大量潜在错误的代码并不容易，正如您可能已经注意到的那样......

# sql - 强制 Oracle 数据库中的内部行号与 row_num 解析函数匹配

> ID：14071782
> 
> 赞同：2
> 
> 时间：2012-12-28T15:27:47.240
> 
> 标签：sql, oracle, oracle10g

是否存在强制 Oracle（在插入/更新/删除时）使用 row_num 分析函数来分配行号的方法，以后可以通过简单地调用 where rownumber = X 来检索？

示例代码来说明我的意思：

```
select foo,bar,baz  
    row_number() over (partition by bang order by some_date desc) rn  
from my_table 
```

上述查询将根据分区子句分配行号。

现在，当我查询并且我想要 where rownumber = XI 可以这样做时：

```
select foo,bar,baz  
from my_table  
where rownumber=1 
```

这样做的原因是为了避免查询开销并将其推回到在系统中发生频率要低得多的 DDL 语句中。所以我的问题又来了，这样的事情可能吗？

**评论**

> 每个新的插入/更新/删除都可能会更新表的每一行……这可能需要大量的日志记录（和锁定）。如果您的数据本质上是静态的，则在每次加载或更新时重新生成行号。

如果我们删除更新/删除的约束，我不相信这种推理仍然存在，尤其是在时间对象驱动它的情况下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T19:13:18.683

```
 SELECT ename, deptno, rownum, rno
  FROM (SELECT ename, deptno, row_number() OVER (Order By deptno) rno
           FROM scott.emp
        ORDER BY deptno)
 /
ENAME          DEPTNO     ROWNUM        RNO
---------- ---------- ---------- ----------
CLARK              10          1          1
KING               10          2          2
MILLER             10          3          3
JONES              20          4          4
FORD               20          5          5
ADAMS              20          6          6
.... 
```

您可以插入全部或部分值 - 从外部 Select 部分中删除不需要的值：

```
INSERT INTO emp_test2
(
SELECT ename, deptno, rownum row_num, rno
  FROM (SELECT ename, deptno, row_number() OVER (Order By deptno) rno
       FROM scott.emp
    ORDER BY deptno)
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T15:38:54.687

一种方法的一个问题是，您一次只能有一个进程修改表，或者partition-by 子句定义的表的一个子集。这是因为修改表的多个会话在提交之前无法看到其他人所做的更改。

但是，如果您可以通过锁定来应对此限制，那么就没有理由无法对其进行编码。值总是递增的仅插入会相对简单，但其他情况当然会更复杂，而且我能想到的都不会是自动的。不过，我会犹豫提供详细的建议或编码示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T20:03:41.810

您是否打算创建一个 PK_ID？如果是这样，请改用 SEQUENCE。它会为你完成这项工作。

[创建序列 - Oracle 文档](http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_6015.htm)

# graph - 如何使用 ML 学习图形

> ID：14071784
> 
> 赞同：1
> 
> 时间：2012-12-28T15:27:53.537
> 
> 标签：graph, machine-learning

我是机器学习的新手。我想用机器学习的方式来学习一张图。图有节点和连接。以编程方式，我可以计算有关所有节点及其输入输出连接的表格信息，例如：

```
out(A)=C, out(B) = C, in(C) = A, in(C) = B. 
```

上表是一个图表，其中两个节点 A、B 与一个节点 C 有连接。可以不时添加或删除节点，大多数情况下不能。谁能告诉我如何学习这样的图表？我可以使用哪种 ML 方法，请提供任何简单的教程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T18:15:57.870

听起来更“传统”的机器学习系统无法做到这一点——你想要的是统计关系学习。不幸的是，这是一个相对较新、复杂且不是特别成熟的领域。

不过看看[炼金术](http://ai.cs.washington.edu/projects/alchemy)。它带有相当广泛的文档，其中包括一些示例。这些示例应该可以帮助您入门。如果您还有其他问题，还有一个邮件列表。

# android - Android版本困境

> ID：14071787
> 
> 赞同：0
> 
> 时间：2012-12-28T15:27:58.787
> 
> 标签：android

在回调我的第一个活动时，它应该调用 onResume。它在 android 版本 2.2 中调用相同的方法。但是当我签入 android 4.1 时，它正在调用调用 splashscreen 的 onCreate 方法，因此看起来应用程序正在重新启动。怎么可能我确保每个版本的android都调用onResume？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T15:32:56.680

如果系统在未使用时删除了您的活动，它将收到`onCreate`正常行为。

您可以将启动画面作为单独活动的一部分来避免该问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T16:29:09.340

正如亨利所说，您不能保证不会再次调用 onCreate - 您不负责该生命周期。如果系统决定在它不在前台时摆脱您的活动，那么当您返回它时，它将被重新创建。如果您想确保不再显示启动画面，您需要保存状态以说明它已显示（例如，使用 onSaveInstanceState）。顺便说一句，启动屏幕在 android 上通常不是一个好主意，部分原因是这个。最好将您的应用程序视为可以随机进入和重新进入的活动的松散集合，就像 android 系统基本上一样。在您看到在 android 上使用的启动画面的地方，通常会看到它们有轻微的行为不端。

如果您想跟踪您的应用程序生命周期，启动屏幕可能对应的生命周期，那么您可以子类化 Application 对象并在其中放置一个标志。但是，android 可能会让您的应用程序运行数周，因此用户不一定会经常看到该启动画面。

请记住，启动画面的真正目的应该是在长时间的加载过程中向用户展示一些不错的东西，而不是让您的品牌出现在他们面前。如果您使用带有 onSaveInstanceState 的方法（通常也使用 onRetainNonConfigurationInstance），那么您显示初始屏幕的情况确实是您需要重做该加载过程的情况，因此这是正确的。但是，通常最好重新考虑设计并快速调出最小的 UI，然后显示一些数据正在加载。

最后，有人深入探讨了这个主题：[http ://android.cyrilmottier.com/?p=632](http://android.cyrilmottier.com/?p=632)

# jquery - jQuery mousemove 方向，获得正确的距离

> ID：14071790
> 
> 赞同：1
> 
> 时间：2012-12-28T15:28:09.930
> 
> 标签：jquery, mousemove, direction, jquery-hover, jquery-calculation

Howdey，我需要创建一个方向感知悬停效果，但停留在正确的计算上。（这是计算问题还是错误的标记？）

这[是我](http://jsfiddle.net/ARTsinn/t4EME/2)到目前为止所做的：

左右箭头按预期工作，但向上和向下失败。任何想法我做错了什么？

```
$("#circle").on('mousemove', function(e) {
    var elem = $(this),
        arrowT = $('.arrow.top'),
        arrowR = $('.arrow.right'),
        arrowB = $('.arrow.bottom'),
        arrowL = $('.arrow.left'),

        offset = elem.offset(),
        pageX = e.pageX - offset.left,
        pageY = e.pageY - offset.top,
        side = {
            top: pageY < (elem.height() / 2),
            left: pageX < (elem.width() / 2),
            bottom: pageY > (elem.height() / 2),
            right: pageX > (elem.width() / 2)
        };

    arrowT.css({
        top: side.top ? pageY - arrowT.outerHeight() : null
    });
    arrowR.css({
        right: side.right ? -(pageX - (elem.width() - arrowR.outerWidth())) : null
    });
    arrowB.css({
        bottom: side.bottom ? -(pageY - (elem.height() - arrowB.outerHeight())) : null
    });
    arrowL.css({
        left: side.left ? pageX - arrowL.outerWidth() : null
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T16:18:39.620

这与元素移动时身体高度的变化有关。在上面贴一个大小不变的包装纸，它们可以工作

[http://jsfiddle.net/t4EME/4/](http://jsfiddle.net/t4EME/4/)

```
#wrap
{
    height:1000px; overflow:hidden;
    padding-top:100px;
}

<div id="wrap">
    <div id="circle">
        <a href="#" class="arrow top"></a>
        <a href="#" class="arrow right"></a>
        <a href="#" class="arrow bottom"></a>
        <a href="#" class="arrow left"></a>
    </div>
</div>​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T16:46:32.100

我希望这有帮助。那是因为将鼠标移到它上面时元素大小会发生变化。

[http://jsfiddle.net/t4EME/5/](http://jsfiddle.net/t4EME/5/)

```
topc = $('#circle').position().top;
widk = $('#circle').height();
$("#circle").mousemove( function(e) {
    var elem = $(this),
        arrowT = $('.arrow.top'),
        arrowR = $('.arrow.right'),
        arrowB = $('.arrow.bottom'),
        arrowL = $('.arrow.left'),

        offset = elem.offset(),
        pageX = e.pageX - offset.left,
        pageY = e.pageY - offset.top,
        side = {
            top: pageY < (elem.height() / 2),
            left: pageX < (elem.width() / 2),
            bottom: pageY > (elem.height() / 2),
            right: pageX > (elem.width() / 2)
        };   
if(e.pageY>topc && e.pageY<topc+widk) {
$('.top').css({
    top: side.top ? pageY - arrowT.outerHeight()  : null
});
$('.right').css({
    right: side.right ? -(pageX - (elem.outerWidth() - arrowR.outerWidth())) : null
});
$('.bottom').css({
    bottom: side.bottom ? -(pageY - (elem.outerHeight() - arrowB.outerHeight())) : null
});
$('.left').css({
    left: side.left ? pageX - arrowL.outerWidth() : null
});
}
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T16:36:52.887

[http://jsfiddle.net/t4EME/7/](http://jsfiddle.net/t4EME/7/)

这是一个带有链接的工作版本

```
 top: pageY < (elem.height() / 2) && pageY  > 0 ,
        left: pageX < (elem.width() / 2) && pageX  > 0,
        bottom: pageY > (elem.height() / 2)  && pageY  < elem.height(),
        right: pageX > (elem.width() / 2) && pageX  < elem.width() 
```

更改为绝对定位，因为边距隐藏了链接

# php - 如何从 CSV 文件中删除重复的行？

> ID：14071791
> 
> 赞同：1
> 
> 时间：2012-12-28T15:28:10.387
> 
> 标签：php, csv

有没有一种简单的方法可以从 CSV 文件中查找和删除重复的行？

示例 test.csv 文件：

```
row1 test tyy......
row2 tesg ghh
row2 tesg ghh
row2 tesg ghh
....
row3 tesg ghh
row3 tesg ghh
...
row4 tesg ghh 
```

预期成绩：

```
row1 test tyy......
row2 tesg ghh
....
row3 tesg ghh
...
row4 tesg ghh 
```

我可以从哪里开始使用 PHP 完成此任务？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-28T15:37:25.663

直截了当的方法是逐行读取文件并跟踪您之前看到的每一行。如果当前行已经被看到，跳过它。

类似以下（未经测试）的代码可能会起作用：

```
<?php
// array to hold all "seen" lines
$lines = array();

// open the csv file
if (($handle = fopen("test.csv", "r")) !== false) {
    // read each line into an array
    while (($data = fgetcsv($handle, 8192, ",")) !== false) {
        // build a "line" from the parsed data
        $line = join(",", $data);

        // if the line has been seen, skip it
        if (isset($lines[$line])) continue;

        // save the line
        $lines[$line] = true;
    }
    fclose($handle);
}

// build the new content-data
$contents = '';
foreach ($lines as $line => $bool) $contents .= $line . "\r\n";

// save it to a new file
file_put_contents("test_unique.csv", $contents);
?> 
```

此代码使用[`fgetcsv()`](http://php.net/manual/en/function.fgetcsv.php)并使用~~空格~~逗号作为列分隔符（基于~~问题~~注释中的示例数据）。

如上所述，存储已看到的每一行将确保删除文件中的所有重复行，无论它们是否直接相互跟随。如果它们总是背靠背，一种更简单的方法（并且更有记忆力）将只存储最后看到的行，然后与当前行进行比较。

**更新**（通过 SKU 列重复行，而不是全行）
根据评论中提供的示例数据，“重复行”实际上并不相等（尽管它们相似，但它们的列数不同）。它们之间的相似性可以链接到单个列，即`sku`.

以下是上述代码的扩展版本。此块将解析 CSV 文件的第一行（列列表）以确定哪一列包含`sku`代码。从那里，它将保留一个唯一的 SKU 代码列表，如果当前行有一个“新”代码，它将使用以下命令将该行写入新的“唯一”文件[`fputcsv()`](http://php.net/fputcsv)：

```
<?php
// array to hold all unique lines
$lines = array();

// array to hold all unique SKU codes
$skus = array();

// index of the `sku` column
$skuIndex = -1;

// open the "save-file"
if (($saveHandle = fopen("test_unique.csv", "w")) !== false) {
    // open the csv file
    if (($readHandle = fopen("test.csv", "r")) !== false) {
        // read each line into an array
        while (($data = fgetcsv($readHandle, 8192, ",")) !== false) {
            if ($skuIndex == -1) {
                // we need to determine what column the "sku" is; this will identify
                // the "unique" rows
                foreach ($data as $index => $column) {
                    if ($column == 'sku') {
                        $skuIndex = $index;
                        break;
                    }
                }
                if ($skuIndex == -1) {
                    echo "Couldn't determine the SKU-column.";
                    die();
                }
                // write this line to the file
                fputcsv($saveHandle, $data);
            }

            // if the sku has been seen, skip it
            if (isset($skus[$data[$skuIndex]])) continue;
            $skus[$data[$skuIndex]] = true;

            // write this line to the file
            fputcsv($saveHandle, $data);
        }
        fclose($readHandle);
    }
    fclose($saveHandle);
}
?> 
```

总的来说，这种方法对内存更加友好，因为它不需要在内存中保存每一行的副本（仅 SKU 代码）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-04T10:25:01.713

一线解决方案：

```
file_put_contents('newdata.csv', array_unique(file('data.csv'))); 
```

# jquery - 如何将相似的html复制到jQuery中的每个页面中

> ID：14071796
> 
> 赞同：0
> 
> 时间：2012-12-28T15:28:50.953
> 
> 标签：jquery, templates, inheritance, jquery-plugins

我正在创建一个引导网页，我只想创建一次顶部栏，然后将其包含在每个页面上。在 Django 中，使用模板继承很容易。我可以在基本页面中创建一个新标签，并将其包含在我想要的每个页面上。现在我只使用 jQuery，所以我想在这里找到一种方法。

我看过[jQuery tmpl](http://api.jquery.com/template-tag-tmpl/)但似乎这不是我想要的，因为我希望每次都复制相同的代码。

现在，假设这是我的标题：

```
<div class="navbar navbar-inverse navbar-fixed-top">
  <div class="navbar-inner">
    <div class="container">
      <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </a>
      <a class="brand" href="#">Brand</a>
      <div class="nav-collapse collapse">
        <ul class="nav">
          <li class="active"><a href="#">Home</a></li>
          <li><a href="#about">About</a></li>
          <li><a href="#contact">Contact</a></li>
        </ul>
      </div><!--/.nav-collapse -->
    </div>
  </div>
</div> 
```

我想用模板替换它，以便将其简单地复制到页面上。建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T16:59:45.407

好的，我想出了一种在 jQuery 中执行此操作的方法，类似于@JFK 的建议。

我用我的代码创建了一个名为 topbar.html 的单独 html 文件：

```
<div class="navbar navbar-inverse navbar-fixed-top">
  <div class="navbar-inner">
    <div class="container">
      <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </a>
      <a class="brand" href="#">Brand</a>
      <div class="nav-collapse collapse">
        <ul class="nav">
          <li class="active"><a href="#">Home</a></li>
          <li><a href="#about">About</a></li>
          <li><a href="#contact">Contact</a></li>
        </ul>
      </div><!--/.nav-collapse -->
    </div>
  </div>
</div> 
```

然后在我的index.html中，除了jquery，我还加了

```
<script src="http://ajax.microsoft.com/ajax/jquery.templates/beta1/jquery.tmpl.min.js"></script> 
```

包括 tmpl 功能。然后我可以这样做：

```
<script type="text/javascript">
    $.get('topbar.html', function(template) {

        // Use that stringified template with $.tmpl() and 
        //  inject the rendered result into the body.
        console.log(template);
        $("#topbar").html(template);
    });

</script> 
```

一旦我了解了 jQuery tmpl 的全部内容，就非常简单。然后，您可以另外将额外的参数传递给 tmpl 以自定义此模板。但我现在不需要任何花哨的东西

# python - 变量值导致程序过早退出

> ID：14071799
> 
> 赞同：0
> 
> 时间：2012-12-28T15:28:57.640
> 
> 标签：python

我正在开发一个简单的游戏程序，但在游戏的初始启动时遇到了问题。我设置了三个功能：开始，游戏，结束。问题是，一旦程序创建了函数，它就会终止，因为没有重新启动来再次通过函数。

这是最后一个函数，gameEnd：

```
def gameEnd ( ):
       print ('Would you like to play again? Y/N.')
       playAgain = ''     **part of the problem is here; the computer reads playAgain as **
       input (playAgain)    **''. Because playAgain is not equal to Y or y, the program **
       if playAgain == 'Y' or 'y':   **exits without ever starting. I need to move **
           gameCore                  **playAgain somewhere logical.**

       else:
          print ('You won Caves of Doom, Caves of Delight ' + wins + ' times.')
          print ('You lost Caves of Doom, Caves of Delight ' + losses + ' times.')
          if wins > losses:
              print ('Good for you. You have a winning record!')

       elif wins == losses:
              print ('Well, you did okay; neither good nor bad.')

       elif wins < losses:
              print ('Tough luck. You have a losing record.')
              time.sleep (1) 
              print ('Farewell, ' + name + ',' + ' and may we meet again sometime soon.') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T16:20:07.220

通过查看您的代码，我认为您使用的是 Python 3。如果您使用的是 Python 2，请使用`raw_input()`而不是`input()`.

您的错误是在定义变量时。如果您从用户那里获取输入，则写入变量，然后输入一个等号，然后写入`raw_input()`或`input()`。这就是你的做法：

```
variable = input() #In python 3
variable = raw_input() #In python 2 
```

所以试试这个代码：

```
def gameEnd():
    print('Would you like to play again? Y/N.')
    playAgain = input("> ")
    if playAgain == 'Y' or playAgain == 'y':
        gameCore()

    else:
        print('You won Caves of Doom, Caves of Delight ' + wins + ' times.')
        print('You lost Caves of Doom, Caves of Delight ' + losses + ' times.')
        if wins > losses:
            print('Good for you. You have a winning record!')

        elif wins == losses:
            print('Well, you did okay; neither good nor bad.')

        elif wins < losses:
            print('Tough luck. You have a losing record.')
            time.sleep(1) 
            print('Farewell, ' + name + ',' + ' and may we meet again sometime soon.')

#End of code 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T15:46:02.393

在 gameEnd() 上试试这个版本。如果用户输入除“Y”/“y”以外的任何内容，它就会退出。

```
def gameEnd ( ):
    playAgain = raw_input ('Would you like to play again?')

    if playAgain == 'Y' or playAgain == 'y':
        gameCore()

    else:
        print ('You won Caves of Doom, Caves of Delight ' + wins + ' times.')
        print ('You lost Caves of Doom, Caves of Delight ' + losses + ' times.')

    if wins > losses:
        print ('Good for you. You have a winning record!')
    elif wins == losses:
        print ('Well, you did okay; neither good nor bad.')

    elif wins < losses:
        print ('Tough luck. You have a losing record.')
        time.sleep (1)
        print ('Farewell, ' + name + ',' + ' and may we meet again sometime soon.') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T16:13:41.543

这里的输入函数被误用了。当使用“输入”时，Python 解释器会尝试评估输入的内容。这就是为什么使用发送回字符串的 raw_input 更安全的原因。您可以使用以下内容调整代码的开头：

```
def gameEnd():
    playAgain = raw_input('Play again ? (Y/y)')
    if any([playInput == 'Y', playInput == 'y']):
       gameCore() 
```

# android - 安卓：异步任务

> ID：14071800
> 
> 赞同：-2
> 
> 时间：2012-12-28T15:29:00.143
> 
> 标签：android, class, static, android-asynctask

我有一个关于 AsyncTasks 的问题：

在我的项目中，我有多个 AsyncTask 类，如 CustomTask1 和 CustomTask2 等，其中我正在做一些 HTTPPOSTS 和解析东西。作为 AsyncTasks 的参数，我得到了一些最终的静态字符串，例如（http://IP/“一些 Web 接口的特殊命令”）。

实际上，我不想要 4-5 个 AsyncTask 类，因为其中很多东西实际上是相同的，所以我多次编写了相同的代码。编写一个 AsyncTask 并在其中放置一些方法并定义静态值来决定使用哪种方法不是更好吗？那么问题是我还需要来自 AsyncTask 的不同返回值，有时是 String，有时是 ArrayList，该怎么做？

整个事情会更整洁一些

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T15:44:20.923

你写：

> 我不想要 4-5 个 AsyncTask 类，因为里面的很多东西实际上是一样的，所以我多次编写了相同的代码......

这就是问题所在 - 不要多次编写相同的代码，但要拥有多个 AsyncTask。AsyncTasks 应该用作您的代码的外观，用于仅包含**TASK-SPECIFIC 逻辑**的每个特定任务类型。当然，如果这些任务共享相同的“算法片段”，那么将这些算法部分写在一个地方，然后通过类型化的任务以不同的方式公开它。我会做类似的事情：

```
class TaskLogicImpl //contains various task general static methods like parsing string etc...
{
   static void preParseServerResponse().......
} 
```

然后创建任务：

```
class Task1 : AsyncTask<URL, Integer, List>
{
  call your. TaskLogicImpl....
} 
```

因为每个任务都是类型化的，所以您将能够以类型安全的方式返回不同的值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T15:34:43.290

如果您有一些在您的应用程序中重复的方法，请考虑编写一个扩展 Application 类的类。[在此处](http://developer.android.com/reference/android/app/Application.html)阅读有关它的更多信息

# android - Spinner 导致空指针异常

> ID：14071801
> 
> 赞同：-1
> 
> 时间：2012-12-28T15:29:10.117
> 
> 标签：android, view

我已经尝试了类似问题的所有建议，但我无法解决它。Spinner 视图给了我一个空指针异常。异常发生在以下行：`spinner.setAdapter(adapter);`. 我怀疑它与没有正确充气有关。字符串数组应该不是问题。我还在这里尝试了几乎完全相同的代码副本：http: [//developer.android.com/guide/topics/ui/controls/spinner.html](http://developer.android.com/guide/topics/ui/controls/spinner.html)。

我还多次清理了我的代码。任何人都可以找到问题吗？

代码：

```
protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_settings);

        Spinner spinner = (Spinner) findViewById(R.id.themeSpinner);
        String[] themesArray = new String[]{"Dark Holo Theme"};

        // Create an ArrayAdapter using the string array and a default spinner layout
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, themesArray);
        // Specify the layout to use when the list of choices appears
        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        // Apply the adapter to the spinner
        spinner.setAdapter(adapter); 
```

XML:

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/relativeLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".SettingsActivity" >

    <Spinner
        android:id="@+id/themeSpinner"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/screenDimSwitch"
        android:layout_centerHorizontal="true" />

</RelativeLayout> 
```

日志猫：

> 12-28 16:22:04.011: E/AndroidRuntime(12269): 致命异常: main 12-28 16:22:04.011: E/AndroidRuntime(12269): java.lang.RuntimeException: 无法启动活动 ComponentInfo{com. example.sudokuandroidprobeersel/com.example.sudokuandroidprobeersel.SettingsActivity}：java.lang.NullPointerException 12-28 16:22:04.011：E/AndroidRuntime(12269)：在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1970) 12 -28 16:22:04.011: E/AndroidRuntime(12269): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1995) 12-28 16:22:04.011: E/AndroidRuntime(12269): 在 android.app .ActivityThread.access$600(ActivityThread.java:127) 12-28 16:22:04.011: E/AndroidRuntime(12269): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:1161) 12-28 16: 22:04.011：E/AndroidRuntime（12269）：在 android.os.Handler.dispatchMessage(Handler.java:99) 12-28 16:22:04.011: E/AndroidRuntime(12269): 在 android.os.Looper.loop(Looper.java:137) 12-28 16 :22:04.011: E/AndroidRuntime(12269): 在 android.app.ActivityThread.main(ActivityThread.java:4512) 12-28 16:22:04.011: E/AndroidRuntime(12269): 在 java.lang.reflect。 Method.invokeNative(Native Method) 12-28 16:22:04.011: E/AndroidRuntime(12269): at java.lang.reflect.Method.invoke(Method.java:511) 12-28 16:22:04.011: E /AndroidRuntime(12269): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:984) 12-28 16:22:04.011: E/AndroidRuntime(12269): 在 com.android.internal。 os.ZygoteInit.main(ZygoteInit.java:751) 12-28 16:22:04.011: E/AndroidRuntime(12269): at dalvik.system.NativeStart.main(Native Method) 12-28 16:22:04.011:E/AndroidRuntime(12269): 引起: java.lang.NullPointerException 12-28 16:22:04.011: E/AndroidRuntime(12269): at com.example.sudokuandroidprobeersel.SettingsActivity.onCreate(SettingsActivity.java:80) 12- 28 16:22:04.011: E/AndroidRuntime(12269): 在 android.app.Activity.performCreate(Activity.java:4465) 12-28 16:22:04.011: E/AndroidRuntime(12269): 在 android.app。 Instrumentation.callActivityOnCreate(Instrumentation.java:1052) 12-28 16:22:04.011: E/AndroidRuntime(12269): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1934) 12-28 16:22:04.011: E/AndroidRuntime(12269): ... 11 更多E/AndroidRuntime(12269): 在 android.app.Activity.performCreate(Activity.java:4465) 12-28 16:22:04.011: E/AndroidRuntime(12269): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java :1052) 12-28 16:22:04.011: E/AndroidRuntime(12269): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1934) 12-28 16:22:04.011: E/AndroidRuntime(12269): ... 11 更多E/AndroidRuntime(12269): 在 android.app.Activity.performCreate(Activity.java:4465) 12-28 16:22:04.011: E/AndroidRuntime(12269): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java :1052) 12-28 16:22:04.011: E/AndroidRuntime(12269): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1934) 12-28 16:22:04.011: E/AndroidRuntime(12269): ... 11 更多

**更新：**

导致空指针异常的对象是 Spinner，而不是适配器。虽然 R.id.themeSpinner 在 R 中被正确引用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T15:40:20.187

对，你应该调试它，你会发现微调器对象为空，它只能是这个。您应该清理您的项目并再次重新安装应用程序，然后它应该可以工作，它有时会发生在布局中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T16:31:56.243

如果您说的都是真的（1\. 它肯定是微调器，2\. 它在 spinner.setAdapter(adapter); 处抛出空指针）

然后我们可以有把握地说，膨胀确实出错了。

你确定你在 setContentView(R.layout.activity_settings); 中使用了正确的布局吗？微调器是否不包含在其他布局中？

# php - 将 html-php 组合框与数据库同步

> ID：14071807
> 
> 赞同：1
> 
> 时间：2012-12-28T15:29:50.573
> 
> 标签：php, html, mysql, database, combobox

我有我的 php 脚本的一部分：

```
<?
    $cn=mysql_connect("localhost","root") or die("Note: " . mysql_error());
    $res=mysql_select_db("psi",$cn) or die("Note: " . mysql_error());
    $sql = "select names from list;";
    $res=mysql_query($sql) or die("Note: " . mysql_error());
?>
<select name="namez" size=1>
<?
    while($ri = mysql_fetch_array($res))
    {
     echo "<option value=" .$ri. "</option>";
    }
echo "</select> ";
?> 
```

我想让组合框通过我的数据库从“名称”字段中获取菜单，但它仍然没有菜单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T15:35:03.483

它应该是：

```
<select name="namez">
<?
  while($row = mysql_fetch_assoc($res))
  {
     echo '<option value="'.$row['names'].'">'.$row['names'].'</option>';
  }
  echo "</select> ";
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T15:34:35.887

$ri 只是结果的一个元素。首先，您需要从中获取名称然后显示它。表中的字段名称是什么？所以它会像

```
echo "<option value=" .$ri["id"].">".$ri["name"]. "</option>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T15:32:47.163

$ri 将是一个数组，所以试试

```
'<option value="' . $ri['dbColname'] . '">' . $ri['dbColname'] . "</option>"; 
```

# c++ - boost::lambda::bind - 可能的优化？

> ID：14071813
> 
> 赞同：1
> 
> 时间：2012-12-28T15:30:00.730
> 
> 标签：c++, boost, lambda, bind

检查以下代码：

全局包装函数：

```
static Storage::Stream::Object reqStreamStatic( Storage::Stream::Object& stream, const std::string& identifier )
{
    return stream;
} 
```

boost::function 的声明：

```
Storage::Stream::Object stream( file, iFormat );

BOOST_AUTO( onReqStream, boost::lambda::bind( &Impl::reqStreamStatic, boost::lambda::var( stream ), boost::lambda::_1 ) ); 
```

如您所见，包装函数只返回给定的流。现在我正在寻找删除包装函数的解决方案，因此生成的编码如下所示：

```
BOOST_AUTO( onReqStream, boost::lambda::ret< Storage::Stream::Object >( boost::lambda::bind( boost::lambda::var( stream ), boost::lambda::_1 ) ) ); 
```

# jsf-2 - 复合组件真的需要命名容器接口吗？

> ID：14071825
> 
> 赞同：2
> 
> 时间：2012-12-28T15:30:58.473
> 
> 标签：jsf-2, composite-component

我想创建一个可以与其他人一起迭代的复合组件。问题是复合组件是一个命名容器，一个简单的 selectOnMenu 更改和刷新其他 selectOnMenu 是不可能的，因为给 selectOnMenu 的“id”是`combo1:combo`并且看不到`combo2:combo`。

最好的情况是`form1:combo1`and `form1:combo2`，然后 combo1 和 combo2 使用 uinamingcontainer `h:form`。该链接讨论了这一点，但没有解决方案。 [https://cwiki.apache.org/MYFACES/create-a-non-namingcontainer-composite-component.html](https://cwiki.apache.org/MYFACES/create-a-non-namingcontainer-composite-component.html)

再次尝试但不起作用。`p:commandbutton`在 CC 中看不到 div 的 id。 [获取JSF2复合组件父级的clientId](https://stackoverflow.com/questions/12477578/obtaining-the-clientid-of-the-parent-of-a-jsf2-composite-component)

```
<p:commandButton value="asd" partialSubmit="true" process="@this" update="fooId"/>  
    <cf:label id="fooId" title="xxxxx" />[index.xhtml]

<composite:interface componentType="RootComponent" preferred="false">
    <composite:attribute name="title" />
</composite:interface>

<composite:implementation>
<div id="#{cc.immediateParent.clientId}:#{cc.id}">
#{currentDate}
<h:panelGroup id="#{cc.clientId}" layout="block">
    <p:outputLabel id="#{cc.clientId}_lb" value="#{cc.attrs.title}">
        <composite:insertChildren />
    </p:outputLabel>
</h:panelGroup>
</div>
</composite:implementation>[label.xhtml](compositecomponent) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T16:45:51.320

> *复合组件真的需要命名容器接口吗？*

是的。否则，当在同一个父命名容器中使用多个复合组件时，您最终会遇到来自复合组件实现的“重复组件 ID”错误。

如果您绝对肯定不想要`NamingContainer`基于组件的组件，那么请改为创建一个标记文件。它只需要一些`.taglib.xml`样板文件。

### 也可以看看：

*   [何时使用 <ui:include>、标记文件、复合组件和/或自定义组件？](https://stackoverflow.com/questions/6822000/when-to-use-uiinclude-tag-files-composite-components-and-or-custom-componen)

* * *

> *再次尝试但不起作用。`p:commandbutton`在 CC 中看不到 div 的 id*

您的复合实现无效。为了通过 ajax 正确引用复合材料，您需要一个纯 HTML`<div>`或一个`<span>`ID 为`#{cc.clientId}`.

例如

```
<composite:implementation>
    <div id="#{cc.clientId}">
        #{currentDate}
        <h:panelGroup layout="block">
            <p:outputLabel id="#{cc.clientId}_lb" value="#{cc.attrs.title}">
                <composite:insertChildren />
            </p:outputLabel>
        </h:panelGroup>
    </div>
</composite:implementation> 
```

*(I have by the way the impression that the `<h:panelGroup>` is superfluous, you can safely omit it; further the `id="#{cc.clientId}_lb"` can better be `id="label"` or something to minimize repetition/duplication)*

### See also:

*   [JSF Updating Composite Component (Primefaces)](https://stackoverflow.com/questions/11690635/jsf-updating-composite-component-primefaces)
*   [Is it possible to update non-JSF components (plain HTML) with JSF ajax?](https://stackoverflow.com/questions/13009174/jsf-update-with-ajax-non-jsf-things)

# c++ - 多个 SFML OpenGL 窗口

> ID：14071832
> 
> 赞同：3
> 
> 时间：2012-12-28T15:31:34.310
> 
> 标签：c++, windows, opengl, sfml

如何创建两个 SFML 窗口，然后使用 OpenGL 绘制到这两个窗口？

如果您想知道如何使用 OpenGL 创建和使用两个或多个 SFML 窗口，那么这里就是解决方案。我无法在互联网上的其他任何地方找到有关如何执行此操作的信息，所以在这里。我希望有一天这对某人有用。

顺便说一句，您可能想知道为什么这可能是一件有用的事情：

对于物理学家来说，能够向其他人展示系统动画是一件非常有用的事情，因为我们经常想要编写一个演示程序来帮助我们解释它。一个简单的例子是盒子中气体粒子的行为。在一个窗口中，由于我们花哨的物理计算，粒子将像在现实世界中一样被绘制和移动，而在另一个窗口中，可能会绘制图表以显示盒子内的总能量或平均粒子速度（温度）和其他类似的事情。另一个很好的例子是太阳系的模拟。关于行星的数据可以绘制到一个窗口，而太阳系的视图可以绘制到另一个窗口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T15:31:34.310

完成这项工作需要几个步骤。多个窗口的巧妙之处在于您必须在绘制每个窗口之前调整其大小，或者至少这是最简单的处理方式。对于一个窗口，您只能在创建窗口后调整大小，并且每次调整大小或重新调整形状。您可能会争辩说，通过从矩阵堆栈中推送和弹出来执行此操作有更好的方法，在这种情况下，请发表评论并留下其他答案。

首先，您需要声明两个 sfml 窗口，正如您所期望的那样：（`sf::Window window, window2;`可能您应该检查它们在程序执行结束时是否都关闭了！）

其次，为两者实现一个调整大小的方法。这样的事情会做。

```
/// Window
glViewport(0, 0, window.GetWidth(), window.GetHeight());
// Set matrix mode back again
glMatrixMode(GL_PROJECTION);
// Reset matrix stack
glLoadIdentity();
// Set drawing surface properties - either Perspective or Orthographic
///gluPerspective(45.0, (double)w / (double)h, 1.0d, 100.0d);
glOrtho(-50.0d, 50.0d, -50.0d, 50.0d, -10.0d, 10.0d);
// Put matrix mode back
glMatrixMode(GL_MODELVIEW); 
```

现在另一个：

```
/// Window2, which can be different to window!
glViewport(0, 0, window.GetWidth(), window.GetHeight());
// Set matrix mode back again
glMatrixMode(GL_PROJECTION);
// Reset matrix stack
glLoadIdentity();
// Set drawing surface properties - either Perspective or Orthographic
///gluPerspective(45.0, (double)w / (double)h, 1.0d, 100.0d);
glOrtho(-50.0d, 50.0d, -50.0d, 50.0d, -10.0d, 10.0d);
// Put matrix mode back
glMatrixMode(GL_MODELVIEW); 
```

您可能希望将这两个代码块放在两个不同的函数中，并可能实现您选择的相机类。这样做的原因是，在使用各种 OpenGL 绘图方法绘制到每个窗口之前，您需要为每个窗口调用 resize 函数。

现在是有趣的部分。在绘制之前调用你要绘制到的窗口的 resize 方法。然后，如果您需要调用`glMatrixMode(GL_MODELVIEW);`（以防万一！）`glLoadIdentity();`， 和`glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);`. 显然，如果你不想清屏，不要调用glClear或glLoadIdentity，如果你不想重置矩阵变换堆栈...

现在做你的绘图：`glBegin()`以及`glEnd()`你需要做的所有其他事情。

最后，调用`window.Display()`or `window2.Display()`，这取决于您刚刚向哪一个绘图。现在回到上面有趣的部分，调用另一个窗口的 resize 方法，继续为第二个窗口做所有你需要做的事情，就像第一个窗口一样！

现在享受多窗口的 OpenGL SFML 编程。您可能也想将大量窗口放入矢量或其他精美容器中。

[编辑] 出于某种原因 sf::Windows 是不可复制的，这意味着您不能将它们 push_back() 放入像双端队列或向量这样的容器中。这可能是由于某些 OpenGL 特定的事情，如果您尝试将所有位从一个窗口类复制到另一个窗口类，这将“出错”。（也许？）相反，一个`sf::Window* = new sf::Window[number_of_windows]`and`unsigned int number_of_windows = 2`就足够了，虽然它不是那么好......

# jms - Websphere 集群中缺少 Bayeux 会话

> ID：14071839
> 
> 赞同：1
> 
> 时间：2012-12-28T15:32:06.900
> 
> 标签：jms, websphere, websphere-8, bayeux

我有[IBM 指定](http://pic.dhe.ibm.com/infocenter/wasinfo/v6r1/index.jsp?topic=/com.ibm.websphere.webmsg.help/docs/ApplicationPublishing.html)的 Bayeux 实现。在独立环境中它可以正常工作，但是当我们将它投入生产（集群化）时，会话会在一段时间后丢失。我们使用 SIBUS 作为总线实现和默认消息传递提供程序。在 SIBUS 中，我们使用基于数据库的数据存储。我们的 Web 服务器是 WebSEAL。

我们确信这不是复制问题，因为：

1.  粘性会话已启用
2.  启动后，每个参与者都可以看到彼此，这意味着无论您在哪里登录，会话都会被两台服务器复制。

主要症状是在正常工作几分钟后，长轮询请求挂起，直到发生来自客户端的新请求。任何地方都没有例外。

我仍然无法判断我的问题是与 SIBUS 配置有关，还是与 WebSEAL 配置有关。

任何帮助将不胜感激。IBM 文档不是最好的，我们一直在测试在几个文档中找到的每一条建议，但都没有成功。

**编辑：** 经过一些测试，我发现这种行为也发生在非集群环境中。我还看到代码 CWPSB1314W 的异常，它什么也没给[我](http://pic.dhe.ibm.com/infocenter/wasinfo/v8r0/index.jsp?topic=/com.ibm.websphere.messages.doc/com.ibm.ws.webmsg.resources.Messages.html)。

# android - WebView 中动画 gif 的行为很奇怪！！，如何解决这个问题？

> ID：14071847
> 
> 赞同：0
> 
> 时间：2012-12-28T15:32:24.887
> 
> 标签：android, android-webview

我有一个带有 WebView 的应用程序，其中有一长串帖子，当用户接近可滚动区域的底部时，这些帖子会通过 Ajax 自动加载，所以我在旁边显示“正在加载...”这个词和一个通过 Ajax 创建的动画 GIF装载机站点。

问题是这个 Gif 有时在某些装有 Android 2.3.5/2.3.6 的设备中显示为静止图像，而在其他设备中它的动画非常快，而在其他设备中它非常慢。

例如带有操作系统的 Galaxy S Mini：2.3.6（它显示为静止图像）。

Galaxy S I9003 操作系统：2.3.6（播放速度非常快）。

带有操作系统的 Galaxy S2：4.0.3（播放速度非常快，然后突然变得非常慢，但仍在动画中）。

这个问题是否有标准帧速率或任何解决方法？

这是我正在使用的图像：

------> ![在此处输入图像描述](../Images/4f3b54ac10c5e95a55aef1e45f2b4b9b.png)<--------

我知道 Facebook 的应用程序在提要底部使用带有加载程序的 WebView，但我不知道它是否是动画 gif。

**我知道旧版本的 Android 不支持动画 GIF，但我说的是新版本**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T23:57:47.437

我遇到了完全相同的问题，但没有找到解决方案！动画 GIF 行为在不同设备之间似乎确实不一致。这就是坏消息。好消息是我已经解决了问题，特别是针对像你这样的 ajax 加载器。

您需要为 GIF 的每一帧制作单独的图像文件。这听起来很可怕，但对我来说效果还不错——我的 8 帧 8kb GIF 变成了 8 张总共 11kb 的 png 图像，而且我得到了 8 位透明度的奖励，所以我不必担心背景颜色。这确实意味着客户端必须对单独的图像提出额外的请求，因此帧越少越好。我将图像命名为 0.png、1.png ... 7.png 并将它们放在一个文件夹中以保持它们的整洁。

现在是代码！我会在下面解释。

HTML：

```
<img src="images/loader/0.png" id="headLoader" />
<div id="loaderKicker" style="visibility:hidden;"></div> 
```

JavaScript (jQuery):

```
var loaderImg = $("#headLoader");
var loaderProg = 0;
setInterval(function() {
    $("#loaderKicker").html(loaderProg);
    loaderImg.attr("src", "images/loader/"+loaderProg+".png");
    loaderProg = (loaderProg+1)%8;
}, 300); 
```

首先`img`，我们有动画。我们使用`setInterval`更改图像 url 来循环浏览帧。很短的时间间隔显然会给设备带来负担，所以我们不想发疯。我有一个非常便宜的 Android 2.2 设备，而且 200 毫秒以上的时间间隔似乎可以正常工作，而不会破坏应用程序的性能。

div 可以在较旧的`loaderKicker`设备上进行这项工作（例如我们的目标设备:)）。*当我们*所做的只是更新图像 url时， Android 似乎会忽略这些调用，因此我们通过更新隐藏 div 的内容来解决这个问题。我尝试总是用“x”更新，但似乎内容实际上必须不同。幻灯片编号效果很好。

就是这样了！这有点像 hack 工作，但它适用于我测试过的所有东西（Android 2.2、2.3、4.0、iOS6、Firefox、IE、Chrome），如果你只在一个 ajax 加载器上执行它，那么你将在任何地方使用似乎都可以。

另一种完全独立的解决方案是使用 HTML5 画布为图像设置动画，但我无法告诉您有关旧设备对它们的支持的任何信息。

# java - Android 根据预定义的值确定方向和屏幕尺寸

> ID：14071850
> 
> 赞同：0
> 
> 时间：2012-12-28T15:32:32.327
> 
> 标签：java, android, screen-orientation

我想要的是问一个方法并得到一个解决这个问题的枚举：

使用方向限定符 一些布局在横向和纵向都可以很好地工作，但它们中的大多数都可以从调整中受益。在 News Reader 示例应用程序中，以下是布局在每种屏幕尺寸和方向上的表现：

小屏幕，人像

小屏幕，风景

7" 平板电脑，纵向

7" 平板电脑，横向

10 英寸平板电脑，纵向

10" 平板电脑，横向

电视、风景

-- [http://developer.android.com/training/multiscreen/screensizes.html#TaskUseOriQuali](http://developer.android.com/training/multiscreen/screensizes.html#TaskUseOriQuali)

我发现了检测屏幕大小等的不同版本，但我希望这个简单的列表变成一个枚举，当我询问一个方法时我可以取回它。

问题是，根据屏幕尺寸，这些不同的尺寸与什么相关？

我想做的例子：

当前设备 cd = getDevicePreferences();

然后会产生 cd.Small_Screen_Portrait 或 cd.Tablet7_Landscape 等

**更新**

我想要做的是弄清楚我是否应该在屏幕上显示更多信息，因为设备有一个大屏幕。在我的三星 Galaxy Tab 10.1 上，我会显示 2 个片段和一个菜单，但在我的普通三星 Galaxy S 上，我只会显示一个片段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T15:55:22.077

我认为你走错了路。先试试看这个

[http://developer.android.com/training/basics/supporting-devices/screens.html](http://developer.android.com/training/basics/supporting-devices/screens.html)

通常你会想要定义你的 xml 布局，这是处理多个设备的正确方法，在 java 代码中什么也不应该做。

# java - 正则表达式替换前 3 个数字后的所有数字

> ID：14071851
> 
> 赞同：-1
> 
> 时间：2012-12-28T15:32:34.247
> 
> 标签：java, regex

我正在使用 java regex 引擎，需要一种方法来删除字符串中前 3 位数字之后的所有数字。我已经尝试过正面的看法，但没有奏效。

这是我拥有的数据类型

```
213-333-4444

233.444.5556

(636) 434-5555 
```

这是我试图达到的结果：

```
213-222-2222

233.222.2222

(636) 222-2222 
```

因此，正则表达式将查找前 3 位和过去的数字，将所有数字字符替换为 2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T15:39:59.053

不要强制使用单个正则表达式，使用多个。例如，确定最后一个数字 3 的最终位置，然后从该位置运行简单数字替换正则表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T16:24:24.183

怎么样：

```
 String[] strings = {
            "213-333-4444",
            "233.444.5556",
            "(636) 434-5555"
    };
    String regex = "(\\D*\\d{3}\\D*)[\\d]{3}(.?)[\\d]{4}";
    String replacement = "$1222$22222";
    for (String string : strings) {
        System.out.println(string.replaceAll(regex, replacement));
    } 
```

输出：

```
213-222-2222
233.222.2222
(636) 222-2222 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T16:25:00.497

以这种方式得到解决方案..尝试它..

```
int count=0;
Pattern pattern = Pattern.compile("(\\d|\\D)");
Matcher m = pattern.matcher("213-333-4444");  //change this according to your need
while (m.find()) {
    Pattern pattern1 = Pattern.compile("(\\d)");
    Matcher m1 = pattern1.matcher(m.group());
    if(m1.find())
    {
        count++;
        if(count>3)
            System.out.print(m.group().replace(m.group(), "2"));
        else
             System.out.print(m.group());
    }
    else
        System.out.print(m.group());
        } 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-28T15:39:09.580

而不是使用正则表达式，为什么不从第 4 个元素开始遍历字符串的每个字符（因为您希望前 3 个保留）并检查它是否为数字并执行所需的操作。

# ruby - Mongoid - 有很多超时

> ID：14071853
> 
> 赞同：0
> 
> 时间：2012-12-28T15:32:37.817
> 
> 标签：ruby, mongodb, gem, mongoid, rack

我在 Mongoid 中有很多超时错误。该错误表示它发生在`connectable.rb#16`. 我找到了这个[https://github.com/mongoid/moped/blob/master/lib/moped/sockets/connectable.rb#L16的来源](https://github.com/mongoid/moped/blob/master/lib/moped/sockets/connectable.rb#L16)

或者这里也是

[https://github.com/mongoid/moped/blob/master/lib/moped/sockets/connectable.rb#L45](https://github.com/mongoid/moped/blob/master/lib/moped/sockets/connectable.rb#L45) https://github.com/mongoid/moped/blob/master/lib/moped/sockets/connectable .rb#L60

那么我与该错误有什么关系，如何提高超时以消除该错误？

**PS**这是一个 sinatra 应用程序，这里是其中一个的堆栈跟踪。

```
Timeout::Error at /
execution expired
file: connectable.rb location: write line: 60

/var/lib/gems/1.9.1/gems/moped-1.3.2/lib/moped/sockets/connectable.rb 60 in write
        handle_socket_errors { super }
/var/lib/gems/1.9.1/gems/moped-1.3.2/lib/moped/sockets/connectable.rb 60 in block in write
        handle_socket_errors { super }
/var/lib/gems/1.9.1/gems/moped-1.3.2/lib/moped/sockets/connectable.rb 78 in handle_socket_errors
        yield
/var/lib/gems/1.9.1/gems/moped-1.3.2/lib/moped/sockets/connectable.rb 60 in write
        handle_socket_errors { super }
/var/lib/gems/1.9.1/gems/moped-1.3.2/lib/moped/connection.rb 156 in block in write
        socket.write(buf)
/var/lib/gems/1.9.1/gems/moped-1.3.2/lib/moped/connection.rb 202 in with_connection
        yield @sock 
```

# javascript - 谷歌地图无法在模式窗口中正确呈现

> ID：14071855
> 
> 赞同：1
> 
> 时间：2012-12-28T15:32:40.190
> 
> 标签：javascript, jquery, google-maps, google-maps-api-3

在模态窗口中加载谷歌地图时遇到问题。基本上，当模式窗口打开时，我会加载地图，但它并没有完全渲染。

我提供了一个示例，以便您更好地理解问题。有人知道如何解决这个问题吗？

```
<html>

<head>
    <script src="http://code.jquery.com/jquery.min.js"></script>
    <script src="http://www.jacklmoore.com/colorbox/colorbox/jquery.colorbox.js"></script>
    <script>
        $(document).ready(function(){
            $("#link").colorbox({
                inline:true, 
                width:"50%", 
                onOpen: function(){
                    $('#cboxClose').remove();
                    var script = document.createElement("script");
                        script.type = "text/javascript";
                        script.src = "https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&callback=showMapsStep1";
                        document.body.appendChild(script);
                }
            });

            window.showMapsStep1 = function(){

                var mapOptions = {
                    zoom: 8,
                    center: new google.maps.LatLng(-34.397, 150.644),
                    mapTypeId: google.maps.MapTypeId.ROADMAP
                }
                var map = new google.maps.Map(document.getElementById("canvas"), mapOptions);

                $('#canvas').show();
            }
        });
    </script>
</head>

<body>
    <a href="#box" id="link">Open modal <a/>

    <div style='display:none'>
        <div id='box' style='height: 300px; width: 500px;' >
            <div id="canvas" style="height: 100%; width: 100%;"></div>
        </div>
    </div>
</body>

</html> 
```

编辑：这是在谷歌浏览器上测试的。如果我调整窗口大小，地图将正确呈现

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-10T21:21:05.723

您必须触发“调整大小”地图事件。

```
var map = new google.maps.Map(document.getElementById("canvas"), mapOptions);

google.maps.event.trigger(map, 'resize', function () {
    // your callback content
}); 
```

# jsf - Jsf bean 动作的 ActionResponse 对象

> ID：14071858
> 
> 赞同：1
> 
> 时间：2012-12-28T15:32:49.813
> 
> 标签：jsf, weblogic

当我从 jsf portlet 单击 jsf 页面的提交按钮时，会调用 jsf bean 的 mymethod。

```
<h:commandButton id="id1" action="#{Mybean.mymethod}" value="Click" />

public String mymethod() {

    FacesContext fc = FacesContext.getCurrentInstance();
    Object obj = fc.getExternalContext().getResponse();

    if (obj instanceof ActionResponse){
    System.out.println("ActionResponse !");
}   else if (obj instanceof RenderResponse) {
    System.out.println("RenderResponse !");
}
} 
```

但是没有一种类型可以满足 Response 对象。它是什么类型的响应？因为我想弄清楚它是否是 ActionResponse，所以我需要设置 setEvent 方法。我想它应该是 ActionResponse 类型吧？我想知道为什么不是。

**<-修改->**

现在我得到了行动响应。可能是因为我有 jsf 1.2 而不是 1.1，而且我在不同的系统中。

对于 Portlet A，我在 bean 中设置事件如下，

```
ar.setEvent("showResults", "true"); //ar is ActionResponse 
```

然后在 Portlet B 的 Portlet 类中，我正在执行以下操作，

```
public class IPC extends GenericFacesPortlet {

protected void doView(RenderRequest request, RenderResponse response)
throws PortletException, IOException
{
if (request.getAttribute("showResults") == "true") {
request.setAttribute("javax.portlet.faces.viewId", "/JsfB_alt.jsp");
}
super.doView(request, response);

}

@ProcessEvent
public void processIPCEvent(EventRequest eRequest, EventResponse eResponse)
    throws PortletException, IOException
  {
     Event event = eRequest.getEvent();
    if(event.getName().equals("showResults")){
System.out.println("Event encountered !");

    eRequest.setAttribute("showResults", "true");
}

}
} 
```

因此，当我通过设置事件单击 Portlet A 中的按钮时，我要做的是从 Portlet B 的默认视图从 /JsfB.jsp 更改为 /JsfB_alt.jsp。

但是没有监听事件，因为我可以看到“遇到的事件”没有被打印出来。

我什至尝试使用 @Override 将 processIPCEvent 更改为 processEvent，但仍然没有被调用。我希望它会在有任何事件时自动调用，对吧？我觉得在 ar.setEvent() 中设置事件有问题你怎么看？

仅供参考，我正在使用 weblogic server 10.3 和 jsf 1.2

请提出可能是什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T16:10:26.753

这*可能是*由于您的应用程序中使用了[portlet 桥接实现。](https://stackoverflow.com/questions/4272496)

由于编写 JSF 实现是为了与 servlet API 一起工作，因此它们不能在 portlet 中开箱即用。因此，当[创建上下文](http://docs.oracle.com/javaee/6/api/javax/faces/context/FacesContextFactory.html#getFacesContext%28java.lang.Object,%20java.lang.Object,%20java.lang.Object,%20javax.faces.lifecycle.Lifecycle%29)时，[portlet 响应](http://portals.apache.org/pluto/portlet-2.0-apidocs/javax/portlet/PortletResponse.html)可能会适应[servlet 响应](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletResponse.html)。上下文仅返回在创建时传递给它的对象。

在我使用过的桥接器（IBM 实现）中，这些包装器还实现了 portlet 接口，但我不知道需要这样做。

如果您想要更明智的答案，您可能需要说明您的平台、库及其版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T14:21:50.780

我在 portlet.xml 中使用定义为 java 事件 (jsr) `<event-definition> and <supported-processing-event>`，现在我可以收听它了。

# php - 在 MySQL 表中保存 JSON 字符串（来自画布）

> ID：14071861
> 
> 赞同：0
> 
> 时间：2012-12-28T15:32:54.887
> 
> 标签：php, mysql, json, prepared-statement, fabricjs

我想在 MySQL 表中保存一个 json 字符串。json 字符串来自画布（使用 fabricjs）。

```
var jsonCanvas = JSON.stringify(canvas.toDatalessObject()); 
```

我的第一个问题是，在 MySQL 中保存 json 字符串的最佳数据类型是什么？画布将包含图像以及文本和其他对象。你觉得 MEDIUMTEXT 够用吗？

另一个问题。是否可以使用此准备好的语句保存 json 字符串。我怀疑是否将关键字“s”用于字符串。

```
try {
  $sql = "insert into layout (lt_author, lt_date, lt_category, lt_json_string)
   values (?,?,?,?)";
  $stmt = $mysqli->prepare($sql);
  $stmt->bind_param("ssss",$lt_author, $lt_date, $lt_category, $lt_json_string);
  $stmt->execute();
  $stmt->close(); 
```

谢谢你的帮助 :) 问候 Max

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T20:58:51.310

我假设您的 SQL 是正确的。
我总是选择`TEXT`存储我的画布的 json 字符串表示。
但是在您选择如何保存 JSON 表示之前，需要考虑一些事情。
请在此处查看此讨论：[使用 fabric.js 在画布中加载 JSON](https://stackoverflow.com/questions/6886984/loading-json-in-canvas-with-fabric-js)
它解释了您需要注意的要点。

*   使用`.toDatalessObject()`替代`.toJson()`方法：- 优点：正如 kangax 在讨论中解释的那样，toDatalessObject 将只保存 svg 的 url 源，因此需要保存在数据库中的数据更少。通过这种方式，您也许可以使用其他类型来存储您的 json 画布表示形式（也许您可以使用一种`TINYTEXT`类型）
- 缺点：您需要在服务器中有文件，因为您将在再次加载画布时引用它。*   你的画布上有多少物体？这个对象是什么类型的？是更多的 svg 还是图像和文本？你需要知道，因为如果你使用`.toDatalessJson()`方法并且你将在你的画布中加载更多的 svg，这个 svg 将被转换为对象，`Path`并将`PathGroup`保存在你的数据库中。
因此，如果您的画布中有很多很多 svg，那么最终的 json 字符串可能会溢出`TEXT`数据库中类型允许的大小（如果发生这种情况，有一些解决方案，例如拆分您的 json 字符串表示并保存在两个或多个条目中您的数据库）。
但是，如果这种情况经常发生，也许会更好地选择其他类型，`MEDIUMTEXT`如您所建议的那样。

# php - 未定义的类常量'self::STRING'

> ID：14071868
> 
> 赞同：1
> 
> 时间：2012-12-28T15:33:24.837
> 
> 标签：php, class, static, late-static-binding

几天来我一直在为一个完全奇怪的错误而苦苦挣扎：这是场景（请耐心等待）：

我有一个“框架”类，我称之为 F。我有一些扩展 F 的简单类，其中一个我称之为 P。

所以我所拥有的是：

```
class F {
    [...]
    protected static $_tabela;
    [...]
    final public static function _Tabela() {
        return static::$_tabela;
    }
    public static function Consultar() {
        echo static::_Tabela();
    }
}

class P extends F {
    protected static $_tabela = 'produtos';
} 
```

当我打电话时，`P::Consultar();`我得到这个对我来说毫无意义的错误：

`Fatal error: Undefined class constant 'self::STRING' in [...]/F.inc.php on line X`

其中 X 是 _Tabela() 方法的主体。

因此，我尝试更改变量名称（$_tabela）。我尝试通过 get_call_class() 保存类名：

```
$class = get_called_class()
return $class::$_tabela; 
```

但是得到了同样的错误。

另外，错误消息完全没用，我不是要访问类常量，而是要访问类静态属性！

谷歌搜索错误消息也没有给我任何有用的结果。

**编辑：**谢谢大家的回答！我发现了问题，它与我正在查看的代码无关。原来P类的定义有错误，所以当我尝试调用static::Consultar时，PHP解析了这个类并抱怨错误！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T15:54:19.453

如果您使用的是 PHP 版本 >= 5.3.0 ，您可以这样做：

```
<?php
class F {
    protected static $_tabela = 'a';

    final public static function _Tabela() {
        $s = new static();
        return $s::$_tabela;
    }
    public static function Consultar() {
        $s = new static();
        echo $s::_Tabela();
    }
}

class P extends F {
    protected static $_tabela = 'produtos';
}

echo P::Consultar(); // echos 'produtos' 
```

# z3 - Prove() 方法，但忽略一些“自由”变量？

> ID：14071870
> 
> 赞同：2
> 
> 时间：2012-12-28T15:33:26.260
> 
> 标签：z3

我有 2 个公式 F1 和 F2。这两个公式共享大多数变量，除了一些具有不同名称的“临时”（或者我称它们为“免费”）变量，这些变量出于某些原因而存在。

现在我想证明 F1 == F2，但是 Z3 的证明（）方法总是考虑到所有的变量。我如何告诉prove() 忽略那些“自由”变量，而只关注我真正关心的变量列表？

我的意思是对于我的变量列表的所有相同输入，如果在输出时，F1 和 F2 具有所有这些变量的相同值（不管“自由”变量的值），那么我认为它们是“等价的”

我相信这个问题已经在其他研究中得到解决，但我不知道在哪里寻找信息。

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T16:15:50.997

我们可以使用存在量词来捕获“临时”/“自由”变量。例如，在以下示例中，公式`F`和`G`不等价。

```
x, y, z, w = Ints('x y z w')
F = And(x >= y, y >= z)
G = And(x > z - 1, w < z)
prove(F == G) 
```

该脚本将生成反例`[z = 0, y = -1, x = 0, w = -1]`。如果我们将`y`和`w`作为“临时”变量，我们可以尝试证明：

```
prove(Exists([y], F) == Exists([w], G)) 
```

现在，Z3 将回归`proved`。Z3 本质上表明，对于所有`x`和`z`，当且仅当存在 a 为真时，存在 a`y`为真。`F``w``G`

[这](http://rise4fun.com/Z3Py/ikr3)是完整的示例。

备注：当我们添加量词时，我们让 Z3 的问题变得更加困难。它可能会返回`unknown`包含量词的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-29T15:08:54.940

显然，我无法发表评论，所以我必须添加另一个答案。“忽略”某些变量的过程通常称为“投影”或“遗忘”。在超出命题逻辑的上下文中我不熟悉它，但如果直接存在量化是可能的（Leo 描述的），它在概念上是最简单的方法。

# php - 在 php 字符串中使用图像时出错

> ID：14071871
> 
> 赞同：0
> 
> 时间：2012-12-28T15:33:31.230
> 
> 标签：php

你好，我是 php 的新手，我在谷歌上遇到了一个简单的 php 错误。但无法找出确切的关键字

```
 <?php
 $vtext="<img alt="" src="/wp-content/themes/9GAG/images/smileynearvote.JPG" style="width: 15px; height: 17px; " />";
 ?> 
```

这就是我所说的

```
 <?php echo $vtext ?> 
```

但是当我使用它时，我得到一个内部服务器错误

我做了谷歌只发现如何用php创建图像

但没有找到如何使用它字符串

我的 cms 是 wordpress

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T15:35:17.207

您需要转义`"`（双引号）或将整个字符串括在`'`单引号中：

```
 $vtext = '<img alt="" src="/wp-content/themes/9GAG/images/smileynearvote.JPG" style="width: 15px; height: 17px; " />'; 
```

我鼓励您阅读有关[PHP 中字符串的](http://php.net/manual/en/language.types.string.php)更多信息。

**注意：**这可能不是唯一的错误。当询问错误时，您应该始终发布完整的错误消息以及违规行及其上方的行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T15:35:25.637

你必须`"`在你的字符串中转义

```
$vtext="<img alt=\"\" src=\"/wp-content/themes/9GAG/images/smileynearvote.JPG\" style=\"width: 15px; height: 17px; \" />"; 
```

阅读更多[http://php.net/manual/en/language.types.string.php#language.types.string.syntax.double](http://php.net/manual/en/language.types.string.php#language.types.string.syntax.double)

# html - CakePHP 从数据库中回显 HTML

> ID：14071872
> 
> 赞同：0
> 
> 时间：2012-12-28T15:33:31.707
> 
> 标签：html, cakephp, echo

我一直在尝试将用户（使用 TinyMCE）已经创建的 html 回显到应用程序的另一个页面中。我一直遇到的问题是标签被回显到它们的 HTML 等效项中（例如`&gt;`，而不是`<`），因此它们显示在页面上而不是影响标记。

如何让 CakePHP 将内容显示为 HTML 而不仅仅是回显它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T17:41:02.840

尝试使用[html_entity_decode](http://php.net/manual/en/function.html-entity-decode.php)。

```
echo html_entity_decode($theirHTML); 
```

# objective-c - 重用 CGContext 导致奇怪的性能损失

> ID：14071873
> 
> 赞同：17
> 
> 时间：2012-12-28T15:33:32.077
> 
> 标签：objective-c, cocoa, core-graphics, cgcontext

我的课是在屏幕外渲染图像。我认为重复使用`CGContext`而不是为每张图像一次又一次地创建相同的上下文将是一件好事。我设置了一个成员变量，所以如果nil 像这样`_imageContext`，我只需要创建一个新的上下文：`_imageContext`

```
if(!_imageContext)
    _imageContext = [self contextOfSize:imageSize]; 
```

代替：

```
CGContextRef imageContext = [self contextOfSize:imageSize]; 
```

当然我不再发布`CGContext`了。

这些是我所做的唯一更改，结果表明重用上下文将渲染从大约 10 毫秒减慢到 60 毫秒。我错过了什么吗？在再次绘制之前，我是否必须清除上下文或其他内容？还是为每个图像重新创建上下文的正确方法？

**编辑**

发现了最奇怪的联系..

当我在寻找应用程序开始渲染图像时应用程序的内存异常增加的原因时，我发现问题在于我将渲染图像设置为`NSImageView`.

```
imageView.image = nil;
imageView.image = [[NSImage alloc] initWithCGImage:_imageRef size:size]; 
```

看起来 ARC 没有发布以前的`NSImage`. 避免这种情况的第一种方法是将新图像绘制到旧图像中。

```
[imageView.image lockFocus];
[[[NSImage alloc] initWithCGImage:_imageRef size:size] drawInRect:NSMakeRect(0, 0, size.width, size.height) fromRect:NSZeroRect operation:NSCompositeSourceOver fraction:1.0];
[imageView.image unlockFocus];
[imageView setNeedsDisplay]; 
```

内存问题消失了，`CGContext`-reuse 问题发生了什么？不重用上下文现在需要 20 毫秒而不是 10 毫秒 - 当然，绘制到图像中比仅仅设置它需要更长的时间。重用上下文也需要 20 毫秒而不是 60 毫秒。但为什么？我看不出可能有任何联系，但我可以通过设置`NSImageView`' 图像而不是绘制它来重现重用需要更多时间的旧状态。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-02T15:58:37.173

我对此进行了调查，我观察到同样的放缓。查看设置为采样内核调用以及用户态调用的 Instruments 显示了罪魁祸首。@RyanArtecona 的评论是正确的。我在两次测试运行中将 Instruments 集中在最底层的用户态调用`CGSColorMaskCopyARGB8888_sse`上（一个重用上下文，另一个每次都创建一个新上下文），然后反转生成的调用树。在不重用上下文的情况下，我看到最重的内核跟踪是：

```
Running Time    Self            Symbol Name
668.0ms   32.3% 668.0           __bzero
668.0ms   32.3% 0.0              vm_fault
668.0ms   32.3% 0.0               user_trap
668.0ms   32.3% 0.0                CGSColorMaskCopyARGB8888_sse 
```

这是内核将由于`CGSColorMaskCopyARGB8888_sse`访问它们而出错的内存页面清零。这意味着 CGContext 将 VM 页面映射到位图上下文，但内核实际上不会执行与该操作相关的工作，直到有人实际访问该内存。实际映射/故障发生在首次访问时。

现在让我们看看重用上下文时最重的内核跟踪：

```
Running Time            Self            Symbol Name
1327.0ms   35.0%        1327.0          bcopy
1327.0ms   35.0%        0.0              user_trap
1327.0ms   35.0%        0.0               CGSColorMaskCopyARGB8888_sse 
```

这是内核复制页面。我的钱将用于提供@RyanArtecona 在他的评论中谈到的行为的底层写时复制机制：

> 在 CGBitmapContextCreateImage 的 Apple 文档中，它说在原始上下文上完成更多绘图之前不会发生实际的位复制操作。

在我用来测试的人为案例中，非重用案例的执行时间为 3392 毫秒，而重用案例的执行时间为 4693 毫秒（明显更慢）。仅考虑每种情况下最重的单个跟踪，内核跟踪表明我们在第一次访问时花费了 668.0 毫秒零填充新页面，并且在映像获得引用后的第一次写入时，我们花费了 1327.0 毫秒写入写时复制页面到那些页面。这是 659 毫秒的差异。仅这一差异就占了两种情况之间差距的约 50%。

因此，稍微提炼一下，未重用的上下文更快，因为当您创建上下文时，它知道页面是空的，并且没有其他人引用这些页面来强制它们在您写入时被复制他们。当您重用上下文时，页面被其他人（您创建的图像）引用，并且必须在第一次写入时复制，以便在上下文状态发生变化时保留图像的状态。

您可以通过在调试器中单步执行时查看进程的虚拟内存映射来进一步探索这里发生了什么。`vmmap`是有用的工具。

实际上，您可能应该每次都创建一个新的 CGContext 。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-02T20:32:54.940

为了补充@ipmcc 出色而彻底的答案，这里是一个指导性概述。

在[Apple 文档`CGBitmapContextCreateImage`](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CGBitmapContext/Reference/reference.html)中指出：

> 此函数返回的`CGImage`对象是通过复制操作创建的。在某些情况下，复制操作实际上遵循写时复制语义，因此位的实际物理复制仅在位图图形上下文中的基础数据被修改时发生。

因此，当调用此函数时，可能不会立即复制图像的底层位，而是可能会在下一次修改位图上下文时等待复制。这种位复制可能很昂贵（取决于上下文的大小和色彩空间），并且可能会在 Instruments 配置文件中伪装成`CGContext...`接下来在上下文中调用的任何绘图函数的一部分（当位被强制复制时）。这可能是`CGContextDrawImage`.k发生的事情

**但是**，文档继续说：

> 因此，您可能希望使用生成的图像并将其释放，然后再对位图图形上下文执行其他绘图。这样，您可以避免数据的实际物理副本。

这意味着，如果在您需要在上下文中进行更多绘图时，您将*完成*使用内存中创建的图像（即它已保存到磁盘、通过网络发送等），则图像将永远不需要完全被物理复制！

### TL;博士

如果在某些时候您需要`CGImage`从位图上下文中拉出 a ，***并且***`UIImageView`在您在上下文中进行更多绘图之前，您不需要保留对它的任何引用（包括将其设置为的图像），那么它是使用 . 可能是个好主意`CGBitmapContextCreateImage`。如果没有，您的图像将在某个时候被物理复制，这可能需要一段时间，并且每次都使用新的上下文可能会更好。

# c# - 您应该使用成员变量还是属性 getter/setter？

> ID：14071874
> 
> 赞同：0
> 
> 时间：2012-12-28T15:33:34.953
> 
> 标签：c#, properties, member-variables

> **可能重复：**
> [C# 中的字段和属性有什么区别？](https://stackoverflow.com/questions/295104/what-is-the-difference-between-a-field-and-a-property-in-c)

我经常需要在我的类/子类层次结构中创建受保护的变量。但是，我不断看到其他使用简单的 get/set 属性而不是变量的实现。

由于没有需要在 getter 或 setter 中执行的代码，并且它们的范围始终受到保护，所以有区别吗？

```
protected int foo1;
// vs
protected int foo2{ get; set; } 
```

我知道前者的优点是您可以直接用一个值对其进行初始化，但我想知道是否还有其他需要注意的事情/限制。

注意：*永远不会*有 getter/setter 中有代码的情况。这些只是内部计算指标的占位符，性能至关重要（甚至到毫秒级），这让我认为第一个更好，因为它完全绕过了 getter/setter。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T15:35:40.887

不同之处在于，如果稍后您需要向 getter/setter 方法添加一些逻辑，则调用代码不会中断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T15:40:42.103

我对受保护的成员使用 getter 和 setter，除非它是只读的，在这种情况下 a`protected readonly`就可以了。老实说，除非有人使用反射来迭代属性，否则这并不重要——你总是可以将一个切换到另一个，它会编译得很好。

实际上，仔细想想，我通常只使用方法，因为我通常想要继承的是基本行为，而不是显式的基本状态。

老实说，拥有大量受保护的属性是一种代码味道，因为它在某种程度上破坏了封装。

# c# - 如何将 listBox1.SelectedIndex 设置为 0 仅对部分代码生效？

> ID：14071876
> 
> 赞同：0
> 
> 时间：2012-12-28T15:33:41.047
> 
> 标签：c#, winforms

这是代码：

```
private void Lightnings_Mode_Load(object sender, EventArgs e)
        {
            this.Size = new Size(416, 506);
            this.Location = new Point(23, 258);
            listBoxIndexs();
            this.listBox1.SelectedIndex = 0; // This will make the listBox when showing it first time first item to be already selected !!!!!!
        }

        private void listBoxIndexs()
        {
            for (int i = 0; i < Form1.lightningsRegions.Count; i++)
            {

                    listBox1.Items.Add(Form1.lightningsRegions[i]);

            }
        }

        private void listBox1_SelectedIndexChanged(object sender, System.EventArgs e)
        {
            item = listBox1.SelectedItem.ToString();
            this.f1.PlayLightnings();
            f1.pdftoolsmenu();
            if (item != null && !pdf1.Lightnings.Contains(item.ToString()))
            {
                pdf1.Lightnings.Add(item.ToString());             
            }
        } 
```

我在 Form1 的两个地方使用了变量 item。一次提取字符串并播放里面的数字，一次将项目添加到 List Lightnings。

在第一次播放我想要的数字时：

```
this.listBox1.SelectedIndex = 0; 
```

因为一旦我单击一个按钮并显示/打开列表框，我就希望能够播放第一个项目。

在我将项目添加到闪电列表的第二个地方，我希望它只有在我首先单击任何项​​目时才会添加该项目。因为我做了：

```
this.listBox1.SelectedIndex = 0; 
```

一旦我显示/打开listBox，它将自动将项目添加到Lightnings 我需要将其添加到列表中，只有当我首先单击一个项目时，另一方面我也希望被选中index = 0，因为我希望它被选中所以我可以玩。

那么如何区分 SelectedIndex = 0 用于播放和将项目添加到列表中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T15:59:34.610

如果我理解正确，您可以简单地添加一个标志。

```
bool allowItemAdding;

private void Lightnings_Mode_Load(object sender, EventArgs e)
{
    allowItemAdding = false; //setting false here because *sometimes* Load event is called multiple times.

    this.Size = new Size(416, 506);
    this.Location = new Point(23, 258);
    listBoxIndexs();
    this.listBox1.SelectedIndex = 0;  
    allowItemAdding = true; //set flag to true after selecting the index initially
}

private void listBox1_SelectedIndexChanged(object sender, System.EventArgs e)
{          
     item = listBox1.SelectedItem.ToString();
     this.f1.PlayLightnings();
     f1.pdftoolsmenu();
     if (allowItemAdding)
     {
         if (item != null && !pdf1.Lightnings.Contains(item.ToString()))
         {
             pdf1.Lightnings.Add(item.ToString());             
         }
     }
} 
```

然后，该标志将保持为真，直到您明确将其更改为假，因此您可以控制何时应添加项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T17:27:14.563

使用 _SelectionChangeCommitted 而不是 listBox1_SelectedIndexChanged

# javascript - 函数在某些页面中返回未定义

> ID：14071878
> 
> 赞同：0
> 
> 时间：2012-12-28T15:33:53.820
> 
> 标签：javascript, jquery

我异步加载一个javascript文件，该文件包含插件默认值中定义的这一行。它在某些页面中返回正确的返回值，而在其他页面中，同一文件返回“未定义”值。任何指针？

```
login: '<p>Log in with your '+ fnc(code).name +' account</p>' 
```

在同一个文件底部的某个地方，我定义了函数：

```
 function fnc(s){
      if(s =='' || s == 'a'){
        this.name = 'name1';
        this.value = 'value1';
      }else if(s == 'b'){
        this.name = 'name2';
        this.value = 'value2';
      }else{
        this.name = 'name1';
        this.value = 'value1';
       }
      return this;
    } 
```

出于某种原因，该函数返回“未定义”

更新：“代码”是一个存在于其他文件中的全局变量，取决于该变量的值，我想从函数返回不同的值

UPDATE2：我想从函数返回多个值，更新代码以反映这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T15:36:39.483

该函数中的值将是对或`this`的引用，具体取决于“严格模式”是否有效。`window``undefined`

这样写函数真的没有多大意义。似乎应该只是：

```
function fnc(s) {
  return s == '' || s == 'a' ? "name1" : s == "b" ? "name2" : null;
} 
```

然后，您只需将其称为`fnc(code)`不需要“名称”属性即可。正如其他人也指出的那样，当“代码”不是空字符串、“a”或“b”时，您不会做出规定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T15:36:55.893

您是否将值传递给 fnc，而不是 ''、'a' 或 'b'，因为它将返回 undefined

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-28T15:37:11.433

`this`可以参考文档窗口，除非你写一个对象，否则不要使用`this`

```
function fnc(s){
    var rc = '';    
    if(s =='' || s == 'a'){
        rc = 'name1';
    } else if (s == 'b'){
        rc = 'name2';
    }
    return rc;
} 
```

# java - java.rmi.UnmarshalException：解组参数错误；嵌套异常是：java.lang.ClassNotFoundException: ServicesTableau

> ID：14071885
> 
> 赞同：13
> 
> 时间：2012-12-28T15:34:12.120
> 
> 标签：java, rmi

我需要您在 JAVA RMI 方面的帮助，我开发了一个用于对表进行排序的示例程序。但我得到了这个例外：

```
Erreur RemoteException occurred in server thread; nested exception is: 
    java.rmi.UnmarshalException: error unmarshalling arguments; nested exception is:
    java.lang.ClassNotFoundException: ServicesTableau 
```

这是我的服务器源代码：

```
public class Serveur {
    public static void main(String args[]) {

        try {

            System.out.println("Server start ...");
            ServicesTableauImpl od = new ServicesTableauImpl();
            String url = "rmi://" + args[0] + "/ServicesTableauImpl";
            System.out.println("Passe");
            Naming.rebind(url, od);
            System.out.println("Attente d'invocations de client / CTRL-C pour stopper");
        } catch (Exception e) {
            System.out.println("Erreur " + e.getMessage());
        }
    /*
    catch(java.net.MalformatedURLException e){
    System.out.println("Mauvais nom de serveur");
    System.exit(1);
    }
    catch(RemoteException e){
    System.out.println("Pas de Rmiregistry");
    System.exit(1);
    }
    */
    }
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-28T23:58:04.193

该类在 RMI 注册表的 CLASSPATH 中不可用。修复它的最简单方法是在同一个 JVM 中启动 Registry，通过`LocateRegistry.createRegistry().`将结果存储在静态字段中。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-02-21T12:07:10.697

这发生在我身上是因为我没有`rmiregistry`在与服务器相同的目录中运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-08T08:46:00.867

我花了几个小时成功启动了 Orcale 的简单示例表单！

希望能帮到你

首先，我在 Windows 上运行程序

[我完全从这里](https://docs.oracle.com/javase/8/docs/technotes/guides/rmi/hello/hello-world.html)复制代码

但我删除了包并将三个 .class 文件放在一起以说服

如果您对此不熟悉，我希望您也最好这样做

因为当包裹进来时，问题会更复杂

需要做三个步骤：

1.启动rmiregistry

```
start rmiregistry -J-Djava.class.path=./ 
```

它用于“远程接口定义”

以便 rmiregistry 可以找到该类

然后解决 ClassNotFoundException

2.运行服务器

```
start java Server 
```

然后你可以看到输出：

服务器就绪

3.运行客户端

```
java Client 
```

输出：

回应：你好，世界！

然后说说如何处理包

通常是Server.class和interface.class---“远程接口定义”

应该在同一个包中

并且您需要知道如何使用包运行 .class

```
java {packagename}.Server 
```

类路径默认为“./”

和包声明将有助于找到 Server.class 所需的 interface.class

所以我们不需要单独设置-cp

顺便说一句，如果你尝试设置真正的类路径，你会得到错误

至于“启动rmiregistry”

它没有默认的类路径

所以我们需要设置它

它应该与类路径的默认值“./”相同

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-02-14T15:14:37.503

在某些情况下，您需要将 rmi 客户端代码（接口和主代码）移动到默认包。在服务器端重复它。它可以解决您的问题（在 rmi 中使用包装并不那么明显）。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2021-03-10T16:26:47.737

答案是基于 IDE 的项目。

您需要从 build 文件夹中“**启动 rmiregistry ”。**

例如：在**Intellij**

1.  **在“目标 -> 类**”文件夹中打开终端
2.  运行“启动 rmiregistry”
3.  然后使用 intellij 运行您的服务器代码

对于 Eclipse 我希望它的**构建**文件夹

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2014-10-09T03:22:04.610

此错误是因为未编写安全管理器代码，因此无法加载该类。因此，请确保为安全管理器添加代码。 
如果编译器没有找到安全管理器，则创建一个新的。在 main 方法中添加代码。

```
if (System.getSecurityManager() == null) then
    System.setSecurityManager(new RMISecurityManager()) 
```

# c - USART 与 STM32f1xx 的通信

> ID：14071893
> 
> 赞同：6
> 
> 时间：2012-12-28T15:35:00.780
> 
> 标签：c, stm32

我尝试实现 USART 通信。所以我将我的 STM32f1 的 RX 与他的 TX 连接起来。我还为这种通信编写了一个程序。此代码由以下组件组成：

1.  碾压混凝土配置
2.  GPIO配置
3.  USART 配置
4.  发送和接收字符串
5.  发送字符串与接收字符串的比较
6.  测试通讯是否成功 => LED4 亮，否则 LED3 亮

问题是在所有情况下 LED3 都会亮起。这意味着数据传输失败。

使用我的 IDE（IAR 的嵌入式工作台）我编译这个程序代码：

```
/* Includes ------------------------------------------------------------------*/
#include "stm32f10x.h"
#include "stm32_eval.h"

/* Private typedef -----------------------------------------------------------*/
typedef enum { FAILED = 0, PASSED = !FAILED} TestStatus;

/* Private define ------------------------------------------------------------*/
#define USARTy                   USART1
#define USARTy_GPIO              GPIOA /* PORT name*/
#define USARTy_CLK               RCC_APB2Periph_USART1
#define USARTy_GPIO_CLK          RCC_APB2Periph_GPIOA
#define USARTy_RxPin             GPIO_Pin_10/* pin Rx name*/ 
#define USARTy_TxPin             GPIO_Pin_9 /* pin Tx name*/

#define USARTz                   USART2
#define USARTz_GPIO              GPIOA/* PORT name*/
#define USARTz_CLK               RCC_APB1Periph_USART2
#define USARTz_GPIO_CLK          RCC_APB2Periph_GPIOA
#define USARTz_RxPin             GPIO_Pin_3/* pin Rx name*/
#define USARTz_TxPin             GPIO_Pin_2/* pin Tx name*/

#define TxBufferSize   (countof(TxBuffer))

/* Private macro -------------------------------------------------------------*/
#define countof(a)   (sizeof(a) / sizeof(*(a)))

/* Private variables ---------------------------------------------------------*/
USART_InitTypeDef USART_InitStructure;
uint8_t TxBuffer[] = "Bufferrr";
uint8_t RxBuffer[8];
__IO uint8_t TxConteur = 0, RxConteur = 0;
volatile TestStatus TransferStatus = FAILED;  

/* Private function prototypes -----------------------------------------------*/
void RCC_Configuration(void);
void GPIO_Configuration(void);
TestStatus Buffercmp(uint8_t* pBuffer1, uint8_t* pBuffer2, uint16_t BufferLength);
__IO uint8_t index = 0;

GPIO_InitTypeDef GPIO_InitStructure;

int main(void)
{
  STM_EVAL_LEDInit(LED1);
  STM_EVAL_LEDInit(LED2);
  STM_EVAL_LEDInit(LED3);
  STM_EVAL_LEDInit(LED4);

/* System Clocks Configuration */
 RCC_Configuration();
/* Configure the GPIO ports */
GPIO_Configuration();

USART_InitStructure.USART_BaudRate = 230400 /*115200*/; 
  USART_InitStructure.USART_WordLength =USART_WordLength_8b ;
  USART_InitStructure.USART_StopBits = USART_StopBits_1;
  USART_InitStructure.USART_Parity = USART_Parity_No;
  USART_InitStructure.USART_HardwareFlowControl = USART_HardwareFlowControl_None;
  USART_InitStructure.USART_Mode = USART_Mode_Rx | USART_Mode_Tx;

  /* Configure USARTy */
  USART_Init(USART1,&USART_InitStructure);

  /* Enable the USARTy */
  USART_Cmd(USART1,ENABLE);

  while(TxConteur < TxBufferSize)
  {  
    /* Send one byte from USARTy to USARTz */
     USART_SendData(USARTy, TxBuffer[TxConteur++]);
    /* Loop until USARTy DR register is empty */ 
    while(USART_GetFlagStatus(USART1, USART_FLAG_TC) == RESET)
    {
    }
    /* Store the received byte in RxBuffer */
    RxBuffer[RxConteur++] = USART_ReceiveData(USARTy) & 0xFF;
  }  

  /* Check the received data with the send ones */
  TransferStatus = Buffercmp(TxBuffer, RxBuffer, TxBufferSize);
  /* TransferStatus = FAILED, if the data transmitted from USARTy and 
     received by USARTz are different */
  if (TransferStatus == FAILED)
  {
      STM_EVAL_LEDOn(LED3);

  }
  else 
  {

   STM_EVAL_LEDOn(LED4);
  }

  while (1)
  {
  }
}

void RCC_Configuration(void)
{    

  RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOA , ENABLE);

  RCC_APB2PeriphClockCmd(RCC_APB2Periph_USART1 , ENABLE);
   RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOC , ENABLE);
}

void GPIO_Configuration(void)
{
  GPIO_InitTypeDef GPIO_InitStructure1,GPIO_InitStructure2;

  /* Configure USARTy Rx as input floating */
  GPIO_InitStructure1.GPIO_Pin =GPIO_Pin_10;
  GPIO_InitStructure1.GPIO_Speed = GPIO_Speed_50MHz;
  GPIO_InitStructure1.GPIO_Mode = GPIO_Mode_IN_FLOATING;
  GPIO_Init(GPIOA, &GPIO_InitStructure1);

  /* Configure USARTy Tx as alternate function push-pull */
  GPIO_InitStructure2.GPIO_Pin =GPIO_Pin_9;
  GPIO_InitStructure2.GPIO_Speed = GPIO_Speed_50MHz;
  GPIO_InitStructure2.GPIO_Mode = GPIO_Mode_AF_PP;
  GPIO_Init(GPIOA, &GPIO_InitStructure2);
  /* Configure USARTz Tx as alternate function push-pull */

}

TestStatus Buffercmp(uint8_t* pBuffer1, uint8_t* pBuffer2, uint16_t BufferLength)
{
  while(BufferLength--)
  {
    if(*pBuffer1 != *pBuffer2)
    {
      return FAILED;
    }

    pBuffer1++;
    pBuffer2++;
  }

  return PASSED;  
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-26T12:43:16.667

就像 Hans Passant 在评论中解释的那样，OP 正在测试标志`USART_FLAG_TC`（传输完成）而不是标志`USART_FLAG_RXNE`（RX 缓冲区非空）。

# php - PHP：在粉丝页面墙上上传照片（用于cronjob）

> ID：14071900
> 
> 赞同：1
> 
> 时间：2012-12-28T15:35:19.123
> 
> 标签：php, facebook, facebook-graph-api

我需要以这种方式使用 php cronjob 将照片上传到粉丝页面墙上。

**[http://i48.tinypic.com/kcgwo5.jpg](http://i48.tinypic.com/kcgwo5.jpg)**

我拥有具有权限的令牌并尝试了多种方法但均未成功。

**测试1.php：**

```
$page_access_token = 'accesstoken';
$page_id = 'idofmyfanpage';
$data['picture'] = 'urlofimage';
$data['access_token'] = $page_access_token;
$post_url = 'https://graph.facebook.com/'.$page_id.'/feed';

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $post_url);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$return = curl_exec($ch);
curl_close($ch);

echo $return; 
```

但是结果...

**[http://i46.tinypic.com/5l5hfq.png](http://i46.tinypic.com/5l5hfq.png)**

这个灰色的盒子...

我尝试了另一种方式。

**测试2.php：**

```
$page_access_token = 'accesstoken';
$page_id = 'idofmyfanpage';
$data['image'] = '@imagetoupload.jpg';
$data['access_token'] = $page_access_token;
$post_url = 'https://graph.facebook.com/'.$page_id.'/photos';

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $post_url);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$return = curl_exec($ch);
curl_close($ch);

echo $return; 
```

但是将照片上传到我的个人资料墙中。

我还尝试在粉丝页面时间线专辑中上传。

[http://graph.facebook.com/mypage/albums](http://graph.facebook.com/mypage/albums)

```
{
   "data": [
      {
         "id": "xxxxxxxxxxxxxxxxxxxxxxx",
         "from": {
            "category": "Community",
            "name": "xxxxxxxxxxxxxxx",
            "id": "xxxxxxxxxxxxxx"
         },
         "name": "Timeline Photos",
         "link": "http://www.facebook.com/album.php?fbid=xxxxxxxxxxxxxxxx&id=xxxxxxxxx&aid=xxxx",
         "cover_photo": "xxxxxxxxxxxxxx",
         "count": 1,
         "type": "wall",
         "created_time": "xxxxxxxxxxxxx",
         "updated_time": "xxxxxxxxxxxxx",
         "can_upload": false
      },
      {
         "id": "xxxxxxxxxxxxxxxxxx",
         "from": {
            "category": "Community",
            "name": "xxxxxxxxxxx",
            "id": "xxxxxxxxxxxxxxx"
         },
         "name": "Profile Pictures",
         "link": "http://www.facebook.com/album.php?fbid=xxxxxxxxxx&id=xxxxxxxxx&aid=xxxxxxx",
         "cover_photo": "xxxxxxxxxxxxxxx",
         "count": 1,
         "type": "profile",
         "created_time": "xxxxxxxxxxxxxxx",
         "updated_time": "xxxxxxxxxxxxxxx",
         "can_upload": false
      }
   ]
} 
```

**test3.php**

```
$page_access_token = 'accesstoken';
$page_id = 'idofmyfanpage';
$data['image'] = '@imagetoupload.jpg';
$data['access_token'] = $page_access_token;
$post_url = 'https://graph.facebook.com/idofalbum/photos';

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $post_url);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$return = curl_exec($ch);
curl_close($ch);

echo $return; 
```

结果：

```
 {"error":{"message":"(#120) Invalid album id","type":"OAuthException","code":120}} 
```

我怎么能？

PD：对不起我的英语不好。

# javascript - javascript中变量范围的混淆

> ID：14071911
> 
> 赞同：2
> 
> 时间：2012-12-28T15:36:23.850
> 
> 标签：javascript, jquery

我在 js 中有一个函数，它使用从服务器脚本中以 json 形式获取的值填充全局数组：

```
function populateValues(id) {
    var values=new Array();

    $.getJSON(
        '<?PHP echo base_url();?>admin/forums/getForumById/' + id ,
        function(data){
            $.each(data,function(k,v){
                values.push(v);
            });
            alert(values[1]);
        }
    );
} 
```

这可以正常工作并提醒所需的值。但是当我尝试在循环后提醒这个时，值会丢失并且我得到一个未定义的。情况如下：

```
function populateValues(id) {
    var values=new Array();

    $.getJSON(
        '<?PHP echo base_url();?>admin/forums/getForumById/' + id ,
        function(data){
            $.each(data,function(k,v){
                values.push(v);
            });
        }
    );
    alert(values[1]);
} 
```

是因为形成了一些封闭结构吗？还是我缺乏一些基本概念？只是想知道为什么即使我将数组声明为全局数组也不会提醒这些值。请阐明一些观点。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-28T15:38:16.833

问题不在于范围。

问题是您正在进行 AJAX 调用，然后在 AJAX 调用完成之前立即继续执行下一条语句。

因此，您`alert(values[1]);`在从 AJAX 调用填充数组之前。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-28T15:42:18.410

这将使用 AJAX 调用返回的 Promise 对象来修复它：

```
function populateValues(id)
{
    var values=new Array();

    $.getJSON('<?PHP echo base_url();?>admin/forums/getForumById/'+id,function(data){
        $.each(data,function(k,v) {
            values.push(v);
        });
    }).done(function() { alert(values[1]); });
} 
```

# ruby - lambda 中的参数数量错误

> ID：14071914
> 
> 赞同：0
> 
> 时间：2012-12-28T15:36:34.557
> 
> 标签：ruby, sinatra, rack

在我的 sinatra 应用程序中，我有以下代码

```
haml :"page123", locals:
      {
        items: (my_data.sort ->(item1, item2){ item2[:date] <=> item1[:date]}), 
      }, 
      layout: need_layout? 
```

我需要做的是按顺序对 my_data 进行`date`排序`descending`。但是，我在这里收到错误

```
wrong number of arguments(1 for 0) 
```

我做错什么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T15:49:59.827

`Enumerable#sort`不接受任何论据。您实际上是将`Lambda`对象作为方法的第一个也是唯一的参数传递`sort`。您可以做的是提供一个用于对集合进行排序的块。

`wrong number of arguments(1 for 0)`是说该方法被赋予了`1`参数和预期`0`。

试试这个：

```
my_data.sort{ |a, b| b[:date] <=> a[:date] } 
```

# gruntjs - grunt-init not recognised / added to path (windows)

> ID：14071915
> 
> 赞同：2
> 
> 时间：2012-12-28T15:36:35.260
> 
> 标签：gruntjs

I'm on Windows and installed the new grunt using: npm install -g grunt-cli npm install -g grunt-init

grunt-init is the issue here.

If I try to run "grunt-init" in the command console, it is not recognised. Also after restarting the PC it's a nogo. I checked the environment settings and grunt-init is indeed not included. In fact, when checking the node_modules directory (in "C:\Users\\AppData\Roaming\npm\node_modules") I see a directory "grunt-init", but there is no .cmd or other executable whatsoever.

Before I file a bug I wanted to ask here, because it seems that other Windows users have no issues with this..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T22:59:11.670

Apparently version 0.1.0, the version that will be installed by a regular `npm install -g grunt-init` is not added to the PATH, because it has no `bin` directory. If you install the lates version (currently 0.2.0rc3) it should work as expected. Therefor run:

```
npm install -g grunt-init@0.2.0rc3 
```

At least on Mac it works, but I think it works out on Windows too

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T20:31:50.747

FIRST make sure that you do:

```
npm uninstall -g grunt-init 
```

Double check the following folders to ensure that grunt-init is gone:

```
[%USERNAME%]\AppData\Roaming\npm
[%USERNAME%]\AppData\Roaming\npm\node_modules
[%USERNAME%]\AppData\Roaming\npm-cache 
```

After this is done, then as @marcello mentioned you should install current version of grunt-init (as of this writing):

```
npm install -g grunt-init@0.2.0rc3 
```

# sql - 如何计算两个日期之间的年龄/年数

> ID：14071919
> 
> 赞同：6
> 
> 时间：2012-12-28T15:36:58.890
> 
> 标签：sql, sql-server, sql-server-2008, tsql

> **可能重复：**
> [如何在 T-SQL 中用年、月和日计算年龄](https://stackoverflow.com/questions/57599/how-to-calculate-age-in-t-sql-with-years-months-and-days)

在我正在做的一个项目中，我需要计算一个人加入系统时的年龄；在互联网上查看后，我发现了各种方法可以做到这一点，但其中大多数在涉及闰年时都有轻微的问题。

下面的解决方案是我如何计算过去的年数/年龄。希望这对其他人有帮助

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-28T15:36:58.890

您需要将以下方法添加到数据库中：

```
CREATE FUNCTION [dbo].[fnCalAge] (@DiffFrom DATE, @DiffTo DATE) RETURNS INT
AS
BEGIN
    DECLARE @NumOfYears INT
    SET @NumOfYears = (SELECT 
                         DATEDIFF(YEAR, @DiffFrom, @DiffTo) + 
                         CASE 
                           WHEN MONTH(@DiffTo) < MONTH(@DiffFrom) THEN -1 
                           WHEN MONTH(@DiffTo) > MONTH(@DiffFrom) THEN 0 
                           ELSE 
                             CASE WHEN DAY(@DiffTo) < DAY(@DiffFrom) THEN -1 ELSE 0 END 
                         END)
    IF @NumOfYears < 0
    BEGIN
        SET @NumOfYears = 0;
    END

    RETURN @NumOfYears;
END 
```

然后在 SQL 查询中调用它，类似于以下内容：

```
SET DATEFORMAT dmy 

SELECT dbo.fnCalAge(CAST('20/06/1987' AS DATE), CAST('20/06/2013' AS DATE)) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-28T15:51:42.793

假设@bDate 是生日的日期时间，@today 是今天的日期，那么...

```
 Declare @bDay Date = '31 dec 2000'
 Declare @today Date = cast(getdate() as date)
 Select datediff(Year, @bDay, @today) - 
        case When datepart(dayofYear, @today) <
                  datepart(dayofYear, @bDay) Then 1 Else 0 End 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T21:02:48.720

用 DOB 代替hiredate 的年龄。将 sysdate 替换为您的日期，例如 to_date('28-DEC-2012') ：

```
SELECT empno, ename, hiredate, TRUNC(MONTHS_BETWEEN(sysdate, hiredate)/12)  years_of_service 
 FROM scott.emp
/ 
```

# android - 我需要帮助来实现 xml

> ID：14071922
> 
> 赞同：0
> 
> 时间：2012-12-28T15:37:04.510
> 
> 标签：android, animation, layout, menu, slider

我在网上找到了菜单滑块的工作代码。但是，在这段代码中，布局是在代码中生成的，有人可以帮我在 *. Xml? 对不起，我的英语不好。代码：`

```
private boolean Menu_Displayed=false;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    Display display = getWindowManager().getDefaultDisplay();
    final int width = display.getWidth();

    // menu:
    LinearLayout li_menu = new LinearLayout(this);
    li_menu.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));  
    li_menu.setOrientation(1);//1 is vertical
    li_menu.setBackgroundColor(Color.GREEN);

    Button btn1 = new Button(this);
    btn1.setText("button 1");
    btn1.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));  

    li_menu.addView(btn1);

    //body:
    final HorizontalScrollView hsv = new HorizontalScrollView(this){
        @Override
        // do not let hsv consume the click itself. Then the view under the hsv will also consume the click
        //so that the menu will be clicked
        //when menu is not showed up, let hsv be the only view to consume the click.
        //so that the menu will not be clicked
        public boolean onTouchEvent(MotionEvent ev) {
            if(Menu_Displayed){
                return false;
            }
            else{
                return true;
            }
        }
    };
    hsv.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));  
    hsv.setBackgroundColor(Color.TRANSPARENT);
    hsv.setHorizontalFadingEdgeEnabled(false);
    hsv.setVerticalFadingEdgeEnabled(false);

    final LinearLayout li_body = new LinearLayout(this);
    li_body.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.FILL_PARENT));  
    li_body.setOrientation(0);//0 is horizantal
    li_body.setBackgroundColor(Color.TRANSPARENT);

    hsv.addView(li_body);

    //body: place holder transparent
    TextView placeholder = new TextView(this);
    placeholder.setTextColor(Color.TRANSPARENT); 
    placeholder.setLayoutParams(new LayoutParams(width-100, LayoutParams.FILL_PARENT));  
    placeholder.setVisibility(View.INVISIBLE);
    li_body.addView(placeholder);

    //body: real content
    LinearLayout li_content = new LinearLayout(this);
    li_content.setLayoutParams(new LayoutParams(width, LayoutParams.FILL_PARENT));  
    li_content.setOrientation(1);//1 is vertical
    li_content.setBackgroundColor(Color.CYAN);

    TextView tv1 = new TextView(this);  
    tv1.setText("txt 1");  
    tv1.setTextSize(40);  
    tv1.setTextColor(Color.BLACK);  

    TextView tv2 = new TextView(this);  
    tv2.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));  
    tv2.setTextSize(50);  
    tv2.setText("txt 2");  
    tv2.setTextColor(Color.WHITE);  

    //use this button to scroll
    Button btn_showMenu = new Button(this);
    btn_showMenu.setText("Menu");
    btn_showMenu.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
    btn_showMenu.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            hsv.post(new Runnable() {

                @Override
                public void run() {
                    if(Menu_Displayed){
                        hsv.smoothScrollTo(width-100, 0);
                    }
                    else{
                        hsv.smoothScrollTo(0, 0);
                    }
                    Menu_Displayed = !Menu_Displayed;
                }
            });
        }
    });

    li_content.addView(tv1);
    li_content.addView(tv2);
    li_content.addView(btn_showMenu);

    li_body.addView(li_content);

    //add menu and body in to frame
    FrameLayout mainFrame = new FrameLayout(this);  
    mainFrame.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));  
    mainFrame.addView(li_menu);  
    mainFrame.addView(hsv);  

    //scroll to the body real content to block the menu
    hsv.post(new Runnable() {

        @Override
        public void run() {
            hsv.scrollBy(width-100, 0);             
        }
    });

    setContentView(mainFrame);         
} 
```

`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T16:04:44.573

这不是一个很好的 SlidingMenu 实现，你可以试试这个开源项目：[SideMenu](https://github.com/jfeinstein10/SlidingMenu) 在你的例子上实现菜单交换，正在计算屏幕宽度-100，宽度不能转换为 xml，基本视图将是这样的文件。

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#ff669900"
    android:orientation="vertical" >

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button 1" />

    <HorizontalScrollView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="@android:color/transparent"
        android:fadingEdge="none" >

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:background="@android:color/transparent"
            android:orientation="horizontal" >

            <TextView
                android:id="@+id/placeholder"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:paddingRight="100dp" />
        </LinearLayout>
    </HorizontalScrollView>

</LinearLayout> 
```

# android - 从选定艺术家的歌曲中创建播放列表

> ID：14071930
> 
> 赞同：0
> 
> 时间：2012-12-28T15:37:30.383
> 
> 标签：android, search, sd-card, playlist, audio-player, android-music-player

我正在处理一些接收艺术家列表的代码，并且需要搜索 SD 卡才能从指定艺术家的歌曲中创建播放列表。你们能给我一些关于如何完成这个的提示/例子吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T15:49:05.130

我会看看[MediaStore.Audio](http://developer.android.com/reference/android/provider/MediaStore.Audio.html)

# javascript - 将鼠标悬停在菜单按钮上时要移动的图标

> ID：14071932
> 
> 赞同：0
> 
> 时间：2012-12-28T15:37:36.090
> 
> 标签：javascript, jquery, html, css

在你阅读这篇文章之前，请打开这个网站，看看我想要做什么：

[https://www.kris-willis.com](https://www.kris-willis.com)

如您所见，菜单下方有一个红色箭头，而我想要实现的是...当我将鼠标悬停在菜单按钮上时，箭头会移动到我悬停在同一按钮上而无需重新加载页。

理想情况下，我希望箭头移回默认按钮。如果单击不同的菜单按钮，默认按钮也可以更改。

如果您知道任何指向示例等的链接...我将不胜感激！

感谢您的时间，

克里x

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T15:47:27.347

制作“按钮”锚。使用 css set 创建规则`:hover`以设置包含箭头的背景图像。

那里有很多 CSS 教程，[Nettuts](http://net.tutsplus.com)和[Webdesigntuts](http://webdesign.tutsplus.com)有很多导航文章。或者，如果您对模仿他人感到满意，请找到您喜欢的网站并挑选来源，直到您弄清楚他们是如何做到的。

请记住，完成您正在做的事情根本不需要 javascript。除非你想要一些动画，即使这样 CSS 可以处理大部分工作，我认为纯 CSS 是更好的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T16:08:38.003

你可以这样做：

使用 span 在 HTML 中的 nav/menu 下方添加 bg 箭头：

```
<ul class="nav">
    <li>
        <a href="#">Menu 1</a>
        <span class="arrow">&nbsp;&nbsp;</span>
    </li>
    <li>
        <a href="#">Menu 2</a>
        <span class="arrow">&nbsp;&nbsp;</span>
    </li>
</ul> 
```

CSS：

```
.nav {
    font-size: anypx;
    list-style: none outside none;
    margin: 0;
    padding: 0;
    position: relative;
}

.nav li {
    background: #whatev;
    display: block;
    float: left;
    height: anypx;
    line-height: anypx;
    padding: 0;
    text-align: center;
}

.nav li a {
    color: #any;
    display: block;
    padding: any;
    position: relative;
    text-decoration: none;
    width: auto;
}
.arrow {
    background: url("images/arrow.png") no-repeat scroll 0 9px transparent;
    display: none;
    height: anypx;
    text-indent: -9999px;
    width: whatevs;
    z-index: 9999;
} 
```

最后是使它工作的 JS/Jquery：

```
$(document).ready(function(){     
    Your_menu();
});

function Your_menu(){

    $(".nav li").hover(function(){
            $(this).find('.arrow').css({visibility: "visible",display: "none"}).show();
        },function(){
            $(this).find('.arrow').css({visibility: "hidden"});
    });

} 
```

这是一个显示此内容的网站:)

[http://www.drexelmedicine.org/](http://www.drexelmedicine.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T15:51:44.440

只需将箭头`margin-left`相对于`td` **[DEMO的左侧移动](http://jsbin.com/uyehuw/7/edit)**

```
$("#Arrow").css({"margin-left":$(this).position().left+($(this).width()/2)-2}); 
```

Tp 这样做将**[jQuery](http://jquery.com/)**库添加到页面的 head 部分

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script> 
```

将此代码添加到外部 js 文件中并将其添加到页面的 head 部分

```
$(function(){
  $("#MenuPosition").on("hover","td",function(){
    $("#Arrow").css({"margin-left":$(this).position().left+($(this).width()/2)-2});

  });

}); 
```

**编辑：**用于恢复箭头原始位置

```
$(function(){
  currentPos = $("#Arrow").css("margin-left");

  $("#MenuPosition").on("hover","td",function(){
    $("#Arrow").css({"margin-left":$(this).position().left});

  });

   $("#MenuPosition").on("mouseout","td",function(){

     $("#Arrow").css({"margin-left":currentPos});        
  });

}); 
```

**注意：**请查看计算部分并进行更正。

PS：不能纠正是因为它是我从办公室注销的时间；）。但我觉得你有逻辑去做

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-28T15:52:56.223

首先是你有一个错误的 DOCTYPE。

```
<!DOCTYPE html PUBLIC ""> 
```

这会导致您的页面以怪异模式加载。将其更改为

```
<!DOCTYPE html> 
```

对于 HTML5 或使用包括 FSI 和 FPI 在内的完整版本。

其次是您正在使用`<table>`导航。没有什么严重的问题，但人们倾向于使用`ul`

对于`:hover`，您可以简单地使用

```
#MenuPosition table tbody tr td:hover
{
background-image: url("/images/Arrow.jpg");
} 
```

您可能必须使用`paddings`或`margins`使用`display: block`or`display: inline-block`来正确定位箭头。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-28T16:37:18.053

**纯 CSS 解决方案**

检查这个答案。

[有没有办法将鼠标悬停在一个元素上并影响另一个元素？](https://stackoverflow.com/questions/6867257/is-there-any-way-to-hover-over-one-element-and-effect-a-different-element)

所以它可能是：

```
#thething {
    margin: 0;
}
.classone:hover + #thething {
    margin-top: 10px;
    margin-left: 10px;
} 
```

如果它们是父 div 中的相邻兄弟姐妹。

# php - PHP不会执行

> ID：14071936
> 
> 赞同：0
> 
> 时间：2012-12-28T15:37:59.057
> 
> 标签：php, apache

当我在目录 /public/ 我的源代码中创建文件 index.php

```
<html>
<meta name="ROBOTS" content="NOARCHIVE">
<head><NOFOLLOW><noindex>
<?php echo '123' ?>
</NOINDEX></NOFOLLOW>
</head>
<body>
</body>
</html> 
```

从浏览器看起来像

```
<html>
<meta name="ROBOTS" content="NOARCHIVE">
<head><NOFOLLOW><noindex>
123
</NOINDEX></NOFOLLOW>
</head>
<body>
</body>
</html> 
```

但是如果我创建文件夹（无论在哪里）并在源代码变为时将文件 index.php 放入其中

```
<html>
<meta name="ROBOTS" content="NOARCHIVE">
<head><NOFOLLOW><noindex> 
```

如果我在这个文件中进行一些更正，源代码保持不变，在浏览器视图中没有改变。

为什么我不能在我想要的地方创建和运行 php 代码，除了 /public/ 文件夹？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T00:38:02.960

这是您在两个 index.php 文件中使用的确切代码吗？

如果是这样，它们都应该失败，因为存在语法错误。您缺少`;`php 代码末尾的 。

您发布：`<?php echo '123' ?>`
应该是： `<?php echo '123'; ?>`

如果不是这样，您可以将以下内容添加到 index.php 的顶部，以确保错误显示在页面上：

```
<?php
error_reporting(E_ALL);
ini_set('display_errors', '1');
?> 
```

如果之后出现任何错误，请在此处发布。

# facebook - 脸书的 Chrome 扩展

> ID：14071939
> 
> 赞同：0
> 
> 时间：2012-12-28T15:38:09.173
> 
> 标签：facebook, google-chrome-extension

我正在尝试为 Facebook 构建一个 google chrome 扩展。

我应该能够访问 facebook api，而无需实际要求用户为我的扩展程序明确地进行身份验证。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T17:00:50.713

答案是肯定的和否定的。

**是的：**您可以通过读取窗口文档的内容脚本“读取”他们在页面中加载的内容。一个很好的例子可能如下。

在 manifest.json

```
"content_scripts" : [{
  "matches" : ["http://www.facebook.com/*"],    
  "js" : ["js/vendor/jquery.min.js", "js/content.js"],
  "run_at" : "document_end"
}] 
```

在 js/content.js

```
var document = jQuery(window.document);
var posts = document.find("div[role='article']"); 
```

然后您可以根据用户的需要阅读尽可能多的内容，或者页面加载的内容。您可以使用某种超时机制来检查页面中是否有新内容，或者是否将新元素添加到 dom，但最终用户必须向下滚动才能加载信息，或者您可以通过 Javascript 破解它。

**不（以及为什么不应该）：**我不是法律人，但我已经开发了足够长的时间，知道只要平台为您提供 API，您*就应该使用它*。为什么？因为他们可以控制您正在阅读的信息，并且他们可以通过这种方式保护他们的用户信息。

这实际上是一条微妙的线，因为有时您无需使用网站 API 就可以增强网站体验（有时他们甚至没有）。如果您实际上正在改善用户体验，那么这甚至会受到赞赏。在这种情况下认为，我不会这样做，因为：

*   这是**Facebook**，我很确定他们在某些服务条款中有一行描述了我刚刚写的关于通过外部脚本读取用户信息的内容。
*   抓取您的数据的外部应用程序从第一天起就**名声不佳（自动发帖、诈骗、报废信息等）**
*   Facebook API 现在基于**Oauth2**，其基础是为了保护用户；通过令牌拒绝，用户可以随时停止应用程序读取他/她的数据，而您的应用程序没有这种机制（可能是卸载，但您可能已经存储了他/她的数据）
*   **请求许可并不难**，你会为自己省去很多麻烦。

如何以*正确*的方式做到这一点？请求应用程序 ID，并在后台页面中加载 facebook SDK。提示用户权限（是的，正确的方法包括向用户询问您可以阅读的内容的权限，以便如果您行为不端，他/她可以拒绝您访问它们），然后用它查询 Facebook API。

想想看。您可以创建一个扩展程序，在用户登录他/她的银行时读取用户页面的内容。或者他的邮箱。实际上，用户在浏览器窗口中看到的任何东西都可以通过扩展来检索。如果无法控制从用户那里获取哪些信息，这对用户来说是**极其危险的！**

先征求许可。不要成为那个人；）

# jquery - Raphael - 可以使用类使用 jquery 更改文本颜色但不能更改文本？

> ID：14071940
> 
> 赞同：0
> 
> 时间：2012-12-28T15:38:14.150
> 
> 标签：jquery, svg

使用以下 Raphael SVG 代码，我可以更改文本的颜色，但不能更改文本本身：

```
 function create_Star_Icons(){

        var container = Raphael(feedback_Icons, 500, 70);
        var star_Icons = container.set();

        star_Icons.push(
            container.text(60,32,"Punctuality"),
            container.path("M28.631,12.359c-0.268-0.826-1.036-1.382-1.903-1.382h-0.015l-7.15,0.056l-2.155-6.816c-0.262-0.831-1.035-1.397-1.906-1.397s-1.645,0.566-1.906,1.397l-2.157,6.816l-7.15-0.056H4.273c-0.868,0-1.636,0.556-1.904,1.382c-0.27,0.831,0.029,1.737,0.74,2.246l5.815,4.158l-2.26,6.783c-0.276,0.828,0.017,1.739,0.723,2.25c0.351,0.256,0.763,0.384,1.175,0.384c0.418,0,0.834-0.132,1.189-0.392l5.751-4.247l5.751,4.247c0.354,0.26,0.771,0.392,1.189,0.392c0.412,0,0.826-0.128,1.177-0.384c0.704-0.513,0.997-1.424,0.721-2.25l-2.263-6.783l5.815-4.158C28.603,14.097,28.901,13.19,28.631,12.359zM19.712,17.996l2.729,8.184l-6.94-5.125L8.56,26.18l2.729-8.184l-7.019-5.018l8.627,0.066L15.5,4.82l2.603,8.225l8.627-0.066L19.712,17.996z"),
            container.text(17,18,"7"),
            container.text(210,32,"Intensity"),
            container.path("M28.631,12.359c-0.268-0.826-1.036-1.382-1.903-1.382h-0.015l-7.15,0.056l-2.155-6.816c-0.262-0.831-1.035-1.397-1.906-1.397s-1.645,0.566-1.906,1.397l-2.157,6.816l-7.15-0.056H4.273c-0.868,0-1.636,0.556-1.904,1.382c-0.27,0.831,0.029,1.737,0.74,2.246l5.815,4.158l-2.26,6.783c-0.276,0.828,0.017,1.739,0.723,2.25c0.351,0.256,0.763,0.384,1.175,0.384c0.418,0,0.834-0.132,1.189-0.392l5.751-4.247l5.751,4.247c0.354,0.26,0.771,0.392,1.189,0.392c0.412,0,0.826-0.128,1.177-0.384c0.704-0.513,0.997-1.424,0.721-2.25l-2.263-6.783l5.815-4.158C28.603,14.097,28.901,13.19,28.631,12.359zM19.712,17.996l2.729,8.184l-6.94-5.125L8.56,26.18l2.729-8.184l-7.019-5.018l8.627,0.066L15.5,4.82l2.603,8.225l8.627-0.066L19.712,17.996z"),
            container.text(17,18,"7"),
            container.text(380,32,"Enjoyment"),
            container.path("M28.631,12.359c-0.268-0.826-1.036-1.382-1.903-1.382h-0.015l-7.15,0.056l-2.155-6.816c-0.262-0.831-1.035-1.397-1.906-1.397s-1.645,0.566-1.906,1.397l-2.157,6.816l-7.15-0.056H4.273c-0.868,0-1.636,0.556-1.904,1.382c-0.27,0.831,0.029,1.737,0.74,2.246l5.815,4.158l-2.26,6.783c-0.276,0.828,0.017,1.739,0.723,2.25c0.351,0.256,0.763,0.384,1.175,0.384c0.418,0,0.834-0.132,1.189-0.392l5.751-4.247l5.751,4.247c0.354,0.26,0.771,0.392,1.189,0.392c0.412,0,0.826-0.128,1.177-0.384c0.704-0.513,0.997-1.424,0.721-2.25l-2.263-6.783l5.815-4.158C28.603,14.097,28.901,13.19,28.631,12.359zM19.712,17.996l2.729,8.184l-6.94-5.125L8.56,26.18l2.729-8.184l-7.019-5.018l8.627,0.066L15.5,4.82l2.603,8.225l8.627-0.066L19.712,17.996z"),
            container.text(17,18,"7")
        );

        // formatting

        star_Icons[0].attr({"font-family": "Calibri, Arial, sans-serif","font-size": 18,"font-weight":"bold",fill: "#808080"}); // label                
        star_Icons[1].attr({fill: "#b2b2b2", stroke: "none"});                                                                  // star
        star_Icons[2].attr({"font-family": "Arial Black, sans-serif","font-size": 12,"font-weight":"bold",fill: "#ff0000"});    // number               
        star_Icons[3].attr({"font-family": "Calibri, Arial, sans-serif","font-size": 18,"font-weight":"bold",fill: "#808080"}); // label
        star_Icons[4].attr({fill: "#b2b2b2", stroke: "none"});                                                                  // star
        star_Icons[5].attr({"font-family": "Arial Black, sans-serif","font-size": 12,"font-weight":"bold",fill: "#ff0000"});    // number
        star_Icons[6].attr({"font-family": "Calibri, Arial, sans-serif","font-size": 18,"font-weight":"bold",fill: "#808080"}); // label
        star_Icons[7].attr({fill: "#b2b2b2", stroke: "none"});                                                                  // star
        star_Icons[8].attr({"font-family": "Arial Black, sans-serif","font-size": 12,"font-weight":"bold",fill: "#ff0000"});    // number

        // positioning

        star_Icons[0].transform("t0,0");          // label
        star_Icons[1].transform("t120,20s1.75");  // star
        star_Icons[2].transform("t120,20s1.75");  // number
        star_Icons[3].transform("t0,0");          // label
        star_Icons[4].transform("t280,20s1.75");  // star
        star_Icons[5].transform("t280,20s1.75");  // number
        star_Icons[6].transform("t0,0");          // label
        star_Icons[7].transform("t440,20s1.75");  // star
        star_Icons[8].transform("t440,20s1.75");  // number

        // id's and classess

        star_Icons[1].node.setAttribute("class", "punctuality_Star");
        star_Icons[2].node.setAttribute("class", "punctuality_Num");                
        star_Icons[4].node.setAttribute("class", "intensity_Star"); 
        star_Icons[5].node.setAttribute("class", "intensity_Num");  
        star_Icons[7].node.setAttribute("class", "enjoyment_Star"); 
        star_Icons[8].node.setAttribute("class", "enjoyment_Num");  

    } // create_Star_Icons 
```

正在使用以下 jquery：

```
 $(".punctuality_Num").attr("fill","#00ffff");   
                $(".punctuality_Num").attr("text","1"); 
```

任何想法为什么这不会更新？想知道是不是因为它在一个集合中，这是否意味着需要以不同的方式访问文本元素。

**编辑 - 重要**

我忘了说在 Firefox 上的 HTML 查看器中看到的文本**确实**发生了变化。但是你看到的**并没有改变**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T17:05:10.867

你应该坚持使用 Raphäel。

例如，

*   您可以修改函数`create_Star_Icons`以返回数组`star_Icons`。

    ```
    function create_Star_Icons(){
      ...
      return star_Icons;
    } 
    ```

*   在代码中保存返回数组的引用。

    ```
    var star_Icons = create_Star_Icons(); 
    ```

*   使用它来修改元素。

    ```
    $("selector").click(function(){
      star_Icons[2].attr("text", "1");
    }); 
    ```

此外，您可以重构代码以使其更好地运行。

```
function create_Star_Icons(){
  var container = Raphael(feedback_Icons, 500, 70);
  var star_Icons = {};

  star_Icons.Punctuality = {
    label: container.text(60,32,"Punctuality"),
    star: container.path("..."),
    number: container.text(17,18,"7")
  };

  ...

  return star_Icons;
} 
```

```
var star_Icons = create_Star_Icons(); 
```

```
$("selector").click(function(){
  star_Icons.Punctuality.number.attr("text", "1");
}); 
```

[**请参阅此处运行的重构代码。**](http://jsfiddle.net/GmLX4/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T17:06:05.753

使用 Raphael 定义文本和使用 jQuery 来编辑 SVG 的属性听起来是两全其美……

使用 Raphael 设置文本非常简单：

```
star_Icons[2].attr("text",1); 
```

[**jsfiddle 示例**](http://jsfiddle.net/YDHU8/)

拉斐尔的文字毛茸茸的。特别是，它[在 Internet Explorer 中往往会发疯](https://stackoverflow.com/questions/6110037/raphaeljs-renders-all-text-as-italic-in-ie)。此外，许多浏览器不能很好地解释 SVG 文本 - 例如，它通常不可选择，不利于可访问性等。如果可能，最好将文本创建和控制为常规 div 并使用 jQuery 设置样式并排列它们加上你的拉斐尔元素。

并且 jQuery 的 SVG 支持不是很好。它最近才开始支持 SVG。然而，拉斐尔就是为此目的而设计的。

* * *

此外，值得记住的是，Raphael 不像 jQuery - 没有一种快速、简单的方法来查找您的 Raphael 对象。创建 Raphael 对象时，需要仔细归档，并且需要提前计划如何组织 Raphael 对象，以便在需要时可以获取它们。

在您的情况下，每个人都有一个名称，并且它们都是相关的，那么为什么不将它们组织成一个以名称为键的对象呢？有一个带有准时键、强度键等的对象……每个对象中都有文本、星号、标签键，然后循环遍历对象并将所有内容放入适当的集合中。然后，您可以通过名称更轻松地查找每个对象。

您需要确保该对象位于与它一起工作的所有对象都可以看到的范围内。[这是一个有类似问题的人的例子](https://stackoverflow.com/questions/13884682/raphaeljs-hide-shape-onmouseout/13885070#13885070)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T16:34:28.027

文本值存储在标签`<tspan dy="4.5">0</tspan>`内的单独`<text>`标签中

```
<text .... ><tspan dy="4.5">0</tspan></text> 
```

在 SO 和其他地方的各种帖子之后，建议的语法是

```
 $(".punctuality_Num").attr("text","1"); 
```

但这所做的只是将属性 text="1" 添加到标签中`<text>`，因此对标签中显示的值没有影响`<tspan>`。

```
 $(".punctuality_Num").text("1"); 
```

显然是破坏性的`<tspan>`，它确实会显示正确的值，但会破坏格式。

所以

```
 $(".punctuality_Num tspan").text("1"); 
```

更新显示的值并保留格式。

# php - 不同域/htaccess 转发上可用的 Cookie

> ID：14071943
> 
> 赞同：3
> 
> 时间：2012-12-28T15:38:27.147
> 
> 标签：php, .htaccess, cookies

我们正在运行一个在线门户网站，该门户网站可通过不同的域（例如 example.de、example.at、example.ch）以及它的变体（例如 example-ple.de）访问，并且所有国家/地区的付款都是通过安全完成的。 example.com，因此无法访问在 example.de 上设置的 secure.example.com 上的 cookie。

第一个问题（不直接引用 cookie）：
是否可以在不丢失引用信息的情况下将用户从 example.de 转发到 example.de？也许与.htaccess？

第二个问题：
每次用户被转发到另一个域名并重置 cookie 时，将所有 cookie 名称存储在配置文件中然后通过 GET 传递所有 cookie 是否“脏”？我只能想到一个解决方案来使 cookie 在不同的域上可用......或者有没有人有更好的解决方案？

此致，

弗雷迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T15:54:01.450

要回答您的第一个问题，假设您使用 apache2 作为 Web 服务器（您告诉过 .htaccess），我建议使用 mod_rewrite 将 url 重定向到不同的域。使用 mod_rewrite 时，您可以设置**cookie**

您还可以创建一个 php 脚本来转发到您的域并设置 cookie。它可能被称为 www.yourdomain.com/forward.php?target=at&....

# c# - 如何提高 HttpWebResponse 的性能？

> ID：14071945
> 
> 赞同：3
> 
> 时间：2012-12-28T15:38:42.373
> 
> 标签：c#, performance, https, httpwebrequest

我正在尝试构建一个从网站发送和接收响应的应用程序。

我在 Stack Overflow 上阅读的所有解决方案都没有解决我的问题，所以我认为我的代码可以使用优化。

我有以下线程：

```
void DomainThreadNamecheapStart()
{
    while (stop == false)
    {
        foreach (string FromDomainList in DomainList.Lines)
        {
            if (FromDomainList.Length > 1)
            {
                // I removed my api parameters from the string
                string namecheapapi = "https://api.namecheap.com/foo" + FromDomainList + "bar";

                HttpWebRequest request = (HttpWebRequest)WebRequest.Create(namecheapapi);
                request.Proxy = null;
                request.ServicePoint.Expect100Continue = false;

                HttpWebResponse response = (HttpWebResponse)request.GetResponse();
                StreamReader sr = new StreamReader(response.GetResponseStream());

                status.Text = FromDomainList + "\n" + sr.ReadToEnd();

                sr.Close();
            }
        }
    }
} 
```

单击按钮时调用此线程：

```
private void button2_Click(object sender, EventArgs e)
{
    stop = false;
    Thread DomainThread = new Thread(new ThreadStart(DomainThreadNamecheapStart));
    DomainThread.Start();
} 
```

使用上面的代码，我在 10 秒内只收到大约 12 个响应。当我尝试在 JavaScript 中或使用简单的 IFrame 发出相同的请求时，它的速度是原来的两倍多。浏览器不使用多个线程进行连接，它会等待一个线程完成，然后启动新的线程。

我尝试了设置`request.Proxy = null;`，但它的影响可以忽略不计。

我注意到它比 .`HTTPS`慢 2-3 倍`HTTP`。不幸的是，我必须使用`HTTPS`. 我能做些什么来让它更快吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T15:57:08.087

我敢打赌您指出的方面 - HTTPS 协议。

纯 HTTP 协议的客户端（浏览器）和服务器之间的迭代非常简单：询问信息，获取信息。如果为 1.0，则关闭连接；如果是 1.1，它可能会保持活动状态以供重用。（有关详细信息，请查看图 1。）

但是当你做一个 HTTPS 请求时，初始协议开销是相当大的（图 2）；但是，一旦完成初始协商，就会发生一些对称加密，不需要进一步的证书协商，从而加快数据传输速度。

我认为问题在于，如果您销毁 HTTPWebRequest 对象并创建一个新对象，则会再次进行完整的 HTTPS 交换，从而减慢您的迭代速度。（不过，HTTPS + HTTP 1.1 Keepalive 应该没问题。）

因此，建议：仅切换到 HTTP，或重用连接对象。

我希望它对你有用。=)

(1) HTTP协议握手和响应 ![HTTP 协议握手和响应](../Images/5f9c2722c3704e849b56c6ed26ee272c.png)

(2) 初始HTTPS协议握手 ![在此处输入图像描述](../Images/d9f5a38d76e4f8cc980a35dcb7125c49.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T15:49:26.300

尝试修改[System.Net.ServicePointManager.DefaultConnectionLimit](http://msdn.microsoft.com/en-us/library/system.net.servicepointmanager.defaultconnectionlimit.aspx)值（默认值为 2）。

其他[参考](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest%28v=vs.90%29.aspx)（**性能问题**部分）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-28T17:51:45.803

试试这些，它帮助我提高了性能，

```
 ServicePointManager.Expect100Continue = false;
        ServicePointManager.DefaultConnectionLimit = 200;
        ServicePointManager.MaxServicePointIdleTime = 2000;
        ServicePointManager.SetTcpKeepAlive(false, 0, 0); 
```

# mongodb - 精确搜索词查询不区分大小写

> ID：14071949
> 
> 赞同：2
> 
> 时间：2012-12-28T15:38:58.277
> 
> 标签：mongodb, mongodb-java

我正在尝试进行搜索确切关键字但不区分大小写的查询。

它工作正常，但问题是它将整个关键字搜索到包含我的搜索词的数据库中。

```
mongoTemplate.findOne(Query.query(Criteria.where("resourceID").regex(id, "i")), Resource.class); 
```

我需要像以下脚本一样制作，但在 java 中：

```
db.stuff.find( { foo: /^bar$/i } ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T21:05:56.350

资源资源 = mongoTemplateGoVacation.findOne(Query.query(Criteria.where("resourceID").regex("^"+id+"$", "i")), Resource.class);

# php - Symfony 1.4，学说：多个连接到一张表

> ID：14071955
> 
> 赞同：0
> 
> 时间：2012-12-28T15:39:46.443
> 
> 标签：php, symfony-1.4

方案：

```
User:
  options:
    collate: utf8_unicode_ci
    charset: utf8
  tableName: users
  columns:
    ID:
      type: integer(4)
      primary: true
      autoincrement: true
    USERNAME:
      type: string(255)
      notnull: true

Task:
  options:
    collate: utf8_unicode_ci
    charset: utf8
  tableName: tasks
  columns:
    ID:
      type: integer(4)
      primary: true
      autoincrement: true
    CREATED_ID:
      type: integer(4)
      notnull: true
    OWNER_ID:
      type: integer(4)
      notnull: true
    DESCRIPTION:
      type: text
      notnull: true
  relations:
    User:
      onDelete: CASCADE
      local: CREATED_ID
      foreign: ID
    User:
      onDelete: CASCADE
      local: OWNER_ID
      foreign: ID 
```

如您所见，Task.OWNER_ID 和 Task.CREATED_ID 指向 User.ID - 不过，在实际 SQL 表中，只有 OWNER_ID 显示为外键：

```
CREATE TABLE  `users` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `username` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

CREATE TABLE  `tasks` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `created_id` int(11) NOT NULL,
  `owner_id` int(11) NOT NULL,
  `description` text COLLATE utf8_unicode_ci NOT NULL,
  PRIMARY KEY (`id`),
  KEY `owner_id_idx` (`owner_id`),
  CONSTRAINT `tasks_owner_id_users_id` FOREIGN KEY (`owner_id`) REFERENCES `users` (`id`) ON DELETE CASCADE,
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; 
```

Symfony 不会丢弃任何错误。我是否不允许为表定义更多连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T16:02:45.770

你的计划是......不是真的正确。试试这个

```
 relations:
    UserCreator:
      class: User
      onDelete: CASCADE
      local: CREATED_ID
      foreign: ID
      foreignAlias: Tasks
    UserOwner:
      class: User
      onDelete: CASCADE
      local: OWNER_ID
      foreign: ID
      foreignAlias: Tasks 
```

# objective-c - cococs2d y 轴上的所有内容都相差 20px

> ID：14071959
> 
> 赞同：0
> 
> 时间：2012-12-28T15:40:20.753
> 
> 标签：objective-c, cocos2d-iphone

不知何故，y 轴上的所有东西都低约 20px。
我有精灵在屏幕上移动，但仅限于屏幕宽度和高度，这个精灵永远不会超过大约 460 像素并且低于底部。我的代码没有任何问题。我插入 Sprite 来检查屏幕顶部：

```
CGSize screenSize = [CCDirector sharedDirector].winSize;
sprite.position = ccp(screenSize.width/2, screenSize.height); 
```

这个精灵正好在宽度的中间，但距离顶部大约 20 像素。

此外，当我在 touchLocation 上插入精灵时，精灵也关闭了。
游戏是纵向视图。
有什么我应该设置的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T20:50:56.610

您应该在以下位置将状态栏设置为隐藏： 1\. 最初隐藏在应用 plist 中 2\. 如果您使用任何 xib，请确保它没有状态栏。

如果这 2 没有帮助 - 尝试在代码中设置它 - 查看 uiapplication 文档，特别是 setStatusBarHidden:withAnimation:

# list - Flex 4 List 组件 itemRendererFunction 数据添加序列

> ID：14071964
> 
> 赞同：0
> 
> 时间：2012-12-28T15:40:46.040
> 
> 标签：list, flex4, itemrenderer

我有一个带有 itemRendererFunction 的列表，我正在通过不同的渲染器添加我的数据，但我的数据的添加顺序非常重要。但是当我运行我的应用程序时，我的数据顺序是随机的。我怎样才能使它的序列与我的 ArrayList(dataProvider) 中的一样？

我的列表：

```
<s:List id="calendarList" itemRendererFunction="myItemRendererFunction"
        width="500"
        verticalScrollPolicy="off" horizontalScrollPolicy="on">
    <s:layout>
        <s:HorizontalLayout/>
    </s:layout>
</s:List> 
```

我的渲染器功能：

```
private var eventItemRenderer:IFactory = new ClassFactory(EventItemRenderer);
private var noEventItemRenderer:IFactory = new ClassFactory(NoEventRenderer);

private function myItemRendererFunction(item:Object):IFactory
                {
                    var hasEvent:Boolean = (item.event);
                    trace(item.date, item.event)
                    if (hasEvent)
                    {
                        return eventItemRenderer;
                    }
                    else
                    {
                        return noEventItemRenderer;
                    }
                } 
```

# ruby-on-rails-3.2 - 为什么 carmen-rails 不默认保存状态？

> ID：14071970
> 
> 赞同：4
> 
> 时间：2012-12-28T15:41:19.933
> 
> 标签：ruby-on-rails-3.2, carmen

我正在使用 carmen-rails 进行状态下拉菜单。国家/地区更新时状态下拉列表会动态更新，但在编辑页面上，状态下拉列表不会默认为保存的状态值。任何人都可以帮忙吗？

仅供参考 - 我将保存的状态值作为本地参数 u

```
<div id="order_state_code_wrapper">
  <% parent_region ||= params[:parent_region] %>
  <% if parent_region.nil? %>
    <em>Please select a country above</em>
  <% else %>
    <% country = Carmen::Country.coded(parent_region) %>
    <% if country.nil? %>
       <em>Please select a country above</em>
    <% elsif country.subregions? %>
       <%= subregion_select(:user, :subregion_iso2, parent_region) %>
    <% else %>
       <%= text_field(:user, :subregion_iso2) %>
    <% end %>
  <% end %>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T21:49:28.780

我遇到了同样的问题并通过执行以下操作解决了它（[https://github.com/jim/carmen-rails/issues/12](https://github.com/jim/carmen-rails/issues/12)指出了正确的方向）。它还不是最佳的，但它可以完成工作。

```
<div id="shipping_tally_state_code_wrapper">
<div class="control-group carmen_state required">
  <label class="carmen_state_code required control-label" for="shipping_tally_state_code"><abbr title="required">*</abbr> Province</label>
    <div class="controls">
      <% parent_region ||= params[:parent_region] %>
      <% sub_region ||= params[:sub_region] %>
      <% country = Carmen::Country.coded(parent_region) %>
      <% if country.nil? %>
        <span class="help-inline display-id"><em>Please select a country above</em></span>
      <% elsif country.subregions? %>
      <%= subregion_select_tag('shipping_tally[state_code]', sub_region, country) %>
      <% else %>
      <%= text_field_tag('shipping_tally[state_code]', sub_region) %>
      <% end %>
    </div>
</div>
</div> 
```

然后使用以下内容调用此部分：

```
<%= render partial: 'shared/forms/subregion_select', :locals => { :parent_region => f.object.country_code, :sub_region => f.object.state_code } %> 
```

适用的 js.coffee 没有变化。

需要改进的地方：

1.  使用 twitter bootstrap 对所有内容进行硬编码，而不是将包装器放在一起。
2.  当前不显示 state_code（必需属性）的验证错误。
3.  切换国家时不保留州代码。通过将 sub_region 与 parent_region 一起传递给服务，这将很容易实现。

# sharepoint - SharePoint 2010 日期时间文化格式错误

> ID：14071971
> 
> 赞同：0
> 
> 时间：2012-12-28T15:41:20.453
> 
> 标签：sharepoint, datetime, sharepoint-2010, cultureinfo

我正在尝试将日期时间传递给 SharePoint 列表。对于德语日期时间格式，它可以工作，但它需要是可变的，所以我尝试了这个：

```
itemsList[i]["FTPDate"] = DateTime.ParseExact(entity.FTPDate.ToString("dd MMM yyyy"), "dd MMM yyyy", Culture); 
```

但我仍然收到无效数据异常。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T19:58:11.247

Sharepoint 日期是根据 ISO8061 保存的，SPUtility 类上有一个帮助方法，可以将您的日期时间转换为正确的字符串。

[http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.utilities.sputility.createiso8601datetimefromsystemdatetime.aspx](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.utilities.sputility.createiso8601datetimefromsystemdatetime.aspx)

# php - URL 重写导致内部服务器错误

> ID：14071973
> 
> 赞同：0
> 
> 时间：2012-12-28T15:41:29.047
> 
> 标签：php, apache, .htaccess, url

我是 URL 重写的新手。

我在主页中有一个锚文本，单击时将打开另一个页面。单击链接时在浏览器中显示的目标 url 是 [http://example.com/index.php?p=one/two/three/pdp&abc=436](http://example.com/index.php?p=one/two/three/pdp&abc=436)

相反，我想在 URL [http://example.com/index.php?p=shopping/shop/ipad/pdp&abc=436](http://example.com/index.php?p=shopping/shop/ipad/pdp&abc=436)中显示。

所以基本上我正在看的是从一/二/三替换URL

购物/购物/ipad

我希望 URL [http://example.com/index.php?p=one/two/three/pdp&abc=436](http://example.com/index.php?p=one/two/three/pdp&abc=436) 看起来像[http://example.com/index.php?p=shopping/shop/ipad/ pdp&abc=436](http://example.com/index.php?p=shopping/shop/ipad/pdp&abc=436)。

请注意，我有 14,000 页，因此无法在任何地方进行物理更改。我希望使用 url 重写来实现这一点。因此，在根目录中，我已将以下几行添加到 .htaccess 中。

```
RewriteEngine On  
RewriteRule  ^shopping/shop/ipad/?$ one/two/three/pdp [NC,L] 
```

但这是给内部服务器错误。

我怎样才能显示更好的网址？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T16:38:39.053

You may try this:

```
RewriteEngine On
RewriteBase /
RewriteCond %{QUERY_STRING}  p=one/two/three/(.*)
RewriteRule .*  http://example.com/index.php?p=shopping/shop/ipad/%1? [R=301,L] 
```

It will redirect:

`http://example.com/index.php?p=one/two/three/pdp&abc=436`

To:

`http://example.com/index.php?p=shopping/shop/ipad/pdp&abc=436`

I am assuming ``p=one/two/three/` and `p=shopping/shop/ipad/` are constants. If they are variables you should update the question and describe their relationship and patterns, to be able to capture and substitute them.

**SECOND OPTION:**

```
RewriteEngine On
RewriteBase /
RewriteCond %{QUERY_STRING}  p=one/two/three/([^/]+)&([^/]+)=([^/]+).*
RewriteRule .*  http://example.com/index.php?p=shopping/shop/ipad/%1/%2/%3? [R=301,L] 
```

It will redirect:

`http://example.com/index.php?p=one/two/three/anything1&anything2=anything3`

To:

`http://example.com/index.php?p=shopping/shop/ipad/anything1/anything2/anything3`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T15:51:14.083

试试这个：

```
Redirect 301 old_url new_url 
```

例子：

```
Redirect 301 index.php?p=one/two/three/pdp&abc=436 http://example.com/index.php?p=shopping/shop/ipad/pdp&abc=436 
```

我希望你能解决你的问题，对不起，如果你不这样做，我还没有尝试过。

问候。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T16:03:11.527

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-28T16:06:16.160

Yet another method:

If you have enough access to change the `index.php` script, you could do the rewrite *there*, and not in the web server. This has the advantage that you have a powerful language at your disposal, which already has good handling of query strings.

# jquery - 通过 jQuery 和响应打印对 servlet 的 Ajax 调用

> ID：14071974
> 
> 赞同：0
> 
> 时间：2012-12-28T15:41:36.690
> 
> 标签：jquery, ajax, jsp, servlets

我想对 servlet 进行 ajax 调用并打印响应。我已经编写了`index.html`, `Assignemnt`servlet 和`web.xml`如下，但我没有收到警报。出了什么问题？

`index.html`

```
<!DOCTYPE html>
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js">
    <script>
    $(document).ready(function() {
        $("button").click(function() {
            $.get("Assignment", function(data, status) {
                alert("Data: " + data + "\nStatus: " + status);
            });
        });
    });
</script>

<title>Insert title here</title>
</head>
<body>
    <form method="GET" action="Assignment" name="showall">
        <table>
            <tr>
                <td><input type="checkbox" name="id1" /></td>
                <td>Jim</td>
                <td>Knopf</td>
            </tr>
            <tr>
                <td><input type="checkbox" name="id2" /></td>
                <td>Jim</td>
                <td>Bean</td>
            </tr>
        </table>

        <p>
            <button>Send an HTTP GET request to a page and get the
                result back</button>
        </p>
    </form>
</body>
</html> 
```

小服务程序：

```
protected void doGet(HttpServletRequest request,
            HttpServletResponse response) throws ServletException, IOException {
        System.err.println("-------++++");
        String data = "Hello World!";
        response.setContentType("text/plain");
        response.setCharacterEncoding("UTF-8");
        response.getWriter().write(data);
        //RequestDispatcher rd = request.getRequestDispatcher("/Assignment");
        RequestDispatcher rd = request.getRequestDispatcher("/index.html");
        rd.forward(request, response);

    } 
```

Servlet 映射：

```
 <servlet>
    <description>FirstAssignment</description>
    <display-name>Assignment</display-name>
    <servlet-name>Assignment</servlet-name>
    <servlet-class>com.Assignment</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>Assignment</servlet-name>
    <url-pattern>/Assignment</url-pattern>
  </servlet-mapping> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T16:53:41.700

您根本不需要转发响应。它会覆盖`text/plain`响应。删除这些行：

```
//RequestDispatcher rd = request.getRequestDispatcher("/Assignment");
RequestDispatcher rd = request.getRequestDispatcher("/index.html");
rd.forward(request, response); 
```

### 也可以看看：

*   [如何使用 Servlet 和 Ajax？](https://stackoverflow.com/questions/4112686/how-to-use-servlets-and-ajax)

* * *

**与具体问题**无关，** [w3schools 教程](http://www.w3schools.com/jquery/ajax_get.asp)必须带着[一大袋盐](http://w3fools.com/)。例如，`$("button")`选择器是一个非常糟糕的建议，因为这会影响整个 HTML 文档中的*每个* `<button>`元素，而您宁愿将 ajax 函数绑定到仅由某个 ID 标识的特定按钮。**

# .net - 使用工作单元模式的实体框架代码优先异常处理

> ID：14071975
> 
> 赞同：2
> 
> 时间：2012-12-28T15:41:43.373
> 
> 标签：.net, entity-framework, exception-handling, ef-code-first, unit-of-work

我有一个共享相同数据上下文的工作单元模式。如果在保存过程中发生错误，我会抓住它，并继续处理下一个事件。但是，会发生相同的错误，就好像它仍然具有仍然添加错误的原始事件一样。有没有办法优雅地重置工作单元，删除导致原始错误的项目？我什至删除了下面捕获中的项目，但它仍然没有工作。

我还保留了一个事件列表，以检查该 ID 是否已包含在一个属性中，并且只从数据库中检索一次，不确定这是否重要。

```
EventsRepository.Add(tournament);

                try
                {
                    UnitOfWork.Commit();
                }
                catch (Exception ex)
                {
                    // Log, Go To Next Event To Process
                } 
```

UnitOfWork.cs

```
 public class UnitOfWork : IUnitOfWork
    {
        private readonly IDatabaseFactory _databaseFactory;
        private DataContext _dataContext;

        public UnitOfWork(IDatabaseFactory databaseFactory)
        {
            _databaseFactory = databaseFactory;
        }

        protected DataContext DataContext
        {
            get { return _dataContext ?? (_dataContext = _databaseFactory.Get()); }
        }

        public void Commit()
        {
            DataContext.Commit();
        }

        public void SaveChanges()
        {
            DataContext.SaveChanges();
        }

        public void Refresh(object o)
        {
            DataContext.Entry(o);
        }

        public void Commit(bool autoDetectChanges)
        {
            DataContext.Configuration.AutoDetectChangesEnabled = false;
            DataContext.Commit();
            DataContext.Configuration.AutoDetectChangesEnabled = true;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T12:49:08.107

如果您的提交由于添加事件而失败，那么您的工作单元也会失败。如果你想处理下一个事件，你应该使用一个新的工作单元实例，因为如果你`SaveChanges`分别调用每个事件并且如果你想在出错后继续，这些事件不属于同一个工作单元。

要从当前上下文中删除失败的事件，您可以尝试手动分离：

```
context.Entry(tournament).State = EntityState.Detached; 
```

# javascript - 当视频退出全屏模式时，防止 iOS HTML5 应用刷新网页

> ID：14071980
> 
> 赞同：1
> 
> 时间：2012-12-28T15:42:08.160
> 
> 标签：javascript, ios, html, ipad, video

我有一个 HTML5/JS 应用程序，可以将一系列视频动态加载到自定义灯箱中，但是当我在全屏查看后退出其中一个视频时，整个应用程序页面都会刷新。

如何防止页面刷新发生？

注意：这只发生在运行 iOS6.0.1 的 iPad 2+ 上。在运行 5.1.1 的 iPad 1 上不会发生这种情况。

# javafx-2 - FXML 加载器无法创建 FXMLCollections

> ID：14071983
> 
> 赞同：1
> 
> 时间：2012-12-28T15:42:31.297
> 
> 标签：javafx-2, fxml

我正在尝试使用 fxml 创建一个 ComboBox。并且出现此错误：FXMLLoader 无法创建 javafx.collctions.FXCollections 的实例。这是代码：

```
<ComboBox fx:id="setBeginWidth" blendMode="DIFFERENCE" layoutX="325.0" layoutY="262.0"prefHeight="21.0" prefWidth="196.0" promptText="Set the Width of the Map">
              <items>
                <FXCollections fx:factory="observableArrayList">
                  <Integer fx:value="4" />
                  <Integer fx:value="5" />
                  <Integer fx:value="6" />
                  <Integer fx:value="7" />
                  <Integer fx:value="8" />
                  <Integer fx:value="9" />
                  <Integer fx:value="10" />
                </FXCollections>
              </items>
  </ComboBox> 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-23T19:45:26.423

您必须为简写 fx 声明命名空间。添加

```
xmlns:fx="http://javafx.com/fxml" 
```

到 xml 根节点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-24T11:32:18.867

layoutY="262.0"prefHeight="21.0" 此行给出错误，因此请在“262.0”和 prefHeight 之间留出空格。它将是 layoutY="262.0" prefHeight="21.0" 希望对您有所帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T23:33:03.560

我围绕您的 FXML 片段构建了一个小型演示应用程序。让我失望的第一件事是那个部分

layoutY="262.0"prefHeight="21.0"

缺少一个空格。

当我修复它时，它在导入后对我有用

```
<?import javafx.collections.*?>
<?import java.lang.*?> 
```

第一个用于 FXCollections，第二个用于构造 Integer。

你添加了那些进口吗？

# hibernate - 无法在 Glassfish Netbeans 上构建 EntityManagerFactory

> ID：14071985
> 
> 赞同：0
> 
> 时间：2012-12-28T15:42:36.867
> 
> 标签：hibernate, jpa, netbeans, glassfish

我正在通过实施一个 Web 项目来学习 JSF。这些是我的环境和工具：

```
 -Netbeans 7.2.1  
 -Glassfish Server 3.1.2.2  
 -JSF 2.1  
 -Hibernate   
 -Oracle 11gr2 
```

我使用无状态 EJB 会话 bean 从实体类获取数据，使用我在 persistence.xml 中定义的持久性单元。我像这样访问这些持久性单元：

```
private Session session;

@PersistenceContext(unitName="persistence")
private EntityManager entityManager;  

session= (Session)((EntityManagerImpl)entityManager.getDelegate()).getDelegate(); 
```

这是我的persistence.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xsi:schemaLocation="http://java.sun.com/xml/ns/persistence
http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
  <persistence-unit name="persistence" transaction-type="JTA">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <jta-data-source>--jndi name--</jta-data-source>
    <class>....</class>
    <exclude-unlisted-classes>false</exclude-unlisted-classes>
    <properties>
      <property name="hibernate.hbm2ddl.auto" value="update"/>
    </properties>
  </persistence-unit>
</persistence> 
```

我能够创建一个 JDBC 连接池并从 Glassfish 服务器的管理控制台对其进行 ping 操作。但是在运行我的无状态会话 bean 时，我得到了这个错误：

> “无法构建 EntityManagerFactory”

由于此错误，项目无法部署。我怎么解决这个问题？那是堆栈跟踪：

```
INFO: Hibernate Annotations 3.3.1.GA
INFO: Hibernate 3.2.5
INFO: hibernate.properties not found
INFO: Bytecode provider name : cglib
INFO: using JDK 1.4 java.sql.Timestamp handling
INFO: Hibernate EntityManager 3.3.2.GA
INFO: Processing PersistenceUnitInfo [
    name: persistence
    ...]
INFO: Binding entity from annotated class: com.csp.entity.IcerikListe
INFO: Binding named native query: listeOlustur => call PROC_LISTE_EKLE(:P_LISTE_ID,:P_LISTE_AD)
INFO: Binding named native query: listeGuncelle => call PROC_LISTE_GUNCELLE(:P_LISTE_ID,:P_LISTE_AD)
INFO: Binding named native query: listeSil => call PROC_LISTE_SIL(:P_LISTE_ID)
INFO: Binding named native query: listeDondur => call PROC_LISTELER(?)
INFO: Bind entity com.csp.entity.IcerikListe on table TBL_ICERIK_LISTE
INFO: Binding entity from annotated class: com.csp.entity.Kategori
INFO: Binding named native query: kategoriEkle => call PROC_KATEGORI_EKLE(:P_KATEGORI_AD)
INFO: Binding named native query: kategoriGuncelle => call PROC_KATEGORI_GUNCELLE(:P_KATEGORI_AD,:P_KATEGORI_ID)
INFO: Binding named native query: kategoriSil => call PROC_KATEGORI_SIL(:P_KATEGORI_ID)
INFO: Bind entity com.csp.entity.Kategori on table TBL_KATEGORI
INFO: Binding entity from annotated class: com.csp.entity.Kullanici
INFO: Binding named native query: kullaniciOlustur => call PROC_KULLANICI_EKLE(:P_KULLANICI_ID,:P_KULLANICI_AD,:P_SIFRE,:P_AD,:P_SOYAD,
:P_UYELIK_TRH,:P_UYELIK_AYRILMA_TRH)
INFO: Binding named native query: kullaniciGuncelle => call PROC_KULLANICI_GUNCELLE(:P_KULLANICI_ID,:P_KULLANICI_AD,:P_SIFRE, :P_AD,:P_SOYAD, 
:P_UYELIK_TRH,:P_UYELIK_AYRILMA_TRH)
INFO: Binding named native query: kullaniciSil => call PROC_KULLANICI_SIL(:P_KULLANICI_ID,: P_TRH)
INFO: Binding named native query: icerikEkleyenKullanici => call PROC_ICERIK_EKLEYEN_KULLANICI(?,:P_ICERIK_ID)
INFO: Bind entity com.csp.entity.Kullanici on table TBL_KULLANICI
INFO: Binding entity from annotated class: com.csp.entity.Icerik
INFO: Binding named native query: icerikEkle => call PROC_ICERIK_EKLE(:P_LISTE_ID,:P_KATEGORI_ID,:P_EKLEME_TRH,:P_ICERIK_AD,
:P_INCELENME_SAYI,:P_INDIRILME_SAYI,:P_DOSYA_YOLU,:P_KULLANICI_ID,:P_TELIF_ACIKLAMA,
:P_TICARI_KULLANILABILIRLIK)
INFO: Binding named native query: icerikGuncelle => call PROC_ICERIK_GUNCELLE(:P_ICERIK_ID,:P_LISTE_ID,:P_EKLEME_TRH,:P_INCELENME_SAYI,
:P_INDIRILME_SAYI,:P_DOSYA_YOLU,:P_KULLANICI_ID,:P_TELIF_ACIKLAMA,:P_TICARI_KULLANILABILIRLIK,
:P_KATEGORI_ID,:P_ICERIK_AD)
INFO: Binding named native query: icerikSil => call PROC_ICERIK_SIL(:P_ICERIK_ID)
INFO: Binding named native query: benzerIcerikler => call PROC_BENZER_ICERIKLER(?,:P_ICERIK_ID)
INFO: Binding named native query: listedeYerAlanIcerikler => call PROC_LISTEDEKI_ICERIKLER(?,:P_LISTE_ID)
INFO: Binding named native query: ayniListedeYerAlanIcerikler => call PROC_AYNI_LISTEDEKI_ICERIKLER(?,:P_ICERIK_ID)
INFO: Binding named native query: enSonEklenenler => call PROC_EN_SON_EKLENENLER(?)
INFO: Binding named native query: enCokIncelenenler => call PROC_EN_COK_INCELENENLER(?)
INFO: Bind entity com.csp.entity.Icerik on table TBL_ICERIK
INFO: Binding entity from annotated class: com.csp.entity.Mesaj
INFO: Binding named native query: mesajOlustur => call PROC_MESAJ_OLUSTUR(:P_KONU,:P_BASLIK,:P_MESAJ_TRH,:P_GONDEREN_ID,:P_ALAN_ID,:P_OKUNDU_MU,
:P_SILINDI_MI,:P_EKLI_MI,:P_MESAJ)
INFO: Binding named native query: mesajGuncelle => call PROC_MESAJ_GUNCELLE(:P_MESAJ_ID,:P_KONU,:P_BASLIK,:P_MESAJ_TRH,:P_GONDEREN_ID,:P_ALAN_ID,:P_OKUNDU_MU,
:P_SILINDI_MI,:P_EKLI_MI,:P_MESAJ)
INFO: Binding named native query: mesajSil => call PROC_MESAJ_SIL(:P_MESAJ_ID)
INFO: Binding named native query: mesajOkundu => call PROC_MESAJ_OKUNDU(:P_MESAJ_ID)
INFO: Binding named native query: okunanMesajlar => call PROC_OKUNAN_MESAJLAR(?,:P_KULLANICI_ID)
INFO: Binding named native query: silinenMesajlar => call PROC_SILINEN_MESAJLAR(?,:P_KULLANICI_ID)
INFO: Binding named native query: gelenMesajlar => call PROC_GELEN_MESAJLAR(?,:P_KULLANICI_ID)
INFO: Binding named native query: gidenMesajlar => call PROC_GONDERILEN_MESAJLAR(?,:P_KULLANICI_ID)
INFO: Bind entity com.csp.entity.Mesaj on table TBL_MESAJ
INFO: Binding entity from annotated class: com.csp.entity.Yorum
INFO: Binding named native query: yorumEkle => call PROC_YORUM_OLUSTUR(:P_ICERIK_ID,:P_KULLANICI_ID,:P_YORUM,:P_YORUM_TRH)
INFO: Binding named native query: yorumGuncelle => call PROC_YORUM_GUNCELLE(:P_YORUM_ID,:P_ICERIK_ID,:P_KULLANICI_ID,:P_YORUM,:P_YORUM_TRH)
INFO: Binding named native query: yorumSil => call PROC_YORUM_SIL(:P_YORUM_ID)
INFO: Binding named native query: icerikYapilanYorumlar => call PROC_ICERIK_YORUMLAR(?,:P_ICERIK_ID)
INFO: Bind entity com.csp.entity.Yorum on table TBL_YORUM
INFO: Mapping collection: com.csp.entity.IcerikListe.listedekiIcerikler -> TBL_ICERIK
INFO: Mapping collection: com.csp.entity.Kategori.kategoriIcerikler -> TBL_ICERIK
INFO: Mapping collection: com.csp.entity.Kullanici.alinanMesajlar -> TBL_MESAJ
INFO: Mapping collection: com.csp.entity.Kullanici.eklenenIcerikler -> TBL_ICERIK
INFO: Mapping collection: com.csp.entity.Kullanici.gonderilenMesajlar -> TBL_MESAJ
INFO: Mapping collection: com.csp.entity.Kullanici.listeler -> TBL_ICERIK_LISTE
INFO: Mapping collection: com.csp.entity.Kullanici.yapilanYorumlar -> TBL_YORUM
INFO: Mapping collection: com.csp.entity.Icerik.yorumlar -> TBL_YORUM
INFO: Hibernate Validator not found: ignoring
SEVERE: Exception while invoking class org.glassfish.persistence.jpa.JPADeployer prepare method
SEVERE: Exception while preparing the app
SEVERE: [PersistenceUnit: persistence] Unable to build EntityManagerFactory
javax.persistence.PersistenceException: [PersistenceUnit: persistence] Unable to build EntityManagerFactory
    at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:677)
    at org.hibernate.ejb.HibernatePersistence.createContainerEntityManagerFactory(HibernatePersistence.java:132)
    at org.glassfish.persistence.jpa.PersistenceUnitLoader.loadPU(PersistenceUnitLoader.java:206)
    at org.glassfish.persistence.jpa.PersistenceUnitLoader.<init>(PersistenceUnitLoader.java:120)
    at org.glassfish.persistence.jpa.JPADeployer$1.visitPUD(JPADeployer.java:224)
    at org.glassfish.persistence.jpa.JPADeployer$PersistenceUnitDescriptorIterator.iteratePUDs(JPADeployer.java:495)
    at org.glassfish.persistence.jpa.JPADeployer.createEMFs(JPADeployer.java:233)
    at org.glassfish.persistence.jpa.JPADeployer.prepare(JPADeployer.java:168)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.prepareModule(ApplicationLifecycle.java:871)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:410)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
    at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
    at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:461)
    at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:212)
    at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
    at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
Caused by: org.hibernate.MappingException: Repeated column in mapping for entity: com.csp.entity.IcerikListe column: KULLANICI_ID (should be mapped with insert="false" update="false")
    at org.hibernate.mapping.PersistentClass.checkColumnDuplication(PersistentClass.java:652)
    at org.hibernate.mapping.PersistentClass.checkPropertyColumnDuplication(PersistentClass.java:674)
    at org.hibernate.mapping.PersistentClass.checkColumnDuplication(PersistentClass.java:696)
    at org.hibernate.mapping.PersistentClass.validate(PersistentClass.java:450)
    at org.hibernate.mapping.RootClass.validate(RootClass.java:192)
    at org.hibernate.cfg.Configuration.validate(Configuration.java:1102)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1287)
    at org.hibernate.cfg.AnnotationConfiguration.buildSessionFactory(AnnotationConfiguration.java:859)
    at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:669)
    ... 37 more

SEVERE: java.util.logging.ErrorManager: 5: Error in formatting Logrecord
SEVERE: java.lang.IllegalStateException: WEB9031: WebappClassLoader unable to load resource [org.hibernate.exception.ExceptionUtils], because it has not yet been started, or was already stopped
    at org.glassfish.web.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1401)
    at org.glassfish.web.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1359)
    at org.hibernate.exception.NestableDelegate.printStackTrace(NestableDelegate.java:325)
    at org.hibernate.exception.NestableRuntimeException.printStackTrace(NestableRuntimeException.java:195)
    at com.sun.enterprise.server.logging.UniformLogFormatter.uniformLogFormat(UniformLogFormatter.java:351)
    at com.sun.enterprise.server.logging.UniformLogFormatter.format(UniformLogFormatter.java:162)
    at java.util.logging.StreamHandler.publish(StreamHandler.java:196)
    at java.util.logging.ConsoleHandler.publish(ConsoleHandler.java:105)
    at java.util.logging.Logger.log(Logger.java:522)
    at com.sun.logging.LogDomains$1.log(LogDomains.java:372)
    at java.util.logging.Logger.doLog(Logger.java:543)
    at java.util.logging.Logger.log(Logger.java:632)
    at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:481)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
    at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:461)
    at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:212)
    at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
    at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)

SEVERE:     at org.glassfish.web.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1401)
SEVERE:     at org.glassfish.web.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1359)
SEVERE:     at org.hibernate.exception.NestableDelegate.printStackTrace(NestableDelegate.java:325)
SEVERE:     at org.hibernate.exception.NestableRuntimeException.printStackTrace(NestableRuntimeException.java:195)
SEVERE:     at com.sun.enterprise.server.logging.UniformLogFormatter.uniformLogFormat(UniformLogFormatter.java:351)
SEVERE:     at com.sun.enterprise.server.logging.UniformLogFormatter.format(UniformLogFormatter.java:162)
SEVERE:     at java.util.logging.StreamHandler.publish(StreamHandler.java:196)
SEVERE:     at java.util.logging.ConsoleHandler.publish(ConsoleHandler.java:105)
SEVERE:     at java.util.logging.Logger.log(Logger.java:522)
SEVERE:     at com.sun.logging.LogDomains$1.log(LogDomains.java:372)
SEVERE:     at java.util.logging.Logger.doLog(Logger.java:543)
SEVERE:     at java.util.logging.Logger.log(Logger.java:632)
SEVERE:     at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:481)
SEVERE:     at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)
SEVERE:     at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
SEVERE:     at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
SEVERE:     at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
SEVERE:     at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
SEVERE:     at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
SEVERE:     at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:461)
SEVERE:     at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:212)
SEVERE:     at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
SEVERE:     at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
SEVERE:     at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
SEVERE:     at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
SEVERE:     at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
SEVERE:     at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
SEVERE:     at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
SEVERE:     at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
SEVERE:     at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
SEVERE:     at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
SEVERE:     at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
SEVERE:     at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
SEVERE:     at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
SEVERE:     at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
SEVERE:     at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
SEVERE:     at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
SEVERE:     at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
SEVERE:     at java.lang.Thread.run(Thread.java:722)
SEVERE: java.util.logging.ErrorManager: 5: Error in formatting Logrecord
SEVERE: java.lang.IllegalStateException: WEB9031: WebappClassLoader unable to load resource [org.hibernate.exception.ExceptionUtils], because it has not yet been started, or was already stopped
    at org.glassfish.web.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1401)
    at org.glassfish.web.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1359)
    at org.hibernate.exception.NestableDelegate.printStackTrace(NestableDelegate.java:325)
    at org.hibernate.exception.NestableRuntimeException.printStackTrace(NestableRuntimeException.java:195)
    at com.sun.enterprise.server.logging.UniformLogFormatter.uniformLogFormat(UniformLogFormatter.java:351)
    at com.sun.enterprise.server.logging.UniformLogFormatter.format(UniformLogFormatter.java:162)
    at java.util.logging.StreamHandler.publish(StreamHandler.java:196)
    at com.sun.enterprise.server.logging.GFFileHandler.log(GFFileHandler.java:659)
    at com.sun.enterprise.server.logging.GFFileHandler$1.run(GFFileHandler.java:179)

SEVERE:     at org.glassfish.web.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1401)
SEVERE:     at org.glassfish.web.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1359)
SEVERE:     at org.hibernate.exception.NestableDelegate.printStackTrace(NestableDelegate.java:325)
SEVERE:     at org.hibernate.exception.NestableRuntimeException.printStackTrace(NestableRuntimeException.java:195)
SEVERE:     at com.sun.enterprise.server.logging.UniformLogFormatter.uniformLogFormat(UniformLogFormatter.java:351)
SEVERE:     at com.sun.enterprise.server.logging.UniformLogFormatter.format(UniformLogFormatter.java:162)
SEVERE:     at java.util.logging.StreamHandler.publish(StreamHandler.java:196)
SEVERE:     at com.sun.enterprise.server.logging.GFFileHandler.log(GFFileHandler.java:659)
SEVERE:     at com.sun.enterprise.server.logging.GFFileHandler$1.run(GFFileHandler.java:179) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T16:12:09.890

该问题在您的异常堆栈跟踪中报告（大约在它的中间部分）：

> 原因：org.hibernate.MappingException：实体映射中的重复列：com.csp.entity.IcerikListe 列：org.hibernate.mapping.PersistentClass 的 KULLANICI_ID（应使用 insert="false" update="false" 映射） .checkColumnDuplication(PersistentClass.java:652) 在 org.hibernate.mapping.PersistentClass.checkPropertyColumnDuplication(PersistentClass.java:674) 在 org.hibernate.mapping.PersistentClass.checkColumnDuplication(PersistentClass.java:696) 在 org.hibernate.mapping。 PersistentClass.validate(PersistentClass.java:450) 在 org.hibernate.mapping.RootClass.validate(RootClass.java:192) 在 org.hibernate.cfg.Configuration.validate(Configuration.java:1102) 在 org.hibernate.cfg org.hibernate.cfg 中的 .Configuration.buildSessionFactory(Configuration.java:1287)。AnnotationConfiguration.buildSessionFactory(AnnotationConfiguration.java:859) 在 org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:669) ... 37 更多

修复有问题的实体 ( `com.csp.entity.IcerikListe`) 并再次尝试构建/部署。

# spring-security - 如何在活动中使用 Spring Security

> ID：14071986
> 
> 赞同：2
> 
> 时间：2012-12-28T15:42:54.740
> 
> 标签：spring-security, activiti

我在我的项目中使用 Spring Security 3，现在我想使用 Activiti 对业务工作流程进行建模。正如我们所知，spring security 有自己的数据库模式，包括“用户”、“角色”、“权限”等表，活动也有一些自己的模式。我如何整合这两者。任何想法。我是初学者活动请详细解释一下。谢谢

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-12-28T16:32:43.917

[在这里](http://www.codeproject.com/Articles/253901/Getting-Started-Spring-Security)你可以找到一些信息..

# .net - .Net 序列化 - 将 [Serializable] 与继承树中的自定义混合

> ID：14071987
> 
> 赞同：5
> 
> 时间：2012-12-28T15:43:02.607
> 
> 标签：.net, serialization, binary, hierarchy

我正在将 Java 游戏转换为 C#（Puppy Games 的泰坦攻击），除了最后一项任务是保存文件的游戏状态序列化之外，我现在几乎完成了。

典型层次结构：资源（基础）->功能->屏幕/效果/实体->GameScreen/LaserEffect/Invader

Java 代码使用标准 ObjectOutputStream / ObjectInputStream 来执行二进制序列化，但烦人地在基类级别（资源）执行一些 readResolve / writeResolve 工作以自定义序列化过程（如果资源被命名，它不会序列化它并简单地返回一个代理具有稍后用于从哈希映射中获取资源的名称）。

我幼稚的解决方案是盲目复制这种方法并在基类中实现 ISerializable 以覆盖 TYPE ...

```
public virtual void GetObjectData(SerializationInfo info, StreamingContext context) {
    if (name != null) {
        // Got a name, so send a SerializedResource that just references us
        info.AddValue("name", this.name);
        info.SetType(typeof(SerializedResource));
        return;
    }

    //Serialize just MY fields (defined in Resource)
    this.SerializeMyFields(info, context, typeof(Resource));
} 
```

问）那么，我很确定内置序列化的所有赌注都没有了，我必须在继承链中与序列化构造函数一起实现 ISerializable 吗？

注意 GetObjectData 是虚拟的，因此派生类可以序列化它们的字段，然后调用基类。这行得通，但它增加了很多类（100s）的繁琐工作。

一些派生类型（Sprite、InvaderBehaviour 等）也执行自定义序列化工作，使事情变得更糟。

我查看了 Jeffrey Richter 关于该主题的文章，并尝试使用 ResourceSurrogateSelector : ISerializationSurrogate 类型构造，但只有在被序列化的类型是 Resource 而不是从资源派生的类型时才会调用这些序列化方法（即不会被称为序列化入侵者或游戏屏幕）

问）有没有聪明的方法来做到这一点？

我设法使这两个代码库彼此非常接近，这使得转换变得更加容易 - 我想在这里继续这种方法（所以没有 XmlSerializer、Protobuf 等），除非有一个非常令人信服的理由不至。

我考虑过编写一些 Java 来自动化该过程并反映实现 Serializable 接口的类型并创建一个包含所有 .Net 序列化代码的 .cs 文件，这样我就不会污染主类文件（我会使它们偏）

PS - 目标平台将是 .Net 方面的 Windows8 / Surface / XBox360（所以是版本 4），可能是 PS Vita / 可能是使用 Mono 的 iOS。保存在它们被序列化的平台上被反序列化。

**编辑** Sergey Teplyakov 在这篇文章中的回答.... [.NET, C#: How to add a custom serialization attribute that act as ISerializable interface](https://stackoverflow.com/questions/2174591/net-c-how-to-add-a-custom-serialization-attribute-that-acts-as-iserializable) ...让我看到了 ISurrogateSelector 界面，它看起来有助于选择所需的派生类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T00:01:12.663

到目前为止，这是我设法提出的，我对此非常满意 :-) 只需添加 readResolve/writeReplace，我就完成了！（我可能也会将 Object、SerializationInfo、StreamingContext 参数包装在 ObjectOutputStream 中，以便更好地衡量）。

```
using System;
using System.Diagnostics;
using System.IO;
using System.Reflection;
using System.Runtime.Serialization;
using System.Runtime.Serialization.Formatters.Binary;

using java.io; //My implementation of various Java classes

namespace NewSerializationTest {

public sealed class JavaSerializableSurrogateSelector : ISurrogateSelector
{
    public void ChainSelector(ISurrogateSelector selector) { throw new NotImplementedException(); }

    public ISurrogateSelector GetNextSelector() { throw new NotImplementedException(); }

    public ISerializationSurrogate GetSurrogate(Type type, StreamingContext context, out ISurrogateSelector selector)
    {
        if (typeof(Serializable).IsAssignableFrom(type))
        {
            selector = this;
            return new JavaSerializationSurrogate();
        }

        //Type is not marked (java.io.)Serializable
        selector = null;
        return null;
    }
}

public sealed class JavaSerializationSurrogate : ISerializationSurrogate {

    //Method called to serialize a java.io.Serializable object
    public void GetObjectData(Object obj, SerializationInfo info, StreamingContext context) {

        //Do the entire tree looking for the 'marker' methods
        var type = obj.GetType();
        while (type != null) 
        {
            var writeObject = type.GetMethod("writeObject", BindingFlags.DeclaredOnly | BindingFlags.Instance | BindingFlags.NonPublic, null, new Type[] { typeof(SerializationInfo), typeof(StreamingContext), typeof(Type) }, null );
            if (writeObject != null) {
                //Class has declared custom serialization so call through to that
                writeObject.Invoke(obj, new object[] { info, context, type });
            } else {
                //Default serialization of all non-transient fields at this level only (not the entire tree)
                obj.SerializeFields(info, context, type);
            }

            type = type.BaseType;   
        }
    }

    //Method called to deserialize a java.io.Serializable object
    public Object SetObjectData(Object obj, SerializationInfo info, StreamingContext context, ISurrogateSelector selector) {

        //Do the entire tree looking for the 'marker' methods
        var type = obj.GetType();
        while (type != null) 
        {
            var readObject = type.GetMethod("readObject", BindingFlags.DeclaredOnly | BindingFlags.Instance | BindingFlags.NonPublic, null, new Type[] { typeof(SerializationInfo), typeof(StreamingContext), typeof(Type) }, null );
            if (readObject != null) {
                //Class has declared custom serialization so call through to that
                readObject.Invoke(obj, new object[] { info, context, type });
            } else {
                //Default serialization of all non-transient fields at this level only (not the entire tree)
                obj.DeserializeFields(info, context, type);
            }

            type = type.BaseType;   
        }

        return null;
    }
}

[Serializable]
class A  : java.io.Serializable {
    public string Field1;
}

[Serializable]
class B : A {
    public string Field2; 

    private void readObject(SerializationInfo stream, StreamingContext context, Type declaringType) {
        stream.defaultReadObject(context, this, declaringType);

        Debug.WriteLine("B: readObject");
    } 

    private void writeObject(SerializationInfo stream, StreamingContext context, Type declaringType) {
        stream.defaultWriteObject(context, this, declaringType);

        Debug.WriteLine("B: writeObject");
    } 
}

[Serializable]
class C: B {
    public string Field3;

    private void writeObject(SerializationInfo stream, StreamingContext context, Type declaringType) {
        stream.defaultWriteObject(context, this, declaringType);

        Debug.WriteLine("C: writeObject");
    } 
}

public static class SerializationInfoExtensions {

    public static void defaultWriteObject(this SerializationInfo info, StreamingContext context, object o, Type declaringType) {
        o.SerializeFields(info, context, declaringType);
    }

    public static void defaultReadObject(this SerializationInfo info, StreamingContext context, object o, Type declaringType) {
        o.DeserializeFields(info, context, declaringType);
    }
}

class Program {
    static void Main(string[] args) {

        var myC = new C { Field1 = "tom", Field2 = "dick", Field3 = "harry" }; 

        using (var ms = new MemoryStream()) {
            var binaryFormatter = new BinaryFormatter();
            binaryFormatter.SurrogateSelector = new JavaSerializableSurrogateSelector();

            binaryFormatter.Serialize(ms, myC);
            ms.Position = 0;
            var myCDeserialized = binaryFormatter.Deserialize(ms);
        }
    }
}

/// <summary>
/// Extensions to the object class.
/// </summary>
public static class ObjectExtensions
{
    /// <summary>
    /// Serializes an object's class fields.
    /// </summary>
    /// <param name="source">The source object to serialize.</param>
    /// <param name="info">SerializationInfo.</param>
    /// <param name="context">StreamingContext.</param>
    /// <param name="declaringType">The level in the inheritance whose fields are to be serialized - pass null to serialize the entire tree.</param>
    public static void SerializeFields(this object source, SerializationInfo info, StreamingContext context, Type declaringType)
    {
        //Serialize the entire inheritance tree if there is no declaringType passed.
        var serializeTree = declaringType == null;

        //Set the level in the class heirarchy we are interested in - if there is no declaring type use the source type (and the entire tree will be done).
        var targetType = declaringType ?? source.GetType();

        //Get the set of serializable members for the target type
        var memberInfos = FormatterServices.GetSerializableMembers(targetType, context);

        // Serialize the base class's fields to the info object
        foreach (var mi in memberInfos)
        {
            if (serializeTree || mi.DeclaringType == targetType) {
                //Specify the name to use as the key - if the entire tree is being done then the names will already have a prefix. Otherwise, we need to 
                //append the name of the declaring type.
                var name = serializeTree ? mi.Name : mi.DeclaringType.Name + "$" + mi.Name;

                info.AddValue(name, ((FieldInfo)mi).GetValue(source));
            }
        }
    }

    /// <summary>
    /// Deserializes an object's fields.
    /// </summary>
    /// <param name="source">The source object to serialize.</param>
    /// <param name="info">SerializationInfo.</param>
    /// <param name="context">StreamingContext.</param>
    /// <param name="declaringType">The level in the inheritance whose fields are to be deserialized - pass null to deserialize the entire tree.</param>
    public static void DeserializeFields(this object source, SerializationInfo info, StreamingContext context, Type declaringType)
    {
        //Deserialize the entire inheritance tree if there is no declaringType passed.
        var deserializeTree = declaringType == null;

         //Set the level in the class heirarchy we are interested in - if there is no declaring type use the source type (and the entire tree will be done).
        var targetType = declaringType ?? source.GetType();

        var memberInfos = FormatterServices.GetSerializableMembers(targetType, context);

        // Deserialize the base class's fields from the info object
        foreach (var mi in memberInfos)
        {
            //Only serialize the fields at the specific level requested.
            if (deserializeTree || mi.DeclaringType == declaringType) 
            {
                // To ease coding, treat the member as a FieldInfo object
                var fi = (FieldInfo) mi;

                //Specify the name to use as the key - if the entire tree is being done then the names will already have a prefix. Otherwise, we need to 
                //append the name of the declaring type.
                var name = deserializeTree ? mi.Name : mi.DeclaringType.Name + "$" + mi.Name;

                // Set the field to the deserialized value
                fi.SetValue(source, info.GetValue(name, fi.FieldType));
            }
        }
    }
}
} 
```

# python - Python使用外部键对列表进行排序

> ID：14071988
> 
> 赞同：1
> 
> 时间：2012-12-28T15:43:05.663
> 
> 标签：python

我正在尝试根据条目的 id 对条目列表进行排序。

我试过这段代码，但没有用：

```
entries.sort(cmp=None, key=Entry.id, reverse=False) 
```

列表中的对象是具有 id 的条目。

这是我得到的错误：

> TypeError：“InstrumentedAttribute”对象不可调用

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-28T15:49:46.367

`key`必须是一个函数，它接受一个列表条目并返回一个用于比较的值。

作为替代`lambda`，使用[`operator.attrgetter`](http://docs.python.org/2/library/operator.html)：

```
entries.sort(key=attrgetter('id')) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-28T15:44:51.703

正如错误告诉您的那样， Key 需要是一个函数，或者更准确地说，是一个可调用对象。

```
entries.sort(cmp=None, key=(lambda x:x.id), reverse=False) 
```

# iphone - 将 UIImage 从 UIbutton 保存到对象 UIImage 以复制到其他 UIButton

> ID：14071990
> 
> 赞同：4
> 
> 时间：2012-12-28T15:43:34.230
> 
> 标签：iphone, objective-c, xcode, uibutton, uiimage

我基本上想要做的是我们有一个`UIImage`全局对象，然后我希望有多个`UIButton`带有背景图像的 s，如果选择这些图像，则保存到全局`UIImage`.

然后我想从选定的按钮中获取保存的图像并使用它来设置其他`UIButton`背景图像。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T16:01:04.130

如果您将背景图像设置为，`UIButton`那么您可以使用它来获取它

**设置图像**

```
[yourBtn setBackgroundImage:image forState:UIControlStateNormal]; 
```

**获取图像**

```
UIImage *image=[yourBtn backgroundImageForState:UIControlStateNormal]; 
```

**或者**

如果您将图像（使用`setImage`）设置为您的`UIButton`then

```
UIImage *image=yourBtn.imageView.image; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T15:49:54.167

将 AppDelegate 类用于应用程序全局 UIImage。

然后，当您想将此 UIImage 设置为 UIButtons 上的背景时，请使用以下方法：

```
- (void)setBackgroundImage:(UIImage *)image forState:(UIControlState)state 
```

[API 参考](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIButton_Class/UIButton/UIButton.html#//apple_ref/occ/instm/UIButton/setBackgroundImage%3aforState%3a)

# emacs - 如何通过elisp创建一个空文件？

> ID：14071991
> 
> 赞同：14
> 
> 时间：2012-12-28T15:43:37.740
> 
> 标签：emacs, lisp, elisp

我将显式文件设置为通过 UI 创建的自定义。它被命名为`custom.el`。目前，如果不存在，我使用以下代码片段创建此文件。

```
(defconst custom-file (expand-file-name "custom.el" user-emacs-directory))
(unless (file-exists-p custom-file)
  (shell-command (concat "touch " custom-file))) 
```

有一个丑陋的 shell 命令`touch`，任何其他 elisp 函数可以做到这一点？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-28T16:07:39.123

您可以使用`(write-region "" nil custom-file)`不确定这是理想的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-16T15:14:54.940

我在这篇文章中基于 Joao Tavara anwser 在下面编写了这个函数：[如何在 emacs 中创建一个空文件？](https://stackoverflow.com/questions/2592095/how-do-i-create-an-empty-file-in-emacs)

```
(defun fzl-create-empty-file-if-no-exists(filePath)
   "Create a file with FILEPATH parameter."
   (if (file-exists-p filePath)
       (message (concat  "File " (concat filePath " already exists")))
     (with-temp-buffer (write-file filePath)))) 
```

# django - 使用 django ORM 连接三个或更多表

> ID：14071992
> 
> 赞同：0
> 
> 时间：2012-12-28T15:43:43.793
> 
> 标签：django, join, orm

我已经设计了我的模型，使得所有模型都将在 auth_user 表上具有一对一的关系，即`User`. 为了您的快速参考，我粘贴了下面的图片

![在此处输入图像描述](../Images/cc1c6dc2015ea3464f1bc44968800eab.png)

现在我想选择表 BasicDetails、Department 和 Project 中与用户名相关的所有数据。以下查询未获取结果。

`User.objects.select_related().get(username='user1')`

有人可以帮我吗？

-维克拉姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T16:05:47.143

您应该使用 prefetch_related 来提高效率，因为您的关系是反向的（您想从 User 访问其他记录，而不是相反）：

```
u = User.objects.prefetch_related('project_set', 'department_set', 'basicdetails_set').get(username='user1') 
```

这不会生成单个查询，但 Django 将使用缓存技术来有效地产生更少的数据库开销。如果我没记错的话，它将产生 4 个查询（4 个表中的单个连接可能会更慢，具体取决于记录、索引等的数量）。好处是在后续请求中不会生成查询。例如获取用户的项目：

```
u.project_set.all() #hits the db
u.project_set.all() #cached version, no db hit 
```

有关更多信息，请参见此处[https://docs.djangoproject.com/en/dev/topics/db/queries/#one-to-one-relationships](https://docs.djangoproject.com/en/dev/topics/db/queries/#one-to-one-relationships)。

编辑：什么是`project_set`？

如果您的项目模型是这样定义的

```
class Project(models.Model):
    ...
    user = models.ForeignKey(User) 
```

那么您可以`Project.objects.get(pk=1).user`访问与项目实例关联的用户，但是您将如何做相反的事情（获取某个用户的所有项目）？为方便起见，Django 会自动将 '_set' 属性包含到另一个模型中。因此我们可以这样获取某个用户的项目：

```
u = User.objects.get(pk=1)
user_objects = u.project_set.all() 
```

但是，如果您想为这种反向关系显式设置名称，django 允许您使用`related_name`如下关键字参数定义 ForeignKey：

```
class Project(models.Model):
    ...
    user = models.ForeignKey(User, related_name='projects') 
```

现在，`.project_set`您可以使用它`.projects`来访问用户的项目：

```
u = User.objects.get(pk=1)
user_objects = u.projects.all() 
```

# eclipse - 我正在尝试安装 eclipse egit 但有这个错误说

> ID：14071998
> 
> 赞同：5
> 
> 时间：2012-12-28T15:44:07.783
> 
> 标签：eclipse, eclipse-plugin

无法完成安装，因为找不到一项或多项所需项目。正在安装的软件：Eclipse EGit 2.2.0.201212191850-r (org.eclipse.egit.feature.group 2.2.0.201212191850-r) 缺少要求：Eclipse EGit 2.2.0.201212191850-r (org.eclipse.egit.feature.group 2.2.0.201212191850 -r) 需要 'org.eclipse.core.runtime [3.7.0,4.0.0)' 但找不到

我的日食版本是 Helios。还有这个我没有得到的清单。

日食

Eclipse EGit - 源代码

日食

Eclipse JGit - 源代码

Eclipse JGit 命令行界面

Eclipse JGit 命令行界面 - 源代码

日蚀米林

Eclipse 插件导入支持

我该如何解决这个问题？谢谢你。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-02T14:30:59.277

如果您无法升级到较新的 eclipse，例如由于公司环境，您可以安装较旧的 EGit 版本，升级不是革命性的。
看起来您是从 Eclipse 市场安装的。

尝试通过“Help->Install New Software..”安装
，在更新站点中使用“http://download.eclipse.org/egit/updates-2.1”。它将为您提供与 Helios 兼容的旧版 egit。

**确保取消选中“Egit 插件导入支持”** - 它与 Helios 不兼容

关于列表中的其他项目，您可以轻松地在 Google 上搜索 Jgit 和 Egit 关系以及 mylyn 及其功能

希望这可以帮助

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-28T16:16:37.890

[Egit 2.2 不再支持 Helios](http://wiki.eclipse.org/EGit/New_and_Noteworthy/2.2#Installation)。要么留在 Egit 2.1，要么将 Eclipse 安装升级到 Juno（无需重新安装即可完成）。