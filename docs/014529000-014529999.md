# StackOverflow 问答 14529000-14529999

# postgresql - 从 SQLAlchemy 中的 IntegrityError 中恢复

> ID：14529003
> 
> 赞同：1
> 
> 时间：2013-01-25T19:28:06.363
> 
> 标签：postgresql, sqlalchemy, flask-sqlalchemy

和：

```
class X(Base):
  __tablename__ = 'x'
  id = Column(Integer, primary_key=True)
  ys = relationship("Y")

class Y(Base):
  __tablename__ = 'y'
  id = Column(Integer, primary_key=True)
  data = Column(String, unique=True)
  x_id = Column(Integer, ForeignKey('x.id'), nullable=False) 
```

如果我做类似的事情：

```
# x is instance of X
x.ys #=> ["x"]
x.ys.extend(["x", "y", "z", "a"])
session.save() 
```

an`IntegrityError`得到提升（当然）。

有没有办法（a）获取一系列冲突问题（在异常时，而不是新的数据库请求）或（b）告诉 SQLAlchemy 继续前进（在示例中，`y, z, a`添加了？

（是的，我会在这里和 Postgres 下进行某种类似“设置”的行为，所以如果有其他方法可以实现这一点，我也会全神贯注。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T09:30:43.767

> 有没有办法（a）得到一系列相互冲突的问题

从来没听说过。

> (b) 告诉 SQLAlchemy 继续前进

您可以[嵌套](http://docs.sqlalchemy.org/ru/latest/core/connections.html#nesting-of-transaction-blocks)将生成保存点的事务。

你也考虑过使用`relationship("Y", collection_class=set)`吗？我知道这并不能消除并行执行上下文中出错的可能性，但在事务中它使事情变得更容易。

# ios - 解析多种日期格式

> ID：14529008
> 
> 赞同：2
> 
> 时间：2013-01-25T19:28:35.817
> 
> 标签：ios, nsdate, nsdateformatter, nsscanner

> **可能重复：**
> [在 iPhone 中将多种日期格式转换为单一格式](https://stackoverflow.com/questions/13116110/converting-mutliple-date-format-into-a-single-format-in-iphone)

我正在尝试解析 RSS 并从 RSS 的内容部分提取日期的 NSString，并将其转换为 NSDate。这是我到目前为止所拥有的：

RSS 内容总是将时间列为时间：日期/时间到结束时间。我首先扫描 RSS 中的每个项目，以获取介于 When: 和 'to' 部分之间的内容。然后我设置了一个 NSDateFormatter。这就是问题所在。有时它被列为 2013 年 9 月 6 日星期四下午 1:00，但在其他时候，使用的格式是 2013 年 9 月 6 日星期四下午 1 点。所以......我需要解决的问题是设置一些东西，以便无论日期的格式如何，它都能够返回一些东西，因为现在使用“EEE MMM dd, yyyy h:mma”会忽略其中的实例饲料只是说下午1点。

```
NSMutableArray *substrings = [NSMutableArray new];
NSScanner *scanner = [NSScanner scannerWithString:articleImage];
[scanner scanUpToString:@"When: " intoString:nil]; // Scan all characters before #

NSString *substring = nil;
[scanner scanString:@"When: " intoString:nil]; // Scan the # character
if([scanner scanUpToString:@" to" intoString:&substring]) {
    // If the space immediately followed the #, this will be skipped
    //[substrings addObject:substring];
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    // this is imporant - we set our input date format to match our input string
    // if format doesn't match you'll get nil from your string, so be careful
    [dateFormatter setDateFormat:@"EEE MMM dd, yyyy h:mma"];
    NSDate *dateFromString = [[NSDate alloc] init];
    // voila!
    dateFromString = [dateFormatter dateFromString:substring];
    self.thetruedate = dateFromString;
    [dateFormatter release];
    NSLog(@"%@",dateFromString);
    [substrings release];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T19:49:27.600

在 RSS 中定义一个包含所有可能日期格式的方法，

```
- (NSDate *)dateFromSourceString:(NSString *)sourceString {

    NSDate *convertedDate = nil;
    NSArray *dateFormatterList = [NSArray arrayWithObjects:@"EEE MMM dd, yyyy h:mma", 
                                  @"EEE MMM dd, yyyy ha", nil];//include all possible dateformats here

    //sourceString = @"Thu Sep 6, 2013 1:00PM";

    if (sourceString) {

        NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];

        for (NSString *dateFormatterString in dateFormatterList) {

            [dateFormatter setDateFormat:dateFormatterString];
            NSDate *originalDate = [dateFormatter dateFromString:sourceString];

            if (originalDate) {

                convertedDate = originalDate;
                NSLog(@"Converted date is %@", convertedDate);
                break;
            }
        }
       [dateFormatter release]; //release it if it is a non-arc project
    }

    return convertedDate;
} 
```

然后将其用作，

```
NSMutableArray *substrings = [NSMutableArray new];
NSScanner *scanner = [NSScanner scannerWithString:articleImage];
[scanner scanUpToString:@"When: " intoString:nil]; // Scan all characters before #

NSString *substring = nil;
[scanner scanString:@"When: " intoString:nil]; // Scan the # character
if([scanner scanUpToString:@" to" intoString:&substring]) {
    // If the space immediately followed the #, this will be skipped
    //[substrings addObject:substring];

    // this is imporant - we set our input date format to match our input string
    // if format doesn't match you'll get nil from your string, so be careful

    NSDate *dateFromString = [self dateFromSourceString:substring];
    self.thetruedate = dateFromString;
    NSLog(@"%@",dateFromString);
    [substrings release];
} 
```

`dateFromSourceString`方法将从中选择日期格式化程序`dateFormatterList`并将尝试转换为日期。如果格式不正确，它将返回 nil。这可以用于您的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T19:47:34.190

您可以创建 RSS 中可用的所有可能类型的日期格式。

继续由每个日期格式化程序一一转换，直到转换后的日期不是`null`. 由于无效格式将无法转换并返回 null。

# intellij-idea - 如何在 IntelliJ 中增加代码字体大小？

> ID：14529009
> 
> 赞同：254
> 
> 时间：2013-01-25T19:28:43.833
> 
> 标签：intellij-idea

如图所示，我尝试通过外观进行操作，但这似乎不会影响代码字体或大小

![在此处输入图像描述](../Images/01ada6e01b44988efa71b63d036325cf.png)

请问这怎么做？

* * *

## 回答 #1

> 赞同：323
> 
> 时间：2013-01-25T19:36:38.290

就像**`Ctrl`+ 鼠标滚轮**一样简单。如果这对您不起作用，请启用*File* → *Settings* → *Editor* → *General* → (选中) *Change font size (Zoom) with Ctrl+Mouse Wheel*。

* * *

## 回答 #2

> 赞同：122
> 
> 时间：2013-12-10T15:15:42.490

`Save As...`使用按钮创建自定义方案时可以更改字体大小等：

![另存为...](../Images/96a528ee705f3ce4c46e99c18e6d0162.png)

* * *

## 回答 #3

> 赞同：93
> 
> 时间：2013-01-25T19:37:12.107

在等待有人回应的时候，我环顾四周，找到了答案。

导航到字体并将字体更改为您想要的任何大小

![在此处输入图像描述](../Images/806ce473163dd402fc7f28c262e78059.png)

* * *

## 回答 #4

> 赞同：89
> 
> 时间：2015-07-18T14:45:28.133

**使用键盘更改字体大小**

在 Windows 或 Linux 中按`Ctrl`+ `Shift`+`A`

在 MAC 中按`CMD`+ `Shift`+`A`

在弹出框中，键入`Increase font size`或`Decrease font size`，然后单击 Enter。

字体变大或变小。

* * *

## 回答 #5

> 赞同：32
> 
> 时间：2019-03-31T13:29:50.753

要在当前版本的 IntelliJ IDEA 中更改字体大小，请转到文件 → 设置 → 编辑器 → 常规。在对话框中，选中标记为“使用 Ctrl+鼠标滚轮更改字体大小（缩放）”的项目。

* * *

## 回答 #6

> 赞同：26
> 
> 时间：2014-04-04T05:20:09.890

**在 IntellJ 13 中**

```
File 
 |
  ---- Settings 
       |
        ------- Editor
                 |
                  ------- Colors & Fonts
                          |
                           ------ Font -> [Size] 
```

![在此处输入图像描述](../Images/64deb5d34ca9dc2320d3746d3da20ee9.png)

* * *

## 回答 #7

> 赞同：20
> 
> 时间：2018-06-03T07:52:51.940

对于 Intellij 2018，它非常令人困惑，因为有一个**Editor → Font部分，但它通常被****Editor → Color Scheme → Color Scheme Font**覆盖：

[![在此处输入图像描述](../Images/c9da47edfffc1631bfa4f0f3d505a01e.png)](https://i.stack.imgur.com/pMD6H.png)

* * *

## 回答 #8

> 赞同：16
> 
> 时间：2015-06-17T13:52:58.783

在 Mac 上，您还可以捏合缩放，即一起或分开移动拇指和食指。

* * *

## 回答 #9

> 赞同：15
> 
> 时间：2016-04-19T19:40:49.550

在 Mac 上：IntelliJ Idea → 首选项

[![在此处输入图像描述](../Images/520ebeae8249ce93611e833cd9879b35.png)](https://i.stack.imgur.com/tKbKX.png)

在首选项对话框中，

1.  编辑器 → 颜色和字体 → 字体。
2.  点击另存为，输入方案名称如mac用户名。
3.  根据需要更改大小。

[![在此处输入图像描述](../Images/38cbc535e43dd6d12ba6365cff8b76d8.png)](https://i.stack.imgur.com/iex5K.png)

* * *

## 回答 #10

> 赞同：15
> 
> 时间：2019-12-06T15:18:55.673

在 Mac Os 上，转到**Preferences > Editor > Font > Size**。输入新的字体大小。

更多细节[阅读这篇博文](https://blog.raychenon.com/intellij-bigger-font-size/)

好奇它是如何在 Linux 和 Windows 上完成的

[![在此处输入图像描述](../Images/564a5044cd4ce8e8665acc0f07d907b4.png)](https://i.stack.imgur.com/D5TbF.png)

* * *

## 回答 #11

> 赞同：11
> 
> 时间：2018-03-18T17:52:07.693

从 开始`InteliJ IDEA 2017.2.5`，您可以通过以下方式更改**编辑器字体大小**：

`Settings`▶ `Editor`▶`Font`

[![在此处输入图像描述](../Images/5331238364e7757d484dbe33f794e357.png)](https://i.stack.imgur.com/rUdaF.jpg)

* * *

## 回答 #12

> 赞同：10
> 
> 时间：2018-08-11T06:26:43.970

首先按`Ctrl`+ `Shift`+`A`

然后搜索增加字体 [![在此处输入图像描述](../Images/3411f05994f1db6f1cdea0c7c9fb5a66.png)](https://i.stack.imgur.com/UVvAc.png)

对于 Mac 用户，它是`cmd + shift + A`

* * *

## 回答 #13

> 赞同：8
> 
> 时间：2019-05-28T18:32:51.083

菜单、对话框和工具窗口中使用的字体可以在**Settings > Appearance & Behavior > Use custom font**中更改。[![设置对话框](../Images/f1e449363c20a677a3be83246020f90d.png)](https://i.stack.imgur.com/HyGyC.png)

* * *

## 回答 #14

> 赞同：6
> 
> 时间：2013-01-25T19:34:41.717

这是不可能的。请[为这个错误投票](http://youtrack.jetbrains.com/issue/IDEA-69802)。

* * *

## 回答 #15

> 赞同：6
> 
> 时间：2019-04-16T09:55:53.023

快捷方式是`Ctrl`++ - Then Type 增加字体大小`Shift`then`A``Enter`

* * *

## 回答 #16

> 赞同：5
> 
> 时间：2021-07-16T14:48:59.330

有两个地方可以改变外观：

1.  文件 -> 设置 -> 外观和行为 -> 外观 -> 使用自定义字体 -> 大小

[图形用户界面大小](https://i.stack.imgur.com/niCCc.png)

2.  文件 -> 设置 -> 编辑器 -> 字体 -> 大小

[编辑器字体](https://i.stack.imgur.com/YJiId.png)

第一个控制 IntelliJ GUI（菜单等）的字体大小。第二个是给编辑的。

* * *

## 回答 #17

> 赞同：4
> 
> 时间：2017-09-06T16:18:21.887

您可以使用演示模式临时增加字体大小。

**注意：**此菜单的位置已更改。它更接近顶部。

启用带视图的演示模式 -> 进入演示模式

[![查看菜单](../Images/e08a0b6a934c1f76fc53b538874af105.png)](https://i.stack.imgur.com/qN1Wh.png)

我需要增加演示模式的默认字体大小。为此，请打开设置并在搜索栏中输入“演示模式”。在外观下，向下滚动到演示模式，然后选择您喜欢的字体大小。

[![演示字体设置](../Images/0a9f797dc28b70932b87413cd07432d7.png)](https://i.stack.imgur.com/63eBV.png)

因为我经常使用它，所以我将“切换演示模式”映射到 Ctrl-P。在“键盘映射”下，右键单击“切换演示模式”并选择“添加键盘快捷键”

[![演示模式的键盘映射](../Images/01938475cf1b041ca83ec086d5d494ff.png)](https://i.stack.imgur.com/WFJZ6.png)

从字面上按 Control 和 P 键，然后单击 OK 以启用此功能。

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2018-02-10T04:23:51.180

在 Intellij Idea 3.3（终极）系统上：Mac

IntelliJ Idea → Preferences ( `CMD`+ `,`) → Editor → General(Main)：取消选中/选中“使用 Command + 鼠标滚轮更改字体大小（Zoon）”

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2018-04-15T14:11:43.073

> **对于最新版本的 IntelliJ，我认为选项发生了一些变化。**

# 截屏：

[![在此处输入图像描述](../Images/a26a038ab73f41c5561724ddf8ad62d3.png)](https://i.stack.imgur.com/RNvlZ.png)

**我当前的 IntelliJ 版本：**

```
IntelliJ IDEA 2017.3.5 (Community Edition)
Build #IC-173.4674.33, built on March 6, 2018
JRE: 1.8.0_152-release-1024-b15 amd64
JVM: OpenJDK 64-Bit Server VM by JetBrains s.r.o 
```

希望这会有所帮助。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2018-03-14T16:32:51.690

如果您不想更改键盘映射，您可以通过以下快捷键序列快速进入和退出演示模式（在 macOS 中也可以使用 Ctrl）：

1.  `Ctrl`+ ``` （切换...）
2.  `4` （查看模式）
3.  `1` （进入/退出演示模式）

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2018-09-26T10:37:51.650

转到->设置->编辑器->字体->方案选项。然后重命名该选项并应用，然后选择新选项（重命名一个），然后将启用编辑字体大小的选项。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2020-01-02T06:15:15.150

更改“配色方案字体”。你会得到你想要的。我遇到了同样的问题并修复了它。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2021-06-09T08:36:54.223

所以有几种方法可以做到：

1.  Windows 或 Linux 按`Ctrl`+ `Shift`+`A`
    在弹出框中，键入`Increase font size`or `Decrease font size`，然后单击 Enter

2.  去`File → Settings → Editor → General`。在对话框中，选中标记为“ `Change font size (Zoom)`with `Ctrl`+ `Mouse Wheel`”的项目

    [![在此处输入图像描述](../Images/4b98cb1f62d75c30f1c95cc9bcde8cbe.png)](https://i.stack.imgur.com/KQkOU.png)

3.  去`File → Settings → Editor → Font`。更改字体大小，然后单击确定/应用按钮。

    [![在此处输入图像描述](../Images/b32eac3fc5ed4c13074ff7a37520909b.png)](https://i.stack.imgur.com/tBsnU.png)

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2021-06-09T08:41:41.713

CTRL+SHIFT+A 键入`increase`并按 Enter，只需再次按 CTRL+SHIFT+A 然后 Enter 即可重复操作，直到您满意为止

[![运行任何东西，增加字体](../Images/6cdacea72a0f2757cca40434d7da61f0.png)](https://i.stack.imgur.com/AMYSR.png)

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2021-12-11T15:59:31.957

在 2021-12 年，Pycharm 2021.3（专业版）以及可能的社区版，您可以通过以下方式激活放大和缩小当前或所有文件的功能：

> 文件 > 设置 > 编辑器 > 常规 > 鼠标控制

并检查

> 使用 Ctrl + 鼠标滚轮更改字体大小

# android - 我怎样才能编写一个旋转的圆形动画，比如这个（附图片）？安卓

> ID：14529010
> 
> 赞同：11
> 
> 时间：2013-01-25T19:28:48.093
> 
> 标签：android, animation, graphics, android-animation

我正在开发一个应用程序，只是构建了它的逻辑部分。现在我想设计这个应用程序，就像著名的计时器应用程序一样。例如：

![http://goo.gl/N3qS1](../Images/3baff6b84a9daef574743f70f39defc9.png)
![在此处输入图像描述](../Images/1050c00796ad2a1c26de29a8f7462d03.png)

我想要的是外圈，它充满了某个事件的每个触发器或数字的增加。我实际上不知道它是动画部分（比如内置在 Flash 中或什么），或者只是通过使用其内置属性和功能在 android 本身中编码来实现。因此，如果有人告诉我，请向我解释使用了哪些工具或任何可以从底层解释事情的参考教程。我真的不懂设计。这有什么代码吗？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-12-04T11:38:07.403

这会吗？

*更新：*现在也正确处理现实世界的时间。

**示例截图：** ![示例截图](../Images/88112c0d0a149cd3e3d6a21d8cd33e32.png)

**代码：**

```
import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.os.Handler;
import android.text.TextPaint;
import android.view.View;

import android.graphics.*;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(new CircularCountdown(this));
    }

    private static class CircularCountdown extends View {

        private final Paint backgroundPaint;
        private final Paint progressPaint;
        private final Paint textPaint;

        private long startTime;
        private long currentTime;
        private long maxTime;

        private long progressMillisecond;
        private double progress;

        private RectF circleBounds;
        private float radius;
        private float handleRadius;
        private float textHeight;
        private float textOffset;

        private final Handler viewHandler;
        private final Runnable updateView;

        public CircularCountdown(Context context) {
            super(context);

            // used to fit the circle into
            circleBounds = new RectF();

            // size of circle and handle
            radius = 200;
            handleRadius = 10;

            // limit the counter to go up to maxTime ms
            maxTime = 5000;

            // start and current time
            startTime = System.currentTimeMillis();
            currentTime = startTime;

            // the style of the background
            backgroundPaint = new Paint();
            backgroundPaint.setStyle(Paint.Style.STROKE);
            backgroundPaint.setAntiAlias(true);
            backgroundPaint.setStrokeWidth(10);
            backgroundPaint.setStrokeCap(Paint.Cap.SQUARE);
            backgroundPaint.setColor(Color.parseColor("#4D4D4D"));  // dark gray

            // the style of the 'progress'
            progressPaint = new Paint();
            progressPaint.setStyle(Paint.Style.STROKE);
            progressPaint.setAntiAlias(true);
            progressPaint.setStrokeWidth(10);
            progressPaint.setStrokeCap(Paint.Cap.SQUARE);
            progressPaint.setColor(Color.parseColor("#00A9FF"));    // light blue

            // the style for the text in the middle
            textPaint = new TextPaint();
            textPaint.setTextSize(radius / 2);
            textPaint.setColor(Color.BLACK);
            textPaint.setTextAlign(Paint.Align.CENTER);

            // text attributes
            textHeight = textPaint.descent() - textPaint.ascent();
            textOffset = (textHeight / 2) - textPaint.descent();

            // This will ensure the animation will run periodically
            viewHandler = new Handler();
            updateView = new Runnable(){
                @Override
                public void run(){
                    // update current time
                    currentTime = System.currentTimeMillis();

                    // get elapsed time in milliseconds and clamp between <0, maxTime>
                    progressMillisecond = (currentTime - startTime) % maxTime;

                    // get current progress on a range <0, 1>
                    progress = (double) progressMillisecond / maxTime;

                    CircularCountdown.this.invalidate();
                    viewHandler.postDelayed(updateView, 1000/60);
                }
            };
            viewHandler.post(updateView);
        }

        @Override
        protected void onDraw(Canvas canvas) {
            super.onDraw(canvas);

            // get the center of the view
            float centerWidth = canvas.getWidth() / 2;
            float centerHeight = canvas.getHeight() / 2;

            // set bound of our circle in the middle of the view
            circleBounds.set(centerWidth - radius,
                    centerHeight - radius,
                    centerWidth + radius,
                    centerHeight + radius);

            // draw background circle
            canvas.drawCircle(centerWidth, centerHeight, radius, backgroundPaint);

            // we want to start at -90°, 0° is pointing to the right
            canvas.drawArc(circleBounds, -90, (float)(progress*360), false, progressPaint);

            // display text inside the circle
            canvas.drawText((double)(progressMillisecond/100)/10 + "s",
                            centerWidth,
                            centerHeight + textOffset,
                            textPaint);

            // draw handle or the circle
            canvas.drawCircle((float)(centerWidth  + (Math.sin(progress * 2 * Math.PI) * radius)),
                              (float)(centerHeight - (Math.cos(progress * 2 * Math.PI) * radius)),
                              handleRadius,
                              progressPaint);
        }

    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-04-04T13:54:17.577

的解决方案`Antimonit`有两个重大问题：

1.  `circular clock view`当您使用 破坏活动/片段并再次显示时钟时，会发生内存泄漏。
2.  所有参数都在 java 类中硬编码，循环时钟视图类不可重用。

基于`Antimonit`代码（谢谢！），我创建了更多可重用和内存安全的解决方案。现在，几乎所有的参数都可以从`XML`文件中设置。在活动/片段类的最后，我们需要调用`startCount`方法。`removeCallbacks`当活动/片段将被销毁以避免内存泄漏时，我强烈推荐调用方法。

**KakaCircularCounter.java 类：**

```
public class KakaCircularCounter extends View {
public static final int DEF_VALUE_RADIUS = 250;
public static final int DEF_VALUE_EDGE_WIDTH = 15;
public static final int DEF_VALUE_TEXT_SIZE = 18;
private Paint backgroundPaint;
private Paint progressPaint;
private Paint textPaint;
private RectF circleBounds;
private long startTime;
private long currentTime;
private long maxTime;
private long progressMillisecond;
private double progress;
private float radius;
private float edgeHeadRadius;
private float textInsideOffset;
private KakaDirectionCount countDirection;
private Handler viewHandler;
private Runnable updateView;

public KakaCircularCounter(Context context) {
    super(context);
    init(null);
}

public KakaCircularCounter(Context context, @Nullable AttributeSet attrs) {
    super(context, attrs);
    init(attrs);
}

public KakaCircularCounter(Context context, @Nullable AttributeSet attrs, int defStyleAttr) {
    super(context, attrs, defStyleAttr);
    init(attrs);
}

public KakaCircularCounter(Context context, @Nullable AttributeSet attrs, int defStyleAttr, int defStyleRes) {
    super(context, attrs, defStyleAttr, defStyleRes);
    init(attrs);
}

private void init(AttributeSet attrSet) {
    if (attrSet == null) {
        return;
    }

    TypedArray typedArray = getContext().obtainStyledAttributes(attrSet, R.styleable.KakaCircularCounter);

    circleBounds = new RectF();
    backgroundPaint = setupBackground(typedArray);
    progressPaint = setupProgress(typedArray);
    textPaint = setupText(typedArray);

    textInsideOffset = (textPaint.descent() - textPaint.ascent() / 2) - textPaint.descent();

    radius = typedArray.getDimensionPixelSize(R.styleable.KakaCircularCounter_clockRadius, DEF_VALUE_RADIUS);
    edgeHeadRadius = typedArray.getDimensionPixelSize(R.styleable.KakaCircularCounter_edgeHeadRadius, DEF_VALUE_EDGE_WIDTH);

    countDirection = KakaDirectionCount.values()[typedArray.getInt(R.styleable.KakaCircularCounter_countFrom,
            KakaDirectionCount.MAXIMUM.ordinal())];

    typedArray.recycle();
}

private Paint setupText(TypedArray typedArray) {
    Paint t = new Paint();
    t.setTextSize(typedArray.getDimensionPixelSize(R.styleable.KakaCircularCounter_textInsideSize, DEF_VALUE_TEXT_SIZE));
    t.setColor(typedArray.getColor(R.styleable.KakaCircularCounter_textInsideColor, Color.BLACK));
    t.setTextAlign(Paint.Align.CENTER);
    return t;
}

private Paint setupProgress(TypedArray typedArray) {
    Paint p = new Paint();
    p.setStyle(Paint.Style.STROKE);
    p.setAntiAlias(true);
    p.setStrokeCap(Paint.Cap.SQUARE);
    p.setStrokeWidth(typedArray.getDimensionPixelSize(R.styleable.KakaCircularCounter_clockWidth, DEF_VALUE_EDGE_WIDTH));
    p.setColor(typedArray.getColor(R.styleable.KakaCircularCounter_edgeBackground, Color.parseColor("#4D4D4D")));
    return p;
}

private Paint setupBackground(TypedArray ta) {
    Paint b = new Paint();
    b.setStyle(Paint.Style.STROKE);
    b.setStrokeWidth(ta.getDimensionPixelSize(R.styleable.KakaCircularCounter_clockWidth, DEF_VALUE_EDGE_WIDTH));
    b.setColor(ta.getColor(R.styleable.KakaCircularCounter_clockBackground, Color.parseColor("#4D4D4D")));
    b.setAntiAlias(true);
    b.setStrokeCap(Paint.Cap.SQUARE);
    return b;
}

public void startCount(long maxTimeInMs) {
    startTime = System.currentTimeMillis();
    this.maxTime = maxTimeInMs;

    viewHandler = new Handler();
    updateView = () -> {
        currentTime = System.currentTimeMillis();
        progressMillisecond = (currentTime - startTime) % maxTime;
        progress = (double) progressMillisecond / maxTime;
        KakaCircularCounter.this.invalidate();
        viewHandler.postDelayed(updateView, 1000 / 60);
    };
    viewHandler.post(updateView);
}

public void removeCallbacks() {
    viewHandler.removeCallbacks(updateView);
}

@Override
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);
    float centerWidth = getWidth() / 2f;
    float centerHeight = getHeight() / 2f;

    circleBounds.set(centerWidth - radius,
            centerHeight - radius,
            centerWidth + radius,
            centerHeight + radius);

    canvas.drawCircle(centerWidth, centerHeight, radius, backgroundPaint);
    canvas.drawArc(circleBounds, -90, (float) (progress * 360), false, progressPaint);

    canvas.drawText(getTextToDraw(),
            centerWidth,
            centerHeight + textInsideOffset,
            textPaint);

    canvas.drawCircle((float) (centerWidth + (Math.sin(progress * 2 * Math.PI) * radius)),
            (float) (centerHeight - (Math.cos(progress * 2 * Math.PI) * radius)),
            edgeHeadRadius,
            progressPaint);
}

@NonNull
private String getTextToDraw() {
    if (countDirection.equals(KakaDirectionCount.ZERO)) {
        return String.valueOf(progressMillisecond / 1000);
    } else {
        return String.valueOf((maxTime - progressMillisecond) / 1000);
    }
} 
```

}

**KakaDirectionCount 枚举：**

```
public enum KakaDirectionCount {
    ZERO, MAXIMUM
} 
```

**值目录中的属性文件 (kaka_circular_counter.xml)**

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <declare-styleable name="KakaCircularCounter">
        <attr name="clockRadius" format="dimension"/>
        <attr name="clockBackground" format="color"/>
        <attr name="clockWidth" format="dimension"/>
        <attr name="edgeBackground" format="color"/>
        <attr name="edgeWidth" format="dimension"/>
        <attr name="edgeHeadRadius" format="dimension"/>
        <attr name="textInsideSize" format="dimension"/>
        <attr name="textInsideColor" format="color"/>
        <attr name="countFrom" format="enum">
            <enum name="ZERO" value="0"/>
            <enum name="MAXIMUM" value="1"/>
        </attr>
    </declare-styleable>
</resources> 
```

**在 xml 文件中使用的示例：**

```
 <pl.kaka.KakaCircularCounter
        android:id="@+id/circular_counter"
        android:layout_width="180dp"
        android:layout_height="180dp"
        app:layout_constraintBottom_toBottomOf="@id/backgroundTriangle"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintTop_toTopOf="@id/backgroundTriangle"
        app:clockRadius="85dp"
        app:clockBackground="@color/colorTransparent"
        app:clockWidth="3dp"
        app:edgeBackground="@color/colorAccentSecondary"
        app:edgeWidth="5dp"
        app:edgeHeadRadius="1dp"
        app:textInsideSize="60sp"
        app:textInsideColor="@color/colorWhite"
        app:countFrom="MAXIMUM"/> 
```

**在活动或片段中使用的示例：**

```
//the number in parameter is the value of the counted time
binding.circularCounter.startCount(12000); 
```

**注意：记得在销毁活动/片段时删除回调，因为发生内存泄漏。例如：**

```
@Override
public void onDestroyView() {
    super.onDestroyView();
    binding.circularCounter.removeCallbacks();
} 
```

# java - 在 JCombBox 中进行选择时如何使 JLabel 更改图像

> ID：14529011
> 
> 赞同：4
> 
> 时间：2013-01-25T19:28:46.317
> 
> 标签：java, swing, jlabel, jcombobox

`JLabel`每次用户选择`JComboBox`从文本文件中获取其值的选项时，我都想进行更改，请真的需要帮助....

```
import javax.swing.*;
import javax.swing.border.*;
import java.util.*;
import java.util.List;
import java.io.IOException;
import java.util.Scanner;
import java.io.*;
import java.awt.*;
import java.awt.event.*; 
import java.net.*;
import java.applet.*;

public class MusicOnWeb extends JApplet {
    JPanel P = new JPanel();

    JLabel Title = new JLabel();
        JLabel Logo = new JLabel();
            JLabel Category = new JLabel();
            JLabel List = new JLabel();
            JLabel Image = new JLabel();
            JSeparator jSeparator1 = new JSeparator();
            JSeparator jSeparator2 = new JSeparator();
            JSeparator jSeparator3 = new JSeparator();
            JSeparator jSeparator4 = new JSeparator();
            JSeparator jSeparator5 = new JSeparator();
            JButton Cc = new JButton();
            JButton Pp = new JButton();
            JButton Jz = new JButton();
            JButton Wn = new JButton();
            JButton Cart = new JButton();
            JComboBox Combo1 = new JComboBox();
            JComboBox Combo2 = new JComboBox();
            JComboBox Combo3 = new JComboBox();
            JComboBox Combo4 = new JComboBox();

        Font f = new Font("Lucida Calligraphy", Font.BOLD,25);

    final java.text.SimpleDateFormat sdf = new java.text.SimpleDateFormat("MMMM dd yyyy GGG hh:mm:ss aaa"); 
    JLabel TimeLabel = new JLabel();

     ActionListener al = new ActionListener() {  
        public void actionPerformed(ActionEvent ae) {  
                    TimeLabel.setText(sdf.format(new java.util.Date())); 
            }  
        };

    String[] CB1 = new String[5];
    String[] CB2 = new String[5];
    String[] CB3 = new String[5];
    String[] CB4 = new String[5];

    String Music [ ] = {" Seal.jpg"};

    GridBagConstraints gbc;

public void init() {
        P.setBackground(new Color(102, 102, 102));
        P.setBorder(javax.swing.BorderFactory.createCompoundBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED, new java.awt.Color(255, 0, 51), new java.awt.Color(0, 153, 255), new java.awt.Color(0, 204, 153), new java.awt.Color(0, 204, 102)), javax.swing.BorderFactory.createLineBorder(new java.awt.Color(0, 0, 0), 3)));
        P.setLayout(new GridBagLayout());

 try {
    File F= new File("Classics.txt");
    Scanner inFile = new Scanner(new FileReader(F)).useDelimiter("\\' '| \r");
    int i=0;
    while (inFile.hasNextLine()){
    CB1[i] = inFile.nextLine();
    i++;
}} catch (Exception e) {

    }

 try {
    File F= new File("Western.txt");
    Scanner inFile = new Scanner(new FileReader(F)).useDelimiter("\\' '| \r");
    int i=0;
    while (inFile.hasNextLine()){
    CB2[i] = inFile.nextLine();
    i++;
}}catch (Exception e)  {

    }

 try {
    File F= new File("Pop.txt");
    Scanner inFile = new Scanner(new FileReader(F)).useDelimiter("\\' '| \r");
    int i=0;
    while (inFile.hasNextLine()){
    CB4[i] = inFile.nextLine();
    i++;
}}catch (Exception e)  {

    }

 try {
    File F= new File("Jazz.txt");
    Scanner inFile = new Scanner(new FileReader(F)).useDelimiter("\\' '| \r");
    int i=0;
    while (inFile.hasNextLine()){
    CB3[i] = inFile.nextLine();
    i++;
}}catch (Exception e)  {

    }

        Title.setFont(new Font("Lucida Calligraphy", 1, 27)); 
        Title.setForeground(new Color(102, 102, 255));
        Title.setHorizontalAlignment(SwingConstants.CENTER);
        Title.setText("<HTML><center><b><u>MusicOnWeb</u></b><BR>An Online Music Store</HTML>");
        Title.setBorder(javax.swing.BorderFactory.createLineBorder(new Color(0, 0, 0)));
        gbc = new GridBagConstraints();
        gbc.gridx = 1;
        gbc.gridy = 0;
        gbc.gridwidth = 10;
        gbc.ipadx = 440;    // To resize components
        gbc.ipady = 25;
        gbc.anchor = GridBagConstraints.NORTHWEST;
        gbc.insets = new Insets(26, 45, 0, 0);     // To move components
        P.add(Title, gbc);

        Logo.setIcon(new ImageIcon("C:\\Users\\Kwasi Addai\\Documents\\Java Work\\Project 1\\Logo.jpg"));
        Logo.setBorder(javax.swing.BorderFactory.createLineBorder(new Color(0, 0, 0)));
        gbc = new GridBagConstraints();
        gbc.gridx = 0;
        gbc.gridy = 0;
        gbc.ipadx = -52;
        gbc.ipady = -23;
        gbc.anchor = GridBagConstraints.NORTHWEST;
        gbc.insets = new Insets(26, 46, 0, 0);
        P.add(Logo, gbc);

        Category.setFont(new Font("Kristen ITC", 1, 24)); 
        Category.setHorizontalAlignment(SwingConstants.CENTER);
        Category.setText("Select the Category");
        Category.setBorder(javax.swing.BorderFactory.createEtchedBorder(javax.swing.border.EtchedBorder.RAISED, new Color(102, 204, 255), java.awt.Color.red));
        gbc = new GridBagConstraints();
        gbc.gridx = 0;
        gbc.gridy = 2;
        gbc.gridwidth = 3;
        gbc.ipadx = 30;
        gbc.ipady = 13;
        gbc.anchor = GridBagConstraints.NORTHWEST;
        gbc.insets = new Insets(18, 46, 0, 0);
        P.add(Category, gbc);

        List.setFont(new Font("Britannic Bold", 0, 27)); 
        List.setHorizontalAlignment(SwingConstants.CENTER);
        List.setText("List of CD's Available");
        List.setBorder(javax.swing.BorderFactory.createEtchedBorder(java.awt.Color.black, java.awt.Color.white));
        gbc = new GridBagConstraints();
        gbc.gridx = 6;
        gbc.gridy = 2;
        gbc.gridwidth = 16;
        gbc.gridheight = 2;
        gbc.ipadx = 248;
        gbc.ipady = 22;
        gbc.anchor = GridBagConstraints.NORTHWEST;
        gbc.insets = new Insets(23, 17, 0, 0);
        P.add(List, gbc);

        Image.setBorder(javax.swing.BorderFactory.createLineBorder(new Color(0, 0, 0), 3));
        Image.setMaximumSize(new Dimension(300, 300));
        Image.setMinimumSize(new Dimension(300, 300));
        gbc = new GridBagConstraints();
        gbc.gridx = 9;
        gbc.gridy = 5;
        gbc.gridwidth = 12;
        gbc.gridheight = 9;
        gbc.ipadx = -12;
        gbc.ipady = -12;
        gbc.anchor = GridBagConstraints.NORTHWEST;
        gbc.insets = new Insets(8, 40, 0, 0);
        P.add(Image, gbc);

        TimeLabel.setText("timeLabel");
        TimeLabel.setFont(f);
        gbc = new GridBagConstraints();
        gbc.gridx = 0;
        gbc.gridy = 16;
        gbc.gridwidth = 0;
        gbc.ipadx = 278;
        gbc.ipady = 33;
        gbc.anchor = GridBagConstraints.NORTHWEST;
        gbc.insets = new Insets(15, 40, 0, 0);
        P.add(TimeLabel, gbc);
    new javax.swing.Timer(1000,al).start();  

        jSeparator1.setForeground(new Color(102, 102, 102));
        gbc = new GridBagConstraints();
        gbc.gridx = 0;
        gbc.gridy = 1;
        gbc.gridwidth = 23;
        gbc.ipadx = 958;
        gbc.ipady = 3;
        gbc.anchor = GridBagConstraints.NORTHWEST;
        gbc.insets = new Insets(20, 15, 0, 16);
        P.add(jSeparator1, gbc);

        jSeparator2.setBackground(new Color(0, 0, 0));
        gbc = new GridBagConstraints();
        gbc.gridx = 0;
        gbc.gridy = 4;
        gbc.gridwidth = 4;
        gbc.ipadx = 340;
        gbc.ipady = 2;
        gbc.anchor = GridBagConstraints.NORTHWEST;
        gbc.insets = new Insets(9, 15, 0, 0);
        P.add(jSeparator2, gbc);

        jSeparator3.setOrientation(SwingConstants.VERTICAL);
        gbc = new GridBagConstraints();
        gbc.gridx = 4;
        gbc.gridy = 2;
        gbc.gridheight = 13;
        gbc.ipadx = 11;
        gbc.ipady = 450;
        gbc.anchor = GridBagConstraints.NORTHWEST;
        gbc.insets = new Insets(-2, 1, 0, 0);
        P.add(jSeparator3, gbc);

        jSeparator4.setBackground(new Color(0, 0, 0));
        gbc = new GridBagConstraints();
        gbc.gridx = 0;
        gbc.gridy = 15;
        gbc.gridwidth = 23;
        gbc.ipadx = 958;
        gbc.ipady = 1;
        gbc.anchor = GridBagConstraints.NORTHWEST;
        gbc.insets = new Insets(0, 15, 0, 16);
        P.add(jSeparator4, gbc);

        jSeparator5.setOrientation(SwingConstants.VERTICAL);
        gbc = new GridBagConstraints();
        gbc.gridx = 6;
        gbc.gridy = 16;
        gbc.gridheight = 3;
        gbc.ipadx = 11;
        gbc.ipady = 95;
        gbc.anchor = GridBagConstraints.NORTHWEST;
        gbc.insets = new Insets(0, 180, 10, 0);
        P.add(jSeparator5, gbc);

        Cc.setFont(new Font("Tahoma", 3, 20)); 
        Cc.setForeground(new Color(0, 0, 102));
        Cc.setText("Classic");
        Cc.setBorder(new javax.swing.border.LineBorder(new Color(0, 0, 0), 4, true));
        gbc = new GridBagConstraints();
        gbc.gridx = 0;
        gbc.gridy = 5;
        gbc.gridwidth = 2;
        gbc.gridheight = 2;
        gbc.ipadx = 161;
        gbc.ipady = 17;
        gbc.anchor = GridBagConstraints.NORTHWEST;
        gbc.insets = new Insets(29, 65, 0, 0);
        Cc.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                Combo1.setModel(new DefaultComboBoxModel(CB1));
                Combo2.setModel(new DefaultComboBoxModel(CB1));
                Combo3.setModel(new DefaultComboBoxModel(CB1));
                Combo4.setModel(new DefaultComboBoxModel(CB1));
                Combo1.setSelectedIndex(0);
                Combo2.setSelectedIndex(0);
                Combo3.setSelectedIndex(0);
                Combo4.setSelectedIndex(0);
            }
        });
         P.add(Cc, gbc);

        Pp.setFont(new Font("Tahoma", 3, 20)); 
        Pp.setForeground(new Color(0, 204, 204));
        Pp.setText("Pop");
        Pp.setBorder(new javax.swing.border.LineBorder(new Color(0, 0, 0), 4, true));
        gbc = new GridBagConstraints();
        gbc.gridx = 0;
        gbc.gridy = 9;
        gbc.gridwidth = 2;
        gbc.ipadx = 191;
        gbc.ipady = 17;
        gbc.anchor = GridBagConstraints.NORTHWEST;
        gbc.insets = new Insets(16, 65, 0, 0);
        Pp.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                Combo1.setModel(new DefaultComboBoxModel(CB4));
                Combo2.setModel(new DefaultComboBoxModel(CB4));
                Combo3.setModel(new DefaultComboBoxModel(CB4));
                Combo4.setModel(new DefaultComboBoxModel(CB4));
                Combo1.setSelectedIndex(0);
                Combo2.setSelectedIndex(0);
                Combo3.setSelectedIndex(0);
                Combo4.setSelectedIndex(0);
            }
        });
        P.add(Pp, gbc);

        Jz.setFont(new Font("Tahoma", 3, 20)); 
        Jz.setForeground(new Color(0, 51, 153));
        Jz.setText("Jazz");
        Jz.setBorder(new javax.swing.border.LineBorder(new Color(0, 0, 0), 4, true));
        gbc = new GridBagConstraints();
        gbc.gridx = 0;
        gbc.gridy = 11;
        gbc.gridwidth = 2;
        gbc.ipadx = 185;
        gbc.ipady = 17;
        gbc.anchor = GridBagConstraints.NORTHWEST;
        gbc.insets = new Insets(12, 65, 0, 0);
          Jz.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                Combo1.setModel(new DefaultComboBoxModel(CB3));
                Combo2.setModel(new DefaultComboBoxModel(CB3));
                Combo3.setModel(new DefaultComboBoxModel(CB3));
                Combo4.setModel(new DefaultComboBoxModel(CB3));
                Combo1.setSelectedIndex(0);
                Combo2.setSelectedIndex(0);
                Combo3.setSelectedIndex(0);
                Combo4.setSelectedIndex(0);
            }
        });
        P.add(Jz, gbc);

        Wn.setFont(new Font("Tahoma", 3, 20)); 
        Wn.setForeground(new Color(0, 102, 102));
        Wn.setText("Western");
        Wn.setBorder(new javax.swing.border.LineBorder(new Color(0, 0, 0), 4, true));
        gbc = new GridBagConstraints();
        gbc.gridx = 0;
        gbc.gridy = 7;
        gbc.gridwidth = 2;
        gbc.ipadx = 145;
        gbc.ipady = 17;
        gbc.anchor = GridBagConstraints.NORTHWEST;
        gbc.insets = new Insets(18, 65, 0, 0);
          Wn.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                Combo1.setModel(new DefaultComboBoxModel(CB2));
                Combo2.setModel(new DefaultComboBoxModel(CB2));
                Combo3.setModel(new DefaultComboBoxModel(CB2));
                Combo4.setModel(new DefaultComboBoxModel(CB2));
                Combo1.setSelectedIndex(0);
                Combo2.setSelectedIndex(0);
                Combo3.setSelectedIndex(0);
                Combo4.setSelectedIndex(0);
            }
        });

        P.add(Wn, gbc);

        Cart.setFont(new Font("Wide Latin", 1, 24)); 
        Cart.setText("Add to Cart");
        Cart.setBorder(new javax.swing.border.LineBorder(new Color(0, 0, 0), 5, true));
        gbc = new GridBagConstraints();
        gbc.gridx = 7;
        gbc.gridy = 16;
        gbc.gridwidth = 3;
        gbc.gridheight = 2;
        gbc.ipadx = 53;
        gbc.ipady = 14;
        gbc.anchor = GridBagConstraints.NORTHWEST;
        gbc.insets = new Insets(26, 75, 0, 0);
    Cart.addActionListener(new ActionListener() {
              @Override
    public void actionPerformed(ActionEvent evt) {
    AppletContext ac = getAppletContext();
    URL url = getCodeBase(); // get url of this applet

    try {
    ac.showDocument(new URL(url+"Shopping_Cart.html"));
    } catch(MalformedURLException e) 
    {
        showStatus("URL not found");

        }
    }});
        P.add(Cart, gbc);

        Combo1.setBorder(javax.swing.BorderFactory.createMatteBorder(5, 5, 5, 5, new Color(0, 102, 204)));
        Combo1.setPrototypeDisplayValue("XXXXXXXXXXXX");
        gbc = new GridBagConstraints();
        gbc.gridx = 6;
        gbc.gridy = 5;
        gbc.gridwidth = 0;
        gbc.ipadx = 103;
        gbc.ipady = 28;
        gbc.anchor = GridBagConstraints.NORTHWEST;
        gbc.insets = new Insets(23, 17, 0, 0);

        P.add(Combo1, gbc);

        Combo2.setBorder(javax.swing.BorderFactory.createMatteBorder(5, 5, 5, 5, new Color(0, 204, 204)));
        Combo2.setPrototypeDisplayValue("XXXXXXXXXXXX");
        gbc = new GridBagConstraints();
        gbc.gridx = 6;
        gbc.gridy = 7;
        gbc.gridwidth = 2;
        gbc.gridheight = 2;
        gbc.ipadx = 103;
        gbc.ipady = 28;
        gbc.anchor = GridBagConstraints.NORTHWEST;
        gbc.insets = new Insets(16, 17, 0, 0);
        P.add(Combo2, gbc);

        Combo3.setBorder(javax.swing.BorderFactory.createMatteBorder(5, 5, 5, 5, new Color(0, 153, 153)));
        Combo3.setPrototypeDisplayValue("XXXXXXXXXXXX");
        gbc = new GridBagConstraints();
        gbc.gridx = 6;
        gbc.gridy = 9;
        gbc.gridwidth = 2;
        gbc.gridheight = 2;
        gbc.ipadx = 103;
        gbc.ipady = 28;
        gbc.anchor = GridBagConstraints.NORTHWEST;
        gbc.insets = new Insets(18, 17, 0, 0);
        P.add(Combo3, gbc);

        Combo4.setBorder(javax.swing.BorderFactory.createMatteBorder(5, 5, 5, 5, new Color(0, 0, 204)));
        Combo4.setPrototypeDisplayValue("XXXXXXXXXXXX");
        gbc = new GridBagConstraints();
        gbc.gridx = 6;
        gbc.gridy = 11;
        gbc.gridwidth = 2;
        gbc.gridheight = 2;
        gbc.ipadx = 103;
        gbc.ipady = 28;
        gbc.anchor = GridBagConstraints.NORTHWEST;
        gbc.insets = new Insets(18, 17, 0, 0);
        P.add(Combo4, gbc);

       GroupLayout layout = new GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(layout.createParallelGroup(GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addComponent(P, GroupLayout.PREFERRED_SIZE, 970, GroupLayout.PREFERRED_SIZE)
                .addContainerGap()));
        layout.setVerticalGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addComponent(P, GroupLayout.PREFERRED_SIZE, 700, GroupLayout.PREFERRED_SIZE)
                .addGap(0, 68, Short.MAX_VALUE)));
      }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T20:42:57.073

基本概念很简单。

我倾向于使用`ItemListener`它，因为它对不同类型的选择输入更敏感`ActionListener`

```
public class TestComboBox05 {

    public static void main(String[] args) {
        new TestComboBox05();
    }

    public TestComboBox05() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        public TestPane() {
            setLayout(new GridBagLayout());
            final JLabel lbl = new JLabel();
            add(lbl);
            JComboBox cb = new JComboBox();

            cb.addItemListener(new ItemListener() {
                @Override
                public void itemStateChanged(ItemEvent e) {
                    if (e.getStateChange() == ItemEvent.SELECTED) {
                        lbl.setText(e.getItem().toString());
                    }
                }
            });

            cb.addItem("1");
            cb.addItem("2");
            cb.addItem("3");
            cb.addItem("4");
            cb.addItem("5");
            add(cb);

        }

    }

} 
```

基本上，当`itemStateChanged`事件触发时，您需要找到选中的项目并相应地更改标签的图标。此示例显示更改文本，但概念相同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T20:13:01.977

这是给你的伪代码。

```
import javax.swing.*;
import java.awt.event.*;
import java.awt.*;

public class ChangeJlableByJComboBox extends JFrame {

    private static final long serialVersionUID = 1L;

    public ChangeJlableByJComboBox() {
        super("TooltipInSwing");
        setSize(400, 300);
        getContentPane().setLayout(new FlowLayout());
        final JLabel b1;
        final JComboBox jb1 = new JComboBox(new String[] { " ", "one", "two",
                "three" });

        b1 = new JLabel("Default Lable");
        getContentPane().add(b1);
        getContentPane().add(jb1);

        jb1.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                // setting custom text to JLabel
                if (jb1.getSelectedItem().toString().equals("one"))
                    b1.setText("Lable one ---");
                else if (jb1.getSelectedItem().toString().equals("two"))
                    b1.setText("Lable two ---");
                else if (jb1.getSelectedItem().toString().equals("three"))
                    b1.setText("Lable three ---");
                else
                    b1.setText("----");

                // or Compact version for setting JcomboBox selected item 
                // to JLabel text

                // b1.setText(jb1.getSelectedItem().toString());
                System.out.println(jb1.getSelectedItem().toString());
                // you can also make use of following method
                System.out.println(jb1.getSelectedIndex());
            }
        });

        setDefaultCloseOperation(DISPOSE_ON_CLOSE);
        setVisible(true);
    }

    public static void main(String args[]) {
        new ChangeJlableByJComboBox();
    }
} 
```

我希望这将帮助您解决您的问题。

# javascript - 从 Rails 向 Highstock 添加数据

> ID：14529012
> 
> 赞同：0
> 
> 时间：2013-01-25T19:29:02.540
> 
> 标签：javascript, ruby-on-rails-3, highcharts, highstock

我正在尝试从我的 rails 应用程序将数据发送到 highstock 图表。Highstock 是一个 highchart javascript，它表示它需要以下格式的图表数据：

```
// Define the data points. All series have a dummy year
// of 1970/71 in order to be compared on the same x axis. Note
// that in JavaScript, months start at 0 for January, 1 for February etc.
   data: [[Date.UTC(1970,  9, 27), 0   ], [Date.UTC(1970, 10, 10), 0.6 ]] 
```

因此，我可以使用以下命令成功地将数据从 rails 发送到图表：

```
data:<%= @values.to_json %> 
```

但只有当@values 看起来像这样时：

```
@values = []
@company.values.each do |v|
  @values << v.total_value
end 
```

所以我知道它在这里得到了正确处理，但是这些值没有与之关联的日期，以便使它们以正确的顺序显示在图表上。因此，我尝试这样做以与他们一起获取日期：

```
@values = []
@company.values.each do |v|
  @values << [v.created_at.to_i*1000, v.total_value]
end 
```

我知道日期是正确的，因为当我渲染图表时，日期是正确的，但只有一个点，即使另一种方式（没有日期）产生了所有点，只是没有正确的日期数据。

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T22:42:02.923

上面详述的添加数据的方法是准确的，但是，请确保数据按升序排列，否则 highstock 将不知道如何正确绘制图表。

# java - 异常 - 非事务性

> ID：14529013
> 
> 赞同：0
> 
> 时间：2013-01-25T19:29:11.167
> 
> 标签：java, spring, hibernate

我是个问题：[Java+Spring: SEVERE Servletservice](https://stackoverflow.com/questions/14491093/javaspring-severe-servletservice)非常感谢您的帮助。我还有另一个问题：

```
Jan 25, 2013 8:10:20 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet [dispatcher] in context with path [/test] threw exception [Request processing failed; nested exception is org.hibernate.HibernateException: No Hibernate Session bound to thread, and configuration does not allow creation of non-transactional one here] with root cause
org.hibernate.HibernateException: No Hibernate Session bound to thread, and configuration does not allow creation of non-transactional one here
    at org.springframework.orm.hibernate3.SpringSessionContext.currentSession(SpringSessionContext.java:63)
    at org.hibernate.impl.SessionFactoryImpl.getCurrentSession(SessionFactoryImpl.java:622)
    at pl.ivmx.contact.dao.ContactDAOImpl.listContact(ContactDAOImpl.java:25)
    at pl.ivmx.contact.service.ContactServiceImpl.listContact(ContactServiceImpl.java:25)
    at pl.ivmx.contact.controller.ContactController.listContacts(ContactController.java:26)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:176)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:436)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:424)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

我将**return "/contact"**更改为**return "contact"**并`<context:component-scan base-package="pl.ivmx.contact" />`从**applicationContext.xml放入****dispatcher-servlet.xml**。有人可以再次帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T20:27:27.283

您`<bean id="contactService" class="pl.ivmx.contact.service.ContactServiceImpl"> </bean>`在 servlet 上下文中 - 您应该将服务类移动到根 Web 应用程序上下文（其中 `<tx:annotation-driven>`事务管理器是/应该声明的）。

基于 Spring AOP/Bean 后处理器的基础工具，如 Global Method Security、Transactions、Caching、PlaceholderConfigurers（处理`${..}`占位符的东西）在每个容器的基础上工作。由于`ContactServiceImpl`bean 是在调度程序 servlet 上下文中声明的，因此它没有被代理包装，因此`@Transactional`被忽略。

换句话说，您不应该将 DAO/Service 类放入 dispatcher-servlet.xml。

请参阅[Spring Framework 中 applicationContext.xml 和 spring-servlet.xml 之间的区别](https://stackoverflow.com/questions/3652090/difference-between-applicationcontext-and-spring-servlet-xml-in-spring)

# java - ant卸载android包

> ID：14529014
> 
> 赞同：0
> 
> 时间：2013-01-25T19:29:13.450
> 
> 标签：java, android, ant, android-manifest

是否可以使用 ant 从连接的设备上卸载应用程序，而无需在计算机上使用相同的包名称进行项目？

原因是我有一个 ant 构建脚本，它更改了包（和图标）的名称，所以连接的设备上会有很多应用程序，否则我必须在设备上一个一个地查找和卸载。

ant uninstall 似乎只根据当前清单名称卸载一个包，我似乎无法定位设备上的文件，没有进一步的了解

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T20:00:00.177

您可以将其添加到您的 ANT 脚本中，它将卸载一个打包的。您可能需要为此添加额外的目标。

```
 <exec executable="adb">
    <arg value="uninstall"/>
    <arg value="<packageName>"/>
  </exec> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T19:35:23.370

我很确定您不能通过 ADB 查询设备上的包。您只能直接定位文件。如果您更改包名称，那么您的脚本应该足够聪明，可以将其卸载。由于您实际上是在 Ant 中执行此过程。

为什么不尝试在更改包名后设置一个标志，然后执行一些逻辑来卸载新的包名，而不仅仅是传入的包名。这是假设您可以找到一种方法来导出新的包名取自旧名。或者一些一致的模式。

# java - 如何知道从哪个类接收到请求

> ID：14529016
> 
> 赞同：1
> 
> 时间：2013-01-25T19:29:20.033
> 
> 标签：java, jsp, validation, struts2, struts

我的应用程序中有一个`login.jsp`页面。我正在使用 Struts 2 和一个简单的`validate()`方法来验证我的表单。我有两个问题：

1.  `validate()`我的表单 bean 类中的方法验证表单。即检查空字段等。如果我需要检查我的用户名和密码组合，我应该在内部`validate()`还是在我的操作类中执行此操作？

2.  如果我在`Action`课堂上做同样的事情，正确的组合会导致成功页面。我希望不正确的组合导致我的 JSP 页面以及错误消息：“不正确的组合”。如何在我的 JSP 页面中检查请求来自操作类，以便它可以打印错误消息“错误组合”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T22:35:54.040

身份验证属于行动，而不是验证，IMO。

我*可能会*考虑对字段本身使用 XML 或注释验证并将登录尝试放入 中`validate()`，但代码很小，无论哪种方式我都会很舒服。

```
public String execute() {
    if (userService.loginValid(username, password) {
        return SUCCESS;
    }

    addActionError(getText("login.failure"));
    return FAILURE;
} 
```

我会使用框架对动作级错误消息的支持而不是使用标志（如果我这样做了，我不会将该标志与本地*重复*），并且我强烈建议使用可以注入的东西来执行实际登录使测试更容易。

使用该`validate()`方法使事情变得非常紧凑：

```
public void validate() {
    if (!userService.loginValid(username, password)) {
        addActionError(getText("login.failure"));
    }
} 
```

假设您定义了合理的“输入”和“成功”结果，这可能就是您所需要的。如果看代码的开发者熟悉框架，`validate()`版本就比较清晰了。

如果您对使用 XML 或注释验证不感兴趣，也可以手动进行。这*绝对*属于`validate()`，对于像这样的常用实用方法，静态导入使代码仍然相对简洁：

```
public void validate() {
    boolean tryLogin = true;

    if (isBlank(username)) {
        addFieldError("username", getText("login.username.required"));
        tryLogin = false;
    }

    if (isBlank(password)) {
        addFieldError("password", getText("login.password.required"));
        tryLogin = false;
    }

    if (tryLogin && !userService.loginValid(username, password)) {
        addActionError(getText("login.failure"));
    }
} 
```

（我添加了`tryLogin`标志以避免看到明显会失败的登录错误消息，尽管这也可以通过其他方式处理。登录后处理省略了。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T20:44:05.073

我会说您绝对不希望验证方法中的登录逻辑；那是为了验证数据。

我建议如果您的登录失败，只需在操作上公开一个数据属性，例如：

```
execute () {

   boolean authenticated = login( getUsername(), getPassword() );
   setLoginValid( authenticated );

   if ( authenticated ) 
      result = SUCCESS;
   else 
      result = FAILURE;

   return result;

} 
```

然后在您的 login.jsp 中，只需在 struts if 标记中包装一条有关错误凭据的消息，并测试 loginValid 属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T21:37:31.863

验证框架的目的是检查字段值是否有效，以防止在执行操作时出现意外错误。

将验证逻辑与业务逻辑分开是一种很好的做法。身份验证与验证逻辑无关。它是由安全机制提供的一个单独的过程。当然，您可以创建执行身份验证的操作或拦截器，并且与任何操作一样，您可以对其进行配置以进行验证。

[`validation`在 Struts2 中，通过将拦截器](https://struts.apache.org/core-developers/validation-interceptor.html)应用到处理请求的工作中，它更加简化了。在更复杂的场景中，身份验证成为业务逻辑的一部分，但验证输入字段的方法重命名相同。如果您的操作只是进行身份验证，那么您可能不需要验证来处理身份验证。

对于您的第二个问题：您所需要的只是`addActionError(getText("error.key"))`使该操作无效。然后返回结果`<s:actionerror>`显示消息的位置。

更重要的是，如果您决定将验证逻辑移到操作中，则验证逻辑保持不变。在这种情况下，您唯一需要做的就是删除验证堆栈。这种*验证*的唯一原因是返回与 不同的结果`"input"`。

# java - Android：Eclipse 不显示文件

> ID：14529018
> 
> 赞同：0
> 
> 时间：2013-01-25T19:29:38.077
> 
> 标签：java, android, itext

我正在我的一个项目的 res 文件夹下创建一个名为 xml 的子文件夹。在 xml 子文件夹中，我正在创建一个 xml 文件，但是当我双击项目资源管理器下的 xml 子文件夹时，该文件不显示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T19:39:12.707

它是 Eclipse 中的一种常见错误。

按顺序尝试这些事情：

```
1\. right click subfolder Xml> Refresh.   
2\. right click Res > Refresh.  
3\. File > Refresh. 
```

&如果这些不起作用

```
4\. Restart eciplse 
```

# java - Socket.close() 在 Socket.connect() 期间无效

> ID：14529021
> 
> 赞同：6
> 
> 时间：2013-01-25T19:29:45.987
> 
> 标签：java, multithreading, sockets

使用 Windows 上的默认套接字实现，我找不到任何有效的方法来停止`Socket.connect()`. [这个答案](https://stackoverflow.com/a/5395353/499922)表明`Thread.interrupt()`不会起作用，但`Socket.close()`会。但是，在我的试验中，后者也不起作用。

我的目标是快速而干净地终止应用程序（即清理工作需要在套接字终止后完成）。我不想使用超时，`Socket.connect()`因为可以在合理的超时到期之前终止进程。

```
import java.net.InetSocketAddress;
import java.net.Socket;

public class ComTest {
    static Socket s;
    static Thread t;

    public static void main(String[] args) throws Exception {
        s = new Socket();
        InetSocketAddress addr = new InetSocketAddress("10.1.1.1", 11);
        p(addr);
        t = Thread.currentThread();
        (new Thread() {
            @Override
            public void run() {
                try {
                    sleep(4000);
                    p("Closing...");
                    s.close();
                    p("Closed");
                    t.interrupt();
                    p("Interrupted");
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        }).start();
        s.connect(addr);
    }

    static void p(Object o) {
        System.out.println(o);
    }
} 
```

输出：

```
/10.1.1.1:11
Closing...
Closed
Interrupted
(A few seconds later)
Exception in thread "main" java.net.SocketException: Socket operation on nonsocket: connect 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T19:35:36.710

您分叉线程，然后主线程尝试建立与远程服务器的连接。套接字尚未连接，所以我怀疑`s.close()`未连接的套接字上什么也不做。很难看出 INET 套接字实现在这里做了什么。 `t.interrupt();`不会工作，因为它`connect(...)`是不可中断的。

`SocketChannel.connect(...)`您可以使用看起来可中断的 NIO 。也许是这样的：

```
SocketChannel sc = SocketChannel.open();
// this can be interrupted
boolean connected = sc.connect(t.address); 
```

不确定这是否会有所帮助。

# android - QuickQ 新手：Admob，我必须删除测试设备 id 还是没关系？

> ID：14529023
> 
> 赞同：2
> 
> 时间：2013-01-25T19:29:56.177
> 
> 标签：android, admob, android-xml

所以是的，通过使用 ads:testDevices="" 我添加了一些我的测试设备，看看我的 Admob 广告是否有效。现在我已经完成了所有的测试，我想发布我的应用程序。

是否必须从我的 XML 布局中删除该行代码？我的意思是真的只会影响那些设备吗？

我可以继续发布应用程序吗？保留测试线？

我知道的快速问题，我只是想确定，因为我有很多布局，小问题可能需要大量工作。

基本上留下ID有什么缺点吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-26T00:39:40.993

`ads:testDevices`仅将那些列入白名单的设备设置为测试模式，因此所有其他设备都会获得实时广告。所以在你的应用程序中留下这条线是很好的。

# jquery - 我的第一个 jqGrid 的基本配置

> ID：14529024
> 
> 赞同：0
> 
> 时间：2013-01-25T19:29:58.520
> 
> 标签：jquery, jqgrid

我只是在学习这个插件，阅读了 wiki，然后下载了演示，但我的 php 配置可能有问题，因为它只在 XML 请求服务器时显示 jqGrid，而在 JSON 中还没有。

无论如何，我正在尝试了解 jqGrid 的基本配置，然后 firebug 给我这个错误

```
TypeError: jQuery(...).jqGrid is not a function 
```

然后我在头部放了 1 行，它的作品

```
<script src="http://www.trirand.com/jqgridwiki/js/i18n/grid.locale-en.js" type="text/javascript"></script> 
```

我不明白，同时 src 是空的。而且，如果我用 www.stackoverflow.com 或 www.google.com 替换 src 它的作品

同时，如果我在本地服务器中使用 grid.locale-en.js，它就不起作用

我把我的第一个 jqGrid html[放在这里](http://www.padusi.com/ani/files/learn.txt)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T19:35:23.450

您的 grid.locale-en.js 需要在您调用 jqGrid 脚本之前出现。前任

```
<script src="~/Scripts/trirand/i18n/grid.locale-en.js" type="text/javascript"></script>
<script src="~/Scripts/trirand/jquery.jqGrid.min.js" type="text/javascript"></script> 
```

您还可以通过设置以下 jqGrid 属性来使您的生活更轻松：

```
data: mydata, 
```

而不是通过循环加载它。

jsfiddle 这样做的例子：http: [//jsfiddle.net/hekai/QEzhr/1/](http://jsfiddle.net/hekai/QEzhr/1/)

# jquery - jQuery datepicker - 更新值

> ID：14529036
> 
> 赞同：1
> 
> 时间：2013-01-25T19:30:35.283
> 
> 标签：jquery, datepicker

`a`我的日期选择器效果很好，但只要选择/更改“#todate”日期，我只需要使用所选日期更新(#daterange) 标记：

小提琴：http: [//jsfiddle.net/5HQeg/](http://jsfiddle.net/5HQeg/)

```
$(function () {

    var picker_from = $( '#fromdate' ).pickadate({
        onSelect: function() {
            var fromDate = createDateArray( this.getDate( 'yyyy-mm-dd' ) )
            picker_to.data( 'pickadate' ).setDateLimit( fromDate )
        },
        format: 'mmm dd, yyyy',
        formatSubmit: 'yyyy-mm-dd'
    });
    var picker_to = $( '#todate' ).pickadate({
        onSelect: function() {
            var toDate = createDateArray( this.getDate( 'yyyy-mm-dd' ) )
            picker_from.data( 'pickadate' ).setDateLimit( toDate, 1 )
        },
        format: 'mmm dd, yyyy',
        formatSubmit: 'yyyy-mm-dd'
    });
    function createDateArray( date ) {
        return date.split( '-' ).map(function( value ) { return +value })
    };

}); 
```

我找不到使用此 datepicker 插件执行此操作的功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T19:45:36.210

您需要为文本框编写 onchange 函数：

```
$('#todate').change(function () {
    $('.daterange').text($('#fromdate').val() + '-' + $(this).val());
}); 
```

这是[jsfiddle](http://jsfiddle.net/zaheerahmed/5HQeg/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T19:45:10.447

我不确定如何格式化日期，但是要将它们放在`a`标签中，这就是我所做的：

### [小提琴工作](http://jsfiddle.net/5HQeg/1/embedded/result/)

1.  `id`在 span 中添加一些s。

    ```
    <a href="#" class="daterange"><span id="numfrom">Dec 21, 2012 </span>-<span id="numto"> Jan 20, 2013</span></a> 
    ```

2.  编辑`onSelect`函数并将其附加：

    ```
    $('#numfrom').text(fromDate); // For the fromDate section 
    ```

最终函数变为：

```
var picker_from = $('#fromdate').pickadate({
    onSelect: function () {
        var fromDate = createDateArray(this.getDate('yyyy-mm-dd'));
        picker_to.data('pickadate').setDateLimit(fromDate);
        $('#numfrom').text(fromDate);
    },
    format: 'mmm dd, yyyy',
    formatSubmit: 'yyyy-mm-dd'
});
var picker_to = $('#todate').pickadate({
    onSelect: function () {
        var toDate = createDateArray(this.getDate('yyyy-mm-dd'));
        picker_from.data('pickadate').setDateLimit(toDate, 1);
        $('#numto').text(toDate);
    },
    format: 'mmm dd, yyyy',
    formatSubmit: 'yyyy-mm-dd'
}); 
```

# three.js - CTMLoader 未正确分配几何的实例

> ID：14529040
> 
> 赞同：1
> 
> 时间：2013-01-25T19:30:52.697
> 
> 标签：three.js, instanceof

如果我修改示例 webgl_loader_ctm.html 并在例程 callbackModel() 中添加以下代码行：

```
 if (geometry instanceof THREE.Object3D) alert("THREE.Object3D");
else if (geometry instanceof THREE.Geometry) alert("THREE.Geometry");
else alert("Unknown instanceof geometry"); 
```

我期待第二个警报被激活，但我得到了第三个。由于我的代码取决于 instanceof 是否正确，有人知道我必须在加载程序中更改什么才能解决此问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T13:23:41.997

CTMLoader 内置了两种主要的加载方法： 根据 useBuffers 参数，它创建 BufferGeometry 或 Geometry。您可能还想先检查 BufferGeometry（它不是 Geometry 的子类），或者将 useBuffers 参数设置为 false（我不熟悉 CTM，所以我不知道缓冲与普通的）。

无论如何，Three.js 对类的处理可能有点难以跟踪，并且一些相关的类可能不共享父类。你可能同意也可能不同意，但我可能会做一个检查[“如果它看起来像一只鸭子，它就是一只鸭子”](http://en.wikipedia.org/wiki/Duck_typing)的实例- 样式。所以检查一些只存在于 Object3D 或类似对象中的属性：

```
if (geometry.lookAt) {
  alert("Looks like Object3D, I know what to do with this");
} else if (geometry.vertices) {
  alert("Looks like Geometry with some vertices, I know what to do with this");
} else {
  alert("I dont know how to handle this object");
} 
```

# jquery - .load() 多个元素或 .get() 并将它们放置在正确的区域

> ID：14529041
> 
> 赞同：0
> 
> 时间：2013-01-25T19:30:59.867
> 
> 标签：jquery, get, load

我正在为我的论坛站点制作此消息查看器。我有这段代码要开始，我最初使用 .load() ，现在尝试 .get() 无法弄清楚如何解决这个问题。

我正在处理的代码

```
$('#message_holder').load('/privmsg?folder=inbox .tdtopics:lt(5)');
  $('#view_mess').click(function() {
     var msg = $('.tdtopics a').attr('href');
 $.get( msg, function() {
    $.each('div.posthead h2, .user-basic-info , .entry-content');
}, 'html');
     $('#mess_wrapper').show();
  });
}); 
```

所以`.each( -elements- );`我需要从 url 中专门加载这些

`.get(msg`msg 当然是变量。我需要将它们分别加载到我的特定 html 中。

前任___

新消息

```
<div id="mess_wrapper">
 <div id="new_mess_pop">
  <div id="inner_mess_wrapper">
      <span id="post_date_time">-- div.posthead h2 element here --</span>
       <div id="users_contact_info">-- .user-basic-info element here --</div>
         <div id="message_post">-- .entry-content element here --</div>
  </div>
 </div>
</div>
  <div id="message_holder">HIDDEN PLACE HOLDERS</div> 
```

谁能帮我弄清楚`.get()`以及如何在点击事件中自动将它们附加到正确的 id 上？我正在自学一切，所以如果有人能给我一个很好的解释以及如何去做，那将非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T21:43:39.920

```
$('#view_mess').click(function() {
  var msg = $('.tdtopics a').attr('href');
  $.get(msg, function (data) {
      var elems = $(data);
      $('#post_date_time').append(elems.find('div.posthead h2'));
      $('#users_contact_info').append(elems.find('.user-basic-info'));
      $('#message_post').append(elems.find('.entry-content'));
  }, 'html');
  $('#mess_wrapper').show();
}); 
```

# python - Python：字符串格式错误/w字典/列表读取期间的参数转换

> ID：14529043
> 
> 赞同：0
> 
> 时间：2013-01-25T19:31:10.370
> 
> 标签：python

这些委员会的新手，了解有协议，任何批评都值得赞赏。几天前我已经开始进行 python 编程，并且正在努力追赶。该程序的基础是读取文件，将特定出现的字符串转换为文档中位置的字典。问题比比皆是，我会采取所有的回应。

这是我的代码：

```
f = open('C:\CodeDoc\Mm9\sampleCpG.txt', 'r')
cpglist = f.read()
def buildcpg(cpg):
    return "\t".join(["%d" % (k) for k in cpg.items()])

lookingFor = 'CG'
i = 0
index = 0
cpgdic = {}
try:
    while i < len(cpglist):
        index = cpglist.index(lookingFor, i)
        i = index + 1
        for index in range(len(cpglist)):
            if index not in cpgdic:
                cpgdic[index] = index
        print (buildcpg(cpgdic))
except ValueError:
    pass
f.close() 
```

cpgdic 应该充当在索引中获得的位置参考的字典。每次读取索引都应该输入 cpgdic 作为新值，并且打印 (buildcpg(cpgdic)) 是我对逻辑失败的预感。我相信（？？）它将cpgdic传递给buildcpg函数，它应该作为'CG'的所有位置的输出返回，但是出现错误“TypeError：不是所有参数在字符串格式化期间转换”。到你了！

附言。这会破坏我的 2GB 内存；我需要通过更多阅读来提高

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T19:33:53.220

`cpg.items`正在产生元组。因此，`k`is a `tuple`(length 2) 然后您尝试将其格式化为单个整数。

* * *

`[`附带说明一下，如果您将and`]`放在`join`一行中，您可能会更节省内存。这会将您的列表理解转换为更好的生成器表达式。如果你在 python2.x 上，你可以使用`cpg.iteritems()`代替`cpg.items()`来节省一点内存。

* * *

存储键和值相同的字典也没有什么意义。在这种情况下，一个简单的列表可能更优雅。我可能会这样写代码：

```
with open('C:\CodeDoc\Mm9\sampleCpG.txt') as fin:
     cpgtxt = fin.read()

indices = [i for i,_ in enumerate(cpgtxt) if cpgtxt[i:i+2] == 'CG']
print '\t'.join(indices) 
```

这是在行动：

```
>>> s = "CGFOOCGBARCGBAZ"
>>> indices = [i for i,_ in enumerate(s) if s[i:i+2] == 'CG']
>>> print indices
[0, 5, 10] 
```

注意

```
i for i,_ in enumerate(s) 
```

与

```
i for i in range(len(s)) 
```

除了我不喜欢`range(len(s))`和以前的版本可以使用任何可迭代的——不仅仅是序列。

# r - 在R中的引用类中设置全局变量

> ID：14529044
> 
> 赞同：1
> 
> 时间：2013-01-25T19:31:14.393
> 
> 标签：r, reference-class

在阅读了很多堆栈溢出问题后，我对全局变量赋值有点困惑。我已经研究过 [R 中的全局变量](https://stackoverflow.com/questions/1236620/global-variables-in-r)和其他类似的问题

我有以下情况。我有 2 个全局变量`current_idx`和`previous_idx`. 这两个全局变量由引用类中的方法设置。

本质上，使用`<<-`赋值运算符应该可以正常工作吗？但是，我收到了这个警告

```
Non-local assignment to non-field names (possibly misspelled?) 
```

我哪里错了？

**编辑**

使用`assign(current_idx, index, envir = .GlobalEnv)`作品，即我没有收到警告。有人可以对此有所了解。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T19:40:18.717

You are confusing "global variables" and Reference Classes which are a type of environment. Executing `<<-` will assign to a variable with that name in the parent.frame of the function. If you are only one level down from the .GlobalEnv, it will do the same thing as your assign statement.

If you have a Reference Class item you can assign items inside it by name with:

```
ref_item$varname <- value 
```

Easier said than done, though. First you need to set up the ReferenceClass properly:

[http://www.inside-r.org/r-doc/methods/ReferenceClasses](http://www.inside-r.org/r-doc/methods/ReferenceClasses)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-13T01:01:41.743

发生这种情况是因为从引用类方法中修改引用类字段的默认方法是使用`<<-`. 例如，在：

```
setRefClass(
  "myClass", 
  fields=list(a="integer"), 
  methods=list(setA=function(x) a <<- x)
) 
```

您可以通过该方法修改`a`参考类的字段。`setA`因为这是通过引用类中的方法设置字段的规范方式，所以 R 假定`<<-`在引用方法中的任何其他使用都是错误的。因此，如果您尝试分配存在于引用类以外的环境中的变量，R“有用地”警告您可能有错字，因为它认为`<<-`在引用方法中唯一可能使用的是修改引用字段.

您仍然可以使用`<<-`. 警告只是一个警告，也许你正在做一些你不打算做的事情。如果您打算写入全局环境中的对象，则警告不适用。

通过使用`assign`，您绕过了引用方法执行的检查，以确保您不会在引用方法的赋值中意外输入字段名称，因此您不会收到警告。另外，请注意，它`assign`实际上以您提供的环境为目标，而`<<-`只会在词法搜索路径中找到该名称的第一个对象。

综上所述，在极少数情况下，您实际上希望引用方法确实直接写入全局环境。你可能需要重新考虑你在做什么。您应该问自己为什么这两个变量不仅仅是引用类中的字段而不是全局变量。

# razor - 如何处理 MVC4 asp.net 应用程序中的空格（无 c#）

> ID：14529045
> 
> 赞同：0
> 
> 时间：2013-01-25T19:31:17.010
> 
> 标签：razor, asp.net-mvc-4, razor-declarative-helpers

我无法在 foreach 循环中插入逗号中的空格。有一个更好的方法吗？它打扰了

```
@{ var multipleSpeakerSeparator = " "; }
@foreach (var speaker in session.SpeakersList)
{
     @multipleSpeakerSeparator <a href="@(speaker.SpeakerLocalUrl)"> 
     @speaker.UserFirstName @speaker.UserLastName </a>multipleSpeakerSeparator = ",";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T19:36:27.023

为什么不使用 String.Join：

```
String.Join(",", session.SpeakersList.Select(i => "<a href=" + 
               i.SpeakerLocalUrl + ">..</a>"); 
```

我不知道您是否可以在 String.Join 中使用 @ 语法，以及它如何工作，以及它如何与 String.Join 一起工作。否则，使用如上所示的字符串连接将起作用。

如果您尝试注入空格，则应适当呈现空格文字。我很惊讶它没有。无论如何，使用 foreach 方法，您应该能够做到`@<text> </text>`，并且可以有条件地做到：

```
@for (var i = 0; i < session.SpeakersList.Count; i++)
{
     @{ 
       if (i > 0) { <text> </text> }
     }

     <a href="@(speaker.SpeakerLocalUrl)"> 
     @speaker.UserFirstName @speaker.UserLastName </a>multipleSpeakerSeparator = ",";
} 
```

# python - Python SQLAlchemy after_insert MapperEvent

> ID：14529046
> 
> 赞同：0
> 
> 时间：2013-01-25T19:31:18.293
> 
> 标签：python, mysql, sqlalchemy

所以我是 SQLAlchemy 的新手，我想在创建新的用户对象后默认创建一个权限对象。阅读文档似乎 after_insert 映射器事件是我应该使用的。问题是在实际提交对象之前调用了事件侦听器。

有没有办法让 Permissions 对象至少放入可能的事务中或在实际提交用户对象后要创建的对象列表中。

```
class Users():
  __tablename__ = 'users'
  user_id = Column(String(36), primary_key=True, nullable=False)
  .......

class Permissions():
  __tablename__ = 'permissions'
  user_id = Column(String(36), ForeignKey('users.user_id'), primary_key=True,
                   nullable=False)
   ..........

@event.listens_for(Users, "after_insert)
def create_permissions(mapper, connection, user):
    connection.execute(Permissions.__table__.insert(user_id=user.user_id)) 
```

IntegrityError: (IntegrityError) (1452, '无法添加或更新子行：外键约束失败

理想情况下，我希望在用户表上没有数据库触发器的情况下执行此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T16:35:57.403

您不需要将会话附加到 ORM 对象。只需使用 sqlalchemy.orm 模块中的 object_session 函数，如下所示：

```
from sqlalchemy.orm import object_session

@event.listens_for(Users, 'after_insert')
def create_permissions(mapper, connection, user):
    object_session(user).add(Permissions(user_id=user.user_id)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T20:52:14.160

因此，通过更改我的类定义，并将会话对象附加到每个类，我可以在发出 after_insert 信号时添加一个新的 Permissions 对象。并且正确的提交顺序发生了。

```
class Users():
  __tablename__ = 'users'
  user_id = Column(String(36), primary_key=True, nullable=False)
  ............

class Permissions():
  __tablename__ = 'permissions'
  user_id = Column(String(36), ForeignKey('users.user_id'), primary_key=True,
                   nullable=False)
   ............

@event.listens_for(Users, "after_insert")
def create_permissions(mapper, connection, user):
    user.session.add(Permissions(user_id=user.user_id)) 
```

# java - Java中骨干js的后端实现

> ID：14529058
> 
> 赞同：4
> 
> 时间：2013-01-25T19:32:16.340
> 
> 标签：java, rest, backbone.js

我将**Backbone JS**用于前端，而后者又使用 Rest 协议来调用服务器上的后端。那么在**Java**中实现后端代码的正确方法是什么？

为此，我是否需要在我的服务器上实现 Web 服务，或者我可以使用 Servlet 进行管理？如果我能够使用 servlet 进行管理，那么任何关于它的指针对我来说都会非常有用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T20:45:23.647

我知道有 3 个大框架——它们都是 JAX-RS 的实现

*   高枕无忧
*   球衣
*   杰克逊

当然，您可以手动完成（servlet），但是：

1.  你会犯很多错误
2.  会很难
3.  代码将难以维护

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-22T11:07:26.997

是的，您应该实现 REST api。这对您的应用会很方便。Backbone.sync 用于调用 REST 服务。

看看： [http ://documentcloud.github.io/backbone/#Sync](http://documentcloud.github.io/backbone/#Sync)

# python - 没有 PYTHONPATH 时，PYTHONPATH 是什么？

> ID：14529060
> 
> 赞同：6
> 
> 时间：2013-01-25T19:32:18.540
> 
> 标签：python, linux, environment-variables

我需要向我的 . 添加一个新的目录位置`PYTHONPATH`，但问题是我在一个干净的、新安装的系统 (Linux) 上，`PYTHONPATH`尚未定义。我已经阅读并使用过`PYTHONPATH`，并且我认为我已经很好地理解了它，但是我不知道当不`PYTHONPATH`存在时发生了什么。

我不能附加到不存在的东西上，但我希望目前发现的所有重要库仍然可以工作，所以要小心，从 Python`print str(sys.path)`中获取所有标准值。然后我定义了一个`env`-variable 来`PYTHONPATH`包含我刚刚找到的所有节点，以及我的新目录。但是哇，很多东西都停止工作了！Python 对新的`env`-variable 感到如此混乱，以至于我不得不将其删除，此时一切都恢复了。糟糕`PYTHONPATH`的是，系统非常混乱，当在提示符下输入不正确的命令时，甚至找不到要显示的错误消息。

我的问题不是像缺少冒号这样简单的问题，或者当我应该使用冒号时使用分号；我检查了。我的新目录也不会导致问题，因为即使没有新节点，问题仍然存在。那么谁能解释为什么这种方法不起作用？

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

下面我根据要求提供了额外的详细信息，但无需再阅读任何内容，我认为问题已解决。PYTHONPATH 中列出的节点不会覆盖所有“标准”节点而是成为新的附加条目（我相信在前面，所以人们可以控制先出现的）的解释是关键。

从头开始，不定义 PYTHONHOME 或 PYTHONPATH，在 Python 中会产生这样的结果：

```
print ':'.join(sys.path)      
:/usr/lib/python2.7:/usr/lib/python2.7/plat-linux2:/usr/lib/python2.7/lib-tk:/usr/lib/python2.7/lib-old:/usr/lib/python2.7/lib-dynload:/usr/local/lib/python2.7/dist-packages:/usr/lib/python2.7/dist-packages:/usr/lib/python2.7/dist-packages/PIL:/usr/lib/python2.7/dist-packages/gst-0.10:/usr/lib/python2.7/dist-packages/gtk-2.0:/usr/lib/python2.7/dist-packages/ubuntu-sso-client 
```

将其用作 PYTHONPATH（即，在调用 Python 之前定义环境变量）会导致命令提示符的功能非常差，即使没有明确使用 Python。例如：

```
$> export PYTHONPATH='/usr/lib/python2.7:/usr/lib/python2.7/plat-linux2:/usr/lib/python2.7/lib-tk:/usr/lib/python2.7/lib-old:/usr/lib/python2.7/lib-dynload:/usr/local/lib/python2.7/dist-packages:/usr/lib/python2.7/dist-packages:/usr/lib/python2.7/dist-packages/PIL:/usr/lib/python2.7/dist-packages/gst-0.10:/usr/lib/python2.7/dist-packages/gtk-2.0:/usr/lib/python2.7/dist-packages/ubuntu-sso-client'

$> echo $PYTHONPATH        
/usr/lib/python2.7:/usr/lib/python2.7/plat-linux2:/usr/lib/python2.7/lib-tk:/usr/lib/python2.7/lib-old:/usr/lib/python2.7/lib-dynload:/usr/local/lib/python2.7/dist-packages:/usr/lib/python2.7/dist-packages:/usr/lib/python2.7/dist-packages/PIL:/usr/lib/python2.7/dist-packages/gst-0.10:/usr/lib/python2.7/dist-packages/gtk-2.0:/usr/lib/python2.7/dist-packages/ubuntu-sso-client

$> IntentionalBadCommand       
Fatal Python error: Py_Initialize: Unable to get the locale encoding    
 File "/usr/lib/python2.7/encodings/__init__.py", line 123    
raise CodecRegistryError,\    
                        ^
SyntaxError: invalid syntax       
Aborted 
```

错误是认为 PYTHONPATH 需要包含所有需要的东西的整个宇宙。是的，我在发帖之前做过 RTFM，但我想我错过了开头单词“Augment”的意义。因此，接受并非所有内容都需要明确指定的建议——可以只指定一个人想要的额外添加，我尝试了：

```
$> export PYTHONPATH=/usr/lib/python2.7/dist-packages/postgresql-pkg

$> echo $PYTHONPATH         
/usr/lib/python2.7/dist-packages/postgresql-pkg

$> IntentionalBadCommand       
IntentionalBadCommand: command not found 
```

所以它似乎正在工作，虽然我还没有尝试使用上面提到的 postgresql 包。仍然有点神秘，为什么在 PYTHONPATH 中添加大量不必要的节点会使事情变得如此糟糕，尤其是因为我从应该可靠的来源获得了条目：sys.path。

但无论如何，它可能已经解决了，所以谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-25T19:43:31.577

目前尚不清楚您的问题可能是什么，但请注意，您不需要将默认值添加`sys.path`到`PYTHONPATH`变量中。您放入的目录是要搜索`PYTHONPATH`的*附加目录；*系统默认值附加到您的`PYTHONPATH`. 换句话说，粗略地说：

```
sys.path = ":".split( os.environ['PYTHONPATH'] ) + sys.path 
```

显示的确切值`PYTHONPATH`和由此产生的错误将有助于我们确定问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T19:40:45.277

On Unix Systems, it should translate to /usr/local/lib/python** where ** is Python version...Like 2.7 and so on...

Your answer actually lies in the definition of PYTHONPATH and PYTHONHOME variables.

[http://docs.python.org/2/using/cmdline.html#envvar-PYTHONHOME](http://docs.python.org/2/using/cmdline.html#envvar-PYTHONHOME)

The default search path is installation dependent, but generally begins with prefix/lib/pythonversion (see PYTHONHOME above). It is always appended to PYTHONPATH.

I would suggest you also try this

```
import sys    
sys.path.append('Directory you wanna add to the path') 
```

Hope this helps.

# php - 在（预定的）帖子发布时运行函数

> ID：14529065
> 
> 赞同：1
> 
> 时间：2013-01-25T19:32:29.897
> 
> 标签：php, wordpress

每当我博客上的帖子发布时，我都想运行`create_api_cache()`-function。为了实现这一点，我在我的`functions.php`.

当我写完后直接发布帖子时，它会起作用。但是当我将帖子安排在稍后的时间时，该功能根本没有运行。是否有另一个动作我必须链接到函数来实现这种行为？

```
add_action('new_to_publish', 'create_api_cache');
add_action('draft_to_publish', 'create_api_cache');
add_action('pending_to_publish', 'create_api_cache');
add_action('pre_post_update', 'create_api_cache');
add_action('future_to_publish', 'create_api_cache');

function create_api_cache() {
    global $post;
    $postname = $post->post_name;

    if(strlen($postname)) {
        $url = 'http://api.dummydomain.com/1/cache/create/' . $postname;
        file_get_contents($url);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T10:59:48.303

似乎没有办法在functions.php中做这种事情。目前，cronjob 将是我的解决方案。

# c++ - 以编程方式检测对表行的更改

> ID：14529070
> 
> 赞同：2
> 
> 时间：2013-01-25T19:32:59.760
> 
> 标签：c++, mysql, database

有没有办法以编程方式检测数据库表中的某一行是否已更改？

我希望我的应用程序知道表格行已被修改的那一刻。我总是可以做一个标准的查询更新循环，但我想知道是否有更好更简单的方法可以忽略。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T19:43:16.203

MySQL 当前支持的唯一机制是触发器。您可以设置一个在更新发生时发生的触发器，并使用该触发器执行某些操作以使用 sys_exec() 或类似方法通知您的应用程序。

请注意，更新触发器仅在通过 SQL 进行更新时捕获，而不是其他情况（例如 API、NDB）。

# mule - 如何在 Mule 中获取环境信息

> ID：14529074
> 
> 赞同：1
> 
> 时间：2013-01-25T19:33:08.743
> 
> 标签：mule

我需要在`mule-config.xml`. 有没有办法在骡子中获取环境信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T20:26:19.293

您可以通过 MEL 访问所有系统属性。但我宁愿建议您将配置模块化到几个文件中（例如：common-config.xml、test-config.xml、prod-config.xml），并在 Mule 启动时根据环境加载正确的文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-22T06:30:15.520

您还可以为每个环境创建属性文件并在 mule 配置文件中访问它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-03T14:45:02.593

您可以使用所有配置创建 xml 文件并将文件导入/加载到 mule 项目中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-15T06:22:14.703

在您的 Mule 配置文件 (src/main/app/app-config-file.xml) 中，您可以添加以下行：

```
<context:property-placeholder location="${environment.name}.properties" /> 
```

${environment.name} 必须是系统环境变量。您需要确保部署应用程序的系统包含该变量。如果您使用的是 Maven（全新安装 -Denvironment.name=test），我认为您也可以在 Maven 构建中指定它。你可以试试。

要在本地进行测试，请右键单击您的项目，选择运行方式，选择运行配置，单击环境选项卡，添加变量“environment.name”和值“local”（不带引号）并确保您的 local.properties 文件存在于添加到构建路径的位置。例如，它可以是 src/main/app 或资源文件夹中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-24T19:16:14.000

MEL 有一些上下文对象，如服务器、mule、应用程序使用这些你可以从 #[server.env] 获取环境信息以获取更多信息，请参阅 [https://docs.mulesoft.com/mule-user-guide/v/3.6/mule -表达式语言基本语法](https://docs.mulesoft.com/mule-user-guide/v/3.6/mule-expression-language-basic-syntax)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-12-02T18:19:51.910

您可以使用不同的 mule 属性文件，例如 Mule-dev.properties 、 mule-test.properties。在全局元素中添加一个属性占位符：

在 mule-app.properties 中，根据您要使用的 env 值定义 env= test 或 dev。

清理项目并部署。有时它无法读取 env 特定的属性。清理项目解决了这个问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-01-18T09:23:10.187

您可以在项目中添加一个属性文件并从属性占位符中引用它。最好在 mule-app.properties 文件中添加环境值 ehich 在 /src/main/app

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-11-29T14:47:40.007

您可以在此 mule-app.properties 中拥有一个类似 mule.env 的变量，并从 cloudhub 属性将值作为 DEV、QA、UAT、PROD 发送到此属性，并在 mule/src/app 主资源中创建不同的属性文件，然后使用 Properties 占位符配置此属性文件并从 cloudhub 动态发送 mule-env 的值

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-03-01T06:41:02.927

通常这样做的方式是删除一个属性 bean，您可以在其中设置环境特定的值，如 PROD、QA、DEV 或本地。此环境特定值在 mule-app.properties 中设置，例如 mule.env=local，这需要设置为我们尝试部署它的环境，并且 API 会选择正确的属性文件。

# android - 如何在代码中将 android:width 设置为 0dp？

> ID：14529075
> 
> 赞同：7
> 
> 时间：2013-01-25T19:33:09.850
> 
> 标签：android, layout, button

我正在尝试通过代码动态添加按钮。

但我坚持如何通过代码设置`android:layout_width`按钮。`0dp`

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-25T19:39:26.510

尝试这个 ：

```
LayoutParams lp = new LayoutParams(0, LayoutParams.WRAP_CONTENT);
myButton.setLayoutParams(lp); 
```

进口，

```
import android.view.ViewGroup.LayoutParams; 
```

谢谢

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-25T19:41:40.110

Your button have layoutParams. Get those params, update the width and reapply them:

```
ViewGroup.LayoutParams lp = (ViewGroup.LayoutParams)myButton.getLayoutParams();
lp.width = 0;
myButton.setLayoutParams(lp); 
```

# c# - 基于字符串选择多个属性的值

> ID：14529076
> 
> 赞同：3
> 
> 时间：2013-01-25T19:33:18.590
> 
> 标签：c#, .net

我正在构建一个自动化的工作流系统，它必须根据正在读取的文件的名称设置 4 个字符串值。我有一个有效的 switch 语句，但正如您将在示例中看到的那样，我在不同的文件名之间有很多共享值。我正在寻找一种方法来简化此代码，因为很快我将有多达 40 个不同的文件名可供使用。

必须为每个文件分配以下属性：AccountName、CampaignName、DocumentName 和 DestinationName。帐户和活动经常在相似文件之间共享，但文档几乎总是唯一的。请参阅下面的示例。

```
case "Cow":
    accountName = "Farm Animals";
    campaignName = "Quadrupeds";
    documentName = "Milk Givers";
    destinationName = "Milking Line";
    break;
case "Chicken":
    accountName = "Farm Animals";
    campaignName = "Bipeds";
    documentName = "Egg Layers";
    destinationName = "Coupe";
    break;
case "Turkey":
    accountName = "Farm Animals";
    campaignName = "Bipeds";
    documentName = "Dinner";
    destinationName = "My Table";
    break;
case "Dog":
    accountName = "Farm Animals";
    campaignName = "Quadrupeds";
    documentName = "Best Friend";
    destinationName = "Front Porch";
    break;
case "Pig":
    accountName = "Farm Animals";
    campaignName = "Quadrupeds";
    documentName = "Bacon";
    destinationName = "My Plate";
    break; 
```

我不知道字典是否是我正在寻找的，或者我是否会构建一个自定义类，我可以使用 LINQ 选择值，这就是我在这里的原因。

我想减少值的重复以使其更易于管理。类似于微关系数据库的东西，用于保存不同的值以及属于它们的文档。

**我的问题是：有没有更好的方法可以在没有 switch 语句的情况下解决这个问题？根据我的需要，我的问题是否有更好的名称？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T19:50:16.357

您可以使用如下所述的字典：-

```
 public  class ElementName
    {
        public string AccountName { get; set; }
        public string CampaignName { get; set; }
        public string DocumentName { get; set; }
        public string DestinationName { get; set; }
    }
        var animalNameDict = new Dictionary<string, ElementName>
            {
                {
                    "cow",
                    new ElementName
                        {
                            AccountName = "Farm Animals",
                            CampaignName = "Quadrupeds",
                            DocumentName = "Milk Givers",
                            DestinationName = "Milking line"
                        }
                }
            };
        ElementName elem = null;
        animalNameDict.TryGetValue("cow", out elem);

        var item = animalNameDict.FirstOrDefault(x => x.Key == "cow"); 
```

或者您可以将其转换为类列表并使用 linq 扩展 ToLookup。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T20:17:17.313

好的，所以每个参数都是与每只动物相关的一对多关系。我的解决方案是为每个参数创建字典，类型为`Dictionary<string, List<string>>`，如下所示：

```
var accountNames = new Dictionary<string, List<string>>
    {
        {"Farm Animals", new List<string> {"Cow", "Chicken", "Turkey", "Dog", "Pig"}}
    }; 
```

然后您将以类似于此的方式使用它（此示例使用匿名类型）。您可能希望为值检索创建一个扩展方法以清理代码并使其不区分大小写。

```
foreach(var animal in animals)
{
    var item = new
        {
            AccountName = accountNames.First(x => x.Value.Contains(animal)).Key
        };
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T20:11:23.560

您可以考虑使用反射来使用工厂来创建动物：

```
namespace mynamespace
{
    public class FarmAnimal
    {
        public string accountName = "Farm Animals";
    }
    public class Quadruped : FarmAnimal
    {
        public string campaignName = "Quadrupeds";
    }
    public class Dog : Quadruped
    {
        public string documentName = "Best Friend";
        public string destinationName = "Front Porch";

        public override string ToString()
        {
            return String.Format("{0} : {1} : {2} : {3}", accountName, campaignName, documentName, destinationName);
        }
    }

    public class AnimalFactory
    {
        public static FarmAnimal create(string fileName)
        {
            try {
                ObjectHandle h = Activator.CreateInstance(null, "mynamespace." + fileName);
                return  (FarmAnimal)h.Unwrap();
            }
            catch (Exception) {
                return null;
            }
        }
    }

    class Program
    {
        static void Main(string[] args)
        {
            FarmAnimal a = AnimalFactory.create("Dog");
            Console.WriteLine(a);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-25T20:06:40.030

确实没有办法减少代码行数，因为如果不将某些东西连接到某个地方，就无法知道什么`accountName`或`campaignName`选择什么。您可以像 TYY 建议的那样设置字典，但它仍然需要为每个文件（类型？）分配四个分配。

无论哪种方式，我都建议至少在某处将常用字符串（例如`"Farm Animals"`and `"Quadrupeds"`）定义为常量，以减少 type-os 的机会并在需要时更容易更改。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-25T19:40:59.240

An approach would be to use the [Factory](http://msdn.microsoft.com/en-us/library/ee817667.aspx) or [Prototype](http://en.wikipedia.org/wiki/Prototype_pattern). This way you can delegate this code to another project and do whatever you want.

# iphone - iOS：UIPrintInteractionController 如何更改 chrome 颜色？

> ID：14529077
> 
> 赞同：1
> 
> 时间：2013-01-25T19:33:22.500
> 
> 标签：iphone, ios, xamarin.ios, airprint, uiprintinfo

在 iOS 中，如何更改打印弹出窗口周围的 chrome 的颜色？

（Objective-C 或 C# 一样好）

这是我显示打印机的方式：

```
 var printInfo = UIPrintInfo.PrintInfo;
     printInfo.OutputType = UIPrintInfoOutputType.General;

     var printer = UIPrintInteractionController.SharedPrintController;
     printer.PrintInfo = printInfo;
     printer.PrintFormatter = webView.ViewPrintFormatter;
     printer.ShowsPageRange = true;
     printer.PresentFromBarButtonItem(btnShare, true, (handler, completed, err) => {
        if (!completed && err != null)
        {
           UIAlertHelper.ShowAlert(
              "Unable to Print",
              "Sorry, we were not able to access printers from your device.",
              "Ok",
              null
              );  
        }
     }
     ); 
```

这是一个屏幕截图：

[http://i.stack.imgur.com/3LbV0.jpg](http://i.stack.imgur.com/3LbV0.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T20:51:43.573

这里最聪明的做法是子类化弹出窗口并使用不同的边框颜色对其进行初始化，类似于子类化 uialertview 的方式。

# php - 在两个表之间传递值

> ID：14529079
> 
> 赞同：0
> 
> 时间：2013-01-25T19:33:26.247
> 
> 标签：php, javascript

我在这里开发了一个交易功能。但是我在使用 javascript 时遇到了麻烦。正如您在下面看到的，有两个表，其中第一个用于显示项目，第二个用于购买。我想要做的是，第一个表中项目的行是可点击的。单击该行时，已选择的项目出现在第二个表中。并且在第二个表格中的折扣单元格是可编辑的，总价格会因折扣而变化。谁能帮我在这两个表之间传递值？

```
<fieldset>
<legend>Item Show</legend>
<table border="1">
<tr>
  <td>Item Name</td>
    <td>Item Code</td>
    <td>Manufacturer</td>
    <td>Price</td>
    <td>Stock</td>
</tr>
<?php
while($row = mysql_fetch_array($result))
  {
?>
<tr>
  <td><?php echo $row['item_name']; ?></td>
    <td><?php echo $row['item_code']; ?></td>
    <td><?php echo $row['item_manufacturer']; ?></td>
    <td><?php echo $row['sell_price']; ?></td>
    <td><?php echo $row['stock']; ?></td>
</tr>
<?php
}
?>
</table>
</fieldset>

<fieldset>
<legend>Item Sale</legend>
<table border="1">
<tr>
  <td>Item name</td>
    <td>Item Code</td>
    <td>Stock</td>
    <td>Price</td>
    <td>Quantity</td>
    <td>Discount</td>
    <td>Total Price</td>
</tr>
</table>
</fieldset> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T19:42:47.677

以下是您应该遵循的步骤。

1.  给所有喜欢的人上一个共同的课程
2.  使用 jQuery 事件，例如

    ```
     $(".clickable").on('click',function(e,this){
        //a.use "this" here to extract values that you want to pass to other table
        //b.append <tr><td></td>....</tr> with this.values to your table

    }) 
    ```

如果你能做到以上 - - 一切都会好起来的

# grails - 跟踪用户和游戏的域类

> ID：14529081
> 
> 赞同：0
> 
> 时间：2013-01-25T19:33:37.243
> 
> 标签：grails, many-to-many, grails-orm

我正在尝试做一些看起来很简单的事情。我有一个用户类，我有一个匹配两个用户的游戏类。就是这么简单：

```
class User {
    String username
    static hasMany = [games:Game]
}

class Game {
    User player1
    User player2
} 
```

当我运行这个时，我得到了

```
Caused by GrailsDomainException: Property [games] in class [class User] is a bidirectional one-to-many with two possible properties on the inverse side. Either name one of the properties on other side of the relationship [user] or use the 'mappedBy' static to define the property that the relationship is mapped with. Example: static mappedBy = [games:'myprop'] 
```

所以我做了一些挖掘并找到了[mappedBy](http://grails.org/doc/latest/ref/Domain%20Classes/mappedBy.html)并将我的代码更改为：

```
class User {
    String username
    static hasMany = [games:Game]
    static mappedBy = [games:'gid']
}

class Game {
    User player1
    User player2
    static mapping = {
        id generator:'identity', name:'gid'
    }
} 
```

现在我明白了

```
Non-existent mapping property [gid] specified for property [games] in class [class User] 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T20:51:58.580

所以这可能是你想要的：

```
class User {

    static mappedBy = [player1Games: 'player1', player2Games: 'player2']

    static hasMany = [player1Games: Game, player2Games: Game]

    static belongsTo = Game
}

class Game {
    User player1
    User player2
} 
```

编辑新规则：

```
class User {
    static hasMany = [ games: Game ]
    static belongsTo = Game
}

class Game {
    static hasMany = [ players: User ]
    static constraints = {
        players(maxSize: 2)
    }
} 
```

# php - 如何将一个字符串分成 10 个变量

> ID：14529083
> 
> 赞同：-4
> 
> 时间：2013-01-25T19:33:44.123
> 
> 标签：php, variables

假设我有一个带有字符串的变量，如下所示：

```
$data="Fusce massa leo, pharetra sit amet tempus vitae, gravida nec est. Suspendisse at commodo sapien. Duis purus tortor, porttitor nec viverra ut, tempus at justo. Curabitur aliquam, odio non rhoncus aliquet, nulla felis laoreet lacus, sit amet facilisis nunc orci nec erat. Sed interdum, tellus in venenatis vehicula, tortor mauris gravida nisl, eget elementum tortor libero vulputate urna. Nullam euismod porta quam eu imperdiet. Aenean sit amet mauris mauris, id facilisis lectus. Cras sed diam ut nisl imperdiet mattis non a lorem. Nullam iaculis, est id vulputate dictum, odio odio elementum neque, vestibulum dapibus urna nibh vitae lectus. In hac habitasse platea dictumst. Maecenas hendrerit aliquet erat, sit amet tincidunt mauris pulvinar a. Vestibulum porta nulla ut nulla sodales mattis. Curabitur congue, metus sit amet commodo aliquam, eros elit semper nisl, a imperdiet quam diam id neque.

Nam at urna non lorem varius ultricies. Nullam nec pellentesque justo. Nulla lobortis rhoncus enim, vitae blandit augue malesuada sed. Etiam enim risus, volutpat at malesuada ac, placerat sit amet ante. Nam faucibus quam a nunc interdum ultrices. Vivamus eleifend lacus et dui rhoncus semper. Curabitur tempor velit ut mi luctus a feugiat neque feugiat. Proin condimentum aliquam placerat. In non tortor sed tortor interdum aliquam non tempus purus. Aenean rhoncus lobortis eros, ac gravida justo porta ut. Etiam ullamcorper ante sit amet eros lacinia pulvinar vitae non orci. Curabitur orci massa, ultricies id sodales eu, congue vel lectus. Cras a scelerisque nisl. Nulla ornare ultrices nisl, non viverra quam ornare quis.
Aenean non libero non ante cursus ultricies. Morbi tincidunt volutpat diam, quis interdum dolor tempus sed. Sed accumsan auctor est vel imperdiet. Proin auctor congue risus in pharetra. Ut faucibus luctus diam, at vehicula justo pulvinar id. Aliquam ipsum augue, hendrerit ultrices dapibus eu, hendrerit in tellus. Phasellus accumsan, ante eget sodales venenatis, nisl nibh pellentesque odio, a sodales mi eros eu ante. Phasellus a ipsum erat."; 
```

现在我想使用一个数组并将来自变量的数据划分`$data`为：`$mdata[0]`，，，，从上到下彻底地从上到下，数据来自`$mdata[1]` `$mdata[2]` `$mdata[3]`变量。例如：将包含并连续为该数组的其他变量...任何想法？`$mdata[4]` `$mdata[5]` `$mdata[6]``$mdata[7]` `$mdata[8]` `$mdata[9]``$data`
`$mdata[0]`
`Fusce massa leo, pharetra sit amet tempus vitae, gravida nec est. Suspendisse at commodo sapien. Duis purus tortor`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T19:37:28.903

获取字符串的长度，将长度除以 10 并 str_split 如果您希望每个数组项包含相等数量的字符。

```
$length = strlen($data);
$mdata  = str_split($data, $length / 10); 
```

如果您希望每个数组项包含相等数量的单词，而不是字符，这应该有效：

```
$words = explode(' ', $data);
$wseg  = floor(count($words) / 10);
$mdata = array();

for ($i = 0; $i < 9; $i++) {
    $mdata[$i] = implode(' ', array_slice($words, $wseg * $i, $wseg));
}

$mdata[$i] = implode(' ', array_slice($words, $wseg * $i)); 
```

# razor - 想在ASP.NET MVC4中的cshtml里面插入cshtml，类似于webforms中的usercontrol

> ID：14529085
> 
> 赞同：1
> 
> 时间：2013-01-25T19:33:48.743
> 
> 标签：razor, asp.net-mvc-4

将可重用代码插入 cshtml razor 文件的最佳方法是什么。我需要将数据从外循环传递到用户控件。我拍了一张我正在尝试做的事情的照片，希望这会很清楚。

![在此处输入图像描述](../Images/39951c30cb42eae6c44446517108d6c0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T19:45:29.590

利用

```
@Html.RenderPartial(<virtual path to your partial view>, session); 
```

其中局部视图是具有类型模型的`session`类型视图。

# coldfusion - Coldfusion 中的异步 HTTP 请求

> ID：14529094
> 
> 赞同：3
> 
> 时间：2013-01-25T19:34:41.607
> 
> 标签：coldfusion, coldfusion-10, cfhttp, cfthread

如何使用 CFHTTP 标签执行异步 HTTP 请求？

我正在循环查询结果并通过 HTTP 帖子将一些数据发送到 URL。查询中有很多记录，因此 cfhttp 需要很多时间。

是否可以在 ColdFusion 中发送异步 HTTP 请求？有人建议我可以创建一个线程并在其中调用 cfhttp。除了cfthread还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-03T18:45:19.873

正如@peter-boughton 建议的那样，使用线程。

在 CF 9.0.1 中有一个线程内的 http 错误。

*   [http://forums.adobe.com/thread/978907](http://forums.adobe.com/thread/978907)
*   [http://bit.ly/11RN3vo](http://bit.ly/11RN3vo)

所以，这是我做的一个快速原型：

```
// cf_sucks_workaround.cfc
component extends="com.adobe.coldfusion.base" {
  public function cacheScriptObjects() {

    local.tags = ["CFFTP", "CFHTTP", "CFMAIL", "CFPDF", "CFQUERY",
      "CFPOP", "CFIMAP", "CFFEED", "CFLDAP"];

    for(local.tag in local.tags) {
      getSupportedTagAttributes(local.tag);
    }
  }
} 
```

```
// async_http.cfm
<cfscript>
lg('start');
main();
lg('done');

void function main() {
    CreateObject('component', 'cf_sucks_workaround').cacheScriptObjects();
    startThreads();
}

void function lg(required string txt) {
    WriteLog(file = 'threads', text = "t#threadNum()# #arguments.txt#");
}

void function sendRequest() {
    var httpService = new http(timeout = "3", url = "https://www.google.com");
    lg('send http req.');
    var httpResult = httpService.send().getPrefix();
    lg(httpResult.StatusCode);
}

void function startThreads() {
    for (local.i = 1; i LTE 3; i++) {
        thread action="run" name="thread_#i#" appname="derp" i="#i#" {
            lg("start");
            sendRequest();
            lg("end");
        }
    }
}

numeric function threadNum() {
    return (IsDefined('attributes') AND StructKeyExists(attributes, 'i')) ? attributes.i : 0;
}

</cfscript> 
```

产生日志输出：

```
t0 start
t0 done
t1 start
t2 start
t3 start
t3 send http req.
t1 send http req.
t2 send http req.
t3 200 OK
t3 end
t1 200 OK
t1 end
t2 200 OK
t2 end 
```

# mql4 - 如果我的 mq4 智能交易旁边的图标是灰色的，这意味着什么？

> ID：14529096
> 
> 赞同：0
> 
> 时间：2013-01-25T19:34:54.163
> 
> 标签：mql4, metatrader4

我写了一个 mq4 专家顾问：donat_chart_test。在 MetaTrader4 中，我看到它旁边的图标是灰色的。专家顾问工作正常。

![在此处输入图像描述](../Images/e264af707987f53d0b48773c4da73622.png)

如果智能交易系统旁边的图标是灰色的，这意味着什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T19:51:30.057

糟糕，我发现了。这意味着我只将编译后的`*.ex4`文件放入`<MetaTrader>/experts`目录，而不是`*.mq4`源。

# c# - MVC4 的 mapRoute URL -- {controller}/{action} vs Controller/{action}。有什么不同？

> ID：14529098
> 
> 赞同：3
> 
> 时间：2013-01-25T19:34:54.883
> 
> 标签：c#, asp.net-mvc-4, routing

我最近被这两条 MVC4 路由显然功能不同的事实所困扰。我想知道是否有人可以突出显示正在发生的事情，以便我更好地理解。

```
routes.MapRoute(
    "post-User",
    "User",
    new { controller = "User", action = "create" },
    new { httpMethod = new HttpMethodConstraint("POST") }
    );

routes.MapRoute(
    "post-User",
    "{controller}",
    new { controller = "User", action = "create" },
    new { httpMethod = new HttpMethodConstraint("POST") }
    ); 
```

我认为 {controller} 位是一个占位符，并且在下一行中说 controller = "User" 会使这两个语句等效。显然使用 {controller} 为所有路由设置默认值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T19:47:05.920

您认为`{controller}`子字符串充当控制器名称的占位符是正确的。考虑到这一点，以下路由将匹配*任何*控制器，但默认为`User`未指定控制器的控制器：

```
routes.MapRoute(
    "post-User",
    "{controller}",
    new { controller = "User", action = "create" },
    new { httpMethod = new HttpMethodConstraint("POST") }
); 
```

但是，以下内容将匹配路由`User`，并且 - 因为无法指定控制器 - 将**始终**路由到`User`控制器：

```
routes.MapRoute(
    "post-User",
    "User",
    new { controller = "User", action = "create" },
    new { httpMethod = new HttpMethodConstraint("POST") }
); 
```

在这种情况下，差异是没有意义的，因为您所做的只是强制路由`User`映射到控制器`User`，这正是您的第一条路由中会发生的情况。

但是，请考虑以下事项：

```
routes.MapRoute(
    "post-User",
    "User/{action}",
    new { controller = "User", action = "MyDefaultAction" },
    new { httpMethod = new HttpMethodConstraint("POST") }
);

routes.MapRoute(
    "foo",
    "{controller}/{action}",
    new { controller = "User", action = "Index" },
    new { httpMethod = new HttpMethodConstraint("POST") }
); 
```

现在，您的顶级路由将匹配对`User`控制器的请求，并指定一个可选操作，默认为`MyDefaultAction`. *对任何其他*控制器的请求**将不**匹配第一个路由 - 因为该路由不以常量字符串开头`User`- 并且将默认返回到第二个路由 (foo)。同样，该操作是可选的；但是，现在，与对`User`控制器的请求不同，您对其他控制器的默认操作将是该`Index`操作。

所以现在...

`.../User`默认为`MyDefaultAction`动作。

`.../SomeOtherController`默认为`Index`动作。

# sql - 通过 avg(x) 在 SQL 中选择值

> ID：14529104
> 
> 赞同：0
> 
> 时间：2013-01-25T19:35:18.550
> 
> 标签：sql, sqlite, sql-update, average

我改变了这个问题，因为我做错了另一部分。我的目标是更新平均> = 4的电影的年份信息。但我无法通过他们的平均来列出它们:(

```
/* Delete the tables if they already exist */
drop table if exists Movie;
drop table if exists Reviewer;
drop table if exists Rating;

/* Create the schema for our tables */
create table Movie(mID int, title text, year int, director text);
create table Reviewer(rID int, name text);
create table Rating(rID int, mID int, stars int, ratingDate date);

/* Populate the tables with our data */
insert into Movie values(101, 'Gone with the Wind', 1939, 'Victor Fleming');
insert into Movie values(102, 'Star Wars', 1977, 'George Lucas');
insert into Movie values(103, 'The Sound of Music', 1965, 'Robert Wise');
insert into Movie values(104, 'E.T.', 1982, 'Steven Spielberg');
insert into Movie values(105, 'Titanic', 1997, 'James Cameron');
insert into Movie values(106, 'Snow White', 1937, null);
insert into Movie values(107, 'Avatar', 2009, 'James Cameron');
insert into Movie values(108, 'Raiders of the Lost Ark', 1981, 'Steven Spielberg');

insert into Reviewer values(201, 'Sarah Martinez');
insert into Reviewer values(202, 'Daniel Lewis');
insert into Reviewer values(203, 'Brittany Harris');
insert into Reviewer values(204, 'Mike Anderson');
insert into Reviewer values(205, 'Chris Jackson');
insert into Reviewer values(206, 'Elizabeth Thomas');
insert into Reviewer values(207, 'James Cameron');
insert into Reviewer values(208, 'Ashley White');

insert into Rating values(201, 101, 2, '2011-01-22');
insert into Rating values(201, 101, 4, '2011-01-27');
insert into Rating values(202, 106, 4, null);
insert into Rating values(203, 103, 2, '2011-01-20');
insert into Rating values(203, 108, 4, '2011-01-12');
insert into Rating values(203, 108, 2, '2011-01-30');
insert into Rating values(204, 101, 3, '2011-01-09');
insert into Rating values(205, 103, 3, '2011-01-27');
insert into Rating values(205, 104, 2, '2011-01-22');
insert into Rating values(205, 108, 4, null);
insert into Rating values(206, 107, 3, '2011-01-15');
insert into Rating values(206, 106, 5, '2011-01-19');
insert into Rating values(207, 107, 5, '2011-01-20');
insert into Rating values(208, 104, 3, '2011-01-02'); 
```

这些是桌子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T19:43:05.510

按照您在问题中编写示例的方式，您将在字段的字符串值的末尾添加一个字符串“25”。它也仅适用于字符串（文本）字段，而不适用于数字字段。您的示例会将一个值为“1000”的字段更改为“100025”。您可能想要做的是添加到数值。只需删除示例中的单引号即可。

```
UPDATE tableName 
SET fieldName = fieldName + 25 
```

如果您需要定位特定值，请在您的标准上方的示例末尾添加，例如：

```
WHERE fieldName < 1000 
```

并且只会对符合条件的记录进行更改。

希望这可以帮助！;)

**编辑：不再与 OP 改变的问题相关......请只为了清楚起见而改变问题，*不要*完全改变它的含义！啊啊啊！！！**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T22:02:21.793

对于*一个*特定的电影 ID，您可以通过以下查询获得平均评分：

```
SELECT avg(stars)
FROM Rating
WHERE mID = ? 
```

要更新具有特定平均评分的所有电影，请使用上述作为子查询：

```
UPDATE Movie
SET year = year + 25
WHERE (SELECT avg(stars)
       FROM Rating
       WHERE Rating.mID = Movie.mID) >= 4 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T19:36:33.673

```
Update TargetTable
set targetColumn = somevalue
where PrimaryKey = somevalue 
```

如果您没有主键，您将需要找到某种方法来唯一标识行，否则您可能会更新整个表！

[Msdn 页面](http://msdn.microsoft.com/en-us/library/ms177523.aspx)涵盖了 Update 语句可以做什么和不能做什么。

编辑：

```
Update TargetTable
set targetColumn = TargetColumn + somevalue 
```

这将使所有行增加 25 年

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T19:42:49.767

`year`您的代码将更新*所有*行。

但是就像你说你想要*特定的值*，你必须在子句中指定它们`WHERE`：

```
UPDATE mytable
 SET year = year + 25
 WHERE condition 
```

`condition`可能是主[键](/questions/tagged/primary-key "显示标记为“主键”的问题")：

```
WHERE mypk > 100 
```

# c++ - 按照设计，在构造函数中使用 istream 运算符是否可以？

> ID：14529109
> 
> 赞同：0
> 
> 时间：2013-01-25T19:35:30.530
> 
> 标签：c++, operator-overloading

以下是`linear_program`我创建的类的构造函数的 C++ 代码。问题是我有一种感觉，按照设计，我应该`>>`为这个类重载运算符，而不是仅仅`>>`在类的构造函数中使用它。但是我必须动态分配内存，这取决于所采用的输入，因此我无法完全隔离逻辑，即使我重载运算符，我也无法一次获取所有输入。`>>`这就是为什么在这种情况下我看不到重载的好处。

```
linear_program::linear_program() {
    cin >> dim >> no_constr;  
    lp = new plane[no_constr];
    double *temp = new double [dim];
    double constant;
    for (int i = 0; i < no_constr; ++i) {
            for (int j = 0; j < dim;++j) {
                    cin >> temp[j];
            }
            cin >> constant;
            lp[i].set_plane(temp, constant, dim);
    }
    for (int i = 0; i < no_constr; ++i) {
            cin >> cost[i];
    }
} 
```

这是设计标准可以接受的吗？我还想知道这种情况下是否还有其他健康的选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T19:38:27.697

取决于你所说的“好”是什么意思。但我建议将对象初始化保留在构造函数中，并将业务逻辑（与该对象的创建不对应）移动到另一个函数。

构造函数应该初始化对象，仅此而已。

```
linear_program::linear_program(int dim, int no_constr):
 m_noConstr(no_constr), m_Dim(dim)
  {
    lp = new plane[no_constr];
    double constant;
  }

void linear_program::get_something()
{
   double *temp = new double [m_Dim];
   for (int i = 0; i < m_noConstr; ++i) {
            for (int j = 0; j < m_Dim;++j) {
                    cin >> temp[j];
            }
            cin >> constant;
            lp[i].set_plane(temp, constant, dim);
    }
    for (int i = 0; i < no_constr; ++i) {
            cin >> cost[i];
    }
}

//Call get_something() after the object has been initialized. It makes reading the code easier. 
```

# ios - iOS UIScrollView 弹回顶部

> ID：14529114
> 
> 赞同：0
> 
> 时间：2013-01-25T19:35:38.567
> 
> 标签：ios, uiscrollview, xcode4.5

当我使用 UIScrollView 向下滚动并放手时，它不会停留在我向下滚动的位置，它会弹回顶部

[http://www.joules.name/ScreenShot2013-01-25at19.11.45.png](http://www.joules.name/ScreenShot2013-01-25at19.11.45.png)

[http://joules.name/ScreenShot2013-01-25at19.04.12.png](http://joules.name/ScreenShot2013-01-25at19.04.12.png)

在 ViewController.h

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController

{
    IBOutlet UIScrollView *scoller;

}

@end 
```

在 ViewController.m

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidAppear
{
    [scoller setScrollEnabled:YES];
    [scoller setContentSize:CGSizeMake(320, 1000)];
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.

}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T19:57:39.400

可能是因为您在 nib 文件中将滚动视图的实际高度设置为 800。更改它以适合屏幕。

# ruby-on-rails - Rails 安装错误 - 找不到 gem jquery-rails

> ID：14529118
> 
> 赞同：0
> 
> 时间：2013-01-25T19:35:53.310
> 
> 标签：ruby-on-rails, ruby, gem

我正在尝试在我办公室的系统上安装 rails。
我已经使用链接[http://railsinstaller.org/](http://railsinstaller.org/)
安装了 rails 然后我使用命令创建了新项目！[在此处输入图像描述][1] 'rails new temp'

它抛出错误：

```
Fetching source index for https://rubygems.org/
could not reach rubygems repository https://rubygems.org/
could not find gem 'jquery-rails <>= 0> x86-mingw32' in any of the gem sources listed in your gemfile. 
```

这与代理防火墙有什么关系，还是我错过了任何步骤？

请尽快回复。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T04:51:15.170

如果您的 gem 文件中提到了 gem 'jquery-rails'，然后您通过 bundle install 安装 gems 并收到此错误，那么它是一个代理防火墙，将阻止您访问存储库。我通过 Windows 命令提示符遇到的相同体验。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T20:40:24.270

转到您的应用程序目录并完善 Gemfile。

在您的 Gemfile 中检查您是否有`gem 'jquery-rails'`

如果没有在编辑器中输入并保存然后运行`bundle install`

# gwt - 用特殊的 UiBinder 标记编写组件？

> ID：14529119
> 
> 赞同：1
> 
> 时间：2013-01-25T19:35:53.873
> 
> 标签：gwt, uibinder

[UiBinder](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiBinder)用于以声明的方式布置 GWT 组件，使用 XML 标记，而不是以编程方式使用 Java 代码。

UiBinder 树中的新 XML 元素意味着应该创建该类的新实例。因此，GWT 文档中的这个示例实例化了一个新的 Horizo​​ntalPanel 和两个标签：

```
<ui:UiBinder xmlns:ui='urn:ui:com.google.gwt.uibinder'
             xmlns:g='urn:import:com.google.gwt.user.client.ui'>
  <g:HorizontalPanel>
    <g:Label>Keep your ducks</g:Label>
    <g:Label>in a row</g:Label>
  </g:HorizontalPanel>
</ui:UiBinder> 
```

还有另一个示例，带有 DockLayoutPanel：

```
<g:DockLayoutPanel unit='EM'>
  <g:north size='5'>
    <g:Label>Top</g:Label>
  </g:north>
  <g:center>
    <g:Label>Body</g:Label>
  </g:center>
  <g:west size='10'>
    <g:HTML>
      <ul>
        <li>Sidebar</li>
        <li>Sidebar</li>
        <li>Sidebar</li>
      </ul>
    </g:HTML>
  </g:west>
</g:DockLayoutPanel> 
```

在这种情况下，元素是“north”、“west”、“center”，但它们不是类的新实例，而是新 DockLayoutPanel 的配置。

1.  如何编写像 DockLayoutPanel 一样接受自定义 UiBinder XML 元素的组件？
2.  在类 DockLayoutPanel 的源代码中，或者在它的配置文件中，它是否被标记为使用特殊标记，以及如何处理特殊标记元素的内部内容？
3.  还有哪些小部件接受特殊的 UiBinder 标记？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T19:58:07.133

1.  似乎您必须为您的自定义小部件引入自定义 UiBinder 解析器。

2.  有[`com.google.gwt.uibinder.elementparsers.DockLayoutPanelParser`](http://code.google.com/p/google-web-toolkit/source/browse/trunk/user/src/com/google/gwt/uibinder/elementparsers/DockLayoutPanelParser.java)定义了以下静态最终映射的类：

    ```
    private static final Map<String, String> DOCK_NAMES = new HashMap<String, String>();
    static {
       DOCK_NAMES.put("north", "addNorth");
       DOCK_NAMES.put("south", "addSouth");
       DOCK_NAMES.put("east", "addEast");
       DOCK_NAMES.put("west", "addWest");
       DOCK_NAMES.put("lineStart", "addLineStart");
       DOCK_NAMES.put("lineEnd", "addLineEnd");
       DOCK_NAMES.put("center", "add");
    } 
    ```

3.  尚未搜索所有这些，但我猜测任何具有自定义解析器（如 DockLayoutPanel）的小部件都可以处理您对其编程处理的任何内部 XML 元素。

# excel - 保存为 .CSV 时如何不跳过空的第一个单元格？

> ID：14529123
> 
> 赞同：1
> 
> 时间：2013-01-25T19:36:09.413
> 
> 标签：excel, vba, csv

我对数据保存到 CSV 文件的方式有疑问。它仅在您尝试保存第一个单元格为空的单列时发生。您可以选择整列或一组相邻的单元格。将其保存到 CSV 文件后，将跳过前导的空单元格。我是作为 VBA 子程序的一部分来做的，但是手动操作会得到相同的结果。下面是我正在使用的代码和测试数据。

```
Sub CopyRange()
'Copy range: suppose B1 and B2 are empty, B3 to B10 are filled with anything
'e.g. with some numbers
  ActiveSheet.Range("B1:B10").Copy
'Create new workbook
  Workbooks.Add

'NOTE: I need to create a workbook with generic name, save the name and pass it 
'to another program - just to clarity why I don't do it all in one shot at .Copy
  csvPath = TEMP & "\" & ActiveWorkbook.Name & ".csv"

'Paste copied data to the newly created workbook
'NOTE: so far it keeps B1 and B2 empty
  ActiveSheet.Range("A1").PasteSpecial Paste:=xlPasteAll, _
    Operation:=xlNone, SkipBlanks:=False, Transpose:=False
'Save the workbook as CSV
  ActiveWorkbook.SaveAs Filename:=csvPath, FileFormat:=xlCSV, _
    ReadOnlyRecommended:=False, CreateBackup:=False
'At this point the saved file moves all data 2 cells up 
'to fill the empty spaces in B1 and N2\. That's the issue!
End Sub 
```

有趣的是，如果您选择多于一列，则它会保存空单元格并在正确的位置开始数据。

我尝试使用 xlPasteValues 而不是 xlPasteAll ，这实际上让事情变得更糟 - 现在它会跳过空单元格，即使你有超过 1 列，在 PasteSpecial 步骤。

我还尝试将其保存为 xlCSVMSDOS、xlCSVWindows（均使用“\r\n”行尾字符）和 xlCSVMac（使用“\n|”EOL 字符）。没有任何效果。

请帮忙！

PS我也尝试过使用这个步骤中描述的方法，[但](https://stackoverflow.com/questions/3294742/how-to-not-skip-empty-rows-or-cells-in-vba)仍然没有运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T20:08:37.117

保存为 CSV 时，Excel 似乎将[UsedRange](http://msdn.microsoft.com/en-us/library/office/ff840732.aspx)用于工作表。

您可以通过对范围应用一些格式来人为地扩展 UsedRange。例如，在保存之前添加此行将使其保存整个范围。

```
ActiveSheet.Range("A1:A10").Interior.ColorIndex = 7 
```

所以只是为了在上下文中给你它，你的 sub 的结尾是这样的：

```
ActiveSheet.Range("A1").PasteSpecial Paste:=xlPasteAll, _
 Operation:=xlNone, SkipBlanks:=False, Transpose:=False
'Apply some color to the range so that it all gets saved in the CSV.
ActiveSheet.Range("A1:A10").Interior.ColorIndex = 7
'Save the workbook as CSV
ActiveWorkbook.SaveAs Filename:=csvPath, FileFormat:=xlCSV, _
        ReadOnlyRecommended:=False, CreateBackup:=False
'Sheet gets saved as is with cell locations preserved.
End Sub 
```

# android - 调用“onResume”时，GLSurfaceView 不会恢复其 Open GL 线程

> ID：14529126
> 
> 赞同：3
> 
> 时间：2013-01-25T19:36:23.743
> 
> 标签：android, opengl-es, glsurfaceview

我的问题如下：在“旧”Android 设备（v 2.2 和 2.3）上，旋转后，我的 GLSurfaceView 是空白的。我可以在我的日志中看到这些调用：

```
- rotation detected! -
CTestApp(10669): entering onConfigurationChanged method.
MainActivity(10669): entering onPause method.
*WEBRTC*(10669): ViEAndroidGLES20::onPause
*WEBRTC*(10669): ContextFactory::destroyContext
*WEBRTC*(10669): ViEAndroidGLES20::onPause
*WEBRTC*(10669): ContextFactory::destroyContext
MainActivity(10669): end of onPause method.
MainActivity(10669): entering onStop method.
*WEBRTC*(10669): ViEAndroidGLES20::onDetachedFromWindow
*WEBRTC*(10669): ViEAndroidGLES20::onDetachedFromWindow
MainActivity(10669): end of onStop method.
MainActivity(10669): entering onDestroy method.
MainActivity(10669): end of onDestroy method.
MainActivity(10669): entering onCreate method.
MainActivity(10669): entering onStart method.
MainActivity(10669): end of onStart method.
MainActivity(10669): entering onResume method.
*WEBRTC*(10669): ViEAndroidGLES20::onResume
*WEBRTC*(10669): ViEAndroidGLES20::onResume
MainActivity(10669): end of onResume method.
*WEBRTC*(10669): ViEAndroidGLES20::onAttachedToWindow
*WEBRTC*(10669): ViEAndroidGLES20::onAttachedToWindow 
```

在较新的 Android 设备上，视频流的渲染会在设备旋转后正确恢复：

工作设备的日志与之前的（不工作的）日志类似，除了这些跟踪出现在“onAttachedToWindow”调用之后：

```
creating OpenGL ES 2.0 context
ViEAndroidGLES20::onSurfaceCreated 
```

在 Eclipse 调试器中，我注意到在活动销毁期间暂停的 2 个 OpenGL 线程没有恢复。似乎在 Android 2.3 和 4.0 之间 GLSurfaceView 的行为存在差异，导致 OpenGl 线程仅在较新版本上恢复。有人对此有线索吗？

以下是我用于测试的设备的详细信息：

工作装置：

*   运行 Android rev 4.1.1 的 Galaxy Nexus
*   运行 Android rev 4.0.4 的 Galaxy Tab 10.1

“坏”设备： - HTC 渴望，运行 Android 2.3.5 - 摩托罗拉机器人，运行 Android 2.2

这是有关我使用的代码的附加信息。

我有以下类，它扩展了 GLSurfaceView：

```
public class ViEAndroidGLES20 extends GLSurfaceView
    implements GLSurfaceView.Renderer {
    private static String TAG = "WEBRTC-JR";
    private static final boolean DEBUG = true;
  // True if onSurfaceCreated has been called.
  private boolean surfaceCreated = false;
  private boolean openGLCreated = false;
  // True if NativeFunctionsRegistered has been called.
  private boolean nativeFunctionsRegisted = false;
  private ReentrantLock nativeFunctionLock = new ReentrantLock();
  // Address of Native object that will do the drawing.
  private long nativeObject = 0;
  private int viewWidth = 0;
  private int viewHeight = 0;

  public static boolean UseOpenGL2(Object renderWindow) {
    return ViEAndroidGLES20.class.isInstance(renderWindow);
  }

  public ViEAndroidGLES20(Context context) {
    super(context);
        init(false, 0, 0);
    }

    public ViEAndroidGLES20(Context context, boolean translucent,
            int depth, int stencil) {
        super(context);
        init(translucent, depth, stencil);
    }

    private void init(boolean translucent, int depth, int stencil) {

        // By default, GLSurfaceView() creates a RGB_565 opaque surface.
        // If we want a translucent one, we should change the surface's
        // format here, using PixelFormat.TRANSLUCENT for GL Surfaces
        // is interpreted as any 32-bit surface with alpha by SurfaceFlinger.
        if (translucent) {
            this.getHolder().setFormat(PixelFormat.TRANSLUCENT);
        }

    // Setup the context factory for 2.0 rendering.
    // See ContextFactory class definition below
    setEGLContextFactory(new ContextFactory());

        // We need to choose an EGLConfig that matches the format of
        // our surface exactly. This is going to be done in our
        // custom config chooser. See ConfigChooser class definition
        // below.
        setEGLConfigChooser( translucent ?
                             new ConfigChooser(8, 8, 8, 8, depth, stencil) :
                             new ConfigChooser(5, 6, 5, 0, depth, stencil) );

        // Set the renderer responsible for frame rendering
     this.setRenderer(this);
     this.setRenderMode(GLSurfaceView.RENDERMODE_WHEN_DIRTY);
  }

    private static class ContextFactory implements GLSurfaceView.EGLContextFactory {
        private static int EGL_CONTEXT_CLIENT_VERSION = 0x3098;
        public EGLContext createContext(EGL10 egl, EGLDisplay display, EGLConfig eglConfig) {
            Log.w(TAG, "creating OpenGL ES 2.0 context");
            checkEglError("Before eglCreateContext", egl);
            int[] attrib_list = {EGL_CONTEXT_CLIENT_VERSION, 2, EGL10.EGL_NONE };
            EGLContext context = egl.eglCreateContext(display, eglConfig,
                    EGL10.EGL_NO_CONTEXT, attrib_list);
            checkEglError("After eglCreateContext", egl);
            return context;
        }

        public void destroyContext(EGL10 egl, EGLDisplay display, EGLContext context) {
            Log.d("*WEBRTC*", "ContextFactory::destroyContext");
            egl.eglDestroyContext(display, context);
        }
    }

  private static void checkEglError(String prompt, EGL10 egl) {
    int error;
    while ((error = egl.eglGetError()) != EGL10.EGL_SUCCESS) {
      Log.e("*WEBRTC*", String.format("%s: EGL error: 0x%x", prompt, error));
    }
  }

    private static class ConfigChooser implements GLSurfaceView.EGLConfigChooser {

    public ConfigChooser(int r, int g, int b, int a, int depth, int stencil) {
      mRedSize = r;
      mGreenSize = g;
      mBlueSize = b;
      mAlphaSize = a;
      mDepthSize = depth;
      mStencilSize = stencil;
    }

    // This EGL config specification is used to specify 2.0 rendering.
    // We use a minimum size of 4 bits for red/green/blue, but will
    // perform actual matching in chooseConfig() below.
    private static int EGL_OPENGL_ES2_BIT = 4;
    private static int[] s_configAttribs2 =
    {
      EGL10.EGL_RED_SIZE, 4,
      EGL10.EGL_GREEN_SIZE, 4,
      EGL10.EGL_BLUE_SIZE, 4,
      EGL10.EGL_RENDERABLE_TYPE, EGL_OPENGL_ES2_BIT,
      EGL10.EGL_NONE
    };

    public EGLConfig chooseConfig(EGL10 egl, EGLDisplay display) {

      // Get the number of minimally matching EGL configurations
      int[] num_config = new int[1];
      egl.eglChooseConfig(display, s_configAttribs2, null, 0, num_config);

      int numConfigs = num_config[0];

      if (numConfigs <= 0) {
        throw new IllegalArgumentException("No configs match configSpec");
      }

      // Allocate then read the array of minimally matching EGL configs
      EGLConfig[] configs = new EGLConfig[numConfigs];
      egl.eglChooseConfig(display, s_configAttribs2, configs,                          numConfigs, num_config);

      // Now return the "best" one
      return chooseConfig(egl, display, configs);
    }

    public EGLConfig chooseConfig(EGL10 egl, EGLDisplay display,
                                  EGLConfig[] configs) {
      for(EGLConfig config : configs) {
        int d = findConfigAttrib(egl, display, config,
                                 EGL10.EGL_DEPTH_SIZE, 0);
        int s = findConfigAttrib(egl, display, config,
                                 EGL10.EGL_STENCIL_SIZE, 0);

        // We need at least mDepthSize and mStencilSize bits
        if (d < mDepthSize || s < mStencilSize)
          continue;

        // We want an *exact* match for red/green/blue/alpha
        int r = findConfigAttrib(egl, display, config,
                                 EGL10.EGL_RED_SIZE, 0);
        int g = findConfigAttrib(egl, display, config,
                                 EGL10.EGL_GREEN_SIZE, 0);
        int b = findConfigAttrib(egl, display, config,
                                 EGL10.EGL_BLUE_SIZE, 0);
        int a = findConfigAttrib(egl, display, config,
                                 EGL10.EGL_ALPHA_SIZE, 0);

        if (r == mRedSize && g == mGreenSize && b == mBlueSize && a == mAlphaSize)
          return config;
      }
      return null;
    }

    private int findConfigAttrib(EGL10 egl, EGLDisplay display,
                                 EGLConfig config, int attribute, int defaultValue) {

      if (egl.eglGetConfigAttrib(display, config, attribute, mValue)) {
        return mValue[0];
      }
      return defaultValue;
    }

    // Subclasses can adjust these values:
    protected int mRedSize;
    protected int mGreenSize;
    protected int mBlueSize;
    protected int mAlphaSize;
    protected int mDepthSize;
    protected int mStencilSize;
    private int[] mValue = new int[1];
  }

  // IsSupported
  // Return true if this device support Open GL ES 2.0 rendering.
  public static boolean IsSupported(Context context) {
    ActivityManager am =
        (ActivityManager) context.getSystemService(Context.ACTIVITY_SERVICE);
    ConfigurationInfo info = am.getDeviceConfigurationInfo();
    if(info.reqGlEsVersion >= 0x20000) {
      // Open GL ES 2.0 is supported.
      return true;
    }
    return false;
  }

   public void onDrawFrame(GL10 gl) {
    nativeFunctionLock.lock();
    if(!nativeFunctionsRegisted || !surfaceCreated) {
      nativeFunctionLock.unlock();
      return;
    }

    if(!openGLCreated) {
      if(0 != CreateOpenGLNative(nativeObject, viewWidth, viewHeight)) {
        return; // Failed to create OpenGL
      }
      openGLCreated = true; // Created OpenGL successfully
    }
    DrawNative(nativeObject); // Draw the new frame
    nativeFunctionLock.unlock();
  }

   public void onSurfaceChanged(GL10 gl, int width, int height) {

    if (DEBUG)
    {
      Log.d("*WEBRTC*", "ViEAndroidGLES20::onSurfaceChanged");
    }

    surfaceCreated = true;
    viewWidth = width;
    viewHeight = height;

    nativeFunctionLock.lock();
    if(nativeFunctionsRegisted) {
      if(CreateOpenGLNative(nativeObject,width,height) == 0)
      {
        openGLCreated = true;
      }
      else
      {
        Log.e("*WEBRTC*", "ViEAndroidGLES20::onSurfaceChanged - failed to openGlCreated!");
      }
    }
    nativeFunctionLock.unlock();
  }

   public void onSurfaceCreated(GL10 gl, EGLConfig config) {

    if (DEBUG)
    {
      Log.d("*WEBRTC*", "ViEAndroidGLES20::onSurfaceCreated");
    }
  }

  public void ReDraw() {
    if(surfaceCreated) {
      // Request the renderer to redraw using the render thread context.
      this.requestRender();
    }
  }

  private native int CreateOpenGLNative(long nativeObject,
                                        int width, int height);
  private native void DrawNative(long nativeObject);

  protected void onAttachedToWindow()
  {
      if (DEBUG)
      {
          Log.d("*WEBRTC*", "ViEAndroidGLES20::onAttachedToWindow");
      }

      super.onAttachedToWindow();
  }

  protected void onDetachedFromWindow()
  {
      if (DEBUG)
      {
          Log.d("*WEBRTC*", "ViEAndroidGLES20::onDetachedFromWindow");
      }

      super.onDetachedFromWindow();
  }

  public void onPause()
  {
      if (DEBUG)
      {
          Log.d("*WEBRTC*", "ViEAndroidGLES20::onPause");
      }

      super.onPause();
  }

  public void onResume()
  {
      if (DEBUG)
      {
          Log.d("*WEBRTC*", "ViEAndroidGLES20::onResume");
      }

      super.onResume();
  }
} 
```

当我执行设备旋转时，我的主要活动被破坏，但我的应用程序保留了 [[ViEAndroidGLES20]] 实例（类成员 m_RemoteView1 和 m_RemoteView2）的引用。这些引用在活动的 onStart() 回调中获取，如下所示

```
// The activity is about to become visible.
@Override protected void onStart() {

    Log.d("MainActivity", "entering onStart method.");

    super.onStart();

    //   The application is responsible of keeping valid references to the surface view
    //   used to perform local capture and remote stream rendering.
    m_RemoteView1 = ((CTestApp)getApplication()).GetRemoteVideoView();
    m_RemoteView2 = ((CTestApp)getApplication()).GetRemoteVideoView2();

    if (m_RemoteView1 != null)
    {
        LinearLayout layout = (LinearLayout) findViewById(R.id.remoteVideoRenderLayout1);
        layout.addView(m_RemoteView1);
    }

    if (m_RemoteView2 != null)
    {
        LinearLayout layout = (LinearLayout) findViewById(R.id.remoteVideoRenderLayout2);
        layout.addView(m_RemoteView2);
    }
}

// The activity has become visible, it is now resumed.
@Override protected void onResume() {

    Log.d("MainActivity", "entering onResume method.");

    super.onResume();

    // A GLSurfaceView must be notified when the activity is paused and resumed.  GLSurfaceView clients
    // are required to call onPause() when the activity pauses and onResume() when the activity resumes.
    ((GLSurfaceView)m_RemoteView1).onResume();
    ((GLSurfaceView)m_RemoteView2).onResume();
} 
```

请注意，我还包括了我的主要活动的 onResume() 回调实现，以表明我在活动恢复时调用了 GLSurfaceView.onResume()。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T13:52:35.890

我终于设法找到了我的问题。问题来自导致问题的 Android 2.3 和 4.x 之间的类 android.opengl.GLSurfaceView 的行为差异。在 GLSurfaceView 的 Android 4.x 实现中，回调“onAttachedToWindow”导致关联的 GLThread 重新启动。

Android 2.2 和 2.3 实现中缺少 GLThread 的重新启动。在调用 ViewGroup::removeView/addView 后，不恢复 OpenGL 线程会导致渲染视图变为空白，就像在旋转场景中一样。

为了纠正这个问题，我在我的项目中添加了一个类 newGLSurfaceView，它是 Android 4.1 源代码的 GLSurfaceView.java 类的副本。

谢谢，

# javascript - 对于 Twitter：如何获取用户的 oauth_access_token 客户端，如 facebook，用于服务器端集成

> ID：14529139
> 
> 赞同：1
> 
> 时间：2013-01-25T19:37:15.400
> 
> 标签：javascript, facebook, twitter, oauth, twitter-anywhere

我正在尝试在服务器端发布 facebook 和 twitter 帖子。因此，您单击一个按钮：如果您没有连接，它允许您连接并打开一个对话框叠加层以允许您发布 facebook/twitter 帖子；如果您已连接，它只会打开覆盖。Facebook 之所以有效，是因为我可以在客户端轻松获取所有 oAuth 密钥，然后将它们传递给服务器。我如何在 Twitter 中做到这一点？
（PS：这是一个完全 AJAX 的网站，所以我不能指望页面刷新）

在 facebook 我这样做：

```
 if (FB) {
            FB.getLoginStatus(function(response) {
                if (response.status === 'connected') {
                    $.getJSON(window.page.services + "StoreAuthToken", { type: "facebook", socialId: response.authResponse.userID, authId: response.authResponse.accessToken, expiresInSeconds: response.authResponse.expiresIn }, null);
                    window.dialogs.loadFacebookOverlay({ href: href, image: image, description: description, socialId: response.authResponse.userID });
                } else {
                    FB.login(function(response) {
                        if (response.status === 'connected') {
                            $.getJSON(window.page.services + "StoreAuthToken", { type: "facebook", socialId: response.authResponse.userID, authId: response.authResponse.accessToken, expiresInSeconds: response.authResponse.expiresIn }, null);
                            window.dialogs.loadFacebookOverlay({ href: href, image: image, description: description, socialId: response.authResponse.userID });
                        } else { /* user cancled */ }
                    }, { scope: 'share_item' });
                }
            }); 
```

我如何获取身份验证令牌，也许使用 twitter @anywhere 代码？

```
 if (twttr) {
            twttr.anywhere(function(T) {
                if (T.isConnected()) {
                    /* how do I get the auth token here? */
                    window.dialogs.loadTwitter({ href: href, image: image, description: description });
                } else {
                    /* a pop-up is blocked - any way to allow it? */
                    T.signIn();
                }
            });
        } 
```

谢谢您的帮助！

# keyboard-shortcuts - Notepad ++：通过快捷方式将第一个字母大写？

> ID：14529148
> 
> 赞同：27
> 
> 时间：2013-01-25T19:37:42.563
> 
> 标签：keyboard-shortcuts, text-files, notepad++, notepad, capitalization

我有一个巨大的单词列表（txt 文件中一行中的每个单词），并且某些单词需要手动大写（例如手动），所以我正在查看 notepad++ 中是否有快捷方式（我的编辑器目前）自动大写一行的第一个字母，但找不到一个。没有吗？如果没有，您能否建议我使用一个简单的快捷方式来快速执行此操作（这样我可以使用向下箭头键并在需要时在特定单词上使用快捷方式）？多谢

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2013-01-27T16:19:42.267

如果第一个字母是拉丁字符，这很容易做到。但是这种方法不适用于非拉丁（例如西里尔文）字符。只需按**`Ctrl`+`F`**，启用“正则表达式”复选框，然后搜索

```
^(.) 
```

替换为（全部替换）

```
\u\1 
```

“。匹配换行符”复选框必须取消选中

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-07T17:30:28.353

好吧，您可以安装 TextFX 插件并应用 Sentense 大小写。在这里你有一些技巧（包括这个）。 [http://a4apphack.com/featured/tricks-with-notepad](http://a4apphack.com/featured/tricks-with-notepad)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-02-13T17:14:20.423

对于那些难以遵循文字说明的人，这里是屏幕截图。（回答@Placido）

[![在此处输入图像描述](../Images/d193845141191b9618ed138bc4b76cce.png)](https://i.stack.imgur.com/95jSW.png)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-12-03T03:13:33.287

在 N++ 中启用列模式，然后选择第一列。将大小写更改为大写。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-02-22T15:17:03.137

Notepad++ v7.3.2 中有一个快捷方式可以将一行的第一个字母大写（Sentence Case）。

ALT + CTRL + U

不确定以前的版本。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-25T19:49:17.980

1.  在记事本++中打开文件
2.  按 ctrl + F
3.  单击替换选项卡
4.  将 \n[你想大写的字母] 放在“查找内容”字段中
5.  将 \n[大写字母] 放入“替换为”字段中
6.  将搜索模式设置为“扩展”
7.  点击全部替换按钮

这将大写每行的第一个字母。您可以修改此方法以在其他条件下大写

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-05-09T20:40:38.517

首先选择文本并使用**ALT+U**快捷键

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-11-20T20:18:15.687

您可以以非正统的方式快速完成，但您需要 TotalCommander。

使用包含要大写的文本的名称创建新文件。在 TotalCommander 中选择此文件。按 Ctrl+M（多重重命名工具）。在“大写/小写”下拉列表中选择“每个单词的第一个大写”。

在 Windows 下。有一个缺点：如果我没记错的话，文件名限制为 255 个字符。并且会省略一些特殊字符（斜杠、双引号等）。

像 Far 这样的类似软件也应该以我认为的相同方式工作。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-02-13T14:33:58.860

您是否尝试过录制宏然后将其分配给快捷方式？

例如，您的替代品可能是：

```
Find what:    (\A|[.!?]\s+)(\w+)
Replace with: $1\u$2

Tick 'In selection' 
```

然后导航到顶部菜单中的`Macro`→并分配一个快捷方式。`Modify Shortcut/Delete Macro...`

* * *

这是我从中提取的结果宏`C:\Users\%USERNAME%\AppData\Roaming\Notepad++\shortcuts.xml`。

它使用快捷键`Ctrl`++`Shift``C`

```
<Macro name="Capitalise" Ctrl="yes" Alt="no" Shift="yes" Key="67">
    <Action type="3" message="1700" wParam="0" lParam="0" sParam="" />
    <Action type="3" message="1601" wParam="0" lParam="0" sParam="(\A|[.!?]\s+)(\w+)" />
    <Action type="3" message="1625" wParam="0" lParam="2" sParam="" />
    <Action type="3" message="1602" wParam="0" lParam="0" sParam="$1\u$2" />
    <Action type="3" message="1702" wParam="0" lParam="896" sParam="" />
    <Action type="3" message="1701" wParam="0" lParam="1609" sParam="" />
</Macro> 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-02-20T14:26:29.320

首先通过按 alt+ctrl+shift 选择第一列。选择后只需按 ctrl+U 键 问题解决

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-11-04T08:02:14.267

您可以在 MS Word 中通过突出显示列表然后使用 shift + f3 快速完成此操作。这将循环显示全部大写、全部小写或首字母大写。

# javascript - 无法获取未定义或空引用的属性“文档”

> ID：14529149
> 
> 赞同：0
> 
> 时间：2013-01-25T19:37:44.360
> 
> 标签：javascript, undefined

我试图让这段代码工作，我在 JS 方面并不出色，但我看不到任何可能导致这种情况的东西。

这是我的代码

javascript:

```
function end(){
    c='798|209';
    var d = document;

    if (window.frames.length > 0)
        d = window.main.document;

    url = d.URL;

    if (url.indexOf('screen=place') == -1)
        alert('This script needs to be run from the rally point');

    a = c.match(/(\d+\|\d+)/g);
    b = a[Math.round(Math.random()*(a.length-1))].split("|");
    d.forms[0].x.value = b[0];
    d.forms[0].y.value = b[1];
    d.forms[0].spear.value = 0;
    d.forms[0].sword.value = 0;
    d.forms[0].axe.value = 0;
    d.forms[0].spy.value = 0;
    d.forms[0].light.value = 529;
    d.forms[0].heavy.value = 0;
    d.forms[0].ram.value = 1;
    d.forms[0].catapult.value = 0;
    d.forms[0].snob.value = 0;
    d.forms[0].archer.value = 0;
    d.forms[0].marcher.value = 100;
    d.forms[0].knight.value = 0;
}

end(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T21:32:21.350

改变

```
window.main.document 
```

至

```
window.parent.document 
```

# memory - 替代 Erlang 中的内存映射？CouchDB 是如何做到的？

> ID：14529153
> 
> 赞同：1
> 
> 时间：2013-01-25T19:37:53.330
> 
> 标签：memory, erlang, mapping, couchdb

我有兴趣将我的数据库引擎从 Java 移植到 Erlang。

目前，Java 实现依赖于内存映射来提高效率。对于 Erlang 中的内存映射，到目前为止我发现的唯一东西是[emmap](https://github.com/krestenkrab/emmap)。

据我所知，CouchDB 不依赖于内存映射。它如何跟上效率？它是否尽可能多地存储在内存中并在必要时将其刷新到磁盘？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T14:48:24.767

一种方法是使用 LSM btree，如

[https://github.com/krestenkrab/hanoidb](https://github.com/krestenkrab/hanoidb)

# .net - 我可以将 orderby linq 关键字与比较器一起使用吗？

> ID：14529154
> 
> 赞同：4
> 
> 时间：2013-01-25T19:37:58.060
> 
> 标签：.net, linq

我正在查看 101 个 LInQ 示例 [1]，它们暗示我可以使用具有 LInQ orderby 功能的比较器。但在这个例子中，他们使用了一种扩展方法。我的问题是，我可以在语言集成查询中使用比较器吗？

[1] [http://code.msdn.microsoft.com/SQL-Ordering-Operators-050af19e#OrderBycomparer](http://code.msdn.microsoft.com/SQL-Ordering-Operators-050af19e#OrderBycomparer)

更新：我正在寻找的是我的查询的实际语言集成。像下面这样的东西会很好：

```
string[] words = { "aPPLE", "AbAcUs", "bRaNcH", "BlUeBeRrY", "ClOvEr", "cHeRry" }; 
var sortedWords = from x in words
                  orderby (x,y) => string.Compare(x,y)
                  select x; 
```

或更简洁地说：

```
string[] words = { "aPPLE", "AbAcUs", "bRaNcH", "BlUeBeRrY", "ClOvEr", "cHeRry" }; 
var sortedWords = from x in words
                  orderby string.Compare
                  select x; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T19:49:16.087

使用他们的例子：

```
string[] words = { "aPPLE", "AbAcUs", "bRaNcH", "BlUeBeRrY", "ClOvEr", "cHeRry" }; 

var sortedWords = words.OrderBy(a => a, new CaseInsensitiveComparer()); 
```

如果你想把它缩短到

```
var sortedWords = words.OrderBy(new CaseInsensitiveComparer()); 
```

您可以创建另一个绕过 Lambda 的扩展方法：

```
public static IOrderedEnumerable<T> OrderBy<T>(this IEnumerable<T> source, IComparer<T> comparer)
{
    return source.OrderBy(a=>a, comparer);
} 
```

无论哪种方式，（在我看来）都不足以绕过标准的 lambda 语法（节省了 8 个字符？）。

# c# - 从 Postgres 中的 elmah_error 表更改架构

> ID：14529157
> 
> 赞同：0
> 
> 时间：2013-01-25T19:38:11.397
> 
> 标签：c#, asp.net, postgresql, elmah

我想将`elmah_error`表的架构从公共更改为 elmah。

我收到此错误：`Npgsql.NpgsqlException: relation "elmah_error" does not exist`。它一直在仅公开搜索此表。

在 Web.config 上，我试图`schema=elmah`在 errorLog 上设置但没有成功。找到一些`Sqlerrolog.cs`添加架构，但我在 errorLog 上使用 PgsqlErrorLog 并发现没有`PgsqlErrorLog.cs`更改。

有人暗示在这种情况下该怎么做？

感谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:36:02.760

我对 asp.net 或 C# 方面不太熟悉，但在 PostgreSQL 方面有三种基本方法。第一个是使用模式名称来限定表，即

```
select ... from elmah.elmah_error 
```

另一种选择是为会话设置搜索路径：

```
SET search_path = 'elmah'; 
```

第三个选项是更改参数，以便自动设置搜索路径。

```
ALTER USER aspnet_user SET search_path = 'elmah'; 
```

您可以更改用户或数据库来设置搜索路径。

# ios - iOS 中第三方应用的日志视图层次结构

> ID：14529167
> 
> 赞同：1
> 
> 时间：2013-01-25T19:39:16.620
> 
> 标签：ios, xcode, cocoa-touch, uiview

有什么方法可以注销 iOS 中的整个视图层次结构？不仅仅是我的应用程序视图的递归描述。

具体来说，我想记录从 App Store 下载的第三方应用程序的视图层次结构。

# java - Textview 调整文本大小当屏幕大于其他屏幕时

> ID：14529168
> 
> 赞同：1
> 
> 时间：2013-01-25T19:39:23.410
> 
> 标签：java, android, android-layout, textview

我想调整文本视图的大小，因为有些文本在平板电脑中很小，但在手机中是正常的。

代码：

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
            setContentView(R.layout.loading);
         TextView txt = (TextView) findViewById(R.id.text);
         txt.setTextAppearance(this, android.R.attr.textAppearanceLarge); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T20:04:51.750

你可以得到屏幕尺寸

如果您想要以像素为单位的显示尺寸，您可以使用[`getSize`](http://developer.android.com/reference/android/view/Display.html#getSize%28android.graphics.Point%29)：

```
Display display = getWindowManager().getDefaultDisplay();
Point size = new Point();
display.getSize(size);
int width = size.x;
int height = size.y; 
```

如果您不在，您可以通过以下`Activity`方式获得默认值：`Display``WINDOW_SERVICE`

```
WindowManager wm = (WindowManager) ctx.getSystemService(Context.WINDOW_SERVICE);
Display display = wm.getDefaultDisplay(); 
```

在`getSize`引入之前（在 API 级别 13 中），您可以使用现在已弃用的`getWidth`和方法：`getHeight`

```
Display display = getWindowManager().getDefaultDisplay(); 
int width = display.getWidth();  // deprecated
int height = display.getHeight();  // deprecated 
```

对于您描述的用例，布局中的边距/填充似乎更合适。

现在你可以相应地调整你的textView，通过添加`weight`或其他东西

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T19:54:36.233

通常，您将使用 XML 来完成这一切。然后，您可以为更大的屏幕创建布局。例如，您可以创建一个布局文件夹`layout-sw600dp`，该文件夹将用于最小尺寸至少为 600dp 的屏幕。

[支持多屏](http://developer.android.com/guide/practices/screens_support.html#NewQualifiers)

# php - Phonegap，PHP服务器登录模块错误

> ID：14529169
> 
> 赞同：0
> 
> 时间：2013-01-25T19:39:24.907
> 
> 标签：php, jquery, cordova, jquery-mobile, login-script

嗨，当我尝试运行以下尝试与 PHP 服务器连接以进行身份​​验证的 jquery 脚本时，我遇到了错误。以下是我的 HTML 脚本：

```
<head style="background-color:#C6C6FF;">
<meta http-equiv="Content-Type" content="initial-scale=1.0" charset=UTF-8" />
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/
libs/jquery/1.9.0/jquery.min.js"></script>
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.0rc2/jquery.mobile-1.0rc2.min.css" />
<script type="text/javascript" src="login.js"></script>
</head>

<body>
<div id="login-box" style="background-color:#C6C6FF;" >
<form>
<table  border="0" cellpadding="1" cellspacing="7">
<tr>
<td  ><div style="font-size:40px; background-color: #C6C6CD;">Login</div></td> 
</tr>
<tr> 
<td><div style="font-size:20px; color:#0000FF">Username</div><div align="left"><input   name="username" id="name" type="text"/></div></td>
</tr>
 <tr>
<td><div>Password</div>
<input name="password" id="password" type="password"/></td>
</tr>
<tr>                                     
<td><input type="submit" id="login" value="Submit" onclick="clickPage()"/></td>
</tr>
</table>
</form>
</div>
<div id="outp"></div>
<div height="100px"> 
```

用于调用 login.php 文件进行身份验证的 jquery 脚本。

```
$(document).ready(function(){
var serviceURL = "http://localhost/travel/";
console.log("deviceReady");
});

function clickPage(){
alert('hhhhhhh');
console.log("deviceIN");
var name = $('#name').val();
var password = $('#password').val();

 $.ajax({
    type: 'POST',
    data: {name: name ,
            password: password},
    url:'http://localhost/travel/login.php',
    success: function(data){

        //$('#outp').text(status);
        alert("Successfully Logged In");
        //$('#outp').text(status);
        nextPage();
    },
    error: function(){
        //console.log(data,status);
        //$('#outp').text(status);
        alert("Failure Loggin In");
    }
}); 

return false;

 };

function nextPage(){
$.extend(  $.mobile , {
     ajaxEnabled: false
   });
  $.mobile.changePage('login.html');
} 
```

这是我的 PHP 脚本

```
//Include database connection details
require_once('connection.php');

//Array to store validation errors
$errmsg_arr = array();

//Validation error flag
$errflag = false;

//Sanitize the POST values
$username = json_decode($_POST['name']);
$password = json_decode($_POST['password']);
$username = 'admin';
$password = 'admin';
//Input Validations
if($username == '') {
    $errmsg_arr[] = 'Username missing';
    $errflag = true;
}
if($password == '') {
    $errmsg_arr[] = 'Password missing';
    $errflag = true;
}

//If there are input validations, redirect back to the login form
if($errflag) {
    $_SESSION['ERRMSG_ARR'] = $errmsg_arr;
    session_write_close();
    header("location: index.html");
    exit();
}

//Create query
$qry="SELECT * FROM login WHERE username='$username' AND password='$password'";
$result=mysql_query($qry);

//Check whether the query was successful or not
if($result) {
    if(mysql_num_rows($result) > 0) {
        //Login Successful
        session_regenerate_id();
        $member = mysql_fetch_assoc($result);
        $_SESSION['SESS_MEMBER_ID'] = $member['id'];
        $_SESSION['SESS_FIRST_NAME'] = $member['username'];
        $_SESSION['SESS_LAST_NAME'] = $member['password'];
        session_write_close();
        echo "Success What";
        header("location: mainPage.php");
        exit();
    }else {
        //Login failed
        $errmsg_arr[] = 'user name and password not found';
        $errflag = true;
        if($errflag) {
            $_SESSION['ERRMSG_ARR'] = $errmsg_arr;
            session_write_close();
            echo "Failure";
            header("location: index.html");
            exit();
        }
    }
}else {
    die("Query failed");
}
  ?> 
```

每次我运行此模块时，我都会收到此错误“登录失败”，这是 ajax 调用失败时的警报。对于此错误，您可以参考上面的 jquery 脚本。我不确定我哪里出错了。

# tcl - 使用 tcl 解析字符串

> ID：14529171
> 
> 赞同：1
> 
> 时间：2013-01-25T19:39:28.110
> 
> 标签：tcl

我正在尝试解析一个字符串以返回两组之间的文本。例如，我的字符串是：“faultstring>Item not valid: The specified Standard SIP1 Profile was not found faultstring>”

我想编写一个返回字符串的函数：Item not valid: The specified Standard SIP1 Profile was not found

我是 tcl 的新手，非常感谢您的帮助。

请告诉我。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T19:45:57.567

假设`faultstring>`有趣的字符串内部没有，并且在指定片段之前和之后可能有一些无趣的垃圾：

```
set testString "faultstring>Item not valid: The specified Standard SIP1 Profile was not found faultstring>"

if {[regexp {faultstring>(.*)faultstring>} $testString _ extracted]} {
     puts "Got it: $extracted"
} 
```

对于其他假设，答案可能会有所不同。

# css - 如何在 div 菜单中居中 ul

> ID：14529174
> 
> 赞同：1
> 
> 时间：2013-01-25T19:39:41.787
> 
> 标签：css, layout, html-lists

我试图在 div 菜单中居中 ul 。我查看了其他菜单并尝试了我能想到的所有组合，但我仍然无法得到它。

这是代码：

```
#cssmenu ul{
    margin:0 auto;
    padding:0;
    list-style-type:none;
    width:100%;
    position:relative;
    display:block;
    height:38px;
    font-size:14px;
    background:#f9f8f8;
    border-top: 1px solid #e5e5e5;
    border-bottom: 1px solid #e5e5e5;
    font-family:Arial,Helvetica,sans-serif;
}
#cssmenu li{
    display:block;
    float:left;
    margin:0;
    pading:0;
    }
#cssmenu li a{
    display:block;
    float:left;
    color:#333333;
    text-decoration:none;
    padding:12px 20px 0 20px;
    height:24px;
    height:38px;
    }
#cssmenu li a:hover{
    text-decoration:underline;  
    }

    <div id="cssmenu">
<ul>
<li><a href="#">Home</a></li>
<li><a href="#">About</a></li>
<li><a href="#">The Program</a></li>
<li><a href="#">Blog</a></li>
<li><a href="#">Support</a></li>
<li><a href="#">Members Login</a></li>
</ul>
</div> 
```

任何帮助将不胜感激。

谢谢！麦克风

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T19:44:00.900

你必须`width: 100%`从第一个删除`ul`。您不能真正将与容器大小相同的东西居中:)。删除后，您可以制作 list `inline-block`，因此它占用了其子项的宽度，然后`text-align`在 div 上使用简单的。

```
#cssmenu {
    text-align: center;
}

#cssmenu ul{
    display: inline-block;
} 
```

当然，您必须将一些样式从列表移动到 div，因为列表不再是全宽的。

[jsFiddle 演示](http://jsfiddle.net/yh8Nb/)

# sql - 使用 CTE 从 T-SQL Pivot 获取具有平均值的原始值

> ID：14529176
> 
> 赞同：0
> 
> 时间：2013-01-25T19:39:52.783
> 
> 标签：sql, tsql, pivot

我很难思考如何将我需要的结果从 CTE 转换为 Pivot。我有一个包含以下字段的表：

```
ReadingDescription Varchar(50)
ReadingDate datetime
ReadingValue int 
```

数据如下所示：

```
MinDemand  1-1-2012  250
MaxDemand  1-1-2012  300
MinDemand  1-2-2012  260
MaxDemand  1-2-2012  310
MinDemand  1-3-2012  250
MaxDemand  1-3-2012  300
MinDemand  1-4-2012  260
MaxDemand  1-4-2012  310 
```

我需要一个如下所示的输出：

```
ReadingDate  MinDemand   MaxDemand    AvgDemand
1-1-2012     250           300           275
1-2-2012     260           310           285
1-2-2012     250           300           275
1-2-2012     260           310           285 
```

我一直在研究，我认为我已经接近但无法通过 CTE 部分。这是我到目前为止所拥有的：

```
with cte as (

SELECT 

  CONVERT(DATE,h.ReadingDate,1) as ReadingDate,
  left(ReadingDescription,11) as Reading,
  h.ReadingValue
FROM

FAC_WeeklyReadings  wr  
JOIN
FAC_WeeklyReadingsHistory h ON  h.WeeklyReadingID =  wr.WeeklyReadingID                 

where
wr.WeeklyReadingID in (149,150)
AND
h.ReadingDate BETWEEN '1-1-2012' AND '12-31-2012'
)

pivot(
--I have tried several things here but have not been successful
--
) p 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T19:43:58.787

试试这个：

```
with cte as (

SELECT 

  CONVERT(DATE,h.ReadingDate,1) as ReadingDate,
  left(ReadingDescription,11) as Reading,
  h.ReadingValue
FROM

FAC_WeeklyReadings  wr  
JOIN
FAC_WeeklyReadingsHistory h ON  h.WeeklyReadingID =  wr.WeeklyReadingID                 

where
wr.WeeklyReadingID in (149,150)
AND
h.ReadingDate BETWEEN '1-1-2012' AND '12-31-2012'
)

SELECT *, (MinDemand+MaxDemand)/2 AvgDemand
FROM CTE T
PIVOT(MIN(ReadingValue) FOR Reading IN ([MinDemand],[MaxDemand])) AS PT 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T20:03:23.780

为什么要支点？只是goup更容易吗？

```
select ReadingDate, min(ReadingValue), max(ReadingValue),  avg(ReadingValue)
from FAC_WeeklyReadings  wr  JOIN  FAC_WeeklyReadingsHistory h 
   ON  h.WeeklyReadingID =  wr.WeeklyReadingID                 
where wr.WeeklyReadingID in (149,150)
   AND h.ReadingDate BETWEEN '1-1-2012' AND '12-31-2012'
group by h.ReadingDate 
```

# python - Downloading public files in Google Drive (Python)

> ID：14529177
> 
> 赞同：3
> 
> 时间：2013-01-25T19:39:58.473
> 
> 标签：python

Suppose that someone gives me a link that enables me to download a public file in Google Drive.

I want to write a program that can read the link and then download it as a text file.

For example, [https://docs.google.com/document/d/1yJVXtabsP7KrJXSu3XyOh-F2cFoP8Lftr14PtXCLEVU/edit](https://docs.google.com/document/d/1yJVXtabsP7KrJXSu3XyOh-F2cFoP8Lftr14PtXCLEVU/edit) is one of files in my Google Drive. Everyone can access this file.

But how can I write a Python program that downloads the text file given the above link?

Could someone have some pieces of sample code for me?

It seems that some Google Drive SDK could be useful(?), but is there any way to do it without using SDK?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-11T12:39:54.950

首先，您需要编写一个程序来切断您上传的文件的链接。例如在您提供的链接中： [https ://docs.google.com/document/d/1yJVXtabsP7KrJXSu3XyOh-F2cFoP8Lftr14PtXCLEVU/edit](https://docs.google.com/document/d/1yJVXtabsP7KrJXSu3XyOh-F2cFoP8Lftr14PtXCLEVU/edit)

id 是***1yJVXtabsP7KrJXSu3XyOh-F2cFoP8Lftr14PtXCLEVU***

将其保存在某个变量中，现在说 download_link 以获取下载链接： [https](https://docs.google.com/uc?export=download&id=download_link) ://docs.google.com/uc?export=download&id= download_link 此链接将下载文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-19T22:53:23.140

如果上述答案对您不起作用，请使用以下链接：

保存为 .txt 文件： [https ://docs.google.com/document/d/1yJVXtabsP7KrJXSu3XyOh-F2cFoP8Lftr14PtXCLEVU/export?format=txt](https://docs.google.com/document/d/1yJVXtabsP7KrJXSu3XyOh-F2cFoP8Lftr14PtXCLEVU/export?format=txt)

保存为 docx 文件： [https ://docs.google.com/document/d/1yJVXtabsP7KrJXSu3XyOh-F2cFoP8Lftr14PtXCLEVU/export?format=docx](https://docs.google.com/document/d/1yJVXtabsP7KrJXSu3XyOh-F2cFoP8Lftr14PtXCLEVU/export?format=docx)

通常，诀窍是添加：export?format=txt 而不是编辑！希望能帮助到你。

# wpf - Telerik RadToolTip 为空时不会隐藏

> ID：14529178
> 
> 赞同：1
> 
> 时间：2013-01-25T19:40:03.487
> 
> 标签：wpf, silverlight, telerik, tooltip

我有一个要在工具提示中显示的列表，但是当它为空时，工具提示不应该存在。但是，当它为空时，它仍然显示一个非常小的空框。

```
<t:RadDropDownButton.ToolTip>
 <t:RadToolTip Visibility="{Binding MyList, Converter={StaticResource EmptyListToCollapsedConverter}}"
               Content="{Binding MyList}">
    <t:RadToolTip.ContentTemplate>
      <DataTemplate>
        <ItemsControl ItemsSource="{Binding}"/>
      </DataTemplate>
    </t:RadToolTip.ContentTemplate>
  </t:RadToolTip>
</t:RadDropDownButton.ToolTip> 
```

这有什么问题？它发生在使用 RadToolTip 的任何地方。设置其可见性不起作用！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T03:17:34.700

我认为即使您只是 Tooltip 类也会发生这种情况。MS 不认为工具提示不应该显示。如果您设置元素的工具提示属性并希望隐藏/抑制它，则将附加的[ToolTipService.IsEnabled](http://msdn.microsoft.com/en-us/library/system.windows.controls.tooltipservice.isenabled.aspx)设置为 false。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-19T02:01:33.233

自从我问这个问题已经有一段时间了，但事实证明我使用的控件不正确。工具提示应该应用在不同的地方。对不起，我能记住的就这些了！

# ruby - How to use FileLists as rake dependencies

> ID：14529180
> 
> 赞同：2
> 
> 时间：2013-01-25T19:40:05.337
> 
> 标签：ruby, rake

I'm using rake to help compile Coffeescript for a Chrome extension I'm writing.

My Rakefile looks like this:

```
COFFEE = FileList['src/*.coffee']
JS = COFFEE.ext 'js'

directory 'extension'

rule '.js' => ['.coffee', 'extension'] do |t|
  `coffee -c -o extension #{t.source}`
end

desc "Build the extension in the 'extension' directory"
task :build => ['extension', JS] do
  cp File.join('src', 'manifest.json'), 'extension'
end 
```

When I only have one `.coffee` file in my `src` directory, there's no problem. But as soon as I have more than one `.coffee` files it errors:

```
$ rake build
> rake aborted!
> Don't know how to build task 'src/app.js src/background.js'
>
> Tasks: TOP => build
> (See full trace by running task with --trace) 
```

Is it possible to specify a `FileList` as a dependency? How else would I tell rake that I want all my Coffeescript files compiled durring the build task?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-26T22:00:09.283

Rake’s dependency list is an Array of task names. When you use a FileList as one of its elements, you nest arrays – effectively, this:

```
task :build => ['extension', ['src/app.js', 'src/background.js']] do 
```

Rake just uses the String representation of all passed dependency Array elements, which is why it complains about being unable to build a `'src/app.js src/background.js'` task (note how this is one string).

Splatting your FileList (or flattening the dependency Array) will solve the issue, i.e.:

```
task :build => ['extension', *JS] do 
```

or

```
task :build => ['extension', JS].flatten do 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T20:03:05.017

Try this:

```
files = Dir.entries('path/to/scripts').select { |f| f.include? '.coffee' }
files.each do |file_path|
  `coffee -c -o extension #{file_path}`
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T07:37:39.573

So far in my search it looks like the only way to accomplish what I want is to either have a task which loops through my `FileList` and compiles each one explicitly (like in the answer from @nicooga). Or, I can loop through everything in the `FileList` and add it as a dependency to the build task.

I don't like either of these because `rake` has `FileList`s for getting groups of files, `rule`s for defining how to handle kinds of files, and a nice syntax for defining dependencies, but apparently no way to combine all three of those together.

So, my solution for now is to go with the second option, adding each file as a dependency. The shortest way I've found to do this is to `concat` the `FileList` onto the dependency array. So now my build task looks like this:

```
task :build => ['extension'].concat(JS) do
  cp File.join('src', 'manifest.json'), 'extension'
end 
```

And thanks to the comment by @kopischke, this can even be shortened to `['extension' *JS]` using the splat operator.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-27T15:18:55.483

Late to the game, but a FileList is lazy, and that is useful, especially if you have lots of file matching. Think of C or C++ where you potentially can have many that require dependencies.

Most of the answers here require the FileList to be expanded/evaluated. Since Rake is Ruby and task is where the last argument is basically a Hash, you will be evaluating the array.

One of the answers suggests ['extension', JS].flatten. This approach will search the directory and collect all the .js files. This approach is fine when you have a task that will always get executed/invoked. However, you don't want to evaluate the FileList and invoke its search if the task is will not get executed/invoked.

The best way to use a FileList is the following

```
fl = FileList['extension', "src/*.coffee"] do |c|
   c.ext('js')
end
file "somefile" => fl do
   #some stuff
end 
```

Then if "somefile" doesn't exist, or the "somefile" task is not even invoked, the read of your Rakefile doesn't invoke the FileList expansion, saving a bunch of time.

# ios6 - 复制应用商店按钮全部/不在此 ipad 中购买

> ID：14529181
> 
> 赞同：0
> 
> 时间：2013-01-25T19:40:05.563
> 
> 标签：ios6

我只想在“购买”部分的“全部”和“不在此 ipad 上”之间复制 appstore 2 按钮系统，显示 2 个不同的表格。那是自定义还是库基本？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:17:56.887

使用 SEGMENTED CONTROL 并手动执行以使应用商店看起来相似

# wpf - DataGrid Column not resizing when printing

> ID：14529183
> 
> 赞同：4
> 
> 时间：2013-01-25T19:40:07.410
> 
> 标签：wpf, xaml, datagrid, datagridcolumn

I have an application that fetch data from sensor and then outputs Graphs and Datagrid from that data.

**What worked** : I was generating a report with usercontrol that were inserted in a fixedPage that were shown in a FixedDocument with the help of a DocumentViewer.

**What I then did** : In order to facilitate many things, enabling text search, pre-generating the report, ..., I decided to convert my FixedDocument in a XpsDocument and putting this in the DocumentViewer.

**My Problem** : For some reason, everything was unchanged by the conversion *except* my DataGrid columns. I am manualy inserting my column in Xaml and each have a Width of 1*. But the result I am getting is as if it were completely ignoring the resize. It's not even resizing properly to the content.

**What fixes it** : When I put a fixed Width it is respected in the viewer.

**Code** :

```
var actualReport = new FixedDocument();
actualReport.DocumentPaginator.PageSize = new Size(8.5 * 96, 11 * 96);
actualReport.Pages.Add(new PageContent { Child = new FixedPage { Children = {
            new FrontPage { Width = 8.5 * 96, Height = 11 * 96, DataContext = d, }
        }
    }
});

[.. Three more pages ..]

var ms = new MemoryStream();
var pkg = Package.Open(ms, FileMode.Create, FileAccess.ReadWrite);

string pack = "pack://temp.xps";
PackageStore.AddPackage(new Uri(pack), pkg);

var doc = new XpsDocument(pkg, CompressionOption.SuperFast, pack);
XpsSerializationManager rsm = 
    new XpsSerializationManager(new XpsPackagingPolicy(doc), false);
rsm.SaveAsXaml(actualReport.DocumentPaginator);
Viewer.Document = doc.GetFixedDocumentSequence(); 
```

**Style** :

```
<Style TargetType="DataGrid" x:Key="PrintGrid">
    <Setter Property="IsReadOnly" Value="True" />
    <Setter Property="BorderBrush" Value="{x:Null}" />
    <Setter Property="Background" Value="{x:Null}" />
    <Setter Property="AutoGenerateColumns" Value="False" />
    <Setter Property="CanUserSortColumns" Value="False" />
    <Setter Property="CanUserResizeColumns" Value="False" />
    <Setter Property="CanUserResizeRows" Value="False" />
    <Setter Property="CanUserReorderColumns" Value="False" />
    <Setter Property="HeadersVisibility" Value="Column" />
    <Setter Property="FontSize" Value="16" />
</Style> 
```

**Xaml** :

```
<DataGrid Grid.Row="1" ItemsSource="{Binding CollectCtx.Sensors}" 
          Style="{DynamicResource PrintGrid}" HorizontalAlignment="Stretch">
    <DataGrid.Columns>
        <DataGridTextColumn Header="Pos" Width="1*" Binding="{Binding Position}" />
        <DataGridTextColumn Header="Min" Width="1*"Binding="{Binding Data.Min, StringFormat={x:Static r:Resources.FormatTemp}}" />
        <DataGridTextColumn Header="Ave" Width="1*"  Binding="{Binding Data.Ave, StringFormat={x:Static r:Resources.FormatTemp}}" />
        <DataGridTextColumn Header="Max" Width="1*"  Binding="{Binding Data.Max, StringFormat={x:Static r:Resources.FormatTemp}}" />
        <DataGridTextColumn Header="Stab" Width="1*" Binding="{Binding Data.Stab, StringFormat={x:Static r:Resources.FormatTemp}}" />
        <DataGridTextColumn Header="Diff" Width="1*" >
            <DataGridTextColumn.Binding>
                <MultiBinding StringFormat="{x:Static r:Resources.FormatTemp}" Converter="{StaticResource DiffConverter}">
                    <Binding Path="Data.Ave" />
                    <Binding 
                            RelativeSource="{RelativeSource AncestorType={x:Type UserControl}}"
                            Path="DataContext.CollectCtx.Temperature" />
                </MultiBinding>
            </DataGridTextColumn.Binding>
        </DataGridTextColumn>
        <DataGridTextColumn  Header="Compliant" Width="1*" Binding="{Binding DataContext.CollectCtx, RelativeSource={RelativeSource AncestorType={x:Type UserControl}}, Converter={StaticResource CompliantConverter}, Mode=OneWay}" />
    </DataGrid.Columns>
</DataGrid> 
```

# uml - Can someone explain this UML diagram

> ID：14529185
> 
> 赞同：0
> 
> 时间：2013-01-25T19:40:10.413
> 
> 标签：uml, class-diagram

![enter image description here](../Images/2ac31a8f345cf213c1376ae48e3c2055.png)

This is embarrassing, I apologize for not including the diagram image ( I thought I included it, but I should be more careful and verify it in the post )

I know almost nothing about UML, but to my knowledge an arrow with hollow head represents inheritance relationship ( ie `ANDSpecification` class inherits from `CompositeSpecification` class ), while the other type of arrow tells us we can navigate from `ANDSpecification` to `CompositeSpecification`?

a) But why does the diagram connecting `ANDSpecification` and `CompositeSpecification` contain both types of arrows? Perhaps because in addition to `ANDSpecification` inheriting from `CompositeSpecification`, it also has a property of type `CompositeSpecification`?

b) What is the meaning of numbers next to arrows?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T21:20:21.660

首先，您能否提供您的类图实现的来源，您的输入不够清楚，无法确定类之间的关系。

*   (A) 有两种类型的箭头，带有矩形头部的箭头描述“**泛化**”。

> 特定分类器从通用分类器继承其定义的一部分。通用分类器在连接器的箭头端。属性、关联和操作由特定的分类器继承。使用继承工具在两个分类器之间创建泛化。

*   第二种箭头描述“**关联**”

> 两个分类器的成员之间的关系。它有两种类型，聚合和组合。

*   (B) 箭头旁边的数字简单地描述了“**多重性**”

> 关联端的多重性是与另一端的单个实例相关联的类的可能实例的数量。

```
 ┬─────────────────────────┬───────────────────────────────────────────────────────┬
  │  Multiplicities         |      Explanation                                      |
  │                         |                                                       | 
  ├─────────────────────────┼───────────────────────────────────────────────────────┼
  |0..1                     | zero or one instance.                                 | 
  ├─────────────────────────┼───────────────────────────────────────────────────────┼
  |0..*  or  *              | no limit on the number of instances (including none)  | 
  ├─────────────────────────┼───────────────────────────────────────────────────────┼
  |1                        | exactly one instance                                  | 
  ├─────────────────────────┼───────────────────────────────────────────────────────┼
  |1..*                     | at least one instance                                 | 
  ├─────────────────────────┼───────────────────────────────────────────────────────┼ 
```

您可以在下面的链接中找到有用的示例。

[UML 箭头的解释](https://stackoverflow.com/questions/1874049/uml-arrows-pointers-explanation)

[http://msdn.microsoft.com/en-us/library/dd409437%28VS.100%29.aspx](http://msdn.microsoft.com/en-us/library/dd409437%28VS.100%29.aspx)

[http://edutechwiki.unige.ch/en/UML_class_diagram](http://edutechwiki.unige.ch/en/UML_class_diagram)

# python - Why does overriding __getattribute__ to proxy a value screw up isinstance?

> ID：14529190
> 
> 赞同：2
> 
> 时间：2013-01-25T19:40:26.663
> 
> 标签：python, class, inheritance, getattribute, new-style-class

Why does this happen?

```
class IsInstanceScrewer(object):
    def __init__(self, value):
        self.value = value

    def __getattribute__(self, name):
        if name in ('value',):
            return object.__getattribute__(self, name)
        value = object.__getattribute__(self, 'value')
        return object.__getattribute__(value, name)

isinstance(IsInstanceScrewer(False), bool) #True
isinstance(IsInstanceScrewer([1, 2, 3]), list) #True 
```

The class is definitely not an instance of bool, even though it attempts to wrap it.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T19:40:26.663

`__getattribute__` is returning the `__class__` of the wrapped value instead of its own `__class__`:

```
>>> class IsInstanceScrewer(object):
    def __init__(self, value):
        self.value = value

    def __getattribute__(self, name):
        print name
        if name in ('value',):
            return object.__getattribute__(self, name)
        value = object.__getattribute__(self, 'value')
        return object.__getattribute__(value, name)

>>> isinstance(IsInstanceScrewer(False), bool)
__class__
True
>>> isinstance(IsInstanceScrewer([1, 2, 3]), list)
__class__
True 
```

This may be desired behavior or not depending on what you're doing.

# html - Bootstrap Responsive Navbar Center List / Links

> ID：14529196
> 
> 赞同：3
> 
> 时间：2013-01-25T19:40:49.537
> 
> 标签：html, css, twitter-bootstrap

I am using the latest version of Bootstrap (2.02) and I want to center all of the links in the navbar and still have a responsive layout. I cannot find a solution to having a centered and fixed layout let alone a responsive as well.

Can anyone point me in the right direction?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T20:02:17.123

如果您不关心 IE<8，您可以添加以下 CSS

```
.navbar .nav{
    float: none;
    text-align: center;
}
.navbar .nav > li{
    float: none;
    display: inline-block;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T22:18:41.130

以下应该适用于中心对齐：

```
.navbar .nav > li > a {
  padding: 15px 20px; 
  text-align: center;
  float: none;
  display: inline-block;
} 
```

似乎 IE 8 及以下版本[不支持媒体查询](http://caniuse.com/css-mediaqueries)。

# c# - Extract part from a string

> ID：14529199
> 
> 赞同：-3
> 
> 时间：2013-01-25T19:41:07.303
> 
> 标签：c#, .net, regex

Could someone please explain me how to write regular expressions to extract the "duration" and "time" from given strings?

```
Duration: 00:21:38.97, start: 0.000000, bitrate: 2705 kb/s 
```

From the first string I want to extract duration `"00:21:38.97"` part.

```
size= 1547kB time=00:01:38.95 bitrate= 128.1kbits/s 
```

From the second string I want to extract time `"00:01:38.95"` part.

I've tried

```
Regex.Match(theString, @"\:\s([^)]*)\,\s").Groups[1].Value; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T20:13:36.370

这是一个可能的解决方案：

```
class Program
{
    static void Main(string[] args)
    {
        Regex regex = new Regex(@"(((?<Hour>[0-9]{1,2})[.:](?=[0-9]{2}))?(?<Minute>[0-9]{1,2})[.:])(?<Second>[0-9]{2})[.:](?<Milisecond>[0-9]{2})");

        var string1 = "Duration: 00:21:38.97, start: 0.000000, bitrate: 2705 kb/s";
        var string2 = "size= 1547kB time=00:01:38.95 bitrate= 128.1kbits/s ";

        foreach(var match in regex.Match(string1).Captures)
        {
            Console.WriteLine(match.ToString());
        }

        foreach (var match in regex.Match(string2).Captures)
        {
            Console.WriteLine(match.ToString());
        }

        Console.ReadKey();
    }
} 
```

输出：

```
00:21:38.97
00:01:38.95 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T20:01:27.133

当您需要编写正则表达式时，您需要考虑*描述*您要匹配的文本的内容。

对于您的第一个示例，我想到了两种可能的描述：

1.  “匹配一系列四个两位数，用冒号分隔”。那将是`@"\d{2}:\d{2}:\d{2}:\d{2}"`或`@"(?:\d{2}:){3}\d{2}"`。

2.  匹配后面的任何文本，`"Duration: "`直到（但不包括）下一个逗号。那将是 `@"(?<=Duration: )[^,]*"`。

同样，对于您的第二个示例，您可以编写

1.  “匹配一系列四个两位数，用冒号分隔（最后一个是点除外）” `@"\d{2}:\d{2}:\d{2}\.\d{2}"`：。

2.  匹配后面的任何文本，`"time="`直到（但不包括）下一个空格。那将是 `@"(?<=time=)\S*"`。

这些中的任何一个是否真正做到了您需要它做的事情取决于您遇到的实际数据。例如，第一个正则表达式会在其中找到匹配项`1234:56:78:9012`（它会`34:56:78:90`在此处匹配，这可能不是您想要的）。第二个正则表达式会在字符串上失败，`Duration: 00:21:38.97; start: 0.000000; bitrate: 2705 kb/s`因为分隔符已更改。

所以你需要确切地知道你在寻找什么；那么，编写正则表达式非常简单。

# c - 指针变为空

> ID：14529204
> 
> 赞同：1
> 
> 时间：2013-01-25T19:41:40.190
> 
> 标签：c, memory, fopen

我将文件指针传递给函数（A），然后该函数打开文件，在 while 循环中读取一行（对于文件中的每一行）并使用这些值调用另一个函数（B）。问题是在运行函数 B 一次后，文件指针变为 NULL，我不知道为什么。

```
void readMatrixData(matrix *matrix, FILE *fileInput) 
{

    char buffer[30];

    while(fgets(buffer, 30, fileInput) != NULL) {
        char *splitString = strtok(buffer, ",");

        int row = atoi(splitString);
        splitString = strtok(NULL, ",");
        int column = atoi(splitString);
        splitString = strtok(NULL, ",");
        int value = atoi(splitString);

        insertNewNode(&matrix->rowArray[row], &matrix->columnArray[column], value, row, column);
    }
} 
```

我在调用函数 A 之前检查 fopen 是否返回 NULL，但事实并非如此。我还在while循环上设置了一个断点，第一次命中时，fileInput分配了一些内存。但是，在第二个循环中，fileInput 变为 NULL，我不知道为什么。

编辑：

这是 insertNewNode 函数：

```
void insertNewNode(node **rowHead, node **columnHead, int value, int row, int column) {

    //Get to the correct position in the column linked list
    if (*columnHead == NULL) {
        *columnHead = malloc(sizeof(node));
    } else {
        while((*columnHead)->nextColumn != NULL && (*columnHead)->nextColumn->row < row)
            *columnHead = (*columnHead)->nextColumn;
    }

    //Get to the correct position in the row linked list.
    if (*rowHead == NULL) {
        *rowHead = malloc(sizeof(node));
    } else {
        while((*rowHead)->nextRow != NULL && ((*rowHead)->nextRow->column < column))
            *rowHead = (*rowHead)->nextRow;
    }

    node *newNode = malloc(sizeof(node));
    newNode->column = column;
    newNode->row = row;
    newNode->value = value;

    (*columnHead)->nextColumn = newNode;
    (*rowHead)->nextRow = newNode;
} 
```

涉及的结构是：

```
typedef struct matrix {
    node **rowArray;
    node **columnArray;
Size matrixDimensions;
} matrix;

typedef struct node {
    int value;
    int row;
    int column;
    struct node *nextColumn;
    struct node *nextRow;
} node; 
```

我初始化矩阵数组：

```
node *columns[m->matrixDimensions.columns];
node *rows[m->matrixDimensions.rows];

for (int i=0; i< m->matrixDimensions.columns; i++)
{
    columns[i] = NULL;
}

for (int i=0; i < m->matrixDimensions.rows; i++)
{
    rows[i] = NULL;
}

m->columnArray = columns;
m->rowArray = rows; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T19:43:52.230

可能函数 insertNewNode 会覆盖内存

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T20:22:45.360

更喜欢`strtol`.`atoi`

正如@DavideBerra 建议的那样，注释掉对代码的调用`insertNewNode`并逐步执行代码以确认您可以对`while`循环进行多次迭代。

我不明白您如何使用`m->matrixDimensions.columns`and初始化矩阵数组`m->matrixDimensions.rows`。您使用的是 C99 VLA 吗？

提高编译器的警告级别并确保零警告编译。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T20:34:15.577

您不初始化新分配节点的 nextRow 和 nextColumn 字段。这样做至少可以避免一些麻烦。奇怪的是你没有得到 Segfault。

您还混合了数组和链表，如果您从文件中获得“溢出”值会发生什么？我觉得段错误离这里不远。要非常小心，您的代码显示了奇怪的概念混合！

正如其他人建议的那样，评论您的 insertNewNode 调用，看看您的循环是否执行良好。如果是，请使用调试器逐步运行您的程序。希望这有帮助，祝你好运 ！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T19:48:08.353

检查和访问之前的值`row`以及`column`这些`matrix->rowArray`值`matrix->columnArray`是否小于数组大小。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-25T19:50:09.147

我的猜测是值行，列可能在您的矩阵之外，因此会覆盖内存。添加对您收到的值的检查，并确保您的矩阵足够大。请记住，数组在 C 中是零索引的。

# javascript - 将复杂的层次结构推入 observableArray 会创建重复的实例

> ID：14529207
> 
> 赞同：0
> 
> 时间：2013-01-25T19:41:50.443
> 
> 标签：javascript, knockout.js, design-patterns

在尝试提出一个基本模型来处理我正在处理的应用程序域的所有类似实体时，我创建了：

*   一个基本对象（实体）：具有一些共享属性和初始化器，设置为原型
*   一个产品对象（Product）：从Entity“继承”。并包含“变体”列表
*   变体对象（Variant）：从实体“继承”。

> Product.prototype = new Entity();
> 
> Variant.prototype = new Entity();

当我运行它时，发生了一些奇怪的事情：“产品”对象中的“变体”列表最终包含两个元素，这很好，但它们不是两个单独的“变体”实例，而是指向同一个内存空间。

我已经进行了一些调试（基于警报），以确保在填充 observableArray 的“for 循环”期间，一切正常。

```
var Product = function (data) {
var initial = data || {};
this.variants = ko.observableArray();
this.init(initial);
if (initial.variants != null) {
  for (var i = 0; i < initial.variants.length; i++) {

    // NOTE: this is the misterious line. Creating two instances
    //       of 'new Variant', ends up pushing a single instance. 
    this.variants.push(new Variant(initial.variants[i]));
    //-----------------------------------------------------------

    alert(this.variants()[i].name());
  }
} 
```

我假设我缺少一些 Javascript 基础知识来弄清楚我做错了什么。

[这是JsFiddle](http://jsfiddle.net/luigi/G7eJK/13/)的完整示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T20:28:22.083

如果你将 observables 放在原型上，那么它们最终会在所有实例之间共享，而不是成为它们自己独立的 observables。observable 是一个在内部缓存其值的函数。因此，在这种情况下，每个实例都有相同函数的副本。

通常，您会希望避免将 observables 放在原型上，尽管您当然可以放置任何其他函数（通用处理程序、订阅回调和计算的 observable 读/写函数）。

如果您想创建一个从另一个具有可观察对象的结构继承，那么可以选择使用各种“混合”类型策略之一。

例如，您可以将基本构造函数应用于兄弟对象。

```
var Product = function(data) {
  Entity.call(this, data); //call the Entity constructor to add observables, etc.

  //do other Product stuff here
}; 
```

然后，您可以使`Product`原型等于`Entity`原型，或者更好地使原型在其链中`Product`具有原型，例如：`Entity`

```
Product.prototype = Object.create(Entity.prototype); 
```

如果您支持较旧的浏览器，请寻找`Object.create` [shim](https://stackoverflow.com/questions/10141086/understanding-crockfords-object-create-shim)。

更新示例：http: [//jsfiddle.net/rniemeyer/7AnAz/](http://jsfiddle.net/rniemeyer/7AnAz/)

# php - CodeIgniter 使用 while 或 foreach 时 result_array 的差异

> ID：14529209
> 
> 赞同：1
> 
> 时间：2013-01-25T19:41:51.890
> 
> 标签：php, codeigniter

我的模型中有这个功能：

```
public function get_current_knowledge($account_id)
{
    $query = $this->db->query('SELECT * FROM knowledge WHERE account_id = ?', array($account_id));

    return $query->result_array();
} 
```

我曾经像这样访问它：

```
while ($record = $this->synchronization_model->get_current_knowledge($account['id'])) {
    print_r($record);
} 
```

但奇怪的是，我的页面可能会超时，因为 while 会导致无休止的循环或其他什么？但为什么是这个问题。

我注意到 foreach 确实有效。但本质上，这应该与 while 一样返回，对吗？当像这样访问它时，使用foreach：

```
foreach ($this->synchronization_model->get_current_knowledge($account['id']) as $row)
{
     print_r($row);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T19:47:58.730

`while()`只要括号内的内容是真实的，循环就会运行。

每次循环运行时，您都将值分配给`$this->synchronization_model->get_current_knowledge($account['id'])`变量。`$record`当然，变量有一个值（因为你正在分配它），所以它总是真实的。这就是你得到无限循环的地方。

# java - android socket connection failed?

> ID：14529210
> 
> 赞同：1
> 
> 时间：2013-01-25T19:41:57.600
> 
> 标签：java, android, sockets

Im' writing a sample chat program that sends message between 2 android phones, so I wrote the following and let a phone connect to itself(10.0.2.2 or localhost) to test it the code works or not. But looks like in the thread of receivemsg(), the socket is never connected. So did I use the wrong ip address to refer to myself? or does my code have something wrong? thank you for your help!

```
package com.example.chatroomprogram;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.net.ServerSocket;
import java.net.Socket;
import java.net.UnknownHostException;

import android.annotation.SuppressLint;
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.os.Handler;
import android.util.Log;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ListView;

public class ClientActivity extends Activity {

    private Handler handler = new Handler();
    public ListView msgView;
    public ArrayAdapter<String> msgList;
//  public ArrayAdapter<String> msgList=new ArrayAdapter<String>(this,
//          android.R.layout.simple_list_item_1);;
    public String ipaddress;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_client);
        Intent intent = getIntent();
        ipaddress=intent.getStringExtra("ipaddress");
        Log.i("123","ip is "+ipaddress);
         msgView = (ListView) findViewById(R.id.listView);

        msgList = new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1);
        msgView.setAdapter(msgList);
//      msgView.smoothScrollToPosition(msgList.getCount() - 1);

        Button btnSend = (Button) findViewById(R.id.btn_Send);

        receiveMsg();

        btnSend.setOnClickListener(new View.OnClickListener() {

            @SuppressLint("NewApi")
            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

                final EditText txtEdit = (EditText) findViewById(R.id.txt_inputText);
                //msgList.add(txtEdit.getText().toString());
                sendMessageToServer(txtEdit.getText().toString());
                msgView.smoothScrollToPosition(msgList.getCount() - 1);

            }           
        });

//      receiveMsg();
        //----------------------------
        //server msg receieve
        //-----------------------

        //End Receive msg from server//
    }
    public void sendMessageToServer(String str) {

        final String str1=str;
        new Thread(new Runnable() {

            @Override
            public void run() {
                //String host = "opuntia.cs.utep.edu";
                //String host="10.0.";
                String host2 = "10.0.2.2";
                PrintWriter out = null;

                    Socket socket = null;
                    try {
                        socket = new Socket("10.0.2.2", 8008);
                    } catch (UnknownHostException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                    try {
                        out = new PrintWriter(socket.getOutputStream());
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                        Log.i("123","not null");
                    // out.println("hello");
                    out.println(str1);
                    Log.i("123", "hello");
                    out.flush();

            }
        }).start();
            }

    public void receiveMsg()
    {
        new Thread(new Runnable()
        {
            @Override
            public void run() {
                // TODO Auto-generated method stub

                //final  String host="opuntia.cs.utep.edu";
                final String host="10.0.2.2";
                //final String host="127.0.0.1";
                Socket socket = null ;
                BufferedReader in = null;
                try {
                    //socket = new Socket(host,8008);
                    ServerSocket ss = new ServerSocket(8008);
                     socket = ss.accept();
                } catch (UnknownHostException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

                try {
                    in = new BufferedReader(new InputStreamReader(socket.getInputStream()));
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

                while(true)
                {
                    String msg = null;
                    try {
                        msg = in.readLine();
                        Log.i("123","MSGGG:  "+ msg);

                        //msgList.add(msg);
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                    if(msg == null)
                    {
                        break;
                    }
                    else
                    {
                        displayMsg(msg);
                    }
                }

            }
        }).start();

    }

    public void displayMsg(String msg)
    { 
        final String mssg=msg;
        handler.post(new Runnable() {

            @SuppressLint("NewApi")
            @Override
            public void run() {
                // TODO Auto-generated method stub
                msgList.add(mssg);
                msgView.setAdapter(msgList);
                msgView.smoothScrollToPosition(msgList.getCount() - 1);
                Log.i("123","hi");
            }
        });

    }

} 
```

update: Problem solved, conclusion: if you use AVD, just use 10.0.2.2; if you use an actual phone to debug, you can use localhost

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T19:55:20.320

我的错...我使用了 10.0.2.2 并且它有效...

# sql - Sql Pivot table with three cross tab and multiple columns dynamically

> ID：14529215
> 
> 赞同：1
> 
> 时间：2013-01-25T19:42:23.157
> 
> 标签：sql, pivot

I have the following table with values as

```
CREATE TABLE stud 
  ( 
     sname NVARCHAR(10), 
     hr    NVARCHAR(30), 
     dt    DATETIME, 
     att   VARCHAR(3) 
  )

INSERT INTO stud VALUES ('Abi',  '1',  '21/01/2013','a')
INSERT INTO stud VALUES ('Abi',  '2',  '21/01/2013','p')
INSERT INTO stud VALUES ('bala',  '1',  '21/01/2013','p')
INSERT INTO stud VALUES ('bala',  '2',  '21/01/2013','a')
INSERT INTO stud VALUES ('bala',  '1',  '22/01/2013','od')
INSERT INTO stud VALUES ('bala',  '2',  '22/01/2013','ml')
INSERT INTO stud VALUES ('Abi',  '1',  '22/01/2013','ml')
INSERT INTO stud VALUES ('Abi',  '2',  '22/01/2013','od') 
```

If i select this table i get the output as

```
SELECT * 
FROM   stud 
```

```
sname   hr            dt                att
Abi 1   2013-01-21 00:00:00.000  a
Abi 2   2013-01-21 00:00:00.000  p
bala    1   2013-01-21 00:00:00.000  p
bala    2   2013-01-21 00:00:00.000  a
bala    1   2013-01-22 00:00:00.000  od
bala    2   2013-01-22 00:00:00.000  ml
Abi 1   2013-01-22 00:00:00.000  ml
Abi 2   2013-01-22 00:00:00.000  od
```

but I want the output as follows in crystal report in ASP.NET ( Note : the date should given as dynamically as **from_date** to **to to_date** )

![](../Images/62544da54f5549ccaeac474e72126d84.png)

`sname 21/01/2013 22/01/2013`

I tried for this output from long days itself, but didn't get output.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T19:56:26.513

如果您使用的是 SQL Server 2005+，则可以通过多种方式应用该`PIVOT`功能。

您可以以静态数据透视表的形式对值进行硬编码：

```
select *
from
(
  select sname, 
    'hour_no_'+hr+'_'+convert(nvarchar(10), dt, 120) dt,
    att
  from stud
) st
pivot
(
  max(att)
  for dt in ([hour_no_1_2013-01-21], [hour_no_2_2013-01-21],
             [hour_no_1_2013-01-22], [hour_no_2_2013-01-22])
) piv 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/9c72e/6)

或者您可以使用动态 sql 在运行时生成 sql 语句。查询的动态版本是：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols 
  = STUFF((SELECT ', ' + QUOTENAME('Hour_No_'+hr+'_'++convert(nvarchar(10), dt, 120)) 
           from stud
           group by hr, dt
           order by dt, hr
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT sname,' + @cols + ' from 
             (
                select sname, 
                  ''hour_no_''+hr+''_''+convert(nvarchar(10), dt, 120) dt,
                  att
                from stud
            ) x
            pivot 
            (
                max(att)
                for dt in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/9c72e/9)。

两者都给出结果：

```
| SNAME | HOUR_NO_1_2013-01-21 | HOUR_NO_2_2013-01-21 | HOUR_NO_1_2013-01-22 | HOUR_NO_2_2013-01-22 |
-----------------------------------------------------------------------------------------------------
|   Abi |                    a |                    p |                   ml |                   od |
|  bala |                    p |                    a |                   od |                   ml | 
```

# c# - 带有 DataTable 的 SqlBulkInsert 到链接服务器

> ID：14529217
> 
> 赞同：2
> 
> 时间：2013-01-25T19:42:31.797
> 
> 标签：c#, sql, sql-server-2008, bulkinsert, linked-server

我在不同的机器上使用 2 个 SQL 2008 服务器。服务器名称是`source.ex.com`和`destination.ex.com`。

`destination.ex.com`已链接到`source.ex.com`并具有适当的权限`source.ex.com`以写入调用的`bacon-wrench`数据库 `destination.ex.com`

`source.ex.com`我已经通过短信登录并测试了这个查询（成功）：

```
INSERT INTO [destination.ex.com].[bacon-wrench].[dbo].[tblFruitPunch]
(PunchID, BaconID) VALUES (4,6); 
```

在 C# .NET 4.0 网页中，我连接到`source.ex.com`并执行类似的查询（成功）：

```
using(SqlConnection c = new SqlConnection(ConfigurationManager.ConnectionStrings["SOURCE"].ConnectionString))
{
    c.Open();
    String sql = @"
        INSERT INTO [destination.ex.com].[bacon-wrench].[dbo].[tblFruitPunch]
        (PunchID, BaconID) VALUES (34,56);";
    using(SqlCommand cmd = new SqlCommand(sql, c))
    {
        cmd.ExecuteNonQuery();
    }
} 
```

对于一小组插入语句（比如 20 个或更少），执行以下操作可以正常执行：

```
using(SqlConnection c = new SqlConnection(ConfigurationManager.ConnectionStrings["SOURCE"].ConnectionString))
{
    c.Open();
    String sql = @"
        INSERT INTO [destination.ex.com].[bacon-wrench].[dbo].[tblFruitPunch]
         (PunchID, BaconID) VALUES (34,56);
        INSERT INTO [destination.ex.com].[bacon-wrench].[dbo].[tblFruitPunch]
         (PunchID, BaconID) VALUES (22,11);
        INSERT INTO [destination.ex.com].[bacon-wrench].[dbo].[tblFruitPunch]
         (PunchID, BaconID) VALUES (33,55);
        INSERT INTO [destination.ex.com].[bacon-wrench].[dbo].[tblFruitPunch]
         (PunchID, BaconID) VALUES (1,2);";
    using(SqlCommand cmd = new SqlCommand(sql, c))
    {
        cmd.ExecuteNonQuery();
    }
} 
```

我正在尝试用大约 20000 条记录来做这样的事情。上述方法需要 11 分钟才能完成——我认为这是服务器对我发出尖叫以使其成为某种批量操作。从其他 StackOverflow 线程`SqlBulkCopy`中推荐了该类，并将其作为参数`DataTable`，完美！

因此，我构建了一个 DataTable 并尝试将其写入服务器（失败）：

```
DataTable dt = new DataTable();
dt.Columns.Add("PunchID", typeof(int));
dt.Columns.Add("BaconID", typeof(int));
for(int i = 0; i < 20000; i++)
{
    //I realize this would make 20000 duplicate 
    //rows but its not important 
    dt.Rows.Add(new object[] {
        11, 33 
    });
}

using(SqlConnection c = new SqlConnection(ConfigurationManager.ConnectionStrings["SOURCE"].ConnectionString))
{
    c.Open();
    using(SqlBulkCopy bulk = new SqlBulkCopy(c))
    {
        bulk.DestinationTableName = "[destination.ex.com].[bacon-wrench].[dbo].[tblFruitPunch]";
        bulk.ColumnMappings.Add("PunchID", "PunchID");
        bulk.ColumnMappings.Add("BaconID", "BaconID");
        bulk.WriteToServer(dt);
    }
} 
```

EDIT2：以下消息是我试图修复的：

网页崩溃`bulk.WriteToServer(dt);`并显示错误消息`Database bacon-wrench does not exist please ensure it is typed correctly.`我做错了什么？如何更改它以使其正常工作？

编辑1：

我能够使用以下语法显着加快查询速度。但是对于这么小的记录集，它仍然很慢。

```
using(SqlConnection c = new SqlConnection(ConfigurationManager.ConnectionStrings["SOURCE"].ConnectionString))
{
    c.Open();
    String sql = @"
        INSERT INTO [destination.ex.com].[bacon-wrench].[dbo].[tblFruitPunch]
         (PunchID, BaconID) VALUES 
         (34,56),
         (22,11),
         (33,55),
         (1,2);";
    using(SqlCommand cmd = new SqlCommand(sql, c))
    {
        cmd.ExecuteNonQuery();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-06T21:22:58.837

如果您使用的是 SQL Server 2008+，则可以引入 Table 用户数据类型。准备类型、接收表和存储过程，如下所示。数据类型和存储过程在本地系统上。我一般在代码中有一个if语句检测表是远程还是本地，远程我这样做，本地我用SqlBulkCopy。

```
if(TYPE_ID(N'[Owner].[TempTableType]') is null)
begin
CREATE TYPE [Owner].[TempTableType] AS TABLE ( [PendingID] uniqueidentifier, [Reject] bit)
end
IF  NOT EXISTS (SELECT * FROM [LinkedServer].[DatabaseOnLS].sys.tables where name = 'TableToReceive') 
EXEC('
CREATE TABLE [DatabaseOnLS].[Owner].[TableToReceive] ( [PendingID] uniqueidentifier, [Reject] bit)
') AT [LinkedServer]
else
EXEC('
TRUNCATE TABLE [DatabaseOnLS].[Owner].[TableToReceive]
') AT [LinkedServer]

CREATE PROCEDURE [Owner].[TempInsertTable]
@newTableType TempTableType readonly
AS
BEGIN
insert into [LinkedServer].[DatabaseOnLS].[Owner].[TableToReceive] select * from @newTableType 
END 
```

在 C# 代码中，您可以执行以下操作将 DataTable 插入到链接服务器上的表中（我正在使用现有的 UnitOfWork，它已经具有连接和事务）：

```
using (var command = new SqlCommand("TempInsertTable",
                    oUoW.Database.Connection as SqlConnection) { CommandType = CommandType.StoredProcedure }
                )
{
    command.Transaction = oUoW.Database.CurrentTransaction as SqlTransaction;
    command.Parameters.Add(new SqlParameter("@newTableType", oTempTable));
    drResults = command.ExecuteReader();
    drResults.Close();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T22:24:12.350

在尝试了包括链接服务器设置、排序规则、同义词等在内的许多事情之后，我最终得到了这个错误消息：

`Inserting into remote tables or views is not allowed by using the BCP utility or by using BULK INSERT.`

也许您可以批量插入到本地服务器上的临时表（您的代码可以正常工作），然后从该临时表插入到链接服务器，然后本地删除临时表。您必须测试性能。

# c# - c#客户端/服务器应用程序仅适用于局域网，修复？

> ID：14529218
> 
> 赞同：-2
> 
> 时间：2013-01-25T19:42:45.747
> 
> 标签：c#, forms, sockets, client, lan

> **可能重复：**
> [tcp/ip 客户端服务器无法通过 Internet 工作](https://stackoverflow.com/questions/7065838/tcp-ip-client-server-not-working-over-internet)

上周我在一个简单的 Windows 窗体应用程序上工作，该应用程序应该从客户端到服务器或从服务器到客户端发送几个整数。到目前为止，我只设法使其适用于 lanns，关于如何使其在开放互联网上运行的任何想法？这是你需要的代码（也叫我菜鸟，但我不知道这个网站如何处理代码，`...`没有做我认为它做的事情，所以请随时编辑我的帖子，以防万一我失败了）

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows.Forms;

using System.Net;
using System.Net.Sockets;
using System.Threading;

namespace client_server_penta
{
    public class Client
    {
        #region Fields 
        private int turno = 1;
        private TcpClient[] clients = new TcpClient[1]; //used to remember the active client
        private int CoordinateX, CoordinateY; //coordinates, they are used by the application
        #endregion     

        public Client(string address)
        {            

                TcpClient client = new TcpClient();
                IPEndPoint serverEndPoint = new IPEndPoint(IPAddress.Parse(address), 3000);
                client.Connect(serverEndPoint);
                clients[0] = client;              
                Thread ReadFromServer = new Thread(new ParameterizedThreadStart(this.ReadHandler));
                ReadFromServer.Start(client);
        } 

        public void SendData(int a, int b)
        {
            NetworkStream clientStream = clients[0].GetStream();
            ASCIIEncoding encoder = new ASCIIEncoding();
            byte[] buffer = encoder.GetBytes(a.ToString() + '$' + b.ToString() + '$');
            clientStream.Write(buffer, 0, buffer.Length);
            clientStream.Flush();
        }

        public int ReadCoordinateX()
        {
            return this.CoordinateX;
        }

        public int ReadCoordinateY()
        {
            return this.CoordinateY;
        }

        private void ReadHandler(object client)
        {
            TcpClient tcpClient = (TcpClient)client;
            NetworkStream clientStream = tcpClient.GetStream();

            byte[] buffer;
            int bytesRead;

            while (true)
            {
                buffer = new byte[10];
                bytesRead = 0;
                try
                {                    
                    bytesRead = clientStream.Read(buffer, 0, buffer.Length);
                }
                catch
                {
                    //an uknown error has occurred
                    break;
                }
                if (bytesRead == 0)
                {
                    //the client has disconnected from the server
                    break;
                }
                //data received
                ASCIIEncoding encoder = new ASCIIEncoding();
                OnDataReceived(encoder.GetString(buffer, 0, buffer.Length));
            }
            tcpClient.Close();            
        }

        private void OnDataReceived(string text)
        {
            string first_number = "";
            string second_number = "";
            int index = 0;
            while (text[index] != '$')
                first_number += text[index++];
            index++;
            while (text[index] != '$')
                second_number += text[index++];
            this.CoordinateX = Convert.ToInt32(first_number);
            this.CoordinateY = Convert.ToInt32(second_number);
            var myForm = Application.OpenForms["Form2"] as Form2;
            myForm.Text = "Turno N." + Convert.ToString(this.turno++);
        }
    }
} 
```

//这里是服务器

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows.Forms;

using System.Net;
using System.Net.Sockets;
using System.Threading;

namespace client_server_penta
{
    public class Server
    {        
        private Thread listenThread;
        private int turno = 1;
        private TcpListener tcpListener;
        private TcpClient[] clients = new TcpClient[1]; //used to remember the active client
        private int CoordinateX, CoordinateY; //coordinates, they are used by the application

        public Server(int port)
        {
            this.tcpListener = new TcpListener(IPAddress.Any, 3000);
            this.listenThread = new Thread(new ThreadStart(ListenForClients));
            this.listenThread.Start();

        }

        public void SendData(int a, int b)
        {
            NetworkStream clientStream = clients[0].GetStream();
            ASCIIEncoding encoder = new ASCIIEncoding();
            byte[] buffer = encoder.GetBytes(a.ToString()+'$'+b.ToString()+'$');
            clientStream.Write(buffer, 0, buffer.Length);
            clientStream.Flush();
        }

        public int ReadCoordinateX()
        {
            return this.CoordinateX;
        }

        public int ReadCoordinateY()
        {
            return this.CoordinateY;
        }

        private void ListenForClients()
        {

                this.tcpListener.Start();
                TcpClient client = this.tcpListener.AcceptTcpClient();                              
                clients[0] = client;
                Thread ReadFromClient = new Thread(new ParameterizedThreadStart(this.ReadHandler));
                ReadFromClient.Start(client);

        }

        private void ReadHandler(object client)
        {
            TcpClient tcpClient = (TcpClient)client;
            NetworkStream clientStream = tcpClient.GetStream();

            byte[] buffer = new byte[10];
            int bytesRead;

            while (true)
            {
                buffer = new byte[10];
                bytesRead = 0;
                try
                {
                    bytesRead = clientStream.Read(buffer, 0, buffer.Length);
                }
                catch
                {
                    break;
                }
                if (bytesRead == 0)
                {
                    //the client has disconnected from the server
                    break;
                }
                //data received
                ASCIIEncoding encoder = new ASCIIEncoding();
                OnDataReceived(encoder.GetString(buffer, 0, buffer.Length));                
            }  
            tcpClient.Close();            
        }

        private void OnDataReceived(string text)
        {
            string first_number = "";
            string second_number = "";
            int index = 0;
            while (text[index] != '$')            
                first_number += text[index++];
            index++;
            while (text[index] != '$')
                second_number += text[index++];
            this.CoordinateX = Convert.ToInt32(first_number);
            this.CoordinateY = Convert.ToInt32(second_number);
            var myForm = Application.OpenForms["Form2"] as Form2;
            myForm.Text = "Turno N."+Convert.ToString(this.turno++);
        }     
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T19:46:21.387

你防火墙两边的3000端口都打开了吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T20:05:47.787

当然是的^^如果你有路由器，不要忘记编辑配置。

# php - 如何实现定时器？

> ID：14529227
> 
> 赞同：-2
> 
> 时间：2013-01-25T19:43:16.047
> 
> 标签：php

对于一个项目，我需要一个 PHP 计时器，以便在打开第一页时启动（例如 1.php），并在我转到第二页时停止（例如 2.php）。我如何在 PHP 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T19:48:55.297

***非常***基本的例子：

1.php

```
<?php
session_start();
$_SESSION['start'] = time();
?> 
```

2.php

```
<?php
session_start();
if(isset($_SESSION['start'])){
    $timeSince = time() - $_SESSION['start'];
    echo $timeSince . ' seconds since user first loaded 1.php!';
    unset($_SESSION['start']); //unset the timer variable.
} else{
    //didn't visit 1.php or session has expired. You could force a redirect:
    header('Location: 1.php');
    exit;
}
?> 
```

值得一提的是：

1.  您不能确保用户会从 1.php 移动到 2.php。他们可以关闭浏览器或点击后退按钮。他们的会话可能会过期。
2.  如果启动会话变量不存在，您可能希望强制从 2.php 重定向回 1.php。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T19:44:21.513

查看[microtime()](http://php.net/manual/en/function.microtime.php)函数。

# python - Scrapy 不生成输出 CSV 文件

> ID：14529235
> 
> 赞同：0
> 
> 时间：2013-01-25T19:43:45.243
> 
> 标签：python, scrapy

我正在使用 Python 2.7 32 位。我下载并安装了 Scrapy 0.16.4。我使用的是 Windows 7。我从这个页面[http://doc.scrapy.org/en/0.16/intro/install.html](http://doc.scrapy.org/en/0.16/intro/install.html)安装了它。

当我使用 cmd 并输入 scrapy version 时，它显示程序已安装。当我尝试从任何教程中运行蜘蛛时，它会从页面中提取信息并将其显示在 cmd 中，但不会在 csv 文件中生成输出，并表示它没有抓取或抓取任何页面。

我很困惑，因为它似乎已正确安装并且似乎部分工作......但它有上述问题。

我很想知道有没有其他人遇到过类似的情况？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T07:46:09.547

您需要遵循本教程

[http://doc.scrapy.org/en/0.16/intro/tutorial.html](http://doc.scrapy.org/en/0.16/intro/tutorial.html)

然后使用这个运行scrapy

`scrapy crawl dmoz`

你也可以从这里得到现成的scrapy爬虫来玩

`https://github.com/scrapy/dirbot`

如果你给我们更多的信息，那么我们会给你更多的方向

# android - 安卓设备上的并行应用

> ID：14529236
> 
> 赞同：1
> 
> 时间：2013-01-25T19:43:51.487
> 
> 标签：android, multithreading, parallel-processing

我可以在多核安卓手机上编写并行应用程序吗？我正在尝试将应用程序划分为线程并在核心上运行每个线程，以加快应用程序的速度。我可以控制内核上的线程分布吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T19:48:48.557

> 我可以控制内核上的线程分布吗？

不，你不想。您可以根据需要创建线程。让操作系统/虚拟机决定如何跨内核分配。操作系统/虚拟机工程师比我们聪明。

# apache - 如何转义 mod_rewrite 默认编码

> ID：14529244
> 
> 赞同：1
> 
> 时间：2013-01-25T19:44:21.483
> 
> 标签：apache, tomcat, mod-rewrite, escaping, cjk

我正在为非英语网站编写一些 mod_rewrite 规则。我的 URI（查询）看起来像`%E3%82%A2%E3%83%A1%E3%83%AA%E3%82%AB%E5%90%88%E8%A1%86%E5%9B%BD`，但是当我在 Tomcat 上运行的应用程序中收到请求时，我得到的只是“?????”。

我无法理解 Apache 在这里做了什么样的编码。我尝试了 NE 和 B 标志，但徒劳无功。有什么建议么？

重写看起来像这样：

```
RewriteCond %{HTTP_HOST} ^www\.xyz\.com$ [NC]
RewriteRule ^/test/(.*)$ /slice/index.html?reqURI=%{REQUEST_URI} [P,NC,QSA] 
```

# batch-file - 批处理文件上的多项选择菜单？

> ID：14529246
> 
> 赞同：8
> 
> 时间：2013-01-25T19:44:29.093
> 
> 标签：batch-file

嗨，我想制作一个批处理文件菜单，询问“选择要安装的应用程序？” 例如

1.  应用程序1
2.  应用程序2
3.  应用程序3
4.  应用程序4
5.  应用程序5
6.  所有应用

选择什么应用程序：_

我想要的是，例如我想安装 App2、App3 和 App5，所以我可以通过 App ID 的 'Select what app:2,3,5' 输入。当用户选择选项 6 时，它将安装所有应用程序！

我知道这在 bash 脚本中是可能的，但我不确定在批处理脚本中？

批处理菜单的示例是[http://mintywhite.com/software-reviews/productivity-software/create-multiple-choice-menu-batchfile/](http://mintywhite.com/software-reviews/productivity-software/create-multiple-choice-menu-batchfile/)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-26T04:06:22.793

## 回答

这将做你想要的。如果您有任何问题，请告诉我。您所要做的就是按照脚本中列出的两个步骤进行操作。

## 脚本

```
:: Hide Command and Set Scope
@echo off
setlocal EnableExtensions

:: Customize Window
title My Menu

:: Menu Options
:: Specify as many as you want, but they must be sequential from 1 with no gaps
:: Step 1\. List the Application Names
set "App[1]=One"
set "App[2]=Two"
set "App[3]=Three"
set "App[4]=Four"
set "App[5]=Five"
set "App[6]=All Apps"

:: Display the Menu
set "Message="
:Menu
cls
echo.%Message%
echo.
echo.  Menu Title
echo.
set "x=0"
:MenuLoop
set /a "x+=1"
if defined App[%x%] (
    call echo   %x%. %%App[%x%]%%
    goto MenuLoop
)
echo.

:: Prompt User for Choice
:Prompt
set "Input="
set /p "Input=Select what app:"

:: Validate Input [Remove Special Characters]
if not defined Input goto Prompt
set "Input=%Input:"=%"
set "Input=%Input:^=%"
set "Input=%Input:<=%"
set "Input=%Input:>=%"
set "Input=%Input:&=%"
set "Input=%Input:|=%"
set "Input=%Input:(=%"
set "Input=%Input:)=%"
:: Equals are not allowed in variable names
set "Input=%Input:^==%"
call :Validate %Input%

:: Process Input
call :Process %Input%
goto End

:Validate
set "Next=%2"
if not defined App[%1] (
    set "Message=Invalid Input: %1"
    goto Menu
)
if defined Next shift & goto Validate
goto :eof

:Process
set "Next=%2"
call set "App=%%App[%1]%%"

:: Run Installations
:: Specify all of the installations for each app.
:: Step 2\. Match on the application names and perform the installation for each
if "%App%" EQU "One" echo Run Install for App One here
if "%App%" EQU "Two" echo Run Install for App Two here
if "%App%" EQU "Three" echo Run Install for App Three here
if "%App%" EQU "Four" echo Run Install for App Four here
if "%App%" EQU "Five" echo Run Install for App Five here
if "%App%" EQU "All Apps" (
    echo Run Install for All Apps here
)

:: Prevent the command from being processed twice if listed twice.
set "App[%1]="
if defined Next shift & goto Process
goto :eof

:End
endlocal
pause >nul 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-25T20:42:06.997

您可以使用choice.exe，请参见此处：[http ://ss64.com/nt/choice.html](http://ss64.com/nt/choice.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-26T03:01:08.343

您想使用`set /p` 下面的示例：

```
echo What would you like to install?
echo 1 - App1
echo 2 - App2

set /p whatapp=

if %whatapp%==1 (
    codetoinstallapp1
) else if %whatapp%==2 (
    codetoinstallapp2
) else (
    echo invalid choice
) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-03-01T01:40:54.880

这是我学到的一个技巧：

```
echo.1) first choice
echo.2) second choice
echo.3) third choice
echo.4) fourth choice

:: the choice command

set pass=
choice /c 1234 /n /m "Choose a task"
set pass=%errorlevel%

::the choices

if errorlevel 1 set goto=1
if errorlevel 2 set goto=2
if errorlevel 3 set goto=3
if errorlevel 4 set goto=4
goto %goto% 
```

虽然我只使用 1-4 个，但添加更多可能的选择会很容易。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-07-02T19:23:07.853

```
@echo off
:menu
cls
echo.
echo Select the case color you want to create:
echo ==========================================
echo.
echo App 1
echo App 2
echo App 3
echo App 4
echo.
echo ==========================================
echo Please answer Y/N to the following:

set /p App1= Install App 1?
set /p App2= Install App 2?
set /p App3= Install App 3?
set /p App4= Install App 4?

if /I "%App1%" EQU "Y" goto :Option-1
if /I "%App1%" EQU "N" goto :1
:1
if /I "%App2%" EQU "Y" goto :Option-2
if /I "%App2%" EQU "N" goto :2
:2
if /I "%App3%" EQU "Y" goto :Option-3
if /I "%App3%" EQU "N" goto :3
:3
if /I "%App4%" EQU "Y" goto :Option-4
if /I "%App4%" EQU "N" goto :End

:Option-1
App 1 Loc.
goto 1
:Option-2
App 2 Loc.
goto 2
:Option-3
App 3 Loc.
goto 2
:Option-4
App 4 Loc.
:End

Exit 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-04-05T16:24:36.383

带有复选框模拟的菜单。

```
@echo off

set size=3

::preset
set chbox2=x

:prepare
for /L %%i in (0,1,%size%) do (
    if defined chbox%%i (
        set st%%i=Y
    ) else (
        set chbox%%i= 
    )
)

:menu
cls
echo.
echo  1\. [%chbox1%]  name_1:
echo.
echo  2\. [%chbox2%]  name_2:
echo.
echo  3\. [%chbox3%]  name_3:
echo.
echo.
echo.

choice /C 1234567890qa /N /M "Select [1-9] >> [a]pply or [q]uit:"
echo.
set inp=%errorlevel%

if %inp%==11 (
    exit
)
if %inp%==12 (
    call :apply
)

::switch
if defined st%inp% (
    set st%inp%=
    set chbox%inp%= 
) else (
    set st%inp%=Y
    set chbox%inp%=X
)
goto :menu

:apply
for /L %%i in (0,1,%size%) do (
    if defined st%%i (
        call :st%%i
        echo.
    )
)
echo.
pause
goto :menu

:st1
echo First Command
goto :eof

:st2
echo Second Command
goto :eof

:st3
echo Third Command
goto :eof 
```

您可以在 :preset 标签下将选中的行设置为默认值。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-12-07T00:52:16.913

这是对 David Ruhmann 与上述“验证输入”部分相关的代码进行改进的建议分析：

测试菜单中的特殊字符很有效，但以下字符“^&<”除外。当每个都提交输入时，程序关闭。

```
set "Input=%Input:"=%"
set "Input=%Input:^^=%"
set "Input=%Input:>=%"
set "Input=%Input:<=%"
set "Input=%Input:^&=%"
set "Input=%Input:|=%"
set "Input=%Input:(=%"
set "Input=%Input:)=%"
:: Equals are not allowed in variable names
set "Input=%Input:^==%" 
```

转义 ^ 和 & 有效，但是解析“<”和“>”时会发生一些非常奇怪的事情（转义这些似乎不起作用）。如果我们颠倒上述修改中两个语句的顺序，我们会发现“<”有效，但现在“>”无效。

但是，用“<”向下移动第二个语句，两个重定向字符都可以工作，但现在“）”不行！

```
set "Input=%Input:"=%"
set "Input=%Input:^^=%"
set "Input=%Input:>=%"
set "Input=%Input:^&=%"
set "Input=%Input:|=%"
set "Input=%Input:(=%"
set "Input=%Input:)=%"
set "Input=%Input:<=%"
:: Equals are not allowed in variable names
set "Input=%Input:^==%" 
```

[在这里](http://www.sevenforums.com/tutorials/78083-batch-files-create-menu-execute-commands.html)可以找到另一个很棒的批处理菜单教程。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-09T08:31:49.220

我看到以上答案都没有完全回答他/她的问题。他们遗漏的一项功能是一次性选择它安装的所有软件（可以这么说）。

所以我把这个从我的头顶上做了（如果有什么问题非常抱歉，如果有的话我会编辑它）。

```
@echo off & setlocal enabledelayedexpansion

echo What would you like to install?
::Put your options here, preferably numbered.
set /p op=Type the numbers of the software you want to install (separated by commas with no spaces. E.g: 1,3,2): 

for /f "delims=, tokens=1-5" %%i in ("op") do (
set i=%%i
set j=%%j
set k=%%k
set l=%%l
set m=%%m
)
if %i%X neq X set last=1b & goto %i%
:1b
if %j%X neq X set last=2b & goto %j%
:2b
if %k%X neq X set last=3b & goto %k%
:3b
if %l%X neq X set last=4b & goto %l%
:4b
if %m%X neq X set last=%m% & goto %m%
goto next

:1
::Put the code for doing the first option here
goto %last%
:2
::Put the code for doing the second option here
goto %last%
:3
::Put the code for doing the third option here
goto %last%
:4
::Put the code for doing the fourth option here
goto %last%
:5
::Put the code for doing the fifth option here
goto %last% 
```

:next ::把更多的东西放在这里...

所以这有点过分了。随意改变一些事情等等。

代码所做的是获取用户输入（例如，如果您输入“1,3,4”），将每个数字放入其自己的变量中，检查该变量是否为空，如果不是，则发送给您编写任何选项的代码。它会这样做几次，直到评估完所有变量。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-01-25T19:47:06.890

批处理文件是命令提示符命令的列表。以下代码打印到终端：

```
echo whateveryouwant 
```

使用批处理文件中的这些回显语句打印菜单。

可以在此处找到获取用户输入：[如何在批处理文件中从控制台读取输入？](https://stackoverflow.com/questions/7879791/how-to-read-input-from-console-in-a-batch-file)

应用程序的安装稍微复杂一些——你需要知道应用程序的要求以及文件应该移动到哪里——这也应该很简单；`move`在适当的地方使用适当的文件。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-01-28T18:55:44.000

这是我正在使用的批处理脚本菜单的示例：

```
@echo off
setlocal
:begin
cls
echo [LOCAL ACCOUNTS REMOTE ADMIN] --------------------------------------
echo   1 -- List local accounts on a remote machine
echo   2 -- Create a local account on a remote machine
echo   3 -- Change a local account password on a remote machine
echo   4 -- Delete a local account on a remote machine
echo;
echo   5 -- exit
echo;
set /P rmFunc="Enter a choice: "
echo --------------------------------------------------------------------
for %%I in (1 2 3 4 5 x) do if #%rmFunc%==#%%I goto run%%I
goto begin

:run1
rem list local accounts code
goto begin

:run2
rem create local account code
goto begin

rem and so on, until...

:run5
:run9
:run99
:runx
endlocal
goto :EOF 
```

最相关的位是`set /p`行和`for...in`行。该`for...in`行基本上将输入的选项与每个菜单项编号进行比较，如果匹配，`goto run#`; 否则从头开始。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-07-17T03:02:12.960

这是我在多项选择游戏中经常使用的相当简单的代码：

```
@echo off
color 0a
cls
:download
echo App 1
echo App 2
echo App 3
echo App 4
echo App 5
echo All Apps
echo 
echo Select What App (1, 2, 3, ect.):
set /p apps=

if %apps%==1 goto 1
if %apps%==1 goto 2
if %apps%==1 goto 3
if %apps%==1 goto 4
if %apps%==1 goto 5
if %apps%==1 goto all

:1
(Your Code Here)
:2
(Your Code Here)
:3
(Your Code Here)
:4
(Your Code Here)
:5
(Your Code Here)
:all
(Your Code Here) 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-01-01T22:31:32.230

我正在使用这个

```
@echo off
:a
echo Welcome to a casual log-in (you are a idiot)

echo.

pause

echo ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ

set /p c=Email:

echo ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ

set /p u=Password:

echo ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ

msg * Welcome %c%.

goto a 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-05-12T00:52:16.250

实际上有一个非常简单的方法可以做到这一点。

```
@echo off
echo Which app do you want to install?
echo [APP 1]
echo [APP 2]
echo [APP 3]
echo.
echo Type 1, 2, or 3.
set /p "AppInstaller=>"
if %AppInstaller%==1 goto 1
if %AppInstaller%==2 goto 2
if %AppInstaller%==3 goto 3
:1
[INSTALL CODE]
:2
[INSTALL CODE]
:3
[INSTALL CODE] 
```

像这样编码时，菜单将如下所示：

```
Which app do you want to install?
[APP 1]
[APP 2]
[APP 3]

Type 1, 2, or 3.
>_ 
```

该代码将变量 AppInstaller 设置为 1、2 或 3。该文件确定这一点并将您重定向到每个安装程序的安装程序。

# javascript - Javascript Scrollbar - 向下滚动但不向上滚动 clientY

> ID：14529251
> 
> 赞同：1
> 
> 时间：2013-01-25T19:44:46.317
> 
> 标签：javascript, scrollbar

我正在编写一个滚动条来替换浏览器上的滚动条。为了学习经验，我更喜欢自己做，而不是使用 jQuery。

我得到了这段代码，但我有几个问题：

1.  它会向下滚动，但不会向上滚动。
2.  当我点击 100px 长和 10px 宽的滚动条元素时，鼠标指针似乎捕捉到滚动条元素的顶部，这对于滚动条来说看起来不自然。

html:

```
<div id="portfolioScrollbar">
        <div id="scrollbarTrack"><a id="scrolla" href="#scrollbar"></a></div>
    <div id="pbody">
                      ...all the text stuff...
             </div>
     </div> 
```

编辑-新代码 2013 年 1 月 27 日：

Javascript：

```
 function CloseContact() {
        setTimeout (addClose, 2200 );
        setTimeout (addContact, 2400 );
        var foo = document.getElementById("scrolla");
        foo.addEventListener( "mousedown", scrollObject.sbar1, false);
        foo.addEventListener( "mouseup", removeAll, false);
        foo.addEventListener( "mouseout", removeAll, false);
    }

    function removeAll(event) {
        console.log("REMOVEaLL");
        var foo = document.getElementById("scrolla");
        foo.removeEventListener("mouseup", scrollObject.sbar2, false); 
        foo.removeEventListener("mouseout", scrollObject.sbar2, false); 
        foo.removeEventListener("mousemove", scrollObject.sbar2, false); 
    }

var scrollObject = function (event) {

    var current = 0;
    var move = null;

    function sbar1(event) {
        console.log("mousedown");
        event.preventDefault();
        var foo = document.getElementById("scrolla");
        current = event.clientY;
        foo.addEventListener( "mousemove", sbar2, false);
    }

    function sbar2(event) {
//      console.log(event.clientY);
        event.preventDefault();
        var pbody = document.getElementById("pbody");
        var scroll = document.getElementById("scrolla");
        move = event.clientY - current;

        if (move != 78644 ) {
            console.log(move);
        scroll.style.marginTop =  move + "px";
        //current = move;
        }
    }

    return {
        sbar1: sbar1,
            sbar2: sbar2,
    }
}(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T00:48:16.343

K. 所以您的问题是，您正在调整边距以匹配点击的高度，这会将滚动条的边缘设置为鼠标的位置。这会立即触发 mouseout 处理程序，该处理程序会删除滚动处理程序。

我在您的代码中添加了一些日志记录，如下所示：

```
<script type="text/javascript">
var foo = document.getElementById("scrolla");
    var pbody = document.getElementById("pbody");
    var scroll = document.getElementById("scrolla");

function contact() {    
    foo.addEventListener( "mousedown", sbar1, false);
    foo.addEventListener( "mouseup", function() { console.log("### removing mousemove"); foo.removeEventListener("mousemove", sbar2, false) }, false);
    foo.addEventListener( "mouseout", function() { console.log("### removing mouseout"); foo.removeEventListener("mousemove", sbar2, false) }, false);
}

function sbar1() {
console.log("@@@ adding listener");
    foo.addEventListener( "mousemove", sbar2, false);
}

function sbar2(event) {
console.log("moving");
    var h = event.clientY;
console.log(h);
    scroll.style.marginTop = h + "px";
}

scroll.addEventListener('click', contact, false);

contact();
</script> 
```

并在点击时得到以下输出：

```
@@@ adding listener 
moving 
67 
### removing mouseout 
### removing mousemove 
```

我将让您探索您当前的方法，但您可能想要计算鼠标位置在拖动时的差异，而不是直接将滚动条移动到鼠标位置。

例如，当他们最初单击时，您存储 clientY 的值。然后当他们向上或向下移动鼠标时，您将新的客户端 Y 与初始客户端 Y 进行比较，并将差异应用于滚动条的边距顶部。

听起来不错？

# python - PowerShell 包装器将管道输入定向到 Python 脚本

> ID：14529252
> 
> 赞同：1
> 
> 时间：2013-01-25T19:44:56.580
> 
> 标签：python, powershell, stdin

我正在尝试编写一个小工具，让我将命令输出通过管道传输到剪贴板。我已经阅读了 Stack Overflow 上的[多个](https://stackoverflow.com/questions/13127578/powershell-pipe-output-to-clipboard) [答案](https://stackoverflow.com/questions/1567112/convert-keith-hills-powershell-get-clipboard-and-set-clipboard-to-a-psm1-script)，但它们对我不起作用，因为它们不包含管道，或者因为它们没有使用函数，或者它们只是抛出错误（或者我可能只是搞砸了）。我放弃了使用 PowerShell 并决定使用 Python。

我创建了一个名为的 Python 脚本`copyToClipboard.py`：

```
import sys
from Tkinter import Tk

if sys.stdin.isatty() and len(sys.argv) == 1:
  #We're checking for input on stdin and first argument
  sys.exit()

tk = Tk()
tk.withdraw()
tk.clipboard_clear()

if not sys.stdin.isatty():
    #We have data in stdin
    while 1:
        try:
            line = sys.stdin.readline()
        except KeyboardInterrupt:
            break

        if not line:
            break

        tk.clipboard_append(line)
elif len(sys.argv) > 1:
    for line in sys.argv[1]:
      tk.clipboard_append(line)

tk.destroy() 
```

（我还没有完全测试这`argv[1]`部分，所以这可能是不稳定的。我主要对阅读感兴趣`stdin`，所以重要的部分是`sys.stdin`。）

这很好用！当我在包含脚本的目录中时，我可以执行以下操作：

```
ls | python copyToClipboard.py 
```

并且内容`ls`神奇地出现在我的剪贴板上。这正是我想要的。

挑战在于将其包装在一个 PowerShell 函数中，该函数将接受管道输入并将输入简单地传递给 Python 脚本。我的目标是能够做到`ls | Out-Clipboard`，所以我创建了类似的东西：

```
function Out-ClipBoard() {
    Param(
      [Parameter(ValueFromPipeline=$true)]
      [string] $text
    )
    pushd
    cd \My\Profile\PythonScripts
    $text | python copyToClipboard.py
    popd
} 
```

但这不起作用。只有一行`$text`进入 Python 脚本。

如何构造我的 PowerShell 脚本的包装器，以便它接收到的任何内容都`stdin`简单地传递给 Python 脚本`stdin`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T20:29:59.380

首先，在 PowerShell 中，多行文本是一个数组，因此需要一个`[String[]]`参数。要解决您的问题，请尝试使用进程块：

```
function Out-ClipBoard() {
    Param(
        [Parameter(ValueFromPipeline=$true)]
        [String[]] $Text
    )
    Begin
    {
        #Runs once to initialize function
        pushd
        cd \My\Profile\PythonScripts
        $output = @()
    }
    Process
    {
        #Saves input from pipeline.
        #Runs multiple times if pipelined or 1 time if sent with parameter
        $output += $Text
    }
    End
    {
        #Turns array into single string and pipes. Only runs once
        $output -join "`r`n" | python copyToClipboard.py
        popd
    }
} 
```

我自己这里没有 Python，所以我无法测试它。当您需要通过管道传递多个项目（一个数组）时，您需要 PowerShell 的进程块来处理它。有关进程块和高级功能的更多信息，[请访问 TechNet](http://technet.microsoft.com/en-us/magazine/hh413265.aspx)。

# lua - Codea / Lua pong游戏CPU对手不准确

> ID：14529266
> 
> 赞同：1
> 
> 时间：2013-01-25T19:45:41.603
> 
> 标签：lua, cpu, pong, codea

我最近在 lua (codea) 中设计并编写了一个乒乓球游戏；您可以在多人游戏和单人游戏中与 CPU 对战。

我的问题是，我可以让 CPU 完美运行`bat_cpu = ball_y`，但这不会让游戏变得很有趣。

因此，我制作了一个简单的不准确系统来计算球将击中 CPU 球棒的位置：

```
bat_cpu = ball_y + inaccuracy 
```

前面将不准确性定义为：

```
inaccuracy = math.random(-40,40) 
```

但是球棒仍然准确地跟随ball_y，我希望它犯错误，而不是那么快。

有谁知道如何模拟 CPU bat 所以它会犯一些错误（在高速、准确性等方面）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T20:09:27.740

您没有提及何时应用此计算，但它可能会在每帧的基础上完成。这意味着您可能会应用这些不准确之处，但它们在 0 附近如此频繁地更改意味着您根本看不到效果。

您可以偏向每次命中的随机计算：例如，`bias = math.random(-20, 20)`然后`inaccuracy = bias + math.random(-40, 40)`; `bias`然后你在每次点击时重置。

您还可以移动目标：计算 CPU 命中应该发生的位置，然后他们随机移动该目标。对于每一帧，您都需要根据您希望击球棒所在的球位置进行插值，并且由于击球目标是错误的，因此它对目标的接近也将不准确，如您所愿。

# ios - iOS 加载模式视图从上到下

> ID：14529272
> 
> 赞同：1
> 
> 时间：2013-01-25T19:46:12.260
> 
> 标签：ios, objective-c, view, uiviewcontroller

我想知道是否有人从顶部到底部加载了一个模态视图控制器，而不是从底部到顶部弹出？从下到上正常加载：

```
 [self presentModalViewController:viewController animated:YES]; 
```

一种解决方案似乎是您可以创建一个视图并从上到下为自己设置动画，但我希望使用视图控制器来完成它，并希望在查看 modalTransitionalStyles 时不会忽略任何内容。

有人做过吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T20:01:24.440

您可以做的是子类 UIStoryboard segue 并制作一个从上到下的自定义动画，然后使用该 segue 呈现视图控制器。

# fonts - 需要指导 - 编写您自己的字体转换器/子设置器

> ID：14529277
> 
> 赞同：0
> 
> 时间：2013-01-25T19:46:27.003
> 
> 标签：fonts, console, converter, subset

我想制作自己的字体转换器/子设置器。例如，仅从字体中选择特定字母并生成一个新字母。

问题？

1.  项目清单
2.  什么语言最适合这个（得到处理字体的库）
3.  是否有任何教程和资源，我可以在其中阅读有关此主题的更多信息。
4.  有没有现成的免费选项？
5.  fontsquirell 使用什么来进行转换和子设置

要求：

1.  项目清单
2.  它需要处理至少一种字体类型。ttf / otf 并不重要。
3.  如果它将是第三方，它必须能够从控制台/通过 api 运行

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T06:35:37.913

对于 Type1 字体，这将是一项相对复杂的任务，需要从头开始。您需要很好地处理 Type1 格式。该规范可从 Adob​​e 免费获得。但是粗略地阅读该文档会告诉您它不适合胆小的人，并且需要对 PostScript 有一定的了解。

但这项任务已经在名为 GhostScript 的开源项目中完成。您可以自动生成一个简单的单行 PostScript 程序来打印您需要的一组字母，然后在打开 fontsubsetting 的情况下将 PS 渲染为 PDF。生成的 PDF 将包含您可以提取的子集 Type1 字体。GhostScript 从命令行运行，整个事情可以用很少的编程编写脚本；当然，虽然不是没有大量的工作；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-04T22:13:40.237

这些是您可以对字体进行子集化的一些方法。

1）**使用支持字体子集的库编写自己的程序**

[https://github.com/PhenX/php-font-lib](https://github.com/PhenX/php-font-lib)上的 php-font-lib支持字体子集。

```
 $fontfile = "example.ttf";
 $subset = "abcdefghijklmnopqrstuvwxyz";

 $font = Font::load($fontfile);

 if ($font instanceof Font_TrueType_Collection) {
  $font = $font->getFont(0);
 }
 $font->parse();

 $font->setSubset($subset);
 $font->reduce();
 $tmp = tempnam(sys_get_temp_dir(), "fnt");
 $font->open($tmp, Font_Binary_Stream::modeWrite);
 $font->encode(array("OS/2"));
 $font->close(); 
```

2）**使用基于网络的字体子集工具**

我在[http://everythingfonts.com/subsetter](http://everythingfonts.com/subsetter)找到了最好的一个。该服务已经对字形块进行了分类，因此我无需手动输入它们，从而节省了大量时间。此外，它支持多种格式，而不仅仅是 woff 或 ttf。[http://www.subsetter.com/](http://www.subsetter.com/)也是一个不错的选择，但仅适用于 webfonts。

3）**使用支持子集的字体应用程序**

我知道 fontforge 允许子集，我过去曾使用过它。

4)**使用 API**

使用字体子集 API，例如[http://everythingfonts.com/api/subset](http://everythingfonts.com/api/subset)中提供的 API 。Google webfonts api 也支持子集，但仅适用于 google 字体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T14:10:46.720

另一个搜索运行并找到了这个

[如何在 PHP 中生成字体子集？](https://stackoverflow.com/questions/13419029/how-do-you-generate-a-font-subset-in-php)

*   答案链接：[http ://www.4real.gr/technical-documents-ttf-subset.html](http://www.4real.gr/technical-documents-ttf-subset.html)

*   它基于 Php，用于 ttf，可以根据我的需要轻松修改。

*   如果这个主题还有更多的深度资源，请分享。

# java - Java如何将时间文字转换为长值？

> ID：14529283
> 
> 赞同：1
> 
> 时间：2013-01-25T19:46:48.830
> 
> 标签：java, date

如果我有时间（字符串）以以下格式进入我的班级

```
2013-01-25T07:31:51.00Z 
```

我怎么把它变成一个长的？

我什至不知道要放入 DateFormat 的格式是什么。其他人有线索吗？

```
DateFormat formatter = new SimpleDateFormat(" MMM yyyy HH:mm:ss z"); 
```

期望的结果

```
long time = changeMe("2013-01-25T07:31:51.00Z");

System.out.print(time);

//012432423  <-- But only the actual long 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T19:49:40.787

看起来你这里有[iso8601](/questions/tagged/iso8601 "显示标记为“iso8601”的问题")格式。试试这个：

```
import javax.xml.bind.DatatypeConverter;

public long changeMe(String isoTimestamp) {
  final Calendar c = DatatypeConverter.parseDateTime(isoTimestamp);
  return c.getTimeInMillis();
} 
```

顺便说一句，如果您愿意，可以`c.getTime()`返回对象。`Date`

# 也可以看看：

*   [将符合 ISO 8601 的字符串转换为 java.util.Date](https://stackoverflow.com/questions/2201925)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T20:04:40.783

使用优秀的[jodatime](http://joda-time.sourceforge.net/)库：

```
DateTimeFormatter fmt = ISODateTimeFormat.dateTime();
long time = fmt.parseDateTime("2013-01-25T07:31:51.00Z").getMillis(); 
```

# java - jFreeChart CategoryDataset - 仅显示 CategoryAxis 的子集

> ID：14529285
> 
> 赞同：0
> 
> 时间：2013-01-25T19:46:53.440
> 
> 标签：java, jfreechart

我正在开发一个图表应用程序，我正在使用 jFreeChart。我正在使用 LineChart 和 CategoryDataset。

我需要显示一个 LineChart，其中在 Y 轴（RangeAxis）上将显示数值，在 X 轴（CategoryAxis）上将显示日期（yyyy/MM/dd hh:mm:ss），尽管是字符串格式。

我的问题是，是否有办法在 CategoryAxis（X 轴）上仅显示某些日期，尽管保留系列中的所有对（yyyy/MM/dd hh:mm:ss，Y 值）。

示例：X 轴仅显示我的数据集的日期 (yyyy/MM/dd)，但在系列中的鼠标悬停时，工具提示仍将显示该对 (yyyy/MM/dd hh:mm:ss, Y 值)。

换句话说，我的 CategoryAxis 将只包含我的系列的一部分点，尽管我的系列仍将包含所有值。

到目前为止，我仅限于显示的每个 (yyyy/MM/dd hh:mm:ss, Y 值) 对的限制，我需要在我的 X 上有一个对应关系 (yyyy/MM/dd hh:mm:ss)轴，这使得它不可读，因为它充满了点和标签。

不知道我是否在我的问题上明确和具体，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T10:23:20.737

由于您的 x 轴上有日期，我认为您应该使用 a[`DateAxis`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/axis/DateAxis.html)而不是您的`CategoryAxis`, 并使用[`XYPlot`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/plot/XYPlot.html).

正如在[类似问题的答案中](https://stackoverflow.com/a/3421194/1919049)所见，您可以使用`DateAxis#setTickUnit(DateTickUnit unit)`将单位类型设置为`DateTickUnitType.DAY`。

# html - 加载页面时禁用浏览器栏

> ID：14529287
> 
> 赞同：1
> 
> 时间：2013-01-25T19:47:00.653
> 
> 标签：html, xhtml, browser, meta-tags, head

你知道一种方法来禁用加载网站页面时出现的任何消息栏（谷歌翻译，ff帮助栏问题，......）吗？我注意到对于某些网站，谷歌翻译没有弹出，虽然他们不使用代码作为`<meta name="google" value="notranslate">`？html代码中是否有任何技巧，或者取决于html定义：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml"> 
```

那影响浏览器吧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T20:03:09.130

好吧，如果一家浏览器公司决定“惊慌失措”或者除了显示 html 内容之外做任何其他事情，那么除了尝试另一个浏览器之外，您什么也做不了。就像，如果 googleChrome 向他们的“软件”添加宣传......您需要“破解”该软件才能从中删除组件。

一些软件提供“网络”扩展，例如微软 IE `<meta http-equiv="imagetoolbar" content="no">`等。

在网上搜索“浏览器特定元”，它可能会有所帮助。

继续

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T20:06:28.350

您要做的是检查您的文档是否是最顶层的框架，如果不是，则“摆脱”显示在另一个位置的框架/iframe 中。将此代码添加到 HEAD 部分的文档中：

```
<script language="JavaScript" type="text/javascript">
<!--
  if (top.location != location) {
    top.location.href = document.location.href ;
  }
-->
</script> 
```

例如，这不会阻止谷歌翻译显示您的页面的翻译版本，但它会使您的文档“摆脱”谷歌设置的框架（能够更改一些设置等）。希望这就是你要找的。如果您有权访问您的 Web 服务器配置，那么还要检查如何防止从您的 Web 服务器的其他域链接到 frame 和 iframe。Apache 代码将是：

```
#block frame and iframe linking from other domains
Header always append X-Frame-Options SAMEORIGIN 
```

Not sure all browsers respect such headers, though and you might be forced to use mod_rewrite rules to achieve what you're after.

Cheers!

# ruby-on-rails - Rails - ActiveRecord 的保存方法如何工作？

> ID：14529290
> 
> 赞同：-1
> 
> 时间：2013-01-25T19:47:18.363
> 
> 标签：ruby-on-rails, rails-activerecord

关于`ActiveRecord`'s`save`方法的新手问题。如果我有这个代码（如导轨指南）：

```
def create
  @post = Post.new(params[:post])

  if @post.save
      redirect_to @post
  else
      .....
  end
end 
```

save 方法返回新创建的`Post`对象？在 code 之后`@post.save`，rails 如何知道如何`redirect_to @post`用正确的`post_id`（1 或 2 或 3 或 ....）替换来构建链接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T19:48:56.277

这是一个面向对象的概念。因此，在创建之后，@post 会使用 id 进行更新，并且一切正常。

看看[这段代码](https://github.com/rails/rails/blob/master/activerecord/lib/active_record/persistence.rb#L433)。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T20:29:42.293

我将通过展示另一段代码来解释它，它应该让事情变得容易理解

```
def create
    @user = User.new(params[:user])
    if @user.save
      redirect_to @user 
```

现在`:user`包含基于用户模型的以下信息：id、姓名、电子邮件、电话。

这意味着我们实际上已经分配`@user`了上述哈希值。

将`redirect_to`检索已存储的哈希`@user`并显示新的配置文件页面。

我希望它有所帮助。

# php - 如何测试变量是受保护的还是私有的？

> ID：14529300
> 
> 赞同：1
> 
> 时间：2013-01-25T19:48:05.220
> 
> 标签：php, reflection, phpunit

我想编写一个测试以确保变量受到保护。那可能吗？这就是我得到的。

```
/**
 * @expectedException       Fatal error
 * @expectedExceptionMessage Cannot access protected property
 */

public function testCannotAccessProtectedProperty() {
    $this->assertEquals($this->object->variableiwanttotest[0], $value);
} 
```

这是错误消息

```
PHP Fatal error:  Cannot access protected property Object::variableiwanttotest in /Users/confidential/ObjectTest.php on line 25 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T19:52:29.483

这可能是反射的一个很好的用途。

[http://php.net/manual/en/reflectionclass.getproperties.php](http://php.net/manual/en/reflectionclass.getproperties.php)

通过使用过滤器，您可以检索受保护的属性并检查它是否存在。

做起来应该相当简单。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T19:54:02.070

```
$prop = new ReflectionProperty(get_class($object), 'propname'));
$this->assertTrue($prop->isProtected()); 
```

# android - 如何将图像数组从android添加到服务器

> ID：14529301
> 
> 赞同：2
> 
> 时间：2013-01-25T19:48:07.807
> 
> 标签：android, file-upload

在我的应用程序中，我想将图像数组添加到服务器

```
public void executeMultipartRequest(String eqname, String eqdesc,String CatId,String eqserial){
try{
     ByteArrayOutputStream bos = new ByteArrayOutputStream();
     bm.compress(CompressFormat.JPEG, 75, bos);
     byte[] data = bos.toByteArray();
     HttpClient httpClient = new DefaultHttpClient();
     ByteArrayBody bab = new ByteArrayBody(data, "forest.jpg");
      String urlPath= "http://njjjjjbjjb.com/bbbbbbbb/interface/m.php?method=add";

      System.out.println("URL Path is "+urlPath);

     HttpPost postRequest = new HttpPost(urlPath);
     MultipartEntity reqEntity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);
     reqEntity.addPart("userid", new StringBody(FalconGearApp.getInstance().getUserId()));
     reqEntity.addPart("sid", new StringBody(FalconGearApp.getInstance().getSessionId()));
     reqEntity.addPart("categoryid",new StringBody( CatId));
     reqEntity.addPart("eqname",new StringBody( eqname));
     reqEntity.addPart("eqdescription",new StringBody( eqdesc));
     reqEntity.addPart("eqserial", new StringBody(eqserial));
     reqEntity.addPart("eqphoto", bab);
     reqEntity.addPart("eqphoto", bab);
     reqEntity.addPart("eqphoto", bab);

     postRequest.setEntity(reqEntity);
     HttpResponse response = httpClient.execute(postRequest);
     BufferedReader reader = new BufferedReader(new InputStreamReader(response.getEntity().getContent(), "UTF-8"));
     String sResponse;
     StringBuilder s = new StringBuilder();
     while ((sResponse = reader.readLine()) != null) {

                         s = s.append(sResponse);

                     }

                     System.out.println("Response is: " + s);

}catch(Exception e){
    e.printStackTrace();

}

 } 
```

使用上面的代码我可以上传单个图像，但我想上传图像数组，所以请帮助我如何上传图像数组，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T20:04:25.513

试试这个：

```
reqEntity.addPart("eqphoto[0]", bab0);
reqEntity.addPart("eqphoto[1]", bab1);
reqEntity.addPart("eqphoto[2]", bab2); 
```

# ios - Mountain Lion 上的 xCode 4.5 和运行 iOS 4.2 的支持应用程序

> ID：14529303
> 
> 赞同：0
> 
> 时间：2013-01-25T19:48:15.077
> 
> 标签：ios

两个问题：

1) Xcode 4.3 可以在 Mountain Lion 上运行吗？

2) 如果我在 Mountain Lion 上将 Xcode 升级到 4.5，那么我是否能够支持运行 iOS 4.3 的应用程序？

我相信如果我在 Mountain Lion 上升级到 xCode 4.5，那么我应该能够针对运行带有非 ARC 代码的 iOS 4.3 的旧应用程序。

我想这取决于部署目标设置。在 Xcode 4.5 中，它将 4.3 的部署目标显示为最旧的。

# javascript - JavaScript - 创建一些 CSS 类，可用于为表格行提供替代样式

> ID：14529304
> 
> 赞同：0
> 
> 时间：2013-01-25T19:48:15.513
> 
> 标签：javascript, html, css

我正在尝试使用 JavaScript 执行此操作：

*   创建一些 CSS 类，这些类可用于为表格行提供替代样式。
*   编写 JavaScript 来查找表格主体内的所有表格行，然后将您在 CSS 文件中创建的那些替代样式分配给奇数行和偶数行。

这就是我所拥有的 - 我将如何使用 JavaScript 做到这一点？只有 JavaScript，不是 jQuery。

非常感谢您的帮助，您可以关闭此线程:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T21:46:19.930

你为什么使用javascript？这可以通过使用 css 来完成：

```
tr:nth-child(odd) > td{
background-color:red;
}
tr:nth-child(even) > td{
background-color:green;
} 
```

[http://jsfiddle.net/KgXLk/](http://jsfiddle.net/KgXLk/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T20:05:58.193

```
var table = document.getElementsByTagName('table')[0];

var trs = table.getElementsByTagName('tr');

for (var i = 0; i<trs.length; i++) {
    if (i % 2)
        trs[i].className += 'new_class';
} 
```

[http://jsfiddle.net/VvQ7D/1/](http://jsfiddle.net/VvQ7D/1/)

# c# - 从通过中继器显示的 DropDownLists 列表中获取选定的用户选择

> ID：14529305
> 
> 赞同：1
> 
> 时间：2013-01-25T19:48:16.863
> 
> 标签：c#, asp.net, drop-down-menu, repeater

现在我有一个 List<> 我显示在网页上的 Dictionary 元素。我对整个 List<> 使用 Repeater，因为 List<> 长度是任意的，并且每个 Dictionary 元素都使用 DropDownList。用户看到 DropDownLists 的重复列表，并从每个所述 DropDownLists 中选择一个 Dictionary 元素作为他们的选择。

我想检索每个 DropDownList 中用户所说选择的字典键。如果这一步之后更容易完成，那么检索所有内容也可以，但我的最终目标是隔离所述键并将它们放入数组中。现在我将 List<> 直接绑定到中继器，一切都显示正常，但我不知道在他们按下最终提交按钮时调用的函数中放入什么。

干杯~

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T20:23:54.727

您可以遍历中继器中的每个项目，然后找到子控件：

```
foreach (RepeaterItem ri in myRepeater.Items)
{
     DropDownList dropDownList = (DropDownList)ri.FindControl("dropDownList");
     string myValue = dropDownList.SelectedValue;
} 
```

# c - C 的 Emacs 语义+自动完成模式

> ID：14529307
> 
> 赞同：3
> 
> 时间：2013-01-25T19:48:33.333
> 
> 标签：c, emacs

我一直在努力使自动完成模式很好地与 Semantic 一起工作，但我知道我完全被卡住了。我已经通过semantic-ia-complete-symbol 成功地完成了语义自动完成（尽管由于某种原因它无法完成malloc()，这很奇怪）。

一些 .emacs 片段：

```
(add-to-list 'ac-dictionary-directories "~/emacs-src/auto-complete-1.3.1/")
(ac-config-default)
(ac-set-trigger-key "TAB")

(add-to-list 'ac-sources 'ac-source-semantic) 
(add-to-list 'ac-sources 'ac-source-gtags)

(add-hook 'c-mode-hook
          (defun my-c-mode-hook ()
            (auto-complete-mode)
            (setq ac-sources '(ac-source-semantic))
            (ac-complete-semantic))) 
```

如何使自动完成模式与语义一起工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T21:20:30.367

如果我对您的理解正确，Semantic 正在工作，而您只是在努力设置自动完成功能。对于后者，只需从

```
(require 'auto-complete-config)
(setq-default ac-sources '(ac-source-semantic-raw)) 
```

请注意，您必须使用“setq-default”来设置 ac-sources。然后你应该能够做到

```
M-x auto-complete-mode 
```

在 C/C++ 缓冲区和自动完成应该查询语义完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T20:18:18.690

尝试通过以下方式调试自动完成失败：

`M-x semantic-analyze-debug-assist RET`

看看它说了什么。查看`\include\stdlib.h`解析器对文件的看法。如果在那里你这样做：

`M-x bovinate RET`

然后你可以搜索看看是否`malloc`有。如果不是，则可能存在解析错误，或者一些`#define`未正确设置的杂项。使用上面的内容，您通常可以在头文件中找到问题开始发生故障的地方。

# ios - 在 ios 应用程序中解析 json 数组

> ID：14529308
> 
> 赞同：-4
> 
> 时间：2013-01-25T19:48:47.143
> 
> 标签：ios, json, asihttprequest

在这个应用程序中，有人为我构建了这个代码来解析一个 json 数组：

```
ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:[NSURL URLWithString:[NSString stringWithFormat:@"%@/lending.php?category_id=1",host_name ]]];
[request setRequestMethod:@"GET"]; 
```

它工作正常，现在，我需要的是插入这个数组而不是lendig.php，这实际上是json数组的输出：

```
[{"name":"Ekspres Kredi","category_id":"1","id":"2"},{"name":"Kredi p\u00ebr Pushime ","category_id":"1","id":"4"},{"name":" Kredi Konsumuese ","category_id":"1","id":"5"},{"name":"Auto Kredi ","category_id":"1","id":"6"}] 
```

我怎样才能插入呢？

它应该是这样的：

```
ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:[NSURL URLWithString:[NSString stringWithFormat:@"[{"name":"Ekspres Kredi","category_id":"1","id":"2"},{"name":"Kredi p\u00ebr Pushime ","category_id":"1","id":"4"},{"name":" Kredi Konsumuese ","category_id":"1","id":"5"},{"name":"Auto Kredi ","category_id":"1","id":"6"}]",host_name ]]];
[request setRequestMethod:@"GET"]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T20:55:14.100

首先你应该清楚你想做什么。无论如何，我假设您想将一些数据发送到服务器，在这种情况下您使用 POST 请求。

```
NSString *jsonString = @"{\"name\":\"Ekspres Kredi\",\"category_id\":\"1\",\"id\":\"2\"},{\"name\":\"Kredi p\u00ebr Pushime \",\"category_id\":\"1\",\"id\":\"4\"},{\"name\":\" Kredi Konsumuese \",\"category_id\":\"1\",\"id\":\"5\"},{\"name\":\"Auto Kredi \",\"category_id\":\"1\",\"id\":\"6\"}"

NSURL *url = [NSURL URLWithString:@"http://myserver.com/post.php"];
ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
[request addRequestHeader:@"Content-Type" value:@"application/json"];
[request appendPostData:[jsonString  dataUsingEncoding:NSUTF8StringEncoding]]; 
[request startAsynchronous]; 
```

通过设置请求的主体，使用的方法将是 POST。

# javascript - 构建/传输大型数据结构的更有效方法？

> ID：14529315
> 
> 赞同：0
> 
> 时间：2013-01-25T19:49:14.133
> 
> 标签：javascript, node.js

我正在使用 node.js 构建一个移动 Boggle 类型的 Web 应用程序。我正在尝试找到一种更有效的方法来加载/构建海量词典（180,000 多个单词）。我目前可以使用它，但加载时间稍长。用户必须等待大约 15 秒才能构建整个事物，并且一些用户在整个事物加载之前会超时。我想知道是否有人有任何提高速度的技巧。

我目前这样做的方式（这可能是完全低效的）：

*   我将列表分解为 26 个数组，每个字母一个，然后将每个数组放入它自己的 javascript 文件中。
*   当应用程序加载时，它运行一个递归函数，该函数获取下一个 js 文件并从它加载到数组中，覆盖前一个。然后，它遍历整个数组并将每个新单词加载到我的[Trie](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDIQFjAA&url=http://ejohn.org/blog/javascript-trie-performance-analysis/&ei=vtwCUcSTCqWz0QHGk4C4Aw&usg=AFQjCNFejE75227FcBY3dNlyz4gL6XCsAQ&bvm=bv.41524429,d.dmQ)数据结构中。
*   包含数组的文件组合在 2mb 左右。合并后，数据结构本身的时钟约为 12mb，这在台式计算机上还算不错，但确实让我的几个用户的智能手机不堪重负。

这需要在客户端构建以允许即时查找。我这样做的方式目前有效，但我知道必须有更好的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T22:03:26.430

回答最快加载时间的问题，你是用这种方式做的吗？（又名，没有更多代码，我们不可能知道）

```
function LoadFiles(fileArray){
  file = fileArray.slice(); //get the first file.
  $.ajax(file).success(function(data){
    /* yes, my object is a little funky, I'm focused on writing pseudocode */
    wordLibraryAdd(data);

    if (fileArray.length) // on a zero length quit processing
    setTimeout(function(){ LoadFiles(fileArray) }, 50) //a 50 ms buffer between each loading isn't bad.
  })
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T20:56:33.930

另一种策略是将您的递归代码转换为使用显式堆栈的非递归代码，仅保存您实际需要的对象。

您是否尝试过分析您的代码？

# c# - 是否可以让 winmm.dll 以父形式（窗口）播放视频，而不是使用 mciSendString() 在新窗口中打开它？

> ID：14529324
> 
> 赞同：0
> 
> 时间：2013-01-25T19:49:48.103
> 
> 标签：c#, pinvoke, mcisendstring

以下是问题的描述：
我希望能够在我正在处理的项目中播放视频......最简单的方法是使用 PInvoke 和 winmm.dll。我用来打开文件的一段代码是：

```
public void OpenFile()
    {
        if (!this.opened)
        {
            this.opened = this.paused = true;

            command = "open \"" + videoName + "\" type mpegvideo alias VideoPlayer";
            mciSendString(command, null, 0, IntPtr.Zero);

            command = "set VideoPlayer time format miliseconds";
            mciSendString(command, null, 0, IntPtr.Zero);

            command = "set VideoPlayer seek exactly on";
            mciSendString(command, null, 0, IntPtr.Zero);
        }
        else
        {
            this.CloseVideo();
            this.OpenFile();
        }
    } 
```

以及播放文件的代码：

```
command = String.Format("play VideoPlayer notify");
mciSendString(command, null, 0, IntPtr.Zero); 
```

问题是视频文件已打开并播放但在新窗口中。有没有办法让它在我调用该方法的窗口中播放？
我尝试搜索 msdn，我确实找到[了这个](http://msdn.microsoft.com/en-us/library/windows/desktop/dd743667%28v=vs.85%29.aspx)。如果您在**lpszPlayFlags**下查看，则标志*窗口*

> 指定播放应使用与设备实例关联的窗口。这是默认设置。

即使我确实使用了该标志，视频仍然会在新窗口中播放。显然，我做错了什么。如果有人知道我的错误是什么并且知道如何解决这个“问题”，那将不胜感激。
谢谢！
此致。

# linux - 如何删除 setgid (linux/unix)？

> ID：14529325
> 
> 赞同：22
> 
> 时间：2013-01-25T19:49:57.657
> 
> 标签：linux, unix

我刚刚更改了我的文件权限，并且我的文件权限`$ sudo chmod g+s filename`从. 如何删除它？`drwxr-xr-x``drwxr-sr-x`

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-01-25T19:52:01.437

将 for 添加权限更改`+`为 a`-`以将其删除：

```
sudo chmod g-s filename 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-04-19T08:58:00.647

要删除 setgid 命令的数字方式

sudo chmod 0664 $文件名

这里的假设是文件的权限是 664，我们没有更改它。上述命令中最左边的位代表 setuid( **4** )、setgid( **2** ) 和sticky( **1** )。现在以符号方式表示这些 setuid 是**u+s**， setgid 是**g+s**，sticky 是**o+t**

示例 1：-chmod u+s 文件名 这将为提到的文件名设置 rw **s** r_xr_x

示例 2：chmod 2770 directory 这将为提到的目录设置 gid，即 rwxr_ **s** r_x

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-05T16:07:06.597

关于：“您可以使用数字模式设置（但不清除）位”

在 RHEL 7 chmod 0644 $filename 上没有删除 setuid(4)、setgid(2) 或 sticky(1)。

然而，在前面加上一个额外的 0 就可以了：

`chmod 00644 $filename`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-12-28T17:35:05.367

好吧，我想补充几点来阐明使用数字方式处理文件和目录的方法。

*   为用户/组/其他人添加单独的特殊权限。

`chmod "X"755 file`

其中 X 是特殊权限的特定八进制数字模式。

*   如果您想一次添加多个特殊权限，例如 suid(4) 和 sgid(2) 即 4+2= **6**。

`chmod "6"755 file`

对于suid(4)、sgid(2)和sticky bit(1)，即4+2+1= **7**

`chmod "7"755 file`

*   删除所有特殊权限（仅适用于文件）

`chmod 00"0"755 file`

> 好吧，4位数字之前的尾随零在更改文件权限时不会添加任何值，但在更改目录权限时确实会添加值。
> 
> 上面的数字代码只会将文件的权限从 7755 更改为 755，但如果您对目录执行相同操作，它将是 6755，因为它只会删除其他人的粘性位。
> 
> 删除目录的所有特殊权限。
> 
> `chmod "000"755 file`

*   同样，要删除 suid 权限并具有 sgid(2) 和sticky bit(1) 即 2+1= **3**。

`chmod 00"3"755 file`

使用字母（r，w，x，X，s，，t）和运算符（+/-）的解决方案已经在早期的答案中讨论和批准。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-01T16:29:19.230

```
sgid with number
#chmod 2(permission)  (directory name)  = for adding
#chmod 0(permission)  (directory name)  = for removing
sgid with word
#chmod g+s directory name = for adding
#chmod g-s directory name = for removing 
```

# r - 需要函数来增量写入文件

> ID：14529326
> 
> 赞同：3
> 
> 时间：2013-01-25T19:50:06.250
> 
> 标签：r

我有一个生成模拟数据并将其写入 csv 文件的功能。这工作正常，但在函数完成之前它不会写出文件。我希望它在每个 for 循环的末尾写一个文件。非常感谢任何提示。

截断的代码块：

```
for (m in 1:M){

simulation code....

write.csv(userDF, file=filename, row.names=FALSE) 
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T20:00:04.437

有一个`flush`功能。您可能需要引用某种连接类型的东西

```
for (m in 1:M){
  simulation code....
  filx=file("filename")
  write.csv(userDF, file=filx, row.names=FALSE) 
  flush(filx)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-30T20:55:03.617

我这样做是为了在每次迭代时附加到同一个不断增长的文件中。它肯定是在写每个循环！

 `````
library(readr)
startfile=TRUE  
for(index in 1:9){

  ... # make your dataframe here

  ## The first time through the loop, don't append. 
  ## Also, this will write the column names

  write_csv(as.data.frame(result),"result.csv", append=!startfile)

  ## On subsequent iterations, append your dataframe to the file
  startfile=FALSE
  } 
`````

# java - 使用数组列表进行堆栈操作

> ID：14529329
> 
> 赞同：-3
> 
> 时间：2013-01-25T19:50:19.940
> 
> 标签：java, arraylist, stack

我在网上环顾四周，发现了一个在 Stack 操作中使用 ArrayLists 的类。在查找了 arraylist 之后，我也注意到了`<E>`那里的名称。我一直跟着它回到 Collection ，我不明白`<E>`这个例子中会是什么：

```
public class MyStack<E> {
   private ArrayList<E> arrList;

   public MyStack() {
       arrList = new ArrayList<E>();
}

   public void push(E item) {
       arrList.add(item);
}

... more methods...
} 
```

“E”指的是什么？如果文档中对此进行了解释，我要么错过了它，要么就是不理解它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T20:10:57.900

`<E>`表示您将在`Stack`. 简单的例子就足够了：

```
MyStack<String> myStack = new MyStack<String>();
myStack.push("Sample string"); 
```

这称为[Java 泛型](http://docs.oracle.com/javase/tutorial/java/generics/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T20:16:30.347

这些是[Java 泛型](http://docs.oracle.com/javase/tutorial/java/generics/)。这让您不必事先准确指定要存储在数据结构中的对象类型。像这样创建堆栈实例时，您只需要知道对象类型

```
MyStack<String> stack = new MyStack<String>(); 
```

现在您只能将字符串放入堆栈：

```
stack.add("A String"); 
```

尝试添加任何其他内容会给您一个编译错误：

```
stack.add(new Integer());  // Compiler error
stack.add(2); // Compiler error 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T20:23:05.537

是您从堆栈中压入或弹出的数据或对象。[您可以在http://docs.oracle.com/javase/tutorial/java/generics/](http://docs.oracle.com/javase/tutorial/java/generics/)中找到有关此主题的更多信息

# php - 如何在创建缩略图之前知道图像是否已完全上传到服务器？

> ID：14529330
> 
> 赞同：1
> 
> 时间：2013-01-25T19:50:22.503
> 
> 标签：php

我有从文件夹自动创建图片库的脚本。如果它不存在，它也会生成缩略图。除特殊情况外，一切正常。用户访问页面（Psudo CRON）调用缩略图生成。

我试图使用**wget**（一个大图像）将图像下载到我的服务器中的画廊文件夹，同时有人访问了网页并且缩略图是从部分下载的图像生成的，它创建了一个如下所示的部分缩略图.

![部分生成的缩略图](../Images/f70664709cb104cc9a7e3accbebb367a.png)

为了在创建缩略图之前解决这个问题，我开始检查文件的最后修改时间和 600 微秒后的修改时间。如果它们不同，我将跳过图像缩略图生成。如果上传没有卡在任何地方并且文件不断更新，这应该可以工作。但另一方面，如果上传没有在指定的时间间隔内更新文件，它将失败

我的代码

```
//loop
$atime = filemtime($images_dir . $file);
usleep(600);
$btime = filemtime($images_dir . $file);
/* file uploading checking */
if ($atime != $btime) {
    continue;
}
// code to generate the thumbnail 
```

有没有其他方法可以解决这个问题？

请注意这里用户可以直接访问文件夹，他可以使用 ftp/另一个脚本等以任何方式填充它，即上传不受脚本控制。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T19:53:51.353

解决方案对我来说似乎很简单。在下载图像的过程完成之前，不要将图像放在您的上传目录中。在它们在您的文件系统上之后，您将它们移动到目录中。

# vim - 如何在 Rebar 中使用 Vim

> ID：14529333
> 
> 赞同：1
> 
> 时间：2013-01-25T19:50:33.390
> 
> 标签：vim, erlang, rebar, eunit, erlang-shell

尝试启动并运行 Vim + Rebar。

他们分开工作，但不能一起工作。我想要实现的是在不离开 Vim 的情况下运行 eunit。

我想这可以通过以下插件[https://github.com/mbbx6spp/vim-rebar](https://github.com/mbbx6spp/vim-rebar)来实现。不幸的是，记录很差。

如何快速运行测试、查看输出、代码并再次查看。

您的所有反馈将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-29T09:35:51.103

我发现的最佳解决方案是在我的项目中使用 Makefile。由于 vim 能够运行 shell 命令，你可以调用 make 并让它使用你的 makefile。然后将这些 shell 命令映射到您选择的快捷方式。

例如，我的 Makefile 有以下内容：

```
test:
    $(REBAR) skip_deps=true eunit 
```

在我的 .vimrc 中：

```
command MakeErlangTest !make test
nmap <leader>r :MakeErlangTest<CR> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T08:39:10.863

退出 Vim 的一种快速方法是使用 暂停它`Ctrl+z`，运行你的命令，然后再使用它再次将其置于前台`fg`。至少适用于 Os X 和 Ubuntu Linux 中的 bash。

你也可以`:! <command name>`直接从 Vim 运行命令行命令，例如`:! ls`.

另一种方法是使用[screen](http://www.gnu.org/software/screen/)，一个窗口运行 vim ，另一个窗口仍在命令行上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T09:54:49.810

我不知道如何将 rebar 集成到 vim 中，但也许你可以尝试[tmux](http://en.wikipedia.org/wiki/Tmux)？这对我有用。在一个窗口中，我一直打开 vim，另一个窗口用作 erlang 节点的编译/附加会话。

# c++ - “AB 类”是什么意思？

> ID：14529334
> 
> 赞同：1
> 
> 时间：2013-01-25T19:50:35.057
> 
> 标签：c++

我遇到了一个错误抱怨：`error: expected initializer before ‘:’ token`

所以我去检查代码，它有如下几行，

```
class VTK_IO_EXPORT vtkPFReader
:
    public vtkMultiBlockDataSetAlgorithm
{blahblah...} 
```

我想知道在定义`class VTK_IO_EXPORT vtkPFReader`中，名字`VTK_IO_EXPORT`是什么意思？我发现如果我删除`VTK_IO_EXPORT`，则不会发生错误，但会发生其他一些错误。我该怎么办？非常感谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-25T19:52:26.970

`VTK_IO_EXPORT`是一个预处理器宏。在 Windows 以外的所有平台上它都是空白的。

在 Windows 上，`VTK_IO_EXPORT` [定义](http://www.vtk.org/doc/release/4.2/html/vtkWin32Header_8h-source.html#l00140)为[`__declspec( dllexport )`](http://msdn.microsoft.com/en-us/library/a90k134d%28v=vs.80%29.aspx)或[`__declspec( dllimport )`](http://msdn.microsoft.com/en-us/library/8fskxacy%28v=vs.80%29.aspx)，两者都是非标准的 Microsoft 扩展。

您收到错误并删除`VTK_IO_EXPORT`修复它的事实表明，出于某种原因，`WIN32`即使您是在 Linux 上构建，您也已经定义了。你需要弄清楚为什么会这样。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-25T19:53:05.657

VTK_IO_EXPORT 是一个宏，可能是一个**属性**。您应该找到它的定义位置，这应该使事情更清楚（或者至少更容易用谷歌搜索）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-25T19:54:00.083

全部大写的事实`VTK_IO_EXPORT`表明它是一个宏。通常，库会在该位置粘贴一个“导出”宏，以便在 Windows 上它们可以插入`__declspec(dllexport)`或`__declspec(dllimport)`在该位置插入，以便在 Windows DLL 中导出它们的接口。

构建系统可能没有正确定义这个宏，所以你得到一个错误。您应该看到宏应该在哪里定义并向后追溯，直到您发现构建中的某些内容配置不正确。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-25T19:53:30.880

显然`VTK_IO_EXPORT`是一个宏。由于它是一个宏，它可以是任何东西。它可以只是空白。

所以，你真的应该告诉我们这意味着什么。在代码中查找该宏的定义，看看它被替换为什么。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-25T19:53:54.530

这是一个包含在宏中的 MSVC 扩展：

```
#if defined(vtkIO_EXPORTS)
 #define VTK_IO_EXPORT __declspec( dllexport ) 
#else
 #define VTK_IO_EXPORT __declspec( dllimport ) 
#endif 
```

您可以通过使用上述定义或包含来解决它`vtkWin32Header.h`- 您将通过分发包获得它。

# java - java-如何在 Windows 命令行中运行 JAR 文件，该文件的运行时参数包含“<”和“>”字符

> ID：14529336
> 
> 赞同：3
> 
> 时间：2013-01-25T19:50:56.813
> 
> 标签：java, windows, jar, command-line-arguments

我正在尝试运行一个接受 3 个参数的 JAR 文件。这是我的命令——

```
c:\Arvind_gpd>java -jar icasae.jar c:\Arvind_gpd\inv_new <data> </data> 
```

但是我收到此错误0

```
< was unexpected at this time. 
```

如何在调用 JAR 文件时正确传递参数`"<data>"`，`"</data>"`以便执行成功。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T19:54:30.867

用双引号将参数括起来。

# modx - Modx - 扩展 site_content - 添加新表

> ID：14529341
> 
> 赞同：0
> 
> 时间：2013-01-25T19:51:18.653
> 
> 标签：modx

目前，我们正在运行革命 2.2。在 site_content 上，我们有一些用于抓取 twitter 的标签。我想在结果进入时开始跟踪每个标签的结果数量，以确定哪些标签不会返回那么多结果等。

所以我在想我应该创建一个新表（twitter_data），并有一个外键将其链接到存储在 site_content 中的搜索标签 ID。

实现这一目标的最佳途径是什么？我应该创建我的表然后运行此处概述的反向架构工具吗？

[http://rtfm.modx.com/display/revolution20/Reverse+Engineer+xPDO+Classes+from+Existing+Database+Table#ReverseEngineerxPDOClassesfromExistingDatabaseTable-CreatingaMySQLtable](http://rtfm.modx.com/display/revolution20/Reverse+Engineer+xPDO+Classes+from+Existing+Database+Table#ReverseEngineerxPDOClassesfromExistingDatabaseTable-CreatingaMySQLtable)

我也发现了这个，但不确定这是否是我应该研究的：

[http://rtfm.modx.com/display/revolution20/Using+Custom+Database+Tables+in+your+3rd+Party+Components](http://rtfm.modx.com/display/revolution20/Using+Custom+Database+Tables+in+your+3rd+Party+Components)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T20:56:40.023

可能不会 - 如果您可以避免修改核心 modx 架构，请这样做。外部表可能是您的最佳选择，但需要相当多的工作。虽然如果你能解释一下你所说的“标签”是什么意思更好一点[html标签？片段？内容标签？不知道你的意思]可能还有其他选择。例如。我们的一个客户想要计算页面点击量[并且不想使用谷歌来做]所以我们所做的就是创建一个模板变量绑定到他们想要计算的每个页面，然后通过编写插件来更新相应的变量在 onpageload 或 onpagerender 事件上触发。[我不记得它到底叫什么或叫什么]

基本上，您可以通过编写插件而不是尝试扩展任何内容或添加片段/块来做到这一点。

# visual-studio-2010 - Visual Studio 右键单击 缺少查找所有参考并转到定义已禁用

> ID：14529345
> 
> 赞同：15
> 
> 时间：2013-01-25T19:51:31.497
> 
> 标签：visual-studio-2010

我正在使用 Visual Studio 2010，突然从右键菜单转到定义选项被禁用，甚至 F12 也不起作用。菜单中缺少查找所有参考选项...我经常使用它们，我怎样才能让它们工作

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2014-01-14T13:04:03.353

我在使用 Microsoft Visual Studio 2013 Premium 时遇到了同样的问题。

按照以下步骤修复它：

1.  关闭您的解决方案。
2.  删除解决方案的 .sln 文件所在文件夹中的隐藏 .suo 文件。
3.  打开您的解决方案。
4.  重建您的解决方案。

F12 现在应该可以工作了。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-04-22T02:16:37.470

重申@eodabash 在 2014-04-07 上所说的就是它。

我正在使用 Visual Studio 2013 Premium，当文件是包含该类的文件未打开时，我也失去了“转到定义”功能。

# 解析度：

1.  工具 > 选项 > 文本编辑器 > 文件扩展名
2.  注意扩展名，列表中缺少“cs”。
3.  在*扩展*框中输入“ **cs ”**
**   选择*编辑器下的“* **Microsoft Visual C#** ”**   单击，添加。点击，确定。**

 ****繁荣！**

我的问题不是扩展。它不是 .suo 文件。这不是重新安装问题。它在 C++ 中工作，但不是 C#。

**这是文件扩展名选项与 C# 无关**。（*捂脸*）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-20T11:41:40.990

我正在研究一个将 C++ 与 C# 相结合的解决方案，该解决方案设置为 VS 2010 编译器，但我使用 2013 IDE 对其进行编辑。所有这些都是通过 MS-TFS 精心安排的。我搜索了 *.ncb 和 *.sou 文件，但找不到它们。最终我看到了 eodabash 关于更改文件扩展名选项的评论，嘿，这对我有用……

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-22T12:33:21.310

对我来说，重建解决方案，然后在 Visual Studio 中关闭文件并重新打开它修复它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-05T14:14:20.923

验证源文件是您打开的解决方案的一部分。*- 叹息。*

*（对我来说，我正在寻找一个与我在 Visual Studio 中打开的完全不同的解决方案中的源文件的“转到定义”。我打开了正确的解决方案，验证了“转到定义”的功能，然后抓了很多需要一杯咖啡。）*

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-22T18:59:36.307

Fortran 未在工具 > 选项 > 文本编辑器 > 文件扩展名中列出，因此这条路线对我不起作用。对我有用的是：

```
Tools > Options > Text Editor > Fortran > Advanced > Enable Find All References. 
```

将上述字段设置为 True。还

```
Tools > Options > Text Editor > Fortran > Advanced > Enable Go To Definition. 
```

该字段可能需要更改为 true。**

# linux - Re: 从命令行linux打开Matlab函数

> ID：14529348
> 
> 赞同：0
> 
> 时间：2013-01-25T19:51:40.777
> 
> 标签：linux, matlab, command-line, command-line-arguments

我从下面的问题中得到了答案。它要求我创建一个 bash 文件。问题在标题中

[如何从 Linux 命令行调用 MATLAB 函数？](https://stackoverflow.com/questions/2001183/how-to-call-matlab-functions-from-the-linux-command-line)

因此，我尝试了以下代码，如答案中所示。

```
 b_exec=matlab
    X="localize(r,q)"
    echo ${X} > matlab_command_rq.m
    cat matlab_command_rq.m 
    ${matlab_exec} -nojvm -nodisplay -nosplash < matlab_command_rq.m
    rm matlab_command_rq.m 
```

答案中的原始代码是

```
 matlab_exec=matlab
    X="${1}(${2})"
    echo ${X} > matlab_command_${2}.m
    cat matlab_command_${2}.m
    ${matlab_exec} -nojvm -nodisplay -nosplash < matlab_command_${2}.m
    rm matlab_command_${2}.m 
```

在解释中，他们提到 $1 是函数，$2 是输入。相应地，我用我的函数'localize'和输入（r，q）替换了它

但我收到以下错误

```
 localize(r,q)
    ./matlab_batcher.sh: 5: ./matlab_batcher.sh: -nojvm: not found 
```

回声似乎正在工作。但我真的不知道在那之后会发生什么。你能帮我告诉我用它的参数调用matlab函数的正确方法吗？？？

我使用以下语句调用它

```
 sh ./matlab_batcher.sh localize r q 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T20:06:54.330

你需要改变你的`b_exec`背部`matlab_exec`，或者你需要改变

```
${matlab_exec} -nojvm ... 
```

至

```
${b_exec} -nojvm ... 
```

无论哪种方式，您都需要使其保持一致。

# ruby-on-rails - Rails 自定义标记记录器

> ID：14529349
> 
> 赞同：5
> 
> 时间：2013-01-25T19:51:50.147
> 
> 标签：ruby-on-rails, logging

在 Rails 配置文件中，您可以设置：

```
config.log_level = :debug
config.log_tags = [:uuid, lambda { |req| Time.now } ] 
```

但是，这仅在使用 Rails.logger 时有效。我知道您可以创建自定义标记记录器。但是语法有点冗长：

```
logger = ActiveSupport::TaggedLogging.new(Logger.new(STDOUT))
logger.tagged("BCX") { Logger.info "Stuff" } 
```

无论如何我可以使用 log_tags 配置自定义记录器，所以我不必每次都指定要使用哪些标签？我确定我可以为此创建一个自定义类，但是有内置的方法可以做到这一点吗？谢谢！

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-01-25T20:03:46.060

感谢这个要点，我能够弄清楚： [https ://gist.github.com/1278448](https://gist.github.com/1278448)

我什至不需要使用格式化的记录器，只需要继承 Logger：

```
class NepcoLogger < Logger
  def format_message(severity, timestamp, progname, msg)
    "#{timestamp.to_formatted_s(:db)} #{severity} #{msg}\n"
  end 
end 
```

# angularjs - AngularJS 承诺从服务返回时不会触发

> ID：14529354
> 
> 赞同：8
> 
> 时间：2013-01-25T19:52:17.827
> 
> 标签：angularjs, future, deferred

> **可能重复：**
> [angularjs - 承诺从未在控制器中解决](https://stackoverflow.com/questions/14246442/angularjs-promise-never-resolved-in-controller)

我将慢速 WebSockets 服务器包装在 AngularJS 服务中，然后从我的控制器调用该服务。如果我将回调链接到回调上，则一切正常，任何 UI 都会异步更新。

当我试图用来`$q.defer()`清理那些乱七八糟的回调时，似乎我的 deferred 永远不会被调用。我熟悉 Python 的 Twisted 中的 deferred 概念，所以我认为从概念上讲一切都应该工作 - 但事实并非如此。

这是我能想到的最短的例子，慢速 WebSockets 服务器是用 setTimeout 函数模拟的。

```
<!doctype html>

<html ng-app="beta">
    <head>
        <title>Beta</title>
        <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.0.4/angular.min.js"></script>
        <script>
            var beta = angular.module('beta', []);

            var BetaCtrl = function ($scope, betaServ) {
                $scope.button = function () {
                    serv_result = betaServ.slow();
                    console.log(serv_result);

                    serv_result.then(function (result) {
                        console.log('callback finished');
                    });
                }
            }

            beta.service('betaServ', function($q) {
                this.slow = function () {
                    d = $q.defer()
                    setTimeout(function () {
                        console.log('before resolve');
                        d.resolve();
                        console.log('after resolve');
                    }, 2000);
                    return d.promise;
                }
            });
        </script>
    </head>
    <body>
        <div ng-controller="BetaCtrl">
            <button ng-click="button()">Run</button>
        </div>    
    </body>
</html> 
```

可以运行如下：

1.  按钮点击
2.  $scope.button() 被调用；它调用 service.slow() 函数
3.  service.slow() 返回一个延迟的
4.  在 deferred 上注册了一个回调
5.  延迟触发，触发注册的回调（这部分永远不会发生）

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-25T21:01:50.880

You need to call your callback with $apply since it's called outside of Angular. Since this is a service, you'll need to include $rootScope in your service:

```
beta.service('betaServ', function($q, $rootScope) {
    this.slow = function () {
        d = $q.defer()
        setTimeout(function () {
            console.log('before resolve');
            $rootScope.$apply(d.resolve);
            console.log('after resolve');
        }, 2000);
        return d.promise;
    }
}); 
```

# jquery - JqG rid 需要超链接 - 需要通过 Jquery 捕获价值

> ID：14529358
> 
> 赞同：2
> 
> 时间：2013-01-25T19:52:33.477
> 
> 标签：jquery, jqgrid

我的代码中有以下内容：

```
 { name: 'ID', index: 'ID', width: 40 , formatter: 'showlink', search: false, formatoptions: { baseLinkUrl: '/Program/EditMicro'} }, 
```

当我单击 PNum 时，会发生以下情况：我的控制器会执行以下操作：

```
 /Program/EditMicro 
```

我想要的是通过 Jquery 捕获有关所选内容（选择了什么 ID）的信息，因为我想做一些 json，然后将其发送到以下 ActionResult

```
 /Program/EditMicro 
```

因此，回顾一下，是否有任何方法可以捕获单击的超链接的值是什么，然后我可以在 Jquery 中捕获它。

先感谢您

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-26T13:46:01.603

在大多数情况下，使用类似的东西就足够了

```
formatter: "showlink",
formatoptions: {
    baseLinkUrl: "/Program/",
    showAction: "EditMicro",
    idName: "myId"
} 
```

在这种情况下，链接将像这样生成

```
<a href="/Program/EditMicro?myId=123">text from the cell</a> 
```

如果您在操作中有行的 id，您可以直接从数据库中获取您需要的任何其他附加信息。

或者，您可以使用[答案](https://stackoverflow.com/a/13765086/315935)中描述的简单技巧。你定义 CSS 类

```
.myLink { text-decoration: underline; cursor: pointer; } 
```

然后您可以使用自定义格式化程序，如下所示

```
formatter: function (cellValue, options, rowObject) {
    return "<span class='myLink'>" + cellValue + "</span>";
},
cellattr: function () {
    return " title=\"Click here to go to EditMicro\"";
} 
```

在这种方式下，您将生成`<span>`哪些用户喜欢的链接。`beforeSelectRow`您可以使用或`onCellSelect`回调捕获单元格上的单击事件。例如

```
beforeSelectRow: function (rowid, e) {
    var $td = $(e.target).closest("td"),
        iCol = $.jgrid.getCellIndex($td[0]);
    if (this.p.colModel[iCol].name === 'note') {
        window.location = "/Program/EditMicro/" +
            encodeURIComponent(rowid);
        return false;
    }
} 
```

如果需要，您可以使用`getCol`或`getRowData`从单击的行中获取任何其他数据，并将信息附加到目标 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T20:05:01.883

您可以将以下内容附加到您的 jqGrid 声明中，以防止触发默认单击操作。

```
.click(function (event) { event.preventDefault(); }) 
```

然后，您可以通过执行类似您自己的单击事件处理程序的操作

```
$('a').click(function () { //ToDo: Extra actions before submitting to controller }); 
```

您还可以构建您自己的自定义格式化程序，以便在您将要显示的超链接中添加额外的信息，以便在构建网格时完成这项工作。

编辑：工作示例，其中我禁用了默认单击功能并绑定我自己的以显示警报（作为示例，显示您将在哪里编写自己的函数来完成您想要做的额外工作）。 [http://jsfiddle.net/QEzhr/33/](http://jsfiddle.net/QEzhr/33/)

# php - 从一个表复制到另一个特定的列和变量

> ID：14529360
> 
> 赞同：0
> 
> 时间：2013-01-25T19:52:52.303
> 
> 标签：php, mysql

**嗨，**
我想使用特定的 cols 从一个表复制到另一个表。
另外我想在查询中添加一个外部变量。例如在一个表中我有 col1,col2,col3 而在第二个表中我有相同的 cols ( col1,col2,col2 )
但现在我想向 col4 插入一个变量。就像：插入 col1,col2,col3, **col4** select (col1,col2,col3,$VARIABLE)

```
$copy_cols= 'INSERT INTO A (COL1,COL2,COL3,COL4) SELECT COL1,COL2,COL3,$VAR FROM B WHERE Descriptiontable="AAA"';
 mysql_cols($copy_query); 
```

col4 在表 B 中找不到，所以我想在这个 col 中插入一些变量。例如：变量可以是一个常数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T20:00:35.180

```
$copy_cols = 'INSERT INTO A (COL1,COL2,COL3,COL4) 
              SELECT COL1,COL2,COL3,'FOO' AS COL4 
              FROM B WHERE Descriptiontable="AAA"';
mysql_cols($copy_query); 
```

# excel - 是否存在用于打开 xml Excel 编辑的良好包装类和/或库？

> ID：14529366
> 
> 赞同：1
> 
> 时间：2013-01-25T19:53:18.543
> 
> 标签：excel, webserver, openxml, openxml-sdk, windows-server

我正在寻找一个不错的库，用于在我们的 Windows 服务器上编辑和/或生成 Excel 文档。我觉得 open xml sdk 可能是要走的路，但对我来说学习曲线似乎很陡峭，我们的开发时间有限。我认为编辑 Excel 文档应该不难。我已准备好重新发明轮子，但认为值得首先询问是否有一个好的项目/库可以包装开放的 xml 并使与 Excel 的交互更容易。

在这个官方的 MS 教程中，检索单元格值的代码有几十行。

[http://msdn.microsoft.com/en-us/library/bb739834.aspx?cs-save-lang=1&cs-lang=vb#ManipulateOpenXMLExcelPowerPoint_RetrievetheValueofaCellinaWorksheet](http://msdn.microsoft.com/en-us/library/bb739834.aspx?cs-save-lang=1&cs-lang=vb#ManipulateOpenXMLExcelPowerPoint_RetrievetheValueofaCellinaWorksheet)

这看起来非常笨拙，我希望有一个更好的接口来实现这个功能。

注意：我很困惑如何让这个问题对 StackOverflow 更友好，但我不知道更好的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:19:39.327

其中一条评论提到了一个包装库，这正是我一直在寻找的。 [关闭xml.codeplex.com](http://closedxml.codeplex.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T14:59:04.800

试试[SpreadsheetLight](http://spreadsheetlight.com/)。免责声明：我写了 SpreadsheetLight。

这个问题可能与此重复： [OpenXML library (alternatives to ClosedXML)](https://stackoverflow.com/questions/10501528/openxml-libraries-alternatives-to-closedxml)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T13:27:07.303

我使用[Simple OOXML](http://simpleooxml.codeplex.com/)，它非常简洁。并且免费。

# javascript - div在页面加载时正确隐藏，但需要在单击后退按钮时显示

> ID：14529367
> 
> 赞同：0
> 
> 时间：2013-01-25T19:53:23.257
> 
> 标签：javascript

我有几个 div 要隐藏在我正在设计的 html 表单上的页面加载中。有些包含文本字段，有些包含下拉框。显示基于在表单中单击某些单选按钮的时间。我正在使用 javascript 来隐藏 div。这是我正在使用的代码：

```
<script language="JavaScript"> 

 function start() {
 hide('hideablearea');
 hide('nontenant');
 hide('conftype');
 hide('rec_roomlayout');
 hide('req_roomlabel');
 hide('req_roomdrpdwn');    
}
window.onload = start;
</script> 
```

它完美地工作。我的问题是......当表单提交并且出现错误（例如，用户忘记填写必填字段）并单击后退按钮时，此功能再次触发并隐藏所有内容......我想要隐藏的 div其中有信息要显示在这一点上。关于如何实现这一目标的任何想法？

提前致谢！

ķ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T20:01:09.747

*如果一旦显示错误消息，用户需要单击返回*以转到上一页并更正信息，您可能需要重新考虑您的设计。上一页将没有错误信息的概念。我可以看到两种方法来纠正这个问题。

**1) 在 JavaScript 中进行所有错误检查**

如果您在脚本中实现错误处理，您可以在页面提交之前立即通知用户错误和缺失信息。然后，只有在一切都检查完毕后，您才提交表单。

**2）在回发时重新显示表格**

当用户提交表单时，您需要在服务器上进行错误检查。然后，您将使用所有用户输入的信息再次*重新呈现*表单，并显示错误消息。在此页面上，您将编写如下内容：

```
<script>var hasErrors = true;</script> 
```

如果页面有错误，您的客户端脚本可以避免隐藏相关信息。在这个模型中，用户不需要点击*返回*按钮来纠正他们的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T20:01:46.390

您可以将 id 属性添加到您的 div 中，然后控制您的 div 是否有要显示的消息，然后您没有隐藏它们。

像这样：

```
<script type="text/javascript">
    function start() {
        if (document.getElementById('hideablearea') == "") {
            hide('hideablearea');
        }
        ...
    }
</script> 
```

# git - 从历史记录中删除不是最后一个的未同步 git commit

> ID：14529370
> 
> 赞同：1
> 
> 时间：2013-01-25T19:53:37.307
> 
> 标签：git

目前我找到的最好的解决方案是

```
git reset --soft HEAD^2 
```

保持想要的变化

```
git reset --mixed HEAD^ 
```

杀死不需要的提交

不幸的是，它将迫使我重新创建在我想要消失的提交之后所做的提交

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T19:55:06.697

尝试`git rebase -i <target commit>^`

然后，当出现要变基的提交列表时，删除要删除的提交的行。

例如，如果我有：

```
6e99176 most recent commit
60dd2f0 older commit
4c82808 even older commit
b980abe commit i want to remove
5b7254b oldest commit 
```

我可以

```
git rebase -i b980abe^ 
```

并将呈现：

```
pick 6e99176 most recent commit
pick 60dd2f0 older commit
pick 4c82808 even older commit
pick b980abe commit i want to remove

# Rebase 50ce3f5..9ad75f8 onto 50ce3f5
#
# Commands:
#  p, pick = use commit
#  r, reword = use commit, but edit the commit message
#  e, edit = use commit, but stop for amending
#  s, squash = use commit, but meld into previous commit
#  f, fixup = like "squash", but discard this commit's log message
#  x, exec = run command (the rest of the line) using shell
#
# If you remove a line here THAT COMMIT WILL BE LOST.
# However, if you remove everything, the rebase will be aborted.
# 
```

如果您按照说明删除有问题的提交，然后保存并关闭文件，您将从 git 历史记录中删除该提交。

# android - 在 ScrollView 中嵌套 ListView - 一个微妙的说明

> ID：14529376
> 
> 赞同：3
> 
> 时间：2013-01-25T19:53:57.000
> 
> 标签：android

我已经阅读了许多帖子，指出 ListView 不应嵌套在 ScrollView 中。

我想知道这是否适用于所有 AdapterView 的一般情况？

在为将嵌套在 ScrollView 中的自定义列表视图编写一大堆代码之后，在发现之前了解会很有帮助。我想以 AdapterView 为基础，以便可以像使用标准 ListView 一样使用它（以帮助最大限度地减少对当前 ListView 相关代码的重写）。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T20:54:57.237

> 我想知道这是否适用于所有 AdapterView 的一般情况？

总的来说，`ScrollView`和其他孩子玩得不太好。

> 在为将嵌套在 ScrollView 中的自定义列表视图编写一大堆代码之后，在发现之前了解会很有帮助。

无需将 a 放入 a`ListView`中`ScrollView`。只需将其他内容`ScrollView`放入`ListView`自身，作为页眉/页脚视图，或使用[my`MergeAdapter`](https://github.com/commonsguy/cwac-merge)或类似技术。

> 我想以 AdapterView 为基础，以便可以像使用标准 ListView 一样使用它

`AdapterView`从头开始创建自定义并不容易。如果您查看 的源代码`ListView`及其`AbsListView`直接父级，则有数千行代码。根据我的前一段，将 的内容`ScrollView`放入中会简单得多。`ListView`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-31T10:41:23.200

如果您想在 ScrollView 中嵌套 ListView，我认为它会起作用。它使用起来很简单，因为它扩展了 ListView 并且只覆盖了一种方法。

唯一的错误是您可能需要使用`scrollView.smoothScrollTo(0, 0)`将滚动位置设置为头部。

```
public class ScrollListView extends ListView{
    public ScrollListView(Context context) {
        super(context);
    }

    public ScrollListView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public ScrollListView(Context context, AttributeSet attrs, int defStyleAttr) {
        super(context, attrs, defStyleAttr);
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        int expandSpec = MeasureSpec.makeMeasureSpec(Integer.MAX_VALUE >> 2,
            MeasureSpec.AT_MOST);
        super.onMeasure(widthMeasureSpec, expandSpec);
    }
} 
```

最后，将滚动位置设置为头部。

```
scrollView.smoothScrollTo(0, 0) 
```

# asp.net - 创建新项目或更新现有项目

> ID：14529380
> 
> 赞同：-1
> 
> 时间：2013-01-25T19:54:04.800
> 
> 标签：asp.net, .net, vb.net

我的代码似乎有些不对劲。感觉很麻烦，不太合乎逻辑。

有人可以让我摆脱痛苦，让我知道我写的这个有点好吗？

这很简单，当页面加载时，它会检查用户是否正在尝试更新现有书籍或创建新书籍。

这是代码：

```
Public Property modID As Int32

Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    Dim bookID = Request.QueryString("bookID")
    If Not String.IsNullOrWhiteSpace(bookID) Then
        newBook = False
    Else
        newBook = True
        Create()   'create a new book
        bookID = modID.ToString
    End If

    If Not newBook Then
        commitData()   'saves data on form
    End If

    If Not IsPostBack And Not newBook Then
        Page.DataBind()
        populateControls()    'populate my dropdown lists and radio/checkbox controls
        populateDatasets()    'load datasets to be used later
    End If

End Sub

Public Sub Create()
    'create a new book
    newBook = False
    Using dbcon As New SqlConnection(DBUtilities.ConnectionStringDefault)
        dbcon.Open()
        Dim cmd As New SqlCommand(CreateSQL, dbcon)
        cmd.Parameters.Add(New SqlParameter("@authorID", currentUser))
        modID = DirectCast(cmd.ExecuteScalar(), Int32)
    End Using
    navmod = NavbookFactory.Getbook(CInt(modID))
    populateNewBook()
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T22:11:45.353

为什么不和额外的如果

```
If String.IsNullOrWhiteSpace(bookID) Then
        newBook = True
        Create()   'create a new book
        bookID = modID.ToString        
    Else
        newBook = False
        commitData()
    End If 
```

# javascript - 在几分钟内前导零

> ID：14529381
> 
> 赞同：10
> 
> 时间：2013-01-25T19:54:05.003
> 
> 标签：javascript

我创建了一个时钟，放置在我网站的标题中。分钟 < 10 的时间不显示零。例如，如果时间是 10:50，它只会显示 10:5，我找到了一个解决方案，但不确定如何实现它。另外如果有更好的方法请分享。

```
 var current;
window.onload = function () {

    current = new Date();

    document.getElementById("clock").innerHTML = current.getHours() + ":" +      current.getMinutes(); 
```

这就是我需要的

```
 if (minutes < 10)
                minutes = "0" + minutes 
```

这是我时钟的容器

```
 <span id="clock">&nbsp</span> 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-01-25T20:12:33.293

您可以只抓取时间字符串的前 5 个字符。

```
(new Date()).toTimeString().substr(0,5) 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-01-25T20:08:36.407

由于您将来可能会遇到同样的问题，因此我建议您为 Javascript 选择一个最喜欢的*字符串格式化*函数。

一些例子：

*   [http://www.masterdata.se/r/string_format_for_javascript/](http://www.masterdata.se/r/string_format_for_javascript/)
*   [http://www.diveintojavascript.com/projects/javascript-sprintf](http://www.diveintojavascript.com/projects/javascript-sprintf)

然后你可以做一些类似`"{0:00}:{1:00}".format(current.getHours(), current.getMinutes())`甚至更好的事情，

```
var d = new Date();
var s = d.format("hh:mm:ss tt");
// Result: "02:28:06 PM" 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-01-25T19:56:35.343

你的问题是什么？

```
var minutes = (current.getMinutes() < 10? '0' : '') + current.getMinutes(); 
```

因为你会在几个小时内遇到同样的问题，所以将它包装在一个小的实用函数中：

```
function pad(var value) {
    if(value < 10) {
        return '0' + value;
    } else {
        return value;
    }
} 
```

后来简单地说：

```
pad(current.getHours()) + ":" + pad(current.getMinutes()) 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2017-05-29T14:20:15.360

我喜欢这种做事方式...... [迄今为止，Javascript 添加前导零](https://stackoverflow.com/questions/3605214/javascript-add-leading-zeroes-to-date)

```
const d = new Date();
const date = (`0${d.getMinutes()}`).slice(-2);
console.log(date); // 09; 
```

**2019 更新：** 但我现在更喜欢

```
const d = new Date();
const date = String(d.getMinutes()).padStart(2, '0');
console.log(date); // 09; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-03-26T21:56:47.953

我试过这种方式。它并不简短，但它有效。

```
var dt = new Date();
if (parseInt(dt.getMinutes()) < 10) {minutes = "0" + dt.getMinutes();} else minutes = dt.getMinutes();
if (parseInt(dt.getSeconds()) < 10) {seconds = "0" + dt.getSeconds();} else seconds = dt.getSeconds();

var time = dt.getHours() + ":" + minutes + ":" + seconds;
document.write("Now is:" + time);

//Result: Now is: 22:47:00 
```

我希望它会有用

# ios - NSDateFormatter 给出了错误的时间（相差 4 分钟！！）

> ID：14529383
> 
> 赞同：2
> 
> 时间：2013-01-25T19:54:17.513
> 
> 标签：ios, objective-c, cocoa-touch, nsdate, nsdateformatter

> **可能重复：**
> [设置 NSDateComponents 会导致不正确的 NSDate](https://stackoverflow.com/questions/13596358/setting-nsdatecomponents-results-in-incorrect-nsdate)

`NSDateFormatter`给了我几乎正确的结果。差别只有4分钟。哪里……从哪里来的？？！（时区偏移为 18000 秒 = 正好 5 小时！）（iOS 6）

```
NSDate* n = ...;
NSDateFormatter *gmtFormatter = [[NSDateFormatter alloc] init];
[gmtFormatter setDateStyle:NSDateFormatterNoStyle];
[gmtFormatter setTimeStyle:NSDateFormatterShortStyle];
DLog(@"n = %@, formatted to = %@, timeZone = %@", n, [gmtFormatter stringFromDate:n], gmtFormatter.timeZone);
[gmtFormatter release]; 
```

结果：

> 2013-01-25 14:49:29.224 字典 [1321:907] n = 0001-01-01 18:57:02 +0000，格式化为 = 下午 2:01，时区 = America/New_York (EST) 偏移量 -18000

# c# - 如何在 Windows Phone 的应用程序中创建翻转瓷砖效果

> ID：14529384
> 
> 赞同：2
> 
> 时间：2013-01-25T19:54:24.097
> 
> 标签：c#, windows-phone-7, windows-phone

我正在开发一个显示图像的应用程序，我想在同一图像上提供重要的相关信息。本质上，我想在应用程序中创建一个翻转图块，然后将其固定到开始处。有可能拥有一个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T21:55:58.017

[Radcontrols](http://www.telerik.com/products/windows-phone.aspx) Hubtile 或[Coding4Fun 工具包](http://coding4fun.codeplex.com/)Hubtile 是您正在寻找的。关于在 windows phone 上创建辅助磁贴检查[这篇文章](http://www.windowsphonegeek.com/articles/How-to-add-and-remove-Secondary-Tiles-in-Windows-Phone-apps)。

# ruby-on-rails-3 - 使用 Doorkeeper 访问当前客户端应用程序

> ID：14529386
> 
> 赞同：9
> 
> 时间：2013-01-25T19:54:30.050
> 
> 标签：ruby-on-rails-3, oauth-2.0, doorkeeper

我正在使用[Doorkeeper](https://github.com/applicake/doorkeeper)在我正在构建的基于 Rails 的 API 上管理客户端应用程序。我有一个控制器操作，我想在其中检查有关提交该操作正在处理的请求的客户端应用程序的一些信息。

Doorkeeper 是否提供帮助程序或其他简单的方法来访问（在控制器中）处理请求的 Doorkeeper::Application？我正在设想一个类似于 Devise 的 'current_user' 方法。

如果不存在这样的助手，我如何获得这些信息？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-18T18:52:40.710

现在我想通了。

Doorkeeper 提供`doorkeeper_token`，可以在控制器中访问。这是一个`Doorkeeper::AccessToken`对象，它引用了令牌所属的应用程序（as `doorkeeper_token.application`）。[这在此处](https://github.com/applicake/doorkeeper#authenticated-resource-owner)被引用（在示例代码中）。

# mysql - 通过查询计算 SQLiteDB 的下四分位数和上四分位数

> ID：14529399
> 
> 赞同：2
> 
> 时间：2013-01-25T19:55:07.450
> 
> 标签：mysql, sql, sqlite, xampp

我想[用我的数据库和查询计算我在这些小提琴中称为“差异”的值的上四分位数和下四分位数](http://sqlfiddle.com/#!2/4f1a82/21)

我怎样才能用 SQLite 做到这一点？

[http://www.sqlite.org/contrib?orderby=date](http://www.sqlite.org/contrib?orderby=date)上有一个扩展名extension-functions.c，其中包含这些命令。

如果这足以解决我的问题？如何将它集成到我的 Windows-XAMPP 环境中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-19T10:08:00.343

根据[这篇博客文章](http://rpbouman.blogspot.co.uk/2008/07/calculating-nth-percentile-in-mysql.html)，我发现了一种[相当不愉快的方法](http://sqlfiddle.com/#!2/4f1a82/45)——基本上，使用 GROUP_CONCAT 按顺序列出所有值，并使用子字符串函数来提取第 25 或第 75 个百分位数的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-26T14:41:13.817

这里有 2 个计算上四分位数 (Q3) 的版本：

*   **选项 1：**计算 Q3 位置并获得其间值的平均值。 [http://sqlfiddle.com/#!3/29f19/5](http://sqlfiddle.com/#!3/29f19/5) ![在此处输入图像描述](../Images/cae21f4b0de4bc013fb436da3c54ca29.png) 来源：[如何计算上四分位数](http://www.wikihow.com/Calculate-the-Upper-Quartile)

*   **选项 2（更准确）：**计算 Q3 位置并对最近的位置赋予更多权重（插值）。这种方法与 MS Excel 中的方法相同`QUARTILE.EXC`。 [http://sqlfiddle.com/#!3/29f19/6](http://sqlfiddle.com/#!3/29f19/6)

注意：如果你想实现`QUARTILE`/`QUARTILE.INC`使用 N-1，你可以通过减小大小而不是增加它来实现。 `SELECT @Q3_POS = 0.75*(COUNT(*)-1.00) from [Table1]`

![在此处输入图像描述](../Images/567fe3d8275aa06b8d7778e18958162c.png)

资料来源：[为什么 Excel 有多个四分位数函数以及如何从 R 和其他统计包中复制四分位数](http://datapigtechnologies.com/blog/index.php/why-excel-has-multiple-quartile-functions-and-how-to-replicate-the-quartiles-from-r-and-other-statistical-packages/)

更多测试：

*   [http://sqlfiddle.com/#!3/ca246/1](http://sqlfiddle.com/#!3/ca246/1) 位置接近上限值（Q3 位置：6.75）
*   [http://sqlfiddle.com/#!3/ef046b/1](http://sqlfiddle.com/#!3/ef046b/1)位置在中间（7.5）
*   [http://sqlfiddle.com/#!3/e2a49/1](http://sqlfiddle.com/#!3/e2a49/1) 位置接近较低值（8.25）
*   [http://sqlfiddle.com/#!3/5f48c/1](http://sqlfiddle.com/#!3/5f48c/1) 准确位置 (9)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-26T08:23:13.917

我已经在您的查询本身中计算了上四分位数和下四分位数。

请检查这个小提琴：[http ://sqlfiddle.com/#!2/4f1a82/31/0](http://sqlfiddle.com/#!2/4f1a82/31/0)

基本上逻辑是：

*   上四分位数 == 平均值（“最高数字”AND 平均值（“整个数据”））
*   下四分位数 == 平均值（“最低数字”AND 平均值（“整个数据”））

因此添加的查询逻辑是：

```
((MIN(diff)+ AVG(diff)) / 2) AS lowerQuartile,
((MAX(diff)+ AVG(diff)) / 2) AS upperQuartile, 
```

# ruby-on-rails - 当我们在时区方法中使用它时的“self”

> ID：14529404
> 
> 赞同：0
> 
> 时间：2013-01-25T19:55:34.060
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我正在阅读在线帮助指南，它说：

> utc_to_local(time) 链接 将给定时间调整为self表示的时区的同时时间。返回一个 Time.utc() 实例——如果您想要一个 ActiveSupport::TimeWithZone 实例，请改用 Time#in_time_zone。

我知道`self`就像我们在 C# 中的“this”，但不确定它如何应用于 Rails 和 web 应用程序？? 那么这是否意味着它将查看浏览器而浏览器将查看客户端计算机的时区？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T20:11:54.730

`self`是您调用此方法的时区。

例如：`ActiveSupport::TimeZone.find_tzinfo("America/New_York").utc_to_local(time)`

它与浏览器无关，它是服务器端的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T20:13:00.063

`self`是`this`，当前对象。在这种情况下，`self`是 的一个实例`ActiveSupport::TimeZone`，它具有它所代表的时区的数据。这个概念与 Rails 和 web 应用程序以及浏览器是正交的。

该方法调用了TZInfo的`utc_to_local`方法，文档记录为：

> 将 UTC 时间转换为本地时区。UTC 可以是 DateTime、Time 或时间戳 (Time.to_i)。返回的时间与 utc 类型相同。UTC 中的任何时区信息都将被忽略（它被视为 UTC 时间）。

[http://tzinfo.rubyforge.org/doc/](http://tzinfo.rubyforge.org/doc/)

# perl - 由于证书验证失败，ActiveState Perl PPM 无法添加存储库

> ID：14529412
> 
> 赞同：0
> 
> 时间：2013-01-25T19:56:08.147
> 
> 标签：perl, activestate

运行 ActiveState Perm 包管理器时，我尝试添加存储库，但出现错误：证书验证失败。该存储库位于一个网站上，我无法验证它的证书。我会在一分钟内回答我自己的问题，因为我花了很长时间才找到解决方案，而且我认为社区可能会受益。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T19:58:10.740

添加环境变量：PERL_LWP_SSL_VERIFY_HOSTNAME，值为 0

# magento - 产品页面中的相关产品下拉菜单

> ID：14529413
> 
> 赞同：0
> 
> 时间：2013-01-25T19:56:12.500
> 
> 标签：magento

我想在产品页面上创建一个预填充相关产品的下拉菜单。我遇到了下面的代码，它在下拉菜单中显示所有产品。我将它粘贴到文件 view.phtml 中并证明可以正常工作。如何修改它以显示相关产品？

```
<select>
<?php
    $products = Mage::getResourceModel('catalog/product_collection')
        ->setStore(Mage::app()->getStore()->getId())
        ->addAttributeToFilter('status', array('eq' => '1'))
        ->addAttributeToFilter('type_id', array('eq' => 'simple'));
    foreach ($products as $prod_model) {
        $product = Mage::getModel('catalog/product')->load($prod_model->getId());
        echo "<option value=\"".$product->getId()."\">".$product->getName()."</option>";
    }
?> 
```

我还发现我可以通过 SKU 来做到这一点，并遇到了这个检索匹配产品 ID 的代码：

```
$match = substr($product->getSku(), 0, 4);
$resource = Mage::getModel('core/resource');
$read = $resource->getConnection('core_read');

$select = $read->select()
->from(array('e'=>$resource->getTableName('catalog/product')), 'entity_id')
->where("e.sku LIKE '" . $match . "%'");
$ids = $read->fetchAll($select); 
```

我只想知道如何通过使用相关产品或 SKU 将两个代码链接在一起。有人可以帮我吗？非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T14:56:56.990

用这个 ：

```
$products = $_product->getRelatedProductCollection()->setStore(Mage::app()->getStore()->getId())
    ->addAttributeToFilter('status', array('eq' => '1'))
    ->addAttributeToFilter('type_id', array('eq' => 'simple')); 
```

拥有您收藏的相关产品。

# c - 数独求解 - 在回溯中跳过舞台

> ID：14529425
> 
> 赞同：0
> 
> 时间：2013-01-25T19:56:41.477
> 
> 标签：c, recursion, backtracking

我已经在这里寻求帮助，但没有人回答，这真的很令人沮丧，我正在尝试编写一个代码来解决递归函数中的数独（回溯），这里是代码：

```
#include <stdio.h>
#include <windows.h>

#define SIZE        9
#define SQUARE_SIZE 3

void print(int arrBoard[SIZE][SIZE])
{
     system("cls");
     int i, j;
     for (i = 0; i < SIZE; i++)
     {
         if (i % 3 == 0) printf("_ _ _ _ _ _ _ _ _ _ _ _\n");
         for (j = 0; j < SIZE; j++)
         {
             if (j % 3 == 0) printf("| ");
             printf("%d ", arrBoard[i][j]);
         }
         printf("\n");
     }

     Sleep(100);
}

BOOL IsValidRow(int arrBoard[SIZE][SIZE], int iNum, int iRow)
{
    int iCol;

    for (iCol = 0; iCol < SIZE; iCol++)
        if (arrBoard[iRow][iCol] == iNum) return FALSE;

    return TRUE;
}

BOOL IsValidCol(int arrBoard[SIZE][SIZE], int iNum, int iCol)
{
    int iRow;

    for (iRow = 0; iRow < SIZE; iRow++)
        if (arrBoard[iRow][iCol] == iNum) return FALSE;

    return TRUE;
}

BOOL IsValidSquare(int arrBoard[SIZE][SIZE], int iNum, int iRow, int iCol)
{
    iRow-= (iRow % SQUARE_SIZE);
    iCol-= (iCol % SQUARE_SIZE);

    int i, j;
    for(i = 0; i < SQUARE_SIZE; i++)
        for (j = 0; j < SQUARE_SIZE; j++)
            if (arrBoard[iRow + i][iCol + j] == iNum) return FALSE;

    return TRUE;
}

BOOL IsValid(int arrBoard[SIZE][SIZE], int iNum, int iRow, int iCol)
{
    if (IsValidRow(arrBoard, iNum, iRow) == FALSE) return FALSE;
    if (IsValidCol(arrBoard, iNum, iCol) == FALSE) return FALSE;
    if (IsValidSquare(arrBoard, iNum, iCol, iRow) == FALSE) return FALSE;

    return TRUE;
}

BOOL _Solve(int arrBoard[SIZE][SIZE], int iRow, int iCol)
{
    if (iRow == 9) return TRUE;

    if (arrBoard[iRow][iCol])
    {
        iRow = (iCol == 8) ? iRow + 1 : iRow;
        iCol = (iCol == 8) ? 0 : iCol + 1;

        if(_Solve(arrBoard, iRow, iCol)) return TRUE;
        return FALSE;
    }

    int iNewNum, iOldRow, iOldCol;
    for (iNewNum = 1; iNewNum <= SIZE; iNewNum++)
    {
        if (IsValid(arrBoard, iNewNum, iRow, iCol))
        {
            arrBoard[iRow][iCol] = iNewNum;
            print(arrBoard);
            iOldRow = iRow; iOldCol = iCol;
            iRow = (iCol == 8) ? iRow + 1 : iRow;
            iCol = (iCol == 8) ? 0 : iCol + 1;

            if (_Solve(arrBoard, iRow, iCol)) return TRUE;

            iRow = iOldRow; iCol = iOldCol;
            arrBoard[iRow][iCol] = 0;
        }
    }
    return FALSE;
}

int main(void)
{
    int arrBoard[SIZE][SIZE] =
    {0, 1, 0, 3, 6, 4, 0, 2, 0,
     6, 0, 0, 0, 0, 0, 0, 9, 7,
     0, 0, 0, 9, 0, 7, 0, 0, 0,
     0, 0, 6, 1, 0, 2, 8, 0, 0,
     1, 9, 8, 0, 0, 0, 0, 3, 2,
     0, 0, 7, 8, 0, 3, 9, 0, 0,
     0, 0, 0, 7, 0, 8, 0, 0, 0,
     4, 0, 0, 0, 0, 0, 0, 0, 3,
     0, 2, 0, 4, 5, 6, 0, 1, 0};

     _Solve(arrBoard, 0, 0);

    fflush(stdin);
    getchar();
    return 0;
} 
```

它不是真正的代码（只是因为 UI 现在不重要）。所以我在这里所做的就是在每次更改任何单元格时打印电路板。我在尝试解决时看到了一个错误，当它到达第 2 行的单元格时：2 col: 6（在其 [1][5] 的索引中），它跳过数字 1（这是真正的答案），因为它没有尝试过，它不能解决剩下的数独。我不知道为什么它不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T20:17:34.320

您已经完成了第一步，确定了问题发生的地点和时间。在调试器的帮助下，您可以单步`_Solve`执行 when `iRow`is 1 和`iCol`is 5。这是我所看到的，仅查看问题发生时的第一点：

*   `IsValid(arrBoard, iNewNum, iRow, iCol)`返回`FALSE`。

*   踏入该方法，`IsValidSquare(arrBoard, iNum, iCol, iRow)`正在返回`FALSE`.

*   再看那条线，当你在其他地方的模式是行然后列时，你`iCol`之前得到的似乎有点奇怪。`iRow`将调用与声明/定义进行比较，看起来您在调用点混淆了参数。

修复该调用的参数顺序`IsValidSquare`并重新运行会产生解决方案。

# c# - ASP.NET / Ajax - 如何在调用中传递参数？

> ID：14529429
> 
> 赞同：0
> 
> 时间：2013-01-25T19:57:13.827
> 
> 标签：c#, jquery, asp.net, sql, ajax

我正在尝试过滤我的结果，但无法弄清楚如何设置 ajax 查询以与 select2 下拉菜单一起正常工作。据我所知，您应该使用数据，但这不仅仅是传递值并过滤我的调用。

这是我的ajax：

```
 $('#e1').select2({
                placeholder: "Select an ingredient...",
                minimumInputLength: 2,
                ajax: {
                    url: "../api/IngredientChoices",
                    data: 'mi',
                    dataType: "json",
                    quietMillis: 500,
                    data: function (term, page) {
                        return {
                            q: term,
                            page_limit: 10,
                            page: page

                        };
                    },
                    results: function (data, page) {
                        var more = (page * 10) < data.length;
                        console.log(more);
                        console.log(data);
                        return { results: data, more: more };

                    },
                    formatResult: function (post) {
                        markup = '<strong>' + post.text + '</strong>';
                    }
                }
            }); 
```

这是我的控制器：

```
 public List<Models.IngredientChoices> Get(string param)
    {
        var choices = (from i in _context.IngredientItems_View(param)

                       select new Models.IngredientChoices
                       {
                           id = i.ItemID,
                           text = i.ConcatName,
                       });
        return choices.ToList();
    } 
```

ajax 调用当前返回所有值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T20:04:45.370

你的 ajax 上有一个重复的成员`data:`- 你应该只有一个。

编辑：只是一个 SWAG，但也许你需要一个类：

```
class myparam {
  string q ;
  int page_limit;
  int page;
}
//decorate for JSON
public List<Models.IngredientChoices> Get(myparm param)
{
    var choices = (from i in _context.IngredientItems_View(param.q) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T21:38:24.937

正如@jmordyk 所说，答案是我的`q:`术语与我在 c# 中的参数不匹配。我改变了这一行：

```
public List<Models.IngredientChoices> Get(string param) 
```

成为：

```
public List<Models.IngredientChoices> Get(string q) 
```

# sql - 如何将 MSsql 中的四个表正确连接到一列？

> ID：14529430
> 
> 赞同：0
> 
> 时间：2013-01-25T19:57:14.000
> 
> 标签：sql, sql-server

我正在尝试在“PROD_CD”上加入四个单独的查询，以将正确的输出返回到一个查询中，以防止之后必须将查询合并到另一种语言中。使用当前的（我已经尝试了很多变体，都有各种问题），我收到了很多重复的结果和不同数量的重复结果。

这是我一直在尝试的当前查询（所有日期函数都用于确定一段时间内的数据集 - 数据库非常旧并使用 Clarion 时间）：

```
$query_ats = "SELECT 
            plog.prod_cd as prod_id,
            ord_log.ORDER_QTY as total_so,
            ediordlg.ORDER_QTY as total_edi_so,
            inv_data.IN_STOCK as in_stock
        FROM plog 
        INNER JOIN ord_log 
            ON plog.prod_cd = ord_log.prod_cd 
        INNER JOIN ediordlg 
            ON plog.prod_cd = ediordlg.prod_cd AND ord_log.prod_cd = ediordlg.prod_cd
        INNER JOIN inv_data 
            ON plog.prod_cd = inv_data.prod_cd AND ord_log.prod_cd = inv_data.prod_cd AND ediordlg.prod_cd = inv_data.prod_cd
        WHERE 
            inv_data.CLASS_CD = 'ALG7' 
        AND 
            dateadd(day, plog.EST_DT, '18001228') BETWEEN getdate() and dateadd(day, $x, getdate())
        AND 
            dateadd(day, ord_log.SHIP_DT, '18001228') BETWEEN getdate() and dateadd(day, $x, getdate())
        AND 
            dateadd(day, ediordlg.SHIP_DT, '18001228') BETWEEN getdate() and dateadd(day, $x, getdate())
        GROUP BY plog.prod_cd, plog.log_qty, ord_log.ORDER_QTY, ediordlg.ORDER_QTY, inv_data.IN_STOCK
        ORDER BY plog.prod_cd ASC"; 
```

这是它输出的示例：

> 数组 ( [prod_id] => ALG-809
> [total_so] => 4 [total_edi_so] => 46 [in_stock] => 0 ) 数组 ( [prod_id] => ALG-809
> [total_so] => 6 [total_edi_so] => 46 [in_stock] => 0 ) 数组 ( [prod_id] => ALG-809
> [total_so] => 7 [total_edi_so] => 46 [in_stock] => 0 )

以下是返回正确结果的四个单独的查询：

```
$query_stock = "SELECT 
                prod_cd, 
                inv_data.DESCRIP,
                inv_data.IN_STOCK
            from 
                inv_data 
            where 
                inv_data.CLASS_CD = 'ALG7'
            ORDER BY
                inv_data.prod_cd ASC";

$query_po = "SELECT 
            plog.prod_cd, 
            SUM(plog.log_qty) as total_po
        FROM 
            plog JOIN inv_data ON plog.prod_cd = inv_data.prod_cd 
        WHERE 
            inv_data.CLASS_CD = 'ALG7'
        AND 
            dateadd(day, EST_DT, '18001228') BETWEEN getdate() and dateadd(day, $x, getdate())
        GROUP BY 
            plog.prod_cd
        ORDER BY
            plog.prod_cd ASC";

$query_so = "SELECT 
            ord_log.prod_cd,
            SUM(ord_log.ORDER_QTY) as total_so
        FROM 
            ord_log JOIN inv_data ON ord_log.prod_cd = inv_data.prod_cd 
        WHERE 
            inv_data.CLASS_CD = 'ALG7' 
        AND 
            dateadd(day, SHIP_DT, '18001228') BETWEEN getdate() and dateadd(day, $x, getdate()) 
        GROUP BY 
            ord_log.PROD_CD
        ORDER BY
            ord_log.prod_cd ASC";

$query_edi = "SELECT 
            ediordlg.prod_cd,
            SUM(ediordlg.ORDER_QTY) as total_so_EDI
        FROM
            ediordlg JOIN inv_data ON ediordlg.prod_cd = inv_data.prod_cd 
        WHERE 
            inv_data.CLASS_CD = 'ALG7' 
        AND 
            dateadd(day, SHIP_DT, '18001228') BETWEEN getdate() and dateadd(day, $x, getdate()) 
        GROUP BY 
            ediordlg.PROD_CD
        ORDER BY
            ediordlg.prod_cd ASC"; 
```

我确定这是我正在使用的 JOIN，但我一生都无法弄清楚。有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T19:59:58.100

为什么不使用一个`DISTINCT`？

```
$query_ats = "SELECT DISTINCT
            plog.prod_cd as prod_id,
            ord_log.ORDER_QTY as total_so,
            ediordlg.ORDER_QTY as total_edi_so,
            inv_data.IN_STOCK as in_stock
        FROM plog 
        INNER JOIN ord_log 
            ON plog.prod_cd = ord_log.prod_cd 
        INNER JOIN ediordlg 
            ON plog.prod_cd = ediordlg.prod_cd AND ord_log.prod_cd = ediordlg.prod_cd
        INNER JOIN inv_data 
            ON plog.prod_cd = inv_data.prod_cd AND ord_log.prod_cd = inv_data.prod_cd AND ediordlg.prod_cd = inv_data.prod_cd
        WHERE 
            inv_data.CLASS_CD = 'ALG7' 
        AND 
            dateadd(day, plog.EST_DT, '18001228') BETWEEN getdate() and dateadd(day, $x, getdate())
        AND 
            dateadd(day, ord_log.SHIP_DT, '18001228') BETWEEN getdate() and dateadd(day, $x, getdate())
        AND 
            dateadd(day, ediordlg.SHIP_DT, '18001228') BETWEEN getdate() and dateadd(day, $x, getdate())
        GROUP BY plog.prod_cd, plog.log_qty, ord_log.ORDER_QTY, ediordlg.ORDER_QTY, inv_data.IN_STOCK
        ORDER BY plog.prod_cd ASC"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T21:38:25.357

在这种情况下，SQL 的规则 1：首先从您想要行的事物中选择，然后加入您想要更多信息的事物。在您的情况下，您想要的似乎是产品 ID，这似乎是唯一存储在`inv_data`表中的，所以我们将从它开始。

```
select
        i.prod_cd as product,
        i.descrip as description,
        i.in_stock
    from
        inv_data as i
    where
        i.class_cd = 'ALG7'
    order by
        i.prod_cd asc
; 
```

你会得到一个，因为每个只存储一个。剩下的只是细节。让我们添加一些连接

```
select
        i.prod_cd as product,
        i.descrip as description,
        i.in_stock,
        sum(l.order_qty) as l_total_so,
        sum(e.order_qty) as e_total_so
    from
        inv_data as i
        inner join plog as p
            on i.prod_cd = p.prod_cd
        inner join ord_log as l
            on i.prod_cd = l.prod_cd
        inner join ediordlg as e
            on i.prod_cd = e.prod_cd
    where
        i.class_cd = 'ALG7'
    order by
        i.prod_cd asc
    group by
        i.prod_cd,
        i.descrip,
        i.in_stock
; 
```

您不需要在`on`子句中列出这么多列，因为无论如何它们都是相同的（根据定义，因为较早的内部连接成功）。

如果事实证明`plog`不是`inv_data`您的主表，只需在查询中反转它们。如果您希望将两个总值放在一起，请使用`sum(l.order_qty + e.order_qty) as total_so`而不是创建两列。

要理解的是连接可以使结果成倍增加。了解哪些表有更多并在每种情况下做一些事情来限制每次额外的“额外”结果将导致一个干净的结果集。在这种情况下，可能只是求和和分组就足够了，但在复杂的情况下，您需要加入一个选择足够不同集合的子查询。

而且，在相关说明中，`distinct`您的查询是毒药！它有一个非常具体的目的，即**不**修复“加入后重复的行太多”。如果你使用它，你*可能*有一个错误，它可能会产生未知的其他副作用。尝试先使用`group by`更智能的`on`语句修复它，然后再使用嵌套查询。

与您的问题无关，但很重要：您似乎正在扩展`$x`查询中的变量。这可能不安全（或有效）；尝试改用参数化查询。

# jquery - jQuery滚动div顶部

> ID：14529431
> 
> 赞同：1
> 
> 时间：2013-01-25T19:57:18.150
> 
> 标签：jquery, sticky

我有一个 div 在清除标题部分后随页面滚动。似乎工作正常，但是当滚动回顶部时，它不会回到页面加载时开始的确切位置。

脚本：

```
$(document).ready(function() {
$(window).scroll(function() {
    if ($(window).scrollTop() > 266) {
        var $myDiv = $("#scrollingNavigation");
        $myDiv.stop();
        $myDiv.animate({ marginTop: ($(window).scrollTop()) - 266 });
    }
    else {
        ($(window).scrollTop() - 266);
    }
});
}); 
```

HTML：

```
<div id="scrollingNavigation">My content and image here</div> 
```

示例：http: [//jsfiddle.net/masada/zZgcG/4/](http://jsfiddle.net/masada/zZgcG/4/)

尝试慢慢滚动窗口，它只会离开顶部大约 8-10 像素。快速滚动，div 将在顶部所有不同类型的空间中休息。比较混乱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T20:14:06.550

对您的代码稍作改动..

```
$(document).ready(function() {
    $(window).scroll(function() {
        var $myDiv = $("#scrollingNavigation");
        if ($(window).scrollTop() > 50) {
            $myDiv.stop();
            $myDiv.animate({ marginTop: ($(window).scrollTop()) + 50 });
        }
        else {
            $myDiv.stop();
            $myDiv.css({ marginTop: 0 });
        }
    });
}); 
```

请在此处找到工作演示“ [http://jsfiddle.net/zZgcG/10/](http://jsfiddle.net/zZgcG/10/) ”。

# android - 键盘触发通知

> ID：14529438
> 
> 赞同：0
> 
> 时间：2013-01-25T19:57:44.033
> 
> 标签：android, android-keypad

无论如何要知道何时出现键盘（dis）？实际上我正在尝试实现[这一点](https://stackoverflow.com/questions/14525678/newview-in-cursoradapter/14525883#comment20255442_14525883)

我还没有找到任何可以回答我的问题的东西。我想我不够清楚。

这个 [https://groups.google.com/forum/?fromgroups=#!topic/android-developers/nRaBoB8F54I](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/nRaBoB8F54I) 是一个非常古老的线程，但它很好地解释了我的问题。

我想知道现在是否有任何解决方案。

请帮忙。谢谢。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T20:10:28.433

我不确定这是否可行，您可以尝试并告诉我。但是如果你把

```
android:configChange="keyboardHidden" 
```

在您的活动清单中，这将使其调用`onConfigChange`您的活动，并将其传递给配置对象，您可以在其中查询`keyboardHidden`成员变量并查看它是否与上次相同。请注意，您还必须检查`hardKeyboardHidden`是否是滑出式键盘消失了或软件键盘。

问题是我知道这适用于拔出硬件键盘。我不知道它是否还要求您显示软件键盘。不过值得一试。

# python - opencv/python：运动检测奇怪的阈值

> ID：14529439
> 
> 赞同：3
> 
> 时间：2013-01-25T19:57:46.070
> 
> 标签：python, opencv, motion, threshold

我正在尝试使用我的网络摄像头制作一个运动检测程序，但是在对帧的差异进行阈值处理时，我得到了这个奇怪的结果：

**当我移动时：（我猜似乎还可以）** ！[在此处输入图像描述][1]

**当我不动时：** ！[在此处输入图像描述][2]

这会是什么？我已经运行了几个程序，它们得到了完全相同的算法，并且阈值做得很好..

**这是我的代码：**

```
import cv2
import random
import numpy as np

# Create windows to show the captured images
cv2.namedWindow("window_a", cv2.CV_WINDOW_AUTOSIZE) 
cv2.namedWindow("window_b", cv2.CV_WINDOW_AUTOSIZE)

# Structuring element
es = cv2.getStructuringElement(cv2.MORPH_ELLIPSE, (9,4))
## Webcam Settings
capture = cv2.VideoCapture(0)

#dimensions
frameWidth = capture.get(cv2.cv.CV_CAP_PROP_FRAME_WIDTH)
frameHeight = capture.get(cv2.cv.CV_CAP_PROP_FRAME_HEIGHT)

while True:
    # Capture a frame
    flag,frame = capture.read()

    current = cv2.blur(frame, (5,5))
    difference = cv2.absdiff(current, previous) #difference is taken of the current frame and the previous frame

    frame2 = cv2.cvtColor(difference, cv2.cv.CV_RGB2GRAY)
    retval,thresh = cv2.threshold(frame2, 10, 0xff, cv2.THRESH_OTSU)
    dilated1 = cv2.dilate(thresh, es)
    dilated2 = cv2.dilate(dilated1, es)
    dilated3 = cv2.dilate(dilated2, es)
    dilated4 = cv2.dilate(dilated3, es)

    cv2.imshow('window_a', dilated4)
    cv2.imshow('window_b', frame)

    previous = current

    key = cv2.waitKey(10) #20
    if key == 27: #exit on ESC
        cv2.destroyAllWindows()
        break 
```

提前致谢！[1]： http: [//i.stack.imgur.com/hslOs.png](https://i.stack.imgur.com/hslOs.png) [2]：http: [//i.stack.imgur.com/7fB95.png](https://i.stack.imgur.com/7fB95.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T20:13:49.120

您需要做的第一件事是`previous = cv2.blur(frame, (5,5))`在您的 while 循环之前的帧抓取之后准备您之前的样本。

这将使您发布的代码工作，但不会解决您的问题。

我认为您遇到的问题是由于您使用的阈值算法类型。尝试二进制，`cv2.THRESH_BINARY`而不是 Otsu 的。它似乎为我解决了这个问题。

# javascript - 在 Javascript 中清除 execCommand 字体大小

> ID：14529451
> 
> 赞同：1
> 
> 时间：2013-01-25T19:58:52.877
> 
> 标签：javascript, html, execcommand

使用`document.execCommand('fontsize', false, 5);`，然后我想清除或删除字体大小。如果我使用 removeFormat，它将删除任何其他格式，所以这并不理想。如果我将 fontsize 设置为 2 或 3，它可能看起来不错，但这也不理想。有没有一种简单的方法来清除字体大小，而无需“手动”进入？

# ios - 上个月的同一天 ios

> ID：14529452
> 
> 赞同：2
> 
> 时间：2013-01-25T19:59:10.670
> 
> 标签：ios, ipad, nscalendar

有什么方法可以使用 NSCalender 获得上个月的同一天？

我使用的日历显示用户 1 个月，例如 iPad 日历，当他们单击我想移至上个月但应选择与以前相同的日期时。

我只想做

```
[components setMonth:([components month] - 1)]; 
```

但是当我从一个有 31 天的月份移动到有 30 天的月份并且选择的日期是第 31 天时，这会产生问题。

我能够找到适用于 android 但不是 iOS 的示例。

[安卓示例](https://stackoverflow.com/questions/9358373/current-day-n-days-is-the-day-of-next-month-or-previous-month)

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T20:19:47.190

看看[这个链接](https://stackoverflow.com/questions/8119880/how-to-add-one-month-to-an-nsdate)。

这是关于加一个月，但你可能会做同样的减法。

改变

```
[dateComponents setMonth:1]; 
```

进入

```
[dateComponents setMonth:-1]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T21:05:38.127

似乎没有明显的“正确”答案，也没有“内置”答案。

由于 Chris 的“简单”想法可能会导致日期无效，因此您可能必须处理极端情况。

处理日-月-年的伪代码：

1.  如果月份 = 12 月从第 1 天-（第 1 年）开始，否则第 1 天-（第 1 个月）-年 [使用 dateComponents]
2.  [检查这是否是一个有效的日期（在这个问题](https://stackoverflow.com/questions/3864165/iphone-sdk-testing-for-valid-string-date)中使用 NSDateFormatter
3.  重复减去一天，直到到达有效日期

另一个想法：

```
prevMonthDate = startDate;
Repeat
    prevMonthDate = prevMonthDate - 1 day
Until (Month(prevMonthDate) < Month(startDate) Or Year(prevMonthDate) < Year(startDate))
    And (Day(prevMonthDate) <= Day(startDate)) 
```

这需要使用 NSDate 和 NSDateComponents，查看[日期和时间编程指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DatesAndTimes/DatesAndTimes.html#//apple_ref/doc/uid/10000039-SW1)。

# python - 如何优化匹配长度为 n 的子字符串，但只匹配整个单词？

> ID：14529453
> 
> 赞同：0
> 
> 时间：2013-01-25T19:59:16.870
> 
> 标签：python, regex, string

我们需要从一个最长为“n”个字符的较大字符串中显示一些“预览文本”。不幸的是，我在 PyPi 上找不到处理这个问题的现有模块。

我希望能做一个适当的解决方案。虽然下面我的快速而肮脏的解决方案有效，但效率并不高——大量的持续比较。有没有人知道如何改进？我尝试了一个正则表达式，但在 20 分钟后放弃了。

我想出的笨拙的解决方案足以满足大多数需求，我只知道这可以更快、更简洁地完成——我很想知道如何做。

```
sample = "This is a sample string and I would like to break it down by words, without exceeding max_chars."

def clean_cut( text , max_chars ):
    rval = []
    words = text.split(' ')
    for word in words:
        len_rval = len(' '.join(rval))
        if len_rval + 1 + len(word) > max_chars :
            break
        rval.append(word)
    return ' '.join(rval)

for i in ( 15, 16, 17,30,35):
    cutdown = clean_cut( sample , i )
    print "%s | %s" % ( i , cutdown ) 
```

并且输出是正确的...

```
15 | This is a
16 | This is a sample
17 | This is a sample
30 | This is a sample string and I
35 | This is a sample string and I would 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T20:09:05.917

以下实现可能对您有用

```
def clean_cut(st, end):
    st += ' ' #In case end > len(st)
    return st[:st[:end + 1].rfind(' ')]
for i in ( 15, 16, 17,30,35):
    cutdown = clean_cut( sample , i )
    print "%s | %s" % ( i , cutdown ) 
```

输出

```
15 | This is a
16 | This is a sample
17 | This is a sample
30 | This is a sample string and I
35 | This is a sample string and I would 
```

* * *

**笔记**

与 textwrap 相比，此实现快 50 倍

```
>>> stmt_ab = """
for i in ( 15, 16, 17,30,35):
    cutdown = sample[:sample[:i + 1].rfind(' ')]
"""
>>> stmt_mg = """
for i in ( 15, 16, 17,30,35):
    cutdown =  textwrap.wrap(sample[:i+1],i)[0]
"""
>>> import timeit
>>> t1_ab = timeit.Timer(stmt=stmt_ab, setup = "from __main__ import sample")
>>> t1_mg = timeit.Timer(stmt=stmt_mg, setup = "from __main__ import sample, textwrap")
>>> t1_ab.timeit(10000)
0.10367805429780219
>>> t1_mg.timeit(10000)
5.597085870104877
>>> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T20:05:30.953

```
def substring_match(length, string):
    return re.search('(.{1,%d}) ' % length, string).group(0).strip() 
```

应该工作，为我的琐碎测试做了

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T20:07:04.450

你可以使用`textwrap`：

```
textwrap.wrap(yourstring[:length+1],length)[0] 
```

切片字符串并不是特别必要，但可能会使整个事情更有效率......

```
>>> textwrap.wrap(sample[:15+1],15)[0]
'This is a'
>>> textwrap.wrap(sample[:16+1],16)[0]
'This is a sample'
>>> textwrap.wrap(sample[:17+1],17)[0]
'This is a sample'
>>> textwrap.wrap(sample[:30+1],30)[0]
'This is a sample string and I'
>>> textwrap.wrap(sample[:35+1],35)[0]
'This is a sample string and I would' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-25T20:18:52.790

有很好的库函数可以为您完成这项工作，就像`textwrap`@mgilson 的回答所指出的那样。

我将添加一个正则表达式答案只是为了好玩：

```
^.{0,n}(?<=\S)(?!\S) 
```

将 n 替换为限制，并使用此正则表达式搜索第一个匹配项（最多只有 1 个匹配项）。我认为任何非空格字符都是单词的一部分。正向后视确保匹配的最后一个字符不是空格，而负向前瞻确保匹配中最后一个字符之后的字符是空格字符或字符串结尾。

In case you want to match something when the string starts with a long sequence of non-space, this regex will just break the sequence of non-space characters at the character limit:

```
^.{0,n}(?<=\S)(?!\S)|^\S{n} 
```

# sql - 共同好友——SQL算法

> ID：14529454
> 
> 赞同：0
> 
> 时间：2013-01-25T19:59:17.190
> 
> 标签：sql, algorithm, social-networking

我正在尝试寻找共同的朋友。

我有一个结构如下的表：

```
 `friends` (   
    `inviter`  int(11) NOT NULL,   
    `accepter`  int(11) NOT NULL,   
    `time` datetime NOT NULL,)
ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_turkish_ci; 
```

我的`load_my_friends(##MY ID##);`查询是这样的：

```
SELECT  p.id , p.name,p.lastname,p.thumb
FROM  friends AS f
RIGHT JOIN  profiles AS p ON ( f.accepter = p.id OR f.inviter = p.id ) 
WHERE  f.inviter = ##MY ID##
OR  f.accepter = ##MY ID##
LIMIT 0 , 5000 
```

你能告诉我如何获取共同朋友的数据吗？

注意：我没有使用任何社交网络脚本，如 JCOW、Social Engine 等。

* * *

*编辑@2*

在数据库中我有 user1,user2,user3,user4,user5..userX

*   user1的朋友是：2,3,6,7,8
*   user2的朋友是：1,3,4,5,7,8

我想要一个可以获取这些结果的查询：

```
 | id  | name |lastname| thumb
    1|  3  |raheel|shan    | /img01.jpg
    2|  7  | arqu |x       | /img02.jpg
    3|  8  |abcdef|hijklmno| /img06.jpg 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T00:01:14.410

一个可能很容易理解的查询如下：

```
SELECT p.* 
FROM 
    (
       -- all friends of User A
       SELECT accepter AS friend_id FROM friends WHERE inviter IN (##User_A_ID##)
       UNION
       SELECT inviter AS friend_id FROM friends WHERE accepter IN (##User_A_ID##)
    ) AS t1
    -- intersect with
    JOIN
    (
       -- all friends of User B
       SELECT accepter AS friend_id FROM friends WHERE inviter IN (##User_B_ID##)
       UNION
       SELECT inviter AS friend_id FROM friends WHERE accepter IN (##User_B_ID##)
    ) AS t2
    ON t1.friend_id = t2.friend_id

    JOIN profiles p on p.id=t1.friend_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T20:15:43.563

也许有人可以想出一个更简单的方法来做到这一点，但这是我的尝试：

```
SELECT id,name,lastname FROM profiles, 
  (SELECT *
   FROM friends 
   WHERE  
       (inviter = 1 OR accepter = 1) 
       AND (accepter IN ( 
             SELECT inviter 
             FROM   friends 
             WHERE  accepter = 2 AND inviter != 1)
          OR accepter IN ( 
             SELECT accepter 
             FROM   friends 
             WHERE  inviter = 2 AND accepter != 1)
          OR inviter IN ( 
             SELECT inviter 
             FROM   friends 
             WHERE  accepter = 2 AND inviter != 1)
          OR inviter IN (
             SELECT accepter
             FROM   friends 
             WHERE  inviter = 2 AND accepter != 1)))
    f
    WHERE id != 1 AND (inviter = id OR accepter = id); 
```

其中 user1 的 id = 1，而 user2 的 id = 2

看看 - [http://sqlfiddle.com/#!2/15951/8](http://sqlfiddle.com/#!2/15951/8)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T21:04:01.997

如果您只是想要一个在两个用户（User_A 和 User_B）之间共享的朋友列表，那么这可能就足够了：

```
SELECT accepter 
FROM   friends 
WHERE  inviter = ##User_A_ID## 
       AND accepter IN ( 
          SELECT accepter 
          FROM   friends 
          WHERE  inviter = ##User_B_ID## ) 
```

加入您的配置文件表以获取其他相关数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T22:11:27.957

```
SELECT * 
FROM profiles p
WHERE p.id IN (
    SELECT f_id 
    FROM (
        SELECT accepter as f_id FROM friends where inviter IN (1,2)
        UNION
        SELECT inviter as f_id FROM friends where accepter IN (1,2)
    ) friends 
    GROUP BY f_id
    HAVING count(*) > 1
) 
```

假设友谊是唯一的行....

# c# - 在报告服务的 tablix 中动态添加列

> ID：14529455
> 
> 赞同：2
> 
> 时间：2013-01-25T19:59:21.317
> 
> 标签：c#, vb.net, dynamic, service, reporting

我的工作遇到了很大的麻烦......我需要在 Visual Studio 2012 的报告服务中创建一个报告。问题是该报告具有动态列，例如取决于用户的反馈数量。

我已经尝试使用 tablix 和 matrix 使用列组进行此操作，但没有成功，但我没有尝试使用报告的自定义代码...

详细信息：我正在手动构建数据集，必须对所有行进行分组。

任何想法如何做到这一点？有人知道报告的自定义代码是否可以解决我的问题？

PS。对不起我的英语：P

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T02:41:53.617

嗯，总结一下：

仅使用报告服务器本机工具似乎是不可能的。

我找到的唯一解决方案是动态更改 rdlc，它是一个 xml。这样，您可以添加和删除列和行组，从 xml 中删除节点，很难，但它可以工作......

无论如何感谢您的帮助！

# jquery - 如何在asp.net中返回动态html

> ID：14529457
> 
> 赞同：0
> 
> 时间：2013-01-25T19:59:30.933
> 
> 标签：jquery, html, asp.net, ajax

我正在尝试使用 asp.net 和 jQuery 创建一个搜索结果页面。它必须以 AJAX 方式工作。我想要的是我通过 AJAX 调用将页码发送到服务器，服务器可以返回一个 html 块，以便我可以在 AJAX 调用后将此 html 块附加到回调中页面中的一个区域。

但我不知道如何在服务器端组装 html 块。有没有好的方法或某种引擎来实现这一点？或者我应该像这样硬编码它：

```
<table><tr><td>My result</td></tr> </table> 
```

并将此文本返回给客户？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T20:06:13.203

有多种方法可以做到这一点 - 你已经触及了一种：

1.  直接返回标记并添加它。
2.  返回[JSON](http://www.json.org/)，使用标准 JavaScript 方法将其解析为 JS 对象，然后：

    2.1 在 JavaScript 中生成标记并添加。

    2.2 查找对象中的值并将它们放入 HTML。

    2.2 使用客户端模板库并绑定对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T20:10:22.497

这是在服务器端创建 html 块的一种方法。

```
var stringWriter = new StringWriter();
using (var writer = new HtmlTextWriter(stringWriter))
{
    writer.RenderBeginTag(HtmlTextWriterTag.Table);
    writer.RenderBeginTag(HtmlTextWriterTag.Tr);
    writer.RenderBeginTag(HtmlTextWriterTag.Td);
    writer.Write("My result");
    writer.RenderEndTag();
    writer.RenderEndTag();
    writer.RenderEndTag();
}
var result = stringWriter.ToString(); 
```

# php - php中的脚本帮助字符串

> ID：14529458
> 
> 赞同：0
> 
> 时间：2013-01-25T19:59:42.040
> 
> 标签：php

如何制作一个 php 脚本，它接受一个参数并在它找到的每个字符串中转义一个引号，无论有多少级别的嵌套数组。

我尝试过这样的事情

```
$FileName = preg_replace("/'/", '', $UserInput); 
```

但我不想替换字符串

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T20:08:07.290

```
function recAddslashes($var){
  return is_array($var) ? array_map(__FUNCTION__, $var) : addcslashes($var, "'");
} 
```

（见[`addcslashes`](http://php.net/manual/en/function.addcslashes.php)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T20:13:55.097

您需要创建一个递归函数，该函数循环认为每个数组并且它不是一个数组，它将替换`'`它然后回显它然后再次循环到下一个数组

```
function traverseArray($array)
{
    // Loops through each element. If element again is array, function is recalled. If not,    result is echoed.
    foreach($array as $key=>$value)
    {
    if(is_array($value))
       {
           traverseArray($value);
       }else{
            $FileName = preg_replace("/'/", '', $value);
            echo  $FileName;
       }
    }
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T20:08:58.393

如果您想让文件名安全，您可以采用白名单方法并且只**允许**某些字符：

```
$Filename = preg_replace('/[^A-Za-z0-9_\-]/', '_', $userInput); 
```

上面的正则表达式将替换任何不是字母、数字、破折号或下划线的字符。任何不允许的字符都将替换为下划线。白名单（允许一小部分“安全”字符）比黑名单（不允许一长串“不安全”字符）安全得多。我的第一个假设是您允许用户在您的服务器上指定文件的名称。但是，如果您使用这种方法来防范 SQL 注入，那么您肯定走错了路。准备好的语句是保护数据库免受 SQL 注入的唯一推荐方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T20:08:24.260

未经测试，但应该可以解决问题：

```
function escape_single_quotes( $arg ){

   if( is_array( $arg ) ){

     foreach( $arg as &$k ){
        $k = escape_single_quotes( $k );
     }
   }else{
      $arg = str_replace("'","\'", $arg);
   }
  return $arg; 

} 
```

# javascript - 单元格不保持宽度

> ID：14529459
> 
> 赞同：1
> 
> 时间：2013-01-25T19:59:48.643
> 
> 标签：javascript, html, css

注意：这些问题仅在 Firefox 或 Chrome 中出现。IE 似乎没有同样的问题。

**HTML**

```
 <div id="renewals-div">
        <label for="renewals">Renewals:</label>
        <input type="hidden" name="renewal_count" id="renewal_count" value="0">
        <table id="renewals">
            <thead>
                <tr data-num="-1" class="header">
                    <th class="date_column">Date</th>
                    <th class="details_column">Details</th>
                </tr>
            </thead>
            <tbody>
                <!-- rows populated by ajax call on load -->
            </tbody>
        </table>
        <br>
        <label for="add_renewal-div"></label> <!-- spacer -->
        <span id="renewal_buttons-span">
            <button type="button" id="add_renewal">Add</button>
            <button type="button" id="remove_renewal">Remove</button>
        </span>
    </div> 
```

**CSS**

```
form {
    width: 100%;
    padding-left: 2em;
}

form fieldset {
    border: none;
    margin: 0 0;
    padding: 0 0;
}

form div {
    box-sizing: border-box;
    width: 100%;
    margin-bottom: .2em;
}

form label {
    display: inline-block;
    padding-bottom: 10px;
    width: 30%;
    max-width: 15em;
    vertical-align: top;
}

form input[type=submit] {
    /*float: left;*/
    width: 75px;
    height: 35px;
}

.radio_group {
    width: 70%;
}

form input[type=text] {
    width: 50%;
    max-width: 400px;
    display: inline-block;
}

/* Renewals table and other stuff */
table {
    table-layout:fixed;
    width: 51%;
    max-width: 404px;
    border-collapse: collapse;
    display: inline-block;
}

table td, table th {
    text-align: center;
    vertical-align: middle;
    border: 1px solid black;
}

table input {
    box-sizing: border-box;
    -webkit-box-sizing:border-box;
    -moz-box-sizing: border-box;
    width: 95% !important;
    margin: 3px 3px;
}

table tr:hover:not(.selected):not(.header) {
    background-color: #D6ADFF;
}

table .selected {
    background-color: #522D80;
    color: white;
}

.header {
    width: 100%;
}

.date_column {
    width: 25%;
}

.details_column {
    width: 75%;
}

#renewal_buttons-span button {
    width: 5em;
    height: 2.5em;
}

/*********************************/

div.ui-datepicker {
    font-size:10px;
}
/*@media (max-width: 650px) {*/ 
```

**JS**

```
 $('#remove_renewal').click(function() {
        var next = $('.selected').next('tr');
        $('.selected').remove();
        if (next.length === 0) {
            $('#renewals tbody tr').last().click();
        } else {
            next.click();
        }
    }); 
```

我的问题是“续订：”表。我允许用户在表中添加和删除行。默认情况下，页面加载时会加载两个测试行。如果同时删除它们，表格列突然不再尊重它们的宽度属性。由于这些`<th>`列是唯一剩下的列，因此我认为它们是不符合我的宽度设置的列。即使不存在行，我怎样才能让它们尊重宽度？

编辑：下面的附带问题已解决。我将 CSS 选择器误解为基于 CSS 文件中的最后一个选择器相互覆盖。显然样式是由最具体的选择器决定的。通过将我的第二个选择器更改为`input[type=text]`它足以覆盖前一个选择器而不使用`!important`.

**附带问题：** 我对表格中输入框的宽度有第二个问题。我有两个影响输入宽度的 CSS 选择器：

```
form input[type=text] {
    width: 50%;
    max-width: 400px;
    display: inline-block;
}

table input {
    box-sizing: border-box;
    -webkit-box-sizing:border-box;
    -moz-box-sizing: border-box;
    width: 95% !important;
    margin: 3px 3px;
} 
```

如您所见，将宽度设置为的选择器`95%`位于前一个之后，因此它应该优先。但是，如果我取出宽度`!important`会`50%`覆盖`95%`！在 CSS 中，我认为对于冲突的样式，最后一个声明/选择的获胜？`!important`那么，既然我要应用的样式是最后一个，为什么我还需要呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T20:09:23.450

我在#date_col 上设置了一个宽度，并且能够防止崩溃

我注意到 .header 没有与之关联的任何样式，因此您可以尝试将宽度值放入其中，然后让两个单元格填充其父容器。一个是 25%，另一个是 75%，但他们没有父母可以参考。

!important 声明是与 ID 选择器发生特异性战争的征兆，可能会变得一团糟。我鼓励你使用类而不是 ID 来防止这个问题。

我认为[这篇](http://csswizardry.com/2012/11/code-smells-in-css/)文章解释得很好。走向底部

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T20:26:04.643

如果您想知道为什么需要重要，请将其删除。

然后，在 Chrome 中，转到开发工具。检查有问题的元素。在右侧面板的“样式”中，您将看到该属性已交叉。

现在，转到上面的面板中的 Computed Style。

前往物业；在这种情况下宽度。按箭头部署它，您将看到有罪规则是什么

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T18:16:40.107

我的回答被版主删除，并转换为“评论”

我首先注意到您的表格显示有一个内联块。

尝试显示：表。TABLE 布局的所有机制都将遵守。

```
table {
    border-collapse: collapse;
    display: table; /* you can even remove this part*/
    max-width: 404px;
    table-layout: fixed;
    width: 51%;
} 
```

要使其与标签保持布局，只需将前一个标签向左浮动即可。

继续

# jquery - 将 Qtip 用于带有敲除的工具提示

> ID：14529460
> 
> 赞同：0
> 
> 时间：2013-01-25T19:59:50.140
> 
> 标签：jquery, knockout.js, qtip

我需要为表中的特定列提供工具提示。我的观点：

```
<table class="tbl" id="dash" data-bind="with: Plan">
      <thead>
        <tr class="tag close">
          <th>Type</th>
          <th>Title</th>
        </tr>
      </thead>
      <tbody class="scrollContent" data-bind="foreach: Course">
        <tr>
          <td><i class="icon"></i></td>
          <td><a href="#" id="qtipselector_01" data-bind="text: Title"></a></td>
          <div id="TooltipContent_01" class="hidden">
            <a> Test Tool Tip</a>                 
          </div>
      </div>
    </tr> 
  </tbody>
 </table> 
```

我已经包含了 jquery 和 jquery.qtip.js。

我写了一个函数来显示鼠标输入的工具提示。

```
 $('#qtipselector_01').qtip({
    content: $('div#TooltipContent_01').html(),
    position: {
        my: 'left center'
    },
    show: 'mouseenter',
        hide: {
            fixed: true,
            delay: 500,            
            when: {
                event: 'unfocus'
            }
        },
    style: {
        tip: {
          width: 20,
          height: 14,
        },
        width:280,
        height:100,    
        classes: 'qtipabc',        
    }
}); 
```

主页

```
<script src="Scripts/jquery.js" type="text/javascript"></script>
<script src="Scripts/jquery.qtip.js"></script>
<!--Template binding--><!-- This is where my view is getting binded--> 
<div id="Container" ua-app-id="topVm" data-bind='template: {name: pageModel, data: pageVM }'>                  
</div>
<script src="Scripts/abc.js"></script> <!--Place where .qtip is called--> 
```

它现在不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T21:32:38.390

```
$(document).ready(function(){
$('#qtipselector_01').qtip({
    content: $('div#TooltipContent_01').html(),
    position: {
        my: 'left center'
    },
    show: 'mouseenter',
        hide: {
            fixed: true,
            delay: 500,            
            when: {
                event: 'unfocus'
            }
        },
    style: {
        tip: {
          width: 20,
          height: 14
        },
        width:280,
        height:100,    
        classes: 'qtipabc'       
    }
});

}); 
```

您应该将 qTip 代码放在 $(document).ready 块中。此外，您还有一些额外的逗号可能会干扰

# android - 如何使用preferencesResId 代替addPreferencesFromResource

> ID：14529464
> 
> 赞同：1
> 
> 时间：2013-01-25T20:00:02.527
> 
> 标签：android

我刚开始学习android，所以有一些问题

我有一个文件 res/xml/settings.xml - 菜单中的设置创建类首选项并尝试使用上面文件中的设置

```
package org.example.sudoku;

import android.os.Bundle;
import android.preference.PreferenceActivity;

public class Prefs extends PreferenceActivity {
       @Override
       protected void onCreate(Bundle savedInstanceState) {
          super.onCreate(savedInstanceState);
          addPreferencesFromResource(R.xml.settings);
       }
    } 
```

问题，不能使用 addPreferencesFromResource 并且我需要使用 preferencesResId （根据评论），但是如果我写这样的东西

```
 preferencesResId(R.xml.settings); 
```

这样不好。

代码错误在哪里？any1可以帮忙吗？我也尝试通过使用书籍 - Hello Android 来学习 android。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T20:04:29.827

`preferencesResId()`不是一种方法，它是您的资源 id ( `R.xml.settings`) 对话中的占位符。

所以虽然

```
addPreferencesFromResource(R.xml.settings); 
```

已弃用，如果您使用这种方法，这仍然是最正确的方法 - 没有其他方法使用已弃用的方法。

我建议你看看[这个](https://stackoverflow.com/questions/6822319/what-to-use-instead-of-addpreferencesfromresource-in-a-preferenceactivity)SO question - 它告诉你*应该*使用什么（PreferenceFragments）。如果您需要代码示例，请启动 Eclipse 和 ADT 插件并`SettingsActivity`通过`new Activity`向导创建一个。

和往常一样，这里是[`PreferenceActivity`](http://developer.android.com/reference/android/preference/PreferenceActivity.html).

# dart - Web 组件中的自定义事件？

> ID：14529466
> 
> 赞同：4
> 
> 时间：2013-01-25T20:00:19.007
> 
> 标签：dart, dart-webui, web-component

我想实现自己的文本输入 Web 组件，例如：

```
<x-text autocomplete="{{ true }}"></x-text> 
```

问题是，当用户从自动完成列表中选择一个项目时，我的 Web 组件如何触发事件？我正在寻找这样的东西：

```
<x-text autocomplete="{{ true }}" on-select="itemSelected()"></x-text> 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T15:48:29.097

这是可能的，但可能不是很直观。

您不能绑定到 HTML 中的自定义事件。您必须在代码中手动执行此操作：

```
<x-foo id="wtvr"></x-foo> 
```

```
_root.query('#wtvr').on['foo'].add((e) => print(e)); 
```

然后当组件触发事件时，您只需编写：

```
_root.on['foo'].dispatch(new CustomEvent('foo')); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T11:18:08.100

在没有太多使用 Web 组件的情况下，从我的脑海中我只会为选择本身实现一个 onchange/onblur 函数。

# android - cvNorm 未被识别为 OpenCV 函数

> ID：14529467
> 
> 赞同：0
> 
> 时间：2013-01-25T20:00:28.233
> 
> 标签：android, opencv, image-comparison

我正在尝试与手机 SD 卡中的图像进行比较，所以我编写了这段代码。

```
package com.example.test;

import java.io.File;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    File img1=new File("mnt/sdcard/xx/IMG-20130123-WA0004.jpg");
    File img2=new File("mnt/sdcard/xx/IMG-20130124-WA0000.jpg");
    double l2_norm = cvNorm( img1, img2 );
}
} 
```

我已将 OpenCV 作为项目导入 Eclipse Workspace 并将其设置为库。我的测试项目使用这个库。

现在，我收到此错误`The method cvNorm(File, File) is undefined for the type MainActivity`

我搜索了超过 3 个小时来寻找正确的代码或方法，但似乎没有一个有效，而且 Eclipse 没有建议正确的导入。有人可以告诉我正确的代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T20:46:25.833

这是Java。您必须导入类并按包引用它们。

```
import android.os.Bundle;
import android.app.Activity;
import org.opencv.core.Core;
import org.opencv.core.Mat;
import org.opencv.highgui.Highgui;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Mat img1 = Highgui.imread("mnt/sdcard/xx/IMG-20130123-WA0004.jpg");
        Mat img2 = Highgui.imread("mnt/sdcard/xx/IMG-20130124-WA0000.jpg");
        double l2_norm = Core.norm(img1, img2);
    }
} 
```

# iis-7.5 - SignalR 0.5.3 和 IIS 7.5

> ID：14529471
> 
> 赞同：1
> 
> 时间：2013-01-25T20:00:53.927
> 
> 标签：iis-7.5, signalr, windows-server-2008-r2, signalr-hub

我已经在几个使用信号器进行通信的客户上部署了一个应用程序。它适用于带有 IIS 6.0 和映射配置的 windows 2003 服务器，也适用于 win 7 和 iis express。但是对于带有 IIS 7.5 的 windows 2008 R2 集线器文件，虽然它已提供服务，但带有服务器方法列表的 signalr.hub 不包含在脚本中，因此客户端无法连接到集线器。

帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T18:50:28.943

好的，这就是我发现的。我们有一个安装项目来安装我们的产品。我没有详细研究这个过程，但它的作用是：在 iis 默认下创建一个网站，然后分配一个使用 Frw 4.0 运行的应用程序池，我认为它还在过程的某个点注册了框架。因此，由于某种原因，在没有集线器的实际定义的情况下生成了 javascript 集线器文件。经过这么多柚木，我决定从 iis 中删除该网站并手动将其添加回来，它得到了修复。所以，我不知道是什么设置阻碍了信号器启动集线器，但这就是我解决它的方法。

谢谢

# regex - 删除最后一次出现的字符

> ID：14529473
> 
> 赞同：16
> 
> 时间：2013-01-25T20:01:20.443
> 
> 标签：regex, r

[今天在talkstats.com 上遇到了](http://www.talkstats.com/showthread.php/36897-regular-expressions)一个问题，发帖人想使用正则表达式（不是`strsplit`）删除字符串的最后一个句点。我试图这样做，但没有成功。

```
N <- c("59.22.07", "58.01.32", "57.26.49")

#my attempts:
gsub("(!?\\.)", "", N)
gsub("([\\.]?!)", "", N) 
```

我们如何删除字符串中的最后一个句点以获得：

```
[1] "59.2207" "58.0132" "57.2649" 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-25T20:15:16.523

Maybe this reads a little better:

```
gsub("(.*)\\.(.*)", "\\1\\2", N)
[1] "59.2207" "58.0132" "57.2649" 
```

Because it is greedy, the first `(.*)` will match everything up to the last `.` and store it in `\\1`. The second `(.*)` will match everything after the last `.` and store it in `\\2`.

It is a general answer in the sense you can replace the `\\.` with any character of your choice to remove the last occurence of that character. It is only one replacement to do!

You can even do:

```
gsub("(.*)\\.", "\\1", N) 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-25T20:03:33.473

你需要这个正则表达式： -

```
[.](?=[^.]*$) 
```

并将其替换为空字符串。

所以，它应该是这样的： -

```
gsub("[.](?=[^.]*$)","",N,perl = TRUE) 
```

**解释： -**

```
[.]         // Match a dot
(?=         // Followed by
    [^.]    // Any character that is not a dot.
     *      // with 0 or more repetition
     $      // Till the end. So, there should not be any dot after the dot we match.
) 
```

因此，只要在`dot(.)`前瞻中匹配 a ，匹配就会失败，因为`dot`在当前点之后的某个位置，模式正在匹配。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-02-28T23:12:59.133

I'm sure you know this by now since you use `stringi` in your packages, but you can simply do

```
N <- c("59.22.07", "58.01.32", "57.26.49")

stringi::stri_replace_last_fixed(N, ".", "")
# [1] "59.2207" "58.0132" "57.2649" 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-25T20:14:51.327

我对我的正则表达式很懒惰，但这有效：

```
gsub("(*)(.)([0-9]+$)","\\1\\3",N) 
```

我倾向于采取与标准相反的方法。而不是替换“。” 使用长度为零的字符串，我只解析两边的两个部分。

# javascript - NodeJS mongo - 点击功能参考唯一生成的链接

> ID：14529479
> 
> 赞同：0
> 
> 时间：2013-01-25T20:01:42.820
> 
> 标签：javascript, node.js, mongodb, mongoose

这是我拥有的当前代码，这会生成我的数据库中的“团队”列表以打印到页面。请注意 HTML 代码是使用 .jade 的模板编写的，但很容易理解发生了什么

团队.jade

```
div.teamList
                    form.form-horizontal(action='/team', id="teamForm")
                        div.control-group
                            label.control-label(for="teamId") Team Id:
                            div.controls
                                input#teamId.input-small(type="text")
                        div.control-group
                            label.control-label(for="teamName") Team Name:
                            div.controls
                                input#teamName.input-small(type="text")
                        div.control-group
                            div.controls
                                button#teamUpdate.btn.btn-primary.btn-mini(type="submit", value="Update Team") Update
                        div.control-group
                            label.control-label(for="newTeamName") Enter new team:
                            div.controls
                                input#newTeamName.input-small(type="text")
                        div.control-group
                            div.controls
                                button#teamConfirm.btn.btn-primary.btn-mini(type="submit", value="Save Team") Submit
                br
                div.teamList(style='border: none; background: #cecece; color: #1a1a1a; padding: 4px; width: 400px; height: 315px; overflow: auto;')
                    include showTeams 
```

showTeams.jade

```
div#teamListDiv
    - if(allTeams.length > 0){
        table
            thead
                tr
                    th Name
            tbody
                tr
                    td
                        - each team in allTeams
                            include teamDisplay
    - } else {
        h3 No teams till now..
    - } 
```

teamDisplay.jade

```
div.teams(id="team-#{team.key}")
  p #{team.name} 
```

目前，这将在`showTeams`运行时生成数据库中所有团队的列表。该`teamDisplay`文件将为每个团队生成一个新的 div，`key`并将 div 的名称作为 div 的名称。

我不想在 div 内部生成，而是`p #{team.name}`想生成一个链接，这很容易做到。但是当点击链接时，我希望`teamId`和`teamName`文本框填充相应的数据。

我在 team.js 中有这个：

```
Team.initIndexPage = function(){
    $('#teamConfirm').click(function(){
        submitTeam();
    });

    submitTeam = function(){
        // frontend sends data - backend parses the data
        var teamForm = {
            name : $('#newTeamName').val()
        };
        // Basic validation
        $.post('/save/team', {'teamForm' : teamForm}, function(response) {
                console.log(response);
        });
    };

}; 
```

正如您所看到的，我指的`#teamConfirm`是提交一个新团队，所以我的问题是……我将如何提及单击任何团队链接的情况……它用正确的数据填充文本框？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T20:43:14.467

我不确定我是否 100% 遵循了你所说的一切——但你的问题似乎与 node/mongo 没有太大关系，它更多的是前端 javascript 问题。如果您想跟踪点击了哪个链接，您可以使用 javascript 的“this”上下文。

因此，如果您为所有链接提供了一个通用类名并更改了 team.js 中的代码以使其工作如下：

```
$('.teamLink').click(function(){
    submitTeam($(this)); // $(this) keeps track of the actual link that was clicked.
}); 
```

然后，您可以在 submitTeam() 中获取该上下文并使用它来操作您想要的元素。

# c# - 在类之间检索对象

> ID：14529482
> 
> 赞同：1
> 
> 时间：2013-01-25T20:01:58.820
> 
> 标签：c#, asp.net

我总是被这样的小事情缠住......我需要从我的欢迎页面类“默认”访问在“登录”类中创建的对象属性。当我尝试引用该类以便可以访问该对象时，VS 2010 不会像往常一样将其列为可用，并且强制请求只会返回错误。

我的`Login`班级是这样定义的：

```
public abstract class Login : System.Web.UI.UserControl
{
   ...
   private void Login_click(object sender, EventArgs e)
   {
      MyObject myObject = new MyObject();
      myObject.property1 = "something";
   }
} 
```

然后我希望`myObject`从我的默认类访问，如下所示：

```
public class Default : System.Web.UI.Page
{
   ...   
   private void Page_load(object sender, System.EventArgs e)
   {
      string someLocalVar = Login.myObject.property1;
   }
} 
```

`property1`Login 类中设置的属性在哪里。但是，这不起作用，VS 甚至无法识别 Login 类；相反，它将其视为某种保留字。这两个文件在同一个项目中，所以这不应该是本`using`节中的问题。我以前在其他类之间以这种方式访问​​过变量，只是这次因为某种原因没有。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T20:05:38.607

2件事：

*   你的课是`abstract`
*   您的财产可能不是`static`
*   你实际上没有属性，它是一个局部变量

你不能实例化一个`abstract`类的实例。类的重点`abstract`是创建一个具有一些其他类似子类可以继承的共享代码的类。你的类是抽象的有什么原因吗？

如果您的属性不是`static`您必须创建类的实例才能访问该属性。（正如我上面所描述的，你不能因为它是抽象的）。如果您将属性设为静态，则`Login.MyObject`无需创建实例即可。

在您提供的代码中，您的变量是`Login_click`方法的本地变量，这意味着即使您创建了类的实例，您也无法访问它。

**我建议你拿起一本 C# 书籍并阅读基础知识。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T20:06:58.860

这里有很多问题。首先，您访问`myObject`的就像它是 的成员一样`Login`，但事实并非如此。`Login_click`它是您方法的局部变量。其次，你永远不会`Login`在你的`Default`类中创建一个实例，所以除非它是一个静态类或者你实际上创建了它的一个实例，否则你将无法访问它的任何成员。

这更像是你想要的（我认为）。我暂时忽略了你的类继承。

```
public class Login 
{
    MyObject object;

    public Login() {
        object = new MyObject();
        object.property1 = "something";
    }
}

public class Default {
    private void Login_click(object sender, EventArgs e) 
    {
        Login _login = new Login();
        string someLocalVar = _login.object.property1; 
    }
} 
```

就像其他人所说的那样，在尝试之前，您需要更仔细地计划并加强您的编程技能。这是基本的东西，所以它不应该花费过多的时间——不过别担心，我们都是从这里开始的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T20:07:43.100

您可以将对象放入`Session`变量中，然后将其转换回来。

```
//in Login.aspx
MyObject myObject = new MyObject();
myObject.property1 = "something";
Session["UserObject"] = myObject;

//in default.aspx
MyObject obj = (MyObject)Session["UserObject"]
string variable = obj.property1; 
```

# c# - Excel.Range.Copy() 使用 Clipboard.GetText() 粘贴

> ID：14529483
> 
> 赞同：1
> 
> 时间：2013-01-25T20:01:59.603
> 
> 标签：c#, excel, text-files, clipboard, copy-paste

我有一小段 C# 代码，我试图在 Excel 文件中**循环工作表，****将 UsedRange 复制**到**剪贴板**并将其**粘贴**到**文本文件**中。

到目前为止，我的代码似乎可以正常工作而不会引发任何错误，但由于某种原因，我的文本文件中根本没有写入任何内容。我错过了什么吗？如果我将 包含`System.Reflection.Missing.Value`为 Copy 方法的参数，仍然没有任何反应。

这是我的代码：

```
using (StreamWriter sw = File.CreateText("ExtractedText.txt"))
{
     foreach (Excel.Worksheet sheet in thisWkBook.Worksheets)
     {
         sheet.UsedRange.Copy();
         sw.Write(Clipboard.GetText());
     }                    
} 
```

**编辑#1：**我怀疑我的小应用程序一定有某种参考，因为如果我创建一个新的 C# 项目，Haxx 建议的代码片段就可以工作。但是，如果我使用来自 Haxx 的相同代码并将其作为新方法插入到我的小应用程序中，它就无法正常工作，即使它是完全相同的代码并调用了完全相同的“使用”库......我只会重做整个应用程序，复制/粘贴最重要的代码部分，如果解决了问题，请报告。

**编辑＃2：**我相信我想出了问题所在。我忘了提到我正在使用 BackgroundWorker ( `System.ComponentModel.BackgroundWorker`)，以便在运行这个小进程时显示进度条。我刚刚读到，显然您只能从 STAThread 访问剪贴板（[Clipboard.GetText 返回 null (empty string)](https://stackoverflow.com/questions/518701/clipboard-gettext-returns-null-empty-string)）。所以我继续创建了一个不使用 BackgroundWorkers 的单独方法，因此它在 STAThread 上运行，瞧！该代码是正确且功能正常的，但如果从 BackgroundWorker 线程异步调用它，则尝试访问剪贴板将不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T21:13:41.757

我制作了一个 Excel 文件，其中第一张表包含单元格 A1 = 'a'、B1 = 'b'、A2 = 'c'、B2 = 'd' 中的值

代码简化为以下内容：

```
 Application appExl = new Application();
        Workbook workbook;

        //Opening Excel file(myData.xlsx)
        workbook = appExl.Workbooks.Open(
            @"c:\apps\book1.xlsx",
            Missing.Value,
            Missing.Value,
            Missing.Value,
            Missing.Value,
            Missing.Value,
            Missing.Value,
            Missing.Value,
            Missing.Value,
            Missing.Value,
            Missing.Value,
            Missing.Value,
            Missing.Value,
            Missing.Value,
            Missing.Value);

        Worksheet sheet = workbook.Sheets.get_Item(1);
        sheet.UsedRange.Copy();
        var a = Clipboard.GetText(); 
```

a 现在包含“a\tb\r\nc\td\r\n”

# xml - VB 中的 LINQ to XML 查询

> ID：14529485
> 
> 赞同：0
> 
> 时间：2013-01-25T20:02:06.450
> 
> 标签：xml, vb.net, linq

好的，我是 LINQ to XML 的新手，需要一些帮助来设置我的查询。我已经用谷歌搜索了几个小时，似乎每个不同的网站都有不同的方法，我真的很困惑。这是我的 XML：

```
<?xml version = "1.0"?>
<booking>
    <client>
        <id>0001</id>
        <name>Jack Loper</name>
        <numofseats>3</numofseats>
        <seats>C1C2C3</seats>
        <cost>30</cost>
    </client>
    <client>
        <id>0002</id>
        <name>Joe Bloggs</name>
        <numofseats>1</numofseats>
        <seats>D8</seats>
        <cost>10</cost>
    </client>
</booking> 
```

现在，我已经成功地将我的文档加载到 VB 中：

```
Dim BookingDatabase As XDocument
BookingDatabase = XDocument.Load(My.Application.Info.DirectoryPath & "\Booking_Database.xml") 
```

我希望我的查询的输出是：

0001 杰克洛珀 0002 乔布洛格斯

我将如何设置我的查询？目前我有这个，但我不知道我到底在做什么：

```
Dim query = From ex In BookingDatabase.Descendants.Elements("client")
                    Select id = ex.Attribute("id").Value
        For Each ex In query
            Console.WriteLine(ex)
        Next 
```

如果你能解释每一步，那就太好了。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-28T22:15:47.553

您可能已经想出了如何做到这一点，但如果您没有（或将来其他人有同样的问题并在搜索中遇到您的问题），有几种方法可以做到这一点（语法上)，但概念是一样的。

您的查询走在正确的道路上，除了您正在寻找一个真正在元素上的属性（“id”）。如果它是一个属性，它看起来像这样：

```
<client id="00001"> 
```

您要做的是返回匿名类型的集合——该类型的每个实例都将保存您告诉它的所有值（在本例中为 id 和 name）。首先是代码：

```
Dim query = From ex In BookingDatabase.Descendants("client")
            Select New With {
                .id = ex.Element("id").Value,
                .name = ex.Element("name").Value
            } 
```

或者，或者：

```
Dim query = BookingDatabase.Descendants("client").Select(Function(ex) New With {.id = ex.Element("id").Value, .name = ex.Element("name").Value}) 
```

两者都返回相同的东西，一个包含 id 和 name 的匿名类型的集合。

那么这些查询中发生了什么？

首先，`BookingDatabase.Descendants("client") is getting a collection of all the`客户端节点。

接下来，“Select New With”正在创建一个匿名类型，它将保存您使用以下语句选择的值：

```
{
  .id = ex.Element("id").Value,
  .name = ex.Element("name").Value
} 
```

最终结果是您获得了这些匿名类型的集合，然后您可以像这样对其进行迭代：

```
For Each ex in Query
    Console.WriteLine(ex.id + " " + ex.name)
Next 
```

请注意，您编写的代码会显示类似内容，`{ id = 0001, name = Jack Loper }`因为您只是在使用`ex`. 使用匿名类型，您可以获得可以使用的属性。

如果你已经定义了一个类，可以这样说：

```
Public Class Clients

    Public Property ID As String
    Public Property Name As String

End Class 
```

您可以使用以下命令返回一个类型化对象的集合：

```
Select New Clients With {
     .ID = ex.Element("id").Value,
     .Name = ex.Element("name").Value
} 
```

# javascript - chrome 扩展：如何绑定/挂钩到浏览器的“搜索调用”事件？

> ID：14529486
> 
> 赞同：4
> 
> 时间：2013-01-25T20:02:10.697
> 
> 标签：javascript, google-chrome-extension

我正在开发 Chrome 扩展程序，我想扩展（但不覆盖）浏览器的搜索（ctrl-F 或 cmd-F）功能。

有什么方法可以让我的扩展程序在调用浏览器的搜索功能以及输入的搜索词时收到一条消息。

（搜索框 UI 是 HTML 吗？如果是，有没有办法访问它，以便我可以绑定到它的搜索输入元素上的 keypress/keydown 事件？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T03:33:27.983

到目前为止，当浏览器的搜索功能被调用或*在 HTML 中呈现搜索框 UI*时，您无法*访问标准 Chrome 查找对话框*或*接收消息？*

 *`Ctrl`（通过+`F`或`Cmd`+触发`F`）。

但是，您可以使用[window.find()](https://developer.mozilla.org/en-US/docs/DOM/window.find) ¹。

# 解决问题

此 Workaround 将**Override**，因为**在 date 之前无法进行扩展**。

[使用chrome.commands](https://developer.chrome.com/extensions/commands.html) API定义您自己的命令

```
"commands":{
    "sample":{
        "suggested_key" : {
            "default":"Ctrl+F",
            "windows":"Ctrl+F"
        },
        "description":"Thisismycustomkeyforchromeextension"
    },
} 
```

`Ctrl`并为您的命令+`F`或`Cmd`+添加一个监听器`F`

```
chrome.commands.onCommand.addListener(function (command) {

    //Do what ever you want here
}) 
```

这将覆盖标准`Ctrl`+`F`或`Cmd`+`F`并使用您自己的[内容脚本](https://developer.chrome.com/extensions/content_scripts.html)来构建所有 UI 和功能逻辑，以便为相关内容抓取页面。

1：`window.find()`范围仅在选定的文本中

# 参考

*   [内容脚本](https://developer.chrome.com/extensions/content_scripts.html)
*   [命令 API](https://developer.chrome.com/extensions/commands.html)*

# c# - 删除用户控制资源

> ID：14529491
> 
> 赞同：1
> 
> 时间：2013-01-25T20:02:42.530
> 
> 标签：c#, wpf, resources, resourcedictionary

我通过更改资源字典来更改用户控件的样式。换句话说，我有：

**字典1.xaml：**

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <Style TargetType="Grid">        
        <Setter Property="Background" Value="Green"></Setter>        
    </Style>

    <SolidColorBrush x:Key="Foo" Color="Blue"></SolidColorBrush>

</ResourceDictionary> 
```

**字典2.xaml：**

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <Style TargetType="Grid">        
        <Setter Property="Background" Value="Black"></Setter>
    </Style>

    <SolidColorBrush x:Key="Foo" Color="Orange"></SolidColorBrush>

</ResourceDictionary> 
```

**用户控件1：**

```
<UserControl x:Class="WpfApplication1.UserControl1"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
             mc:Ignorable="d" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" d:DesignHeight="103" d:DesignWidth="101">                

    <Grid >
        <Ellipse Fill="{DynamicResource Foo}" />
    </Grid>
</UserControl> 
```

**代码背后**

```
namespace WpfApplication1
{
    using System; using System.Windows; using System.Windows.Controls;

    public partial class UserControl1 : UserControl
    {
        public enum ControlTheme
        {
            Theme1 , Theme2
        }

        public UserControl1 ( )
        {
            InitializeComponent( );            
        }

        public void ChangeTheme ( ControlTheme theme )
        {
            Resources.MergedDictionaries.Clear( );

            int dic = 2;

            if ( theme == ControlTheme.Theme1 )
                dic = 1; 

            ResourceDictionary rd = new ResourceDictionary( );
            rd.Source = new Uri( @"pack://application:,,,/WpfApplication1;component/Dictionary" + dic + ".xaml" );
            Resources.MergedDictionaries.Add( rd );
        }
    }
} 
```

现在我可以通过调用方法动态更改主题：**ChangeTheme**

* * *

我现在遇到的问题是，如果我放置：

```
 <UserControl.Resources>
        <ResourceDictionary Source="Dictionary1.xaml" ></ResourceDictionary>
 </UserControl.Resources> 
```

在**UserControl1上的****ChangeTheme**方法不再起作用。我正在寻找一种类似的方法：

```
 //PseudoCode
  var itemToRemove = this.UserControlResources.resources.where(x=> x.isDictionary==true);
  this.UserControlResources.Remove(itemToRemove); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T22:10:23.550

您在没有任何 MergedDictionary 的 Xaml 中设置您的字典，因此当您创建合并字典时，它们将被基本字典覆盖。您可以尝试以下两种方法之一。

第一个是在您的 UserControls Xaml 中创建 MergedDictionary。这将在不更改您的 CodeBehind 的情况下工作。

IE

```
<UserControl.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="Dictionary1.xaml" />
        </ResourceDictionary.MergedDictionaries> 
        </ResourceDictionary>
</UserControl.Resources> 
```

第二个是将您新创建的 ResourceDictionary 分配给 UserControls 资源，从而覆盖预先存在的 ResourceDictionary。这将在不更改 Xaml 的情况下工作。

IE

```
public void ChangeTheme(ControlTheme theme)
{
    int dic = 2;

    if (theme == ControlTheme.Theme1)
        dic = 1;

    ResourceDictionary rd = new ResourceDictionary();
    rd.Source = new Uri(@"pack://application:,,,/WpfApplication1;component/Dictionary" + dic + ".xaml");
    this.Resources.Clear();
    this.Resources = rd; 
} 
```

# java - 上下文需要 FLAG_ACTIVITY_NEW_TASK 但我已经设置了该标志

> ID：14529492
> 
> 赞同：12
> 
> 时间：2013-01-25T20:02:45.157
> 
> 标签：java, android, android-intent, android-sdk-2.3

我为我工作的公司创建了一个通用的可重用类，以创建一些通用的界面元素。

该类在构造中采用单个参数：应用程序上下文。

其中一种方法`ContentClickableRowWithIcon`允许您传入一个意图用作点击操作。

继承人完整的方法声明：

`public LinearLayout ContentClickableRowWithIcon(Drawable icon, String title, Intent i, final Boolean chooser)`

onClickEvent 中使用最后一个属性来确定是调用选择器还是直接进入意图。

```
public LinearLayout ContentClickableRowWithIcon(Drawable icon, String title, Intent i, final Boolean chooser) {

    LinearLayout ll = new LinearLayout(mContext);

    // ..  LinerLayout construction, has nothing to do with the action

    i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK); // this is apparently getting ignored... (ps: i've tried i.setFlags as well)

    final Intent intent = i;

    ll.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {

            if(chooser)
                mContext.startActivity(Intent.createChooser(intent, "Complete With...")); // crashes here with: android.util.AndroidRuntimeException: Calling startActivity() from outside of an Activity  context requires the FLAG_ACTIVITY_NEW_TASK flag. Is this really what you want?
            else
                mContext.startActivity(intent); // this works fine

        }
    });

    return ll;
} 
```

正如评论中提到的，只要我不提供使用选择器的能力，一切正常（此列表中的所有内容都有一个新的活动标志，我很清楚这一点，并且在解决此问题时会进行清理）

我这样做的那一刻，抛出异常： `android.util.AndroidRuntimeException: Calling startActivity() from outside of an Activity context requires the FLAG_ACTIVITY_NEW_TASK flag. Is this really what you want?`

我已经没有想法了...

/// EDIT:: 值得注意的是，在调试时，Intent 中的 flags 属性设置为`268435456`使用 addFlags 和`268435456`setFlags，当它到达使用 onClick 操作中的意图的时间时

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-25T20:25:40.507

问题已解决，我认为这只是“操作顺序”场景的情况

继承人是什么让这件事起作用：

```
 ll.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {

            if(chooser) {
                Intent intent = Intent.createChooser(i, "Complete With");
                intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                mContext.startActivity(intent);
            } else
                mContext.startActivity(i);

        }
    }); 
```

还在方法声明的参数中添加了“final”修饰符

```
public LinearLayout ContentClickableRowWithIcon(Drawable icon, String title, final Intent i, final Boolean chooser) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-12T14:36:34.213

实际上，您的异常意味着您使用的是 Not Activity Context。它可以从应用程序上下文中调用。检查您是否在 Activity 上下文中，因为这不是服务

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-14T01:19:02.793

我修复了它，将标志添加到选择器意图

```
Intent sharingIntent = new Intent(android.content.Intent.ACTION_SEND)
            .setType("text/plain")
            .putExtra(android.content.Intent.EXTRA_SUBJECT, "Subject Here")
            .putExtra(android.content.Intent.EXTRA_TEXT, url)
            .addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

context.startActivity(Intent.createChooser(sharingIntent, "Share with").addFlags(Intent.FLAG_ACTIVITY_NEW_TASK)); 
```

# java - 从 POST 请求中读取 MultipartContent

> ID：14529493
> 
> 赞同：1
> 
> 时间：2013-01-25T20:02:56.510
> 
> 标签：java, servlets, file-upload, apache-commons

> **可能重复：**
> [如何使用 JSP/Servlet 将文件上传到服务器？](https://stackoverflow.com/questions/2422468/how-to-upload-files-to-server-using-jsp-servlet)

我正在实现一个与 resumable.js 一起使用的文件上传 servlet

每次我尝试读取文件时，我都会收到 NoSuchElement 异常或 NumberFormatException，其中包含我正在读取的文件中的字符串。我确定我在某个地方打了个嗝，但似乎无法分辨

这是我用来读取请求和写入文件的片段

```
if(ServletFileUpload.isMultipartContent(request)){
            DiskFileItemFactory factory = new DiskFileItemFactory();
            factory.setRepository(new File(temp_dir));
            ServletFileUpload upload = new ServletFileUpload(factory);

            Iterator<FileItem> iter = upload.parseRequest(request).iterator();
            FileItem item = iter.next();
            OutputStream out;

            try {

                out = new FileOutputStream(new File(dest_dir));
                IOUtils.copy(item.getInputStream(), out);
                logger.debug("Wrote file " + resumableIdentifier + " with chunk number "
                        + resumableChunkNumber + " to " + temp_dir);

            } catch (FileNotFoundException fnfe) {

                fnfe.printStackTrace();

            }
        } 
```

我是否做错了什么使代码实际读取和解释文件的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T20:08:04.653

您必须遍历 FileItems。在这一行之后：

```
Iterator<FileItem> iter = upload.parseRequest(request).iterator(); 
```

你应该有这样的东西：

```
File dir = new File(dest_dir);
if (!dir.isDirectory()) dir.mkdirs();
while(iter.hasNext()) {
    FileItem item = iter.next(); 
```

也不要忘记关闭每个文件项的输出流。

```
out = new FileOutputStream(new File(dir, item.getName()));
IOUtils.copy(item.getInputStream(), out);
out.close(); 
```

# c++ - 有没有比这更好的从可变大小数组中选择随机元素的方法？

> ID：14529496
> 
> 赞同：0
> 
> 时间：2013-01-25T20:02:58.107
> 
> 标签：c++, arduino

我对 C++ 很陌生，想知道是否有更好的方法来做到这一点。它将在 Arduino 上运行，所以我不能使用 ArrayLists 或任何东西。

```
byte GetFreeCell(short x, short y)
{
    byte possibleMoves[4] = {0,0,0,0};
    if (y - 2 >= 0 && _grid[y - 2][x] == 0)
        possibleMoves[0] = 1;
    if (x + 2 < WIDTH && _grid[y][x + 2] == 0)
        possibleMoves[1] = 2;
    if (y + 2 < HEIGHT && _grid[y + 2][x] == 0)
        possibleMoves[2] = 3;
    if (x - 2 >= 0 && _grid[y][x - 2] == 0)
        possibleMoves[3] = 4;

    if (possibleMoves[0] == 0 && possibleMoves[1] == 0 && possibleMoves[2] == 0 && possibleMoves[3] == 0) {
        return 0;
    }

    byte move = 0;
    while(move == 0){
        move = possibleMoves[random(4)];
    }
    return move;
} 
```

谢谢，

乔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T20:09:49.647

```
byte GetFreeCell(short x, short y)
{
    byte possibleMoves[4];
    byte index = 0;
    if (y - 2 >= 0 && _grid[y - 2][x] == 0)
        possibleMoves[index++] = 1;
    if (x + 2 < WIDTH && _grid[y][x + 2] == 0)
        possibleMoves[index++] = 2;
    if (y + 2 < HEIGHT && _grid[y + 2][x] == 0)
        possibleMoves[index++] = 3;
    if (x - 2 >= 0 && _grid[y][x - 2] == 0)
        possibleMoves[index++] = 4;

    return index ? possibleMoves[random(index)] : 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T20:09:21.113

您可以帮自己一个忙并使用它：

[https://github.com/maniacbug/StandardCplusplus/#readme](https://github.com/maniacbug/StandardCplusplus/#readme)

然后，您可以使用标准容器清理您的代码。

此外，C++ 中没有 ArrayList。那是Java。使用上面的库，您可以使用 std::vector 代替。

# android - getSurfaceHolder().getSurfaceFrame() 重新生成高度和宽度为零的矩形

> ID：14529500
> 
> 赞同：1
> 
> 时间：2013-01-25T20:03:08.227
> 
> 标签：android, android-4.0-ice-cream-sandwich, live-wallpaper, surfaceholder

我正在制作一个基本的动态壁纸。该代码在我的**“运行 ICS 的 Galaxy S2(GT-I9100)”上运行**良好，并且该函数返回正确的高度和宽度值。但是，当我尝试在不同的设备**“运行 GB 的 Galaxy S2（SHW-M250L）”**上运行相同的 apk 时，矩形在 Rectangle 中的高度和宽度为零，返回的：`getSurfaceHolder().getSurfaceFrame()`函数如日志中所示。

请参考以下代码：

```
public void onSurfaceCreated(SurfaceHolder holder) {
    super.onSurfaceCreated(holder);
    Log.i(TAG, "onSurfaceCreated called with height: "+getSurfaceHolder().getSurfaceFrame().height());//Just for Log check
    viewThread = new ViewThread(getSurfaceHolder(), getApplicationContext());
    viewThread.setRunning(true);
    viewThread.start();
} 
```

我担心的是为什么它在特定设备上失败或者我留下了一些错误？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T20:39:11.867

高度和宽度不应在创建的 onSurface 中设置。它们应该设置为 onSurfaceChanged，其中值实际上作为参数传递给函数。如果您需要在某处访问它们，将它们保存到字段中可能是有意义的。这可以在 android sdk 附带的示例动态壁纸中看到。只需搜索 livecube。

这是一个例子：

```
/*
 * Copyright (C) 2009 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

package com.example.android.livecubes.cube1;

import android.graphics.Canvas;
import android.graphics.Paint;
import android.graphics.Rect;
import android.os.Handler;
import android.os.SystemClock;
import android.service.wallpaper.WallpaperService;
import android.util.Log;
import android.view.MotionEvent;
import android.view.SurfaceHolder;

/*
 * This animated wallpaper draws a rotating wireframe cube.
 */
public class CubeWallpaper1 extends WallpaperService {

    private final Handler mHandler = new Handler();

    @Override
    public void onCreate() {
        super.onCreate();
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
    }

    @Override
    public Engine onCreateEngine() {
        return new CubeEngine();
    }

    class CubeEngine extends Engine {

        private final Paint mPaint = new Paint();
        private float mOffset;
        private float mTouchX = -1;
        private float mTouchY = -1;
        private long mStartTime;
        private float mCenterX;
        private float mCenterY;

        private final Runnable mDrawCube = new Runnable() {
            public void run() {
                drawFrame();
            }
        };
        private boolean mVisible;

        CubeEngine() {
            // Create a Paint to draw the lines for our cube
            final Paint paint = mPaint;
            paint.setColor(0xffffffff);
            paint.setAntiAlias(true);
            paint.setStrokeWidth(2);
            paint.setStrokeCap(Paint.Cap.ROUND);
            paint.setStyle(Paint.Style.STROKE);

            mStartTime = SystemClock.elapsedRealtime();
        }

        @Override
        public void onCreate(SurfaceHolder surfaceHolder) {
            super.onCreate(surfaceHolder);

            // By default we don't get touch events, so enable them.
            setTouchEventsEnabled(true);
        }

        @Override
        public void onDestroy() {
            super.onDestroy();
            mHandler.removeCallbacks(mDrawCube);
        }

        @Override
        public void onVisibilityChanged(boolean visible) {
            mVisible = visible;
            if (visible) {
                drawFrame();
            } else {
                mHandler.removeCallbacks(mDrawCube);
            }
        }

        @Override
        public void onSurfaceChanged(SurfaceHolder holder, int format, int width, int height) {
            super.onSurfaceChanged(holder, format, width, height);
            // store the center of the surface, so we can draw the cube in the right spot
            mCenterX = width/2.0f;
            mCenterY = height/2.0f;
            drawFrame();
        }

        @Override
        public void onSurfaceCreated(SurfaceHolder holder) {
            super.onSurfaceCreated(holder);
        }

        @Override
        public void onSurfaceDestroyed(SurfaceHolder holder) {
            super.onSurfaceDestroyed(holder);
            mVisible = false;
            mHandler.removeCallbacks(mDrawCube);
        }

        @Override
        public void onOffsetsChanged(float xOffset, float yOffset,
                float xStep, float yStep, int xPixels, int yPixels) {
            mOffset = xOffset;
            drawFrame();
        }

        /*
         * Store the position of the touch event so we can use it for drawing later
         */
        @Override
        public void onTouchEvent(MotionEvent event) {
            if (event.getAction() == MotionEvent.ACTION_MOVE) {
                mTouchX = event.getX();
                mTouchY = event.getY();
            } else {
                mTouchX = -1;
                mTouchY = -1;
            }
            super.onTouchEvent(event);
        }

        /*
         * Draw one frame of the animation. This method gets called repeatedly
         * by posting a delayed Runnable. You can do any drawing you want in
         * here. This example draws a wireframe cube.
         */
        void drawFrame() {
            final SurfaceHolder holder = getSurfaceHolder();

            Canvas c = null;
            try {
                c = holder.lockCanvas();
                if (c != null) {
                    // draw something
                    drawCube(c);
                    drawTouchPoint(c);
                }
            } finally {
                if (c != null) holder.unlockCanvasAndPost(c);
            }

            // Reschedule the next redraw
            mHandler.removeCallbacks(mDrawCube);
            if (mVisible) {
                mHandler.postDelayed(mDrawCube, 1000 / 25);
            }
        }

        /*
         * Draw a wireframe cube by drawing 12 3 dimensional lines between
         * adjacent corners of the cube
         */
        void drawCube(Canvas c) {
            c.save();
            c.translate(mCenterX, mCenterY);
            c.drawColor(0xff000000);
            drawLine(c, -400, -400, -400,  400, -400, -400);
            drawLine(c,  400, -400, -400,  400,  400, -400);
            drawLine(c,  400,  400, -400, -400,  400, -400);
            drawLine(c, -400,  400, -400, -400, -400, -400);

            drawLine(c, -400, -400,  400,  400, -400,  400);
            drawLine(c,  400, -400,  400,  400,  400,  400);
            drawLine(c,  400,  400,  400, -400,  400,  400);
            drawLine(c, -400,  400,  400, -400, -400,  400);

            drawLine(c, -400, -400,  400, -400, -400, -400);
            drawLine(c,  400, -400,  400,  400, -400, -400);
            drawLine(c,  400,  400,  400,  400,  400, -400);
            drawLine(c, -400,  400,  400, -400,  400, -400);
            c.restore();
        }

        /*
         * Draw a 3 dimensional line on to the screen
         */
        void drawLine(Canvas c, int x1, int y1, int z1, int x2, int y2, int z2) {
            long now = SystemClock.elapsedRealtime();
            float xrot = ((float)(now - mStartTime)) / 1000;
            float yrot = (0.5f - mOffset) * 2.0f;
            float zrot = 0;

            // 3D transformations

            // rotation around X-axis
            float newy1 = (float)(Math.sin(xrot) * z1 + Math.cos(xrot) * y1);
            float newy2 = (float)(Math.sin(xrot) * z2 + Math.cos(xrot) * y2);
            float newz1 = (float)(Math.cos(xrot) * z1 - Math.sin(xrot) * y1);
            float newz2 = (float)(Math.cos(xrot) * z2 - Math.sin(xrot) * y2);

            // rotation around Y-axis
            float newx1 = (float)(Math.sin(yrot) * newz1 + Math.cos(yrot) * x1);
            float newx2 = (float)(Math.sin(yrot) * newz2 + Math.cos(yrot) * x2);
            newz1 = (float)(Math.cos(yrot) * newz1 - Math.sin(yrot) * x1);
            newz2 = (float)(Math.cos(yrot) * newz2 - Math.sin(yrot) * x2);

            // 3D-to-2D projection
            float startX = newx1 / (4 - newz1 / 400);
            float startY = newy1 / (4 - newz1 / 400);
            float stopX =  newx2 / (4 - newz2 / 400);
            float stopY =  newy2 / (4 - newz2 / 400);

            c.drawLine(startX, startY, stopX, stopY, mPaint);
        }

        /*
         * Draw a circle around the current touch point, if any.
         */
        void drawTouchPoint(Canvas c) {
            if (mTouchX >=0 && mTouchY >= 0) {
                c.drawCircle(mTouchX, mTouchY, 80, mPaint);
            }
        }

    }
} 
```

# regex - 正则表达式匹配允许'

> ID：14529502
> 
> 赞同：0
> 
> 时间：2013-01-25T20:03:11.667
> 
> 标签：regex, validation

我正在使用 regex_match 验证姓氏

到目前为止我有这个，`regex_match[/^[a-zA-Z -]{0,25}+$/]`但我也想允许`'`像奥尼尔这样的名字。我试过了`regex_match[/^[a-zA-Z -\']{0,25}+$/]`，但没有用

有什么建议么？

谢谢，J

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T20:10:43.090

`-\'`是无效范围。您需要将破折号放在字符类的末尾：

```
/^[a-zA-Z '-]{0,25}$/ 
```

在这里`+`是多余的（在某些正则表达式中，它会激活“占有匹配”，但这里绝对不需要），反斜杠也是如此。

另外，我怀疑正则表达式周围的方括号在您使用的任何语言中的语法都不正确。（顺便问一下，那是哪一个？）

但真正的问题是您[尝试验证名称](http://www.kalzumeus.com/2010/06/17/falsehoods-programmers-believe-about-names/)（使用正则表达式，不少于）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T20:12:08.037

您不需要`\`转义`'`，但您可能应该将破折号放在最后，这样它就不会创建范围。

您也不需要在`+`之后`{0,25}`，它不是一个有效的正则表达式。

这对我来说很好`^[a-zA-Z '-]{0,25}$`

# scala - 在 Scala 中是否可以在复制语句中引用被复制的对象

> ID：14529503
> 
> 赞同：4
> 
> 时间：2013-01-25T20:03:12.113
> 
> 标签：scala

有没有办法在复制语句中引用正在复制的对象而不必将对象分配给变量？

例如我可以这样做：

```
case class Foo(s: String)
val f = Foo("a")
f.copy(s = f.s + "b") 
```

但我想这样做：

```
case class Foo(s: String)
Foo("a").copy(s = this.s + "b") 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-25T20:16:00.003

不是直接的。人们有时会定义一个管道方法来处理这类事情（不仅仅是案例类）。在 2.10 中：

```
implicit class PipeEverything[A](val value: A) extends AnyVal {
  def |>[Z](f: A => Z) = f(value)
} 
```

但这并不总是节省那么多空间：

```
Foo("a") |> (x => x.copy(s = x.s + "b"))
{ val x = Foo("a"); x.copy(s = x.s + "b") } 
```

请记住，您几乎可以在 Scala 中的任何位置放置代码块，因此创建瞬态 val 通常没什么大不了的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T20:24:50.790

不是你的问题的答案，而是一个旁白。

您可能想查看[lens](https://blog.stackmob.com/2012/02/an-introduction-to-lenses-in-scalaz/)，这将允许您执行以下操作：

```
case class Foo(s: String)
sLens.mod(Foo("a"), _ + "b") 
```

您可以定义`sLens`自己或[使用编译器插件自动生成](https://github.com/gseitz/Lensed)它。

# tfs - TFS 2012 -“发现”错误字段和门控构建

> ID：14529511
> 
> 赞同：1
> 
> 时间：2013-01-25T20:03:57.697
> 
> 标签：tfs

有没有办法隐藏封闭的构建，这样它们就不会在“发现于”错误字段中列出？

另外：“发现于”字段按升序排列。我正在尝试找到一种方法使该字段按降序排序和/或由可用的最后一个版本自动填充。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T21:35:15.170

拉斐尔，

> 有没有办法隐藏封闭的构建，这样它们就不会在“发现于”错误字段中列出？

没有，“发现于”字段将反映执行的第一个构建，其中包含关联并“解决”该错误的 CheckIn。这是预期和记录的行为。

**我会对您正在尝试实现的目标感兴趣。**

> “发现于”字段按升序排列。我正在尝试找到一种方法使该字段按降序排序和/或由可用的最后一个版本自动填充。

无法更改默认顺序，它基于标准的 Alfa 排序。该字段始终由构建脚本自动填充，并且应该反映您的团队项目中所有当前活动的构建。当您删除一个构建时，它也会从该列表中删除。

# javascript - 如何为 IE9 为硬盘上的 html 文件设置 cookie

> ID：14529515
> 
> 赞同：0
> 
> 时间：2013-01-25T20:04:31.167
> 
> 标签：javascript, jquery, internet-explorer

我有一个从本地硬盘驱动器运行的网页。我正在使用 localstorage 来设置用户首选项，并且适用于 Chrome，但我需要在 IE9 中使用它。为此设置用户首选项的最佳方法是什么，我可以使用本地文件设置 cookie 吗？

# python - 列表的 Python 拆分

> ID：14529523
> 
> 赞同：29
> 
> 时间：2013-01-25T20:05:19.700
> 
> 标签：python, list

如果我们在 python 中有一个`list`of`strings`并且想要基于一些特殊的创建子列表`string`我们应该怎么做？

例如：

```
l = ["data","more data","","data 2","more data 2","danger","","date3","lll"]
p = split_special(l,"") 
```

会产生：

```
p = [["data","more data"],["data 2","more data 2","danger"],["date3","lll"]] 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-01-25T20:11:21.497

[itertools.groupby](http://docs.python.org/2/library/itertools.html#itertools.groupby)是一种方法（通常是这样）：

```
>>> l = ["data","more data","","data 2","more data 2","danger","","date3","lll"]
>>> from itertools import groupby
>>> groupby(l, lambda x: x == "")
<itertools.groupby object at 0x9ce06bc>
>>> [list(group) for k, group in groupby(l, lambda x: x == "") if not k]
[['data', 'more data'], ['data 2', 'more data 2', 'danger'], ['date3', 'lll']] 
```

由于这种特殊情况，我们甚至可以作弊：

```
>>> [list(group) for k, group in groupby(l, bool) if k]
[['data', 'more data'], ['data 2', 'more data 2', 'danger'], ['date3', 'lll']] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-25T20:35:46.753

使用 itertools 的一种可能实现

```
>>> l
['data', 'more data', '', 'data 2', 'more data 2', 'danger', '', 'date3', 'lll']
>>> it_l = iter(l)
>>> from itertools import takewhile, dropwhile
>>> [[e] + list(takewhile(lambda e: e != "", it_l)) for e in it_l if e != ""]
[['data', 'more data'], ['data 2', 'more data 2', 'danger'], ['date3', 'lll']] 
```

* * *

*注意**

这和使用 groupby 一样快

```
>>> stmt_dsm = """
[list(group) for k, group in groupby(l, lambda x: x == "") if not k]
"""
>>> stmt_ab = """
it_l = iter(l)
[[e] + list(takewhile(lambda e: e != "", it_l)) for e in it_l if e != ""]
"""
>>> t_ab = timeit.Timer(stmt = stmt_ab, setup = "from __main__ import l, dropwhile, takewhile")
>>> t_dsm = timeit.Timer(stmt = stmt_dsm, setup = "from __main__ import l, groupby")
>>> t_ab.timeit(100000)
1.6863486541265047
>>> t_dsm.timeit(100000)
1.5298066765462863
>>> t_ab.timeit(100000)
1.735611326163962
>>> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-25T20:35:53.607

[`reduce`](http://docs.python.org/2.7/library/functions.html#reduce)想到：

```
def split(iterable, where):
    def splitter(acc, item, where=where):
        if item == where:
            acc.append([])
        else:
            acc[-1].append(item)
        return acc
    return reduce(splitter, iterable, [[]])

data = ["data","more data","","data 2","more data 2","danger","","date3","lll"]
print split(data, '') 
```

结果：

```
[['data', 'more data'], ['data 2', 'more data 2', 'danger'], ['date3', 'lll']] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-25T20:05:19.700

我不确定这是否是最“pythonic”的解决方法。

```
def split_seq(seq, sep):
    start = 0
    while start < len(seq):
        try:
           stop = start + seq[start:].index(sep)
           yield seq[start:stop]
           start = stop + 1
        except ValueError:
           yield seq[start:]
           break

ll = ["data","more data","","data 2","more data 2","danger","","date3","lll"]
p = [i for i in split_seq(ll,"")] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-25T20:48:51.567

这是一个想法。:)

```
def spec_split(seq,sep):
    # Ideally this separator will never be in your list
    odd_sep = "!@#$%^&*()"

    # Join all the items with the odd separator and split
    # anywhere the odd separator + separator + odd seperator meet
    # This makes a list of items broken by the separator
    jumble = odd_sep.join(seq).split(odd_sep+sep+odd_sep)

    # split the remaining items broken by odd separators into sublists
    return [item.split(odd_sep) for item in jumble] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-07-09T05:49:13.300

```
 lst = ["data","more data","","data 2","more data 2","danger","","date3","lll"]
    join_list = ",".join(lst)
    split_list = join_list.split(",,")
    result = [i.split() for i in split_list]
    #result =[['data,more', 'data'], ['data', '2,more', 'data', '2,danger'],  ['date3,lll']] 
```

# javascript - 为什么我的 jPlayer 可以在 Firefox 而不是 Chrome 中运行？

> ID：14529525
> 
> 赞同：0
> 
> 时间：2013-01-25T20:05:27.613
> 
> 标签：javascript, wordpress, jplayer

我正在为我运行的音乐博客制作音频播放器，但我似乎无法让 jPlayer 在我的网站上正常工作。现在，我已将其设置为只有管理员才能查看播放器（因为它不起作用），但我制作了一个小测试网站，以便您也能明白我的意思。

该播放器在 Firefox 中运行良好，但在 Chrome 中无法正常运行。我有一种感觉，它与它用于 Firefox 的 flash 回退有关，但我不明白为什么它也不能在 Chrome 上运行。它似乎根本不想加载/流式传输歌曲。

我制作了一些功能，因此可以在您正在查看的任何页面上动态添加歌曲。我相信我正确设置了所有内容。我使用一个数组作为歌曲的标题和 MP3 的 URL，它们是由 WordPress 动态添加的。每次添加新歌时，我都会调用下面的 JavaScript 函数 add_song...

```
function add_song(title, mp3)
{
    theTitles[index] = title;
    theMP3s[index] = mp3;
    index++;
} 
```

然后对于 document.ready 函数，我使用我创建的另一个名为 get_playlist() 的函数来设置我的 jPlayer；

```
function get_playlist()
{
    var playlist = new Array();

    for(var i = 0; i < theTitles.length; i++)
    {
        playlist[i] = {title: theTitles[i], mp3: theMP3s[i]};
    }
    return playlist;
}

$(document).ready(function()
{
    var playlist = get_playlist();
    new jPlayerPlaylist({
        jPlayer: "#jquery_jplayer_1",
        cssSelectorAncestor: "#jp_container_1",
        oggSupport:false
    }, playlist, {
        swfPath: "/js",
        supplied: "mp3",
        wmode: "window"
    });
}); 
```

我有一种感觉，我错过了一些简单的东西，为什么它可以在 Firefox 而不是 Chrome 上运行，但我不知道它是什么。但是，如果您通过按下实际帖子上的播放按钮开始播放其中一首歌曲，然后停止它，然后尝试在顶级播放器中播放它，它工作正常。例如，尝试在顶级播放器中播放第一首歌曲，它不会奏效。然后单击实际 Seasfire 帖子上的播放按钮，暂停它，然后再次尝试顶级播放器，它会起作用。这是我到测试站点的[网址](http://www.startingtofeelit.com/text.php)，因此如果您有任何问题，您可以自己查看播放器。

谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T22:19:27.730

stackoverflow 不会让我现在登录，但我是原始发帖人。

索引在我使用它之前被定义和初始化，所以这不是问题。我使用的整个javascript是......

```
<script type="text/javascript">

    var index = 0;
    var theTitles = new Array();
    var theMP3s = new Array();

    function add_song(title, mp3)
    {
        theTitles[index] = title;
        theMP3s[index] = mp3;
        index++;
    }

    function get_playlist()
    {
        var playlist = new Array();

        for(var i = 0; i < theTitles.length; i++)
        {
            playlist[i] = {title: theTitles[i], mp3: theMP3s[i]};
        }
        return playlist;
    }

    $(document).ready(function()
    {
        var playlist = get_playlist();
        new jPlayerPlaylist({
            jPlayer: "#jquery_jplayer_1",
            cssSelectorAncestor: "#jp_container_1"
        }, playlist, {
            swfPath: "/js",
            supplied: "mp3",
            wmode: "window"
        });
    });
    //]]>
    </script> 
```

# javascript - 无法立即在 Javascript 中调用匿名函数

> ID：14529532
> 
> 赞同：5
> 
> 时间：2013-01-25T20:05:47.433
> 
> 标签：javascript, function, frameworks, anonymous

几周以来我一直在研究框架开发，我遇到了在 lib 开发领域中强烈建议和压力的东西，即立即调用匿名函数。

我永远无法让它工作，我也找不到详细解释它背后的使用和逻辑的资源。

到目前为止，这是我所知道的：

*   **它立即调用**- 它立即匿名运行所有内容。
*   **它是匿名的**- 它没有名称，因此它内部的代码不能被外部代码“访问”。
*   **你可以传递全局窗口、对象和未定义的参数**——这就是我所知道的，但并不完全理解它们。

我不仅在寻找详细的资源，而且还在寻找能够解释其背后逻辑的资源。因为我觉得这很不合逻辑。

这是我所拥有的：

```
(function( window, document, undefined ) {
    window.myThingy = myThingy;

    var myThingy = function() {
    };

    myThingy.prototype = {
        constructor: myThingy,
        create: function( elementToBeCreated ) {
            return document.createElement( elementToBeCreated );
        }
    };

})( window, document ); 
```

然后，

```
myThingy().create("div"); 
```

但它仍然说`myThingy() [object]`不是一个函数。

我究竟做错了什么？为什么我应该使用立即调用函数而不仅仅是创建一个全局`myThingy = function()`对象？为什么我必须使用`window`？

我知道网上有很多关于此的资源，但我无法理解其中的任何一个。他们中的一些人半途而废，其中一些人试图深入细节，但未能解释关键的东西。**为什么在开发框架时会如此强调？**

别担心，我不是在尝试“重新发明轮子”，而是在尝试真正学习*JavaScript*，而不仅仅是预先打包的东西。

一个好的答案应该包含：

*   一个很好的资源，它解释了立即调用匿名函数背后的逻辑
*   对该链接的见解
*   我提供的代码做错了什么

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T20:29:16.450

首先，当您尝试将其分配给全局对象时，您尚未定义您的函数，因此它是未定义的：

```
window.myThingy = myThingy;
console.log(myThingy);//undefined 
```

您需要在`myThingy`定义后进行分配：

```
(function( window, document, undefined ) {

 var myThingy = function() {
 };

 myThingy.prototype = {
    constructor: myThingy,
    create: function( elementToBeCreated ) {
        return document.createElement( elementToBeCreated );
    }
 };

 window.myThingy = myThingy;

})( window, document ); 
```

好的，接下来，你不能使用

```
myThingy.create("div"); 
```

因为 myThingy 是一个函数而不是一个对象。函数对象是在`new`向函数发出关键字时创建的。您可以进行此更改以将您的函数转换为函数对象：

```
window.myThingy = new myThingy();//create a function object 
```

这种模式不是所有框架都是如何实现的，而是类似的。有时有更多的抽象。但是，进行这些更改将使您的方法发挥作用。

这是您的代码演示：http: [//jsfiddle.net/ZjRJW/](http://jsfiddle.net/ZjRJW/)

* * *

**链接**

以下是我的一些最爱：

[http://ejohn.org/blog/simple-class-instantiation/](http://ejohn.org/blog/simple-class-instantiation/)

[http://ejohn.org/apps/learn/](http://ejohn.org/apps/learn/)

[http://ejohn.org/blog/simple-javascript-inheritance/](http://ejohn.org/blog/simple-javascript-inheritance/)

[http://jibbering.com/faq/notes/closures/](http://jibbering.com/faq/notes/closures/)

[https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Details_of_the_Object_Model](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Details_of_the_Object_Model)

[http://javascript.crockford.com/prototypal.html](http://javascript.crockford.com/prototypal.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T20:34:24.007

如果你想了解 JS 设计模式，我强烈推荐[Addy Osmani 的书籍/文章](http://addyosmani.com/blog/)。他使事情变得非常简单，通常会提供相当多的示例代码来帮助您理解。就您的代码和实现设计模式而言，这取决于您希望代码做什么，以及您希望代码/对象如何表现。在开始编码之前了解您的需求/目标非常重要，这样您就不会迷失在真正无法解决特定问题的意大利面条式模式中。

在某些情况下，为复杂的大型应用程序实现一个模式简直是矫枉过正。

由于其他人已经正确地指出了您的代码的问题，我将把它留在那里。

# database - 从 SQL 中检索 VB 中的数据

> ID：14529534
> 
> 赞同：1
> 
> 时间：2013-01-25T20:05:54.373
> 
> 标签：database, vb.net, sql-server-2008

我使用 Visual Basic 2010 和 Microsoft SQL Server 2008。我有我的数据库和我的表，我只使用接口在 VB 中建立了连接（至少我认为我做到了）。

我想知道的是如何从数据库中获取数据并将其用于我的 VB 项目。我当然已经在寻找解决方案，但我发现的差异只会让我更加困惑。我需要知道的是基础知识、工具/对象和检索数据的过程。

我现在尝试做的是做一个简单的选择，并在程序启动时将该数据放入列表框中，如下所示：

```
Public Class Form1

    Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        SqlConnection1.Open()

        SqlConnection1.Close()

    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T20:17:00.813

1）创建您的连接字符串

```
Dim connectionString As String = "Data Source=localhost;........." 
```

2) 连接到您的数据库

```
Dim connection As New SqlConnection(connectionString)
conn.Open() 
```

3）创建命令和查询

```
Dim command As New SqlCommand("SELECT * FROM Product", connection)
Dim reader As SqlDataReader = command.ExecuteReader()  //Execute the Query 
```

4) 检索您的结果。有几种方法

```
Dim dt As New DataTable()
dt.Load(reader)

'Close the connection
connection.Close() 
```

5）绑定到您的列表框

```
myListBox.ItemSource = dt 
```

完整代码在这里

```
Using connection As New SqlConnection(connectionString)
    Dim command As New SqlCommand("Select * from Products", connection)
    command.Connection.Open()
    SqlDataReader reader = command.ExecuteReader()
 End Using 
```

欲了解更多信息

*   [SQL命令](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T20:10:10.787

```
SqlConnection1.Open()
using table As DataTable = New DataTable
  using command as SqlCommand = New SqlCommand("SELECT blah blah", SqlConnection1)
    using adapter As SqlDataAdapter = new SqlDataAdapter(command)
      adapter.Fill(table)
    end using
  end using

  for each row As DataRow in table.Rows
    '  add each listbox item
    listbox1.Items.Add(row("column name"))
  next
end using
SqlConnection1.Close() 
```

# java - 从 AIX 系统中的 mySQL 数据库检索数据时出现问题

> ID：14529537
> 
> 赞同：0
> 
> 时间：2013-01-25T20:06:01.250
> 
> 标签：java, mysql, database, linux, aix

我正在尝试从 MySQL 数据库表中检索数据。为此，我在各种平台上使用以下代码。我的代码在 Windows 和 Linux 平台上运行良好。但是当我在 AIX 6.1 中使用相同的代码时，它不会检索到正确的数据。

主要功能：

```
String storedstring = objDBUtil.lookup(0);
logger.info(storedstring); 
```

数据库实用程序功能：

```
public String lookup(String number) throws Exception {
    String sql = "SELECT info FROM records WHERE Snumber=?";

    Connection dbConn = connect();
    try {
        PreparedStatement stmt = dbConn.prepareStatement(sql);

    try {
           stmt.setString(1, number);

           ResultSet rs =  stmt.executeQuery();

            try {
                if (!rs.next()) {
                    throw new TException("does not exist in the database");
                }
                return  rs.getString(1);
            } catch (Exception e) {
                logger.info("Unexpected exception caught during auth: " + e.getClass().toString() + " " + e.getMessage());
                return null;
            }finally {
                rs.close();
            }
        } finally {
            stmt.close();
        }
    } finally {
        dbConn.close();
    }
} 
```

在 Windows 上输出 main 函数，我从数据库中获取整个字符串。但是确切的代码给了我在 AIX 机器上的加密值。

> AIX 机器上的输出 [B@62637268

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T16:54:41.970

我解决了这个问题。问题出在连接器文件上。我使用的是旧版本的连接器文件。

我使用的 MySQL 版本：mysql-5.5.2-m2-aix5.3-powerpc-64bit

带有上述mysql的Mysql连接器的非工作版本：mysql-connector-java-3.1.7-bin.jar

具有上述 mysql 的 MySQL 连接器的工作版本：新版本：mysql-connector-java-5.1.6-bin.jar

感谢大家调查我的问题并试图帮助我。非常感谢。

# java - 如何制作 Android Web 服务器

> ID：14529539
> 
> 赞同：-1
> 
> 时间：2013-01-25T20:06:06.293
> 
> 标签：java, webserver

我需要使用 Android 设备作为 Web 服务器，就像 Windows 的 WAMP 和 linux 的 LAMP 一样，这样我就可以使用设备的 IP 地址进行 HTTP 请求。我见过很多服务器，但我需要一个好的稳定的，有人一直在使用。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T20:08:19.027

如何使用，它将允许从战争文件部署应用程序。

[https://code.google.com/p/i-jetty/](https://code.google.com/p/i-jetty/)

# iphone - 我的 Apple Dev 帐户即将到期。我的配置文件是否仍允许我在 iOS 设备上测试我的应用程序？

> ID：14529559
> 
> 赞同：2
> 
> 时间：2013-01-25T20:07:21.823
> 
> 标签：iphone, ios, xcode, ipad, ios6

我在 App Store 中什么都没有，所以我不担心。我只是想知道如果我将这些配置文件本地存储在磁盘上，我是否仍然能够使用 Xcode 开发新应用程序并能够在实际设备上对其进行测试......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T20:10:08.613

不，因为如果您查看您的钥匙串，您会发现您的配置文件有一个到期日期，即您购买会员资格后的一年。您必须更新它才能在设备上进行测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T08:11:22.230

日期是 2013 年 2 月 18 日，自发布此问题的第二天起，我一直在我的所有设备上进行测试。

以防万一，我在 2013 年 1 月 25 日访问了配置门户并创建了一个新的配置文件，该配置文件将于 2014 年同一天到期。

因此，要回答最初的问题，是的，您可以在您的开发者帐户通过续订日期后在您的设备上进行测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T20:13:42.437

您的配置文件基本上是一个加密证书（不是真的，但可以这样理解），由 Apple 签名，允许 iOS 运行您的应用程序。证书上的到期日期（据我所知）与您的 Apple-Developer 帐户的到期日期相同。

所以，**不**。帐户过期后，您将无法测试您的应用程序。

# spring - 没有定义 [org.springframework.security.web.savedrequest.RequestCache] 类型的限定 bean

> ID：14529563
> 
> 赞同：0
> 
> 时间：2013-01-25T20:07:37.493
> 
> 标签：spring, spring-security

我的 spring 安全配置中有多个 http 块。从 Spring Security 3.1 版开始允许这样做。当我的 SpringSocial 配置尝试自动注入 RequestCache 对象时，就会出现问题。我收到以下错误：没有定义 [org.springframework.security.web.savedrequest.RequestCache] 类型的限定 bean：预期的单个匹配 bean 但找到了 3。如果我删除 Java 代码中对自动连接的 RequestCache 对象的引用，在我的 xml 配置中有三个 http 块是可以的。修复此错误的最佳方法是什么？有什么方法可以自动连接正确的 RequestCache？

xml http 块：

```
<http pattern="/oauth/token"...>
</http>

<http pattern="/something/**...>
</http>

<http use-expressions="true"...>
</http> 
```

在 Java Config 中，有一个对自动装配的 RequestCache 的引用：

```
@Bean
public ProviderSignInController providerSignInController(RequestCache requestCache) {
    return new ProviderSignInController(connectionFactoryLocator(), usersConnectionRepository(), new SimpleSignInAdapter(requestCache, userService));
} 
```

这些都不会单独引起问题。但是，具有多个 http 块和自动装配的 RequestCache 会导致：“没有定义 [org.springframework.security.web.savedrequest.RequestCache] 类型的合格 bean：预期的单个匹配 bean，但找到了 3”

任何人都可以帮助我正确配置它吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T20:58:31.490

问题是每个块都创建了自己的 RequestCache 实例。由于 RequestCache 的默认实现使用相同的数据存储（即 HttpSession），因此使用新实例仍将在块之间工作。但是，当您尝试使用自动装配时，它不知道要使用哪个实例。相反，您创建自己的 HttpSessionRequestCache 实例并使用它（就像 http 块一样）。例如：

```
@Bean
public ProviderSignInController providerSignInController() {
    RequestCache requestCache = new HttpSessionRequestCache();  
    return new ProviderSignInController(connectionFactoryLocator(), usersConnectionRepository(), new SimpleSignInAdapter(requestCache, userService));
} 
```

一种可行的替代方法是在配置中指定 RequestCache 并使用[request-cache 元素](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#nsa-request-cache)重用相同的实例。例如：

```
<bean:bean class="org.springframework.security.web.savedrequest.HttpSessionRequestCache"
        id="requestCache" />

<http pattern="/oauth/token"...>
    <request-cache ref="requestCache"/>
</http>

<http pattern="/something/**...>
    <request-cache ref="requestCache"/>
</http>

<http use-expressions="true"...>
    <request-cache ref="requestCache"/>
</http> 
```

由于只有一个 RequestCache 实例，您可以使用现有的 Java Config（即自动装配 RequestCache）。请注意，如果您愿意，可以在 Java Config 中而不是在 XML 中轻松创建 RequestCache。

# php - 我的 jquery 代码不起作用代码点火器

> ID：14529574
> 
> 赞同：0
> 
> 时间：2013-01-25T20:08:24.950
> 
> 标签：php, javascript, json, codeigniter, jquery

这是我的javascript代码...我在我的控制器中编写了一个函数，如果返回false，那么我将回显“userNo”，否则回显json..这是我的javascript，其中只有else部分有效，而不是如果部分......我也签入了萤火虫..我得到一个响应“userNo”但不知道为什么它没有运行第一部分

```
 <script type="text/javascript">

    $(document).ready(function(){
         $('#hide').hide();
        $('#bill_no').blur(function(){

            if( $('#bill_no').val().length >= 3 )
                {
                  var bill_no = $('#bill_no').val();
                  getResult(bill_no); 
                }
            return false;
        })
        function getResult(billno){
            var baseurl = $('.hiddenUrl').val();
           $('.check').addClass('preloader');
            $.ajax({
                url : baseurl + 'returnFromCustomer_Controller/checkBillNo/' + billno,
                cache : false,
                dataType: 'json',
                success : function(response){
                     $('.check').removeClass('preloader');

                    if (response == "userNo") //this part is not working
                        alert("true");
                    else
                    $('.check').removeClass('userNo').addClass('userOk');
                    // $(".text").html(response.result);
                     $('#hide').show();
                     $(".text1").html(response.result1);
                     $(".text2").html(response.result2);
                     $(".text3").html(response.result3);

                }
            })
        }
    })

  </script> 
```

我的控制器

```
 function checkBillNo($billno)
{
    $this->load->model('returnModel');

    $query = $this->returnModel->checkBillNo($billno);

    //$billno =   $this->uri->segment(3);
    $billno_results  = $this->returnModel->sale($billno);

    if (!$billno_results){

            echo "userNo";

    }else{
        echo json_encode($billno_results);

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T20:16:35.970

代替*echo "userNO"*，尝试使用它：

```
echo json_encode(array('return' => 'userNo')); 
```

...在你的 JS 中，使用这个：

```
if (response.return == "userNo") { // ... 
```

# regex - 将分层 data.frame 表示为嵌套列表

> ID：14529576
> 
> 赞同：2
> 
> 时间：2013-01-25T20:08:36.350
> 
> 标签：regex, r, recursion

如何将具有分层信息的 data.frame 转换为 JSON（或嵌套列表）？

假设我们有以下data.frame：

```
df <- data.frame(
  id = c('1', '1.1', '1.1.1', '1.2'), 
  value = c(10, 5, 5, 5)) 

#  id   value
#     1    10
#   1.1     5
# 1.1.1     5
#   1.2     5 
```

然后我想以以下 JSON 结尾：

```
{
 "id": "1",
 "value": 10,
 "children": [
  {
   "id": "1.1",
   "value": 5,
   "children": [
    {
     "id": "1.1.1", 
     "value": 5 
    }
   ]
  },
  {
   "id": "1.2",
   "value": 5
  }
 ]
} 
```

where`id`定义了层次结构，并且`.`是一个分隔符。

我的目的是能够轻松地将数据从 R 转换为分层 D3 可视化（例如[分区布局](http://mbostock.github.com/d3/talk/20111018/partition.html "分区布局")或[可缩放树形图](http://bost.ocks.org/mike/treemap/ "可缩放的树形图")）。如果可以添加更多“价值”列，那就太好了；例如`value`, `size`,`weight`等。

谢谢！

***编辑：**我恢复到原来的问题，所以更容易理解所有的答案（对不起所有的编辑）。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T20:13:12.590

我倾向于`RJSONIO`安装它：

```
R> df <- data.frame(id = c('1', '1.1', '1.1.1', '1.2'), value = c(10, 5, 5, 5)) 
R> RJSONIO::toJSON(df)
[1] "{\n \"id\": [ \"1\", \"1.1\", \"1.1.1\", \"1.2\" ],\n\"value\": [     10,      5,      5,      5 ] \n}"
R> cat(RJSONIO::toJSON(df), "\n")
{
 "id": [ "1", "1.1", "1.1.1", "1.2" ],
"value": [     10,      5,      5,      5 ] 
} 
R> 
```

这*不是您想要的输出，但 data.frame 中**不*存在所需的嵌套/层次结构。我认为，如果您将 data.frame 嵌套在列表中，您将到达那里。

**编辑：**对于您修改后的问题，这里是读取您指定的 JSON 的 R 输出：

```
R> RJSONIO::fromJSON("/tmp/foo.json")
$id
[1] "1"

$value
[1] 10

$children
$children[[1]]
$children[[1]]$id
[1] "1.1"

$children[[1]]$value
[1] 5

$children[[1]]$children
$children[[1]]$children[[1]]
$children[[1]]$children[[1]]$id
[1] "1.1.1"

$children[[1]]$children[[1]]$value
[1] 5

$children[[2]]
$children[[2]]$id
[1] "1.2"

$children[[2]]$value
[1] 5

R> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T07:39:18.727

一个可能的解决方案。

首先，我定义了以下函数：

```
# Function to get the number hierarchical dimensions (occurences of "." + 1)
ch_dim <- function(x, delimiter = ".") {
    x <- as.character(x)
    chr.count <- function(x) length(which(unlist(strsplit(x, NULL)) == delimiter))
    if (length(x) > 1) {
        sapply(x, chr.count) + 1
    } else {
        chr.count(x) + 1
    }
}

# Function to convert a hierarchical data.frame to a nested list
lst_fun <- function(ch, id_col = "id", num = min(d), stp = max(d)) {

    # Convert data.frame to character
    ch <- data.frame(lapply(ch, as.character), stringsAsFactors=FALSE)

    # Get number of hierarchical dimensions
    d <- ch_dim(ch[[id_col]])

    # Convert to list
    lapply(ch[d == num,][[id_col]], function(x) {
        tt <- ch[grepl(sprintf("^%s.", x), ch[[id_col]]),]
        current <- ch[ch[[id_col]] == x,]
        if (stp != num && nrow(tt) > 0) { 
            c(current, list(children = lst_fun(tt, id_col, num + 1, stp)))
        } else { current }
    })
} 
```

然后将 data.frame 转换为列表：

```
lst <- lst_fun(df, "id") 
```

最后是 JSON：

```
s <- RJSONIO::toJSON(lst) 
```

# wpf - stackpanel 中的按钮不会随着 Windows 应用商店应用程序拉伸

> ID：14529585
> 
> 赞同：0
> 
> 时间：2013-01-25T20:09:03.217
> 
> 标签：wpf, xaml, layout, windows-store-apps

当我在 Windows 应用商店项目中尝试使用 2 个按钮的简单堆栈面板时：

```
<Page ...>
    <StackPanel>
        <Button>Button 1</Button>
        <Button>Button 2</Button>
    </StackPanel>
</Page> 
```

按钮不会拉伸以填充水平空间，而在 WPF 项目中使用相同的代码，它们会拉伸：

```
<Window ...>
    <StackPanel>
        <Button>Button 1</Button>
        <Button>Button 2</Button>
    </StackPanel>
</Window> 
```

堆栈面板的行为方式有什么不同吗？或者 WPF 和 Metro 应用程序之间的布局系统总体上是否存在差异？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T21:47:23.247

这是`Button`控件默认样式的不同。

在 WPF 中，`Button`控件的默认样式（请参阅[http://msdn.microsoft.com/en-gb/library/ms753328.aspx](http://msdn.microsoft.com/en-gb/library/ms753328.aspx)）不包含用于 的设置器`HorizontalAlignment`，因此 WPF`Button`具有默认值`Stretch`.

但是，在 Windows 8 应用程序中，a 的默认样式`Button`显式设置`HorizontalAlignment`为`Left`. 我不知道这个默认样式是否在 MSDN 上的任何地方，但是，使用 Blend，我已经验证了`Button`的默认样式包含以下设置器：

```
 <Setter Property="HorizontalAlignment" Value="Left"/> 
```

当然，如果你想让 Windows 8 按钮填充水平空间，你可以随时写

```
 <Button HorizontalAlignment="Stretch">Button 1</Button>
    <Button HorizontalAlignment="Stretch">Button 2</Button> 
```

# android - 是什么导致“RuntimeException：二进制 XML 文件第 20 行：您必须提供 layout_height 属性。” （怀疑是ActionBarScherlock）？

> ID：14529590
> 
> 赞同：5
> 
> 时间：2013-01-25T20:09:24.183
> 
> 标签：android, android-layout, crash, actionbarsherlock, runtimeexception

我有带有 ActionBarScherlock 的应用程序，我使用 ACRA。我收到一些用户的崩溃报告，错误如下：

```
"java.lang.RuntimeException: Binary XML file line #20: You must supply a layout_height attribute.
    at android.content.res.TypedArray.getLayoutDimension(TypedArray.java:491)
    at android.view.ViewGroup$LayoutParams.setBaseAttributes(ViewGroup.java:3602)
    at android.view.ViewGroup$LayoutParams.<init>(ViewGroup.java:3554)
    at android.widget.AbsListView$LayoutParams.<init>(AbsListView.java:4322)
    at android.widget.AbsListView.generateLayoutParams(AbsListView.java:4116)
    at android.widget.AbsListView.generateLayoutParams(AbsListView.java:74)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
    at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:332)
    at android.widget.ArrayAdapter.getView(ArrayAdapter.java:323)
    at android.webkit.WebTextView$AutoCompleteAdapter.getView(WebTextView.java:650)
    at android.widget.AbsListView.obtainView(AbsListView.java:1430)
    at android.widget.AutoCompleteTextView$DropDownListView.obtainView(AutoCompleteTextView.java:1548)
    at android.widget.ListView.measureHeightOfChildren(ListView.java:1216)
    at android.widget.AutoCompleteTextView.buildDropDown(AutoCompleteTextView.java:1376)
    at android.widget.AutoCompleteTextView.showDropDown(AutoCompleteTextView.java:1140)
    at android.widget.AutoCompleteTextView.updateDropDownForFilter(AutoCompleteTextView.java:1022)
    at android.widget.AutoCompleteTextView.onFilterComplete(AutoCompleteTextView.java:1005)
    at android.widget.Filter$ResultsHandler.handleMessage(Filter.java:285)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:130)
    at android.app.ActivityThread.main(ActivityThread.java:3717)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:507)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:864)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:622)
    at dalvik.system.NativeStart.main(Native Method)" 
```

当然我试过google它，发现它很可能是由ActionBarScherlock引起的（我注意到遇到这个错误的每个用户都使用android 2.3.*）但还没有找到解决方案。我无法在我自己的 2.3.* 设备上重现此错误，这有点令人不安...

那么，是什么导致了这个错误呢？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-29T12:40:22.307

在我的情况下，这是由于 ActionBarsherlock 的问题。

在我的 Android 清单中，我有 android:theme="@style/AppTheme" 然后当你转到样式时，我看到我的 AppTheme 的父级是“AppBaseTheme”。这就是问题所在！

```
<style name="AppTheme" parent="AppBaseTheme"> 
```

我把它改成了

```
<style name="AppTheme" parent="Theme.Sherlock"> 
```

我的问题就解决了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T20:54:37.007

在`layout_height`这种情况下， 定义为`?attr/actionBarSize`which 是一个主题属性，其值`@dimen/action_bar_height`在三个位置定义：`values/`、`values-land/`和`values-sw600dp/`。

这通常是由修改过资源系统的 OEM 造成的，导致该链的某些方面无法正确加载。据我所知，我们真的无能为力。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T01:39:20.660

我有同样的问题，并通过更改来解决`AndroidManifest.xml`。您必须将特定活动或完整应用程序的主题设置为`Theme.Sherlock.Light`（我认为您只能指定`Theme.Sherlock`）。

在代码中它将是：

```
<application 
    ... 
    android:theme="@style/Theme.Sherlock.Light"> 
```

或者

```
<activity
    ... 
    android:theme="@style/Theme.Sherlock.Light"> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-09-09T18:51:05.503

我们的 #1 崩溃之一来自此问题，尤其是在 ZTE 设备上。虽然操作栏在大多数屏幕上都可以工作，但当用户与 Webview Edittext/InputBox 交互时，我们会遇到此崩溃。崩溃是由于 Webview 上的自动完成而发生的。禁用自动完成似乎可以消除崩溃。为什么自动完成应该与 Actionbar 有任何关系仍然是一个谜。

在这里，我们仅为 ZTE 设备禁用自动完成功能。如果我们在其他设备上遇到问题，我们可能会在稍后展开列表。

```
 public static boolean disableWebViewAutoCompleteForDevicesThatCrash(WebView webView)
{
    // We may add some other bizarre devices to this list if the ZTE fix works well.
    if ("ZTE".equals(Build.MANUFACTURER))
    {
        webView.getSettings().setSaveFormData(false);
        webView.clearFormData();
        return true;
    }
    else
    {
        return false;
    }
} 
```

# c# - 等待信号量的正确方法是什么？

> ID：14529592
> 
> 赞同：7
> 
> 时间：2013-01-25T20:09:29.207
> 
> 标签：c#, .net, multithreading, semaphore, waithandle

我认为下面的代码会让所有 10 个线程运行，一次运行两个，然后在`Release()`调用 10 次后打印“done”。但事实并非如此：

```
 int count = 0;

        Semaphore s = new Semaphore(2, 2);
        for (int x = 0; x < 10; x++)
        {
            Thread t = new Thread(new ThreadStart(delegate()
            {
                s.WaitOne();
                Thread.Sleep(1000);
                Interlocked.Increment(ref count);                       
                s.Release();
            }));
            t.Start(x);
        }

        WaitHandle.WaitAll(new WaitHandle[] { s });
        Console.WriteLine("done: {0}", count); 
```

输出：

```
done: 6 
```

如果实现我正在寻找的功能的唯一方法是将 a 传递`EventWaitHandle`给每个线程，然后`WaitAll()`在这些数组上执行 a ，那么在只有一个信号量的数组上`EventWaitHandles`执行 a 的含义是什么？`WaitAll()`换句话说，等待线程什么时候解除阻塞？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T20:38:48.003

`WaitHandle.WaitAll`只是等到所有处理程序都处于信号状态。

因此，当您调用**一个**`WaitHandle.WaitAll`时，它的工作方式与您调用的相同 **`WaitHandle``s.WaitOne()`**

 **例如，您可以使用以下代码等待所有启动的线程，但允许两个线程并行运行：

```
int count = 0;

Semaphore s = new Semaphore(2, 2);
AutoResetEvent[] waitHandles = new AutoResetEvent[10];
for (int x = 0; x < 10; x++)
    waitHandles[x] = new AutoResetEvent(false);

for (int x = 0; x < 10; x++)
{
    Thread t = new Thread(threadNumber =>
        {
            s.WaitOne();
            Thread.Sleep(1000);
            Interlocked.Increment(ref count);
            waitHandles[(int)threadNumber].Set();
            s.Release();
        });
    t.Start(x);
}

WaitHandle.WaitAll(waitHandles);
Console.WriteLine("done: {0}", count); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T20:38:28.187

`WaitHandle.WaitAll(new WaitHandle[] { s });`等待就像`s.WaitOne();`。它一有机会就进入。您似乎希望此调用等待所有其他信号量操作，但操作系统无法区分。该命令很可能是*第一个*被授予访问信号量的命令。

我认为你需要的是`Barrier`课堂。它是为 fork-join 风格的并行性而设计的。**

# arrays - 将 KnockoutJS 字段添加到更新前行的数组中

> ID：14529593
> 
> 赞同：1
> 
> 时间：2013-01-25T20:09:37.340
> 
> 标签：arrays, knockout.js

添加新行后，KO 'observable' 未发布。

**HTML**

```
<input type="text" data-bind="value: newName" />
<button data-bind="click: add">Create</button> 
```

**JS**

```
self.newName = ko.observable("");

self.add = function () {
    self.clients.push({
          Name : self.newName,
    })
} 
```

**LIST-开始**

```
<ul>
    <li>John</li>
    <li>Joe</li>
<ul> 
```

**LIST PRODUCED** 我使用这些字段并添加有效的“Foo”

```
 <ul>
        <li>John</li>
        <li>Joe</li>
        <li>Foo</li>
    <ul> 
```

然后我添加另一个名字'Bar'..现在我有（2）'Bar'，'Foo'被替换

```
<ul>
    <li>John</li>
    <li>Joe</li>
    <li>Bar</li>
    <li>Bar</li>
<ul> 
```

然后我添加另一个名称'JarJar'，现在我有（3）'JarJar'，'Bar'被替换

```
<ul>
    <li>John</li>
    <li>Joe</li>
    <li>JarJar</li>
    <li>JarJar</li>
    <li>JarJar</li>
<ul> 
```

但是，当我删除每一行时，它确实删除了选择行，而不是全部 3

添加行时如何停止可观察的“在字段上”？

我仍然需要将新添加的行添加到 KO 数组中，以便以后可以访问它。

我想我在 self.add 之后遗漏了一些东西，要么释放该字段的 observable，要么创建一个 = new 的东西，所以 newName 是一个单独的 Array 对象。（完全不确定..）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T20:13:44.523

由于缺少`()`，您传递的`Name`是`ko.observable`函数本身，而不是它所持有的值。

这就是为什么你有重复的原因，因为`clients`数组中所有创建的对象都共享对同一函数的引用。

这是应该正常工作的固定代码：

```
self.newName = ko.observable("");

self.add = function () {
    self.clients.push({
          Name : self.newName(),
    })
} 
```

# php - 去掉twitter之间的空格

> ID：14529596
> 
> 赞同：0
> 
> 时间：2013-01-25T20:09:56.447
> 
> 标签：php, css, wordpress

[这是我的博客](http://louismoore.net/wordpress/)……如果您查看它并查看侧栏，您可以看到我的推特提要。目前，如果我向某人发推文，那么它会像这样显示......
我的用户名：
他们的用户名
Tweet

我希望它更像
我的用户名：他们的用户名
Tweet

或者

我的用户名：
他们的用户名 - Tweet

查看页面的源代码实际上没有`<br>`显示...

```
 <li>@LouisMoore18:  <span class='entry-content'>
<a href="http://twitter.com/FirstNorwich" class="twitter-user">@FirstNorwich</a> thank you! Is there any delays to the x1? If so how long?</span> 
<span class='entry-meta'><span class='time-meta'><a href="http://twitter.com/LouisMoore18/statuses/293686943156416512"></a></span> 
<span class="in-reply-to-meta">
<a href="http://twitter.com/FirstNorwich/statuses/293686435482071040" class="reply-to">in reply to FirstNorwich</a></span></span></li> 
```

然而它的显示好像他们是一个

这是跟随我发推文的人的代码......

```
private function _linkTwitterUsersCallback( $matches ) {
    $linkAttrs = array(
        'href'  => 'http://twitter.com/' . urlencode( $matches[2] ),
        'class' => 'twitter-user'
    );
    return $matches[1] . $this->_buildLink( '@'.$matches[2], $linkAttrs );
} 
```

这是一个名为 Twitter Widget Pro 的 wordpress 插件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T20:16:00.733

这是因为您的名字包含在标题标签中。默认情况下，这将表现为“块”元素，因此具有换行效果。

查看您的样式表，为提要中的 h30 标签添加规则，将它们设置为 display: inline 应该可以解决问题。

看起来您下面的链接（标签）也需要调整才能显示：内联（或类似）。

您还可以查看提要的代码，更改它使用的 html 元素，但 CSS 可能是更容易且更易于维护的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T20:17:41.490

标题标签在您关闭它们时会自动添加换行符。

看看你的源代码。

```
<h30>
  @LouisMoore18: 
</h30><span class="entry-content">
  RT 
<a class="twitter-user" href="http://twitter.com/Jessewelle"></a>
  : This just happen! Nylah and Bamboo cuddling. 
<a href="http://t.co/pKJ3ZhD9"></a> 
```

重新排列您的标签，或更新您的样式表以将`<h30>`标签显示为内联。

另外，h30真的吗？

# c++ - openssl c++需要以十六进制格式显示公钥

> ID：14529600
> 
> 赞同：1
> 
> 时间：2013-01-25T20:10:21.307
> 
> 标签：c++, openssl, public-key

我可以使用一些帮助，我需要像双击证书时 Windows 一样显示公钥（见图）。谢谢。

我可以通过以下任一方式获取公钥：

RSA *pubKey = X509_get_pubkey( csc->current_cert )->pkey.rsa;

或者

EVP_PKEY *pubKey = X509_get_pubkey(csc->current_cert);

如果在某处找到此代码段，但我得到的值与 Windows 显示的值不同：

```
unsigned char enc_bin[1024] = {0};
int enc_len = 0;
unsigned char dec_bin[1024] = {0};
int dec_len = 0;

enc_len = RSA_size( pubKey );
memset( enc_bin, 1, enc_len );

if( 0 < ( dec_len = RSA_public_decrypt( enc_len, enc_bin, dec_bin, pubKey, RSA_NO_PADDING) ) )
{
    for (int i = 0; i < dec_len; i++)
    {
        CString str;
        if( 0 == i )
            str.Format( L"%02X", dec_bin[i] );
        else
            str.Format( L" %02X", dec_bin[i] );

        PubKey += str;
    }
} 
```

![在此处输入图像描述](../Images/3a96225214ee4fd33cb77cc75085cc32.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:32:22.657

我找到了答案，谢谢你的回复。

```
ASN1_BIT_STRING *pubKey = X509_get0_pubkey_bitstr(csc->current_cert); // csc->current_cert is an X509 struct

for (int i = 0; i < pubKey->length; i++)
{
    CString str;
    if( 0 == i )
        str.Format( L"%02X", pubKey->data[i] );
    else
        str.Format( L" %02X", pubKey->data[i] );

    PubKey += str;
} 
```

# jquery - 如何正确设置下拉菜单样式

> ID：14529608
> 
> 赞同：1
> 
> 时间：2013-01-25T20:10:48.043
> 
> 标签：jquery, html, css, drop-down-menu

我在设置下拉菜单样式时遇到了问题。一切正常，但我在我的 CSS 中有绝对定位（有效），但当我更改屏幕分辨率时它当然不能正常工作。我更像是程序员和设计师，所以我想寻求一些帮助:-) 这是我的菜单

```
<div class="navigation">
<!-- some links -->
    <div id="menu">
        <a href="gallery.html">Galerie</a>
        <div id="submenu">
            <a href="galleryOldRooms.html" title="Starší pokoje">Starší pokoje</a><br />
            <a href="galleryNewRooms.html" title="Novější pokoje">Novější pokoje</a>
        </div>
    </div>
</div> 
```

这是相关的CSS

```
#submenu {
   display: none;
   padding: 0px;
   margin-top: 5em;
   margin-left: 27.5em;
   position: absolute;
   left: 0px;
}
.nav a {
   border-right: 2px solid #161616;
   color: #CCC;
   float: left;
   font: bold 1em Verdana,sans-serif;
   line-height: 51px;
   padding: 0 20px;
} 
```

还有一段 JQuery 会退出

```
$(document).ready(function() {
    $("#menu").hover(function() {
        $("#submenu").fadeIn(); 
        }, 
    function() {
        $("#submenu").fadeOut();
    });
}); 
```

我该如何改进它以使其更加独立于浏览器和分辨率？感谢您的回答！

**编辑** 当我增加或减少显示器的分辨率或尝试在更大的屏幕上查看它时，下拉菜单会根据分辨率移动到左侧或右侧。这显然是我不知道的。[这](http://www.stavarov-ubytovna.cz)是链接，它还没有完成所以不要对我卑鄙:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T20:32:36.643

`#menu`必须有一个`position:relative;`

这样，`#submenu`将`position:absolute;`根据它的`#menu`和内部，`left:0px;`意味着它会粘在的左边框上`#menu`，这就是你想要的，不需要 a`margin-left`和 a ，如果它在**Galerie**`margin-top`下正确定位，只需添加`top:30px;`并测试它，也许你需要增加顶部或减少它。

 **```
#menu
{
    position:relative;
}
#submenu {
   display: none;
   padding: 0px;
   position: absolute;
   left: 0px;
   top:30px; //find the best value
} 
```

**更新**

当我说`#menu`必须有一个时`position:relative;`，我认为它`#menu`是一个仅包含`<a>` **Galerie**的 div ，如果不是这种情况，如果`#menu`包含所有 4 个链接：Uvod .. Cenik.. 等等......那当然是会坚持在开始。

你需要做的是为Galerie添加一个**特殊的div容器**，意味着......

```
<div id="menu">
   <a href="">Uvod</a>
   <a href="">Cenik</a>
   <div id="galerieParent">
       <a href="">Galerie</a>
       <div id="submenu">
          ......
       </div>
   </div>
   <a href="">Kontakt</a>
</div> 
```

现在，`position:relative;`必须为`#galerieParent`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T20:58:10.947

这里有很多问题。我已经修改了布局，使其更符合大多数开发人员设置此类菜单的方式。我还颠倒了您的大多数 ID 和类，它们的使用方式几乎可以保证重复的 ID。

这可能不是您问题的理想答案，但我认为其中有一些有用的信息。

[http://jsfiddle.net/mrPse/8/](http://jsfiddle.net/mrPse/8/)

```
#nav {
    position: relative;
}
#nav a {
    border-right: 2px solid #161616;
    color: #CCC;
    float: left;
    font: bold 1em Verdana, sans-serif;
    line-height: 51px;
    padding: 0 20px;
}
#nav > li {position: relative; display: inline-block;}
#nav li ul li a {border-right: 0;}
.submenu {
    display: none;
    padding: 0px;
    margin-top: 3em;
    position: absolute;
    left: auto;
    width: 180px;
}
.submenu li a {border-right: 0;}

<ul id="nav">
    <li><a href="index.html">Úvod</a></li>
    <li><a href="prices.html">Ceník</a></li>
    <li class="menu">
        <a href="gallery.html">Galerie</a>
        <ul class="submenu" style="display: none;">
            <li><a title="Starší pokoje" href="galleryOldRooms.html">Starší pokoje</a></li>
            <li><a title="Novější pokoje" href="galleryNewRooms.html">Novější pokoje</a></li>
        </ul>
    </li>
    <li><a href="contact.html">Kontakt</a>

    </li>
</ul>

$(".menu").hover(function () {
    $(this).children(".submenu").fadeIn();
}, function () {
    $(this).children(".submenu").fadeOut();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T20:30:02.390

你需要添加一些 CSS

```
#menu {position:relative;} 
```

和改变

```
#submenu {margin-left:14.5em;} 
```

根据需要进行调整。**

# jsf - 如何在 h:selectOneRadio 项目附近显示一些东西？

> ID：14529612
> 
> 赞同：1
> 
> 时间：2013-01-25T20:11:09.023
> 
> 标签：jsf, jsf-2, radio-button, selectoneradio

我有一些元素列表，可以生成我的`<h:selectOneRadio>`项目：

```
<h:selectOneRadio id="list#{cand.id}" value="#{mybean.value}" layout="pageDirection">
    <c:forEach items="#{mybean.list}" var="c">
        <f:selectItem id="first#{c.id}" itemlabel="#{c.surname}" itemValue="#{c.name}" />
    </c:forEach>
</h:selectOneRadio> 
```

我希望接下来每个元素都显示`<h:outputText>`为 value `#{c.id}`，以便每一行都是我的 radioButton 元素，然后是一些文本框。我该怎么做 ？

我尝试过这样的事情：

```
<h:selectOneRadio id="candidates1#{cand.id}" value="#{candidates.selectedCandidate1}" layout="pageDirection">
    <c:forEach items="#{candidates.c1}" var="cand">
        <td>
            <f:selectItem id="first#{cand.id}" itemlabel="#{cand.surname}" itemValue="#{cand.name}">
                <h:outputText id="c1ShortName#{cand.id}" value="#{cand.id}" />
            </f:selectItem>
        </td>
        <td>
            <h:outputText id="c1ShortName#{cand.id}" value="#{cand.id}" />
        </td>
    </c:forEach>
</h:selectOneRadio> 
```

但它会在最后一个 outputText 之后显示所有单选按钮。

我想要类似下面的截图。当正确的部分是例如 ID 时，它可以被加密和解密。

![在此处输入图像描述](../Images/109e71023e939baeb3a8f8287f86f69b.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T20:16:08.917

只需将其放在项目标签中即可。

```
itemlabel="#{c.id} #{c.surname}" 
```

或者反过来说，你并不清楚。

```
itemlabel="#{c.surname} #{c.id}" 
```

如有必要，您可以像这样使用 HTML，您应该只注意姓氏中的[XSS 攻击漏洞](https://stackoverflow.com/questions/7722159/csrf-xss-and-sql-injection-attack-prevention-in-jsf/7725675#7725675)。

```
itemlabel="#{c.surname} &lt;strong&gt;#{c.id}&lt;strong&gt;" itemEscaped="false" 
```

或者，如果您真的想让它们在生成的之外`<label>`，那么使用 3rd 方组件库。即不支持`<h:selectOneRadio>`。例如，战斧`<t:selectOneRadio>`有一个`layout="spread"`属性。

### 也可以看看：

*   [页面不同部分的单选按钮](https://stackoverflow.com/questions/5218019/radio-buttons-in-different-parts-of-the-page/5220093#5220093)
*   [<h:selectOneRadio> 渲染表格元素，如何避免这种情况？](https://stackoverflow.com/questions/7435039/jsf-2-0-hselectoneradio-renders-table-element/7435111#7435111)

* * *

**与具体问题无关**，您不需要那个`<c:forEach>`. 这很笨拙。只需使用`<f:selectItems var>`. 这是自 JSF 2.0 以来的新功能，也许您过于关注古老的 JSF 1.x 目标资源。

```
<h:selectOneRadio ...>
    <f:selectItems value="#{mybean.list}" var="c" 
        itemlabel="#{c.id} #{c.surname}" itemValue="#{c.name}" />
</h:selectOneRadio> 
```

### 也可以看看：

*   [我们的`selectOneMenu`维基页面](https://stackoverflow.com/tags/selectonemenu/info)

# vbscript - 如何访问不相关的浏览器窗口？

> ID：14529617
> 
> 赞同：0
> 
> 时间：2013-01-25T20:11:23.670
> 
> 标签：vbscript, applet, browser

所以我知道这听起来可能很疯狂，因为我理解这在技术上是一个安全问题。所以我只是想知道是否有关于如何处理这样的事情的任何想法。

无论如何，长话短说，我被告知要寻找一种可能的方法来从另一个浏览器窗口/选项卡中抓取信息。我被要求这样做是因为，而且我知道这听起来也很疯狂，但是我们网站的用户不够称职，无法从其他网站复制/粘贴和/或正确输入内容。我知道有些人在他们的工作流程中必须有几件事是很困难的，但这基本上是他们所做的：访问他们的第一个网站（登录后）并显示一个包含信息的记录......包括一个识别号. 然后，用户应该拿那个号码去第二个网站，我们的网站（登录后），然后在文本框中输入那个号码（最后做一些其他的事情）。但我们发现，从第一个网站获取我们的识别号对他们来说很困难。有些复制/粘贴正确，有些从页面复制/粘贴太多文本，有些写在纸上然后在我们的网站上输入，有些似乎只是在视觉上无法从一个站点到另一个站点“复制”数字。

我当时的想法是这可能会发生：用户已经在第一个站点上提出了记录，然后他们会来到我们的站点。他们可以单击一个按钮，然后运行我/我们在这里想出的任何东西，然后找到另一个浏览器窗口，找到所需的特定文本，并将其放入我们的文本框中。听起来很简单，对吧？哈。

第一个网站不以任何方式由我们拥有或管理，否则这可能会更容易一些。

一点背景信息：不幸的是，我在技术上的目标是 IE >= 10 到 9，所以如果有一个解决方案（为什么我标记 vbscript），那就太好了。如果有更广泛的解决方案（例如使用小程序或浏览器扩展... [http://crossrider.com/](http://crossrider.com/)），那就更好了，但并不重要。如果它有帮助，我们已经在访问操作系统的页面上有一个隐藏的小程序（是的，它`mayscript`在元素上具有属性，所以它能够），所以我认为这可能是一些可以合并的东西。此外，我希望通过 URL 和/或`document`标题知道要访问哪个窗口/选项卡的方式 - 要么非常具体。

我们不能在用户的计算机上安装东西，至少是浏览器之外的东西（比如扩展）。我不确定浏览器扩展是如何工作的，所以我想知道它们是否需要“安装”。

我知道 HTML5 的`postMessage`，但它在 IE 中只有部分支持（在 IE <= 7 中没有）......并且部分支持是指不包括我可能需要的确切内容。它还要求其他网站正在监听（我们无法控制，但从技术上讲可能包括在内）。所以不算数:)

我用 Java 找到的东西可能是找到当前正在运行的进程列表，但我不知道如何访问/控制一个。尤其是如何访问浏览器的 Document。

和 vbscript ......我只是不知道。我不知道是不是只有我一个人，但我似乎找不到关于它的好的文档，所以我不确定可以用它做什么。

即使我可以控制另一个浏览器窗口，我也不知道如何从中获取信息（如 DOM）。

我不是在寻找代码，只是在寻找想法......我会做研究。虽然这听起来不可能，但不要因为 Javascript 做不到而忽略它——我没有。

**更新：**

我最终使用[http://www.crossrider.com/](http://www.crossrider.com/)开发了一个浏览器扩展，这并不理想，但可以。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T21:09:49.130

您可以为此使用书签...用户必须将书签拖到浏览器上的书签栏中，但是如果这样做不超出您的用户的能力/您提到的技术限制，那么您会绝对能够以这种方式将您需要的信息发送回您的站点。

您只需要向您的用户提供以下说明：
i) 将小书签拖到他们浏览器上的书签栏中
ii) 转到相关网站并单击小书签

您可以对小书签进行编码，以便它获取您需要的信息，并将浏览器重定向到您的网站。一键完成。

当您谈论从一个“窗口”发布到另一个“窗口”时，我认为您可能会以错误的方式思考它。您可以编写小书签，以便它将您想要的任何信息从另一个站点发送到您的站点的 http 发布，它还可以将他们在单击它（另一个站点）时正在查看的窗口重定向到您的站点. 或者，如果出于某种原因，您不想将他们拥有“其他”站点的窗口重定向到您的站点，那么您可以向您的站点添加一个侦听器，以便一旦小书签发布了您需要的信息然后显示您的窗口会自动更新。第一个选项会更有意义并且更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T20:57:12.243

也许使用`window.open()` [方法](http://www.w3schools.com/jsref/met_win_open.asp)从驻留在您的站点中的按钮/链接打开另一个站点？

# kinect - SimpleOpenNI：处理中的多个 Kinect 和 enableScene()/sceneImage()

> ID：14529618
> 
> 赞同：1
> 
> 时间：2013-01-25T20:11:31.403
> 
> 标签：kinect, processing, openni, simple-openni

在处理中，我可以使用 SimpleOpenNI 从 2 个 Kinect 成功绘制深度图，但我现在尝试绘制 2 个“场景”（来自 enableScene() 与 enableDepth()）。两个 Kinect 都被检测到，但是当我绘制输出时，我看到同一个场景被绘制了两次（而使用 enableDepth() 总是给我 2 个不同的深度图像）。任何想法我做错了什么？提前致谢。

```
/* --------------------------------------------------------------------------
 * SimpleOpenNI Multi Camera Test
 * --------------------------------------------------------------------------
 */

import SimpleOpenNI.*;

SimpleOpenNI cam1;
SimpleOpenNI cam2;

void setup()
{
  size(640 * 2 + 10,480); 

  // start OpenNI, loads the library
  SimpleOpenNI.start();

  // init the cameras
  cam1 = new SimpleOpenNI(0,this);
  cam2 = new SimpleOpenNI(1,this);

  // set the camera generators ** HAD TO REVERSE ORDER FOR BOTH KINECTS TO WORK

  // enable Scene
  if(cam2.enableScene() == false)
  {
     println("Can't open the scene for Camera 2"); 
     exit();
     return;
  }

  // enable depthMap generation 
  if(cam1.enableScene() == false)
  {
     println("Can't open the scene for Camera 1"); 
     exit();
     return;
  }

  background(10,200,20);
}

void draw()
{
  // update the cams
  SimpleOpenNI.updateAll();

  image(cam1.sceneImage(),0,0);

  image(cam2.sceneImage(),640 + 10,0);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:10:20.863

我已经使用该`sceneMap()`功能完成了另一个文本，但看起来 SimpleOpenNI 内部没有正确更新确实存在问题：

```
/* --------------------------------------------------------------------------
 * SimpleOpenNI Multi Camera Test
 * --------------------------------------------------------------------------
 */

import SimpleOpenNI.*;

SimpleOpenNI cam1;
SimpleOpenNI cam2;

int numPixels = 640*480;
int[] sceneM1 = new int[numPixels];
int[] sceneM2 = new int[numPixels];
PImage scene1,scene2;

void setup()
{
  size(640 * 2 + 10,480 * 2 + 10); 

  // start OpenNI, loads the library
  SimpleOpenNI.start();

  // init the cameras
  cam1 = new SimpleOpenNI(0,this);
  cam2 = new SimpleOpenNI(1,this);

  // set the camera generators ** HAD TO REVERSE ORDER FOR BOTH KINECTS TO WORK

  // enable Scene
  if(cam2.enableScene() == false)
  {
     println("Can't open the scene for Camera 2"); 
     exit();
     return;
  }
//  cam2.enableDepth();//this fails when using only 1 bus

  // enable depthMap generation 
  if(cam1.enableScene() == false)
  {
     println("Can't open the scene for Camera 1"); 
     exit();
     return;
  }
  cam1.enableDepth();

  scene1 = createImage(640,480,RGB);
  scene2 = createImage(640,480,RGB);

  background(10,200,20);
}

void draw()
{
  // update the cams
  SimpleOpenNI.updateAll();

  image(cam1.depthImage(),0,0);
  image(cam1.sceneImage(),0,0);

  cam1.sceneMap(sceneM1);
  cam2.sceneMap(sceneM2);
  updateSceneImage(sceneM1,scene1);
  updateSceneImage(sceneM2,scene2);
  image(scene1,0,490);
  image(scene2,650,490);
}
void updateSceneImage(int[] sceneMap,PImage sceneImage){
  for(int i = 0; i < numPixels; i++) sceneImage.pixels[i] = sceneMap[i] * 255;
  sceneImage.updatePixels();
} 
```

使用类似的东西

```
cam1.update();
cam2.update(); 
```

而不是

```
SimpleOpenNI.updateAll(); 
```

不会改变任何东西。

[已提交问题](http://code.google.com/p/simple-openni/issues/detail?id=61)，希望能得到解决。同时，尝试在不同的语言/框架中使用 OpenNI。OpenFrameworks 与 Processing 有许多相似之处（老实说，也有许多不同之处，但它不是火箭科学）。尝试[xOpenNI 的实验性插件来测试多个摄像头](https://github.com/gameoverhack/ofxOpenNI/blob/experimental/examples/opeNI-SimpleExamples/src-ImageAndDepthMutltDevice-Medium/testApp.cpp)，希望它能解决您的问题。

# javascript - 如何使用 JSON 格式创建特定类型的 Javascript 对象？

> ID：14529620
> 
> 赞同：1
> 
> 时间：2013-01-25T20:11:54.570
> 
> 标签：javascript, json

我想将地图边界存储在 JSON 对象中。对于代码完成，我使用 JSDoc 声明了对象：

```
/**
 * @name MapBounds
 * @class MapBounds
 * This class represents a map boundary definition.
 *
 * @property {number} minLat Specifies the minimum latitude of the boundary.
 * @property {number} minLon Specifies the minimum longitude of the boundary.
 * @property {number} maxLat Specifies the maximum latitude of the boundary.
 * @property {number} maxLon Specifies the maximum longitude of the boundary.
 */ 
```

在创建 MapBounds 对象时，我的代码与此类似（此示例没有真正的纬度/经度值）：

```
var newMapBounds = MapBounds( {minLat: 50, minLon: 50, maxLat: 100, maxLon: 100} ); 
```

我使用 JSON 指定对象，然后将其转换为我需要的类型。有一个更好的方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T20:15:13.970

以下是您将如何构造具有该格式的 Json 对象（它只是一个 JavaScript 对象文字）

```
{
 minLat: 0, // Specifies the minimum latitude of the boundary
 minLon: 0, // Specifies the minimum longitude of the boundary
 maxLat: 0, // Specifies the maximum latitude of the boundary
 maxLon: 0  // Specifies the maximum longitude of the boundary
} 
```

在将 Json 对象提交到 Web 服务时，必须将其“映射”到类是非常典型的。如果您将 JSON 对象传递给请求并提供对象类型作为 Web 服务参数，某些框架（即 MVC .NET）将为您执行此操作。尽管如此，上述格式是您在 JavaScript 方面表示该结构的方式。

**编辑：** 这种从 JSON 对象到服务器端代码上指定类的映射要么由您在服务器上使用的框架（即 .NET / MVC）发生，要么您在服务器上手动执行。一旦您将 JSON 对象提交到服务器，服务器端代码就会接管，您不需要在事物的客户端（即 JavaScript）上记录事物的那一面

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T20:23:25.023

# ruby-on-rails - Rails：在保存之前加入多个临时字段

> ID：14529622
> 
> 赞同：0
> 
> 时间：2013-01-25T20:12:05.383
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms

所以基本上我有一个 Book 模型，其中包含如下信息

*   书名（字符串）
*   作者（字符串）
*   说明（文字）
*   等等

现在在前端我添加了动态添加更多作者字段的功能。在我命名的表单中`book[coauthor]`，所以如果我添加第二个作者，我会有一个字段`book[coauthor][name_0]`。

我想要实现的是将`book[author]`所有内容合并`book[coauthor][name_i]`为一个大字符串，并将每个名称用`,`. （即，`book[author]`作为“爱丽丝”和`book[coauthor][name_0]`“鲍勃”，我应该将“爱丽丝，鲍勃”保存`book[author]`在数据库中）

**第一个问题**：此时使用 Javascript 还是使用 Rails（在控制器中）更好？

**第二个问题**：目前我正在 Rails 控制器中执行此操作，但得到了`Can't mass-assign protected attribute 'coauthor'`. 但是我不想让它成为一个真正的属性，因为我只需要在将所有信息保存到`author`字段之前进行一些处理。我应该怎么办？

多谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T20:22:38.967

对于第一个问题：我没有看到任何令人信服的理由。JavaScript 可能会提供更多“实时”验证/修复该字段格式的能力，但我不确定这是否特别重要。

对于第二个问题：您无需将某物设为真实属性即可使其可访问。您可能已`coauthor`使用 将其创建为虚拟属性`attr_accessor`，但这不会自动将其添加到批量分配白名单中。为此，还将其添加到您的`attr_accessible`列表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T20:29:09.700

第一个问题有点牵强，你可能会遇到一些激烈的分歧，但我的看法是这样的。不是每个人都在启用 Javascript 的情况下运行，所以我确保我有办法通过 Rails 自己完成所有工作。

在这种情况下，它实际上很容易。

我建议的第一件事是不要将共同作者作为`params[:book]`. 相反，将它们作为`params[:coauthors]`. 然后在你的控制器中你可以这样做：

```
@book = Book.new(params[:book])
@book.author = ([@book.author] + [params[:coauthors]]).join(",")
@book.save 
```

实际上，更新 params[:book][:author] 可能会更好，因为这对`create`和都有效`update`。无论哪种方式，我希望这会有所帮助。

# ios - Objective C中几个不同视图控制器之间通信的正确方法

> ID：14529624
> 
> 赞同：1
> 
> 时间：2013-01-25T20:12:26.730
> 
> 标签：ios, objective-c, casting

直到今天，我有一个非常简单的应用程序。它有一个带有 3 个标签的标签栏视图控制器。中间的选项卡是一个相机，另外两个是表格视图。标签栏视图控制器是应用程序中所有数据的中心枢纽。所以从那里，我将一个表的数据数组设置为：

```
(PLEListViewController*)[self.viewControllers objectAtIndex:0] setList:newList]; 
```

显然，`PLEListViewController`是我的`UITableView`子类。

所以现在，我想将表格视图包装在 a 中`UINavigationController`，这非常简单。但是现在，那行代码变成了：

```
[(PLEListViewController*)((UINavigationController*)[self.viewControllers objectAtIndex:0]).topViewController setList:newList]; 
```

代码中有 15 行执行此操作，这并不令人愉快。

所以我的问题是：我错过了什么更优雅的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T23:02:33.433

很高兴您现在提出这个问题并看到这个问题。您的问题可以在您的问题中找到。“在 Objective C 中几个不同的视图控制器之间进行通信的正确方法”的答案是“不要”。具体来说，您的错误在这里：

> 标签栏视图控制器是应用程序中所有数据的中心枢纽。

视图控制器不应该保存应用程序中的任何数据。您的数据应该存在于您的模型类中。所有视图控制器都应该与模型类对话。他们应该很少互相交谈。这就是 MVC 的核心。

因此，您将“列表”（无论是什么，都无所谓）移动到所有视图控制器都知道的模型对象中。该模型对象可以是单例的，或者更好的是，它可以在创建视图控制器时传递给视图控制器。当事情发生变化时，你会改变模型。并在`viewWillAppear:`您更新视图控制器以匹配模型的当前状态。

永远不要假设视图控制器当前不在屏幕上时存在。如果您的设计要求存在非活动视图控制器，那么您的设计需要修复。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-25T21:24:26.390

您需要使用您的架构。制定适当的数据源和委托协议，以确保您的类可以匿名通信。您目前拥有的东西非常不灵活，并且随着您的应用程序的增长/变化，它会变得更糟。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T23:05:12.853

您希望使事情更加松散耦合，而不是在代码中对对象之间的链接进行显式遍历。

假设您有一个数据模型显示在应用程序的各个位置，我认为有两种方法可以帮助...

一种是使用您的视图控制器层次结构。例如，使用`[ self enclosingTabBarController ]`查找您最近的父标签栏控制器并获取它的数据模型属性。`-enclosingTabBarController`用更适合您的应用程序的方法代替。

另一种方法是“作为单例的数据模型”方法。为此，您可以

*   将数据移动到您的应用程序委托并通过以下方式访问它`((MyApplicationDelegateClass*)[ UIApplication sharedApplication ].delegate).dataModel`

或者

*   为您的应用程序提供一个单例数据模型对象，并通过以下方式访问它`[ MyDataModelClass sharedModel ]`

无论如何，您正在转向更松散的耦合，这需要较少显式地遍历应用程序中对象之间的链接。少即是多！

# javascript - 使用 hyphenator.js 在 dompdf 中进行连字符

> ID：14529625
> 
> 赞同：0
> 
> 时间：2013-01-25T20:12:32.513
> 
> 标签：javascript, dompdf, hyphenation

我一直试图让连字符在 dompdf 中工作。我的想法是在我提供给 dompdf 的 html 上使用 hyphenator.js。

到目前为止，我已经尝试了以下方法：

1.  `<script src`在标头中包含 hyphenator.js 文件
2.  `<script src`在正文中包含 hyphenator.js 文件
3.  将连字符源代码直接包含在正文中

当我在浏览器中呈现页面时，hyphenator.js 在所有三种情况下都能完美运行。然而它在 dompdf 中根本不起作用。我错过了什么吗？

这真的很重要，因为我还需要使用 JavaScript 来动态绝对放置内容。

如果 JavaScript 根本不起作用，还有其他连字符选项吗？

非常感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T18:41:18.333

dompdf 不运行 JavaScript。如果您需要这种类型的功能，您有两种选择：

1.  在您的网络浏览器中加载文档，并在应用连字符后使用 JS 捕获内容并将其发送到服务器以由 domopdf 呈现。当然，这只有在您的文档的网络布局适当地模仿打印布局（例如文本行宽）时才有效。
2.  使用基于浏览器的 PDF 渲染器，例如[wkhtmltopdf](http://code.google.com/p/wkhtmltopdf/)

理想情况下，您不需要为此使用 JS 库。CSS3 规范[支持连字符](http://dev.w3.org/csswg/css3-text/#hyphens)。但是，这还不是 dompdf 中解决的问题。

# grails - Grails：在 Webflow 结束时将参数从控制器传递到控制器

> ID：14529628
> 
> 赞同：0
> 
> 时间：2013-01-25T20:12:49.317
> 
> 标签：grails, groovy, grails-2.0

是否可以在 Webflow 结束时在重定向中传递“参数”？基本上这个变量或参数从控制器传递到控制器的目的是这样的，我希望**只有**在流程完成后才能在视图页面上使用变量或 ${param.xyz}。

```
 class Example1Controller{
    def startFlow = {
        begin {
        ....
        }
        ....
        ....    
        finished {
            action {
                flash.message = 'success'
            }
            redirect(controller: 'example2', action: 'myaccount', params: [author: "Stephen King"])
        } 
     }
  } 
```

其他控制器

```
 class Example2Controller{
     def myaccount() {
         def here = $params.author
         return [me:here]
     }
 } 
```

普惠制视图

```
 <html>
     <body>
         <g:if test="${params.me}">
             <p>This is what I want to display: **${me}**</p>
             <p>But it must come from the first controller, from the flow.</p>
         </g:if>
     </body>    
 </html> 
```

基本上所有这些变量从控制器传递到控制器的目的是这样的。我希望只有在流程完成后才能在视图页面上使用变量或 ${param.}。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T02:34:44.943

如果我没记错的话，我们之前做过这个，但是我们使用了流范围/流变量。就像是：

```
def myFlow = {
    fin {
        redirect: (controller: "xxx", action: "yyy", params: [someValue: flow.someValue])
    }
} 
```

然后，在接收端，类似：

```
def yyy = {
    [ aaa: params.someValue ]
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T15:37:36.983

您可以使用[**hiddenField**](http://grails.org/doc/latest/ref/Tags/hiddenField.html)。

```
<g:hiddenField name="myField" value="myValue" /> 
```

您可以将值从**Example1Controller**传递给**Example1Gsp**（作为 hideenField），然后从该 GSP 中您可以在**Example2Controller**中获得值。

# python - 为什么 Twisted Manhole ConnectionDone 是一个错误？

> ID：14529630
> 
> 赞同：3
> 
> 时间：2013-01-25T20:12:50.657
> 
> 标签：python, twisted

我正在使用扭曲的沙井（https://github.com/HoverHell/pyaux/blob/master/pyaux/runlib.py#L126），我还将 Twisted 捕获的错误发送到 python 日志记录（https://github. com/HoverHell/pyaux/blob/master/pyaux/twisted_aux.py#L9）。

但是，结果，日志会`ConnectionDone()`出现错误，这作为*error*并不是一件很有趣的事情。

为了避免出现这种（可能还有其他一些）不完全错误的错误，应该进行哪些更改？过滤`twisted.python.failure.Failure`案例，也许？ConnectionDone() 甚至从哪里提出来，为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-27T00:04:07.287

ConnectionDone() 实例在连接关闭后提供给 connectionLost() 回调。当客户端决定关闭连接时，您应该会看到这一点。您绝对不想将失败过滤掉。您可以将失败视为异常的“异步类比”。通常要做的事情，而不是看到某种异常是这样的：

```
from twisted.internet import error

...

def connectionLost(self, reason):
    if reason.check(error.ConnectionDone):
        # this is normal, ignore this
        pass
    else:
        # do whatever you have been doing for logging 
```

# python - 用于在不同字符类型之间插入空格的 Python 脚本：为什么 *so* 这么慢？

> ID：14529633
> 
> 赞同：0
> 
> 时间：2013-01-25T20:13:08.623
> 
> 标签：python, optimization, nlp

我正在处理一些混合语言的文本，我已经对其进行了一些处理，并且采用单个字符列表（称为“字母”）的形式。我可以通过简单地测试它是否有大小写来判断每个字符是哪种语言（使用一个名为“test_lang”的小函数）。然后我想在不同类型的字符之间插入一个空格，所以我没有任何混合字符类型的单词。同时，我想在单词和标点符号之间插入一个空格（我在一个名为“punc”的列表中定义）。我编写了一个脚本，它以一种非常直接的方式执行此操作，这对我来说很有意义（如下），但显然是**错误**的方式，因为它非常慢。

谁能告诉我更好的方法是什么？

```
# Add a space between Arabic/foreign mixes, and between words and punc
cleaned = ""
i = 0
while i <= len(letters)-2: #range excludes last letter to avoid Out of Range error for i+1
    cleaned += letters[i]
    # words that have case are Latin; otherwise Arabic
    if test_lang(letters[i]) != test_lang(letters[i+1]):
        cleaned += " "
    if letters[i] in punc or letters[i+1] in punc:
        cleaned += " "
    i += 1
cleaned += letters[len(letters)-1] # add in last letter 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T20:20:39.110

这里发生了一些事情：

*   你调用`test_lang()`字符串中的每个字母两次，这可能是它慢的主要原因。
*   在 Python 中连接字符串效率不高，您应该使用列表或生成器，然后使用[`str.join()`](http://docs.python.org/2/library/stdtypes.html#str.join)(最有可能, `''.join()`)。

这是我将采用的方法，使用[`itertools.groupby()`](http://docs.python.org/2/library/itertools.html#itertools.groupby)：

```
from itertools import groupby
def keyfunc(letter):
    return (test_lang(letter), letter in punc)

cleaned = ' '.join(''.join(g) for k, g in groupby(letters, keyfunc)) 
```

这会将字母分组为相同语言的连续字母，无论它们是否是标点符号，然后`''.join(g)`将每个组转换回一个字符串，然后`' '.join()`组合这些字符串，在每个字符串之间添加一个空格。

此外，正如 DSM 在评论中所述，请确保这`punc`是一个集合。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T20:18:40.343

每次执行字符串连接时，都会创建一个新字符串。字符串越长，每个连接所用的时间就越长。

[http://en.wikipedia.org/wiki/Schlemiel_the_Painter's_algorithm](http://en.wikipedia.org/wiki/Schlemiel_the_Painter%27s_algorithm)

您最好声明一个足够大的列表来存储输出的字符，然后在最后加入它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T20:26:13.253

我建议一个完全不同的解决方案，应该非常快：

```
import re
cleaned = re.sub(r"(?<!\s)\b(?!\s)", " ", letters, flags=re.LOCALE) 
```

这会在每个单词边界处插入一个空格（将单词定义为“字母数字字符序列，包括当前语言环境中的重音字符”，这在大多数情况下都应该有效），除非它是空格旁边的单词边界。

这应该在拉丁字符和阿拉伯字符之间以及拉丁和标点符号之间分开。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T23:36:39.927

假设`test_lang`不是瓶颈，我会尝试：

```
''.join(
    x + ' '
    if x in punc or y in punc or test_lang(x) != test_lang(y)
    else x
    for x, y in zip(letters[:-1], letters[1:])
) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-25T23:53:54.867

这是一个使用`yield`. 我很想知道这是否比您的原始解决方案运行得更快。

这避免了原始索引中的所有索引。它只是遍历输入，保留一个前一个字符。

如果您的需求在未来发生变化，这应该很容易修改。

```
ch_sep = ' '

def _sep_chars_by_lang(s_input):
    itr = iter(s_input)
    ch_prev = next(itr)

    yield ch_prev

    while True:
        ch = next(itr)
        if test_lang(ch_prev) != test_lang(ch) or ch_prev in punc:
            yield ch_sep
        yield ch
        ch_prev = ch

def sep_chars_by_lang(s_input):
    return ''.join(_sep_chars_by_lang(s_input)) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-26T02:18:53.480

保留 OP 原始代码的基本逻辑，我们通过不执行所有 [i] 和 [i+1] 索引来加速它。我们使用**prev**和**next**引用来扫描字符串，在**next后面保持****prev**一个字符：

 **```
# Add a space between Arabic/foreign mixes, and between words and punc
cleaned = ''
prev = letters[0]
for next in letters[1:]:
    cleaned += prev
    if test_lang(prev) != test_lang(next):
        cleaned += ' '
    if prev in punc or next in punc:
        cleaned += ' '
    prev = next
cleaned += next 
```

对 1000 万个字符的字符串进行测试表明，这大约是 OP 代码速度的两倍。正如其他人指出的那样，“字符串连接很慢”的抱怨已经过时了。使用 ''.join(...) 隐喻再次运行测试显示执行速度比使用字符串连接要慢一些。

不调用 test_lang() 函数，而是通过内联一些简单的代码，可以进一步加快速度。无法发表评论，因为我真的不知道 test_lang() 做了什么:)。

编辑：删除了一个不应该存在的“return”语句（测试残余！）。

编辑：也可以通过不在同一个字符上两次调用 test_lang() 来加速（在一个循环中的下一个循环中，然后**在下一个****循环**中的上一个循环中）。缓存 test_lang(next) 结果。**

# algorithm - 3D多边形与立方体的交集算法

> ID：14529635
> 
> 赞同：2
> 
> 时间：2013-01-25T20:13:21.780
> 
> 标签：algorithm, geometry

我需要一个快速算法来检查 3D 多边形（共面的 3D 坐标列表，给定逆时针或顺时针顺序的点列表，多边形可以是凸的或凹的，换句话说，它必须是不相交的简单多边形）和一个**立方体**（给定左下角和右上角的坐标，立方体边缘与 X/Y/Z 轴对齐）相交。

有什么快速的方法可以做到这一点吗？谢谢.. 我用谷歌搜索了几页，但还没有找到完全相同的东西。

非常感谢..

**编辑** 对不起，当我说“盒子”时，我的意思是“立方体”。一个立方体被定义为两个角点。左下角和右上角（或另一对，没关系）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T21:01:41.390

1.  检查多边形和框的每一侧之间的多边形-多边形相交。
2.  检查是否有任何多边形的点在框内。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-25T20:28:55.627

以下是一些应该有效的测试

1.  检查框内是否有 1 个或多个多边形点，但不是全部。
2.  检查多边形的任何边缘是否与框的边缘相交。
3.  检查多边形的任何面是否与盒子的面相交。

如果上述任何一个成立，那么它们相交。列出的所有区域可能都值得麻烦测试它们，因为提取面部并计算它们是否相交可能无法在线性时间内完成。

# c# - 在 ApplicationShouldTerminate 上刷新 UI

> ID：14529636
> 
> 赞同：2
> 
> 时间：2013-01-25T20:13:25.993
> 
> 标签：c#, cocoa, mono, monomac

当我尝试更新按钮的文本以退出应用程序时，我遇到了麻烦。

`ApplicationShouldTerminate`方法是这样的：

```
 public override NSApplicationTerminateReply ApplicationShouldTerminate (NSApplication sender)
    {
        this.mainWindowController.EndApp();
        return NSApplicationTerminateReply.Now;
    } 
```

`EndApp()`方法是这样的：

```
 public void EndApp ()
    {
        this.testButton.Title="Closing App";
        //long time process
        for (int i = 0; i < 1000000; i++) {
            int a=1;
        }
    } 
```

我怎样才能让应用程序刷新 UI 控件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T20:19:17.350

您可以`Application.DoEvents()`在标题更改后或在 for 循环中添加一个，具体取决于您是否正在进行其他操作。这会强制应用程序处理队列中的事件，在这种情况下，这将是您的标题的文本更改。

```
public void EndApp ()
    {
        this.testButton.Title="Closing App";
        Application.DoEvents();
        //long time process
        for (int i = 0; i < 1000000; i++) {
            int a=1;
            //or if you're processing stuff
            Application.DoEvents();
        }
    } 
```

# javascript - EXT JS：控制台没有输出

> ID：14529637
> 
> 赞同：0
> 
> 时间：2013-01-25T20:13:30.407
> 
> 标签：javascript, model-view-controller, web-applications, extjs

我正在使用该`EXT JS`框架开发一个非常简单的 Web 应用程序。`console`通常我可以判断何时出现问题，因为它会在 Firefox`FireBug`或 Chrome 的输出中给出某种错误通知`Inspect Element`。但是，现在当我加载我的 Web 应用程序时，屏幕上没有呈现任何内容，也没有任何`console`输出可以为我提供一些关于出了什么问题的指导。

`console`在没有日志的情况下，我可以采取哪些一般步骤来查找问题的根源？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T20:17:14.800

检查 Ext.define 中的所有文件路径。

# javascript - 下拉菜单不起作用

> ID：14529646
> 
> 赞同：0
> 
> 时间：2013-01-25T20:14:18.880
> 
> 标签：javascript, html, function, drop-down-menu

我有一个下拉菜单，它应该与四个不同的菜单选项一起使用，每个选项都给定相同的类。但是我的代码不起作用。我希望它适用于 chrome 和 IE。它崩溃的情况在我的 init 方法中。控制台抱怨如下：对象＃没有方法'getElementsByTagName'。有什么解决办法吗？

```
function hideorShowField(list) {
    var nodes = list.getElementsByTagName("li");
    for (i = 1; i < nodes.length; i++) {
        if (nodes[i].style.display == 'none') {
            nodes[i].style.display = 'block';
        }
        else {
            nodes[i].style.display = 'none';
       }
    }
}

function init() {
    var list = document.getElementsByClassName("undermeny");
    list1.getElementsByTagName("li")[0].onclick = function () {
        hideorShowField(list);
    };
}

window.onload = init; 
```

我的html代码：

```
<ul class="undermeny" >
<li>Opinion</li>
<li><a href="#">Ledare</a></li>
<li><a href="#">Aktuella frågor</a></li>
<li><a href="#">Per T Ohlsson</a></li>
<li><a href="#">Magda Forsberg</a></li>
</ul>

<ul class="undermeny" >
<li>Lokalt/Globalt</li>
<li><a href="#">Malmö</a></li>
<li><a href="#">Lund</a></li>
<li><a href="#">Limhamn</a></li>
<li><a href="#">Burlöv</a></li>
<li><a href="#">Eslöv</a></li>
<li><a href="#">Höör</a></li>
<li><a href="#">Kävlinge</a></li>
<li><a href="#">Lomma</a></li>
<li><a href="#">Svedala</a></li>
<li><a href="#">Staffanstorp</a></li>
<li><a href="#">Trelleborg</a></li>
<li><a href="#">Vellinge</a></li>
<li><a href="#">Sverige</a></li>
<li><a href="#">Öresund</a></li>
<li><a href="#">Världen</a></li>
<li><a href="#">Väder</a></li>
</ul>

<ul class="undermeny" >
<li>Ekonomi</li>
<li><a href="#">Nyheter</a></li>
<li><a href="#">Privata pengar</a></li>
<li><a href="#">Börs</a></li>
<li><a href="#">Fonder</a></li>
</ul>

<ul class="undermeny">
<li>Sport</li>
<li><a href="#">Fotboll</a></li>
<li><a href="#">Ishockey</a></li>
<li><a href="#">Handboll</a></li>
<li><a href="#">Fridrott</a></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T20:20:51.930

`getElementsByClassName()`返回 a`nodeList`和`getElementsByTagName()`。所以你可能需要这个：

```
list[0].getElementsByTagName("li")[0].onclick = function () {...}; 
```

或者您必须遍历s`list`以将事件处理程序附加到 s 中的所有第一个`li`元素`ul`class `undermeny`。这将是这样的：

```
for (var n = 0; n < list.length; n++) {
    list[n].getElementsByTagName("li")[0].onclick = function () {...};
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T20:26:52.287

`list1`尚未初始化（尽管`list`已）。修正错字，然后您可以遍历 中的项目`list`，调用`getElementsByTagName()`每个项目。

# graphics - 无限和的分形生成

> ID：14529649
> 
> 赞同：1
> 
> 时间：2013-01-25T20:14:24.633
> 
> 标签：graphics, infinite, fractals

我在计算机图形课程网站上找到了项目描述。我正在尝试完成这个项目以获得乐趣。

以下是问题描述的链接：

[http://www.pdfhost.net/index.php?Action=Download&File=901bc7785bef41364b3a40f6f4493926](http://www.pdfhost.net/index.php?Action=Download&File=901bc7785bef41364b3a40f6f4493926)

下面是我的代码。我遇到的问题是该系列的条款增长如此之快，我无法将点正确映射到屏幕。从问题描述中可以看出，这些点可以在 -2 - 2 正方形内映射，但点之间的值差异如此之大，以至于按最大值归一化会将大多数点折叠为单个像素。

我想我有一个我无法识别的基本误解。任何帮助或见解将不胜感激！

```
int w = 800, h = 600;
int numTimes = 10, cSize = 5;
float xr = 2, yr = 2;

void setup() {
  size(w,h);
}

void draw() {
  background(255);

  Complex v = new Complex(mouseX*(xr/w) - (xr/2), mouseY*(yr/h) - (yr/2));  
  Complex[] exps = new Complex[numTimes];

  for (int i = 0; i < numTimes; i++) {
    exps[i] = complexExp(v,i);
  }

  ellipse(w/2, h/2, cSize, cSize);
  for (int i = 0; i < numTimes; i++) {
    drawSeries(new Complex(0,0), exps, i, i);
  }
}

void drawSeries(Complex vToDraw, Complex[] exps, int count, int clrTrunc) {
  if (count == 0) {
    Complex v = exps[0];   

    float progress = float(clrTrunc) / float(numTimes);
    fill(255*progress, 180, 255 - 255*progress);

    vToDraw.add(v);
    ellipse(vToDraw.r*(w/xr) + (w/2), vToDraw.i*(h/xr) + h/2, cSize, cSize);
    vToDraw.sub(v);
    vToDraw.sub(v);
    ellipse(vToDraw.r*(w/xr) + (w/2), vToDraw.i*(h/xr) + h/2, cSize, cSize);
  } else {
    Complex v = exps[count];

    vToDraw.add(v);
    drawSeries(vToDraw, exps, count - 1, clrTrunc );
    vToDraw.sub(v);
    vToDraw.sub(v);
    drawSeries(vToDraw, exps, count - 1,clrTrunc );
  }
}

Complex complexExp(Complex v, int times) {
  if (times == 0) {
    return new Complex(1, 1);
  } else if ( times == 1) {
    return new Complex( v.r*v.r - v.i*v.i, 2*v.r*v.i );
  } else {
    return complexExp( new Complex( v.r*v.r - v.i*v.i, 2*v.r*v.i ), times - 1 );
  }
}

class Complex {
  float r, i;

  Complex() {
    this.r = 0;
    this.i = 0;
  } 

  Complex(float r, float i) {
    this.r = r;
    this.i = i;
  }

  void add(Complex nv) {
      this.r += nv.r;
      this.i += nv.i;
  }

  void sub(Complex nv) {
      this.r -= nv.r;
      this.i -= nv.i;
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T22:07:22.413

我认为如果您编写一个更完整的 Complex 类，您可以使代码更清晰。

```
int w = 800, h = 600;
int numTimes = 10, cSize = 5;
float xr = 3, yr = 3;

void setup() {
  size(w,h);
  noLoop();
}
void mousePressed() {
  redraw();
}

void draw() {
  background(255);

  Complex v = new Complex(mouseX*(xr/w) - (xr/2), mouseY*(yr/h) - (yr/2));  
  Complex[] exps = new Complex[numTimes];

  for (int i = 0; i < numTimes; i++) {
    exps[i] = v.raisedTo(i);
    print(exps[i]);
  }

  ellipse(w/2, h/2, cSize, cSize);
  print(exps);
  drawSerie(exps, numTimes);
}

void drawSerie(Complex[] exps, int total)
{
  Complex partial = new Complex(0, 0);
  drawPartial(exps, total -1, partial);
}

void drawFinal(Complex toDraw)
{
   point(toDraw.r*(w/xr) + (w/2), toDraw.i*(h/xr) + h/2);
}

void drawPartial(Complex [] exps, int depth, Complex partial)
{
  if (depth == -1)
  {
    drawFinal(partial);
    return;
  }
  int nextDepth = depth -1;
  drawPartial(exps, nextDepth, partial);
  Complex element = exps[depth];
  drawPartial(exps, nextDepth, partial.add(element));
  drawPartial(exps, nextDepth, partial.sub(element));
}

class Complex {
  float r, i;

  Complex() {
    this.r = 0;
    this.i = 0;
  } 

  Complex(float r, float i) {
    this.r = r;
    this.i = i;
  }

  Complex(Complex other)
  {
    this.r = other.r;
    this.i = other.i;
  }

  Complex mult(Complex other)
  {
    return new Complex(this.r*other.r - this.i*other.i, this.r*other.i + this.i*other.r);
  }

  Complex add(Complex nv) {
      return new Complex(this.r + nv.r, this.i + nv.i);
  }

  Complex sub(Complex nv) {
      return new Complex(this.r - nv.r,  this.i - nv.i);
  }

  Complex raisedTo(int n) {
  if (n == 0) {
    return new Complex(1, 0);
  }
    else if (n % 2 == 0)
  {
    return (this.mult(this)).raisedTo(n/2);
  } 
  else 
  {
    return this.mult(this.raisedTo(n - 1 ));
  }

}
  String  toString()
  {
    return "real: " + this.r + " imaginary: " + this.i;
  }
} 
```

该系列的计算效率不高，但我认为很明显

# jsp - 无法找到将我的 java 包文件夹放入 tomcat 7 的文件夹

> ID：14529655
> 
> 赞同：0
> 
> 时间：2013-01-25T20:14:55.680
> 
> 标签：jsp

我刚刚下载并安装了 JDK1.7.0_11 和 Apache Tomcat Server 7。我用谷歌搜索并成功配置了它们以开发 jsp 应用程序。现在我创建了一个包含我定义的一些类的包。我不知道将这个包文件夹放在tomcat中的哪个位置。请帮帮我。谢谢

**打包 mypack**

```
package mypack;

public class Test{

    private String msg; 

    public void setMsg(String msg){
             this.msg = msg;
    }
    public String getMsg(){
             return msg;
    }

} 
```

**索引.jsp**

```
<%@ page import="java.sql.*, mypack.*"%>

<%
Test t = new Test();
t.setMst("Hello World");
out.println(t.getMst());

%> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T20:18:14.797

如果你的包是一个war文件，你可以把它放在`<tomcat_home>/webapps/`目录下（见[http://tomcat.apache.org/tomcat-7.0-doc/deployer-howto.html#Deployment_on_Tomcat_startup](http://tomcat.apache.org/tomcat-7.0-doc/deployer-howto.html#Deployment_on_Tomcat_startup)）。

请注意，您也可以在此目录（即包含此war 文件内容的目录）中放置“爆炸战争”。

**编辑**：根据您更新的问题，我认为正确的布局是这样的：

```
<tomcat root>/webapps/appname/
<tomcat root>/webapps/appname/WEB-INF/classes/mypack/Test.class
<tomcat root>/webapps/appname/index.jsp 
```

你用什么工具来写你的文件？如果您使用的是 IntelliJ、Netbeans 或 Eclipse 等 Java IDE，您应该看看它们如何帮助您管理 Web 应用程序。他们可以自动创建此目录结构，甚至可以立即将其部署在 tomcat 服务器上。

请查看本教程，了解如何[在 Netbeans 中开发一个简单的 Web 应用程序](http://netbeans.org/kb/docs/web/quickstart-webapps.html)，它与您尝试做的非常相似。

# sql - sql更新后看不到所有行

> ID：14529657
> 
> 赞同：0
> 
> 时间：2013-01-25T20:15:14.923
> 
> 标签：sql

我正在尝试根据使用 TransactionDetail 和 SalesDetail 表中的字段的公式在我的 TransactionDetail 表中设置 AmountOwed 的值。内部 Select 查询有效并返回预期值。使用的字段有以下几种：

```
TotalTender - money
PriceEntered - money
TaxRate - float 
```

----- SQL查询 -----

```
Update [POSDatabase].[dbo].[TransactionDetail]

    Set AmountOwed =  
    (Select (TotalTender - (Select sum(PriceEntered+(PriceEntered*TaxRate*.01)) 
                            from POSDB.dbo.SalesDetail as Sales 
                            where Sales.TransactionID = Trans.ID))

    From POSDB.dbo.TransactionDetail as Trans

    Where TransactionDetail.ID = Trans.ID)

    Where ID = 4207 
```

----- 结束 SQL 查询 -----

当我运行此查询时，它说它影响了 1 行，但是当我尝试查看表（从表中选择 *）时，查询只是旋转。奇怪的是，如果我向下滚动，它显示的所有记录最多比此查询中标识的 ID 少 5-6。

我想也许我的数据类型不匹配，但是在执行 CONVERT 或 CAST 以将结果更改为货币类型之后，也会发生同样的事情。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T21:00:55.207

我很难跟踪您的查询，但我认为如果我理解正确的话，这样的事情可能会奏效。

```
;with s (TransactionID, total) as (
    select  TransactionID, sum(PriceEntered+(PriceEntered*TaxRate*.01))
    from   [POSDB].[dbo].[SalesDetail]
    group by TransactionID
)
update  td
set     amountOwed = td.TotalTendered-s.total 
from    [POSDatabase].[dbo].[TransactionDetail] td 
    join  s on td.id = s.TransactionID
where   td.id = 4207 
```

# image - 具有浮点值的图像使用哪种格式？

> ID：14529662
> 
> 赞同：0
> 
> 时间：2013-01-25T20:15:43.690
> 
> 标签：image, matlab, floating-point

出于技术目的，我需要使用包含可以超过 1 的浮点值的矩阵灰度级（图像）。（例如`2.3324`：）

我应该使用哪种格式将它们存储在文件中？`0...1`当 Matlab 将它们写入磁盘时，我想避免将它们带回范围。

我知道我可以转储矩阵，`save('myfile','myImage','-ascii')`但我想使用图形格式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T20:22:46.437

FITS 文件格式将是一个选项（[http://en.wikipedia.org/wiki/FITS](http://en.wikipedia.org/wiki/FITS)）。

它支持多种语言，包括 MATLAB。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T20:24:47.687

怎么样：

```
save('myFile','myImage') 
```

这样可以确保您在转换中不会丢失任何数据，并且底层的 *.mat 文件非常有效。

# google-maps - C# httpwebrequest 与谷歌距离矩阵的浏览器延迟

> ID：14529664
> 
> 赞同：0
> 
> 时间：2013-01-25T20:15:58.093
> 
> 标签：google-maps, httpwebrequest, getresponse

当我在 .Net 4.0 下发出 GetResponse 时，Windows 7 64bit [的](http://maps.googleapis.com/maps/api/distancematrix/json?origins=Bedford%20NY&destinations=Birmingham%20AL%7CThorold%20ON&mode=driving&language=en&sensor=false)
响应时间约为 30 秒。如果我使用 IE9 或 Firefox 进行相同的调用，响应时间几乎是即时的。C#代码是...

```
var webRequest = (HttpWebRequest)WebRequest.Create(url);
var objStream = webRequest.GetResponse().GetResponseStream(); 
```

两个调用都返回相同的 JSON。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T14:43:35.943

After further testing, it appears that only the first request takes 30 secs. Additional requests in the same session take 1-2 secs, which is still too long. The browser response time is still immediate. Looking for any guidance.

# jquery - jQuery ajax HEAD 请求

> ID：14529670
> 
> 赞同：1
> 
> 时间：2013-01-25T20:16:25.297
> 
> 标签：jquery, ajax, head, http-head

我正在编写一个工作脚本，我需要知道这是否可行：

我在一个需要访问的站点上才能获得正确的数据，并且可以通过许多 ajax 请求来完成这项工作。在同一操作中我还需要做的是请求我们网站上的 URL 以查看它是否存在（404、503、200？）。我不需要页面上的数据。我知道同源策略，但我不确定我是否可以发送 HEAD 请求并且只能可靠地获取状态代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-01T18:31:01.183

使用 jQuery，您可以执行以下操作，显然将 'yourdomain.com' 和 'someImage.jpg' 替换为目标位置/文件：

```
$.ajax({
url : "https://yourdomain.com/someImage.jpg",
type : 'HEAD',
success : function(){
   //file exists
   doSomething();           
},
error : function(){
   //file not exists
   doSomethingElse();           
}
}); 
```

# hash - 密码哈希（crackstation.net）

> ID：14529672
> 
> 赞同：2
> 
> 时间：2013-01-25T20:16:33.370
> 
> 标签：hash, password-encryption

我有一个关于密码哈希的问题。[我在http://crackstation.net/hashing-security.htm](http://crackstation.net/hashing-security.htm)上找到了一个很棒的教程。这就是我使用以下代码从密码创建哈希的方式：

```
$hashed_password = create_hash(form_password); 
```

这段代码的问题在于它每次都会为相同的密码创建不同的哈希值。我猜这是因为在密码中添加了随机盐：

```
function create_hash($password)
{
    // format: algorithm:iterations:salt:hash
    $salt = base64_encode(mcrypt_create_iv(PBKDF2_SALT_BYTES, MCRYPT_DEV_URANDOM));
    return PBKDF2_HASH_ALGORITHM . ":" . PBKDF2_ITERATIONS . ":" .  $salt . ":" .
        base64_encode(pbkdf2(
            PBKDF2_HASH_ALGORITHM,
            $password,
            $salt,
            PBKDF2_ITERATIONS,
            PBKDF2_HASH_BYTES,
            true
        ));
} 
```

因此，由于这个原因，我无法将用户在登录时输入的密码创建的哈希值与从数据库中检索到的哈希值进行比较，因为该哈希值永远不会与存储在数据库中的哈希值相同。我认为可以做到的唯一方法是将盐存储在另一列中，还是我错了？

还有一件事让我很烦。hast 的格式为例如 sha256:1000:u9p+OqAZgVkIBtlTBkr9ZxhFvtt+zjcA:PvhJY+oesrdBeD5pjeXMQ/3wficCU0EG。黑客显然知道这种形式的哈希，所以创建这种哈希的算法对他来说是清楚的。让我们假设数据库已被入侵，并且有数千个这样的哈希码被泄露。这种形式的哈希码不会引发安全问题吗？我想一个简单的 OqAZgVkIBtlTBkr9ZxhFvtt+zjcA:PvhJY+oesrdBeD5pjeXMQ/3wfic 会更好，因为它没有透露任何关于加密机制的信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-08-10T18:31:03.003

相同密码的两个哈希值不匹配的原因是因为结果`create_hash()`包含随机生成的盐。

要获得相同的哈希，您必须在验证时提供盐。CrackStation.net 提供的代码让这变得超级简单 - 只需将结果原样存储`create_hash()`在您的数据库中即可。要确认用户输入了正确的密码，请使用

```
validate_password('provided-password','hash-from-database'); 
```

这将返回密码是否正确的布尔值。使用这种方法比编写自己的方法要好，因为它专门用于防止某些提示可能基于返回答案所需的时间而提示正确密码。这是一个小弱点，但无论如何最好避免它，特别是因为提供的功能会为您处理它。

提供的函数为您提供了一个可靠的实现，所以不要过多地弄乱它。散列包括那些额外的细节 - sha256:1000 - 以允许将来更改您的散列而不影响现有用户的登录能力；无论当前方法是什么，它都会简单地使用散列中提供的方法。

至于向潜在的攻击者展示哈希是如何创建的：格式确实显示了有关如何创建的所有内容，但这一点都不重要。攻击者可以很容易地从一两个已知的密码：哈希对中找出使用的方法。比这更重要的是使用一个好的算法。目标是即使有所有细节也很难破解密码，因为默默无闻的安全性很差。

最后，重申一下，您不需要将盐存储在单独的列中，只需将它返回的 70-80 个大字符块单独保留为您的哈希，并让函数为您处理所有事情 - 其他任何事情都是浪费时间和资源

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-25T20:22:16.523

在此处阅读此[维基百科的链接](http://en.wikipedia.org/wiki/Salt_%28cryptography%29)

它解释了更多关于随机盐的使用。关键信息是随机盐存储在与哈希密码相同的数据库中。它仅在用户创建或更改密码时随机创建几次。每当需要身份验证时使用它。

留下有关它用于创建密码哈希的算法的信息，让您可以选择在将来的某个时间更改算法，而不会中断您的用户。如果您决定升级哈希算法，您将等到用户登录。此时您的密码是纯文本的。根据旧算法进行身份验证后，您可以重新散列并将新散列存储在其数据库行中。所有用户可能需要数月或数年才能登录，但一旦登录，他们将获得更好的散列带来的好处。因此，您将发送一封电子邮件，要求他们登录并阅读有关更好安全性的特别新闻（并作为副作用，改进他们的哈希密码）。

这是一个关于密码散列[StackOverflow 的有趣讨论：密码存储散列 ...](https://stackoverflow.com/questions/12468063/passwords-storage-hash-with-sha-512-or-crypt-with-blowfish-bcrypt?rq=1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-23T17:48:58.503

要为出色的公认答案添加更多内容：

对哈希进行加盐的目的是让某人不可能带着一大堆预加密的哈希来一个一个地尝试它们。即使您的数据库中有盐，他们也必须针对该盐对每个可能的字典条目进行散列，以成功匹配散列。并且盐每次都需要不同以防止重复输入（他们破解了一个密码，他们拥有与其他用户输入的相同密码）。

至于无法将登录哈希与存储的哈希进行比较，这是故意的：您使用验证功能来检查登录密码与存储的密码，而不是字符串比较功能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-01T09:41:54.047

存储盐，然后将盐添加到密码中，然后将其转换为哈希然后存储。

然后比较密码，您检索盐并将其添加到密码中，将其转换为散列，然后比较两个散列。

（python示例，当我从我的代码中复制代码时，缩进被弄乱了）

```
def Createpassword():
import random
import hashlib
username = input("type your username")
newpassword = input("type your new password? ")
#adds some salt
b = random.randint(1, 2000000000000)
randomsalt = str(b)

saltedpassword = (newpassword + randomsalt)

#hashes the newpassword

saltedpassword = saltedpassword.encode('utf-8')   
h = hashlib.sha256(saltedpassword)
finsh = h.hexdigest()

#creates file names
saltname = username + "salt.txt"
username = username + ".txt"

#saves the hashedpassword and the salt
text_file = open(username, "w")    
text_file.write(finsh)
text_file.close()
text_file = open(saltname, "w")    
text_file.write(randomsalt)
text_file.close()
print("your new password has been saved")

def EnterPassword():
    trys = 0
    while (trys < 3):
            username = input("type your username: ")
            #takes password input
            password = input("type your password: ")

            #gets file names
            saltname = username + "salt.txt"
            username = username + ".txt"

            #opens salt file
            text_file = open(saltname, "r")
            salt1 = text_file.read(50)
            text_file.close()
            #opens the hashed passwords file
            text_file = open(username, "r")
            correctpassword = text_file.read(500)
            text_file.close()

            #adds the salt to the password input
            saltedpassword = password + salt1

            #hashes the saltedpassword
            saltedpassword = saltedpassword.encode('utf-8') 
            m = hashlib.sha256(saltedpassword)
            hashedpassword = m.hexdigest()

            #compears hashed passwords

            if hashedpassword != correctpassword:
                    trys += 1
                    print("your password or username is incorrect")
            if trys == 3:
                    print("you have been locked out for using to many failed trys")
            if hashedpassword == correctpassword:
                    print ("Password Correct ")
                    #done give access
                    trys = 0
                    break 
```

（我是编程新手，请随时纠正我）

# javascript - 如果异步加载 JS 文件，SmoothDivScroll jQuery 插件将不起作用

> ID：14529676
> 
> 赞同：0
> 
> 时间：2013-01-25T20:16:50.690
> 
> 标签：javascript, jquery, plugins, asynchronous, smooth-scrolling

我正在使用 SmoothDivScroll 并且它运行良好，直到我尝试异步加载所有 JS 文件。我使用 Ryan Grove 的[Lazyload.js](https://github.com/rgrove/lazyload/blob/master/lazyload-min.js)使用我自己的异步加载模式，但可以肯定的是，我还使用[Modernizr](http://modernizr.com/)的加载/完成模式进行了测试，并得到了相同的结果。[我使用来自SmoothDivScroll 主页](http://www.smoothdivscroll.com)的快速演示部分的副本进行了测试，并添加了 Modernizr。没有 Modernizr，这很好，但是当我将 Modernizr 及其加载/完成模式添加到头部，并在结束体标记之前注释掉所有 JS 时，它不再工作了。当您将鼠标悬停在右箭头上时，没有任何反应，而将鼠标悬停在左箭头上会导致图像闪烁。无论哪种方式，它都应该以相同的方式工作。Moderizr 块应该等同于它下面的所有块：

```
 <script type="text/javascript"> 
        Modernizr.load([ {
            load: [
                '//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.js',
                '/js/jquery-ui-1.8.23.custom.min.js',
                '/js/jquery.mousewheel.min.js',
                '/js/jquery.kinetic.js',
                '/js/jquery.smoothdivscroll-1.3-min.js'
            ],
            complete: 
                function () {     
                  $(document).ready(function () {
                        $("#makeMeScrollable").smoothDivScroll({
                            mousewheelScrolling: "allDirections",
                            manualContinuousScrolling: true,
                            autoScrollingMode: "onStart"
                        });
                    });
                }
            }
        ]); 
    </script>        

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js" type="text/javascript"></script>
    <script src="/js/jquery-ui-1.8.23.custom.min.js" type="text/javascript"></script>
    <script src="/js/jquery.mousewheel.min.js" type="text/javascript"></script>
    <script src="/js/jquery.kinetic.js" type="text/javascript"></script>
    <script src="/js/jquery.smoothdivscroll-1.3-min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $("#makeMeScrollable").smoothDivScroll({
                mousewheelScrolling: "allDirections",
                manualContinuousScrolling: true,
                autoScrollingMode: "onStart"
            });
        });
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T20:26:43.680

我修改了如下代码段

```
 complete: 
            function () {     
                  $("#makeMeScrollable").smoothDivScroll({
                        mousewheelScrolling: "allDirections",
                        manualContinuousScrolling: true,
                        autoScrollingMode: "onStart"
                  });
            }
        } 
```

在完成时将就绪事件处理程序附加到文档`Modernizr`将不起作用，因为浏览器已经加载并解析了文档。

# meteor - 永久运行流星生成的节点包的正确语法是什么？

> ID：14529677
> 
> 赞同：6
> 
> 时间：2013-01-25T20:16:54.333
> 
> 标签：meteor

在文档中，在您自己的服务器上运行流星的过程是运行

```
meteor bundle bundle.tgz 
```

然后解压这个压缩包..

```
tar -xzvf bundle.tgz 
```

然后启动一个节点服务器

```
MONGO_URL=mongodb://localhost:27017/<dbname> PORT=<server_port> ROOT_URL=http://sub.example.com/ node bundle/main.js 
```

我正在尝试使用 forever 来保持节点服务器正常运行，但是当我运行以下命令（细节模糊）时，forever 进程不会返回，我必须 CTRL+C 才能返回命令行 - 非常不永久喜欢。

```
MONGO_URL=mongodb://localhost:27017/<dbname> PORT=<server_port> ROOT_URL=http://sub.example.com/ forever bundle/main.js 
```

如果我附加一个＆符号在后台运行该进程，那么我将返回命令行，一切看起来都很好，但永远不会生成任何日志或 pid 文件，最终永远进程会死掉。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-26T02:18:05.963

这对我有用：

```
export MONGO_URL=mongodb://localhost:27017/<dbname> 
export PORT=<server_port> 
export ROOT_URL=http://sub.example.com/ 
forever start bundle/main.js 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-01-15T05:51:02.160

这是我的启动脚本，从 rc.local 调用：

```
#/bin/sh
cd /home/nodeapp/
export MONGO_URL=mongodb://localhost:27017/nodeapp
export PORT=80
export ROOT_URL=http://$(hostname)/
export METEOR_SETTINGS=$(<settings.json)
forever start bundle/main.js 
```

希望它可以帮助某人。

[]s

奥罗

# postgresql-9.1 - postgresql中的移动平均过滤器

> ID：14529680
> 
> 赞同：4
> 
> 时间：2013-01-25T20:17:03.403
> 
> 标签：postgresql-9.1, moving-average

我有一个查询计算过去 7 天表中的移动平均值。我的表有两列 date_of_data 是日期类型，是一个日期系列，间隔为一天，val 是浮点数。

```
with B as
(SELECT   date_of_data, val
FROM mytable
group by date_of_data
order by date_of_data)
select
    date_of_data,val, avg(val) over(order by date_of_data rows 7 preceding)mean7
from B
order by date_of_data; 
```

我想计算 7 天的移动过滤器。这意味着对于每一行，移动窗口将包含最后 3 天、行本身和 3 个后续行。我找不到考虑后续行的命令。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-25T21:48:09.120

尝试这个：

```
select date_of_data, 
       val, 
       avg(val) over(order by date_of_data ROWS BETWEEN 3 preceding AND 3 following) as mean7
from mytable
order by date_of_data; 
```

# css - 使用 CSS 绘制曲线

> ID：14529681
> 
> 赞同：3
> 
> 时间：2013-01-25T20:17:03.787
> 
> 标签：css

我正在构建基本的[套装](http://en.wikipedia.org/wiki/Set_(game))卡片模式。我可以做颜色、数字和填充物，我有菱形和椭圆形。请看我在[这个小提琴](http://jsfiddle.net/UQQMz/5/)中的进展。

拼图的最后一块是`squiggle`为“曲线”形状构建一个类。如何使用 CSS 制作波浪形？

![在此处输入图像描述](../Images/e248edebc0f6670b2212cb069ccb9ac7.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T20:22:52.567

我很确定你将不得不求助于 SVG 来获得这样的形状。

对于其他形状，SVG 也可能使您的生活更轻松。在我的 Safari 6.0.2 上，我看到一些小的 CSS 渲染工件：

特别是，由于`transform`工作方式（纹理映射）导致的条纹菱形的间距会产生看起来不太均匀的东西。您需要放大此屏幕截图以查看钻石角落处的伪影。

![在此处输入图像描述](../Images/9a75e40e76b41766fa1d79c7a2aaafce.png)

基本上，CSS 不适合绘制形状。SVG 用于绘制形状。因此，由于您正在尝试绘制形状，因此您使用 SVG 成功的机会要高得多。

不过，钻石做得很好。（另请注意 SVG 应该在不支持 CSS3 3D 的平台上工作；倾斜/缩放正方形以制作钻石是一个巧妙的技巧，但归根结底，它或多或少是一种黑客行为）

# vb.net - 在 Dictionary(of Int, Custom Structure) 上使用 LINQ

> ID：14529682
> 
> 赞同：-2
> 
> 时间：2013-01-25T20:17:07.017
> 
> 标签：vb.net, linq

我有一个字典集合中的记录集合。在 VB 中如何使用 LINQ 查询 Dictionary(Of Integer, DeckClass)？

```
Public Class DeckClass
  Public Deck_Key As Integer
  Public Deck_Item1 As String
  Public Deck_Item2 As String
  Public Deck_Item2 As Double
End Class 
```

我正在使用 Visual Studio 2012 Express。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T20:21:04.433

您可以使用它[`Dictionary.Values`](http://msdn.microsoft.com/en-us/library/ekcfxy3x.aspx)来搜索您的`DeckClass`实例。 [`Dictionary(Of Int,DeckClass)`](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)也实现`IEnumerable(Of KeyValuePair(Of Int, DeckClass))`了，因此您也可以直接搜索`KeyValuePair`实例。

例如，如果您想要一个存储了`DeckClass`where`Deck_Item1`等于的键列表`"Foo"`，您可以使用：

```
Dim keys = dict.Where(Function(kvp) kvp.Value.Deck_Item1 = "Foo").Select(Function(kvp) kvp.Key)) 
```

# javascript - 绑定 iframe src data-win-bind

> ID：14529685
> 
> 赞同：0
> 
> 时间：2013-01-25T20:17:15.443
> 
> 标签：javascript, data-binding, microsoft-metro

我正在尝试将值绑定到 Windows 8 Metro 应用程序 javascript 中 iFrame 的 src 属性。

错误是声明式处理上下文中不支持值，如果您希望它被支持，请使用 WinJS.Utilities.markSupportedForProcessing 标记它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-29T18:40:21.710

出于安全原因，这是不允许的。

但是，您可以创建自定义绑定函数：

```
var ponies = WinJS.Binding.initializer(function (x, y, z) {
    z.src = WinJS.Utilities.getMember(y.join('.'), x);
}); 
```

然后，对于您的 iframe：

```
<iframe data-win-bind="src:url ponies"></iframe> 
```

# ios - 通过代码寻址视图控制器

> ID：14529688
> 
> 赞同：1
> 
> 时间：2013-01-25T20:17:25.307
> 
> 标签：ios, uiviewcontroller, uistoryboard, ibaction, uistoryboardsegue

我在我的应用程序的多个视图控制器中继承了一个带有按钮的视图控制器。我希望能够正确实现segues。我想要一个 if 语句，如果 viewcontroller A，然后执行 segue A，如果 B，然后 B 等等。例子：

```
-(IBAction)firstButtonPressed:(id)sender
{ 
    if (storyboard.viewcontroller == a) // If the current view controller Is A
    {
        [self performSegueWithIdentifier:@"segueA" sender:self];
    }
    if(storyboard.viewcontroller == b)//If the current view controller is B
    {
        [self.performSegueWithIdentifier:@"segueB" sender:self];
    }
} 
```

我已经给出了我的视图控制器故事板 ID 并检查了使用故事板 ID，但不知道如何在代码中解决它们。

# php - 在 magento 中实现自定义反馈表

> ID：14529693
> 
> 赞同：1
> 
> 时间：2013-01-25T20:17:40.287
> 
> 标签：php, forms, magento, customization

有人可以帮我在 Magento 中实现自定义表单吗？

我创建了一个在 Magento 之外工作的 PHP 表单，它收集用户数据并允许他们上传文件。我对如何在 Magento 环境中实现此功能一无所知。我们已经通过联系我们来利用内部表格。这是一种收集用户数据的反馈表。

我已经在 Google 中挖掘了几个小时，唯一的场景是如何让他们的表单的各个方面工作，而不是他们最初是如何把它放在那里的。

感谢您的回复。我什至对你开放，只是给我正确的链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T21:26:40.270

有一篇关于如何在 magento 中创建自定义表单的好文章：[创建自定义表单](http://inchoo.net/ecommerce/magento/magento-email/magento-custom-email-contact-form-with-notification-system/)。它描述了如何在 中创建路由`config.xml`，如何创建控制器 php（您可以在其中处理*post 操作*），以及模板文件的示例。

# c++ - 为什么要使用无序容器？(C++)

> ID：14529698
> 
> 赞同：13
> 
> 时间：2013-01-25T20:17:55.827
> 
> 标签：c++, c++11, std, unordered

我已经尝试过搜索，但没有找到任何东西。

我正在学习 STL 容器，并了解顺序容器和关联容器的优缺点，但是我不确定为什么有人会更喜欢无序容器而不是关联容器，因为它肯定不会影响元素插入、查找和删除。

它纯粹是性能问题，即插入/删除到关联容器需要更多处理，因为它必须经过排序？我对事物的系统方面了解不多，但在我的脑海中，我觉得一个无序的容器比自动组织的容器需要更多的“维护”。

如果有人能提供一些启示，那将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-25T20:27:08.590

纯粹抽象地考虑这样一个事实，即元素的排序是您必须付费的额外“功能”，因此如果您不需要它（例如在仅查找字典中），那么您不必付费为了它。

从技术上讲，这意味着无序容器可以通过使用哈希表以预期的查找和插入复杂度 O(1) 来实现，而不是有序容器的 O(log n)。

不过，在切线相关的注意事项上，使用字符串作为键有一个巨大的*实际*优势：有序容器必须在树遍历的任何地方执行完整的字符串比较，而散列容器只执行单个散列操作（甚至可以“优化”以仅从非常长的字符串中采样固定数量的字符），并且在实践中通常会更快。

如果订购不是必需的，那么最好的办法是尝试*两种*容器类型（其界面几乎相同）并在*您的*使用配置文件中比较性能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-11-30T10:31:17.610

当不需要对对象进行排序并且您最关心对象查找的性能时，我们使用无序容器，因为无序容器在任何地方都有最快的搜索/插入是 O(1) 而不是有序容器（关联容器采用O(log n)) 和序列容器需要 O(n))。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-25T20:24:53.507

> 不知道为什么有人会更喜欢无序容器而不是关联容器

这些功能不是独有的。一个容器可以是关联的，如果是，单独的也可以是无序的。

如果您熟悉[哈希映射](http://en.wikipedia.org/wiki/Hash_table)，那就是无序容器所利用的技术。 ~~标准库使用术语“无序”而不是“散列”，以免在所需的只是特定性能承诺时强加特定技术。~~ *（见评论）*

# api - 如何区分用户的推文总数和转发总数

> ID：14529701
> 
> 赞同：2
> 
> 时间：2013-01-25T20:18:06.153
> 
> 标签：api, twitter

我已经浏览了 Twitter API 1 和 1.1 文档，并在整个网络上搜索了很多次。我来空。

我可以很好地为用户获取 statuses_count。但这个数字被定义为“用户发布的推文（包括转发）的数量”。

我希望能够区分用户发布的推文总数（不包括转发）和用户发布的转发总数（不包括用户发起的推文）。

当然，我可以抓取所有用户的推文，这些推文仍然可以抓取并统计，我自己，但可用的推文只能追溯到 7 天左右，Twitter 说。我显然想要帐户生命周期内的推文/转推号码，而不仅仅是最近的片段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T19:10:11.777

得到：

[https://api.twitter.com/1/users/show.json?screen_name=TwitterAPI&include_entities=true](https://api.twitter.com/1/users/show.json?screen_name=TwitterAPI&include_entities=true)

除其他外，返回用户最近的推文。正是针对这条特定的最新推文，“retweet_count”出现并给出了一个数字，而不是为用户。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-25T21:14:45.997

你确定你说什么？

> 我可以很好地为用户获取 statuses_count。但这个数字被定义为“用户发布的推文（包括转发）的数量”。

实际上执行此获取

[https://api.twitter.com/1/users/show.json?screen_name=TwitterAPI&include_entities=true](https://api.twitter.com/1/users/show.json?screen_name=TwitterAPI&include_entities=true)

您检索 retweet_counts。

# git - Windows 上 git 的交互式编辑器

> ID：14529705
> 
> 赞同：2
> 
> 时间：2013-01-25T20:18:38.733
> 
> 标签：git, github-for-windows

我正在使用 GitHub for windows (http://windows.github.com/)。不幸的是，需要交互式编辑器（例如 - git rebase -i ）的事情以下列方式失败。

*   GitHub 为 windows 提供的 open shell
*   使用交互式命令（git rebase -i 或其他）
*   Notepad++ 打开 git 生成的文件
*   我编辑、保存并关闭此文件
*   此时 git 应该根据我的编辑做一些事情，不幸的是没有任何反应

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T01:17:10.940

您的 git 配置中是否有 core.editor 的可执行文件集的完整路径？如果不是这样： git config --global "/path/to/editor/" 将设置它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T19:11:11.280

关闭记事本++。

来自[http://www.reddit.com/r/git/comments/186uo6/problem_with_interactive_editor_for_git_on_windows/c8c7pi6?context=3的解决方案](http://www.reddit.com/r/git/comments/186uo6/problem_with_interactive_editor_for_git_on_windows/c8c7pi6?context=3)

# php - 读取第一行后使用 fgetcsv 获取额外的逗号和引号

> ID：14529717
> 
> 赞同：0
> 
> 时间：2013-01-25T20:19:20.160
> 
> 标签：php, mysql, fgetcsv

我正在尝试将具有 100,000 行的大型 csv 文件导入 MySql 表。我收到错误：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以了解在 'Dell'、''、'1610 Keeneland Dr'、''、'Helena'、'205-871-8006'、''、'35080 附近使用的正确语法-4114')' 在第 1 行

将代码从查询更改为回显：

> '428A1B35-6913-497C-907A-BFB9C4983B04', 'Andrew Collins O'Dell', '', '1610 Keeneland Dr', '', 'Helena', '205-871-8006', '', '35080- 4114')

您可以看到在某些字段之间有额外的引号（2 个单勾号）和逗号。我想也许这是一个空的领域，但没有骰子。这是我的代码：

```
if (($handle = fopen("accounts.csv", "r")) !== FALSE)
{
    while (($data = fgetcsv($handle, ",")) !== FALSE)
    {
        try
        {
            mysql_query("INSERT INTO accounts (id, name
            ,billing_address_street
            , billing_address_city, billing_address_state, billing_address_postalcode
            , phone_office, phone_alternate
            , website) values ('".trim(com_create_Guid(), '{}')
            ."', '".$data[1]."', '".$data[46]."', '".$data[48]
            ."', '".$data[49]."', '".$data[50]."', '".$data[8]
            ."', '".$data[9]."', '".$data[52]."')")or die(mysql_error());
        }
        catch(MySqlException $e)
        {
            $e.getMessage();
        }
    }
    fclose($handle);
} 
```

我已经尝试在 fgetcsv 函数中输入字段附件参数“”。我的一些索引得到了一个未定义的偏移量。所以问题是是否有人知道额外的刻度和逗号可能来自什么。

旁注：它正在插入 250 条记录，尽管名称后面的所有内容都被一列或 2 列关闭，这当然是因为额外的刻度和逗号。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T20:34:42.070

你必须使用这个功能

```
mysql_real_escape_string( $data[$x], $dblink ) 
```

对于数据部分;-)

# git - git 功能分支工作流程

> ID：14529718
> 
> 赞同：1
> 
> 时间：2013-01-25T20:19:35.963
> 
> 标签：git, workflow, branch, release

我正在尝试实现 Adam Dymitruk (http://dymitruk.com/blog/2012/02/05/branch-per-feature/) 所描述的工作流程。

我喜欢这种方法的地方在于功能分支的独立性。此分支中仅存在与该功能相关的代码。在 sprint 期间，可以根据不同的功能分支自由组合发布分支。亚当已经回答了一些问题，但我正在努力解决一些问题。

根据我的发现，发布和集成（开发）分支运行时间很长，可以在必要时重置？Dev 不断地从他们的特性分支合并到集成分支。已完成的功能将合并到发布分支。

*   由于发布和集成分支是共享的（向上推），当它们被重置时会发生什么？其他开发者应该如何处理这个问题？当您想要取出某个功能时，应该重新组合发布分支。您是否需要先删除远程上的旧发布分支，而其他开发人员也需要先删除他们的发布分支？这似乎很麻烦。

*   最好不要有一个长期运行的发布分支，而是创建一大堆不同的分支？

所以基本上，如何自由地重组一个分支（从而重写历史）在开发人员之间共享这个分支？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T21:47:07.690

如果您要使用此工作流程，我可以推荐[Gerrit](https://code.google.com/p/gerrit/)吗？

如果您使用这样的看门人，将特定功能与集成分支合并的结果会在合并*之前*进行测试。因此，如果某个功能通过代码审查和验证，您只需要“倒回”集成分支后来被丢弃。在这种情况下，使用`git revert`是合适的——因此集成分支实际上并没有向后移动，它只是获得了一个“反向”提交来删除该功能。

发布分支可以以同样的方式处理事情。

另一种选择是为每个发布/功能分支使用不同的名称。当您需要删除某些内容时，您会创建一个新`integration-201301`分支并停止在旧分支上工作。其他开发人员可以在闲暇时删除他们过去分支的副本。由于与旧分支相同的分支减去一个特性是一个全新的组合，但名称不同，因此不需要重写历史。

# java - 如何找到 jni.h？

> ID：14529720
> 
> 赞同：81
> 
> 时间：2013-01-25T20:19:47.120
> 
> 标签：java, java-native-interface, classpath

在 Ubuntu 12.04 中，我安装了来自 sun/oracle 的 jdk7。时`locate jni.h`，它会打印多个位置

```
/usr/lib/jvm/java-6-openjdk-amd64/include/jni.h
/usr/lib/jvm/jdk1.7.0_07/include/jni.h
... 
```

JDK生成的头文件中有`include <jni.h>`，目前报错

```
fatal error: jni.h: No such file or directory. 
```

在我的`Makefile`中，没有指定位置在哪里`jni.h`。我在问是否可以配置某些系统参数以在编译时知道`jni.h`（比如说）的路径。`/usr/lib/jvm/jdk1.7.0_07/include/jni.h`

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-01-25T20:25:16.910

你必须告诉你的编译器包含目录在哪里。像这样的东西：

```
gcc -I/usr/lib/jvm/jdk1.7.0_07/include 
```

但这取决于您的makefile。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2015-04-10T12:59:57.513

它需要`jni.h`和`jni_md.h`文件，试试这个

```
gcc -I/usr/lib/jvm/jdk1.7.0_07/include \
  -I/usr/lib/jvm/jdk1.7.0_07/include/linux filename.c 
```

这将包括广泛的 JNI 文件和 linux 所需的文件

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2015-02-13T08:33:27.660

安装 OpenJDK 开发工具包 (JDK) 应该可以解决您的问题。

```
sudo apt-get install openjdk-X-jdk 
```

这应该使您能够毫无问题地进行编译。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-10-27T12:53:01.820

使用以下代码：

```
make -I/usr/lib/jvm/jdk*/include 
```

其中 jdk* 是 jdk 安装的目录名称（例如 jdk1.7.0）。

并且不会有一个系统范围的解决方案，因为目录名称会随着下载和安装的不同版本的 JDK 不同而不同。如果您需要自动化解决方案，请将所有命令包含在单个脚本中并在终端中运行所述脚本。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2015-07-03T18:37:36.560

我通常像这样定义我的 JAVA_HOME 变量：

```
export JAVA_HOME=/usr/lib/jvm/java/ 
```

其中有必要的包含文件。当我编译很多需要它的东西时，我有时会将以下内容添加到我的 .barshrc 中。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-08-24T21:27:35.877

将 JAVA_INCLUDE_DIR 设置为 jni.h 所在的位置应该可以解决您的问题（设置 CPPFLAGS 对我不起作用）

假设它是/usr/lib64/java/include；

```
export JAVA_INCLUDE_DIR=/usr/lib64/java/include 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-03-25T08:03:40.600

对我来说，确保包含 JDK 安装很简单（我只有 JRE）。我的`R CMD javareconf`输出看起来像：

```
Java interpreter : /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/java
Java version     : 1.8.0_191
Java home path   : /usr/lib/jvm/java-8-openjdk-amd64/jre
Java compiler    : not present
Java headers gen.:
Java archive tool:

trying to compile and link a JNI program
detected JNI cpp flags    :
detected JNI linker flags : -L$(JAVA_HOME)/lib/amd64/server -ljvm
gcc -std=gnu99 -I/usr/share/R/include -DNDEBUG      -fpic  -g -O2 -fstack-protector-strong -Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2 -g  -c conftest.c -o conftest.o
conftest.c:1:17: fatal error: jni.h: No such file or directory
compilation terminated.
/usr/lib/R/etc/Makeconf:159: recipe for target 'conftest.o' failed
make: *** [conftest.o] Error 1
Unable to compile a JNI program

JAVA_HOME        : /usr/lib/jvm/java-8-openjdk-amd64/jre
Java library path:
JNI cpp flags    :
JNI linker flags :
Updating Java configuration in /usr/lib/R
Done. 
```

事实上`include`，我的`$JAVA_HOME`. 非常简单的补救措施：

```
sudo apt-get install openjdk-8-jre openjdk-8-jdk 
```

（请注意，这是专门用于安装`openJDK`而*不是*来自 Oracle 的）

之后一切都很好：

```
Java interpreter : /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/java
Java version     : 1.8.0_191
Java home path   : /usr/lib/jvm/java-8-openjdk-amd64/jre
Java compiler    : /usr/lib/jvm/java-8-openjdk-amd64/jre/../bin/javac
Java headers gen.: /usr/lib/jvm/java-8-openjdk-amd64/jre/../bin/javah
Java archive tool: /usr/lib/jvm/java-8-openjdk-amd64/jre/../bin/jar

trying to compile and link a JNI program
detected JNI cpp flags    : -I$(JAVA_HOME)/../include -I$(JAVA_HOME)/../include/linux
detected JNI linker flags : -L$(JAVA_HOME)/lib/amd64/server -ljvm
gcc -std=gnu99 -I/usr/share/R/include -DNDEBUG -I/usr/lib/jvm/java-8-openjdk-amd64/jre/../include -I/usr/lib/jvm/java-8-openjdk-amd64/jre/../include/linux     -fpic  -g -O2 -fstack-protector-strong -Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2 -g  -c conftest.c -o conftest.o
g++ -shared -L/usr/lib/R/lib -Wl,-Bsymbolic-functions -Wl,-z,relro -o conftest.so conftest.o -L/usr/lib/jvm/java-8-openjdk-amd64/jre/lib/amd64/server -ljvm -L/usr/lib/R/lib -lR

JAVA_HOME        : /usr/lib/jvm/java-8-openjdk-amd64/jre
Java library path: $(JAVA_HOME)/lib/amd64/server
JNI cpp flags    : -I$(JAVA_HOME)/../include -I$(JAVA_HOME)/../include/linux
JNI linker flags : -L$(JAVA_HOME)/lib/amd64/server -ljvm
Updating Java configuration in /usr/lib/R
Done. 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-02-27T07:34:14.760

所有发布的解决方案都不适合我。

我必须`vi`进入我的 Makefile 并编辑路径，以便`include`文件夹和 OS 子系统（在我的情况下，`-I/usr/lib/jvm/java-8-openjdk-amd64/include/linux`）的路径是正确的。这使我可以毫无问题`make`地运行。`make install`

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-03-15T22:25:27.327

以上答案为您提供了硬编码路径解决方案。这在很多层面上都很糟糕（java 版本更改、操作系统更改等）。

更清洁的解决方案是添加：

```
JAVA_HOME = $(shell dirname $$(readlink -f $$(which java))|sed 's^jre/bin^^') 
```

在 makefile 顶部附近，然后添加：

```
-I$(JAVA_HOME)/include 
```

到您的包含标志。

我发布这个是因为我遇到了同样的问题并且花了太多时间在谷歌上搜索错误的答案（我正在多个平台上构建一个应用程序，所以构建环境需要是可移植的）。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-05-28T08:28:12.657

如果你在 Ubuntu 上：

```
#X means 6,7,8...
apt install openjdk-X-jdk 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2018-11-13T23:08:41.947

我不知道这是否适用于这种情况，但有时文件由于未知原因被删除，再次将其复制到相应的文件夹中应该可以解决问题。

# asp.net - 下拉列表列之间的特定距离

> ID：14529724
> 
> 赞同：0
> 
> 时间：2013-01-25T20:19:56.060
> 
> 标签：asp.net, linq

我喜欢在我的下拉列表中有两列，两列之间有特定的距离，所以我在下面添加了代码，但列与我的代码不一致。

```
var query = from p in _DataContext.tblDocuments
                    orderby p.DocumentNo

                    select new
                    {
                        Doctitle = p.DocumentNo+' '+' '+"|"+' '+p.TITLE,
                        DocId = p.DocId
                    };
        ddlProjectDocument.DataSource = query;
        ddlProjectDocument.DataValueField = "DocId";
        ddlProjectDocument.DataTextField = "Doctitle";
        ddlProjectDocument.DataBind(); 
```

请帮助我如何拥有 2 列具有正常视图和良好对齐的列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T20:36:37.287

您可以尝试以下两种方法：

```
 1). select new
                {
                    Doctitle = p.DocumentNo+" "+"|"+" "+p.TITLE,
                    DocId = p.DocId
                }; 
```

2）。

```
select new
                {
                    Doctitle =Concat(p.DocumentNo,p.TITLE),
                    DocId = p.DocId
                }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T22:25:18.290

对齐方式将取决于表格字段中值的长度。一种方法是获取表中最大条目的大小，并确保所有条目都那么宽。这是您可以尝试的方法。

```
 <asp:DropDownList ID="ddlStack" runat="server" OnLoad="ddlStack_Load" /> 
```

并在 ddl 加载事件的源代码中：

```
 protected void ddlStack_Load(object sender, EventArgs e)
  {
        var all = from o in _DataContext.tblDocuments
                  orderby o.DocumentNo
                  select o;
        int maxs = 0;
        foreach (tblDocuments v in all)
        {
            if (v.DocumentNo.Length > maxs)
                maxs = v.DocumentNo.Length;
        }

        foreach (tblDocuments vv in all)
        {
            string doctitle = vv.DocumentNo;
            for (int i = vv.DocumentNo.Length; i < maxs + 2; i++)
            {
                doctitle += '_';

            }
            doctitle += " | ";
            doctitle +=  vv.DocID;
            ddlStack.Items.Add(new ListItem(doctitle, vv.vendorID.ToString()));

        }
  } 
```

# php - Codeigniter 表单提交

> ID：14529725
> 
> 赞同：0
> 
> 时间：2013-01-25T20:19:57.150
> 
> 标签：php, codeigniter

所以我对 Codeigniter 比较陌生......我在本地主机上有一个文件，它提交了一个表单：

```
 $id =array('id' => 'commentForm');
 echo form_open("form_validate", $id);

public function form_validate()
{
    $this->load->library("form_validation");
    $this->form_validation->set_rules('date', 'Date', 'required');
    $this->form_validation->set_rules('Cname', 'Client Name', 'required');
 ....
  } 
```

据我了解，当我在表单上点击提交时，它会转到控制器中的函数“form_validate()”（或您在提交页面上设置的任何内容）并执行该函数。

该代码在我的本地主机上工作得很好，但是一旦我将它上传到我的实时服务器，而不是去控制器中的函数，它会寻找一个名为 form_validation 的页面（至少这是我从 URL 中想到的）

我已经将我的基本路径重写为：

```
 $config['base_url'] = 'http://mysite.com/ci_form'; 
```

并摆脱了 index.php 下的 index.php 我还从他们的网站上使用了 Codeigniter mod_rewrite

```
 <IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /ci_form/

#Removes access to the system folder by users.
#Additionally this will allow you to create a System.php controller,
#previously this would not have been possible.
#'system' can be replaced if you have renamed your system folder.

#When your application folder isn't in the system folder
#This snippet prevents user access to the application folder
#Submitted by: Fabdrol
#Rename 'application' to your applications folder name.
RewriteCond %{REQUEST_URI} ^application.*
RewriteRule ^(.*)$ /index.php?/$1 [L]

#Checks to see if the user is attempting to access a valid file,
#such as an image or css document, if this isn't true it sends the
#request to index.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?/$1 [L] 
```

```
 <IfModule !mod_rewrite.c>
# If we don't have mod_rewrite installed, all 404's
# can be sent to index.php, and everything works as normal.
# Submitted by: ElliotHaughin

ErrorDocument 404 /index.php 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T20:29:30.597

您在`form_open("form_validate");`函数中缺少控制器，这就是为什么它正在寻找一个名为 form_validate 的控制器。

它需要是`form_open("your_controller_name/form_validate");`

[http://ellislab.com/codeigniter/user-guide/helpers/form_helper.html](http://ellislab.com/codeigniter/user-guide/helpers/form_helper.html)

您的表格也应该在您的视图中

也许[这](http://tutsforweb.blogspot.com/2012/05/user-registration-with-codeigniter.html)会有所帮助

# arrays - 在unityscript中搜索字符串数组中的子字符串

> ID：14529726
> 
> 赞同：0
> 
> 时间：2013-01-25T20:19:59.880
> 
> 标签：arrays, unity3d, unityscript

我正在尝试在字符串数组中搜索子字符串。我正在使用以下代码（在 Unity3 中）：

```
var obstacles = ["Border", "Boundary", "BoundaryFlame"];
var frontAvailable = true;
var leftAvailable = true;
var rightAvailable = true;
var hitFront: RaycastHit;
if (Physics.Raycast(transform.position, transform.position + transform.forward, hitFront, 1.5)) {
    Debug.Log("I hit this in front: ");
    Debug.Log(hitFront.collider.gameObject.name);
    for (var i = 0; i < obstacles.length; i++)
    {
       if (obstacles[i].IndexOf(hitFront.collider.gameObject.name) > -1)
       {
          Debug.Log("Hit in front!");
          frontAvailable = false;
       }
    }
} 
```

问题是，Debug.Log 显示`Boundary(Clone)`. 我已包含`Boundary`在数组中`obstacles`。下面的代码不应该设置`frontAvailable`为false吗？还是我在这里犯了错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T20:23:27.707

I think you need `indexOf`, not `IndexOf`. Assuming you're talking about the native string function.

In addition, `indexOf` returns `-1` if there is no match, `0` if the match is at the start, `1, 2, 3`... for further positions. So you need `> -1` instead of `> 0`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T20:26:30.290

除了 Kolink 的答案之外，您`if`正在寻找`Boundary(clone)`的开头`Boundary`，而不是相反的方式。我想你正在寻找：

```
if (hitFront.collider.gameObject.name.IndexOf(obstacles[i]) >= 0) 
```

# css - 我无法在 Eclipse 中更改包资源管理器的字体大小

> ID：14529727
> 
> 赞同：29
> 
> 时间：2013-01-25T20:20:00.660
> 
> 标签：css, eclipse, e4

我尝试从菜单*Window* → *Preferences* → *General* → *Appearance*更改 Eclipse 中包资源管理器的字体大小，但我无法更改字体大小。我怎样才能做到这一点？我在 Windows 7 上使用 Eclipse v4.2 (Juno)。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-21T20:19:02.157

在 Juno 及更高版本上，您可以通过 CSS 调整该字体。

查找`eclipse\plugins\org.eclipse.platform_4.2.x.y\css`当前样式表的文件（可能`e4_default_win7.css`），然后添加以下规则：

```
#org-eclipse-jdt-ui-PackageExplorer Tree,
#org-eclipse-ui-navigator-ProjectExplorer Tree {
  font-size: 10px; /* <-- Desired font size */
} 
```

*更新：*`eclipse/plugins/org.eclipse.ui.themes_x.x.x.vxxxxx/css`自 Eclipse 4.4 (Luna) 以来，样式表就在文件夹中。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-08-27T08:24:00.460

供参考：

从 Eclipse v4.4 (Luna) 开始：

看起来 CSS 文件不再位于旧文件夹中：

```
`eclipse/plugins/org.eclipse.platform_4.x.x.vy/css`, 
```

它们被移动到新文件夹：

`eclipse/plugins/org.eclipse.ui.themes_x.x.x.vxxxxx/css`

您必须在菜单*Windows* → *Preference* → *General* → *Appearance*中选择一个主题来应用它。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-05-28T19:24:59.477

这对我有用：

```
.MPart Tree{
  font-size: 8;
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-01-28T15:05:56.197

这些是我的设置和 IDE 的屏幕截图。

```
 #org-eclipse-jdt-ui-PackageExplorer Tree,
    #org-eclipse-ui-navigator-ProjectExplorer Tree,
    #org-eclipse-ui-views-ContentOutline Tree,
    #PerspectiveSwitcher ToolBar {
      font-size: 8px;
    }

    .MPartStack {
      font-size: 8;
      swt-simple: false;
      swt-mru-visible: false;
    } 
```

![日食截图](../Images/adda5ebf86888efa76e89d26605f6e0a.png)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-01-25T21:07:56.213

`eclipse/plugins/org.eclipse.platform_4.2.X.vY/css`您可以在编辑当前样式（可能`e4_default_win7.css`）中查找 CSS 样式文件。

添加如下内容：

```
 #org-eclipse-ui-jdt-PackageExplorer {
       font-size: 20pt;
    } 
```

并希望你有一个漂亮的大字体（我自己没有检查过）。

专业提示：下次您需要为 UI 的一部分查找 CSS Id 时，请使用*CSS Spy*，您可以使用`SHIFT`- `ALT`-打开`F5`它（安装后）。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-12-07T10:19:20.460

这对我在 Windows 10 上使用版本 2019-09 有效：

*   `C:\Users\johndoe\.p2\pool\plugins`在文件资源管理器中 找到该目录，将*“johndoe”*替换为您自己的 Windows 用户 ID。
*   根据您过去使用 Eclipse 所做的操作，您应该会看到一个或多个名称以`org.eclipse.ui.themes`.
*   选择最近修改日期的那个。在我的例子中，它的名字是`org.eclipse.ui.themes_1.2.700.v20190826-0816`.
*   在该目录中打开名为`css`.
*   在文本编辑器中打开名为**e4_default_win.css**的文件，并在文件末尾附加类似于以下内容的内容：

> 树{字体大小：24px；字体：Mistral；}

*   不要选择那些特定的值！你应该选择你想要的字体和字体大小。我故意做出糟糕的选择，只是为了让这些设置的效果在下面的屏幕截图中显而易见。
*   保存文件并重新启动 Eclipse。您应该会看到 Project Explorer 和 Package Explorer 视图中的字体已更改，以及许多其他位置：

    [![screenShotWithNewFont](../Images/4f704968f5e463d56e83944fd6443f36.png)](https://i.stack.imgur.com/yfeZS.png)

*   请清楚，我编辑的文件的名称是 `C:\Users\johndoe\.p2\pool\plugins\org.eclipse.ui.themes_1.2.700.v20190826-0816\css\e4_default_win.css`. 您编辑的文件的名称不会完全一样，但应该是相似的。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-10-27T00:36:15.450

在[Ubuntu 14.04](https://en.wikipedia.org/wiki/List_of_Ubuntu_releases#Ubuntu_14.04_LTS_.28Trusty_Tahr.29) (Trusty Tahr) 上，这对我来说是最佳选择：

```
.MPart Tree{
  font-size: 10;
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2021-04-15T12:51:35.633

最后，从 Eclipse 2020-09 (4.17) 开始，有一个选项“树和表字体视图”，`Window -> Preferences -> General -> Appearance -> Colors and Fonts`其中可以更改 Package Explorer 中的字体大小等。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-06-08T08:16:31.877

如果它可以帮助您更轻松地发现设置，这是一个屏幕截图，如何在编辑器窗口中更改字体以外的其他位置的字体

[![在此处输入图像描述](../Images/62f373d40d7345decba25218cb89fd76.png)](https://i.stack.imgur.com/NoiAY.png)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-10-13T18:09:05.767

在我的情况下，我将**DevStyle**插件与 Spring Tool Suite 4 一起使用。

项目资源管理器的字体大小可以在 Eclipse 菜单栏中进行更改：

*   窗户
    *   喜好
        *   开发风格
            *   附加功能
                *   **浏览器字体大小**

* * *

[![Eclipse 首选项](../Images/23f9cefa193fceb8fd3042ac806ea008.png)](https://i.stack.imgur.com/ufuxF.png)

此设置保存到工作区文件夹中：

```
\workspace\.metadata\.plugins\com.genuitec.eclipse.ui.common.platform\extra-styling.css 
```

> 我尝试直接在文件中编辑，但是当打开 Eclipse 时，文件被**覆盖**

> 使用基于（需要）的[STS 4.8.0.RELEASE](https://spring.io/blog/2020/09/16/spring-tools-4-8-0-released)`Eclipse 2020-09``JDK11`

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-12-19T15:21:37.730

感谢 Veger 的回复，我在 PHP Perspective 中成功更改了我的 PHP Explorer 的字体（安装了 PDT）。下面的 CSS 代码，

```
 #org-eclipse-php-ui-explorer Tree {
       font-family: Consolas;
       font-size: 21px;
    } 
```

被添加到我的“eclipse-4.3\plugins\org.eclipse.platform_4.3.1.v20130911-1000\css\e4_default_win7.css”文件中。

您可以选择不同的 CSS 文件，具体取决于您通过*Preferences* → *General* → *Appearance*选择的主题：“主题”下拉列表）。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-01-25T20:45:33.713

Eclipse 正在使用本机 Windows 小部件，它们的设置只能从“显示属性”/“设置”/“高级”/“常规”属性选项卡中更改。在那里您可以更改屏幕 DPI 以更改字体大小。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-09-26T20:56:17.327

在 Eclipse 4.7.x 中，CSS 文件位于 eclipse/plugins/org.eclipse.ui.themes_1.2.1.v20170809-1435/css/ 下

在我的例子中，我使用 OSX 的深色主题，所以我打开了文件 e4-dark_mac.css 并添加了 font-size 行：

```
CTabFolder Tree, CTabFolder Canvas {
    background-color: #2F2F2F;
    color: #CCC;
    font-size: 13pt; // new 
} 
```

# c# - 我需要多少视图、视图模型和模型？

> ID：14529731
> 
> 赞同：1
> 
> 时间：2013-01-25T20:20:10.637
> 
> 标签：c#, wpf, mvvm

我正在尝试使用 MVVM 模式开发一个 WPF 应用程序——实际上它更像是一个工具。我已经阅读了几篇文章，观看了视频，发布了问题，但不知何故，我觉得我对这个 MVVM 事物的方法或理解不是“正确的”。

我将从 UI 开始。在第一阶段，UI 应显示以下内容：

*   组框与
    *   用户名文本框
    *   密码文本框（让我们忽略`PasswordBox`开始）
*   组框与
    *   此用户可用的项目名称列表的组合框（将从网络服务中检索）
    *   用于登录所选项目的“登录”按钮
    *   用于从当前项目中注销的“注销”按钮

因此，我将确定以下需要处理的数据：

*   用户名的字符串
*   密码字符串
*   用于`ObservableCollection<Project>`项目列表
*   `Project`表示活动项目的对象
*   A`boolean`是否登录到项目

我很担心，我不知道应该如何构建或设计以下 MVVM。我应该在这里使用多少视图、视图模型和模型？当然，应用程序会增长，但不会增长这么多。让我们坚持以上。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T20:30:44.227

这个问题没有正确或错误的答案

将视图、视图模型和模型视为截断点。它们允许您将应用程序模块化，而不是采用不可重用的整体方法。

一般来说，ViewModels 与 Views 的比例是 1:M，但现实情况是大多数时候它们是 1:1 的关系。ViewModel 和 View 是大部分工作所在的地方，Model 只不过是实现`INotifyPropertyChanged`绑定需求的 POCO。

在您的示例中，我将根据需要使用由单个 ViewModel 和多个模型（项目、UserCredentials 等）支持的单个视图。您可能拥有执行实际登录工作的服务，但是您*可以*在 ViewModel 中执行该工作。

# encryption - 通缉：用于复制保护目的的加密方案

> ID：14529732
> 
> 赞同：0
> 
> 时间：2013-01-25T20:20:14.753
> 
> 标签：encryption, copy-protection

我的任务是为应用程序实施基于加密狗的复制保护方案。我意识到无论我做什么，都会有人破解它，但我至少想让它比检查加密狗是否存在的 if 语句更难一些。

我的方法是加密应用程序正确执行所需的关键数据。在运行时，从加密狗中检索解密密钥（我们选择的模型有一些合适的 API 函数），数据被解密并且应用程序很开心。

当然，坚定的攻击者可以拦截该解密密钥并获取解密数据。没关系。但应该很难的是替换他们自己的数据。因此，我正在寻找一种加密方案，其中知道解密密钥不会使某人能够加密自己的数据。

这显然是非对称加密。但是对于到目前为止我发现的每一个这样的算法，加密（或公钥）密钥都可以从解密（或私钥）密钥中生成，这正是我想要避免的。

注意：简单地对数据进行签名不会有太大帮助，因为（除非我完全误解了这样的签名）验证签名将只是另一个 if 语句，这很容易被规避。

所以......有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T20:39:39.607

一旦攻击者知道了私钥，您就没有任何秘密信息可以将自己与其他人区分开来。为了让攻击者更难：您可能希望在应用程序特定时间 T 之后使每对（公钥、私钥）到期，并在加密狗和您自己的机器上独立地根据前一对生成一个新对。这样，攻击者需要持续访问加密狗才能使用新的私钥加密他的数据，或者像 T 一样频繁地运行他的 private_key_detection 算法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T21:06:35.410

您可能想在加密狗上运行解密。有一些硬件可以帮助实现这一点（[例如，我刚刚搜索了这个。](http://www.securemetric.com/securedongle.php)）。可能还有很多其他的......达拉斯半导体曾经有一个Java按钮，可以让您在类似设备的小型加密狗上运行代码，但我认为他们不再拥有它了。

其中一些允许您在加密狗中执行代码。那么也许一个难以重新创建但不需要高性能的关键功能可能会起作用？也许是许可证密钥验证算法。

也许您可以在加密狗中包含必须放入内存才能运行程序的代码。这将有点难以破解，但可能难以实现，具体取决于您用于制作程序的工具。

您可能还想学习一些反调试主题。我记得不久前看过一些出版物，[但这里至少有一个](http://tuts4you.com/download.php?view.3260)。这是另一层，将使其更难破解。

依赖 Internet 连接也可能是一种选择。如果您的客户无法在没有 Internet 连接的情况下运行您的代码，您必须小心不要惹恼他们。

您还可以查看 FlexLM（或现在所谓的任何名称）。它有效，但它是一个野兽。如果我没记错的话，他们还试图就您公司毛利润的一定百分比协商许可费（已经好几年了……我想我们告诉他们在他们要求的时候把它塞进去。）

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T10:51:31.047

为了回答我自己的问题（有点），可以使用 RSA 来做到这一点，但是大多数 API（包括 OpenSSL 的加密库之一）都需要被“欺骗”才能做到这一点。给定私钥，您可以生成公钥的原因是

1.  RSA 的实现将 p 和 q（那些大素数）保存在私钥数据结构中是常见的做法。

2.  由于公钥（由模数 N 和一些指数 e 组成）无论如何都是公开的，因此（通常）选择一个晦涩的 e 是没有意义的。因此，有一些常用的标准值，例如 3 或 65537。因此，即使 p 和 q 未知，您也可以“猜测”公共指数。

但是，RSA 是对称的，因为您使用公钥加密的任何内容都可以使用私钥解密，反之亦然。所以我所做的（我是个怪物）是让加密库生成一个 RSA 密钥。您可以在那里选择自己的公共指数，稍后将用于*解密*（与正常方式相反）。然后，我在关键数据结构中切换公共和私有指数。

任何尝试使用加密库做类似事情的人的一些提示：

1.  在 RSA 数据结构中，清除除 n 和 e / d 之外的所有内容，具体取决于您是否要使用该特定密钥进行加密或解密。

2.  使用 RSA_blind_off 关闭致盲。即使在解密时它也需要加密指数，这不是我们想要的。请注意，这可能会使您受到一些攻击。

如果有人需要更多帮助，请发表评论，我会编辑这篇文章并提供更多信息。

# css - 如何将 div 附加到通过边距定位的 div 的一侧：auto 0;

> ID：14529733
> 
> 赞同：-1
> 
> 时间：2013-01-25T20:20:26.353
> 
> 标签：css, html, positioning

我有一个相当常见的页面布局，其中内容 div 集中在使用`margin:auto 0`. div 本身的宽度取决于可用的页面宽度。

我希望另一个带有徽标的 div 以固定高度“粘”到该 div 的左侧外侧（即两者之间没有间隙或重叠）。我应该为此使用什么 CSS？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T20:34:55.647

就像是

html:

```
<html>
    <div id='content'>
        <div id='stickything'>a</div>
    </div>
</html> 
```

CSS：

```
html {
    width: 100%;
}

#content {
    position: relative;
    width: 100px;
    height: 600px;
    margin: auto;
    background-color: green;
}

#stickything {
    position: fixed;
    width: 25px;
    height: 30px;
    top: 0px;
    margin-left: -25px;
    background-color: red;
} 
```

[http://jsfiddle.net/Kkcnn/](http://jsfiddle.net/Kkcnn/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T20:25:02.607

使用`position:absolute`. 它必须帮助：

```
.container-div{ 
position: relative 
}

.outer-div{
position:absolute;
top: 0 (your choice)
left: -/outer div's width/
} 
```

# iphone - 如何增加 NSMutableArray 中的当前索引

> ID：14529734
> 
> 赞同：0
> 
> 时间：2013-01-25T20:20:30.323
> 
> 标签：iphone, ios6

如何增加 currentindex 以便 textview 可以按顺序更新而不是随机更新。

```
- (void)viewDidLoad{
myArray = [[NSMutableArray alloc]initWithObjects:@"String1",@"String2",@"String3",@"String4", @"String5",..... nil];  

[NSTimer scheduledTimerWithTimeInterval:2.0
                                 target:self
                               selector:@selector(updateText:)
                               userInfo:nil
                                repeats:NO];

self.textView.font = [UIFont fontWithName:@"Baskerville-Bold" size:22];

self.textView.textAlignment = NSTextAlignmentCenter;

self.textView.backgroundColor = [UIColor clearColor];

self.textView.textAlignment =  NSTextAlignmentCenter;
self.textView.text = @"String1";
self.textView.scrollEnabled = NO;

self.textView.editable = NO;

self.textView.userInteractionEnabled = NO;

[baseView addSubview: self.textView];

} 

- (void)updateText:(NSTimer *)theTimer {
int index = arc4random() % [myArray count];
myTextView.text = [myArray objectAtIndex:index]; 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T20:46:06.067

与其将索引设为局部变量，不如将其设为属性

@property（非原子）NSInteger 索引；

在 viewDidLoad 中将其初始化为 0；

然后只像这样使用它：

```
 - (void)updateText:(NSTimer *)theTimer 
        {
            NSLog(@"myArray count is %d",[myArray count]);
            CFShow((__bridge CFTypeRef)(myArray));

            if (index < [myArray count])
            {
                NSLog(@"%d value is %@",index,[myArray objectAtIndex:index]);
                myTextView.text = [myArray objectAtIndex:index];
                index++;
            }
            else
                index = 0;
            }
    } 
```

我希望你像这样使用定时器：

```
self.timer = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(yourFunctionToUpdateTimer) userInfo:nil repeats:NO]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T20:27:04.337

尝试做

```
int index =+1; 
```

我已经在另一个应用程序中尝试过它并且它有效，所以它应该适合你

# jquery - Html5 Canvas 和 base64 图像

> ID：14529737
> 
> 赞同：3
> 
> 时间：2013-01-25T20:20:50.433
> 
> 标签：jquery, html, canvas

我有一个看起来像这样的 base64 图像：

```
data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAUAAAADwCA...... 
```

有没有办法可以使用上面的编码图像在画布上绘制它？有没有人有这方面的例子。

**编辑：**

这对我有用，它仅在它是图像而不是**base64时才绘制图像**

这有效：

```
<script type="text/javascript">

        var pos = 0, ctx = null, ctx2 = null,saveCB, image = [], image2 = new Image();

        var canvas = document.createElement('canvas');

        var image2 = new Image();

        canvas.setAttribute('width', 320);
        canvas.setAttribute('height', 240);
        ctx = canvas.getContext('2d');
        image = ctx.getImageData(0, 0, 320, 240);

        var saveCB = function (data) {
            var col = data.split(';');
            var img = image;
            for (var i = 0; i < 320; i++) {
                var tmp = parseInt(col[i]);
                img.data[pos + 0] = (tmp >> 16) & 0xff;
                img.data[pos + 1] = (tmp >> 8) & 0xff;
                img.data[pos + 2] = tmp & 0xff;
                img.data[pos + 3] = 0xff;
                pos += 4;
            }

            if (pos >= 4 * 320 * 240) {
                ctx.putImageData(img, 0, 0);
                foto = canvas.toDataURL("image/png");
                $("#photo").val(foto);
                alert($("#photo").val()); 

                ctx2 = document.getElementById("canvas2").getContext("2d");
                ctx2.clearRect(0, 0, 320, 240);
                image2.src = 'http://blackberry12.com/uploads/allimg/110311/2-110311153Z90-L.jpg';
                ctx2.drawImage(image2,0,0);           

                pos = 0;
            }
        };
</script> 
```

如果我将 image2.src 更改为 foto 或 $("#photo").val() 我不会得到任何东西，只是一张白色的画布。

**编辑** 根据我的调查，每次拍摄照片并编码时，我都会得到相同的 base64 代码。看起来base64代码真的是一个白屏。任何人都可以在这里帮忙，看不到我在哪里犯了错误。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-25T20:24:50.483

绝对地。

```
var img = new Image();
img.src = "data:image/png;base64,.............";
ctx.drawImage(img,0,0); 
```

该图像可立即用于绘图。

# string - 如何使用 Htaccess 将带有查询字符串的 URL 发送到 404 页面？(1 个帖子)

> ID：14529740
> 
> 赞同：0
> 
> 时间：2013-01-25T20:21:00.540
> 
> 标签：string, wordpress, .htaccess, http-status-code-404

使用：Wordpress 编辑：.htaccess

是否可以使用 .htaccess 将带有特定查询字符串（垃圾邮件）的 URL 发送到默认的 WordPress 404 页面？

我目前使用以下代码将此类参数 301 重定向到 .htaccess 中的原始页面。

```
RewriteEngine On

RewriteCond %{QUERY_STRING} (^|&)spamword1 [NC,OR]
RewriteCond %{QUERY_STRING} (^|&)spamword2 [NC,OR]
RewriteCond %{QUERY_STRING} (^|&)spamword3 [NC]

RewriteRule (.*) /$1? [R=301,L] 
```

例如：

[http://www.mysite.com/page/3/?spam](http://www.mysite.com/page/3/?spam) 301s 到[http://www.mysite.com/page/3/](http://www.mysite.com/page/3/)

但是有没有办法 404 这些页面而不是 301 重定向它们？如果我使用 301 重定向，Google 似乎认为它们是软 404。

对于技术上不存在的 URL，每个人总是推荐 404 页面。

我试过这个：

```
RewriteEngine on
RewriteCond %{QUERY_STRING}spamword
RewriteRule (.*) /404.php? [R,L] 
```

它将页面发送到默认的 Wordpress 404 URL（这很好），但服务器响应为“302 found”，我知道这是不正确的。

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-19T08:52:18.017

这个线程有更多信息 - [Redirect to Apache built-in 404 page with mod_rewrite?](https://stackoverflow.com/questions/2447106/redirect-to-apache-built-in-404-page-with-mod-rewrite)

基本上你需要添加 -

```
<?php
header( "HTTP/1.1 404 Not Found" );
exit;
?> 
```

在标头中，它解析为 404。

# c# - excel文件生成过程会在网络服务器风险文件锁上运行吗？

> ID：14529741
> 
> 赞同：0
> 
> 时间：2013-01-25T20:21:04.190
> 
> 标签：c#, asp.net, excel, office-interop

我想知道我是否需要做一些事情（线程等）来防止我的文件生成失败，因为多个用户试图同时运行生成过程。

如果有潜在的问题，我想知道避免它的任何想法。

我的过程概述。

1.  用户单击按钮以启动该过程。
2.  数据是从数据源收集的/虚拟化用于测试。
3.  Template.xls 已打开
4.  数据被插入到打开的模板中。
5.  为打开的 excel 文件调用 SaveAs。
6.  重复该过程，直到创建所有需要的文件。
7.  所有文件压缩在一起
8.  如果过程成功完成并提示用户下载文件的 zip，则会通知用户。

注意：由于目前这是概念证明，因此存在硬编码的文件名值。

请参阅下面的生成代码

```
private Boolean GenerateExcelFile(int filenum, int totalfiles, int Year)
    {
        String TemplateFilename = "C:\\exceldocs\\Templates\\OSHA300_Template.xls";

        try
        {
            Excel._Application oXL;
            Excel._Workbook oWB;
            Excel._Worksheet oSheet;

            //Start Excel and get Application object.
            oXL = new Excel.Application();
            oXL.Visible = false;

            //Open the workbook template.
            //oWB = (Excel._Workbook)(oXL.Workbooks.Add(Missing.Value));
            oWB = (Excel._Workbook)(oXL.Workbooks.Open(TemplateFilename));
            oSheet = (Excel._Worksheet)oWB.ActiveSheet;

            oSheet.Cells[3, 11] = Year;
            oSheet.Cells[PAGEOFROW, PAGEOFCOL] = filenum + " of " + totalfiles;
            int currentexcelrow = STARTROW;
            foreach (OSHArow row in this)
            {
                FillOutRow(oSheet, row, currentexcelrow++);
                if (currentexcelrow == 38)
                {
                    //break;
                }
            }
            FillOutSummaryRow(oSheet);
            File.Delete("C:\\exceldocs\\OshaOutput\\OSHA300_TestResult" + filenum + ".xls");
            oWB.SaveAs("C:\\exceldocs\\OshaOutput\\OSHA300_TestResult" + filenum + ".xls");
            oWB.Close(true);
        }
        catch (Exception e)
        {
            //TODO: configure an exception log.
            throw e;
            return false;
        }
        return true;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T20:28:31.227

最好使用 OpenXml 库之类的东西。您可以即时将 Excel 工作表写入流（然后将流作为 FileResults 返回以供用户下载到 XLSX 文件）。

[http://openxmldeveloper.org/](http://openxmldeveloper.org/)

# php - 最低 varchar 数量

> ID：14529745
> 
> 赞同：0
> 
> 时间：2013-01-25T20:21:15.353
> 
> 标签：php, mysql

我在比较 Mysql 数据库中的两个值并显示最低的值时遇到问题。

例如我有这个：

```
value1 = 23.4
value2 = 4.479 
```

我试过这个：

```
ORDER BY CAST(column AS SIGNED) ASC 
```

但它不工作

同样，字段类型是 VARCHAR。

我正在寻找的结果应该是 23.4 而不是 4.479

有什么建议么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-25T20:22:28.117

简而言之，如果要存储价格，则需要将列更改为 DECIMAL。VARCHAR 将按字母顺序排列。阅读 MySQL 中的[数字类型](http://dev.mysql.com/doc/refman/5.0/en/numeric-types.html)。

```
ALTER TABLE your_table MODIFY COLUMN price DECIMAL(10,3); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T20:52:02.463

一个非常昂贵的解决方法是在排序之前将所有值转换为十进制：

`SELECT name, price FROM test ORDER BY CAST(price AS DECIMAL(20, 10)) ASC LIMIT 1`

只需确保您的 DECIMAL 限制足以正确转换列中的所有值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T20:54:06.250

如果您将其转换为十进制，它将起作用。

```
select * from tablename order by cast(price as decimal);

+--------+-------+
| name   | price |
+--------+-------+
| nail   | 0.95  |
| glue   | 9.23  |
| hammer | 45.12 |
+--------+-------+ 
```

# sql - 从表单插入到不同的表中

> ID：14529749
> 
> 赞同：2
> 
> 时间：2013-01-25T20:21:38.510
> 
> 标签：sql, ms-access, vba, ms-access-2007

我试图在访问表单中输入数据时创建一个事件，在文本框失去焦点之后，如果框不为空，我希望将 ID 和值存储到另一个表中。尝试使用下面的代码后，我得到“运行时错误 3061 预期的参数太少 1”。我已经在调试模式下进行了检查，并且这些值被转移并带到了字符串中。

```
Private Sub Consolidate_LostFocus()
Dim queryString As String
queryString = "INSERT INTO [ReportMasterTable]([#], [Notes]) VALUES(" & [#].Value & ", " &   [Consolidate].Value & ")"

If Consolidate.Text <> vbNullString Then

    CurrentDb.Execute (queryString)

End If
End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T20:33:17.113

如果`#`或 中的`Notes`字段`ReportMasterTable`是文本数据类型，则必须在尝试的值周围添加引号`INSERT`。

例如，如果*两个*字段都是文本类型：

```
queryString = "INSERT INTO [ReportMasterTable]([#], [Notes])" & vbCrLf & _
    "VALUES ('" & [#].Value & "', '" & [Consolidate].Value & "')" 
```

`[#].Value`如果其中一个或`[Consolidate].Value`包含单引号，情况将更加复杂。您可以将插入值中的单引号加倍。但是，仅切换到参数化查询可能会更容易……引用问题将消失。

```
Dim db As DAO.database
Dim qdf As DAO.QueryDef
Dim strInsert As String
strInsert = "PARAMETERS hash_sign Text (255), note_value Text (255);" & vbCrLf & _
    "INSERT INTO [ReportMasterTable]([#], [Notes])" & vbCrLf & _
    "VALUES (hash_sign, note_value)"
Set db = CurrentDb
Set qdf = db.CreateQueryDef("", strInsert)
qdf.Parameters("hash_sign").value = Me.[#]
qdf.Parameters("note_value").value = Me.[consolidate]
qdf.Execute dbFailOnError
Set qdf = Nothing
Set db = Nothing 
```

您还可以将 SQL 语句保存为命名查询并打开并执行它，而不是每次运行过程时都重新构建语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T20:34:05.303

您是否有任何理由不希望将表单绑定到 ReportMasterTable？

如果您真的有一个名为# 的控件和字段，那么您将面临一个麻烦的世界。

如果您已将表单绑定到 ReportMasterTable 并且还在查询中进行更新，那么您将遇到问题。

失去焦点事件是一个非常糟糕的事件选择，任何时候任何人通过表单选项卡，代码都会运行。更新后会更好。

You are updating a text data type, but you have not used quotes.

```
"INSERT INTO [ReportMasterTable]([#], [Notes]) VALUES(" & [#].Value _
    & ", '" &   [Consolidate].Value & "')" 
```

# android - Android AlertDialog.Builder 方法 getContext() 未定义

> ID：14529752
> 
> 赞同：2
> 
> 时间：2013-01-25T20:21:46.263
> 
> 标签：android, dialog, undefined

AlertDialog.Builder 的参考页面有一个针对 API 11+ 列出的[getContext()方法，但此代码：](http://developer.android.com/reference/android/app/AlertDialog.Builder.html#getContext%28%29)

```
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_main);

    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    LayoutInflater inflater = LayoutInflater.from(builder.getContext());
} 
```

将在 Eclipse 中显示错误：

```
 The method getContext() is undefined for the type AlertDialog.Builder 
```

但我使用的是 API 级别 15，所以我认为它是可用的。谁能看到问题可能是什么？

# android - Android：如果从数据库中删除多于 1 行，则具有多项选择 ListView 的应用程序会中断

> ID：14529755
> 
> 赞同：1
> 
> 时间：2013-01-25T20:22:01.063
> 
> 标签：android, listview, android-listview, android-arrayadapter, updates

我正在学习 Android/Java，并且我有一个`ListView`附加到数据库，并且`simple_list_item_multiple_choice`在每一行中都包含一个复选框。当用户选中 1 个复选框并点击删除按钮时，该行将被删除并相应`ListView`更新。但是，如果用户检查多行，我的应用程序就会中断。

为什么我的应用程序在选择`ListView`要从附加数据库中删除的多行时会中断？

```
public class ListViewDisplayNumbers extends ListActivity {
public void DeleteNumber() {

    NumbersDataSource datasource = new NumbersDataSource(this);
    datasource.open();

    ListView listView = (ListView) findViewById(android.R.id.numberlist);
    SparseBooleanArray checked = listView.getCheckedItemPositions();

    List<Number> values = datasource.getAllNumbers();
    ArrayAdapter<Number> adapter = new ArrayAdapter<Number>(this, android.R.layout.simple_list_item_multiple_choice, values);

    for (int i = 0; i < checked.size(); i++) {
        int position = checked.keyAt(i);
        if (checked.valueAt(i))
            datasource.deleteNumber(adapter.getItem(position));
            adapter.remove(adapter.getItem(position)); //breaks on the last one of a multiple
    }

    adapter.notifyDataSetChanged();
    setListAdapter(adapter);
    datasource.close();
} 
```

日志猫：

```
01-25 12:26:06.236: E/AndroidRuntime(7140): FATAL EXCEPTION: main
01-25 12:26:06.236: E/AndroidRuntime(7140): java.lang.IndexOutOfBoundsException: Invalid index 3, size is 2
01-25 12:26:06.236: E/AndroidRuntime(7140):     at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:251)
01-25 12:26:06.236: E/AndroidRuntime(7140):     at java.util.ArrayList.get(ArrayList.java:304)
01-25 12:26:06.236: E/AndroidRuntime(7140):     at android.widget.ArrayAdapter.getItem(ArrayAdapter.java:337)
01-25 12:26:06.236: E/AndroidRuntime(7140):     at com.example.hw.ListViewDisplayNumbers.deleteNumber(ListViewDisplayNumbers.java:103)
01-25 12:26:06.236: E/AndroidRuntime(7140):     at com.example.hw.ListViewDisplayNumbers.onOptionsItemSelected(ListViewDisplayNumbers.java:128)
01-25 12:26:06.236: E/AndroidRuntime(7140):     at android.app.Activity.onMenuItemSelected(Activity.java:2507)
01-25 12:26:06.236: E/AndroidRuntime(7140):     at com.android.internal.policy.impl.PhoneWindow.onMenuItemSelected(PhoneWindow.java:982)
01-25 12:26:06.236: E/AndroidRuntime(7140):     at com.android.internal.view.menu.MenuBuilder.dispatchMenuItemSelected(MenuBuilder.java:735)
01-25 12:26:06.236: E/AndroidRuntime(7140):     at com.android.internal.view.menu.MenuItemImpl.invoke(MenuItemImpl.java:149)
01-25 12:26:06.236: E/AndroidRuntime(7140):     at com.android.internal.view.menu.MenuBuilder.performItemAction(MenuBuilder.java:874)
01-25 12:26:06.236: E/AndroidRuntime(7140):     at com.android.internal.view.menu.ListMenuPresenter.onItemClick(ListMenuPresenter.java:175)
01-25 12:26:06.236: E/AndroidRuntime(7140):     at android.widget.AdapterView.performItemClick(AdapterView.java:292)
01-25 12:26:06.236: E/AndroidRuntime(7140):     at android.widget.AbsListView.performItemClick(AbsListView.java:1393)
01-25 12:26:06.236: E/AndroidRuntime(7140):     at android.widget.AbsListView$PerformClick.run(AbsListView.java:3022)
01-25 12:26:06.236: E/AndroidRuntime(7140):     at android.widget.AbsListView$1.run(AbsListView.java:3817)
01-25 12:26:06.236: E/AndroidRuntime(7140):     at android.os.Handler.handleCallback(Handler.java:605)
01-25 12:26:06.236: E/AndroidRuntime(7140):     at android.os.Handler.dispatchMessage(Handler.java:92)
01-25 12:26:06.236: E/AndroidRuntime(7140):     at android.os.Looper.loop(Looper.java:137)
01-25 12:26:06.236: E/AndroidRuntime(7140):     at android.app.ActivityThread.main(ActivityThread.java:4517)
01-25 12:26:06.236: E/AndroidRuntime(7140):     at java.lang.reflect.Method.invokeNative(Native Method)
01-25 12:26:06.236: E/AndroidRuntime(7140):     at java.lang.reflect.Method.invoke(Method.java:511)
01-25 12:26:06.236: E/AndroidRuntime(7140):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
01-25 12:26:06.236: E/AndroidRuntime(7140):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
01-25 12:26:06.236: E/AndroidRuntime(7140):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T20:35:20.423

尝试向后执行此操作

```
for (int i = checked.size()-1; i >=0;i--) {
    int position = checked.keyAt(i);
    if (checked.valueAt(i)){
        datasource.deleteNumber(adapter.getItem(position));
        adapter.remove(adapter.getItem(position)); //breaks on the last one of a multiple
     }
} 
```

理由：有一个类似的问题，遇到了[这个](https://stackoverflow.com/questions/5510216/encountered-indexoutofboundexception-while-removing-items-from-listview-in-andro)建议倒退的问题。不过这是有道理的，因为如果您前进，删除可能会弄乱索引，而如果您后退，则在修改列表时不应影响任何内容。

哦，我注意到您可能希望将两个适配器语句放在一个`if`块中。

# c# - 验证从文件读取的数据的 DataGridView 单元格

> ID：14529757
> 
> 赞同：1
> 
> 时间：2013-01-25T20:22:16.317
> 
> 标签：c#, .net, winforms, datagridview

我有`DataGridView`几列无界。我创建了一个`CellValidating`函数，它运行良好。现在我正在尝试从文本文件中读取数据并将其放入`DataGridView`. 但是，当我这样做时，该`CellValidating`函数永远不会被调用。是否可以验证这样输入的数据？

编辑：这是我的`CellValidate`功能的一部分：

```
private void Grid_CellValidating(object sender, DataGridViewCellValidatingEventArgs e)
{
    string headerText = Grid.Columns[e.ColumnIndex].HeaderText;

        switch (headerText)
        {
            case "Number":

                if (!String.IsNullOrEmpty(e.FormattedValue.ToString()))
                {
                    if (!Regex.IsMatch(e.FormattedValue.ToString(), @"(^\d{1,2}$)"))
                    {
                        MessageBox.Show("Number must be a 1 or 2 digit positive number");
                        e.Cancel = true;
                    }
                }
        }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T20:51:27.800

CellValidating 和 RowValidating 事件在当前单元格/行被更改或结束编辑操作时触发。您应该能够使用 BeginEdit 和 EndEdit 强制验证触发器。

# asp.net-mvc - 将聚合函数与 Kendo UI MVC Grid 包装器一起使用

> ID：14529758
> 
> 赞同：3
> 
> 时间：2013-01-25T20:22:21.170
> 
> 标签：asp.net-mvc, kendo-ui, kendo-grid

**眼镜**

剑道：2012.3.1114

.Net：4.5

MVC：4.0

**问题**

我使用 DataTable 作为模型绑定我的网格，我需要有聚合值。如果我使用下面的代码片段作为我的基础（取自 Kendo UI 代码库），似乎无法设置聚合函数。

```
@(Html.Kendo().Grid(Model)
    .Name("Grid")    
    .Columns(columns => {
        foreach (System.Data.DataColumn column in Model.Columns)
        {
            columns.Bound(column.DataType, column.ColumnName);
        }
    })
    .Pageable()
    .Sortable()
    .Scrollable()
    .Filterable()
    .Groupable()
    .DataSource(dataSource => dataSource
        .Ajax()
        .Read(read => read.Action("Read", "Home"))   
    )
) 
```

回到 Telerik MVC 控件的时代，我可以设置聚合函数，您可以在添加绑定列的同时设置聚合，但在已向下移动到 DataSource 内部的 Kendo UI 包装器中。

Telerik 网格：

```
columns.Bound("ColumnName").Aggregate(aggregates => aggregates.Count().Min().Max()) 
```

如果我尝试在 DataSource 中设置聚合，我会得到一个可爱的异常“'count' is undefined”，这有点模糊。

```
if (column.ColumnName == "ProductID")
{
    columns
        .Bound(column.DataType, column.ColumnName)
        .ClientFooterTemplate("Count: #=count#");
}
...
.Aggregates(aggregates =>
{
aggregates.Add(a => "ProductID").Count();
}) 
```

有什么办法可以解决聚合问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-01T01:28:25.400

虽然这并不能解决在数据网格上执行求和函数的问题，但这个答案是由 Kendo UI/Telerik 支持团队提供的，并且确实解决了上面关于计数函数的问题：

```
@(Html.Kendo().Grid<dynamic>()
    .Name("Grid")
    .Columns(columns =>
    {
        foreach (System.Data.DataColumn column in Model.Columns)
        {

            var boundColumn = columns.Bound(column.ColumnName);
            if (column.ColumnName == "ProductID")
            {
                boundColumn.ClientFooterTemplate("#= data.ProductID !== undefined ? ProductID.count : ''#");
            }
        }
    })
    .Pageable()
    .Sortable()
    .AutoBind(false)
    .Scrollable()
    .Filterable()
    .Groupable()
    .DataSource(dataSource => dataSource
        .Ajax()
        .Model(model =>
            {
                foreach (System.Data.DataColumn column in Model.Columns)
                {

                    model.Field(column.ColumnName, column.DataType);
                }
            })
        .Read(read => read.Action("Read", "Home"))
    )
)

<script>
    $(document).ready(function () {
        var grid = $("#Grid").data("kendoGrid");
        grid.dataSource.aggregate(
            [
                {
                    field: "ProductID",
                    aggregate: "count"
                }
            ]);
    });
</script> 
```

# c# - Web 请求中的超时似乎没有得到尊重

> ID：14529761
> 
> 赞同：1
> 
> 时间：2013-01-25T20:22:33.400
> 
> 标签：c#, timeout

如果 timint out 需要超过 10 秒，我希望我的 http get 请求失败。

我有这个：

```
var request = (HttpWebRequest)WebRequest.Create(myUrl);

request.Method = "GET";
request.Timeout = 1000 * 10; // 10 seconds

HttpStatusCode httpStatusCode = HttpStatusCode.ServiceUnavailable;

using (var webResponse = (HttpWebResponse)request.GetResponse())
{
    httpStatusCode = webResponse.StatusCode;
} 
```

当我在请求中输入错误的 URL 时，它似乎并没有超时，它只是持续了很长时间（似乎是几分钟）。

为什么是这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T20:26:32.787

如果您在 Web 项目中执行此操作，请确保文件中标记的`debug`属性设置为“false”。`system.web/compilation``Web.Config`

如果是控制台应用程序等，请以“发布”模式编译。

在“调试”模式下会忽略很多超时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T20:26:56.533

您的代码可能正在对错误 URL 执行 DNS 查找，这至少需要 15 秒。

根据[HttpWebRequest.Timeout的文档](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.timeout.aspx)

> 域名系统 (DNS) 查询最多可能需要 15 秒才能返回或超时。如果您的请求包含需要解析的主机名，并且您将 Timeout 设置为小于 15 秒的值，则可能需要 15 秒或更长时间才能引发 WebException 以指示您的请求超时。

[您可以使用Dns.GetHostEntry](http://msdn.microsoft.com/en-us/library/ms143998%28v=vs.80%29.aspx)执行 DNS 查找，但默认情况下看起来需要 5 秒。

# macos - How to measure graphic performance of Mac app?

> ID：14529774
> 
> 赞同：4
> 
> 时间：2013-01-25T20:23:27.237
> 
> 标签：macos, cocoa, core-animation

In an iOS Xcode app, you can use the Core Animation Instrument to measure graphics performance issues such like laggy UITableView scrolling. I want to do the same on the Mac for some layer backed views I am debugging. In particular I would like to measure frame rate. Any ideas how to do this since the Core Animation instrument isn't available for Mac apps?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T09:15:05.567

Frame Meter 在“Quartz Debug”中可用

*   菜单 Xcode > 打开开发者工具 > 更多开发者工具……</li>
*   将打开 developer.apple.com，您必须登录
*   下载“Xcode 图形工具 - 2013 年 1 月”
*   然后对帧计使用“Quartz Debug”

# javascript - 谷歌地图设置我的位置

> ID：14529775
> 
> 赞同：1
> 
> 时间：2013-01-25T20:23:27.343
> 
> 标签：javascript, google-maps

```
var myloc;
function initialize() {

  if (navigator.geolocation) navigator.geolocation.getCurrentPosition(function(pos) {
    var me = new google.maps.LatLng(pos.coords.latitude, pos.coords.longitude);
    myloc.setPosition(me);
    myloc.setMap(map);
  }, function(error) {
      // ...
  });

  var mapOptions = {
    zoom: 14,
    center: me,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  };

  var mylocOptions = {
    title: "You are here..."
  };

  var map = new google.maps.Map(document.getElementById("map_canvas"), 
      mapOptions);

  myloc = new google.maps.Marker(mylocOptions);
} 
```

我检查了[另一个问题](https://stackoverflow.com/questions/9142833/show-my-location-on-google-maps-api-v3)，觉得我在某个地方找到了这个。当我（第一次）打开应用程序时，它会询问我是否允许使用我的位置。我想我简化了 myloc 选项，我对默认外观和用于测试的标记的所有内容都很好。但是，在允许它之后，什么也没有发生。 `me is undefined`. 也许我按错误的顺序做某事？

没有位置，我可以用其他标记来绘制地图，所以......这一定是订单？我尝试了一些变化...

在浏览器放弃一般坐标后，我想最终在地图上放置一个标记。最终这将在数据库中移动和更新，但显然我还不担心这一点。婴儿步...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T20:26:05.657

首次初始化时，不要将标记的位置设置为我。因为`me`在用户允许浏览器使用他们的位置后可用。当你得到他们的位置时就去做。

```
var mylocOptions = {
  title: "You are here..."
};

if (navigator.geolocation) navigator.geolocation.getCurrentPosition(function(pos) {
  var me = new google.maps.LatLng(pos.coords.latitude, pos.coords.longitude);
  myloc.setPosition(me);
  myloc.setMap(map);
  map.setCenter(me);
}, function(error) {
  // ...
}); 
```

也删除

```
center: me 
```

你定义的地方`map`。

# jquery - Knockout Observable 和 Google Chrome 自动填充问题

> ID：14529778
> 
> 赞同：3
> 
> 时间：2013-01-25T20:23:48.843
> 
> 标签：jquery, google-chrome, knockout.js

基本上，我在登录表单上有一个登录按钮，可以很好地与 jQuery 1.8.3（我已经尝试过 1.9.0）和 Knockout 2.2.1 observables 以及启用/禁用登录按钮的绑定。

当计算函数发现缺少用户名或密码时，启用按钮被禁用。

但是，当 Google Chrome (24.0.1312.56 m) 在页面加载后片刻自动填充文本框时，就会出现问题。当 Chrome 更新文本框时，viewmodel 和计算的 observable 不会检测到，因此按钮保持禁用状态。

我做了一个基本的jsfiddle。我不知道如何让 jsfiddle 自动填充来显示这个问题 :) 你只需要相信我。

Javascript/视图模型

```
$(document).ready(function(e) {
    var loginViewModel = function() {

        var self=this;
        self.loginName = ko.observable("");
        self.loginPass = ko.observable("");

        self.loginInfoValid = ko.computed(function() {

            if (self.loginName().length > 0 && self.loginPass().length > 0) {
                return true;
            } else {
                return false;
            }

        });

    };

    ko.applyBindings(new loginViewModel());     
}); 
```

HTML

```
<input type="text" data-bind="value: loginName, valueUpdate:'afterkeydown'"><br>
<input type="text" data-bind="value: loginPass, valueUpdate:'afterkeydown'"><br>
<span data-bind="text: loginName"></span><br>
<button data-bind="enable: loginInfoValid">Login</button> 
```

jsfiddle：http: [//jsfiddle.net/vW6Xy/1/](http://jsfiddle.net/vW6Xy/1/)

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T20:46:54.420

你可以

*   将`change`事件处理程序绑定到文本对象并手动调用该`self.loginInfoValid`方法，或者
*   用于`setTimeout`等待一小段时间并手动调用该`self.loginInfoValid`方法。

如果`change`在 Chrom 自动填充时引发事件，那将是我首选的两者解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-14T11:50:52.693

找到了一种很好的不引人注目的方式，例如：

```
var emailInput = $('#email');
var passwordInput = $('#password');

emailInput.on('blur', function () { passwordInput.trigger('change'); }); 
```

因此，当您失去对电子邮件/用户输入的关注时，它将触发密码输入上的更改事件，从而导致视图模型上的密码属性被更新。

# objective-c - Objective-C 何时隐式转换为 BOOL？

> ID：14529781
> 
> 赞同：3
> 
> 时间：2013-01-25T20:24:01.557
> 
> 标签：objective-c, boolean, type-conversion

我阅读了[Mike Ash 的 Objective-C 陷阱页面](http://www.mikeash.com/pyblog/friday-qa-2012-12-14-objective-c-pitfalls.html)，现在我对隐式类型的变量转换`id`为`BOOL`.

假设我有一个低位清零的“危险”指针，因此即使它指向有效对象，将其转换为 a`BOOL`也会产生。`NO`我们称之为“危险”指针`foo`。

简单的 if 语句如何工作？if 语句在评估条件时是否`foo`转换为 a ？`BOOL`或者它是否转换为纯布尔值？

```
if( foo )
{
  [myArray addObject:foo];
} 
```

它在三元表达式中的工作方式相同吗？

```
// Does this break when foo is 'dangerous'?
self.titleLabel.hidden = foo ? YES : NO ; 
```

或者，如果我这样做，三元组只会中断：

```
// I'm pretty sure it breaks now
self.titleLabel.hidden = ((BOOL)foo) ? YES : NO ; 
```

我觉得我缺少一些关于 C 中逻辑运算的基本知识，以及它们与`BOOL`. 请帮我解惑。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-25T20:30:09.837

> Objective-C 何时隐式转换为 BOOL？

永远不要，因为这个短语在语义上是不正确的。根据定义，演员表是显式的。您要问的内容称为“隐式类型转换”（强制-谢谢，乔希！）。

此外，严格来说，Objective-C 中的条件并不特殊：它们继承自 C。因此，当需要将表达式作为布尔值进行评估时，它们不会被视为`BOOL`，而是被视为`int`。

```
// Does this break when foo is 'dangerous'?`
self.titleLabel.hidden = foo ? YES : NO; 
```

不，它没有。`(expr)`当用作“布尔”表达式时，等效于`(expr != 0)`. 这里没有风险。

```
// I'm pretty sure it breaks now
self.titleLabel.hidden = ((BOOL)foo) ? YES : NO; 
```

现在这可能会中断，因为`BOOL`它只是类型化为`signed char`，在 iOS 上是 8 位。因此，如果`foo`是（32 位）指针，被截断为 8 位，并且指针的低 8 位全为零，但指针本身不是`nil`，这将错误地报告错误。你不想做这种多余的、丑陋的和危险的演员阵容。如果你想更明确，写

```
var = (obj != nil) ? valueOne : valueTwo; 
```

反而。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T20:31:47.747

你的前两个样本中没有演员表。写 if(expr) 等于写 if(expr == 0)。

如您所参考的文章中所述，您的第三个示例在某些情况下确实可能会中断。

# python - 如何在 nltk 中使用正则表达式标记器？

> ID：14529782
> 
> 赞同：3
> 
> 时间：2013-01-25T20:24:12.590
> 
> 标签：python, nltk, pos-tagger

如果我尝试这段代码：

```
import nltk
pattern = [(r'(March)$','MAR')]
tagger=nltk.RegexpTagger(pattern)
print tagger.tag('He was born in March 1991') 
```

我得到这样的输出：

> [('H', None), ('e', None), ('', None), ('w', None), ('a', None), ('s', None), (' '，无），>（'b'，无），（'o'，无），（'r'，无），（'n'，无），（''，无），（'i'，无），（'n'，无），（''，无），（'M'，无），（'a'，无），（'r'，无），（'c'，无）， ('h', None), ('', None), ('1', None), ('9', None), ('9', None), ('1', None)]

事实上，我希望这个标注器能够识别带有“MAR”标签的“March”单词。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-26T03:17:25.303

在这里试试这个：

```
import nltk
pattern = [(r'(March)$','MAR')]
tagger = nltk.RegexpTagger(pattern)
print tagger.tag(nltk.word_tokenize('He was born in March 1991')) 
```

您必须标记单词。

这是我得到的输出：

```
[('He', None), ('was', None), ('born', None), ('in', None), ('March', 'MAR'), ('1991', None)] 
```

# c# - C# 等价于 Perl 的 unpack("B32", pack("N", $arg));

> ID：14529784
> 
> 赞同：0
> 
> 时间：2013-01-25T20:24:15.173
> 
> 标签：c#

我需要帮助在 C# 中查找整数的 32 位二进制表示。在 Perl 中，我使用`unpack("B32", pack("N", $arg))`.

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T20:33:40.567

像这样的东西：

```
int x = some_value;
var networkOrder = IPAddress.HostToNetworkOrder(x);
var result = Convert.ToString(networkOrder, 2).PadLeft(32, '0'); 
```

详情请参考[类似问题](https://stackoverflow.com/q/6321802/490018)。

# ruby-on-rails - 带有设计的 Rails role_model 给出错误“未定义的方法 `roles_mask='”

> ID：14529785
> 
> 赞同：1
> 
> 时间：2013-01-25T20:24:16.783
> 
> 标签：ruby-on-rails, devise, cancan, object-role-modeling

我有一个带有设计的应用程序。我安装了 role_model 和 cancan gem。我将 user.rb 更新为：

```
require 'rubygems'
require 'role_model'

class User < ActiveRecord::Base
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  attr_accessible :email, :password, :password_confirmation, :remember_me, :roles, :roles_mask

  include RoleModel

  roles_attribute :roles_mask

  roles :admin, :contributor, :guest
end 
```

然后，在rails控制台中我尝试

```
> u = User.find(:first)
  User Load (1.2ms)  SELECT "users".* FROM "users" LIMIT 1
 => #<User id: ...
> u.roles = [:admin]
NoMethodError: undefined method `roles_mask=' for #<User:0x00000002b57500>
    from /home/xxx/.rvm/gems/ruby-1.9.3-p194@rails-3.2.11/gems/activemodel-3.2.11/lib/active_model/attribute_methods.rb:407:in `method_missing' 
```

角色掩码从何而来？我需要包含其他内容吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-25T21:31:55.723

除了安装 gems 之外，`roles_mask`还必须将列添加到`users`表中，就像在这个迁移中一样

```
class AddRolesMaskToUser < ActiveRecord::Migration
  def change
    add_column :users, :roles_mask, :integer
  end
end 
```

这解决了问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-20T06:41:37.487

这个问题与对象角色建模（建模语言）无关。这是关于如何为对象的角色建模，这是一个完全不同的主题（角色这个词在这里有完全不同的含义）。

另一方面，如果您想将对象角色建模与 Rails 结合起来，Constellation Query Language (CQL) 是 ORM 的纯文本版本，并且还包含针对 Rails 的生成器。

# mysql - 使用语法创建表错误

> ID：14529787
> 
> 赞同：0
> 
> 时间：2013-01-25T20:24:27.637
> 
> 标签：mysql

我正在尝试在数据库中创建一个表，我正在使用 mysql 5.5（我在 MAMP 中使用 myphpadmin）下面是我的表，我一直在使用 mysql 手册，看起来这里的一切都是应该的？但我不断收到此错误 #1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 ''users'('id' int UNSIGNED NOT NULL auto_increment PRIMARY KEY, 'username' VAR' 附近使用正确的语法

```
CREATE TABLE 'users'(
 'id' int UNSIGNED NOT NULL auto_increment PRIMARY KEY,
 'username' VARCHAR(16) NOT NULL, 
 'password' VARCHAR(16) NOT NULL,
 'name'VARCHAR(35) NOT NULL,
 'entry'text NOT NULL,
 'date_created' timestamp NOT NULL DEFAULT NOW(),
  key('username')
  ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T20:27:53.177

您需要使用反引号而不是单引号：

```
CREATE TABLE `users`(
 `id` int UNSIGNED NOT NULL auto_increment PRIMARY KEY,
 `username` VARCHAR(16) NOT NULL, 
 `password` VARCHAR(16) NOT NULL,
 `name` VARCHAR(35) NOT NULL,
 `entry` text NOT NULL,
 `date_created` timestamp NOT NULL DEFAULT NOW(),
  key(`username`)
  ); 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/a2e25)。

*注意：*或根本不使用反引号：

```
CREATE TABLE users(
 id int UNSIGNED NOT NULL auto_increment PRIMARY KEY,
 username VARCHAR(16) NOT NULL, 
 password VARCHAR(16) NOT NULL,
 name VARCHAR(35) NOT NULL,
 entry text NOT NULL,
 date_created timestamp NOT NULL DEFAULT NOW(),
  key(username)
  ); 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/d9ee7)

# swing - JTable setCellRenderer 将文本字段格式化为日期？

> ID：14529789
> 
> 赞同：3
> 
> 时间：2013-01-25T20:24:46.117
> 
> 标签：swing, date, jtable, tablecellrenderer

我有一个 SQLite 数据库，其日期存储为`VARCHAR`(yyyy-mm-dd)，例如`'2013-01-25'`。我的查询从表中检索记录并将其显示为已存储。我需要将我的`VARCHAR`数据显示`JTable`为“2013 年 1 月 25 日星期五”。我怀疑对包含 VARCHAR 的列使用**setCellRenderer是可行的方法。**此外，我认为这将是一个两步过程：首先，将 VARCHAR 转换为日期值，然后根据需要格式化日期。如果我从 中获取 VARCHAR 值`JTable`并将其显示在 a 中，我可以这样做`JTextField`：

```
MyDate = new SimpleDateFormat("yyyy-MM-dd").parse(rs.getString("My_Date")); 
```

然后根据需要对其进行格式化

```
MyDateStr = new SimpleDateFormat("EEEE MMMM d, yyyy").format(MyDate); 
```

这一切都很好；但是，我需要列中的格式化显示`JTable`。我从来没有使用过`setCellRenderer`，所以我可以使用一些帮助入门。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T03:04:29.723

`Rob Camick`关于[表格格式渲染器](http://tips4java.wordpress.com/2008/10/11/table-format-renderers/)的帖子可能会解决您的问题。

**更新：**

[我尝试了一个使用mKorbel](https://stackoverflow.com/a/6517504/967638)代码的示例（因为我也很想看看`DateFormat`到目前为止我还没有做过的 JTable） 。我给出的格式是.`input``"2013-01-25"`

![日期格式示例](../Images/d12b2171e94c708a4a09a9ed78a9c190.png)

```
import java.awt.Dimension;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.Locale;
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.table.DefaultTableCellRenderer;

public class JTableDateFormat {
public static void main(String[] args) {
    Object[][] data = {
                       {"Amar", "2013-01-25"},
                       {"Sammy", "2013-01-25"} 
                      };
    Object[] columnNames = {"Name", "Date"};
    JTable table = new JTable(data, columnNames);
    table.getColumnModel().getColumn(1).setCellRenderer(new DateRenderer());
    JFrame frame = new JFrame();
    frame.add(new JScrollPane(table));
    frame.setSize(new Dimension(400, 100));
    frame.setVisible(true);
}
}

class DateRenderer extends DefaultTableCellRenderer {

private static final long serialVersionUID = 1L;
private Date dateValue;
private SimpleDateFormat sdfNewValue = new SimpleDateFormat("EE MMM dd hh:mm:ss z yyyy");
private String valueToString = "";

@Override
public void setValue(Object value) {
    if ((value != null)) {
        String stringFormat = value.toString();
        try {
            dateValue = new SimpleDateFormat("yyyy-mm-dd", Locale.ENGLISH).parse(stringFormat);
        } catch (ParseException e) {
            e.printStackTrace();
        }
        valueToString = sdfNewValue.format(dateValue);
        value = valueToString;
    }
    super.setValue(value);
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-15T06:33:48.213

开这样的课...

```
 public class DateRenderer extends DefaultTableCellRenderer {

    public DateRenderer() { // This is a contructor
        DateFormatter formatter = new DateFormatter("yyyy-MM-dd");
    }

    public class DateFormatter extends SimpleDateFormat { //This another class within a class

        public DateFormatter(String pattern) {
            super(pattern);
        }
    }
} 
```

> 并将其添加到您的面板 >> jTable.setDefaultRenderer(Date.class, new DateRenderer());

# macos - 麦克波特？它去哪儿了？

> ID：14529795
> 
> 赞同：-1
> 
> 时间：2013-01-25T20:24:55.220
> 
> 标签：macos, command-line

在安装 Homebrew 的过程中，我移动了一个文件。我运行的命令是：

```
sudo mv /opt/local~/macports 
```

我的猜测（因为我的命令行/linux 命令有限）是 /opt/local 已移至 /macports？

那么我应该只运行相反的命令吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T20:33:23.510

如果是`sudo mv /opt/local ~/macports`（带空格），则相反

```
sudo mv ~/macports/local /opt 
```

# asp.net-mvc - 是否可以使用带有嵌套类的 dropdownlistfor 动态设置 selectedvalue？

> ID：14529798
> 
> 赞同：0
> 
> 时间：2013-01-25T20:24:57.827
> 
> 标签：asp.net-mvc, razor-2

我有一个类 Farm，其中包含 Animal 类型的类列表。

```
public class Farm {
    public list<Animal> Animals;
    // other members..
} 
public class Animal {
    public string Name;
    public string Family;
} 
```

我想为我的 Farm 对象创建一个 createOrEdit 视图，并且我想将 DropDownLists 用于动物的名称和家庭。选择来自数据库。

当我将 Animal 模型传递给视图进行编辑时，我希望 DropDownLists 以某种方式匹配每个动物的属性并设置列表的选定值。

我已经尝试了很多这样的事情：

```
@for(int i = 0; i < Model.Animals.Count; i++)
{ 
    @Html.DropDownListFor(model => model.Animals[i].Name, Model.AnimalNames) 
    // where Model.AnimalNames is a SelectList

    @Model.Animals[i].Name // (for testing) this properly displays the name I want to be selected in the list
} 
```

我在这个网站上看到了很多关于在控制器中创建 SelectLists、迭代每个项目并在适当的地方设置 selected 属性的建议。但是必须有一种更清洁的方法......如果我的农场有 100 只动物怎么办。在控制器中创建 200 个 SelectList，遍历它们中的每一个以匹配选定的值，然后将其传递给视图似乎并不合理。

那么，我有没有一种简单的方法来获取 Animal.Name[i] 值并在 DDL 中找到它的匹配列表项？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T20:48:35.100

在您的 foreach 循环中，您可以执行以下操作：

```
@for(int i = 0; i < Model.Animals.Count; i++)
{ 
   var original = Model.AnimalNames;
   var animalSelected = new SelectList(original.Items, original.DataValueField, original.DataTextField, model.Animals[i].Name);

   @Html.DropDownListFor(model => model.Animals[i].Name, animalSelected)

} 
```

这样，在您的控制器中，您只创建一个带有 AnimalNames 的 SelectList...，在您的视图中，您创建 SelectList 并为每个选择值。

当使用需要显示每个项目的当前值的可编辑项目列表时，我们使用这种方法。

# ios - 用户位置错误

> ID：14529799
> 
> 赞同：-1
> 
> 时间：2013-01-25T20:24:58.640
> 
> 标签：ios, objective-c, mkmapview

嗨，我有这段代码可以放大用户的位置。

```
-(IBAction)getLocation{

mapview.showsUserLocation = YES;

MKCoordinateRegion region = { {0.0, 0.0}, {0.0, 0.0} };
region.center = mapview.userLocation.coordinate;
region.span.longitudeDelta = 0.1f;
region.span.latitudeDelta = 0.1f;

[mapview setRegion:region animated:YES];

} 
```

在第一次按下按钮时，地图移动到坐标 0,0，但是在任何后续按下时，它都会正常工作并将地图带到用户位置。我不知道为什么它在第一次运行时不起作用但之后每次都起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T23:49:50.907

尝试这个：

```
- (IBAction)showCurrentLocation:(id)sender {
self.mapview.showsUserLocation=YES;
self.mapview.delegate = self;
[self.mapview setUserTrackingMode:MKUserTrackingModeFollow animated:YES]; 
```

}

# python - 如何拆分socket的返回，gethostbyaddr并写入文件？

> ID：14529800
> 
> 赞同：1
> 
> 时间：2013-01-25T20:25:01.887
> 
> 标签：python, python-2.7, split, gethostbyaddr

我有一个脚本，它从文件中读取地址并使用 socket.gethostbyaddr 查找其主机名，但是这个函数的返回是混乱的，看起来不正确。

它写入目标文件的行读取：

```
destfile.write(str(socket.gethostbyaddr(ip))) 
```

当它读取 8.8.8.8 时，结果是这样的：

```
('google-public-dns-a.google.com', [], ['8.8.8.8]) 
```

但是，我只需要第一个输出 google-public-dns-a.google.com。我希望让它写入文件并如下所示：

```
8.8.8.8 resolves to google-public-dns-a.google.com 
```

有谁知道这个怎么拆分？如果需要，可以提供更多代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T20:31:55.910

您要做的是解压缩包含您想要的信息的元组。有多种方法可以做到这一点，但这是我会做的：

```
(name, _, ip_address_list) = socket.gethostbyaddr(ip)
ip_address = ip_address_list[0]
destfile.write(ip_address + " resolves to " + name) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-25T20:32:24.410

好吧，第一步是将单行拆分为多行：

```
host = socket.gethostbyaddr(ip) 
```

现在，您可以为所欲为。如果您不知道自己想做什么，请尝试打印`host`出`type(host)`. 您会发现它`tuple`包含 3 个元素（尽管在这种情况下，您可能已经从写入文件的字符串中猜到了），并且您想要第一个。所以：

```
hostname = host[0] 
```

或者：

```
hostname, _, addrlist = host 
```

现在，您可以将其写入输出：

```
destfile.write('{} resolves to {}'.format(ip, hostname)) 
```

发现相同信息的另一种方法是查看[文档](http://docs.python.org/2/library/socket.html#socket.gethostbyaddr)，其中说：

> 返回一个三元组 (hostname, aliaslist, ipaddrlist)，其中 hostname 是响应给定 ip_address 的主要主机名，aliaslist 是相同地址的备用主机名列表（可能为空），ipaddrlist 是 IPv4/v6 地址列表对于同一主机上的同一接口（很可能只包含一个地址）。

或者使用解释器中的内置帮助：

```
>>> help(socket.gethostbyaddr)
gethostbyaddr(host) -> (name, aliaslist, addresslist)

Return the true host name, a list of aliases, and a list of IP addresses,
for a host.  The host argument is a string giving a host name or IP number. 
```

# java - java线程池和可变参数

> ID：14529803
> 
> 赞同：0
> 
> 时间：2013-01-25T20:25:10.590
> 
> 标签：java, multithreading

这是我的代码：

```
final int g = 0;

ExecutorService threadPool = Executors.newFixedThreadPool(10);
for (int i = 0; i < 10; i++) {
    threadPool.submit(new Runnable() {
        public void run() {
            g++;
            myFunc(g);
        }
    });
} 
```

显然，由于对变量 g 的并发访问，这不起作用。

我已经尝试了很多东西，但没有设法找到一个好的和简单的方法来修复它。有什么解决办法吗？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-25T20:28:29.357

在您的示例中， g 是一个原始常量，因此您无法更改它。另一方面，它必须是一个常量才能从 Runnable 实现中访问。如果你想修改它，你必须使用一些线程安全的类，比如 AtomicInteger。

尝试这个：

```
 final AtomicInteger g = new AtomicInteger()

    ExecutorService threadPool = Executors.newFixedThreadPool(10);
    for (int i = 0; i < 10; i++) {
        threadPool.submit(new Runnable() {
            public void run() {
                int local = g.incrementAndGet();
                myFunc(local);
            }
        });
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T20:57:28.453

在您的示例中，您可以将声明移动`g`到`for`循环中，分配`i`给`final g`，然后在 中使用它`run()`。

```
ExecutorService threadPool = Executors.newFixedThreadPool(10);
for (int i = 0; i < 10; i++) {
  final int g = i+1;
  threadPool.submit(new Runnable() {
    public void run() {
      myFunc(g);
    }
  });
} 
```

# functional-programming - 如何从 sml/ml 中的 TextIO 获取字符串？

> ID：14529807
> 
> 赞同：1
> 
> 时间：2013-01-25T20:25:21.713
> 
> 标签：functional-programming, sml, ml

我正在尝试从 SML 文件中读取文本。最后，我想要一个单词列表；但是，我正在努力解决如何将 a 转换`TextIO.elem`为 a `string`。例如，如果我编写以下代码，它会返回 a`TextIO.elem`但我不知道如何将其转换为字符串，以便可以将其与另一个字符串连接

`TextIO.input1 inStream`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T00:40:06.630

`TextIO.elem`只是 的同义词`char`，因此您可以使用该`str`函数将其转换为字符串。但正如我在其他地方回答的那样，我建议立即使用`TextIO.inputAll`来获取字符串。

这是一个函数，它接受一个 instream 并在其中传递所有（剩余的）单词：

```
val words = String.tokens Char.isSpace o TextIO.inputAll 
```

这个函数的类型是`TextIO.instream -> string list`。

# javascript - 在照片中标记朋友上传 facebook api

> ID：14529810
> 
> 赞同：1
> 
> 时间：2013-01-25T20:25:36.077
> 
> 标签：javascript, facebook, facebook-graph-api, facebook-javascript-sdk

如何在我的上传中标记朋友？

我已经尝试过了，但似乎无法正常工作。

```
 var tags = "{'tag_uid' : 10000,'x' : 100,'y': 100}";

 FB.api('me/photos', 'post', {
                    message: 'MyMessage',
                    status: 'success',
                    url: 'picture.png',
                    tags: tags
                }, function (response) {
                    if (!response || response.error) {
                       alert("Could not upload. " + response.error);
                    } else {
                        alert("Yihad!");
                    }
   }) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-01-05T06:10:09.657

参数标签必须是数组，把标签做成数组，标签里放更多的值：

var标签= [{“tag_uid”：“abcdef”，“x”：“100”，“y”：“100”}，{“tag_uid”：“uvwxyz”，“x”：“100”，“y” : "100"}];

# java - 肥皂地铁转储

> ID：14529811
> 
> 赞同：0
> 
> 时间：2013-01-25T20:25:36.430
> 
> 标签：java, soap, microsoft-metro

我正在使用 -Dcom.sun.metro.soap.dump=true 转储我的 SOAP 请求和响应。

在我的 Glassfish 控制台中，我可以看到登录已生成 6 个日志条目：

3 在 Tube 中收到的请求消息和 3 在 Tube 中处理的请求消息。这些 SOAP“消息”中的每一个都有不同的实例 ID...：

这些消息可以被认为是重复的还是正常的？

```
INFO: Request message processed in Tube [ com.sun.xml.ws.api.pipe.helper.PipeAdapter ]   Instance [ 813 ] Engine [ com.sun.xml.ws.server.WSEndpointImpl@37100007 ] Thread [ http-thread-pool-1234(1) ]:
<?xml version='1.0' encoding='UTF-8'?>
<S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/">
<S:Body>
<ns16:loginRequest xmlns:dm="http://dm.app" xmlns:doc="http://doc.app"    xmlns:rights="http://rights.app" xmlns:alert="http://alert.app" xmlns:program="http://program.app" xmlns:med="http://med.app" xmlns:mon="http://mon.app" xmlns:device="http://device.app" xmlns:mail="http://mail.app" xmlns:report="http://report.app" xmlns:event="http://event.app" xmlns:wscommon="http://wscommon.app" xmlns:cc="http://cc.app" xmlns:form="http://form.app" xmlns:db="http://db.app" xmlns:ns16="http://patient.app">
<ns16:user>ye006</ns16:user>
<ns16:password>ye006</ns16:password>
<ns16:language>en</ns16:language>
<ns16:mode>standard</ns16:mode>
</ns16:loginRequest>
</S:Body>
</S:Envelope>

INFO: Request message received in Tube [ com.sun.xml.ws.api.pipe.helper.PipeAdapter ]    Instance [ 812 ] Engine [ com.sun.xml.ws.server.WSEndpointImpl@37100007 ] Thread [ http-thread-pool-1234(1) ]:
<?xml version='1.0' encoding='UTF-8'?>
<S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/">
<S:Body>
<ns16:loginRequest xmlns:dm="http://dm.app" xmlns:doc="http://doc.app"  xmlns:rights="http://rights.app" xmlns:alert="http://alert.app" xmlns:program="http://program.app" xmlns:med="http://med.app" xmlns:mon="http://mon.app" xmlns:device="http://device.app" xmlns:mail="http://mail.app" xmlns:report="http://report.app" xmlns:event="http://event.app" xmlns:wscommon="http://wscommon.app" xmlns:cc="http://cc.app" xmlns:form="http://form.app" xmlns:db="http://db.app" xmlns:ns16="http://patient.app">
<ns16:user>ye006</ns16:user>
<ns16:password>ye006</ns16:password>
<ns16:language>en</ns16:language>
<ns16:mode>standard</ns16:mode>
</ns16:loginRequest>
</S:Body>
</S:Envelope>

INFO: Request message processed in Tube [ com.sun.xml.ws.api.pipe.helper.PipeAdapter ] Instance [ 811 ] Engine [ com.sun.xml.ws.server.WSEndpointImpl@37100007 ] Thread [ http-thread-pool-1234(1) ]:
<?xml version='1.0' encoding='UTF-8'?>
<S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/">
<S:Body>
<ns16:loginRequest xmlns:dm="http://dm.app" xmlns:doc="http://doc.app" xmlns:rights="http://rights.app" xmlns:alert="http://alert.app" xmlns:program="http://program.app" xmlns:med="http://med.app" xmlns:mon="http://mon.app" xmlns:device="http://device.app" xmlns:mail="http://mail.app" xmlns:report="http://report.app" xmlns:event="http://event.app" xmlns:wscommon="http://wscommon.app" xmlns:cc="http://cc.app" xmlns:form="http://form.app" xmlns:db="http://db.app" xmlns:ns16="http://patient.app">
<ns16:user>ye006</ns16:user>
<ns16:password>ye006</ns16:password>
<ns16:language>en</ns16:language>
<ns16:mode>standard</ns16:mode>
</ns16:loginRequest>
</S:Body>
</S:Envelope>

INFO: Request message received in Tube [ com.sun.xml.ws.protocol.soap.ServerMUTube ] Instance [ 810 ] Engine [ com.sun.xml.ws.server.WSEndpointImpl@37100007 ] Thread [ http-thread-pool-1234(1) ]:
<?xml version='1.0' encoding='UTF-8'?>
<S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/">
<S:Body>
<ns16:loginRequest xmlns:dm="http://dm.app" xmlns:doc="http://doc.app" xmlns:rights="http://rights.app" xmlns:alert="http://alert.app" xmlns:program="http://program.app" xmlns:med="http://med.app" xmlns:mon="http://mon.app" xmlns:device="http://device.app" xmlns:mail="http://mail.app" xmlns:report="http://report.app" xmlns:event="http://event.app" xmlns:wscommon="http://wscommon.app" xmlns:cc="http://cc.app" xmlns:form="http://form.app" xmlns:db="http://db.app" xmlns:ns16="http://patient.app">
<ns16:user>ye006</ns16:user>
<ns16:password>ye006</ns16:password>
<ns16:language>en</ns16:language>
<ns16:mode>standard</ns16:mode>
</ns16:loginRequest>
</S:Body>
</S:Envelope>

INFO: Request message processed in Tube [ com.sun.xml.ws.protocol.soap.ServerMUTube ] Instance [ 809 ] Engine [ com.sun.xml.ws.server.WSEndpointImpl@37100007 ] Thread [ http-thread-pool-1234(1) ]:
<?xml version='1.0' encoding='UTF-8'?>
<S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/">
<S:Body>
<ns16:loginRequest xmlns:dm="http://dm.app" xmlns:doc="http://doc.app" xmlns:rights="http://rights.app" xmlns:alert="http://alert.app" xmlns:program="http://program.app" xmlns:med="http://med.app" xmlns:mon="http://mon.app" xmlns:device="http://device.app" xmlns:mail="http://mail.app" xmlns:report="http://report.app" xmlns:event="http://event.app" xmlns:wscommon="http://wscommon.app" xmlns:cc="http://cc.app" xmlns:form="http://form.app" xmlns:db="http://db.app" xmlns:ns16="http://patient.app">
<ns16:user>ye006</ns16:user>
<ns16:password>ye006</ns16:password>
<ns16:language>en</ns16:language>
<ns16:mode>standard</ns16:mode>
</ns16:loginRequest>
</S:Body>
</S:Envelope>

INFO: Request message received in Tube [ com.sun.xml.ws.server.sei.SEIInvokerTube ] Instance [ 808 ] Engine [ com.sun.xml.ws.server.WSEndpointImpl@37100007 ] Thread [ http-thread-pool-1234(1) ]:
<?xml version='1.0' encoding='UTF-8'?>
<S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/">
<S:Body>
<ns16:loginRequest xmlns:dm="http://dm.app" xmlns:doc="http://doc.app" xmlns:rights="http://rights.app" xmlns:alert="http://alert.app" xmlns:program="http://program.app" xmlns:med="http://med.app" xmlns:mon="http://mon.app" xmlns:device="http://device.app" xmlns:mail="http://mail.app" xmlns:report="http://report.app" xmlns:event="http://event.app" xmlns:wscommon="http://wscommon.app" xmlns:cc="http://cc.app" xmlns:form="http://form.app" xmlns:db="http://db.app" xmlns:ns16="http://patient.app">
<ns16:user>ye006</ns16:user>
<ns16:password>ye006</ns16:password>
<ns16:language>en</ns16:language>
<ns16:mode>standard</ns16:mode>
</ns16:loginRequest>
</S:Body>
</S:Envelope> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T19:22:46.303

好的，找到了答案，实际上它是通过不同管道的相同请求/响应对，因此请求/响应实际上被打印了 3 次。

为了将输出控制台缩小到只有请求/响应对的单个副本，请参阅系统中定义的管道：com.sun.xml.ws.protocol.soap.ServerMUTube、com.sun.xml.ws.api .pipe.helper.PipeAdapter 和 com.sun.xml.ws.server.sei.SEIInvokerTube...

这是参考： http: [//metro.java.net/guide/ch02.html#dumping-soap-messages-on-server](http://metro.java.net/guide/ch02.html#dumping-soap-messages-on-server)

# django - 使用 django-social-auth 注销

> ID：14529815
> 
> 赞同：8
> 
> 时间：2013-01-25T20:25:59.157
> 
> 标签：django, django-socialauth

我正在使用 twitter 身份验证对 django-social-auth 进行一些尝试。

我可以登录。

但是，当我尝试使用 注销时`django.contrib.auth.logout`，它不会注销。

注销的方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-19T15:17:31.320

您是想从 Django 应用程序中退出，还是想“忘记” Twitter 访问权限？通常，twitter auth token 会在用户下次想要连接到 twitter 时存储以简化登录，因此用户不必再次“接受”访问。

### Django注销

如果您只想从 Django 身份验证系统中注销，则使用该`django.contrib.auth.views.logout`视图或创建自定义注销视图就足够了。

### 社交身份验证断开连接

要完全取消链接/断开社交帐户，您需要使用 social-auth 中的断开连接功能。您可以使用以下模板标签获取断开连接 url：

```
{% url "socialauth_disconnect" "backend-name" %} 
```

有关更多信息，请参阅[http://django-social-auth.readthedocs.org/en/v0.7.22/configuration.html#linking-in-your-templates](http://django-social-auth.readthedocs.org/en/v0.7.22/configuration.html#linking-in-your-templates)。

### 强制批准提示

因为您已经允许您的应用访问 OAuth 提供程序，所以身份验证提供程序会记住该决定。通常有两种方法可以强制确认该访问权限：

*   在您的身份验证提供者的管理控制台中撤销访问权限（例如，拒绝 twitter 应用程序访问）。
*   设置一个额外的 OAuth 参数来强制批准提示。我不确定 Twitter 是否提供这样的功能，但如果您使用的是 Google OAuth2，您可以简单地添加`{'approval_prompt': 'force'}`到`GOOGLE_OAUTH2_AUTH_EXTRA_ARGUMENTS`设置中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-25T22:44:30.357

你有注销视图吗？您需要有一个注销视图。

**例子：**

```
from django.contrib.auth import logout

def logout_view(request):
    logout(request)
    # Redirect to a success page. 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-03-21T19:28:05.377

这个答案已经过时了，因为[django-social-auth](https://github.com/omab/django-social-auth)现在是[python-social-auth](https://github.com/omab/python-social-auth/)

[在此处](https://stackoverflow.com/questions/20589948/pythhn-social-auth-notallowedtodisconnect-at-disconnect-facebook-1)查看更新的 Stack Overflow 答案。

[在此处](https://github.com/omab/python-social-auth/tree/master/examples/django_example)阅读文档

# objective-c - 如何获得对当前 UINavigationController 的引用？

> ID：14529817
> 
> 赞同：16
> 
> 时间：2013-01-25T20:26:06.033
> 
> 标签：objective-c, cocoa

在 Objective-C 中，获取对当前 UINavigationController 的引用的最佳方法是什么？我想从任何可能没有对 UIController、委托或其他任何内容的引用的类中访问它。

是否有现有的方法来获取当前的 UINavigationController？我应该向我的应用程序委托添加一些东西并检索它吗？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-01-25T20:48:27.000

事实证明，您可以从任何 UIView/UIViewController 后代中获取它，尽管使用了相当多的点语法。

```
self.(view).window.rootViewController.navigationController; 
```

如果您使用的是从任何其他类派生的对象，则同样如此，除非您必须通过`UIApplication`

```
[UIApplication sharedApplication].keyWindow.rootViewController.navigationController; 
```

当然，这两者都在很大程度上破坏了 MVC，并且绝对建议将任何必须触及“默认导航控制器”的逻辑添加到根视图控制器中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-04-23T09:57:09.160

**斯威夫特 4：**

```
guard let navigationController = UIApplication.shared.keyWindow?.rootViewController as? UINavigationController else { return } 
```

# google-chrome-extension - 从 Chrome 扩展程序的页面操作弹出窗口与活动选项卡上的内容脚本通信

> ID：14529822
> 
> 赞同：2
> 
> 时间：2013-01-25T20:26:17.957
> 
> 标签：google-chrome-extension, popup

我不知道如何在内容脚本和页面操作弹出窗口之间传递数据。

我从以下简单的框架开始，它显示了标题中有减号的任何页面的页面操作：

*   扩展清单 ( `manifest.json`)：

    ```
    {
       …
       "permissions": ["http://example.org/*"],
       "background": {"scripts": ["background.js"]},
       "page_action": {"default_popup": "popup.html", …},
       "content_scripts": {
         "matches": ["http://example.org/*"],
         "js": ["content.js"]
       }
    } 
    ```

*   后台脚本（`background.js`）：

    ```
    chrome.extension.onRequest.addListener(function (msg, sender, respond) {
      if (msg && msg.what === "match") {
        console.log("Match:", msg.title);
        chrome.pageAction.show(sender.tab.id);
      }
    } 
    ```

*   内容脚本 ( `content.js`)，检查文档标题：

    ```
    var title = document.title;
    if (title.indexOf("-") >= 0) {
      chrome.extension.sendRequest({"what": "match", "title": title});
    } 
    ```

现在，在页面操作的弹出窗口中，我想显示匹配页面的标题。[不是最后加载页面的标题（如使用此答案](https://stackoverflow.com/a/7217280/116546)所做的那样），而是活动选项卡的标题。

我的第一个虽然是向内容脚本发送查询，但根据文档`chrome.extension.sendMessage`将其发送给*所有*听众（即我所有选项卡上的所有内容脚本），没有任何明确定义我将收到谁的响应。`chrome.tabs.sendMessage`另外，我不能按需*使用* `tabId`。尝试使用`chrome.tabs.getCurrent`将返回当前选项卡`null`，因为查询来自非选项卡上下文（来自弹出窗口）。

我想我可能可以`chrome.tabs.executeScript`用来交流，但这只是感觉很脏。

不过，我相信，这是一件应该非常简单的基本事情，我只是错过了一些东西。有人可以帮助我，最好是示例代码吗？

**更新：**我找到了[Mappy 示例扩展](https://developer.chrome.com/extensions/samples.html#4042eaccda909714a2b78cfe60d59b9f)，它用于`chrome.tabs.onUpdated`跟踪活动选项卡。不幸的是，这需要`tabs`许可。就个人而言，我想尽可能使用最少的权限。

那么，不幸的是权限系统设计不好，我别无选择，只能这样做，还是有任何解决方法？`chrome.pageAction.onClicked`如果事件处理程序（提供`Tab`我需要的对象）允许我显示一个弹出窗口，我会很高兴......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T07:20:19.087

我认为您需要`onClick`在弹出窗口中添加事件侦听器：

```
chrome.pageAction.onClicked.addListener(function(tabs.Tab tab) {...}); 
```

[请参阅此处](http://developer.chrome.com/extensions/pageAction.html#event-onClicked)的文档。

事件侦听器的回调将为您提供肯定是活动选项卡的 tabId。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T10:17:44.277

您的代码中有多个问题

*   **chrome.extension.sendRequest** in`chrome.extension.sendRequest({"what": "match", "title": title});`已弃用
*   **chrome.pageAction.onClicked**在清单中有时不会触发`"page_action": {"default_popup": "popup.html", …},`。
*   `chrome.extension.sendMessage will send it to all listeners (i.e. all my content scripts on all tabs),`是一个无效的假设，它将发送到扩展页面。

我试图多次阅读您的问题，但无法理解您想要实现的目标，您能解释一下吗？

# java - 为什么一段代码的多次迭代会大大增加平均运行时间？

> ID：14529831
> 
> 赞同：-1
> 
> 时间：2013-01-25T20:26:35.190
> 
> 标签：java

例如，我正在运行一个简单的嵌套循环，该循环在两个数组中查找重复元素。对于 2000 的列表大小，如果我连续多次运行该程序，平均需要大约 25 毫秒（猜测）。但是，在 for 循环中运行程序一次，我循环它的次数越多，一次迭代的平均运行时间就越快。例如，10 次是每次迭代 5 毫秒，10000 次是 2 毫秒。

我必须测量几种不同类型的列表交集（例如嵌套循环、二进制搜索等）在不同列表大小下的运行时间，所以我不确定哪个更准确。对于较长的人来说，它变得更加成问题，因为运行这么多次需要太长时间。

```
 for (int i = 0; i < A.length-1; i++) {
        for (int j = 0; j < B.length-1; j++) {
            if (A[i] == B[j]) {
                inter++;
            }
        }
    } 
```

我如何生成使用的列表：

```
public studentList(int size, String course) {
int IDrange=2*size;
studentID=new int[size];
boolean[] usedID=new boolean[IDrange];
for (int i=0;i<IDrange;i++) usedID[i]=false;
for (int i=0;i<size;i++) {
    int t;
    do {
    t=(int)(Math.random()*IDrange);
    } while (usedID[t]);
    usedID[t]=true;
    studentID[i]=t;
}
courseName=course;
numberOfStudents=size;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T21:25:48.297

java 虚拟机在程序运行时优化程序。当同一段代码被频繁执行时，程序流程将围绕该代码路径进行优化，以便尽快执行。

当您想对算法进行基准测试时，通常的做法是多次执行它们并丢弃前几次迭代的时间测量。

但请注意，还有其他因素可能会影响您的时间测量，例如不可预测的垃圾收集器，它可以随时开始工作并减慢 JVM 的其余部分。

# entity-framework - 实体框架 4.0 多连接

> ID：14529832
> 
> 赞同：1
> 
> 时间：2013-01-25T20:26:35.393
> 
> 标签：entity-framework, entity-framework-4

这是我在现实世界中的例子。我有 4 张桌子：

*   人
*   计划
*   覆盖范围
*   涵盖成员

每个人可以有很多计划，每个计划都可以有很多承保范围。这些coverage 中的每一个都可以有许多 CoveredMember。

我需要一个对`Plan.PlanType == 1`and应用过滤器的查询`CoveredMembers.TermDate == null`。此查询应带回任何具有未终止医疗类型计划的人。

这条 SQL 语句就是这样做的：

```
SELECT Person.*, Plans.*, Coverages.*, CoveredMembers.* 
FROM Person P 
INNER JOIN Plan PL ON P.PersonID = PL.PersonID 
INNER JOIN Coverage C on PL.PlanID = C.PlanID 
INNER JOIN CoveredMember CM on C.CoverageID = CM.CoverageID 
WHERE CM.TermDate = NULL AND PL.PlanType = 1 
```

我已经想出了如何使用匿名类型来做到这一点，但有时我需要更新数据并保存回数据库——而匿名类型是只读的。

我得到了一个使用 JOIN 确实有效的解决方案，但它只带回了人员（尽管过滤了我需要的方式）。然后我可以遍历每个人：

```
foreach (var person in persons) {
  foreach (var plan in person.Plans{
    //do stuff 
  }
} 
```

但这不会为循环的每次迭代调用一个 db 吗？我有 500 人，每人有 3 个未终止的医疗计划，所以它会调用 db 1500 次？

这就是为什么我想一次性将整个数据树从 Persons 带回 CoveredMembers。这不可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T21:19:14.860

我相信这是通过两个部分完成的：

1.  您的查询根据之前在此问题中讨论的条件确定您希望返回的人：[实体框架。需要帮助过滤结果](https://stackoverflow.com/questions/14524879/entity-framework-need-help-filtering-results/14524972#14524972)

2.  正确设置您希望立即加载的实体的导航属性：http: [//msdn.microsoft.com/en-us/data/jj574232.aspx](http://msdn.microsoft.com/en-us/data/jj574232.aspx)

例如，如果您的 Person 实体如下所示：

```
public class Person {
   public List<Plan> Plans {get; set;}
   ...
} 
```

从 dbcontext 返回数据时，您还可以通过以下`include`选项使用显式预加载：

```
 var people = context.People
         .Include(p => p.Plans)
         .ToList();
.... 
```

如果这些是嵌套的 - 覆盖范围是计划的一部分，等等（它看起来像，它类似于）：

```
 var people = context.People
         .Include(p => p.Plans.Select(pl=>pl.Coverage).Select(c=>c.CoveredMembers)))
         .ToList();
.... 
```

我在这里对您的数据模型做出一些假设，我上面的代码可能需要一些调整。

**编辑**：

我可能需要其他人在这里权衡，但我认为您不能将 where 子句添加到这样的包含中（我上面的示例通过将包含放在上下文对象上来引导您，而不是返回 IQueryable将您的条件设置为在您的第一篇文章中已解决（没有对其调用 ToList() ），然后使用您在上面编写的不带 Where 子句的代码：

从第一篇文章开始（您在这篇文章中提供了不同的标准，但概念相同）

```
 var q = from q1 in dbContext.Parent
    join q2 in dbContext.Children
    on q1.key equals q2.fkey
    join q3 in  ........
    where q4.col1 == 3000
    select q1; 
```

然后：

```
List<Person> people = q.Include(p => p.Plans
  .Select(pl => pl.Coverages)
  .Select(c => c.CoveredMembers).ToList(); 
```

再次，在无法排除故障的情况下这样做 - 我相信我也需要尝试几次才能解决这个问题。

# hadoop - 现实世界中的hadoop用例

> ID：14529834
> 
> 赞同：12
> 
> 时间：2013-01-25T20:26:40.200
> 
> 标签：hadoop

Hadoop的新手。从概念上讲，它很容易理解，然而，真正的挑战之一是如何对要在 map-reduce 架构中解决的问题进行建模。假设我的数据包含两部分（全部在 oracle 中）： 1\. 变化不大的静态数据 2\. 每天收集的新鲜数据。

而目前的数据处理基本上是读取新鲜数据，找到并使用相应的静态数据（或元数据）并对其应用一些算法并将其转储回Oracle。

我如何为这样的应用程序范式建模？我是否将静态数据保存/存储为分布式缓存的一部分？如果数据很大怎么办？

基本上我正在寻找更多如下示例： [http ://stevekrenzel.com/finding-friends-with-mapreduce](http://stevekrenzel.com/finding-friends-with-mapreduce)

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T12:18:19.787

基本上要求是对两个数据集进行连接。MapReduce 编程需要与普通编程不同的思维方式。以下是 MapReduce 之上的一些 join 参考和其他一些模式

1.  [使用 MapReduce 进行数据密集型文本处理](http://lintool.github.com/MapReduceAlgorithms/index.html)

2.  [MapReduce 设计模式](http://shop.oreilly.com/product/0636920025122.do)

3.  Hadoop中的第 8.3 节[- 权威指南](http://shop.oreilly.com/product/0636920021773.do)

回来加入，它可以根据数据量和数据的方式有多种方式。上述参考文献有更多相同之处。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T05:59:32.200

我们在这里收集现实生活中的用例：http: [//hadoopilluminated.com/hadoop_book/Hadoop_Use_Cases.html](http://hadoopilluminated.com/hadoop_book/Hadoop_Use_Cases.html)

我们已经很好地覆盖了多个域，并将继续添加。

（免责声明：我是这本免费 hadoop 书的合著者）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T20:34:42.337

我会看下面[关于 Map/Reduce 模式的文章](http://highlyscalable.wordpress.com/2012/02/01/mapreduce-patterns/)，它应该让您对常见算法及其在 Map/Reduce 世界中的翻译有一个很好的了解。

更一般地说，我不认为有一个神奇的公式可以将问题转换为一组 Map/Reduce，你必须问自己不同数据集的问题，查看现有示例是一件好事，你绝对应该尝试在一个小玩具问题上实现一些东西。

此外，如果您在将问题抽象为一组 Map/Reduce 作业时遇到问题，您还可以使用例如 Hive，它像一个经过一些调整的关系数据库一样工作，并为您生成 Map/Reduce 作业，而不必担心太多怎么了。

# c# - SQL 数据库地址

> ID：14529836
> 
> 赞同：0
> 
> 时间：2013-01-25T20:26:44.343
> 
> 标签：c#, sql, sql-server, database, database-design

我正在编写一个应用程序，`C#`并且我正在使用一个`SQL`数据库来保存一些信息。我已经定义了`database`这样的连接地址：

```
 @"Data Source=.\SQLEXPRESS;AttachDbFilename=c:\users\pouya\documents\visual studio 2010\Projects\DataBaseDLL\DataBaseDLL\Database.mdf 
```

在这种情况下，当我在另一台计算机上运行应用程序时，由于地址不正确，会导致错误。

有什么办法可以解决这个错误吗？例如，让应用程序在同一个文件夹中查找它，如 .. `\\database.mdf`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T20:32:19.197

您应该使用 *.mdf 文件的相对路径。

以下 connectionString 在 App_Data 文件夹中查找 mdf 文件。将此 connectionString 放入您的 web.config 中：

```
<connectionStrings> 
<add name="YourConnectionString" connectionString="Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\Database.mdf;Integrated Security=True;User Instance=True" providerName="System.Data.SqlClient"/>  
</connectionStrings> 
```

正在做的`|DataDirectory|`伎俩...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T20:50:37.893

因此，您在另一台计算机上运行应用程序并且连接字符串无法找到数据库的位置，因为它与路径不匹配？那是对的吗？

在这种情况下，您可以自己构建连接字符串。

例如：

```
 public class Example
    {

       string dirInfo = Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments);
       string connectionString = "Data Source=.\SQLEXPRESS;AttachDbFilename=" + dirInfo + "\documents\visual studio       2010\Projects\DataBaseDLL\DataBaseDLL\Database.mdf"

    } 
```

当然，有更好的方法来做到这一点。

# ios - 如何在 iOS 中使用自定义 url 方案传递信息（通过注释）？

> ID：14529837
> 
> 赞同：0
> 
> 时间：2013-01-25T20:26:45.177
> 
> 标签：ios, objective-c, url-scheme

我试图通过使用自定义 url 方案的 NSDictionary。我想知道如何使用“注释”部分

```
- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString*)sourceApplication annotation:(id)annotation 
```

我尝试在网上搜索，但没有多大成功。

任何人都可以帮助我吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T20:33:04.500

该`annotation`参数仅用于`UIDocumentInteractionController`（“打开方式...”界面）。如果您不使用它，您通常会将附加信息作为 URL（参数）的一部分传递。

# python - 将多个函数应用于多个 groupby 列

> ID：14529838
> 
> 赞同：333
> 
> 时间：2013-01-25T20:26:45.787
> 
> 标签：python, group-by, aggregate-functions, pandas

[文档](http://pandas.pydata.org/pandas-docs/dev/groupby.html#applying-multiple-functions-at-once)展示了如何使用以输出列名作为键的 dict 一次在 groupby 对象上应用多个函数：

```
In [563]: grouped['D'].agg({'result1' : np.sum,
   .....:                   'result2' : np.mean})
   .....:
Out[563]: 
      result2   result1
A                      
bar -0.579846 -1.739537
foo -0.280588 -1.402938 
```

但是，这仅适用于 Series groupby 对象。并且当 dict 类似地传递给 groupby DataFrame 时，它​​期望键是函数将应用于的列名。

我想要做的是将多个功能应用于多个列（但某些列将被多次操作）。此外，*某些函数将依赖于 groupby 对象中的其他列*（如 sumif 函数）。我目前的解决方案是逐列进行，并执行类似于上面的代码的操作，将 lambdas 用于依赖于其他行的函数。但这需要很长时间，（我认为遍历 groupby 对象需要很长时间）。我必须对其进行更改，以便在一次运行中遍历整个 groupby 对象，但我想知道 pandas 中是否有内置的方法可以稍微干净地做到这一点。

例如，我尝试过类似的东西

```
grouped.agg({'C_sum' : lambda x: x['C'].sum(),
             'C_std': lambda x: x['C'].std(),
             'D_sum' : lambda x: x['D'].sum()},
             'D_sumifC3': lambda x: x['D'][x['C'] == 3].sum(), ...) 
```

但正如预期的那样，我得到一个 KeyError （因为如果从 DataFrame 调用键必须是一列`agg`）。

有没有内置的方法可以做我想做的事情，或者有可能添加这个功能，还是我只需要手动遍历 groupby？

* * *

## 回答 #1

> 赞同：470
> 
> 时间：2017-11-03T19:44:14.237

当前接受的答案的后半部分已过时，并且有两次弃用。首先也是最重要的，您不能再将字典字典传递给`agg`groupby 方法。其次，永远不要使用`.ix`.

如果您希望同时使用两个单独的列，我建议使用`apply`隐式将 DataFrame 传递给应用函数的方法。让我们使用与上面类似的数据框

```
df = pd.DataFrame(np.random.rand(4,4), columns=list('abcd'))
df['group'] = [0, 0, 1, 1]
df

          a         b         c         d  group
0  0.418500  0.030955  0.874869  0.145641      0
1  0.446069  0.901153  0.095052  0.487040      0
2  0.843026  0.936169  0.926090  0.041722      1
3  0.635846  0.439175  0.828787  0.714123      1 
```

从列名映射到聚合函数的字典仍然是执行聚合的完美方式。

```
df.groupby('group').agg({'a':['sum', 'max'], 
                         'b':'mean', 
                         'c':'sum', 
                         'd': lambda x: x.max() - x.min()})

              a                   b         c         d
            sum       max      mean       sum  <lambda>
group                                                  
0      0.864569  0.446069  0.466054  0.969921  0.341399
1      1.478872  0.843026  0.687672  1.754877  0.672401 
```

如果您不喜欢那个丑陋的 lambda 列名，您可以使用普通函数并为特殊`__name__`属性提供自定义名称，如下所示：

```
def max_min(x):
    return x.max() - x.min()

max_min.__name__ = 'Max minus Min'

df.groupby('group').agg({'a':['sum', 'max'], 
                         'b':'mean', 
                         'c':'sum', 
                         'd': max_min})

              a                   b         c             d
            sum       max      mean       sum Max minus Min
group                                                      
0      0.864569  0.446069  0.466054  0.969921      0.341399
1      1.478872  0.843026  0.687672  1.754877      0.672401 
```

* * *

## 使用`apply`和返回一个系列

现在，如果您有多个需要一起交互的列，那么您不能使用`agg`，它隐式地将 Series 传递给聚合函数。当`apply`将整个组用作 DataFrame 时，会被传递到函数中。

我建议制作一个返回所有聚合系列的自定义函数。使用 Series 索引作为新列的标签：

```
def f(x):
    d = {}
    d['a_sum'] = x['a'].sum()
    d['a_max'] = x['a'].max()
    d['b_mean'] = x['b'].mean()
    d['c_d_prodsum'] = (x['c'] * x['d']).sum()
    return pd.Series(d, index=['a_sum', 'a_max', 'b_mean', 'c_d_prodsum'])

df.groupby('group').apply(f)

         a_sum     a_max    b_mean  c_d_prodsum
group                                           
0      0.864569  0.446069  0.466054     0.173711
1      1.478872  0.843026  0.687672     0.630494 
```

如果您喜欢 MultiIndexes，您仍然可以返回一个带有这样的系列：

```
 def f_mi(x):
        d = []
        d.append(x['a'].sum())
        d.append(x['a'].max())
        d.append(x['b'].mean())
        d.append((x['c'] * x['d']).sum())
        return pd.Series(d, index=[['a', 'a', 'b', 'c_d'], 
                                   ['sum', 'max', 'mean', 'prodsum']])

df.groupby('group').apply(f_mi)

              a                   b       c_d
            sum       max      mean   prodsum
group                                        
0      0.864569  0.446069  0.466054  0.173711
1      1.478872  0.843026  0.687672  0.630494 
```

* * *

## 回答 #2

> 赞同：180
> 
> 时间：2013-01-25T20:40:24.770

对于第一部分，您可以传递键的列名字典和值的函数列表：

```
In [28]: df
Out[28]:
          A         B         C         D         E  GRP
0  0.395670  0.219560  0.600644  0.613445  0.242893    0
1  0.323911  0.464584  0.107215  0.204072  0.927325    0
2  0.321358  0.076037  0.166946  0.439661  0.914612    1
3  0.133466  0.447946  0.014815  0.130781  0.268290    1

In [26]: f = {'A':['sum','mean'], 'B':['prod']}

In [27]: df.groupby('GRP').agg(f)
Out[27]:
            A                   B
          sum      mean      prod
GRP
0    0.719580  0.359790  0.102004
1    0.454824  0.227412  0.034060 
```

更新 1：

因为聚合函数适用于 Series，所以对其他列名的引用会丢失。为了解决这个问题，您可以引用完整的数据帧并使用 lambda 函数中的组索引对其进行索引。

这是一个hacky解决方法：

```
In [67]: f = {'A':['sum','mean'], 'B':['prod'], 'D': lambda g: df.loc[g.index].E.sum()}

In [69]: df.groupby('GRP').agg(f)
Out[69]:
            A                   B         D
          sum      mean      prod  <lambda>
GRP
0    0.719580  0.359790  0.102004  1.170219
1    0.454824  0.227412  0.034060  1.182901 
```

在这里，结果“D”列由总和的“E”值组成。

更新 2：

这是一种我认为可以满足您要求的方法。首先制作一个自定义的 lambda 函数。下面，g 引用了该组。聚合时，g 将是一个系列。传递`g.index`to`df.ix[]`从 df 中选择当前组。然后我测试列 C 是否小于 0.5。返回的布尔系列被传递给`g[]`它只选择那些符合条件的行。

```
In [95]: cust = lambda g: g[df.loc[g.index]['C'] < 0.5].sum()

In [96]: f = {'A':['sum','mean'], 'B':['prod'], 'D': {'my name': cust}}

In [97]: df.groupby('GRP').agg(f)
Out[97]:
            A                   B         D
          sum      mean      prod   my name
GRP
0    0.719580  0.359790  0.102004  0.204072
1    0.454824  0.227412  0.034060  0.570441 
```

* * *

## 回答 #3

> 赞同：43
> 
> 时间：2019-08-03T13:50:10.343

### `Pandas >= 0.25.0`, 命名聚合

自 pandas`0.25.0`或更高版本以来，我们正在远离基于字典的聚合和重命名，而[转向](https://pandas.pydata.org/pandas-docs/stable/whatsnew/v0.25.0.html#groupby-aggregation-with-relabeling)接受`tuple`. 现在我们可以同时聚合 + 重命名为信息量更大的列名：

**示例**：

```
df = pd.DataFrame(np.random.rand(4,4), columns=list('abcd'))
df['group'] = [0, 0, 1, 1]

          a         b         c         d  group
0  0.521279  0.914988  0.054057  0.125668      0
1  0.426058  0.828890  0.784093  0.446211      0
2  0.363136  0.843751  0.184967  0.467351      1
3  0.241012  0.470053  0.358018  0.525032      1 
```

使用`GroupBy.agg`命名聚合应用：

```
df.groupby('group').agg(
             a_sum=('a', 'sum'),
             a_mean=('a', 'mean'),
             b_mean=('b', 'mean'),
             c_sum=('c', 'sum'),
             d_range=('d', lambda x: x.max() - x.min())
)

          a_sum    a_mean    b_mean     c_sum   d_range
group                                                  
0      0.947337  0.473668  0.871939  0.838150  0.320543
1      0.604149  0.302074  0.656902  0.542985  0.057681 
```

* * *

## 回答 #4

> 赞同：40
> 
> 时间：2018-11-01T06:42:55.173

作为 Ted Petrou 回答的替代方案（主要是美学），我发现我更喜欢稍微紧凑的列表。请不要考虑接受它，这只是对 Ted 答案的更详细的评论，以及代码/数据。Python/pandas 不是我的第一个/最好的，但我发现这读起来很好：

```
df.groupby('group') \
  .apply(lambda x: pd.Series({
      'a_sum'       : x['a'].sum(),
      'a_max'       : x['a'].max(),
      'b_mean'      : x['b'].mean(),
      'c_d_prodsum' : (x['c'] * x['d']).sum()
  })
)

          a_sum     a_max    b_mean  c_d_prodsum
group                                           
0      0.530559  0.374540  0.553354     0.488525
1      1.433558  0.832443  0.460206     0.053313 
```

我发现它更让人联想到`dplyr`管道和`data.table`链式命令。并不是说它们更好，只是对我来说更熟悉。（我当然认识到对这些类型的操作使用更正式的函数的力量和偏好`def`。这只是一种替代方案，不一定更好。）

* * *

我以与 Ted 相同的方式生成数据，我将添加一个可重复性的种子。

```
import numpy as np
np.random.seed(42)
df = pd.DataFrame(np.random.rand(4,4), columns=list('abcd'))
df['group'] = [0, 0, 1, 1]
df

          a         b         c         d  group
0  0.374540  0.950714  0.731994  0.598658      0
1  0.156019  0.155995  0.058084  0.866176      0
2  0.601115  0.708073  0.020584  0.969910      1
3  0.832443  0.212339  0.181825  0.183405      1 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2019-11-21T02:49:45.567

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-07-12T12:29:21.823

泰德的回答令人惊叹。我最终使用了一个较小的版本，以防有人感兴趣。当您正在寻找一个依赖于多列值的聚合时很有用：

# 创建一个数据框

```
df = pd.DataFrame({
    'a': [1, 2, 3, 4, 5, 6], 
    'b': [1, 1, 0, 1, 1, 0], 
    'c': ['x', 'x', 'y', 'y', 'z', 'z']
})

print(df)
   a  b  c
0  1  1  x
1  2  1  x
2  3  0  y
3  4  1  y
4  5  1  z
5  6  0  z 
```

# 使用 apply 进行分组和聚合（使用多个列）

```
print(
    df
    .groupby('c')
    .apply(lambda x: x['a'][(x['a'] > 1) & (x['b'] == 1)]
    .mean()
)
c
x    2.0
y    4.0
z    5.0 
```

# 使用聚合进行分组和聚合（使用多个列）

我喜欢这种方法，因为我仍然可以使用聚合。也许人们会告诉我为什么在对组进行聚合时需要 apply 来获取多个列。

现在看起来很明显，但是只要您不*直接在 groupby 之后*选择感兴趣的列，您就可以从聚合函数中访问数据框的所有列。

### 只能访问选定的列

```
df.groupby('c')['a'].aggregate(lambda x: x[x > 1].mean()) 
```

### 访问所有列，因为选择毕竟是魔法

```
df.groupby('c').aggregate(lambda x: x[(x['a'] > 1) & (x['b'] == 1)].mean())['a'] 
```

### 或类似的

```
df.groupby('c').aggregate(lambda x: x['a'][(x['a'] > 1) & (x['b'] == 1)].mean()) 
```

我希望这有帮助。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2020-07-22T18:04:21.650

这是使用命名聚合的“exans”答案的一个转折。它是相同的，但参数解包允许您仍然将字典传递给 agg 函数。

命名的 aggs 是一个不错的功能，但乍一看似乎很难以编程方式编写，因为它们使用关键字，但实际上参数/关键字解包很简单。

```
animals = pd.DataFrame({'kind': ['cat', 'dog', 'cat', 'dog'],
                         'height': [9.1, 6.0, 9.5, 34.0],
                         'weight': [7.9, 7.5, 9.9, 198.0]})

agg_dict = {
    "min_height": pd.NamedAgg(column='height', aggfunc='min'),
    "max_height": pd.NamedAgg(column='height', aggfunc='max'),
    "average_weight": pd.NamedAgg(column='weight', aggfunc=np.mean)
}

animals.groupby("kind").agg(**agg_dict) 
```

结果

```
 min_height  max_height  average_weight
kind                                        
cat          9.1         9.5            8.90
dog          6.0        34.0          102.75 
```

# jquery - 使用带有提交按钮的选择选项标签元素显示两个 div

> ID：14529840
> 
> 赞同：0
> 
> 时间：2013-01-25T20:26:50.030
> 
> 标签：jquery, html

昨天我以不同的形式提出了相同类型的问题。但今天我想要不同格式的相同问题。

它是这样的：

我在一个页面中有多个 div。

当我从下拉列表中选择一个值并单击提交按钮时，我需要显示两个 div。

这是我的html代码：

```
 <div id="one">
                  <h1>
                    Security
                      <div class="hdrhr" style="width:5%">&nbsp;</div>
                  </h1>
             </div>
             <div id="two"  class="hidden">
                  <h1>
                    Customer Type
                      <div class="hdrhr" style="width:5%">&nbsp;</div>
                  </h1>
             </div>

<form onSubmit="javascript: return false;">
                                    <select name='dropDown' id='dropDown' style="width:205px;padding:4px;margin-left:-2px;">
                                        <option value="one">Security</option>
                                        <option value="two">Customer Type</option>
</select> 
```

这是获取详细信息的按钮

```
 <div id="one" class="roundedCorner">
                        <table width="100%" border="0" cellpadding="8" cellspacing="0">
                            <tr>
                            <td align="center" class="parentalhdtlnt" style="color:#ffffff;width:5%">
                               Id_User
                               <br />
                               <input type="text" name="Member" class="ipttxt" tabindex="1" />
                            </td>
</tr>
</table>
</div>
 <div id="two" class="roundedCorner">
                        <table width="100%" border="0" cellpadding="8" cellspacing="0">
                            <tr>
                            <td align="center" class="parentalhdtlnt" style="color:#ffffff;width:5%">
                               Id_User
                               <br />
                               <input type="text" name="Member" class="ipttxt" tabindex="1" />
                            </td>
</tr>
</table>
</div> 
```

这是我的js代码

```
 <script type="text/javascript">
    $(document).ready(function(){
        $("#goBttn").click(function(){
            $("#"+$("#dropDown").val()).show();
            select = document.getElementById("dropDown").getElementsByTagName("option");
            select = document.getElementById("hdrlbl").getElementsByTagName("option");
            for(x=0;x<=select.length;x++)
                if($(select[x]).val()!=$("#dropDown").val()) $("#"+$(select[x]).val()).hide();
                if($(select[x]).val()!=$("#hdrlbl").val()) $("#"+$(select[x]).val()).hide();
        });
    });
</script> 
```

在下拉菜单中，如果我选择安全性，我需要显示标题 div 以及内容 div 与客户类型相同

请告诉我代码的格式。

请帮我。

提前感谢SKM

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T20:54:18.483

jsFiddle 链接[http://jsfiddle.net/dqVy2/10/](http://jsfiddle.net/dqVy2/10/)

HTML：

```
<div id="one" class="one hidden">
     <h1>Security
                      <div class="hdrhr" style="width:5%">&nbsp;</div>
                  </h1>

</div>
<div id="two" class="two hidden">
     <h1> Customer Type
                      <div class="hdrhr" style="width:5%">&nbsp;</div>
                  </h1>

</div>
<form onSubmit="javascript: return false;">
    <select name='dropDown' id='dropDown' style="width:205px;padding:4px;margin-left:-2px;">
        <option value="one">Security</option>
        <option value="two">Customer Type</option>
    </select>
    <button id="goBttn">GO</button>
</form>
<div id="one" class="one roundedCorner hidden">
    <table width="100%" border="0" cellpadding="8" cellspacing="0">
        <tr>
            <td align="center" class="parentalhdtlnt" style="color:#ffffff;width:5%">Id_User
                <br />
                <input type="text" name="Member" class="ipttxt" tabindex="1" />
            </td>
        </tr>
    </table>
</div>
<div id="two" class="two roundedCorner hidden">
    <table width="100%" border="0" cellpadding="8" cellspacing="0">
        <tr>
            <td align="center" class="parentalhdtlnt" style="color:#ffffff;width:5%">Id_User
                <br />
                <input type="text" name="Member" class="ipttxt" tabindex="1" />
            </td>
        </tr>
    </table>
</div> 
```

jQuery：

```
$(function () {
    $("#goBttn").click(function () {
        $("#dropDown").find("option").each(function () {
            var div_id = $(this).val();
            $("." + div_id).each(function () {
                $(this).hide();
            });
        });
        $("." + $("#dropDown").val()).each(function () {
            $(this).show();
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T21:10:03.407

我花了一些时间重组整个代码，因为它在我看来有点杂乱无章。这是 JSFiddle：http: [//jsfiddle.net/ccw24/](http://jsfiddle.net/ccw24/)

HTML

```
<div class="headerCont switchArea">
    <div data-ref="one">Header One (Security)</div>
    <div data-ref="two">Header Two (Customer Type)</div>
</div>

<select name='dropDown' id='dropDown'>
    <option value="one">Security</option>
    <option value="two">Customer Type</option>
</select>
<a href='#' id="pageChange">Go</a>

<div class="footerCont switchArea">
    <div data-ref="one">Footer One (Security)</div>
    <div data-ref="two">Footer Two (Customer Type)</div>    
</div> 
```

JS

```
$(document).ready(function(){
    $("#pageChange").on('click',function(e){
        e.preventDefault();
        var ref = $('#dropDown').val();
        $('.switchArea > div').hide();
        $('div[data-ref="'+ref+'"]').show();
    });
}); 
```

CSS

```
.switchArea > div {
    display: none
}

.switchArea > div:first-of-type {
    display: block
} 
```

请注意：此代码使用了一些更现代的技术，这些技术可能不适用于旧浏览器（旧 IE，我在看你），所以如果你需要与这些浏览器兼容，那么你可能需要做一些调整。

# c# - 使用 C# 上传 Extjs 文件

> ID：14529843
> 
> 赞同：0
> 
> 时间：2013-01-25T20:26:56.237
> 
> 标签：c#, sql-server-2008, file-upload, extjs4.1, filefield

我知道 xtype: filefield 是如何工作的，我也意识到文件上传不使用常规的 ajax 方法来读取和写入数据到数据库......

我可以正常设置文件字段，当我单击浏览按钮时，我可以选择必要的文件。

```
this.fp = Ext.create('Ext.form.Panel', {
           scope: this,
           width: 200,
           frame: true,
           title: 'File Upload Form',
           autoHeight: true,
           bodyStyle: 'padding: 10px 10px 0 10px;',
           items: [
           {
               xtype: 'filefield'

           }
           ],
           buttons: [
           { text: 'Upload',
               handler: function () {
                   var form = this.up('form').getForm();
                   if (form.isValid()) {
                       form.submit({
                           url: 'Upload.aspx',
                           waitMsg: 'Uploading your file...',

                           success: function (form, action) {

                               alert("OK:" + action.result.message);

                           },
                           failure: function (form, action) {
                               alert("Error:" + action.result.message);
                           }

                       });
                   }
               }
           }
           ]

       }); 
```

单击上传按钮后会发生什么是问题......我如何将文件上传到服务器端......（sql db）......使用c＃

我尝试使用 upload.aspx.cs 创建一个 upload.aspx 页面，这样做只是为了看看它是否有效......

```
public partial class Upload : System.Web.UI.Page
{
protected void Page_Load(object sender, EventArgs e)
{

    HttpContext context = HttpContext.Current;

    if (context.Request.Files.Count > 0)
    {

        BinaryReader file = new BinaryReader(context.Request.Files[0].InputStream);

        string line;
        while ((line = file.ReadString()) != null)
        {

            // sql connection?
        }

    }

    // prepare response
    MessageOb result = new MessageOb();

    result.success = true;

    result.message = "Success";

}
} 
```

但我得到这个错误

```
Ext.Error: You're trying to decode an invalid JSON String: 
```

有没有人记录在哪里我可以看到从客户端的 extjs 和服务器端的 c# 将文件上传到 sql db 的通常步骤......或者如果有人能告诉我它是如何完成的，我将非常感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T20:37:55.987

该问题可能与您如何从上传表单提交返回数据有关。Ext.JS 要求响应是 JSON 或 XML，我会验证您没有返回 html 文档。

我认为 MessageOb 以某种方式处理这个......也许？

[Uncaught Ext.Error: You're trying to decode an invalid JSON String: Form Submission using Ext JS and Spring MVC](https://stackoverflow.com/questions/11635396/uncaught-ext-error-youre-trying-to-decode-an-invalid-json-string-form-submiss)

# visual-c++ - 如何从 C++ 中的文本文件中读取特定的列或行

> ID：14529846
> 
> 赞同：0
> 
> 时间：2013-01-25T20:27:04.553
> 
> 标签：visual-c++, file-io, multidimensional-array, text-files

如果一个文本文件包含许多行和列（比如`100*100`）。如何获取特定列并读取该列中的所有值，然后对应于该列中的特定值，我需要读取该行中的所有值。任何人都可以帮忙吗？

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T20:49:50.953

问题不清楚。你的意思是字符列（一行中的第 N 个字符），数字（“2 3 0 9 45 223 93 1”是八列，还是别的什么？

在任何情况下，您只能逐行读取文件，因此要提取某个列，必须先将文件读入内存，将数据存储在字符串中。然后在每个字符串中，获取您要查找的列值。当您找到它时，您在其中找到它的字符串将是您想要的行。

# weblogic - JRockit 卡住了

> ID：14529848
> 
> 赞同：1
> 
> 时间：2013-01-25T20:27:12.057
> 
> 标签：weblogic, jrockit

我们一直遇到 JRockit jvm 卡在这个堆栈上的问题：

```
"[STUCK] ExecuteThread: '2' for queue: 'weblogic.kernel.Default (self-tuning)'" id=45 idx=0x94 tid=9944 prio=1 alive, in native, daemon
    at jrockit/vm/Allocator.nativeGetNewTLA()V(Native Method)
    at jrockit/vm/Allocator.getNewTLA(Allocator.java:788)[optimized]
    at jrockit/vm/Allocator.allocLargerThanFreeTLA(Allocator.java:816)[inlined]
    at jrockit/vm/Allocator.allocSlowCaseInner(Allocator.java:930)[inlined]
    at jrockit/vm/Allocator.allocSlowCase(Allocator.java:776)[optimized]
    at oracle/jdbc/driver/T4CMAREngine.unmarshalCLRforREFS(T4CMAREngine.java:2024)[optimized]
    at oracle/jdbc/driver/T4CTTIoer.unmarshal(T4CTTIoer.java:160)[optimized]
    at oracle/jdbc/driver/T4C8Oall.receive(T4C8Oall.java:727)[optimized]
    at oracle/jdbc/driver/T4CPreparedStatement.doOall8(T4CPreparedStatement.java:216)[inlined]
    at oracle/jdbc/driver/T4CPreparedStatement.executeForRows(T4CPreparedStatement.java:955)[optimized]
    at oracle/jdbc/driver/OracleStatement.executeMaybeDescribe(OracleStatement.java:1060)[optimized]
    at oracle/jdbc/driver/T4CPreparedStatement.executeMaybeDescribe(T4CPreparedStatement.java:839)[optimized]
    at oracle/jdbc/driver/OracleStatement.doExecuteWithTimeout(OracleStatement.java:1132)[optimized]
    at oracle/jdbc/driver/OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:3316)[optimized]
    at oracle/jdbc/driver/OraclePreparedStatement.executeQuery(OraclePreparedStatement.java:3361)[optimized]
    ^-- Holding lock: oracle/jdbc/driver/T4CPreparedStatement@0x1d8f8268[thin lock]
    ^-- Holding lock: oracle/jdbc/driver/T4CConnection@0x14d68fd8[thin lock]
    at weblogic/jdbc/wrapper/PreparedStatement.executeQuery(PreparedStatement.java:97)[optimized] 
```

试图分配内存似乎被卡住了。根据我们的监控工具，堆使用率在 14% 左右，而在服务器卡住之前的时间不到 20%。

这是java版本：

```
java version "1.5.0_14"
Java(TM) 2 Runtime Environment, Standard Edition (build 1.5.0_14-b03)
BEA JRockit(R) (build R27.5.0-110_o-99226-1.5.0_14-20080528-1505-linux-x86_64, compiled mode) 
```

这些是我们正在使用的 JVM 设置

```
-Xms256m -Xmx3072m -Xverify:none 
```

任何想法可能导致此问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T13:57:22.797

尝试分配额外的[TLA](http://docs.oracle.com/cd/E13150_01/jrockit_jvm/jrockit/geninfo/diagnos/bestpractices.html#wp1089942)（线程局部区域）空间时，它看起来像是卡住了。线程局部区域 (TLA) 是在堆或托儿所上保留的一块空闲空间，并分配给线程供其独占使用。线程可以在自己的 TLA 中分配小对象，而无需与其他线程同步。当 TLA 满时，线程只请求一个新的 TLA。由于 jrockit 分配内存失败，线程卡住了。

从堆栈跟踪中，当您从数据库中读取数据时会发生这种情况，因此这可能意味着没有足够的 TLA 空间用于读取的对象。此查询是否从数据库中读取了大量记录？

您可以尝试通过[调整 TLA 大小来解决此问题](http://docs.oracle.com/cd/E13150_01/jrockit_jvm/jrockit/geninfo/diagnos/memman.html#wp1089132)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T16:33:37.147

问题很可能与数据库操作有关：`Holding lock: oracle/jdbc/driver/T4CPreparedStatement@0x1d8f8268[thin lock]`.

在您的服务器遇到上述问题时，您是否检查过数据库操作是否正在执行？

您可以检查以下内容：

*   长时间运行的查询
*   与 DB 服务器相关的问题导致 DB 响应缓慢
*   尝试从数据库加载大块数据的数据库操作

# python - Python 使用 Selenium 和 Beautiful Soup 抓取 JavaScript

> ID：14529849
> 
> 赞同：11
> 
> 时间：2013-01-25T20:27:15.767
> 
> 标签：python, selenium, screen-scraping, beautifulsoup

我正在尝试使用 BS 和 Selenium 抓取 JavaScript 启用页面。到目前为止，我有以下代码。它仍然无法以某种方式检测到 JavaScript（并返回空值）。在这种情况下，我试图在底部抓取 Facebook 评论。（检查元素将类显示为 postText）
感谢您的帮助！

```
from selenium import webdriver  
from selenium.common.exceptions import NoSuchElementException  
from selenium.webdriver.common.keys import Keys  
import BeautifulSoup

browser = webdriver.Firefox()  
browser.get('http://techcrunch.com/2012/05/15/facebook-lightbox/')  
html_source = browser.page_source  
browser.quit()

soup = BeautifulSoup.BeautifulSoup(html_source)  
comments = soup("div", {"class":"postText"})  
print comments 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-03-22T05:04:18.357

您的代码中有一些错误已在下面修复。但是，“postText”类必须存在于其他地方，因为它没有在原始源代码中定义。我对您的代码的修订版本已经过测试，并且正在多个网站上运行。

```
from selenium import webdriver  
from selenium.common.exceptions import NoSuchElementException  
from selenium.webdriver.common.keys import Keys  
from bs4 import BeautifulSoup

browser = webdriver.Firefox()  
browser.get('http://techcrunch.com/2012/05/15/facebook-lightbox/')  
html_source = browser.page_source  
browser.quit()

soup = BeautifulSoup(html_source,'html.parser')  
#class "postText" is not defined in the source code
comments = soup.findAll('div',{'class':'postText'})  
print comments 
```

# html - 在? 如果包装术语的定义在随后的 中，使用<dfn>in 在语义上是否有效？如MDN 所述，这是正确使用还是必须在段落或定义列表中专门使用。我想像这样格式化我的列表：& 问问题 问问题 2013-01-25T20:27:24.943 115 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 如果包装术语的定义在随后的 中，使用<dfn>in 在语义上是否有效？如MDN 所述，这是正确使用还是必须在段落或定义列表中专门使用。我想像这样格式化我的列表：</dfn>

| <dfn>我的逻辑说应该允许使用以下代码： 

&#124; <dfn>Attack</dfn> &#124; Time (in ms) before the compressor will begin to work after the audio level goes beyond the threshold. &#124;
&#124; <dfn>Release</dfn> &#124; Time (in ms) before the compressor will cease to work after the audio level drops beneath the threshold. &#124;
&#124; <dfn>Ratio</dfn> &#124; The amount of compression to be applied. &#124;
&#124; <dfn>Threshold</dfn> &#124; A level in dB which, if the signal surpasses, the compressor will begin working. &#124;

您 <bean id="contactService" class="pl.ivmx.contact.service.ContactServiceImpl"></bean> 在 servlet 上下文中 - 您应该将服务类移动到根 Web 应用程序上下文（其中 <tx:annotation-driven>事务管理器是/应该声明的）。 基于 Spring AOP/Bean 后处理器的基础工具，如 Global Method Security、Transactions、Caching、PlaceholderConfigurers（处理${..}占位符的东西）在每个容器的基础上工作。由于ContactServiceImplbean 是在调度程序 servlet 上下文中声明的，因此它没有被代理包装，因此@Transactional被忽略。 换句话说，您不应该将 DAO/Service 类放入 dispatcher-servlet.xml。 请参阅Spring Framework 中 applicationContext.xml 和 spring-servlet.xml 之间的区别 htmllisthtml-table 4 2 回答 2 This answer is useful 1 你看规格了吗？ dfn元素表示术语的定义实例。作为 dfn 元素的最近祖先的段落、描述列表组或部分还必须包含 dfn 元素给出的术语的定义。 您的代码片段不包含三个有效祖先中的任何一个，因此它本身是无效的。但是，我相信它被归类为一个部分，这可能使您可以使用。 于 2013-01-25T20:39:17.313 回答 This answer is useful 0 是的！根据w3schools，是一个短语（内联）标签。 但是，他们也建议： , *, **, <dfn>, `, <samp>,`和`标签都是短语标签。它们没有被弃用，但可以使用 CSS 实现更丰富的效果。 于 2013-01-25T20:32:55.977 回答 Related 3 awk - 如何合并文件 2 jquery - jQuery如果下一个隐藏元素宽度类没有孩子做某事 1 javascript - 导航栏被撕裂 1 twitter-bootstrap - 使用 Twitter Bootstrap 构建社区论坛 1 java - 如何检查 JDialog 状态 5 c# - 多个筛选条件 Azure 表存储 1 c++11 - 使用 make_shared 的更短的方法？ 1 javascript - 未捕获的类型错误：无法设置未定义的属性“currentDay” 8 html - 似乎无法将我的 h1 居中？ 3 javascript - 防止源加载两次 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：14529851
> 
> 赞同：0
> 
> 时间：
> 
> 标签：html, list, html-table

如果包装术语的定义在随后的 中，使用`<dfn>`in 在语义上是否有效？[如MDN 所述，](https://developer.mozilla.org/en-US/docs/HTML/Element/dfn)这是正确使用还是必须在段落或定义列表中专门使用。我想像这样格式化我的列表：`<table>``<td>``<dfn>`

![在表格中使用 dfn](../Images/34b7c8810c898523ec239af3fa21fc8c.png)

我的逻辑说应该允许使用以下代码：

```
<table>
    <tr>
        <td><dfn>Attack</dfn></td>
        <td>Time (in ms) before the compressor will begin to work after the audio level goes beyond the threshold.</td>
    </tr>
    <tr>
        <td><dfn>Release</dfn></td>
        <td>Time (in ms) before the compressor will cease to work after the audio level drops beneath the threshold.</td>
    </tr>
    <tr>
        <td><dfn>Ratio</dfn></td>
        <td>The amount of compression to be applied.</td>
    </tr>
    <tr>
        <td><dfn>Threshold</dfn></td>
        <td>A level in dB which, if the signal surpasses, the compressor will begin working.</td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T20:39:17.313

你看[规格了](http://www.w3.org/html/wg/drafts/html/master/text-level-semantics.html#the-dfn-element)吗？

> `dfn`元素表示术语的定义实例。作为 dfn 元素的最近祖先的[段落](http://www.w3.org/html/wg/drafts/html/master/dom.html#paragraph)、[描述列表组](http://www.w3.org/html/wg/drafts/html/master/grouping-content.html#the-dl-element)或[部分](http://www.w3.org/html/wg/drafts/html/master/dom.html#sectioning-content-0)还必须包含 dfn 元素给出的术语的定义。

您的代码片段不包含三个有效祖先中的任何一个，因此它本身是无效的。但是，我相信它`<body>`被归类为一个部分，这可能使您可以使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T20:32:55.977

是的！根据[w3schools](http://www.w3schools.com/tags/tag_phrase_elements.asp%20w3schools)，是一个短语（内联）标签。

但是，他们也建议：

> , `<em>`, `<strong>`, `<dfn>`, `<code>`, `<samp>`,`<kbd>`和`<var>`标签都是短语标签。它们没有被弃用，但可以使用 CSS 实现更丰富的效果。``</samp>`</dfn>***</tx:annotation-driven></dfn>  |</dfn>

# jquery - 刷新 JSON 调用

> ID：14529853
> 
> 赞同：0
> 
> 时间：2013-01-25T20:27:39.733
> 
> 标签：jquery, json, load, refresh

我正在通过 JSON 将图像加载到#photographs 中。它最初加载 10 个镜头，当您向下滚动到某个点（使用航路点）时，它应该“刷新”JSON 提要，以便加载额外的 5 个镜头。我在 JSON URL 中使用 // &per_page=' + itemsLoaded // 为此。每次击中航路点时，var itemsLoaded 都会更新为 +5。

见代码：

```
var itemsLoaded = 10;    

$.getJSON('http://api.flickr.com/services/rest/?format=json&method=flickr.photosets.getPhotos&photoset_id=' + photoset_id + '&per_page=' + itemsLoaded + '&page=1' + '&api_key=' + apiKey + '&user_id=' + userId + '&jsoncallback=?', function (data) {
$.each(data.photoset.photo, function (i, flickrPhoto) {
    var basePhotoURL = 'http://farm' + flickrPhoto.farm + '.static.flickr.com/' + flickrPhoto.server + '/' + flickrPhoto.id + '_' + flickrPhoto.secret + "_b.jpg";
    var basePhotoURLMobile = 'http://farm' + flickrPhoto.farm + '.static.flickr.com/' + flickrPhoto.server + '/' + flickrPhoto.id + '_' + flickrPhoto.secret + "_z.jpg";
    var flickrLink = "http://www.flickr.com/photos/" + data.photoset.owner + "/" + flickrPhoto.id + "/";

    var $img = $("<img/>").attr("src", basePhotoURL);
    var $imgMobile = $("<img/>").attr("src", basePhotoURLMobile);
    var $wrap = $("<div class='item'></div>");
    $(".item:nth-child(9n)").addClass("tenth");

    if($(window).width() < 501) {
        $wrap.append($imgMobile);
    } else {
        $wrap.append($img);
    }

    $wrap.append("<a href='" + basePhotoURL + "'.jpg' title='View full size' class='zoom' rel='enroll' />");
    $wrap.append("<a href='" + flickrLink + "' class='flickr' title='View on Flickr' target='_blank' />");
    $wrap.appendTo('#photographs');
});

var loaded = 0;
var totalAmount = $('#photographs .item').length;

    $('#photographs .item img').each(function() {
        loaded;
        $(this).imagesLoaded(function($images) {
            loaded++;
            var percentage =  parseInt((loaded / 11) * 100);
            console.log(loaded + ' van de ' + totalAmount);
            $("#bigloader").progressbar({
               value: percentage
            });
            if(loaded == 10) {
                $("#photographs, #loader").fadeIn("fast");
                $("#bigloader, #preloading").fadeOut("fast");
                $("#photographs").gridalicious({
                    gutter: 2,
                    animate: true,
                    effect: 'fadeInOnAppear',
                    width: 430
                });
                $('.item.tenth').waypoint({
                  triggerOnce: true,
                  handler: function(){
                    console.log("arrived at trigger");
                    itemsLoaded = itemsLoaded + 5;
                  }, 
                  offset: '50%'
                });
            } else if (loaded == totalAmount) {
                $("#loader").fadeOut("fast");       
            };
        });
    }); 
```

额外说明：

每次击中航点时，itemsLoaded 变量都会更新为 +5 值。itemsLoaded 是我通过 JSON 加载的项目数量的关键；以便 JSON 提要需要刷新。

基本上，我如何使用更新的变量更新现有的 JSON 提要？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T21:00:25.473

为了对 flickr API 进行新的调用，您需要将“$.getJSON”方法包装在一个函数中，当航点被击中时，您可以再次调用该函数。我相信您也有一个错误，因为您正在将元素附加到容器中，但是您想要附加*接下来的 10 个元素*，而不是检索*所有相同的元素加上 5*。因此，我建议您使用一个变量来引用要从 flickr API 加载的页面，而不是要加载的元素数量。

我相信您正在使用 jquery waypoint 插件，实际上您可以看到在[此示例](http://imakewebthings.com/jquery-waypoints/shortcuts/infinite-scroll/)中，仅检索下一个项目并将其附加到容器元素。我相信这就是您想要做的，因为您正在对容器元素进行附加。所以我建议使用一个变量来引用要检索的页面，而不是要检索的元素数量。元素的数量将始终为 10，但您将检索 10 个元素的下一页并将它们附加到容器中。

更改此变量，您的问题的解决方案就这么简单：

```
function refreshJSON(pageLoaded){
  $.getJSON('http://api.flickr.com/services/rest/?format=json&method=flickr.photosets.getPhotos&photoset_id=' + photoset_id + '&per_page=10&page=' + pageLoaded + '&api_key=' + apiKey + '&user_id=' + userId + '&jsoncallback=?', function (data) {
    $.each(data.photoset.photo, function (i, flickrPhoto) {
      var basePhotoURL = 'http://farm' + flickrPhoto.farm + '.static.flickr.com/' + flickrPhoto.server + '/' + flickrPhoto.id + '_' + flickrPhoto.secret + "_b.jpg";
      var basePhotoURLMobile = 'http://farm' + flickrPhoto.farm + '.static.flickr.com/' + flickrPhoto.server + '/' + flickrPhoto.id + '_' + flickrPhoto.secret + "_z.jpg";
      var flickrLink = "http://www.flickr.com/photos/" + data.photoset.owner + "/" + flickrPhoto.id + "/";

      var $img = $("<img/>").attr("src", basePhotoURL);
      var $imgMobile = $("<img/>").attr("src", basePhotoURLMobile);
      var $wrap = $("<div class='item'></div>");
      $(".item:nth-child(9n)").addClass("tenth");

      if($(window).width() < 501) {
          $wrap.append($imgMobile);
      } else {
          $wrap.append($img);
      }

      $wrap.append("<a href='" + basePhotoURL + "'.jpg' title='View full size' class='zoom' rel='enroll' />");
      $wrap.append("<a href='" + flickrLink + "' class='flickr' title='View on Flickr' target='_blank' />");
      $wrap.appendTo('#photographs');
  });

  var loaded = 0;
  var totalAmount = $('#photographs .item').length;

  $('#photographs .item img').each(function() {
      $(this).imagesLoaded(function($images) {
          loaded++;
          var percentage =  parseInt((loaded / 11) * 100);
          console.log(loaded + ' van de ' + totalAmount);
          $("#bigloader").progressbar({
             value: percentage
          });
          if(loaded == 10) {
              $("#photographs, #loader").fadeIn("fast");
              $("#bigloader, #preloading").fadeOut("fast");
              $("#photographs").gridalicious({
                  gutter: 2,
                  animate: true,
                  effect: 'fadeInOnAppear',
                  width: 430
              });
              $('.item.tenth').waypoint({
                triggerOnce: true,
                handler: function(){
                  console.log("arrived at trigger");
                  pageLoaded++;
                  refreshJSON(pageLoaded);
                }, 
                offset: '50%'
              });
          } else if (loaded == totalAmount) {
              $("#loader").fadeOut("fast");       
          };
      });
  });
}

refreshJSON(1); // we start by loading the first page 
```

# c# - 图片控件绑定生成的Imageurl

> ID：14529855
> 
> 赞同：3
> 
> 时间：2013-01-25T20:27:52.010
> 
> 标签：c#, image, windows-phone-7, xaml

嘿，这是我在这里的第一个问题，因为我真的找不到我的问题的答案。通常我会检查论坛、谷歌和所有这些东西 5 次，但在这种情况下我没有找到任何解决方案，因为我没有得到我猜想的关键字......

问题：我在我的 WP7-App 中有一个图像控件，并试图放入一个如下所示的 Uri：

[http://veranstaltungen.meinestadt.de/images/image.php?origin=events&mode=G&id=71080093](http://veranstaltungen.meinestadt.de/images/image.php?origin=events&mode=G&id=71080093)

问题是控件未加载此图像。像这样的图像，

[http://www.design-center.de/wp-content/uploads/2012/09/IMG_1113.jpg-mini.jpg](http://www.design-center.de/wp-content/uploads/2012/09/IMG_1113.jpg-mini.jpg)

加载没有任何问题。

关于解决方法或其他控件的任何想法？

提前谢谢

```
<DataTemplate>
      <controls:PivotItem Margin="0,0,0,0">
             <ScrollViewer VerticalScrollBarVisibility="Visible">
                    <StackPanel Name="contentPanel"  Margin="12,0,12,0">
                            <TextBlock x:Name="PartyTitle" Text="{Binding title}" Margin="10,0,0,10" Style="{StaticResource PhoneTextTitle2Style}" TextWrapping="Wrap"/>
                            <Image x:Name="PartyImage" Source="{Binding imgUrl}" Margin="10,0,0,10" ></Image>
                            <TextBlock x:Name="PartyDescription" Margin="10,0,0,10"  Text="{Binding text}" TextWrapping="Wrap" />
                            <Button x:Name="PartyLink" DataContext="{Binding urls[0]}" Content="Link" Click="PartyLink_Click"></Button>
                    </StackPanel>
             </ScrollViewer>
      </controls:PivotItem>
</DataTemplate> 
```

Binding 和东西对所有控件都运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-31T00:23:33.157

您可以在后面的代码中下载图像并将其设置为源。生病发布一个例子。

这应该可以，但我的网络适配器无法在模拟器上运行。它总是一些东西。

```
 WebRequest req = WebRequest.Create("http://www.leenwallpapers.com/images/gallery/funny0152.jpg");
         req.BeginGetRequestStream(new AsyncCallback(test), null); 
```

HttpWebRequest 请求 = (HttpWebRequest)ar.AsyncState;

```
 // End the operation
        Stream postStream = request.EndGetRequestStream(ar);
        BitmapImage img = new BitmapImage();
        img.SetSource(postStream);
        imgtest.Source = img; 
```

在这种情况下，imgtest 是我的 xaml 中图像控件的 x:name。您当然可以在 viewmodel 中执行此操作，而 imgtest 可以是您设置的位图图像属性，并更改了 raise 属性。

# html - 为什么没有应用我正在编写的 CSS 规则？

> ID：14529856
> 
> 赞同：1
> 
> 时间：2013-01-25T20:27:52.817
> 
> 标签：html, css, styles, stylesheet, sublimetext2

出于某种奇怪的原因，我无法在 Sublime Text 2 中编辑或将样式应用于 html。我无法执行内部样式或链接到外部样式。但是，如果我将已完成的代码放入 Dreamweaver 或 Notepad++ 中，是否会应用样式并可编辑？如何获得 sublime Text 2 以允许我应用和编辑样式？

我有 Windows 7，我是 HTML 和 CSS 的新手。我正在尝试学习不同的代码编辑器，但是当编辑器不起作用时，这非常困难:(

谢谢！

ETA：当我指的是样式时，我指的是 CSS。我无法在 Sublime text 2 上的 html 页面上查看任何 css 样式。仅当我使用 notepad++ 或 dreamweaver 时。当我使用 sublime text 2 时，我在浏览器中看不到 css。

这是我的代码：

```
<!DOCTYPE html>
<head>
<meta charset=utf-8" />
<title>Untitled Document</title>
</head>

<style> 
    body{
        background: orange;
    }

</style>

<body>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T20:47:58.090

你的问题不在于编辑；文档中可能存在一些错误。

您目前缺少开头`<html>`，`<style>`元素应该*在*它们之间或`<head>`之间`<body>`，并且`charset`属性应该有第二个引号来包围值：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Untitled Document</title>

    <style> 
        body{
            background: orange;
        }

    </style>
</head>

<body>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T20:48:20.890

问题不在于文本编辑器，而必须是您的代码。您可能正在打开一个过时的文件并在其中查找更改。确保将文件保存在正确的位置并在查找更改时打开正确的文件。

**此外，请确保将其保存为 .html，Sublime Text 2 不会像 Dreamweaver 或其他编辑器那样自动为您的文件提供扩展名。**

# git - 删除远程分支后删除文件

> ID：14529858
> 
> 赞同：2
> 
> 时间：2013-01-25T20:28:10.603
> 
> 标签：git

我已经使用以下命令删除了一个远程分支：

```
git push le_remote :le_dead_branch 
```

并且在遥控器上成功删除了分支。但是在检查了 git repo 的大小后，我发现可能是该特定分支独有的文件（可能）仍然存在。所以我相信，这是因为我删除的是那个特定状态的引用，而不是文件，我的问题是：我怎样才能真正从文件系统中删除文件？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T20:31:42.190

您需要转到远程存储库并执行

```
git reflog expire --expire-unreachable=now --all
git prune
git repack -a -d 
```

只有这样，与该分支关联的对象才会被修剪。

# javascript - 用Javascript匹配引号之间的字符数？

> ID：14529861
> 
> 赞同：3
> 
> 时间：2013-01-25T20:28:29.043
> 
> 标签：javascript

假设我的数据如下

```
Hello { "I have {g{t{" braces { between "{" { quotes{  "{{" 
```

如何匹配仅在引号之间的 { 符号？我试图仅在引号之间提取指定字符的出现次数。有任何想法吗？样本应匹配 6 个大括号

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T20:30:49.057

```
var nb = str.split('"').filter(function(_,i){return i%2}).join('')
     .split('{').length - 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T20:42:06.107

`s`你的字符串在哪里

```
s.match(/"(.+?)"/g).reduce(function(p,c) {return p + (c.match(/{/g)||[]).length;}, 0); 
```

由于有些人觉得正则表达式很吓人，我认为逐步了解它的工作原理可能会有所帮助。:)

*   第一个正则表达式`/"(.+?)"/g`为您提供原始字符串中所有带引号的字符串的数组。
    *   正则表达式的开头和结尾`/`and`/`就像引号是字符串一样。表明`g`这是一个全局搜索——我们想要所有引用的字符串，而不仅仅是第一个。
    *   `"`表示要匹配的字符串前后的引号
    *   `.`表示任何字符
    *   `+?`是一个成语，表示正则表达式中直到下一个字符的所有内容；换句话说，*非贪婪*匹配。如果我们`*`在这里使用而不是在`+?`first 和 last 之间只找到一个大引号字符串`"`，并且所有其他`"`s 都包含在其中！
    *   然后我们将我们希望匹配函数实际返回给我们的内容放在括号中。在这种情况下，它是引号内的所有内容，而引号除外。
*   第二个正则表达式`/{/g`计算你的`{`字符。通过使用`||[]`，我们确保`0`即使没有找到大括号字符，我们也会获得返回值。
*   在不需要循环的情况下对这些求和的最简单方法是使用`reduce`，我们提供 的初始值`0`。

# wordpress - Wordpress 永久链接杀死了 Taxonomy.php 页面

> ID：14529864
> 
> 赞同：0
> 
> 时间：2013-01-25T20:28:40.313
> 
> 标签：wordpress, custom-post-type

我有一个自定义帖子类型以及一个自定义分类法。这是两者的注册码：

```
register_post_type('parts', array(  'label' => 'Parts','description' => '','public' => true,'show_ui' => true,'show_in_menu' => true,'capability_type' => 'post','hierarchical' => true,'rewrite' => array('slug' => 'parts'),'query_var' => true,'has_archive' => true,'exclude_from_search' => false,'menu_position' => 5,'supports' => array('title','page-attributes',),'taxonomies' => array('parts_categories',),'labels' => array (
  'name' => 'Parts',
  'singular_name' => 'Part',
  'menu_name' => 'Parts',
  'add_new' => 'Add Part',
  'add_new_item' => 'Add New Part',
  'edit' => 'Edit',
  'edit_item' => 'Edit Part',
  'new_item' => 'New Part',
  'view' => 'View Part',
  'view_item' => 'View Part',
  'search_items' => 'Search Parts',
  'not_found' => 'No Parts Found',
  'not_found_in_trash' => 'No Parts Found in Trash',
  'parent' => 'Parent Part',
),) );

register_taxonomy('parts_categories',array (
  0 => 'parts',
),array( 'hierarchical' => true, 'label' => 'Parts Categories','show_ui' => true,'query_var' => true,'rewrite' => array('slug' => 'parts'),'singular_label' => 'Part Category') ); 
```

所以当永久链接关闭时一切正常：

*   单部分.php
*   分类-parts_categories.php
*   存档-products.php

一旦我打开永久链接，我就会得到一个 Epic 404，仅适用于应该指向 taxonomy-parts_categories.php 的页面

单页和存档页都可以工作。奇怪的是，默认的 taxonomy.php 模板甚至没有被选中。

Htaccess 绝对到位，我已经刷新了我的重写无济于事。我还打开/关闭了我的永久链接，但没有结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T12:57:35.213

您在 register_taxonomy 上有一个 rewrite 参数，其中 slug => 'parts' 与您的帖子类型相同。

尝试将其更改为不同的内容，重新访问永久链接页面（您无需更改任何内容，只需访问永久链接设置页面即可刷新它）并重试。

# ios - 隐藏广告横幅不会导致请求/显示更多广告

> ID：14529865
> 
> 赞同：3
> 
> 时间：2013-01-25T20:28:46.100
> 
> 标签：ios, ios5, admob, iad

我有一个使用 AdMob 中介服务的测试应用程序设置，目前仅在测试设备上。我已经按照文档设置了所有必需的方法。我遇到了一个问题，当出现无法接收广告错误时，不再请求或显示广告？

标题：

```
#import <UIKit/UIKit.h>
#import "GADBannerViewDelegate.h"

@class GADBannerView, GADRequest;

@interface AdTestViewController : UIViewController
    <GADBannerViewDelegate> {
    GADBannerView *bannerView_;
}

@property (nonatomic, retain) GADBannerView *bannerView;

- (GADRequest *)createRequest;

@end 
```

小鬼文件

```
#import "AdTestViewController.h"
#import "Constants.h"
#import "GADBannerView.h"
#import "GADRequest.h"

@implementation AdTestViewController

@synthesize bannerView = bannerView_;

- (void)viewDidLoad {
    [super viewDidLoad];

    // Create a view of the standard size at the top of the screen.
    // Available AdSize constants are explained in GADAdSize.h.
    //bannerView_ = [[GADBannerView alloc] initWithAdSize:kGADAdSizeBanner];
    // Initialize the banner at the bottom of the screen.
    //CGPoint origin = CGPointMake(0.0,
     //                            self.view.frame.size.height -
       //                          CGSizeFromGADAdSize(kGADAdSizeBanner).height);
    self.bannerView = [[GADBannerView alloc] initWithAdSize:kGADAdSizeBanner];
                                                    //origin:origin];

    self.bannerView.adUnitID = kAdMobPublisherID;
    self.bannerView.delegate = self;
    [self.bannerView setRootViewController:self];
    [self.view addSubview:self.bannerView];
    self.bannerView.center =
    CGPointMake(self.view.center.x, self.bannerView.center.y);
    [bannerView_ loadRequest:[self createRequest]];

    bannerView_.backgroundColor = [UIColor blueColor];

    // Make the request for a test ad. Put in an identifier for
    // the simulator as well as any devices you want to receive test ads.
    GADRequest *request = [GADRequest request];
    request.testDevices = [NSArray arrayWithObjects:
                           @"4D047EB9-A3A7-441E-989E-C5437F05DB04",
                           @"YOUR_DEVICE_IDENTIFIER",
                           nil];

}

- (GADRequest *)createRequest {
    GADRequest *request = [GADRequest request];

    // Make the request for a test ad. Put in an identifier for the simulator as
    // well as any devices you want to receive test ads.
    request.testDevices = [NSArray arrayWithObjects:
                           @"4D047EB9-A3A7-441E-989E-C5437F05DB04",
                           @"YOUR_DEVICE_IDENTIFIER",
                           nil];
    return request;
}

- (void)adView:(GADBannerView *)view didFailToReceiveAdWithError:(GADRequestError *)error;
{
    NSLog(@"Error - did Fail to Receive an Ad");
    bannerView_.hidden = YES;

}

- (void)adViewDidReceiveAd:(GADBannerView *)view;
{
    NSLog(@"Ad Received");
    bannerView_.hidden = NO;
}

@end 
```

我在日志中看到的是“收到广告”几次，然后是“错误 - 未能收到广告”......在此日志之后没有其他条目，就像它停止请求一样？目前仅在模拟器上测试。

任何想法如何解决这个问题，或者在收到错误/未收到广告时隐藏视图的潜在替代方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-30T18:17:47.787

我发现同样的事情——当它`GADBannerView`被隐藏时，不再发出请求。

我成功尝试的一件事是将`GADBannerView`屏幕移出而不是隐藏它。当然，您只想在 的结果下执行此操作`didFailToReceiveAdWithError`，然后在 时将其移回屏幕`adViewDidReceiveAd`。我得到了这个工作，所以当广告来来去去时，用户会看到一个漂亮的动画，就像 iAd 鼓励的那样。

简而言之，下面的代码会将您的`GADBannerView`（此处称为`mAdBannerView`）放置在屏幕底部或屏幕外，具体取决于布尔值`adIsLoaded`。

```
 CGRect bannerFrame = mAdBannerView.frame;
  bannerFrame.origin.y = self.view.bounds.size.height - (adIsLoaded * bannerFrame.size.height);
  mAdBannerView.frame = bannerFrame; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T20:32:13.710

在出现错误时调用的方法中，例如

```
bannerView_.hidden = 1; 
```

如果有错误，它将隐藏视图，如果收到的广告没有错误，它可能会自动显示

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T23:31:25.967

认为你最好只用 hidden 属性隐藏bannerView_。

```
- (void)adView:(GADBannerView *)view didFailToReceiveAdWithError:(GADRequestError *)error {
        bannerView_.hidden = YES;       
    } 
```

当然，您必须记住设置`hidden`回`YES`成功接收广告的时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T00:31:25.263

简单的解决方案，在方法中设置bannerView_.hidden true `adView:didFailToReciewvwAdWithError`。并检索视图使用`adViewDidReceiveAd`方法。示例代码：

这些是 ADmob 的委托方法：

```
- (void)adView:(GADBannerView *)view didFailToReceiveAdWithError:(GADRequestError *)error
{
    bannerView_.hidden = YES;
}

- (void)adViewDidReceiveAd:(GADBannerView *)view
{
    bannerView_.hidden = NO;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-22T01:54:34.680

我有同样的问题，这对我有用：

不要使用 .hidden 属性隐藏 AdMob 广告。只需将 alpha 设置为 0（不可见）或 1（可见）。

所以在你的 GADBannerView 委托方法中......

```
-(void)adView:(GADBannerView *)bannerView didFailToReceiveAdWithError:(GADRequestError *)error {

    // Hide the ad banner.
    [UIView animateWithDuration:0.5 animations:^{

        self.myADBanner.alpha = 0.0;

    }];

}

-(void)adViewDidReceiveAd:(GADBannerView *)bannerView {

    //Show the ad banner.
    [UIView animateWithDuration:0.5 animations:^{

        self.myADBanner.alpha = 1.0;

    }];

} 
```

关于“在此日志之后没有其他条目就像它停止请求一样？”

当我从视图层次结构中删除广告时，也会发生这种情况。但是，当我将广告添加回视图层次结构时，请求会继续。他们没有继续的唯一一次是当我使用 .hidden 属性时。

# html - 将 API (xml)/URL 引入到 Joomla 的 php 中

> ID：14529869
> 
> 赞同：0
> 
> 时间：2013-01-25T20:29:09.073
> 
> 标签：html, xml, api, joomla

我需要的是一种方法来引入这个：184.173.18.228/api/profile/1000/0/Adam.Adams（这是一个xml文件）到php（我假设）在Joomla中使用（我可以使用Sourcerer Joomla 中的代码） - 我遇到的问题是存在跨域代理问题 - 上周末我能够使用 ajax/jquery 在我的机器上本地呈现该 xml：

```
// jQuery script

$(function() {
    // Load data from proxy.php using GET request
    $.get('test.xml', function(data)
    {
        // Search for the XML element you want, perform an action on each occurrence of found element
        $(data).find("XMLElement").each(function()
        {
            $('#output').append($(this).attr('XMLAttribute')); // Display desired attribute of element -OR-
            $('#output').append($(this).children("Phone").text()); 
```

我什至不确定我是否正确地问了这个问题 - 我想要发生的是：一个 php 脚本，用于引入该 xml/url 以在页面上回显/填充 html。我已经尝试了一百万件事，但就是无法得到它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T22:58:51.700

这真的看起来像 Javascript，而不是 php。在 php 中，你不会有跨域限制，因为它运行在服务器上，而不是浏览器上。

所有浏览器都会阻止跨域 ajax 调用。

您的解决方案是在 php 中编写一个脚本，该脚本对远程站点执行 wget 或 curl，因此您调用本地脚本并且服务器上的脚本加载远程 url。你应该可以找到一些现成的。

# spring - Spring data jpa：如何使用@ElementCollection 检索数据？

> ID：14529871
> 
> 赞同：0
> 
> 时间：2013-01-25T20:29:14.760
> 
> 标签：spring, hibernate, jpa

这是 Files.java 的一部分

```
@Entity(name="files")
public class Files {

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;

    private String title;

    @ElementCollection
    private List<String> filenames= new ArrayList<String>();

    //<< getter and setter >>
} 
```

它在 mySql 上正确创建了表 'Files' 和 'Files_filenames'

我可以用它把数据放在控制器上

```
Files files = new Files();
files.setTitle(ufile.getTitle());
files.setFilenames(Arrays.asList(ufile.getFilename().split(","))); 
```

到目前为止，一切看起来都还不错

但是，当我尝试从数据库中获取数据时，文件名总是返回类似于“persistentbag”而不是 ArrayList 的内容。

我想知道如何从数据库中获取 ArrayList

我正在使用 Spring data JPA，使用 Hibernate 作为 Jpa 供应商。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T21:00:27.510

[`PersistentBag`](http://docs.jboss.org/hibernate/core/4.0/javadocs/org/hibernate/collection/internal/PersistentBag.html) *是 a* `List`（即，它实现了`List`），因此您可以将其用作常规`List`. `List`在这种情况下，无需关心它的实际实现。

# c# - Powershell 二进制模块 - 参数验证

> ID：14529880
> 
> 赞同：3
> 
> 时间：2013-01-25T20:29:52.553
> 
> 标签：c#, validation, powershell, data-annotations

我正在学习 PowerShell，[一位好朋友向我推荐了这篇](http://csharpening.net/?p=738)关于 PowerShell 中二进制模块的精美文章

我计划迁移我创建的一些控制台应用程序以用作二进制模块。

我想做的一件事是正确验证我的 PowerShell 参数。

我找到了这篇文章：

[http://huddledmasses.org/better-error-messages-for-powershell-validatepattern/](http://huddledmasses.org/better-error-messages-for-powershell-validatepattern/)

但我不确定这是否是我应该遵循的方法，我的意思是，我什至打算使用[DataAnnotations](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.aspx)来验证我的二进制模块中的 PowerShell 参数

在不久的将来，我计划开始直接使用更多的 PowerShell，但与此同时，我只想将我的控制台应用程序转换为 PowerShell 二进制模块。

你们能指出我正确的方向吗？

我只是想知道在二进制模块中是否有*更多 PowerShell 方式来处理我的参数*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T20:48:06.200

Jaykul 的建议更多的是：如何为我的 PowerShell 代码获取新的验证器。相反，我会从内置的开始，只有在需要时才做额外的工作。

您会在 System.Management.Automation 中找到一些：

*   ValidateArgumentsAttribute
*   ValidateEnumeratedArgumentsAttribute
*   验证长度属性
*   验证范围属性
*   ValidatePatternAttribute
*   ValidateScriptAttribute
*   验证计数属性
*   验证集属性
*   ValidateNotNullAttribute
*   ValidateNotNullOrEmptyAttribute

They are documented on MSDN, eg [ValidateSet docs](http://msdn.microsoft.com/en-us/library/system.management.automation.validatesetattribute%28v=vs.85%29.aspx).

# visual-c++ - Windows 8 C++ 应用程序中缺少全球化支持

> ID：14529881
> 
> 赞同：-1
> 
> 时间：2013-01-25T20:29:59.117
> 
> 标签：visual-c++, windows-8, .net-4.5, globalization

我希望在适用于 Windows 8 商店的 Visual-C++ (C++/Cx) 应用程序中利用多种全球化技术。更具体地说，我想我会从语言敏感的排序开始。在[文档](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh969152)中，它提到了一组有助于对字符串进行排序的 API，但没有列出哪些 API。深入挖掘，我发现 C# 的 System.Globalization.CompareInfo 完全符合我的要求，但它似乎不适用于 C++。对于 C++ 应用程序，这种支持是否完全不存在？

也许这里更大的问题是 - 是否有一组可靠的文档可以告诉我 Win 8 C# 应用程序 API 与 C++ 应用程序 API 之间的区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T23:33:14.890

您可以在 Windows.Globalization 命名空间中找到大量的全球化支持。此功能适用于所有 WinRT 投影语言。不幸的是，除了字符分组之外，没有排序规则支持。您可以使用 Win32 NLS api ( [CompareStringEx](http://msdn.microsoft.com/en-us/library/dd317761%28v=VS.85%29.aspx) )

# c++ - 显式切片派生对象

> ID：14529884
> 
> 赞同：0
> 
> 时间：2013-01-25T20:30:09.390
> 
> 标签：c++, inheritance, casting, static, object-slicing

我为我的公司构建的项目有一些类结构。在某些时候，我已经看到派生对象的“通常不需要的”切片实际上可以使我的代码高效。请注意：

```
class Base {
  private:
    int myType; //some constant here
  public:
    Base(): myType(1)
    { 
       if(someTest()) 
       { 
         myTest = 0; // signifies that this object is not working well for me
       }  // if the test succeeds, now I know this is a TYPE1 object
    }

    virtual bool someTest() { /* does make some validation tests */ } 
    int GetMyType() { return myType; }

    // some more virtual functions follow
}

class Derived: public Base {
  public:
    Derived() : Base() 
    { 
      if( someTest() /*calls the derived*/ ) 
      { 
        myType =2; // signifies that this is a TYPE2 object
        /* Do something more*/ 
      }  
    }

    virtual bool someTest() { /* does make OTHER validation tests */ } 
} 
```

现在，如果 Derived 处的 someTest() 失败，这表明我的对象实际上是基本类型 (myType = 1) 或错误对象 (myType =0)。由于这些东西在构造函数中，并且由于我不能使用异常处理（嵌入式系统）；我想到了这个：

```
{ 
  // this is the object holder test block
  // there is some latch - Base* - above = let's call it "ObjectHolder"
  extern Base* ObjectHolder;

  Derived * deriv = new Derived();
  int dType = deriv->GetMyType() ;
  if( dType == 1) // if test at base succeded but the one in derived failed
     Base = & static_cast<Base> (*deriv); // specifically slice the object
  else if(dType =2) 
     Base = deriv;
  else
     delete deriv; // this is a TYPE0 - nonworking- object so don't latch it

  // use other implemented methods to do work ...

} 
```

现在，我为什么会有这样的设计？好吧，在我设计类时，由于“基础”（类型 1）和“派生”（类型 2）类的内部工作方法不同（并且有可能是 3、4、5 类型......内部也不同的对象）并且因为我不想在每个方法中都进行“if-then-else”检查；我想我会做出这样的设计并使不同的方法虚拟化，以便可以正确调用它们（感谢多态性），而常用方法可以在某个基类中。

但是现在，首先，我不确定那个奇怪的语法（ & static_cast < Base > *deriv ）是否正确（经过测试，似乎可以工作，但我只是想确保这不是因为运气）；其次，我不确定这是否是实现这一目标的“建议方法” - 我有点怀疑这种语法会导致内存泄漏或其他什么......

稍微更改了代码（也更正了语法）以使问题更清晰。

现在，由于 &(static_cast(*deriv)) 是一种错误的方法，我在想我是否可以创建一个“复制构造函数”来绕过基类的检查（这实际上是我尝试这些东西的原因 - 我不'不希望在某些情况下运行该测试）。如下所示：

```
class Base { 
    // other stuff is like above

    // cc:
    Base(const Base &other) : myType(other.myType)
    {
         // no test is performed here!
    }

    // like other one above
} 
```

写完这篇文章，我想我现在可以在测试块上做到这一点：

```
{ 
   // the code above

   if( dType == 1) // if test at base succeded but the one in derived failed
     Base = new Base(*deriv); // specifically slice the object with cc

    // code goes on ... 
} 
```

那这个呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T20:36:46.720

当然，如果要创建两种类型的对象，正确的方法是拥有一个包含“if (sometest)”的工厂函数，然后创建正确的对象类型：

```
 Base* factory(...) 
 {
     if(sometest())
     {
         return new Derived;
     }
     else
     {
          return new Base;
     }
 } 
```

这样，当您实际需要 Base 类型对象时，就不会不必要地创建对象的派生类型。还要记住，如果您对对象`vtable` 进行切片，则与已切片的 Derived 对象关联仍然是 Derived `vtable`。

编辑：这是一些显示切片问题的代码：

```
#include <iostream>

using namespace std;

class Base
{
public:
    virtual void func() { cout << "Base" << endl; }
};

class Derived : public Base
{
public:
    virtual void func() { cout << "Derived" << endl; }
};

int main()
{
    Base *list[10];
    for(int i = 0; i < 10; i++)
    {
        if (i % 2)
        {
            list[i] = new Base;
        }
        else
        {
            list[i] = new Derived;
        }
    }

    list[2] = &*(static_cast<Base*>(list[2]));

    for(int i = 0; i < 10; i++)
    {
        list[i]->func();
    }
    return 0;
} 
```

输出：

```
Derived
Base
Derived     <- should have changed to "Base" if questio was "right".
Base
Derived
Base
Derived
Base
Derived
Base 
```

使用原始问题中给出的“切片”语法：（ `&(static_cast<Base>(*list[2]));`根据此处发布的代码改编），在编译器`clang++`和`g++`编译器中都会出现错误。消息的本质是相同的。这是 clang 的变体：

```
error: taking the address of a temporary object of type 'Base' 
```

# javascript - 按下拉值对表格进行排序（简化我的代码）

> ID：14529886
> 
> 赞同：1
> 
> 时间：2013-01-25T20:30:12.933
> 
> 标签：javascript, jquery, select, drop-down-menu, filter

我有一张桌子。我希望用户能够通过他们在给定下拉列表中选择的选项来过滤表格。我有它的工作，但它是混乱和难以添加新行（不能让它在 jsfiddle 中工作，抱歉[http://jsfiddle.net/anschwem/Y4cf6/2/](http://jsfiddle.net/anschwem/Y4cf6/2/)）。任何简化的代码将不胜感激。此外，如果可以将此代码限制为仅过滤某个表，那就太好了，这样我就可以拥有许多表和许多下拉菜单。如果这可以在没有行 ID 的情况下完成，那就更好了。谢谢！**我的表/html：**

```
<table>
<tr id="catRow">
  <td id="cats">cats</td>
</tr>
<tr id="catRow2">
  <td id="cats">cats</td>
</tr>
<tr id="dogRow">
  <td id="dogs">dogs</td>
</tr>
<tr id="birdRow">
  <td id="birds">birds</td>
</tr>
<tr>
  <td id="dogRow2">dogs</td>
</tr>
</table>

                <select id="selectFilter">
                <option id="sel_All">Select...</option>
                <option id="selCats">Cats</option>
                <option id="selDogs">Dogs</option>
                <option id="selBirds">Birds</option>
                </select> 
```

**代码：**

```
 <script type='text/javascript'> 
    $(window).load(function(){
     $('select').change(function() {

  if($('#selectFilter option:selected').attr('id') == "sel_All" || $('#selectFilter option:selected').attr('id') == "sel_All"){$('#catRow').show();$('#catRow2').show();$('#dogRow').show();$('#dogRow2').show();$('#birdRow').show();}

  if($('#selectFilter option:selected').attr('id') == "selCats" || $('#selectFilter option:selected').attr('id') == "selCats"){$('#catRow').show();$('#catRow2').show();$('#dogRow').hide();$('#dogRow2').hide();$('#birdRow').hide();}

  if($('#selectFilter option:selected').attr('id') == "selDogs" || $('#selectFilter option:selected').attr('id') == "selDogs"){$('#catRow').hide();$('#catRow2').hide();$('#dogRow').show();$('#dogRow2').show();$('#birdRow').hide();}

  if($('#selectFilter option:selected').attr('id') == "selBirds" || $('#selectFilter option:selected').attr('id') == "selBirds"){$('#catRow').hide();$('#catRow2').hide();$('#dogRow').hide();$('#dogRow2').hide();$('#birdRow').show();}
    </script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T20:42:17.040

我重构了你的小提琴：http: [//jsfiddle.net/Y4cf6/4/](http://jsfiddle.net/Y4cf6/4/)

通过利用 CSS 类和“值”等内置属性，我们可以轻松地使这段代码更通用。

对于这个 HTML：

```
<table id="animals">
    <tr class="cat">
        <td>Cat 1</td>
    </tr>
    <tr class="cat">
        <td>Cat 2</td>
    </tr>
    <tr class="dog">
        <td>Dog 1</td>
    </tr>
    <tr class="cat">
        <td>Cat 3</td>
    </tr>
    <tr class="bird">
        <td>Bird 1</td>
    </tr>
    <tr class="cat">
        <td>Cat 4</td>
    </tr>
    <tr class="dog">
        <td>Dog 2</td>
    </tr>
</table>

<select id="selectFilter">
    <option>Select...</option>
    <option value="cat">Cats</option>
    <option value="dog">Dogs</option>
    <option value="bird">Birds</option>
</select> 
```

Javascript 本质上被简化为单行：

```
$("#selectFilter").on("change", function() {
    $("#animals").find("tr").hide().filter("." + $(this).val()).show();
}); 
```

编辑：这不能处理的一种情况是给你一种再次显示所有行的方法。我将此作为练习留给您，但这里有一个提示：您可以读取 的值`$(this).val()`，如果没有值，则显示所有行而不是过滤它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T20:39:44.597

您可以像这样更改您的 html 标记

```
<table id='animal'>
  <tr class="cat">
    <td>cats</td>
  </tr>
  <tr class="cat">
    <td>cats</td>
  </tr>
  <tr class="dog">
    <td>dogs</td>
  </tr>
  <tr class="bird">
    <td>birds</td>
  </tr>
  <tr class='dog'>
    <td>dogs</td>
  </tr>
</table>
<select id="selectFilter">
  <option value=''>Select...</option>
  <option value='cat'>Cats</option>
  <option value='dog'>Dogs</option>
  <option value='bird'>Birds</option>
</select> 
```

然后你的 jQuery

```
$('#selectFilter').change(function(){
    var trs = $('#animal tr'); 
    if(this.value == ''){  // if first option picked show all
         trs.show(); 
    }else{
       var $el = $('.'+this.value);  // element to show
       trs.not($el).hide(); // hide all but the elements to show
       $el.show();       // show elements
    }
}); 
```

[小提琴](http://jsfiddle.net/EmHMH/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-25T20:59:41.183

请在此处找到重构的代码“ [http://jsfiddle.net/5fZv7/3/](http://jsfiddle.net/5fZv7/3/) ”，代码片段如下..

html代码：

```
<select id="selectFilter">
       <option id="all">Select...</option>
       <option id="cats">Cats</option>
       <option id="dogs">Dogs</option>
       <option id="birds">Birds</option>
</select>
<table border="1">
  <tr class="all cats">
    <td>cats</td>
 </tr>
 <tr class="all cats">
    <td>cats 2</td>
 </tr>
 <tr class="all dogs">
    <td>dogs</td>
 </tr>
 <tr class="all birds">
    <td>birds</td>
 </tr> 
```

和javascript代码：

```
 $(document).load(function () {
   $('#selectFilter').change(function () {
     $(".all").hide();
     $("." + $(this).find(":selected").attr("id")).show();
   });
 }); 
```

希望这可以帮助您轻松有效地维护代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-25T20:37:42.400

您应该查看[DataTables](http://datatables.net/)，它内置了这种过滤功能（[API](http://datatables.net/api)中的 fnFilter ）

一开始可能有点学习曲线，但最终会更加灵活。

# java - Java 数学（运行时内存百分比）

> ID：14529890
> 
> 赞同：1
> 
> 时间：2013-01-25T20:30:26.437
> 
> 标签：java, math, runtime, percentage

我敢肯定我在这里犯了某种极其愚蠢的错误。我有这个代码：

```
private static String generateRAM()
{
    final long RAM_TOTAL = Runtime.getRuntime().totalMemory();
    final long RAM_FREE = Runtime.getRuntime().freeMemory();
    final long RAM_USED = RAM_TOTAL - RAM_FREE;
    final long RAM_TOTAL_MB = RAM_TOTAL / 8 / 1024;
    final long RAM_FREE_MB = RAM_FREE / 8 / 1024;
    final long RAM_USED_MB = RAM_USED / 8 / 1024;
    final double RAM_USED_PERCENTAGE = (RAM_USED / RAM_TOTAL) * 100;
    return RAM_TOTAL_MB + "MB TOTAL / " + RAM_FREE_MB + "MB FREE / " + RAM_USED_MB + "MB USED (" + RAM_USED_PERCENTAGE + "%)"; 
} 
```

这将返回：

```
15440MB TOTAL / 11809MB FREE / 3630MB USED (0.0%) 
```

这个百分比显然是不正确的。这是怎么发生的？据我所知，我所有的数学都是正确的。如果我将给定的数字打入计算器并自己找到百分比，我会得到 23.5，这是我的预期结果。

我确定我刚刚犯了一个可怕的错误，我会踢自己，有人可以启发我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T20:32:11.773

```
final double RAM_USED_PERCENTAGE = (RAM_USED / RAM_TOTAL) * 100; 
```

这是因为整数除法。将其中一种类型转换为加倍。

例子：

```
final double RAM_USED_PERCENTAGE = ((double)RAM_USED / RAM_TOTAL) * 100; 
```

根据[JLS 15.17.2。除法运算符 /](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.17.2)

> 整数除法向 0 舍入。也就是说，在二进制数值提升（第 5.6.2 节）之后为整数的操作数 n 和 d 产生的商是一个整数值 q，其幅值尽可能大，同时满足 |d · q|。≤ |n|。此外，当 |n| 时 q 为正 ≥ |d| 并且 n 和 d 具有相同的符号，但是当 |n| 时 q 为负 ≥ |d| n 和 d 符号相反。
> 
> 有一种特殊情况不满足此规则：如果被除数是其类型的最大可能量级的负整数，并且除数为-1，则发生整数溢出并且结果等于被除数。尽管溢出，在这种情况下不会抛出异常。另一方面，如果整数除法中除数的值为 0，则抛出 ArithmeticException。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T20:32:00.703

更改此行

```
final double RAM_USED_PERCENTAGE = (RAM_USED / RAM_TOTAL) * 100; 
```

到

```
final double RAM_USED_PERCENTAGE = ((RAM_USED * 1.0) / RAM_TOTAL) * 100; 
```

这是因为 Java 将结果解释为`long`/`long`除法，因此结果将是一个`long`值，即 5 / 10 => 0。通过对任何操作数应用 1.0 的因子，编译器将执行`double`/`long`操作，这将产生一个`double`值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T20:36:17.703

您有 2 个错误。`freeMemory()`并`totalMemory()`返回多个字节，因此要将其转换为 MB，您必须将其除以 1024（kB 和 MB）两次，然后除以 8。另外，您必须将 RAM_USED 转换为双精度数，以便将其计算为浮点数点操作：

```
private static String generateRAM()
{
    final long RAM_TOTAL = Runtime.getRuntime().totalMemory();
    final long RAM_FREE = Runtime.getRuntime().freeMemory();
    final long RAM_USED = RAM_TOTAL - RAM_FREE;
    final long RAM_TOTAL_MB = RAM_TOTAL / 1024 / 1024;
    final long RAM_FREE_MB = RAM_FREE  / 1024 / 1024;
    final long RAM_USED_MB = (double) RAM_USED / 1024 / 1024;
    final double RAM_USED_PERCENTAGE = ((double) RAM_USED / RAM_TOTAL) * 100;
    return RAM_TOTAL_MB + "MB TOTAL / " + RAM_FREE_MB + "MB FREE / " + RAM_USED_MB + "MB USED (" + RAM_USED_PERCENTAGE + "%)";
} 
```

返回：

```
10MB TOTAL / 9MB FREE / 0MB USED (2.47130735892926%) 
```

# php - 带有登录的肥皂界面

> ID：14529897
> 
> 赞同：0
> 
> 时间：2013-01-25T20:30:59.867
> 
> 标签：php, soap

我使用了 php.net 并按照文档在 php 中使用 SoapClient 创建 SOAP 请求，但我无法弄清楚如何在正确的位置使用标题正确格式化请求。当我的脚本运行时，这会导致“使用的验证类型无效”错误。

我需要形成的示例请求是：

```
<?xml version="1.0" encoding="utf-8"?>
<soap12:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap12="http://www.w3.org/2003/05/soap-envelope">
  <soap12:Header>
    <ServiceAuthHeader xmlns="http://voicepad.com/DataServices_Vivek/DataServices">
      <Username>string</Username>
      <Password>string</Password>
    </ServiceAuthHeader>
  </soap12:Header>
  <soap12:Body>
    <GetData xmlns="http://voicepad.com/DataServices_Vivek/DataServices">
      <sQueryType>string</sQueryType>
      <StartDate>string</StartDate>
      <EndDate>string</EndDate>
      <PhoneNumber>string</PhoneNumber>
    </GetData>
  </soap12:Body>
</soap12:Envelope> 
```

我最后一次尝试使用 php 发出请求是：

```
$client = new SoapClient("url", array( 'trace' => TRUE, 'exceptions'=>0 ));
$header = new SoapHeader( 'soap12', 'ServiceAuthHeader',  array('Username' => "$s_uname", 'Password' => "$s_pass"));
$client->__setSoapHeaders(array($header));

$result = $client->GetData(array('PhoneNumber'=>'##########'));

print_r($result); 
```

此代码生成的请求是这样的：

```
<soap-env:envelope xmlns:soap-env="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="http://voicepad.com/DataServices_Vivek/DataServices" xmlns:ns2="soap12">
    <soap-env:header>
        <ns2:serviceauthheader>
            <item>
                <key>
                    Username
                </key>
                <value>
                    *********
                </value>
            </item>
            <item>
                <key>
                    Password
                </key>
                <value>
                    *********
                </value>
            </item>
        </ns2:serviceauthheader>
    </soap-env:header>
    <soap-env:body>
        <ns1:getdata>
            <ns1:phonenumber>
                ###########
            </ns1:phonenumber>
        </ns1:getdata>
    </soap-env:body>
</soap-env:envelope> 
```

正如你所看到的，这个请求是错误的，但它也是我能够得到的关闭。这是我进行的唯一一次试验，我至少让用户名和密码显示在请求的标题中。我迷路了，请帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T11:23:53.887

如果您正在查看[有关 SoapHeader 的 PHP.net 文档的第一条评论](http://de3.php.net/manual/en/class.soapheader.php#10788)，那么该示例正是您所需要的，此外您还需要正确设置 XML 命名空间。

必须知道 XML 有几个规则可以将元素标记为属于它们，这对 XML 处理器无关紧要。

因此，这是针对您的问题的调整示例。我希望这个对你有用：

```
$client = new SoapClient(WSDL,array());

$auth = array(
     'UserName'=>'USERNAME',
     'Password'=>'PASSWORD',
     );
$header = new SoapHeader(
    'http://voicepad.com/DataServices_Vivek/DataServices',
    'ServiceAuthHeader',
    $auth,
    false
);
$client->__setSoapHeaders($header); 
```

# jquery - 滚动到特定 div 后停用 jQuery 棒导航

> ID：14529898
> 
> 赞同：0
> 
> 时间：2013-01-25T20:31:05.420
> 
> 标签：jquery, html, navigation, scroll

一旦达到 scrollTop，我有两个 div 实例从相对位置转换为固定位置。但是，我正在寻找一种在页脚 div 滚动到时关闭一个功能的方法。如果您查看此页面上的侧边栏，您可以更好地了解我想要实现的目标，[http://staging.alcoholrehab-florida.com/alcohol-rehab-programs.html](http://staging.alcoholrehab-florida.com/alcohol-rehab-programs.html)

一旦页面到达底部页脚 div，我需要将侧边栏设置回 position:relative 以便它不会覆盖页面的其余部分并能够与内容部分一起向上滚动。

下面是我正在使用的当前 jQuery 脚本。非常感谢任何帮助或建议！

```
 <script>
    $(function() {

// grab the initial top offset of the navigation 
var sticky_navigation_offset_top = $('#sticky_navigation').offset().top;

// our function that decides weather the navigation bar should have "fixed" css position or not.
var sticky_navigation = function(){
    var scroll_top = $(window).scrollTop(); // our current vertical position from the top

    // if we've scrolled more than the navigation, change its position to fixed to stick to top, otherwise change it back to relative
    if (scroll_top > ( sticky_navigation_offset_top - 120 )) { 
        $('#sticky_navigation').css({ 'position': 'fixed', 'top':120, 'background':'#f0f0f0' });
        $('.container').css({ 'position': 'relative', 'top':144 });
        $('.sidebar').css({ 'position': 'fixed', 'top':264 });
    } else {
        $('#sticky_navigation').css({ 'position': 'relative', 'top':0, 'background':'#fff' });
        $('.container').css({ 'position': 'relative', 'top':60 });
        $('.sidebar').css({ 'position': 'relative', 'top':0 });
    }  
};

// run our function on load
sticky_navigation();

// and run it again every time you scroll
$(window).scroll(function() {
     sticky_navigation();
});

    });
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T20:39:13.900

一种方法是测量窗口高度和文档高度。一旦页面向下滚动到大于（文档高度 - 窗口高度）的值，您就会知道您已经到达底部。然后只需添加页脚高度，如果 scrollTop 大于该高度，则无需将其切换回相对，因为这会将其跳转到页面顶部，只需给它一个负的顶部位置（相对）会让人觉得它被固定在页脚的顶部边缘之上。

很抱歉我没有代码示例，但希望上面的逻辑能帮助你弄清楚你什么时候在底部，以及如何偏移侧边栏以防止它接触页脚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T20:39:23.193

我一直将此插件用于粘性元素或仅检测用户何时滚动到某个元素：http: [//imakewebthings.com/jquery-waypoints/](http://imakewebthings.com/jquery-waypoints/)

# c# - 带有 SignalR 的 C# 文件中的会话变量（不是代码隐藏）

> ID：14529900
> 
> 赞同：0
> 
> 时间：2013-01-25T20:31:15.413
> 
> 标签：c#, asp.net, signalr

我正在尝试使用 SignalR，我很确定我是对的。我正在做的是尝试使用 SignalR 客户端-> 服务器调用每隔一段时间触发服务器端方法。在服务器端方法中，我有一个条件，即 Session["User"] 不能为空，在此方法触发时它不可能为空，因为一旦加载该控件，它就会从控件中触发。但是，当在这种情况下调用该方法时，我得到一个空异常。

这是 C# 服务器端代码：

```
[HubName("timer")]
public class Timer : Hub
{
    public void Time()
    {
        QueryFactory qFactory = new QueryFactory();

        if (HttpContext.Current.Session["User"] != null)
        {
            var ui = (UserInfo)HttpContext.Current.Session["User"];
            var userId = ui.UserID;
            var userName = ui.Name;
            var serverName = Dns.GetHostName();

            if (!userName.Equals(""))
            {
                var query = qFactory.GetQuery("P_UPDATE_CURRENT_USER");
                query["userid_in"] = Int32.Parse(userId);
                query["last_changed_in"] = DateTime.Now;
                query["server_name_in"] = serverName;
                query.Execute();
            }
        }
    }
} 
```

这是调用服务器端的客户端代码：

```
$(function () {
    var hub = $.connection.timer;
       if (<%=Session["User"]%> !== null) {
           alert(<%=Session["User"]%>);
           $.connection.hub.start().done(function() {
               setInterval(function() {
                   hub.server.time();
               }, <%=ConfigurationManager.AppSettings["timerInterval"]%>);
           });
       }
}); 
```

请注意，在客户端脚本中，我在调用服务器端方法之前发出警报，并且此警报返回会话用户值，因此我知道在此调用发生之前会话是有效的。任何想法为什么会发生此空错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T17:47:06.603

SignalR 现在对会话具有只读访问权限。如果您不想这样做，您可以访问客户端中的会话并使用查询字符串将信息传递到集线器。

客户端代码：

```
var uid = <%=Session["User"]%>;
$.connection.hub.qs = "uid=" + window.encodeURIComponent(uid) 
```

服务器端代码：

```
var userId = Context.QueryString["uid"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T20:49:21.517

您可以在代码中放置断点以查看异常来自何处（system.diagnostics.debugger.launch()）。仅通过查看您的代码，唯一突出的是 var query = qFactory.GetQuery("P_UPDATE_CURRENT_USER"); 查询可以为空吗？

# java - java中的继承私有字段

> ID：14529901
> 
> 赞同：8
> 
> 时间：2013-01-25T20:31:22.560
> 
> 标签：java

如果子类不能从超类继承私有成员，但它从超类继承公共方法，这些方法可以访问未继承的私有成员，如此处所述

> [http://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html](http://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html)

**由继承的子类成员修改的超类的私有成员存储在哪里？它们存在于哪里？**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-25T20:35:47.117

将私有成员变量视为存在于声明它们的类中。如果子类在其父类中调用更改成员变量的方法，请将该更改视为发生在父类中。这是在您的头脑中对其进行建模的有用方法，因为只有该父类才能具有读取或写入该变量值的代码。

子类必须向父类发出请求，然后对上面声明的成员变量做一些事情。

如果您使用子类中的代码覆盖父类中的方法，则该覆盖方法无法访问私有成员变量，即使父类中的覆盖方法可以访问。子类中的覆盖方法可以调用父类中的覆盖方法。

例如：

```
public class Parent {
    private int bar = 0;
    public void setBar(int value) {
        bar = value;
    }
}

public class Derived extends Parent {
    @override
    public void setBar(int value) {
        bar = value + 1; // NOT ALLOWED
        super.setBar(value + 1); // ALLOWED (same result)
    }
} 
```

**低级信息：**

不过，在较低级别上，我可能会创建一个 SubClass 的实例，它将为 SubClass 的所有实例变量和所有父类（包括 Object）分配一块内存空间。

方法本身的代码位于某些 ClassLoader 为包含每个方法的类分配的一些内存中。这是按类别分配的。因此，即使数据一起存储在实例中，各种子类和父类的代码也不会存储在一起。

访问规则只是不允许 SubClass 中的代码访问为父类或祖先类私有的实例变量分配的内存。

但是，在这种情况下，很少值得如此详细地考虑它。这就是我的经验。其他人可能会有不同的看法。

注意：有一些方法可以通过反射访问私有变量。

**能见度**

我可能需要一些帮助，因为我正在记忆中工作。

为成员变量分配了四个可见性级别。这些与用于类变量和方法的四个相同。

private - 这些变量只能被声明它们的同一类中的代码访问。（嗯......它们也可以被该类中的内部类访问。）

包 - 这些可以通过同一类中的代码和与该类相同的包中的任何类中的代码来访问。具有该代码的类可能在您的源文件或某个 jar 文件中，或者实际上是在类路径中的任何位置。（注意：没有关键字“包”。如果没有其他关键字表示可见性，则变量具有包级别的可见性。我喜欢将“包”这个词放在 /* */ 注释中。）

protected - 这些可以通过同一类中的代码和该类的任何子类中的代码以及与该类相同的包中的任何类中的代码来访问。

public - 这些可以通过任何其他类中的代码访问。

警告：还有一些你原本期望可见的代码却没有。这是因为 ClassLoader(s) 的工作方式。Java EE 有一个类加载器嵌套，您最终可能会导致一个类加载器加载的代码对另一个类加载器加载的代码不可见。您最终可以得到两个具有相同全名（包括包）的类。我认为所有这些都是“高级”主题，我必须阅读它来解释它。我确实想指出它会发生，并且可能会让您怀疑可见性。

```
public class MyClass {
    private int foo1 = 1;       // visible in this class only
    protected int foo2 = 2;     // visible here, in subclasses and in classes with same package
    int foo3 = 3;               // visible here and in classes with the same package
    public int foo4 = 4;        // visible here, there and everywhere

    /* package */ int foo5 = 5; // how I like to do 'package' variables with a comment
                                //  to show I intended to do it on purpose. If you read
                                //  my code you don't have to wonder if I forgot it.

    ...
} 
```

最后一点，实用的说明：从长远来看，将几乎所有成员变量设为私有非常有用。如果您需要将它们更改为更可见的内容，请这样做，或者可能只是创建具有所需可见性的 getter 和 setter 方法。一个优点是，如果我提供了一个 getter 而没有 setter，或者如果 getter 是公共的并且 setter 受到保护，我可以提供只读访问权限。我还可以创建一个可以设置但从不读取的只写变量。这适用于依赖注入，但您应该对此发表评论。也许你可以看到优势。缺点是您编写了更多代码行，但如果您愿意，其他 IDE 中的 Eclipse 会为您生成这些方法。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-25T20:32:29.173

子类的实例包含其超类的所有成员，但是不能从子类中访问*私有成员。*

# c# - 使用 ConfigurationManager 从 app.config 读取设置

> ID：14529902
> 
> 赞同：0
> 
> 时间：2013-01-25T20:31:23.583
> 
> 标签：c#, settings, config

我创建了一个设置类，在其中添加了一些参数，`app.config`如下所示。

我想访问我`connectionStrings`的`usersettings`班级内部，但我的尝试没有成功。

我试过例如：

```
ConfigurationManager.ConnectionStrings['Alerter.AlerterSettings.ConnectionString'] 
```

但它不起作用。

这是`app.config`：

```
<connectionStrings>
    <add name="Alerter.AlerterSettings.ConnectionString"     connectionString="DefaultEndpointsProtocol=https;sometext" />
</connectionStrings>
<userSettings>
    <Alerter.AlerterSettings>
        <setting name="TableName" serializeAs="String">
            <value>table5</value>
        </setting>
        <setting name="EmailUser" serializeAs="String">
            <value>user</value>
        </setting>
        <setting name="EmailPass" serializeAs="String">
            <value>pass</value>
        </setting>
    </Alerter.AlerterSettings>
</userSettings> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T20:33:17.343

不要使用`'`- 它是C# 中的*字符*分隔符，而不是字符串分隔符：

```
ConfigurationManager.ConnectionStrings["Alerter.AlerterSettings.ConnectionString"] 
```

您还需要访问`ConnectionString`返回值的属性：

```
string theConnectionString = 
            ConfigurationManager.ConnectionStrings["whatever"].ConnectionString; 
```

命名注意事项：

`Alerter.AlerterSettings.ConnectionString`相当冗长 - 我认为它不是很可读，并且配置选项不需要这 - 特别是在该`connectionStrings`部分中。`AlerterSettings`对我来说更合适。

# actionscript-3 - 将文件上传到 Flex Web 应用程序

> ID：14529904
> 
> 赞同：0
> 
> 时间：2013-01-25T20:31:32.000
> 
> 标签：actionscript-3, apache-flex, flash-builder

我正在尝试将文件上传到基于 Web 的 Flex 应用程序。但是，我所做的所有研究都只讨论了将文件从用户上传到 Web 服务器目标。

有没有办法将文件上传到应用程序进行处理？还是必须上传到服务器并在那里处理？（从服务器下载内容非常容易。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T20:39:59.553

唯一的方法（除了带有服务器上传/下载的变体）是使用[FileReference.load()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/FileReference.html)方法和[FileReference.data](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/FileReference.html#data)属性进行文件字节处理。[您应该在使用标准浏览对话框调用FileReference.browse()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/FileReference.html#browse%28%29)后调用此方法，其中使用将选择文件。

# actionscript-3 - 如何在 Actionscript 3 中使用多个文档类？

> ID：14529908
> 
> 赞同：1
> 
> 时间：2013-01-25T20:31:44.467
> 
> 标签：actionscript-3, flash

好的，我对 Actionscirpt 3 完全陌生。我现在正在尝试制作一款突破性游戏。我想使用四个文档类，background.as 用于绘制背景，player.as 用于创建桨，blocks.as 用于创建砖块，ball.as 用于球。但在我看来，您只能将一个 .as 文件设置为 .fla 文件。那么我怎样才能访问四个文档类呢？

我定义了一个名为 BreakoutGame.as 的新类，并尝试以某种方式将其他四个类“链接”到它，例如：

```
package  {

import flash.display.MovieClip;
import background;
import player;
public class BreakoutGame extends MovieClip {

    public function BreakoutGame()
    {
        // constructor code
    }
}

} 
```

好吧，什么也没发生。我想知道如何将其他课程放在一起。有谁知道该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T20:44:33.017

正如@Lee Burrows 提到的那样，使用只能使用一个文档类，但是您可以根据需要使用任意数量的自定义显示类，因此在库中为背景创建 MovieClip（并将您的 background.as 类文件与 if 关联）并将其放入手动的场景。对您需要的每个自定义类执行相同的操作。

您还可以为这些影片剪辑提供实例名称，并在您的文档类中创建相应的受保护字段，这样您就可以在您的文档类代码中管理这些剪辑（例如更改可见性）

# image - 边缘检测结合floodfill算法图像处理

> ID：14529912
> 
> 赞同：3
> 
> 时间：2013-01-25T20:31:56.767
> 
> 标签：image, html, image-processing, canvas

好的，我正在寻找一个用于图像处理的区域填充工具，我想结合边缘检测和例如洪水填充算法。我看过不同类型的算法（canny、laplace sobel 等），但不明白如何实现它们并调整它们以适应我的情况。

我已经能够使用来自 html5rocks 的示例：-

[http://www.html5rocks.com/en/tutorials/canvas/imagefilters/](http://www.html5rocks.com/en/tutorials/canvas/imagefilters/)

并可以将其应用于我的图像数据。我也可以将新颜色应用到我选择的图像中，但我不确定如何组合 2 以便我可以执行以下操作 -

鼠标点击图像内的区域并用新颜色替换旧颜色，在由边缘检测过滤器围绕鼠标点击和原始颜色定义的边缘定义的区域内（我打算尝试在给定容差内使用原始颜色 HSL 值）

就像智能区域填充一样有效。

它使用 HTML5 画布和 javascript。

希望这是有道理的...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T02:17:55.260

为了使用图像处理算法，我建议你从 matlab 开始。如果您真的想了解这是如何完成的。
这是一个免费的图像处理课程[https://class.coursera.org/images-2012-001/auth/welcome?type=logout&visiting=https%3A%2F%2Fclass.coursera.org%2Fimages-2012-001%2Fclass %2F索引](https://class.coursera.org/images-2012-001/auth/welcome?type=logout&visiting=https%3A%2F%2Fclass.coursera.org%2Fimages-2012-001%2Fclass%2Findex)

```
function [ output_args ] = SobelEdgeDetection( Image )

maskX = [-1 0 1 ; -2 0 2; -1 0 1];
maskY = [-1 -2 -1 ; 0 0 0 ; 1 2 1] ;

resX = conv2(Image, maskX);
resY = conv2(Image, maskY);

magnitude = sqrt(resX.^2 + resY.^2);
direction = atan(resY/resX);
thresh = magnitude < 101;
magnitude(thresh) = 0;
showImage(magnitude);

end 
```

这是我写的sobel边缘检测函数的一个例子。您需要了解什么是卷积，以及在哪里使用它。

如果你只是想使用它。我建议您探索[http://www.pixastic.com/lib/docs/actions/edges/](http://www.pixastic.com/lib/docs/actions/edges/)和其他图像处理。对于每个图像，您都需要学习如何设置正确的值。

# spring - Get Unable to get an object lock on "null".; org.apache.openjpa.persistence.OptimisticLockException：

> ID：14529920
> 
> 赞同：1
> 
> 时间：2013-01-25T20:32:26.847
> 
> 标签：spring, jakarta-ee, jpa, ejb, openjpa

这是一个带有 Roo 的 Spring 应用程序，以及由一个简单的 finder 函数引发的异常，例如：

```
 TransactionRate.findAllTransactionRate(TransactionRate.java:1) 
```

该异常仅发生在`TransactionRate`实体上，而其他 20 个实体则不发生。我很确定他们没有其他 entityManager 正在读取/编辑实体，因此不应锁定表。persistent.xml 看起来很清晰。

我曾经遇到过类似的问题，但只记得解决方案是更改配置中的其他内容（如 persistence.xml），真的无法回忆细节。

请分享任何想法。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-06-18T10:29:13.447

我刚刚收到此异常，因为我在@Table 中有错字，因此引用了一个不存在的 SQL 表。我发现了这一点，因为在堆栈的更深处，我收到消息“由：org.apache.openjpa.lib.jdbc.ReportingSQLException：ORA-00942：表或视图不存在引起”。

希望这个答案能帮助到这个页面寻找答案的人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T15:08:17.210

事实证明，实体中添加了三个新字段，但未在数据库模式中更新，因此 Openjpa 例外，将此答案留作记录。

# c# - Microsoft Visual Studio 已停止工作

> ID：14529923
> 
> 赞同：-4
> 
> 时间：2013-01-25T20:32:31.773
> 
> 标签：c#, winforms, visual-studio, exception, visual-studio-2012

这种情况一次又一次地发生。我只是坐在这里没有运行任何代码，它发生了。我查看事件查看器，看起来它试图从我的一个类中运行代码。

```
Application: devenv.exe
Framework Version: v4.0.30319
 Description: The process was terminated due to an unhandled exception.
 Exception Info: System.ArgumentNullException
 Stack:
    at System.Data.Linq.DataContext..ctor(System.String, System.Data.Linq.Mapping.MappingSource)
    at TurnbackTools.DataClasses1DataContext..ctor(System.String)
    at TurnbackChart.TurnbackChart.ZDraw()
    at TurnbackChart.TurnbackChart.TimerTick(System.Object, System.EventArgs)
    at System.Windows.Forms.Timer.OnTick(System.EventArgs)
    at System.Windows.Forms.Timer+TimerNativeWindow.WndProc(System.Windows.Forms.Message ByRef)
    at System.Windows.Forms.NativeWindow.DebuggableCallback(IntPtr, Int32, IntPtr, IntPtr) 
```

这里发生了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T20:35:12.247

“Microsoft Visual Studio 已停止工作”不是我看到的错误。我看到的那个说在不允许时指定了一个空参数（`System.ArgumentNullException`）。

你在那里有整个调用堆栈。而且，在调试器中，您可以单击它们以找到参数为空的行。

一旦您习惯了使用调试器，这实际上是非常简单的隔离。当然，解决它可能更复杂，但您至少应该从缩小导致错误的范围开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-31T16:56:22.763

我已经想通了。我的代码正在创建一个计时器。然后，当应用程序停止时，它没有处理计时器。然后在应用程序停止后，即我回去编写代码，计时器事件不断触发。当应用程序未运行时，事件正在发生并引发异常

# android - Android如何为不同的标签添加许多菜单

> ID：14529926
> 
> 赞同：1
> 
> 时间：2013-01-25T20:32:37.437
> 
> 标签：android, android-tabhost, android-tabs, android-tabactivity

我有很多这样的标签：

```
TabHost th;
TabSpec spec;
th = (TabHost) findViewById(R.id.tabhost_template_two_tabs);
th.setup();
// all tab
spec = th.newTabSpec("All");
spec.setIndicator("All");
spec.setContent(R.id.tab_template_two_tabs_all);
th.addTab(spec);
// favorite tab
spec = th.newTabSpec("Favorite");
spec.setIndicator("Favorite");
spec.setContent(R.id.tab_template_two_tabs_favorite);
th.addTab(spec); 
```

对于每个标签，我想添加一个菜单，请问如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T20:52:16.860

`Tab`中的每个`TabHost`都有一个从 0 开始的数字，因此您必须知道您现在在哪个选项卡中使用`int currentTab = th.getCurrentTab();`，然后使用清除上一个菜单，`menu.clear()`然后使用添加新菜单`inflater.inflater(menuID, menu)`

```
@Override
    public boolean onPrepareOptionsMenu(Menu menu) {
        // TODO Auto-generated method stub
        MenuInflater inflater = getMenuInflater();
        int currentTab = th.getCurrentTab();
        Toast.makeText(getApplicationContext(), currentTab+"", Toast.LENGTH_SHORT);
        if (currentTab == 0){
            menu.clear();
            inflater.inflate(R.menu.first, menu);}
        else{
            menu.clear();
            inflater.inflate(R.menu.second, menu);}
        return super.onPrepareOptionsMenu(menu);
    } 
```

# 笔记：

`onCreateOptionsMenu`在你的情况下不会帮助你

# r - 从两个数值向量生成逻辑向量 - R

> ID：14529927
> 
> 赞同：1
> 
> 时间：2013-01-25T20:32:37.200
> 
> 标签：r, vector, logical-operators

我对 R 非常陌生，并且很难尝试从两个具有相同（任意）大小的数字向量 a 和 b 生成逻辑向量 c，其中 c 包含 TRUE 或 FALSE，具体取决于向量 b 的相应元素是否是一个。

前任。

```
 a<-c(2,3)
    b<-c(6,14) 
```

结果 c 为真，假

这是我到目前为止所得到的：

```
 a<-c(2:10)
    b<-c(6:14)
    c<-(if(b%%a) as.integer(TRUE)) 
```

我意识到该`if()`函数不是矢量化的，只会评估第一个元素，但是，我完全感到困惑，并且无法看到任何其他成功的构造。任何见解、链接或指导都是最有帮助的。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T20:36:29.980

只需这样做：

```
c <- ( b%%a == 0 ) 
```

（括号是可选的，只是为了清楚起见。）

# data-visualization - 如何在 matplotlib 中绘制一条线，以便绘制线的边缘（而不是中心）跟随绘制的数据？

> ID：14529928
> 
> 赞同：1
> 
> 时间：2013-01-25T19:14:29.597
> 
> 标签：data-visualization, python, matplotlib

我正在研究一个数字，以在高速公路地图上显示交通水平。这个想法是，对于每个高速公路路段，我会绘制两条线 - 一条用于方向。每条线的粗细将对应于该方向的交通量。我需要绘制线条，以便绘制线的左边缘（相对于行驶方向）遵循高速公路路段的形状。我想以数据坐标指定形状，但我想以点为单位指定线的粗细。

我的数据是这样的：

```
[[((5,10),(-7,2),(8,9)),(210,320)],
 [((8,4),(9,1),(8,1),(11,4)),(2000,1900)],
 [((12,14),(17,14)),(550,650)]] 
```

其中，例如，((5,10),(-7,2),(8,9)) 是一系列 x,y 值，表示高速公路路段的形状，(210,320) 是交通量分别为正向和反向

看起来很重要：结果应该很漂亮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T16:48:12.567

我想出了一个使用[matplotlib.transforms.Transform](http://matplotlib.org/devel/transformations.html#matplotlib.transforms.Transform)和[shapely.geometry.LineString.parallel_offset](http://toblerity.github.com/shapely/manual.html#object.parallel_offset)的解决方案。

请注意，shapely 的`parallel_offset`方法有时会返回 a `MultiLineString`，此代码未处理。我已经改变了第二个形状，所以它不会交叉自己以避免这个问题。我认为这个问题在我的应用程序中很少发生。

另一个注意事项：matplotlib.transforms.Transform 的文档似乎暗示该`transform`方法返回的数组必须与作为参数传递的数组的形状相同，但在该方法中添加额外的点`transform`似乎在这里起作用。

```
#matplotlib version 1.1.0
#shapely version 1.2.14
#Python 2.7.3

import matplotlib.pyplot as plt
import shapely.geometry
import numpy
import matplotlib.transforms

def get_my_transform(offset_points, fig):
    offset_inches = offset_points / 72.0
    offset_dots = offset_inches * fig.dpi

    class my_transform(matplotlib.transforms.Transform):        

        input_dims = 2
        output_dims = 2
        is_separable = False
        has_inverse = False

        def transform(self, values):
            l = shapely.geometry.LineString(values)
            l = l.parallel_offset(offset_dots,'right')
            return numpy.array(l.xy).T

    return my_transform()

def plot_to_right(ax, x,y,linewidth, **args):

    t = ax.transData + get_my_transform(linewidth/2.0,ax.figure)

    ax.plot(x,y, transform = t,
            linewidth = linewidth,
            solid_capstyle = 'butt',
            **args)

data = [[((5,10),(-7,2),(8,9)),(210,320)],
 [((8,4),(9,1),(8,1),(1,4)),(2000,1900)],
 [((12,14),(17,16)),(550,650)]]

fig = plt.figure()
ax = fig.add_subplot(111)

for shape, volumes in data:

    x,y = zip(*shape)
    plot_to_right(ax, x,y, volumes[0]/100., c = 'blue')
    plot_to_right(ax, x[-1::-1],y[-1::-1], volumes[1]/100., c = 'green')
    ax.plot(x,y, c = 'grey', linewidth = 1)

plt.show()
plt.close() 
```

# android - 文件关联

> ID：14529932
> 
> 赞同：2
> 
> 时间：2013-01-25T20:33:16.483
> 
> 标签：android, intentfilter

我正在尝试为我的应用程序创建文件关联。我在清单中的活动中添加了以下意图过滤器：

```
 <intent-filter>
                <action android:name="android.intent.action.VIEW" />
                <category android:name="android.intent.category.DEFAULT" />
                <category android:name="android.intent.category.BROWSABLE" />
                <data android:mimeType="application/zip" />
                <data android:mimeType="application/x-compressed" />
                <data android:mimeType="application/x-zip-compressed" />
                <data android:mimeType="application/x-zip" />
                <data android:mimeType="application/octet-stream" />              
                <data android:pathPattern=".*\\.zip" />
            </intent-filter> 
```

现在，当我使用默认的 android 浏览器并下载一个 zip 文件时，完成后我可以在通知栏中点击下载的文件，它会将我的应用程序列为打开它的 3 个选项之一。不幸的是，在您单击通知栏中的下载项目后，它就会从那里消失。所以我打开“我的文件”应用程序并转到下载文件夹。但是，选择ZIP文件时，它说没有与文件类型关联的应用程序。

这是 Android（或三星）附带的“我的文件”应用程序中的错误，还是我需要添加替代意图过滤器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-18T17:26:10.700

尝试添加以下过滤器：

```
 <intent-filter>
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.DEFAULT" />
            <data android:scheme="content"  android:host="*" android:pathPattern=".*\\.zip" android:mimeType="*/*"  />
            <data android:scheme="file"  android:host="*" android:pathPattern=".*\\.zip" android:mimeType="*/*"  />
        </intent-filter> 
```

该方案可能是内容或文件。您可以通过在调试器中查找 ActivityManager 日志行来查找。

# cordova - 用于 Phonegap 和 JQMobile 的数据库

> ID：14529935
> 
> 赞同：0
> 
> 时间：2013-01-25T20:33:20.553
> 
> 标签：cordova, jquery-mobile, phonegap-build

我正在使用 Phonegap 和 JQuery Mobile 开发基于 QA 的应用程序。我正在尝试创建一个模板页面，该页面将从数据库中提取随机问题，并以随机顺序提供多项选择答案。

但是，我对用于实现此功能的数据库感到困惑。我考虑过使用 SQLite，但这意味着在我的代码库中编写并保留大量代码行，这些代码行会在应用程序加载时被初始化和执行。我想避免这种情况。

此外，我查看了 IndexedDB，但它看起来更像是在我将执行代码行以在其中创建数据库和记录的同一行上。

这是我第一次创建应用程序。我来自编程背景，我们总是有一个为应用程序准备好的数据库，除了连接之外不需要每次都初始化。我正在考虑类似的解决方案......

对此有任何想法...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T21:34:03.197

您最好将问题数组和响应选项存储在[localStorage](http://en.wikipedia.org/wiki/Web_storage#localStorage)中。这非常容易 - 您的数据会在应用程序重新启动时持续存在，并且不会违反 Apple 关于数据存储/备份的 TOS。

# jquery - 在 .NET MVC4 中使用 Ajax 进行部分视图加载

> ID：14529936
> 
> 赞同：16
> 
> 时间：2013-01-25T20:33:21.463
> 
> 标签：jquery, asp.net, ajax, asp.net-mvc, asp.net-mvc-4

我正在尝试关注[这里](https://stackoverflow.com/questions/12848219/how-to-call-partial-views-ajax-based-directly-on-index-page-of-a-view-mvc-wi)的帖子，这很可能是错误的，以了解更多关于 MVC 中的部分视图加载的信息。我知道 MVC 的基础知识，但想做更多我在开始使用 MVC 之前做过的 ajax 工作。

**目标是让部分视图加载到 div 内。**它只是将部分视图加载为整个页面，而不是在 Div 内部。

代码如下：

控制器：

```
namespace LDP.WebUI.Controllers
{
    public class TestController : Controller
    {
        //
        // GET: /Test/

        public ActionResult Index()
        {
            return View();
        }
        public PartialViewResult Page1()
        {
            return PartialView("Page1");
        }
        public PartialViewResult Page2()
        {
            return PartialView("Page2");
        }
    }
} 
```

主视图（索引）：（我也试过没有井号的“mainDiv”，不确定哪个是正确的）

```
<script src="@Url.Content("~/Scripts/libs/jquery-1.8.2.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/libs/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $('#hideme').click(function () {
            $(this).hide();
        });
    });
</script>
<div>
@Ajax.ActionLink("Parial Page1", "Page1", new AjaxOptions { InsertionMode = InsertionMode.Replace, UpdateTargetId = "mainDiv"})
@Ajax.ActionLink("Parial Page2", "Page2", new AjaxOptions { InsertionMode = InsertionMode.Replace, UpdateTargetId = "mainDiv"})
<div id ='mainDiv'>

</div>
<button id ="hideme">Hide Me</button>
</div> 
```

局部视图 1 (Page1.cshtml)

```
@{
    ViewBag.Title = "Page1";
}

<h2>Page1</h2> 
```

局部视图 2 (Page2.cshtml)

```
@{
    ViewBag.Title = "Page2";
}

<h2>Page2</h2> 
```

更新：我创建了一个全新的 MVC 4 项目。默认情况下，它带有 Jquery 1.7.1 和 microsoft 的 unobtrusive-ajax 库。它仍然在新页面中加载部分视图......

更新：不确定这是否有帮助，但以下确实达到了我想要的结果......但仍然没有解决为什么这个解决方案不起作用的问题

```
<button>load about</button>
<script type="text/javascript">
    $("button").click(function () {
        $("#mainDiv").load("Test/Page2");
    });

</script>
    enter code here 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-25T21:12:00.123

1.  投入`#`_`UpdateTargetId = "#mainDiv"`
2.  确保您`jquery.unobtrusive-ajax.min.js`的页面上引用了脚本。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-03T12:05:14.460

我将您的代码复制到一个全新的 MVC4 项目中，它工作正常。

查看解决方案的屏幕截图：

![带有 Ajax.ActionLink 的全新 MVC4 项目](../Images/cecc8435368bb165efc0058dbc672f8b.png)

希望这会给您提示可能出现的问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-25T21:01:48.160

我通常使用 JQuery 加载这样的部分

```
$( document ).ready(function() {

  $("#lnkPage1").click(function( event ) {

    $('#mainDiv').load('Test/Pag1');

  });

  $("#lnkPage2").click(function( event ) {

    $('#mainDiv').load('Test/Pag2');

  });

}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-25T23:30:02.900

```
@using (Ajax.BeginForm("AjaxViewCall", "Home", new AjaxOptions { UpdateTargetId = "result" }))   
{
    <p>
        <input type="submit" value="Ajax Form Action" />
    </p>
}

<div id="result></div> 
```

在按钮上单击它应该调用返回 PartialView 的 Action。您不需要在 Ajax.BeginForm 调用中使用“#”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-30T15:42:29.920

我对原始示例的唯一问题是脚本 src 路径中的 \lib\。默认 MVC 4 Web 应用程序会将 js 文件放在“Scripts”中，而不是“Scripts\Lib”中。您的屏幕截图示例是正确的。

```
<script src="@Url.Content("~/Scripts/jquery-1.8.2.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" 
```

同样在原始示例中 - 放入 ViewBag.Title 将导致它不起作用：

```
@{
    ViewBag.Title = "Some Title";
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-22T15:05:30.927

我遇到了同样的问题；将部分视图作为整个页面而不是在定义的 div 中加载。

我错误地认为我`_Layout.cshtml`包含了该`jquery.unobtrusive-ajax.js`文件，因为我不明白 Bundles thingy(?) 在做什么。我以为它是由Bundles添加的。

在我`_Layout.cshtml`看来，它定义`@RenderSection("scripts", required: false)` 了英语中的哪个是；在视图中包含一个名为@scripts 的部分是可选的。因此，如果您不包含它（@section 脚本），则不会引发错误，但症状是如果您不包含它，Ajax 只会在新页面中呈现。

修复它：将以下内容放在您的视图中（我把它放在下面`...ViewBag.Title; }`）

```
@section scripts{
    <script src="~/Scripts/jquery.unobtrusive-ajax.js"></script>
} 
```

抱歉，如果我的解释有点初级，我对此有点陌生。希望这对某人有所帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-11-10T20:33:14.930

加载 json 数据或表格部分视图。不是全格式视图。

```
success:function(data){
    alert(data);
    debugger;
    ('#div_id').data(data);
} 
```

这里，返回的数据是json数据或类似的数据

数据

. 使用警报检查数据。

# jquery - jQuery('body') 值和媒体查询触发器之间的区别

> ID：14529940
> 
> 赞同：1
> 
> 时间：2013-01-25T20:33:31.860
> 
> 标签：jquery, responsive-design, media-queries, viewport

为了帮助响应式设计，我在 position:absolute 中有一个名为 #dimensions 的 DIV，它可以随时为我提供浏览器窗口的宽度：

```
jQuery("#dimensions").html(jQuery('body').width());
    jQuery(window).resize(function() {
    jQuery("#dimensions").html(jQuery('body').width());
}); 
```

问题是，jQuery('body') 所说的（例如，960px）和我的媒体查询的实际浏览器宽度（例如，“@media screen and (max-width: 960px )") 实际执行。

为什么会这样以及如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T20:39:57.680

这听起来像滚动条。

查看：

*   [http://matanich.com/test/viewport-width/](http://matanich.com/test/viewport-width/)
*   [https://github.com/tysonmatanich/viewportSize](https://github.com/tysonmatanich/viewportSize)

# javascript - javascript XAML 闪烁背景

> ID：14529948
> 
> 赞同：1
> 
> 时间：2013-01-25T20:34:17.563
> 
> 标签：javascript, silverlight, xaml, rss

我正在尝试修改别人写的东西。我对 xaml 的了解并不多，但是我的搜索和尝试将我发现的内容结合起来以尝试完成此任务使我得到了您将在下面看到的内容。

我们有一个网页使用 Silverlight 来显示几个统计数据。

我正在尝试创建一个警报，一旦我们更改 rss 提要中的值，该警报就会闪烁。

我已经得到它，所以背景颜色会改变，但不会闪烁。当我尝试取消评论我对 xaml 的添加时，页面的其余部分会加载，但它给了我这部分的错误。任何帮助都会很棒，并能教给我一些我确信的东西。

```
 function ContentALRT(comp, sender) {
    var rss = GetRSS(comp.Sources[0]);  //GETRSS() IS IN AJAX.JS
    var xaml = '<Canvas><TextBlock Text="error" /></Canvas>';
    if (rss.error == "") {
        var cGradient = '<Rectangle.Fill><LinearGradientBrush StartPoint="0.5,0" EndPoint="0.5,1"><GradientStop Color="' + theme.Color.ButtonGradient1 + '" Offset="0.0" /><GradientStop Color="' + theme.Color.ButtonGradient2 + '" Offset="1.0" /></LinearGradientBrush></Rectangle.Fill>';
//  Commented out for future use to preserve gradient   var alertGradient1 = '<Rectangle.Fill><LinearGradientBrush StartPoint="0.5,0" EndPoint="0.5,1"><GradientStop Color="#C2F0C2" Offset="0.0" /><GradientStop Color="#248F24" Offset="1.0" /></LinearGradientBrush></Rectangle.Fill>';
//  Commented out for future use to preserve gradient   var alertGradient2 = '<Rectangle.Fill><LinearGradientBrush StartPoint="0.5,0" EndPoint="0.5,1"><GradientStop Color="' + theme.Color.AlertMidGradient + '" Offset="0.0" /><GradientStop Color="' + theme.Color.AlertDarkGradient + '" Offset="1.0" /></LinearGradientBrush></Rectangle.Fill>';
//  Commented out for future use to preserve gradient   var alertGradient3 = '<Rectangle.Fill><LinearGradientBrush StartPoint="0.5,0" EndPoint="0.5,1"><GradientStop Color="#FFB2B2" Offset="0.0" /><GradientStop Color="#800000" Offset="1.0" /></LinearGradientBrush></Rectangle.Fill>';
//  These gradients are to be used for "Flat" colors
        var alertGradient1 = '<Rectangle.Fill><LinearGradientBrush StartPoint="0.5,0" EndPoint="0.5,1"><GradientStop Color="#006600" Offset="0.0" /><GradientStop Color="#006600" Offset="1.0" /></LinearGradientBrush></Rectangle.Fill>';
        var alertGradient2 = '<Rectangle.Fill><LinearGradientBrush StartPoint="0.5,0" EndPoint="0.5,1"><GradientStop Color="#E68A00" Offset="0.0" /><GradientStop Color="#E68A00" Offset="1.0" /></LinearGradientBrush></Rectangle.Fill>';
        var alertGradient3 = '<Rectangle.Fill><LinearGradientBrush StartPoint="0.5,0" EndPoint="0.5,1"><GradientStop Color="#B22400" Offset="0.0" /><GradientStop Color="#B22400" Offset="1.0" /></LinearGradientBrush></Rectangle.Fill>';
        var glassGradient = '<Rectangle.Fill><LinearGradientBrush StartPoint="0.5,0" EndPoint="0.5,1"><GradientStop Color="#9FFF" Offset="0.0" /><GradientStop Color="#2FFF" Offset="1.0" /></LinearGradientBrush></Rectangle.Fill>';
        var iSlot = sender.findName("Slot" + comp.Slot);
        var iWidth = iSlot.Width - iSlot.Width / 5;
        //var FlashColor1 = "#B22400";
        //var FlashColor2 = theme.Color.ButtonGradient1;
        //comp.Update = "999999";

        var aData = rss.items[0].description.split(":");
        var gradient = cGradient;
        var font_color = theme.Color.BodyText;
        var title = rss.items[0].title;
        var alert = parseInt(aData[1]);
        //window.alert(aData[1]);

        if (alert > 0) {
            gradient = alertGradient3;
            }
        else{
            gradient = alertGradient1;
            }
//          
//          if (parseInt(aData[1].substring(13,14)) > 0) {
//              //IF CALL HAS BEEN ON HOLD LONGER THAN 0 SECONDS...
//          
//              GlobalAlert = true;                     
//          }

        xaml = '<Canvas>';
        xaml += '<Rectangle Height="' + iSlot.Height + '" Width="' + iSlot.Width + '" RadiusX="8" RadiusY="8" Stroke="' + theme.Color.ButtonBorder + '" StrokeThickness="' + theme.Size.BorderSize + '" >';
        xaml += gradient + '</Rectangle>';
        if (options.glass == "true") {
            xaml += '<Rectangle Canvas.Top="1" Canvas.Left="1" Height="' + (iSlot.Height / 2) + '" Width="' + (iSlot.Width - 2) + '" RadiusX="5" RadiusY="5" >';
            xaml += glassGradient + '</Rectangle>';
        }
        xaml += '<Canvas Canvas.Top="' + theme.Size.InnerMargin + '" Canvas.Left="' + theme.Size.InnerMargin + '" Width="' + (iSlot.Width - (theme.Size.InnerMargin * 2)) + '" >';
        xaml += '<TextBlock Text="[' + title + ' Queue]" Foreground="' + font_color + '" FontFamily="' + theme.Style.Font + '" FontSize="' + theme.Size.BodyText + '" Loaded="CenterTextHorizontal" />';
        xaml += '<Canvas Canvas.Top="' + (theme.Size.BodyText * 1.6) + '" Width="' + (iSlot.Width - (theme.Size.InnerMargin * 2)) + '" >';
        for (var j = 0; j < aData.length; j++) {
            xaml += '<Canvas Canvas.Top="' + (theme.Size.TitleText * j) + '" Width="' + (iSlot.Width - (theme.Size.InnerMargin * 2)) + '" >';
            xaml += '<TextBlock Text="' + aData[j] + '" Foreground="' + font_color + '" FontFamily="' + theme.Style.Font + '" FontSize="' + theme.Size.TitleText + '" FontWeight="Bold" Loaded="CenterTextHorizontal" />';
            xaml += '</Canvas>';
        }

//      xaml += '<BeginStoryboard><Storyboard>';
//      xaml += '<ColorAnimation Storyboard.TargetProperty=("Rectangle") Duration="0:0:0.2" From="' + cGradient + '" To="' + gradient + '" RepeatBehavior="3x" AutoReverse="True"/>';
//      xaml += '</Storyboard></BeginStoryboard>';
        xaml += '</Canvas></Canvas></Canvas>';
    }
    return xaml; 
```

}

最后一个注释掉的部分是我添加的。我删除了有关 xaml 不正确的错误的评论。

# objective-c - 扩展 NSTextView 还是实现 NSTextInputClient？

> ID：14529951
> 
> 赞同：0
> 
> 时间：2013-01-25T20:34:31.307
> 
> 标签：objective-c, macos, cocoa, nstextview

我正在尝试实现具有某些特征的文本编辑组件，我想知道最好的路线是什么，扩展 NSTextView 或实现 NSTextInputClient。

文本组件显然应该支持 UTF-8 和属性文本。当用户将鼠标悬停在某些单词上时，我还想显示信息气球。

从 NSTextInputClient 实现一个新的文本视图有多难？使用普通的 NSTextView 显示自定义视图有多容易？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T20:43:54.307

由于您想更改文本的呈现方式，而不是它的存储方式，因此子类化 NSTextView（呈现方式）。

# ios - 捕获照片后收到内存警告和崩溃 UIImagePickerController

> ID：14529955
> 
> 赞同：1
> 
> 时间：2013-01-25T20:34:44.743
> 
> 标签：ios, ios5, ios6

我为 Ios5-6 编写了一个小型单视图应用程序，它允许用户捕获照片图像，然后将所述图像设置为图像视图。ImagePicker 视图打开得很好，但是当我单击捕获应用程序关闭时，我收到以下控制台输出。（该应用程序在 ios 模拟器 6 中运行时按预期工作。在 iphone4s 设备上出现故障）

2013-01-25 15:21:11.129 LearningPhotos[10914:707] 找不到映射图像 Silver_ISXSilent.png 2013-01-25 15:21:11.250 LearningPhotos[10914:707] 找不到映射图像 ColorOnGrayShadow_ISXSilent.png 2013- 01-25 15:21:16.678 LearningPhotos[10914:707] 收到内存警告。

视图控制器接口：

```
 //
//  ViewController.h
//  LearningPhotos
//
//  Created by Jared Rainey on 1/24/13.
//  Copyright (c) 2013 Volatile App Group. All rights reserved.
//

#import <UIKit/UIKit.h>

@interface ViewController : UIViewController<UINavigationControllerDelegate, UIImagePickerControllerDelegate>{

    UIImagePickerController *imagePicker;
    UIImage *image;
}

@property (strong, nonatomic) IBOutlet UILabel *imageLabel;
@property (strong, nonatomic) IBOutlet UIImageView *imageView;

- (IBAction)imageButton:(id)sender;

@end 
```

视图控制器实现：

```
 //
//  ViewController.m
//  LearningPhotos
//
//  Created by Jared Rainey on 1/24/13.
//  Copyright (c) 2013 Volatile App Group. All rights reserved.
//

#import "ViewController.h"
#import "AFHTTPClient.h"

@implementation ViewController

@synthesize imageView,imageLabel;

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    imagePicker = [[UIImagePickerController alloc]init];

    //If Camera source type available use it otherwise photo library
    if([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera]){
        [imagePicker setSourceType:UIImagePickerControllerSourceTypeCamera];
        imagePicker.mediaTypes = [UIImagePickerController availableMediaTypesForSourceType:UIImagePickerControllerSourceTypeCamera];
    }else{
        [imagePicker setSourceType:UIImagePickerControllerSourceTypePhotoLibrary];
    }

    //allow no image editing
    [imagePicker setAllowsEditing:NO];

    //set imagepickercontroller delegate to self
    [imagePicker setDelegate:self];     
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (IBAction)imageButton:(id)sender {
    //Image Button has been pressed
    //load image picker view dependent on UIImagePickerController source type
    [self presentModalViewController:imagePicker animated:YES];
}

-(void) imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info{
    image = (UIImage *)[info objectForKey:UIImagePickerControllerOriginalImage];
    imageView.image = image;
    [picker dismissModalViewControllerAnimated:YES];

}

-(void) imagePickerControllerDidCancel:(UIImagePickerController *)picker{
    [picker dismissModalViewControllerAnimated:YES];
}

@end 
```

设备日志：

```
Incident Identifier: 6084670F-7944-4D19-8953-A9582801A161
CrashReporter Key:   e3fd67afdfbdcc8a506fa6b75e4c965b76c10346
Hardware Model:      iPhone4,1
OS Version:          iPhone OS 5.1.1 (9B206)
Kernel Version:      Darwin Kernel Version 11.0.0: Sun Apr  8 21:51:47 PDT 2012; root:xnu-1878.11.10~1/RELEASE_ARM_S5L8940X
Date:                2013-01-25 16:42:36 -0500
Time since snapshot: 43 ms

Free pages:        812
Active pages:      3403
Inactive pages:    1987
Throttled pages:   97220
Purgeable pages:   127
Wired pages:       25283
Largest process:   SpringBoard

Processes
         Name                 UUID                    Count resident pages
  LearningPhotos <4965639c91ae38ae9d40911923ef0502>   10251 (jettisoned) (active)
     debugserver <2408bf4540f63c55b656243d522df7b2>     163
        installd <0f9e14173c503a8089f7f8cd0329a1a0>     548
      MobileMail <eed7992f4c1d3050a7fb5d04f1534030>    1386 (jettisoned)
     MobilePhone <8f3f3e982d9235acbff1e33881b0eb13>    1123 (jettisoned)
            ptpd <62bc5573db7a352ab68409e87dc9abb9>     494
springboardservi <b74f5f58317031e9aef7e95744c816ca>     307
notification_pro <373a488638c436b48ef0801b212593c4>     106
notification_pro <373a488638c436b48ef0801b212593c4>     110
             atc <1e5f2a595709376b97f7f0fa29368ef1>     652
notification_pro <373a488638c436b48ef0801b212593c4>      95
notification_pro <373a488638c436b48ef0801b212593c4>     102
    syslog_relay <b07876a121a432d39d89daf531e8f2bd>      74
            afcd <c3cc9d594b523fd1902fb69add11c25d>     126
     dataaccessd <473ff40f3bfd3f71b5e3b4335b2011ee>     903
    mediaserverd <f03b746f09293fd39a6079c135e7ed00>    1146
      aosnotifyd <8cf4ef51f0c635dc920be1d4ad81b322>     419
            iapd <0a747292a113307abb17216274976be5>     564
   absinthed.N94 <2e1b2b6827f73747a686445a7a4d2db9>     115
        SCHelper <9b0b21c547c23b8a876271fee80f037a>     139
        networkd <80ba40030462385085b5b7e47601d48d>     165
            flux <204b55baaf0b372789e1a4da2b1c73e3>     389
        BTServer <31e82dfa7ccd364fb8fcc650f6194790>     576
      aggregated <a12fa71e6997362c83e0c23d8b4eb5b7>     413
            apsd <e7a29f2034083510b5439c0fb5de7ef1>     312
   fairplayd.N94 <e69a54203b7b3293ad3b0f8d83fa3ce1>     161
       fseventsd <914b28fa8f8a362fabcc47294380c81c>     179
         imagent <9c3a4f75d1303349a53fc6555ea25cd7>     866
   mDNSResponder <86ccd4633a6c3c7caf44f51ce4aca96d>     237
    mediaremoted <327f00bfc10b3820b4a74b9666b0c758>     290
           wifid <3001cd0a61fe357d95f170247e5458f5>     365
     sbsettingsd <e9a2c6b3c8a722b2bae7541bb247b81d>     334
    springflashd <3927dd5f9d5d3e3785a411a3283b4253>     374
       locationd <cf31b0cddd2d3791a2bfcd6033c99045>    1194
       ISXDaemon <54a1918090fb3c81acbd60b283de91a5>     263
          powerd <133b7397f5603cf8bef209d4172d6c39>     173
       lockdownd <b06de06b9f6939d3afc607b968841ab9>     268
      CommCenter <2c0aa3aba43a394d86f294959dbc61bd>     966
     SpringBoard <c74dc89dec1c3392b3f7ac891869644a>   42475 (active)
         configd <ee72b01d85c33a24b3548fa40fbe519c>     658
         syslogd <7153b590e0353520a19b74a14654eaaa>     229
         notifyd <f6a9aa19d33c3962aad3a77571017958>     275
  UserEventAgent <dc32e6824fd33bf189b266102751314f>     402
         launchd <5fec01c378a030a8bd23062689abb07f>     175

**End** 
```

任何帮助将不胜感激。我是 ios 开发的新手，我期待着解决这个问题，因为我一直在尝试我可以在论坛中找到的所有内容。

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:06:37.660

由于内存警告，您可能会崩溃。尽量不要保存每张图像，因为它可能对后置高分辨率相机重 2-3 Mb，或者以某种方式回收内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T20:44:54.333

这是我的猜测：

```
-(void) imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info{
    imageView.image = (UIImage *)[info objectForKey:UIImagePickerControllerOriginalImage];
    [picker dismissModalViewControllerAnimated:YES];    
} 
```

您的图像变量可能不会保留您从信息中获得的图像。它可能会崩溃，因为您在关闭选择器视图控制器后设置了 imageview 的图像。

# .net - ADO.NET 中是否有工厂方法来获取参数标志？

> ID：14529962
> 
> 赞同：4
> 
> 时间：2013-01-25T20:35:25.630
> 
> 标签：.net, ado.net, dataprovider

我正在使用 ADO.NET 接口来创建一个独立于数据库的程序。工厂接受提供者名称并返回实现 ADO 接口的供应商特定对象。这很棒。

但是我找不到标识参数的标志的工厂。

```
string paramName = "@foo"; //flag "@" for sql server

string paramName = ":foo"; //flag ":" for oracle 
```

**问题：ADO.NET 是否提供工厂方法来获取标志？**
我可以为此推出自己的独立工厂，但这会将我限制在预定义的提供者列表中；打败了提供者工厂的大部分好处。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T09:56:53.687

不幸的是，恕我直言，DbProviderFactory 机制设计得很糟糕。机制本身不可扩展，所有有趣的类都是密封的（SqlClientFactory 等），.config 文件中的配置也不可扩展。

一个简单的解决方案是构建一个扩展类，如下所示：

```
public static class DbProviderFactoryExtensions
{
    public static DbParameter CreateParameter(this DbProviderFactory factory, string name)
    {
        DbParameter parameter = factory.CreateParameter();
        if (factory.GetType().FullName.IndexOf("sqlclient", StringComparison.OrdinalIgnoreCase) >= 0)
        {
            name = "@" + name;
        }
        else if (factory.GetType().FullName.IndexOf("oracle", StringComparison.OrdinalIgnoreCase) >= 0)
        {
            name = ":" + name;
        } // etc...
        parameter.ParameterName = name;
        return parameter;
    }
} 
```

这不是很聪明，但您可以在代码中执行此操作：

```
 DbProviderFactory factory = DbProviderFactories.GetFactory("MyDb");
    DbParameter parameter = factory.CreateParameter("myParam");
    // parameter.ParameterName will be @myParam if SQL, etc. 
```

或者您也可以重新创建自己的系统。这不是很复杂，如果您需要每种类型的数据库的其他变量项，它可能是值得的。

# ruby-on-rails - 将 Rails 的变量传递给部分错误

> ID：14529964
> 
> 赞同：0
> 
> 时间：2013-01-25T20:35:34.790
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我尝试通过我的rails部分传递一个变量但是这个错误

```
SyntaxError in Posts#index

Showing /Users/overallduka/Blog1/app/views/posts/_posts_mason.html.erb where line #5 raised:
Extracted source (around line #5):

2:  
3:     <%= link_to "Add to Journal", add_post_journal_path(@post), :method => :put %>
4: 
5:     <h2><%= link_to @post.title,post_path(@post) %></h2>
6: <%= image_tag @post.image.url,:class => "thumb" %> <br>
7: 
8: <%= @post.content  %> 
```

我尝试显示这个部分 _posts_mason.html.erb

```
 <div id="post"  >

    <%= link_to "Add to Journal", add_post_journal_path(@post), :method => :put %>

    <h2><%= link_to @post.title,post_path(@post) %></h2>
<%= image_tag @post.image.url,:class => "thumb" %> <br>

<%= @post.content  %>

  <br>
  <p>Por <%= @post.user.email %> em <%= @post.created_at.strftime("%d %b. %Y") %> ás <%= @post.created_at.strftime("%H:%M") %></p>

  <div id="post_footer">

  <%= link_to_function "Comentar","
  $(this).fadeOut();
if($('#comment_form_#{@post.id}').css('display') == 'none')
{
$('#comment_form_#{@post.id}').slideDown();
}
else $('#comment_form_#{@post.id}').slideUp();
$('.comentar.#{@post.id}').hide();
",:class=>"comentar"

%>

<div id="comment_form_<%= @post.id %>" style="display: none;" >

  <%= form_for [@post,@post.comments.build], :remote => true do |com| %>
      <%= com.text_area :comment %>

      <%= com.submit 'Comentar' %>

  <%end %>
  </div>

      <div class="comment_list <%= @post.id %>">
  <% @post.comments.each do |comment|   %>

      <% if comment.comment %>
                <div id="comments">
      <%= comment.user && comment.user.email %>:
           <%= comment.comment %>
                </div>
          <%end%>

   <%end%>

      </div>

<br>

  </div><!--Fim div #post_footer-->

</div> 
```

我每个传递循环的变量，这段代码：

```
<% @posts.each do |post| %>

<%= render :partial => "posts_mason",:locals => { post => @post } %>

<% end %> 
```

出了什么问题，在转换部分内容之前完美运行我不知道出了什么问题请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T20:39:58.780

您在第 5 行有语法错误`_posts_mason.html.erb`

代替 ：

```
<h2><%= link_to @post.title,post_path(@post) %></h2> 
```

和：

```
<h2><%= link_to("#{@post.title}", post_path(@post)) %></h2> 
```

将循环更改为：

```
<%= render :partial => "posts_mason",:collection => @posts %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T22:53:10.627

您在最后一段代码中分配了错误的变量。应该是地方**邮政**。你可以像这样猴子修补它来工作：

```
<% @posts.each do |post| %>
  <% @post=post %>
  <%= render :partial => "posts_mason" %>
<% end %> 
```

但**正确的方法是**像这样将局部变量分配给部分（替换每个块）：

```
<%= render :partial => "posts_mason",:collection => @posts %> 
```

..并在您的部分 _posts_mason.html.erb 中使用局部变量**post例如：**

```
<h2><%= link_to post.title, post_path(post) %></h2> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T16:20:03.767

感谢您的帮助，我解决了这个问题，但是 :collection

我将部分名称更改为 _post.html.erb

并通过部分帖子更改我的变量@post

但请注意，集合传递的部分变量需要与部分名称相同，

例如，如果我的部分调用_post_mason.html.erb，我在部分中的变量必须是post_mason，我等待大家理解我，这解决了我的问题，由:collection 传递的变量必须与部分名称相同。

谢谢大家的回答对我有帮助，谢谢。

# clojure - 如何将 clojure core.logic 连接到数据库？

> ID：14529965
> 
> 赞同：10
> 
> 时间：2013-01-25T20:35:40.573
> 
> 标签：clojure, clojure-core.logic

我一直在享受 Clojure core.logic，但我碰壁了。我需要能够让它使用数据库，无论是否 SQL，而不是内存数据结构。当我环顾四周时，我看到提到了一个`to-stream`函数，但没有使用它的可靠示例。

有没有人有一个将 core.logic 与数据库一起使用的好例子？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-26T01:15:12.277

正如评论中已经有人建议的那样，请查看[core.logic 存储库](https://github.com/clojure/core.logic/blob/master/src/main/clojure/clojure/core/logic/datomic.clj#L78)中的 Datomic 示例。根据那里的示例，您可以想象编写如下内容：

```
(defn query [db query-string out]
  (fn [a]
    (to-stream
      (map (fn [result] (unify a out result))
        (db-query db query-string))))) 
```

所有 core.logic 目标都只返回带有替换映射的闭包`a`（您当然可以随意调用它）。本质上，您需要映射结果并将它们与`out`in统一起来`a`。

然后你可以想象编写一个如下的 core.logic 程序：

```
(run* [q]
  (fresh [row]
    (query some-db "... some query string ..." row)
    (some-other-goal row q))) 
```

# ajax - ColdFusion 表单提交的问题

> ID：14529971
> 
> 赞同：2
> 
> 时间：2013-01-25T20:35:59.420
> 
> 标签：ajax, coldfusion

我的 ColdFusion 页面中有以下表格：

```
<form name="adminsignin" action="swipelogin.cfm" method="POST">
    <input type="password" class="rounded" name="adminpin" id="adminpin">
    <input type="submit" value="Sign In" name="adminpinbutton" id="adminpinbutton">
</form> 
```

单击按钮后，我使用 JQuery 提交表单，如下所示：

```
$("#adminpinbutton").click(function(e) {
        e.preventDefault();
        if ($.trim($('#adminpin').val()).length > 0) {
            $.ajax({
                type: 'POST',
                url: 'swipelogin.cfm',
                data: $('#adminsignin').serialize(),
                success: function(data, textStatus) {
                    $('#inputarea').replaceWith($('#inputarea', $(data)));
                },
                error: function(xhr, status, e) {
                    alert(status, e);
                }
            });
        } else {
            alert("PIN missing or Incorrect.");
        }
    }); 
```

问题是在`swipelogin.cfm`页面中，我无法访问表单的输入元素。我试过`form.adminpin`了，它不起作用。我错过了什么吗？

**编辑：swipelogin.cfm 代码**

```
<cfoutput>#form.adminpin#</cfoutput>
<cfif (#isDefined("form.adminpin")#) OR (#isDefined("session.isadmin")# AND #session.isadmin# eq "true")> 
```

如果我使用 cfform 而不是 form，这将非常有效。

**编辑2：** 我只是尝试`$("#adminsignin").submit();`而不是`$.ajax`. 这给了我 ColdFusion 页面中的表单数据。这意味着问题出在 Jquery.ajax() 而不是 ColdFusion 页面上。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T21:10:46.707

您选择表单以获取数据的选择器错误，您需要按名称选择表单

```
$("form[name=adminsignin]") 
```

或者给它你的目标ID

```
<form id="adminsignin" ...> 
```

# javascript - jQuery $.ajax 函数不接受我要发布的数组

> ID：14529973
> 
> 赞同：-1
> 
> 时间：2013-01-25T20:36:09.377
> 
> 标签：javascript, jquery, ajax, arrays, post

我正在尝试通过以下方式通过 jQuery $.ajax 函数将数据发布到我自己的服务器上的脚本：

```
var data = {};
var date = new Date();
data.selectedDate = selectedDate;

$.ajax({
        type: "POST",
        url: "http://www.url.com/somescript.php",
        dataType: 'json',
        data: this.data,
        async: false,
    }) 
```

如果我删除数据参数，脚本就会被调用。任何人都可以解释出了什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T20:42:52.127

`this.data`不是`data`。一个是变量，另一个是当前上下文的属性。

`selectedDate`当您尝试将其分配给时未定义`data.date`。您将 分配`new Date()`给`var date`not `var selectedDate`。

```
var data = {};
var date = new Date();
data.selectedDate = date;

$.ajax({
        type: "POST",
        url: "http://www.example.com/somescript.php",
        dataType: 'json',
        data: data,
        async: false,
    }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T20:45:37.417

这应该有效。

```
var date = new Date();
var data = { selectedDate: date};

$.ajax({
    type: "POST",
    url: "http://www.url.com/somescript.php",
    dataType: 'json',
    data: data,
    async: false,
}) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-25T21:09:12.573

之前有人建议过，但他的帖子似乎已被删除。在发布之前对数据进行 JSON 编码解决了这个问题。我不确定为什么我突然需要这样做，因为我之前已经发布到这个服务器，而没有对我的数据进行 json 编码，也许是因为我正在使用公共 wifi。

```
JSON.stringify(this.data) 
```

感谢每一个人的帮助。

# php - PHP - 按下后退按钮时的 Session_Destroy

> ID：14529975
> 
> 赞同：6
> 
> 时间：2013-01-25T20:36:24.553
> 
> 标签：php, session, refresh, back, destroy

这是我的问题：

我有一个名为 login.php 的登录页面（不包含 HTML 代码）。当用户正确输入他的凭据时，他会被重定向到特定页面；对于这个例子，我们会说 test.php。该页面上的唯一链接注销当前会话，并将用户返回到 index.html。

我的问题是，如果用户按下后退按钮，它会回到 login.php 并且您会得到一个空白页面。如果您离开该空白页面，则无法返回 test.php，因此无法注销该会话。

我最初的想法是使用 Javascript 禁用后退按钮导航。最终我发现这是行不通的，因为如果用户找到一种方法可以在不注销的情况下退出该页面，他们将被困在该会话中并且 login.php 将是空白的。

那么，如果按下后退按钮，有什么方法可以结束当前会话？或者如果 login.php 被重新加载？我对PHP不太熟悉，因此非常感谢详细的解释。

下面是登录页面的代码：

```
 <?php
    /**
     * The idea of this application is to secure any page with one link. I know some of the professionals
     * will agree with me considering the way it has been done, usually you wouldnt put any other information such as
     * HTML/CSS with a class file but in this case its unavoidable. This is to make it easier for the non techys to use.
     * @author John Crossley <john@suburbanarctic.com>
     * @version Version 2
     **/

            // Turn off error reporting.
            error_reporting(0);

            # Start a new session, regenerate a session id if needed.
            session_start();
            if (!isset($_SESSION['INIT'])) {
                session_regenerate_id();
                $_SESSION['INIT'] = TRUE;
            }

            class JC_fsl {

        public static $_init;
        protected $_users = array();
        # Script configuration
        protected static $_script_name;
        protected static $_admin_email;
        protected static $_admin_name;
        private static $_version = '{Version 2.0.1}';

        protected function __construct() {

            if (!isset($_SESSION['LOGIN_ATTEMPTS']))
                $_SESSION['LOGIN_ATTEMPTS'] = 0;

            // Default user admin added.
            $this->_users = array(
                array(
                    'USERNAME' => 'admin', 
                    'PASSWORD' => 'master13', 
                    'EMAIL' => 'seth@procstaff.com', 
                    'LOCATION' => 'master.php')
                );
        }

        public function __toString() {
            return 'SCRIPT NAME :: ' . self::$_script_name . "<br />" .
            ' ADMIN EMAIL :: ' . self::$_admin_email . "<br />" .
            ' ADMIN NAME :: ' . self::$_admin_name . "<br />" .
            ' FSL VERSION :: ' . self::$_version;
        }

        /**
         * This method allows you to peek inside the users list, so you can view their information.
         **/
        public function peek() {
            var_dump($this->_users);
        }

        protected function ready_array($username, $password, $email, $location = 'index.html', $access = false) {
            return array('USERNAME' => $username, 'PASSWORD' => $password, 'EMAIL' => $email, 'LOCATION' => $location);
        }

        public function add($username, $password, $email, $location = 'index.html') {
            $add = $this->ready_array($username, $password, $email, $location);
            $this->_users[] = $add;
        }

        public static function logout() {
            if (isset($_SESSION['LOGGED_IN'])) {
        if (session_destroy()) 
                    header('Location: index.html');
            }
        }

        /**
         * This method increments or returns login attempts.
         * @param <bool> true to increment by 1 and false to return.
         */
        public static function attempts($add = false) {
            if ($add === true)
                $_SESSION['LOGIN_ATTEMPTS'] += 1;
            else
                return $_SESSION['LOGIN_ATTEMPTS'];
        }

        public function site_name() {
            return self::$_script_name;
        }

        public function validate($un, $pw) {
            # Check all of the arrays for the user
            for ($i=0;$i<count($this->_users);$i++) {
                if (array_key_exists('USERNAME', $this->_users[$i])) {
            if ($this->_users[$i]['USERNAME'] == $un) {
                # We have found the user check to see if there password matches also.
                $info = $this->_users[$i];
                if ($info['USERNAME'] == $un && $info['PASSWORD'] == $pw) {
                    # We have a match redirect the user.
                    $_SESSION['LOGGED_IN'] = TRUE;
                    $_SESSION['LOGIN_ATTEMPTS'] = 0;
                    $_SESSION['USERNAME'] = $info['USERNAME'];
                    $_SESSION['EMAIL'] = $info['EMAIL'];
                    header('Location: ' . $info['LOCATION']);
                    return;
                }
            }
                }
            }
            echo '<h2 class=\'error\'>Incorrect username and or password, try again!</h2>';
            self::attempts(true);
        }

        /**
         * Forgot password? not a problem call this method with the correct username
         * and the user will be sent a password reminder. Please note that not of these passwords
         * are hashed meaning this is not a good idea to store personal information behind this script!
         * @param <string> The users email address.
         * @return <bool> Returns true upon success. 
         */
        public function forgot($email) {
            for ($i=0;$i<count($this->_users);$i++) {
                if (array_key_exists('EMAIL', $this->_users[$i])) {
                    if ($this->_users[$i]['EMAIL'] == $email)
                        $info = $this->_users[$i];
                } else return false;
            }
    if (isset($info) && is_array($info)) {
        # Send the user their password
        $to = $info['EMAIL'];
        $subject = 'You recently forgot your password | ' . self::$_script_name;
        $message = 'Hi ' . $info['USERNAME'] . ', ' . "\n\n";
        $message .= 'You recently requested your password for ' . self::$_script_name . ' if you didn\'t not to worry just ignore this ';
        $message .= 'email. Anyway you can find your email below, should you require anymore assistance then please contact us ';
        $message .= 'at ' . self::$_admin_email . ".\n\n";
        $message .= 'Username: ' . $info['USERNAME'] . "\n";
        $message .= 'Password: ' . $info['PASSWORD'];
        $message .= "\n\n" . 'Best Regards, ' . "\n" . self::$_admin_name;
        $headers = 'From: ' . self::$_admin_email . "\r\n" .
            'Reply-To: ' . self::$_admin_email . "\r\n" .
            'X-Mailer: PHP/' . phpversion();

                # Uncomment for final version
                if (mail($to, $subject, $message, $headers)) return true;
            }
        }

        /**
         * The secure method, simply call this to lock any page down it's as simple as that.
         * @param <string> Name of the script EG: John's Script
         * @param <string> Email of the administrator EG: john@suburbanarctic.com
         * @param <string> Admin name EG: John Crossley
         * @return <object> Returns an instanciated object of this class.
         */
        public static function secure($s_name = '', $a_email = '', $a_name = '') {

            self::$_script_name = $s_name;
            self::$_admin_email = $a_email;
            self::$_admin_name = $a_name;

            if (!self::$_init instanceof JC_fsl) {
                self::$_init = new JC_fsl();
            }
            return self::$_init;
        }
    }

    # You may edit me
    $secure = JC_fsl::secure();

    ##########################################################################
    ########################## YOUR EDITING BLOCK ###########################

    $secure->add('mbhaynes', 'mbhaynes13', 'seth@procstaff.com', 'mbhaynes.php');
    $secure->add('emory', 'emory13', 'seth@procstaff.com', 'emory.php');
    $secure->add('ehg', 'ehg13', 'seth@procstaff.com', 'redirect.html');
    $secure->add('dhgriffin', 'dhgriffin13', 'seth@procstaff.com', 'dhgriffin.php');
    $secure->add('neo', 'neo13', 'seth@procstaff.com', 'neo.php');
    $secure->add('first', 'first13', 'seth@procstaff.com', 'first.php');
    $secure->add('test', 'test', 'seth@procstaff.com', 'test.php');

    ##########################################################################
    ##########################################################################

    ############ FORM PROCESSING ############
    if (isset($_POST['username']) && isset($_POST['password'])) {
        $secure->validate($_POST['username'], $_POST['password']);
    }
    if (isset($_GET['logout'])) $secure->logout();

    if (isset($_POST['forgot_password_button']) && isset($_POST['email'])) {
        // We need to send the user their password.
        if ($secure->forgot($_POST['email'])) {
            echo '<h2 class=\'success\'>Your password has been sent to your email address!</h2>';
        } else {
            echo '<h2 class=\'error\'>I\'m sorry but that email address has no record on this site.</h2>';
        }
    }

    ?>
    <?php if(!isset($_SESSION['LOGGED_IN'])): ?>
        <style type='text/css'>
            #fslv2-main{
        font-family:HelveticaNeue-Light, "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;font-weight:300;font-size:14px;line-height:1.6;
        margin-left:auto;
        margin-right:auto;
        width: 300px;
        padding: 10px 10px 10px 10px;
            }
            fieldset { border: none; margin: 0; padding: 0;}
            .fslv2 .input { 
        border: 1px solid #b9b9b9; 
        padding: 5px;
        width: 225px;
        outline: none;
        font-size: 13px;
            }
            .fslv2 label {
        float: left;
        width: 72px;
        line-height: 28px;
            }
            h3 { font-weight: normal; }
            a { color: #4a6a81; text-decoration: none; }
            a:hover { color: #4a6a81; text-decoration: underline; }
            .button {
        border: 1px solid #233d4f;
        border-bottom: 1px solid #233d4f;
        background-color: #4a6a81;
        border-radius: 2px;
        padding: 6px 5px;
        color: #ffffff;
        text-shadow: 0 1px rgba(0, 0, 0, 0.1);
        margin-left:auto;
        margin-right:auto;
        top: 5px;
        width: 100px;
        min-width: 100px;
        cursor: pointer;
        font-size: 13px;
        box-shadow: rgba(0,0,0,0.2);
        -webkit-box-shadow: rgba(0,0,0,0.2);
        -moz-box-shadow: rgba(0,0,0,0.2);
            }
            .input:focus {
        -moz-box-shadow: inset 0 0 3px #bbb;
        -webkit-box-shadow: inset 0 0 3px #bbb;
        box-shadow: inner 0 0 3px #bbb;
            }
            .fsl p.la { text-align: center; }
            .success {
        margin: 2em auto 1em auto;
        border: 1px solid #337f09;
        padding: 5px;
        background-color: #dd4b39;
        width: 400px;
        text-align: center;
        -webkit-border-radius: 5px;
        -moz-border-radius: 5px;
        border-radius: 5px;
        font-weight: normal;
        font-family:HelveticaNeue-Light, "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;font-weight:300;font-size:14px;line-height:1.6;
            }
            .error {
        margin: 2em auto 1em auto;
        border: 1px solid #233d4f;
        padding: 5px;
        background-color: #8bafc5;
        width: 400px;
        text-align: center;
        -webkit-border-radius: 5px;
        -moz-border-radius: 5px;
        border-radius: 5px;
        font-weight: normal;
        font-family:HelveticaNeue-Light, "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;font-weight:300;font-size:14px;line-height:1.6;
            }
        </style>
        <div id="fslv2-main">
        <?php if($secure->attempts() > 5): ?>
            <!-- Show the login form -->
            <p>Too many failed attempts, please try again later.</p>
        <?php elseif(isset($_GET['forgot_password'])): ?>
            <fieldset class="fslv2">
            <form method="post" action="#">
                <p>
                    <label for='email'>Email: </label>
                    <input type='text' name='email' class='input'/>
                </p>
                <p><input type='submit' name='forgot_password_button' class='button' value='Send!' /></p>
            </form>
        </fieldset>
        <small><a href="index.html">Cancel</a></small>
        <?php else: ?>
        <fieldset class="fslv2">
        <legend><?php echo $secure->site_name(); ?></legend>
    <form method="post" action="#">
                <p>
                    <label for='username'>Username: </label>
                    <input type='text' name='username' class='input'/>
                </p>
                <p>
                    <label for='password'>Password: </label>
                    <input type='password' name='password' class='input'/>
                </p>
                <p><input type='submit' name='login' class='button' value='Login' /></p>
            </form>
        </fieldset>
        <?php endif; ?>
        </div><!-- #fslv2-main -->
    <?php exit(); endif; ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T21:40:13.497

如果登录后返回主页面，请尝试刷新页面，如果会话设置正确，则刷新后您将自动登录或显示已登录状态，否则会破坏所有内容主页中的会话？我会选择第一个条件，因为这种情况发生在我身上很多次，最好在您想显示注册用户内容的同一页面上显示登录表单，并在登录后快速将它们重定向到同一页面，这样所有会话工作正常，当您将它们重定向到同一页面时，后退按钮不会产生问题....

编辑：它不会影响拥有单独页面的用户，因为整个登录表单将在登录后被该用户内容更改。

尝试这个：

```
if(isset($_SESSION['LOGGED_IN'])){
   //User is logged-In check for existence of its name file,
  $user = $_SESSION["LOGGED_IN"]."php";
If(file_exists($user)){
 //User's named file exists now include it.
  include("yourfolder/$user");
}else{
 //He was loggedIn in but file wasn't found...
 echo"Sorry nothing for you :P";
 }
}else{
   //Show the logIn form
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T20:43:58.290

如果他们已经登录，为什么不将他们从 login.php 重定向出去呢？如果他们已经验证了他们的帐户，他们就不需要访问该页面：

**登录.php**

```
session_start();

//If the user is already logged in, they have no business being here.
if(isset($_SESSION['LOGGED_IN'])){
     header('Location: logged_in_homepage.php');
     exit;
}

//User isn't logged in. Process login. 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-03-14T18:26:55.243

你也可以通过在你的 head 标签中添加这个代码来做到这一点

`<script language="javascript" type="text/javascript"> window.history.forward(); </script>`

它将阻止用户返回。

# asp.net - 用于 Web 的 Visual Studio 2012 express 未命中命令提示符

> ID：14529981
> 
> 赞同：1
> 
> 时间：2013-01-25T20:36:52.650
> 
> 标签：asp.net, visual-studio

我安装了 Visual Studio 2012 Express for Web 来进行一些 ASP.NET 编程，但我缺少 Visual Studio 命令提示符。

我现在搜索了很长时间，但它似乎丢失了。知道我在哪里可以找到它吗？

在此先感谢多米尼克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-13T13:17:45.903

您需要 C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\VWDExpress /updateconfiguration。每个人的解决方案中缺少的是 WDExpress.exe 中的“V”，当涉及到 VS express 版本时

# javascript - 使用 JavaScript 操作对 DOM 元素的引用

> ID：14529982
> 
> 赞同：0
> 
> 时间：2013-01-25T20:37:00.640
> 
> 标签：javascript, html, dom

我正在处理的一个项目必须使用 JavaScript 操作 DOM 元素。当某个特定事件触发时，我会循环遍历 DOM 并基本上创建所有节点的索引，以便以后操作它们。我创建此索引的原因还有更多，但为了简单起见，我在这里将其简化。

然而问题在于，当我们去操作 DOM 中的元素时，它看似操作的是一个单独的对象，而不是 DOM 中的实际对象。这是我能想到的一个基本示例：

```
<div id="container">
    <div>Here is some text</div>
    <div>And here is some more text</div>
</div>

<script>
    var container = document.getElementById('container');
    container.firstChild.innerHTML = 'Foobar';
</script> 
```

小提琴：http: [//jsfiddle.net/4Nngh/](http://jsfiddle.net/4Nngh/)

但第一个 div 从未更改为“Foobar”。我猜当我得到“容器”元素时，我实际上得到的是一个单独的对象，而不是对 DOM 元素的引用。

是否可以简单地引用 DOM 中显示的元素并直接对其进行操作，还是必须使用某种类型的替换方法？其他事件可能会在脚本运行时更改该 DOM 元素的内容，因此我试图避免每次触发事件时都必须重新创建此索引，这就是为什么我正在寻找对元素以某种方式。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T20:38:51.150

`firstChild`实际上是包含换行符组合的文本节点。

要获取第一个*元素*子元素，请使用`children[0]`. 该`children[]`数组仅包含元素节点。

# r - 为每个值使用不同的“中断”参数进行剪切

> ID：14529984
> 
> 赞同：0
> 
> 时间：2013-01-25T20:37:12.167
> 
> 标签：r

我有一个数据框，其中包含 [0,1] ( `df$Estimate`) 上的一列值和中断值的四列 ( `df$V1-4`)；每行的形式为`c(0, [somevalue], 0.8, 1)`. 对于 中的每个值`df$Estimate`，我想将其行的值传递`df$V1-4`给 cut 函数。

使用 for 循环版本的解决方案复制示例的代码：

```
nrow <- 10
set.seed(1)
df <- data.frame(Estimate = runif(nrow), V1 = 0, 
                 V2 = runif(nrow, 0.1, 0.75), 
                 V3 = 0.8, V4 = 1)
bins <- vector(length = nrow(df))
for (i in 1:nrow(df)) {
    bins[i] <- cut(df$Estimate[i], df[i, grep("V[0-9]", colnames(df))])
} 
```

所以我有一个笨拙的解决方案，但正确的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T20:48:41.733

我不知道这是否是正确的方法，但一种可能性是使用`findInterval`：

```
apply(df, 1, function(v) { findInterval(v[1], v[2:5]) }) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T20:49:12.830

另一个`apply`使用`cut`仍然的解决方案：

```
 apply(df,1,function(x) cut(x[1],x[-1],labels = FALSE)) 
```

# groovy - Groovy 中的大整数

> ID：14529985
> 
> 赞同：1
> 
> 时间：2013-01-25T20:37:17.237
> 
> 标签：groovy, integer, biginteger

我想将 1 到 1000000 的所有数字相加。

```
range = 1..1000000
println range.each { it * it }.sum() 
```

结果，我得到 1784293664 而不是 500000500000。我假设，我需要一个 BigInteger。但是当我尝试

```
range = 1..1000000
println range.each { it * it }.sum().toBigInteger() 
```

没有什么变化。

我的错误在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T20:41:47.453

您已经完成了总和，它具有相同（截断）的错误，然后将该错误答案转换为`BigInteger`. 在转换之前是错误的。是什么让您认为`BigInteger`能够神奇地恢复丢失的精度？:-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T22:12:45.053

您可以使用 G 后缀创建 BigInteger 文字：例如`1G..1000000G`. 不需要`each`表达。

```
(1G..1000000G).sum() 
```

你想把这些数字的*平方相加吗？*如果是这样，你应该打电话`collect`而不是`each`. 当您使用 迭代范围时`each`，您正在计算的表达式 ( `it * it`) 将被丢弃。在这种情况下，它看起来像：

```
(1G..1000000G).collect { it * it }.sum() 
```

请注意，这会`collect`强制评估范围并在内存中创建一个大型集合。您可能要考虑使用`inject`增量计算它：

```
(1G..1000000G).inject(0, { sum, value -> sum + value * value } ) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-25T20:48:12.157

你的范围是 type `IntRange`。这是一个正确的：

```
range = 1G..1000000G
println range.each { it * it }.sum() 
```

# ruby - 查找文本并将行复制到文件

> ID：14529988
> 
> 赞同：1
> 
> 时间：2013-01-25T20:37:38.903
> 
> 标签：ruby

假设我有一个这样的文本文件：

```
SELL USDCAD 0.99257 0.99653 0.39 -150.1 -8.57% -580.99 1 week ago  Copy 
SELL USDCAD 0.98986 0.99653 0.26 -177.2 -6.75% -457.25 1 week ago  Copy 
SELL USDCAD 0.98711 0.99653 0.17 -204.7 -5.10% -345.37 1 week ago  Copy 
BUY USDCAD 0.98613 0.98715 0.17 8.4 0.21% 14.47 1 week ago  Copy 
```

我正在寻找其中包含“1 周前”这个字符串的行/行。并将其带到一个变量并写入另一个文本文件。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T20:59:02.990

is there any reason you have to use ruby for this, when one line from the command line will do the same thing?

```
grep '1 week ago' file.txt > newfile.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T21:01:25.487

使用以下命令从命令行执行此操作：

```
ruby -ne 'print if $_["1 week ago"]' < file_to_read > file_to_write 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T20:56:38.040

你可以这样做：

```
str = <<EOT 
SELL USDCAD 0.99257 0.99653 0.39 -150.1 -8.57% -580.99 1 week ago  Copy 
SELL USDCAD 0.98986 0.99653 0.26 -177.2 -6.75% -457.25 1 week ago  Copy 
SELL USDCAD 0.98711 0.99653 0.17 -204.7 -5.10% -345.37 1 week ago  Copy 
BUY USDCAD 0.98613 0.98715 0.17 8.4 0.21% 14.47 1 week ago  Copy
EOT

content = str.lines.select { |l| l.include? '1 week ago' }.join("\n")
File.open('asdf.txt', 'w') { |file| file.write content } 
```

# sql-server - MSSQL 参数化查询导致“关键字'from'附近的语法不正确”

> ID：14529993
> 
> 赞同：2
> 
> 时间：2013-01-25T20:37:55.723
> 
> 标签：sql-server

我有一个看起来像这样的参数化查询：

```
SELECT title, html, shortname FROM dbo.Videos
WHERE Topic_ID = ? AND dbo.gradeLevelCheck(?, Grade_Lower, Grade_Upper) = 1
ORDER BY shortname ASC 
```

当我从 ASP 运行它时，我收到一条错误消息：

```
Incorrect syntax near the keyword 'from' 
```

参数是`56`和`1`（所以没有空值）。存储的函数`dbo.gradeLevelCheck`如下所示：

```
ALTER FUNCTION [dbo].[gradeLevelCheck]
(
    @value int,
    @lower int,
    @upper int
)
RETURNS int
AS
BEGIN
    DECLARE @result int;
    IF (@lower IS NULL OR @lower <= @value) AND (@upper IS NULL OR @upper >= @value)
        SET @result = 1;
    ELSE
        SET @result = 0;
    RETURN @result;
END 
```

如果我使用硬编码到查询中的参数提交它，它工作正常。如果我删除 ORDER BY 子句，它也可以正常工作。但我无法让它以这种形式工作。谁能帮我弄清楚为什么？

编辑：这里有一些额外的细节。该应用程序是用带有 JScript 的 Classic ASP 编写的。这样就建立了连接：

```
 var conn = Server.CreateObject('ADODB.Connection');
        var connectionString =
            'Provider=SQLOLEDB;' +
            'Data Source=' + Settings.dbServer + ';' +
            'Initial Catalog=' + Settings.dbCatalog + ';' +
            'User Id=' + Settings.dbUser + ';' +
            'Password=' + Settings.dbPass + ';' +
            'Connect Timeout=15;';
        conn.Open(connectionString, conn); 
```

用于提交查询的代码如下所示：

```
 DB.query = function(query) {
    ...
            var cmd = Server.CreateObject("ADODB.Command");
            cmd.activeConnection = conn;
            cmd.commandText = query;
            for (var i = 1; i < arguments.length; i++) {
                cmd.Parameters(i-1).value = arguments[i];
            }
            return cmd.Execute();
    ...
    } 
```

（这里，参数`1`和`56`作为附加参数传递给`DB.query`。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T05:26:09.733

“关键字'from'附近的语法不正确”是您在通过连接字符串并忘记单词之间的一些空格来构建查询时遇到的经典错误。我猜这里第一行的结尾（...视频）和第二行的开头（WHERE ...）之间缺少一个空格

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T05:19:14.553

我看到了查询文本，并且看到了函数如何接受该文本，但我仍然缺少一件事来准确诊断：如何将查询文本放入代码中？

我问，因为我有一种感觉，你有这样的事情：

```
query = "SELECT title, html, shortname FROM dbo.Videos"
      + "WHERE TopicID = ? .... "; 
```

请注意创建该字符串变量时会发生什么。它看起来像这样：

> 从 dbo.VideosWHERE TopicID = 选择标题、html、短名称 ……

`dbo.Videos`请注意，和之间根本没有任何东西`WHERE`。您没有在两行之间包含任何空格。原始代码中的换行符不是任一字符串文字的一部分。你需要这样的东西：

```
query = "SELECT title, html, shortname FROM dbo.Videos"
     + " WHERE TopicID = ? .... "; 
```

请注意为`WHERE`关键字添加了一个空格。

* * *

另一个建议是删除该`dbo.`部分并仅`Videos`用于表名。我知道你所拥有的*应该*是有效的语法，但一定有一些不寻常的事情发生，否则我们已经解决了。要尝试的另一件事是在表格和列名周围放置方括号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T19:59:30.003

我相信我已经找到了问题所在。这是我的假设：

似乎通常 ADO 能够根据查询的结构*推断*参数的类型。但是，在这种情况下，prepared statement 的参数之一是 function 的参数`dbo.gradeLevelCheck`，这会导致类型推断失败。（大概，ADO 不理解存储函数什么的，所以它不知道如何检查参数应该是什么类型。）因为它无法确定类型，所以查询是无效的。

我仍然不知道为什么如果`ORDER BY`删除该子句，这个查询似乎可以工作，但很明显我无论如何都必须更改代码。

# python - 将Python中的类实例打印为内置数据类型？

> ID：14529995
> 
> 赞同：0
> 
> 时间：2013-01-25T20:37:57.490
> 
> 标签：python, python-2.7

我正在阅读 DiveIntoPython。

我想知道为什么我可以直接将 UserDict 的实例打印为字典。详细来说，这些代码

```
import UserDict;

d = UserDict.UserDict({1:1, 'a':2});
print d;
print d.data; 
```

会有输出

```
{'a': 2, 1: 1}
{'a': 2, 1: 1} 
```

而这些代码

```
class MyDict:
    def __init__(self, dictData=None):
        self.data = dictData;

d = MyDict({1:1, 'a':2});
print d;
print d.data; 
```

将有输出（在我的机器上）

```
<__main__.MyDict instance at 0x10049ef80>
{'a': 2, 1: 1} 
```

换句话说，我如何定义我的类，并将其实例打印为内置数据类型？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T20:43:38.143

对象的打印方式归结为它`repr`- 当您从 mixin 继承时，它已经提供了该`repr`功能。另请注意，这些天您可以直接继承`dict`。

在您的情况下，您可以定义

```
def __repr__(self):
    return repr(self.data) 
```

The difference between `__str__` and `__repr__` is that mostly `__str__` should be readable and understable. `__repr__` where it's possible can be used to provide an `eval`'d string constructing the original object (although not necessary) - see the great answer here for the difference: [Difference between __str__ and __repr__ in Python](https://stackoverflow.com/questions/1436703/difference-between-str-and-repr-in-python)

# scala - BigInt isPrime 测试，更优雅的解决方案？

> ID：14529997
> 
> 赞同：0
> 
> 时间：2013-01-25T20:38:13.820
> 
> 标签：scala, biginteger

这是表达对象`isPrime`功能的最优雅的方式吗？`BigInt`

这是我对常规整数的看法：

```
 def isPrimeForInt(n: Int): Boolean = {
    val ceiling = math.sqrt(n.toDouble).toInt
    (2 until ceiling) forall (x => n % x != 0)
  } 
```

这是我对 BigInts 的看法：

```
 def isPrimeForBigInt(n: BigInt): Boolean = {
    def ceiling: BigInt = {
      def f(a: BigInt): Stream[BigInt] = a #:: f(a+1)
      f(BigInt(1)).dropWhile(_.pow(2) < n)(0)
    }
    Range.BigInt(BigInt(2), ceiling , BigInt(1)) forall (x => n % x != 0)
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T20:44:00.817

你在你的第一个例子中改变`Int`了。`BigInt`你为什么要重写它？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T23:47:09.963

这是我的 BigInts 素数检查器：

```
private static Boolean isSpsp(BigInteger n, BigInteger a)
{
    BigInteger two = BigInteger.valueOf(2);
    BigInteger n1 = n.subtract(BigInteger.ONE);
    BigInteger d = n1;
    int s = 0;

    while (d.mod(two).equals(BigInteger.ZERO))
    {
        d = d.divide(two);
        s += 1;
    }

    BigInteger t = a.modPow(d, n);

    if (t.equals(BigInteger.ONE) || t.equals(n1))
    {
        return true;
    }

    while (--s > 0)
    {
        t = t.multiply(t).mod(n);
        if (t.equals(n1))
        {
            return true;
        }
    }

    return false;
}

public static Boolean isPrime(BigInteger n)
{
    Random r = new Random();
    BigInteger two = BigInteger.valueOf(2);
    BigInteger n3 = n.subtract(BigInteger.valueOf(3));
    BigInteger a;
    int k = 25;

    if (n.compareTo(two) < 0)
    {
        return false;
    }

    if (n.mod(two).equals(BigInteger.ZERO))
    {
        return n.equals(two);
    }

    while (k > 0)
    {
        a = new BigInteger(n.bitLength(), r).add(two);
        while (a.compareTo(n) >= 0)
        {
            a = new BigInteger(n.bitLength(), r).add(two);
        }

        if (! isSpsp(n, a))
        {
            return false;
        }

        k -= 1;
    }

    return true;
} 
```

您可以在我[的“使用质数编程”](http://programmingpraxis.com/essays/)文章中阅读更多相关信息。