# StackOverflow 问答 13121000-13121999

# java - 使用 maven 的最新 jar 中的更改不起作用

> ID：13121003
> 
> 赞同：0
> 
> 时间：2012-10-29T11:45:51.827
> 
> 标签：java, maven

我需要在 struts2-jquery 网格插件中做一些增强。[我从https://struts2-jquery.googlecode.com/svn/trunk](https://struts2-jquery.googlecode.com/svn/trunk)下载了源代码。我改变了这个来源的逻辑。**当我使用mvn package**执行我的 POM.xml 文件时。我收到了异常

```
 "The project com.jgeppert.struts2.jquery:struts2-jquery-grid-plugin:3.5.0-SNAPSHOT 
    have 1 error

        Non-resolvable parent POM:could not find artifact com.jgeppert.struts2.jquery:struts2-
jquery:pom:3.5.0-snapshot and 'Parent.relativePath' points at wrong local POM @line 5,c
olumn 13  " 
```

我的 pom.xml 文件如下所示。

```
<?xml version="1.0"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <parent>
       <groupId>com.jgeppert.struts2.jquery</groupId>
        <artifactId>struts2-jquery</artifactId>
        <version>3.5.0-SNAPSHOT</version>
    </parent>
    <artifactId>struts2-jaquery-grid-plugin</artifactId>
    <name>Struts 2 jQuery Grid Plugin</name>
    <packaging>jar</packaging>

    <scm>
        <connection>scm:svn:http://struts2-jquery.googlecode.com/svn/trunk/struts2-jquery-grid-plugin</connection>
        <developerConnection>scm:svn:https://struts2-jquery.googlecode.com/svn/trunk/struts2-jquery-grid-plugin</developerConnection>
        <url>http://code.google.com/p/struts2-jquery/source/browse/</url>
    </scm>

    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.myfaces.tobago</groupId>
                <artifactId>maven-apt-plugin</artifactId>
                <version>1.0.39</version>
                <configuration>
                    <A>
                        uri=/struts-jquery-grid-tags,
                        tlibVersion=${tlib.version},
                        jspVersion=2.0,
                        shortName=sjg,
                        displayName="Struts2 jQuery Grid Tags",
                        outFile=${basedir}/target/classes/META-INF/struts-jquery-grid-tags.tld,
                        description="Struts2 tags based on jQuery and jqGrid.",
                        outTemplatesDir=${basedir}/src/site/docs
                    </A>
                    <resourceTargetPath>target</resourceTargetPath>
                    <fork>false</fork>
                    <force>true</force>
                    <nocompile>true</nocompile>
                    <showWarnings>true</showWarnings>
                    <factory>
                        org.apache.struts.annotations.taglib.apt.TLDAnnotationProcessorFactory
                    </factory>
                    <target>1.5</target>
                    <includes>
                        <include>**/*.java</include>
                    </includes>
                </configuration>
                <executions>
                    <execution>
                        <phase>compile</phase>
                        <goals>
                            <goal>execute</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>

    <dependencies>

        <!-- Core -->

        <dependency>
            <groupId>com.jgeppert.struts2.jquery</groupId>
            <artifactId>struts2-jquery-plugin</artifactId>
            <version>${project.version}</version>
        </dependency>

        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>jsp-api</artifactId>
            <version>2.0</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>org.apache.struts</groupId>
            <artifactId>struts-annotations</artifactId>
            <version>1.0.4</version>
            <optional>true</optional>
        </dependency>

        <!-- JSP API -->

        <!-- struts-annotations must be in compile scope for maven-apt-plugin to
             function correctly. Marking it optional to exclude it from transitive dependency resolution -->
        <dependency>
            <groupId>org.apache.struts</groupId>
            <artifactId>struts2-core</artifactId>
            <version>${struts2.version}</version>
            <type>jar</type>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>org.apache.velocity</groupId>
            <artifactId>velocity</artifactId>
            <version>1.5</version>
            <scope>compile</scope>
        </dependency>
    </dependencies>

</project> 
```

据我了解，父标签查看另一个 pom.xml 文件。我试图在父标签中添加相对路径，但它不起作用。我没有在[https://struts2-jquery.googlecode.com/svn/trunk](https://struts2-jquery.googlecode.com/svn/trunk)中看到父 pom.xml 。

我删除了父标签并将其添加到 groupid ， artifactId & version 给出为 3.5.0-SNAPSHOT 然后它也失败了。我再次更改了 3.4.0 而不是 3.5.0-SNAPSHOT 然后是它的构建 .jar 文件。但它并没有影响我的改变。

那么如何使用代码的最新更改运行 pom 文件。是否有任何替代方法可以创建 .jar 文件而不是运行 pom.xml 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T11:55:17.457

根据错误尝试下载`com.jgeppert.struts2.jquery:struts2-jquery-grid-plugin:3.5.0-SNAPSHOT`，因为 Maven 存储库中没有这样的版本。

用以下依赖项替换你的 pom，它会构建得很好。

```
<dependency>
    <groupId>com.jgeppert.struts2.jquery</groupId>
    <artifactId>struts2-jquery-plugin</artifactId>
    <version>3.4.0</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T12:08:19.280

*构建失败的原因是因为在本地存储库或当前反应堆构建*中找不到依赖项（即父 pom 和 struts2-jquery-plugin）。术语反应器构建是指您从中运行的项目`mvn`和所有子项目，由`<module>`pom.xml 中的元素引用。

在您的情况下，您需要：

*   `mvn install`将父 pom 和 struts2-jquery-plugin 放入您的本地存储库，然后再次尝试您正在做的事情；
*   更改目录（即到主干目录），并将网格插件构建为反应器构建的一部分，其中包括父 pom 和 struts2-jquery-plugin。

**第一种方法**：如果您转到结帐的顶层，即`trunk`，然后运行：

```
mvn -pl .,struts2-jquery-plugin install 
```

它会将父 pom 和 struts2-jquery-plugin 的快照版本安装到您​​的本地存储库中。然后，您应该能够`mvn package`在网格插件目录中运行。

**第二种方法**：从`trunk`，您可以运行：

```
mvn -am -pl struts2-jquery-grid-plugin package 
```

这将构建网格插件以及在反应器构建中找到的任何依赖项，即父 pom 和 struts2-jquery-plugin 本身。

# php - Symfony2 复杂的路由结构

> ID：13121005
> 
> 赞同：1
> 
> 时间：2012-10-29T11:45:55.030
> 
> 标签：php, symfony, routing, symfony-2.1

如何实现以下路由结构：

```
pattern: /{category} 
```

但也有许多其他固定模式，例如

```
pattern: /register
pattern: /login
pattern: /help 
```

我知道一种方法是对类别变量要求正则表达式，以便类别不等于任何固定模式。但是，如果我要为系统设置 50 多种不同的固定模式，它会变得有点混乱。有没有一种干净有效的方法来实现这种路由结构？

我不想妥协做类似的事情：

```
pattern: /something/{category} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T11:55:35.483

只需放置

```
pattern: /{category} 
```

在 routing.yml 的末尾

# c++ - MySQL C++ 连接器是否比 MySQL C API 慢？

> ID：13121006
> 
> 赞同：1
> 
> 时间：2012-10-29T11:45:54.823
> 
> 标签：c++, mysql, c, libmysql

我正在开发一个 C++ 应用程序，它需要连接到 MySQL 服务器以获取一些信息，但我的应用程序不经常运行查询。因此，由于 C++ 连接器在幕后使用 C API ......我有这个疑问。我在选择 C ​​API 还是 C++ API 进退两难？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T11:48:53.563

根据我的经验，它并没有太大的区别。C++ API 只是包装了 C API——所以你还剩下一个使用 C++ API 的附加函数调用。大多数情况下，编译器可以对其进行优化，并且函数调用没有真正可感知的开销。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T11:51:35.197

与即使是最小的数据库查询也需要*数百万*个时钟周期相比，围绕几个 C 函数的包装器不会产生最小的差异。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T12:00:03.760

您正在用 C++ 编写应用程序。MYSQL 有一个 C++ 包装器。就用它吧。

性能不太可能成为问题，但如果将来确实如此，那么您可以解决它。把事情简单化。

# android - 带有 TouchWiz 启动器的 ICS 手机上未应用小部件边距？

> ID：13121009
> 
> 赞同：1
> 
> 时间：2012-10-29T11:45:56.497
> 
> 标签：android, layout, android-widget

我有一个带有小部件的应用程序。我知道 Android 4.0 或更高版本会自动在小部件周围创建一个边距，因此我在[此开发人员 API 页面](http://developer.android.com/guide/topics/appwidgets/index.html#CreatingLayout)上实施了建议，以使不同 Android 版本上的小部件大小大致相同。我已经在 API 10、14 和 15 上的模拟器中测试了小部件，它工作正常。该小部件在所有版本中看起来都相同。但是，当我在装有 Android 4.0.3 的 SGS2 手机上对其进行测试时，没有余量！怎么会这样？我错过了什么？有没有其他人经历过这种行为？

![模拟器 API 15 上的小部件](../Images/5dd1038fd7d17e2c64fba74f6003ea39.png)！![在此处输入图像描述](../Images/268d1c17964deb96083857f125a2add1.png)

这是我的**res/xml/widget_info.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<appwidget-provider xmlns:android="http://schemas.android.com/apk/res/android" 

    android:initialLayout="@layout/widget"    
    android:minHeight="40dp"  
    android:minWidth="110dp"
    android:updatePeriodMillis="60000" >

</appwidget-provider> 
```

**res/layout/widget.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/widget_mainlayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
    android:layout_margin="@dimen/widget_margin"
    android:background="@drawable/widget_background" >             
</RelativeLayout> 
```

**res/drawable/widget_background.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle" >

<stroke
    android:width="2dp"
    android:color="#222222" />

<gradient
    android:angle="225"
    android:startColor="#DD2ECCFA"
    android:endColor="#DD000000" />

<corners android:radius="7dp" />

</shape> 
```

**res/values/dimens.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <dimen name="widget_margin">8dp</dimen>
</resources> 
```

**res/values-v14/dimens.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <dimen name="widget_margin">0dp</dimen>  
</resources> 
```

起初我认为这与未按照[此处](https://stackoverflow.com/q/6014015/741249)所述正确更新小部件有关，但删除小部件并再次添加它并没有帮助。我还尝试了一些设置：

*   在文件中设置`maxHeight`和不起作用，模拟器和手机似乎都忽略了它。`maxWidth``widget_info.xml`
*   在文件中更改`layout_margin`为无效，小部件看起来相同（但在模拟器 API10 小部件现在也没有边距）`padding``widget.xml`
*   更改文件中的to`0dp`确实对手机和模拟器都有影响，但手机和模拟器上的小部件大小仍然不同。`16dp``res/values-v14/dimens.xml`

**编辑：** 我已经在手机上安装了 GO Launcher Ex，然后小部件确实有边距，所以我想这是三星 TouchWiz 启动器的特定问题？谁能证实这一点？我也对使用 TouchWiz 时使小部件看起来（或多或少）相同的解决方案感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T12:30:02.757

正如您已经指出的那样，诀窍是为 TouchWiz 设备或 SDK 级别 < 14 使用不同的边距/填充。对于 SDK 级别 < 14，您应该继续使用 dimens.xml，但对于 TouchWiz，您需要创建单独的布局文件。然后，如果您检测到 TouchWiz，则在小部件 RemoteViews 的构造函数中切换布局文件：

```
RemoteViews views = new RemoteViews(
    context.getPackageName(), 
    isAlternativeMargins(context) ? 
        R.layout.alternative_layout : 
        R.layout.normal_layout
) 
```

要检测存在相同问题的 TouchWiz 和其他启动器，您可以使用以下代码：

```
/* sorted alphabetically to be able to use Arrays.binarySearch later on */
private final static String[] LAUNCHER_ALTERNATIVES = {
    "com.sec.android.app.launcher",
    "com.sec.android.app.twlauncher",
};

private final static String[] LAUNCHER_ALTERNATIVE_EXCEPTIONS = {
    "GT-I9100", // Galaxy S II
    "GT-I9100G", // Galaxy S II
    "GT-I9100T", // Galaxy S II
    "GT-I9210T", // Galaxy S II
    "GT-I9100M", // Galaxy S II
    "SGH-I757M", // Galaxy S II
    "SGH-I727R", // Galaxy S II
    "SGH-I927", // Galaxy S II
    "SGH-T989D", // Galaxy S II
    "GT-I9108", // Galaxy S II
    "GT-I9100P", // Galaxy S II
    "ISW11SC", // Galaxy S II
    "SC-02C", // Galaxy S II
    "SHW-M250K", // Galaxy S II
    "SHW-M250L", // Galaxy S II
    "SHW-M250S", // Galaxy S II
    "SGH-I777", // Galaxy S II
    "SGH-I727", // Galaxy S II
    "SGH-I927", // Galaxy S II
    "SPH-D710", // Galaxy S II
    "SGH-T989", // Galaxy S II
    "SCH-R760", // Galaxy S II
    "GT-N7000", // Galaxy Note
    "SHV-E160K", // Galaxy Note
    "SHV-E160L", // Galaxy Note
    "SHV-E160S", // Galaxy Note
    "SGH-I717", // Galaxy Note
    "SC-05D", // Galaxy Note
    "SGH-T879", // Galaxy Note
    "GT-I9220", // Galaxy Note
    "GT-I9228", // Galaxy Note
    "SCH-I889", // Galaxy Note
    "SGH-I717", // Galaxy Note
};

static {
    Arrays.sort(LAUNCHER_ALTERNATIVE_EXCEPTIONS);
}

public static boolean isAlternativeMargins(Context context) {
    if (Build.VERSION.SDK_INT < 14)
        return false;

    PackageManager pm = context.getPackageManager();
    Intent i = new Intent(Intent.ACTION_MAIN);
    i.addCategory(Intent.CATEGORY_HOME);
    i.addCategory(Intent.CATEGORY_DEFAULT);

    ResolveInfo info = pm.resolveActivity(i, PackageManager.MATCH_DEFAULT_ONLY);

    if (
            info != null && info.activityInfo != null && 
            info.activityInfo.taskAffinity != null
    ) {
        int pos = Arrays.binarySearch(
                LAUNCHER_ALTERNATIVES, info.activityInfo.taskAffinity
        );

        // if TouchWiz
        if (pos >= 0) {
            // if >= Android 4.1.2 and (Galaxy S II or Galaxy Note) 
            if ( getSdk() >= 16 && Arrays.binarySearch(
                    LAUNCHER_ALTERNATIVE_EXCEPTIONS, Build.MODEL
            ) >= 0)
                return false;

            return true;
        }
    }
    return false;
} 
```

上面的代码检测默认启动器并返回 true，如果它是 TouchWiz。

**编辑：针对与 TouchWiz 存在相同问题的其他启动器进行了修改。**

**编辑 2：针对 Galaxy S II 和 Galaxy Note 上的 Android 4.1.2 进行了修改，其中小部件边距按预期工作。与搭载 Android 4.1.2 的 Galaxy S 3 相比，它们无法按预期工作，这可能会因三星未来的 TouchWiz 版本而改变。**

# ios - IOS如何更新UITableViewCell

> ID：13121010
> 
> 赞同：2
> 
> 时间：2012-10-29T11:46:00.080
> 
> 标签：ios, uitableview, uibutton, drawing

我制作了一个自定义 UITableViewCell：

```
 SListViewCell * cell = nil;
//    cell = [listView dequeueReusableCellWithIdentifier:CELL];
if (!cell) {
    cell = [[[SListViewCell alloc] initWithReuseIdentifier:CELL] autorelease];
}
listView.separatorColor = [UIColor clearColor];
cell.backgroundColor = [UIColor clearColor];
cell.selectionStyle = UITableViewCellSelectionStyleNone;
UIButton* btn = [UIButton buttonWithType:UIButtonTypeCustom];
btn.tag = index;
[btn setFrame:CGRectMake(0, 0, 42, 42)];
//setBtnImage will download image from network. when the UIButton click it is will change button image 
[self setBtnImage:index btn:btn];
[btn addTarget:self action:@selector(typeTapped:) forControlEvents:UIControlEventTouchUpInside];
[cell addSubview:btn];
return  cell; 
```

typeTapped 方法：

```
-(void)typeTapped:(id)sender
{
   UIButton* btn = (UIButton)sender;
   //download image from network in ohter thread and change button' image.
   NSThread * thread = [Thread alloc] initWith:@selecter(downloadImage:)....
   [thread start];
   [thread release];
}
//download image 
-(void)downloadImage:(UIButton*)btn....
{
  //download
  UIImage* image= ....
  //UITableView is not update
  //it is will update when i scroll tableview.
  [btn setImage:image ......];
} 
```

那么我如何在其他线程中更新 UITableViewCell 。（如果我调用 reloadDate 它将完全停止）（我可以滚动 tableview 来更新它）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T11:56:11.080

您可以在后台进行大部分处理，但任何更新 UI 的操作都必须在主线程上进行。

使用 Grand Central Dispatch (GCD) 可以轻松完成后台处理然后更新 UI。

```
- (void)typeTapped:(id)sender
{
    UIButton* btn = (UIButton*)sender;
    // Use Grand Central Dispatch to do the processing in the background.
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0), ^{
        // Do download operation here... Something like:
        NSData* imageData = [NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://some_url.com/some.image"]];
        UIImage* image = [UIImage imageWithData:imageData];

        //Go back to the main thread to update the UI. this is very important!
        dispatch_async(dispatch_get_main_queue(), ^{
            [btn setImage:image forState:UIControlStateNormal];
        });
    });
} 
```

然而。在表格视图中有几个问题。

表格单元格被重复使用。这意味着您的 UITableViewCell 中漂亮的 UIButton 可能不是您认为下载完成后的那个。它是同一个对象，但已重新配置为显示另一行的内容。

对于这些情况，最好的办法是使用 GCD 更新 NSArray 或其他数据结构，然后让表格视图刷新单元格。

// 在 UITableViewDelegate 中。

```
@implementation SomeViewController
{
  NSMutableArray* _tableData;
}

// ...

// Someone tapped on the cell.
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0), ^{
        // Do download operation here... Something like:
        NSData* imageData = [NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://some_url.com/some.image"]];
        UIImage* image = [UIImage imageWithData:imageData];
        if([_tableData count] < indexPath.row) {
            _tableData[indexPath.row] = image;
        }
        //Go back to the main thread to update the UI. this is very important!
        dispatch_async(dispatch_get_main_queue(), ^{
            [tableView reloadRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationAutomatic];
        });
    });

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T11:51:42.130

任何 UI 更新只能发生在主线程上。我认为您不应该在另一个线程中更新 UITableViewCell 。

来自苹果文档：

> 对应用程序用户界面的操作必须在主线程上进行。因此，您应该始终从应用程序主线程中运行的代码调用 UIView 类的方法。唯一可能不是绝对必要的情况是在创建视图对象本身时，但所有其他操作都应在主线程上进行。

# javascript - “this.callParent(arguments)”中的“arguments”变量来自哪里？

> ID：13121011
> 
> 赞同：3
> 
> 时间：2012-10-29T11:46:00.437
> 
> 标签：javascript, extjs4

在学习 ExtJS 4 时，我发现在定义一个新类时，在`initComponent`方法中可以使用`this.callParent(arguments)`.

我想知道这个`arguments`变量（我知道它可以是`args`或`a`也可以`arg`）是在哪里定义的，以及它的值是在哪里分配的。

例如，如果我将我的类定义如下：

```
Ext.define('shekhar.MyWindow', {

  extend : 'Ext.Window',
  title : 'This is title',

  initComponent : function() {
    this.items = [
      // whatever controls to be displayed in window
    ];

    // I have not defined argument variable anywhere
    // but still ExtJS will render this window properly without any error
    this.callParent(arguments);
  }

}); 
```

有谁知道这个`arguments`变量是在哪里定义的，以及如何为其分配值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-29T13:58:19.433

该`arguments`变量是 Javascript 中的一个特殊变量，可在任何函数中使用。它不是一个真正的数组，但它包含传递给函数的参数值，可以像数组元素一样访问（所以，`arguments[0]`第一个参数`arguments[1]`是，第二个，等等）。

查看Mozilla 开发人员网络上的[此页面](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments)以获取更多信息和示例。

# struts2 - Struts2文件上传最大大小

> ID：13121014
> 
> 赞同：9
> 
> 时间：2012-10-29T11:46:09.940
> 
> 标签：struts2

我需要上传最大 10 MB 的文件。我使用了以下内容。在我的 struts.xml 中，我配置如下。

```
<action name="doUpload" class="com.example.UploadAction">
<interceptor-ref name="fileUpload">
    <param name="maximumSize">20971520</param>
</interceptor-ref>
</action> 
```

我没有配置除此之外的任何其他地方。我收到以下错误。

**请求被拒绝，因为其大小 (2102840) 超过了配置的最大值 (2097152)**

任何人都可以建议我可能是什么原因。在此先感谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-29T12:02:32.480

把它放在你的 struts.xml 文件中

```
<constant name="struts.multipart.maxSize" value="30000000" /> 
```

请参阅[http://struts.apache.org/2.x/docs/file-upload.html#FileUpload-AdvancedConfiguration](http://struts.apache.org/2.x/docs/file-upload.html#FileUpload-AdvancedConfiguration)。

更新链接 - [https://cwiki.apache.org/confluence/display/WW/File+Upload](https://cwiki.apache.org/confluence/display/WW/File+Upload)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T12:07:41.693

还要检查您的容器配置。例如，Tomcat 本身有一个 maxPostSize 参数，如果未设置，则默认为 2097152 (2Mb)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-14T06:02:58.063

将此代码放在您的`strtus.xml:`

```
<constant name="struts.multipart.maxSize" value="50000000" /> 
```

其中 value 表示您的文件大小限制。如果您想扩展限制，您也可以更改该值。希望能帮助到你

# javascript - 如何获取浏览器“文档模式”

> ID：13121016
> 
> 赞同：11
> 
> 时间：2012-10-29T11:46:12.427
> 
> 标签：javascript, internet-explorer, httpbrowsercapabilities

我正在开发某种 JavaScript 库。我导致我有一些特定问题的问题：浏览器：IE8 / IE9 和文档模式：IE7 我找到了解决方案，但我不想在所有情况下都使用它，我只想在有的时候使用它上述情况。我知道我可以通过以下方式识别浏览器：

```
return navigator.userAgent.toLowerCase().indexOf('MSIE 8') > -1; 
```

但是我以这种方式只识别浏览器版本而不是文档模式，并且当我拥有浏览器模式 IE8 和文档模式 IE 8 时，我不想使用我的解决方案。有没有办法获得页面文档模式在 IE 中？提前致谢。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-05T21:15:40.413

您可以使用它`document.documentMode`来准确返回 IE 使用的文档模式。

这意味着如果您将浏览器模式设置为 IE9，但将文档模式设置为 IE8，它将返回 document.documentMode == 8（而 userAgent 字符串仍将显示为 IE9）。如果您的 JS 曾经包含样式更改，这将特别有用，因为它是决定 IE 如何呈现页面的文档模式，而不是浏览器模式。兼容模式实际上只是更改了文档模式（通常为 IE7）。

在我需要的少数情况下，我只是使用这样的东西来区分 IE：

```
if (document.documentMode == 7) {
    doSomethingIn.IE7_only;
} else {
    doSomething.everwhereElse;
} 
```

希望对一些人有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T12:22:07.633

我不知道如何检索文档模式^(**1**)，但以更基本的方式解决问题可能是明智的。假设您想`document.querySelector`在脚本中使用。这将在 IE8/文档模式 IE7 标准中失败。因此，对自身存在的额外检查`document.querySelector`将是解决方案：

```
return ~navigator.userAgent.toLowerCase().indexOf('MSIE 8') 
       && document.querySelector; //=> IE8 and Docmode IE7 => false 
```

^(**1**)找到了一种检查文档模式的方法：使用`document.documentMode`. 它返回一个整数（对于文档模式 IE7 标准来说是 7），对于`Quirks mode`. 它将`undefined`适用于非 IE 浏览器。

# vim - 如何在 Vim 中正确折叠 GNU C 风格的函数？

> ID：13121019
> 
> 赞同：15
> 
> 时间：2012-10-29T11:46:20.563
> 
> 标签：vim, folding

在编写 C 代码时，我混合使用[GNU](http://en.wikipedia.org/wiki/Indent_style#GNU_style)和[K&R](http://en.wikipedia.org/wiki/Indent_style#K.26R_style)风格。这意味着函数的返回值、每个参数和左花括号都在自己的行上。我也想使用 Vim 的折叠功能，但是使用`foldmethod=syntax`，折叠看起来像这样：

![折叠不良](../Images/a832ef8f49477d5807d083ac35784d2b.png)

是否可以在没有任何特殊折叠标记或 s 的情况下在折叠摘要中看到函数名称`foldexpr`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T04:09:59.683

可能是一个很好的折衷方案 - 如果您使用`indent`折叠 - 将`foldminlines`参数设置为更高的数字。

```
:set foldmethod=indent
:set foldminlines=5 
```

如果你的大部分函数都很长，它只会影响你的参数列表。缺点显然是，它还会自动展开小于 5 行长的小功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T23:13:48.433

试试这个作为起点（我在我的 vimrc 中有它，但我在网上找到了它）：

```
" Folding {
function! CssFoldText()
    let line = getline(v:foldstart)
    let nnum = nextnonblank(v:foldstart + 1)
    while nnum < v:foldend+1
        let line = line . " " . substitute(getline(nnum), "^ *", "", "g")
        let nnum = nnum + 1 
    endwhile
    return line
endfunction

setlocal foldtext=CssFoldText()
setlocal foldmethod=marker
setlocal foldmarker={,}
setlocal fillchars=fold:/
setlocal foldlevel=-1
"   highlight Folded term=underline cterm=bold gui=bold guifg=Blue guibg=Black
"   highlight FoldColumn term=underline cterm=bold gui=bold guifg=Blue guibg=Black
"} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-11T13:43:35.340

也可以通过语法折叠来做到这一点。您需要将以下内容添加到`~/.vim/after/syntax/c.vim`：

```
let s:contains = ''
if exists("c_curly_error")
  let s:contains = ' contains=ALLBUT,cBadBlock,cCurlyError,@cParenGroup,cErrInParen,cErrInBracket,@cStringGroup,@Spell'
endif

let s:pattern = '%('

if &ft ==# "cpp"
  " struct/class inheriting
  let s:pattern .= ''
        \ . '%(<struct|<class)@<='
        \ . '\s\ze\s*\S+[^:]:[^:]\s*\S+.*'
  let s:pattern .= '|'

  " Constructors
  let s:pattern .= ''
        \ . '%('
        \ .    '%([^,:]|\n|^|<%(public|private|protected)>\s*:)'
        \ .    '\n\s*'
        \ . ')@<='
        \ . '%(<%(while|for|if|switch|catch)>)@!'
        \ . '\S\ze\S*%(::\S+)*\s*\(.*\)\s*%(:.*)?'
  let s:pattern .= '|'
endif

let s:pattern .= '%(<%(while|for|if|switch|catch)\(.*)@<=\)\ze\s*' . '|'

let s:pattern .= ''
      \ . '%('
      \ .    '^\s*%(//.*|.*\*/|\{|<%(public|private|protected)>\s*:|.*\>)?'
      \ .    '\s*\n\s*\S+'
      \ . ')@<='
      \ . '\s\ze\s*\S+\s*'
      \ . '%(.*[^:]:[^:].*)@!'
      \ . '%(\s+\S+)*'

let s:pattern .= ')%(;\s*)@<!%(//.*|/\*.*\*/)?\n\s*'

syn clear cBlock
exec 'syn region cBlock_ end="}" fold' . s:contains
      \ . ' start = "\%#=1\C\v' . s:pattern . '\{"'
      \ . ' start = "\%#=1\C\v%(' . s:pattern . ')@<!\{"'

unlet s:contains s:pattern 
```

但请注意，如果文件很大，重新计算折叠可能会非常繁重。

# websphere - Jython 如何打印类路径

> ID：13121021
> 
> 赞同：2
> 
> 时间：2012-10-29T11:46:28.163
> 
> 标签：websphere, jython

我在 websphere 的 jython 中加载模块时遇到问题。.py 文件在一个罐子里，它本身就在一场战争中，而战争本身就在耳边。这些模块在未嵌入 websphere 时加载良好。

我猜我的 jython 路径不正确，所以我尝试使用`print sys.path`. 结果是：

```
['__classpath__', '__pyclasspath__/'] 
```

如何打印那些内置属性的内容？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-31T08:59:38.667

Don't know whether it is possible in "pure" Jython, but here's how to do it in Java:

```
from java.lang import ClassLoader
cl = ClassLoader.getSystemClassLoader()
paths = map(lambda url: url.getFile(), cl.getURLs())
print paths 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T20:24:12.737

甚至没有看到你的 Jython 代码片段我不能确定这是否能回答你的问题：

[http://www.jython.org/jythonbook/en/1.0/ModulesPackages.html#advanced-import-manipulation](http://www.jython.org/jythonbook/en/1.0/ModulesPackages.html#advanced-import-manipulation)

WebSphere 与古老版本的 Jython（10 年前发布的 v2.1）捆绑在一起这一事实肯定不会帮助您……

# python - TableView 单元代表（Qt.BackgroundRole）

> ID：13121025
> 
> 赞同：1
> 
> 时间：2012-10-29T11:46:56.357
> 
> 标签：python, pyqt, pyqt4

我正在努力让看似简单的代表工作。

我想要的是更改表格视图单元格的背景。据我了解，我应该看看 Qt.BackgroundRole。到目前为止，我还不能让它工作，或者找到一个相关的例子。

到目前为止，我所拥有的是一个用颜色填充单元格的代表，但它似乎在文本之上。我想要的是保留文本，并且只更改单元格的背景。

```
class CellBackgroundColor(QtGui.QStyledItemDelegate):

    def __init__(self, parent = None):
        QtGui.QStyledItemDelegate.__init__(self, parent)

    def paint(self, painter, option, index):       

        path = index.model().data(index,  QtCore.Qt.DisplayRole).toString()
        painter.fillRect(option.rect, QtGui.QColor(path)) 
```

关于如何在 tableview 委托中实现这个 Qt.BackgroundRole 的任何想法？

在此先感谢，克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T11:54:07.853

您不需要使用委托来绘制单元格背景；默认委托通过以下方式支持背景绘画`Qt.BackgroundRole`：

```
class MyTableModel(QtCore.QAbstractTableModel):
    ...
    def data(self, index, role=QtCore.Qt.DisplayRole):
        if role == QtCore.Qt.BackgroundRole:
            return QtGui.QColor(...) 
```

否则，使用任何适当的覆盖`initStyleOption`来初始化 和绘制它是一个好主意：`QStyleOptionViewItem`

```
class CellBackgroundColor(QtGui.QStyledItemDelegate):
    ...
    def paint(self, painter, option, index):
        self.initStyleOption(option, index)
        # override background
        option.backgroundBrush = QtGui.QColor(...)
        widget = option.widget
        style = widget.style()
        style.drawControl(QtGui.QStyle.CE_ItemViewItem, option, painter, widget) 
```

# python - 无法从控制台读取换行符 \n 字符

> ID：13121027
> 
> 赞同：1
> 
> 时间：2012-10-29T11:46:57.240
> 
> 标签：python, regex, linux

我需要从另一台 Linux 电脑读取文件，`cat`如下所示

```
conf = other_linux.execute('cat xxx.conf') 
```

conf 将包含 xxx.conf 的内容

```
peer 1 handler PEER_1
peer 2 handler PEER_2
peer 2 handler PEER_2
*************
---------------- 
```

我写了以下正则表达式来替换整个对等配置

```
re.sub('((peer\s\d\s\S+\s\S+\n)+)','</peer>',conf) 
```

`cat`如果我直接从文件中读取 conf，上面的正则表达式可以正常工作，但是当我使用命令读取它时它不起作用

请提供一些替代品，因为这无法读取换行符

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T11:57:18.863

你可以试试这个：

```
re.sub('((^peer\s\d\s\S+\s\S+$)+)','</peer>',conf, flags = re.MULTILINE) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T06:53:37.900

使用以下正则表达式来解决问题

```
((peer\s\d\s\S+\s\S+\r+\n+)+) 
```

# html - 如何消除 div 左右两侧的空白

> ID：13121030
> 
> 赞同：2
> 
> 时间：2012-10-29T11:47:10.597
> 
> 标签：html, css

如何消除 div 左右两侧的空白。

```
#foot_text {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 14px;
    width: 500px;
    margin: auto;
    padding-top:1px;
}

#foot_wrap {
    width:100%;
    height:60px;
    background-color:#999999;
    min-height:40px !important;
} 
```

html:

```
<div id="foot_wrap"></div>
<div id="foot_text"></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T11:51:47.100

**[现场演示](http://tinkerbin.com/pOIfDvr9)**

嗨，现在写这个 CSS

```
.foot_wrap, body{
margin:0;
} 
```

用于`css` **[重置](http://meyerweb.com/eric/tools/css/reset/)**您的布局

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T11:57:34.433

您的问题可能不在于 div，而在于 body 标签。因为我认为正文标签不会通过整页传播。使`margin`你的身体零。

> `<body style="margin:0px;">`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T12:01:11.373

如果`#foot_wrap`Division 是标签的子`body`标签，请确保您已将边距、填充设置`body`为 0

```
html, body {
   margin: 0;
   padding: 0;
} 
```

如果没有，请查看其父元素和上面的属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T11:50:46.173

请试试这个

```
padding-left:0px;
padding-right:0px;
margin-left:0px;
margin-right:0px; 
```

# iphone - MPMoviePlayer 控件样式

> ID：13121032
> 
> 赞同：2
> 
> 时间：2012-10-29T11:47:21.080
> 
> 标签：iphone, objective-c, mpmovieplayercontroller

我想使用以下代码隐藏 MPMoviePlayer 的控件：

```
-(IBAction)video:(id)sender {

NSBundle *bundle = [NSBundle mainBundle];
NSString *moviePath = [bundle pathForResource:@"Intro" ofType:@"mov"];
NSURL *movie = [NSURL fileURLWithPath:moviePath];

MPMoviePlayerController *control = [[MPMoviePlayerController alloc]initWithContentURL:movie];
//[self.view addSubview: control.view];

control.scalingMode = MPMovieScalingModeFill;
control.controlStyle = MPMovieControlStyleNone;
control.shouldAutoplay = YES;

[control play];

MPMoviePlayerViewController *movieplayer = [[MPMoviePlayerViewController alloc]initWithContentURL:movie];
[self presentMoviePlayerViewControllerAnimated:movieplayer];  } 
```

但这不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T13:10:46.707

你在重复代码。MPMoviePlayerViewController 有 MPMoviePlayerController。所以用它作为`movieplayervc.moviePlayer.controlStyle = MPMovieControlStyleNone;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T11:54:52.123

你试过这个吗 `[videoPlayerobj setControlStyle:MPMovieControlStyleNone];`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-05T18:15:13.180

我的播放器设置在 viewDidLoad 中，这一行隐藏了 MPMoviePlayerController。我已将我的 MPMoviePlayer 控制器初始化为 *stream。

```
stream.view.hidden = YES; 
```

希望这可以帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-30T07:10:52.950

您可以使用此代码播放视频和停止视频并从自定义视图中删除。并且`MPMoviePlayerController`是电影播放器​​。希望这对你有用。谢谢

```
 -(void)playMovie:(id)sender {

        UIButton *buttonThatWasPressed = (UIButton *)sender;
        buttonThatWasPressed.enabled = NO;
        NSString * str=[[NSBundle mainBundle]pathForResource:@"yo2" ofType:@"mov"];
        NSURL * url=[NSURL fileURLWithPath:str];
        MPMoviePlayerController * movieController=[[MPMoviePlayerController alloc]initWithContentURL:url];
        movieController.controlStyle=MPMovieControlStyleFullscreen;
        [movieController.view setFrame:self.view.bounds];
        [self.view addSubview:movieController.view];
        [movieController prepareToPlay];
        [movieController play];
        _moviePlayer =  [[MPMoviePlayerController alloc] initWithContentURL:url];
        [[NSNotificationCenter defaultCenter] addObserver:self
                                   selector:@selector(moviePlayBackDidFinish:)
                                   name:MPMoviePlayerPlaybackDidFinishNotification
                                   object:_moviePlayer];

       [[NSNotificationCenter defaultCenter] addObserver:self 
                                   selector:@selector(moviePlayBackDonePressed:)
                                   name:MPMoviePlayerDidExitFullscreenNotification 
                                   object:_moviePlayer];

       _moviePlayer.controlStyle = MPMovieControlStyleDefault;
       _moviePlayer.shouldAutoplay = YES;
       [self.view addSubview:_moviePlayer.view];
       [_moviePlayer setFullscreen:YES animated:YES]; } 
```

当您的视频或电影从用户停止或视频播放完成时调用此方法。

```
 -(void) moviePlayBackDonePressed:(NSNotification*)notification {
         [_moviePlayer stop];
         [[NSNotificationCenter defaultCenter] removeObserver:self name:MPMoviePlayerDidExitFullscreenNotification object:_moviePlayer]; 
         if ([_moviePlayer respondsToSelector:@selector(setFullscreen:animated:)])
         {
              [_moviePlayer.view removeFromSuperview];
         }
         _moviePlayer=nil;   
        [self dismissViewControllerAnimated:YES
                          completion:^{
                              [self   performSegueWithIdentifier:@"show" sender:self];
        }]; 
 }

 - (void) moviePlayBackDidFinish:(NSNotification*)notification {    // Remove observer
     [[NSNotificationCenter defaultCenter] removeObserver:self
                                                      name:MPMoviePlayerPlaybackDidFinishNotification
                                               object:nil];

   [self dismissViewControllerAnimated:YES
                          completion:^{
                              [self performSegueWithIdentifier:@"show" sender:self];
                          }];

} 
```

# rest - REST - 基本原则 - 在哪里放置新词和编辑词

> ID：13121035
> 
> 赞同：0
> 
> 时间：2012-10-29T11:47:54.033
> 
> 标签：rest

我想知道在哪里放置编辑，以及休息应用程序的新关键字。我将在项目中使用 express-resource，默认设置如下：

```
GET     /forums              ->  index
GET     /forums/new          ->  new
POST    /forums              ->  create
GET     /forums/:forum       ->  show
GET     /forums/:forum/edit  ->  edit
PUT     /forums/:forum       ->  update
DELETE  /forums/:forum       ->  destroy 
```

这个解决方案有一个问题：new 和 edit 背后没有真正的资源。我的意思是 URL-s 指的是资源，在任何斜线之后都是子资源。

例如：`http://my.example.com/users/1`表示：

```
var firstUser = {
   name: "John Smith",
   birthDate: new Date(1952,10,4),
   hobbies: ["skiing", "football"],
   ...
} 
```

并`http://my.example.com/users/1/birthDate`代表：

```
firstUser.birthDate 
```

但是`http://my.example.com/users/1/edit`没有这样的属性：

```
firstUser.edit 
```

所以这个概念有问题。

这些关键字的真正位置在哪里？在 queryString 或标题中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T12:51:38.143

从 REST API 的角度来看，它们不存在于任何地方，因为它们与资源的表示无关。它们是对资源的操作，因此由使用的 HTTP 方法表示。如果您要创建使用 API 的外部客户端，则不需要它们。

可能需要为这种类型的功能提供一些支持，以便可以呈现 UI 之类的东西，但这是特定应用程序的关注点，而不是 API 本身的关注点。到那时，它就变得随意了，但我肯定会避免使用标题，因为这完全超出了常规做法。但是通过标题，您似乎实际上是指 URI 路径。在这两个中，我会说路径是更好的选择，因为它清楚地将任何类型的 UI 定义为不同的资源，并将其与干净的 API 分开，而在 API 的一部分上使用查询字符串会更紧密（错误地）将其与基础资源相关联。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T12:59:59.250

一年左右的一些更新：

*   编辑和新建应该是超链接

    *   这些链接只是可能的操作调用的表示
    *   通过跟踪它们，可以通过发送预期资源状态的表示和/或通过调用适当的方法来操纵它们所属的资源
*   这些术语不是资源，它们没有自己的 URL（资源标识符）

感谢马特惠普尔的建议！

我认为学习 REST 的最佳方式是阅读[Fielding 论文](http://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm)。那里有很多教程，但其中大多数的作者并不真正了解 REST。

# matlab - 矩阵是否包含向量？

> ID：13121037
> 
> 赞同：2
> 
> 时间：2012-10-29T11:48:02.453
> 
> 标签：matlab

我正在寻找一种快速/简洁的方法来检查某个矩阵是否包含给定的向量，例如：

```
 bigMatrix = [1 1 1; 2 2 2; 4 4 4; 5 5 5];

 someFunction(bigMatrix, [1 1 1]) % = true
 someFunction(bigMatrix, [3 3 3]) % = false 
```

是否有这样的功能/运算符，或者我需要一个循环？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-29T11:51:37.523

我建议以下解决方案：

```
bigMatrix = [1 1 1; 2 2 2; 4 4 4; 5 5 5];
Vec = [2 2 2];
Index = ismember(bigMatrix, Vec, 'rows'); 
```

结果？

```
Index =

 0
 1
 0
 0 
```

`ismember`是一个非常有用的函数，它检查一个集合的元素是否在另一个集合中。在这里，我利用 rows 选项强制函数比较行，而不是单个元素。

**更新：**另一方面，做一些速度测试总是值得的！我只是将该`ismember`方法与以下替代方法进行了比较：

```
N = size(bigMatrix, 1);
Index2 = zeros(N, 1);
for n = 1:N
    if all(bigMatrix(n, :) == Vec)
        Index2(n) = 1;
    end
end 
```

我的发现？`bigMatrix`事情的大小！特别是，如果`bigMatrix`它偏小（有点用词不当），那么循环要快得多。只有当`bigMatrix`变大时，第一种方法才更可取。此外，结果还取决于有多少列`bigMatrix`以及行！我建议您为您的应用程序测试这两种方法，然后选择更快的方法。（**编辑**：这是在 R2011a 上）

**一般说明：**在过去几年中，Matlab 的循环速度变得如此之快，令我不断感到惊讶。Methinks 矢量化代码不再是曾经的圣杯。

# javascript - 如何生成动态文本字段？

> ID：13121038
> 
> 赞同：-4
> 
> 时间：2012-10-29T11:48:09.330
> 
> 标签：javascript, html

当我们按下按钮时如何生成动态文本字段

```
<script>
   functiom click() {
   }
</script>
<body>
   <form name="s">
      <input type="submit" onclick="click()"/>
   </form>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T11:52:02.870

如果您的意思是动态添加文本字段，那么您可以使用以下内容：

```
<script>
  functiom click()
{
var field = document.createElement("input");
field.type = "text";
document.getElementById("myForm").appendChild(field);
 }
</script>
<body>
<form name="s" id="myForm">
<input type="submit" onclick="click()"/>
</form> 
```

但我仍然建议先阅读 Javascript 书籍。

# javascript - 多个 JSON 解析

> ID：13121042
> 
> 赞同：0
> 
> 时间：2012-10-29T11:48:28.487
> 
> 标签：javascript, jquery, json, jsonp, blackberry-webworks

我有这样的 JSON 数据：

```
{
"output_type": "json",
"round_trip": false,
"search_queries": {
    "from": "AMQ",
    "to": "CGK",
    "date": "2013-01-03",
    "ret_date": "",
    "adult": 1,
    "child": 0,
    "infant": 0
},
"go_det": {
    "dep_airport": {
        "airport_code": "AMQ",
        "international": "0",
        "trans_name_id": "7564",
        "business_name": "PATTIMURA",
        "business_name_trans_id": "5923",
        "business_id": "20349",
        "country_name": "Indonesia ",
        "city_name": "Ambon",
        "province_name": "Maluku",
        "location_name": "Ambon"
    },
    "arr_airport": {
        "airport_code": "CGK",
        "international": "1",
        "trans_name_id": "7574",
        "business_name": "Soekarno-Hatta",
        "business_name_trans_id": "5935",
        "business_id": "20361",
        "country_name": "Indonesia ",
        "city_name": "Jakarta Barat",
        "province_name": "DKI Jakarta",
        "location_name": "Jakarta"
    },
    "date": "2013-01-03",
    "formatted_date": "03 Januari 2013"
},
"diagnostic": {
    "status": 200,
    "elapsetime": "1.9305",
    "memoryusage": "12.14MB",
    "confirm": "success",
    "lang": "id",
    "currency": "IDR"
},
"departures": {
    "result": [
        {
            "flight_id": "605783",
            "airlines_name": "BATAVIA",
            "flight_number": "Y6-852",
            "price_value": "1566900.00",
            "timestamp": "2012-10-25 08:51:48",
            "price_adult": "1566900.00",
            "price_child": "0.00",
            "price_infant": "0.00",
            "simple_departure_time": "06:55",
            "simple_arrival_time": "08:10",
            "stop": "Langsung",
            "long_via": "",
            "duration": "3 j 15 m",
            "image": "https://www.master18.tiket.com/images/icon_batavia.jpg"
        },
        {
            "flight_id": "605786",
            "airlines_name": "LION",
            "flight_number": "JT-1791",
            "price_value": "1391000.00",
            "timestamp": "2012-10-25 08:51:42",
            "price_adult": "1391000.00",
            "price_child": "0.00",
            "price_infant": "0.00",
            "simple_departure_time": "08:00",
            "simple_arrival_time": "10:35",
            "stop": "1 Transit",
            "long_via": "",
            "duration": "4 j 35 m",
            "image": "https://www.master18.tiket.com/images/icon_lion.jpg"
           }
       ]
    },
 } 
```

我尝试过像这里这样的举动：

[样品 1](https://stackoverflow.com/questions/6886935/parsing-json-with-javascript)

[样品 2](https://stackoverflow.com/questions/1650090/javascript-multi-level-array-of-json-objects-how-to-access-key-value-pair-in-s)

但是还没有找到结果。

我之前的代码是这样的：

```
var success = function(response) {
      for ( var i = 0; i < response.go_det.length; ++i ) {

      strKotaAwal   = response[i].go_det.dep_airport.airport_code;
      strKotaTujuan = response[i].go_det.arr_airport.airport_code;

  }; 
```

我想提取另一个数据，例如：

```
[flight_id] => 605783
[airlines_name] => BATAVIA
[flight_number] => Y6-852
[price_value] => 1566900.00
[simple_departure_time] => 06:55
[simple_arrival_time] => 08:10
[duration] => 3 j 15 m
[image] => https://www.master18.tiket.com/images/icon_batavia.jpg 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T11:54:46.710

如果您使用的是 jQuery，则可以使用`parseJSON`采用格式良好的 JSON 字符串并返回结果 JavaScript 对象的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T12:10:08.007

我会详细说明 rkm 的答案：

只要`response`是 javascript 对象而不是 JSON 字符串，您就可以使用该`$.each()`方法迭代结果。否则使用上述`$.parseJSON()`方法。

```
$.each(response.go_det, function(i, val){
    console.log(val);
}); 
```

由于您的响应包含对象和字符串属性，您可能希望将它们分开，并使用一些嵌套循环，以防您想要“进一步向下”访问每个对象的属性：

```
$.each(response.go_det, function(i, val){
    if(typeof(val) === 'string'){
        console.log(val);
    } else if (typeof(val) === 'object'){
         $.each(val, function(i2, val2){
             console.log(val2); //etc...
         });
    }
}); 
```

因此，例如，如果您想要每个 flight_id，您可以执行以下操作：

```
$.each(object.departures.result, function(i, val){
    console.log(val.flight_id);
}); 
```

# javascript - 链接到 index.html Javascript/Phonegap

> ID：13121043
> 
> 赞同：0
> 
> 时间：2012-10-29T11:48:30.233
> 
> 标签：javascript, xcode, cordova

我确实使用[http://zsprawl.com/iOS/2012/05/navigation-bar-with-nativecontrols-in-cordova/](http://zsprawl.com/iOS/2012/05/navigation-bar-with-nativecontrols-in-cordova/)以及最新版本的 Cordova 和 Xcode。我在Javascript中找到了该函数，请看下。

如何链接 index.html？

```
function onLeftNavButton() {
    window.location("index.html");
} 
```

`window.location("file://www/index.html");`, `window.location("file://index.html");` `window.location("./index.html")`; 也不工作，如果我`window.loction.href`也不工作。

如果我这样做，`alert("123");`它工作正常！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T12:15:44.127

我觉得是这样的

```
windows.location.href = "index.html"; 
```

干杯。

# centering - 使用javascript居中地图

> ID：13121050
> 
> 赞同：0
> 
> 时间：2012-10-29T11:48:53.163
> 
> 标签：centering, overscroll

我有一个网站，我在其中使用一些 javascript 来“滚动”地图。这很好用，只是我无法让地图以页面加载为中心。

我需要的是居中

我在 Github 上使用的脚本称为 overscroll： [https ://github.com/azoff/Overscroll/blob/master/jquery.overscroll.js](https://github.com/azoff/Overscroll/blob/master/jquery.overscroll.js)

在第 582 行，我认为需要更改：

```
 position: 'absolute',
    opacity: options.persistThumbs ? settings.thumbOpacity : 0,
    'background-color': 'black',
    width: size.width + 'px',
    height: size.height + 'px',
    'border-radius': size.corner + 'px',
    'margin': size.top + 'px 0 0 ' + size.left + 'px',
    'z-index': options.zIndex 
```

（只需要左居中）。

所以我认为：'margin': size.top + 'px 0 0' + size.left + 'px',

需要类似于：'margin': size.top + 'px 0 0' + size.left + 'px': 2 - half size.left ??

我希望有人可以帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T13:29:48.017

如何获取客户端的屏幕宽度并进行正确的计算？

```
'margin': size.top + 'px 0 0 ' + (screen.width - size.width) / 2 + 'px', 
```

或许？

# c - 统计收集程序中的舍入误差 (C)

> ID：13121052
> 
> 赞同：2
> 
> 时间：2012-10-29T11:48:57.110
> 
> 标签：c, bash, histogram

我写了一个计算 1000000 的程序！使用 FFT。

（请允许我简短一点，省略一些理论上的共鸣:)）

我想要做的是测量双精度值和`round()`-ed 值（使用`math.h`函数）之间的所有舍入误差，以检查该错误的行为方式（以及是否高于 1/2）。

我这样做是通过打印每次舍入之间的差异，`a`并将`round(a)`结果写入文件，让我们调用它`diffs.txt`，即`~532Mb`使用

`fprintf(my_file,"%e\n",a-round(a));`

我现在需要计算该文件中出现的每个值的出现次数。

我这样做是通过在我看来是一种复杂的方式，使用`grep`和`sort`bash`for`如下：

```
./compute-rounding-err #It creates diffs.txt
sort -u diffs.txt -o diff-sorted-unique
for i in `cat diff-sorted-unique`
do
 grep -e "$i" | wc -l >> diff-counted
done 
```

结果是两个文件。如果我配对我获得的文件

```
diff-sorted-unique:     diff_counted:
-9.013892e-20           1           
...                     ...
0.000000e0              200
...                     ...
9.930234e               1 
```

我可以获取这些值并从中制作直方图。

我担心在带有`~532Mb`文件的笔记本电脑上这样做会花费很长时间。

有谁知道如何加快速度？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T12:16:49.207

假设您使用 11-12 个字符编写每个 8 字节双精度，那么您需要的总内存应该在 ~450MB 左右，这意味着您拥有的项目数应该在 50,000,000 左右。

对 5000 万个值进行排序应该不会花费很长时间。需要很长时间的是您的`for`循环，您可以在其中扫描每个项目的整个文件。

一种更有效的方法是对文件进行排序，但保留重复的值。然后，您只需要遍历文件，将相似的值（或相等的值，基于直方图的精度）分组并用值计数对替换它们。

例如，如果您有以下文件：

```
1
0.6
-2
0
-1
-0.6
0
0
3 
```

排序后你会得到：

```
-2
-1
-0.6
0
0
0
0.6
1
3 
```

如果你遵循这个算法：

```
current_bucket = first value in file, floored to histogram_precision
bucket_count = 0
for all values v
    ; write current bucket + additional empty buckets
    while v > current_bucket + histogram_precision
        output   current_bucket   bucket_count
        current_bucket += histogram precision
        bucket_count = 0
    ; add v to current_bucket
    bucket_count += 1 
```

`histogram_precision`例如，给定为 1，您将获得：

```
-2       1
-1       2
0        4
1        1
2        0
3        1 
```

其中每行`num count`显示范围内的值 ( `count`)的数量`[num, num+histogram_precision)`。

您可能希望使用`[0.5, 1.5)`例如而不是 的存储桶`[1 2)`，在这种情况下，您应该只调整计算初始存储桶的第一行，或者将`while`循环的条件更改为`v > current_bucket + histogram_precision / 2`。

# iphone - 谁能告诉错误以下是什么以及如何解决这个问题（文件是通用的（3 片）但不包含 armv7s 片）？

> ID：13121057
> 
> 赞同：1
> 
> 时间：2012-10-29T11:49:19.300
> 
> 标签：iphone, ios, xcode, build

我正在尝试使用 iOS 6 (iPhone 4) 调试设备，但出现错误。下面是它的完整日志。谁能解释一下？谢谢

```
Ld /Users/xyz/Desktop/app-ebcjtnqmxrkylhalerydbplwewus/Build/Intermediates/app.build/Debug-iphoneos/app.build/Objects-normal/armv7s/app normal armv7s
    cd "/Users/folder/Desktop/4.0 app 1010"
    setenv IPHONEOS_DEPLOYMENT_TARGET 4.0
    setenv PATH "/Volumes/Xcode 1/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Volumes/Xcode 1/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    "/Volumes/Xcode 1/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang" -arch armv7s -isysroot "/Volumes/Xcode 1/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk" -L/Users/folder/Desktop/app-ebcjtnqmxrkylhalerydbplwewus/Build/Products/Debug-iphoneos "-L/Users/folder/Desktop/4.0 app 1010/Twitter+OAuth/SAOAuthTwitterEngine" -F/Users/folder/Desktop/app-ebcjtnqmxrkylhalerydbplwewus/Build/Products/Debug-iphoneos "-F/Users/folder/Desktop/4.0 app 1010" -filelist /Users/folder/Desktop/app-ebcjtnqmxrkylhalerydbplwewus/Build/Intermediates/app.build/Debug-iphoneos/app.build/Objects-normal/armv7s/app.LinkFileList -dead_strip -ObjC -all_load -fobjc-link-runtime -miphoneos-version-min=4.0 -framework EventKit -framework MobileCoreServices -framework CFNetwork -framework MessageUI -framework MapKit -framework CoreData -framework CoreLocation -framework AVFoundation -framework AudioToolbox -framework Foundation -framework UIKit -framework BugSense-iOS -framework CoreGraphics -framework MediaPlayer -framework SystemConfiguration -lz.1.1.3 -lxml2 -weak-lSystem -lsqlite3 -o /Users/folder/Desktop/app-ebcjtnqmxrkylhalerydbplwewus/Build/Intermediates/app.build/Debug-iphoneos/app.build/Objects-normal/armv7s/app

ld: warning: directory not found for option '-L/Users/folder/Desktop/4.0 app 1010/Twitter+OAuth/SAOAuthTwitterEngine'
ld: file is universal (3 slices) but does not contain a(n) armv7s slice: /Users/folder/Desktop/4.0 app 1010/BugSense-iOS.framework/BugSense-iOS for architecture armv7s
clang: error: linker command failed with exit code 1 (use -v to see invocation)

(null): Directory not found for option '-L/Users/folder/Desktop/4.0 app 1010/Twitter+OAuth/SAOAuthTwitterEngine'

(null): File is universal (3 slices) but does not contain a(n) armv7s slice: /Users/folder/Desktop/4.0 app 1010/BugSense-iOS.framework/BugSense-iOS for architecture armv7s

(null): Linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T13:33:29.540

看起来您正在使用尚未针对 iPhone 5 中使用的 armv7s（注意“s”）优化的第三方库“bugsense”。您需要获取更新的 bugsense SDK 或从“架构”中删除 armv7s在您的项目“构建设置”中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T13:51:23.437

“文件是通用的（3 片），但不包含（n）个 armv7s 片：”它实际上说明了问题所在。BugSense 框架不是使用 armv7s 作为受支持的架构构建的。错误中提到的 3 个切片很可能是 armv6、armv7 和 i386（模拟器）。

当您构建应用程序或静态库时，您必须设置要支持的架构，请参阅构建设置 -> 架构。这和 iPhone 的处理器有关，iPhone 3G 和更低的 iPhone 有 ARM6 处理器，iPhone 3GS 到 4S 有 ARM7，现在 iPhone5 有 ARM7s。从 Xcode 4.5 开始，对 armv6 的支持已经下降，并且 armv7s 默认添加到构建设置架构中。

所以基本上，您的项目支持 armv7s，而您尝试使用的库不支持。联系该库的开发人员并要求添加对 armv7s 的支持，或者如果您可以自己构建库，请将 armv7s 添加到构建设置中的架构列表并重新构建。或者您也可以设置“仅构建活动架构”进行调试。

# asp.net - LINQ to Entities 无法识别方法 'System.String ToString()' 方法，并且此方法无法转换为存储表达式

> ID：13121059
> 
> 赞同：0
> 
> 时间：2012-10-29T11:49:30.357
> 
> 标签：asp.net, linq-to-entities, asp.net-mvc-4

LINQ to Entities 无法识别方法“System.String ToString()”方法，并且该方法无法转换为存储表达式。

```
 public ActionResult PopulateFromDB(string sidx, string sord, int page, int rows)
    {
        var context = new NerdDinnerEntities();
        var jsonData = new
        {
            total = 1,
            page = page,
            sord =sord,
            records = context.Authors.Count(),
            rows = (from n in context.Authors
                    select new
                    { AuthorId = n.AuthorId ,
                        cell = new string[] { n.AuthorId.ToString(), n.Name.ToString(), n.Location.ToString() }
                    }).ToList()
        };
        return Json(jsonData, JsonRequestBehavior.AllowGet);
    } 
```

我正在写 ToList 或 Toarray 是否不起作用，错误来了：

```
 public ActionResult PopulateFromDB(string sidx, string sord, int page, int rows)
    {
        var context = new NerdDinnerEntities();
        var jsonData = new
        {
            total = 1,
            page = page,
            sord =sord,
            records = context.Authors.Count(),
            rows = (from n in context.Authors
                    select new
                    { AuthorId = n.AuthorId ,
                        cell = new string[] { n.AuthorId.ToString(), n.Name.ToString(), n.Location.ToString() }
                    }).ToList()
        };
        return Json(jsonData,JsonRequestBehavior.AllowGet); 
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T12:40:39.917

您应该尝试[使用 SqlFunctions.StringConvert](http://msdn.microsoft.com/en-us/library/dd466166.aspx)进行转换，int 没有重载，因此您应该将数字转换为双精度或小数。

```
public ActionResult PopulateFromDB(string sidx, string sord, int page, int rows)
{
    var context = new NerdDinnerEntities();
    var jsonData = new
    {
        total = 1,
        page = page,
        sord =sord,
        records = context.Authors.Count(),
        rows = (from n in context.Authors
                select new
                { AuthorId = n.AuthorId ,
                  cell = new string[] { SqlFunctions.StringConvert((double)n.AuthorId), n.Name, n.Location }
                }).ToList()
    };
    return Json(jsonData,JsonRequestBehavior.AllowGet); 
} 
```

您没有使用 LinqToSql 类，如果您使用的是您的代码应该可以工作，但是当您提到您正在使用 LinqToEntity 时，您应该使用它`SqlFunctions.StringConvert`来转换为字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T12:48:34.827

从您的代码中，我假设您`cell`在客户端添加了一个用于显示/存储目的的自定义属性。我会避免这种情况，因为您基本上将 API 调用耦合到一个特定的客户端。我建议您只需返回所需的数据并在客户端专门处理它，例如

**服务器**

```
...
select new
{
    Id = n.AuthorId,
    Name = n.Name,
    Location = n.Location
}).ToList();
... 
```

**客户**

```
var response = ...
foreach (var author in response)
{
    var cell = new string[] { author.Id.ToString(), author.Name, author.Location };
    // do something with cell
} 
```

# c# - 使用 Telnet 和 C# 连接到 Teamspeak

> ID：13121060
> 
> 赞同：1
> 
> 时间：2012-10-29T11:49:34.713
> 
> 标签：c#, telnet, tcpclient

我想通过 Telnet 和 C# 连接到本地 Teamspeak 接口。我目前不知道如何实现它。我正在使用 TcpClient 但我只能发送一个命令并且我只能得到一个答案，我怎样才能发送尽可能多的信息？

任何想法都会有所帮助！

# google-app-engine - 确切的数据存储（和 memcache）实体大小限制是多少，它是如何计算的？

> ID：13121062
> 
> 赞同：1
> 
> 时间：2012-10-29T11:49:55.820
> 
> 标签：google-app-engine

[根据文档](https://developers.google.com/appengine/docs/python/ndb/overview#quotas)，限制是**1MB**，我认为这意味着字节，但显然不是。`1024**2`

我有一个简单的函数，它将大型 python 对象字符串化为 JSON，将 JSON 字符串拆分为更小的块，并将块（作为 BlobProperty）和一个单独的索引实体放入数据存储区（和 memcache，使用 ndb）。还有另一个功能可以扭转这种情况。

首先，我尝试拆分成`1024**2`块，但数据存储区抱怨它。目前我正在使用`1000**2`它，它没有错误地工作。如果不是 Guido 的[评论](https://stackoverflow.com/a/9143912/479870)，我可以在这里回答我自己的问题，代码分成 950000 字节块。如果 Guido 这样做，那一定是出于我想的原因。为什么有 50K 的安全边际？

也许我们可以得到一个明确的答案，不浪费一个字节。我知道 Blobstore。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T16:55:29.243

限制为 1MB - 即 2 ^(20)个字节 - 但该限制适用于实体的编码版本，其中包括所有元数据和编码开销。

一种选择是留下一些回旋余地，就像你正在做的那样。另一个是捕获错误并在必要时细分块。

但是，如果您不得不像这样拆分数据，那么 Blobstore 可能比数据存储更适合您的数据。

# ruby - 在重新加载时避免递归别名

> ID：13121064
> 
> 赞同：1
> 
> 时间：2012-10-29T11:50:20.060
> 
> 标签：ruby, alias, reload

有时，我们使用这样的方法用修改过的方法替换方法`alias`：

```
alias old_foo :foo
private :old_foo
def foo
  ...
  old_foo
  ...
end 
```

如果确保此类文件只加载一次是可以的，但在某些情况下，可能会发生此类文件被多次加载的情况。在这种情况下，普通的方法定义是可以的：它们将被相同的东西覆盖。而且，变量也可以（尽管它们可能会发出警告消息）。但是对于别名，这种情况会导致巨大的混乱和无限循环。在上述情况下进行别名的最安全方法是什么，以便在多次加载文件时不会弄乱？

# java - Android水平文本滚动 - 自动和手势

> ID：13121065
> 
> 赞同：0
> 
> 时间：2012-10-29T11:50:19.690
> 
> 标签：java, android

我对 Android 编程比较陌生，我需要一个可以自动保存文本和滚动的控件。现在，我知道 TextView 控件中的“选框”，它可以正常工作，但这种方法有两个问题。

1）我需要滚动文本不管它的长度，即如果文本只是“你好”，并且控件设置为匹配父宽度，它需要滚动。

2）控件需要响应用户滚动 - 通过向左/向右轻弹/拖动它，文本也应该滚动。

自然地，当文本“消失”到左侧时，它应该重新出现在右侧并继续滚动。现在，它应该是单行文本。

是否存在类似的东西，如果不存在，实施它的最佳方法指南是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T13:13:36.073

我最终扩展了默认的 TextView，并从[TextView 源](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/android/widget/TextView.java#TextView.Marquee)中提取了 Marquee 类。从那里可以很容易地修改 Marquee 类，以便它在需要时启动/停止，并且不再需要选择 TextView（如果需要的话）。

为了实现手势滑动，基类实现[了 OnGestureListener](http://developer.android.com/reference/android/view/GestureDetector.OnGestureListener.html)并在`onScroll(...)`我更新了 Marquee 类中的偏移量，因此当下次绘制 View 时，它会应用新的滚动偏移量。

最后，要实际滚动所需的数量，在构造函数中设置自定义滚动条，并在 onDraw 中应用滚动条。

代码的重要部分：

```
public class MarqueeTextView extends TextView implements OnGestureListener {

    private GestureDetector gestureDetector;
    private Marquee marquee;
    private Scroller scroller;

    // constructor
    public MarqueeTextView(Context context, AttributeSet attrs) {
        this.marquee = new Marquee(this);
        this.scroller = new Scroller(context);
        this.setScroller(scroller);
        gestureDetector = new GestureDetector(getContext(), this);
        // when enabled, longpress disables further movement tracking
        gestureDetector.setIsLongpressEnabled(false);
    }

    public boolean onScroll(MotionEvent e1, MotionEvent e2,
                            float distanceX, float distanceY) {
        marquee.addToScroll(distanceX);
        return false;
    }

    // onDraw
    protected void onDraw(Canvas canvas) {
        scroller.setFinalX((int) marquee.mScroll);
        super.onDraw(canvas);
    }

    // Marquee handler
    private static final class Marquee extends Handler {
        // mostly the same as original
        // ...

        float mScroll;

        public void addToScroll(float amount) {
            mScroll += amount;
            // detect if needs to start over
        }
    }
} 
```

# javascript - 使用 Javascript 的异步 for 循环

> ID：13121067
> 
> 赞同：2
> 
> 时间：2012-10-29T11:50:28.727
> 
> 标签：javascript

我有这段代码需要转换为异步循环，因为显然这段代码 for-loop 会阻塞 UI/浏览器：

```
 $wnd.mainbuff = [];
    $wnd.update = setInterval(function(){
            // fetches everything in the buffer (csv), including old data
            var temp = $wnd.Recorder.audioData().toString();
            var arr = temp.split(',');
            // so, copy new elements only (must be async) 
            for (var i=$wnd.mainbuff.length; i < arr.length; i++) {
                console.log(arr[i]);
                $wnd.mainbuff[i] = arr[i];  
            }
        }
    ,25) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T12:13:51.683

将您的循环变成等效的递归函数。`setTimeout`然后在调用自身时会很容易使用。

```
$wnd.mainbuff = [];
$wmd.curTimerId = null;
$wnd.update = function() {
    var start = Date.now();
    // fetches everything in the buffer (csv), including old data
    //                             doesn't sound good ^^^^^^^^
    var temp = $wnd.Recorder.audioData().toString();
    var arr = temp.split(',');
    // so, copy new elements only
    function processOne(i, callback) {
        if (i < arr.length) {
            console.log(arr[i]);
            $wnd.mainbuff[i] = arr[i];
            setTimeout(function(){processOne(i+1, callback);}, 0);
        } else
            callback();
    }
    processOne($wnd.mainbuff.length, function() {
        setTimeout($wnd.update, 25- (Date.now()-start));
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T12:05:44.117

尝试这个：

```
$wnd.mainbuff = [];
function async(arr, wnd, currentIndex) {
    console.log(arr[currentIndex]);
    wnd.mainbuff[currentIndexi] = arr[currentIndexi];
}
$wnd.update = setInterval(function(){
        // fetches everything in the buffer (csv), including old data
        var temp = $wnd.Recorder.audioData().toString();
        var arr = temp.split(',');
        // so, copy new elements only (must be async)
        for (var i=$wnd.mainbuff.length; i < arr.length; i++) {
            async(arr, $wnd, i);
        }
    }
,25) 
```

# php - PHP：中断循环然后继续？

> ID：13121076
> 
> 赞同：1
> 
> 时间：2012-10-29T11:51:02.060
> 
> 标签：php, html, wordpress

我的 WordPress 帖子循环有问题。我想分解帖子循环，在帖子中添加一些 HTML div 标签。例如，我试图`.wrap`在第一次发布后在帖子周围添加一个 div。因为它是为了包装帖子，所以它应该只有一次。

问题是`.wrap`div 由于循环而被重复。如何打破循环，`.wrap`只添加一次 div 然后继续循环？

这是我的代码：

```
while ($wp_query->have_posts()) :

    $wp_query->the_post(); 
    if($wp_query->current_post <= 1){ ?>
        <div class="x">
        .. post 1
        </div>
    <?php }
    if($wp_query->current_post > 1){ ?>
        <div class="wrap"> <!-- should be only once -->
            <div class="y">
            .. post 2
            </div>

            <div class="y">
            .. post 3
            </div>
        </div><!-- should be only once -->
    <?php } ?>

endwhile; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T12:14:47.067

尝试这个

```
<?php
while ($wp_query->have_posts()) :
    $wp_query->the_post(); 
    if($wp_query->current_post <= 1){ ?>
        <div class="x">
        .. post 1
        </div>
        <div class="wrap"> <!-- should be only once -->
    <?php 
    $is_wrapped = 1;
    }
    if($wp_query->current_post > 1){ ?>
        <div class="y">
          .. post 2, then post 3, ...
        </div>
    <?php } 
endwhile;?>
<?php if (!empty($is_wrapped)){ ?>
        </div><!-- should be only once -->
<?php } ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T11:54:29.643

您可以只使用迭代器索引，如下所示：

```
$i = 0;
while (...) {
    if ($i == 1) {
       // actions you need to do only once
    }

    ...
    $i++
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T11:55:06.543

```
<div class="x">

while ($wp_query->have_posts()) :
    $wp_query->the_post();
    <--print post-->
    if($wp_query->current_post <= 1){
        </div><div class="y">
    }
endwhile;

</div> 
```

`<div class="x" />`如果没有帖子，您将获得一个空白，如果`<div class="y" />`只有一个帖子，您将获得一个空白。但在你的情况下这可能是可行的......

* * *

编辑：示例

```
<?php
$wp_query = new WPDummy; 

echo '<div class="x">';    
while ($wp_query->have_posts()) :
    $wp_query->the_post();
    $wp_query->the_content();
    if($wp_query->current_post <= 1){
        echo '</div>', "\n",'<div class="y">';
    }
endwhile;
echo '</div>';

// boilerplate
class WPDummy {
    public $current = null;
    public $current_post = 0;
    public function __construct() {
        $this->posts = array( array('content'=>'A'),array('content'=>'B'),array('content'=>'C'),array('content'=>'D') );
    }

    public function have_posts() {
        return false!=current($this->posts);
    }

    public function the_post() {
        $this->current_post+=1;
        $this->current = current($this->posts);
        next($this->posts);
    }

    public function the_content() {
        echo '<span class="content">', $this->current['content'], '</span>';
    }
} 
```

印刷

```
<div class="x"><span class="content">A</span></div>
<div class="y"><span class="content">B</span><span class="content">C</span><span class="content">D</span></div> 
```

# java - 继续在 Java 中运行小程序，如何？

> ID：13121078
> 
> 赞同：0
> 
> 时间：2012-10-29T11:51:13.600
> 
> 标签：java, applet

我在让我在 java 中创建的小程序连续运行时遇到了一些问题，它在它运行时结束，我希望它回到开始。

这是我的第一个小程序，所以我有点自豪 ;) jk。它是一个简单的“你叫什么名字？” 和“你好”+名字；但是在这里完成了，我按下了小确定按钮，这一切都结束了我的悲伤。我只是想让它再次成为我的名字：/

如果有人可以将我重定向到我需要阅读的内容以获取我所缺少的内容，我会非常高兴。

谢谢！！

# c# - vs2012单元测试框架中的测试行为

> ID：13121079
> 
> 赞同：0
> 
> 时间：2012-10-29T11:51:17.407
> 
> 标签：c#, unit-testing, visual-studio-2012, stub

下面是我的测试：

```
 [TestMethod]
    public void GetSubscribers()
    {

        stubSubscriptionMng.GetModelSubscribersInt32String = (mgr, i) => new List<IModel>() { modelStub };
        var dispatcher = UnitySingleton.Instance.UnityContainer.Resolve<Dispatcher>();
        IDispatchingMessage message = new DispatchingMessage(Guid.NewGuid().ToString(), "MessageName", "MessageVal", 1);
        dispatcher.Publish(message);

    } 
```

这是正在测试的方法：

```
 if (message.UniverseId > 0 && !string.IsNullOrEmpty(message.EntityId) && !string.IsNullOrWhiteSpace(message.MessageName))
            {
                //the modelMgr will forword the the relevant Data to the relevant Models
                IList<IModel> models = subscriptionService.GetModelSubscribers(message.UniverseId, message.MessageName);
                Parallel.ForEach(models, (model) =>
                {
                    try
                    {
                        model.Update(message);
                    }
                    catch (Exception ex)
                    {
                        ResourceManager.Instance.Logger.LogException(ex);
                    }
                });
            } 
```

`void Update()`使用该方法调用每个模型。有没有办法验证这种行为？验证方法是否被调用？相当于`Expect()`和`verifyAllExpectations()`在[Rhino 模拟](http://ayende.com/wiki/Rhino%20Mocks%203.5.ashx?AspxAutoDetectCookieSupport=1)中的东西？

* * *

[我在以下帖子](https://stackoverflow.com/questions/10390422/how-can-i-verify-that-a-microsoft-fakes-beta-stub-shim-was-called-like-assert)中找到了解决方法。

# ruby-on-rails - 从 Michael Hartl 的 Rails 教程中请求规范失败

> ID：13121080
> 
> 赞同：1
> 
> 时间：2012-10-29T11:51:19.413
> 
> 标签：ruby-on-rails, rspec

我有一个失败的请求规范，即使它应该通过。规范正在寻找的所有内容都出现在应用程序的源代码 ( HTML ) 中。据我所知，这些测试应该通过了。我将按顺序列出：

*   考试
*   测试中使用的 helper 辅助方法 full_title
*   haml中的相关视图模板
*   主页或根路由的 HTML 输出
*   Rspec 失败
*   宝石文件
*   布局文件

这是规范代码：

```
require 'spec_helper'

describe "Static pages" do

  describe "Home page" do
    before { visit root_path }

    it { should have_selector('h1', text: 'Sample App') } 
    it { should have_selector('title', text: full_title('')) }
    it { should_not have_selector('title', text: ' | Home') }
  end

  describe "Help page" do
    before { visit help_path }

    it { should have_selector('h1', text: 'Help') }
    it { should have_selector('title', text: full_title('Help')) }
  end

  describe "About page" do
    before { visit about_path }

    it { should have_selector('h1', text: 'About') }
    it { should have_selector('title', text: full_title('About Us')) }
  end

  describe "Contact page" do
    before { visit contact_path }

    it { should have_selector('h1', text: 'Contact') }
    it { should have_selector('title', text: full_title('Contact')) }

  end
end 
```

这是辅助方法`full_title`：

```
module ApplicationHelper
  def full_title(page_title)
    base_title = "Ruby on Rails Tutorial Sample App"
    if page_title.empty?
      base_title
    else
      "#{base_title} | #{page_title}" 
    end
  end
end 
```

主页视图或 /home 路由：

```
.center.hero-unit
  %h1
    Welcome to the Sample App 
  %h2
    This is the home page for the 
    %a{ href: "http://railstutorial.org"}Ruby on Rails Tutorial sample app

  = link_to "Sign up now!", '#', class: "btn btn-large btn-primary"

= link_to image_tag("rails.png", alt: "Rails"), 'http://rubyonrails.org' 
```

关于页面：

```
- provide(:title, 'About Us')
%body
  %h1
    About Us

  %p
    The 
    %a(href="http://railstutorial.org/")Ruby on Rails Tutorial
    is a project to make a book and screencasts to teach web development with
    %a(href="http://rubyonrails.org/")Ruby on Rails
    This is the sample application for the tutorial 
```

帮助页面：

```
- provide(:title, 'Help')
%body
  %h1
    Help
  %p
    Get help on the Ruby on Rails Tutorial at the
    %a(href="http://railstutorial.org/help")Rails tutorial help page
    To get help on this sample app, see the
    %a(href="http://railstutorial.org/book")Rails Tutorial book 
```

联系页面：

```
- provide(:title, 'Contact')
%h1 Contact
%p
  Contact ruby on Rails Tutorial about the sample app at the 
  %a{ href: "http://railstutorial.org/contact"}Contact page 
```

主页的 HTML：

```
<!DOCTYPE html>
<html>
  <head>
    <title>Ruby on Rails Tutorial Sample App</title>
    <link href="/assets/application.css?body=1" media="all" rel="stylesheet" type="text/css" />
    <link href="/assets/custom.css?body=1" media="all" rel="stylesheet" type="text/css" />
    <link href="/assets/static_pages.css?body=1" media="all" rel="stylesheet" type="text/css" />
    <script src="/assets/jquery.js?body=1" type="text/javascript"></script>
    <script src="/assets/jquery_ujs.js?body=1" type="text/javascript"></script>
    <script src="/assets/static_pages.js?body=1" type="text/javascript"></script>
    <script src="/assets/application.js?body=1" type="text/javascript"></script>
    <meta content="authenticity_token" name="csrf-param" />
    <meta content="KLYiW09+IfyIcxG2jcCX8tt3vts7aCTzYuiYA0ks8tM=" name="csrf-token" />
    <!--[if lt IE 9]>
<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
[![endif]-->
  </head>
  <body>
    <header class='navbar navbar-fixed-top'>
      <div class='navbar-inner'>
        <div class='container'>
          <a href="/" id="logo">sample app</a>
          <nav>
            <ul class='nav pull-right'>
              <li><a href="/">Home</a></li>
              <li><a href="/help">help</a></li>
              <li><a href="#">Sign in</a></li>
            </ul>
          </nav>
        </div>
      </div>
    </header>
    <div class='container'>
      <div class='center hero-unit'>
        <h1>
          Welcome to the Sample App
        </h1>
        <h2>
          This is the home page for the
          <a href='http://railstutorial.org'>Ruby on Rails Tutorial sample app</a>
        </h2>
        <a href="#" class="btn btn-large btn-primary">Sign up now!</a>
      </div>
      <a href="http://rubyonrails.org"><img alt="Rails" src="/assets/rails.png" /></a>
      <footer class='footer'>
        <small>
          <a href='http://railstutorial.org'>Rails Tutorial by Michael Hartl</a>
        </small>
        <nav>
          <ul>
            <li><a href="/about">About</a></li>
            <li><a href="/contact">Contact</a></li>
            <li>
              <a href='http://railstutorial.org'>News</a>
            </li>
          </ul>
        </nav>
      </footer>
    </div>
  </body>
</html> 
```

Rspec 失败：

```
FF.FFFFFF

Failures:

  1) Static pages Home page 
     Failure/Error: it { should have_selector('h1', text: 'Sample App') }
       expected css "h1" with text "Sample App" to return something
     # ./spec/requests/static_pages_spec.rb:8:in `block (3 levels) in <top (required)>'

  2) Static pages Home page 
     Failure/Error: it { should have_selector('title', text: full_title('')) }
       expected css "title" with text "Ruby on Rails Tutorial Sample App" to return something
     # ./spec/requests/static_pages_spec.rb:9:in `block (3 levels) in <top (required)>'

  3) Static pages Help page 
     Failure/Error: it { should have_selector('h1', text: 'Help') }
       expected css "h1" with text "Help" to return something
     # ./spec/requests/static_pages_spec.rb:16:in `block (3 levels) in <top (required)>'

  4) Static pages Help page 
     Failure/Error: it { should have_selector('title', text: full_title('Help')) }
       expected css "title" with text "Ruby on Rails Tutorial Sample App | Help " to return something
     # ./spec/requests/static_pages_spec.rb:17:in `block (3 levels) in <top (required)>'

  5) Static pages About page 
     Failure/Error: it { should have_selector('h1', text: 'About') }
       expected css "h1" with text "About" to return something
     # ./spec/requests/static_pages_spec.rb:23:in `block (3 levels) in <top (required)>'

  6) Static pages About page 
     Failure/Error: it { should have_selector('title', text: full_title('About Us')) }
       expected css "title" with text "Ruby on Rails Tutorial Sample App | About Us " to return something
     # ./spec/requests/static_pages_spec.rb:24:in `block (3 levels) in <top (required)>'

  7) Static pages Contact page 
     Failure/Error: it { should have_selector('h1', text: 'Contact') }
       expected css "h1" with text "Contact" to return something
     # ./spec/requests/static_pages_spec.rb:30:in `block (3 levels) in <top (required)>'

  8) Static pages Contact page 
     Failure/Error: it { should have_selector('title', text: full_title('Contact')) }
       expected css "title" with text "Ruby on Rails Tutorial Sample App | Contact " to return something
     # ./spec/requests/static_pages_spec.rb:31:in `block (3 levels) in <top (required)>'

Finished in 0.34035 seconds
9 examples, 8 failures

Failed examples:

rspec ./spec/requests/static_pages_spec.rb:8 # Static pages Home page 
rspec ./spec/requests/static_pages_spec.rb:9 # Static pages Home page 
rspec ./spec/requests/static_pages_spec.rb:16 # Static pages Help page 
rspec ./spec/requests/static_pages_spec.rb:17 # Static pages Help page 
rspec ./spec/requests/static_pages_spec.rb:23 # Static pages About page 
rspec ./spec/requests/static_pages_spec.rb:24 # Static pages About page 
rspec ./spec/requests/static_pages_spec.rb:30 # Static pages Contact page 
rspec ./spec/requests/static_pages_spec.rb:31 # Static pages Contact page 
```

宝石文件

```
source 'https://rubygems.org'

gem 'rails', '3.2.8'
gem 'haml-rails'
gem 'bootstrap-sass', '2.0.0'
gem 'capybara', '1.1.2'

group :development, :test do
  gem 'sqlite3' , '1.3.5'
  gem 'rspec-rails', '2.10.0'
end

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

# Gems used only for assets and not required
# in production environments by default.

group :assets do
  gem 'sass-rails',   '3.2.4'
  gem 'coffee-rails', '3.2.2'
  gem 'uglifier', '1.2.3'
end

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby

gem 'jquery-rails'

group :test do
  gem 'capybara', '1.1.2'
end

group :production do
  gem 'pg', '0.12.2'
end

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'debugger' 
```

布局文件

```
!!! 5
%html
  %head
    %title= full_title(yield(:title))
    = stylesheet_link_tag    "application", :media => "all" 
    = javascript_include_tag "application" 
    = csrf_meta_tags 
    = render 'layouts/shim'
  %body
    = render 'layouts/header'
    .container
      = yield
      = render 'layouts/footer' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T03:11:12.433

This is a very subtle error for a new programmer to debug. I'm using the vim editor and for some reason 4 spaces was expanding to a tab. A hidden tab character in the layouts file was causing the specs to fail.

# sql - SQL子查询选择疑惑

> ID：13121088
> 
> 赞同：1
> 
> 时间：2012-10-29T11:51:45.463
> 
> 标签：sql, sql-server, sql-server-2008

SQL Server 中的日志表

```
timestamp                  user_name     session_id
2012-10-17 06:30:10        Sanjay        034A955F
2012-10-17 06:30:20        Sanjay        034A955F
2012-08-20 13:20:59        John          0547961A 
2012-08-20 13:21:05        John          0547961A 
2012-08-20 13:22:10        John          0547961A 
2012-10-17 04:02:10        John          0977661B 
```

期望的输出

```
user       Total_login      This_Month_Login   Recent_Login  
Sanjay     2                2                  2012-10-17 06:30:10 
John       4                1                  2012-10-17 04:02:10 
```

我试图编写 SQL SELECT 查询来获得以上输出，但我不擅长 SQL，所以不能提前写，只写了 2 列。你能帮我得到上面的选择输出吗？

```
select user_name as 'User', count (distinct session_id) as 'Total_Login' 
from "LogTable" 
group by user_name 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T11:54:29.067

```
DECLARE
  @this_month DATETIME
SELECT
  @this_month = DATEADD(MONTH, DATEDIFF(MONTH, 0, getDate), 0)

SELECT
  user_name,
  COUNT(*)                                                  AS total_log,
  SUM(CASE WHEN timestamp >= @this_month THEN 1 ELSE 0 END) AS log_this_month,
  MAX(timestamp)                                            AS recent_login
FROM
  "LogTable"
GROUP BY
  user_name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T11:53:48.083

试试这个查询

```
select
    T.user_name as User,
    count(distinct T.session_id) as Total_Login,
    count(distinct case when datediff(mm, T.timestamp, getdate()) = 0 then session_id else null end) as This_Month_Login,
    max(T.timestamp) as Recent_Login
from LogTable as T
group by T.user_name 
```

我假设您只需要在输出中计算不同的 session_id。如果你没有，那么你需要

```
select
    T.user_name as User,
    count(*) as Total_Login,
    count(case when datediff(mm, T.timestamp, getdate()) = 0 then 1 else null end) as This_Month_Login,
    max(T.timestamp) as Recent_Login
from LogTable as T
group by T.user_name 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T12:01:16.257

试试这个

```
Select 
    USER_NAME, 
    COUNT(*) As Total_login,
    COUNT(case when MONTH(getdate())=MONTH(tm) then 1 end) As This_Month_Login,
    MAX(tm) as Recent_Login
From MyTable
group by user_name 
order by user_name desc 
```

# javascript - 未捕获的类型错误：对象函数没有方法

> ID：13121091
> 
> 赞同：0
> 
> 时间：2012-10-29T11:51:57.697
> 
> 标签：javascript

思路是在继承的类Rectangle上实现Shape中的calculateSurface方法，用Rectangle类上传递的参数计算曲面。

```
function Shape (w,h){
    this.h = h;
    this.w = w;
    this.calculateSurface = function (){
        return this.w*this.h;
    };
}

function Rectangle (w,h){
    Shape.apply(this, arguments);
    this.w = w;
    this.h = h;
    this.calcSurface = function(){
        return Shape.calculateSurface(this.w, this.h);
    };
}

Rectangle.prototype = new Shape();
Rectangle.prototype.constructor = Rectangle;

var rec = new Rectangle(4,4);

console.log(rec.calcSurface()); 
```

我得到的错误是：

```
 Uncaught TypeError: Object function Shape(w,h){
    this.h = h;
    this.w = w;
    this.calculateSurface = function (){
        return this.w*this.h;
    };
} has no method 'calculateSurface' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T11:53:52.247

这条线...

```
return Shape.calculateSurface(this.w, this.h); 
```

正在为您的功能寻找一种`calculateSurface()`方法。`Shape()`除了它不存在，它在构造函数返回的对象上。

你想要这样的东西...

```
var self = this;
this.calcSurface = function(){
    return self.calculateSurface(this.w, this.h);
}; 
```

[js小提琴](http://jsfiddle.net/ZU5Vb/)。

此外，可能值得将其`calculateSurface()`放在`Shape`'s`prototype`属性上，这样如果您创建大量`Shape`对象，则该方法只会在内存中存在一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T11:56:16.963

改用这个：

```
return (new Shape(this.w, this.h)).calculateSurface(this.w, this.h); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T11:59:32.997

改变

`return Shape.calculateSurface(this.w, this.h);`

至

`return this.calculateSurface(this.w, this.h);`

因为您将`Rectangle`'s Prototype指向`Shape`'s in

`Rectangle.prototype = new Shape();`

# sql - 使用上一行进行比较？

> ID：13121094
> 
> 赞同：3
> 
> 时间：2012-10-29T11:52:05.097
> 
> 标签：sql, sql-server, sql-server-2008, select

我正在尝试找出一种在 SQL Server 2008 中比较两行的有效方法。我需要编写一个查询来查找`Movement`表中`Speed < 10`连续 N 次的所有行。

表的结构是：

事件时间速度

如果数据是：

```
2012-02-05 13:56:36.980, 2
2012-02-05 13:57:36.980, 11
2012-02-05 13:57:46.980, 2
2012-02-05 13:59:36.980, 2
2012-02-05 14:06:36.980, 22
2012-02-05 15:56:36.980, 2 
```

然后，如果我查找 2 个连续行，它将返回第 3/4 行（13:57:46.980 / 13:59:36.980），如果我查找三个连续行，它将不返回任何内容。数据的顺序仅为 EventTime/DateTime。

你能给我的任何帮助都会很棒。我正在考虑使用游标，但它们通常效率很低。另外，这个表大约有 10m 行大小，所以越高效越好！:)

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T12:14:56.437

```
DECLARE
  @n             INT,
  @speed_limit   INT
SELECT
  @n             = 5,
  @speed_limit   = 10

;WITH
  partitioned AS
(
  SELECT
    *,
    CASE WHEN speed < @speed_limit THEN 1 ELSE 0 END   AS PartitionID
  FROM
    Movement
)
,
  sequenced AS
(
  SELECT
    ROW_NUMBER() OVER (                         ORDER BY EventTime) AS MasterSeqID,
    ROW_NUMBER() OVER (PARTITION BY PartitionID ORDER BY EventTime) AS PartIDSeqID,
    *
  FROM
    partitioned
)
,
  filter AS
(
  SELECT
    MasterSeqID - PartIDSeqID    AS GroupID,
    MIN(MasterSeqID)             AS GroupFirstMastSeqID,
    MAX(MasterSeqID)             AS GroupFinalMastSeqID
  FROM
    sequenced
  WHERE
    PartitionID = 1
  GROUP BY
    MasterSeqID - PartIDSeqID
  HAVING
    COUNT(*) >= @n
)
SELECT
  sequenced.*
FROM
  filter
INNER JOIN
  sequenced
    ON  sequenced.MasterSeqID >= filter.GroupFirstMastSeqID
    AND sequenced.MasterSeqID <= filter.GroupFinalMastSeqID 
```

替代的最终步骤*（受@t-clausen-dk 启发）*，以避免额外的`JOIN`. 我会测试两者，看看哪个性能更高。

```
,
  filter AS
(
  SELECT
    MasterSeqID - PartIDSeqID                              AS GroupID,
    COUNT(*) OVER (PARTITION BY MasterSeqID - PartIDSeqID) AS GroupSize,
    *
  FROM
    sequenced
  WHERE
    PartitionID = 1
)
SELECT
  *
FROM
  filter
WHERE
  GroupSize >= @n 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T12:32:03.840

```
declare @t table(EventTime datetime, Speed int)
insert @t values('2012-02-05 13:56:36.980', 2)
insert @t values('2012-02-05 13:57:36.980', 11)
insert @t values('2012-02-05 13:57:46.980', 2)
insert @t values('2012-02-05 13:59:36.980', 2)
insert @t values('2012-02-05 14:06:36.980', 22)
insert @t values('2012-02-05 15:56:36.980', 2)

declare @N int = 1

;with a as
(
  select EventTime, Speed, row_number() over (order by EventTime) rn from @t
), b as
(
  select EventTime, Speed, 1 grp,  rn from a where rn = 1
  union all
  select a.EventTime, a.Speed, case when a.speed < 10 and b.speed < 10 then grp else grp + 1 end, a.rn
  from a join b on a.rn = b.rn+1
), c as
(
  select EventTime, Speed, count(*) over (partition by grp) cnt from b
)
select * from c
where cnt > @N
OPTION (MAXRECURSION 0) -- Thx Dems 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-29T12:45:18.243

与 Dems 几乎相同的想法，有点不同：

```
select * from (
 select eventtime, speed, rnk, new_rnk, 
      rnk - new_rnk,
      max(rnk) over (partition by speed, new_rnk-rnk) -
      min(rnk) over (partition by speed, new_rnk-rnk) + 1  as no_consec
  from (
     select eventtime, rnk, speed,
            row_number() over (partition by speed order by eventtime) as new_rnk
     from (
             select eventtime, speed,
             row_number() over (order by eventtime) as rnk
             from a 
          ) a
     where a.speed < 5
  )
order by eventtime
  )
where no_consec >= 2; 
```

5 是速度限制，2 是连续事件的最小数量。为了简化创建数据库的编写，我将日期作为数字。

[SQLFIDDLE](http://sqlfiddle.com/#!4/b453f/11)

**编辑：**

为了回复评论，我在第一个内部查询中添加了三列。要仅获取第一行，您需要添加一个`pos_in_group = 1`to WHERE 子句，距离就在您的手指上。

[SQLFIDDLE](http://sqlfiddle.com/#!4/5d57f/4)

```
select eventtime, speed, min_date, max_date, pos_in_group

from (
  select eventtime, speed, rnk, new_rnk, 
      rnk - new_rnk,
      row_number() over (partition by speed, new_rnk-rnk order by eventtime) pos_in_group,
      min(eventtime) over (partition by speed, new_rnk-rnk) min_date,
      max(eventtime) over (partition by speed, new_rnk-rnk) max_date,
      max(rnk) over (partition by speed, new_rnk-rnk) -
      min(rnk) over (partition by speed, new_rnk-rnk) + 1  as no_consec
  from (
     select eventtime, rnk, speed,
            row_number() over (partition by speed order by eventtime) as new_rnk
     from (
             select eventtime, speed,
             row_number() over (order by eventtime) as rnk
             from a 
          ) a
     where a.speed < 5
     )
  order by eventtime
  )
where no_consec > 1; 
```

# java - 为什么 ArrayUtils.add 不在这里添加元素

> ID：13121101
> 
> 赞同：4
> 
> 时间：2012-10-29T11:52:24.857
> 
> 标签：java, apache-commons, apache-commons-lang

我使用`ArrayUtils.add(double[], double)`一些频率。显然我对为什么它在这里不起作用有一个盲点。任何人都可以帮忙吗？

```
double[] reliableNeighborValues = new double[1];
for (int j = 0; j < 8; j++) {
    if (pixelInfo[j] > 0) {
        System.out.println("pre add array length "+reliableNeighborValues.length);
        for (int k = 0; k < reliableNeighborValues.length; k++) {
            System.out.println("-- "+reliableNeighborValues[k]);
        }
        ArrayUtils.add(reliableNeighborValues, pixelInfo[j]);
        System.out.println("reliable neighbor "+j+" "+pixelInfo[j]+" array length "+reliableNeighborValues.length);
        for (int k = 0; k < reliableNeighborValues.length; k++) {
            System.out.println("-- "+reliableNeighborValues[k]);
        }
    }
} 
```

输出：

```
pre add array length 1

-- 0.0

reliable neighbor 0 5.3364882 array length 1

-- 0.0 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-29T11:54:26.247

数组无法在 Java 中展开，因此该方法返回您当前正在丢弃的数组的更新副本。

```
 reliableNeighborValues = 
     ArrayUtils.add(reliableNeighborValues, pixelInfo[j]); 
```

与字符串操作函数的处理相同。

# php - Symfony2 和其他 MVC 框架中的模型？

> ID：13121104
> 
> 赞同：11
> 
> 时间：2012-10-29T11:52:35.543
> 
> 标签：php, oop, model-view-controller, symfony, model

我试图了解模型如何在适当的 MVC 中工作。

据我所知，MVC 中的模型是应用程序逻辑发生的地方，模型是肉，或者说是 MVC 的骨干。视图只是呈现，控制器是“粘合剂”，它要求模型执行一些操作，返回一些数据，并将该信息传递给呈现给用户的视图。

现在，我正在探索各种不同的 MVC 框架，并想了解如何在 MVC 中使用模型。就模型而言，Symfony 2 是一个有趣的框架，因为没有模型 :)

我无法掌握 Symfony2 的一些特性，以及模型在 Symfony2 MVC 中的位置。

根据定义，模型是域逻辑和数据库操作的所在。

所以**我的问题是**：

1.  在 Symfony2 中，我们有实体和服务，这两个模型是 Symfony 中的吗？
2.  Symfony2 服务和 Web 服务有什么区别？

所以我的问题是 Symfony2 中的模型在哪里？由于 Model 是一个层，由 Domain Objects 和 Data Mapper 组成，那么我可以假设 Entities 是 Domain Objects，而 Doctrine 是 Data Mapper，对吗？

Symfony2 服务在哪里适合？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-29T12:43:35.307

1.  Symfony2 不像其他框架那样具有 MVC 的传统“模型”部分。甚至来自 ORM/ODM Doctrine 的实体/文档也不是框架本身的一部分，Symfony2 也不依赖它。

    正如 Fabien（Symfony 框架的创建者）在他的[博客](http://fabien.potencier.org/article/49/what-is-symfony2)上所写，

    > “由你手动创建模型或使用任何其他工具，如 ORM”......“我不喜欢 MVC，因为这不是 Web 的工作方式。Symfony2 是一个 HTTP 框架；它是一个请求/响应框架。”

    仅仅阅读对我来说很难理解，但是当我真正开始在 Symfony2 中编程时，我理解了他的意思。

    另一方面，Symfony2 中的服务只是一个执行全局任务的对象。路由器、学说、记录器、邮件程序是 Symfony2 预装的众多服务中的一部分。您可以从代码的任何部分访问服务。

2.  Symfony2 服务与 Web 服务完全不同。Symfony2 服务旨在在您的系统中使用，而 Web 服务旨在通过 REST api 在机器之间使用。虽然，我猜你可以创建 RESTful api 作为你的服务的一部分。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-09-04T09:48:07.887

“我不喜欢 MVC，因为这不是 Web 的工作方式。Symfony2 是一个 HTTP 框架；它是一个请求/响应框架。”

我完全不同意这种说法。如果你以正确的方式看待 MVC，它绝对适合 Web。

1) 控制器接收到 HTTP 请求。

2）控制器实例化模型（或模型）并激活模型上的相关方法，每个方法返回一个通常是数据数组的结果。

3) 当模型完成后，控制器实例化视图，从模型中插入数据，然后激活将数据转换为 HTML 的方法。

4) 控制器从视图中获取结果并将其作为 HTTP 响应发送回客户端。

仅仅因为 MVC 是在 Web 出现之前几年就为桌面应用程序发明的，因此与 Web 无关，这是那些只见树木不见森林的人所犯的错误，他们如果不关注不相关的细节就无法看到大局。MVC 中的每个组件都有一组不同的职责，并且如果您创建三个组件，每个组件都履行其中一个职责（与物理实现无关），那么无论您喜欢与否，您都拥有 MVC。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-29T12:17:09.537

我不知道 Symfony，但我已经在使用其他 MVC 框架（grails、codeigniter）。

模型（实体）表示数据，可以直接在模型中定义一些稍后用于验证的限制。例如，如果需要，您可以为每个属性定义其长度、模式、...

服务可能更依赖于 symfony。与 Grails 相比，服务是您放置业务代码的组件。在 Java EE 中，它是 Bean。请注意，服务可以成为 Web 服务，但不是强制性的。控制器也可以调用服务，以便在渲染视图之前进行一些计算。

我希望我的回答能有所帮助。

# c++ - 通过编写中间件获取 mssql 查询

> ID：13121107
> 
> 赞同：0
> 
> 时间：2012-10-29T11:52:49.680
> 
> 标签：c++, c, sql-server, middleware

谁能告诉我为 mssql 服务器编写中间件的正确方向。我想要做的是在 mssql 1433 tcp 端口上设置一个侦听器，它将接受 db 连接，提取查询并将其写入文件并将连接转发到另一个 IP 上的真实 mssql 服务器或相同的 IP 进行处理。

提前致谢

# css - CSS 选择的标签高于类

> ID：13121111
> 
> 赞同：0
> 
> 时间：2012-10-29T11:52:55.480
> 
> 标签：css, css-selectors

```
<html>
<head>
    <style>
        input[type='text'], select {
            background: blue
        }

        .error {
            background: red
        }
    </style>
</head>
<body>
<input type="text" class="error"/>
<select class="error">
    <option>non-sense</option>
</select>
</body>
</html> 
```

如果该类`.error`具有红色背景，则它必须是红色的。即使`input[type="text"]`有蓝色背景。在 IE 和 GC 中测试。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T11:55:00.923

您看到的问题的原因是`input[type=text]`比 更具体`.error`，因此它将覆盖它。使用更具体的选择器：

```
input.error 
```

或者，如果您想真正安全：

```
input[type=text].error 
```

有关**[CSS 特异性及其计算方式的更多信息](https://stackoverflow.com/a/12743702/871050)**

* * *

另一种方法是保留当前选择器，但`!important`在规则上添加关键字：

```
.error { background: red !important; } 
```

这将立即使其覆盖**与该元素匹配的任何其他规则**。请注意，它是一个非常强大的工具，将来可能会导致意想不到的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T11:53:49.890

利用`.error { background: red !important }`

请注意此限制，请参阅：[**！重要规则（CSS 2.1 第 6.4.2 节）**](http://www.w3.org/TR/CSS2/cascade.html#important-rules)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T12:07:34.513

尝试这个

```
<html>
   <head>
       <style>

           input[type='text'], select { background: blue }
           .error { background: red; }
           input.error { background: red; }

       </style>
    </head>
    <body>
        <input type="text" class="error" />
        <select class="error">
            <option>non-sense</option>
        </select>
    </body>
</html> 
```

# backbone.js - Fancybox2.1.3 不适用于 Backbone 和 IE7

> ID：13121116
> 
> 赞同：2
> 
> 时间：2012-10-29T11:53:22.370
> 
> 标签：backbone.js, internet-explorer-7, fancybox, fancybox-2, ie7.js

我有一种情况，我有 BackboneJS (0.9.2) 和 RequireJS (2.1.3) 并且需要使用 Fancybox 打开一些内联隐藏内容（从下划线模板呈现）：

```
<div id="inlineContent" style="display: none">
    <div class="brand-images">
        <img class="brand-image" src="/img/brandImage.png" alt="" />
        <img class="designer-image" src="/img/designer.jpg" alt="" />
        <div class="external button"><a href="<%= designer.get("link") %>" data-designer="<%= designerId.substr(2, designerId.length) %>">Shop the full collection</a><span></span></div>
    </div>
    <div class="details">
        <p><%= designer.get("bio") %></p>
        <p class="more-bio"><%= designer.get("bioMore") %></p>
    </div>
</div> 
```

我尝试了多种方式将fancybox附加到元素上，最简单的是在View.render（也使用了View.events）：

```
$(this.el).html(  _.template( detailsDesignerTemplate, data )).appendTo(that.pageElement);
$('.read-more').fancybox({
    padding: 0,
    height: 'auto',
    width: 970,
    autoSize: false,
    title: '<h1>Title</h1>'
}); 
```

除了 IE7（不支持 IE6，耶！）之外的所有内容都可以。IE7 什么都不做（虽然有趣的是它确实调用了“beforeLoad”回调）；

此外，有趣的是，它适用于 iFramed 内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T20:01:03.410

fancybox 使用的容器 #fancybox-content 刚刚设置到您的视图中查看 el:$('#fancybox-content') 并调用 $.fancybox(this.$el.html(),{options})

# meteor - Meteor.startup 之前还是之后的模板实例？

> ID：13121118
> 
> 赞同：0
> 
> 时间：2012-10-29T11:53:29.870
> 
> 标签：meteor

我把我所有的模板文件放在客户端\

我应该在 Meteor.startup 之前还是之后绑定事件和车把助手？哪一个更好 ？表现 ？

```
Meteor.startup ->

    Template['module-demo'].lists = ->
        console.log 'test' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T15:11:35.250

我所做的是在启动方法之外设置所有事件和模板助手，如以下代码片段所示。

```
Template.fileUpload.rendered = ->  
  filepicker.constructWidget document.getElementById('uploadWidget')

Template.fileUpload.events
  'change #uploadWidget' : (ev)->
    Archivos.insert(url: ev.files[0].url, timeStamp: new Date())

Meteor.startup ->
  Session.set "searchData", conCitasoAlertas()
  Session.set "paginaActual","home" 
```

# python - 如果未提供 input() 则超时并继续

> ID：13121121
> 
> 赞同：2
> 
> 时间：2012-10-29T11:53:44.980
> 
> 标签：python, input, keyboard

> **可能重复：**
> [如何设置输入时间限制](https://stackoverflow.com/questions/2933399/how-to-set-time-limit-on-input)

在 python 3.2 中，有没有办法在等待用户输入时计算时间，以便在 10 秒后自动跳过 input() 函数并继续执行脚本。

我在 Windows 上运行脚本。目标是等待用户输入（Do you want to continue y/n），如果用户没有提供任何输入，脚本应该在暂停 10 秒后继续。

# phpstorm - 在 PhpStorm 5 中修改代码完成

> ID：13121122
> 
> 赞同：0
> 
> 时间：2012-10-29T11:53:45.967
> 
> 标签：phpstorm

输入标签的第一个字符`<textarea>`并使用自动完成（例如`<texta`并按 ENTER）编辑器生成以下代码段：`<textarea rows="" cols=""`

这是非常无用的，因为我不使用 rows 和 cols 属性。

如何修改这些片段？我尝试了“实时模板”部分，但它不存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T15:25:02.147

在这种情况下，代码补全是根据 DTD 执行的，DTD将标记的属性`rows`和`cols`属性定义为**Required**。`textarea`

 **您的文件很可能以：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd"> 
```

或默认的 HTML 语言级别定义它。

要解决这个问题，您可以创建 HTML 5 文件，`<!DOCTYPE html>`PhpStorm 将停止完成这些属性。

另请参阅相关的 IDE 设置：

![在此处输入图像描述](../Images/5d43a889257e8924e21f948e20ae781e.png)**

# asp.net - 在哪里存储数据集？- ASP.NET 中的会话或缓存

> ID：13121127
> 
> 赞同：1
> 
> 时间：2012-10-29T11:53:57.067
> 
> 标签：asp.net, session, caching

刚登上asp.net 船。

我有一个 asp.net 页面，该页面最初在带有分页的网格视图中显示一些数据（以数据集作为其数据源）。而且，很少有文本框可以执行插入或更新（不要询问 gridview 本身的编辑/插入选项！！）。

我需要一些关于存储数据集的正确位置的指导。

我发布了简化的代码隐藏文件，它使用视图状态来存储我不喜欢的数据集。

```
enter code here

class xyx : Page
{
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
    GridBind();

    }

}
protected void InsertUpdateButton_Click(object sender, EventArgs e)
{
 1.perform insert or update data in the database

 2.GridBind();

}
protected void GridView1_PageIndexChanged(object sender, EventArgs e)
{
    GridView1.PageIndex = e.NewPageIndex;
    GridView1.SelectedIndex = -1;
    GridView1.DataSource = (DataSet)ViewState["DataSet"];
    GridView1.DataBind();

}

private void GridBind()
{
     DataSet ds = getDataFromDataBase();
     GridwView1.DataSource = ds;
     GridView1.DataBind();
     ViewState["DataSet"] = ds;

}
} 
```

现在除了视图状态，存储数据集的最佳选择是什么？...

1.  每次都从数据库中获取数据

2.  对所有页面中的所有数据集使用通用会话变量 Session["DataSet"]（我有一些其他页面具有相同的场景）

3.  使用缓存

我包括了会话或缓存，因为用户可能只是在查看数据而不是插入或更新。

此外，在按钮单击事件而不是调用 GridBind() 中，如果我只是更新视图状态中的数据集而不是再次从数据库中获取数据，是否可以？

像 -

```
 DataSet ds = ViewSate["DataSet"] (or) Session["DataSet"] (or) Cache["DataSet"]; 
  (perform updations or insertions upon the dataset)
  Session(or)Cache(or)ViewState["DataSet"] = ds; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T11:55:52.463

一般来说：

*   如果数据必须是最新的，则每次都获取它
*   如果陈旧数据正常（或不经常更改）：
    *   如果每个用户的数据不同，则存储在`Session`
    *   如果所有用户的数据都*相同*，请使用`Cache`或`Application`

如果您希望为每个用户存储**大量数据，****请不要使用 Session** - 您可能会耗尽内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T12:02:44.193

取决于许多情况，您应该首先处理这些事情

1.  数据集中的记录数。
2.  用户数。

If there are thousand of record then fetch only those record required. User some pager control.
[here is an expample](http://dotnetsqltips.blogspot.in/2012/03/custom-paging-in-aspnet-gridview-using.html)
For better use of paging.

# php - 建立一个RSS提要

> ID：13121130
> 
> 赞同：1
> 
> 时间：2012-10-29T11:54:11.427
> 
> 标签：php, mysql, rss, feed

我第一次尝试为网站的新闻页面构建动态 rss 提要文件。

所以我有以下代码

```
<?php
    header("Content-Type: application/rss+xml; charset=utf-8");

    echo'
        <?xml version="1.0" encoding="utf-8"?>
        <rss version="2.0">
        <channel>
            <title>My Site RSS feed</title>
            <guid>http://example.com/media/news.php</guid>
                    <link>http://www.exemple.com/mediacenter/news.php</link>
                     <description>This is an example RSS feed</description>
                    <language>en-US</language>              
    ';

    include('../misc/session.php'); // to get the language selected by user
    include('../includes/connection.php'); //connection to DB

    $idLang = $_SESSION['idLang'];

    $query = mysql_query("SELECT FROM tbl_news WHERE lang_id = '$idLang'");

    while($rs = mysql_fetch_array($query)){
        echo"
            <item>
                <title>".$rs['l_tltle']."</title>
                <link>a href='http://www.exemple.com/media/news.php'</link>
                <description><!CDATA['".$rs['l_text']."']></description>
            </item>
        ";
    }
    echo'
    </channel>
    </rss>
    ';
?> 
```

在我的 index.php 文件中，在我得到这一行之前：

```
<link rel="alternate" type="application/rss+xml" title="MySite RSS Feed" href="http://mysite.com/rssfeed/rss.php" /> 
```

当我点击 Firefox 的图标时，它应该会打开一个带有 google reader 页面的页面，就像在其他网站中发生的那样，但在我的情况下，它会打开一个弹出窗口来保存文件。在 chrome 中，我有一个[这个扩展](https://chrome.google.com/webstore/detail/rss-feed-reader/pnjaodmkngahhkoihejjehlcdlnohgmp)，它检测到有一个提要。但它没有列出任何消息。

谁能帮我？？什么不见​​了？？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T10:32:46.453

我有两个问题。

首先是在查询中。SELECT 后缺少 *。第二个错误在第二行。`<?xml version="1.0"...`必须与单引号在同一行。像这样`echo' <?xml version="1.0" ...`，否则它会给出验证错误，并且浏览器无法重新输入提要。

欢迎提出更多建议

# c# - 更改文件中的一个字符会导致 MSysGit 认为整个文件已更改

> ID：13121134
> 
> 赞同：4
> 
> 时间：2012-10-29T11:54:29.813
> 
> 标签：c#, visual-studio-2010, git, version-control, line-endings

我有一个包含 C# 代码的 git 存储库，并且我`MSysGit`在 Windows 上运行。

`core.autocrlf`已打开，我正在使用`.gitattributes`from [this question ，并且我“重新规范化”了我的 repo，如](https://stackoverflow.com/questions/170961/whats-the-best-crlf-handling-strategy-with-git)[本 Github 指南](https://help.github.com/articles/dealing-with-line-endings)底部所述。

现在对于我存储库中的*一些**.cs*文件，如果我更改一个字符，`MSysGit`则认为整个文件已更改。

我克隆了新的存储库。我首先尝试在 Visual Studio 中编辑文件，然后尝试在[SciTE](http://www.scintilla.org/SciTE.html)中打开它，它显示了行尾和制表符，而且我相信它不会对文件做任何奇怪的事情（比如更改编码）。

所以，我克隆了新的存储库：

```
$ git clone git clone git@git.assembla.com:my-repo.v2.git
$ cd my-repo/ 
```

我检查存储库和文件：

```
$ git status
# On branch master
nothing to commit (working directory clean)
$ git diff path/to/myfile.cs
$ 
```

我在 SciTE 中打开文件（请注意，行尾是`CRLF`并且没有制表符）：

```
using System;
using System.Collections.Generic;
... 
```

并更改一个字符（请注意，`CRLF`没有制表符仍然为真）：

```
using System;
!using System.Collections.Generic;
... 
```

现在 git 认为一切都变了：

```
$ git diff path/to/myfile.cs
diff --git a/path/to/myfile.cs b/Dpath/to/myfile.cs
--- a/path/to/myfile.cs
+++ b/path/to/myfile.cs
@@ -1,116 +1,116 @@
-<U+FEFF>using System;
-using System.Collections.Generic;
-using System.Linq;
-using System.Text;
-using Microsoft.Practices.EnterpriseLibrary.Data;
-using DataModel.Models;
-using DataModel.Mappers.Interfaces;
-using System.Data.Common;
-using System.Data;
... 
```

一个普通的 diff 程序不认为这两个文件有那么大的不同，`git diff`在 Unix 上也不认为它们有太大的不同，但`msysgit`确实如此。

有人曾经遇到过这种情况或有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T12:10:31.223

可以使 Git 将整个文件显示为已更改的一些事情：

*   行尾——但你说你检查了这些，它们是一样的；
*   缩进——VS（特别是如果你安装了一些扩展）可能会将缩进从制表符更改为空格，反之亦然。您可以使用“显示空白”（VS 中的 Ctrl-R、Ctrl-W 或您不同的相关选项）来检查这一点。
*   编码——如果 VS 决定以某种不同的编码（例如 UTF16）重新编码文件，它可能会显示为完全改变，尽管文本表示看起来相同。

# iphone - 点击 UISwitch 时选择 UITableView 的行

> ID：13121139
> 
> 赞同：5
> 
> 时间：2012-10-29T11:54:55.513
> 
> 标签：iphone, objective-c, ios, xcode

我对他们`UITableView`有`UISwitchs`意见。

![表视图](../Images/fd55e9b6617152da7a88fef4aa567707.png)

当切换开关时，我想运行一个功能。该功能只记录开关是否打开以及开关已打开的行。我遇到的问题是，当我单击开关时，它不会记录正确的行，除非我在单击开关之前单击了该行。

我想我的问题是单击开关不会选择行。我怎样才能使它选择行或者我可以将 ID 添加到开关？

所以开关ID“1”为“ON”。

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    static NSString *CellIdentifier = @"POICell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

    //set the cell text to the catName
    cell.textLabel.text = [self.catNames objectAtIndex:[indexPath row]];
    //add switch 
    cell.selectionStyle = UITableViewCellSelectionStyleNone;
    UISwitch *switchView = [[UISwitch alloc] initWithFrame:CGRectZero];
    cell.accessoryView = switchView;
    [switchView setOn:YES animated:NO];

    [switchView addTarget:self action:@selector(switchChanged: ) forControlEvents:UIControlEventValueChanged];
    // Configure the cell...

    return cell;
}

     - (void) switchChanged:(id)sender {
            NSString *StrCatID =[[NSString alloc]init];
            StrCatID = [self.catIDs objectAtIndex:[self.inputTableView indexPathForSelectedRow].row];
            UISwitch* switchControl = sender;
            NSLog( @"The switch for item %@ is %@",StrCatID, switchControl.on ? @"ON" : @"OFF" );
        } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-29T12:09:04.870

**找到持有开关的单元格**

```
UISwitch *switchInCell = (UISwitch *)sender;
UITableViewCell * cell = (UITableViewCell*) swithInCell.superview; 
```

**查找该单元格的索引路径**

```
NSIndexPath * indexpath = [myTableView indexPathForCell:cell] 
```

在你的情况下

```
 - (void) switchChanged:(id)sender {

         UISwitch *switchInCell = (UISwitch *)sender;
         UITableViewCell * cell = (UITableViewCell*) swithInCell.superview;
         NSIndexPath * indexpath = [myTableView indexPathForCell:cell]
         NSString *strCatID =[[NSString alloc]init];
         strCatID = [self.catIDs objectAtIndex:indexpath];
         NSLog( @"The switch for item %@ is %@",StrCatID, switchInCell.on ? @"ON" : @"OFF" );
        } 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-29T12:09:14.893

您应该将方法中`IndexPath.row`的每个设置为标签`Switch``cellForRowAtIndexPath`

```
 switchView.tag= indexPath.row; 
```

当开关值改变时，你会得到行号

```
- (void) switchChanged:(UISwitch *)sender {
  int rowIndex =[sender tag];
  //rowIndex you may use it further as you wanted. 
```

}

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-12-30T21:56:28.887

您可以检索在 tableview 中更改的 UISwitch 的 NSIndexPath。这与本文中已经回答的任何控件的想法相同：[检测在 UITableView 中按下了哪个 UIButton](https://stackoverflow.com/questions/1802707/detecting-which-uibutton-was-pressed-in-a-uitableview)

```
- (void) switchChanged:(id)sender 
{
    CGPoint switchPositionPoint = [sender convertPoint:CGPointZero toView:[self tableView]];
    NSIndexPath *indexPath = [[self tableView] indexPathForRowAtPoint:switchPositionPoint];
} 
```

这将适用于 iOS7，以前我使用 [sender superview] 但现在返回 UITableViewCellScrollView 内的 UITableViewCellContentView。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-11-17T20:48:19.743

我必须加倍`mySwitch.superview.superview`才能得到正确的单元格。

这是一个例子

```
- (void)switchToggle:(UISwitch *)mySwitch
{

 UITableViewCell *cell = (UITableViewCell *)mySwitch.superview.superview;
 NSIndexPath *indexpath = [self.tableView indexPathForCell:cell];
 NSLog(@"toggle section %d rowID %d", indexpath.section, indexpath.row);

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-29T11:59:57.190

我认为问题在于您使用 dequeueReusableCellWithIdentifier，并且您的所有单元格都具有相同的 id。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-29T12:06:26.187

更好的方法是确定发送者所在的单元格。

```
- (UITableViewCell *)findCellForView:(UIView *)view
{
    for (; view != nil; view = view.superview)
        if ([view isKindOfClass:[UITableViewCell class]])
            return view;
    return nil;
} 
```

一旦你有了这个方法。那么这是一个替换的`[self.inputTableView indexPathForSelectedRow]`问题

```
UITableViewCell *cell = [self findCellForView:sender];
NSIndexPath *indexPath = [self.inputTableView indexPathForCell:cell]; 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-12-02T07:52:26.640

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController<UITableViewDataSource,UITableViewDelegate>
@property (retain, nonatomic) IBOutlet UITableView *tableview;

@end

@interface ViewController ()
{
    NSMutableArray *arr;
    UITableViewCell* aCell;
    UISwitch *myswitch;
}

#import "ViewController.h"

@interface ViewController ()
{
    NSMutableArray *arr;
    UITableViewCell* aCell;
    UISwitch *myswitch;
}

@end

@implementation ViewController
@synthesize tableview;

- (void)viewDidLoad
{
    [super viewDidLoad];

    arr = [[NSMutableArray alloc]initWithObjects:@"1",@"2",@"3",@"4",@"5", nil];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section;
{
    return [arr count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath;
{
    aCell = [tableview dequeueReusableCellWithIdentifier:@"SwitchCell"];

    if( aCell == nil )
      {
        aCell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"SwitchCell"];
        aCell.textLabel.text = [arr objectAtIndex:indexPath.row];
        myswitch = [[UISwitch alloc]initWithFrame:CGRectZero];
        aCell.accessoryView = myswitch;
        [myswitch setOn:YES animated:YES];

       }
    switch (indexPath.row)

    {
        case 0:
        {
            [myswitch addTarget:self action:@selector(switchChanged:) forControlEvents:UIControlEventValueChanged];

        }
            break;
        case 1:
        {
            [myswitch addTarget:self action:@selector(switchChanged1:) forControlEvents:UIControlEventValueChanged];
        }
            break;

    }
    return aCell;
}

- (void) switchChanged:(id)sender {
    UISwitch *aswitch = sender;

    if (aswitch.on==YES) {
        UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"hello" message:@"okfine" delegate:self cancelButtonTitle:@"done" otherButtonTitles:nil, nil];
        [alert show];
    }
    else
    {
        UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"no1" message:@"notfine" delegate:self cancelButtonTitle:@"Returnback" otherButtonTitles:nil, nil];
        [alert show];

    }

}
- (void) switchChanged1:(id)sender {
    UISwitch *aswitch1 = sender;

    if (aswitch1.on==YES) {
        UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"second" message:@"okfine" delegate:self cancelButtonTitle:@"done" otherButtonTitles:nil, nil];
        [alert show];
    }
    else
    {
        UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"no2" message:@"notfine" delegate:self cancelButtonTitle:@"Returnback" otherButtonTitles:nil, nil];
        [alert show];

    }
  }

- (void)dealloc {
    [tableview release];
    [super dealloc];
}
@end 
```

# c# - ASP .NET 嵌套 ListView 无法识别

> ID：13121143
> 
> 赞同：1
> 
> 时间：2012-10-29T11:55:08.923
> 
> 标签：c#, asp.net, .net

我有以下示例代码，它使用嵌套的 ListView：

```
<asp:ListView ID="list" runat="server" ItemPlaceholderID="placeHolder"
        OnItemDataBound="listItemDataBound">
    <ItemTemplate>
        <p><%#Eval("name") %></p>
        <asp:ListView ID="sublist" runat="server" ItemPlaceholderID="subPlaceHolder">
            <ItemTemplate><%#Eval("subName") %></ItemTemplate>
            <LayoutTemplate>
                <asp:PlaceHolder ID="subPlaceHolder" runat="server"></asp:PlaceHolder>
            </LayoutTemplate>
        </asp:ListView>
    </ItemTemplate>
    <LayoutTemplate>
        <asp:PlaceHolder ID="placeHolder" runat="server"></asp:PlaceHolder>
    </LayoutTemplate>
</asp:ListView> 
```

但是嵌套的 ListView（子列表）在我的脚本代码中未被识别为变量，因此我无法访问它并提供一些数据绑定。当我在主 ListView（例如 DataSource）中添加一些其他对象时，它也无法识别。如何访问嵌套的 ListView？

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T12:54:26.503

中的控件`ItemTemplate`将被创建多次，为数据源中的每个项目创建一次，因此编译器无法生成单个字段来表示它们。您需要`FindControl`改用：

```
protected void listItemDataBound(object sender, ListViewItemEventArgs e)
{
   var sublist = (ListView)e.Item.FindControl("sublist");
   ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T12:54:32.653

在您的`OnItemDataBound`事件代码中，您必须这样做：

```
 if (e.Item.ItemType == ListViewItemType.DataItem)
 {
    ListView sublist = (ListView)e.Item.FindControl("sublist");
 } 
```

为了找到你嵌套的 ListView

# android - 侦听器不适用于碎片的回栈

> ID：13121147
> 
> 赞同：2
> 
> 时间：2012-10-29T11:55:26.340
> 
> 标签：android, android-fragments

我有后台堆栈的侦听器：

```
 getFragmentManager().
    addOnBackStackChangedListener(new OnBackStackChangedListener() {

        @Override
        public void onBackStackChanged() {
            Log.d("MainActivity", "Change fragment");
        }

    }); 
```

还有两个按钮。第一个按钮的 onClick 事件：

```
 getFragmentManager().
            beginTransaction().
            add(R.id.root, fragm).
            commit(); 
```

事件 onClick 第二个按钮：

```
 getFragmentManager().
            beginTransaction().
            remove(fragm).commit(); 
```

但是监听器不起作用。函数 onBackStackChanged 不调用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T15:27:35.577

猜测是因为第一笔交易尚未通过调用添加到后台堆栈中`addToBackStack(...)`。所以试试：

```
 getFragmentManager().
        beginTransaction().
        add(R.id.root, fragm).
        addToBackStack(null).
        commit(); 
```

# jquery - 来自 jquery-ui 的菜单

> ID：13121148
> 
> 赞同：1
> 
> 时间：2012-10-29T11:55:27.043
> 
> 标签：jquery, html, css, jquery-ui-menu

我正在使用 jQuery-ui 的菜单功能。请参阅我的[示例小提琴](http://jsfiddle.net/FwBNE/)

我的问题是，当您将鼠标悬停在菜单上并退出时，所有子菜单也会退出。但是，当您在子菜单中并离开时，子菜单将保持打开状态。在您单击菜单外部之前它不会关闭

我尝试添加此代码，但它不起作用：

```
$("#menu").mouseleave( function(){
   $(".ui-menu-item").collapseAll();
}); 
```

一旦我用鼠标离开，我希望子菜单也消失

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T12:10:12.573

**更新：**

[我在http://api.jqueryui.com/menu/](http://api.jqueryui.com/menu/)找到了更好的文档，看起来你想`collapseAll`在`mouseleave`. 在这里更新小提琴：http: [//jsfiddle.net/FwBNE/7/](http://jsfiddle.net/FwBNE/7/)

```
$(document).ready(function() {
    var menu = $("ul.menu").menu();
    $(menu).mouseleave(function () {
        menu.menu('collapseAll');
    });
});​ 
```

**原来的：**

这似乎有效：

```
$(document).ready(function() {
    var menu = $("div#menu > ul.menu").menu();
    menu.menu('widget').hide();
    $('div#menu').hover(function () {
        menu.menu('widget').show();
    }, function () {
        menu.menu('widget').hide();
    });
    $(menu).hover(function () {
        menu.menu('widget').show();
    }, function () {
        menu.menu('widget').hide();
    });
});​ 
```

更新小提琴：http: [//jsfiddle.net/FwBNE/4/](http://jsfiddle.net/FwBNE/4/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T12:54:47.767

我认为这会对你有所帮助。

`submenu`为`<ul>`标签添加类。

**HTML**

```
<ul id="menu">
    <li><a href="#">Item 1</a></li>
    <li><a href="#">Item 2</a></li>
    <li><a href="#">Item 3</a>
        <ul class="submenu">
            <li><a href="#">Item 3-1</a></li>
            <li><a href="#">Item 3-2</a></li>
            <li><a href="#">Item 3-3</a></li>
            <li><a href="#">Item 3-4</a></li>
            <li><a href="#">Item 3-5</a></li>
        </ul>
    </li>
    <li><a href="#">Item 4</a></li>
    <li><a href="#">Item 5</a></li>
</ul> 
```

**jQuery**

```
$(".submenu").mouseout( function(){
   $(".submenu").hide();
});
$(".submenu").mouseover( function(){
   $(".submenu").show();
}); 
```

演示网址：[http ://api.jquery.com/mouseout/](http://api.jquery.com/mouseout/)

# json - 如何从 global.asax 中的 App_Error 返回 json 格式的异常数据？

> ID：13121149
> 
> 赞同：2
> 
> 时间：2012-10-29T11:55:29.723
> 
> 标签：json, asp.net-mvc, global-asax

我正在将 Asp.net MVC 项目作为一个单页应用程序来处理错误。
我想将json数据从`Application_Error`方法返回`global.asax`到UI并通过jQuery显示或调用控制器并返回partialView。
我不想刷新页面或将其重定向到错误页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-11-29T08:21:05.493

这是要走的路

```
protected void Application_Error(object sender, EventArgs e)
{
    Exception exception = Server.GetLastError();

    // if the error is NOT http error, then stop handling it.
    if (!(exception is HttpException httpException))
        return;

    if (new HttpRequestWrapper(Request).IsAjaxRequest())
    {
        Response.Clear();
        Response.TrySkipIisCustomErrors = true;
        Server.ClearError();

        Response.ContentType = "application/json";
        Response.StatusCode = 400;
        JsonResult json = new JsonResult
        {
            Data = exception.Message
        };

        json.ExecuteResult(new ControllerContext(Request.RequestContext, new BaseController()));
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-23T10:06:28.690

```
//Write This code into your global.asax file

    protected void Application_Error(Object sender, EventArgs e)
            {
            var ex = Server.GetLastError();
                //We check if we have an AJAX request and return JSON in this case
                if (IsAjaxRequest())
                {
                    Response.Write(JsonConvert.SerializeObject(new
                            {
                                error = true,
                                message = "Exception: " + ex.Message
                            })
                        );
                }
            }

            private bool IsAjaxRequest()
            {
                //The easy way
                bool isAjaxRequest = (Request["X-Requested-With"] == "XMLHttpRequest")
                || ((Request.Headers != null)
                && (Request.Headers["X-Requested-With"] == "XMLHttpRequest"));

                //If we are not sure that we have an AJAX request or that we have to return JSON 
                //we fall back to Reflection
                if (!isAjaxRequest)
                {
                    try
                    {
                        //The controller and action
                        string controllerName = Request.RequestContext.
                                                RouteData.Values["controller"].ToString();
                        string actionName = Request.RequestContext.
                                            RouteData.Values["action"].ToString();

                        //We create a controller instance
                        DefaultControllerFactory controllerFactory = new DefaultControllerFactory();
                        Controller controller = controllerFactory.CreateController(
                        Request.RequestContext, controllerName) as Controller;

                        //We get the controller actions
                        ReflectedControllerDescriptor controllerDescriptor =
                        new ReflectedControllerDescriptor(controller.GetType());
                        ActionDescriptor[] controllerActions =
                        controllerDescriptor.GetCanonicalActions();

                        //We search for our action
                        foreach (ReflectedActionDescriptor actionDescriptor in controllerActions)
                        {
                            if (actionDescriptor.ActionName.ToUpper().Equals(actionName.ToUpper()))
                            {
                                //If the action returns JsonResult then we have an AJAX request
                                if (actionDescriptor.MethodInfo.ReturnType
                                .Equals(typeof(JsonResult)))
                                    return true;
                            }
                        }
                    }
                    catch
                    {

                    }
                }

                return isAjaxRequest;
            }

//Write this code in your ajax function in html file

<script type="text/javascript">

    $.ajax({
            url: Url
            type: 'POST',
            data: JSON.stringify(json_data),
            dataType: 'json',
            cache: false,
            contentType: 'application/json',
            success: function (data) { Successfunction(data); },
            error: function (xhr, ajaxOptions, thrownError) {
                var obj = JSON.parse(xhr.responseText);
                if (obj.error) {
                    show_errorMsg(obj.message);
                }
            }
        });

</script> 
```

# sql-server - 将 nvarchar 转换为数据类型 numeric 的算术溢出错误

> ID：13121154
> 
> 赞同：0
> 
> 时间：2012-10-29T11:55:53.057
> 
> 标签：sql-server, math, overflow

我有一个存储过程，可以在我的本地环境和 QA 环境中正常工作。

但是在客户端的 UAT 环境中，它会给出错误

> *System.Data.SqlClient.SqlException:*
> *Message number="8115" severity="16" state="8">将 nvarchar 转换为数据类型 numeric 的算术溢出错误。*

它在安装在客户端位置的本地实例之一中也可以正常工作。我通过注释/取消注释代码行找到了给出错误的代码行并将其归零为

```
(
        @TotalHHInternalTo IS NULL
        OR
        (
            IsNumeric(E.[Xml].value(
                                    'declare default element namespace "http://www.xyz/1.0";
                                    (/Event/Data/CustomData/DataXML/ProductData/ProductParty/ProductCategory[@code != ''Protection'']/Product/FundValue)[1]',
                                    'nvarchar(50)'
                                    ) ) = 1
            AND
            EXISTS
            (
                SELECT 
                    1
                FROM E.[Xml].nodes(
                    'declare default element namespace "http://www.xyz/1.0";
                    /Event/Data/CustomData/DataXML/ProductData/ProductParty/ProductCategory[@code != ''Protection'']/Product') as P(E)
                HAVING SUM(P.E.value(
                                        'declare default element namespace "http://www.xyz/1.0";
                                        (FundValue)[1]',
                                        'decimal'
                                        )) <= @TotalHHInternalTo
            )   
        )
     ) 
```

该变量`@TotalHHInternalTo`是十进制类型的参数，它是作为 xml 传递给存储过程的搜索条件的一部分。在产品方下，我有 4 个产品类别，我需要合计除类型保护之外的所有基金价值。如果这 3 种类型的总和小于 `@TotalHHInternalTo`我想在搜索结果中显示它。

我添加了`isNumeric`条件来检查从 xml 中提取的值是否为数值。

但是我仍然收到溢出错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T12:07:00.880

检查我的括号，但您需要使用 CASE 将其转换为显式短路布尔评估。SQL Server 可以自由地以`AND`任一顺序评估条件，但您的判断是错误的。

```
 CASE WHEN IsNumeric(E.[Xml].value(
                                'declare default element namespace "http://www.focus-solutions.co.uk/focus360/1.0";
                                (/Event/Data/CustomData/DataXML/ProductData/ProductParty/ProductCategory[@code != ''Protection'']/Product/FundValue)[1]',
                                'nvarchar(50)'
                                ) ) = 0
        THEN 0
        WHEN
        EXISTS
        (
            SELECT 
                1
            FROM E.[Xml].nodes(
                'declare default element namespace "http://www.focus-solutions.co.uk/focus360/1.0";
                /Event/Data/CustomData/DataXML/ProductData/ProductParty/ProductCategory[@code != ''Protection'']/Product') as P(E)
            HAVING SUM(P.E.value(
                                    'declare default element namespace "http://www.focus-solutions.co.uk/focus360/1.0";
                                    (FundValue)[1]',
                                    'decimal'
                                    )) <= @TotalHHInternalTo
        )
        THEN 1
        ELSE 0 END = 1 
```

# c# - 从 c# 中的另一个类或静态方法更改 wpf 元素/控件

> ID：13121155
> 
> 赞同：4
> 
> 时间：2012-10-29T11:55:54.797
> 
> 标签：c#, .net, wpf, events, data-binding

我有一个 MainWindow，其中包含一个文本块 [statusTextblock]，它绑定到一个字符串 [StatusText]。StatusTextblock 需要显示来自另一个窗口的组合框结果。当它在另一个窗口中发生更改时，我将这些数据传递回主窗口，并且我已经制作了一个静态方法来在发生这种情况时更改字符串。

然而，这一切的静态使我无法在任何时候将我的文本框元素更改为 StatusText 的新值。

我考虑过解决方法来改变用户何时返回主窗口，但我没有成功。我尝试了 activate 和 uielement gotfocus 事件处理程序（我觉得第二个仍然是一个可能的修复）。

如果这很重要，主窗口也恰好总是打开的。我也更喜欢用代码做事而不是 xaml，但如果有任何帮助，我将不胜感激。

有任何想法吗？

MainWindow xaml，然后程序入口方法，然后静态事件改变statusText

```
<TextBlock Margin="190,0,0,0" HorizontalAlignment="Right" Name="StatusTextBlock" Text= {Binding}" ></TextBlock>

public MainWindow() //Obviously more went here, but it's not relevent
    {
        StatusTextBlock.DataContext = statusText;
    }

static public void changeStatusText(string status)
    {
        statusText = status;
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-29T13:32:21.027

当您尝试使用 MVVM 模式实现应用程序时，问题变得更容易解决。

1.  定义一个具有字符串属性 StatusText 的视图模型类：

    ```
    public class MainViewModel : INotifyPropertyChanged
    { 
      private string _statusText;

      public event PropertyChangedEventHandler PropertyChanged;

      public string StatusText
      {
        get
        {
            return _statusText;
        }

        set
        {
            if (value == _statusText)
                return;

            _statusText = value;

            if (PropertyChanged != null)
                PropertyChanged(this, new PropertyChangedEventArgs("StatusText"));
        }
      }
    } 
    ```

2.  将 MainWindow 的 DataContext 设置为 MainViewModel 的一个实例：

    ```
    public MainWindow  //Obviously more went here, but it's not relevant
    {  
       private static MainViewModel _mainViewModel = new MainViewModel();

       public MainWindow() 
       { 
          this.DataContext = _mainViewModel;
       }

       static public void ChangeStatusText(string status)
       { 
         _mainViewModel.StatusText = status;
       }
     } 
    ```

3.  设置数据绑定到视图模型：

    ```
     <TextBlock Margin="190,0,0,0" HorizontalAlignment="Right" Name="StatusTextBlock" Text="{Binding StatusText}" ></TextBlock> 
    ```

# android - WebView 和本机浏览器在简单 HTML 上崩溃

> ID：13121158
> 
> 赞同：3
> 
> 时间：2012-10-29T11:56:15.040
> 
> 标签：android, webkit, android-webview, android-browser

在我的应用程序的 WebView 中努力寻找崩溃的原因后，我发现一个非常基本的网页甚至会导致两个特定 HTC 型号上的本机 Android 浏览器崩溃。

有问题的型号是 HTC Desire HD (Android 2.3.5) 和 HTC Desire C (Android 4.0.3)。其他设备加载页面没有问题，包括其他一些 HTC 型号。

导致崩溃的 HTML：

```
<html>
  <body>
    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Alkmaar, Almere, Amersfoort, Amsterdam, Arnhem, Bergen op Zoom, Beverwijk, Breda, Delft, Den Bosch, Den Haag, Deurne, Deventer, Diemen, Eindhoven, Enschede, Goes, Groningen, Haarlem, Harlingen, Heemstede Hengelo, Hoorn, IJmuiden, Leeuwarden, Leiden, Nieuwegein, Nijmegen, Noordwijk, Oldenzaal, Oss, Oud-Beijerland, Purmerend, Roosendaal, Rotterdam, Scheveningen, Schiedam, Schiphol, Tiel, Utrecht, Valkenswaard, Velsen, Venray, Vlaardingen, Waalwijk, Zandvoort, Zeist en Zevenaar.</p>
  </body>
</html> 
```

为了方便访问：[http ://demos.pixplicity.com/so13121158.html](http://demos.pixplicity.com/so13121158.html)

奇怪的是：如果我删除了城市（“Alkmaar, [...] Zevenaar”），或者将它们移动到段落的开头，浏览器不再崩溃。

我收集了浏览器崩溃时的 Logcat 快照，但唯一有意义的行是：

> A/(7437)：检测到堆栈损坏：中止

我完全不知道为什么会这样。欢迎任何建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T03:02:35.063

我对 HTC one V 也有同样的看法。

根据[这个](https://stackoverflow.com/a/4475232/1871403)答案，“该消息表明本机堆栈损坏。使用 gcc 标志“-fstack-protector”时插入检测堆栈缓冲区溢出的代码。

所以我认为这是平台本身的一个错误。（无论如何，在我的情况下，因为我的应用程序中没有 JNI 代码）

# windows-installer - 我可以在 ARPCONTACT 属性中显示 URL 链接吗？

> ID：13121178
> 
> 赞同：5
> 
> 时间：2012-10-29T11:57:24.293
> 
> 标签：windows-installer

我的 msi 显示的是 URL，但不是链接。有没有办法在 msi 的 ARPCONTACT 属性中显示 URL 链接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T15:37:26.233

很不幸的是，不行。因为这个属性只能显示文本信息（参见[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/aa372105%28v=vs.85%29.aspx)）。但是您可以使用`Manufacturer`并`ARPURLINFOABOUT`实现类似的东西 - 在 ARP 中，您将看到字段 Publisher 以及您设置的 URL 链接`ARPURLINFOABOUT`。

# unix - 发送者终止时多播中 recvfrom() 的返回值

> ID：13121179
> 
> 赞同：2
> 
> 时间：2012-10-29T11:57:26.680
> 
> 标签：unix, multicast, recv

`recvfrom()`在多播中，发送者终止时的返回值是多少？在面向连接的情况下，上述函数将返回零，但在无连接环境中，返回值是什么，以便接收器可以正常终止。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T12:36:41.373

它类似于 udp：没有这样的值。不面向连接的意思就是：没有连接。无论是否存在连接（在更高级别上），都没有“簿记”。如果您愿意，您可以自己制作，例如通过在您的协议中传输某个值。

作为替代方案，您可以在一段时间内没有数据时超时。

# json - Dart + JSON + Neo4j：有教程吗？

> ID：13121181
> 
> 赞同：1
> 
> 时间：2012-10-29T11:57:31.670
> 
> 标签：json, neo4j, dart

最近我一直在玩 Dart 和 Neo4j，梦想着用这些新技术构建真正酷的东西。我想我了解 REST 并且可以将我的头脑围绕在 JSON 上。我已经阅读了有关在各个域中使用 REST 和 JSON 的 Dart 和 Neo4j 文档。然而，将两者放在一起，我只取得了非常有限的成功。我真的希望那里有人可能知道教程或可以让我入门的东西。

到目前为止，我已经能够让 Dart 查询位于*12.34.56.78:7474*的数据库并让它返回根节点的地址（*12.34.56.78:7474/db/data*）和管理界面。但是，当我尝试查询根节点时，我什么也得不到，尽管据我在文档中所说，我应该得到有关数据库版本等的信息。至少这是我在使用 RESTClient 查看数据库根节点时看到的。

我是一个非常有经验的 IT 技术和编码人员，但我不得不承认这对我来说是一个新领域。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T23:13:28.753

如果你能开始 Dart-Neo4j 集成然后让社区知道它会不会很酷？

/彼得

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T17:48:22.420

为了结束这一点，我认为在撰写本文时没有 Dart + Neo4j 教程。

您可能对 Dart + MongoDB 感兴趣，使用[http://pub.dartlang.org/packages/mongo_dart](http://pub.dartlang.org/packages/mongo_dart)

# c# - WCF：“取消”操作调用依赖于请求消息合同

> ID：13121183
> 
> 赞同：0
> 
> 时间：2012-10-29T11:57:43.073
> 
> 标签：c#, .net, wcf, messagecontract, wcf-extensions

这是我的合同：

```
 [ServiceContract]
public interface IMyServiceContract {
    [OperationContract]
    OperationResponse1 Operation1(OperationRequest1 req);

    [OperationContract]
    OperationResponse2 Operation2(OperationRequest2 req);
    } 
```

OperationRequest1 和 OperationRequest2 都继承自 BaseOperationRequest，后者包含进入服务的所有请求的凭据信息：

```
 [MessageContract]
public abstract class BaseOperationRequest {
    [MessageHeader(MustUnderstand = true)]
    public Guid Token { get; set; }

    [MessageHeader(MustUnderstand = true)]
    public string Password { get; set; }

    private User User { get; set; }
} 
```

OperationResponse1 和 OperationResponse2 都继承自一个基类：

```
 [MessageContract]
public abstract class BaseOperationResponse {
    [MessageHeader(MustUnderstand = true)]
    public bool Success { get; set; }

    [MessageHeader(MustUnderstand = true)]
    public ServiceErrors ErrorCode { get; set; }
} 
```

ErrorCode 是一个枚举。

正如您在请求中看到的那样，我有两个消息头和一个内部对象，它不会作为 SOAP 消息的一部分反序列化。这样做的原因是我想在我的服务实现处理它*之前将此对象注入到请求中。*每个操作实现都将使用这个对象，我不希望每个操作对我的数据层进行两次调用。

我想使用 WCF 可扩展性（通过属性）来执行两项任务：

1.  验证请求用户。
2.  使用复杂/复合业务对象在传入请求类上填充“用户”，以在每个操作中使用。

我调查了 IOperationInvoker、IDispatchMessageFormatter 和 IDispatchMessageInspector，但我没有发现它们中的任何一个都足够合适。

仅供参考，这是我的服务的原始示例实现，没有任何花哨的 WCF 可扩展性（或我的存储库/数据层调用）：

```
public class MyService: IMyServiceContract {
    public OperationResponse1 Operation1(OperationRequest1 req) {
        if(req.Token == new Guid("GUID VALUE") && req.Password == "password") {
            // Perform some actions....

            return new OperationResponse1 {
                Success = true
            }
        } else {
            return new OperationResponse1 {
                Success = false,
                Error = "You are not authenticated"
            }
        }
    }
    public OperationResponse2 Operation2(OperationRequest2 req) {
        if(req.Token == new Guid("GUID VALUE") && req.Password == "password") {
            // Perform some actions....

            return new OperationResponse2 {
                Success = true
            }
        } else {
            return new OperationResponse2 {
                Success = false,
                Error = "You are not authenticated"
            }
        }
    }
} 
```

IOperationInvoker 似乎是最合适的扩展点，但我不太清楚如何“取消”操作并覆盖对客户端的响应。这是我要去的地方：

```
/// <summary>
/// Provides an invoker that can be used to authenticate a BaseOperationRequest message.
/// </summary>
public class UserAuthenticationInvoker : IOperationInvoker {
    /// <summary>
    /// The original operation invoker.
    /// </summary>
    private IOperationInvoker _originalInvoker;

    /// <summary>
    /// The injected User service, for authentication.
    /// </summary>
    [Inject]
    public IUserService UserService { get; set; }

    public UserAuthenticationInvoker(IOperationInvoker originalInvoker) {
        _originalInvoker = originalInvoker;
    }

    #region Implementation of IOperationInvoker {

    public object[] AllocateInputs() {
        return _originalInvoker.AllocateInputs();
    }

    public object Invoke(object instance, object[] inputs, out object[] outputs) {
        // Validate base request
        if(!(inputs[0] is BaseOperationRequest)) {
            throw new ArgumentException("The request object must inherit from BaseOperationRequest in order for User authentication to take place.");
        }

        // Get BaseOperationRequest
        var req = (BaseOperationRequest)inputs[0];

        // Authenticate the User
        var authResult = UserService.AuthenticateUser(new AuthenticateUserRequest {
            Token = req.Token,
            Password = req.Password
        });
        if(authResult.Success) {
            // This is where I get stuck - do I need to modify "outputs"? If so, how do I tell the invoker that I want a particular response to be returned, and to cancel the rest of the operation?
            return _originalInvoker.Invoke(instance, inputs, outputs);
        }
        return _originalInvoker.Invoke(instance, inputs, out outputs);
    }

    public IAsyncResult InvokeBegin(object instance, object[] inputs, AsyncCallback callback, object state) {
        throw new NotImplementedException("The operation cannot be invoked asynchronously.");
    }

    public object InvokeEnd(object instance, out object[] outputs, IAsyncResult result) {
        throw new NotImplementedException("The operation cannot be invoked asynchronously.");
    }

    public bool IsSynchronous {
        get { return true; }
    }

    #endregion
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T11:49:28.493

我自己回答了这个问题。最后通过实现一些动态类型来修改 _originalInvoker 的“输入”，并将注入移动到属性，以便我可以模拟/单元测试调用程序。这是我的代码：

**属性：**

```
 [AttributeUsage(AttributeTargets.Method, AllowMultiple = false, Inherited = true)]
    public class AuthenticateUserAttribute : Attribute, IOperationBehavior {
        #region Implementation of IOperationBehavior

        public void Validate(OperationDescription operationDescription) {
        }

        public void ApplyDispatchBehavior(OperationDescription operationDescription, DispatchOperation dispatchOperation) {
            // Manual injection
            var userService = NinjectWebCommon.Kernel.Get<IUserService>();

            // Assign the custom authentication invoker, passing in the original operation invoker
            dispatchOperation.Invoker = new UserAuthenticationInvoker(dispatchOperation.Invoker, operationDescription.SyncMethod.ReturnType, userService);
        }

        public void ApplyClientBehavior(OperationDescription operationDescription, ClientOperation clientOperation) {
            throw new NotImplementedException("This behaviour cannot be applied to a server operation.");
        }

        public void AddBindingParameters(OperationDescription operationDescription, BindingParameterCollection bindingParameters) {
        }

        #endregion
    } 
```

**IOperationInvoker：**

```
public class UserAuthenticationInvoker : IOperationInvoker {
    /// <summary>
    ///     The original operation invoker.
    /// </summary>
    private readonly IOperationInvoker _originalInvoker;

    private readonly Type _responseType;

    private readonly IUserService _userService;

    public SupplierAuthenticationInvoker(IOperationInvoker originalInvoker, Type responseType, IUserService userService) {
        _originalInvoker = originalInvoker;
        _responseType = responseType;
        _userService = userService;
    }

    #region Implementation of IOperationInvoker {

    public object[] AllocateInputs() {
        return _originalInvoker.AllocateInputs();
    }

    public object Invoke(object instance, object[] inputs, out object[] outputs) {
        // Validate base objects request
        if(!(inputs[0] is BaseOperationRequest)) throw new ArgumentException("The request object must inherit from BaseOperationRequest in order for user authentication to take place.");

        dynamic response = Activator.CreateInstance(_responseType);
        if(!(response is BaseOperationResponse)) throw new InvalidOperationException("The response object must inherit from BaseOperationResponsein order for user authentication to take place.");

        var req = (BaseOperationRequest)inputs[0];

        // Authenticate the user
        var authResult = _userService.AuthenticateUser(new AuthenticateUserRequest {
            Token = req.Token,
            Password = req.Password
        });

        if(!authResult.Success) {
            // Authentication failed, return reflected response object.
            outputs = new object[0];
            // Set response headers
            response.Success = false;
            response.ErrorCode = ServiceErrors.AuthErrorInvalidTokenOrPassword;

            return response;
        }
        // Authentication success, set the user and call the original method
        dynamic modifiedInput = inputs;
        modifiedInput[0].User = authResult.User;

        var invoked = _originalInvoker.Invoke(instance, modifiedInput, out outputs);

        return invoked;
    }

    public IAsyncResult InvokeBegin(object instance, object[] inputs, AsyncCallback callback, object state) {
        throw new NotImplementedException("The operation cannot be invoked asynchronously.");
    }

    public object InvokeEnd(object instance, out object[] outputs, IAsyncResult result) {
        throw new NotImplementedException("The operation cannot be invoked asynchronously.");
    }

    public bool IsSynchronous {
        get { return true; }
    }

    #endregion
} 
```

然后将 Invoker 应用于服务合同，如下所示：

```
[ServiceContract]
public interface IMyServiceContract {
    [OperationContract]
    [AuthenticateUser]
    OperationResponse1 Operation1(OperationRequest1 req);

    [OperationContract]
    [AuthenticateUser]
    OperationResponse2 Operation2(OperationRequest2 req);
} 
```

# php - system() 已被禁用错误消息

> ID：13121185
> 
> 赞同：6
> 
> 时间：2012-10-29T11:57:47.447
> 
> 标签：php, wordpress

我已将 wordpress 网站复制到正确的域，但是当我查看它时收到以下错误消息：

```
Warning: system() has been disabled for security reasons in /home/paddocch/public_html/wildlionmedia.co.uk/wp-includes/cron.php on line 262 
```

[http://www.wildlionmedia.co.uk/](http://www.wildlionmedia.co.uk/)

知道如何解决吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-29T12:05:48.740

该`system()`函数用于允许 PHP 在系统的命令行 shell 上执行命令。您的新托管服务已禁用该功能，因为它可能是一个漏洞。

您需要检查您的`php.ini`文件并搜索标题为 - 的条目`disable_functions`。其中有一个已禁用的功能列表。您可以从列表中删除您想要的内容（包括`system()`功能。

如果您无权访问您的`php.ini`文件，则必须与您的托管服务提供商联系并要求他们启用该功能（或禁用限制）。

欲了解更多信息 - [http://www.php.net/manual/en/ini.core.php#ini.disable-functions](http://www.php.net/manual/en/ini.core.php#ini.disable-functions)

# .htaccess - 重定向后的 URL 重写

> ID：13121186
> 
> 赞同：2
> 
> 时间：2012-10-29T11:57:53.713
> 
> 标签：.htaccess, url, subdomain, rename

我已经设法让 .htaccess 将我的一些域重定向到子域。现在我想更改网址的标题。或者换一种说法，在浏览器的 url 输入中更改 url 在屏幕上的显示方式，但我似乎无法让它工作。我一定忽略了什么。

我希望它不会显示 http://subdomain.domain.com/，而只是显示 http://www.subdomain.com/。*而且我确实拥有必要的域*。

我当前的代码：

```
 RewriteEngine On
    Options +FollowSymlinks
    RewriteCond %{HTTP_HOST} ^(www\.)?sub1\.com$ [NC] 
    RewriteRule ^ http://sub1.domain.com [R,L]
    RewriteCond %{HTTP_HOST} ^(www\.)?sub2\.com$ [NC]
    RewriteRule ^ http://sub2.domain.com [R,L] 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T12:13:12.200

尝试这个

```
RewriteCond %{HTTP_HOST} ^sub1\.domain\.com$
RewriteRule ^/(.*) http://sub1.com/$1 [redirect,last]
RewriteCond %{HTTP_HOST} ^sub2\.domain\.com$
RewriteRule ^/(.*) http://sub2.com/$1 [redirect,last] 
```

# javascript - 如何获得中引用的图像的自然大小在javascript中

> ID：13121188
> 
> 赞同：0
> 
> 时间：2012-10-29T11:58:04.733
> 
> 标签：javascript, html, image, input

我的网页上有一个`input`类型。`"image"`我想获取原始图像的尺寸（不是 DOM 元素）。如何在javascript中做到这一点？

我知道的唯一解决方案是获取`src`属性的值，手动加载图像并按照[此处](https://stackoverflow.com/a/626505/261217)所述获取其大小。但我知道图像已经加载，因为它显示在页面上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T12:19:27.553

一旦您没有其他样式`<input type="image"`，您可以使用与标签`clientWidth/clientHeight`相同的样式`img`（默认情况下，按钮将具有与 src 图像相同的宽度/高度）。不幸的是，没有浏览器支持`naturalWidth/naturalHeight`图像类型的输入。[演示](http://jsfiddle.net/8ktUA/4/)

同时 - 我认为使用额外的 img 元素来获取图像的宽度/高度没有什么大问题。在大多数情况下，图像将从缓存中获取。

# facebook - PHP 在 oAuth 脚本期间崩溃

> ID：13121190
> 
> 赞同：0
> 
> 时间：2012-10-29T11:58:15.433
> 
> 标签：facebook, oauth, nginx, php

我刚刚安装了 Nginx 1.2.4 和 PHP 5.4.0（来自 svn）（php fpm）。*CentO 5.8 64*

我遇到的问题是，当我运行任何社交 oAuth 脚本时，PHP 就会崩溃。我尝试使用我知道在其他服务器上工作的各种脚本登录 Facebook、Twitter 和 Google。当我加载脚本时，我从 Nginx 收到 502 错误。我在日志中发现了这些错误：

在 php-fpm 日志中：

```
WARNING: [pool www] child 23821 exited on signal 11 (SIGSEGV) after 1132.862984 seconds from start 
```

在 nginx 日志中：

```
ERROR: recv() failed (104: Connection reset by peer) while reading response header from upstream 
```

据我所知，当 PHP 尝试向任何 oAuth 服务器发出请求时，它会出错。

[https://github.com/mahmudahsan/PHP-SDK-3.0---Graph-API-base-Facebook-Connect-Tutorial-Source](https://github.com/mahmudahsan/PHP-SDK-3.0---Graph-API-base-Facebook-Connect-Tutorial-Source)例如是在我的其他机器上完美运行的脚本之一，但会导致 PHP碰撞。

我发现：[Nginx + PHP-FPM 502 Bad Gateway](https://stackoverflow.com/questions/3616191/nginx-php-fpm-502-bad-gateway)这似乎是一个类似的问题，但我找不到解决它的方法。

*** ++++ 更新 ++++ ***

现在，我一直在对正在播放的 1 个脚本进行一些调试。

如果您转到第 808 行[http://pastebin.com/gSnzRtXb](http://pastebin.com/gSnzRtXb)，它将运行 curl_exec() 命令。

当它运行时，它会崩溃。如果我回显“测试”；退出；就在那条线之上，它回显是正确的，如果我在这条线之下做它，php会崩溃。

这意味着导致崩溃的是第 808 行。

所以我做了一个非常简单的脚本来做一些测试：[http](http://pastebin.com/Rshnyhcm) : //pastebin.com/Rshnyhcm 它也使用 curl_exec，但运行得很好。

因此，我开始从 facebook 脚本中深入研究该查询，以查看 $opts 数组从第 806 行包含哪些值。

该数组的输出是： http: [//pastebin.com/Cq9ffd3R](http://pastebin.com/Cq9ffd3R)

问题是什么，我仍然不知道:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T21:52:04.303

通过将 PHP 更新到 5.3.8 解决了这个问题

# powershell - Get-Childitem 解决方法

> ID：13121192
> 
> 赞同：1
> 
> 时间：2012-10-29T11:58:18.827
> 
> 标签：powershell, path, max, robocopy, get-childitem

我想确定哪些文件/文件类型在文件服务器上占用的空间最多。由于许多用户创建的文件名称/路径长度超过 260 char gci 不起作用。（shortcuts-in-shortcuts-in-shortcuts-infinity）

我的下一步是通过使用显示的东西来创建解决方法，大小文件名和路径没有 max_path var 限制。（ROBOCOPY）

这是我的功能：

```
Function Get-RoboFileSize($source_name){

$filelog=robocopy.exe /e /l /njh /njs /ndl /fp /nc /bytes $source_name $env:Temp

foreach ($item in $filelog){

   if ($item -like "*$source_name*"){   

         $base=$item -Replace "[\s]",""
         $Filename=$base -Replace "^[0-9]{1,}",""
         $Filesize=$base -Replace "[^\d][a-zA-Z0-9~@#\^\$&\*\(\)-_\+=\[\]\{\}\|\\,\.\?\!\%\§öäüÖÄÜßáàÃ°Þ]{1,}",""

         New-Object PSObject -Property @{
                                            Filename=$Filename
                                            FileSize= ("{0:#}" -f($Filesize/1MB))

         }              
    }

} 
```

}

这种方法有效，但我的问题是它消耗大量资源。

有人知道如何改进此功能....也许是另一种解决方法的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T15:53:26.453

Microsoft 知道[路径长度限制](http://connect.microsoft.com/PowerShell/feedback/details/276235/path-length-limitations)。

有一篇文章提供了 C# 中的解决方法。如果您真的关心性能，那么这是您最好的选择：[.NET 中的长路径，第 1 部分，共 3 部分 [Kim Hamilton]](http://blogs.msdn.com/b/bclteam/archive/2007/02/13/long-paths-in-net-part-1-of-3-kim-hamilton.aspx)

如果您想坚持使用 Powershell，请在[powershell.com 论坛](http://powershell.com/cs/forums/t/10114.aspx)上查看另一种解决方法。

# uml - 想知道给定用例的UML图

> ID：13121193
> 
> 赞同：0
> 
> 时间：2012-10-29T11:58:19.283
> 
> 标签：uml

以下是我的用例场景，请帮助我创建 UML 图：

1 在给定的输入字段中输入数据。2 “保存”按钮 3 一旦用户单击保存按钮，系统需要检查给定的详细信息是否已在现有数据库中可用。如果没有，则需要将给定的值保存到数据库中，并且系统必须显示成功消息。4 成功插入数据后，在下面的网格中显示相同的数据。5 如果给定的详细信息已经存在于数据库中，那么系统需要向用户显示一条消息。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T12:27:16.910

基本上它是一个流程，大多数情况下我们将使用下面的 umls。

活动图/流程图

序列图

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T05:26:24.940

在您的系统中，您可以添加以下基本用例 1：插入数据 2：检查数据的验证 3：更新数据 4：返回错误

演员是 1.user 2.也许你可以添加一个管理员演员来控制系统

# c# - 使用 edtFTPnet，C# 列出 FTP 目录/子目录

> ID：13121196
> 
> 赞同：0
> 
> 时间：2012-10-29T11:58:39.113
> 
> 标签：c#, ftp, ftpwebrequest

在我的 FTP 服务器上，我有以下文件夹结构

```
 - Parent Directory
   -a.txt
   -b.txt.old
   -SubDirectory1
     -c.txt
     -NestedSubDirectory1
       -d.txt
   -SubDirectory2
     -e.txt
     -f.txt.old 
```

SD的数量不是固定的。我需要一种方法来获取所有文件（可以是任何格式），而无需从父目录中获取 .old 扩展名。我目前正在使用第 3 方 dll edtFTPnet。

```
ftpConnection.GetFileInfos()Where(f => !(f.Name.EndsWith(".old"))).ToList(); 
```

这有助于我获取当前工作目录级别的文件和文件夹的详细信息。

有人可以告诉我一种方法来获取包含父目录、子目录和嵌套子目录的所有文件。

该解决方案可能使用也可能不使用 edtFTPnet。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T12:11:56.220

`FTPConnection.GetFileInfos()`返回一个数组`FTPFile`。该类`FTPFile`有一个布尔属性`Dir`，指示其文件名是访问文件（假）还是目录（真）。

像这样的东西应该工作：

```
void ReadSubDirectories(FTPConncetion connection, FTPFile[] files)
{
    foreach (var file in files)
    {
        if (file.Dir)
        {
            // Save parent directory
            var curDir = connection.ServerDirectory;

            // Move into directory
            connection.ChangeWorkingDirectory(file.Name)

            // Read all files
            ReadSubDirectories(connection, connection.GetFileInfos());

            // Move back into parent directory
            connection.ChangeWorkingDirectory(curDir)
        }
        else
        {
            // Do magic with your files
        }
    }
} 
```

但是，您最好只使用 .NET 的内置[`FtpWebRequest`](http://msdn.microsoft.com/en-us/library/system.net.ftpwebrequest.aspx)类，因为它的方法和命名约定更清晰，文档更好，并且更容易在线查​​找参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T12:51:30.860

尝试使用这样的扩展：

```
class Program
    {
        static void Main(string[] args)
        {
            using (var connection = new FTPConnection
            {
                ServerAddress = "127.0.0.1",
                UserName = "Admin",
                Password = "1",
            })
            {

                connection.Connect();
                connection.ServerDirectory = "/recursive_folder";
                var resultRecursive =
                    connection.GetFileInfosRecursive().Where(f => !(f.Name.EndsWith(".old"))).ToList();
                var resultDefault = connection.GetFileInfos().Where(f => !(f.Name.EndsWith(".old"))).ToList();

            }

        }
    }

    public static class FtpClientExtensions
    {
        public static FTPFile[] GetFileInfosRecursive(this FTPConnection connection)
        {
            var resultList = new List<FTPFile>();
            var fileInfos = connection.GetFileInfos();
            resultList.AddRange(fileInfos);
            foreach (var fileInfo in fileInfos)
            {
                if (fileInfo.Dir)
                {
                    connection.ServerDirectory = fileInfo.Path;
                    resultList.AddRange(connection.GetFileInfosRecursive());
                }
            }
            return resultList.ToArray();
        }
    } 
```

# javascript - Javascript在内存中“保存”函数数据？

> ID：13121197
> 
> 赞同：1
> 
> 时间：2012-10-29T11:58:47.537
> 
> 标签：javascript

[示例](http://jsfiddle.net/yMc5K/)：

```
var myFunctArray=new Array();

for(var i=0; i<10; i++) {
    addValues(i);
}

function addValues(myPoint)
{
    myFunct=function () {
        var myVar="Line " + myPoint;
        console.log(myVar);
    }    

    myFunctArray.push(myFunct);        
}

myFunctArray[3](); 
```

当我调用 4° 函数时，它如何记住 myPoint 的值？事实上，它是第 3 行的输出，因此对于每个函数，myPoint 值必须“存储”在某处。

`myFunct`那么，它在堆栈内存中存储了 10 个“定义”吗？

希望我的意思很清楚。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T12:01:05.907

这叫做闭包。创建新函数时当前在范围内的任何变量都与该闭包相关联。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T12:01:05.137

> 那么，它在堆栈内存中存储了 myFunct 的 10 个“定义”吗？

是的，它确实。

您的数组包含十个闭包，每个闭包都捕获了自己的`myPoint`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T12:25:15.227

盗贼大师回答了你的问题。是的，此代码将使用越来越多的内存，具体取决于您的数组包含多少闭包。不得不说，大多数现代引擎都会为分配给变量的函数分配一个引用，以及一个包含闭包变量`MyFunct`的特定*“调用对象” 。*换句话说，您的数组看起来类似于：

```
myFuncArray[0] = {call:
                     {myPoint:'Whatever value was passed to the addValues function the first time'},
                  valueOf: myFunct};
//the actual value is a reference to myFunct
//JS provides an implicit link to the call property, which is bound to this particular reference
myFuncArray[1] = {call:
                     {myPoint:'The value passed to addValues the second time'},
                 valueOf: myFunct}; 
```

您无法访问对象本身，但这只是思考 JS 如何将事物组织在内存中的方式。
稍微偏离主题，但您正在使用`MyFunct`变量创建一个隐含的全局：

```
function addValues(myPoint)
{
    var anotherClosureVar = 'This will be accessible, too: it\'s part of the closure';
    var myFunct = function()
    {//use var to declare in addValues scope, instead of using an implied global
        var myVar="Line " + myPoint;
        console.log(myVar);
        console.log(anotherClosureVar);//will work, too
    };
    myFunctArray.push(myFunct);
} 
```

总而言之，如果这是您的代码，内存应该不是什么大问题。即使这段代码要在旧的 JScript 引擎上运行，也需要一些时间才能用完大量的内存。
尽管如此，考虑这样的事情是一个好习惯，我希望我在这里说得通，我不是母语人士，这使得解释 JS 更*抽象*的方面有些棘手

# ruby-on-rails - 简化和纠正 RSpec 控制器测试

> ID：13121205
> 
> 赞同：2
> 
> 时间：2012-10-29T11:59:34.680
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, tdd, bdd

我有一些 RSpec 控制器测试。有些有效，有些无效，我正试图弄清楚如何在地球上修复它们并提高它们的效率

理想情况下，我想看看是否可以将每个规范转换为以下形式

```
subject { ... }
  it { ... }
  it { ... }
  it { ... } 
```

请注意，对于我所有的控制器规格，我已经为实际的控制器操作编写了宏。这些宏都经过测试并且都可以工作，并且名称使它们的作用相当明显。

我的“创建”测试：

```
formats ||= ["html", "js"]
formats.each do |format|
  context "valid attributes" do
    subject { do_post_create( :customer, valid_attributes, format ) }
      its(:response_code) { should eq(302)}
      it { should redirect_to admin_customer_path(Customer.find_by_id(???))}
      it { expect { subject }.to change(Customer, :count).by(1) }
  end

  context "invalid attributes" do
    subject { do_post_create( :customer, invalid_attributes, format ) }
      its(:response_code) { should eq(200)}
      it { should render_template :new }
      it { expect { subject }.to_not change(Customer, :count).by(1) }
  end
end 
```

在该规范中，我一直试图找出某种方法来从 post 语句中获取新创建对象的 ID。我试过“Customer.last”，但这似乎不起作用。有什么想法吗？

我的“更新”规范：

```
formats ||= ["html", "js"]
formats.each do |format|
  context "valid attributes" do
    let(:object) { FactoryGirl.create(:customer) }
    subject { do_put_update( class_to_symbol(model), object.id, attributes, format ) }
      its(:response_code) { should eq(302)}

    it "does alter #{model}" do
      do_put_update( class_to_symbol(model), object.id, attributes, format )
      assigns(:customer).should eq(object)
      flash[:notice].should =~ /Success/
      object.reload
      attributes.each do |key, value|
        object.send(key.to_s).should eq(value)
      end
    end
  end
  context "invalid attributes" do
    let(:object) { FactoryGirl.create("customer") }
    let(:invalid_attributes) { {:username => "!"} }
    subject { do_put_update( class_to_symbol(model), object.id, invalid_attributes, format ) }
      its(:response_code) { should eq(200)}

    it "does not alter #{model}" do
      do_put_update( class_to_symbol(model), object.id, invalid_attributes, format )
      assigns(:customer).should eq(object)
      flash[:notice].should =~ /Fail/
      object.reload
      attributes.each do |key, value|
        object.send(key.to_s).should_not eq(value)
      end
    end
  end
end 
```

在更新测试中，我想尝试以更简洁的方式表达第二个块，理想情况下，我可以对所有测试使用相同的“主题”语句。那可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T12:27:14.117

我认为你在考虑这些规格。不要试图将每个规范强制转换为预定义的格式（`subject`/ `it`/...），而是编写规范，以便它们清楚地记录应该发生的情况，*然后*尝试重构代码。

恰当的例子：使用隐式`subject`控制器动作。`subject`并且`its`旨在与对象一起使用，而不是与方法一起使用，并且只有在以这种方式使用时才真正有意义。例如，这是有道理的：

```
subject { [1, 2, 3, 4] }
its(:size) { should == 4 } 
```

在这里，测试的是什么非常清楚：一个 4 元素数组的大小为 4。

但是，当您编写时：

```
subject { do_post_create( :customer, valid_attributes, format ) }
its(:response_code) { should eq(302)} 
```

在不检查操作的情况下，您从哪里获取响应代码并不清楚`do_post_create`。您说宏的名称“使它们的作用相当明显”，但它们并没有使*它们将返回的内容*变得相当明显，这是使用隐式主题的关键，因为它是成为主题的返回值.

写出来会更清楚：

```
it "responds with a 302" do
  do_post_create(:customer, valid_attributes, format)
  response.should eq(302)
end 
```

我也不建议混合使用或不使用隐式主题的规范，因为这会使您实际测试的内容更加混乱。例如，在您的无效属性`context`块中，您设置了一个主题，但是在您的第二个规范中您实际上测试了`customer`( `assigns(:customer).should eq(object)`) 的分配，因此基本上该主题与此测试无关。（但是，通过在此处设置主题然后不使用它，您实际上是*两次*发送 PUT 请求（通过`do_put_update`），这必然会导致问题 - 再次，另一个不在`subject`块中发出请求的原因。）

我可以继续，但我想你明白了。如果您可以在不影响可读性的情况下做到这一点，那么使规范简短而有趣是很棒的，但是在这种情况下，我认为您已经过火了。

只是我的两分钱，希望它有帮助。

ps 如果上面的观点看起来有点极端，请阅读[隐式主题的文档](https://www.relishapp.com/rspec/rspec-core/v/2-10/docs/subject/implicitly-defined-subject)，您会看到他们实际上建议不要在面向公众的测试中使用隐式主题：

> 虽然下面的示例演示了如何将主题用作面向用户的概念，但我们建议您保留它以支持自定义匹配器和/或隐藏其使用的扩展库。

# java - Eclipselink 未检测到脏实体

> ID：13121206
> 
> 赞同：3
> 
> 时间：2012-10-29T11:59:34.817
> 
> 标签：java, jpa, eclipselink

我正在试验eclipselink。我正在尝试更新数据库中的现有实体。JPA 实体只有公共字段，并且字段使用 JPA 注释进行注释。该代码使用`EntityManager.find()`.

该代码创建 JPA 实体的实例，为实体的公共字段分配值并调用 EntityManager.merge(entity) 方法。Eclipselink 不更新数据库记录。我启用了日志以查看 Eclipselink 是否发出 SQL 语句。

Eclipselink 不发布任何更新声明。这是否意味着即使我使用字段持久性，我也不能为实体的公共字段赋值而不是使用 setter 方法？

谢谢， 奇尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T12:13:59.983

Weaving 引入了一些优化，例如惰性 onetoone 和 manytones 以及更改跟踪。这些可以工作的唯一方法是如果您在实体上使用访问器方法，但如果这不是一个选项，您可以根据需要关闭它们。 有关更改跟踪的详细信息，请参见 [http://eclipse.org/eclipselink/documentation/2.4/jpa/extensions/a_changetracking.htm 。](http://eclipse.org/eclipselink/documentation/2.4/jpa/extensions/a_changetracking.htm)

# python - Python - 正则表达式 - 查找除标签之外的每个单词

> ID：13121212
> 
> 赞同：0
> 
> 时间：2012-10-29T12:00:00.263
> 
> 标签：python, regex

如何使用 RE 模块查找除标签中的单词之外的所有单词？

我知道如何找到一些东西，但是如何以相反的方式去做呢？就像我写了一些要搜索的东西，但实际上我想搜索除标签和标签本身之外的所有单词之外的每个单词？

到目前为止，我管理了这个：

```
f = open (filename,'r')
data = re.findall(r"<.+?>", f.read()) 
```

好吧，它会打印`<>`标签内的所有内容，但是如何让它找到除了这些标签内的所有单词？我试过`^`, 在里面模式的开头使用`[]`，但是符号按`.`字面意思处理，没有特殊含义。我也设法解决了这个问题，方法是拆分字符串，使用`'''\= <>"'''`，然后检查整个字符串中`<>`标签内的单词（如 align、right、td 等），并将不在 <> 标签内的单词附加到另一个列表中。但这有点丑陋的解决方案。

`<>`除了里面的任何东西和这些标签本身之外，有没有一些简单的方法来搜索每个单词？因此，假设`'hello 123 <b>Bold</b> <p>end</p>'` 带有`re.findall`, 的字符串将返回：

```
['hello', '123', 'Bold', 'end'] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T12:10:25.190

对这种任务使用正则表达式并不是最好的主意，因为你不能让它适用于所有情况。

应该抓住大多数此类词的解决方案之一是正则表达式模式

```
\b\w+\b(?![^<]*>) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T12:12:40.147

如果你想[避免](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)使用正则表达式，[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)可以很容易地从 HTML 文档中获取文本：

```
from BeautifulSoup import BeautifulSoup

soup = BeautifulSoup(html_string)
text = "".join(soup.findAll(text=True)) 
```

从那里，你可以得到单词列表`split`：

```
words = text.split() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T12:04:25.597

类似的东西`re.compile(r'<[^>]+>').sub('', string).split()`应该可以解决问题。

您可能想阅读[这篇](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)关于使用正则表达式处理上下文无关语言的文章。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T12:07:29.670

去掉所有标签（使用你原来的正则表达式），然后匹配单词。

唯一的弱点是字符串中是否有`<`s 而不是标记分隔符，或者 HTML 格式不正确。在这种情况下，最好使用 HTML 解析器。

# android - 如何在 onSensorChanged 中获得 0 到 180 度

> ID：13121220
> 
> 赞同：0
> 
> 时间：2012-10-29T12:00:45.487
> 
> 标签：android, android-layout

```
x = (int) Math.pow(sensorEvent.values[1], 2); 
```

从这段代码中，我只得到 0-90 的值，但我想要从右到左的 0-180，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T12:17:49.127

要从传感器获取角度，您必须使用`Sensor.TYPE_ACCELEROMETER`& `Sensor.TYPE_MAGNETIC_FIELD`：

[从传感器](http://capycoding.blogspot.in/2012/10/get-angle-from-sensor-in-android.html)检查这个角度代码，我希望它对你有用

# apache-flex - Flex Air - 获取窗口的深度顺序（z-index）

> ID：13121232
> 
> 赞同：2
> 
> 时间：2012-10-29T12:01:36.877
> 
> 标签：apache-flex, actionscript, air

有人知道我们是否可以得到所有打开的 nativeWindows 的订单吗？

我想比较两个nativeWindows，并找出上面是哪个窗口。

谢谢 ！

编辑： `NativeApplication.nativeApplication.openedWindows` 返回所有打开的 nativeWindows 的数组。

但是窗户是按照它们打开的顺序排列的。不是按深度顺序...例如，如果我们单击一个窗口，它将占据第一位，但它在此数组中的位置不会改变。

是否还有另一个数组，其中的窗口会按此顺序排列？或者另一种方式来找到它？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T15:20:08.880

据我所知，没有本地方法可以做到这一点。如果您需要根据某些条件确保正确的窗口位于堆栈的顶部/底部，则可以使用`orderToFront`and`orderToback`方法（请参阅[文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/NativeWindow.html)）。

如果您的要求更复杂，您可以考虑实现自己的系统来跟踪深度（当调用任何 order 方法或触发`activate`and`close`事件时重新排序您的数组）。

# java - Glassfish 服务器 3.1 自行关闭

> ID：13121233
> 
> 赞同：3
> 
> 时间：2012-10-29T12:01:43.260
> 
> 标签：java, glassfish-3, netbeans-7

Glassfish 服务器 3.1 在亚马逊云上运行。一段时间后它会自行关闭。可能是什么原因？

`asadmin`我必须每次都使用命令手动启动服务器。我想让它活很长时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T12:07:10.360

Glassfish 不应该仅仅“关闭自己”。与 Tomcat 不同，我很确定 Glassfish 没有关闭端口。

您应该检查 /glassfish/domains/[domainname]/logs 以获取任何可能有异常或类似情况的日志信息。如果您可以提供这些日志（带有适当的错误），我们可能会为您提供进一步的帮助。

它使用 Amazon EC2 的事实应该是无关紧要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-06T01:21:34.703

检查这一点： [Glassfish 4 服务器意外停止](https://stackoverflow.com/questions/19079951/glassfish-4-server-stops-unexpectedly) RAM 可能是问题所在。并且 JVM 内存不足

# android - 安卓平板电脑的密度和尺寸

> ID：13121234
> 
> 赞同：5
> 
> 时间：2012-10-29T12:01:47.583
> 
> 标签：android, android-screen-support

我在不同平板电脑和配置上的屏幕视图出现问题。

我有一个 800x480px 的平板电脑 wolder mitab，我的应用程序非常完美。但是我创建了一个与我的平板电脑分辨率相同的虚拟机，并且文本更大，溢出屏幕。

我有两个文件夹：7 英寸平板电脑的布局和较大平板电脑的 x-large。我尝试过其他 7 英寸、9 英寸和 10 英寸的平板电脑，看起来不错。但是，模拟器中的所有内容有多糟糕，您在平板电脑中使用不同密度的花花公子。

我在清单中也有这些行：

```
<supports-screens
    android:largeScreens="true"
    android:anyDensity="true"
    android:xlargeScreens="true"/> 
```

我怎样才能解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T12:20:09.057

信任模拟器并在平板电脑上期望相同通常是不可取的，除非模拟器完全设置为模拟平板电脑（如设置抽象的 LCD 密度等）。最好在连接到您的电脑的不同设备（尤其是非标准中文设备）上直接调试 eclipse/test。如果您没有设备，请维护多个版本的模拟器，每个版本都针对特定设备，并创建模拟器以在分辨率、抽象 LCD 密度、RAM、存储等方面与设备几乎完全相同，不经过测试不容易解决此问题. 但只要您遵循以下原则，它就应该起作用：http: [//developer.android.com/training/multiscreen/screendensities.html](http://developer.android.com/training/multiscreen/screendensities.html)和 [http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

# c++ - 为什么我不能用“\x”初始化字符串

> ID：13121236
> 
> 赞同：1
> 
> 时间：2012-10-29T12:02:00.623
> 
> 标签：c++, string

为什么我不能用“\x”初始化字符串

```
string s = "\x" 
```

如果我以后可以写的话会很有用：

```
int grade = 0;
while (cin >> grade)
    if (grade < 60)
        cout << "Your grade letter is F!";
    else {
        x = 50 - grade/10;
        s = s + static_cast<string>(x);
        cout << "Your grade letter is " << s << endl; 
    } 
```

我更喜欢答案，它使用转义序列计算来设置等级字母。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T12:03:49.523

因为语法禁止它。字符串文字中的`\x`序列是一个前缀，意思是“这是一个字符的十六进制代码”，但您试图省略代码部分。这意味着无法解析文字并确定将哪个字符放入字符串中。

请注意，这是编译时的事情，它必须能够通过查看文字本身来计算由字符串文字表示的字符序列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T12:04:16.907

您误解了转义序列的处理方式。它们是在编译时计算的，而不是在运行时计算的。换句话说，当你写

```
"\x48" 
```

它在运行时不会变成四个字符的字符串；编译器在程序运行之前将其转换为单字符串。

您也误解了`static_cast<...>`：如果`x`不是a ，*将*`std::string`其静态转换为字符串会导致错误；如果它是 a `std::string`，则静态转换将无效。

您可以在运行时创建一个单字符串，并将一个字符代码放入其唯一的字符中，如下所示：

```
int grade = 83; // <<<=== 1..100
grade--;
int gradeLetter = g < 60 ? 'F' : ('A' + (100-grade)/10);
// At this point you can do the output:
cout << "Your grade is " << gradeLetter << endl;
// If you must have a string, do this:
string gradeStr(1,gradeLetter);
cout << "Your grade is " << gradeStr << endl; 
```

# mysql - 从数据库中获取文章以及连接标签的最佳方式

> ID：13121237
> 
> 赞同：-1
> 
> 时间：2012-10-29T12:02:03.100
> 
> 标签：mysql, sql

我想从 MySQL 数据库中获取它们连接的文章和所有标签名称。我的 SQL 代码：

```
CREATE TABLE articles (
    id INT UNSIGNED NOT NULL AUTO_INCREMENT,
    PRIMARY KEY (id)
)

CREATE TABLE tags (
    id INT UNSIGNED NOT NULL AUTO_INCREMENT,
    name VARCHAR(25) NOT NULL,
    PRIMARY KEY (id)
)

CREATE TABLE connections (
    art_id INT UNSIGNED NOT NULL,
    tag_id INT UNSIGNED NOT NULL
); 
```

我应该执行几个查询还是做一个大查询？我怎样才能做到这一点？我试着和 JOIN 一起玩，但似乎不能那样做。

PS。我一直在搜索，但没有关于 SO 的确切问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T12:04:45.810

```
select a.id, group_concat(t.name) as tags
from articles a
left join connections c on c.art_id = a.id
left join tag t on t.id = c.tag_id
group by a.id 
```

此查询每篇文章返回 1 行，[group_concat()](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)将以[逗号分隔列表](http://en.wikipedia.org/wiki/Comma-separated_values)的形式返回所有连接标签的名称（如果没有连接标签，则返回 null）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T12:18:03.543

您有了一个良好的开端 - 但这里有一些可以优化的地方。

我们还假设您的 Article 表有一个 ID 和一个 Title 字段（只是为了给这个查询添加一些趣味）。

简单回答你的问题：

```
Select a.ID "ID", a."Title" "Title", t.Name "Tag_Name"
From connections c
     Left Join article a 
     on a.id = c.art_id
     Left Join tags t 
     on t.id = c.tag_id
-- If you want to filter on a certain article ID 
WHERE a.id = @SomeArticleParam 
```

我真的会建议一些事情来优化这些表：

1.  由于连接直接链接文章和标签，我会在连接表中添加外键引用。这是一个很好的链接：[外键链接](http://www.w3schools.com/sql/sql_foreignkey.asp)。
2.  索引您的连接表 - 这将在引用特定标签或文章时允许更快的查询。唯一索引将有助于防止在连接表中添加重复的文章/标签对。这是一个很好的链接，可以帮助您入门：[索引链接](http://www.w3schools.com/sql/sql_create_index.asp)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T12:04:44.920

试试这个

```
 select a.(*),t.name from articles a
  inner join connection c on a.id=c.art_id
  inner join tags t on c.tag_id=t.id 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T12:07:05.937

```
 SELECT articles.*,tags.* FROM articles , tags,connections 
 where tags.id=connections.tag_id  and articles.id=connections.art_id 
```

# zend-form - 给定的类型无效。字符串预期 - Zend 框架 2

> ID：13121239
> 
> 赞同：0
> 
> 时间：2012-10-29T12:02:18.067
> 
> 标签：zend-form, zend-framework2

我正在研究 Zend Framework 2，尤其是 Zend Forms。我已经声明了一个选择下拉框

形式：

```
$selectElement = new Element\Select('selectElement');
    $selectElement->setAttribute('title', 'Select a Value')
            ->setAttribute('id', 'id');

    $data = array(
        array(
           //Fetching the values from database
            ),
    );

   $selectElement->setAttribute('multiple', 'multiple')      
        ->setValueOptions($data);

   $this->add($selectElement); 
```

输入过滤器：

```
$inputFilter->add($factory->createInput(array(
                'name'     => 'selectElement',
                'required' => false,
                'filters'  => array(
                    array(
                        'name' => 'Int'
                        ),
                    ),
           ))); 
```

我使用 Zend Debug 以这种方式获取 selectElement 保管箱中的值：

```
$dataSelectElements = $this->getRequest()->getPost('selectElement');
 \Zend\Debug\Debug::dump($dataSelectElements); 
```

调试结果：

```
array(4) {
  [0] => string(2) "20"
  [1] => string(2) "22"
  [2] => string(2) "23"
  [3] => string(2) "75"
} 
```

基本上我从 selectElement 表单中获取 id 以将其存储在数据库中。现在我收到通知和 zend 表单错误：

注意错误：

```
Notice: Array to string conversion in ..\zendframework\zendframework\library\Zend\Filter\Int.php on line 29 
```

还有一个表单无效错误：

```
array(1) {
  [0] => array(1) {
    ["selectElement "] => array(1) {
      ["explodeInvalid"] => string(35) "Invalid type given. String expected"
    }
  }
} 
```

有没有办法解决这个问题。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T12:50:15.090

过滤器将`Int`尝试从您的数据数组中生成一个整数，这是行不通的。

以前我使用过回调过滤器，它可以用来循环遍历数据并检查每个值是否为 Int。

例如：

```
'filters' => array(
    array(
        'name' => 'Callback',
        'options' => array(
            'callback' => function($values) {
                return array_filter($values, function($value) {
                    return ((int)$value == $value);
                });
            }
        )
    ),
), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T16:31:07.427

我做的有点不同，像这样

形式

```
class Companyform extends Form

    {
        public function __construct()
        {
            // we want to ignore the name passed
            parent::__construct('company');

            $this->setAttribute ('method', 'post');
            $this->setAttribute ('class', 'form-horizontal');
    $this->add ( array (
                'name' => 'parentID',
                'type' => 'Zend\Form\Element\Select',        
                'attributes' => array(
                    'id' => 'parentID',
                    'type' => 'select',
                    'placeholder' => "Parent Company",
                ),
                'options' => array(
                    'label' => 'Parent Company'
                )
            ));

            $this->add(array(
                'name' => 'btnsubmit',
                'attributes' => array(
                    'id' => 'btnsubmit',
                    'type' => 'submit',
                    'value' => 'Add',   
                    'class' => 'btn btn-primary'
                ),
            ));

        }

    } 
```

控制器

```
public function addAction() 
{        
    $request = $this->getRequest();

    $companyList = $this->_getCompanyList();         

    $form = new Companyform();                  

    $form->get('parentID')->setAttribute('options',$companyList);

    if ($request->isPost()) 
    {
        $company = new Company();   
            $form->setInputFilter($company->getInputFilter());            

            $form->setData($request->getPost());

            if ($form->isvalid()) 
            {                 
            }

    }
}

public function _getCompanyList()
{
     $companies = $this->Em()->getEntityManager()->getRepository('XXXX\Entity\Company')->findBy(array('isDeleted'=>'0'));
     $companyIDList = array();
     $companyIDList[0] = "No Parent";
     foreach ($companies as $company) 
     {        
       $companyIDList[$company->id] = $company->companyName;
     }         
     return $companyIDList;        
} 
```

实体类

```
 protected $inputFilter;

    public function setInputFilter(InputFilterInterface $inputFilter)
    {
        throw new \Exception("Not used");
    }

    public function getInputFilter()
    {
        if (!$this->inputFilter) {
            $inputFilter = new InputFilter();

            $factory = new InputFactory();

            $inputFilter->add($factory->createInput(array(
                'name' => 'companyName',
                'required' => true,
                'filters' => array(
                    array('name' => 'StripTags'),
                    array('name' => 'StringTrim'),
                ),
                'validators' => array(
                    array(
                        'name' => 'StringLength',
                        'options' => array(
                            'encoding' => 'UTF-8',
                            'min' => 2,
                            'max' => 255,
                        ),
                    ),
                ),
            )));

            $this->inputFilter = $inputFilter;
        }

        return $this->inputFilter;
    } 
```

您可能需要在实体中添加以下库

```
use Zend\InputFilter\InputFilter;
use Zend\InputFilter\Factory as InputFactory;
use Zend\InputFilter\InputFilterAwareInterface;
use Zend\InputFilter\InputFilterInterface; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-05T12:23:09.883

在 ZendFramework 2 中，当您从表单文件创建（添加）元素时，请检查属性：**inarrayvalidator 是否为 true**。

```
 $this->add(array(
           'name' => 'select_name',
           'type' => 'select',
           'id' => 'select_name',
           'options' => array(
                 'label' => 'Select Name',
            ),
            'attributes' => array(
                 'id' => 'select_id',
                  'inarrayvalidator' => true,
             ),
        )); 
```

我希望，这行得通...

# c++ - 如何绑定部分纹理opengl

> ID：13121242
> 
> 赞同：0
> 
> 时间：2012-10-29T12:02:25.867
> 
> 标签：c++, c, opengl, textures

我希望在立方体上绑定纹理（使用 GlutSolidCube 而不是 glvertex 创建立方体），但整个纹理都已绑定。在图像文件中，我将所有纹理放在一起（为了速度并且因为老师要求），我只希望绑定部分纹理。我怎样才能做到这一点？？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T12:12:24.717

纹理是纹理绑定的单位。如果你想“切掉”纹理的一部分，你可以通过调整你使用的纹理坐标来实现。

不要使用完整的 0..1 范围，而是使用与纹理内的子纹理位置匹配的较小值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T21:31:31.117

您要执行的操作是不可能的，因为[`glutSolidCube`不会生成纹理坐标](https://stackoverflow.com/questions/327043/how-to-apply-texture-to-glutsolidcube)。

但是，您还会注意到该问题的答案表明您可以使用以下命令让 OpenGL 在调用时为您生成纹理坐标`glutSolidCube`：

```
glEnable(GL_TEXTURE_GEN_S);
glEnable(GL_TEXTURE_GEN_T); 
```

有关使用 OpenGL 的自动纹理坐标生成的更多信息，请参见[此处](http://www.informit.com/articles/article.aspx?p=770639&seqNum=4)。但是，我想指出，这似乎来自即时模式 OpenGL 的时代，它已被弃用。此外，不再维护 GLUT，但[freeglut](http://freeglut.sourceforge.net/)是。

总而言之，您最好使用`glVertex`调用并指定您自己的特定纹理坐标，正如 unwind 所建议的那样。您可以尝试 OpenGL 的纹理坐标生成，但它可能过于严格，无法处理您需要的内容。

# jquery - 如何限制jquery标签输入中的字符？

> ID：13121246
> 
> 赞同：0
> 
> 时间：2012-10-29T12:02:43.947
> 
> 标签：jquery, asp.net

我已经使用以下代码来限制字符，但它不起作用..请帮助我。提前致谢。

```
 <td nowrap="nowrap">
     <asp:TextBox MaxLength="60" runat="server" ID="Keyword" CssClass="TaskTitle" Width="270px"
                            TextMode="SingleLine" />
 </td>

$('#Keyword_tag').bind('keyup', function() {

    var characterLimit = 60;
    var charactersUsed = $('#Keyword').val();

    charactersUsed = charactersUsed.replaceAll(',');
           if (charactersUsed.length > characterLimit) {
    alert(charactersUsed.length);
        charactersUsed.length = characterLimit;
        alert(charactersUsed.length);
        $(this).val($(this).val().slice(0, characterLimit));
        $(this).scrollTop($(this)[0].scrollHeight);
    } 
```

我必须将字符限制为 60，但是当我将字符限制值分配给使用的字符时，它没有被分配。我正在为关键字字段使用 jquery 标签输入插件

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T12:05:55.750

> 我必须将字符限制为60...

这是一个解决方案...

```
$('#Keyword_tag').on('keyup paste', function() {
    $(this).val(function(i, value) { return value.substr(0, 60); });
}); 
```

# iphone - 使服务器上的 API 仅对我可用

> ID：13121248
> 
> 赞同：0
> 
> 时间：2012-10-29T12:02:51.143
> 
> 标签：iphone, objective-c, ios

服务器上有由 url 请求组成的公共 API。我希望这个 API 只对我可用。我能为此做些什么？我使用 IOS，这将是 Iphone 应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T12:06:00.023

当您向服务器发送请求时，您可以在请求正文中发送一些密钥，只有您的应用程序和您的服务器知道。

为了保护您的应用程序免受逆向工程：您可以将您的字符串收集到多个字符串中，然后将它们合并到一个字符串中。例如，如果您有字符串“ios”，则可以创建三个字符串“i”“o”“s”，然后在 urlrequest 中将它们合并为一个。在这种情况下，二进制文件上的逆向工程和字符串不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T12:17:11.173

尝试执行这个 scneario 它会更慢但很好。

1.  服务器将发送挑战短语
2.  iPhone 将发送使用特定密钥加密的短语。
3.  服务器将记录此会话有效期为 30 分钟。
4.  iPhone 将加密的质询短语与它将发送到服务器的每个请求一起发送。

# facebook-c#-sdk - facebook 和 windows 桌面应用程序

> ID：13121249
> 
> 赞同：0
> 
> 时间：2012-10-29T12:03:00.887
> 
> 标签：facebook-c#-sdk, desktop-application

仍然允许使用 facebook 桌面应用程序吗？我编写了一个应用程序，但身份验证已停止工作。在我挖掘源代码之前，我想我会检查一下是否已弃用与 oAuth 相关的任何内容，但我什至无法再找到桌面应用程序的提及！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T17:28:07.910

Facebook PowerShell 模块 (http://facebookpsmodule.codeplex.com) 基本上是一个桌面应用程序，并且运行良好。我不确定自您上次使用桌面应用程序以来已经过了多长时间 - 几个月前发生了一些 OAuth 更改，最近 OfflineAccess 的弃用可能会影响您的应用程序。我需要有关您的应用程序的功能以及您看到的问题的更多详细信息才能更明确地回答。

# html5-audio - 无论如何，网络音频和 html5 音频有什么区别？

> ID：13121250
> 
> 赞同：23
> 
> 时间：2012-10-29T12:03:16.440
> 
> 标签：html5-audio, web-audio-api

我刚刚问[了一个关于音频的问题](https://stackoverflow.com/questions/13117654/condition-and-loop-how-can-i-dont-resume-the-music-when-calling-the-function-s)，人们认为这是一个关于 html5-audio 而不是网络音频的问题。

所以我想知道有什么区别？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-29T12:29:26.743

## 这两个概念是不同的。

例如，[**W3C 提议的 Web Audio 标准的 Introduction 段落**](http://www.w3.org/TR/webaudio/#introduction)做出了这样的声明
： HTML5 中音频元素的引入非常重要，允许***基本的流式音频播放***。但是，它***不足以处理更复杂的音频应用程序***。

因此暗示了这两个概念之间的区别：

**HTML5 音频元素= 通过***在 HTML 中嵌入音频数据进行*基本播放。

**Web Audio API** = 基于 ECMA 脚本 (JavaScript) 的*API*，支持与现代独立 PC 相媲美的音频功能，例如：

*   混合
*   处理和过滤（例如洞穴或大教堂效应等，距离衰减，多普勒频移等...
*   与音频制作应用程序相关的任务
*   现代游戏音频引擎中的功能

**提醒一句**：截至 2012 年 10 月下旬，此 API 仍然相对较新，并非所有浏览器和移动设备都支持。 [**caniuse.com**](http://caniuse.com/audio-api)站点可能有助于确定不同平台上对 HTML5 和各种相关技术的支持量。W3C 为 Web Audio 起草标准这一事实有力地表明，该 API 将及时获得普遍接受和广泛支持，但目前还不是这样。

# javascript - 触发更改事件

> ID：13121252
> 
> 赞同：0
> 
> 时间：2012-10-29T12:03:19.110
> 
> 标签：javascript, jquery, django-templates

事件触发器似乎不起作用。这是我的代码：

```
 {% for DepartureDate, LfidElement in Flight%}

                var DepartureDateCurrentVol = "{{DepartureDate}}";
                var weekDayRange=new Date(DepartureDateCurrentVol).getDay();
                weekDayName=returnWeekDayName(weekDayRange);
                {% for LFID, VarTypeElement in LfidElement %}
                    {% for VarTypeID, FareInfosElement in VarTypeElement %}
                        {% for FareId,FareInfo in FareInfosElement.FareInfos %}

                            var flagMin = "{{ FareInfo.FlagMinAmt|e }}";
                            var amountCurrentVol="{{ FareInfo.BaseFareAmtInclTax|e }}";
                            var fareIdDeparture="{{FareId}}";
                            if(DepartureDateCurrentVol ==  dateDepartureRequest)
                            {
                              moinsCherArrivalSelected=0;
                              montantGlobal+=parseFloat(amountCurrentVol);
                              dateDepartureRequestedFound=1;
                              $('#aller').append('<div class="v2_blocselectionorange"><div class="v2_blocselectionorangehaut">'+weekDayName+'<br />'+DepartureDateCurrentVol+'</div><div class="v2_blocselectionorangebas">à partir de <br /><span class="v2_prixselection">'+amountCurrentVol+' dt</span><div class="v2_prixselectionradio"><input type="radio" id="selectionr'+fareIdDeparture+'" name="selectionr" value="1" checked="checked"></div></div></div>');
                              volSelected['Departure']=fareIdDeparture;
                              $('#retour').empty();
                              //$("#selectionr"+fareIdDeparture).change();
                              $("#selectionr"+fareIdDeparture).trigger("change");
                            }
$("#selectionr"+fareIdDeparture).change(function(){
                          var idFareIDCurrent=$(this).attr('id').substring(10);
                          FareInfo=idFareIDCurrent;
                         {% for key,pas in FareInfo.ReturnFlightSegmentDetails%}
                              var  arrivalDate="{{key}}";
                              var weekArrivalDayRange=new Date(arrivalDate).getDay();
                              weekArrivalDayName=returnWeekDayName(weekArrivalDayRange);
                              {% for key2,ReturnFlightSegmentDetailsInfosValue in pas %}
                                  {% for key3,ReturnFlightSegmentTypeInfo in ReturnFlightSegmentDetailsInfosValue %}
                                      {% for key4,ReturnFlightSegmentInfo in ReturnFlightSegmentTypeInfo %}
                                         var amountArrivalDate="{{ ReturnFlightSegmentInfo.BaseFareAmtInclTax|e }}";
                                         var flagArrivalMin="{{ ReturnFlightSegmentInfo.FlagMinAmt|e }}";
                                         //console.info(arrivalDate);console.info(arrivalDate == dateArrivalRequest);
                                         if( arrivalDate == dateArrivalRequest)
                                         {
                                            montantGlobal+=parseFloat(amountArrivalDate);
                                            volSelected['Arrival']="{{key4}}";
                                            $('#retour').append('<div class="v2_blocselectionorange"><div class="v2_blocselectionorangehaut">'+weekArrivalDayName+'<br />'+arrivalDate+'</div><div class="v2_blocselectionorangebasblanc">à partir de <br /><span class="v2_prixselection">'+amountArrivalDate+' dt</span><div class="v2_prixselectionradio"><input type="radio" id="selectionRetour'+"{{key4}}"+'" name="selectionRetour" value="1" checked="checked"></div></div></div>');
                                            dateArrivalRequestedFound =1;

                                         }else {
                                           if(flagArrivalMin =! 1){
                                                   $('#retour').append('');
                                                 }else {
                                                      $('#retour').append('<div class="v2_blocselection"><div class="v2_blocselectionhaut">'+weekArrivalDayName+'<br />'+arrivalDate+'</div><div class="v2_blocselectionbasjaune">à partir de <br /><span class="v2_prixselection">'+amountArrivalDate+' dt</span><div class="v2_prixselectionradio"><input type="radio" name="selectionRetour" id="selectionRetour'+"{{key4}}"+'" value="1"></div></div></div>');
                                                      if(dateArrivalRequestedFound==0 && moinsCherArrivalSelected==0){
                                                         $('input[type=radio][name=selectionRetour]').attr('checked', 'checked');
                                                         moinsCherArrivalSelected=1;
                                                         montantGlobal+=parseFloat(amountArrivalDate);
                                                      }
                                                 }

                                           }
                                      {% endfor %}
                                  {% endfor %}
                              {% endfor%}
                          {% endfor %}

                       });

    {% endfor %}
                  {% endfor %}
                {% endfor %}
              {% endfor %} 
```

谁能告诉我如何强制执行更改事件？！我想在第一步中声明我的功能更改，然后每次我有更改时我都会执行它，实际上在加载我的页面时必须执行更改然后如果用户单击另一个单选按钮，更改将重新-执行。我在做正确的选择吗？

# java - 无法调试 ResourceNotFoundException

> ID：13121253
> 
> 赞同：0
> 
> 时间：2012-10-29T12:03:24.427
> 
> 标签：java, android

我在尝试调试`Resources$NotFoundException`. 我正在尝试将枚举中的项目`AlertDialog`动态添加到：

这是我的代码`Activity`：

```
final ArrayList<CharSequence> lstChoices = new ArrayList<CharSequence>();

for (TrendingManager.Filter fltFilter : TrendingManager.Filter.values()) {

    lstChoices
    .add(getResources()
            .getString(
                    getApplicationContext()
                            .getResources()
                            .getIdentifier(
                                    fltFilter.name().toLowerCase(),
                                    "string",
                                    getApplicationContext()
                                            .getApplicationInfo().packageName)));

} 
```

这是枚举列表：

```
public class TrendingManager {

    public static enum Filter {
            ONLY_PRIVATE, ONLY_PUBLIC, ONLY_HQ, ONLY_LQ
    };

} 
```

我在我的手机中定义了所有这 4 个枚举`strings.xml`，它可以在我的手机上运行，​​但我从用户的手机收到崩溃报告，上面写着：

```
android.content.res.Resources$NotFoundException: String resource ID #0x0
at android.content.res.Resources.getText(Resources.java:260)
at android.content.res.Resources.getString(Resources.java:344)
at com.mridang.myapp.Trend.onOptionsItemSelected(Trend.java:230)
at android.app.Activity.onMenuItemSelected(Activity.java:2564)
...
...
... 
```

我真的很困惑为什么会发生这种情况。关于为什么找不到资源的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T12:05:41.913

您真的应该将循环中的语句拆分为几个只做一件事的语句。

这样，您将更好地了解您的问题所在。

# php - Fedora 17 apache php 显示错误报告

> ID：13121258
> 
> 赞同：0
> 
> 时间：2012-10-29T12:03:37.967
> 
> 标签：php, apache, fedora

我似乎无法让 fedora 上的 apache 或 PHP 报告错误。

在 Windows 上使用 xampp 并且所有设置都适合开发，在 Fedora 上我怀疑这一切都是错误的，但不知道如何更改它：

```
<?php
error_reporting(E_ALL);
ilkjfdslfjsdl
phpinfo();
?> 
```

给我一个空白页，在萤火虫中我可以看到返回 http 500 服务器错误

当我只做 phpnfo() 我可以看到：

```
display_errors  Off Off
display_startup_errors  Off Off 
```

我可以在那里看到 php.ini 并将其编辑为：

```
display_errors = 1
display_startup_errors = 1 
```

并有 error_reporting(E_ALL); 在我的脚本中重新启动 apache/httpd 并且仍然相同，安静失败并且在 firebug 中出现 http 500。phpinfo 一直说无论我尝试做什么，显示错误和启动错误都已关闭。

我想再次查看我的错误和警告。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T13:49:02.563

删除了任何 php

```
yum remove php
yum remove php-* 
```

然后再次安装 php 和 php-xml php-pdo php-sql

编辑了 php.ini 并重述了 apache，现在 phpinfo 提供了正确的值和正确的错误警告报告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T11:46:32.830

有同样的问题。你的解决方案对我有用。

删除 PHP 和依赖项后，我执行了以下操作：

```
yum -y install php
yum -y install phpmyadmin 
```

编辑`php.ini`：

```
sudo systemctl restart httpd.service 
```

现在一切都很好。谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-25T09:47:41.807

一些不太激进的东西对我有用，所以我将它添加到潜在的解决方案中：

我编辑了文件`/etc/php.ini`并对其进行了编辑：

```
display_errors = On
display_startup_errors = On 
```

这些是建议的开发值，由于敏感数据可能泄漏，我建议*不要在 prod 环境中这样做。*

然后我重新启动`httpd`：

```
> systemctl restart httpd 
```

它对我有用！我*不知道*您是否尝试了主`/etc/php.ini`文件，或者是否将值设置为`1`正常工作，因此以防万一有人偶然发现此问题，您可以在重新安装所有内容之前尝试此解决方案。

# javascript - 从 URL 中提取数据并在 JSF 中使用

> ID：13121263
> 
> 赞同：-1
> 
> 时间：2012-10-29T12:03:51.497
> 
> 标签：javascript, jsf, javabeans

我有这个网址

```
http://localhost:8084/somesite/leaveHTML.xhtml?id=somestring. 
```

现在我可以使用 jquery 从 URL 中提取 id，但我不太确定，我如何使用这个字符串从数据库中检索数据并填充 JSF 页面的 onload 字段。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T12:10:12.707

我真的不明白为什么需要使用 jQuery 检索 URL。如果您只需要使用基于 URL 参数的数据库中的数据填充您的网页，则可以`<f:viewparam>`为此目的使用 JSF 标记。

```
<f:viewParam id="id" name="id" value="#{myBean.id}" required="true" /> 
```

它将检索参数并将它们分配为 bean 值。如果您真的需要从您的视图中发送它，您可以使用 Seam remoting 之类的东西，并使用它通过 ajax 将 URL 参数发送到您的服务器。或者更简单，创建一个 servlet 并通过 ajax 与其通信，以通过 ajax 从数据库中检索信息。

# android - Android Home 小部件错误？

> ID：13121264
> 
> 赞同：0
> 
> 时间：2012-10-29T12:03:54.073
> 
> 标签：android, android-widget, widget

我正在使用 Home 小部件做一个应用程序。

主页小部件第一次工作正常，而删除主页小部件正常并再次添加主页小部件强制关闭。

我的代码：

```
 @Override
        public void onUpdate(Context context, AppWidgetManager appWidgetManager1,int[] appWidgetIds1) {
            appWidgetIds=appWidgetIds1;
            appWidgetManager=appWidgetManager1;
            context.startService(new Intent(context, UpdateService.class));     
        }

public static class UpdateService extends Service {

        @Override
        public void onStart(Intent intent, int startId) {

            remoteViews = new RemoteViews(getPackageName(),R.layout.widget_layout);
            Date month=new Date(System.currentTimeMillis());
            todayDate=month.getDate();
            todayMonth=currnetMonth=(month.getMonth())+1;
            todayYear=currentYear=(month.getYear())+1900;

           // Build the widget update for today
            RemoteViews updateViews = buildUpdate(this);
            // Push update for this widget to the home screen
            ComponentName thisWidget = new ComponentName(this, MyWidgetProvider.class);
            AppWidgetManager manager = AppWidgetManager.getInstance(this);
            manager.updateAppWidget(thisWidget, updateViews);           
        }

        public RemoteViews buildUpdate(Context context) {

            list = UpdateWidgetDatas();
            try{
                int fr_size=list.length;
                if(fr_size>0){
                    remoteViews.setViewVisibility(R.id.loading, View.GONE);     
                    remoteViews.setViewVisibility(R.id.top_rel, View.VISIBLE);      
                    remoteViews.setTextViewText(R.id.title, "title");   
                    remoteViews.setTextViewText(R.id.des,"description");    
                    remoteViews.setTextViewText(R.id.date, "todayDate");    
                    remoteViews.setImageViewBitmap(R.id.friend_image, downloadBitMapImage("imagelink"));    

                }else{
                    remoteViews.setViewVisibility(R.id.top_rel, View.GONE);     
                    remoteViews.setViewVisibility(R.id.loading, View.VISIBLE);  
                    remoteViews.setTextViewText(R.id.loading, "No data Available.");            
                }           
                Intent BRHomePage = new Intent(context, HomePage.class);
                PendingIntent HomePageIntent=PendingIntent.getActivity(context, 0 , BRHomePage,PendingIntent.FLAG_UPDATE_CURRENT);
                remoteViews.setOnClickPendingIntent(R.id.top_rel, HomePageIntent); 
            }catch (Exception e) {
                // TODO: handle exception
                System.out.println("store error----"+e);
            }
            appWidgetManager.updateAppWidget(appWidgetIds, remoteViews);
            return remoteViews;         
        }

        public void onReceive(Context context, Intent intent) 
        {           
            final String action = intent.getAction();

            if(action.equalsIgnoreCase("android.appwidget.action.APPWIDGET_DELETED")){
                if(remoteViews!=null)
                    remoteViews=null;
            }
        }

        @Override
        public void onDestroy() {
            System.gc();            
            Toast.makeText(this, "removed widger", Toast.LENGTH_SHORT).show();
        }

        public static List<String> UpdateWidgetDatas() {

            try {
                //return list value
            }catch (Exception e) {
                Log.e("", "FacebookDetails--->"+e);
            }

            return list;            
        }               

        Bitmap downloadBitMapImage(String imageUrl){
            Bitmap imgBitmap=null;
            try
            {
                URL url= new URL(imageUrl);
                HttpURLConnection c = ( HttpURLConnection ) url.openConnection();
                c.setDoInput(true);
                c.connect();
                InputStream is = c.getInputStream();
                imgBitmap = BitmapFactory.decodeStream(is);
            }
            catch ( MalformedURLException e )
            {
                Log.d( "RemoteImageHandler", "fetchImage passed invalid URL: " + imageUrl );
            }
            catch ( IOException e )
            {
                Log.d( "RemoteImageHandler", "fetchImage IO exception: " + e );
            }
            return imgBitmap;
        }

} 
```

logcat 中出现错误：

```
10-29 17:25:51.849: ERROR/(160): Dumpstate > /data/log/dumpstate_app_error
10-29 17:25:51.849: ERROR/AndroidRuntime(7270): FATAL EXCEPTION: main
10-29 17:25:51.849: ERROR/AndroidRuntime(7270): java.lang.RuntimeException: Unable to start service cmyapp.MyWidgetProvider$UpdateService@4051e0c8 with Intent { cmp=cmyapp/.MyWidgetProvider$UpdateService }: java.lang.NullPointerException
10-29 17:25:51.849: ERROR/AndroidRuntime(7270):     at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:2056)
10-29 17:25:51.849: ERROR/AndroidRuntime(7270):     at android.app.ActivityThread.access$2800(ActivityThread.java:117)
10-29 17:25:51.849: ERROR/AndroidRuntime(7270):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:998)
10-29 17:25:51.849: ERROR/AndroidRuntime(7270):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-29 17:25:51.849: ERROR/AndroidRuntime(7270):     at android.os.Looper.loop(Looper.java:130)
10-29 17:25:51.849: ERROR/AndroidRuntime(7270):     at android.app.ActivityThread.main(ActivityThread.java:3687)
10-29 17:25:51.849: ERROR/AndroidRuntime(7270):     at java.lang.reflect.Method.invokeNative(Native Method)
10-29 17:25:51.849: ERROR/AndroidRuntime(7270):     at java.lang.reflect.Method.invoke(Method.java:507)
10-29 17:25:51.849: ERROR/AndroidRuntime(7270):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
10-29 17:25:51.849: ERROR/AndroidRuntime(7270):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
10-29 17:25:51.849: ERROR/AndroidRuntime(7270):     at dalvik.system.NativeStart.main(Native Method)
10-29 17:25:51.849: ERROR/AndroidRuntime(7270): Caused by: java.lang.NullPointerException
10-29 17:25:51.849: ERROR/AndroidRuntime(7270):     at android.widget.RemoteViews$ReflectionAction.writeToParcel(RemoteViews.java:730)
10-29 17:25:51.849: ERROR/AndroidRuntime(7270):     at android.widget.RemoteViews.writeToParcel(RemoteViews.java:1376)
10-29 17:25:51.849: ERROR/AndroidRuntime(7270):     at com.android.internal.appwidget.IAppWidgetService$Stub$Proxy.updateAppWidgetIds(IAppWidgetService.java:374)
10-29 17:25:51.849: ERROR/AndroidRuntime(7270):     at android.appwidget.AppWidgetManager.updateAppWidget(AppWidgetManager.java:246)
10-29 17:25:51.849: ERROR/AndroidRuntime(7270):     at cmyapp.MyWidgetProvider$UpdateService.buildUpdate(MyWidgetProvider.java:168)
10-29 17:25:51.849: ERROR/AndroidRuntime(7270):     at cmyapp.MyWidgetProvider$UpdateService.onStart(MyWidgetProvider.java:87)
10-29 17:25:51.849: ERROR/AndroidRuntime(7270):     at android.app.Service.onStartCommand(Service.java:428)
10-29 17:25:51.849: ERROR/AndroidRuntime(7270):     at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:2043) 
```

请推荐正确的方法，谢谢，

# mod-rewrite - 重写部分 url .htacces

> ID：13121267
> 
> 赞同：0
> 
> 时间：2012-10-29T12:04:05.393
> 
> 标签：mod-rewrite

我需要从

[http://mydomain.com/download/](http://mydomain.com/download/)**文件名.zip**

至

[https://dl.dropbox.com/u/0000/filename.zip](https://dl.dropbox.com/u/0000/) **_**

如何使用 mod_rewrite 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T12:06:39.233

`.htaccess`使用以下规则在您的第一个域的根目录中创建一个文件：

```
RewriteEngine On
RewriteRule download/(.+) https://dl.dropbox.com/u/0000/$1 [L,R=301] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T12:14:53.570

```
 # Check to see if mod_rewrite is installed / avaliable
<IfModule mod_rewrite.c>
RewriteEngine on

# Check to see if file or directory exists
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# Rewrite to Dropbox URL. Make sure you change the data after "/u/" (9502594) to your own user ID
RewriteRule ^e/(.*)$ http://dl.dropbox.com/u/9502594/$1 [L,QSA]    # Embedded File
RewriteRule ^(.*)$ http://dl.dropbox.com/u/9502594/$1?dl=1 [L,QSA] # Force Download (Default)
</IfModule> 
```

# apache-flex - Flex：当鼠标悬停在切换按钮栏上时禁用手形光标

> ID：13121271
> 
> 赞同：0
> 
> 时间：2012-10-29T12:04:14.183
> 
> 标签：apache-flex, actionscript

在切换按钮栏上时如何禁用手形光标？我试过了， `useHandCursor = false`但没有效果。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T05:51:50.730

试试这个：</p>

useHandCursor = false;
按钮模式=假；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T12:55:07.827

你能发布一些你的代码吗？因为我似乎根据此[页面](http://blog.flexexamples.com/2007/08/22/creating-a-vertical-togglebuttonbar-in-flex/)上的示例，没有必要设置 useHandCursor 属性。

# javascript - jQuery - 通过 event.target 属性获取元素的类

> ID：13121272
> 
> 赞同：10
> 
> 时间：2012-10-29T12:04:15.397
> 
> 标签：javascript, jquery, css, class

我有以下代码：

```
 <script type="text/javascript">
       $("*").click(function(event){
         var x = event.target;

         if (x.nodeName == "DIV"){                  
           alert(x.attr("class"));
         }

       })
    </script> 
```

这会引发“未定义”异常......有没有其他方法可以获取触发“点击”事件的元素的类？先感谢您！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-29T12:05:04.927

`event.target`是一个 DOM 对象。因此，要使用 jQuery 方法，您必须将其转换为 jQuery 对象：

```
alert($(x).attr("class")); 
```

否则，您可以使用属性[`className`](https://developer.mozilla.org/en-US/docs/DOM/element.className)来获取元素的类：

```
alert(x.className); 
```

顺便说一句，在您的示例中，您可以简单地使用`this`关键字而不是`event.target`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-30T08:27:37.787

jQuery 提供了一些语法糖来帮助您检查 -[`.is()`](http://api.jquery.com/is/)允许您根据任何其他有效选择器验证元素：

```
var $target = event.target;
if ($target.is('div')){
  alert($target.attr('class'));
} 
```

还有一些进一步的变化需要考虑：

*   `.click(handler)`被显式分配给匹配的元素（您的案例中的每个元素）。这增加了开销；处理程序也不会应用于在处理程序分配执行*后动态添加的任何元素。*相反，通过使用*委托*处理程序[`on()`](http://api.jquery.com/on/)
*   重构您的逻辑，以便通过将选择器更改为`$('div')`
*   依靠`this`哪个几乎是惯例

在所有这些更改之后，代码变得更小且更具可读性：

```
$('div').on('click', function() {
  alert($(this).attr('class'));
}); 
```

# c# - BindingExpression.UpdateSource() 抛出指定的强制转换无效

> ID：13121274
> 
> 赞同：0
> 
> 时间：2012-10-29T12:04:24.170
> 
> 标签：c#, wpf, data-binding

我有一些代码可以获取组合框的绑定表达式

```
bindingExpression = ((ComboBox)(((Grid)(control.Content)).Children[0])).GetBindingExpression( ComboBox.SelectedValueProperty ); 
```

组合框在 xaml 中定义

```
<ComboBox Style="{StaticResource UiEditorComboBoxStyle}"
                                  Name="comboBox_Business" 
                                  DisplayMemberPath="Value.Name" 
                                  SelectedValuePath="Value.BusinessId"
                                      >
                                <ComboBox.SelectedValue>
                                    <Binding Path="entity.BusinessId" UpdateSourceTrigger="Explicit" ValidatesOnDataErrors="True" ValidatesOnExceptions="True" Mode="TwoWay">
                                        <Binding.ValidationRules>
                                            <validators:ValidationRule_SelectedItem NotSelectedErrorMessage="A Business must be selected"
                                                                                NotSelectedErrorMessageTranslationKey="BusinessMustBeSelected" />
                                        </Binding.ValidationRules>
                                    </Binding>
                                </ComboBox.SelectedValue>
                            </ComboBox> 
```

当我打电话

```
bindingExpression.UpdateSource() 
```

我得到一个“指定的演员表无效”异常。我猜这与属性（Guid）的类型有关，但我不知道如何处理它。

组合框值绑定到字典

任何指针？

干杯，

Ĵ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T12:45:53.823

排序后，我需要定义一个自定义转换器。

# php - 在 zend 视图 url-helper 中指定域

> ID：13121275
> 
> 赞同：1
> 
> 时间：2012-10-29T12:04:24.767
> 
> 标签：php, zend-framework, redirect

我的应用程序有两个模块产品模块和博客模块。两个模块都使用相同的数据库。有两个域：第一个指向产品模块 (www.mainsite.com)，第二个指向博客模块 (www.blog.mainsite.com)。将有多个链接从产品模块和博客模块连接。

问题是我正在使用zend url view helper。但我无法为该视图助手指定域。当我调用视图助手时，它总是返回我当前的域。我检查了 zend 框架手册，但什么也没找到。

Zend 中还有其他选项可以实现相同的功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T12:24:20.173

如果是完全限定的 URI，您应该选择：

```
$this->_redirect('http://www.blog.mainsite.com/some/thing'); 
```

当您在视图中调用 url 帮助程序时，它实际上调用了路由汇编程序。所以我假设你应该为每个域定义两个路由并使用类似的视图助手：

```
echo $this->url (array ('action' => 'some', 'controller' => 'thing'), 'routeName'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T16:33:05.403

使用 ServerUrl 视图助手，以及用于继承当前 URL 方案的“//”符号：

```
echo '//' . $this->serverUrl() . $this->url(/* ... */); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T12:52:46.393

*   你可以试试这个 - [http://framework.zend.com/manual/1.12/en/zend.controller.router.html#zend.controller.router.routes.hostname](http://framework.zend.com/manual/1.12/en/zend.controller.router.html#zend.controller.router.routes.hostname)（未测试）
*   您也可以只`$_SERVER['HTTP_HOST']`与 URL 查看助手生成的 URL 连接。

# groovy - 在常规中逃脱

> ID：13121277
> 
> 赞同：11
> 
> 时间：2012-10-29T12:04:28.653
> 
> 标签：groovy, escaping

我需要帮助在 groovy 中逃脱

我在文本文件中有一些字符串，例如**#$commonTomcat620.max_threads$#** 这些值我必须在运行时替换。

我使用了以下代码：

```
 def str = "#\$commonTomcat620.max_threads\$#"
    fileContents = fileContents.replaceAll("${str}","100"); 
```

此 str 在值中打印为 #$commonTomcat620.max_threads$#。但不替换文件。我试过 withOut #$ 。这是工作。

谢谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-29T12:11:51.570

你有几个选择来逃避美元符号：

这有效（使用美元斜线字符串）：

```
def str = $/#\$$commonTomcat620.max_threads\$$#/$ 
```

或者这个（带单引号字符串）：

```
def str = '#\\$commonTomcat620.max_threads\\$#' 
```

其他选项可能也存在

# hibernate - 首次运行时休眠填充数据库

> ID：13121278
> 
> 赞同：6
> 
> 时间：2012-10-29T12:04:29.560
> 
> 标签：hibernate, auto-populate

是否可以让 Hibernate 仅在应用程序的第一次运行时插入 Java 对象？

我不想加载 inser.sql 文件，我认为可以在特定的 java 文件中实例化我的所有 java 对象，并且仅在第一次运行 hibernate 时使用该对象填充 de DB。怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T05:10:04.277

您可以通过提供`hibernate.hbm2ddl.import_files`hibernate 的配置参数来实现这一点。使用此配置，您可以指定创建模式后要导入的 SQL 文件。有关更多信息，请参阅休眠[文档](http://docs.jboss.org/hibernate/orm/3.6/reference/en-US/html/session-configuration.html)。

# batch-file - 如何通过批处理文件检查是否存在 robocopy

> ID：13121279
> 
> 赞同：2
> 
> 时间：2012-10-29T12:04:31.730
> 
> 标签：batch-file, robocopy

我想通过我的批处理文件确保我在系统上安装了 robocopy。是否可以询问诸如如果 robocopy.. 知道它是否安装在我在它上面的系统中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-29T13:25:42.910

```
>nul 2>nul robocopy
if errorlevel 9009 (
    echo ROBOCOPY is not installed
) else (
    echo ROBOCOPY is installed
) 
```

**编辑**

这是另一种可能更安全的替代方法，因为它不会尝试执行程序。它尝试查看程序是否存在于 PATH 中。您必须知道程序的全名，包括扩展名。

```
@echo off
for %%F in (robocopy.exe) do if "%%~$path:F" neq "" (
  echo ROBOCOPY is installed
) else (
  echo ROBOCOPY is not installed
) 
```

# database - 无法从网络服务器复制 Umbrao.sdf

> ID：13121280
> 
> 赞同：3
> 
> 时间：2012-10-29T12:04:34.860
> 
> 标签：database, file, copy, umbraco, move

我有一个在网络服务器上运行的 Umbraco 应用程序，我需要将应用程序移动到另一个网络服务器。Umbraco 应用程序使用嵌入式数据库 (SQL CE 4)。我可以复制应用程序中除“Umbraco.sdf”文件之外的所有文件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-03T09:11:02.167

添加名为的文件（如果您愿意，您可以插入 HTML 作为您的维护页面）

`app_offline.html`

之后，IIS 将释放`Umbraco.sdf`并`web.config`复制和删除/重命名提到的文件。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-23T09:29:49.220

由于 Umbraco 安装将使用`Umbraco.sdf`数据库，因此您需要将应用程序转换为维护模式，方法是将 a 添加`app_offline.htm`到 Web 服务器的根目录。您需要确保它是一个`.htm`-file，即*不是* `.html`，否则它将无法工作。

另外 - 在您的`web.config`文件中进行更改，以重新启动应用程序池，以便它可能会注意到您站点中的更改。

这样做，将释放`Umbraco.sdf`文件，并使您可以通过简单的 FTP 下载它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-27T09:16:34.910

我只是遇到了同样的问题，不想停止网站释放文件的锁定，所以我做了以下事情：

*   RDP 到服务器上，在 /app_data 目录中制作文件的副本（将其称为“Umbraco-copy.sdf”）

*   下载“Umbraco-copy.sdf”

*   将“Umbraco-copy.sdf”重命名为“Umbraco.sdf”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T12:12:56.000

也许，这个错误与权限有关。您必须以 root（管理员）身份登录！

# xcode - UITableViewController 每行 2 个单元格

> ID：13121281
> 
> 赞同：1
> 
> 时间：2012-10-29T12:04:36.370
> 
> 标签：xcode, image, ios5, uitableview, cell

我想创建一个具有以下设计的自定义 UITableViewCell。我想每行展示两张图片，每张图片都有一个标题和一个简短的描述。我不想将两张图片放在同一个单元格中，它们必须具有不同的内容。当您单击一个图像时，它必须打开描述。

我在 ios 5 工作，你有什么想法或任何示例代码

# audio - 如何在在线词典中实现音频（发音）功能？

> ID：13121285
> 
> 赞同：-6
> 
> 时间：2012-10-29T12:04:47.890
> 
> 标签：audio, dictionary

您将如何在在线词典网站中实现单词发音功能？例如，可以说 oxforddictionaries.com。他们具有此功能，您可以在其中收听给定单词的发音方式。那么，我是否必须记录每个单词并将其保存在文件夹中，然后将其与数据库链接？如果是这种情况，那么我可能必须为数据库中的百万字创建一百万个 .wav 或任何声音文件。或者我将如何解决这个问题？您认为 oxforddictionaries.com 如何实现此功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T12:13:00.647

有两种方法

*   记录每个单词（wav/mp3）
*   根据拼音合成声音。

后一种感觉很不自然，但却是一种廉价的解决方案。我只知道朗文词典，他们肯定会记录每个单词（甚至是整个句子），有几个扬声器，所以你不会觉得无聊。

除非您想在插件/小部件中进行合成，否则您最终可能会使用两种方法获得声音文件。您可以简单地使用 html/html5/flash 播放器播放它们。

# git - 带有自定义 ssh 密钥的 git-deploy

> ID：13121288
> 
> 赞同：1
> 
> 时间：2012-10-29T12:04:57.770
> 
> 标签：git, ssh

我正在尝试设置[git-deploy](https://github.com/mislav/git-deploy)以将我的一个项目部署到 EC2。问题是我必须指定一个自定义 ssh 密钥来访问服务器，这似乎是 git-deploy 不喜欢的。

我已经通过 ~.ssh/config 配置了 ssh，这样我就可以输入“ssh myserver”来连接到 EC2 实例。

以下是我为了配置 git-deploy 而执行的命令：

```
git origin add deploytest myserver:/my/remote/path
git deploy setup -r deploytest 
```

最后一个命令要求输入密码，然后以**Net::SSH::AuthenticationFailed**错误终止。

# objective-c - UICollectionViewCell 边框/阴影

> ID：13121294
> 
> 赞同：33
> 
> 时间：2012-10-29T12:05:29.260
> 
> 标签：objective-c, uicollectionview, uicollectionviewcell

构建 iPad App 时，如何在 UICollectionViewCell 周围绘制边框？

更多细节：我实现了一个扩展 UICollectionViewCell 的类 ProductCell。现在，我想指定一些花哨的细节，例如边框、阴影等。然而，当在[这里](https://stackoverflow.com/questions/12874684/shadow-not-showing-on-cell-in-ios)尝试使用类似的东西时，Xcode 告诉我接收器类型“CALayer”是一个前向声明。

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-06-06T13:15:52.953

只是为了更多的实现：

```
#import <QuartzCore/QuartzCore.h> 
```

在你的.m

确保你的类实现

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)cv cellForItemAtIndexPath:(NSIndexPath *)indexPath; 
```

因为这是设置单元的地方。

然后您可以更改`cell.layer.background`（仅在石英导入后可用）

见下文

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)cv cellForItemAtIndexPath:(NSIndexPath *)indexPath {
    MyCollectionViewCell *cell = [cv dequeueReusableCellWithReuseIdentifier:@"pressieCell" forIndexPath:indexPath];
    //other cell setup here

    cell.layer.borderWidth=1.0f;
    cell.layer.borderColor=[UIColor blueColor].CGColor;

    return cell;
} 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2015-10-29T08:20:24.457

# 迅速

*为 Swift 3 更新*

假设您[使用所需的方法设置了 Collection View](https://stackoverflow.com/a/31735229/3681880)，您只需编写几行代码即可添加边框。

```
func collectionView(_ collectionView: UICollectionView, cellForItemAt indexPath: IndexPath) -> UICollectionViewCell {

    let cell = collectionView.dequeueReusableCell(withReuseIdentifier: reuseIdentifier, for: indexPath as IndexPath) as! MyCollectionViewCell
    cell.myLabel.text = self.items[indexPath.item]
    cell.backgroundColor = UIColor.cyan 

    // add a border
    cell.layer.borderColor = UIColor.black.cgColor
    cell.layer.borderWidth = 1
    cell.layer.cornerRadius = 8 // optional

    return cell
} 
```

**笔记**

*   `QuartzCore`如果您已经导入了`UIKit`.
*   如果您还想添加阴影，请查看[此答案](https://stackoverflow.com/a/34984063/3681880)。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-29T12:16:09.323

您需要包含框架`QuartzCore`并将标头导入您的类：

```
#import <QuartzCore/QuartzCore.h> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-08-10T05:06:04.360

**斯威夫特 4**

```
cell.layer.borderColor = UIColor.black.cgColor
cell.layer.borderWidth = 1 
```

创建单元格后，将其添加到数据源方法中

```
func collectionView(_ collectionView: UICollectionView, cellForItemAt indexPath: IndexPath) -> UICollectionViewCell {
     let cell = collectionView.dequeueReusableCell(withReuseIdentifier: "CollectionViewCell", for: indexPath)
     cell.layer.borderColor = UIColor.black.cgColor
     cell.layer.borderWidth = 1
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-03T07:42:52.700

我认为最好 **将此配置添加到您的自定义单元实现**中，而不是在数据源委托方法中。

```
cell.layer.borderColor = UIColor.black.cgColor
cell.layer.borderWidth = 1
cell.layer.cornerRadius = 8 // optional 
```

# jquery-ui - 带有 jQ uery UI 滑块的 Knockout .js

> ID：13121296
> 
> 赞同：2
> 
> 时间：2012-10-29T12:05:34.653
> 
> 标签：jquery-ui, knockout.js

假设我有以下链接到文本框的 jQuery UI 滑块。

是否可以允许用户在文本框中输入大于滑块值的值（并将滑块设置为最大值）？

```
ko.bindingHandlers.slider = {
init: function (element, valueAccessor, allBindingsAccessor) {
var options = allBindingsAccessor().sliderOptions || {};
$(element).slider(options);
ko.utils.registerEventHandler(element, "slidechange", function (event, ui) {
    var observable = valueAccessor();
    observable(ui.value);
});
ko.utils.domNodeDisposal.addDisposeCallback(element, function () {
    $(element).slider("destroy");
});
ko.utils.registerEventHandler(element, "slide", function (event, ui) {
    var observable = valueAccessor();
    observable(ui.value);
});
},
update: function (element, valueAccessor) {
var value = ko.utils.unwrapObservable(valueAccessor());
if (isNaN(value)) value = 0;
$(element).slider("value", value);
}
}; 
```

在此示例中：http: [//jsfiddle.net/jearles/Dt7Ka/12/](http://jsfiddle.net/jearles/Dt7Ka/12/)我希望能够在文本框中保存超过 100 的值，并使滑块出现在它们的最大值处。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T12:33:51.213

`slidechange`如果 observable 的值小于然后，您可以只更新事件中的 observable 值`options.max`：

```
ko.utils.registerEventHandler(element, "slidechange", function (event, ui) {
    var observable = valueAccessor();
    var currentMax = $(element).slider("option", "max"); 
    if (observable() <= currentMax)
         observable(ui.value);
}); 
```

[JSFiddle 演示。](http://jsfiddle.net/snLk8/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T12:35:40.277

将此行放在以下行之后：*if (isNaN(value)) value = 0;* 在绑定更新函数

```
if(value>100){
    $(element).slider("option","max",value);          
} 
```

例子：

[http://jsfiddle.net/Razaz/Qy6jR/4/](http://jsfiddle.net/Razaz/Qy6jR/4/)

如果值大于 100，它将滑块的最大值更改为在文本框中输入的新值

问候。

# regex - Apache mod_rewrite REDIRECT_STATUS 条件导致目录列表

> ID：13121297
> 
> 赞同：10
> 
> 时间：2012-10-29T12:05:39.727
> 
> 标签：regex, apache, .htaccess, mod-rewrite

我有以下 htaccess 重写规则。防止循环的一个规则条件最初是这样写的：

```
RewriteCond %{ENV:REDIRECT_STATUS} ^. 
```

它曾经工作得很好，直到它突然停止工作导致 Apache 显示网站的目录列表。

我必须将其更改为这种新形式，如下面的清单所示，才能让它再次工作：

```
RewriteCond %{ENV:REDIRECT_STATUS} 200 
```

你知道这种行为的原因吗？

谢谢

```
RewriteEngine on
RewriteBase /

## Permanent 301

## Force to www. Un-comment in production.
RewriteCond %{HTTP_HOST} !^www\.myhost\.com [NC]
RewriteRule ^(.*) http://www.myhost.com/$1 [L,R=301]

## Permanent redirect rules for contents

RewriteRule ^argument/programming/?$ tags/programming [NC,L,R=301]

## Internal Redirect Loop Protection
RewriteCond %{ENV:REDIRECT_STATUS} 200
RewriteRule ^ - [L]

## Maintenance page
#RewriteRule (.*) special/maintenance.html

## Specials
RewriteRule special/(.*) special/$1 [NC,L]

## Static resources
RewriteRule ^(.*\.(js|ico|gif|jpg|png|css|rss|xml|htm|html|pdf|zip|gz|txt))$ public/$1 [NC,L]

## Front Controller
RewriteRule ^(.*) public/index.php [NC,L] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-01-05T04:20:20.183

你有这个条件来停止循环：

```
## Internal Redirect Loop Protection
RewriteCond %{ENV:REDIRECT_STATUS} 200
RewriteRule ^ - [L] 
```

这通过检查内部 Apache 变量来工作`%{ENV:REDIRECT_STATUS}`。此变量在重写模块开始时为空，但在第一次成功的内部重写发生时设置为 200。上述条件表示在第一次成功重写后退出进一步的重写并停止循环。

# android - 如何在联系人（android）中添加加入的联系人图像？

> ID：13121300
> 
> 赞同：0
> 
> 时间：2012-10-29T12:05:42.020
> 
> 标签：android, contact

我正在从我的应用程序中导出联系人，并且我想添加已加入的联系人图标并导出联系人，如下图所示，例如带有我的自定义图标的谷歌图标。如果有例子或任何人知道如何做到这一点。

请告诉我。

谢谢 ![在此处输入图像描述](../Images/5a6fc06fe5ee4d6a383976ea88cd5ac7.png)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T11:28:08.980

终于明白了。[如果我创建联系人SyncAdapter](http://developer.android.com/guide/topics/providers/contacts-provider.html#SyncAdapters)，这可以使用

在...的帮助下

```
 <ContactsDataKind
    android:mimeType="MIMEtype"
    android:icon="icon_resources" <!-- Put the icon here -->
    android:summaryColumn="column_name"
    android:detailColumn="column_name"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T13:31:50.567

像这样：

```
<ContactsDataKind
    android:icon="@drawable/icon"
    android:mimeType="MIMEtype"
    android:summaryColumn="data2"
    android:detailColumn="data3"
    android:detailSocialSummary="true">             
</ContactsDataKind>

<ContactsDataKind
    android:icon="@drawable/icon"
    android:mimeType="MIMEtype"
    android:summaryColumn="data2"
    android:detailColumn="data3"
    android:detailSocialSummary="true">             
</ContactsDataKind> 
```

# css - 用户如何选择 CSS 样式？

> ID：13121306
> 
> 赞同：0
> 
> 时间：2012-10-29T12:05:50.007
> 
> 标签：css, prestashop

我开始用 prestashop 做一个在线购物网站。在我的产品列表页面上，我想让用户选择 gridview 列号为 3 或 4。我应该使用 css 切换方法吗？还是有其他方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T14:52:58.060

你可以像 billy moon 提到的那样做，并使用 jquery 来执行 switch ，就像 `$("body").addClass("column-4");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T12:15:58.887

我会根据他们的设置在正文中添加一个类。然后，您可以通过此类分隔规则，并通过它们的共同点

HTML

```
...
<body class="columns-3">
<!-- change the class using javascript, or php session for example -->
... 
```

CSS

```
.col{
  /* rules for `.col` common to both */
}

.column-3 .col{
  /* rules for `.col` when in three column mode */
}

.column-4 .col{
  /* rules for `.col` when in four column mode */
} 
```

# multithreading - 将信号添加到自定义 Qthread

> ID：13121310
> 
> 赞同：0
> 
> 时间：2012-10-29T12:05:59.817
> 
> 标签：multithreading, qt, signals

我正在尝试向我的 qthread 添加信号，但出现一些错误：

错误：未定义对“RFDongleCommunication 的 vtable”的引用

错误：未定义对“RFDongleCommunication::newLogger(unsigned char, unsigned char)”的引用

这是我的头文件：

```
#ifndef RFDONGLECOMMUNICATION_H
#define RFDONGLECOMMUNICATION_H
#include <QThread>
#include "qextserialport.h"
#include <QtGui>

class RFDongleCommunication: public QThread
{
    Q_OBJECT

public:
    explicit RFDongleCommunication(QextSerialPort * port);

    QextSerialPort * rfport;
    QByteArray data;

signals:

    void newLogger(uchar,uchar);

private:

    void run();

};

#endif // RFDONGLECOMMUNICATION_H 
```

和cpp文件

```
#include "rfdonglecommunication.h"
#include "QDebug"

RFDongleCommunication::RFDongleCommunication(QextSerialPort * port)
{
    rfport=port;
}

void RFDongleCommunication::run()
{
    while(!(rfport->bytesAvailable()));
    data = rfport->readAll();

    uchar id = data[1];
    uchar type = data[2];
    emit newLogger(id,type); 
} 
```

有人看到我做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T12:18:25.203

确保您的课程位于 MOC 流程生成中包含的不同 .cpp 和 .h 文件中

> 点击：文件——新建文件或项目——文件和类——C++——新建类

**undefined 对 `vtable**的引用意味着没有生成 moc cpp 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-18T08:41:44.337

我看到这是一个非常古老的帖子，但似乎人们仍然在问非常相似甚至完全相同的问题。我会稍微详细说明一下Rudolfs Bundulis给出的答案，希望对您有所帮助。

如果您使用的是 Qt Creator，并且当您第一次编译项目时，您没有将“Q_OBJECT”放在头文件中，那么您的 (qthread) cpp 文件的 moc cpp 文件不会生成。在这种情况下，将“Q_OBJECT”放入头文件后简单地运行“Clean All”和“Rebuild All”将不起作用。你需要去你的构建文件夹手动删除Qt生成的“Makefile”并再次运行“Rebuild All”或“Build All”，你的错误信息就会消失。

# c# - C# - DateTimePicker，检测上下点击事件

> ID：13121312
> 
> 赞同：3
> 
> 时间：2012-10-29T12:06:15.727
> 
> 标签：c#, winforms, datetimepicker

我正在重新编写 C#`DateTimePicker (nullable)`以满足我的需要，但我一直在检测从 pick time 开始的 up-down 事件`(HH:mm, DateTimePicker.ShowUpDown = true)`。

我知道`OnValueChanged`当按下向上或向下按钮时会触发，但我已经在那里进行了一些处理（当在 DateTimePicker 中输入数字时自动移动到下一个字段），因此我需要阻止 ValueChanged按下这些按钮时的事件，并在不同的功能中处理它。

我正在尝试覆盖 WndProc 函数，但在 WndProc 之前调用了 OnValueChanged。OnKeyDown 在 OnValueChanged 之后也被调用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T12:26:33.977

好吧，您可以尝试覆盖`OnDropDown`在请求下拉日历时发生的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T12:34:01.313

`ValueChanged`当值`DateTimePicker`更改时，您不应该阻止事件。向上向下按钮用于更改`DateTimePicker`值，因此按下它们应该引发`ValueChanged`事件。

考虑更改您当前对此事件的处理方式。

*顺便说一句*，当值更改时，为什么要导航到下一个字段？只需为您的控件分配适当`TabIndex`的值，并允许用户使用`Tab`按钮导航到下一个字段。这是一种常用的导航方法。

# php - 在 3 个域上运行的 Wordpress

> ID：13121315
> 
> 赞同：1
> 
> 时间：2012-10-29T12:06:30.983
> 
> 标签：php, wordpress

我在[http://first-website.com](http://first-website.com)有一个 wordpress 博客。现在我有 2 个新的其他域。

*   [http://second-website.com](http://second-website.com)。
*   [http://third-website.com](http://third-website.com)。

所有 3 都托管在同一个面板上。现在我想休息 2 网站应该指向主博客。这样所有以下 3 个链接都将指向相同的。

*   [http://first-website.com/about-us](http://first-website.com/about-us)
*   [http://second-website.com/about-us](http://second-website.com/about-us)
*   [http://third-website.com/about-us](http://third-website.com/about-us)

现在来自管理员，当我添加任何新帖子时，它也应该反映给所有人。谁能建议我该怎么做？我在谷歌上查了一下，发现“WordPress MU 域映射”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T13:32:43.817

几个月前我遇到了同样的问题；

我很简单地解决了它；

我将数据库设置为所有网站的通用数据库。

# wso2 - 如何在 BPS 2.1.2 (carbon 3.2.0) 中手动创建数据源

> ID：13121316
> 
> 赞同：0
> 
> 时间：2012-10-29T12:06:31.113
> 
> 标签：wso2, wso2carbon

如何在 BPS 2.1.2 (carbon 3.2.0) 中手动创建数据源

添加的数据源 UI 功能出现空错误。

我可以将它添加到 registry.xml 文件中吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T12:18:49.227

您不能在用于配置注册表的 registry.xml 中添加数据源。请参阅此[文档](http://wso2.org/project/bps/2.1.2/docs/bpel-installation-guide/bpel_installation_guide.html#Configure-WSO2-BPS-with-external-data-sources)

[您可以在此处](https://svn.wso2.org/repos/wso2/carbon/platform/trunk/products/bps/modules/distribution/conf/datasources.properties)找到示例配置。

如果您需要更多信息，请参阅这些线程。

[自动部署 DSS 数据源配置](https://stackoverflow.com/questions/9777975/automated-deployment-of-dss-datasource-configuration)

[WSO2 ESB - 数据服务服务器功能 - 如何使用数据源即时交换数据源](https://stackoverflow.com/questions/11196914/wso2-esb-data-services-server-feature-how-to-use-data-sources-to-swap-data-s)

# android - 双向滚动视图android

> ID：13121318
> 
> 赞同：10
> 
> 时间：2012-10-29T12:06:38.823
> 
> 标签：android, android-layout

我有一个带有滚动视图的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:fillViewport="true"
    android:fadingEdge="none"
    android:overScrollMode="never"
    >
<LinearLayout 
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" 
    android:weightSum="100"
    android:background="@color/antiquewhite">
        <LinearLayout
        android:id="@+id/top_layou"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:orientation="vertical" 
        android:layout_weight="15"
        android:layout_marginLeft="40dp"
        android:layout_marginRight="40dp"
        android:layout_marginTop="25dp"
        android:background="@color/bisque">

        <TextView
            android:id="@+id/title_text_view"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="70dp"
            android:layout_marginTop="15dp"
            android:text="@string/user_information_text"
            android:textSize="26dp"
            android:textStyle="bold"
            android:textColor="@color/black" />

        <TextView
            android:id="@+id/subtitle_text_view"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="70dp"
            android:layout_marginTop="5dp"
            android:text="@string/user_information_subtitle_text" 
            android:textSize="20dp"
            android:textStyle="bold" 
            android:textColor="@color/black"/>

    </LinearLayout>

        <LinearLayout
            android:id="@+id/body_view"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="85" 
            android:orientation="horizontal"
            android:layout_marginLeft="40dp"
            android:layout_marginRight="40dp"
            android:weightSum="100"
            >

            <LinearLayout
                android:id="@+id/left_part"
                android:layout_width="0dp"
                android:layout_height="match_parent"
                android:orientation="vertical" 
                android:layout_weight="50"
                android:weightSum="100"
                android:background="@color/antiquewhiter">

                <TextView
                    android:id="@+id/first_name_text_view"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="70dp"
                    android:layout_marginTop="30dp"
                    android:text="@string/first_name_text"
                    style="@style/bold_text18"
                    />

                <LinearLayout
                    android:id="@+id/first_name_edit_layout"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content" 
                    android:weightSum="100">

        <EditText
            android:id="@+id/first_name_edit_text"
            style="@style/editTextsvCard"
            android:layout_marginLeft="70dp"
            android:layout_marginTop="5dp"
            android:layout_weight="90"
            android:ems="10"

            >

        </EditText>

                </LinearLayout>

                <TextView
                    android:id="@+id/company_text_view"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="70dp"
                    android:layout_marginTop="30dp"
                    android:text="@string/company_text"
                    style="@style/bold_text18" />
                <LinearLayout
                    android:id="@+id/company_edit_layout"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content" 
                    android:weightSum="100">

        <EditText
            android:id="@+id/company_edit_text"
            style="@style/editTextsvCard"
            android:layout_marginLeft="70dp"
            android:layout_marginTop="5dp"
            android:layout_weight="90"
            android:ems="10"
             >

        </EditText>

                </LinearLayout>
                               <TextView
                    android:id="@+id/phone_text_view"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="70dp"
                    android:layout_marginTop="30dp"
                    android:text="@string/phone_text"
                    style="@style/bold_text18"/>
                <LinearLayout
                    android:id="@+id/phone_edit_layout"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content" 
                    android:weightSum="100">

        <EditText
            android:id="@+id/phone_edit_text"
            style="@style/editTextsvCard"
            android:layout_marginLeft="70dp"
            android:layout_marginTop="5dp"
            android:layout_weight="90"
            android:ems="10"
            android:inputType="phone"
            >

        </EditText>

                </LinearLayout> 

                           <TextView
                    android:id="@+id/e_mail_text_view"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="70dp"
                    android:layout_marginTop="30dp"
                    android:text="@string/e_mail_text"
                    style="@style/bold_text18" />
                <LinearLayout
                    android:id="@+id/e_mail_edit_layout"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content" 
                    android:weightSum="100">

        <EditText
            android:id="@+id/e_mail_edit_text"
            style="@style/editTextsvCard"
            android:layout_marginLeft="70dp"
            android:layout_marginTop="5dp"
            android:layout_weight="90"
            android:ems="10"
            android:inputType="textEmailAddress"
            >

        </EditText>

                </LinearLayout>

                             <TextView
                    android:id="@+id/mobile_text_view"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="70dp"
                    android:layout_marginTop="30dp"
                    android:text="@string/mobile_text"
                    style="@style/bold_text18"/>
                <LinearLayout
                    android:id="@+id/mobile_edit_layout"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content" 
                    android:weightSum="100">

        <EditText
            android:id="@+id/mobile_edit_text"
            android:layout_marginLeft="70dp"
            android:layout_marginTop="5dp"
            style="@style/editTextsvCard"
            android:layout_weight="90"
            android:ems="10"

             >

        </EditText>

                </LinearLayout>
            </LinearLayout>

            <LinearLayout
                android:id="@+id/right_part"
                android:layout_width="0dp"
                android:layout_height="match_parent"
                android:layout_weight="50"
                android:paddingRight="40dp"
                android:orientation="vertical" 
                android:weightSum="100"
                android:background="@color/antiquewhiter">

                <TextView
                    android:id="@+id/last_name_text_view"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="70dp"
                    android:layout_marginTop="30dp"
                    android:text="@string/last_name_text"
                    style="@style/bold_text18" />
                   <LinearLayout
                    android:id="@+id/last_name_edit_layout"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content" 
                    android:weightSum="100">

        <EditText
            android:id="@+id/last_name_edit_text"
            android:layout_marginLeft="70dp"
            android:layout_marginTop="5dp"
            android:layout_weight="100"
            android:ems="10"
            style="@style/editTextsvCard"
            >

        </EditText>

                </LinearLayout>

                <TextView
                    android:id="@+id/position_text_view"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="70dp"
                    android:layout_marginTop="30dp"
                    android:text="@string/position_text"
                    style="@style/bold_text18"/>
                   <LinearLayout
                    android:id="@+id/position_edit_layout"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content" 
                    android:weightSum="100">

        <EditText
            android:id="@+id/position_edit_text"
            android:layout_marginLeft="70dp"
            android:layout_marginTop="5dp"
            android:layout_weight="100"
            android:ems="10"
            style="@style/editTextsvCard"
           >

        </EditText>

                </LinearLayout>

                   <TextView
                    android:id="@+id/fax_text_view"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="70dp"
                    android:layout_marginTop="30dp"
                    android:text="@string/fax_text"
                    style="@style/bold_text18"/>
                   <LinearLayout
                    android:id="@+id/fax_edit_layout"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content" 
                    android:weightSum="100">

        <EditText
            android:id="@+id/fax_edit_text"
            android:layout_marginLeft="70dp"
            android:layout_marginTop="5dp"
            android:layout_weight="100"
            android:ems="10"
            android:inputType="phone"
            style="@style/editTextsvCard"
             >

        </EditText>

                </LinearLayout>

                   <TextView
                    android:id="@+id/internet_text_view"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="70dp"
                    android:layout_marginTop="30dp"
                    android:text="@string/internet_text"
                    style="@style/bold_text18"/>
                   <LinearLayout
                    android:id="@+id/internet_edit_layout"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content" 
                    android:weightSum="100">

        <EditText
            android:id="@+id/internet_edit_text"
            android:layout_marginLeft="70dp"
            android:layout_marginTop="5dp"
            android:layout_weight="100"
            android:ems="10"
            style="@style/editTextsvCard"
             >

        </EditText>

                </LinearLayout>
                                   <TextView
                    android:id="@+id/b_text_view"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="70dp"
                    android:layout_marginTop="30dp"
                    android:text="@string/internet_text"
                    style="@style/bold_text18"
                    android:visibility="invisible"
                    />

                   <LinearLayout
                    android:id="@+id/button_edit_layout"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content" 
                    android:weightSum="100"
                    android:layout_gravity="right"
                    android:gravity="right">

        <Button
            android:id="@+id/speichern_button"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginTop="5dp"
            android:layout_marginLeft="70dp"
            android:layout_weight="40"
            android:text="@string/speichern_text"
            >

        </Button>

                </LinearLayout>

            </LinearLayout>

        </LinearLayout>

</LinearLayout>
</ScrollView> 
```

垂直视图工作完美，但我想知道我是否可以向此布局添加水平滚动，因为当我有水平方向布局时看起来不错，但是当我改变方向时，我不想减小布局中某些元素的大小。我考虑添加横向卷轴。这个有可能？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-29T12:33:44.343

我加：

```
<HorizontalScrollView 
android:layout_width="match_parent"
android:layout_height="match_parent"
android:fillViewport="true"
> 
```

作为孩子，我的滚动视图和这个解决方案效果很好。

# c++ - 将类实例作为指针传递并在此指针上使用重载的下标运算符

> ID：13121319
> 
> 赞同：0
> 
> 时间：2012-10-29T12:06:46.960
> 
> 标签：c++

我有一个包含整数数组的类，并且为了获得该数组的引用，下标运算符 [] 被重载（这是一个删除了逻辑检查等的精简示例）：

```
class Foo {
public:

Foo() {};

// and overload the [] operator
int& operator[](const int index);

private:
const int LEN = 7;
int arr[LEN];
};

int& Foo::operator[](const int index) {
    return arr[index];
} 
```

这种类的一个实例的指针（名为 boo）被传递给一个函数。现在我想做的是：

```
int val = boo[0]; 
```

但它失败了“错误：从'Foo'类型到'int'类型的无效转换”。

我的第一个想法是我传递一个指向类的指针，我应该将实例的副本带入范围并使用该副本。这行得通。但是我很好奇是否可以将用户定义的类型用作真正的内置类型？我应该使用包装器吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T12:08:36.387

因为重载运算符是为对象定义的，而不是为对象的指针。有两种选择：

```
int val = boo->operator[](0); 
```

或者

```
int val = (*boo)[0]; 
```

或者您可以传递对象（按值或引用）而不是指向它的指针。

您的情况相当于：

```
Boo* b = ....;
b[0];           //this returns a Boo object 
```

相对于：

```
Boo b;
b[0];           //calls operator[] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T12:08:58.693

您需要使用：

```
boo->operator[] ( 0 ); 
```

或者

```
(*boo)[0]; 
```

IE 取消引用指向对象 boo 的指针。

# javascript - 使用类似基础的画布的 Javascript 地图库

> ID：13121325
> 
> 赞同：2
> 
> 时间：2012-10-29T12:07:16.280
> 
> 标签：javascript, html, canvas

我们一直在使用 GoogleMaps、OpenLayers、ModestMaps 等多个库……甚至几年前我们已经编写了一个处理 WMS 服务器的制图 visor (Java Applet)。当然，这个遮阳板目前是没用的。

现在我们想要开发一个完整的 HTML5 遮阳板，因为我们在处理最常见的框架（性能、许可、设计......）时遇到了很多麻烦。我们为 GIS 专家构建先进的技术地图应用程序。

我们想在画布元素内绘制矢量。我们不想在基础地图上绘制画布对象（就像我们可以使用 GoogleMaps 那样......），我们一直在处理这个问题，这不是最好的方法，我们需要一个基础对象作为画布 HTML5 对象在其中直接绘制。

问题是：是否有一个免费的库可以在我们可以扩展的画布对象上呈现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T14:00:26.763

我认为这可能是答案： http: [//leafletjs.com/](http://leafletjs.com/)。这个库做了我们想要的一切，它在画布或 SVG 上绘制矢量，绘制瓷砖地图，与 geojson 的良好集成等等......它无疑是最好的选择。

当然，这个库没有使用独特的画布对象，但它甚至更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T14:02:22.200

如果我正确理解您的问题，您需要一个可以使用 html5 画布绘制地图的地图 API。看起来[https://github.com/dfacts/Slippy-Map-On-Canvas/](https://github.com/dfacts/Slippy-Map-On-Canvas/)使用 Open Street Maps API 来获取地图图块，然后在画布上绘制它们。这是你要找的吗？

# java - 如何从 actionListener 中终止 JOptionPane ConfirmDialog

> ID：13121326
> 
> 赞同：0
> 
> 时间：2012-10-29T12:07:20.310
> 
> 标签：java, joptionpane

我用这条线来显示我的 ConfirmDialog

```
int yn = JOptionPane.showConfirmDialog(frame.getParent(), scrollPane, "stuffs",
         JOptionPane.OK_CANCEL_OPTION); 
```

在该 ConfirmDialog 中，我有一个使用 actionListener 调用服务器的按钮，当连接断开时，我有一个终止函数的检查。但我可以看在上帝的份上，不知道如何同时终止 ConfirmDialog。

如何在仍然使用 ConfirmDialog 的同时解决此问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T12:36:16.093

您可以使用 setVisible(false) 或 dispose() 方法

```
JOptionPane pane=newJOptionPane(frame.getParent(),scrollPane,"stuffs",JOptionPane.OK_CANCEL_OPTION);
pane.dispose(); //or pane.setVisible(false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T08:17:38.837

我的问题的 awnser 部分是你们俩的 awnserd，但这是对我有用的解决方案！

```
 JOptionPane pane = new JOptionPane(tempviewAssistChanges, JOptionPane.PLAIN_MESSAGE);
    final JDialog dialogrr = pane.createDialog(frame.getParent(), "Result report");
    dialogrr.setVisible(true);
    final ActionListener action = new ActionListener()
            {
               public void actionPerformed(ActionEvent e)
               {
                  if(loggedout)
                  {
                     dialogrr.dispose();
                  }
               }
            }; 
```

# android - 是否应将 SkyDrive 应用程序安装在设备中以便使用我的应用程序与 skydrive sdk (livesdk) 连接？

> ID：13121340
> 
> 赞同：1
> 
> 时间：2012-10-29T12:08:20.100
> 
> 标签：android, onedrive

SkyDrive应用程序是否应该安装在设备中以便使用我的应用程序与skydrive sdk（livesdk）连接skydrive。我曾尝试使用我的应用程序客户端ID在sdk zip中给出的示例。但它显示失败祝酒词“无法创建安全连接”等。欢迎任何有价值的建议和示例代码。在此先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T12:38:57.280

得到它的工作它不是设备的问题或未安装 SkyDrive 并且无需在 Android 中安装 SkyDrive 应用程序以在其他应用程序中使用 ..这是由于移动客户端应用程序未在应用程序管理页面的 API 设置中选中为**是**。将其选为 Yes 后，它非常适合我的应用程序。

![在此处输入图像描述](../Images/355776e8226422dec3175bb84b8984ec.png)

# vb.net - 使用 Linq 在单个列上选择不同的然后数据绑定转发器 VB.net

> ID：13121350
> 
> 赞同：2
> 
> 时间：2012-10-29T12:09:08.790
> 
> 标签：vb.net, linq

这有效：

```
 Dim cmdSelect As Data.SqlClient.SqlCommand
    Dim dtr As Data.SqlClient.SqlDataReader
    Dim strSelect As String
    strSelect = "SELECT DISTINCT DVIRDate FROM dbo.tblDVIR " _
        & "WHERE (DVIRDate > DATEADD(day, - 30, { fn NOW() }))"
    cmdSelect = New Data.SqlClient.SqlCommand(strSelect, ConDB)
    ConDB.Open()
    dtr = cmdSelect.ExecuteReader()
    'Bind to Repeater
    Repeater1.DataSource = dtr
    Repeater1.DataBind()
    dtr.Close()
    ConDB.Close()

   <asp:Repeater ID="Repeater1" runat="server" >
   <ItemTemplate>  
   <%# DataBinder.Eval(Container.DataItem, "DvirDate")%>
   <br />
   </ItemTemplate>
   </asp:Repeater> 
```

但这不会：

```
 Dim db As New DataContext
    Dim sel = From a In db.tblDVIRs _
              Where a.DVIRDate > DateAdd(DateInterval.Day, -30, Now()) _
              Select a.DVIRDate _
              Distinct

    Repeater1.DataSource = sel
    Repeater1.DataBind() 
```

我收到一个 HttpException，“DataBinding：'System.DateTime' 不包含名为 'DvirDate' 的属性。”

有趣的是，当我绑定到具有自动生成的列 = true 的网格视图时，它可以工作并且该列被命名为“项目”

我只是没有在 the 中使用正确的表达`databinder.eval`或做其他错误的事情吗？这在 Linq 中应该很容易，我已经尝试了我能想到的一切`databinder.eval()`，我一定错过了一些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T12:37:27.270

这两种情况是有区别的。第一个是绑定 a`DataReader`所以该`Eval`方法使用它，就像 reader("DvirDate") 一样有效。第二个是创建一个`DateTime`结构数组。这个数组有一个名为的属性`Item`，所以自动生成列会带来这个列名，但是每个项目都是一个`DateTime`并且没有一个名为 DvirDate 的属性。

您可以通过两种方式解决它：

1.  创建一个包含属性“DvirDate”的类型。

    Dim sel = 从一个 In db.tblDVIRs _ Where a.DVIRDate > DateAdd(DateInterval.Day, -30, Now()) _ Select New With {.DVIRDate = a.DvirDate} _ Distinct

2.  将数据绑定表达式更改为：

    `<%# Container.DataItem %>`

# c# - 在编译时检查接口是否由类型实现

> ID：13121351
> 
> 赞同：0
> 
> 时间：2012-10-29T12:09:12.217
> 
> 标签：c#, asp.net, .net

我有一个项目，我想保留对该类型的引用，`Type`然后再初始化该类型的实例。但我想要一些编译时类型检查，所以我只能提供实现`ITest`接口的类型。我想我必须改变方法，但我不知道如何。

```
private static Type currentType = null;

public static void Initalize (Type current){
     currentType = current;
}

public class Test : ITest{}
public class Test2 {} 
```

应该可以通过`typeof(Test)`但不能`typeof(Test2)`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T12:11:01.623

为什么不使用泛型？

```
private static Type currentType = null;

public static void Initalize <T>() where T: ITest {
     currentType = typeof(T);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T12:12:01.057

您需要将`Initialize`方法更改为：

```
public static void Initialize(ITest current) 
```

或者，您可以使用泛型来限制类型，例如

```
public static void Initialize<T>(T current) where T: ITest 
```

# tcl - 如何检查该文件是否已关闭

> ID：13121353
> 
> 赞同：1
> 
> 时间：2012-10-29T12:09:12.773
> 
> 标签：tcl

如何检查该文件是否已关闭？

例如：

```
set fh [open "some_test_file" "w"]
puts $fh "Something"
close $fh 
```

现在我想检查通道 $fh 是否已关闭命令：

```
file  channels $fh 
```

什么都不返回，所以我不能在任何情况下使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T12:20:21.363

如果关闭命令没有返回错误，那么它是成功的。该`file channels`命令不带参数，而只返回所有打开的通道，因此`$channel in [file channels]`将是一个冗余测试，以确保您关闭了通道。但是，相信 close 命令的非错误响应怎么样？

我必须纠正自己 - 进行一些检查，结果发现文件通道命令可以采用通道名称的可选模式（全局表达式）来返回。因此，如果文件仍处于打开状态，则原始示例将起作用。您可以在 tclsh 解释器中使用`file channels std*`. 但是，如果关闭通道失败，close 命令仍将返回一个可以捕获的错误，这也允许您处理此类错误（可能稍后重试某些错误）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T14:08:02.057

你也可以使用类似的东西：

```
proc is_open {chan} {expr {[catch {tell $chan}] == 0}} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T08:20:09.817

Why not put the channel name into a variable, make the closing code unset that variable, if `[close]` suceeded and in the checking code just check the variable does not exist (that is, unset)?

Note that I'm following a more general practice found in system programming: once you closed an OS file handle, it became invalid and all accesses to it are hence invalid. So you use other means to signalizing the handle is no more associated with a file.

# ruby-on-rails - Ruby on Rails：设计 - 首次登录时更改密码

> ID：13121356
> 
> 赞同：2
> 
> 时间：2012-10-29T12:09:17.087
> 
> 标签：ruby-on-rails, ruby, devise, passwords

我有一个应用程序，允许用户将项目输入数据库，以后可以在其中搜索它们。每个用户都有自己的登录名，由系统管理员提供。当用户第一次登录时，我希望通常的主页显示“更改密码”视图，以便用户在使用应用程序之前必须更改密码。

我`pass_change`在 User 表中设置了一个布尔列，这是`false`创建新用户的时间。

目前，当用户第一次登录时，他们被带到了更改密码视图，但是当我测试这个功能时，密码没有改变，并且在我提交新密码后视图保持不变，并且该`pass_change`用户不会更改为`true`.

**索引视图：**

```
<html>
<% if current_user.pass_changed == true %>

  <%= stylesheet_link_tag    "index"%>
<body>

<div id = "section1">
<div class = "h1">Database Search</div>

    <div class = "h3">What would you like to do?</div>

<div class="new_project_button">
<%= button_to "Create New Project", new_project_path, :class => "button", :method => "get" %>
</div>
<div class="search_button">
<%= button_to "      Search      ", search_path, :class => "button", :method => "get" %>
</div>
</div>

</body>

<%else%>

<div class ="title">Change your password</div><%= current_user.pass_changed %>

<%= form_for(resource, :as => resource_name, :url => password_path(resource_name), :html => { :method => :put }) do |f| %>
  <%= devise_error_messages! %>

<div class = "signin">

<div class = "field">New Password: 
  <%= f.password_field :password, :class => "password" %>
  </div>

  <div class = "field">Confirm: 
  <%= f.password_field :password_confirmation, :class => "password" %>
  </div>

                        <%= f.hidden_field :pass_changed, :value => true %>
  <div class = "signup_button"><%= f.submit "Change my password", :class => "button" %>
  </div>

</div>
<% end %>
<% end %>

</html> 
```

**应用助手：**

```
module ApplicationHelper

    def resource_name
    :user
  end

  def resource
    @resource ||= User.new
  end

  def devise_mapping
    @devise_mapping ||= Devise.mappings[:user]
  end
end 
```

谁能看到我可能做错了什么？我正在使用设计 gem 来处理身份验证。任何帮助都将不胜感激。提前致谢。

更新：

这是我尝试更改密码时的日志：

```
Started PUT "/users/password" for 127.0.0.1 at 2012-10-29 14:15:05 +0000
Processing by Devise::PasswordsController#update as HTML
  Parameters: {"utf8"=>"Ô£ô", "authenticity_token"=>"eBU5jvN6C+JSIZNmsEaxUyydrvPRjtGZeWLxlQzFJKI=", "user"=>{"password"=
>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "pass_changed"=>"true"}, "commit"=>"Change my password"}
  ←[1m←[35mUser Load (0.0ms)←[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 7 LIMIT 1
Redirected to http://localhost:3000/
Filter chain halted as :require_no_authentication rendered or redirected
Completed 302 Found in 0ms (ActiveRecord: 0.0ms)

Started GET "/" for 127.0.0.1 at 2012-10-29 14:15:05 +0000
Processing by ProjectsController#index as HTML
  ←[1m←[36mUser Load (0.0ms)←[0m  ←[1mSELECT "users".* FROM "users" WHERE "users"."id" = 7 LIMIT 1←[0m
  ←[1m←[35mProject Load (0.0ms)←[0m  SELECT "projects".* FROM "projects"
  Rendered projects/index.html.erb within layouts/application (0.0ms)
Completed 200 OK in 16ms (Views: 15.6ms | ActiveRecord: 0.0ms) 
```

我的索引视图现在看起来像这样：

```
<html>
<% if current_user.pass_changed == true %>

  <%= stylesheet_link_tag    "index"%>
<body>

<div id = "section1">
<div class = "h1">Database Search</div><%= current_user.pass_changed %>

    <div class = "h3">What would you like to do?</div>

<div class="new_project_button">
<%= button_to "Create New Project", new_project_path, :class => "button", :method => "get" %>
</div>
<div class="search_button">
<%= button_to "      Search      ", search_path, :class => "button", :method => "get" %>
</div>
</div>

</body>

<%else%>

<%= form_for(current_user, :as => :user, :url => password_path(current_user), :html => { :method => :put }) do |f| %>
  <%= devise_error_messages! %>

<div class = "signin">

<div class = "field">New Password: 
  <%= f.password_field :password, :class => "password" %>
  </div>

  <div class = "field">Confirm: 
  <%= f.password_field :password_confirmation, :class => "password" %>
  </div>

                        <%= f.hidden_field :pass_changed, :value => true %>
  <div class = "signup_button"><%= f.submit "Change my password", :class => "button" %>
  </div>

</div>
<% end %>
<% end %>

</html> 
```

在我的用户模型中，我添加了：

```
after_update :update_pass_changed

def update_pass_changed
  self.pass_changed = true
  self.save
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T12:21:43.640

试试这个可能对你有帮助，写在你的模型里

```
after_create :update_pass_change

def update_pass_change
  self.pass_change = true
  self.save
end 
```

或者

```
def update_pass_change
  self.update_attributes(:pass_change => true)
end 
```

# xcode4.5 - 如何使用自定义动画将一个视图控制器的解雇动画化到另一个？

> ID：13121366
> 
> 赞同：0
> 
> 时间：2012-10-29T12:09:47.867
> 
> 标签：xcode4.5, uiviewanimation

我只是想出如何动画插入一个 viewControll

```
[self transitiontoViewController:self.filterController duration:.5 options:UIViewAnimationOptionTransitionNone  animations:^{
[self.filterController.view resizeandMovewithRect:CGRectMake(0, self.filterController.view.frame.size.height, 0, 0)];
} completion:^(BOOL finished){
}]; 
```

在这里，resizeAndMovewithRect 只是使用 UIView 的这个类别来移动视图

```
-(void) resizeandMovewithRect:(CGRect)movement
{
    CGRect myFrame = self.frame;

    CGRect newFrame = CGRectMake(myFrame.origin.x+movement.origin.x, myFrame.origin.y + movement.origin.y, myFrame.size.width + movement.size.width , myFrame.size.height + movement.size.height);
    self.frame =newFrame;
} 
```

现在我想做相反的事情。我希望通过将 self.filterController 移出屏幕来将其解散。

一种方法是：

```
[self transitiontoViewController:self.filterController duration:.5 options:UIViewAnimationOptionTransitionNone  animations:^{
[self.filterController.view resizeandMovewithRect:CGRectMake(0, -self.filterController.view.frame.size.height, 0, 0)];
} completion:^(BOOL finished){
}]; 
```

如果我这样做，则根本不会绘制动画。

在我看来，self.filterController 在动画开始时已从超级视图中删除。这就是为什么看不到 self.filterController 发生的任何事情的原因。所以我这样做

```
 [UIView animateWithDuration:.5 animations:^{
        [self.filterController.view resizeandMovewithRect:CGRectMake(0, -self.filterController.view.frame.size.height, 0, 0)];
    } completion:^(BOOL finished){
        [self transitiontoViewController:self.last2ViewsInTheContainer[0] duration:0 options:UIViewAnimationOptionTransitionNone  animations:^{
        } completion:nil];
    }]; 
```

所以我在调用 [self transitiontoViewController

但是，如果我这样做，那么当 self.filterController.view 被卷起时，正在替换它的视图还没有添加到 superview 中。所以那一个是看不见的。

无论如何我应该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T09:26:37.243

我找到了答案。事实证明，直到最后都没有删除任何视图。问题是新的 viewController 被添加到堆栈的顶部。

所以当添加 self.filterController 时，事情就简单了。它已经在前面，而从视图在后面。

当拉出self.filterController时，那个backView在前面隐藏着self.filterController。所以解决方案是简单地将 self.filterController 读取到 superview 中，我们将看到动画。

最终代码：

```
[self transitiontoViewController:self.last2ViewsInTheContainer[0] duration:.5 options:UIViewAnimationOptionTransitionNone  animations:^{
    [self.filterController.view.superview addSubview:self.filterController.view]; //Put the filterControllerView at the front
    [self.filterController.view resizeandMovewithRect:CGRectMake(0, -self.filterController.view.frame.size.height, 0, 0)];
} completion:nil]; 
```

# c# - 不可捕获的 IOException

> ID：13121374
> 
> 赞同：1
> 
> 时间：2012-10-29T12:10:22.080
> 
> 标签：c#, asp.net, .net

使用 XDocument.Load() 从 XML 文件读取的 ASPX.NET 应用程序。有时它会抛出一个 IOException 静态文件，表明该文件无法打开，因为它正在被另一个进程使用。我无法通过打开文件并重新加载站点来随意重新创建它。但更奇怪的是，异常发生在我明确捕获 System.IOException 的 Try-Catch 块中。

这是堆栈：

> 异常类型：IOException
> 
> 线程信息：线程 ID：18 线程帐户名称：NT AUTHORITY\NETWORK SERVICE 正在模拟：False 堆栈跟踪：在 System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath) at System.IO.FileStream.Init(String path, FileMode 模式、FileAccess 访问、Int32 权限、Boolean useRights、FileShare 共享、Int32 bufferSize、FileOptions 选项、SECURITY_ATTRIBUTES secAttrs、String msgPath、Boolean bFromProxy、Boolean useLongPath) at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess访问，FileShare 共享，Int32 bufferSize) 在 System.Xml.XmlDownloadManager.GetStream(Uri uri，ICredentials 凭据，IWebProxy 代理，RequestCachePolicy cachePolicy) 在 System.Xml.XmlUrlResolver.GetEntity(Uri absoluteUri，字符串角色，Type ofObjectToReturn) 在系统。 xml。XmlReaderSettings.CreateReader(String inputUri, XmlParserContext inputContext) 在 System.Xml.XmlReader.Create(String inputUri, XmlReaderSettings settings, XmlParserContext inputContext) 在 System.Xml.Linq.XDocument.Load(String uri, LoadOptions options) 在 System.Xml。 Linq.XDocument.Load（字符串 uri）
> 
> **StatTick.Controls.ChartSlider.getXMLFile(String url) in removedpath\StatTick\Controls\ChartSlider.ascx.cs: StatTick.Controls.ChartSlider.Page_Load(Object sender, EventArgs e) in removedpath\StatTick\Controls\ChartSlider 中的第 27 行.ascx.cs：第 21 行**

这是代码：

```
private XDocument getXMLFile(string url)
    {
        XDocument tempDoc;

        t("Looking For XML File");
        int tryCount = 0;
        //string URL = "~/tempCharts/imageList.xml";
        while (tryCount++ < 10)
        {

            try
            {
                tempDoc = XDocument.Load(Server.MapPath(url));
                return tempDoc;
            }
            catch (IOException)
            {
                t("Error accessing XML File, sleeping for 10ms and then trying again\r\nTryCount: " + tryCount.ToString());
                Thread.Sleep(10);
                continue;

            }
        }

        return null;
    } 
```

希望有人能够为我提供有关此问题的一些见解。

谢谢

**编辑** 好的，这就是我所做的，我将不得不做一些测试以验证它不再抛出感谢您的快速回复！：

```
while (tryCount <= 10)
        {
            try
            {
                using (FileStream fStream = new FileStream(Server.MapPath(url), FileMode.Open, FileAccess.Read, FileShare.Read))
                {
                    XDocument xDoc = XDocument.Load(fStream);

                    foreach (XElement xe in xDoc.Descendants("ImageUrl"))
                    {
                        t("Added: " + xe.Value);
                        tempImageUrlList.Add(xe.Value);
                    }
                    t("Done with Image List!");
                }
                return tempImageUrlList;
            }
            catch (Exception)
            {
                t("Error access XML File, sleeping for 10ms and then trying again\r\nTryCount: " + tryCount.ToString());
                Thread.Sleep(10);
                continue;
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T12:33:51.073

改用流并使用它加载 XML。您可以确保使用 using 语句关闭底层流。

```
using (Stream s = File.OpenRead(Server.MapPath(url)))
{
        XDocument.Load(s);
} 
```

或者

```
using (FileStream fs= new FileStream(Server.MapPath(url), FileMode.Open,
                                          FileAccess.Read, FileShare.Read))
{
        XDocument.Load(fs);
} 
```

;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T12:19:24.873

我认为错误是因为文件的访问权限，所以请给文件读/写权限，然后尝试读取文件。

# algorithm - MapReduce 计算对的出现次数

> ID：13121377
> 
> 赞同：-1
> 
> 时间：2012-10-29T12:10:25.960
> 
> 标签：algorithm, azure, hadoop, mapreduce, azure-hdinsight

我是 MapReduce 新手，希望您对以下任务的最佳 MapReduce 方法提出意见。

我有一个格式为的大文档

```
1 2 3
2
2 3 4 5 
```

每行都有一个数字列表。我想在任何行中列出每个可能的（对）数字组合。我想要包含每个给定对的行数。

结果会像

```
element1 element2 occurrences
1        1        1
1        2        1
1        3        1
2        2        3
2        3        2
3        3        2
3        4        1
3        5        1 
```

文档中有大约 2M 行，大约有 150 万个不同的数字。并且将有大约 2.5G 不同的数字对进行统计。

直截了当的伪代码如下：为文档中的每一行调用映射

```
Map(int lineId, list<int> elements)
{
  for each pair of integers in elements
    emit(pair, 1)
}

Reduce((int, int) pair, list<int> counts)
{
  return sum(counts)
} 
```

但是这种方法需要 2M 的映射器和 2.5G 的减速器。这是一个可行的方法吗？计划在 Azure 上试用 Hadoop。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T13:54:22.007

> 但是这种方法需要 2M 的映射器和 2.5G 的减速器。这是一个可行的方法吗？计划在 Azure 上试用 Hadoop。

这个假设是不正确的。

[FileInputFormat](http://hadoop.apache.org/docs/r0.20.0/api/org/apache/hadoop/mapred/FileInputFormat.html)的映射器数量等于输入拆分的数量。Input Split 可以映射到 HDFS 中的一个块，默认为 64MB。因此，如果输入文件为 1024 MB，则将启动 16 个地图任务。

reducer 的数量可以使用默认为 1 的[mapred.reduce.tasks](http://hadoop.apache.org/docs/r0.20.2/mapred-default.html)参数进行配置。另外，请注意，可以使用[组合器](http://hadoop.apache.org/docs/r0.20.0/api/org/apache/hadoop/mapred/FileInputFormat.html)来更快地完成作业。

建议阅读[Hadoop - The Definitive Guide](http://shop.oreilly.com/product/0636920021773.do)以更好地了解 MapReduce 和 Hadoop。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T13:43:56.207

简而言之，我不是专家，但我会这样做。@Thomas Jungblut 的观点很重要——每个文件的每个块都会触发一个映射器（大小是可配置的，最多可以配置），所以你不会有你想的那么多的映射器，此外——使用平台之类的点Hadoop，在某种程度上，就是让它自己弄清楚。你的逻辑是正确的。

# asp.net - 针对字段的多重验证

> ID：13121379
> 
> 赞同：1
> 
> 时间：2012-10-29T12:10:32.173
> 
> 标签：asp.net, vb.net, validation

我目前想知道一个字段的服务器端验证。

例如，我有一个不能为空的字段，必须是数字并且必须低于 999999 的值。

要验证的示例代码是：

```
 If checkNumeric(txtBaseSalary.Text) = True Then
            txtBaseSalary.CssClass = "text"
        Else
            x += 1
            step_4 += 1
            txtBaseSalary.CssClass = "text error"
 End If

If val(txtBaseSalary.Text) = 0 or val(txtBaseSalary.Text) > 999999  Then
            x += 1
            step_4 += 1
            txtBaseSalary.CssClass = "error text"
        Else
            txtBaseSalary.CssClass = "text"
End If 
```

但是我确信您已经发现了这个问题，如果它没有通过第一次验证但通过了第二次验证，那么错误量（step_4）将会增加，但是如果通过了第二次验证，那么视觉表示就会被清除。

有没有人在没有嵌套 if 语句的情况下对一个字段进行多次验证的实现？

**同样，请提供可以适用于需要多次验证的任何情况的解决方案，而不仅仅是这里是一种可以验证我发布的一种情况的方法。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T12:17:58.510

你可以

*   使用`CustomValidator`with `ValidateEmptyText=true`和代码来检查您的状况或
*   使用 a`RequiredFieldValidator`检查空文本**和**a[`CompareValidator`](http://msdn.microsoft.com/en-us/library/system.web.ui.mobilecontrols.comparevalidator%28v=vs.110%29.aspx)检查给定范围内的数值。

* * *

```
<asp:CompareValidator runat="server" 
    id="cmpNumbers" 
    controltovalidate="txtBaseSalary" 
    valuetocompare="999999"
    operator="LessThan" 
    type="Integer" 
    errormessage="The number should be smaller than 999999!" /><br /> 
```

您可以使用 Ajax[`ValidatorCalloutExtender`](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/ValidatorCallout/ValidatorCallout.aspx)在错误时应用您的 CSS。另一种选择是使用[JQuery](https://stackoverflow.com/a/1301709/284240)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T12:13:54.860

更好的是，您可以创建一个数字文本框控件。它将避免检查 checkNumeric。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T12:58:02.997

此表达式的单个正则表达式比较

```
^([0-9]{1,6})$ 
```

将强制它为数字并且介于 0 和 999999 之间。

您可以使用您编写的方法（因为您似乎想要增加“x”和“step_4”）

```
using System.Text.RegularExpressions;
Regex r = new Regex("^([0-9]{1,6})$");
Match m = r.Match(text);
if (m.Success)... 
```

[MSDN 文档](http://msdn.microsoft.com/en-us/library/twcw2f1c.aspx)

或者您可以使用开箱即用的验证器：

```
 <asp:RegularExpressionValidator 
   ID="regexpName" runat="server"     
   ErrorMessage="error text." 
   ControlToValidate="txtName"     
   ValidationExpression="^([0-9]{1,6})$" /> 
```

[更多 MSDN 文档](http://msdn.microsoft.com/en-us/library/ff650303.aspx)

# extjs4 - 在 FormPanel 中使用 formLabel 进行本地化

> ID：13121380
> 
> 赞同：2
> 
> 时间：2012-10-29T12:10:56.897
> 
> 标签：extjs4

我正在尝试在面板中实现本地化，因此为了使 fieldLabel 可以从另一个文件访问，我将它定义为这样

```
 Ext.define('Ext.app.detailForm', {
        extend: 'Ext.form.Panel',
        id: 'cscForm',
       // frame: true, uncomment this to show blue frame background
        title: 'CSC Details :',

        //trying
        cscCode: 'CSC Code',

        bodyPadding: 5,
        layout: 'anchor',    // Specifies that the items will now be arranged in columns
        autoScroll: true,
        //width:1200,
        //height: 300,
        collapsible: true,
        fieldDefaults: {
            labelAlign: 'left',
            msgTarget: 'side'
        },

        items: [{
            columnWidth: 0.4,
            xtype: 'container',
            layout:'anchor',
            defaults: {
                labelWidth: 150
            },
            defaultType: 'textfield',
            items: [{
            xtype: 'container',
            layout: 'hbox',
            items:[{
                xtype: 'fieldset',
                columnWidth:1.5,
                layout: 'column',
                width:1050,
                defaultType: 'textfield',
                defaults: {
                labelWidth: 150,
                margin: '3 0 0 10'
                },
                items: [{
                    fieldLabel: this.cscCode,
                    name: 'CSCCode',
                    width: 500
                }, {..... 
```

但是当我尝试渲染这个面板时，cscCode 的 formLabel 没有显示，我在这里做错了什么吗？

我基本上无法访问“this.cscCode”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T22:56:34.130

您应该在函数中定义您的 items 数组`initComponent`，而不是作为数组属性。当您`this.cscCode`在数组属性中定义时，您的`this`.

```
Ext.define('Ext.app.detailForm', {
        extend: 'Ext.form.Panel',
        id: 'cscForm',
       // frame: true, uncomment this to show blue frame background
        title: 'CSC Details :',

        //trying
        cscCode: 'CSC Code',

        bodyPadding: 5,
        layout: 'anchor',    // Specifies that the items will now be arranged in columns
        autoScroll: true,
        //width:1200,
        //height: 300,
        collapsible: true,
        fieldDefaults: {
            labelAlign: 'left',
            msgTarget: 'side'
        },

        initComponent: function() {
          this.items = [{
            columnWidth: 0.4,
            xtype: 'container',
            layout:'anchor',
            defaults: {
                labelWidth: 150
            },
            defaultType: 'textfield',
            items: [{
            xtype: 'container',
            layout: 'hbox',
            items:[{ .....
               items: [{
                fieldLabel: this.cscCode,
                name: 'CSCCode',
                width: 500
            }, {.....
         }]
         this.callParent(arguments);
        } 
```

# actionscript-3 - 为工具栏悬停按钮设置下划线文本

> ID：13121383
> 
> 赞同：0
> 
> 时间：2012-10-29T12:11:22.700
> 
> 标签：actionscript-3, apache-flex

将某个按钮悬停在切换栏上时，如何设置下划线文本？我不想为切换栏上的所有按钮设置样式，但只有我结束的那个。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T11:57:53.823

尝试这个

`<mx:Button id="btn" label="Mouse Over" mouseOver="btn.setStyle('textDecoration','underline')" mouseOut="btn.setStyle('textDecoration','none')" labelPlacement="left" useHandCursor="true" buttonMode="true"/>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T12:21:28.237

[Flex Style Browser](http://examples.adobe.com/flex3/consulting/styleexplorer/Flex3StyleExplorer.html)，此页面将为您提供包含所有 flex 组件的 css 代码。我希望它会有所帮助。

# tridion - 如何从组件中获取相关工作流

> ID：13121387
> 
> 赞同：-1
> 
> 时间：2012-10-29T12:11:43.693
> 
> 标签：tridion, tridion-2011

任何人都可以为我提供以下要求的代码片段吗？

我需要找到与组件关联的相关工作流对象。我该如何做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T14:56:50.997

您需要通过组件所基于的架构来完成此操作，因为工作流通过组件的架构或页面的结构组与内容相关联。

获取架构后，您需要检查与之关联的工作流，但这取决于您尝试实现此目标的“位置”。请提供有关“WHERE”的更多详细信息，您是否尝试获取此信息（模板/事件系统/等...）

# asp.net - PreRequestHeaders 未触发

> ID：13121392
> 
> 赞同：0
> 
> 时间：2012-10-29T12:12:12.813
> 
> 标签：asp.net, iis

有一个在 iis 集成管道模式下运行的 asp.net 网站，由于某种原因，httpmodule 中的 PreSendRequestHeaders 没有触发。有任何想法吗？

这是我的代码。该模块注册在 web.config Imports System Imports System.Web

命名空间测试

```
Public Class HttpHeadersCleanup
    Implements IHttpModule

    Public Sub Init(context As System.Web.HttpApplication) Implements IHttpModule.Init

        AddHandler context.PreSendRequestHeaders, AddressOf PreSendRequestHeaders

    End Sub

    Private Shared Sub PreSendRequestHeaders(sender As Object, e As EventArgs)

        HttpContext.Current.Response.Headers.Remove("Server")

    End Sub

    Public Sub Dispose() Implements IHttpModule.Dispose
    End Sub

End Class 
```

结束命名空间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T13:02:52.790

您可以在配置文件中调整您的注册部分

```
<configuration> 
 <system.web> 
  <httpModules> 
   <add type= "YourNamespace.HttpHeadersCleanup, HttpHeadersCleanup" name="HttpHeadersCleanupName" /> 
  </httpModules> 
 </system.web> 
</configuration> 
```

链接： http: [//msdn.microsoft.com/en-us/library/aa719858 (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa719858(v=vs.71).aspx)

# r - 导入和读取多个文件 R

> ID：13121393
> 
> 赞同：3
> 
> 时间：2012-10-29T12:12:12.903
> 
> 标签：r, plyr, read.table

我有许多名为“ *abcd001.txt，abcd002.txt”*的制表符分隔的.txt文件......存储在一个目录中。我可以使用以下代码导入它们（默认目录与数据文件目录相同）。它的三列，都是数字类型的数据

```
filenames <- list.files(path=".",pattern="abcd+.*txt")

#list of data in R
names <-substr(filenames,1,6)

for(i in names){
    filepath <- file.path(".",paste(i,".txt",sep=","))
    assign(i, read.table(filepath,
     colClasses=c("numeric"),
    sep = "\t"))
} 
```

代码本身没有返回任何错误。我的疑问是*如何访问正在加载的数据？如何访问说文件 abcd011.txt 的数据应该是三列数据*

commands:names[3] 只返回文件号 000002 但没有数据。

此处的代码与此处的代码类似：将[多个 CSV 文件读取到单独的数据帧](https://stackoverflow.com/questions/5319839/read-multiple-csv-files-into-separate-data-frames/13090509#13090509)中。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-29T12:27:42.413

我建议将结果`read.table`放在一个列表中，或者放在一位 data.frame 中。此外，我建议`apply`在此处使用样式循环，标准 R ( `lapply`) 或`plyr`. 我更喜欢 using `plyr`，所以我的示例将使用该包。一个例子：

```
## Read into a list of files:
filenames <- list.files(path=".",pattern="abcd+.*txt")
list_of_data = llply(filenames, read.table, 
                                        colClasses = c("numeric"), sep = "\t") 
```

现在可以使用以下方法访问数据：

```
list_of_data[[1]]
list_of_data[["abcd1.txt"]] 
```

或者您可以将文件的内容读入一个大文件`data.frame`：

```
big_data = ldply(filenames, read.table, 
                             colClasses = c("numeric"), sep = "\t")) 
```

现在可以使用以下方法访问文件的内容：

```
big_data[big_data$variable == "abcd1.txt",] 
```

# apache-zest - 是否可以将 Qi4j 与 SQL 数据库一起使用？

> ID：13121395
> 
> 赞同：1
> 
> 时间：2012-10-29T12:12:19.490
> 
> 标签：apache-zest

我对 Qi4j 很感兴趣，但我不知道它与 SQL 数据库的匹配程度如何。

我想知道 Qi4j 提供什么来支持 SQL 数据库？

谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T12:10:44.200

Qi4j SQL 支持就像所有 Qi4j 一样，是一个可选的库和扩展集合。

首先，您可以在已经使用其他东西来处理持久性（JDBC、JPA 或任何其他技术）的应用程序中使用 Qi4j。Qi4j 内核很小，您可以自由使用或不使用 SDK 中的库和扩展。

如果您不想使用 Qi4j 持久性支持（即实体和查询 API），您仍然可以利用允许您将数据源（连接池）作为 Qi4j 服务进行管理的 SQL 库。如文档中所述，SQL 库免费为您提供 CircuitBreaker 库和 Qi4j I/O API 集成。此外，您可以选择导入现有的 DataSource（如果您将应用程序部署在容器中并且希望该容器管理 DataSource，这很有用），或者使用以下任何连接池实现：Apache DBCP、C3P0 或 BoneCP。见[http://qi4j.org/latest/library-sql.html](http://qi4j.org/latest/library-sql.html)

Qi4j 持久性依赖于存储在 EntityStore 中的实体。SDK 提供了许多 EntityStore 实现，包括一个基于 SQL 数据库的实现。支持以下数据库：PostgreSQL、MySQL、MariaDB、SQLite（嵌入式）、H2（嵌入式或服务器）和 Apache Derby（又名 Oracle JavaDB，包括嵌入式和服务器模式）。见[http://qi4j.org/latest/extension-es-sql.html](http://qi4j.org/latest/extension-es-sql.html)

Qi4j 查询 API 依赖于索引/查询服务。同样，SDK 提供了多种实现，包括一种基于 SQL 数据库的实现。在撰写本文时，它仅支持 PostgreSQL 作为后端，但正在努力支持与 SQL EntityStore 一样多的 SQL 数据库。见[http://qi4j.org/latest/extension-indexing-sql.html](http://qi4j.org/latest/extension-indexing-sql.html)

最后，一个应用程序示例演示了如何使用 Qi4j SDK 提供的所有 SQL 支持，供您入门。见[http://qi4j.org/latest/sample-sql-support.html](http://qi4j.org/latest/sample-sql-support.html)

/保罗

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-25T02:32:18.123

早就应该提供更好的 SQL 支持，现在正在努力将 Apache Polygene（以前称为 Qi4j）模型存储在 SQL 关系模型中。与以前的 SQL 实体存储不同，后者将 JSON 对象有效地存储在 SQL 中的键值存储中，此实体存储将每个属性放在自己的列中，并为多对多关系使用单独的表（一对多的反向映射） - 不支持许多关系）。

预计将在 2017 年底包含在 3.1.0 版本中。

# jquery - 如何从 jQuery 将数据插入数据库？

> ID：13121396
> 
> 赞同：0
> 
> 时间：2012-10-29T12:12:19.973
> 
> 标签：jquery, asp.net-mvc-4, asp.net-web-api

我正在使用 jQuery。我需要在 webapi (mvc4) 中将数据插入到数据库中，`<p>`现在我有数据，我需要将该数据插入到数据库中。

这是我的代码：

```
 <script type="text/javascript">
     $(document).ready(function () {
     $('#btndiv1').hide();
     $('#btndiv').hover(function () {
        $('#btndiv1').show();
    });
    });
 </script>
     <script type="text/javascript">
    $(document).ready(function () {
    var editor = CKEDITOR.editor.replace('editor1');
    $('#btndiv').mouseleave(function (event) {
        $('#btndiv1').hide("slow");
            alert(1);
            var value = editor.getData();

            $('#btndiv').append(value);
        // send your ajax request with value

            var dataToPost = JSON.stringify(value);
            alert(dataToPost);
            ale(value);
            $.ajax({
                type: "POST",
                url: "/CkeditrorData/create",
                contentType: "application/json; charset=utf-8",
                data: dataToPost,
                dataType: "json",
                success: function () {
                    // do what you want on success.

                }
            });
        });
    });

</script> 
```

这是我的html：

```
 <h4>design your own text</h4>
<div id="btndiv" >
    <div id="btndiv1" style="height:auto;width:auto; border:solid 1px;">
    <textarea  rows="10"   id="editor1" "></textarea>
    <p id="text" ></p>
        </div>
</div> 
```

现在我在`<p>`上面的标签中有数据；我需要将数据插入数据库。我怎么能这样做？请你帮助我好吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T12:23:33.057

您需要对您的操作进行 ajax 调用，这将对数据库进行插入。

下面是一个非常简单的ajax调用，

```
var Contact = {
Lastname: 'Smith',
Firstname: 'John'
};

var dataToPost = JSON.stringify(Contact);

$.ajax({
    type: "POST",
    url: "/contacts/create",
    contentType: "application/json; charset=utf-8",
    data: dataToPost,
    dataType: "json",
    success: function(){
        // do what you want on success.
    }
}); 
```

在服务器上为联系人类创建一个具有类似结构的类。

```
public class Contact
{
public string Lastname { get; set; };
public string Firstname { get; set; };
} 
```

下面是使用 jquery 将值发布到的操作。

```
[HttpPost]
public string Create(Contact contact)
{
    // insert this contact to db.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T12:14:54.793

您必须使用 ajax 将数据发送到服务器并保存到数据库

# c# - 泛型集合中的协方差

> ID：13121397
> 
> 赞同：0
> 
> 时间：2012-10-29T12:12:23.170
> 
> 标签：c#, wpf, dynamic, covariance, generic-collections

我想这样做

```
List<anotherclass> ls = new List<anotherclass> {new anotherclass{Name = "me"}};    
myGrid.ItemSource = ls; 
```

在别的地方

```
var d = myGrid.ItemSource as IEnumerable<Object>;    
var e = d as ICollection<dynamic>;
e.Add(new anotherclass()); 
```

我需要在程序的不同区域访问 itemsource。我需要在没有编译时间类型信息的情况下将项目添加到列表中。转换为 IEnumerable 有效，但是因为我需要将项目添加到集合中，所以我需要的不止这些，因此尝试将其转换为集合。

怎么可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T12:16:21.787

`List<T>`实现[`IList`](http://msdn.microsoft.com/en-us/library/vstudio/system.collections.ilist.aspx)。所以只要你确定你添加了正确类型的对象，你就可以使用`Add`这个接口的方法：

```
var d = (IList)myGrid.ItemSource;        
d.Add(new anotherclass()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T12:23:54.620

问题不是：“它为什么起作用？”，因为事实上，它不起作用。它编译但它会抛出一个`NullReferenceException`.
`d as ICollection<dynamic>`将返回`null`，因为 an`List<anotherclass>`不是 an`ICollection<dynamic>`而是 an`ICollection<anotherclass>`并且`ICollection<T>`不是协变的。

[KooKiz](https://stackoverflow.com/a/13121461/572644)已经提供了解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T12:17:15.747

试试这个：

```
var d =(List<anotherclass>) myGrid.ItemSource;
d.Add(new anotherclass()); 
```

我觉得直接做演员比较好。如果你使用 as 它会在尝试添加时抛出 nullreferenceException。最好让 invalidCastException 更好地描述问题所在。

# html - 字体大小 100% 和继承之间的区别

> ID：13121398
> 
> 赞同：1
> 
> 时间：2012-10-29T12:12:23.313
> 
> 标签：html, font-size, inheritance

海吉

我的问题是：将样式 font-size:inherit 设置为 HTML 标记是否等同于将其样式设置为 font-size:100%？

据我了解， font-size:inherit 意味着 HTML 标签中的字体大小将从其父标签继承字体大小，这意味着它将具有其父标签的 100% 的字体大小。

如果我错了，请纠正我。我已经做了几个测试来证明这一点。但是，必须有区别，所以有人可以向我指出这一点吗？

非常感谢圣战哈达德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T12:53:44.350

`font-size: 100%`根据规格，和的效果没有区别`font-size: inherit`。后者较新且支持较少，因此存在实际差异：后者被某些浏览器忽略。

# iphone - 如何更改比例尺的尺寸 - 使用 UIImagePickerController 时移动裁剪矩形

> ID：13121401
> 
> 赞同：0
> 
> 时间：2012-10-29T12:12:34.143
> 
> 标签：iphone, objective-c, uiimageview, uiimagepickercontroller

我正在执行`capture image`操作以捕获本质上为**3x4 尺寸矩形****的“身份证”和“名片”**

 **打开使用 UIImagePickerController 并设置时**`allowsImageEditing = YES;`**

有一个**默认的裁剪框是 4x4 正方形。**

就我而言，**我想将该裁剪框设置为 3x4 以用于裁剪图像窗口**。

但是，在编辑/裁剪照片时，我无法找到将方形框架更改为矩形框架的方法。你们中有人找到方法了吗？

*`MY CLIENT REQUIREMENTS IS need the user to select images that are 3x4 or 2x3 rectangle but the crop rect currently only allows 4x4 square (when allow editing is on).`*

***`How does the "move and scale screen" determine dimensions for its cropbox?`***

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T12:23:35.553

我不知道 3x4 的大小是多少，但如果您说的是 3:4 的高宽比，那么这里有一个简单的方法，可以将 UIImagePicker 拾取的图像调整为所需大小（也可能在3:4 的比例）。

```
 - (UIImage*)imageWithImage:(UIImage*)image scaledToSize:(CGSize)newSize;
{

    UIGraphicsBeginImageContext(newSize);
    [image drawInRect:CGRectMake(0,0,newSize.width,newSize.height)];
    UIImage* newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return newImage;
} 
```

希望这是您正在寻找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T12:18:45.880

你应该在相机上使用 Overlay 这里是源代码你可以找到你的答案可能是 [Click here](https://github.com/xissburg/XBImageFilters)**

# c# - 如何在移动 6.5 中使表单可拖动

> ID：13121403
> 
> 赞同：0
> 
> 时间：2012-10-29T12:12:41.180
> 
> 标签：c#, forms, draggable, windows-mobile-6.5

我正在为 windows mobile 6.5（c#、.net、compact 框架）开发一个应用程序，我很难找到如何在不使用默认滚动条的情况下上下拖动我的表单。我的表单比设备的屏幕大，我不希望用户使用默认滚动条，而是拖动表单。

关于如何做到这一点的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T14:34:52.347

Thorsten 是对的，表单创建被硬编码到任何 Compact Framework 运行时中，您不能创建非全屏表单（这是窗口视图中的对话框）。

如果您开始在 VS (2003/2005/2008) 中开发本机 C/C++ Windows CE 项目，则窗口大小可以自由定义。

但是，创建后使用pinvoke更改窗体的窗口样式，您可以拥有一个可移动的窗口窗体：

![在此处输入图像描述](../Images/d119a80a914737dd9a658b0f797257c0.png)

在应用（相同的）窗口样式并稍微调整大小之后：

![在此处输入图像描述](../Images/a882875b98bd491a54fa4be04421c271.png)

这是 C# Compact Framework 的代码片段：

```
 using System;

using System.Collections.Generic;
using System.Text;

using System.Runtime.InteropServices;
using System.Reflection;

namespace MovableForm
{
    class winapi
    {
        public static void moveWindow(System.Windows.Forms.Form form){
            SetWindowPos(form.Handle, (IntPtr) HWNDPOS.HWND_TOPMOST, form.Left + 10, form.Top + 10, form.Width - 20, form.Height - 20, (uint)SWP.SWP_SHOWWINDOW);
        }

        public static void setStyle(System.Windows.Forms.Form frm)
        {
            uint oldStyle = getStyle(frm);
            uint newStyle = (uint)(
                            WINSTYLES.WS_OVERLAPPED | WINSTYLES.WS_POPUP | WINSTYLES.WS_VISIBLE | 
                            //WINSTYLES.WS_SYSMENU |  // add if you need a X to close
                            WINSTYLES.WS_CAPTION | WINSTYLES.WS_BORDER | //WINSTYLES.WS_DLGFRAME | WINSTYLES.WS_MAXIMIZEBOX |
                            WINSTYLES.WS_POPUPWINDOW);
            int iRet = SetWindowLong(frm.Handle, (int)GWL.GWL_STYLE, (int)newStyle);
            //if returned iRet is zero we got an error

            int newExStyle = GetWindowLong(frm.Handle, (int)GWL.GWL_EXSTYLE);
            newExStyle = (int)((uint)newExStyle - (uint) WINEXSTYLES.WS_EX_CAPTIONOKBTN); //remove OK button
            iRet = SetWindowLong(frm.Handle, (int)GWL.GWL_EXSTYLE, (int)newExStyle);
            moveWindow(frm);
            frm.Refresh();
        }

        //great stuff by http://ideas.dalezak.ca/2008/11/enumgetvalues-in-compact-framework.html
        public static IEnumerable<Enum> GetValues(Enum enumeration)
        {
            List<Enum> enumerations = new List<Enum>();
            foreach (FieldInfo fieldInfo in enumeration.GetType().GetFields(
                  BindingFlags.Static | BindingFlags.Public))
            {
                enumerations.Add((Enum)fieldInfo.GetValue(enumeration));
            }
            return enumerations;
        }
... 
```

然后是我使用的枚举（对不起所有的转换，我不明白，为什么标志在 API 调用中被定义为 int）：

```
 [DllImport("coredll.dll", SetLastError = true)]
    private static extern int SetWindowLong(IntPtr hWnd, int nIndex, int dwNewLong);
    [DllImport("coredll.dll", SetLastError = true)]
    private static extern int GetWindowLong(IntPtr hWnd, int nIndex);

    //non-fullscreen window (ex zDump) = WS_STYLE=0x90c9004, WS_EX_STYLE=0x00000008
    //WS_POPUP | WS_VISIBLE
    enum GWL:int{
        GWL_STYLE = -16,
        GWL_EXSTYLE = -20,
    }

    [Flags]
    enum WINSTYLES:uint{
        WS_OVERLAPPED =     0x00000000,    //#define WS_OVERLAPPED       WS_BORDER | WS_CAPTION
        WS_POPUP=           0x80000000,
        WS_VISIBLE=         0x10000000,
        WS_MINIMIZE=        0x20000000,
        WS_CLIPSIBLINGS=    0x04000000,
        WS_CLIPCHILDREN=    0x02000000,
        WS_DISABLED=        0x08000000,
        WS_MAXIMIZE=        0x01000000,
        WS_CAPTION =        0x00C00000,    //#define WS_CAPTION          0x00C00000L     /* WS_BORDER | WS_DLGFRAME  */
        WS_BORDER=          0x00800000,
        WS_DLGFRAME=        0x00400000,
        WS_VSCROLL=         0x00200000,
        WS_HSCROLL=         0x00100000,
        WS_SYSMENU=         0x00080000,
        WS_THICKFRAME=      0x00040000,
        WS_MINIMIZEBOX=     0x00020000,
        WS_MAXIMIZEBOX=     0x00010000,
        WS_POPUPWINDOW=     0x80880000,     //  Creates a pop-up window with WS_BORDER, WS_POPUP, and WS_SYSMENU styles. The WS_CAPTION and WS_POPUPWINDOW styles must be combined to make the window menu visible.
    }
    enum WINEXSTYLES:uint{
        WS_EX_DLGMODALFRAME    = 0x00000001,
        WS_EX_TOPMOST          = 0x00000008,
        WS_EX_TOOLWINDOW       = 0x00000080,
        WS_EX_WINDOWEDGE       = 0x00000100,
        WS_EX_CLIENTEDGE       = 0x00000200,
        WS_EX_CONTEXTHELP      = 0x00000400,
        WS_EX_RIGHT            = 0x00001000,
        WS_EX_RTLREADING       = 0x00002000,
        WS_EX_LEFTSCROLLBAR    = 0x00004000,
        WS_EX_STATICEDGE       = 0x00020000,
        WS_EX_NOINHERITLAYOUT  = 0x00100000, // Disable inheritence of mirroring by children
        WS_EX_LAYOUTRTL        = 0x00400000, // Right to left mirroring
        WS_EX_OVERLAPPEDWINDOW = 0x00000300, // (WS_EX_WINDOWEDGE | WS_EX_CLIENTEDGE)
        WS_EX_CAPTIONOKBTN     = 0x80000000,
        WS_EX_NODRAG           = 0x40000000,
        WS_EX_ABOVESTARTUP     = 0x20000000,
        WS_EX_INK              = 0x10000000,
        WS_EX_NOANIMATION      = 0x04000000,
} 
```

...

```
 [DllImport("coredll.dll", SetLastError = true)]

        [return: MarshalAs(UnmanagedType.Bool)]
        private static extern bool SetWindowPos(IntPtr hWnd, IntPtr hWndInsertAfter, int x, int y, int cx, int cy, uint uFlags);

        enum SWP{
            SWP_ASYNCWINDOWPOS = 0x4000,
            SWP_DEFERERASE = 0x2000,
            SWP_DRAWFRAME = 0x0020,
            SWP_FRAMECHANGED = 0x0020,
            SWP_HIDEWINDOW = 0x0080,
            SWP_NOACTIVATE = 0x0010,
            SWP_NOCOPYBITS = 0x0100,
            SWP_NOMOVE = 0x0002,
            SWP_NOOWNERZORDER = 0x0200,
            SWP_NOREDRAW = 0x0008,
            SWP_NOREPOSITION = 0x0200,
            SWP_NOSENDCHANGING = 0x0400,
            SWP_NOSIZE = 0x0001,
            SWP_NOZORDER = 0x0004,
            SWP_SHOWWINDOW = 0x0040,
        }
        enum HWNDPOS{
            HWND_TOP = 0,
            HWND_BOTTOM = 1,
            HWND_TOPMOST = -1,
            HWND_NOTOPMOST = -2,
        }
    }
} 
```

希望 stackoverflow 在不久的将来能够上传代码。

问候

约瑟夫

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T12:29:51.973

不能在 Windows Mobile 的屏幕上移动表单。他们也不能只占据屏幕的一部分。这只能在 Windows CE 中实现。

# ruby-on-rails - Ruby on Rails 中的多线程

> ID：13121404
> 
> 赞同：2
> 
> 时间：2012-10-29T12:12:44.580
> 
> 标签：ruby-on-rails, multithreading

在我的控制器中，我有一系列嵌套循环

```
x.downto(0)
   y.downto(0)
      z.downto(0) 
```

我想问一下我是否可以将它们分成多个线程，例如

```
#pragma omp parallel for 
```

在 C 中做。

我曾尝试使用

```
Thread.new do 
```

方法，但它似乎没有任何效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T12:30:53.497

```
Thread.new{
    //some function
} 
```

肯定会起作用，但在你的情况下，如果你像这样申请

```
x.downto(0)
Thread.new {
    y.downto(0)
    Thread.new {
        z.downto(0)
    }
} 
```

它创建了多个嵌套线程，但它应该会产生影响。我没有遇到过使用这种情况，但我觉得这可能会有所帮助。

# google-chrome - 对象标签在 chrome 中无法播放视频

> ID：13121407
> 
> 赞同：2
> 
> 时间：2012-10-29T12:12:51.653
> 
> 标签：google-chrome, plugins, windows-media-player, object-tag

我正在使用以下代码通过从服务器获取 src 路径在浏览器中播放视频：

```
<object id="MediaPlayer1" CLASSID="CLSID:22d6f312-b0f6-11d0-94ab-0080c74c7e95" codebase="http://activex.microsoft.com/activex/controls/mplayer/en/nsmp2inf.cab#Version=5,1,52,701"
standby="Loading Microsoft Windows® Media Player components..." type="application/x-oleobject" width="280" height="256">
   <param name="src" value="C:\Users\Public\Videos\Sample Videos\fp.avi" />
   <param name="animationatStart" value="true">
   <param name="transparentatStart" value="true">
   <param name="autoStart" value="true">
   <param name="showControls" value="true">
   <param name="Volume" value="-450">
   <embed type="application/x-mplayer2" pluginspage="http://www.microsoft.com/Windows/MediaPlayer/" src="C:\Users\Public\Videos\Sample Videos\fp.avi" name="MediaPlayer1" width=280 height=256 autostart=1 showcontrols=1 volume=-450>
</object> 
```

我想给它一个本地路径来测试代码。在这里，我使用的是带有`.avi`扩展名的视频文件。

它在 Mozilla 和 Internet Explorer 中运行良好，但不适用于 chrome。知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-22T19:49:37.043

这应该在 Chrome 中工作，因为代码是上面写的。确保正确的程序/扩展程序/插件正在尝试播放您的 .avi。首先确保您拥有正确的浏览器插件。例如，Chrome[插件](http://www.interoperabilitybridges.com/ChromeWMP/wmpChrome.crx)。在同一站点有一个对应的 Firefox 插件。如果有其他东西试图渲染您的 .avi，您可能无法获得所需的行为。

顺便说一句，如果链接告诉您该服务不可用或类似情况，请稍后再试。它会工作...

# vba - 在 Textbox1 中显示选定的单元格区域

> ID：13121413
> 
> 赞同：0
> 
> 时间：2012-10-29T12:13:27.020
> 
> 标签：vba, excel

我在尝试显示从 Excel 到用户窗体文本框的选定单元格范围时遇到问题，说`C1:E14.`下面的代码给了我一个`Runtime error '13' Type Mismatch`：

```
Private Sub CommandButton1_Click()
Dim ActSheet As Worksheet
Dim SelRange As Range
Set ActSheet = ActiveSheet
Set SelRange = Selection
Range("TABLE").Select
Application.Goto "TABLE"
UserForm1.TextBox1.Text = Range("C1:E14").Value
'UserForm1.TextBox1.Text = Range("C1:E14").Select
End Sub 
```

如果我使用`.Value`它会给出上述错误，但如果我使用`.Select "True"`它会在 UserForm 文本框中打印。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T15:26:29.997

评论是正确的。您正在尝试将范围设置为字符串。

你可以用这样的东西把它变成一个范围

```
Public Function Join(seperator As String, rng As Variant) As String

    Dim cell As Variant
    Dim joinedString As String
    For Each cell In rng
        joinedString = joinedString & cell & seperator
    Next cell
    joinedString = Left(joinedString, Len(joinedString) - Len(seperator))
    Join = joinedString

End Function 
```

然后

`UserForm1.TextBox1.Text = Join(",",Range("C1:E14"))`

或者如果您想从每个单元格中创建新行

```
Dim joinedString as string
joinedString  = Join("|",Range("C1:E14"))
UserForm1.TextBox1.Text = Replace(joinedString  , "|", vbCrLf) 
```

# c# - 获取具有具有特定值的自定义属性的所有属性

> ID：13121414
> 
> 赞同：11
> 
> 时间：2012-10-29T12:13:29.717
> 
> 标签：c#, c#-4.0, reflection, attributes, data-annotations

> **可能重复：**
> [如何获取具有给定属性的属性列表？](https://stackoverflow.com/questions/2281972/how-to-get-a-list-of-properties-with-a-given-attribute)

我有一个像这样的自定义类

```
public class ClassWithCustomAttributecs
{
    [UseInReporte(Use=true)]
    public int F1 { get; set; }

    public string F2 { get; set; }

    public bool F3 { get; set; }

    public string F4 { get; set; }
} 
```

我有一个自定义属性`UseInReporte`：

```
[System.AttributeUsage(System.AttributeTargets.Property ,AllowMultiple = true)]
public class UseInReporte : System.Attribute
{
    public bool Use;

    public UseInReporte()
    {
        Use = false;
    }
} 
```

不，我想获取所有具有`[UseInReporte(Use=true)]`如何使用反射来执行此操作的属性？

谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-29T12:18:58.947

```
List<PropertyInfo> result =
    typeof(ClassWithCustomAttributecs)
    .GetProperties()
    .Where(
        p =>
            p.GetCustomAttributes(typeof(UseInReporte), true)
            .Where(ca => ((UseInReporte)ca).Use)
            .Any()
        )
    .ToList(); 
```

当然`typeof(ClassWithCustomAttributecs)`应该替换为您正在处理的实际对象。

# client-server - 在客户端机器中移动文件

> ID：13121416
> 
> 赞同：1
> 
> 时间：2012-10-29T12:13:33.517
> 
> 标签：client-server

我们有一个 OPENGL 应用程序。我们将其部署在服务器中。从客户端计算机运行时，出现错误说它需要一些 .dll 文件，而它们已经捆绑在 jar 中。我们正在尝试在其中创建一个临时文件夹客户端机器的c盘并下载.dll文件以及其中的批处理文件。使用客户端机器的DOS提示符，我们正在运行批处理文件。它将.dll文件复制到jre的bin文件夹中.我们如何在客户端机器上设置权限来做这个操作？

# python - 程序包含的py2exe和msvcr90.dll不起作用请帮助

> ID：13121417
> 
> 赞同：2
> 
> 时间：2012-10-29T12:13:37.837
> 
> 标签：python, visual-studio, py2exe, redistributable, msvcr90.dll

System XP 和 Win 7 python 2.6 和 2.7

我用 'bundle_files':1 创建了我的 .exe，所以我只有一个文件，没有 .dll，它在我的计算机上运行，​​然后转到一个没有 python 或 vs 可分发文件的新文件 - 没有用。收到“系统无法执行指定的程序”的错误是否有人环顾四周并发现我需要可分发的 - 安装和工作良好 - 但我想用 budle_files:1 选项编译，所以我只有一个 . exe 文件与 .dll 并且不必在我的计算机和朋友上具有可分发的内容。（我知道你不能捆绑这个 .dll）

我使用了 py2exe 指南中提供的示例，但 .dll 文件和 .manifest 文件不在它显示的位置，所以我只是将它们复制到另一个更简单的位置。它编译并包含“Microsoft.VC90.CRT”子文件夹，但是当我删除 python 和可分发文件时我仍然收到错误消息。这是我的脚本。

```
from distutils.core import setup
from glob import glob
import os
import sys
import platform
import py2exe

data_files = [("Microsoft.VC90.CRT", glob(r'C:\Documents and Settings\User\Desktop\Temp\dlls\*.*'))]
setup(console=['Script.py'],
    data_files=data_files,
    options = {'py2exe':{'bundle_files':1}},
    zipfile= None,
    ) 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T17:40:35.973

从来没有得到答案，只是放弃了一个py2exe。

找到 pyinstaller。这比我用 py2exe 做得更好。而不是拥有我的一个 .exe 文件和额外的 .dll 目录。它能够只制作一个 .exe 文件，并且能够在没有 python 或可再发行组件的系统上运行。

将您的脚本作为 pyinstaller.py 脚本放在目录中。

```
cmd > location of scripts

pyinstaller.py --onefile <yourscript> 
```

# ios - 扩展 UIView 或 UITableView

> ID：13121420
> 
> 赞同：0
> 
> 时间：2012-10-29T12:13:52.257
> 
> 标签：ios, xcode, uitableview, uiview, extend

当您想查看应用程序的更多更新时，我正在尝试通过单击按钮以在其中显示更多详细信息来扩展我的`UITableView`或`UIView`的高度，这与 App Store 中的选项相同。有什么教程吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T17:50:32.617

好的，我会回答我自己的问题。可能有一个更简单的方法，但如果有人有同样的问题，你可以使用它： 1.`UIButton`在视图上添加 a 2\. 在 .h 文件中 make a`NSInteger i`并在`viewDidLoad`give`i=0`中。3.当用户点击不可见按钮时`UIView`：

```
-(IBAction) clickMyView (id) sender {
if (i==0){
i=1;
[self changeView];
}
else{
i=0;
[self changeView];
} 
```

4.设置`chageView`：

```
-(void) changeView{
if (i==0){
        [UIView beginAnimations : nil context:nil];
        [UIView setAnimationDuration:0.3];
        [UIView setAnimationBeginsFromCurrentState:TRUE];        

        // Change the view back to it's normal size here
        [UIView commitAnimations];

}
else{
            [UIView beginAnimations : nil context:nil];
            [UIView setAnimationDuration:0.3];
            [UIView setAnimationBeginsFromCurrentState:TRUE];

            // Change the view to the new size here
            [UIView commitAnimations];

} 
```

# excel - 范围内每个单元格的边框

> ID：13121425
> 
> 赞同：43
> 
> 时间：2012-10-29T12:14:24.587
> 
> 标签：excel, vba

我正在尝试创建一个简单的函数，它将在一定范围内的每个单元格周围添加边框。使用精彩的录音，这会产生大量毫无用处的代码。下面的代码将在这个范围内的每个单元格周围显示一个数据“表格”，我想添加一个边框。在网上我还没有找到一个简单或明确的答案。

非常感谢所有帮助！

```
Set DT = Sheets("DATA")
endRow = DT.Range("F" & Rows.Count).End(xlUp).Row
result = 3

For I = 2 To endRow
    If DT.Cells(I, 6).Value = Range("B1").Value Then
        Range("A" & result) = DT.Cells(I, 6).Value
        Range("B" & result) = DT.Cells(I, 1).Value
        Range("C" & result) = DT.Cells(I, 24).Value
        Range("D" & result) = DT.Cells(I, 37).Value
        Range("E" & result) = DT.Cells(I, 3).Value
        Range("F" & result) = DT.Cells(I, 15).Value
        Range("G" & result) = DT.Cells(I, 12).Value
        Range("H" & result) = DT.Cells(I, 40).Value
        Range("I" & result) = DT.Cells(I, 23).Value
        result = result + 1
    End If
Next I 
```

* * *

## 回答 #1

> 赞同：132
> 
> 时间：2012-10-29T21:53:51.710

您只需要一行代码即可设置范围内每个单元格的边框：

`Range("A1:F20").Borders.LineStyle = xlContinuous`

对每个单元格周围的边框应用多种效果也很容易。

例如：

```
Sub RedOutlineCells()
    Dim rng As Range

    Set rng = Range("A1:F20")

    With rng.Borders
        .LineStyle = xlContinuous
        .Color = vbRed
        .Weight = xlThin
    End With
End Sub 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-29T13:26:52.167

可以使用任何范围作为参数调用以下命令：

```
Option Explicit

Sub SetRangeBorder(poRng As Range)
    If Not poRng Is Nothing Then
        poRng.Borders(xlDiagonalDown).LineStyle = xlNone
        poRng.Borders(xlDiagonalUp).LineStyle = xlNone
        poRng.Borders(xlEdgeLeft).LineStyle = xlContinuous
        poRng.Borders(xlEdgeTop).LineStyle = xlContinuous
        poRng.Borders(xlEdgeBottom).LineStyle = xlContinuous
        poRng.Borders(xlEdgeRight).LineStyle = xlContinuous
        poRng.Borders(xlInsideVertical).LineStyle = xlContinuous
        poRng.Borders(xlInsideHorizontal).LineStyle = xlContinuous
    End If
End Sub 
```

例子：

```
Call SetRangeBorder(Range("C11"))
Call SetRangeBorder(Range("A" & result))
Call SetRangeBorder(DT.Cells(I, 6))
Call SetRangeBorder(Range("A3:I" & endRow)) 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-03-25T21:38:32.033

我将一组 15 个子例程添加到我创建的每个编码 Excel 工作簿中，这就是其中之一。以下例程清除该区域并创建边界。

**样品电话：**

```
Call BoxIt(Range("A1:z25")) 
```

**子程序：**

```
Sub BoxIt(aRng As Range)
On Error Resume Next

    With aRng

        'Clear existing
        .Borders.LineStyle = xlNone

        'Apply new borders
        .BorderAround xlContinuous, xlThick, 0
        With .Borders(xlInsideVertical)
            .LineStyle = xlContinuous
            .ColorIndex = 0
            .Weight = xlMedium
        End With
        With .Borders(xlInsideHorizontal)
            .LineStyle = xlContinuous
            .ColorIndex = 0
            .Weight = xlMedium
        End With
    End With

End Sub 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-10-29T19:21:04.477

这是另一种方式

```
Sub testborder()

    Dim rRng As Range

    Set rRng = Sheet1.Range("B2:D5")

    'Clear existing
    rRng.Borders.LineStyle = xlNone

    'Apply new borders
    rRng.BorderAround xlContinuous
    rRng.Borders(xlInsideHorizontal).LineStyle = xlContinuous
    rRng.Borders(xlInsideVertical).LineStyle = xlContinuous

End Sub 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-29T12:41:57.987

添加边框试试这个，例如：

```
Range("C11").Borders(xlEdgeRight).LineStyle = xlContinuous
Range("A15:D15").Borders(xlEdgeBottom).LineStyle = xlContinuous 
```

希望语法是正确的，因为我已经在 C# 中完成了这个。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-01-03T07:34:31.843

```
xlWorkSheet.Cells(1, 1).Borders(Excel.XlBordersIndex.xlEdgeRight).LineStyle = Excel.XlDataBarBorderType.xlDataBarBorderSolid
xlWorkSheet.Cells(1, 1).Borders(Excel.XlBordersIndex.xlEdgeLeft).LineStyle = Excel.XlDataBarBorderType.xlDataBarBorderSolid
xlWorkSheet.Cells(1, 1).Borders(Excel.XlBordersIndex.xlEdgeBottom).LineStyle = Excel.XlDataBarBorderType.xlDataBarBorderSolid
xlWorkSheet.Cells(1, 1).Borders(Excel.XlBordersIndex.xlEdgeTop).LineStyle = Excel.XlDataBarBorderType.xlDataBarBorderSolid 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-10-19T14:04:21.910

您还可以将此任务包含在另一个宏中，而无需打开新宏：

我没有放 Sub 和 end Sub，因为宏包含更长的代码，如下图所示

```
With Sheets("1_PL").Range("EF1631:JJ1897")
    With .Borders
    .LineStyle = xlContinuous
    .Color = vbBlack
    .Weight = xlThin
    End With
[![enter image description here][1]][1]End With 
```

# c++ - 访问构建树中的外部文件进行测试

> ID：13121428
> 
> 赞同：2
> 
> 时间：2012-10-29T12:14:32.823
> 
> 标签：c++, testing, cmake

我正在使用 CMake 编译和测试 C++ 项目。假设我有这样的结构：

```
inc/
    ..
src/
    ..
data/
    dataFile 
```

文件`dataFile`是从代码访问的，将安装在`<prefix>/share`或类似的目录下。在我的代码中，我执行以下操作：

```
std::ifstream dataFile(DATAFILE_PATH); 
```

我知道我可以`DATAFILE_PATH`使用 CMake 进行配置（使用标头模板，或编译选项，或任何东西），所以我不必直接在我的代码中硬编码文件路径。另外，我知道如何将文件安装到安装树，并且可以复制文件以将文件复制到构建树，例如运行测试或简单地从构建树运行可执行文件。

我的问题是，我应该如何配置 CMake，或者我的 C++ 代码，以便我可以编译我的程序并从构建树（访问构建树`dataFile`中的副本）**和**安装树（访问`dataFile`安装的副本`<prefix>/share`）运行和测试它？在 CMake 中实现了我缺少的任何模式或技术吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T13:24:44.260

我不知道 CMake 的细节，所以也许我没有给你最简单的解决方案。但我可以想到两种处理方法，不需要在测试和安装之间重新编译程序。

第一种是不要使用单一路径，而是使用它们的列表，并使用第一个可以成功打开的路径。

```
const char* datafile_paths[] = { DATAFILE_PATH };
...
std::ifstream dataFile;
for(int i = 0; i < sizeof(datafile_paths)/sizeof(char*); i++)
{
    data.open(datafile_paths[i]);
    if(data.is_open()) break;
}
if(!data.is_open()) handle error; 
```

这里的 DATAFILE_PATH 可能如下所示，例如“/foo/bar/data.dat”、“/foo/data.dat”，即以逗号分隔的路径列表。

另一种是使用环境变量。对于某些项目，这可能是更可取的，因为它更灵活，让用户选择保存资源文件的位置。但这通常意味着需要修改 .bashrc 或类似文件，这有点恶心。

```
char * datapath = getenv("MYPROJECT_DATAPATH");
if(!datapath) handle error;
std::ifstream data(datapath); 
```

通常人们不会单独使用这种技术，而是将其与上述技术结合使用，首先检查环境变量，如果失败则返回编译路径列表。

# typescript - 访问基类成员

> ID：13121431
> 
> 赞同：139
> 
> 时间：2012-10-29T12:14:41.300
> 
> 标签：typescript

请参阅 TypeScript 网站上 Playground 的继承示例：

```
class Animal {
  public name;
  constructor(name) {
    this.name = name;
  }
  move(meters) {
    alert(this.name + " moved " + meters + "m.");
  }
}

class Snake extends Animal {
  constructor(name) {
    super(name);
  }
  move() {
    alert("Slithering...");
    super.move(5);
  }
}

class Horse extends Animal {
  constructor(name) {
    super(name);
  }
  move() {
    alert(super.name + " is Galloping...");
    super.move(45);
  }
}

var sam = new Snake("Sammy the Python");
var tom: Animal = new Horse("Tommy the Palomino");

sam.move();
tom.move(34); 
```

我更改了一行代码：`Horse.move()`. 那里我想访问`super.name`，但返回只是`undefined`。IntelliSense 建议我可以使用它并且 TypeScript 可以正常编译，但它不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：209
> 
> 时间：2012-10-29T14:37:56.327

工作示例。注释如下。

```
class Animal {
    constructor(public name) {
    }

    move(meters) {
        alert(this.name + " moved " + meters + "m.");
    }
}

class Snake extends Animal {
    move() {
        alert(this.name + " is Slithering...");
        super.move(5);
    }
}

class Horse extends Animal {
    move() {
        alert(this.name + " is Galloping...");
        super.move(45);
    }
}

var sam = new Snake("Sammy the Python");
var tom: Animal = new Horse("Tommy the Palomino");

sam.move();
tom.move(34); 
```

1.  您无需手动将名称分配给公共变量。`public name`在构造函数定义中使用会为您执行此操作。

2.  您不需要`super(name)`从专门的课程中调用。

3.  使用`this.name`作品。

使用注意事项`super`。

这在语言规范的[第 4.9.2 节](https://github.com/Microsoft/TypeScript/blob/master/doc/spec.md#4.9.2)中有更详细的介绍。

继承自的类`Animal`的行为与其他语言中的行为没有什么不同。您需要指定`super`关键字以避免混淆专用函数和基类函数。例如，如果您调用`move()`或`this.move()`您将处理专门的`Snake`或`Horse`函数，那么 using`super.move()`显式调用基类函数。

属性没有混淆，因为它们是实例的属性。`super.name`和-之间没有区别，`this.name`只是`this.name`。否则，您可以根据您是在专业类还是基类中创建具有不同名称的 Horse。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2019-07-13T12:22:02.527

您错误地使用了`super`and`this`关键字。以下是它们如何工作的示例：

```
class Animal {
    public name: string;
    constructor(name: string) { 
        this.name = name;
    }
    move(meters: number) {
        console.log(this.name + " moved " + meters + "m.");
    }
}

class Horse extends Animal {
    move() {
        console.log(super.name + " is Galloping...");
        console.log(this.name + " is Galloping...");
        super.move(45);
    }
}

var tom: Animal = new Horse("Tommy the Palomino");

Animal.prototype.name = 'horseee'; 

tom.move(34);
// Outputs:

// horseee is Galloping...
// Tommy the Palomino is Galloping...
// Tommy the Palomino moved 45m. 
```

**解释：**

1.  第一个日志输出`super.name`，this 指的是对象的**原型链**`tom`，而不是对象`tom`自身。因为我们在 上添加了 name 属性`Animal.prototype`，所以会输出 horseee。
2.  第二个日志输出`this.name`，`this`关键字是指 tom 对象本身。
3.  第三个日志是使用`move`Animal 基类的方法记录的。此方法是从 Horse 类 move 方法中调用的，语法为`super.move(45);`。在此上下文中使用`super`关键字将`move`在原型链上查找在 Animal 原型上找到的方法。

请记住，TS 仍然在底层使用原型，`class`and`extends`关键字只是原型继承的语法糖。

# android - 方法“getSupportFragmentManager()”不受支持

> ID：13121432
> 
> 赞同：18
> 
> 时间：2012-10-29T12:14:45.427
> 
> 标签：android, datepicker

所以我正在尝试为低于 11 的 android 版本启用 datepicker。为此我正在使用支持库 v4。我导入所有必要的东西：

```
import android.support.v4.app.*;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentTransaction;
import android.support.v4.app.DialogFragment; 
```

我创建了一个类：

```
import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.Date;

import android.app.DatePickerDialog;
import android.app.Dialog;
import android.os.Bundle;
import android.support.v4.app.DialogFragment;
import android.widget.EditText;
public class DatePicker extends DialogFragment implements DatePickerDialog.OnDateSetListener  {

public EditText textField;  

@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
final Calendar c = Calendar.getInstance();
int year = c.get(Calendar.YEAR);
int month = c.get(Calendar.MONTH);
int day = c.get(Calendar.DAY_OF_MONTH);
return new DatePickerDialog(getActivity(), this, year, month, day);
}

public EditText getTextField() {
return textField;
}

public void setTextField(EditText textField) {
this.textField = textField;
}

public void onDateSet(DatePicker view, int year, int month, int day) {
textField.setText(day+"."+(month+1)+"."+year);
}

@Override
public void onDateSet(android.widget.DatePicker arg0, int arg1, int arg2,int arg3) {
textField.setText(arg3+"."+(arg2+1)+"."+arg1);
}
} 
```

所以类编译好了。但问题是当我尝试使用它时。我有一个用于edittext的onclick方法，如下所示：

```
public void showDatePicker(View v) {
    DialogFragment selectDate = (DialogFragment) new DatePicker();
    EditText edit=(EditText)v;
    ((DatePicker) selectDate).setTextField(edit);
    selectDate.show(getSupportFragmentManager(), "datePicker");
} 
```

但是在最后一行我得到了错误：

```
The method getSupportFragmentManager() is undefined for the type MainActivity 
```

任何想法如何解决这个问题？顺便说一句，我没有进口任何东西

```
android.app.Fragment; 
```

所以这里不是这样：S

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-10-29T12:18:36.897

我的猜测是你`MainActivity`没有扩展`FragmentActivity`！在 SupportPackage 中，Activity 必须从 FragmentActivity 继承才能获得类似`getSupportedFragmentManager()`.

编辑：

由于您的 Activity 是从另一个类继承的，因此您可以尝试实现其中一个类的 Behavior 并将它们合并。即在这里你会找到 FragmentActivity 的代码： [FragmentActivity Source](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.1_r1/android/support/v4/app/FragmentActivity.java)

# php - 向此动态填充的选择字段添加 onChange 函数以将结果回显到文本字段

> ID：13121436
> 
> 赞同：2
> 
> 时间：2012-10-29T12:14:50.893
> 
> 标签：php

我检查了董事会并在谷歌上搜索了这段代码，但找不到任何东西。任何帮助将不胜感激。

我已经完成了一个教程，该教程根据汽车制造商查询数据库中的汽车型号。在代码中，汽车品牌被硬编码为选择，而汽车模型是动态的。这是代码的第一部分：

```
 <?php 
    require_once("Connections/xxx.php"); // database connection

    $make = $_POST['make'];

    if ($make){
    $query= sprintf("SELECT * FROM car_model where car_model_id='$make'");
    $result = @mysql_query($query); 
    $rowModel = mysql_fetch_array($result);
    }
    ?> 
```

这是选择硬代码：

```
<select name="make" onChange="document.forms[0].submit()">
<option value="">Select Make</option>
<option value="1" <?php if(!(strcmp(1, $make))){echo "selected";}?>>Alfa Romeo</option>
<option value="2" <?php if(!(strcmp(2, $make))){echo "selected";}?>>Audi</option>
<option value="3" <?php if(!(strcmp(3, $make))){echo "selected";}?>>BMW</option>
<option value="4" <?php if(!(strcmp(4, $make))){echo "selected";}?>>Citroen</option> 
```

这是动态填充的选择：

```
 <select name="model">
<option value="">Select Model</option>
<?php do {  ?>
<option value="<?php echo $rowModel['car_model_id']; ?>"><?php echo $rowModel['car_model']; ?></option>
<?php  }while ($rowModel = mysql_fetch_array($result));  ?> 
```

我想向这个动态填充的选择字段添加一个 onChange 函数，以将结果回显到文本字段，我尝试了很多组合，但无法弄清楚这一点。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T13:35:41.100

我建议使用 jquery 而不是将 javascript 内联。这样代码就可以重用了。

```
<select name="model">
    <option value="">Select Model</option>
    <?php while ($rowModel = mysql_fetch_assoc($result)){  ?>
      <option value="<?php echo $rowModel['car_model_id']; ?>">
       <?php echo $rowModel['car_model']; ?>
      </option>
    <?php  } ?>
</select>
<input type="text" id="model_text"> 
```

这是应该放入通用 js 文件的 javascript。

```
<script>
  $(document).ready(function(){
     $('select[name="model"]').change(function(){
       $('#model_text').val($(this).text());
     });
  });
</script> 
```

我还建议像 Arun Killu 所说的那样做一些没有 sql 注入的事情。将变量放入 sql 而不先清理它绝不是一个好主意。即使当前用户无权更改它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T12:20:09.737

在构造查询或使用准备好的查询之前，您的查询会暴露在 sql 注入中转义您的输入（建议使用 php pdo）

```
<select name="model">
    <option value="">Select Model</option>
    <?php while ($rowModel = mysql_fetch_assoc($result)){  ?>
    <option value="<?php echo $rowModel['car_model_id']; ?>" onChange="textfield(this.value)" ><?php echo $rowModel['car_model']; ?></option>
    <?php  } ?>
<script>
function textfield(val)
{
  document.getElementById('your_text_filed_id').value=val;
}

<script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T13:35:54.593

由于您不喜欢我的 jquery 版本，我仍然认为这是一个更好的答案，我敢肯定 javascript 方式不会在每个浏览器中都受支持并且非常有问题（这就是大多数人使用 jquery 的原因）

```
<select name="model" onchange="update_textbox()" id="model">
    <option value="">Select Model</option>
    <?php while ($rowModel = mysql_fetch_assoc($result)){  ?>
      <option value="<?php echo $rowModel['car_model_id']; ?>">
       <?php echo $rowModel['car_model']; ?>
      </option>
    <?php  } ?>
</select>
<input type="text" id="model_text">
<script>
 function update_textbox(){
  var selectbox = document.getElementById('model');
  var model = selectbox[selectbox.selectedIndex].text;
  document.getElementById('model_text').value=model ;
 }
</script> 
```

# java - 通用类父级

> ID：13121439
> 
> 赞同：15
> 
> 时间：2012-10-29T12:14:54.933
> 
> 标签：java, generics

根据[仿制药试验](http://docs.oracle.com/javase/tutorial/java/generics/index.html)，

[本节](http://docs.oracle.com/javase/tutorial/java/generics/inheritance.html)规定：

> 给定两个具体类型 A 和 B（例如 Number 和 Integer），无论 A 和 B 是否相关，都与`MyClass<A>`没有关系。和`MyClass<B>`的共同父对象是对象。`MyClass<A>``MyClass<B>`

然而，[在这里](http://docs.oracle.com/javase/tutorial/java/generics/subtyping.html)我们被告知，

> 虽然 Integer 是 Number 的子类型，`List<Integer>`但不是 Number 的子类型`List<Number>`，实际上这两种类型没有关系。`List<Number>`和的共同父项`List<Integer>`是`List<?>`。

为什么在第一个示例中不是`MyClass<A>`/的父级？有什么区别？`MyClass<B>``MyClass<?>`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T12:30:03.993

我认为答案是微不足道的。`MyClass<A>`虽然and`MyClass<B>` *的*正确父级确实是`MyClass<?>`，但本教程在那里做了一个小的简化，因为尚未引入通配符。

说的重点

> `MyClass<A>`和的共同父项`MyClass<B>`是`Object`。

`A`只是为了说明这两种类型都不是另一种的父级，无论和之间的关系如何`B`。

您的第一个报价正下方的以下评论证实了这一点：

> 有关在类型参数相关时如何在两个泛型类之间创建类似子类型的关系的信息，请参阅通配符和子类型。

以及[通配符和](http://docs.oracle.com/javase/tutorial/java/generics/subtyping.html)子类型一章的介绍：

> 如泛型、继承和子类型中所述，泛型类或接口不仅仅因为它们的类型之间存在关系而相关。但是，您可以使用通配符在泛型类或接口之间创建关系。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-29T12:29:14.100

在教程的第一个引用之后，它立即说：

> 有关在类型参数相关时如何在两个泛型类之间创建类似子类型的关系的信息，请参阅通配符和子类型。

这是您的第二个报价的链接。

所以，虽然我确实认为它具有误导性并且措辞不是很好，但我会将第一个读作

> MyClass 和 MyClass 的共同父级*将是*Object，如果不是因为我们能够执行以下链接中描述的通配符/子类型

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T20:04:55.560

谈论参数化类型的单个“父级”并不是很有用。重要的是一件事是否是另一件事的超类型。当然，`Object`是`MyClass<A>`and的常见超类型`MyClass<B>`，`MyClass<?>`. 如果 A 和 B 是 Integer 和 Number，那么`MyClass<? extends Number>`也是一个常见的超类型；也是`MyClass<? extends Serializable>`。

# c++ - OpenCV GPU HOG 检测

> ID：13121440
> 
> 赞同：2
> 
> 时间：2012-10-29T12:14:56.193
> 
> 标签：c++, opencv, cuda, gpu

我正在使用 Windows 7 64 位，Visual Studio 2010，opencv 2.4.2。

我正在尝试使用 GPU hog 检测器。

现在我可以使用我自己的 CPU hog 检测器（我训练过的版本）。

我的猪有细胞大小`Size(4,4)`。

但是，在 opencv/modules/gpu/src/cuda/hog.cu 中，它指出

```
 // Other values are not supported
  #define CELL_WIDTH 8
  #define CELL_HEIGHT 8 
```

或者，在 opencv/modules/gpu/src/hog.cpp 中，在

```
cv::gpu::HOGDescriptor::HOGDescriptor( ... ) { ... CV_Assert(cell_size == Size(8, 8)); ... } 
```

我认为这就是我的程序崩溃的原因。但是我不想使用单元格大小 8。如何将其更改为 4？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T06:02:13.593

你有几个选择...

*   打开[OpenCV HOG 代码](https://code.ros.org/trac/opencv/browser/trunk/opencv/modules/gpu/src/cuda/hog.cu?rev=4839)并绕过 8x8 约束。将语句从 8x8 更改`#define`为 4x4，并去掉 assert 语句。重新编译 OpenCV 代码，然后运行您的应用程序。看看会发生什么……也许它会起作用。

*   如果 OpenCV 代码中的快速破解不起作用，还有其他开源 GPU HOG 实现，例如：[fastHOG](http://www.robots.ox.ac.uk/ActiveVision/Publications/prisacariu_reid_tr2310_09/prisacariu_reid_tr2310_09.html)和[GroundHOG](http://www.mmp.rwth-aachen.de/projects/groundhog)

*   如果上述想法都不起作用，您可以在 CUDA 或 OpenCL 中编写自己的 GPU HOG 代码。手写的 HOG 实现可以相当简洁，特别是如果您针对特定情况对单元大小和其他维度进行硬编码。但是，如果您是新手，GPU 编程可能需要一些时间来学习。

另外，我应该确保——如果您使用 8x8 单元运行，OpenCV HOG 可以正常运行，对吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-12T19:15:40.353

您实际上不应该更改单元格大小。单元格大小为 8，因为这是“足够的像素来执行渐变”，但“不会太多以执行不必要的工作”。如果您的单元格大小为 4，那么对于梯度强度和精度来说，这可能还不够有用吗？与其将单元格大小减小到 4，不如将图像大小在两个方向上减小 2？

# r - 替换整个村名？

> ID：13121443
> 
> 赞同：1
> 
> 时间：2012-10-29T12:15:14.287
> 
> 标签：r

我尝试使用 gsub、sub 等替换我的大数据框架（all_health）中的村庄名称，但我不断得到一些未正确更改的村庄。例如，我想首先标准化数据中所有村庄（vlg）的拼写。例如：

```
all_health$vlg<-gsub("FALAJALQBA","FALAJALQABAIL",all_health$vlg)
all_health$vlg<-gsub("FALAJALQ","FALAJALQABAIL",all_health$vlg)
all_health$vlg<-gsub("FALAJALQBA","FALAJALQABAIL",all_health$vlg)
all_health$vlg<-gsub("FALAJALQA","FALAJALQABAIL",all_health$vlg)
all_health$vlg<-gsub("FALAJALQBAEIL","FALAJALQABAIL",all_health$vlg)
all_health$vlg<-gsub("FALAJALQBAIL","FALAJALQABAIL",all_health$vlg)
all_health$vlg<-gsub("FALAJALQUBAIL","FALAJALQABAIL",all_health$vlg) 
```

然后我想将生成的村庄名称更改为另一个名称：

```
 all_health$vlg<-gsub("FALAJALQABAIL","ALKHUWAYRIYAH",all_health$vlg) 
```

然而，当我重新检查村庄的名称时，我注意到新的不同（错过）村庄，例如 (ALKHUWAYRIYAHBAILUBAIL) ，看起来像是村庄的组合。

我有许多其他村庄的行为也一样。

我是否使用了正确的功能？有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T12:38:03.963

R 没有什么神奇的方法可以为你找出所有的拼写。你需要做的第一件事是...

```
unique(all_health$vlg) 
```

遍历生成的向量并将所有内容制成您认为村庄应该是的表格。并创建一个新列，也许是 cvlg。保留原始记录很重要，因为您可能会在修改名称时出错。

您可能可以使用正则表达式使其更简洁，但似乎有可能存在您不能并且无论如何都需要文字的地方。鉴于您示例的第一部分，正则表达式可能会使您的代码更加简洁。但是在这种情况下，我很想复制和粘贴很多行，使用文字更改并很好地注释它们，因为您稍后会回去并想知道您更改某个村庄名称的确切位置以及它是如何更改的被改变了。

一种可以保持良好记录的替代方法可能是将唯一向量导出到文件中，并在其中创建一个包含更正名称的新列。您可以从该文件中导入这两个向量，并使用新向量轻松更改 R 中的所有名称。你只需要首先保留那些错误的。

要写出名称，请使用...

```
write.table(unique(all_health$vlg)), 'villageNameCorrections.txt', row.names = FALSE, quote = FALSE) 
```

编辑文件并适当地标记列“旧”和“新”。现在您的 R 代码将是。

```
correctVlg <- read.table('villageNameCorrections.txt', header = TRUE)
all_health$cvlg <- all_health$vlg
all_health$cvlg[all_health$cvlg %in% correctVlg$old] <- 
    correctVlg$new[na.omit(match(ifelse (all_health$cvlg, correctVlg$old))] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T12:54:25.970

如果您只是将名称映射到其他名称，则不需要`sub`or `gsub`。我怀疑您遇到了问题，因为`gsub`替换了字符串中的任何实例，并且您只希望匹配整个字符串。

尝试执行以下两项之一：

```
#ensures matching of whole string by including 
#start-of-line and end-of-line characters
all_health$vlg<-gsub("^FALAJALQBA$","FALAJALQABAIL",all_health$vlg)
#and so on

#or, use %in%:
names.to.replace <- c("FALAJALQBA","FALAJALQ") #include all misspelled names
all_health$vlg[all_health$vlg %in% names.to.replace] <- "FALAJALQABAIL" 
```

# c# - 在列表框 Windows 窗体中使用 c# 输出调用 Web 服务

> ID：13121444
> 
> 赞同：1
> 
> 时间：2012-10-29T12:15:19.397
> 
> 标签：c#, web-services, listbox

我觉得不得不问这个问题是个白痴，但我正在努力将网络服务调用中的数字输出到我的列表框。它只是返回写在我的列表框中的“Task2.wsCall.Service1SoapClient”。正如我所期望的那样，Web 服务内部只有以下内容：

```
[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[System.ComponentModel.ToolboxItem(false)]
public class Service1 : System.Web.Services.WebService
{

    [WebMethod]
    public int getNumber(int n)
    {
        return n * n * 100;
    }
} 
```

所以，我可能做错了。感谢任何提供帮助的人，这是我的代码：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void btnPress_Click(object sender, EventArgs e)
    {
        try
        {
            for (int i = 1; i < 21; i++)
            {
             wsCall.Service1SoapClient CallWebService = new wsCall.Service1SoapClient();
             lstBox.Items.Add(CallWebService);

                //lstBox.Items.Add(i);

            }
        }
        catch (Exception)
        {
            MessageBox.Show("Exception caught.");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T12:19:41.490

看来您还没有调用该方法。试试这个：

```
for (int i = 1; i < 21; i++)
      {
        wsCall.Service1SoapClient CallWebService = new wsCall.Service1SoapClient();

        lstBox.Items.Add(CallWebService.getNumber(i));
      } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T12:44:14.577

改成这样的代码

```
 public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void btnPress_Click(object sender, EventArgs e)
        {
            try
            {
                for (int i = 1; i < 21; i++)
                {
                 wsCall.Service1SoapClient CallWebService = new wsCall.Service1SoapClient();
                 lstBox.Items.Add(CallWebService.getNumber(i).toString());

// Changed Code Like this

                    //lstBox.Items.Add(i);

                }
            }
            catch (Exception)
            {
                MessageBox.Show("Exception caught.");
            }
        }
    } 
```

# postgresql - 比较同一数据库中两个不同表之间的数据

> ID：13121447
> 
> 赞同：0
> 
> 时间：2012-10-29T12:15:32.403
> 
> 标签：postgresql

我有两个具有相同架构的表，并且两者的主键都是 noc，

每当在表 1 中进行插入时，必须在表 2 中检查其 noc，如果存在则必须比较完整行，如果有任何差异，则必须引发异常。如果 noc 在 TABLE2 中不存在，则必须遵循简单的插入

这是我的触发功能

```
 CREATE OR REPLACE FUNCTION ac_val()
           RETURNS trigger AS
           $BODY$

            BEGIN

           IF NEW.acop IS NULL THEN

                           INSERT INTO exception_detail( noc,exception) 
    VALUES (new.noc,'number cannot be empty');

    END IF;

    RETURN NEW;
           END;
   $BODY$
       LANGUAGE plpgsql VOLATILE 
```

这是我的触发器

```
 CREATE TRIGGER acut_val
           AFTER INSERT OR UPDATE
             ON acut
          FOR EACH ROW
         EXECUTE PROCEDURE ac_val(); 
```

这对于一个表来说是完全可以的，但是现在根据每个插入的要求，它必须检查 noc 是否存在于其他表 TABLE2 中，如果存在则必须进行比较，否则插入

我想我不能对每个插入执行检查，因为要插入 acuit 的数据是从 csv 复制的，这需要从 csv 复制，如果我复制它会给出错误，你必须是超级用户，但如果我从控制台复制就可以了。那么我可以在 acuit 中复制数据后执行类似的操作，逐行检查

```
 SELECT q1.* FROM acut q1
             INNER JOIN TABLE2 q2 ON (q1.noc = q2.noc); 
```

它将给出存在于 TABLE2 中的 acut 记录

接着

```
 foreach row of above output{

      if (q1.name != q2.name)
      Do something ;

    if (q2.address < q1.address)
     Do something ;

     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T13:08:21.577

我能想到的最简单的解决方案是在`table1`.

不要使用触发器检查唯一性，因为您看不到其他用户未提交的数据。

而是使用触发器`INSERT`将数据输入`table2`- 它应该对您要检查的所有列具有唯一约束。

如果将数据插入到 table2 中已经存在的 table1 中，则会违反 table2 上的唯一约束，从而引发可以在前端捕获的异常。

这种方法的一大优点是它也可以在多用户情况下正常工作，在这种情况下，您的事务在 table2 中看不到未提交的数据，但 DBMS 仍会阻止插入继续（事务将挂起，直到另一个`commit`事务或`rollback`s)。

# javascript - 根据日期显示/隐藏 div

> ID：13121448
> 
> 赞同：5
> 
> 时间：2012-10-29T12:15:37.290
> 
> 标签：javascript, jquery, date

我正在尝试根据日期显示隐藏 div，并尝试使用以下代码：

```
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script>

window.setInterval(function(){

  var current = new Date();
  var expiry  = new Date("October 29, 2012 12:00:00")
  var expiry2 = new Date("October 30, 2012 12:00:00")

  if(current.getTime()>expiry.getTime()){
    $('#one').hide();
    $('#two').show();
  }

  else(current.getTime()>expiry2.getTime()){
       $('#two').hide();
       $('#three').show();
   }

}, 3000);

$('#one').show(); 
</script>

<div id="one" style="display:none">
<p>content for div #one</p>
</div>

<div id="two" style="display:none">
<p>content for div #two</p>
</div>

<div id="three" style="display:none">
<p>content for div three</p>
</div> 
```

chrome中的控制台正在抛出：

```
Unexpected token { 
```

因此，if else 语句似乎存在语法错误，但对我来说似乎没问题：（

任何人都可以发现我缺少的东西吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T12:20:25.060

如果需要，您可以检查工作中的[jsfiddle](http://jsfiddle.net/zEG4g/)

问题是你需要一个`else if`at`else (current.getTime() > expiry2.getTime()) {`

**更新 1**

用 关闭每个 div `</div>`。[小提琴](http://jsfiddle.net/zEG4g/1/)也更新了

**更新 2**

你也有我认为是一个逻辑错误。如果你想`(current.getTime() > expiry2.getTime())`激活条件，它不能作为`else`第一个条件`(current.getTime()>expiry.getTime())`。将 更改`else if`为`if`，然后它应该可以工作，尽管为了进一步优化代码，您可以将第二个`if`包含在第一个中`if`（考虑到`expiry`它总是小于`expiry2`）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-29T12:16:51.833

你忘了`if`之后`else`：

```
else if (current.getTime() > expiry2.getTime()) { 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-01-19T23:53:17.600

我已经对脚本进行了一些操作，以便您可以添加类，并且该项目将在您决定的时间消失。如果内容已过期，它将显示或隐藏。如果需要，您可以添加更多变量和 else if 语句。

我仍在学习 JS 和 jQuery，所以请记住这一点，但一切似乎都按我想要的方式工作，并且我在控制台中没有错误。

[https://jsfiddle.net/medel/qhgrtwzm/2/](https://jsfiddle.net/medel/qhgrtwzm/2/)

**HTML**

```
<div class="houdini" style="display:none">
  <p>content for div #one</p>
</div> 
```

**启用 jQuery 的 JS 1.8.3**

```
window.setInterval(function() {

  var current = new Date();
  var expiry = new Date("January 19, 2016 17:39:00")

  if (current.getTime() > expiry.getTime()) {
    $('.houdini').hide();

  } else if (current.getTime() < expiry.getTime()) {
    $('.houdini').show();
  }

}, 0); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-16T06:11:09.860

您忘记了`if`else 语句的内部。您的`if-else`块应如下所示：

```
if (current.getTime() > expiry.getTime()) {
    $('#one').hide();
    $('#two').show();
} else if (current.getTime() > expiry2.getTime()) {
    $('#two').hide();
    $('#three').show();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-03T18:26:15.890

雅各布乔治的回答非常好！发布这个以防它帮助任何人。我必须修改日期/时间格式，以便与 Internet Explorer 兼容 UTC/GMT。我还对逻辑进行了重新排序，使其像瀑布一样触发，仅根据到期时间显示一个 div，如果当前时间早于该`expiry`值，则不显示 div。

**Javascript：**

```
window.setInterval(function() {

  var current = new Date();
  var expiry = new Date('2015-12-03T02:00:00.000-08:00')
  var expiry2 = new Date('2015-12-04T02:00:00.000-08:00')
  var expiry3 = new Date('2015-12-05T02:00:00.000-08:00')

  if (current.getTime() > expiry3.getTime()) {
    $('#one').hide();
    $('#two').hide();
    $('#three').show();
  } else if (current.getTime() > expiry2.getTime()) {
    $('#one').hide();
    $('#two').show();
    $('#three').hide();
  } else if (current.getTime() > expiry.getTime()) {
    $('#one').show();
    $('#two').hide();
    $('#three').hide();
  }

}, 3000); 
```

# javascript - 谷歌地图 mapType 坐 标

> ID：13121455
> 
> 赞同：0
> 
> 时间：2012-10-29T12:15:59.917
> 
> 标签：javascript, google-maps, maps, tile

我这里有个小问题。

## 我想做的事。

在我的服务器上，我有一个带有标记的表格，其中包含 lat、lng、[tile](http://msdn.microsoft.com/en-us/library/bb259689.aspx)字段。表格中有很多标记，所以我通过用户可见的图块来请求它们。让它发挥应有的作用是我的最终目标。

## 问题

我想通过创建自己的[mapType](https://developers.google.com/maps/documentation/javascript/maptypes?hl=#CustomMapTypes)和定义方法来解决这个问题，该方法`getTile()`将负责使用`x/y/z`符号从服务器请求适当的切片，其中 x,y 是切片的坐标，z 是缩放级别。您可以在[此处](https://developers.google.com/maps/documentation/javascript/maptypes?hl=en#TileCoordinates)找到更多相关信息。有我的代码（我在这里使用[jquery-ui-map 插件](http://code.google.com/p/jquery-ui-map/)）：

```
function ServerFetchMapType() {

      this.tileSize = new google.maps.Size(256,256);
      this.maxZoom = 15;
      this.name = "Server Tile #s";
      this.alt  = "Server Data Tile Map Type";

      this.getTile = function(coord, zoom, ownerDocument){

        //Data for request
        var x = coord.x;
        var y = coord.y;
        var z = zoom;

        //Here i will make an ajax request for markers in this tile

        //Visualization
        var div = ownerDocument.createElement('DIV');
        div.innerHTML = 'X:' + coord.x + ' Y:' +  coord.y + ' Z:' +  zoom;
        div.style.width = this.tileSize.width + 'px';
        div.style.height = this.tileSize.height + 'px';
        div.style.fontSize = '10';
        div.style.borderStyle = 'solid';
        div.style.borderWidth = '1px';
        div.style.borderColor = '#AAAAAA';
        return div;

      };

    }

    var test = new ServerFetchMapType();

    $('#map_canvas').gmap();
    $('#map_canvas').gmap('get', 'map').overlayMapTypes.insertAt(0, test); 
```

一切正常，但后来我发现了一个缺点，我将说明它：

![在此处输入图像描述](../Images/ca6842ef5d53279c11d4b8cb4b2385e7.png)

如您所见，图片中心只有 4 个图块具有[正确](https://developers.google.com/maps/documentation/javascript/maptypes?hl=en#TileCoordinates) `x/y/z`的符号，因此所有图块都是该图块的后代。但我将无法使用其他图块从服务器获取数据。

## 问题

那么我能做些什么来改变地图只是重复的其他图块的坐标与主图块具有相同的坐标呢？或者您可以提供其他方法来解决此问题。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T15:36:07.843

一位非常好的人帮助我以这种方式解决了这个问题：

```
 function ServerFetchMapType() {

      this.tileSize = new google.maps.Size(256,256);
      this.maxZoom = 15;
      this.name = "Server Tile #s";
      this.alt  = "Server Data Tile Map Type";

      this.getTile = function(coord, zoom, ownerDocument){

        var dim = Math.pow(2, zoom);

        //Data for request
        var x = Math.abs( coord.x ) % dim;
        var y = Math.abs( coord.y ) % dim;
        var z = zoom;

        //Visualization D
        var div = ownerDocument.createElement('DIV');        
        div.innerHTML = 'X:' + Math.abs( coord.x ) % dim  + ' Y:' +  Math.abs( coord.y ) % dim + ' Z:' +  zoom;

        div.style.width = this.tileSize.width + 'px';
        div.style.height = this.tileSize.height + 'px';
        div.style.fontSize = '10';
        div.style.borderStyle = 'solid';
        div.style.borderWidth = '1px';
        div.style.borderColor = '#AAAAA9';
        return div;

      };

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T15:28:11.363

屏幕截图中的所有图块都有正确的数字，而不仅仅是中间的 4。

您的标记表中不应该有“平铺”字段，只有纬度和经度。在您的服务器端脚本中，您将计算相关图块的角并选择范围内的标记，例如：

```
Select * from markersTable 
where lat >= tile_SW_Lat and lat <= tile_NE_Lat 
and lon >= tile_SW_lon and lon <= tile_NE_lon 
```

在所有情况下，您都知道 tile(x,y) 值是 0 或正整数。API 会为您处理包装。

# php - 使用 XSLT 将 XML 转换为 SQL

> ID：13121456
> 
> 赞同：3
> 
> 时间：2012-10-29T12:16:02.673
> 
> 标签：php, xml, xslt

由于我无法控制的原因，我将获得一个 XML 文件和一个 XSLT 文件，该文件可以将 XML 文件转换为 SQL 代码或错误。

现在让我们假设我们可以相信提供 XML 文件的人不会在 XML 中包含危险的结构......

我什至不知道我是否应该使用 SimpleXML、XMLWriter、DOMDocument 或其他东西。另外，我应该使用 XSLTProcessor 还是其他东西？

在 PHP 中实现这一点的最佳方法是什么？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T15:59:02.810

如果我理解了您的问题，并且提供了 xmldata 和样式表，您可以像这样简单地转换它：

```
$data = new DOMDocument();
$data->loadXML('<yourxmldata />';

$stylesheet = new DOMDocument();
$stylesheet->loadXML('<yourxslstylesheet/>');

$processor = new XSLTProcessor(); 
$processor->importStylesheet($stylesheet);
var_dump($processor->transformToXML($data)); 
```

# javascript - Javascript中的正则表达式？

> ID：13121464
> 
> 赞同：-7
> 
> 时间：2012-10-29T12:16:34.347
> 
> 标签：javascript, html, regex

如何编写可以找到这个的正则表达式

```
<a href="#" onclick="javascript:setSectionName('');showFunctionMenu2( ......>xxxxxx</a> 
```

并将其替换为

```
<a href="#" style="display:none;" onclick="javascript:setSectionName('');showFunctionMenu2( ......>xxxxxx</a> 
```

在使用 Javascript 的 html 文档中？

我想出了这个来查找，但不知道如何在 html 中用新的替换它

```
<a\shref\="\#"\sonclick\="javascript\:setSectionName\(''\)\;showFunctionMenu2\(.+><\/a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T12:31:34.603

使用 jQuery 过滤器

```
$('a').filter(function(index) { 
  return (this.onclick.match(/setSectionName\(''\);showFunctionMenu2\(/) !== null);
}); 
```

参考：[http ://api.jquery.com/filter/](http://api.jquery.com/filter/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T12:20:25.450

试试这个

```
/<a href="#" onclick="[^"]*"/>.*?</a>/ 
```

# c++ - 使用 boost assign 初始化具有固定大小的向量的向量

> ID：13121469
> 
> 赞同：45
> 
> 时间：2012-10-29T12:17:01.570
> 
> 标签：c++, boost, vector, repeat, assign

具有固定大小的向量的向量，

```
vector<vector<int> > v(10); 
```

我想对其进行初始化，使其在所有元素中都有一个具有初始化值（例如 1）的一维向量。

我使用了 Boost Assign 如下

```
v = repeat(10,list_of(list_of(1))); 
```

我有一个编译错误

```
error: no matching function for call to ‘repeat(boost::assign_detail::generic_list<int>)’ 
```

你能告诉我怎么做吗？提前致谢

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-10-29T12:20:37.957

这不使用`boost::assign`但可以满足您的需要：

```
vector<vector<int>> v(10, vector<int>(10,1)); 
```

这将创建一个包含 10 个向量的向量`int`，每个向量包含 10 个`ints`。

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2012-10-29T12:19:25.500

您不需要使用`boost`所需的行为。下面创建了一个`vector`s `10` `vector<int>`，每个都`vector<int>` 包含`10` `int`一个值为 的 s `1`：

```
std::vector<std::vector<int>> v(10, std::vector<int>(10, 1)); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-03-30T21:14:18.250

我将尝试向那些刚接触 C++ 的人解释它。向量向量`mat`的优点是您可以使用运算符直接访问其元素，几乎没有成本`[]`。

```
int n(5), m(8);
vector<vector<int> > mat(n, vector<int>(m));

mat[0][0] =4; //direct assignment OR

for (int i=0;i<n;++i)
    for(int j=0;j<m;++j){
        mat[i][j] = rand() % 10;
    } 
```

当然，这不是唯一的方法。如果你不添加或删除元素，也可以使用本地容器`mat[]`，它们只不过是指针。这是我最喜欢的方式，使用 C++：

```
int n(5), m(8);
int *matrix[n];
for(int i=0;i<n;++i){
    matrix[i] = new int[m]; //allocating m elements of memory 
    for(int j=0;j<m;++j) matrix[i][j]= rand()%10;
} 
```

这样，您不必使用`#include <vector>`. 希望它更清楚！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-30T05:12:28.070

```
#include <vector>
#include <iostream>
using namespace std;

int main(){
    int n; cin >> n;
    vector<vector<int>> v(n);
    //populate
    for(int i=0; i<n; i++){
        for(int j=0; j<n; j++){
            int number; cin >> number;
            v[i].push_back(number);
        }
    }
    // display
    for(int i=0; i<n; i++){
        for(int j=0; j<n; j++){
            cout << v[i][j] << " ";
        }
        cout << endl;
    }
} 
```

输入：

```
4
11 12 13 14
21 22 23 24
31 32 33 34
41 42 43 44 
```

输出：

```
11 12 13 14
21 22 23 24
31 32 33 34
41 42 43 44 
```

# android - 带字符串的数据库查询，Android

> ID：13121474
> 
> 赞同：1
> 
> 时间：2012-10-29T12:17:16.423
> 
> 标签：android, android-sqlite

我有一个数据库表，用户在其中保存了一些字符串。我想比较两个包含日期的字符串和一个字符串之间的差异。更具体地说：两个日期遵循这种格式，例如“2012-10-24 00:00”，数字就像这样“2”。有没有办法在查询中获取两个日期之间的差异？我也尝试将日期格式化为长，但由于整个数据库的大循环，我被迫关闭。先感谢您

```
mCursor1.moveToFirst();
                mCursor1= mDbHelper.fetchTasks();

                     for(int u=0; u<mCursor2.getCount(); u++){

                   mCursor1.moveToPosition(u);
                  long id=mCursor1.getLong(0);

                Date Date1 = ConvertToDate(this.mCursor1.getString(5));
                 Date DateNow = ConvertToDate( current );
                 Calendar a= DateToCalender (this.mCursor1.getString(5));
                 Calendar b= DateToCalender(current);
                 a.add(Calendar.MONTH, 1);
                 b.add(Calendar.MONTH, 1);

                           long diff= daysBetween(b,a);
                            if(dateNotify=="1"&& diff%1==0){
                                 mDbHelper.updateNotification(id,"true");

                                    }
                                 else if(dateNotify=="2"&& diff%2==0){
                                      mDbHelper.updateNotification(id,"true");

                                      }
                                 else if(dateNotify=="3"&& diff%3==0){
                                         mDbHelper.updateNotification(id,"true");

                                      }
                                 else      if(dateNotify=="7"&& diff%7==0){
                                         mDbHelper.updateNotification(id,"true");

                                      }

              mCursor1.moveToNext();
                 }

          } 
```

/*从日期转换为日历*/ public Calendar DateToCalender(String str_date){

```
 SimpleDateFormat  formatter ; 
              Date date ; 
              Calendar cal;
              formatter = new SimpleDateFormat("yyyy-MM-dd HH:mm");
              try {
                 date = (Date)formatter.parse(str_date);
                 cal=Calendar.getInstance();
                 cal.setTime(date);
                 } catch (ParseException e) {
                 e.printStackTrace();
                return null;
            } 
          return cal;
         }

        /*Days difference between two dates*/
        public static long daysBetween(Calendar startDate, Calendar endDate) {
              Calendar date = (Calendar) startDate.clone();
              long daysBetween = 0;
              while (date.before(endDate)) {
              date.add(Calendar.DAY_OF_MONTH, 1);
              daysBetween++;
               }
              return daysBetween;
         }

        /*Convert string to Date*/
       public Date ConvertToDate(String dateString){

                SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm");

                Date convertedDate;
                try {

                    convertedDate = dateFormat.parse(dateString);

                } catch (ParseException e) {
                    e.printStackTrace();
                    return null;
                }

                return convertedDate;

         } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T12:20:03.510

试试这个查询。

```
return db.query(TABLE_NAME, new String[]{"temp_sp_date","temp_sp_amount"},
                        "(temp_sp_user_id = ?) and (temp_sp_date >= ? and temp_sp_date <= ? )" , new String[] {String.valueOf(userId),startDate,endDate}, " strftime(" + "\"%Y" + "-" + "%m" + "-" + "%d\""  + ",temp_sp_date) ",null , null); 
```

根据您的要求更改字段和值。

# actionscript-3 - AS3 使用基类对象创建扩展类的实例

> ID：13121476
> 
> 赞同：0
> 
> 时间：2012-10-29T12:17:42.200
> 
> 标签：actionscript-3, actionscript

我有一个扩展的自定义类`MovieClip`。这个想法是它允许存储额外的变量和有关`MovieClip`.

```
public class MapObject extends MovieClip
{
    private var cellX:int;
    private var cellY:int;

    public function MapObject()
    {
    }
 } 
```

我有几个`MovieClips`在运行时加载的（.swf 文件）。问题是，我怎样才能让这些 MovieClip 对象真正成为`MapObject`对象？

我试过了 ：

```
var mapObject:MapObject = myMovieClip as MapObject; 
```

但它给了`null`

PS。我知道您可以将变量动态添加到 MovieClip，但我并不想这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T12:31:41.740

不更改代码就无法更改类层次结构。您必须进入每个类定义才能将父类更改为`MapObject`而不是`MovieClip`.

有一个简单而干净的解决方案，包括使用装饰器：

```
public class MapObject {

    private var mc:MovieClip;
    private var cellX:int;
    private var cellY:int;

    public class MapObject(mc:MovieClip) {
        this.mc = mc;
    }

    public function get movieClip():MovieClip {
        return mc;
    }
}
...

var wrapper:MapObject = new MapObject(new MyMovieClip());
...

container.addChild(wrapper.movieClip); 
```

它是一个包装器，它采用另一个类的实例（在您的情况下为 MovieClip）来添加功能。它非常强大，因为您不必在每次更改时都去更改每个子类`MapObject`。这个原则称为[组合优于继承](http://en.wikipedia.org/wiki/Composition_over_inheritance)。

在您的情况下， 的所有方法和属性`MovieClip`都是公共的，因此您只需编写`mc.play()`而不是`this.play()`.

请参阅[有关装饰器设计模式](http://www.as3dp.com/2009/04/actionscript-30-easy-and-practical-decorator-design-pattern/)的详细信息。

# jquery - jqGrid 是空的，我可以在 firebug 中看到，来自 jqgrid 的 ajax 请求正确返回了 json 数据

> ID：13121477
> 
> 赞同：0
> 
> 时间：2012-10-29T12:17:45.097
> 
> 标签：jquery, jqgrid

> **可能重复：**
> [无法在 json 格式中从 php 向 jqGrid 添加数据](https://stackoverflow.com/questions/13010403/cant-add-data-to-jqgrid-from-php-within-json-format)

我正在尝试使用从 asp.net 中的控制器操作返回的数据加载 jgqgrid。我正在使用带有剃刀视图引擎的 MVC 3。我可以在提琴手和萤火虫中看到，从 jqGrid 发出的 ajax 请求正在返回数据，但数据没有在 jqgrid 中显示。我已经查看了所有相关的 psots 和答案。我确保在 jqgrid 脚本文件之前指定了语言环境文件。我已经尝试了 GET 和 POST 并在控制器中相应地更改了 action 属性。

```
<script type="text/javascript">
$(document).ready(function () {
    $("#list").jqGrid({
        datatype: 'json',
        url: '/Execution/GetAllExecutions/',
        jsonReader: { repeatitems: true },
        mtype: 'POST',
        rowList: [5, 10, 20, 30],
        viewrecords: true,
        colNames: ['OrderID'],
        colModel: [
            { name: 'OrderID', index: 'OrderID', align: 'right',key:true, width: 250}
        ],
        pager: '#pager',
        sortname: 'OrderID',
        sortorder: 'desc',
        height: "100%",
        width: "100%",                                   
        caption: 'Orders'
    });
});
</script>

<table id="list"><tr><td></td></tr></table>

<div id="pager"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T12:55:46.370

`jsonReader: { repeatitems: true }`从服务器返回的 JSON 响应的格式与您使用的不对应。你应该使用类似下面的东西

```
jsonReader: {
    repeatitems: false,
    root: function (obj) { return obj; },
    page: function () { return 1; },
    total: function () { return 1; },
    records: function (obj) { return obj.length; }
} 
```

此外，建议您添加`loadonce: true`选项，因为您似乎没有在服务器端实现分页。

# javascript - 使用 Javascript 计算两个日期之间的持续时间

> ID：13121480
> 
> 赞同：4
> 
> 时间：2012-10-29T12:17:59.987
> 
> 标签：javascript

我基本上想要两个日期，即：

```
 var startDate = new Date("01/01/2001 01:00:00");
 var currentDate = new Date(); 
```

然后我想通过减去并以以下形式显示持续时间`startDate`：`currentDate`a **years b month(s) c day(s) d hours(s) e second(s)**。

到目前为止，我的问题是，如果你走捷径，即：

```
var duration = currentDate.getTime() - startDate.getTime();
var seconds = duration / 1000;
var minutes = duration / 1000 / 60; 
```

ETC...

然后你会得到一个错误的持续时间，因为例如，月份并不总是 30 天，年份并不总是 365 天（闰年）等等。更不用说当我这样做时它以某种方式关闭了大约一年。

我浏览了网络并浏览了 StackOverflow 上的各种帖子，但我找不到一个 JavaScript 方法的工作示例，该方法可以准确地从另一个日期减去一个日期并允许您获取详细信息（年、月、日、小时、分钟, 第二) 从结果日期开始。

有一个网站已经可以完全按照我的意愿做到这一点：[http ://www.timeanddate.com](http://www.timeanddate.com/date/timeduration.html?d1=&m1=&y1=&d2=&m2=&y2=)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T12:33:09.620

如果您想要一个“正确”的结果，那么这个问题没有明显的简单解决方案，因为月份有不同的天数。

但与此同时，当涉及到较大的日期范围时，人脑会变得更加草率。所以“1年11个月”几乎和“差不多两年”一样好。因此，在您开始使用 100% 正确的解决方案之前，请先问问自己，当您伪造它并使用 30 天的月份时，结果是否足够好。

如果这真的不是一个选择：摆脱小时和分钟；他们只会令人困惑。创建两个都从午夜开始的日期（即 HH:MM:SS 是 00:00:00）。

现在的问题是他们之间有多少天，多少个月和多少年？那要看。6 月 1 日和 8 月 31 日之间的时间几乎是两个月，但两个日期之间没有月份。是`61 days, 0 months`。或者`1 month, 30 days`？哪个是对的”？

数学上正确的解决方案将为您提供多达 61 天差异的结果，用户会觉得这很烦人。

人类的解决方案在数学上并不正确，因此您最终将不得不编写启发式方法来伪造人类对时间的感觉。

这就是为什么如果某些日期相差超过 30 天并继续使用“半年”、“一年”（介于 330 到 380 天之间）和“超过一年”，那么许多网站会说“超过一个月”的原因“等等。他们利用草率的人脑来发挥自己的优势，而不是试图提出一个“精确”的结果（这a）也没有真正的帮助，b）没有人真正同意“精确”应该是什么意思）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T01:57:52.090

几天来，我一直在努力解决这个确切的问题。终于做了一些我认为有用的东西。现在看起来像废话，草率的评论和愚蠢的 var 名称，明天我会进行清理。但我想无论如何我都会发布它以防万一你需要它。

编辑：我清理了代码并做了一个要点。在这里查看：[https ://gist.github.com/4705863](https://gist.github.com/4705863)

EDIT2：~~该死的，发现了一个错误。我在上面。~~修复了BUG，现在可以正常使用了！

```
 // Time difference function
function timeDiff(start, end) {
    //today, now!
    //Get the diff
    var diff = end - start;
    //Create numbers for dividing to get hour, minute and second diff
    var units = [
    1000 * 60 * 60 *24,
    1000 * 60 * 60,
    1000 * 60,
    1000
    ];

    var rv = []; // h, m, s array
    //loop through d, h, m, s. we are not gonna use days, its just there to subtract it from the time
    for (var i = 0; i < units.length; ++i) {
        rv.push(Math.floor(diff / units[i]));
        diff = diff % units[i];
    }

    //Get the year of this year
    var thisFullYear = end.getFullYear();
    //Check how many days there where in last month
    var daysInLastMonth = new Date(thisFullYear, end.getMonth(), 0).getDate();
    //Get this month
    var thisMonth = end.getMonth(); 
    //Subtract to get differense between years
    thisFullYear = thisFullYear - start.getFullYear();
    //Subtract to get differense between months
    thisMonth = thisMonth - start.getMonth();
    //If month is less than 0 it means that we are some moths before the start date in the year.
    // So we subtract one year, and add the negative number (month) to 12\. (12 + -1 = 11)
    subAddDays = daysInLastMonth - start.getDate();
    thisDay = end.getDate();
    thisMonth = thisMonth - 1;
    if(thisMonth < 0){
        thisFullYear = thisFullYear - 1;
        thisMonth = 12 + thisMonth;
        //Get ends day of the month
    }
    //Subtract the start date from the number of days in the last month, add add the result to todays day of the month
    subAddDays = daysInLastMonth - start.getDate();
    subAddDays = thisDay + subAddDays;

    if(subAddDays >= daysInLastMonth){
        subAddDays = subAddDays - daysInLastMonth;
        thisMonth++;
        if (thisMonth > 11){
            thisFullYear++;
            thisMonth = 0;
        }
    }
    return {
        years: thisFullYear,
        months: thisMonth,
        days: subAddDays,
        hours: rv[1],
        minutes: rv[2],
        seconds: rv[3]
    };
}
//The start date/From date. Here i add one hour to offset it. 
//var start = new Date(1814, 3, 20, 1);
//The end date. today, now!
//var end = new Date();
//Get the difference
//var d = timeDiff(start, end);
// Log that bitch
//console.log('years: '+ d.years + '. months: '+ d.months + '. days: ' + d.days + '. hours:' +d.hours+ '. minutes:' + d.minutes + '. seconds: ' + d.seconds); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-22T18:17:40.860

留给自己未来的答案

只需使用时刻及其持续时间插件

*   [https://github.com/moment/moment](https://github.com/moment/moment)
*   [https://github.com/jsmreese/moment-duration-format](https://github.com/jsmreese/moment-duration-format)

并使用

```
moment.duration(moment('then').diff(moment('now'))).format('d [Days] hh:mm:ss') 
```

有用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T12:23:06.840

[http://www.w3schools.com/jsref/jsref_obj_date.asp](http://www.w3schools.com/jsref/jsref_obj_date.asp)

```
myDate.UTC() // get the number of milliseconds since the Unix epoch 
```

所以

```
delta_ms = laterDate.UTC() - earlierDate.UTC();
delta_days = Math.round(delta_ms / (1000 * 60 * 60 * 24)); 
```

如果你想要月份和年份，你需要指定你是否想要日历差异（例如，5 月 1 日到 6 月 1 日是 1 个月，但 2 月 28 日到 3 月 30 日是……？），或者反对像 365 天这样的“标准”年份和 30 天的月份等。

这并不简单，即使看起来应该如此。例如，在金融领域，至少有 5 种方法可以计算两个日期之间的间隔，使用或不使用标准月份，以及是否使用标准日期。在某个日期之后生成日期很容易（2 月 1 日之后的 1 个日历月是 3 月 1 日），但向后不是，因为映射不是 1:1。

另外请注意，这是一个绝对值，不需要针对闰年、闰秒、夏令时、时区和所有其他时间格式的蜉蝣进行调整。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-29T12:41:30.947

你也可以考虑这些情况。考虑 2 个日期`2nd Mar 2008`和`5th Jun 2013`.

```
 Mar
2008  ________###########################
2009  ###################################
2010  ###################################
2011  ###################################
2012  ####################################  (leap)
2013  ###############--------------------
                  Jun 
```

您可以减去其间的年份（即 2009 年、2010 年、2011 年、2012 年）。现在 2012 年是闰年，但这并不重要，因为它将以*年*而不是*月*来计算。

`Years = 4`

现在，你只剩下这个了

```
 2 
Mar 08  ____################################
Apr 08 ####################################
May 08 #####################################
Jun 08 ####################################
Jul 08 #####################################
Aug 08 #####################################
Sep 08 ####################################
Oct 08 #####################################
Nov 08 ####################################
Dec 08 #####################################
Jan 12 #####################################
Feb 12 ###################################
Mar 12 #####################################
Apr 12 ####################################
May 12 #####################################
Jun 12 #########----------------------------
                5 
```

只需计算完整的月份。它们包含多少天并不重要。他们是按月而*不是按天*计算*的*。

 *`Months = 14`

```
 2 
Mar 08  ____################################
Jun 12  #########----------------------------
                5 
```

现在计算 Mar2008 和 Jun2012 的剩余天数（不包括结束日期）。这里的计数是 29（三月）+ 4（六月）= 33。

`Days = 33`

但是 33 天似乎很奇怪，因为它可以转换为 1 个月 + 某些天。如果发生这种情况，就会出现选择哪个月份的问题 - 3 月（31 天）、6 月（30 天）或只是减少 30 天来增加一个月。我认为在考虑巨大差异的同时，这无关紧要。如果我们考虑三月，那么差异将是

`4 Years 15 Months 2 Days`或者干脆`5 Years 3 Months 2 Days`

同样的方法可以持续一段时间。

**已编辑**

```
Let `date1` be greater than `date2`
Let max(month) gives the total days in the month

years = date1.year - date2.year - 1;
months = date1.month - date2.month - 1;
days = (max(date2.month) - date1.day) + (date2.day - 1);
if(days >= 30)       //Here you can take totals days in date1 or date2
{
    month++;
    days-=30;
}
while(month >= 12)      //Here month can reach a value of 24 because it can be incremented above too
{
    years++;
    month-=12;
}
print("Difference is " + years + " years " + month + " months " + days + " days"); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-29T12:28:17.190

```
var years = currentDate.getYear() - startDate.getYear();
var months = currentDate.getMonth() - startDate.getMonth();
... 
```*

# php - 成对分组数据

> ID：13121482
> 
> 赞同：0
> 
> 时间：2012-10-29T12:18:12.247
> 
> 标签：php

> **编辑：**我觉得我应该澄清一下，据我所知，我没有解析问题。我已经在使用 DOM 和 xpath，感觉已经足够了。我遇到的问题是在循环中使用已经解析的结果的逻辑谜题。

我有一长串 HTML 试图用 PHP 解析。到目前为止，我有 preg_match 来隔离我想要的，但我想要一些帮助来完善输出。HTML 的格式很差，它是一个不在任何标签之间的长字符串，但基本上包含标题，然后是一个或多个段落等。

所以我的`preg_match`正则表达式隔离了标题和段落，并且我使用 for 循环来获取小于或等于 13 个结果，因为它们将被输出到的 div 具有有限的尺寸。

标题的数量是一个未知变量，每个标题的段落数量也是如此。我正在尝试做的是确保输出始终以段落结尾，无论之前有多少匹配项（有时连续有 2 个标题。这是一个数据输入问题，我也在努力解决这个问题，但对此的控制要少得多）。我意识到部分 for 循环的“小于或等于”是有问题的。我想解决方案是隔离标题-段落对然后计算它们，我只是没有在这样做方面取得任何进展。

某种明亮的火花会指引我正确的方向吗？:)

我必须使用的字符串示例如下：

```
<h2 class="border_top">Description:</h2>
<b>Surroundings</b><br /><br />Dunoon is the marine gateway to the Loch Lomond and the Trossachs National Park, and has a number of
local amenities including a cinema, two supermarkets, several choice
restaurants and bars, primary and secondary schools, library, Post
Office, community hospital, doctor surgeries and veterinary clinic,
leisure centre with swimming pool and gym.<br />Innellan has its own
primary school, shop and Post Office. There is a busy village hall and
a popular restaurant nearby. There are a number of clubs in the
Innellan area, including golf, bowling, tennis, cricket and
sailing.<br /><br /><b>Amenities</b><br /><br />A regular local bus
service operates in the area and there are bus and coach services to
popular towns across the West of Scotland. Frequent passenger ferry
services operate from Dunoon Pier to Gourock with regular bus and
train connections to Glasgow Central railway station. The train stops
at Paisley Gilmore Street en route, which is convenient for access to
Glasgow Airport. Western Ferries located at Hunter&#39;s Quay, offers
a regular vehicle service to McInroys Point in Gourock for access to
the national road network.<br /><br /><b>Contact</b><br /><br />To
view this property, please contact <b>Someone Somewhere</b> on <b>01234
467890</b> or <b>09876 543210</b><br /><br /><b>Porch/Vestibule 1.7m x
1.8m</b><br /><br />Modern PVCu wood effect front door set between glazed side panels. Cupboard with electricity meter and room for coats
and boots. Solid wooden flooring and shelving. Glazed door to lower
hall.<br /><br /><b>Lower Hall 2.7m x 3.65m at widest point</b><br
/><br />Provides access to double garage and WC, and to the winding
staircase to lower landing area. Solid wooden flooring.<br /><br
/><b>Downstairs Cloakroom 2m x 0.9m</b><br /><br />Under stairs WC and
wash basin with adequate headroom. Cork effect flooring. Extractor
fan. Fitted shelving.<br /><br /><br /><b>Lower Landing 1.5m x
3.8m</b><br /><br />Carpeted. Large cupboard with double doors, fitted with shelving and hanging rail.<br />Door access to the master bedroom
and stairs up to the next landing.<br /><br /><b>Master Bedroom 4.9m x
5.5m</b><br /><br />This large carpeted area featuring 2 large  length windows, offering fantastic views of the Firth of Clyde and hills on
the opposite shore. There is also a side window making the room
bright. Access from here through door to the walk-in dressing room
area.<br /><br /><b>Dressing Room 3.85m x 2.2m</b><br /><br />Carpeted
with shelving and hanging rails and with plenty of room for additional
storage. Access through door to the en-suite bathroom. Extractor
fan.<br /><br /><b>En-suite 2m x 3.1m</b><br /><br />Walk-in shower
measuring 1100mm x 800mm, chrome towel rail, bidet, WC and wash basin
inset into fitted cupboards. Privacy glazed window and extractor
fan.<br /><br /><b>Main Landing 2.4m x 3.4m</b><br /><br />Solid wood
flooring. High ceiling with Velux roof light. Access to kitchen,
utility room and bedroom/study.<br /><br /><b>Bedroom/Study 4.1m x
4.2m</b><br /><br />This room which is currently used as a study, would be a generous double bedroom. Large fitted wardrobe. Loft
access. Twin windows with amazing views over the river. Solid wooden
flooring.<br /><br /><b>Kitchen 4.6m x 3.5m</b><br /><br
/>Double-doors from the main landing, leads into this bright and
spacious modern fitted kitchen with lots of storage and countertop,
some providing serving access to the dining area. Double window, tiled
splash-backs and hob extractor hood. Solid wooden flooring. Access to
dining area and to Sun Room/Family Room/Office.<br /><br /><b>Dining
Area 4.6m x 4.3m</b><br /><br />Single window in addition to glazed
French doors that open to a small guarded balcony with wonderful sea
views. Solid wooden flooring continues in from the kitchen to this
bright dining area.<br /><br /><b>Sun Room/Family Room/Office 3.1m x
4.3m</b><br /><br />Currently used as an office, this room has a window to the side and two to the back of the house, together with
patio doors which provide access to the decking. This bright and sunny
room has solid wooden flooring.<br /><br /><b>Utility Room 1.65m x
3.05m</b><br /><br />Worktop with stainless steel sink and tiled splash-back. Fitted shelving. Room for washing machine. Modern PVCu
back door with access to decking and garden. Window to garden.<br
/><br /><b>Upper Landing 2.7m x 2.3m</b><br /><br />Carpeted area with
fitted cupboard and access to lounge, bedroom and bathroom.<br /><br
/><b>Bathroom</b><br /><br />Fitted bath with mixer taps. WC and wash
basin inset into fitted cupboard. Shower unit with electric shower.
Cork effect flooring. Privacy glazed double windows and extractor
fan.<br /><br /><b>Bedroom 2.75m x 3.9m</b><br /><br />Peaceful
generous double bedroom with double window looking out onto the back
garden. Large, fitted, double-door wardrobe with fitted shelving and
hanging rail. Carpeted.<br /><br /><b>Lounge 5.5m x 4.2m</b><br /><br
/>Double-door entrance into this bright carpeted area. The lounge
features a total of 6 windows, 2 single side facing at each end, 2
facing the river as well as 2 x  length windows offering fabulous
views of the Firth of Clyde and of the hills on the other side.
Elegant fire surround with living flame gas fire.<br /><br /><b>Double
Garage 6m x 6.5m</b><br /><br />Plenty of room in this double garage,
containing double up and over door and modern gas water heating
system.<br /><br /><b>Garden</b><br /><br />Terraced front garden with
mature planting and additional car parking. Side gate and pathway from
the front of the property leads along the side of the house and up
wooden stairs to timber decking. Decking extends along the rear and
steps up to a small grassed area with flower bed and planters. Pathway
at the other side of the house leads to a planted area at rear of the
house.<br /> <br />                         
<a name="map"></a> 
```

如您所见，它位于 2 个标签之间，我用它们在 HTML 文档中定位它。我使用 DOM `loadHTMLfile`，然后`xpath`查询 HTML，但我使用`preg_match`正则表达式从结果中获取标题和段落。上面的标题将包括环境、设施、任何 0.00mx 0.00m 在这个特定示例中，标题是粗体标签，但情况并非总是如此。

# android - 如何在 Android 中使用 open gl es 1.1 进行多重纹理处理

> ID：13121485
> 
> 赞同：2
> 
> 时间：2012-10-29T12:18:28.863
> 
> 标签：android, opengl-es, opengl-es-1.1, multitexturing

**我做了什么**

目前在我的 Android 应用程序中，我正在绘制具有两种不同纹理的矩形
。给出了一个纹理（第二个）的淡入（更改 alpha）动画。

**我想要的是。**

我想使用多纹理因此在一个矩形中绘制两个纹理。但是我找不到任何使用 opengl es 1.1 与 android 进行多纹理的帮助的东西。

请任何人帮我做多纹理

这是我的代码

```
 firstGanColorVert.position(0);
    gl.glColorPointer(4, GL10.GL_FLOAT, VERTEX_SIZE, firstGanColorVert);        
    gl.glBindTexture(GL10.GL_TEXTURE_2D, firstGaneshaTexture);          

    gl.glMatrixMode(GL10.GL_MODELVIEW);
    gl.glLoadIdentity();            
    gl.glTranslatef(this.x,this.y ,0);  

    textCordPointer(gl);        
    gl.glDrawElements(GL10.GL_TRIANGLES, 6, GL10.GL_UNSIGNED_SHORT, indices);   

    fadeAnimation();

    secondGanColorVert.position(0);
    gl.glColorPointer(4, GL10.GL_FLOAT, VERTEX_SIZE, secondGanColorVert);
    gl.glBindTexture(GL10.GL_TEXTURE_2D, secondGaneshaTexture);         

    gl.glMatrixMode(GL10.GL_MODELVIEW);
    gl.glLoadIdentity();            
    gl.glTranslatef(this.x,this.y ,0);          
    textCordPointer(gl);        
    gl.glDrawElements(GL10.GL_TRIANGLES, 6, GL10.GL_UNSIGNED_SHORT, indices); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T10:46:11.537

我不确定这会有多大帮助，但[Imagination Technologies 的 SDK](http://www.imgtec.com/powervr/insider/sdkdownloads/index.asp)包含大量 OpenGL ES 示例程序的源代码。如果您在“SDK3.0/Examples/Intermediate”子目录中下载（需要免费注册），则有一个多纹理示例。（我只选择了“Windows 仿真”选项，但也列出了 android）。可能值得一看。

# android - AutoCompleteTextView getSelectedItemPosition

> ID：13121493
> 
> 赞同：1
> 
> 时间：2012-10-29T12:19:00.740
> 
> 标签：android, adapter, autocompletetextview

我需要确定用户选择了适配器中的哪个项目（出现下拉建议时）。

如果用户选择项目，我希望能够获得：

*   **如果选定项目的位置**-**但我需要相对于适配器中的所有项目的位置**。
*   所选项目的某种**唯一标识符**
*   如果用户没有选择我的任何建议并键入他自己的文本，我只会收到 null 或 -1 或其他内容。

这可能与 AutoCompleteTextView 有关吗？

例子：

我的 AutoCompleteTextView 有标准的 ArrayAdapter，其中包含以下项目：

```
{"one","one2","two","two2", "three", "three2"} 
```

用户输入

> thr

他被建议2个选项：

> 三，三2

然后他选择“three2”。当 OnItemSelected 被触发时，“位置”参数设置为 1，因为只有 2 个建议。

但是，我想要的是获得 5 的位置，因为我的适配器共有 6 个项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T12:44:22.867

这是我为类似问题所做的事情。

我有使用适配器来设置自动完成文本视图。

这是我的**PlacesAutoCompleteAdapter.java**文件

```
package com.inukshk.adapter;

import java.util.ArrayList;

import android.content.Context;
import android.widget.ArrayAdapter;
import android.widget.Filter;
import android.widget.Filterable;

import com.inukshk.CreateInukshk.CreateInukshk;

public class PlacesAutoCompleteAdapter extends ArrayAdapter<String> implements
        Filterable {
    private ArrayList<String> resultList;

    public PlacesAutoCompleteAdapter(Context context, int textViewResourceId) {
        super(context, textViewResourceId);
    }

    @Override
    public int getCount() {
        return resultList.size();
    }

    @Override
    public String getItem(int index) {
        return resultList.get(index);
    }

    @Override
    public Filter getFilter() {
        Filter filter = new Filter() {
            @Override
            protected FilterResults performFiltering(CharSequence constraint) {
                FilterResults filterResults = new FilterResults();
                if (constraint != null) {
                    // Retrieve the autocomplete results.

                    resultList = CreateInukshk.autocomplete(constraint
                            .toString());

                    // Assign the data to the FilterResults
                    filterResults.values = resultList;
                    filterResults.count = resultList.size();
                }
                return filterResults;
            }

            @Override
            protected void publishResults(CharSequence constraint,
                    FilterResults results) {
                if (results != null && results.count > 0) {
                    notifyDataSetChanged();
                } else {
                    notifyDataSetInvalidated();
                }
            }
        };
        return filter;
    }
} 
```

这里我使用**了 resultList = CreateInukshk.autocomplete(constraint .toString());** 这是我的方法，它将返回我想要显示的数组列表。

最后这是我在主java文件中的代码，我已经初始化了我们的AutoCompleteTextview。

内部 OnCreate();

```
autoCompView = (AutoCompleteTextView) findViewById(R.id.editloc);
        autoCompView.setAdapter(new PlacesAutoCompleteAdapter(this,
                R.layout.list_item));
        // autoCompView.setOnItemClickListener(CreateInukshk.this);

        autoCompView.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                    long arg3) {
                // TODO Auto-generated method stub
                            // here you can get value of arg2 as your position while selecting value.
                // Place = autoCompView.getText().toString();
                new AsyncGetAutoPlace().execute(autoCompView.getText()
                        .toString().trim());
            }
        }); 
```

而不是 **new AsyncGetAutoPlace().execute(autoCompView.getText() .toString().trim());** 您可以添加任何您想做的代码。

希望它会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T12:34:32.090

您是否尝试过设置[OnItemSelectedListener](http://developer.android.com/reference/android/widget/AdapterView.OnItemSelectedListener.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-17T05:08:38.613

```
String str_numbers = your_autocompletetext_view.gettext();
int exact_postion;

// here your_List is a list which you have assigned for your_autocompletetext_view
for(int i0; i<your_List.size();i++)
{

    if(str_numbers.equals(your_List.get(i).toString))
     {
       exact_postion=i; // this is your exact position
        break;
  }     
} 
```

# python - Thunderpush 监控

> ID：13121496
> 
> 赞同：1
> 
> 时间：2012-10-29T12:19:06.943
> 
> 标签：python, notifications, tornado, real-time-updates, sockjs

[Thunderpush](https://github.com/thunderpush/thunderpush)是一个基于 Tornado 和 SockJS 的推送服务。它提供了一个受 Beaconpush (beaconpush.com) 启发的 HTTP API 和客户端。

我想知道如何监控使用统计数据和性能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T21:08:28.223

在“示例”文件夹中，您有一些信息，例如连接的用户： [https ://github.com/thunderpush/thunderpush/blob/master/examples/apiconsole.html](https://github.com/thunderpush/thunderpush/blob/master/examples/apiconsole.html)

# bash - 根据条件合并/连接

> ID：13121503
> 
> 赞同：0
> 
> 时间：2012-10-29T12:19:32.487
> 
> 标签：bash

我有两个文件正在尝试根据第 1 列和第 2 列加入/合并。

**输入1**

```
22  42960000    rs149201999 A   AC  100 PASS    LDAF=0.0649;RSQ=0.8652;AN=2184;ERATE=0.0046;VT=SNP;AA=.;AVGPOST=0.9799;THETA=0.0149;SNPSOURCE=LOWCOV;AC=134;AF=0.06;ASN_AF=0.04;AMR_AF=0.05;AFR_AF=0.10;EUR_AF=0.06 
```

**输入2**

```
22  42960000    .   A   AC  .   .    ;AA=1;AFE=0.989691;ASNE=1;EUN=0.992509;AFW=1;MED=0.991071;LAT=1 
```

**输出将是**

```
22  42960000    .   A   AC  .   .    ;AA=1;AFE=0.989691;ASNE=1;EUN=0.992509;AFW=1;MED=0.991071;LAT=1;LDAF=0.0649;RSQ=0.8652;AN=2184;ERATE=0.0046;VT=SNP;AA=.;AVGPOST=0.9799;THETA=0.0149;SNPSOURCE=LOWCOV;AC=134;AF=0.06;ASN_AF=0.04;AMR_AF=0.05;AFR_AF=0.10;EUR_AF=0.06 
```

请注意，每列由制表符分隔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T12:39:09.780

这应该有效：

```
s=%%%%%%
join -j1 -o1.1,1.2,1.3,1.4,1.5,1.6,1.7,2.7 <(sed "s/\t/$s/" input2) \
                                           <(sed "s/\t/$s/" input1) \
| sed "s/$s/\t/;
       s/\(=[^ ]*\) \([^ ]*=\)/\1;\2/;
       s/ \+/\t/g" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T13:15:55.490

这是一种使用方法`GNU awk`：

```
awk 'FNR==NR { array[$1,$2]=$8; next } ($1,$2) in array { print $0 ";" array[$1,$2] }' input1 input2 
```

结果：

```
22  42960000    .   A   AC  .   .    ;AA=1;AFE=0.989691;ASNE=1;EUN=0.992509;AFW=1;MED=0.991071;LAT=1;LDAF=0.0649;RSQ=0.8652;AN=2184;ERATE=0.0046;VT=SNP;AA=.;AVGPOST=0.9799;THETA=0.0149;SNPSOURCE=LOWCOV;AC=134;AF=0.06;ASN_AF=0.04;AMR_AF=0.05;AFR_AF=0.10;EUR_AF=0.06 
```

# android - 从 url 加载图像时出现 Nullpointer 异常

> ID：13121506
> 
> 赞同：0
> 
> 时间：2012-10-29T12:19:47.057
> 
> 标签：android, url, image-loading

我正在开发一个带有休息网络服务的应用程序。通过从服务器获取 json 响应，解析它并使用适配器将其填充到自定义列表视图中。在该 json 响应中有用于下载图像以显示在列表项中的 url。一切都已完成并且工作正常，除了从 url 加载图像存在 Nullpointer 异常。我也调试过，logcat显示如下

```
 java.lang.NullPointerException
    at android.widget.AbsListView.obtainView(AbsListView.java:2269)
    at android.widget.ListView.measureHeightOfChildren(ListView.java:1244)
    at android.widget.ListView.onMeasure(ListView.java:1156)
    at android.view.View.measure(View.java:15172)
    at android.widget.RelativeLayout.measureChild(RelativeLayout.java:602)
    at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:415)
    at android.view.View.measure(View.java:15172)
    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4814)
    at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
    at android.view.View.measure(View.java:15172)
    at android.widget.LinearLayout.measureVertical(LinearLayout.java:833)
    at android.widget.LinearLayout.onMeasure(LinearLayout.java:574)
    at android.view.View.measure(View.java:15172)
    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4814)
    at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
    at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2
    at android.view.View.measure(View.java:15172)
    at android.view.ViewRootImpl.performMeasure(ViewRootImpl.java:1848)
    at android.view.ViewRootImpl.measureHierarchy(ViewRootImpl.java:1100)
    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1273)
    at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:998)
    at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4212)
    at android.view.Choreographer$CallbackRecord.run(Choreographer.java:725)
    at android.view.Choreographer.doCallbacks(Choreographer.java:555)
    at android.view.Choreographer.doFrame(Choreographer.java:525)
    at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:711)
    at android.os.Handler.handleCallback(Handler.java:615)
    at android.os.Handler.dispatchMessage(Handler.java:92)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:4745)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
    at dalvik.system.NativeStart.main(Native Method)
    Force finishing activity com.shopping/.views.JsonListView 
```

有人可以帮我找出出现此异常的原因。

编辑：

```
 int loader = R.drawable.fb_icon;
 // ImageLoader class instance
 ImageLoader imgLoader = new ImageLoader(_Context);

 imgLoader.DisplayImage(imageUrl, loader, holder.productImage);
     public void DisplayImage(String url, int loader, ImageView imageView)
     {  
        stub_id = loader;
        imageViews.put(imageView, url);
        Bitmap bitmap=memoryCache.get(url);
        if(bitmap!=null)
           imageView.setImageBitmap(bitmap);
        else
        {
            queuePhoto(url, imageView);
            imageView.setImageResource(loader);
        }
      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T12:36:28.160

将以下行写入适配器的 getview() 方法。

```
imageLoader.DisplayImage(url[position], imageview1); 
```

并查看下面的延迟加载链接以获取更多信息，如果您对此有任何疑问，请告诉我。

[延迟加载列表视图](https://github.com/thest1/LazyList)

# gridview - GridView实时添加行

> ID：13121508
> 
> 赞同：1
> 
> 时间：2012-10-29T12:19:52.347
> 
> 标签：gridview

这个肯定很傻，但我找不到解决我的问题的方法。我想要做的是让用户按需将行添加到加载为空的网格视图中。但是每次我按下“添加”按钮时，我都会松开前一行。

我确信这非常简单，包括使用不合适的控件。

这是我的代码隐藏：

```
DataTable dt;
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack) 
        {
            Binding();
        }

    }
    protected void Binding() 
    {
        if (dt == null) 
        {
            dt = new DataTable();
            dt.Columns.Add("txt1");
            dt.Columns.Add("txt2");
            DataRow dr = dt.NewRow();
            dr[0] = "Text1";
            dr[1] = "Text2";
            dt.Rows.Add(dr);
            dt.AcceptChanges();
        }
        grd.DataSource = dt;
        grd.DataBind();

    }

    protected void Button1_Click(object sender, EventArgs e)
    {
         DataTable tt = grd.DataSource as DataTable;
        //Both dt and grd.DataSource are null at this point
         if (tt != null) 
        {
            DataRow dr = tt.NewRow();
            dr[0] = "Text1";
            dr[1] = "Text2";
            tt.Rows.Add(dr);
            tt.AcceptChanges();
            grd.DataSource = tt;
            grd.DataBind();
        }
    } 
```

非常感谢您的帮助！

# jqplot - jqplot 标签未显示

> ID：13121509
> 
> 赞同：0
> 
> 时间：2012-10-29T12:19:53.267
> 
> 标签：jqplot

我正在使用 jqplot。当值接近打勾时，标签会被隐藏。这里的标签值为 9.25 美元，接近 10 美元，因此不显示标签。如何解决这个问题？ ![在此处输入图像描述](../Images/96a04ebed22090b2a711d74ee4d26f28.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T06:34:38.073

我解决了这个问题。

```
var plot = //draw plot here
plot.axes.yaxis.max += (plot.axes.yaxis.tickInterval / 2);
plot.replot(); 
```

# javascript - document.getElementById('articleTitle').value 不起作用

> ID：13121510
> 
> 赞同：2
> 
> 时间：2012-10-29T12:19:53.267
> 
> 标签：javascript, html, getelementbyid

我在我的 Web 应用程序中创建这些代码

```
<script type="text/javascript">
  document.getElementById('articleTitle').value =  "Ehsan" ;
</script>` 
```

但结果我的输入没有价值

我的输入是：

```
<input id="articleTitle" name="articleTitle" class="input-xxlarge" 
type="text" placeholder="title"> 
```

我的 javascript 代码在 html 代码之上

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T12:20:58.083

在尝试检索元素之前，您需要确保元素存在。例如，如果您位于 HTML 源代码中的`script`上方`input`，则脚本运行时该元素将不存在。

您可以将您的`script`标签移动到 下方`input`，这将起作用，或者使用某种“DOM 就绪”事件。[YUI 团队](http://developer.yahoo.com/performance/rules.html)建议将标签放在元素`script`的末尾，其他[人](http://groups.google.com/group/closure-library-discuss/browse_thread/thread/1beecbb5d6afcb41)建议确保脚本位于它所使用的元素之下。`body`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T13:44:50.377

您可以将函数附加到事件，例如：

```
<script type="text/javascript">
function test(){
  document.getElementById('articleTitle1').value ="Ehsan";}
</script>
<input id="articleTitle" name="articleTitle" class="input-xxlarge" 
type="text" placeholder="title" onclick="test();"> 
```

我希望能有所帮助！

# android - html页面级别的Phonegap更改方向

> ID：13121511
> 
> 赞同：0
> 
> 时间：2012-10-29T12:19:56.060
> 
> 标签：android, cordova, user-interface, screen-orientation

我有一个 phonegap 应用程序，我想在纵向级别显示一些页面，在横向级别显示一些页面。可能吗。顺便说一句，我禁用了方向更改并在 Android 清单中将其保持为纵向。注意：如果我也可以在页面级别禁用方向更改会很酷。因为我只想旋转一页而所有其他页面都是静态的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-31T06:22:14.940

您将不得不为此编写一些本机编码。

Phonegap 提供的 OrientationHelper 类包含一个事件 page_OrientationChanged

您可以在该事件中检查该页面。

例如

```
void page_OrientationChange(object sender, CancelEventArgs e)
{
  if(CordovaBrowser.Source.ToString().Contains("pagename"))
   {
      int i = 0;

            switch (e.Orientation)
            {
                case PageOrientation.Portrait: // intentional fall through
                case PageOrientation.PortraitUp:
                    i = 0;
                    break;
                case PageOrientation.PortraitDown:
                    i = 180;
                    break;
                case PageOrientation.Landscape: // intentional fall through
                case PageOrientation.LandscapeLeft:
                    i = -90;
                    break;
                case PageOrientation.LandscapeRight:
                    i = 90;
                    break;
            }
   }
} 
```

这应该工作

# teamcity - 在 SVN 的 VCS 触发器规则中使用模板参数

> ID：13121512
> 
> 赞同：0
> 
> 时间：2012-10-29T12:19:59.347
> 
> 标签：teamcity, teamcity-7.1

在我的项目中，我有 4 个不同的网站共享大部分代码，唯一的例外是网站本身和每个网站的类库。

源代码分为 4 个文件夹，每个文件夹包含大量较小的项目。这些文件夹代表 DDD 层（基础设施、域、应用程序、UI）。此外，我们还有第五个文件夹，其中包含同样由目标层拆分的测试。

由于网站具有非常相似的构建配置，我使用了一个 commong 构建配置模板，专门定制了一些参数。

其中一个自定义是 VCS 触发器规则，可以这样总结： - 在 Infrastructure、Domain、Application 和 Tests 文件夹中的提交上触发每个网站的构建 - 在提交时为每个网站触发构建测试中的 Inf、Domain、App 文件夹 - 在提交到网站文件夹及其类库时触发网站构建。

这是我写的规则

```
-:.
+:Infrastructure
+:Tests\Infrastructure
+:Domain
+:Tests\Domain
+:Application
+:Tests\Application
+:%WebProjectPath%
+:%WebProjectLibPath% 
```

但显然没有评估参数。有什么方法可以实现所需的行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T08:48:43.123

VCS 触发器支持这些参数。

我遇到的问题是这些触发器区分大小写。因此，如果在文件夹“Ui\PublicWeb”中发出提交，则不会触发指向“UI\PublicWeb”的过滤器。

此外，如果参数为空，则生成的触发规则将类似于“+:”，这将允许每次提交触发构建。在这种情况下，最好提及一个不存在的文件夹，而不是让系统触发不需要的构建。

# java - 将 html 字符串分成两部分：标签之前和之后

> ID：13121513
> 
> 赞同：0
> 
> 时间：2012-10-29T12:20:00.677
> 
> 标签：java

我有一些可以有标签的 html 字符串，如下所示：

```
<p> blablabla <img> an image</img> again blablabla</p> 
```

我想删除图像标签，**并在字符串数组中获取之前和之后的部分。**

**编辑：** 调用后

```
String[] splitted = htmlStr.split("regex"); 
```

结果将是：

```
splitted[0] = "<p> blablabla ";
splitted[1] = "again blablabla</p>" 
```

我想说一个正则表达式是必需的，请注意 img 标签可能因字符串而异：例如，它可以具有一个或多个属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T12:25:20.140

您应该使用`HTML Parser`for 解析`HTMLs`，因为您的标签可能会有所不同，无法完全由`Regex`.

但是，对于这种情况，您只想删除`<img>`标签，无论它具有什么属性，您都可以使用以下正则表达式：-

```
String str = "<p> blablabla <img> an image</img> again <img href = sadf> " + 
             "asdf asdf </img>blablabla</p>";

str = str.replaceAll("<img\\s*[^>]*?>[^<]*?</img>", "");
System.out.println(str); 
```

**输出**： -

```
<p> blablabla  again blablabla</p> 
```

**您想查看以下链接：-**

*   [为什么不应该用 Regexp 解析 HTML](http://www.codinghorror.com/blog/2009/11/parsing-html-the-cthulhu-way.html)
*   [正则表达式的真正力量](http://nikic.github.com/2012/06/15/The-true-power-of-regular-expressions.html)- 一定要经历它。

您可以使用 HTML 解析器，例如：-

*   [汤](http://jsoup.org/)
*   [HTML 清理器](http://htmlcleaner.sourceforge.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T12:25:42.703

试试下面的代码：

```
String str = "<p> blablabla <img> an image</img> again blablabla</p>";
int start = str.indexOf("<img");
int end = str.indexOf("</img>");
String imgTagValue = str.substring(0,start) + str.substring(end, str.length()); 
```

但是，如果在一行`<img>`中使用了多个标签，则应该对其进行适当的解析。

参考[这里](http://htmlparser.sourceforge.net/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T12:26:40.920

如果要删除所有 html-tags，可以使用以下代码：

```
string = string.replaceAll("\\<.*?\\>", ""); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T12:22:55.163

使用 StringTokenizer、String.split() 或 HTML 解析器来处理具有许多 IMG 标记的复杂 HTML。

# android - 使用 Android 连接 FTP 服务器

> ID：13121515
> 
> 赞同：1
> 
> 时间：2012-10-29T12:20:03.093
> 
> 标签：android, ftp, connect

我正在Android中练习FTP的方法，但我无法正确掌握。它总是在以下命令中失败：

FtpClient mFTPClient = new ();

我使用'import org.apache.commons.net.ftp.*;' 一开始，它包含在 Properties/Java Build Path/Add External Jars, ...

但我不断收到此错误消息：

```
10-29 12:06:01.245: E/dalvikvm(825): Could not find class 'org.apache.commons.net.ftp.FTPClient', referenced from method com.example.pruebaftp233_3.MetodosFTP.ftpConnect
10-29 12:06:01.271: W/dalvikvm(825): VFY: unable to resolve new-instance 494 (Lorg/apache/commons/net/ftp/FTPClient;) in Lcom/example/pruebaftp233_3/MetodosFTP;
10-29 12:06:01.271: D/dalvikvm(825): VFY: replacing opcode 0x22 at 0x0000
10-29 12:06:01.275: D/dalvikvm(825): VFY: dead code 0x0002-0006 in Lcom/example/pruebaftp233_3/MetodosFTP;.ftpConnect (Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;I)Z
10-29 12:06:01.435: D/AndroidRuntime(825): Shutting down VM
10-29 12:06:01.435: W/dalvikvm(825): threadid=1: thread exiting with uncaught exception (group=0x40015560)
10-29 12:06:01.455: E/AndroidRuntime(825): FATAL EXCEPTION: main
10-29 12:06:01.455: E/AndroidRuntime(825): java.lang.NoClassDefFoundError: org.apache.commons.net.ftp.FTPClient
10-29 12:06:01.455: E/AndroidRuntime(825):  at com.example.pruebaftp233_3.MetodosFTP.ftpConnect(MetodosFTP.java:21)
10-29 12:06:01.455: E/AndroidRuntime(825):  at com.example.pruebaftp233_3.MainActivity.onCreate(MainActivity.java:21)
10-29 12:06:01.455: E/AndroidRuntime(825):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
10-29 12:06:01.455: E/AndroidRuntime(825):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
10-29 12:06:01.455: E/AndroidRuntime(825):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
10-29 12:06:01.455: E/AndroidRuntime(825):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
10-29 12:06:01.455: E/AndroidRuntime(825):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
10-29 12:06:01.455: E/AndroidRuntime(825):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-29 12:06:01.455: E/AndroidRuntime(825):  at android.os.Looper.loop(Looper.java:123)
10-29 12:06:01.455: E/AndroidRuntime(825):  at android.app.ActivityThread.main(ActivityThread.java:3683)
10-29 12:06:01.455: E/AndroidRuntime(825):  at java.lang.reflect.Method.invokeNative(Native Method)
10-29 12:06:01.455: E/AndroidRuntime(825):  at java.lang.reflect.Method.invoke(Method.java:507)
10-29 12:06:01.455: E/AndroidRuntime(825):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
10-29 12:06:01.455: E/AndroidRuntime(825):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
10-29 12:06:01.455: E/AndroidRuntime(825):  at dalvik.system.NativeStart.main(Native Method) 
```

任何人都可以帮助我吗？谢谢！！

# objective-c - 将视图添加到视图层次结构是什么意思？这是否意味着将视图添加到fromView的超级视图？

> ID：13121528
> 
> 赞同：1
> 
> 时间：2012-10-29T12:20:39.337
> 
> 标签：objective-c, uiview, xcode4.5

> transitionFromViewController:toViewController:duration:options:animations:completion:
> 
> 视图控制器的两个子视图控制器之间的转换。- (void)transitionFromViewController:(UIViewController *)fromViewController toViewController:(UIViewController *)toViewController 持续时间:(NSTimeInterval)持续时间选项:(UIViewAnimationOptions)选项动画:(void (^)(void))动画完成:(void (^)( BOOL 完成)) 完成参数
> 
> ...
> 
> 讨论
> 
> 此方法将第二个视图控制器的视图添加到**视图层次结构**中，然后执行动画块中定义的动画。动画完成后，它会从视图层次结构中移除第一个视图控制器的视图。
> 
> 此方法仅供自定义容器视图控制器的实现调用。如果你重写这个方法，你必须在你的实现中调用 super。

我是否正确，它只是意味着**`[fromViewController.view.superview addsubview:toViewController.view]`**在动画开始的某个地方被调用？

另外，fromViewController 和 toViewController 都需要是 self 的子节点吗？

我只是想要确认和一些解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T12:31:01.760

> 我是否正确，它只是意味着 [fromViewController.view.superview addsubview:toViewController.view] 在动画开始的某个地方被调用？

你在这点上是对的。如果你愿意的话，文本所说的是一种观点取代了另一种观点。因此，后者在视图层次结构中取代了另一个（作为超级视图的子视图），您的解释是唯一可能的解释。

> 另外，fromViewController 和 toViewController 都需要是 self 的子节点吗？

不，两个控制器之间不需要有任何关系。

# python - Python Makepy 与 Office 2013 (office 15)

> ID：13121529
> 
> 赞同：4
> 
> 时间：2012-10-29T12:20:57.510
> 
> 标签：python, excel, win32com, office-2013

我在 Office 2010 中使用 python 和 excel 并且没有问题。我使用 python 的 makepy 模块来绑定到 txcel com 对象。

但是，在另一台计算机上，我安装了 office 2013，当我启动 makepy 时，没有列出任何 excel 选项（与 makepy 列出“Microsoft Excel 14.0 Object Library”的 office 2010 不同）。

我在注册表中搜索了“Microsoft Excel 15.0 对象库”，它就在那里。我尝试使用 :`makepy -d 'Microsoft Excel 15.0 Object Library'` 但这没有用。

帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-11-03T17:20:34.003

问题是 win32com 模块只在注册表项下查找`win32`注册表`Typelib`项，但 Office 15.0 有一些`win64`键。要解决此问题，请找到如下`Lib/site-packages/win32com/client/selecttlb.py`所示的部分：

```
# Only care about "{lcid}\win32" key - jump straight there.
try:
    key4 = win32api.RegOpenKey(key3, "%s\\win32" % (lcid,))
except win32api.error:
    continue 
```

并像这样修改它：

```
# Only care about "{lcid}\win32" key - jump straight there.
try:
    key4 = win32api.RegOpenKey(key3, "%s\\win32" % (lcid,))
except win32api.error:
    try:
        key4 = win32api.RegOpenKey(key3, "%s\\win64" % (lcid,))
    except win32api.error:
        continue 
```

老问题，但我希望这对某人有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-12T19:50:32.633

在这里，我从 pythonwin 控制台复制我的 win32com 和 office 2015 交互中的粘贴：

```
PythonWin 3.3.1 (v3.3.1:d9893d13c628, Apr  6 2013, 20:30:21) [MSC v.1600 64 bit (AMD64)]  on win32.
Portions Copyright 1994-2008 Mark Hammond - see 'Help/About PythonWin' for further copyright information.
>>> 
>>> 
>>> from win32com.client import gencache
>>> gencache.EnsureModule('{00020813-0000-0000-C000-000000000046}', 0, 1, 8)
Loading reg typelib {00020813-0000-0000-C000-000000000046} 1 8 0
Rebuilding:  1 8
<module 'win32com.gen_py.00020813-0000-0000-C000-000000000046x0x1x8' from 'C:\\Python33\\lib\\site-packages\\win32com\\gen_py\\00020813-0000-0000-C000-000000000046x0x1x8.py'>
>>> import win32com.client as client
>>> client.Dispatch("Excel.Application")
<win32com.gen_py.Microsoft Excel 15.0 Object Library._Application instance at 0x75090800> 
```

正如你可以看到它完美地工作。

我已启用 gencache 模块中的所有打印语句以供参考。

谢谢 ！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-17T05:37:25.073

`wilywampa`的回答纠正了这个问题。但是，`combrowse.py`at`win32com\client\combrowse.py`也可用于从注册的类型库文件夹中获取 IID（接口标识符），然后按照`@cool_n_curious`. 但如前所述，`wilywampa`的答案确实纠正了问题，您可以`makepy.py`像往常一样使用该实用程序。

# c# - 多客户端服务器 - 2 路连接的常用方式

> ID：13121531
> 
> 赞同：3
> 
> 时间：2012-10-29T12:21:00.003
> 
> 标签：c#, sql-server, multithreading, sockets, client

我只想知道用一个套接字进行 2 路连接的正确方法是（C#）。

我需要客户端发送和接收来自服务器的数据，而无需打开客户端 PC / 路由器上的端口。

服务器将是一个多人游戏服务器，客户端不应额外打开端口来玩游戏。

那么一个简单的套接字连接是否以两种方式工作（服务器有一个套接字侦听器，客户端连接到服务器套接字）？

希望这段文字能很好地解释我的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T13:04:33.150

是的，客户端只能连接到端口。然后，服务器可能会响应客户端的连接

![客户端-服务器请求及其响应](../Images/0937a66da905368e9f6c312cfbe96385.png)

**例子**

^(**客户**)

```
IPEndPoint ip = new IPEndPoint(IPAddress.Parse("127.0.0.1"), 9999);

  Socket server = new Socket(AddressFamily.InterNetwork,SocketType.Stream, ProtocolType.Tcp);

  try
  {
     server.Connect(ip); //Connect to the server
  } catch (SocketException e){
     Console.WriteLine("Unable to connect to server.");
     return;
  }

  Console.WriteLine("Type 'exit' to exit.");
  while(true)
  {
     string input = Console.ReadLine();
     if (input == "exit")
        break;
     server.Send(Encoding.ASCII.GetBytes(input)); //Encode from user's input, send the data
     byte[] data = new byte[1024];
     int receivedDataLength = server.Receive(data); //Wait for the data
     string stringData = Encoding.ASCII.GetString(data, 0, receivedDataLength); //Decode the data received
     Console.WriteLine(stringData); //Write the data on the screen
  }

  server.Shutdown(SocketShutdown.Both);
  server.Close(); 
```

这将允许客户端向服务器发送数据。然后，等待服务器的响应。但是，如果服务器没有响应，客户端将挂起很长时间。

**这是来自服务器的示例**

```
IPEndPoint ip = new IPEndPoint(IPAddress.Any,9999); //Any IPAddress that connects to the server on any port
  Socket socket = new Socket(AddressFamily.InterNetwork,SocketType.Stream, ProtocolType.Tcp); //Initialize a new Socket

  socket.Bind(ip); //Bind to the client's IP
  socket.Listen(10); //Listen for maximum 10 connections
  Console.WriteLine("Waiting for a client...");
  Socket client = socket.Accept();
  IPEndPoint clientep =(IPEndPoint)client.RemoteEndPoint;
  Console.WriteLine("Connected with {0} at port {1}",clientep.Address, clientep.Port);

  string welcome = "Welcome"; //This is the data we we'll respond with
  byte[] data = new byte[1024];
  data = Encoding.ASCII.GetBytes(welcome); //Encode the data
  client.Send(data, data.Length,SocketFlags.None); //Send the data to the client
  Console.WriteLine("Disconnected from {0}",clientep.Address);
  client.Close(); //Close Client
  socket.Close(); //Close socket 
```

这将允许服务器在客户端连接时将响应发送回客户端。

谢谢，
我希望你觉得这有帮助:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T12:29:59.983

简单的套接字连接是全双工连接，即是的，使用单个套接字可以进行双向通信。

[这是一个完整的例子](http://www.codeproject.com/Articles/1430/Real-Time-TCP-IP-using-C)。

# iphone - 使用 Facebook iOS SDK 将相册发布到时间线

> ID：13121532
> 
> 赞同：0
> 
> 时间：2012-10-29T12:21:02.797
> 
> 标签：iphone, objective-c, ios, facebook

我想将一些照片从我的 iPhone 应用程序发送到我的 Facebook 墙：

```
for (int i=0; i<_pageImages.count; i++) {   
    UIImage *img = [self.pageImages objectAtIndex:i];
    NSMutableDictionary* params = [[NSMutableDictionary alloc] init];
    [params setObject:@"my custom message" forKey:@"message"];
    [params setObject:img forKey:@"picture"];

    [self performPublishAction:^{
        [FBRequestConnection startWithGraphPath:@"me/photos" parameters:params HTTPMethod:@"POST"
            completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
                [self showAlert:@"Photo med text Post" result:result error:error];
        }];
    }];
} 
```

该代码完全有效，但正如您在代码中看到的 Alert'll 将显示`_pageImages.count`时间。我可以很容易地删除它。

我认为这可能是发布照片列表的更好方法。你可以帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:38:39.597

如果您的意图是只显示一次警报，您可以初始化您正在上传的图像的全局计数，而不是调用 showAlert:result:error 方法，您可以调用一个新方法。新方法将处理结果并增加已处理图像的本地计数。当本地计数达到全局计数时，您可以显示警报。

您还可以考虑批量处理您的请求，请参阅[https://developers.facebook.com/docs/howtos/batch-requests-ios-sdk/](https://developers.facebook.com/docs/howtos/batch-requests-ios-sdk/)

您也许可以将循环逻辑更改为：

```
// Before the loop
FBRequestConnection *connection = [[FBRequestConnection alloc] init];

// Loop through images, set up the request
for (int i=0; i<_pageImages.count; i++) { 
    ....
    FBRequest *request = [FBRequest requestWithGraphPath:@"me/photos"
                     parameters:params
                     HTTPMethod:@"POST"];
    [connection addRequest:request
         completionHandler:
             ^(FBRequestConnection *connection, id result, NSError *error) {
                 // Call your method to check results and keep count
                 // of the callbacks before displaying the final output
    }];
}

// After the loop
[connection start]; 
```

# php - PHP：空的 `index.html` 可以“隐藏”该目录中的文件（如果文件名未知）？

> ID：13121537
> 
> 赞同：0
> 
> 时间：2012-10-29T12:21:24.267
> 
> 标签：php, apache, private, public

可以使用`df9dfglh_56_ghf.mp3`空**文件**`/www/pub/`阻止访问文件吗？（但通过登录访问数据库**，**然后链接到该文件名）？ **`index.html``index.php`**

 ******更新**：但如果我想在我自己的“云播放器”中播放文件，我宁愿**不限制对目录的访问......（有点像****youtube 类别**：只有知道**链接**的人才能看到文件）

底线：我想尽量减少**服务器流量**或**版权**问题（如果这些文件可以公开访问）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T12:29:41.620

为了防止从某个文件甚至某种类型的文件访问，您可以使用[.htaccess](http://httpd.apache.org/docs/2.2/en/howto/htaccess.html)，这是一个 apache 配置文件，它提供了一些基于每个目录进行配置更改的方法。然后将以下行附加到它

```
<Files ~ "\.mp3$">
    Order allow,deny
    Deny from all
</Files> 
```

对于您的具体情况，您甚至可以这样使用它：

```
<Files "df9dfglh_56_ghf.mp3$">
    Order allow,deny
    Deny from all
</Files> 
```

如果您只希望该文件不在索引中列出，您可以使用这个相同的文件来执行@Ynhockey 所说的并发出配置：

```
Options -Indexes 
```

我希望它有所帮助。干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T12:31:49.797

原则上是的，它会禁用文件列表，但如果用户知道确切的路径，那么他将能够查看/下载给定的文件。我相信您正在尝试做的一种有效方法是将文件放在网络不可见的目录中，然后通过 php 提供文件。那么链接将是 smth like, domain.com/getfile.php?fileindetification=thefile 然后在 getfile.php 你可以验证用户，然后为他提供文件，你可以做更多，你可以使当前链接有效只在短时间内。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T12:26:19.093

通过简单地使用`index.html`or `index.php`，您只会禁用目录列表。人们仍然可以访问该目录中的任何文件，但如果他们有指向该目录的直接 URL。

如果您想阻止对特定文件的访问，则需要明确限制对这些文件的访问。[这](https://stackoverflow.com/questions/2187200/using-php-apache-to-restrict-access-to-static-files-html-css-img-etc)是一个很好的资源开始。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T12:26:36.713

空索引文件可以阻止显示目录列表，但不会阻止直接访问文件。这也可以通过将以下行放入您的 .htaccess 文件中来完成：

```
Options -Indexes 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-29T12:26:58.423

我认为您指的是当有一个没有索引的目录时 Apache 的目录列表。是的，空索引将隐藏此列表，但不，如果路径已知，它不会阻止访问文件。如果此“仅与授权人员共享链接”-策略对您来说足够安全，那么就足够公平了。如果您想要更安全的东西，您应该考虑使用 mod_auth 或类似的 og 限制访问，只允许访问 .php 文件或仅允许授权用户访问的类似文件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-29T12:25:22.547

如果您在数据文件夹中设置为空

```
 index.html 
```

当用户浏览..

```
http://yoursite/data/ 
```

他会看到空白页，他不会看到你的 mp3 文件...

但如果他去

```
http://yoursite/data/yourmp3name.mp3 
```

他会打开你的mp3..

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-29T12:34:23.850

最好将文件保留在 Web 根文件夹之外，这样外部的任何人都无法访问该文件。****

# android - 更新到新版本后，Android 应用程序无法从主屏幕上创建的快捷方式打开

> ID：13121539
> 
> 赞同：1
> 
> 时间：2012-10-29T12:21:27.237
> 
> 标签：android

我开发了一个 android 应用程序，它的**第一个版本已经在 Google play 上可用。**

现在我的问题是，当我在任何 android 设备（三星 Galaxy SII、LG Optimus）上安装我的应用程序的第一个版本时，它对我来说效果很好。

我已经在主屏幕上创建了我的应用程序的快捷方式，并将我的应用程序从手机内存移动到了 SDCard。

然后我在手机上**安装了同一应用程序的新版本**，并尝试从我在主屏幕上创建的快捷方式打开它。

**但是应用程序没有从该快捷方式**打开，并给我一条错误消息“**应用程序未安装在您的设备上”**。

有人知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T12:35:55.960

您不是偶然两次声明了您的一项活动或权限吗？您可能已经在 Manifest 的某个地方再次声明了您的启动器活动。

# sql - 如何将日期列转换为 MMDDYYYY 格式以将其他表列与 MMDDYYYY 格式进行比较

> ID：13121540
> 
> 赞同：1
> 
> 时间：2012-10-29T12:21:33.653
> 
> 标签：sql, oracle

```
select  to_date(to_number(to_char(created_on_date,'MMDDYYYY')),'MMDDYYYY') from is_mdm_customer 
```

上面的查询给出

```
Error starting at line 1 in command:
select  to_date(to_number(to_char(created_on_date,'MMDDYYYY')),'MMDDYYYY') from is_mdm_customer
Error report:
SQL Error: ORA-01843: not a valid month
01843\. 00000 -  "not a valid month"
*Cause:    
*Action: 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T12:25:41.013

您应该将日期类型存储为 DATE 列，而不是 varchars。如果您需要月、日和年，您也可以为这些添加列。

只需比较日期。如果您不想比较小时、分钟、秒，我会以这种方式存储它们：将时间设置为插入或更新当天的午夜。然后您可以直接比较 DATE。

格式应该只影响视图渲染，仅此而已。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T12:50:15.727

如果您只想修剪时间部分，请使用 TRUNCATE()。

```
select  TRUNC(created_on_date) from is_mdm_customer 
```

您还可以将参数传递给 TRUNCATE 函数以不同方式截断日期。但是，如果您只想要 YEAR，则 EXTRACT() 通常会更好。

参考：[Oracle 11g Trunc（日期）](http://docs.oracle.com/cd/B28359_01/server.111/b28286/functions209.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T12:32:05.697

如果列**created_on_date**被定义为 Date 列，您可以使用它。

从 is_mdm_customer 中选择 to_char(created_on_date,'MMDDYYYY')；

# php - 时区：Mysql 保存 UTC 和 PHP 读取 America/Sao_Paulo

> ID：13121545
> 
> 赞同：2
> 
> 时间：2012-10-29T12:21:56.370
> 
> 标签：php, mysql, yii

我想在 UTC 时区保存在 mysql 中，并使用 America/Sao_Paulo 时区使用 PHP 阅读。

我使用 YII 框架。它不工作的财产，我怎么能这样做？

主.php：

```
'timezone' => 'America/Sao_Paulo',

'db'=>array(
...
    'initSQLs'=>array("SET time_zone = '+00:00'"),
...
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-19T23:36:29.753

在你的 mysql 控制台或 gui 上试试这个：

```
mysql_tzinfo_to_sql /usr/share/zoneinfo | mysql -u root -p mysql 
```

然后再次使用：

```
SET time_zone='America/Sao_Paulo'; 
```

您也可以通过以下方式进行更改：

```
SET time_zone = 'Brazil/West'; 
```

资料来源：[http ://blog.will.eti.br/2013/mysql-unknown-or-incorrect-time-zone-americasao_paulo/](http://blog.will.eti.br/2013/mysql-unknown-or-incorrect-time-zone-americasao_paulo/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T12:28:11.213

**在您的 PHP 代码中执行此操作：**

```
date_default_timezone_set('UTC'); 
```

现在 PHP 在 UTC 中运行。转换为用户当地时间取决于您，但您有一个共同点。

**并在 MySQL**中`UTC_TIMESTAMP()`满足您的`DATETIME`需求。无论 MySQL 设置如何，它都使用 UTC 时间，因此您无需再担心。

# android - 相机应用程序方向刷新父活动？

> ID：13121547
> 
> 赞同：4
> 
> 时间：2012-10-29T12:22:18.393
> 
> 标签：android, android-intent, orientation, android-camera

我正在开发一个将捕获图像作为功能之一的应用程序。在我的主屏幕上，我有两个微调器。选择微调器值后，用户可以通过单击拍照按钮来捕捉图片。直到这个工作正常。但问题在于Camera App Orientation。

拍照按钮启动相机。当图像被捕获时，它被保存（绝对没问题）并返回到父活动。**但问题是它刷新了活动**。回来时，我可以看到以下有线内容

1.）有时它会显示横向屏幕（1 秒）并返回到刷新活动并导致重置 Spinner 值的纵向。

2.) 有时它只是重置 Spinner 值。

这真的很烦人。我没有任何线索来解决这个问题。我希望你们中的一些人能解决这个问题。

非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T12:50:41.627

当您在另一个应用程序（相机）中启动活动时，最好为任何事情做好准备。Activity 可能会返回错误数据，屏幕方向可能会改变，或者用户返回您的应用程序可能需要很长时间。根据您的描述，每次启动相机应用程序时，方向似乎都会发生变化。

Android 有内置的状态管理方法来处理这种类型的场景。您可以覆盖该`onSaveInstanceState()`方法来存储您的活动状态（例如，微调器值），然后将该状态恢复到`onCreate()`. （[此处](https://stackoverflow.com/a/151940/357055)为示例。）这将处理您启动相机应用程序或您的用户按下主页按钮然后返回应用程序等情况。

**编辑**：

`onRestoreInstanceState()`仅当您的活动因内存压力而被终止并稍后重新创建时才会调用。`Bundle`使用传递给`onCreate()` （在设备旋转后再次调用）更可靠。这`Bundle`将包含存储在`onSaveInstanceState()`.

如果你需要将你的工作推迟到`onResume()`，你会想要`onCreate()`在你的类中填充一些成员变量`Activity`，然后在`onResume()`.

# python - 从文件创建字典

> ID：13121548
> 
> 赞同：-2
> 
> 时间：2012-10-29T12:22:22.780
> 
> 标签：python, list, function, dictionary

> **可能的重复：**
> [将文件读入字典并保持计数](https://stackoverflow.com/questions/13115214/reading-a-file-into-a-dictionary-and-keeping-count)

我正在尝试创建一个具有两个值的字典：第一个值是文本：

```
<NEW ARTICLE>
Take a look at 
what I found.
<NEW ARTICLE>
It looks like something
dark and shiny.
<NEW ARTICLE>
But how can something be dark
and shiny at the same time?
<NEW ARTICLE>
I have no idea. 
```

第二个值是单词“ARTICLE>”被使用的次数。

我尝试了不同的方法，其中一种方法收到此错误：

我收到的错误是这样的：

```
(key, val) = line.split()
ValueError: need more than 1 value to unpack 
```

我尝试了几种不同的方法，但无济于事，我尝试的一种方法说它提供了太多的值来解压..

我希望以后能够在字典中搜索关键字/单词并找到其适当的计数。

使用 Python 3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T12:27:48.890

这应该这样做：

```
>>> with open("data1.txt") as f:
...     lines=f.read()
...     spl=lines.split("<NEW ARTICLE>")[1:]
...     dic=dict((i,x.strip()) for i,x in enumerate(spl))
...     print dic
... 
{0: 'Take a look at \nwhat I found.',
 1: 'It looks like something\ndark and shiny.',
 2: 'But how can something be dark\nand shiny at the same time?',
 3: 'I have no idea.'} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T12:28:04.820

确保某处没有空行：

```
if newdoc == True and line != "ARTICLE>" and line:
    (key, val) = line.split() 
```

（空行将被拆分为`[]`，它不能被解析为具有两个元素的元组......）

# javascript - Enque 脚本在 wordpress 中不适用于 jQuery

> ID：13121550
> 
> 赞同：2
> 
> 时间：2012-10-29T12:22:32.917
> 
> 标签：javascript, jquery, wordpress

我总是很难让 jQuery 在 wordpress 中工作。

我真的需要一些关于这件事是如何工作的澄清和解释。

这是我的代码，我似乎看不出它有什么问题。

在 functions.php 文件中：

```
function my_init() {
if (!is_admin()) {
    // comment out the next two lines to load the local copy of jQuery
    // wp_deregister_script('jquery'); 
    // wp_register_script('jquery', 'http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js', false, '1.3.2'); 
    wp_enqueue_script('jquery');
} } add_action('init', 'my_init'); 
```

这是在我调用其他 jQuery 脚本之前在我的页脚中：

```
<?php wp_enqueue_script("jquery"); ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T12:52:24.583

[这篇文章](https://wordpress.stackexchange.com/questions/21007/trying-to-enqueue-script-in-wordpress)也有一些答案。

我过去也遇到过这种情况，如果需要，我通常什至不使用 wordpress 自己的 jquery。因为服务器端的 google 方法更快。下面的代码必须工作。

**函数.php**

```
<?php

function google_jquery() {
    wp_deregister_script( 'jquery' );
    wp_register_script( 'jquery', 'http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js');
    wp_enqueue_script( 'jquery' );
} 

add_action('wp_enqueue_scripts', 'google_jquery');

?> 
```

确保 wp_head(); 在你的**header.php**文件中。

**头文件.php**

```
<!DOCTYPE html>
<html <?php language_attributes(); ?>>
<head>
<meta charset="<?php bloginfo( 'charset' ); ?>" />
<title><?php wp_title(); ?> <?php bloginfo( 'name' ); ?></title>
<link rel="profile" href="http://gmpg.org/xfn/11" />
<link rel="stylesheet" href="<?php bloginfo( 'stylesheet_url' ); ?>" type="text/css" media="screen" />
<link rel="pingback" href="<?php bloginfo( 'pingback_url' ); ?>" />
<?php if ( is_singular() && get_option( 'thread_comments' ) ) wp_enqueue_script( 'comment-reply' ); ?>
<?php wp_head(); ?>
</head> 
```

您不需要以这种方式在页脚中调用其他 jquery 脚本。如果您正在排队让我们说 jquery UI 脚本，那么请确保您有 wp_footer(); 在您的**footer.php**文件中。

**页脚.php**

```
<?php 
//Footer scripts
wp_footer(); 
?>
</body>
</html> 
```

# magento - 多商店magento - 不同的域，相同的产品

> ID：13121551
> 
> 赞同：-1
> 
> 时间：2012-10-29T12:22:34.980
> 
> 标签：magento, store

朋友们，

我对具有多个商店 magento 的配置的可能性表示怀疑。

我将解释我的业务：

我有一家卖珠宝的网上商店。

我需要的：

我想创建微型特许经营计划以扩大我的店铺我想提供我的合作店铺的副本：

*   不同的域
*   相同的产品
*   接收不同的贝宝账户
*   卖家只会看到您的客户列表（独立客户）
*   卖家只会看到他们的请求列表（独立于请求）
*   主商店可以看到一切（请求、客户）

那可能吗？有什么技术流程吗？是否有任何扩展使它在创建其他商店时如此简单？

请帮助我如何做到这一点。

***我有兴趣聘请实现这个项目的服务。***

谢谢你们！

Rodrigo Rodrigues (rodrigopantaneiro # gmail) 巴西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:20:00.313

这对于多商店和商店正面视图来说是完全可能和容易做到的。您需要为您的域问题编辑 httpd.conf 文件[Magento 多商店和视图](http://www.magentocommerce.com/knowledge-base/entry/overview-how-multiple-websites-stores-work)

然后通过系统上的角色和权限，将登录到卖家的管理区域设置为仅查看他们的客户/项目等。

# objective-c - 用 iOS/Obj-c 解析这个 XML Texture atlas 文件

> ID：13121552
> 
> 赞同：0
> 
> 时间：2012-10-29T12:22:35.650
> 
> 标签：objective-c, ios, xml

使用 ios/obj-c 解析这个 XML 纹理图集文件的最佳方法是什么？

```
<?xml version="1.0" encoding="UTF-16"?>
<TextureAtlas imagePath="Atlas@4x.png">
    <!-- Created with Adobe Flash CS6 version 11.0.4.452 -->
    <!-- http://www.adobe.com/products/flash.html -->
    <SubTexture name="ArmyIcon instance 10000" x="0" y="0" width="202" height="207"/>
    <SubTexture name="foodIcon instance 10000" x="202" y="0" width="201" height="207"/>
    <SubTexture name="gemsIcon instance 10000" x="403" y="0" width="202" height="206"/>
    <SubTexture name="goldIcon instance 10000" x="605" y="0" width="201" height="206"/>
    <SubTexture name="lightningIcon instance 10000" x="806" y="0" width="202" height="241"/>
    <SubTexture name="logsIcon instance 10000" x="0" y="241" width="198" height="170"/>
    <SubTexture name="marketButton0000" x="198" y="241" width="263" height="245"/>
    <SubTexture name="populationIcon instance 10000" x="461" y="241" width="201" height="207"/>
    <SubTexture name="rocksIcon instance 10000" x="662" y="241" width="201" height="207"/>
    <SubTexture name="statusIcon instance 10000" x="0" y="486" width="276" height="206"/>
    <SubTexture name="storageIcon instance 10000" x="276" y="486" width="202" height="207"/>
    <SubTexture name="t00010000" x="478" y="486" width="340" height="306"/>
    <SubTexture name="t00020000" x="0" y="792" width="340" height="306"/>
    <SubTexture name="waterIcon instance 10000" x="340" y="792" width="201" height="206"/>
</TextureAtlas> 
```

我想找到它的 subTexture 部分，并将这些字符串保存在一个数组中，或者如果可能的话，我想我可以像数组一样索引这个 XML 文件，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T12:42:54.167

如果您使用 NSXMLParsers API，这很容易。看看这个教程：

[http://wiki.cs.unh.edu/wiki/index.php/Parsing_XML_data_with_NSXMLParser](http://wiki.cs.unh.edu/wiki/index.php/Parsing_XML_data_with_NSXMLParser)

# nhibernate - 异常“实例未处于有效状态”

> ID：13121553
> 
> 赞同：2
> 
> 时间：2012-10-29T12:22:38.083
> 
> 标签：nhibernate, orm, fluent-nhibernate, nhibernate-mapping

这是一个示例代码。我在哪里做一些测试

1.  获取实体
2.  删除实体
3.  回滚事务。
4.  变更实体
5.  刷新实体
6.  获取实体

执行以下代码时出现此异常：**实例未处于有效状态**

```
 ISession session = sessionFactory.OpenSession();
        var list1 = session.Query<Asset>().ToList();

        ITransaction transaction = session.BeginTransaction();

        session.Delete(list1[0]);

        transaction.Rollback();
        transaction.Dispose();

        list1[0].Name = "Test";
        session.Refresh(list1[0]);
        var list2 = session.Query<Asset>().ToList(); 
```

如果我两次调用刷新。它没有任何问题。它工作正常。

```
 try
        {
            session.Refresh(list1[0]);
        }
        catch (Exception)
        {
            session.Refresh(list1[0]);
        } 
```

您能否告诉我您对这里有什么问题的看法和建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-10T04:32:39.070

我认为问题在于您对回滚和异常的处理。在回滚或异常之后，对象的内存状态可能不再与其持久状态一致，因此如果不进行任何清理，会话将不再安全使用。建议发生异常后，您应该回滚任何事务，然后丢弃会话，或者使用 session.Clear() 清除它。回滚也是一样，要么开始一个新的会话，要么清除它并丢弃所有现有的对象，否则不一致会带来很多麻烦。

# c++ - 如何在未知 typedef struct 和 QByteArray 之间进行序列化和反序列化

> ID：13121554
> 
> 赞同：1
> 
> 时间：2012-10-29T12:22:40.217
> 
> 标签：c++, qt

我是 C++ 和 Qt 的绝对初学者。

我正在使用 Qt 通过 TCP 广播不同的数据。发送和检索数据的过程工作正常，但我在解释接收方的数据时遇到问题。

数据以不同的结构表示，这些结构的共同点是它们具有一个`commandId`和一个状态。其余的可能是错误消息、文件名或其他内容。此代码不是我自己编写的，也不允许我更改它（例如：定义和实现一个通用接口。）

```
typedef struct
{
  uint8_t commandId;
  State state;
  //special data
  QString errorMessage;
} Command1;

typedef struct
{
  uint8_t commandId;
  State state;
  //special data
  uint8_t amountSensors;
} Command2;

enum State {
  STATID_PAUSE = 50000
  STATID_RECORD = 50001
  STATID_PLAY = 50002
  STATID_ERROR = 50003
} 
```

`QByteArray`发件人正在以这种方式将结构转换为：

```
Command1 example;
example.commandId = 134;
example.state = STATID_ERROR;

char *p_Char;
p_char = reinterpret_cast<char*>(&example);
QByteArray qba(p_char, sizeof(p_char)); 
```

现在我必须编写一个接收器，但接收器不知道他得到了什么（`Command1`或`Command2`其他东西）。如果他能读出`commandId`和状态，他将能够解释。

此时我可以像这样读出commandId：

```
commandId = static_cast<uint8_t>(qba[0]); 
```

但是我怎么能读出`State`which is an`enum`呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T12:36:25.337

`State`值将采用`int`. 这意味着要访问它，您将执行以下操作：

```
 State state = (State) (*( reinterpret_cast<const int*>(qba.constData()+1)) ); 
```

首先，您将指针重新解释`const char`为`const int`指针，然后尊重它（这意味着您获得了值），然后将此值转换为`State`.

为了访问其他变量，您将从索引开始`1 + sizeof(int) = 1+ sizeof(State)`

请参阅[有关 enum 大小的线程](https://stackoverflow.com/questions/366017/what-is-the-size-of-an-enum-in-c)。

# php - 通过代理的 PHP SOAP 错误

> ID：13121555
> 
> 赞同：1
> 
> 时间：2012-10-29T12:22:40.077
> 
> 标签：php, soap, wsdl

`SOAP`我不断收到与我无法解决的 PHP 相关的愚蠢错误。我通过谷歌和官方手册搜索了很多，但对我没有任何帮助。

这是我的问题：我有一个官方端点地址：`$wsdl = example.com/wsdl`，我需要将其用于肥皂请求。问题是我的大学里有一个代理人试图摧毁我所有的工作。所以一般来说，我需要通过我的代理，然后成功访问 wsdl 文件，然后在 Web 服务上进行身份验证。

我试过的：

```
$wsdl = "example.com/wsdl";
$client = new SoapClient($wsdl,array('user' => 'username','password' => 'password')); 
```

这会引发错误：

```
"SOAP-ERROR: Parsing WSDL: Couldn't load from ... : failed to load external entity" 
```

我还尝试通过 file_get_contents 缓存外部 wsdl 文件，方法是创建一个有效的流，`stream_context_create()`该流也会导致相同的错误消息。

我现在如何访问这个东西？我究竟做错了什么？

# prolog - 试图通过递归计算步数？

> ID：13121564
> 
> 赞同：1
> 
> 时间：2012-10-29T12:23:11.183
> 
> 标签：prolog, non-termination, clpfd

![立方体](../Images/16a5b16f813455872fb9ec3f8763f403.png)

这是一个立方体，它的边缘是有方向的；它只能从左到右，从后到前，从上到下。

```
edge(a,b).
edge(a,c).
edge(a,e).
edge(b,d).
edge(b,f).
edge(c,d).
edge(c,g).
edge(d,h).
edge(e,f).
edge(e,g).
edge(f,h).
edge(g,h). 
```

使用下面的方法，我们可以检查是否可以从 AH 出发，例如：cango(A,H)。

```
move(X,Y):- edge(X,Y).
move(X,Y):- edge(X,Z), move(Z,Y). 
```

使用 move2，我正在尝试执行所需步骤的计数。

```
move2(X,Y,N):- N is N+1, edge(X,Y).
move2(X,Y,N):- N is N+1, edge(X,Z), move2(Z,Y,N). 
```

我将如何实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T12:28:55.083

算术评估在 Prolog 中像往常一样进行，但*赋值*不能像往常一样工作。然后你需要引入一个*新*变量来增加值：

```
move2(X,Y,N,T):- T is N+1, edge(X,Y).
move2(X,Y,N,T):- M is N+1, edge(X,Z), move2(Z,Y,M,T). 
```

并在第一次调用时将 N 初始化为 0。这种添加的变量（在我们的例子中是 T）通常被称为*累加器*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T14:33:11.693

```
move2(X,Y,1):- edge(X,Y), ! .
move2(X,Y,NN):- edge(X,Z), move2(Z,Y,N), NN is N+1 . 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T17:32:25.427

`(is)/2`对第二个参数中的实例化非常敏感。这意味着您不能以完全相关的方式使用它。你可以问`X is 1+1.`，你甚至可以问`2 is 1+1.`但你不能问：`2 is X+1`。

因此，当您使用诸如 之类的谓词进行编程时`(is)/2`，您必须想象谓词将用于哪些模式。这样的考虑很容易导致错误，特别是如果您刚刚开始。但不用担心，更熟练的程序员仍然会遇到此类问题。

在几个 Prolog 系统中有一个干净的替代方案：在 SICStus、YAP、SWI 中，有一个`library(clpfd)`允许您表达整数之间的关系。通常这个库用于约束编程，但您也可以将它用作`(is)/2`整数的安全和干净的替代品。更重要的是，这个库通常被非常有效地编译，使得生成的代码在速度上与`(is)/2`.

```
?- 使用模块（库（clpfd））。
真的。

?- X #= 1+1。
X = 2。

?- 2 #= 1+1。
真的。

?- 2 #= X+1。
X = 1。

```

所以现在回到你的程序，你可以简单地写：

```
移动2（X，Y，1）：-边缘（X，Y）。
move2(X,Y,N0):- N0 #>= 1, N0 #= N1+1, edge(X,Z), move2(Z,Y,N1)。

```

您现在可以根据需要获得所有距离。

但还有更多...

为确保`move2/3`实际终止，请尝试：

```
?- move2(A, B, N)，假的。
错误的。

```

现在我们可以确定它`move2/3`总是终止。总是？假设您添加了进一步的优势：

```
edge(f, f). 
```

现在上面的查询循环。但是您仍然可以使用您的程序来发挥自己的优势！确定节点数：

```
?- setof(C,A^B^(edge(A,B),member(C,[A,B])),Cs), 长度(Cs, N)。
Cs = [a, b, c, d, e, f, g, h],
N = 8。

```

所以最长的路径只需 7 步！

现在您可以再次询问查询，但现在通过限制`N`为小于或等于 7 的值：

```
?- 7 #>= N, move2(A,B, N), false。
错误的。

```

有了这个额外的约束，你又得到了一个终止定义！没有更多的循环。

# python - 在 django admin 中过滤 list_filter

> ID：13121568
> 
> 赞同：3
> 
> 时间：2012-10-29T12:23:29.577
> 
> 标签：python, django, filter, django-admin

我需要按一对多的字段进行过滤，但我只想显示相关对象而不是全部。

这可能吗，还是我必须创建一个自定义过滤器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T21:40:59.070

我尽量让我的模板保持“愚蠢”，所以我肯定会在视图中过滤我的数据。你可以尝试这样的事情：

```
filtered_results = [ row for row in results if row['key'] == 'value' ] 
```

# java - 如何在 JTable 上添加工具提示以在鼠标悬停事件中显示特定列的单元格值

> ID：13121575
> 
> 赞同：0
> 
> 时间：2012-10-29T12:23:52.157
> 
> 标签：java, swing, jtable, tooltip, mouseover

> **可能重复：**
> [如何向 JTable 的行添加工具提示](https://stackoverflow.com/questions/8332159/how-to-add-tooltips-to-jtables-rows)

我想为给定特定列下的单元格上的用户鼠标悬停事件添加工具提示，以便单元格的值完全显示给用户。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T13:46:14.440

我认为覆盖 prepareRenderer() 对于单个单元格可能更容易

```
JTable table = new JTable() {
    public Component prepareRenderer(TableCellRenderer renderer, int row, int column) {
        Component c = super.prepareRenderer(renderer, row, column);
        if (c instanceof JComponent) {
           if(column == X){
            //X is your particlur column number

            JComponent jc = (JComponent) c;
            jc.setToolTipText(getValueAt(row, column).toString());
           }
        }
        return c;
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T19:17:10.690

只需设置单元格渲染器的工具提示

```
public class MyCellRenderer extends DefaultTableCellRenderer {
    public Component getTableCellRendererComponent(JTable table,
                                  Object value,
                                  boolean isSelected,
                                  boolean hasFocus,
                                  int row,
                                  int column) {
        super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);
        setToolTipText(...);
        return this;
    }

} 
```

# python - 使用 Python 的 telnetlib 进行非常慢的交互

> ID：13121576
> 
> 赞同：6
> 
> 时间：2012-10-29T12:23:53.870
> 
> 标签：python, telnet

我正在编写一个 Python 脚本，它通过 Telnet 连接到 Linux 终端，运行许多命令并解析输出，然后根据输出运行更多命令等。

[使用telnetlib](http://docs.python.org/2/library/telnetlib.html)很容易设置。我正在使用 write(cmd + '\n') 发送命令，然后使用 read_until(prompt) 来读取输出。我遇到的问题是这个设置似乎很慢。每个命令可能需要大约 100-200 毫秒才能运行。这使得总运行时间大约为半分钟，我觉得这太长了。

如果我使用普通的 Telnet 客户端连接到终端，我尝试运行的命令会立即返回。我还制作了一个小型 bash 脚本，它运行大约 20 个命令，这些命令也几乎立即返回。我还尝试了 telnetlib 中的其他一些读取函数（例如 read_very_eager()），但没有任何改进。

有谁知道为什么这个设置如此缓慢，如果有什么我可以做的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T14:42:08.240

我遇到了同样的问题，我正在执行“read_until”，它在一台机器上运行非常慢，而在另一台机器上运行很快......我将代码切换到“read_very_eager”，并在请求之间放置了小暂停，如下例所示。现在我的代码在任何地方都以相同的速度工作。如果您遗漏了一些响应，请尝试使变量“等待”= 更大。

```
tn = telnetlib.Telnet(host)
wait=0.1

sleep(wait)              # wait for greeter
tn.read_very_eager();    # optional step
tn.write(PASSWORD+"\n")  # send password
sleep(wait)              # wait for prompt
tn.read_very_eager()     # optional step

tn.write("write some ting\n") # send your request
sleep(wait)                # wait for response to become available
print tn.read_very_eager() # read response IF you need it otherwise skip it
tn.write("write some thing else\n") # send your request
sleep(wait)                # wait for response to become available
print tn.read_very_eager() # read response IF you need it otherwise skip it
tn.write("exit\n")         # optional step
tn.close()                 # close connection 
```

# java - 倍增系统.out

> ID：13121582
> 
> 赞同：0
> 
> 时间：2012-10-29T12:24:14.897
> 
> 标签：java, outputstream, printstream

我想给`System.out`另一个写消息`OutputStream`，但我仍然想要标准输出。

我找到了关于类似问题[Copy and Redirecting System.err Stream](https://stackoverflow.com/questions/4880401/copy-and-redirecting-system-err-stream)的答案：

> 简而言之，您需要做的是定义一个可以复制其输出的 PrintStream，使用以下方法分配它：

```
System.setErr(doubleLoggingPrintStream) 
```

这是我到目前为止所做的：

```
public class DoublerPrintStream extends PrintStream {

    private OutputStream forwarder;

    public DoublerPrintStream(OutputStream target, OutputStream forward) {
        super(target, true);
        this.forwarder = forward;
    }

    @Override
    public void write(byte[] b) throws IOException {
        try {
            synchronized (this) {
                super.write(b);
                forwarder.write(b);
                forwarder.flush();
            }
        }
        catch (InterruptedIOException x) {
            Thread.currentThread().interrupt();
        }
        catch (IOException x) {
        }
    }

    @Override
    public void write(byte[] buf, int off, int len) {
        try {
            synchronized (this) {
                super.write(buf, off, len);
                forwarder.write(buf, off, len);
                forwarder.flush();
            }
        }
        catch (InterruptedIOException x) {
            Thread.currentThread().interrupt();
        }
        catch (IOException x) {
        }
    }

    @Override
    public void write(int b) {
        try {
            synchronized (this) {
                super.write(b);
                forwarder.write(b);
                forwarder.flush();
            }
        }
        catch (InterruptedIOException x) {
            Thread.currentThread().interrupt();
        }
        catch (IOException x) {
        }
    }

    @Override
    public void flush() {
        super.flush();
        try { forwarder.flush(); } catch (IOException e) { }
    }

    @Override
    public void close() {
        super.close();
        if (forwarder != null) {
            try {
                forwarder.close();
            } catch (Exception e) {}
            }
        }
    }
} 
```

这只是一个草案，但这是一个好方法吗？我对是否有更好的解决方案一无所知，所以我正在寻找确认、想法和建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T12:29:39.720

我认为有一个 Apache 库可以做到这一点（[TeeOutputStream](http://commons.apache.org/io/apidocs/org/apache/commons/io/output/TeeOutputStream.html)，感谢@Thilo），但你的实现对我来说看起来不错。

# c# - 如何获取标签的文本并将其传递给变量？

> ID：13121583
> 
> 赞同：1
> 
> 时间：2012-10-29T12:24:16.663
> 
> 标签：c#, watin

我想获得一个标签值并将其传递给一个变量。假设我有：

```
<td class="label">
<label for="id5">**Text value**</label> 
```

如何将字符串“文本值”传递给变量？我试过了：

```
string a = ie.Label(Find.ByFor("id5")).ToString(); 
```

但它没有任何价值......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T12:31:16.863

您应该使用 Text-property（获取元素的内部文本以及该元素中包含的所有元素的内部文本。）：

```
string a = ie.Label(Find.ByFor("id5")).Text; 
```

# c# - OpenXML 间距问题

> ID：13121587
> 
> 赞同：0
> 
> 时间：2012-10-29T12:24:26.223
> 
> 标签：c#, openxml

我正在使用 c# 创建一个 word 文档（2010）。

它由一个带有单元格的大表格和单元格内的段落组成。

我已经通过一些（我希望是简单的）一个小问题实现了这一点。在每段文字的前面都有一块空白。![在此处输入图像描述](../Images/5b62377de65fcfc7248b5bb4bd61e399.png)

我试图摆脱这个空间，但没有运气。

为了构建表格，我几乎遵循了这个例子。

[http://msdn.microsoft.com/en-us/library/office/gg490656.aspx](http://msdn.microsoft.com/en-us/library/office/gg490656.aspx)

我试过摆弄单元格、表格行和表格单元格的排列，但我不确定我是否使用了正确的属性。

我尝试将 new ContextualSpacing() { Val = false } 附加到表格行和单元格，但没有成功。我也尝试过新的 Spacing 也没有运气！

任何想法提示提示将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T09:37:50.070

我发现将样式设置为 word 中的样式解决了这个问题。这是一个手动过程，然后我研究了如何以编程方式执行此操作。

```
DocumentFormat.OpenXml.Wordprocessing.TableStyle tableStyle2 = new DocumentFormat.OpenXml.Wordprocessing.TableStyle() { Val = "TableGrid" }; 
```

将此项目附加到表中，一切正常！

# c++ - 如何遍历类的实例集合并访问其模板成员

> ID：13121588
> 
> 赞同：2
> 
> 时间：2012-10-29T12:24:30.003
> 
> 标签：c++, templates, comparison, set

所以，我有以下类和方法：

**属性**：有一个类型的成员`int`（命名`mTag`）

**TypedProperty**：从`Property`类继承并添加一个名为`mValue`type的成员`T`。

**PropertyList**：一个维护 a `std::set`of`Property`并具有`Add`and`Print`方法的类。

**CheckSubset**：一种检查 a`std::set`是否包含在另一个集合中的方法。

我不知道我应该如何实现该`CheckSubset`方法。因为我不知道如何遍历一个`set<Property>`和访问模板成员（`mValue`）。我也尝试使用该`includes`方法，但它不起作用（即使它有效，我也不知道它是怎么做到的！）。方法中存在同样的问题`PropertyList::Print`，我不知道应该使用什么演员表。
任何有关实施`CheckSubset`和`Print`方法的建议将不胜感激！

**更新**源代码（使用指针）

```
#include <string>
#include <iostream>
#include <set>
#include <algorithm>
#include <tr1/memory>

using namespace std;

/////////////////// Property Class //////////////////////

class Property
{
public:
    Property(){};
    Property(const int tag)
            : mTag(tag) {}
    virtual ~Property() {}
    int mTag;
    bool operator<(const Property &property) const
    {
        return mTag < property.mTag;
    }
};

/////////////////// TypedProperty Class /////////////////

template< typename T >
class TypedProperty : public Property
{
public:
    TypedProperty (const int tag, const T& value)
            : Property(tag), mValue(value){}
    T mValue;
};

/////////////////////////////////////////////////////////

typedef std::tr1::shared_ptr<Property> PropertyPtr;

/////////////////// PropertyList Class /////////////////

class PropertyList
{
public:
    PropertyList(){};
    virtual ~PropertyList(){};
    template <class T>
    void Add(int tag, T value) 
    {
    PropertyPtr ptr(new TypedProperty<T>(tag, value));
        mProperties.insert(ptr);
    }
    void Print()
    {
    for(set<PropertyPtr>::iterator itr = mProperties.begin(); itr != mProperties.end(); itr++)
    {
        cout << ((PropertyPtr)*itr)->mTag << endl; 
        // What should I do to print mValue? I do not know its type
        // what should *itr be cast to? 
    }
    }
    set<PropertyPtr> mProperties;
};

//////////////////// Check Subset ///////////////////////
/*
 * Checks if subset is included in superset 
 */
bool CheckSubset(set<PropertyPtr> &superset, set<PropertyPtr> &subset)
{
    // How can I iterate over superset and subset values while I do not know
    // the type of mValue inside each Property?
    // I also tried the following method which does not seem to work correctly
    return includes(superset.begin(), superset.end(), 
            subset.begin(), subset.end());
}

int main()
{
    PropertyList properties1;
    properties1.Add(1, "hello");
    properties1.Add(2, 12);
    properties1.Add(3, 34);
    properties1.Add(4, "bye");

    properties1.Print();

    PropertyList properties2;
    properties2.Add(1, "hello");
    properties2.Add(3, 34);

    if(CheckSubset(properties1.mProperties, properties2.mProperties)) // should be true
        cout << "properties2 is subset!" << endl;

    PropertyList properties3;
    properties3.Add(1, "hello");
    properties3.Add(4, 1234);

    if(CheckSubset(properties1.mProperties, properties3.mProperties)) // should be false
        cout << "properties3 is subset!" << endl;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T12:34:46.130

你想要的，不能用当前的设计来完成。

你的方法失败了`std::set<Property>`。

`std::set<Property>`会切片。这意味着它只会复制`Property`部分而忘记复制其他`TypedProperty<T>`成员。

结果，在内部`PropertyList::print()`，没有办法访问 mValue。

如果要将`TypedProperty<T>`s 存储在 a`std::set`中，则必须使用某种指针。即要么`std::set<Property*>`，要么智能指针版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T13:56:14.677

为了解决`Print`方法中的问题`PropertyList`，您可以为类编写一个`Print`方法`TypedProperty`，该方法打印其标签和值。

但是关于访问`mValue`您想要对其进行一些操作的问题，我想不出一种使用普通类型和模板来获得的方法，`mValue`而无需让您的父类`Property`使用模板类型`TypedProperty`（这似乎是不可取的）。但是您可以获取地址`mValue`并将其转换为`void*`以消除类型问题。这样您将面临另一个问题，即您不能指向`void*`指针的值，因此您不能在父级使用指针。因此，您应该编写一个方法（由 实现`TypedProperty`），该方法接受一个`void*`指针并将其强制转换为 child 中定义的类型并执行所需的操作。

例如，在下面的代码中，我假设您想检查 a 中的值`TypedProperty`与另一个相同类型（`IsEqual`方法）的值是否相等。

现在您可以简单地实现`CheckSubset`使用`IsEqual`（检查两个元素就像：）`superItr->IsEqual(subItr->GetValue())`。

```
class Property
{
    public:
        Property(){};
        Property(const int tag)
            : mTag(tag) {}
        virtual ~Property() {}
        virtual void* GetValue() = 0;
        virtual bool IsEqual(void* value) = 0;
        virtual void Print() = 0;
        int mTag;
        bool operator<(const Property &property) const
        {
            return mTag < property.mTag;
        }
};

template< typename T >
class TypedProperty : public Property
{
    public:
        TypedProperty (const int tag, const T& value)
            : Property(tag), mValue(value){}
        void* GetValue()
        {
            return &mValue;
        }
        bool IsEqual(void* value)
        {
            return *((T*)value) == mValue;
        }
        void Print()
        {
            cout << "Tag: " <<  mTag << ", Value: " << mValue << endl;
        }
        T mValue;
};

typedef std::tr1::shared_ptr<Property> PropertyPtr;

class PropertyList
{
    public:
        PropertyList(){};
        virtual ~PropertyList(){};
        template <class T>
            void Add(int tag, T value) 
            {
                PropertyPtr ptr(new TypedProperty<T>(tag, value));
                mProperties.insert(ptr);
            }
        void Print()
        {
            cout << "-----------" << endl;
            for(set<PropertyPtr>::iterator itr = mProperties.begin(); itr != mProperties.end(); itr++)
            {
                (*itr)->Print();
            }
        }
        set<PropertyPtr> mProperties;
}; 
```

# c# - IIS7 - asp.net URL 重定向到虚拟路径错误的根目录

> ID：13121589
> 
> 赞同：0
> 
> 时间：2012-10-29T12:24:46.553
> 
> 标签：c#, visual-studio-2010, iis, asp-classic

所以，我所有的网址都不能按我的意愿工作。

```
e.g my website url is http://IPAddress/MyWebsite. 
```

'MyWebsite' 是我的虚拟路径，不知何故所有链接都搞砸了，因为：

```
<a href="~/Default.aspx"> Redirects to http://IPAddress/Default.aspx
or-
Response.Redirect("~/Default.aspx") Redirects to http://IPAddress/Default.aspx
or-
<link rel="stylesheet" type="text/css" href="../static/css/mysupercss.css" /> Links to http://IPAddress/static/css/mysuper.css 
```

而不是重定向到 http://IPAddress/MyWebsite/[THEN THE URL]

有谁知道我的问题在哪里？

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T12:33:00.640

您需要将虚拟路径更改为应用程序。在 IIS 管理器中，右键单击虚拟路径并选择“转换为应用程序”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-29T16:52:44.260

我遇到了这个问题，但我注意到问题链接只是网站上其他页面的链接。带有哈希 ( `<a href=#blah>`) 的相同页面锚点我们不会造成问题。经过一番挖掘后，我注意到我的词汇表页面的受影响链接缺少`~/`前缀。

改变

`<a href="glossary.html#Term_A">Vehicle Configuration</a>` 至

`<a href="~/glossary.html#Term_A">Vehicle Configuration</a>`

让一切再次投入生产。如果没有波浪线斜线前缀，一切都在开发中工作，但是一旦在虚拟路径到位的生产中，我遇到了问题。

# javascript - Node js中向rest服务发送https请求的步骤

> ID：13121590
> 
> 赞同：46
> 
> 时间：2012-10-29T12:24:54.010
> 
> 标签：javascript, node.js, rest, post, get

将节点 js 中的 https 请求发送到休息服务的步骤是什么？我有一个暴露的 api [（原始链接不起作用......）](https://133-70-97-54-43.sample.com/feedSample/Query_Status_View/Query_Status/Output1?STATUS=Joined%20school)

如何传递请求以及我需要为此 API 提供哪些选项，例如主机、端口、路径和方法？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-10-29T18:52:13.407

只需将核心[https](http://nodejs.org/api/https.html)模块与[https.request](http://nodejs.org/api/https.html#https_https_request_options_callback)功能一起使用。`POST`请求示例（`GET`类似）：

```
var https = require('https');

var options = {
  host: 'www.google.com',
  port: 443,
  path: '/upload',
  method: 'POST'
};

var req = https.request(options, function(res) {
  console.log('STATUS: ' + res.statusCode);
  console.log('HEADERS: ' + JSON.stringify(res.headers));
  res.setEncoding('utf8');
  res.on('data', function (chunk) {
    console.log('BODY: ' + chunk);
  });
});

req.on('error', function(e) {
  console.log('problem with request: ' + e.message);
});

// write data to request body
req.write('data\n');
req.write('data\n');
req.end(); 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-10-29T14:31:34.207

最简单的方法是使用[请求](https://npmjs.org/package/request)模块。

```
request('https://example.com/url?a=b', function (error, response, body) {
  if (!error && response.statusCode == 200) {
    console.log(body);
  }
}); 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2018-08-10T09:42:02.467

请注意，如果您正在使用`https.request`，请不要直接使用来自 `res.on('data',..`. 如果您有大量数据以块的形式出现，这将失败。因此，您需要连接所有数据，然后在`res.on('end'`. 例子 -

```
 var options = {
    hostname: "www.google.com",
    port: 443,
    path: "/upload",
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
      'Content-Length': Buffer.byteLength(post_data)
    }
  };

  //change to http for local testing
  var req = https.request(options, function (res) {
    res.setEncoding('utf8');

    var body = '';

    res.on('data', function (chunk) {
      body = body + chunk;
    });

    res.on('end',function(){
      console.log("Body :" + body);
      if (res.statusCode != 200) {
        callback("Api call failed with response code " + res.statusCode);
      } else {
        callback(null);
      }
    });

  });

  req.on('error', function (e) {
    console.log("Error : " + e.message);
    callback(e);
  });

  // write data to request body
  req.write(post_data);
  req.end(); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-10-30T06:24:03.013

使用请求模块解决了这个问题。

```
// Include the request library for Node.js   
var request = require('request');
//  Basic Authentication credentials   
var username = "vinod"; 
var password = "12345";
var authenticationHeader = "Basic " + new Buffer(username + ":" + password).toString("base64");
request(   
{
url : "https://133-70-97-54-43.sample.com/feedSample/Query_Status_View/Query_Status/Output1?STATUS=Joined%20school",
headers : { "Authorization" : authenticationHeader }  
},
 function (error, response, body) {
 console.log(body); }  ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-06T10:57:59.957

由于没有任何使用“GET”方法的示例，这里就是其中之一。问题是`path`选项中的`Object`应该设置为`'/'`以便正确发送请求

```
const https = require('https')
const options = {
  hostname: 'www.google.com',
  port: 443,
  path: '/',
  method: 'GET',
  headers: {
    'Accept': 'plain/html',
    'Accept-Encoding': '*',
  }
}

const req = https.request(options, res => {
  console.log(`statusCode: ${res.statusCode}`);
  console.log('headers:', res.headers);

  res.on('data', d => {
    process.stdout.write(d)
  })
})

req.on('error', error => {
  console.error(`Error on Get Request --> ${error}`)
})

req.end() 
```

# c# - c# - {string[0]} 是什么意思？

> ID：13121591
> 
> 赞同：5
> 
> 时间：2012-10-29T12:24:57.457
> 
> 标签：c#, arrays

## 设置：

度过了愚蠢的一天。

我有以下代码：

```
UserRoles = Roles.GetRolesForUser(username); 
```

## 问题：

如果用户名是空字符串（“”，用户未登录），那么当我检查`UserRoles`即时窗口中的值时，它会显示：

```
{string[0]} 
```

## 问题：

是什么`{string[0]}`？

如何复制此值以针对未登录用户（用户名 ==“”）的情况测试我的代码？

注意：我已经搜索过这个但无济于事。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-29T12:27:01.527

GetRolesForUser 返回一个角色数组，因此即时窗口中的“String[0]”仅表示它知道返回类型是一个数组（在本例中为字符串），但条目为零（因为没有返回任何角色空白用户。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T12:27:18.997

它是一个空的字符串数组。您可以创建一个空字符串数组，例如

```
string[] emptyArray = new string[0]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-29T12:30:11.127

如果您查看[Roles.GetRolesForUser(string)](http://msdn.microsoft.com/en-us/library/8h930x07.aspx)的文档，您会看到它返回一个字符串数组：`string[]`

`{string[0]}`意味着你有一个零元素的数组。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-29T12:31:20.407

这是即时窗口显示空字符串数组的方式：

```
[Test]
public void StringsTest()
{
    var strings = new string[] {};
} 
```

在您的测试代码中，您可以[模拟](http://code.google.com/p/moq/wiki/QuickStart#Matching_Arguments)IRoles 并让 GetRolesForUser(username) return new string[] {}

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-29T12:43:36.293

这意味着该值是一个字符串数组，其中包含 0 个元素

# ssas - 如何在 MDX 中将列定义为 double 的数据类型？

> ID：13121593
> 
> 赞同：0
> 
> 时间：2012-10-29T12:25:10.517
> 
> 标签：ssas, mdx

我是 MDX 和分析服务的新手，所以请多多包涵。当我运行以下 MDX 查询时，结果值作为 Column AI 的双精度值返回，但是列元数据将数据类型显示为对象类型，而当它应该是双精度值时。我如何强制它识别数据类型为双重，我什至可以这样做吗？我不确定它是如何推断它是对象类型的。

```
WITH
        MEMBER [Column (A)] AS [Measures].[ColumnA]
        MEMBER [Column (B)] AS [Measures].[ColumnB]
        MEMBER [Column (C)] AS [Measures].[ColumnC]
        MEMBER [Column (D)] AS [Measures].[ColumnD]
        MEMBER [Column (E)] AS [Measures].[ColumnE]
        MEMBER [Column (F)] AS [Measures].[ColumnF]
        MEMBER [Column (G)] AS [Measures].[ColumnB] - [Measures].[ColumnA]
        MEMBER [Column (H)] AS [Measures].[ColumnD] - [Measures].[ColumnC]
        MEMBER [Column (I)] AS [Measures].[ColumnF] - [Measures].[ColumnE]
        SELECT 
        NON EMPTY
        {
            Column (A),
            Column (B),
            Column (C),
            Column (D),
            Column (E),
            Column (F),
            Column (G),
            Column (H),
            Column (I)
        } ON COLUMNS,
        NON EMPTY
        CROSSJOIN(
            CROSSJOIN([T].[TB].[TB],

                  [T].[TT].[TT]),

                  [T].[TR].[TR])  
        ON ROWS
        FROM RePro          
        WHERE 
        (
            [RS].[RS].[EOD],
                [RD].[RD].[DATE],
                [P].[P].[ABCD]
        )
        CELL PROPERTIES VALUE 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T23:30:21.703

我可能在这里遗漏了一些上下文，但它们`[Measures].[ColumnA]`本身是否定义为`decimal`（或`money`）？

如果是，您能否尝试对您的 MDX 进行这种细微的更改，而不是

```
WITH MEMBER [Column (A)] ... 
```

将其更改为

```
WITH MEMBER [Measures].[Column (A)] AS [Measures].[ColumnA] 
```

这样，当您保持相同的度量上下文时，数据类型定义就会完全传播。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T18:40:18.867

你可以试试CDbl功能。我在上面找到了一些例子：
[Casting nvarchar to Decimal using MDX](http://social.msdn.microsoft.com/Forums/en-US/sqlanalysisservices/thread/f1cb5823-4035-4b23-93ab-9c7dd564591f)
[Mean, Median and Mode in MDX](http://blogs.adatis.co.uk/blogs/jeremykashel/archive/2012/03/19/mean-median-and-mode-in-mdx.aspx)

# ruby-on-rails - no-db 数据获取代码的正确 rails 位置

> ID：13121602
> 
> 赞同：1
> 
> 时间：2012-10-29T12:25:50.343
> 
> 标签：ruby-on-rails

我正在寻找从其他网站获取数据的代码的“rails”设计模式。

我的应用程序中有一个 rails 控制器，它不是从数据库中获取数据，而是从外部 API 或从网络上抓取数据。

放置此代码的“rails”位置在哪里。

为了快速实现，我只是将它放在模型中，但模型不与数据库交互 - 或不支持标准模型功能 - 所以感觉不对，但我对 rails 和 ruby​​ 的理解还不够扎实，无法知道在哪里它应该去。

代码的大致工作方式是控制器调用 model.fetchData args 模型使用 HTTParty 或类似方法来使调用处理数据将其传递回控制器

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T14:46:07.803

从广义上讲，我认为有两种可能的方法可以做到这一点：

1.  创建一个普通的 ruby​​ 类来包含向 API 发出请求和处理来自它的响应的方法。您可以在此类中包含 HTTParty 模块，其中包含`include HTTParty`. 放置此代码的通常位置在 lib/ 中（确保无论您放置它，路径都在[autoload_paths](https://stackoverflow.com/questions/4074830/adding-lib-to-config-autoload-paths-in-rails-3-does-not-autoload-my-module)中）。
2.  如果您正在做任何非常复杂的事情，或者 API 本身很复杂，您可能需要考虑创建一个单独的 gem 来处理与 API 的交互。这种类型的 gem 的术语是“API 包装器”——如果你环顾四周，你会发现那里有很多流行服务（Twitter、LinkedIn、Flickr 等）。

注意我没有提到活动记录。如果您不打算将任何内容保存到数据库中，我认为甚至不需要创建任何 activerecord 模型。您可以只使用控制器和视图，然后（如果需要）从 activemodel（验证、国际化等）中挑选和选择组件，以使您的 ruby​​ API 包装类感觉更像 Rails 模型。例如，我在我正在开发的应用程序中所做的一件事是在实际向外部 API 发出请求之前对查询字符串应用验证，这有点像在查询数据库之前对数据库查询运行验证。请参阅Yehuda Katz 的[这篇文章](http://yehudakatz.com/2010/01/10/activemodel-make-any-ruby-object-feel-like-activerecord/)，了解更多关于如何让普通的 ruby​​ 对象感觉像 activerecord 模型的信息。

希望有帮助。我昨天回答了另一个与这个问题非常相似的问题，您可能也想看看这个答案：[Using rails to consume web services/apis](https://stackoverflow.com/questions/13114125/using-rails-to-consume-web-services-apis/13115817#13115817)

# svn - 如何从 svn 整个修订版中删除视频文件

> ID：13121604
> 
> 赞同：1
> 
> 时间：2012-10-29T12:25:58.537
> 
> 标签：svn, tortoisesvn, hgsubversion

我的一位开发人员向 svn 存储库添加了一个视频文件并提交了代码。文件大小为 700MB。后来他从存储库中删除了该文件。问题是我必须每天进行 svn 备份，存储库大小非常庞大。如何从数据库中删除该特定修订日志。

提前致谢

# java - 从 PrimeFaces 3.2 升级到 3.4.1 后：`NoClassDefFoundError: org/primefaces/model/TreeNode`？

> ID：13121606
> 
> 赞同：0
> 
> 时间：2012-10-29T12:26:11.373
> 
> 标签：java, primefaces

我将 PrimeFaces 库从 3.2 升级到 3.4.1，但出现此错误：

```
INFO: Reading config /WEB-INF/faces-config.xml
29.10.2012\. 13:03:57 org.apache.catalina.core.StandardContext listenerStart
SEVERE: Exception sending context initialized event to listener instance of class    org.apache.myfaces.webapp.StartupServletContextListener
java.lang.NoClassDefFoundError: org/primefaces/model/TreeNode
at java.lang.Class.getDeclaredFields0(Native Method)
at java.lang.Class.privateGetDeclaredFields(Class.java:2291)
at java.lang.Class.getDeclaredFields(Class.java:1743)
at org.apache.myfaces.config.annotation.AnnotationConfigurator.fields(AnnotationConfigurator.java:520)
at org.apache.myfaces.config.annotation.AnnotationConfigurator.handleManagedBean(AnnotationConfigurator.java:367)
at org.apache.myfaces.config.annotation.AnnotationConfigurator.createFacesConfig(AnnotationConfigurator.java:244)
at org.apache.myfaces.config.annotation.AnnotationConfigurator.createFacesConfig(AnnotationConfigurator.java:91)
at org.apache.myfaces.config.DefaultFacesConfigurationProvider.getAnnotationsFacesConfig(DefaultFacesConfigurationProvider.java:152)
at org.apache.myfaces.config.DefaultFacesConfigurationMerger.getFacesConfigData(DefaultFacesConfigurationMerger.java:91)
at org.apache.myfaces.config.FacesConfigurator.configure(FacesConfigurator.java:416)
at org.apache.myfaces.webapp.AbstractFacesInitializer.buildConfiguration(AbstractFacesInitializer.java:338)
at org.apache.myfaces.webapp.Jsp21FacesInitializer.initContainerIntegration(Jsp21FacesInitializer.java:73)
at org.apache.myfaces.webapp.AbstractFacesInitializer.initFaces(AbstractFacesInitializer.java:140)
at org.apache.myfaces.webapp.StartupServletContextListener.contextInitialized(StartupServletContextListener.java:111)
at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4779)
at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5273)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.ClassNotFoundException: org.primefaces.model.TreeNode
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1711)
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1556)
... 24 more
29.10.2012\. 13:03:57 org.apache.catalina.core.StandardContext startInternal
SEVERE: Error listenerStart
29.10.2012\. 13:03:57 org.apache.catalina.core.StandardContext startInternal
SEVERE: Context [/EWC] startup failed due to previous errors 
```

升级后 TreeNode 可能会出现什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T14:10:44.923

解决它。

这只是更新部署库列表的一个问题——新的 PrimeFaces 库没有发布。

# model-view-controller - BackboneJS 和模型/集合

> ID：13121608
> 
> 赞同：1
> 
> 时间：2012-10-29T12:26:16.473
> 
> 标签：model-view-controller, backbone.js

有这样的json数据：

```
{ tournaments: [ {
   tournament_id: "..."
   tournament_name: "..."
   events: [ {
       event_id: ...
       event_name: ....
       param : [ {
           param_a : 
           param_b : ..
           subparan : [ {
               sub_1: 1
               sub_2 : 2... 
```

所以。我不明白 - 如何实现 BackBone Collection/Model 风格？

如何处理更改 sub_1？- 收集收集收集？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T13:50:15.933

骨干教程[中描述](http://backbonejs.org/#FAQ-nested)的最简单的方法：

```
var Events = Backbone.Collection.extend({
    initialize: function(){
        this.params = new Params() 
    }
})

var Tournaments = Backbone.Model.extend({
    initialize: function(){
        this.events = new Events()
    }
})
var tournaments = new Tournaments() 
```

您可以根据需要继续嵌套。当我从事类似的任务时，我将每个集合包装在表示集合状态的模型中，并在响应集合事件时改变自身。这允许不向嵌套集合询问其在模型中具有实际状态的状态。

```
var CollModel = Backbone.Model.extend({
    defaults: {
        state = ''//or list or dict or whatever
    },
    initialize: function(){
        this.items = new Backbone.Collection();
        this.items.on('all', this.setState, this)
    },
    setState: function(){
        this.set(
            'state',
            this.items.reduce(function(state, item){
                /*calculate state*/
            }, '')
        )
    },
    info: function(){
        return this.get('state')
    }
}) 
```

因此，您可以嵌套具有类似技术的集合模型并直接通过 instance.info() 读取它们的状态，具体取决于您的计算方式。您的顶层模型状态将从底层模型集合的级联更新中更新。

# sproutcore - 如何在编程时使用 sc_static()

> ID：13121610
> 
> 赞同：1
> 
> 时间：2012-10-29T12:26:20.317
> 
> 标签：sproutcore

我正在尝试显示本地文件夹中的一些图像。我通过 JSON 从服务器获取图像名称。基于此，我正在动态构建图像路径。但是，最终的映像路径将被 SC 构建工具更改。我知道我们可以在 css 或视图规范中使用 sc_static() 将其映射到最终路径。如何在以编程方式构建我的 url 时实现该映射（从本地路径到最终路径）。

有什么想法、建议和想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T11:11:34.270

sc_static is not a javascript function, but rather a convention used to tell Abbot (Sproutcore's build tool, written in ruby) to replace it at runtime with a path pointing to the resource passed as first argument to sc_static. Note that this substitution is done by Abbot when the page is refreshed (in dev mode) or when the app is built (in prod mode). It is not a js function at all (use Chrome inspector to see it by yourself).

If you want to use sc_static in JS you can define all resource references as such:

```
YourApp.loadingIcon=sc_static('loading.png');
YourApp.greenIcon=sc_static('green.png'); 
```

and then reference the

```
YourApp.loadingIcon , YourApp.greenIcon 
```

variables in your code.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T12:19:28.227

终于在朋友的帮助下找到了答案。sc_static 不是 javascript 函数，它是针对 Sproutcore 的构建工具（Abbot）的函数，用于替换构建后的实际生产路径。因此我们不能在编程中使用 sc_static。

如果我们想要类似的功能，我们已经开发了自己的功能。

# java - 在对象的同一个表中显示 OneToMany 列表的大小？

> ID：13121613
> 
> 赞同：1
> 
> 时间：2012-10-29T12:26:39.393
> 
> 标签：java, sql, hibernate, jakarta-ee, one-to-many

我有一个表格网格，它显示数据库中包含的所有用户。用户拥有自己的产品列表。我想在同一个表格网格中显示产品列表的大小。

我在这里做错了什么？

```
class User {
    String username;

    @OneToMany(mappedBy="user", cascade=CascadeType.ALL) 
    List<Product> products = new ArrayList<Product>();
}

class Product {
    @ManyToOne
    User user;
} 
```

前任：

```
 org.hibernate.exception.SQLGrammarException: could not initialize a collection: [User.products#1]

at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:92)
    at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66)
    at org.hibernate.loader.Loader.loadCollection(Loader.java:2173)
    at org.hibernate.loader.collection.CollectionLoader.initialize(CollectionLoader.java:62)
    at org.hibernate.persister.collection.AbstractCollectionPersister.initialize(AbstractCollectionPersister.java:627)
    at org.hibernate.event.def.DefaultInitializeCollectionEventListener.onInitializeCollection(DefaultInitializeCollectionEventListener.java:83)
    at org.hibernate.impl.SessionImpl.initializeCollection(SessionImpl.java:1863)
    at org.hibernate.collection.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:369)
    at org.hibernate.collection.AbstractPersistentCollection.read(AbstractPersistentCollection.java:111)
    at org.hibernate.collection.AbstractPersistentCollection.readSize(AbstractPersistentCollection.java:134)
    at org.hibernate.collection.PersistentBag.size(PersistentBag.java:248)
    at UserPage.setupRender(UserPage.java:41)
    at UserPage.setupRender(UserPage.java)
    at org.apache.tapestry5.internal.structure.ComponentPageElementImpl$SetupRenderPhase.invokeComponent(ComponentPageElementImpl.java:174)
    at org.apache.tapestry5.internal.structure.ComponentPageElementImpl$AbstractPhase.invoke(ComponentPageElementImpl.java:133)
    ... 94 more

Caused by: java.sql.SQLSyntaxErrorException: user lacks privilege or object not found: PRODUCT
    at org.hsqldb.jdbc.Util.sqlException(Unknown Source)
    at org.hsqldb.jdbc.Util.sqlException(Unknown Source)
    at org.hsqldb.jdbc.JDBCPreparedStatement.<init>(Unknown Source)
    at org.hsqldb.jdbc.JDBCConnection.prepareStatement(Unknown Source)
    at org.hibernate.jdbc.AbstractBatcher.getPreparedStatement(AbstractBatcher.java:534)
    at org.hibernate.jdbc.AbstractBatcher.getPreparedStatement(AbstractBatcher.java:452)
    at org.hibernate.jdbc.AbstractBatcher.prepareQueryStatement(AbstractBatcher.java:161)
    at org.hibernate.loader.Loader.prepareQueryStatement(Loader.java:1700)
    at org.hibernate.loader.Loader.doQuery(Loader.java:801)
    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:274)
    at org.hibernate.loader.Loader.loadCollection(Loader.java:2166)
    ... 106 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T12:34:09.267

`User`是数据库的关键字。尝试将`User`实体名称更改为其他名称（例如`UserProfile`）。

还要检查您的两个实体是否都映射到`hibernate.cfg.xml`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T12:34:42.110

这可能由于多种原因而发生。我最常遇到的常见原因是列名不匹配。确保您的映射 xml/注释与架构匹配。还要确保你有正确的@Entity 和@Table 映射并指定了表名（确保你没有使用任何保留字作为表名）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T12:35:04.853

从日志中我们可以看到 hsqldb 中没有 Product 表。您是否使用休眠来创建架构。我在你的课上没有看到@Entity。如果你只是想得到产品的大小，你可以尝试使用@formula注解，它可以让你的域更多样本。

# php - MYSQL中的php下拉菜单，如何返回其他列值？

> ID：13121616
> 
> 赞同：0
> 
> 时间：2012-10-29T12:26:43.000
> 
> 标签：php, mysql, forms

我有一个要求位置的输入表单。位置存储在 mysql 数据库中并具有 id（列：id 和列：位置）。

我有一个从数据库中的这些记录生成的下拉菜单：

```
 <select name="location">

    <?php                         
            $query="SELECT location FROM locations";
                $result=mysql_query($query) or die;

            while ($row=mysql_fetch_array($result)) {

            $location=$row['location'];

            echo "<option>$location</option>";
    ?>

    </select> 
```

这一切都有效。提交表格后，我显然会得到一个 POST[location] 例如“比利时”。

假设比利时是我的数据库中的位置并且 ID 为 5，我如何从下拉框中返回 ID 作为 POST 变量，而不是位置。当然，我希望下拉菜单显示位置，而不是 ID。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T12:29:42.460

每个选项都可以取一个值并显示另一个字符串，因此`value="my_value"`请用于选择标签内的每个选项

```
<select name="location">
    <?php                         
        $query="SELECT id, location FROM locations";
        $result=mysql_query($query);

        while ($row=mysql_fetch_array($result)) {
            echo "<option value=\"" . $row['id'] . "\">" . $row['location'] . "</option>";
        }
    ?>
</select> 
```

现在您`POST['location']`将包含所选位置的数据库 ID

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T12:30:22.827

如果您更改 SQl 查询以包含位置的 ID，您可以将该值分配给下拉选择的值。

```
<select name="location">
<?php   
$query="SELECT id, location FROM locations";
$result=mysql_query($query) or die;
while ($row=mysql_fetch_array($result)) {

    $location=$row['location'];
    $id = $row['id'];
    echo "<option value='".$row['id']."'>".$location."</option>";
?>
</select> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T12:31:02.850

```
<select name="location">
<?php                         
// select columns you need, separate by , (comma)
$query = "SELECT `column1`, `column2` FROM `locations`;";
$result = mysql_query($query) or die;
while ($row = mysql_fetch_array($result)) {
    // selected columns become accessible in $row array
    // value attribute needs to be escaped here
    echo '<option value="', htmlentities($row['column1']),'">',
        htmlentities($row['column2']), '</option>'; // escape label too
    // <option> does not accept HTML in label so it should be escaped
} // done!
?>
</select> 
```

^**这个** *（阅读评论以获得解释）*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T12:28:59.737

```
select ID from locations;

$ID=$row['ID']; 
```

将 ID 替换为您的列的 ID 名称。

如果你说 select * from locations 你可以这样做：

```
$row['anyCOLUMNNAME'] 
```

您可以选择您喜欢的任何列并使用该特定行中的信息。

# excel - 在excel中列出不同的值

> ID：13121624
> 
> 赞同：0
> 
> 时间：2012-10-29T12:27:30.717
> 
> 标签：excel, excel-formula

***这个问题与*** [***这个问题有关***](https://stackoverflow.com/questions/13112163/do-sum-filter-by-date)。

我有如下数据。

```
 Col A
22-Oct-12
22-Oct-12
22-Oct-12
23-Oct-12
23-Oct-12
23-Oct-12
23-Oct-12
23-Oct-12
23-Oct-12
24-Oct-12
24-Oct-12
24-Oct-12 
```

我想要的是在 B 列中找到唯一值，以便输出如下所示。

```
 Col A
22-Oct-12
23-Oct-12
24-Oct-12 
```

我试过了，`=IF(COUNTIF(A$1:A1,A1)=1,A1,"")`但问题是我`22-Oct-12`在第一次出现的前面`22-Oct-12`，`23-Oct-12`在第一次出现的前面`23-Oct-12`。输出如下所示。

```
 Col A       Col B
22-Oct-12   22-Oct-12
22-Oct-12   
22-Oct-12   
23-Oct-12   23-Oct-12
23-Oct-12   
23-Oct-12   
23-Oct-12   
23-Oct-12   
23-Oct-12   
24-Oct-12   24-Oct-12
24-Oct-12   
24-Oct-12 
```

**我不想要这样的输出。我想要的是如下。**

```
 Col A       Col B
22-Oct-12   22-Oct-12
22-Oct-12   23-Oct-12
22-Oct-12   24-Oct-12
23-Oct-12   
23-Oct-12   
23-Oct-12   
23-Oct-12   
23-Oct-12   
23-Oct-12   
24-Oct-12   
24-Oct-12   
24-Oct-12 
```

## 或者

```
 Col A      Col B          Col C
22-Oct-12   22-Oct-12   22-Oct-12
22-Oct-12               23-Oct-12
22-Oct-12               24-Oct-12
23-Oct-12   23-Oct-12
23-Oct-12   
23-Oct-12   
23-Oct-12   
23-Oct-12   
23-Oct-12   
24-Oct-12   24-Oct-12
24-Oct-12   
24-Oct-12 
```

***注意：***我可以通过 MACRO 做到这一点，但是我不想使用 MACRO。我想通过使用 excel 函数来完成这项工作。

另外，我可以按照[这个答案](https://superuser.com/questions/49614/how-do-i-get-the-distinct-values-in-a-column-in-excel)在上面做，但是我不想手动完成。

一切由预定义的excel函数。没有宏观或没有手动工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T13:12:06.643

假设数字数据（例如数字或日期）......

在 B1 中使用这个公式

`=MIN(A1:A1000)`

然后在 B2 中（假设 Excel 2007 或更高版本）

`=IFERROR(SMALL(IF(A$1:A$1000>B1,A$1:A$1000),1),"")`

...或在早期的 Excel 版本中

`=IF(COUNTIF(A$1:A$1000,">"&B1),MIN(IF(A$1:A$1000>B1,A$1:A$1000)),"")`

确认`CTRL+SHIFT+ENTER`并复制下来

如果您有超过 1000 行的数据，请进行相应调整。

此方法将按时间顺序列出日期而不重复，但是它们在数据中排序

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T12:48:19.653

试试这个，并使用`CONTROL + SHIFT + ENTER`

```
=IFERROR(INDEX($A$2:$A$20;MATCH(0;COUNTIF($B$1:B1;$A$2:$A$20);0));"") 
```

# java - 通过命令行观察 RMI 注册表

> ID：13121630
> 
> 赞同：2
> 
> 时间：2012-10-29T12:27:59.077
> 
> 标签：java, shell, rmi

我目前正在开始使用 Java RMI，并想查看绑定`rmiregistry &`服务器存根后我的本地 RMI 注册表（从 shell 开始）提供的绑定。有没有一种简单的方法可以从命令行查询所有提供的绑定？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-29T12:44:08.083

该`rmiregistry`命令不允许您查看注册表。相反，您可以编写一个简单的 java 程序来执行此操作。例如：

```
public class RegistryViewer {
  public static void main(String... args){
    String host = args[0];
    int port = Integer.parseInt(args[1]);
    Registry registry = LocateRegistry.getRegistry(host, port);
    for (String name : registry.list()) {
        System.out.println(name);
    }
  }    
} 
```

# java - ArrayList 上的 java.lang.NullPointerException

> ID：13121635
> 
> 赞同：2
> 
> 时间：2012-10-29T12:28:19.217
> 
> 标签：java, arraylist

我有以下代码：

```
for (int i=0; i<wallMaterialName.size(); i++){
if (Math.abs(calculatedWallUValue - alternativeWallUValue) > 0.01){
   if(wallMaterialName.get(i).charAt(0) == 'A'){                   //*****ERROR IN HERE*****
      PreparedStatement prepStateMat = con.prepareStatement("select * from concretestonefloor where value<? order by value desc limit 1");
      prepStateMat.setFloat(1, (Float)wallMaterialLambda.get(i));
      ResultSet rsMaterial = prepStateMat.executeQuery();
      //...
      }
  //...
  }
} 
```

当我运行代码时，会出现“java.lang.NullPointerException”。错误来自此代码：

```
if(wallMaterialName.get(i).charAt(0) == 'A') 
```

我不知道为什么 arraylist 是空的，因为我已经检查过它是否包含一些数据。有人知道如何解决这个问题吗？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T12:30:19.807

数组列表不为空，否则你会得到一个索引越界异常（这不可能在你的代码中产生，因为你的循环检查`i < wallMaterialName.size()`）。但是，您的数组列表`null`在 index 处包含一个对象`i`。

按如下方式更改代码以修复错误：

```
String materialName = wallMaterialName.get(i);
if(materialName != null && materialName.charAt(0) == 'A') ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T12:30:01.757

如果列表为空，您将不会收到错误消息。arraylist 实际上包含元素，但元素是`null`，这就是你最终得到`NullPointerException`. 如果您演示填充列表的代码，我可能会进一步帮助您。

另外注意：不要通过索引遍历列表：使用*增强的 for*语法：

```
for (String element : wallMaterialName) ... 
```

这至少可以消除您对迭代不存在的元素的担忧。您对两个并行列表使用相同索引的方式表明您的设计在这方面也有改进的潜力。您应该有一个自定义对象列表，其中包含第一个列表中的字符串和第二个列表中的浮点数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T12:32:50.700

你的数组列表`wallMaterialName`在某个索引 i 处有一个空值。知道`index`你有`null value`什么做下面的测试。

```
for(int i=0; i<al.size(); i++){
            if(al.get(i)==null){
                System.out.println(i);
            }
        } 
```

# wso2 - WSO2 ESB：警告：EPR 为 NULL。传输配置可能不正确

> ID：13121636
> 
> 赞同：2
> 
> 时间：2012-10-29T12:28:28.030
> 
> 标签：wso2, wso2esb

激活代理（使用 Web UI）时，我总是收到以下错误消息：

```
WARNING: EPRs are NULL. Transport configuration may be incorrect 
```

但我只是不明白为什么以及这意味着什么？

![在此处输入图像描述](../Images/6d214df4385ec3ef26b9f67bca3e3296.png)

代理的来源：

```
<?xml version="1.0" encoding="UTF-8"?>
<proxy xmlns="http://ws.apache.org/ns/synapse" name="patient_toMPI_pJMS_qPatientToMPI" statistics="disable" trace="disable" transports="jms">
    <parameter name="transport.jms.Destination">patient_qPatientToMPI</parameter>
    <parameter name="transport.jms.ConnectionFactory">queueNonBlocking</parameter>
    <parameter name="transport.jms.DestinationType">queue</parameter>
    <parameter name="transport.jms.ContentType">
        <rules>
            <jmsProperty>contentType</jmsProperty>
            <default>application/xml</default>
        </rules>
    </parameter>
    <target faultSequence="errorSequence">
        <inSequence>
            <log level="custom">
                <property name="Patient/toMPI" value="proxy (patient_toMPI_pJMS_qPatientToMPI) called"/>
            </log>
            <sequence key="patient_toMPI_sTransform"/>
        </inSequence>
    </target>
</proxy> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-07-25T09:19:53.887

简单修复:) 只需转到“编辑数据服务”并在“传输设置”上勾选 http 和 https![勾选 https 和 http（点击图片）](../Images/7f07364cbdba225cd9947e0ef243ae6e.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T15:29:36.893

您是否以超级租户身份登录？如果是这样，您不应该遇到此问题。上述错误，我们只在租户模式下遇到过。
请确保您已将所需的（正确的）客户端库复制到 ESB 的 repository/components/lib 目录中，以允许 ESB 和 JMS 提供程序之间的连接。

例如：如果提供者是 active-mq，则需要复制以下 jar 文件。activemq-core-xxx.jar 和 geronimo-j2ee-management_xx_spec-xx.jar

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T12:45:51.707

这已在[此处](https://wso2.org/jira/browse/ESBJAVA-1657)报告为错误。它将在未来的版本中解决。

# javascript - 使用其他项目的 Javascript 库

> ID：13121644
> 
> 赞同：0
> 
> 时间：2012-10-29T12:29:04.007
> 
> 标签：javascript, asp.net, resources, virtualpathprovider

我有两个网站，其中一个网站有一些我想在第二个网站上使用的脚本，我不想将 .js 文件复制到其他项目，因为如果我对 .js 文件进行了一些更改我将不得不做同样的事情两次。

我不知道该怎么做，我已经阅读了有关 Virtual Path Provider 的内容，但它显然对我不起作用，.js 文件位于子文件夹中，VPP 找不到它。

有人可以给我关于我应该做什么的想法吗？

# c# - URI 中指定的查询使用 Web API OData 无效

> ID：13121645
> 
> 赞同：3
> 
> 时间：2012-10-29T12:29:12.523
> 
> 标签：c#, web-applications, asp.net-mvc-4, asp.net-web-api, odata

我的项目是基于 ASP.Net MVC Web API 4 应用程序创建的。如果它的模型具有以下实现：

```
public class BaseEntity
{
    public  object Id {get; set;}
}

public class Entity1 : BaseEntity
{
    public  string Name {get; set;}
} 
```

Wep API 控制器是：

```
public class Entity1Controller : ApiController
{
    ...

    [Queryable]
    public IQueryable<T> Get()
    {
        return repository.Table.AsQueryable();
    }
} 
```

并且 Web API 配置有这个设置：

```
public class WebApiApplication : System.Web.HttpApplication
{
    protected void Application_Start()
    {
        ...

        ODataModelBuilder modelBuilder = new ODataConventionModelBuilder();
        modelBuilder.EntitySet<BaseEntity>("BaseEntity");
        modelBuilder.EntitySet<Entity1>("Entity1");
        IEdmModel model = modelBuilder.GetEdmModel();

        GlobalConfiguration.Configuration.SetEdmModel(model);
    }
} 
```

因此，当在客户端应用程序中生成一个请求时：

```
$.getJSON("api/Entity1?$filter=Id eq '" + id + "'",
function (data) {
        ...
    }); 
```

我的应用程序遇到以下错误：

```
{"Message":"The query specified in the URI is not valid.","ExceptionMessage":"Type 'Entity 1' does not have a property 'Id'."} 
```

为什么 URI 中指定的查询使用 Web API OData 无效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T15:15:20.167

**向 OdataModelBuilder 添加继承支持**

用户现在可以定义抽象实体类型和派生自另一个实体类型的实体类型。OData 不支持复杂类型继承。

此提交仅在模型构建器中添加支持。对 ODataConventionModelBuilder、ODataMediaTypeFormatter 和查询支持的继承支持仍待定。

参考：[http ://aspnetwebstack.codeplex.com/SourceControl/changeset/f4c252a30e68](http://aspnetwebstack.codeplex.com/SourceControl/changeset/f4c252a30e68)

要解决上述问题，请使用以下步骤：

1.  [从http://www.nuget.org/packages/Microsoft.AspNet.WebApi.OData](http://www.nuget.org/packages/Microsoft.AspNet.WebApi.OData)安装 nuget 包 
2.  将 Id 属性的类型更改为字符串（这是因为 OData 中不支持对象类型。您应该将 Id 设置为字符串等 odata 原始类型）。
3.  从 Application_Start 中删除任何配置。
4.  将 config.EnableQuerySupport() 添加到 WebApi.config。

# c++ - 命名空间中的 Doxygen 枚举

> ID：13121647
> 
> 赞同：2
> 
> 时间：2012-10-29T12:29:22.540
> 
> 标签：c++, enums, namespaces, doxygen

我正在写文档哦，这段代码：

```
 namespace A {

    enum ENUM 
    {
        /// \var step to frame
        ENUM_1  = 0,            //!< val1
        ENUM_1  = 1,            //!< val2
        ENUM_2 = 2          //!< val3
    };

} 
```

结果，不显示 ENUM 的注释值。

当我删除命名空间时，一切都很好，但现在不行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T10:54:41.777

You have to use this format:

```
 namespace A {
            /*!
            *  \addtogroup A
            *  @{
            */

            /// step to frame
            enum ENUM 
            {
                    ENUM_1  = 0,            //!< val1
                    ENUM_1  = 1,            //!< val2
                    ENUM_2 = 2          //!< val3
            };

            /*! @} */

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-06T14:08:02.990

This is an old post but for the people like me struggling with global enums, functions, etc. under a namespace here is the simple solution without `\addtogroup`

Just be sure that you add a description for your namespace. With this, even autolinking works flawlessly.

```
/// this the namespace A
namespace A {
    /// step to frame
    enum ENUM 
    {
        ENUM_1 = 0,         //!< val1
        ENUM_1 = 1,         //!< val2
        ENUM_2 = 2          //!< val3
    };
} 
```

For nested namespaces, you should put description for the namespace enclosing your other vars, enums, functions, etc.

```
namespace A {
  /// this the namespace A::B
  namespace B {
    /// step to frame 
    enum ENUM 
    {
        ENUM_1 = 0,         //!< val1
        ENUM_1 = 1,         //!< val2
        ENUM_2 = 2          //!< val3
    };
  }
} 
```

By the way tested in **1.8.7**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T12:36:04.207

您将`enum`文档标题放在 from 位置，它应该直接位于`enum`定义的上方：

```
/// \brief Step to frame
enum ENUM
{
    ...
}; 
```

# vim - 使用回调命令执行搜索和替换

> ID：13121653
> 
> 赞同：2
> 
> 时间：2012-10-29T12:29:38.263
> 
> 标签：vim

我正在尝试在我的文件中搜索和替换所有出现的特定模式，然后调用`toupper()`每个匹配项。在实践中，我不能只用手来做这件事的情况并不多，但我很想提高我的 Vim 技能并找到一种（简单的）方法让 Vim 为我做这件事。我说简单，否则我就忘了。

通过阅读 Vim 帮助`s/`，我应该能够执行以下操作：

```
:%s/\vfunction ([a-z0-9_]+)/\="function " . toupper("\1")/g 
```

（假设我将所有函数定义名称都大写）。

这实际上只是用控制字符替换了函数名称`^A`。如何在正则表达式中引用捕获组？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T12:35:15.840

道歉。我应该更仔细地阅读。无论如何，我会回答我自己的问题，而不是删除它。您需要使用`submatch(n)`来引用捕获组：

```
:%s/\vfunction ([a-z0-9_]+)/\="function " . toupper(submatch(1))/g 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T12:37:58.137

`\U`在替换模式中使用。

```
:%s/\vfunction ([a-z0-9_]+)/function \U\1/ 
```

# asp.net - 自定义 CreateUserWizard

> ID：13121660
> 
> 赞同：2
> 
> 时间：2012-10-29T12:29:55.320
> 
> 标签：asp.net

我正在使用 CreateUserWizard 控件，我想对其进行自定义以满足我的要求。

我的问题是：是否可以使用 CreateUserWizard 控件将电子邮件文本框移动到另一个步骤，然后是**CreateUserWizardStep**步骤？

我想要实现的是从第 1 步获得用户名、密码和 ConfirmPassword，并在第 2 步获得电子邮件、自定义 ConfirmEmail、SecurityQuestion/SecurityAnswer 和其他信息。

我知道如何添加向导步骤，但如果我移动任何默认文本框，我会收到有关 CreateUserWizard 步骤中缺少字段的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T12:49:32.717

我建议你用这个结构测试

```
<asp:CreateUserWizard ID="CreateUserWizard1" runat="server" >
    <WizardSteps>
        <asp:CreateUserWizardStep runat="server">
           .....
        </asp:CreateUserWizardStep> 
        <asp:WizardStep runat="server">
            ...
        </asp:WizardStep>
        <asp:CompleteWizardStep runat="server" />
    </WizardSteps>
</asp:CreateUserWizard> 
```

控制使用`ValidationGroup`属性进行验证，以便在需要时激活验证

链接：http: [//msdn.microsoft.com/fr-fr/library/system.web.ui.webcontrols.button.validationgroup.aspx](http://msdn.microsoft.com/fr-fr/library/system.web.ui.webcontrols.button.validationgroup.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T13:11:22.273

发布问题后，我开始尝试一些我没有想到的替代方案。就像在我有 UserNameTextBox、PasswordTextBox 和 ConfirmPasswordTextBox 的 CreateUserWizard 步骤之上添加一个 WizardStep。

CreateUserWizard 步骤包含一个隐藏的 UserName、Password 和 ConfirmPassword 文本框，我在 ActiveStepChanged 事件中设置了这些值。该步骤还包含其他必填字段以将用户 sich 创建为问题和答案。

这符合我的要求，我是一个快乐的程序员:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-16T10:28:00.203

在这里，我将展示如何自定义创建用户向导 & 我正在使用`Microsoft Visual Studio Express 2013 For Web`

在您的 register.aspx 页面中

```
<asp:CreateUserWizard ID="CreateUserWizard1" runat="server" OnCreatedUser="CreateUserWizard1_CreatedUser" CreateUserButtonText="Submit">
                <WizardSteps>
                    <asp:CreateUserWizardStep ID="CreateUserWizardStep" runat="server">
                        <ContentTemplate>
                            <table>
                                <tr>
                                    <td>User name:
                                    </td>
                                    <td>
                                        <asp:TextBox ID="UserName" runat="server"></asp:TextBox>

                                    </td>
                                </tr>
                                <tr>
                                    <td>Password:
                                    </td>
                                    <td>
                                        <asp:TextBox ID="Password" runat="server" TextMode="Password"></asp:TextBox></td>
                                </tr>
                                <tr>
                                    <td>Confirm Password:</td>
                                    <td><asp:TextBox ID="ConfirmPassword" runat="server" TextMode="Password"></asp:TextBox>
                                    </td>
                                </tr>
                                <tr class="form-group">
                                    <td>E-mail:
                                    </td>
                                    <td >
                                        <asp:TextBox ID="Email" runat="server" TextMode="Email"></asp:TextBox>
                                    </td>
                                </tr>
                                <tr>
                                    <td>First Name:
                                    </td>
                                    <td>
                                        <asp:TextBox ID="FirstName" runat="server"></asp:TextBox>
                                    </td>
                                </tr>
                                <tr>
                                    <td>Last Name:
                                    </td>
                                    <td>
                                        <asp:TextBox ID="LastName" runat="server"></asp:TextBox>

                                    </td>
                                </tr>

                            </table>
                        </ContentTemplate>
                    </asp:CreateUserWizardStep>
                    <asp:CompleteWizardStep runat="server"></asp:CompleteWizardStep>
                </WizardSteps>
            </asp:CreateUserWizard> 
```

Register.aspx.cs`CreateUserWizard1_CreatedUser`文件后面的代码使用此代码

```
 var manager = new UserManager();
        var user = new ApplicationUser() { UserName = CreateUserWizard1.UserName };
        IdentityResult result = manager.Create(user, CreateUserWizard1.Password);
        // Get the UserId of the just-added user
        MembershipUser newUser = Membership.GetUser(CreateUserWizard1.UserName);
        Guid newUserId = (Guid)newUser.ProviderUserKey;
        //Get Profile Data Entered by user in Create User Wizard control
        String FirstName = ((TextBox)CreateUserWizard1.CreateUserStep.ContentTemplateContainer.FindControl("FirstName")).Text;
        String LastName = ((TextBox)CreateUserWizard1.CreateUserStep.ContentTemplateContainer.FindControl("LastName")).Text;
        // Insert a new record into User_Profile
        // Get your Connection String from the web.config. MembershipConnectionString is the name I have in my web.config
        string connectionString = ConfigurationManager.ConnectionStrings["yourConnectionstring"].ConnectionString;
        string insertSql = "INSERT INTO yourDBTableName(dbTcolumn,dbTcolumn, dbTcolumn) values(@dbTcolumn, @dbTcolumn)";

            using (SqlConnection myConnection = new SqlConnection(connectionString))
            {
                IdentityHelper.SignIn(manager, user, isPersistent: false);
                myConnection.Open();
                SqlCommand myCommand = new SqlCommand(insertSql, myConnection);
                myCommand.Parameters.AddWithValue("@dbTcolumn", FirstName);
                myCommand.Parameters.AddWithValue("@dbTcolumn", LastName);
                myCommand.Parameters.AddWithValue("@dbTcolumn", newUserId);
                myCommand.ExecuteNonQuery();
                myConnection.Close();
            } 
```

我不是`using RequiredFieldValidator`。如果你想使用，只需使用 Register.aspx 页面下面的部分

```
<asp:RequiredFieldValidator Display="Dynamic" ID="RequiredFieldValidator4" runat="server"
                                            ControlToValidate="FirstName"  ErrorMessage="The user name field is required." ValidationGroup="CreateUserWizard1"></asp:RequiredFieldValidator> 
```

并在您的 Register.aspx.cs 中 添加`CreateUserWizard1_CreatedUser`代码 我希望这有助于您自定义创建用户向导。 谢谢`if (result.Succeeded)`

# php - 你可以使用 REST API 作为 YII 中传统数据库的替代品吗？

> ID：13121664
> 
> 赞同：1
> 
> 时间：2012-10-29T12:30:06.533
> 
> 标签：php, yii

我知道[YII 支持各种数据库](http://learnyii.blogspot.com/2011/08/yii-php-database-postgres-mysql-sqlite.html)，但是在我正在进行的当前项目中，YII 不会连接到常规数据库。检查用户名是否有效，甚至注册新用户都是通过 REST API 完成的。

作为YII的菜鸟，请帮助我理解：

1.  可以设置 YII 以使用我的自定义休息 api 吗？
2.  如果 $model->validate() 之类的命令不是真正与传统数据库通信，它会起作用吗？

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T13:57:52.127

是的，有一个用于此目的的[活动资源扩展。](http://www.yiiframework.com/extension/activeresource)它的行为类似于传统的活动记录，但它没有使用关系数据库，而是使用了一个安静的端。

# youtube - 通过电子邮件到移动上传地址将视频上传到 YouTube？

> ID：13121665
> 
> 赞同：0
> 
> 时间：2012-10-29T12:30:09.360
> 
> 标签：youtube, youtube-api

YouTube 具有通过电子邮件将视频上传到**您**的**移动**上传地址*（*例如指定和。我的问题是我想在通过电子邮件发送视频时也设置视频。我无法找到任何方法来指定移动上传的关键字。如果这是所有这些信息的任何官方链接，那么请提供给我。`stxxxxwiicv@m.youtube.com`****`Email Subject for video Title``Email message for video description``keywords field`****

 ****谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T15:42:23.877

可在[http://support.google.com/youtube/bin/answer.py?hl=en&answer=57407](http://support.google.com/youtube/bin/answer.py?hl=en&answer=57407)和[http://support.google.com/youtube/bin/answer.py找到有关移动上传的文档?hl=zh&answer=1110304](http://support.google.com/youtube/bin/answer.py?hl=en&answer=1110304)

您无法从电子邮件表单中添加关键字，但您可以从手机浏览器登录 YouTube 并在其中添加关键字。

如果您有支持它的手机，我还建议您考虑使用 YouTube 的其中一个移动应用程序。

[https://itunes.apple.com/app/youtube/id544007664](https://itunes.apple.com/app/youtube/id544007664)

[https://play.google.com/store/apps/details?id=com.google.android.youtube&hl=en](https://play.google.com/store/apps/details?id=com.google.android.youtube&hl=en)

如果您只是想自动化上传过程，请尝试 YouTube 数据 API。[https://developers.google.com/youtube/v3/docs/videos](https://developers.google.com/youtube/v3/docs/videos)****

# javascript - 向单选按钮添加额外事件的主干事件

> ID：13121667
> 
> 赞同：0
> 
> 时间：2012-10-29T12:30:13.633
> 
> 标签：javascript, events, backbone.js, radio

我有一组正在测试的单选按钮，将用于更改主题。Html 代码是直截了当的

```
<div id="options">
    <input type="radio" name="imm" id="themea" value="a" /> Theme 1
    <input type="radio" name="imm" id="themeb"  value="b" /> Theme 2
</div> 
```

当我单击一个单选项目时，第一次围绕以下代码将显示一次警报，第二次显示两次，第三次显示第三次，依此类推。发生了什么事，我想我需要摧毁一些东西，但不确定是什么。

**这是我的主干代码：**

```
events: {
    "click input[type=radio]": "onRadioClick"
},
onRadioClick: function (e) {
    // e.stopPropagation();
    var self = this
    _.bindAll(self)

    $("input:radio[name=imm]").click(function (){
        var somval =  $(this).val();  
        alert(somval)
    }); 
```

**这就是我初始化视图的方式：**

```
initialize: function(state) {
    var self = this
    _.bindAll(self)

    self.state = state
    self.setElement('#options')

    self.elem = {
        imm: self.$el.find('#imm')
    }
} 
```

# .net - 需要简单快速的 FTPS 站点测试

> ID：13121668
> 
> 赞同：0
> 
> 时间：2012-10-29T12:30:13.837
> 
> 标签：.net, windows, ftps

我有一个 FTPS 站点，我需要每晚将文件传输到该站点。我的问题是该站点托管在承包商的站点（承包商 A）上，并且将文件发送到站点的 SSIS 包是由另一个承包商（承包商 B）创建/维护的。

我的问题是文件传输没有发生。我的每个承包商都将问题归咎于对方，而问题由我来确定。承包商 B 说他的 SSIS 包只在白天测试时工作，但在需要时无法在晚上连接。承包商 A 声称 FTPS 站点没有任何变化会导致这种情况。

我可以创建一个 .NET 服务来执行此操作，但希望有一个更简单的解决方案。我打算创建一个 Windows 任务，它每 5 分钟执行一次 bat 文件，并使用 MS ftp 客户端。但是，我无法让它与 FTPS 一起使用。我也无法获取与 url 一起发送的用户名和密码。这里的任何帮助将不胜感激。我整个早上都在谷歌上，发现了多个几乎可以工作的例子，但没有什么能让我一路走好。

任何使用 Explicit FTP over TLS 并允许传递用户名和 pw 的简单命令行测试就足够了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T16:12:15.163

[WinSCP](http://winscp.net/eng/index.php)是[可编写脚本](http://winscp.net/eng/docs/scripting)的，即使对于[FTPS](http://winscp.net/eng/docs/scripting#hostkey)也是如此。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T15:31:43.747

要定期检查服务是否可以访问，一个简单的 telnet 就足够了。你甚至不必说 ftp。如果您真的想上传文件，那么最简单的方法是使用脚本使用的 ftp 命令行客户端。脚本可以是任何语言，没关系。

也可能值得探索[checktls](http://www.checktls.com)服务。它允许测试 tls 连接，您可以一起单击命令列表。在这种情况下，经典的 ftp 命令如 'USER: someone' 和 'PASS: somepass' 等等。

* * *

Filezilla 客户端提供指定显式或隐式 tls 的使用。从[FileZilla Wiki](http://wiki.filezilla-project.org/SSL/TLS#Explicit_vs_Implicit_FTPS)的描述中：

> 显式与隐式 FTPS
> 
> FTPS (SSL/TLS) 以两种不兼容的模式提供服务。如果使用显式 FTPS，客户端连接到普通 FTP 端口并显式切换到具有“AUTH TLS”的安全 (SSL/TLS) 模式，而隐式 FTPS 是一种旧式服务，从一开始就采用 SSL/TLS 模式连接（通常侦听 TCP 端口 990，而不是 21）。在 FileZilla 客户端中，这意味着使用“FTPES://”为主机添加前缀以连接“显式”FTPS 服务器，或为旧版“隐式”服务器添加“FTPS://”（您可能还需要设置端口到 990）。

* * *

这是一个使用 phps cURL 扩展的 cURL 解决方案：

```
// $handle: the file to upload
$handle  = fopen ( $path, 'r' );
// $url: the ftps url to connect to (without credentials)
$url     = sprintf ( 'ftps://%s/%s', $server, $filename ); 
// the ftp connection
$session = curl_init ( ); 
// connection details
curl_setopt ( $curl_session, CURLOPT_URL, $url );
curl_setopt ( $curl_session, CURLOPT_USERPWD, sprintf( '%s:%s', $user, $pass );
curl_setopt ( $curl_session, CURLOPT_SSL_VERIFYPEER, FALSE );
curl_setopt ( $curl_session, CURLOPT_SSL_VERIFYHOST, FALSE );
curl_setopt ( $curl_session, CURLOPT_FTP_SSL, CURLFTPSSL_TRY );
curl_setopt ( $curl_session, CURLOPT_FTPSSLAUTH, CURLFTPAUTH_TLS );
curl_setopt ( $curl_session, CURLOPT_UPLOAD, 1 );
curl_setopt ( $curl_session, CURLOPT_INFILE, $handle );
// execute the connection
$output = curl_exec  ( $session );
// check for errors
$error  = curl_errno ( $session );
// close connection
curl_close ( $session ); 
```

这种方法的优点是：您可以将其自动化。例如，将其称为 cron 作业。

# c# - 任务完成后如何返回数据

> ID：13121673
> 
> 赞同：0
> 
> 时间：2012-10-29T12:30:26.773
> 
> 标签：c#, .net

我开始这样的任务

```
Task.Factory.StartNew(SomeMethod, TaskCreationOptions.LongRunning);

void SomeMethod()
{

} 
```

有没有办法在任务完成时返回数据？

像

```
List<User> SomeMethod()
{
  List<User> = List<User>();
   ...
   return userList;
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-29T12:33:29.490

是的，像这样。通过使用`Task.Factory.StartNew<TResult>(Func<TResult> function)`任务的泛型重载来定义返回类型。然后，`task.Result`您可以访问您的结果。

```
Task<List<User>> task = Task.Factory.StartNew<List<User>>(SomeMethod, TaskCreationOptions.LongRunning);

RunSomeOtherMethod();         // We can do other work in parallel...

List<User> result = task.Result;  // Wait for task to finish and fetch result. 
```

* * *

```
List<User> SomeMethod()
{
  List<User> = List<User>();
   ...
   return userList;
} 
```

* * *

如果您想将一个或多个参数传递给您的函数，请使用 lambda 来启动您的函数：

```
Task<List<User>> task = Task.Factory.StartNew<List<User>>(
    () => SomeMethod("inputString"), //Starting the method using a lambda so you can pass in a parameter.
    TaskCreationOptions.LongRunning
);

RunSomeOtherMethod();         // We can do other work in parallel...

List<User> result = task.Result;  // Wait for task to finish and fetch result. 
```

* * *

```
List<User> SomeMethod(string input)
{
  List<User> = List<User>();
   ...
   return userList;
} 
```

有关线程和任务并行性的更多信息，请参阅在线电子书：[Joseph Albahari 的 C# 中的线程](http://www.albahari.com/threading/part5.aspx#_Task_Parallelism)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T12:34:03.700

您必须使用`Task<TResult>`而不是`Task`.

```
List<User> SomeMethod()
{
  List<User> = List<User>();
   ...
   return userList;
}

var task = Task<List<User>>.Factory.StartNew(SomeMethod, TaskCreationOptions.LongRunning); 
```

然后你可以通过调用 task.Result 得到结果

此外，您可以使用将在结果可用后调用的延续任务。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-06-24T17:40:12.013

在 C# v7 中，Hamlet Hakobyan 和 SynerCoder 提供的语法并不是绝对必要的，因为 .StartNew() 的返回值是根据 SomeMethod 参数自动推断的。

```
List<User> SomeMethod()
{
    List<User> userList = new List<User>();
    return userList;
}
async Task DoWork()
{
    List<User> users = await Task.Factory.StartNew(SomeMethod, TaskCreationOptions.LongRunning);
} 
```

# eclipse-plugin - JSDT 扩展点参考

> ID：13121679
> 
> 赞同：0
> 
> 时间：2012-10-29T12:30:50.703
> 
> 标签：eclipse-plugin, jsdt

我想为eclipse的jsdt插件开发一些扩展。但是我似乎找不到 jsdt 中可用扩展点的详细文档。（类似于 Eclipse 帮助提供了 Eclipse 核心扩展点）。

我在哪里可以找到有关该主题的详细文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T17:11:08.397

您可以在此处找到 JSDT 扩展文档 - [JSDT 帮助](http://help.eclipse.org/juno/nav/24_4)，您可能还想浏览 Eclipse wiki。

# c# - 带有美分的货币输入掩码，用于掩码编辑

> ID：13121681
> 
> 赞同：-1
> 
> 时间：2012-10-29T12:30:54.880
> 
> 标签：c#, winforms

我正在尝试为 Infragistics Ultramaskededit 设置输入掩码。它具有`.Mask`属性（字符串）。我已经尝试过`"999,999.00"`，但这会减少美分，`"###,###.##"`但这会导致异常。

我找到了解决方案-`"#########.##"`这是掩码，`Type`必须将框设置为`double`-一切正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T12:44:12.667

使用此代码：

```
textBox.Mask = "c" 
```

# sublimetext2 - 在 Sublime Text 2 中更改配色方案的键盘快捷键？

> ID：13121687
> 
> 赞同：25
> 
> 时间：2012-10-29T12:31:04.850
> 
> 标签：sublimetext2, sublimetext

有没有办法为 Sublime Text 2 中的特定配色方案分配键盘快捷键？在 Emacs 中，很容易定义一个切换“夜间模式”配色方案并将其分配给键盘快捷键的功能，我想知道您是否也可以在 ST2 中做到这一点。

彼得

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-10-29T12:49:37.733

在您的用户键绑定中尝试这样的事情：

```
{
    "keys": ["YOUR_SHORTCUT"],
    "command": "set_setting",
    "args":
    {
        "setting": "color_scheme",
        "value": "Packages/Color Scheme - Default/Solarized (Light).tmTheme"
    }
} 
```

当然，更改`Packages/Color Scheme - Default/Solarized (Light).tmTheme`为您喜欢的任何主题。

如果您想在两种配色方案之间切换，您可以创建一个插件 ( `Tools/New Plugin...`)：

```
import sublime, sublime_plugin

class ToggleColorSchemeCommand(sublime_plugin.TextCommand):
    def run(self, edit, **args):

        scheme1 = args["color_scheme_1"]
        scheme2 = args["color_scheme_2"]
        current_scheme = self.view.settings().get("color_scheme")

        new_scheme = scheme1 if current_scheme == scheme2 else scheme2
        self.view.settings().set("color_scheme", new_scheme) 
```

并将其保存在您的`Packages/User`目录中。

然后像这样添加一个键绑定：

```
{  
    "keys": ["YOUR_TOGGLE_SHORCUT"], "command": "toggle_color_scheme",
    "args":
    {
        "color_scheme_1": "Packages/Color Scheme - Default/Solarized (Light).tmTheme" ,
        "color_scheme_2": "Packages/Color Scheme - Default/Solarized (Dark).tmTheme"
    }
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-21T16:44:43.833

如果您不想打扰编辑配置文件，您可以安装[SchemeCycle](https://github.com/rrerolle/sublime-scheme-cycler)。

`F8`然后使用和循环配色方案`Shift+F8`。它有 2 个主题（暗/亮）作为切换。

* * *

如果您更喜欢 Command Palette 检查[Norris 的](https://stackoverflow.com/a/14932030/1136008)答案或使用命令尝试[ColorSchemeSelector](https://github.com/jugyo/SublimeColorSchemeSelector)`: Select Color Scheme`，它不会像[Schemr](https://github.com/skt84/Schemr)那样污染您的调色板。

可视化 AKA 屏幕：

![在此处输入图像描述](../Images/2b018321f8b2ff01b418179d8f4742ad.png) ![在此处输入图像描述](../Images/e7114684d1b7d7f00637360624978ec6.png)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-12-11T05:15:58.467

要更改全局配色方案设置（不仅仅是当前视图），请更改 Riccardo 的答案，如下所示：

```
import sublime, sublime_plugin

class ToggleColorSchemeCommand(sublime_plugin.TextCommand):
    def run(self, edit, **args):
        s = sublime.load_settings("Preferences.sublime-settings")

        scheme1 = args["color_scheme_1"]
        scheme2 = args["color_scheme_2"]
        current_scheme = s.get("color_scheme", scheme1)

        new_scheme = scheme1
        if current_scheme == scheme1:
          new_scheme = scheme2

        if current_scheme == scheme2:
         new_scheme = scheme1

        s.set("color_scheme", new_scheme)

        sublime.save_settings("Preferences.sublime-settings") 
```

在使用它之前，请确保您的所有视图都设置为一种配色方案！

无论您的配色方案当前在“Preferences.sublime-settings - User”和“Preferences.sublime-settings - Default”下设置为什么，这都应该有效。

我从 Schemrs 代码中收集了这些信息：[https](https://github.com/benweier/Schemr/blob/master/schemr.py) ://github.com/benweier/Schemr/blob/master/schemr.py 和字体更改代码：“Packages\Default\font.py”

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-02-18T08:21:03.203

我刚刚发现了这个不错的小插件： [https ://github.com/skt84/Schemr](https://github.com/skt84/Schemr)

这并不完全允许您绑定，而是为您提供命令调色板访问权限，这对我来说非常完美。*（以防万一有人像我一样通过谷歌偶然发现这个。）*

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-02-04T12:52:05.867

为了支持多种配色方案，可以像这样改变 Riccardos 的答案：

```
class ToggleColorSchemeCommand(sublime_plugin.TextCommand):
    def run(self, edit, **args):

        scheme1 = args["color_scheme_1"]
        scheme2 = args["color_scheme_2"]
        scheme3 = args["color_scheme_3"]
        current_scheme = self.view.settings().get("color_scheme")

        new_scheme = scheme1
        if current_scheme == scheme1:
          new_scheme = scheme2

        if current_scheme == scheme2:
         new_scheme = scheme3

        self.view.settings().set("color_scheme", new_scheme) 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-05-13T07:10:22.890

有一种方法可以使用[Camaleon 插件](https://github.com/titoBouzout/Camaleon)更改配色方案和主题。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-03-08T12:30:00.897

如果有人感兴趣，我刚刚创建了一个插件来在 N 个不同的主题和配色方案配置之间切换。在这里查看：

[https://gist.github.com/andresbravog/9429793](https://gist.github.com/andresbravog/9429793)

# salesforce - 如何在 SalesForce 中获得新潜在客户的通知？

> ID：13121688
> 
> 赞同：20
> 
> 时间：2012-10-29T12:31:12.873
> 
> 标签：salesforce, webhooks

我想在 Salesforce 中创建新潜在客户时收到通知。Salesforce 中是否有类似 webhook 的东西或其他方式来实现这一点？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-29T15:12:37.417

是的，有很多选择:)

对于 Salesforce 作为参与者：

1.  将在插入潜在客户时触发并向您发送电子邮件（或者如果它用于系统集成 -[出站消息](https://help.salesforce.com/htviewhelpdoc?id=workflow_defining_outbound_messages.htm)）的工作流规则。
2.  您始终可以编写“插入后”Apex 触发器并在其中调用外部系统（支持 SOAP 和 RESTful API）。尽管您需要[@future 注释](https://developer.salesforce.com/docs/atlas.en-us.apexcode.meta/apexcode/apex_classes_annotation_future.htm)，因为默认情况下触发器不应该发送标注（数据库提交/回滚不应该取决于外部系统是否接受了消息）。

对于作为参与者的外部系统：

1.  每隔一段时间简单地轮询一次，比如`[SELECT Id FROM Lead WHERE CreatedDate > :lastTimeIhaveChecked]`
2.  或者最近添加了一个叫做[Streaming API](http://www.salesforce.com/us/developer/docs/api_streaming/index.htm)的东西。基本上，您定义了一个 PushTopic（您感兴趣的查询）。Salesforce 会查看它返回的当前结果，每当结果发生变化时，您都会收到通知。我还没有玩过它，但从文档看来，您可以设置事件类型以仅显示“创建”事件。**这可能最接近 webhook**。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-06-30T22:11:57.090

我讨厌自我推销，但因为有些人可能会认为这是一个有用的答案......我[为 Salesforce 构建了一个 Webhook 创建者](http://www.jamesward.com/2014/06/30/create-webhooks-on-salesforce-com)。它是开源的：[https ://github.com/jamesward/salesforce-webhook-creator](https://github.com/jamesward/salesforce-webhook-creator)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-19T07:52:22.110

这通常涉及编写自己的代码来“订阅”事件、构造消息并将其发送到外部端点。我在[http://beachmonks.com/posts/integrations/salesforce/practical-guide.html](http://beachmonks.com/posts/integrations/salesforce/practical-guide.html)上写了很多关于这个主题的文章。源代码位于：http: [//github.com/beachmonks/choir-salesforce](http://github.com/beachmonks/choir-salesforce)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-24T04:28:41.160

Salesforce does support webhooks, but they are just called by a different name - **Callouts**.

Here's a link to the Developer documentation on the topic:

[Invoking Callouts Using Apex](https://developer.salesforce.com/docs/atlas.en-us.apexcode.meta/apexcode/apex_callouts.htm)

Here's a description of the feature taken directly from the link above:

> An Apex callout enables you to tightly integrate your Apex with an external service by **making a call to an external Web service or sending a HTTP request** from Apex code and then receiving the response. Apex provides integration with Web services that utilize SOAP and WSDL, or HTTP services (RESTful services).

(emphasis added)

This is basically a webhook, commonly defined as "a user-defined callback over HTTP" [2](https://developer.atlassian.com/server/jira/platform/webhooks/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-22T02:24:11.237

还有另一种方法。使用 RoundRobin 逻辑分配新的传入线索。然后创建一个新的 WF 规则，将通知发送给新所有者和管理员或其他任何想要收到通知的人。

# powershell - 针对 Exchange 的远程运行空间连接失败

> ID：13121690
> 
> 赞同：1
> 
> 时间：2012-10-29T12:31:19.493
> 
> 标签：powershell, exchange-server, runspace, winrm

我想通过 C# 远程向 Exchange 服务器发出命令。当我直接通过 PowerShell 执行此操作时，它可以工作。但是当我通过 C# 向 PowerShell 发出命令时，它失败了。

这是我在 PowerShell 中所做的（有效）：

```
$Session = New-PSSession -ConfigurationName Microsoft.Exchange -ConnectionUri http://ExchangeFQDN/PowerShell/ -Authentication Kerberos
Import-PSSession $Session
Enable-Mailbox -Identity "SomeIdentity" -Shared 
```

这是C#（不起作用）：

```
var connectionInfo = new WSManConnectionInfo(
    new Uri("http://ExchangeFQDN/PowerShell/"),
    "http://schemas.microsoft.com/powershell/Microsoft.Exchange", 
    new PSCredential(username, password));
connectionInfo.AuthenticationMechanism = AuthenticationMechanism.Kerberos;

//Next line throws a PSInvalidOperationException
using (var runspace = RunspaceFactory.CreateRunspace(connectionInfo)) //<- fails
{
    //Execute Enable-Mailbox command 
} 
```

我有一个有权执行此远程登录的特定用户。PowerShell 以该用户身份运行，而该用户在 C# 代码中被模拟。这也是我作为 PSCredential 传入的这个用户的用户名和密码。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T14:51:05.357

尝试以下两种可能的解决方案：

1.  检查凭证的用户名、域名和密码
2.  将新的 PSCredential(username, password) 替换为 PSCredential.Empty，它将使用当前用户的凭据，然后以与 powershell 相同的用户身份运行程序

也许您可以提供有关错误消息的更多信息。

# php - 如何使用php连接变量和特殊字符

> ID：13121700
> 
> 赞同：-4
> 
> 时间：2012-10-29T12:32:06.350
> 
> 标签：php

我想连接以下两个变量`$path1`并`$path2`得到`$path`，然后`$path`与`$filename`得到连接`$fullpath`。任何帮助，将不胜感激。

```
$path1="images"  
$path2= "\"    

$path = $path1+$path2

$fullpath=$path + $filename 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T12:34:07.913

```
$path1="images"  
$path2= "\\"    

$path = $path1.$path2

$fullpath=$path.$filename 
```

请记住，您必须转义字符`\`（使用转义字符`\`）。`.`最后，使用运算符执行 PHP 中的字符串连接

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T12:33:40.720

您可以在 php 中使用连接运算符 ('.')。

```
$path1 = "images";  
$path2 = "\";    

$path = $path1.$path2;

$fullpath = $path.$filename; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T12:34:33.667

PHP 使用`.`(dot) 来连接字符串，而不是`+`，所以试试吧。

手册参考： http: [//php.net/manual/en/language.operators.string.php](http://php.net/manual/en/language.operators.string.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T12:34:20.763

您可以使用 dot(.) 在 php 中进行连接，例如

```
$path = $path1.$path2

$fullpath=$path.$filename 
```

# .net - 如何确定String是否仅由数字字符组成？

> ID：13121704
> 
> 赞同：0
> 
> 时间：2012-10-29T12:32:21.340
> 
> 标签：.net, string, numbers

检查 a 是否`String`仅由数字字符组成的最简单方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T12:34:58.007

```
if (Regex.IsMatch(input, "^[0-9]+$"))
    .... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T12:35:50.623

您可以使用[`Char.IsDigit`](http://msdn.microsoft.com/en-us/library/7f0ddtxh.aspx)或[`Char.IsNumber`](http://msdn.microsoft.com/en-us/library/yk2b3t2y.aspx)：

```
var isNumber = str.Length > 0 && str.All(c => Char.IsNumber(c)); 
```

（记得添加`using System.Linq;`for`Enumerable.All`或使用循环代替）

或[`int.TryParse`](http://msdn.microsoft.com/en-us/library/system.int32.tryparse.aspx)改用（或`double.TryParse`等）：

```
bool isNumber = int.TryParse(str, out number); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T13:03:24.217

如果您在几个地方这样做，请向 String 类添加一个扩展方法。

```
namespace System
{
    using System.Text.RegularExpressions;

    public static class StringExtensionMethods()
    {
        public static bool IsNumeric(this string input)
        {
            return Regex.IsMatch(input, "^[0-9]+$");
        }
    }
} 
```

然后你可以像这样使用它：

```
string myText = "123";

if (myText.IsNumeric())
{ 
    // Do something.
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T12:36:58.937

您可以使用正则表达式：

```
[TestCase("1234567890", true)]
[TestCase("1234567890a", false)]
public void NumericTest(string s, bool isnumeric)
{
    var regex = new Regex(@"^\d+$");
    Assert.AreEqual(isnumeric, regex.IsMatch(s));
} 
```

# java - 如果语句不等于

> ID：13121706
> 
> 赞同：4
> 
> 时间：2012-10-29T12:32:38.800
> 
> 标签：java, if-statement

```
import java.util.Scanner;
public class RockPaperScissors
 {
public static void main (String[] args)
{
    Scanner scan = new Scanner (System.in);
    System.out.println("Player 1: Choose rock, paper or scissors: ");
    String Player1 = scan.next().toLowerCase();
    System.out.println("Player 2: Choose rock, paper or scissors: ");
    String Player2 = scan.next().toLowerCase();
    System.out.println ("Player 1 chose " + Player1);
    System.out.println ("Player 2 chose " + Player2);

    if (Player1.!equals("rock" + "paper" + "scissors")
    {
        System.out.println ("Please insert either Rock Paper or Scissors!);
    }
    if (Player1.equals(Player2))
    {
        System.out.println ("Its a tie!");
    }
    if ((Player1.equals("rock")) && (Player2.equals("paper")))
    {
        System.out.println ("Player 2 wins!");
    }
    else if ((Player1.equals("paper")) && (Player2.equals("rock")))
    {
        System.out.println ("Player 1 wins!");
    }
    if ((Player1.equals("scissors")) && (Player2.equals("paper")))
    {
        System.out.println ("Player 1 wins!");
    }
    else if ((Player1.equals("paper")) && (Player2.equals("scissors")))
    {
        System.out.println ("Player 2 wins!");
    }
    if ((Player1.equals("rock")) && (Player2.equals("scissors")))
    {
        System.out.println ("Player 1 wins!");
    }
    else if ((Player1.equals("scissors")) && (Player2.equals("rock")))
    {
        System.out.println ("Player 2 wins!");
    }

} 
```

}

我制作了一个简单的剪刀石头布游戏，但是我想实现验证，以便用户在输入除石头剪刀布以外的任何内容时会收到通知。我试过了，`.!equals`但是我收到一个错误，说是`<identifier>`预期的。

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-29T12:33:58.623

错误的语法：

```
Player1.!equals 
```

改成：

```
!Player1.equals 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-29T12:33:52.013

正确的语法是

```
if (!Player1.equals("rock" + "paper" + "scissors")) 
```

无论如何，这不会满足您的目的，它应该是：

```
if (!Player1.equals("rock") 
    && !Player1.equals("paper") 
    && !Player1.equals("scissors")) 
```

或同等的

```
if (!(Player1.equals("rock")
    || Player1.equals("paper") 
    || Player1.equals("scissors"))) 
```

运算符连接字符串，因此`+`您将`Player1`与`"rockpaperscissors"`

* * *

作为旁注，您应该：

*   尊重 Java 约定，并以小写字母（`player1`而不是`Player1`）开头你的 var 名称
*   将您的固定字符串提取为常量（`private static final String PAPER = "paper";`作为类属性）
*   尽可能调用`.equals()`常量，以避免`NullPointerException`（使用`PAPER.equals(player1)`）

总而言之，您的代码如下所示：

```
if (!ROCK.equals(player1) 
    && !PAPER.equals(player1) 
    && !SCISSORS.equals(player1)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T12:33:50.567

试试这样：

```
 if (!Player1.equals("rock" + "paper" + "scissors")
{
    System.out.println ("Please insert either Rock Paper or Scissors!);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-29T12:35:13.507

你的代码甚至不会编译你需要这样的东西：

```
if (!Player1.equals("rock") && !Player1.equals("paper") && !Player1.equals("scissors")) {
   System.out.println ("Please insert either Rock Paper or Scissors!);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-29T12:36:51.480

除了语法之外，测试在逻辑上也是错误的。这：

```
if (!Player1.equals("rock" + "paper" + "scissors")) { 
```

意思和这个一样：

```
if (!Player1.equals("rockpaperscissors")) { 
```

你真正需要的是这样的：

```
if (!(Player1.equals("rock") || 
      Player1.equals("paper") || 
      Player1.equals("scissors"))) { 
```

......其余的逻辑也有点坏了。

* * *

最后，我应该指出，`Player1`应该`Player2`是`player1`和`player2`分别。变量名不应该以大写字母开头。这是一个很大的文体禁忌。

# c# - 格式双 - 显示零或两位小数

> ID：13121709
> 
> 赞同：1
> 
> 时间：2012-10-29T12:32:44.227
> 
> 标签：c#, string-formatting

我正在使用[标准数字格式字符串](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)和[自定义数字格式字符串](http://msdn.microsoft.com/en-us/library/0c899ak8.aspx)来显示值。

在这种情况下，他们需要以下值：

*   123.0 显示为 123
*   123.4 显示为 123.40
*   123.44 显示为 123.44

也就是说，他们想要显示零或两位小数，而不是 1。

现在我可以通过使用“F0”来解决第一个要求。我可以通过使用自定义数字格式字符串“0.00”来解决第二个要求。第三种情况我可以通过使用“F”（或“F2”）来解决。但在这种情况下，他们希望在同一个地方处理所有三个案例。这是否可以通过使用一些标准或自定义数字格式字符串来实现？还是我需要在这里创建一些特殊处理？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T12:49:44.877

```
Console.WriteLine((d % 1) == 0 ? "{0:F0}" : "{0:F2}", d); 
```

# android - 每天特定时间的通知android

> ID：13121719
> 
> 赞同：8
> 
> 时间：2012-10-29T12:33:14.397
> 
> 标签：android, alarmmanager, android-notifications

我想制作一个应用程序，让用户决定每天什么时候希望他通过通知提醒某些事情......

我想知道我应该如何在用户希望早上 7:00 前的特定时间触发通知，并让他点击通知并在特定活动中输入应用程序。但是，当用户不想再收到任何通知（单击按钮）时，我如何取消所有通知...？

我做了类似的东西

```
Intent intent = new Intent(this, main.class);
Bundle bundle = new Bundle();
bundle.putString("title", "Some Title");\
intent.putExtras(bundle);   
PendingIntent pi = PendingIntent.getActivity(this, 0, intent, 0);
String body = "Tap to see the Activity"; 
String title = "Title of notification"; 
Notification n = new Notification(R.drawable.ic_launcher, body, System.currentTimeMillis());
n.setLatestEventInfo(this, title, body, pi);
n.defaults = Notification.DEFAULT_ALL;
nm.notify(uniqueID, n); 
```

但直到现在还没有运气......

谢谢...

<<>>

我在做这个

```
 String ns = Context.NOTIFICATION_SERVICE;
        NotificationManager mNotificationManager = (NotificationManager) getSystemService(ns);

        int icon = R.drawable.notification_icon;
        CharSequence tickerText = "Ome TickerText"; 
        long when = System.currentTimeMillis();
        Context context = getApplicationContext();
        CharSequence contentTitle = "Some Title"; 
        CharSequence contentText = "Some Text"; 

        Intent notificationIntent = new Intent(context, LandingActivity.class);
        Bundle bundle = new Bundle();
        bundle.putString("title", "a title");
        bundle.putString("title2", "title number 2");
        bundle.putString("action", "tip");
        bundle.putString("greek", "somehting else");
        bundle.putInt("action_num", 2);
        notificationIntent.putExtras(bundle);
        alarmManager = (AlarmManager)getSystemService(ALARM_SERVICE);
        contentIntent = PendingIntent.getActivity(Notifications.this, 0, notificationIntent, 0);

        Notification notification = new Notification(icon, tickerText, when);
        notification.setLatestEventInfo(context, contentTitle, contentText, contentIntent);
        notification.defaults = Notification.DEFAULT_ALL;

        mNotificationManager.notify(UniqueID, notification);

        int hour = tp.getCurrentHour();
        int minutes = tp.getCurrentMinute();

        contentIntent = PendingIntent.getService(Notifications.this, 0, notificationIntent, 0);
        AlarmManager alarmManager = (AlarmManager)getSystemService(ALARM_SERVICE);
        Calendar calendar = Calendar.getInstance();
        calendar.setTimeInMillis(System.currentTimeMillis());
        calendar.set(Calendar.HOUR_OF_DAY, hour);
        calendar.set(Calendar.MINUTE, minutes);
        calendar.set(Calendar.SECOND, 00);
        alarmManager.set(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), contentIntent); 
```

但没有运气...

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-29T12:37:16.390

使用`alarm manager`您的通知并将其放在`NotifyService`课堂上

```
Intent myIntent = new Intent(Current.this , NotifyService.class);     
AlarmManager alarmManager = (AlarmManager)getSystemService(ALARM_SERVICE);
pendingIntent = PendingIntent.getService(ThisApp.this, 0, myIntent, 0);
Calendar calendar = Calendar.getInstance();
calendar.set(Calendar.HOUR_OF_DAY, 12);
calendar.set(Calendar.MINUTE, 00);
calendar.set(Calendar.SECOND, 00);
alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), AlarmManager.INTERVAL_DAY , pendingIntent);  //set repeating every 24 hours 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-04T09:11:14.767

我知道这是一个老问题，但我有类似的要求，这就是我所做的。我发现了当前系统时间和发送通知的预期时间之间的差异，以毫秒为单位，并在 android 服务中实现了一个可运行的。以下代码将出现在 Notifyservice 中。

```
private Handler notificationTimer = new Handler() {
    @Override
    public void handleMessage(Message msg) {
        if(msg.what==0) {
                sendNotifications();
        }
        super.handleMessage(msg);
    }
};
private Runnable notificationCaller = new Runnable() {

    @Override
    public void run() {
        Message msg = notificationTimer.obtainMessage();
        msg.what = 0;
        notificationTimer.sendMessage(msg);
    }
};        

    Calendar calendar = Calendar.getInstance();
    Calendar timefornotification = Calendar.getInstance();
    timefornotification.set(Calendar.HOUR_OF_DAY, 12);
    timefornotification.set(Calendar.MINUTE, 30);
    timefornotification.set(Calendar.SECOND, 00);

    Long difference = calendar.getTimeInMillis() - timefornotification.getTimeInMillis();

    if(difference<0){
        notificationTimer.postDelayed(notificationCaller, -(difference));
    }
    else{
        notificationTimer.postDelayed(notificationCaller, difference);
    }

   public void sendNotifications(){
        ------Your code here-------
        notificationTimer.removeCallbacksAndMessages(null);
        notificationTimer.postDelayed(notificationCaller, 86400000);
        ------86400000 is one day. So it will repeat everyday-------
   } 
```

然后，您可以从主类调用服务以在后台运行它。

```
 Intent service = new Intent(this, NotifyService.class);
    this.startService(service); 
```

# android - 使用 FragmentActivity 创建选项卡的问题

> ID：13121720
> 
> 赞同：1
> 
> 时间：2012-10-29T12:33:14.833
> 
> 标签：android, tabs, android-fragments, classcastexception

这是我的选项卡式屏幕代码：

**CareActivity.xml**

```
import java.util.HashMap;

import android.content.Context;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentTransaction;
import android.view.Menu;
import android.view.View;
import android.widget.TabHost;

public class CareActivity extends FragmentActivity {

    TabHost mTabHost;
    TabManager mTabManager;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_care);
        mTabHost = (TabHost)findViewById(android.R.id.tabhost);
        mTabHost.setup();

        mTabManager = new TabManager(this, mTabHost, R.id.realtabcontent);

        /*TabSpec spec = mTabHost.newTabSpec("ARTICLES").setIndicator("ARTICLES").setContent(new Intent().setClass(this, ListingActivity.class).putExtra("tabId", 0));
        mTabHost.addTab(spec);

        spec = mTabHost.newTabSpec("PRODUCTS").setIndicator("PRODUCTS").setContent(new Intent().setClass(this, ListingActivity.class).putExtra("tabId", 1));
        mTabHost.addTab(spec);*/

        mTabManager.addTab(mTabHost.newTabSpec("articles").setIndicator("ARTICLES"),
                Listing411Activity.class, null);

        mTabManager.addTab(mTabHost.newTabSpec("products").setIndicator("PRODUCTS"),
                Listing411Activity.class, null);

        if (savedInstanceState != null) {
            mTabHost.setCurrentTabByTag(savedInstanceState.getString("tab"));
        }
    }

    @Override
    protected void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        outState.putString("tab", mTabHost.getCurrentTabTag());
    }

    /**
     * This is a helper class that implements a generic mechanism for
     * associating fragments with the tabs in a tab host.  It relies on a
     * trick.  Normally a tab host has a simple API for supplying a View or
     * Intent that each tab will show.  This is not sufficient for switching
     * between fragments.  So instead we make the content part of the tab host
     * 0dp high (it is not shown) and the TabManager supplies its own dummy
     * view to show as the tab content.  It listens to changes in tabs, and takes
     * care of switch to the correct fragment shown in a separate content area
     * whenever the selected tab changes.
     */
    public static class TabManager implements TabHost.OnTabChangeListener {
        private final FragmentActivity mActivity;
        private final TabHost mTabHost;
        private final int mContainerId;
        private final HashMap<String, TabInfo> mTabs = new HashMap<String, TabInfo>();
        TabInfo mLastTab;

        static final class TabInfo {
            private final String tag;
            private final Class<?> clss;
            private final Bundle args;
            private Fragment fragment;

            TabInfo(String _tag, Class<?> _class, Bundle _args) {
                tag = _tag;
                clss = _class;
                args = _args;
            }
        }

        static class DummyTabFactory implements TabHost.TabContentFactory {
            private final Context mContext;

            public DummyTabFactory(Context context) {
                mContext = context;
            }

            @Override
            public View createTabContent(String tag) {
                View v = new View(mContext);
                v.setMinimumWidth(0);
                v.setMinimumHeight(0);
                return v;
            }
        }

        public TabManager(FragmentActivity activity, TabHost tabHost, int containerId) {
            mActivity = activity;
            mTabHost = tabHost;
            mContainerId = containerId;
            mTabHost.setOnTabChangedListener(this);
        }

        public void addTab(TabHost.TabSpec tabSpec, Class<?> clss, Bundle args) {
            tabSpec.setContent(new DummyTabFactory(mActivity));
            String tag = tabSpec.getTag();

            TabInfo info = new TabInfo(tag, clss, args);

            // Check to see if we already have a fragment for this tab, probably
            // from a previously saved state.  If so, deactivate it, because our
            // initial state is that a tab isn't shown.
            info.fragment = mActivity.getSupportFragmentManager().findFragmentByTag(tag);
            if (info.fragment != null && !info.fragment.isDetached()) {
                FragmentTransaction ft = mActivity.getSupportFragmentManager().beginTransaction();
                ft.detach(info.fragment);
                ft.commit();
            }

            mTabs.put(tag, info);
            mTabHost.addTab(tabSpec);
        }

        @Override
        public void onTabChanged(String tabId) {
            TabInfo newTab = mTabs.get(tabId);
            if (mLastTab != newTab) {
                FragmentTransaction ft = mActivity.getSupportFragmentManager().beginTransaction();
                if (mLastTab != null) {
                    if (mLastTab.fragment != null) {
                        ft.detach(mLastTab.fragment);
                    }
                }
                if (newTab != null) {
                    if (newTab.fragment == null) {
                        newTab.fragment = Fragment.instantiate(mActivity,
                                newTab.clss.getName(), newTab.args);
                        ft.add(mContainerId, newTab.fragment, newTab.tag);
                    } else {
                        ft.attach(newTab.fragment);
                    }
                }

                mLastTab = newTab;
                ft.commit();
                mActivity.getSupportFragmentManager().executePendingTransactions();
            }
        }
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_care411, menu);
        return true;
    }

} 
```

**active_care.xml**

```
<TabHost
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <LinearLayout
        android:orientation="vertical"
        android:layout_width="match_parent"
        android:layout_height="match_parent">

        <TabWidget
            android:id="@android:id/tabs"
            android:orientation="horizontal"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="0"/>

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:layout_weight="0"/>

        <FrameLayout
            android:id="@+android:id/realtabcontent"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="1"/>

    </LinearLayout>
</TabHost> 
```

**清单活动.java**

```
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.view.Menu;

public class ListingActivity extends FragmentActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_listing411);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_listing411, menu);
        return true;
    }

} 
```

它给出了 ClassCastException。这是日志猫：

```
10-29 17:52:18.706: E/AndroidRuntime(495): FATAL EXCEPTION: main
10-29 17:52:18.706: E/AndroidRuntime(495): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.jjwoundcare.main/com.jjwoundcare.main.CareActivity}: java.lang.ClassCastException: com.jjwoundcare.main.ListingActivity
10-29 17:52:18.706: E/AndroidRuntime(495):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
10-29 17:52:18.706: E/AndroidRuntime(495):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
10-29 17:52:18.706: E/AndroidRuntime(495):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
10-29 17:52:18.706: E/AndroidRuntime(495):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
10-29 17:52:18.706: E/AndroidRuntime(495):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-29 17:52:18.706: E/AndroidRuntime(495):  at android.os.Looper.loop(Looper.java:123)
10-29 17:52:18.706: E/AndroidRuntime(495):  at android.app.ActivityThread.main(ActivityThread.java:3683)
10-29 17:52:18.706: E/AndroidRuntime(495):  at java.lang.reflect.Method.invokeNative(Native Method)
10-29 17:52:18.706: E/AndroidRuntime(495):  at java.lang.reflect.Method.invoke(Method.java:507)
10-29 17:52:18.706: E/AndroidRuntime(495):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
10-29 17:52:18.706: E/AndroidRuntime(495):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
10-29 17:52:18.706: E/AndroidRuntime(495):  at dalvik.system.NativeStart.main(Native Method)
10-29 17:52:18.706: E/AndroidRuntime(495): Caused by: java.lang.ClassCastException: com.jjwoundcare.main.ListingActivity
10-29 17:52:18.706: E/AndroidRuntime(495):  at android.support.v4.app.Fragment.instantiate(Fragment.java:388)
10-29 17:52:18.706: E/AndroidRuntime(495):  at com.jjwoundcare.main.CareActivity$TabManager.onTabChanged(CareActivity.java:138)
10-29 17:52:18.706: E/AndroidRuntime(495):  at android.widget.TabHost.invokeOnTabChangeListener(TabHost.java:359)
10-29 17:52:18.706: E/AndroidRuntime(495):  at android.widget.TabHost.setCurrentTab(TabHost.java:344)
10-29 17:52:18.706: E/AndroidRuntime(495):  at android.widget.TabHost.addTab(TabHost.java:216)
10-29 17:52:18.706: E/AndroidRuntime(495):  at com.jjwoundcare.main.CareActivity$TabManager.addTab(CareActivity.java:123)
10-29 17:52:18.706: E/AndroidRuntime(495):  at com.jjwoundcare.main.CareActivity.onCreate(CareActivity.java:35)
10-29 17:52:18.706: E/AndroidRuntime(495):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
10-29 17:52:18.706: E/AndroidRuntime(495):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611) 
```

我的代码中的问题在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T21:31:31.147

**ListingActivity.java**应该由**Fragment扩展**

```
public class FirstFragment extends Fragment{

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
         return inflater.inflate(R.layout.fragment1, container,false);
    }
} 
```

**片段1.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <Button
        android:id="@+id/button1"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="fregment2" />

</LinearLayout> 
```

# java - 什么是 Java 的高效行列（类似结果集）数据结构？

> ID：13121730
> 
> 赞同：1
> 
> 时间：2012-10-29T12:33:47.927
> 
> 标签：java, data-structures

> **可能重复：**
> [类似于 java 数据结构的表](https://stackoverflow.com/questions/1691664/table-like-java-data-structure)

我正在为 Java 寻找类似表的数据结构。到目前为止，我还没有找到一个，这真的很令人沮丧，因为我知道肯定有一个。请注意，这与表格的图形表示无关，只是逻辑模型。

这个想法很简单，你有一个像这样的表：

```
+-------+-----+-----------+
| Name  | Age | city      |
+-------+-----+-----------+
| Steve | 21  | London    |
| John  | 40  | Amsterdam | 
+-------+-----+-----------+ 
```

现在我需要遍历不同的行并根据列名检索值。它必须灵活，所以我不知道前面的列名（所以不能选择 bean 列表）。我能找到的具有此功能的最佳结构是*java.sql.ResultSet*，但在非 SQL 相关的上下文中使用它时我感觉不舒服。我也不想要一个 HashMaps 列表，因为这意味着存储每一行​​的键，这将是非常低效的。

它似乎是一个基本结构，但由于在 Java 中搜索类似表的结构时，大量与 GUI 相关的帖子，我找不到任何关于它的信息。

**编辑**

对于我需要的具体示例，以下代码：

```
TableStructure table = getTable(); // Gets my desired table with its filling

while (table.next()){
    System.out.println("Name: " +  table.get("Name"));
    System.out.println("Age: " + table.get("Age"));
    System.out.println("City: " + table.get("City"));
    System.out.println("NonExistent: " + table.get("NonExistent"));
} 
```

应该产生以下输出：

```
Name: Steve
Age: 21
City: London
NonExistent: null
Name: John
Age: 40
City: Amsterdam
NonExistent: null 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T13:24:15.653

A`ResultSet`是元组的列表（或集合，取决于排序的必要性和元素的多样性），所以一个*真正*通用的答案是

```
class TableStructure<Tuple>
{
    List<Tuple> tuples;
    Iterator iterator;

    public Tuple next() 
    {
        if ( iterator == null ) { iterator = tuples.iterator(); /* NPE prone */ }
        return iterator.next()
    }
} 
```

（或者更好的是，`TableStructure`扩展 `List`并直接使用迭代器）

在哪里

```
class Tuple { Map<String,Object> attributes; } 
```

此构造允许表中的不同行大小，这在 DB 设置中违反了第一个（或第二个？）范式原则。

希望有点帮助。

干杯，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T12:37:39.830

一个`List<Map<String, ?>>`呢？对于具体的实现，您可以使用`ArrayList<HashMap<String, Object>>`.

# mysql - MySQL Query：将整个表中的 max(Date) 写入每一行

> ID：13121742
> 
> 赞同：0
> 
> 时间：2012-10-29T12:34:07.973
> 
> 标签：mysql, sql, date, max

我需要为我的整个表格找到 max(n.LastEdited) （最新编辑日期）并将其写在每一行上。

是）我有的：

```
SELECT n.ID,
n.Title,
n.News,
(SELECT max(n.LastEdited)) AS NewsLastEdited
FROM News AS n
ORDER BY n.ID DESC
LIMIT 0,20 
```

我得到的（不显示 ID、标题、新闻……）：

```
NewsLastEdited
2012-10-25 10:54:24
2012-10-25 10:54:12
2012-10-25 10:54:02 
```

我想要的是：

```
NewsLastEdited
2012-10-25 10:54:24
2012-10-25 10:54:24
2012-10-25 10:54:24 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T12:36:50.557

```
SELECT  n.*
FROM    news n
        INNER JOIN
        (
            SELECT  ID, Max(LastEdited) lastEdit
            FROM news
            GROUP BY ID
        ) x ON n.ID = x.ID AND 
               n.LastEdited = x.LastEdit
-- WHERE ...
-- ORDER BY ...
-- LIMIT ... 
```

# html - Twig 将“%0A”添加到图像路径（电子邮件模板）

> ID：13121744
> 
> 赞同：0
> 
> 时间：2012-10-29T12:34:09.413
> 
> 标签：html, templates, twig

我对部分通过 twig 生成的一些图像 url 有问题。这是我目前的做法：

```
{% autoescape false %}
{% set imageurl %}
http://www.someurl.com/mails/images/emails
{% endset %}
{% endautoescape %} 
```

这就是我在模板本身中使用它的方式：

```
{{imageurl}}/spacer.gif 
```

现在的问题是，由于 url 中的“%0A”，这些图像无法在最终电子邮件中正确显示。它看起来像这样：

```
/emails%0A/spacer.gif 
```

我不知道是什么导致了这个问题，也许你们可以帮助我..

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T12:43:14.387

`%0A`是[换行符](http://en.wikipedia.org/wiki/Line_Feed)。由于 . 之后的换行符，它被附加`.../emails`。

要么在一行中设置变量：

```
{% set imageurl %}http://www.someurl.com/mails/images/emails{% endset %} 
```

或者使用 Twig 的[标签级空白控件](http://twig.sensiolabs.org/doc/templates.html#whitespace-control)：

```
{%- set imageurl -%}
http://www.someurl.com/mails/images/emails
{%- endset -%} 
```

# c# - 将xml节点的属性反序列化为类

> ID：13121745
> 
> 赞同：1
> 
> 时间：2012-10-29T12:34:17.843
> 
> 标签：c#, .net, xml, xml-deserialization

我有两个看起来像这样的类：

```
[XmlRoot("Foo")]
public class Foo
{
    [XmlArray("BarResponse")]
    [XmlArrayItem("Bar")]
    public List<Bar> bar {get; set;}
    //some other elements go here.
}

[XmlRoot("Bar")]
public class Bar
{
    [XmlAttribute("id")]
    public Int32 Id {get; set;}
    //some other elements go here.
} 
```

我收到的 xml 如下所示：

```
<?xml version="1.0"?>
<Foo>
    <BarResponse>
        <Bar id="0" />
        <Bar id="1" />
    </BarResponse>
</Foo> 
```

当我尝试反序列化时，我得到一个“Foo”类的实例，并且 bar 中有一个元素，它的所有属性都为 null 或默认值。我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T12:50:24.063

试试这个：

```
[TestFixture]
public class BilldrTest
{
    [Test]
    public void SerializeDeserializeTest()
    {
        var foo = new Foo();
        foo.Bars.Add(new Bar { Id = 1 });
        foo.Bars.Add(new Bar { Id = 2 });
        var xmlSerializer = new XmlSerializer(typeof (Foo));
        var stringBuilder = new StringBuilder();
        using (var stringWriter = new StringWriter(stringBuilder))
        {
            xmlSerializer.Serialize(stringWriter, foo);
        }
        string s = stringBuilder.ToString();
        Foo deserialized;
        using (var stringReader = new StringReader(s))
        {
            deserialized = (Foo) xmlSerializer.Deserialize(stringReader);
        }
        Assert.AreEqual(2,deserialized.Bars.Count);
    }
}

[XmlRoot("Foo")]
public class Foo
{
    public Foo()
    {
        Bars= new List<Bar>();
    }
    [XmlArray("BarResponses")]
    [XmlArrayItem(typeof(Bar))]
    public List<Bar> Bars { get; set; }
    //some other elements go here.
}

[XmlRoot("Bar")]
public class Bar
{
    [XmlAttribute("id")]
    public Int32 Id { get; set; }
    //some other elements go here.
} 
```

*   [您可以在此处](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlattributes.xmlroot.aspx)找到有关使用 XmlRoot 的信息
*   如果您希望数组包含不同的类型，则使用[ArrayItemAttribute](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlattributes.xmlarrayitems.aspx)

除了 [XmlAttribute("id")] 之外，您会得到相同的结果，除掉 [XmlAttribute("id")] 之外的所有属性，但我想这是从上下文中摘录的，这一切都是合理的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T13:17:02.633

您需要为`Foo`实例化您的`List<Bar>`.

```
[Serializable]
public class Foo
{
    public Foo()
    {
        Bar = new List<Bar>();
    }

    [XmlArray("BarResponse")]
    [XmlArrayItem("Bar")]
    public List<Bar> Bar { get; set; }
}

[Serializable]
public class Bar
{
    [XmlAttribute("id")]
    public Int32 Id { get; set; }
} 
```

将 xml 写入/读取为：

```
<?xml version="1.0" encoding="utf-8"?>
<Foo xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <BarResponse>
    <Bar id="0" />
    <Bar id="1" />
  </BarResponse>
</Foo> 
```

# jboss7.x - arquillian warp 超时而不是执行 AfterPhase（或 AfterServlet、BeforePhase 或 BeforeServlet）

> ID：13121748
> 
> 赞同：0
> 
> 时间：2012-10-29T12:34:26.837
> 
> 标签：jboss7.x, selenium-webdriver, jboss-arquillian

我刚刚开始使用 Arquillian Warp，似乎遇到了一个绊脚石。

我有一个注册页面的基本 UI 测试

```
@WarpTest
@RunWith(Arquillian.class)
public class TestProfileEdit extends AbstractUsersTest {

@Drone
FirefoxDriver browser;

@Page
EditProfilePage editProfilePage;

@Page
LoginPage loginPage;

@ArquillianResource
private URL baseURL;

@Deployment
public static Archive<?> createLoginDeployment() throws IOException {
      // trimmed for brevity
}

@Before
public void setup() throws MalformedURLException{

    final URL loginURL = new URL(baseURL, "login.jsf");
    browser.navigate().to(loginURL);
    loginPage.login("test@domain.com", "password");

    final URL pageURL = new URL(baseURL, "profile/edit.jsf");
    System.out.println(pageURL.toExternalForm());
    browser.navigate().to(pageURL);

}

@After
public void tearDown() {
    browser.manage().deleteAllCookies();
}

@Test
@RunAsClient
public void testSaveData() {

    editProfilePage.getDialog().setFirstName("Test First Name");

    Warp.execute(new ClientAction() {

        @Override
        public void action() {
            editProfilePage.getDialog().save();
        }
    }).verify(new TestProfileOnServer());

}

@SuppressWarnings("serial")
public static class TestProfileOnServer extends ServerAssertion {

    @Inject
    private EntityManager em;

    @Inject
    private Identity identity;

    @Inject
    Credentials credentials;

    @AfterPhase(Phase.RENDER_RESPONSE)
    public void testSavedUserProfile()  {

        System.out.println("RUNNING TEST");

        String username = identity.getUser().getId();

        TypedQuery<UserProfile> q = em.createQuery(
                "SELECT u from UserProfile u where u.userIdentity.name like :username", UserProfile.class);

        UserProfile p;
        p = q.setParameter("username", username).getSingleResult();

        assertEquals("Test First Name", p.getFirstName());
    }

}

} 
```

我已经尝试了 testSavedUserProfile() 方法的各种组合，但绝对没有运气触发它。

测试总是以

```
java.lang.IllegalStateException: java.util.concurrent.ExecutionException: org.jboss.arquillian.warp.client.execution.AssertionHolder$ServerResponseTimeoutException 
```

我可以在打开的 firefox 窗口上看到页面被正确发布和重定向。我试图让它不重定向等，但没有任何帮助。

我觉得我缺少一些基本而简单的东西，但不知道是什么！

非常感谢任何帮助。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T18:07:45.087

我最近遇到了 Arquillian Warp 的类似问题。

我的代码没有被调用的原因之一是 Arquillian 仅将 server-sde servlet 过滤器合并到 Web 存档 (WAR) 部署中。EAR 和 JAR 部署都不是现成的。

对于我的具体问题（EAR 部署），我修改了测试类，在组装经过测试的 WAR 时，我自己在 Arquillian 过滤器中合并，然后将其打包到 EAR 部署中。

我遇到的另一个问题是 AfterServlet 事件根本没有在单元测试执行范围内触发，而是作为 servlet 过滤器清理代码的一部分。我相信这个逻辑完全被打破了，我构建了一个 servlet 过滤器的私有分支，恕我直言，它正在正确处理逻辑。

# html - CSS 不适用于 IE<8

> ID：13121766
> 
> 赞同：0
> 
> 时间：2012-10-29T12:35:18.953
> 
> 标签：html, css, internet-explorer

```
.csstdhighlight
{
    border-left-color: Red;
    border-right-color: Red;
    border-bottom-color: Red;
    border-top-color: Red;
    border-style: solid;
    border-width: 1px;
    background-color: White;
}
<html>
<body>
<style type="text/css" media="screen">
    .csstdhighlight
    {
        border:1px solid red;
        background-color: White;
    }
</style>
<table>
    <tr>
        <td class="csstdhighlight">foo</td>
        <td>bar</td>
    </tr>
</table>
</body>
</html> 
```

我将边框应用于表格单元格，但 CSS 不适用于早于 8 的 IE 版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T12:52:00.620

这在 IE 6/7 中适用于我：

```
<html>
<body>
<style type="text/css" media="screen">
    .csstdhighlight
    {
        border:1px solid red;
        background-color: White;
    }
</style>
<table>
    <tr>
        <td class="csstdhighlight">foo</td>
        <td>bar</td>
    </tr>
</table>
</body>
</html> 
```

“foo”周围的表格单元格有一个红色边框。[http://jsfiddle.net/rUcnv/](http://jsfiddle.net/rUcnv/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T13:48:55.397

您的 CSS 没有任何问题，这里的问题是您的表格单元格没有内容。在 IE7 中不存在空表格单元格，这意味着不会呈现边框样式。

[在此处](https://stackoverflow.com/questions/57002/css-to-make-an-empty-cells-border-appear)查看有关空单元格的相关主题。

# ruby - Watir 平等测试

> ID：13121769
> 
> 赞同：3
> 
> 时间：2012-10-29T12:35:37.783
> 
> 标签：ruby, cucumber, watir

进行 Cucumber/Watir 测试以测试图像旋转器/循环是否正常工作。我的策略是通过 css 类抓取旋转器中的活动图像并将其转储到变量中。然后我单击下一个按钮并通过 css 类在旋转器中抓取活动图像（现在应该是新图像）并将其转储到第二个变量中。然后我应该可以说 img_rot_1 != img_rot_2 并让测试返回真或假。这是我遇到麻烦的部分。

我是 Ruby 新手，所以我可能会遗漏一些简单的东西。这是测试。

```
require 'step_definition/setup'

test_setup = Wsetup.new 'http://loginurl', 'uname', 'pass' # browser object created here as # test_setup.b
img_rot_1 = String.new
img_rot_2 = String.new 

When /^I click the next image button$/ do
  test_setup.do_login
  test_setup.b.goto('http://psu.dev1.fayze2.com/node/56')
  img_rot_1  = test_setup.b.li(:class => 'flex-active-slide').img.src
  test_setup.b.link(:class => 'flex-next').click
end

Then /^the rotator should move to the next image$/ do
  img_rot_2  = test_setup.b.li(:class => 'flex-active-slide').img.src
  img_rot_1 != img_rot_2
end 
```

img_rot_1 != img_rot_2 和 img_rot_1 == img_rot_2 都通过了 - 那么我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T14:13:49.917

我认为如果要访问在另一步骤中创建的变量，则必须使用实例变量。

就像是：

```
When /^I click the next image button$/ do
  # more code here
  @img_rot_1  = test_setup.b.li(:class => 'flex-active-slide').img.src
end

Then /^the rotator should move to the next image$/ do
  img_rot_2  = test_setup.b.li(:class => 'flex-active-slide').img.src
  @img_rot_1.should_not == img_rot_2
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T13:30:51.960

对于`Then`失败的步骤，它需要一个失败的断言，而不仅仅是一个评估为假的语句。

假设您使用的是 RSpec 期望值，您可能需要如下内容：

```
img_rot_1.should_not eq(img_rot_2) 
```

# android - 从数据库缓存小位图

> ID：13121771
> 
> 赞同：1
> 
> 时间：2012-10-29T12:35:39.567
> 
> 标签：android, android-sqlite, android-lru-cache

当我的应用程序连接到服务器时，我会检查哪些图标已过时或丢失。
我将这些图标存储在 sqllite 数据库中，图标不是很大，大约在 5-10kb 之间。

每次活动开始时，我都会去数据库并获取必要的图标。

但是我的许多活动都使用相同的图标，所以我想从数据库中获取它们一次，然后将它们缓存在某个地方以加快我的应用程序。

我该怎么做？

我正在阅读此链接： http: [//developer.android.com/training/displaying-bitmaps/cache-bitmap.html](http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html)，他们提到了用于位图的 lruCache。

但这对我想要实现的目标来说是不是有点矫枉过正？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T12:50:19.520

绝对没有。LruCache 是缓存内容的正确方法，它与图像的大小无关。请记住将缓存创建为单个元素，以供整个应用程序上的任何元素平等访问。

不要像某些人建议的那样使用弱引用。它们在 Android 上不能很好地工作，如果你有搜索的心情，你可以查看 YouTube 上的 Google IO 2012 谈话，Android 团队自己正在解释为什么不使用 Wea​​kReference 以及如何正确使用 LruCache。

**编辑**

找到了 youtube 链接 [http://www.youtube.com/watch?v=gbQb1PVjfqM&feature=plcp](http://www.youtube.com/watch?v=gbQb1PVjfqM&feature=plcp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T13:04:59.500

您的问题听起来不像是在问如何进行内存缓存，而是在问这样做是否合理。应用程序是否已经觉得图标加载是一个瓶颈？您的应用程序还在做什么？也许是一些网络？有多少活动（在所有活动中）实际上有一些图标？每个活动有多少个图标？总共有多少个图标？从@Budius 帖子中猜测，在 Android 上正确执行内存缓存并不是完全简单的问题，因此请确保您没有进行不合理的*过早优化*

# r - 在R中获取与上一个日期的差异

> ID：13121772
> 
> 赞同：2
> 
> 时间：2012-10-29T12:35:49.170
> 
> 标签：r

我有一个交易日和市场价值的交易清单。每个（交易）日都有新头寸进入列表，但旧头寸永远不会消失（当头寸到期时，价值保持不变）。该列表如下所示：

```
Deal Trade_Date MktValue Desidered_Col
Deal1 31.08.2012 10 +10
Deal2 31.08.2012 21 +21
Deal1 03.09.2012 12 +2
Deal2 03.09.2012 19 -2
Deal3 03.09.2012 2  +2 
```

我希望每笔交易都能获得与前一个交易日期的差额（上例中的 Desidered_Col）。我想避免循环只是因为我的列表很长。我正在使用 R。如果有人有任何建议，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T12:49:26.410

用于`data.table`大数据集：

```
df <- read.table(text="Deal Trade_Date MktValue Desidered_Col
Deal1 31.08.2012 10 +10
Deal2 31.08.2012 21 +21
Deal1 03.09.2012 12 +2
Deal2 03.09.2012 19 -2
Deal3 03.09.2012 2  +2",header=TRUE)

library(data.table)
dt <- as.data.table(df)

diff.padded <- function(x) c(x[1],diff(x))

dt[,Desidered_Col2:=diff.padded(MktValue),by=Deal]

#    Deal Trade_Date MktValue Desidered_Col Desidered_Col2
#1: Deal1 31.08.2012       10            10             10
#2: Deal2 31.08.2012       21            21             21
#3: Deal1 03.09.2012       12             2              2
#4: Deal2 03.09.2012       19            -2             -2
#5: Deal3 03.09.2012        2             2              2 
```

# sql - 在单行中获取不同的列值

> ID：13121775
> 
> 赞同：4
> 
> 时间：2012-10-29T12:35:59.983
> 
> 标签：sql, oracle, oracle10g, pivot, unpivot

这是数据：

```
id    name     period      data1    data2
===================================================
111   name1    monthly     aaaaa    bbbbb
111   name1    quaterly    ccccc    ddddd
111   name1    halfYearly  eeeee    fffff
111   name1    annually    ggggg    hhhhh 
```

我想要在单行中获取数据的查询，例如

```
id    name     monthlYdata1    monthlYdata2      quaterlydata1    quaterlydata2      halfYearlydata1    halfYearlydata2      annuallydata1    annuallydata2
==========================================================================================================================================================
111   name1    aaaaa           bbbbb             ccccc            ddddd              eeeee              fffff                ggggg            hhhhh 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-29T13:03:16.350

您没有指定您正在使用什么 RDBMS，但是，这将适用于所有这些：

```
select id,
  name,
  max(case when period = 'monthly' then data1 end) as MonthlyData1,
  max(case when period = 'monthly' then data2 end) as MonthlyData2,
  max(case when period = 'quaterly' then data1 end) as quarterlyData1,
  max(case when period = 'quaterly' then data2 end) as quarterlyData2,
  max(case when period = 'halfYearly' then data1 end) as halfYearlyData1,
  max(case when period = 'halfYearly' then data2 end) as halfYearlyData2,
  max(case when period = 'annually' then data1 end) as annuallyData1,
  max(case when period = 'annually' then data2 end) as annuallyData2
from yourtable
group by id, name 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/211ad/1)

如果您使用的是具有`PIVOT`函数的 RDBMS，那么您可以执行以下操作，同时使用`UNPIVOT`和`PIVOT`来生成结果。正如 Andriy M 指出的那样，`UNPIVOT`假设两者的数据类型`data1`和`data2`是相同的类型，如果不是，则需要对`UNPIVOT`数据进行转换：

**甲骨文 11g：**

```
select *
from
(
  select id, name, value, 
    period||data new_col
  from yourtable
  unpivot
  (
    value for data in (data1, data2)
  ) u
) x
pivot
(
  max(value)
  for new_col in ('monthlyDATA1', 'monthlyDATA2',
                  'quaterlyDATA1', 'quaterlyDATA2',
                  'halfYearlyDATA1', 'halfYearlyDATA2',
                  'annuallyDATA1', 'annuallyDATA2')
) p 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!4/5a8e7/5)

**SQL 服务器：**

```
select *
from
(
  select id, name, value, 
    period+data new_col
  from yourtable
  unpivot
  (
    value for data in (data1, data2)
  ) u
) x
pivot
(
  max(value)
  for new_col in ('monthlyDATA1', 'monthlyDATA2',
                  'quaterlyDATA1', 'quaterlyDATA2',
                  'halfYearlyDATA1', 'halfYearlyDATA2',
                  'annuallyDATA1', 'annuallyDATA2')
) p 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T12:39:50.340

从查询本身获取数据。

**从 query1 中获取 id 和 name，并使用从 query1 中获取的 id 将该查询与月度、季度和年度数据连接起来**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T12:57:16.500

**三篇使用完整文章回答您的问题：**

[如何在 MySQL 中将行显示为列？](https://stackoverflow.com/questions/7888631/how-to-display-rows-as-columns-in-mysql)

[如何旋转 MySQL 实体-属性-值模式](https://stackoverflow.com/questions/649802/how-to-pivot-a-mysql-entity-attribute-value-schema)

[http://forums.mysql.com/read.php?20,75357,75357#msg-75357](http://forums.mysql.com/read.php?20,75357,75357#msg-75357)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T12:58:02.213

首先，您应该将所有不同的 id 检索到临时表中。

```
Select DISTINCT id
into #tmpIds
from Table 
```

然后使用您想要的列（`id`, `name`, `monthlYdata1`, `monthlYdata2`, `quaterlydata1`, `quaterlydata2`, `halfYearlydata1`, `halfYearlydata2`, `annuallydata1`, `annuallydata2`）创建一个临时表，并遍历您的第一个临时表以获取 id。

对于每个 id，您应该执行以下操作：

```
Insert into #tmpTable
   @id,
   '',
  (Select data1 from Table where id=@id and period='monthly') as monthlyData1
  ... 
```

这是我想到的第一个解决方案。

# c++ - 你能看到我的未定义标识符错误来自哪里吗？

> ID：13121777
> 
> 赞同：0
> 
> 时间：2012-10-29T12:36:04.523
> 
> 标签：c++

我有一个结构“GLpoint”，在我的 NormalCalculator.h 中定义。出于某种原因，当我在 .cpp 文件中定义一个返回 GLpoint 的函数时，红色波浪线告诉我“标识符 GLpoint 未定义”。从字面上看，函数的返回类型。发生这种情况的功能是：

`GLpoint NormalCalculator::computeFaceNormal(GLface faceToNormal)`

错误日志还告诉我缺少“；” 在函数定义之前。我看不出其中任何一个是从哪里来的。特别是在 computeFaceNormals 定义之前发生的最后一件事是

```
else return false; 
```

代码可以在下面找到。

正常计算器.h

```
#pragma once

#include <vector>
#include <GL/glut.h>

class NormalCalculator
{

struct GLpoint
{
    GLfloat x,y,z;
};

struct GLface
{
    GLfloat x1,y1,z1,x2,y2,z2,x3,y3,z3;
};

public:
    NormalCalculator(void);
    ~NormalCalculator(void);
    //put all of the face normal functions together 
    void generateFaceNormals(std::vector<GLfloat>* vertexArray, std::vector<GLubyte>* indexArray, std::vector<GLfloat>* normalArray);

private:
    //creates the line vectors from the the 3 points passed in as a part of the GLface
    void createLineVectorsFromFace(GLface facePassedIn, GLpoint* l_vec1, GLpoint* l_vec2); 
    //generates a normal vector for the 2 line vectors made by createLineVectorsFromFace
    void crossProductOfVecs(GLpoint* l_vec1, GLpoint* l_vec2, GLpoint* outPutNormal);
    //alters the normal vector so that it is of Unit length
    bool normalizeVector(GLpoint* normalVector, GLpoint* normalizedNormalVecContainer);
    GLpoint computeFaceNormal(GLface faceToNormal);
}; 
```

正常计算器.cpp

```
#include "NormalCalculator.h"
#include <gl/glut.h>
#include <math.h>
#include <iostream>

void NormalCalculator::createLineVectorsFromFace(GLface facePassedIn, GLpoint* l_vec1, GLpoint* l_vec2)
{
    //from verts 1 & 2 initialize l_vec1
    l_vec1->x = facePassedIn.x1 - facePassedIn.x2;
    l_vec1->y = facePassedIn.y1 - facePassedIn.y2;
    l_vec1->z = facePassedIn.z1 - facePassedIn.z2;
    //do that same for l_vec2 from face 2 and 3
    l_vec2->x = facePassedIn.x2 - facePassedIn.x3;
    l_vec2->y = facePassedIn.y2 - facePassedIn.y3;
    l_vec2->z = facePassedIn.z2 - facePassedIn.z3;
}

void NormalCalculator::crossProductOfVecs(GLpoint* l_vec1, GLpoint* l_vec2, GLpoint* outPutNormal)
{
    //cross product dat hoe
    outPutNormal->x = (l_vec1->y * l_vec2->z) - (l_vec1->z * l_vec2->y);//x = aybz-byaz
    outPutNormal->y = (l_vec1->z * l_vec2->x) - (l_vec1->x - l_vec2->z);//y = azbx-bzax
    outPutNormal->z = (l_vec1->x * l_vec2->y) - (l_vec1->y - l_vec2->x);//z = axby-bxay
}

bool NormalCalculator::normalizeVector(GLpoint* normalVector, GLpoint* normalizedNormalVecContainer)
{
    //first we must work out the magnitude of the normal vector
    GLfloat mag = (sqrt((float) pow(normalVector->x,2) + pow(normalVector->y,2) + pow(normalVector->z,2)));

    if(mag)
    {
        normalizedNormalVecContainer->x = normalVector->x/mag;
        normalizedNormalVecContainer->y = normalVector->y/mag;
        normalizedNormalVecContainer->z = normalVector->z/mag;
        return true;
    }

    else return false;

}

GLpoint NormalCalculator::computeFaceNormal(GLface faceToNormal)
{
    //first we create a couple of container GLpoints for our 2 line vectors
    GLpoint a;
    GLpoint b;
    createLineVectorsFromFace(faceToNormal, &a, &b);
    //Create a container for our origional normal
    GLpoint firstNorm;
    //We have our line vectors, and a container. Now cross product them and put them in the container.
    crossProductOfVecs(&a, &b, &firstNorm);
    //create out last normal container
    GLpoint finalNorm;
    //normalize it
    normalizeVector(&firstNorm, &finalNorm);

    return finalNorm;
}

NormalCalculator::NormalCalculator(void)
{
}

NormalCalculator::~NormalCalculator(void)
{
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T12:36:55.260

```
GLpoint NormalCalculator::computeFaceNormal(GLface faceToNormal) 
```

应该

```
NormalCalculator::GLpoint NormalCalculator::computeFaceNormal(GLface faceToNormal) 
```

在参数列表中，资格不是必需的。

# windows-runtime - WinRT GridView 堆叠

> ID：13121787
> 
> 赞同：0
> 
> 时间：2012-10-29T12:36:51.123
> 
> 标签：windows-runtime, winrt-xaml

在默认应用程序中，有一个 gridview 显示堆叠在一起的数据组（每组 2 个框高）。

当我实现我的网格视图时，它不会堆叠。它只是 1 个水平列表。我已经将我的 GridView 与默认应用程序进行了比较，它似乎非常相似。是否有我缺少的命令或者我必须以不同的方式设置我的数据？

任何帮助表示赞赏。

**我的网格视图：**

```
<GridView
    x:Name="itemGridView"
    AutomationProperties.AutomationId="vehicleGridView"
    AutomationProperties.Name="vehicles"
    TabIndex="1"
    Grid.Row="1"
    Margin="83,0,-83,-4"
    Padding="116,0,116,46"
    ItemsSource="{Binding vehicles}"
    ItemTemplate="{StaticResource Standard250x250ItemTemplate}"
    SelectionMode="None"
    IsItemClickEnabled="True"
    ItemClick ="vehicleClick">
    <GridView.ItemsPanel>
        <ItemsPanelTemplate>
            <VirtualizingStackPanel Orientation="Horizontal"/>
        </ItemsPanelTemplate>
    </GridView.ItemsPanel>
    <GridView.GroupStyle>
        <GroupStyle>
            <GroupStyle.HeaderTemplate>
                <DataTemplate>
                    <Grid Margin="1,0,0,6">
                        <Button
                            AutomationProperties.Name="VehicleMake"
                            Content="{Binding VehicleMake}"
                            Style="{StaticResource TextPrimaryButtonStyle}"/>
                    </Grid>
                </DataTemplate>
            </GroupStyle.HeaderTemplate>
            <GroupStyle.Panel>
                <ItemsPanelTemplate>
                    <VariableSizedWrapGrid Orientation="Vertical" Margin="0,0,80,0"/>
                </ItemsPanelTemplate>
            </GroupStyle.Panel>
        </GroupStyle>
    </GridView.GroupStyle>
</GridView> 
```

**默认示例：**

```
 <GridView
        x:Name="itemGridView"
        AutomationProperties.AutomationId="ItemGridView"
        AutomationProperties.Name="Grouped Items"
        Grid.RowSpan="2"
        Padding="116,137,40,46"
        ItemsSource="{Binding Source={StaticResource groupedItemsViewSource}}"
        ItemTemplate="{StaticResource Standard250x250ItemTemplate}"
        SelectionMode="None"
        IsSwipeEnabled="false"
        IsItemClickEnabled="True"
        ItemClick="ItemView_ItemClick">

        <GridView.ItemsPanel>
            <ItemsPanelTemplate>                        
                <VirtualizingStackPanel Orientation="Horizontal"/>
            </ItemsPanelTemplate>
        </GridView.ItemsPanel>
        <GridView.GroupStyle>
            <GroupStyle>
                <GroupStyle.HeaderTemplate>
                    <DataTemplate>
                        <Grid Margin="1,0,0,6">
                            <Button
                                AutomationProperties.Name="Group Title"
                                Click="Header_Click"
                                Style="{StaticResource TextPrimaryButtonStyle}" >
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="{Binding Title}" Margin="3,-7,10,10" Style="{StaticResource GroupHeaderTextStyle}" />
                                    <TextBlock Text="{StaticResource ChevronGlyph}" FontFamily="Segoe UI Symbol" Margin="0,-7,0,10" Style="{StaticResource GroupHeaderTextStyle}"/>
                                </StackPanel>
                            </Button>
                        </Grid>
                    </DataTemplate>
                </GroupStyle.HeaderTemplate>
                <GroupStyle.Panel>
                    <ItemsPanelTemplate>
                        <VariableSizedWrapGrid Orientation="Vertical" Margin="0,0,80,0"/>
                    </ItemsPanelTemplate>
                </GroupStyle.Panel>
            </GroupStyle>
        </GridView.GroupStyle>
    </GridView> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T07:02:33.723

您需要在 ItemsPanelTemplate 中使用 WrapGrid。试试这个。

```
<ItemsPanelTemplate><WrapGrid /></ItemsPanelTemplate> 
```

# python - 使用 multiprocessing.Manager.list 而不是真正的列表会使计算花费很长时间

> ID：13121790
> 
> 赞同：9
> 
> 时间：2012-10-29T12:36:53.807
> 
> 标签：python, multiprocessing

`multiprocessing`我想从这个例子开始尝试不同的使用方式：

```
$ cat multi_bad.py 
import multiprocessing as mp
from time import sleep
from random import randint

def f(l, t):
#   sleep(30)
    return sum(x < t for x in l)

if __name__ == '__main__':
    l = [randint(1, 1000) for _ in range(25000)]
    t = [randint(1, 1000) for _ in range(4)]
#   sleep(15)
    pool = mp.Pool(processes=4)
    result = pool.starmap_async(f, [(l, x) for x in t])
    print(result.get()) 
```

这`l`是一个列表，当产生 4 个进程时，该列表被复制 4 次。为避免这种情况，文档页面提供了使用队列、共享数组或使用`multiprocessing.Manager`. 对于最后一个，我更改了以下定义`l`：

```
$ diff multi_bad.py multi_good.py 
10c10,11
<     l = [randint(1, 1000) for _ in range(25000)]
---
>     man = mp.Manager()
>     l = man.list([randint(1, 1000) for _ in range(25000)]) 
```

结果看起来仍然正确，但是执行时间急剧增加，以至于我认为我做错了什么：

```
$ time python multi_bad.py 
[17867, 11103, 2021, 17918]

real    0m0.247s
user    0m0.183s
sys 0m0.010s

$ time python multi_good.py 
[3609, 20277, 7799, 24262]

real    0m15.108s
user    0m28.092s
sys 0m6.320s 
```

文档确实说这种方式比共享数组慢，但这感觉不对。我也不确定如何对此进行分析以获取有关正在发生的事情的更多信息。我错过了什么吗？

PS 使用共享阵列，我得到的时间低于 0.25 秒。

PPS 这是在 Linux 和 Python 3.3 上。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-29T19:35:28.143

当子进程被编辑时， Linux 使用[写时复制。](http://en.wikipedia.org/wiki/Copy-on-write)`os.fork`展示：

```
import multiprocessing as mp
import numpy as np
import logging
import os

logger = mp.log_to_stderr(logging.WARNING)

def free_memory():
    total = 0
    with open('/proc/meminfo', 'r') as f:
        for line in f:
            line = line.strip()
            if any(line.startswith(field) for field in ('MemFree', 'Buffers', 'Cached')):
                field, amount, unit = line.split()
                amount = int(amount)
                if unit != 'kB':
                    raise ValueError(
                        'Unknown unit {u!r} in /proc/meminfo'.format(u = unit))
                total += amount
    return total

def worker(i):
    x = data[i,:].sum()    # Exercise access to data
    logger.warn('Free memory: {m}'.format(m = free_memory()))

def main():
    procs = [mp.Process(target = worker, args = (i, )) for i in range(4)]
    for proc in procs:
        proc.start()
    for proc in procs:
        proc.join()

logger.warn('Initial free: {m}'.format(m = free_memory()))
N = 15000
data = np.ones((N,N))
logger.warn('After allocating data: {m}'.format(m = free_memory()))

if __name__ == '__main__':
    main() 
```

这产生了

```
[WARNING/MainProcess] Initial free: 2522340
[WARNING/MainProcess] After allocating data: 763248
[WARNING/Process-1] Free memory: 760852
[WARNING/Process-2] Free memory: 757652
[WARNING/Process-3] Free memory: 757264
[WARNING/Process-4] Free memory: 756760 
```

这表明最初大约有 2.5GB 的可用内存。分配 15000x15000 的`float64`s 数组后，有 763248 KB 可用空间。这大致是有道理的，因为 15000**2*8 字节 = 1.8GB 并且内存下降，2.5GB - 0.763248GB 也大约为 1.8GB。

现在，在每个进程生成后，可用内存再次报告为 ~750MB。可用内存没有显着减少，因此我得出结论，系统必须使用写时复制。

结论：如果您不需要修改数据，在`__main__`模块的全局级别定义它是在子进程之间共享数据的一种方便且（至少在 Linux 上）内存友好的方式。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-29T12:43:12.840

这是意料之中的，因为访问共享对象意味着必须腌制请求，通过某种信号/系统调用发送它，取消腌制请求执行它并以相同的方式返回结果。

基本上你应该尽量避免共享内存。这导致更多可调试代码（因为您的并发性要少得多）并且速度更快。

只有在真正需要时才应该使用共享内存（例如，共享千兆字节的数据，以便复制它需要太多的 RAM，或者如果进程应该能够通过这个共享内存进行交互）。

附带说明一下，使用管理器可能比共享数组慢得多，因为管理器必须能够处理任何 PyObject * 并因此必须腌制/取消腌制等，而数组可以避免大部分这种开销。

从多处理的文档中：

> 管理器提供了一种方法来创建可以在不同进程之间共享的数据。管理器对象控制管理共享对象的服务器进程。其他进程可以使用代理访问共享对象。

因此，使用 Manager 意味着生成一个仅用于处理共享内存的新进程，这可能就是它需要更多时间的原因。

如果您尝试分析代理的速度，它会比非共享列表慢*很多：*

```
>>> import timeit
>>> import multiprocessing as mp
>>> man = mp.Manager()
>>> L = man.list(range(25000))
>>> timeit.timeit('L[0]', 'from __main__ import L')
50.490395069122314
>>> L = list(range(25000))
>>> timeit.timeit('L[0]', 'from __main__ import L')
0.03588080406188965
>>> 50.490395069122314 / _
1407.1701119638526 
```

虽然 an`Array`并没有那么慢：

```
>>> L = mp.Array('i', range(25000))
>>> timeit.timeit('L[0]', 'from __main__ import L')
0.6133401393890381
>>> 0.6133401393890381 / 0.03588080406188965
17.09382371507359 
```

由于非常基本的操作很慢，并且认为加快它们的希望不大，这意味着如果您必须共享大量数据并希望快速访问它，那么您应该使用`Array`.

可能会加快速度的方法是一次访问多个元素（例如，获取切片而不是单个元素），但取决于您想要执行的操作，这可能会也可能不会。

# ruby-on-rails - 如何结合锚点ID进行分页

> ID：13121793
> 
> 赞同：8
> 
> 时间：2012-10-29T12:37:00.597
> 
> 标签：ruby-on-rails

我对 Ruby on Rails 非常陌生，并且在尝试修复公司网站上的一些错误时正在学习。我正在尝试对与特定锚点组合的记录集合进行分页，即当用户单击下一页/上一页时，分页发生并且用户登陆页面的特定部分。这就是我的代码目前的样子：

## 看法

```
<%= page_navigation_links @student_logs, :page %></p> 
```

## 控制器：

```
@student_logs.paginate(:page => params[:page], :per_page => 10) 
```

## application_helper

```
def page_navigation_links(pages, param_name=:page)

  will_paginate(pages, :class => 'pagination', :inner_window => 2, :outer_window => 0, :renderer => BootstrapHelper::LinkRenderer, :previous_label => '&larr;'.html_safe, :next_label => '&rarr;'.html_safe, :param_name => param_name)

end 
```

这适用于我的分页，但我需要在此代码中添加对“锚 id”的引用，例如学生日志，以便当用户导航到不同的页面时，浏览器会将用户导航到带有 id 的标题：“student_logs ”。

我不知道该怎么做。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-29T12:50:47.100

我没有直接的经验。但是，[此链接](http://pastebin.com/6sS728bx)显示了一种方法。我无法测试，但你当然可以。

```
<%= will_paginate @posts, :params => {:anchor => i} %> 
```

如果这可行，那么您可以在您的助手中使用这种方式：

```
def page_navigation_links(pages, param_name=:page)
  will_paginate(pages, :params => {:anchor => "#ANCHOR"}, :class => 'pagination', :inner_window => 2, :outer_window => 0, :renderer => BootstrapHelper::LinkRenderer, :previous_label => '&larr;'.html_safe, :next_label => '&rarr;'.html_safe, :param_name => param_name)
end 
```

您可以根据需要更换`#ANCHOR`。

# javascript - 如何使两个 JavaScript 数组的项目相互对应？

> ID：13121796
> 
> 赞同：1
> 
> 时间：2012-10-29T12:37:15.540
> 
> 标签：javascript

今天用 javascript 研究数组。我创建了两个数组

```
 var items = ['Bread', 'Milk', 'Butter']
    var calories = [10,20,30] 
```

这个想法是卡路里对应于项目，所以面包有 10 卡路里。如果我想查看两个数组组合的结果，那么我称之为

```
 document.writeln(items[1] +  calories[1]) 
```

我猜有一种更有效的方法来做到这一点，但作为一个新手，我会很感激任何指向正确方向的指针。理想情况下，我想将所有信息存储在一个数组中

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-29T12:39:02.197

一种方法是使用对象而不是数组：

```
var items = {
   Bread: 10, 
   Milk: 20, 
   Butter: 30
};

alert(items["Bread"]); // Alert 10 
```

MDN 上有一篇关于在 JavaScript 中处理对象[的好文章](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Working_with_Objects)，可能对您有用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-29T12:38:29.500

您可以使用对象数组：

```
var items = [
   {Bread: 10},
   {Milk:20}
]; 
```

或者只是一个对象

```
var items {
    Bread:10,
    Milk:20
} 
```

要使用键值方法打印面包卡路里：

```
 alert(items["Bread"]); 
```

如果你不想使用 itemname 作为“key”，你可以这样做：

```
var items = [
   {
    Item: "Bread", 
    Calories: 10
   },
   {
    Item: "Milk", 
    Calories: 20
   }
]; 
```

然后你可以像这样打印它：

```
alert(items[0].Item+" has "+items[0].Calories+" calories"); 
```

然后，如果您想添加元素：

```
items.push({Item:"Butter",Calories:30}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T12:39:56.800

不太确定你所说的“更有效”是什么意思，但这样的事情更像是你想要建模：

```
var items = {
  'Bread': 10,
  'Milk': 20,
  'Butter': 30
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T12:40:23.480

哈希表/字典怎么样？

```
var calories = { Bread: 10,  Milk: 20, Butter: 30 }; 
```

要从此对象获得所需的输出，请查看我的 (Elias Van Ootegem) 答案。
或“对象”：

```
var food = [ 
     { name: 'Bread', calories: 10 },
     { name: 'Milk', calories: 20 },
     { name: 'Butter', calories: 30 },
]; 
```

要在此处获取输出：

```
for (var i=0;i<food.length;i++)
{
    document.writeln(food[i].name +': '+food[i].calories);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-29T12:42:13.340

您可能正在寻找对象文字。你希望你的输出是这样的：

```
var items = {
    Bread: 10,
    Milk : 20
}; 
```

您可以遍历数组并填充最初为空的数组，如下所示：

```
var items = {}, food, calories;

food = ['Bread', 'Milk', 'Butter'];
calories = [10,20,30];

for (var i = 0; i < food.length; i++) {
    for (var l = 0; l < calories.length; l++) {
        items[ food[i] ] = calories[ l ];
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-29T12:46:31.910

是的，就像每个人都告诉你的那样，你需要一个对象。要获得实际输出：

```
var items = {
   'Bread' : 10, 
   'Milk', : 20, 
   'Butter' : 30
};
for (var name in items)
{//loop through object literal, list all properties
    if (items.hasOwnProperty(name))
    {//avoid output of prototype properties
        document.writeln(name + ': ' + items[name]);
    }
}
//output:
    Bread: 10
    Milk: 20
    Butter: 30 
```

# cassandra - 在集群中创建新节点？

> ID：13121800
> 
> 赞同：0
> 
> 时间：2012-10-29T12:37:25.287
> 
> 标签：cassandra

我是 Cassandra 的新手，我只使用一台机器进行测试，如何创建新节点并将其添加到当前的 cassandra DB 中？说我想要 1 个集群，里面有 03 个节点。每个节点将是一个单独的 Cassandra db 还是什么？非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T11:30:38.317

您需要在要添加到集群的节点上编辑 cassandra.yaml。基本上你应该只做一些改变：

1.  确保集群名称与现有节点上的相同。

2.  指定`seeds`属性以包含 1 个项目的列表 - 现有节点

3.  提供`initial_token`属性，以便跨集群的令牌分布是统一的。

更多细节可以在这里找到：[http](http://wiki.apache.org/cassandra/GettingStarted) : //wiki.apache.org/cassandra/GettingStarted '配置多节点集群'

# jquery - UIWebView 中的控制台错误“CG AffineTransformInvert：奇异矩阵”

> ID：13121807
> 
> 赞同：4
> 
> 时间：2012-10-29T12:37:37.673
> 
> 标签：jquery, ios, xcode, uiwebview, xcode4.3

首先，我对此进行了彻底的搜索，并且我不相信任何解决方案可以开始。

我有一个简单的 UIWebView 包装器，我们将代码部署在静态服务器上。我们服务器的 URL 是 UIWebView 的加载 URL，如果没有任何有效的 JSessionID，它会重定向到登录页面（来自客户端），当捕获到成功的 JSessionID 时，它会重定向回我们的服务器。

控制台显示以下错误

```
Anshuks-MacBook-Pro-2.local xyz[40332] <Error>: CGAffineTransformInvert: singular matrix.
Anshuks-MacBook-Pro-2.local xyz[40332] <Error>: CGAffineTransformInvert: singular matrix.
Anshuks-MacBook-Pro-2.local xyz[40332] <Error>: CGAffineTransformInvert: singular matrix.
Anshuks-MacBook-Pro-2.local xyz[40332] <Error>: CGAffineTransformInvert: singular matrix.
Anshuks-MacBook-Pro-2.local xyz[40332] <Error>: CGAffineTransformInvert: singular matrix.
Anshuks-MacBook-Pro-2.local xyz[40332] <Error>: CGAffineTransformInvert: singular matrix.
Anshuks-MacBook-Pro-2.local xyz[40332] <Error>: CGAffineTransformInvert: singular matrix.
Anshuks-MacBook-Pro-2.local xyz[40332] <Error>: CGAffineTransformInvert: singular matrix.
Anshuks-MacBook-Pro-2.local xyz[40332] <Error>: CGAffineTransformInvert: singular matrix.
Anshuks-MacBook-Pro-2.local xyz[40332] <Error>: CGAffineTransformInvert: singular matrix.
Anshuks-MacBook-Pro-2.local xyz[40332] <Error>: CGAffineTransformInvert: singular matrix.
Anshuks-MacBook-Pro-2.local xyz[40332] <Error>: CGAffineTransformInvert: singular matrix.
Anshuks-MacBook-Pro-2.local xyz[40332] <Error>: CGAffineTransformInvert: singular matrix. 
```

尽管功能运行良好。但我在控制台中收到这些日志。

当我尝试直接用“google”、“facebook”甚至登录页面替换 URL 时，我没有收到任何错误。我试过评论 CSS 和 JQuery 代码，它仍然是一样的。

请给我一些关于这里有什么问题的见解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T03:20:05.727

我收到了这个错误，但我没有使用 UIWebView。事实证明，我用于 UILabel 的字体的磅值为零... [UIFont fontWithName:@"AFontName" size:0]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T06:33:36.563

使用[Safri 6 Web Inspector 和 iOS 6](http://moduscreate.com/enable-remote-web-inspector-in-ios-6/)来检查您的网页。

首先，删除检查器中的一些节点。如果删除一个节点消除了“奇异矩阵”错误，则重新加载页面并检查该节点的 CSS 样式。

逐一取消选中该节点的CSS样式。通常在选中或取消选中一种样式时，会出现一些错误消息。但是，如果取消选中某个 CSS 样式可以消除错误消息，那么您就找到了根本原因。

对我来说，这`display: inline-block`是一种`<div>`导致此类错误的风格。

# php - 在考虑重复值的同时比较两个数组

> ID：13121812
> 
> 赞同：5
> 
> 时间：2012-10-29T12:38:14.320
> 
> 标签：php

我有两个数组

```
$array1 = array(1, 2,  2, 3);
$array2 = array( 1, 2,  3,4); 
```

什么时候做的：

```
var_dump(array_diff($array1, $array2)); 
```

得到：

```
array(0){} 
```

作为输出，但我正在寻找：

```
array(1){[2]=>2} 
```

有人可以让我知道怎么做吗

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T13:05:18.250

试试这个

```
$array1 = array(1, 2, 2, 3, 4, 5, 5, 7);
$array2 = array(1, 2, 4, 6, 3, 3, 5);
$diff = array_filter($array1, 
  function ($val) use (&$array2) { 
    $key = array_search($val, $array2);
    if ( $key === false ) return true;
    unset($array2[$key]);
    return false;
  }
);
print_r($diff);
// Array ( [2] => 2 [6] => 5 [7] => 7 ) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T13:21:12.760

如果要计算同一数组以及多个数组中重复元素的数量，请使用以下代码，

```
<?php
    $array1 = array(1,2,2,3,7);
    $array2 = array(1,2,3,4);
    $diff_array = array();

    $diff_array1 = array_count_values($array1);
    $diff_array2 = array_count_values($array2);

    $a = array_keys($diff_array1);
    $b = array_keys($diff_array2);

    for($i=0;$i<count($a);$i++)
    {
        if($a[$i] == $b[$i])
        {
            $x = $a[$i];
            $y = $b[$i];
            $diff_array1[$x] += $diff_array2[$y];
        }
    } 
    $diff_array1=array_diff($diff_array1, array('1'));
    echo '<pre>';
    print_r($diff_array1);
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T13:00:54.267

这将为您提供所需的结果：

```
$array1 = array(1, 2,  2, 3);
$array2 = array( 1, 2,  3,4);

$countArray1 = array_count_values($array1);
$countArray2 = array_count_values($array2);

foreach($countArray1 as $value=>$count) {
    if($count > 1) $dupArray[] = $value;
}

foreach($countArray2 as $value=>$count) {
    if($count > 1) $dupArray[] = $value;
}

print_r($dupArray); 
```

**结果**

```
大批
(
    [0] => 2
)
```

**解释**

Using`array_count_values`将计算数组的所有值，如下所示：

```
大批
(
    [1] => 1
    [2] => 2
    [3] => 1
)

大批
(
    [1] => 1
    [2] => 1
    [3] => 1
    [4] => 1
)
```

然后我们遍历每一个`array_count_values`来定位不止一次出现的值。当您有一组以上的重复值时，这将起作用：

```
$array1 = array(1, 2,  2, 3);
$array2 = array( 1, 2,  3, 4, 3); 
```

**结果**

```
大批
(
    [0] => 2
    [1] => 3
)
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-29T12:46:07.483

虽然它可能不太优雅，但简单的方法是使用 for 循环：

```
$diff_array = array();
for ($i = 0; ($i < count($array1)) and ($i < count($array2)); $i++)
{
   if ($array1[$i] !== $array2[$i]) { $diff_array[$i] = $array1[$i]; }
} 
```

# wpf - “IsAsync”对慢属性没有影响？

> ID：13121813
> 
> 赞同：5
> 
> 时间：2012-10-29T12:38:25.237
> 
> 标签：wpf, mvvm, asynchronous, viewmodel

我的数据源很慢，所以我异步创建它。此外，我的视图模型的许多属性本身都很慢。因此，我也使它们异步（绑定到 Telerik 属性网格）：

```
<Grid>
  <Grid.DataContext>
    <ObjectDataProvider ObjectType="{x:Type viewModels:MyViewModel}"
      IsAsynchronous="True" x:Name="myViewModel" />
  </Grid.DataContext>
  <telerik:RadPropertyGrid x:Name="settings" Item="{Binding IsAsync=True}">
    <telerik:RadPropertyGrid.PropertyDefinitions>
      <telerik:PropertyDefinition
        Binding="{Binding Path=SlowProperty,IsAsync=True,Mode=TwoWay}" />
    </telerik:RadPropertyGrid.PropertyDefinitions>
  </telerik:RadPropertyGrid>
</Grid> 
```

调试时，我可以看到数据源确实是在另一个线程中创建的，因此不会阻塞 UI。但是，当我进入`SlowProperty`调试器时发现我仍在主线程中——这可以通过 UI 挂起直到属性返回的事实来证明。

**问：**我在这里缺少什么？`IsAsync`异步属性还不够吗？

**编辑：**这似乎适用于正常的`TextBlock`. 行为是否`IsAsync`依赖于控件的实现？（在这种情况下，我怀疑属性网格中存在错误。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T12:48:50.380

总是鼓励您使用`IsAsync` `Binding`with `PriorityBinding`。GUI 将等到属性被执行。但`PriorityBinding`它会检查第一个`Binding`属性是否为`slow`，如果是，它将选择下一个**占位符**绑定（应该很快）。但是当评估慢速属性时，它将通过绑定成为活动值。

```
<TextBlock>
 <TextBlock.Text>
  <PriorityBinding FallbackValue="defaultvalue">
    <Binding Path="SlowestProp" IsAsync="True"/>
    <Binding Path="SlowerProp" IsAsync="True"/>
    <Binding Path="SurelyFastProp" />
  </PriorityBinding>
 </TextBlock.Text>
</TextBlock> 
```

在您的情况下，您可以简单地设置一些`defaultValue`而不是提供多个绑定。

# javascript - 如何监控 iframe 点击？

> ID：13121814
> 
> 赞同：0
> 
> 时间：2012-10-29T12:38:25.693
> 
> 标签：javascript, jquery

我有一个名为 A 的网站我想使用 iframe 通过 A 显示另一个名为 myFrame 的网站我想计算 myFrame 中的所有点击次数并希望在我的网站中显示 A.myFrame 网站位于不同的域中。我做了以下代码，但它不工作。我可以在 myFrame 网站中添加任何 javascript 代码

```
<html>
<body>
Count: <span id="clicks">0</span>
<iframe id="myframe" src="http://www.myFrame.com" class="restricted" height="400px;" width="400px;" scrolling="no" frameborder="0">     
</iframe>
</body>
</html>

<script language="javascript">
$(function() {
    var clicks = 0;
    $('#myframe').contents().find('a').bind('click', function(e) {
        e.preventDefault();
        clicks++;
        $('#clicks').html(clicks);
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T12:39:45.737

是不可能的。[同源策略](https://developer.mozilla.org/en-US/docs/Same_origin_policy_for_JavaScript)可防止您监视/访问另一个域中的任何内容。

# mongodb - 嵌套查询日期范围

> ID：13121817
> 
> 赞同：0
> 
> 时间：2012-10-29T12:38:33.067
> 
> 标签：mongodb

我有一个项目，我在文档中嵌入日期范围。

类似于以下内容：

```
{ "availabilities" : [  
  { "start_date" : ISODate("2012-06-28T00:00:00Z"), "end_date" : ISODate("2012-10-03T00:00:00Z") },     
  { "start_date" : ISODate("2012-10-08T00:00:00Z"), "end_date" : ISODate("2012-10-28T00:00:00Z") }]
} 
```

我需要做的是找到在特定时期内可用的所有文档我使用这样的查询：

```
db.faces.find({"availabilities" : {"$elemMatch" : {"$and" : [{"start_date" : {"$lte" : ISODate('2012-10-01 00:00:00 UTC')}}, {"end_date" : {"$gte": ISODate('2012-10-07 00:00:00 UTC')}}]}}}) 
```

但它不会使用我的索引：

```
{
  "v" : 1,
  "key" : {
    "availabilities.start_date" : 1,
    "availabilities.end_date" : 1
  },
  "ns" : "faces_development.faces",
  "name" : "availabilities.start_date_1_availabilities.end_date_1"
} 
```

当我对查询进行解释时，indexBounds 的输出很奇怪，我不明白。

```
{
  "cursor" : "BtreeCursor availabilities.start_date_1_availabilities.end_date_1",
  "isMultiKey" : true,
  "n" : 71725,
  "nscannedObjects" : 143019,
  "nscanned" : 143019,
  "nscannedObjectsAllPlans" : 143221,
  "nscannedAllPlans" : 143221,
  "scanAndOrder" : false,
  "indexOnly" : false,
  "nYields" : 2,
  "nChunkSkips" : 0,
  "millis" : 1608,
  "indexBounds" : {
    "availabilities.start_date" : [
        [
          true,
          ISODate("2012-10-01T00:00:00Z")
        ]
      ],
    "availabilities.end_date" : [
      [
        {
          "$minElement" : 1
        },
        {
          "$maxElement" : 1
        }
      ]
    ]
  },
  "server" : "foobar.local:27017"
} 
```

当前版本的 mongoDB：MongoDB shell 版本：2.2.0

我必须如何使用索引？

试图在 mongodb 上查找相关问题和错误，但没有取得很大成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T17:08:45.803

这将在 2.3 中扫描更少的索引：[https ://jira.mongodb.org/browse/SERVER-3104](https://jira.mongodb.org/browse/SERVER-3104)

同时，我建议将每个可用性移动到其自己的文档中，而不是在一个数组中包含多个，以便更有效地查询。

# php - 如何使用 zend_validator 验证给定数据是否为字母数字

> ID：13121818
> 
> 赞同：3
> 
> 时间：2012-10-29T12:38:32.137
> 
> 标签：php, zend-framework

我有代码

```
$this->addValidator('Regex', false, 
                     array('/^[A-Za-z0-9 _]*[A-Za-z0-9][A-Za-z0-9 _]*$/')); 
```

用于验证数据是否为字母数字但它不起作用，

怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-29T13:15:43.977

为此，我正在使用标准的 Alnum 验证器。

在这样的表单定义中：

```
$this->addElement('text', 'username', array(
  'label' => 'Uživatelské jméno',
  'required' => true,
  'validators' => array(
      array('Alnum'),
      array('StringLength', false, array(2, 50))
  )
)); 
```

在您的符号中，类似以下内容应该可以解决问题：

```
$this->addValidator('Alnum'); 
```

[在Zend Framework 页面](http://framework.zend.com/manual/1.12/en/zend.validate.set.html#zend.validate.set)上查看可能的参数/其他标准验证器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T16:47:33.260

您的正则表达式工作正常，验证器也是如此。只需验证您已在正确的位置使用它：

一个例子：

```
 $login = new Zend_Form_Element_Text('uesrlogin');
    $login->setLabel('Enter username :')
            ->setRequired(true)
            ->addFilter('StripTags')
            ->addValidator('Regex', false, array('/^[A-Za-z0-9 _]*[A-Za-z0-9][A-Za-z0-9 _]*$/')); 
```

正如@Kamil 指出的那样，使用 Zend_Validate_Alnum 验证器将是检查字母数字的最佳选择。它甚至为您的项目添加了多语言支持。

> 当使用 Zend_Validate_Alnum 时，用户在其浏览器中设置的语言将用于设置允许的字符。这意味着当您的用户将 de 设置为德语时，他还可以输入诸如 ä、ö 和 ü 之类的字符以及来自英文字母表的字符。

# android - Android 页面未在 ICS 中正确显示

> ID：13121825
> 
> 赞同：1
> 
> 时间：2012-10-29T12:39:04.693
> 
> 标签：android

我有一个主屏幕。在所有具有不同屏幕尺寸的手机中，我检查了它的显示是否正确。但在 Android 4.0.3 中的 ICS 中，它没有全屏显示。当我开始时，它会显示 1 秒钟，然后会留下一个白色的补丁。谁能告诉我这里有什么问题？我认为问题出在我的 main.xml 中。但我什么都没有得到......

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="vertical" >
<TabHost
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#E1E1E1" >

    <TabWidget
        android:id="@android:id/tabs"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />

    <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="fill_parent"
        android:layout_height="508dp"
        android:paddingTop="94dp" >

        <TableLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/tab1"
            android:layout_width="fill_parent"
            android:layout_height="459dp"
            android:background="#E1E1E1"
            android:stretchColumns="1" >

            <TableRow>

                <ImageView android:contentDescription="@drawable/logolive1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_column="1"
                    android:src="@drawable/logolive1" />
            </TableRow>

            <TableRow>

                <Button
                    android:id="@+id/btnAuctions"
                    android:layout_width="wrap_content"
                    android:layout_height="40dp"
                    android:layout_column="1"
                    android:text="@string/btnAuctions" />
            </TableRow>

            <TableRow>

                <Button
                    android:id="@+id/btnSearch"
                    android:layout_width="wrap_content"
                    android:layout_height="40dp"
                    android:layout_column="1"
                    android:text="@string/btnSearch" />
            </TableRow>

            <TableRow>

                <Button
                    android:id="@+id/btnUserProfile"
                    android:layout_width="wrap_content"
                    android:layout_height="40dp"
                    android:layout_column="1"
                    android:text="@string/btnUserProfile" />
            </TableRow>

            <TableRow>

                <Button
                    android:id="@+id/btnFeatAuct"
                    android:layout_width="wrap_content"
                    android:layout_height="40dp"
                    android:layout_column="1"
                    android:text="@string/btnFeatAuct" />
            </TableRow>

            <TableRow>

                <Button
                    android:id="@+id/btnFeatItems"
                    android:layout_width="wrap_content"
                    android:layout_height="40dp"
                    android:layout_column="1"
                    android:text="@string/btnFeatItems" />
            </TableRow>

            <TableRow>

                <Button
                    android:id="@+id/btnLogin"
                    android:layout_width="wrap_content"
                    android:layout_height="40dp"
                    android:layout_column="1"
                    android:text="@string/btnLogin" />
            </TableRow>
        </TableLayout>

        <WebView
            android:id="@+id/tab2"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />

        <TableLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/tab3"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:stretchColumns="1" >

            <TableRow>

                <TextView
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_column="1"
                    android:paddingTop="24dp"
                    android:text="@string/search_label"
                    android:textColor="#000000" />
            </TableRow>

            <TableRow>

                <EditText
                    android:id="@+id/search"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_column="0"
                    android:layout_marginTop="2dip"
                    android:inputType="text"
                    android:ems="25"
                    android:maxLines="1"
                    android:scrollHorizontally="true"
                    android:singleLine="true" />
            </TableRow>

            <TableRow>

                    <RadioGroup
                        android:id="@+id/group1"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_column="1"
                        android:layout_gravity="left"
                        android:orientation="horizontal" >

                        <RadioButton
                            android:id="@+id/option1"
                            android:checked="true"
                            android:text="@string/live"
                            android:textColor="#000000" />

                        <RadioButton
                            android:id="@+id/option2"
                            android:checked="false"
                            android:text="@string/archive"
                            android:textColor="#000000" />
                    </RadioGroup>
                    <TextView
                    android:id="@+id/dummy"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:paddingLeft="99dp" />
                    <Button
                        android:id="@+id/btnSearchLive"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="@string/btnSearchLive" />

            </TableRow>
        </TableLayout>

        <WebView
            android:id="@+id/tab4"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />

        <WebView
            android:id="@+id/tab5"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />

        <WebView
            android:id="@+id/wv1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />

        <TableLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/client"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:stretchColumns="1" >

            <TableRow>

                <TextView
                    android:id="@+id/lotno"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_column="1"
                    android:gravity="center_horizontal" />
            </TableRow>

            <TableRow>

                <TextView
                    android:id="@+id/lottitle"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_column="1"
                    android:gravity="center_horizontal" />
            </TableRow>

            <TableRow>

                <ImageView android:contentDescription="@+id/lotimage"
                    android:id="@+id/lotimage"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_column="1"
                    android:gravity="center_horizontal" />
            </TableRow>

            <TableRow>

                <TextView
                    android:id="@+id/highbid"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_column="1"
                    android:gravity="center_horizontal" />
            </TableRow>

            <TableRow>

                <Button
                    android:id="@+id/bid"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_column="1"
                    android:gravity="center_horizontal"
                    android:textStyle="bold" />
            </TableRow>

            <TableRow>

                <TextView
                    android:id="@+id/lotopened"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_column="1"
                    android:gravity="center_horizontal" />
            </TableRow>
        </TableLayout>

        <TableLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/loginwindow"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:stretchColumns="1" >

            <TableRow>

                <TextView
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_column="1"
                    android:text="@string/username_label"
                    android:textColor="#000000" />
            </TableRow>

            <TableRow>

                <EditText 
                    android:id="@+id/uname"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_column="1"
                    android:layout_marginTop="2dip"
                    android:inputType="text"
                    android:ems="25"
                    android:maxLines="1"
                    android:scrollHorizontally="true"
                    android:singleLine="true"
                    android:textColor="#000000" />
            </TableRow>

            <TableRow>

                <TextView
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_column="1"
                    android:text="@string/pword_label"
                    android:textColor="#000000" />
            </TableRow>

            <TableRow>

                <EditText
                    android:id="@+id/pword"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_column="1"
                    android:layout_marginTop="2dip"
                    android:autoText="true"
                    android:ems="25"
                    android:maxLines="1"
                    android:password="true"
                    android:scrollHorizontally="true"
                    android:singleLine="true" />
            </TableRow>

            <TableRow>

                <Button
                    android:id="@+id/btndoLogin"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_column="1"
                    android:layout_gravity="right"
                    android:text="@string/btndoLogin" />
            </TableRow>
        </TableLayout>
    </FrameLayout>
    </TabHost>
</LinearLayout>
</ScrollView> 
```

这是一个屏幕截图：

![在此处输入图像描述](../Images/75674b5f750b7987dfe78f1840550f25.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T08:06:34.037

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:background="#ff0000"
android:orientation="vertical" >
<TabHost
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#ff0000" >

    <TabWidget
        android:id="@android:id/tabs"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />

    <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="fill_parent"
        android:layout_height="508dp"
        android:paddingTop="94dp" 
        >

        <TableLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/tab1"
            android:layout_width="fill_parent"
            android:layout_height="459dp"
            android:background="#00ff00"
            android:stretchColumns="1" >

            <TableRow>

                <ImageView android:contentDescription="@drawable/ic_launcher"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_column="1"
                    android:src="@drawable/ic_launcher" />
            </TableRow>

            <TableRow>

                <Button
                    android:id="@+id/btnAuctions"
                    android:layout_width="wrap_content"
                    android:layout_height="40dp"
                    android:layout_column="1"
                    android:text="xc" />
            </TableRow>

            <TableRow>

                <Button
                    android:id="@+id/btnSearch"
                    android:layout_width="wrap_content"
                    android:layout_height="40dp"
                    android:layout_column="1"
                    android:text="nm" />
            </TableRow>

            <TableRow>

                <Button
                    android:id="@+id/btnUserProfile"
                    android:layout_width="wrap_content"
                    android:layout_height="40dp"
                    android:layout_column="1"
                    android:text="yu" />
            </TableRow>

            <TableRow>

                <Button
                    android:id="@+id/btnFeatAuct"
                    android:layout_width="wrap_content"
                    android:layout_height="40dp"
                    android:layout_column="1"
                    android:text="ghj" />
            </TableRow>

            <TableRow>

                <Button
                    android:id="@+id/btnFeatItems"
                    android:layout_width="wrap_content"
                    android:layout_height="40dp"
                    android:layout_column="1"
                    android:text="hd" />
            </TableRow>

            <TableRow>

                <Button
                    android:id="@+id/btnLogin"
                    android:layout_width="wrap_content"
                    android:layout_height="40dp"
                    android:layout_column="1"
                    android:text="t" />
            </TableRow>
        </TableLayout>

        <WebView
            android:id="@+id/tab2"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />

        <TableLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/tab3"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:stretchColumns="1" >

            <TableRow>

                <TextView
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_column="1"
                    android:paddingTop="24dp"
                    android:text="r"
                    android:textColor="#000000" />
            </TableRow>

            <TableRow>

                <EditText
                    android:id="@+id/search"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_column="0"
                    android:layout_marginTop="2dip"
                    android:inputType="text"
                    android:ems="25"
                    android:maxLines="1"
                    android:scrollHorizontally="true"
                    android:singleLine="true" />
            </TableRow>

            <TableRow>

                    <RadioGroup
                        android:id="@+id/group1"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_column="1"
                        android:layout_gravity="left"
                        android:orientation="horizontal" >

                        <RadioButton
                            android:id="@+id/option1"
                            android:checked="true"
                            android:text="re"
                            android:textColor="#000000" />

                        <RadioButton
                            android:id="@+id/option2"
                            android:checked="false"
                            android:text="we"
                            android:textColor="#000000" />
                    </RadioGroup>
                    <TextView
                    android:id="@+id/dummy"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:paddingLeft="99dp" />
                    <Button
                        android:id="@+id/btnSearchLive"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="we" />

            </TableRow>
        </TableLayout>

        <TableLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/client"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:stretchColumns="1" >

            <TableRow>

                <TextView
                    android:id="@+id/lotno"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_column="1"
                    android:gravity="center_horizontal" />
            </TableRow>

            <TableRow>

                <TextView
                    android:id="@+id/lottitle"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_column="1"
                    android:gravity="center_horizontal" />
            </TableRow>

            <TableRow>

                <ImageView android:contentDescription="@+id/lotimage"
                    android:id="@+id/lotimage"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_column="1"
                    android:gravity="center_horizontal" />
            </TableRow>

            <TableRow>

                <TextView
                    android:id="@+id/highbid"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_column="1"
                    android:gravity="center_horizontal" />
            </TableRow>

            <TableRow>

                <Button
                    android:id="@+id/bid"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_column="1"
                    android:gravity="center_horizontal"
                    android:textStyle="bold" />
            </TableRow>

            <TableRow>

                <TextView
                    android:id="@+id/lotopened"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_column="1"
                    android:gravity="center_horizontal" />
            </TableRow>
        </TableLayout>

        <TableLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/loginwindow"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:stretchColumns="1" >

            <TableRow>

                <TextView
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_column="1"
                    android:text="as"
                    android:textColor="#000000" />
            </TableRow>

            <TableRow>

                <EditText 
                    android:id="@+id/uname"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_column="1"
                    android:layout_marginTop="2dip"
                    android:inputType="text"
                    android:ems="25"
                    android:maxLines="1"
                    android:scrollHorizontally="true"
                    android:singleLine="true"
                    android:textColor="#000000" />
            </TableRow>

            <TableRow>

                <TextView
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_column="1"
                    android:text="ca"
                    android:textColor="#000000" />
            </TableRow>

            <TableRow>

                <EditText
                    android:id="@+id/pword"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_column="1"
                    android:layout_marginTop="2dip"
                    android:autoText="true"
                    android:ems="25"
                    android:maxLines="1"
                    android:password="true"
                    android:scrollHorizontally="true"
                    android:singleLine="true" />
            </TableRow>

            <TableRow>

                <Button
                    android:id="@+id/btndoLogin"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_column="1"
                    android:layout_gravity="right"
                    android:text="as" />
            </TableRow>
        </TableLayout>
        <SlidingDrawer
                    android:id="@+id/drawer"
                    android:layout_width="match_parent"
                    android:layout_height="fill_parent"
                    android:layout_alignParentBottom="true"
                    android:layout_gravity="right"
                    android:content="@+id/content"
                    android:handle="@+id/handle" >

                    <TextView
                        android:id="@+id/handle"
                        android:layout_width="30dp"
                        android:layout_height="20dp"
                        android:background="#777777"
                        android:text="Hold"
                        android:textColor="#ffffff"
                        android:visibility="gone" >
                    </TextView>

                      <LinearLayout
                        android:id="@+id/content"
                        android:layout_width="match_parent"
                        android:layout_height="match_parent"
                        android:background="#123123"
                        android:gravity="center_vertical"
                        android:orientation="vertical" >
        <WebView
            android:id="@+id/tab4"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />

        <WebView
            android:id="@+id/tab5"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />

        <WebView
            android:id="@+id/wv1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />
        </LinearLayout>
           </SlidingDrawer>
    </FrameLayout>
    </TabHost>
</LinearLayout>
</ScrollView> 
```

只需在 framelayout 内添加滑动抽屉，在 java 代码中只需在滑动抽屉内添加 webview 即可，这是完美的解决方案。

只需在 Java 中添加它。

导入android.app.Activity；导入android.os.Bundle；导入 android.widget.SlidingDrawer；

```
public class New extends Activity {

    private SlidingDrawer slidingDrawer;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
setContentView(R.layout.test);
slidingDrawer = (SlidingDrawer) findViewById(R.id.drawer);
slidingDrawer.close();
    }

} 
```

# css - 设置具有相同类别的 div 的颜色？

> ID：13121826
> 
> 赞同：1
> 
> 时间：2012-10-29T12:39:08.013
> 
> 标签：css, html

我的网站上有 2 个 div，它们有 X 类。每个 div 都在另一个 div 中，每个都有不同的类，例如 A 和 B。

```
<div class="A">
    <div id="div1" class="X">something</div>
</div>

<div class="B">
    <div id="div2" class="X">something else</div>
</div> 
```

现在这些 div 的内容应该是绿色的。我怎么能说两个 div 都应该是绿色的，只使用一个 css 类定义？就像是：

```
.A .B > .X {
    color: green;
} 
```

我希望你们知道我的意思吗？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T12:40:35.493

你需要分开规则（不能像你一样复合父母）：

```
.A > .X,
.B > .X {
    color: green;
} 
```

上面的说明“当一个元素有 class`A`或`B`并且直接子有 class`X`时，将文本颜色分配给`green`。”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T12:41:45.703

只需使用

```
.A .X , .B .X
{
color:Green;
} 
```

**[看演示](http://jsfiddle.net/F5kFv/)**

# c++ - 如何在向量中找到一个元素？

> ID：13121827
> 
> 赞同：0
> 
> 时间：2012-10-29T12:39:09.123
> 
> 标签：c++, vector, iterator

我已将结构 Coord 定义为

```
struct Coord { 
int x;
int y;
int z; 
}; 
```

重载运算符！= 用于坐标

```
bool Coord::operator !=(Coord& crd)const {
if(this->x != crd.x)
{
    if(this->y != crd.y)
    {
        if(this->z != crd.z)
            return true;
        else
            return false;
    }
    else
        return false;
    return true;
}
else
    return false;
} 
```

然后将向量变量初始化为

```
vector<Coord> vcoord; 
```

现在我正在使用以下代码来获取具有特定 Coord 对象的向量的索引

```
int Index::getVIndex(Coord crd) { 
vector<Coord>::iterator it;
int indx;

it = vcoord.begin();
while(it != vcoord.end() && (*it) != crd)
    ++it;

indx = distance(vcoord.begin(),it);
cerr << (*it).x << " " << (*it).y << " " << indx << endl;
return indx;
} 
```

但 indx 的值始终为 0。请帮助获得正确的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T12:44:30.537

~~`Coord`为了能够做到这一点，您的结构需要一个不等于运算符：~~

 ~~```
(*it) != crd 
```~~  ~~您的不等于运算符的逻辑不正确。最好和最简单的选择是提供相等比较和使用[`std::find`](http://en.cppreference.com/w/cpp/algorithm/find)：

```
struct Coord { 
int x;
int y;
int z; 
};

bool operator == (const Coord& lhs, const Coord& rhs)
{
  return lhs.x==rhs.x && lhs.y==rhs.y && lhs.z==rhs.z;
} 
```

然后您可以`!=`根据 来实现，但如果您使用，`==`则不需要它，默认情况下使用：`std::find``==`

```
vector<Coord>::iterator it = std::find(vcoord.begin(), vcoord.end(), crd); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T12:57:59.203

仅当*所有*坐标都不同时，您的`!=`操作员才会返回；如果*有任何*不同，它应该返回。这意味着如果第一个元素的任何坐标与函数参数的坐标匹配，您的函数将返回零。`true`*`true`*

 **您的版本是一种冗长的写作方式：

```
return x != crd.x && y != crd.y && z != crd.z; 
```

什么时候应该：

```
return x != crd.x || y != crd.y || z != crd.z; 
```

通过以下方式实现逻辑可能更容易获得正确的逻辑`==`：

```
bool operator==(Coord const & lhs, Coord const & rhs) {
    return lhs.x == rhs.x && lhs.y == rhs.y && lhs.z == rhs.z;
}
bool operator!=(Coord const & lhs, Coord const & rhs) {
    return !(lhs == rhs);
} 
```

此外，给定 的定义`==`，您可以使用`std::find`而不是滚动自己的循环：

```
auto found == std::find(vcoord.begin(), vcoord.end(), crd);
if (found == vcoord.end()) {
    // Decide what to do if not found.
    // Returning zero is a bad idea, since there's no way distinguish that 
    // from a successful outcome.
} else {
    return std::distance(vcoord.begin(), found);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T12:54:11.103

您错误地实现了不等式运算符中的逻辑。它应该是

```
bool Coord::operator !=(const Coord& crd)const {
  return x != crd.x || y != crd.y || z != crz.z;
} 
```

您的实现在逻辑上等同于

```
 return x != crd.x && y != crd.y && z != crz.z; 
```**~~

# facebook - 如何在 Heroku 上托管的 Facebook 应用程序中使用linkedIn JSAPI？

> ID：13121830
> 
> 赞同：0
> 
> 时间：2012-10-29T12:39:20.977
> 
> 标签：facebook, heroku, linkedin

是否可以通过 facebook 应用程序访问linkedIn API？Facebook/Heroku 在尝试访问[http://platform.linkedin.com/in.js](http://platform.linkedin.com/in.js)时会阻止我的代码，因此我复制了 JS 并将其克隆到我的 heroku 应用程序中。但是现在，该应用程序不会抛出错误，也不会连接到我的linkedIn 帐户并按预期显示我的linkedIn 标题。

这是安全/权限问题还是我在这里做错了什么？我去了我的linkedIn 应用程序页面并将我的heroku 站点添加为将访问API 的域之一，但我认为甚至没有从heroku 到达linkedIn 的呼叫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T12:56:49.823

它阻止http://platform.linkedin.com/in.js 的原因是您通过 http 访问它**。**如果您将 in.js 称为**https://platform.linkedin.com/in.js**，它不会被阻止。如果问题与*将访问 API 的域*相关，但未在 Linkedin 的应用程序配置中指定，那么它将清楚地显示在 Chrome 浏览器控制台中。

# sql-server - 外键约束 5

> ID：13121831
> 
> 赞同：0
> 
> 时间：2012-10-29T12:39:22.430
> 
> 标签：sql-server

我的数据库中有两个表。`TableOne`有`theKey`主键。`TableTwo`有一个外键`theKey`引用`TableOne`. 现在我正在尝试`theKey`更新`TableTwo`：

```
 UPDATE TableTwo
  SET theKey = NewIk
  FROM TableTwo W
  JOIN TableThree D ON W.theKey_backup = D.OldIk
  WHERE dt >= '2012-05-01' 
```

但我收到以下错误：

> UPDATE 语句与 FOREIGN KEY 约束“FK_TableTwo_TableOne”冲突。冲突发生在数据库“MyDB”、表“dbo.TableOne”、列“theKey”中。

如果我不触摸，您能否解释一下为什么会出现此错误`TableOne`？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T12:44:12.887

您正在尝试设置为引用表**中不存在**`TableTwo.theKey`的值，这就是错误的意思。**`TableOne`**

 **所以你需要检查为什么会发生这种情况——你从哪里选择新值？为什么它是一个（还）不存在的值`TableOne`？**

# asp.net - asp.net中的日历控制

> ID：13121833
> 
> 赞同：0
> 
> 时间：2012-10-29T12:39:31.057
> 
> 标签：asp.net, calendar

我正在用 asp.net 编写一个网站，并寻找一个控件，我可以在其中显示一个简单但非常好看的日历。日历应该显示不同的事件，上面有时间戳和附加信息（例如：20 人注册）。单击该事件，它应该显示详细信息。所有这些都必须从数据库中读取。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T13:24:04.293

Telerik RadScheduler 浮现在脑海中，但要付费：[http ://demos.telerik.com/aspnet-ajax/scheduler/examples/overview/defaultcs.aspx](http://demos.telerik.com/aspnet-ajax/scheduler/examples/overview/defaultcs.aspx)

免费有用于 JQuery 的 FullCalendar：http: [//arshaw.com/fullcalendar/](http://arshaw.com/fullcalendar/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T16:06:49.887

DHTMLX Scheduler .NET 也是一种选择。检查这个演示，它看起来不错[http://scheduler-net.com/demo.aspx](http://scheduler-net.com/demo.aspx)

# html - 不同屏幕尺寸的div位置不固定

> ID：13121835
> 
> 赞同：0
> 
> 时间：2012-10-29T12:39:48.927
> 
> 标签：html, wordpress, twitter-bootstrap

我正在为我的 wordpress 网站使用 Twitter Bootstrap。问题是我刚刚制作了一个 div 作为右侧栏并在其上放置了一些图像，这在我的桌面上似乎可以正常工作，但是当我在笔记本电脑上查看它时，它会改变它的位置并向下移动。

这是我的 div 和图像展示位置代码：

```
<div style="position:fixed; top:188px; right:0px; border:0px solid #f00; width:25px;"><a href="#"><img src="http://pearlacademy.com/wp/wp-content/uploads/2012/10/delhi.jpg" style="margin-bottom:5px;"></a>
<a href="#"><img src="http://pearlacademy.com/wp/wp-content/uploads/2012/10/noida.jpg" style="margin-bottom:5px;"></a>
<a href="#"><img src="http://pearlacademy.com/wp/wp-content/uploads/2012/10/jaipur.jpg" style="margin-bottom:5px;"></a>
<a href="#"><img src="http://pearlacademy.com/wp/wp-content/uploads/2012/10/chennai.jpg" style="margin-bottom:5px;"></a>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T13:16:45.467

愿这种方法有所帮助，如果我想使用纯 CSS，它会是这样的：

**HTML：**

```
<div class="sidebar">
    <div class="box">Your anchor tags here</div>
</div> 
```

**CSS：**

```
html, body {
  height: 100%;
}

div.sidebar {
  position:fixed;
  right: 0px;
  width: 25px;
  height: 100%;
  border: 1px solid blue; /* just for developing, remove this later */
}

div.box {
  position: absolute;
  top: 0;
  bottom: 0;
  right: 0;
  left: 0;
  margin: auto;
  border: 1px solid #f00; /* depends on you ;) */
  height: 100px; /* unfortunately you have to set height property :| */
} 
```

**[这里](http://jsbin.com/eqikap/1/edit)**有一个活生生的例子；）

# hibernate - ConstraintViolationException 使用 @EmbeddedId 时出现重复条目

> ID：13121839
> 
> 赞同：2
> 
> 时间：2012-10-29T12:40:11.127
> 
> 标签：hibernate, jpa

我有以下实体：

**1- 地址**

```
@Entity
@Table(name = "Address")
public class Address implements Serializable
{
    private static final long serialVersionUID = 1L;

    @EmbeddedId
    private AddressPK id = new AddressPK();

               @OneToOne(mappedBy = "address")
    private Insurance_Detail insuranceDetail;

} 
```

**2-地址PK**

```
@Embeddable
public class AddressPK implements Serializable
{
    // default serial version id, required for serializable classes.
    private static final long serialVersionUID = 1L;

    @Column(unique = false, nullable = false, length = 45)
    private String customer_EmailAddress;

    @Column(unique = true, nullable = false)
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private int address_Id;

} 
```

3-**保险_详情**

```
@Entity
@Table(name = "Insurance_Detail")
public class Insurance_Detail implements Serializable
{
    private static final long serialVersionUID = 1L;

    @EmbeddedId
    private AddressPK id;

    @OneToOne
@JoinColumns({
        @JoinColumn(name = "customer_EmailAddress", referencedColumnName = "customer_EmailAddress", nullable = false, insertable = false, updatable = false),
        @JoinColumn(name = "address_Id", referencedColumnName = "address_Id", nullable = false, insertable = false, updatable = false) })

} 
```

**4- 持久化地址对象**如下：

```
Address address= new Address(data1,data2);

address.getId().setCustomer_EmailAddress(
                    currentCustomer.getEmailAddress());

entityManager.persist(address); 
```

**5-坚持保险明细**对象如下：

```
Insurance_Detail insuranceDetail = new Insurance_Detail(address.getId(), data3,data4);
entityManager.persist(insuranceDetail); 
```

并且保存正确，没有问题。

**问题：**当尝试**持久**化**Insurance_Detail**对象时，在第一次插入保险时，它已成功持久化，但在第二次插入另一个保险时，我得到以下异常。

```
javax.servlet.ServletException: org.springframework.orm.jpa.JpaSystemException: org.hibernate.exception.ConstraintViolationException: Duplicate entry 'test@msn.com' for key 'customer_EmailAddress'; nested exception is javax.persistence.PersistenceException: org.hibernate.exception.ConstraintViolationException: Duplicate entry 'test@msn.com' for key 'customer_EmailAddress'
    javax.faces.webapp.FacesServlet.service(FacesServlet.java:606)
    org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330)
    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:118)
    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:84)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:103)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:150)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:183)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:192)
    org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:160)
    org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
    org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259) 
```

请告知如何解决此异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T14:20:38.463

ISSUE 在数据库端，我`UNIQUE INDEX`在，`customer_EmailAddress`而且主键顺序必须等同于连接列

```
PRIMARY KEY (`Customer_EmailAddress`, `Address_Id`) 
```

# python - 根据 env var 制作 Python 版本（使用 travis-ci）

> ID：13121840
> 
> 赞同：8
> 
> 时间：2012-10-29T12:40:14.240
> 
> 标签：python, django, continuous-integration, travis-ci

有没有办法配置 travis-ci 以使 Python 版本依赖于某个 env var？

请考虑以下`travis.yml`配置：

```
language: python
python:
  - "2.5"
  - "2.6"
  - "2.7"
env:
  - DJANGO=1.3.4
  - DJANGO=1.4.2
  - DJANGO=https://github.com/django/django/zipball/master
install:
  - pip install -q Django==$DJANGO --use-mirrors
  - pip install -e . --use-mirrors
script:
  - python src/runtests.py 
```

在 Django 1.3 ( `DJANGO=1.3.4`) 和 1.4 ( `DJANGO=1.4.2`) 中，我还想针对 Django ( `DJANGO=https://github.com/django/django/zipball/master`) 的最新开发版本进行测试，它基本上是 Django 1.5。

我看到的问题是 travis-ci 将自动针对**所有**指定的 Python 版本运行集成。然而，Django 1.5 不再支持 Python 2.5。是否可以在 Django 开发版本中省略它，以便我只获得这样的集成：

*   DJANGO=1.3.4 --> python "2.5"、"2.6"、"2.7"
*   DJANGO=1.4.2 --> python "2.5"、"2.6"、"2.7"
*   DJANGO= [https://github.com/django/django/zipball/master](https://github.com/django/django/zipball/master) --> python "2.6", "2.7"

**更新：**

这是一个基于 Odi 回答的实时示例的链接，我已经成功使用了几个月： [https ://github.com/deschler/django-modeltranslation/blob/master/.travis.yml](https://github.com/deschler/django-modeltranslation/blob/master/.travis.yml)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-30T11:31:46.593

您可以指定要从构建矩阵中排除的配置（即您不想测试的组合）。

将此添加到您的`.travis.yml`：

```
matrix:
  exclude:
   - python: "2.5"
     env: DJANGO=https://github.com/django/django/zipball/master 
```

**注意：**只排除*完全匹配。*

有关详细信息，请参阅[构建文档（*The Build Matrix*部分）](http://about.travis-ci.org/docs/user/build-configuration/#The-Build-Matrix)。

# android - AlertDialog Builder 控制访问

> ID：13121841
> 
> 赞同：1
> 
> 时间：2012-10-29T12:40:17.703
> 
> 标签：android, android-layout

我有一个自定义 AlertDialog.Builder，但我无法访问 EditText。

这是我的默认课程；

```
 AlertDialog.Builder Builder = new AlertDialog.Builder(this);

        LayoutInflater Inflater = this.getLayoutInflater();

        View AddCategory = Inflater.inflate(R.layout.category_new, null);

        final EditText etCategoryName = (EditText) AddCategory.findViewById(R.id.btnAddCategory);

        Builder.setView(AddCategory)
        .setTitle("Add Category")
        .setPositiveButton("ADD", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int id) {
                Time Today = new Time(Time.getCurrentTimezone());
                Today.setToNow();

                //This code has error !...
                String CategoryName = etCategoryName.getText().toString();
            }
        })
        .setNegativeButton("CANCEL", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int id) {
                dialog.cancel();
            }
        }); 

        Builder.show(); 
```

此字符串 CategoryName = etCategoryName.getText().toString();

这是我的 Costum AlertDialog 布局；

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="60dp" >

<TextView
    android:id="@+id/tvAddCategoryName"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginLeft="10dp"
    android:layout_marginTop="15dp"
    android:text="@string/AddCategoryName"
    android:textColor="@color/White"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<EditText
    android:id="@+id/etAddCategoryName"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/tvAddCategoryName"
    android:layout_alignBottom="@+id/tvAddCategoryName"
    android:layout_toRightOf="@+id/tvAddCategoryName"
    android:layout_marginLeft="20dp"
    android:hint="@string/CategoryName"
    android:ems="10" >

    <requestFocus />
</EditText> 
```

请帮我 ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T12:43:18.750

尝试这个。

```
final EditText etCategoryName = (EditText) AddCategory.findViewById(R.id.etAddCategoryName); 
```

在您的 xml 文件中，您的 editText id 是`etAddCategoryName`，在您的 java 文件中，您初始化不同的名称（btnAddCategory）。

所以请`btnAddCategory`改成`etAddCategoryName`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T12:57:03.003

发生问题是因为您传递的是按钮 id 而不是 edittext id

请写下面的代码行

```
final EditText etCategoryName = (EditText) AddCategory.findViewById(R.id.etAddCategoryName); 
```

代替

```
final EditText etCategoryName = (EditText) AddCategory.findViewById(R.id.btnAddCategory); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T12:46:25.667

如果您似乎输入了错误的 EditText id，则输入 R.id.btnAddCategory 并且看起来应该是 R.id.etAddCategoryName。

# javascript - 发生单击事件时，treeview 会丢失检查值

> ID：13121849
> 
> 赞同：0
> 
> 时间：2012-10-29T12:41:04.870
> 
> 标签：javascript, asp.net

我有 asp.net Treeview，它位于 asp.net 页面的更新面板之外，当我单击 btnGet（它也存在于更新面板之外）时，它会丢失 treeview 控件的选中值。但它会保留放置在更新面板中的其他控件的值。

为了处理更新面板之外的控件，我使用了 javascript。（启用或禁用和验证及其文本等功能）

如何保留树视图的检查值？

任何帮助都会很棒！

```
<asp:Panel ID="treePanel" runat="server">
<table cellpadding="0" cellspacing="0">
<tr><td>
     <asp:TreeView ID="treeViewS" runat="server" ShowCheckBoxes="All" ShowLines="True" >
     </asp:TreeView>
</td></tr>
</table>
</asp:Panel>
<table width="980" cellpadding="0" cellspacing="0" align="center">
<tr><td>
   <asp:Button ID="btnGet" runat="server" Text="Get" ValidationGroup="GetValidationGrp"
                                                OnClick="btnGet_Click" OnClientClick="if (startGet()) return false;" />
</td></tr>
<table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T12:47:41.743

我建议您使用 jstree (http://www.jstree.com/) 和 jQuery 而不是 ASP.NET updatepanel 和 treeview。如果您想继续使用该 ASP.NET，请粘贴一些代码。

# ruby-on-rails - Ruby on Rails 将使用 ajax 进行分页

> ID：13121850
> 
> 赞同：-1
> 
> 时间：2012-10-29T12:41:16.040
> 
> 标签：ruby-on-rails, jquery

我在我的rails应用程序中使用了will_paginate，但是我遇到了一种情况，我需要在一个块内使用will_paginate，当我单击分页号时页面不应该重新加载，谁能帮我说如何将will_paginate与ajax集成以避免页面重新加载......？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T06:26:34.980

我有一个分页 javascript 文件

所以在我的 index.html.erb 文件中我添加了

```
<%=javascript_include_tag "pagination.js"%> 
```

在 pagination.js 文件中

```
$(function(){
    $(".pagination a").live("click", function() {
        $.get(this.href, null, null, "script");
        return false;
    });
}); 
```

我在索引操作中获取了这样的模型数据。

```
@employees = Employee.where("!is_deleted=?",1).paginate(:page=>params[:page] ,:per_page => 20) 
```

并将其添加到 index.js.erb 文件中

```
$("#employee_table").html("<%= escape_javascript(render("employees")) %>"); 
```

这里employee_table 是显示数据的div 的id。

我在 config/initializers 中有一个文件名 will_paginate_array_fix.rb。
这个文件看起来像这样

```
require 'will_paginate/array' 
```

这就是为什么即使我使用它工作的地方，因为它也支持数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T14:39:24.443

以下是我的设置方式：

假设我有一个`Item`模型。

首先在索引视图中，我渲染了执行分页的部分：

```
<div id="list">
 <%= render 'items/paginate_list', :items => @items %>
</div> 
```

在部分中，我在我的`will_paginate`声明中添加了一个 css 类：

```
items/_paginate_list.html.erb
<%=  will_paginate items,  :param_name => :page, :class => 'my_pagination' %>
# code displaying each item... 
```

然后在 application.js 中，我捕获了单击`my_pagination`类链接的事件：

```
$(document).ready(function(){
  $('.my_pagination a').live("click",function(){
    $('.my_pagination').html('Page is loading, please wait...');
    $.get(this.href, null, null, 'script');
    return false;
  });
}); 
```

这样通过`$.get`语句在ajax中对控制器进行调用。分页栏显示页面正在加载的消息。

在控制器中，我只有通常的：

```
class ItemsController < ApplicationController
  def index
    @items=Item.paginate(:page => params[:page], :per_page => 10)
  end
end 
```

最后，在嵌入的 js 中，我用分页来重新加载部分：

```
items/index.js.erb
$("#list").html("<%= escape_javascript(render 'items/paginate_list', :items => @items) %>"); 
```

希望这有帮助。

实际上，它大致是对[railscast](http://railscasts.com/episodes/174-pagination-with-ajax?view=asciicast)的快速总结；-)

# c++ - 返回双精度时出现双函数分段错误

> ID：13121854
> 
> 赞同：0
> 
> 时间：2012-10-29T12:41:44.817
> 
> 标签：c++, function, segmentation-fault, double

我有双重功能

```
double Grid::getAverageNeighborhoodFitnessEvaluation(int agentPositionX, int agentPositionY)
{
  GetNeighbourhood(agentPositionX, agentPositionY,neighborhoodEvaluations);
  int neighborscount = 0;
  double fitnesssum = 0;
  double neighborfitness;
  double value;
  for (size_t i = 0; i < neighborhoodEvaluations.size(); ++i)
  {
    if ((*(neighborhoodEvaluations.at(i))) != NULL)
    {
      neighborfitness = (*(neighborhoodEvaluations.at(i)))->GetFitness();
      if(neighborfitness<0)
          neighborfitness=0;
      fitnesssum+=neighborfitness;
      neighborscount++;
    }
  }
  value = fitnesssum/neighborscount;
  return value;
} 
```

GetNeighbourhood 将一个定义类型（Agent）的数组分配给neighborhoodEvaluations

`*(neighborhoodEvaluations.at(i)))->GetFitness();`返回表示数组中该点的值的双精度值。这些都是以前使用过的，没有问题。

从我的 main 调用时（其中 RealX 和 RealY 是两个整数）

```
int currentFitness = getAverageNeighborhoodFitnessEvaluation(RealX,RealY); 
```

总是有效

```
double currentFitness = getAverageNeighborhoodFitnessEvaluation(RealX,RealY); 
```

导致分段错误

有谁知道什么可能性会导致这种情况和/或 int 可以取什么值但 double 似乎不能？

到目前为止，我已经将错误追溯到我们的代理实现

代理.cpp

```
#include "Agent.h"

Agent::Agent(void)
{
    m_age = 0;
    m_fitness = -1;
}

Agent::~Agent(void)
{
}

int Agent::GetAge()
{
    return m_age;
}

double Agent::GetFitness()
{
    return m_fitness;
}

void Agent::IncreaseAge()
{
    m_age++;
}

AgentType Agent::GetType()
{
    return m_type;
} 
```

代理.h

```
#ifndef AGENT_H
#define AGENT_H

enum AgentType { candidateSolution, cupid, reaper, breeder};

class Agent
{
public:
    Agent(void);
    virtual ~Agent(void);

    double GetFitness();
    int GetAge();
    void IncreaseAge();
    AgentType GetType();
    virtual void RandomizeGenome() = 0;

protected:
    double m_fitness;
    AgentType m_type;
private:
    int m_age;
};
#endif // !AGENT_H 
```

虽然似乎无法找到确切的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T14:09:42.430

从您对 gdb 调试器答案的评论中，我看到您正在`GetFitness`对空对象 ( `Agent::GetFitness (this=0x0)`) 调用该方法。这意味着`neighborhoodEvaluations.at(i)`返回一个空指针。at() 只检查是否越界，但如果放入数组中的开头是一个空指针，那`at()`将无济于事。为了防止这种情况，你应该改变

```
if ((*(neighborhoodEvaluations.at(i))) != NULL) 
```

进入

```
if (neighborhoodEvaluations.at(i) != NULL) 
```

如果neighborhoodEvaluations 不应该包含空指针，您将不得不追查为什么`getNeighborhood()`将它们放在那里。也许您正在为您的点集边缘的元素寻找越界邻居？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T12:59:55.980

[使用这篇文章http://www.cs.cmu.edu/~gilpin/tutorial/](http://www.cs.cmu.edu/~gilpin/tutorial/)快速开始使用 gdb 调试器 。然后告诉我们哪一行产生了分段错误。

# ruby-on-rails - Bootstrap 模式中的 Rails 表单

> ID：13121860
> 
> 赞同：6
> 
> 时间：2012-10-29T12:42:07.987
> 
> 标签：ruby-on-rails, twitter-bootstrap, ruby-on-rails-3.2

我正在尝试将 rails 表单放入引导模式对话框中。我想使用模态页脚来保存取消/提交按钮，但这似乎在表单标签内不起作用。

```
<div class="modal-body">
  <%= simple_form_for [@state, @search] do |f| %>
     <!-- long form here -->
     <div class="modal-footer">
       <button class="btn" data-dismiss="modal" aria-hidden="true">Cancel</button>
       <%= f.button :submit, :class => 'btn btn-primary' %>
     </div>
  <% end %>
</div> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-29T17:45:40.217

那是因为您将页脚放在正文中。改用这种方式：

```
<%= simple_form_for [@state, @search] do |f| %>
  <div class="modal-body">
    <!-- long form here -->
  </div>
  <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Cancel</button>
    <%= f.button :submit, :class => 'btn btn-primary' %>
  </div>
<% end %> 
```

# php - Kohana 3.3 不能从子目录工作

> ID：13121861
> 
> 赞同：2
> 
> 时间：2012-10-29T12:42:07.490
> 
> 标签：php, mod-rewrite, kohana, kohana-3

## 回答：

Kohana 3.3，他们没有考虑文件夹/文件的大小写敏感性（他们将一些目录/文件大写），所以当他们开始切换到新的 Kohana（就像我一样）时，这会让一些人发疯。

我切换回 Kohana 3.2，直到这个问题得到修复。

* * *

非常感谢您花时间阅读我关于这个愚蠢问题的巨大帖子，我希望这个答案能在未来拯救一个可怜的灵魂=）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-04T04:43:20.220

“他们没有考虑文件夹/文件的大小写敏感性”是不正确的。**如“**[从 v3.2 升级](http://kohanaframework.org/3.3/guide/kohana/upgrading#psr-0-support-fileclass-naming-conventions)”下的指南中所述，此更改是一个有意识的决定。

[Kohana 3.3 增加了对PHP Framework Interop Group](http://www.php-fig.org/)的[PSR-0 标准](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md)的部分支持。鼓励 PHP 框架开发人员遵循此标准以简化框架之间的交互。

PSR-0 的要求之一是类名和文件名匹配。以前，Kohana 使用 Title Case 类名，但文件名小写。现在，两个匹配的情况。如果你看，你会看到**所有**的Kohana 类文件都被大写了。

这将不会在未来的版本中“修复”，因为小写文件名已“损坏”，*现在*它们已修复。

一般来说，Kohana 有时会在版本之间引入重大更改，但您应该始终能够在指南中找到它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T06:30:25.480

如果我没记错的话，你可以从子目录工作。**只需在您的application/bootstrap.php**文件中提及它：

```
Kohana::init(array(
    'base_url' => '/subfolder',
)); 
```

# jquery - 为什么我在 Jquery UI Slider 上的页面加载时得到 NaN

> ID：13121862
> 
> 赞同：4
> 
> 时间：2012-10-29T12:42:07.900
> 
> 标签：jquery, jquery-ui

我有一个滑块，它在页面加载时应该在滑块的句柄中产生一个值，并且还有另一个标签值。我不明白为什么在页面加载时我得到 NaN 但是当我移动滑块时，值会出现。

请看一下，这样你就可以亲眼看到[Fiddle](http://jsfiddle.net/jonnystudent/VycW2/)

代码看起来不错，但值不会出现在页面加载时的句柄中。

```
$("#slider1").slider({
    max:350,
    min:100,
    step:10,
    value:100,
    animate: 'true',
    slide: function(event, ui) {  
        $("#amount").val(ui.value);
        $(this).find('.ui-slider-handle').html('<div class="sliderControl-label v-labelCurrent">£'+ui.value+'</div>');
                update();
    }    
});

function addDaysToDate(days) {
  var mths = new Array("Jan", "Feb", "Mar",
    "Apr", "May", "Jun", "Jul", "Aug", "Sep",
    "Oct", "Nov", "Dec");

  var d = new Date();
  d.setHours(d.getHours() + (24 * days));

  var currD = d.getDate();
  var currM = d.getMonth();
  var currY = d.getFullYear();

  return mths[currM] + " " + currD + ", " + currY;
}

$("#slider2").slider({
    max:30,
    min:7,
    value:7,
    animate: 'true',    
    slide: function(event, ui) {  

        $("#days").val(ui.value);
            $(this).find('.ui-slider-handle').html('<div class="sliderControl-label v-labelCurrent">'+ui.value+'<span class="unit"> days</span></div>');
        $("#date").text(addDaysToDate(parseInt($("#days").val())));
                update();
    },
    create: function(event, ui) {
      $("#date").text(addDaysToDate(parseInt($("#days").val())));
    }    
});

$("#days").val($("#slider2").slider("value"));

$("#days").change(function(event) {
  var data = $("#days").val();
  if (data.length > 0)
  {
     if (parseInt(data) >= 7 && parseInt(data) <= 31)
     {
         $("#slider2").slider("option", "value", data);
     }
     else
     {
        if (parseInt(data) < 1)
        {
            $("#days").val("7");
            $("#slider2").slider("option", "value", "7");
        }
        if (parseInt(data) > 31)
        {
            $("#days").val("31");
            $("#slider2").slider("option", "value", "31");
        }
     }
  }
  else
  {
    $("#slider2").slider("option", "value", "7");
  }
  $("#date").text(addDaysToDate(parseInt($("#days").val())));
});

update(); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-29T12:50:02.120

最初之后；

```
$amount1 = $("#amount").val(); 
```

`$amount1`是一个空字符串。

当你然后`parseInt($amount1)`你`NaN` **没有** `0`得到它然后使整个表达`NaN`。

检测和处理空值，例如`$amount1 = parseInt($amount1, 10) || 0;`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T12:49:39.003

您必须`$('#amount').val();`在调用之前设置为默认值`update()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T13:15:20.607

您应该进行以下更改

**HTML**

`100`您应该在`<span class="decimal">100</span>`like中放置一个默认文本

```
<div class="loanForm-label">Your loan:</div>
<div class="loanForm-totalToBorrow v-number" id="amount">
    <span class="dollarSign">£</span> <span class="decimal">100</span>
</div> 
```

**jQuery**

在这里将所有实例更改`$("#amount").val`为`$("#amount .decimal").text`喜欢

```
function update() {            
     $interest = 0.15 ;
     $perday = 15 ;
     $amount1 = Number($("#amount .decimal").text());
     if($amount1>0){
         $dayscount =Number($("#days").val());
         $amount2 = $amount1 + $interest * $amount1 + ($dayscount * ($perday/100));
         $apr = ((($amount2-$amount1) / $amount1 ) / (($dayscount/365) * 100)) ;
         $("#amount .decimal").text($amount1);
         $("#amount2").text($amount2);
         $("#amount3").text(parseFloat($amount2-$amount1).toFixed(2));
         $("#amount4").text(parseFloat($apr).toFixed(2));
     }
}

$("#slider1").slider({
    max:350,
    min:100,
    step:10,
    value:100,
    animate: 'true',
    slide: function(event, ui) {  
        $("#amount .decimal").text(ui.value);
        $(this).find('.ui-slider-handle')
               .html('<div class="sliderControl-label v-labelCurrent">£'+ui.value+'</div>');
        update();
    }    
});

function addDaysToDate(days) {
  var mths = new Array("Jan", "Feb", "Mar",
    "Apr", "May", "Jun", "Jul", "Aug", "Sep",
    "Oct", "Nov", "Dec");

  var d = new Date();
  d.setHours(d.getHours() + (24 * days));

  var currD = d.getDate();
  var currM = d.getMonth();
  var currY = d.getFullYear();

  return mths[currM] + " " + currD + ", " + currY;
}

$("#slider2").slider({
    max:30,
    min:7,
    value:7,
    animate: 'true',    
    slide: function(event, ui) {  
        $("#days").val(ui.value);
        $(this).find('.ui-slider-handle')
               .html('<div class="sliderControl-label v-labelCurrent">'+ui.value+'<span class="unit"> days</span></div>');
        $("#date").text(addDaysToDate(parseInt($("#days").val())));
        update();
    },
    create: function(event, ui) {
      $("#date").text(addDaysToDate(parseInt($("#days").val())));
    }    
});

$("#days").val($("#slider2").slider("value"));

$("#days").change(function(event) {
  var data = $("#days").val();
  if (data.length > 0)
  {
     if (parseInt(data) >= 7 && parseInt(data) <= 31)
     {
         $("#slider2").slider("option", "value", data);
     }
     else
     {
        if (parseInt(data) < 1)
        {
            $("#days").val("7");
            $("#slider2").slider("option", "value", "7");
        }
        if (parseInt(data) > 31)
        {
            $("#days").val("31");
            $("#slider2").slider("option", "value", "31");
        }
     }
  }
  else
  {
    $("#slider2").slider("option", "value", "7");
  }
  $("#date").text(addDaysToDate(parseInt($("#days").val())));
});
update(); 
```

检查这个**[演示](http://jsfiddle.net/VycW2/63/)**

# php - 从抽象类中的静态函数获取类名

> ID：13121864
> 
> 赞同：2
> 
> 时间：2012-10-29T12:42:14.353
> 
> 标签：php, class, static, abstract

我有一个抽象类，它有许多静态函数（通过使用它返回一个新的自身实例`new static($args)`），但我不知道如何获取类名。我试图避免把

```
protected static $cn = __CLASS__; 
```

但如果不可避免，那也不是世界末日

```
abstract class ExtendableObject {
    static function getObject() {
        return new static($data);
    }

    static function getSearcher() {
        return new ExtendableObjectFinder(/* CLASS NAME CLASS */);
    }
}

class ExtendableObjectFinder {
    private $cn;

    function __construct($className) {
       $this->cn = $className;
    }

    function where($where) { ... }

    function fetch() { ... }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T12:45:45.447

要获取类的名称，您可以使用[`get_class`](http://php.net/manual/en/function.get-class.php)并传递`$this`.

或者，[`get_called_class`](http://php.net/manual/en/function.get-called-class.php)您可以在静态方法中使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T12:43:27.167

您不需要显式使用类名，您可以使用`self`.

```
class SomeClass {

    private static $instance;

    public static function getInstance() {

          if (self::$instance) {
               // ...
          }

    }

} 
```

[键盘](http://codepad.org/k9ox5EN4)。

# java - 如何返回正确的结果和错误列表

> ID：13121868
> 
> 赞同：3
> 
> 时间：2012-10-29T12:42:27.077
> 
> 标签：java, error-handling

我对该方法的以下设计感到困惑：

```
Map<String, BigDecimal> foo(Parameter p){ ... } 
```

此方法接受一个复数`Parameter`并返回一个地图名称 -> 值。在许多情况下，基于参数的某些基础计算，生成的地图将是相同的，此外，只有少数不同的地图可以返回，因此这些地图将被缓存。但是，最初创建地图时，可能存在不同类型的错误 - 某些字符串值可能不正确，某些值可能 < 0，因此应该跳过等。这些错误可能具有不同的性质。我想返回这张地图，但也能够标记这些错误，理想情况下只有一次，当执行每个地图的初始化时。最干净的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T12:59:49.017

这是一个相当不寻常的要求——如果尽管存在内部错误，您*仍能*生成有效结果，那么您可能应该返回该结果；如果没有，则抛出异常。

但是，如果您确实想返回此附加信息，那么我看到您有两种选择：

1.  **面向对象，可变状态**。运行时`foo()`，在某个字段中累积任何内部错误。公开一个额外的`getFooErrors()`方法来允许调用者检查发生了什么。`getFooErrorSeverity()`如果您需要告诉调用者这些错误对结果图质量的影响程度，可能还有一种方法。
2.  **不可变/功能**。作为您方法的一部分，返回上面的信息（例外情况，可能还有严重性评分）。不是返回 a `Map<String, BigDecimal>`，而是返回一个包含地图的对象，以及异常详细信息。例如：

    ```
    public class FooResult {
        public final Map<String, BigDecimal> result;
        public final List<Throwable> errors;
        public final int errorSeverity;

        // Constructor elided
    } 
    ```

第一种方法类似于`java.io.PrintWriter`标准库中的工作方式。它吞下其 I/O 方法遇到的任何 IOExceptions，并公开一个[checkError()](http://docs.oracle.com/javase/6/docs/api/java/io/PrintWriter.html#checkError%28%29)方法以允许调用者查看编写器是否遇到任何异常。

我更喜欢第二种，因为它不会影响线程安全，它会预先为客户端提供所有信息，并且它与遇到错误的范围巧妙地结合在一起。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T12:55:42.513

没有一种正确的方法可以做到这一点，但是如何创建`FooResult`包含您的地图和错误列表的特殊类（尽管我宁愿将其称为警告，因为通常会报告不可恢复的错误与异常），例如：

```
FooResult foo(Parameter p){ ... }

class FooResult {
  Map<String, BigDecimal> result;
  List<Error> errors;
} 
```

where`Error`可以是一个包含您需要的所有错误信息（例如代码、消息、异常等）的类，例如：

```
class Error {
  int code;
  String message;
  Throwable cause; // optional, depending on error
  // ...
} 
```

或者，可以将 s 的列表`Error`作为参数传递，并在必要时由方法填充，例如：

```
Map<String, BigDecimal> foo(Parameter p, List<Error> errors) { 
  ... 
  if (error) {
    errors.add(new Error(10, "Bad error"));
  }
} 
```

# php - 适用于所有目录的文件路径

> ID：13121869
> 
> 赞同：2
> 
> 时间：2012-10-29T12:42:33.277
> 
> 标签：php, file, path

在 PHP 中，当我们包含或需要一些文件时，使用一些**初始化器**，如下所示。如果您在子目录或不同位置包含相同的**初始化程序**，我们如何克服发生的文件路径问题。

```
<?php

// settings
$settings = array('config');

foreach ($settings as $setting) {
    require_once "../system/settings/{$setting}.php";
}

// neutrals
$neutrals = array('functions');

foreach ($neutrals as $neutral) {
    require_once "../system/neutrals/{$neutral}.php";
}

// helpers
$helpers = array('database', 'file', 'logger', 'user', 'session', 'database');

foreach ($helpers as $helper) {
    require_once "../system/helpers/{$helper}.php";
}

// models
$models = array('test');

foreach ($models as $model) {
    require_once "../system/models/{$model}.php";
}

?> 
```

上面的脚本位于文件**all_initializer.php**中。这里的障碍是我不能在公共子目录或其他位置使用相同的初始化程序，因为它会发生找不到文件的致命错误（如果它是必需的文件）。

**编辑**

例如，我在**index.php**文件的公用文件夹中使用此初始化程序，然后在公用文件夹**public/sub**中有一个子目录。如何在**public/sub/index.php**中使用与在**public/index.php**中使用的相同的初始化程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T12:52:17.600

大多数 php 框架的工作方式类似于以下，zend 框架的工作方式是这样的：

声明一个常量 APPLICATION_PATH，然后使所有路径都与此相关。

```
define("APPLICATION_PATH", "/var/www/mysite"); 
```

然后您的所有要求都将与您的 APPLICATION_PATH 相关。

```
require_once APPLICATION_PATH ."/system/helpers/{$helper}.php"; 
```

***使用这种方法，您可以毫无问题地包含来自任何脚本的文件。因为所有路径都将与您的 APPLICATION_PATH 相关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T12:49:23.563

简单......不要使用相对路径......在你的`foreach`循环中，你可以这样做：

```
require($_SERVER['DOCUMENT_ROOT'].'/system/thing.php'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T12:58:19.610

您可以使用`file_exists`来避免致命错误

```
// neutrals
$neutrals = array('functions');

foreach ($neutrals as $neutral) {
    if (file_exists("../system/neutrals/{$neutral}.php") 
    {
        require_once "../system/neutrals/{$neutral}.php";
    }
    else
    {
        // Do some logging here so as to know that something went wrong
    }
} 
```

至于您所指的路径问题，您可以从任何地方包含此文件，只要您为您的操作提供正确的基本路径。`ROOT_PATH`在文件中定义 a`index.php`将帮助您检测脚本的位置以及需要加载的内容。

例如，如果你有这个结构：

```
/system
/system/neutrals
/system/models
/public
/public/index.php 
```

在您的应用程序中，`index.php`您可以定义一个`ROOT_PATH`将在整个应用程序中使用并用作参考点的常量。

```
// this points to the folder that has /public and /system
define('ROOT_PATH', dirname(dirname(__FILE__)))); 
```

您也可以为您的系统文件夹设置一个常量

```
define('SYSTEM_PATH', ROOT_PATH . '/system'); 
```

然后你所有的`require_once`声明变成：

```
require_once SYSTEM_PATH ."/neutrals/{$neutral}.php"; 
```

**编辑**：基于问题中的其他信息

```
Structure:
/all_includes.php
/system
/system/neutrals
/system/models
/public
/public/index.php
/public/sub/index_sub.php 
```

在 index.php 你定义

```
// this points to the folder that has /public and /system
define('ROOT_PATH', dirname(dirname(__FILE__)))); 
```

接着：

```
require_once ROOT_PATH . '/all_includes.php'; 
```

做你的初始化。同样的事情也发生在`public/sub/index_sub.php`.

你的`all_includes.php`变成：

```
// neutrals
$neutrals = array('functions');

foreach ($neutrals as $neutral) {
    if (file_exists(ROOT_PATH . "/system/neutrals/{$neutral}.php") 
    {
        require_once ROOT_PATH . "/system/neutrals/{$neutral}.php";
    }
    else
    {
        // Do some logging here so as to know that something went wrong
    }
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-10-29T12:53:00.840

路径问题可以通过这种方式解决，你有一个文件总是在同一个地方。例如你有（这是你的公共 html）

```
.
..
folder/subfolder/filetoinclude.php
folder2/includein.php
thefilefolder/thefile.php 
```

好的，现在在文件 php 你有一个变量

```
$path=dirname(__FILE__); 
```

这将始终为您提供该文件的绝对路径，然后您可以使用此 $path 变量并围绕它构建包含路径。在此示例中，您必须包含 $path.'../folder/subfolder/filetoinclude.php'; 品脱是始终使用相同的原点，而不是使用相对路径。然后你可以在file.php中创建一个自定义的包含函数，然后事情就变得非常简单了。

# bash - 屏幕不断终止

> ID：13121871
> 
> 赞同：0
> 
> 时间：2012-10-29T12:42:42.623
> 
> 标签：bash, gnu-screen

我正在尝试在`inotifywait`用于检查正在创建的新文件的屏幕中运行脚本，然后在发生与某些参数匹配的事件时运行脚本。出于某种原因，即使正在运行的脚本是循环的，屏幕也会继续终止。

我用 screen -d -m -S scriptname //path to .sh 开始屏幕，脚本的循环部分看起来像这样

```
#start folder monitoring
while fileevent=$(inotifywait -rq -e create $path_to_monitor); do CheckFileEvent; done 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T13:07:50.853

你的运行循环取决于你的分配结果，试试这个：

```
while :;do
    fileevent=$(inotifywait -rq -e create $path_to_monitor)
    CheckFileEvent
  done 
```

# c - 使用 fft2 (matlab) 和 fftw (C) 获得相同的结果

> ID：13121875
> 
> 赞同：1
> 
> 时间：2012-10-29T12:43:07.763
> 
> 标签：c

我正在尝试使用 FFTW3 库在 C 中实现 Matlab fft2() 函数。

但是，我得到了不同的结果。

考虑一个矩阵 [1 2; 3 4]，用matlab fft2得到的结果是[10 -2; -4 0] 和 FFTW3 [10 -2; (3.05455e-314 + 2.122e-314i) (9.31763e-315 + 9.32558e-315i)]

我使用了以下代码：

```
fftw_plan planG;
fftw_complex *inG, *outG;

inG = (fftw_complex*) fftw_malloc(sizeof(fftw_complex) * 2 * 2);
outG = (fftw_complex*) fftw_malloc(sizeof(fftw_complex) * 2 * 2);

inG[0][0]=1.0;
inG[1][0]=2.0;
inG[2][0]=3.0;
inG[3][0]=4.0;

inG[0][1]=0.0;
inG[1][1]=0.0;
inG[2][1]=0.0;
inG[3][1]=0.0;

planG = fftw_plan_dft_2d(2, 2, inG, outG, FFTW_FORWARD, FFTW_ESTIMATE);

fftw_execute(planG); 
```

我究竟做错了什么？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T12:50:53.000

这对我来说似乎工作正常：

```
// fftw_test.c

#include <stdio.h>
#include <fftw3.h>

int main(int argc, char * argv[])
{
    fftw_plan planG;
    fftw_complex *inG, *outG;

    inG = fftw_malloc(sizeof(fftw_complex) * 2 * 2);
    outG = fftw_malloc(sizeof(fftw_complex) * 2 * 2);

    inG[0][0] = 1.0; // real input
    inG[1][0] = 2.0;
    inG[2][0] = 3.0;
    inG[3][0] = 4.0;

    inG[0][1] = 0.0; // imag input
    inG[1][1] = 0.0;
    inG[2][1] = 0.0;
    inG[3][1] = 0.0;

    planG = fftw_plan_dft_2d(2, 2, inG, outG, FFTW_FORWARD, FFTW_ESTIMATE);

    fftw_execute(planG);

    printf("outg[0] = { %g, %g }\n", outG[0][0], outG[0][1]);
    printf("outg[1] = { %g, %g }\n", outG[1][0], outG[1][1]);
    printf("outg[2] = { %g, %g }\n", outG[2][0], outG[2][1]);
    printf("outg[3] = { %g, %g }\n", outG[3][0], outG[3][1]);

    return 0;
} 
```

编译并运行：

```
$ gcc -Wall -lfftw3 fftw_test.c -o fftw_test
$ ./fftw_test 
outg[0] = { 10, 0 }
outg[1] = { -2, 0 }
outg[2] = { -4, 0 }
outg[3] = { 0, 0 }
$ 
```

我想知道是否只是您用于显示结果的代码不正确？

* * *

对于 3x3 案例，我也得到了匹配：

```
// fftw_test_3_x_3.c

#include <stdio.h>
#include <fftw3.h>

#define M 3
#define N 3

int main(int argc, char * argv[])
{
    fftw_plan planG;
    fftw_complex *inG, *outG;
    int i;

    inG = fftw_malloc(sizeof(fftw_complex) * M * N);
    outG = fftw_malloc(sizeof(fftw_complex) * M * N);

    for (i = 0; i < M * N; ++i)
    {
        inG[i][0] = (double)(i + 1);
        inG[i][1] = 0.0; // imag input
    }

    planG = fftw_plan_dft_2d(M, N, inG, outG, FFTW_FORWARD, FFTW_ESTIMATE);

    fftw_execute(planG);

    for (i = 0; i < M * N; ++i)
    {
        printf("outg[%d] = { %g, %g }\n", i, outG[i][0], outG[i][1]);
    }

    return 0;
} 
```

编译并运行：

```
$ gcc -Wall -lfftw3 fftw_test_3_x_3.c -o fftw_test_3_x_3
$ ./fftw_test_3_x_3 
outg[0] = { 45, 0 }
outg[1] = { -4.5, 2.59808 }
outg[2] = { -4.5, -2.59808 }
outg[3] = { -13.5, 7.79423 }
outg[4] = { 0, 0 }
outg[5] = { 0, 0 }
outg[6] = { -13.5, -7.79423 }
outg[7] = { 0, 0 }
outg[8] = { 0, 0 }
$ 
```

与 Octave 比较（MATLAB 克隆）：

```
octave:1> a = [1 2 3 ; 4 5 6 ; 7 8 9]
a =

   1   2   3
   4   5   6
   7   8   9

octave:2> b = fft2(a, 3, 3)
b =

   45.00000 +  0.00000i   -4.50000 +  2.59808i   -4.50000 -  2.59808i
  -13.50000 +  7.79423i    0.00000 +  0.00000i    0.00000 +  0.00000i
  -13.50000 -  7.79423i    0.00000 -  0.00000i    0.00000 -  0.00000i

octave:2> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T13:10:31.490

您的代码看起来正确。我在 64 位机器上使用 GCC gcc-4_7-branch 修订版 189773 进行了尝试，它正在返回

```
10 -2
-4 0 
```

正如它应该。

还尝试了具有`printf`格式（%f、%g、%lg）的不同输出技术，并`creal`以良好的度量访问数据——它总是返回预期的结果。

您是否使用已`quad_precision`启用的 GCC？这是我现在无法测试的事情之一。

# java - java拆分的正则表达式

> ID：13121879
> 
> 赞同：0
> 
> 时间：2012-10-29T12:43:25.883
> 
> 标签：java, regex, split

我想从具有以下格式的文件中拆分数据：{[(1;1;2),(5;1;2),(5;1;1)],[(1;3;2),( 5;3;2),(5;1;2)]}

这是我的Java方法：

```
public void createFromFile(String filename) throws IOException{
    BufferedReader br = new BufferedReader(new FileReader(filename));
    String s;
    while ((s = br.readLine()) != null) 
    {
        s = s.replace("{", "").replace("}", "").replace("]", "").replace(",", "");
        ArrayList<Surface> sf = new ArrayList<Surface>();
        for(String s1: s.split("\\["))
        { // <== not splitting here
            ArrayList<Point> tp = new ArrayList<Point>();
            for(String s2: s1.split("\\("))
            { // <== here neither
                String[] s3 = s2.split(";");
                tp.add(new Point(Double.valueOf(s3[0]),Double.valueOf(s3[1]),Double.valueOf(s3[2])));
            }
            sf.add(new Surface((Point[]) tp.toArray()));
        }
        convShape.add(new Body((Surface[])sf.toArray()));   
    }
} 
```

为什么不`s.split("\\[")`拆分`s.split("\\(")`s？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T12:52:41.827

好吧，我认为这应该可行。就您当前的代码而言，它应该正确拆分它。

但是，鉴于您只想要`numbers`括号内。你不需要`split`这里。你让你的工作变得艰难。您应该更好地使用`Pattern`and`Matcher`类，以找到介于`(`和之间的所有内容`)`。您可以使用以下代码为您提供帮助：-

```
 String str = "{[(1;1;2),(5;1;2),(5;1;1)],[(1;3;2),(5;3;2),(5;1;2)]}";

    Pattern pattern = Pattern.compile("(\\(\\d;\\d;\\d\\),?){3}");
    Matcher matcher = pattern.matcher(str);

    while (matcher.find()) {
        int i = 1;
        System.out.println("Polygon Coordinates: ");
        String[] coordinates = matcher.group(0).split(",");

        for (String point: coordinates) {
            System.out.println("Coordinate " + (i++) + ": " + point);

            point = point.replace("\\(", "").replace("\\)", "");
            String[] s3 = point.split(";");
            tp.add(new Point(Double.valueOf(s3[0]), Double.valueOf(s3[1]),
                             Double.valueOf(s3[2])));

        }

        sf.add(new Surface((Point[]) tp.toArray()));
        System.out.println();
    } 
```

**输出**： -

```
Polygon Coordinates: 
Coordinate 1: (1;1;2)
Coordinate 2: (5;1;2)
Coordinate 3: (5;1;1)

Polygon Coordinates: 
Coordinate 1: (1;3;2)
Coordinate 2: (5;3;2)
Coordinate 3: (5;1;2) 
```

**解释**： -

*   `(\\(\\d;\\d;\\d\\),?){3}`- 这匹配`3 groups`由内部`3 integers`分隔，与分隔由。然后它捕获完整的匹配。`;``brackets``groups``comma(,)`

*   `matcher.find()`- 从字符串中查找与上述模式匹配的所有内容。

*   `matcher.group(0)`- 获得完整的比赛。

*   拆分完整的比赛`comma(,)`以获得单独的坐标

*   如果你想匹配`double`或`integer`用 分隔的值`;`，你需要`Regex`稍微改变一下。我留给你的。

*   有关[各种](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)`quantifiers`. _ `{3}`在上面的正则表达式中是量词之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T12:52:15.553

嗯，它闻起来像 JSON，但如果你想使用 split，那么

*   让组找到所有匹配项`/[\\d;]+/`
*   要从组中获取数字，请使用 split 使用`";"`

* * *

### 演示：

```
import java.util.*;
import java.lang.*;
import java.util.regex.*;

class Main
{
  public static void main (String[] args) throws java.lang.Exception
  {
    String str = "{[(1;1;2),(5;1;2),(5;1;1)],[(1;3;2),(5;3;2),(5;1;2)]}";
    Pattern pattern = Pattern.compile("[\\d;]+");
    Matcher matcher = pattern.matcher(str);
    while (matcher.find()) {
        System.out.println(matcher.group(0));
        String[] numbers = matcher.group(0).split(";");
        int i = 1;
        for (String number: numbers) {
            System.out.println("Parameter #" + i + ": " + number);
            i++;
        }
        System.out.println();
    }   
  }
} 
```

* * *

### 输出：

```
1;1;2
Parameter #1: 1
Parameter #2: 1
Parameter #3: 2

5;1;2
Parameter #1: 5
Parameter #2: 1
Parameter #3: 2

5;1;1
Parameter #1: 5
Parameter #2: 1
Parameter #3: 1

1;3;2
Parameter #1: 1
Parameter #2: 3
Parameter #3: 2

5;3;2
Parameter #1: 5
Parameter #2: 3
Parameter #3: 2

5;1;2
Parameter #1: 5
Parameter #2: 1
Parameter #3: 2 
```

[**在这里**](http://ideone.com/NxKFwg)测试这个演示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T12:55:34.213

更好的方法是将所需数据分组匹配

```
Matcher matcher1 = Pattern.compile("(?<=\\{).*?(?<=\\})").matcher(yourInput);
while(mather1.find())
{
    Matcher matcher2 = Pattern.compile("(?<=\\[).*?(?=\\])").matcher(matcher1.Group());
    while (matcher2.find()) 
    {
        Matcher matcher3 = Pattern.compile("(\\d+);(\\d+);(\\d+)").matcher(matcher2.Group());
    while (matcher3.find()) 
    {

        tp.add(new Point(Double.valueOf(matcher3.Group(1),Double.valueOf(matcher3.Group(2)),Double.valueOf(matcher3.Group(3))));
    }
       sf.add(new Surface((Point[]) tp.toArray()));  
    }
convShape.add(new Body((Surface[])sf.toArray()));   
} 
```

# c++ - 将 Objective C NSRange 转换为 C++ 代码？

> ID：13121883
> 
> 赞同：2
> 
> 时间：2012-10-29T12:43:39.960
> 
> 标签：c++, cocos2d-iphone, cocos2d-x

我正在阅读 Vrope 的 raynderwilch 教程，我几乎将该教程中的所有代码移植到 C++，但我坚持使用这个函数，我被困住了如何将此函数移植到 cocos2d-x c++？我从来没有进入过目标C，所以不能这样做需要你的帮助

```
-(VRope *)cutRopeInStick:(VStick *)stick newBodyA:(b2Body*)newBodyA newBodyB:(b2Body*)newBodyB {

// 1-First, find out where in your array the rope will be cut
int nPoint = [vSticks indexOfObject:stick];

// Instead of making everything again you'll just use the arrays of
// sticks, points and sprites you already have and split them

// 2-This is the range that defines the new rope
NSRange newRopeRange = (NSRange){nPoint, numPoints-nPoint-1};

// 3-Keep the sticks in a new array
NSArray *newRopeSticks = [vSticks subarrayWithRange:newRopeRange];

// 4-and remove from this object's array
[vSticks removeObjectsInRange:newRopeRange];

// 5-Same for the sprites
NSArray *newRopeSprites = [ropeSprites subarrayWithRange:newRopeRange];
[ropeSprites removeObjectsInRange:newRopeRange];

// 6-Number of points is always the number of sticks + 1
newRopeRange.length += 1;
NSArray *newRopePoints = [vPoints subarrayWithRange:newRopeRange];
[vPoints removeObjectsInRange:newRopeRange];

// 7-The removeObjectsInRange above removed the last point of
// this rope that now belongs to the new rope. You need to clone
// that VPoint and add it to this rope, otherwise you'll have a
// wrong number of points in this rope
VPoint *pointOfBreak = [newRopePoints objectAtIndex:0];
VPoint *newPoint = [[VPoint alloc] init];
[newPoint setPos:pointOfBreak.x y:pointOfBreak.y];
[vPoints addObject:newPoint];

// 7-And last: fix the last VStick of this rope to point to this new point
// instead of the old point that now belongs to the new rope
VStick *lastStick = [vSticks lastObject];
[lastStick setPointB:newPoint];
[newPoint release];

// 8-This will determine how long the rope is now and how long the new rope will be
float32 cutRatio = (float32)nPoint / (numPoints - 1);

// 9-Fix my number of points
numPoints = nPoint + 1;

// Position in Box2d world where the new bodies will initially be
b2Vec2 newBodiesPosition = b2Vec2(pointOfBreak.x / PTM_RATIO, pointOfBreak.y / PTM_RATIO);

// Get a reference to the world to create the new joint
b2World *world = newBodyA->GetWorld();

// 10-Re-create the joint used in this VRope since bRopeJoint does not allow
// to re-define the attached bodies
b2RopeJointDef jd;
jd.bodyA = joint->GetBodyA();
jd.bodyB = newBodyB;
jd.localAnchorA = joint->GetLocalAnchorA();
jd.localAnchorB = b2Vec2(0, 0);
jd.maxLength = joint->GetMaxLength() * cutRatio;
newBodyB->SetTransform(newBodiesPosition, 0.0);

b2RopeJoint *newJoint1 = (b2RopeJoint *)world->CreateJoint(&jd); //create joint

// 11-Create the new rope joint
jd.bodyA = newBodyA;
jd.bodyB = joint->GetBodyB();
jd.localAnchorA = b2Vec2(0, 0);
jd.localAnchorB = joint->GetLocalAnchorB();
jd.maxLength = joint->GetMaxLength() * (1 - cutRatio);
newBodyA->SetTransform(newBodiesPosition, 0.0);

b2RopeJoint *newJoint2 = (b2RopeJoint *)world->CreateJoint(&jd); //create joint

// 12-Destroy the old joint and update to the new one
world->DestroyJoint(joint);
joint = newJoint1;

// 13-Finally, create the new VRope
VRope *newRope = [[VRope alloc] initWithRopeJoint:newJoint2
                                      spriteSheet:spriteSheet
                                           points:newRopePoints
                                           sticks:newRopeSticks
                                          sprites:newRopeSprites];
return [newRope autorelease]; 
```

}

Box2d 部分与 NSRange 相同，请帮助我将其转换为在 cocos2d-x 中使用

在这种情况下，NSRange 和 NSArray 的替代方案是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T12:45:19.127

由于 NSRange 只是一个普通的 C 结构，您也可以在 C++ 中简单地定义它：

```
typedef struct {
    unsigned long location;
    unsigned long length;
} NSRange; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T12:53:02.633

正如 H2CO3 所说，NSRange 是一个 C 结构，可以轻松定义。

对于 NSArray，您可能最好使用 std::vector< VStick > 之类的东西。

您可以创建一个类似于上述 NSArray 的新数组，如下所示：

```
std::vector< VStick > newRopeSticks;
newRopeSticks.reserve( range.length );
std::copy( vSticks.begin() + range.Location, vSticks.begin() + range.Location + range.length, std::back_inserter( newRopeSticks ) ); 
```

（由于内存错误，我可能有点错误，但这个概念基本上应该可以正常工作）

在回答您的评论时，它不是正确的方法，不。索引不是迭代器。可以取消引用迭代器以将您感兴趣的对象作为一个对象。

您最好使用迭代器范围调用擦除，如下所示：

```
vSticks.erase( vSticks.begin() + range.Location, vSticks.begin() + range.Location + range.Length ); 
```

这将更有效率，因为每次从向量中删除一个元素都会导致它上面的元素被向下复制一个（因为它本质上是一个动态创建的数组）。通过擦除范围，如上所述，它将删除范围内的所有元素，然后复制上面的所有对象。这样做的好处是只复制一次而不是每次擦除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T22:45:33.470

我不知道 NSRange 的任何解决方案，但绝对可以使用 cocos2d-x 中的 CCArray 替换 NSArray。

# java - 从 OOP 设计的角度来看，通过对象传递参数的最有效实现是什么？

> ID：13121884
> 
> 赞同：0
> 
> 时间：2012-10-29T12:43:41.287
> 
> 标签：java, android, oop, parameter-passing

![在此处输入图像描述](../Images/57e1467d8125cdf5a84311f324907015.png)

我想创建一种方法来创建任意数量的播放器对象（存储在 PlayLogic 中的 ArrayList 中）。现在我决定只创建 2 个玩家对象。我通过调用在 PlayActivity 中对此进行硬编码`createPlayers(2)`，所以这个的实现.. 将参数传递给 Play 然后将参数传递给创建 2 个播放器对象的 PlayLogic 会更好.. 还是直接调用 PlayLogic 会更好来自 PlayActivity？我希望我的设计能够反映有效的设计（所以我希望尽可能少的关系，不确定这是否是正确的 UML 术语..）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T12:50:49.223

在此过程中增加一层会产生微不足道的开销。这种开销不足以使设计变得混乱（不正确的抽象）。有额外开销的原因是因为您在多层方法中向其他人询问信息。例如：

2 个人可以比 3 个人使用相同的信息更快地相互交流，请遵循以下示例：

```
A -> B (what is 2+2)  
B-> A (4) 

VICE

A->B (what is 2+2)  
B->C (what is 2+2)  
C->B (4)  
B->A(4) 
```

如果您进一步谈论性能，但选择使用`ArrayList`，则可能是此数据结构不正确，我们需要有关底层对象模型和执行期间最常执行的操作的更多信息。

# java - 使用 System.currentTimeMillis() 每秒运行一次代码

> ID：13121885
> 
> 赞同：12
> 
> 时间：2012-10-29T12:43:48.233
> 
> 标签：java, loops, time

我正在尝试使用 System.currentTimeMillis(); 每秒运行一行代码。

编码：

```
 while(true){
           long var = System.currentTimeMillis() / 1000;
           double var2 = var %2;

           if(var2 == 1.0){

               //code to run

           }//If():

        }//While 
```

我要运行的代码运行多次，因为由于无限的整个循环，var2 多次设置为 1.0。我只想在 var2 第一次设置为 1.0 时运行代码行，然后每次 var2 在 0.0 之后变为 1.0 时再次运行。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-29T12:53:04.800

如果您想忙于等待秒数更改，可以使用以下方法。

```
long lastSec = 0;
while(true){
    long sec = System.currentTimeMillis() / 1000;
    if (sec != lastSec) {
       //code to run
       lastSec = sec;
    }//If():
}//While 
```

更有效的方法是休眠到下一秒。

```
while(true) {
    long millis = System.currentTimeMillis();
    //code to run
    Thread.sleep(1000 - millis % 1000);
}//While 
```

另一种方法是使用 ScheduledExecutorService

```
ScheduledExecutorService ses = Executors.newSingleThreadScheduledExecutor();

ses.scheduleAtFixedRate(new Runnable() {
    @Override
    public void run() {
        // code to run
    }
}, 0, 1, TimeUnit.SECONDS);

// when finished
ses.shutdown(); 
```

这种方法的优点是

*   您可以让多个不同时期的任务共享同一个线程。
*   你可以有非重复的延迟或异步任务。
*   您可以在另一个线程中收集结果。
*   您可以使用一个命令关闭线程池。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-29T12:49:37.103

我会使用 java[执行](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Executors.html)程序库。您可以创建一个[ScheduledPool](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Executors.html#newScheduledThreadPool%28int%29)，它接受一个可运行的并且可以在您想要的任何时间段内运行。例如

```
Executors.newSingleThreadScheduledExecutor().scheduleAtFixedRate(new MyRunnable(), 0, 5, TimeUnit.SECONDS); 
```

将每 5 秒运行一次 MyRunnable 类。MyRunnable 必须实现 Runnable。这样做的问题是它每次都会（有效地）创建一个新线程，这可能是可取的，也可能不是可取的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-29T12:45:03.533

您应该必须使用[java.util.Timer](http://docs.oracle.com/javase/6/docs/api/java/util/Timer.html)和`java.util.TimerTask`类。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-29T12:45:36.213

使用`Thread.sleep();`将非常适合您的情况。

```
 while(true)
 {
    Thread.sleep(1000); // Waiting before run.
    // Actual work goes here.
 } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-29T12:52:36.663

首选方式：

```
ScheduledExecutorService scheduler = Executors.newSingleThreadScheduledExecutor(); 
```

然后传入 Runnables，如：

```
scheduler.scheduleWithFixedDelay(myRunnable, initDelay, delay, TimeUnit.MILLISECONDS); 
```

我不会使用定时器。调度程序旨在处理计时器可能导致的问题。此外，Thread.sleep 非常适合一个简单的程序，您可以快速编写该程序以用于概念证明类型的东西，但我不会在企业世界中使用它。

# python - 在 Python 中连接代码对象

> ID：13121887
> 
> 赞同：0
> 
> 时间：2012-10-29T12:44:06.653
> 
> 标签：python

我想动态地将多个函数（列表未知）收集到一个函数中，我想出了如何使用 types.FunctionType 动态创建一个 python 函数。但是，第一个参数是代码对象，不能是代码对象的列表。如何从多个函数创建单个函数？

谢谢你的回答，杰罗姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T12:49:25.620

我不知道如何连接代码，我认为你不能在 python 中可靠地做到这一点。您可能会考虑将这些功能链接在一起......像这样。

```
>>> def a(n):
    return n + 1

>>> def b(n):
    return n + 2

>>> funcs =[a,b]
>>> a = 0
>>> for f in funcs:
        a = f(a)

>>> print a
3 
```

# matlab - 在matlab中更改电影尺寸

> ID：13121889
> 
> 赞同：4
> 
> 时间：2012-10-29T12:44:11.737
> 
> 标签：matlab, resize, movie, binning

在执行 2 倍合并后，我正在尝试使用“电影”功能显示来自外部摄像头的实时视频。我的原始视频尺寸是 768x576。但是，当我对像素进行分类时，我会得到一个 384x288 的图像，当它显示时，它看起来是原始视频大小的一半。有什么办法可以增加电影的显示大小，使其看起来与原始大小相同？换句话说，我的像素看起来会是两倍大小。

我试过使用`set(gca,'Position'...)`，但它不会改变我电影的大小。

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T13:16:51.193

我将使用[文档](http://www.mathworks.nl/help/matlab/ref/movie.html)中的示例电影。

假设你有一堆帧：

```
figure('Renderer','zbuffer')
Z = peaks;
surf(Z); 
axis tight
set(gca,'NextPlot','replaceChildren');
% Preallocate the struct array for the struct returned by getframe
F(20) = struct('cdata',[],'colormap',[]);
% Record the movie
for j = 1:20 
    surf(.01+sin(2*pi*j/20)*Z,Z)
    F(j) = getframe;
end 
```

在结尾处`help movie`，它说：

> MOVIE(H,M,N,FPS,LOC) 指定播放电影的位置，相对于对象 H 的左下角，以像素为单位，无论对象的 Units 属性值如何。LOC = [XY 未使用 未使用]。LOC 是一个 4 元素位置向量，仅使用其中的 X 和 Y 坐标（电影播放时使用其记录的宽度和高度）。

因此，无法以比录制时更大的尺寸显示电影。您必须放大像素以使其以更大的尺寸显示：

```
% blow up the pixels
newCdata = cellfun(@(x) x(...
    repmat(1:size(x,1),N,1), ...         % like kron, but then
    repmat(1:size(x,2), N,1), :), ...    % a bit faster, and suited 
    {F.cdata}, 'UniformOutput', false);  % for 3D arrays

% assign all new data back to the movie
[F.cdata] = newCdata{:};

% and play the resized movie
movie(F,10) 
```

请注意，这不会因可读性而赢得任何奖励，因此如果您要使用它，请附上描述它的作用的评论。

# css - 对于 CSS3 线性渐变，如果我们只考虑诸如 R 之类的一个，R、G、B 分量是否会以线性方式变化？

> ID：13121890
> 
> 赞同：1
> 
> 时间：2012-10-29T12:44:11.607
> 
> 标签：css, linear-gradients

如果我在 CSS 中定义了一个线性渐变并且它以渐变的形式出现在屏幕上，那么红色值是否以恒定速率变化。（即对于整个梯度长度而言，它是红色的导数常数）。对于绿色和蓝色的颜色分量，同样的问题。

渐变可以从任何颜色到任何其他颜色。例如，一种颜色可能是#FF4400，另一种是#5599FF（只是随机颜色）。红色分量是否线性变化？

我指的是 CSS3 线性渐变，一个例子在这里：[http ://dev.opera.com/articles/view/css3-linear-gradients/](http://dev.opera.com/articles/view/css3-linear-gradients/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T13:18:27.977

是的，渐变中两个色标之间每个颜色分量值的变化率是线性的。从规范：

> 在每个色标处，线条是色标的颜色。在两个色标之间，线的颜色在两个色标的颜色之间线性插值，插值发生在预乘的 RGBA 空间中。

[§4.4。图像值模块的渐变色标](http://www.w3.org/TR/css3-images/#color-stop-syntax)包含详细信息和示例，我相信它们可以深入解决您的问题。

不过，目前某些浏览器在正确插入渐变色标时存在问题。看到[这个问题](https://stackoverflow.com/questions/7241991/browser-handling-of-css-transparent-in-gradients)。

# ruby-on-rails - 如何避免像@invoice.customer.address.street 等方法调用链？

> ID：13121894
> 
> 赞同：1
> 
> 时间：2012-10-29T12:44:16.620
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我有一些模型和视图代码，如下所示

```
class Address < ActiveRecord::Base
  belongs_to :customer
end

class Customer < ActiveRecord::Base
  has_one :address
  has_many :invoices
end

class Invoice < ActiveRecord::Base
  belongs_to :customer
end 
```

此代码显示了一个简单的发票结构，客户只有一个地址。显示发票地址行的视图代码如下：

```
<%= @invoice.customer.name %>
<%= @invoice.customer.address.street %>
<%= @invoice.customer.address.city %>,
<%= @invoice.customer.address.state %>
<%= @invoice.customer.address.zip_code %> 
```

上面的视图代码并不理想。为了正确封装，发票不应跨越客户对象到达地址对象的街道属性。因为，例如，如果将来您的应用程序要更改，以便客户同时拥有帐单地址和送货地址，那么您的代码中跨越这些对象以检索街道的每个地方都会中断并且需要更改。我怎样才能避免这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T12:48:19.520

一个简单的解决方案是客户有一个方法可以返回其主地址，例如：

```
class Customer < ActiveRecord::Base
  def main_address
    self.address
  end
end 
```

如果您仅通过此方法访问其地址，则当它具有多个地址时，只需更改`main_address`方法以执行您想做的任何事情。

**编辑1：**

另一种选择是使用@soundar 建议的[委托](https://github.com/rails/rails/blob/master/activesupport/lib/active_support/core_ext/module/delegation.rb)

```
class Invoice < ActiveRecord::Base
  belongs_to :customer
  delegate :address, :to => :customer
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T13:19:29.417

您可以使用委托功能来减少函数调用的顺序。

```
class Invoice < ActiveRecord::Base
  belongs_to :customer
  delegate :address, :to => :customer
end

<%= @invoice.customer.name %>
<%= @invoice.address.street %>
<%= @invoice.address.city %>,
<%= @invoice.address.state %>
<%= @invoice.address.zip_code %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T06:32:15.887

为避免刚刚描述的问题，请务必遵循`Law of Demeter`，也称为`Principle of Least Knowledge`。

要遵循得墨忒耳法则，您可以将上面的代码重写如下：

```
class Address < ActiveRecord::Base
  belongs_to :customer
end

class Customer < ActiveRecord::Base
  has_one :address
  has_many :invoices

  def street
    address.street
  end

  def city
    address.city
  end

  def state
    address.state
  end

end

class Invoice < ActiveRecord::Base
  belongs_to :customer

  def customer_name
    customer.name
  end

  def customer_street
    customer.street
  end

  def customer_state
    customer.state
  end
end 
```

您可以将视图代码更改为以下内容：

```
<%= @invoice.customer_name %>
<%= @invoice.customer_street %>
<%= @invoice.customer_city %>
<%= @invoice.customer_state %> 
```

在上面的代码中，**Invoice**上的公共接口已经被可以说与发票接口的其余部分无关的方法污染了。这是得墨忒耳法则的一个普遍缺点，它并不是特别针对 Ruby on Rails。

现在，该方法是类级别的`delegate`方法。此方法提供了一种快捷方式，用于指示将在您的对象上创建的一个或多个方法实际上是由相关对象提供的。使用此委托方法，您可以像这样重写您的示例：

```
class Address < ActiveRecord::Base
  belongs_to :customer
end

class Customer < ActiveRecord::Base
  has_one :address
  has_many :invoices

  delegate :street, :city, :state, :to => :address
end

class Invoice < ActiveRecord::Base
  belongs_to :customer

  delegate :name, :street, :city, :state, :to => :customer, :prefix => true
end 
```

在这种情况下，您不必更改视图代码，方法就像以前一样公开：

```
<%= @invoice.customer_name %>
<%= @invoice.customer_street %>
<%= @invoice.customer_city %>
<%= @invoice.customer_state %> 
```

# java - 在 main 上序列化泛型类型

> ID：13121895
> 
> 赞同：0
> 
> 时间：2012-10-29T12:44:21.003
> 
> 标签：java, serialization

请我想序列化几种类型的数组以了解内存中最差的情况。所以我创建了一个函数来序列化一个泛型类型`int calcul(T a)`，它返回一个 int 的大小。

```
public class NewClass<T> {
    public static void main(String[] args) throws IOException {
       byte[] tabByte = new byte[56666];
       Byte[] tabByte2 = new Byte[56666];
       int[] tabInt = new int[56666];
       ArrayList<Byte> arr=new ArrayList<Byte>(56666);  

       System.out.println("size array byte[]"+calcul(tabByte));
       System.out.println("size array Byte[]"+calcul(tabByte2));
       System.out.println("size array int[]"+calcul(tabInt));
       System.out.println("size array ArrayList<Byte>"+calcul(arr));
    }

    static int calcul(T a) throws IOException {
        ByteArrayOutputStream byteOutput = new ByteArrayOutputStream();
        ObjectOutputStream stream = new ObjectOutputStream(byteOutput);
        stream.writeObject(a);
        int a =  byteOutput.toByteArray().length;
        stream.flush();
        stream.close();
        byteOutput.flush();
        byteOutput.close();    

        return a;
    }

} 
```

但我有这个错误

```
non-static type variable T cannot be referenced from a static context 
```

如何将通用变量设为静态并运行我的程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T12:50:55.800

您可以按照这种方法

`static int calcul(T extends Serialazable a) throws IOException;`

谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T12:46:59.207

泛型有什么用？我想你想要

```
 static int calcul(Serializable a) throws IOException; 
```

并且您应该在冲洗和关闭流*之后取其长度。*

为了回答您最初的问题，您可以计算（并在此处阅读）原始和包装的 ArrayList 和数组的内存要求（但实验也应该具有指导意义）。

# php - 在 Facebook 应用程序中嵌入 Yii 模块页面

> ID：13121899
> 
> 赞同：1
> 
> 时间：2012-10-29T12:44:33.540
> 
> 标签：php, facebook, facebook-graph-api, yii, integration

我创建了 Yii 测验模块，我也想在 Facebook 应用程序（Facebook 端）中使用它。
它可以通过 iframe 完成，但生成的页面也有菜单和许多其他不必要的（在这种情况下）东西。Yii 是否可以只显示生成的模块代码而不显示网站的其余部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T13:50:44.590

尝试为该模块使用不同的布局。首先，您可以将布局文件夹和布局文件添加到该模块，例如：*/protected/modules/quiz/views/layouts/quizlayout.php*。所以这个新的*quizlayout.php*应该是这个模块中所有视图的布局。

为此，您可以在 QuizModule 类中设置*quizmodule的*[`layout`属性](http://www.yiiframework.com/doc/api/1.1/CWebModule#layout-detail "http://www.yiiframework.com/doc/api/1.1/CWebModule#layout-detail")，如下所示（在*QuizModule.php*中）：*`init()`*

 **```
class QuizModule extends CWebModule {

    public function init() {
        // this method is called when the module is being created
        // you may place code here to customize the module or the application

        // import the module-level models and components
        $this->setImport(array(
            'quiz.models.*',
            'quiz.components.*',
        ));
        $this->layout='quizlayout';
    }

    //...
} 
```

现在默认情况下，gii 生成的模块的控制器是*component/Controller.php*文件中类的子`Controller`类。并且该类定义了 a ，因此如果您具有相同的结构，则上述方法将不起作用，并且您必须覆盖模块控制器中的布局。*但是，您可以在QuizModule.php*中的函数中执行此操作，而不是进入每个控制器并添加一行：*`Controller``layout``beforeControllerAction($controller, $action)`*

 **```
public function beforeControllerAction($controller, $action) {

    if(parent::beforeControllerAction($controller, $action)) {
        // this method is called before any module controller action is performed
        // you may place customized code here

        $controller->layout='quizlayout';

        return true;
    }
    else
        return false;
} 
```

**编辑：**

当然，您的*quizlayout.php*不应该有菜单代码和任何额外的东西，但至少该`echo $content`行应该在那里，正如爱斯基摩人的回答中所提到的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T13:13:31.710

在你的 protected/views 中有一个名为“main.php”的文件，这是你的主布局文件，它会在 $this->render 调用的任何视图周围呈现

要删除菜单等。删除正文中的所有内容，但以下行除外：

```
<?php echo $content; ?> 
```

显然把所有的东西都留在头上（.css 文件等......）****

# android - 在自定义列表视图中实现复选框

> ID：13121900
> 
> 赞同：0
> 
> 时间：2012-10-29T12:44:36.210
> 
> 标签：android, checkbox, custom-lists

我已经编写了代码来显示数据库中的内容列表，并且还能够单击特定项目并获取被单击项目的名称。但我想实现复选框并获取项目的值已选中，如何操作。我已采用自定义列表 row.xml

```
private void displayListView() {
        final Cursor cursor = dbHelper.fetchAllRecords();
        String[] columns = new String[] {
                RecordsDbAdapter.KEY_NAME,
                RecordsDbAdapter.KEY_BIRTHDAY,

        };
        int[] to = new int[] {
                R.id.name,
                R.id.birthdate,
        };
        dataAdapter = new SimpleCursorAdapter(
                this, R.layout.row,
                cursor,
                columns,
                to);
        ListView listView = (ListView) findViewById(R.id.list);
        listView.setAdapter(dataAdapter);

        listView.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                name = ((TextView) view.findViewById(R.id.name)) .getText().toString();
                BirtDate = ((TextView) view.findViewById(R.id.birthdate)) .getText().toString();
                Log.d("*************", name);
                Info=name+ " " +BirtDate+ " "+ "years";
                edt.setText(Info,TextView.BufferType.EDITABLE);
                topaste=edt.getText().toString();

            }
        });
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T12:51:52.103

你可以参考下面的代码来找到你的问题：

```
package com.windrealm.android;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.CheckBox;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.Toast;

public class PlanetsActivity extends Activity
{

    private ListView mainListView;
    private Planet[] planets;
    private ArrayAdapter<Planet> listAdapter;
    private Button check;
    private Context context;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        context = PlanetsActivity.this;
        check = (Button) findViewById(R.id.check);
        // Find the ListView resource.
        mainListView = (ListView) findViewById(R.id.mainListView);

        // When item is tapped, toggle checked properties of CheckBox and
        // Planet.
        mainListView
                .setOnItemClickListener(new AdapterView.OnItemClickListener()
                {
                    @Override
                    public void onItemClick(AdapterView<?> parent, View item,
                            int position, long id)
                    {
                        Planet planet = listAdapter.getItem(position);
                        planet.toggleChecked();
                        PlanetViewHolder viewHolder = (PlanetViewHolder) item
                                .getTag();
                        viewHolder.getCheckBox().setChecked(planet.isChecked());
                    }
                });

        // Create and populate planets.
        planets = (Planet[]) getLastNonConfigurationInstance();
        if (planets == null)
        {
            planets = new Planet[]
            { new Planet("Mercury"), new Planet("Venus"), new Planet("Earth"),
                    new Planet("Mars"), new Planet("Jupiter"),
                    new Planet("Saturn"), new Planet("Uranus"),
                    new Planet("Neptune"), new Planet("Ceres"),
                    new Planet("Pluto"), new Planet("Haumea"),
                    new Planet("Makemake"), new Planet("Eris") };
        }
        ArrayList<Planet> planetList = new ArrayList<Planet>();
        planetList.addAll(Arrays.asList(planets));

        // Set our custom array adapter as the ListView's adapter.
        listAdapter = new PlanetArrayAdapter(this, planetList);
        mainListView.setAdapter(listAdapter);

        check.setOnClickListener(new OnClickListener()
        {

            @Override
            public void onClick(View view)
            {
                for (int i = 0; i < listAdapter.getCount(); i++)
                {
                    Planet planet = listAdapter.getItem(i);
                    if (planet.isChecked())
                    {
                        Toast.makeText(context,
                                planet.getName() + " is Checked!!",
                                Toast.LENGTH_SHORT).show();
                    }
                }

            }
        });
    }

    /** Holds planet data. */
    private static class Planet
    {
        private String name = "";
        private boolean checked = false;

        public Planet()
        {
        }

        public Planet(String name)
        {
            this.name = name;
        }

        public Planet(String name, boolean checked)
        {
            this.name = name;
            this.checked = checked;
        }

        public String getName()
        {
            return name;
        }

        public void setName(String name)
        {
            this.name = name;
        }

        public boolean isChecked()
        {
            return checked;
        }

        public void setChecked(boolean checked)
        {
            this.checked = checked;
        }

        public String toString()
        {
            return name;
        }

        public void toggleChecked()
        {
            checked = !checked;
        }
    }

    /** Holds child views for one row. */
    private static class PlanetViewHolder
    {
        private CheckBox checkBox;
        private TextView textView;

        public PlanetViewHolder()
        {
        }

        public PlanetViewHolder(TextView textView, CheckBox checkBox)
        {
            this.checkBox = checkBox;
            this.textView = textView;
        }

        public CheckBox getCheckBox()
        {
            return checkBox;
        }

        public void setCheckBox(CheckBox checkBox)
        {
            this.checkBox = checkBox;
        }

        public TextView getTextView()
        {
            return textView;
        }

        public void setTextView(TextView textView)
        {
            this.textView = textView;
        }
    }

    /** Custom adapter for displaying an array of Planet objects. */
    private static class PlanetArrayAdapter extends ArrayAdapter<Planet>
    {

        private LayoutInflater inflater;

        public PlanetArrayAdapter(Context context, List<Planet> planetList)
        {
            super(context, R.layout.simplerow, R.id.rowTextView, planetList);
            // Cache the LayoutInflate to avoid asking for a new one each time.
            inflater = LayoutInflater.from(context);
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent)
        {
            // Planet to display
            Planet planet = (Planet) this.getItem(position);

            // The child views in each row.
            CheckBox checkBox;
            TextView textView;

            // Create a new row view
            if (convertView == null)
            {
                convertView = inflater.inflate(R.layout.simplerow, null);

                // Find the child views.
                textView = (TextView) convertView
                        .findViewById(R.id.rowTextView);
                checkBox = (CheckBox) convertView.findViewById(R.id.CheckBox01);

                // Optimization: Tag the row with it's child views, so we don't
                // have to
                // call findViewById() later when we reuse the row.
                convertView.setTag(new PlanetViewHolder(textView, checkBox));

                // If CheckBox is toggled, update the planet it is tagged with.
                checkBox.setOnClickListener(new View.OnClickListener()
                {
                    public void onClick(View v)
                    {
                        CheckBox cb = (CheckBox) v;
                        Planet planet = (Planet) cb.getTag();
                        planet.setChecked(cb.isChecked());
                    }
                });
            }
            // Reuse existing row view
            else
            {
                // Because we use a ViewHolder, we avoid having to call
                // findViewById().
                PlanetViewHolder viewHolder = (PlanetViewHolder) convertView
                        .getTag();
                checkBox = viewHolder.getCheckBox();
                textView = viewHolder.getTextView();
            }

            // Tag the CheckBox with the Planet it is displaying, so that we can
            // access the planet in onClick() when the CheckBox is toggled.
            checkBox.setTag(planet);

            // Display planet data
            checkBox.setChecked(planet.isChecked());
            textView.setText(planet.getName());

            return convertView;
        }

    }

    public Object onRetainNonConfigurationInstance()
    {
        return planets;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T13:02:57.283

将以下代码添加到您的自定义适配器类中，它将解决您的问题。

```
@Override
public int getViewTypeCount() {
    // TODO Auto-generated method stub
    return mName.size();
}

@Override
public int getItemViewType(int position) {
    // TODO Auto-generated method stub
    return position;
} 
```

# asp.net-mvc - Infragistics 网格的 GET 返回空响应

> ID：13121902
> 
> 赞同：3
> 
> 时间：2012-10-29T12:45:06.040
> 
> 标签：asp.net-mvc, razor, infragistics, ignite-ui, iggrid

我正在尝试使用 Infragistics 的网格来显示我的数据库中的项目列表。我在带有 Razor 引擎的 MVC 应用程序中使用代码优先方法和实体框架。除了 Infragistics 网格之外，视图中的所有内容都运行良好。

这是我的家庭视图：

```
@using Infragistics.Web.Mvc
@model IEnumerable<BusinessModel.Models.TestPlan>

@{
    ViewBag.Title = "Home";
}

@( Html.Infragistics().Grid<BusinessModel.Models.TestPlan>(Model)
.AutoGenerateColumns(true)
.DataSourceUrl(Url.Action("igListTestPlan"))
.DataBind()
.Render()) 
```

这是我的控制器：

```
[GridDataSourceAction]
public ActionResult igListTestPlan()
{
    return View(service.getListTestPlan());
} 
```

使用萤火虫我可以清楚地看到发送的请求带有状态代码“200 OK”，但响应选项卡是空的。它还会在控制台中导致错误（在 infragistics.js 中）：

```
Uncaught TypeError: Cannot read property 'length' of undefined 
```

我想这是因为空的响应。

**我尝试了什么：**

调试我的控制器显示我`return View(service.getListTestPlan());`没有返回一个空列表：我有 3 个有效项目。

我也尝试过`Html.Infragistics().Grid<BusinessModel.Models.TestPlan>(Model__.ToList())`，但没有任何改变。还`Html.Infragistics().Grid(Model)`告诉我我的参数无效

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T09:23:02.370

我想我很清楚为什么你会得到这个，也发生在我身上。

MVC 包装器为网格模型处理服务器上的数据的方式提供默认值（将数据源序列化为具有数据“记录”和支持“元数据”的对象）。但是，如果您自己这样做，因为您没有定义自己的键，那么您会被用于过滤响应的默认键“记录”卡住，并且因为它不存在......好吧，您会得到“未定义”的数据到网格:)

所以解决方案：

*   1）使用网格的“ResponseDataKey”属性包装您的响应并定义匹配键。我之所以建议这样做，是因为据我记得将响应包装在单个对象中是一种好习惯——认为这会带来一些安全隐患。

*   2）如果您不想这样做并且只想让它*现在*工作，那么将“ResponseDataKey”设置为空字符串（“”会这样做），这样您的响应将被正确过滤（或者更确切地说不是）。

在将网格直接绑定到视图中的模型数据的第二部分 - 据我所知，您正确地得到了错误。[DataSource 属性](http://help.infragistics.com/NetAdvantage/jQuery/2012.2/CLR4.0?page=Infragistics.Web.Mvc~Infragistics.Web.Mvc.GridModel~DataSource.html)明确指出源必须实现 IQueryable 而不是 IEnumerable 。在那里拍一个 .AsQueryable() ，它也应该可以正常工作。

让我知道这是否有帮助:)

# java - MySQL 事务删除和 Java

> ID：13121907
> 
> 赞同：0
> 
> 时间：2012-10-29T12:45:23.750
> 
> 标签：java, mysql, transactions, foreign-keys, constraints

我有这样的表：

```
Table A:  
`id | name`

Table B:  
`id | A_id | ....`  

A_id is a foreign key to Table A, the Engine is InnoDB 
```

这是失败的代码：

```
 String[] cleanupQueries = new String[] { "DELETE FROM B WHERE A_id = (SELECT id FROM A WHERE name = 'test')",
                                            "DELETE FROM A WHERE name = 'test'" };

    Connection connection;
    try {
        connection = DriverManager.getConnection(getConnectionString());
        connection.setAutoCommit(false);
    } catch (SQLException e) {
        throw new RuntimeException("Error establishing a database connection!");
    }

    try {
        for(String cleanupQuery : cleanupQueries) {
            PreparedStatement statement = connection.prepareStatement(cleanupQuery);
            statement.executeUpdate(); //FAILS WHEN EXECUTING THE SECOND QUERY
        }
    } catch(SQLException e) {
        throw new RuntimeException("Error while executing the queries in the transactional context!");
    }

    try {
        connection.commit();
    } catch (SQLException e) {
        rollback(connection);
        throw new RuntimeException("Error while comitting!");
    } 
```

我得到的例外是： `com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Cannot delete or update a parent row: a foreign key constraint fails ('DATABASE/TABLE', CONSTRAINT 'FK_B_A' FOREIGN KEY ('FK_A') REFERENCES 'A' ('ID') ON DEL)`

数据库不允许我删除 A，而 B 还剩下，但是第一个查询删除了所有 B。我想完全删除所有 B 和它们引用的 A。

我不想将表更改为具有级联删除。我该怎么做才能使代码正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T13:04:55.970

只需在删除外键约束时添加级联为真。删除原始父条目时，子表条目会自动删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T13:12:46.477

尝试：

```
"DELETE FROM B WHERE A_id = (SELECT id FROM A WHERE name IN 'test')" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T12:51:45.457

错误的原因是

外键引用了表 A id，因此如果您想删除 F_Key ，首先您应该删除该外键的子引用值，然后才可以删除父。

如果错了请纠正我..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-11T23:32:50.303

由于子行在同一个事务中被删除，因此删除的行仍然可见，因此无法删除父行。这可能是因为连接上的事务隔离设置。我会尝试不同的级别，看看哪一个允许它。

# jaxb - JAXB 按原样使用 String

> ID：13121914
> 
> 赞同：7
> 
> 时间：2012-10-29T12:45:48.197
> 
> 标签：jaxb, jaxb2

我使用 REST，我想知道是否可以告诉 jaxb 将字符串字段“按原样”插入到传出的 xml 中。当然，我会在返回之前将其解包，但我想保存这一步。

```
@XmlRootElement(name="unnestedResponse")
public class Response{
 @Insert annotation here ;-)
 private String alreadyXml;
 private int otherDate; ...
} 
```

是否有可能告诉 JAXB 只使用字符串而不转义？我希望客户端不必解析我的响应然后解析该字段。

问候，米

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-29T14:10:57.530

您可以使用`@XmlAnyElement`并指定 a`DomHandler`将 XML 文档的一部分保留为`String`.

**顾客**

```
import javax.xml.bind.annotation.*;

@XmlRootElement
public class Customer {

    private String bio;

    @XmlAnyElement(BioHandler.class)
    public String getBio() {
        return bio;
    }

    public void setBio(String bio) {
        this.bio = bio;
    }

} 
```

**生物处理器**

```
import java.io.*;
import javax.xml.bind.ValidationEventHandler;
import javax.xml.bind.annotation.DomHandler;
import javax.xml.transform.Source;
import javax.xml.transform.stream.*;

public class BioHandler implements DomHandler<String, StreamResult> {

    private static final String BIO_START_TAG = "<bio>";
    private static final String BIO_END_TAG = "</bio>";

    private StringWriter xmlWriter = new StringWriter();

    public StreamResult createUnmarshaller(ValidationEventHandler errorHandler) {
        return new StreamResult(xmlWriter);
    }

    public String getElement(StreamResult rt) {
        String xml = rt.getWriter().toString();
        int beginIndex = xml.indexOf(BIO_START_TAG) + BIO_START_TAG.length();
        int endIndex = xml.indexOf(BIO_END_TAG);
        return xml.substring(beginIndex, endIndex);
    }

    public Source marshal(String n, ValidationEventHandler errorHandler) {
        try {
            String xml = BIO_START_TAG + n.trim() + BIO_END_TAG;
            StringReader xmlReader = new StringReader(xml);
            return new StreamSource(xmlReader);
        } catch(Exception e) {
            throw new RuntimeException(e);
        }
    }

} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2011/04/xmlanyelement-and-non-dom-properties.html](http://blog.bdoughan.com/2011/04/xmlanyelement-and-non-dom-properties.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-07-31T10:46:10.297

遵循[bdoughan](https://stackoverflow.com/users/383861/bdoughan)的回答对我不起作用，因为当文本包含 '& 字符时（例如，在 URL 中或使用 HTML 实体（例如“”）时），我在编组过程中遇到错误。

我能够通过将 custom`DomHandler`的`marshal`方法更改为来解决这个问题

```
public Source marshal(String et, ValidationEventHandler veh) {
    Node node = new SimpleTextNode(et);
    return new DOMSource(node);
} 
```

其中`SimpleTextNode`实现Node接口如下：

```
class SimpleTextNode implements Node {

    String nodeValue = "";

    @Override    
    public SimpleTextNode(String nodeValue) {
        this.nodeValue = nodeValue;
    }

    @Override
    public short getNodeType() {
        return TEXT_NODE;
    }

    // the remaining methods of the Node interface are not needed during marshalling
    // you can just use the code template of your IDE...

    ...
} 
```

PS：我很想将此作为对bdoughan回答的评论，但不幸的是我的名声太小了:-(

# c# - 在 Linq 中创建一组由两行组成的对

> ID：13121915
> 
> 赞同：1
> 
> 时间：2012-10-29T12:45:50.833
> 
> 标签：c#, linq, linq-to-objects

从 SQL Server 存储过程“sp_help”的结果中，我们得到一个包含几个表的数据集。七，如果我是正确的。其中之一包含有关约束的信息。每个外键由该表中的两个连续行记录。第一行包含约束类型、名称和其他详细信息。它后面是一个空行，除了一列“constaint_keys”，它包含约束的列名引用。

其他约束类型在一行中描述。

关于如何使用 Linq 以某种方式“扁平化”这些信息的任何想法，我们可以确定任何由两行组成的对实际上是由行 {n, n + 1} 组成的

感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T13:14:35.300

通过两个收集 IEnumerable 的元素：

`data.Select((x, i) => new { Index = i, Value = x }).GroupBy(x => x.Index / 2)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T13:50:43.930

您可以使用**[Enumerable.Range()](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.range.aspx)**来获取要使用的索引范围：

```
var unflattenedConstraints = constraintsTable.Rows;
var constraints = from index in Enumerable.Range(0, unflattenedConstraints.Count / 2)
                                          .Select(x => x * 2)
                  let row1 = unflattenedConstraints[index]
                  let row2 = unflattenedConstraints[index + 1]
                  // Combine the rows 
```

# php - 在 PHP 脚本中使用 mysqlimport

> ID：13121919
> 
> 赞同：0
> 
> 时间：2012-10-29T12:46:05.387
> 
> 标签：php, mysql, mysqlimport

我正在尝试以编程方式将大量 CSV 文件导入 MySQL DB。

经过一番研究，我发现了 LOAD DATA，但这是不可能的，因为服务器不允许这样做。

然后，我发现**mysqlimport**是一个可行的替代方案。

这是正在发生的事情：

我从 FTP 服务器下载了很多 CSV 文件，然后一一执行以下操作：

```
exec("ln " . $path . $csv_file. " " . $path . "CSVs.txt");
exec("mysqlimport -u root -ppass --local --ignore-lines=1 --columns=column1,column2 " .  $path . "CSVs.txt>" . $path . "_.txt");
unlink($path . "CSVs.txt"); 
```

首先，我创建文件的符号链接（因为我没有设法使用与表名不同的文件名）然后，我执行**mysqlimport**命令，将输出发送到一个 txt 文件。最后，我删除了符号链接。

当我运行时，会创建和删除 CSV 临时文件，但在我的数据库和输出 txt 中都没有出现任何内容。

如果我在终端中回显命令并过去，它可以完美运行，但是在 exec 中，什么也没有发生。

我相信它与引号和反斜杠有关，但无法修复它。

任何帮助将不胜感激：P

编辑：我已经**chmod **ed **mysqlimpot** bin ......仍然没有工作！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T14:35:39.260

似乎 PHP 没有找到 mysqlimport 命令。所以，我不得不使用它的完整路径来使它工作！

# testing - 处理硒中的子窗口

> ID：13121921
> 
> 赞同：3
> 
> 时间：2012-10-29T12:46:07.370
> 
> 标签：testing, selenium, automation

我正在尝试使用 TestNG 访问 VCM 中的二级弹出窗口，即我单击父窗口上的“添加”按钮，然后它打开，然后我有其他字段要添加到子内容中，但我无法选择子内容窗口。

这是我的代码：

```
 selenium.open("http://xyz.com/AppConsole");
    selenium.type("name=j_username", "username");
    selenium.type("name=j_password", "password!");
    selenium.click("id=vign-login-button");
    selenium.waitForPageToLoad("30000");
    selenium.click("id=href_consoleMenus30");
    selenium.waitForPageToLoad("30000");
    selenium.click("link= Contents");
    selenium.waitForPageToLoad("30000");
    selenium.click("id=href_VignConsoleForm");
    selenium.waitForPopUp("createContentInstance_undefined", "30000");
    selenium.selectWindow("name=createContentInstance_undefined");
    selenium.click("link=XYZ");
    selenium.waitForPageToLoad("30000");
    selenium.click("id=o12_hierarchyBrowserForm");
    selenium.click("name=cmdOK");
    selenium.waitForPageToLoad("30000");
    selenium.type("id=ce_f508VgnVCM____", "Testing");
    selenium.select("id=ce_060859310VgnVCM____", "label=Counting");
    verifyTrue(selenium.isTextPresent("Forms"));
    selenium.click("name=coe_relator_butn_add_2468d");
    selenium.waitForPopUp("Add/Edit", "90000");
    selenium.selectWindow("Add/Edit");
    verifyEquals(selenium.getTitle(), "Add/Edit"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T08:46:43.310

我认为您可以按如下方式修改代码，它可能会正常工作。

```
 selenium.click("name=coe_relator_butn_add_2468d");
    try{
       Thread.sleep(5000);
    }catch(Exception e){
    }
    String titles = selenium.getAllWindowTitles();
    int i =0;
    while(i<titles.length){
       if(titles[i].equalsIgnoreCase("Add/Edit"))
         break;
       i++;
    }
    selenium.selectWindow(titles[i]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T17:38:25.570

我会与您分享对我有帮助的方法（我使用 selenium webDriver+java）：

```
 //Store the current window handle
             String winHandleBefore = driver.getWindowHandle();    

             //Perform the click operation that opens new window
fluentWait(By.xpath("....")).click();

driver.manage.timeouts.implicitWait(2,TimeUnit.SECONDS);

     //Switch to new window opened
             for(String winHandle : driver.getWindowHandles()){
                 driver.switchTo().window(winHandle);
             }

             String winHandleAfter = driver.getWindowHandle();
             // Perform the actions on new window

             driver.findElement(By.id("nav_aHighlight")).click();
             //Close the new window, if that window no more required
             driver.close();

             //Switch back to original browser (first window)

             driver.switchTo().window(winHandleBefore);

             //continue with original browser (first window)
....... 
```

# c++ - Qt或通用c++如何获取或检测c++中的主机

> ID：13121922
> 
> 赞同：0
> 
> 时间：2012-10-29T12:46:14.463
> 
> 标签：c++, qt, url, host

 [我有一个简单的应用程序，可以从网页获取所有链接，我使用 libexml2 解析 html 并提取 http 请求和 Qt QNetworkAccessManager 内部的 html 链接。现在的问题是如何自动检测链接的主机名，例如：

```
<a href="thelink.html" >
or 
<a href="../../../thelink.html" >  
or
<a href="../foo/boo/thelink.html" > 
i need to convert it to full host path like :
( just example .. ) 
<a href="http://www.myhost.com/thelink.html" >
or 
<a href="http://www.myhost.com/foo/boo/thelink.html" >  
or
<a href="http://www.myhost.com/m/thelink.html" > 
```

有没有办法以编程方式做到这一点？无需手动进行字符串操作](file.html) 

[如果您知道 perl 它的名称：如果可能，请从以下位置返回相对 URL：](file.html)[http ://search.cpan.org/~rse/lcwa-1.0.0/lib/lwp/lib/URI/URL.pm](http://search.cpan.org/~rse/lcwa-1.0.0/lib/lwp/lib/URI/URL.pm)

$url->rel([$base])

dosnt 工作的代码示例 (Qt) [http://qt.digia.com/support/](http://qt.digia.com/support/)

```
QString s("/About-us/");
QString base("http://qt.digia.com");
QString urlForReq;

     if(!s.startsWith("http:"))
     {       
         QString uu = QUrl(s).toString();
         QString   rurl = baseUrl.resolved(QUrl(s)).toString();
         urlForReq = rurl;
     } 
```

urlForReq 值为“/About-us/”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T12:58:47.503

我尚未验证@sftrabbit 提到的算法是否完全遵循这种方法，但您可以使用[`QUrl::resolved`](http://doc.qt.digia.com/qt/qurl.html#resolved)将相对 URL 转换为绝对 URL：

```
QUrl base("http://www.myhost.com/m/");
qDebug() << base.resolved(QUrl("thelink.html")).toString();
qDebug() << base.resolved(QUrl("../../../thelink.html")).toString();
qDebug() << base.resolved(QUrl("../foo/boo/thelink.html")).toString(); 
```

印刷

```
"http://www.myhost.com/m/thelink.html"
"http://www.myhost.com/thelink.html"
"http://www.myhost.com/foo/boo/thelink.html" 
```

* * *

我无法从不适用于 OP 的问题中重现代码示例。唯一的问题是`baseUrl`代码中缺少该对象。以下[SSCCE](http://sscce.org/)

```
#include <QApplication>
#include <QUrl>
#include <QDebug>

int main(int argc, char ** argv) {

    QApplication app( argc, argv );

    QString s("/About-us/");
    QString base("http://qt.digia.com");
    QString urlForReq;
    QUrl baseUrl(base);          // this was missing in the code from the question
    if(!s.startsWith("http:")) {       
        QString uu = QUrl(s).toString();
        QString rurl = baseUrl.resolved(QUrl(s)).toString();
        urlForReq = rurl;
    }
    qDebug() << "urlForReq:" << urlForReq;

    return 0;
} 
```

印刷

```
urlForReq: "http://qt.digia.com/About-us/" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T13:02:25.480

您应该有您下载的网页的路径，例如`http://www.myhost.com/examples/useless/test.html"`.

取目录前缀`prefix = "http://www.myhost.com/examples/useless/"`。每个不以`/`或`http://`不是相对链接开头的 href，您都可以使用`prefix + link`.

例如，如果 link = `../foo/boo/thelink.html`，则结果为`http://www.myhost.com/examples/useless/../foo/boo/thelink.html`，浏览器将转换为`http://www.myhost.com/examples/useless/boo/thelink.html`.

# database - 如何测试用 MVVM 模式编写的数据库前端应用程序？

> ID：13121924
> 
> 赞同：0
> 
> 时间：2012-10-29T12:46:24.780
> 
> 标签：database, unit-testing, mvvm

我写了一个桌面应用程序，它基本上是数据库的前端。它用于创建、读取、更新不同链接对象的操作，并执行一些简单的计算和数据聚合。遵循 MVVM 模式是为了简化测试。今天早上我尝试编写第一个测试，并意识到它并不像预期的那样简单。单元测试非常适合检查单个操作的结果，但不幸的是我必须处理链接在一起的复杂对象。我会尝试更好地解释我的问题。1) 我可以创建和测试 A 类的对象。如果我重复测试 100 次，我的数据库就会被污染。我需要自动程序来清洁它。2) B 类的对象需要 A 类的对象进行某些操作。我认为编写一个同时创建对象 A 和 B 的测试不是一个好主意。

我切换到了 Visual Studio 2012 Express，因为它对单元测试有基本的支持，但我需要一些关于如何更好地使用它来满足我的特殊需求的指南。

谢谢菲利波

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T13:00:46.960

为“遗留”代码（没有单元测试的代码）编写单元测试可能非常困难。

问题是单元测试就是完全隔离地测试单个类，而不依赖于其他代码。

例如：

```
public class MyMVVMClass
{
    public void CreateComplexObject()
    {
        var myDatabaseObject = new MyDatabaseObject();
        myDatabaseObject.DoSomethingComplexWithTheDatabase();
    }
} 
```

这个小代码示例不可能进行单元测试，因为它依赖于可访问的真实数据库。这类测试称为集成测试。它们很重要并且肯定有它们的用途，但它们不是单元测试。

可用于改进代码可测试性的主要模式之一是[控制反转](http://en.wikipedia.org/wiki/Inversion_of_control)。这意味着您通过使用一些管理这些依赖项生命周期的容器对象将依赖项注入到一个类中。

在您的单元测试中，您可以使用诸如[Moq](http://code.google.com/p/moq/)之类的工具来伪造这些依赖项并使它们易于测试。

前段时间我写了一篇关于这个的文章，其中更深入。也许它可以提供帮助：[单元测试，地狱还是天堂？](http://wouterdekort.blogspot.nl/2012/03/unit-testing-hell-or-heaven.html)

# asp.net - 在不同浏览器上渲染页面时布局发生变化

> ID：13121925
> 
> 赞同：0
> 
> 时间：2012-10-29T12:46:30.170
> 
> 标签：asp.net, html, css

我已经使用 asp.net 创建了一个网站，当我在 Firefox 和 IE 上渲染该网站时，该网站看起来相同，而在 Chrome 上渲染它时，它会将按钮向下移动并更改它的位置

![谷歌浏览器渲染](../Images/49afcff4113a7a15123126c39117f843.png) ![在此处输入图像描述](../Images/cf86ccbffbd551023cef8184378ecc84.png)

这是我的母版页代码

```
<%@ Master Language="C#" AutoEventWireup="true" CodeBehind="UMSite.master.cs" Inherits="WebApplication4.UMSiteMaster" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head runat="server">
    <title></title>
    <link  href="~/Styles/UM.css" rel="stylesheet" type="text/css" />
    <asp:ContentPlaceHolder ID="HeadContent" runat="server">
    </asp:ContentPlaceHolder>
</head>
<body>
    <form id="Form1" runat="server">
    <div class="page">
        <div class="header">
            <div class="title">
                 <h1><img alt="" src="Styles/UMHeader.png" width= "950" height= "65" /></h1>

            <div class="clear hideSkiplink">
                <asp:Menu ID="NavigationMenu" runat="server" CssClass="menu" EnableViewState="false" IncludeStyleBlock="false" Orientation="Horizontal">
                    <Items>
                        <asp:MenuItem NavigateUrl="~/Home.aspx" Text="Home"/>

                    </Items>

                </asp:Menu>
            </div>
            </div>

        </div></h1>

        <div class="main" runat="server">

            <asp:ContentPlaceHolder ID="MainContent" runat="server"/>

        </div>

        </form>

</body>
</html> 
```

下面是css

```
 /* DEFAULTS
    ----------------------------------------------------------*/

    body   
    {
        background: #b6b7bc;
        font-size: .80em;
        font-family: "Helvetica Neue", "Lucida Grande", "Segoe UI", Arial, Helvetica, Verdana, sans-serif;
        margin: 0px;
        padding: 0px;
        color: #696969;
        height: 192px;
    }

    a:link, a:visited
    {
        color: #034af3;
    }

    a:hover
    {
        color: #1d60ff;
        text-decoration: none;
    }

    a:active
    {
        color: #034af3;
    }

    p
    {
        margin-bottom: 10px;
        line-height: 1.6em;
    }

    /* HEADINGS   
    ----------------------------------------------------------*/

    h1, h2, h3, h4, h5, h6
    {
        font-size: 1.5em;
        color: #666666;
        font-variant: small-caps;
        text-transform: none;
        font-weight: 200;
        margin-bottom: 0px;
    }

    h1
    {
        font-size: 1.6em;
        padding-bottom: 0px;
        margin-bottom: 0px;
    }

    h2
    {
        font-size: 1.5em;
        font-weight: 600;
    }

    h3
    {
        font-size: 1.2em;
    }

    h4
    {
        font-size: 1.1em;
    }

    h5, h6
    {
        font-size: 1em;
    }

    /* this rule styles <h1> and <h2> tags that are the 
    first child of the left and right table columns */
    .rightColumn > h1, .rightColumn > h2, .leftColumn > h1, .leftColumn > h2
    {
        margin-top: 0px;
    }

    /* PRIMARY LAYOUT ELEMENTS   
    ----------------------------------------------------------*/

    .page
    {
        width: 950px;
        height:auto;
        background-color: #fff;
        margin: 10px auto 5px auto;
        border: 1px solid #496077;

    }

    .header
    {
        position:relative;
        margin: 0px;
        padding: 0px;
        background: #E30613;
        width: 100%;
        top: 0px;
        left: 0px;
        height: 90px;
    }

    .header h1
    {
        font-weight: 700;
        margin: 0px;
        padding: 0px 0px 0px 0px;
        color: #E30613;
        border: none;
        line-height: 2em;
        font-size: 2em;
    }

    .main
    {
        padding: 0px 12px;
        margin: 0px 0px 0px 0px;
        min-height: 630px;
        width:auto;
        background-image:url('UMBackground.png');
      }

    .leftCol
    {
        padding: 6px 0px;
        margin: 0px 0px 0px 0px;
        width: 200px;
        min-height: 200px;
        width:auto;
    }

    .footer
    {
        color: #4e5766;
        padding: 0px 0px 0px 0px;
        margin: 0px auto;
        text-align: center;
        line-height: normal;
    }

    /* TAB MENU   
    ----------------------------------------------------------*/

    div.hideSkiplink
    {
        background-color:#E30613;
        width: 950px;
        height: 35px;
        margin-top: 0px;

    }

    div.menu
    {
        padding: 1px 0px 1px 2px;
    }

    div.menu ul
    {
        list-style: none;
        margin: 0px;
        padding: 5px;
        width: auto;
    }

    div.menu ul li a, div.menu ul li a:visited
    {
        background-color: #E30613;
        border: 1.25px #00BFFF solid;
        color: #F5FFFA;
        display:inline;
        line-height: 1.35em;
        padding: 10px 30px;
        text-decoration: none;
        white-space: nowrap;

    }

    div.menu ul li a:hover
    {
        background-color: #000000;
        color: #F5FFFA;
        text-decoration: none;
    }

    div.menu ul li a:active
    {
        background-color: #E30613;
        color: #cfdbe6;
        text-decoration: none;
    }

    /* FORM ELEMENTS   
    ----------------------------------------------------------*/

    fieldset
    {
        margin: 1em 0px;
        padding: 1em;
        border: 1px solid #ccc;
    }

    fieldset p 
    {
        margin: 2px 12px 10px 10px;
    }

    fieldset.login label, fieldset.register label, fieldset.changePassword label
    {
        display: block;
    }

    fieldset label.inline 
    {
        display: inline;
    }

    legend 
    {
        font-size: 1.1em;
        font-weight: 600;
        padding: 2px 4px 8px 4px;
    }

    input.textEntry 
    {
        width: 320px;
        border: 1px solid #ccc;
    }

    input.passwordEntry 
    {
        width: 320px;
        border: 1px solid #ccc;
    }

    div.accountInfo
    {
        width: 42%;
    }

    /* MISC  
    ----------------------------------------------------------*/

    .clear
    {
        clear: both;
    }

    .title
    {
        display: block;
        float: left;
        text-align: left;
        width: 947px;
        height: 132px;
    }

    .loginDisplay
    {
        font-size: 1.1em;
        display: block;
        text-align: right;
        padding: 10px;
        color: White;
    }

    .loginDisplay a:link
    {
        color: white;
    }

    .loginDisplay a:visited
    {
        color: white;
    }

    .loginDisplay a:hover
    {
        color: white;
    }

    .failureNotification
    {
        font-size: 1.2em;
        color: Red;
    }

    .bold
    {
        font-weight: bold;
    }

    .submitButton
    {
        text-align: right;
        padding-right: 10px;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T16:58:11.500

这正是 webkit 浏览器（safari 和 chrome 等）呈现 html 文件输入类型的方式。

有关文件输入标记的示例，请参阅[此 jsbin 。](http://jsbin.com/izomus/4/edit)

请参阅[Chrome 中的 HTML input type="file" 不显示](https://stackoverflow.com/questions/5260747/html-input-type-file-in-chrome-does-not-show-textbox)先前答案的文本框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T17:02:46.440

我会告诉你查找“css/html 浏览器修复”。不同的浏览器以不同的方式显示网页。Internet Explorer 通常是视觉差异最大的浏览器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T10:11:47.500

当然，页面在不同的浏览器上看起来会有所不同。

你有`body {font-size: .80em;}`和`em`是一个*相对*大小，这意味着网页上的字体大小是浏览器默认字体大小的 80%。

由于浏览器的默认大小可能会有所不同（它始终是用户可选择的），这意味着如果您的目标是浏览器互操作性，则不能使用此方法。与行高同上。

要么保留用户的偏好（并接受不同的用户会看到不同的东西），要么选择以像素或点为单位的字体大小。

请注意，如果您在正文中以这种方式设置了尺寸，则可以`em`在其他地方使用，这将与此正文尺寸相关。所以像这样的事情`h3 {font-size:1.2em}`是完全可以的。

# jquery - Joomla 编辑器通过 JQuery 发布内容

> ID：13121926
> 
> 赞同：0
> 
> 时间：2012-10-29T12:46:30.807
> 
> 标签：jquery, post, joomla, text-editor

我试图创建包含 Joomla CodeMirror 插件的组件。我用我的文本填充了 textarea，现在我想从 JQuery 获取该文本以发送到另一个地方。

```
 jQuery("#button").click(function(event){
        jQuery('#spinner').show();
        var code = jQuery('#texteditorarea').html();

        jQuery.post("index.php?option=com_one&view=One&format=raw",
        {
            source:code
        },
        function(data) {
            jQuery('#spinner').hide();
            jQuery("#result").hide().html(data).fadeIn('slow');
        });
    }); 
```

当我在 Joomla 编辑器字段（在我的页面上）中更改文本时，我遇到了问题。当我在更改后单击我的按钮时，在此代码中我看不到任何更改。和

```
var code = jQuery('#texteditorarea').html(); 
```

我总是得到初始文本。

如何在 Joomla 编辑器文本文件中捕获当前文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T13:21:25.473

我找到了答案

反而：

```
var code = jQuery('#texteditorarea').html(); 
```

利用：

```
var code = Joomla.editors.instances['texteditorarea'].getCode(); 
```

# ruby-on-rails-3 - 工厂女孩错误

> ID：13121928
> 
> 赞同：1
> 
> 时间：2012-10-29T12:46:32.780
> 
> 标签：ruby-on-rails-3, factory-bot

运行测试文件时出现错误。

```
factory.rb:334:in `factory_by_name': No such factory: user (ArgumentError) 
```

我有用户模型，但为什么仍然出现此错误？我的 factory.rb 包含：

```
FactoryGirl.define do
  factory :user do |u|
    u.sequence(:email) {|n| "#{n}@email.com"}
    u.login 'Joe'
    u.password 'password'
    u.password_confirmation 'password'
    u.phone '1111111111'
    u.gender 'F'
    u.active '1'
    u.social_profile_active '1'
  end
end 
```

在`test_helper.rb`

```
ENV["RAILS_ENV"] = "test"
require File.expand_path('../../config/environment', __FILE__)
require 'rails/test_help'
require 'factory_girl'
#Factory.find_definitions

class ActiveSupport::TestCase
  # Setup all fixtures in test/fixtures/*.(yml|csv) for all tests in alphabetical order.
  #
  # Note: You'll currently still have to declare fixtures explicitly in integration tests
  # -- they do not yet inherit this setting
  #fixtures :all

  # Add more helper methods to be used by all tests here...
end 
```

我的红宝石版本是 1.8.7 和 rails3.0.1

我的 gemfile 看起来像这样： group :test do gem 'should' gem 'factory_girl_rails' gem 'mocha' end

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T12:55:46.593

将您的目录重命名为以下之一：

> 工厂可以在任何地方定义，但如果它们在以下位置的文件中定义，则会自动加载：
> 
> 测试/factories.rb
> 
> 规格/工厂.rb
> 
> 测试/工厂/*.rb
> 
> 规格/工厂/*.rb

[https://github.com/thoughtbot/factory_girl/blob/master/GETTING_STARTED.md](https://github.com/thoughtbot/factory_girl/blob/master/GETTING_STARTED.md)

# list - 表格视图的索引列表显示点 iOS 5+

> ID：13121929
> 
> 赞同：3
> 
> 时间：2012-10-29T12:46:34.857
> 
> 标签：list, uitableview, ios5, indexed

在我的应用程序中，我在带有索引列表的表格视图中显示联系人。我显示的索引列表如下：

```
 static NSString *letters = @"abcdefghijklmnopqrstuvwxyz#";

-(void)getAllUserInfoUsingBlock:(lclResultsArray) block
{
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^{
        NSMutableArray *allUserInfoArray = [[NSMutableArray alloc]init];
        NSLog(@"[letters length]:- %d",[letters length]);
        for (int i = 0; i < [letters length]; i++ ) {

            NSMutableDictionary *row = [[NSMutableDictionary alloc] init];

            char currentLetter[2] = { toupper([letters characterAtIndex:i]), '\0'};
            NSString *str=[NSString stringWithCString:currentLetter encoding:NSASCIIStringEncoding];
            NSMutableArray *words = nil;
            NSLog(@"Value of i:- %d:: Letter:- %@",i,str);
            if (i<[letters length]) {
                words = [self getUserInfoByStartingCharOfLastName:str isForEmptyValue:NO];
            }
            else {
                // Get users where name is empty
                words = [self getUserInfoByStartingCharOfLastName:@"" isForEmptyValue:YES];
            }

            NSLog(@"Count for %@ :- %d",str,words.count);
            [row setValue:str forKey:@"sectionTitle"];
            [row setValue:words forKey:@"sectionRows"];
            [allUserInfoArray addObject:row];

        }
        dispatch_async(dispatch_get_main_queue(), ^{
            for (NSDictionary *dict in allUserInfoArray) {
                NSLog(@"Array count:- %d",[[dict objectForKey:@"sectionRows"]count]);
            }
            block(allUserInfoArray,nil);
        });
    });
}

- (NSString *)tableView:(UITableView *)aTableView titleForHeaderInSection:(NSInteger)section 
{
    if (aTableView != self.searchDisplayController.searchResultsTableView){
        NSMutableDictionary *sections=[self.contactsArray objectAtIndex:section];
        NSString * sectionTitle= [sections objectForKey:@"sectionTitle"];
        return sectionTitle;
    }
    return nil;
}

- (NSInteger)tableView:(UITableView *)tableView sectionForSectionIndexTitle:(NSString *)title atIndex:(NSInteger)index 
{
    if (tableView != self.searchDisplayController.searchResultsTableView){
        NSMutableDictionary *sections=[self.contactsArray objectAtIndex:index];
        NSString * sectionTitle= [sections objectForKey:@"sectionTitle"];
        return [self.indices indexOfObject:sectionTitle];
    }
    return 0;
}

- (NSArray *)sectionIndexTitlesForTableView:(UITableView *)tableView {

    if (tableView != self.searchDisplayController.searchResultsTableView){
        return [self.contactsArray valueForKey:@"sectionTitle"];
    }
    return nil;
} 
```

但它显示如下图所示

![在此处输入图像描述](../Images/8236f35272fc53a8d2526c197b5d4114.png)

![在此处输入图像描述](../Images/3a2d9fe8a5a8d1e8fc57da23f3062541.png)

正如您在第一张图片中看到的那样，它显示 ACE .... VXZ# 它在每个字符之后显示交替的点 (.)。但是如第二张图片所示，它显示了来自 ABC 的表格的正确标题标题 ....XYZ#

我的实施有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T12:07:20.340

索引列表中字符之间的替代点取决于该索引列表的显示高度。如果我们可以增加 tableSize 。它​​将自动显示整个字符。

# nsis - NSIS 卸载页面自定义函数已定义

> ID：13121934
> 
> 赞同：0
> 
> 时间：2012-10-29T12:47:05.167
> 
> 标签：nsis

当我使用这样的脚本时，没关系：

```
...
!define MUI_PAGE_CUSTOMFUNCTION_PRE onlymodeA
!insertmacro MUI_UNPAGE_LICENSE "${NSISDIR}\Docs\Modern UI\License.txt"
!define MUI_PAGE_CUSTOMFUNCTION_PRE onlymodeA
!insertmacro MUI_UNPAGE_INSTFILES
... 
```

但是当我使用这个脚本时，我遇到了错误 - ！定义：“MUI_UNPAGE_CUSTOMFUNCTION_PRE”已经定义！

```
...
!define MUI_UNPAGE_CUSTOMFUNCTION_PRE un.onlymodeA
!insertmacro MUI_UNPAGE_LICENSE "${NSISDIR}\Docs\Modern UI\License.txt"
!define MUI_UNPAGE_CUSTOMFUNCTION_PRE un.onlymodeA
!insertmacro MUI_UNPAGE_INSTFILES
... 
```

有什么不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T17:33:16.697

定义是每页的`MUI_PAGE_CUSTOMFUNCTION_*`，创建页面的 !insertmacro 调用将`MUI_PAGE_CUSTOMFUNCTION_*`在使用它们的内容后取消定义。`MUI_UNPAGE_CUSTOMFUNCTION_PRE`不是 MUI 定义，将保留在宏之后，当您尝试再次定义它时，您会得到一个正常的编译器错误...

# java - 为什么我的 equals 方法不起作用？

> ID：13121938
> 
> 赞同：4
> 
> 时间：2012-10-29T12:47:21.930
> 
> 标签：java, equals

我正在使用`ArrayList`, 并且在程序中的某个时刻我使用 contains 方法来检查某个项目是否包含在`ArrayList`. `ArrayList`保存 type的对象`CharProfile`，一个自定义类，它正在查看其中是否包含 char。

所以我假设它在 contains 方法中使用了 equals 方法。像这样的东西`CharProfile.contains(char)`，但它不起作用。

我覆盖了 CharProfile 中的 equals 方法：

```
@Override
public boolean equals(Object o) {
    if (this.character == (Character)o) {
        return true;
    }
    else {
        return false;
    }
} 
```

因此，当 CharProfile 尝试使用它时，它应该使用我的 equals 方法，对吗？那么为什么它不起作用呢？

（就“不工作”而言，我指的是`contains`总是返回错误的事实。）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-29T12:49:08.863

您正在使用 == 比较引用类型，这是错误的。您必须使用`equals`, 并添加适当的`null`-checks。

但这仅仅是开始。您的主要问题是您试图将`CharProfile`对象与`Character`对象进行比较。你可能需要这个：

```
public boolean equals(Object o) {
  return o instanceof CharProfile 
     && this.character.equals((CharProfile)o).character;
} 
```

这假设您的`character`字段永远不会为空。如果它可以为空，您还需要在取消引用之前检查它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T12:50:13.747

您正在覆盖 equals 以便它测试引用的相等性，即运算符的默认行为`==`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T12:51:30.550

你需要使用[equals](http://docs.oracle.com/javase/7/docs/api/java/lang/Character.html#equals%28java.lang.Object%29) ()。你也可以让它成为一个单线，在你的演员阵容中更加明确。

```
@Override
public boolean equals(Object o) {
    return o instanceof Character && this.character.equals(Character.class.cast(o));
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-29T12:58:23.727

您必须使用 equals() 方法，并且不要忘记覆盖 hashCode() 方法。他们齐头并进。

有些人不知道这一点，但是如果使用 eclipse 你可以右键单击选择 Source-> 并生成 hashCode() 和 equals()...

但是，我建议您在使用这种便利之前先了解它们的用途。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-29T13:01:12.463

例如，您有`CharProfile`如下。

```
List<CharProfile> list = new ArrayList<CharProfile>();
list.add(new CharProfile('a'));
list.add(new CharProfile('b'));
list.add(new CharProfile('c')); 
```

什么`list.contains('a')`时候，JVM 不会`Override` `equals()`调用`CharProfile`.

为了更清楚；

```
public class Data {
    public boolean equals(Object o) {
        System.out.println("I am data");
        return false;
    }
} 
```

什么`list.contains(new Data())`时候，JVM 不会`Override` `equals()`调用`Data`. 现在，您将收到消息，就像**我是数据一样。**.

# php - 亚马逊商城网络服务不工作....？

> ID：13121940
> 
> 赞同：1
> 
> 时间：2012-10-29T12:47:22.773
> 
> 标签：php, amazon-web-services

我正在使用 Amazon Marketplace Web Service php 客户端库代码。

我已经配置了所有必需的参数，例如 ( , `AWS_ACCESS_KEY_ID`,`AWS_SECRET_ACCESS_KEY`等)`MERCHANT_ID``MarketplaceId`

我想使用提交提要类型的操作，但是当我运行代码时，我得到的响应是：

> 我们计算的请求签名与您提供的签名不匹配。检查您的 AWS 秘密访问密钥和签名方法。有关详细信息，请参阅服务文档

我正在使用 amazon-submit.php 文件，但我不明白代码有什么问题。

我已经尝试了很多但没有得到任何正确的结果，所以任何帮助表示赞赏。

# javascript - Parse.com REST API - 特殊字符

> ID：13121942
> 
> 赞同：0
> 
> 时间：2012-10-29T12:47:36.317
> 
> 标签：javascript, node.js, special-characters, parse-platform

通过[parse.com](http://www.parse.com) REST API，我正在使用他们在 node.js 中的 Facebook 帐户登录用户。当我尝试注册具有诸如`Martin Sánchez`. 通过 REST API 在 Parse.com 中保存对象时是否需要注意特殊字符？

注意：我仅在 REST API 上遇到此问题，这意味着它在 iOS 和 Android 中运行良好。我尝试对字符串进行编码，但它被逐字保存（`Martin S\\u00e1nchez`作为字符串）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T14:33:59.323

您需要将您的请求编码为 UTF-8。您确定您没有发送 Latin-1 编码数据吗？

# javascript - 使用可能包含 document.write 的 src 动态添加脚本标签

> ID：13121948
> 
> 赞同：202
> 
> 时间：2012-10-29T12:47:51.127
> 
> 标签：javascript, src, document.write

我想在网页中动态包含一个脚本标签，但是我无法控制它的 src 所以 src="source.js" 可能看起来像这样。

```
document.write('<script type="text/javascript">')
document.write('alert("hello world")')
document.write('</script>')
document.write('<p>goodbye world</p>') 
```

现在通常把

```
<script type="text/javascript" src="source.js"></script> 
```

在头部工作正常，但有没有其他方法可以`source.js`使用类似的东西动态添加`innerHTML`？

[我尝试过的jsfiddle](http://jsfiddle.net/PRNnm/)

* * *

## 回答 #1

> 赞同：263
> 
> 时间：2012-10-29T12:51:29.383

```
var my_awesome_script = document.createElement('script');

my_awesome_script.setAttribute('src','http://example.com/site.js');

document.head.appendChild(my_awesome_script); 
```

* * *

## 回答 #2

> 赞同：115
> 
> 时间：2012-10-29T12:51:30.700

您可以[`document.createElement()`](https://developer.mozilla.org/en-US/docs/DOM/document.createElement)像这样使用该功能：

```
function addScript( src ) {
  var s = document.createElement( 'script' );
  s.setAttribute( 'src', src );
  document.body.appendChild( s );
} 
```

* * *

## 回答 #3

> 赞同：86
> 
> 时间：2014-12-14T10:41:04.737

有一个`onload`函数，可以在脚本成功加载时调用：

```
function addScript( src, callback ) {
  var s = document.createElement( 'script' );
  s.setAttribute( 'src', src );
  s.onload=callback;
  document.body.appendChild( s );
} 
```

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2016-06-19T09:04:45.960

我写的一个很好的小脚本来加载多个脚本：

```
function scriptLoader(scripts, callback) {

    var count = scripts.length;

    function urlCallback(url) {
        return function () {
            console.log(url + ' was loaded (' + --count + ' more scripts remaining).');
            if (count < 1) {
                callback();
            }
        };
    }

    function loadScript(url) {
        var s = document.createElement('script');
        s.setAttribute('src', url);
        s.onload = urlCallback(url);
        document.head.appendChild(s);
    }

    for (var script of scripts) {
        loadScript(script);
    }
}; 
```

用法：

```
scriptLoader(['a.js','b.js'], function() {
    // use code from a.js or b.js
}); 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2019-12-26T12:19:12.383

当脚本异步加载时，它们不能调用 document.write。这些调用将被忽略，并且将向控制台写入警告。

您可以使用以下代码动态加载脚本：

```
var scriptElm = document.createElement('script');
scriptElm.src = 'source.js';
document.body.appendChild(scriptElm); 
```

仅当您的源属于单独的文件时，此方法才有效。

但是如果你有源代码作为你想要动态加载的内联函数并且想要向脚本标签添加其他属性，例如类、类型等，那么下面的代码片段会帮助你：

```
var scriptElm = document.createElement('script');
scriptElm.setAttribute('class', 'class-name');
var inlineCode = document.createTextNode('alert("hello world")');
scriptElm.appendChild(inlineCode); 
document.body.appendChild(scriptElm); 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2017-11-02T06:03:35.237

您可以尝试以下代码片段。

```
function addScript(attribute, text, callback) {
    var s = document.createElement('script');
    for (var attr in attribute) {
        s.setAttribute(attr, attribute[attr] ? attribute[attr] : null)
    }
    s.innerHTML = text;
    s.onload = callback;
    document.body.appendChild(s);
}

addScript({
    src: 'https://www.google.com',
    type: 'text/javascript',
    async: null
}, '<div>innerHTML</div>', function(){}); 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2020-04-30T16:00:36.087

单线（尽管与上述答案没有本质区别）：

```
document.body.appendChild(document.createElement('script')).src = 'source.js'; 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2019-11-18T05:45:40.893

**这是为我工作。**

你可以检查一下。

```
var script_tag = document.createElement('script');
script_tag.setAttribute('src','https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js');
document.head.appendChild(script_tag);
window.onload = function() {
    if (window.jQuery) {  
        // jQuery is loaded  
        alert("ADD SCRIPT TAG ON HEAD!");
    } else {
        // jQuery is not loaded
        alert("DOESN'T ADD SCRIPT TAG ON HEAD");
    }
}
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2021-10-18T12:45:03.827

差不多十年后，没有人费心编写`Promise`版本，所以这是我的（基于[这个](https://stackoverflow.com/a/13122014/9449426)awnser）：

```
function addScript(src) {
  return new Promise((resolve, reject) => {
    const s = document.createElement('script');

    s.setAttribute('src', src);
    s.addEventListener('load', resolve);
    s.addEventListener('error', reject);

    document.body.appendChild(s);
  });
} 
```

## 用法

```
try {
  await addScript('https://api.stackexchange.com/js/2.0/all.js');
  // do something after it was loaded
} catch (e) {
  console.log(e);
} 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2020-05-11T09:39:47.853

以正确的顺序加载相互依赖的脚本。

基于[Satyam Pathak](https://stackoverflow.com/a/57162086/1675736)响应，但修复了 onload。它是在脚本实际加载之前触发的。

```
const scripts = ['https://www.gstatic.com/firebasejs/6.2.0/firebase-storage.js', 'https://www.gstatic.com/firebasejs/6.2.0/firebase-firestore.js', 'https://www.gstatic.com/firebasejs/6.2.0/firebase-app.js']
let count = 0

 const recursivelyAddScript = (script, cb) => {
  const el = document.createElement('script')
  el.src = script
  if(count < scripts.length) {
    count ++
    el.onload = () => recursivelyAddScript(scripts[count])
    document.body.appendChild(el)
  } else {
    console.log('All script loaded')
    return
  }
}

  recursivelyAddScript(scripts[count])
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2018-05-18T19:21:28.053

好吧，有多种方法可以包含动态 javascript，我在许多项目中都使用了这种方法。

```
var script = document.createElement("script")
script.type = "text/javascript";
//Chrome,Firefox, Opera, Safari 3+
script.onload = function(){
console.log("Script is loaded");
};
script.src = "file1.js";
document.getElementsByTagName("head")[0].appendChild(script); 
```

您可以调用创建一个通用函数，它可以帮助您根据需要加载尽可能多的 javascript 文件。这里有一个完整的教程。

[以正确的方式插入动态 Javascript](https://movingdouble.com/inserting-dynamic-javascript-the-right-way/)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2021-03-12T05:05:09.250

`URL`没有人提到它，但您也可以使用and将实际源代码粘贴到脚本标签中，方法是使用它创建一个 URL `Blob`：

```
const jsCode = `
 // JS code in here. Maybe you extracted it from some HTML string.
`

const url = URL.createObjectURL(new Blob([jsCode]))
const script = document.createElement('script')
script.src = url
URL.revokeObjectURL(url) // dispose of it when done 
```

至于`jsCode`，您可能已经从一些 HTML 中得到它。

下面是一个更完整的示例，说明如何处理 HTML 源代码中的任意数量的脚本：

```
main()

async function main() {
    const scriptTagOpen = /<script\b[^>]*>/g
    const scriptTagClose = /<\/script\b[^>]*>/g
    const scriptTagRegex = /<script\b[^>]*>[\s\S]*?<\/script\b[^>]*>/g

    const response = await fetch('path/to/some.html')
    const html = await response.text()

    someElement.innerHTML = html

    // We need to get the script tags and manually add them to DOM
    // because otherwise innerHTML will not execute them.
    const codes =
        html
            .match(scriptTagRegex)
            ?.map(code => code.replace(scriptTagOpen, '').replace(scriptTagClose, ''))
            .map(code => URL.createObjectURL(new Blob([code]))) || []

    for (const code of codes) {
        const script = document.createElement('script')
        script.src = code
        someElement.append(script)
        URL.revokeObjectURL(code)
    }
} 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2017-06-15T18:29:05.287

这样做的唯一方法是`document.write`用您自己的函数替换，该函数会将元素附加到页面底部。使用 jQuery 非常简单：

```
document.write = function(htmlToWrite) {
  $(htmlToWrite).appendTo('body');
} 
```

如果您有 html 像问题示例一样以块的形式进入 document.write，您需要缓冲这些`htmlToWrite`段。也许是这样的：

```
document.write = (function() {
  var buffer = "";
  var timer;
  return function(htmlPieceToWrite) {
    buffer += htmlPieceToWrite;
    clearTimeout(timer);
    timer = setTimeout(function() {
      $(buffer).appendTo('body');
      buffer = "";
    }, 0)
  }
})() 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2019-07-23T10:30:31.157

我通过递归附加每个脚本来尝试它

**注意**如果您的脚本一个接一个地依赖，那么位置将需要同步。

主要依赖项应该在数组的最后，以便初始脚本可以使用它

```
const scripts = ['https://www.gstatic.com/firebasejs/6.2.0/firebase-storage.js', 'https://www.gstatic.com/firebasejs/6.2.0/firebase-firestore.js', 'https://www.gstatic.com/firebasejs/6.2.0/firebase-app.js']
let count = 0

 const recursivelyAddScript = (script, cb) => {
  const el = document.createElement('script')
  el.src = script
  if(count < scripts.length) {
    count ++
    el.onload = recursivelyAddScript(scripts[count])
    document.body.appendChild(el)
  } else {
    console.log('All script loaded')
    return
  }
}

  recursivelyAddScript(scripts[count])
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-10-27T12:07:52.740

这是一个缩小的片段，与 Google Analytics 和 Facebook Pixel 使用的代码相同：

```
!function(e,s,t){(t=e.createElement(s)).async=!0,t.src="https://example.com/foo.js",(e=e.getElementsByTagName(s)[0]).parentNode.insertBefore(t,e)}(document,"script"); 
```

替换`https://example.com/foo.js`为您的脚本路径。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-09-21T06:32:53.430

```
window.addEventListener("load", init);

        const loadScript = async (url) => {
            const response = await fetch(url);
            const script = await response.text();
            eval(script);
        }

        function init() {
            const wistiaVideo = document.querySelector(".wistia_embed");

            if ("IntersectionObserver" in window && "IntersectionObserverEntry" in window && "intersectionRatio" in window.IntersectionObserverEntry.prototype) {
                let lazyVideoObserver = new IntersectionObserver(function (entries, observer) {
                    entries.forEach(function (entry) {
                        if (entry.isIntersecting) {
                            setTimeout(() => loadScript("//fast.wistia.com/assets/external/E-v1.js"), 1000);
                            lazyVideoObserver.unobserve(entry.target);
                            console.log("E-v1.js script loaded from fast.wistia.com");
                        }
                    });
                });
                lazyVideoObserver.observe(wistiaVideo);
            }
        }
```

```
<div style="height: 150vh; background-color: #f7f7f7;"></div>
    <h1>Wistia Video!</h1>

    <div class="wistia_embed wistia_async_29b0fbf547" style="width:640px;height:360px;">&nbsp;</div>

    <h1>Video Ended!</h1>
```

# python - 处理 unicode 字符串时出错

> ID：13121952
> 
> 赞同：0
> 
> 时间：2012-10-29T12:48:10.970
> 
> 标签：python, unicode, wxpython, py2app

我有一个使用 py2app 制作的应用程序的 wxPython 应用程序。它工作了一段时间，没有改变我所知道的任何东西，我突然得到`UnicodeDecodeError: 'ascii' codec can't decode byte 0xcc in position 2: ordinal not in range(128)`. 我没有以任何方式更改文件。我什至没有重新构建应用程序，它与我一直在使用的应用程序相同，没有任何不同。我听说如果“终端未设置为 UTF-8”会发生这种情况，但这个应用程序不使用终端，而且我没有更改终端中的任何设置，因为它运行良好。

编辑：我发现问题是我有一条线`os.listdir()`。该目录现在包含一个带有`ü`. 为什么会出现这个错误？它不应该只是将其从字符串更改为 unicode 类型吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T13:22:44.423

您需要向`os.listdir`. 这样做时，文件名将使用文件系统的编码进行解码。

```
import os
>>> os.listdir(u'c:\\')
[u'$Recycle.Bin', u'Config.Msi', u'Documents and Settings', u'hiberfil.sys', (...)] 
```

# c# - 创建集合的所有元素的特定属性的集合，而不迭代该集合的元素

> ID：13121953
> 
> 赞同：0
> 
> 时间：2012-10-29T12:48:12.657
> 
> 标签：c#, linq, collections

我有一个树节点集合作为`IEnumerable<treenode>`节点。有什么方法可以`treenode.guid`直接从节点创建集合而不迭代所有元素？

例如：

```
guidcollection nodeguids = nodes.somemethod(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T12:52:19.767

答案不是——如果您需要每个节点的一些信息，您显然需要遍历节点集合。但是，您可以执行以下操作：

```
IEnumerable<Guid> nodeguids = nodes.Select(n => n.Id); 
```

这样，您至少不会手动执行迭代。虽然实现`Select`涉及对集合的所有元素进行迭代，但它会在您尝试在`nodeguids`某处使用集合的那一刻完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T12:52:01.883

LINQ 使用惰性迭代器。所以你可以创建一个这样的集合......

```
IEnumerable<TreeNode> myCollection = GetTreeNodes();
IEnumerable<Guid> guidCollection = myCollection.Select(tn => tn.Guid); 
```

guidCollection 将不会被填充，直到它被迭代、计数、以某种方式执行。

你也可以去老学校。

```
function IEnumerable<Guid> GetIdsFromCollection(TreeNode collection)
{
    foreach (var item in collection)
        yield return item;
} 
```

# java - Maven 无法编译依赖于 rt.jar 的类

> ID：13121954
> 
> 赞同：16
> 
> 时间：2012-10-29T12:48:18.163
> 
> 标签：java, maven, continuous-integration

我负责的 CI-server (Hudson) 构建 Maven 项目。最后一次提交后，构建失败：

```
[INFO] -------------------------------------------------------------
[ERROR] COMPILATION ERROR : 
[INFO] -------------------------------------------------------------
[ERROR] \hudson\jobs\path to my class\MyClass.java:[33,62] package com.sun.xml.internal.messaging.saaj.packaging.mime.util does not exist
[ERROR] \hudson\jobs\path to my class\MyClass.java:[75,5] cannot find symbol
        symbol  : class BASE64EncoderStream
        location: class |fullname of MyClass|
[ERROR] \hudson\jobs\path to my class\MyClass.java:[75,38] cannot find symbol
        symbol  : class BASE64EncoderStream
        location: class |fullname of MyClass|
[INFO] 3 errors 
```

所需的类 (com.sun.xml.internal.messaging.saaj.packaging.mime.util.BASE64EncoderStream) 位于 rt.jar 中。

我尝试（按照[http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#System_Dependencies](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#System_Dependencies)的说明）在项目的 pom.xml 中添加系统依赖项：

```
<dependency>
    <groupId>dummy</groupId>
    <artifactId>dummy</artifactId>
    <version>1</version>
    <scope>system</scope>
    <systemPath>${java.home}/lib/rt.jar</systemPath>
</dependency> 
```

它没有帮助。

最有趣的是所有文件都在我同事的本地机器上编译良好（他使用 Eclipse 内置编译器）。

在互联网上我发现了同样的问题（链接：[http ://maven.40175.n5.nabble.com/Why-can-t-Maven-find-com-sun-xml-internal-messaging-saaj-util-ByteOutputStream-类-td107361.html](http://maven.40175.n5.nabble.com/Why-can-t-Maven-find-com-sun-xml-internal-messaging-saaj-util-ByteOutputStream-class-td107361.html) )。最后一个答案是这个麻烦的原因是Oracle的Java编译器。

所以，我把Oracle的jdk改成了OpenJDK，但是没有用。

有人对如何解决这个问题有任何建议吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-05-27T03:22:33.013

需要指定`-XDignore.symbol.file`并添加 rt.jar 依赖项，`<fork>true</fork>`否则编译器插件将默默地删除任何 -XD 标志：例如

```
 ...
    <dependency>
        <groupId>groupid</groupId>
        <artifactId>artifiactId</artifactId>
        <version>1.0</version>
        <scope>system</scope>
        <systemPath>${java.home}/lib/rt.jar</systemPath>
    </dependency>
</dependencies>

<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>3.3</version>
            <configuration>
                <source>1.7</source>
                <target>1.7</target>
                <compilerArgs>
                    <arg>-XDignore.symbol.file</arg>
                </compilerArgs>
                <fork>true</fork>
            </configuration>
            ... 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-29T12:54:17.033

缺少的类似乎是 JRE 内部的（如其命名空间中所示），不应从您的代码中引用。它可能仅在特定平台或 JRE 版本上可用。

考虑用另一个 Base64 编码器类替换它，例如来自[Apache Commmons Codec 项目](http://commons.apache.org/codec/apidocs/org/apache/commons/codec/binary/package-summary.html)的一个。

**Java 8 更新**

Java 8 终于在 JDK 的公共部分引入了 Base64 类：[`java.util.Base64`](https://docs.oracle.com/javase/8/docs/api/java/util/Base64.html).

# iphone - 如何将联系人从模拟器导入到我的应用表视图？

> ID：13121957
> 
> 赞同：0
> 
> 时间：2012-10-29T12:48:19.613
> 
> 标签：iphone, methods, alert

还有一个问题

我需要将联系人从我的手机模拟器导入到我的应用程序表视图中，我应该通过单击表视图中的联系人来显示每个联系人的详细信息有没有可能？如果有请给我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T13:05:27.360

在declaration.h文件中声明..

```
- (void) showAlertWithTitle:(NSString *)title message:(NSString *)message; 
```

并在 declaration.m 文件中使用如下...

```
- (void) showAlertWithTitle:(NSString *)title message:(NSString *)message {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:title message:message delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
        [alert show];
        [alert release];
    } 
```

像下面这样使用..

```
if ([firstName.text length]==0){

     [self showAlertWithTitle:@"Empty Field" mesage:@"Please Enter First Name"];

} else if([sndname.text length]==0){
     [self showAlertWithTitle:@"Empty Field" mesage:@"Please Enter Second Name"];

} 
```

# debugging - 如何在 RAD 中本地运行 Websphere Portal/portlet 以进行调试

> ID：13121960
> 
> 赞同：8
> 
> 时间：2012-10-29T12:48:40.887
> 
> 标签：debugging, websphere, local, portal, ibm-rad

我一直在互联网上寻找如何与 RAD IDE 一起设置本地 Portal 环境，我发现了这样的线程，[但这](http://www.ibm.com/developerworks/forums/message.jspa?messageID=13903296#13903296)是古代历史的一个线程（用 IT 术语来说）或仅指使用 RAD 优化 Portal（[这里](http://www.ibm.com/developerworks/rational/library/07/0327_riordan/index.html)）。目前我正在运行 RAD 8.0.4.1，并且可以运行 WAS 实例，但我无法设法让 Portal 环境在本地运行。我读到过去有某种特定的门户测试环境，但是对于较新的 RAD，我是否必须安装完整的门户？在哪里得到它？我在任何地方都找不到好的参考。

我想在本地门户上下文中调试我的 portlet。目前，portlet 部署在远程 Portal 服务器上。这会花费时间（打包 WAR、上传、刷新节点等）。所以我想在本地运行我们的 Portal，包括它的 portlet。

在 RAD 中，我可以定义新的服务器并且可以看到选项“WebSphere Portal v6.1 Server on WAS 7”，但它需要我定义一个服务器运行时环境。这将打开一个新的弹出窗口，我必须在其中指定：

*   WebSphere 门户位置
*   WebSphere 应用程序服务器位置

我的运行时安装在“IBM\SDP\runtimes”中，其中包含以下文件夹“base_stub、base_v6_stub、base_v7、base_v7_stub、base_v8_stub、base_v61_stub、portal_v61_stub、updi_v7x、updi_v70、wsdk”。无论我尝试指向什么位置，它都会不断给出错误消息：`"The Portal Server installation is not correct"`.

我有以下问题：

*   我需要什么才能在本地运行/调试门户及其 portlet？
*   我在运行时目录中看到了 portal_v61_stub，这意味着没有安装 Portal 服务器？我的 IBM 安装管理器没有专门显示安装 Portal Server 的选项。
*   是否可以在本地运行 portlet/portal 并使用热交换来立即查看代码/视图中的更改？
*   我在哪里可以下载/安装所需的软件？
*   我听说您需要一台非常重的机器来在本地执行门户/调试工作（我在 3.00 GHz 的 8 GB/Intel E8400 上运行。）
*   如何将在远程服务器上运行的当前门户设置传输到我的本地系统（镜像/仅复制文件？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T14:25:22.720

一些事情，

RAD 是在 Eclipse 上开发的应用程序开发工具。它不附带任何服务器应用程序。您需要安装 WAS/Portal 服务器。

RAD 支持门户开发，因此它有存根，但您将无法在没有服务器的情况下部署应用程序。

> 我需要什么才能在本地运行/调试门户及其 portlet？

您需要在您的机器上安装一个应用程序服务器。或连接到远程服务器。

> 我在运行时目录中看到了 portal_v61_stub，这意味着没有安装 Portal 服务器？我的 IBM 安装管理器没有专门显示安装 Portal Server 的选项。

否。未安装服务器。您不需要 IBM Installation Manager 来安装服务器。这是给 RAD 的。

> 是否可以在本地运行 portlet/portal 并使用热交换来立即查看代码/视图中的更改？

是的，如果您安装了服务器。

> 我在哪里可以下载/安装所需的软件？

您可以下载服务器的快速版本。但如果不是这样，如果您是 IBM 业务合作伙伴，您可以从他们的网站下载。

> 我听说您需要一台非常重的机器来在本地执行门户/调试工作（我在 3.00 GHz 的 8 GB/Intel E8400 上运行。）

3 GB 适合运行 RAD 和 IBM Websphere Portal Server。（我现在正在使用许多其他应用程序运行它）但为了获得最佳效果，请使用 4 GB RAM。

> 如何将在远程服务器上运行的当前门户设置传输到我的本地系统（镜像/仅复制文件？）

您需要打开 RAD 并将服务器连接到它。去`windows->preferences->servers->Webpshere`

# python - 如何使用 OptParse 检索具有非 ASCII 字符的字符串？

> ID：13121964
> 
> 赞同：6
> 
> 时间：2012-10-29T12:48:53.587
> 
> 标签：python, unicode, ascii

我正在使用该`OptParse`模块来检索字符串值。[`OptParse`只支持`str`类型化的字符串](http://docs.python.org/2/library/optparse.html#optparse-standard-option-types)，不支持`unicode`。

所以假设我开始我的脚本：

```
./someScript --some-option ééééé 
```

在代码中读取时，键入的法语字符（例如“é”）会`str`触发s：`UnicodeDecodeError`

```
UnicodeDecodeError: 'ascii' codec can't decode byte 0xc3 in position 99: ordinal not in range(128) 
```

我玩了一下 unicode 内置函数，但要么出现错误，要么字符消失：

```
>>> unicode('é');
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
UnicodeDecodeError: 'ascii' codec can't decode byte 0xc3 in position 0: ordinal not in range(128)
>>> unicode('é', errors='ignore');
u'' 
```

有什么我可以`OptParse`用来检索`unicode`/`utf-8`字符串的吗？

**更新**：

似乎可以检索并打印该字符串，但随后我尝试将该字符串与 sqlite 一起使用（使用 APSW 模块），并尝试使用 以某种方式转换为 unicode `cursor.execute("...")`，然后发生错误。

这是导致错误的示例程序：

```
#!/usr/bin/python
# coding: utf-8

import os, sys, optparse
parser = optparse.OptionParser()
parser.add_option("--some-option")
(opts, args) = parser.parse_args()
print unicode(opts.some_option) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T13:16:56.783

您可以在解析器处理它们之前解码参数。以你为例：

```
#!/usr/bin/python
# coding: utf-8
import os, sys, optparse
parser = optparse.OptionParser()
parser.add_option("--some-option")

# Decode the command line arguments to unicode
for i, a in enumerate(sys.argv):
    sys.argv[i] = a.decode('ISO-8859-15')

(opts, args) = parser.parse_args()
print type(opts.some_option), opts.some_option 
```

这给出了以下输出：

```
C:\workspace>python file.py --some-option préférer
<type 'unicode'> préférer 
```

我选择了[ISO/IEC 8859-15](http://en.wikipedia.org/wiki/ISO/IEC_8859-15)代码页，因为它似乎最适合您。如果需要，进行调整。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T12:12:51.867

输入以控制台编码返回，因此根据您更新的示例，使用：

```
print opts.some_option.decode(sys.stdin.encoding) 
```

`unicode(opts.some_option)`默认使用`ascii`作为编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T12:56:21.873

我相信您的错误与[以下内容](http://docs.python.org/2/tutorial/interpreter.html#source-code-encoding)有关：

> 例如，要编写包含欧元货币符号的 Unicode 文字，可以使用 ISO-8859-15 编码，欧元符号的序数值为 164。此脚本将打印值 8364（对应于欧元符号的 Unicode 代码点) 然后退出：

```
# -*- coding: iso-8859-15 -*-

currency = u"€"
print ord(currency) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-29T08:15:07.263

```
#!/usr/bin/python
# coding: utf-8

import os, sys, optparse

reload(sys)
sys.setdefaultencoding('utf-8')

parser = optparse.OptionParser()
parser.add_option(u"--some-option")
(opts, args) = parser.parse_args()
print opts.print_help() 
```

# java - 绘图程序的 Java parseInt 错误

> ID：13121966
> 
> 赞同：0
> 
> 时间：2012-10-29T12:49:18.890
> 
> 标签：java

运行我正在为同级项目开发的绘图程序时出现以下错误：

```
Exception in thread "main" java.lang.NumberFormatException: For input string: "100,"
at java.lang.NumberFormatException.forInputString(Unknown Source)
at java.lang.Integer.parseInt(Unknown Source)
at java.lang.Integer.parseInt(Unknown Source)
at InputExample.main(InputExample.java:35) 
```

我知道这个错误是什么意思，但是因为我刚刚开始学习 Java，所以我不是 100% 如何修复它。到目前为止，这是我的代码：

```
import java.util.Scanner;

public class Input {

    public final static void main(String[] args) {

        GraphicsScreen g = new GraphicsScreen();
        Scanner s = new Scanner(System.in);
        int param1 = -1;
        int param2 = -1;
        String line;
        String command;
        String[] sut;
        System.out
                .println("Please enter your commands here. A list of commands is below to help you get started.");

        do {
            System.out.println("Circle, Move, Draw");
            line = s.nextLine();
        } while(line.equalsIgnoreCase("help") == true);

        sut = line.split(" ");

        command = sut[0];

        if(sut.length > 1) {
            param1 = Integer.parseInt(sut[1]);

            if(sut.length > 2) {
                param2 = Integer.parseInt(sut[2]);
            }
        }

        if(command.equals("Move") == true) {
            g.move(param1, param2);
        }
        else if(command.equals("Draw") == true) {
            g.draw(param1, param2);
        }
        else if(command.equals("Circle") == true) {
            g.circle(param1);
        }
        else {
            System.out
                    .println("The commands you have entered are invalid. Please try again.");
        }
    }
} 
```

因此，我将整数转换为数值，并通过 IF 语句传递它们以在屏幕上绘制形状。我猜错误消息非常简单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T12:50:59.547

看起来您需要在分隔符中包含逗号以进行拆分 - 并且可能通过使用将其设为可选逗号`?`：

```
sut = line.split(",? "); 
```

另一种选择是在解析之前删除逗号：

```
sut[1] = sut[1].replaceAll(",$", "") 
```

# ruby-on-rails - 没有路线匹配 [POST] "/student_tests/upload.1"

> ID：13121976
> 
> 赞同：1
> 
> 时间：2012-10-29T12:49:42.477
> 
> 标签：ruby-on-rails, ruby

但我希望它匹配 [POST] "/student_tests/1/upload"

IN 我添加的 routes.rb

```
resources :student_tests do
    member do
      post 'upload'
    end
end 
```

在 student_test_controller 我添加了

```
def upload
    render :upload
end 
```

在 student_test 的索引页中

```
<%= link_to "| Upload Scaled Scores", upload_student_test_path(test), method: :edit%> 
```

其中 test 是 student_test 的一个对象

通过使用机架路由

```
upload_student_test POST  /student_tests/:id/upload(.:format)   student_tests#upload 
```

我犯了什么错误，它搜索“/student_tests/upload.1”我希望它寻找“/student_tests/1/upload”（这里1是学生测试的ID）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T13:05:40.123

您在路线中创建了一个“POST”成员操作，但您以错误的方式链接到它：

```
<%= link_to "| Upload Scaled Scores", upload_student_test_path(test), method: :edit%> 
```

实际上应该是这样的：

```
<%= link_to "| Upload Scaled Scores", upload_student_test_path(test), method: :post %> 
```

然而，这可能不是传统的铁轨布线方式。如果您只想在那里呈现视图，那么一种`GET`方法将是最合适的。当您上传文件时，您可以使用`POST`您在此处尝试的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T12:58:35.833

我认为您使用路线的方式可以更改如下：

```
match ':controller(/:action(/:id(.:format)))' 
```

我不明白您在控制器操作之前需要 ID 的原因。您可以更改路线格式并相应地访问 ID。

您提出问题的方式可能会更好，因为我发现很难理解您的问题。在这里用我的理解回答。

# ios - 列出系统钥匙串证书

> ID：13121983
> 
> 赞同：4
> 
> 时间：2012-10-29T12:49:54.777
> 
> 标签：ios, keychain

我正在开发一个 iOS 应用程序，它需要访问系统证书和密钥以对数据进行数字签名。

我做了一些研究，发现理论上第三方应用程序不可能访问系统钥匙串，因为它只能访问自己的钥匙串。这是解释这一点的[stackoverflow帖子。](https://stackoverflow.com/questions/7648487/how-to-list-certificates-from-the-iphone-keychain-inside-my-app)

但是，[Cisco AnyConnect](https://itunes.apple.com/us/app/cisco-anyconnect/id392790924?mt=8)等一些应用程序会显示一个列表，其中包含用于 VPN 配置的所有系统证书。这可能意味着实际上有一种方法可以获取该系统证书列表。

此[图](http://s7.postimage.org/h8bhxhmob/IMG_0089_1.png)显示了证书在 cisco 应用程序中的显示方式。

如果有人能对这个问题有所了解，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T12:53:25.210

因为这只是使用适当的`entitlements.xml`文件对二进制文件进行签名的问题。[Keychain-dumper](https://github.com/ptoomey3/Keychain-Dumper)完全符合您的要求。

# javascript - 获取 url 查询字符串并在 iframe 上用作 src

> ID：13121986
> 
> 赞同：0
> 
> 时间：2012-10-29T12:50:04.680
> 
> 标签：javascript, html

我对 javascript 完全陌生，我想知道这里的一些非常基本的东西。我有一个我想要动态 src 的 iFrame。这个 src(source) 应该只是一个变量。然后一个脚本在加载帧之前设置该变量。

它实际上是 Sharepoint 2010 中的一个 webpart，所以我设置了 webpart 并将它的 HTML 源代码编辑为如下内容：

```
<script language="JavaScript">

var qs = getQueryStrings();
var myParam = qs["myParam"]; 

function getQueryStrings() { 
  var assoc  = {};
  var decode = function (s) { return decodeURIComponent(s.replace(/\+/g, " ")); };
  var queryString = location.search.substring(1); 
  var keyValues = queryString.split('&'); 

  for(var i in keyValues) { 
    var key = keyValues[i].split('=');
    if (key.length > 1) {
      assoc[decode(key[0])] = decode(key[1]);
    }
  } 

  return assoc; 
} </script>

<iframe height="500" src="(myParam);" width="800"></iframe> 
```

我什至不确定语法是否正确。基本上，我想将变量插入到 iframe 的 src 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T13:11:35.417

使您的链接像这样：

```
<a href="file1.pdf" onClick="window.frames['myPdfFrameName'].location ='file1.pdf';return false;">File1.PDF</a> 
```

或者：

```
<iframe name='myPdfFrameName'></iframe>

<a href="" onClick="loadFrame('file1.pdf');">File1.PDF</a>

function loadFrame(href) {
   window.frames['myPdfFrameName'].location = href;
   return false;
} 
```

编辑：最简单的可能是使用链接的目标属性：

```
<a href='file1.pdf' target='myPdfFrameName'>File1.pdf</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T13:03:23.840

您必须为您的 iframe 提供一些类或 ID。然后你可以调用一个函数，它将 src 动态地赋予 i 帧。从客户端使用这个：

```
$('#ID_of_Iframe').attr('src','NEW SRC hERE');

Example: $('#ID_of_Iframe').attr('src','www.google.com'); 
```

# php - htaccess 找不到 .htpasswd 文件

> ID：13121988
> 
> 赞同：1
> 
> 时间：2012-10-29T12:50:12.000
> 
> 标签：php, .htaccess

我正在尝试用密码保护我网站上的目录。我可以让 .htaccess 正常工作，这样当我访问目录时会显示密码提示，但是当我将存储在 .htpasswd 文件中的正确凭据放入时，我没有被授予访问权限。再次弹出密码提示。

我认为这是 .htaccess 文件中 .htpasswd 文件的路径有问题。我检查了我的文档根 (_SERVER["DOCUMENT_ROOT"])，它显示根是这样的：

```
/var/www/vhosts/myurl.info/httpdocs 
```

所以我的 .htaccess 看起来像这样：

```
AuthName "Restricted Area"
AuthType Basic 
AuthUserFile /var/www/vhosts/myurl.info/httpdocs/.htpasswd 
AuthGroupFile /dev/null 
require valid-user 
```

我已将 .htpasswd 放在根文档文件夹 (httpdocs) 中。

任何想法我做错了什么？一切对我来说都是正确的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T13:56:23.710

如果路径无效，您会收到 500 错误或其他信息。由于浏览器提示输入密码，很可能路径是正确的。但是，您需要确保正确生成了 htpasswd。检查这个 - [http://www.htaccesstools.com/htpasswd-generator/](http://www.htaccesstools.com/htpasswd-generator/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-29T14:01:09.980

确保`.htpasswd`格式为`user:passwordhash`，其中`passwordhash`可以是以下类型：

*   CRYPT（一种加密哈希，仅支持前 8 个字符，因此请注意不要选择超过 8 个字符的密码）
*   MD5（一种使用该`MD5`函数的特定于 Apache 的算法，有点类似于加密哈希）
*   SHA1（每个密码只有一个可能的结果，因此如果黑客设法获取`.htpasswd`文件，结果哈希可能会被反转）
*   ~~*纯文本*~~（您始终可以创建这种格式，但请注意“httpd 守护程序将**只**接受*Windows、Netware 和 TPF*上的纯文本密码”。**使用纯文本也是不安全**的，因为如果黑客获取文件，他将知道您的所有密码)

通常您会选择`CRYPT`，但如果您有更长的密码，请考虑`MD5`或`SHA1`。永远不要尝试使用纯文本，因为它在 Linux 上不受支持并且很危险。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T12:57:50.873

首先尝试删除行“AuthGroupFile /dev/null” - 如果不使用组文件，我不会指定它...

如果它没有帮助 - 看看 apache 的 error.log ......它会给你提示。在此处发布error.log的相关部分...

# javascript - 如何让 QUnit 等待一定的时间间隔？

> ID：13121989
> 
> 赞同：1
> 
> 时间：2012-10-29T12:50:11.263
> 
> 标签：javascript, settimeout, qunit

我在 QUnit 中定义了几个测试用例。最后一个测试用例使用**window.open**函数在新窗口中打开一个特定的 URL，并将新打开的页面的 body 标记的 html 内容附加到当前页面的（正在运行测试的）body 标记。此外，我需要在所有其他测试用例执行的最后执行该测试用例。我可以通过将属性**QUnit.config.reorder**设置为**false**来做到这一点。

问题在于我需要等到新页面在新窗口中加载，然后再复制正文 html（因为页面加载需要时间）。为此，我使用**setTimeout**在 3000 毫秒后获取 body 标记的 html 内容，但同时 QUnit 未能通过测试用例，因为断言存在于 setTimeOut 处理函数中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T12:59:00.077

```
asyncTest('my test', function() {

    // some prep. code goes here (may go here)

    setTimeout(function() {
        start(); // this would tell QUnit to start the test

        // test code goes here

    }, 3000);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T12:56:41.143

阅读文档[`asyncTest( name, [expected], test )`](http://docs.jquery.com/QUnit/asyncTest)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-09T10:51:44.540

您可以将 Qunit 测试与异步断言一起使用，例如：

```
 QUnit.test( "post an object for dup detection ", function( assert ) {        
        var done = assert.async();
        $.ajax({
            method : "POST",
            url : ... ,
            data : ... ,
            dataType : "json"
        }).done( function( data, textStatus, jqXHR){ 
            assert.whatever(); 
            done();
        }).fail(function(jqXHR, textStatus, errorThrown){
            assert.notOk();
            console.log(errorThrown);
            done();
        });        
  }); 
```