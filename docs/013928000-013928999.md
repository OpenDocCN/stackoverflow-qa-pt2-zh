# StackOverflow 问答 13928000-13928999

# python - VirtualEnv 和 Python 2.7 / sqlite3 导入

> ID：13928003
> 
> 赞同：1
> 
> 时间：2012-12-18T07:08:19.797
> 
> 标签：python, import

我已经安装了 python 2.7。如果我进入 python，我可以导入 sqlite3。但是，如果我使用虚拟环境然后尝试导入 sqlite3，则找不到该模块。

任何人都可以帮忙吗？

# linux - 安装 CPAN 模块而不弄乱系统 Perl 安装

> ID：13928005
> 
> 赞同：3
> 
> 时间：2012-12-18T07:09:00.580
> 
> 标签：linux, perl

我听说最好不要从您系统的 Perl 版本所在的 CPAN 安装模块。我知道如何使用命令行安装模块，我只是想知道是否有办法将 CPAN 与系统的核心 Perl 分开。

我是不是该：

*下载源代码并专门为这些模块创建一个目录？*

任何人有他们成功使用的任何其他想法或实现？

我正在使用带有 Perl 5.16.2 的 Arch Linux。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T07:17:08.907

你在寻找类似的东西[`local::lib`](http://search.cpan.org/dist/local-lib/lib/local/lib.pm)

> local::lib - 使用 PERL5LIB 为 perl 模块创建和使用本地 lib/

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T12:31:17.717

下载并解压最新版本`local::lib`：

```
curl -LO http://search.cpan.org/CPAN/authors/id/A/AP/APEIRON/local-lib-1.008004.tar.gz
tar xzf local-lib-1.008004.tar.gz
cd local-lib-1.008004/ 
```

部署它：

```
perl Makefile.PL --bootstrap=$HOME/perl5
make
make test
make install 
```

保存持久配置：

```
cat << PROFILE >> $HOME/.profile

eval \$(perl -I\$HOME/perl5/lib/perl5/ -Mlocal::lib)
PROFILE 
```

现在，您可以注销/登录您的会话，或者干脆`source ~/.profile`. 完成这些步骤后，将在本地安装 CPAN 模块。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-18T15:12:58.020

您不需要手动安装模块。您只需要在某个地方安装它，并且您的环境配置为在那里安装它。然后你就可以正常使用 cpan/cpanp/cpanm/etc 了。（cpan 减去我的胜利）

手动设置该环境有点痛苦，因此大多数人使用应用程序为他们设置配置。

对此的两个主要选择是：

[`local::lib`](https://metacpan.org/module/local%3a%3alib)— 这会设置您的环境变量，以便您可以在远离系统 perl 的地方安装模块，但继续使用系统 perl。

[Perlbrew](https://metacpan.org/module/perlbrew) - 这会为您安装一个完整的 perl，因此您可以完全避免使用系统 perl，并使用更新版本的 perl 本身，然后可能会随您的系统一起提供。它还同时管理多个 perl 安装（因此您可以针对不同版本的 perl 测试您的模块）。

就个人而言，我更喜欢 Perlbrew（因为它可以轻松使用闪亮的新功能，如 yada yada 运算符和智能匹配（现在智能匹配不是那么新），但设置需要更长的时间（因为你必须编译 perl ）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T19:28:39.717

> 我听说最好不要从您系统的 Perl 版本所在的 CPAN 安装模块。

这个想法是通过升级他们使用的模块来避免破坏你的发行版工具。

在这种情况下，将模块安装到一个新目录并告诉 Perl 使用它`PERL5LIB`（这是前面提到的 install::lib 所做的）根本没有帮助，因为 Perl 看到的内容与您在通常的`site`目录。

（当没有权限安装到默认目录时，主要使用 PERL5LIB 安装模块。）

使用 Perl 系统的另一个问题是您无法升级它。

两者的解决方案是安装您自己的 Perl 版本。这很容易使用[`perlbrew`](http://search.cpan.org/perldoc?perlbrew).

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-18T10:12:39.313

cpanminus 是怎么回事？ [CPAN 减模块](http://search.cpan.org/search?query=cpanminus&mode=all)

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-12-18T07:14:59.513

为什么不将模块打包成真正的包、rpm 或 dep 样式？这样您就可以控制已安装的软件，您可以根据需要和习惯删除和更新软件包。因此，与其绕过管理（这很少是一个好主意），不如让您保持控制。

如果您使用的是基于 rpm 的发行版，我真的推荐[OBS](https://build.opensuse.org/)来完成这项任务。您可以创建自己的项目、配置源、测试它们并为各种发行版和架构创建包。当您将家庭项目存储库导入软件管理时，只需单击一下即可安装软件包。

# c# - 非常慢的 IOrderedQueryable ToList()

> ID：13928007
> 
> 赞同：1
> 
> 时间：2012-12-18T07:09:03.997
> 
> 标签：c#, linq, entity-framework

我有返回带有过滤子项的父项的查询：

```
 Context.ContextOptions.LazyLoadingEnabled = false;
  var query1 = (from p in Context.Partners
                          where p.PartnerCategory.Category == "03"
                                || p.PartnerCategory.Category == "02"
                          select new
                                     {
                                         p,
                                         m = from m in p.Milk
                                             where m.Date >= beginDate
                                                   && m.Date <= endDate
                                                   && m.MilkStorageId == milkStorageId
                                             select m,
                                         e = p.ExtraCodes,
                                         ms = from ms in p.ExtraCodes
                                              select ms.MilkStorage,
                                         mp = from mp in p.MilkPeriods
                                              where mp.Date >= beginDate
                                                    && mp.Date <= endDate
                                              select mp
                                     }).Where(
                                         p =>
                                         p.p.ExtraCodes.Select(ex => ex.MilkStorageId).Contains(
                                             milkStorageId) ).OrderBy(p => p.p.Name);
 var partners = query1.AsEnumerable().ToList(); 
```

查询返回 200 条记录，从 IOrderedQueryable ToList() 转换非常慢。为什么？

在 sql server management studio 中分析查询后，我注意到查询执行时间为 1 秒并返回 2035 条记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T07:10:07.553

它慢的原因是因为当你这样做`ToList`的时候是实际查询执行的时间。这称为[延迟执行](http://msdn.microsoft.com/en-us/library/bb738633.aspx)。

您可能会看到：[LINQ 和延迟执行](http://blogs.msdn.com/b/charlie/archive/2007/12/09/deferred-execution.aspx)

我认为`AsEnumerable`将其转换为列表时不需要这样做，您可以直接这样做：

```
var partners = query1.ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T07:58:35.413

造成这种情况的原因可能有很多，如果没有任何分析器信息，这只是猜测工作，甚至是一些对代码和领域非常了解的人的受过高等教育的猜测工作通常是错误的。

您应该分析代码，因为瓶颈很可能在数据库中，所以按照@Likurg 的建议获取命令文本并在数据库中进行分析。您可能缺少一个或多个索引。

你也可以对查询本身做一些事情，如果没有别的东西可以让它更容易理解并且**可能**更快

例如

```
p.p.ExtraCodes.Select(ex => ex.MilkStorageId).Contains(milkStorageId) 
```

是真的

```
p.p.ExtraCodes.Any(ex => ex.MilkStorageId == milkStorageId) 
```

并且可以移动到第一个 where 子句，这**可能会**降低您创建的匿名类型对象的数量。也就是说，最有可能的情况是，您在比较中使用的众多字段之一没有索引，这可能会导致对结果集中的每个元素进行大量表扫描。

索引可能加快速度的一些字段是

*   名称
*   m.日期
*   m.MilkStorageId
*   mp.日期
*   PartnerCategory.Category

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T07:42:41.690

首先，使用这个查看生成的查询

```
Context.GetCommand(query1).CommandText; 
```

然后在 db 中调用此命令。并检查分析器读取了多少条记录。

# php - 我可以取消缓存一张图片吗？还是我应该做不同的事情？

> ID：13928016
> 
> 赞同：0
> 
> 时间：2012-12-18T07:09:26.007
> 
> 标签：php, caching

我允许用户将自己的个人资料图片添加到帐户中，这是非常标准的东西。

为了简单起见，当他们更新他们的图像时，我只是覆盖他们当前存储的图像（这不是我们所做的简单方法的重要部分）

因此，页面显示了他们当前的图像，然后他们可以选择上传一个新的，然后保存上传的文件，在 MySQL 表中更新图像 URL 并再次显示页面。

图片已正确上传，MySQL 表已正确更新，但图片已缓存，因此即使他们上传了新图片，旧图片也会显示在页面上。

我可以取消缓存一张图片吗？有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T07:16:41.777

使用版本控制。在图像的链接中，而不是`abc.jpg`说`abc.jpg?v=5`. 并且当上传新图像时，更改数字。

[看到这个问题](https://stackoverflow.com/questions/1399387/force-browser-to-re-read-cached-images)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T07:21:54.637

为了避免图像缓存，您可以简单地在图像 src 中添加查询字符串。最好是添加日期时间。

```
 {$t = getDate();}
     and in your image src add: src= "path.jpg?t=".$t 
```

为此，您无需为新图像更改任何内容..日期时间每秒都会自动更改；）希望它有所帮助..

# c - 如何使用 RL_ARM lib 设计 TCP 工程

> ID：13928017
> 
> 赞同：0
> 
> 时间：2012-12-18T07:09:29.220
> 
> 标签：c, embedded

就像标题一样，我想使用RL_ARM lib创建一个关于TCP传输的项目。我现在对我想要的结构没有清楚和深入的了解。任何人可以举个例子来帮助我或给一些建议。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T05:04:44.637

这个问题我解决了，我配置了502端口。

# jquery - 延迟启用和禁用fancybox关闭按钮

> ID：13928018
> 
> 赞同：2
> 
> 时间：2012-12-18T07:09:30.750
> 
> 标签：jquery, fancybox, delay

当 fancybox 触发弹出窗口时，我希望禁用关闭按钮并在 x 秒后启用它。

有什么解决办法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T19:33:36.377

这个很有趣。

如果您想隐藏关闭按钮以防止至少在 10 秒内关闭，您可能还希望禁用在 fancybox 内部或外部单击时关闭 .... 所以尝试`setTimeout`在`afterShow`回调内部，如：

```
$(".fancybox").fancybox({
    closeClick: false, // prevents closing when clicking INSIDE fancybox 
    helpers: { overlay: { closeClick: false } }, // prevents closing when clicking OUTSIDE fancybox
    afterShow: function() {
        $(".fancybox-close").hide(); // hide close button
        setTimeout(function() {
            $(".fancybox-close").fadeIn();
        }, 10000); // show close button after 10 seconds
    }
});​ 
```

见**[演示](http://jsfiddle.net/ZUbg2/)**

**注意**：这是为 fancybox v2.1.3+

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T11:01:58.817

对于 fancybox 的所有用户，当前最新版本的隐藏/显示关闭图标`showCloseButton`不再起作用。在查看了 fancybox 代码后，我发现 closeBtn 应该设置为 false。用于`'closeBtn' : false`隐藏 CloseIcon。谢谢

# synchronization - Sql Data Sync 如何重命名元数据对象

> ID：13928020
> 
> 赞同：0
> 
> 时间：2012-12-18T07:09:38.287
> 
> 标签：synchronization, microsoft-sync-framework

我正在开发自定义应用程序以使用 sql sync framewrok 2.1 在 azure 数据库和 sql 数据库之间同步数据。
我需要轻松识别同步框架创建的对象。

例如，默认同步框架创建**dbo.scope_info** 用于跟踪元数据。我需要将此表重命名为**SqlDataSync.scope_info**

这是否可能使用同步框架。如果可能，需要遵循哪些步骤。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T10:08:52.113

您可以在配置时指定 ObjectPrefix 甚至 ObjectSchema，只需在文档中查找即可

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T23:40:23.987

这是微软文档的链接 [http://msdn.microsoft.com/en-us/library/microsoft.synchronization.data.sqlserverce.sqlcesyncscopeprovisioning.objectprefix%28v=sql.105%29.aspx](http://msdn.microsoft.com/en-us/library/microsoft.synchronization.data.sqlserverce.sqlcesyncscopeprovisioning.objectprefix%28v=sql.105%29.aspx)

设置对象前缀 SqlSyncScopeProvisioning serverConfig = new SqlSyncScopeProvisioning((SqlConnection)syncProvider.Connection); serverConfig.ObjectPrefix = "同步";

设置 Schema 前缀 SqlSyncScopeProvisioning serverConfig = new SqlSyncScopeProvisioning((SqlConnection)syncProvider.Connection); serverConfig.ObjectSchema =“我的同步”；

# php - 在PHP中获取两次之间的时间差

> ID：13928021
> 
> 赞同：32
> 
> 时间：2012-12-18T07:09:39.457
> 
> 标签：php, mysql, time

> **可能重复：**
> [如何在 PHP 中以分钟为单位获取时差](https://stackoverflow.com/questions/365191/how-to-get-time-difference-in-minutes-in-php)

我正在考勤表上计算迟到和非常迟到的员工。我将登录时间存储在表中（类型：时间）。我能够从数据库中获取时间，并且我想在单独的列中显示时差。

即，如果员工登录或之前登录`09:00:59`，则其正确时间和时间差异应显示为空。如果他在时间 ie 之后登录，`09:01:00`或者更晚，时间差应该是`00:00:01`。同样，我需要计算时间差异。

一次是恒定的，即，`09:00:59`另一次是我从数据库表中获取的。需要在两者之间获得差异。我在 PHP 中工作。希望我的问题很清楚。

先感谢您。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-12-18T07:17:35.200

您可以使用[strtotime()](http://au1.php.net/manual/en/function.strtotime.php)进行时间计算。这是一个例子：

```
$checkTime = strtotime('09:00:59');
echo 'Check Time : '.date('H:i:s', $checkTime);
echo '<hr>';

$loginTime = strtotime('09:01:00');
$diff = $checkTime - $loginTime;
echo 'Login Time : '.date('H:i:s', $loginTime).'<br>';
echo ($diff < 0)? 'Late!' : 'Right time!'; echo '<br>';
echo 'Time diff in sec: '.abs($diff);

echo '<hr>';

$loginTime = strtotime('09:00:59');
$diff = $checkTime - $loginTime;
echo 'Login Time : '.date('H:i:s', $loginTime).'<br>';
echo ($diff < 0)? 'Late!' : 'Right time!';

echo '<hr>';

$loginTime = strtotime('09:00:00');
$diff = $checkTime - $loginTime;
echo 'Login Time : '.date('H:i:s', $loginTime).'<br>';
echo ($diff < 0)? 'Late!' : 'Right time!'; 
```

### [演示](http://phpfiddle.org/lite/code/9cbec4dcfbe6c8e018cc)

检查已经提出的问题 -[如何以分钟为单位获得时差](https://stackoverflow.com/a/365214/1179841)：

> 从最未来的一中减去最过去的一并除以 60。
> 
> 时间以 unix 格式完成，因此它们只是一个大数字，显示从 1970 年 1 月 1 日 00:00:00 GMT 开始的秒数

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-12-18T07:49:54.760

您还可以使用[DateTime](http://php.net/manual/en/datetime.diff.php) 类：

```
$time1 = new DateTime('09:00:59');
$time2 = new DateTime('09:01:00');
$interval = $time1->diff($time2);
echo $interval->format('%s second(s)'); 
```

结果：

```
1 second(s) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-18T07:16:18.990

```
<?php
$start = strtotime("12:00");
$end = // Run query to get datetime value from db
$elapsed = $end - $start;
echo date("H:i", $elapsed);
?> 
```

# c# - 我们可以在 asp.net 的事务范围内调用两个不同的方法吗？

> ID：13928022
> 
> 赞同：4
> 
> 时间：2012-12-18T07:09:43.293
> 
> 标签：c#, asp.net, transactions, transactionscope, rollback

您好，我是 C# 中事务范围的新手。我有两个插入查询，一个属于 UserAccountCreation，其中存储了 LoginCredentials，另一个是在 Employee 表中使用各自的 UserAccountID 作为外键插入员工详细信息。

我编写了两种不同的方法来插入到 UserAccount 表中，在插入到 UserAccount 之后，UserAccountID 被提取并插入到 Employee 表中。情况是当用户帐户创建成功而员工创建失败时，它必须回滚。所以，我想知道我们是否可以使用事务范围并在这两个插入方法之间调用？如果发生错误，我们是否可以回滚在此范围内调用的这些方法。示例代码：

```
private void CreateEmp()
{
  using (TransactionScope scope = new TransactionScope())
  {
    try
    {
        CreateUserAccount();
        CreateEmployee();
        scope.Complete();
    } 
    catch (TransactionAbortedException ex)
        {

    }
  }
} 
```

帮助赞赏！提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T07:15:14.820

您可以在事务范围内调用任意数量的函数。如果您希望两个方法可以处理它们自己的连接（打开/使用/关闭/处置），但它们将默默地成为环境事务的一部分，而无需我们传入任何内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T07:16:23.683

[这](http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope.aspx)应该回答你的问题。要快捷方式，只需阅读代码示例中的注释

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T07:18:56.607

是的。这就是我们使用事务范围的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-05T17:15:10.070

**手头的任务：** 当用户单击“更新”按钮时，我需要在 4 个表中插入一行。

**以下对我来说效果很好：**

我在 4 个更新方法所在的类中添加了一个变量，如果在 4 个方法中的任何一个中捕获到异常，则将其设置为 false。没有这个打电话`tran.Complete();`对我不起作用。

```
/* This variable is used to check if updating the scorecard succeeded. 
Set this variable to false in catch blocks of the 4 update methods. */

private bool bAllUpdated = true; 
```

我的更新点击方法如下所示：

```
/* Showing the try-catch block only */
try
{
    using (TransactionScope tran = new TransactionScope())
    {
         UpdateMethod1();
         UpdateMethod2();
         UpdateMethod3();
         UpdateMethod4();

         if (bAllUpdated == true)
         {
             tran.Complete();
             lblSC_Success.Visible = true;
         }
         else
             throw new TransactionAbortedException();
    }
}

catch (TransactionAbortedException ex)
{
      bAllUpdated = false;
      lblSCEditWarning.Text = "There was an error and your changes where NOT saved. " + ex.Message;
}
catch (ApplicationException ex)
{
    bAllUpdated = false;
    lblSCEditWarning.Text = "There was an error and your changes where NOT saved. " + ex.Message;
}
catch (Exception ex)
{
    bAllUpdated = false;
    lblSCEditWarning.Text = "There was an error and your changes where NOT saved. " + ex.Message;
}
finally
{
    // Clean up the temp tables
    // Refresh page
} 
```

# java - 定义可重复时间间隔的表达式

> ID：13928027
> 
> 赞同：2
> 
> 时间：2012-12-18T07:10:12.793
> 
> 标签：java, time, intervals, cronexpression

我想知道如何为可重复的时间间隔定义表达式。必须有一般的开始和结束日期/时间（虽然结束可能是空的）。它必须有一种重复模式定义。

有很多用例，例如：

*   某餐厅在一段时间内提供折扣（周一至周五，12:15-14:45）

*   俱乐部每周五 21:00 至周六 23:59 需​​要额外收费。

*   每月付款必须在 5 天内（1 日至 5 日）完成

等等

一般来说，用户应该能够定义这样的时间间隔，并且传递某个日期应该返回一个`boolean`结果，该日期是否属于定义的间隔。我有一些经验，`CronExpression`但它不能描述这样的事情。

是否有任何替代方案或 CronExpression 扩展来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T07:21:05.470

看看石英：http: [//quartz-scheduler.org/](http://quartz-scheduler.org/)

这可能是你需要的。

# php - 如何使用 PHP 在后台调用 URL

> ID：13928032
> 
> 赞同：0
> 
> 时间：2012-12-18T07:10:28.317
> 
> 标签：php, ajax, curl

我想呼叫第 3 方 URL，此 URL 由我的 SMS 门户提供给我，用于向最终用户发送 SMS。
现在的问题是，当我通过 PHP 调用这个 URL 时，状态发生了变化，我被重定向到了那个页面，有没有什么方法可以让我们一次又一次地调用这个 URL，我想多次调用这个 URL 的原因是因为可以有 1000 个用户，所以在 URL 中我必须提到用户的姓名和电话号码。
这个过程应该是异步的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T07:15:24.990

那么[exec()](http://php.net/manual/en/function.exec.php)呢？

就像是：

```
$code = escapeshellarg("file_get_contents('http://www.site.com/etc...');");
exec("php -r {$code} > /dev/null 2>&1 &"); 
```

有关这些论点的[更多信息。](https://stackoverflow.com/questions/12341421/multi-threading-in-php/12341511#12341511)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T07:13:41.023

使用 CURL 。有关详细信息，请参阅[http://php.net/manual/en/book.curl.php](http://php.net/manual/en/book.curl.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T09:43:35.240

您可以制作另一个将发送请求的脚本，然后您可以使用 shell 命令从主脚本运行它，方法是在命令末尾附加`&`或`| at now`将进程移至后台。

# jquery - How to correctly concatenate messages correctly in an alert

> ID：13928034
> 
> 赞同：2
> 
> 时间：2012-12-18T07:10:38.800
> 
> 标签：jquery

I want to concatenate messages in my alert so that it show all error messages for the first question it encounters errors on. For example if I have 3 questions and there are errors in question 1 and question 3, when I click on the submit button, the validation alert should display an example alert like so:

> You have errors on Question Number: 1
> 
> • You have not entered in a value in all the Indivdiaul Marks textbox
> 
> • You have not entered in a value in all the Indivdiaul Marks textbox Your Total Marks Remaining does not equal 0

It is only after I have solved errors in question 1 that when I submit the page again then it shows the alert for question number 3 as an example below:

> You have errors on Question Number: 3
> 
> • You have not entered in a value in all the Indivdiaul Marks textbox
> 
> • You have not entered in a value in all the Indivdiaul Marks textbox Your Total Marks Remaining does not equal 0

The problem I am having is that it is only showing 1 question number at a time which is fine but it is showing all of the errors from question 1 and 3 so it looks like this below:

> You have errors on Question Number: 1
> 
> • You have not entered in a value in all the Indivdiaul Marks textbox
> 
> • You have not entered in a value in all the Indivdiaul Marks textbox Your Total Marks Remaining does not equal 0
> 
> • You have not entered in a value in all the Indivdiaul Marks textbox
> 
> • You have not entered in a value in all the Indivdiaul Marks textbox Your Total Marks Remaining does not equal 0

My question is then how can I get the alert working so it matches the way I want it to work?

Below is the jquery code:

```
function validation() {
    var alertValidation = "";
    var _qid = "";
    var _msg = "";

    $("input[data-type='qmark']").each(function(i) {  
        var questions = $(this).attr("data-qnum");
        var marks = parseInt($("[class*=q" + i + "_ans_text]").text()); 
        var txtinput = $(this).val(); 
        _qid = questions;
        _msg = "You have errors on Question Number: " + _qid + "\n";

        if (txtinput == '') {
            alertValidation += "\n\u2022 You have not entered in a value in all the Indivdiaul Marks textbox\n";
        }

        if(marks < '0') {
            alertValidation += "Your Total Marks Remaining does not equal 0 \n\n\u2022 You Need To Remove " + Math.abs(marks) +  " Marks";   
        }

        if(marks > '0') {
            alertValidation += "Your Total Marks Remaining does not equal 0 \n\n\u2022 You Have " + marks +  " Marks Remaining";   
        }
    });

    //comment
    if (alertValidation != "") {
        alert(_msg + alertValidation);
        return false;
    }
    return true;
} 
```

In the above code where it says `//comment`, if I include this code:

```
if (alertValidation != "") {
    return false; //Stop the each loop 
} 
```

Then what it does is that it displays only one message per alert per question e.g

except alerting:

> You have errors on Question Number: 1
> 
> • You have not entered in a value in all the Indivdiaul Marks textbox
> 
> • You have not entered in a value in all the Indivdiaul Marks textbox Your Total Marks Remaining does not equal 0

It will just alert:

> You have errors on Question Number: 1
> 
> • You have not entered in a value in all the Indivdiaul Marks textbox

```
 UPDATE: 
```

Below is an update of the code:

function validation() {

```
 var alertValidation = "";
    var _qid = "";

    $("input[data-type='qmark']").each(function(i) {  
    var questions = $(this).attr("data-qnum");
    var marks = parseInt($("[class*=q" + i + "_ans_text]").text()); 
    var txtinput = $(this).val(); 
    _qid = questions;
    alertValidation += "\nYou have errors on Question Number: " + _qid + "\n";

if (txtinput == '') {
    alertValidation += "\n\u2022 You have not entered in a value in all the Indivdiaul Marks textbox\n";
}    

if(marks < '0')
{

 alertValidation += "Your Total Marks Remaining does not equal 0 \n\n\u2022 You Need To Remove " + Math.abs(marks) +  " Marks";   
}

if(marks > '0')
{

 alertValidation += "Your Total Marks Remaining does not equal 0 \n\n\u2022 You Have " + marks +  " Marks Remaining";   
}

        });

    if (alertValidation != "") {
       alert(alertValidation.substr(1));
        return false;
    }

    return true;
} 
```

But the problem is that below is what it alerts:

> • You have errors on Question Number: 1
> 
> • You have not entered in a value in all the Indivdiaul Marks textbox You have errors on Question Number: 1
> 
> • You have not entered in a value in all the Indivdiaul Marks textbox Your Total Marks Remaining does not equal 0
> 
> • You Have 5 Marks RemainingYou have errors on Question Number: 2
> 
> • You have errors on Question Number: 3
> 
> • You have not entered in a value in all the Indivdiaul Marks textbox Your Total Marks Remaining does not equal 0
> 
> • You Have 5 Marks RemainingYou have errors on Question Number: 3
> 
> • You have not entered in a value in all the Indivdiaul Marks textbox You have errors on Question Number: 3
> 
> • You have not entered in a value in all the Indivdiaul Marks textbox

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T08:54:54.860

You're resetting the `_msg` in every `.each()` iteration. If you just add the `_msg` portion of the message to `alertValidation` on a question by question basis, it should be ok.

Not sure if this code will work as I don't have a test page.

```
function validation() {

    // only keeping track of the final message
    var alertValidation = "",
        // toggle for showing only one error
        showOnlyOneError = true;

    $("input[data-type='qmark']").each(function(i) {  
        var questions = $(this).attr("data-qnum");
        var marks = parseInt($("[class*=q" + (i+1) + "_ans_text]").text(), 10); 
        var txtinput = $(this).val(); 

        // the message for this question
        var msg = '';

        if (txtinput == '') {
            msg += "\n\u2022 You have not entered in a value in all the Indivdiaul Marks textbox\n";
        }

        if (marks < 0) {
            msg += "Your Total Marks Remaining does not equal 0 \n\n\u2022 You Need To Remove " + Math.abs(marks) +  " Marks";   
        } else if (marks > 0) {
            msg += "Your Total Marks Remaining does not equal 0 \n\n\u2022 You Have " + marks +  " Marks Remaining";   
        }

        // if there is an error for the question, add it to the main message
        if (msg.length) {
            alertValidation += alertValidation.length ? '\n\n' : '';
            alertValidation += "You have errors on Question Number: " + questions + "\n";
            alertValidation += msg;
            // stop if we only care about the first error
            return !showOnlyOneError;
        }
    });

    // show the error messages
    if (alertValidation != "") {
        alert(alertValidation);
        return false;
    }

    return true;
} 
```

Edit: Fixed a bug with the `parseInt(...)` statement.

Updated [jsFiddle](http://jsfiddle.net/cbyJD/85/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T08:57:03.660

Your problem is this line:

```
_msg = "You have errors on Question Number: " + _qid + "\n"; 
```

That will overwrite any existing text. So what you need to do is write all text into a single variable (instead of `_msg` **and** `alertValidation`) and always append:

```
alertValidation += "\nYou have errors on Question Number: " + _qid + "\n"; 
```

and then

```
alert(alertValidation.substr(1)); 
```

# java - 如何去除中心点下方的阴影？

> ID：13928039
> 
> 赞同：0
> 
> 时间：2012-12-18T07:11:12.653
> 
> 标签：java, android, teechart

我的样式`CircularGauge`有点像他们在这里所做的： [圆形仪表梯度 - TeeChart - MonoAndroid](https://stackoverflow.com/questions/12864398/circular-gauge-gradient-teechart-monoandroid)

![在此处输入图像描述](../Images/17bc50433739c7a3e627f8af4b3f6f81.png)

如何去除中心点下方的阴影？当我这样做时，如何更改指针（指示器）的颜色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T12:35:39.423

在下面找到我翻译[Narcís 的代码后得到的代码](https://stackoverflow.com/a/12893458/509369)：

```
 tChart1.getHeader().setVisible(false);

    CircularGauge circularGauge1 = new CircularGauge(tChart1.getChart());

    circularGauge1.getFrame().setVisible(false);
    circularGauge1.getFaceBrush().setVisible(false);
    circularGauge1.setDisplayTotalAngle(180);
    circularGauge1.setTotalAngle(180);
    circularGauge1.setValue(200);
    circularGauge1.getTicks().setVisible(false);
    circularGauge1.setMinimum(0);
    circularGauge1.setMaximum(1000);
    circularGauge1.getAxis().getAxisPen().setVisible(false);
    circularGauge1.getAxis().setIncrement(500);
    circularGauge1.getRedLine().setVisible(false);
    circularGauge1.setGreenLineStartValue(0);
    circularGauge1.setGreenLineEndValue(1000);
    circularGauge1.getGreenLine().getGradient().setDirection(GradientDirection.HORIZONTAL);
    circularGauge1.getGreenLine().getGradient().setUseMiddle(true);
    circularGauge1.getGreenLine().getGradient().setStartColor(Color.orange);
    circularGauge1.getGreenLine().getGradient().setMiddleColor(Color.yellow);
    circularGauge1.getGreenLine().getGradient().setEndColor(Color.green);
    circularGauge1.getGreenLine().getPen().setVisible(false); 
```

这就是我的样子：

![圆规](../Images/edd42112d01bdd5adbfd1bee0ccd192c.png)

# ruby-on-rails - 我的“视图/布局”中的部分控制器与哪个控制器一起使用？

> ID：13928040
> 
> 赞同：1
> 
> 时间：2012-12-18T07:11:13.940
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我尝试添加`@categories = Category.all`我的`ApplicationController`.

但是当我点击我的一个观点时，它不起作用——它似乎`@categories`是`nil`不应该的。

我想`_navigation.html.erb`在我的`layouts`文件夹中生成一个菜单。

`@categories`如果不在 my 中，我在哪里声明将在我的所有视图中使用的部分中使用的实例变量`Application Controller`？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T07:27:00.520

如果要在您的所有视图中使用它，也许您可​​以定义一个助手。

```
def all_categories
 @categories ||= Category.all
end 
```

您可以使用 all_categories 在所有视图中访问它。

**更新：**

如果您希望在控制器中定义 all_categories，请使用 helper_method

```
helper_method :all_categories 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T07:20:58.220

在应用程序控制器中使用 before_filter，它会在您调用的操作之前执行任何方法

```
class ApplicationController < ActionController::Base
  protect_from_forgery
  before_filter :some_action

  def some_action
   @categories = Category.all
  end 
end 
```

你应该读[这个](http://guides.rubyonrails.org/action_controller_overview.html#filters)

# linux - linuxmint从USB安装错误？

> ID：13928042
> 
> 赞同：0
> 
> 时间：2012-12-18T07:11:22.107
> 
> 标签：linux, ubuntu, linux-mint

我使用**linuxmint-13-mate-dvd-64bit.iso**进行了 USB 安装。然后我从 Windows 7 里面运行它并安装它。在我重新启动之后，linuxmint 是一个像这样的错误

```
(initramfs) losetup: could not find any free loop device 
```

在提示符（intramfs）中，我可以输入“ `help`”命令。

但是我不是linux用户，所以我不知道应该使用哪个？请帮我解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-13T13:24:14.017

你提到的“USB”和“linux iso”这两个词让我觉得你这样做了：你把那个iso放在usb闪存棒**中，让它可以启动**（就像一个live cd），或者，你试着这样做. 为确保您的 USB 闪存棒真正可启动，您应该真正尝试从 USB 闪存棒启动。

现在，这是（我认为）你应该做的，也是你所做的。

您应该使用可启动 USB 棒做什么：

*   从usb启动，在成功启动linux SO后，点击“install on Hard disk”或linux mint里面的任何东西；

你做了什么：

*   启动 Windows 并使用 USB 记忆棒内的文件，准备“循环挂载”，安装 linux。

希望这可以帮助。

# javascript - 使用 java Script 设置 HTML 属性值

> ID：13928045
> 
> 赞同：0
> 
> 时间：2012-12-18T07:11:42.327
> 
> 标签：javascript, html

我有 html 下拉列表，其中有国家列表。现在我想将当前国家设置为列表的默认值。我找到了使用 Geolocation 获取国家/地区的 JavaScript 代码。

我的代码：

```
function getCountry(var name) {
    if(name==geoip_country_name()) {
        return "selected";
    }
} 
```

然后我需要设置`selected`选项列表的属性。

我试过这个：

```
<option value="Sri Lanka" selected="getCountry('sri Lanka')">Sri Lanka</option> 
```

但这是不正确的。
基本上我想使用 JavaScript 函数设置选定的属性值

我怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T07:26:02.487

使用该`window.onload`事件，只需设置下拉列表的值。请记住，您的硬编码国家名称可能与地理服务不同。

```
<script>
    window.onload = function(){
        document.getElementById("country").value = geoip_country_name();
    }
</script>

<select id="country" name="country">
<option value="Sri Lanka">Sri Lanka</option>
<option value="UK">UK</option>
<option value="USA">USA</option>
<select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T07:20:30.883

如果您使用的是 JQuery，以下行应该可以解决您的问题：

```
$('select').val(geoip_country_name()); 
```

如果`geoip_country_name`以小写形式返回名称，则在初始化选择列表时，每个选项的值都是小写的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T07:21:55.743

基本上你可以这样做：

```
<html>
<body>
  <select id="country">
  <option id="germany" value="Germany">DE</option>
  <option id="uk" value="UK">UK</option>
  <option id="usa" value="USA">USA</option>
</select>
<script>
  var selectedCountry =  'uk'; //getCountry
  var index = document.getElementById(selectedCountry).index;
  document.getElementById("country").selectedIndex=index;
</script> 
```

在呈现您的选择后启动脚本。

请注意，此示例可能不是最佳实践。我也不确定它是否适用于所有浏览器（Opera 可以）。您可以使用适当的框架，如 JQuery、Mootools、...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T07:24:25.390

该`selected`属性不会自动评估为 JS 代码。假设您已将所需的国家/地区名称存储在变量`country`中，可以尝试以下方法：

```
var country = "Sri Lanka";
var select = document.getElementById('myselect'); //Change to the ID of your select element
for (var i = 0; i < select.options.length; i++){
    if(select.options[i].value == country)
        select.selectedIndex = i;
} 
```

# javascript - 如何在 HTML5 中呈现 MovieClip 的图层？

> ID：13928046
> 
> 赞同：0
> 
> 时间：2012-12-18T07:11:52.683
> 
> 标签：javascript, html, actionscript-3, flash, svg

我有 2 帧的电影剪辑，每帧有 3 层，文本层（标题文本），背景层和可旋转精灵层。

那么，用户可以拖放和旋转这些movieClip，我如何在 HTML5 中获得相同的结果？是否有可以模拟movieClip 特征（多层、多帧）的矢量引擎？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T14:53:22.727

你的问题有点含糊，但是有一个叫做[CreateJS](http://www.createjs.com/#!/CreateJS)的东西可能是你正在寻找的东西？该项目的赞助商是 Adob​​e、Microsoft 和 gskinner.com。

# sql-server - 在sql的存储过程中使用if语句

> ID：13928047
> 
> 赞同：0
> 
> 时间：2012-12-18T07:11:59.793
> 
> 标签：sql-server, stored-procedures

我有一个存储过程返回给我一些记录。现在我想根据条件更改显示记录的条件

```
select * from table
WHERE cond1 = c1
AND cond2 = c2 
```

基本上我想要这样的结构

```
if(Val1= Val2) then  
select * from table
WHERE cond1 = c1
AND cond2 = c2
AND cond3 = c3
else
select * from table
WHERE cond1 = c1
AND cond2 = c2 
```

由于存储的过程很大，我不能改变太多，所以我只能使用 if 语句更改 where 条件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T07:29:01.947

只需在 where 子句中包含条件：

```
select * from table
WHERE cond1 = c1
AND cond2 = c2
AND (Val1 <> Val2 OR cond3 = c3) 
```

如果这种结构不断扩展——也许你正在使用不同的可能参数进行某种形式的搜索——值得阅读 Erland Sommarskog 的[T-SQL 中的动态搜索条件](http://www.sommarskog.se/dyn-search.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T07:15:30.113

尝试这个：

```
IF Val1 = Val2 
BEGIN

END
ELSE
BEGIN

END 
```

# iphone - 当 recordId 不可用时，ABAddressBookGetPersonWithRecordID 使应用程序崩溃

> ID：13928048
> 
> 赞同：0
> 
> 时间：2012-12-18T07:12:08.610
> 
> 标签：iphone, ios, abaddressbook

在我的应用程序中，我已存储`ABPropertyID`在数据库中，并基于此显示了数量，`ABRecordRef`但是`ABAddressBookGetPersonWithRecordID(addressBook, recordID).`当在联系人中删除联系人并尝试获取`ABRecordRef`时，应用程序崩溃是显而易见的。

所以我的问题是：

有什么方法可以检查地址簿中的记录 ID 是否可用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T07:14:29.810

此函数不会抛出异常，但如果没有具有此 ID 的记录，则返回 NULL。

请参阅：http: [//developer.apple.com/library/ios/ipad/#documentation/AddressBook/Reference/ABPersonRef_iPhoneOS/Reference/reference.html](http://developer.apple.com/library/ios/ipad/#documentation/AddressBook/Reference/ABPersonRef_iPhoneOS/Reference/reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T07:26:51.937

试试这个

```
ABAddressBookRef addressBookRef = ABAddressBookCreateWithOptions(NULL, NULL);

if (ABAddressBookGetAuthorizationStatus() == kABAuthorizationStatusNotDetermined) {
    ABAddressBookRequestAccessWithCompletion(addressBookRef, ^(bool granted, CFErrorRef error) {
        // First time access has been granted, add the contact
        ABAddressBookRef iPhoneAddressBook = ABAddressBookCreateWithOptions(NULL, NULL);

        ABRecordRef newPerson = ABPersonCreate();

        ABRecordSetValue(newPerson, kABPersonSortByFirstName,(__bridge CFTypeRef)(firstname),&error);
        ABRecordSetValue(newPerson, kABPersonLastNameProperty,(__bridge CFTypeRef)(lastname), &error);
        ABRecordSetValue(newPerson, kABPersonOrganizationProperty, @"", &error);
        ABRecordSetValue(newPerson, kABPersonJobTitleProperty,@"", &error);

        ABMutableMultiValueRef multiPhone = ABMultiValueCreateMutable(kABMultiStringPropertyType);
        ABMultiValueAddValueAndLabel(multiPhone, (__bridge CFTypeRef)(contact_phone), kABPersonPhoneMainLabel, NULL);
        ABMultiValueAddValueAndLabel(multiPhone, @"", kABPersonPhoneMobileLabel, NULL);
        ABMultiValueAddValueAndLabel(multiPhone, @"", kABOtherLabel, NULL);
        ABRecordSetValue(newPerson, kABPersonPhoneProperty, multiPhone,nil);
        CFRelease(multiPhone);

        ABMutableMultiValueRef multiEmail = ABMultiValueCreateMutable(kABMultiStringPropertyType);
        ABMultiValueAddValueAndLabel(multiEmail,(__bridge CFTypeRef)(contact_email) , kABWorkLabel, NULL);
        ABRecordSetValue(newPerson, kABPersonEmailProperty, multiEmail, &error);
        CFRelease(multiEmail);

        //        ABMutableMultiValueRef multiAddress = ABMultiValueCreateMutable(kABMultiDictionaryPropertyType);
        //    NSMutableDictionary *addressDictionary = [[NSMutableDictionary alloc] init];
        //    [addressDictionary setObject:@"750 North Orleans Street, Ste 601" forKey:(NSString *) kABPersonAddressStreetKey];
        //    [addressDictionary setObject:@"Chicago" forKey:(NSString *)kABPersonAddressCityKey];
        //    [addressDictionary setObject:@"IL" forKey:(NSString *)kABPersonAddressStateKey];
        //    [addressDictionary setObject:@"60654" forKey:(NSString *)kABPersonAddressZIPKey];
        //    ABMultiValueAddValueAndLabel(multiAddress, addressDictionary, kABWorkLabel, NULL);
        //    ABRecordSetValue(newPerson, kABPersonAddressProperty, multiAddress,&error);
        //    CFRelease(multiAddress);

        ABAddressBookAddRecord(iPhoneAddressBook, newPerson, &error);
        ABAddressBookSave(iPhoneAddressBook, &error);

        if (error != NULL)
        {
            NSLog(@"Danger Will Robinson! Danger!");
        }

        // ABAddressBookRef addressBook = ABAddressBookCreate();

    });
}
else if (ABAddressBookGetAuthorizationStatus() == kABAuthorizationStatusAuthorized) {
    CFErrorRef error = NULL;
   // ABAddressBookRef addressBook =ABAddressBookCreateWithOptions(NULL, NULL);

    ABAddressBookRef iPhoneAddressBook = ABAddressBookCreateWithOptions(NULL, NULL);

    ABRecordRef newPerson = ABPersonCreate();

    ABRecordSetValue(newPerson, kABPersonSortByFirstName,(__bridge CFTypeRef)(firstname),&error);
    NSLog(@"%@",(__bridge CFTypeRef)(firstname));
    ABRecordSetValue(newPerson, kABPersonLastNameProperty,(__bridge CFTypeRef)(lastname), &error);
    NSLog(@"%@",(__bridge CFTypeRef)(lastname));

    ABRecordSetValue(newPerson, kABPersonOrganizationProperty, @"", &error);
    ABRecordSetValue(newPerson, kABPersonJobTitleProperty,@"", &error);

    ABMutableMultiValueRef multiPhone = ABMultiValueCreateMutable(kABMultiStringPropertyType);
    ABMultiValueAddValueAndLabel(multiPhone,(__bridge CFTypeRef)(contact_phone), kABPersonPhoneMainLabel, NULL);
    ABMultiValueAddValueAndLabel(multiPhone, @"", kABPersonPhoneMobileLabel, NULL);
    ABMultiValueAddValueAndLabel(multiPhone, @"", kABOtherLabel, NULL);
    ABRecordSetValue(newPerson, kABPersonPhoneProperty, multiPhone,nil);
    CFRelease(multiPhone);

    ABMutableMultiValueRef multiEmail = ABMultiValueCreateMutable(kABMultiStringPropertyType);
    ABMultiValueAddValueAndLabel(multiEmail, (__bridge CFTypeRef)(contact_email), kABWorkLabel, NULL);
    ABRecordSetValue(newPerson, kABPersonEmailProperty, multiEmail, &error);
    CFRelease(multiEmail);

    //        ABMutableMultiValueRef multiAddress = ABMultiValueCreateMutable(kABMultiDictionaryPropertyType);
    //    NSMutableDictionary *addressDictionary = [[NSMutableDictionary alloc] init];
    //    [addressDictionary setObject:@"750 North Orleans Street, Ste 601" forKey:(NSString *) kABPersonAddressStreetKey];
    //    [addressDictionary setObject:@"Chicago" forKey:(NSString *)kABPersonAddressCityKey];
    //    [addressDictionary setObject:@"IL" forKey:(NSString *)kABPersonAddressStateKey];
    //    [addressDictionary setObject:@"60654" forKey:(NSString *)kABPersonAddressZIPKey];
    //    ABMultiValueAddValueAndLabel(multiAddress, addressDictionary, kABWorkLabel, NULL);
    //    ABRecordSetValue(newPerson, kABPersonAddressProperty, multiAddress,&error);
    //    CFRelease(multiAddress);

    ABAddressBookAddRecord(iPhoneAddressBook, newPerson, &error);
    ABAddressBookSave(iPhoneAddressBook, &error);
    alertvalue++;

    if (error != NULL)
    {
        NSLog(@"Error not found!");
    }

    // ABAddressBookRef addressBook = ABAddressBookCreate();

}
 else {
    // The user has previously denied access
    // Send an alert telling user to change privacy setting in settings app
 }        } 
```

# objective-c - 使用 NSInterger 值对 NSMuatbleArray 进行排序

> ID：13928049
> 
> 赞同：0
> 
> 时间：2012-12-18T07:12:19.373
> 
> 标签：objective-c, ios, nsmutablearray

我想对里面有 NSInteger 值的 NSMutableArray 进行排序。我尝试使用此解决方案：

```
 NSArray *sorted = [array sortedArrayUsingSelector:@selector(compare:)]; 
```

它几乎奏效了，所以我想问为什么不是一切都好。以下是数据示例：

```
not sorted = (
    30,
    42,
    54,
    6,
    18
)

 sorted = (
    18,
    30,
    42,
    54,
    6
) 
```

我们可以看到它对除了数组末尾的 6 值之外的所有内容进行了排序。

为什么会发生这种情况？

谢谢你。

完整方法：

```
- (void) initialize{
    NSInteger min = 30;
    NSInteger interval = 12;
    NSInteger count = floor(60/interval);

    for (int i = 0; i < count; i++) {

        [array addObject:[NSString stringWithFormat:@"%i",min]];
        min +=interval;

        if (min > 60)
            min -= 60;
    }

    //DLog(@"not sorted = %@",minutes);
    array = [[array sortedArrayUsingSelector:@selector(compare:)] mutableCopy];
    //DLog(@"sorted = %@",minutes);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T07:29:56.820

在上述情况下您遇到了问题，因为您正在排序字符串值而不是 NSNUMBER。您必须使用 NSNumber 来添加整数对象。然后执行以下操作：

```
 NSMutableArray *array = [[NSMutableArray alloc ] initWithObjects:
                              [NSNumber numberWithInt:10],    
                              [NSNumber numberWithInt:50],
                              [NSNumber numberWithInt:5],
                              [NSNumber numberWithInt:3],
                              nil];

      NSLog(@"SORTED = %@",[array sortedArrayUsingSelector:@selector(compare:
                                                               )]); 
```

这会给你一个排序的数组。

# php - 如何以独特的方式获取多个表单数据？

> ID：13928051
> 
> 赞同：0
> 
> 时间：2012-12-18T07:12:35.900
> 
> 标签：php, codeigniter

我有一个包含两个文本字段的表单。一个是价格，另一个是份额。这些文本字段对每一行都重复。我在 post 数组中提交后提取值。但是`POST`阵列以正常方式出现。我希望它以特定的方式，如下所示。

```
<td colspan="3"><label><?php echo form_error('amount'); ?></label><input type="text" class="textsmall" name="post_cost[]" id="<?php echo $cust_id_cur; ?>" value="<?php echo set_value('amount'); ?>" /></td>

<td colspan="3"><label><?php echo form_error('share'); ?></label><input type="text" class="textsmall" name="post_share[]" id="<?php echo $cust_id_cur; ?>" value="100" /></td> 
```

这是两个文本字段。当我提交 POST 数组时是这样的............

```
post_cost                             
(                                      
[0] => 324123
[1] => 324123
[2] => 324123
[3] => 324123
[4] => 324123
[5] => 324123
)

post_share
(
[0] => 100
[1] => 100
[2] => 100
[3] => 100
[4] => 100
[5] => 100
) 
```

但我想要两个像这样的上述数组。有一个文件叫做`$cust_id_cur`唯一文件。我想要每个数组的值与这些 id 相对应。我的意思是总共有六行，所以会有六行`cust_id's`。

```
post_cost
(
[$cust_id_cur] => 324123
[$cust_id_cur] => 324123
[$cust_id_cur] => 324123
[$cust_id_cur] => 324123
[$cust_id_cur] => 324123
[$cust_id_cur] => 324123
) 
```

为什么我这样问是我的顺序`cust_id's`并不总是相同的。所以我会反对`cust_id`。当我提交时，我需要将它们保存在数据库中`cust_id`。所以我想要像上面这样的数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T07:15:23.017

您可以在循环中使用变量填充索引：

```
<td colspan="3"><label><?php echo form_error('amount'); ?></label><input type="text" class="textsmall" name="post_cost[<?php echo $cust_id_cur; ?>]" id="<?php echo $cust_id_cur; ?>" value="<?php echo set_value('amount'); ?>" /></td>
                                                                                                                       ^^^^^^^^ here

<td colspan="3"><label><?php echo form_error('share'); ?></label><input type="text" class="textsmall" name="post_share[<?php echo $cust_id_cur; ?>]" id="<?php echo $cust_id_cur; ?>" value="100" /></td>
                                                                                                                       ^^^^^^^^ here 
```

# colors - 在 gnuplot 中，如何设置 3 列的 rgb 颜色？

> ID：13928055
> 
> 赞同：1
> 
> 时间：2012-12-18T07:12:41.620
> 
> 标签：colors, gnuplot

我的数据文件中有 3 个“列”，它们指定了红色、绿色和蓝色部分：

```
red     green   blue
0.263   0.914   0.086
0.263   0.914   0.086
0.263   0.914   0.086
1.000   0.571   0.429
1.000   0.571   0.429 
```

如何使用这些绘制由这些值绘制的其他列？显然，以下方法仅适用于带有 splot 的 3D 绘图：

```
rgb(r,g,b)=<some function code>
plot './data.csv' u 1:2:(rgb($8,$9,$10)) w l rgb variable 
```

我看不出如何使用这些值来为绘图着色。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T12:51:54.830

看看 gnuplot 演示[`rgb_variable.dem`](http://gnuplot.sourceforge.net/demo/rgb_variable.html)。对应的数据文件如下所示：

```
0   0   0   0x000000
255 0   0   0xff0000
255 255 0   0xffff00
255 255 255 0xffffff
0   255 255 0x00ffff
255 0   255 0xff00ff
0   255 0   0x00ff00
#<snip> 
#...
#</snip> 
```

请注意，直到最后一个示例才使用第 4 列——也就是说，这*几乎*就是您所拥有的。您将有一个额外的变换来将颜色从 [0-1] 范围变为 [0-255] 范围，但这是一个简单的变换（只需乘以 255）：

```
scale(x)=x*255
rgb(r,g,b) = int(scale(r))*65536 + int(scale(g))*256 + int(scale(b))
plot './data.csv' u 1:2:(rgb($8,$9,$10)) with lines linecolor rgb variable
#                                                   ^^^^^^^^^ don't forget this:-) 
```

# angularjs - 如何在 AngularJS 中取消 $http 请求？

> ID：13928057
> 
> 赞同：192
> 
> 时间：2012-12-18T07:12:49.763
> 
> 标签：angularjs, promise, angular-promise, angular-http, cancellation

给定 AngularJS 中的 Ajax 请求

```
$http.get("/backend/").success(callback); 
```

如果启动另一个请求（例如相同的后端，不同的参数），取消该请求的最有效方法是什么。

* * *

## 回答 #1

> 赞同：329
> 
> 时间：2013-06-26T19:00:39.377

此功能通过超时参数[添加到 1.1.5 版本中：](https://github.com/angular/angular.js/blob/master/CHANGELOG.md)

```
var canceler = $q.defer();
$http.get('/someUrl', {timeout: canceler.promise}).success(successCallback);
// later...
canceler.resolve();  // Aborts the $http request if it isn't finished. 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-04-01T19:21:30.640

使用 timeout 属性取消 Angular $http Ajax 在 Angular 1.3.15 中不起作用。对于那些迫不及待地想解决这个问题的人，我分享了一个封装在 Angular 中的 jQuery Ajax 解决方案。

该解决方案涉及两项服务：

*   HttpService（jQuery Ajax 函数的包装器）；
*   PendingRequestsService（跟踪未决/打开的 Ajax 请求）

这里是 PendingRequestsService 服务：

```
 (function (angular) {
    'use strict';
    var app = angular.module('app');
    app.service('PendingRequestsService', ["$log", function ($log) {            
        var $this = this;
        var pending = [];
        $this.add = function (request) {
            pending.push(request);
        };
        $this.remove = function (request) {
            pending = _.filter(pending, function (p) {
                return p.url !== request;
            });
        };
        $this.cancelAll = function () {
            angular.forEach(pending, function (p) {
                p.xhr.abort();
                p.deferred.reject();
            });
            pending.length = 0;
        };
    }]);})(window.angular); 
```

HttpService 服务：

```
 (function (angular) {
        'use strict';
        var app = angular.module('app');
        app.service('HttpService', ['$http', '$q', "$log", 'PendingRequestsService', function ($http, $q, $log, pendingRequests) {
            this.post = function (url, params) {
                var deferred = $q.defer();
                var xhr = $.ASI.callMethod({
                    url: url,
                    data: params,
                    error: function() {
                        $log.log("ajax error");
                    }
                });
                pendingRequests.add({
                    url: url,
                    xhr: xhr,
                    deferred: deferred
                });            
                xhr.done(function (data, textStatus, jqXhr) {                                    
                        deferred.resolve(data);
                    })
                    .fail(function (jqXhr, textStatus, errorThrown) {
                        deferred.reject(errorThrown);
                    }).always(function (dataOrjqXhr, textStatus, jqXhrErrorThrown) {
                        //Once a request has failed or succeeded, remove it from the pending list
                        pendingRequests.remove(url);
                    });
                return deferred.promise;
            }
        }]);
    })(window.angular); 
```

稍后在您的服务中，当您加载数据时，您将使用 HttpService 而不是 $http：

```
(function (angular) {

    angular.module('app').service('dataService', ["HttpService", function (httpService) {

        this.getResources = function (params) {

            return httpService.post('/serverMethod', { param: params });

        };
    }]);

})(window.angular); 
```

稍后在您的代码中，您想加载数据：

```
(function (angular) {

var app = angular.module('app');

app.controller('YourController', ["DataService", "PendingRequestsService", function (httpService, pendingRequestsService) {

    dataService
    .getResources(params)
    .then(function (data) {    
    // do stuff    
    });    

    ...

    // later that day cancel requests    
    pendingRequestsService.cancelAll();
}]);

})(window.angular); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-12-30T16:35:03.777

`$http`当前版本的 AngularJS 不支持取消发出的请求。有一个[拉取请求打开](https://github.com/angular/angular.js/pull/1623)以添加此功能，但此 PR 尚未审核，因此尚不清楚它是否会成为 AngularJS 核心。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-07-01T07:33:06.323

如果你想用 ui-router 取消 stateChangeStart 上的挂起请求，你可以使用这样的东西：

// 服务中

```
 var deferred = $q.defer();
                var scope = this;
                $http.get(URL, {timeout : deferred.promise, cancel : deferred}).success(function(data){
                    //do something
                    deferred.resolve(dataUsage);
                }).error(function(){
                    deferred.reject();
                });
                return deferred.promise; 
```

// 在 UIrouter 配置中

```
$rootScope.$on('$stateChangeStart', function (event, toState, toParams, fromState, fromParams) {
    //To cancel pending request when change state
       angular.forEach($http.pendingRequests, function(request) {
          if (request.cancel && request.timeout) {
             request.cancel.resolve();
          }
       });
    }); 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2016-12-13T20:20:51.053

由于某种原因 config.timeout 对我不起作用。我使用了这种方法：

```
let cancelRequest = $q.defer();
let cancelPromise = cancelRequest.promise;

let httpPromise = $http.get(...);

$q.race({ cancelPromise, httpPromise })
    .then(function (result) {
...
});
```

并 cancelRequest.resolve() 取消。实际上它不会取消请求，但至少您不会得到不必要的响应。

希望这可以帮助。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-10-05T12:19:47.970

这通过使用 abort 方法装饰 $http 服务来增强接受的答案，如下所示...

```
'use strict';
angular.module('admin')
  .config(["$provide", function ($provide) {

$provide.decorator('$http', ["$delegate", "$q", function ($delegate, $q) {
  var getFn = $delegate.get;
  var cancelerMap = {};

  function getCancelerKey(method, url) {
    var formattedMethod = method.toLowerCase();
    var formattedUrl = encodeURI(url).toLowerCase().split("?")[0];
    return formattedMethod + "~" + formattedUrl;
  }

  $delegate.get = function () {
    var cancelerKey, canceler, method;
    var args = [].slice.call(arguments);
    var url = args[0];
    var config = args[1] || {};
    if (config.timeout == null) {
      method = "GET";
      cancelerKey = getCancelerKey(method, url);
      canceler = $q.defer();
      cancelerMap[cancelerKey] = canceler;
      config.timeout = canceler.promise;
      args[1] = config;
    }
    return getFn.apply(null, args);
  };

  $delegate.abort = function (request) {
    console.log("aborting");
    var cancelerKey, canceler;
    cancelerKey = getCancelerKey(request.method, request.url);
    canceler = cancelerMap[cancelerKey];

    if (canceler != null) {
      console.log("aborting", cancelerKey);

      if (request.timeout != null && typeof request.timeout !== "number") {

        canceler.resolve();
        delete cancelerMap[cancelerKey];
      }
    }
  };

  return $delegate;
}]);
  }]); 
```

这段代码在做什么？

要取消请求，必须设置“承诺”超时。如果没有在 HTTP 请求上设置超时，那么代码会添加一个“承诺”超时。（如果已经设置了超时，那么什么都不会改变）。

但是，要解决承诺，我们需要处理“延迟”。因此，我们使用映射，以便稍后检索“延迟”。当我们调用 abort 方法时，会从 map 中获取“deferred”，然后我们调用 resolve 方法来取消 http 请求。

希望这可以帮助某人。

限制

目前这仅适用于 $http.get 但您可以为 $http.post 等添加代码

如何使用 ...

然后，您可以使用它，例如，在状态更改时，如下...

```
rootScope.$on('$stateChangeStart', function (event, toState, toParams) {
  angular.forEach($http.pendingRequests, function (request) {
        $http.abort(request);
    });
  }); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-05-18T16:14:46.113

`$http`您可以使用“装饰器”将自定义功能添加到服务中，该装饰器会将`abort()`功能添加到您的承诺中。

这是一些工作代码：

```
app.config(function($provide) {
    $provide.decorator('$http', function $logDecorator($delegate, $q) {
        $delegate.with_abort = function(options) {
            let abort_defer = $q.defer();
            let new_options = angular.copy(options);
            new_options.timeout = abort_defer.promise;
            let do_throw_error = false;

            let http_promise = $delegate(new_options).then(
                response => response, 
                error => {
                    if(do_throw_error) return $q.reject(error);
                    return $q(() => null); // prevent promise chain propagation
                });

            let real_then = http_promise.then;
            let then_function = function () { 
                return mod_promise(real_then.apply(this, arguments)); 
            };

            function mod_promise(promise) {
                promise.then = then_function;
                promise.abort = (do_throw_error_param = false) => {
                    do_throw_error = do_throw_error_param;
                    abort_defer.resolve();
                };
                return promise;
            }

            return mod_promise(http_promise);
        }

        return $delegate;
    });
}); 
```

此代码使用 angularjs 的装饰器功能向服务添加`with_abort()`功能`$http`。

`with_abort()`使用`$http`允许您中止 http 请求的超时选项。

返回的 Promise 被修改为包含一个`abort()`函数。它还有代码来确保`abort()`即使你链接承诺也能正常工作。

这是一个如何使用它的示例：

```
// your original code
$http({ method: 'GET', url: '/names' }).then(names => {
    do_something(names));
});

// new code with ability to abort
var promise = $http.with_abort({ method: 'GET', url: '/names' }).then(
    function(names) {
        do_something(names));
    });

promise.abort(); // if you want to abort 
```

默认情况下，当您调用`abort()`请求时，请求会被取消，并且不会运行任何 Promise 处理程序。

如果您希望调用错误处理程序，请将 true 传递给`abort(true)`.

在您的错误处理程序中，您可以通过检查`xhrStatus`属性来检查“错误”是否是由于“中止”造成的。这是一个例子：

```
var promise = $http.with_abort({ method: 'GET', url: '/names' }).then(
    function(names) {
        do_something(names));
    }, 
    function(error) {
        if (er.xhrStatus === "abort") return;
    }); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-11-29T20:28:40.293

这是一个处理多个请求的版本，还检查回调中的取消状态以抑制错误块中的错误。（在打字稿中）

控制器级别：

```
 requests = new Map<string, ng.IDeferred<{}>>(); 
```

在我的 http 中获取：

```
 getSomething(): void {
        let url = '/api/someaction';
        this.cancel(url); // cancel if this url is in progress

        var req = this.$q.defer();
        this.requests.set(url, req);
        let config: ng.IRequestShortcutConfig = {
            params: { id: someId}
            , timeout: req.promise   // <--- promise to trigger cancellation
        };

        this.$http.post(url, this.getPayload(), config).then(
            promiseValue => this.updateEditor(promiseValue.data as IEditor),
            reason => {
                // if legitimate exception, show error in UI
                if (!this.isCancelled(req)) {
                    this.showError(url, reason)
                }
            },
        ).finally(() => { });
    } 
```

辅助方法

```
 cancel(url: string) {
        this.requests.forEach((req,key) => {
            if (key == url)
                req.resolve('cancelled');
        });
        this.requests.delete(url);
    }

    isCancelled(req: ng.IDeferred<{}>) {
        var p = req.promise as any; // as any because typings are missing $$state
        return p.$$state && p.$$state.value == 'cancelled';
    } 
```

现在查看网络选项卡，我发现它运行良好。我调用了该方法 4 次，只有最后一个通过了。

[![在此处输入图像描述](../Images/aa6a5812839cb8942762bcefbe9ea705.png)](https://i.stack.imgur.com/za9DT.png)

# python - 在 fcm 中创建门

> ID：13928060
> 
> 赞同：0
> 
> 时间：2012-12-18T07:13:01.777
> 
> 标签：python

我正在研究 fcm，我想为 .fcs 文件创建门。
我已经看过文档中的示例，但我不明白如何创建手动门。

当用户手动选择点时，谁能告诉我如何创建手动门？（例如 polygate、freegate 等）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T20:35:44.413

您是否在[http://code.google.com/p/py-fcm/询问有关 fcm 库的问题](http://code.google.com/p/py-fcm/)

如果是这样，则没有特定的方法来获得门的积分。作为一个后端库，我们觉得它更多地属于图形工具包的领域。我们在 src 树的 gui/mpl_gate.py 文件中提供了一个示例，作为使用 matplot lib 的一种方式。

# android - Android AAPT 问题 - 将新图像替换为资源时

> ID：13928061
> 
> 赞同：7
> 
> 时间：2012-12-18T07:13:01.830
> 
> 标签：android, eclipse, ant

在我更新了我的 eclipse 和 Android SDK 之后，我在将文件粘贴到 drawable 时遇到了一些问题。实际上，我正在尝试替换同名的新图像。在我重新启动日食后，错误消失了。是什么原因，我该如何避免。请指导我。

```
**Log:**

Error: name expected    logo.png    /Sample/res/drawable-large  line 4  Android AAPT Problem 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-18T07:14:49.727

我看到了同样的事情。它似乎是最新版本中的一个错误，并且不仅限于图像文件。我在使用原始资源时遇到了类似的问题——AAPT 尝试将粘贴到`res`文件夹中的任何内容解析为 XML。

除了重新启动 Eclipse，您还可以通过清理项目来清除错误。

**编辑**这显然已在工具的最新版本中得到修复。如果您仍然遇到问题，请确保您拥有所有内容的最新更新。

# linux - grep 匹配模式的文件名并移动到所需的文件夹

> ID：13928064
> 
> 赞同：2
> 
> 时间：2012-12-18T07:13:12.243
> 
> 标签：linux, bash, shell, grep, move

我在 .txt 文件中有一个模式列表。[列表.txt]。对于list.txt中的每一行，我想在list.txt中以指定模式开头的位置查找所有文件，然后将这些文件移动到另一个位置。考虑一个例子。

在`~/home/ana/folder_a`我有`list.txt`，看起来像这样......

*列表.txt*

```
1abc
2def
3xyz 
```

在这个位置，即`/home/ana/folder_a/`，有多个以list.txt 中的模式开头的文件。所以，有像 1abc_a.txt、1abc_c.txt、1abc_f.txt、2def_g.txt、3xyz_a.txt 这样的文件

所以我想要实现的是：

```
for i in cat list.txt; do 
  ls | grep '^$i' [thats the pattern] | 
  mv [files containing the pattern] to /home/ana/folder_b/ 
```

请注意，在另一个位置，即/home/ana/folder_b/，我已经创建了针对每种模式的目录。

所以 /home/ana/folder_b/ 包含像 1abc/ 、 2def/ 、 3xyz/ 这样的子目录实际上，我希望从 /home/ana/folder_a/ 中移动所有匹配模式 '1abc'、'2def' 和 '3xyz' 的文件到 /home/ana/folder_b/ 中各自的子目录，这样 /home/ana/folder_b/1abc 将具有 1abc_a.txt 、 1abc_c.txt 和 1abc_f.txt ；/home/ana/folder_b/2def/ 将有 2def_g.txt 和 /home/ana/folder_b/3xyz/ 将有 3xyz_a.txt

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T08:40:02.673

Grep 的`-f`选项匹配文件中的模式，因此您不必遍历文件中的每一行`shell`：

```
$ ls                              # List all files in dir, some match, some don't
1abc_a.txt 1abc_c.txt 1abc_f.txt  2def_g.txt 3xyz_a.txt file1 file2 list.txt

$ cat list.txt                    # List patterns to match against 
1abc
2def
3xyz

$ ls | grep -f list.txt           # grep for files that only match pattern
1abc_a.txt
1abc_c.txt
1abc_f.txt
2def_g.txt
3xyz_a.txt 
```

管道`xargs`移动：

```
ls | grep -f list.txt | xargs -i -t mv {} ../folder_B
mv 1abc_a.txt ../folderB 
mv 1abc_c.txt ../folderB 
mv 1abc_f.txt ../folderB 
mv 2def_g.txt ../folderB 
mv 3xyz_a.txt ../folderB 
```

*编辑：意识到我错过了问题的子目录部分，@Thor 的答案是最好的方法，但我认为你可能会从这个答案中找到一些用处。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T08:21:07.843

我认为全局扩展是要走的路：

```
while read pattern; do
  mv "${pattern}"* ../folder_b/"$pattern"
done < list.txt 
```

`echo`从命令前面的a 开始，`mv`当您对输出感到满意时将其删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T15:20:46.867

我建议在你的循环中使用调用的`-exec`动作。`find``mv`

开始文件结构：（如您所见，我从 folder_a 和 folder_b 的父级调用它）

```
$ find
.
./folder_a
./folder_a/1abc_a.txt
./folder_a/1abc_c.txt
./folder_a/1abc_f.txt
./folder_a/2def_g.txt
./folder_a/3xyz_a.txt
./folder_b
./folder_b/1abc
./folder_b/2def
./folder_b/3xyz
./list.txt

$ cat list.txt
1abc
2def
3xyz 
```

命令：

```
while read pattern
 do 
  find ./folder_a -type f -name "$pattern*" -exec mv "{}" "./folder_b/$pattern" \;
 done <list.txt 
```

备用命令（同样的，都在一行上）：

```
while read pattern; do find ./folder_a -type f -name "$pattern*" -exec mv "{}" "./folder_b/$pattern" \;; done <list.txt 
```

结果文件结构：

```
$ find
.
./folder_a
./folder_b
./folder_b/1abc
./folder_b/1abc/1abc_a.txt
./folder_b/1abc/1abc_c.txt
./folder_b/1abc/1abc_f.txt
./folder_b/2def
./folder_b/2def/2def_g.txt
./folder_b/3xyz
./folder_b/3xyz/3xyz_a.txt
./list.txt 
```

# php - 使用 PHP 发送 HTML 邮件

> ID：13928069
> 
> 赞同：0
> 
> 时间：2012-12-18T07:13:38.457
> 
> 标签：php, html, ssmtp

> **可能重复：**
> [从 PHP 发送 HTML 电子邮件](https://stackoverflow.com/questions/3058897/sending-html-email-from-php)

我正在通过我的 gmail 帐户使用 php 发送电子邮件。我使用的是ssmtp而不是sendmail。我正在使用以下 php 代码发送邮件。

```
$to = "mymail@gmail.com";
$from = "mymail@gmail.com";
$subject = "Testing mail";
$header  = "MIME-Version: 1.0\r\n";
$header .= "Content-type: text/html; charset: utf8\r\n";     
$headers = "From:" . $from;
$message = "<html><body><head></head>";
$message .= "<h1>Hello, World!</h1>";
$message .= "</body></html>";

if(mail($to,$subject,$message,$headers)){
   echo "Mail Sent.";
} else {
   echo 'failed';
} 
```

但我收到如下邮件

```
<html><body><head></head><h1>Hello, World!</h1></body></html> 
```

可能是什么原因？我在 Ubuntu 中使用 ssmtp MTA。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T07:19:15.450

尝试在您的代码中使用以下内容

```
$headers .= "Content-Type: text/html; charset=ISO-8859-1\r\n"; 
```

这个链接将是最有帮助的

[使用 PHP 发送 HTML 电子邮件](http://css-tricks.com/sending-nice-html-email-with-php/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T07:16:19.787

用这个

```
<?php
$to = "mymail@gmail.com";
                $from = "mymail@gmail.com";
                $subject = "Testing mail";
                $header  = "MIME-Version: 1.0\r\n";

        $header .= "Content-Type: text/html; charset=ISO-8859-1\r\n";

                $header .= "From:" . $from;

                $message = "<html><body><head></head>";
                $message .= "<h1>Hello, World!</h1>";
                $message .= "</body></html>";

                if(mail($to,$subject,$message,$headers)){
                echo "Mail Sent.";
                } else {
                echo 'failed';
                }
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T07:29:39.233

您正在模糊地使用标题（单数）和标题（复数）。正确的方法是使用复数作为标题：

```
$headers  = "From: " . strip_tags($_POST['req-email']) . "\r\n";
$headers .= "MIME-Version: 1.0\r\n";
$headers .= "Content-Type: text/html; charset=ISO-8859-1\r\n"; 
```

这是一个很好的阅读： [http ://css-tricks.com/sending-nice-html-email-with-php/](http://css-tricks.com/sending-nice-html-email-with-php/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T07:15:52.857

那是因为 PHP 不会自己创建新行。您可以使用 echo "Lalala \n" 来创建新行。

# iphone - 如何解决 NSInternalInconsistencyException？

> ID：13928074
> 
> 赞同：1
> 
> 时间：2012-12-18T07:13:51.093
> 
> 标签：iphone, ios, uitableview, ios5, custom-cell

当我尝试在我的 tableView 上显示自定义单元格时出现错误。我有一个与单元格连接的 nibFile，但我总是在这里得到线程 sigbart

```
NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"CellForOffers" owner:self options:nil]; 
```

我不知道为什么，我在索引实现中的行单元格是

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"CellForOffers";
    CellForOffers *cell =(CellForOffers *) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {

        NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"CellForOffers" owner:self options:nil];
        cell = [nib objectAtIndex:0];

        appDC * application = [dataArray objectAtIndex:[indexPath row]];

        cell.namelbl.text=application.o_name;

        cell.descriptionlbl.text=application.o_description;

        [cell.imageView setImageWithURL:[NSURL URLWithString:application.o_image_url]];

    }

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T07:23:27.687

添加 nib 及其类，如下所示...

```
cell = (CellForOffers *)[nib objectAtIndex:0]; 
```

# go - 在 Go 中是否有设计信号或事件 API 的首选方法？

> ID：13928080
> 
> 赞同：17
> 
> 时间：2012-12-18T07:14:05.593
> 
> 标签：go

我正在设计一个包，我想在其中提供基于观察者模式的 API：也就是说，有些地方我想发出一个信号，触发零个或多个相关方。那些利益相关方不一定需要相互了解。

我知道我可以从头开始实现这样的 API（例如，使用通道或回调函数的集合），但想知道是否有构建此类 API 的首选方式。

在我使用过的许多语言或框架中，都有构建这些 API 的标准方法，以便它们按照用户期望的方式运行：例如，`g_signal_*`用于基于 glib 的应用程序、事件和`addEventListener()`JavaScript DOM 应用程序的函数，或用于。网。

Go有类似的东西吗？如果没有，是否有其他方式来构建这种在 Go 中更惯用的 API？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-18T08:53:13.447

我会说从通道接收的 goroutine 在一定程度上类似于观察者。因此，恕我直言，在 Go 中公开事件的一种惯用方式是从包（函数）返回通道。另一个观察结果是，回调在 Go 程序中不经常使用。原因之一，也是强者的存在[`select statement`](https://golang.org/ref/spec#Select_statements)。

最后一点：有些人（我也是）将 GoF 模式视为 Go 反模式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-23T05:43:27.983

我在几个项目中需要一个“观察者模式”类型的东西。 [这是最近项目中的一个可重用示例](https://github.com/couchbaselabs/cbgb/blob/master/broadcaster.go)。

它有一个相应的测试来说明如何使用它。

基本理论是，`Submit`只要发生有趣的事情，事件发射器就会调用一些数据。任何想要了解该事件的客户端都将`Register`使用它读取事件数据的通道。您注册的这个通道可以`select`循环使用，也可以直接读取（或缓冲并轮询）。

当你完成后，你`Unregister`。

它并不适用于*所有*情况（例如，我可能希望为慢速观察者提供强制注销类型的事件），但它适用于我使用它的地方。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-18T21:01:56.337

Go 为您提供了许多用于设计信号 api 的工具。

首先，您必须决定几件事：

你想要推式还是拉式模型？例如。发布者是向订阅者推送事件还是订阅者从发布者那里拉取事件？

如果您想要一个推送系统，那么让订阅者为发布者提供一个发送消息的渠道会非常有效。如果你想要一个拉方法，那么只有一个用互斥锁保护的消息框就可以了。除此之外，在不了解您的要求的情况下，很难提供更多详细信息。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-19T10:42:15.693

我会说没有标准的方法可以做到这一点，因为通道是内置在语言中的。没有标准的频道库，只有频道。将通道内置在一流的对象中，使您不必使用标准技术，并让您以最简单最自然的方式解决问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-21T04:28:51.630

[在https://github.com/chuckpreslar/emission](https://github.com/chuckpreslar/emission)有一个基本的 Golang 版本的 Node EventEmitter

见[http://itjumpstart.wordpress.com/2014/11/21/eventemitter-in-go/](http://itjumpstart.wordpress.com/2014/11/21/eventemitter-in-go/)

# ios - 切换视图时如何防止后退按钮的动画？

> ID：13928084
> 
> 赞同：1
> 
> 时间：2012-12-18T07:14:08.850
> 
> 标签：ios

当从表格视图切换到标准视图时（选择单元格时），我无法弄清楚如何禁用导航栏中出现的后退按钮动画。没有明显的代码行可以使动画开始。这里是 gif 格式：

[![演示](../Images/f434fb0e4f39a7cb405b77bce78bc57a.png)](https://i.stack.imgur.com/3TeEJ.gif)

Facebook 应用程序中的导航按钮没有动画，所以这是可能的。

值得一提的是，我正在使用[ViewDeck](https://github.com/Inferis/ViewDeck)库来创建类似 Facebook 的 tableView 菜单，即向右滑动以显示表格。

编辑：解决方案基于 Hesham Abd-Elmegid 的回答，但修改为使用自定义图像......

```
UIImage *settingsImage = [UIImage imageNamed:@"back_button@2x.png"];
UIButton *backButton = [UIButton buttonWithType:UIButtonTypeCustom];
backButton.frame = CGRectMake(280.0, 10.0, 29.0, 29.0);
[backButton setBackgroundImage:settingsImage forState:UIControlStateNormal];
backButton.frame = CGRectMake(0, 0, 50, 30);
[backButton addTarget:self action:@selector(goBack) forControlEvents:UIControlEventTouchUpInside];
UIBarButtonItem *customBarItem = [[UIBarButtonItem alloc] initWithCustomView:backButton];
self.navigationItem.leftBarButtonItem = customBarItem; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T08:03:10.700

如果您将自定义设置`UIBarButtonItem`为左侧导航项（而不是标准的后退按钮项），它将淡出而不是滑入，就像在 Facebook 的应用程序中一样。只需创建一个简单的方法，通过调用`popViewControllerAnimated:`包含您的详细视图控制器的导航控制器来替换后退按钮功能。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.navigationItem.leftBarButtonItem = [[[UIBarButtonItem alloc] initWithTitle:@"Back" style:UIBarButtonItemStyleBordered target:self action:@selector(goBack)] autorelease];
}

- (void)goBack
{
    [self.navigationController popViewControllerAnimated:YES];
} 
```

注：`UIBarButtonItem`也可以用图片使用`initWithImage:style:target:action:`方法设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T08:03:53.837

您可以用自定义 UIButton 替换后退按钮。这样它就不会在过渡时产生动画。

```
UIButton *backButton = [UIButton buttonWithType:UIButtonTypeCustom];
[button setTitle:@"Back" forState:UIControlStateNormal];
backButton.frame = CGRectMake(0, 0, 50, 30);
[backButton addTarget:self action:@selector(onBack) forControlEvents:UIControlEventTouchUpInside];
UIBarButtonItem *customBarItem = [[UIBarButtonItem alloc] initWithCustomView:backButton];
self.navigationItem.leftBarButtonItem = customBarItem;
[customBarItem release]; 
```

不过，您必须为后退按钮的箭头形状找到一个 PNG。

# linux - 如何找到设备挂载到的目录？

> ID：13928087
> 
> 赞同：1
> 
> 时间：2012-12-18T07:14:25.840
> 
> 标签：linux, bash

在 Linux 中，是否可以通过 bash 脚本获取“/dev/sr0”并确定它安装到哪个文件夹并对所述文件夹执行额外操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T07:18:02.920

您可以使用该命令`mount(8)`查找安装了哪些设备。在 Linux 上，此信息可在`/proc/mounts`文件中找到。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T07:26:47.457

您可以通过以下命令输出目录名称：

```
grep /dev/sr0 /etc/mtab | cut "-d " -f2 
```

或在像这样的其他命令中使用它（例如列出其内容）：

```
ls $(grep /dev/sr0 /etc/mtab | cut "-d " -f2) 
```

# java - 从 com.sun.syndication.feed.synd.SyndFeed 读取数据

> ID：13928092
> 
> 赞同：-1
> 
> 时间：2012-12-18T07:14:34.740
> 
> 标签：java

我们如何在 java 中从 com.sun.syndication.feed.synd.SyndFeed 读取数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T07:22:28.437

该类[`SyndFeed`](http://www.javadocexamples.com/com/sun/syndication/feed/synd/com.sun.syndication.feed.synd.SyndFeed.html)提供了许多读取提要元数据的方法。为了获取相关内容，您获取并遍历链接，并使用`HttpClient`or`URL.open()`或类似的东西获取它们。

# vhdl - 连接没有信号的组件

> ID：13928094
> 
> 赞同：2
> 
> 时间：2012-12-18T07:14:38.127
> 
> 标签：vhdl

有没有办法直接连接 vhdl 组件而不定义信号？

仅适用于连接 2 个块而对第一个块的输出没有任何其他用途的情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T09:50:02.817

您确实需要声明信号来连接组件实例化。Sigasi 可以自动为您完成此操作：[演示](http://www.sigasi.com/screencast/declare-vhdl-signal-or-variable)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T12:07:09.667

无法完成（目前 - 考虑未来的修订可能允许“推断连接”）。

不过，像 Emacs 的 VHDL 模式和 Sigasi 这样的工具可以使这变得更容易，但会为您生成样板代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T09:52:30.263

在[VHDL 模式下](http://www.iis.ee.ethz.ch/~zimmi/emacs/vhdl-mode.html)使用 (x)emacs 时：

1）将光标放在VHDL实体中

2) MX vhdl 端口复制

生成信号

3) MX vhdl-port-paste-signals

注意：vhdl-port-paste-[组件|实体|常量|实例|...]

# iphone - 检测使用相同wifi的iPhone设备

> ID：13928103
> 
> 赞同：2
> 
> 时间：2012-12-18T07:15:08.953
> 
> 标签：iphone, ios, network-programming, wifi

如何在我的 wifi 中检测到其他 iPhone 设备。在我找到其他 iPhone 设备后，我想从我的应用程序中向它们发送一些值。如果我找到 3 个设备，我会发送任何应该发送到所有三个设备的值。通过哪种方式，我可以做到这一点。

谁能帮我找到这个。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T07:18:51.863

我相信你可以通过检测SSID是否相同来实现它，答案在this [question](https://stackoverflow.com/questions/5198716/iphone-get-ssid-without-private-library)。此外，您可以通过检查他们的 IP 来双重确认。他们假设在子网中。

# android - 带有layerdrawable的Android imageview

> ID：13928109
> 
> 赞同：0
> 
> 时间：2012-12-18T07:15:26.963
> 
> 标签：android, android-imageview

我的程序有一个 gridview，其中 imageview(s) 作为子视图。我想在单击特定图像视图时通过在原始图像上显示半透明图层和刻度线来向用户提供反馈。我正在使用具有 3 层的 layerdrawable。我通过编写一个小应用程序测试了代码，它运行良好。但它在gridview中不起作用。

```
public void onItemClick(AdapterView<?> parent, View v, int position, long id)
{

    baseimage = ((ImageView)v).getDrawable(); //This is the original image thumbnail
layers = new Drawable[3];
layers[0] = baseimage;
layers[1] = white_color;// white_color is a ColorDrawable with colour = 2147483647
layers[2] = tick_mark;

    if(!selected[(int)id])//selected is a boolean array to store if an imageview is selected or not
    {
Toast.makeText(this,"selected",Toast.LENGTH_SHORT).show();
//layers[1].setVisible(true,true);
//layers[2].setVisible(true,true);

translucent = new LayerDrawable(layers);
((ImageView)v).setImageDrawable(translucent);
v.invalidate();
selected[(int)id] = true;
    }
    else
    {
    //((ImageView)v).setImageDrawable(baseimage);
    //layers[1].setVisible(false,true);
//layers[2].setVisible(false,true);
translucent.invalidateSelf();
v.invalidate();
((ImageView)v).setImageDrawable(null);
((ImageView)v).setImageDrawable(baseimage);
Toast.makeText(this,((ImageView)v).getDrawable().toString(),Toast.LENGTH_SHORT).show();

selected[(int)id] = false;
    }

} 
```

当我运行代码时，layerdrawable 第一次正确显示，当我再次单击它时，imageview 显示没有变化。如果我第三次单击它，则会将一个新的 layerdrawable 添加到已经存在的 layerdrawable 中，每次都会在顶部添加白色半透明图层。

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T22:51:32.793

我看到了你的问题。

第一次进入的时候`onItemClick()`只是`baseimage=v.getDrawable()`一张图片。但是，第二次`onItemClick()`调用 时，`baseimage=v.getDrawable()`可能表示图像 + 白色 + 刻度覆盖。因此，即使`if(!selected[(int)id])`案例执行，您仍然会看到覆盖。

# linux - 编写一个shell脚本ssh到远程机器并执行命令

> ID：13928116
> 
> 赞同：124
> 
> 时间：2012-12-18T07:15:55.123
> 
> 标签：linux, shell, ssh

我有两个问题：

1.  有多个远程 linux 机器，我需要编写一个 shell 脚本，它将在每台机器上执行相同的命令集。（包括一些 sudo 操作）。如何使用 shell 脚本来做到这一点？
2.  ssh'ing到远程机器时，提示进行RSA指纹认证时如何处理。

远程机器是运行时创建的虚拟机，我只有它们的 IP。所以，我不能事先在这些机器中放置一个脚本文件并从我的机器上执行它们。

* * *

## 回答 #1

> 赞同：162
> 
> 时间：2012-12-18T07:28:07.737

> 有多个远程 linux 机器，我需要编写一个 shell 脚本，它将在每台机器上执行相同的命令集。（包括一些 sudo 操作）。如何使用 shell 脚本来做到这一点？

您可以使用 ssh 执行此操作，例如：

```
#!/bin/bash
USERNAME=someUser
HOSTS="host1 host2 host3"
SCRIPT="pwd; ls"
for HOSTNAME in ${HOSTS} ; do
    ssh -l ${USERNAME} ${HOSTNAME} "${SCRIPT}"
done 
```

> ssh'ing到远程机器时，提示进行RSA指纹认证时如何处理。

您可以将`StrictHostKeyChecking=no`选项添加到 ssh：

```
ssh -o StrictHostKeyChecking=no -l username hostname "pwd; ls" 
```

这将[禁用主机密钥检查](http://linuxcommando.blogspot.co.uk/2008/10/how-to-disable-ssh-host-key-checking.html)并自动将主机密钥添加到已知主机列表中。如果您不想将主机添加到已知主机文件中，请添加选项`-o UserKnownHostsFile=/dev/null`.

请注意，这**会禁用某些安全检查**，例如防止中间人攻击。因此，它不应该应用于安全敏感的环境中。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-10-11T10:26:15.547

使用安装 sshpass， `apt-get install sshpass`然后编辑脚本并按相应顺序放置您的 linux 机器 IP、用户名和密码。之后运行该脚本。就是这样 ！此脚本将在所有系统中安装 VLC。

```
#!/bin/bash
SCRIPT="cd Desktop; pwd;  echo -e 'PASSWORD' | sudo -S apt-get install vlc"
HOSTS=("192.168.1.121" "192.168.1.122" "192.168.1.123")
USERNAMES=("username1" "username2" "username3")
PASSWORDS=("password1" "password2" "password3")
for i in ${!HOSTS[*]} ; do
     echo ${HOSTS[i]}
     SCR=${SCRIPT/PASSWORD/${PASSWORDS[i]}}
     sshpass -p ${PASSWORDS[i]} ssh -l ${USERNAMES[i]} ${HOSTS[i]} "${SCR}"
done 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-04-22T13:04:01.403

这对我有用。

**语法：ssh -i pemfile.pem user_name@ip_address 'command_1 ; 命令2；命令 3'**

```
#! /bin/bash

echo "########### connecting to server and run commands in sequence ###########"
ssh -i ~/.ssh/ec2_instance.pem ubuntu@ip_address 'touch a.txt; touch b.txt; sudo systemctl status tomcat.service' 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-12-18T08:10:42.570

有很多方法可以处理这个问题。

我最喜欢的方法是在远程系统上安装[http://pamsshagentauth.sourceforge.net/](http://pamsshagentauth.sourceforge.net/)以及您自己的公钥。（想办法把这些安装在虚拟机上，不知怎的，你安装了整个 Unix 系统，还有什么文件？）

转发您的 ssh 代理后，您现在无需密码即可登录每个系统。

更好的是，该 pam 模块将使用您的 ssh 密钥对对 sudo 进行身份验证，以便您可以根据需要使用 root（或任何其他用户）权限运行。

您无需担心主机密钥交互。如果输入不是终端，那么 ssh 只会限制您转发代理和使用密码进行身份验证的能力。

您还应该研究**[像 Capistrano 这样的软件包。](http://capistranorb.com/)**一定要环顾那个网站；它介绍了远程脚本。

单个脚本行可能如下所示：

```
ssh remote-system-name command arguments ... # so, for exmaple,
ssh target.mycorp.net sudo puppet apply 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-18T10:02:42.270

如果您能够编写 Perl 代码，那么您应该考虑使用[Net::OpenSSH::Parallel](http://metacpan.org/module/Net%3a%3aOpenSSH%3a%3aParallel)。

您将能够以声明的方式描述必须在每个主机中运行的操作，并且该模块将处理所有可怕的细节。`sudo`还支持通过运行命令。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-04-09T12:26:58.163

对于这类任务，我反复使用**Ansible**，它允许在多个容器或 VM 中连贯地复制 bash 脚本。Ansible（更准确地说是*Red Hat*）现在有一个额外的 Web 界面**AWX**，它是其商业 Tower 的开源版本。

Ansible：[https](https://www.ansible.com/)
://www.ansible.com/ AWX：[https](https://github.com/ansible/awx)
://github.com/ansible/awx Ansible Tower：商业产品，您可能会首先探索免费的开源 AWX，而不是 15 天的免费试用塔的

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-02-14T15:21:06.587

有多种方法可以在多台远程 Linux 机器中执行命令或脚本。一种简单且最简单的方法是通过**pssh（并行 ssh 程序）**

**pssh**：是一个用于在多个主机上并行执行 ssh 的程序。它提供了诸如向所有进程发送输入、向 ssh 传递密码、将输出保存到文件以及超时等功能。

***示例和用法：***

连接到 host1 和 host2，并从每个打印“hello, world”：

```
 pssh -i -H "host1 host2" echo "hello, world" 
```

通过脚本在多个服务器上运行命令：

```
pssh -h hosts.txt -P -I<./commands.sh 
```

在不检查或保存主机密钥的情况下使用并运行命令：

```
pssh -h hostname_ip.txt -x '-q -o StrictHostKeyChecking=no -o PreferredAuthentications=publickey -o PubkeyAuthentication=yes' -i  'uptime; hostname -f' 
```

如果文件 hosts.txt 有大量条目，比如 100，那么也可以将并行度选项设置为 100 以确保命令同时运行：

```
pssh -i -h hosts.txt -p 100 -t 0 sleep 10000 
```

**选项**：
*-I：*读取输入并发送到每个 ssh 进程。
*-P：*告诉 pssh 在输出到达时显示输出。
*-h：*读取主机的文件。
*-H :* [user@]host[:port] 用于单主机。
*-i：*在每个主机完成时显示标准输出和标准错误
*-x args：*传递额外的 SSH 命令行参数
*-o 选项：*可用于以配置文件中使用的格式提供选项。（/etc/ssh/ssh_config ) (~/.ssh/config)
*-p 并行度：*使用给定的数量作为最大并发连接数
*-q 安静模式：* 导致大多数警告和诊断消息被抑制。
*-t：*在给定的秒数后使连接超时。0 表示 pssh 不会使任何连接超时

> ssh'ing到远程机器时，提示进行RSA指纹认证时如何处理。

禁用 StrictHostKeyChecking 以处理 RSA 身份验证提示。
**-o StrictHostKeyChecking=no**

**来源**: 人 pssh

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-06-12T21:38:11.240

这对我有用。我做了一个函数。把它放在你的 shell 脚本中：

```
sshcmd(){
    ssh $1@$2 $3
}

sshcmd USER HOST COMMAND 
```

如果您有多台机器要执行相同的命令，您可以用分号重复该行。例如，如果你有两台机器，你会这样做：

```
sshcmd USER HOST COMMAND ; sshcmd USER HOST COMMAND 
```

将 USER 替换为计算机的用户。将 HOST 替换为计算机的名称。将 COMMAND 替换为您要在计算机上执行的命令。

希望这可以帮助！

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-03-26T14:53:28.023

接受的答案依次发送给机器。如果您想在`ssh`多台机器上同时运行一些长时间运行的命令，例如`scp`在它们上同时运行，请将该`ssh`命令作为后台进程运行。

```
#!/bin/bash
username="user"
servers=("srv-001" "srv-002" "srv-002" "srv-003");
script="pwd;"
for s in "${servers[@]}"; do
    echo "sshing ${username}@${s} to run ${script}"
    (ssh ${username}@${s} ${script})& # Run in background
done
wait # If removed, you can run some other script here 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2012-12-18T07:21:51.863

您可以遵循这种方法：

*   **使用Expect Script**连接到远程机器。如果您的机器不支持期望，您可以下载相同的。编写 Expect 脚本非常容易（谷歌获得帮助）
*   将需要在远程服务器上执行的所有操作放在 shell 脚本中。
*   登录成功后，从期望脚本调用远程 shell 脚本。

# xslt-2.0 - 合并两个 xml 元素 uning XSLT

> ID：13928119
> 
> 赞同：0
> 
> 时间：2012-12-18T07:16:12.827
> 
> 标签：xslt-2.0

我有一个大的 xml 文件，如下所示

```
:
:
<CN>222</CN>
<CT>Raam</CT>
:
: 
```

我想将这两个元素合并为

```
<CN>222 Raam</CN> 
```

然后喜欢将其转换为

```
<div>222 Raam</div> 
```

这是最终的输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T10:03:30.180

好吧，如果您只需要合并 a 中的两个连续元素`div`（我不明白中介`CN`的用途），那么使用

```
<xsl:template match="@* | node()">
  <xsl:copy>
    <xsl:apply-templates select="@* | node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="CN[following-sibling::*[1][self::CT]]">
  <div>
    <xsl:value-of select="concat(., ' ', following-sibling::*[1][self::CT])"/>
  </div>
</xsl:template>

<xsl:template match="CT[preceding-sibling::*[1][self::CN]]"/> 
```

# android - 弹出窗口关闭android

> ID：13928122
> 
> 赞同：1
> 
> 时间：2012-12-18T07:16:19.410
> 
> 标签：android

我正在使用弹出窗口，它运行良好。弹出窗口中有列表视图，我将其用作`pw.showAsDropDown(anchorView);`

pw 是 PopupWindow，anchorView 是视图，弹出窗口会像菜单一样出现在下方。

现在奇怪的问题是，我没有得到合适的位置/视图，通过按下位置/视图我可以关闭弹出窗口。

`pw.setOutsideTouchable(true)`仅在 时有效`pw.setFocusable(false)`，但在这种情况下，列表视图无法侦听项目列表上的 onItemClickListener。当弹出窗口可见时，即使返回键也不听。

任何人都可以帮助我吗？

# regex - 像这样的emacs中的非贪婪正则表达式

> ID：13928123
> 
> 赞同：0
> 
> 时间：2012-12-18T07:16:20.423
> 
> 标签：regex, emacs

文字是这样的：

```
 /mnt/alphabets....../alphabets..../dataset974/974_summits.bed 
```

**我想选择这部分：**

```
 /mnt/alphabets....../alphabets..../dataset974 
```

使用正则表达式 I-search，我输入：

```
 /mnt.*[0-9]*? 
```

但是选择的部分是：

```
/mnt/alphabets....../alphabets..../dataset974/974_summits.bed 
```

有谁怎么做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T07:53:49.507

您的正则表达式的问题是`/mnt.*`贪婪地吞噬了整个文本，从`/mnt`行尾到行尾。应该不贪心的是第一个`*`。试试这个：

```
/mnt/.*?[0-9]+ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T07:31:19.030

你为什么不使用**组**？对于以下示例`regEx`，第 1 组为您提供所需的结果。

```
(/mnt(?:.*))/ 
```

# ruby-on-rails - 如何使用远程客户端验证 => true rails 3.1

> ID：13928124
> 
> 赞同：0
> 
> 时间：2012-12-18T07:16:20.563
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

通常我们可以使用多种方式来使用 ajax 进行验证，例如使用`validate`插件或使用普通 ajax（无 rails ajax），如下所示

使用ajax请求的数据

```
$.post("test.php", $("#testform").serialize()); 
```

在你的情况下，它可能是这样的。

```
$('#your_form').submit(function(event) {
  event.preventDefault(); 
  /* Email validation here.*/
  $.ajax({
    type: "POST",
    url: $(this).attr('action'),
    data: $(this).serialize(),
  });
}); 
```

但是，我希望将客户端验证与 Real Rails ajax 一起使用。请帮助如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T07:21:26.003

也许你想使用[这个宝石](https://github.com/bcardarella/client_side_validations)

**更新 1：**

由于您想通过 ajax 执行此操作，因此可以通过您的控制器处理验证。

```
# Let's assume your remote request hits index

def index
 @object.create(params[:object])

 respond_to do |format|
  format.html # index.html.erb
  format.js
 end
end 
```

现在，在相关的视图文件夹中定义一个 index.js.erb 并渲染

```
<% if @object.new_record? %>
 alert("Failed to upload record: <%= j @object.errors.full_messages.join(', ').html_safe %>"); 
```

# apache-pig - 如果关系包含在第二个关系中，则猪过滤器

> ID：13928126
> 
> 赞同：0
> 
> 时间：2012-12-18T07:16:24.230
> 
> 标签：apache-pig

我发现我在猪身上想要的一个共同点是我将与数据建立一个小的关系，比如

```
A = id, attribute1:int, attribute2:double... 
```

和数据有很大的关系，比如

```
B = id, differentattribute:chararray... 
```

我想过滤 B 以便所有元组都有一个包含在 A 中的 id。我知道我可以做到，

```
C = JOIN A by id, B by id;
D = FOREACH C GENERATE B::id, B::differentattribute; 
```

但这似乎非常低效。[使用带有 PIG FILTER](https://stackoverflow.com/questions/7179165/using-in-cause-with-pig-filter)的 IN 原因声称没有 IN 子句......如果没有，是否有更有效的方法来使用 UDF 模拟 IN？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T17:41:26.100

如果`A`适合内存，您可以查看[复制的连接](http://pig.apache.org/docs/r0.10.0/perf.html#specialized-joins)：

> 片段复制连接是一种特殊类型的连接，如果一个或多个关系足够小以适合主内存，则它可以很好地工作。在这种情况下，Pig 可以执行非常有效的连接 [...]

# visual-studio-2010 - vs10中的文本编辑器是用richtextbox做的吗？

> ID：13928128
> 
> 赞同：-1
> 
> 时间：2012-12-18T07:16:26.883
> 
> 标签：visual-studio-2010, visual-studio, visual-studio-2008, visual-studio-2012

我正在使用Visual Studio 2010。使用什么，这个IDE的文本编辑器是构建的？更一般地说，在不同的编程/编码 IDE 中，文本编辑器是由什么组成的？

我可以想到richtextbox的。但想不出怎么办？他们真正用于文本编辑器的是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T07:50:46.693

C#和WPF用于开发VS2010的IDE。没有富文本框。

# iphone - Live555 框架生成错误

> ID：13928131
> 
> 赞同：4
> 
> 时间：2012-12-18T07:16:42.423
> 
> 标签：iphone, objective-c, ios, xcode4.5, live555

我正在尝试为**Live555**库构建框架。我根据这个[答案从](https://stackoverflow.com/a/12896328/940096)[这里](http://www.live555.com/liveMedia/public/)
得到了库文件，我已经多次尝试按照那个答案生成它。它只是给出以下错误：

```
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/g++ -c -Iinclude -I../UsageEnvironment/include -I../groupsock/include -I.  -DBSD=1 -O2 -DSOCKLEN_T=socklen_t -DHAVE_SOCKADDR_LEN=1 -D_LARGEFILE_SOURCE=1 -D_FILE_OFFSET_BITS=64 -fPIC -arch armv7 --sysroot=/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk -Wall Media.cpp
make[1]: /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/g++: No such file or directory
make[1]: *** [Media.o] Error 1
make: *** [all] Error 2 
```

我用谷歌搜索了这个问题。我得到了另一个用户为此尝试的[确切链接。](https://stackoverflow.com/q/11369933/940096)目前我的*[config.iphoneos](http://pastie.org/5546247)*

有没有人遇到过这个问题？请给我一些想法来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T12:09:21.113

它告诉你问题是什么。

看看终端，你真的有`g++`这条路吗？我愿意。看来你没有。

> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/g++

# python - Python 拼写检查器

> ID：13928155
> 
> 赞同：54
> 
> 时间：2012-12-18T07:18:30.860
> 
> 标签：python, python-2.7, nltk, spell-checking, pyenchant

我对 Python 和 NLTK 还很陌生。我正忙于一个可以执行拼写检查的应用程序（用正确的单词替换拼写错误的单词）。我目前在 Python 2.7、PyEnchant 和 NLTK 库上使用 Enchant 库。下面的代码是一个处理更正/替换的类。

```
from nltk.metrics import edit_distance

class SpellingReplacer:
    def __init__(self, dict_name='en_GB', max_dist=2):
        self.spell_dict = enchant.Dict(dict_name)
        self.max_dist = 2

    def replace(self, word):
        if self.spell_dict.check(word):
            return word
        suggestions = self.spell_dict.suggest(word)

        if suggestions and edit_distance(word, suggestions[0]) <= self.max_dist:
            return suggestions[0]
        else:
            return word 
```

我编写了一个函数，它接收单词列表并对每个单词执行 replace()，然后返回这些单词的列表，但拼写正确。

```
def spell_check(word_list):
    checked_list = []
    for item in word_list:
        replacer = SpellingReplacer()
        r = replacer.replace(item)
        checked_list.append(r)
    return checked_list

>>> word_list = ['car', 'colour']
>>> spell_check(words)
['car', 'color'] 
```

现在，我不太喜欢这个，因为它不是很准确，我正在寻找一种方法来实现单词的拼写检查和替换。我还需要一些可以识别诸如“caaaar”之类的拼写错误的东西？有没有更好的方法来执行拼写检查？如果是这样，它们是什么？谷歌是如何做到的？因为他们的拼写建议非常好。

有什么建议么？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2018-01-16T11:48:34.450

您可以使用自动**[更正](https://pypi.python.org/pypi/autocorrect)**库在 python 中进行拼写检查。
**示例用法：**

```
from autocorrect import Speller

spell = Speller(lang='en')

print(spell('caaaar'))
print(spell('mussage'))
print(spell('survice'))
print(spell('hte')) 
```

**结果：**

```
caesar
message
service
the 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-12-18T17:13:45.810

我建议您先仔细阅读[Peter Norvig 的这篇文章](http://norvig.com/spell-correct.html)。（我不得不做类似的事情，我发现它非常有用。）

以下功能，特别是您现在需要使您的拼写检查器更加复杂的想法：拆分，删除，转置和插入不规则单词以“纠正”它们。

```
def edits1(word):
   splits     = [(word[:i], word[i:]) for i in range(len(word) + 1)]
   deletes    = [a + b[1:] for a, b in splits if b]
   transposes = [a + b[1] + b[0] + b[2:] for a, b in splits if len(b)>1]
   replaces   = [a + c + b[1:] for a, b in splits for c in alphabet if b]
   inserts    = [a + c + b     for a, b in splits for c in alphabet]
   return set(deletes + transposes + replaces + inserts) 
```

注意：以上是 Norvig 的拼写校正器的一个片段

好消息是您可以逐步添加并不断改进您的拼写检查器。

希望有帮助。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2019-02-17T18:24:41.943

在 python 中进行拼写检查的最佳方法是：SymSpell、Bk-Tree 或 Peter Novig 的方法。

最快的是 SymSpell。

这是**Method1**：参考链接[pyspellchecker](https://pypi.org/project/pyspellchecker/)

该库基于 Peter Norvig 的实现。

***点安装 pyspellchecker***

```
from spellchecker import SpellChecker

spell = SpellChecker()

# find those words that may be misspelled
misspelled = spell.unknown(['something', 'is', 'hapenning', 'here'])

for word in misspelled:
    # Get the one `most likely` answer
    print(spell.correction(word))

    # Get a list of `likely` options
    print(spell.candidates(word)) 
```

**方法2 ：** [SymSpell Python](https://github.com/mammothb/symspellpy)

***pip install -U symspellpy***

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2019-04-03T10:10:04.073

也许为时已晚，但我正在回答未来的搜索。要执行拼写错误更正，您首先需要确保该词不是荒谬的，也不是来自俚语，如 caaaar、amazzzing 等重复字母。所以，我们首先需要摆脱这些字母。正如我们所知，英语单词通常最多有 2 个重复的字母，例如，hello.，因此我们首先从单词中删除多余的重复，然后检查它们的拼写。要删除多余的字母，您可以使用 Python 中的正则表达式模块。

完成后，使用 Python 中的 Pyspellchecker 库来纠正拼写。

如需实施，请访问此链接：[https ://rustyonrampage.github.io/text-mining/2017/11/28/spelling-correction-with-python-and-nltk.html](https://rustyonrampage.github.io/text-mining/2017/11/28/spelling-correction-with-python-and-nltk.html)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-03-28T16:21:09.637

***在终端***

```
pip install gingerit 
```

***代码***

```
from gingerit.gingerit import GingerIt
text = input("Enter text to be corrected")
result = GingerIt().parse(text)
corrections = result['corrections']
correctText = result['result']

print("Correct Text:",correctText)
print()
print("CORRECTIONS")
for d in corrections:
  print("________________")  
  print("Previous:",d['text'])  
  print("Correction:",d['correct'])   
  print("`Definiton`:",d['definition']) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-08-28T23:00:34.193

试试[jamspell](https://github.com/bakwc/JamSpell) - 它非常适合自动拼写纠正：

```
import jamspell

corrector = jamspell.TSpellCorrector()
corrector.LoadLangModel('en.bin')

corrector.FixFragment('Some sentnec with error')
# u'Some sentence with error'

corrector.GetCandidates(['Some', 'sentnec', 'with', 'error'], 1)
# ('sentence', 'senate', 'scented', 'sentinel') 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-11-20T09:46:55.507

# 拼写校正器->

如果您存储在其他地方，您需要将语料库导入到您的桌面上更改代码中的路径我还使用 tkinter 添加了一些图形，这只是为了解决非单词错误！

```
def min_edit_dist(word1,word2):
    len_1=len(word1)
    len_2=len(word2)
    x = [[0]*(len_2+1) for _ in range(len_1+1)]#the matrix whose last element ->edit distance
    for i in range(0,len_1+1):  
        #initialization of base case values
        x[i][0]=i
        for j in range(0,len_2+1):
            x[0][j]=j
    for i in range (1,len_1+1):
        for j in range(1,len_2+1):
            if word1[i-1]==word2[j-1]:
                x[i][j] = x[i-1][j-1]
            else :
                x[i][j]= min(x[i][j-1],x[i-1][j],x[i-1][j-1])+1
    return x[i][j]
from Tkinter import *

def retrieve_text():
    global word1
    word1=(app_entry.get())
    path="C:\Documents and Settings\Owner\Desktop\Dictionary.txt"
    ffile=open(path,'r')
    lines=ffile.readlines()
    distance_list=[]
    print "Suggestions coming right up count till 10"
    for i in range(0,58109):
        dist=min_edit_dist(word1,lines[i])
        distance_list.append(dist)
    for j in range(0,58109):
        if distance_list[j]<=2:
            print lines[j]
            print" "   
    ffile.close()
if __name__ == "__main__":
    app_win = Tk()
    app_win.title("spell")
    app_label = Label(app_win, text="Enter the incorrect word")
    app_label.pack()
    app_entry = Entry(app_win)
    app_entry.pack()
    app_button = Button(app_win, text="Get Suggestions", command=retrieve_text)
    app_button.pack()
    # Initialize GUI loop
    app_win.mainloop() 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-12-28T11:17:46.190

`from autocorrect import spell` 为此，您需要安装，更喜欢 anaconda，它仅适用于单词，而不适用于句子，所以这是您将面临的限制。

```
from autocorrect import spell
print(spell('intrerpreter'))
# output: interpreter 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-03-12T14:02:54.963

Spark NLP 是我使用的另一个选项，它运行良好。一个简单的教程可以在这里找到。[https://github.com/JohnSnowLabs/spark-nlp-workshop/blob/master/jupyter/annotation/english/spell-check-ml-pipeline/Pretrained-SpellCheckML-Pipeline.ipynb](https://github.com/JohnSnowLabs/spark-nlp-workshop/blob/master/jupyter/annotation/english/spell-check-ml-pipeline/Pretrained-SpellCheckML-Pipeline.ipynb)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-09-10T15:30:22.203

`pyspellchecker`是解决此问题的最佳方法之一。`pyspellchecker`该库基于 Peter [Norvig 的](https://norvig.com/spell-correct.html)博客文章。它使用[Levenshtein 距离](https://en.wikipedia.org/wiki/Levenshtein_distance)算法来查找与原始单词 2 的编辑距离内的排列。有两种方法可以安装这个库。官方文档强烈推荐使用[pipev](https://github.com/pypa/pipenv)包。

*   安装使用`pip`

```
pip install pyspellchecker 
```

*   从源安装

```
git clone https://github.com/barrust/pyspellchecker.git
cd pyspellchecker
python setup.py install 
```

以下代码是文档中提供的示例

```
from spellchecker import SpellChecker

spell = SpellChecker()

# find those words that may be misspelled
misspelled = spell.unknown(['something', 'is', 'hapenning', 'here'])

for word in misspelled:
    # Get the one `most likely` answer
    print(spell.correction(word))

    # Get a list of `likely` options
    print(spell.candidates(word)) 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-11-30T02:47:41.817

你也可以试试：

**点安装文本块**

```
from textblob import TextBlob
txt="machne learnig"
b = TextBlob(txt)
print("after spell correction: "+str(b.correct())) 
```

拼写纠正后：**机器学习**

# python - 处理多个可能的文件位置的 Pythonic 方式？（不使用嵌套尝试）

> ID：13928163
> 
> 赞同：5
> 
> 时间：2012-12-18T07:19:00.693
> 
> 标签：python, exception-handling

我有一个 Python 脚本需要查找某个文件。

我可以使用 os.path.isafile()，但我听说那是糟糕的 Python，所以我试图捕获异常。

但是，我可以在两个位置查找该文件。我可以使用嵌套尝试来处理这个问题：

```
try:
    keyfile = 'location1'
    try_to_connect(keyfile)
except IOError:
    try:
        keyfile = 'location2'
        try_to_connect(keyfile)
    except:
        logger.error('Keyfile not found at either location1 or location2') 
```

或者我可以在第一个 except 块中放一个 pass，然后在下面再放一个：

```
try:
    keyfile = 'location1'
    try_to_connect(keyfile)
except IOError:
    pass
try:
    keyfile = 'location2'
    try_to_connect(keyfile)
except:
    logger.error('Keyfile not found at either location1 or location2') 
```

但是，是否有更 Pythonic 的方式来处理上述情况？

干杯，维克多

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-18T07:22:22.313

```
for location in locations:
    try:
        try_to_connect(location)
        break
    except IOError:
        continue
else:
    # this else is optional
    # executes some code if none of the locations is valid
    # for example raise an Error as suggested @eumiro 
```

`else`您也可以在 for 循环中添加一个子句；也就是说，仅当循环因耗尽而终止时才会执行某些代码（所有位置均无效）。

# java - 避免在 ArrayList 中打印重复项

> ID：13928166
> 
> 赞同：-3
> 
> 时间：2012-12-18T07:19:25.237
> 
> 标签：java, arraylist

我有一个数组列表包含对象（id，name）。如果列表中有重复的名称，需要删除

如果重复，我只需要打印一次名称

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T07:32:55.347

如果您不想在列表中出现重复条目​​，请使用 SET：

1.  **HashSet**如果你不需要序列
2.  **LinkedHashSet**如果您需要按顺序打印名称

**注意**：您必须覆盖对象（ID，名称）中的等于和哈希码，否则您将在 SET 中找到重复的对象

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T09:53:30.933

您可以在**Set**和**List**系列的帮助下完成

我们已经了解了如何使用**Set**系列删除重复项。**我们也可以在List**家族的帮助下做到这一点。请参考下面的代码。

```
package com.rais.util;

import java.util.ArrayList;
import java.util.List;

/**
 * @author Rais.Alam
 * @project Utils
 * @date Dec 18, 2012
 */
public class ConverterUtil
{

    /**
     * @param args
     */
    public static void main(String[] args)
    {

        List<String> original = new ArrayList<String>();

        original.add("Tomcat");
        original.add("Jboss");
        original.add("GlassFish");
        original.add("Weblogic");
        original.add("Tomcat");

        List<String> newList = removeDuplicates(original);

        for (String value : newList)
        {
            System.out.println(value);
        }

    }

    public static List<String> removeDuplicates(List<String> original)
    {

        List<String> tempList = new ArrayList<String>();

        for (String value : original)
        {
            if (!tempList.contains(value))
            {
                tempList.add(value);
            }
        }

        return tempList;

    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T07:25:38.420

```
public static boolean checkDuplicate(ArrayList list) {
 HashSet set = new HashSet();
 for (int i = 0; i < list.size(); i++) {
  boolean val = set.add(list.get(i));
  if (val == false) {
    return val;
  }
 }
 return true;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T07:27:08.247

改用 a `java.util.Set`。它不能包含重复项。

参考：[http ://docs.oracle.com/javase/6/docs/api/java/util/Set.html](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html)

```
Set<String> myNames = new HashSet<String>();
myNames.add("JAMES");
myNames.add("ELLA");
myNames.add("JAMES");

myNames.size() // will return 2 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-18T07:29:21.033

使用 Set 数据结构并实现适当的 Comparator。运行一个循环并将您的对象放入该集合中。打印这套。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-18T07:32:33.443

Arraylist 提供了一个迭代器，允许从列表本身中删除迭代器返回的最后一个元素。所以我们只记录我们已经看到的名字。一个`Set`实现是有帮助的。

```
Set<String> names = new HashSet<>();
Iterator<MyType> it = getListFromSomewhere().iterator();  // you know how
while(it.hasNext()) {
   if (!names.add(it.next().getName()) {
     it.remove();
   }
} 
```

提示：如果值已经在集合中，则添加到集合返回 false。

*评论*

您的要求并不那么明确：这里我们保留第*一个*条目的名称并从列表中删除所有*后续*条目。如果列表不是按 id 排序的，那么它是相当随机的，保留哪些条目，删除哪些条目。

# c# - 如何通过反射知道可空类型

> ID：13928169
> 
> 赞同：-3
> 
> 时间：2012-12-18T07:19:48.800
> 
> 标签：c#, .net, reflection

> **可能重复：**
> [通过反射检测可空类型](https://stackoverflow.com/questions/6026824/detecting-a-nullable-type-via-reflection)

我有这个代码：

```
string type = string.Empty;
PropertyInfo[] propertyInfos = typeof(T).GetProperties();
foreach (var item in propertyInfos)
    if (item.Name.ToUpper() == searchField.ToUpper())
    {
        type = item.PropertyType.FullName;
        break;
    }   

switch (type)
{
    case "System.Int32":
        //...
        break;
    case "System.Single":
        //...
        break;
} 
```

代码有效，但问题是类型何时可以为空。如何知道类型是否可以为空？可空类型（int32？long？double？）以及如何将字符串转换为可空类型？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T07:20:54.223

试试下面的代码将帮助你

```
System.Reflection.FieldInfo[] fieldsInfos = typeof(NullWeAre).GetFields();

        foreach (System.Reflection.FieldInfo fi in fieldsInfos)
        {
            if (fi.FieldType.IsGenericType
                && fi.FieldType.GetGenericTypeDefinition().Equals(typeof(Nullable<>)))
            {
                // We are dealing with a generic type that is nullable
                Console.WriteLine("Name: {0}, Type: {1}", fi.Name, Nullable.GetUnderlyingType(fi.FieldType));
            }

    } 
```

# ios - 如何从 UIColor 常量中获取颜色名称

> ID：13928176
> 
> 赞同：0
> 
> 时间：2012-12-18T07:20:48.617
> 
> 标签：ios, uicolor

我想在 PickerView 中显示一些颜色名称，这些名称在 UIColr 类中是常量

```
pickerContent = [[NSArray alloc] initWithObjects:[UIColor redColor],[UIColor orangeColor],[UIColor purpleColor],[UIColor yellowColor], nil ]; 
```

我为 PickerView 标签实现的功能是

```
- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component
{
  return [(UIColor *)[self.pickerContent objectAtIndex:row] description];
} 
```

我知道**描述**不会给我我想要的输出。

所以请帮助您提出宝贵的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T07:33:54.840

如果你想在 Picker 视图中只显示颜色名称那么就拿另一个`NSArray`

`NSArray *colourArray=[[NSArray alloc] initWithObjects:@"redColor",@"orangeColor",@"purpleColor",@" yellowColor", nil ];`

```
- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component

{ return [colourArray objectAtIndex:row]; 

} 
```

# php - 从 1000,000 个用户条目中查找用户名的可能方法

> ID：13928186
> 
> 赞同：1
> 
> 时间：2012-12-18T07:21:27.857
> 
> 标签：php, mysql, algorithm

我`100,000`在 MYSQL 中有用户数据库。在那个数据库中，我有列`ID,username,Fname,Lname`等。何时`www.example.com/Jim`或`www.example.com/123`（用户表中的用户`JIM`名和`123`ID 在哪里）

我正在使用 MYSQL 查询：`select * from users where ID = 123 OR username = Jim` 我在 PHP 中执行上述查询。上述查询的输出是：

```
| ID | Username | fname  | lname   |
+----+----------+--------+---------+
|123 |   jim    |  Jim   | Jonson  | 
```

我的问题是在数据库中选择用户名或 ID 需要花费大量时间。

我使用了以下查询

`SELECT * FROM`用户`USE INDEX (UsersIndexId) where id=123`

这是调用 Index 的正确方法吗？

```
EXPLAIN SELECT * FROM  `users` WHERE ID =327 
```

OP

```
id  select_type  table    type    possible_keys        key      key_len ref rows Extra 
1     SIMPLE       users  Const  PRIMARY,UsersIndexId  PRIMARY     4   const 
```

1

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T07:32:14.843

我建议你看看这个：[MySQL 如何使用索引](http://dev.mysql.com/doc/refman/5.6/en/mysql-indexes.html)

引用第一段：

> 索引用于快速查找具有特定列值的行。如果没有索引，MySQL 必须从第一行开始，然后读取整个表以查找相关行。桌子越大，成本越高。如果表有相关列的索引，MySQL 可以快速确定要在数据文件中间寻找的位置，而无需查看所有数据。如果一个表有 1,000 行，这至少比顺序读取快 100 倍。

这应该有助于加快您的搜索速度。

（*编辑*：将链接更新到较新版本的 SQL 文档）

PS：更具体地说，[列索引](http://dev.mysql.com/doc/refman/5.6/en/column-indexes.html)可能是您想要的。您可以在此处找到有关添加索引的更多信息：[创建索引语法](http://dev.mysql.com/doc/refman/5.6/en/create-index.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T07:36:45.543

要完成@Kjartan 答案，您可以尝试以下操作：

```
ALTER TABLE users ADD INDEX id_i (`ID`);
ALTER TABLE users ADD INDEX username_i (`Username`); 
```

您的查询应该更快。

# objective-c - 在 Objective C 中动态调用另一个类的方法

> ID：13928188
> 
> 赞同：0
> 
> 时间：2012-12-18T07:21:39.723
> 
> 标签：objective-c, objective-c-category

我正在尝试从另一个源文件中的另一个类调用一个方法。

例子：

1.  我有一个名为的文件`Source1.h/Source1.m`（两者都是目标 C 类文件）
2.  我有另一个文件名`Source2.h/Source2.m`（都是客观的 C 类文件）
3.  `Source1`包含 2 种方法，例如：`method1`和`method2`。
4.  从`Source2`文件，我需要调用`method1`源`source1`文件。

我知道如何在目标 C 中做到这一点。但是在我的`source2`文件中，`Source1`将动态检索其中的方法名称。我不会硬编码一些类似的东西。

```
Source1 *a = [[Source1 alloc]init];

[a method1]; 
```

`method1`文本将从文本文件中获取。我可以使用 Selector 从同一个类中调用一个方法。但是我不能使用选择器来调用另一个类的方法。

请帮忙解决这个问题....

非常感谢......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T07:29:59.163

这个答案似乎是相关的：[如何在运行时使用 Objective-C 动态创建选择器？](https://stackoverflow.com/questions/112643/how-can-i-dynamically-create-a-selector-at-runtime-with-objective-c)

基本上，您可以使用 NSSelectorFromString 从 NSString 中的 UTF8 字符串创建选择器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T09:25:21.157

你可以这样做：

MyClass 包含`myMethod`从其他类调用的方法。

```
MyClass *object=[MyClass new];

SEL mySelector=NSSelectorFromString(@"myMethod"); //myMethod is a string, that you can read from any text file/source file and use it here. 
```

//以下将在ARC中创建警告，您可以通过添加这些来抑制警告

```
#pragma clang diagnostic push
#pragma clang diagnostic ignored "-Warc-performSelector-leaks"
    [object performSelector:mySelector];
#pragma clang diagnostic pop 
```

另一种方法是这样做：

```
#import <objc/message.h>//This is required to import 
```

然后通过以下代码调用该方法：

```
MyClass *object=[MyClass new]; 
SEL mySelector=NSSelectorFromString(@"myMethod");
objc_msgSend(object,mySelector); 
```

# jquery - cordova&jquery：值发送到另一个静态html页面

> ID：13928193
> 
> 赞同：1
> 
> 时间：2012-12-18T07:21:54.910
> 
> 标签：jquery, ios, jquery-mobile, cordova

我正在使用`Cordova`and做一个 ios Web 应用程序`JQuery`。我创建了具有 3 行列表视图的 index.html。单击该行时，该页面将更改为另一个 page.html。JS会根据点击的行向服务器请求数据并刷新page.html。现在我的问题是实施它的最佳实践是什么？我的意思是这是常规风格，因为我对前端很陌生。目前我在 index.html 中添加了锚点：

```
<li><a href="page.html">A Header Bars</a></li> 
```

但是，我遇到了问题：

1.  不知道如何获取page.html中点击的行信息
2.  在 page.html 中，如何启动获取数据的请求？在 page.html 中，我写道：

    ```
    $(document).ready(function()
    {
        console.log("test");
        document.write("page test");
    }) 
    ```

但它没有被调用。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T11:45:30.363

如果您想要从一个页面到另一个页面的值，那么您几乎没有选择（相同的规则适用于具有多个页面的单个 jQM html 以及围绕多个 html 文件构建的 jQM 项目）：

I. 在第二页使用 pagebeforeshow 并通过数据对象检索所有需要的数据。假设您有 2 个 html 文件，第一个 html 的 id 为“page1”，第二个 html 的 id 为“page2”），例如：

```
$('#page2').live('pagebeforeshow', function (e, data) {
    alert(data.prevPage.find('div[data-role="content"]').attr('id'));
}); 
```

二、第二种选择是创建一个将用作数据存储的共享对象：

```
var storeObject = {
    someValue : '1',
    anotherValue : '2'
} 
```

这是一个最简单的解决方案，但它仅在 ajax 页面加载处于活动状态时才有效。

三、您可以使用 changePage 传递值：

```
$.mobile.changePage('page2.html', { dataUrl : "page2.html?paremeter=123", data : { 'paremeter' : '123' }, reloadPage : true, changeHash : true }); 
```

并像这样阅读它们：

```
$('#page2').live('pagebeforeshow', function (e, data) {
    var paremeter = $(this).data("url").split("?")[1];;
    paremeter = paremeter.replace("paremeter=","");   
    alert(paremeter);
}); 
```

# 更多信息

If you want to learn more about this topic take a look at this [**article**](http://www.gajotres.net/passing-data-between-jquery-mobile-pages/). You will find several solutions with examples.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T07:30:40.480

在这里检查这个例子，希望它会有所帮助

[http://wpcertification.blogspot.com/2012/05/using-jquery-mobile-in-phonegapcordova.html](http://wpcertification.blogspot.com/2012/05/using-jquery-mobile-in-phonegapcordova.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-11T06:19:06.283

[https://stackoverflow.com/a/16497284/3169868](https://stackoverflow.com/a/16497284/3169868) answers this well. For cordova+wp8, the option with LocalStorage is easy to implement.

# c# - 在 Silverlight 中的 textBox 的 keyDown 事件中模拟 Ctrl 键

> ID：13928199
> 
> 赞同：1
> 
> 时间：2012-12-18T07:22:25.240
> 
> 标签：c#, silverlight, microsoft-ui-automation

我在我的应用程序和 chrome 中使用richTextbox，richtextbox 没有捕获`SPACE`密钥

我发现这是一个错误，但我不想为此使用第三方修补程序。

richTextbox 可以识别`Ctrl`+ `Space`& `Shift`+`Space`键所以我决定`Ctrl`在 RichTextbox 的 keydown 事件中模拟键

但我不知道如何模拟它没有`SendKeys`？我已经完成了 UI 自动化，但没有找到键盘模拟。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T05:21:27.323

这是 javascript 热键覆盖 Silverlight 中的 Space 键。我在我的应用程序中使用 javascript 作为热键，并且空间绑定到某些功能。每当我按下空格键时（当 silverlight 文本框有焦点时），javascript 正在执行该功能，所以我从 javascript 中删除了键。

现在它在 chrome 中运行良好。

由于这个链接，我认为它是一个错误

[http://code.google.com/p/chromium/issues/detail?id=125924](http://code.google.com/p/chromium/issues/detail?id=125924)

我为指责 silverlight & visual studio & expression blend 而道歉，这是 javascript。

# iphone - 我的应用中的 youtube 视频列表

> ID：13928201
> 
> 赞同：0
> 
> 时间：2012-12-18T07:22:29.840
> 
> 标签：iphone, ios, youtube-api

我想做一个应用程序，我想在一个应用程序中获取 YouTube 视频列表`UITableView`。那么如何获取 YouTube 视频列表。是否有任何用于 YouTube 信息的 api。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T07:25:54.503

谷歌“youtube api”

[第一个参考链接！](https://developers.google.com/youtube/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T07:34:17.047

```
 follow Youtube API
   https://developers.google.com/youtube/

   You can use PSYouTubeExtractor.h class It can get youtube mp4 video url and than downloading and viewing is not a problem

  Here is my example https://github.com/comonitos/youtube_video 
```

# debugging - 有没有办法查看 mod-rewrite 如何实时执行？

> ID：13928204
> 
> 赞同：0
> 
> 时间：2012-12-18T07:23:03.847
> 
> 标签：debugging, .htaccess, mod-rewrite, redirect, http-redirect

我有一个 mod-rewrite 规则，它可以正常工作几个月：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?q=$1 [L,QSA] 
```

（位于站点/文件夹中）。

这会将人们从 site/folder/something 重定向到 site/folder/index.php?q=something，从而使 url 美观。

现在，突然，当没有人接触 .htaccess 文件和相关页面的代码时，它已经停止工作了。虽然 url 和以前一样，但页面的内容是 site/index.php 而不是 (site/folder/index.php?q=something)。

我该如何调试，哪些工具可以让我遵循重定向规则的流程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T07:27:27.377

在服务器或虚拟主机配置中，您可以添加以下行：

```
 RewriteLog /tmp/rewrite.log
        RewriteLogLevel 5 
```

然后您可以查看写入`/tmp/rewrite.log`（或您选择的任何位置）的输出，以查看 mod_rewrite 实时执行的操作。如果您没有看到任何输出，则根本没有应用您拥有的规则（可能覆盖已更改或 mod_rewrite 未加载？）。

# liferay - Liferay json 网络服务认证

> ID：13928205
> 
> 赞同：1
> 
> 时间：2012-12-18T07:23:04.473
> 
> 标签：liferay

我想将 liferay 与我现有的应用程序集成，因为我想使用 liferay 提供的 JSON Web 服务，这些服务中的大多数（在 /api/jsonws 中列出）要求身份验证令牌“p_auth”，但是我没有找到任何这些服务中的登录或身份验证方法可以给我这个 p_auth 令牌。

我的应用程序是 php，我不是 java 专家，所以寻找一些基于 REST 和/或 SOAP 的 http 方法来登录/验证。有什么办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T16:13:57.183

Liferay`p_auth`为标记有`@ActionMapping`注释的链接添加了密钥，以防止 CSRF 攻击。您可以使用禁用此令牌

```
auth.token.check.enabled=false 
```

在 Liferay 端（portal-ext.properties 文件），但在这种情况下，任何人都可以使用这种方法登录。

[你可以在这里](http://www.liferay.com/community/wiki/-/wiki/Main/Authentication+Token)阅读更多

# android - Textview 文本未正确显示

> ID：13928206
> 
> 赞同：2
> 
> 时间：2012-12-18T07:23:12.970
> 
> 标签：android, android-layout, android-canvas, textview, android-button

我正在使用按钮和文本视图创建一个类似结构的条形图。

我想在每个条形上方显示一些特定值。

如果该值在 4 位以内，它会正确显示，但只要 5 位没有。来了，文本被包裹起来，如下面的截图所示。

我什至尝试过`android:singleLine="true"`，但这并没有改变任何东西。

![截屏](../Images/5586e19578ae4d53c772b680bc5eb2f6.png)

**布局：**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <SeekBar
        android:id="@+id/seekBar"
        style="?android:attr/progressBarStyleHorizontal"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="50dp"
        android:maxHeight="9dp"
        android:minHeight="9dp"
        android:padding="10dp"
        android:max="100"
        android:progressDrawable="@drawable/seekbar_progress"
        android:thumb="@drawable/shine_btn" />

    <TextView
        android:id="@+id/tvValue"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"        
        android:layout_alignRight="@id/seekBar"
        android:layout_marginBottom="10dp"
        android:layout_marginRight="10dp"
        android:layout_marginTop="30dp" />

    <LinearLayout
        android:id="@+id/Graph01"
        android:layout_width="wrap_content"
        android:layout_height="200dp"
        android:layout_below="@id/seekBar"
        android:layout_marginTop="50dp"
        android:gravity="bottom"
        android:orientation="vertical"
        android:weightSum="1" >

        <com.example.calci.views.MyTextView
            android:id="@+id/tvGraph01"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:paddingBottom="5dp" />        
        <Button
            android:id="@+id/btnGraph01"
            android:layout_width="wrap_content"
            android:layout_height="0dp"
            android:layout_weight="0.1"                        
            android:background="#99f" />                
    </LinearLayout>

    <LinearLayout
        android:id="@+id/Graph02"
        android:layout_width="wrap_content"
        android:layout_height="200dp"
        android:layout_below="@id/seekBar"
        android:layout_marginTop="50dp"
        android:layout_toRightOf="@id/Graph01"
        android:gravity="bottom"
        android:orientation="vertical"
        android:weightSum="1" >

        <com.example.calci.views.MyTextView
            android:id="@+id/tvGraph02"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:paddingBottom="5dp" />

        <Button
            android:id="@+id/btnGraph02"
            android:layout_width="wrap_content"
            android:layout_height="0dp"
            android:layout_weight="0.1"
            android:background="#9f9" />
    </LinearLayout>

<!-- AND SO ON... -->
<RelativeLayout /> 
```

* * *

**活动：**

```
seekBar.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {

        @Override
        public void onProgressChanged(SeekBar seekBar, int progress,
                boolean fromTouch) {
lp = new LinearLayout.LayoutParams(new ViewGroup.MarginLayoutParams(20,
            LinearLayout.LayoutParams.WRAP_CONTENT));
    lp.setMargins(55, 0, 0, 0);
    tvGraph01.setLayoutParams(lp);
    tvGraph01.setTextSize(6);
    tvGraph01.setGravity(Gravity.CENTER);

    lp = new LinearLayout.LayoutParams(new ViewGroup.MarginLayoutParams(20,
            LinearLayout.LayoutParams.WRAP_CONTENT));
    lp.setMargins(2, 0, 0, 0);
    tvGraph02.setLayoutParams(lp);
    tvGraph02.setTextSize(6);
    tvGraph02.setGravity(Gravity.CENTER);

lp = new LinearLayout.LayoutParams(20, 0, 0.0002f * 2 * progress * 20);
    lp.setMargins(55, 0, 0, 0);
    btnGraph01.setLayoutParams(lp);

    lp = new LinearLayout.LayoutParams(20, 0, 0.0002f * 2 * progress * 15);
    lp.setMargins(2, 0, 0, 0);
    btnGraph02.setLayoutParams(lp);
               }
    }); 
```

* * *

**我的文本视图**

```
public class MyTextView extends TextView {
@Override
    protected void onDraw(Canvas canvas) {
        canvas.save();
// RORARING the textbox as I want to show text at right angle.
        canvas.rotate(270, getWidth() / 2, getHeight() / 2);
        super.onDraw(canvas);
        canvas.restore();
    }
} 
```

* * *

我想这背后的主要原因是**将 textview 的高度设置为 20**。
我尝试增加 textview 的高度，但这会增加按钮之间的空间。
我尝试了各种重力值，但这也不起作用。

任何帮助表示赞赏...

## 编辑

**1）。**任何来自 . `android:singleLine="true"`或`android:ellipsize="end"`或`android:maxLines="1"`不会为我的事业工作，因为我不想将**...**用于文本换行。
我想显示全文。

**2）。**除了增加所有按钮的高度之外，设置`android:layout_height="300dp"`为`LinearLayout`没有任何区别。

**3）。**设置`android:layout_height="150dp"`为`TextView`没有任何区别，因为我在代码中设置了高度和宽度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T07:35:02.047

试试这个 ：

您正在为`linear graph`布局分配固定高度。

而不是这个：

```
android:layout_height="200dp" 
```

用这个：

```
android:layout_height="300dp" or
android:layout_height="wrap_content" 
```

希望它可以帮助你。

谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T07:47:49.830

更改建议的布局宽度和高度，并检查它是否可行

```
 android:layout_width="40px" 
android:layout_height="wrap_content" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T07:59:32.880

将此添加到您的 TextView

**android:singleLine="true" android:ellipsize="end"**

如果文本数据多于单行，它将添加“...”，但请确保您必须将 TextView 的宽度设置为某些值。如果您需要将宽度保持为**wrapcontent**而不是使用一些值设置填充。尝试一下。！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T08:02:35.627

```
Try this,

   android:layout_height="150dp"
   android:layout_width="wrap_content"
   android:maxLength="5" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T10:07:18.450

需要的一项重要更改：将**具有 id Graph02**`android:layout_toRightOf="@id/Graph01`的LinearLayout 更改为**`android:layout_toRightOf="@id/tvGraph01"`**

 **即即使textview 宽度增加，相应的linearlayout 也不会受到影响。

另外，我必须为 , 等设置`tvGraph02`边距`btnGraph02`。在代码中增加 textview 的宽度后。**

# actionscript-3 - ActionScript 3 示例（仅代码）

> ID：13928216
> 
> 赞同：2
> 
> 时间：2012-12-18T07:24:09.763
> 
> 标签：actionscript-3, flash

有没有可以学习 ActionScript 3 的好教程页面？或者你能帮帮我吗？

我不使用***图形设计师***，我也不想。**我需要的只是代码。**

例如：我需要快速学习的东西：

1.  按钮和文本字段（基本表单内容）
2.  绘图画布（如 html5 画布）

使用 FlashDevelop + Flash SDK，没有插件，什么都没有。我刚刚让它工作（编译、构建和开始一个空白的东西），现在我需要看看我能用 ActionScript 代码做什么。

* * *

**已解决：**感谢 Dannyw，上面的 2 个项目可以直接解决（只需少量添加）！

朱利安的回答也很有帮助。因为我还想浏览 Flash 中的所有标准类：

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/index.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/index.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T18:49:07.270

我有一些技巧可以让你成为一名出色的 Flash 开发者：

*   放下你所知道的一切，重新开始。您对工作流程应该如何做出奇怪的假设。如果您想成为专业人士，您应该对其他工作流程持开放态度。
*   如果你来自actionscript 2，不要认为as2 就像as3，所以不要试图用AS3 做AS2 的事情。再次，放弃你所知道的一切。
*   阅读和学习 Adob​​e LiveDocs
*   了解显示列表的工作原理。
*   学习 AS3 编码标准，学习编写干净可读的代码，以后尝试学习设计模式。
*   了解如何使用常用的 actionscript 库、TweenLite、Gaia 框架、RobotLegs、Temple 库、Pure MVC、Away3D、as3corelib 等。
*   不要试图重新发明轮子，不要创建自己的框架，因为你认为没有像你这样的框架，大多数初学者都会进入那个陷阱。
*   Flash IDE 操作面板中从来没有代码，有非常好的操作脚本编辑器，如 FlashDevelop、FDT、FlashBuilder、IntelliJ。但是不要迷失在代码中，有很多可视化的东西可以使用 Flash IDE 更快地构建，所以找到一个好的工作流程，而不是限制自己。
*   如果您喜欢视频教程；gotoAndLearn.com 上的视频，大多数都有共同的做法。
*   If you like to learn from opensource projects: find as3 projects on github.com or wonderfl, check out how they did it.
*   if you like to read blogs: feeds.adobe.com is full of nice relavant blogs. Learn from the best.

Last but not least: there is no ultimate guide to become a flashdevelop-code-only-flash-developer. Like sport, you have to train and just experiment right away. So be open, use google alot, try to challenge yourself with excercises and fun experiments.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T15:07:47.377

用这个：

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/index.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/index.html)

顺便说一句，在 AS3 中编程时，您几乎应该声明这个网站是神圣的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T16:30:10.237

对于按钮：

[http://www.how-to-code.com/as3-actionscript3/as3-buttons/as3-button.html](http://www.how-to-code.com/as3-actionscript3/as3-buttons/as3-button.html)

对于文本字段：

[http://www.republicofcode.com/tutorials/flash/as3text/](http://www.republicofcode.com/tutorials/flash/as3text/)

对于绘图：

[http://www.republicofcode.com/tutorials/flash/as3drawvectors/](http://www.republicofcode.com/tutorials/flash/as3drawvectors/)

我以与您打算相同的方式学习动作脚本，只是通过阅读互联网上的教程并在我进行的过程中学习一些内容。我最终也给自己买了一本大的旧的 actionscript 圣经（Colin Moock 的 Essential Actionscript 3.0），但可以肯定地说，互联网是我最宝贵的资源！

享受教程的乐趣:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T07:46:09.567

建议使用 adobe flash 或 macromedia，按照这些教程我从这个网站学到了关于 flash 的一切。

[http://www.lynda.com/Flash-CS5-tutorials/flash-professional-cs5-essential-training/59964-2.html](http://www.lynda.com/Flash-CS5-tutorials/flash-professional-cs5-essential-training/59964-2.html)

# objective-c - iOS：隐藏 UIView 对象

> ID：13928217
> 
> 赞同：-1
> 
> 时间：2012-12-18T07:24:16.563
> 
> 标签：objective-c, ios, xcode

我正在尝试`UIDatePicker`在 Storyboard 上实现一个。如您所料，当视图首次加载时，日期选择器无法显示在屏幕上，因此我必须编写自定义代码以在加载时将其移出屏幕。这是代码...

```
- (void)hideDatePicker
{
  CGRect newRect = self.datePicker.frame;
  CGPoint newOrigin = CGPointMake( 0, [[UIScreen mainScreen] bounds].size.height);
  newRect.origin = newOrigin;

  self.datePicker.frame = newRect;
} 
```

我目前正在调用这个方法`viewDidLoad`。

当我运行该应用程序时，日期选择器仍在屏幕底部，令人作呕地占​​据了一半的屏幕......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T07:29:50.287

`-viewDidLoad:`您不能确定所有 IBOutlets 都已实例化并且所有几何设置，因此如果您使用任何几何转换，最好调用您的方法`-view[Will/Did]Appear:`。并且更容易隐藏`hidden`属性

`yourView.hidden = YES;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T07:31:33.080

您可能希望在`UIActionSheet`一个不那么困难且优雅的解决方案中实现它。查看这个问题，它将为您提供简要说明和必要的代码。[在操作表中添加 UIPickerView 和按钮 - 如何？](https://stackoverflow.com/questions/1262574/add-uipickerview-a-button-in-action-sheet-how)

# node.js - 这个字符“”是什么，为什么会导致换行？

> ID：13928218
> 
> 赞同：1
> 
> 时间：2012-12-18T07:24:21.600
> 
> 标签：node.js, layout, handlebars.js

我正在使用把手 + hbs（按照块/扩展帮助程序示例）为我的节点应用程序呈现 html。出于某种原因，我的一个 div 被推到了 1 行。

我检查了chrome中的dom检查器，有一行带双引号：

![讨厌双引号](../Images/7924268eef61f15a1f279ccadb87abd7.png)

这导致了这个：
![讨厌的双引号结果](../Images/7be873dd5abde96aee9dbf816634dbff.png)

当我从 dom 检查器中删除双引号（按退格键或删除）时，布局是正确的：
![在此处输入图像描述](../Images/d70894cf0fcee131c9fd8be7e9ce1cb0.png)

![在此处输入图像描述](../Images/85c4bea7338309f7a299378dc6e60118.png)

到底是怎么回事？它是非打印字符还是什么？html/模板中没有任何内容，空格（或任何字符）不应该导致块级元素改变位置，对吧？

**这是一些代码：**
Layout.html 的相关部分

```
<div id="details" class="east">{{{block "east"}}}</div> 
```

模板：

```
<div id="details-title">
  <h3 class="title elide" style="height:26px;">{{Title}}</h3>
</div>
<div id="details-body" class="content text">
  <img class="card" src="{{ImagePath}}" />
  <div>
    <span class="type">{{Type}}</span>
  </div>
  <div class="body">
    {{{Body}}}
  </div>
</div> 
```

块 + 扩展助手：（[来自 hbs 示例](https://github.com/donpark/hbs/blob/master/examples/extend/app.js)）

```
hbs.registerHelper("extend", function (name, context) {
    var block = blocks[name];
    if (!block) {
        block = blocks[name] = [];
    }

    if (typeof context.fn !== "undefined") {
        block.push(context.fn(this));
    }
});

hbs.registerHelper("block", function (name) {
    var val = (blocks[name] || [])
        .filter(function () { return true })
        .join("\n");

    // clear the block
    blocks[name] = [];
    return val;
}); 
```

**更新** 显然，这是[char 65279](http://www.fileformat.info/info/unicode/char/feff/index.htm)，我的预编译车把模板在渲染时都将其作为第一个字符发出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T20:45:44.693

所以我添加了一个技巧来删除作为模板输出中第一个字符出现的 BOM：

```
var html = detailTemplate(res.data);
if (html.charCodeAt(0) === 65279) { // hack to fix precompiled hbs template bug
  html = html.substring(1);
}
$("#details").html(html); 
```

事实证明，块 + 扩展助手与问题无关。我假设这是我使用的编码有问题，但我不知道如何改变它。上面的代码虽然解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-30T09:32:12.117

已解决，使用编码保存 > UTF-8

# java - 继承和 JAXB 如何协同工作？

> ID：13928222
> 
> 赞同：14
> 
> 时间：2012-12-18T07:24:33.067
> 
> 标签：java, jaxb, xml-serialization

```
public abstract class Parent<T> {
    protected List<T> list;

    @XmlTransient   //Question why do we have to give this here?
    public abstract List<T> getList();
    public abstract void setList(List<T> list);
}

@XmlRootElement(name = "child1")
class Child1 extends Parent<ExtendedElement1>{
    @Override
    public void setList(List<ExtendedElement1> list){
        this.list = list;
    }

    @Override
    @XmlElementWrapper(name = "child1-list")
    @XmlElement(name = "child-list-element")
    public List<ExtendedElement1> getList(){
        return this.list;
    }
}

@XmlRootElement(name = "child2")
class Child2 extends Parent<ExtendedElement2>{
    @Override
    public void setList(List<ExtendedElement2> list){
        this.list = list;
    }

    @Override
    @XmlElementWrapper(name = "child1-list")
    @XmlElement(name = "child-list-element")
    public List<ExtendedElement2> getList(){
        return this.list;
    }
}

class Element{
    @XmlElement(name = "integer", type = int.class)
    private int i = 2;
}

class ExtendedElement1 extends Element{
    @XmlElement(name = "extended-element1-str", type = String.class)
    private String str = "hello";
}

class ExtendedElement2 extends Element{
    @XmlElement(name = "extended-element2-str", type = String.class)
    private String str1 = "hello_there";
} 
```

正如我在示例中所示，当我从类方法**中删除**时，将编组以下 xml：`@XmlTransient``Parent``getList()`

```
<child1>
<!-- List is serialized 2 times -->
    <list xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="extendedElement1">
        <integer>2</integer>
        <extended-element1-str>hello</extended-element1-str>
    </list>
    <list xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="extendedElement1">
        <integer>2</integer>
        <extended-element1-str>hello</extended-element1-str>
    </list>
    <list xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="extendedElement1">
        <integer>2</integer>
        <extended-element1-str>hello</extended-element1-str>
    </list>
    <child1-list>
        <child-list-element>
            <integer>2</integer>
            <extended-element1-str>hello</extended-element1-str>
        </child-list-element>
        <child-list-element>
            <integer>2</integer>
            <extended-element1-str>hello</extended-element1-str>
        </child-list-element>
        <child-list-element>
            <integer>2</integer>
            <extended-element1-str>hello</extended-element1-str>
        </child-list-element>
    </child1-list>
</child1> 
```

但是当我**添加**注释时，`@XmlTransient`如示例中所示，xml 会根据需要仅使用一个列表进行序列**化**。

```
<child1>
    <child1-list>
        <child-list-element>
            <integer>2</integer>
            <extended-element1-str>hello</extended-element1-str>
        </child-list-element>
        <child-list-element>
            <integer>2</integer>
            <extended-element1-str>hello</extended-element1-str>
        </child-list-element>
        <child-list-element>
            <integer>2</integer>
            <extended-element1-str>hello</extended-element1-str>
        </child-list-element>
    </child1-list>
</child1> 
```

那么请有人解释一下为什么需要`@XmlTransient`在父类getter方法中给出？对于这些情况，继承和 JAXB 如何相互关联？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-19T21:57:05.323

**为什么会发生**

[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)实现会将它知道的每个域对象映射到复杂类型。这意味着它认为该类存在以下 XML 类型`Parent`（当`list`is not时`@XmlTransient`）。

```
 <xs:complexType name="parent" abstract="true">
    <xs:sequence>
      <xs:element name="list" type="xs:anyType" nillable="true" minOccurs="0" maxOccurs="unbounded"/>
    </xs:sequence>
  </xs:complexType> 
```

现在`Child2`也有复杂的类型。JAXB 可以做两件事：

*   不允许覆盖属性，这将是非常有限的。
*   为被覆盖的属性生成额外的映射。在下面的模式中，`child2`类型 extends `parent`。这意味着它从`parent`类型中获取所有元素以及它自己的元素。

```
 <xs:complexType name="child2">
    <xs:complexContent>
      <xs:extension base="parent">
        <xs:sequence>
          <xs:element name="child1-list" minOccurs="0">
            <xs:complexType>
              <xs:sequence>
                <xs:element name="child-list-element" type="extendedElement2" minOccurs="0" maxOccurs="unbounded"/>
              </xs:sequence>
            </xs:complexType>
          </xs:element>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent> 
```

**如何修复它**

您可以在类中添加`@XmlTransient`该`list`属性`Parent`，但我建议`Parent`使用`@XmlTransient`.

```
import java.util.List;
import javax.xml.bind.annotation.XmlTransient;

@XmlTransient
public abstract class Parent<T> {
    protected List<T> list;

    public abstract List<T> getList();
    public abstract void setList(List<T> list);

} 
```

这会将其作为映射类移除，对应的复杂类型`Child2`将变为：

```
 <xs:complexType name="child2">
    <xs:sequence>
      <xs:element name="child1-list" minOccurs="0">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="child-list-element" type="extendedElement2" minOccurs="0" maxOccurs="unbounded"/>
          </xs:sequence>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
  </xs:complexType> 
```

# oracle - 在命令行参数之间添加逗号

> ID：13928224
> 
> 赞同：3
> 
> 时间：2012-12-18T07:24:38.137
> 
> 标签：oracle, bash, shell, unix, scripting

我想通过unix脚本调用一个程序，它将是通用脚本，所以参数可以很。调用语句将类似于

```
<scriptname> <procedure name> <param1> <param2> <param3> <param4>.. so on 
```

我需要的是从第二个命令行参数到最后一个参数我希望所有值都用逗号分隔，就像这样

```
<param1>,<param2>,<param3>,<param4> 
```

我可以使用循环来执行此操作，即从第二个命令行参数开始，我将迭代每个参数并在其中添加逗号。我的问题是我可以用单个命令做到这一点吗？

*注意： - 如果存在是命令行参数，则应正确处理空格，在最后一个参数之后不应有任何逗号*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T12:22:59.813

`"${*:2}"`展开为从 $2 开始的参数列表，由 IFS 的第一个字符分隔：

```
saveIFS=$IFS
IFS=","
args="${*:2}"
IFS=$saveIFS
echo "$args" 
```

请注意，这会正确保留参数中的空格，而不是将它们转换为逗号。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-18T07:37:25.983

所有参数为`$@`. 您可以使用`sed`逗号替换空格，然后（或从开头，`cut`第一个字段）

```
echo $@ |  sed s/" "/,/g | cut -d "," -f2- 
```

向前迈出一步，您可以将其分配给一个变量：

```
comma_separated_params=`echo $@ |  sed s/" "/,/g | cut -d "," -f2-` 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T13:42:09.443

下面的这种技术，在子shell中执行回显，允许您设置 IFS，然后让更改随着子shell消失

```
$ set -- "a b c" "d e f" "g h i"
$ with_comma=$(IFS=,; echo "$*")
$ echo "$with_comma"
a b c,d e f,g h i 
```

# java - 如何将连续数据从 Java 类传递到 NodeJs？

> ID：13928226
> 
> 赞同：0
> 
> 时间：2012-12-18T07:24:40.787
> 
> 标签：java, node.js

我正在尝试将我的 Java 类中的连续数据发送到 Node.js。但我无法全部捕获它们。我只收到从 Java 发送的第一个数据。这是我的 Java 类和 NodeJs。我想编写代码，以便 NodeJs 可以从 Java 类中捕获连续数据。

```
import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.net.Socket;
import java.io.*;

class NodeCommunicator {

public static void main(String[] args) {
try {
    Socket nodejs = new Socket("localhost", 8080);
    Thread.sleep(100);
    for(int i=1; i< 100; i++){
            Thread.sleep(500);
            sendMessage(nodejs, i + " ");
        System.out.println(i + " has been sent to server");
    }

    } catch (Exception e) {
    System.out.println("Server Closed..Something went Wrong..");
         e.printStackTrace();
    }

    }
        public static void sendMessage(Socket s, String message) throws IOException {
                System.out.println("In SendMesage"+message);
            s.getOutputStream().write(message.getBytes("UTF-8"));
            s.getOutputStream().flush();
        }
        } 
```

节点.js

```
var javaPort = 8080;
var javaServer = require('net').createServer();
var WebSocketServer = require('ws').Server
 , wss = new WebSocketServer({port: 90});

var fileData ;

 console.log('=====================================================');
 console.log('Node.js/Java Communication Module');
 console.log('=====================================================');

 javaServer.on('listening', function () {
   console.log('Server is listening on ' + javaPort);
});

 javaServer.on('error', function (e) {
    console.log('Server error: ' + e.code);
  });

 javaServer.on('close', function () {
   console.log('Server closed');
 });

  javaServer.on('connection', function (javaSocket) {
    var clientAddress = javaSocket.address().address + ':' + javaSocket.address().port;
    console.log('Java ' + clientAddress + ' connected');

    var firstDataListenner = function (data) {
            fileData = data;
        console.log('Received namespace from java End: ' + data);
        //javaServer.send(data);
        javaSocket.removeListener('data', firstDataListenner);
    }

javaSocket.on('data', firstDataListenner);

 javaSocket.on('close', function() {
        console.log('Java ' + clientAddress + ' disconnected');
 });
});
 javaServer.listen(javaPort); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T12:54:18.493

收到第一条消息时，您将删除数据侦听器。删除它，它应该可以工作。

```
var firstDataListenner = function (data) {
        fileData = data;
    console.log('Received namespace from java End: ' + data);
    //javaServer.send(data);
} 
```

# ruby-on-rails - 无法完全注销 - RailsTutorial.org - 第 8 章

> ID：13928229
> 
> 赞同：0
> 
> 时间：2012-12-18T07:24:56.740
> 
> 标签：ruby-on-rails, railstutorial.org

我正在阅读 Railstutorial.org 上的教程，并通过测试完成了第 8 章。我的问题是，如果我完全按照指南的代码进行操作，我可以登录，但**无法****注销**。

如果我单击“注销”，我将被重定向到 root_path，但仍然是登录的成员。

我想我将这种行为追溯到我的会话助手。具体如下几行：

```
 def current_user
    @current_user ||= User.find_by_remember_token(cookies[:remember_token])
  end 
```

通过 rails 控制台和 pry，我能够确定 cookies[:remember_token] 为 nil，但由于我的用户的 remember_token 也是 nil，所以 find_by_remember_token 说：“嘿 nil == nil！太好了！我们找到了我们的用户！” 除了这显然不是理想的行为。

我通过将 current_user 方法更改为以下内容来修复它：

```
 def current_user
   @current_user ||= cookies[:remember_token] && User.find_by_remember_token(cookies[:remember_token])
  end 
```

我完全接受并理解这可能是我的代码中的错误。我从项目中的这一点找到了 Michael Hartl 的提交，并比较了我们的文件，找不到差异。关于这里可能发生的事情的任何想法？

感谢您的时间。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-18T07:31:10.903

把这个放在你的...

控制器：

```
def logout
   reset_session
   redirect_to :controller => 'classified', :action => 'list'
end 
```

在您看来：您需要添加一个注销链接。

```
<% else %>
    <p><%= "Welcome #{session[:user].login}!" -%></p>
    <p><%= link_to 'Logout', :controller => 'user',:action => 'logout' -%></p>
<% end %> 
```

# java - Java 在 double 和 int 值之间进行位与运算

> ID：13928244
> 
> 赞同：0
> 
> 时间：2012-12-18T07:26:08.853
> 
> 标签：java, vb.net, bit-manipulation, bit-shift

我有一个纬度值作为双精度值，我想对其执行按位与运算，然后右移位。以下是我的代码行：

```
pBuffer[1]=(latitude_decimal_degrees & 0xFF0000) >> 16; 
```

但是，在 double 和 int 值之间进行按位与运算是不可能的。我无法将纬度转换为 int，因为这不会产生准确的值。有人可以指导我吗？

编辑：我的要求基本上是将以下 vb.net 代码翻译成 java。原因：下面的代码行 (vb.net) 是用“Basic4Android”为安卓应用编写的方法的一部分。完全相同的方法将在我的 BlackBerry App 中实现。因此，我需要生成与下面将在服务器端解码的完全相同的值：

```
Dim pBuffer(11) As Int
Dim longitude_decimal_degrees As Double
pBuffer(1)=Bit.ShiftRight(Bit.And(latitude_decimal_degrees, 0xFF0000),16) 
```

这些代码行如何翻译成java？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T07:32:46.660

您可以使用[Double.doubleToRawLongBits(latitude_decimal_degrees)](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Double.html#doubleToRawLongBits(double))在长空间中执行所有按位运算，然后通过 longBitsToDouble 将双精度转换为双精度

另请参阅此 SO 答案：[https ://stackoverflow.com/a/4211117/504685](https://stackoverflow.com/a/4211117/504685)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T05:34:46.817

正如您自己和其他人所指出的那样，不可能对浮点数执行位移。现在，根据您更新的问题，您正在使用一个自定义库，该库实现了自己的位运算符版本。这些运算符的所有操作数都转换为 int

```
ShiftRight (N As Int, Shift As Int) As Int
And (N1 As Int, N2 As Int) As Int 
```

为了匹配此逻辑，您的 Java 代码还应在执行必要的位操作之前将其 double 值转换为 int：

```
double latitude = 52.5233;
int transform = (((int)latitude) & 0xFF000000) >> 16; 
```

请注意，这假定 Basic4Android 遵循与 Java 相同的从 int 到 double 的转换规则（数字向下舍入为整数）。

当您完成移植代码时，通过它传递一组值，并确保您的 Basic4Android 和 Java 代码中的最终结果是相同的。

# php - 如何重新排序搜索结果？

> ID：13928248
> 
> 赞同：1
> 
> 时间：2012-12-18T07:26:55.167
> 
> 标签：php, mysql, search

当我搜索单词“apple”时，脚本按以下顺序显示结果：

(1) 苹果树 (2) 果汁苹果 (3) 苹果

但我想按以下顺序重新排序搜索结果：

(1) 苹果 (2) 苹果树 (3) 果汁苹果

正如你所看到的，上面的顺序正是我想要的，结果根据搜索词“苹果”显示

```
//get date
$button = $_GET['submit'];
$search = $_GET['search'];

if (!$button)
   echo "Please fill out the form";
else
{
    if (strlen($search)<=2)
   echo "The item you searched for was to small";
    else
   {
     echo "You searched for <b>$search</b> <hr size='1'>";

     //connect to database

     mysql_connect('localhost','wnumber','passowrd');
     mysql_select_db('wnumber');

 //explode search term
           $search_exploded = explode(" ",$search);
           foreach($search_exploded as $search_each)
{
    $str = mysql_real_escape_string(substr($search_each, 0, 4));
    //construct query
    $x++;
    if ($x==1) $construct .= "keywords LIKE '$str%'";
    else       $construct .= " OR keywords LIKE '$str%'";
}

     //echo out construct
    $construct = "SELECT * FROM word WHERE $construct";
    $run = mysql_query($construct);
     $foundnum = mysql_num_rows($run);

     if ($foundnum==0)
        echo "No results found.";
     else
     {

       echo "$foundnum results found.<p><hr size='1'>";

       while ($runrows = mysql_fetch_assoc($run))
       {

        //get data
       $meaning = $runrows['meaning'];
       $keywords = $runrows['keywords'];

        echo "<b>$keywords</b><br>
       <b>$meaning</b><br>

       }

     }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T07:30:51.523

按 asc 使用顺序

> $construct = "SELECT * FROM word WHERE $construct ORDER BY [你想提升搜索的字段名称] ASC";

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T07:40:17.333

尝试

ORDER BY 关键字 Asc

为了得到想要的结果

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T07:34:34.263

使用`ORDER BY keywords ASC`它将按预期为您提供适当的结果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T07:38:53.457

如果您对长度的关注意味着尝试，除了升序之外`LENGTH()`

```
$construct = "SELECT * FROM word WHERE $construct order by LENGTH(`keywords`) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-18T07:52:05.813

我假设每一行都有多个**关键字**。您得到所有​​这些结果是因为您正在搜索包含 word 的任何单词`apple`。

要首先获得准确的结果，然后只获得包含该单词的结果，请执行以下操作：

1.  搜索与单词“apple”完全**匹配的结果**
2.  搜索**包含**单词“apple”的任何结果

由于每一行都有多个关键字，因此不能使用`=`运算符。但是您必须`separator`在表格中使用一些来将关键字彼此分开。让我们假设它的“ `”（空白）。`

 `因此，例如，如果您的表和列“关键字”看起来像这样

```
| id | name  | keywords |
| 1  | apple | apple fruit sweet | 
```

您可以搜索这样的结果：

```
SELECT * FROM table t1
WHERE
 keywords LIKE "% $keyword %" /* Notice whitespaces around the variable */
 OR
 keywords LIKE "$keyword %" /* This is for keywords that arent separated from left */
 OR
 keywords LIKE "% $keyword" /* This is for keywords that arent separated from right */

UNION DISTINCT /* Distinct is there because we want to show every result just once */

SELECT * FROM table t1
WHERE
 keywords LIKE "%$keyword%" 
```

PS：分隔符可以是任何字符串或字符，不一定是空格`

# build - 如何将 IR 保存到文件并将其构建为可执行文件？

> ID：13928250
> 
> 赞同：8
> 
> 时间：2012-12-18T07:26:58.187
> 
> 标签：build, llvm, llvm-ir

现在我使用 clang 将我的 .c 文件构建为 .s 文件。我已经使用 llvm API 修改了 IR。但是，现在我无法将修改后的 IR 保存到文件中。我想使用“LLVMWriteBitcodeToFile”，但找不到“LLVMOpaqueModule”的结构；我想使用“WriteBitcodeToFile”，它总是显示“类型不匹配”。而且我还想知道如何将 IR 文件构建为可执行文件。

接下来是我用来保存模块的两种方法：

1、首先使用WriteBitcodeToFile

```
bool unbuffered = false; 
llvm::raw_ostream ro(unbuffered); 
WriteBitcodeToFile(m, ro); 
```

2、第二次使用LLVMWriteBitcodeToFile

```
const char *Path = "hello2.s"; 
int ans = LLVMWriteBitcodeToFile(m, Path); 
```

注意：m 是 Module 实例的一个点

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T13:48:57.833

1.  要将 IR 保存到文件中，请参阅此问题的答案：[将模块写入 .bc 位码文件](https://stackoverflow.com/questions/13903686/writing-module-to-bc-bitcode-file)
2.  要将 IR 编译为目标文件，请查看该`llc`工具并遵循其`main`功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-24T22:16:23.410

查看以下功能`llvm-c/TargetMachine.h`：

```
/** Emits an asm or object file for the given module to the filename. This
  wraps several c++ only classes (among them a file stream). Returns any
  error in ErrorMessage. Use LLVMDisposeMessage to dispose the message. */
LLVMBool LLVMTargetMachineEmitToFile(LLVMTargetMachineRef T, LLVMModuleRef M,
  char *Filename, LLVMCodeGenFileType codegen, char **ErrorMessage);

/** Compile the LLVM IR stored in \p M and store the result in \p OutMemBuf. */
LLVMBool LLVMTargetMachineEmitToMemoryBuffer(LLVMTargetMachineRef T, LLVMModuleRef M,
  LLVMCodeGenFileType codegen, char** ErrorMessage, LLVMMemoryBufferRef *OutMemBuf); 
```

另请参阅[如何使用 llvm 生成机器代码](https://stackoverflow.com/questions/13464259/how-to-generate-machine-code-with-llvm/33900895#33900895)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-01T00:24:06.687

将 llvm 位代码写入文件我所做的是：

```
std::error_code EC;
llvm::raw_fd_ostream OS("module", EC, llvm::sys::fs::F_None);
WriteBitcodeToFile(pBiFModule, OS);
OS.flush(); 
```

然后使用llvm-dis进行反汇编。

# matlab - 在matlab中编写文本文件

> ID：13928251
> 
> 赞同：1
> 
> 时间：2012-12-18T07:26:59.430
> 
> 标签：matlab

我想在 matlab 中编写一个文本文件并遇到符号打印问题（\、%%、%\ => 等）。

我该怎么做。

它的样本来自 atlatex 文件。

我只想打印它（在文件上）

```
%% Basierend auf einer TeXnicCenter-Vorlage von Tino Weinkauf.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% HEADER
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\documentclass[a4paper,twoside,10pt]{report}
% Alternative Optionen:
%   Papiergröße: a4paper / a5paper / b5paper / letterpaper / legalpaper / executivepaper
% Duplex: oneside / twoside
% Grundlegende Fontgrößen: 10pt / 11pt / 12pt

%% Deutsche Anpassungen %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage[ngerman]{babel}
\usepackage[T1]{fontenc}
\usepackage[ansinew]{inputenc}

\usepackage{lmodern} %Type1-Schriftart für nicht-englische Texte

%% Packages für Grafiken & Abbildungen %%%%%%%%%%%%%%%%%%%%%%
\usepackage{graphicx} %%Zum Laden von Grafiken
%\usepackage{subfig} %%Teilabbildungen in einer Abbildung
%\usepackage{pst-all} %%PSTricks - nicht verwendbar mit pdfLaTeX

%% Beachten Sie:
%% Die Einbindung einer Grafik erfolgt mit \includegraphics{Dateiname}
%% bzw. über den Dialog im Einfügen-Menü.
%% 
%% Im Modus "LaTeX => PDF" können Sie u.a. folgende Grafikformate verwenden:
%%   .jpg  .png  .pdf  .mps
%% 
%% In den Modi "LaTeX => DVI", "LaTeX => PS" und "LaTeX => PS => PDF"
%% können Sie u.a. folgende Grafikformate verwenden:
%%   .eps  .ps  .bmp  .pict  .pntg 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T07:31:57.780

对于特殊字符，您通常使用`\`反斜杠。对于`%`您只需`%%`在格式字符串中使用：

```
fprintf( 1, '%%\n'); % print '%' 
```

有关详细信息，请参阅[Matlab 中格式化字符串的](http://www.mathworks.com/help/matlab/matlab_prog/formatting-strings.html)文档。

**编辑 ：**

如果你想打印很多字符，你可以使用

```
n = 10; % number of % to be printed
fprintf( 1, [repmat('%', 1, 2*n), '\n']); 
```

# java - 如何为应用配置两个log4j

> ID：13928264
> 
> 赞同：1
> 
> 时间：2012-12-18T07:28:04.620
> 
> 标签：java, log4j

我需要为不同布局中的所有方法和类生成两个日志文件。可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T16:48:41.807

### log4j.properties

```
log4j.rootLogger=error, file1, file2, stdout
log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%5p [%t] (%F:%L) - %m%n

log4j.appender.file1=org.apache.log4j.RollingFileAppender 
log4j.appender.file1.File= file1.log
log4j.appender.file1.layout=org.apache.log4j.PatternLayout
log4j.appender.file1.layout.ConversionPattern=%p %t %c - %m%n <--- Different pattern 

log4j.appender.file2=org.apache.log4j.RollingFileAppender 
log4j.appender.file2.File= file2.log
log4j.appender.file2.layout=org.apache.log4j.PatternLayout
log4j.appender.file2.layout.ConversionPattern=%p (%F:%L) - %m%n <--- Different pattern 
```

### 最简单的代码.java

```
import org.apache.log4j.Logger;
import org.apache.log4j.PropertyConfigurator;

public class SimplestCode {

    static final Logger logger = Logger
            .getLogger(in.mdtareque.log4j.test.SimplestCode.class);

    public static void main(String[] args) {
        PropertyConfigurator.configure("resources/log4j.properties");

        logger.warn("WARN");
        logger.error("ERROR");
        logger.fatal("FATAL");

    }
} 
```

日志文件是在上述配置的项目主目录中创建的。

### 文件 1.log

```
ERROR main in.mdtareque.log4j.test.SimplestCode - ERROR
FATAL main in.mdtareque.log4j.test.SimplestCode - FATAL 
```

### 文件 2.log

```
ERROR (SimplestCode.java:18) - ERROR
FATAL (SimplestCode.java:19) - FATAL 
```

[在此处查看更多文档](http://logging.apache.org/log4j/2.x/manual/appenders.html)

# utf-8 - Black Diamond charset=iso-8859-1 utf 8 问题

> ID：13928271
> 
> 赞同：0
> 
> 时间：2012-12-18T07:28:33.630
> 
> 标签：utf-8, character-encoding

我仍然对黑钻石有疑问。

看看这个页面： http: [//fpmnky.com/airport.php?airport_id=4131](http://fpmnky.com/airport.php?airport_id=4131)

这些字符在页面上效果很好，但在搜索框中输入“LFLB”，您会看到菱形再次出现。

这是在我的标题中：

```
 <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /> 
```

我还做了一个 mysql_client_encoding() 检查，它说的是 Latin1。

我还需要做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T16:21:41.587

利用

```
header("Content-Type: text/html; charset=iso-8859-1"); 
```

在 ajax 响应中，或您网站上的任何一般响应中。

# database - 数据库是一种关系

> ID：13928272
> 
> 赞同：1
> 
> 时间：2012-12-18T07:28:35.873
> 
> 标签：database, database-design, schema, database-schema, entity-relationship

我的问题与数据库模式开发有关，如下所示。

我正在开发一个采购模块，我想在其中购买物品和服务。以下是我的 EER 图，（请注意，服务的专业属性非常少——最多 2 个）

![http://i.stack.imgur.com/vzhJz.jpg](../Images/a3e51854e3a0249a0af9e61f78a7f068.png)

我的问题是将产品和服务放在两张桌子上还是只放在一张桌子上？

一个表选项 - 降低复杂性，因为我只需要指定项目 id 引用项目表，该表将具有“item_type”字段来识别它是产品还是服务

两个表选项——必须在我想引用它们的任何地方引用单独的产品或服务，并且必须在每个引用产品或服务的表中保留“item_type”字段？

目前计划使用选项1，但想知道专家对此问题的意见。非常感谢您的时间和建议。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T07:40:43.070

如果我要实现，我会选择两个表选项，这有点像模式规范化的第一条规则。删除多值属性。不推荐使用 item_type。创建单独的表后，您不需要使用 item_type，您只需使用外键关系即可。

考虑阅读这篇文章： [http ://en.wikipedia.org/wiki/Database_normalization](http://en.wikipedia.org/wiki/Database_normalization)

它应该有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T07:55:04.733

我当然会选择“两张桌子”选项。您会看到，您必须区分产品和服务，因此您可以`switch(item_type) { ... }`在程序中使用产品和服务的完全不同的代码路径。如果需要更新数据库模式，`switch`则更难维护。

第二个原因是 NULL。我建议尽可能避免使用它们——它们产生的问题比解决的问题多。使用两个表，您可以将所有字段声明为非 NULL 并忘记 NULL 处理。使用一个表选项，您必须手动编写代码以确保 if `item_type=product`，则 Product-specific 字段不为 NULL，并且 Service-specific 字段为，并且 if `item_type=service`，则 Service-specific 字段不为 NULL，并且 Product-specific 字段是。这不是一件令人愉快的工作，DBMS 无法为您完成（`NOT NULL IF another_field = value`SQL 中没有列约束或类似的东西）。

去两张桌子。更容易支持。我曾经看到一个数据库，其中*所有内容*，每条数据都只放在两个表中 - 有几页和几页代码来确保必要的字段不为 NULL。

# r - R MongoDB 命令错误使 R 会话崩溃

> ID：13928277
> 
> 赞同：0
> 
> 时间：2012-12-18T07:28:55.400
> 
> 标签：r, debugging, mongodb, malloc, runtime-error

这不是一个问题，而是帮助诊断和解决问题的请求。

使用以下代码的最新 (1.0.2) 版本`rmongodb`会使 Mac OS X 上的 R 2.15.2 会话崩溃。该代码在不同的 Mac OS X 机器上的 R 2.15.1 中工作。

```
library(rmongodb)
mongo <- mongo.create('127.0.0.1', db='test')
print(mongo.is.connected(mongo))
mongo.find.one(mongo, 'unknown') 
```

输出是：

```
> library(rmongodb)
rmongodb package (mongo-r-driver) loaded
Use 'help("mongo")' to get started.

> mongo <- mongo.create('127.0.0.1', db='test')
> print(mongo.is.connected(mongo))
[1] TRUE
> mongo.find.one(mongo, 'unknown')
R(60519) malloc: *** error for object 0x7fff5fbfce10: pointer being freed was not allocated
*** set a breakpoint in malloc_error_break to debug
Abort trap: 6 
```

如果您将不存在的命令传递给 MongoDB，则会发生相同类型的崩溃。同样，这曾经在 R 2.15.1 下工作。

```
> library(rmongodb)
> mongo <- mongo.create('127.0.0.1', db='test')
> mongo.command(mongo, 'test', list(isMaster=1))
    ismaster : 8     true
    maxBsonObjectSize : 16   16777216
    ok : 1   1.000000
> mongo.command(mongo, 'test', list(fake=1))
R(66743) malloc: *** error for object 0x7fff5fbfde20: pointer being freed was not allocated
*** set a breakpoint in malloc_error_break to debug
Abort trap: 6 
```

我在项目中[创建了一个问题](https://github.com/gerald-lindsly/rmongodb/issues/11)`rmongodb`，希望能帮助确定和验证问题的范围，以使包开发人员能够深入了解需要修复的内容，或者证明这不是`rmongodb`问题，而是我的环境中的一些奇怪的交互。

我将接受在 Mac OS X 上的 2.15.1 和 2.15.2 上或 Mac OS X 上的 2.15.2 和至少一个其他环境上运行代码的人的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T08:05:02.387

[根据包作者的说法，](https://github.com/gerald-lindsly/rmongodb/issues/11#issuecomment-11476965)此问题已在 GitHub 上修复，但 CRAN 尚未更新。

# java - 为什么我的文本颜色不再变为白色？

> ID：13928279
> 
> 赞同：3
> 
> 时间：2012-12-18T07:29:05.393
> 
> 标签：java, swing, jframe, jlabel, linear-gradients

![文字颜色](../Images/b0cfa0900e3e2a2b0aa5342aca8f05f0.png)

这幅画值一千字。添加渐变背景**后**
， 我使用 a`JLabel`创建我的 GUI 。 我曾经将颜色更改为所需的渐变，然后再次将颜色更改为白色。 然后我使用来创建所有你看到的按钮。 但是它们是灰色的而不是白色的。**我怎样才能让它再次变白** **`setPaint(gr)``setPaint(Color.white)`
`setupGUI()`** 

 ****```
public class ScreenRecorder extends JFrame{
    public ScreenRecorder(){
        setupGUI();
        this.getContentPane().add(b);
        this.setDefaultCloseOperation(EXIT_ON_CLOSE);
        this.setVisible(true);
        this.setResizable(false);
        this.pack();
    }

    /*This method is used to add components into each other, setting layout, etc*/
    public void setupGUI(){
        play.setPreferredSize(new Dimension(24,24));
        Box controls = Box.createHorizontalBox();
        controls.add(play);
        controls.add(Box.createHorizontalStrut(10));
        controls.add(timerLabel);
        controls.add(Box.createHorizontalStrut(200));
        controls.add(locationLabel);
        b.add(controls);
    }
    /* Creating the gradient background */
    protected class Background extends JPanel{
        @Override
        protected void paintComponent(Graphics g){
            Graphics2D g2D = (Graphics2D) g;
            int w = this.getWidth();
            int h = this.getHeight();
            Color color1 = Color.black;
            Color color2 = Color.DARK_GRAY.brighter();
            GradientPaint gr = new GradientPaint(0,0,color1,0,w/2,color2);
            g2D.setPaint(gr); //Color changes to the gradient color
            g2D.fillRect(0, 0, w, h);
            g2D.setPaint(Color.white); //Color changes to white for JLabel, but doesn't actually change
        }
    }
    /*Creating the combined Play and Pause button using AbstractAction 
     * The displayed icon must change from that of play to pause on click and vice versa*/
    protected class PlayAction extends AbstractAction{
        public PlayAction(){
            this.putValue(AbstractAction.LARGE_ICON_KEY, playIcon);
            this.putValue(SHORT_DESCRIPTION, "Click to Record Video");
        }
        @Override
        public void actionPerformed(ActionEvent e){
            if(isPlay == true){
                isPlay = false;
                play.getAction().putValue(LARGE_ICON_KEY, pauseIcon);
                play.getAction().putValue(SHORT_DESCRIPTION,"Click to Pause Recording");
                ScreenRecorder.this.setState(JFrame.ICONIFIED);
                play.repaint();
            }else{
                isPlay = true;
                play.getAction().putValue(LARGE_ICON_KEY, playIcon);
                play.getAction().putValue(SHORT_DESCRIPTION,"Click to Start Recording");
                play.repaint();
            }
        }
        boolean isPlay = true; //true represents recorder is ready, false means it is currently recording
        Icon playIcon = (Icon) new ImageIcon("src/images/play.png");
        Icon pauseIcon = (Icon) new ImageIcon("src/images/pause.png");
    }
    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable(){
            @Override
            public void run(){
                new ScreenRecorder();
            }
        });
    }
    Background b = new Background();
    JButton play = new JButton(new PlayAction());
    JLabel timerLabel = new JLabel("00:00",JLabel.CENTER);
    JLabel locationLabel = new JLabel("Into: ",JLabel.LEFT);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T07:35:30.207

尝试

```
setColor(Color.white); 
```

以及

> Graphics 类只定义了 setColor 方法来控制要绘制的颜色。由于 Java 2D API 扩展了 Color 对象以实现新的 Paint 接口，因此现有的 setColor 方法现在是一种将当前 Paint 属性设置为 Color 对象的便捷方法。setColor(c) 等价于 setPaint(c)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T07:46:42.760

![在此处输入图像描述](../Images/ee9e9bba452c1f11b19d525e05a1665a.png)

```
import java.awt.*;
import java.awt.event.ActionEvent;
import javax.swing.*;

public class JavaGui129 extends JFrame{
    public JavaGui129(){
        setupGUI();
        this.getContentPane().add(b);
        this.setDefaultCloseOperation(EXIT_ON_CLOSE);
        this.setVisible(true);
        this.setResizable(false);
        this.pack();
    }

    /*This method is used to add components into each other, setting layout, etc*/
    public void setupGUI(){
        //play.setPreferredSize(new Dimension(24,24));
        Box controls = Box.createHorizontalBox();
        controls.add(play);
        controls.add(Box.createHorizontalStrut(10));
        // Red letter day..
        timerLabel.setForeground(Color.RED);
        controls.add(timerLabel);
        controls.add(Box.createHorizontalStrut(200));
        locationLabel.setForeground(Color.GREEN);
        controls.add(locationLabel);
        b.add(controls);
    }
    /* Creating the gradient background */
    protected class Background extends JPanel{
        @Override
        protected void paintComponent(Graphics g){
            // very important! 
            super.paintComponent(g);
            Graphics2D g2D = (Graphics2D) g;
            int w = this.getWidth();
            int h = this.getHeight();
            Color color1 = Color.black;
            Color color2 = Color.DARK_GRAY.brighter();
            GradientPaint gr = new GradientPaint(0,0,color1,0,w/2,color2);
            g2D.setPaint(gr); //Color changes to the gradient color
            g2D.fillRect(0, 0, w, h);
            // irrelevant now
            //g2D.setPaint(Color.white); //Color changes to white for JLabel, but doesn't actually change
        }

        @Override 
        public Dimension getPreferredSize() {
            return (new Dimension(400,100));
        }
    }
    /*Creating the combined Play and Pause button using AbstractAction 
     * The displayed icon must change from that of play to pause on click and vice versa*/
    protected class PlayAction extends AbstractAction{
        public PlayAction(){
            this.putValue(AbstractAction.LARGE_ICON_KEY, playIcon);
            this.putValue(SHORT_DESCRIPTION, "Click to Record Video");
        }
        @Override
        public void actionPerformed(ActionEvent e){
            if(isPlay == true){
                isPlay = false;
                play.getAction().putValue(LARGE_ICON_KEY, pauseIcon);
                play.getAction().putValue(SHORT_DESCRIPTION,"Click to Pause Recording");
                JavaGui129.this.setState(JFrame.ICONIFIED);
                play.repaint();
            }else{
                isPlay = true;
                play.getAction().putValue(LARGE_ICON_KEY, playIcon);
                play.getAction().putValue(SHORT_DESCRIPTION,"Click to Start Recording");
                play.repaint();
            }
        }
        boolean isPlay = true; //true represents recorder is ready, false means it is currently recording
        Icon playIcon = (Icon) new ImageIcon("src/images/play.png");
        Icon pauseIcon = (Icon) new ImageIcon("src/images/pause.png");
    }
    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable(){
            @Override
            public void run(){
                new JavaGui129();
            }
        });
    }
    Background b = new Background();
    JButton play = new JButton(new PlayAction());
    JLabel timerLabel = new JLabel("00:00",JLabel.CENTER);
    JLabel locationLabel = new JLabel("Into: ",JLabel.LEFT);
} 
```****

# javascript - 在 nvd3.js 中编辑多条形图中的标签文本

> ID：13928291
> 
> 赞同：3
> 
> 时间：2012-12-18T07:29:59.380
> 
> 标签：javascript, json, d3.js, label, nvd3.js

我观察到 multibarchart in`nvd3.js`需要以下 JSON 格式输入。

```
[
  {
    "key": "abcd",
    "values": [
      {
        "x": 1221578789000,
        "y": 40
      },
      {
        "x": 1222578789000,
        "y": 103
      },
      {
        "x":1224181799000,
        "y": 35
      }
    ]
  }
] 
```

但是，我想有带有 DateTimestamp 的 x 标签。'x' 是否必须只有 int/long 数据类型？

话虽如此，我尝试在代码中将长数据类型转换为日期时间戳`nvd3.js`。

```
nv.models.axis = function() {    
  {code block}
  switch (axis.orient()) {
    case 'bottom':
      {code block}
      if (showMaxMin) {
      //if (showMaxMin && !isOrdinal) {
        var axisMaxMin = wrap.selectAll('g.nv-axisMaxMin')
            //.data(scale.domain())
            .data([scale.domain()[0], scale.domain()[scale.domain().length - 1]]);
        axisMaxMin.enter().append('g').attr('class', 'nv-axisMaxMin').append('text');
        axisMaxMin.exit().remove();
        axisMaxMin.attr('transform', function(d,i) {
            return 'translate(' + (scale(d) +
                    (isOrdinal ? scale.rangeBand() / 2 : 0)) + ',0)'
          })
          .select('text')
          .attr('dy', '.71em')
          .attr('y', axis.tickPadding())
          .attr('transform', function(d,i,j) {
             return 'rotate('+ rotateLabels + ' 40,60)'
          })
          .attr('text-anchor', rotateLabels ? (rotateLabels%360 > 0 ?
                                               'start' : 'end') : 'middle')
          .text(function(d,i) {
            **var dat = new Date(d);**                  
            **return dat.toUTCString();**
            //return v;
          });

          d3.transition(axisMaxMin)
            .attr('transform', function(d,i) {
              //return 'translate(' + scale.range()[i] + ',0)'
              //return 'translate(' + scale(d) + ',0)'
              return 'translate(' + (scale(d) + (isOrdinal ?
                                scale.rangeBand() / 2 : 0)) + ',0)'
          });
      }
   }
} 
```

通过这种更改，我能够将 MaxMin 'x labels' 转换为 Datetime stamp。但我无法找到对刻度标签进行相同转换的位置（'min x' 和 'max x' 轴之间的标签显示长值本身）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T06:23:23.060

在图表对象中进行必要的更改解决了这个问题。

```
var chart = nv.models.multiBarChart();

chart.xAxis
    .showMaxMin(true)
    .rotateLabels(440)
    .tickFormat(function(d) {
                     return d3.time.format('%x')(new Date(d))
                   }); 
```

# c# - 从列表中选择特定项目 通过其变量之一

> ID：13928296
> 
> 赞同：2
> 
> 时间：2012-12-18T07:30:18.097
> 
> 标签：c#, list, class

我有一个`List<> Generic`。泛型类内部有变量，例如`variable1`, `variable2`, `variable3`....

我想创建一个*泛型*类的新实例，其值来自此列表中的特定项目，其中泛型的`variable3 = some value`

谢谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T07:32:43.363

```
GenericClass item = yourList.FirstOrDefault(r=> r.variable3 == "somevalues"); 
```

如果您只需要选择一个符合条件的项目，那么您可以使用，

*   [First()](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.first.aspx)返回列表中的第一项，如果没有找到则抛出异常
*   [FirstOrDefault()](http://msdn.microsoft.com/en-us/library/bb340482.aspx)返回列表中的第一项或默认值
*   [Single()](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.single.aspx)返回列表中唯一的项目，如果多个项目符合条件或没有一个项目符合条件，则将引发异常
*   [SingleOrDefault()](http://msdn.microsoft.com/en-us/library/bb342451.aspx)返回列表中唯一的项目，如果有多个项目满足条件，则抛出异常，如果没有找到，则返回默认值
*   [Last()](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.last.aspx)返回列表中的最后一项，或者抛出 none found 的异常
*   [LastOrDefault()](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.lastordefault.aspx)返回列表中的最后一项或默认值

# html - 保留 HTML 表格内容中的换行符

> ID：13928299
> 
> 赞同：0
> 
> 时间：2012-12-18T07:30:41.260
> 
> 标签：html

我有一个表格，显示可以编辑的内容。用户可以插入换行符，这必须反映在表格中（即应该保留换行符。）。我使用`white-space:preline` 的适用于 IE-8、FF 等。但在 IE-7 中，不显示换行符。我尝试使用`word-wrap:break-word`但它仍然对我不起作用......

任何帮助，将不胜感激..

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T07:32:54.120

[该表](http://www.quirksmode.org/css/whitespace.html)表明`whitespace:pre`比 更广泛地支持`white-space:preline`。如果您不介意保留其他空格（制表符、多个空格等），您可以尝试使用它。

# vb.net - 使用背景颜色打印 webbrowsercontrol

> ID：13928309
> 
> 赞同：0
> 
> 时间：2012-12-18T07:31:46.877
> 
> 标签：vb.net, browser, printing, background

我在运行时生成代码并将其输入 webbrowser1.Document 以进行显示。

我需要打印一些带有彩色单元格的表格。默认情况下，网络浏览器不打印背景颜色。有没有办法覆盖它？因为我是通过运行时生成代码，所以我不能使用图像作为背景。

printscreen 也不是一个选项，因为页面大于网络浏览器本身的大小。

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T17:38:40.917

我通过在运行时编辑寄存器解决了这个问题！编辑寄存器，打印，恢复寄存器.. :)

# jquery - 停止滚动绑定功能，直到 AJAX 请求成功

> ID：13928310
> 
> 赞同：0
> 
> 时间：2012-12-18T07:31:49.617
> 
> 标签：jquery, asynchronous, semaphore

我在 jQuery 中做一个无限滚动的脚本，看起来像这样：

```
$(window).scroll(function(){
  if($(window).scrollTop() >= $(document).height() - $(window).height() - 50){

    // If we have not loaded all pages yet
    if($('#feed').data('pagesloaded') != 0){
      var toload = $('#feed').data('pagesloaded') + 1;

      $.post("/feed/" + toload, { 'ignore': showed_posts_id }, function(html){
        if(html){
          $('#feed')
            .data('pagesloaded', toload)
            .append(html);
        }else{
          // If all pages are loaded, disable infinite scrolling
          $('#feed').data('pagesloaded', 0);
        }
      });

    }
  }
}); 
```

哪里`50`是触发事件的底部的像素偏移量。但是，当滚动到页面底部时，该函数会在偏移量从 50 变为 0 时多次触发，这会导致所有页面同时加载。

我听说过将事件绑定到 $(window).ajaxStart() 和 .ajaxStop() 的技术，但是由于我的应用程序中正在进行大量异步 ajax，它会干扰无限滚动。这就是我所说的：

```
var ajaxRunning = false;
$(window).ajaxStart(function () {
  ajaxRunning = true;
}).ajaxStop(function () {
  ajaxRunning = false;
}); 
```

我曾想过放置一个简单的二进制信号量来检查 $.post 是否仍在继续，但我想知道这是否是不好的做法。最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T07:57:58.547

我终于通过在 $(window) 上放置一个简单的数据标志来完成它。如果有人认为这是不好的做法并且知道更有效的方法，我会很高兴听到它！

```
$(window).scroll(function(){
  if($('#feed').data('pagesloaded') != 0 && !$(window).data('infinite-scroll-async')){
    if($(window).scrollTop() >= $(document).height() - $(window).height() - 50){

      // Locks the function
      $(window).data('infinite-scroll-async', true);

      var toload = $('#feed').data('pagesloaded') + 1;

      $.post("/feed/" + toload, { 'ignore': showed_posts_id }, function(html){

        if(html){
          $('#feed')
            .data('pagesloaded', toload)
            .append(html);
        }else{
          // If all pages are loaded, disable infinite scrolling
          $('#feed').data('pagesloaded', 0);
        }

      }).complete(function(){

        // Unlocks the function
        $(window).data('infinite-scroll-async', false);

      });

    }
  }
}); 
```

# android - Glassfish服务器通过android发送JSONObject时抛出异常

> ID：13928314
> 
> 赞同：0
> 
> 时间：2012-12-18T07:32:22.350
> 
> 标签：android, json, vaadin

当我通过 android 发送 json 对象时，服务器正在抛出`NullPointerException`。描述是这样的：设备拍照并将其转换为字节数组`Base64.java`，然后转换为字符串。然后将该字符串放入`JSONObject`并发送到服务器。但是服务器正在抛出`NullPointerException`. 我的服务器应用程序是用`vaadin`.

以下是android中用于将图像转换为的代码`Byte[]`：

```
Bitmap bitmap = BitmapFactory.decodeFile(path);
ByteArrayOutputStream baos = new ByteArrayOutputStream();
bitmap.compress(Bitmap.CompressFormat.PNG, 50, baos);
**byte[] ba = baos.toByteArray();
String bal = Base64.encodeBytes(ba);** 
```

发送`JSONObject`到服务器的代码：

```
HttpClient client = new DefaultHttpClient();
JSONObject jsonObject=new JSONObject();
try {
    jsonObject.putOpt("imageName", imageNm);
    jsonObject.put("imageSend", bal);
} catch (JSONException e1) {
    // TODO Auto-generated catch block
    e1.printStackTrace();
}

serverUrl = serverUrl+"UploadImage" ;
HttpPost post = new HttpPost(serverUrl);
HttpResponse httpResponse = null;
try {           
    StringEntity entity=new StringEntity(jsonObject.toString());
    entity.setContentType("application/json;char-set=UTF-8");
    entity.setContentEncoding(new BasicHeader(HTTP.CONTENT_TYPE,"application/json;char-set=UTF-8"));
    post.setEntity(entity);
    httpResponse = client.execute(post);
    response = EntityUtils.toString(httpResponse.getEntity());
} catch (ClientProtocolException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

服务器上的异常

```
 [#|2012-12-18       T12:49:43.692+0530|INFO|glassfish         v3.0|javax.enterprise.system.std.com.sun.enterprise.v3.services.impl|_ThreadID=40;   _ThreadName=Thread-1;|Image name : null|#]

[#|2012-12-18T12:49:43.692+0530|SEVERE|glassfishv3.0|com.vaadin.Application|_ThreadID=40;   _ThreadName=Thread-1;|Terminal error:
 java.lang.NullPointerException
         at java.io.StringReader.<init>(StringReader.java:50)
       at org.json.JSONTokener.<init>(JSONTokener.java:83)
       at org.json.JSONObject.<init>(JSONObject.java:310)
        at handlers.SPTURIHandler.handleURI(SPTURIHandler.java:91)
         at com.vaadin.ui.Window.handleURI(Window.java:424)
         at        com.vaadin.terminal.gwt.server.AbstractCommunicationManager.handleURI(AbstractCommunicationManager.java:2274)
         at com.vaadin.terminal.gwt.server.CommunicationManager.handleURI(CommunicationManager.java:348)
    at com.vaadin.terminal.gwt.server.AbstractApplicationServlet.handleURI(AbstractApplicationServlet.java:1093)
    at com.vaadin.terminal.gwt.server.AbstractApplicationServlet.service(AbstractApplicationServlet.java:535)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1523)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:188)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:641)
    at com.sun.enterprise.web.WebPipeline.invoke(WebPipeline.java:97)
    at com.sun.enterprise.web.PESessionLockingStandardPipeline.invoke(PESessionLockingStandardPipeline.java:85)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:185)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:332)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:233)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:165)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:791)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:693)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:954)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:170)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:135)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:102)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:88)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:76)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:53)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:57)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:69)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:330)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:309)
    at java.lang.Thread.run(Thread.java:679) 
```

|#]

是不是代码有问题...

# css - CSS如何在悬停时从白色过渡到背景

> ID：13928315
> 
> 赞同：0
> 
> 时间：2012-12-18T07:32:27.347
> 
> 标签：css, background, hover, transition

我正在尝试创建从白色背景到图像背景的过渡。这样，当查看者将鼠标悬停在某个部分上时，它会从普通变为样式。

这是我当前的代码：

```
div.camp {
     background: #FFFFFF;
      border: 1px solid #CCCCCC; 
      border-radius: 8px; 
     padding: 8px; 
      transition: all 1s linear 0s;
  }
div.camp:hover {
      background: #EFFFD5 url("http://www.alpinejosh.com/host/sp/images/camp.png"); 
        background-position: center bottom; 
       background-repeat: repeat-x; 
    border: 1px solid #CECECE;
  } 
```

这是此代码所在的页面： http: [//www.summitpost.org/eldorado-peak/150316#chapter_7](http://www.summitpost.org/eldorado-peak/150316#chapter_7)

据我了解，背景颜色过渡很容易。但似乎不支持背景图像进行过渡。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T07:47:43.543

不幸的是，您不能以您指定的方式在背景图像上使用过渡。您可以在[此处查看 W3C 动画属性类型列表](http://www.w3.org/TR/css3-transitions/#animation-of-property-types-)。

您可以将白色背景放在顶部，然后在悬停时为其不透明度设置动画（以显示下方的图像）。

**代码示例**

你显然可以让这个更漂亮。我只是拼凑一些东西给你一个想法。

```
div.camp {
  border: 1px solid #CCCCCC; 
  background: #EFFFD5 url("http://www.alpinejosh.com/host/sp/images/camp.png"); 
  background-position: center bottom; 
  background-repeat: repeat-x; 
  border-radius: 8px; 
  position: relative;
}

div.camp-overlay {
  padding: 8px;
  border-radius: 8px;
  position: absolute;
  z-index:50;
  width: 100%;
  height: 100%;
  background:white;
  -webkit-transition: all 1s ease-in-out;
  -moz-transition: all 1s ease-in-out;
  -o-transition: all 1s ease-in-out;
  transition: all 1s ease-in-out;
}

div.camp-overlay:hover {
  background: rgba(255,255,255,0);  /* use opacity for older browsers*/
}​​​​​​​​​​​​​ 
```

**上述 CSS 的 HTML**

```
<div class="camp">
    <div class="camp-overlay"></div>
</div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

**以上的JSFiddle**

[http://jsfiddle.net/p7mcy/](http://jsfiddle.net/p7mcy/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T07:56:32.070

您可以做的是制作两个 div 元素，一个在另一个之上，然后在悬停时将顶部 div 淡出。

```
<div class="wrapper">
    <div class="image"></div>
    <div class="white-bg"></div>
</div>

.wrapper{position:relative;}
.image, .white-bg{position:absolute; top:0; left:0; width:100px; height:50px;}
.image{background:red;}
.white-bg{background:white; z-index:9999; -webkit-transition:opacity 0.3s linear; opacity:1;}
.white-bg:hover{opacity:0;}​ 
```

应该工作小提琴：http: [//jsfiddle.net/b46z8/5/](http://jsfiddle.net/b46z8/5/)

# objective-c - 我不能用我的 NSObject 类的变量设置数组

> ID：13928317
> 
> 赞同：0
> 
> 时间：2012-12-18T07:32:28.993
> 
> 标签：objective-c

我试图弄清楚如何使用其他类的变量设置数组。我有一个`NSObject`名为 myObject 的类，我在其中声明了类型为 myInt 和 mySecondInt 的变量`int`。

然后我导入 myObject 并尝试设置这样的数组：

```
MyObject *object = [[MyObject alloc]init];

    object.myInt = 50;
    object.mySecondInt = 15;

    object.array = [[NSArray alloc]initWithObjects:object.mySecondInt,object.myInt, nil]; 
```

然后我得到一个错误：弧不允许隐式`'int'`转换`'id'`

请帮我解决这个问题，我正在学习objective-c，我想知道如何管理其他类的变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T07:36:49.570

对于原语，您需要一个包装类以允许将它们存储为对象。

前任。

```
[[NSArray alloc]initWithObjects:[NSNumber numberWithInt:object.mySecondInt],[NSNumber numberWithInt:object.myInt], nil]; 
```

`NSArray`stores `id`，它们是通用指针（对象引用）。基元不属于这一类，Objective-C 不支持自动装箱。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T07:39:18.363

NSArray 只能保存对象（NSObject 或其子类的实例），但 myInt 和 mySecondInt 是 C int 值，而不是对象。

你可以这样做：

```
object.array = [[NSArray alloc]initWithObjects:[NSNumber numberWithInt:object.mySecondInt],[NSNumber numberWithInt:object.myInt], nil]; 
```

或者如果你使用新的 Xcode，你可以简单地这样写：

```
object.array = @[@50,@15]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T07:39:51.663

`NSArray`保存对象，myInt 和 mySecondInt 是 int 值，而不是对象。您可以将其类型转换为`NSNumber`或`NSString`。如果您将其键入`NSString`然后`intValue`在使用它时访问它。另一种方法是将整个对象添加到数组中，然后从数组中检索对象，然后访问其实体，这是更好的解决方案，而不是添加单个实体。

# eclipse - 用于多用户环境的 Eclipse 自定义 C/C++ 代码样式配置文件

> ID：13928319
> 
> 赞同：0
> 
> 时间：2012-12-18T07:32:36.593
> 
> 标签：eclipse, eclipse-plugin, formatting, eclipse-cdt, preferences

我的开发人员正在使用带有 CDT 7 的 Eclipse Helios。我正在为这个环境编写 Eclipse 插件。我使用名为“我的配置文件”的新设置创建了自定义 C/C++ 代码样式配置文件。“我的配置文件”配置文件已创建，它位于“org.eclipse.cdt.core.prefs”首选项文件中。

我想将此“我的个人资料”配置文件设置为多用户环境（即全局）作为默认配置文件。

1.  如何在 Eclipse 启动时执行此操作？

2.  如何在我的 Eclipse 插件启动时执行此操作？

1) 的答案更可取，因为全局首选项易于维护。你能帮我解决这个问题吗？非常感谢您的回复！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T04:56:52.553

这是我正在寻找的链接

[http://www.eclipse.org/forums/index.php/m/760047/?srch=profilemanager.addProfile#msg_760047](http://www.eclipse.org/forums/index.php/m/760047/?srch=profilemanager.addProfile#msg_760047)

# ruby-on-rails - 如何在 sqlite where 子句中使用 Levenshtein 距离函数？

> ID：13928320
> 
> 赞同：10
> 
> 时间：2012-12-18T07:32:40.233
> 
> 标签：ruby-on-rails, sqlite, levenshtein-distance

我正在尝试实现“您的意思是？” 搜索功能。

我正在尝试使用 levenshtein 函数进行查询，该函数是用 ruby​​ 编写的。我想知道如何在 sqlite3 查询中使用这个函数。我在想它可能是这样的：

`@results = the_db.where('levenshtein(name, ?) <= 3', searchphrase)`

但我不知道如何让它工作。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T07:39:23.010

试试这个`editdist3`功能：

> editdist3 算法是一个计算两个输入字符串之间的最小编辑距离（又名 Levenshtein 距离）的函数。

*   [http://www.sqlite.org/spellfix1.html](http://www.sqlite.org/spellfix1.html)

# c++ - BlackBerry-10 连接功能出错

> ID：13928326
> 
> 赞同：0
> 
> 时间：2012-12-18T07:32:57.550
> 
> 标签：c++, http, blackberry-10

您好我正在尝试发送 HTTP GET 请求并使用函数接收结果。但我收到此错误：

> 调用 'HttpNetworkRequest::connect(QNetworkAccessManager*&, const char*, RequestFinishFunction&, const char*)' 没有匹配的函数

连接函数在这个 HttpNetworkRequest.cpp 文件中

```
#include "HttpNetworkRequest.hpp"
#include <QObject>
#include <QIODevice>
#include <QDir>

#include <bb/cascades/Application>
#include <bb/cascades/QmlDocument>
#include <bb/cascades/AbstractPane>
#include <bb/cascades/XmlDataModel>
#include <RequestFinishFunction.hpp>
using namespace bb::cascades;

HttpNetworkRequest::HttpNetworkRequest(bb::cascades::Application *app)
: QObject(app)
{
QNetworkRequest networkRequest = QNetworkRequest();
networkRequest.setUrl(QUrl("http://www.blackberry.com"));
RequestFinishFunction req;
QNetworkAccessManager *networkAccessManager = new QNetworkAccessManager;
bool res =        connect(networkAccessManager,SIGNAL(finished(QNetworkReply*)),
    req,SLOT(requestFinished()));
Q_ASSERT(res);
Q_UNUSED(res);
networkAccessManager->get(networkRequest);
} 
```

包含的 RequestFinishFunction.hpp

```
#ifndef REQUESTFINISHFUNCTION_HPP_
#define REQUESTFINISHFUNCTION_HPP_
#include <bb/cascades/ActivityIndicator>
#include <QObject>
#include <QObject>
class RequestFinishFunction : QObject
{
public slots:
void requestFinished(QNetworkReply* reply);
};
#endif /* REQUESTFINISHFUNCTION_HPP_ */ 
```

RequestFinishFunction.cpp 文件是

```
#include <bb/cascades/ActivityIndicator>
#include <QObject>
#include <QObject>
#include <RequestFinishFunction.hpp>
void RequestFinishFunction::requestFinished(QNetworkReply* reply)
{
    reply->deleteLater();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T08:29:27.370

连接方法的语法

> bool QObject::connect ( const QObject * sender, const char * signal, const QObject * receiver, const char * method, Qt::ConnectionType type = Qt::AutoConnection )

我们必须传递发送者和接收者的***引用。***

您没有发送接收者的参考。您有两种选择。

1) 在 connect 方法调用中使用 & 运算符发送 req 的引用

代替

> 连接（networkAccessManager，SIGNAL（完成（QNetworkReply *）），req，SLOT（requestFinished（）））；

和

> 连接(networkAccessManager,SIGNAL(完成(QNetworkReply*)), &req,SLOT(requestFinished()));

**或者**

2) 将 req 声明为指针

代替

> RequestFinishFunction 请求；

和

> 请求完成函数 *req;

# c# - 求和、减法和乘法数组

> ID：13928327
> 
> 赞同：4
> 
> 时间：2012-12-18T07:33:14.693
> 
> 标签：c#

我有以下数组：

```
int[,] myArray1 = new int[2, 3] { { 1, 2, 3 }, { 4, 6, 8 } };
int[,] myArray2 = new int[2, 3] { { 6, 4, 3 }, { 8, 2, 8 } }; 
```

我想知道该怎么做是：

1.  **用 myArray1 和 myArray2 之和创建一个新数组**
2.  **用 myArray1 和 myArray2 的减法创建一个新数组**
3.  **使用 myArray1 和 myArray2 的乘法创建一个新数组**

sum 的结果是：

```
int[,] myArray3 = new int[2, 3] { { 7, 6, 0 }, { -4, 4, 0 } }; 
```

减法的结果是：

```
int[,] myArray3 = new int[2, 3] { { 5, 2, 6 }, { 12, 8, 16 } }; 
```

乘法的结果将是：

```
int[,] myArray3 = new int[2, 3] { { 6, 8, 9 }, { 32, 12, 64 } }; 
```

这可以类似于使用 for 循环打印出数组吗？我尝试寻找示例，但没有找到可用于解决特定问题的示例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T08:17:05.760

```
int[,] a3 = new int[2,3];

for(int i = 0; i < myArray1.GetLength(0); i++)
{
for(int j = 0; j < myArray1.GetLength(1); j++)
{
a3[i,j] = myArray1[i,j] + myArray2[i,j];
a3[i,j] = myArray1[i,j] - myArray2[i,j];
a3[i,j] = myArray1[i,j] * myArray2[i,j];
}
} 
```

need to store a3 before doing a new calculation obviously

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T08:15:15.593

For **Sum**:

```
for (int i = 0; i < 2; i++)
        {
            for (int j = 0; j < 3; j++)
            {
                myArray3[i, j] = myArray1[i, j] + myArray2[i, j];
            }                
        } 
```

For **Subtraction**:

```
for (int i = 0; i < 2; i++)
        {
            for (int j = 0; j < 3; j++)
            {
                myArray3[i, j] = myArray2[i, j] - myArray1[i, j];
            }                
        } 
```

For **Multiplication**:

```
for (int i = 0; i < 2; i++)
        {
            for (int j = 0; j < 3; j++)
            {
                myArray3[i, j] = A[i, j] * B[i, j];
            }
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T07:41:30.017

是的，这就像用 for 循环打印出数组一样

c# 有 foreach 循环，这将更容易使用

注意：我知道这是为了家庭作业，所以我不会给出一个 100% 的结论性的全部答案。

```
 int[,] myArray1 = new int[2, 3] { { 1, 2, 3 }, { 4, 6, 8 } };
 int[,] myArray2 = new int[2, 3] { { 6, 4, 3 }, { 8, 2, 8 } };

          foreach (int[] a1 in myArray1) 
          {
             foreach(int i in a1)
             {
                //operation here
                //you get the idea
             }        
          } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-02-26T23:56:17.550

If you want to do array manipulation **faster** use the **C# Parallel.For** loop from **System.Threading.Tasks**:

For simple arithmetic parallelizing the outer loop is much faster than not on a modern PC processor. For more complex operations, or for small array sizes, the parallel version can be slower for various reasons.

Thus, use a stopwatch to time your matrix operations, and use the fastest solution. Parallelization makes doing array / **image processing in C#** much faster if implemented right.

Beware of overflowing your datatypes after arithmetic operations and also sharing variables between multiple threads (see **System.Threading.Interlocked** for help with that)...

Subtraction below. Similar for addition and multiplication:

```
Parallel.For(0, array.GetLength(1), y=>
{
    for (int x = 0; x < array.GetLength(0); x++)
        {
            difference[x,y] = minuend[x,y] - subtrahend[x,y];
        }
    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-18T07:56:03.350

If you want to use a for loop, you can iterate through the rows/columns of the multi-d array as follows:

```
for (int i = 0; i < myArray1.GetLength(0); i++)
{
    for (int j = 0; j < myArray1.GetLength(1); j++)
    {
        // Here, you can access the array data by index, using i and j. 
        // Ex, myArray1[i, j] will give you the value of 1 in the first iteration.
    }
} 
```

Note: When you pass a value into the Array's GetLength method, it represents the dimension of the array. See [http://msdn.microsoft.com/en-us/library/system.array.getlength.aspx](http://msdn.microsoft.com/en-us/library/system.array.getlength.aspx)

# google-sheets - 过滤函数作为查询函数的数据源

> ID：13928331
> 
> 赞同：2
> 
> 时间：2012-12-18T07:33:44.120
> 
> 标签：google-sheets, google-spreadsheet-api

有没有办法使用 Filter 函数的输出作为查询函数的数据源，以便根据部分数据生成数据透视？我不能在查询的 where 子句中使用条件的原因是条件的数据在行中，而不是在列中。

类似于：Query(Filter(A1:Q100;A2:Q2="Yes");"Select ... where ... pivot ...")

请注意，标准基于所有数据中的 A2:Q2 行。

或者也许有一些更好的方法来解决这个问题，我错过了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T11:26:59.347

您可以这样做，但是在 where 子句字符串中，您可能无法引用列，因为（我猜）FILTER 函数的输出可能会发生变化。您可能需要扩展您的特定用例以获得有关最佳方法的建议。

# php - 如何仅跟踪非内置函数或类方法

> ID：13928332
> 
> 赞同：0
> 
> 时间：2012-12-18T07:33:46.373
> 
> 标签：php, xdebug

如何仅将非内置函数或类方法跟踪到文件中？

我使用过 xdebug，但它似乎跟踪了所有内置或非内置函数的函数。Xdebug 是否具有以这种方式处理跟踪的功能，或者有人可以引入一些工具来满足我的需要吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T13:29:30.220

您可以构建一个内置函数列表（使用 get_defined_functions）并将它们剥离。xdebug 跟踪格式是一种文本格式。

# android - 从 MediaStore 将图像异步下载到 gridview

> ID：13928335
> 
> 赞同：0
> 
> 时间：2012-12-18T07:33:53.030
> 
> 标签：android, listview, image-processing, asynchronous, mediastore

我有大约 1500 张图像的网格视图。我正在使用 MediaStore 中的缩略图来显示它们。但是当我在 UI 线程中填充网格时，它第一次工作得太慢了（还没有创建缩略图？）。所以我决定把这个过程移到后台。使用本[教程](http://android-developers.blogspot.com/2010/07/multithreading-for-performance.html)和另一个我编写了这个类：

```
public class ImageLoader {
// -----------------------------------------------------------------------
//
// Fields
//
// -----------------------------------------------------------------------
private static Context mContext;
private static ImageLoader mImageLoader = new ImageLoader();
// -----------------------------------------------------------------------
//
// Static methods
//
// -----------------------------------------------------------------------
public static void init(Application application){
    mContext = application;
}

public static ImageLoader getInstance(){
    return mImageLoader;
}

// -----------------------------------------------------------------------
//
// Methods
//
// -----------------------------------------------------------------------
public void download(ImageView imageView, final long id) {
    Boolean b = cancelPotentialDownload(id, imageView);
    Log.v("Loader", "download " + b.toString());
    if (b) {
        DownloadImageTask task = new DownloadImageTask(imageView, id);
        DownloadedDrawable downloadedDrawable = new DownloadedDrawable(task);
        imageView.setImageDrawable(downloadedDrawable);
        task.execute();
    }
}

// -----------------------------------------------------------------------
//
// Inner classes
//
// -----------------------------------------------------------------------
private class DownloadImageTask extends AsyncTask<Void, Void, Bitmap>{
    private final WeakReference<ImageView> iv;
    private final long id;

    public DownloadImageTask(ImageView imageView, long id){
        iv = new WeakReference<ImageView>(imageView);
        this.id = id;
    }

    @Override
    protected Bitmap doInBackground(Void... params) {
        Bitmap bitmap = downloadImageThumbnail(id);
        return bitmap;
    }

    @Override
    protected void onPostExecute(Bitmap result) {
         Log.v("Task", "completed " + (result == null)); 
         if (iv != null) {
                ImageView imageView = iv.get();
                DownloadImageTask bitmapDownloaderTask = getDownloadImageTask(imageView);
                // Change bitmap only if this process is still associated with it
                if (this == bitmapDownloaderTask) {
                    imageView.setImageBitmap(result);
                }
            }
    }
}

static class DownloadedDrawable extends ColorDrawable {
    private final WeakReference<DownloadImageTask> downloadImageTaskReference;

    public DownloadedDrawable(DownloadImageTask downloadImageTask) {
        super(Color.TRANSPARENT);
        downloadImageTaskReference = new WeakReference<DownloadImageTask>(downloadImageTask);
    }

    public DownloadImageTask getDownloadImageTask() {
        return downloadImageTaskReference.get();
    }
}

// -----------------------------------------------------------------------
//
// Private static helper methods
//
// -----------------------------------------------------------------------
private static boolean cancelPotentialDownload(long id, ImageView imageView) {
    DownloadImageTask downloadImageTask = getDownloadImageTask(imageView);

    if (downloadImageTask != null) {
        long imageId = downloadImageTask.id;
        if ((imageId == 0) || (imageId != id)) {
            Boolean b = downloadImageTask.cancel(true);
            Log.v("Task", "Stopped " + b.toString());
        } else {
            // The same URL is already being downloaded.
            return false;
        }
    }
    return true;
}

private static DownloadImageTask getDownloadImageTask(ImageView imageView) {
    if (imageView != null) {
        Drawable drawable = imageView.getDrawable();
        if (drawable instanceof DownloadedDrawable) {
            DownloadedDrawable downloadedDrawable = (DownloadedDrawable)drawable;
            return downloadedDrawable.getDownloadImageTask();
        }
    }
    return null;
}
// -----------------------------------------------------------------------
//
// Private helper methods
//
// -----------------------------------------------------------------------
private Bitmap downloadImageThumbnail(long id) {
    Bitmap bitmap = MediaStore.Images.Thumbnails.getThumbnail(mContext.getContentResolver(), id, MediaStore.Images.Thumbnails.MICRO_KIND, null);
    return bitmap;
} 
```

}

但是这么多的图像存在一个问题 - 有很多任务同时运行，所以在活动开始后有一个空白的网格视图，然后突然它变得充满了图像（我已经阅读了 AsyncTask 源并没有'不明白为什么它会这样工作——同时只有一个任务在运行）。还有一个——如果你快速向下滚动一个大的图像列表视图（1500），那么你需要等待太长时间才能看到结果。无论如何，我需要使 gridview 顺利填充。所以我决定自己管理任务并做了一些修改：

```
private static final int POOL_CAPACITY = 10;
// -----------------------------------------------------------------------
//
// Fields
//
// -----------------------------------------------------------------------
private static Context mContext;
private static ImageLoader mImageLoader = new ImageLoader();

private static ArrayList<DownloadImageTask> executingPool = new ArrayList<ImageLoader.DownloadImageTask>();
private static ArrayList<DownloadImageTask> waitingPool = new ArrayList<ImageLoader.DownloadImageTask>();
// -----------------------------------------------------------------------
//
// Static methods
//
// -----------------------------------------------------------------------
public static void init(Application application){
    mContext = application;
}

public static ImageLoader getInstance(){
    return mImageLoader;
}

// -----------------------------------------------------------------------
//
// Methods
//
// -----------------------------------------------------------------------
public void download(ImageView imageView, final long id) {
    Boolean b = cancelPotentialDownload(id, imageView);
    Log.v("Loader", "download " + b.toString());
    if (b) {
        DownloadImageTask task = new DownloadImageTask(imageView, id);
        Log.v("Loader","download " + task.hashCode() + " ex size " + executingPool.size() + " wa size " + waitingPool.size());
        DownloadedDrawable downloadedDrawable = new DownloadedDrawable(task);
        imageView.setImageDrawable(downloadedDrawable);
        addTask(task);
    }
}

private void addTask(DownloadImageTask task){
    Log.v("Loader", "addTask " + task.hashCode() + " ex size " + executingPool.size() + " wa size " + waitingPool.size());
    if(executingPool.size() < POOL_CAPACITY) {
        executingPool.add(task);
        task.execute();
    }
    else
        waitingPool.add(task);
}

private synchronized void executeNext(DownloadImageTask finished){
    Log.v("Loader", "executeNext " + finished.hashCode() + " ex size " + executingPool.size() + " wa size " + waitingPool.size());
    executingPool.remove(finished);
    if(waitingPool.size() > 0){
        DownloadImageTask task = waitingPool.remove(0);
        addTask(task);
    }
}
// -----------------------------------------------------------------------
//
// Inner classes
//
// -----------------------------------------------------------------------
private class DownloadImageTask extends AsyncTask<Void, Void, Bitmap>{
    private final WeakReference<ImageView> iv;
    private final long id;

    public DownloadImageTask(ImageView imageView, long id){
        iv = new WeakReference<ImageView>(imageView);
        this.id = id;
    }

    @Override
    protected Bitmap doInBackground(Void... params) {
        Log.v("Loader", "doInBackground " + this.hashCode() + " ex size " + executingPool.size() + " wa size " + waitingPool.size());
        Bitmap bitmap = downloadImageThumbnail(id);
        return bitmap;
    }

    @Override
    protected void onPostExecute(Bitmap result) {
         Log.v("Task", "completed " + (result == null)); 
         if (iv != null) {
                ImageView imageView = iv.get();
                DownloadImageTask bitmapDownloaderTask = getDownloadImageTask(imageView);
                // Change bitmap only if this process is still associated with it
                if (this == bitmapDownloaderTask) {
                    imageView.setImageBitmap(result);
                }
            }
         executeNext(this);
    }
}

static class DownloadedDrawable extends ColorDrawable {
    private final WeakReference<DownloadImageTask> downloadImageTaskReference;

    public DownloadedDrawable(DownloadImageTask downloadImageTask) {
        super(Color.TRANSPARENT);
        downloadImageTaskReference = new WeakReference<DownloadImageTask>(downloadImageTask);
    }

    public DownloadImageTask getDownloadImageTask() {
        return downloadImageTaskReference.get();
    }
}

// -----------------------------------------------------------------------
//
// Private static helper methods
//
// -----------------------------------------------------------------------
private static boolean cancelPotentialDownload(long id, ImageView imageView) {
    DownloadImageTask downloadImageTask = getDownloadImageTask(imageView);

    if (downloadImageTask != null) {
        long imageId = downloadImageTask.id;
        if ((imageId == 0) || (imageId != id)) {
            Boolean b = downloadImageTask.cancel(true);
            Log.v("Task", "Stopped " + b.toString());
        } else {
            // The same URL is already being downloaded.
            return false;
        }
    }
    return true;
}

private static DownloadImageTask getDownloadImageTask(ImageView imageView) {
    if (imageView != null) {
        Drawable drawable = imageView.getDrawable();
        if (drawable instanceof DownloadedDrawable) {
            DownloadedDrawable downloadedDrawable = (DownloadedDrawable)drawable;
            return downloadedDrawable.getDownloadImageTask();
        }
    }
    return null;
}
// -----------------------------------------------------------------------
//
// Private helper methods
//
// -----------------------------------------------------------------------
private Bitmap downloadImageThumbnail(long id) {
    Bitmap bitmap = MediaStore.Images.Thumbnails.getThumbnail(mContext.getContentResolver(), id, MediaStore.Images.Thumbnails.MICRO_KIND, null);
    return bitmap;
} 
```

}

现在 gridview 填充得更快，但快速向下滚动仍然存在问题。还有一个——有时我得到一个错误：

```
java.lang.IllegalStateException: Cannot execute task: the task has already been executed (a task can be executed only once) 
```

我真的不知道该怎么办。我试图使 addTask 和 executeNext 同步（我不擅长关于同步的问题）但它甚至值得。我不知道有任何第三方库可以帮助通过它的 id 从 mediastore 下载图像缩略图。也许你能帮助我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T11:19:07.410

非常感谢[这个](http://codehenge.net/blog/2011/06/android-development-tutorial-asynchronous-lazy-loading-and-caching-of-listview-images/)例子。我已经对其进行了一些修改，以使用来自 MediaStore 和 LruCache 的拇指。现在效果很好。

# css - 如何对高于其包含元素的元素进行 z-index

> ID：13928342
> 
> 赞同：0
> 
> 时间：2012-12-18T07:34:23.750
> 
> 标签：css, z-index, galleria, zurb-foundation

我在页面上使用了[Zurb 的 Off Canvas Layout](http://www.zurb.com/playground/off-canvas-layouts)和[Galleria](http://galleria.io/)的组合。

Zurb 的布局用于一般结构，Galleria 创建了一个可以切换到全屏的照片查看器。

HTML 基本上是这样的（简化）：

```
<section role="complementary" style="z-index: 2;"> Sidebar Content </section>
<section role="main" style="z-index: 1;">
    <div id="galleria"> [small images here, no problem with these]
        <div class="fullscreen" style="width: 100%; height: 100%; z-index: 999;">
            [fullscreen images go here, the sidebar appears above them]
        </div>
    </div>
 </section> 
```

由于全屏图像容器 (z-index: 999) 包含在低于互补的 z-index main 中，因此在全屏模式下查看图像时，互补侧边栏会出现在图像上方。

我宁愿不改变我正在使用的这些技术，并希望有人有一个 CSS 解决方案来解决这个问题。

我已经看到了一个[令人沮丧的帖子](https://stackoverflow.com/questions/7564354/how-to-make-zindex-of-a-ui-element-relative-to-the-parent-canvas-and-not-the-con)，但也许有人知道他们不知道的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T08:51:24.873

您必须定位元素。将`position:absolute`, `position:relative`, or`position:fixed`用于类中的元素`.fullscreen`

# android - 运行指定安装在手机中的应用程序

> ID：13928344
> 
> 赞同：-1
> 
> 时间：2012-12-18T07:34:32.717
> 
> 标签：android

我想创建一个具有功能的应用程序：当我单击按钮时，我安装的应用程序将运行（例如[这个应用程序](https://play.google.com/store/apps/details?id=tunein.player&feature=search_result#?t=W251bGwsMSwxLDEsInR1bmVpbi5wbGF5ZXIiXQ..)）

我使用getInstalledApplications编写代码（按钮是aupeo），但不知道如何调用应用程序，请帮助我

```
aupeo.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            final PackageManager pm = getPackageManager();
            List<ApplicationInfo> packages = pm.getInstalledApplications(PackageManager.GET_META_DATA);

            for (ApplicationInfo packageInfo : packages) {

                Intent intent = pm.getLaunchIntentForPackage(packageInfo.packageName);   
                if (intent != null)  {
                  intent.addCategory(Intent.CATEGORY_LAUNCHER);
                  startActivity(intent);  
                }          
                }

        }

    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:32:59.107

[此处](http://www.tutorialforandroid.com/2009/10/launching-other-application-using-code.html)介绍了一种启动第三方应用程序的简单方法。示例中的代码：

```
final Intent intent = new Intent(Intent.ACTION_MAIN, null);
intent.addCategory(Intent.CATEGORY_LAUNCHER);
final ComponentName cn = new ComponentName("your.package.name", 
                                           "your.package.name.your.Class");
intent.setComponent(cn);
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity( intent); 
```

如果您在意图中指定的应用程序在手机上不存在，我相信它会引发异常 - 请参阅 ρяσѕρєя K 的答案，以了解手机上是否存在该应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T07:47:33.700

尝试检查包名称是否包含您的应用程序包名称：

```
aupeo.setOnClickListener(new View.OnClickListener() {

 public void onClick(View v) {
  final PackageManager pm = getPackageManager();
  List<ApplicationInfo> packages = 
                  pm.getInstalledApplications(PackageManager.GET_META_DATA);

  for (ApplicationInfo packageInfo : packages) {
   if(packageInfo.packageName.toLowerCase().
                   contains("tunein".toLowerCase())){

     Intent intent = 
                pm.getLaunchIntentForPackage(packageInfo.packageName);   
      if (intent != null)  {
       intent.addCategory(Intent.CATEGORY_LAUNCHER);
       startActivity(intent);  
    }  
 }        
   }

 }

    }); 
```

# mysql - 智能用户排名计算

> ID：13928349
> 
> 赞同：2
> 
> 时间：2012-12-18T07:35:12.907
> 
> 标签：mysql, sql, ranking

我有一个纸牌游戏，用户根据他们赢得的游戏数量排名。总体评级是预先计算的，以便能够快速加载，但我在排名计算方面存在问题。

排名计算如下：

```
SET @userRank = 0;

UPDATE t_ratings AS r
JOIN
  (
    SELECT
        userId, (@userRank := @userRank + 1) as rank
        FROM (
        SELECT
            r.userId,
            r.solvedCount,
            r.playedCount
       FROM
        t_ratings AS r                        
    ORDER BY r.solvedCount DESC , r.playedCount ASC) AS t
  ) AS rt
  ON rt.userId = r.userId
SET r.rank = rt.rank 
```

但最近我有时开始收到以下错误：

```
Deadlock found when trying to get lock; try restarting transaction 
```

因此我想知道是否有更好的方法来计算用户等级以避免死锁？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T02:54:49.487

这就是我在 SQL Server 中的做法......不确定 mySQL 是否具有窗口函数，因为我不是 mySQL 人。

```
With    cte As
(
        Select  Rank() Over (ORDER BY r.solvedCount DESC , r.playedCount ASC) As [rank], 
                userID
        From    t_ratings As r
)
Update  tr
Set     [rank] = c.[rank]
From    t_ratings tr
Join    cte c
        On  tr.userID = c.userID 
```

# html - iframe 一个没有确切路径文件名的 URL？

> ID：13928357
> 
> 赞同：0
> 
> 时间：2012-12-18T07:36:00.720
> 
> 标签：html, iframe

我想将 iframe`http://192.155.83.120:5000/r/2`放到另一个页面上 - 但正如我刚刚发现的那样，因为 URL 不会生成类似 index.html 的任何东西 - 它不受支持，并且 iframe 显示为空白。

我不完全确定是否有办法在这个 ruby​​ 应用程序中生成与 index.html 或类似内容相同的页面 - 有人有解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T07:50:44.230

其标题中的网页返回：

```
X-Frame-Options: sameorigin 
```

这意味着，除非您共享相同的域、端口和协议，否则您不能将其放在您网站上的 iframe 中。

# java - Class.forName() 与直接类加载

> ID：13928362
> 
> 赞同：3
> 
> 时间：2012-12-18T07:36:27.680
> 
> 标签：java, class

我以这种方式找到了一些代码加载资源：

```
Class.forName(myClass.class.getName()).getResourceAsStream("myResource"); 
```

首先，我想知道使用这种结构的兴趣。它似乎`Class.forName("className")`启用了动态加载，仅在需要时加载类（例如，这是加载 JDBC 驱动程序时的典型结构）。

然而，由于类在代码中，在这种情况下动态加载不是效率低下吗？如果我写以下内容会有什么不同吗？

```
myClass.class.getResourceAsStream("myResource"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T07:41:45.413

`mmyClass.class.getResourceAsStream("myResource");`应该是首选选项，因为它不进行搜索。结果是相同的，因为`myClass.class.getName()`在 中使用`forName`，而不仅仅是预定义的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T07:51:25.813

你的问题写得没有多大意义。 `Class.forName`并且`Class.getResourceAsStream`正在做不同的事情。它们是可以互换的。

比较它们的唯一方法是，如果您正在比较加载一个充满（比如说）`static`用数据初始化的字段的类与读取包含相同数据的资源。如果这就是您所说的更好，那么该`getResourceAsStream`方法在许多方面都更好：

*   您可以通过这种方式读取的数据量没有限制，
*   您不必将数据嵌入“代码”中，
*   你的内存占用会更小，
*   您可以仅加载所需数据的子集，
*   它可能更快，
*   等等。

* * *

如果您问是否可以使用`getResourceAsStream()`来加载类（在正常意义上），答案是否定的。当然，您可以获得字节码，但您必须做“其他事情”才能将这些字节码转换为 JVM 中的可执行类/方法。

# android - Google inApp onPurchaseStatechange

> ID：13928363
> 
> 赞同：0
> 
> 时间：2012-12-18T07:36:34.253
> 
> 标签：android, in-app-purchase, in-app-billing

我正在我的应用中实施 Google 应用内购买。我从谷歌端下载了代码并在我的应用程序中运行它。我第一次收到“签名验证失败”的错误时，我通过在发布版本中构建我的应用程序来解决它，对其进行签名并将其作为未发布的应用程序发布在 Google android 市场上。现在，当我购买应用程序并按下接受按钮并购买它时，我收到了响应，但数据未存储在 onPurchseState 中。该应用程序再次提供了下载此应用程序的信息，您必须购买它。任何帮助将不胜感激。这是详细代码

我从 onClick 方法调用 requestPurchase(String productId, String payload) 。

```
@Override
public void onClick(View view) {
    if(view == requestPurchaseButton) {
        mBillingService.requestPurchase("android.test.purchased", "10");
    }
} 
```

回调方法 onRequestPurchaseResponse(Request, ResponseCode) 被调用。这里的 responseCode 给出了 RESULT_OK 的值。所以请求已经发送到服务器。

```
 @Override
   public void onRequestPurchaseResponse(RequestPurchase request,
            ResponseCode responseCode) 
   {
          if(responseCode == ResponseCode.RESULT_OK) {
        Log.d("My APP", "onRequestPurchaseResponse.ResponeCode.RESULT_OK");

      } else if(responseCode == ResponseCode.RESULT_USER_CANCELED) {

      } else { 

      }
   } 
```

但是回调方法

```
@Override
    public void onPurchaseStateChange(PurchaseState purchaseState,
            String itemId, int quantity, long purchaseTime,
            String developerPayload) {
        Log.d("PucrchedState", "onPurchaseStateChanged");

    } 
```

永远不会被调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T08:30:03.923

`onPurchaseStateChange()`被异步调用，它可能需要一些时间（通常在几秒钟内）。但是，如果您的设备位于防火墙后面，响应可能会丢失或延迟，请确保没有任何东西阻止传入连接（检查 Google Talk 是否正常工作）。还要确保您已经`BroadcastReceiver`在清单中注册了相应的内容。

# linux - 在 Linux 上使用 jmeter 进行性能测试

> ID：13928364
> 
> 赞同：2
> 
> 时间：2012-12-18T07:36:37.787
> 
> 标签：linux, performance, testing, jmeter

我正在使用 jmeter 在我公司的网络门户上进行性能研究。当我们需要在 linux 服务器上运行 jmeter 时，我被困在某个地方。

**我在做什么**：我在本地机器上运行 jmeter，然后在服务器上传输 results.jmx 文件。
之后，我在服务器上的 jmeter 中打开该 results.jmx 文件，并将所有结果保存在 server-results.jtl 文件扩展名中。

当 jmeter 在服务器上完成执行时，我在本地下载 server-results.jtl 文件并在本地 jmeter 上打开该特定的 jtl 扩展文件，然后记录 jmeter 的最终结果。

**我的主要问题是 1：** *本地的 Jmeter 和具有相同脚本和场景的服务器上的 Jmeter 是否有任何区别？我发现非常小的差异。*

**问题 2：**我从 jmeter 脚本中删除了 *.png、*.jpg、*.CSS 扩展 url 调用。因为它可能会延迟主请求时间。但是当我们删除这些扩展并只专注于主要 URL 时，它会产生良好的性能还是我需要考虑所有扩展？

**注意：**请任何人给我在服务器上运行 jmeter 的完整步骤。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T11:41:41.520

恰如其分的问题2：

这取决于你在测试什么。在大多数 Web 应用程序中，提供静态资产（图像、样式表、javascript 文件等）并不是瓶颈；大多数 Web 应用程序将这些资产设置为可缓存，并且通常使用 CDN 来为它们提供服务。

在大多数 Web 应用程序中，性能瓶颈在于提供动态页面（.aspx、.php、.jsp）。通常，这些文件类型消耗的服务器功率是静态页面的许多倍；单台机器每秒能够服务数千个静态资产的情况并不少见，但只有数十或数百个动态资产。

从业务的角度来看，问题通常是“我的站点可以服务多少并发用户，我需要做些什么来增加这个数量”。对于大多数 Web 应用程序，这意味着“瓶颈资源是什么，我该如何扩展它”。

因此，如果您的性能测试的目标是找到瓶颈资源（以便您可以优化它！），请忽略静态资产。如果您只能为 20 个请求 home.jsp 的并发用户提供服务，那么您可以为数千个请求 logo.png 的用户提供服务并不重要...

企业还问了另一个问题：“所以，您认为我们可以支持 x 个并发用户 - 证明它！”。在这种情况下，您需要模拟 x 个并发用户访问您的站点 - 这意味着包括静态资产（因为您的瓶颈资源可能只是带宽，或者服务器可能配置错误，或者您的缓存策略可能被破坏）。但是，在这种情况下，您实际上是在对 Internet 进行负载测试 - 您的 CDN 提供商（如果您有的话）、您的 Web 服务器的性能（已针对提供静态文件进行了优化）以及您的托管服务提供商的带宽管理。这是一种“安全带和大括号”的方法——你确实排除了相当小的风险——这通常意味着在测试中投入大量资源——你的测试平台至少需要与托管服务提供商一样多的带宽，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-23T16:56:08.167

Q1：本地的 Jmeter 和服务器上的 Jmeter 具有相同的脚本和场景有什么不同吗？我发现非常小的差异？

jmx的执行没有区别。在 Windows 中，您必须通过 jmeter.bat 运行 jmeter，在 linux 中，您必须使用 jmeter.sh 运行。鉴于您不更改 jmx 文件的条件。

Q2。我从 jmeter 脚本中删除了 *.png、*.jpg、*.CSS 扩展 url 调用。因为它可能会延迟主请求时间。但是当我们删除这些扩展并只专注于主要 URL 时，它会产生良好的性能还是我需要考虑所有扩展？

尝试在录制过程中避免这种扩展。通过排除 .*.(bmp|css|js|gif|ico|jpg|png|swf|woff|php|jsp|html|htm|ashx)

没有这样的步骤说明： 1\. 转到 Linux 服务器并找到 jmeter bin 文件夹 (/opt/jmeter/apache-jmeter-2.13/bin/jmeter.sh) 2\. 使用 shell 脚本打开你的 jmx。3\. sh /opt/jmeter/apache-jmeter-2.13/bin/jmeter.sh -t sampletest.jmx -p user.properties -q os.properties

方法二： 1.在linux下用cd命令导航到bin文件夹。1.使用./jmeter.sh，它会在GUI模式下打开一个空白的jmeter测试计划。2.如果你想以分布式测试模式运行。在您的从属 linux 机器中使用 ./jmeter-server。但是您需要在属性文件中配置您的从机 IP 地址。

希望这可以帮助..

# php - 我想从字符串中提取匹配的单词并返回它，包括它之前的 2 个单词和之后的 2 个单词（如果找到）

> ID：13928372
> 
> 赞同：0
> 
> 时间：2012-12-18T07:37:04.310
> 
> 标签：php, mysql, sql, full-text-search, preg-match-all

我想做一个像大多数搜索引擎似乎做的把戏。

假设我有这个字符串：

```
$str = "Hello Mr. Ben From the UK, nice to meet you"; 
```

我想要一个正则表达式来搜索两个或更多的词，本例中的词是*to*和*Ben*

我可以使用`preg_match_all`

```
preg_match_all("#[\w+]*(to|Ben)+\w*#isx", $str,$matches); 
```

它工作正常，但我需要为每个单词**返回**一个短语中的匹配单词。例如单词*to*，我想返回匹配这种格式的匹配*nice **to** meet*，即包裹在周围的单词中

我想为*Ben*做同样的事情，

我可以使用`explode`,来做到这一点`preg_match`，`loop`所以我认为最好使用 , 来做到这一点`preg_match_all`。

**PS：**我还有一个简单的问题，我可以做这个“技巧”但`sql query`在从我的数据库中获取数据时使用吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T09:29:13.660

我通过这个正则表达式做到了

```
preg_match_all("#(.){0,15}(to|Ben)+(.){0,15}#isx", $str,$matches, PREG_PATTERN_ORDER , 1);
var_dump($matches); 
```

为大家分享答案

# spring - 在 spring 上设计不同的 2 DAO 或单个 DAO

> ID：13928373
> 
> 赞同：0
> 
> 时间：2012-12-18T07:37:09.637
> 
> 标签：spring

我想设计 DAO 界面，我有带有 dept_id 的部门表，带有 dept_id 和employee_id 的员工表，带有employee_id 的项目表和带有employee_id 的报告表。现在的要求是我想做这件事，`spring`所以我很困惑，我应该为每个表或一个包含所有表的所有实现逻辑的通用 DAO 制作不同的 DAO，如果它是通用的，我应该给出什么方法请帮助我设计界面

我已经制作了 EmployeeDAO 界面，但我必须制作项目、报告和部门表都是松散耦合的我已经完成了 EmployeeDAO 我在这里显示了我的 EmployeeDAO 界面

```
 package com.ankur.tutorial.dao;

import java.util.List;

import com.ankur.tutorial.employee.model.Employee;

/**
 * The employee DAO is the main Data Access Object that will allow to retrieve
 * and update the employee objects from and to the database. The retrieve and
 * update is done in a manner that employee, the projects and reporting
 * associated are updated
 * 
 * 
 */

public interface EmployeeDAO {
    /**
     * @throws EmployeeDAOException
     * 
     *             Returns all the employees from the database along with
     *             projects and reportigns.
     * 
     * @return List of all employees.
     * @throws
     */
    List<Employee> getAllEmployees();

    /**
     * Search for an employee by name. The name will match either the first name
     * or the last name. The matching is done using the SQL expression LIKE
     * %name%
     * 
     * @param name
     *            The name to search for
     * @return The list of employees with matching name.
     * @throws EmployeeDAOException
     */
    List<Employee> findEmployees(String name);

    /**
     * Select employee by ID.
     * 
     * @param id
     *            The ID (Number) of the employee
     * @return The employee with employee number matching the id
     * @throws EmployeeDAOException
     */
    Employee getEmployee(long id);

    /**
     * Update the employee and the associated project and reporting to the
     * database.
     * 
     * @param employee
     *            The employee to update
     * @return true if the employee record is updated
     * @throws EmployeeDAOException
     */
    boolean updateEmployee(Employee employee);

    /**
     * Delete the employee and the associated projects and reportings.
     * 
     * @param employee
     *            The employee to be deleted.
     * @return true if the employee record is deleted
     * @throws EmployeeDAOException
     */
    boolean deleteEmployee(Employee employee);

    /**
     * Create employee, project and reporting records in the database.
     * 
     * @param The
     *            employee to be created
     * @return true if the creation is successful
     * @throws EmployeeDAOException
     */

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T09:50:21.047

*不要*创建一个操纵所有表的 DAO。时期。

好吧，再来一句。如果您要增强系统并添加越来越多的表，您打算如何维护。你的超级多合一 DAO 将是巨大的。

# java - 使用休眠标准 API 实现 (property1 + property2) 之类的“someValue”操作

> ID：13928375
> 
> 赞同：0
> 
> 时间：2012-12-18T07:37:21.033
> 
> 标签：java, hibernate, hibernate-criteria

我的表包含 firstName 和 lastName 的单独列，但我将整个名称发送到我的 DAO 层（不能根据要求在 jsp 中将名称字段拆分为 firs 和 last name）。我想知道我们是否可以实现以下目标：

```
whereClause.append(" and upper(a.given_name + ' ' + a.family_name) like "
                          + someValues); 
```

使用限制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T13:12:58.407

如果您需要通过组合字符串（名字 + 名字）进行查找，那么您可以专门为此目的再创建一个列。您可以在用户创建/更新时预先计算其值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T20:28:14.827

这似乎由控制器实用程序方法或应用程序中的服务层更好地处理。你的 DAO 不应该关心你的 UI 实现的细节。

# php - 来自 PHP 的 HTML 有一些不受欢迎的过度缩进

> ID：13928378
> 
> 赞同：1
> 
> 时间：2012-12-18T07:37:31.603
> 
> 标签：php, html, indentation

我想精确控制由 PHP 生成的 HTML 的缩进，但我无法删除其中的一些。一个例子是这个 HTML 源代码：

```
<table id="structure">
<tr>
    <td id="navigation">
        <p>Hello!</p>   </td> 
```

为什么`<td>`和`<p>`行是这样缩进的？我可以修改吗？

生成它的主要 PHP 是

```
<table id="structure">
<tr>
<td id="navigation"><?php echo navigation($data_page,$data_subj);?> 
```

“导航”功能以

```
function navigation($data_page,$data_subj){
$output = "<p>Hello!</p>";
return $output;
} 
```

（真正的导航是一个依次包含 's 的元素`<ul>`，我试图通过添加和缩进级别使其在 HTML 源代码中可读。）`<li>``<ul>``\n``\t\t`

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-18T07:46:40.810

对于新行，请尝试 '\r\n'。换行符的符号取决于您的文件编码和您使用的操作系统。

# php - PHP Tokenizer 多行问题

> ID：13928379
> 
> 赞同：0
> 
> 时间：2012-12-18T07:37:34.527
> 
> 标签：php, token, tokenize, lexical

我正在使用 token_get_all 开发一个工具。我陷入了在 php 代码中有以下查询的情况

```
$sql = "UPDATE `key_values` SET
                `Value_Content` = '" . $this->db->escape($revisionValues['value']) . "',
                `Comments` = '" . $this->db->escape($revisionValues['comment']) . "',
                `Is_Active` = '" . $this->db->escape($revisionValues['actstate']) . "',
                `Is_Modified`='1'
                WHERE
                `Key_Value`='" . $candidateKey['key'] . "'
                AND `Email_Template`='" . $candidateKey['template'] . "'
                AND `Locale_ID`='" . $candidateKey['locale'] . "'"; 
```

和另一个代码

```
$array = array(
    "foo" => "bar",
    "bar" => "foo",
); 
```

我想把它当作一条线。如上所述，我无法检测多行代码中的行尾。有什么方法可以检测到。我需要一些标识符来告诉我这个多行 sql 查询是 php 的单行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T07:46:21.283

您正在制作一个声明，您自己在其中声明换行符。所以你的变量包含换行符，因为你把它们放在那里。现在你有两个选择：

1：不要放入换行符

```
$sql = "UPDATE `key_values` SET ".
            "`Value_Content` = '" . $this->db->escape($revisionValues['value']) . "', ".
            "`Comments` = '" . $this->db->escape($revisionValues['comment']) . "', ".
            "`Is_Active` = '" . $this->db->escape($revisionValues['actstate']) . "', ".
            "`Is_Modified`='1' ".
            "WHERE ".
            "`Key_Value`='" . $candidateKey['key'] . "' ".
            "AND `Email_Template`='" . $candidateKey['template'] . "' ".
            "AND `Locale_ID`='" . $candidateKey['locale'] . "'"; 
```

2：删除后

```
$sql = "UPDATE `key_values` SET
            `Value_Content` = '" . $this->db->escape($revisionValues['value']) . "',
            `Comments` = '" . $this->db->escape($revisionValues['comment']) . "',
            `Is_Active` = '" . $this->db->escape($revisionValues['actstate']) . "',
            `Is_Modified`='1'
            WHERE
            `Key_Value`='" . $candidateKey['key'] . "'
            AND `Email_Template`='" . $candidateKey['template'] . "'
            AND `Locale_ID`='" . $candidateKey['locale'] . "'";
$sql = str_replace(array(chr(10), chr(13)), '', $sql); 
```

所以检测一个换行符是检查 chr(10) 或 chr(13)。根据您使用的系统，可能是其中之一，也可能是两者。请参阅：[换行符 = \n 还是 \r\n？](https://stackoverflow.com/questions/4824621/is-a-new-line-n-or-r-n) ( `\r=chr(13)`& `\n=chr(10)`)

更新

如果要从 token_get_all() 返回单行字符串，可以使用：

```
<?php
$c = str_replace(array("\n","\r"), '', print_r(token_get_all('<?php echo; ?>'), true));
print $c;
// token_get_all() returns an array
// print_r(array, true) prints the array and the true param makes it return the output as a string
// replace the newline chars with nothing to make it single line

//single line output:
//Array( [0] => Array ( [0] => 372 [1] => 1 ) [1] => Array ( [0] => 316 [1] => echo [2] => 1 ) [2] => ; [3] => Array ( [0] => 375 [1] => [2] => 1 ) [4] => Array ( [0] => 374 [1] => ?> [2] => 1 ))
?> 
```

# objective-c - 重命名 AppDelegate.h 危害

> ID：13928385
> 
> 赞同：1
> 
> 时间：2012-12-18T07:37:56.813
> 
> 标签：objective-c, ios, xcode

我`AppDelegate.h`在我的 iOS 应用程序项目中重命名。

该项目仍在运行，但代表名称变为红色并出现了一个小问号按钮。

这会在未来引起问题吗？为什么 App Delegate 变红了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T07:54:37.323

AppDelegate 是作用于整个应用程序的对象，即，它是一个确认`UIApplicationDelegate`协议的对象。例如，如果应用程序变得活跃（`– applicationDidBecomeActive:`被解雇）等，它应该做出反应。

对象的名称无关紧要。如果文件在 Xcode 中变为红色，则表示 Xcode 找不到实际文件。也许您更改了名称或将其移到 Xcode 之外。通常它有助于删除红色文件并重新添加它。

# c# - 使用 C# 获取当前登录用户的 ADS 组列表

> ID：13928387
> 
> 赞同：0
> 
> 时间：2012-12-18T07:38:07.620
> 
> 标签：c#, dns

我是编程初学者，我想使用 C# 获取用户的 AD 组列表。如果您的答案很详细，它将更有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T08:32:49.403

几个月前我已经这样做了，但手头没有代码。也许我可以稍后再查看，但这大致是它的工作原理：

```
UserPrincipal up = UserPrincipal.Current;
foreach (GroupPrincipal gp in up.GetGroups())
{
    // do something with it, like reading out gp.Name
} 
```

希望能帮助到你。另外，添加`System.DirectoryServices`程序集

# list - Sencha touch 2 listitem itemtap 不工作

> ID：13928390
> 
> 赞同：1
> 
> 时间：2012-12-18T07:38:19.920
> 
> 标签：list, sencha-touch-2

我使用 Ext.List 和 ListItem 组件进行列表。问题是，我不能再使用 itemtap 事件了。我找到了为什么它不起作用。Itemtap 事件仅在 list-item-body 中触发，但是当我在 listitem 结构中添加一些组件时，它们不会呈现到链接 list-item-body。所以这些组件，没有指定任何点击事件。但是我需要 itemtap 工作所有的 listitem。

可以在[那里找到类似的问题](http://www.sencha.com/forum/showthread.php?248543)

任何帮助都会得到帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T15:08:23.313

为列表项中的每个组件提供“x-list-item-body” cls 可以解决问题。例如，

```
listItemLikeCount: {
    cls: 'x-list-item-body likeCount'
} 
```

# node.js - 在 express.js 中为 node.js 使用 jsonp

> ID：13928391
> 
> 赞同：0
> 
> 时间：2012-12-18T07:38:27.773
> 
> 标签：node.js, express, jsonp

我正在创建一个简单的 JSON API，它使用 jsonp 使用 node-js 返回我一个对象这是服务器端的代码：

```
app.get('/vit',function  (req,res,next) {
    res.type('application/json');
    res.jsonp(items);  //items is the object
}); 
```

在部署到 nodejitsu 并转到 url /vit 我得到对象项目。这意味着它在服务器端工作。

我有**另一个域**，我想从其中使用 jsonp 获取此对象继承客户端代码：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script type="text/javascript">
    $.getJSON('http://trial.jit.su/vit',function  (data) {
       console.log(data) ;
    });
</script> 
```

但我在控制台上收到以下错误：

```
XMLHttpRequest cannot load http://trial.jit.su/vit. Origin http://jquer.in is not allowed by Access-Control-Allow-Origin. 
```

好像我还没有理解Jsonp。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T07:54:11.770

Quoting the jQuery docs

> If the URL includes the string "callback=?" (or similar, as defined by the server-side API), the request is treated as JSONP instead. See the discussion of the jsonp data type in $.ajax() for more details.

[http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

You need a query string param with a question mark as placeholder.

And looking at the response of [http://trial.jit.su/vit](http://trial.jit.su/vit) you're missing the callback function. You're just returning plain JSON without the P, e.g. if the url contains `?callback=bacon` your response needs to be

```
bacon({"your": "json string"}); 
```

But express will do this for you, as long as you supply a `callback` param.

So just change the following:

```
$.getJSON('http://trial.jit.su/vit?callback=?',function  (data) {
    console.log(data) ;
}); 
```

# ios - UIView 随机位置和开始时间的闪烁效果

> ID：13928393
> 
> 赞同：1
> 
> 时间：2012-12-18T07:38:36.827
> 
> 标签：ios, caemitterlayer

如何在应用程序上创建一个神奇的闪闪发光的效果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T07:38:36.827

```
//Header file

#import "QuartzCore/QuartzCore.h"

@interface SparklesViewController : UIViewController
{
 CAEmitterLayer *emitter;
}  

//Implementation file

  - (void)viewDidLoad
    {
        [NSTimer scheduledTimerWithTimeInterval:3 target:self selector:@selector(destroyEmitter) userInfo:nil repeats:YES];
         [self sparklesIt];
        [super viewDidLoad];
        // Do any additional setup after loading the view, typically from a nib.
    }

    -(void)sparklesIt
    {
     int delay;

     UIImage *image;

     int imgSel=[self numberWithMin:0 :6];
     switch (imgSel) {
      case 0:
       image=[UIImage imageNamed:@"green.png"];
       break;
      case 1:
       image=[UIImage imageNamed:@"silver.png"];
       break;
      case 2:
       image=[UIImage imageNamed:@"yellow.png"];
       break;
      case 3:
       image=[UIImage imageNamed:@"red.png"];
       break;
      case 4:
       image=[UIImage imageNamed:@"purple.png"];
       break;
      case 5:
       image=[UIImage imageNamed:@"pink.png"];
       break;
      case 6:
       image=[UIImage imageNamed:@"blue.png"];
       break;
      default:
       break;
     }

     CGPoint pt=CGPointMake([self numberWithMin:0 :320],[self numberWithMin:0 :460]);

     float multiplier=0.25f;

     //create the emitter layer
     emitter=[CAEmitterLayer layer];
     emitter.emitterPosition=pt;
     emitter.emitterMode=kCAEmitterLayerOutline;
     emitter.emitterShape=kCAEmitterLayerCircle;
     emitter.renderMode=kCAEmitterLayerAdditive;
     emitter.emitterSize=CGSizeMake(100*multiplier, 0);

     //Flare particles emitted from the rocket as it flys
     CAEmitterCell *flare = [CAEmitterCell emitterCell];
     flare.contents = (__bridge id)([image CGImage]);
     flare.emissionLongitude = (4 * M_PI) / 2;
     flare.scale = 0.4;
     flare.velocity = 100;
     flare.birthRate = 45;
     flare.lifetime = 1;
     flare.emissionRange = M_PI / 7;
     flare.alphaSpeed = -0.7;
     flare.scaleSpeed = -0.1;
     flare.scaleRange = 0.1;
     flare.beginTime = 0.01;
     flare.duration = 0.7;

     emitter.emitterCells=[NSArray arrayWithObject:flare];
     [self.view.layer addSublayer:emitter];

     delay=[self numberWithMin:5 :10];
     [self performSelector:@selector(sparklesIt) withObject:nil afterDelay:delay];
    }

    -(void)destroyEmitter
    {
     NSLog(@"destroy emitter called ");
     if (emitter!=nil) {
      [emitter removeFromSuperlayer];
      emitter=nil;
     }
    }

    -(int)numberWithMin:(int)min:(int)max
    {
     return rand() % (max - min) + min;
    } 
```

//绿色，紫色，红色等是名称中指定的不同颜色的星星图像，它们的大小为16x16

# ruby-on-rails - 如何在 .map 块中生成链接？

> ID：13928398
> 
> 赞同：0
> 
> 时间：2012-12-18T07:39:10.430
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有这样的电话：

```
<%= product.categories.map{|cat| cat.name}.join(', ').to_s + "." %> 
```

我想做的是这样的：

```
<%= product.categories.map{|cat| link_to cat.name, category_path(cat)}.join(', ').to_s + "." %> 
```

当我这样做时，它实际上将路径作为文本吐出，实际上`/categories/1`并没有使其成为链接。

如何在此块中生成实际链接？

谢谢。

编辑：有人对如何做到这一点有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T01:38:27.743

我需要像这样包装整个`map`结果`raw`：

```
<%= raw(@product.categories.map{ |cat| raw(link_to(cat.name, category_path(cat))) }.join(', ') + ".") %> 
```

如需更完整的答案，[请查看此处](https://stackoverflow.com/questions/14096484/how-do-i-use-a-rails-link-to-helper-within-a-map-block-such-that-the-output-is)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T08:01:58.997

你可以这样做

```
<% product.categories.each do |p| %>
 <%= link_to p.name, category_path p %>
<% end %> 
```

**更新**

也许试试这样

```
<% array =  product.categories.collect { |p| raw link_to p.name, category_path p } %> 
```

这应该将所有链接保存在数组中以供进一步使用。现在你可以试试

```
<%= array.join('., ') %> 
```

未经测试的代码。请注意确定这是否可行。

# jquery - jQuery UI 自动完成从 php 脚本返回响应

> ID：13928399
> 
> 赞同：2
> 
> 时间：2012-12-18T07:39:10.633
> 
> 标签：jquery, jquery-ui, jquery-autocomplete

我试图模仿这个例子：http: [//jqueryui.com/autocomplete/#multiple-remote](http://jqueryui.com/autocomplete/#multiple-remote)

这是两个目标元素：

```
<input size="50" class="attr_values" name="collection" id="collection" />
<input size="50" class="attr_values" name="color" id="color" /> 
```

他们将“term”（用户输入的搜索词）和“attr_name”（例如集合或颜色）发送到 php 脚本。现在我试图弄清楚如何将响应数据定位到正确的输入 id。

这是我的脚本版本。我已附加`.autocomplete`到`attr_values`该类，并且页面上有许多实例。因此，在源代码部分，我向 JSON 数组添加了一个元素以将其发送`id`到 php 脚本。

现在我需要弄清楚它的另一面。如何将响应定位到正确的文本框？我无法弄清楚在`response`做什么。

```
$(document).ready(function() { 
    // 2 string parsing functions
    function split( val ) {
        return val.split( /,\s*/ );
    }
    function extractLast( term ) {
        return split( term ).pop();
    }

    $( '.attr_values' )
        // don't navigate away from the field on tab when selecting an item
        .bind( 'keydown', function( event ) {
            if ( event.keyCode === $.ui.keyCode.TAB &&
                    $( this ).data( 'autocomplete' ).menu.active ) {
                event.preventDefault();
            }
        })
        .autocomplete({
            source: function( request, response ) {
                $.getJSON( 'controllers/core_data/ajax/core_data.php', {
                    'attr_name' : this.element[0].id,
                    'term': extractLast( request.term )
                }, response );
            },
            search: function() {
                // custom minLength
                var term = extractLast( this.value );
                if ( term.length < 2 ) {
                    return false;
                }
            },
            focus: function() {
                // prevent value inserted on focus
                return false;
            },
            select: function( event, ui ) {
                var terms = split( this.value );
                // remove the current input
                terms.pop();
                // add the selected item
                terms.push( ui.item.value );
                // add placeholder to get the comma-and-space at the end
                terms.push( '' );
                this.value = terms.join( ', ' );
                return false;
            }
        });

 }); 
```

编辑：要测试 PHP 脚本，现在我只需要这样做：

```
echo "[ 'foo','barf','mr T' ]"; 
```

解决方案：

我将上面的内容更改为：

```
echo '[ "foo","barf","mr T" ]'; 
```

现在它可以工作了。很奇怪，我不认为引号在 JSON 中很重要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T07:45:43.370

该`response`参数是一个回调，您只是打算使用最终的建议数组作为参数来调用它。

因此，如果我想制作一个始终提示“红色”、“绿色”和“蓝色”的自动完成功能，我会让我的`source`函数看起来像这样：

```
source: function( request, response ) {
    response(["red", "green", "blue"]);
}, 
```

假设您的 PHP 脚本返回以 JSON 表示的字符串值数组，那么您所做的应该可以工作。

您的 PHP 输出导致问题的原因是 JSON 使用*双*引号作为分隔符，而不是单引号。`['foo','barf','mr T']`是无效的 JSON。

# wordpress - Wordpress 登录页面只是重定向自身

> ID：13928400
> 
> 赞同：2
> 
> 时间：2012-12-18T07:39:12.453
> 
> 标签：wordpress, routing, wordpress-login

我有一个 wordpress 博客，是我团队中的其他人设置的。不久前它工作得很好，但是当我们尝试使用正确的凭据登录时，登录页面只是重定向。

我从这里出发：

```
http://blog.lessonshark.com/wp-login.php 
```

对此：

```
http://blog.lessonshark.com/wp-login.php?redirect_to=http%3A%2F%2Fblog.lessonshark.com%2Fwp-admin%2F&reauth=1 
```

这是路由问题还是其他问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T07:46:33.027

您最近升级过 Wordpress 吗？这发生在所有浏览器中吗？

我以前遇到过这个问题。一次是在升级之后，在它重定向了几次之后，它让我进入。第二次是数据库中的站点 url 问题。下面的链接将引导您解决问题。

[http://codex.wordpress.org/Login_Trouble#Site_URL_Redirecting](http://codex.wordpress.org/Login_Trouble#Site_URL_Redirecting)

# string - 为什么这个单字符有 122 字节？

> ID：13928401
> 
> 赞同：0
> 
> 时间：2012-12-18T07:39:15.193
> 
> 标签：string, byte

我遇到了一个 stange 字符，它有 122 个字节。

```
 <script>
    var pig ="ฏ๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎๎ํํํํํํํํํํํํํํํํํํํํํํํํํํํํํํํํํํ";
    alert(pig.length) ;
    </script> 
```

结果是122！我的天啊。它使网页杂乱无章。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T07:53:49.897

# java - 计算角度的标准偏差？

> ID：13928404
> 
> 赞同：11
> 
> 时间：2012-12-18T07:39:18.723
> 
> 标签：java, algorithm, math, angle

所以我正在使用罗盘角度（以度为单位）开发应用程序。我已经设法确定角度平均值的计算，通过使用以下（在[http://en.wikipedia.org/wiki/Directional_statistics#The_fundamental_difference_between_linear_and_circular_statistics](http://en.wikipedia.org/wiki/Directional_statistics#The_fundamental_difference_between_linear_and_circular_statistics)找到）：

```
 double calcMean(ArrayList<Double> angles){
      double sin = 0;
      double cos = 0;
      for(int i = 0; i < angles.size(); i++){
           sin += Math.sin(angles.get(i) * (Math.PI/180.0));
           cos += Math.cos(angles.get(i) * (Math.PI/180.0)); 
      }
      sin /= angles.size();
      cos /= angles.size();

      double result =Math.atan2(sin,cos)*(180/Math.PI);

      if(cos > 0 && sin < 0) result += 360;
      else if(cos < 0) result += 180;

      return result;
 } 
```

所以我正确地得到了我的平均值/平均值，但我无法得到正确的方差/标准差值。我相当确定我计算的方差不正确，但想不出正确的方法。

这是我计算方差的方法：

```
 double calcVariance(ArrayList<Double> angles){

      //THIS IS WHERE I DON'T KNOW WHAT TO PUT
      ArrayList<Double> normalizedList = new ArrayList<Double>();
      for(int i = 0; i < angles.size(); i++){
           double sin = Math.sin(angles.get(i) * (Math.PI/180));
           double cos = Math.cos(angles.get(i) * (Math.PI/180));
           normalizedList.add(Math.atan2(sin,cos)*(180/Math.PI));
      }

      double mean = calcMean(angles);
      ArrayList<Double> squaredDifference = new ArrayList<Double>();
      for(int i = 0; i < normalizedList.size(); i++){
           squaredDifference.add(Math.pow(normalizedList.get(i) - mean,2));
      }

      double result = 0;
      for(int i = 0; i < squaredDifference.size(); i++){
           result+=squaredDifference.get(i);
      }

      return result/squaredDifference.size();
 } 
```

虽然这是计算方差的正确方法，但我不是我应该使用的。我认为我应该使用反正切，但标准偏差/方差值似乎不正确。帮助？

**编辑：** 示例：输入值 0,350,1,0,0,0,1,358,9,1 的平均角度为 0.0014（因为角度非常接近于零），但如果您只是进行非角度平均，你会得到 72 ......这是很遥远的事情。由于我不知道如何将单个值操作为应有的值，因此计算出的方差为 25074，导致标准偏差为 158 度，这太疯狂了！（应该只有几度）我认为我需要做的是正确标准化各个值，以便我可以获得正确的方差/标准差值。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-18T15:36:46.143

`sqrt(-log R²)`如果您将样本视为单位圆上的复数，则通过 Wikipedia 页面链接到圆形标准差是，其中 R = |样本的平均值|。所以标准差的计算与平均角度的计算非常相似：

```
double calcStddev(ArrayList<Double> angles){
      double sin = 0;
      double cos = 0;
      for(int i = 0; i < angles.size(); i++){
           sin += Math.sin(angles.get(i) * (Math.PI/180.0));
           cos += Math.cos(angles.get(i) * (Math.PI/180.0)); 
      }
      sin /= angles.size();
      cos /= angles.size();

      double stddev = Math.sqrt(-Math.log(sin*sin+cos*cos));

      return stddev;
 } 
```

如果你想一想它是有道理的：当你在单位圆上平均一堆彼此靠近的点时，结果离圆不太远，所以 R 将接近 1 并且 stddev 接近0\. 如果点沿圆均匀分布，则它们的平均值将接近 0，因此 R 将接近 0 并且 stddev 非常大。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T08:50:51.140

当您使用**Math.atan(sin/cosine)**时，您会得到 -90 到 90 度之间的角度。如果你有 120 度角，你得到**cos** =-0.5 和**sin** =0.866，那么你得到**atan(-1.7)** =-60 度。因此，您在标准化列表中放置了错误的角度。

假设[方差](http://en.wikipedia.org/wiki/Variance)是线性偏差，我建议您通过**-calcMean(angles)旋转****角度**数组，并在 180/-180 以上/以下的角度上加/减 360（该死的我的写作！））同时找到最大和最小角度。它会给你想要的偏差。像这样：

 **```
 Double meanAngle = calcMean(angles)
    Double positiveDeviation = new Double(0);
    Double negativeDeviation = new Double(0);
    Iterator<Double> it = angles.iterator();
    while (it.hasNext())
    {
        Double deviation = it.next() - meanAngle;
        if (deviation > 180) deviation -= 180;
        if (deviation <= -180) deviation += 180;
        if (deviation > positiveDeviation) positiveDeviation = deviation;
        if (deviation > negativeDeviation) negativeDeviation = deviation;
    }
    return positiveDeviation - negativeDeviation; 
```

对于平均平方偏差，您应该使用您的方法（使用**角度**，而不是“标准化”方法），并继续寻找 (-180, 180) 范围！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T11:31:24.113

数学库函数剩余部分可以方便地处理角度。

一个简单的改变是替换

```
normalizedList.get(i) - mean 
```

和

```
remainder( normalizedList.get(i) - mean, 360.0) 
```

但是，您的第一个循环是多余的，因为对剩余的调用将处理所有规范化。此外，将平方差相加比存储它们更简单。我个人喜欢在算术可行时避免使用 pow() 。所以你的功能可能是：

```
double calcVariance(ArrayList<Double> angles){
 double mean = calcMean(angles);

  double result = 0;
  for(int i = 0; i < angles.size(); i++){
   double diff = remainder( angles.get(i) - mean, 360.0);
        result += diff*diff;
  }

  return result/angles.size();
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-20T14:22:12.083

目前处理这个问题的好方法是 scipy 中已经实现的两个函数：

*   circmean：[https ://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.circmean.html](https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.circmean.html)
*   circstd：[https ://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.circstd.html](https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.circstd.html)

几件很棒的事情包括：

*   用于快速计算的矢量化
*   楠交易
*   高、低阈值，通常用于 0 到 360 度之间的角度与 0 到 2 Pi 之间的角度。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2017-04-30T18:23:43.147

[Joni 接受的答案](https://stackoverflow.com/questions/13928404/calculating-standard-deviation-of-angles/13936342#13936342)在回答这个问题方面做得很好，但正如[Brian Hawkins 所说](https://stackoverflow.com/questions/13928404/calculating-standard-deviation-of-angles#comment52441661_13936342)：

> 注意单位。所写的函数以度为单位的角度作为输入，并返回以弧度为单位的标准偏差。

这是一个通过将度数用于其参数和返回值来解决该问题的版本。它还具有更大的灵活性，因为它允许[可变数量的参数](https://stackoverflow.com/questions/2330942/java-variable-number-or-arguments-for-a-method)。

```
public static double calcStdDevDegrees(double... angles) {
    double sin = 0;
    double cos = 0;
    for (int i = 0; i < angles.length; i++) {
        sin += Math.sin(angles[i] * (Math.PI/180.0));
        cos += Math.cos(angles[i] * (Math.PI/180.0)); 
    }
    sin /= angles.length;
    cos /= angles.length;

    double stddev = Math.sqrt(-Math.log(sin*sin+cos*cos));

    return Math.toDegrees(stddev);
} 
```**

# c - 在 C 中的一个缓冲区中合并脚本和缓冲区的值

> ID：13928406
> 
> 赞同：0
> 
> 时间：2012-12-18T07:39:25.417
> 
> 标签：c, buffer

我想使用 udp 客户端服务器将数据传感器发送到服务器。

```
printf("sensor 0 '%s' \n",buf0); 
printf("sensor 1 '%s' \n",buf1); 
```

例如，buf0 的值为 1023，buf1 的值为 0。我想将传感器 0：1023 合并到缓冲区中，比如 buff

所以我可以将buff发送到服务器。

服务器将收到

```
"sensor 0 :1023"
"sensor 1 :   0" 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T07:41:50.253

这个：

```
char buf[128];
snprintf(buf, sizeof(buf), "sensor 0: '%s'\n", buf0); 
```

等等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T07:43:58.113

您可以使用[snprintf](http://linux.die.net/man/3/snprintf)

```
snprintf(buf, 100, "sensor 0 : %s", buf0); 
```

buf 的类型在哪里`char buf[100];`

# regex - 使用具有正则表达式的字符串初始化 json 对象

> ID：13928408
> 
> 赞同：0
> 
> 时间：2012-12-18T07:39:32.663
> 
> 标签：regex, json

我想用给定的字符串初始化 json 对象

```
String str = "{regex:/^(a-z|A-Z|0-9)*[^:*()#%`~*^&+={}| >&quot;|\\]*$/,'value':10}";

try {
    JSONObject jsonObj = new JSONObject(str);
    System.out.println("Result ######### "+jsonObj);
} catch (JSONException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

由于键正则表达式的特殊字符，它显示错误，还有其他可能实现这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T08:31:51.653

尝试在`regEx`.

```
String str = "{regex:'/^(a-z|A-Z|0-9)*[^:*()#%`~*^&+={}| >&quot;|\\]*$/','value':10}"; 
```

# android - 此代码在 SD 卡中创建文件夹，但不将图像保存在该文件夹中

> ID：13928411
> 
> 赞同：0
> 
> 时间：2012-12-18T07:39:42.827
> 
> 标签：android

此代码在 SD 卡中创建文件夹，但不将图像保存在该文件夹中，我该怎么做？是在默认凝胶中显示图像我想将图像保存在我的“myfolder23”中而不是默认凝胶中我是怎么做到的？？？我如何只将相机拍摄的图像保存在“myfolder23”而不是默认的gellry文件夹中？或者从默认的gellery中删除只保存在“myfolder23”中？？？

```
private void startDialog() {
        AlertDialog.Builder myAlertDialog = new AlertDialog.Builder(this);
        myAlertDialog.setTitle("Upload Pictures Option");
        myAlertDialog.setMessage("How do you want to set your picture?");

        myAlertDialog.setPositiveButton("Gallery", new  
  DialogInterface.OnClickListener() {
            public void onClick(DialogInterface arg0, int arg1) {
                pictureActionIntent = new Intent(Intent.ACTION_GET_CONTENT,  
     null);
                pictureActionIntent.setType("image/*");
                pictureActionIntent.putExtra("return-data", true);
                startActivityForResult(pictureActionIntent, GALLERY_PICTURE);
            }
        });

        myAlertDialog.setNegativeButton("Camera", new 
   DialogInterface.OnClickListener() {
            public void onClick(DialogInterface arg0, int arg1) {
                pictureActionIntent = new 
    Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);

                String newFolder = "/myFolder23";
                String extStorageDirectory = Environment.getExternalStorageDirectory().toString();
                File file = new File(extStorageDirectory + newFolder);
                file.mkdir(); 

                Uri outputFileUri = Uri.fromFile(file);

             pictureActionIntent.putExtra(MediaStore.EXTRA_OUTPUT, outputFileUri);

                startActivityForResult(pictureActionIntent, CAMERA_PICTURE);
            }
        });
        myAlertDialog.show();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T07:58:20.453

更改代码以将文件存储在 sdcard 上：

```
public final String SDCARD_ROOT_PATH = 
           Environment.getExternalStorageDirectory().getAbsolutePath();
public final String SAVE_PATH_IN_SDCARD = "/myFolder23/"; 
public final String IMAGE_CAPTURE_NAME 
                            ="imgtemp"+System.currentTimeMillis()+".png"; 

File dir = new File(Environment.getExternalStorageDirectory() + "/myFolder23");
if(dir.exists() && dir.isDirectory()) {
  // do something here
 }
else{
    //create dir here
    dir.mkdir(); 
   }
 Intent pictureActionIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);  

 pictureActionIntent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(new
         File(SDCARD_ROOT_PATH + SAVE_PATH_IN_SDCARD,IMAGE_CAPTURE_NAME)));  

  startActivityForResult(pictureActionIntent,CAMERA_PICTURE); 
```

# iphone - 如何在 UIImagePickerController 相机上添加亮度 UISlider？

> ID：13928412
> 
> 赞同：-1
> 
> 时间：2012-12-18T07:39:48.097
> 
> 标签：iphone, ios, uiimagepickercontroller

有什么方法可以添加一个`UISlider`来控制`UIImagePickerController`相机的亮度吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T08:04:05.810

这样做的唯一方法是不使用 UIImagePickerController 并创建自己的相机视图。您从相机获取提要并将其直接渲染到视图中。然后，您可以通过更改亮度等来编辑提要...

WWDC 2012 中有一些非常好的视频（我认为是第 510 和 511 场会议），它们将解释如何做好这一切。这实际上相当简单。

然后，您可以添加一个按钮作为相机按钮并保存图像。

# unix - 如何使用 grep 获取特殊字符

> ID：13928415
> 
> 赞同：2
> 
> 时间：2012-12-18T07:39:52.037
> 
> 标签：unix

我想 grep \" 作为文件（abc）中的以下文本，例如：

```
$egrep -n  "^\"$" abc
"CO_FA_SC_600212","2","\"HSE 48\" 48 CHIVALRY AVE" 
```

但它没有出现我如何使用 egrep 或 grep 来获取线路。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T07:52:32.933

`grep -F 'special char' filename`将搜索具有特殊字符的行。

`grep -Fn 'special char' filename`也获得行号。

[man grep](http://linux.die.net/man/1/grep)说， `-F, --fixed-strings`：将 PATTERN 解释为固定字符串的列表，由换行符分隔，其中任何一个都要匹配

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T08:40:00.447

这里有两种选择：

1.  `grep -n "\\\\\"" filename`
2.  `grep -n '\\"' filename`
3.  对于第一个，连续两个`\\`作为一个单独`\`的 ，`"`并被 逃脱`\`，因此`\\"`被传递给`grep`。
4.  对于第二个，按`\`字面意思理解，因此`\\"`传递给`grep`
5.  `3`并且`4`可以通过`echo "\\\\\""`和验证`echo '\\"'`

# google-maps - 刷新谷歌地图上的圈子

> ID：13928418
> 
> 赞同：1
> 
> 时间：2012-12-18T07:40:12.350
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers

我正在实现一个应用程序，我必须在地图中心显示带有圆圈的谷歌地图。我可以在地图上画一个圆，但几秒钟后我必须更新圆的半径。我想使用相同的地图实例而不是创建新实例。当我创建新圆圈时，它与旧圆圈重叠。我想删除以前添加的圈子并显示新的圈子。在检查 api 时，我从 Circle 类中得到了这个方法，它将隐藏圆圈。myCity.setOptions({visible:false});

但问题是我无法访问较旧的圈子实例。有什么方法可以让我获取分配给该地图的地图标记和信息框并将它们删除？下面是被称为间隔几秒的方法

```
function mapByCoordinates()
{
var lat=document.getElementById("latValue").value;
var lng=document.getElementById("lngValue").value;
var accuracy = document.getElementById("zoomValue").value;
var zoomVal=getZoomBasedOnAccuracy(accuracy);
var zm = parseInt(zoomVal);
var tempRadius = getRadiusBasedOnAccuracy(accuracy);
var amstr = new google.maps.LatLng(lat,lng);

var mapProp = {
  center:amstr,
  zoom:zm,
  mapTypeId:google.maps.MapTypeId.HYBRID
  };  

  map.setOptions(mapProp); 

  myCity.setOptions({visible:false}); 
  infobox.close();
  myCity = new google.maps.Circle({
  center:amstr,
  radius:tempRadius  

  }); 

  marker=new google.maps.Marker({
  position:amstr,
  }); 
myCity.setMap(map);
myCity1.setMap(map1);

infobox = new google.maps.InfoWindow({
              content:"Welcome to google map",
              disableAutoPan:true
});
infobox.open(map,marker);

map.panTo(amstr);
map.setZoom(19);
} 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T11:04:01.253

我们可以使用以下方法 circle.setOptions({visible:false}); 使已经绘制的圆圈在谷歌地图上不可见。并且可以使该地图的实例为空。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-02-26T16:50:50.577

尝试`circle.setRadius(radiusvalue)`

# asp.net - 如何忽略全局 asax 中图像的日志记录错误

> ID：13928420
> 
> 赞同：5
> 
> 时间：2012-12-18T07:40:17.670
> 
> 标签：asp.net, global-asax, filenotfoundexception, error-logging

我的 global.asax 中有一个错误处理程序，如下所示；

```
 Sub Application_Error(ByVal sender As Object, ByVal e As EventArgs)
        ' Code that runs when an unhandled error occurs
        Dim ex = Server.GetLastError.GetBaseException
        Dim lastErrorWrapper As HttpException = Server.GetLastError()
        Dim lastError As Exception = lastErrorWrapper

        If lastErrorWrapper.InnerException IsNot Nothing Then
            lastError = lastErrorWrapper.InnerException
        End If

        My.ErrorHandler.LogError( _
            "<BR/><BR/>URL: " & Request.RawUrl & _
            "<BR/><BR/>STACK: " & ex.StackTrace & _
            "<BR/><BR/>SOURCE: " & ex.Source & _
            "<BR/><BR/>MESSAGE: " & ex.Message & _
            "<BR/><BR/>TYPENAME: " & ex.GetType.ToString & _
            "<BR/><BR/>INNER EXCEPTION: " & lastError.ToString & _
            "<BR/><BR/>REFERRER: " & HttpContext.Current.Request.Url.AbsoluteUri & _
            "<BR/><BR/>USER IP: " & Request.ServerVariables("REMOTE_ADDR") & " -- " & Request.ServerVariables("HTTP_USER_AGENT"))
    End Sub 
```

显然，这很好用，只要有错误就会给我发一封电子邮件。但是，对于在文件系统中找不到的任何图像也是如此。它给了我一个“文件不存在”。错误。有没有办法忽略不在磁盘上的图像的日志记录错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T10:10:27.490

你不能解决 FileNotFoundException 吗？如果异常不应该发生，那么宁愿解决问题而不是抑制它。要处理已知异常，您可以使用以下代码。

```
if(Server.GetLastError().GetBaseException() is System.Web.HttpException)
{
     //You could check whether the 
     //Server.GetLastError().GetBaseException().Message contains the appropriate message
     Debug.WriteLine("Suppressed FileNotFoundException");
}else
//Log an unhandled exception 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T17:01:12.763

```
var ex = Context.Error;

if (ex is HttpException)
{
    var httpException = (HttpException)ex;

    if (httpException.GetHttpCode() == (int)HttpStatusCode.NotFound)
        return; // Do nothing 404    
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T08:26:01.150

我知道这听起来很简单，或者很简单，或者您可以搜索错误代码，但这就是我所做的 - 简单检查错误是否包含以下消息`dose not exist`：

```
lastErrorWrapper.ToString().Contains("does not exist.") 
```

# java - 按钮上的验证

> ID：13928422
> 
> 赞同：-1
> 
> 时间：2012-12-18T07:40:30.983
> 
> 标签：java, android

我在我的应用程序中使用了保存按钮。当我单击保存按钮时，我希望它验证每个字段并显示错误消息，例如“请输入此字段”、“请在此字段中输入正确的格式”或“请选择此字段”。

我有 8 个 EditText 框和 2 个微调器，并且`TextView`拥有`ListView`. 在 Android 中，如何在每个字段上使用字段验证，并在验证每个字段后成功保存数据。

我的Java代码是：

```
 public class non_ticket_task extends Activity implements OnItemSelectedListener{

    public static String complain_date;
    public static String complain_time;
    public static String job_performed;
//  public static String time;
    public static String next_due_on;
    static TelephonyManager tm; 

    // Progress Dialog
    private ProgressDialog pDialog;

    JSONParser jsonParser = new JSONParser();
    TextView cus_name_txt;
    EditText complain_date_txtbx;
    EditText complain_time_txtbx;
    EditText job_performed_txtbx;
    EditText date_txtbx;
    EditText lat_txtbx;
    EditText lon_txtbx;
    EditText next_due_on_txtbx;
    Button btnadd;

    // url to create new product
    private static String url_create_task = "http://192.168.2.1/android_connect/create_product.php";

    // JSON Node names
    private static final String TAG_SUCCESS = "success";

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.non_ticket_task);   

      this.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN);
      tm = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);

   // Buttons
      btnadd = (Button) findViewById(R.id.addbtn);

   // button click event
      btnadd.setOnClickListener(new View.OnClickListener() {

          @Override
          public void onClick(View view) {
              // creating new task in background thread
              new CreateNewTask().execute();
          }
      });

       cus_name_txt = (TextView)findViewById(R.id.textView1);
        cus_name_txt.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                Onclick_click1(cus_name_txt);

            }
        }); 

        complain_date_txtbx = (EditText) findViewById(R.id.complain_date_txt);
        complain_date_txtbx.setText(non_ticket_task.complain_date);

        complain_time_txtbx = (EditText) findViewById(R.id.complain_time_txt);
        complain_time_txtbx.setText(non_ticket_task.complain_time);

        job_performed_txtbx = (EditText) findViewById(R.id.job_performed_txt);
        job_performed_txtbx.setText(non_ticket_task.job_performed);

        date_txtbx = (EditText) findViewById(R.id.date_txt);
        date_txtbx.setText(" "
                + String.valueOf(java.text.DateFormat.getDateTimeInstance()
                        .format(Calendar.getInstance().getTime())));

        MyLocation loc = new MyLocation(this.getApplicationContext());
        lon_txtbx = (EditText) findViewById(R.id.lon_txt);
        lon_txtbx.setText(String.valueOf(loc.lon));
        lat_txtbx = (EditText) findViewById(R.id.lat_txt);
        lat_txtbx.setText(String.valueOf(loc.lat));

        next_due_on_txtbx = (EditText) findViewById(R.id.next_due_on_txt);
        next_due_on_txtbx.setText(non_ticket_task.next_due_on);

        Spinner status = (Spinner) findViewById(R.id.status_spinner);
     // Create an ArrayAdapter using the string array and a default spinner layout
     ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this,
             R.array.Status_array, android.R.layout.simple_dropdown_item_1line);
     // Specify the layout to use when the list of choices appears
     adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
     // Apply the adapter to the spinner
     status.setAdapter(adapter);

     Spinner severity = (Spinner) findViewById(R.id.severity_spinner);
     // Create an ArrayAdapter using the string array and a default spinner layout
     ArrayAdapter<CharSequence> adapter1 = ArrayAdapter.createFromResource(this,
             R.array.Severity_array, android.R.layout.simple_dropdown_item_1line);
     // Specify the layout to use when the list of choices appears
     adapter1.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
     // Apply the adapter to the spinner
     severity.setAdapter(adapter1);

    }

    public void onItemSelected(AdapterView<?> parent, View view, 
            int pos, long id) {
        // An item was selected. You can retrieve the selected item using
        // parent.getItemAtPosition(pos)
    }

    public void onNothingSelected(AdapterView<?> parent) {
        // Another interface callback
    }

    public void Onclick_click1(final TextView cus_name_txt)
    {
        final TextView txtbx = (TextView) cus_name_txt;

        if(cus_name_txt.getId()==R.id.textView1)
        {

            final CharSequence[] items = {"Ali Asghar","Ali Shah","Tamseel","Bilal","Daniyal","Muzamil","Faraz","Uzair","Mohsin","Mehran","Babar","Ameen","Zeeshan","Maqsood","Hasan","Taqi","Talib","Asif","Mudasir"};
            AlertDialog.Builder builder = new AlertDialog.Builder(this);
            builder.setTitle("Customers Name");
            //builder.setI
            builder.setItems(items, new DialogInterface.OnClickListener() {
               public void onClick(DialogInterface dialog, int item) {
                    //Toast.makeText(getApplicationContext(), con.get(item).getCountrName(), Toast.LENGTH_SHORT).show();
                    txtbx.setText(items[item]);
                    System.out.println("Item is: "+items[item]);
                    /*CONTRY_ID = con.get(item).getCountryId();
                    stateET.requestFocus();*/
               }
            });

            builder.show();

        }

} 

    /**
     * Background Async Task to Create new product
     * */
    class CreateNewTask extends AsyncTask<String, String, String> {

        /**
         * Before starting background thread Show Progress Dialog
         * */
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(non_ticket_task.this);
            pDialog.setMessage("Saving Details..");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(true);
            pDialog.show();
        }

        /**
         * Creating task
         * */
        protected String doInBackground(String... args) {
            String cus_name = cus_name_txt.getText().toString();
            String complain_date = complain_date_txtbx.getText().toString();
            String complain_time = complain_time_txtbx.getText().toString();
            String job_performed = job_performed_txtbx.getText().toString();
            String date = date_txtbx.getText().toString();
            String next_due_on = next_due_on_txtbx.getText().toString();
            String lat = lat_txtbx.getText().toString();
            String lon = lon_txtbx.getText().toString();

            // Building Parameters
            List<NameValuePair> params = new ArrayList<NameValuePair>();
            params.add(new BasicNameValuePair("cus_name", cus_name));
            params.add(new BasicNameValuePair("complain_date", complain_date));
            params.add(new BasicNameValuePair("complain_time", complain_time));
            params.add(new BasicNameValuePair("job_performed", job_performed));
            params.add(new BasicNameValuePair("date", date));
            params.add(new BasicNameValuePair("next_due_on", next_due_on));
            params.add(new BasicNameValuePair("lat", lat));

            // getting JSON Object
            // Note that create product url accepts POST method
            JSONObject json = jsonParser.makeHttpRequest(url_create_task,
                    "POST", params);

            // check log cat fro response
            Log.d("Create Response", json.toString());

            // check for success tag
            try {
                int success = json.getInt(TAG_SUCCESS);

                if (success == 1) {
                    // successfully created product
                    Intent i = new Intent(getApplicationContext(), My_Task.class);
                    startActivity(i);

                    // closing this screen
                    finish();
                } else {
                    // failed to create product
                }
            } catch (JSONException e) {
                e.printStackTrace();
            }

            return null;
        }

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(String file_url) {
            // dismiss the dialog once done
            pDialog.dismiss();
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T08:46:40.860

您可以像这样创建一个函数 validatefields() 并像这样调用这个函数

```
 if(validate()){
      new CreateNewTask().execute() 
 }
 else{
    showErrorMsg(msg);
 } 
```

验证功能将是这样的

```
private boolean validate(){
boolean retStatus=false;

if((textView1.getText().length()==0 ||  textView1.getText().equals("") ){
  retStatus=false; 
  msg = "Please fill TextView 1";

}
else if ( ---check other 9  condition in the same way--)

}

if ( !msg.equals("")){
     return false;
   }
else {
     return true;
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T07:58:00.433

嗨，如果我非常了解您，您只想确保向用户提供反馈以在 EditText 中输入内容。如果这是您想要的，那么您只需要检查 EditText.getText 的长度，如下所示：

```
if (cus_name_txt.getText().Lenght()==0){
//Your message here

} 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T08:01:58.620

在 onPreExecute 中，您进行验证。如果某个字段为空（或错误），则为该字段设置错误消息。如果有一个或多个无效字段，则取消 AsyncTask 并显示错误。用户修复错误后，可以再次按保存。

您应该从 onPreExecute 中的字段中获取字符串，而不是在 doInBackground 中，因为您无法通过该方法在 Ui 中进行修改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T08:13:28.997

坦率地说，验证过程很大程度上取决于您要验证的内容以及验证方式。例如，如果您想在离开焦点后或仅在单击提交按钮后验证 edittext 的文本。TextWatchers 可以用于快速和用户友好的验证。但是，如果您想在单击按钮时进行验证，您可以使用类似的功能

```
boolean void validateInput(){
boolean retStatus=false;
if((textView1.getText().length()==0 ||  textView1.getText().equals("") && (any other condition )){
   retStatus=true;
   textView1.setError("You have entered wrong value in textView 1");
}
//similarly for other controls
------ 
-----
--

return retStatus;
} 
```

如果您想使用即时错误检测，错误检查（和纠正）将很快，而不是像上面这样的方法可以显示“一次全部”错误。您可以决定任何适合您的用户。

为了减少用户输入错误，请使用文本类型作为edittexts，即使用数字作为editText 作为电话号码，使用字母作为名称或键入emailid 作为电子邮件等。使用提示来指示用户他们应该在该EditText 中做什么，即在此处输入您的电子邮件ID。

**编码快乐！！**

# android - 使用谷歌地图的 Android Listview

> ID：13928423
> 
> 赞同：4
> 
> 时间：2012-12-18T07:40:38.407
> 
> 标签：android, google-maps, listview

我正在构建示例 android 应用程序。最初正在显示一些城市的列表。通过单击任何一个城市，它将显示有关该城市的地图。

现在正在为如何将列表中的选定城市与 googlemap 连接起来而苦恼。任何想法请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T07:53:22.920

您只需制作城市对象列表。每个对象将包含城市名称和位置（纬度、经度）。当您单击一个项目时，转到传递 Intent 对象中的位置的地图活动。在地图活动中，您将解析位置并告诉地图前往该点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T08:04:48.923

首先，您拥有例如数据库（或列表活动中的本地数据结构）以及城市和相应的坐标。然后，在`onListItemClick()`您创建新意图并插入额外的必要数据（数据库表中行的标题、坐标或主键）。使用此意图启动新的活动扩展 MapActivity，`mMapController = mMapView.getController();`并对其进行动画处理`mMapController.animateTo(new GeoPoint((int)yourLatitudeE6,(int)yourLongitudeE6))`，其中 yourLatitudeE6 和 yourLongitudeE6 - 来自意图的额外内容

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T08:21:52.587

我认为你应该有城市的纬度和经度。所以你可以通过捆绑将该纬度和经度发送到地图视图并填充该城市的地图。在此链接中，您可以获得 mapview 的完整教程。[http://www.vogella.com/articles/AndroidGoogleMaps/article.html](http://www.vogella.com/articles/AndroidGoogleMaps/article.html)

# math - 从点到点绘制随机线（也随机生成）

> ID：13928426
> 
> 赞同：-1
> 
> 时间：2012-12-18T07:40:51.387
> 
> 标签：math, graphics, java, trigonometry

我需要一点关于java的帮助。我需要在两点之间创建一些曲线。应用程序需要创建随机数量的曲线，这些曲线将从随机生成的起点连接到随机生成的终点。

到目前为止，这是我的代码：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package tryproject;

import java.awt.Color;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Point;
import java.awt.RenderingHints;
import java.awt.geom.AffineTransform;
import java.awt.geom.QuadCurve2D;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Random;
import javax.swing.JPanel;

/**
 *
 * @author Q
 */
public class GUI extends JPanel{

    @Override

    protected void paintComponent(Graphics g) {
        super.paintComponent(g);

        ArrayList<Point> jaa = new ArrayList<Point>();
 Random ja = new Random();
Random p = new Random();
int x = ja.nextInt(50) +50;
int y = ja.nextInt(150) + 150;
Point pocetnaTacka = new Point(Math.abs(ja.nextInt(150)),Math.abs(ja.nextInt(150)));
Point zavrsmaTacka = new Point(Math.abs(ja.nextInt(300) ) ,Math.abs(ja.nextInt(300)));
int lx = pocetnaTacka.x;

int ly = pocetnaTacka.y; 
jaa.add(pocetnaTacka);
int rastojanje = (pocetnaTacka.x - zavrsmaTacka.x)/10;

for (int i = 1;i< Math.abs(ja.nextInt(8));i++){
        x =  lx + Math.abs(ja.nextInt(50));
        y =  ly + Math.abs(ja.nextInt(50));
         jaa.add(new Point(x,y));
        lx = x;
        ly = y;
     }

Graphics2D g2 = (Graphics2D) g;

    RenderingHints rh = new RenderingHints(
             RenderingHints.KEY_ANTIALIASING,
             RenderingHints.VALUE_ANTIALIAS_ON);
    g2.setRenderingHints(rh);
jaa.add(zavrsmaTacka);
Point lastpp = (Point)pocetnaTacka.clone();
for(Point pp: jaa)
{
    QuadCurve2D q = new QuadCurve2D.Float();
// draw QuadCurve2D.Float with set coordinates
q.setCurve(lastpp.x, lastpp.y, pp.x/3, pp.y/3, pp.x, pp.y);

  g2.draw(q);

    lastpp = (Point) pp.clone();

}
for(Point aa: jaa)
{
    System.out.println(aa.x + " , "+aa.y);
}

    } 

} 
```

这是它应该看起来的样子，但我不能这样： http: [//www.dodaj.rs/f/2U/qT/4LubxcQN/everytime.png](http://www.dodaj.rs/f/2U/qT/4LubxcQN/everytime.png) 每次应用程序运行时都会生成两个新点和曲线。 . 我尝试了 sin ， cos 函数，但我无法让它在两点之间工作。有谁能够帮我 。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T18:17:36.907

我解决了这个问题。：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package tryproject2;

import java.awt.Color;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Point;
import java.awt.RenderingHints;
import java.awt.geom.QuadCurve2D;
import java.util.ArrayList;
import java.util.Random;
import javax.swing.JPanel;

/**
 *
 * @author Q
 */
public class GUI extends JPanel {

    @Override
    protected void paintComponent(Graphics g) {
        super.paintComponent(g);
        Graphics2D g2 = (Graphics2D)g;
        ArrayList<Point> jaa = new ArrayList<Point>();
        Random pocetnaikrajnja = new Random();
              RenderingHints rh = new RenderingHints(
                      RenderingHints.KEY_ANTIALIASING,
             RenderingHints.VALUE_ANTIALIAS_ON);
        g2.setRenderingHints(rh);
        g2.setColor(Color.BLUE);
        Point pocetnaTacka = new Point(Math.abs(pocetnaikrajnja.nextInt(150)), Math.abs(pocetnaikrajnja.nextInt(200) + 100));
        g2.fillOval(pocetnaTacka.x,pocetnaTacka.y, 5, 5);

        jaa.add(pocetnaTacka);
        Point poslednjatacka = (Point) pocetnaTacka.clone();
        for (int i = 1;i< 6;i++){
            Point p = new Point(poslednjatacka.x + Math.abs(pocetnaikrajnja.nextInt(30) + 30),pocetnaTacka.y - Math.abs(pocetnaikrajnja.nextInt(30) + 30));
            poslednjatacka = p;
            jaa.add(p);
        }
         Point zavrsnaTacka  = null;

       zavrsnaTacka = new Point(jaa.get(jaa.size()-1).x+Math.abs(pocetnaikrajnja.nextInt(15) + 15),jaa.get(jaa.size()-1).y-70);

        jaa.add(zavrsnaTacka);
        g2.setColor(Color.RED);
        g2.fillOval(zavrsnaTacka.x,zavrsnaTacka.y, 5, 5);
        for(int i=0;i<jaa.size()-1;i++)
        {

               QuadCurve2D q = new QuadCurve2D.Float();
//if(i%2==0){
q.setCurve(jaa.get(i).x, jaa.get(i).y,jaa.get(i).x/1.2,jaa.get(i).y-Math.abs(pocetnaikrajnja.nextInt(35) + 35), jaa.get(i+1).x, jaa.get(i+1).y);
//}
//else
//{
  //  q.setCurve(jaa.get(i).x, jaa.get(i).y,jaa.get(i).x/1.2,jaa.get(i).y+Math.abs(pocetnaikrajnja.nextInt(35) + 35), jaa.get(i+1).x, jaa.get(i+1).y);

//}
  g2.draw(q);
}
        /**
         * Sakriven kod za grane.
        for(int i=1;i<jaa.size()-Math.abs(pocetnaikrajnja.nextInt(2)+1);i= i + Math.abs(pocetnaikrajnja.nextInt(5)))
        {
              QuadCurve2D q = new QuadCurve2D.Float();
              if(i%2==0)
                q.setCurve(jaa.get(i).x, jaa.get(i).y,jaa.get(i).x/1.2,jaa.get(i).y/1.2, jaa.get(i).x + Math.abs(pocetnaikrajnja.nextInt(5) + 7), jaa.get(i).y - Math.abs(pocetnaikrajnja.nextInt(10) + 60));
              else
                    q.setCurve(jaa.get(i).x, jaa.get(i).y,jaa.get(i).x/1.2,jaa.get(i).y/1.2, jaa.get(i).x + Math.abs(pocetnaikrajnja.nextInt(5) + 7), jaa.get(i).y + Math.abs(pocetnaikrajnja.nextInt(10) + 60));

              g2.draw(q);

        }
        */

    }
} 
```

# excel - Adodb.Connection 在 Excel VBA 操作系统中不起作用：windows 7 pro 64 位

> ID：13928431
> 
> 赞同：0
> 
> 时间：2012-12-18T07:41:08.857
> 
> 标签：excel, windows-7, adodb, vba

我有一个带有 VBA 代码的 Excel 文件，用于从在 Windows XP 上运行的 Oracle 数据库导入数据。

当我在 Windows 7 SP1 64 位上尝试时，下面代码的第一行出现错误。

```
Function getConnection2() As ADODB.Connection
  Dim cnn As New ADODB.Connection
  Dim strCnn As String

  strCnn = "Data Source=XXXXX;User ID=XXXXX;Password=XXXXXXX;"
  cnn.Provider = "OraOLEDB.Oracle"
  cnn.ConnectionString = strCnn

  cnn.Open
  Set getConnection2 = cnn
End Function 
```

**错误**：编译错误：自动化错误

我在 MSDASQL 中搜索了 Windows 7，但在 Microsoft 网站上找不到相同的内容。他们有它适用于 Windows 2003 [http://www.microsoft.com/en-in/download/details.aspx?id=20065](http://www.microsoft.com/en-in/download/details.aspx?id=20065)

我们有什么解决方案吗？感觉就像它无法为 ADODB 创建对象一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T09:14:46.033

这是一个编译错误吗？我认为在 Windows 7 中，您在 XP 32bit 上使用的库不再存在

VBA Editor Tools-->Reference--> Add Microsoft ActiveX Data Object XY Library

# delphi - 在 Delphi 中使用 Interbase Api

> ID：13928432
> 
> 赞同：2
> 
> 时间：2012-12-18T07:41:12.217
> 
> 标签：delphi

这是我将用户添加到 Interbase 安全数据库的 Delphi 代码

```
uses 
  IBHeader,IBExternals

var
  Form7: TForm7;
  userData: TUserSecData;
  userDataPtr: PUserSecData;
  status: array[0..19] of ISC_STATUS;
  isc_status: PISC_STATUS;

procedure TForm7.Create_UserClick(Sender: TObject);
begin
  { setup isc_status pointer }
  isc_status :=@status;
  { setup user data pointer to point to user data structure }
  userDataPtr :=@userData;
  { setup user data structure }
  userData.user_name :='aseem';

  userData.password :='xxxxxxx';

  userData.protocol :=sec_protocol_local;

  userData.dba_user_name :='SYSDBA';

  userData.dba_password :='xxxxxxx'; { Don_t hardcode this }

  userData.first_name :='asa';

  userData.last_name :='sad';

  userData.sec_flags :=sec_password_spec or sec_dba_user_name_spec or
    sec_dba_password_spec or sec_first_name_spec or sec_last_name_spec;

  { add user to security database }
  isc_add_user(isc_status,userDataPtr);

end; 
```

但是有一个错误，例如

> isc_add_user(isc_status,userDataPtr);
> 
> 在 IBheader.pas,IBExternals 中找不到函数

你能告诉我这段代码有什么问题吗？

我正在使用 Delphi 2007 专业版，并且正在使用 CodeGear 内源文件夹中的 IBheader.pas、IBExternals.pas 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T08:10:35.613

您可能希望使用 IBIntf.pas 中定义的接口：

```
uses IBHeader, IBExternals, IBIntf;

procedure TMyForm.RegisterNewUser;
var
  status: ISC_STATUS;
  status_vector: array[0..19] of ISC_STATUS;
  user_sec_data: UserSecData;
  gds: IGDSLibrary; 
begin
  //setup the user info and then
  ...
  //call the function
  gds := GetGDSLibrary;
  gds.LoadLibrary;
  try
    status := gds.isc_add_user(@status_vector[0], @user_sec_data);
    //check the status and act accordingly
  finally
    gds.FreeLibrary;
  end;
end; 
```

或者您可能希望通过调用它的 AddUser 方法来使用 TIBSecurityService，它是 IBX 的一部分，提供您正在使用的标头的同一个库。

或者，在现代 Interbase 中，您可能只想执行一条`CREATE USER`SQL 语句来执行该操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T08:43:01.907

下载**Unified Interbase**库并从中复制所有需要的 API 声明

TLama 还建议这篇文章：[http ://edn.embarcadero.com/article/25831](http://edn.embarcadero.com/article/25831)

# android - Android 4 中的雅虎货币汇率

> ID：13928436
> 
> 赞同：5
> 
> 时间：2012-12-18T07:41:33.287
> 
> 标签：android, android-4.0-ice-cream-sandwich, currency, yahoo-finance

在我的应用程序中，我需要获取不同货币的当前汇率。[正如this](https://stackoverflow.com/questions/4536689/android-how-to-retrieve-currency-exchange-rates)建议的那样，[this](https://stackoverflow.com/questions/12114754/programmatically-access-currency-exchange-rates-from-yahoo-finance-by-date)和[this](https://stackoverflow.com/questions/3679870/yahoo-finance-csv-file-will-not-return-dow-jones-dji?rq=1) question 一个很好的方法是使用 Yahoo Finance 服务。

因此，例如，当我想查找美元和加元之间的汇率时，我只需发送此链接：`http://download.finance.yahoo.com/d/quotes.csv?s=USDCAD=X&f=sl1d1t1ba&e=.csv`

这适用于我的带有 Android 2.3.4 的 Motorola Atrix 手机和带有 Google API 2.3.3 的模拟器。但是，当我尝试来自具有 Android ICS 4.0 的 Galaxy SII 和具有 Google API 4.0 的模拟器的完全相同的链接时，在这两种情况下，quotes.csv 文件都只包含“缺失符号列表”。

在四处挖掘之后，我发现如果没有找到费率，可能会发生这种反应。但此响应适用于我在 Android 4.0（Galaxy SII 或模拟器）下尝试的任何货币。因此，我无法获得 Android 4.0 的费率，但我可以使用 Android 2.x。

有没有人遇到过同样的问题？有什么解决方法吗？

编辑：这是处理从雅虎货币服务下载率的线程代码：

```
//show the progress dialog
downloadingDialog.show();
Runnable getRates = new Runnable() {
   public void run(){
      dataNotFound = false;
      final String baseDir = getApplicationContext().getFilesDir().getAbsolutePath();
      //download the rates from yahoo to a CSV file
      downloadFileViaHTTP (baseDir);
      //read the file line
      String filePath = baseDir + "/" + "quotes.csv";
      Log.d(tag, "-> filePath = " + filePath);
      try {
         // open the file for reading
         InputStream instream = new FileInputStream(filePath);
         // if file the available for reading
         if (instream != null) {
            // prepare the file for reading
            InputStreamReader inputreader = new InputStreamReader(instream);
            BufferedReader buffreader = new BufferedReader(inputreader);
            //read the line
            String fileLine = buffreader.readLine();
            Log.d(tag, "fileLine = " + fileLine);
            instream.close();
         }
      } 
      catch (Exception ex) {
         // print stack trace.
      }

   }
};
final Thread t = new Thread(getRates);
t.start(); 
```

这是我从雅虎网站下载quotes.csv 文件的功能：

```
public void downloadFileViaHTTP (String localPath) {
   Log.d(tag, "downloadFileViaHTTP...");

   try {
      //this is the Yahoo url
      String urlFile = "http://download.finance.yahoo.com/d/quotes.csv?s=" + fromCurrency + toCurrency + "=X&f=sl1d1t1ba&e=.csv";
      Log.d(tag,"urlFile = " + urlFile);
      URL url = new URL(urlFile);
      //create the new connection 
      HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();
      urlConnection.setRequestMethod("GET");
      urlConnection.setDoOutput(true);
      urlConnection.connect();

      //pointer to the downloaded file path
      String localFileName = localPath + "/" + "quotes.csv";
      //this is the actual downloaded file
      File MyFilePtrDest = new File(localFileName);
      Log.d(tag,"localFileName = " + localFileName);

      //this will be used in reading the data from the Internet
      InputStream inputStream = urlConnection.getInputStream();

      //this will be used to write the downloaded data into the file we created
      FileOutputStream fileOutput = new FileOutputStream(MyFilePtrDest);

      byte[] buffer = new byte[1024];
      int bufferLength = 0; //used to store a temporary size of the buffer

      //write buffer contents to file
      while ((bufferLength = inputStream.read(buffer)) > 0 ) {
         //add the data in the buffer to the file in the file output stream (the file on the sd card
         fileOutput.write(buffer, 0, bufferLength);
      }

      inputStream.close();
      //close the output stream when done
      fileOutput.flush();
      fileOutput.close();
      urlConnection.disconnect();
   }
   catch (IOException e) {
      //data were not found
      dataNotFound = true;
      // TODO Auto-generated catch block
      e.printStackTrace();
   }
} 
```

这是来自 Google API 2.3.3 模拟器的日志：

```
12-18 11:04:24.091: D/CurrencyConverter(414): downloadFileViaHTTP...
12-18 11:04:24.091: D/CurrencyConverter(414): urlFile = http://download.finance.yahoo.com/d/quotes.csv?s=EURUSD=X&f=sl1d1t1ba&e=.csv
12-18 11:04:24.282: D/CurrencyConverter(414): localFileName = /data/data/com.myapps.currencyconverter/files/quotes.csv
12-18 11:04:24.461: D/CurrencyConverter(414): -> filePath = /data/data/com.myapps.currencyconverter/files/quotes.csv
12-18 11:04:24.461: D/CurrencyConverter(414): fileLine = "EURUSD=X",1.3172,"12/18/2012","4:03am",1.317,1.3174 
```

这是来自 Google API 4.0 模拟器的日志：

```
12-18 11:47:36.130: D/CurrencyConverter(668): downloadFileViaHTTP...
12-18 11:47:36.130: D/CurrencyConverter(668): urlFile = http://download.finance.yahoo.com/d/quotes.csv?s=EURUSD=X&f=sl1d1t1ba&e=.csv
12-18 11:47:36.449: D/dalvikvm(668): GC_CONCURRENT freed 306K, 4% free 11714K/12167K, paused 5ms+10ms
12-18 11:47:36.951: D/CurrencyConverter(668): localFileName = /data/data/com.myapps.currencyconverter/files/quotes.csv
12-18 11:47:37.159: D/CurrencyConverter(668): -> filePath = /data/data/com.myapps.currencyconverter/files/quotes.csv
12-18 11:47:37.159: D/CurrencyConverter(668): fileLine = Missing Symbols List. 
```

正如您所看到的“fileLine”字符串变量，在第一种情况下，它获得了正确的汇率，而在第二种情况下，quotes.csv 文件仅包含“缺失符号列表”。价值。

EDIT2：我已经将完整的Android项目上传到一个[共享文件夹](https://www.dropbox.com/sh/c6dd25rc4vrn9f0/05XC0YARkm)，所以大家可以试试。您可以使用 Android 2.x 和 4 模拟器（或手机，如果您有 :-)）编译和运行

EDIT3：虽然这不是一个直接的答案，但它仍然是一种解决方法。我使用谷歌货币计算器而不是雅虎。要使用 Google 货币计算器，只需将 Yahoo 网址更改为以下网址：[http](http://www.google.com/ig/calculator?hl=en&q=1) ://www.google.com/ig/calculator?hl=en&q=1 " + fromCurrency + "=?" + toCurrency。点击[此链接](http://www.google.com/ig/calculator?hl=en&q=78EUR=?USD)到看一个将 78 欧元兑换成美元的例子。我检查了一下，它适用于两个 Android 版本。但是，如果有人发现雅虎网站发生这种情况的原因，最好与我们分享。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T18:20:07.440

`urlConnection.setDoOutput(true);`在 ICS 中运行时尝试删除 。因为 ICS 在 setDoOutput(true) 时将 GET 请求转为 POST。

[这里](https://stackoverflow.com/questions/8187188/android-4-0-ics-turning-httpurlconnection-get-requests-into-post-requests)和[这里](https://stackoverflow.com/questions/9365829/filenotfoundexception-for-httpurlconnection-in-ice-cream-sandwich)报告了这个问题

# python - 从 Facebook 相册中获取点赞数

> ID：13928444
> 
> 赞同：2
> 
> 时间：2012-12-18T07:41:56.477
> 
> 标签：python, facebook

我正在尝试为我的朋友开发一个 python 脚本，它将获取公共相册的链接，并使用“[请求](http://docs.python-requests.org/en/v1.0.0/)”模块计算每张照片的点赞数和评论数。这是我的脚本的代码

```
import re
import requests

def get_page(url):
    r = requests.get(url)
    content = r.text.encode('utf-8', 'ignore')
    return content

if __name__ == "__main__":
    url = 'https://www.facebook.com/media/set/?set=a.460132914032627.102894.316378325074754&type=1'
    content = get_page(url)
    content = content.replace("\n", '')

    chehara = "(\d+) likes and (\d+) comments"
    cpattern = re.compile(chehara)
    result = re.findall(cpattern, content)
    for jinish in result:
        print "likes "+ jinish[0] + " comments " + jinish [1] 
```

但这里的问题是，它只解析前 28 张照片的点赞和评论，而不是更多，这是什么问题？有人可以帮忙吗？

[编辑：模块“请求”只是加载网页，即变量内容包含链接相册的facebook网页的完整html源]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T11:30:13.037

使用 Facebook 图形 API：

对于专辑，其记录在此：

[https://developers.facebook.com/docs/reference/api/album/](https://developers.facebook.com/docs/reference/api/album/)

使用 limit 属性进行测试，因为它相当慢：

[http://graph.facebook.com/460132914032627/photos/?limit=10](http://graph.facebook.com/460132914032627/photos/?limit=10)

编辑

我刚刚意识到 like_count 不是 json 的一部分，您可能必须为此使用 fql

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-21T03:04:05.387

如果您想查看下一页，您需要将 after 属性添加到您的请求中，如以下 URL：

```
https://graph.facebook.com/albumID/photos?fields=likes.summary(true),comments.summary(true)&after=XXXXXX&access_token=XXXXXX 
```

您可以查看这个[JavaScript 项目](https://stackoverflow.com/questions/32085722/how-to-count-all-of-the-likes-and-comments-in-a-facebook-photo-album)以供参考。

# python - 检查单词的集合（pyenchant）

> ID：13928446
> 
> 赞同：0
> 
> 时间：2012-12-18T07:42:11.867
> 
> 标签：python, word, pyenchant

我想检查 Python 中的字符串是否是使用 PyEnchant 的单词集合。
例如，我想以某种方式检查连接的字符串是否为单词：

```
eng = enchant.Dict("en_US")
eng.check("Applebanana") 
```

我知道这将返回 false，但我希望它返回 true，因为 Apple +banana 是 PyEnchant 的合法词。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T08:10:49.713

如果您将自己限制为由其他两个单词组合而成的单词，您可以自己检查组合：

```
>>> s = "applebanana"
>>> splits = [(s[:i], s[i:]) for i in range(1,len(s))]
>>> splits
[('a', 'pplebanana'), ('ap', 'plebanana'), ('app', 'lebanana'), 
 ('appl', 'ebanana'), ('apple', 'banana'), ('appleb', 'anana'), 
 ('appleba', 'nana'), ('appleban', 'ana'), ('applebana', 'na'), 
('applebanan', 'a')]
>>> any((eng.check(item[0]) and eng.check(item[1])) for item in splits)
True 
```

当然，您可以将其扩展到两个以上，但这应该让您大致了解您的前进方向。

# ajax - Django文件上传ajax调用post使用jquery

> ID：13928448
> 
> 赞同：0
> 
> 时间：2012-12-18T07:42:20.997
> 
> 标签：ajax, django, file, upload

我究竟如何使用 ajax 调用上传文件？我在模板中的表格

```
<form action="images/" enctype="multipart/form-data" method="POST" class="upload">                                            
    <table>
        {{ form.as_table }}
        <td><input type = "button" onclick="" value="Upload" id = "test"/</td>
    </table>
</form> 
```

我的 jQuery 函数：

```
$(document).ready(function(){
    $("#test").click(function(){
        var string = $("form.upload").serialize();
        alert(string);
        $.ajax({
            url :'/test/',
            type:'post',
            data: {datas:string},  
        dataType: "json",           
         success: function(response) {
                    alert(response);
                  }
        });
    });
}); 
```

我的观点 ：

```
@csrf_exempt        
def test(request):
    if request.is_ajax():
        form = ImageUploadForm(request.POST)
        if form.is_valid():
            form.save()
        return HttpResponse("Saved !!!!") 
```

在这里，我有文件上传的视图，但文件没有出现在 django 视图的表单变量中。我应该怎么做才能在视图中获取文件？该表单有一个用于上传的文件字段。它是一种模型形式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T07:58:18.110

这里缺少 2 个重要部分：

1.  jQuery.serialize() 不对文件字段做任何事情。查看[jQuery 表单插件](http://jquery.malsup.com/form/)，了解通过 Ajax 发布带有文件的表单的可靠方法
2.  您需要将上传的文件显式传递给表单构造函数：`form = ImageUploadForm(data=request.POST, files=request.FILES)`

# php - 监控访客停留在其他网站上的跟踪代码

> ID：13928451
> 
> 赞同：1
> 
> 时间：2012-12-18T07:42:52.587
> 
> 标签：php, javascript, cookies, cross-domain, tracking

我希望人们注册我的网站并给他们一个独特的 javascript 片段，他们必须把它放在他们的网站上。我有 2 个问题。

1）假设我使用下面的代码来跟踪他们网站上的访问持续时间。下面的跟踪跟踪一个人何时访问该站点并离开它，但我如何确保他们真正离开该站点而不仅仅是访问该站点域上的另一个页面（意味着用户仍在他们的站点上）。饼干？

```
var timeLog = {
        start: null,
        end: null,
        init: function(){
            this.start = new Date().getTime();
        },
        sendResults: function(){
            this.end = new Date().getTime();
            var jData = { "client": "some-access-string", "start": this.start, "end": this.end };

            var client = new XMLHttpRequest();
            client.open("POST", "http://yoursite.com/process_info.php");
            client.setRequestHeader("Content-Type", "text/plain;charset=UTF-8");
            client.send(JSON.stringify(jData));
        }
    };

    window.onbeforeunload = function() {
        timeLog.sendResults();
    };

    timeLog.init(); 
```

2）我还没有完成跨站点脚本，所以我想知道如果 javascript 片段调用 process_info.php 脚本，我是否可以尝试设置 cookie 并获取 $_SERVER 变量，例如 $_SERVER['HTTP_USER_AGENT']。由于实际的 php 脚本将在不同的域上，这会起作用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T07:59:01.310

此代码不是跨浏览器；最好用于`Image`执行跟踪，只需将所有跟踪数据转储到 URL 本身中。

优点是您可以提供一个`<noscript>`包含不可见跟踪像素的片段，而无需进行太多修改。脚本本身的分发和初始化可以通过这样的小片段来完成[，](https://support.google.com/analytics/bin/answer.py?hl=en&answer=1008080)它将在正文中插入一个`<script>`标签并运行它。

另外，不要使用`.onbeforeunload()`，那东西很讨厌。最好使用会话属性来确定站点离开，例如请求之间的时间；如果您在 X 分钟内没有收到另一个请求，则假定用户已离开。

只要 cookie 域与脚本的 URL 相对应（即没有第三方 cookie），从您的 PHP 脚本设置 cookie 就应该按预期工作。

# java - 当我将图像生成为 PDF 时，我得到了这个异常

> ID：13928452
> 
> 赞同：2
> 
> 时间：2012-12-18T07:42:53.113
> 
> 标签：java, jsp

我的例外

```
ClientAbortException:  java.net.SocketException: Broken pipe
at org.apache.catalina.connector.OutputBuffer.doFlush(OutputBuffer.java:319)
at org.apache.catalina.connector.OutputBuffer.flush(OutputBuffer.java:288)
at org.apache.catalina.connector.CoyoteOutputStream.flush(CoyoteOutputStream.java:98)
at javax.imageio.stream.MemoryCacheImageOutputStream.flushBefore(MemoryCacheImageOutputStream.java:177)
at javax.imageio.stream.MemoryCacheImageOutputStream.close(MemoryCacheImageOutputStream.java:163)
at javax.imageio.ImageIO.write(ImageIO.java:1567)
at org.jfree.chart.encoders.SunPNGEncoderAdapter.encode(SunPNGEncoderAdapter.java:127)
at org.jfree.chart.encoders.EncoderUtil.writeBufferedImage(EncoderUtil.java:134)
at org.jfree.chart.ChartUtilities.writeBufferedImageAsPNG(ChartUtilities.java:610)
at org.apache.jsp.SRAnalysisGraphReportPDF_jsp._jspService(SRAnalysisGraphReportPDF_jsp.java:173)
at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:386)
at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
at java.lang.Thread.run(Thread.java:662)
 **Caused by: java.net.SocketException: Broken pipe**
at java.net.SocketOutputStream.socketWrite0(Native Method)
at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:92)
at java.net.SocketOutputStream.write(SocketOutputStream.java:136)
at org.apache.coyote.http11.InternalOutputBuffer.realWriteBytes(InternalOutputBuffer.java:760)
at org.apache.tomcat.util.buf.ByteChunk.flushBuffer(ByteChunk.java:432)
at org.apache.coyote.http11.InternalOutputBuffer.flush(InternalOutputBuffer.java:318)
at org.apache.coyote.http11.Http11Processor.action(Http11Processor.java:985)
at org.apache.coyote.Response.action(Response.java:183)
at org.apache.catalina.connector.OutputBuffer.doFlush(OutputBuffer.java:314)
... 27 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-03T04:14:39.540

```
Please go through bellow code :-

package com.test;

import com.lowagie.text.Rectangle;
import com.lowagie.text.Document;
import com.lowagie.text.Paragraph;
import com.lowagie.text.pdf.PdfWriter;
import java.io.File;
import java.io.FileOutputStream;
/**
*
* @author Jamsheer T
* +91 9846716175
*/
public class PDFConversion
{
/**
* This method is used to convert the given file to a PDF format
* @param inputFile - Name and the path of the file
* @param outputFile - Name and the path where the PDF file to be saved
* @param isPictureFile
*/
private void createPdf(String inputFile, String outputFile, boolean isPictureFile)
 {
  /**
  * Set the page size for the image
  */
 Rectangle pageSize = new Rectangle(2780, 2525);
 Document pdfDocument = new Document(pageSize);
 String pdfFilePath = outputFile;
 try
 {
     FileOutputStream fileOutputStream = new FileOutputStream(pdfFilePath);
     PdfWriter writer = null;
     writer = PdfWriter.getInstance(pdfDocument, fileOutputStream);
     writer.open();
     pdfDocument.open();
     /**
     * Proceed if the file given is a picture file
     */
      if (isPictureFile)
     {
      pdfDocument.add(com.lowagie.text.Image.getInstance(inputFile));
     }
     /**
     * Proceed if the file given is (.txt,.html,.doc etc)
     */
     else
     {
     File file = new File(inputFile);

     }

     pdfDocument.close();
     writer.close();
   }
   catch (Exception exception)
   {
     System.out.println("Document Exception!" + exception);
    }
  }

  public static void main(String args[])
  {
   PDFConversion pdfConversion = new PDFConversion();
   pdfConversion.createPdf("C:\\Users\\Jamsheer T\\Desktop\\test\\Lily flower   
  wallpaper.jpg", "C:\\Users\\Jamsheer T\\Desktop\\test\\myfile.pdf", true);

  }
  } 
```

# javascript - 如何在chrome中提交javascript表单

> ID：13928454
> 
> 赞同：-1
> 
> 时间：2012-12-18T07:43:05.177
> 
> 标签：javascript, jquery, asp.net-mvc-3

您好我在 JavaScript、jQuery 和 MVC 应用程序中工作。

```
document.forms['shipform'].submit(); 
```

在这里，我像这样提交我的表格。
在这个页面中我总共有三个表格。
这是我的表格：

```
<% using (Html.BeginForm("OrderShipments", "Shipments", FormMethod.Post, new { @id = "shipform" })) // Creates <form>
{%>
    <input type="hidden" id="Hiddenid" name="orderId" />
    <input type="submit" value="book" style="display: none" />
<%} %> 
```

它不适用于 Chrome，但它适用于 Firefox。

```
document.forms[0].submit(); 
```

`forms[0]`如果我在单页中有三个表单，我会使用哪种表单？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T07:47:12.840

您拥有的代码将根据其名称提交表单：

```
 document.forms['shipform'].submit();
                ^^^ form name not ID 
```

如果您想通过 ID 提交表单，请使用：

```
 document.getElementById('shipform').submit(); 
```

或 jQuery：

```
$('#shipform').submit(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T07:44:25.670

如果你使用 jQuery，你可以这样做：

```
$('#shipform').submit(); 
```

假设代码输出一个表单`ID="shipform"`

```
<form id="shipform"></form> 
```

*   [http://api.jquery.com/submit/](http://api.jquery.com/submit/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T07:47:56.037

您可以使用“获取”表单`getElementById()`，然后`submit()`：

```
document.getElementById("shipform").submit(); 
```

这应该以您的形式发送。
（假设您的表单上的`{ @id = "shipform" }`设置为）`id``"shipform"`

如果您使用`forms[0]`，它应该使用页面上的“第一个”表单，即在您的 html 中首先加载的表单。

# asp.net-mvc-4 - 具有可编辑和只读数据的 MVC ViewModel 最佳实践

> ID：13928455
> 
> 赞同：2
> 
> 时间：2012-12-18T07:43:31.293
> 
> 标签：asp.net-mvc-4, asp.net-mvc-viewmodel

我想知道在同一视图模型中处理可编辑/只读字段的最佳做法是什么。对于更大的 ViewModel，我正面临这个问题，但假设我有一个非常简单的 ViewModel：

```
public class BaseListViewModel
{
    public int Id { get; set; }
    public bool IsCheckedForAction { get; set; }
    public string DisplayName { get; set; }
} 
```

我的部分视图：

```
@model Wims.Website.ViewModels.Shared.BaseModelListViewModel
@using Wims.Website.Classes.Helpers.ExtentionMethods
<div class="dataDetail">
        <div>
            <div class="float-left">
                @Html.CheckBoxFor(model => model.IsCheckedForAction)
            </div>

            <div class="float-left">
                @Html.LabelFor(model => model.IsCheckedForAction, Model.DisplayName)

                @Html.GenerateSecureDataControls(w => w.Id)
            </div>
        </div>
    </div>
<div style="clear: both"></div> 
```

显然，当我发布我的数据时，DisplayName 不会被填写。让我们假设一些验证失败，我只返回我收到的数据，DisplayName 将丢失。

```
 [HttpPost]

public ActionResult Edit(BaseListViewModel stuff)
{
    if (ModelState.IsValid)
    {
        ...
        return View("Index");
    }
    return View(stuff);
} 
```

我知道有几种方法可以解决这个问题：

1) 添加

```
 @Html.HiddenFor(model => model.DisplayName) 
```

在视图中，如果它只有 1 个字段，那没关系，但是，如果我确实有 10 个仅显示字段会发生什么？

2) 在 [HttpPost] 中重新查询数据 if (!Model.isValid)。

3）我想我可以将它缓存在 TempData 中？

最好的方法是什么？谢谢！

**编辑：如果验证失败，我试图避免重新查询数据**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T08:38:19.757

我会使用[PRG](http://en.wikipedia.org/wiki/Post/Redirect/Get)模式。它更干燥，因为您只在 GET 操作中构建 ViewModel。如果验证失败，则重定向到 GET 并从 tempdata 中获取模型状态。

本文中的属性，[http://www.jefclaes.be/2012/06/persisting-model-state-when-using-prg.html](http://www.jefclaes.be/2012/06/persisting-model-state-when-using-prg.html)，或来自 MVC Contrib [https://github.com/mvccontrib/MvcContrib /blob/master/src/MVCContrib/Filters/ModelStateToTempDataAttribute.cs](https://github.com/mvccontrib/MvcContrib/blob/master/src/MVCContrib/Filters/ModelStateToTempDataAttribute.cs)，方便在 POST 和 GET 之间传递 Modelstate

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T04:26:39.053

POST 操作应执行与 GET 操作相同的视图模型初始化。您可以将初始化代码移动到控制器中的公共私有函数中。这样做的原因是，如果由于对相同数据的某些并发更改而导致验证失败，则验证错误将与新数据一起显示给用户。如果视图允许，您也可以使用 PRG 模式。

# c++ - 排序多维数组/向量

> ID：13928457
> 
> 赞同：0
> 
> 时间：2012-12-18T07:43:41.917
> 
> 标签：c++, sorting, vector

我想根据存储在元素 sequ[i][2] 和 sequ[i][3] 中的两个值对数组进行排序。

如果 sequ[i][2] 具有相似的值，它会按 sequ[i][3] 值对其进行排序。

```
vector< vector<int> > sequ;
int m = 1024, n = 32;
sequ.resize(m);
for(int i = 0 ; i < m ; ++i){
sequ[i].resize(n);
}
sort(sequ[0].begin(),sequ[0].end()); 
```

不幸的是，我只知道如何对整个数组进行排序，而不是特定元素。我该怎么做呢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T07:58:30.380

执行此操作的非 lambda 方法类似于：

```
bool func(const vector<int> &v1, const vector<int> &v2)
{
    if(v1[2] < v2[2]) return true;
    if(v1[2] > v2[2]) return false;
    return v1[3] < v2[3];
}

...

sort(sequ.begin(),sequ.end(),func); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T07:50:08.817

如果你有 C++11，你应该尝试这些方面的东西。

```
sort(  secu.begin(), secu.end(), [](const vector<int>&v1, const vector<int>&v2) -> bool
{
  return v1[2] < v2[2] || (v1[2] == v2[2] && (v1[3] < v2[3]) );
}); 
```

我不是 C++11 lambda 语法的超级专家，但你应该明白这一点。如果您没有 C++11，您可以随时推出自己的比较函子。

# ruby-on-rails - 使用打开的 uri 获取 500 内部服务器错误

> ID：13928461
> 
> 赞同：2
> 
> 时间：2012-12-18T07:44:05.373
> 
> 标签：ruby-on-rails

我有一个书签站点，用 ruby​​ on rails 完成，其中需要打开许多 URL 并抓取其标题和 base_uri。用于打开 URL 的方法是 open(url)。当我尝试使用 open URI 方法打开[http://www.mysite.com/](http://www.mysite.com/)时，出现 500 Internal server error。

TestsController#test 中的 OpenURI::HTTPError

500内部服务器错误

我可以通过浏览器访问此 URL。

我的代码贴在下面

```
require 'hpricot'
    require 'open-uri'
    require 'timeout'
    require 'net/http'
url = 'http://www.mysite.com/'
@filep   = open(url)
base_uri =    @filep.base_uri 
```

我也使用代码对 hpricot 进行了同样的尝试。

@doc = Nokogiri::HTML(open(url).read) 但得到同样的错误。

请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T17:36:15.857

我有同样的问题; 可以在我的浏览器中打开网站，但不能通过 open-uri 。添加用户代理并没有解决它，但使用“restclient”类确实

```
require 'restclient'
url = 'http://www....'
user_info = RestClient.get(url, "User-Agent" => "Ruby") 
```

# maven - 如何使用 mojo 搜索 maven 工件？

> ID：13928462
> 
> 赞同：0
> 
> 时间：2012-12-18T07:44:16.410
> 
> 标签：maven, mojo, artifact

我正在绞尽脑汁从 repo (Nexus) 下载工件。但大多数时候我只知道工件 Id 和版本。有没有办法只使用工件 ID 和组 ID 下载工件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T08:35:13.443

我想到的第一件事是什么？你为什么不使用[maven-dependency-plugin](http://maven.apache.org/plugins/maven-dependency-plugin/copy-dependencies-mojo.html)而且仅基于 groupId 和 artifactId 下载工件是没有意义的，因为在 Maven 中，工件由 groupId、artifactId**和**version 标识，否则它不是唯一的。否则，可以使用 nexus 的 REST API 来搜索工件列表。

# .htaccess - 当某些查询字符串存在时允许访问，否则拒绝

> ID：13928467
> 
> 赞同：2
> 
> 时间：2012-12-18T07:44:30.290
> 
> 标签：.htaccess, mod-rewrite, apache2

`s=stick_path`我想在查询字符串中有或`s=stick_relative`在查询字符串中时允许访问我的网站，否则拒绝访问。例如，在或时允许访问，`www.domain.com/?s=stick_path`但在 时拒绝访问。`www.domain.com/?s=ck_relative``www.domain.com/?s=action_path`

我试过简单的例子，`www.domain.com/?s=stick_path`但它似乎不起作用。

```
RewriteCond %{QUERY_STRING} !^s=stick_path$
RewriteRule ^.* - [F,L] 
```

`.htaccess`如果 s 参数出现两次，我认为可以欺骗规则`www.domain.com/?s=stick_path&s=action_path`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T07:53:03.733

当我尝试转到时，您的规则对我有用`http://localhost/?s=stick_path`，但如果您希望能够在任何地方检查查询字符串，请尝试：

```
RewriteCond %{QUERY_STRING} !(^|&)s=stick_path(&|$) 
RewriteCond %{QUERY_STRING} !(^|&)s=stick_relative(&|$)
RewriteRule ^.* - [F,L] 
```

如果查询字符串中的任何一个`s=stick_path`或`s=stick_relative`位于任何位置，则此方法有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-10T05:02:01.840

^(*从 OP 的更新中提取的答案*)

`RewriteEngine ON`.htaccess 中缺少。

所以，正确的代码是：

```
RewriteEngine on
RewriteCond %{QUERY_STRING} !^s=stick_path$
RewriteRule ^.* - [F,L] 
```

# indexing - 我的索引重定向

> ID：13928468
> 
> 赞同：0
> 
> 时间：2012-12-18T07:44:34.633
> 
> 标签：indexing

我的网站索引地址是这样的：

```
index.php?sid=8 
```

我们每周都会创建新的 sid。例如下周是 9 ，然后是 10 ，然后是 ... 。我们想将所有用户重定向到我们创建的最后一个 sid。我怎样才能做到这一点？tnx

# javascript - 在 JS 文件中传输弹出的 HTML 内容

> ID：13928470
> 
> 赞同：3
> 
> 时间：2012-12-18T07:44:42.287
> 
> 标签：javascript, jquery, html

我有这个工作的弹出 HTML 代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head profile="http://gmpg.org/xfn/11">
<title>PopUp</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<link rel="stylesheet" type="text/css" media="all" href="style.css" />

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script type="text/javascript" src="js/jquery.popup.min.js"></script>

<script type="text/javascript">
jQuery(function () {
    jQuery().popup();
});
</script>
</head>
<body>

<a href="#" id="triggerforpopup" rel="popup-open">Show popup</a>

<div id="popup-box">
This is the pop up content. The quick brown fox jumps over the lazy dog.
</div>
</body>
</html> 
```

实际弹出内容在：

```
<div id="popup-box">
</div> 
```

是否可以将弹出的 HTML 内容 (..) 传输到我的 JS 文件？实际上在jQuery函数的点击事件里面？例子：

```
jQuery( document ).ready( function($) {
    $('#triggerforpopup').live('click',(function() {
        //launch the pop code to HTML
    }));
}); 
```

因此，在单击事件之后，JS 会简单地将其弹出，但它源自 JS 文件内部，而不是隐藏在现有内容上的 HTML。

原因是我正在编写一个 Wordpress 插件，将所有这些信息放在一个 JS 文件中会很方便。我不想在默认隐藏的现有模板内容中添加额外的 HTML 代码。

感谢您的帮助。

**更新：**我在这里创建了一个小提琴：http: [//jsfiddle.net/codex_meridian/56ZpD/3/](http://jsfiddle.net/codex_meridian/56ZpD/3/)

```
(function (a) {
a.fn.popup = function (b) {
    var c, d = [self.pageXOffset || document.documentElement.scrollLeft || document.body.scrollLeft, self.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop];
    a("body").append(c = a('<div id="popup-overlay"></div>')), _init = function () {
        _add_overlay(), _add_buttons(), a("#popup-box #popup-content").css("max-height", a(window).height() - 400), a(window).on("resize", function () {
            a("#popup-box #popup-content").css("max-height", a(window).height() - 400)
        })
    }, _add_overlay = function () {
        c.css({
            opacity: .85,
            position: "absolute",
            top: 0,
            left: 0,
            width: "100%",
            "z-index": 99999,
            display: "none",
            height: a(document).height()
        })
    }, _show_overlay = function () {
        c.is(":visible") || c.fadeIn("fast")
    }, _hide_overlay = function () {
        c.is(":visible") && c.hide()
    }, _add_buttons = function () {
        a("a[rel=popup-close]").click(function () {
            return _hide_box(), !1
        }), a("a[rel=popup-open]").click(function () {
            return _show_box(), !1
        })
    }, _show_box = function () {
        if (!a("#popup-box").is(":visible")) {
            _show_overlay(), a("#popup-box").fadeIn("fast");
            var b = a("html");
            b.data("scroll-position", d), b.data("previous-overflow", b.css("overflow")), b.css("overflow", "hidden"), window.scrollTo(d[0], d[1])
        }
    }, _hide_box = function () {
        if (a("#popup-box").is(":visible")) {
            var b = a("html"),
                c = b.data("scroll-position");
            b.css("overflow", b.data("previous-overflow")), window.scrollTo(c[0], c[1]), _hide_overlay(), a("#popup-box").hide()
        }
    }, _init()
}
})(jQuery) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T07:51:56.157

您可以直接在 JS 中将内容作为字符串写入，然后使用元素的 innerHTML 属性来设置它们的值。您可以在纯 JS 中执行此操作，如下所示。

```
var popup = document.getElementById("popup-box");
var html = "This is the pop up content. The quick brown fox jumps over the lazy dog.";
popup.innerHTML = html; 
```

您可以在 jQuery 中执行以下操作：

```
$('#triggerforpopup').on('click', function() {
    $("#popup-box").html(html); // Where html is a variable containing your text.
}); 
```

注意：您可以在`html`字符串中写入 HTML 标记等，它们将按照您在页面上的预期呈现。您不仅限于纯文本。

注意：`live`自 jQuery 1.7 起已在 jQuery 中弃用。它已被替换为`on`。请参阅[http://api.jquery.com/live/](http://api.jquery.com/live/)和[http://api.jquery.com/on/](http://api.jquery.com/on/)。

* * *

如果您想在评论中提到的 JavaScript 中包含所有内容，您可以这样做：

```
var popup = document.createElement("div");
popup.id = "popup-box";
popup.innerHTML = "your html here";
document.getElementById("parent element id").appendChild(popup); 
```

这样做是创建一个新的 div 元素，设置其 id，然后将其附加为您选择的父元素的子元素。您可以将 HTML 字符串简单地插入到另一个元素中，但是通过在此处创建一个元素，您可以更灵活地放置它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T07:55:59.383

采用

`var popupHtml = $('<div>This is the pop up content. The quick brown fox jumps over the lazy dog.</div>');`

> popupHtml.popup();

我在您使用的弹出插件中发现了很多问题。修复它们以使其正常工作。看看[http://jsbin.com/oyamiy/6/watch](http://jsbin.com/oyamiy/6/watch)

# php - WooCommerce 股票未更新

> ID：13928473
> 
> 赞同：0
> 
> 时间：2012-12-18T07:45:10.233
> 
> 标签：php, wordpress, csv, woocommerce, stock

我正在使用 Woo Product Importer 插件来更新我的 WooCommerce 产品，除了库存数量问题外，一切似乎都在工作。

使用插件更新产品后，前端和后端产品列表上的库存计数不反映对 CSV 的更改，但是如果我单击单个产品并查看库存计数，它确实反映了更改，如果然后我点击更新前端也将被更新。

我检查了数据库中的 postmeta 表，其中的库存数量也反映了 CSV 中的变化，似乎要显示库存数量的唯一方法是单击每个单独产品的更新，这是不可行的拥有数以千计的产品和每日更新。

有谁知道我该如何解决这个问题，也许是对每种产品进行某种大规模更新以使其重新检查库存数量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T13:41:06.420

我认为这是一个缓存问题，请查看 wp_options 表并尝试找到与之相关的内容。

另一种方法是修改导入的插件以包含从前端更新产品的钩子。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-04T12:08:18.100

```
data = {
"stock_quantity": "24.54"
"manage_stock": 500
} 
```

只需添加`manage_stock = true`.

# java - Spring - 上传表单 - 无法获取文件列表

> ID：13928474
> 
> 赞同：2
> 
> 时间：2012-12-18T07:45:11.327
> 
> 标签：java, jsp, spring-mvc, file-io

使用 Spring MVC 上传文件（多个文件）时出现以下错误。

```
java.lang.NullPointerException
    com.mkyong.common.controller.FileUploadController.save(FileUploadController.java:34)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    java.lang.reflect.Method.invoke(Method.java:597) 
```

jsp

```
<form:form method="post" action="save" 
        modelAttribute="uploadForm" enctype="multipart/form-data">
    <p>Select files to upload. Press Add button to add more file inputs.</p>
    <input id="addFile" type="button" value="Add File" />
    <table id="fileTable">
        <tr>
            <td><input name="files[0]" type="file" /></td>
        </tr>
        <tr>
            <td><input name="files[1]" type="file" /></td>
        </tr>
    </table>
    <br/><input type="submit" value="Upload" />
</form:form> 
```

控制器

```
@RequestMapping(value = "/save", method = RequestMethod.POST)
public String save(
        @ModelAttribute("uploadForm") FileUploadForm uploadForm,
                Model map) {
    List<MultipartFile> files = uploadForm.getFiles();

    List<String> fileNames = new ArrayList<String>();
    //counting the file size
    System.out.println("Files count :"+files.size());

    if(null != files && files.size() > 0) { //HERE 'files' is NULL
        for (MultipartFile multipartFile : files) {

            String fileName = multipartFile.getOriginalFilename();
            fileNames.add(fileName);
            //Handle file content - multipartFile.getInputStream()

        }
    } 
```

谁能帮我解决这个问题？我仍在调试为什么我无法将文件（uploadForm）从 jsp 传递到控制器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T08:54:59.650

我刚刚解决了。您需要添加 `<bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver" />`您的 dispatcher-servlet.xml。

如果您对多个文件使用多部分数组，则仅使用数组名称。喜欢

```
private MultipartFile [] file; 
```

Getter 和 Setter 以及形式

```
<form:form commandName="uploadFile" method="post" enctype="multipart/form-data">
        <input type="file" name="file"/>
        <input type="file" name="file"/>
        <input type="file" name="file"/>
        <input type="submit" value="Submit"/>
    </form:form> 
```

# objective-c - 自定义 NSTextView 边框问题

> ID：13928479
> 
> 赞同：2
> 
> 时间：2012-12-18T07:45:41.653
> 
> 标签：objective-c, cocoa, drawing, nstextview

我想制作 NSTextView 点边框，我的 drawRect: 代码如下

```
- (void)drawRect:(NSRect)dirtyRect
{
    [super drawRect:dirtyRect];

    CGFloat lineDash[2];

    lineDash[0] = 1.0;
    lineDash[1] = 1.0;

    NSBezierPath *path = [NSBezierPath bezierPathWithRect:self.bounds];
    [path setLineDash:lineDash count:2 phase:0.0];
    [path stroke];
} 
```

我也想在文本和边框之间留出一些边距，我的代码如下

```
[textView setTextContainerInset:NSMakeSize(0, 10.0)];
[textView setString:@"This is a testThis is a testThis is a testThis is a test"]; 
```

但结果是顶部边框丢失，谁知道如何解决这个问题？ ![图片](../Images/b62213b6e719b072cf067c994ed5380c.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T21:59:39.877

您需要子类`NSScrollView`化而不是`NSTextView`. 然后你会有很好的表现。可以这样做：

**NSScrollView 子类：**

```
-(void)tile {
    id contentView = [self contentView];
    [super tile];
    [contentView setFrame:NSInsetRect([contentView frame], 1.0, 1.0)];
}

-(void)drawRect:(NSRect)dirtyRect {
    CGFloat lineDash[2];

    lineDash[0] = 1.5;
    lineDash[1] = 1.5;

    NSBezierPath *path = [NSBezierPath bezierPathWithRect:self.bounds];
    [path setLineDash:lineDash count:2 phase:0.0];
    [path setLineWidth:2];
    [path stroke];
} 
```

**结果：**

![截图图片](../Images/66098c23cc970b80ca96949a3b4dd071.png)

# java - 无法从命令提示符运行 HelloWorld.java

> ID：13928482
> 
> 赞同：-1
> 
> 时间：2012-12-18T07:45:48.953
> 
> 标签：java

我在运行 jdk1.6.0_33 的 Windows 7 系统中遇到了一个奇怪的问题

当我尝试从命令提示符运行一个简单的 java 程序时，它会打开一个新窗口（类似于 java 框架）并突然消失。命令提示符上没有显示结果，我也无法终止进程（使用 Ctrl+C）或在此之后关闭命令提示符。每次执行此操作时都会创建一个 java 进程。我尝试使用任务管理器终止进程，但这也不起作用。

我可以使用 eclipse 运行相同的程序。这是我的程序

```
class HelloWorld{
    public static void main(String [] args)
    {
        System.out.println("Hello World");
    }
} 
```

环境变量设置如下：

```
Path=C:\Program Files\Java\jdk1.6.0_33\bin
classpath=. 
```

我使用的命令是，

```
javac HelloWorld.java
java HelloWorld 
```

为什么会这样？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T08:02:42.023

我不确定，但我认为如果您在 Windows 上的命令提示符下使用`java`vs会发生这种情况：`javaw`

参考：

*   Windows的[`java`](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/java.html)命令手册页。
*   [java/javaw/javaws之间的区别](https://stackoverflow.com/questions/8194713/whats-the-difference-between-java-javaw-javaws)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-18T07:51:46.493

如果您的 java 类路径配置正确。

在命令提示符下键入 javac 命令

您将获得 java 编译器信息。

编译类后，如果创建了任何 .class 文件，请找到您的文件夹位置。

# google-maps-api-3 - 将地理编码的谷歌地图添加到 div

> ID：13928485
> 
> 赞同：-1
> 
> 时间：2012-12-18T07:45:58.563
> 
> 标签：google-maps-api-3, geolocation

我花了一整天的时间查看文档和示例，但我正在彻底改变自己。我希望我能被引导到正确的方法来做到这一点。我正在使用 jQuery。

目的是制作一张地图，向学生展示[故事](http://www.abc.net.au/btn/story/s3619585.htm)所指的国家/地区。我曾经使用[剪切和粘贴解决方案](http://awardwinningfjords.com/2009/07/22/google-maps-with-jquery.html)实现过它，但是在切换 div 时它不起作用 - 长话短说，我觉得我需要重做它，但有点超出我的深度。我[在这里](https://stackoverflow.com/q/5984179/43465)的其他地方找到了地理编码的代码：

```
var geocoder = new google.maps.Geocoder();
var address = $("#infopanel .map a.header").text();
map = $("#infopanel .map div");

geocoder.geocode( { 'address': address}, function(results, status) {
if (status == google.maps.GeocoderStatus.OK) {
    var latitude = results[0].geometry.location.lat();
    var longitude = results[0].geometry.location.lng();
    } 
}); 
```

这是添加地图的代码，但请注意，我不知道如何将地理编码的结果放入 mapOptions 的中心变量中：

```
var mapOptions = {
    center: new google.maps.LatLng(*geocoded-data*),
    zoom: 3,
    mapTypeId: google.maps.MapTypeId.TERRAIN,
    panControl: false,
    zoomControl: true,
    mapTypeControl: false,
    scaleControl: false,
    streetViewControl: false,
    overviewMapControl: false
   };

    new google.maps.Map(map,mapOptions); 
```

这是[此答案](https://stackoverflow.com/a/13734729/43465)中带有调整大小/居中解决方案的 slideToggle 代码，但同样，我如何将地理编码数据放入 setCenter：

```
$("#infopanel ul li > div").slideToggle("fast"); // hide the content
$("#infopanel a.header").click(function(e){ // toggle the content.
var hascontent = $(this).next("div");
if (hascontent.length == 1) {
    e.preventDefault();
    $(this).next().slideToggle("slow", function () {
        google.maps.event.trigger(map, "resize"); // resize map
        map.setCenter(*geocoded-data*); // center map
        });
    }
}); 
```

对于上下文，这是所有内容所在的 HTML：

```
<li class="map"><a href="" class="header">Zimbabwe</a>
    <div style="width:220px;height:220px;"><a href="http://maps.google.com.au/maps?q=Zimbabwe&amp;z=3">Find Zimbabwe on Google Maps</a></div>
</li> 
```

我如何连接这三个之间的点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T11:28:25.497

这是一个非常简单的示例，它[根据地理编码地址设置地图的中心](http://www.geocodezip.com/GMapsExampleV3b.html)。

关键是这样的：

```
 if (status != google.maps.GeocoderStatus.ZERO_RESULTS) {
      map.setCenter(results[0].geometry.location); 
```

如果地理编码操作成功，它将地图的中心设置为返回的值。

# c - CURLcode到C中的变量

> ID：13928487
> 
> 赞同：1
> 
> 时间：2012-12-18T07:46:06.037
> 
> 标签：c, curl, pthreads

我正在使用两个线程，一个正在下载，另一个应该检查下载了多少字节。

这是我的程序的确切代码：

```
#include <stdio.h>
#include <curl/curl.h>
#include <curl/easy.h>
#include <string.h>
#include <stdlib.h>
#include <pthread.h>
#include <semaphore.h>
#include <unistd.h>

CURLcode res;
FILE *fp;

size_t write_data(void *ptr, size_t size, size_t nmemb, FILE *stream) {
    size_t written;
    written = fwrite(ptr, size, nmemb, stream);
    return written;
}

void *downloadThread() {
    CURL *curl;

    char *url = "http://imgsrc.hubblesite.org/hu/db/images/hs-2006-10-a-hires_jpg.jpg";
    char outfilename[FILENAME_MAX] = "picture.jpg";
    curl = curl_easy_init();
    if (curl) {
        fp = fopen(outfilename,"wb");
        curl_easy_setopt(curl, CURLOPT_URL, url);
        curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, write_data);
        curl_easy_setopt(curl, CURLOPT_WRITEDATA, fp);
        printf("File download started\n");
        res = curl_easy_perform(curl);
        printf("File download finished\n");
        curl_easy_cleanup(curl);
        //fclose(fp);
    }
}

void *checkThread() {
    while(1) {
        int prev=ftell(fp);
        fseek(fp, 0L, SEEK_END);
        int downloadedFile=ftell(fp);
        fseek(fp,prev,SEEK_SET); //go back to where we were
        //int downloadedFile = 0; /* instead of 0 it should be something with "res" variable */
        printf("The file size is  %d\n", downloadedFile);
        usleep(1000000);    
    }
}

void setThread() {
    //Thread settings
    pthread_t tid1, tid2;
    pthread_attr_t attr;
    pthread_attr_init(&attr);
    pthread_create(&tid1,&attr,downloadThread, NULL);
    pthread_create(&tid2,&attr,checkThread, NULL);
    pthread_join(tid1, NULL);
    pthread_join(tid2, NULL);
}

int main() {
    setThread();
    return 0;
} 
```

所以这个给出了我想要的结果，但我想这样做而不保存到文件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T08:02:36.683

像这样修改 write_function 怎么样？

```
time_t start_time = time(0); 
size_t bytes_downloaded = 0;

size_t write_data(void *ptr, size_t size, size_t nmemb, FILE *stream) {
    time_t current_time = time(0);
    time_t elapsed_time = current_time - start_time;

    // do you still need it?
    // size_t written;
    // written = fwrite(ptr, size, nmemb, stream);

    bytes_downloaded += (size * nmemb);

    printf("Bytes downloaded %u in %u seconds at %u bytes/sec\n", 
            bytes_downloaded, elapsed_time, bytes_downloaded / elapsed_time);

    return (size * nmemb);
} 
```

# php - 在php中递归调用函数的正确语法是什么

> ID：13928491
> 
> 赞同：0
> 
> 时间：2012-12-18T07:46:16.423
> 
> 标签：php, function

我有一个使用递归调用自身的函数，我需要知道调用自身的正确语法。

注意：我使用的是面向对象的编程技术，函数来自类文件。

下面是我的功能

```
// Generate Unique Activation Code
//*********************************************************************************
    public function generateUniqueActivationCode()
    {
        $mysql = new Mysql();
        $string = new String();

        $activation_code = $string->generateActivationCode();

        // Is Activation Code Unique Check
        $sql = "SELECT activation_id FROM ". TABLE_ACTIVATION_CODES ." WHERE activation_code='$activation_code' LIMIT 1";
        $query = $mysql->query($sql);

        if($mysql->rowCount($query) > 0)
        {
            // This function is calling itself recursively
            return generateUniqueActivationCode(); // <- Is this syntax correct in Oops
        }
        else
        {
            return $activation_code;
        }
    } 
```

递归调用它的代码应该是

```
return generateUniqueActivationCode(); 
```

或者

```
return $this->generateUniqueActivationCode(); 
```

或者如果不是这两种方式。

请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T07:48:52.967

您需要使用 $this 变量调用它，因为您的函数是实例的一部分。所以：

```
return $this->generateUniqueActivationCode(); 
```

PS：为什么不尝试这两种方法，看看它是否会产生任何错误？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T10:05:01.250

递归是**解决这个问题的完全错误的方法**

与迭代不同，您正在填充堆栈，并不必要地生成新对象。

解决这个问题的正确方法是在一个范围内生成一个随机值，这使得重复的可能性很小，但是如果没有一些外部量词（例如用户名）来定义范围，那么迭代就是要走的路。

您的代码还有其他问题 - 实际上您应该在检查记录的同一位置添加记录。

> 我正在使用面向对象的编程技术，函数来自类文件

那么它不是一个函数，它是一个方法。

而且您的代码容易受到 SQL 注入的影响。

更好的解决方案是：

```
class xxxx {
....
public function generateUniqueActivationCode($id)
{
   if (!$this->mysql) $this->mysql = new Mysql();
   if (!$this->string) $this->string = new String();
   $limit=10;

   do {
      $activation_code = $string->generateActivationCode();
      $ins=mysql_escape_string($activation_code);
      $sql="INSERT INTO ". TABLE_ACTIVATION_CODES ." (activation_id, activation_code)"
          . "VALUES ($id, '$ins)";
      $query = $mysql->query($sql);
      if (stristr($query->error(), 'duplicate')) {
         continue;
      }
      return $query->error() ? false : $activation_code;
   } while (limit--);
   return false;
}

} // end class 
```

# ruby-on-rails-3 - 猴子补丁模块方法

> ID：13928494
> 
> 赞同：5
> 
> 时间：2012-12-18T07:46:26.057
> 
> 标签：ruby-on-rails-3, monkeypatching, rails-i18n

我想更改现有项目中的 I18n.translate 方法。

```
require 'I18n'
module I18n
  alias_method :old_translate, :translate
  def translate(*args)
    old_translate(*args) + 'blabla'
  end
  alias_method :t, :translate
end 
```

这会产生：

> 未捕获的异常：缺少帮助文件 helpers/I18n.rb

我做错了什么，我应该把这段代码放在哪里？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-18T08:34:30.197

配置/语言环境/en.yml：

```
en:
  wtfblabla: hello 
```

测试.rb：

```
require 'i18n'
module I18n
  class<< self
    alias_method :old_translate, :translate
    def translate(*args)
      old_translate(*args) + 'blabla'
    end
    alias_method :t, :translate
  end
end

I18n.load_path += p(Dir[File.join(File.dirname(__FILE__), 'config', 'locales', '*.yml').to_s])

p I18n.t "wtfblabla" 
```

输出：

> ["./config/locales/en.yml"]
> 
> “你好布拉布拉”

# sql-server - 记录无法处理以供日后查看的数据

> ID：13928495
> 
> 赞同：0
> 
> 时间：2012-12-18T07:46:27.100
> 
> 标签：sql-server, stored-procedures

我有一个 SQL Server 存储过程，为两个独立的系统执行数据库集成。简单来说，就是根据另一个数据库表的记录和一些业务逻辑，在一个数据库表中插入数据。由于缺少属性或违反业务规则或其他原因，无法插入某些数据。此过程计划在两个小时内运行。

程序完成后，我需要未处理数据的列表来查看数据问题。从存储过程中导出数据的最佳方式是什么？我研究了两种可能性：

1.  通过 RAISERROR 记录

2.  返回未处理的数据作为存储过程的输出

两者使用起来都很不舒服。

我可以以某种方式使用报告服务吗？还是创建包含未处理记录的单独表更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T15:57:31.883

如果您按照 Raj 的要求逐行插入数据，那么您可以`OUTPUT`在语句中使用子句`INSERT`。因此，您将能够轻松记录成功的插入 - [MSDN 链接在这里](http://msdn.microsoft.com/en-us/library/ms177564%28v=sql.105%29.aspx)。

# neural-network - 如何用神经网络实现 Q-learning？

> ID：13928501
> 
> 赞同：2
> 
> 时间：2012-12-18T07:47:02.557
> 
> 标签：neural-network, reinforcement-learning

我创建了一个具有 2 个输入节点、4 个隐藏节点和 3 个输出节点的神经网络。初始权重在 -1 到 1 之间是随机的。我使用反向传播方法来更新具有 TD 误差的网络。但是，性能并不好。

我想知道，问题可能出在哪里？
1\. 是否需要偏置节点？
2\. 是否需要资格跟踪？

如果有人可以提供任何示例代码，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-28T18:56:27.357

是的，您应该包括偏差节点，是的，您应该使用资格跟踪。偏置节点只提供了一个额外的可调参数。将神经网络视为 Sutton 和 Barto 的书（[免费在线](http://incompleteideas.net/book/the-book-2nd.html)）中描述的“函数逼近器”。如果神经网络有参数 theta（一个包含网络中所有权重的向量），那么 Sarsa 更新就是（使用 LaTeX 表示法）：

\delta_t = r_t + \gamma*Q(s_{t+1},a_{t+1},\theta_t) - Q(s_t,a_t, \theta_t)

\theta_{t+1} = \theta_t + \alpha*\delta_t*\frac{\partial Q(s,a,\theta)}{\partial \theta}

这适用于任何函数逼近器 Q(s,a,\theta)，它通过调整参数 \theta 来估计 Q(s,a)。

但是，我必须问你为什么要这样做。如果你只是想让 Q 学习工作得很好，那么你应该使用傅立叶基础而不是神经网络：

[http://all.cs.umass.edu/pubs/2011/konidaris_o_t_11.pdf](http://all.cs.umass.edu/pubs/2011/konidaris_o_t_11.pdf)

如果你真的想为 RL 使用神经网络，那么你应该使用自然的 actor-critic (NAC)。NAC 遵循一种叫做“自然梯度”的东西，它是由 Amari 专门为使用神经网络加速学习而开发的，它产生了*巨大*的差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T21:17:53.183

我们需要更多信息。什么是问题域。输入是什么？输出是什么？

RL 可能需要很长时间来训练，并且取决于你的训练方式，在训练期间可能会从好到好到好到不太好。因此，您应该在学习期间绘制代理的性能，而不仅仅是最终结果。

你总是应该使用偏置节点。资格痕迹？可能不是。

# mysql - 我怎么能改变这个查询

> ID：13928512
> 
> 赞同：0
> 
> 时间：2012-12-18T07:47:53.727
> 
> 标签：mysql

![我的数据库记录](../Images/a15f1fe2cab7c93f41322bb1f9bf1f23.png)

```
SELECT * FROM (
      SELECT t1.eventId,t1.start_date,t1.end_date, COUNT(*) pos FROM events t1
        LEFT JOIN events t2 ON t1.start_date = t2.start_date AND t1.eventId <= t2.eventId
        WHERE t1.start_date BETWEEN  '2012-12-18' AND '2012-12-24'
      GROUP BY
        t1.eventId,t1.start_date
      ORDER BY 
        t1.start_date,pos ASC
      ) t
    WHERE
      pos <= 3; 
```

![在此处输入图像描述](../Images/9de0036d2e323ec17688dd86c46f43f2.png)

为什么开始日期 2012-12-21 和 2012-12-24 不存在，

如果 start_date 不存在，我需要一个 null 或空值

注意：我的数据库中没有 21 和 24 的记录，但我的查询中需要一个空值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T08:19:17.720

您可以改为使用 HAVING 消除外部查询：

```
SELECT t1.eventId,t1.start_date,t1.end_date, COUNT(*) pos FROM events t1
LEFT JOIN events t2 ON t1.start_date = t2.start_date AND t1.eventId <= t2.eventId
WHERE t1.start_date BETWEEN  '2012-12-18' AND '2012-12-24'
GROUP BY t1.eventId,t1.start_date
HAVING COUNT(*) <= 3
ORDER BY t1.start_date,pos ASC; 
```

注意这一行的插入：

```
HAVING COUNT(*) <= 3 
```

这在逻辑上等同于您的外部查询正在做什么

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T08:13:49.867

请使用以下查询并告诉我结果

```
SELECT * FROM (
      SELECT t1.eventId,t1.start_date,t1.end_date, COUNT(*) pos FROM events t1
        LEFT JOIN events t2 ON t1.start_date = t2.start_date AND t1.eventId <= t2.eventId
        WHERE t1.start_date >=  '2012-12-18' AND  t1.start_date <='2012-12-24'
      GROUP BY
        t1.eventId,t1.start_date
      ORDER BY 
        t1.start_date,pos ASC
      ) t
    WHERE
      pos <= 3; 
```

# c# - 可滚动的 ListPicker 项目列表

> ID：13928514
> 
> 赞同：1
> 
> 时间：2012-12-18T07:47:55.833
> 
> 标签：c#, windows-phone-7, popup, listpicker

我的应用程序中有一个 Popup 控件。在此弹出窗口中，我使用 ListPicker 对象来选择正确的项目。如果项目列表非常小，则一切正常，但是，如果列表项目数量很大，则项目列表将显示在背景某处的新页面上。**这是 ListPicker 的ExpansionMode.FullScreenOnly**的本机行为，但我不能那样使用它。

有没有办法使项目列表可滚动以保存**ExpansionAllowed**样式的 ListPicker 行为？

如果没有，Windows Phone 中是否有类似的控件，允许创建该样式的下拉菜单？

* * *

好吧，让我来展示一下区别：

1）它应该是这样工作的，元素的数量很少，只有四个。当我单击项目（项目名称为 2012-12-17）时，下拉菜单中会显示项目列表。

![在此处输入图像描述](../Images/80eefe336f69bbc1f13c36314dc2951e.png)

2）这是问题之一。项目的数量很高，有十多个。当我单击当前项目时，下拉菜单不会显示在此弹出窗口中，而是显示在新页面上（可以在后台看到）。但这打破了我的所有逻辑，我什至不能选择另一个元素（不能点击它，因为打开弹出窗口时你不能点击页面）。

![在此处输入图像描述](../Images/89d008220455ff27117e4fc133f5f9c3.png)

任何人都可以提出解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T06:05:45.227

ListPicker 控件似乎没用，因为我不知道如何解决这个问题。

解决方案是使用不同的控件，例如默认可滚动的 ListBox。（将类似于[Scrolling ContextMenu items](https://stackoverflow.com/questions/14352095/scrolling-contextmenu-items) question solution）这将与我想要的 UI 样式不同，但它会起作用。

# javascript - 传单：为 Raphael JS 使用 RaphaelLayer

> ID：13928517
> 
> 赞同：2
> 
> 时间：2012-12-18T07:48:08.503
> 
> 标签：javascript, raphael, layer, leaflet

我正在尝试将 Raphael JS 添加到我的项目中，该项目主要由使用 Leaflet JS 完成的地图应用程序组成。

有一个名为 RaphaelLayer 的 Leaflet 插件，可以在这里找到：
[https ://github.com/dynmeth/RaphaelLayer](https://github.com/dynmeth/RaphaelLayer)

但是我一生都无法弄清楚如何准确地使用这个层插件......项目页面上没有文档或演示，谷歌什么也没给我。

有没有人有过一起使用 Raphael 和 Leaflet 的经验，最好是使用上面的插件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-11T10:07:20.987

我找到了这个页面：[http ://dynmeth.github.io/RaphaelLayer/](http://dynmeth.github.io/RaphaelLayer/)

但是没有更多的文档..

# tridion - 页面中未生成组件链接标签

> ID：13928519
> 
> 赞同：4
> 
> 时间：2012-12-18T07:48:37.160
> 
> 标签：tridion, tridion-2011

我们已经设置 tridion 发布到两个服务器 - 发布目标设置为两个位置。

*   两台服务器都安装了许可证
*   所有配置和 lib 文件都已就位。

当我们尝试使用第二个环境测试 CME 服务器发布到服务器时，它正在发布并且在页面中生成组件链接标签。从第一个 envirnment-dev CME 服务器发布时，页面中不会生成组件链接标签。记录了以下错误

```
 WARN  Admin - WAI: Could not find a presentation for SiteIdentifier[Protocol=http; Domain=*.*.*.*; Port=****; Path=/HTTPUpload.aspx]
2012-12-18 05:19:28,351 ERROR UserManager - No Data Access Object for Personalization
com.tridion.broker.StorageException: No Data Access Object for Personalization
    at com.tridion.storage.filesystem.FSDAOFactory.getDAOForTypeMapping(FSDAOFactory.java:177) ~[cd_datalayer.jar:na]
    at com.tridion.storage.StorageManagerFactory.getOriginalDAO(StorageManagerFactory.java:450) ~[cd_datalayer.jar:na]
    at com.tridion.storage.StorageManagerFactory.getDAO(StorageManagerFactory.java:271) ~[cd_datalayer.jar:na]
    at com.tridion.storage.StorageManagerFactory.getDefaultDAO(StorageManagerFactory.java:178) ~[cd_datalayer.jar:na]
    at com.tridion.user.UserManager.checkUser(UserManager.java:56) ~[cd_wai.jar:na] 
```

事件查看器也显示

```
Can't initialize application heartbeat monitoring: 0x80040154
Source:
SetupThreadHeartbeat 
```

*   CME 服务器中动态链接所需的配置是什么

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T11:41:14.660

CME 不需要对动态链接进行任何配置，因为这是您在演示端（您的 Web/应用程序服务器）配置和使用的东西。

您发布的错误消息表明您的 WAI（分析和个性化）设置不正确，甚至可能更多。我建议您从基本设置开始并使其工作，这应该具有链接工作，然后再添加您甚至可能不需要的 WAI 之类的东西。

关于心跳的错误信息表明监控配置有问题，这再次表明您似乎有很多配置问题。也许最好从头开始，并按照[文档](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/concept_FFBC376AF96D4EBBB0E346C18A711187)（需要登录）一步一步来如何设置您的 Content Delivery 服务器。

*另一种选择始终是致电 SDl Tridion 专业服务并聘请基础架构顾问来设置您的环境。*

# java - 显式转换如何执行

> ID：13928522
> 
> 赞同：7
> 
> 时间：2012-12-18T07:48:44.977
> 
> 标签：java, casting, int, byte

> **可能重复：**
> [Java += 运算符](https://stackoverflow.com/questions/8710619/java-operator)

我们可以将一个值添加到任何变量中，`b+=8`或者`b=b+8`两者都将返回添加`8`到变量中的值`b`。我在面试中得到了一个问题，它是

```
byte b=7;
b=b+8; //compile error 
```

我打勾了会输出什么`compile time error`，因为添加`byte`和`int`将是`int`（我相信）并且因为我们试图将`int`值存储到`byte`. 但是，当我自己尝试下面的代码时

```
byte b=7;
b+=8; //OK 
```

然后，上面的代码编译并运行完美，没有任何错误并返回`15`。现在，我的问题是**为什么以及如何**？我的意思是，为什么它不需要显式转换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T07:53:29.727

`b = b + 8`这是和的唯一区别`b += 8`

编译器自动进行强制转换。

# yii - 在 Yii 中创建扩展

> ID：13928523
> 
> 赞同：0
> 
> 时间：2012-12-18T07:48:45.927
> 
> 标签：yii, yii-extensions

我是 Yii 的新手。我有一个使用纯 PHP 脚本的 jquery**[文件管理器。](http://www.abeautifulsite.net/blog/2008/03/jquery-file-tree/)**现在我想将它与 Yii 应用程序集成。流程就像，从索引它将启动 jquery 函数，该函数将搜索 PHP 连接器脚本。我的问题是，如何在 Yii 中包含连接器脚本，以便 Jquery 可以访问它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T10:28:02.643

as of now i did not create any extensions, I put the connector script under assets directory and it just worked fine. I am sure this cannot be the best practice. I would like to get help on creating custom extensions for Yii

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T09:50:53.170

如果您已经让扩展的其余部分正常工作，那么您可以在此扩展的目录中创建一个控制器来处理它的任何操作。然后，您可以使用配置中的 URL 规则向其发送特定的 URL。

# iphone - 使用 UIAppearance 方法自定义 UIAlertView

> ID：13928525
> 
> 赞同：3
> 
> 时间：2012-12-18T07:49:12.200
> 
> 标签：iphone, ios, customization, uialertview, uiappearance

我知道`UIAlertView`符合`UIAppearance`and `UIAppearanceContainer`。

但是我如何使用`UIAppearance`自定义/样式`UIAlertView`？我无法通过网络找到它。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-18T07:52:45.533

您不能使用`UIAppearance`自定义`UIAlertView`.

`UIAlertView`仅显示为具有，`UIAppearance`因为`UIView`符合`UIAppearance`并且`UIAlertView`是 的子类`UIView`。

它实际上并没有实现它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T08:43:15.527

如果您想使用`UIAlertView`功能、模态视图等...您可以将其子类化。

这里有一个例子： [http ://www.albertopasca.it/whiletrue/2012/07/objective-c-modal-view-navigation-tabbar-controller-projects/](http://www.albertopasca.it/whiletrue/2012/07/objective-c-modal-view-navigation-tabbar-controller-projects/)

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T10:20:50.770

如果你想自定义 UIAlertView，我创建了 UIAlertView 的子类，你可以在 github [WCAlertView](https://github.com/m1entus/WCAlertView)上找到它，它支持与 UIAppearance 类似的代理。您可以使用它为所有 WCAlertView 设置默认外观：

```
[WCAlertView setDefaultCustomiaztonBlock:^(WCAlertView *alertView) {
        alertView.labelTextColor = [UIColor colorWithRed:0.11f green:0.08f blue:0.39f alpha:1.00f];
        alertView.labelShadowColor = [UIColor whiteColor];

        UIColor *topGradient = [UIColor colorWithRed:1.0f green:1.0f blue:1.0f alpha:1.0f];
        UIColor *middleGradient = [UIColor colorWithRed:0.93f green:0.94f blue:0.96f alpha:1.0f];
        UIColor *bottomGradient = [UIColor colorWithRed:0.89f green:0.89f blue:0.92f alpha:1.00f];
        alertView.gradientColors = @[topGradient,middleGradient,bottomGradient];

        alertView.outerFrameColor = [UIColor colorWithRed:250.0f/255.0f green:250.0f/255.0f blue:250.0f/255.0f alpha:1.0f];

        alertView.buttonTextColor = [UIColor colorWithRed:0.11f green:0.08f blue:0.39f alpha:1.00f];
        alertView.buttonShadowColor = [UIColor whiteColor];
}]; 
```

# orbeon - Bootstrap Look and feel in 4.0 Milestone 19 覆盖了我的风格

> ID：13928527
> 
> 赞同：1
> 
> 时间：2012-12-18T07:49:26.770
> 
> 标签：orbeon

已加载 4.0 的里程碑 20，我所有的屏幕布局和对话框都被丢弃了。我对输入字段使用内联样式，因为我的所有输入字段的大小都不同，并且我看到 Bootstrap 外观设置了 206px 的标准大小。它似乎忽略了我的风格。

```
<xf:secret id="loginUsername" appearance="minimal" xxf:size="8" ref="instance('login')/username" style="width: 80px; verticalAlign: middle;"><xf:label/><xf:hint>User Name</xf:hint></xf:secret><br/> 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T18:23:38.673

`input`Bootstrap 在元素上设置宽度，因此`width: 80px`您在其中设置的样式与包含的样式`span`无效。我认为最好的方法是`class`在`xf:secret`, 和其他控件上使用 a 而不是 a `style`，然后使用外部 CSS 来设置`input`基于该类的宽度，其规则比 Bootstrap 的规则更强。

由于您的表单使用的是 Bootstrap，我想您是使用 Form Builder 创建的，在这种情况下，请参阅[编写您自己的 CSS](http://wiki.orbeon.com/forms/doc/developer-guide/configuration-properties/configuration-properties-form-runner#TOC-Writing-your-own-CSS)部分。

# javascript - 使用 CrossRider 的 DatePicker 不起作用？

> ID：13928528
> 
> 赞同：1
> 
> 时间：2012-12-18T07:49:30.737
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-datepicker, crossrider

使用 CrossRider，我想向[`DatePicker`](http://jqueryui.com/datepicker/)页面的 DOM 添加一个，这是我的代码：

```
appAPI.ready(function($) {
    appAPI.dom.addRemoteCSS('http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css');
    appAPI.dom.addRemoteJS('http://code.jquery.com/ui/1.9.2/jquery-ui.js');
    $('<input type="text" id="datepicker" />').prependTo($('body'), function(){$( "#datepicker" ).datepicker();});
}); 
```

但是没用，我也试过

```
appAPI.ready(function($) {
    appAPI.dom.addRemoteCSS('http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css');
    appAPI.dom.addRemoteJS('http://code.jquery.com/ui/1.9.2/jquery-ui.js');
    $('<input type="text" id="datepicker" />').prependTo($('body'));
        $( "#datepicker" ).datepicker();
}); 
```

它也没有用，我试过了

```
appAPI.ready(function($) {
    appAPI.dom.addRemoteCSS('http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css');
    appAPI.dom.addRemoteJS('http://code.jquery.com/ui/1.9.2/jquery-ui.js');
    $('<input type="text" id="datepicker" />').prependTo($('body'));
    $('<script>$(function(){$("#datepicker").datepicker();});</script>').appendTo('head');
}); 
```

但是它们都不起作用，同时如果我们在简单页面上测试它会起作用吗？！例如：

```
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>jQuery UI Datepicker - Default functionality</title>
    <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
    <link rel="stylesheet" href="/resources/demos/style.css" />
    <script>$(function(){$("#datepicker").datepicker();});</script>
</head>
<body>     
    <p>Date: <input type="text" id="datepicker" /></p>
</body>
</html> 
```

**如何使用 CrossRider 使日期选择器工作？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T13:51:32.317

[包含 jQueryUI 的最简单方法是通过appAPI.resources.jQueryUI](http://docs.crossrider.com/#!/api/appAPI.resources-method-jQueryUI)方法使用 Crossrider 对 jQueryUI 的原生支持。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T10:42:42.110

对于那些感兴趣的人，这是解决方案：

```
appAPI.ready(function($) {
    appAPI.resources.includeRemoteJS("http://code.jquery.com/ui/1.9.2/jquery-ui.js") ;
    appAPI.dom.addRemoteCSS("https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.11/themes/eggplant/jquery-ui.css");
    $('<input type="text" id="dateFrom" />').prependTo($('body'));
    $( "#dateFrom" ).datepicker();
}); 
```

# mysql - 选择在列中包含精确数字的行，其中一组数字用逗号分隔

> ID：13928538
> 
> 赞同：4
> 
> 时间：2012-12-18T07:50:25.380
> 
> 标签：mysql, sql-like

也许答案很简单，但我找不到正确的 MySQL 查询来做我想做的事。

我有表**用户**：

```
| id_user |  name   | action_type |
+---------------------------------+
|    1    | joshua  |  1,13,12,40 |
|    2    | joshua  |  2,8        | 
```

我只想选择列中有确切数字的`action_type`行。

`action_type`以 TEXT 形式存储在 MySQL 中。

我试过这个：

`SELECT * FROM user WHERE action_type LIKE '%2%'`

但它选择了 12 行，这不是我想要的:(

也许使用 IN 运算符是可能的，但我找不到正确的方法来使用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T08:01:41.460

你正在寻找`FIND_IN_SET`

```
SELECT *
FROM user
WHERE FIND_IN_SET( '2', action_type ) 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/0023b/1/0)

**更新**

顺便提一下，这也是可以的

```
SELECT *
FROM user
WHERE FIND_IN_SET( 2, action_type ) 
```

MySQL 将自动转换为 char

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T07:52:41.030

`LIKE`在您的子句中包含分隔符：

```
SELECT *
FROM   user
WHERE  action_type LIKE '2,%'
        OR action_type LIKE '%,2,%'
        OR action_type LIKE '%,2' 
```

请注意，我必须使用两个附加`LIKE`子句来涵盖项目位于字符串开头或结尾的情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T07:56:11.803

尝试

```
SELECT * FROM user
WHERE CONCAT( ',', action_type, ',' ) LIKE '%,2,%'; 
```

*   鲁福爵士的正确语法

# c++ - 请帮助我理解为什么 SFINAE 在这种情况下不起作用

> ID：13928539
> 
> 赞同：2
> 
> 时间：2012-12-18T07:50:30.137
> 
> 标签：c++, sfinae, typetraits

为什么这在 VS 2010 中不起作用

```
 typename std::enable_if<!std::has_trivial_destructor<Titem>::value, BOOL>::type
  Clear()
    {
        ...
    }

  typename std::enable_if<std::has_trivial_destructor<Titem>::value, BOOL>::type
  Clear()
    {
        ...
    } 
```

它位于模板类中。

我收到以下错误：

`error C2039: 'type' : is not a member of 'std::tr1::enable_if<_Test,_Type>'`

关于 SFINAE 错误。显然替换失败是一个错误。我知道它可能只是优化了析构函数调用，所以这不是一个真正现实的场景。每次我想我终于理解了SFINAE，但当我尝试使用它时它仍然不起作用。

为了回应一些评论（仅关注返回值的重载），我将其更改为虚拟参数技术。

**这有效：**

```
 template<typename U>
  BOOL _Clear(typename std::enable_if<!std::has_trivial_destructor<U>::value>::type *dummy = 0)
  {
     ...
  }

  template<typename U>
  BOOL _Clear(typename std::enable_if<std::has_trivial_destructor<U>::value>::type *dummy = 0)
  {
     ...
  }

  BOOL Clear()
  {
    return _Clear<Titem>();
  } 
```

结论：即使是模板的成员也必须强制模板化成员函数才能在 MSVC 2010 中执行 SFINAE。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T08:12:29.527

作为一个不完全确定 SFINAE 的许多细节的人，我敢说问题是你的函数没有模板化——因此即使它们被证明是非法的，编译器也不允许丢弃它们。

尝试

```
template<typename T = Titem>
typename std::enable_if<std::has_trivial_destructor<T>::value, BOOL>::type
Clear()
{
    ...
}

template<typename T = Titem>
typename std::enable_if<!std::has_trivial_destructor<T>::value, BOOL>::type
Clear()
{
    ...
} 
```

已编辑：`Titem`根据 Matthieu M. 的建议添加为默认参数。

# iphone - ios 在底部显示警报栏，单击或拖动时会向上滚动

> ID：13928540
> 
> 赞同：0
> 
> 时间：2012-12-18T07:50:37.317
> 
> 标签：iphone, ios, notifications, alert

我正在尝试实现将出现在页面底部的警报/通知栏，单击时将向上滚动并覆盖整个屏幕（就像 Kayak 或 PageOnce 应用程序显示它一样）。这是它现在的样子（已在以下 URL 上传图片）：

图片显示底部的警报栏 [http://www.anony.ws/hLe](http://www.anony.ws/hLe)

警报栏打开 [http://www.anony.ws/hLl](http://www.anony.ws/hLl)

它有效但不完全。一件事，警报视图无法覆盖导航栏（警报框架的原点 y 在所附屏幕截图中为 0 打开视图）。如果我将框架的 y 设为负值以进一步向上，则视图将位于导航栏的后面。我怎样才能让它工作，以便警报视图覆盖整个屏幕（包括导航栏）。

这是我所做的：

1.  在“会员中心”视图控制器中，在 viewDidLoad 上，我正在创建一个新视图（我的 AlertView），将其框架更改为显示在底部，然后将其作为子视图添加到当前视图：

    ```
    CGFloat alertBarHeight = 25;
    CGRect frame = self.view.frame;
    frame.origin.y = frame.size.height - alertBarHeight;
    AlertsView *av = [[AlertsView alloc] initWithFrame:frame withController:self height:alertBarHeight]; // Its a custom init method that just stores a reference to the invoking controller
    [self.view addSubview:av]; 
    ```

2.  我的显示/隐藏代码在 AlertsView.m 中，如下所示：

    ```
    - (void) showOrHideAlerts:(id)sender
    {
    if (self.isOpen)
    {
        // Close the alerts view
        [UIView animateWithDuration:0.4 delay:0 options:UIViewAnimationOptionCurveEaseOut
        animations:^{
            CGRect frame = self.frame;
            frame.origin.y = self.invokingController.view.frame.size.height - self.barHeight;
            self.frame = frame;
        }
        completion:^(BOOL finished)
        {
             self.isOpen = NO;
        }];
    }
    else
    {
        // Show the alerts view
        [UIView animateWithDuration:0.4 delay:0 options:UIViewAnimationOptionCurveEaseOut
        animations:^{
            CGRect frame = self.frame;
            frame.origin.y = 0;// - [self.invokingController.navigationController navigationBar].frame.size.height;
            //frame.origin.y = 20;
            self.frame = frame;
        }
        completion:^(BOOL finished)
        {
             self.isOpen = YES;
        }];

    }
    } 
    ```

我觉得我没有正确实施它。请指导我实现此类功能的最佳方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T07:56:36.073

您可以在警报视图打开时隐藏导航栏，并在警报视图关闭时再次显示它。

隐藏 ：

```
[self.navigationController setNavigationBarHidden:YES animated:NO]; 
```

显示：

```
self.navigationController setNavigationBarHidden:NO animated:NO]; 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T08:01:41.257

如下将警报视图添加到导航控制器视图中，而不是在当前视图中：

```
AlertsView *av = [[AlertsView alloc] initWithFrame:frame withController:self height:alertBarHeight]; // Its a custom init method that just stores a reference to the invoking controller

[self.navigationController.view addSubview:av]; 
```

# sprite - Pygame 精灵夹紧问题

> ID：13928541
> 
> 赞同：1
> 
> 时间：2012-12-18T07:50:40.987
> 
> 标签：sprite, pygame, collision, rect

所以我一直在让精灵保持在屏幕范围内的问题。我让它与一个简单的 rect(0,0,16,16) 一起工作，但我似乎无法让它与一个被 blit 到屏幕上的精灵一起工作。为了使我的精灵保持在屏幕分辨率内，我需要更改什么？我今天才刚刚开始使用类来组织代码，因此任何输入都会受到赞赏和帮助。

```
import pygame
from pygame.locals import *
from pygame import Color

class Game():
    """ Lets try to get this going by simple steps
    One by one. First step, lets figure how to make a class
    that can do the display stuff. Lord have mercy on my soul"""

    def __init__(self, wi=256, hi=224, multii=3):
        """Initialization"""
        pygame.init()
        self.runGame    = True
        self.width      = wi*multii
        self.height     = hi*multii
        self.spritesize = 16*multii
        self.clock      = pygame.time.Clock()
        self.fps        = self.clock.get_fps()
        self.screen     = pygame.display.set_mode((self.width, self.height))
        self.kl         = []
        self.walk       = [0, 0]
        self.speed      = multii*1.5
        self.x,self.y   = self.width/2, self.height/2
        self.playerSpr  = pygame.image.load('images/'+'link1.png').convert_alpha()
        self.playerRec  = Rect(self.playerSpr.get_rect())

    def mainLoop(self):
        """Loop through the main game routines
        1\. Drawing  2\. Input handling  3\. Updating
        Then loop through it until user quits"""
        while self.runGame:
            self.clock.tick(60)
            self.events()
            self.draw()

    def events(self):
        """Time to handle some events"""
        for e in pygame.event.get():
            if (e.type == pygame.QUIT) or (e.type == KEYDOWN and e.key == K_ESCAPE):
                self.runGame = False
                break                            
            if e.type==KEYDOWN:     
                if e.key==pygame.K_a: self.kl.append(1)
                if e.key==pygame.K_d: self.kl.append(2)
                if e.key==pygame.K_w: self.kl.append(3)
                if e.key==pygame.K_s: self.kl.append(4)             
            if e.type==pygame.KEYUP:
                if e.key==pygame.K_a: self.kl.remove(1)            
                if e.key==pygame.K_d: self.kl.remove(2)
                if e.key==pygame.K_w: self.kl.remove(3)             
                if e.key==pygame.K_s: self.kl.remove(4)

            if   self.kl[-1:]==[1]: self.walk=[-self.speed, 0]
            elif self.kl[-1:]==[2]: self.walk=[ self.speed, 0]
            elif self.kl[-1:]==[3]: self.walk=[0,-self.speed]
            elif self.kl[-1:]==[4]: self.walk=[0, self.speed]
            else:                   self.walk=[0, 0]

        self.x+=self.walk[0]
        self.y+=self.walk[1]

    def draw(self):
        """Draw and update the main screen"""
        self.fps = self.clock.get_fps()
        self.screen.fill(Color('purple'))
        #print self.screen.get_rect()
        #print player_rect
        self.playerSpr.clamp_ip(self.screen.get_rect())
        #pygame.draw.rect(self.screen, (255, 255, 255), self.playerrect)
        self.screen.blit(self.playerSpr, (self.x,self.y), self.playerRec)
        pygame.display.set_caption('Grid2\. FPS: '+str(self.fps))
        pygame.display.update()

game = Game()
game.mainLoop() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T10:05:56.273

两件事情：

1.  当精灵离开屏幕时，您并没有停止它的移动。做一个移动函数，它会得到一个方向，并决定它是否可以更多地移动到一边。这样，当精灵的右侧是屏幕时，您将不会向右移动更多。

2.  由于您将方向键放在一个类似于堆栈的列表中，因此每次按键只能获得 1 个方向。如果您还想沿对角线移动，请为两个方向制作两个列表，或者使用更简单的方法，例如：

    ```
    if KEYDOWN == K_LEFT: direction_x = -1
    if KEYUP == K_LEFT AND direction_x == -1: direction_x = 0 
    ```

    对每个键执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T12:01:23.230

为什么不使用附加和属性`playerRec`来跟踪玩家的位置？`x``y`

我建议也使用[`move`](http://www.pygame.org/docs/ref/rect.html#Rect.move)方法（或`move_ip`）：

```
def events(self):
    for e in pygame.event.get():
       ...

    self.playerRec.move_ip(*self.walk) # instead of self.x+=self.walk[0] / self.y+=self.walk[1]

def draw(self):
    ...

    # probably do this right after 'move_ip'
    self.playerRec.clamp_ip(self.screen.get_rect())

    # note that 'blit' accepts a 'Rect' as second parameter
    self.screen.blit(self.playerSpr, self.playerRec) 
```

附带说明：您应该考虑使用 a [`Sprite`](http://www.pygame.org/docs/ref/sprite.html#pygame.sprite.Sprite)，因为它基本上结合了 an`Image`和 a `Rect`。

# javascript - 将缓存页面与 HTML5 中的最新页面同步

> ID：13928548
> 
> 赞同：1
> 
> 时间：2012-12-18T07:51:21.010
> 
> 标签：javascript, html

我已经使用 HTML5 AppManifest 在浏览器上缓存了一些 html 页面，现在我的要求是不更改 AppManifest 文件，我只想下载那些与缓存不同的文件，即同步更改的文件。是否可以？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T08:14:12.523

我担心这是不可能的。缓存的设计由应用清单控制。您可以尝试`applicationCache.update()`，但这也取决于应用清单更改。

# bash - 从 makefile 到 bash 的变量

> ID：13928550
> 
> 赞同：2
> 
> 时间：2012-12-18T07:51:29.590
> 
> 标签：bash, shell, makefile

我有下一个情况：**test.mk**
的来源：

 **> test_var := test_me

**test.sh**的来源：

```
$test_var = some method that get test_var from .mk
if [ "$test_var" = "test_me" ] ; then    
   do something
fi 
```

如何在没有其他解析技术的情况下从`.mk`文件获取变量到我的文件。`.sh``grep + sed`

**编辑**
我无法更改`.mk`文件

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T16:42:09.683

即时创建一个 makefile 以加载`test.mk`文件并打印变量：

```
value=$(make -f - 2>/dev/null <<\EOF
include test.mk
all:
    @echo $(test_var)
EOF
)

echo "The value is $value" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T08:55:32.257

好吧，如果您不能使用`sed`or `grep`，那么您必须在使用以下内容进行解析后读取 makefile 数据库：

```
make -pn -f test.mk > /tmp/make.db.txt 2>/dev/null
while read var assign value; do
    if [[ ${var} = 'test_var' ]] && [[ ${assign} = ':=' ]]; then
        test_var="$value"
        break
    fi
done </tmp/make.db.txt
rm -f /tmp/make.db.txt 
```

这可以确保类似：

```
value := 12345
test_var := ${value} 
```

将输出`12345`，而不是`${value}`

如果您想创建代表 makefile 中所有变量的变量，您可以将内部 if 更改为：

```
if [[ ${assign} = ':=' ]]; then
    # any variables containing . are replaced with _
    eval ${var//./_}=\"$value\"
fi 
```

所以你会得到像`test_var`设置为适当值的变量。有一些以 开头的 make 变量，`.`需要用 shell 变量的安全值替换，比如`_`，这就是 search-replace 正在做的事情。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-18T08:02:12.207

`print_var`使用以下代码在您的 makefile 中创建规则：

```
print_var:
        echo $(test_var) 
```

在你的`test.sh`，做：

```
 $test_var = $(make print_var) 
```

您还必须考虑将`print_var`规则放在`.PHONY`部分

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-12-15T09:28:11.190

我前段时间自己提出的@Idelic答案的变体：

```
function get_make_var()
{
    echo 'unique123:;@echo ${'"$1"'}' | 
      make -f - -f "$2" --no-print-directory unique123
}

test_var=`get_make_var test_var test.mk` 
```

它使用了 GNU make 鲜为人知的特性——使用多个选项`Makefile`从命令行读取多个 s 的能力。`-f`**

# c# - 为什么要为命名空间添加注释？

> ID：13928552
> 
> 赞同：4
> 
> 时间：2012-12-18T07:51:37.943
> 
> 标签：c#, coding-style

我必须为 C# 编写类似样式指南之类的东西，而我目前正处于必须弄清楚哪些评论有意义而哪些没有意义的地步。我正在大量使用 Robert C. Martin 的“清洁代码”一书以及其他一些关于 C# 的书籍（如 O´Reillys c# 4.0）等等……但我找不到关于评论命名空间的词……嗯......老实说，我找不到任何好的理由来评论命名空间。另一件事是我想使用 Visual Studio 附带的 XML 文档，并且没有命名空间的默认实现。

你对我有充分的理由吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T08:09:49.463

查看[有关 System.Data 命名空间的 MSDN 页面](http://msdn.microsoft.com/en-us/library/system.data.aspx)

它很好地概述了这个命名空间中的类的期望，并展示了它们协同工作的方式。

因此，可能有充分的理由将有价值的文档添加到命名空间。

了解预期的类型、添加的类型以及如何使用它们可能非常有价值，因为很难在其他地方收集这些信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T08:03:09.867

命名空间文档可以（恕我直言，在适当的情况下应该）涵盖两个方面：

*   **在命名空间中可以找到什么？**: 命名空间不是任意分组；一个命名空间中的类型通常有一些共同的主题。这种分类可以在命名空间注释中描述，因为单个命名空间标识符很少足够精确和明确。特别是如果命名空间包含一组旨在一起工作的特定类型，命名空间注释是描述如何一起使用这些类型的地方。（或者，它可以告知首先要实例化哪些类型，或者哪些类型是命名空间中最重要的类型。）
*   **什么可以放在命名空间中？**：如果命名空间旨在由第三方扩展（向其添加更多类型），则注释还应描述命名空间适用于哪些可能的未来类型，以及哪些不应该进入命名空间。例如，您可以指出命名空间`YourCompany.Text`适用于与字符串处理相关的类型，*或者*您可以指出它仅适用于`YourCompany`命名空间中某些内容的非常特定的插件类型。该信息不能仅从名称空间名称中推断出来。

更重要的是，如果您使用一些文档生成器将注释格式化为某种类型的手册（例如 Sandcastle 或 NDoc），命名空间页面（列出命名空间中所有类型的页面）将接收命名空间文档注释作为附加信息。获得一个简短的概述而不仅仅是一个单一的命名空间名称和一个（可能很长的）类型列表对于一个好的基于命名空间的文档来说是至关重要的。

# php - 我的 sitemap.xml 需要永远加载

> ID：13928556
> 
> 赞同：0
> 
> 时间：2012-12-18T07:52:15.617
> 
> 标签：php, html, xml

所以我制作了一个 php 脚本，它只从数据库中读取页面（大约 25k 个 URL）并将它们写入网站根目录中的 sitemap.xml。

XML 文件大小为 4.6mb

当我尝试打开 sitemap.xml 时，我没有收到任何错误，但在我的浏览器中加载它只需要 3-4 分钟。我只是想加载，看看结果如何。

我使用了一些指向 URL 的 web xml 验证器，它说它是有效的并且没有错误，所以这不是问题。

我只是担心，由于加载时间长，它可能会关闭搜索引擎？我的意思是，4.5mb 应该在 10 秒内下载！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T08:02:23.053

加载时间可能是由于

*   您的互联网连接
*   服务器上行速度

4.5 是一个巨大的站点地图，我想知道您是否需要这么大的站点地图。您可以将其拆分为多个站点地图并使用[站点地图索引](http://en.wikipedia.org/wiki/Sitemap_index)

回想一下您在下面的评论，可能是从大量数据中生成站点地图会占用大量时间。它必须从数据库中获取它，我想这需要时间。加载后尝试保存站点地图，然后上传站点地图的“独立”文件。看看加载速度是否更快。如果是这样，那么您的脚本滞后于加载过程。

# android - AbstractStringBuilder 放大缓冲区的 OutOfMemoryError

> ID：13928557
> 
> 赞同：13
> 
> 时间：2012-12-18T07:52:28.240
> 
> 标签：android, out-of-memory, stringbuilder

我正在阅读 Stream 中的 youtube 响应并将其转换为字符串。使用以下代码：

网址：[http ://gdata.youtube.com/feeds/api/users/cnn/uploads?&v=2&max-results=25&alt=json](http://gdata.youtube.com/feeds/api/users/cnn/uploads?&v=2&max-results=25&alt=json)

```
private String convertStreamToString(InputStream is) {

        BufferedReader reader = new BufferedReader(new InputStreamReader(is));
        StringBuilder sb = new StringBuilder();

        String line = null;
        try {
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }        
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            try {
                is.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
        return sb.toString();
    } 
```

此代码在除 Android 4.0 设备之外的所有设备中运行良好。我得到以下logcat：

```
java.lang.RuntimeException: An error occured while executing doInBackground()
        at android.os.AsyncTask$3.done(AsyncTask.java:278)
        at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
        at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
        at java.util.concurrent.FutureTask.run(FutureTask.java:137)
        at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
        at java.lang.Thread.run(Thread.java:856)
Caused by: java.lang.OutOfMemoryError
        at java.lang.AbstractStringBuilder.enlargeBuffer(AbstractStringBuilder.java:94)
        at java.lang.AbstractStringBuilder.append0(AbstractStringBuilder.java:145)
        at java.lang.StringBuilder.append(StringBuilder.java:216)
        at com.android.mypack.MyApplications.convertStreamToString(MyApplications.java:959)
        at com.android.mypack.MyApplications.access$61(MyApplications.java:951)
        at com.android.mypack.MyApplications$YoutubeTask.doInBackground(MyApplications.java:2303)
        at com.android.mypack.MyApplications$YoutubeTask.doInBackground(MyApplications.java:1)
        at android.os.AsyncTask$2.call(AsyncTask.java:264)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
        ... 5 more
java.lang.OutOfMemoryError
        at java.lang.AbstractStringBuilder.enlargeBuffer(AbstractStringBuilder.java:94)
        at java.lang.AbstractStringBuilder.append0(AbstractStringBuilder.java:145)
        at java.lang.StringBuilder.append(StringBuilder.java:216)
        at com.android.mypack.MyApplications.convertStreamToString(MyApplications.java:959)
        at com.android.mypack.MyApplications.access$61(MyApplications.java:951)
        at com.android.mypack.MyApplications$YoutubeTask.doInBackground(MyApplications.java:2303)
        at com.android.mypack.MyApplications$YoutubeTask.doInBackground(MyApplications.java:1)
        at android.os.AsyncTask$2.call(AsyncTask.java:264)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
        at java.util.concurrent.FutureTask.run(FutureTask.java:137)
        at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
        at java.lang.Thread.run(Thread.java:856) 
```

请帮助我克服这个错误。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T19:37:32.437

好吧，当虚拟机内存不足时，显然会出现 OutOfMemoryErrors。这里重要的一点是，确切的堆栈跟踪可能无法提供信息，因为另一个线程可能会使用所有内存。或者在这段代码之前在这个线程上发生了一些消耗内存的事情，而这段代码只是“最后一根稻草”。这个网址肯定不包含太多字节，我想问题出在别的地方。

你可以试试内存分析器： [Android ==> 内存分析 ==> Eclipse 内存分析器？](https://stackoverflow.com/questions/3112671/android-memory-analysing-eclipse-memory-analyzer)

# iphone - 有没有办法让应用程序[iphone] 以编程方式确定另一个特定应用程序是否正在运行？

> ID：13928561
> 
> 赞同：0
> 
> 时间：2012-12-18T07:52:43.263
> 
> 标签：iphone, objective-c, ios, ios6

我可以编写一个应用程序来检查另一个应用程序是否正在运行吗？

例如，这将是 app1 的代码

app1.m 检查 { if(app2.running) { 做某事... }

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T07:58:44.173

在 iPhone 上你不能这样做。每个应用程序都是“沙盒”，基本上将其与系统上的所有其他应用程序完全分开。

对不起。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-18T09:15:55.210

您可以使用下面链接中定义的类别来获取正在运行的进程列表，并查找目标进程名称。

[http://forrst.com/posts/UIDevice_Category_For_Processes-h1H](http://forrst.com/posts/UIDevice_Category_For_Processes-h1H)

# php - JSON编码的最佳格式？

> ID：13928563
> 
> 赞同：0
> 
> 时间：2012-12-18T07:52:55.013
> 
> 标签：php, android, json

我不熟悉 PHP 和 JSON，但我的 Android 项目需要它。

我对哪种 JSON 格式**最有效**感到困惑。我看到的大多数示例都使用以下代码使用*关联*数组：

```
$result = mysql_query($queryString)
while($row = mysql_fetch_assoc($result)){
    $json['contact']['ID'] = $row['ID'];
    $json['contact']['Name'] = $row['Name'];
} 
```

**格式 #1**

```
{"contact":{"ID":"1","Name":"Andy"}} 
```

我喜欢这种格式，但我不知道如何让每个键包含多个值。所以当我的查询返回*Andy*和*Bob*时，json 将只包含*Bob*。

然后，我找到了这个 PHP 代码：

```
while($row = mysql_fetch_row($result)){
    $json['contact'][] = $row;
}
echo json_encode($json); 
```

它使 json 看起来像这样：

**格式 #2**

```
{"contact":[["1","Andy"],["2","Bob"]]} 
```

但在 Android 中，没有`JSONObject`方法可以`getArray()`. 即使有，我也想避免使用需要或被调用的*编号数组。*`[0]``[1]`

那么，哪一个更好呢？还是有其他选择？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T07:57:16.063

并不是说一种方法比另一种更“有效”，它们的用途不同。一个是关联对象，另一个是索引数组。

在您的情况下，您似乎想要一个对象列表（索引数组）。所以我建议做的是：

```
$result = mysql_query($queryString)
while($row = mysql_fetch_array($result, MYSQL_ASSOC)){
    $json['contact'][] = $row;
}
echo json_encode($json); 
```

这将导致json：

```
{"contact":[{"ID":"1","Name":"Andy"}, {"ID":"2","Name":"Bob"}]} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T07:54:14.640

为什么不使用 mysql_fetch_array(); ?

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T07:57:49.070

```
{"contacts":[{"id":1,"name":"Alice"},{"id":2,"name":"Bob"}]} 
```

一个带有关键联系人的对象，其中可能包含一组联系人对象？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T08:00:17.607

您也可以进行硬编码（不如 mysql_fetch_array() 好）；

```
$result = array();
$i = 0;
while(...) {
  $result[] .= '{"id":"'.$i.'","name":"'.$fetch['name'].'"}';
  $i++;
}
echo "[".implode(',', $result)."]"; 
```

# visual-studio-2012 - C++ 中未解析的外部符号托管

> ID：13928565
> 
> 赞同：0
> 
> 时间：2012-12-18T07:53:02.800
> 
> 标签：visual-studio-2012, c++-cli, managed

我有使用 /clr 编译的 C++ 托管 dll，它具有一些全局函数。

例如

```
void Managed2UnManaged(DataStructures::AAA^ elem, DataStructures::CPP::AAA* copy_elem); 
```

当我尝试在 C++ 托管控制台应用程序中使用这些函数时，出现以下错误

错误 LNK2028：未解析的令牌 (0A00048C) “void __clrcall Managed2UnManaged(class DataStructures::AAA ^,class DataStructures::CPP::AAA *)”(?Managed2UnManaged@@$$FYMXP$AAVAAA@DataStructures@NextIn@@PAV1CPP@23 @@Z)

错误 LNK2019：无法解析的外部符号“void __clrcall Managed2UnManaged(class DataStructures::AAA ^,class DataStructures::CPP::AAA *)”(?Managed2UnManaged@@$$FYMXP$AAVAAA@DataStructures@NextIn@@PAV1CPP@23@@ Z)

我向控制台应用程序添加了对 dll 的引用，但它仍然给出了错误。

我也尝试添加 __declspec(dllexport) 但后来我得到了

错误 C3395：“Managed2UnManaged”：__declspec(dllexport) 不能应用于具有 __clrcall 调用约定的函数

如果我指定 __stdcall 我得到

错误 C4439：“Managed2UnManaged”：签名中具有托管类型的函数定义必须具有 __clrcall 调用约定

我正在使用VS2012。

h文件有

```
class XXX {
 public:
static void Managed2UnManaged(DataStructures::RegResult^ elem,     DataStructures::CPP::RegResult* copy_elem);
}; 
```

和cpp文件

```
 void XXX::Managed2UnManaged(DataStructures::RegResult^ elem, DataStructures::CPP::RegResult* copy_elem)
{

} 
```

问题解决了。问题是我还需要声明类公共参考。这导致了另一个问题，因为本机 c++ 类型是私有的。所以我不得不使用 make_public 杂注。谢谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T08:45:16.107

我认为问题可能是 CLR 不允许全局函数。

您必须创建一个托管类并将您的函数编写为该类的静态成员函数，才能导出该函数。

# c++ - 为什么 boost::assign::list_of 不能与 pair 一起使用 >?

> ID：13928573
> 
> 赞同：6
> 
> 时间：2012-12-18T07:53:48.977
> 
> 标签：c++, visual-c++, boost

我不明白为什么这不起作用（Visual C++ 2012）：

```
#include <string>
#include <utility>
#include <vector>
#include <boost/assign/list_of.hpp>

using namespace std;

int main()
{
    pair<string, vector<string> >("^", boost::assign::list_of<string>("rules"));
} 
```

错误是：

```
include\utility(138) : error C2668: 'std::vector<_Ty>::vector' : ambiguous call to overloaded function with [ _Ty=std::string ]
include\vector(786): could be 'std::vector<_Ty>::vector(std::vector<_Ty> &&)' with [ _Ty=std::string ]
include\vector(693): or       'std::vector<_Ty>::vector(unsigned int)' with [ _Ty=std::string ]
while trying to match the argument list '(boost::assign_detail::generic_list<T>)' with [ T=std::string ]
test.cpp(12) : see reference to function template instantiation 'std::pair<_Ty1,_Ty2>::pair<const char(&)[2],boost::assign_detail::generic_list<T>>(_Other1,_Other2 &&,void **)' being compiled
with
[
    _Ty1=std::string,
    _Ty2=std::vector<std::string>,
    T=std::string,
    _Other1=const char (&)[2],
    _Other2=boost::assign_detail::generic_list<std::string>
]
test.cpp(12) : see reference to function template instantiation 'std::pair<_Ty1,_Ty2>::pair<const char(&)[2],boost::assign_detail::generic_list<T>>(_Other1,_Other2 &&,void **)' being compiled
with
[
    _Ty1=std::string,
    _Ty2=std::vector<std::string>,
    T=std::string,
    _Other1=const char (&)[2],
    _Other2=boost::assign_detail::generic_list<std::string>
] 
```

我无法破译为什么它试图访问`unsigned int`重载......有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T10:07:28.997

这是因为`pair`在 C++11 中添加了一个新的构造函数来接受通用引用。结果，此代码将在 VS2012（添加此构造函数）和 GCC 中在 C++11 模式下失败。

**在 C++03 中**：

构造`pair<T1,T2>`函数是：

```
pair( const T1& x, const T2& y ) : first(x), second(y) {} 
```

在这种情况下，`T2 == vector<string>`。

一个`generic_list`对象（由 返回的对象`list_of`）有一个模板转换运算符：

```
template <class Container>
operator Container() const; 
```

当您`generic_list`作为参数传入时，它会尝试将`generic_list`对象转换为 a `vector<string>`，因为这是构造函数所期望的，并且成功。

**在 C++11 中**：

添加了这个`pair<T1,T2>`构造函数：

```
template< class U1, class U2 >
pair( U1&& x, U2&& y ) : first(std::forward<U1>(x)), second(std::forward<U2>(y)) 
```

现在，当您传入一个`generic_list`对象时，它将以`generic_list&&`. 当它试图用这个对象调用`second`（类型的`vector<string>`）构造函数时，它不知道要调用这些构造函数中的哪一个：

```
explicit vector(size_type count, [more params with default values])
vector(const vector& other); 
```

由于`generic_list`可以同时转换为`size_type`和`vector<string>`。这会导致编译错误。

**修复/解决方法**：

一个可能的解决方法是使用该`convert_to_container`方法并指定目标类型：

```
pair<string, vector<string> >("^", boost::assign::list_of<string>("rules").convert_to_container<vector<string> >()); 
```

另一种选择是使用`make_pair`并明确指定其模板参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-06T09:58:47.440

所以代替这个：

```
("^", boost::assign::list_of<string>("rules")) 
```

我必须写：

```
("^", boost::assign::list_of<string>("rules").convert_to_container<vector<string> >()); 
```

让它有点不可读......我添加了另一个模板：

```
template <typename T>
std::vector<T> vect(const boost::assign_detail::generic_list<T>& gen_list)
{ return gen_list.convert_to_container<std::vector<T> >(); } 
```

现在可以写成：

```
("^", vect(boost::assign::list_of<string>("rules"))) 
```

这仍然不是很好，但更接近你开始的内容。

# algorithm - interviewstreet Triplet challenge

> ID：13928575
> 
> 赞同：6
> 
> 时间：2012-12-18T07:54:07.620
> 
> 标签：algorithm

There is an integer array d which does not contain more than two elements of the same value. How many distinct ascending triples (d[i] < d[j] < d[k], i < j < k) are present?

**Input format:**

The first line contains an integer N denoting the number of elements in the array. This is followed by a single line containing N integers separated by a single space with no leading/trailing spaces

**Output format:**

A single integer that denotes the number of distinct ascending triples present in the array

**Constraints:**

N <= 10^5 Every value in the array is present at most twice Every value in the array is a 32-bit positive integer

**Sample input:**

```
6 
1 1 2 2 3 4

```

**Sample output:**

```
4

```

**Explanation:**

The distinct triplets are

```
(1,2,3)
(1,2,4)
(1,3,4)
(2,3,4) 
```

Another test case:

**Input:**

```
10
1 1 5 4 3 6 6 5 9 10

```

**Output:**

```
28

```

I tried to solve using DP. But out of 15 test cases only 7 test cases passed. Please help solve this problem.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T22:50:04.437

您应该注意，您只需要知道小于/大于特定元素的元素数量即可知道它用作中间点的三元组数量。使用它，您可以很容易地计算三元组的数量，唯一剩下的问题是摆脱重复项，但鉴于您最多只能使用 2 个相同的元素，这很简单。

我使用二进制索引树[http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=binaryIndexedTrees](http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=binaryIndexedTrees)解决了。

我还写了一篇小文章，[http://www.kesannmcclean.com/?p=223](http://www.kesannmcclean.com/?p=223)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-28T09:09:01.643

```
package com.jai;

import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.util.Arrays;
import java.util.HashMap;

public class Triplets {

    int[] lSmaller, rLarger, treeArray, dscArray, lFlags, rFlags;

    int size, count = 0;

    Triplets(int aSize, int[] inputArray) {
        size = aSize;
        lSmaller = new int[size];
        rLarger = new int[size];
        dscArray = new int[size];
        int[] tmpArray = Arrays.copyOf(inputArray, inputArray.length);
        Arrays.sort(tmpArray);
        HashMap<Integer, Integer> tmpMap = new HashMap<Integer, Integer>(size);
        for (int i = 0; i < size; i++) {
            if (!tmpMap.containsKey(tmpArray[i])) {
                count++;
                tmpMap.put(tmpArray[i], count);
            }
        }
        count++;
        treeArray = new int[count];
        lFlags = new int[count];
        rFlags = new int[count];
        for (int i = 0; i < size; i++) {
            dscArray[i] = tmpMap.get(inputArray[i]);
        }

    }

    void update(int idx) {
        while (idx < count) {
            treeArray[idx]++;

            idx += (idx & -idx);
        }
    }

    int read(int index) {
        int sum = 0;
        while (index > 0) {
            sum += treeArray[index];
            index -= (index & -index);
        }
        return sum;
    }

    void countLeftSmaller() {
        Arrays.fill(treeArray, 0);
        Arrays.fill(lSmaller, 0);
        Arrays.fill(lFlags, 0);
        for (int i = 0; i < size; i++) {
            int val = dscArray[i];
            lSmaller[i] = read(val - 1);
            if (lFlags[val] == 0) {
                update(val);
                lFlags[val] = i + 1;
            } else {
                lSmaller[i] -= lSmaller[lFlags[val] - 1];
            }
        }
    }

    void countRightLarger() {

        Arrays.fill(treeArray, 0);
        Arrays.fill(rLarger, 0);
        Arrays.fill(rFlags, 0);
        for (int i = size - 1; i >= 0; i--) {
            int val = dscArray[i];
            rLarger[i] = read(count - 1) - read(val);
            if (rFlags[val] == 0) {
                update(val);
                rFlags[val] = i + 1;
            }
        }
    }

    long countTriplets() {
        long sum = 0;
        for (int i = 0; i < size; i++) {
            sum += lSmaller[i] * rLarger[i];
        }
        return sum;
    }

    public static void main(String[] args) throws Exception {
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));

        int N = Integer.parseInt(br.readLine());
        int[] a = new int[N];
        String[] strs = br.readLine().split(" ");
        for (int i = 0; i < N; i++)
            a[i] = Integer.parseInt(strs[i]);
        Triplets sol = new Triplets(N, a);
        sol.countLeftSmaller();
        sol.countRightLarger();
        System.out.println(sol.countTriplets());
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T10:05:33.643

对于我想出的暂定算法，它应该是：

~~`(K-1)!^2`~~

其中 K 是唯一元素的数量。

**编辑**

经过更多思考：

```
 SUM[i=1,K-2]  SUM[j=i+1,K-1]    SUM[m=j+1,K]   1
 =>   SUM[i=1,K-2]  (SUM[j=i+1,K-1]   (K-j)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T23:07:12.327

*   如果输入未排序（问题对此不清楚）：对其进行排序
*   删除重复项（此步骤可以与第一步结合）
*   现在选择 3 个项目。由于项目已经排序，因此选择的三个项目也已排序
*   IIRC 有 (n!) / ((n-3)! * 3!) 方法来选择这三个项目；与 n := 唯一项目的数量

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-05T15:14:12.280

python中的解决方案之一：

```
from itertools import combinations as comb
def triplet(lis):
    done = dict()
    result = set()
    for ind, num in enumerate(lis):
        if num not in done:
            index = ind+1
            for elm in comb(lis[index:], 2):
                s,t = elm[0], elm[1]
                if (num < s < t):
                    done.setdefault(num, None)
                    fin = (num,s,t)
                    if fin not in result:
                        result.add(fin)
    return len(result)

test = int(raw_input())
lis = [int(_) for _ in raw_input().split()]
print triplet(lis) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-28T08:07:42.723

@hadron：确切地说，我无法理解为什么一组 7 个不同的数字应该是**28**而不是**35 ***

*[由于问题是关于升三连音，重复的数字可以丢弃]。*

顺便说一句，这是一个非常糟糕的 Java 解决方案（N^3）：

我还打印了可能的三元组：

我也在考虑一些函数，它指示输入“N”可能的三元组数

*   4 **4**
*   5 **10**
*   6 **20**
*   7 **35**
*   8 **56**
*   9 **84**

    包 org.HackerRank.AlgoChallenges；

    导入 java.util.Iterator；导入 java.util.Scanner；导入 java.util.TreeSet；

    公共类三胞胎{

    ```
    public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in);
        int result = 0;
        int n = scanner.nextInt();
        Object[] array = new Object[n];
        TreeSet<Integer> treeSet = new TreeSet<Integer>();
        /*
         * for (int i = 0; i < n; i++) { array[i] = scanner.nextInt(); }
         */

        while (n>0) {
            treeSet.add(scanner.nextInt());
            n--;
        }
        scanner.close();

        Iterator<Integer> iterator = treeSet.iterator();
        int i =0;
        while (iterator.hasNext()) {
            //System.out.println("TreeSet["+i+"] : "+iterator.next());
            array[i] = iterator.next();
            //System.out.println("Array["+i+"] : "+array[i]);
            i++;
        }
        for (int j = 0; j < (array.length-2); j++) {
            for (int j2 = (j+1); j2 < array.length-1; j2++) {
                for (int k = (j2+1); k < array.length; k++) {
                    if(array[j]!=null && array[j2]!=null && array[k]!=null){
                        System.out.println("{ "+array[j]+", "+array[j2]+", "+array[k]+" }");
                        result++;
                    }
                }
            }
        }

        System.out.println(result);
    } 
    ```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-12-18T08:38:55.747

你关心复杂性吗？

输入数组是否已排序？

如果你不介意复杂性，你可以用 N^3 的复杂性来解决它。

复杂度为 N^3 的解决方案：如果未排序，则对数组进行排序。使用 3 个 for 循环一个在另一个中，然后为每个数字扔数组 3 次。使用哈希图计算所有三元组。键是它自己的三元组，值是出现的次数。

它应该是这样的：

```
for (i1=0; i1<N; i1++) {
    for (i2=i1; i2<N; i2++) {
        for (i3=i2; i3<N; i3++) {
            if (N[i1] < N[i2] < N[i3]) {
                /* if the triple exists in the hash then 
                        add 1 to its value
                    else 
                        put new triple to the hash with 
                        value 1 
                */
            }
        }
    }
} 
```

结果 = 哈希中的三元组数；

我没有尝试过，但我认为它应该可以工作。

# iphone - 将左侧的 barbutton 项目更多地向右移动

> ID：13928580
> 
> 赞同：0
> 
> 时间：2012-12-18T07:54:30.897
> 
> 标签：iphone, objective-c, ios, uinavigationcontroller

我有一个左栏按钮项目。但我希望它更向右移动。目前它粘在左侧。任何人都知道我该如何实现这一目标？

这是我的按钮本身的代码。

```
 UIButton *button =  [UIButton buttonWithType:UIButtonTypeCustom];
    [button setBackgroundImage:[UIImage imageNamed:@"task_status.png"] forState:UIControlStateNormal];
    [button addTarget:self action:@selector(changeStatus:) forControlEvents:UIControlEventTouchUpInside];
    [button setFrame:CGRectMake(80, 0,100, 18)];
    self.tabBarController.navigationItem.leftBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView:button]; 
```

希望有人能帮我解决这个问题。

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T08:03:33.253

为什么不直接添加右栏按钮？

```
self.tabBarController.navigationItem.rightBarButtonItem = [[[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(changeStatus:)] autorelease]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T08:05:22.533

这就是我所做的它对我有用

```
UIImage *image = [UIImage imageNamed:@"btn_bar_back.png"] ;
UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
button.frame = CGRectMake(10.0, -15.0, image.size.width, image.size.height);//set your button frame
[button setBackgroundImage:image forState:UIControlStateNormal];
[button setTitle:@"BACK" forState:UIControlStateNormal];
button.contentEdgeInsets = UIEdgeInsetsMake(0, 8, 0, 0);// if want to move text more towards right
[button addTarget:self action:@selector(backButtonPressed:) forControlEvents:UIControlEventTouchUpInside];
UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0.0, 0.0, image.size.width+10, 50)];
button.center = CGPointMake(view.center.x, view.center.y);
[view addSubview:button];

self.navigationItem.leftBarButtonItem = [[[UIBarButtonItem alloc] initWithCustomView:view] autorelease];

[view release]; 
```

# android - Confuse about Relogin in Twitter4j Android

> ID：13928582
> 
> 赞同：1
> 
> 时间：2012-12-18T07:54:32.157
> 
> 标签：android, twitter, twitter-oauth

Right now i develop simple app that require login to my app (not login twitter), and he/she can look our collection and can share it into twitter. In setting there is option to login twitter and i use Twitter4j with [this tutorial](http://www.londatiga.net/it/how-to-post-twitter-status-from-android/). My problem is :

1.  if Person A login into my App and login Twitter and share content and then Logout my App without logout the Twitter
2.  how can i detect if Person B login into my App and want to login Twitter (using same device with Person A) ?? do i have disconect twitter Person A and than connect Person B ??
3.  If I disconect twitter Person A, and maybe Person A login again to my App , i dont want he/she do login Twitter again, i want automaticly..how can do that with twitter4j??

sorry i my qustion hard to understand, my english is bad ><

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T22:59:36.193

这很难理解，但我会尽力而为！

注意，这只是一个例子，有很多方法，比我建议的更好和更差，所以学习、研究和祝你好运！

现在，按照您的要求按照以下步骤构建您的应用程序：

*   创建一个您偏好的集合，该集合接受一些 ID 和访问令牌对象，并通过您选择的方法永久保存该集合，以供每次应用程序启动时使用。

*   当一个人登录到您的应用程序然后登录 twitter 时，将该 Persons 访问令牌以该 Person 作为其 ID 保存到您的集合中。

*   重新保存您更新的收藏。

*   下次 Person 登录时，只需检查它们是否存在于集合中：

*   如果他们这样做？继续并使用存储的访问令牌对它们进行身份验证。

*   如果他们没有？当他们需要 twitter 服务时，继续并启动一个新的 twitter auth 进程。

这样，无论有多少用户在同一台​​设备上使用您的应用程序，每个 twitter 访问令牌都将被保存并且只能由适当的用户访问。

此外，据我所知，“注销” twitter 就像删除/丢弃与想要注销的用户相关的访问令牌对象一样简单。

希望这可以帮助。

# php - 在二维数组中循环

> ID：13928583
> 
> 赞同：-4
> 
> 时间：2012-12-18T07:54:31.000
> 
> 标签：php, arrays, loops, 2d

请帮我。我被这个问题发疯了。谁能教我？我很讨厌循环二维数组..我的问题是：我如何循环由 9 x 9 乘法表产生的答案并将答案填充到二维数组中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T07:57:21.510

尝试 ：

```
for($i = 0; $i < 9; $i++){
    for($j = 0; $j < 9; $j++){
        $arr[$i][$j] = ($i + 1) * ($j + 1);
    }
} 
```

假设那`$i`是乘法表的行，并且`$j`是列。

在 PHP 中，数组是从 0 开始的，即数组的第一个条目是 0。

所以我们从 0 到 9 ( ) 遍历每个坐标`$ix$j`，用乘法的结果填充数组的每个单元格（我们将 1 加到`$i`and`$j`以便第 0 行包含 1 乘法表，依此类推）。

也许您应该在继续之前阅读一些编程书籍，因为这绝对是基础知识。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T07:58:50.530

```
<?php
$multiplicant=9;
for($i=1;i<10;i++)
{
  $product[$i][$multiplicant] = $multiplicant*$i;

}
print_r($product); 
```

# struts2 - Struts 2 Double form submit - why?

> ID：13928587
> 
> 赞同：0
> 
> 时间：2012-12-18T07:54:45.680
> 
> 标签：struts2

I have a few simple actions:

```
<action name="edit" class="EditAction">
  <result>/WEB-INF/jsp/form.jsp</result>
</action>

<action name="preview" class="PreviewAction">
  <result>/WEB-INF/jsp/preview.jsp</result>
  <result name="input">/WEB-INF/jsp/form.jsp</result>
</action>

<action name="store" class="StoreAction">
  <result>/WEB-INF/jsp/confirmation.jsp</result>
  <result name="input">/WEB-INF/jsp/preview.jsp</result>
</action>

<global-results>
  <result name="invalid.token">/WEB-INF/jsp/invalidToken.jsp</result>
</global-results> 
```

and classic scenario: user interacts with text inputs, press Save, view a Preview page and press Save on it to save data, without double-press buttons, refreshing page etc.

Why double submit can occurs in such situation?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T09:11:02.710

即使我在浏览器刷新时在 struts2 中遇到双重表单提交问题。我使用 post-redirect-get 模式解决了这个问题，以避免重复或重复的表单提交。发生这种情况是因为根据 POST 请求为响应点击“刷新页面”将重新发出 POST 请求。即使按下双按钮，它也会重复您为到达当前页面所做的操作。struts2 中的成功和错误都会发生这种情况。我建议您在必要时进行此更改。

```
<action name="onStoreRedirect">
  <result name="success" type="redirect">store</result>
</action>

<action name="store" class="StoreAction">
  <result>/WEB-INF/jsp/confirmation.jsp</result>
  <result name="input">/WEB-INF/jsp/preview.jsp</result>
</action> 
```

# mysql - 空时间戳上的mysql表索引

> ID：13928589
> 
> 赞同：1
> 
> 时间：2012-12-18T07:54:51.563
> 
> 标签：mysql, indexing, timestamp

我有一个带有时间戳字段的 mysql 表。
此表上的大多数查询将是`where someIntegerIield=? and theTimestampField is null`.

我应该使用时间戳字段作为索引的一部分吗？
或者我应该创建并维护另一个在时间戳字段为空时设置为 0 否则设置为 1 的文件？

也欢迎其他替代方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T15:13:23.313

是的，您可以为“timestamp1 和 timestamp2 之间的时间”使用索引。MySQL / InnoDB 中的默认索引类型是 BTREE，它也适用于比较（<、>、介于）以及前缀。是的，MySQL 确实在索引条件中使用 IS NULL/IS NOT NULL。[http://dev.mysql.com/doc/refman/5.5/en//is-null-optimization.html](http://dev.mysql.com/doc/refman/5.5/en//is-null-optimization.html)用于某些表类型（包括 InnoDB）。

如果您使用的是早期版本的 MySQL，您可以随时尝试“EXPLAIN”：它会告诉您它是否使用索引（以及哪个）用于您的查询

# cakephp-2.1 - 显示页面：2 直接在 CAKEPHP 中的查看页面中

> ID：13928590
> 
> 赞同：0
> 
> 时间：2012-12-18T07:54:51.223
> 
> 标签：cakephp-2.1

是否有任何选项`$this->Paginator->Settings()`可以对表进行分页并将第二页或第三页存储到变量中

```
$view=$this->Paginate('Post'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T08:03:22.397

您可以使用以下内容指定页面：

```
$this->Paginate->settings(array('page' => 2));
$posts = $this->Paginate->paginate('Post'); 
```

`$posts`现在包含页面的记录`2`

# android - 为什么 Activity 在从另一个 Activity 的几个片段返回时挂起？

> ID：13928591
> 
> 赞同：0
> 
> 时间：2012-12-18T07:54:57.667
> 
> 标签：android, android-intent, android-ui

我有两个活动活动 A 和 B，活动 A 有 3 个片段，即 a1、a2 和 a3。a3 是显示视频的默认选定片段，a2 包含一个大文本视图和一个小的编辑文本，a1 包含一个列表视图。

现在在活动 A 的标题栏上，我有一个按钮，因为它在标题栏上，所以从所有 3 个片段中都可以看到它。此按钮的 OnClick 我使用以下功能打开 Activity B。

```
public void inviteUser() {
    if ( getUserType() == ACTIVE ) {
        Intent intent = new Intent(this, B.class);
        intent.putExtra(Constants.MEETING_ID, (long) session.getSessionId());
        intent.putExtra(Constants.INVITE_FROM_SESSION, true);
        intent.setFlags(Intent.FLAG_ACTIVITY_NO_HISTORY | Intent.FLAG_ACTIVITY_SINGLE_TOP);
        this.startActivityForResult(intent, RESULT_OK);
    } else {
        Toast.makeText(this, getString(R.string.strNotAPresenterMsg), Toast.LENGTH_LONG).show();
    }
} 
```

在 BI 内部称其为`setResult(ResultCode) and finish()`. 现在我***从片段 a1 和 a2 开始 B***时有**两个问题，**

 *## 1\. B 在返回 A 之前花费了太多时间（即在按下后退按钮或完成 B 的工作之后），2\. 返回后它不显示任何对话框，直到我导航到其他片段或我旋转设备，一旦我这样做，它就会开始正常且令人惊讶地表现，

当我***从片段 a3 启动活动 B 时，***它会立即返回并正常运行。

我已经尝试覆盖这些片段的所有生命周期方法，并将日志语句放在每个方法中。痛苦是这两种情况的方法调用顺序是正常且相同的。

我曾尝试更改意图的标志，但没有任何收获。

我`android:configChanges="keyboardHidden|orientation"`为我的应用程序的所有活动添加了 falg。

希望我解释了这个问题，以防有人需要代码的任何特定部分。请发表评论。我将编辑问题并添加。帮助各位！！！

**编辑** 我在 GingerBread 2.3.6 中测试它没有工作，但我只是在运行 JellyBean 的模拟器上检查了它，它工作正常。看起来问题与操作系统版本有关。任何的想法 ？

**编辑 2** 一个重要的观察点是，当在 BI 中按下后退按钮时，几毫秒后，将调用 Previous Activity 的 onResume() 及其片段。但即使在 B 出现在屏幕上一段时间之后，电话似乎也挂了几秒钟......

**编辑 3** 刚知道当我从片段 a1 或 a2 启动 B 时，不会调用 B 的 onStop() 和 OnDestroy()。然而，当我在 a3 上时，它们被完美地调用。这可能是什么原因？

该文档说“活动的可见生命周期发生在对 onStart() 的调用与对 onStop() 的相应调用之间。在此期间，用户可以在屏幕上看到该活动，尽管它可能不在前台并且与用户互动。”

由于不能保证 onStop() 活动在不被调用时行为异常。我也开始知道在 HoneyComb+ 设备中它总是被调用。我曾尝试在 onPause() 内调用 onStop() 但这不起作用。我现在应该做什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T05:19:54.320

对我来说，向 SO 社区解释我的问题真的很困难，更难的是理解问题的根源，但是一旦我跟踪了错误源，只需要几分钟就可以解决问题。

> 问题是由于 Activity 的布局视图中包含的布局（比如 x）。x 的可见性由当前片段决定。它在 a3 和 View.GONE 上可见于其他两个片段。我从 a1 和 a2 中删除了该布局，问题就解决了……

但是我仍然无法理解它与 B 的 onStop 和 onDestroy 有什么关系，现在它们被完美地调用了......如果有人能找到，请分享..

希望这些信息对其他人有帮助，*

# java - java输入文件，文件不显示，使用字节

> ID：13928595
> 
> 赞同：0
> 
> 时间：2012-12-18T07:55:28.170
> 
> 标签：java, byte, fileoutputstream

我需要一些帮助。
我将 int 更改为 hex 之后将其更改为 byte 并尝试将其写入文件。
但是该文件没有作为我构建的jar文件出现在目录中。

```
 File ModFile =new File(NameText.getText() + ".mod");
FileOutputStream writer = null;

String toProcess = CodesBox.getText();
int i = Integer.parseInt(CodesBox.getText());
byte codes = (byte) i;  

try {
    writer = new FileOutputStream(ModFile);
    writer.write(codes);

} catch (IOException ex) {
    Logger.getLogger(ModMakerGui.class.getName()).log(Level.SEVERE, null, ex);
}finally{
    try {
        writer.close();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

NameText.getText() 肯定在那里， CodesBox.getText() 也绝对正确。

![看到这张图片](../Images/12df7dcc857810697f9aa29196b68d22.png)
如您所见，这是我在十六进制编辑器中打开生成的文件时得到的。但我想要这个。
![IMG](../Images/6e27ce8eb5a3232a8f55e94c1a3a2c7c.png)
我可以知道如何解决这个问题吗？
我知道输出文件是带有空格的“vPTP”，我需要空格，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T09:24:00.607

Try this if you use **FileOutputStream** as well as to write bytes.

```
File ModFile =new File(NameText.getText() + ".mod");
FileOutputStream writer = null;

try {
    writer = new FileOutputStream(ModFile);
    writer.write(CodesBox.getText().getBytes(),0,CodesBox.getText().getBytes().length);

} catch (IOException ex) {
    Logger.getLogger(ModMakerGui.class.getName()).log(Level.SEVERE, null, ex);
}finally{
    try {
        writer.close();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T08:01:06.467

请使用`FileWriter`或`PrintWriter`。

例如：

```
modFile = new File(NameText.getText() + ".mod");
FileWriter writer = null;
if(!modFile.exists()){
   try {
      modFile.createNewFile();
      writer = new FileWriter(ModFile);
      System.out.println("Mod file has been created to the current directory");
      writer.write(CodesBox.getText());
   } catch (IOException ex) {
      Logger.getLogger(ModMakerGui.class.getName()).log(Level.SEVERE, null, ex);
   }
} 
```

# sqlite - 等到恢复价值

> ID：13928596
> 
> 赞同：0
> 
> 时间：2012-12-18T07:55:35.080
> 
> 标签：sqlite, cordova, jquery-mobile

我正在尝试使用 PhoneGap 框架开发离线移动应用程序。我正在使用 sqlite PhoneGap 访问我的本地数据库。

我的应用程序使用了 2 个表，表 1 包含值并包含表 2 中值的标识符，要显示数据我必须等待表 2 的恢复值与`recover_type_client`传递值的 函数`IdClient`

我怎样才能等到我检索`TXT`到显示的值

```
function successDB(tx, results)
{
    for( var i=0; i<results.rows.length; i++  )
    {
        TXT = recover_type_client(results.rows.item(i).IdClient )//Function 
        $("#tbod").append('<tr><td><input type="checkbox" name="vehicle" value="'+results.rows.item(value).IdPrestation+'"></td>'
                        +'<td> '+results.rows.item(value).RefPrestation                                               +' </td>'
                        +'<td> '+TXT                                                                      +' </td>'
                        +'<td> '+results.rows.item(value).CoordonneesAdressePrestation                                +' </td>'
                        +'<td> '+tab_client[i]  
                        +'</tr>');
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T09:53:06.353

你有用

```
 results.rows.item(value).IdPrestation 
```

但是价值没有定义

# java - Play 中的输入！日期和时间？

> ID：13928597
> 
> 赞同：2
> 
> 时间：2012-12-18T07:55:35.323
> 
> 标签：java, view, playframework, playframework-2.0, field

我需要在我的表单中有 2 个输入，一个用于日期，一个用于时间。在我的模型中，它只是 java.util.Date 类型的一个属性。使用 Play 框架 2 处理生成 html 并将输入字段绑定到模型中的 date 属性的最佳实践是什么？

请注意，如果我使用字段构造函数，我无法按照我需要的方式布置表单。我想要第一行的标签，第二行的 2 个输入，第三行的验证错误。我应该只使用原始html吗？如果这样做，我是否仍然可以访问验证错误和约束？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T11:33:52.063

如果您在模型中使用两个单独的字段，绑定肯定会更容易。一个想法是创建一个绑定到表单提交的中间类。

```
// Controller

public static class FormSubmission {
  public Date date;
  public Date time;
}

public static Result submitForm() {
  Form<FormSubmission> filledForm = form(FormSubmission.class).bindFromRequest();
  if (filledForm.hasErrors()) {
    return badRequest();
  } else {
    ModelClass model = new ModelClass(); // fetch first if you update
    // Copy all values from form submission to the model
    model.dateAndTime = combineDateAndTime(filledForm.get().date, filledForm.get().time);
  }
  return ok();
}

// View
@(form: Form[FormSubmission])
... 
```

（我知道这无济于事，但这样的任务在 Scala 中非常微不足道。）

# javascript - 字符串中的整数的Javascript IndexOf不起作用

> ID：13928598
> 
> 赞同：5
> 
> 时间：2012-12-18T07:55:34.877
> 
> 标签：javascript, jquery

谁能告诉我为什么这不适用于整数但适用于字符？我真的很讨厌 reg 表达式，因为它们很神秘，但如果我也有的话。我还想在有效字符中包含“-()”。

```
String.prototype.Contains = function (str) {  
    return this.indexOf(str) != -1;
};

var validChars = '0123456789';               

var str = $("#textbox1").val().toString();
if (str.Contains(validChars)) {
    alert("found");
} else {
    alert("not found");
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T08:05:18.633

**审查**

```
String.prototype.Contains = function (str) {  
    return this.indexOf(str) != -1;
}; 
```

如果包含在其自身中，则此字符串“方法”返回 true `str`，例如 'hello world'.indexOf('world') != -1 `would return`true`。

```
var validChars = '0123456789';               

var str = $("#textbox1").val().toString(); 
```

的值`$('#textbox1').val()`已经是一个字符串，所以`.toString()`这里不需要。

```
if (str.Contains(validChars)) {
    alert("found");
} else {
    alert("not found");
} 
```

这就是问题所在；有效地执行`'1234'.indexOf('0123456789') != -1`；`false`除非你有一个巨大的数字，否则它几乎总是会返回`10123456789`。

您可以做的是测试每个字符是否`str`包含在其中`'0123456789'`，例如. 不过，它可以做得更容易。`'0123456789'.indexOf(c) != -1``c``str`

**解决方案**

我知道你不喜欢正则表达式，但它们在这些情况下非常有用：

```
if ($("#textbox1").val().match(/^[0-9()]+$/)) {
   alert("valid");
} else {
   alert("not valid");
} 
```

**解释**

`[0-9()]`是一个字符类，包括范围`0-9`的缩写`0123456789`和括号`()`。

`[0-9()]+`匹配至少一个与上述字符类匹配的字符。

`^[0-9()]+$`匹配所有字符与字符类匹配的字符串；`^`并`$`分别匹配字符串的开头和结尾。

最后，整个表达式的两边都用 填充`/`，即正则表达式的分隔符。它是 的缩写`new RegExp('^[0-9()]+$')`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T08:02:07.140

`validChars`您正在传递to的整个列表`indexOf()`。您需要遍历字符并一一检查。

**[演示](http://jsfiddle.net/hA4fz/)**

```
String.prototype.Contains = function (str) {  

  var mychar;
  for(var i=0; i<str.length; i++)
  {
    mychar = this.substr(i, 1);
    if(str.indexOf(mychar) == -1)
    {
        return false;
    }
  }

  return this.length > 0;
}; 
```

要在整数上使用它，您可以使用 将整数转换为字符串`String()`，如下所示：

```
var myint = 33; // define integer
var strTest = String(myint); // convert to string
console.log(strTest.Contains("0123456789")); // validate against chars 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T08:09:32.107

假设您正在寻找一个函数来验证您的输入，考虑一个`validChars`参数：

```
String.prototype.validate = function (validChars) {  
    var mychar;
    for(var i=0; i < this.length; i++) {
        if(validChars.indexOf(this[i]) == -1) { // Loop through all characters of your string.
            return false; // Return false if the current character is not found in 'validChars' string.
        }
    }
    return true;
};

var validChars = '0123456789';

var str = $("#textbox1").val().toString();
if (str.validate(validChars)) {
    alert("Only valid characters were found! String validates!");
} else {
    alert("Invalid Char found! String doesn't validate.");
} 
```

**但是**，这对于字符串验证来说是相当多的代码负载。我建议改为研究正则表达式。（杰克在[这里有一个很好的答案](https://stackoverflow.com/a/13928715/1835379)）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T08:22:38.530

我只是在猜测，但您似乎正在尝试检查电话号码。更改函数的一种简单方法是使用 RegExp 检查字符串值。

```
String.prototype.Contains = function(str) {
    var reg = new RegExp("^[" + str +"]+$");
    return reg.test(this);
}; 
```

但它不检查字符串中的符号序列。

检查电话号码比较复杂，所以 RegExp 是一个很好的方法（即使你不喜欢它）。它看起来像：

```
String.prototype.ContainsPhone = function() {
    var reg = new RegExp("^\\([0-9]{3}\\)[0-9]{3}-[0-9]{2}-[0-9]{2}$");
    return reg.test(this);
}; 
```

此变体将检查手机，例如`"(123)456-78-90"`. 它不仅检查字符列表，还检查它们在字符串中的顺序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-18T16:03:49.967

谢谢大家的答案！看起来我会使用正则表达式。我已经尝试了所有这些解决方案，但真的希望能够传入一串validChars，但我会传入一个正则表达式..

这适用于单词、字母，但不适用于整数。我想知道为什么它不适用于整数。我希望能够通过在文本框上使用自定义属性来模仿 MVC 中的 ajax 控件工具包中的 FilteredTextBoxExtender

# maven - Maven 构建后，tar gz 文件包含损坏的 jar 文件

> ID：13928601
> 
> 赞同：3
> 
> 时间：2012-12-18T07:55:53.723
> 
> 标签：maven, jar, tar, maven-assembly-plugin, corrupt

我有一个 pom.xml 和单独的 assembly-descriptor.xml 文件。最终结果是一个 tar.gz 文件，其中包含我的 tomcat webapp 和一些 jar 文件。当我在本地开发盒（Mac OS 10.7 和 Maven 3.0.3）上构建它时，生成的 tar.gz 包含一个有效的 jar 文件。当构建在我们的构建框（Linux 服务器/Maven 3.0.3 上的 Jenkins）上运行并部署到生产服务器时，jar 文件几乎是它应该大小的两倍并且已损坏。当我将 maven 程序集插件的版本更改为 2.3 或 2.4 时，我可以在本地重现倍增/损坏问题。当我将其设置为 2.1 或 2.2 或无版本（默认为 2.2 beta 5）时，它可以在本地工作。但无论我选择什么版本，在构建框上的 tar gz 步骤期间构建都会失败。（本地 java 版本 = 1.6.0_37 并且构建系统是 1.6.0_34 但我没有
这是我的 pom.xml：

```
<plugin>
        <groupId>org.apache.maven.plugins</groupId> 
        <artifactId>maven-assembly-plugin</artifactId>
        <version>2.3</version>
        <configuration>
            <encoding>UTF-8</encoding>
            <finalName>${project.build.finalName}_${project.version}</finalName>
            <descriptors>
                <descriptor>src/main/assembly/assembly-descriptor.xml</descriptor>
            </descriptors>
            <attach>true</attach>
        <appendAssemblyId>false</appendAssemblyId>
        </configuration>
        <executions>
            <execution>
                <id>package-tar-gz</id>
                <phase>package</phase>
                <goals>
                    <goal>single</goal>
                </goals>
            </execution>
        </executions>
      </plugin>... 
```

` 这是程序集描述符 (assembly-descriptor.xml)：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <assembly xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.0" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.0     http://maven.apache.org/xsd/assembly-1.1.0.xsd">
  <id>bin</id>
  <includeBaseDirectory>false</includeBaseDirectory>
  <formats>
    <format>tar.gz</format>
  </formats>
  <fileSets>
    <fileSet>
      <directory>${project.basedir}/src/main/tomcat</directory>
      <filtered>true</filtered>
      <excludes>
          <exclude>**/*.war</exclude>
      </excludes>
      <outputDirectory>/</outputDirectory>
    </fileSet>
  </fileSets>
</assembly> 
```

最后，本地构建和生产构建之间的另一个区别是生产构建使用本地存储库，而我的本地构建没有。我没有给予太多关注，因为我能够在本地重现 jar 文件加倍/损坏问题（即没有本地 repo 问题）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-13T14:55:47.910

尝试删除true，这可能是罪魁祸首

# java - 将自定义翻译字符串添加到 liferay 主题

> ID：13928603
> 
> 赞同：1
> 
> 时间：2012-12-18T07:55:59.933
> 
> 标签：java, properties, internationalization, themes, liferay

我想在我的主题中添加一些翻译，以便`#language("key")`在我的`template.vm`文件中调用它。谷歌搜索后，我仍然不知道将`Language.properties`文件放在哪里。

甚至可以将翻译添加到主题中吗？如果是这样，我必须将这些文件放在哪里？

提前谢谢 - 弗洛里安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-15T11:07:18.783

创建一个挂钩来覆盖语言文件。

请参阅[以下链接中的覆盖语言](http://www.liferay.com/documentation/liferay-portal/6.0/development/-/ai/overriding-a-language-properties-file)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T13:53:04.467

这很简单.. 在portal-impl.jar 文件中为语言特定的属性文件添加“自定义键”。您可以在 portal-impl.jar\content\Language.properties 中找到语言属性。在 .vm 文件上添加 #language("custom-key")。重新启动服务器。

谢谢和问候， Thiyagu.L

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-22T14:55:19.950

![在此处输入图像描述](../Images/a8a860374c5fe01bd97b2c0b03118054.png)

请检查此图像并希望它对您有帮助 如果您在包资源管理器的项目中看到这三个文件夹，那么创建一个文件夹 docroot/WEB-INF/src 文件夹这三个文件夹没有什么不同，那么这是您项目中的第一个文件夹。感谢和问候 asif aftab

# c# - 对象之间的高效数据传输 - C#

> ID：13928607
> 
> 赞同：0
> 
> 时间：2012-12-18T07:56:25.283
> 
> 标签：c#, dynamic

我有一个加载 DLL 并实例化预定义对象的程序。该对象具有许多属性，其名称在 XML 文件中定义。我的程序需要在实例化对象中获取/设置这些属性。

我正在寻找模式/方法来做同样的事情。

我不能使用反射，因为这个 Get/Set 方法在我的程序中循环调用。使用反射是非常昂贵的。

你们中的任何人有用于此类场景的最佳实践吗？

注意：如果需要，我可以更改从 DLL 动态加载的对象的*结构*（我正在开发它），但我的程序不知道对象属性的名称（DLL 也是动态生成的，所以本质上，*用户*指定对象中所需的成员，另一个程序生成代码文件并将它们编译成上面提到的DLL。之后，我的程序加载这个新生成的DLL并开始工作。所以，我可以改变*结构*DLL 中的对象，但我事先不知道 DLL 对象中包含的属性。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T08:20:21.357

如果还不算太晚，我会建议以下方法。

设计您的外部程序，以便，

1.  它将用户输入构造为 xml 文件。
2.  通过 .Net Framework SDK 附带的 Xsd.exe 工具生成 xsd 文件
3.  再次使用 xsd.exe 从 xsd 文件生成类

这样您就可以拥有您的主应用程序，将纯 xml 反序列化为外部程序生成的类。最后它应该如下所示，并且几乎不需要维护代码。

外部程序：Xml 数据 -> Xsl 架构 -> GeneratedClasses

主要应用程序：Xml 数据 -> 反序列化为实例

# android - 从 sqlite 和 mysql 加载数据微调器

> ID：13928612
> 
> 赞同：2
> 
> 时间：2012-12-18T07:56:41.067
> 
> 标签：android, sqlite, android-sqlite

我尝试本[教程](http://nielpoenya.blogspot.com/2012/08/tutorial-android-spinner-dari-database.html)`Spinner`从`sqlite`和加载`mysql`。

该教程有效，但此应用程序无法加载`mysql`两次。

`mysql`因此，仅在首次调试或数据为空时加载此应用程序。

当我尝试清除数据时，应用程序正在加载 mysql。

我尝试修改并创建一个`button`更新`sqlite`，`mysql`但我现在不知道如何。如何创建一个按钮来从 mysql 更新 sqlite，所以当我单击时`button`，`spinner`值是更改并从加载值`mysql`？

BR

亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T03:39:57.747

目前您没有打开数据库进行删除：

更改您的`SpinnerUpdate`方法，如在`MySQLite`活动中：

```
private void SpinnerUpdate(){
// database handler
dh = new DatabaseHandler(getApplicationContext());
dh.loadAll();
} 
```

并更改您的`loadAll`方法，如下所示`DatabaseHandler`：

```
public void loadAll() {

//context.deleteDatabase(DATABASE_NAME);
SQLiteDatabase db = this.getWritableDatabase(); 
db.delete(DatabaseHandler.TABLE_LABELS, null, null);
} 
```

# php - cURL-ed 图像保持 0 字节

> ID：13928617
> 
> 赞同：4
> 
> 时间：2012-12-18T07:57:12.100
> 
> 标签：php, curl

我正在使用 cURL 来检索图像，将其重命名并将其存储在本地。无论我是否使用 cURL，图像都以 0 字节文件的形式出现，如下所示：

```
$strImageUrl = curl_init($strImageUrlSource);
$fp = fopen($strTargetImage, 'wb');
curl_setopt($strImageUrl, CURLOPT_FILE, $fp);
curl_setopt($strImageUrl, CURLOPT_HEADER, 0);
curl_exec($strImageUrl);
curl_close($strImageUrl);
fclose($fp); 
```

或 file_put/get。像这样：

```
file_put_contents($strImageName, file_get_contents($strImageUrlSource)); 
```

我正在检索的 URL 是：

> <img src='http://i1.au.reastatic.net/150x112/73fa6c02a92d60a76320d0e89dfbc1a36a6e46c818f74772dec65bae6959c62f/main.jpg' width="150" height="112" alt="Wondecla，可根据要求提供地址" title="Wondecla,可根据要求提供地址" />

我可以手动正确保存此图像。查看 FireFox 中的属性时，它会显示三个条目：

```
data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFgAAABYBAMAAACDuy0HAAAAG1BMVEX+/v4BAQH///8KCgoDAwN/f3/19fWAgID8... etc 
```

[http://i1.au.reastatic.net/150x112/73fa6c02a92d60a76320d0e89dfbc1a36a6e46c818f74772dec65bae6959c62f/main.jpg](http://i1.au.reastatic.net/150x112/73fa6c02a92d60a76320d0e89dfbc1a36a6e46c818f74772dec65bae6959c62f/main.jpg)

```
data:image/png;base64,iVBORw0KG ... etc. 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T08:06:31.237

这有效：

**使用 file_get_contents**

```
$image = 'http://i1.au.reastatic.net/150x112/73fa6c02a92d60a76320d0e89dfbc1a36a6e46c818f74772dec65bae6959c62f/main.jpg';

$imageName = pathinfo( $image, PATHINFO_BASENAME );

file_put_contents( $imageName, file_get_contents( $image ) ); 
```

**使用卷曲**

```
$image = 'http://i1.au.reastatic.net/150x112/73fa6c02a92d60a76320d0e89dfbc1a36a6e46c818f74772dec65bae6959c62f/main.jpg';

$imageName = pathinfo( $image, PATHINFO_BASENAME );

$ch = curl_init();

curl_setopt( $ch, CURLOPT_URL, $image );
curl_setopt( $ch, CURLOPT_RETURNTRANSFER, true );

$source = curl_exec( $ch );
curl_close( $ch );

file_put_contents( $imageName, $source ); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T08:03:40.467

使用 var_dump() 进行调试。当你看到什么

```
var_dump(file_get_contents('http://i1.au.reastatic.net/150x112/73fa6c02a92d60a76320d0e89dfbc1a36a6e46c818f74772dec65bae6959c62f/main.jpg')); 
```

# sublimetext2 - 如何在 Ubuntu 的 SublimeText2 的 Slidebar 增强插件中设置 Chromium 浏览器的路径？

> ID：13928620
> 
> 赞同：1
> 
> 时间：2012-12-18T07:57:22.427
> 
> 标签：sublimetext2, chromium, ubuntu-12.10

为了在 SublimeText2 中运行 PHP，我安装了 Slidebar Enhancement Plugin 和 PHPCodeSniff Plugin。但是当我尝试按 F12 运行时，它会弹出“找不到浏览器'Chrome'。如果安装？哪个位置？”

右键单击任何/文件文件夹打开方式...应用程序...我打开了文件“Side Bar.sublime-menu”

这里给出了 Windows 的 SetupPath。但是如何在 Ubuntu 中设置它？比如，“应用程序”：“C:\Documents and Settings\tito\Configuración local\Datos de programa\Google\Chrome\Application\chrome.exe”，

但是如何在 Ubuntu 中为 Chromium 设置路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T19:56:26.490

要在 Ubuntu 上获取 Chromium 的路径，请打开终端窗口并输入：

```
whereis chromium-browser 
```

您很可能需要从`/usr/bin`. 在我的情况下：`/usr/bin/chromium-browser`。

# javascript - 带有 javascript 滚动条的 Adob e AIR HTML/JS 应用程序

> ID：13928622
> 
> 赞同：3
> 
> 时间：2012-12-18T07:57:27.543
> 
> 标签：javascript, jquery, html, air, scrollbar

我想知道是否可以在 Adob​​e AIR 应用程序中使用自定义 Javascript 滚动条。AIR 应用程序是基于 HTML/JS 的。我想为一些 div 和 iFrames 自定义滚动条。我尝试了许多 jQuery 插件（antiscroll、lionbars 等），但没有任何效果。我只能用 CSS 设置原生 AIR 滚动条的样式。

那么，Adobe AIR 是否支持 HTML 块/iFrame 的基于 javascript 的滚动条？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-11-19T12:11:40.593

首先，回答你的问题：

是的，Adobe AIR 支持 HTML 块/iFrame 的基于 javascript 的滚动条。

这个答案还有更多：这是一个非常古老的问题，但我的回答会对某人有所帮助。由于 Adob​​e AIR 没有太多可用的文档。在 Javascript 中做一些事情，不要使用最新的 jQuery 插件。它肯定会起作用。浏览支持 Adob​​e AIR 的受支持元素列表。

AIR 中不支持的 WebKit 功能

Adobe AIR 1.0 及更高版本

```
AIR does not support the following features available in WebKit or Safari 4: 
```

*   通过 window.postMessage 进行跨域消息传递（AIR 提供了自己的跨域通信 API）

*   CSS 变量

*   Web 开放字体格式 (WOFF) 和 SVG 字体。

*   HTML 视频和音频标签

*   媒体设备查询
*   离线应用缓存
*   打印（AIR 提供自己的 PrintJob API）
*   拼写和语法检查器
*   SVG
*   WAI-ARIA
*   WebSockets（AIR 提供自己的套接字 API）
*   网络工作者
*   WebKit SQL API（AIR 提供自己的 API）
*   WebKit 地理定位 API（AIR 在支持的设备上提供自己的地理定位 API）
*   WebKit 多文件上传 API
*   WebKit 触摸事件（AIR 提供自己的触摸事件）
*   无线标记语言 (WML) 以下列表包含 AIR 不支持的特定 JavaScript API、HTML 元素以及 CSS 属性和值：

    不支持的 JavaScript Window 对象成员：

    *   应用程序缓存（）
    *   安慰
    *   打开数据库（）
    *   postMessage()
    *   document.print() 不支持的 HTML 标签：
    *   声音的
    *   视频
    *   不支持的 HTML 属性：
    *   咏叹调-*
    *   可拖动的
    *   表单验证
    *   列表
    *   不验证
    *   加载前
    *   onhashchange
    *   改变方向
    *   隐藏
    *   onpageshow
    *   弹出状态
    *   ontouchstart
    *   ontouchmove
    *   触碰端
    *   触摸取消
    *   onwebkit开始全屏
    *   onwebkitend全屏
    *   图案
    *   必需的
    *   沙盒不支持的 JavaScript 事件：
    *   预载
    *   哈希变化
    *   方向改变
    *   页隐藏
    *   页面显示
    *   流行状态
    *   触摸启动
    *   触摸移动
    *   触摸端
    *   触摸取消
    *   webkit开始全屏
    *   webkitendfullscreen 不支持的 CSS 属性：
    *   背景剪辑
    *   背景来源（使用-webkit-背景来源）
    *   背景-重复-x
    *   背景重复-y
    *   背景尺寸（使用-webkit-背景尺寸）
    *   边界左下角半径
    *   边框右下角半径
    *   边界半径
    *   边框左上角半径
    *   边框右上角半径
    *   文本渲染
    *   -webkit-动画播放状态
    *   -webkit-背景剪辑
    *   -webkit-色彩校正
    *   -webkit-font-smoothing 不支持的 CSS 值：
    *   外观属性值：
    *   媒体卷滑块容器
    *   媒体音量滑块
    *   媒体音量sliderthumb
    *   外旋转按钮
    *   边框框（背景剪辑和背景原点）
    *   包含（背景大小）
    *   内容框（背景剪辑和背景来源）
    *   封面（背景尺寸）
    *   列出属性值：
    *   远方
    *   阿姆哈拉语
    *   阿姆哈拉语
    *   cjk-地球分支
    *   cjk-天干
    *   埃塞俄比亚
    *   埃塞俄比亚人
    *   埃塞俄比亚-阿贝吉德-am-et
    *   埃塞俄比亚-阿贝吉德-盖兹
    *   埃塞俄比亚人
    *   埃塞俄比亚-abegede-ti-et
    *   埃塞俄比亚-halehame-aa-er
    *   埃塞俄比亚-halehame-aa-et
    *   埃塞俄比亚-哈勒姆-阿姆-埃特
    *   埃塞俄比亚哈勒哈姆盖兹
    *   埃塞俄比亚-哈勒姆-奥姆-埃特
    *   埃塞俄比亚-halehame-sid-et
    *   埃塞俄比亚-哈勒姆-so-et
    *   埃塞俄比亚哈勒汉姆梯
    *   埃塞俄比亚-哈勒姆-泰特
    *   埃塞俄比亚-halhame-tig
    *   韩文
    *   韩文辅音
    *   下挪威语
    *   奥罗莫
    *   西达玛
    *   索马里
    *   老虎
    *   提格里尼亚尔
    *   提格里尼亚-阿贝格德
    *   提格里尼亚等
    *   提格里尼亚和阿贝格德
    *   上希腊语
    *   上挪威语
    *   -wap-marquee（显示属性）

来源：[Adobe Air Flash 平台](http://help.adobe.com/en_US/as3/dev/WSb2ba3b1aad8a27b0-67c0013e126afbe6c4d-8000.html)

# objective-c - 词法或预处理器错误：使用 box2d 和 cocos2d 找不到文件

> ID：13928623
> 
> 赞同：0
> 
> 时间：2012-12-18T07:57:31.390
> 
> 标签：objective-c, xcode, cocos2d-iphone, box2d-iphone

我在构建项目时遇到了这个奇怪的问题。问题如下：

我和我的朋友正在做一个项目，我们使用的是完全相同的 xcode、cocos2d 和 box2d 版本。他的项目编译（构建）很好，而我的项目在我这样做时给出了这个错误：找不到 cassert 文件。

我拿了一份他的 xcode.project 的副本，但没有任何问题。

我希望这段代码能更好地总结我想说的：

```
GameLayer.h
#import bla bla //the usual required files
@class myOwnClass1;
@class myOwnClass2;

myOwnClass1 *test1;
myOwnClass2 *test2; 
```

现在我想`GameLayer.h`在其中包含`myOwnClass1.h`或`myOwnClass2.h`使用`#import`，但它会给我错误！如果我没有`@class GameLayer;`任何问题。

事情是在我朋友的项目中，他正在做的`#import`没有错误，这非常奇怪（至少对我来说）

建议？

PS我知道将其更改`.m`为`.mm`可以解决它，但是，再次，在我朋友的项目中，他正在使用`.m`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T09:24:29.427

我猜你的项目和你朋友的项目之间的编译器设置不匹配。

简而言之：`cassert`是一个C++头文件；你肯定需要一个 C++ 编译器来编译它。

现在，我的猜测是，在你朋友的项目中，GameLayer.m 文件被标记为 C++ 文件，尽管它有一个`.m`扩展名。

要验证这一点，请`project.pbxproj`在文本编辑器中打开您的项目（和您朋友的）文件并查找 GameLayer.m 文件。你会得到这样的条目：

```
 347F5D94158BA4840058BC21 /* main.m */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.c.objc; path = main.m; sourceTree = "<group>"; }; 
```

如您所见，`lastKnownFileType`关键是`sourcecode.c.objc`：这标识了一个 Objective-C 文件。如果你看到`sourcecode.cpp.objcpp`，那意味着客观的 C++。

希望这有助于澄清它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T14:39:58.730

出于某种原因，事实证明从头开始创建一个新项目解决了这个问题，除非其他人有其他意见，否则我暂时将其标记为正确答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-18T11:55:15.107

这是我解决问题的方法。清理和重新创建项目对我来说似乎不是一个好主意。

对于这个问题，网上有几个答案，但每个答案都没有帮助我解决问题。一个在 SO 上

[cassert 文件未找到，但我使用 Box2d 模板](https://stackoverflow.com/questions/12108692/cassert-file-not-found-but-i-use-box2d-template)，另一个在 cocos2d-iphone 论坛上，

[http://www.cocos2d-iphone.org/forums/topic/cannot-include-box2d-cassert-file-not-found-despite-every-file-being-mm/](http://www.cocos2d-iphone.org/forums/topic/cannot-include-box2d-cassert-file-not-found-despite-every-file-being-mm/)

结合这两个建议对我有用 -

> 1.  将您的所有（不是 cocos2d 或 box2d 文件，只是您的项目文件）从 .m 重命名为 .mm
> 2.  确保在每个文件的右侧窗格中，“类型”选项设置为“默认 - 目标 C++ 源”</li>

对我来说还有另一个问题，对你来说可能不是问题，我正在使用以下签名为 CCLabelTTF

```
CCLabelTTF *title = [CCLabelTTF labelWithString:@"Hello" dimensions:CGSizeMake(720.0f, 880.0f) alignment:UITextAlignmentLeft fontName:@"Arial" fontSize:34]; 
```

这已被弃用，并导致整个地方的错误。我现在正在使用以下稍作修改的版本并修复了错误 -

```
CCLabelTTF *title = [CCLabelTTF labelWithString:@"Hello" dimensions:CGSizeMake(720.0f, 880.0f) hAlignment:kCCTextAlignmentRight fontName:@"Arial" fontSize:34]; 
```

我最近写的这个修复可以在 - [http://indiangamer.com/how-i-fixed-the-cocos2d-box2d-include-file-not-found-error/](http://indiangamer.com/how-i-fixed-the-cocos2d-box2d-include-file-not-found-error/)

# reporting-services - 无法在 Report Builder 3.0 中使用“显示零为”

> ID：13928633
> 
> 赞同：1
> 
> 时间：2012-12-18T07:58:24.907
> 
> 标签：reporting-services, reportbuilder3.0

我有一份包含 tablix 的报告。tablix 中的某些字段在创建报告时不包含任何值。我想在这些字段中显示“0.00”作为默认值。

我查看了文本框属性>数字>“显示零为”，但无论如何我都无法让它们显示。

我不得不承认我是 SSRS 新手，所以我可能忽略了一些东西。我用谷歌搜索了一下，在表达式中找到了一些关于 IF 语句的内容，但无法弄清楚。

tablix 中的表数据是浮点数。

非常感谢任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T09:07:29.493

问题听起来像是`Null`，而不是零。尝试使用这样的表达式：

```
=IIF(IsNothing(Fields!MyField.Value), 0, Fields!MyField.Value) 
```

所以当它什么都不是（即`Null`）时，你得到零，否则你得到字段值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T10:40:59.223

如果可能，您应该更改 SQL，否则 Chris Latta 的答案是最好的。

例如，如果您使用 oracle，您应该使用该`nvl(v1, 0)`函数，或者`isnull(v1, 0)`用于 MS SQL。将其保留在查询中将减少所需的处理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T23:18:47.180

我不得不使用零的字面值来让它工作。

```
=IIf(Sum(Fields!NewCount.Value) = 0, "0", Sum(Fields!NewCount.Value)) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-11-07T14:55:41.183

将零添加到表达式：

```
=Sum(Fields!NewCount.Value) + 0 
```

# python - Python过滤器列表项彼此相对

> ID：13928641
> 
> 赞同：3
> 
> 时间：2012-12-18T07:58:50.530
> 
> 标签：python, list, filter, filtering

假设我有一个元组列表：

```
fruits = [('apple','red',23),
          ('apple','green',12),
          ('orange','small',12),
          ('orange','large',1)] 
```

如何快速干净地创建一个新列表，其中包含具有最大数字但水果名称唯一的元组。所以理想的结果是：

```
fruits = [('apple','red',23),
          ('orange','small',12)] 
```

我目前的方法是这样的：

```
def check_fruit(fruit, a_list):
    for item in a_list:
        if fruit[0] == item[0] and fruit[2] < item[2]:
            return False
    return True
filtered_list = [fruit for fruit in fruits if check_fruit(fruit, fruits)] 
```

请让我知道是否有更好的方法！谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-18T08:03:38.450

如果您的`fruits`列表已经按水果排序，请使用`itertools.groupby`：

```
from itertools import groupby
from operator import itemgetter

def fruitfilter(fruits):
    for fruit, group in groupby(fruits, key=itemgetter(0)):
        yield max(group, key=itemgetter(2))

fruits = list(fruitfilter(fruits)) 
```

或者简而言之，没有生成器：

```
[max(group, key=itemgetter(2)) for fruit, group in groupby(fruits, itemgetter(0))] 
```

但它可能是你可以只使用发电机而不更换`fruits`批发。

否则使用`sorted(fruits, key=(itemgetter(0), -itemgetter(2))`和使用`groupby`来抓取每组的第一项：

```
def fruitfilter(fruits):
    sortedfruits = sorted(fruits, key=(itemgetter(0), -itemgetter(2)))
    for fruit, group in groupby(sortedfruits, key=itemgetter(0)):
        yield next(group)

fruits = list(fruitfilter(fruits)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T08:03:00.227

```
import itertools as it

fruits = [('apple','red',23),
          ('apple','green',12),
          ('orange','small',12),
          ('orange','large',1)]

uniq_max = [next(v) for k,v in it.groupby(sorted(fruits, key=lambda x:(x[0], -x[2])), key=lambda x:x[0])] 
```

返回

```
[('apple', 'red', 23), ('orange', 'small', 12)] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T08:05:05.927

```
f = {}
for item in fruits:
    if item[0] not in f or item[2] > f[item[0]][2]:
        f[item[0]] = item

filtered_list = f.values() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T15:02:07.827

```
 python 3.2
     from itertools import groupby

 1\.    [max(v,key=lambda x:x[2])for _,v in groupby(fruits,key=lambda x:x[0])] 
```

没有 itertools groupby 功能：

```
 2\.  [max([(f,c,n) for f,c,n in fruit if f==k],key=lambda x:x[2])
                                        for k in set([i[0] for i in fruit])]

  3\.  [max([i for i in fruit if i[0]==v],key=lambda x:x[2]) for v in set(k[0]for k in fruit)]

  4\. loop method

   newlist=[]
   newset=set(i[0] for i in fruit)
   for i in newset:
        t=(0,0,0)
        for l in fruit:
           if i==l[0] and l[2]>t[2]:
                    t=l
        d.append(t) 
```

# android - android 短信是如何存储的？在文件系统中，即 message1.extension 或数据库中，即 sqlite

> ID：13928647
> 
> 赞同：1
> 
> 时间：2012-12-18T07:59:42.097
> 
> 标签：android

android sms 消息是如何存储的？这些消息是否具有文件扩展名，例如 message.extension 或者它们是否存储在某种数据库中，即 sqlite？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T08:01:44.910

短信和彩信存储在：

数据/数据/com.android.providers.telephony/databases/mmssms.db

# pthreads - Grand Central Dispatch 中的线程本地存储

> ID：13928648
> 
> 赞同：0
> 
> 时间：2012-12-18T07:59:44.777
> 
> 标签：pthreads, grand-central-dispatch

是否可以在 GCD 中使用 TLS？我想分派需要访问硬件驱动程序队列的任务。我需要为每个线程关联一个队列，以便它们可以同时进行负载平衡和访问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T08:04:57.713

GCD 中 TLS 的等价物是 dispatch_queue_set_specific/dispatch_get_specific。但是，将队列与特定线程相关联并不是您可以做的事情。

# google-apps-script - 如何从 HTML 文件调用谷歌脚本函数？

> ID：13928649
> 
> 赞同：1
> 
> 时间：2012-12-18T07:59:48.400
> 
> 标签：google-apps-script

我通过谷歌应用脚​​本中的 Html Services api 创建了一个网页。在脚本中，我有一个 google 脚本（.gs）文件和两个 html 文件（.html）。该脚本发布在网络上。为了在 web 上显示 html 文件，我在 .gs 文件中使用了以下函数：

```
function doGet() {   //Published on web
  return HtmlService.createTemplateFromFile('<htmlFile_1>').evaluate();
}

function doProcess() {
  return HtmlService.createTemplateFromFile('<htmlFile_2>').evaluate();
} 
```

doGet() 在网络上返回这个 Html 文件。现在我想通过替换这个文件来显示另一个 Html 文件。所以，我在 htmlFile_1 中使用了以下内容：

```
//htmlFile_1.html

<html>
  <head>
  <script>
    function loadMainHtmlPage(){
       google.script.run.doProcess();     //calling another function in .gs file
       setTimeout(function(){hello()},4000);

    }

    function hello(){
    alert("hiii");
     document.getElementById("loading").style.display="none";}

  </script>
</head>

<body onload="loadMainHtmlPage();">
   <div id="loading" style="display:block;">
      <img src="http://commondatastorage.googleapis.com/kickoff/loading.gif"/>
 </div>
  </body>

</html> 
```

这个 htmlFile_1 没有调用 doProcess()，它会返回 htmlFile_2。有什么建议可以实施吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T12:38:36.693

您需要在这行代码中包含一个 onSuccess（以及可选的 onFailure）处理程序

```
google.script.run.doProcess(); 
```

见下文

```
Server code
function getSuperHero() {
  return {name: "SuperGeek",  catch_phrase: "Don't worry ma'am, I come from the Internet" };
}

Client code
<script>
  function onSuccess(hero) {
    alert (hero.catch_phrase);
  }
  google.script.run.withSuccessHandler(onSuccess).getSuperHero();
</script> 
```

# image - 如何在 R 中的箱形图中添加箭头（指针图像）？

> ID：13928652
> 
> 赞同：-2
> 
> 时间：2012-12-18T08:00:16.013
> 
> 标签：image, r, boxplot

我正在使用 R 绘制箱线图。我已经绘制了一个箱线图，现在我需要在箱线图的某处放置一个指针？

```
 input<-c(1,2,3,4,5) 
 boxplot(input) 
```

如何在箱线图的 1.5 位置导入或设计箭头图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T19:47:05.087

要在图表上放置单个图像，请查看该`rasterImage`函数。如果您想在图表上放置多个图像（可能将它们用作绘图点），那么 TeachingDemos 包中的`my.symbols`和`ms.image`函数可能会有所帮助。

# gsm - 通过发送 ussd 请求来发起 SMS

> ID：13928653
> 
> 赞同：0
> 
> 时间：2012-12-18T08:00:16.933
> 
> 标签：gsm, telephony, ussd

有什么方法可以从网络上的设备启动 SMS MO。例如：我可以从网络向设备发送特殊的 USSD 推送，以便它将指定的文本发送到设备的指定号码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T11:23:56.613

Only if you are the network operator and the USSD message is defined in the network and supported by the device. You could also send a MT SMS and get the specified text as a reply (again supported on the device, obviously).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T15:09:24.393

这在很大程度上取决于设备功能。设备需要逻辑来处理 USSD 消息，而不仅仅是显示它，并触发发送 MO SMS。

由于这不是出厂配置，因此您需要在设备上安装自定义应用程序，前提是设备平台允许所需的功能。例如，一些支持 J2ME 的设备确实具有此功能。请查阅您的设备制造商开发文档。

# sql - 如果嵌套查询返回 null，则将列设置为某个值

> ID：13928655
> 
> 赞同：2
> 
> 时间：2012-12-18T08:00:30.007
> 
> 标签：sql, sql-server, stored-procedures

我有一个 SQL 查询

```
SELECT s.id,
       s.First_Name +' '+s.Last_Name AS Name,
       d1.Department_Name,
       s.Manager_Id,
       s.EmailId
FROM Fin_UserMaster s
INNER JOIN Fin_Department_Master AS d1 ON d1.id = s.Department_Id
WHERE s.id =
    (SELECT Manager_Id
     FROM Fin_UserMaster
     WHERE id= '13') 
```

现在，如果我的嵌套查询返回 null，我想给出另一个 Id 来代替嵌套查询。

例如，如果嵌套查询返回 null then `s.id = '13'`，类似的事情。

尝试了几件事，但没有成功。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T08:01:57.563

```
(select COALESCE(Manager_Id, 13) from Fin_UserMaster where id= '13') 
```

或者

```
(select ISNULL(Manager_Id, 13) from Fin_UserMaster where id= '13') 
```

编辑：在大量行上，`ISNULL`似乎更快。但是，它不是 SQL 标准的一部分——正如 ISNULL 与 COALESCE 上的一些答案所暗示的那样。

# c# - 使子控件比父控件更不透明

> ID：13928657
> 
> 赞同：1
> 
> 时间：2012-12-18T08:00:40.367
> 
> 标签：c#, microsoft-metro, winrt-xaml

我在下面的 Xaml 中有一个页面，我想像 ModalDialog 一样使用它。

问题是当我弹出对话框时，保存内容的第二个网格的不透明度没有更改回 100%，我从弹出的页面中看到了底层控件。有关更多详细信息，请参阅屏幕截图。

有没有办法可以将第二个网格的不透明度改回 100%，使其后面的任何控件都无法看穿？

为了完整性，我添加了我用来弹出弹出窗口的代码。

**模态对话框 Xaml：**

```
<Page>
    <Grid x:Name="RootPanel" Background="{StaticResource LucentBlue}" Opacity=".75">
         <Border >
              <Grid VerticalAlignment="Center"
                   Height="300" Background="{StaticResource PremiumBlue}" Opacity="1">

              </Grid>
         </Border>
    </Grid>
</Page> 
```

**托管页面背后的代码：**

```
private Popup _saveDialog;
private void SaveSettingsCommandLogic(object obj)
{
    ModalDialog dlg = new ModalDialog();
    dlg.CloseRequested += DlgOnCloseRequested;
    _saveDialog = new Popup();
    _saveDialog.Child = dlg;
    _saveDialog.IsOpen = true;
} 
```

![错误图片](../Images/76d22c8c35f13932dc85a2d6542c4332.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T12:52:03.627

这是 metro 的解决方案：

请删除这`Opacity`两个元素的属性，并从 ModalDialog 类后面的代码中使用以下代码：

```
 public ModalDialog()
    {
        this.InitializeComponent();
        Color color = Color.FromArgb(150,255,0,0);
        RootPanel.Background = new SolidColorBrush(color);
    } 
```

该方法`FromArgb`用于分别指定透明度红色绿色和蓝色值，范围为0-255 ..请根据您的方便测试:)

# ios - IOS ARC：无法直接使用#define 常量

> ID：13928663
> 
> 赞同：-2
> 
> 时间：2012-12-18T08:01:37.437
> 
> 标签：ios, constants

我的 MyClass.m 文件中有一个常量，名为：

```
#define kUDUserHistory              @"kUDUserHistory"; 
```

没有 ARC 我可以直接使用它，但现在我必须将它复制到第二个变量中然后使用它。如果我尝试直接在 ARC 中使用它，则会显示错误*'Expected Expression'*。
**无弧**

```
[[NSUserDefaults standardUserDefaults] setObject:data forKey:kUDUserHistory]; 
```

**弧**

```
NSString *key = kUDUserHistory;
[[NSUserDefaults standardUserDefaults] setObject:data forKey:key]; 
```

**我的具体问题是：**

*   为什么在这种情况下我不能直接使用常量？
*   管理常量的最佳方法是什么，尤其是在 ARC 中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T08:03:02.910

```
#define kUDUserHistory              @"kUDUserHistory"; 
```

应该：

```
#define kUDUserHistory              @"kUDUserHistory" 
```

对于你的答案：

```
[[NSUserDefaults standardUserDefaults] setObject:data forKey:@"kUDUserHistory";]; 
```

首先将其传递给`NSString`：

```
NSString *key = @"kUDUserHistory";; 
```

这就是它起作用的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T08:04:42.263

你也可以使用

在 .h 文件中

extern NSString * const kUDUserHistory;

在 .m 文件中

NSString * const kUDUserHistory = @"kUDUserHistory";

# kineticjs - Kinetic.js Kinetic.group

> ID：13928668
> 
> 赞同：0
> 
> 时间：2012-12-18T08:01:55.703
> 
> 标签：kineticjs

在一个阶段，我有一个组，我在组上执行各种功能，例如添加线条、文本和拖动组旋转等。他们有什么方法可以让与组相关的鼠标位置不在舞台上。

例如-我的意思是如果我旋转组，然后如果我尝试使用鼠标坐标绘制线条，它是根据舞台坐标绘制的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T22:25:34.773

```
 var mousePos = stage.getMousePosition();
 var shapePos = shape.getPosition();
 var relativePos = mousePos - shapePos; 
```

会给你一个相对的位置。

# javascript - html和javascript中的工资计算器

> ID：13928674
> 
> 赞同：-1
> 
> 时间：2012-12-18T08:02:16.737
> 
> 标签：javascript, html, forms

```
<html>
<head>
<script>
function calculate(){   
     var a = parseFloat(frmMain.name.value);
     var b = parseFloat(frmMain.Salary.value);
     var c = parseFloat(frmMain.taxrate.value);
}
</script>
</head>
<body>
    <form name="frmMain">
       Name <input type ="text" id="name" /><br />
       Salary <input type ="text" id="Salary" /><br />
       tax rate <input type ="text" id="taxrate" /><br />
       <input type="button" value="calculate" onclick="calculate()" />
       <input type="reset" value="Clear" /><br />
       Sammary<textarea cols="20" rows="5" ></textarea>
    </form>
</body>
</html> 
```

我试着把它做成这样，但我不知道如何获得薪水，名字和税率把它放在评论或注释的地方可以有任何人帮忙吗？当我点击计算时，程序应该获取名称、税率和薪水并使用 javascript 在文本区域内打印它？我不知道该怎么做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T08:09:32.737

您想要的是向 textarea 添加一个 id，也许`id="texty"`之后您可以使用 javascript 获取该元素，就像这样，`var area = document.getElementById('texty');`然后从那里使用该`.innerHTML`属性来设置其值。

`area.innerHTML = b*c;`<- 这个数学不是你想要的，但我用一个简单的例子向你展示了它是如何完成的！:)

如果您更热衷于使用`value`，请阅读[这篇文章](https://stackoverflow.com/questions/9057242/whats-the-difference-between-document-getelementbyidtest-value-and-document)以了解`.innerHTML`和`.value`

另外阅读 MDN 上的 JS 文档也是很好的参考，我会在底部放一个链接！

看看下面的修补匠！

[Tinker.io 在这里](https://tinker.io/279f3)

[MDN JS 文档](https://developer.mozilla.org/en-US/docs/JavaScript)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T08:18:44.697

你可以使用这样的东西

**[演示](http://jsfiddle.net/bhfRA/)**

```
function calculate(){   
     var a = frmMain.name.value;
     var b = parseFloat(frmMain.Salary.value);
     var c = parseFloat(frmMain.taxrate.value);

    frmMain.summary.value = "Name     :"+a+"\nSalary   :"+b+"\nTax Rate :"+c;
}​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T09:20:35.360

```
<html>
<head>
<script>
function calculate(){   
     var a = frmMain.name.value;
     var b = parseFloat(frmMain.Salary.value);
     var c = parseFloat(frmMain.taxrate.value);
var area = document.getElementById("text");
area.innerHTML='Name : '+a+'\nSalary : '+b+'\nTax Rate : '+c;
}
</script>
</head>
<body>
    <form name="frmMain">
       Name <input type ="text" id="name" /><br />
       Salary <input type ="text" id="Salary" /><br />
       tax rate <input type ="text" id="taxrate" /><br />
       <input type="button" value="calculate" onclick="calculate()" />
       <input type="reset" value="Clear" /><br />
       Sammary<textarea cols="20" rows="5" id="text"></textarea>
    </form>
</body>
</html> 
```

# php - 使用 CodeIgniter 的移动版网站

> ID：13928677
> 
> 赞同：4
> 
> 时间：2012-12-18T08:02:29.230
> 
> 标签：php, codeigniter, redirect, mobile, routes

我想做的是在 CodeIgniter 中创建我的网站的移动版本。

我想将我的完整网站重定向到 m.example.com

控制器不会发生变化，视图和模型也不会发生变化。两者都是一样的。

我不想更改我的 .htaccess 文件。有什么可能的解决方案吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-18T08:08:34.663

用户[代理类](http://ellislab.com/codeigniter/user-guide/libraries/user_agent.html)有一个功能；

```
$this->agent->is_mobile(); 
```

您可以在基本控制器的构造中使用它来测试是否移动。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-07-27T00:47:55.030

无需到处重写代码，您只需加载不同的视图文件夹即可。本质上，您可以让 CodeIgniter 在每次使用 $this->load->view("xxx") 时从另一个文件夹加载具有相同名称的不同视图。首先，在您的视图文件夹中创建一个名为 /mobile 的新文件夹，并使用完全相同的命名约定创建视图，它将通过扩展 Loader.php 类相应地加载视图。

无论您是在进行响应式设计，还是要创建一个看起来像移动版网站的 iPhone 应用程序，就像 facebook 所做的那样，那么您只需覆盖核心文件夹中的 Loader 类即可。在您的应用程序/核心文件夹中创建一个 MY_Loader.php 并将其放入该文件中。

我的看起来像下面

```
<?php  if (! defined('BASEPATH')) exit('No direct script access allowed');

class MY_Loader extends CI_Loader
{
    //overides existing view function    
    function view($view, $vars = array(), $return = FALSE)
    {
        $CI =& get_instance();

        $CI->load->library("user_agent");

        if($CI->agent->is_mobile()){
            $view = 'mobile/'.$view;
        }

        return $this->_ci_load(array('_ci_view' => $view, '_ci_vars' => $this->_ci_object_to_array($vars), '_ci_return' => $return));
    }
}  

?> 
```

在我看来，响应式网页设计是一团糟，但这仍然可以很好地为您分离代码，同时仍然能够一致地使用您的控制器和模型。

希望这可以帮助。这就是我要做的事情:)！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-18T08:06:25.090

为什么要重定向？如果一切都一样，为什么不研究响应式网页设计？

24ways.org 有一些很好的文章：

```
http://24ways.org/2012/responsive-responsive-design/
http://24ways.org/2012/responsive-images-what-we-thought-we-needed/ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T08:03:59.367

好的，我找到了另一个解决方案。我使用了钩子预控制器，并将 www 子域重定向到 m 子域。

# java - 如何在 Intellij IDEA 12 中设置 maven 项目

> ID：13928689
> 
> 赞同：8
> 
> 时间：2012-12-18T08:03:17.603
> 
> 标签：java, maven, intellij-idea

我在将 Netbeans 创建的 maven 项目导入 IDEA 12 时遇到问题。在 pom 中编写的依赖项工件不起作用。它告诉我“import org.springframework.xxx;”上的“无法解析符号'springframework'”。当我运行它时，它说 org.springframework.xxx 不存在。这是pom文件

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>cn.edu.seu.cose.jellyjolly</groupId>
<artifactId>jellyjolly-openshift-dist</artifactId>
<packaging>war</packaging>
<version>1.0</version>
<name>Jelly Jolly Openshift Distribution</name>
<organization>
    <name>College of Software Engineering, Southeast University</name>
    <url>http://cose.seu.edu.cn/</url>
</organization>
<repositories>
    <repository>
        <id>eap</id>
        <url>http://maven.repository.redhat.com/techpreview/all</url>
        <releases>
            <enabled>true</enabled>
        </releases>
        <snapshots>
            <enabled>true</enabled>
        </snapshots>
    </repository>
    <repository>
        <id>maven-restlet</id>
        <name>Public online Restlet repository</name>
        <url>http://maven.restlet.org</url>
    </repository>
</repositories>
<pluginRepositories>
    <pluginRepository>
        <id>eap</id>
        <url>http://maven.repository.redhat.com/techpreview/all</url>
        <releases>
            <enabled>true</enabled>
        </releases>
        <snapshots>
            <enabled>true</enabled>
        </snapshots>
    </pluginRepository>
</pluginRepositories>
<properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <maven.compiler.source>1.6</maven.compiler.source>
    <maven.compiler.target>1.6</maven.compiler.target>
    <netbeans.hint.license>gpl30</netbeans.hint.license>
</properties>
<dependencies>
    <dependency>
        <groupId>org.jboss.spec</groupId>
        <artifactId>jboss-javaee-6.0</artifactId>
        <version>3.0.0.Final-redhat-1</version>
        <type>pom</type>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>jstl</artifactId>
        <version>1.2</version>
    </dependency>
    <dependency>
        <groupId>taglibs</groupId>
        <artifactId>standard</artifactId>
        <version>1.1.2</version>
    </dependency>
    <dependency>
        <groupId>commons-dbcp</groupId>
        <artifactId>commons-dbcp</artifactId>
        <version>1.4</version>
        <type>jar</type>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>3.1.3.RELEASE</version>
        <type>jar</type>
    </dependency>
    <dependency>
        <groupId>org.restlet.jee</groupId>
        <artifactId>org.restlet</artifactId>
        <version>2.0.0</version>
        <type>jar</type>
    </dependency>
    <dependency>
        <groupId>org.restlet.jee</groupId>
        <artifactId>org.restlet.ext.xml</artifactId>
        <version>2.0.0</version>
        <type>jar</type>
    </dependency>
    <dependency>
        <groupId>net.java.dev.rome</groupId>
        <artifactId>rome</artifactId>
        <version>1.0.0</version>
        <type>jar</type>
    </dependency>
    <dependency>
        <groupId>mysql</groupId>
        <artifactId>mysql-connector-java</artifactId>
        <version>5.1.21</version>
    </dependency>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.10</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>commons-lang</groupId>
        <artifactId>commons-lang</artifactId>
        <version>2.6</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-webmvc</artifactId>
        <version>3.1.3.RELEASE</version>
    </dependency>
</dependencies>
<profiles>
    <profile>
        <!-- When built in OpenShift the 'openshift' profile will be used when
                    invoking mvn. -->
        <!-- Use this profile for any OpenShift specific customization your app
                    will need. -->
        <!-- By default that is to put the resulting archive into the 'webapps'
                    folder. -->
        <!-- http://maven.apache.org/guides/mini/guide-building-for-different-environments.html -->
        <id>openshift</id>
        <build>
            <finalName>jellyjolly</finalName>
            <plugins>
                <plugin>
                    <artifactId>maven-war-plugin</artifactId>
                    <version>2.1.1</version>
                    <configuration>
                        <outputDirectory>webapps</outputDirectory>
                        <warName>ROOT</warName>
                    </configuration>
                </plugin>
            </plugins>
        </build>
    </profile>
</profiles> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-07-09T03:41:04.070

当`pom.xml`文件在您的项目中可用时，您可以通过运行以下命令生成 IntelliJ idea 项目所需的文件：

`mvn idea:idea`

Check out more options and details here: [http://maven.apache.org/plugins/maven-idea-plugin/usage.html](http://maven.apache.org/plugins/maven-idea-plugin/usage.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-18T09:38:09.450

如果项目在命令行 ( `mvn clean install`) 上运行，机会就像 100% 它也将在 IntelliJ 12 中运行 :-)

在文件 -> 项目导入 -> 从外部 Maven 模型之后，您应该会看到模块。

我要在 IntelliJ 设置中检查的是 maven 主目录（文件 -> 设置 -> Maven）的位置以及它读取（或不读取）的 settings.xml 文件。

IDE 中的`mvn install`内容不应与命令行上发生的内容不同。如果是这样，它将比较`mvn help:effective-settings`命令行和 IntelliJ（也可能来自 Netbeans）的输出。

如果您只是没有看到所有模块，请右键单击 parent-pom.xml 并选择 maven -> reimport。要解决依赖关系，您必须执行一次安装。它不会在所有情况下自动解决依赖关系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-27T13:13:55.007

有同样的问题，您可以简单地右键单击代码并转到 Maven->重新导入，它应该可以解决问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-06T00:43:12.703

我曾经使用`mvn -U idea:idea`下载的依赖项生成 IntelliJ 特定文件。

# c# - QLNet 隐含波动率

> ID：13928690
> 
> 赞同：1
> 
> 时间：2012-12-18T08:03:27.607
> 
> 标签：c#, quantlib

我正在使用 QLNet 进行美式期权定价，但它不起作用。我已经在[Quantlib 论坛上发布了我的问题](http://quantlib.10058.n7.nabble.com/Implied-Volatility-td7280.html#a13812)

我的代码：

```
 todaysDate & settlementdate = 2012-12-18, maturity = 2013-01-18,

 Calendar calendar = new TARGET();

 Settings.setEvaluationDate(TodaysDate);
 DayCounter dayCounter = new Actual365Fixed();

 Handle<Quote> underlyingH = new Handle<Quote>(new SimpleQuote(100));
 var flatTermStructure = new Handle<YieldTermStructure>(new FlatForward(SettlementDate, 0.08, dayCounter));
 var flatDividendTS = new Handle<YieldTermStructure>(new FlatForward(SettlementDate, 0, dayCounter));
 var flatVolTS = new Handle<BlackVolTermStructure>(new BlackConstantVol(SettlementDate, calendar, 0.2, dayCounter));
 StrikedTypePayoff payoff = new PlainVanillaPayoff(Call, 101);
 var bsmProcess = new BlackScholesMertonProcess(underlyingH, flatDividendTS, flatTermStructure, flatVolTS);

 Exercise exerciseEngine = exerciseEngine = new AmericanExercise(SettlementDate, Maturity); 
 VanillaOption optionEngine = new VanillaOption(payoff, exerciseEngine); 

 optionEngine.setPricingEngine(new BinomialVanillaEngine<CoxRossRubinstein>(bsmProcess, 801)); 

 //error:
 optionEngine.impliedVolatility(optionEngine.NPV(), bsmProcess, 1.0e-4, 100, 1.0e-7, 4.0); 
```

标的 = 100, k=101, i=0.08, vol=0.2,div=0, todaysDate & 结算日期 = 2012-12-18, 到期 = 2013-01-18,

在**VanillaOption.cs**中，Exercise.Type.American 的 case 代码被取消注释；

错误消息是：**已添加具有相同键的项目**。在 FDStepConditionEngine.cs 的第 111 行 (results.additionalResults.Add priceCurve, prices_ **)**

感谢您的帮助。

# java - 从 Java Graphics 实例中获取字符串

> ID：13928691
> 
> 赞同：0
> 
> 时间：2012-12-18T08:03:28.213
> 
> 标签：java, java-2d

我有一些代码片段，如下所示

```
:

Graphics g;      // Java Graphics class

g.drawString("text", x, y);   // x, y for coordinate info, "text" is now an image object

: 
```

我可以从 Graphics 实例中将“文本”恢复为字符串吗？

因为我想使用字符串数据作为从表中获取一些数据的键。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T08:05:19.953

最好的方法可能是将文本存储在一个`String`变量中，然后从那里获取它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T06:33:25.230

I solved this problem by adding two tables that each memorize the X and Y coordinate for the node instance being generated at the presentation layer and at model layer.

At runtime, node images continue to change its position and these events are all updated.

When I click on a node image on Panel instance, it gives the id of the node instance.

The reason why two tables are required is that only when the id returned by calling the X, Y position of the node image refers to the same node object is the evidence that the event is for the node object represented by the clicked node image. Now I realize I could have used multi-key table.

```
import java.util.ArrayList;
import java.util.List;

// * Represents node at presentation layer and its model

public class NodeObject 
{
// * node id
private int id;

// * coordinate on Panel
public double x;
public double y;

// * coordinate change
private  double dx;
private  double dy;

// * isFixed
public  boolean fixed;

// * node name
public String nodeName;

// * connected node object id list ( redundant when edge is used )
public List<Integer> connectedNodeIdList;

// * connected edge object id list
private List<Integer> connectedEdgeIdList;

// * constructor
public NodeObject()
{}

// * constructor
public NodeObject( int _id )
{
    // * initialization
    this.id = _id;

    // * default
    this.nodeName = "default";

    // * connected node id list
    this.connectedNodeIdList = new ArrayList<Integer>();
}

// * Constructor ( when node name is given )
public NodeObject( int _id, String _nodeName )
{
    // * node id
    this.id = _id;

    // * node name
    this.nodeName = _nodeName;

    // * connected node id list
    this.connectedNodeIdList = new ArrayList<Integer>();

    // * connected edge id list 
    this.connectedEdgeIdList = new ArrayList<Integer>();
}

// * set node name
public void setNodeName( String nName )
{
     this.nodeName = nName;
}

// * get node id
public int getNodeId()
{
    return this.id;
}

// * get node name
public String getNodeName()
{
    return this.nodeName;
}

// * get node name and id in String
public String getNodeNameWithID()
{
      String id = Integer.toString( this.getNodeId() );

      return ( this.nodeName + "-" +id );
}

// * store connected node
public boolean addSingleNode( int nid )
{
    if ( this.connectedNodeIdList.contains( nid ) == true )
    {
        return true;   // this node is already connected
    }
    else
    {
        // * register
        this.connectedNodeIdList.add( nid );

        // * this is the first time this node is connected
        return false;
    }
}

// * unregister a node
public boolean removeConnectedSingleNode( int nid )
{
      // * it was registered before
      if ( this.connectedNodeIdList.contains( nid ) == true )
      {
           this.connectedNodeIdList.remove( nid );

           return true; //  it had been registered and now unregistered ( only at model layer )
      }
      else
      {
           return false;   // it has not been registered before.
      }
}

// * add edge id
public boolean addSingleEdge( int eid )
{
    if ( this.connectedEdgeIdList.contains( eid ) == true )
    {
        return true;   // already registered edge
    }
    else
    {
        // * registered
        this.connectedEdgeIdList.add( eid );

        // * this is the first time this edge was connected
        return false;
    }
}

// * remove edge
public boolean removeConnectedSingleEdge( int eid )
{
      // * registered before
      if ( this.connectedEdgeIdList.contains( eid ) == true )
      {
           this.connectedEdgeIdList.remove( eid );

           return true; // now removed ( model level )
      }
      else
      {
           return false;   // it has not been registered before
      }
}

// * return edge id list
public List<Integer> getEdgeIdList()
{
    return this.connectedEdgeIdList;
}

//////// for visualization on Panel instance ///////

// * X coordinate setting
public void setNodePositionX( Double xPos )
{
     this.x = xPos;
}

// * Y coordinate setting
public void setNodePositionY( Double yPos )
{
     this.y = yPos;
}

// * change of node position
public void changeNodePosition( Double changeX, Double changeY )
{
     this.x = this.x + changeX;
     this.y = this.y + changeY;
}

// * position difference
public void changeNodePositionDifference( Double changeDX, Double changeDY )
{
     this.dx = this.dx + changeDX;
     this.dy = this.dy + changeDY;
}

// * update node position difference
public void updateNodePositionDifference( Double changeDX, Double changeDY )
{
     this.dx = changeDX;
     this.dy = changeDY;
}

// * get X pos
public double getNodePositionX()
{
     return this.x;
}

// * get Y pos
public double getNodePositionY()
{
     return this.y;
}

// * get dx
public double getNodePositionDX()
{
     return this.dx;
}

// * get dy
public double getNodePositionDY()
{
     return this.dy;
}
} 
```

And the Graph class goes like below

```
public class Graph extends Panel implements Runnable, MouseListener, MouseMotionListener, ItemListener
{   

// * number of nodes
public int nnodes;

// * node generator
public NodeGenerator ndGenerator;

// * memorize the node coordinate
public Map<Integer, Integer> xCoordinateTbl;   // key : coordinate / value : node id
public Map<Integer, Integer> yCoordinateTbl;

// * node tbl
public Map<Integer, NodeObject> nodeTbl; 
```

Once mouse click event occurs, it is handled like below

```
public void actionPerformed(ActionEvent event) 
{
    // * get node id of the node object being referred to at the presentation layer
    Integer nid = getNodeId( e.getPoint().x, e.getPoint().y );

    // * remove node on the presentation layer and of the model at the same time
     removeSingleNode( nid );  
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T08:06:06.430

不，该`Graphics`实例只是将屏幕上的文本或图像绘制为像素。它不记得你画的是什么文字，所以它不能告诉你。

您必须以其他方式将文本存储在程序中，以便以后可以将其取回以用于您需要的任何目的（例如从表中获取数据）。

# javascript - Jquery 不同的版本。Jquery 可搜索的自动建议

> ID：13928696
> 
> 赞同：1
> 
> 时间：2012-12-18T08:03:45.910
> 
> 标签：javascript, jquery, jquery-ui, jquery-autocomplete

我必须在我的代码中使用两个 jquery API，“jquery-1.8.3.js”和“jquery-ui.js”。但是已经有旧版本的 jquery。正因为如此，表格无法正常工作。

所以我在网上搜索解决方案，发现，我们可以使用

```
<script>
    var jq13 = jQuery.noConflict(true);
</script> 
```

但我必须使用 api，所以我创建了两个变量，但它仍然无法正常工作。这是我的代码：-

```
<script>
(function( $ ) {
    $.widget( "ui.combobox", {
        _create: function() {
            var input,
                that = this,
                select = this.element.hide(),
                selected = select.children( ":selected" ),
                value = selected.val() ? selected.text() : "",
                wrapper = this.wrapper = $( "<span>" )
                    .addClass( "ui-combobox" )
                    .insertAfter( select );

            function removeIfInvalid(element) {
                var value = $( element ).val(),
                    matcher = new RegExp( "^" + $.ui.autocomplete.escapeRegex( value ) + "$", "i" ),
                    valid = false;
                select.children( "option" ).each(function() {
                    if ( $( this ).text().match( matcher ) ) {
                        this.selected = valid = true;
                        return false;
                    }
                });
                if ( !valid ) {
                    // remove invalid value, as it didn't match anything
                    $( element )
                        .val( "" )
                        .attr( "title", value + " didn't match any item" )
                        .tooltip( "open" );
                    select.val( "" );
                    setTimeout(function() {
                        input.tooltip( "close" ).attr( "title", "" );
                    }, 2500 );
                    input.data( "autocomplete" ).term = "";
                    return false;
                }
            }

            input = $( "<input>" )
                .appendTo( wrapper )
                .val( value )
                .attr( "title", "" )
                .addClass( "ui-combobox-input" )
                .autocomplete({
                    delay: 0,
                    minLength: 0,
                    source: function( request, response ) {
                        var matcher = new RegExp( $.ui.autocomplete.escapeRegex(request.term), "i" );
                        response( select.children( "option" ).map(function() {
                            var text = $( this ).text();
                            if ( this.value && ( !request.term || matcher.test(text) ) )
                                return {
                                    label: text.replace(
                                        new RegExp(
                                            "(?![^&;]+;)(?!<[^<>]*)(" +
                                            $.ui.autocomplete.escapeRegex(request.term) +
                                            ")(?![^<>]*>)(?![^&;]+;)", "gi"
                                        ), "<strong>$1</strong>" ),
                                    value: text,
                                    option: this
                                };
                        }) );
                    },
                    select: function( event, ui ) {
                        ui.item.option.selected = true;
                        that._trigger( "selected", event, {
                            item: ui.item.option
                        });
                    },
                    change: function( event, ui ) {
                        if ( !ui.item )
                            return removeIfInvalid( this );
                    }
                })
                .addClass( "ui-widget ui-widget-content ui-corner-left" );

            input.data( "autocomplete" )._renderItem = function( ul, item ) {
                return $( "<li>" )
                    .data( "item.autocomplete", item )
                    .append( "<a>" + item.label + "</a>" )
                    .appendTo( ul );
            };

            $( "<a>" )
                .attr( "tabIndex", -1 )
                //.attr( "title", "Show All Items" )
                .tooltip()
                .appendTo( wrapper )
                .button({
                    icons: {
                        primary: "ui-icon-triangle-1-s"
                    },
                    text: false
                })
                .removeClass( "ui-corner-all" )
                .addClass( "ui-corner-right ui-combobox-toggle" )
                .click(function() {
                    // close if already visible
                    if ( input.autocomplete( "widget" ).is( ":visible" ) ) {
                        input.autocomplete( "close" );
                        removeIfInvalid( input );
                        return;
                    }

                    // work around a bug (likely same cause as #5265)
                    $( this ).blur();

                    // pass empty string as value to search for, displaying all results
                    input.autocomplete( "search", "" );
                    input.focus();
                });                    
        },

        destroy: function() {
            this.wrapper.remove();
            this.element.show();
            $.Widget.prototype.destroy.call( this );
        }
    });
})( jQuery );

$(function() {
    $( "#driver_uuidHOS" ).combobox();       
});
</script> 
```

我已经声明了两个变量：-

```
<script src="js/new/jquery-1.8.3.js"></script>
<script>
    var jq13 = jQuery.noConflict(true);
</script>
<script src="js/new/jquery-ui.js"></script>
<script>
    var jq131 = jQuery.noConflict(true);
</script> 
```

所以请告诉我在我的代码中我必须在哪里使用 jq13 和 jq131。此代码用于可搜索的自动建议。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T13:20:58.550

您想加载一个版本的 jQuery，然后加载该版本的所有插件，然后打开无冲突模式。您可以根据需要多次重复此过程（对于您需要加载的每个版本的 jQuery 核心执行一次）。

因此，对于您的具体情况，您想要做的是：

```
<script src="js/new/jquery-1.8.3.js"></script>
<script src="js/new/jquery-ui.js"></script>
<script src="path/to/your/code.js"></script>
<script>jQuery.noConflict(true);</script> 
```

`path/to/your/code.js`指的是您上面定义的组合框小部件的代码块。就支持多个 jQuery 版本而言，无论是像您的示例那样包含在页面中，还是像我的示例那样作为外部文件包含它都没有关系。您拥有的匿名函数包装器（以及所有插件都应该拥有），它存储了对的引用，这`jQuery`就是使它工作的原因。在执行这些文件时，`jQuery`指向正确的版本，并且文件将其本地引用存储为`$`. 稍后，当您可以时`jQuery.noConflict(true)`，这些文件会继续保留它们的引用，即使全局`jQuery`变量已更改。*如果您遵循这种在之后*调用无冲突模式的模式*加载所有其他文件时，您不需要将 jQuery 分配给新变量，因为您的所有代码都已经具有必要的引用。这种方法的好处是，您永远不会在包装函数中使用特定于变量的名称，并且可以保证与使用此模型开发的所有现有插件一起使用，这些插件都是官方的 jQuery 项目，可能任何插件都有想过没有冲突支持。*

 ** * *

最后一件事：在脚本的底部，您将 jQuery 称为`$`，但您位于存储`$`引用的函数包装器之外。如果这确实是您的应用程序中的两个独立文件，请确保在每个文件中包含包装器。如果这实际上是如上所示的单个脚本，请确保将文档就绪块移动到包装器内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T08:29:47.900

加载第一个版本后，您可以将其分配给变量。

```
var jq13 = jQuery.noConflict(true); // as you did 
```

然后加载你的第二个 jQuery 版本。您加载的第一个可以使用 jq13(...) 访问，而第二个可以使用 $(...) 访问。

无需将变量分配给第二个脚本...*

# android - 如何将 WiFi 级别（即 -45 、 -88 ）转换为百分比？

> ID：13928699
> 
> 赞同：1
> 
> 时间：2012-12-18T08:03:59.203
> 
> 标签：android

如何将 WiFi 级别（即 -45、-88）转换为百分比？

我想将 WiFi 级别转换为 % 。**我使用级别**（dBm 格式）获得 WiFi 级别

我尝试了很多谷歌但没有得到正确的答案

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T08:09:52.537

问题在于它非常依赖于接收天线。有些天线在 -90 dBm 时没有记录可用信号，有些已经在 -80 时。您将很难找到 0%（100% 严格来说是 0dBm）。

我创建了一个 Wifi 扫描仪应用程序，我使用 -100dBm 作为 0% 和 0dBm 作为 100%，在 Java 中它变成了这样的东西（`MIN_DBM`为 -100）：

```
public int getPowerPercentage(int power) {
     int i = 0;
     if (power <= MIN_DBM) {
            i = 0;
     } else {
            i = 100 + power;
     }

     return i;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T10:05:31.053

WifiManager 类有一个函数[calculateSignalLevel](http://developer.android.com/reference/android/net/wifi/WifiManager.html#calculateSignalLevel%28int,%20int%29)，但正如这里所说[，](http://code.google.com/p/android/issues/detail?id=2555)如果 numLevels 大于 45，它会导致错误。可能的解决方法可能是这样的：

```
double percentage = WifiManager.calculateSignalLevel(int rssi, 40) * 2.5; 
```

但当然，这将以 2.5% 为步长 - 我不知道您的用例，但也许这已经足够了。

正如其他人所说，计算百分比是有问题的，并且没有简单的精确解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-31T08:51:45.027

这是微软为 dBm <> 百分比转换所做的： [https ://stackoverflow.com/a/15798024/2096041](https://stackoverflow.com/a/15798024/2096041)

基本上`-50 .. 0 dBm`线性映射到`100 .. 0 %`. 像 MS 一样，我更愿意坐在安全的一边，而不是像这里的一些答案所建议的那样使用 -100 作为 100%。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T08:19:00.017

如果此信息可用，您可以从信噪比而不是单独的信号强度中得出百分比。这可能是所需的指标。

An[`android.net.wifi.ScanResult`](http://developer.android.com/reference/android/net/wifi/ScanResult.html)不会发布必要的信息（截至 2012 年 12 月），但您可能可以通过其他方式获取此信息。

信号 = 噪声 => 不可用的信号，因此您可以设置 0dB SnR = 0%。您也可以将 10dB SnR 设置为 90%（90% 的信号功率不会被噪声淹没），100% = 完全没有噪声。更普遍，

```
p = 100% * (1 - 10^(SnR / (10dB))) 
```

# c++ - Qt 4.x/5.x 和 OpenGL for Desktop Gui 应用程序：选择什么模块？

> ID：13928701
> 
> 赞同：6
> 
> 时间：2012-12-18T08:04:13.723
> 
> 标签：c++, qt, opengl

我正在为 Linux/Windows 桌面使用 Qt 和 OpenGL 启动一个新的 GUI 应用程序项目。到目前为止我的假设：使用 Qt GUI（C++ ...不是 QML/QtQuick 2）和 OpenGL 4.1 或更高版本（要求）。经过一番阅读，我完全不知道该选择什么路径。什么路径将使我的应用程序在支持和库方面保持面向未来。

Qt 4.x 还是 Qt 5.x？标准 OpenGL 或 QGL 或 QOpenGL 或 QtOpenGL 包装器？QWidget/QGLWidget (Qt 4.x) 还是 QWindow (Qt 5.x)？

该应用程序旨在在桌面环境中运行，并将执行大量文件（几何）打开/保存、实例化 3D 绘画和​​一些成像。如果可能的话，有人可以指出我选择的最佳组合并提供一些解释吗？

Sean Harmer关于 Qt 5 和 OpenGL 的[演讲](http://www.youtube.com/watch?v=GYa5DLV6ADQ)确实回答了我的部分问题，但是当他开始使用 QML 和 QtQuick 2 时我有点迷茫。我觉得 QOpenGL 是一个轻量级版本，可以与 QtQuick 2 一起使用。如果我是，请纠正我请错了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T08:20:46.033

Qt 5.0 仍处于测试阶段，因此如果您的项目很严肃，您应该使用 qt 4.8，因为这是最新的稳定版本。但是，如果您必须拥有一些 Qt 5.0 功能，那么您别无选择，只能选择 5.0。

既然选择了 Qt，就应该坚持下去。这意味着使用 QtOpenGL。这并不意味着您不会使用标准的 OpenGL。QtOpenGL 为您提供 API 来简化一些 OpenGL 调用，并使它们更加面向对象。毕竟，OpenGL 是一组 C 函数，而不是一组 C++ 类。

# android - android中的GCM还有什么

> ID：13928703
> 
> 赞同：-2
> 
> 时间：2012-12-18T08:04:16.077
> 
> 标签：android, google-cloud-messaging

我想在我的应用程序中实现谷歌云消息传递。我有一个 GCMIntentService 类，我添加了清单权限并将此代码添加到主要活动：

```
checkNotNull(SENDER_ID, "SENDER_ID");
GCMRegistrar.checkDevice(this);
GCMRegistrar.checkManifest(this);

requestWindowFeature(Window.FEATURE_ACTION_BAR);
setContentView(R.layout.activity_main);
extras = getIntent().getExtras();

if (savedInstanceState == null) {

    if (extras == null) {

        GlobalConfig.setAPPLICATION_ID(APP_ID);

    } else {

        GlobalConfig.setAPPLICATION_ID(extras.getInt("application_id", 0));
    }

} else {

    MY_DEBUG.print("SavedInstanceState is not null");

}

GlobalConfig.setBookmark(0);

//notifications
final String regId = GCMRegistrar.getRegistrationId(this);
Log.i(TAG, "registration id  " + regId);

if (regId.equals("")) {

    GCMRegistrar.register(this, SENDER_ID);

} else {

    Log.v(TAG, "Already registered");

} 
```

我得到了 RegId，但我还需要什么才能从谷歌获取消息？我与网络服务连接。我需要将此 regId 发送到服务吗？我的下一步应该是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T14:51:17.037

这是一张图片，描述了通过 GCM 服务器从服务器（您的网络服务）向您的设备发送消息的所有步骤。

![](../Images/697636ad530dde63e80a61bf41bae66e.png)

第 1 步和第 2 步已经完成（如果我理解您所说的话），因为您检索了注册 ID。

因此，您必须按照以下步骤获取通知。

希望这对你有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T15:58:45.107

我写了一篇博客文章，描述了 GCM 的工作原理以及服务器在此过程中的作用：http: [//blog.andromo.com/2012/how-does-airbop-push-messaging-work/](http://blog.andromo.com/2012/how-does-airbop-push-messaging-work/)在文章中你可以简单地将您的服务器替换为 AirBop 服务器。

下一步是将注册 ID 发送到将处理您的设备注册的服务器。这将是您的服务器或第三方服务器，例如[AirBop](http://airbop.com/)或[Urban Airship](http://urbanairship.com/)。

您可能应该查看[GCM 演示应用程序](http://developer.android.com/google/gcm/demo.html)教程和 GCM 架构概述，以及[GCM 示例](http://code.google.com/p/gcm/)。

来自谷歌文档：

> 这是在移动设备上运行的 Android 应用程序注册以接收消息时发生的事件序列：
> 
> (1) Android 应用程序第一次需要使用消息服务时，它会触发一个注册 Intent 到 GCM 服务器。
> 
> 此注册 Intent (com.google.android.c2dm.intent.REGISTER) 包括发送者 ID 和 Android 应用程序 ID。
> 
> 注意：因为第一次运行应用程序时没有调用生命周期方法，所以注册意图应该在 onCreate() 上发送，但前提是应用程序尚未注册。
> 
> (2) 如果注册成功，GCM 服务器会广播一个 com.google.android.c2dm.intent.REGISTRATION Intent 给 Android 应用一个注册 ID。
> 
> Android 应用程序应存储此 ID 以供以后使用（例如，检查 onCreate() 是否已注册）。请注意，Google 可能会定期刷新注册 ID，因此您应该在设计您的 Android 应用程序时理解 com.google.android.c2dm.intent.REGISTRATION 意图可能会被多次调用。您的 Android 应用程序需要能够做出相应的响应。
> 
> (3)为完成注册，Android应用程序将注册ID发送给应用服务器。应用程序服务器通常将注册 ID 存储在数据库中。
> 
> 注册 ID 一直持续到 Android 应用程序明确取消注册，或者直到 Google 为您的 Android 应用程序刷新注册 ID。

您处于上述列表中的第三步。您可以通过查看[ServerUtilities](http://code.google.com/p/gcm/source/browse/samples/gcm-demo-client/src/com/google/android/gcm/demo/app/ServerUtilities.java)类中的 register() 方法来了解 gcm-demo-client 如何执行第三步

# linux - 如何使 cscope 在搜索期间显示完整的文件路径

> ID：13928705
> 
> 赞同：9
> 
> 时间：2012-12-18T08:04:36.067
> 
> 标签：linux, search, ide, ctags, cscope

当我使用 搜索 C 符号或全局定义`cscope`时，它会显示文件名和行号。我想查看完整的文件路径，以便可以跳转到我的拱形特定文件。例如，在 Linux 代码库上搜索`__switch_to`on build 的全局定义时，我得到：`cscope`

```
Global definition: __switch_to

  File         Line
0 process.c    297 struct task_struct *__switch_to(struct task_struct *prev,
1 switch_to.h   44 #define __switch_to(prev,next,last) do { \
2 process.c    202 struct task_struct *__switch_to(struct task_struct *old,
3 process.c    400 struct task_struct *__switch_to(struct task_struct *prev,
4 process_32.c 211 __switch_to(struct task_struct *prev, struct task_struct *next)
5 process.c     80 void *__switch_to(struct task_struct *from, struct task_struct *to)
6 process_32.c 248 __switch_to(struct task_struct *prev_p, struct task_struct *next_p)
7 process_64.c 272 __switch_to(struct task_struct *prev_p, struct task_struct *next_p) 
```

现在，`process.c`每个`arch`. 如何`cscope`显示完整的文件路径？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-18T08:15:28.297

使用 args -pn 运行 cscope

> -pn 显示最后 n 个文件路径组件而不是默认值 (1)。使用 0 根本不显示文件名。

使用 cscope -p4 运行并搜索 __switch_to 的全局定义会导致

```
Global definition: __switch_to

  File                           Line
0 arch/arm64/kernel/process.c    297 struct task_struct *__switch_to(struct task_struct *prev,
1 ia64/include/asm/switch_to.h    44 #define __switch_to(prev,next,last) do { \
2 arch/openrisc/kernel/process.c 202 struct task_struct *__switch_to(struct task_struct *old,
3 arch/powerpc/kernel/process.c  400 struct task_struct *__switch_to(struct task_struct *prev,
4 arch/sh/kernel/process_32.c    211 __switch_to(struct task_struct *prev, struct task_struct *next)
5 arch/um/kernel/process.c        80 void *__switch_to(struct task_struct *from, struct task_struct *to)
6 arch/x86/kernel/process_32.c   248 __switch_to(struct task_struct *prev_p, struct task_struct *next_p)
7 arch/x86/kernel/process_64.c   272 __switch_to(struct task_struct *prev_p, struct task_struct *next_p) 
```

# xml - 根据结果 在 SQL 脚本中移动 xml 文件

> ID：13928707
> 
> 赞同：0
> 
> 时间：2012-12-18T08:04:43.613
> 
> 标签：xml, redhat

我正在寻找一种方法来根据查询结果将一些文件移动到 RedHat Linux 上的“拒绝”目录。数据库是 Oracle 11gr2。

所有四个文件都在一次处理中。它们被 FTP 进程放置在一个共享上，并且计划的 OEM 作业每 15 分钟检查一次 XML 文件是否存在。

当它看到有 XML 文件要处理时，它会选择它们，使用 xmllint 验证它们并将文件复制到工作目录。

从那里，文件被加载到外部表中，具体取决于`WHERE`查询中子句的结果。

在加载过程中是否需要在文件失败或包含一条错误记录时将文件移动到文件`rejected`夹中？

我的测试用例中有 4 个 XML 文件：

*   1 是正确的。
    *   *加载没有问题。*
*   1有一个坏和一个好记录
    *   *正确的记录已正确加载，而错误的记录则没有。但是我希望不加载整个“坏”文件，并且在没有将其加载到 oracle 之后，我想将文件移动到“拒绝”文件夹中。*
*   1 有一个 XML 错误
    *   *被 xmllint 正确拒绝并移至“拒绝”文件夹。*
*   1 错过了标签内的值。
    *   *拒绝，因为它不符合强制值。*

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T13:33:05.790

针对 XSD 或 DTD 验证 XML 文件可以包括正则表达式。由于您的 XSD/DTD 将在运行时读入内存，因此您可以根据需要注入实际的正则表达式，以便您的测试用例完成其工作。

查看例如[正则表达式，xsd 中的模式匹配以](https://stackoverflow.com/questions/6819370/regular-expression-pattern-matching-in-xsd)获取更多信息。

# javascript - 在简单的 js for-loop 中找不到问题

> ID：13928708
> 
> 赞同：1
> 
> 时间：2012-12-18T08:04:48.317
> 
> 标签：javascript

我第一次尝试（或多或少）javascript，发现自己完全被下面的 .js 脚本弄糊涂了。

```
var pair = newArray();
var id = newArray();
var pairs = 2;

function newGame(){

    var randomid = 0;

    alert("newGame() called!");

    // Sets a specific part of the image sprite to each pair[].
    for (var i=0 ;i < pairs; i++){
        alert("For loop started!");
        pair[i] = "url(Cardfront.jpg) -"+100 * Math.floor((Math.random()*13)+0)+"px -"+200 * Math.floor((Math.random()*4)+0)+"px";
        // For every pair, assigns a part of the image sprite to two id[]-s.
        alert("Pair " + i + "is " + pair[i]);
        for(var j=0; j < 2; j++) {
            //the range of possible id-s the total number of cards - double the amount of pairs.
            randomid = Math.floor((Math.random()*pairs*2)+0);
            if (id[randomid] === null){
                id[randomid] = pair[i];
                alert("ID " + randomid + "is " + id[randomid]);
            }
            else j--;
        }
    }

    alert("This is called after the for loop!");
} 
```

当我通过按钮调用 newGame() 时，我收到“newGame() 调用！” 然后“这是在 for 循环之后调用的！” 警报，然后什么都没有。

我花了一段时间在谷歌上搜索并四处寻找，试图弄清楚这一点，但似乎我已经无能为力了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T08:08:18.710

更改`newArray()`为`new Array()`我相信这是导致您的错误的原因先生。

祝你好运！

编辑：要修复另一个错误，我发现您有以下内容：

```
if (id[randomid] === null) { 
```

带 3 个`=`标志。将其更改为仅两个：

```
if (id[randomid] == null) { 
```

它应该按照您期望的方式工作。除非您真的在尝试使用严格的比较运算符，否则您的代码会有其他问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T08:19:25.143

在这段代码中：

```
if (id[randomid] === null){
    id[randomid] = pair[i];
    alert("ID " + randomid + "is " + id[randomid]);
}
else j--; 
```

你不能混合`if/else`速记：

```
if(something)
    //Do X
else
    //Do y 
```

使用它的括号表示法：

```
if(something){
    //Do X
} else {
    //Do y
} 
```

所以，在你的周围加上括号`else`：

```
if (id[randomid] === null){
    id[randomid] = pair[i];
    alert("ID " + randomid + "is " + id[randomid]);
} else {
    j--;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T08:07:34.357

~~for 循环应该是：~~

 ~~```
for (var i=0; i<pairs.length; i++) {
   ...
} 
```~~ 

~~`pairs`被强制转换为数值（在这种情况下为零），因此第一个比较 ( `i<pairs`) 将与`0<0`永远不会为真的比较相同。~~

:-(

# .net - 在多个表单之间共享对象实例

> ID：13928713
> 
> 赞同：1
> 
> 时间：2012-12-18T08:05:11.523
> 
> 标签：.net, winforms

我有多表单应用程序，我需要一个**MyClass()**实例可以从每个表单访问。我应该把它放在哪里？

将其公开给 form1，然后以其他形式**使用 Form1.MyClassInstance**或者最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T08:32:57.183

您可以将要共享的对象声明为[静态](http://msdn.microsoft.com/en-us/library/79b3xss3%28v=vs.80%29.aspx)字段：

```
public partial class Form1 : Form
{
    public static object MyObject;
    //...
} 
```

...或将其声明为静态属性：

```
public partial class Form1 : Form
{
    private static object obj;
    public static object MyObject
    {
        get { return obj; } // read-only
    }
    //...
} 
```

...然后你像这样访问它（在其他类中）：

```
object obj = Form1.MyObject; 
```

但是，如果您有多个 Form1 实例，则 MyObject 对于 Form1 的所有实例都是相同的。

* * *

另一种方法是通过调用[Form.Show()设置](http://msdn.microsoft.com/en-us/library/szcefbbd.aspx)[Form.Owner](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.owner.aspx)属性：

```
public partial class Form1 : Form
{
    public object MyObject; // no static required
    public Form1()
    {
        InitializeComponent();
        Form2 f2 = new Form2();
        f2.Show(this); // this sets the Form.Owner property on f2
    }
    //...
} 
```

...然后你像这样访问它（在 Form2 中）：

```
Form1 f1 = (Form1)this.Owner;
object o = f1.MyObject; 
```

这里的优点是您现在可以访问 Form1 的所有公共成员，即使它们没有被声明为静态的。但是如果你最小化/关闭 Form1，Form2 也会被最小化/关闭。

* * *

如果不想使用 static 或 Form.Owner，也可以将 Form1 实例的引用作为参数传递。例如，在 Form2 中，您可以编写一个以 Form1 作为参数的构造函数：

```
public partial class Form2 : Form
{
    public Form2(Form1 f1)
    {
        InitializeComponent();
        object o = f1.MyObject; // access MyObject like this
    }
    //...
} 
```

...并像这样实例化 Form2（在 Form1 中）：

```
Form2 f2 = new Form2(this); 
```

# webmatrix - 可以通过文件系统共享 WebMatrix 开发的站点吗？

> ID：13928714
> 
> 赞同：1
> 
> 时间：2012-12-18T08:05:15.447
> 
> 标签：webmatrix

我刚刚创建了一个示例网站，我想向某人展示。我可以将它发布到 Web 服务器，但如果可能的话，我更愿意将它作为 .zip 文件发送给其他人查看。我的网站使用了 WebMatrix 的 SQLite 功能，否则这将是一件简单的事情。

有什么方法可以将这个网站共享为 .zip 文件吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T20:57:40.320

告诉收件人安装 WebMatrix，当他们收到您的 zip 文件时，应将其解压缩，然后右键单击解压缩的文件夹并选择 Open as a Web Site with Microsoft WebMatrix，然后点击运行按钮。

# c# - 如何使用 C# 在 Windows Phone 8 中打开 onepkg 文件

> ID：13928725
> 
> 赞同：1
> 
> 时间：2012-12-18T08:05:53.390
> 
> 标签：c#, windows-phone-8, onenote, windows-phone-8-emulator

有没有办法使用 C# 代码在 Windows Phone 8 中打开 .onepkg 文件？

我尝试使用

```
string imageFile = @"File.onepkg";
var file = await Windows.ApplicationModel.Package.Current.InstalledLocation.GetFileAsync(imageFile);
var success = await Windows.System.Launcher.LaunchFileAsync(file); 
```

这是在手机中启动应用程序的默认启动器。

我安装了 OneNote（当我将扩展名从 .onepkg 更改为 .one 时，它​​工作得非常好，并在 windows phone 模拟器中打开 OneNote）。

但是如果是 OneNote 笔记本，它不会打开 OneNote，而是在 windows phone store 中查找，当我说*“我接受”*时，它会显示*“未找到应用程序”*。

谁能给我任何指示/建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T23:28:05.213

根据`<Extensions>`WP8 Onenote 应用程序的元素，当前版本似乎只支持 *.one 和 *.onetoc2 文件扩展名。考虑到 *.onepkg 文件是创建新文件的模板，这是有道理的，但 app2app 文件扩展名支持目前仅限于只读方案。

```
 <Extensions>
    <FileTypeAssociation
      Name="OneNote file"
      TaskID="Default"
      NavUriFragment="CmdLine=-s &quot;token:%s&quot;">
      <Logos>
        <Logo Size="small" IsRelative="true">OneNoteFileIcon.small.{ScreenResolution}.png</Logo>
        <Logo Size="medium" IsRelative="true">OneNoteFileIcon.medium.{ScreenResolution}.png</Logo>
        <Logo Size="large" IsRelative="true">OneNoteFileIcon.large.{ScreenResolution}.png</Logo>
      </Logos>
      <SupportedFileTypes>
        <FileType ContentType="application/onenote">.one</FileType>
      </SupportedFileTypes>
    </FileTypeAssociation>
    <FileTypeAssociation
      Name="OneNote notebook"
      TaskID="Default"
      NavUriFragment="CmdLine=-s &quot;token:%s&quot;">
      <Logos>
        <Logo Size="small" IsRelative="true">OneNoteNoteBookIcon.small.{ScreenResolution}.png</Logo>
        <Logo Size="medium" IsRelative="true">OneNoteNoteBookIcon.medium.{ScreenResolution}.png</Logo>
        <Logo Size="large" IsRelative="true">OneNoteNoteBookIcon.large.{ScreenResolution}.png</Logo>
      </Logos>
      <SupportedFileTypes>
        <FileType ContentType="application/onenote">.onetoc2</FileType>
      </SupportedFileTypes>
    </FileTypeAssociation>
    <Protocol
      Name="onenote"
      TaskID="Default"
      NavUriFragment="CmdLine=-u &quot;%s&quot;"/>
  </Extensions> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T20:41:11.703

我认为 onepkg 是一个包含 .one 和 .onetoc 文件以及目录结构的 zip 文件。所以一种方法可能是展开这个 cab 文件，然后打开它。

类型：驾驶室

方法：LZX

块数：1

卷数：1

# testing - 如何在敏捷开发环境中集成测试人员？

> ID：13928727
> 
> 赞同：2
> 
> 时间：2012-12-18T08:06:05.323
> 
> 标签：testing, agile, scrum

我们与 Scrum 合作，我认为我们走在正确的道路上，但有一件事困扰着我：测试人员还不是开发周期的一部分。现在我正在考虑如何让测试人员参与开发团队。现在它是分开的，测试人员有他们“自己的”冲刺。

目前我们有一个CI环境。每次开发人员完成用户故事时，他都会签入他的代码，并且构建服务器会在每次签入时构建代码。

我想要的是测试人员在实现用户故事的同一冲刺中测试用户故事。但我正在努力解决如何设置它。

我的主要问题是：测试人员可以在哪里测试用户故事？他们不能在构建服务器上进行测试，因为在每次签入时它都会创建一个新构建并且有很多签入。所以这不是一个选择。那么，我应该创建一个单独的服务器，供测试人员自行部署吗？或者..

我的问题是，你们是如何设置的？您如何将测试人员集成到开发过程中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T08:16:53.050

您需要一个登台服务器并每隔一段时间部署一次构建。我们就是这样做的：CI->Dev->Staging->Live

编辑：我总是觉得发布维基链接的混蛋，但这篇关于多阶段 CI 的文章很好：[http ://en.m.wikipedia.org/wiki/Multi-stage_continuous_integration](http://en.m.wikipedia.org/wiki/Multi-stage_continuous_integration)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T09:45:19.453

在我目前的项目中，我们有 4 个小团队，每个团队分配了 1 名测试人员。测试人员是日常站立会议、冲刺计划会议等的一部分。测试人员也有自己的日常站立会议，以便他们进行协调等。

*在 Sprint 计划会议 2 期间，我们一起*（测试人员、开发人员和 PO）创建验收标准/示例/测试用例（无论您想如何称呼它）。目的是建立对用户故事的共同理解，获得正确的方向并将其拆分为更小的功能（场景/测试用例），例如只是一条特定的快乐路径。因此，我们能够提供比测试人员测试的更小的工作特性。同时可以实现用户故事的下一部分。此外，还决定了哪些故事需要自动化验收测试以及哪个级别（单元、集成、gui 测试）最有意义。

正如 OakNinja 已经提到的 :) 您将需要至少一个额外的环境供测试人员使用。在我们的案例中，这些环境不是质量门，而是开发阶段。因此，每当开发人员完成某些功能时，他都会告诉测试人员，如果他愿意，他可以重新部署。

如果用户故事完成，它将被部署在登台服务器上，在那里接受用户故事。

部署过程：

Dev + Test => Staging（用于验收）=> Demo（用于每 2 周演示用户故事）=> SIT 和 End2End 测试环境（每 2 周部署）=> 生产（大约部署 6 个月）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-18T15:39:03.297

我们在整个 sprint 中都有 QA 资源：估计、计划等。当开发人员第一次开始编码时，团队的 QA 成员开始创建测试用例。当代码被签入时，它会按计划（或根据需要）部署到单独的环境中，以便 QA 可以在冲刺期间执行他们的测试。在故事大部分完成后，QA 也会参与回归。

我们的设置使用 TFS 或 TeamCity 中的构建配置自动部署，具体取决于项目。我们的环境是这样拆分的：

1.  **本地开发服务器**。开发人员拥有自己的源代码、IIS 和数据库（如有必要），以便在工作时将它们相互隔离并进行 QA。
2.  **构建服务器**。用于 CI、自动化部署。这里没有网站或数据库。
3.  **每日构建环境**（又名“开发”或“开发测试”）。功能齐全的站点，QA 可以在其中审查在冲刺期间完成的工作并提供反馈。
4.  **QA 实验室**（又名“回归”或“UAT”）。用于回归测试、演示和 UAT 的隔离实验室。

我们使用构建配置来保持这些更新：

1.  CI 在签入上构建以处理来自本地开发人员的签入。
2.  每日计划构建和自动部署到每日构建环境。显然，开发人员或 QA 也可以手动触发此操作，以便在需要时进行推送。
3.  用于部署到 QA 环境的手动触发器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T06:50:48.180

上面的解释中遗漏了一点，将测试人员添加到 SCRUM 流程的最佳方法是确保他们是 Scrum 团队的一部分，并在 Sprint 中与团队的其他成员（开发人员、PO 等）一起工作. 大多数情况下，这并没有真正完成，你最终拥有的只是（在最好的情况下）一个迷你瀑布过程。

现在让我解释一下。上面大量的硬件和环境解释几乎没有什么可添加的，您可以使用分阶段的服务器，或者甚至更好地将脚本设置为内部功能，以允许测试人员在需要时创建自己的环境（如果您正在使用任何 CI 框架，很可能您已经拥有其中所需的所有部件）。

困扰我的是你说你的测试人员“有他们自己的 sprint”。

在让测试人员参与 SCRUM 流程时，我看到的主要问题是他们实际上并不是流程本身的一部分。有时感觉是他们的技术不足以与开发人员真正接近，有时开发人员只是不想被向测试人员解释他们正在做什么而烦恼（直到他们完成 - 没有完成！），其他时候它只是管理层没有解释这是团队的期望。

简而言之，每个用户故事都应该有一个技术所有者和一个测试所有者。他们应该一直一起工作，并且应该尽快开始测试，即使是在开发人员环境中进行简短的“非正式清理测试”。毕竟，这个想法是通过消除过程中所有不必要的官僚主义来减少繁文缛节。

测试人员还应该向开发人员解释他们应该进行什么样的测试，然后再告诉 QA 他们可以继续使用该功能。手动测试既是开发人员的责任，也是测试人员的责任。

简而言之，如果你想让测试人员成为你的开发的一部分，比拥有正确的基础设施更重要的是，你需要有正确的思维定势，这意味着改变游戏规则，在许多情况下团队中每个人看待自己的任务和责任的方式。

我在我的博客上写了几篇关于这个主题的文章，如果到目前为止我没有打扰你，你可能会觉得这些很有趣。

[切换到敏捷，并不像换 T 恤那么简单](http://qablog.practitest.com/2011/09/switching-to-agile-testing-not-as-simple-as-changing-your-t-shirt/)

[敏捷思维而不是敏捷测试](http://qablog.practitest.com/2011/03/agile-thinking-instead-of-agile-testing/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-03T10:13:43.883

我建议阅读Clemens Reijnen的文章“[在 Scrum Sprint 中完成软件测试的 5 个技巧”。](http://www.methodsandtools.com/archive/testingscrum.php)他解释了如何在 Scrum 冲刺期间整合软件测试团队和实践。

# php - 使用 Javascript 访问通过 Twig 传递的变量

> ID：13928729
> 
> 赞同：63
> 
> 时间：2012-12-18T08:06:06.937
> 
> 标签：php, javascript, symfony, twig

我有一个控制器，它将一个数组传递给一个树枝模板，我想在该页面上编写的脚本中使用它。我该怎么做呢？

我已经在我的 .twig 模板中尝试过这个：

```
<script>
    $(document).ready(function(){
        var test = {{ testArray }};
});
</script> 
```

但这仅在它是字符串时才有效。

* * *

## 回答 #1

> 赞同：195
> 
> 时间：2012-12-18T08:31:59.273

你可能需要`json_encode`数组，试试这个：

```
<script>
    $(document).ready(function(){
        var test = {{ testArray|json_encode|raw }};
    });
</script> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-03-19T09:04:47.700

首先，发送从控制器编码的数据 json 和

然后在javascript中，

```
var context= JSON.parse('{{ YourArrayFromController|raw}}'); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-04-18T23:27:20.667

**我这样做：**

然后返回控制器 test.data

```
$test = array('data' => array('one','two')) 
```

枝条：

```
<div id="test" data-is-test="{{ test.data|json_encode }}"></div> 
```

JS：

```
$(document).ready(function() {
    var test = $('#test').data("isTest");
    console.log(test);
}); 
```

输出：

```
 ["one", "two"] 
```

[文档在这里](https://symfony.com/doc/current/frontend/encore/server-data.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-11T20:38:41.657

在我的控制器中，我安装了 SerializerBundle

```
$serializer = $this->get('serializer');
        $countries = $this->getDoctrine()->getRepository("QSCORBundle:CountryMaps")->findAll();
        $jsonCountries = $serializer->serialize($countries, 'json');
 return $this->render('QSCORBundle:Default:index.html.twig',array("countries"=> $jsonCountries)); 
```

在我的文件树枝中

```
<script type="text/javascript" >
 var obj = {{ countries|json_encode|raw }};
 var myObject = eval('(' + obj + ')');

 console.log(myObject[0]['capital_latitude'] + " " + myObject[0]['capital_longitude']);//for the First Element
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-07T11:45:59.113

`json_encode``raw`与过滤器结合使用效果很好。

```
<script>
    $(document).ready(function(){
        let test = {{ testArray | json_encode(constant('JSON_HEX_TAG')) | raw }};
    });
</script> 
```

不要忘记`JSON_HEX_TAG`国旗。
否则，您可能会得到损坏的 HTML。[包含的字符串`<!--<script>`](https://stackoverflow.com/q/20942452/2534880)是测试它的好方法。

# c# - ClickOnce 部署，当服务器未准备好时，应用程序在启动时未运行

> ID：13928735
> 
> 赞同：2
> 
> 时间：2012-12-18T08:06:42.140
> 
> 标签：c#, visual-studio, clickonce

我有一个使用 ClickOnce 部署的应用程序，从服务器运行。.appref-ms 文件的快捷方式放置在用户的启动文件夹中，大多数情况下它工作正常，它连接到服务器并检查要求（更新），然后应用程序运行。

但是，有时它会尝试连接/验证但失败，没有给出错误消息并且只是不启动应用程序。我假设这是因为服务器尚未准备好。有没有办法让clickonce应用程序等到它可以连接？（或者例如尝试 3 次）

# c# - 没有 0 参数的构造函数，但没有使用

> ID：13928736
> 
> 赞同：0
> 
> 时间：2012-12-18T08:06:52.360
> 
> 标签：c#, .net, xaml

我正在尝试扩展一个没有 0 参数构造函数的类，因此我没有在我的子类中使用一个，但似乎 vs 生成了一个，为什么以及我必须改变什么？谢谢：

```
public abstract class BasicQuestPart
{
    public String question { get; set; }
    public BasicQuestPart(String question)
    {
        this.question = question;
    }

}

class MultipleChoice : BasicQuestPart
{
    //In this class I get the 0-arguments error
    public MultipleChoice(String question)
        : base(question)
    {
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T09:48:16.837

VS 不会生成构造函数，C# 编译器会。

如果您自己指定构造函数，将不再有隐式的“0 参数构造函数”。

因此，在您的情况下，您有一个需要 String 并将其传递给其基类的构造函数：

```
public MultipleChoice(String question) : base(question) 
```

如果编译器在“MultipleChoice 类没有参数为 0 的构造函数”方面给您一个错误，那么您尝试在代码中的某处执行此操作：

```
new MultipleChoice(); //No argument! 
```

但是你不能这样做，因为当你添加一个接受字符串的构造函数时，你删除了隐含的 0 参数构造函数！

您可以通过传递字符串来解决此问题：

```
new MultipleChoice("Does this solve your problem?"); //Now with a string argument! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T09:48:29.160

您是否在 XAML 代码中使用 *MultipleChoice *？

仅当您尝试使用无参数构造函数实例化您的类时，才会出现此消息。除了*new MultipleChoice()*语句之外，XAML 或依赖注入框架也可以使用无参数构造函数。

每个 XAML 标记对应一个使用无参数构造函数实例化的对象。属性被传递给对象的相应依赖属性。

以下代码将尝试使用无参数构造函数创建 MultipleChoice 对象：

```
<MultipleChoice question="This is my question"/> 
```

当然，您的课程不会以这种方式工作，因为您尚未将*question*声明为依赖属性。

除非配置正确，否则像 MEF 这样的依赖注入框架也使用无参数构造函数。

# c# - 使用 C# 从列表中删除不需要的字符

> ID：13928741
> 
> 赞同：-2
> 
> 时间：2012-12-18T08:07:14.653
> 
> 标签：c#, arrays, list, trim

我有一个多行文本框，我可以将任何文本项的列表粘贴到其中，如下所示：

```
555-555-1212
I want's a lemon's.
google.com
1&1 Hosting 
```

我旁边还有一个文本框，我可以添加逗号分隔的字符串，我想从列表中的所有项目中删除这些字符串，如下所示：

```
-,$,!,@,#,$,%,^,&,*,(,),.com,.net,.org 
```

我试图弄清楚如何从我的文本框列表中的每个字符串中清除每个字符串（或我放入第二个文本框中的任何其他字符串）。

有任何想法吗？我知道如何将列表放入列表字符串，但不确定如何清理该字符串。

这是我到目前为止所拥有的......但我得到了红色的波浪线：

```
List<string> removeChars = new List<string>(textBox6.Text.Split(','));                 
for (int i = 0; i < sortBox1.Count; i++)
{
    sortBox1[i] = Regex.Replace(sortBox1[i], removeChars, "").Trim();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T08:21:11.213

```
private void button1_Click(object sender, EventArgs e)
{
    string[] lines = new string[] { "555-555-1212", "I want's a lemon's.", "google.com", "1&1 Hosting" };
    string[] removables = textBox1.Text.Split(',');
    string[] newLine = new string[lines.Count()];

    int i = 0;
    foreach (string line in lines)
    {
        newLine[i] = line;
        foreach (string rem in removables)
        {
            while(newLine[i].Contains(rem))
                newLine[i] = newLine[i].Remove(newLine[i].IndexOf(rem), rem.Length);
        }
        MessageBox.Show(newLine[i]);
        i++;
    }
} 
```

结果：

**5555551212
我想要一个柠檬
googlecom
1&1 托管**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T08:21:35.990

[`String.Replace`](http://msdn.microsoft.com/en-us/library/system.string.replace.aspx)在不需要列表中的每个字符串上使用`Textbox.Lines`.

```
string[] replaceStrings = txtUnwanted.Text.Split(',');
List<string> lines = new List<string>(textBox1.Lines);
for (int i = 0; i < lines.Count; i++)
    foreach (string repl in replaceStrings)
        lines[i] = lines[i].Replace(repl, ""); 
```

编辑：这是一个演示： http: [//ideone.com/JQl79k](http://ideone.com/JQl79k)（没有 Windows 控件，因为 ideone 不支持它）

# python - 如何使用 Python 获取 Blob 密钥？

> ID：13928744
> 
> 赞同：0
> 
> 时间：2012-12-18T08:07:38.020
> 
> 标签：python, google-app-engine

我在存储然后检索 blobstore 密钥时遇到了困难。看起来我能够获取数据库行键 # 而不是 blob 键#....

1) 我不确定如何存储密钥 2) 另外，我不确定当前数据如何存储到 UserPhoto 数据结构设置中 3) 如何检索与当前用户相关的 Blob 密钥，以便显示我的链接？

任何帮助将不胜感激。

```
from google.appengine.api import users
from google.appengine.ext import webapp
from google.appengine.ext.webapp.util import run_wsgi_app
from google.appengine.ext import blobstore
from google.appengine.ext.webapp import blobstore_handlers
from google.appengine.ext import db
import urllib

class UserPhoto(db.Model):
    user = db.StringProperty()
    user1 = db.EmailProperty()        
    blob_prop = blobstore.BlobKey
    blob_key = blobstore.BlobReferenceProperty()

class MainPage(webapp.RequestHandler):
   def get(self):
    user = users.get_current_user()
    upload_url = blobstore.create_upload_url('/upload')
    existing_data = "<br>"

    if user:

        data = UserPhoto.all()

        #filter data by user e-mail
        results = data.filter("user1 = ", user.email())

        for dt in results:

            existing_data +='<a href="/serve/%s' % dt.key() + '">'
            existing_data += '%s' % dt.key() + '<br>'   

        self.response.out.write(
            '<div align=center>Hello %s <a align="center" href="%s">Sign out</a><br>Is administrator: %s' % 
            (user.nickname(), users.create_logout_url("/"), users.is_current_user_admin())           
            +'<form action="%s" method="POST" enctype="multipart/form-data">' % upload_url+
            """<br>Upload File: <input type="file" name="file"><br> <input type="submit"
            name="submit" value="Submit"> </form>
            <br>"""+existing_data + "</div>"

        )

       #the code below is used for testing...purposes only...
        for b in blobstore.BlobInfo.all():
            self.response.out.write('<li><a href="/serve/%s' % str(b.key()) + '">' + str(b.filename) + '</a>')

    else:
        self.redirect(users.create_login_url(self.request.uri))

class UploadHandler(blobstore_handlers.BlobstoreUploadHandler):
    def post(self):
    upload_files = self.get_uploads('file')  # 'file' is file upload field in the form
    blob_info = upload_files[0] 
    user = users.get_current_user()

    if user:
            data = UserPhoto()

            data.user1 = users.get_current_user().email()

            data.blob_key = str(blob_info.key())
           # data.user2[0] = self.get_uploads()

           data.blob_prop = blob_info.key()

            data.put()

    #self.redirect('/serve/%s' % blob_info.key())
        self.redirect('/')

class ViewPhotoHandler(blobstore_handlers.BlobstoreDownloadHandler):
def get(self, photo_key):
    blob_key = str(urllib.unquote(photo_key))
    if not blobstore.get(photo_key):
        self.error(404)
    else:
        #self.send_blob(photo_key)
        #self.send_blob('/serve/%s' % photo_key)
        self.send_blob(blobstore.BlobInfo.get(blob_key), save_as=True)

 class ServeHandler(blobstore_handlers.BlobstoreDownloadHandler):
   def get(self, resource):
    resource = str(urllib.unquote(resource))
    blob_info = blobstore.BlobInfo.get(resource)
    self.send_blob(blob_info)

application = webapp.WSGIApplication([('/', MainPage),
                           ('/upload', UploadHandler),
                           ('/serve/([^/]+)?', ServeHandler),
                           ('/view_photo/([^/]+)?', ViewPhotoHandler)
                           ],debug=True)
def main():
  run_wsgi_app(application)

if __name__ == "__main__":
  main() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T09:20:35.083

您在`UserPhoto`构建输出时要求实体键，而不是该实体中的 blobstore 引用。它应该是：

```
existing_data +='<a href="/serve/%s">' % dt.blob_key 
```

# javascript - 使用 WordPress 3.5 刷新 IFrame

> ID：13928746
> 
> 赞同：1
> 
> 时间：2012-12-18T08:07:41.610
> 
> 标签：javascript, jquery, wordpress, wordpress-3.5

在以前的 WordPress 版本中，我曾经使用以下代码来自动刷新帖子中的 iframe：

```
<iframe id='feuille1' src="http://competition.hockeyfrance.com/la/ffhgsheet.php?GameID=20094" width="650" height="1000" name='feuille1' ></iframe> 
<script type="text/javascript"> function refreshiframe() { document.getElementById('feuille1').src="http://competition.hockeyfrance.com/la/ffhgsheet.php?GameID=20094" setTimeout("refreshiframe()",30000); } </script> 
<body onload="refreshiframe();"> 
```

该代码使用简码嵌入到帖子中。在最近的 3.5 更新之前，这一直很好，据我所知，其中包括 jQuery 的更新版本。

有人可以帮我理解为什么这个非常简单的代码不再起作用了吗？我能做些什么来修复它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T08:31:24.767

改变这个：

```
<script type="text/javascript"> function refreshiframe() {document.getElementById('feuille1').src = "http://competition.hockeyfrance.com/la/ffhgsheet.php?GameID=20094"  setTimeout("refreshiframe()",30000); } </script> 
```

到：

```
<script type="text/javascript"> function refreshiframe() {document.getElementById('feuille1').src = "http://competition.hockeyfrance.com/la/ffhgsheet.php?GameID=20094"; setTimeout("refreshiframe()",30000); } </script> 
```

注意`;`划分两个不同的js指令，一个用于更改`src`和另一个调用`setTimeout`函数。

祝你好运！

# php - 使用 CURL 将 $_FILES 信息发送到另一个脚本

> ID：13928747
> 
> 赞同：1
> 
> 时间：2012-12-18T08:07:41.707
> 
> 标签：php, javascript, jquery, curl, upload

我使用 jQuery File Upload 从客户端发布了一个文件`a.php`，但我需要将此信息转发到`b.php`（在不同的域上`a.php`）以进行进一步处理。如何使用 CURL 实现这一目标？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T09:37:06.187

要转发`$_FILES`数据，您需要：

1.  将文件保存在您的服务器上`a.php`。
2.  通过 POST 请求将该文件发送到`b.php`.

中的代码`a.php`可能如下所示：

```
$file_path = "full/path/to/upload/dir/" . basename($_FILES['my_file']['name']);
if(move_uploaded_file($_FILES['my_file']['tmp_name'], $file_path)) {
    $ch = curl_init('url/of/b.php'); 
    curl_setopt($ch, CURL_POST, TRUE);
    curl_setopt($ch, CURL_POSTFIELDS, array('my_file' => '@' . $file_path));
    $response = curl_exec($ch);
} else {
    echo "Can't save file";
} 
```

在`b.php`文件中将再次可用`$_FILES['my_file']`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T08:10:03.770

像这样？

```
$filename = '/foo/bar';
$postargs = array(
  'foo' =>'bar', //normal postfield
  'fileentry' => '@'.$filename
);

$ch = curl_init(); 
curl_setopt($ch,CURL_POSTFIELDS, $postargs);//give as array for proper encoding.
curl_exec(); 
```

# android-viewpager - 如何滚动 ViewPager？

> ID：13928749
> 
> 赞同：0
> 
> 时间：2012-12-18T08:08:11.877
> 
> 标签：android-viewpager

我是 Android 新手。如何使用`ViewPager.scrollBy(int x,int y)`？`ViewPager.scrollBy(int x,int y)`没有更新视图

```
new Handler().post(new Runnable() {

                    @Override
                    public void run() {
                        // TODO Auto-generated method stub

                        mainPager.scrollBy(10,0);

                    }
                }); 
```

即使这不是更新视图。请告诉我 scrollTo(int x,int y) 和 scrollBy(int x,int y) 有什么区别；

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T04:54:56.697

据我了解`scrollTo()`且不`scrollBy()`适用于`ViewPager`; 它们只是定义的方法`View`，不适用于`ViewPager`.

如果您尝试移动到特定页面，请使用`setCurrentItem(int item, boolean smoothScroll)`.

# javascript - 使DIV立即出现，没有淡入淡出效果

> ID：13928751
> 
> 赞同：-3
> 
> 时间：2012-12-18T08:08:12.347
> 
> 标签：javascript, jquery

我正在使用 JavaScript setinterval 方法，但 DIV 出现缓慢。有人可以告诉我如何消除淡入淡出效果吗？我需要它立即出现。

这是我的代码：

```
<script>
 setInterval(
function()
{
$('#lista').show().load('pagination.php').fadeIn('slow');}, 0);
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T08:10:06.207

哇，这是一个简单的问题，您可以通过阅读一些[jQuery 文档](http://docs.jquery.com/)快速了解。但是不要紧。

```
$('#lista').show().load('pagination.php'); 
```

你看，你已经显示了带有 id 的元素，`lista`然后将一些 html 加载到其中。不需要`fadeIn`在最后。

实现相同目的的一种可能更好的方法，但是仅在加载数据后才显示元素，是将回调传递给该`load`方法：

```
$('#lista').load('pagination.php', function(){ $(this).show();} ); 
```

# php - PHP：用“空格”替换“+”符号

> ID：13928755
> 
> 赞同：0
> 
> 时间：2012-12-18T08:08:25.683
> 
> 标签：php, wordpress

我正在使用 echo 标记通过*Wordpress* > *Appreances* > *Theme Options*输出用户在我的网站上选择的一些字体属性。

一旦他们从这个页面上的一个选择菜单中选择了他们喜欢的字体，它就会被调用到前端的源代码中，如下所示：

**头文件.php**

```
<style>
<?php $typography = of_get_option('main-text');
if ($typography) {          
echo 'p {
    font: ' . $typography['size']. ' '.$typography['face'] . '; 
    font-style: ' . $typography['style'] . '; 
    color: '.$typography['color'].';    
}';

$typography = str_replace(' ','+',$typography); 
} 
?>
</style> 
```

由于他们在选择菜单中的选择包括*Google Web Fonts*，因此某些字体包含`+`我想用简单的符号代替的符号 `space` 。

由于我对 PHP 有点不熟悉，我想知道如何正确地写出类似的东西

```
$typography = str_replace(' ','+',$typography); 
```

对于上面的脚本，正如我所尝试的/我放置的地方，它不起作用。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T08:09:50.087

```
 $typography = str_replace(' ','+',$typography); 
```

应该

```
 $typography = str_replace('+',' ',$typography); 
```

为了用 a 替换`+`a`space`

[http://php.net/manual/en/function.str-replace.php](http://php.net/manual/en/function.str-replace.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T08:12:55.517

str_replace 函数的前 2 个参数是向后的。此外，如果您希望它在回显*之前*进行替换，那么您必须在回显之前进行替换。

如果您只需要为“面部”键完成替换，那么您可以执行以下操作：

```
<style>
<?php $typography = of_get_option('main-text');
if ($typography)
{    
    $typography['face'] = str_replace('+', ' ', $typography['face']); 

    echo 'p {
        font: ' . $typography['size']. ' '.$typography['face'] . '; 
        font-style: ' . $typography['style'] . '; 
        color: '.$typography['color'].';    
    }';
} 
?>
</style> 
```

# python - Python、XML、é 类型编码

> ID：13928765
> 
> 赞同：0
> 
> 时间：2012-12-18T08:09:19.333
> 
> 标签：python, xml, unicode

> **可能重复：**
> [在 Python 中将 XML/HTML 实体转换为 Unicode 字符串](https://stackoverflow.com/questions/57708/convert-xml-html-entities-into-unicode-string-in-python)

我正在使用 Python 阅读一个 excel XML 文档。我最终得到了很多字符，例如 é

代表各种重音字母（等）。有没有一种简单的方法可以将这些字符转换为 utf-8？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T08:21:52.337

如果您只想将 HTML 实体解析为其 unicode 等效项：

```
>>> import HTMLParser
>>> parser = HTMLParser.HTMLParser()
>>> parser.unescape('&#233;')
u'\xe9'
>>> print parser.unescape('&#233;')
é 
```

这适用于 Python 2.x，对于 3.x，导入是`import html.parser`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T18:34:28.490

使用这个 QandA 和另一个的提示，我有一个似乎可行的解决方案。它需要整个文档并从文档中删除所有 html 实体。

```
import re
import HTMLParser

regexp = "&.+?;" 
list_of_html = re.findall(regexp, page) #finds all html entites in page
for e in list_of_html:
    h = HTMLParser.HTMLParser()
    unescaped = h.unescape(e) #finds the unescaped value of the html entity
    page = page.replace(e, unescaped) #replaces html entity with unescaped value 
```

# android - 如何在android中获取Web服务方法的URL？

> ID：13928766
> 
> 赞同：0
> 
> 时间：2012-12-18T08:09:24.103
> 
> 标签：android, web-services, ksoap2

我必须将 XML 写入我的 SD 卡，因为我想获取 input-Stream 但要确定这一点，当我从 android 调用任何方法时如何获取 URL？

例如，当我从android调用该方法时，我想下载包含10,000条记录的所有登录详细信息，但是如何获取URL以便我可以建立连接并获取输入流以写入文件...请在下面帮助我是我的代码

```
public void DownloadFiles(){

    try {
        URL url = new URL("http://192.168.0.10/INIFARM/fieldbook/webservice1.asmx?wsdl");
        URLConnection conexion = url.openConnection();
        conexion.connect();
        int lenghtOfFile = conexion.getContentLength();
        InputStream is = url.openStream();
        File testDirectory = new File("/data/data/com.example.androidwebservice/");
        if (!testDirectory.exists()) {
            testDirectory.mkdir();
        }
        FileOutputStream fos = new FileOutputStream(testDirectory + "/response.xml");
        byte data[] = new byte[1024];
        int count = 0;
        long total = 0;
        int progress = 0;
        while ((count = is.read(data)) != -1) {
            total += count;
            int progress_temp = (int) total * 100 / lenghtOfFile;
            if (progress_temp % 10 == 0 && progress != progress_temp) {
                progress = progress_temp;
            }
            fos.write(data, 0, count);
        }
        is.close();
        fos.close();
        Log.v(TAG, "File is Downloaded Successfully");
    } catch (MalformedURLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T08:16:42.657

你的意思是要调用的URL？您的 Web 服务器管理员需要为此创建一个 REST API 并告诉您 url，以便您的应用程序可以通过查询此 API 来使用数据。

# java - 将 rapidminer 实现为 java 应用程序

> ID：13928769
> 
> 赞同：0
> 
> 时间：2012-12-18T07:33:52.347
> 
> 标签：java, rapidminer, user-interface

使用 rapidminer 5.2 设计了一个决策树模型 我想使用 java 实现和查看结果 我使用从 rapidminer 生成的 xml 并在 java 中作为 process.run() 运行过程 但我想使用 java 查看我的决策树

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T15:11:08.277

试试这个例子：

```
package rm.rapidi.com;

import java.awt.Color;
import java.awt.Graphics2D;
import java.awt.image.BufferedImage;
import java.io.IOException;
import java.util.List;

import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JScrollPane;

import com.rapidminer.Process;
import com.rapidminer.RapidMiner;
import com.rapidminer.RapidMiner.ExecutionMode;
import com.rapidminer.RepositoryProcessLocation;
import com.rapidminer.gui.renderer.Renderer;
import com.rapidminer.gui.renderer.RendererService;
import com.rapidminer.operator.IOContainer;
import com.rapidminer.operator.IOObject;
import com.rapidminer.operator.OperatorException;
import com.rapidminer.report.Renderable;
import com.rapidminer.report.Reportable;
import com.rapidminer.repository.Entry;
import com.rapidminer.repository.ProcessEntry;
import com.rapidminer.repository.RepositoryException;
import com.rapidminer.repository.RepositoryLocation;
import com.rapidminer.tools.XMLException;

public class PlotterTest {

public static void main(String[] args) {
    RapidMiner.setExecutionMode(ExecutionMode.EMBEDDED_WITHOUT_UI);
    RapidMiner.init();
    JFrame frame = new JFrame("Decision Tree Renderer Test");
    frame.setLocation(0, 0);
    JLabel label = new JLabel();
    frame.add(new JScrollPane(label));
    try {
        RepositoryLocation location;
        RapidMiner.setExecutionMode(ExecutionMode.COMMAND_LINE);
        RapidMiner.init();
        location = new RepositoryLocation("//RapidMinerRepository/PlotterTest");
        Entry entry = location.locateEntry();
        if (entry instanceof ProcessEntry) {
            Process process = new RepositoryProcessLocation(location).load(null);

            IOContainer ioResult = process.run();
            IOObject result = ioResult.getElementAt(0); // or whatever index you need
            String name = RendererService.getName(result.getClass());
            List<Renderer> renderers = RendererService.getRenderers(name);
            for (Renderer renderer : renderers) { // you don't really need to
                // iterate over this, it's
                // probably only one anyway
                // ;)
                IOContainer dummy = new IOContainer();
                // edit size of image here
                int imgWidth = 1600;
                int imgHeight = 950;
                Reportable reportable = renderer.createReportable(result, dummy, imgWidth, imgHeight);
                if (reportable instanceof Renderable) {
                    Renderable renderable = (Renderable) reportable;
                    renderable.prepareRendering();
                    int preferredWidth = renderable.getRenderWidth(800);
                    int preferredHeight = renderable.getRenderHeight(800);
                    final BufferedImage img = new BufferedImage(imgWidth, imgHeight, BufferedImage.TYPE_INT_RGB);
                    Graphics2D graphics = (Graphics2D) img.getGraphics();
                    graphics.setColor(Color.WHITE);
                    graphics.fillRect(0, 0, imgWidth, imgHeight);
                    // scale to whatever you need
                    graphics.scale(2, 2);
                    renderable.render(graphics, preferredWidth, preferredHeight);
                    label.setIcon(new ImageIcon(img));
                }
            }
        }
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (XMLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (OperatorException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (RepositoryException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    frame.setVisible(true);
    frame.pack();
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
}

} 
```

使用以下 XML（或类似的）：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<process version="5.3.005">
  <context>
    <input/>
    <output/>
    <macros/>
  </context>
  <operator activated="true" class="process" compatibility="5.3.005" expanded="true" name="Process">
    <process expanded="true">
      <operator activated="true" class="retrieve" compatibility="5.3.005" expanded="true" height="60" name="Retrieve" width="90" x="45" y="75">
        <parameter key="repository_entry" value="//Samples/data/Sonar"/>
      </operator>
      <operator activated="true" class="decision_tree" compatibility="5.3.005" expanded="true" height="76" name="Decision Tree" width="90" x="179" y="75"/>
      <connect from_op="Retrieve" from_port="output" to_op="Decision Tree" to_port="training set"/>
      <connect from_op="Decision Tree" from_port="model" to_port="result 1"/>
      <portSpacing port="source_input 1" spacing="0"/>
      <portSpacing port="sink_result 1" spacing="0"/>
      <portSpacing port="sink_result 2" spacing="0"/>
    </process>
  </operator>
</process> 
```

# c# - Simplemembership 实现匿名用户方法

> ID：13928771
> 
> 赞同：6
> 
> 时间：2012-12-18T08:09:42.897
> 
> 标签：c#, asp.net-mvc-4, simplemembership

Jon Galloway 有一个概述 - [http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5- web-forms-and-asp-net-mvc-4-templates.aspx](http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx) - ASP.NET MVC 4 中的新成员功能。 Internet 项目模板从 ASP.NET 的核心成员提供程序转移到SimpleMembershipProvider 和 OAuth。

关于 simplemembership，有谁知道是否可以使用开源[http://aspnetwebstack.codeplex.com/](http://aspnetwebstack.codeplex.com/)对其进行扩展，以便能够允许匿名用户存储在数据库中 - 可能在 userprofile 表中？

我检查了[http://msdn.microsoft.com/en-us/library/webmatrix.webdata.simplemembershipprovider](http://msdn.microsoft.com/en-us/library/webmatrix.webdata.simplemembershipprovider) simplemembership 提供程序类，但它的方法没有参考匿名标识。

如果不可能，是否有人知道有关构建 ExtendedMembershipProvider 的信息？brgds！

更新信息：来自 pro.asp.netmvc3 书。关于认证授权-

**启用匿名配置文件**： **默认情况下，配置文件数据仅适用于经过身份验证的用户，如果我们在当前用户尚未登录时尝试写入配置文件属性，则会引发异常。我们可以通过启用对匿名配置文件的支持来更改这一点，如清单所示22-17。启用匿名标识后，ASP.NET 框架将通过为匿名用户提供名为 .ASPXANONYMOUS 的 cookie 来跟踪匿名用户，该 cookie 在 10,000 分钟（大约 70 天）后过期。我们可以通过将 allowAnonymous 属性设置为 true 来启用对配置文件属性的匿名支持；在清单中，我们启用了对 Name 和 City 属性的匿名支持。启用匿名配置文件可以为未经身份验证的用户读取和写入配置文件数据，但请注意，**

我想在 simplemembership 中复制它。我不想使用旧的配置文件系统，因为它在 blob 中存储值。brgds！

* ***更新：清单 22-17：清单 22-17。启用对匿名配置文件的支持**

```
<configuration>
<system.web>
<anonymousIdentification enabled="true"/>
<profile>
<providers>
<clear/>
<add name="AspNetSqlProfileProvider"
type="System.Web.Profile.SqlProfileProvider"
connectionStringName="ApplicationServices"
applicationName="/" />
</providers>
<properties>
<add name="Name" type="String" allowAnonymous="true"/>
<group name="Address">
<add name="Street" type="String"/>
<add name="City" type="String" allowAnonymous="true"/>
<add name="ZipCode" type="String"/>
<add name="State" type="String"/>
</group>
</properties>
</profile>
</system.web>
</configuration> 
```

**启用匿名标识后，ASP.NET 框架将通过为匿名用户提供名为 .ASPXANONYMOUS 的 cookie 来跟踪匿名用户，该 cookie 在 10,000 分钟（大约 70 天）后过期。我们可以通过将 allowAnonymous 属性设置为 true 来启用对配置文件属性的匿名支持；在清单中，我们启用了对 Name 和 City 属性的匿名支持。****

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T13:50:42.197

我认为您所描述的场景是用户在应用程序中注册但可能没有确认、完成他们的个人资料或其他一些标准；在他们完成这些要求之前，他们被视为匿名用户，对应用程序的访问权限有限。我假设用户输入了一些最低限度的信息来识别用户，例如用户名和密码。

处理此问题的最简单方法可能是拥有一个所有新用户都会自动分配到的“匿名”角色。现在，您可以使用基本表单身份验证方法来限制对使用[AuthorizeAttribute](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute%28v=vs.108%29.aspx)的控制器/操作的访问。一旦用户完成了不匿名的标准，您就可以切换他们的角色或添加一个新角色以赋予他们完全访问权限。

如果用户是真正匿名的并且您无法识别他们，您仍然可以使用基于角色的授权和表单基础身份验证，通过使用[AllowAnonymousAttribute](http://msdn.microsoft.com/en-us/library/system.web.http.allowanonymousattribute%28v=vs.108%29.aspx)为您希望允许访问的区域装饰控制器/操作来提供受限访问。

***基于更新问题的更新答案***

看看[这个 ASP.NET 论坛中的答案](http://forums.asp.net/t/1768826.aspx/1?anonymous%20users%20with%20simplemembership)。基本上它的意思是您可以通过管理自己的 cookie 和自己的数据库模式来实现目标，但它不能作为 SimpleMembership 提供程序的一部分。

# facebook - 如何使 fql 查询更快？

> ID：13928775
> 
> 赞同：0
> 
> 时间：2012-12-18T08:09:53.997
> 
> 标签：facebook, facebook-fql, fql.multiquery

我正在尝试计算用户的朋友使用 fql 创建的所有事件，但它非常慢，大约需要 15 到 17 秒才能加载。

这是代码：

```
// Run FQL Multiquery to get all Friends => All Events => Created by Friends
$fql = $facebook->api('/fql?q={'
                     .'"allFriends":"SELECT+uid2+FROM+friend+WHERE+uid1=me()",' 
                     .'"allEvents":"SELECT+eid+FROM+event_member+WHERE+uid+IN+('
                                 . 'SELECT+uid2+FROM+#allFriends'
                                 . ')",'
                    .'"creators":"SELECT+creator+FROM+event+WHERE+eid+IN+(' 
                                       . 'SELECT+eid+FROM+#allEvents)"}'
                   . '&access_token='.$access_token); 
```

有没有更好的方法可以让它更快地返回？

提前谢谢你，罗伯特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T23:17:38.667

将朋友分成相对相等的部分（使用 LIMIT 和 OFFSET），然后在批处理调用中运行所有这些多查询。

# ruby-on-rails - 根据表单输入更改价格参数

> ID：13928781
> 
> 赞同：0
> 
> 时间：2012-12-18T08:10:31.557
> 
> 标签：ruby-on-rails, ruby

我有一个 Rails 表单，用户可以选择每小时或每天购买产品。我正在使用购物车来跟踪购买的每件商品。提交表单时，购物车会传递行项目对象。我需要根据用户选择每小时还是每天购买来更改商品的价格并更改为成本计算。我不是我应该如何测试参数以及是否应该在项目的模型或控制器中执行此操作。

我的代码如下。谢谢您的帮助！

**填写的表格**

```
<%= form_for LineItem.new do |f| %>
        <p><%= render :partial => "price" %> / 
            <%= f.select :day_or_hour, [['day', 'day'], ['hour', 'hour']], :id => 'day_or_hour' %>
    <div class="gearside_date_main">
        <h3 style="font-family: 'RockSaltRegular', 'JosefinSansStdLight', Helvetica, Arial, sans-serif;color: #71a41e; font-size: 16px; margin: 15px 0 5px 15px;">Rental Date</h3>      
            <%= f.text_field :rentstart, id: 'rentstart', :value => "Pickup"  %>
            <%= f.text_field :rentend, id: 'rentend', :value => "Drop Off"  %>
            <%= image_tag('calendar.png', :style => "float:left; padding-top: 8px") %>
            <%= f.hidden_field :gear_id, :value => @gear.id %>
            </br></br>
            <div class="gear_time_schedule hourlyshowhide">
            <span class="gear_time_schedule_container">
                <%= f.label :starthour, 'Pick Up Time', class: 'labeltext' %>
                <%= f.text_field :starthour, id: 'starthour',  :value => '' %>
            </span>
            <span class="gear_time_schedule_container">
                <%= f.label :endhour, 'Drop Off Time', class: 'labeltext' %>
                <%= f.text_field :endhour, id: 'endhour', :value => '' %>
            </span>
        </div>
            <%= f.submit "", id: 'rent_it' %>
        <% end %> 
```

**齿轮型号**

```
class Gear < ActiveRecord::Base
  belongs_to :user
  has_many :line_items

  def hourly_price
    price/24
  end
end 
```

**订单项模型**

```
class LineItem < ActiveRecord::Base
  belongs_to :cart
  belongs_to :gear

  def total_price
    gear.price * quantity
  end

  def set_rentprice price
   self.rentprice = price
  end

end 
```

**行项目数据库中的参数**

```
 `id` int(11) NOT NULL AUTO_INCREMENT,
  `gear_id` int(11) DEFAULT NULL,
  `cart_id` int(11) DEFAULT NULL,
  `created_at` datetime NOT NULL,
  `updated_at` datetime NOT NULL,
  `quantity` int(11) DEFAULT '1',
  `rentstart` date DEFAULT NULL,
  `rentend` date DEFAULT NULL,
  `rentprice` decimal(10,0) DEFAULT NULL,
  `starthour` varchar(255) DEFAULT NULL,
  `endhour` varchar(255) DEFAULT NULL,
  `day_or_hour` varchar(255) DEFAULT NULL,
  `order_id` int(11) DEFAULT NULL, 
```

**在 LineItem 控制器中创建操作**

```
 def create
    @cart = current_cart
    case params[:day_or_hour]
     when 'day'
      price = Gear.weekly_price
     when 'hour'
      price = Gear.hourly_price # these methods have to be converted to class methods
    end
    gear = Gear.find(params[:line_item][:gear_id])
lineitem = LineItem.new(params[:line_item])
lineitem.set_rentprice price
@line_item = @cart.add_gear(lineitem, gear.id)

        respond_to do |format|
          if @line_item.save
            format.html { redirect_to @line_item.cart }
            format.json { render json: @line_item, status: :created, location: @line_item }
          else
            format.html { render action: "new" }
            format.json { render json: @line_item.errors, status: :unprocessable_entity }
          end
        end
      end 
```

**购物车型号**

```
class Cart < ActiveRecord::Base
  has_many :line_items, dependent: :destroy

  def add_gear(lineitem, gear_id)
    current_item = line_items.find_by_gear_id(gear_id)
    if current_item
      current_item.quantity += 1
    else
      current_item = line_items.build(lineitem)
    end
    current_item
  end

  def total_price
    line_items.to_a.sum { |item| item.total_price }
  end 
```

结尾

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T08:24:52.940

请允许我建议一个重构因素。

这看起来像是多对多关联的良好候选者。安装[nested_form](https://github.com/ryanb/nested_form) gem。有关嵌套表单的更多信息，请查看[railscasts](http://railscasts.com/episodes?utf8=%E2%9C%93&search=nested+form)

```
class Cart < ActiveRecord::Base
 has_many :line_items
 has_many :gears, through: line_items

 attr_accessible :line_items_attributes

 accepts_nested_attributes_for :line_items

 def total_price
  gears.sum(:price)
 end
end

class Gear < ActiveRecord::Base
 has_many :line_items
 has_many :carts, through: line_items
end

class LineItem < ActiveRecord::Base
 belongs_to :cart
 belongs_to :gear

 attr_accessible :cart_id, :gear_id
end 
```

现在，在您的购物车控制器中

```
def new
 @cart = Cart.new
end 
```

我使用[simple_form](https://github.com/plataformatec/simple_form)来获得更清晰的视图。你应该考虑使用它。

**Nested_form 将负责通过 jquery 添加和删除项目 :)**

```
<%= simple_nested_form_for @cart do |f| %>
  <%= f.simple_fields_for :line_items do |item| %>
   <%= item.input :rentstart %>
   <%= item.input :rentend %>

   #Select your gear like this
   <%= item.association :gear, as: :collection, label_method: :gear.nameorwhatever, value_method: :gear.id %>

   #Remove items using this link
   <%= item.link_to_remove "Remove this task" %>
  <% end %>

  #Add new item
  <p><%= f.link_to_add "Add an item", :tasks %></p>
<% end %> 
```

您的购物车控制器的创建操作将是标准的。Accepts_nested_attributes for 会神奇地更新你的 lineItems。

# c# - 将 TFS 数据迁移到 SQL Server 2008 以进行报告

> ID：13928788
> 
> 赞同：0
> 
> 时间：2012-12-18T08:11:12.507
> 
> 标签：c#, asp.net, tfs

我们正在开发一个报告系统，它实际上整合了来自不同系统（如 TFS、svn 等）的项目相关数据（错误、问题、测试用例），以便管理人员可以对任何项目进行不同类型的报告。

为此，我们希望将 TFS 数据移动到我们的 SQL Server 数据库，因为根据我们的理解，我们无法在生产环境中直接访问 TFS 数据库。

我们可以使用 TFS api 来传输数据还是任何其他有效的方法可用？

请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T08:12:26.883

TFS 在 SQL Server 上运行。只要您拥有必要的权限，您就可以访问它。

# c++ - 将cout从c ++中的各种来源重定向到同一个文件

> ID：13928789
> 
> 赞同：2
> 
> 时间：2012-12-18T08:11:14.417
> 
> 标签：c++, cout, output

我的问题是我在项目的各种文件中有几个 cout。我希望将它们全部重定向并保存在**.txt**文件中，而我现在实现的是文件中只保存了一个 cout。我不想为每个**cout创建单独的****.txt**，以便一次阅读它们。我的代码现在看起来像这样：

 **```
#include <fstream>
#include <string>
#include <iostream>

int main()
{
    std::ofstream out("out.txt");
    std::cout.rdbuf(out.rdbuf()); 

    std::cout << "get it3";
    std::cout << "get it4"; 
} 
```

两个**cout**都在一个文件中，但假设它们在两个不同的文件中，如何重定向并保存在一个**.txt**中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T09:00:46.237

显而易见的答案是你永远不应该输出到 `std::cout`. 所有实际输出都应该是一个`std::ostream&`，默认情况下可以设置为`std::cout`，但您也可以将其初始化为其他内容。

另一个明显的答案是重定向应该在开始该过程之前完成。

但是，假设您无法将代码输出更改为`std::cout`，并且您无法控制程序的调用（或者您只想更改某些输出），您可以`std::cout`通过附加不同的`streambuf`. 在这种情况下，我也会使用 RAII，以确保当您退出时，`std::cout`具有它期望的 streambuf。但是类似下面的东西应该可以工作：

```
class TemporaryFilebuf : public std::filebuf
{
    std::ostream&   myStream;
    std::streambuf* mySavedStreambuf;
public:
    TemporaryFilebuf(
            std::ostream& toBeChanged,
            std::string const& filename )
        : std::filebuf( filename.c_str(), std::ios_base::out )
        , myStream( toBeChanged )
        , mySavedStreambuf( toBeChanged.rdbuf() )
    {
        toBeChanged.rdbuf( this );
    }
    ~TemporaryFilebuf()
    {
        myStream.rdbuf( mySavedStreambuf );
    }
}; 
```

（您可能需要添加一些错误处理；例如，如果您无法打开文件。）

当您进入要重定向输出的区域时，只需使用流（`std::cout`或任何其他 `ostream`）和文件名创建一个实例。当实例被破坏时，输出流将恢复输出到它之前输出的任何位置。**

# javascript - 富文本编辑器不适用于 Firefox

> ID：13928796
> 
> 赞同：0
> 
> 时间：2012-12-18T08:11:49.497
> 
> 标签：javascript, rich-text-editor

```
<html>
<head>
<title>Rich Text Editor</title>
</head>
<body onLoad="def()"><center>
<div style="width:500px; text-align:left; margin-bottom:10px ">
<input type="button" id="bold" style="height:21px; width:21px; font-weight:bold;" value="B" onClick="fontEdit('bold')" />
<input type="button" id="italic" style="height:21px; width:21px; font-style:italic;" value="I" onClick="fontEdit('italic')" />
<input type="button" id="underline" style="height:21px; width:21px; text-decoration:underline;" value="U" onClick="fontEdit('underline')" /> | 
<input type="button" style="height:21px; width:21px;"value="L" onClick="fontEdit('justifyleft')" title="align left" />
<input type="button" style="height:21px; width:21px;"value="C" onClick="fontEdit('justifycenter')" title="center" />
<input type="button" style="height:21px; width:21px;"value="R" onClick="fontEdit('justifyright')" title="align right" /> | 
<select id="fonts" onChange="fontEdit('fontname',this[this.selectedIndex].value)">
<option value="Arial">Arial</option>
<option value="Comic Sans MS">Comic Sans MS</option>
<option value="Courier New">Courier New</option>
<option value="Monotype Corsiva">Monotype</option>
<option value="Tahoma">Tahoma</option>
<option value="Times">Times</option>
</select>
<select id="size" onChange="fontEdit('fontsize',this[this.selectedIndex].value)">
<option value="1">1</option>
<option value="2">2</option>
<option value="3">3</option>
<option value="4">4</option>
<option value="5">5</option>
</select>
<select id="color" onChange="fontEdit('ForeColor',this[this.selectedIndex].value)">
<option value="black">-</option>
<option style="color:red;" value="red">-</option>
<option style="color:blue;" value="blue">-</option>
<option style="color:green;" value="green">-</option>
<option style="color:pink;" value="pink">-</option>
</select> | 
<input type="button" style="height:21px; width:21px;"value="1" onClick="fontEdit('insertorderedlist')" title="Numbered List" />
<input type="button" style="height:21px; width:21px;"value="?" onClick="fontEdit('insertunorderedlist')" title="Bullets List" />
<input type="button" style="height:21px; width:21px;"value="?" onClick="fontEdit('outdent')" title="Outdent" />
<input type="button" style="height:21px; width:21px;"value="?" onClick="fontEdit('indent')" title="Indent" />
</div>
<iframe id="textEditor" style="width:500px; height:170px;">
</iframe>
</center>
<script type="text/javascript">
<!--
textEditor.document.designMode="on";
textEditor.document.open();
textEditor.document.write('<head><style type="text/css">body{ font-family:arial; font-size:13px;}</style></head>');
textEditor.document.close();
function def()
{
document.getElementById("fonts").selectedIndex=0;
document.getElementById("size").selectedIndex=1;
document.getElementById("color").selectedIndex=0;
}
function fontEdit(x,y)
{
textEditor.document.execCommand(x,"",y);
textEditor.focus();
}
-->
</script>
</body>
</html> 
```

我在网上浏览了这些代码。但我无法让它在 Firefox 上运行。我已经阅读了一些关于这个编辑器的评论，它指出这可能是由于 iframe。

如果有帮助，这是我的来源，[文本编辑器链接](http://www.geekpedia.com/tutorial198_Creating-a-Rich-Text-Editor-using-JavaScript.html)

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T08:47:52.737

```
<html>
    <head>
       <title>Rich Text Editor</title>
    </head>

    <script type="text/javascript">
    function def()
    {
        document.getElementById("textEditor").contentWindow.document.designMode="on";
        textEditor.document.open();
        textEditor.document.write('<head><style type="text/css">body{ font-family:arial; font-size:13px;}</style></head>');
        textEditor.document.close();
        document.getElementById("fonts").selectedIndex=0;
        document.getElementById("size").selectedIndex=1;
        document.getElementById("color").selectedIndex=0;
    }
    function fontEdit(x,y)
    {
        document.getElementById("textEditor").contentWindow.document.execCommand(x,"",y);
        textEditor.focus();
    }
    </script>

    <body onLoad="def()">
        <center>
            <div style="width:500px; text-align:left; margin-bottom:10px ">
                <input type="button" id="bold" style="height:21px; width:21px; font-weight:bold;" value="B" onClick="fontEdit('bold')" />
                <input type="button" id="italic" style="height:21px; width:21px; font-style:italic;" value="I" onClick="fontEdit('italic')" />
                <input type="button" id="underline" style="height:21px; width:21px; text-decoration:underline;" value="U" onClick="fontEdit('underline')" /> | 
                <input type="button" style="height:21px; width:21px;"value="L" onClick="fontEdit('justifyleft')" title="align left" />
                <input type="button" style="height:21px; width:21px;"value="C" onClick="fontEdit('justifycenter')" title="center" />
                <input type="button" style="height:21px; width:21px;"value="R" onClick="fontEdit('justifyright')" title="align right" /> | 
                <select id="fonts" onChange="fontEdit('fontname',this[this.selectedIndex].value)">
                    <option value="Arial">Arial</option>
                    <option value="Comic Sans MS">Comic Sans MS</option>
                    <option value="Courier New">Courier New</option>
                    <option value="Monotype Corsiva">Monotype</option>
                    <option value="Tahoma">Tahoma</option>
                    <option value="Times">Times</option>
                </select>
                <select id="size" onChange="fontEdit('fontsize',this[this.selectedIndex].value)">
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                </select>
                <select id="color" onChange="fontEdit('ForeColor',this[this.selectedIndex].value)">
                    <option value="black">-</option>
                    <option style="color:red;" value="red">-</option>
                    <option style="color:blue;" value="blue">-</option>
                    <option style="color:green;" value="green">-</option>
                    <option style="color:pink;" value="pink">-</option>
                </select> | 
                <input type="button" style="height:21px; width:21px;"value="1" onClick="fontEdit('insertorderedlist')" title="Numbered List" />
                <input type="button" style="height:21px; width:21px;"value="?" onClick="fontEdit('insertunorderedlist')" title="Bullets List" />
                <input type="button" style="height:21px; width:21px;"value="?" onClick="fontEdit('outdent')" title="Outdent" />
                <input type="button" style="height:21px; width:21px;"value="?" onClick="fontEdit('indent')" title="Indent" />
            </div>
            <iframe id="textEditor" style="width:500px; height:170px;">
            </iframe>
        </center>

    </body>
</html> 
```

# ios4 - 带有 SVGKIT 的地理地图

> ID：13928800
> 
> 赞同：2
> 
> 时间：2012-12-18T08:12:12.960
> 
> 标签：ios4, svg, calayer, cashapelayer

我正在尝试将 SVGKit (https://github.com/SVGKit/SVGKit) 用于处理地理地图的 iOS 项目。

此时，我可以使用 CALayer 对象访问地图上的特定区域。这让我可以访问该区域周围的矩形。

这是我用于此的代码：

```
CALayer *layer=[svgView.document layerWithIdentifier:@"myLayerID"];
[layer setBackgroundColor:[UIColor orangeColor].CGColor];

if( [layer isKindOfClass:[CAShapeLayer class]] )
{
    CAShapeLayer* shapeLayer = (CAShapeLayer*) layer;
    NSLog(@"That is good so far!");
    layer.mask=shapeLayer;
} 
```

但我需要访问地图的精确区域；不仅是周围的矩形，为了突出它。我有一种阅读我应该使用 CGPathRef 和面具。

我该怎么做？

感谢您的任何提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T18:12:48.903

当您找到 CALayer 时，将其转换为 CAShapeLayer（如果可以；如果您有正确的层，这应该可以正常工作）。

```
if( [layer isKindOfClass:[CAShapeLayer class]] )
{
   CAShapeLayer* shapeLayer = (CAShapeLayer*) layer;

   // Now you have access to lots more Apple methods
} 
```

然后你可以改变线宽、填充颜色等——各种时髦的东西。

还可以查看 CALayer.shadow* - Apple 提供的各种功能，这些功能将自动突出显示图层的可见部分。

# wordpress - 如何访问 Wordpress 用户功能

> ID：13928808
> 
> 赞同：0
> 
> 时间：2012-12-18T08:12:59.337
> 
> 标签：wordpress

我正在编写一个小 php 文件，该文件通过插件的 js 文件中的 ajax 调用以更新用户的角色。文件看起来像这样...

```
include "../../../../wp-includes/pluggable.php";
global $current_user;
get_currentuserinfo();
$u = new WP_User( $current_user->ID );
$u->add_role( 'trainer3' ); 
```

pluggable 是包含 get_currentuser() 函数的模块。但我收到了额外的错误（is_ssl() not found）。我需要包含哪些其他 Wordpress 模块才能访问当前用户对象？我使用的插件不是我写的。看起来好像它们没有包含任何 Wordpress 钩子。此代码在 woocommerce 等其他插件中运行良好。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T08:25:51.817

改为包含`wp-load.php`，或者最好使用 Wordpress ajax 操作

[http://codex.wordpress.org/AJAX_in_Plugins](http://codex.wordpress.org/AJAX_in_Plugins)

# linux - 如何在多个服务器中搜索目录？

> ID：13928810
> 
> 赞同：1
> 
> 时间：2012-12-18T08:13:26.897
> 
> 标签：linux, search, directory

我们为多台机器上的用户定义了主文件夹。但是其中一台服务器中缺少主文件夹。如何找出哪个服务器缺少主文件夹？

例如用户名为：my_user 有服务器：host1,host2,host3,host4

/home/my_user 在其中一台机器中丢失。

也许是这样的：

对于主机 1、主机 2、主机 3；等等等等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T08:57:36.400

使用如下所示的`for`循环：`ssh`

```
for host in host1 host2 host3
do
    ssh "$host" '[ ! -d /home/my_user ] && echo "Does not exist on $(hostname)"'
done 
```

# c# - XmlSerializer、GenerateSerializer 和集合

> ID：13928812
> 
> 赞同：8
> 
> 时间：2012-12-18T08:13:29.670
> 
> 标签：c#, xml-serialization

我们的项目中有一些设置类，它们使用来自一些 .config-Files 的 XmlSerializer 进行序列化/反序列化。在其中一些设置类中，我们有如下子设置的集合：

```
using System;
using System.Collections.ObjectModel;
using System.Xml.Serialization;

namespace Datev.Framework.Shared.Actions.Setup
{
    [Serializable]
    [XmlSerializerAssembly]
    [XmlRoot("setup")]
    public class SetupXml
    {
        public SetupXml()
        {
            SubSetups = new Collection<SubSetupXml>();
        }

        [XmlArray("subSetups")]
        [XmlArrayItem("subSetup")]
        public Collection<SubSetupXml> SubSetups { get; private set; }
    }

    [Serializable]
    public class SubSetupXml
    {
        [XmlElement("someValue")]
        public string SomeValue { get; set; }
    }
} 
```

我们使用属性 [XmlSerializerAssembly] 来获得读取和写入设置的最佳性能。这是我的问题：我们正在使用 Collection 来避免 CA 警告“不要使用数组”。当我们公开 SubSetups 的设置器时，我们会收到 CA-Warning CA2227“不要公开集合的设置器”。如果我们将属性 SubSetups 的设置器设为私有（就像在代码示例中一样），我们将在生成的序列化程序中得到一个错误。方法“GenerateSerializer”（在我们的工具中调用）代码有这样一行：

```
if (o.SubSetups == null) o.SubSetups = new Collection<SubSetupXml>(); 
```

如果我们将设置器设为私有，我们将在构建序列化器期间获得 CS0200“无法分配属性子设置”。有谁知道如何在不抑制 CA 警告的情况下使用生成的序列化程序进行正确设置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T11:11:43.960

很难说：“正确”的设置很大程度上取决于上下文。一个快速的想法：如果将逻辑从“GenerateSerializer”移动到属性获取器会发生什么？可以接受吗？

```
[XmlArray("subSetups")]
[XmlArrayItem("subSetup")]
public Collection<SubSetupXml> SubSetups { 
   get {
      // subSetups needs to be a backing (private) field... is this a problem?
      if (this.subSetups == null) this.subSetups = new Collection<SubSetupXml>();
   }
   private set; 
} 
```

这样，在“GenerateSerializer”中你就得到了集合。如果该集合尚未创建，它将位于 getter 内部，而无需在类外部创建它。只是一个想法，让我知道它是否不适用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T15:32:10.110

如果情况像看起来那么简单，那么您不需要检查是否`(o.SubSetups == null)`因为您`SubSetups = new Collection<SubSetupXml>();`在`SetupXml()`构造函数中有该行（当然，如果`o`是类型`SetupXml`）。如果您`if`从方法中删除该语句`GenerateSerializer`并将设置器设为私有您应该没问题 -除非有其他一些您没有提到的弄乱它的方法，否则该`SubSetups`属性是不可能的......`null`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-31T15:00:00.543

你可以有这样的东西：

```
 public class SetupXml
    {
        public SetupXml()
        {
            SubSetups = new Collection<SubSetupXml>();
        }

        [XmlIgnore]
        public Collection<SubSetupXml> SubSetups { get; private set; }

        [EditorBrowsable(EditorBrowsableState.Never)]
        [GeneratedCodeAttribute("Whatever", "1.0.0.0")]
        [XmlArray("subSetups")]
        [XmlArrayItem("subSetup")]          
        public SubSetupXml[] SerializationSubSetups
        {
            get
            {
                return SubSetups.ToArray();
            }
            get
            {
                SubSetups = new SubSetups();
                if (value != null)
                {
                    foreach(SubSetupXml ssx in value)
                    {
                        SubSetups.Add(ssx);
                    }
                }
            }
        }
    } 
```

它并不完美，但[EditorBrowsable](http://msdn.microsoft.com/library/system.componentmodel.editorbrowsableattribute.aspx)属性将阻止开发人员使用此库（来自另一个程序集）看到它由智能感知/自动完成工具显示。GeneratedCode 属性将阻止对其发出 CA 警告。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-01T17:32:44.847

我假设您已经查阅过这篇文章？ [http://msdn.microsoft.com/en-us/library/ms182327.aspx](http://msdn.microsoft.com/en-us/library/ms182327.aspx)

这让我觉得那篇文章中有一个重要说明：“二进制和 XML 序列化都支持作为集合的只读属性。System.Xml.Serialization.XmlSerializer 类对实现 ICollection 和 System.Collections.IEnumerable 的类型有特定要求为了可序列化。”

除此之外，您可以使用 .Clear() 和 .AddRange() 方法取得更多进展，详见那里。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-02T20:20:51.660

您可以尝试实现 IXmlSerializable 接口。它需要更多的工作，但它可以让您很好地控制序列化，并在您的情况下访问私有类变量。在 ReadXml 方法中，您只需创建集合的实例，遍历源 xml 中的每个节点并解析值

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-01-30T18:29:11.267

将 SubSetups 的类型更改为`IEnumerable`将消除代码分析警告，但我不知道这是否适合您。

```
 [XmlArray("subSetups")]
    [XmlArrayItem("subSetup")]
    public IEnumerable<SubSetupXml> SubSetups { get; set; } 
```

# html - css“内容”中的SGML

> ID：13928814
> 
> 赞同：0
> 
> 时间：2012-12-18T08:13:42.537
> 
> 标签：html, css

是否可以使用 css`:before { content:"" }`语句输出 SGML 字符？

这不起作用：

```
span:before { content:"&radic;" } 
```

逃避似乎也不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T08:39:38.867

你的意思是 SGML/HTML 实体？

不，该`content`物业不接受加价；在这种情况下，您需要使用实际的 Unicode 字符 √ 或其对应的转义序列：

```
span:before { content:"\221A" } 
```

# php - 将数据发送到另一个数据库服务器？

> ID：13928815
> 
> 赞同：1
> 
> 时间：2012-12-18T08:13:43.547
> 
> 标签：php, mysql, webserver

我有一个与数据库连接的网站。当我填写表格时，php 脚本会将数据发送到数据库。网站和数据库在同一台服务器上。要将数据存储在我使用的数据库中：

```
 $con=mysql_connect('localhost',$id,$password);
    mysql_select_db($dabase,$con);
    $query=mysql_query($queryToRun); 
```

这就是我将数据发送到数据库的方式。现在我想将相同的表单存储在存储在另一台服务器上的数据库中。有可能吗，如果是，那怎么办？非常感谢任何形式的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T08:16:28.623

输入数据库服务器正在侦听请求的服务器的 IP 地址/主机名，而不是“localhost”。为了使其正常工作，该数据库服务器还必须允许来自“本地主机”外部的请求

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T08:17:16.040

远程数据库需要配置为允许远程连接。看到[这个问题](https://stackoverflow.com/questions/8380797/enable-remote-mysql-connection)。

设置完成后，您只需在`mysql_connect()`调用中设置服务器 IP/主机名，而不是`localhost`.

旁注：`mysql_*`API 已弃用，建议升级到 MySQLi 或 PDO。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T08:20:54.597

您可以只创建两组并发连接变量并将查询发送到有问题的两个数据库服务器。例如，您可以：

```
 $dbConn1 = mysql_connect('address-of-the-first-database-server', 
  $userName1, $password1);
  mysql_select_db($dbName1, $dbConn1);

  $dbConn2 = mysql_connect('address-of-the-second-database-server', 
  $userName2, $password2);
  mysql_select_db($dbName2, $dbConn2);

  $execQuery = mysql_query($queryToRun, $dbConn1);
  $execQuery = mysql_query($queryToRun, $dbConn2); 
```

PS：我还建议为您的变量使用更具描述性的名称，因为这基本上让编程感觉像是在编写结构化的英语。

# php - yii：如何通过 ajax 从 cjuidialogbox 传递数据？

> ID：13928816
> 
> 赞同：0
> 
> 时间：2012-12-18T08:13:43.430
> 
> 标签：php, yii

问：如何通过 ajax 从 cjuidialogbox 传递数据？

状态：我通过 cjuidialogbox 创建了一个弹出框。当用户从弹出框的 cgridview 中选择客户名称时，通过 ajax 将客户代码传递给功能。堆叠在这里 url: \'' 。Yii::app()->createUrl("job/getjobno", array("c_code" => $data->c_code)) 。'\'，帮我传递数据。

这是 cjui 对话框

```
<?php 
$this->beginWidget('zii.widgets.jui.CJuiDialog',array(
                'id'=>'customerlist',
                'options'=>array(
                    'title'=>Yii::t('job','Customer List'),
                    'autoOpen'=>true,
                    'modal'=>'true',
                    'width'=>'750',
                    'height'=>'500',
                ),
                ));
echo $this->renderPartial('_listing', array('model'=>$model)); ?>
<?php $this->endWidget('zii.widgets.jui.CJuiDialog');?> 
```

这是_listing.php

```
<?php $this->widget('zii.widgets.grid.CGridView', array(
    'id'=>'customer-grid',
    'dataProvider'=>$model->search(),
    'filter'=>$model,
    'columns'=>array(
        'customer_name',
        array(
            'class'=>'CButtonColumn',
            'template'=>'{select}',
            'buttons'=>array
            (
                'select' => array
                (
                    'imageUrl'=>Yii::app()->request->baseUrl.'/protected/assets/images/gridview/icon_select.gif',
                    'options'=>array('style'=>'width:10px; border:none'),
                    'click'=>'function(){
                        var itemID = $(this).parents(\'tr\').find(\'.customer-id\').text();
                        //alert(itemID);
                        $.ajax({
                            url: \'' . Yii::app()->createUrl("job/getjobno", array("c_code" => $data->c_code)) . '\',
                            dataType: \'json\',
                            success: function(data){
                                var target = $(vNode).parents(\'tr\');
                                $("#Job_name").val(itemID); 
                                //console.log(\'target tr: \' + target);
                                //$(target).find(\'.item-price\').val(data.item_price);

                            }
                        });                     
                        $("#customerlist").dialog("close");

                    }',
                ),      
            ),
        ),
        array(
            'type'=>'raw',
            'value'=>'$data->c_code',
            //'filter'=>array('style'=>'visible:none'), 
            'headerHtmlOptions'=>array('style'=>'width:0px; display:none; border:none; textdecoration:none'),
            'htmlOptions'=>array('style'=>'display:none; border:none;', 'class'=>'customer-id'),  
            'header'=>false,
            'filter'=>false,
        ),
    ),
)); ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T09:25:57.990

试试这个方法：

```
<?php $this->widget('zii.widgets.grid.CGridView', array(
    'id'=>'customer-grid',
    'dataProvider'=>$model->search(),
    'filter'=>$model,
    'columns'=>array(
        'customer_name',
        array(
            'class'=>'CButtonColumn',
            'template'=>'{select}',
            'buttons'=>array
            (
                'select' => array
                (
                    'url'=>'Yii::app()->createUrl("job/getjobno", array("c_code"=>$data->c_code))', 
                    'imageUrl'=>Yii::app()->request->baseUrl.'/protected/assets/images/gridview/icon_select.gif',
                    'options'=>array('style'=>'width:10px; border:none'),
                    'click'=>'function(){
                        var itemID = $(this).parents(\'tr\').find(\'.customer-id\').text();
                        //alert(itemID);
                        $.ajax({
                            url:$(this).attr("href"),
                            dataType: \'json\',
                            success: function(data){
                                var target = $(vNode).parents(\'tr\');
                                $("#Job_name").val(itemID); 
                                //console.log(\'target tr: \' + target);
                                //$(target).find(\'.item-price\').val(data.item_price);

                            }
                        });                     
                        $("#customerlist").dialog("close");

                    }',
                ),      
            ),
        ),
        array(
            'type'=>'raw',
            'value'=>'$data->c_code',
            //'filter'=>array('style'=>'visible:none'), 
            'headerHtmlOptions'=>array('style'=>'width:0px; display:none; border:none; textdecoration:none'),
            'htmlOptions'=>array('style'=>'display:none; border:none;', 'class'=>'customer-id'),  
            'header'=>false,
            'filter'=>false,
        ),
    ),
)); ?> 
```

参考：

1.http://www.yiiframework.com/wiki/410/create-custom-button-button-with-ajax-function-in-cgridview/

2.http://www.yiiframework.com/wiki/106/using-cbuttoncolumn-to-customize-buttons-in-cgridview/

# java - 如何表示 Java Future 结果失败

> ID：13928818
> 
> 赞同：7
> 
> 时间：2012-12-18T08:14:03.583
> 
> 标签：java, future

如果我想并行执行资源密集型代码， AFAIK 提交`Callable`/`Runnable`到`ExecutorService`是要走的路。因此我的方法结构：

```
public class ServiceClass {
    protected final ExecutorService executorService = Executors.newCachedThreadPool();

    public Future<Result> getResult(Object params) {
        if (params == null) {
            return null; // In situations like this the method should fail
        }
        // Do other fast pre-processing stuff
        return executorService.submit(new CallProcessResult(params));
    }

    private class CallProcessResult implements Callable<Result> {
        private Object params;
        public CallProcessResult(Object params) {
            this.params = params;
        }
        @Override
        public Result call() throws Exception {
            // Compute result for given params
            // Failure may happen here too!
            return result;
        }
    }
}
public class Result {
    ...
} 
```

我在上面的代码中标记了两个可能发生故障的位置。对于这两种情况，可用于错误处理的选项完全不同。

**在提交任务之前**，可能会出现参数无效、一些可能会失败的快速预处理代码等问题。

我在这里看到了几种表示失败的方法：

1.  如果`params`提供无效，则`getResult`立即返回 null。在这种情况下，我`getResult`每次调用它时都必须检查是否返回 null。
2.  抛出已检查的异常而不是上述异常。
3.  实例化根据请求`Future<Result>`返回 null 的a。`get()`我会用 Apache Commons 做到这一点`ConcurrentUtils.constantFuture(null)`。在这种情况下，我希望`getResult`总是返回一些 non-null `Future<Result>`。我更喜欢这个选项，因为它与第二种情况一致。

**在任务执行期间**，我可能会遇到严重的错误，例如内存不足、文件损坏、文件不可用等。

1.  我想*在我的情况下*更好的选择是返回 null，因为任务的结果是一个对象。
2.  此外，我可以抛出检查异常并处理它们`ThreadPoolExecutor.afterExecute`（如 NiranjanBhat 所建议的那样）。请参阅[处理来自 Java ExecutorService 任务的异常](https://stackoverflow.com/questions/2248131/handling-exceptions-from-java-executorservice-tasks)

哪种做法更好（在这两种情况下）？

也许有不同的方法可以做到这一点，或者我应该使用一种设计模式？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-18T11:14:06.183

我建议对于任务处理过程中的失败，你只需抛出一个适当的异常。不要在执行程序中为此添加任何特殊处理。将会发生的是它将被捕获并存储在`Future`. 当`Future`'`get`方法被调用时，它会抛出一个`ExecutionException`，然后调用者`get`可以对其进行解包和处理。这本质上就是将普通异常处理转换为`Callable`/`Future`范式的方式。这看起来像这样：

```
 Future<Result> futureResult = serviceClass.getResult("foo");

    try {
        Result result = futureResult.get();
        // do something with result
    }
    catch (ExecutionException ee) {
        Throwable e = ee.getCause();
        // do something with e
    } 
```

鉴于调用者`get`必须对`ExecutionException`s 进行这种处理，您可以利用它来处理提交期间的失败。为此，您可以构造一个`Future`类似于 Apache Commons 的`constantFuture`，但它会抛出一个给定的异常而不是返回一个给定的值。我认为 JDK 中没有类似的东西，但编写起来很简单（如果乏味的话）：

```
public class FailedFuture<T> implements Future<T> {
    private final Throwable exception;

    public FailedFuture(Throwable exception) {
        this.exception = exception;
    }

    @Override
    public T get() throws ExecutionException {
        throw new ExecutionException(exception);
    }

    @Override
    public T get(long timeout, TimeUnit unit) throws ExecutionException {
        return get();
    }

    @Override public boolean cancel(boolean mayInterruptIfRunning) { return false; }
    @Override public boolean isCancelled() { return false; }
    @Override public boolean isDone() { return true; }
} 
```

这有点狡猾——你在同步调用的方法中失败了，在异步调用的方法中看起来像是失败了。您正在将处理错误的负担从实际导致错误的代码转移到稍后运行的某些代码上。尽管如此，这确实意味着您可以将所有故障处理代码放在一个地方。这可能足以使这变得有价值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T08:38:21.770

您可以使用[afterExecute](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ThreadPoolExecutor.html#afterExecute%28java.lang.Runnable,%20java.lang.Throwable%29)方法。这是在 ThreadPoolExecutor 中定义的，您需要覆盖它。
该方法在每个任务执行完成后调用。您将在此回调方法中获取任务实例。您可以在任务中的某个变量中记录错误并通过此方法访问它。

# facebook - 如何在 Meteor 中使用 accounts-facebook 获取用户的电子邮件地址？

> ID：13928823
> 
> 赞同：11
> 
> 时间：2012-12-18T08:14:30.200
> 
> 标签：facebook, meteor, user-accounts

我创建了一个允许用户使用 Facebook 登录的 Meteor 应用程序。为此，我使用了 accounts-ui 和 accounts-facebook 包。这工作正常。

用户登录后如何检索用户的电子邮件地址？我知道这需要特殊许可，因此我`email`在 Facebook 开发者网站的应用程序设置中添加了“用户和朋友的许可”。按照 Meteor 文档，我也这样设置`Account.ui.config`：

```
Accounts.ui.config({
  requestPermissions: {
    facebook: ['email'],
  },
  passwordSignupFields: 'USERNAME_AND_EMAIL'
}); 
```

正如预期的那样，当我的应用程序的用户使用 Facebook 登录时，它会正确地要求他们分享他们的电子邮件地址。但是我该如何找回呢？用户文档只有`_id`和`profile.name`。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-20T04:30:00.030

Facebook 用户的电子邮件地址存储在 中`[userDocument].services.facebook.email`，不会发布到客户端，但可以从服务器或客户端使用`Meteor.methods`and访问`Meteor.call`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T09:19:26.093

这会将 Facebook 个人资料信息添加到客户端用户对象。

```
Accounts.onCreateUser (options, user) ->    

    if options.profile
        user.profile = options.profile

        # get profile data from Facebook
        result = Meteor.http.get "https://graph.facebook.com/me", {
                  params: access_token: user.services.facebook.accessToken} 

        if  !result.error && result.data
            #if successfully obtained facebook profile, save it off
            #the user can access the profile object on the client
            user.profile.facebook = result.data;

    return user 
```

在服务器端可以访问 facebook.accesstoken...所以使用它来获取完整的 FB 信息并将其保存到客户端用户对象..

现在在控制台中 ping Meteor.user() 以获取 FB 信息。

不要认为这正是在客户端上拥有 FB 信息的最佳实践。

# c# - 重定向控制台输出（并非所有数据都重定向 C#）

> ID：13928824
> 
> 赞同：0
> 
> 时间：2012-12-18T08:14:39.970
> 
> 标签：c#, redirect, console

如果从控制台使用默认重定向

```
proc = new System.Diagnostics.Process();                    
proc.StartInfo.RedirectStandardOutput = true;
proc.StartInfo.RedirectStandardInput = true;
proc.StartInfo.RedirectStandardError = true;
proc.StartInfo.UseShellExecute = false;
proc.StartInfo.CreateNoWindow = true;

proc.OutputDataReceived += proc_OutputDataReceived;
proc.Exited += proc_Exited;
proc.ErrorDataReceived += proc_ErrorDataReceived;
proc.Start();
proc.BeginOutputReadLine();
proc.BeginErrorReadLine(); 
```

有问题（在Windows Git bash msysgit上测试）

1.  在 OutputDataReceived 中并非所有数据。

2.  在 OutputDataReceived 中没有文本颜色的数据。

3.  在 ErrorDataReceived 中出现错误数据。

屏幕截图：

git bash 控制台

[git bash 控制台](http://ase.com.ua/img2.jpg)

重定向数据

[重定向数据](http://ase.com.ua/img4.jpg)

问题：

1.  有没有办法通过重定向获得正确的数据？

2.  还有另一种从控制台获取正确数据的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T20:54:38.343

我没有找到正确的重定向控制台输入和输出。

我的任务解决方案：

1.  运行控制台应用程序。

    ```
    Process proc = new System.Diagnostics.Process();
    proc.StartInfo.FileName = "cmd.exe";
    proc.StartInfo.Arguments = "";
    proc.StartInfo.WorkingDirectory = "";
    proc.StartInfo.UseShellExecute = true;
    proc.StartInfo.CreateNoWindow = false;

    proc.Start();

    int count = 0;
    //wait console
    while (proc.MainWindowHandle == IntPtr.Zero)
    {
        Thread.Sleep(50);
        count++;
        if (count == 50)
            return;
    } 
    ```

2.  允许从控制台复制粘贴。

    ```
    //Attach to console
    DllImport.ConsoleFunctions.AttachConsole(proc.Id);
    //Get console output handle
    IntPtr cHandleO = DllImport.GetStdHandle(-11);
    //Set Quick edit Mode mode
    DllImport.SetConsoleMode(cHandleO, 0x0040);
    //Deattach from console
    DllImport.FreeConsole(); 
    ```

3.  在 Form 上查看控制台输出。

    ```
    //Set my Panle as console window parent 
    DllImport.SetParent(proc.MainWindowHandle, panelConsole.Handle);
    DllImport.SendMessage(proc.MainWindowHandle, 0x0112, 0xF030, 0);
    //Resize
    DllImport.SetWindowPos(proc.MainWindowHandle, IntPtr.Zero, 0, 0, panelConsole.Width,     
        panelConsole.Height, 0x0040);
    //Hide border and title
    DllImport.SetWindowLong(proc.MainWindowHandle, -16, 0x10000000 | 0x00200000); 
    ```

4.  将命令从 TextBox 发送到控制台。

    ```
    private DllImport.INPUT_RECORD[] PrepareData(string data)
    {
        DllImport.INPUT_RECORD[] rec = new DllImport.INPUT_RECORD[data.Length + 1];
        for (int i = 0; i < data.Length; i++)
        {
            rec[i].EventType = 0x0001;
            rec[i].KeyEvent = new DllImport.KEY_EVENT_RECORD();
            rec[i].KeyEvent.bKeyDown = true;
            rec[i].KeyEvent.dwControlKeyState = 0;
            rec[i].KeyEvent.UnicodeChar = data[i];
            rec[i].KeyEvent.wRepeatCount = 1;
            rec[i].KeyEvent.wVirtualKeyCode = data[i];
            rec[i].KeyEvent.wVirtualScanCode = (ushort) DllImport.MapVirtualKey(data[i], 0);
        }
        rec[data.Length].EventType = 0x0001;
        rec[data.Length].KeyEvent = new DllImport.KEY_EVENT_RECORD();
        rec[data.Length].KeyEvent.bKeyDown = true;
        rec[data.Length].KeyEvent.dwControlKeyState = 0;
        rec[data.Length].KeyEvent.UnicodeChar = '\n';
        rec[data.Length].KeyEvent.wRepeatCount = 1;
        rec[data.Length].KeyEvent.wVirtualKeyCode = '\n';
        rec[data.Length].KeyEvent.wVirtualScanCode = (ushort) DllImport.MapVirtualKey(0x0D, 0);

        return rec;
    }

    uint count = 0;
    //Fttach to console
    DllImport.AttachConsole(proc.Id);
    //Get input handle
    IntPtr cHandleI = DllImport.GetStdHandle(-10);
    //Prepare data
    DllImport.INPUT_RECORD[] data = PrepareData(tb.Text);
    //Write to console
    DllImport.WriteConsoleInput(cHandleI, data, data.Length, out count);
    //Deattach
    DllImport.FreeConsole(); 
    ```

[将 PInvoke.net 用于某些功能](http://www.pinvoke.net)

[示例项目](https://github.com/AlexandrM/GitBashGUI)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T08:18:33.090

StreamWriter 输入；进程 p = new Process(); 私人无效Form1_Load（对象发送者，EventArgs e）{

```
 p = new Process();
        p.StartInfo.FileName = ConfigurationManager.AppSettings["exe"];
        p.StartInfo.UseShellExecute = false;//自定义shell
        p.StartInfo.CreateNoWindow = true;//避免显示原始窗口
        p.StartInfo.RedirectStandardInput = true;//重定向标准输入（原来是CON）
        p.StartInfo.RedirectStandardOutput = true;//重定向标准输出
        p.StartInfo.RedirectStandardError = true;//重定向错误输出流
        p.OutputDataReceived += new DataReceivedEventHandler(Process_OutputDataReceived);
        p.ErrorDataReceived += new DataReceivedEventHandler(Process_OutputDataReceived);

        try
        {
            p.Start();//GO
            input = p.StandardInput;//重定向输入
            p.BeginOutputReadLine();//开始监控输出（异步读取）
        }
        catch (Win32Exception ) {
            MessageBox.Show("指定的可执行文件无效");
            Close();
        }

    } 
```

# android - 相机和画廊在 android 崩溃画廊应用程序中的使用

> ID：13928825
> 
> 赞同：0
> 
> 时间：2012-12-18T08:14:54.197
> 
> 标签：android

嗨，我有下面的代码可以让用户捕获图像或从图库中选择它。我捕获图像保存它，然后尝试从图库中选择图像，图库应用程序总是崩溃。

```
AlertDialog.Builder photoDialog = new AlertDialog.Builder(this);
        photoDialog
        .setTitle("Photo source")
        .setCancelable(true)
        .setPositiveButton("Open Gallery",
        new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog,
                            int id) {
                                startActivityForResult(
                                        new Intent(                     Intent.ACTION_PICK,                                             android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI),
                                        54);
}
})
.setNegativeButton("Open Camera",
new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog,
                    int id) {
        String fileName = "temp.jpg";
        ContentValues values = new ContentValues();
        values.put(MediaStore.Images.Media.TITLE,
            fileName);
        mCapturedImageURI = getContentResolver()
            .insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI,                                       values);
        Intent intent = new Intent(                                 MediaStore.ACTION_IMAGE_CAPTURE);
        intent.putExtra(MediaStore.EXTRA_OUTPUT,                                    mCapturedImageURI);

                                startActivityForResult(intent, 96);

                            }
                        });
        photoDialog.show(); 
```

日志

```
I/ActivityManager(  222): Starting: Intent { act=android.intent.action.PICK dat=content://media/external/images/media cmp=com.cooliris.media/.Gallery } from pid 13631

I/SiteInspection(13631): In SiteInspectionDetailsActivity.onSaveInstanceState() .......

I/ActivityManager(  222): Start proc com.cooliris.media for activity com.cooliris.media/.Gallery: pid=13685 uid=10028 gids={1015, 3003}

W/InputManagerService(  222): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@4091f7c8

D/BackgroundDataSender(13631): BackgroundDataService started

D/BackgroundLogSender(13631): BackgroundLogService started

D/BackgroundLogSender(13631): true

D/BackgroundLogSender(13631): logsender ted

I/ActivityThread(13685): Pub com.cooliris.picasa.contentprovider: com.cooliris.picasa.PicasaContentProvider

I/Gallery (13685): onCreate

D/CacheService(13685): Refreshing Cache for all items

I/CacheService(13685): Refreshing cache.

E/DiskCache(13685): Unable to create or tempFile /mnt/sdcard/Android/data/com.cooliris.media/cache/local-album-cache

I/CacheService(13685): Building albums.

I/ActivityManager(  222): Displayed com.cooliris.media/.Gallery: +659ms

E/DiskCache(13685): Unable to create or tempFile /mnt/sdcard/Android/data/com.cooliris.media/cache/local-album-cache

I/CacheService(13685): Done building albums.

I/CacheService(13685): Building items.

E/DiskCache(13685): Unable to create or tempFile /mnt/sdcard/Android/data/com.cooliris.media/cache/local-album-cache

I/CacheService(13685): Done building items.

I/RenderView(13685): First Draw

I/MediaFeed(13685): Replacing media set -1595679508

I/MediaFeed(13685): Replacing media set 1506676782

D/CacheService(13685): Refreshing Cache for all items

I/CacheService(13685): Refreshing cache.

E/DiskCache(13685): Unable to create or tempFile /mnt/sdcard/Android/data/com.cooliris.media/cache/local-album-cache

I/CacheService(13685): Building albums.

W/IInputConnectionWrapper(13631): showStatusIcon on inactive InputConnection

E/DiskCache(13685): Unable to create or tempFile /mnt/sdcard/Android/data/com.cooliris.media/cache/local-album-cache

I/CacheService(13685): Done building albums.

I/CacheService(13685): Building items.

D/BackgroundDataSender(13631): BackgroundDataService started

D/BackgroundLogSender(13631): BackgroundLogService started

D/BackgroundLogSender(13631): true

D/BackgroundLogSender(13631): logsender ted

E/DiskCache(13685): Unable to create or tempFile /mnt/sdcard/Android/data/com.cooliris.media/cache/local-album-cache

I/CacheService(13685): Done building items.

I/GridLayer(13685): Slot changing from -1 to -1

D/BackgroundDataSender(13631): BackgroundDataService started

D/BackgroundLogSender(13631): BackgroundLogService started

D/BackgroundLogSender(13631): true

D/BackgroundLogSender(13631): logsender ted

D/BackgroundDataSender(13631): BackgroundDataService started

D/BackgroundLogSender(13631): BackgroundLogService started

D/BackgroundLogSender(13631): true

D/BackgroundLogSender(13631): logsender ted

D/wpa_supplicant(  456): wpa_supplicant_scan: scan_req = 0, ap_scan = 1

D/wpa_supplicant(  456): Starting AP scan (broadcast SSID)

D/wpa_supplicant(  456): wpa_driver_wext_scan: specific scan = 0

D/wpa_supplicant(  456): Scan requested (ret=0) - scan timeout 30 seconds

I/GridLayer(13685): Slot changing from 0 to 0

I/RenderView(13685): Texture creation fail, glError 1281

D/BackgroundDataSender(13631): BackgroundDataService started

D/BackgroundLogSender(13631): BackgroundLogService started

D/BackgroundLogSender(13631): true

D/BackgroundLogSender(13631): logsender ted

I/CacheService(13685): Built thumbnail and screennail for 19 in 628

W/dalvikvm(13685): threadid=11: thread exiting with uncaught exception (group=0x40015560)

E/AndroidRuntime(13685): FATAL EXCEPTION: GLThread 13

E/AndroidRuntime(13685): java.lang.NullPointerException

E/AndroidRuntime(13685):    at com.cooliris.media.GridDrawManager.drawBlendedComponents(GridDrawManager.java:716)

E/AndroidRuntime(13685):    at com.cooliris.media.GridLayer.renderBlended(GridLayer.java:831)

E/AndroidRuntime(13685):    at com.cooliris.media.RenderView.onDrawFrame(RenderView.java:684)

E/AndroidRuntime(13685):    at android.opengl.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:1363)

E/AndroidRuntime(13685):    at android.opengl.GLSurfaceView$GLThread.run(GLSurfaceView.java:1118)

I/RenderView(13685): OnPause RenderView com.cooliris.media.RenderView@40578d58

W/ActivityManager(  222):   Force finishing activity com.cooliris.media/.Gallery 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T09:52:02.373

用这个：

```
Intent photoPickerIntent = new Intent(Intent.ACTION_GET_CONTENT);
photoPickerIntent.setType("image/*");
startActivityForResult(photoPickerIntent, SELECT_PHOTO); 
```

在 onActivityResult 中：

```
@Override
public void onActivityResult(int requestCode, int resultCode, Intent imageReturnedIntent) { 
    super.onActivityResult(requestCode, resultCode, imageReturnedIntent); 

    switch(requestCode) { 
    case SELECT_PHOTO:
        if(resultCode == getActivity().RESULT_OK){  

            Uri picUri = imageReturnedIntent.getData();

        }
        break;
    }
} 
```

# iphone - MNBottomPulltorefresh 正在制造弧问题？

> ID：13928827
> 
> 赞同：1
> 
> 时间：2012-12-18T08:15:09.190
> 
> 标签：iphone, ios, ipad

我有一个应用程序，我需要在表格视图的底部实现 pulltorefresh。所以我决定使用`MNBottomPullToRefresh`available in [github](https://github.com/emenegro/MNMBottomPullToRefresh)。但我没有使用ARC。目前该构建正在使用它。

> mnMBottomPullToRefresh · GitHub。但是当我实施时，我遇到了一个错误，比如弱属性的合成只允许在 ARC

任何人都可以帮助我如何删除它吗？因为我对ARC概念并不熟悉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T12:39:06.867

转到您的目标 -> 构建阶段 -> 编译源，在那里找到所有 MNM 框架文件并将标志*-fobjc-arc*添加到它们。

# java - 用于 MS Exchange 的 java 免费库（2003、2007、2010 ...）

> ID：13928828
> 
> 赞同：1
> 
> 时间：2012-12-18T08:15:12.030
> 
> 标签：java, exchange-server, exchangewebservices

我正在寻找一个可以与 MS Exchange（所有版本）通信并且必须是免费或开源的用于 Web 开发的 java 库。我需要读写 MS Exchange 服务器（2003、2007 和 2010）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T08:28:30.043

微软推出了 Java Exchange Web 服务 API 包装器：http: [//archive.msdn.microsoft.com/ewsjavaapi](http://archive.msdn.microsoft.com/ewsjavaapi)

但是，这仅适用于 2007 SP1 和 2010。（因为 EWS 直到 Exchange 2007 才引入）

对于 Exchange 2003，我能找到的最好的方法是自定义滚动 WebDAV 交互......但遗憾的是，我对 2003 和旧版本的 Exchange 没有太多经验。

# java - 在 Java 中将 pdf 文档添加到 Solr

> ID：13928833
> 
> 赞同：0
> 
> 时间：2012-12-18T08:15:35.530
> 
> 标签：java, pdf, solr, solrj

我可以在 中添加这样的字段`Java`，但我想`Solr`用 SolrJ添加 pdf 文档`Java`，如何添加 pdf 文件？

```
CommonsHttpSolrServer server = new CommonsHttpSolrServer("http://localhost:8983/solr");

SolrInputDocument doc = new SolrInputDocument();

doc.addField("cat", "lalal");
doc.addField("id", "1");

server.add(doc);
server.commit(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T09:22:59.440

Solr 使用 Apache Tika 处理二进制文件。

有关 SolrJ 示例，请参阅[http://wiki.apache.org/solr/ExtractingRequestHandler](http://wiki.apache.org/solr/ExtractingRequestHandler)和[http://wiki.apache.org/solr/ContentStreamUpdateRequestExample](http://wiki.apache.org/solr/ContentStreamUpdateRequestExample)。

# x86-16 - 'mov cx, [bp+6]' 使用什么寻址模式？

> ID：13928834
> 
> 赞同：1
> 
> 时间：2012-12-18T08:15:39.137
> 
> 标签：x86-16, microprocessors, addressing-mode

"mov cx, [bp+6]" 使用什么寻址方式？处理器是 intel 8086。我正在学习 Douglas V. Hall 的“微处理器和接口”。我知道它的内存寻址模式。但不确定是基于寻址模式还是索引寻址模式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T08:19:15.753

`[bp+6]`是基于寻址模式。从原始 8086 文档：

> 在基址寻址中，有效地址是位移值与寄存器 BX 或寄存器 BP 的内容之和。

索引寻址模式类似，但使用`SI`or`DI`寄存器。

基本上，您有以下模式：

*   直接内存访问，如`[1234]`.
*   注册间接喜欢`[bx]`。
*   基于寻址，如`4[bx]`or `[bp+8]`。
*   索引寻址，如`4[si]`or `[di+4]`。
*   基于索引寻址（前两者的组合），例如`4[bx][si]`or `[bx+si+4]`。
*   其他一些无关紧要的（在这种情况下），如隐式、端口、字符串、相对。

# c++ - 是否可以让 gnu cpp 保留包含宏？

> ID：13928835
> 
> 赞同：1
> 
> 时间：2012-12-18T08:15:40.597
> 
> 标签：c++, c, gnu, c-preprocessor

我正在使用`gnu cpp`一些测试并希望它保留*#include*宏并同时扩展其他用户定义的宏。可能吗？这是一段代码（foo.c）：

```
#include <stdio.h>
#define NEWLINE(str) str "\n"
int main(){
  puts(NEWLINE("foo"));
} 
```

我希望结果`cpp foo.c`是：

```
#include <stdio.h>
int main(){
  puts("foo\n");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T08:51:51.933

您可以使用脚本注释掉每个#include，运行 cpp，然后删除这些注释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T08:18:22.067

不，这是不可能的。但是，行信息通常`#`在以预处理器输出开头的行中可用。

您可能可以使用其他一些预处理器，例如[gpp](http://en.nothingisreal.com/wiki/GPP)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T08:21:10.387

如果我理解正确，您想使用预处理器只预处理某些部分而不是其他部分。这通常是不可能的。做到这一点的唯一方法是向源添加条件，即使用 eg`#ifdef`和`#endif`围绕您要扩展的部分，并将命令行上的定义传递给预处理器。

# android - Android：如何将联系人列表图像放入适配器

> ID：13928836
> 
> 赞同：1
> 
> 时间：2012-12-18T08:15:46.453
> 
> 标签：android

嗨，我正在尝试将手机中的联系人图像检索到我的阵列适配器中

```
 @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        View view = convertView;

        if (view == null) {
            LayoutInflater inflater = (LayoutInflater) (getContext()
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE));
            view = inflater.inflate(renderer, null);
        }

        TextView text = (TextView) view.findViewById(R.id.name);
        ImageView photo = (ImageView) view.findViewById(R.id.photo);
        new LoadImage(photo).execute(); 
```

我想使用 asynctask 从手机中获取照片，我很惊讶如何在 doinbackground() 中做到这一点。请建议如何从联系人中获取照片，doinbackground() 过程中的内容

```
class LoadImage extends AsyncTask<Object, Void, Bitmap>{

        private ImageView imv;

        public LoadImage(ImageView imv) {
             this.imv = imv;

        }

    @Override
    protected Bitmap doInBackground(Object... params) {
        Bitmap bitmap = null;
        photo.setImageBitmap(contact.getPhoto());
    }
    @Override
    protected void onPostExecute(Bitmap result) {

        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T19:14:50.513

你可以使用universalimageloader来做到这一点[https://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)

正如您在下面的示例中看到的那样，您可以将联系人照片保存到 SD 购物车，然后将他们的 FilePath 放入列表中，并将该路径与通用图像加载器一起使用，

您可以从[https://dl.dropbox.com/u/68130108/UniversalImageLoaderExample.rar获取完整示例](https://dl.dropbox.com/u/68130108/UniversalImageLoaderExample.rar)

在你的适配器 getView

```
imageLoader.displayImage(contactFilePath, holder.image, displayImageOptions); 
```

在您的活动公共类 ImageListActivity 扩展 BaseActivity { AdapterContact adapterContact; DisplayImageOptions 选项；字符串[] imageUrls; ArrayList 联系人列表 = 新的 ArrayList(); 列表视图列表视图；ProgressDialog 对话框；@Override public void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); setContentView(R.layout.ac_image_list);

```
 listView = (ListView) findViewById(android.R.id.list);

        new asynGetContacts().execute();

    }

    protected class asynGetContacts extends AsyncTask<String, Void, Integer> {      
        protected Integer doInBackground(String... params) {
            try {
                ImageListActivity.this.runOnUiThread(new Runnable() {
                    public void run() {
                        dialog = ProgressDialog.show(ImageListActivity.this, "","Lütfen bekleyin...", true);
                        dialog.show();
                    }
                });
                Uri uri = ContactsContract.Contacts.CONTENT_URI;
                ContentResolver cr = getContentResolver();
                String sortOrder = ContactsContract.Contacts.DISPLAY_NAME
                        + " COLLATE LOCALIZED ASC";
                Cursor cur = cr.query(uri, null, null, null, sortOrder);
                if (cur.getCount() > 0) {
                    String id;
                    String name;
                    while (cur.moveToNext()) {
                        Contact c = new Contact();
                        id = cur.getString(cur
                                .getColumnIndex(ContactsContract.Contacts._ID));
                        name = cur
                                .getString(cur
                                        .getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
                        Uri my_contact_Uri = Uri.withAppendedPath(
                                ContactsContract.Contacts.CONTENT_URI,
                                String.valueOf(id));

                        InputStream inputStream = ContactsContract.Contacts
                                .openContactPhotoInputStream(getContentResolver(),
                                        my_contact_Uri);
                        BufferedInputStream buf = new BufferedInputStream(inputStream);
                        Bitmap my_btmp = BitmapFactory.decodeStream(buf);

                        if (my_btmp != null) {
                            c.photo = my_btmp;
                            c.id = id;
                            c.name = name;
                            c.photoURL = saveToSD(my_btmp, id);
                            contactList.add(c);
                        }
                    }
                }
                cur.close();

            } catch (Exception e) {
                Log.v("hata", e.toString());
                return 0;
            }

            return 1;
        }

        protected void onPostExecute(Integer result) {
            try {
                dialog.dismiss();
                adapterContact = new AdapterContact(ImageListActivity.this, 0,
                        contactList);
                listView.setAdapter(adapterContact);
                listView.setOnScrollListener(new PauseOnScrollListener(false, true));
            } catch (Exception e) {
                Log.v("hata", e.toString());
            }

            super.onPostExecute(result);
        }
    }

    public String saveToSD(Bitmap bmp, String id) { 
        String file_path = Environment.getExternalStorageDirectory().getAbsolutePath() + "/ContactImage/";

        try {
            File dir = new File(file_path);

            if (!dir.exists())
                dir.mkdirs();

            File f = getFileStreamPath(file_path);

            if (!f.exists()) {
                File file = new File(dir, "contact_" + id + ".png");
                FileOutputStream fOut = new FileOutputStream(file);
                bmp.compress(Bitmap.CompressFormat.PNG, 85, fOut);
                fOut.flush();
                fOut.close();
            }

        } catch (Exception e) {
            Log.v("Hata", e.toString());
        }

        return "file://"+file_path+"contact_" + id + ".png";
    }

} 
```

# php - MYSQL INSERT 在 php() 中不起作用

> ID：13928838
> 
> 赞同：-1
> 
> 时间：2012-12-18T08:16:01.473
> 
> 标签：php, mysql, cpanel

这是代码：

```
 <html>

    <body>

    <?php
    $con = mysql_connect("localhost","moviek5q_arka","******");
    if (!$con)
      {
      die('Could not connect: ' . mysql_error());
      }

    $pizza  = "Age
    Anger
    Architecture
    Art 
    Beauty
    Birthday
    Business
    Car
    Change
    Computers
    Dad
    Dating
    Death
    Design
    Diet
    Dreams
    Education
    Environmental
    Equality
    Experience
    Faith
    Family
    Finance
    Fitness
    Food
    Forgiveness
    Friendship 
    Funny
    Gardening
    Government
    Graduation
    Happiness
    Health
    History
    Home
    Humor
    Imagination
    Inspirational
    Intelligence
    Leadership
    Legal
    Life 
    Love 
    Marriage
    Medical
    Men
    Mom
    Money
    Motivational 
    Movies
    Music
    Nature
    Parenting
    Patriotism
    Peace
    Pet
    Poetry
    Politics
    Power
    Religion
    Science
    Society
    Sports
    Success 
    Technology
    Teen
    Time
    Travel
    Trust
    War
    Wedding
    Wisdom 
    Women
    Work
    ";
    $pieces = explode("\n", $pizza);
    $i=0;

    $a=mysql_select_db("moviek5q_Quote", $con);
    if(!$a) echo"Error";

    for($i=8;$i<75;$i++) {

    $sql=mysql_query("INSERT INTO moviek5q_Quote.Categories (Key, Name)
    VALUES
    (NULL,'$pieces[$i]')");
    if(!$sql) {die('Could not connect: ' . mysql_error());}

    }

    mysql_close($con);

    echo "done";
    ?>

    </body>

</html> 
```

但是运行脚本会出现错误：

> 无法连接：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'Key, Name) VALUES (NULL,'Change')' 附近使用正确的语法

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T08:19:11.477

`Key`是一个保留关键字，这就是它崩溃的原因。更改列名或将其放在引号 (`) 中。

例如

```
$sql = mysql_query( "INSERT INTO moviek5q_Quote.Categories (`Key`, Name)
VALUES
(NULL, '$pieces[$i]')" ); 
```

有关保留关键字的完整列表，请查看[http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T08:20:58.300

您的字段名称`Key`是[保留字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)，因此查询将失败。您可以使用反引号来更正它：

```
INSERT INTO moviek5q_Quote.Categories (`Key`, Name) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-18T08:27:31.213

只是一个提示，尝试使用 PDO 或 MySQLi，`mysql_`代码现在已被弃用，将来可能无法使用。

*   [PDO](http://php.net/book.pdo)
*   [MySQLi](http://php.net/book.mysqli)

# php - 无法访问代码点火器中的控制器功能

> ID：13928840
> 
> 赞同：8
> 
> 时间：2012-12-18T08:16:09.177
> 
> 标签：php, codeigniter

嗨，我的文件夹结构是这样的

```
controllers/user/registration/register.php 
```

在 register.php 控制器内部，让我们说测试索引功能说“你好世界”。但我无法通过浏览器访问文件夹索引。

我的 base_url 是

```
$config['base_url'] = 'http://localhost/new/'; 
```

但是当我写

```
localhost/new/index.php/user/registration/register/index 
```

我有一个错误

```
The page you requested was not found. 
```

奇怪的是，我可以访问用户文件夹的控制器 fxn，但无法访问注册文件夹内的控制器 fxn。对于默认控制器，我有“home.php”

```
$route['default_controller'] = "home";
$route['404_override'] = ''; 
```

我只想访问显示“hello world”的控制器/用户/注册/注册/索引 fxn，但它显示错误-“找不到您请求的页面”。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T08:41:44.077

Codeigniter 仅支持控制器的单级目录结构。

在 CodeIgniter 中尝试以下链接以获取多级子文件夹控制器：

[CodeIgniter 中的多级子文件夹控制器](http://glennpratama.wordpress.com/2009/10/20/multi-level-subfolder-for-controller-in-codeigniter/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T09:47:30.110

好的，在我的测试项目中编写了一些预感代码之后，它终于在我的情况下工作了所以我按照这个链接在 CodeIgniter 中的多级子文件夹控制器（感谢 K ush）

```
http://glennpratama.wordpress.com/2009/10/20/multi-level-subfolder-for-controller-in-codeigniter/ 
```

并按照该链接中的说明复制代码并粘贴到我的 new/application/core/MY_Router.php 中，然后我就遇到了这样的错误

```
Call to undefined method CI_Router::CI_Router() in C:\xampp\htdocs\new\application\core\MY_Router.php 
```

所以我将该代码的一小部分更改为

```
//  Function MY_Router()
//  {
//      parent::CI_Router();
//  }
   public function __construct()
   {
        parent::__construct();
        // Your own constructor code
   } 
```

在我能够访问控制器/用户/注册/register.php索引fxn之后

它适用于我的情况。谢谢大家

# java - IllegalStateException：系统服务在 onCreate() 之前对活动不可用

> ID：13928843
> 
> 赞同：1
> 
> 时间：2012-12-18T08:16:30.110
> 
> 标签：java, android, illegalstateexception

当我启动我的应用程序时，我不断收到致命的 java.lang.IllegalStateException 错误，但我不知道为什么。基本上我要做的就是每 10 秒返回一次正在运行的进程和任务。

这是我的代码：

```
public class MainActivity extends Activity {

    Handler h = new Handler();
    public static final String TAG = "MyActivity";
    int s;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Checker();
    }

    public void Checker() {
        Handler h = new Handler();
        h.post(check);
    }

    Runnable check = new Runnable() {
        ActivityManager am = (ActivityManager) getSystemService(ACTIVITY_SERVICE);
        public void run() {
            Processes(am);
            Tasks(am);
            h.postAtTime(check, 10000);
        }
    };

    public void Processes(ActivityManager am) {
        List<ActivityManager.RunningAppProcessInfo> l = am.getRunningAppProcesses();
        s = l.size();
        for(int i = 0; i < s; i++) {
            Log.d(TAG, "Process:  " + l.get(i).processName);
        }
    }

    public void Tasks(ActivityManager am) {
        List<ActivityManager.RunningTaskInfo> l = am.getRunningTasks(1000);
        s = l.size();
        for(int i = 0; i < s; i++) {
            // .baseActivity returns the process that started the Task
            Log.d(TAG, "Task:  " + l.get(i).baseActivity.getPackageName());
        }
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

这是我的日志：

```
12-18 08:03:53.190: E/AndroidRuntime(1577): FATAL EXCEPTION: main
12-18 08:03:53.190: E/AndroidRuntime(1577): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.androidside/com.example.androidside.MainActivity}: java.lang.IllegalStateException: System services not available to Activities before onCreate()
12-18 08:03:53.190: E/AndroidRuntime(1577):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2106)
12-18 08:03:53.190: E/AndroidRuntime(1577):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
12-18 08:03:53.190: E/AndroidRuntime(1577):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
12-18 08:03:53.190: E/AndroidRuntime(1577):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
12-18 08:03:53.190: E/AndroidRuntime(1577):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-18 08:03:53.190: E/AndroidRuntime(1577):     at android.os.Looper.loop(Looper.java:137)
12-18 08:03:53.190: E/AndroidRuntime(1577):     at android.app.ActivityThread.main(ActivityThread.java:5039)
12-18 08:03:53.190: E/AndroidRuntime(1577):     at java.lang.reflect.Method.invokeNative(Native Method)
12-18 08:03:53.190: E/AndroidRuntime(1577):     at java.lang.reflect.Method.invoke(Method.java:511)
12-18 08:03:53.190: E/AndroidRuntime(1577):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
12-18 08:03:53.190: E/AndroidRuntime(1577):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
12-18 08:03:53.190: E/AndroidRuntime(1577):     at dalvik.system.NativeStart.main(Native Method)
12-18 08:03:53.190: E/AndroidRuntime(1577): Caused by: java.lang.IllegalStateException: System services not available to Activities before onCreate()
12-18 08:03:53.190: E/AndroidRuntime(1577):     at android.app.Activity.getSystemService(Activity.java:4463)
12-18 08:03:53.190: E/AndroidRuntime(1577):     at com.example.androidside.MainActivity$1.<init>(MainActivity.java:54)
12-18 08:03:53.190: E/AndroidRuntime(1577):     at com.example.androidside.MainActivity.<init>(MainActivity.java:53)
12-18 08:03:53.190: E/AndroidRuntime(1577):     at java.lang.Class.newInstanceImpl(Native Method)
12-18 08:03:53.190: E/AndroidRuntime(1577):     at java.lang.Class.newInstance(Class.java:1319)
12-18 08:03:53.190: E/AndroidRuntime(1577):     at android.app.Instrumentation.newActivity(Instrumentation.java:1054)
12-18 08:03:53.190: E/AndroidRuntime(1577):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2097)
12-18 08:03:53.190: E/AndroidRuntime(1577):     ... 11 more 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T08:29:15.350

**尝试更改您的代码**

```
Handler h ;
    @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);
            h = new Handler();
            Checker();
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T08:55:13.537

首先尝试在需要时初始化变量：

```
private Handler h;
private Runnable check;

public void Checker() {
    check = new Runnable() {
        ActivityManager am = (ActivityManager) getSystemService(ACTIVITY_SERVICE);
        public void run() {
            Processes(am);
            Tasks(am);
            h.postAtTime(check, 10000);
        }
    };
    h = new Handler();
    h.post(check);
}

public void onResume() {
    super.onResume(); 
    Checker();
} 
```

其次，尝试选择真正说明它是什么的变量名。例如，更改`l`、和。`taskList`_ 此外，方法名称不以大写字母开头。`s``listSize``h``handler`

# sql - 限制组中的计数

> ID：13928847
> 
> 赞同：1
> 
> 时间：2012-12-18T08:16:47.523
> 
> 标签：sql, oracle, group-by, oracle11g

我有与获取 col1 中特定值的计数相关的查询。但我有兴趣将计数限制为 3，因为在我的程序逻辑中，我正在执行一个 IF 条件：

按 val1 从选项卡组中选择 val1,count(1) cnt；

```
 IF cnt=0
       --do something
    ELSIF cnt=1
      --do something
    ELSIF cnt=2
      --do something
    ELSIF cnt>2
      --do something
    ELSE
      --do something
    END IF; 
```

我不想继续计算出现超过 2 的值，因为它在如此大的表“TAB”上的额外开销。

我想数到 3，然后告诉 oracle 停止为 val1 计数。

例如，我在 val1 中有一个值 Item001，对应于 val1，我们在另一列 val2 中有 27 个组件。但是当我在 val1 上运行 group by 时，查询应该计算 val1 的出现次数最多 3 次，而不是超过 3 次。当计数达到 3 时，它应该停止进一步扫描表。它应该跳转到 val1 中的其他值以获取它的计数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T10:42:21.880

我认为在有限的情况下值得这样做，但是假设我们确实有一个带有 ID 列的表 T1 和另一个带有 ID 值的表 T2，并且您只最多要计算 3 次。

你可以尝试的是：

```
 select id,
        (select count(*) from t2 where t2.id = t1.id and rownum <= 3) c_star
 from   t1 
```

[http://sqlfiddle.com/#!4/1ab50/1/0](http://sqlfiddle.com/#!4/1ab50/1/0)

但是，您绝对应该将其与更常规的计数方法进行比较。

编辑：想想这可能比完整计数更快的情况。

假设您有少量（15 个？）设备，每个设备每秒生成 10 条消息，这些消息被插入到按天分区的表中，并且没有索引。您想检查每个人每天至少记录 20 条消息。

一个分区的完整计数约为 1300 万行，但由于计数限制为每个设备 20 行，您实际上执行了 15 次完整分区扫描，这些扫描将在仅扫描几行后终止（通过 rownum 限制） .

当然，如果您的设备出现故障，您最终会进行全面扫描。

无论如何，这只是我的想法。我并不是说这是一个好主意，但这是可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T09:10:35.790

您应该了解 Oracle 是如何读取数据的。

引擎从磁盘请求数据块。它不知道下一个块中有什么。例如，它不知道是否有更多“Item001”或有新项目。它应该读取块 - 其中的所有行。然后，与从磁盘获取块所需的时间相比，再计算一个 Item001 或 Item999 就不算什么了。

这是因为行在表中没有排序。引擎不知道“有 item001s 和 Item002s 等”，除非您在 val1 上有一个分区表，但我几乎可以肯定这对您没有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T11:43:47.217

猜猜我没疯:) 尝尝。

```
select mgr, (next_empno + next2_empno + 1) cnt 
from (
  SELECT empno, mgr,
    FIRST_VALUE(empno) OVER (PARTITION BY mgr ORDER BY empno) first_empno,
    LEAD(SIGN(empno), 1, 0) OVER (PARTITION BY mgr ORDER BY empno) next_empno,
    LEAD(SIGN(empno), 2, 0) OVER (PARTITION BY mgr ORDER BY empno) next2_empno
  FROM emp
)
where first_empno = empno 
```

它使用标准方案，但这里是 [SQLFiddle](http://sqlfiddle.com/#!4/99985/1)（非常好的服务:)）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T08:20:51.213

尽管不完全理解是你的观点，但只有 3 次......我认为你只需要计算你想要的东西的出现次数，然后你就可以执行你的 if 了，但是看看下面的链接信息是否有帮助（不知道你的Oracle版本）：

[http://www.orafaq.com/faq/how_does_one_select_the_top_n_rows_from_a_table](http://www.orafaq.com/faq/how_does_one_select_the_top_n_rows_from_a_table)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-18T08:22:39.623

您可以使用 rownum 将您的行数限制为最多 3。如果您使用它，那么您的选择将在第 3 行之后停止，因此您不会计算 100000 行是这样的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-18T08:24:06.550

要将计数限制为 3，请执行以下操作：

```
select val1, if(cnt > 2, 3, cnt) cnt
from (select val1, count(1) cnt
from tab
group by val1) x 
```

# php - 如何拆分 mySQL 信息以显示在 HTML 列中

> ID：13928848
> 
> 赞同：0
> 
> 时间：2012-12-18T08:16:47.200
> 
> 标签：php, html, mysql, css

我试图找出一种将 mySQL 行拆分为 HTML 列的方法。很抱歉，如果有更简单的方法可以问这个问题，但我无法解决这个问题。

我已经阅读了很多建议，尽管它们都不符合我的要求。我知道将信息浮动到左侧并让它自行堆叠是非常容易的。我的问题是我用两张不同大小的卡片以“卡片”形式显示信息，我希望它们都垂直堆叠而没有间隙。

为了展示这一点，我给每张卡片分配了一个 1-3 的数字。每张编号为 1 的卡片都应该放在第一列，依此类推。[这里的例子](http://beta.mybattlereport.com/collective.php)

正常向左浮动给了我这样的东西：

```
|1|2|3|
|4|5|6|
|7|8|9| 
```

这是显示信息的正确方法，但它会在大卡片与小卡片旁边的位置留下空白，如示例中所示。

如果我在 php 中使用带有表格或 div 的 foreach 循环，我会得到如下信息：

```
|1|2|3|
-------
|4|5|6|
-------
|7|8|9| 
```

不幸的是，这几乎是相同的结果。较大的卡片向下推动行，在较小的卡片所在的位置留下很大的间隙。

我也明白，在第一个可见行之后，最近的 div 可能会在一个列而不是另一列中被推得更远。例如，如果第 1 列有 6 张“特色”或大型卡片，则需要 12 张卡片才能填满它旁边的空间。我不担心这个。

我现在拥有的基本的、精简的代码是这样的：

```
<div class="container">
    <?PHP
    $qry_questions = mysql_query("SELECT STATEMENT**");
    $count = 0;
    while($row = mysql_fetch_array($qry_questions)){
        $count++;
        /*GATHER INFORMATION*/
    ?>
        <div class="HTML-formatting-here-with-php-echos">
        </div>
    <?PHP
        }
    ?>
</div> 
```

现在我只是想弄清楚我是否可以在 php 中做一个基本上说：“如果 $count == 1，将此信息附加到第 1 列，如果 $count == 2，将其附加到第 2 列，等等。”

是否有任何类型的函数可以像这样拆分这些信息并附加信息而不完全构建一个全新的行？

ps 我试过 array_chunk() 没有正确的结果。

编辑：这是while循环

```
<div id="collective">
    <div class="container"> 
    <?PHP
        //FIND THE QUESTIONS ASKED AND INFORMATION ON THEM
        $qry_questions = mysql_query("SELECT * FROM mbr_qa_questions ORDER BY q_votes DESC" /* LIMIT 0, 10"*/);  //LIMIT 0, 20 - 20 being how many to show at a time
        $num_rows = mysql_num_rows($qry_questions);
        $max_col = 3;
        $count = 0;
        //START THE LOOPING
        while($q_row = mysql_fetch_array($qry_questions)){
            $q_id = $q_row['q_id'];
            $q_votes = $q_row['q_votes'];
            $q_answers = $q_row['q_answers'];
            $q_title = $q_row['q_title'];
            $q_description = $q_row['q_description'];
            $q_tags = $q_row['q_tags'];
            $q_user_id = $q_row['user_id'];
            $q_created = $q_row['q_created'];
            $q_modified = $q_row['q_modified'];
            $q_featured = $q_row['q_featured'];
            if($q_featured == 0){
                $q_status = "normal";   
            } else {
                $q_status = "featured"; 
            }
            //GET THE USERS USERNAME
            $qry_username = mysql_query("SELECT user_name FROM mbr_user_name WHERE user_id =                         '$q_user_id'");
            $q_user_name = mysql_result($qry_username, 0);
            //FIND THE USERS POINTS
            $qry_points = mysql_query("SELECT point_amount FROM mbr_qa_points WHERE user_id = '$q_user_id'");
            $q_user_points = mysql_result($qry_points, 0);
            //FIND OUT IF YOU FLAGGED IT
            $qry_flagged = mysql_query("SELECT * FROM mbr_qa_flagged WHERE q_id = '$q_id' AND user_id = '$user_id'");
            $flagged = mysql_num_rows($qry_flagged);
            if($flagged >= 1){
                $flaggedDiv = "<div class='q_flagged'> &nbsp; </div>";
            } else {
                $flaggedDiv = "<div class='flagInnapropriate'> &nbsp; </div>";
            }
            //FIND HOW MANY ANSWERS
            $qry_answers = mysql_query("SELECT * FROM mbr_answers WHERE q_id = '$q_id'");
            $q_answers = mysql_num_rows($qry_answers);
            //FIND HOW MANY VOTES
            $qry_votes = mysql_query("SELECT * FROM mbr_votes WHERE q_id = '$q_id'");
            $q_votes = mysql_num_rows($qry_votes);
            //GIVE EACH ENTRY A COLUMN NUMBER
            $count++;
            if($count >= 4){
                $count = 1; 
            } 
<div class="card <?= $q_status ?>">
    <div class="top">
        <div class="tag">
            <div class="title">Votes</div> 
            <div class="votes">
                <div class="number">
                    <?= $q_votes ?>
                </div>
            </div>
            <div class="plus">+</div>
        </div>
        <div class="question">
            <p><?= $count/* . $q_title*/ ?></p>
        </div>
    </div>
    <div class="middle">
        <div class="elapsed">
            <?PHP

                $time_since = $q_created;
                $time_now = time();
                $timeElapsed = $time_now - $time_since;

            ?>
            Asked <?= elapsedTime($time_since) ?> ago by
        </div>
        <a class="profile" href="./profile.php?profile_name=<?= $q_user_name ?>">
            <div class="avatar">
                <img src="pieces/avatars/avatar.php?profile_id=<?= $q_user_id ?>&size=xsmall" />
            </div>
            <div class="userName">
                <?= $q_user_name ?> 
            </div>
            <div class="points">
                <?= $q_user_points ?>pts
            </div>
        </a>

    </div>
    <div class="bottom">
        <div class="answer">
            <div class="title">
                Answers
            </div>
            <div class="numAnswers">
                <?= $q_answers ?>
            </div>
            <div class="answersText">
                Answers
            </div>
        </div>
        <div class="bestAnswer">
            <div class="title">
                Best Answer
            </div>
            <div class="description">
                <p>Need to get highest rated answer here</p>
            </div>
        </div>
    </div>
</div>   
                }
                ?>

            </div>
        </div> 
```

包含的 newAnswerLayout.php 只是每张卡片的 html 格式。

另一个编辑：

我相信我只需要进行三个 mySQL 查询来选择每 n 行。是的，行上的 ID 是唯一的，但是有可能某些行将移动到另一个表中，这会留下间隙。

我现在想的是查询表，每三行拉一次，将其放在第 1 列中，依此类推，从第一个条目开始。

编辑 3：我正在寻找的是执行一个 SQL 查询，该查询从第 1 行开始每隔三行获取所有信息，然后我需要从第 2 行开始每隔三行执行一次查询，然后相同对于第 3 行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T08:24:37.750

`float:left;`在你的文件中使用

```
 http://beta.mybattlereport.com/styles/global.css 
```

线`82`
类容器

编辑 ：

**第一：**那些编号为 1,2,3 的卡都具有相同的类别`card normal`，因此如果您对一张卡应用更改，它将应用于所有卡

**解决方案：**尝试使用表格而不是 div。

**第二：**你的卡片是这样排列的

```
 card1 card2 card3  featured card , card1 card2 card3 featured card 
```

**解决方案：**这也可以通过表格固定，您订购它们 1 列将用于卡 1 2 列将用于卡 2 3 列将用于卡 3 然后您可以在此下使用其他表作为特色卡或 div。

编辑2>

您的问题是在 sql 中获取由卡片数量和特色生成的卡片，您应该首先按特色排序，然后按投票排序

尝试这个

```
 $qry_questions = mysql_query("SELECT * FROM mbr_qa_questions ORDER BY q_featured ,q_votes DESC" /* LIMIT 0, 10"*/); 
```

数字 1 和 2 和 3 你只是给每张卡数字。所以我从这些数字中看不出你为什么要制作它们的任何目的。

# php - SQL 查询未正确排序结果

> ID：13928853
> 
> 赞同：0
> 
> 时间：2012-12-18T08:17:35.953
> 
> 标签：php, sql

我正在查询我的数据库以返回一组从最高到最低的结果。但是，似乎查询并没有完全以这种方式排序结果。我的代码如下：

```
$query = mysql_query("SELECT * FROM ".$stats_table." ORDER BY ppg DESC")or die(mysql_error());
$count = mysql_num_rows($query);
$i = 0;

while($row = mysql_fetch_assoc($query)) 
{
$team[$i] = $row['team'];
    $ppg[$i]  = $row['ppg'];

    $i++;
}

for($i=0;$i<$count;$i++)
{
echo "".$ppg[$i]." <br /><br />";
} 
```

当我回显 ppg 列集时，我得到以下信息：

```
99.7

98.2

97.8

97.4

97.1

96.9

96.8

96.3

96.2

95.5

94.6

94.5

94.3

93.9

93.2

92.8

92.2

91.5

90.8

90.3

106.0

105.9

104.5

103.6

102.6

101.9

101.5

101.3

100.7

100.1 
```

似乎对于小于 100 和大于 100 的所有值都有效。但是，我怎样才能使这个订单适用于所有值，而不是仅仅在小于和大于 100 的值内？

谢谢，

槊

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T08:24:21.557

将数据类型更改为数字，例如 double、real、float。尝试一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T08:21:10.903

制作`ppg`双精度、实数或任何数字，而不是 varchar。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T08:23:53.257

如果您不想触摸您的结构，请使用 ORDER BY ABS(ppg)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T08:29:59.630

您可以让 PHP 对其进行排序。

```
$query = mysql_query("SELECT * FROM ".$stats_table)or die(mysql_error());

$i = 0;
while($row = mysql_fetch_assoc($query)) {
    $team[$i] = $row['team'];
    $ppg[$i]  = (int)$row['ppg'];
    $i++;
}
sort($ppg, SORT_NUMERIC);
for($i=0;$i<count($ppg);$i++) {
     echo $ppg[$i]." <br /><br />";
} 
```

# windows-phone-7 - XAML：在情节提要中具有元素的当前颜色

> ID：13928857
> 
> 赞同：0
> 
> 时间：2012-12-18T08:17:57.427
> 
> 标签：windows-phone-7, xaml, storyboard, winrt-xaml

是否可以获得元素的当前颜色

```
<UserControl.Resources>
<Storyboard x:Name="SBFade">
    <ColorAnimationUsingKeyFrames x:Name="keyframes" Storyboard.TargetProperty="(Panel.Background).(SolidColorBrush.Color)" Storyboard.TargetName="LayoutRoot">
        <EasingColorKeyFrame KeyTime="0" Value="#FF681D1D"/>
        <EasingColorKeyFrame KeyTime="0:0:0.6" Value="Gray"/>
    </ColorAnimationUsingKeyFrames>
</Storyboard>
</UserControl.Resources>

<Grid x:Name="LayoutRoot" Background="#808080" >.....</Grid> 
```

在值为#FF681D1D 的行，我想要网格的当前背景颜色（此颜色可以在运行时更改.. 感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T15:48:15.023

在非关键帧动画中，省略“From”值会做你想要的。

就像是：

```
<Storyboard x:Name="SBFade">
    <ColorAnimation x:Name="keyframes" Storyboard.TargetProperty="(Panel.Background).(SolidColorBrush.Color)" Storyboard.TargetName="LayoutRoot" To="Gray" Duration="0:0:0.6" />
</Storyboard> 
```

或者，对于关键帧，如果您省略早期/第一个关键帧，您将获得相同的效果。使用 DiscreteColorKeyFrame 以外的任何内容（在指定时间跳转到指定颜色而不进行插值）将在颜色之间进行插值。

```
<Storyboard x:Name="SBFade">
    <ColorAnimationUsingKeyFrames x:Name="keyframes" Storyboard.TargetProperty="(Panel.Background).(SolidColorBrush.Color)" Storyboard.TargetName="LayoutRoot">
        <EasingColorKeyFrame KeyTime="0:0:0.6" Value="Gray"/>
    </ColorAnimationUsingKeyFrames>
</Storyboard> 
```

[这些与 msdn 示例ColorAnimation](http://msdn.microsoft.com/en-us/library/system.windows.media.animation.coloranimation.aspx)和[ColorAnimationUsingKeyFrames](http://msdn.microsoft.com/en-us/library/system.windows.media.animation.coloranimationusingkeyframes.aspx)非常相似（向下滚动到 xaml 示例）。

如果要编写反向动画（从灰色不褪色到任何颜色），请在视图模型中保持所需的颜色，并绑定 To 属性（在非关键帧动画的情况下）或 Value 属性（在这种情况下关键帧动画）到视图模型的该属性。

# android - 列表视图没有响应

> ID：13928868
> 
> 赞同：0
> 
> 时间：2012-12-18T08:18:44.363
> 
> 标签：android, android-layout

我有一个 listView 的问题，它显示在其他布局的许多层之下。这里是代码。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <TabHost
        android:layout_width="fill_parent"
        android:id="@android:id/tabhost"
        android:layout_weight="12"
        android:layout_height="wrap_content">
        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:orientation="vertical"
            android:id="@+id/linearLayout1">
            <LinearLayout
                android:orientation="vertical"
                android:minWidth="25px"
                android:minHeight="25px"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:id="@+id/linearLayout5"
                android:gravity="top"
                android:layout_weight="1">
                <ScrollView
                    android:minWidth="25px"
                    android:minHeight="25px"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:id="@+id/scrollView1"
                    android:scrollbars="none">
                    <LinearLayout
                        android:orientation="vertical"
                        android:minWidth="25px"
                        android:minHeight="25px"
                        android:layout_width="fill_parent"
                        android:layout_height="fill_parent"
                        android:id="@+id/linearLayout2">
                        <LinearLayout
                            android:orientation="vertical"
                            android:minWidth="25px"
                            android:minHeight="25px"
                            android:layout_width="fill_parent"
                            android:layout_height="wrap_content"
                            android:id="@+id/linearLayout3">
                            <TextView
                                android:text="@string/UTlbEqID"
                                android:textAppearance="?android:attr/textAppearanceSmall"
                                android:layout_width="fill_parent"
                                android:layout_height="wrap_content"
                                android:id="@+id/lbEqID" />
                            <TextView
                                android:textAppearance="?android:attr/textAppearanceSmall"
                                android:layout_width="fill_parent"
                                android:layout_height="wrap_content"
                                android:id="@+id/lbEqIDVar"
                                android:layout_marginLeft="15dp"
                                android:hint="wie sieht dass denn aus?" />
                            <TextView
                                android:text="@string/UTlbEqDesc"
                                android:textAppearance="?android:attr/textAppearanceSmall"
                                android:layout_width="fill_parent"
                                android:layout_height="wrap_content"
                                android:id="@+id/lbEqDesc"
                                android:layout_marginTop="5dp" />
                            <TextView
                                android:textAppearance="?android:attr/textAppearanceSmall"
                                android:layout_width="fill_parent"
                                android:layout_height="wrap_content"
                                android:id="@+id/lbEqDescVar"
                                android:layout_marginLeft="15dp"
                                android:hint="wie sieht dass denn aus?" />
                            <TextView
                                android:text="@string/UTlbTaskID"
                                android:textAppearance="?android:attr/textAppearanceSmall"
                                android:layout_width="fill_parent"
                                android:layout_height="wrap_content"
                                android:id="@+id/lbTaskID"
                                android:layout_marginTop="5dp" />
                            <TextView
                                android:textAppearance="?android:attr/textAppearanceSmall"
                                android:layout_width="fill_parent"
                                android:layout_height="wrap_content"
                                android:id="@+id/lbTaskIDVar"
                                android:layout_marginLeft="15dp"
                                android:hint="wie sieht dass denn aus?" />
                            <TextView
                                android:text="@string/UTlbTaskDesc"
                                android:textAppearance="?android:attr/textAppearanceSmall"
                                android:layout_width="fill_parent"
                                android:layout_height="wrap_content"
                                android:id="@+id/lbTaskDesc"
                                android:layout_marginTop="5dp" />
                            <TextView
                                android:textAppearance="?android:attr/textAppearanceSmall"
                                android:layout_width="fill_parent"
                                android:layout_height="wrap_content"
                                android:id="@+id/lbTaskDescVar"
                                android:layout_marginLeft="15dp"
                                android:hint="wie sieht dass denn aus?" />
                            <TextView
                                android:text="@string/UTlbTaskDate"
                                android:textAppearance="?android:attr/textAppearanceSmall"
                                android:layout_width="fill_parent"
                                android:layout_height="wrap_content"
                                android:id="@+id/lbTaskDate"
                                android:layout_marginTop="5dp" />
                            <TextView
                                android:textAppearance="?android:attr/textAppearanceSmall"
                                android:layout_width="fill_parent"
                                android:layout_height="wrap_content"
                                android:id="@+id/lbTaskDateVar"
                                android:layout_marginLeft="15dp"
                                android:hint="wie sieht dass denn aus?" />
                        </LinearLayout>
                        <LinearLayout
                            android:orientation="vertical"
                            android:minWidth="25px"
                            android:minHeight="25px"
                            android:layout_width="fill_parent"
                            android:layout_height="fill_parent"
                            android:id="@+id/linearLayout4">
                            <FrameLayout
                                android:id="@android:id/tabcontent"
                                android:layout_width="match_parent"
                                android:layout_height="fill_parent"
                                android:minWidth="25px"
                                android:minHeight="25px" />
                        </LinearLayout>
                    </LinearLayout>
                </ScrollView>
            </LinearLayout>
            <TabWidget
                android:id="@android:id/tabs"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:gravity="bottom" />
        </LinearLayout>
    </TabHost>
</LinearLayout> 
```

好吧，通过 tabcontent 显示的 listview 的确切代码是这样的：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:isScrollContainer="true">
    <LinearLayout
        android:orientation="vertical"
        android:minWidth="25px"
        android:minHeight="25px"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:id="@+id/linearLayout1"
        android:layout_marginTop="20dp">
        <LinearLayout
            android:orientation="horizontal"
            android:minWidth="25px"
            android:minHeight="25px"
            android:layout_width="fill_parent"
            android:id="@+id/linearLayout2"
            android:layout_height="57dp">
            <Button
                android:text="@string/EmpTbtnEmploAdd"
                android:id="@+id/btnEmploAdd"
                android:layout_width="0dp"
                android:layout_height="fill_parent"
                android:layout_weight="1" />
            <Button
                android:text="@string/EmpTbtnEmploDel"
                android:layout_width="0dp"
                android:layout_height="fill_parent"
                android:id="@+id/btnEmploDel"
                android:layout_weight="1" />
        </LinearLayout>
        <ListView
            android:minWidth="25px"
            android:minHeight="25px"
            android:layout_width="fill_parent"
            android:id="@+id/lvEMPT"
            android:layout_height="162px"
            android:scrollbars="vertical"
            android:isScrollContainer="true"
            android:divider="@android:color/darker_gray"
            android:dividerHeight="1px" />
    </LinearLayout>
</LinearLayout> 
```

我的问题是，如果我将它的高度属性设置为 fill_parent 或 match_parent 或者它的所有项目的大小，这个列表也不会扩展到父级。它甚至不会滚动我做什么。它唯一做的就是响应点击事件，至少显示的唯一项目（共 10 个）是在我点击它时变成蓝色（似乎是 sgs+ 的主要颜色），但后面还没有代码.

列表应该至少调整到父级或它拥有的项目数，直到某个点，然后它应该可以滚动。

怎么可能让那个东西以这种方式工作？

ps：你可能想知道162px，我试图通过代码调整那个该死的东西，但高度属性是只读的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T08:22:45.650

你正在使用`ListView`里面`ScrollView`。`ListView`不能以这种方式使用。

顺便说一句，您的布局效率极低 - 嵌套布局不利于性能。考虑使用`RelativeLayout`而不是多个`LinerLayout`

# excel - 一次删除所有行，一旦选择

> ID：13928877
> 
> 赞同：0
> 
> 时间：2012-12-18T08:19:28.223
> 
> 标签：excel, vbscript, vba

考虑下面的 Excel：

```
Id    Col1     Col2     Col3   Col4
25     s        p         n    
11     a        t         x     g
17                        r     t
10     a                  a     e
66     a                  a 
```

假设我有一个包含 ID 号的数组，
例如`Arr=(25,11,66)`

是否可以一次删除 ID 号在该数组中的所有行？

我需要先选择它们吗？

**代码：**

```
 Option Explicit

 Dim arr,objExcel1,strPathExcel1,objSheet1

 Set objExcel1 = CreateObject("Excel.Application")'Object for Condition Dump
 strPathExcel1 = "D:\VA\Test.xlsx"
 objExcel1.Workbooks.open strPathExcel1

 Set objSheet1 = objExcel1.ActiveWorkbook.Worksheets(4)

 arr = Array(5,11,66)

 objSheet1.Range("A" & Join(arr, ",A")).EntireRow.Delete 
```

**错误**“未知的运行时错误”——我得到

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T10:38:02.280

**编辑**：进一步优化代码

**编辑**：使用字典避免嵌套循环以提高性能

另请注意，由于标签是 vba 和 vbs，因此此处提供的答案在两者中都兼容。

这个解决方案是删除整行而不是只包含数据的范围。

**编辑**：更新代码以将 A 列的值与 Arr 中的值匹配

假设从第 2 行开始的值是 Numeric

**您可以使用Excel提供的记录宏功能来观察范围对象的样子**

[http://spreadsheets.about.com/od/advancedexcel/ss/080703macro2007.htm](http://spreadsheets.about.com/od/advancedexcel/ss/080703macro2007.htm)

```
Sub t()
    Dim str
    Dim arr
    Dim i
    arr = Array(1, 2, 4)
    Dim row
    Dim height
    Dim found
    Dim dataArray
    Dim d
    height = Cells(Rows.Count, 1).End(-4162).row
    ReDim dataArray(height - 2, 0) ' -1 for 0 index, -1 for the first row as header row, excluded
    str = ""
    dataArray = Range(Cells(2, 1), Cells(height, 1)).Value
    Set d = CreateObject("scripting.dictionary")
    For i = LBound(arr) To UBound(arr)
        If Not d.exists(arr(i)) Then
            d(arr(i)) =  0
        End If
    Next
    For i = LBound(dataArray, 1) To UBound(dataArray, 1)
        If d.exists(dataArray(i, 1)) Then
            'found in column 1
            str = str & i & ":" & i & ","
        Else
            'found = False
        End If
    Next
    If Len(str) > 0 Then
        str = Mid(str, 1, Len(str) - 1)
        Range(str).Delete

    End If

End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T11:48:20.323

这是一种蛮力方法。**根据 OP 的后评论更新**

**代码：**

```
Option Explicit

Sub overWriteRows()
Dim d As Object
Dim wkSheet As Worksheet
Dim myRange As Range
Dim myArray As Variant
Dim deleteArray As Variant
Dim finalArray As Variant
Dim upBound As Long, i As Integer
Dim j As Integer, k As Integer, m As Integer

Set d = CreateObject("scripting.dictionary")
Set wkSheet = Sheets("Sheet1") '-- set your own sheet e.g. Sheet2
Set myRange = wkSheet.Range("B3:F8") '-- set your own range e.g. "B2:E5"

'-- validate if range is null or not
If myRnage is nothing then
  Exit Sub
End if

myArray = Application.WorksheetFunction.Transpose(myRange)
'-- now if you do not have delete range in a sheet range then
    '-- you may populate the dictionary right away manually so
        '-- you do not need deleteArray
deleteArray = Application.WorksheetFunction.Transpose(Range("G3:I3"))
'-- if you are populating dictionary manually then
    '-- you may set upBound = Ubound(myArray,2) - d.Count
upBound = UBound(myArray, 2) - UBound(deleteArray)
ReDim finalArray(LBound(myArray, 2) To upBound, LBound(myArray) To UBound(myArray))

'-- replace this with your manual dictionary population code
For i = LBound(deleteArray) To UBound(deleteArray)
    If Not d.exists(deleteArray(i, 1)) Then
        d.Add deleteArray(i, 1), i
    End If
Next i

    k = 1

    For j = LBound(myArray, 2) To UBound(myArray, 2)
        If Not d.exists(myArray(1, j)) Then
        '-- if you want to remove even duplicate records then u can use this
           'd.Add myArray(1, j), k 
                For m = LBound(myArray) To UBound(myArray)
                    finalArray(k, m) = myArray(m, j)
                Next m
                k = k + 1
        End If
    Next j

'-- you may use following code to flush old row data
    'myRange.Value = ""
'-- output the new array to sheet by over writing the old range
'-- you may use myRange instead of "B11" to overwrite old data with filtered data
    wkSheet.Range("B11").Resize(UBound(finalArray), _ 
         UBound(Application.Transpose(finalArray))) = finalArray

    Set d = Nothing
End Sub 
```

**输出**

![在此处输入图像描述](../Images/307282e75f55f1cddbe6010ddc359dbd.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T13:12:14.677

不是答案，而是关于优化@Larry 解决方案的思考：

```
>> a = Array(1, 3, 5, 5, 3, 1)
>> b = Array(1, 2, 3, 4, 5, 6)
>> set c = CreateObject("Scripting.Dictionary")
>> for i = 0 To UBound(a)
>>   c(a(i)) = 0
>> next
>> for i = 0 To Ubound(b)
>>     if c.Exists(b(i)) then
>>        WScript.Echo "delete", i, b(i)
>>     end if
>> next
>>
delete 0 1
delete 2 3
delete 4 5 
```

1.  使用 dic(key)=value 而不是通过 .Exists 检查
2.  通过利用 .Exists 返回 bool 的事实来避免额外的变量（找到）

# sqlite - 使用每个日期的自定义记录排序来增强数据库表

> ID：13928882
> 
> 赞同：1
> 
> 时间：2012-12-18T08:20:01.743
> 
> 标签：sqlite, sql-order-by

想想当前的`VISITS`表：

```
ID   ID_PERSON  DATE
1    1          10/12/2012
2    5          10/12/2012
3    11         10/12/2012
4    55         10/13/2012
5    12         10/13/2012
6    6          10/14/2012
7    10         10/15/2012
8    13         10/15/2012
9    11         10/15/2012
10   5          10/16/2012 
```

我需要的是创建*每天*访问的自定义排序：

订单**1、2、3**用于日期10/ **12 /** **2012，1,2**用于日期**10/13/2012**等。

 **起初它可以是随机的，但随后用户可以创建订单，这不是我现在关心的问题。

向该表添加随机排序列的 SQL 命令是什么？

可能的结果：

```
ID   ID_PERSON  DATE         ORDER_IN_DATE
1    1          10/12/2012   2
2    5          10/12/2012   3
3    11         10/12/2012   1
4    55         10/13/2012   1
5    12         10/13/2012   1
6    6          10/14/2012   1
7    10         10/15/2012   1
8    13         10/15/2012   3
9    11         10/15/2012   2
10   5          10/16/2012   1 
```

排序规则：首次创建`ORDER_BY_DATE`列时随机。（当然，自动增加的值也算随机）。

**解决方案**： 更新表`VISIT`以添加`ORDER_IN_DATE`列，**b。**执行以下查询：

```
UPDATE VISIT
SET ORDER_IN_DATE = (SELECT TEMP_ORDER 
                     FROM (SELECT  V.ID AS TEMP_ID, 1 + ROWID % (SELECT COUNT(*)
                                                                 FROM VISIT
                                                                 WHERE DATE = V.DATE
                                                                ) AS TEMP_ORDER
                           FROM VISIT V
                           ORDER BY DATE, RANDOM())
                     WHERE ID = TEMP_ID); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T08:42:25.207

如果我的问题正确，您想先按日期排序，然后在日期内随机访问。

在这种情况下，这应该适合你：

```
SELECT * FROM visits
ORDER BY date, random() 
```

**编辑**：

如果您想将日期内的订单保存为附加列，请使用此选项`order_in_date`：

```
SELECT *,
    1 + rowid % (
        SELECT count(*) FROM visits
        WHERE date = v.date
    ) AS order_in_date
FROM visits v
ORDER BY date, random() 
```**

# asp.net - 'System.Web.UI.WebControls.LinqDataSourceSelectEventArgs.WhereParameters' 不能像方法一样使用

> ID：13928883
> 
> 赞同：0
> 
> 时间：2012-12-18T08:20:06.973
> 
> 标签：asp.net, linq

我使用了 gridview 和 linqdatasourse ，单击搜索按钮后，gridview 将由 linq 存储过程填充。

我像下面那样做，但我有错误““'System.Web.UI.WebControls.LinqDataSourceSelectEventArgs.WhereParameters'不能像方法一样使用”

```
var subjectFilter = e.WhereParameters("Subject"); 
```

网格视图：

```
<asp:GridView ID="GridViewDocuments_Search" 
              runat="server" 
              AutoGenerateColumns=False 
              Visible="False"
              onrowcommand="GridViewDocuments_Search_RowCommand"
              DataKeyNames="DocID" PageSize="100">
    <Columns>
        <asp:TemplateField HeaderText = "Details">
            <ItemTemplate>
                <asp:Button ID ="btn_Show" 
                            Text="Details" 
                            runat= "server" 
                            CommandName= "Details" 
                            CommandArgument=
                                '<%#Container.DataItemIndex%>' />
            </ItemTemplate>
        </asp:TemplateField>
        <asp:BoundField DataField="DocumentNo" 
                        HeaderText="DocumentNo" 
                        SortExpression="DocumentNo" />
        <asp:BoundField DataField="title" 
                        HeaderText="Title" 
                        SortExpression="title" />

        <asp:BoundField DataField="Docid" 
                        HeaderText="Docid" 
                        Visible="false" />
        <asp:CommandField ShowEditButton="True" />
        <asp:CommandField ShowDeleteButton="True" />
    </Columns>
</asp:GridView>

<asp:LinqDataSource ID="LinqDataSource2" 
                    runat="server" 
                    ContextTypeName="EDMSDataContext" 
                    OnSelecting="LinqDataSource2_Selecting">
    <WhereParameters>
        <asp:ControlParameter Name="Subject"
                              ControlID="txtSearchKeywords"
                              PropertyName="Text"
                              Type="String" />
    </WhereParameters>
</asp:LinqDataSource> 
```

代码：

```
protected void btnSearch_Click(object sender, EventArgs e)
{
    _DataContext = new EDMSDataContext();
    this.LinqDataSource2.WhereParameters["Subject"].DefaultValue = 
                        this.txtSearchKeywords.Text;
    this.GridViewDocuments_Search.DataBind();
}

public void LinqDataSource2_Selecting(object sender, 
                                      LinqDataSourceSelectEventArgs e)
{
    _DataContext = new EDMSDataContext();       
    var subjectFilter = e.WhereParameters("Subject");
    var query = _DataContext.spQuickSearchDoc(txtSearchKeywords.Text);
    e.Result = query;
} 
```

存储过程：

```
ALTER PROCEDURE [dbo].[spQuickSearchDoc]
@Searchtext varchar(50)=null

AS

select DocId,DocumentNo,Title,Unit
from tblDocuments
where DocumentNo like '%'+@SearchText + '%'
    or Title like '%'+@SearchText + '%'
    or Unit like '%'+@SearchText + '%' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T08:30:21.673

在方法 LinqDataSource2_Selecting 中，您必须像这样编写“[”括号：

```
var subjectFilter = e.WhereParameters["Subject"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T08:29:02.303

发生这种情况是因为该属性`WhereParameters`不能像方法一样使用，就像异常所说的那样。像这样查询属性：

```
e.WhereParameters["Subject"] 
```

如果你查看这个`LinqDataSourceSelectEventArgs`类，你会看到这个属性：

```
public IDictionary<string, Object> WhereParameters { get; } 
```

参考：

[LinqDataSourceSelectEventArgs](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.linqdatasourceselecteventargs.aspx)

[LinqDataSourceSelectEventArgs.WhereParameters 属性](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.linqdatasourceselecteventargs.whereparameters.aspx)

# ios - 如何制作特定的类文件 ARC - iphone

> ID：13928886
> 
> 赞同：4
> 
> 时间：2012-12-18T08:20:18.517
> 
> 标签：ios, publish-subscribe, xmppframework

我正在尝试将 XMPP 框架中的附加 ampp 类文件 XMPPubSub 类集成到我的应用程序中。它说我们必须为这些文件启用 ARC。

我在 Build Phases-> Compile Sources 中针对文件添加了 -fobjc-arc 标志。该类中有此代码

```
#if ! __has_feature(objc_arc)
#warning This file must be compiled with ARC. Use -fobjc-arc flag (or convert project to    ARC).
#endif 
```

即使那样我也得到这个错误

```
cc1obj: error: unrecognized command line option "-fobjc-arc" 
```

我已经看过这些链接

1）[如何在课堂上要求ARC？](https://stackoverflow.com/questions/8379287/how-to-require-arc-in-a-class)

2）[如何为特定文件添加ARC？](https://stackoverflow.com/questions/8768176/how-to-add-arc-for-specific-file)

3)[如何为单个文件启用 ARC](https://stackoverflow.com/questions/10523816/how-to-enable-arc-for-a-single-file)

但还没有运气。我在这里错过了什么吗？

请给一些建议

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T08:27:21.533

可能您的项目设置为使用错误的编译器。在您的项目设置中，检查您使用的是 Apple LLVM 编译器而不是 LLVM GCC。

从演示项目中查看此图像以了解在哪里寻找：

![在此处输入图像描述](../Images/355871c6af3485898e3beb090aa00bfc.png)

# mysql - 在嵌套集模型mysql中查找第一个可用节点

> ID：13928887
> 
> 赞同：1
> 
> 时间：2012-12-18T08:20:18.937
> 
> 标签：mysql, hierarchical-data, nested-set-model

我是嵌套集模型的新手，并试图从上到下和从左到右查找树中的第一个可用节点。每个父节点可以有 3 个子节点，我必须找到下一个可用的空闲节点。

到目前为止，表内存字段 m_id、lft、rgt 我只能找到深度。就像我说的我是新人不知道前面的路

```
SELECT node.m_id,node.lft,node.rgt, (COUNT(parent.m_id) - 1) AS depth 
```

FROM mem 作为节点，mem 作为父节点 WHERE node.lft BETWEEN parent.lft AND parent.rgt GROUP BY node.m_id ORDER BY depth,node.lft;

# javascript - 从对象数组中检索对象的元素

> ID：13928891
> 
> 赞同：2
> 
> 时间：2012-12-18T08:20:40.000
> 
> 标签：javascript

我有数组 NatArray 和对象 NatObj ，我将这个对象推送到前一个数组，但是在检索它时只获取最后一个条目，这是我的代码

```
var tArray = [];
var tObj ;
tObj = {};
tObj.TranslatedLocIpAddr = 202116107;
tObj.TranslatedLocPort = 123;
tObj.LocIp = 50529027;
tObj.LocPort = 324;
tObj.LocPortRange = 5;
count = 0;
tArray.push(tObj) ;  

tObj.TranslatedLocIpAddr = 202116108;
tObj.TranslatedLocPort = 130;
tObj.LocIp = 67372036;
tObj.LocPort = 324;
tObj.LocPortRange = 5;
count = 1;
tArray.push(tObj) ;  

for (var i = 0; i <= count ;i++) {
    if( (tArray[i].TranslatedLocIpAddr == tGlobalIp)
     && (tArray[i].TranslatedLocPort == tGlobalPort) ) {
        alert("Existing t entry"); 
        return false;
    } 
} 
```

我已经验证了这个`tArray[i].TranslatedLocIpAddr`值，每次它只检索数组中的最后一个值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T08:23:41.870

您正在更改同一个对象。您推`tObj`送到数组，但对象仍然存在，并且数组包含对该对象的引用。因此，任何更改都将反映在引用对象的任何位置。

有关更多详细信息，请参阅此 SO 答案：[Javascript by reference vs. by value](https://stackoverflow.com/questions/6605640/javascript-by-reference-vs-by-value)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T08:27:23.633

将对象推入数组只是将对象的引用放入数组中，而不是对象的副本。因此，您的两个数组元素都指向完全相同的对象，该对象显然包含您上次分配给它的所有属性。如果要修复代码，则需要实际创建第二个对象，如下所示：

```
var tArray = [];
var tObj ;
tObj = {};
tObj.TranslatedLocIpAddr = 202116107;
tObj.TranslatedLocPort = 123;
tObj.LocIp = 50529027;
tObj.LocPort = 324;
tObj.LocPortRange = 5;
count = 0;
tArray.push(tObj) ;  

// create second object that is different from the first object
tObj = {};
tObj.TranslatedLocIpAddr = 202116108;
tObj.TranslatedLocPort = 130;
tObj.LocIp = 67372036;
tObj.LocPort = 324;
tObj.LocPortRange = 5;
count = 1;
tArray.push(tObj) ;  

for (var i = 0; i <= count ;i++) {
    if( (tArray[i].TranslatedLocIpAddr == tGlobalIp)
     && (tArray[i].TranslatedLocPort == tGlobalPort) ) {
        alert("Existing t entry"); 
        return false;
    } 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T08:28:11.373

您正在将“对象引用”推送到数组。当您`tObj`在 first 之后更改时`tArray.push(tObj);`，您的更改也会反映在数组中已经存在的对象中（因为那是同一个对象。“对象引用”几乎只是指向对象的指针。将对象推送到数组两次，并且您有 2 个指向同一个对象的指针。）

尝试使用对象文字表示法：

```
tArray.push({
    "TranslatedLocIpAddr": 202116107,
    "TranslatedLocPort": 123,
    "LocIp": 50529027,
    "LocPort": 324,
    "LocPortRange": 5
}); 
```

这将在您每次推送时创建一个新对象，而不会干扰引用。
（而且代码更少;-)）

# iphone - 将邮政编码放入文本字 段

> ID：13928904
> 
> 赞同：0
> 
> 时间：2012-12-18T08:21:28.563
> 
> 标签：iphone, objective-c, ios, uitextfield, location

因此，我查看了 Apple 获取用户位置的示例代码。这对我来说很好，它的显示位置是正确的。

现在我想在我创建的名为“zipCode”的文本字段中显示邮政编码。我该怎么做？

试过：

```
- (void)locationManager:(CLLocationManager *)manager
     didUpdateLocations:(NSArray *)locations {
    CLLocation *location = [locations objectAtIndex:0];
    NSLog(@"lat%f - lon%f", location.coordinate.latitude, location.coordinate.longitude);
    zipCode.text = self.placemark.postalCode;
} 
```

但这没有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T08:32:12.283

您需要使用 reverseGeocodeLocation，例如：

```
- (void)locationManager:(CLLocationManager *)manager
     didUpdateLocations:(NSArray *)locations {

    CLLocation *location = [locations objectAtIndex:0];
    CLGeocoder *geocoder = [[CLGeocoder alloc] init];
    [geocoder reverseGeocodeLocation:location completionHandler:
     ^(NSArray* placemarks, NSError* error){
         if ([placemarks count] > 0)
         {
             CLPlacemark *placemark = [placemarks objectAtIndex:0];
             zipCode.text = placemark.postalCode;
         }
     }];
} 
```

记得导入 CoreLocation.framework

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T08:42:58.180

如果您想要关于地图上某个位置的隐蔽信息，则必须使用反向地理编码。
都写[在这里了](http://developer.apple.com/library/ios/ipad/#documentation/UserExperience/Conceptual/LocationAwarenessPG/UsingGeocoders/UsingGeocoders.html#//apple_ref/doc/uid/TP40009497-CH4-SW1)。

# visual-studio-2012 - WF4 - 设计器 - 右键单击 - ArgumentException - “已添加具有相同键的项目”

> ID：13928911
> 
> 赞同：1
> 
> 时间：2012-12-18T08:22:10.107
> 
> 标签：visual-studio-2012, workflow-foundation-4, designer

我正在使用 Visual Studio 2012 Ultimate，当我在复制\剪切和粘贴操作后单击鼠标右键时收到 ArgumentException...

这是设计师的错误吗？识别这里有什么问题的最简单方法是什么？

谢谢！

![在此处输入图像描述](../Images/cf0e9bf42d75a2521daf98e23c65a884.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T16:46:19.813

好消息现在有一个修复程序...

[http://support.microsoft.com/kb/2828841](http://support.microsoft.com/kb/2828841)

# android - 如何从另一种方法中获取价值

> ID：13928912
> 
> 赞同：-4
> 
> 时间：2012-12-18T08:22:10.810
> 
> 标签：android, methods, parameters

如，

> 公共无效 ShowConventView2(){
> 
> ```
>  setContentView(R.layout.main);
> 
>      String usr = "happy"; } 
> ```

如何将 usr 的值传递给 ShowConventView3 ？如果 ShowConventView3 是

> 公共无效 ShowConventView3(){
> 
> ```
>  setContentView(R.layout.second);
> 
>      TextView txt = (TextView)findViewById(R.id.textView1);
> 
>      txt.setText(usr); } 
> ```

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T08:30:21.997

```
public void ShowConventView2() {
     setContentView(R.layout.main);
     String usr = "happy";
     ShowConventView3(usr);
}

public void ShowConventView3(String text){
     setContentView(R.layout.second);
     TextView txt = (TextView)findViewById(R.id.textView1);
     txt.setText(text); 
} 
```

# windows-phone-8 - C# 和 Windows Phone 7 中的操作/委托（使用 RestSharp）

> ID：13928915
> 
> 赞同：0
> 
> 时间：2012-12-18T08:22:24.367
> 
> 标签：windows-phone-8, restsharp

我正在用`RestSharp`WP8 编写一个程序，确切地说是 LastFMSharp，但我必须将方法更新到`ExecuteAsync`它的 WP。问题在于 Execute(request) 返回一个 RestResponse 之前，ExecuteAsync 返回一个 RestRequestAsyncHandle。我的方法需要 RestResponse。那么如何将它放入 var 响应中呢？请记住，结构是

```
RestSharp.RestClient.ExecuteAsync<T>(RestSharp.IRestRequest,System.Action<RestSharp.IRestResponse<T>,RestSharp.RestRequestAsyncHandle>) 
```

谢谢您的帮助！

原来的：

```
public RestResponse<T> Execute<T>(RestRequest request) where T : new()
{
     request.AddParameter("api_key", _apiKey);

     var response = _restClient.Execute<T>(request);
     RequestCount++;
     DataCount += response.RawBytes.Length;
     return response;
} 
```

改变（不工作不知道应该是什么回调）：

```
public RestResponse<T> Execute<T>(RestRequest request) where T : new()
{
         request.AddParameter("api_key", _apiKey);

        //var response = 
        _restClient.ExecuteAsync(request, response =>
                        {
                            callback(response.Content);
                        });

        RequestCount++;
        DataCount += response.RawBytes.Length;
        return response;
} 
```

回调初始化响应？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:43:09.383

你不能因为响应直到将来某个时间才会发生，此时回调将被调用。

由于这是 Windows Phone 8，请尝试使用该[`async\await`模式](http://msdn.microsoft.com/en-gb/library/vstudio/hh191443.aspx)。

# javascript - 缩小之后加载的 RequireJS 模块

> ID：13928917
> 
> 赞同：3
> 
> 时间：2012-12-18T08:22:31.197
> 
> 标签：javascript, requirejs

我正在基于 RequireJS 和 .NET 后端构建一个中型单页 WebApp，它为我处理 Ajax“页面更改”。每次第一次加载页面时，模块控制器（JS）都会加载相应的 JS-Module。

我正在使用 SublimeText 2 并建立了一个配置，可以在保存到一个文件时编译和缩小我的 JS。配置保存在 require.config 调用中。

这适用于 RequireJS 可跟踪的所有依赖项。但是，我想改进构建过程以缩小不直接需要并单独保存在另一个文件夹中的模块（最好是文件夹）。

这是我的 RequireJS 配置：

```
require.config({
    appDir: ''
,   paths: {
        'jquery': [
            '//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min'
        ,   'lib/jquery'
        ]
    ,   'underscore': [
            '//raw.github.com/documentcloud/underscore/master/underscore-min'
        ,   'lib/underscore'
        ]
    ,   'modernizr': 'lib/modernizr'
    ,   'jquery-ui': 'lib/jquery-ui'
    }
,   shim: {
        'jquery-ui': { deps: ['jquery'] }
    ,   'lib/jquery-tablesorter': { deps: ['jquery'], exports: 'jQuery.fn.tablesorter' }
    ,   'underscore': { exports: '_' }
    }
,   exclude: ['jquery', 'jquery-ui', 'underscore']
,   name: 'main'
,   out: '../min/main.js'
,   optimize: 'none'
});

require(['jquery', 'modules/ModuleController', 'jquery-ui', 'util/Log'], 
    function($, Controller) {
        // jQuery was extended by jqueryUI
        // window.log is now accessible

        $(function(){
            Controller.setup({
                objGlobal: window.RecruitingApp
            });
        })
}); 
```

我的文件夹结构如下所示：

```
/AppRoot
    /dev
        /lib
        /modules
        /util
        build.js
        main.js
    /min
        /lib
        /* here i'd like to have a generated modules folder with the minified modules */
        main.js 
```

模块加载器如下所示：

```
define(['jquery', 'underscore'], function($, _) {
    var i = {
    };

    var o = {
        objGlobal: null
    };

    var objModules = {};

    var setup = function(options) {
        o = $.extend(o, options);

        o.objGlobal.moduleListener = function(module) {
            require(['modules/'+module+''], function(Module){
                if(objModules.module && _.isFunction(objModules.module.destroy)) {
                    objModules.module.destroy();
                }

                o.objGlobal.currentModule = module;
                objModules.module = Module;
                Module.setup();
            });
        };

        o.objGlobal.moduleListener(o.objGlobal.currentModule);
    }

    // method interface
    i.setup = setup;

    return i;
}); 
```

是否可以更改 RequireJS 配置文件以自动缩小文件夹中的每个文件并将它们保存在相应的文件夹中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-11T15:51:54.460

据我了解，您已经在使用 require.js 优化工具“r.js”。

r.js 有两种优化代码的方法，第一种方法是当您想要优化单个模块并将其依赖于单个 js 文件时，第二种方法是优化整个项目/多个模块。

您可以通过在 r.js 构建配置中使用“模块”选项来实现这一点。[看看这里。](http://requirejs.org/docs/optimization.html#wholeproject)

# google-apps-script - 如何使用谷歌电子表格和谷歌分析 API 计算平均每小时访问次数

> ID：13928925
> 
> 赞同：0
> 
> 时间：2012-12-18T08:22:53.257
> 
> 标签：google-apps-script, google-sheets, google-analytics-api

嗨，我需要一个图表，其中包含一周中每一天的平均每小时访问量。它将计算过去 3 个月的平均值。

我使用“谷歌分析魔术脚本”来拉每小时访问谷歌电子表格，现在我不知道如何有效地计算平均值。这是我的表，我无法插入图像（我是新成员）所以我必须描述

*   A列是日期

*   B 列是一天中的小时（0,1,2,3,4...）

*   C列是访问次数

*   D 列计算星期几（Sa,Su,M,Tu,W,Th...）

*   E 列结合了日期和时间 (Sa0, Sa1)

    现在我需要平均对应于所有 Sa0、Sa1 等的所有访问值。这有意义吗？

我知道我可以根据 E 列对工作表进行排序，然后手动计数，但我想使用一个公式，这样我就可以创建一个自动报告。

非常感谢

```
A          B    C    D   E
date     hour visits day day+hour
9/8/2012    0   9   Sa  Sa0
9/8/2012    1   8   Sa  Sa1
9/8/2012    2   1   Sa  Sa2
9/8/2012    3   2   Sa  Sa3
9/8/2012    4   2   Sa  Sa4
9/8/2012    5   5   Sa  Sa5
9/8/2012    6   12  Sa  Sa6
9/8/2012    7   23  Sa  Sa7
9/8/2012    8   53  Sa  Sa8
9/8/2012    9   42  Sa  Sa9
9/8/2012    10  59  Sa  Sa10
9/8/2012    11  56  Sa  Sa11
9/8/2012    12  67  Sa  Sa12
9/8/2012    13  66  Sa  Sa13
9/8/2012    14  70  Sa  Sa14
9/8/2012    15  81  Sa  Sa15
9/8/2012    16  54  Sa  Sa16
9/8/2012    17  62  Sa  Sa17
9/8/2012    18  44  Sa  Sa18
9/8/2012    19  75  Sa  Sa19
9/8/2012    20  101 Sa  Sa20
9/8/2012    21  80  Sa  Sa21
9/8/2012    22  68  Sa  Sa22
9/8/2012    23  27  Sa  Sa23
9/9/2012    0   27  Su  Su0
9/9/2012    1   4   Su  Su1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T11:18:40.097

如果我理解正确：

`=QUERY(C:E;"select E, avg(C) where E != '' group by E label avg(C) 'Average Visits'";1)`

[查询功能](http://support.google.com/drive/bin/answer.py?hl=en&answer=1388882)

# mysql - MySQL：将列从一个表快速复制到另一个表

> ID：13928926
> 
> 赞同：2
> 
> 时间：2012-12-18T08:22:57.627
> 
> 标签：mysql, sql, performance

对于数据库更新，我想将 5 列从一个表复制到同一个 MySQL 数据库中的另一个表。两个表的行数相同，每行都有一个 ID，两个表中的 ID 相等（所以我想合并这些表）。我目前的方法是通过以下更新语句执行此操作：

```
update table_a, table_b set
   table_a.column1 = table_b.column1,
   table_a.column2 = table_b.column2,
   ...
   where table_a.id = table_b.id 
```

我想知道是否有更快的方法来做到这一点，因为大桌子需要一些时间。

谢谢你的帮助，迈克尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T10:22:45.467

我不知道它会有多大的不同，但是您可以尝试 insert-select [On duplicate key ...] 代替。 [http://dev.mysql.com/doc/refman/5.1/en/insert-select.html](http://dev.mysql.com/doc/refman/5.1/en/insert-select.html)

通常写入数据是一个缓慢的过程。硬盘本身就是瓶颈。

# c++ - 如何在 Windows NT 中获得线程的动态优先级？

> ID：13928928
> 
> 赞同：3
> 
> 时间：2012-12-18T08:23:01.983
> 
> 标签：c++, winapi

Win32 API 中确实存在获取线程和进程的基本优先级的方法：

> DWORD WINAPI GetPriorityClass（ *在* HANDLE hProcess 中）；

&

> int WINAPI GetThreadPriority（ *在* HANDLE hThread 中）；

但是我怎样才能获得动态优先级，因为系统可能会提高和降低动态优先级？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-04T13:05:41.640

`GetPriorityClass`您可以使用and获得静态优先级`GetThreadPriority`。MSDN 有一篇关于[调度优先级](http://msdn.microsoft.com/en-us/library/windows/desktop/ms685100%28v=vs.85%29.aspx)的文章，其中包含一个表格，概述了哪个进程优先级和线程优先级导致哪个基本优先级。

我相信您指的是[优先级提升](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684828%28v=vs.85%29.aspx)！？有一些函数可以给你一个 BOOL 说明是否为进程/线程启用或禁用了优先级提升`GetProcessPriorityBoost`。`GetThreadPriorityBoost`但似乎没有官方 API 来检索动态优先级（提升）。

# objective-c - 如何将值从屏幕返回到ios上的前一个屏幕？

> ID：13928929
> 
> 赞同：0
> 
> 时间：2012-12-18T08:23:25.230
> 
> 标签：objective-c, ios, return-value

我有 android 的经验，但在 ios 上真的很新。在 Android 上，我可以使用 startActivityForResult() 从屏幕 A 导航到屏幕 B。然后，当 B 关闭时，系统会通过回调方法通知屏幕 A 执行某些操作（例如获取返回值、刷新数据、。 ..)

我想在这里问的是：有没有办法注册一个回调函数，当屏幕B关闭时会调用它？如何将屏幕B的数据返回到屏幕A？

我知道我可以声明一个公共属性，然后从屏幕 B 为其设置值。但是，我认为这种方式可能会使我的源代码复杂且安全性降低。（即我不想将财产打开到其他屏幕进行评估）。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T08:30:25.577

是的，有更好的方法来做到这一点。这称为委托。在视图控制器中，您正在解雇您创建一个`@protocol`和一个`@property (nonatomic, weak) id <ProtocolName> delegate;`. 您从之前的 View Controller: 中设置此值`secondVC.delegate = self`。它就像一个Java接口。然后，当您的第二个 View Controller 消失时，您调用委托方法（例如 in `viewWillDisappear:`）。

希望这是有道理的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T08:28:37.780

您可以为此使用委托模式。

（看看 UITextField、UITableView 等......他们都使用这种模式）。

您在第二个视图上设置了一个委托属性，称为...

```
SecondViewDelegate 
```

在协议中你给它一个方法，比如......

```
- (void)secondViewDidSelectValue:(NSString*)selectedValue; 
```

然后在第一个视图中，将其设置为第二个视图的代表。

有很多关于这种模式的资源。

# php - $form.submit(function(){......}); 不管用

> ID：13928930
> 
> 赞同：1
> 
> 时间：2012-12-18T08:23:35.460
> 
> 标签：php, html, jquery

我创建了一个注册表单并使用 ajax 来验证表单。我的问题是 $form.submit(function(){.....}); 不工作。我会解释这个问题。下面显示的是 ajax 的代码。

```
$(document).ready(function()
    {
        var $form=$('#myform');
        //debugger;
        $form.submit(function()
        {
            $.ajax({
                type:'POST',
                url:'registrationvalidation.php',
                data:$("#myform").serialize(),
                success:function(data)
                {
                    alert(data);
                    if(data=="ok")
                        {
                           return true;
                        }
                        else
                        {
                            alert(data);
                            return false;
                        }
                }
            });
        });
    }); 
```

并将提交替换为实时功能，它按要求工作。这是工作代码。

```
$(document).ready(function()
    {
        //var $form=$('#myform');

        //debugger;
        //$form.submit(function()
        $("#submit").live('click',function()
        {
            $.ajax({
                type:'POST',
                url:'registrationvalidation.php',
                data:$("#myform").serialize(),
                success:function(data)
                {
                    alert(data);
                    if(data=="ok")
                        {
                           return true;
                        }
                        else
                        {
                            alert(data);
                            return false;
                        }
                }
            });
        });
    }); 
```

但是在我的程序中，我想使用提交功能，因为我在提交后将一些数据从 html 表单发布到另一个页面。当我使用 chrome 开发人员工具执行相同的代码（第一个代码）时，它工作正常。任何人都知道解决方案.. Html 形式

```
<form id="myform" action="insert.php" method="post" >
        <h1>Personal Information</h1>
        <fieldset id="personal">
            <input id="firstname" name="firstname" type="text" placeholder="FIRST NAME" autofocus><br>
            <input id="lastname" name="lastname" type="text" placeholder="LAST NAME"><br>
            <input id="gender" name="gender" type="text" placeholder="GENDER" ><br>
            <input id="email" name="email" type="email" placeholder="EMAIL"><br>
            <input id="date" name="date" type="date" placeholder="JOINING DATE" ><br>
            <input id="designation" name="designation" type="text" placeholder="DESIGNATION"><br>
        </fieldset>
        <h1>Login Info</h1>
        <fieldset id="logininfo">
            <input id="username" name="username" type="text" placeholder="USER NAME" ><br>
            <input id="password1" name="password1" type="password" placeholder="PASSWORD" ><br>
            <input id="password2" name="password2" type="password" placeholder="CONFORM PASSWORD" ><br>
        </fieldset>
        <h1>Permissions</h1>
        <fieldset id="permission" align="center">
            View&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:<input id = "VIEW" name="view" type = "checkbox" value = "view" /> <br>
            Edit&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:<input id = "EDIT"name="edit" type = "checkbox" value = "edit" /> <br>
            Delete&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:<input id = "DELETE"name="delete" type = "checkbox" value = "delete" /> <br>
            Permission&nbsp;&nbsp;:<input id = "PERMISSION" name="permission"type = "checkbox" value = "perms" /> <br>
            Add User&nbsp;&nbsp;&nbsp;:<input id = "ADD" name="add" type = "checkbox" value = "add" /> <br>
        </fieldset>
        <fieldset id="actions">
            <input type="button" id="submit" value="SUBMIT" />
            <!--<input type="submit" id="submit" value="SUBMIT" />this is for submit function-->
            <div id="idd"></div>
        </fieldset>
    </form> 
```

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T08:30:02.177

您应该取消表单提交并在 AJAX 成功时手动提交：

```
var oForm = $('#myform');
oForm.submit(function()
{
    $.ajax({
        type:'POST',
        url:'registrationvalidation.php',
        data: oForm.serialize(),
        success:function(data)
        {
            alert(data);
            if(data=="ok")
            {
                oForm[0].submit();
            }
            else
            {
                alert(data);
            }
        }
    });
    return false;
}); 
```

在 AJAX 回调中设置“return false”是没有意义的，它不会影响表单提交。

# vb.net - 从“My.resources”VB.net 复制文件的进度条

> ID：13928938
> 
> 赞同：1
> 
> 时间：2012-12-18T08:23:56.490
> 
> 标签：vb.net, progress-bar, file-copying, my.resources

我正在尝试使用进度条从“My.resources”复制文件，我搜索了许多其他文件复制进度条脚本，但它们都不支持从内部复制；文件。这是我的代码：

```
Private Sub Install_Click(sender As Object, e As System.EventArgs) Handles Install.Click
    InstallDialog.ShowNewFolderButton = True
    InstallDialog.ShowDialog()
    If Not (IO.Directory.Exists(IO.Path.GetTempPath & "extract")) Then
        IO.Directory.CreateDirectory(IO.Path.GetTempPath & "extract")
    End If
    If Not (InstallDialog.SelectedPath = "") Then
        Dim exepath As String = IO.Path.GetTempPath & "extract\7zG.exe"
        Dim archpath As String = IO.Path.GetTempPath & "extract\arch.7z"
        If File.Exists(archpath) = False Then
            Dim b As Byte() = My.Resources.arch
            Dim TempFile As IO.FileStream = IO.File.Create(archpath)
            TempFile.Write(b, 0, b.Length)'Copies the archive to disk
            TempFile.Flush()
            TempFile.Close()
        End If
        If File.Exists(exepath) = False Then
            Dim c As Byte() = My.Resources.zipexe
            Dim TempFile As IO.FileStream = IO.File.Create(exepath)
            TempFile.Write(c, 0, c.Length)'Copies the 7-zip executable to disk
            TempFile.Flush()
            TempFile.Close()
        End If
            Dim p As New ProcessStartInfo
            p.WindowStyle = ProcessWindowStyle.Normal
            p.FileName = exepath
            p.Arguments = " x " & archpath & " -mmt -aoa -o" & InstallDialog.SelectedPath
            Dim Extract As Process = Process.Start(p)'runs 7-zip to extract the archive
            Dim i As Boolean = True
            Do While i = True
                If Extract.HasExited = True Then
                    i = False
                Else
                    Threading.Thread.Sleep(2000)
                End If
            Loop
            Msgbox("Installation Complete")            
    End If
End Sub 
```

我的进度条被称为“copyprog”，“arch.7z”大约为 150Mb，并且 UI 在复制时挂起，我的用户正在使用非常慢的机器，并且希望得到一些响应，而不是应用程序在单击按钮时冻结。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:09:52.243

这是实现您想要的方法（许多方法中的一种）。这种方法使 UI 单独存在，因此它会很好地更新。我写了对两个进度条的支持，一个用于总进度（文件数），一个用于当前进度。该代码支持取消。

根据需要使用和修改，它按原样提供。

如前所述，代码假设表单上有两个进度条以及两个按钮（安装和取消） - 请参见下面的快照。

![演示截图](../Images/78219234b5ca783561065312c280a810.png)

## 用法

您只需将要复制的所有资源添加到任务列表中，然后启动提示。

```
AddCopyTask(resourceToCopy1, pathToWhereToCopy1)
AddCopyTask(resourceToCopy2, pathToWhereToCopy2)
...
StartCopyCue() 
```

完整代码：

```
Imports System.ComponentModel
Imports System.IO

Public Class Form1

    'If you use small file sizes, lower this value to have progress-bar going
    Private Const BufferSize As Integer = 4096

    Private WithEvents bgCopier As New BackgroundWorker

    Private Class WorkerPacket
        Public DataRef As Byte()
        Public Filename As String
    End Class

    Private taskList As New List(Of WorkerPacket)
    Private _cancel As Boolean = False

    '
    '-- Setup worker
    '
    Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load

        bgCopier.WorkerReportsProgress = True
        bgCopier.WorkerSupportsCancellation = True

    End Sub
    Private Sub Form1_FormClosing(sender As Object, e As System.Windows.Forms.FormClosingEventArgs) Handles Me.FormClosing

        If bgCopier IsNot Nothing Then
            bgCopier.Dispose()
        End If

    End Sub
    '
    '-- UI
    '
    Private Sub Install_Click(sender As System.Object, e As System.EventArgs) Handles Install.Click

        '
        '-- This is where you initilize the paths and data you want to copy.
        '-- For this example I use the same data
        '
        AddCopyTask(My.Resources.TestData, "c:\test1.dat")
        AddCopyTask(My.Resources.TestData, "c:\test2.dat")
        AddCopyTask(My.Resources.TestData, "c:\test3.dat")

        StartCopyCue()

    End Sub
    Private Sub CancelCopy_Click(sender As System.Object, e As System.EventArgs) Handles CancelCopy.Click

        _cancel = True

        If bgCopier.IsBusy Then
            bgCopier.CancelAsync()
        End If

    End Sub
    '
    '-- The methods to build and perform task-list
    '
    Private Sub AddCopyTask(data As Byte(), filename As String)
        '
        '-- Create argument packet for worker
        '
        Dim wp As New WorkerPacket
        wp.DataRef = data
        wp.Filename = filename

        taskList.Add(wp)

    End Sub
    Private Sub StartCopyCue()
        '
        '-- Init total progressbar
        '
        ProgressBarTotal.Value = 0
        ProgressBarTotal.Maximum = taskList.Count

        _cancel = False
        '
        '-- Update UI
        '
        Install.Enabled = False
        CancelCopy.Enabled = True
        '
        '-- Go
        '
        CopyBytesToFileMT()

    End Sub
    Private Sub CopyBytesToFileMT()
        '
        '-- Get work packet
        '
        Dim wp As WorkerPacket = taskList(0)
        '
        '-- Init progress bars
        '
        ProgressBarCurrent.Value = 0
        ProgressBarTotal.Value += 1
        '
        '-- Start worker
        '
        If Not _cancel Then
            Label1.Text = String.Format("Copying {0}...", Path.GetFileName(wp.Filename))
            bgCopier.RunWorkerAsync(wp)
        End If

    End Sub

    Private Sub DoWork(s As Object, e As DoWorkEventArgs) Handles bgCopier.DoWork

        Dim wp As WorkerPacket = CType(e.Argument, WorkerPacket)
        '
        '-- Calculate segments
        '
        '   note: byte().length returns integer which means we're limited to 2 Gb files
        '
        Dim length As Integer = wp.DataRef.Length
        Dim segments As Integer = CInt(Math.Floor(length / BufferSize))
        Dim leftOver As Integer = length - segments * BufferSize

        Dim bf As Integer = BufferSize
        If bf > length Then bf = length

        Dim fs As New FileStream(wp.Filename,
                                 FileMode.Create,
                                 FileAccess.Write,
                                 FileShare.None)
        '
        '-- Copy blocks
        '
        For i As Integer = 0 To segments - 1
            '
            '-- Cancelled?
            '
            If e.Cancel Then
                leftOver = 0
                Exit For
            End If
            '
            '-- Write a segment to file
            '
            Dim pos As Integer = i * BufferSize
            fs.Write(wp.DataRef, pos, bf)
            '
            '-- Report current progress
            '
            bgCopier.ReportProgress(CInt(pos / length * 100))

        Next
        '
        '-- Copy any remainer
        '
        If leftOver > 0 Then
            fs.Write(wp.DataRef, segments * BufferSize, leftOver)
            bgCopier.ReportProgress(100)
        End If
        '
        '-- Done
        '
        fs.Flush()
        fs.Dispose()

    End Sub
    Private Sub CopyProgress(s As Object, e As ProgressChangedEventArgs) Handles bgCopier.ProgressChanged

        ProgressBarCurrent.Value = e.ProgressPercentage

    End Sub
    Private Sub CopyCompleted(s As Object, e As RunWorkerCompletedEventArgs) Handles bgCopier.RunWorkerCompleted
        '
        '-- Remove task just finished
        '
        taskList.RemoveAt(0)
        '
        '-- Do we have another task?
        '
        If taskList.Count > 0 AndAlso Not _cancel Then
            CopyBytesToFileMT()
        Else
            If _cancel Then
                Label1.Text = "Cancelled by user."
            Else
                Label1.Text = "Completed!"
                '
                '-- Execute other tasks here...
                '
            End If
            '
            '-- Update UI
            '
            CancelCopy.Enabled = False
            Install.Enabled = True
        End If

    End Sub

End Class 
```

**更新：**以下修改在复制任务完成后运行一个进程。根据需要进行修改。

```
Imports System.ComponentModel
Imports System.IO
Imports System.Security

Public Class Form1

    Private Event AllCompleted()

    Private Const BufferSize As Integer = 4096

    Private WithEvents bgCopier As New BackgroundWorker
    Private WithEvents procUnzipper As New Process

    Private Class WorkerPacket
        Public DataRef As Byte()
        Public Filename As String
    End Class

    Private taskList As New List(Of WorkerPacket)
    Private _cancel As Boolean = False

    '
    '-- Setup worker
    '
    Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load

        bgCopier.WorkerReportsProgress = True
        bgCopier.WorkerSupportsCancellation = True

        procUnzipper.EnableRaisingEvents = True
        procUnzipper.SynchronizingObject = Me

    End Sub
    Private Sub Form1_FormClosing(sender As Object, e As System.Windows.Forms.FormClosingEventArgs) Handles Me.FormClosing

        bgCopier.Dispose()
        procUnzipper.Dispose()

    End Sub
    '
    '-- UI
    '
    Private Sub Install_Click(sender As System.Object, e As System.EventArgs) Handles Install.Click
        '
        '-- This is where you initilize the paths and data you want to copy.
        '-- For this example I use the same data
        '
        AddCopyTask(My.Resources.TestData, "c:\test1.dat")
        AddCopyTask(My.Resources.TestData, "c:\test2.dat")
        AddCopyTask(My.Resources.TestData, "c:\test3.dat")

        StartCopyQue()

    End Sub
    Private Sub CancelCopy_Click(sender As System.Object, e As System.EventArgs) Handles CancelCopy.Click

        _cancel = True

        If bgCopier.IsBusy Then
            bgCopier.CancelAsync()
        End If

    End Sub
    '
    '-- The methods to build and perform task-list
    '
    Private Sub AddCopyTask(data As Byte(), filename As String)
        '
        '-- Create argument packet for worker
        '
        Dim wp As New WorkerPacket
        wp.DataRef = data
        wp.Filename = filename

        taskList.Add(wp)

    End Sub
    Private Sub StartCopyQue()
        '
        '-- Init total progressbar
        '
        ProgressBarTotal.Value = 0
        ProgressBarTotal.Maximum = taskList.Count

        _cancel = False

        '
        '-- Update UI
        '
        Install.Enabled = False
        CancelCopy.Enabled = True
        '
        '-- Go
        '
        CopyBytesToFileMT()

    End Sub
    Private Sub CopyBytesToFileMT()
        '
        '-- Get work packet
        '
        Dim wp As WorkerPacket = taskList(0)
        '
        '-- Init progress bars
        '
        ProgressBarCurrent.Value = 0
        ProgressBarTotal.Value += 1
        '
        '-- Start worker
        '
        If Not _cancel Then
            Label1.Text = String.Format("Copying {0}...", Path.GetFileName(wp.Filename))
            bgCopier.RunWorkerAsync(wp)
        End If

    End Sub

    Private Sub DoWork(s As Object, e As DoWorkEventArgs) Handles bgCopier.DoWork

        Dim wp As WorkerPacket = CType(e.Argument, WorkerPacket)
        '
        '-- Calculate segments
        '
        '   note: byte().length returns integer which means we're limited to 2 Gb files
        '
        Dim length As Integer = wp.DataRef.Length
        Dim segments As Integer = CInt(Math.Floor(length / BufferSize))
        Dim leftOver As Integer = length - segments * BufferSize

        Dim bf As Integer = BufferSize
        If bf > length Then bf = length

        Dim fs As New FileStream(wp.Filename,
                                 FileMode.Create,
                                 FileAccess.Write,
                                 FileShare.None)
        '
        '-- Copy blocks
        '
        For i As Integer = 0 To segments - 1
            '
            '-- Cancelled?
            '
            If e.Cancel Then
                leftOver = 0
                Exit For
            End If
            '
            '-- Write a segment to file
            '
            Dim pos As Integer = i * BufferSize
            fs.Write(wp.DataRef, pos, bf)
            '
            '-- Report current progress
            '
            bgCopier.ReportProgress(CInt(pos / length * 100))

        Next
        '
        '-- Copy any remainer
        '
        If leftOver > 0 Then
            fs.Write(wp.DataRef, segments * BufferSize, leftOver)
            bgCopier.ReportProgress(100)
        End If
        '
        '-- Done
        '
        fs.Flush()
        fs.Dispose()

    End Sub
    Private Sub CopyProgress(s As Object, e As ProgressChangedEventArgs) Handles bgCopier.ProgressChanged

        ProgressBarCurrent.Value = e.ProgressPercentage

    End Sub
    Private Sub CopyCompleted(s As Object, e As RunWorkerCompletedEventArgs) Handles bgCopier.RunWorkerCompleted
        '
        '-- Remove task just finished
        '
        taskList.RemoveAt(0)
        '
        '-- Do we have another task?
        '
        If taskList.Count > 0 AndAlso Not _cancel Then
            CopyBytesToFileMT()
        Else
            If _cancel Then
                Label1.Text = "Cancelled by user."
            Else
                Label1.Text = "Unzipping..."
                '
                '-- Start process
                '
                ProgressBarTotal.Style = ProgressBarStyle.Marquee

                Dim arg As String = String.Format(" x ""{0}"" -mmt -aoa -o ""{1}""",
                                                  "theZipFile.7z",
                                                  "installpath\")

                procUnzipper.StartInfo.FileName = "...\7z.exe"
                procUnzipper.StartInfo.Arguments = arg
                procUnzipper.Start()

            End If

        End If

    End Sub
    Private Sub UnzipCompleted(s As Object, e As EventArgs) Handles procUnzipper.Exited

        'just for example
        'this following require syncronizationobject set, see form_load
        RaiseEvent AllCompleted()

    End Sub
    Private Sub Done() Handles Me.AllCompleted
        '
        '-- Update UI
        '
        Label1.Text = "Completed!"

        ProgressBarTotal.Style = ProgressBarStyle.Blocks
        CancelCopy.Enabled = False
        Install.Enabled = True

    End Sub

End Class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T14:08:58.657

如果您可以使用 VS2012 和/或 Async 功能，它或多或少很简单。请注意，像往常一样，您给定的问题有几十个“有效”的解决方案！

```
 ' Write a file with progressbar updates

    Dim output(1000 * 1000) As Byte ' the bytes to be written
    Dim numbytes As Integer = 4096 ' number of bytes per write command

    Using fs As New FileStream("path", FileMode.Create, FileAccess.Write, FileShare.Read)
        Dim outpointer As Integer = 0
        While outpointer <> output.Length
            numbytes = Math.Min(numbytes, output.Length - outpointer)
            Await fs.WriteAsync(output, outpointer, numbytes)
            outpointer += numbytes
            ProgressBar1.Value = (outpointer * 100) \ output.Length
        End While
        Await fs.FlushAsync
    End Using

    ' Wait for a process to be done
    Dim p As New Process With {.EnableRaisingEvents = True, .StartInfo = New ProcessStartInfo("notepad.exe")}
    Dim cts As New CancellationTokenSource
    Dim exithandler = Sub(prc As Object, ev As EventArgs)
                          cts.Cancel()
                      End Sub
    AddHandler p.Exited, exithandler

    ProgressBar1.Style = ProgressBarStyle.Marquee
    p.Start()

    Try
        Dim t = Task.Delay(TimeSpan.FromSeconds(5), cts.Token)
        Await t
        If t.Status = TaskStatus.RanToCompletion Then
            MessageBox.Show("Process still executing! Might be an error! What can we do?")
        End If
    Catch ex As TaskCanceledException
        ' thats ok! we WANT the task to be cancelled!
    End Try

    ProgressBar1.Style = ProgressBarStyle.Continuous
    ProgressBar1.Value = ProgressBar1.Minimum

    MessageBox.Show("all done!") 
```

主要优点：都在一个子中，并且流程或多或少是线性的。如果您使用像 Sevenzipsharp （或任何其他适合的库）这样的库，您甚至会获得关于解压缩的进度反馈（我认为）。如果您想坚持使用外部 exe，您可以尝试在循环中检查文件长度以提供有关解压缩的反馈。

# java - 使用花括号将数组作为键或值放入 Hashmap 不起作用

> ID：13928940
> 
> 赞同：1
> 
> 时间：2012-12-18T08:24:16.843
> 
> 标签：java, arrays, char, hashmap

为什么这是可能的

```
 Map <char[],char[]>F = new HashMap<char[],char[]>();
   char []R = {'J','K','L'};
   char []X = {'J','L'};
   F.put(R,X); 
```

虽然这不是

```
 Map <char[],char[]>F = new HashMap<char[],char[]>();
   F.put({'J','K','L'}, {'J','L'}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T08:26:19.503

第二个示例的正确语法是：

```
F.put(new char[]{'J','K','L'}, new char[]{'J','L'}); 
```

当您`{'J', 'K', 'L'}`在初始化程序之外使用时，编译器不会尝试猜测数组的类型。您必须明确说明。

另请注意，由于`array1.equals(array2)`比较了两个数组*的地址*`HashMap`，您的行为方式可能会让您感到惊讶。考虑：

```
 Map<char[], char[]> F = new HashMap<char[], char[]>();
    F.put(new char[] { 'J', 'K', 'L' }, new char[] { 'J', 'L' });
    F.put(new char[] { 'J', 'K', 'L' }, new char[] { 'J', 'L' });
    System.out.println(F.size()); 
```

在我的机器上，`2`即使两个键包含完全相同的字符，它也会打印出来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T08:26:26.470

这个有可能 -

```
Map <char[],char[]>F = new HashMap<char[],char[]>();
F.put(new char[]{'J','K','L'}, new char[]{'J','L'}); 
```

`{'J', 'K', 'L'}`是一个没有类型的匿名数组，会导致语法不匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T08:26:33.103

{'J', ...} 不是你声明匿名数组的方式，你必须明确声明你的数组持有的类型。

你可能想要

```
 Map <char[],char[]>F = new HashMap<char[],char[]>();
       F.put(new char[]{'J','K','L'}, new char[]{'J','L'}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T08:27:36.313

您必须**将操作数的类型明确指定**为：

```
Map <char[],char[]>F = new HashMap<char[],char[]>();
F.put(new char []{'J','K','L'}, new char []{'J','L'}); 
```

这将起作用。

# java - 使用 nimbus 自定义 JButton

> ID：13928945
> 
> 赞同：3
> 
> 时间：2012-12-18T08:24:35.647
> 
> 标签：java, swing, jbutton, nimbus

您好，我正在尝试从 nimbus 自定义 JButton，这就是我所做的：

```
public static void main(String[] args) 
{
    // TODO Auto-generated method stub
    Font police1 = new Font("Tahoma", Font.BOLD, 12);
    try {
        for (LookAndFeelInfo info : UIManager.getInstalledLookAndFeels()) {
            if ("Nimbus".equals(info.getName())) {
                UIManager.setLookAndFeel(info.getClassName());
                UIManager.getLookAndFeelDefaults().put("Button.background",new Color(18,55,63));
                UIManager.getLookAndFeelDefaults().put("Button.font", police1);
                UIManager.getLookAndFeelDefaults().put("Button.textForeground", new Color(122,216,247));

                break;
            }
        }
    } catch (Exception e) {
        // If Nimbus is not available, you can set the GUI to another look    and feel.
} 
```

这就是我得到的：

![纽扣](../Images/ae47180617b3d207ad8e473b86580d49.png)

如您所见，每个按钮周围都有某种灰色边框，我正在尝试将其删除或更改其颜色，但我找不到方法:(。

一旦我按下它们，我就会得到这个：

![按下按钮](../Images/062a330bc921fbef6ac8a5a7af65f135.png)

这实际上是最接近 Color(18,55,63) 的那个。请问有没有办法分别自定义正常外观和压制外观？我检查了这个链接[http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/_nimbusDefaults.html](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/_nimbusDefaults.html)但它帮不了我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T09:31:47.983

> 每个按钮周围都有某种灰色边框，我正在尝试将其删除或更改其颜色，但我找不到如何

要摆脱`JButton`边界，只需调用即可，[`JButton.setBorderPainted(boolean)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/AbstractButton.html#setBorderPainted%28boolean%29) 您可以创建`Border`满足您需求的自定义并调用[`JButton.setBorder(Border)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#setBorder%28javax.swing.border.Border%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T11:33:51.057

我不知道“XxxPainters”但是，这里有一个边框的解决方案 [使用 Nimbus，只有当控件具有焦点时才使控件背景颜色变为黄色？](https://stackoverflow.com/questions/10787152/with-nimbus-make-control-background-color-yellow-only-when-control-has-focus) 在这里，我发现了一些有用的重新创建按钮的技巧： [使用 JButton 在 Java 中创建自定义按钮](https://stackoverflow.com/questions/5751311/creating-a-custom-button-in-java-with-jbutton/5755124#5755124)。

# android - 单击操作栏中的搜索按钮后如何触发操作？

> ID：13928950
> 
> 赞同：2
> 
> 时间：2012-12-18T08:24:57.793
> 
> 标签：android

我做了以下但没有奏效

```
@Override
    public boolean onOptionsItemSelected(MenuItem menuItem)
    {       

        startActivity(new Intent(NamesList.this,MainActivity.class)); 

        switch (menuItem.getItemId()) {
        case 1:
            search = (EditText) menuItem.getActionView();
            search.addTextChangedListener(filterTextWatcher);
            search.requestFocus();
            InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
            imm.toggleSoftInput(InputMethodManager.SHOW_FORCED, 0);

            String result = search.getText().toString();

            Toast.makeText(getApplicationContext(), "the :: " + result, Toast.LENGTH_LONG);

        }   

        return true;

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T08:28:15.417

您可以使用`search.setOnQueryTextListener()`为 SearchView 中的用户操作设置侦听器。

```
search.setOnQueryTextListener(new SearchView.OnQueryTextListener() {
        @Override
        public boolean onQueryTextSubmit(String query) {
            //show your toast here
            return true;
        }

        @Override
        public boolean onQueryTextChange(String newText) {
            return false;
        }
    }); 
```

或`search.setOnSearchClickListener()`设置侦听器以在按下搜索按钮时通知。这仅在默认情况下不可见文本字段时才相关。

# webgl - three.js 将颜色与地图混合

> ID：13928952
> 
> 赞同：0
> 
> 时间：2012-12-18T08:25:09.543
> 
> 标签：webgl, three.js, blending

我有一个具有地图和颜色的网格。我想将地图中的透明部分设置为颜色。我试过了，但只有地图是渲染的。

```
var map = THREE.ImageUtils.loadTexture(url);
var material = new THREE.MeshPhongMaterial({
     color: colors[Math.ceil(Math.random() * (colors.length - 1))],
     transparent: true,
     opacity: 1.0,
     map: map,
     blending: THREE.NormalBlending
});
target.mesh = new THREE.Mesh(
     new THREE.CubeGeometry(target.size.x, target.size.y, target.size.z), 
     material); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T04:18:06.510

Ovilia，来自 2pha 的参考可能会满足您的需求。它是不完美的，因为它改变了标准内置三个着色器的行为——如果你需要将标准的“phong”行为与修改后的贴花行为混合匹配，那么它可能会导致问题。只有你可以决定！另一种方法是指定一个自定义着色器，但这是一项（一点）工作。

# flash-media-server - 使用 FMS 3.5 录制实时流视频

> ID：13928953
> 
> 赞同：1
> 
> 时间：2012-12-18T08:25:09.810
> 
> 标签：flash-media-server

我正在服务器端录制实时流（使用 FMS 3.5.3）。录制视频时录制停止。我检查了录制的视频长度，总是不同，有时只有 2 分钟，有时 10 分钟，有时 20 分钟

有人遇到过这个问题吗？如果你能帮我解决这个问题，我会很高兴！

代码：

```
Client.prototype.RecordStart = function()
{
    trace("RecordStart");
    var ns = Stream.get("mp4:test:f4v"); 
    if (ns)
    { 
        ns.record(); 
        ns.play("livestream",-1,-1,false); 
    } 
}

Client.prototype.RecordStop = function()
{
    trace("RecordStop");
    var ns = Stream.get("mp4:test.f4v");
    ns.record(false);
    ns.play(false);
    ns.flush();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T07:01:34.563

错误就在这里

```
var ns = Stream.get("mp4:test:f4v"); 
```

它应该是 as`"mp4:test:f4v"`而不是`"mp4:test.f4v"`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-06T23:51:20.873

以防万一您仍然遇到问题，ctdavids 提供的解决方案在这里：[https](https://forums.adobe.com/thread/865510) ://forums.adobe.com/thread/865510为我工作！

问题是

var ns = Stream.get("mp4:test:f4v");

将录制流分配给具有函数内部作用域的 ns 变量。因此，在几分钟内，变量就会被垃圾回收。这将使录制突然停止，没有状态通知或错误消息。

要解决此问题，只需将变量放在全局对象中，例如，

var ns = Stream.get("mp4:test:f4v"); strMaps[recordingStreamName] = ns;

其中 strMaps 是全局变量（对象），recordingStreamName 只是记录的唯一名称。

当您停止录制时，您可以使用删除此全局引用

删除 strMaps[recordingStreamName];

希望这可以帮助！

# c# - 将 DataSet 转换为 DataContext

> ID：13928954
> 
> 赞同：2
> 
> 时间：2012-12-18T08:25:11.333
> 
> 标签：c#, .net, entity-framework, .net-3.5

如何将 ADO.NET 数据集转换为 System.Data.Linq.DataContext。

DataContext 对象需要一个到数据库的 IDbConnection。而我以编程方式构造我的 DataSet 表单 DataTables。

如何在 .NET 3.5 中实现这一点。

# database - 直接来自数据库的快速 RESTful 服务

> ID：13928955
> 
> 赞同：3
> 
> 时间：2012-12-18T08:25:11.853
> 
> 标签：database, rest

我正在研究无需大量编码即可快速生成 RESTful 服务的方法。

我已经研究过 Google Feed Server

我们的数据主要存在于 PostgreSQL 中。

有没有人有任何其他好的工具的经验？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T19:30:38.510

如果你想用 Java 来做，那么 Netbeans（结合 JAX-RS 和 glassfish）是一个很好的解决方案。他们有一个从数据库模式开始生成 RESTful 端点的向导。他们的网站上也有很好的教程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T12:09:58.397

通过 RESTful API 快速构建 CRUD 功能的一个好的解决方案可能是使用 Symfony 2 的以下包（在 PHP 中）：

```
https://github.com/FriendsOfSymfony/FOSRestBundle 
```

它将需要使用 Doctrine 进行一些配置和基本功能，但构建起来应该相对较快。

# ios - 使用 ASIFormDataRequest 超时上传图像

> ID：13928956
> 
> 赞同：0
> 
> 时间：2012-12-18T08:25:17.220
> 
> 标签：ios, symfony, asihttprequest, image-uploading, asiformdatarequest

我遇到了一个奇怪的问题，我还查看了其他解决方案，还查看了`ASIHTTPRequest` [github 页面](https://github.com/pokeb/asi-http-request)。

我正在使用`ASIHTTPRequest`库`ASIFormDataRequest`并将图像上传到我的 Symfony Web 服务器。

我有两个问题：

**1) 上传慢**

我不确定它是什么，但用于上传图像数据大小 = **244671的图像**

我假设大约是 245 KB。

上传时间超过 15 秒。

我的 iPhone 在市区使用 Wifi 连接。

**2）服务器请求超时即使成功**

尽管数据已完全上传，但我收到服务器超时错误，图像正确显示在我的服务器上。

我正在使用的代码是：

```
// ------------------------------------------------------------------------------
// saving a compressed version of the file to disk to upload the file
// rather than using an uncompressed NSData which will take longer to upload
// ------------------------------------------------------------------------------
[imgData writeToFile:[MediaDirectory mediaPathForFileName:strFilename] atomically:YES];
[MediaDirectory addSkipBackupAttributeToFile:strFilename];

[request setFile:[MediaDirectory mediaPathForFileName:strFilename] withFileName:strFilename andContentType:@"image/png" forKey:@"file"]; 
```

我的图像不是什么巨大的图像，它只有**373 x 500 像素**。

有任何想法吗？

`ASIHTTPRequest`如果有适当的解决方法，我不想禁用错误跟踪器中建议的缓冲区大小技巧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T06:19:57.557

我找到了一个名为的新库`MKNetworkKit`，它可以正确处理 POST 请求并提供我需要为我的 POST 请求设置的必要 POST 键字段。

如果我觉得它足够稳定，从现在开始可能会使用 MKNetworkKit。

我不愿意使用 AFNetworking，因为以前在尝试 POST 电子邮件地址时遇到错误，而且 AFNetworking 不允许我为 POST 请求设置 POST 值键。

希望对遇到同样问题的其他人有所帮助。

# sql - 如何在存储过程中调用数据库函数

> ID：13928958
> 
> 赞同：0
> 
> 时间：2012-12-18T08:25:18.997
> 
> 标签：sql, sql-server, sql-server-2008

我在我的数据库中调用了一个表值函数`split`，我想在存储过程中使用它。

当我说实体时，我的意思是公司中的部门，如您所知，公司之间有部门、部门和其他部门。当用户创建实体时，它应该有一个父实体，它是公司或另一个实体，并且可能有一个子实体，它是另一个实体，例如 IT>Development>software... 等。

每个人都有身份证。我将这些 ID 存储在一列中，例如 1、2、1。我需要在向用户展示时拆分它们。

这是我的功能：

```
 ALTER FUNCTION [dbo].[Split](@String varchar(50), @Delimiter char(1))       
 returns @temptable TABLE (items varchar(50))       
 as       
 begin       
  declare @idx int       
  declare @slice varchar(50)       

 select @idx = 1       
    if len(@String)<1 or @String is null  return       

 while @idx!= 0       
 begin       
    set @idx = charindex(@Delimiter,@String)       
    if @idx!=0       
        set @slice = left(@String,@idx - 1)       
    else       
        set @slice = @String       

  if(len(@slice)>0)  
        insert into @temptable(Items) values(@slice)       

   set @String = right(@String,len(@String) - @idx)       
    if len(@String) = 0 break       
   end   
  return       
 end 
```

这是我的存储过程：

```
alter   procedure [dbo].[Emp_CompanyHirarchy]
@FK_CompanyId varchar(50),
@FK_EntityId varchar(50)
AS
  SELECT     
     Employee.EmployeeId, Employee.EmployeeNo,   
     Employee.EmployeeName, Employee.EmployeeArabicName, 
     OrgEntity.EntityName, OrgCompany.CompanyName, 
     Employee.DOB, Employee.Email
  FROM         
     Employee 
  INNER JOIN
     OrgEntity ON Employee.FK_EntityId = OrgEntity.EntityId 
  INNER JOIN
     OrgCompany ON OrgEntity.FK_CompanyId = OrgCompany.CompanyId
  WHERE     
     (Employee.FK_EntityId IN (dbo.Split(EntityHierarchy))) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T08:38:08.410

一般来说;

```
Select items From dbo.Split(YourColumnOrVariable,',') 
```

在你的情况下，（因为你正在使用`IN`）`WHERE`子句应该是；

```
WHERE (Employee.FK_EntityId IN (Select Items FROM dbo.Split(EntityHierarchy)))
--Items is the column name of the returning table 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T08:39:16.980

这是[stackoverflow帖子](https://stackoverflow.com/questions/2677051/how-to-call-a-scalar-function-in-a-stored-procedure)。

*   以下是如何在存储过程中调用函数的示例。

[参考](http://www.codeproject.com/Questions/122872/calling-function-in-stored-procedure)

```
DECLARE @Variable  NVARCHAR(MAX)
SELECT @Variable = [Values] FROM tbl_test WHERE ID = @colnumber
SELECT * FROM dbo.ufn_SplitText(@Variable,',') 
```

您可以在存储过程中使用 dbo.yourfunction()。

[参考文献 2](http://www.sqlservercentral.com/Forums/Topic1043856-391-1.aspx)

* * *

**根据 OP 的评论和数据值进行更新**

你需要按**空间**分割，因为你的数据`EntityHierarchy = 20 10 30 26`

在您的代码中尝试以下行：

`WHERE (Employee.FK_EntityId IN (Select Items FROM dbo.Split(EntityHierarchy, ' ')))`

# f# - 在 C# 中实现具有 Unit 返回类型的 F# 接口成员

> ID：13928963
> 
> 赞同：5
> 
> 时间：2012-12-18T08:25:49.477
> 
> 标签：f#, null, unit-type

假设我在 F# 中定义了以下接口：

```
type IFoo<'T> = 
  abstract member DoStuff : 'T -> unit 
```

如果我在 C# 中实现它，我需要方法签名为：

```
public void DoStuff<T>(T arg) {...} 
```

我真正想做的是参考 FSharp.Core 然后使用：

```
public Unit DoStuff<T>(T arg) {...} 
```

这将简化其他代码，因为我不必处理 Action vs Func。我猜没有任何干净的方法可以实现这一目标？一些邪恶的黑客怎么样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T15:45:15.500

`Unit`to的转换`void`被烘焙到编译器中。F# Core 中有一个[`FuncConvert`](http://msdn.microsoft.com/en-us/library/ee340268.aspx)类用于在 和 之间进行`FSharpFunc`转换`Converter`。如何定义一个类似的类来`Action<T>`转换`Func<T, Unit>`？

```
static class ActionConvert {
    private static readonly Unit Unit = MakeUnit();

    public static Func<T, Unit> ToFunc<T>(Action<T> action) {
        return new Func<T, Unit>(x => { action(x); return Unit; });
    }

    private static Unit MakeUnit() {
        //using reflection because ctor is internal
        return (Unit)Activator.CreateInstance(typeof(Unit), true);
    }
} 
```

然后你可以做

```
var foo = new Foo<int>();
var func = ActionConvert.ToFunc<int>(foo.DoStuff); 
```

您甚至可以放弃该`Unit`实例并返回`null`。

# javascript - 如何防止在线聊天中删除连接 ID (SignalR)？

> ID：13928973
> 
> 赞同：-2
> 
> 时间：2012-12-18T08:26:32.293
> 
> 标签：javascript, signalr

嗨，我使用 signl r 来构建在线聊天（用户可以向管理员发送消息，管理员可以回复他们），一切正常，但在用户侧页面中，如果他们转到其他页面 connectionid 并且用户被删除，任何解决方案如何做？ [这是我用过的github项目](https://github.com/upadhyayadhaval/SRChat)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T08:41:59.420

为每个新连接发出一个新的连接 ID（这包括页面卸载、刷新、更改等时间）。如果您想记住用户的信息，只需使用 cookie 或会话变量并在其中使用标识符。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-01T05:03:06.843

在添加用户方法中添加这样的 cookie（如果您正在使用此聊天应用程序）

```
 HttpCookie ChatConnectioncookie = new HttpCookie("ChatConnection");
                ChatConnectioncookie.Values.Add("messageRecipientId", userId);
                ChatConnectioncookie.Values.Add("messageRecipientName", userName);
                ChatConnectioncookie.Values.Add("messageRecipientRole", userRole);
                ChatConnectioncookie.Values.Add("connectionId", Context.ConnectionId);
                HttpContext.Current.Response.Cookies.Add(ChatConnectioncookie);
                ChatConnectioncookie.Expires = DateTime.Now.AddYears(1); 
```

并在连接方法中获取 cookie 并维护连接..

# iphone - 从互联网加载数据的 iOS 编程模型是什么？

> ID：13928974
> 
> 赞同：0
> 
> 时间：2012-12-18T08:26:33.590
> 
> 标签：iphone, objective-c, ios, multithreading

当应用程序启动时，我的应用程序需要从 Internet 加载一些数据。显然它应该在一个线程中加载数据，并在 UI 上显示一个进度条/圆圈，然后在加载数据后，隐藏进度条并使用数据更新 UI。

有人可以给我看一些代码来存档吗？苹果有提供这样的样品吗？这是我第一次在 iOS 中使用线程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T08:32:28.637

您不需要多线程来处理网络通信而不阻塞您的接口。您需要的是异步网络。这也将使您的生活更轻松。

看看[AFNetworking](http://afnetworking.com/)，它是一个支持无缝异步通信的框架。

[在这里](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk_afnetworking/)和[这里](http://maniacdev.com/2012/07/using-afnetworkingjson-to-build-instagram-style-app-with-a-web-based-backend/)，您可以在您的项目中找到有关 AFNetwoking 集成的教程。

# ruby-on-rails - Rails - 如何通过它有很多关联来订购模型？

> ID：13928975
> 
> 赞同：6
> 
> 时间：2012-12-18T08:26:39.713
> 
> 标签：ruby-on-rails, model-associations, has-and-belongs-to-many

我有两个模型：

```
#Product
class Product < ActiveRecord::Base
  has_and_belongs_to_many :categories
  attr_accessible :name
  ...
end

#Category
class Category < ActiveRecord::Base
  has_and_belongs_to_many :products, :order => "name ASC"

  attr_accessible :name, :priority
end 
```

我想按优先级最高的类别订购我的产品，然后按产品名称

例如我有：3个类别：

*   糖果，优先级 = 3
*   水果，优先级 = 1
*   甜点，优先级 = 2

3个产品：

*   巧克力冰淇淋，有甜点和甜食类，
*   饼干，有甜点和糖果类，
*   猕猴桃，有糖果、水果和甜点类别

我希望他们像这样被订购：

*   猕猴桃（首先是因为水果是最高优先级）
*   巧克力冰淇淋（第二，因为巧克力排在饼干之前，而且它们都有相同优先级的类别）
*   饼干

我如何在 Rails 中做到这一点？我不希望我的产品被复制，我知道这样做很容易：

```
Category.order("priority ASC").each do |cat|
  cat.products.order("name ASC").each do |product|
  end
end 
```

但在这种情况下，猕猴桃、巧克力冰淇淋和饼干将被复制，因为它们都有几个类别。有没有一种简单的方法可以删除重复项？或者有没有办法直接按类别最高优先级订购产品？

**编辑：有关我想要实现的目标的更多详细信息**

事实上，我想要的是一张巨大的桌子，在左边，我有所有产品（每个独特产品只有一行）按类别排序......所以我可以有这样的东西：

*   类别 - 产品
*   水果 - 香蕉
*   水果 - 苹果
*   水果 - 猕猴桃
*   甜品 - 巧克力冰淇淋
*   甜点 - 饼干
*   甜 - 巧克力糖
*   甜 - 苹果糖
*   ...

看？即使水果是甜点和甜食，我也希望它在这张表中只出现一次。我希望产品出现在他们的“最重要”类别中（这就是我考虑“优先级”的原因）。

由于这个巨大的表格将用于编辑产品，我希望能够轻松访问产品的属性（每个属性将有一列）。所以我真的需要尽可能减少数据库请求。

* * *

感谢任何可以帮助我的人！库尔加

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-18T10:08:22.147

为了避免重复，你可以试试这个，

```
Product.joins(:categories).group("products.name").order("categories.priority ASC, products.name ASC") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T09:49:43.863

也许试试这个

```
products = Product.joins(:categories).order("categories.priority ASC, products.name ASC") 
```

这也将获取重复的值。假设你想获取名字，也许你可以试试这个

```
products.map(&:name).uniq 
```

# c# - .net xml 序列化 - 解析前检查文件

> ID：13928976
> 
> 赞同：0
> 
> 时间：2012-12-18T08:26:56.797
> 
> 标签：c#, .net, xml-serialization

我使用以下代码序列化 xml 文件。

我想知道`CanDeserialize`在这种情况下是否应该使用该功能。

我注意到如果文件为空，就会`CanDeserialize`抛出异常。`XmlException`

`Deserialize`在这种情况下抛出`InvalidOperationException`。

我的问题是我是否应该删除那个额外的检查，如果`Deserialize`做某种检查呢？

编辑：阅读一些评论和答案后，我想知道何时使用`CanDeserialize`？

```
public static T RestoreFromXml(string filename)
{
    Object res = null;
    using (var stream = new FileStream(filename, FileMode.Open))
    {
        XmlReader reader = new XmlTextReader(stream);
        try
        {
            if (xs.CanDeserialize(reader))
            {
                res = xs.Deserialize(reader);
            }
        }
        catch (XmlException ex)
        {
            throw ex;
        }            
    }
    return (T)res;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T08:41:36.917

您可以在尝试反序列化之前进行一些检查 - 检查文件名是否为空或空，检查文件是否存在等。这是一些反序列化文件的代码：

```
/// <summary>
/// XML serializer helper class. Serializes and deserializes objects from/to XML
/// </summary>
/// <typeparam name="T">The type of the object to serialize/deserialize.
/// Must have a parameterless constructor and implement <see cref="Serializable"/></typeparam>
public class XmlSerializer<T> where T: class, new()
{
    /// <summary>
    /// Deserializes a XML file.
    /// </summary>
    /// <param name="filename">The filename of the XML file to deserialize</param>
    /// <returns>An object of type <c>T</c></returns>
    public static T DeserializeFromFile(string filename)
    {
        return DeserializeFromFile(filename, new XmlReaderSettings());
    }

    /// <summary>
    /// Deserializes a XML file.
    /// </summary>
    /// <param name="filename">The filename of the XML file to deserialize</param>
    /// <param name="settings">XML serialization settings. <see cref="System.Xml.XmlReaderSettings"/></param>
    /// <returns>An object of type <c>T</c></returns>
    public static T DeserializeFromFile(string filename, XmlReaderSettings settings)
    {
        if (string.IsNullOrEmpty(filename))
            throw new ArgumentException("filename", "XML filename cannot be null or empty");

        if (! File.Exists(filename))
            throw new FileNotFoundException("Cannot find XML file to deserialize", filename);

        // Create the stream writer with the specified encoding
        using (XmlReader reader = XmlReader.Create(filename, settings))
        {
            System.Xml.Serialization.XmlSerializer xmlSerializer = new System.Xml.Serialization.XmlSerializer(typeof(T));
            return (T) xmlSerializer.Deserialize(reader);
        }
    }
} 
```

}

你可以像这样使用它：

```
string filename = "...";

Foo foo = XmlSerializer<Foo>.DeserializeFromFile(filename); 
```

这段代码取自我写的一篇文章，你可以在这里找到它：

[使用泛型的 XML 序列化](http://www.codeproject.com/Articles/233908/Xml-serialization-using-generics)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T08:45:54.057

我建议您使用 CanDeserialize 只是为了尽可能少地抛出异常。当应用程序处于您无法保护自己的异常状态时，应该例外。

你可以对守卫说同样的话。为什么要检查：

```
if (value == null)
    return;
//do something 
```

代替：

```
try{
   // do something
catch() 
```

这不是完全相同的事情，但我认为让您的应用程序尽可能不受异常影响的一般想法是一个好主意。

# c# - 如何从表示建模结果的部分网格中获取多边形

> ID：13928977
> 
> 赞同：1
> 
> 时间：2012-12-18T08:27:02.700
> 
> 标签：c#, grid, gis, modeling, vectorization

我有代表某些建模过程结果的网格。在这种情况下，它是森林火灾。

![森林火灾建模结果](../Images/6669ee30a2e12b8b2d3787153ef2fccf.png)

有时火区可能有空白区域，或者它可以分成两个或多个区域。我需要将包含火元素（或高温元素）的网格部分转换为多边形。此多边形稍后将保存到 *.kml 文件中。我认为它基本上看起来像单色图像的矢量化任务（我只需要在结果中触发区域多边形）。还是以不同的方式实现这一点？

有人可以推荐简单（它不是 rgb 图像）和精确（错误必须最小）的算法来将网格的那部分转换为多边形，或者可能是该算法的一些开源实现？

顺便说一句，我使用 DotSpatial，所以也许该引擎有一些内置功能来解决这类任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T08:42:41.573

凸包算法（参见例如 CLRS：算法简介 Chp 33）将围绕给定的一组点创建一个凸多边形，实现起来很简单。如果您想要多个区域以最小化多边形内的低温区域，则必须扩展它（后期处理）。

# django - 通过 TemplateTag 渲染 Django 表单

> ID：13928978
> 
> 赞同：1
> 
> 时间：2012-12-18T08:27:08.430
> 
> 标签：django, django-forms, django-templates, templatetags

我正在尝试通过 django 中的模板标签呈现表单，以便可以在多个页面上呈现表单。但是，当我尝试渲染它时出现以下错误：

_ init_() 至少需要 2 个参数（给定 1 个）。

我相信这是由于模板标签没有将用户信息传递给表单。经过身份验证的用户应该是传递给表单的用户。

表格.py：

```
class ExpressionForm(forms.ModelForm):
    class Meta(object):
        model = Expression
        exclude = ('user',)

    body = forms.CharField(widget=forms.Textarea(attrs={'rows': 2, 'cols': 19}), required=False, label=_('Body'))

    def __init__(self, user, *args, **kwargs):
        super(ExpressionForm, self).__init__(*args, **kwargs)
        self.fields['expressiontype'].queryset = ExpressionType.objects.all()
        self.fields['expressiontype'].required = True 
```

在我的模板标签 .py 中：

```
@register.inclusion_tag('expressions/templatetags/express.html')
def express():
    return {'form': ExpressionForm()} 
```

我将如何通过模板标签将用户传递给表单？谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T08:46:15.867

该文档详细说明了如何[将参数传递到自定义标签](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#passing-template-variables-to-the-tag)中。

您的另一个选择是调整您的标签[，使其了解上下文](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#inclusion-tags)。

# c++ - boost 序列化实际上是如何保存 const 对象的

> ID：13928979
> 
> 赞同：2
> 
> 时间：2012-12-18T08:27:09.250
> 
> 标签：c++, serialization, boost, constants, boost-serialization

考虑以下序列化示例，当此数据为 const 且序列化函数不是 const 函数时，boost 如何处理保存数据？

某处有 const 演员吗？

```
 struct Settings
  {
    Settings();
    uint32_t    buffers_size;
    uint32_t    messages;
  };

  template < class Archive >
  void serialize(Archive& ar, Settings& settings, unsigned int /*version*/)
  {
    using boost::serialization::make_nvp;
    ar 
      & make_nvp< uint32_t >("buffers_size", settings.buffers_size )
      & make_nvp< uint32_t >("messages", settings.messages);
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T13:55:50.270

据我所知，在保存对象之前，constness 确实被抛弃了。我认为相关代码在`oserializer.hpp`：

```
template<class Archive, class T>
BOOST_DLLEXPORT void oserializer<Archive, T>::save_object_data(
    basic_oarchive & ar,    
    const void *x
) const {
    // make sure call is routed through the highest interface that might
    // be specialized by the user.
    BOOST_STATIC_ASSERT(boost::is_const< T >::value == false);
    boost::serialization::serialize_adl(
        boost::serialization::smart_cast_reference<Archive &>(ar),
        * static_cast<T *>(const_cast<void *>(x)),
        version()
    );
} 
```

在调用这个方法之前，序列化的对象引用变成了a `const void *`，对应这里的第二个参数。此指针的 const 性被丢弃，生成的指针被转换为适当的指针类型，然后被取消引用。

这提出了在尝试序列化`const`对象时调用未定义行为的可能性的问题：如果`serialize`成员/自由函数以某种方式修改了对象，那么创建`const`对象并将其保存到存档将是未定义行为，并且在编译时不会被注意到-时间！

如果将函数拆分为`save`和`load`，则必须标记`save`为`const`，以防止意外修改对象。

# javascript - 防止 jQuery append 附加到 iframe

> ID：13928991
> 
> 赞同：0
> 
> 时间：2012-12-18T08:27:38.903
> 
> 标签：javascript, jquery, iframe

我正在尝试附加到 $('body')，但有些网站在 iframe 中使用完整的 html 页面，这意味着它 - 页面 - 有两个 - 或更多 - 正文标签，我尝试使用 $('body')。 first()，但没有运气，有什么想法吗？html标签也是如此。

**编辑1**：根据显示一些代码的请求，我将进一步解释，我正在创建一个chrome扩展，将一个固定的div附加到当前页面，当只有一个html/body标签时一切正常，除了那个div 附加到页面中的所有 html/body 标签，正如有人说“给它一个 ID”，我不能，这不是我的页面我无法真正控制服务器生成的 DOM，我只能注入进入它，无论如何这里是处理附加 div 的代码。

```
formDiv = jQuery('<div/>', {
    id : 'fform',   
    class :'_fform',
    html : fhtml,
    style : 'left:' + document.body.scrollLeft + ';top:' + document.body.scrollTop
})

$('html').first().append(formDiv); 
```

**编辑 2**：我怀疑它现在与 chrome 扩展清单中的“all_frames”有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T08:34:30.433

检查网站是否被框架，并采取相应的行动？

```
formDiv = jQuery('<div/>', {
         id : 'fform',   
    'class' :'_fform',
       html : fhtml,
      style : 'left:' + document.body.scrollLeft + ';top:' + document.body.scrollTop
});
if (top === self) {
   $('html').append(formDiv);
} else {
   $(parent.document).append(formDiv);
} 
```

另一方面，您通常必须访问 contextWindow 才能附加到 iFrame，因此仅针对常规标签应该不是问题。

# html - 即使在换页时也能继续播放音乐

> ID：13928994
> 
> 赞同：19
> 
> 时间：2012-12-18T08:27:57.693
> 
> 标签：html, backbone.js

[SoundCloud](http://soundcloud.com)是一个使用 HTML5 和 Backbone.js 的惊人网站。唯一的问题是，我找不到他们使用什么技术可以让音乐在换页时也能继续播放。

他们使用什么技术来播放音频流？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-18T08:39:19.143

事实是，您不会加载新页面，而是通过 AJAX 加载内容。

然后该页面使用 HTML5 History API 添加使用浏览器的后退和前进按钮进行导航的可能性。

我通过阅读和尝试以下两个资源开始进入这个主题：

[http://diveintohtml5.info/history.html](http://diveintohtml5.info/history.html)
[http://html5demos.com/history](http://html5demos.com/history)

* * *

最简单的方法是通过 AJAX 加载和替换当前内容，然后调用

```
history.pushState(null, null, link.href); 
```

为了添加当前显示页面的历史条目。

如果您现在按下后退按钮，浏览器将不会加载上一页，而是触发事件`popState`。这可用于使用 AJAX 或存储在 JavaScript 变量中的信息来恢复上一页。

```
window.addEventListener("popstate", function(e) {
    //loadPreviousPage();
} 
```