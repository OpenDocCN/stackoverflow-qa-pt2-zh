# StackOverflow 问答 13577000-13577999

# javascript - 将菜单项添加到上下文菜单

> ID：13577007
> 
> 赞同：0
> 
> 时间：2012-11-27T03:36:28.663
> 
> 标签：javascript, right-click, tidesdk

我开始在 Tidesdk 中制作我的第一个应用程序之一，我想在鼠标右键菜单中添加一些东西。（它通常被命名为 alt 菜单或上下文菜单。）

你怎么做到这一点？它似乎只有一个默认值，`'Show Inspector'`.

那么，如何更改默认的“上下文菜单”以添加和删除我自己的项目并删除默认项目？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T03:55:20.833

好的，因为没有人回答它，我通过谷歌搜索找到了它，因为 Tidesdk 几乎是 Titanium appcelerator。所以这就是我得到的

```
 var menu = Ti.UI.createMenu();

        menu.addItem('Cut', function() {
            alert('cut');
        });
        menu.addItem('Copy', function() {
            alert('copy');
        });
        menu.addItem('Paste', function() {
            alert('paste');
        });

Ti.UI.getMainWindow().setContextMenu(menu); 
```

# android - 注释 greenDao 生成的对象

> ID：13577012
> 
> 赞同：4
> 
> 时间：2012-11-27T03:37:03.940
> 
> 标签：android, orm, greendao

由于性能问题，我看到 greenDao 不喜欢使用注释来生成 DAO 和 TO。但是，如果我仍然需要为解析器的目的注释例如 TO 怎么办？有没有办法做到这一点？

例子：

如果我们使用 GreenDAO 代码生成创建 Customer 实体，它将创建 CustomerDAO 和 Customer 类，对吗？

那么，如果我正在使用 SOAP webservices，它返回一个 Customer 对象，并且为了便于解析这个 Customer 对象，我使用了一种带注释的框架，例如 simpleXML。使用 GreenDAO 重新生成代码时，有什么方法可以更改 Customer 类而不丢失每个注释？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-08-04T21:13:07.457

您可以像这样使用 greendao 2.0 添加注释

```
entity.addStringProperty("title").codeBeforeField("@com.google.gson.annotations.SerializedName( \"title\" )"); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-27T22:24:44.077

你可以尝试在 Path 中使用我们的 fork，它增加了对 Annotations 的支持。（它还增加了对枚举和序列化的支持） [https://github.com/path/greenDAO](https://github.com/path/greenDAO) 它在我的盘子上为它发送拉取请求，但不确定我什么时候有时间。

顺便说一句，我们的版本没有像 greenDAO 那样进行良好的单元测试，但我们已经在生产环境中使用它一段时间了，所以应该足够稳定。

要添加注释，您可以查看此示例代码： [https ://github.com/path/greenDAO/blob/master/DaoExampleGenerator/src/de/greenrobot/daogenerator/gentest/ExampleDaoGenerator.java#L42](https://github.com/path/greenDAO/blob/master/DaoExampleGenerator/src/de/greenrobot/daogenerator/gentest/ExampleDaoGenerator.java#L42)

顺便说一句，我们的 fork 为每个 Entity 对象创建了两个类。一个`EntityBase`which 是抽象的，包括所有字段等和一个`Entity`which extends `EntityBase`。你应该只编辑`Entity`.

# ios - 从录制的声音中消除已知音频以通过反卷积估计背景声级

> ID：13577013
> 
> 赞同：2
> 
> 时间：2012-11-27T03:37:09.793
> 
> 标签：ios, fft, accelerate-framework, vdsp

我有 2 个信号，一个包含在扬声器上播放的音频数据。第二个包含同时记录扬声器的麦克风数据。

到目前为止我做了什么：通过相关在时域中对齐信号。对两个信号的重叠部分应用 fft 并将一个除以另一个以实现反卷积。
我做错了什么，因为生成的音频数据是无用的。

这是我的代码：

```
 //put both signals in split complex vectors
       vDSP_ctoz((DSPComplex *)file, 2, &fftFileData, 1, nOver2);
       vDSP_ctoz((DSPComplex *)mic, 2, &fftMicData, 1, nOver2);

        //fft of both file and mic data
        vDSP_fft_zrip(fftSetup, &fftFileData, 1, log2n, FFT_FORWARD);
        vDSP_fft_zrip(fftSetup, &fftMicData, 1, log2n, FFT_FORWARD);

        //divide file data by mic data for deconvolution???
        vDSP_zvdiv(&fftFileData, 1, &fftMicData, 1, &fftMicData, 1, nOver2);  

        //inverse fft of mic-fft-data
        vDSP_fft_zrip(fftSetup, &fftMicData, 1, log2n, FFT_INVERSE);

        //scale back signal
        vDSP_vsmul(fftMicData.realp, 1, &scale, fftMicData.realp, 1, nOver2);
        vDSP_vsmul(fftMicData.imagp, 1, &scale, fftMicData.imagp, 1, nOver2);

        //copy back to float array
        vDSP_ztoc(&fftMicData, 1, (COMPLEX *) result, 2, nOver2); 
```

**编辑**澄清一下：感谢@Sammio2，我现在知道，反卷积很好地描述了我的问题：

**f*g=h**

h 是我录制的信号，包括

f，我希望恢复的信号和

g，我的播放信号还记录了我知道的，但很可能被扬声器->麦克风往返修改了

现在我需要任何方法来恢复除 g 之外记录的所有声音 f。

重要：最后我不需要一个清晰的 f 信号，只需要关于它的响度或存在水平的信息。基本上是除了记录的往返信号 g 之外的噪声水平。

我应该如何继续收集我想要的噪音水平信息？

我希望这有助于理解我的问题。到目前为止谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T17:11:38.067

vDSP_zvsub 的长度参数是要处理的复杂元素的数量，而不是元素数量的对数。您应该通过 nOver2 而不是 log2n。

这仅涉及编程方面。其他答案解决了信号处理问题。特别是，FFT 是线性的：给定信号 X 和 Y 以及常数 a 和 b，FFT(a•X+b•Y) = a•FFT(X)+b•FFT(Y)。逆 FFT 也是线性的。因此，除了通常的浮点舍入误差外，两个信号的 FFT 差值的逆 FFT 不应给您与直接减去两个信号不同的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T06:37:19.717

`vDSP_zvsub`你只是在每个箱子上做一个复杂的减法，这可能不是你想要的。

目前尚不清楚您要达到什么目的，但听起来您想从另一个频谱中减去一个频谱的*幅度*，在这种情况下，您需要执行以下操作：

*   将每个复频域频谱从复数转换为极性（幅度+相位）
*   减去每个 bin的*幅度*
*   将得到的极坐标数据转换回复数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T17:07:22.943

您将需要发送到扬声器的音频和从麦克风接收的音频之间的系统脉冲响应（DAC/ADC 缓冲延迟、抗混叠滤波器组延迟、扬声器和麦克风响应、空气中的声速等）为了在时域或频域中产生（大部分）抵消信号。请注意，这包括匹配幅度和延迟，并且一组扬声器或麦克风与其他扬声器或麦克风相比很可能“异相”。

# php - 使用 PHP 将 Sqlite 3 字段转储到文本文件

> ID：13577015
> 
> 赞同：-1
> 
> 时间：2012-11-27T03:37:25.947
> 
> 标签：php, sqlite

我有一个数据库（siir_05.db）和一些 2 表（sair，siir）。我想将 siir 表中的字段保存到文本文件中。我想知道这是否可能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:27:35.500

如果这是一次性操作，则使用`sqlite3`命令行工具会更容易：

```
sqlite3 siir_05.db "SELECT AField FROM siir;" > ATextFile.txt 
```

如果您必须在 PHP 中执行此操作，这是可能的，但没有预定义的帮助程序。您必须为该字段编写查询，遍历结果，然后手动将所有值写入文件。（参见，例如，[文件写入教程](http://www.tizag.com/phpT/filewrite.php)）。

有关如何从结果中获取值的信息，请参阅[fetcharray 文档](http://www.php.net/manual/en/sqlite3result.fetcharray.php)`query`。

# c++ - 创建一个 Makefile 来构建 swigged 模块

> ID：13577017
> 
> 赞同：3
> 
> 时间：2012-11-27T03:37:41.867
> 
> 标签：c++, makefile, swig

我正在尝试制作一个将 .cpp 和 .swg 文件作为输入并使用 SWIG 创建一个 .so 文件的模块。问题是，我对 makefile 了解不多，而且我不太确定自己做错了什么。这是我的生成文件：

```
CXX = g++
SWIG = swig
SWIGFLAGS = -c++ -python 
CXXFLAGS = -c -fpic -Wall #for debugging purposes
LDFLAGS = -shared

file_processor.so: %*.o
    $(CXX) $(LDFLAGS) $^

%.o: %.cxx %.cpp
    $(CXX) $(CXXFLAGS) $? -o $@

%.cxx: %.swg
    $(SWIG) $(SWIGFLAGS) $< 
```

当我运行它时，make 说：

```
make: *** No rule to make target `%*.o', needed by `file_processor.so'.  Stop. 
```

我到底做错了什么？谁能建议一种更好的方法来完成我想做的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T16:11:51.503

**1）默认规则：**

```
_file_processor.so: %*.o
    ... 
```

正如所写，这需要一个名为“%*.o”的先决条件，Make 既无法找到也无法构建它。我想你的意思是：

```
_file_processor.so: *.o
    ... 
```

但随后 Make 会拉入所有现有`.o`文件——如果有任何文件丢失，也不用担心。我建议：

```
OBJS = file_processor.o file_processor_wrap.o

_file_processor.so: $(OBJS)
    ... 
```

**2）对象规则：**

```
%.o: %.cxx %.cpp
    $(CXX) $(CXXFLAGS) $? -o $@ 
```

*除非两个*先决条件都存在，否则此规则将不适用，这似乎不是您的想法。您必须将其拆分为两个规则：

```
%.o: %.cxx
    $(CXX) $(CXXFLAGS) $< -o $@

%.o: %.cpp
    $(CXX) $(CXXFLAGS) $< -o $@ 
```

（模式规则与普通规则的工作方式不同。）

**3) 小修正：**

```
swig -c++ -python file_processor.swg 
```

你的意思是`file_processor_wrap.swg`？否则流程没有意义，因为您正在构建`file_processor.cxx`但从不使用它。

# ruby-on-rails-3 - Rails：在视图中调用方法是不好的做法吗？

> ID：13577020
> 
> 赞同：0
> 
> 时间：2012-11-27T03:37:52.023
> 
> 标签：ruby-on-rails-3, model-view-controller

在视图中这样做是不好的做法（这是一种辅助方法）？

```
<% get_articles %> 
```

如果是这样，它应该住在哪里？在我看来，在它们相应的控制器块中调用它们似乎是合乎逻辑的，但我不确定这是否正确或如何去做。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T03:45:24.113

如果该方法存在于帮助程序中，则其设计为在视图中调用。如果它应该在那里，真的取决于该方法正在做什么。

是在访问数据库吗？如果是这样，则应从控制器调用它，并将其结果存储在一个变量中以供视图使用。（它也不应该在助手中）。

如果该方法只是生成要在视图中使用的 html，那么您将其输出为

```
<%= get_articles %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T03:42:53.750

不，辅助方法用于视图。因此，如果您在视图中调用辅助方法，它并没有错。看看这个[帖子](http://techspry.com/ruby_and_rails/designing-helpers-in-ruby-on-rails)

# javascript - 对象不继承其原型方法的问题

> ID：13577024
> 
> 赞同：3
> 
> 时间：2012-11-27T03:38:57.513
> 
> 标签：javascript, prototype

查看图片。怎么会这样？对象不应该继承其原型的方法吗？

King <-- FixedMovementPiece <-- 件

Piece 有 setXY 方法。

![奇怪的行为](../Images/7549d411101426d291dcf3f3df819376.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T03:46:16.837

`__proto__`（在大多数当前浏览器中定义，但在当前 ECMAScript 规范中未定义）是在搜索原型链时使用的内容。

`prototype`当函数作为构造函数调用时使用，以分配`__proto__`新对象的属性。由于原型通常不是构造函数，`prototype.prototype`因此很少有用甚至没有定义。

例子：

```
Array.prototype === (new Array()).__proto__ //true
(new Array()).prototype === undefined //true

var a = {0:'a', 1:'b', 2:'c', length:3}
a.toString() // "[object Object]"
var a = {0:'a', 1:'b', 2:'c', length:3, __proto__:Array.prototype}
a.toString() // "a,b,c"

var obj = {__proto__:{}}
obj.name // undefined
obj.__proto__.name = "someString"
obj.name // "someString"
obj.name2 = "anotherString"
obj.__proto__.name2 // undefined 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T05:01:47.120

对象继承自其**构造函数的**原型（即构造函数在创建实例时拥有的原型），该原型由内部`[[Prototype]]`属性引用。

默认情况下，只有函数具有原型属性。例如

```
// Declare function
function Foo(name) [
    this.name = name;
}

// Add a showName method to its prototype
Foo.prototype.showName = function() {
    return this.name;
}

// Create an instance
var foo = new Foo('foo');

// Call inherited method
foo.showName(); // foo 
```

Mozilla 浏览器中还有一个引用对象的**非标准** 属性，它可能在 ES6 中，但不适合一般 web。[`__proto__`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/proto)`[[Prototype]]`

# jira - 根据项目角色创建问题

> ID：13577026
> 
> 赞同：3
> 
> 时间：2012-11-27T03:39:06.017
> 
> 标签：jira, jira-plugin

我目前在使用 JIRA 时遇到以下问题：

我创建了一个新的问题类型（比如**Client-Request**）和项目角色（比如**Client**），有没有办法限制只有项目角色“ **Client** ”中的用户才能创建问题“ **Client-Request** ”？

我尝试了以下方法：在工作流设计器中，我尝试将**验证器**（权限验证器）添加到步骤**Create**中，希望验证器可以过滤项目角色，但 JIRA 似乎没有该功能。

有没有办法解决这个问题？或者任何插件可能会有所帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T06:39:25.897

嗯，这是一个有趣的问题。我认为这目前是不可能的，因为您只能将一个权限和问题类型方案连接到任何项目。

[尝试在https://answers.atlassian.com/](https://answers.atlassian.com/)上提问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-08T06:23:27.113

您可以尝试在创建转换中添加 Groovy 验证器，以检查用户是否是“客户”角色的成员。

```
import com.atlassian.jira.component.ComponentAccessor
import com.atlassian.jira.security.roles.ProjectRoleManager

    def issue = underlyingIssue
    def currentUser = ComponentAccessor.getJiraAuthenticationContext().getLoggedInUser()
    def projectRoleManager = ComponentAccessor.getComponentOfType(ProjectRoleManager)

    def role = projectRoleManager.getProjectRole("Client")
    return projectRoleManager.isUserInProjectRole(currentUser, role, issue.getProjectObject()) 
```

我能想到的另一种方法是在 Create Screen 中添加 Javascript。通过 AJAX 调用检查“客户”角色的用户成员资格。然后在创建屏幕中启用/禁用“客户端请求”问题类型。

我有以下 JS 用于检查用户的组成员身份。请为角色成员资格修改它。

```
function getCurrentUserName()
{
    var user;
    AJS.$.ajax({
        url: contextPath +  "/rest/gadget/1.0/currentUser",
        type: 'get',
        dataType: 'json',
        async: false,
        success: function(data) {
            user = data.username;
        }
    });

    return user;
}

function getGroups(user)
{
    var groups;
    AJS.$.ajax({
        url: contextPath + "/rest/api/2/user?username="+user+"&expand=groups",
        type: 'get',
        dataType: 'json',
        async: false,
        success: function(data) {
            groups = data.groups.items;
        }
    });
    return groups;
}
function isUserInGroup(user, group){
    var groups = getGroups(user);
    for (var i = 0; i < groups.length; i++){
        if (groups[i].name == group){
            return true;
        }
    }
    return false;
} 
```

您可能必须使用：**“/rest/api/2/project/{projectIdOrKey}/role”**

请参考[https://docs.atlassian.com/DAC/rest/jira/6.1.html](https://docs.atlassian.com/DAC/rest/jira/6.1.html)

# python - 有人可以解释代码吗

> ID：13577027
> 
> 赞同：0
> 
> 时间：2012-11-27T03:39:18.437
> 
> 标签：python

有人可以解释代码它是如何工作的：我不熟悉while循环

```
 line = file.readline()
 L1=[]
 while line != '' and line != '\n':
    line = line[:-1].split()
    L1.append(line)
    line = file.readline()

 return L1 
```

我可以用for循环来做吗？是吗：

```
 for line in file.readline():
          if line !='' and line !='\n':
             line = line[:-1].split()
             L1.append(line)

     return L1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T03:45:03.020

1.  从文件中读取一行。
2.  如果该行为空或`'\n'`，则停止。
3.  丢弃最后一个字符（通常是`'\n'`，`strip()`更好的 IMO），用空格分隔，然后附加列表。
4.  转到步骤 1。

你的`for`循环的问题是它不会在空或`'\n'`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T03:48:08.703

首先阅读：[http](http://wiki.python.org/moin/WhileLoop) ://wiki.python.org/moin/WhileLoop 这将向您解释一个while循环。

while 循环是一个在条件为真时将继续的循环，

```
x = 0
while x < 10:
  print(x)
  x = x + 1
print("finished") 
```

将在 x==10 时打印出`0 1 2 3 4 5 6 7 8 9 finished`循环将结束并打印单词“finished”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T03:49:38.493

几乎。第一个示例将在读取行匹配时*停止*`''`循环或`'\n'`。您可以将其简化为：

```
from itertools import takewhile
[x.strip() for x in takewhile(lambda x: x not in ['', '\n'], file.readlines())] 
```

这将存储文件的每一行，直到它在一个新数组中找到一个`''`or 。`'\n`

# javascript - 滚动和消失元素

> ID：13577031
> 
> 赞同：0
> 
> 时间：2012-11-27T03:39:50.717
> 
> 标签：javascript, css

我今天查看了一些网站，发现了一个新的 CSS 或 JS 技巧，我以前从未见过，但我真的很喜欢。我不知道它是如何完成的，或者我可以在哪里了解更多关于它的信息。这是我看到效果的网站[的链接。](http://iconbench.com/)当您单击顶部的“登录”按钮时会发生这种情况。使用什么语言编写该代码，我在哪里可以了解它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T03:47:29.813

他们使用简单的 jquery 和 css 函数来实现这一点。

这是他们的

```
$(document).ready(function(){
var toggleLogin = 1;
$(".toggleLogin").click(function () {
    if (toggleLogin == 1) {
        toggleLogin = 0;
        $("#login").animate({ top: 0 });
        $("#IconBenchUsername").focus();
    } else {
        toggleLogin = 1;
        $("#login").animate({ top: -43 });
    }
    $("#invisLoginArea").slideToggle();
});
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T03:49:17.740

您可以使用 Javascript 或 CSS3 来实现，这是一个简单的动画效果。顺便说一句，我认为 CSS3 对你来说更容易。您可以在 Google 中搜索动画和变换以获取更多详细信息。

# forms - CAKEPHP 重新填充国家自动表单-> 编辑时输入选择

> ID：13577035
> 
> 赞同：0
> 
> 时间：2012-11-27T03:40:10.003
> 
> 标签：forms, cakephp, cakephp-2.0, helper, formhelper

我正在构建一个购物车，当用户编辑地址时，我坚持重新填充国家/地区选择输入。

在控制器中：

```
public function loadCountryList() {

    $this->loadModel('GeoCountry');
    $geoCountryList = $this->GeoCountry->find('all', array(
        'recursive' => -1, 
        'order' => array('GeoCountry.name' => 'ASC')
    ));

    $geoCountries = array('Select Country' => array('US' => 'United States', 'CA' => 'Canada'));
    while(list($key,$row) = each($geoCountryList)) {
        $geoCountries['International Countries'][$row['GeoCountry']['id']] = $row['GeoCountry']['name'];
    }
    $this->set('geoCountries', $geoCountries);

} 
```

结帐/编辑地址屏幕上的选择正确呈现带有控制器中结构的 optgroup 的选择，并且值正确发布并按预期保存在会话中。

```
<?php echo $this->Form->input('geoCountries', array('class' => 'span3', 'label' => 'Billing Country', 'name' => 'data[Order][billing_country]', 'id' => 'OrderBillingCountry'));  ?> 
```

和输出：

```
<select name="data[Order][billing_country]" class="span3" id="OrderBillingCountry">
<optgroup label="Select Country">
<option value="US">United States</option>
<option value="CA">Canada</option>
</optgroup>
<optgroup label="International Countries">
<option value="AF">Afghanistan</option>
….
</optgroup>
</select> 
```

使用 DebugKit，我可以看到保存在 Session 中的两个字母国家 ISO 代码：billing_country CA

.. 与 shipping_country 相同 ...

但是当我返回页面时，该值返回“美国”（选择中的第一个值...

那我错过了什么？？！我一直在扯这个头发！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T08:51:15.727

我想你在控制器中缺少这部分：

```
$this->request->data['Order']['billing_country'] = ....; 
```

为了将选定的值传递给视图....

编辑：鉴于您还必须添加这样的默认值：

```
<?php 
echo $this->Form->input('geoCountries', array(
  'class' => 'span3', 
  'label' => 'Billing Country', 
  'name' => 'data[Order][billing_country]', 
  'id' => 'OrderBillingCountry',
  'type' => 'select', 
  'default' => $this->data['Order']['billing_country']
));  
?> 
```

# android - 向联系人应用程序添加新字段

> ID：13577037
> 
> 赞同：1
> 
> 时间：2012-11-27T03:40:18.340
> 
> 标签：android, contacts, contactscontract

我了解可以使用联系人意图将新联系人和有关联系人的其他信息添加到本机联系人应用程序中。但是我们可以为联系人应用程序创建一个全新的字段并从另一个应用程序向其中添加信息吗？或者通过某种方式操纵这个字段，比如有一段代码作为插件添加到联系人应用程序？

例如：每个联系人的故障指示器字段具有三个可能的值 1\. 麻烦 2\. 不麻烦 3\. 友好。基于没有。调用次数和调用时间段，指标字段的值必须自动变化。

假设我有这样做的逻辑，我怎样才能使这个字段成为本机联系人应用程序的一部分？如果您至少可以为我指明正确的方向，那将会很有帮助。

# html - 手机横屏时出现黑块

> ID：13577039
> 
> 赞同：1
> 
> 时间：2012-11-27T03:40:24.107
> 
> 标签：html, css, landscape

在我的 iPhone 4 上查看这个网站时，一切看起来都应该是纵向布局。当旋转到横向视图时，有一个 div 负责在屏幕中间创建一个黑色块（下图）。

CSS非常基础

```
width: 100%;
img {
    margin-top: 50px;
    max-width: 100%;
} 
```

有什么建议么？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T04:12:49.107

现在用于媒体查询标准设备

```
/* Smartphones (portrait and landscape) ----------- */
@media only screen
and (min-device-width : 320px)
and (max-device-width : 480px) {
/* Styles */
}

/* Smartphones (landscape) ----------- */
@media only screen
and (min-width : 321px) {
/* Styles */
}

/* Smartphones (portrait) ----------- */
@media only screen
and (max-width : 320px) {
/* Styles */
}

/* iPads (portrait and landscape) ----------- */
@media only screen
and (min-device-width : 768px)
and (max-device-width : 1024px) {
/* Styles */
}

/* iPads (landscape) ----------- */
@media only screen
and (min-device-width : 768px)
and (max-device-width : 1024px)
and (orientation : landscape) {
/* Styles */
}

/* iPads (portrait) ----------- */
@media only screen
and (min-device-width : 768px)
and (max-device-width : 1024px)
and (orientation : portrait) {
/* Styles */
}

/* Desktops and laptops ----------- */
@media only screen
and (min-width : 1224px) {
/* Styles */
}

/* Large screens ----------- */
@media only screen
and (min-width : 1824px) {
/* Styles */
}

/* iPhone 4 ----------- */
@media
only screen and (-webkit-min-device-pixel-ratio : 1.5),
only screen and (min-device-pixel-ratio : 1.5) {
/* Styles */
} 
```

***[更多信息](http://front-end-developer.blogspot.in/2012/10/how-to-make-media-queries-standard.html)***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T23:33:15.987

轻松修复。我的图像没有调整大小。

```
img { height: auto; max-width: 100%; } 
```

感谢反馈！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T07:13:38.583

嗨，我在 iphone 和 ipad 中遇到了这个问题，我在orientationchange触发事件/函数中使用了以下代码

$(window).trigger("throttledresize");

```
$(document).bind("orientationchange", function(e){
      $(window).trigger("throttledresize")
});` 
```

# php - PHP 字符串“包含”

> ID：13577041
> 
> 赞同：174
> 
> 时间：2012-11-27T03:40:24.833
> 
> 标签：php, regex, string

检查字符串是否包含“。”的最有效方法是什么？或不？

我知道您可以通过许多不同的方式执行此操作，例如使用[正则表达式](http://en.wikipedia.org/wiki/Regular_expression)或遍历字符串以查看它是否包含点（“.”）。

* * *

## 回答 #1

> 赞同：493
> 
> 时间：2012-11-27T03:44:29.733

## PHP 8 或更新版本：

使用该[`str_contains`](https://www.php.net/manual/en/function.str-contains.php)功能。

```
if (str_contains($str, "."))
{
    echo 'Found it';
}

else
{
    echo 'Not found.';
} 
```

## PHP 7 或更早版本：

```
if (strpos($str, '.') !== FALSE)
{
    echo 'Found it';
}

else
{
    echo 'Not found.';
} 
```

请注意，您需要使用`!==`运算符。如果您使用`!=`or`<>`并且`'.'`在位置找到`0`，则比较将评估为真，因为`0`它松散地等于`false`。

* * *

## 回答 #2

> 赞同：66
> 
> 时间：2012-11-27T03:44:36.270

您可以使用这些字符串函数，

[strstr](http://www.php.net/manual/en/function.strstr.php) — 查找第一次出现的字符串

[strstr](http://www.php.net/manual/en/function.stristr.php) - 不区分大小写的 strstr()

[strrchr](http://www.php.net/manual/en/function.strrchr.php) — 查找字符串中最后一次出现的字符

[strpos](http://www.php.net/manual/en/function.strpos.php) — 查找字符串中子字符串第一次出现的位置

[strpbrk](http://www.php.net/manual/en/function.strpbrk.php) — 在字符串中搜索任何一组字符

如果那没有帮助，那么您应该使用`preg`正则表达式

[preg_match](http://www.php.net/manual/en/function.preg-match.php) — 执行正则表达式匹配

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-27T03:46:25.280

您可以使用 `stristr()`或`strpos()`。如果没有找到，两者都*返回 false 。*

# java - Java 7 的内部字符编码

> ID：13577049
> 
> 赞同：1
> 
> 时间：2012-11-27T03:41:27.740
> 
> 标签：java, character-encoding, ucs2, utf-32

据我所知，当 JRE 执行 Java 应用程序时，该字符串在内部将被视为 USC2 字节数组。在[wikipedia](http://en.wikipedia.org/wiki/UTF-16)中，可以找到以下内容。

> Java 最初使用 UCS-2，并在 J2SE 5.0 中添加了 UTF-16 补充字符支持。

随着 Java (Java 7) 的新发布版本，它的内部字符编码是什么？
Java有没有可能在内部开始使用UCS-4？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T03:45:53.980

Java 7 在内部仍然使用 UTF-16（[阅读 Charset Javadoc 的最后一部分](http://docs.oracle.com/javase/7/docs/api/java/nio/charset/Charset.html)），并且不太可能更改为 UCS-4。我会给你两个理由：

1.  从 UCS-2=>UCS-4 更改很可能意味着他们必须将 char 原语从 16 位类型更改为 32 位类型。回顾过去 Sun/Oracle 对向后兼容性的重视程度，这样的变化不太可能发生。
2.  对于大多数用例，UCS-4 比 UTF-16 编码的字符串占用更多的内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T03:47:04.930

> 问：据我所知，当 JRE 执行 Java 应用程序时，字符串将被视为（16 位 Unicode）字节数组

答：是的

> 问：随着Java（Java 7）的新发布版本，它的内部字符编码是什么？

答：一样

> 问：Java 内部是否有可能开始使用 UCS-4？

A：没听说过类似的

但是，您*可以*使用“代码点”在 Java 5 及更高版本中实现 UTF-32 字符：

*   [http://www.ibm.com/developerworks/java/library/j-unicode/](http://www.ibm.com/developerworks/java/library/j-unicode/)

*   [http://jcp.org/en/jsr/detail?id=204](http://jcp.org/en/jsr/detail?id=204)

# asp.net-mvc-3 - 联合安全/STS

> ID：13577053
> 
> 赞同：0
> 
> 时间：2012-11-27T03:42:11.663
> 
> 标签：asp.net-mvc-3, wif, claims-based-identity, federated-identity

我有一个使用联合安全性来验证用户身份的 asp.net 站点。因此，用户导航到重定向到登录页面的 url，如果成功则路由回主应用程序。我需要做的是让主应用程序允许在重定向到登录页面之前运行一些代码。这是因为初始请求可能有一些查询字符串参数，我需要将它们存储在用户会话中，因为返回主应用程序的请求正在删除它们。

这可能吗...任何想法或示例将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T22:57:00.003

我不确定这是否有帮助：

您可以通过修改 web.config 文件来关闭 WIF 对未经身份验证会话的内置重定向：

```
<microsoft.identityModel>
    <service>
        ......
        <federatedAuthentication>
            <wsFederation passiveRedirectEnabled="false"
            ...... 
```

一旦重建查询字符串，您就可以更新 AudienceUri 和领域。

# jquery - 由于包装器导致的jquery双重调用

> ID：13577054
> 
> 赞同：0
> 
> 时间：2012-11-27T03:42:19.717
> 
> 标签：jquery

我有许多 jquery 函数，它们在使用标准 $(function(){ 包装时执行两次。如下所示的其中一个函数将在展开后执行一次，并将在包装器周围执行两次。

我有一个 ajax 调用，我也做了一些调整。当你包装它时，它会调用一次新版本和一次旧版本。Unwrapped 只是调用旧版本。由于函数嵌入在 div 中，我看到了一个关于双重执行的错误。这可能吗？

处理 jsfiddle 演示。很快就会搞定的。

```
$(".words").click(function(event) {
    event.preventDefault();
    $("#hideme:first").attr('id', '').insertAfter($('#9999'));  
}); 
```

更新：当我在第三方代码中发现错误的事件处理程序时，我能够修复一些调用。然而，一个仍然存在。我已更改 id 以确保没有冲突。似乎某处还有另一个错误的事件处理程序。firebug 有什么方法可以找到锚点的事件处理程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T03:50:30.130

我整理了一个导致同样问题的jsfiddle。在我的示例中，我放置了两个 div，它们都具有“test”类，并将一个嵌套在另一个中。点击外部调用一次函数，内部调用两次。我的猜测是同样的事情正在发生在你身上。

[http://jsfiddle.net/jcolicchio/HXVcm/](http://jsfiddle.net/jcolicchio/HXVcm/)

编辑：这似乎解决了它：

```
$(document).ready(function(){
    $('.test').click(function(e){
        alert("HI!");
        e.stopPropagation();
    });
});​ 
```

似乎添加 e.stopPropagation 是您正在寻找的，而不是 preventDefault，它适用于链接和提交按钮

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T03:54:15.033

用于`event.stopPropagation();`停止执行函数两次。

```
$(".words").click(function(event) {
    event.preventDefault();
    event.stopPropagation();
    $("#hideme:first").attr('id', '').insertAfter($('#9999'));   
}); 
```

`event.stopPropagation();`将阻止事件在 DOM 树中冒泡，阻止任何父处理程序收到事件通知。

[http://api.jquery.com/event.stopPropagation/](http://api.jquery.com/event.stopPropagation/)

# eclemma - 在 gwt 应用程序中对服务器代码使用 eclEmma 插件没有覆盖结果

> ID：13577067
> 
> 赞同：3
> 
> 时间：2012-11-27T03:44:06.120
> 
> 标签：eclemma

我正在使用 eclEmma 插件来测试我的 gwt 应用程序的代码覆盖率。我已经为客户端代码编写了 jUnit 测试类，例如测试 get/set 方法等以及用于 rpc 服务的 jUnit 测试。我使用“syncproxy”来测试我等效的 GreetService、GreetServiceAsync 和 GreetServiceImpl rpc 服务。例如，我有一个获取用户位置的位置服务，这是我的测试类的一部分：

公共类 LocationServiceTest {

```
private static LocationService rpcService =
        (LocationService) SyncProxy.newProxyInstance(LocationService.class,
      "http://localhost:...", "location");

@Test
public void testAdministrativeAreaLevel2LocationService() {
    String result = rpcService.getAddress("49.28839970000001,-123.1259316");
    assertTrue((result != null) && (result.startsWith("Vancouver")));

} 
```

jUnit 测试全部通过，但是当我在我的项目上运行 eclEmma 时（我右键单击项目，选择“Coverage as”，然后选择“jUnit test”）我只获得客户端代码的覆盖率结果，而我的所有服务器代码的覆盖率为 0% .

关于如何让 eclEmma 覆盖服务器代码的任何建议？或者我可能做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-02T06:56:52.407

EclEmma 跟踪在测试 jvm（运行测试时启动的 vm）上启动的代码的覆盖率。您之前似乎正在运行您的服务器，因此 eclEmma “看不到”它的覆盖范围。您可以尝试在测试中运行服务器，例如使用[Cargo 。](http://cargo.codehaus.org/)

# c# - 源代码的图形表示

> ID：13577069
> 
> 赞同：-3
> 
> 时间：2012-11-27T03:44:25.480
> 
> 标签：c#, .net, architecture

我有一些 C# 源代码位于多个文件夹中。

我需要理解这段代码，因为它不是我写的。不仅如此，我还想了解企业应用程序是如何编码的。最好的方法是如果我有类、继承等的图形表示。我应该能够看到多层的源代码：例如类如何相互关联，这些类中的属性/方法如何关联和调用彼此等等。我听说过企业架构并检查了它，但我不明白我读过什么。

任何人都可以提出其他建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T03:49:09.257

你看过 NDepend 吗？它可以显示代码的所有依赖关系——例如通过图表；

*   [http://www.ndepend.com](http://www.ndepend.com)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T04:02:43.023

只需使用[Microsoft Debug Canvas](http://msdn.microsoft.com/en-us/devlabs/debuggercanvas.aspx)即可熟悉该解决方案。

![在此处输入图像描述](../Images/e2dec48cf28f1981caf5278c8a71160f.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T03:51:08.790

如果您使用的是 Visual Studio，请右键单击项目并选择“查看类图”。

# windows-phone-7 - 通过按住特殊按钮在 Windows Phone 中打开应用程序

> ID：13577072
> 
> 赞同：0
> 
> 时间：2012-11-27T03:44:36.057
> 
> 标签：windows-phone-7

我有一个应用程序，我想通过按住手机上的一些特殊按钮来打开它（例如：相机按钮、电源按钮......）。你有一些想法或示例代码来解决它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T07:08:40.977

不幸的是，这是不可能的。在 Windows Phone 7 上，您可以订阅的唯一物理按钮是后退按钮和相机按钮，并且只有在您的应用程序运行时才能订阅。所以你不能以这种方式启动应用程序。

# java - Java获取方法移动到前面而不是后面

> ID：13577077
> 
> 赞同：0
> 
> 时间：2012-11-27T03:45:10.003
> 
> 标签：java

我有一个 add 方法，它将最新的文本字符串插入到我希望它作为第一个文本字符串插入的列表的末尾。任何帮助表示赞赏。这是方法：

```
 public void add (Magazine mag)
  {

  MagazineNode node = new MagazineNode (mag);
  MagazineNode current;

  if (list == null)
     list = node;
  else
  {
     current = list;
     while (current.next != null)
        current = current.next;
     current.next = node;
  }
   } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T03:50:12.920

假设我了解您需要，这可能会关闭，我认为您需要以下方法。

```
public void add_first (Magazine mag)
{
  MagazineNode node = new MagazineNode (mag);

  // make the new first node point to the current root
  node.next=list;

  // update the root to the new first node
  list=node;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T03:49:48.820

```
public void add (Magazine mag)
{
  MagazineNode node = new MagazineNode (mag);    
  node.next = list;
  list = node;
} 
```

# olap - 如何使用雪花模式编写维度？. 详情如下

> ID：13577079
> 
> 赞同：0
> 
> 时间：2012-11-27T03:45:20.713
> 
> 标签：olap, pentaho, mondrian, rolap, snowflake-schema

一共有三张桌子——

1) 学生 - 我的事实表（带有 FK ADDRESS_ID 的引用地址

2) 地址 - 此表包含 FK COUNTRY_ID 引用 COUNTRY

3）国家 - 这有一个我会显示的名称列。（PK 标识符）

我已经写了这个，但不确定它是否正确

基本上我想加入学生（事实表）到事实的国家组合 --- Def .. 然后这个

```
<Dimension foreignKey="ADDRESS_ID" name="COUNTRY">
  <Hierarchy name="COUNTRY NAME" hasAll="true" primaryKey="IDENTIFIER" primaryKeyTable="ADDRESSES">
    <Join leftKey="IDENTIFIER" rightKey="IDENTIFIER">
      <Table name="ADDRESSES" >
      </Table>
      <Table name="COUNTRIES" >
      </Table>
    </Join>
    <Level name="Country Name" visible="true" table="COUNTRIES" column="NAME" nameColumn="NAME" uniqueMembers="false">
    </Level>
  </Hierarchy>
</Dimension> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T06:40:05.017

你没有正确地加入。我将假设您的关系模式如下所示：

```
.-STUDENT-------.  
| IDENTIFIER PK |    .-ADDRESSES-----.
| ADDRESS_ID FK |----| IDENTIFIER PK |    .-COUNTRIES-----.
                     | COUNTRY_ID FK |----| IDENTIFIER PK |
                                          | NAME          | 
```

JOIN 元素需要在最低粒度维表 ADDRESS 和上一级（COUNTRY）之间进行连接。连接这些表的键是 COUNTRY_ID（用于 ADDRESS）和 IDENTIFIER（国家）。leftKey 然后需要设置为 COUNTRY_ID。

此外，您正在使用关卡的 nameColumn 属性，但这实际上用于设置关卡自己的名称，而不是成员名称。我会删除这个。总之，你会得到这样的东西：

```
<Dimension foreignKey="ADDRESS_ID" name="COUNTRY">
  <Hierarchy name="COUNTRY NAME" hasAll="true" primaryKey="IDENTIFIER" primaryKeyTable="ADDRESSES">
    <Join leftKey="COUNTRY_ID" rightKey="IDENTIFIER">
      <Table name="ADDRESSES" >
      </Table>
      <Table name="COUNTRIES" >
      </Table>
    </Join>
    <Level name="Country Name" visible="true" table="COUNTRIES" column="NAME">
    </Level>
  </Hierarchy>
</Dimension> 
```

# c - 在 C 中寻找垃圾收集的根源

> ID：13577082
> 
> 赞同：5
> 
> 时间：2012-11-27T03:45:25.480
> 
> 标签：c, garbage-collection, boehm-gc, gc-roots

我正在尝试在 C 中实现一个简单的标记和清除垃圾收集器。算法的第一步是找到根。所以我的问题是如何在 C 程序中找到根源？

在使用 malloc 的程序中，我将使用自定义分配器。这个自定义分配器就是将从 C 程序调用的所有内容，并且可能是自定义 init()。

垃圾收集器如何知道程序中的所有指针（根）是什么？另外，给定一个自定义类型的指针，它如何获取其中的所有指针？

例如，如果有一个指针 p 指向一个类列表，它里面有另一个指针..说 q。垃圾收集器如何知道它，以便它可以标记它？

更新：如果我在初始化时将所有指针名称和类型发送给 GC 怎么样？同样，也可以发送不同类型的结构，让GC遍历树。这甚至是一个理智的想法还是我只是疯了？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-27T04:57:37.757

首先，没有广泛的编译器和操作系统支持的 C 中的垃圾收集器*必须*保守，因为您无法区分合法指针和恰好具有看起来像指针的值的整数。即使是保守的垃圾收集器也*很难*来实施。就像，真的很难。通常，您需要限制语言以获得可接受的内容：例如，如果指针被隐藏或混淆，则可能无法正确收集内存。如果您分配 100 个字节并且只保留指向分配的第十个字节的指针，您的 GC 不太可能发现您仍然需要该块，因为它不会看到对开头的引用。另一个非常重要的控制约束是内存对齐：如果指针可以位于未对齐的内存上，则收集器的速度可能会降低 10 倍或更差。

要找到根，你需要知道你的堆栈从哪里开始，你的堆栈在哪里结束。请注意复数形式：每个线程都有自己的堆栈，您可能需要考虑这一点，具体取决于您的目标。要知道堆栈从哪里开始，而无需输入特定于平台的详细信息（无论如何我可能无法提供），您可以在当前线程的主函数中使用汇编代码（仅`main`在非线程可执行文件中）查询堆栈寄存器（`esp`在 x86 上，`rsp`在 x86_64 上仅命名这两个）。Gcc 和 clang 支持一种语言扩展，允许您将变量永久分配给寄存器，这对您来说应该很容易：

```
register void* stack asm("esp"); // replace esp with the name of your stack reg 
```

(`register`是一个标准的语言关键字，大多数时候被当今的编译器忽略，但加上`asm("register_name")`，它可以让你做一些讨厌的事情。)

为确保您不会忘记重要的根，您应该将`main`函数的实际工作推迟到另一个根。（在 x86 平台上，您还可以查询`ebp`/ `rbp`，堆栈帧基指针，并且仍然在 main 函数中执行实际工作。）

```
int main(int argc, const char** argv, const char** envp)
{
    register void* stack asm("esp");
    // put stack somewhere
    return do_main(argc, argv, envp);
} 
```

进入 GC 进行回收后，您需要查询当前堆栈指针以查找已中断的线程。为此，您将需要特定于设计和/或特定于平台的调用（尽管如果您在同一线程上执行某些操作，则上述技术仍然有效）。

真正的寻根之旅从现在开始。好消息：大多数 ABI 将要求堆栈帧在大于指针大小的边界上对齐，这意味着如果您相信每个指针都在对齐的内存上，您可以将整个堆栈视为 a`intptr_t*`并检查是否有任何模式inside 看起来像您的任何托管指针。

显然，还有其他根源。全局变量（理论上）可以是根，结构内的字段也可以是根。寄存器也可以有指向对象的指针。您需要单独考虑可以是根的全局变量（或完全禁止，在我看来这不是一个坏主意），因为自动发现这些变量会很困难（至少，我不知道该怎么做在任何平台上）。

这些根可能导致堆上的引用，如果你不小心，事情可能会出错。

由于并非所有平台都提供`malloc`自省（据我所知），因此您需要实现扫描内存的概念——即您的 GC 知道的内存。它至少需要知道每个此类分配的地址和大小。当您获得对其中之一的引用时，您只需扫描它们以查找指针，就像您为堆栈所做的那样。（这意味着你应该注意你的指针是对齐的。如果你让你的编译器完成它的工作，这通常是这种情况，但是当你使用第三方 API 时你仍然需要小心）。

这也意味着您不能将对可收集内存的引用放在 GC 无法到达的地方。这是最痛苦的地方，也是你需要格外小心的地方。否则，如果你的平台支持`malloc` 自省，你可以很容易地知道你得到一个指针的每个分配的大小，并确保你不会超出它们。

这只是触及了主题的表面。垃圾收集器非常复杂，即使是单线程的。当您将线程添加到组合中时，您将进入一个全新的伤害世界。

Apple 已经为 Objective-C 语言实现了这种保守的 GC，并将其命名为 libauto。他们已经开源了它，以及 Mac OS X 的大部分低级技术，你可以[在这里找到源代码](http://www.opensource.apple.com/source/libauto/libauto-77.1/)。

我只能在这里引用 Hot Licks：祝你好运！

* * *

好吧，在我走得更远之前，我忘记了一些非常重要的事情：编译器优化会破坏 GC。如果您的编译器不知道您的 GC，它很可能永远不会在堆栈中放置某些根（仅在寄存器中处理它们），您将错过它们。如果您可以检查寄存器，这对于单线程程序来说并没有太大问题，但对于多线程程序来说，这又是一个巨大的混乱。

还要非常小心分配的可中断性：您必须确保在返回新指针时您的 GC 不会启动，因为它可以在分配给根之前立即收集它，并且当您的程序恢复时它会分配那个指向你的程序的新的悬空指针。

这是解决编辑问题的更新：

> Update: How about if I send all the pointer names and types to GC when I init it? Similarly, the structure of different types can also be sent so that GC can traverse the tree. Is this even a sane idea or am I just going crazy?

I guess you could allocate our memory then register it with the GC to tell it that it should be a managed resource. That would solve the interruptability problem. But then, be careful about what you send to third-party libraries, because if they keep a reference to it, your GC might not be able to detect it since they won't register their data structures with your GC.

And you likely won't be able to do that with roots on the stack.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-27T03:57:43.980

根基本上都是静态和自动的对象指针。静态指针将链接到加载模块内。必须通过扫描堆栈帧来找到自动指针。当然，您不知道自动指针在堆栈帧中的什么位置。

一旦你有了根，你需要扫描对象并找到它们里面的所有指针。（这将包括指针数组。）为此，您需要识别类对象并以某种方式从中提取有关指针位置的信息。当然，在 C 语言中，许多对象不是虚拟的，并且其中没有类指针。

祝你好运！！

**补充：** 一种可以模糊地使您的任务成为可能的技术是“保守”垃圾收集。由于您打算拥有自己的分配器，因此您可以（以某种方式）跟踪分配大小和位置，因此您可以从存储中挑选任何指针大小的块并询问“这可能是指向我的一个对象的指针吗？” 当然，您永远无法确定，因为随机数据可能“看起来像”指向您的某个对象的指针，但您仍然可以通过这种机制扫描一大块存储空间（例如调用堆栈中的帧，或单个对象）并识别它*可能*解决的所有可能对象。

使用保守的收集器，您不能安全地进行对象重定位/压缩（在移动对象时修改指向对象的指针），因为您可能会意外修改看起来像对象指针但实际上对某些应用程序有意义的数据的“随机”数据。但是您可以识别未使用的对象并释放它们占用的空间以供重复使用。通过适当的设计，可以拥有非常有效的非压缩 GC。

（但是，如果您的 C 版本允许未对齐的指针扫描可能会非常慢，因为您必须尝试字节对齐的所有变化。）

# ios - 在 xcode 4.5.1 上创建临时的、无线的、iOS 5.1 ipad 应用程序

> ID：13577084
> 
> 赞同：0
> 
> 时间：2012-11-27T03:45:40.320
> 
> 标签：ios, xcode, ipad

我想知道如何从 xcode 4.5.1 构建一个在 iPad 1（运行 iOS 5.1.1）上运行的临时应用程序。我已经安装了 iPad 5.1 模拟器，它可以正常工作，当通过电线安装时，它在 iPad 1 上也可以正常工作。但是，当我创建一个临时的无线分发时，它不会安装（仅在 iPad 1 上，iPad 2+ 很好）。在`project->build settings`我有`Base SDK: Latest iOS (iOS 6.1)`和`iOS Deployment Target: iOS 5.1`。有什么想法吗？

请注意，我已经知道如何创建“无线”分发。这个问题是关于在 iPad 1 上安装的一个特殊问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T00:17:36.423

我认为解决方案是将项目和目标中的构建设置都设置为 5.1。我最近在 xcode 4.6 中这样做了，这似乎解决了问题（无法部署到 iPad 1）。我注意到基础 SDK 仍然显示 6.1。

# apache-flex - Flex 移动应用 StageWebView 打印

> ID：13577086
> 
> 赞同：3
> 
> 时间：2012-11-27T03:45:47.280
> 
> 标签：apache-flex, mobile, printing, stagewebview

我有一个在 Flash Builder/Flex Mobile Project 中开发的 iphone 应用程序，它使用 stagewebview 显示 PDF。

我有兴趣从应用程序中打印这些 PDF。有谁知道这是否可行，如果可以，您能否建议一些示例代码？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:57:56.670

[AlivePDF](http://alivepdf.bytearray.org/)你有没有看过这个。

[http://livedocs.adobe.com/flex/3/langref/mx/printing/FlexPrintJob.html](http://livedocs.adobe.com/flex/3/langref/mx/printing/FlexPrintJob.html)

[http://www.adobe.com/livedocs/flash/9.0/ActionScriptLangRefV3/flash/display/BitmapData.html](http://www.adobe.com/livedocs/flash/9.0/ActionScriptLangRefV3/flash/display/BitmapData.html) 有了它，您可以逐像素读取并发送到打印机以打印对象。

# c# - 我想编辑我的程序，而不是让用户在文本框中输入座位号来进行预订，他们可以在列表框中选择它

> ID：13577091
> 
> 赞同：0
> 
> 时间：2012-11-27T03:46:28.787
> 
> 标签：c#, visual-studio-2010

我将如何更改代码以消除获取座位号值并进行预订的文本框，他们可以简单地从列表框中的座位表中选择他们想要的座位，然后单击进行预订。我知道这里有一些未使用的代码需要清理，只是忽略它我一直在尝试不同的方法来做到这一点。

这是表单代码。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace Reservations
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        Flight curFlight;
        List<Flight> flightlist = new List<Flight>();

        Flight flight1 = new Flight("Cessna Citation X", "10:00AM", "Denver", 6, 2);
        Flight flight2 = new Flight("Piper Mirage", "10:00PM", "Kansas City", 3, 2);

        private void Form1_Load(object sender, EventArgs e)
        {
            MakeReservations();
            DisplayFlights();
            SetupFlights();

        }

        private void lstFlights_SelectedIndexChanged(object sender, EventArgs e)
        {
            curFlight = (Flight)lstFlights.SelectedItem;
            txtDepart.Text = curFlight.DepartureTime;
            txtDestination.Text = curFlight.Destination;
            string[] seatChart = curFlight.SeatChart;
            DisplaySeatChart(seatChart);
        }

        private void DisplaySeatChart(string[] seating)
        {
            lstSeatChart.Items.Clear();
            for (int seat = 0; seat <= seating.GetUpperBound(0); seat++)
            {
                lstSeatChart.Items.Add("Seat: " + (seat + 1) + "       " + seating[seat]);
            }
        }

        private void SetupFlights()
        {

            //flightlist.Add(flight1);
            //flightlist.Add(flight2);

        }

        private void MakeReservations()
        {
            flight1.MakeReservation("Dill", 12);
            flight1.MakeReservation("Deenda", 3);
            flight1.MakeReservation("Schmanda", 11);
            flight2.MakeReservation("Dill", 4);
            flight2.MakeReservation("Deenda", 2);
        }

        private void DisplayFlights()
        {
            lstFlights.Items.Clear();
            lstFlights.Items.Add(flight1);
            lstFlights.Items.Add(flight2);
        }

        private void btnMakeReservation_Click(object sender, EventArgs e)
        {
            string name;
            int seatNum;
            string[] seatChart = curFlight.SeatChart;

            if (txtCustomerName.Text != "" && txtSeatNum.Text != "")
            {
                name = txtCustomerName.Text;
                seatNum = Convert.ToInt16(txtSeatNum.Text);
                curFlight.MakeReservation(name, seatNum);

                lstSeatChart.Items.Clear();

                DisplaySeatChart(seatChart);
            }
            else
            {
                MessageBox.Show("Please Fill out Name and Seat Number.", "Reservation Error");
            }
        }

        private void btnEdit_Click(object sender, EventArgs e)
        {
            string name;
            int seatNum;
            string[] seatChart = curFlight.SeatChart;

            if (txtCustomerName.Text != "" && txtSeatNum.Text != "")
            {
                name = txtCustomerName.Text;
                seatNum = Convert.ToInt16(txtSeatNum.Text);
                curFlight.EditReservation(name, seatNum);

                lstSeatChart.Items.Clear();

                DisplaySeatChart(seatChart);
            }
            else
            {
                MessageBox.Show("Please Fill out Name and Seat Number.", "Reservation Error");
            }
        }
    }
} 
```

这是班级代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace Reservations
{
    class Flight
    {
        private string mPlane;
        private string mDepartureTime;
        private string mDestination;
        private int mRows;
        private int mSeats;
        private string[] mSeatChart;

        public Flight()
        {
        }

        public Flight(string planeType, string departureTime, string destination, int numRows, int numSeatsPerRow)
        {
            this.Plane = planeType;
            this.DepartureTime = departureTime;
            this.Destination = destination;
            this.Rows = numRows;
            this.Seats = numSeatsPerRow;

            // create the seat chart array
            mSeatChart = new string[Rows * Seats];

            for (int seat = 0; seat <= mSeatChart.GetUpperBound(0); seat++)
            {
                mSeatChart[seat] = "Open";
            }
        }

        public string Plane
        {
            get { return mPlane; }
            set { mPlane = value; }
        }

        public string DepartureTime
        {
            get { return mDepartureTime; }
            set { mDepartureTime = value; }
        }

        public string Destination
        {
            get { return mDestination; }
            set { mDestination = value; }
        }

        public int Rows
        {
            get { return mRows; }
            set { mRows = value; }
        }

        public int Seats
        {
            get { return mSeats; }
            set { mSeats = value; }
        }

        public string[] SeatChart
        {
            get { return mSeatChart; }
            set { mSeatChart = value; }
        }

        public override string ToString()
        {
            return this.Plane;
        }

        public void MakeReservation(string name, int seat)
        {
            if (IsFull(seat) == false)
            {
                if (seat <= (Rows * Seats) && mSeatChart[seat - 1] == "Open")
                {
                    mSeatChart[seat - 1] = name;
                }
                else
                {
                    MessageBox.Show("Seat is taken.", "Reservation Error");

                }

            }
            else
            {
                MessageBox.Show("Plane is full please choose another flight.", "Reservation Error");
            }
        }

        public void EditReservation(string name, int seat)
        {
            if (seat <= (Rows * Seats) && mSeatChart[seat - 1] != "Open")
            {
                mSeatChart[seat - 1] = name;
            }
            if (seat > mSeatChart.GetUpperBound(0))
            {
                MessageBox.Show("Invalid seat number.", "Reservation Error");
            }
            else
            {
                if (mSeatChart[seat - 1] == "Open")
                {
                    MessageBox.Show("No such reservation exists.", "Reservation Error");
                }
            }

        }

        public bool IsFull(int seat)
        {
            if (seat >= (Rows * Seats) && mSeatChart[seat - 1] != "Open")
            {
                return true;
            }
            return false;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T04:22:49.593

您的座位表集合中的项目首先应该有一个标识符。一旦你有了它，那个标识符（或描述、名称等）应该添加到用户可以选择的列表框中。预订时，您只需确定选择了哪些列表框项目。您可以使用或不使用数据绑定来执行此操作。

```
 List<Seat> seats;

    private void button6_Click(object sender, EventArgs e)
    {
        seats = new List<Seat>
        {
            new Seat { Identifier = "A1", Description = "A1 - Window" },
            new Seat { Identifier = "A2", Description = "A2 - Center" },
            new Seat { Identifier = "A3", Description = "A3 - Aisle" } 
        };

        listBox1.DataSource = seats;
        listBox1.DisplayMember = "Description";
        listBox1.ValueMember = "Identifier"; 
    }

    private void button7_Click(object sender, EventArgs e)
    {
        // get selected seat
        foreach (Seat selectedSeat in listBox1.SelectedItems)
        {
            MessageBox.Show(selectedSeat.Identifier);
        }
    } 
```

当然，您可以围绕示例进行操作并仅显示那些空闲的座位。您可以通过多种方式做到这一点，其中之一是在您的 Seat 类上添加一个标志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T09:46:09.040

答案很简单而不是

```
seatNum = Convert.ToInt16(txtSeatNum.Text); 
```

采用

```
seatNum = lst.SeatChart.SelectedIndex + 1; 
```

# php - htmlentities 和法语字符

> ID：13577094
> 
> 赞同：0
> 
> 时间：2012-11-27T03:46:58.630
> 
> 标签：php

我试图逃避一些用户输入的形式。

```
if( !empty($_SESSION['descr']) )
{
    $descr = htmlentities($_SESSION['descr']);
    $descr = stripslashes($descr);
    $descr = html_entity_decode($descr); 

    echo"<textarea cols=\"50\" rows=\"10\" name=\"descr\" >".$descr."</textarea>";
}
else
{
    echo "<textarea cols=\"50\" rows=\"10\" name=\"descr\" ></textarea>";
} 
```

我一开始没有使用 html_entity_decode() 然后我意识到如果用户输入了一些法语字符，那么它将无法正确显示它们。像使用 html_entity_decode() 那样使用它是否节省？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T03:53:07.277

您应该将字符串的编码更改为 ISO-8859-15，它会拾取 LATIN-1 遗漏的字符（即法语字符）：

```
$descr = htmlentities($desc,ENT_COMPAT,'ISO-8859-15'); 
```

ENT_COMPAT 可能不是您要查找的标志，但您可以在[手册](http://php.net/manual/en/function.htmlentities.php)中找到字幕。

# osx-lion - OSX VPN IP地址在本地和服务器上冲突？

> ID：13577095
> 
> 赞同：0
> 
> 时间：2012-11-27T03:47:01.967
> 
> 标签：osx-lion, vpn, osx-server

我正在尝试使用 OSX 了解 VPN，但有一个问题我找不到答案。任何帮助将不胜感激。

我有一台运行 OSX 服务器 10.7 的办公机器。我今天在上面设置了 VPN，并设置了我的笔记本电脑（运行 OSX 10.8）来访问它。我能够连接，但在通过办公网络上的 IP 地址访问机器时遇到问题。我怀疑我有问题，因为我的两个网络都使用块 10.0.1.xx。在我更改我的一个网络 IP 范围之前，我想问一下这是否是实际问题，或者是否有更简单的方法来解决这个问题。我的笔记本电脑如何知道 10.0.1.127 在办公室网络上并且需要查看 VPN 连接？

谢谢你的帮助。试图将我的大脑包裹在整个 VPN 事情上。

汤姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T20:41:19.987

您是对的，将两个地址块设置为相同的地址空间对您的工作站来说非常混乱。实际问题更多与网关相关，因为您的机器现在有两个（可能）具有相同 IP 地址的网关。

没有好的方法可以在本地和远程网络上使用相同的 IP 范围使其工作。

请注意，我说的是“好方法”，我敢肯定这是可能的，只是麻烦多于值得。

# java - Google 云端硬盘 SDK 错误

> ID：13577100
> 
> 赞同：1
> 
> 时间：2012-11-27T03:47:36.910
> 
> 标签：java, android, google-drive-api

这是我访问 Google Drive 的代码，主要取自[这篇](https://stackoverflow.com/questions/12164024/android-open-and-save-files-to-from-google-drive-sdk/12321331#comment18575553_12321331)文章中的**ArtOfWarfare**：

```
public class MainActivity extends Activity {
    class OnTokenAcquired implements AccountManagerCallback<Bundle> {
        boolean alreadyTriedAgain;
        public OnTokenAcquired() {
            // TODO Auto-generated constructor stub
        }
        protected void onActivityResult(int requestCode, int resultCode, Intent data) {
            if (requestCode == 3025) {
                switch (resultCode) {
                case RESULT_OK:
                    AccountManager am = AccountManager.get(getApplicationContext());
                    am.getAuthToken(am.getAccounts()[0],
                            "ouath2:" + DriveScopes.DRIVE,
                            new Bundle(),
                            true,
                            new OnTokenAcquired(),
                            null);
                    break;
                case RESULT_CANCELED:
                    // This probably means the user refused to log in. Explain to them why they need to log in.
                    break;
                default:
                    // This isn't expected... maybe just log whatever code was returned.
                    break;
                }
            } else {
                // Your application has other intents that it fires off besides the one for Drive's log in if it ever reaches this spot. Handle it here however you'd like.
            }
        }
        @Override
        public void run(AccountManagerFuture<Bundle> result) {
            try {
                final String token = result.getResult().getString(AccountManager.KEY_AUTHTOKEN);
                HttpTransport httpTransport = new NetHttpTransport();
                JacksonFactory jsonFactory = new JacksonFactory();
                Drive.Builder b = new Drive.Builder(httpTransport, jsonFactory, null);
                b.setJsonHttpRequestInitializer(new JsonHttpRequestInitializer() {
                    @Override
                    public void initialize(JsonHttpRequest request) throws IOException {
                        DriveRequest driveRequest = (DriveRequest) request;
                        driveRequest.setPrettyPrint(true);
                        driveRequest.setKey("my number here");
                        driveRequest.setOauthToken(token);
                    }
                });

                final Drive drive = b.build();

                final com.google.api.services.drive.model.File body = new com.google.api.services.drive.model.File();
                body.setTitle("My Test File");
                body.setDescription("A Test File");
                body.setMimeType("text/plain");
                File newFile = new File("this");
                final FileContent mediaContent = new FileContent("text/plain", newFile);
                new Thread(new Runnable() {
                    public void run() {
                        try {
                            com.google.api.services.drive.model.File file = drive.files().insert(body, mediaContent).execute();
                            alreadyTriedAgain = false; // Global boolean to make sure you don't repeatedly try too many times when the server is down or your code is faulty... they'll block requests until the next day if you make 10 bad requests, I found.
                        } catch (IOException e) {
                            if (!alreadyTriedAgain) {
                                alreadyTriedAgain = true;
                                AccountManager am = AccountManager.get(getApplicationContext());
                                am.invalidateAuthToken(am.getAccounts()[0].type, null); // Requires the permissions MANAGE_ACCOUNTS & USE_CREDENTIALS in the Manifest
                                am.getAuthToken(am.getAccounts()[0],
                                        "ouath2:" + DriveScopes.DRIVE,
                                        new Bundle(),
                                        true,
                                        new OnTokenAcquired(),
                                        null);
                            } else {
                                // Give up. Crash or log an error or whatever you want.
                            }
                        }
                    }
                }).start();
                Intent launch = (Intent)result.getResult().get(AccountManager.KEY_INTENT);
                if (launch != null) {
                    startActivityForResult(launch, 3025);
                    return; // Not sure why... I wrote it here for some reason. Might not actually be necessary.
                }
            } catch (OperationCanceledException e) {
                // Handle it...
            } catch (AuthenticatorException e) {
                // Handle it...
            } catch (IOException e) {
                // Handle it...
            }
        }

    }
    private java.io.File downloadGFileToJFolder(Drive drive, String token, File gFile, java.io.File jFolder) throws IOException {
        if (gFile.toURI() != null && gFile.toURI().toString().length() > 0 ) {
            if (jFolder == null) {
                jFolder = Environment.getExternalStorageDirectory();
                jFolder.mkdirs();
            }
            try {

                HttpClient client = new DefaultHttpClient();
                HttpGet get = new HttpGet(gFile.toURI());
                get.setHeader("Authorization", "Bearer " + token);
                org.apache.http.HttpResponse response = client.execute(get);

                InputStream inputStream = response.getEntity().getContent();
                jFolder.mkdirs();
                java.io.File jFile = new java.io.File(jFolder.getAbsolutePath() + "/" + gFile.getName()); // getGFileName() is my own method... it just grabs originalFilename if it exists or title if it doesn't.
                FileOutputStream fileStream = new FileOutputStream(jFile);
                byte buffer[] = new byte[1024];
                int length;
                while ((length=inputStream.read(buffer))>0) {
                    fileStream.write(buffer, 0, length);
                }
                fileStream.close();
                inputStream.close();
                return jFile;
            } catch (IOException e) {        
                // Handle IOExceptions here...
                return null;
            }
        } else {
            // Handle the case where the file on Google Drive has no length here.
            return null;
        }
    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        getApplicationContext();
        AccountManager am = AccountManager.get(this);
        am.getAuthToken(am.getAccounts()[0],
                "ouath2:" + DriveScopes.DRIVE,
                new Bundle(),
                true,
                new OnTokenAcquired(),
                null);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

启动应用程序时出现以下错误（Android 系统也会暂时停止）：

```
11-26 22:31:03.093: E/AndroidRuntime(4288): FATAL EXCEPTION: main
11-26 22:31:03.093: E/AndroidRuntime(4288): java.lang.RuntimeException: Unable to start activity ComponentInfo{android/android.accounts.GrantCredentialsPermissionActivity}: java.lang.NullPointerException
11-26 22:31:03.093: E/AndroidRuntime(4288):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2225)
11-26 22:31:03.093: E/AndroidRuntime(4288):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2260)
11-26 22:31:03.093: E/AndroidRuntime(4288):     at android.app.ActivityThread.access$600(ActivityThread.java:139)
11-26 22:31:03.093: E/AndroidRuntime(4288):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1277)
11-26 22:31:03.093: E/AndroidRuntime(4288):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-26 22:31:03.093: E/AndroidRuntime(4288):     at android.os.Looper.loop(Looper.java:156)
11-26 22:31:03.093: E/AndroidRuntime(4288):     at android.app.ActivityThread.main(ActivityThread.java:5045)
11-26 22:31:03.093: E/AndroidRuntime(4288):     at java.lang.reflect.Method.invokeNative(Native Method)
11-26 22:31:03.093: E/AndroidRuntime(4288):     at java.lang.reflect.Method.invoke(Method.java:511)
11-26 22:31:03.093: E/AndroidRuntime(4288):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
11-26 22:31:03.093: E/AndroidRuntime(4288):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
11-26 22:31:03.093: E/AndroidRuntime(4288):     at dalvik.system.NativeStart.main(Native Method)
11-26 22:31:03.093: E/AndroidRuntime(4288): Caused by: java.lang.NullPointerException
11-26 22:31:03.093: E/AndroidRuntime(4288):     at android.accounts.GrantCredentialsPermissionActivity.onCreate(GrantCredentialsPermissionActivity.java:84)
11-26 22:31:03.093: E/AndroidRuntime(4288):     at android.app.Activity.performCreate(Activity.java:4543)
11-26 22:31:03.093: E/AndroidRuntime(4288):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1071)
11-26 22:31:03.093: E/AndroidRuntime(4288):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2181)
11-26 22:31:03.093: E/AndroidRuntime(4288):     ... 11 more 
```

另外，我的手机显示一个奇怪的通知：`"Permission Requested for account Weather"`。有人知道是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T13:51:37.357

尝试替换这个：

```
am.getAccounts()[0], 
```

有了这个：

```
am.getAccountsByType("com.google")[0], 
```

我在另一个主题中的代码被过度简化，假设它找到的第一个帐户是 Google 帐户（Google 云端硬盘也是如此）。我们在应用程序中实际使用的代码检查以确保它是一个 Google 帐户（然后执行进一步检查以确保它是一个公司帐户，这就是我将代码简化为我共享的内容的原因。）

# windows-8 - Windows 8 应用程序 - 加载外部页面

> ID：13577102
> 
> 赞同：1
> 
> 时间：2012-11-27T03:47:52.657
> 
> 标签：windows-8, winjs

有没有办法在 WinJS Windows 8 应用程序中加载外部页面？我想加载类似于以下内容的内容； [http://www.highcharts.com/demo/line-ajax](http://www.highcharts.com/demo/line-ajax)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T04:45:24.973

您可以在 iframe 中引用外部页面，这将在 Web 上下文中加载该页面（为其提供与您可能加载的属于应用程序的页面不同的访问权限）。

查看[如何链接到外部网页](http://msdn.microsoft.com/en-us/library/windows/apps/Hh780594.aspx)以全面讨论各种选项。

# matlab - 在 MATLAB 中创建具有不同子数据的总数据

> ID：13577107
> 
> 赞同：1
> 
> 时间：2012-11-27T03:48:20.130
> 
> 标签：matlab, loops, for-loop, octave, inner-classes

我在 Workspace 中有几个名为`ET1_A_C1_l1`, `ET1_A_C2_l1`, `ET1_A_C3_l1`, ...,的数据。`ET1_A_C63_l1`除此之外，我还有另一组名为`ET1_H_C1_l1`, `ET1_H_C2_l1`, ...,`ET1_A_C63_l1`

现在我需要将 2 组数据组合成一个名为`Total_data.mat`; 例如，

```
Total_data=[ET1_A_C1_l1 ET1_A_C2_l1 ET1_A_C3_l1 ..... ET1_A_63_l1;ET1_H_C1_l1 ET1_H_C2_l1 ....ET1_H_C63_l1] 
```

并且需要花费大量时间来一一键入代码。有什么想法使用`loop`来做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T06:52:17.890

我不会立即跳上我的马车，而是从解决方案开始（已通过示例设置）：

```
%# State the size of each matrix
T = 6; N = 2;

%# State the number of matrices in category A and H (63 in your case - but 2 in my example) 
K = 2;

%# Set up some example matrices
ET1_A_C1_l1 = rand(T, N); ET1_A_C2_l1 = 1 + rand(T, N);
ET1_H_C1_l1 = 2 + rand(T, N); ET1_H_C2_l1 = 3 + rand(T, N);

%# Preallocate a matrix to hold the output
M = NaN(2 * T, K * N);

%# Loop over the variables and add them to the matrix using the evil eval
for k = 1:K
    M(1:T, (k*N)-1:k*N) = eval(['ET1_A_C', num2str(k), '_l1']);
    M(T+1:2*T, (k*N)-1:k*N) = eval(['ET1_H_C', num2str(k), '_l1']);
end

%# Save to a mat file
save('Total_Data.mat', 'M'); 
```

现在，马车时间：如果你已经以你现在拥有的形式获得了数据，而你对此无能为力，并且你意识到它处于多么可怕的境地，那么你可以停止阅读现在。

但是，如果您首先负责创建所有这些 E_blah 变量，那么您需要查看@jerad 的答案并开始考虑存储数据的不同方式。单元阵列或结构是实现它的一种方法。或者首先从一个大矩阵开始。但请记住以下两条一般规则：

1) 如果您的工作区中有超过 20 个变量，那么您可能做错了。

2）如果你发现自己经常使用 evil 功能`eval`，那么你几乎肯定做错了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T04:47:24.487

遇到此类问题向我表明，您对 matlab 中可用的其他数据结构还不满意……例如元胞数组和结构。您可以通过将数据存储在较少的数组中，然后在需要时正确索引它们来轻松解决此问题。

阅读matlab 文档中的[结构（本教程非常好）](http://yagtom.googlecode.com/svn/trunk/html/dataStructures.html)，然后尝试使用一种来存储所有数据。我认为这将解决这个问题以及您不知道的许多其他问题。

你应该使用类似下面的东西。

```
ET = struct;
ET.A.C(1) = ET1_A_C1;
ET.A.C(2)  = ET1_A_C2;
         ...
ET.A.C(N)  = ET1_A_CN;

ET.H.C(1)  = ET1_H_C1;
ET.H.C(2)  = ET1_H_C2;
          ...
ET.H.C(N)  = ET1_H_CN; 
```

现在每件事都是一个变量，您无需输入任何额外内容即可保存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T05:21:28.507

`filename=Total_data.mat`;

```
for i=1:63
J(i,1)=ET1_A_C{i};
J(i,2)=ET1_H_C{i};
end 
```

`save(filename,'J(1:63,1)','J(1:63,2)')`;

# css - 多行文本框中的文本无法显示

> ID：13577109
> 
> 赞同：-1
> 
> 时间：2012-11-27T03:48:31.667
> 
> 标签：css, google-chrome-extension, textbox

我有一个 Chrome 扩展程序，可以动态更新网页中的两个文本区域，虽然更新后的文本在主题字段中显示良好，但它根本不会出现在消息正文中。

文本框的 CSS 如下：

```
<div id="p-b-0" class="GPW32EMDIBB editable" g_editable="true" contenteditable="true"   
role="textbox" aria-multiline="true" aria-live="polite" aria-label="Compose a message" 
style="" value="Hello, World!" tabindex="1"><br></div> 
```

谁能看到为什么文本值不应该显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T03:56:32.547

该特定文本框实际上不是文本框，而是内容可编辑的 div。我猜你的代码正在寻找一个带有“textarea”标签的对象。

# php - 从包含 php 中其他附加垃圾的字符串中解析 XML

> ID：13577110
> 
> 赞同：2
> 
> 时间：2012-11-27T03:48:48.067
> 
> 标签：php, xml, string, parsing

我正在连接一个支付网关，该网关应该返回一个我应该解析的 XML 字符串。但是，WS 返回的字符串在实际 XML 之前包含一个 HTML 标头。

我已经和那里的技术人员谈过了，他们说他们的系统就是这样工作的，我应该按照自己的方式进行管理。

所以我的问题是：有没有一种简单的方法可以只从字符串中提取 XML 并丢弃其余的？

谢谢！

## 感谢所有的回复！我在下面添加了一个示例。

```
HTTP/1.1 100 Continue

HTTP/1.1 200 OK
Cache-Control: private
Content-Length: 300
Content-Type: text/html; charset=utf-8
X-AspNet-Version: 2.0.50727
Date: Fri, 23 Nov 2012 15:02:17 GMT

<?xml version='1.0' encoding='utf-8' standalone='yes' ?><Inicio><Nrocom>xxxxxx</Nrocom><Nroterm>xxxxxx</Nroterm><Moneda>858</Moneda><Importe>000</Importe><Plan>001</Plan><Tcompra>0</Tcompra><Info></Info><Rsp>2222</Rsp><Idtrn>000000</Idtrn></Inicio>Thread was being aborted.Thread was being aborted. 
```

这整个块是来自该网关的正常响应。忽略“线程被中止。线程被中止”。消息，他们说他们正在努力。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T19:44:15.247

好吧，我有点让它以某种方式工作。

不要将此视为完美的解决方案。我很确定还有很多其他更好的方法可以做到这一点，因为我不得不“学习”正则表达式来获得它。

思路很简单，使用正则表达式获取`<?xml`XML的标签和结束标签。函数 preg_match() 然后返回 $matches 数组中的所有内容。

希望能帮助到你。

```
<?php
$exp = '/<\?xml.*<\/Inicio>/';
preg_match($exp, $string, $matches ,PREG_OFFSET_CAPTURE, 0);
echo $matches[0][0];
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T04:01:19.950

这是一个非常简洁的示例，说明了一种可能性，而您不知道您正在使用的数据。

```
$string = '
<html>
  <head>
    <title>Untitled</title>
  </head>
  <body>
    <xmlroot>
      <item>hello</item>
      <item>world</item>
    </xmlroot>
  </body>
</html>
';

if($xml = new SimpleXMLElement($string) and $item = $xml->xpath('//xmlroot'))
{
  echo $item[0]->asXML();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T04:02:57.280

所以我刚刚看到你的编辑，你想做的就是`<?xml`只找到并解析这个。

```
$beginTag = "<?xml";
$xmlDoc = substr($response, strpos($response, $beginTag));

echo $xmlDoc; 
```

这段代码给出了这个输出：

```
<?xml version='1.0' encoding='utf-8' standalone='yes' ?><Inicio><Nrocom>xxxxxx</Nrocom><Nroterm>xxxxxx</Nroterm><Moneda>858</Moneda><Importe>000</Importe><Plan>001</Plan><Tcompra>0</Tcompra><Info></Info><Rsp>2222</Rsp><Idtrn>000000</Idtrn></Inicio>Thread was being aborted.Thread was being aborted. 
```

显然，这`XML`是无效的，但我想当`Thread was being aborted.`问题得到解决时，您将收到有效的 XML！

# infragistics - XamComboEditor SelectedItemChangedEvent 在 XamDataGrid 中不停地触发

> ID：13577111
> 
> 赞同：0
> 
> 时间：2012-11-27T03:48:50.997
> 
> 标签：infragistics, xamdatagrid, selecteditemchanged

我在 XamDataGrid 的两列中绑定了 XamComboEditor。当我从 XamComboEditor1 中选择一个项目时，我想将特定项目绑定到 XamComboEditor2。我已将 SelectedItemChanged 事件附加到 XamComboEditor1。该事件在选择项目时不间断地触发。

XAML-

```
 <Window x:Class="WpfApplication2.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:sys="clr-namespace:System;assembly=mscorlib"
    xmlns:igDP="http://infragistics.com/DataPresenter"
    xmlns:igRibbon="http://infragistics.com/Ribbon"
    xmlns:igOB="http://infragistics.com/OutlookBar"
    xmlns:igDock="http://infragistics.com/DockManager"
    xmlns:igTiles="http://infragistics.com/Tiles"
    xmlns:igEditors="http://infragistics.com/Editors"
    Title="Window1" Height="300" Width="720">
    <Window.Resources>
    </Window.Resources>

    <Grid>
        <DockPanel LastChildFill="True" Margin="0,26,0,-26">
            <igDP:XamDataGrid x:Name="XamDataGrid1">
            </igDP:XamDataGrid>
        </DockPanel>
    </Grid>
</Window> 
```

代码背后 -

```
 using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using Infragistics.Windows.DataPresenter;
using Infragistics.Windows.Editors;

namespace WpfApplication2
{
  /// <summary>
  /// Interaction logic for MainWindow.xaml
  /// </summary>
  public partial class MainWindow : Window
  {
    public MainWindow()
    {
      InitializeComponent();

      EventManager.RegisterClassHandler(typeof(ValueEditor),
                    ValueEditor.ValueChangedEvent,
                    new RoutedPropertyChangedEventHandler<object>(OnValueChanged));

      ComboBoxItemsProvider provider = new ComboBoxItemsProvider();
      for (int i = 0; i < 6; i++)
        provider.Items.Add(new ComboBoxDataItem(i, "Item " + i.ToString()));

      FieldLayout fieldLayout = new FieldLayout();

      UnboundField fld1 = new UnboundField();
      fld1.Name = "Visibility Setting1";
      Style style1 = new Style(typeof(XamComboEditor));
      style1.Setters.Add(new Setter(XamComboEditor.ItemsProviderProperty, provider));
      style1.Setters.Add(new EventSetter(XamComboEditor.SelectedItemChangedEvent, new RoutedPropertyChangedEventHandler<object>(XamComboEditor1_SelectedItemChanged)));
      fld1.Settings.EditorStyle = style1;
      fld1.Settings.EditorType = typeof(XamComboEditor);

      fieldLayout.Fields.Add(fld1);

      UnboundField fld2 = new UnboundField();
      fld2.Name = "Visibility Setting2";
      Style style2 = new Style(typeof(XamComboEditor));
      fld2.Settings.EditorStyle = style2;
      fld2.Settings.EditorType = typeof(XamComboEditor);
      fieldLayout.Fields.Add(fld2);

      this.XamDataGrid1.FieldLayouts.Add(fieldLayout);
      this.XamDataGrid1.BindToSampleData = true;
    }

    void OnValueChanged(object sender, RoutedPropertyChangedEventArgs<object> e)
    {
      if (sender is XamComboEditor || sender is XamCheckEditor || sender is XamDateTimeEditor)
      {
        (sender as ValueEditor).EndEditMode(true, true);

        if (sender is XamComboEditor)
        {
          XamComboEditor comboEditor = (XamComboEditor)sender;
        }
      }
    }

    private void XamComboEditor1_SelectedItemChanged(object sender, RoutedPropertyChangedEventArgs<object> e)
    {
      // Create combo box items provider for freight modes
      ComboBoxItemsProvider provider = new ComboBoxItemsProvider();
      for (int i = 0; i < 10; ++i)
      {
        provider.Items.Add(new ComboBoxDataItem(i.ToString(), i.ToString()));
      }

      //// Get unbound field associated with index
      Record record = this.XamDataGrid1.ActiveRecord;

      // Get the combo editor with record
      UnboundField uFld = (UnboundField)record.FieldLayout.Fields[1];

      // Set style for uFld
      Style style = new Style(typeof(XamComboEditor));
      style.Setters.Add(new Setter(XamComboEditor.ItemsProviderProperty, provider));
      style.Setters.Add(new Setter(XamComboEditor.DropDownResizeModeProperty, Infragistics.Windows.Controls.PopupResizeMode.None));
      style.Setters.Add(new Setter(XamComboEditor.IsAlwaysInEditModeProperty, false));
      style.Setters.Add(new EventSetter(XamComboEditor.SelectedItemChangedEvent, new RoutedPropertyChangedEventHandler<object>(XamComboEditor2_SelectedItemChanged)));
      style.Setters.Add(new Setter(XamComboEditor.IsEditableProperty, false));
      uFld.Settings.EditorStyle = style;
      uFld.Settings.EditorType = typeof(XamComboEditor);
      uFld.Settings.InvalidValueBehavior = InvalidValueBehavior.RetainValue;
      uFld.Settings.AllowCellVirtualization = false;

      e.Handled = true;
    }

    private void XamComboEditor2_SelectedItemChanged(object sender, RoutedPropertyChangedEventArgs<object> e)
    {
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T05:35:12.577

Shouldn't be referring back to the style in the unbound field.

Found solution at -

[http://blogsprajeesh.blogspot.com/2010/03/infragistics-working-with-2.html](http://blogsprajeesh.blogspot.com/2010/03/infragistics-working-with-2.html)

# c# - 如何将参数传递给 WP7 / WP8 中的本地 html 页面？

> ID：13577114
> 
> 赞同：3
> 
> 时间：2012-11-27T03:49:13.797
> 
> 标签：c#, windows-phone-7, url, webbrowser-control, windows-phone-8

有谁知道如何将 url 参数传递到 Web 浏览器控件中的本地页面？

当您单独导航到该页面时，`"/Html/MyPage.html"`一切都很好，但是一旦您添加了一个参数`"/Html/MyPage.html?Message=Hello"`，我就会收到一个错误页面，指出我们无法导航到该页面。
有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T12:33:25.953

作为一种有效的解决方法，您可以按如下方式实现：

A. 导航到没有任何参数的页面

B. 将下面的参数传递逻辑附加到以下事件之一

[WebBrowser.Navigated 事件](http://msdn.microsoft.com/en-us/library/microsoft.phone.controls.webbrowser.navigated%28v=vs.92%29)- 成功导航时

[WebBrowser.LoadCompleted 事件](http://msdn.microsoft.com/en-us/library/microsoft.phone.controls.webbrowser.loadcompleted%28v=vs.92%29)- 在 WebBrowser 控件加载内容后发生。

[C. 使用webBrowser.InvokeScript (C#)](http://msdn.microsoft.com/en-us/library/system.windows.controls.webbrowser.scriptnotify%28v=vs.95%29.aspx)向 html 页面注入参数

```
webBrowser.InvokeScript("eval", new string[] {"processArgs('someArgs') or any generated/custom script"}); 
```

或者

```
webBrowser.InvokeScript("processArgs", new string[] {"someArgs"}); 
```

其中 processArgs 在您的 html 文件中的某处定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T18:53:33.530

作为另一种解决方法，您可以将参数作为位置哈希参数传递（如果未使用）

```
browser.Navigate(new Uri("www/index.html#p=123&p2=567", UriKind.Relative)); 
```

然后在 index.html

```
var args = window.location.hash; 
```

(args = '#p=123&p2=567')

在 WP7（index.html 存储在隔离存储中）+ WP8（index.html 直接从 XAP 加载）上测试

# css - CSS3 隐藏跨度过渡

> ID：13577117
> 
> 赞同：1
> 
> 时间：2012-11-27T03:49:21.980
> 
> 标签：css, css-transitions

当您将鼠标悬停在图像上时，我试图使隐藏的跨度淡入。我不能让它过渡。

```
.thumb {
margin-top: 10px;
margin-right: -3px;
}

.thumb span {
display: none;
}

.thumb:hover span {
display: block;
position: absolute;
padding: 55px 0 0 0;
text-decoration: none;
text-align: center;
background-color: #ff6600;
opacity: .8;
width: 300px;
height: 95px;
font-size: 17px;
font-family: Candara;
text-shadow: 2px 2px 2px #000;
transition-property: opacity, background-color;
transition-duration: 25s ease-in;
} 
```

我的css有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T03:58:55.003

“.thumb:hover span”它说，您的 span 标签必须是“.thumb”类标签的子标签。但是您不能将“span 放入图像标签”。您可以使用 jquery 或将“.thumb”类放入 span 的父级，以便父级悬停触发您想要的效果。您还可以对 image 和 span 有一个共同的父级。

# android - 如何使用 ImageAdapter 和存储在 xml 中的可绘制数组填充 gridView

> ID：13577125
> 
> 赞同：2
> 
> 时间：2012-11-27T03:50:11.520
> 
> 标签：android, xml, gridview

我正在使用谷歌文档中提供的示例 ImageAdpater 来填充带有可绘制对象的网格视图。我想要做的是在 xml 文件中使用一组可绘制对象填充 gridview。

我用来`TypedArray imgs = getResources().obtainTypedArray(R.array.log_type_icons);`从我的主要活动中访问数组，但这在 ImageAdapter 类中不起作用。

数组：

```
<string-array name="log_type_icons">
    <item>@drawable/ic_launcher</item>
    <item>@drawable/ic_headache</item>
    <item>@drawable/ic_man</item>
    <item>@drawable/ic_woman</item>
    <item>@drawable/ic_kneel</item>
</string-array> 
```

工作图像适配器：

```
public class ImageAdapter extends BaseAdapter {
private Context mContext;

public ImageAdapter(Context c) {
    mContext = c;

}

public int getCount() {
    return mThumbIds.length;
}

public Object getItem(int position) {
    return null;
}

public long getItemId(int position) {
    return 0;
}

// create a new ImageView for each item referenced by the Adapter
public View getView(int position, View convertView, ViewGroup parent) {
    ImageView imageView;
    Log.i("log tag", "gotten resources: " + mThumbIds);
    if (convertView == null) { // if it's not recycled, initialize some
                                // attributes
        imageView = new ImageView(mContext);
        imageView.setLayoutParams(new GridView.LayoutParams(85, 85));
        imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
        imageView.setPadding(8, 8, 8, 8);
    } else {
        imageView = (ImageView) convertView;
    }

    imageView.setImageResource(mThumbIds[position]);
    return imageView;
}

// references to our images
private Integer[] mThumbIds = { R.drawable.ic_headache,
        R.drawable.ic_kneel, R.drawable.ic_man, R.drawable.ic_woman,
        R.drawable.ic_launcher };
} 
```

我知道我可以手动添加对 Integer 数组的可绘制引用，但我也从我的主要活动中引用了 xml 数组，因此能够添加到 xml 而不必更改代码是理想的选择。有没有人对此有任何见解？我做错了什么或遗漏了一些明显的东西吗？

任何帮助将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T02:42:31.603

我最终通过使用 'getResources().obtainTypedArray(R.array.log_type_icons);' 解决了这个问题 在我的主要活动中获取数组，然后将其传递给图像适配器，而不是在适配器中使用“getResources()”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T04:07:44.043

我认为这是与您的问题相似的主题。请检查[这个](http://rajivramachandran.wordpress.com/2012/09/17/android-ui-grid-layout-with-image-and-text/)。

在这里，他们使用了自定义的可绘制数组。您可以尝试使用您的资源可绘制数组来代替它

# php - PHP IMAP 将邮件移动到远程邮箱

> ID：13577126
> 
> 赞同：0
> 
> 时间：2012-11-27T03:50:12.953
> 
> 标签：php, imap

关于 PHP IMAP，

有人可以帮我吗？我想将电子邮件从收件箱移动到另一个远程邮箱。换句话说，我如何将电子邮件从someone@somewhere.com 的收件箱移动到例如nobody@nowhere.com 的INBOX.Unsorted？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T05:09:35.590

我不确定这是否会有所帮助，我快速搜索了您的问题，并且有很多页面可能包含您的答案。

**这里都有：**

*   [http://egil.biz/migrate-e-mail-over-imap-with-php/](http://egil.biz/migrate-e-mail-over-imap-with-php/)
*   [http://edoceo.com/creo/imap-move](http://edoceo.com/creo/imap-move)

我找到了更多链接，但由于我是新用户，我不能发布超过 2 个 =(

我在 Google 上搜索了“php imap 在地址之间移动电子邮件”，您会从那里找到更多链接。

还从 stackoverflow 中找到了这个关于完全相同问题的旧线程：[php - imap - 在另一个帐户上移动电子邮件](https://stackoverflow.com/questions/161775/php-imap-moving-emails-on-antoher-account)

也许你会从那里的好人那里找到更多信息=）

抱歉，我无法给您答案，只能用链接轰炸您，但是，希望您会发现其中一个有用的链接。

# c - Scanf() 在调用另一个函数后增加

> ID：13577129
> 
> 赞同：0
> 
> 时间：2012-11-27T03:50:43.023
> 
> 标签：c, ubuntu, scanf

我想创建几个接口。因此，接口的功能也很少。

我的主要代码如下：

```
int main (void)
{
    int choice;
    scanf("%d", &choice);
    while(choice != 99)
    {
        switch(choice)
        {
            case 1: title1(); break;
            case 2 : title2(); break;
            default : printf("Error");
        }
        scanf("%d", &choice);     <-- edit
    }
return 0;
} 
```

至于其他功能：

```
void title1(void)
{
    int choice;
    scanf("%d", &choice);
    while(choice != 99)
    {
        switch(choice)
        {
            case 1: titleA(); break;
            case 2 : titleB(); break;
            default : printf("Error");
        }
        scanf("%d", &choice);     <-- edit
    }
main();
}
void title2()
{
    int choice;
    scanf("%d", &choice);
    while(choice != 99)
    {
        switch(choice)
        {
            case 1: titleC(); break;
            case 2 : titleD(); break;
            default : printf("Error");
        }
        scanf("%d", &choice);     <-- edit
    }
main();
} 
```

该程序的输入示例是：

```
1   then    99    then    99 
```

但实际情况是：

```
1   then    99    then    99  then   99 
```

这需要额外`99`的退出程序。

如果我这样输入：

```
1   then    99    then    2    then    99 
```

我需要输入 3 次`99`才能退出程序。

有什么问题`scanf`？我该如何解决？

解决了 ：

我`return 0;`将 main() 中的 更改为`exit(0);`，它工作正常，但我不确定这样做是否正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T04:48:54.860

这很简单。您可以使用调试器来查看到底发生了什么。

编辑：重写 title1() 以获得更好的清晰度。

```
void title2()
{
    int choice;
    scanf("%d", &choice);
    while(choice != 99)
    {
        switch(choice)
        {
            case 1: titleC(); break;
            case 2 : titleD(); break;
            default : printf("Error");
        }
        scanf("%d", &choice);    
    }
    main();
    printf("About to return from title1()\n");//EDIT
    return;//EDIT
} 
```

让我们考虑第一个输入集。

```
1   then    99    then    99 
```

在这种情况下，`1`带你进去`title1()`。并`99`带您脱离`while`内部循环`title1()`，再次**调用`main()`函数**。所以你需要再输入一个`99`才能退出函数中的while循环`main()`。脱离控制后`while`，`main()`将返回`title1()`并打印“即将从title1（）返回”，然后控制返回到`main()`操作系统调用的函数。在`main()`函数中，您需要再输入一个`99`才能退出循环并退出程序。

调用堆栈看起来像

```
--------------
    main()
   --------
    title1()
   --------
    main()
-------------- 
```

要退出每个功能，您需要输入一个`99`。

我强烈建议您使用像[GDB](http://www.gnu.org/software/gdb/)这样的调试器来遍历您的程序并弄清楚到底发生了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T04:49:38.770

我认为它可以帮助你.....我试图解释你的代码是如何流动的......

当您启动或执行您的程序时，它首先按照定义进入 main() 函数->

```
int main (void)
{
    int choice;
    scanf("%d", &choice);
    while(choice != 99)
    {
        switch(choice)
        {
            case 1: title1(); break;
            case 2 : title2(); break;
            default : printf("Error");
        }
        scanf("%d", &choice);     <-- edit
    }
return 0;
} 
```

所以你需要为选择输入数据&你输入它为1所以while(choice!=99)变为true&它切换到title1()**但主要的事情发生在这里....当你输入title()你有定义了另一个 int 选项，它是这个函数的本地变量，所以你再次输入值 99 并且它存储在这个变量中，因为它是本地的。现在它的 while(choice != 99) 变为 false 所以现在它再次调用 main() 并在此调用中再次 main 声明 int 选择也需要再次输入值所以你再次输入 99 然后它的 while(choice != 99)变为假，然后它调用 return 0; & 程序退出。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T03:57:05.593

您`scanf()`的 s 在您使用值的 while 循环之外 - (`choice`未更新)。你所有的方法调用`main()`- 什么？

你可能想要一些更独立的东西，比如：

```
void title1(void)
{
    int choice=0;
    while(choice != 99)
    {
        scanf("%d", &choice);
        switch(choice)
        {
            case 1: titleA(); break;
            case 2: titleB(); break;
            default: printf("Error"); 
                     break
        }
    }
} 
```

# php - 在 PHP 中一键提交多个表单

> ID：13577132
> 
> 赞同：2
> 
> 时间：2012-11-27T03:51:09.197
> 
> 标签：php, forms, post

我有一些动态添加的文本框以及一些静态文本框。我遇到的问题是当我从一个动态表单中删除一个项目时，除非我用表单标签包裹它，否则它只会从列表中删除最后一个项目。但是，当我将其包装在表单标签中时，静态文本框将不会发布。基本上我只是想知道如果我想提交文本框如何正确使用标签。

例如，

```
<form method="post">
<textbox 1>
<textbox 2>
<textbox 3>

<?
 $tasks->task_form();

?>
 <another textbox> //these text boxes don't POST when the dynamic forms have tags wrapped around them
 <another textbox>
<?    
 $users->dynamic_form_2();
?>

</form> 
```

例如，这是 task_form

```
function task_form(){

//textbox and submit to add tasks here (omitted to keep shorter)

foreach (array_combine($task, $task_num) as $task => $task_num){
            ?>
            <form method="post">
            <tr><td><? echo $task; ?></td><td><? echo $task_num; ?></td>
            <td><input type="submit" name="remove_task" value="Remove"/></td>
            <td><input type="hidden" name="task_name" value="<? echo $task; ?>"/>
            <td><input type="hidden" name="task_num" value="<? echo $task_num; ?>"/></td></tr>
            </form>
            <?
        }

} 
```

如果我没有在动态表单周围放置表单标签，那么无论我尝试删除哪个表单，都会删除该表单中的最后一项。但是，使用表单标签，某些文本框中的值根本不会发布。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T03:56:22.483

这可能不是最干净的解决方案，但是您可以使用[jQuery](http://jquery.com/)之类的工具包并单击其中一个提交按钮，只需`ajax`并行发送每个表单的查询，当一切完成后，重定向到另一个页面。

我仍然**强烈**建议您查看您的表格，它可能应该是一个单一的表格！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T03:53:28.823

不，您不能使用纯 HTML/PHP 提交多个表单。

你必须

*   重新编写表单以同时提交所有表单（这通常听起来比实际更难）或
*   重新设计您的服务器逻辑以检查刚刚提交的几个表单中的哪一个（可能使用`isset($_POST['whatever'])`）。

AJAX 解决方案可以工作，但也有其优点和缺点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T04:08:52.657

只需从循环中删除标签：

```
foreach (array_combine($task, $task_num) as $task => $task_num){
            ?>
            <tr><td><? echo $task; ?></td><td><? echo $task_num; ?></td>
            <td><input type="submit" name="remove_task" value="Remove"/></td>
            <td><input type="hidden" name="task_name" value="<? echo $task; ?>"/>
            <td><input type="hidden" name="task_num" value="<? echo $task_num; ?>"/></td></tr>
            <?
        } 
```

正如其他解释，您不能嵌套表单。无论如何，您的字段属于同一个表单，因此您可以简单地添加您需要的字段。

就个人而言，我已经转向 JQuery 来处理表单的提交，因为它为用户提供了更好的体验（你可以立即给他反馈而不是循环到服务器），而且它也很解放，因为你真的不需要表单标签甚至输入（如果你愿意，你可以使用可写的 div）。

# r - 如何从 R 中大小为 N 的数据帧中获取大小为 n 的所有可能子样本？

> ID：13577134
> 
> 赞同：3
> 
> 时间：2012-11-27T03:51:18.353
> 
> 标签：r, vector, dataframe, sample

我有一个数据框，其中包含 20 个教室 [1 到 20] 索引和每个班级 20 个不同数量的学生，如何获取所有大小为 n = 8 的子样本并存储它们，因为我想稍后将它们用于计算。我使用过`combn()`，但只需要一个向量，我可以将它与数据框一起使用吗？如何使用？（抱歉，我是 R 新手），数据框如下：

> ```
>  classrooms students
> 1           1       29
> 2           2       30
> 3           3       35
> 4           4       28
> 5           5       32
> 6           6       20
> 7           7       25
> 8           8       22
> 9           9       32
> 10         10       26
> 11         11       27
> 12         12       34
> 13         13       27
> 14         14       28
> 15         15       33
> 16         16       21
> 17         17       36
> 18         18       24
> 19         19       19
> 20         20       32 
> ```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T03:55:12.790

就像将函数传递给`combn`. `simplify = FALSE`表示将返回一个列表。

假设您想要数据集教室中 8 个教室的所有可能组合

```
 combinations <- combn(nrow(classrooms), 8, function(x,data) data[x,], 
                  simplify = FALSE, data =classrooms )

 head(combinations, n = 2)

[[1]]
  classrooms students
1          1       29
2          2       30
3          3       35
4          4       28
5          5       32
6          6       20
7          7       25
8          8       22

[[2]]
  classrooms students
1          1       29
2          2       30
3          3       35
4          4       28
5          5       32
6          6       20
7          7       25
9          9       32 
```

# java - 从 Spring Security 迁移到 Oracle Access Manager

> ID：13577139
> 
> 赞同：2
> 
> 时间：2012-11-27T03:51:48.463
> 
> 标签：java, oracle, spring-security, single-sign-on

我目前有一个使用 Spring Framework 进行身份验证和授权的 Web 应用程序。我有一个客户群希望实施 Oracle Access Manager 以进行身份​​验证和授权。有没有人知道在下面给出我当前的 Web 应用程序设置时，这种迁移会有多复杂？

**当前的网络应用程序：**

*   使用基于 Spring 的自定义过滤器进行单点登录身份验证
*   使用基于 Spring 表单的安全性
*   Web 应用程序当前使用 MySQL 并实现 Spring org.springframework.security.core.userdetails.UserDetailsS​​ervice 来针对具有用户名和加密密码的 MySQL 表对用户进行身份验证
*   UI 是用 JSF/Facelets 编写的，并使用 Hibernate JPA 实现对 MySQL 的所有 CRUD 操作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T09:28:13.850

我做过一次反向迁移，从 Sun Access Manager 到普通的 Spring Security。

从我在遗留 AM 访问代码中看到的内容来看，您的问题可以通过单个自定义 Spring Security 过滤器来解决，该过滤器使用[此 API](http://docs.oracle.com/cd/E19681-01/820-3739/com/sun/identity/idm/package-summary.html)访问 AM 进行身份验证和授权（链接可能已过时）。因此，客户将能够在 Access Manager 中管理用户和角色，而无需对应用程序本身进行架构更改。

AM 访问片段（未测试）：

```
SSOToken adminToken = (SSOToken) AccessController.doPrivileged(AdminTokenAction.getInstance());
AMIdentityRepository repo = new AMIdentityRepository(adminToken, "realm_name");
IdSearchResults res = rep.searchIdentities(IdType.USER, uid, new IdSearchControl()); 
```

我自己从来没有做过这样的整合，所以也许存在更合适的方法。

# maven - 如何使用 maven 将二进制 ejb-jar（无源项目）文件包含到 ear 文件中？

> ID：13577142
> 
> 赞同：1
> 
> 时间：2012-11-27T03:52:27.877
> 
> 标签：maven

我有一个由另一个团队作为二进制 jar 交付的 ejb-jar，即 ejb-jar 仅包含 ejb 类文件（无源代码）。我需要将该 ejb-jar 作为 ejb 模块包含到我的 ear 文件中。我的 ear 文件有许多其他 ejb/war 模块。使用 maven 将此第三方 ejb-jar 模块配置到耳朵中的最佳方法是什么？

谢谢，铅

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T15:05:47.170

嗨，我只想说：

```
<plugin>
    <artifactId>maven-ear-plugin</artifactId>
    <version>2.8</version>
    <configuration>
      <modules>
        <ejbModule>
           <...>
        </ejbModule>
      </modules>
    </configuration>
  </plugin> 
```

并且不要忘记将 ejb-jar 定义为 ear 项目的通常依赖项......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T15:17:29.980

要在本地测试，请使用 mvn install:install-file -Dfile=your.artifact.jar -DgroupId=your.org -DartifactId=your-artifact.jar -Dversion=1.0 -Dpackaging=ejb -DgeneratePom=true。

一旦它在您的存储库中，您就可以像使用任何 ejb 依赖项一样使用它（如 @khmarbaise 所示）。

如果您使用的是 Nexus 或其他工件存储库，请改为部署在那里。

# shell - Shell 脚本 - 使用 diff 命令

> ID：13577143
> 
> 赞同：0
> 
> 时间：2012-11-27T03:52:55.453
> 
> 标签：shell, scripting, command, diff

这似乎无法正常工作。
$4 是一个 C 文件。$in 是输入文件。$5 是一个新创建的输出文件，在 $in 输入到 $4 之后（我不太确定这个。）

$out 是我在运行脚本之前创建的输出。

之后，我将比较 $5 和 $out 以查看它们是否相等。

我只是想知道 ; 意思是。

```
 $4 < $in > $5
    if  diff $5 $out  >/dev/null 2>&1 ;  
    then
       echo "same!"
    else
       echo "different!"
    fi 
```

（这是在伯恩壳牌）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T04:04:04.707

分号是多余的，但标志着`diff`命令的结束。它可能后面跟着另一个命令，但不是。

*[基于对“C 文件”的误解，我删除了一些评论。在这种情况下，它意味着“用 C 编写的程序”而不是 C 源文件。]*

# c - 指向整数的指针

> ID：13577145
> 
> 赞同：0
> 
> 时间：2012-11-27T03:53:12.973
> 
> 标签：c, pointers

我正在使用指向 intger 的指针作为 2 Dims 数组，我编写了这些代码，但我未能获得整数值。

```
#include<stdio.h>
#include<conio.h>

void main(void)
{
    int **pptr = 0, size = 0, size2 = 0, i, j;

    clrscr();
    printf("Enter Size of Main Store n");
    scanf("%d", &size);

    pptr = (int **) malloc(size * sizeof(int *));

    printf("Enter Size of Sub Store n");
    scanf("%d", &size2);

    for (i = 0; i < size; i++) {
        pptr[i] = (int *) malloc(size2 * sizeof(int));
    }

    printf("Enter Values n");

    for (i = 0; i < size; i++) {
        for (j = 0; j < size2; j++) {
            scanf("%dn", pptr[i][j]);
        }
    }

    clrscr();
    printf(" Valuesn");

    for (i = 0; i < size2; i++, pptr++) {
        printf("%dn", *pptr + i);
    }

    getch();
} 
```

它打印垃圾！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T03:57:43.363

`scanf("%d", arg)`需要一个指向 的指针`int`，但是

```
for (i = 0; i < size; i++) {
    for (j = 0; j < size2; j++) {
        scanf("%dn", pptr[i][j]);
    }
} 
```

你把它传递给一个`int`，一个未初始化`int`的。然后将该内存位置中的不确定值解释为指针，并且扫描尝试存储转换后的值谁知道在哪里。这不太可能导致分段错误。

`&pptr[i][j]`你应该在那里作为参数传递。

```
for (i = 0; i < size2; i++, pptr++) {
    printf("%dn", *pptr + i);
} 
```

使用需要参数的格式打印`int*` `*pptr +i`，即。`&pptr[0][i]``%d``int`

你应该

```
printf("%d\n", pptr[0][i]); 
```

如果你想打印对角线的值（似乎是这样，因为你也在`pptr`循环中增加），或者，更好

```
for(i = 0; i < size && i < size2; ++i) {
    printf("%d\n", pptr[i][i]);
} 
```

或者，如果您想打印整个网格，

```
for(i = 0; i < size; ++i) {
    for(j = 0; j < size2; ++j) {
        printf("%d ", pptr[i][j]);
    }
    printf("\n");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T04:03:24.377

scanf 需要 a `int *`，而不是`int`. 所以...

```
scanf("%dn", pptr[i][j]); 
```

应该：

```
scanf("%dn", &(pptr[i][j])); 
```

或者它可能是：

```
scanf("%dn", (pptr[i]+j)); 
```

此外，printf 需要一个值 ( `int`)，而不是指针。所以...

```
printf("%dn", *pptr + i); 
```

应该是这样的：

```
printf("%dn", *(*pptr+i)); 
```

或者更好看的等价物：

```
printf("%dn", pptr[0][i]); 
```

# php - 如何安全地加密密码

> ID：13577150
> 
> 赞同：2
> 
> 时间：2012-11-27T03:53:48.230
> 
> 标签：php, codeigniter

首先，我想重申一下，我不是在问如何对密码进行哈希处理（例如 salting / bcrypt / 等）。对于我完成的每个其他项目，我总是对密码进行散列/加盐处理，但在这种情况下，我需要暂时重新获得密码。

基本上，我需要在我的数据库中存储一个密码，然后再次访问它。在 codeigniter（我正在使用的框架）中，他们使用 mcrypt 以及一个密钥（他们建议应该是 32 个字符长）。这样就够了吗？

**编辑**：

问的原因：我需要能够向用户发送关键任务敏感 PDF 并希望对他们进行密码保护（最好使用相同的密码）。

在与 SO 和关闭的人讨论之后，我得出的结论是，您永远不应该加密密码并始终对其进行散列/加盐。想想有多少人为不同的服务使用相同的密码/电子邮件。因此，我得出的结论是，如果您确实需要加密某个项目，则应该使用单独的 PIN 或其他非必要项目。

然而，即使我打算走 pin 路线并保持密码散列，我仍然很好奇你在*理论上*将如何解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T03:59:30.520

是的，只要您对 SALT 值保密。

**更新：**似乎人们对简单的答案不满意。通过使用`mcrypt`扩展，您可以使用特定的秘密值加密您的数据`SALT`。如果人们不知道 SALT，就无法解密该值。

例子：

```
<?php 
    define('SALT', 'whateveryouwant'); 

    function encrypt($text) 
    { 
        return trim(base64_encode(mcrypt_encrypt(MCRYPT_RIJNDAEL_256, SALT, $text, MCRYPT_MODE_ECB, mcrypt_create_iv(mcrypt_get_iv_size(MCRYPT_RIJNDAEL_256, MCRYPT_MODE_ECB), MCRYPT_RAND)))); 
    } 

    function decrypt($text) 
    { 
        return trim(mcrypt_decrypt(MCRYPT_RIJNDAEL_256, SALT, base64_decode($text), MCRYPT_MODE_ECB, mcrypt_create_iv(mcrypt_get_iv_size(MCRYPT_RIJNDAEL_256, MCRYPT_MODE_ECB), MCRYPT_RAND))); 
    } 
?> 
```

当然，如果您想要额外的安全性，请考虑使用公钥基础设施。

# gcc - 在具有拆分堆栈的多线程应用程序上使用 setrlimit() 增加堆栈空间

> ID：13577151
> 
> 赞同：0
> 
> 时间：2012-11-27T03:53:50.053
> 
> 标签：gcc, dynamic, stack, stack-overflow, setrlimit

我正在考虑开发自己的工作窃取调度程序，需要解决的问题之一是堆栈溢出的可能性。这些仅发生在少数情况下，即一名工人不断从其他工人那里窃取任务，例如：

```
steal();
work();
steal();
work();
steal();
... 
```

可以使用多种技术来避免这种模式，但是简单地增加堆栈空间可能是最好的选择，因为它允许进行其他优化。在单线程应用程序上，这可以通过调用来完成，`setrlimit()`但对于多个线程，它没有效果（除非从主线程调用）。

此行为可能与跨多个线程具有固定大小的堆栈有关。但是，对于拆分堆栈（在 GCC 4.6.0+ 上实现），此限制不再适用。

我的问题是调用是否仅适用于拆分堆栈，或者`setrlimit()`在否定情况下是否可以调用底层`brk()`//并手动执行。`mmap()``sbrk()`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T14:56:13.353

以一种骇人听闻的方式，我想我可以`pthread_attr_setstacksize()/pthread_create()/pthread_join()`用来创建一个新线程并完成其中的所有工作，但是这是线程创建/调度的不必要开销。

# eclipse-plugin - Eclipse C/C++ 编译器 Visual Studio C++

> ID：13577152
> 
> 赞同：1
> 
> 时间：2012-11-27T03:53:53.173
> 
> 标签：eclipse-plugin, eclipse-cdt

我刚刚为 eclipse 安装了 cdt 插件并尝试创建一个新项目。在工具链上，它显示的是 Microsoft Visual C++ 而不是 MinGW。在编写 #include 时，它​​显示未解决的包含：

我现在该怎么办？我现在怎样才能拥有 MinGW？请帮帮我。

# orbeon - 在 Orbeon/XForms 中修改绑定资源后如何刷新控件绑定？

> ID：13577153
> 
> 赞同：0
> 
> 时间：2012-11-27T03:54:02.333
> 
> 标签：orbeon, xforms

以下是我的表单的实例模型：

```
<xforms:model id="fr-form-model">

    <!-- Main instance -->
    <xforms:instance id="fr-form-instance">
        <form>
            <section-1> <age>20</age> <first-name>Tseveen</first-name>
            </section-1>
        </form>
    </xforms:instance>

    <!-- Bindings -->
    <xforms:bind id="fr-form-binds" nodeset="instance('fr-form-instance')">
        <xforms:bind id="section-1-bind" nodeset="section-1">
            <xforms:bind id="age-bind" name="age" nodeset="age" />
            <xforms:bind id="first-name-bind" nodeset="first-name"
                name="first-name" />
        </xforms:bind>
    </xforms:bind>

    <!-- All form resources -->
    <!-- Don't make readonly by default in case a service modifies the resources -->
    <xforms:instance id="fr-form-resources" xxforms:readonly="false">
        <resources> <resource xml:lang="en"> <section-1>
        <age> <label>Age</label> <hint>Years since borning</hint> <help>Substract birth date from current date</help>
        <alert>Age is required!</alert> </age> <first-name> <label>First
            name</label> <hint>Enter first name</hint> <help>a.k.a given name</help> <alert>First
        name is required!</alert> </first-name> </section-1> </resource> </resources>
    </xforms:instance> 
```

如您所见，控件绑定到 fr-form-resources 中的资源。

我有一个动作：

```
<xforms:setvalue
            ref="xxforms:instance('fr-form-resources')/resources/resource/section-1/age/label"
            value="'Doljin'" /> 
```

这个想法是改变控件的标签文本。

在 Orbeon/XForms 中修改绑定资源后如何刷新控件绑定，以便更新可视标签文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T07:27:28.397

这应该会自动发生，您无需执行任何操作。如果您的情况没有发生这种情况，可能是因为您没有修改正确的节点，或者控件未绑定到正确的节点。如果您认为您正在更改正确的节点，请提供一个显示问题的最小示例。

# .net - 命名空间名称 Infrastructure 不存在于命名空间 system.data.entity

> ID：13577157
> 
> 赞同：6
> 
> 时间：2012-11-27T03:54:35.367
> 
> 标签：.net

在 system.data.entity 命名空间中使用基础架构命名空间时收到错误消息

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-07T13:12:34.253

您还需要对 EntityFramework 的引用，否则您将得到相同的错误。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-27T03:57:23.253

您需要添加对 .NET 程序集的引用`System.Data.Entity.dll`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-05-14T22:15:04.710

我有一个类似的问题。我提到了，`System.Data.Entity`但它在抱怨`System.Data.Entity.Infrastructure`. 解决方案是添加[EntityFramework nuget](https://www.nuget.org/packages/EntityFramework)。安装后，它实际上会删除原始`System.Data.Entity`引用并指向一个新的 DLL，其中包含`System.Data.Entity`和`System.Data.Entity.Infrastructure`.

# c++ - imread 的像素类型

> ID：13577164
> 
> 赞同：5
> 
> 时间：2012-11-27T03:55:30.553
> 
> 标签：c++, opencv

imread create 的默认像素类型是什么？我测试了不同的图像，它们都给了我不同通道的 unsigned char。如果我不明确询问， imread 会创建一个带有签名字符的像素类型吗？

```
cv::Mat img = cv::imread("lena.jpg", -1); //always give me unsigned char 
```

我检查了 cv::imread 的文档，但它没有说明 imread create 的默认像素。

文档链接 [http://docs.opencv.org/modules/highgui/doc/reading_and_writing_images_and_video.html#Mat](http://docs.opencv.org/modules/highgui/doc/reading_and_writing_images_and_video.html#Mat) imread(const string& filename, int flags)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-27T05:38:28.873

大多数`.jpg`图像是 8 位图像。因此，它们的默认数据类型是`unsigned char`or `char`。

有些图像喜欢`.png`或者`.tif`也支持 16 位像素值，所以它们的数据类型是`unsigned short`. 但这不是必需的，因为它们可能是 8 位的。

要在 OpenCV 中按原样加载图像，请像这样使用 imread：

```
cv::Mat img = cv::imread(imagePath, CV_LOAD_IMAGE_ANYCOLOR | CV_LOAD_IMAGE_ANYDEPTH); 
```

这些标志有不同的组合：

**加载为 8 位（无论原始深度是多少）：**

`CV_LOAD_IMAGE_COLOR`

**以原始深度加载：**

`CV_LOAD_IMAGE_COLOR | CV_LOAD_IMAGE_ANYDEPTH`

**加载为灰度（无论图像有多少通道）：**

`CV_LOAD_IMAGE_GRAYSCALE`

**加载为具有原始深度的灰度：**

`CV_LOAD_IMAGE_GRAYSCALE| CV_LOAD_IMAGE_ANYDEPTH`

在您的情况下，`lena.jpg`是 8 位图像，因此您正在获取`unsigned char`数据类型。

## 更新：

对于较新版本的 OpenCV，请使用 C++ 接口中 enum 定义的标志。只需替换`CV_LOAD_IMAGE_*`为`cv::IMREAD_*`.

例如`CV_LOAD_IMAGE_GRAYSCALE`变成`cv::IMREAD_GRAYSCALE`.

# html - HTML模板设计视图错误

> ID：13577168
> 
> 赞同：0
> 
> 时间：2012-11-27T03:55:57.303
> 
> 标签：html, css

[https://stackoverflow.com/questions/13568693/collapsed-wesite-template-when-i-mininize-the-browser](https://stackoverflow.com/questions/13568693/collapsed-wesite-template-when-i-mininize-the-browser)。对不起我之前的无意义的问题。

我有一个 100% 宽度的 HTML 网站模板。该网页在完整的浏览器窗口中正确显示。但是我改变浏览器窗口的大小意味着整个设计都崩溃了。我认为故障在于 css html 和 body 标签。任何人都可以解决此错误。

```
<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8"/>
    <title>title</title>

    <link rel="stylesheet" href="css/layout.css" type="text/css" media="screen" />

</head>

<body>

    <header id="header">
        <hgroup>
            <h1 class="site_title"><a href="index.html">Admin</a></h1>
            <h2 class="section_title">Dashboard</h2><div class="btn_view_site"><a href="">View </a></div>
        </hgroup>
    </header> <!-- end of header bar -->

    <section id="secondary_bar">
        <div class="user">
            <p>John Doe (<a href="#">3 Messages</a>)</p>
            <!-- <a class="logout_user" href="#" title="Logout">Logout</a> -->
        </div>
        <div class="breadcrumbs_container">
            <article class="breadcrumbs"><a href="index.html">Admin</a> <div class="breadcrumb_divider"></div> <a class="current"></a></article>
        </div>
    </section><!-- end of secondary bar --> 
```

CSS：

```
html, div, map, dt, isindex, form, header, aside, section, section, article, footer {  
    display: block;  
} 

html, body {
height: 100%;
margin: 0;
padding: 0;
font-family: "Helvetica Neue", Helvetica, Arial, Verdana, sans-serif;
background: #F8F8F8;
font-size: 12px;
}

.clear {
clear: both;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T04:42:32.713

我仍然不确定你想要什么。但是，如果您不希望页面的宽度调整大小，那么您需要使用不会随窗口宽度变化的大小单位，例如 px 或 em，例如：

```
width: 1000px; 
```

# c - 谁能解释为什么'>>2'移位在C代码中意味着'除以4'？

> ID：13577174
> 
> 赞同：12
> 
> 时间：2012-11-27T03:56:49.420
> 
> 标签：c, shift, divide

我知道并理解结果。

例如：

```
<br>
 7 (decimal) = 00000111 (binary) <br>

and 7 >> 2 = 00000001 (binary) <br>
00000001 (binary) is same as 7 / 4 = 1 <br>
So 7 >> 2 = 7 / 4 <br>
<br> 
```

但我想知道这个逻辑是如何创建的。
谁能详细说明这个逻辑？
（也许它只是突然出现在天才的脑海中？）

还有其他类似的逻辑吗？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-11-27T04:01:30.247

它并没有在天才的脑海中“弹出”。右移二进制数会将一个数除以 2，左移数会将其乘以 2。这是因为`10`2 在二进制中。将一个数字乘以`10`（无论是二进制、十进制还是十六进制）都会将 a 附加`0`到数字（实际上是左移）。类似地，除以`10`（或 2）会从数字中删除一个二进制数字（实际上是右移）。这就是逻辑的真正运作方式。

在计算机世界中有很多这样的`bit-twiddlery`（我在一分钟前发明的一个词）。

[http://graphics.stanford.edu/~seander/bithacks.html](http://graphics.stanford.edu/~seander/bithacks.html)这是初学者。

这是我最喜欢的书：[http](https://rads.stackoverflow.com/amzn/click/com/0321842685) : //www.amazon.com/Hackers-Delight-Edition-Henry-Warren/dp/0321842685/ref=dp_ob_image_bk on bit-twiddlery。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-27T04:15:53.070

它实际上在 C 标准中是这样定义的。

从第 6.5.7 节开始：

> E1 >> E2 的结果是 E1 右移 E2 位位置。^([...] 结果的值是 E1 / 2 E2)商的整数部分

在大多数架构上，`x >> 2`仅等于`x / 4`非负数。对于负数，它通常舍入相反的方向。

编译器总是能够优化`x / 4`成`x >> 2`. 这种技术被称为“强度降低”，即使是最古老的编译器也可以做到这一点。`x / 4`所以写as没有任何好处`x >> 2`。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-06-21T13:14:15.613

我认为您对以下内容感到困惑`"2"`：

```
7 >> 2 
```

并认为它应该除以 2。

这里的`"2"`意思是将数字（`"7"`在这种情况下）`"2"`位位置向右移动。

将数字`"1"`位位置向右移动将产生除以 2 的效果：

```
8 >> 1 = 4    // In binary: (00001000) >> 1 = (00000100) 
```

并且将数字`"2"`位位置向右移动将具有除以 4 的效果：

```
8 >> 2 = 2    // In binary: (00001000) >> 2 = (00000010) 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-12-06T13:17:38.487

详细阐述[Aniket Inge 的](https://stackoverflow.com/a/13577210/2365197)回答：

号码：307 [10] = 100110011 [2]

**乘以 10 如何在十进制系统中工作**

10 * (307 [10] )

= 10 * (3*10 ² + 7*10 ⁰ )

= 3*10 ^(2+1) + 7*10 ^(0+1)

= 3*10 ³ + 7*10 ¹

= 3070 [10]

= 307 [10] << 1

**同样在二进制中乘以 2**，

2 * (100110011 [2] )

= 2 * (1*2 ⁸ + 1*2 ⁵ + 1*2 ⁴ + 1*2 ¹ 1*2 ⁰ )

= 1*2 ^(8+1) + 1*2 ^(5+1) + 1*2 ^(4+1) + 1*2 ^(1+1) 1*2 ^(0+1)

= 1*2 ⁹ + 1*2 ⁶ + 1*2 ⁵ + 1*2 ² + 1*2 ¹

= 1001100110 [2]

= 100110011 [2] << 1

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-11-27T03:59:22.283

它在计算机中使用的二进制数字系统中固有。

类似的逻辑是---左移'n'次意味着乘以2 ^ n。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-09-16T16:59:29.053

一个简单的方法来了解它为什么起作用，就是看一下熟悉的十进制数字系统，050 是 50，将它向右移动，它变成 005，5，相当于将它除以 10。与移位相同的事情左边，050变成500，五百，相当于乘以10。

所有其他数字系统都以相同的方式工作。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-11-27T04:01:03.177

他们这样做是因为转移比实际划分更有效。您只是将所有数字向右或向左移动，逻辑上每班乘/除以 2

如果您想知道为什么 7/4 = 1，那是因为结果的其余部分 (3/4) 被截断，因此它是一个整数。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-09-05T17:35:55.057

只是我的两分钱：我没有看到任何提及右移并不总是产生与除以 2 相同的结果这一事实。由于右移向负无穷大和整数除法四舍五入为零，因此某些值（如 -1 in二进制补码）在除法时将无法按预期工作。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-10-30T10:39:33.700

这是因为`>>`和`<<`运算符正在移动二进制数据。

```
Binary value 1000 is the double  of binary value 0100
Binary value 0010 is the quarter of binary value 1000 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-11-27T04:32:47.820

您可以将其称为天才头脑的想法，或者只是对计算机语言的需求。

在我看来，作为设备的计算机永远不会对数字进行除法或乘法运算，而只是具有将位相加或简单地从这里移到那里的逻辑。您可以通过告诉您的计算机将它们相乘、相减来使算法起作用，但是当逻辑达到实际处理时，您的结果将是位移位的结果或只是位相加的结果。

您可以简单地认为，为了得到一个数字除以 4 的结果，计算机实际上将这些位右移到两个位置，并给出结果：

```
7 in 8-bit binary = 00000111
Shift Right 2 places = 00000001 // (Which is for sure equal to Decimal 1)

Further examples:
//-- We can divide 9 by four by Right Shifting 2 places
9 in 8-bit binary = 00001001
Shift right 2 places: 00000010 // (Which is equal to 9/4 or Decimal 2) 
```

对汇编语言编程有深入了解的人可以用更多的例子来解释它。如果你想知道这一切背后的实际意义，我想你需要学习计算机的位级算术和汇编语言。

# ruby - 在 Ruby 中返回迭代器或不透明集合

> ID：13577175
> 
> 赞同：2
> 
> 时间：2012-11-27T03:56:58.463
> 
> 标签：ruby, collections, iterator

我经常遇到一个包含集合的类的情况。我希望外部代码能够迭代这个集合，但不能修改它。

我最终写了这样的东西：

```
def iter
  @internal_collection.each do |o|
     yield o
  end
end 
```

这允许外部代码执行以下操作：

```
object.iter do |o|
    do_something(o)
end 
```

必须有一种更优雅的方式来编写“iter”方法。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T05:56:31.343

在优雅之前，我会确保我返回一个`Enumerator`if 没有给出块。

这样你的用户就可以做到`object.iter.with_index do |obj, i|`

一个简单的方法是缩短你的代码是：

```
def iter(&block)
  @internal_collection.each(&block)
end 
```

在其他情况下，您可能只想返回一个副本...

```
def collection
  @internal_collection.dup
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T06:22:35.160

就显式编写方法而言，这很简单。但我认为你所追求的是 Forwardable 模块。您的代码如下所示：

```
require 'forwardable'

class YourClass
  extend Forwardable
  def_delegator :@internal_collection, :each, :iter
end 
```

或者，如果您愿意，您可以将整个 Enumerable 协议委托给您的内部集合，并获得您的内部集合所具有的所有标准 Enumerable 行为：

```
class YourClass
  extend Forwardable
  def_delegators :@internal_collection, *Enumerable.instance_methods
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T06:34:27.027

我会在您的内部收藏中使用`dup`和，然后将其公开：`freeze`

```
def collection
  @internal_collection.dup.freeze
end

collection.map!(&:to_s) #=> raise RuntimeError: can't modify frozen Array 
```

# java - Java 中类引用的行为

> ID：13577178
> 
> 赞同：0
> 
> 时间：2012-11-27T03:57:11.950
> 
> 标签：java, class, object, reference

据我所知，Java 中的类对象实际上是对这些对象的引用。对象本身不能有变量，只能有对它的引用。

考虑以下 C++ 示例：

```
SomeClass A(5);
SomeClass &B = A;
SomeClass &C = B; 
```

现在，我认为我说的对，以下所有三个语句都将使用完全相同的对象：

```
A.someMethod(); //some object
B.someMethod(); //the same object
C.someMethod(); //the same object 
```

然而，在 Java 中，虽然对象实际上是引用，但使用赋值运算符将创建一个全新的对象，并为其提供新的引用。

```
SomeClass A = new SomeClass();
SomeClass B;
B = A; 
```

现在，方法调用将从完全不同的对象调用：

```
A.someMethod(); //uses one object
B.someMethod(); //uses entirely different object 
```

请告诉我我是对还是错。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T04:03:16.417

Java 引用与 C++ 引用非常相似。将一个引用分配给另一个引用*不会*创建新对象。在 Java 中，只有在显式使用运算符时才会创建新对象`new`。

**附录：**

为了完整起见，我应该提到 String 对象遵循自己的规则。特别是，String 常量在编译时创建一个对象，而无需显式使用`new`. 此外，自动（取消）装箱是一个更高级的主题，其中创建对象时无需显式使用`new`. 但是，这两种情况的要点仍然存在：将一个引用分配给另一个引用*不会*创建新对象。两个引用都指向同一个对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T04:21:58.783

引用不同于对象。一个特定的对象可以有多个指向它的引用。在编译时调用类的方法时，总是检查类引用是否包含在其类中定义的方法。如果不是，则会发出编译时错误。如果该方法在给定类的子类中被覆盖，则在运行时调用被覆盖的方法。在编译时总是`<class-ref>.method()`检查'class-ref'以查看它是否包含方法定义。其他修饰符，如 static、final、abstract、方法可见性也在编译时检查，如果使用了错误的方法修饰符组合，则会发出编译时错误。

```
 SomeClass A = new SomeClass();
    SomeClass B;
    B = A;        // Same class, same object, different reference

A.someMethod(); //uses one object
B.someMethod(); //uses the same object 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-27T04:37:09.617

兄弟实际上，当您对对象（A = B）进行相同的引用时，java似乎正在创建完全不同的新对象。但实际上，java 会为您在示例中所做的另一个引用提供对象的副本，A 和 B 指的是同一个对象，但它们有自己的 SomeClass 类型对象的副本。与 C 语言的按值调用相同。您可以使用和修改该对象，但对该对象进行的修改不会影响原始副本或其他副本，这意味着如果您使用引用 B 修改 SomeClass 对象，它将不会影响引用 B 的对象，尽管两者都引用相同的对象，但它们有自己的副本。

# git - git远程服务器移动，如何更新工作副本配置？

> ID：13577181
> 
> 赞同：2
> 
> 时间：2012-11-27T03:57:33.103
> 
> 标签：git, git-remote

这是我目前的设置

```
 FDMBA:EnglishStudy willentriken$ git remote -v
 origin root@devel.phor.net:~/repos/echo.git (fetch)
 origin root@devel.phor.net:~/repos/echo.git (push) 
```

但是我们将服务器的主机名从 devel.phor.net 更改为其他名称。我可以“重新指向”我的本地 git 存储库以指向这个新的服务器地址，而不会丢失我拥有的任何本地提交等吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T04:06:12.717

是的，只需使用`set-url`命令

```
git remote set-url origin root@newhost:repo/echo.git 
```

你可以看到结果

```
git remote -v
origin root@newhost:repo/echo.git (fetch)
origin root@newhost:repo/echo.git (push) 
```

# c++ - 如何正确使用 GMP 来执行此操作？

> ID：13577182
> 
> 赞同：0
> 
> 时间：2012-11-27T03:57:37.070
> 
> 标签：c++, gmp

我的 C++ 代码

```
 long long N=1000000000000LL;
   long long a = N;
   mpz_class v;
   mpz_mul(v, a, a); 
   cout<<v<<endl; //I want this to show 1000000000002000000000001
   long long U=((sqrt(4*N+v)-1)/4);  //not sure how to do this in GMP at all
   cout << U << endl; //should show 250000000000 
```

这是一个片段，显示了我想要做什么类型的操作。但是我对 GMP 的经验不够丰富，无法将其搞定，而且我不清楚文档。我该如何纠正这一切？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T04:05:38.283

mpz_class[没有来自 long long 的构造函数](http://gmplib.org/manual/C_002b_002b-Interface-Integers.html#C_002b_002b-Interface-Integers)（它只会上升到 unsigned long），因此您必须使用中间字符串：

```
#include <gmpxx.h>
#include <iostream>
#include <string>

int main()
{
    long long N = 1000000000000LL;
    mpz_class a(std::to_string(N).c_str());
    mpz_class v = a*a;
    std::cout << v << '\n'; // shows 1000000000000000000000000
    std::cout << (a+1) * (a+1) << '\n'; // THIS shows 1000000000002000000000001

    mpz_class U = ((sqrt(4*a+v)-1)/4);
    std::cout << U << '\n'; // shows 250000000000
} 
```

# c# - 使用 iTextSharp 将 HTML 转换为 PDF 时设置 a 的宽度

> ID：13577187
> 
> 赞同：4
> 
> 时间：2012-11-27T03:58:08.577
> 
> 标签：c#, itext, pdf-generation

单击按钮时，我需要阅读 HTML 文件并将其转换为 PDF。PDF 生成没有任何问题。但是当转换为 PDF 时，表格中的列宽是均匀分布的。但我需要表格的第一列占表格总大小的 70% (540)

我怎样才能做到这一点？

**模板.html：**

```
 <table runat="server" id="header" border="3" width="540">
        <tr>
            <td style="width:70%; text-align: center; font-weight: bold;">
                <strong>Test Specification </strong>
            </td>
            <td style="width:10%; text-align: center; font-weight: bold;">
                <strong>GST </strong>
            </td>
            <td style="width:10%; text-align: center; font-weight: bold;">
                <strong>Service </strong>
            </td>
            <td style="width:10%; text-align: center; font-weight: bold;">
                <strong>Amount </strong>
            </td>
        </tr>
    </table> 
```

**按钮单击以将 HTML 转换为 PDF：**

```
 protected void Button1_Click(object sender, EventArgs e)
        {
            String htmlText = System.IO.File.ReadAllText(Request.PhysicalApplicationPath + "\\Template.htm");
      Document document = new Document();
            PdfWriter.GetInstance(document, new FileStream(Request.PhysicalApplicationPath + DateTime.Now.ToString("ddMMyyyy") + "_" + DateTime.Now.ToString("HHmmss tt") + ".pdf", FileMode.Create));
            document.Open();
      iTextSharp.text.html.simpleparser.HTMLWorker hw = new iTextSharp.text.html.simpleparser.HTMLWorker(document);
            hw.Parse(new StringReader(HTML));
            document.Close();
            StringBuilder sb = new StringBuilder();
            sb.Append(HTML);
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T04:13:47.530

您需要使用 colspan 和 LoadTagStyle 的组合，这两者都超出了我在此文本框中可以容纳的范围。为简化起见，iTextSharp 将总列数视为表的 100%，因此 10 列的表上的 colspan 为 5 应视为表的 50%。

我发现我必须稍微调整一下这些值，但希望这会引导你走上正确的道路。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-09-16T15:49:05.573

使用 colspan 属性。例如，如果您有两个单元格定义为 10% 和 90%。分别设置 colspan = 1 和 9。它成功了。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-06-07T04:56:17.363

您必须`<td width="10%">` 在每行中为 td 设置 td 宽度百分比，而不仅仅是在标题或第一行中。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-27T05:23:55.510

设置宽度=“70%”，它应该可以工作。

```
<td width="70%"> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T13:55:52.343

它的剂量工作。没有任何方法可以设置表格单元格的宽度。我使用不寻常的代码来更改单元格宽度。

使用此示例代码，您可以找到所有表并找到所有行。如果行有 2 列，则单元格宽度设置为 400 和 100！

*您必须更改项目的代码！

```
 foreach (var htmlElement in parsedHtmlElements)
            {
                if (htmlElement is PdfPTable)
                {
                    var table = (PdfPTable)htmlElement;
                    foreach (var row in table.Rows)
                    {
                        PdfPCell[] pdfCellTemp = row.GetCells();
                        if (pdfCellTemp.Length == 2)
                        {
                            float[] w = { 400, 100 };
                            row.SetWidths(w);
                        }
                    }
                }
                pdfCell.AddElement(htmlElement);
            } 
```

# php - PHP在不同服务器/主机上的主域中包含子域中的文件

> ID：13577189
> 
> 赞同：0
> 
> 时间：2012-11-27T03:58:31.480
> 
> 标签：php, include, server-side-includes

我有这个 php

```
www.example.com/template.php 
```

并希望将其包含在 index.php 文件中

```
sub.example.com/index.php 
```

并且此子域位于具有不同主机的不同服务器上。

请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T04:22:33.293

您可以将文件内容下载到 php 文件中，然后将其包含在内，

```
$url = "http://sub.example.com/index.php";
$file = file_get_contents($url);
file_put_contents('index.php', $file);
include index.php; 
```

我建议从 index.php 更改名称，并确保在获取 php 文件时不会首先对其进行解析。

这也没有什么安全的。

编辑：另一种选择，

有一个名为allow_url_include 的php.ini 选项。

[http://php.net/manual/en/features.remote-files.php](http://php.net/manual/en/features.remote-files.php)

# python - 为什么我在 Python 中使用 .writelines() 时会在字符串末尾添加一个“i”字符？

> ID：13577193
> 
> 赞同：1
> 
> 时间：2012-11-27T03:58:57.380
> 
> 标签：python

我使用该 python 代码获取 3 个输入并写入一个文件，但是当我查看 /tmp 下名为 output.txt 的文件时，我看到在字符串末尾添加了一个“i”。为了说明，当我作为输入给出时a、b 和 c 分别得到这样的输入：ab ci。我能做些什么来解决这个问题？

```
 name = raw_input("Name:")
    email = raw_input("Email:")
    phone = raw_input("Telephone:")

    a=open("/tmp/output.txt","w")
    a.writelines( name+' '+email+' '+phone)
    a.close() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T04:16:15.217

**我不：**

```
$ cat >/tmp/t <<_EOF_
> name = raw_input("Name:")
> email = raw_input("Email:")
> phone = raw_input("Telephone:")
>
> a=open("/tmp/output.txt","w")
> a.writelines( name+' '+email+' '+phone)
> a.close()
> _EOF_

$ (echo "John Smith"; echo "nobody@example.com"; echo "123-45-678") | python /tmp/t

$ hexdump -C /tmp/output.txt
00000000  4a 6f 68 6e 20 53 6d 69  74 68 20 6e 6f 62 6f 64  |John Smith nobod|
00000010  79 40 65 78 61 6d 70 6c  65 2e 63 6f 6d 20 31 32  |y@example.com 12|
00000020  33 2d 34 35 2d 36 37 38                           |3-45-678|
00000028 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T05:23:29.580

要么`phone`在`'i'`结尾，要么稍后附加`'i'`到文件中。

`.writelines()`接受一系列字符串。它在这里是偶然的（任何字符串也是一个字符串的序列）。要将字符串写入文件，您可以`.write()`改用。`'\n'`如果需要，请在末尾添加；既不`.writelines()`也不`.write`为您附加换行符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T04:11:39.010

尝试打印

```
print phone 
```

查看变量“电话”的内容是否符合您的预期

# python - Python根据列值从最高到最低对文本文件进行排序

> ID：13577194
> 
> 赞同：0
> 
> 时间：2012-11-27T03:58:57.270
> 
> 标签：python, sorting

我有一个非常大的文本文件，其中包含以下数据行：

```
('#DownWithAssad', '1')
('#DownYoTLParty', '1')
('#Download', '8')
('#Download:', '2')
('#Downloads', '2')
('#DownstairsMixtape', '1')
('#DowntonAbbey', '12')
('#DowntonAbbey?', '1')
('#DowntonPBS', '23')
('#Downtonabbey', '1')
('#DowntownAbbey', '1') 
```

这似乎是一个简单的问题，但我想将数据从最高到最低软化，所以它看起来像：

```
('#DowntonPBS', '23')
('#DowntonAbbey', '12')
('#Download', '8')
('#Download:', '2')
('#Downloads', '2')
('#DownstairsMixtape', '1')
('#DownWithAssad', '1')
('#DownYoTLParty', '1')
('#DowntonAbbey?', '1')
('#Downtonabbey', '1')
('#DowntownAbbey', '1') 
```

我认为我可以消除括号 () 并将数据拆分为：

```
import sys

f = open(sys.argv[1])
for line in f:
    line = str(line)[1 : -1]
    for sect in line.split(','):
        print sect 
```

但是我不确定从这里去哪里。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T04:02:48.747

您可以使用以下方法很容易地解析您的文本文件`ast.literal_eval`：

```
with open(datafile) as f:
    file_sorted = sorted((ast.literal_eval(x) for x in f),
                         key=lambda z:(int(z[1]),z[0]),
                         reverse=True) 
```

这个怎么运作：

```
(ast.literal_eval(x) for x in f)  #turn each line in your file into a tuple
key=lambda z:(int(z[1]),z[0])     #function to determine how things are sorted.  Basically
                                  #sort as tuples:  `( int(z[1]),z[0] )`
reverse=True                      #descending order instead of ascending 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T04:20:56.193

这与您正在尝试做的事情一致。请注意，以这种方式解析行非常脆弱（格式错误的行可能会破坏它）

```
from operator import itemgetter
import sys

result=[]
with open(sys.argv[1]) as f:
    for line in f:
        line = str(line.strip())[1: -1]
        sect1, sect2 = line.split(', ')
        sect1 = sect1[1: -1]
        sect2 = int(sect2[1: -1])
        result.append((sect1, sect2))

for line in sorted(result, key=itemgetter(1), reverse=True):
    print line 
```

解析它的更好方法是使用`literal_eval`正则表达式。你知道字符串中出现引号字符或逗号时有什么特殊处理吗？

# java - 如何从不在我的 EOModel 中的数据库表中获取一行？

> ID：13577195
> 
> 赞同：0
> 
> 时间：2012-11-27T03:59:01.237
> 
> 标签：java, database, eclipse, webobjects

我正在使用 WOLips 和 Eclipse，我正在开发一个项目，我只需要了解其他项目中的一些实体，但我不想引用它（构建路径）。

我需要执行一条sql语句，看看这个表的某些记录是否存在，不再存在。

我正在尝试使用 EOUtilities 和框架的其他类，但我找不到办法。

请原谅我的英语。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T19:41:15.187

You *can* get information about any table in the database, even if it does not appear in your model. The only reason you need the model is that one needs the connection dictionary in order to connect to the database. But you could have 0 entities in your EOModel and it will still work.

You just need to provide the SQL. For example, with MySQL, one uses "desc tables". For Oracle, one needs to use the longer command that I always have to look up that does the same thing. Then look at the resulting array of dictionaries. The table name will be tied to some key, depending on the database and version of the database and/or JDBC drives, but the table name will be there. For MySQL, the key is either "FIELD" or "NAME", I think.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T23:33:41.763

我想你可以使用[EOUtilities.rawRowsForSQL()](http://wocommunity.org/documents/javadoc/WebObjects/5.4.2/com/webobjects/eoaccess/EOUtilities.html#rawRowsForSQL%28com.webobjects.eocontrol.EOEditingContext,%20java.lang.String,%20java.lang.String,%20com.webobjects.foundation.NSArray%29)。您需要一个模型名称，但可能您已经拥有了——您不需要从您尝试执行此操作的位置引用模型的包含项目。

# python - App Engine Python 身份验证自定义重定向

> ID：13577200
> 
> 赞同：1
> 
> 时间：2012-11-27T03:59:42.680
> 
> 标签：python, html, google-app-engine, authentication, python-2.7

```
handlers:
- url: /secure_api/.*
  script: _go_app
  login: required
  auth_fail_action: unauthorized 
```

这段代码只会把我带到一个页面，上面写着“需要登录才能查看页面”。有没有办法重定向到我的主页？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T06:46:27.420

当您指定 时`auth_fail_action: unauthorized`，您将获得您所看到的页面（有关详细信息，请参见[此处](https://developers.google.com/appengine/docs/python/config/appconfig#Requiring_Login_or_Administrator_Status)）。更改`unauthorized`为`redirect`会将他们带到登录屏幕，但如果您想根据用户的登录状态对用户进行更精细的处理，最好的办法是通过`Users`API 在代码内部进行。例如（这是改编自[文档](https://developers.google.com/appengine/docs/python/users/)），这是一个简单的示例，它将非登录用户重定向到`/`：

```
from google.appengine.api import users
import webapp2

class MyHandler(webapp2.RequestHandler):
    def get(self):
        user = users.get_current_user()
        if user:
            # Do stuff here for logged-in users
        else:
            # Redirect if user is None, which is the case for non-logged-in users
            self.redirect('/') 
```

# javascript - 在 jQuery 数据表中的 Ajax 调用中添加新行

> ID：13577204
> 
> 赞同：2
> 
> 时间：2012-11-27T04:00:16.677
> 
> 标签：javascript, jquery, ajax, datatables

我也是数据表和 Javascript 的新手。我正在尝试使用数据表绘制表格，并且我的页面使用 Ajax 请求在特定时间间隔内不断检查服务器是否有新数据。如果数据可用，我必须在现有数据表中插入一个新行作为第一行。

```
var refreshId = setInterval(function() {
  $.post("/xxx/xxx/xxx/checkOrder",
  function(data){
    if(!(data === "")) {
      $('#order').dataTable().fnAddData(data);
    }
  });
}, 19000); 
```

服务器返回以下数据：

```
["121111152591","New","abc","26-11-2012","2012-11-21","12:22","608.0"] 
```

现在的问题是数据表将第一个数据字符串 - 121111152591 作为数据表中的单个列插入，如 - col1 - [、col 2-1、col3-2 等等。同样在 JSON 返回多行的情况下，数据表无法呈现。有人可以让我知道如何解决这个问题吗？

# csv - 试图将 CSV 导入 phpMyAdmin

> ID：13577205
> 
> 赞同：0
> 
> 时间：2012-11-27T04:00:43.793
> 
> 标签：csv, phpmyadmin

我正在尝试将 a`.csv file`导入`phpMyAdmin`.

**我的表格格式如下：**

```
id,
staffnum,
city,
height,
eye,
hair,
titles 
```

**该文件的格式如下：**

```
"63,losangeles,5'10,green,Brown,Bartender"
"86,losangeles,5'9,blue,blonde,Bartender, Cocktail"
"263,newyork,6'1,blue,blonde,Cocktail"
"325,losangeles,5'10,brown,Brown,Bartender"
"545,newyork,6',brown,Brown,Bartender, Cocktail" 
```

我相信我遇到的问题是职位（调酒师、鸡尾酒等）要进入列标题，而我没有正确的格式。我是否需要在带有多个逗号的值周围使用单引号，例如：

```
"86,losangeles,5'9,blue,blonde,'Bartender, Cocktail'" 
```

`CSV`另外，上传文件时高度部分的撇号会导致问题吗？我在网上搜索过，但似乎没有人对`CSV`文件应该如何格式化有明确的说明。我已经尝试导入它并且它说成功但是，没有值应用于任何字段。

文件在[这里](http://www.2shared.com/file/5y_kESkh/staff.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T04:10:37.693

我想如果你的 .csv 文件是这样格式化的，它会导入，并且 id 字段会自动递增

```
'',63,losangeles,5'10,green,Brown,Bartender
'',86,losangeles,5'9,blue,blonde,Bartender, Cocktail
'',263,newyork,6'1,blue,blonde,Cocktail
'',325,losangeles,5'10,brown,Brown,Bartender
'',545,newyork,6',brown,Brown,Bartender, Cocktail 
```

# php - 用 php 创建我自己的简码

> ID：13577206
> 
> 赞同：8
> 
> 时间：2012-11-27T04:00:45.267
> 
> 标签：php, shortcode

**我想创建自己的简码**

**在文本中，我可以输入简码，例如：**

> 人很好，[gal~route~100~100]，人很好，[ga2l~route2~150~150]

在这个表达式中，您可以在 [] 标签中看到简码，我想显示没有此简码的文本并将其替换为画廊（使用 php 包含并从简码读取路径库）

我想使用这种方法，你可以看到，但它们都不适合我，但是这里的人可以告诉我一些事情或给我任何可以帮助我的想法

```
 <?php
 $art_sh_exp=explode("][",html_entity_decode($articulos[descripcion],ENT_QUOTES));

 for ($i=0;$i<count($art_sh_exp);$i++) {

 $a=array("[","]"); $b=array("","");

 $exp=explode("~",str_replace ($a,$b,$art_sh_exp[$i]));

 for ($x=0;$x<count($exp);$x++) { print
 "".$exp[1]."-".$exp[2]."-".$exp[3]."-<br>"; }

 } ?> 
```

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-27T04:26:37.230

我建议您使用正则表达式来查找所有出现的短代码模式。

它使用`preg_match_all`（[此处](http://ca2.php.net/preg_match_all)的文档）查找所有出现，然后简单`str_replace`（[此处](http://ca3.php.net/str_replace)的文档）将转换后的短代码放回字符串中

此代码中包含的正则表达式只是尝试将 0 匹配到括号`[`和`]`

```
$string = "The people are very nice , [gal~route~100~100] , the people are very nice , [ga2l~route2~150~150]";
$regex = "/\[(.*?)\]/";
preg_match_all($regex, $string, $matches);

for($i = 0; $i < count($matches[1]); $i++)
{
    $match = $matches[1][$i];
    $array = explode('~', $match);
    $newValue = $array[0] . " - " . $array[1] . " - " . $array[2] . " - " . $array[3];
    $string = str_replace($matches[0][$i], $newValue, $string);
} 
```

结果字符串现在是

```
The people are very nice , gal - route - 100 - 100 , the people are very nice , ga2l - route2 - 150 - 150 
```

通过分两个阶段解决问题

*   查找所有事件
*   用新值替换它们

开发和调试更简单。如果您想在某一时刻更改短代码转换为 URL 或其他内容的方式，它也会变得更容易。

**编辑：**正如杰克所建议的，使用[preg_replace_callback](http://ca2.php.net/manual/en/function.preg-replace-callback.php)可以更简单地做到这一点。看他的回答。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T04:37:37.807

一种方法是使用`preg_replace_callback()`：

```
function my_replace($match)
{
    // $match[0] is e.g. "[gal~route~100~100]"
    // $match[1] is e.g. "gal~route~100~100"

    // now do whatever you want with the found match
    return join('-', explode('~', $match[1])) . '<br />';
}

// apply callback on all patterns like [*]
preg_replace_callback(
    '/\[([^]]+)\]/', 
    'my_replace',
    html_entity_decode($articulos[descripcion],ENT_QUOTES)
); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-03T08:51:09.643

你也可以尝试这样的事情：

```
$org_text = "Lorem ipsum dolor sit amet, [SHORTCODE_1] adipiscing elit.
Phasellus id orci ac dolor dapibus [SHORTCODE_1] at eu sem.
Nullam pretium bibendum urna et gravida. Donec [SHORTCODE_1] vehicula lectus
nec facilisis. Maecenas vel ante tincidunt, [SHORTCODE_2] 
sem id, tincidunt elit. Integer neque [SHORTCODE_2], ultrices in lore
[SHORTCODE_2], egestas ullamcorper enim.";

$shortcodes_a =  array('[SHORTCODE_1]','[SHORTCODE_2]');
$shortcodes_b =  array('Some text','Some other text');                   

$new_text = '';

$new_text = str_replace($shortcodes_a, $shortcodes_b, $org_text);

echo $new_text; 
```

这会给你：

```
Lorem ipsum dolor sit amet, Some text adipiscing elit. Phasellus id orci ac dolor dapibus Some text at eu sem. Nullam pretium bibendum urna et gravida. Donec Some text vehicula lectus nec facilisis. Maecenas vel ante tincidunt, Some other text sem id, tincidunt elit. Integer neque Some other text, ultrices in lorem Some other text, egestas ullamcorper enim. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T04:19:06.897

您可以使用正则表达式来匹配方括号内的项目。然后`explode()`是带有分隔符的字符串`~`以获取其他值（或者您也可以使用正则表达式）。

参考：

[preg_match()](http://php.net/manual/en/function.preg-match.php)

[preg_match_all()](http://www.php.net/manual/en/function.preg-match-all.php)

[preg_replace()](http://www.php.net/manual/en/function.preg-replace.php)

学习正则表达式的好参考：[http ://www.regular-expressions.info/](http://www.regular-expressions.info/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-05T05:31:00.673

我看到了这一点，它有所帮助并想如果有人想知道一个或多或少简单的版本，至少可以生成带有内容块的各种短代码的清理版本。[slideshow:(name of slideshow)] 或 [form:(name of form)] （到目前为止，我只将其设置为幻灯片放映位，并认为我会尝试回馈。代码如下，可以只需将其复制到 php 文件中并查看以查看输出是什么。

```
<code>
//Regular expression  would be : '/\[(blah:)(.)+\]/'
// The \\2 is an example of backreferencing. This tells pcre that
// it must match the second set of parentheses in the regular expression
// itself, which would be the ([\w]+) in this case. The extra backslash is
// required because the string is in double quotes.
$html = "stupid text here taht is totally lame [slideshow:topLeft] Some more dumb text [slideshow:topright] and finally some more dumb text here.";

preg_match_all('/\[(slideshow:)(.*?)\]/', $html, $matches);
$properArray = array();
$customShortCodes = array();
foreach($matches[0] as $slideKey=>$slideShow)
{
    $matchNoBrackets = str_replace(array('[',']'),'',$slideShow);
    $shortCodeExploded = explode(':', $matchNoBrackets);
$customShortCodes['slideshow'][$slideKey] = $shortCodeExploded[1];
}
$customShortCodes['form'][0] = 'contact us';
$customShortCodes['form'][1] = 'Mulch Count';
//loop through customShortCodes to replace proper values.
$newContent = $html;//assigning original content to new only for comparison testing.
foreach($customShortCodes as $shortCodeKey=>$shortCode)
{
    if($shortCodeKey == 'slideshow')
    {
        print_r($shortCode);
        foreach($shortCode as $show)
        {
            $testingReplacementText = "<strong>$show</strong>";
            $originalShortCode = "[slideshow:$show]";
            $newContent = str_replace($originalShortCode,$testingReplacementText,$newContent);
        }
    }
    if($shortCodeKey == 'form')
    {
        //print_r($shortCode);
    }
}

print_r($customShortCodes);
</code> 
```

以上内容的输出：

*   原文：这里愚蠢的文字完全是蹩脚的 [slideshow:topLeft] 一些愚蠢的文字 [slideshow:topright] 最后还有一些愚蠢的文字。
*   修改：这里愚蠢的文字完全是蹩脚的 topLeft 一些更愚蠢的文字 topright 最后是**一些**更**愚蠢**的文字。

     **`echo 'Original: '.$html.'
    '; echo 'Revized: '.$newContent.'
    ';`** 

 **我希望这有帮助。我创建这个时考虑到了 wordpress 短代码，以便在我自己的 cms 上使用。真正的最终结果将涉及使用 ob_start 并包含 php 文件来获得所需的输出。

```
<code>
ob_start();
include "{$slideshowName}_slideshow.php";//OR pass through params to the file...
$conditionalContent = ob_get_contents();
ob_end_clean();
</code> 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-11-27T04:22:50.873

您的字符串替换参数变量不会接受数组值；

```
str_replace ($a,$b,$art_sh_exp[$i]) /*Here $a , $b are array values so wont work*/ 
```

尝试使用以下方法： 1.首先尝试替换字符串字符'[' 2.然后尝试替换字符串字符']'

请试试这个；

```
str_replace (']','',str_replace ('[','',$art_sh_exp[$i])) 
```**

# android - TransferManager 在网络问题上的行为

> ID：13577212
> 
> 赞同：1
> 
> 时间：2012-11-27T04:01:54.207
> 
> 标签：android, web-services, amazon-s3, amazon-web-services

使用 TransferManager 上传时，如果出现网络问题，则会被捕获到异常 - AmazonClientException。在这种情况下，我必须中止当前的上传吗？如果我想再次上传文件，我必须重新开始上传吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T14:37:40.737

如您在其他问题中所述，S3 TransferManager 目前不支持恢复上传。我们将考虑在 SDK 的未来版本中添加此功能。

# iphone - Core Data 在切换视图时使属性为 NULL

> ID：13577214
> 
> 赞同：0
> 
> 时间：2012-11-27T04:02:10.980
> 
> 标签：iphone, ios, xcode, core-data

我有四种观点。

视图 1，显示了一个带有添加按钮的表格视图。（添加按钮不可见，它在屏幕截图边界之上）

![查看 1](../Images/60843793454826c40af6d875f84f298e.png)

视图 2（按下添加按钮时显示）允许用户输入有关他们想要添加的表格视图单元格的数据。`save`按下按钮后，新单元格将添加到视图中。

![视图 2](../Images/29088fff0f0140c021a300c2c6a7167f.png)

查看 3 如果用户想编辑一个单元格，他们只需点击该单元格。这个视图只允许用户编辑已经在表格中的单元格。

![视图 3](../Images/5cf8e17e04e70572a5377cd46099fb90.png)

但是当我简单地将视图 4 放在视图 1（表格视图）和 3（单元格编辑器视图）之间时，属性/标签会显示`null`应该显示用户输入的位置。但是，当我从视图 1 和视图 3 之间删除视图 4 时，该应用程序再次完美运行。有什么理由吗？

![视图 4](../Images/11d201f1f9e53a825f6cfe817dc23cdb.png)

我只是通过以下方式切换视图：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{

UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"Storyboard" bundle:nil];

View3 * three = (View3 *) [storyboard instantiateViewControllerWithIdentifier:@"view3VC"];

View4 * four = (View4 *) [storyboard instantiateViewControllerWithIdentifier:@"view4VC"];

[tableView deselectRowAtIndexPath:indexPath animated:YES];

three.managedObjectContext = self.context;

MyEntityClass *entity = [self.tableArray objectAtIndex:indexPath.row];

three.3entity = entity;

[self presentViewController:four animated:YES completion:nil];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T07:20:46.227

这有点令人困惑，但我想我会尽力帮助你。

在您的代码中：

```
MyEntityClass *entity = [self.tableArray objectAtIndex:indexPath.row];
three.3entity = entity; 
```

你说它在你调用view3时有效，我猜这是因为你已经将实体分配给了view3。

但是，如果您像这样呈现 view4，那么您之间没有分配任何东西。

```
View4 * four = (View4 *) [storyboard instantiateViewControllerWithIdentifier:@"view4VC"]; 
```

和

```
[self presentViewController:four animated:YES completion:nil]; 
```

现在 view4 是一个全新的空视图控制器。它显示`null`在您的标签中并不奇怪。

尝试以与 view3 完全相同的方式修复它。

# java - JSP getVariableResolver() 已弃用，JSP 2.2 中的正确方法是什么？

> ID：13577216
> 
> 赞同：3
> 
> 时间：2012-11-27T04:02:44.300
> 
> 标签：java, jsp, el

我使用此代码但已弃用，您能帮我将其移植到 JSP 2.2

```
 <%= pageContext.getVariableResolver().resolveVariable("varName")%> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T04:07:01.753

根据[Javadoc](http://docs.oracle.com/javaee/6/api/javax/servlet/jsp/JspContext.html#getVariableResolver%28%29)，获取变量解析器的新方法是`jspContext.getELContext().getELResolver()`：由于 PageContext 是 JspContext，您可以将您的行更改为`<%=pageContext.getELContext().getELResolver().resolveVariable("varName")`%>。

如果您只想解析一个变量，您可能应该使用[EL 语法](http://docs.oracle.com/javaee/6/tutorial/doc/gjddd.html)：`${varName}`.

# batch-file - 运行 .exe 并输出到文件的批处理文件

> ID：13577218
> 
> 赞同：2
> 
> 时间：2012-11-27T04:02:50.027
> 
> 标签：batch-file

我有一个[.exe 文件](http://kb.eset.com/esetkb/index?page=content&id=SOLN333)，运行时会打开一个输出唯一 ID 并等待输入的 cmd 窗口。我必须在大约 100 台 PC 上运行这个 .exe 文件才能解锁它们的设置。

我想运行这个 .exe 并将 ID 输出到文本文件，因为我不想在所有机器上手动运行它。我尝试过使用批处理文件，但它不起作用。似乎吸引我的是它一直等到它收到输入才输出到文件。

```
start "C:\unlock\Unlock.exe" >> ./Unlock.txt
cmd /K "C:\unlock\Unlock.exe" >> ./Unlock.txt 
```

尝试使用 cmd 命令向 exe 提供参数似乎也不起作用。

```
cmd /k "C:\unlock\Unlock.exe" 11 >> ./Unlock.txt 
```

我愿意接受所有关于自动化的建议。批处理文件、vbs、powershell 或 python。我也尝试过使用 psexec 但它确实输出到我正在运行远程命令的 cmd 窗口。

# intel - 英特尔 SSE 和 AVX 示例和教程

> ID：13577226
> 
> 赞同：40
> 
> 时间：2012-11-27T04:03:30.203
> 
> 标签：intel, sse, vectorization, avx

是否有任何好的 C/C++ 教程或示例来学习英特尔 SSE 和 AVX 指令？

我在 Microsoft MSDN 和 Intel 网站上发现很少，但从基础知识了解它会很棒..

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-04-10T07:07:34.257

对于有视觉倾向的 SIMD 程序员，Stefano Tommesani 的网站是 x86 SIMD 编程的最佳介绍。

[http://www.tommesani.com/index.php/simd/46-sse-arithmetic.html](http://www.tommesani.com/index.php/simd/46-sse-arithmetic.html)

这些图表仅针对 MMX 和 SSE2 提供，但是一旦学习者精通 SSE2，就可以相对容易地继续阅读正式规范。

* * *

以 A 到 M 开头的 Intel IA-32 指令

[http://www.intel.com/content/dam/www/public/us/en/documents/manuals/64-ia-32-architectures-software-developer-vol-2a-manual.pdf](http://www.intel.com/content/dam/www/public/us/en/documents/manuals/64-ia-32-architectures-software-developer-vol-2a-manual.pdf)

以 N 到 Z 开头的 Intel IA-32 指令

[http://www.intel.com/content/dam/www/public/us/en/documents/manuals/64-ia-32-architectures-software-developer-vol-2b-manual.pdf](http://www.intel.com/content/dam/www/public/us/en/documents/manuals/64-ia-32-architectures-software-developer-vol-2b-manual.pdf)

* * *

此外，对于英特尔 SIMD 程序员来说，了解 SSE2 代之外的指令所需的最低架构也很重要。

在维基百科上按世代浏览：

*   [http://en.wikipedia.org/wiki/SSE3](http://en.wikipedia.org/wiki/SSE3)
*   [http://en.wikipedia.org/wiki/SSSE3](http://en.wikipedia.org/wiki/SSSE3)
*   [http://en.wikipedia.org/wiki/SSE4.1#SSE4.1](http://en.wikipedia.org/wiki/SSE4.1#SSE4.1)
*   [http://en.wikipedia.org/wiki/SSE4.2#SSE4.2](http://en.wikipedia.org/wiki/SSE4.2#SSE4.2)

在单个页面上搜索给定的英特尔 SIMD 助记符（通过文本搜索）：

*   [http://en.wikipedia.org/wiki/X86_instruction_listings](http://en.wikipedia.org/wiki/X86_instruction_listings)

* * *

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-01T21:12:35.873

这里有一个很好的介绍

[代码项目 SSE](http://web.archive.org/web/20150531202539/http://www.codeproject.com/Articles/4522/Introduction-to-SSE-Programming)

此外，如果您安装了[Microsoft DirectX SDK](http://www.microsoft.com/en-us/download/details.aspx?id=6812)，则来自 xnamath 的源代码有很多使用 sse 内在函数的矢量/矩阵操作（检查 sdk 包含文件夹、xnamath.h、xnamathconvert.inl、xnamathmatrix.inl ...）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-27T08:54:34.853

[Apple 的开发者网站](https://developer.apple.com)上有一些好东西，例如[SSE Performance Programming](http://www.thomasdideriksen.dk/misc/SIMD/Accelerate_sse_migration.pdf)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-02-21T00:45:17.763

您可能会发现查看如何将 SIMD 应用于某些常见算法的示例很有用。在 2011 年游戏开发者大会上，英特尔发表了一个名为[“热点、FLOPS 和 uOps：To-the-Metal CPU 优化”的演讲](http://www.gdcvault.com/play/1014645)，试图展示游戏中常见算法的 SIMD。演讲提到了一些[英特尔示例代码，展示了如何将 AVX 应用于布料计算](http://software.intel.com/en-us/articles/soa-cloth-simulation-with-256-bit-intel-advanced-vector-extensions-intel-avx)。

# regex - 使用linux将正则表达式匹配转换为大写

> ID：13577228
> 
> 赞同：3
> 
> 时间：2012-11-27T04:03:53.273
> 
> 标签：regex, linux, uppercase

我想搜索以下正则表达式：“[ag][ag]aag[acg]”并仅将整个匹配转换为大写，而不是单独搜索 a 或 g。我尝试了 sed 'y/[ag][ag]aag[acg]/[AG][AG]AAG[ACG]/' 但这会将对小写 a 或 g 的单个搜索转换为大写 A 或 G。我只想当它发现与整个序列匹配时进行转换。

非常感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-21T16:09:33.083

sed 声明@perreal 发布了作品。你确定你使用正确吗？

测试的内容 = agaaga

sed 's/([ag][ag]aag[acg])/\U\1/' 已测试

阿加加

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T04:08:41.503

使用 sed：

```
sed 's/\([ag][ag]aag[acg]\)/\U\1/' input 
```

它找到一个匹配`[ag][ag]aag[acg]`项并捕获这个匹配项`\(...\)`。然后它用它的大写版本替换匹配`\U\1`。

# mongodb - 从 mongodb 导出 csv

> ID：13577230
> 
> 赞同：5
> 
> 时间：2012-11-27T04:04:13.340
> 
> 标签：mongodb, csv, export

我的 mongodb 中有两个集合，即

1.公司

2.联系人

公司和联系人集合都是相互关联的。我想将特定公司的联系人导出到 csv 中。我试过一个mongo导出命令如下

```
 mongoexport --csv -d dbname -c contacts 
 -q {"employment_details.company_id":ObjectId("50926cff9fe3125819006dc7")}; 
 -f {"first_name","last_name","title"} -o export.csv 
```

我收到如下错误

语法错误：缺少；声明之前（shell）：1。

请帮我。提前致谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-27T04:31:37.250

这里可能会发生一些事情。首先，您`mongoexport`是从命令行运行还是从`mongo`shell 运行？该`mongoexport`命令从命令行运行。

其次，您需要正确格式化查询和字段参数。您可以用单引号将查询括起来，并且归档名称不是 JSON 文档，而只是字段列表。

从命令行看起来如下所示：

```
mongoexport --csv -d dbname -c contacts -q '{"employment_details.company_id":ObjectId("50926cff9fe3125819006dc7")}' -f "first_name","last_name","title" -o export.csv 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-07T05:58:28.370

如果从命令行运行以下查询将起作用

```
mongoexport -h host -d dbname -c contacts --csv -q '{"employment_details.company_id":ObjectId("50926cff9fe3125819006dc7")}' -f first_name,last_name,title -o export.csv 
```

# yii - Yii 获取所有数据库

> ID：13577231
> 
> 赞同：0
> 
> 时间：2012-11-27T04:04:14.060
> 
> 标签：yii

我正在尝试在我的 Yii 应用程序中获取所有数据库。我的第一个解决方案如下：

```
$dsn = "mysql:host = localhost; dbname=myDBname";
$username = "myUsername";
$password = "myPassword";

$command = "show databases";
$db = new PDO($dsn, $username, $password);
$db->query($command);
var_dump($db->query($command)->fetchAll()) ; 
```

但是，我知道这个解决方案没有利用框架。所以我尝试寻找更好的方法，可能看起来像这样：

```
 $sql = "show databases";
        $command = Yii::app()->db->createCommand($sql);
        $result = $command->query();
        var_dump($result); 
```

但是，通过这种方式，结果并不像我预期的那样。它实际上返回 CDbDataReader 类的对象实例。并且访问真实 PDO 对象的属性是私有的（它的名称是“_statement”），所以我无法访问它来获取所有数据库。那么，你能帮我找到一种更优雅的方法，可以从 Yii 框架中获得比第一个解决方案更多的东西吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T07:46:48.013

哦，我得到了答案，我只需要将“query”方法更改为“queryAll”，所以它看起来像这样： var_dump(Yii::app()->db->createCommand('SHOW DATABASES')->queryAll() );

# cakephp - Cakephp 如何将链接 /app/webroot/blog 更改为 /blog

> ID：13577233
> 
> 赞同：2
> 
> 时间：2012-11-27T04:04:16.143
> 
> 标签：cakephp

我有一个由 CakePHP 构建的网站。我希望使用 Wordpress 构建博客部分，因此我将一个 Wordpress 文件夹上传到 /app/webroot/ 文件夹并将其重命名为“博客”。我正常安装了Wordpress。在主页中，我显示了带有代码的博客部分的链接

```
<?php echo $this->webroot. '/blog'; ?> 
```

我已经检查过了，它显示“ **http//mydomain.com/blog** ”，但我点击了那个链接，它自动重定向到“ **http//mydomain.com/app/webroot/blog** ”。

我只想将链接重定向到“ **http//mydomain.com/blog** ”。我该怎么做？

P/S：对不起，我的英语不好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T08:24:45.417

听起来，当您运行 WP 安装时，您并没有进入数据库并将 url 路径更改为 /blog。这篇文章应该有所帮助。 [http://www.balistupa.com/blog/2010/08/how-to-redirect-appwebrootblog-into-blog-wordpress-cakephp/](http://www.balistupa.com/blog/2010/08/how-to-redirect-appwebrootblog-into-blog-wordpress-cakephp/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T10:24:30.483

我的 webroot 中有一些博客，并在我的 htaccess 中添加了以下内容：

```
RewriteCond %{REQUEST_URI} ^/blog/(.*)$ 
RewriteRule ^.*$ - [L] 
```

这很好，如果我输入：

```
www.mydomain.com/blog/ 
```

但是，如果我不放斜杠（www.mydomain.com/blog），我会被重定向到：

```
 www.mydomain.com/app/webroot/blog/ 
```

# wpf - WPF：如何使文本块触发键事件？

> ID：13577235
> 
> 赞同：4
> 
> 时间：2012-11-27T04:04:49.913
> 
> 标签：wpf, events, key, textblock

TextBlock 有 KeyDown 和 KeyUp 事件，但它从未被触发。有没有办法让它发生？我只需要检测是否按下了任何键。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T04:49:29.687

首先，您需要将[`Focusable`](http://msdn.microsoft.com/en-us/library/system.windows.uielement.focusable.aspx)TextBlock 的属性设置为 True，这将允许您使用 Tab 键选择项目，但不能单击以选择它，但如果您处理 MouseDown 事件，您可以手动将焦点设置为您的 TextBlock。

**主窗口.xaml**

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
    <Grid >
       <TextBlock Name="tb1"  Height="30" Width ="100" IsEnabled="True"  Focusable="True" KeyDown="tb1_KeyDown" MouseDown="tb1_MouseDown">Hello World</TextBlock>
    </Grid>
</Window> 
```

**主窗口.xaml.cs**

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }

    private void tb1_KeyDown(object sender, KeyEventArgs e)
    {
        tb1.Background = Brushes.Blue;
    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {
        tb1.Focus();
    }

    private void tb1_MouseDown(object sender, MouseButtonEventArgs e)
    {
        tb1.Focus();
    }
} 
```

# ajax - 在 sharepoint 2010 可视化 webpart 中初始化问题 jscrollpane 和 Ajax 更新面板

> ID：13577237
> 
> 赞同：1
> 
> 时间：2012-11-27T04:05:22.200
> 
> 标签：ajax, jscrollpane, visual-web-developer-2010, jscrollbar

jscrollpane 工作正常，在 SharePoint 2010 中加载我的可视 Web 部件以及日历、列表视图。但是，一旦单击了各个日期，我的代码就会查找特定的日期事件并在列表视图中呈现（数据绑定，带有部分回发），这会使 jscrollpane 被破坏。“初始化”没有运气

找到以下链接：http: [//jscrollpane.kelvinluck.com/destroy.html](http://jscrollpane.kelvinluck.com/destroy.html) https://groups.google.com/forum/?fromgroups#!topic/jscrollpane/kCewnCVaZMk

提前致谢。DRS

# php - 在 HTML 下拉列表中动态设置所选选项 - PHP

> ID：13577242
> 
> 赞同：1
> 
> 时间：2012-11-27T04:06:10.140
> 
> 标签：php, html

我知道有一些例子围绕着在 HTML 选项标签中动态设置选定标签的问题徘徊，但我在尝试完成的工作中遇到了一个非常困难的中断语句和引号问题。

```
while($info = mysql_fetch_array($companydesc)) 
{
$output3 .= '<option value="'. $info['company_code'] . if ($result['company']==$info['description']){echo 'selected=\"selected\"'} . '">' . $info['description'] . '</option>';
}
echo $output3; 
```

我收到的错误是 if 语句所在行的意外 T_IF。在那里放一个 if 语句是不合法的吗？还是做适当休息的问题？任何帮助将不胜感激（希望代码的格式有效）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T04:09:04.653

使用三元语句：

```
while($info = mysql_fetch_array($companydesc)) {
    $output3 .= '<option value="'. $info['company_code'].'"'.($result['company']==$info['description'] ? ' selected=\"selected\"' : '') . '>' . $info['description'] . '</option>';
}
echo $output3; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T04:12:34.257

是的，这是非法的，我的建议是：

```
while($info = mysql_fetch_array($companydesc))
{
  if($result['company']==$info['description'])
  {
    $output3 .= '<option value="' . $info['company_code'] . '" selected = selected>' . $info['description'] . '</option>';
  }
  else
  {
    $output3 .= '<option value="' . $info['company_code'] . '">' . $info['description'] . '</option>';
  }
}
echo $output3; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T05:13:56.780

尝试以您最初打算使用的方式使用单独的解决方案来解决所有问题

```
 while($info = mysql_fetch_array($companydesc)) 
```

我认为，这是阻碍 php 并最终使代码极难维护的一大因素，尽管它在学习曲线上非常容易。

此函数采用可选的 selected 参数，并将构建您的选择框。这比使用自己的自定义代码为每个查询执行每个选择框要好得多。

这里可能存在语法错误，但通常，

```
 function selectBox($array, $selected=false){
        foreach($array as $name => $value){
            $options .= '
                <option value=" . $name . '"'
                . ($selected != false && $selected == $value) ? 'SELECTED' : '' 
                . '>".$name."</option>"; 
       }
   } 
```

值得一提的是，选择框要求您传递一个预定义的 key=>value 对数组，因此您需要一个额外的辅助函数（您不能只将它传递给您的数据库返回）

另外可能值得一提的是 using`mysql_fetch_array($companydesc)`根本没有抽象数据库级别。下线，这样的代码将完全禁止迁移到 Postgres 或不同的数据库系统。

# ruby-on-rails - 从 Capybara rquest 规范访问视图辅助方法

> ID：13577244
> 
> 赞同：4
> 
> 时间：2012-11-27T04:06:18.027
> 
> 标签：ruby-on-rails, ruby, rspec, capybara

我的应用程序助手中有视图助手方法：

```
module ApplicationHelper
 def formatted_something(something)
   "Hello, #{something}"
 end
end 
```

我想在我的请求规范中访问该方法：

```
require "spec_helper"

describe "something" do
  include RequestSpecHelper

  it "should display blogs list" do
    visit something_url
    page.should have_content formatted_something(@something.something)
  end
end 
```

它找不到**formatted_something**方法。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-27T04:25:39.847

你只需要在你的`describe`块中包含相关的帮助模块，它将在所有嵌套规范中可用：

```
describe "something" do
  include RequestSpecHelper
  include ApplicationHelper

  ...
end 
```

# javascript - 使 jQuery 动画 Div 的大小增长

> ID：13577252
> 
> 赞同：2
> 
> 时间：2012-11-27T04:07:45.027
> 
> 标签：javascript, jquery, html, css

我正在为我的投资组合网站制作一个页面，该页面显示各种服务。三列的中心列有一个大框。中央框的左右是每列 3 个框。每个框都是一个可点击的链接，然后可以更改中央块中的内容。

我正在尝试使用 jQuery 使中央框两侧的框在高度上增长`mouseover`并在 mouseout 上缩小`.animate()`。

我的问题是盒子非常痉挛。当你`mouseout`一个人去另一个人时，有时它会缩小，然后长大，然后又缩小。我怎样才能迫使他们第二次停止增长和缩小？

这是相关页面的链接：[http ://www.nukamedia.com/beta/services.html](http://www.nukamedia.com/beta/services.html)

**这是jQuery代码：**

```
 var classes = ".how-it-works, .built-for-power, .done-on-time, .inform-your-customers, .spread-the-word, .keep-in-contact";
    $(classes).on("mouseover", function() {
            $(this).animate({height: '+=20px'},500);
    });
    $(classes).on("mouseout", function() {
            $(this).animate({height: '-=20px'},500);
    }); 
```

**这是 HTML 标记：**

```
<div class="services-content container">
    <div class="row">
        <div class="left-control-squares twocol">
            <div class="how-it-works box-defaults">
                <a href="" id="works"></a>
                Learn<br/>
                How It<br/>
                <span>Works</span>
            </div>
            <div class="built-for-power box-defaults box-text-align">
                <a href="javascript: changeContent('power');" id="power"></a>
                Built For<br/>
                <span>Power</span>
            </div>
            <div class="done-on-time box-defaults box-text-align">
                <a href="javascript: changeContent('time');" id="time"></a>
                Done On<br/>
                <span>Time</span>
            </div>
        </div>

        <div class="eightcol" id="content-square">
            <img src="images/click-to-learn.png" />
        </div>

        <div class="right-control-squares  twocol last">
            <div class="inform-your-customers box-defaults">
                <a href="javascript: changeContent('customers');" id="customers"></a>
                Inform<br/>
                Your<br/>
                <span>Customers</span>
            </div>
            <div class="spread-the-word box-defaults box-text-align">
                <a href="javascript: changeContent('word');" id="word"></a>
                Spread The<br/>
                <span>Word</span>
            </div>
            <div class="keep-in-contact box-defaults box-text-align">
                <a href="javascript: changeContent('contact');" id="contact"></a>
                Keep In<br/>
                <span>Contact</span>
            </div>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T04:24:21.720

您应该考虑使用 jQuery stop() 函数。这将停止动画的轨迹。

```
$("#myelm").stop().animate({height : "300px"}); 
```

# erlang - erlang集群中的多个nodedown消息

> ID：13577253
> 
> 赞同：2
> 
> 时间：2012-11-27T04:07:47.553
> 
> 标签：erlang

我正在构建一个简单的 gen_server 模块，它监视多个远程节点的活动

当远程节点注册时，此模块使用 erlang:monitor_node(Node, true) 监视该节点。每个节点仅注册一次（通过日志确认）

在 gen_server 的 handle_info/2 回调中，它捕获 {nodedown, Node} 消息并使用 erlang:monitor_node(Node, false) 监视节点。我希望只收到一次此消息：当远程节点关闭时。

在测试模块时，我发现当一个远程节点宕机时，会向 gen_server 发送数百条 {nodedown, Node} 消息（数量从几百到几千不等）。

为什么monitor_node会发送多条消息？我怎样才能防止这种行为？

编辑：这是（一部分）源代码

```
register_node(#node_info{node = NodeName} = NodeInfo) ->
    case mnesia:read(node_info, NodeName) of
        [] ->
            monitor_node(NodeName, true),
            error_logger:info_msg("node ~p registered", [NodeName]);
        [_OldInfo] ->
            error_logger:trace_msg("info of node ~p updated", [NodeName])
    end,
    mnesia:write(NodeInfo).

handle_cast({register_node, #node_info{} = NodeStatus}, Timer) ->
    case mnesia:transaction(fun register_node/1, [NodeStatus]) of
        {aborted, Reason} ->
            error_logger:warning_msg("transaction register_node failed: ~p", [Reason]);
        _ ->
        ok
    end,
    {noreply, Timer};
handle_cast({shutdown_node, #node_info{} = NodeStatus}, Timer) ->
    case mnesia:dirty_delete_object(NodeStatus) of
        {aborted, Reason} ->
            error_logger:warning_msg("transaction shutdown_node failed: ~p", [Reason]);
        _ ->
        ok
    end,
    {noreply, Timer};
handle_cast(Message, Timer) ->
    error_logger:warning_msg("~p: received unknown message ~p", [?MODULE, Message]),
    {noreply, Timer}.

handle_info({nodedown, Node}, Timer) ->
    monitor_node(Node, false),
    error_logger:info_msg("~p: node ~p down", [?MODULE, Node]),
    mnesia:transaction(fun mnesia:delete/3, [node_info, Node, write]),
    {noreply, Timer};
handle_info(Message, Timer) ->
    error_logger:warning_msg("~p: received unknown message ~p", [?MODULE, Message]),
    {noreply, Timer}. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T09:54:15.430

你已经完成`monitor_node(NodeName, true)` `**INSIDE**`了 mnesia 交易。

我认为这是因为 monitor_node 将在内部涉及（I/O 操作）消息通信。这条线不适合放在translation里面。它可能会向`'registered'`相关节点发送消息。因此，当节点关闭时，`'nodedown'`已经收到了许多消息。

```
 If a process has made two calls to monitor_node(Node, true) and Node terminates, 
**two nodedown messages are delivered to the process.** If there is no connection 
to Node, there will be an attempt to create one. If this fails, a nodedown 
message is delivered. 
```

请将该行移出`transaction`或仅使用`"CASE"`表达式，然后重试。

```
register_node(#node_info{node = NodeName} = NodeInfo) ->
    case mnesia:read(node_info, NodeName) of
        [] ->
            monitor_node(NodeName, true),
            error_logger:info_msg("node ~p registered", [NodeName]);
        [_OldInfo] ->
            error_logger:trace_msg("info of node ~p updated", [NodeName])
    end,
    mnesia:write(NodeInfo).
handle_cast({register_node, #node_info{} = NodeStatus}, Timer) ->
    case mnesia:transaction(fun register_node/1, [NodeStatus]) of
        {aborted, Reason} ->
            error_logger:warning_msg("transaction register_node failed: ~p", [Reason]);
        _ ->
        ok
    end,
    {noreply, Timer}; 
```

[mnesia 交易中的副作用解释](http://www.erlang.org/doc/apps/mnesia/Mnesia_chap4.html "交易副作用的解释")

> Mnesia 在事务执行时动态设置和释放锁，因此执行带有事务副作用的代码是非常危险的。特别是，事务中的**接收语句**可能导致事务挂起并且永远不会返回的情况， **这反过来又会导致锁无法释放**。这种情况可能会使整个系统陷入停顿，因为在其他进程或其他节点上执行的其他事务被迫等待有缺陷的事务。

# javascript - 在 chrome api 调用之外携带变量

> ID：13577256
> 
> 赞同：0
> 
> 时间：2012-11-27T04:08:09.287
> 
> 标签：javascript, google-chrome-extension

> **可能重复：**
> [调用 chrome.tabs.query 后，结果不可用](https://stackoverflow.com/questions/11688171/after-calling-chrome-tabs-query-the-results-are-not-available)

免责声明：我是一个完整的 javascript n00b，要温柔。

popup.js：

```
var foo = '';
chrome.tabs.query({'active': true, 'windowId': chrome.windows.WINDOW_ID_CURRENT},
   function(tabs){
      foo = tabs[0].url;
   }
);

document.getElementById("bar").innerHTML=foo; 
```

这不起作用，因为 foo 未定义。我知道通过将 document.getElementById 移动到它工作的函数中，但关键是我希望 foo 引用我稍后可以在我的 popup.js 中使用的变量

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T04:32:35.473

我从来没有使用过 Chrome api ......但是看起来你的问题是基本的 JavaScript。

您需要在回调中设置 #bar 的 innerHTML：

```
chrome.tabs.query({'active': true, 'windowId': chrome.windows.WINDOW_ID_CURRENT},
   function(tabs){
      document.getElementById("bar").innerHTML = tabs[0].url;
   }
); 
```

如果您不这样做，以下是您提供的示例代码中发生的情况：

```
// 1\. Create foo.
var foo = '';

// 2\. Call the query function on chrome.tabs
chrome.tabs.query({'active': true, 'windowId': chrome.windows.WINDOW_ID_CURRENT},
   function(tabs){
      // 4\. Set foo after query is done doing whatever.
      foo = tabs[0].url;
   }
);

// 3\. Set the html of the element with id="bar" to what's in foo (which is empty right now)
document.getElementById("bar").innerHTML=foo; 
```

编辑：我假设 chrome.tabs.query 是一个异步调用，这就是它有回调的原因。如果是同步的，请忽略我的回答。

# binary-tree - 二叉搜索树路径

> ID：13577265
> 
> 赞同：0
> 
> 时间：2012-11-27T04:09:09.507
> 
> 标签：binary-tree, binary-search-tree, search-path

在二叉搜索树中，如果您沿着某个搜索路径，哪些键被认为在路径的左侧，哪些在右侧？

例如，如果我的树是：

```
 25
      12             30
   10    15       28   32
       14  20 
```

假设我当前的搜索路径是 20->12->15->20。

1) 10 和 14 是否都被认为在此搜索路径的左侧，还是只有 10？

2) 搜索路径右侧是否考虑了所有 3 个数字 30、28 和 32？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T04:17:52.853

假设您的意思是 path `25-12-15-20`，我会说两者`10` *并且* `14`都离开了这条路径。那是因为为了找到它们中的任何一个，您必须回溯树（到`15`或`12`）并在路径向右的地方选择左分支。

三个数字 和 的`30`处理`28`相同`32`。由于您必须回溯到`25`然后向右而不是向左走，因此可以考虑将它们放在该路径的右侧：

![在此处输入图像描述](../Images/bfdf5161894154e3d06ab203d39af071.png)

# c# - 选择正确的框架

> ID：13577267
> 
> 赞同：3
> 
> 时间：2012-11-27T04:09:18.620
> 
> 标签：c#, asp.net, sql-server, entity-framework

我将构建一个应用程序，但我不确定要使用什么框架。在我工作过的地方，他们使用 Ntiers 和 codesmith，nettiers 是免费的，但不是 codesmith。我发现了实体框架，但我也读到使用它的方法是使用一种称为“存储库模式”的东西，但对使用它有很多疑问。我没有很大的预算，而且只有我自己，买不起一个昂贵的工具来自动创建我的类，更新、删除、创建功能并留下一些代码让我实现。所以我不确定要走什么路，我应该去实体框架（这是唯一一个免费的吗？），还是那里有其他我可以使用的东西，也许不是那么贵但可靠。

正如我所期望的那样，我真的很感激一个很好的建议，最终这个应用程序会越来越大，并且希望易于维护。

PS：如果那是我最好的选择，我会选择实体框架和存储库模式。

使用 C#、Asp.net 和 MSSQL 2008。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T04:39:21.563

[具有代码优先和自动迁移](http://msdn.microsoft.com/en-US/data/jj554735)的实体框架是您可以使用的最简单的 ORM 之一。它很灵活，在 Microsoft 堆栈中得到很好的支持，并且代码优先，这是开发数据库的最快方法之一。

首先使用实体​​框架代码，将数据模型定义为普通的 C# 类。这将对应于 Product 表：

```
public Product {

   public int Id { get; set; }
   public string Name { get; set; }
} 
```

创建数据库上下文。

```
public MyDbContext : DbContext {

    public DbSet<Product> Products { get; set; }
} 
```

将连接字符串添加到 Web.config，并在包管理器控制台中运行命令：

```
>Enable-Migrations –EnableAutomaticMigrations
>Update-Database 
```

现在您有了一个包含 Products 表的功能数据库。当您对类进行更改时，只需再次运行 Update-Database，它就会为您迁移架构。

添加新产品：

```
using (var db = new MyDbContex()
{
    Product product = new Product() { Id = 1, Name = "Tablet" };

    db.Products.Add(product);

    db.SaveChanges();
} 
```

查询您的数据变得如此简单：

```
using (var db = new MyDbContex()
{
    // get product with id == 1
    Product product = db.Products.Single(p => p.Id == 1);
} 
```

至于存储库模式，它只是一种[设计模式](http://en.wikipedia.org/wiki/Software_design_pattern)。[存储库模式](https://stackoverflow.com/questions/3175/repository-pattern-tutorial-in-c-sharp)有很多不同的变体，但它实际上是将数据存储与数据访问层分开。这使得单元测试更容易，而不必依赖于存在的外部数据库。

从您的评论中编辑：有几种使用 EF 和存储过程的方法。请参阅[Entity Framework Code First 是否支持存储过程？](https://stackoverflow.com/questions/4845246/does-entity-framework-code-first-support-stored-procedures)和[使用存储过程插入数据](http://blogs.msdn.com/b/wriju/archive/2011/05/14/code-first-4-1-using-stored-procedure-to-insert-data.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T04:14:36.647

您可以选择的另一个列表是：

数据层：Ibatis.Net 或 NHibernate（大多数情况下我都使用了，NHibernate 用于 CURD，IBatis.NET 用于必要的查询，例如调用 SP，动态查询）。

Spring.Net：IoC 助手

Asp.NET MVC：MVC 框架。

好处是：IBatis、NHibernate 和 Spring.Net 与 Java 版本非常相似，所以你可以找到很多关于它们的文档。

我可以说的是，具有良好ORM（EF，Nhibernate或Ibatis）的3层是复杂项目的最佳实践，更易于维护和协作。如果你的项目很简单，LINQ + WebForm 可以在几个小时内帮助你，你完全可以放弃 MVC。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-27T04:19:59.377

我认为这完全取决于您作为开发人员的位置以及您想做什么。就成本而言，Visual Studio 中的 Entity Framework 是免费的。Fluent NHibernate 与 EF 非常相似，它也适用于 Oracle、MySql 和 MSSQL，[您可以](https://www.nuget.org/packages/FluentNHibernate "nu 获得流利的 nhibernate")通过 nu get 轻松获得它。

存储库模式只是获取集合的模式。

我想说两个 ORM 都有其优点和缺点。

# ios - ios 6.0.1下iPodMusicPlayer的bug？

> ID：13577271
> 
> 赞同：2
> 
> 时间：2012-11-27T04:10:28.590
> 
> 标签：ios, audio

在播放使用 AVAudioPlayer 的本地“beep.caf”文件之前，我使用 [MPMusicPlayerController iPodMusicPlayer] 设置 ipod 音量。奇怪的事情发生了，如果我在运行以下代码之前杀死系统 ipod 应用程序，beep.caf 只播放了 1~2 秒，这应该是 30 秒的音频。像这样的代码：

```
self.ipodPlayer = [MPMusicPlayerController ipodMusicPlayer];
self.ipodPlayer.volumn = .5;

NSURL *fileURL = [[NSURL alloc] initFileURLWithPath: fileName];

NSError *err = nil;
self.trackPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:fileURL error:&err];
if(err)
{
     //LOG ERR
}
else
{
     if ([trackPlayer prepareToPlay]) {
          if (![trackPlayer play]) {
               //ALog(@"Error:play sound failed.");
          }
     }
     else
     {
          //ALog(@"Error:prepare play sound failed.");
     };
} 
```

此代码在 iOS4.3 下运行良好。我怀疑 iPodMusicPlayer 在 iOS 6.0.1 下初始化时是否有什么特别之处。

我需要在播放本地音频之前设置 ipodPlayer 的音量，我该如何正确设置？

# android - 如何从 Android 中的 DatePickerDialog 返回日期值？

> ID：13577272
> 
> 赞同：6
> 
> 时间：2012-11-27T04:10:29.443
> 
> 标签：android, datepicker

我是安卓新手。我使用以下指南在 android 中创建了一个日期选择器。[http://developer.android.com/guide/topics/ui/controls/pickers.html](http://developer.android.com/guide/topics/ui/controls/pickers.html)

```
 public  class DatePickerFragment extends DialogFragment
  implements DatePickerDialog.OnDateSetListener {

StringBuilder sb = new StringBuilder();
public static String date;
    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
    // Use the current date as the default date in the picker
    final Calendar c = Calendar.getInstance();
    int year = c.get(Calendar.YEAR);
    int month = c.get(Calendar.MONTH);
    int day = c.get(Calendar.DAY_OF_MONTH);

   // Create a new instance of DatePickerDialog and return it
   return new DatePickerDialog(getActivity(), this, year, month, day);
   }

  public void onDateSet(DatePicker view, int year, int month, int day) {
   // Do something with the date chosen by the user

sb.append(year);
sb.append('-');
sb.append(month+1);
sb.append('-');
sb.append(day);

date = sb.toString();
System.out.println("The date is "+date);

    } 
```

我需要将此日期值 (date = sb.toString()) 返回到我的 MainActivity 。由于 onDateSet 方法无效，我该怎么办？

附加信息 - DatePickerDialog 在 MainActivity 类中触发，但不是单键单击。一个按钮旁边有几个过程发生，日期选择器只有在满足特定条件时才会触发。我也不想显示日期值。只是希望它返回以进行进一步处理。

感谢任何形式的指导

更改了 onDataset 方法和 justshow()

```
public void onDateSet(DatePicker view, int year, int month, int day) { 
```

// 对用户选择的日期做一些事情

```
 sb.append(year);
    sb.append('-');
    sb.append(month+1);
    sb.append('-');
    sb.append(day);

    date = sb.toString();
    MainActivity.newdate=sb.toString();
    System.out.println("The date is "+MainActivity.newdate); 
```

} 公共无效 justShow(){

```
System.out.println("The date is "+MainActivity.newdate); 
```

}

这是主要的相关部分（在第一次回复中建议进行更改后）

```
 DateToken mydate=new DateToken();
    String test=dayvals.get(0);
    DialogFragment df=new DatePickerFragment();

    if(test.equalsIgnoreCase("day")){

        df.show(getSupportFragmentManager(), "DatePik");

    }

    System.out.println("Date is on Main"+newdate);

  DatePickerFragment dpf=new DatePickerFragment();
  dpf.justShow(); 
```

newdate 是静态 String ，但仍输出 null。在 MainActivity 和 justShow 方法中。但在 onDataSet 方法中日期输出正确

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T04:20:34.600

*   您可以在 DatePickerFragment 中创建一个公共方法来返回字符串。
*   您可以在 MainActivity 中有一个此类写入的静态变量。
*   您可以使用 SharedPreferences 来存储字符串。

我会选择第一个选项，如果您的应用程序是基本的，这是最简单的。

如您所见，有多种方法可以解决此问题，因此查看用户如何与您的应用程序交互以及何时需要该日期非常重要。如果您在 MainActivity 中持有对 Fragment 的引用并且您不需要尽快获得数据，则公共返回方法很好。如果您需要在用户选择日期后立即更改字符串，则静态变量很好。最后一种方法很浪费，最不推荐，但没有做静态的“魔术”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-03-19T16:35:01.617

尽管这是在 4 年前提出的，最后一次是在 1 年前提出的（正如我的回答）。我希望下面的帮助。

```
package com.example.fragments;

import java.util.Calendar;

import android.app.DatePickerDialog;
import android.app.Dialog;
import android.content.Context;
import android.os.Bundle;
import android.support.annotation.NonNull;
import android.support.v4.app.DialogFragment;
import android.widget.DatePicker;

/**
 * Date picker fragment bit 18/03/2017.
 */

public class DatePickerFragment extends DialogFragment implements DatePickerDialog.OnDateSetListener {

  private OnDateSetListener callbackListener;

  /**
   * An interface containing onDateSet() method signature.
   * Container Activity must implement this interface.
   */
  public interface OnDateSetListener {
    void onDateSet(DatePicker view, int year, int month, int dayOfMonth);
  }

  /* (non-Javadoc)
   * @see android.app.DialogFragment#onAttach(android.app.Activity)
   */
  @Override
  public void onAttach(Context activity) {
    super.onAttach(activity);

    try {
      callbackListener = (OnDateSetListener) activity;

    } catch (ClassCastException e) {
      throw new ClassCastException(activity.toString() + " must implement OnDateSetListener.");
    }
  }

  @NonNull
  @Override
  public Dialog onCreateDialog(Bundle savedInstanceState) {
    // Use the current date as the default date in the picker
    final Calendar calendar = Calendar.getInstance(getResources().getConfiguration().locale);
    int year = calendar.get(Calendar.YEAR);
    int month = calendar.get(Calendar.MONTH);
    int day = calendar.get(Calendar.DAY_OF_MONTH);

    // Create a new instance of DatePickerDialog and return it
    return new DatePickerDialog(getActivity(), this, year, month, day);
  }

  @Override
  public void onDateSet(DatePicker view, int year, int month, int dayOfMonth) {
    if (callbackListener != null) {
      callbackListener.onDateSet(view, year, month, dayOfMonth);
    }
  }
} 
```

然后在 MainActivity 中执行下一步

```
 public class MainActivity extends AppCompatActivity implements View.OnClickListener, DatePickerFragment.OnDateSetListener {

  private EditText edittextDate;

  private Locale locale;

  private DialogFragment datePicker;

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    locale = getResources().getConfiguration().locale;
    datePicker = new DatePickerFragment();

    edittextDate = (EditText) findViewById(R.id.edittextDate);
    edittextDate.setOnClickListener(this);
  }

  @Override
  public void onClick(View v) {
    switch (v.getId()) {

      case R.id.edittextDate: {
        datePicker.show(getSupportFragmentManager(), "datePicker");
        break;
      }
    }
  }

  @Override
  public void onDateSet(DatePicker view, int year, int month, int dayOfMonth) {
    final Calendar calendar = Calendar.getInstance(locale);
    final DateFormat dateFormat = DateFormat.getDateInstance(DateFormat.MEDIUM, locale);

    if (getCurrentFocus() != null) {
      switch (getCurrentFocus().getId()) {

        case R.id.edittextDate:
          calendar.set(year, month, dayOfMonth);
          edittextDate.setText(dateFormat.format(calendar.getTime()));
          break;
      }
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-05T15:55:56.273

在您的活动中实现一个侦听器接口并将其传递给 DatePickerFragment。然后通过调用它的方法来触发监听器。它在这里描述：http: [//developer.android.com/guide/topics/ui/dialogs.html#PassingEvents](http://developer.android.com/guide/topics/ui/dialogs.html#PassingEvents)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-27T05:54:02.060

Here is how you can get a Date from a DatePickerDialog:

```
private DatePickerDialog.OnDateSetListener mDateSetListener = new DatePickerDialog.OnDateSetListener() {
    // onDateSet method
    public void onDateSet(DatePicker view, int year, int monthOfYear, int dayOfMonth) {
        myday = dayOfMonth;
        mymonth = monthOfYear + 1;
        myyear = year;
        date = String.valueOf(myday) + getString(R.string.iphan) + String.valueOf(mymonth) + getString(R.string.iphan) + String.valueOf(myyear);

        Log.i(TAG,"Date: "+date);
    } 
}; // DatePickerDialog.OnDateSetListener close

@Override
protected Dialog onCreateDialog(int id) {

    switch (id) {
    case DATE_DIALOG_IDdob:
        // Current Calendar Date
    final Calendar c = Calendar.getInstance();
        int year = c.get(Calendar.YEAR);
        int month = c.get(Calendar.MONTH);
        int day = c.get(Calendar.DAY_OF_MONTH);
    return new DatePickerDialog(this, mDateSetListener, year, month, day);
    }
    return null;
} // onCreateDialog() close 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T04:49:03.680

使用以下代码在 onDateSet() 方法中返回 Date 类型的日期

```
Date date = new Date(int year, int month, int day); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-17T10:16:30.337

在从 DatePickerDialog 类扩展的类上声明一个公共字符串变量，并将所选日期设置为 onDataSet 方法内的该公共字符串变量，以便您可以通过您创建的 DatePickerDialog 的实例从 MainActivity 访问

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-10-01T11:42:33.260

```
private void openCalendar() {
DatePickerDialog dialog = new DatePickerDialog(getContext(), (view, year, month, dayOfMonth) -> {

    date = getDateString(year, month, dayOfMonth);

}, mYear, mMonth, mDay);
dialog.show(); 
```

}

```
private String getDateString(int year, int mMonth, int mDay) {
Calendar calendar = Calendar.getInstance();
calendar.set(year, mMonth, mDay);
SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd");
return dateFormat.format(calendar.getTime()); 
```

}

# android - android处理TextView上的滚动和点击事件

> ID：13577277
> 
> 赞同：1
> 
> 时间：2012-11-27T04:11:11.077
> 
> 标签：android, textview, android-event, android-scroll

我的安卓应用有问题。我正在使用带有垂直滚动条的简单 Textview 来显示歌曲中的歌词。问题是在我的活动中，我在同一个 Textview 上设置了 Onclick 事件。因此，当我在 textview 中滚动歌词时，当我从屏幕上松开手指时，活动会注册一个单击事件。我不希望滚动后发生 onClick 事件。

这是我到目前为止所做的，但它并不能很好地工作，因为我使用的 onLongClick 事件不够精确：

```
public class NowPlayingActivity extends Activity implements ckListener,OnLongClickListener
{
   private TextView lyrics;
   private static final String TAG_LYRICS = "LYRICS";   
   @Override
   protected void onCreate(Bundle savedInstanceState)
   {
       this.lyrics = (TextView) this.findViewById(R.id.now_playing_Lyrics);
       this.lyrics.setOnClickListener(this);
       this.lyrics.setMovementMethod(new ScrollingMovementMethod());
       this.lyrics.setOnLongClickListener(this);
}
public void onClick(View v)
{
    String tag = (String) v.getTag();
    if (tag.equals(NowPlayingActivity.TAG_LYRICS))
    {
        if (this.scrolled) //this way, the click action doesnt occur after a scroll
        {
            this.scrolled = false;
        }
        else
        {
            this.scrolled = false;
            this.artwork.setVisibility(View.VISIBLE);
            this.lyrics.setVisibility(View.GONE);
        }
    }
    public boolean onLongClick(View arg0)
    {
        this.scrolled =  true;

        return this.scrolled;
    } 
```

我该怎么做才能使它更“准确”（所以我不必进行 longClick 即可工作）

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T04:37:14.640

将您的文本视图放入滚动视图中。

```
<ScrollView
        android:id="@+id/content_scroll"
        android:layout_width="fill_parent"
        android:layout_height="match_parent"
        android:layout_margin="7dip"
        android:scrollbars="none" >

        <TextView
            android:id="@+id/fileContent"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="5dip" />
    </ScrollView> 
```

然后它应该可以正常工作。希望能帮助到你

# imagemagick - 让 ImageMagick 转换为不写出额外信息

> ID：13577280
> 
> 赞同：6
> 
> 时间：2012-11-27T04:11:30.420
> 
> 标签：imagemagick

我正在使用 ImageMagick 的转换来调整一些 .png 文件的大小，问题是转换似乎正在向 .png 写入一些额外的信息：

```
EXtdate:create 2012-11-26T19:50:31-08:001 
```

问题是，如果源图像没有更改，则会生成一个与旧图像相同的新的缩小图像，但它有这个额外的时间/日期信息，它会导致 git 认为所有文件都已更改。

有没有办法让转换不写出这个附加元信息，以便后续调整大小不会显示文件已更改，源图像没有更改？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-15T02:03:29.157

您正在搜索 -strip 参数，即：

```
convert infile.png -resize 100x100 -strip outfile.png 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-15T16:40:16.020

我发现这个问题的解决方案是添加：

```
+set date:create +set date:modify 
```

-strip 选项没有删除嵌入的数据，但确实如此。

# cucumber - Cucumber 运行所有测试忽略“cucumber.yml”

> ID：13577282
> 
> 赞同：2
> 
> 时间：2012-11-27T04:11:44.073
> 
> 标签：cucumber

我很确定我知道根本原因（而不是如何解决它），但背景是这样的：我设置黄瓜来测试项目的功能，并在功能文件中使用标签。

在 cucumber.yml 中：

```
# config/cucumber.yml
## YAML Template
---
default: --tags ~@wip,~@manual # previously I only used one negative tag in the default profile.
dev: --tags @wip,@manual 
```

我是否正确，双重否定会导致所有测试在默认配置文件上运行？如果是这样，我如何更改默认配置文件以执行所有测试，但带有负面标签的测试？如果不是，问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T15:54:07.967

Cucumber 邮件列表中的这个线程有答案：[https ://groups.google.com/forum/?fromgroups=#!topic/cukes/TH-418eRpRQ](https://groups.google.com/forum/?fromgroups=#!topic/cukes/TH-418eRpRQ)

正如 Aslak Hellesoy 在那里提到的那样，它是“基本布尔逻辑”；-)

更改`default: --tags ~@wip,~@manual`为`default: --tags ~@wip --tags ~@manual`排除具有这两个标签的功能。

# git - Git删除推送的提交

> ID：13577283
> 
> 赞同：5
> 
> 时间：2012-11-27T04:11:46.767
> 
> 标签：git, github

我在我的项目中使用 git 存储库。我不小心推送了 2 个我不应该提交的提交。在这两者之间，有人做出了承诺。是否可以删除我推送的提交，或者我必须删除我的代码更改并将其作为新提交推送，因为有人已经提交了它。

Git主分支：

提交A //由我

提交 B // 由我

提交 C // 由某人

现在我必须删除提交 A 和 B 离开提交 C。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-27T12:05:59.510

```
git reset --hard HEAD~1 
```

其中 HEAD~1 表示 head 之前的提交。

或者找到您想要的提交的提交 ID（查看 git log 的输出），然后执行以下操作：

```
git reset --hard <sha1-commit-id> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T06:59:41.043

您必须[还原](http://www.kernel.org/pub/software/scm/git/docs/git-revert.html)这些提交。

从技术上讲，它的作用是删除这些更改并进行新的提交，然后撤消它们。

现在，恢复它们将使它们保留在历史记录中，但通常没关系。如果这完全不可接受，那么请查看过滤器分支和强制推送之类的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-05T06:00:05.720

```
git rebase --onto master~3 master~1 master 
```

You can see help by command **`git help rebase`**, and then **--onto** option, or you see it [here](http://git-scm.com/docs/git-rebase). The doc has an example as some as your situation.

# emacs - 如何在新框架中运行 gdb-many-windows？

> ID：13577286
> 
> 赞同：5
> 
> 时间：2012-11-27T04:12:55.460
> 
> 标签：emacs, gdb

我知道我可以打开一个新框架并且`M+x``gdb`. 但只是在一个新框架`M+x``gdb`中执行并`gdb`执行会好得多。

`gdb-many-windows`当我运行它时破坏原始的Windows布局，当我杀死它时它无法恢复布局。所以我想在一个新框架中运行它并关闭那个框架。

**更新：**我使用`(setq gdb-many-windows t)`. 如果我调用`gdb`，它会`gdb-many-windows`自动使用布局。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T07:19:21.580

`gdb`这是一个在新创建的框架中调用多个窗口的简单函数：

```
(defun my-gdb-other-frame ()
  (interactive)
  (select-frame (make-frame))
  (call-interactively 'gdb)) 
```

* * *

我用来解决窗口布局问题的另一种方法`gdb-many-windows`是将不同的窗口配置保存到寄存器中。FWIW，这是我的工作流程：

1.  `C-x``r``w``a`（保存窗口配置注册`a`）

2.  `M-x``gdb``RET`

3.  `M-x``gdb-many-windows``RET`

4.  `C-x``r``w``b`（保存新窗口配置注册`b`）

之后，我可以使用`C-x``r``j``a`和`C-x``r``j``b`

# php - 如何在部署在heroku上的php应用程序上安装梨邮件包？

> ID：13577287
> 
> 赞同：1
> 
> 时间：2012-11-27T04:13:13.183
> 
> 标签：php, heroku, pear

我有一个部署在 Heroku 上的 php 应用程序。如何让 PEAR 邮件包适用于我的应用程序？我看到两个主要选项：1）在 heroku 上安装 pear 邮件包 2）在部署之前将包捆绑到我的应用程序中

不幸的是，我更像是一个铁路人，所以不知道如何做这些（或者哪个是正确的）。

谢谢，安东尼

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T22:57:24.837

好的，我终于自己弄清楚了。这是我所做的：

1.你需要使用一个自定义的 buildpack 来安装 pear 包 mail 和 Net_SMTP。您可以通过运行以下命令来使用我创建的那个：

```
heroku config:add BUILDPACK_URL=https://github.com/antonyevans/heroku-buildpack-php.git 
```

关键的变化是增加了以下几行：

```
php/bin/pear install mail
php/bin/pear install Net_SMTP 
```

进入 bin/编译。

2.然后你需要告诉你的应用程序加载邮件包：

```
require_once 'Mail.php'; 
```

3.最后heroku阻塞了邮件端口，所以你需要配置使用外部邮件服务器。例如，如果您添加了 SendGrid 插件（'heroku addons:add sendgrid:starter'），那么您可以使用以下内容：

```
$wgSMTP = array(
    'host' => 'tls://smtp.sendgrid.net',
    'IDHost' => 'heroku.com',
    'port' => 587,
    'username' => getenv("SENDGRID_USERNAME"), 
    'password' => getenv("SENDGRID_PASSWORD"),
    'auth' => true
 ); 
```

# asp.net - SimpleMembershipProvider 未将表添加到我的数据库

> ID：13577288
> 
> 赞同：0
> 
> 时间：2012-11-27T04:13:21.607
> 
> 标签：asp.net, entity-framework, asp.net-mvc-4, ef-code-first, simplemembership

我有一个标准的 ASP.NET MVC4 应用程序，我正在使用 EF Code First 构建 DAL。目前大约有 20-30 个模型，我正处于想要集成用户和角色的地步。我对此进行了大量研究，但似乎仍然无法使其正常工作。这是我现在所拥有的：

在我的数据库初始化类中（每次更改模型时都会调用）我用一堆数据播种它，然后调用它：

```
public class DbInit : DropCreateDatabaseIfModelChanges<TrackerContext>
{
    protected override void Seed(TrackerContext context)
    {
      ...seed stuff and save it...
      WebSecurity.InitializeDatabaseConnection("TrackerContext", "User", "Id", "UserName", autoCreateTables: true);
    }
} 
```

通过调试它不会抛出任何错误，我可以确认它正在命中这行代码。我的用户模型如下所示：

```
public class User
{
    public int Id { get; set; }
    public string UserName { get; set; }
    public string Password { get; set; }
    public string Email { get; set; }
    public PasswordQuestion PasswordQuestion{ get; set; }
    public string PasswordAnswer { get; set; }
    public string Type { get; set; }
} 
```

从我读过的所有内容来看，我认为这应该是我需要做的所有事情，但我有两个问题：

1.  没有加载成员资格表

2.  即使我引用 WebMatrix.WebData dll，我的配置似乎也抛出了错误

这是配置部分：

```
<roleManager enabled="true" defaultProvider="SimpleRoleProvider">
  <providers>
    <clear/>
    <add name="SimpleRoleProvider" type="WebMatrix.WebData.SimpleRoleProvider, WebMatrix.WebData"/>
  </providers>
</roleManager>
<membership defaultProvider="SimpleMembershipProvider">
  <providers>
    <clear/>
    <add name="SimpleMembershipProvider" type="WebMatrix.WebData.SimpleMembershipProvider, WebMatrix.WebData" />
  </providers>
</membership> 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T08:16:43.950

1）你检查你的ConnectionString了吗？应该是这样的：

```
 <connectionStrings>
    <add name="DefaultConnection" connectionString="data source=SERVER;initial catalog=DATABASE;user id=USER;password=PASSWORD;" providerName="System.Data.SqlClient" />
</connectionStrings> 
```

此外，您的配置中也应该有这个：

```
 <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />

  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework" />
  </entityFramework> 
```

2）检查您的参考资料。`System.Web.Webpages`应该在那里并且`CopyLocal`应该设置为true。然后检查您的 .NET Framework 版本（4.0，无客户端版本）

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-05T19:51:43.317

据我所知，你错过了

```
public DbSet<User> User{ get; set; } 
```

在您的上下文类中。您必须对要`Migrations`在数据库中为您创建的每个表执行此操作。

# textmate - 如何将 Textmate 升级到版本 2

> ID：13577290
> 
> 赞同：0
> 
> 时间：2012-11-27T04:13:35.097
> 
> 标签：textmate, textmate2

我有 Textmate（我认为是 1.5）并认为我会查看新版本 2。我无法在任何地方找到有关如何升级/获取新版本的说明！

我敢肯定它一定很明显，但我就是不知道怎么做。除非我必须从 GitHub 上的源代码编译？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T04:34:36.560

在 textmate GitHub 页面的“构建”部分，有一个下载预构建二进制文件的链接：

GitHub页面：[https ://github.com/textmate/textmate/downloads](https://github.com/textmate/textmate/downloads)

链接到预构建的二进制文件：[https ://github.com/textmate/textmate/downloads](https://github.com/textmate/textmate/downloads)

下载并解压您想要的任何版本，您应该能够启动“.app”文件。

# c# - 泛型问题并使用运行时类型，而不是（通用）T

> ID：13577291
> 
> 赞同：4
> 
> 时间：2012-11-27T04:13:37.717
> 
> 标签：c#, generics

为了尽可能容易地解决这个问题，我正在尝试实现一个通用池系统，只要它们实现了就可以处理任意数量的具体类`IBaseComponent`。

因此，在我管理池的班级中，我有一个池字典：

```
Dictionary<Type, Pool<IBaseComponent>> pools; 
```

因为这将允许我创建尽可能多的实现类`IBaseComponent`（可以这么说，这是一个非常“低级”的接口 - 所以实现它的类不会兼容得太远），并且可以有一个每个人的游泳池。

现在，我遇到的问题是第一次将 an 加载`IBaseComponent`到池中，可以说是作为模板。

这个模板对象是从 XML 加载的，而不是代码，所以我在编译时没有它的实际*类*，只有在运行时（它在 XML 定义中定义，我通过反射获取正式的类型）。这一切都很好而且很花哨，但正如我们所知，泛型依赖于编译时安全。

因此，使用一些反射技巧，我有以下内容：

```
var type = typeof(MyChildComponent);
var genericType = typeof(Pool<>);
var specificType = genericType.MakeGenericType(type);
var pool = Activator.CreateInstance(specificType );

pools.Add(T, pool as Pool<IBaseComponent>); 
```

假设一些类：

```
public class MyChildComponent : IBaseComponent 
```

当我添加到池字典时，问题出现在第一个块的最后一行。实例化池的强制转换`Pool<IBaseComponent>`失败，导致将 null 插入到字典中。

我对你们这些好人的问题是：有什么合理的方法可以解决这个问题吗？任何*可能的*方式，甚至？

如果我需要通过一些外部方法（XML、TXT 等）为池的至少第一个模板对象、池可以用于的每个可能的具体类加载元素，*而*我只能访问顶级接口和类的正式类型（都在外部定义文件中定义），我可以在这里做什么吗？

或者这根本不可能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T04:45:14.290

您使用的是 .Net 4+ 吗？如果是这样，您可以创建一个接口`IPool<out T>`。使`out`泛型参数协变，这意味着它将接受具有泛型参数 T 或派生自 T 的任何版本的接口。

出于某种原因，协/逆变仅适用于接口和委托，这就是您需要 IPool 的原因。

您的字典将变为：

```
Dictionary<Type, IPool<IBaseComponent>>() pools; 
```

我在脑海中将它与反射结合起来有点麻烦，但我认为这应该可行。如果没有，请告诉我，我会花更多时间在我的测试代码上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T14:53:41.530

我正在玩弄的另一种选择是修改`Pool<T>`自己。

`Pool<T>`我将修改它以支持存储基于用于 T 的接口的任何兼容类，而不是只存储一种类型的（具体）类。

因此，`Pool<IBaseComponent>`将负责存储所有可能实现的类型`IBaseComponent`。

*在内部*，它会将所有内容存储为`IBaseComponent`，但会保留对每个具体类型的存储位置的引用（在由`Type`类型要复杂得多])

我没有提到的一件事是，它`IBaseComponent`公开了两点功能，这是我准备一个以“盲目”方式使用的组件所需要的（即：将调用这个池的工厂在编译时不知道什么类型它正在使用的组件，它只是根据 XML 中定义的内容加载它们，或者从附加了这些组件的现有对象复制），即：（`Deserialize`从 XML/JSON/whatever 构建组件）和`CopyInto(IBaseComponent other)`（构建组件通过从另一个组件复制）。

因此，这仍然存在`Pool`无法将 动态`IBaseComponent`转换为调用者请求的`Type`问题，但这无关紧要。如果调用者真的提前知道*硬编译时类型，它可以进行强制转换。*如果调用者不这样做，那么除了无论如何公开的访问方法之外，它将无法做任何事情`IBaseComponent`。

重要的是`IBaseComponent`返回`Pool`是正确的类型，这将处理。

简而言之：我将删除一些现代泛型（内部 Pool 仅适用于传入的类型，在外部它将只允许 T 成为接口），并替换它会很好的老式`Type`传递。必须在内部使用反射来实例化类型池，但我认为可以期望初始化或调整池大小将是一个非常昂贵的操作。

# python - 仅在linux中没有这样的文件或目录python（来自windows）

> ID：13577293
> 
> 赞同：0
> 
> 时间：2012-11-27T04:13:39.297
> 
> 标签：python

我在 Windows 和 Linux (Debian) 中的文件夹中具有完全相同的目录结构 - 脚本位于静态 + 数据输出文件夹中

为什么下面的代码在 Windows 中运行良好，但在 linux 中没有这样的文件或目录路径错误？

```
@app.route('/_getdataoutputfilelisting')
def getdataoutputfilelisting():
    listoffilesindataouput = getfiles('static/dataoutput')
    return jsonify(listoffiles = listoffilesindataouput) 

def getfiles(dirpath):
    a = [s for s in os.listdir(dirpath)
         if os.path.isfile(os.path.join(dirpath, s))]
    a.sort(key=lambda s: os.path.getmtime(os.path.join(dirpath, s)))
    a.reverse()
    return a 
```

有没有办法让它通用，以便它在两个操作系统中都可以工作？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T05:00:32.643

我会尝试将您传递的字符串更改为getfiles。

试试这个：

```
os.path.join(os.getcwd(),'static','dataoutput') 
```

我无法验证它是否适用于 Windows，但适用于 Linux；而`'static/dataoutput'`不会。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T05:07:52.020

Windows 和 Linux 有不同的路径分隔符。对于 Windows，部分路径由反斜杠 ( `\`) 分隔，而在 Linux 上则是正斜杠 ( `/`)。您可以`os.path.join('static', 'dataoutput')`按照@mcneo 的建议使用（即使没有`getcwd()`），也可以使用`os.path.sep`.

```
getfiles(os.path.join('static', 'dataoutput'))
# or...
getfiles('static' + os.path.sep + 'dataoutput') 
```

从技术上讲，您还可以检查平台并输入正确的斜线，但不建议这样做。我在这里添加它是为了更好地演示问题，但你应该使用`os.path`.

```
if sys.platform == 'win32':
  getfiles('static\\dataoutput')
else:
  getfiles('static/dataoutput') 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-27T04:56:01.027

这可能与 DOS 和 Unix 对待换行符和返回的方式不同有关。尝试`dos2unix`转换文件的工具。

```
SYNOPSIS
           dos2unix [options] [FILE ...] [-n INFILE OUTFILE ...]
           unix2dos [options] [FILE ...] [-n INFILE OUTFILE ...] 
```

# google-groups - Google 网上论坛成员资格

> ID：13577296
> 
> 赞同：1
> 
> 时间：2012-11-27T04:13:49.340
> 
> 标签：google-groups

我对新的 Google 群组有疑问。我需要新成员回答问题才能加入我的小组。如何在新的 Google 群组中提出会员问题？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T01:42:08.300

应该可以将 Google 群组权限设置为“仅限邀请”，然后编写一个网站脚本来询问用户问题，如果他们回答正确，则通过 Google Apps Provisioning API 将他们添加到群组中：

[https://developers.google.com/google-apps/provisioning/#adding_a_member_to_a_group](https://developers.google.com/google-apps/provisioning/#adding_a_member_to_a_group)

# security - 在 Symfony 2 中强制用户登录

> ID：13577297
> 
> 赞同：2
> 
> 时间：2012-11-27T04:14:02.397
> 
> 标签：security, symfony, configuration

每当我尝试删除`anonymous: ~`security.yml 中的配置时，系统最终都会返回错误 310：重定向循环。

这是目前的配置：

```
 firewalls:
    secured_area:
        pattern: ^/
        #anonymous: ~
        form_login:
            check_path: /login_check
            login_path: /login
        logout:
            path: /logout 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T04:32:16.403

试试这个：

```
firewalls:
    secured_area:
        pattern: ^/
        #anonymous: ~
        form_login:
            check_path: /login_check
            login_path: /login
        logout:
            path: /logout
    login_firewall:
        pattern:    ^/login$
        anonymous:  ~ 
```

请参阅文档[http://symfony.com/doc/current/book/security.html#book-security-common-pitfalls](http://symfony.com/doc/current/book/security.html#book-security-common-pitfalls)

**确保登录页面不安全**

此外，请确保登录页面不需要查看任何角色。例如，以下配置 - 需要所有 URL（包括 /login URL）的 ROLE_ADMIN 角色，将导致重定向循环：

```
access_control:
    - { path: ^/, roles: ROLE_ADMIN } 
```

删除 /login URL 上的访问控制可以解决问题：

```
access_control:
    - { path: ^/login, roles: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/, roles: ROLE_ADMIN } 
```

此外，如果您的防火墙不允许匿名用户，您需要创建一个允许匿名用户登录页面的特殊防火墙：

```
firewalls:
    login_firewall:
        pattern:    ^/login$
        anonymous:  ~
    secured_area:
        pattern:    ^/
        form_login: ~ 
```

# javascript - 带有元素 ID 的 Javascript 局部变量

> ID：13577298
> 
> 赞同：1
> 
> 时间：2012-11-27T04:14:13.760
> 
> 标签：javascript, javascript-events

我在 JS 中遇到了这个问题——这根本不是我的母语。我已经声明了一个全局变量`var divID = 0;`，它只是一个唯一的数字。我的 HTML 页面上有一个按钮，当您单击它时，会向 DOM 添加一堆东西。

就像是：

```
function addStuff() {
  divID++;
  newDiv = document.createElement("div");
  newDiv.id = "div" + divID;
  // Create a bunch more nodes under newDiv
  // including some button with id: "newButton" + divID
  document.getElementById("someDiv").appendChild(newDiv);
  $("#newButton" + divID).click(function() {
    // do stuff with child nodes of "newDiv" + divID
  });
} 
```

我希望这是有道理的。基本上，每次`addStuff()`调用时，都会向 DOM 添加一块东西。如果用户反复点击它，相同的、相同的东西会被一遍又一遍地添加。

添加的每个内容块都有一些来自 的 ID 后缀`divID`，并且块中的某些元素具有影响同一块的其他元素的事件。每个块都应该是独立的。

但是，当用户单击按钮两次以添加两个块 - 一个具有 ID 后缀 1 和一个具有 ID 后缀 2 时，两个块的事件总是会影响最近添加的块的子元素。

所以想象一下我有 10 块东西。应该独立的所有块的所有事件实际上影响最后一个块，而不是它们所在的块。

我知道当我在一个循环中处理线程并且迭代变量在线程主体中扮演一些角色时，在 C# 中会发生这种事情：

```
for (int i = 0; i < 10; i++) {
  new Thread(new ThreadStart(delegate() { Console.WriteLine(i); })).Start();
} 
```

会产生意想不到的结果 - 大多数是 9 而不是 0 到 9，但是：

```
for (int i = 0; i < 10; i++) {
  int j = i;
  new Thread(new ThreadStart(delegate() { Console.WriteLine(j); })).Start();
} 
```

会正常工作。

我尝试了类似的东西。在我的 Javascript 代码中，我写道：

```
divID++;
localDivID = divID; 
```

而`localDivID`不是`divID`在 DOM 中设置内容时使用。但这完全没有效果。我仍然无法引用带有我想要的 ID 后缀的元素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T04:17:01.090

您需要创建一个*局部*变量。
在函数内声明变量（使用`var`关键字）。

请注意，Javascript 没有块作用域；您不能在循环中执行此操作。

# python - 转换为 PIL 后，无法从 OpenCV 图像中解码 QR 码

> ID：13577302
> 
> 赞同：1
> 
> 时间：2012-11-27T04:14:38.513
> 
> 标签：python, opencv, python-imaging-library, zbar

我一直在使用 OpenCV 方法从我的相机中获取图像。我想使用 zbar 库从这些图像中解码 QR 码，但是在我将图像转换为 PIL 以由 zbar 处理之后，解码似乎不起作用。

```
import cv2.cv as cv
import zbar
from PIL import Image

cv.NamedWindow("camera", 1)

capture = cv.CaptureFromCAM(0)

while True:
    img = cv.QueryFrame(capture)
    cv.ShowImage("camera", img)
    if cv.WaitKey(10) == 27:
        break

    # create a reader
    scanner = zbar.ImageScanner()

    # configure the reader
    scanner.parse_config('enable')

    # obtain image data
    pil = Image.fromstring("L", cv.GetSize(img), img.tostring())
    width, height = pil.size
    raw = pil.tostring()

    # wrap image data
    image = zbar.Image(width, height, 'Y800', raw)

    # scan the image for barcodes
    scanner.scan(image)

    # extract results
    for symbol in image:
        # do something useful with results
        print 'decoded', symbol.type, 'symbol', '"%s"' % symbol.data

cv.DestroyAllWindows() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T23:26:25.807

您无需将 OpenCV 图像转换为 PIL 图像即可与 zbar 一起使用...您可以直接从 OpenCV 图像转到 zbar 并完全避免使用 PIL。

现在我不知道当图像源来自相机时你是如何做到这一点的，但是如果你从磁盘加载图像，你所要做的就是：

```
cv_img = cv.LoadImageM(image, cv.CV_LOAD_IMAGE_GRAYSCALE)
width = cv_img.width
height = cv_img.height
raw = cv_img.tostring()

# wrap image data
image = zbar.Image(width, height, 'Y800', raw)

# scan the image for barcodes
scanner.scan(image)

# extract results
for symbol in image:
    # do something useful with results
    print 'decoded', symbol.type, 'symbol', '"%s"' % symbol.data 
```

看来您基本上必须执行以下操作才能使其正常工作：

*   使用 LoadImageM 而不是 LoadImage
*   确保图像是灰度的，所以使用 cv.CV_LOAD_IMAGE_GRAYSCALE

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T14:51:01.027

如果你在 python 中工作，我建议你看看[SimpleCV](http://www.simplecv.org/)。您可以使用我们的条形码读取实现，也可以自己使用该库。[这是](https://github.com/ingenuitas/SimpleCV/blob/develop/SimpleCV/ImageClass.py#L4577)使用 zbar 提取条形码的来源。

# .htaccess - mod_rewrite 在大写目录上失败

> ID：13577303
> 
> 赞同：3
> 
> 时间：2012-11-27T04:14:59.830
> 
> 标签：.htaccess, mod-rewrite

我在 .htaccess 文件中有一个非常基本的 mod_rewrite 文件，我确信上次查看它时工作过，但现在它在 REQUEST_URI 的情况下做了一些奇怪的事情。它的预期目的是将子域重写到给定文件，将子域作为 bnurl 的 php var 传递。这是我的代码：

```
RewriteCond %{REQUEST_URI}= "RSDEV/location/" [NC]  
RewriteCond %{HTTP_HOST} .  
RewriteCond %{HTTP_HOST} !^www\. [NC]  
RewriteCond %{HTTP_HOST} ^([^.]+)\.mydomain\.co\.uk(:80)? [NC]  
RewriteRule ^RSDEV/location/$ RSDEV/newmain.php?bnurl=%1&accesstype=new [NC,L] 
```

现在，在我的网络浏览器中键入 joebloggs.mydomain.co.uk/RSDEV/location/ 会返回“在此服务器上找不到请求的 URL /RSDEV/location/”的响应，这是一个正确的语句，因为 /RSDEV/location / 不是真正的目录，但为什么它没有按预期重写为 RSDEV/newmain.php?bnurl=joebloggs&accesstype=new ？

现在，这里真正奇怪的是，如果我在浏览器中输入 joebloggs.mydomain.co.uk/rsdev/location/（注意 rsdev 现在是小写），它会按预期正确重写。脚本 newmain.php 在 dir RSDEV（大写）中，所以如果它会失败，我会预计它会以小写的 rsdev 反过来失败。

如您所见，我在每一行都有 [NC]。这是我的 mod_rewrite 代码失败还是其他一些神秘的服务器力量让我彻夜难眠？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T05:02:58.293

摆脱这条线：

```
RewriteCond %{REQUEST_URI}= "RSDEV/location/" [NC] 
```

已在重写规则的模式中进行检查。不仅如此， the`=`还连接到`%{REQUEST_URI}`变量，所以字符串以 a`=`结尾（它应该在模式旁边）。

# python - 查找字典期间的 Python 字典和循环混淆

> ID：13577305
> 
> 赞同：0
> 
> 时间：2012-11-27T04:15:13.147
> 
> 标签：python, django, algorithm, numpy, scipy

我从下面的代码得到的这个结果是错误的：

```
[
'199|4|11|GDSPV', 
'199|4|11|GDSPV|199|16|82|GDSPV', 
'199|4|11|GDSPV|199|16|82|GDSPV|205|16|82|GDSPV'
] 
```

**我希望结果与fr**列表相同，但将 email 替换为字典**d**的值。我完全不知道为什么这不能按预期工作？

```
fr = [
'7@comp1.COM|4|11|GDSPV',
'7@comp1.COM|16|82|GDSPV',
'13@comp1.COM|16|82|GDSPV'
]

d= {
'7@comp1.COM': '199',
'8@comp4.COM': '200',
'13@comp1.COM': '205'
}

col_list=[]
line_list=[]

for line in fr:
    columns = line.split("|")
    for col in columns:
        if col==columns[0]:
            col_list.append(d[col])
            continue
        col_list.append(col)
        #i = i + 1
    line_list.append("|".join(col_list))
print line_list 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T04:22:42.747

当您开始处理每一行时，您需要重置 col_list。即在`col_list=[]`之前拨打电话`for col in columns:`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T04:24:03.163

试试这个：

```
line_list=[]
for line in fr:
    cols = line.split('|')
    key = cols[0]
    cols[0]=d[key]
    line_list.append('|'.join(cols))

print line_list 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T04:38:09.360

你几乎在那里：

```
# col_list=[] you don't need this
line_list=[]

for line in fr:
    columns = line.split("|")
    looking_for = columns[0] # this is what we need to search
    if looking_for in d:
        # by default, iterating over a dictionary will return keys
        new_line = d[looking_for]+'|'+'|'.join(columns[1:])
        line_list.append(new_line)
print line_list 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T04:37:07.247

检查这个......在sample.py

```
fr = [
'7@comp1.COM|4|11|GDSPV',
'7@comp1.COM|16|82|GDSPV',
'13@comp1.COM|16|82|GDSPV'
]

d= {
'7@comp1.COM': '199',
'8@comp4.COM': '200',
'13@comp1.COM': '205'
}

col_list=[]
line_list=[]

for line in fr:
    columns = line.split("|")
    if d.has_key(columns[0]):
        col_list.append(d[columns[0]])
    else:
        col_list.append(columns[0])
    col_list.extend(columns[1:])
    line_list.append("|".join(col_list))

print line_list 
```

输出

```
D:\>python sample.py
['199|4|11|GDSPV', '199|4|11|GDSPV|199|16|82|GDSPV', '199|4|11|GDSPV|199|16|82|G
DSPV|205|16|82|GDSPV'] 
```

# python - python 2.7字符串格式到十进制作为舍入函数

> ID：13577306
> 
> 赞同：3
> 
> 时间：2012-11-27T04:15:25.290
> 
> 标签：python, string, format, rounding

我在字符串格式函数中遇到了一个我不明白的问题。请帮助解释为什么以及如何解决这个问题。谢谢。（python 2.7.3，linux2 上的 [GCC 4.6.3]，ubuntu 12.04 x86）

```
>>> import locale
>>> locale.format("%0.{0}f".format(2), 1.135, grouping=True)
'1.14'
>>> locale.format("%0.{0}f".format(2), 1.125, grouping=True)
'1.12'

>>> ("%0.2f")%(1.135)
'1.14'
>>> ("%0.2f")%(1.125)
'1.12' 
```

我需要格式结果来匹配 round() 函数

```
>>> round(1.135, 2)
1.14
>>> round(1.125, 2)
1.13 
```

谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T04:51:24.777

这是因为四舍五入不仅仅是将大于 5 的最后一位数字向上，同时截断小于 4 的数字，因为这种方法会增加四舍五入数字的预期平均值。

解决方案是使用[Bankers' Rounding](http://en.wikipedia.org/wiki/Rounding#Round_half_to_even)，这就是您在此处看到的。

# javascript - JQuery .css("color", "wanted_color") 不工作，提示颜色正确

> ID：13577308
> 
> 赞同：1
> 
> 时间：2012-11-27T04:15:49.610
> 
> 标签：javascript, jquery, css

这表现得很奇怪，我不知道为什么。我正在设置我的 div 的字体颜色，但它不起作用。设置颜色后，我会提醒它正确提醒。它根本不显示颜色变化。

```
$("div.page").each(function() {
    if (!isNaN(parseFloat(this.id)) && isFinite(this.id) && this.id != page) {
        $(this).mouseover(function() {
            $(this).css("color", "blue");
            alert($(this).css("color"));
        });
    }
}); 
```

这是我的测试站点的链接：http: [//az-web.info/repository/](http://az-web.info/repository/)

将鼠标悬停在“2”（页面选择器上的“1”下方），您会看到它没有改变，但会正确发出警报。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T04:18:33.040

您需要查看 HTML 的**结构**。悬停的 div 包含`<font>`元素，这些元素具有覆盖任何继承样式的`color`属性。`color`您需要更改该值，例如：

```
$("div.page").each(function() {
    if (!isNaN(parseFloat(this.id)) && isFinite(this.id) && this.id != page) {
        $(this).mouseover(function() {
            $(this).find("font").attr("color", "blue");
            //alert($(this).css("color"));
        });
    }
}); 
```

我认为您还希望有一个`mouseout`事件在您将其悬停时删除样式。由于这种洞察力，将类用于这样的事情可能是一个更好的主意，因此您可以添加/删除类，这更易于维护。现在考虑一下，使用`:hover`伪类选择器完全使用 CSS 可能会更容易。这是否意味着您甚至需要`<font>`由您决定。如果你有理由按照自己的方式做每一件事，那就继续坚持下去。否则，您可能需要修改以获得更好的维护/结构。

# image - Magento - 所有类别都有相同的图像

> ID：13577310
> 
> 赞同：1
> 
> 时间：2012-11-27T04:16:05.363
> 
> 标签：image, magento, categories, catalog

因此，有一些代码可以获取单个子类别的图像：

```
foreach ($collection as $cat){
    $cur_category = Mage::getModel('catalog/category')->load($cat->getId());
    $layer = Mage::getSingleton('catalog/layer');   
    $layer->setCurrentCategory($cur_category);
    $_img = $this->getCurrentCategory()->getImageUrl();
} 
```

`$cat`我要获取图像的子类别在哪里。我遇到的问题 - 子类别的图像都是一样的！子类别中的第一个图像是显示在页面上的图像。链接和名称都是正确的：（这也在`for`循环中）

```
<div>
    <a href="<?php echo $helper->getCategoryUrl($cat);?>">
        <img src="<?php echo $_img; ?>" title="<?php $cat->getName() ?>"/>
        <cite><?php echo $cat->getName();?></cite>
    </a>
</div> 
```

我正在做这个修改`catalog/category/view.phtml`。它比显示的要多一些，但这是所有相关信息。

**编辑**

所有类别都有自己独特的图像，这些图像已正确上传。它们正确显示在管理员中。此外，`$cat->getId()`正在为各个子类别返回正确的 id。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T05:55:47.770

获取图片网址时，您可能做错了。

**而不是使用**

```
$_img = $this->getCurrentCategory()->getImageUrl(); 
```

**试试下面的代码**

```
$_img = $cur_category->getImageUrl(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T15:13:01.020

@RandyHall，您确定 $this->getCurrentCategory() 将从与 $layer->setCurrentCategory($cur_category); 相同的位置获取类别吗？将其设置为？

[在此处](http://magento-php-xref.tech-resolved.com/nav.html?app/code/core/Mage/Catalog/Model/Layer.php.source.html)和[此处](http://magento-php-xref.tech-resolved.com/nav.html?app/code/core/Mage/Catalog/Block/Category/View.php.source.html)观看源代码。如您所见，类别设置为层模型并从注册表获取返回类别（通过调用块）。

所以我建议你做这样的事情：

```
$_img = $layer->getCurrentCategory()->getImageUrl(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-27T15:47:53.493

```
foreach ($collection as $cat){
    $cur_category = Mage::getModel('catalog/category')->load($cat->getId());
    $_img = $cur_category->getImageUrl();
} 
```

在我看来，这就是你想要的吗？

# git - 如何在 git commit 消息中引用先前的提交

> ID：13577311
> 
> 赞同：49
> 
> 时间：2012-11-27T04:16:05.617
> 
> 标签：git, github

是否有在 git commit 消息中引用先前提交的约定？

提交信息示例：

```
Fixed bug such and such introduced in a1b2c3e4 
```

特别是，是否存在 github.com 会理解并转换为链接的约定？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-11-27T04:21:08.780

[是的 - GitHub 将使用GitHub Flavored Markdown](https://docs.github.com/en/github/writing-on-github/autolinked-references-and-urls#commit-shas)获取对 SHA 和用户/repos 模式的引用

特别是关于链接到提交：

> 一点 GitHub 香料
> 
> 除了上一节中的更改之外，某些引用是自动链接的：
> 
> *   SHA：be6a8cc1c1ecfe9489fb51e4869af15a13fc2cd2
> *   用户@SHA 参考：mojombo@be6a8cc1c1ecfe9489fb51e4869af15a13fc2cd2
> *   用户/项目@SHA：mojombo/god@be6a8cc1c1ecfe9489fb51e4869af15a13fc2cd2
> *   #编号：#1
> *   用户/#Num：mojombo#1
> *   用户/项目#Num：mojombo/god#1

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2021-03-02T16:37:04.133

git 的人这样回答这个[问题](https://git-scm.com/docs/SubmittingPatches#describe-changes)：

> 如果要引用稳定分支历史中的先前提交，请使用“缩写哈希（主题，日期）”格式，如下所示：
> 
> ```
> Commit f86a374 (pack-bitmap.c: fix a memleak, 2015-03-30)
> noticed that ... 
> ```
> 
> gitk 的“复制提交摘要”命令可用于获取这种格式（主题用双引号括起来），或者调用 git show：
> 
> ```
> git show -s --pretty=reference <commit> 
> ```
> 
> 或者，在不支持 --pretty=reference 的旧版本 Git 上：
> 
> ```
> git show -s --date=short --pretty='format:%h (%s, %ad)' <commit> 
> ```

# ruby - 语法错误，意外的keyword_end，需要'}'

> ID：13577313
> 
> 赞同：0
> 
> 时间：2012-11-27T04:16:21.790
> 
> 标签：ruby, syntax-error

我收到了这个语法错误信息：

> /usr/src/check_in/lib/check_in.rb:105：语法错误，意外keyword_end，期待'}'

```
class CheckIn < Adhearsion::CallController
  def run
  answer
  #play 'welcome.wav' # "Welcome to the PSG check in application."
  logger.info "#{call.from.to_s} called at #{time.now.to_s}"
  if verify_phone(call.from) == false # If it's not a site phone
    logger.info "Number not recognised, routing to Ops" 
    #play 'not_site_phone.wav' # "Number not recognized." 
  #dial(sip:number) # Dial operations
  hangup 
  else 
    user = verify_uid # Checks the User Id
  end
  if to_check_out?(user.uid)
check_out(user.uid)
  else
update_shift(user.uid)
    #play 'thank_you.wav'
  end
end

def verify_uid
  count = 1 # Generic count variable
  input = ask 'enter_uid.wav', :limit => 5, :timeout => 5.seconds #takes user ID as DTMF
  while (count <= 3 ) # Tracks the number of attempts
    if User.find_by_uid(input.response) == nil # If user.find doesn't return anything
  logger.info "Invalid user ID. ID entered = #{input.response} Attepmt = #{count}"
      input = ask "please_try_again.wav", :limit => 5, :timeout => 10.seconds
  count += 1 # Get user to try again
    elsif count == 3 
    play "try_again_later.wav" #"Please try you again later"
    logger.info "Tries exceeded, played try again later."
    hangup
    else
  @user = User.find_by_uid(input) # Assigns the user variable to return.
  logger.info "User ID: #{@user.uid} is valid"
  return @user
      end
    end
  end

  def verify_phone(caller_id)
    if Sites.find_by_site_phone(caller_id) != nil
    return true
    else
    return false  
    end
  end    

  def update_shift (user_id)
     @user = User.find_by_uid(user_id) # Grabs the user object
     if (@user.checked_in?) # If the user is already checked in assign the relevant attributes
    @user.time_olc = time.now 
    @user.num_ci += 1
    @user.check_in.create_check_in(:site_id => @user.site_id, uid => @user.uid, :time => time.now) 
    logger.info "#{@user.uid} checked in at #{@user.time_olc}"
     else # Otherwise set all the attributes for the shift
    @user.update_attributes(:checked_in? => true, :time_in => time.now, :time_olc => time.now, :num_ci => 1, :site_id => @user.site.find_by_site_phone(call.from))
    @user.check_in.create_check_in(:site_id => @user.site_id, uid => @user.uid, :time => time.now)
    logger.info "#{@user.uid} punched in at #{@user.time_in}"
     end
  end

  def to_check_out?(user_id) # Method to see if the user has reached check out
    @user = User.find_by_uid(user_id)
    num_of_ci = @user.num_ci + @user.num_notifications
    if (num_of_ci >= @user.site.shift_len)
      return true
    else
      return false
    end
  end

  def check_out!(user_id)
    @user = User.find_by_uid(user_id)
    input = ask 'check_out?.wav', :limit => 1, :timeout => 5.seconds
    if (input == 1)
      update(@user.uid)
    else
      @user.time_out = time.now
      @user.time_olc = time.now
      @user.update_attributes(:checked_in => false)
    end
    report_for_user(uid)
  end

  def secure
    count = 1
    play 'secure.wav'
    sec = 5.times.map {Random.rand(0..9)
    result = ask %w"#{sec[0]}, #{sec[1]}, #{sec[2]}, #{sec[3]}, #{sec[4]}", :limit => 5, :timeout => 5.seconds
    while (count <= 3)
      if (sec.join == result.response)
    logger.info "Check in valid"
    return true
      elsif (count < 3)
       result = ask 'please_try_again.wav', :limit => 5, :timeout => 5.seconds
      else
    play 'try_again_later.wav'
    hangup
      end
    end
  end

  def report_for_user(user_id)
    @user = Users.find_by_uid(user_id)
    report = file.open("/report/#{user_id}-#{@user.site_id}-#{date.current}",w)
    user_check_ins = @user.check_in.all
    report.write("Time, Site ID, User ID")
    user_check_ins.each do |check_in|
    report.write("#{user.check_in.time}, #{user.check_in.site_id}, #{user.checkin.uid}")
    check_in.destroy
    end
  end

  def notify
    foo = Users.all
    foo.each do |user|
      if user.checked_in?
    t1 = Time.now #sets a time place holder
    t2 = user.time_olc
        convert_time = (t1.hour * 60 * 60) + (t1.min * 60) + t1.sec
    convert_tolc = (t2.hour * 60 * 60) + (t2.min * 60) + t1.sec
    if ((convert_time - convert_tolc)/60 > 75)
      user.num_notification += 1
      a = user.uid.to_s
          logger.info "#{user.uid} hasn't checked in this hour"
#         Adhearsion::OutboundCall.originate '+tel: Mobile' :from => ' ' do
#           answer
#           play a[0], a[1], a[2], a[3], a[4], 'has_not_checked_in.wav'
#           hangup
#         end
        end
      end
    end
  end 
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T04:24:00.503

在这种方法中，您打开了一个大括号“{”，但没有关闭它。

```
def secure
count = 1
play 'secure.wav'
sec = 5.times.map {Random.rand(0..9)
result = ask %w"#{sec[0]}, #{sec[1]}, #{sec[2]}, #{sec[3]}, #{sec[4]}", :limit => 5, :timeout => 5.seconds
while (count <= 3)
  if (sec.join == result.response)
logger.info "Check in valid"
return true
  elsif (count < 3)
   result = ask 'please_try_again.wav', :limit => 5, :timeout => 5.seconds
  else
play 'try_again_later.wav'
hangup
  end
end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T04:24:04.137

您在以下行的安全方法中缺少右括号

```
sec = 5.times.map {Random.rand(0..9) 
```

# objective-c - 在 IOS 6.0 上使用 SPRectangle 保存 UIImage 时如何修复错误

> ID：13577315
> 
> 赞同：0
> 
> 时间：2012-11-27T04:16:33.070
> 
> 标签：objective-c, sparrow-framework

此函数返回黑色图像。我使用麻雀图书馆。

这是我的代码：

```
-(UIImage *) saveRectangle:(SPRectangle*)rectangle
{
    int numberOfComponents = 8;
    int width = rectangle.width;
    int height = rectangle.height;

    NSInteger bufferLenght = width * height * numberOfComponents;

    NSMutableData * buffer= [NSMutableData dataWithLength:bufferLenght];

    glPixelStorei(GL_PACK_ALIGNMENT, 4); // force 4 byte alignment

    glReadPixels(0, 0, width, height, GL_RGBA, GL_UNSIGNED_BYTE, [buffer mutableBytes]);

    CGDataProviderRef ref = CGDataProviderCreateWithData(NULL, [buffer mutableBytes], bufferLenght, NULL);
    CGImageRef iref = CGImageCreate(width, height, 8, 32, width * 4, CGColorSpaceCreateDeviceRGB(), kCGBitmapByteOrderDefault, ref, NULL, true, kCGRenderingIntentDefault);
    uint32_t* pixels = (uint32_t *)malloc(bufferLenght);
    CGContextRef context = CGBitmapContextCreate(pixels, width, height, 8, width*4, CGImageGetColorSpace(iref), kCGImageAlphaNoneSkipFirst | kCGBitmapByteOrder32Big);
    CGContextTranslateCTM(context, 0.0, height);
    CGContextScaleCTM(context, 1.0, -1.0);
    CGContextDrawImage(context, CGRectMake(0.0, 0.0, width, height), iref);
    CGImageRef outputRef = CGBitmapContextCreateImage(context);
    free(pixels);

    return [UIImage imageWithCGImage:outputRef];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T16:51:22.240

您显示的代码几乎没有 Sparrow 代码（除了非常类似于 CGRect 的 SPRectangle ）。听起来您正在尝试保存 Sparrow 场景的矩形区域的捕获。Sparrow 打算将您从 OpenGL 实现细节中抽象出来。您确定仅使用 SPRenderTexture 不会更容易吗？[http://doc.sparrow-framework.org/core/Classes/SPRenderTexture.html](http://doc.sparrow-framework.org/core/Classes/SPRenderTexture.html)

还要确保您要返回 UIImage 而不是 SPImage。希望能帮助到你。

# asp.net - 如何删除 sessionState sqlConnectionString 重复

> ID：13577316
> 
> 赞同：0
> 
> 时间：2012-11-27T04:16:42.930
> 
> 标签：asp.net

我在 web.config 的标准 connectionStrings 元素中有一组连接字符串

web.config 中的 sessionState 元素规定在使用 sql 会话状态时使用 sqlConnectionString 属性。

这通常会导致连接字符串在文件中的 2 个位置重复，如果有人忘记更改这两个位置，可能会导致它们不同步。

我可以使用什么机制来删除这种重复？

示例配置：

```
<connectionStrings>
    <add name="IWouldLikeToUseThisConnectionStringForSessionState" value="..."
</connectionStrings>

<sessionState 
    mode="SQLServer" 
    allowCustomSqlDatabase="true"
    sqlConnectionString="DuplicatedConnectionStringHereAndCanGetOutOfSync"
    /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T06:14:48.537

处理此问题的一种方法可能是使用[分区，如此](https://web.archive.org/web/20130111000949/http://msdn.microsoft.com/en-us/magazine/cc163730.aspx)[处](https://stackoverflow.com/a/4771633/44869)所述。

# authentication - 扩展 RavenDB AuthenticationUser

> ID：13577317
> 
> 赞同：1
> 
> 时间：2012-11-27T04:16:50.247
> 
> 标签：authentication, ravendb, extend

我目前正在尝试使用 RavenDB Authentication Bundle 和 MVC 3 中的 Facebook C# SDK 来实现身份验证。到目前为止，除了保留 Facebook Graph API 提供的所有信息（例如 facebookId 和 accesstoken）之外，我已经完成了所有工作。

一种可能的（尽管丑陋的）解决方案是为此信息创建一个单独的 facebook 文档模型，并在对用户执行任何操作时管理 AuthenticationUser 和 facebook 模型。

但是，我想知道是否有一种更优雅的方式来处理这些额外的数据，并通过可能以某种方式扩展它来将其合并到 AuthenticationUser 文档中？任何建议将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T13:10:49.533

最简单的方法是从 AuthorizationUser 继承并添加您想要的任何内容。您也可以不继承它，只要它具有相同的形状（预期属性匹配）

# arrays - 从迭代器内的对象中删除元素的最佳方法是什么？

> ID：13577322
> 
> 赞同：0
> 
> 时间：2012-11-27T04:17:48.640
> 
> 标签：arrays, algorithm, loops

假设您想从迭代中删除一个元素：

```
a = ['a','b','c','d','e'];
for i = 0 to len(a){
    print a[i];
    if (i==1) a.remove(i);
}; 
```

输出为`a b d e`，`c`缺失。这是一个常见的错误，因为您在数组仍在循环时更改了它。一些解决方法包括在循环后保留要删除的元素列表，并在删除后更新索引。你如何处理这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T04:22:53.320

最明显的方法是从数组的末尾迭代到开头：

```
a = ['a','b','c','d','e'];
for i = len(a)-1 downto 0 {
    print a[i];
    if (i==1) a.remove(i);
}; 
```

许多语言都有迭代器，通过告诉迭代器进行删除来支持在前向迭代期间删除元素。然而，这并不总是有效（例如，Java 返回的列表的迭代器`Arrays.asList`不支持删除元素，因为列表不“拥有”支持数组。

如果必须使用索引进行前向迭代，请在删除元素时至少从索引中减去 1。这样你就不会跳过元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T04:27:08.180

这取决于您的迭代器访问（包括循环，在您的示例中从 0 迭代到 5，即使位置 5 到最后可能不再存在）是通过集合中的具体位置，还是通过对下一个元素。

例如，Java 中的迭代器属于抽象类型，因此您可以删除指向的项，然后可靠地继续迭代其余的项。

在像 C 这样的语言中，在遍历数组时，您通常会遇到您描述的困难并冒着编写错误代码的风险。也许最好的通用解决方案是累积要删除的“待删除”集合，然后将它们作为单独的步骤进行处理。只有充分了解集合的内部表示以及迭代的工作原理，才能安全地执行删除操作，然后正确调整迭代器——以及循环的终止条件——以继续迭代。但是，无论如何，如果您正在使用数组，这通常会发生。只是附加调整代码是否比维护“要删除”集的代码更简单的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T04:32:00.313

您甚至可以通过迭代器在迭代中删除它。

```
 vector::iterator itVec = vectInt.begin();
for ( ; itVec != vectInt.end(); )
{
 if (*itVec == 1022) 
  itVec = vectInt.erase(itVect);
 else
  ++itVec;
} 
```

交互器响应知道元素的结尾（而不是通过记录结尾的长度），并释放内存。

# c++ - 基本模板链表

> ID：13577324
> 
> 赞同：2
> 
> 时间：2012-11-27T04:18:03.060
> 
> 标签：c++, templates, linked-list

```
#include <iostream>
#include <string>

using namespace std;

template <class T>
class Node{
        friend class LinkedList<T>;
private:
    T data;
    Node <T> *next;
public:
    Node();
    Node(T d);
    ~Node();
};

template <class T>
Node<T>::Node(){
    T data = 0;
    next = 0;
}

template <class T>
Node<T>::Node(T d){
    data = d;
    next = 0;

}

template<class T>
Node<T>::~Node(){
    delete next;
}

template <class T>
class LinkedList{
private: 
    Node <T> *head;
public:
    LinkedList();
    ~LinkedList();
    void Push_Front(const T& e);
}

template<class T>
LinkedList <T>::LinkedList(){
    head = 0;
}

template <class T>
LinkedList<T>::~LinkedList(){
    delete head;
}

template <class T>
void LinkedList<T>::Push_Front(const T &e){
    Node<T> *newNode = new Node<T>(e);

    if(head == 0)
        head = new Node<T>(e);

    newNode->next = head;
   head = newNode;
}

void main(){
    LinkedList<int> list;

    list.Push_Front(10);

    int t;
    cin>>t;
    return ;
} 
```

我正在尝试编写链表的模板版本。我遇到了一些错误，不知道为什么。当我尝试结交朋友类 LinkedList 时发生错误，我需要这样做，以便我可以从 LinkedList 访问 T 数据。

```
: error C2059: syntax error : '<'
: see reference to class template instantiation 'Node<T>' being compiled
: error C2238: unexpected token(s) preceding ';'
: error C2143: syntax error : missing ';' before 'template'
: error C2989: 'LinkedList' : class template has already been declared as a non-class template
: see declaration of 'LinkedList'
: 'LinkedList': multiple template parameter lists are not allowed
: error C2988: unrecognizable template declaration/definition
: error C2059: syntax error : '<'
: error C2588: '::~LinkedList' : illegal global destructor
: fatal error C1903: unable to recover from previous error(s); stopping compilatio 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T04:49:15.283

您在 . 的类定义末尾缺少一个分号`LinkedList`。但是，即使您解决了这个问题，由于`Node<T>`需要了解`LinkedList<T>`，反之亦然，您需要在顶部声明它们：

```
#include <iostream>
#include <string>

using namespace std;

template <typename T> class Node;
template <typename T> class LinkedList;

//Code as before 
```

# java - 将 ANTLR 解析规则映射到自定义 Java AST 类以生成代码

> ID：13577328
> 
> 赞同：8
> 
> 时间：2012-11-27T04:18:18.313
> 
> 标签：java, parsing, antlr, llvm, abstract-syntax-tree

我似乎在处理 AST->StringTemplate 方面的问题，可能是因为我来自手工编写解析器 -> LLVM。

我正在寻找的是一种将解析规则自动匹配到可以表示它并包含生成目标语言输出的方法的 AST 类的方法。（在这种情况下，可能使用 StringTemplate。）

在伪代码中，给定这个示例语法：

```
numberExpression
    : DIGIT+
    ; 
```

我想让它映射到这个 AST 类：

```
class NumberExpressionAST extends BaseAST {
    private double value;

    public NumberExpressionAST(node) {
        this.value = node.value;
    }

    public String generateCode() {
        // However we want to generate the output.
        // Maybe use a template, maybe string literals, maybe cure cancer...whatever.
    }
} 
```

为了将它们配对，也许会有一些像下面这样的胶水：（或者你可能会为`Class.forName`这些东西发疯）

```
switch (child.ruleName) {
    case 'numberExpression':
        return new NumberExpressionAST(child);
        break;
} 
```

我一直在网上搜索，发现语法中的 parse rewrite rules with`->`但我似乎无法弄清楚如何将所有这些逻辑排除在语法之外。尤其是从模板设置和生成目标输出的代码。我可以多次走树。

我想也许我可以使用该选项`output=AST`，然后提供我自己的从 CommonTree 扩展的 AST 类？我承认，我对 ANTLR 的掌握非常原始，所以请原谅我的无知。我遵循的每个教程都显示，所有这些东西都符合语法，这*对我来说*是完全疯狂且难以维护的。

有人可以指出我完成类似事情的方法吗？

**目标：将 AST/codegen/template 逻辑排除在语法之外。**

编辑 - - - - - - - - - - - - - - - - - - - - - - -

我已经求助于跟踪 ANTLR 的实际源代码（因为他们使用自己），我看到类似的东西，如`BlockAST`,`RuleAST`等都继承自`CommonTree`. 我还没有完全弄清楚重要的部分......他们如何使用它们......

环顾四周，我注意到您基本上可以输入提示标记：

```
identifier
    : IDENTIFIER<AnyJavaClassIWantAST>
    ; 
```

你不能对解析规则做完全相同的事情......但是如果你创建一些标记来表示整个解析规则，你可以使用这样的重写规则：

```
declaration
    : type identifier -> SOME_PARSE_RULE<AnyJavaClassIWantAST>
    ; 
```

所有这些都更接近我想要的，但理想情况下我不应该乱扔语法......有没有办法把这些放在其他地方？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-15T04:02:50.437

> 你可以添加这个作为答案...

这是一个人为的示例，它使用了一些 ANTLR4 的功能，这些功能大大有助于将语法与输出语言分开，主要是[替代标签](http://www.antlr.org/wiki/display/ANTLR4/Parser+Rules#ParserRules-AlternativeLabels)和生成的侦听器。这个示例语法可以表示一些微不足道的代码，但它没有语言参考——甚至没有`skip()`在词法分析器中调用空格。测试类使用生成的侦听器将输入转换为一些 Java 输出。

我避免使用我在前几次尝试中无法使用的任何东西，所以无论如何不要认为这是一个详尽的例子。

### 辛普朗

```
grammar Simplang;

compilationUnit : statements EOF;
statements      : statement+;
statement       : block #BlockStatement 
                | call  #CallStatement
                | decl  #DeclStatement
                ;
block           : LCUR statements RCUR;    
call            : methodName LPAR args=arglist? RPAR SEMI;
methodName      : ID;
arglist         : arg (COMMA arg)*;
arg             : expr;    
decl            : VAR variableName EQ expr SEMI;
variableName    : ID;
expr            : add_expr;     

add_expr        : lhs=primary_expr (add_op rhs=primary_expr)*;
add_op          : PLUS | MINUS;    
primary_expr    : string=STRING
                | id=ID
                | integer=INT
                ;    

VAR: 'var';   
ID: ('a'..'z'|'A'..'Z')+;
INT: ('0'..'9')+;
STRING: '\'' ~('\r'|'\n'|'\'')* '\'';
SEMI: ';';
LPAR: '(';
RPAR: ')';
LCUR: '{';
RCUR: '}';
PLUS: '+';
MINUS: '-';    
COMMA: ',';
EQ: '=';
WS: (' '|'\t'|'\f'|'\r'|'\n') -> skip; 
```

与词法分析器和解析器一起，ANTLR4 生成一个侦听器接口和默认的空实现类。这是为上面的语法生成的接口。

### SimplangListener.java

```
public interface SimplangListener extends ParseTreeListener {
    void enterArglist(SimplangParser.ArglistContext ctx);
    void exitArglist(SimplangParser.ArglistContext ctx);
    void enterCall(SimplangParser.CallContext ctx);
    void exitCall(SimplangParser.CallContext ctx);
    void enterCompilationUnit(SimplangParser.CompilationUnitContext ctx);
    void exitCompilationUnit(SimplangParser.CompilationUnitContext ctx);
    void enterVariableName(SimplangParser.VariableNameContext ctx);
    void exitVariableName(SimplangParser.VariableNameContext ctx);
    void enterBlock(SimplangParser.BlockContext ctx);
    void exitBlock(SimplangParser.BlockContext ctx);
    void enterExpr(SimplangParser.ExprContext ctx);
    void exitExpr(SimplangParser.ExprContext ctx);
    void enterPrimary_expr(SimplangParser.Primary_exprContext ctx);
    void exitPrimary_expr(SimplangParser.Primary_exprContext ctx);
    void enterAdd_expr(SimplangParser.Add_exprContext ctx);
    void exitAdd_expr(SimplangParser.Add_exprContext ctx);
    void enterArg(SimplangParser.ArgContext ctx);
    void exitArg(SimplangParser.ArgContext ctx);
    void enterAdd_op(SimplangParser.Add_opContext ctx);
    void exitAdd_op(SimplangParser.Add_opContext ctx);
    void enterStatements(SimplangParser.StatementsContext ctx);
    void exitStatements(SimplangParser.StatementsContext ctx);
    void enterBlockStatement(SimplangParser.BlockStatementContext ctx);
    void exitBlockStatement(SimplangParser.BlockStatementContext ctx);
    void enterCallStatement(SimplangParser.CallStatementContext ctx);
    void exitCallStatement(SimplangParser.CallStatementContext ctx);
    void enterMethodName(SimplangParser.MethodNameContext ctx);
    void exitMethodName(SimplangParser.MethodNameContext ctx);
    void enterDeclStatement(SimplangParser.DeclStatementContext ctx);
    void exitDeclStatement(SimplangParser.DeclStatementContext ctx);
    void enterDecl(SimplangParser.DeclContext ctx);
    void exitDecl(SimplangParser.DeclContext ctx);
} 
```

这是一个测试类，它覆盖空侦听器中的一些方法并调用解析器。

### SimlangTest.java

```
public class SimplangTest {

    public static void main(String[] args) {

        ANTLRInputStream input = new ANTLRInputStream(
                "var x = 4;\nfoo(x, 10);\nbar(y + 10 - 1, 'x' + 'y' + 'z');");

        SimplangLexer lexer = new SimplangLexer(input);

        SimplangParser parser = new SimplangParser(new CommonTokenStream(lexer));

        parser.addParseListener(new SimplangBaseListener() {
            public void exitArg(SimplangParser.ArgContext ctx) {
                System.out.print(", ");
            }

            public void exitCall(SimplangParser.CallContext call) {
                System.out.print("})");
            }

            public void exitMethodName(SimplangParser.MethodNameContext ctx) {
                System.out.printf("call(\"%s\", new Object[]{", ctx.ID()
                        .getText());
            }

            public void exitCallStatement(SimplangParser.CallStatementContext ctx) {
                System.out.println(";");
            }

            public void enterDecl(SimplangParser.DeclContext ctx) {
                System.out.print("define(");
            }

            public void exitVariableName(SimplangParser.VariableNameContext ctx) {
                System.out.printf("\"%s\", ", ctx.ID().getText());
            }

            public void exitDeclStatement(SimplangParser.DeclStatementContext ctx) {
                System.out.println(");");
            }

            public void exitAdd_op(SimplangParser.Add_opContext ctx) {
                if (ctx.MINUS() != null) {
                    System.out.print(" - ");
                } else {
                    System.out.print(" + ");
                }
            }

            public void exitPrimary_expr(SimplangParser.Primary_exprContext ctx) {
                if (ctx.string != null) {
                    String value = ctx.string.getText();
                    System.out.printf("\"%s\"",
                            value.subSequence(1, value.length() - 1));
                } else if (ctx.altNum == 2){    //cheating and using the alt# for "INT"
                    System.out.printf("read(\"%s\")", ctx.id.getText());
                } else {
                    System.out.print(ctx.INT().getText());
                }
            }
        });

        parser.compilationUnit();
    }
} 
```

这是测试类中硬编码的测试输入：

```
var x = 4;
foo(x, 10);
bar(y + 10 - 1, 'x' + 'y' + 'z'); 
```

这是产生的输出：

```
define("x", 4);
call("foo", new Object[]{read("x"), 10, });
call("bar", new Object[]{read("y") + 10 - 1, "x" + "y" + "z", }); 
```

这是一个愚蠢的例子，但它展示了一些在构建自定义 AST 时可能对您有用的特性。

# c - 在线程函数中使用管道

> ID：13577329
> 
> 赞同：1
> 
> 时间：2012-11-27T04:18:20.117
> 
> 标签：c

我必须做一个包含两个线程的函数。一个必须读取一个管道，另一个必须写入另一个管道。但我不知道如何将管道传递给线程函数，因为在 pthread_create 的参数部分中必须有另一个结构。如果这样更清楚一点，我会放一些代码。

```
void *readFather(Job *job){
    write (desc1Pipe[0],job->in, job->size_in);
}

void *writeFather(Job *job){
if ((job->size=read (desc2Pipe[1], job->out,  job->max_out) > job->max_out) 
    kill(job->pidhijo,SIGKILL);                        
} 
```

这些是我给 pthread_create 的函数。

这是线程的调用。

```
pthread_t pid1; 
pthread_t pid2;
...
pthread_create(&pid1, NULL, readFather, &job);      
pthread_create(&pid2, NULL, writeFather, &job); 
```

请帮助我，我已经做了我能想到的所有事情，我对所有与 C 相关的东西都很陌生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T04:22:11.340

如果您有多条数据，您可以将它们包装在一个结构中。

```
struct readData
{
    Job *job;
    int  fd;
};

...

struct readData readData;

readData.job = job;
readData.fd  = pipeFd;

pthread_create(&pid1, NULL, readFather, &readData); 
```

# debugging - 无法在开发者工具窗口中查看内容脚本引用

> ID：13577330
> 
> 赞同：5
> 
> 时间：2012-11-27T04:18:22.493
> 
> 标签：debugging, google-chrome-extension, developer-tools, content-script

当我使用开发者工具查看我的扩展时，我只看到生成的背景文件 background.js；我的内容脚本没有出现在内容脚本选项卡下。任何想法为什么？清单的相关部分如下所示：

```
"content_scripts": [{
"run_at": "document_end",
"js": ["postMsg.js"],
"matches": ["https://groups.google.com/forum/*"]
}], 
```

postMsg.js 被注入页面，但从未出现在开发者工具窗口中，所以我无法调试它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T05:25:14.323

只要您位于与清单中[的“匹配模式和 glob”匹配](http://developer.chrome.com/extensions/content_scripts.html#match-patterns-globs)的页面上，您就会在***Sources -> Content Scripts 窗格***下看到内容脚本。
您可能需要刷新 ( `F5`) 页面（和/或您的扩展程序，然后是页面）才能看到它：

[（点击查看大图）
![调试步骤](../Images/3282db87df71a4794cf768f4b1a61ec9.png)](https://i.stack.imgur.com/LPcOy.gif)

* * *

有关将该神秘号码与分机匹配的更多信息，**请参阅[此答案](https://stackoverflow.com/a/11912224/331508)**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T05:16:25.343

[作为 js 文件的内容脚本永远不会被注入的页面公开。](https://developer.chrome.com/extensions/content_scripts.html). 如果您的意图是调试内容脚本，这是可能的；

**前任：**

*我的内容脚本.js*

```
var getStyleofbody = document.getElementsByTagName('body')[0].style; 
```

为了调试这个，我首先在我要注入的页面的控制台中运行这段代码；在我得到预期的结果后，我会将代码移动到 contentscript js 文件。

![在此处输入图像描述](../Images/1812a0fc1102a69dfd005beb68e69be5.png)

但是对于注入后的任何错误，您可以查看开发人员的控制台面板中的所有错误（它们都列在那里）。

![在此处输入图像描述](../Images/0ce0af1565e3dff5360be3708b3e3612.png)

如果您感到困惑，请告诉我

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-21T20:42:57.373

2018 年，如果你因为某些原因错过了：

[![源中的文件栏](../Images/1521a5e57b7a9b03fb8e2de0fd4c25ad.png)](https://i.stack.imgur.com/AuJIJ.png)

按>>。从那里选择内容脚本，您将能够看到内容脚本。

高频 :)

# wcf - 在没有合约接口和 DTO 的情况下从客户端调用 WCF 服务

> ID：13577337
> 
> 赞同：0
> 
> 时间：2012-11-27T04:19:17.160
> 
> 标签：wcf, wsdl, metadata, servicecontract

我有需要消耗的第 3 方 wcf soap 服务，所以我[发现](http://www.codeproject.com/Articles/328552/Calling-a-WCF-service-from-a-client-without-having?msg=4437111#xx4437111xx)了一种在内存中生成代码并使用简单输入参数调用服务的方法。我想对复杂的论点做同样的事情，任何人都可以帮助我了解如何实现这一点。或者任何人都可以请我指出正确的方向。

在此先感谢，帕万

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T09:32:28.660

可能您可以在运行时使用 datasvcutil 的输出和动态代码生成/反射。 [http://msdn.microsoft.com/en-us/library/dd756369.aspx](http://msdn.microsoft.com/en-us/library/dd756369.aspx)

# java - ImageIO.createImageInputStream 无法在 java 平台 se 7 上工作

> ID：13577345
> 
> 赞同：2
> 
> 时间：2012-11-27T04:21:18.720
> 
> 标签：java, javax.imageio

下面的代码在以前的版本中运行良好，但在升级到 Java 7 后无法运行。

任何人都可以帮忙吗？

代码：

```
if (imageFile.exists())

System.out.println(imageFile.getPath()+" :"+ imageFile.getName());
      // prepare to read the input

final FileInputStream fis = new FileInputStream (imageFile);  

ImageInputStreamiis=null;
iis = ImageIO.createImageInputStream(fis);          
final Iterator<ImageReader> imageReaders = ImageIO.getImageReaders(iis);
ImageReader reader = imageReaders.next();
reader.setInput(iis, true, false); 
```

```
错误：
C:\Users\apps\Documents\DSC_1244.jpg :DSC_1244.jpg
线程“AWT-EventQueue-0”中的异常 java.util.ServiceConfigurationError: javax.imageio.spi.ImageReaderSpi: Provider it.tidalwave.imageio.io.FileImageInputStream2Spi 不是子类型
    在 java.util.ServiceLoader.fail(ServiceLoader.java:231)
    在 java.util.ServiceLoader.access$300(ServiceLoader.java:181)
    在 java.util.ServiceLoader$LazyIterator.next(ServiceLoader.java:369)
    在 java.util.ServiceLoader$1.next(ServiceLoader.java:445)
    在 javax.imageio.spi.IIORegistry.registerApplicationClasspathSpis(IIORegistry.java:210)
    在 javax.imageio.spi.IIORegistry.(IIORegistry.java:138)
    在 javax.imageio.spi.IIORegistry.getDefaultInstance(IIORegistry.java:159)
    在 javax.imageio.ImageIO.(ImageIO.java:65)
    在 hk.dawntech.digps2map.PhotoManagerImagePreview.paint(PhotoManagerImagePreview.java:50)
    在 javax.swing.JComponent.paintToOffscreen(JComponent.java:5221)
    在 javax.swing.RepaintManager$PaintManager.paintDoubleBuffered(RepaintManager.java:1482)
    在 javax.swing.RepaintManager$PaintManager.paint(RepaintManager.java:1413)
    在 javax.swing.RepaintManager.paint(RepaintManager.java:1206)
    在 javax.swing.JComponent._paintImmediately(JComponent.java:5169)
    在 javax.swing.JComponent.paintImmediately(JComponent.java:4980)
    在 javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:770)
    在 javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:728)
    在 javax.swing.RepaintManager.prePaintDirtyRegions(RepaintManager.java:677)
    在 javax.swing.RepaintManager.access$700(RepaintManager.java:59)
    在 javax.swing.RepaintManager$ProcessingRunnable.run(RepaintManager.java:1621)
    在 java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)
    在 java.awt.EventQueue.dispatchEventImpl(EventQueue.java:721)
    在 java.awt.EventQueue.access$200(EventQueue.java:103)
    在 java.awt.EventQueue$3.run(EventQueue.java:682)
    在 java.awt.EventQueue$3.run(EventQueue.java:680)
    在 java.security.AccessController.doPrivileged（本机方法）
    在 java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    在 java.awt.EventQueue.dispatchEvent(EventQueue.java:691)
    在 java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:244)
    在 java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:163)
    在 java.awt.EventDispatchThread.pumpEventsForHierarchy（EventDispatchThread.java:151）
    在 java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147)
    在 java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139)
    在 java.awt.EventDispatchThread.run(EventDispatchThread.java:97)

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-02T07:25:27.877

我在这里回答了一个基本相同的问题：[ImageIO methods not working after switch to Java 7](https://stackoverflow.com/a/19131782/1428606)。

唯一的区别是此异常是由`ImageInputStreamSpi`尝试注册为`ImageReaderSpi`.

# java - 使用一个类来测试另一个类？

> ID：13577368
> 
> 赞同：0
> 
> 时间：2012-11-27T04:23:36.150
> 
> 标签：java

对于下面给定的类，我被要求用一个新`TimeTest`类来测试这个类，该类具有`doTest()`在我的类中尝试这些方法的方法`Time`。我之前通过该`main`方法测试过类，但我不知道如何使用类来测试类。谁能帮我开始？

```
public class Time {

    private int minute;
    private int hour;
    private int totalMinute;

    public Time() {
        minute = 0;
        hour = 0;
    }

    public Time(int hours, int minutes) {
        setHour(hours);
        setMinute(minutes);
    }

    private void setHour(int hours) {
        if (hours < 24 && hours >= 0) {
            hour = hours;
        } else {
            hour = 0;
        }
    }

    private void setMinute(int minutes) {
        if (minutes < 60 && minutes >= 0) {
            minute = minutes;
        } else {
            minute = 0;
        }
    }

    public void setTime(int hours, int minutes) {
        setHour(hours);
        setMinute(minutes);
    }

    public int getElapsedTime(Time that) {
        int thisTime = this.getTotalMinutes();
        int thatTime = that.getTotalMinutes();
        if (thisTime > thatTime) {
            return thisTime - thatTime;
        }
        return thatTime - thisTime;
    }

    private int getTotalMinutes() {
        totalMinute = (hour * 60) + minute;

        return totalMinute;
    }

    public String getAsString() {
        if (hour < 10 && minute < 10) {
            return "0" + hour + ":0" + minute;
        } else if (hour < 10 && minute >= 10) {
            return "0" + hour + ":" + minute;
        } else if (hour >= 10 && minute < 10) {
            return hour + ":0" + minute;
        } else {
            return hour + ":" + minute;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T04:44:06.403

这是可能满足您要求的课程。如果您不想在此类中使用 main 方法，则在另一个类中编写 main 方法并创建 TimeTest 对象并从具有 main 方法的该类中调用 doTest(time) 方法。

```
public class TimeTest {

public static void main(String[] args) {
    Time time = new Time();
    time.setTime(10, 10);
    doTest(time);

}

private static void doTest(Time time) {
    //set the time to 10 hours and 10 minutes
    System.out.println("Get as String: " + time.getAsString());
    // set the new time to test the getElapsedTime(time) method
    Time newTime = new Time(11, 30);
    System.out.println("Get Elapsed Time: " + time.getElapsedTime(newTime) + " minutes");
} 
```

}

谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T04:32:17.843

[Junit](http://www.junit.org/)是开始测试逻辑的最佳场所。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T04:40:37.693

看看[JUnit](https://github.com/kentbeck/junit/wiki)。它可以为您提供一个易于使用的测试环境。

测试代码时的主要概念 - 测试应该只断言一件事。*那是*什么取决于你的代码。

这是您当前班级的测试示例。我想断言，在将你的`Time`班级设置为 1:13 之后，我将返回那个确切的字符串。这个测试应该存在于它*自己的*类中，独立于你的`Time`对象。

```
@Test
public void testGetAsString() {
    Time testObj = new Time();
    String expected = "01:13";
    testObj.setTime(1, 13);
    String result = testObj.getAsString();
    Assert.assertEquals("the time isn't properly rendered", result, expected);
} 
```

像这样的单元测试可以极大地帮助你进行更大的项目、重构，并且是测试驱动开发的三个部分之一。

如果您有兴趣，还可以查看其他模拟或模拟另一个对象行为的测试框架。[EasyMock](http://www.easymock.org/)、[PowerMock](http://code.google.com/p/powermock/)和[Mockito](http://code.google.com/p/mockito/)可以在这方面为您提供帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T04:36:27.240

简单的方法是在新的 Test 类中执行您在 main() 中所做的任何事情。

因此，如果之前 main 创建了该类的新对象，然后在该对象上调用方法，则您的 Test 类将创建原始类的新对象并调用其方法。

就像是：

```
public class TimeTest
{
   public static void main(String [] args)
   {
      Time timeA = new Time();
      Time timeB = new Time(12, 30);
      System.out.println("Time Diff: " + timeB.getElapsedTime(timeA);
      //  etc
   }
} 
```

一旦你有了这个，研究不同的测试框架，比如 JUnit，它会自动处理测试的管理方面，允许你像编写代码一样进行测试。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T04:41:27.757

您应该查看 JUnit 框架。

测试类应如下所示：

```
public class TimeTest {

    public TimeTest() {
    }

    @BeforeClass
    public static void setUpClass() {
    }

    @AfterClass
    public static void tearDownClass() {
    }

    @Before
    public void setUp() {
    }

    @After
    public void tearDown() {
    }

    @Test

    public void doTest()
    {
        Time instance = new Time();
        //your code to test the methods
        //use assertEquals(expectedResult, result) to compare the result you expected                with the result from your code  
    }

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-27T05:41:37.493

```
public class TimeTest
{

  public static void main(String args[])
  {
   doTest();

  }

  public static void doTest()
  {
   Time t1=new Time();

   Time t2=new Time(12,45);

   System.out.printf("%s\n",t1.getAsString());
   System.out.printf("%s",t2.getAsString());

  }

}// end of class TimeTest 
```

这就是您可以在 TimeTest 类的方法 doTest 中尝试其他类时间方法的方法

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-11-27T04:30:09.820

在该类中编写另一个测试类，使用 main 函数。并从该主要功能测试该类。

你需要测试你的时间课程吗？我对吗？

```
 public class test
 {
     public static void main(String args[])
     {
        Time t = new Time();

       //now use any method of time class
        //i.e. t.methodname(pram)
     }
 } 
```

# ios - 在 iOS 上编译 log4cpp 库

> ID：13577371
> 
> 赞同：2
> 
> 时间：2012-11-27T04:23:50.543
> 
> 标签：ios, static-libraries

我正在制作一个 iPhone 应用程序。我正在尝试使用 log4cpp libraray 登录我的项目。我可以使用 Makefile 在 MAC OS 上静态编译这个库。当我尝试在我的 Iphone 项目中使用这个库时，我得到一个链接器错误，指出我需要针对 armv7 架构编译这个库。我不知道如何修改 makefile 以针对 armv7 架构进行编译。因此，我创建了一个 XCode 项目并添加了所有源文件，并尝试针对 armv7 架构创建 log4cpp 的静态 libg，但编译错误太多。

请帮助解决这个问题。

谢谢。

# python - Python 正则表达式是否等同于 Ruby 的原子分组？

> ID：13577372
> 
> 赞同：36
> 
> 时间：2012-11-27T04:23:50.423
> 
> 标签：python, ruby, regex

Ruby 的正则表达式有一个叫做 atomic grouping 的特性`(?>regexp)`，描述[在这里](http://www.ruby-doc.org/core-1.9.3/Regexp.html#label-Atomic+Grouping)，在 Python 的`re`模块中是否有任何等价物？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-11-27T04:29:24.940

Python 不直接支持此功能，但您可以通过使用零宽度前瞻断言`(?=RE)`（`(?P<name>RE)`一个命名的反向引用 ( `(?P=name)`) 以完全匹配任何匹配的零宽度断言。结合在一起，这为您提供了相同的语义，但代价是创建了一个额外的匹配组和大量语法。

例如，您提供的链接给出了 Ruby 示例

```
/"(?>.*)"/.match('"Quote"') #=> nil 
```

我们可以在 Python 中这样模拟：

```
re.search(r'"(?=(?P<tmp>.*))(?P=tmp)"', '"Quote"') # => None 
```

我们可以证明我正在做一些有用的事情，而不仅仅是喷出线条噪音，因为如果我们改变它以使内部组不吃 final `"`，它仍然匹配：

```
re.search(r'"(?=(?P<tmp>[A-Za-z]*))(?P=tmp)"', '"Quote"').groupdict()
# => {'tmp': 'Quote'} 
```

您还可以使用匿名组和数字反向引用，但这会充满线路噪音：

```
re.search(r'"(?=(.*))\1"', '"Quote"') # => None 
```

（完全披露：我从 perl 的[`perlre`](http://perldoc.perl.org/perlre.html)文档中学到了这个技巧，它在文档中提到了它`(?>...)`。）

除了具有正确的语义外，它还具有适当的性能属性。如果我们移植一个例子`perlre`：

```
[nelhage@anarchique:~/tmp]$ cat re.py
import re
import timeit

re_1 = re.compile(r'''\(
                           (
                             [^()]+           # x+
                           |
                             \( [^()]* \)
                           )+
                       \)
                   ''', re.X)
re_2 = re.compile(r'''\(
                           (
                             (?=(?P<tmp>[^()]+ ))(?P=tmp) # Emulate (?> x+)
                           |
                             \( [^()]* \)
                           )+
                       \)''', re.X)

print timeit.timeit("re_1.search('((()' + 'a' * 25)",
                    setup  = "from __main__ import re_1",
                    number = 10)

print timeit.timeit("re_2.search('((()' + 'a' * 25)",
                    setup  = "from __main__ import re_2",
                    number = 10) 
```

我们看到了显着的改进：

```
[nelhage@anarchique:~/tmp]$ python re.py
96.0800571442
7.41481781006e-05 
```

当我们扩展搜索字符串的长度时，这只会变得更加戏剧化。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-11-27T04:31:56.007

根据[这张表](http://www.regular-expressions.info/refflavors.html)，答案是否定的。创建了一个[RFE](http://bugs.python.org/issue433030)以将其添加到 Python 3，但被拒绝[`regex`](http://pypi.python.org/pypi/regex)支持支持它的新模块：

```
>>> import regex
>>> regex.match('"(?>.*)"', '"Quote"')
>>> regex.match('"(.*)"', '"Quote"')
<_regex.Match object at 0x00C6F058> 
```

注意：`regex`也可用于 Python 2。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T04:35:46.857

似乎不是。

[http://www.regular-expressions.info/atomic.html](http://www.regular-expressions.info/atomic.html)

> 大多数现代正则表达式风格都支持原子分组，包括 JGsoft 风格、Java、PCRE、.NET、Perl 和 Ruby。

您可以通过使用非捕获组来模拟它们的非捕获性`(?:RE)`，但是如果我没看错的话，那仍然不会给您带来优化的好处。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-11-27T04:26:54.530

来自[http://docs.python.org/2/library/re.html#regular-expression-syntax](http://docs.python.org/2/library/re.html#regular-expression-syntax)

(?P<名称>...)

与正则括号类似，但组匹配的子字符串可通过符号组名在正则表达式的其余部分中访问。组名必须是有效的 Python 标识符，并且每个组名只能在正则表达式中定义一次。符号组也是一个编号组，就好像该组没有命名一样。所以下例中名为 id 的组也可以引用为编号组 1。

例如，如果模式是 (?P[a-zA-Z_]\w*)，则可以在匹配对象方法的参数中通过其名称引用组，例如 m.group('id') 或 m .end('id')，以及正则表达式本身中的名称（使用 (?P=id)）和给 .sub() 的替换文本（使用 \g）。

(?P=名字)

```
Matches whatever text was matched by the earlier group named name. 
```

# regular-language - 证明正则语言

> ID：13577378
> 
> 赞同：1
> 
> 时间：2012-11-27T04:24:15.410
> 
> 标签：regular-language

我必须证明这个说法是错误的。如果 L1 = {ab| a∈L2, b∉L2} 是正则语言，则 L2 是正则语言。

（a 和 b 是字符串。）（假设 L1 和 L2 具有相同的字母。）

> 我的工作：
> 这个问题可以重写为：如果 L2 是规则的，那么 L1 是非常规的。（证明这是真的）
> 
> 对立证明：如果 L2 是正则的，则 L1={ab| a∈L2, b∉L2} 是非常规的

我不确定在这条线之后该怎么做。这是正确的方法吗？有人可以给我一些关于如何做到这一点的提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T04:52:51.483

令 A = "L1 = {ab| a∈L2, b∉L2} 是正则语言"。
令 B =“L2 是一种常规语言”。

问题是要证明 A → B 是假的。这等价于证明 A ∧ ¬B。用英文写着：

> L1 = {ab| a∈L2, b∉L2} 是正则语言，但 L2 不是正则语言。

所以一种策略可能是找到一个非常规的 L2 导致 L1 是规则的。如果你能做到这一点，那么你就有了一个反例，所以你已经证明了原始陈述是错误的。

# knockout.js - 敲除映射添加功能

> ID：13577379
> 
> 赞同：1
> 
> 时间：2012-11-27T04:24:17.920
> 
> 标签：knockout.js, knockout-mapping-plugin

我正在尝试向表单上的按钮添加功能。我不断收到一条消息说 alertMe 未定义。

我试图这样声明我的映射：

```
$(function () {

        var mapping = {
            create: function (options) {
                return new CsvImportItem(options.data);
            },
            alertMe: function () {
                alert('Here we go');
            }
        }

        var CsvImportItem = function (data) {
            ko.mapping.fromJS(data, {}, this);

            this.rowClass = ko.computed(function () {
                if (this.Accepted()) return 'success'; else return 'error';
            }, this);

            this.acceptItem = function () {
                this.Accepted(true);
            };

            this.declineItem = function () {
                this.Accepted(false);
            };

        }
        var viewModelJSON = ko.mapping.fromJS($.parseJSON('@Html.Raw(jsonData)'), mapping);

        ko.applyBindings(viewModelJSON);
    }); 
```

如果我将 viewModelJSON 更改为：

```
var viewModelJSON = ko.mapping.fromJS($.parseJSON('@Html.Raw(jsonData)'), {}, mapping); 
```

然后 alertMe 函数调用有效，但我的其余显示项目无效。关于我做错了什么的任何想法？

**更新以显示数据结构**

我进入视图的数据结构是类型

```
IEnumberable<Project.Namespace.CsvImportItem> 
```

因此，我得到这样的结构：

```
[
 {CsvImportItem},
 {CsvImportItem},
 {CsvImportItem}
] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T09:32:24.497

您正在尝试将 json 映射应用于映射对象，语法正确

```
var viewModelJSON = ko.mapping.fromJS($.parseJSON('@Html.Raw(jsonData)'), mapping); 
```

也跳过映射，像这样的简单场景不需要它只是做

```
ko.applyBindings(new CsvImportItem($.parseJSON('@Html.Raw(jsonData)'))); 
```

# android - 使用 TransferManager 类时如何在上传完成时收到通知？

> ID：13577384
> 
> 赞同：0
> 
> 时间：2012-11-27T04:24:56.697
> 
> 标签：android, amazon-s3, amazon-web-services, amazon, transactionmanager

我正在使用 TransferManager 上传视频。由于 TransferManager 是异步的，我如何在上传成功完成时收到通知？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T05:00:43.437

使用 TransferManager 上传会返回一个[Upload](http://docs.amazonwebservices.com/AWSAndroidSDK/latest/javadoc/com/amazonaws/services/s3/transfer/Upload.html)对象，它是[Transfer](http://docs.amazonwebservices.com/AWSAndroidSDK/latest/javadoc/com/amazonaws/services/s3/transfer/Transfer.html)的子类。此对象具有用于轮询状态 ( `isDone`, `getProgress`) 的方法，或者您也可以注册[ProgressListener](http://docs.amazonwebservices.com/AWSAndroidSDK/latest/javadoc/com/amazonaws/services/s3/model/ProgressListener.html)以在处理传输时接收事件。

# java - 使用 Java Mail API 保存电子邮件（包括图像和 HTML 数据）的最佳方式是什么？

> ID：13577389
> 
> 赞同：6
> 
> 时间：2012-11-27T04:25:59.947
> 
> 标签：java, email, pdf, jakarta-mail, html-email

我正在寻找保存包含内联图像和 HTML 内容的电子邮件正文的最佳方式。我想保留邮件包含的所有内容。

> 我的最终目标是将完整的电子邮件正文保存为 PDF

如果有将电子邮件正文写入 PDF 的直接方法？

如果不是，保存电子邮件的最佳格式是什么？

我可以使用其他一些可用的 API 将 HTML、DOC 等转换为 PDF。

```
private void downloadAttachment(Part part, String folderPath) throws Exception {
    String disPosition = part.getDisposition();
    String fileName = part.getFileName();
    String decodedText = null;
    logger.info("Disposition type :: " + disPosition);
    logger.info("Attached File Name :: " + fileName);

    if (disPosition != null && disPosition.equalsIgnoreCase(Part.ATTACHMENT)) {
        logger.info("DisPosition is ATTACHMENT type.");
        File file = new File(folderPath + File.separator + decodedText);
        file.getParentFile().mkdirs();
        saveEmailAttachment(file, part);
    } else if (fileName != null && disPosition == null) {
        logger.info("DisPosition is Null type but file name is valid.  Possibly inline attchment");
        File file = new File(folderPath + File.separator + decodedText);
        file.getParentFile().mkdirs();
        saveEmailAttachment(file, part);
    } else if (fileName == null && disPosition == null) {
        logger.info("DisPosition is Null type but file name is null. It is email body.");
        File file = new File(folderPath + File.separator + "mail.html");
        file.getParentFile().mkdirs();
        saveEmailAttachment(file, part);
    }

}
     protected int saveEmailAttachment(File saveFile, Part part) throws Exception {

    BufferedOutputStream bos = null;
    InputStream is = null;
    int ret = 0, count = 0;
    try {
        bos = new BufferedOutputStream(new FileOutputStream(saveFile));
        part.writeTo(new FileOutputStream(saveFile));

    } finally {
        try {
            if (bos != null) {
                bos.close();
            }
            if (is != null) {
                is.close();
            }
        } catch (IOException ioe) {
            logger.error("Error while closing the stream.", ioe);
        }
    }
    return count;
} 
```

请建议。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T04:45:19.050

将其保存为自然状态，作为 MimeMessage。

JavaMail MimeMessage 可以流式传输到文本，因为它们是通过邮件到达的。例如，[MimeMessage.writeTo](https://javaee.github.io/javamail/docs/api/javax/mail/internet/MimeMessage.html#writeTo-java.io.OutputStream-)将消息保存为文本。同样，[MimeMessage.parse](https://javaee.github.io/javamail/docs/api/javax/mail/internet/MimeMessage.html#parse-java.io.InputStream-)将其读回。在 MimeMessage 中，您可以很容易地获取文本、附件等。

您也可以将其作为序列化的 Java 对象流式传输，但坦率地说，我不会。文本表示更有用。

# mysql - 并行运行处理器时，我应该如何选择下一个要处理的项目？

> ID：13577402
> 
> 赞同：1
> 
> 时间：2012-11-27T04:27:55.110
> 
> 标签：mysql, design-patterns, parallel-processing, elasticsearch

我在没有数据库细节的情况下问这个问题，因为感觉答案可能在于通用设计模式，而且我不一定需要特定于系统的解决方案（我的特定系统设置在问题末尾引用）。

我有一个包含 id、url 和处理字段的公司数据库，以指示该公司当前是否正在由我的一个爬虫处理。我并行运行许多爬虫。每个人都需要选择一家公司进行处理，并在开始之前将该公司设置为处理中，这样每个公司在任何给定时间都只被单个爬虫处理。

**我应该如何构建我的系统来跟踪正在处理的公司？**

这里的挑战是我无法在我的数据库中搜索未处理的公司，然后更新该公司以将其设置为已处理，因为同时另一个爬虫可能已经选择了它。这似乎是并行处理数据时的常见问题，因此我正在寻找理论上的最佳实践。

我曾经为此使用 MySQL，并使用以下代码来保持处理器之间的一致性。然而，我正在重新设计系统，现在 ElasticSearch 将成为我的主要数据库和搜索服务器。下面的 MySQL 解决方案对我来说总是感觉像是一个 hack，而不是这个并行化问题的正确解决方案。

```
public function select_next()
{

    // set a temp variable that allows us to retrieve id of the row that is updated during next query
    $sql = 'SET @update_id := 0';
    $Result = $this->Mysqli->query( $sql );
    if( ! $Result )
        die( "\n\n    " . $this->Mysqli->error . "\n" . $sql );

    // selects next company to be crawled, marks as crawling in the db
    $sql = "UPDATE companies
            SET
                crawling = 1,
                id = ( SELECT @update_id := id )
            WHERE crawling = 0
            ORDER BY last_crawled ASC, id ASC
            LIMIT 1";
    $Result = $this->Mysqli->query( $sql );
    if( ! $Result )
        die( "\n\n    " . $this->Mysqli->error . "\n" . $sql );

    // this query returned at least one result and there are companies to be crawled
    if( $this->Mysqli->affected_rows > 0 )
    {

        // gets the id of the row that was just updated in the previous query
        $sql = 'SELECT @update_id AS id';
        $Result = $this->Mysqli->query( $sql );
        if( ! $Result )
            die( "\n\n    " . $this->Mysqli->error . "\n" . $sql );

        // set company id
        $this->id = $Result->fetch_object()->id;

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T22:09:16.570

经常用于此类问题的一种方法是分片。您可以定义一个确定性函数，将数据库中的每一行分配给爬虫。在您的情况下，这样的功能可以简单地是一个公司 id 模数爬虫。每个爬虫可以顺序处理属于这个工作分片的公司，这保证了不会同时处理任何公司。

这种方法例如被[MapReduce](https://en.wikipedia.org/wiki/MapReduce#Partition_function)的 Reduce 部分使用。

一个优点是不需要难以实现并且通常是瓶颈的事务或锁定，尤其是在分布式环境中。缺点是爬虫之间的工作分配不均，在这种情况下，一些爬虫处于空闲状态，而其他爬虫仍在处理。

# java - 如何修复 RMI 中的 javax.naming.CommunicationException？

> ID：13577404
> 
> 赞同：1
> 
> 时间：2012-11-27T04:27:56.713
> 
> 标签：java, rmi

在 RMI 服务器中：

```
 ctx = new InitialContext();           
 Account rs = new RemoteServer();
 rmiPathForObject="rmi://"+IP+":"+port+"/loginuser";
 ctx.bind(rmiPathForObject, rs); 
```

客户：

```
Context ctx;
Account acc = null;
try {
    ctx = new InitialContext();

    Object o = ctx.lookup("rmi://localhost:2345/loginuser");
    acc = (Account) o;
} catch (NamingException ex) {
    Logger.getLogger(DTTMessenger.class.getName()).log(Level.SEVERE, null, ex);
} 
```

当我将客户端连接到服务器时，会发生以下异常。为什么会抛出这个异常？我怎样才能解决这个问题？

```
Nov 27, 2012 11:23:09 AM dttmessenger.DTTMessenger btnLoginActionPerformed SEVERE: null
    javax.naming.CommunicationException [Root exception is java.rmi.UnmarshalException: error unmarshalling return; nested exception is: 
        java.lang.ClassNotFoundException: dttserver.Account (no security manager: RMI class loader disabled)]
        at com.sun.jndi.rmi.registry.RegistryContext.lookup(RegistryContext.java:118)
        at com.sun.jndi.toolkit.url.GenericURLContext.lookup(GenericURLContext.java:203)
        at javax.naming.InitialContext.lookup(InitialContext.java:411)
        at dttmessenger.DTTMessenger.btnLoginActionPerformed(DTTMessenger.java:141)
        at dttmessenger.DTTMessenger.access$000(DTTMessenger.java:22)
        at dttmessenger.DTTMessenger$1.actionPerformed(DTTMessenger.java:75)
        at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
        at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
        at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
        at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
        at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
        at java.awt.Component.processMouseEvent(Component.java:6505)
        at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
        at java.awt.Component.processEvent(Component.java:6270)
        at java.awt.Container.processEvent(Container.java:2229)
        at java.awt.Component.dispatchEventImpl(Component.java:4861)
        at java.awt.Container.dispatchEventImpl(Container.java:2287)
        at java.awt.Component.dispatchEvent(Component.java:4687)
        at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
        at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
        at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
        at java.awt.Container.dispatchEventImpl(Container.java:2273)
        at java.awt.Window.dispatchEventImpl(Window.java:2719)
        at java.awt.Component.dispatchEvent(Component.java:4687) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T09:48:10.463

您需要将异常中命名的类部署到客户端。重复直到关闭。看起来好像您可能在不同的包中有两个 Account 类，这当然使它们有所不同。

# c++ - 在 std::map 中插入 std::map

> ID：13577407
> 
> 赞同：1
> 
> 时间：2012-11-27T04:28:24.827
> 
> 标签：c++, visual-c++, stl, xcode4.2

我有一个容器`std::map<string,std::map<string,int>>`。

1.  如何将数据插入到这样的容器中？我是否必须将内部地图作为附加变量？代码应在 MSVC 2010 和 XCode 4.2 (Snow Leopard) 下编译。

2.  Snow Leopard（10.6）下的XCode 4.2是否支持这样的容器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T04:34:03.343

只需使用重载`[]`运算符即可完成：

```
std::map<string,std::map<string,int> > data;
data["foo"]["bar"] = 10; 
```

是的，Xcode 4.2 支持它们，我个人在 OSX 下使用它们没有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T04:36:00.417

作为一个简单的答案，您需要有一个临时地图：

```
std::map<string, int> tempMap;
std::string tempString; 
```

然后，您需要在设置它们后将它们插入到上面的地图中。

```
tempMap.insert(std::pair<string, std::map<string, int>>(tempString, tempMap)) 
```

然后您可以像在 Jacks answer 中一样访问它们。

# java - 如何计算标签的最大拟合字体大小？

> ID：13577408
> 
> 赞同：4
> 
> 时间：2012-11-27T04:28:26.167
> 
> 标签：java, linux, eclipse, swt, jface

我有一个`Canvas`包含一个`Label`. 我想根据画布大小设置这个标签的字体大小。我们怎么能做到这一点？

编辑：“包含”意味着，画布和标签边界是相同的。

EDIT2：我有这个用于 Swing，但我无法将它转换为 SWT；

```
Font labelFont = label.getFont();
String labelText = label.getText();
int stringWidth = label.getFontMetrics(labelFont).stringWidth(labelText);
int componentWidth = label.getWidth();
double widthRatio = (double)componentWidth / (double)stringWidth;
int newFontSize = (int)(labelFont.getSize() * widthRatio);
int componentHeight = label.getHeight();
int fontSizeToUse = Math.min(newFontSize, componentHeight); 
```

EDIT3：这是我的标签字体大小计算器类

```
public class FitFontSize {
    public static int Calculate(Label l) {
        Point size = l.getSize();
        FontData[] fontData = l.getFont().getFontData();
        GC gc = new GC(l);

        int stringWidth = gc.stringExtent(l.getText()).x;

        double widthRatio = (double) size.x / (double) stringWidth;
        int newFontSize = (int) (fontData[0].getHeight() * widthRatio);

        int componentHeight = size.y;
        System.out.println(newFontSize + " " + componentHeight);
        return Math.min(newFontSize, componentHeight);
    }
} 
```

这是我在窗口顶部的标签。我希望它的字体大小根据图层大小的大小。

```
 Label l = new Label(shell, SWT.NONE);
    l.setText("TITLE HERE");
    l.setBounds(0,0,shell.getClientArea().width, (shell.getClientArea().height * 10 )/ 100);
    l.setFont(new Font(display, "Tahoma", 16,SWT.BOLD));
    l.setFont(new Font(display, "Tahoma", FitFontSize.Calculate(l),SWT.BOLD)); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-27T08:40:50.153

我刚刚移植了上面的代码。

`String`您可以使用该方法在 SWT中获取 a 的范围（长度），`GC.stringExtent();`并且您需要 Class [FontData](http://help.eclipse.org/helios/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/graphics/FontData.html)来获取`Label`.

```
 Label label = new Label(parent, SWT.BORDER);
    label.setSize(50, 30);
    label.setText("String");

    // Get the label size and the font data
    Point size = label.getSize();
    FontData[] fontData = label.getFont().getFontData();
    GC gc = new GC(label);

    int stringWidth = gc.stringExtent(label.getText()).x;

    // Note: In original answer was ...size.x + (double)..., must be / not +
    double widthRatio = (double) size.x / (double) stringWidth;
    int newFontSize = (int) (fontData[0].getHeight() * widthRatio);

    int componentHeight = size.y;
    int fontsizeToUse = Math.min(newFontSize, componentHeight);

    // set the font
    fontData[0].setHeight(fontsizeToUse);
    label.setFont(new Font(Display.getCurrent(), fontData[0]));

    gc.dispose(); 
```

资料来源：

*   [Stackoverflow：仅更改 SWT 中的字体大小](https://stackoverflow.com/questions/1449968/change-just-the-font-size-in-swt)
*   [Eclipse API：GC](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/graphics/GC.html)

# c# - 出现文件下载（打开/保存/取消）对话框时，会触发 WebBrowser 的什么事件？

> ID：13577410
> 
> 赞同：1
> 
> 时间：2012-11-27T04:29:10.273
> 
> 标签：c#, browser, download, windows-applications, navigatetourl

我目前在 Windows 应用程序上使用 C# 和 webbrowser 导航到将自动触发文件下载对话框或打开/保存/取消对话框的站点。问题是我想**在文件下载对话框出现后**关闭当前正在运行 Web 导航**的表单窗口**。所以我在这里问是否有一个事件会在文件下载时触发​​，以便我可以输入：

 **```
this.close() 
```

在那个事件上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T04:40:35.930

您可以订阅 DWebBrowserEvents2.FileDownload 事件。

[一探究竟...](https://stackoverflow.com/questions/12881729/display-custom-dialog-when-file-downloaded)**

# android - 在 Android 应用程序中的页面转换期间看到的白色背景

> ID：13577413
> 
> 赞同：3
> 
> 时间：2012-11-27T04:29:42.197
> 
> 标签：android, css, cordova, jquery-mobile

在页面转换期间，白色背景闪烁，这在应用程序中看起来很糟糕.....我尝试设置以下 CSS 属性

```
-webkit-backface-visibility: hidden; 
```

也

```
.ui-mobile-viewport-transitioning,
.ui-mobile-viewport-transitioning .ui-page {
    overflow: visible; 
```

}

但是这两个都不适用于我的情况......我在我的应用程序中使用android 4.1和jquery......任何人有任何建议，我会感谢你......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T15:44:39.640

如果您不想要页面转换，也许您需要使用

$.mobile.changePage('#yourPage', "none"); ？？？

如果没有解决，请参阅[http://jquerymobile.com/demos/1.2.0/docs/pages/loader.html](http://jquerymobile.com/demos/1.2.0/docs/pages/loader.html)

# objective-c - 按比例裁剪 UIImageView 的图像以填充模式

> ID：13577414
> 
> 赞同：0
> 
> 时间：2012-11-27T04:29:50.743
> 
> 标签：objective-c, ios, cocoa-touch, uiimageview, crop

我有一个 UIImageView，它处于按比例填充模式。现在我想在 imageview 中裁剪图像。我在这个图像视图上有一个矩形，用户可以移动和更改大小。选择特定尺寸后，我想使用此框架裁剪图像。但是由于我的 uiimageview 模式是缩放以填充这会使裁剪矩形变得混乱，并且裁剪了不同的部分。有没有人遇到过这个问题。如何正确裁剪？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T07:26:39.787

您的选择是计算或使用此解决方法：

```
-(UIImage *)imageFromImageView:(UIImageView *)view withCropRect:(CGRect)cropRect
{
    UIGraphicsBeginImageContextWithOptions(view.bounds.size, view.opaque, 0.0);
    [view.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage * largeImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

CGImageRef imageRef = CGImageCreateWithImageInRect([largeImage CGImage], cropRect);
UIImage* img = UIImage imageWithCGImage:imageRef];
CGImageRelease(imageRef);
    return img;
} 
```

# java - AsyncTask 和 Handler 在注销后总是启动 Activity 两次

> ID：13577418
> 
> 赞同：0
> 
> 时间：2012-11-27T04:30:26.233
> 
> 标签：java, android, facebook

注销一次后，我无法将 fbid 发送到我的服务器。如果我想再次登录，它总是发送两次请求并开始两次活动。

MainActivity.java：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Log.i("TheGaffer", "ONCREATE");
    mFacebook = new Facebook(APP_ID);
    SessionStore.restore(mFacebook, this);
    setContentView(R.layout.login_view);
    mLoginButton = (LoginButton) findViewById(R.id.login);
    SessionEvents.addAuthListener(new SampleAuthListener());
    mLoginButton.init(this, mFacebook);
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    mFacebook.authorizeCallback(requestCode, resultCode, data);
}
public class SampleAuthListener implements AuthListener {

    public void onAuthSucceed() {
        new fbRequest().execute("/user_profiles/registerUser");
    }

    private class fbRequest extends AsyncTask<String, Void, String> {

        protected void onPreExecute() {
            progressDialog = ProgressDialog.show(TheGaffer.this , null,
                    "Loading...");
        }

        protected String doInBackground(String... urls) {
            String fbid = null;
            Bundle params = new Bundle();
            params.putString("fields", "id,name");
            try {
                JSONObject jsonObjSend = new JSONObject();
                JSONObject fbData = new JSONObject(mFacebook.request("me", params));
                fbid = fbData.getString("id");
                jsonObjSend.put("fbid", fbData.getString("id"));
                jsonObjSend.put("username", fbData.getString("name"));
                jsonObjSend.put("playerPhoto", "http://graph.facebook.com/"+ fbData.getString("id") +"/picture");
                HttpClient.SendHttpPost(urls[0], jsonObjSend);
            } catch (Exception e) {
                Log.e("FACEBOOK", "Error parsing data " + e.toString());
            }
            return fbid;
        }

        @Override
        protected void onPostExecute(String fbid) {
            Toast.makeText(getApplicationContext(), "Login successful", Toast.LENGTH_SHORT).show();
            progressDialog.dismiss();
            Intent intent = new Intent(TheGaffer.this, TeamActivity.class);
            intent.putExtra("fbid", fbid);
            startActivity(intent);
        }
    } 
```

团队活动.java：

```
 @Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case R.id.menu_create_team:
        intent = new Intent(TeamActivity.this, CreateTeam.class);
        return true;

    case R.id.menu_logout:
        Log.i("Logout", "Logged out");
        Intent intent = new Intent(TeamActivity.this, TheGaffer.class);
        startActivity(intent);
        return true;

    default:
        return super.onOptionsItemSelected(item);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T05:50:49.550

Once I was trapped in similar situation where Activity call twice one after another.

To avoid this after lots of research I find a very easy solution.

May be solution is not perfect but works for me

in manifest.xml file

in your activity just add

```
android:launchMode="singleTask" 
```

# macos - .f 到 .f90 错误导致“(1) 处的不可分类语句”？

> ID：13577419
> 
> 赞同：0
> 
> 时间：2012-11-27T04:30:30.900
> 
> 标签：macos, formatting, fortran, gfortran

我刚刚将 .f 更改为 .f90 并在我的 Mac（OSX 10.7）上使用 gfortran 编译，发现它在以下行编译失败：

```
PartPos(1:3,1+nstart:nstart+npart(1))= pos(1:3, 1 + npart(0)):sum(npart(0:1))) 
```

进一步分配和定义：

```
real*4,allocatable    :: PartPos(:,:)
...
allocate(PartPos(1:3, 1:Ntot)) 
```

所以它应该运行良好。当我注释掉第一行时，代码编译得很好。我的理解是，两者之间的唯一区别是格式（这可能会影响我）。有人可以告诉我我错过了什么。抱歉，我是 Fortran 的新手，在我来这里之前一直在寻找解决方案。提前致谢。

我的（有点没用的）错误输出：

```
 PartPos(1:3,1+nstart:nstart+npart(1))= pos(1:3, 1 + npart(0)):sum(npart(0
  1
  Error: Unclassifiable statement at (1) 
```

编译使用：

```
>> gfortran program_test.f90 -o program_test 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T04:36:42.157

您的 RHS 似乎缺少括号 [我看到 4 "(" 和 5 ")"]。

# jquery - jquery 工具验证器无法正常工作，并且元素挂在父元素下方的问题

> ID：13577420
> 
> 赞同：7
> 
> 时间：2012-11-27T04:30:41.340
> 
> 标签：jquery, css, ruby-on-rails, validation, jquery-tools

我目前有2个问题。我买了一个模板并试图将它集成到一个 Rails 应用程序中。

**第一个问题：**

我在使用 jquery 工具表单验证时遇到问题。验证不起作用。当您单击提交按钮时，它只显示验证消息应位于的输入值。此外，即使填写了必填字段，它仍然不允许我提交表单。

如果您转到此链接 - ，您可以尝试编辑数据以查看验证错误。

**第二个问题：**

如果您转到此链接 - ，您可以看到头像和“编辑信息”按钮悬在灰色背景中。我怎样才能让那个灰色背景完全封装头像图标？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T12:12:33.483

问题仅在您的验证脚本中。，

***请参考以下位置：***

看到它在行动[http://jsbin.com/uwuqul/1/edit](http://jsbin.com/uwuqul/1/edit)

我对你的编码做了三处更改，它们是，

(1)。我已更改验证器脚本

```
<script src="http://cdn.jquerytools.org/1.2.7/full/jquery.tools.min.js" type="text/javascript"></script> 
```

(2)。对于电子邮件验证，我们需要更改电子邮件字段中的**类型**，例如

```
<input id="demo_email" name="demo_email" required="required" size="30" type="text" value="" novalidate/> 
```

（到）

```
<input id="demo_email" name="demo_email" required="required" size="30" type="email" value="" novalidate/> 
```

(3)。在验证器脚本中添加样式

```
jQuery(".edit_profile_form").validator({ 
      position: 'top', 
      offset: [25, 10],
      messageClass:'form-error',
      message: '<div style="width:270px;"><em/></div>' // em element is the arrow
    }).attr('novalidate', 'novalidate'); 
```

我认为这可以帮助您解决问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T18:29:46.563

对于问题 #2，您的标题有 css 问题：

```
.main-content > header {
    height: 16px;
} 
```

摆脱那个高度，容器将增长以适应其中的元素

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T21:23:29.547

关于第一个问题，[jQuery 工具验证器](http://jquerytools.org/documentation/validator/index.html)吓坏了，你的 jqt 版本正在`1.2.6`考虑升级它[`1.2.7`](http://jquerytools.org/download/)并全部设置好。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-27T09:54:46.383

在下面尝试解决您的问题#1

```
set required="true" rather than required="required" 
```

我遇到了同样的问题，有关更多详细信息，请查看[此](https://stackoverflow.com/questions/13210017/dropdown-box-required-validation-using-jquery-tools-validator)问题。

> **更新**

好像是自定义下载的问题。当我尝试 CDN 版本时，它运行良好。

[链接到 CDN。](http://cdn.jquerytools.org/1.2.7/full/jquery.tools.min.js)

# linux - GCC 4.7.2 需要 ppl？

> ID：13577436
> 
> 赞同：11
> 
> 时间：2012-11-27T04:32:41.333
> 
> 标签：linux, gcc

我正在尝试配置 GCC 4.7.2，但它失败了`configure: error: Unable to find a usable PPL`

我查看了[GCC 先决条件页面](http://gcc.gnu.org/install/prerequisites.html)，但没有在任何地方提及 PPL。

我正在使用[CLooG 0.17.0](http://www.cloog.org/)，它使用[ISL](http://freecode.com/projects/isl)，因此不再需要 PPL （据我所知）

GCC 中对 PPL 是否还有其他要求，这意味着我仍然需要 PPL，还是我的`configure`行中缺少一些标志？

我将以下选项传递给`configure`：

*   `--enable-cloog-backend=isl`
*   `--with-cloog=$PREFIX`
*   `--with-isl=$PREFIX`
*   `--with-gmp=$PREFIX`
*   `--with-mpfr=$PREFIX`
*   `--with-mpc=$PREFIX`

为了完整起见，我的完整配置行如下：

```
./configure --prefix=/hostname/tmp/syddev/sdk/gcc472/suse11/x86_64 \
   --disable-multilib --enable-cloog-backend=isl \
   --with-mpc=/hostname/tmp/syddev/sdk/gcc472/suse11/x86_64 \
   --with-mpfr=/hostname/tmp/syddev/sdk/gcc472/suse11/x86_64 \
   --with-gmp=/hostname/tmp/syddev/sdk/gcc472/suse11/x86_64 \
   --with-isl=/hostname/tmp/syddev/sdk/gcc472/suse11/x86_64 \
   --with-cloog=/hostname/tmp/syddev/sdk/gcc472/suse11/x86_64 \
   --build=x86_64-suse-linux --with-pkgversion='SIG build 11/27/2012' \
   --with-gxx-include-dir=/hostname/tmp/syddev/sdk/gcc472/suse11/x86_64/include/c++/4.7.2 \
   --enable-version-specific-runtime-libs 
```

**更新：**

为了尝试取得进展，我决定将[PPL](http://bugseng.com/products/ppl)添加到我的安装列表中，并添加`--with-ppl=$PREFIX`到我的配置行中。

配置仍然失败`configure: error: Unable to find a usable PPL`

看来这是`configure`脚本中的一个错误：如果配置失败`PPL_MINOR_VERSION < 11`

使用最新版本`PPL_MINOR_VERSION=0`（和`PPL_MAJOR_VERSION=1`）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-21T01:03:44.610

GCC Prerequisites 页面抢先一步，展示了 GCC 4.8 的先决条件。

GCC 4.7.2 仍然使用 PPL 而不是 ISL，如下`--with-isl=PATH`所示`configure`：

```
Optional Packages:
  --with-PACKAGE[=ARG]    use PACKAGE [ARG=yes]
  --without-PACKAGE       do not use PACKAGE (same as --with-PACKAGE=no)
  --with-build-libsubdir=DIR  Directory where to find libraries for build system
  --with-mpc=PATH         specify prefix directory for installed MPC package.
                          Equivalent to --with-mpc-include=PATH/include plus
                          --with-mpc-lib=PATH/lib
  --with-mpc-include=PATH specify directory for installed MPC include files
  --with-mpc-lib=PATH     specify directory for the installed MPC library
  --with-mpfr-dir=PATH    this option has been REMOVED
  --with-mpfr=PATH        specify prefix directory for installed MPFR package.
                          Equivalent to --with-mpfr-include=PATH/include plus
                          --with-mpfr-lib=PATH/lib
  --with-mpfr-include=PATH
                          specify directory for installed MPFR include files
  --with-mpfr-lib=PATH    specify directory for the installed MPFR library
  --with-gmp-dir=PATH     this option has been REMOVED
  --with-gmp=PATH         specify prefix directory for the installed GMP
                          package. Equivalent to
                          --with-gmp-include=PATH/include plus
                          --with-gmp-lib=PATH/lib
  --with-gmp-include=PATH specify directory for installed GMP include files
  --with-gmp-lib=PATH     specify directory for the installed GMP library
  --with-host-libstdcxx=L use linker arguments L to link with libstdc++ when
                          linking with PPL
  --with-stage1-ldflags=FLAGS
                          linker flags for stage1
  --with-stage1-libs=LIBS libraries for stage1
  --with-boot-libs=LIBS   libraries for stage2 and later
  --with-boot-ldflags=FLAGS
                          linker flags for stage2 and later
  --with-ppl=PATH         specify prefix directory for the installed PPL
                          package. Equivalent to
                          --with-ppl-include=PATH/include plus
                          --with-ppl-lib=PATH/lib
  --with-ppl-include=PATH specify directory for installed PPL include files
  --with-ppl-lib=PATH     specify directory for the installed PPL library
  --with-cloog=PATH       Specify prefix directory for the installed CLooG-PPL
                          package. Equivalent to
                          --with-cloog-include=PATH/include plus
                          --with-cloog-lib=PATH/lib
  --with-cloog-include=PATH
                          Specify directory for installed CLooG include files
  --with-cloog-lib=PATH   Specify the directory for the installed CLooG
                          library
  --with-build-sysroot=SYSROOT
                          use sysroot as the system root during the build
  --with-debug-prefix-map='A=B C=D ...'
                          map A to B, C to D ... in debug information
  --with-build-config='NAME NAME2...'
                          use config/NAME.mk build configuration
  --with-build-time-tools=PATH
                          use given path to find target tools during the build 
```

不幸的是，他们不维护 4.8 之前版本的先决条件页面。

# css - 为什么这个元素与之前的元素重叠（对不起，再次）？

> ID：13577440
> 
> 赞同：1
> 
> 时间：2012-11-27T04:33:15.097
> 
> 标签：css, html

这是代码：

```
<form id="the_form" action="">ev
</div>
<!-- final pay_block -->
<div class="linea"/>
<div class="spacer"/> 
```

linea 与购买按钮重叠，现在位于中间，因为有 margin-bottom: 15px 已应用。

编辑：

这是网站：[http ://tinyurl.com/cboyymm](http://tinyurl.com/cboyymm)

我还想要在同一位置显示支付按钮。我为产品描述留出了足够的空间，并且我之前为不同的 div 固定了一个高度。这是正确的吗？我想以最简约的方式制作它。非常欢迎提示，因为我正在使用这个项目来学习。

提前致谢。起初我很害怕在这里发东西，因为我不想弄乱，我很惭愧我这么笨。但我受到了非常热烈的欢迎。不想滥用，只知道为什么会发生这种小事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T04:38:50.987

现在定义`min-height`

```
#pay_block {
    min-height: 78px;  // add this line 
height:78px;  // remove this line

} 
```

行号：-此 css 文件**tienda1.css中的****612**

 **结果是这个

![在此处输入图像描述](../Images/b10beae9aa64de32bedaeac5dfa0ef4e.png)**

# javascript - 比较javascript中的多个变量

> ID：13577442
> 
> 赞同：6
> 
> 时间：2012-11-27T04:33:17.590
> 
> 标签：javascript

我需要比较四个变量。如果任何两个变量相同，我需要显示警报。我确实喜欢以下方式。

```
var a =1;
var b =2;
var c =3;
var d =4;

if((a==b)||(a==c)||(a==d)||(b==c)||(b==d)||(c==d)){
alert("Value is same, Please change the value");
return false;
} 
```

是否可以将表达式简化为分别检查所有变量的一个条件瞬间。请提前建议... TnQ。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T04:45:33.747

好吧，我会把它扔进戒指，虽然这可能不是正确的方法，但它很有趣。（注意：浏览器兼容性问题和可能的过度杀戮即将出现）

```
var a = 1,
    b = 2,
    c = 1,
    d = 3;
[a, b, c, d].sort(function(a, b) {
    return a - b;
}).reduce(function(a, b) {
    if (a == b) {
        alert('HERE');
    }
    return b;
}); 
```

在这里演示：http:
[//jsfiddle.net/rlemon/Eu4qG/](http://jsfiddle.net/rlemon/Eu4qG/)

进一步阅读：
[Array.reduce](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/Reduce)
[Array.sort](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T04:55:34.850

`while`足够。这将适用于任何长度的数组。但是`a`数组会被修改，你可能需要复制。

```
a = [1, 2, 3, 4];
while (a.length > 1)
  if (a.indexOf(a.pop()) != -1) {
    alert("Value is same, Please change the value");
    break;
  } 
```

我之前使用 的答案（修订版）`for`有点尴尬。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T04:39:08.953

这将检查*任何*值是否与任何其他值相同：

```
var values = [a, b, c, d, e, f /* ... */];

function shared_values(values) {
    for (var i = 0; i < values.length; i++) {
        for (var j = i; j < values.length; j++) {
            if (values[i] === values[j]) {
                return true;
            }
        }
    }
    return true;
}

if (shared_values(values)) {
    // Don't submit form or whatever
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T04:45:22.167

您可以编写一个函数来为您检查它们，可能是这样的：

**编辑：**根据其他答案，您可以通过排序使其更高效

```
function areTwoEqual() {
    var arg_list = [].slice.call(arguments).sort(
        function(a,b) { return a-b; }
    );
    var vals = {};
    for(var i = 0, len = arg_list.length; i < len; i++) {
        if(vals[arg_list[i]]) {
            return true;
        }
        vals[arg_list[i]] = '1';
    }
    return false;
}

var a =1;
var b =2;
var c =3;
var d =1;

if(areTwoEqual(a,b,c,d)) {
    alert('Two values are identical!');
} else {
    alert('all values are unique');
}​ 
```

JSFiddle：http: [//jsfiddle.net/thesouthstar86/j7LmZ/](http://jsfiddle.net/thesouthstar86/j7LmZ/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-27T23:48:44.297

避免同一元素与其自身进行比较

```
if (values[i] === values[j]) { } 
```

我认为应该升级到

```
if ( (values[i] === values[j]) && (i != j) ) { } 
```

但感谢脚本

# database - 声纳数据库

> ID：13577443
> 
> 赞同：2
> 
> 时间：2012-11-27T04:33:29.790
> 
> 标签：database, sonarqube

在声纳中，文件夹和文件存储在“项目”表中的算法。
哪些是用于将这些数据存储到“项目”表的文件。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T05:59:41.860

我建议您不要过多地分析 Sonar 数据库模式（除非您打算成为 Sonar 开发人员）。

与 Sonar 交互的最佳（也是推荐方式）是通过已发布的[REST API](http://docs.codehaus.org/display/SONAR/Web+Service+API)

# android - 如何在 Android 的 Fragment 后台运行函数？

> ID：13577448
> 
> 赞同：0
> 
> 时间：2012-11-27T04:34:32.457
> 
> 标签：android, android-asynctask, android-fragments

我有两个片段片段 A 和片段 B。在两个片段中，我都使用 asynctask 并在后台运行一些函数。这些函数（用于解析 XML 和填充列表视图）。当我启动两个片段中的应用程序时，两个片段中的函数同时运行.所以应用程序变慢了。**我需要的是首先在片段 A 中运行函数。片段 B 中的函数应该仅在完成片段 B 中的函数后启动。**我该如何实现？请有人帮助我。在此先感谢......

片段 A=>

```
 public class A extends Fragment {

    static String urls;
    // XML node keys
    static final String KEY_HEAD = "item"; // parent node
    // static final String KEY_TITLE = "title";
    static final String KEY_DATE = "pubDate";
    public static String headflag = "";
    int f = 0;
    ListView list;
    KeralaAdapter adapter;
    ProgressBar loading;
    ArrayList<HashMap<String, String>> newsList;
    public static Kerala classnam;

    public static String[] Title;
    public static String[] Description;
    public static String[] Tit;
    public static String[] Tit2;
    public static String[] Desc;
    public static String[] Desc2;
    public static String[] image;
    public static String[] Date;
    public static String[] Flash;
    public static String[] Fl;
    public static String[] Fl2;
    public static NodeList nl;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        // Inflating layout
        View v = inflater.inflate(R.layout.kerala_fragment, container, false);
        // We obtain layout references

        return v;

    }

    @Override
    public void onViewCreated(View view, Bundle savedInstanceState) {
        super.onViewCreated(view, savedInstanceState);
        // We set clear listener

        if (Headlines.headflag == "malayalam") {
            urls = "http://www.abc.com/rssfeeds/17/1/rss.xml";

        }

        if (Headlines.headflag == "english") {
            urls = "http://www.abc.com/en/rssfeeds/1/latest/rss.xml";

        }

        loading = (ProgressBar) getActivity().findViewById(R.id.loading);
        new ProgressAsyncTask().execute();

    }

    public void populate_listview() {

        newsList = new ArrayList<HashMap<String, String>>();
        String MarqueeStr = "";

        for (int i = 0; i < nl.getLength(); i++) {
            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();
            Element e = (Element) nl.item(i);

            // map.put(KEY_DATE, parser.getValue(e, KEY_DATE));

            newsList.add(map);

        }

    }

    public void StartProgress() {
        new ProgressAsyncTask().execute();
    }

    public class ProgressAsyncTask extends AsyncTask<Void, Integer, Void> {

        int myProgress;

        @Override
        protected void onPreExecute() {
            // TODO Auto-generated method stub
            super.onPreExecute();

            myProgress = 0;

        }

        @Override
        protected void onPostExecute(Void result) {
            // TODO Auto-generated method stub
            super.onPostExecute(result);
            list = (ListView) getActivity().findViewById(R.id.list2);

            // Getting adapter by passing xml data ArrayList
            adapter = new KeralaAdapter(getActivity(), newsList);
            list.setAdapter(adapter);

            loading.setVisibility(View.INVISIBLE);

            list.setOnItemClickListener(new OnItemClickListener() {

                public void onItemClick(AdapterView<?> parent, View view,
                        int position, long id) {

                    Intent myintent = new Intent(
                            "com.madhyamam.malayalam2keralapodcast.PODCAST");
                    Bundle mybundle = new Bundle();
                    mybundle.putInt("number", position);
                    myintent.putExtras(mybundle);

                    startActivity(myintent);

                }
            });

        }

        @Override
        protected Void doInBackground(Void... arg0) {
            // TODO Auto-generated method stub
            getActivity().finishActivity(5);
            parse();                         //Here is the first function in fragment A
            if (Title != null) {
                populate_listview();    //Second function
            }
            return null;
        }

        @Override
        protected void onProgressUpdate(Integer... values) {
            // TODO Auto-generated method stub

        }

    }

    public void parse() {

                 //parsing done here....

    }

} 
```

片段 B=>

```
public class B extends Fragment {

    static String urls;
    // XML node keys
    static final String KEY_HEAD = "item"; // parent node
    // static final String KEY_TITLE = "title";
    static final String KEY_DATE = "pubDate";
    public static String headflag = "";
    int f = 0;
    ListView list;
    NationalAdapter adapter;
    ProgressBar loading;
    ArrayList<HashMap<String, String>> newsList;
    public static National classnam;

    public static String[] Title;
    public static String[] Description;
    public static String[] Tit;
    public static String[] Tit2;
    public static String[] Desc;
    public static String[] Desc2;
    public static String[] image;
    public static String[] Date;
    public static String[] Flash;
    public static String[] Fl;
    public static String[] Fl2;
    public static NodeList nl;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        // Inflating layout
        View v = inflater.inflate(R.layout.national_fragment, container, false);
        // We obtain layout references

        return v;

    }

    @Override
    public void onViewCreated(View view, Bundle savedInstanceState) {
        super.onViewCreated(view, savedInstanceState);
        // We set clear listener

        if (Headlines.headflag == "malayalam") {
            urls = "http://www.abc.com/rssfeeds/18/1/rss.xml";

        }

        if (Headlines.headflag == "english") {
            urls = "http://www.abc.com/en/rssfeeds/2/latest/rss.xml";

        }

        loading = (ProgressBar) getActivity().findViewById(R.id.loading2);
        new ProgressAsyncTask().execute();

    }

    public void populate_listview() {

        newsList = new ArrayList<HashMap<String, String>>();
        String MarqueeStr = "";

        for (int i = 0; i < nl.getLength(); i++) {
            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();
            Element e = (Element) nl.item(i);

            // map.put(KEY_DATE, parser.getValue(e, KEY_DATE));

            newsList.add(map);

        }

    }

    public void StartProgress() {
        new ProgressAsyncTask().execute();
    }

    public class ProgressAsyncTask extends AsyncTask<Void, Integer, Void> {

        int myProgress;

        @Override
        protected void onPreExecute() {
            // TODO Auto-generated method stub
            super.onPreExecute();

            myProgress = 0;

        }

        @Override
        protected void onPostExecute(Void result) {
            // TODO Auto-generated method stub
            super.onPostExecute(result);

            list = (ListView) getActivity().findViewById(R.id.list3);

            // Getting adapter by passing xml data ArrayList
            adapter = new NationalAdapter(getActivity(), newsList);
            list.setAdapter(adapter);
            loading.setVisibility(View.INVISIBLE);

            list.setOnItemClickListener(new OnItemClickListener() {

                public void onItemClick(AdapterView<?> parent, View view,
                        int position, long id) {

                    Intent myintent = new Intent(
                            "com.madhyamam.malayalam2nationalpodcast.PODCAST");
                    Bundle mybundle = new Bundle();
                    mybundle.putInt("number", position);
                    myintent.putExtras(mybundle);

                    startActivity(myintent);

                }
            });

        }

        @Override
        protected Void doInBackground(Void... arg0) {
            // TODO Auto-generated method stub

            parse();               //First function in fragment B
            if (Title != null) {
                populate_listview(); // Second function in fragment B
            }

            return null;
        }

        @Override
        protected void onProgressUpdate(Integer... values) {
            // TODO Auto-generated method stub

        }

    }

    public void parse() {

           //parsing done here....
    }

} 
```

和主要活动=>

```
public class MainActivity extends SlidingMenuActivity {

    private LinearLayout MenuList;
    private Button btnToggleMenuList;
    private int screenWidth;
    private boolean isExpanded;

    private ViewPager mViewPager;

    private ProgressDialog pd;
    TextView settings, headlines, kerala, national, international, sports,
            tech, enter, bus, hotwheels, gulf;
    static TextView flashnews;
    public static int stopflag = 0;
    HorizontalScrollView scroll;
    private ListView listView;
    static int currentRotation;
    public PagerTabStrip pagerTabStrip;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        Context context = getApplicationContext();

        setLayoutIds(R.layout.slidingtab, R.layout.main);
        setAnimationDuration(300);
        super.onCreate(savedInstanceState);

        btnToggleMenuList = (Button) findViewById(R.id.BtnSlide);

        btnToggleMenuList.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                toggleMenu();
                startanim();
            }

        });

        SharedPreferences mlmprf = getSharedPreferences("malayalam",
                MODE_PRIVATE);
        final SharedPreferences.Editor mlmedit = mlmprf.edit();

        if (mlmprf.getBoolean("enable", true)) {
            Headlines.headflag = "malayalam";
        } else {
            Headlines.headflag = "english";
        }

        flashnews = (TextView) findViewById(R.id.flashs);
        flashnews.setSelected(true);
        flashnews.setEllipsize(TruncateAt.MARQUEE);
        flashnews.setHorizontallyScrolling(true);
        flashnews.setSingleLine(true);
        flashnews.setLines(1);

        ;

        settings = (Button) findViewById(R.id.settings);

        headlines = (TextView) findViewById(R.id.headlines);
        kerala = (TextView) findViewById(R.id.kerala);
        national = (TextView) findViewById(R.id.national);
        international = (TextView) findViewById(R.id.international);
        sports = (TextView) findViewById(R.id.sports);
        tech = (TextView) findViewById(R.id.tech);
        gulf = (TextView) findViewById(R.id.gulf);
        enter = (TextView) findViewById(R.id.entertainment);
        bus = (TextView) findViewById(R.id.business);
        hotwheels = (TextView) findViewById(R.id.hotwheels);

        Typeface tf = Typeface.createFromAsset(getAssets(), "fonts/kozuka.otf");

        headlines.setTypeface(tf);
        kerala.setTypeface(tf);
        national.setTypeface(tf);
        international.setTypeface(tf);
        sports.setTypeface(tf);
        tech.setTypeface(tf);
        gulf.setTypeface(tf);
        enter.setTypeface(tf);
        bus.setTypeface(tf);
        hotwheels.setTypeface(tf);

        pagerTabStrip = (PagerTabStrip) findViewById(R.id.pager_title_strip);
        pagerTabStrip.setDrawFullUnderline(true);
        pagerTabStrip.setTabIndicatorColor(Color.rgb(3, 158, 203));

        headlines.setPressed(true);

        // We get UI references
        mViewPager = (ViewPager) findViewById(R.id.viewpager);

        // We set pager adapter
        mViewPager.setAdapter(new MyAdapter(this));
        mViewPager.setOffscreenPageLimit(9);
        // We set receiver button listener

    }

    protected void startanim() {
        // TODO Auto-generated method stub

        RotateAnimation anim = new RotateAnimation(currentRotation,
                currentRotation + 180, Animation.RELATIVE_TO_SELF, 0.5f,
                Animation.RELATIVE_TO_SELF, 0.5f);

        currentRotation = (currentRotation + 180) % 360;
        anim.setInterpolator(new LinearInterpolator());
        anim.setDuration(400);
        anim.setFillEnabled(true);

        anim.setFillAfter(true);

        // Start animating the image

        btnToggleMenuList.startAnimation(anim);

    }

    /**
     * Adapter for ViewPAger that manages background interactions with fragments
     */

    private class MyAdapter extends FragmentPagerAdapter {

        private Context mContext;
        private String[] frags = { A.class.getName(),
                B.class.getName()};

        public MyAdapter(FragmentActivity activity) {
            super(activity.getSupportFragmentManager());
            mContext = activity;

        }

        @Override
        public Fragment getItem(int pos) {
            return Fragment.instantiate(mContext, frags[pos]);
        }

        @Override
        public int getCount() {
            return frags.length;
        }

        @Override
        public CharSequence getPageTitle(int pos) {

            if (pos == 0)
                return "A";

            if (pos == 1)
                return "B";

            else
                return null;

        }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T04:38:28.813

您可以使用`AsyncTask`. 在`doinbackground()`方法中，您为要首先执行的函数编写代码。完成第一个任务后，您可以使用`onPostExecute()`方法来执行您想要执行的任务。

# java - 显示 Java GUI 是否需要一些特殊处理？

> ID：13577451
> 
> 赞同：1
> 
> 时间：2012-11-27T04:34:49.637
> 
> 标签：java, swing, event-dispatch-thread

我正在查看 Java 中 GUI 的一些示例代码，我想知道显示 GUI 的正确方法是什么。假设为某个 GUI 编写了 createAndShowGUI() 方法。我看到了这样的事情：

```
public static void main(String[] args) {
    javax.swing.SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            createAndShowGUI();
        }
    });
} 
```

在没有 javax.swing 的情况下在 main 方法的末尾调用 createAndShowGUI() 会不会是错误的？或者我想我真正的问题是关于这里发生了什么。我对线程很熟悉，但我不确定为什么需要创建一个新线程（这是怎么回事？）来显示 GUI。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T04:40:44.370

与 UI（Swing 或 AWT）的所有交互都必须在事件调度线程的上下文中执行。

Swing（和 AWT）组件不是线程安全的，从 EDT 以外的任何线程更改它们中的任何一个都可能导致更新损坏、绘制技巧、死锁并可能导致 VM 崩溃。众所周知，它们也很难调试。

您可能想通读

*   [事件调度线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)
*   [Swing 中的单线程规则](http://weblogs.java.net/blog/cayhorstmann/archive/2007/06/the_single_thre.html)
*   [请问真正的 Swing 单线程规则能站起来吗？](http://bitguru.wordpress.com/2007/03/21/will-the-real-swing-single-threading-rule-please-stand-up/)

我还应该补充一点，当`main`执行该方法时，它会在 VM 为其创建的任何线程中运行。这保证不是 EDT，因为在需要它之前它不会开始启动。

这就是为什么好的 Swing 程序总是以`EventQueue.invokeLater`. 您也可以使用`SwingUtilities.invokeLater`，但通常是一样的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T04:37:06.097

因为与 GUI 相关的所有事情都应该通过[事件调度线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)( **EDT** ) 完成，这就是 Java 管理整个界面绘制的方式。基本上，该`run()`方法将传递`Runnable`对象的方法的执行委托给正确的线程。

请注意，这`Runnable`不是 a `Thread`，它只是提供执行某些操作的方法的接口（因此该类是*runnable*）。但是这里没有涉及线程，`Thread`extend from的事实`Runnable`只是因为线程也是`Runnable`可以执行某些东西的对象。

# javascript - 使用 JS 访问 HTML 样式属性

> ID：13577457
> 
> 赞同：0
> 
> 时间：2012-11-27T04:36:08.270
> 
> 标签：javascript, jquery, html, css

如何从`style`HTML 元素的属性中获取 CSS 属性（并忽略样式表/计算属性）？

例如：

```
<div style="float:left"></div>

function getStyle(element, name) { ... }
getStyle(element, 'float') === 'left';
getStyle(element, 'font-weight') === null; 
```

我不介意原始 JS 或 jQuery。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T04:37:11.020

这对你不起作用吗？

```
$('div').attr('style'); 
```

如果您想进一步解析：

```
var getStyles = function(element) {

    // ensure element has style
    if (! element.attr('style')) {
        return {};
    }

    // init styles
    var styles = {}

    // parse style attr
    $.each(element.attr('style').split(/\s*;\s*/), function(i,style) {
        if (style.length) { // a style string ending in ; will cause an empty pair after splitting
            pair = style.split(/\s*:\s*/);
            styles[pair[0]] = pair[1];
        }
    });

    return styles;
}; 
```

几个测试

```
// test an element with style attr
var element = $('<div style="float:left"></div>');
console.log(getStyles(element)); //=> {float: "left"}
console.log(getStyles(element).float); //=> left
console.log(getStyles(element).hello); //=> undefined

// test some element without style attr
var element2 = $('<p>hello</p>');
console.log(getStyles(element2).float); //=> undefined
console.log(getStyles(element2).hello); //=> undefined

​// a bit more complex
var element3 = $('<div style="float:left; background-color:red; color:#555; opacity: 0.5 !important;"></div>');
console.log(getStyles(element3)); //=> {float: "left", opacity: "0.5 !important", background-color: "red", color: "#555"} 
console.log(getStyles(element3).float); //=> left
console.log(getStyles(element3).opacity) //=> 0.5 !important;
console.log(getStyles(element3)["background-color"]); //=> red 
```

​</p>

[看到它在 jsFiddle 上工作](http://jsfiddle.net/snKrL/5/)

​</p>

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T04:40:24.623

如果你想要纯 JS，这个例子：

```
element.style.display = 'none'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T04:38:47.430

您可以使用

```
var floating = $('div').css('float');
$('div').css('float','left'); 
```

使用 jQuery 访问每个样式参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T04:44:50.590

您也可以通过`prop()`功能访问

```
$('div').prop('style'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T05:33:43.067

这是 macek 代码的快速改进。

此函数采用 Petah 要求的格式。另外，这个函数一旦找到匹配就会中断，因此不需要扫描整个“样式”属性。

```
function getStyle(element, name) {

if (! element.attr('style')) {
    return {};
}
var result= "";

$.each(element.attr('style').split(/\s*;\s*/), function(i,style) {
    if (style.length) { 
        pair = style.split(/\s*:\s*/);
        if(pair[0] == name) {
            result = pair[1];
            return false;
        }
    }
});

return result;
}; 
```

Js Fiddle 的用法示例：http: [//jsfiddle.net/rxpMJ/2/](http://jsfiddle.net/rxpMJ/2/)

# grails - 如何在 grails 域类中设置默认值

> ID：13577459
> 
> 赞同：46
> 
> 时间：2012-11-27T04:36:24.640
> 
> 标签：grails

有没有办法为域类属性设置默认值？我有一个名为 的类`PayMethod`，我希望`name`属性默认为该类，`"Cash"`并且在创建此表时希望使用此默认值，这可以使用约束吗？

```
package abc

import util.UserUtil
import embed.AuditUser

class PayMethod {

    String name = "Cash"

    AuditUser audit = new AuditUser()
    static embedded = ['audit']    

    static constraints = {
        name blank: false, size: 5..30, unique: true
    }

    static mapping = {
        table 't01i0010'
        id column: 'F_ID', precision: 4, scale: 0
        name column: 'F_NAME', length: 30, defaultValue: 'Cash'
        version column: 'F_REVISION'
    }

    def authUserService
    int insertIndex = 0
    int updateIndex = 0
    static transients = ['authUserService', 'insertIndex', 'updateIndex']    

    def beforeInsert = {
        audit.entryUser = UserUtil.user()
        audit.entryDate = new Date();
    }

    def beforeUpdate = {
        audit.reviseUser = UserUtil.user()
        audit.reviseDate = new Date();
    }

    def afterInsert = {
        if(insertIndex == 0){
            def user = audit.entryUser
            def date = audit.entryDate
            log.info "POST INSERT => ENTERER: ${user} ENTERED: ${date}"
        }
        insertIndex++
    }

    def afterUpdate = {
        if(updateIndex == 0){
            def user = audit.reviseUser
            def date = audit.reviseDate
            log.info "POST UPDATE => REVISE: ${user} REVISED: ${date}"
        }
        updateIndex++
    }
} 
```

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-11-27T05:28:47.270

这将在本周或下周发布的 2.2 中实现。有关相关功能请求，请参阅[http://jira.grails.org/browse/GRAILS-5520](http://jira.grails.org/browse/GRAILS-5520)。语法将是

```
static mapping = {
   name defaultValue: "'Cash'"
} 
```

现在你需要做你正在做的事情 - 将值设置为字段的默认值。您可以手动更新数据库架构，或将工作作为迁移的一部分。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-07-12T18:00:04.483

为了建立上一个答案，您可以使用 Grails 2.2 中的 defaultValue 属性，但您需要小心地将双引号和单引号括在 String 属性的默认值周围，并将双引号括在整数属性周围，以便默认值正确显示在 DDL 中. 因此，例如，您需要使用：

```
static mapping = {
   myStringProperty defaultValue: "'Cash'"
   myIntProperty defaultValue: "0"
} 
```

如果你只使用单引号，你最终会得到一个错误，比如“找不到列“CASH””另外，据我所知，默认值不适用于枚举属性。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-15T18:26:36.463

有同样的问题，使用静态映射对我也不起作用（使用 2.2.3）；以下链接为我提供了一个功能性答案（在您的对象声明中设置默认值）：

[http://grails.1312388.n4.nabble.com/How-to-set-a-default-value-for-column-td1383753.html](http://grails.1312388.n4.nabble.com/How-to-set-a-default-value-for-column-td1383753.html)

对于String，用引号封装；int/integer 应该只是值。

希望这可以帮助！

# java - 如何使用java知道特定文件是否仍然打开或关闭

> ID：13577466
> 
> 赞同：1
> 
> 时间：2012-11-27T04:37:09.540
> 
> 标签：java, file-io

我有一个场景，我曾经在以下步骤中使用 java 命令打开文件

a）为文件的位置创建文件对象

```
File f = new File(filePath); 
```

b) 然后使用系统应用程序（如 Excel）打开文件

```
Desktop desktop = null;
if (Desktop.isDesktopSupported()) {
    desktop = Desktop.getDesktop();
}
try {
    desktop.open(f);
} catch (IOException e) {
} 
```

现在，当窗口应用程序关闭此文件时，我想在程序中得到通知。是否有任何机制可以知道打开的文件是否仍由应用程序打开或关闭？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T04:39:35.760

我怀疑你是否会得到一个明确的解决方案。

你可以看看这个线程

[Java：检查文件是否已经打开](https://stackoverflow.com/questions/1390592/java-check-if-file-is-already-open)

主要问题是，fileLock 依赖于操作系统的文件系统。

# iphone - 如何在顶部设置 UI 表格视图的第一个单元格

> ID：13577469
> 
> 赞同：0
> 
> 时间：2012-11-27T04:37:17.720
> 
> 标签：iphone, objective-c, uitableview

在我的应用程序中，**我有一个表格视图和一个带有三个按钮的段，**

*每个按钮操作都会在同一个表中填充不同的数组并每次重新加载，*

当我在第三段时，当我滚动填满对应第三段数据的表格时，

并用各自的数据将 bak 返回到第 1、第 2 段，这些其他段上的内容也会滚动，

**我的要求是每个段单击表格视图，每次都将第一个单元格设置为顶部**

我试过了`setScrollToTop`，`setPagingEnable`但没有用，

```
[contactsTable setPagingEnabled:YES];
[contactsTable setScrollToTop:YES]; 
```

**当点击段和出现视图时，如何设置表格视图的第一个单元格始终位于顶部，而不管前一步滚动...？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T04:42:07.570

试试这个，

```
[contactsTable setContentOffset:CGPointZero]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T04:41:19.067

这应该这样做：

```
NSIndexPath *ip = [NSIndexPath indexPathForRow:0 inSection:0];
[contactsTable selectRowAtIndexPath:ip animated:YES scrollPosition:UITableViewRowAnimationTop]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T04:59:20.493

```
 [contactsTable scrollToRowAtIndexPath:[contactsTable indexPathForCell:cell] atScrollPosition:UITableViewScrollPositionTop animated:YES]; 
```

# node.js - 使用nodejs向Web客户端发送下载请求

> ID：13577470
> 
> 赞同：0
> 
> 时间：2012-11-27T04:37:25.560
> 
> 标签：node.js, download, webclient

我正在实现一些下载器应用程序。Web 客户端将在 Web 服务器中发送一些数据。它将处理数据并以某种特定格式创建文件并将该文件推送到客户端。我已经完成了使用nodeJS创建文件的部分。现在有人可以建议我如何将文件推送到客户端。它就像一个下载器应用程序，每当 Web 客户端发送数据时，使用一些上传按钮，它会打开一个另存为窗口以将文件保存在客户端计算机中。

那么有人可以对一些现有的代码内容提出一些建议或指示，以便我看看吗？

提前致谢。

问候，

-M-

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T04:49:31.763

您可以查看 Express 框架是如何实现的： [https ://github.com/visionmedia/express/blob/master/lib/response.js#L356](https://github.com/visionmedia/express/blob/master/lib/response.js#L356)

第 364 行：设置`Content-Disposition`标头以告诉客户端此响应是可以下载的附件。

```
this.set('Content-Disposition', 'attachment; filename="' + basename(filename) + '"'); 
```

第 365 行：将文件作为响应正文发送：

```
return this.sendfile(path, fn); 
```

`send`上述函数中用到的模块： https [://github.com/visionmedia/send](https://github.com/visionmedia/send)

# asp.net-mvc-4 - MVC4 WebApi OData Delta 未填充 GUID 或 Int 字段

> ID：13577471
> 
> 赞同：2
> 
> 时间：2012-11-27T04:37:28.973
> 
> 标签：asp.net-mvc-4, asp.net-web-api, odata

我希望通过使用 Delta 包装器对 Web api 控制器操作进行部分更新。

我有一个这样的模型：

```
public class Person
{
    public Guid PersonId { get; set; }

    public string FirstName { get; set; }

    public string LastName { get; set; }

    public bool IsActive { get; set; }

    public int NumVacationDays { get; set; }

    public double Salary { get; set; }
} 
```

我有这样的api控制器：

```
 public void Put(Delta<Person> person)
    {
        var p = person.GetEntity();

        Person existingPerson = _repository.Get(p.PersonId);

        person.Patch(existingPerson);

        _repository.Update();

        return;
    } 
```

我像这样调用 web api（使用提琴手）

```
url: http://localhost:49933/api/Person (PUT)

Response Body
    {
      "PersonId": "b269c49f-8a90-41d6-b102-7cfba3812b1c",
      "FirstName": "sample string 2",
      "LastName": "sample string 3",
      "IsActive": true,
      "NumVacationDays": 5,
      "Salary": 6.1
    }

The controller is hit and al 
```

l 除NumVacationDays（为0）和PersonId（默认为00000000-0000-0000-0000-000000000000）之外的数据填充

有谁知道为什么 GUID 和 int 字段没有从 json 中填充？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T04:31:56.553

在这个bug中提到了这个问题：http: [//aspnetwebstack.codeplex.com/workitem/562](http://aspnetwebstack.codeplex.com/workitem/562) ...声称要修复但在刚刚发布的4.0中仍然存在。

问题是 Newtonsoft Json 将一个数字反序列化为 Int64，它未能通过 IsAssignable 对 int 的测试，因此它被跳过。guid 与字符串的类似问题。

您应该能够通过使用 OData 媒体类型格式化程序来解决此问题，这些格式化程序是通过从 ODataController 而不是 ApiController 派生来启用的。但是，这对我没有影响 - int 值仍然不起作用（但是当我将数据类型更改为 Int64 时，它起作用了）。

I would love to see a working example of posting json with a patch delta that contains an int.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T01:39:32.307

我可以大胆猜测 PersonId 发生了什么，但无法解释 NumVacationDays。我的猜测是 PersonId 是 Person 实体的关键属性，默认情况下 OD​​ataFormatter 不会修补关键属性。如果您想要这种行为，您可以将 ODataMediaTypeFormatter.PatchKeyMode 上的设置更改为 Patch。

此外，在操作中查看 person.GetChangedPropertyNames() 的值以查看 PersonId 和 NumVacationDays 是否实际显示在那里会很有趣。

# db2 - BETWEEN Versus >= and <= in DB2 SQL Query - 性能

> ID：13577473
> 
> 赞同：8
> 
> 时间：2012-11-27T04:37:41.423
> 
> 标签：db2, query-optimization

我有以下查询：

```
SELECT ID, ADDRESS 
FROM EMPLOYEE A 
WHERE ID=12345 
AND CURRENT DATE BETWEEN A.EFF_DT AND A.EXP_DT 

SELECT ID, ADDRESS 
FROM EMPLOYEE A 
WHERE ID=12345 
AND CURRENT DATE >= A.EFF_DT AND CURRENT DATE <= A.EXP_DT 
```

在这两个查询中，哪个查询产生更好的性能。

这里我使用运算符 >= 和 <= 而不是 BETWEEN。

请建议。

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T04:47:58.917

根据我对 DB2/z 的了解（LUW 产品可能不同，但我对此表示怀疑），这两者都应该为您提供完全相同的执行配置文件。

如果您真的很担心，您应该对这两个查询运行[EXPLAIN](http://publib.boulder.ibm.com/infocenter/db2luw/v9/index.jsp?topic=/com.ibm.db2.udb.admin.doc/doc/r0000952.htm)以查看是否有任何差异。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-27T04:55:08.937

之间只是 >= 和 <= 的简写，

如果想找到更多帮助，请访问此处的链接：[SQL Server 中的“BETWEEN”函数是否非常昂贵？](https://stackoverflow.com/questions/5582582/is-the-between-function-very-expensive-in-sql-server)

# jquery - 多次触发按钮时的多个相同结果

> ID：13577474
> 
> 赞同：1
> 
> 时间：2012-11-27T04:37:55.910
> 
> 标签：jquery, ajax

当我不小心双击按钮时，ajax 可能会在表格上附加 2 个相同的结果。当我单击搜索按钮时，有没有办法阻止 ajax 返回 2 个或更多结果？我试图中止ajax，但结果是一样的。我只是 ajax 的新手，所以请帮帮我

```
$("#btn_searchadmin").click(function(){

    var adminname = $("#tb_admin").val();
    var ajax;

    if(ajax){

      ajax.abort();
    }

     ajax = $.ajax({
                    type: "post",
                    url: "manage_deped_searchadmin.php",
                    dataType:'json',
                    cache:false,
                    data:{'adminname': adminname},

                    beforeSend: function(data){

                      $('#tbl_search').html('');

                    },

                    success: function(data){

                      $("#btn_searchadmin").bind('click');

                      $.each(data, function(i, item) {

                        $('#tbl_search').append("<tr><td>"+data[i].adminfname+"</td>  <td>"+data[i].adminlname+"</td>");

                      });
                    }
          });

  }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T04:39:48.330

您可以简单地为 click 事件添加一个锁，以防止这种情况。

```
(function() {
  var lock = false;
  $("#btn_searchadmin").click(function() {
    if (!lock) {
      lock = true;
      // do something
      // unlock at the end of callback
    }
  });
})() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T04:47:01.787

对此有两种基本方法。我会给你一个文本答案而不是代码。

*   一旦点击按钮就禁用它，并在ajax响应时重新启用它（例如在`complete`处理程序中）；
*   使按钮保持启用状态，但中止先前单击导致的任何未解决的先前 ajax 调用。

这两种方法都是有效的，您选择哪种方法完全取决于应用程序。

*   如果在第一次完成之前必须禁止第二次 ajax 调用，请选择方法 1。
*   如果应该允许第二个 ajax 调用覆盖之前的调用，请选择方法 2。

# javascript - 排列需要帮助编码

> ID：13577484
> 
> 赞同：2
> 
> 时间：2012-11-27T04:38:51.217
> 
> 标签：javascript, html, arrays, permutation

感谢您的回复，首先我要感谢您试图帮助我，我已经在几个网站上发布了这个，也没有人试图帮助。

对于我的代码，我想做的是排列计数。

它将从上到下计数
1,2,3
1,2,3
1,2,3

```
output to
111 = 1
112 = 1
113 = 1
121 = 1
122 = 1
123 = 1
133 = 1
211 = 1
212 = 1
213 = 1
333 = 1 
```

并继续直到所有数字都被计数并存储到数组中，该数组可以检查到底有多少计数

代码将检查输入数字并计算有多少结果，并显示有多少结果的结果，每个结果在排列计数后有多少。

很难做到吗？

无论如何谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T05:01:29.943

我想这并不难。这只是标准的排列方式。您需要使用一点递归：

```
function permute(size) {
    var range = getRange(size);
    var result = [];
    getSubPerms('', range, result);
    return result;
};

function getRange(size) {
    var range = [];
    for (var i = 0; i < size; i++) {
        range.push(i + 1);
    }
    return range;
}

function getSubPerms(perm, range, result) {
    for (var i = 0; i < range.length; i++) {
        var perm2 = perm + range[i];
        if (perm2.length == range.length) {
            result.push(perm2);
        } else {
            getSubPerms(perm2, range, result);
        }
    }
}

var foo = permute(4); //an array of all of your results.
alert(foo.length); //256 
```

However, if you're only interested in the length of that, without having to generate the results, it would simply be `Math.pow(size, size)` to get the length of your results.

# iphone - 由于未捕获的异常“NSGenericException”而终止应用程序，原因：“*** Collection” 在枚举时发生了突变

> ID：13577486
> 
> 赞同：2
> 
> 时间：2012-11-27T04:38:58.053
> 
> 标签：iphone, ios, ios4

有时我的应用程序因显示 *** Collection 在被枚举时发生了变异而崩溃。这一直发生在同一行代码中。请帮助我解决这个问题。我坚持这一点。该应用程序在推送我的代码的视图控制器行时崩溃。但这并不常见。我的错误控制台

由于未捕获的异常“NSGenericException”而终止应用程序，原因：' *** Collection CALayerArray：0x1030c730 在枚举时发生了突变。“”、“”、“”、“”、“”、“”、“”、“”、“”、“”、“”、“”、“”、“”、“”、“”、“” , "")'

我的代码：

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
 ServiceDetails *service=[[ServiceDetails  alloc] initWithNibName:@"ServiceDetails"   bundle:nil];  
    CompanyListingForm *list=[[CompanyListingForm  alloc]initWithNibName:@"CompanyListingForm" bundle:nil];
[category_company_text resignFirstResponder];
if(viewHoldingTable)
{
    [viewHoldingTable removeFromSuperview];
}
if (category_clicked_flag==0) {
    if (location_or_cat_com==0) {
        NSMutableArray *get=[district_array objectAtIndex:indexPath.row];
        locationid=[[get objectAtIndex:0]intValue];
        [location_textfield resignFirstResponder];
        location_textfield.text=[get objectAtIndex:1];
    }
    else
    {
        if (draggingView) {
            [draggingView removeFromSuperview];

        }
        if (viewHoldingTable) {
            [viewHoldingTable removeFromSuperview];
        }

        NSMutableArray *get=[company_array objectAtIndex:indexPath.row];
        category_company_text.text=[get objectAtIndex:1];

        service.ida=[NSString stringWithFormat:@"%d",[[get objectAtIndex:0] intValue]];

        service.idloc=[NSString stringWithFormat:@"%d",locationid];

        [self.navigationController pushViewController:service animated:YES];//getting error at this point.

        //[emer release];   
    }
}
else
{
    if (location_or_cat_com==0) {
        NSMutableArray *get=[district_array objectAtIndex:indexPath.row];
        locationid=[[get objectAtIndex:0]intValue];
        [location_textfield resignFirstResponder];
        location_textfield.text=[get objectAtIndex:1];
    }
    else
    {
        NSMutableArray *get=[category_array objectAtIndex:indexPath.row];
        category_company_text.text=[get objectAtIndex:1];
        int catid=[[get objectAtIndex:0]intValue];

        list.IDForLoc=[NSString stringWithFormat:@"%d",locationid];
        list.IDForCat=[NSString stringWithFormat:@"%d",catid];
        list.companydetails=[get objectAtIndex:1];
        [self.navigationController pushViewController:list animated:YES];//getting error at this point.

    } 
}
 [service release];
 [list release];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T05:11:40.907

I think the problem is that you're doing all this stuff to the interface at the same time as you're asking to push a view controller. Try wrapping the `pushViewController` line in a `dispatch_after` block, with a delay of, say, .1 seconds, to give the other changes to the interface time to settle down. Or do it the other way: put the `removeFromSuperview` stuff into a delay. Even better, throw some kind of flag so that the stuff to be removed from the superview is removed later, on `viewWillAppear`. You don't need to do it now; you're about to hide to cover this view with the pushed view controller anyway.

# django - 更改 django-static 中的默认文件夹

> ID：13577490
> 
> 赞同：0
> 
> 时间：2012-11-27T04:39:00.907
> 
> 标签：django, django-static

我正在考虑使用 django-static 来提供静态内容（https://github.com/peterbe/django-static）

但是 django-static 总是假设所有的“静态内容”总是放在“媒体”文件夹中。我可以将其配置为不同的文件夹吗？

我检查了配置选项，但找不到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T04:45:09.930

静态文件处理[内置于 django](https://docs.djangoproject.com/en/dev/howto/static-files/)中。建议你改用那个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T04:48:28.673

我认为它使用`MEDIA_ROOT`设置来查找源文件。

从它的文档

**默认情况下 django_static 将在 MEDIA_ROOT 中查找源文件，但可以告诉 django_static 查找 DJANGO_STATIC_MEDIA_ROOTS 中列出的所有目录。将使用第一场比赛。**

# php - 打开仅在服务器上可用的页面（后端代理）

> ID：13577498
> 
> 赞同：0
> 
> 时间：2012-11-27T04:39:58.583
> 
> 标签：php, javascript

我有一个需要调用报告服务的前端应用程序，打开一个带有 javascript 函数的新窗口，如下所示：

```
window.open('http://somedomain.com:8080/report') 
```

我现在想做的是，由于tomcat服务器在后端应用程序的同一台机器上（并且在web服务器的同一台机器上-php），避免在互联网上打开8080端口。

简而言之，我需要一种方法来连接 tomcat 应用程序服务器（通过 localhost）并将连接代理到前端，而无需向全世界开放服务器的端口 8080。可能吗 ？

怎么做到呢 ？

要在服务器上生成 html 页面，我使用 php ...

**编辑/更新**

tomcat应用服务器上的页面不是静态的，它有加载机制，需要用户交互...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T05:04:10.897

您可以使用 PHP 的[cURL](http://php.net/manual/en/book.curl.php "客户端 URL 库")函数通过 PHP（使用 ）获取您需要的信息，`localhost:8080`并将其用作 PHP 代理。然后使用 Ajax 从 PHP 代理检索信息。

# java - 在 Eclipse 中导出 JAR 文件似乎很好，但我的一个类不起作用

> ID：13577499
> 
> 赞同：0
> 
> 时间：2012-11-27T04:40:03.277
> 
> 标签：java, eclipse, jar

我正在尝试使用 eclipse 导出方法将包含四个类的我的项目导出到 jar 文件（不可执行）。一切似乎都很好，一旦我将它们添加到另一个程序中，所有四个类都会出现在引用的库中。

但是，当将这些类重新导入程序时，我只能看到其中的三个。其中之一（每次都相同）未显示为要导入。关于可能导致此问题或如何解决此问题的任何建议？

在导出项目之前，我曾尝试清理和重建项目，但这无济于事。

谢谢！

编辑：解决方案已添加到答案中，道歉，但我发现了这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T06:26:12.280

我向大家道歉，但我发现了解决方案。给我问题的类在某个时候失去了它的公共修饰符，可能是在重构期间。一旦我将其添加回来，jar 文件就会正常运行。对于那个很抱歉。

# spring - 修改 web.xml 时出现安全错误

> ID：13577502
> 
> 赞同：0
> 
> 时间：2012-11-27T04:40:21.857
> 
> 标签：spring, apache, jakarta-ee, spring-mvc, spring-security

我是 Spring MVC 的新手，正在尝试实现 Spring Security 功能。当我修改`web.xml`文件时，我在 Catalina 日志中收到这种错误：

```
27.11.2012 9:49:21 org.apache.catalina.core.StandardContext startInternal
SEVERE: Error listenerStart 
```

该`web.xml`文件是：

```
<?xml version="1.0" encoding="UTF-8"?>

<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <!-- The definition of the Root Spring Container shared by all Servlets and Filters -->
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/root-context.xml /WEB-INF/spring/appServlet/security-context.xml
        </param-value>
    </context-param>
    <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>springSecurityFilterChain</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>
    <!-- Creates the Spring Container shared by all Servlets and Filters -->
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>

    </listener>

    <!-- Processes application requests -->
    <servlet>
        <servlet-name>app</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>/WEB-INF/spring/appServlet/app-servlet.xml</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>app</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

    <servlet-mapping>
        <servlet-name>default</servlet-name>
        <url-pattern>*.gif</url-pattern>
        <url-pattern>*.png</url-pattern>
        <url-pattern>*.js</url-pattern>
        <url-pattern>*.css</url-pattern>
    </servlet-mapping>

    <!--CharsetFilter start-->
    <filter>
        <filter-name>CharsetFilter</filter-name>
        <filter-class>kz.bimash.FoodSec.filters.CharsetFilter</filter-class>
        <init-param>
            <param-name>requestEncoding</param-name>
            <param-value>UTF-8</param-value>
        </init-param>
    </filter>

    <filter-mapping>
        <filter-name>CharsetFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>
    <welcome-file-list>
        <welcome-file>redirect.jsp</welcome-file>
    </welcome-file-list>
</web-app> 
```

这段代码给了我一个错误，但是当我尝试删除 Spring Security 配置部分时，它开始正常工作。你能纠正我的错误`web.xml`吗？

这是 Apache 日志文件：

```
27.11.2012 10:57:37 org.apache.catalina.util.LifecycleBase stop
INFO: The stop() method was called on component    [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/foodsec]] after stop() had already been called. The second call will be ignored.
27.11.2012 10:57:38 org.apache.catalina.startup.HostConfig deleteRedeployResources
INFO: Undeploying context [/foodsec]
27.11.2012 10:57:38 org.apache.catalina.startup.HostConfig deployDescriptor
INFO: Deploying configuration descriptor C:\Program Files\Apache Software  Foundation\tomcat7\conf\Catalina\localhost\foodsec.xml
27.11.2012 10:57:45 org.apache.catalina.core.StandardContext startInternal
SEVERE: Error listenerStart
27.11.2012 10:57:45 org.apache.catalina.core.StandardContext startInternal
SEVERE: Context [/foodsec] startup failed due to previous errors 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T09:11:07.240

您的多个配置可能有问题：

```
 <param-value>/WEB-INF/spring/root-context.xml /WEB-INF/spring/appServlet/security-context.xml 
```

尝试使用逗号代替：

```
 <param-value>/WEB-INF/spring/root-context.xml,/WEB-INF/spring/appServlet/security-context.xml 
```

最佳做法是使用通配符，如下所示：

```
 <param-value>classpath*:META-INF/spring/applicationContext*.xml</param-value> 
```

然后将您的上下文文件命名为：

```
src/main/resources/META-INF/spring/applicationContext.xml
src/main/resources/META-INF/spring/applicationContext-security.xml 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T07:24:25.390

您需要开始使用一些日志框架。（将日志框架 jar 放在您的类路径中）如果没有部署日志，没有人会帮助您（我们不想猜测）。

看看教程： http: [//fauzimh.wordpress.com/2011/01/26/spring-3-framework-hello-world-using-eclipse-slf4j-and-logback/](http://fauzimh.wordpress.com/2011/01/26/spring-3-framework-hello-world-using-eclipse-slf4j-and-logback/)

所以现在在你的项目中启用 SLF4J 和 Logback。

启用后，您应该会在 Tomcat 日志中获取有关 Spring XML 配置错误的信息。使用该信息来解决您的问题。是的，我认为问题不在于您的问题，`web.xml`而在于您的 Spring 上下文文件。

# java - 操作系统是否为 UDP 缓冲数据包

> ID：13577510
> 
> 赞同：1
> 
> 时间：2012-11-27T04:40:58.507
> 
> 标签：java, sockets, buffer

对于单线程服务器，我有下面的代码。我想知道，如果我收到一个数据包（并开始处理它）并且另一个数据包到达，而我没有在听（忙于处理）会发生什么。操作系统会缓冲数据包并等待套接字再次侦听，还是丢弃数据包？

```
 While(true){
                UDPsocket.receive(packetBuff);
                //Do stuff
            } 
```

注意：该应用程序在 Linux(Ubuntu 12.04) 上运行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T04:46:17.733

操作系统有一个*接收缓冲区*，当您的程序繁忙时，它可以在其中存储数据。您可以使用`getsockopt()`该`SO_RCVBUF`选项来查看/更改接收缓冲区大小以及`SO_SNDBUF`发送缓冲区。通常有一个系统范围的默认值，以及您可以为此设置的系统范围的最大大小。

默认值是什么，以及如何查看取决于您使用的操作系统。默认值通常介于 32K 和 256K 之间，它将为您缓冲数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T04:46:37.263

数据包将被放入队列并在您收到当前数据包后检索。

# c++ - 内存泄漏？为已删除的指针分配了新的运算符

> ID：13577511
> 
> 赞同：0
> 
> 时间：2012-11-27T04:41:14.293
> 
> 标签：c++, memory-leaks

> **可能重复：**
> [C++ 删除 - 它删除了我的对象但我仍然可以访问数据？](https://stackoverflow.com/questions/1930459/c-delete-it-deletes-my-objects-but-i-can-still-access-the-data)

我想检查以下简单代码是否存在内存泄漏。在函数中，它删除一个指针并将一个新对象分配给这个指针。这合法吗？在 g++ 编译器下，即使我删除了测试指针，我仍然可以访问它的成员，这对我来说看起来很奇怪。

```
class cTest{
public:
  cTest(double _m){
    m=_m;
}
  ~cTest(){}

  double m;
};

void function (cTest * test){
  delete test;
  std::cout<<test->m<<std::endl;
  test= new cTest(1.2);
}
int main(){
  cTest *t = new cTest(0.1);
  std::cout<<t->m<<std::endl;
  function (t);
  std::cout<<t->m<<std::endl;
  delete t;
  return 0;
} 
```

它打印出来

0.1

0.1

1.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T04:45:15.887

是的，它泄漏了。`function`实际上并没有修改`t`in main 的值（因为它的参数是按值传递的）。

您通常可以引用已删除的内存，但这是一个错误（并且不可靠）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T04:46:31.933

每当您在其生命周期结束后访问指针时（例如堆栈分配的对象或在 a 之后`delete`），您都会偶然发现**未定义的行为**，这比错误更糟糕，因为它可能会在它决定时工作并突然崩溃。

指针不再有效，数据仍然存在，因为每个不必要的操作都不是在 C++ 中完成的，这就是为什么在你的情况下它可以工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T04:47:01.880

首先，您的代码中有两个错误。

# 指针不是值。

```
void function (cTest * test){
  delete test;
  std::cout<<test->m<<std::endl;
  test= new cTest(1.2);
} 
```

`test`不被覆盖。可能，您希望重写指针值，但它不能。如果要这样做，请使用指针的指针`CTest** test`来定义参数。或者使用返回值来给出一个新的指针值。

```
#include <iostream>

class cTest{
public:
  cTest(double _m){
    m=_m;
}
  ~cTest(){}

  double m;
};

void function (cTest** test){
  delete *test;
  std::cout<<(*test)->m<<std::endl;
  *test= new cTest(1.2);
}
int main(){
  cTest *t = new cTest(0.1);
  std::cout<<t->m<<std::endl;
  function (&t);
  std::cout<<t->m<<std::endl;
  delete t;
  return 0;
} 
```

**但我认为这段代码没有什么意义。**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-27T04:48:54.890

是的，第一个分配的对象存在泄漏和双重删除。main 中的 't' 继续指向第一个对象，因为指针不是通过引用或双指针传递给函数的。

# dart - Dart 中使用的“const”关键字是什么？

> ID：13577512
> 
> 赞同：20
> 
> 时间：2012-11-27T04:41:16.977
> 
> 标签：dart

有人可以向我解释如何/何时/为什么使用`const`关键字，还是只是“一种声明常量变量的方法”？如果是这样，这之间有什么区别：

```
int x = 5; 
```

和

```
const int x = 5; 
```

各位大佬能给我举个例子吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-27T05:17:06.323

`const`表示编译时间常数。表达式值必须在编译时已知。`const`修改“值”。

来自[news.dartlang.org](http://news.dartlang.org/2012/06/const-static-final-oh-my.html)，

> “const”在 Dart 中具有更复杂和微妙的含义。const 修改*值*。您可以在创建集合时使用它，例如 const [1, 2, 3]，以及在构造对象（而不是 new）时，例如 const Point(2, 3)。在这里，const 意味着对象的整个深度状态可以完全在编译时确定，并且对象将被冻结并且完全不可变。

如果你使用

`const x = 5`然后变量 x 可以用于像

```
const aConstCollection = const [x]; 
```

如果你不使用`const`，就使用`x = 5`then

`const aConstCollection = const [x];`是非法的。

[来自www.dartlang.org](http://www.dartlang.org/articles/m1-language-changes/#support-const-modifier-for-variables)的更多示例

```
class SomeClass {
  static final someConstant = 123;
  static final aConstList = const [someConstant]; //NOT allowed
}

class SomeClass {
  static const someConstant = 123; // OK
  static final startTime = new DateTime.now(); // OK too
  static const aConstList = const [someConstant]; // also OK
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-07-04T07:46:27.267

`const`以下是有关价值观的一些事实：

*   该值必须在编译时已知。

    ```
    const x = 5; // OK 
    ```

*   在运行时计算的任何东西都不能是`const`.

    ```
    const x = 5.toDouble(); // Not OK 
    ```

*   一个`const`值意味着它是非常恒定的，也就是说，它的每个成员都是递归恒定的。

    ```
    const x = [5.0, 5.0];          // OK
    const x = [5.0, 5.toDouble()]; // Not OK 
    ```

*   您可以创建`const`构造函数。这意味着可以`const`从类中创建值。

    ```
    class MyConstClass {
      final int x;
      const MyConstClass(this.x);
    }

    const myValue = MyConstClass(5); // OK 
    ```

*   `const`值是规范实例。这意味着无论您声明多少个实例，都只有一个实例。

    ```
    main() {
      const a = MyConstClass(5);
      const b = MyConstClass(5);
      print(a == b); // true
    }

    class MyConstClass {
      final int x;
      const MyConstClass(this.x);
    } 
    ```

*   如果您有一个班级成员`const`，您还必须将其标记为`static`。`static`表示它属于该类。由于只有一个`const`值实例，因此它不存在是没有意义的`static`。

    ```
    class MyConstClass {
      static const x = 5;
    } 
    ```

### 也可以看看

*   [Dart Const 教程——所有你需要知道的（常量表达式、规范实例等）](https://resocoder.com/2020/01/06/dart-const-tutorial-all-you-need-to-know-const-expressions-canonical-instances-and-more/)

# graphics - 平铺/近似具有相同多边形的 3d 表面

> ID：13577516
> 
> 赞同：2
> 
> 时间：2012-11-27T04:41:31.703
> 
> 标签：graphics, 3d, computational-geometry, mesh, triangulation

我不确定这是否适合这里或在科学计算机科学或数学论坛中更好，但因为我正在寻找一个具体的算法......

我有一个 3d 模型，它以某种方式由网格或代数变量定义，我想只使用固定选择的全等瓷砖类型来重新网格化/近似这个东西，例如边长与底长之比的等腰三角形. 有没有一个算法或者有人知道这个问题的正确名称吗？我发现了一些接近我需要的算法，但它们都通过瓷砖的长度和不同尺寸的一些容差来网格化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T14:28:41.737

在自由形状中，平铺是通过非常复杂的算法实现的。在现实世界的建筑中，有这种用尽可能多的相同瓷砖平铺的方法，仍然可以得到形状，但是有角度公差和各种可以操纵的公差。检查自由形状的镶板。

# .net - 从多个应用程序实例访问同一个文件

> ID：13577518
> 
> 赞同：0
> 
> 时间：2012-11-27T04:41:36.430
> 
> 标签：.net, vb.net, visual-studio-2010, file-io

我注意到我的雾虫报告中有很多“无法访问文件，因为它正被另一个进程使用”错误。我猜这可能与文件打开后未关闭有关。或者保存后不被关闭。任何人都可以验证这是否是我的问题并建议我更好的解决方法。

在表单加载时打开此文件，并在关闭时保存文件。

表单加载

```
 If IO.File.Exists(myCoolFile) Then '// check if file exists.
            Dim myCoolFileLines() As String = IO.File.ReadAllLines(myCoolFile) '// load your file as a string array.
            For Each line As String In myCoolFileLines '// loop thru array list.
                Dim lineArray() As String = line.Split("#") '// separate by "#" character.
                'Dim newItem As New ListViewItem(lineArray(0)) '// add text Item.
                ' ListView1.Items.Add(newItem) '// add Item to ListView.
                ListView1.Items.Add(lineArray(0)).Tag = (lineArray(1))
            Next

        Else
            If Not File.Exists(myCoolFile) Then
                File.Create(myCoolFile)
                End If 
```

表格关闭

```
 Dim myWriter As New IO.StreamWriter(myCoolFile)
        For Each myItem As ListViewItem In ListView1.Items
            myWriter.WriteLine(myItem.Text & "#" & myItem.Tag) '// write Item and SubItem.
        Next
        myWriter.Close() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T05:48:56.113

A better solution would be to use a database.

Here is code to check if the files is open by another process (you could perhaps wait a small amount of time and retry saving again once or twice):

```
Private Sub IsFileOpen(ByVal file As FileInfo)
    Dim stream As FileStream = Nothing
    Try
        stream = file.Open(FileMode.Open, FileAccess.ReadWrite, FileShare.None)
    Catch ex As Exception

        If TypeOf ex Is IOException AndAlso IsFileLocked(ex) Then
            ' do something here, either close the file if you have a handle or as a last resort terminate the process - which could cause corruption and lose data
        End If
    End Try
End Sub

Private Shared Function IsFileLocked(exception As Exception) As Boolean
    Dim errorCode As Integer = Marshal.GetHRForException(exception) And ((1 << 16) - 1)
    Return errorCode = 32 OrElse errorCode = 33
End Function 
```

# amazon-ec2 - ec2 amazon 服务器设置上的 VisualSVN 服务器：错误无法连接到服务器

> ID：13577519
> 
> 赞同：2
> 
> 时间：2012-11-27T04:41:37.400
> 
> 标签：amazon-ec2, tortoisesvn, visualsvn-server

我有 TortoiseSVN 和 VisualSVN 服务器。我可以在服务器上签入和签出。当我尝试从另一台计算机连接时。我收到一个错误：

```
Unable to connect to a repository at URL
 'https://XXX.XX.XX.XXX:8443/svn/CollectIT/trunk'
OPTIONS of 'https://XXX.XX.XX.XXX:8443/svn/AppName/trunk': could not connect
 to server (https://XXX.XX.XX.XXX:8443) 
```

服务器名称是 ec2-XXX-XX-XX-XXX.compute-1.amazonaws.com。当我 ping 服务器 XXX.XX.XX.XXX 时，我得到请求超时

我已经关闭了服务器上的防火墙

有任何想法吗？

# php - 分类列表查询结果打印

> ID：13577521
> 
> 赞同：1
> 
> 时间：2012-11-27T04:41:53.230
> 
> 标签：php, mysql, sql, select, union

```
<?php

require_once('../lankain.php');

if(isset($_POST['queryString'])) {

    $queryString = $dbc->real_escape_string($_POST['queryString']);

    if(strlen($queryString) >0) {
        //$query = $dbc->query("SELECT subjects FROM subject WHERE subjects LIKE '$queryString%' LIMIT 10");
        $q = "SELECT keyword, col 
                FROM (
                    SELECT tutor_name AS keyword, 'Tutors' col FROM tutors
                    UNION
                    SELECT subjects AS keyword, 'Subject' col FROM subject
                    UNION
                    SELECT city_name AS keyword, 'City' col FROM city
                    UNION
                    SELECT institute_name AS keyword, 'Institute' col FROM institutes
                ) s
              WHERE keyword LIKE '%$queryString%' 
              LIMIT 10";

        $r = mysqli_query ( $dbc, $q);

        if($q) {
        while ($row = mysqli_fetch_array($r, MYSQL_ASSOC)) {

            $col = $row['col'];

        }
        } else {
            echo 'ERROR: There was a problem with the query.';
        }
    } else {

    }
} else {
    echo 'There should be no direct access to this script!';
}

?> 
```

我的查询只选择科目、导师姓名、机构和城市，而不选择类别名称。现在我需要根据结果集添加类别名称..

我可以知道是否可以使用 php？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T04:50:16.313

试试这个：

```
SELECT col, keyword
FROM (SELECT tname AS keyword, 'Tutors' col FROM t
      UNION
      SELECT sname AS keyword, 'Subjects' col FROM sub
      UNION
      SELECT cname AS keyword, 'City' col FROM c
      UNION
      SELECT iname AS keyword, 'Institutes' col FROM i
    ) AS s
WHERE keyword LIKE '%$queryString%' 
LIMIT 10 
```

您希望如何与结果集映射类别？

# php - 访问父方法和属性 PHP

> ID：13577525
> 
> 赞同：0
> 
> 时间：2012-11-27T04:42:10.860
> 
> 标签：php, oop

我在从我的 Deliveries 访问 Jobinfo 类时遇到问题。问题是我需要能够从我的子类中获取 getQty 的值，并且我还需要能够使用父类的属性获取 qty_ship 方法。我怎样才能做到这一点？它似乎不起作用并且对此感到非常困惑......我希望能够动态地使用来自 Parent->Child 和 Child->Parent 的方法。

```
class jobInfo
{
    public $JOB_ID;
    private $deliveries; // DELIVERIES CLASS

    function __construct($job_id)
    {

        $this->JOB_ID=$job_id;
        $this->deliveries = new Deliveries();

    }
    public function getQty()
    {
         return $this->query_s('job_sheet','*', 'job_id',$this->JOB_ID, 1, 'qty');
         //returns a quantity from query method
    }

}

class Deliveries  extends jobInfo
{

    function __construct(){}

    public function qty_ship()
    {
        $qty = 0;
        $SQL = mysql_query("SELECT * FROM deliveries WHERE jID='".parent::JOB_ID."'") or die(mysql_error());

        $rows = mysql_num_rows($SQL);
        if($rows>0)
        {
            while($data = mysql_fetch_array($SQL))
            {
                $qty += $data['qty_shipped'];
            }
        }
        return $qty;
     }

     public function getTotalBO()
     {
         $qty =  parent::getQty();
         $totalship =  $this->qty_ship();

         $x = $qty-$totalship;
         return $x; 
     }
 }

$A = new Jobinfo(15); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T06:25:47.560

您想要`$this->getQty()`and `$this->JOB_ID`，但为了完整起见，请考虑：

1.  删除空的无参数构造函数，因为它实际上不能用于实例化类，除非它使用作业 ID 调用父构造函数，因为您希望作业 ID 在外部定义，所以它不能这样做。

2.  制作 JOB_ID `protected`。为了更好地封装，您可以改为使用它`private`并提供一个 getJobId() 方法。

3.  使用一致的类命名 -`jobInfo`以小写`Deliveries`开头并以大写开头。

4.  处理一致的函数命名 - 您将下划线分隔的函数与驼峰式函数混合在一起。

5.  使用一致的间距 - 您在没有太多押韵或理由的情况下混合使用 1 个字符、2 个字符和 0 个字符的间距。

欢迎来到 OOP，祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T04:52:11.073

如果您从该类扩展，那么您应该使用

```
$this->getQty(); 
```

$this 将返回当前对象，该对象已经包含具有所有公共和受保护变量和方法的父对象。

你应该只在调用静态类时使用 ::

举个例子 ：

```
jobInfo::getQty(); 
```

您可能还想查看命名约定。

[http://framework.zend.com/manual/1.12/en/coding-standard.naming-conventions.html](http://framework.zend.com/manual/1.12/en/coding-standard.naming-conventions.html)

# wordpress - 关于wordpress url结构重写

> ID：13577526
> 
> 赞同：1
> 
> 时间：2012-11-27T04:42:15.010
> 
> 标签：wordpress, url, rewrite

我想创建用户友好的 wordpress 页面 url。我想制作这样的网址，例如：-

[http://www.example.com/234](http://www.example.com/234)

这里 234 是管理员为页面分配的任何整数。

当我尝试执行此操作时，它会自动在 url 中添加 -2，并且带有此 url 的页面也不起作用。对此的任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T10:01:59.567

假设您的`.htaccess`文件正确，您将`-2`在 url 中附加一个，以防您为另一个帖子设置一个已经存在的值。再次检查您的帖子，看看是否有任何带有该固定链接的帖子（包括保存为草稿的帖子）。

# mongodb - 删除数据库不会释放磁盘空间

> ID：13577534
> 
> 赞同：0
> 
> 时间：2012-11-27T04:43:31.567
> 
> 标签：mongodb

我用一个配置服务器和 5 个分片设置了 mongodb。`db.dropDatabase()`使用命令 成功删除数据库后，`show dbs`仍会列出数据库并且未释放磁盘空间。此外，如果我再次连接到数据库并开始插入，则数据库是从之前使用的任何磁盘空间构建的，即使在删除数据库之前的数据不再可访问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T16:45:17.423

你在删除之前切换到数据库了吗？

```
use database_to_drop
db.dropDatabase() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T05:06:17.277

`mongos`如果您在发出命令时遇到了您和分片之间的连接问题`dropDatabase()`，那么您可能遇到了这个问题。这将在 shell 中看到，类似于以下内容：

```
{
    "errmsg" : "exception: socket exception [CONNECT_ERROR] for <shard>",
    "code" : 11002,
    "ok" : 0
} 
```

由于无法在`mongos`组成分片的节点和该分片的主节点（如果它是副本集）之间建立连接，因此无法删除数据库。如果分片没有主分片也是如此，因为分片将是只读的。

# javascript - 使用 Ember.js，处理请求然后添加新子 div 的逻辑应该放在哪里？

> ID：13577553
> 
> 赞同：1
> 
> 时间：2012-11-27T04:45:47.717
> 
> 标签：javascript, model-view-controller, user-interface, web-applications, ember.js

假设用户可能会从集合 { A, B, C } 中选择一个 div 并将其添加到 div X 中，但每个 div 具有不同的规则，可能取决于应用程序状态和每个 div 的某些内在属性。最后在添加 div 时，每个 div 可能会触发不同的事件。

例如，在一种应用程序状态下，用户：

尝试将 A 添加到 X：将 A 添加到 X，没有其他反应

尝试将 B 添加到 X：将 B 添加到 X，触发了一些附加事件

尝试将C添加到X：不允许，C返回到某个定义的原始状态（例如，如果我尝试通过拖放将C添加到X，C返回到原始位置）。

假设所有三个 div 都已渲染，并且每个都存在一个模型、视图和控制器。

随意告诉我你在这个过程中看到的逻辑片段以及你会把它放在哪里。但请回答：

1.  验证过程应该位于控制器层还是模型层的某个位置
2.  一旦经过验证，一个中介对象是否应该调用模型和视图来添加新的孩子，或者模型应该添加孩子，然后以某种方式触发视图做同样的事情。
3.  控制器是否应该意识到 dom 和模型的层次关系

我正在 Ember.js 中实现这样的东西，它对事物有一定的想法，但即使你不使用它/从未听说过它，也请回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T06:02:13.777

拖放操作应在视图中实现。当项目被丢弃时，它应该触发一个发送到路由器的操作。路由器（充当应用程序的状态机）应根据当前状态适当地响应操作。决定适当的动作可以完全基于状态，或者考虑模型或控制器的各个方面。

动作应该操纵模型和/或控制器，并且视图层中的绑定/观察者应该使视图与模型/控制器的新状态同步。

控制器不应该知道 DOM。

希望有帮助！我在此处提供的演示文稿中介绍了职责划分：[http ://www.lukemelia.com/blog/archives/2012/08/23/architecting-ember-js-apps/](http://www.lukemelia.com/blog/archives/2012/08/23/architecting-ember-js-apps/)

# c++ - C++ 验证日期而不使用类

> ID：13577555
> 
> 赞同：0
> 
> 时间：2012-11-27T04:46:01.120
> 
> 标签：c++, validation, date

嗨，我希望有人可以帮助我解决我做错的事情。这是我要指出的作业，但需要有人告诉我我是个多么白痴，因为我没有看到我做错了什么。

我应该让用户输入月、日和年来确定它是否是一个神奇的日期。我已经为另一个项目完成的那部分。我应该返回并使用名为 isDateValid 的函数验证日期。我很确定我遗漏了一些明显的东西，并且可以在这个问题上使用任何人的帮助。谢谢！

问题是当我运行它时，我总是得到它是一个无效的日期！

```
 #include <iostream>
 using namespace std;

 bool leapYear(int);
 bool isDateValid(int, int, int);

 int main()
 {
 int month, day, year;

 cout << "Is the date you are thinking of a magic one? Let's see...\n";
 cout << "What is the month in numeric form only? "; cin >> month;
 cout << "What is the day of the month? "; cin >> day;
 cout << "What is the four digit year? "; cin >> year;

 if (isDateValid(month, day, year) == false)
 {
 cout << "The date you entered, "<< month << "/" << day << "/" << 
 year << " is NOT a VALID Date.\n";
 cout << "If you think I am wrong, please feel free to run me again";
 }

 else   if (month * day == year % 100) // if true then do this
 {
 cout << "The date you entered, " << 
 month << "/" << day << "/" << year << " is a magic date!!\n"; 
 }
 else // if false then do this
 {
 cout << "The date you entered, " << month << "/" << day << "/" <<
 year << " is NOT a magic date!!\n";
 }

                                                            //Program ID
 cout <<"\n" << "L5P1LB.cpp\n" << "11-26-12\n" << endl;
 system ("pause");
 return 0;
 }//end main

 // isDateValid function to validate date entered
 bool isDateValid(int month, int day, int year)
 {
 bool validation = true;
 if(!(year >= 1600 && year <=2100))
     validation = false;    
 if(leapYear(year))
 {
     if ((month == 2) && (day > 29))
         validation = false;
     }
 else if(!leapYear(year))
 {
      if ((month == 2) && (day > 28))
          validation = false;
          }    
 if((month < 1 && month > 12) || (day < 1))
     validation = false;
 if((month == 1) || (month ==3) || (month == 5) || (month == 7) ||
     (month == 8) || (month == 10) || (month == 12) && (day > 31))
     validation = false;
 else if (((month == 4) || (month == 6) || (month == 9) || (month == 11)) && 
      (day > 30))
      validation = false;
 else
      validation == true;
 return validation;
 }
 // leapYear function to determine if the year is a leap year for validation
 bool leapYear(int year)
 {
 return(year % 100 != 0 && year % 4 == 0) || (year % 400 == 0);
 } // end leapYear 
```

编辑

好的，现在我的问题是我没有得到它不是一个有效的日期。它一起跳过验证，只运行它的“神奇日期”部分！

这是重写加上我的完整代码，希望在 Bloodshed 中正确缩进。

```
Description: This program determines if when the user enters a month, 
day, and four digit year which will then be stripped down to its
two digit year and determined to be a magic date if the day entered 
multiplied by the month entered equals the years two digit format.
Design:
    begin main
        input data
            Ask user for a month in number form
            Ask user for a day of the month
            Ask user for four digit month
        Validate
            begin isDateValid
                if year is between 1600 and 2100, inclusive then return 
                    true
                if month is between 1 and 12, inclusive return true
                if month is Jan, Mar, May, July, Aug, Oct, Dec 
                   then if day is between 1 and 31 inclusive return true
                if month is Apr, June, Sept, Nov
                   then if day is between 1 and 30 inclusive return true
                if month is Feb
                   then determine if leap year by running function 
                   leapYear provided for us.
                   if leap year is true 
                   then if day is between 1 and 29, inclusive return true
                   if not leap year then if day is between 1 and 28, 
                   inclusive then return true
            end isDateValid
        if isDateValid is true then 
        Calculate
            if the month times the year is equal to the year modulus 100
            then output it is a magic date
            if it does not equal the year in 2 digit form
            then output that it is not a magic date    
        else output error message

        Output Program ID
    end main

    The output needs to include the books data of 6/10/1960 */
#include <iostream>
using namespace std;

bool leapYear(int);
bool isDateValid(int, int, int);

int main()
{
    int month, day, year;

    cout << "Is the date you are thinking of a magic one? Let's see...\n";
    cout << "What is the month in numeric form only? "; cin >> month;
    cout << "What is the day of the month? "; cin >> day;
    cout << "What is the four digit year? "; cin >> year;

if (isDateValid(month, day, year) == false)
{
    cout << "The date you entered, "<< month << "/" << day << "/" << 
         year << " is NOT a VALID Date.\n";
    cout << "If you think I am wrong, please feel free to run me again";
}

else  if (month * day == year % 100) // if true then do this
{
    cout << "The date you entered, " << 
         month << "/" << day << "/" << year << " is a magic date!!\n"; 
}
else // if false then do this
{
    cout << "The date you entered, " << month << "/" << day << "/" <<
         year << " is NOT a magic date!!\n";
}

                                                            //Program ID
cout <<"\n" << "L5P1LB.cpp\n" << "11-26-12\n" << endl;
system ("pause");
return 0;
} //end main

// isDateValid function to validate date entered
bool isDateValid(int month, int day, int year)
{
    bool validation = true;  // validation set to true
    // if it is not between 1600 and 2100 then set to false
    if(!(year >= 1600 && year <=2100))
        validation = false;
    // call leapYear function
    if(leapYear(year))
{
    // if February and day is greater than 29 then set to false
    if ((month == 2) && (day > 29))
         validation = false;
}
    // else if NOT leapYear
    else if(!leapYear(year))
{
    // if February and day is greater then 28 then set to false
    if ((month == 2) && (day > 28))
          validation = false;
}    
    // if month is less then 1 and over 12 then set to false
    if((month < 1 && month > 12))
          validation = false;
    // if day is less then 1 then set to false    
    if(day < 1)    
          validation = false;
    // if month is 1 (Jan), 3 (Mar), 5 (May), 7 (July), 8 (Aug), 10 (Oct),
    // or 12 (Dec) and day is greater then 31 set to false    
    if((month == 1) || (month ==3) || (month == 5) || (month == 7) ||
         (month == 8) || (month == 10) || (month == 12) && (day > 31))
         validation = false;
    // if month is 4 (Apr), 6 (June), 9 (Sept), or 11 (Nov) and day is 
    // greater then 30 set to false
    if (((month == 4) || (month == 6) || (month == 9) || (month == 11)) && 
         (day > 30))
         validation = false;
    // else everything that is left set validation to true
    else
         validation = true;
return validation;
}  // End isDateValid

// leapYear function to determine if the year is a leap year for validation
bool leapYear(int year)
{
    return(year % 100 != 0 && year % 4 == 0) || (year % 400 == 0);
} // end leapYear 
```

对不起，如果我放错了地方或任何东西！

也感谢您的帮助。真的很感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T12:37:19.223

您在日期验证中出现了一些错误。

Luchian 指出的运算符优先级是 1，但您还有其他几个：

*   你测试一下`month < 1 && month > 12`- 这是不可能的，一个月不能小于 1 和大于 12
*   `validation == true`不做任何事情。`==`是比较运算符。幸运的是，这并没有像到达此代码时`validation`那样影响您的功能。`true`

我冒昧地以我认为更简洁的方式重写了它，但`month`如果您希望保留您的版本，您可能只需修复检查

```
bool isDateValid(int month, int day, int year)
{
    bool validation = true;
    if(!(year >= 1600 && year <=2100))
        validation = false;    

    if(day < 1)
        validation = false;

    switch(month)
    {
    case 2:
        if(leapYear(year)) // We only care about leap years in February 
            if(day > 29)
                validation = false;
        else
            if(day > 28)
                validation = false;
        break;
    case 1: case 3: case 5: case 7: case 8: case 10: case 12:
        if(day > 31)
            validation = false;
        break;
    case 4: case 6: case 9: case 11:
        if(day > 30)
            validation = false;
        break;
    default: // the month is not between 1 and 12
        validation = false;
        break;
    }
    return validation;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T04:48:37.333

`||`是短路的，因此`(month == 1) || (month ==3) || (month == 5) || (month == 7) || (month == 8) || (month == 10) || (month == 12) && (day > 31)`评估`true`是否满足第一个条件。您需要添加一组额外的括号：

`((month == 1) || (month ==3) || (month == 5) || (month == 7) || (month == 8) || (month == 10) || (month == 12)) && (day > 31)`

其他月份也一样。

还，

```
validation == true; 
```

是一个无操作，你可能是说`validation = true`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T00:12:02.553

就个人而言，我会建议一些更直接和简洁的东西。三元运算符一`?`开始可能会有点混乱，但一旦清楚地理解就会非常简单。我认为它是一种可以嵌入表达式的“if-else”。

```
bool isDateValid(int month, int day, int year)
{
    return year >= 1600 && year<= 2100 &&
           month >= 1 && month <= 12 &&
           day >= 1 &&
           day <= (month == 2 ? (leapyear(year) ? 29 : 28) :
                   month == 9 || month == 4 || month == 6 || month == 11 ? 30 : 31);
                   // "30 days has September, April, June and November..."
} 
```

如果您对月份常量使用枚举，它可能更具可读性：

```
enum Month { Jan = 1, Feb, Mar, Apr ... }; 
```

目标是实际编码：

```
day <= (month == Feb ? ... 
```

# java - 如何解决 java.lang.ClassNotFoundException？

> ID：13577569
> 
> 赞同：-1
> 
> 时间：2012-11-27T04:47:27.973
> 
> 标签：java

我处于使用 java 编程的非常初级的水平。我正在编写一个简单的代码，其中涉及进行投资并在其中添加利率。代码尚未完成，但我遇到了*java.lang.ClassNotFoundException*错误。由于我对java很陌生，所以我以前还没有遇到过这个问题。我的困惑是程序将编译。我真的不知道如何解决这个问题。

正如我所说，我不知道从哪里开始，这是错误。

```
Exception in thread "main" java.lang.NoClassDefFoundError: CDCalc/java
Caused by: java.lang.ClassNotFoundException: CDCalc.java
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247) 
```

整个代码

```
 import java.util.Scanner;

public class CDCalc
{
    public static void main(String args[])
        {
            int Count = 0;
            int Investment = 0;
            double Rate = 0;

            Scanner userInput = new Scanner(System.in);

            System.out.println("How much money do you want to invest?");
            int Invest = userInput.nextInt();

            System.out.println("How many years will your term be?");
            double Term = userInput.nextInt();

            System.out.println("Investing: " + Investment);
            System.out.println("     Term: " + Term);

            if (Term <= 1)
            {
            Rate = .3;
            }

            else if (Term <= 2)
            {
            Rate = .45;
            }

            else if (Term <= 3)
            {
            Rate = .95;
            }

            else if (Term <= 4)
            {
            Rate = 1.5;
            }

            else if (Term <= 5)
            {
            Rate = 1.8;
            }

            System.out.println("Total is: " + (Rate * Invest));

        }
} 
```

我将不胜感激任何帮助。谢谢

*编辑*

我很抱歉，我应该把这个包括在内。代码确实编译得很好，当我运行它时问题就来了。我确实使用了 javav CDCalc.java 和 java CDCalc，这就是错误出现的时候。更奇怪的是我没有改变任何东西，关闭了终端和我的文本编辑器，删除了保存的文件，重新打开所有内容，保存它，编译它，它现在运行良好。我再次为这篇文章道歉，但它似乎已经修复了！——</p>

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T04:50:13.997

您的代码应该可以正常编译。编译 Java 文件的方式与执行它们的方式不同。

你编译

```
javac CDCalc.java 
```

...并运行它们

```
java CDCalc 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T04:50:03.983

看起来你试图运行它`java CDCalc.java`，但它应该只是`java CDCalc`.

Java 命令采用类名（不是文件名），因此末尾没有“.java”，包名没有斜杠或反斜杠，而是点（您的类没有包）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T04:54:18.577

**这是一个示例：**

```
public class HelloWorldDemo {
 public static void main(String args[]) {
  System.out.println("Hello world test message");
 }
} 
```

这是示例 hello world 程序，当我使用 javac HelloWorldDemo.java 命令编译该程序时，可以正常编译并在当前目录中生成 HelloWorldDemo.class，

使用 java HelloWorldDemo 命令运行此程序后，我收到以下异常。

线程“主”java.lang.NoClassFoundError 中的异常：HelloWorldDemo

thread main 抛出此错误并异常退出程序。

这个错误的原因是java虚拟机在运行时找不到类文件。java命令查找当前目录下的类，所以如果你的class文件不在当前目录下，你必须在classpath中设置，所以解决方法是把这个.class文件放在classpath下

classpath 是每个系统中的环境变量，它指向目录中的类文件。如果您的类文件在 jar 文件中，则 jar 应该在类路径中。类路径可以是绝对路径（完整路径）或相对路径（与目录相关）

**解决 java.lang.NoClassDefFoundError :-**

HelloWorldDemo.class 在运行时不可用，因此我们必须使用 -classpath 选项将类文件设置为 java 命令

**java -类路径。你好世界**

这是为了通过为 java 命令设置类路径内联来修复 NoClassDefFoundError 错误。

我们通过指定来指示 jvm 在当前目录中查找 HelloWorldDemo.class。

如果类文件在不同的目录中，我们需要指定完整的目录绝对或相对路径，而不是 . 对于 java 命令

1.  修复 windows 中的 java.lang.NoClassDefFoundError：-

要解决 windows 中的 NoClassDefFoundError 错误，我们必须设置 CLASSPATH 环境变量。

要在 Windows 中设置类路径，我们必须配置以下值

**设置 CLASSPATH=%CLASSPATH%;.;**

%CLASSPATH% 表示要添加的现有类路径和 . 指向当前目录

设置类路径后，java HelloWorldDemo 命令工作正常并打印 hello world 消息

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T04:50:34.083

你的程序看起来不错。您是否使用编译过您的 java 文件`Javac`？

您需要执行以下步骤：

1.  使用编译`.java`文件（源代码）`javac`

    ```
     javac CDCalc.java 
    ```

    这应该创建一个名为`CDCalc.class`

2.  使用执行编译的类文件`java`

    ```
     java CDCalc 
    ```

# c++ - 如何从 boost ip::tcp::socket 类型中检索原始套接字 FD？

> ID：13577574
> 
> 赞同：0
> 
> 时间：2012-11-27T04:48:15.263
> 
> 标签：c++, sockets, boost

1）如何从 boost ip::tcp::socket 类型中获取原始套接字 fd ？

2) 我可以从 ip::tcp::socket 类型的 boost 库中读取并通过正常的 send(fd...) 系统调用进行写入吗？是否可行。有人能帮我吗..

提前致谢。

问候， 苏扬布

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T05:07:53.980

您应该能够从`ip::tcp::socket::native()`.

> 获取本机套接字表示。
> 
> native_type native();
> 
> 该函数可用于获取套接字的底层表示。这旨在允许访问未提供的本机套接字功能。

我想你可以通读这个类并写通，`send`因为缓冲区应该是隔离的，但你需要对其进行测试。

# c - 查找数组指针的长度 - Valgrind 错误：无效的读取大小为 1

> ID：13577575
> 
> 赞同：0
> 
> 时间：2012-11-27T04:48:22.810
> 
> 标签：c, arrays, valgrind

```
void OneDToTwoD(char* rel){

  /*  all the declarations here */

  while(rel[i] != '\0'){
    i++;
  }

... 
```

在上面的代码中，我“有时”都会遇到分段错误。并且 valgrind check 向我抛出“Invalid read of size 1” `while(rel[i] != '\0'){`

在那一行中，我试图找出`rel`. 我知道必须有更好的方法来做到这一点。我不能只是做`sizeof`我可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T04:56:55.740

如果`i`初始化为零，并`rel`指向有效的内存块，这将很好地工作。

1.  `rel`指向无效的内存块或 NULL。
2.  rel 不终止于`\0`
3.  `i`不是以 0 开头的。

还有一个答案，您无法从指针中知道内存块的大小。指针不是内存块。如果需要，指针可以指定无效的内存块。因此，如果您想知道内存块的长度，请将`length`参数添加到函数中。

# underscore.js - underscore.js - _.groupBy 嵌套属性

> ID：13577578
> 
> 赞同：7
> 
> 时间：2012-11-27T04:48:51.610
> 
> 标签：underscore.js, tastypie

Tastypie 返回一个数组，包括嵌套资源如下：

```
data = [

{"adult_price": "123", "child_price": "123", "currency": [{"abbrev": "USD", "id": "1", "name": "US Dollars", "resource_uri": "/api/v1/currency/1/", "symbol": "$"}], "day": [{"day_of_week": "TUE", "id": "2", "resource_uri": "/api/v1/days/2/"}], "description": "Please enter the tour description here", "id": "1", "important": "ex. Please contact us to negotiate a price if you want to book the Fiat for 1 person only.", "location": [{"id": "1", "name": "Dublin", "resource_uri": "/api/v1/location/1/"}], "name": "test dublin", "resource_uri": "/api/v1/tours/1/", "start_time": "23:03:51", "subtitle": "ex. These prices include... but not...", "teenager_student_price": "123", "under_6_price": "123"}, 

{"adult_price": "22", "child_price": "22", "currency": [{"abbrev": "USD", "id": "1", "name": "US Dollars", "resource_uri": "/api/v1/currency/1/", "symbol": "$"}], "day": [{"day_of_week": "WED", "id": "3", "resource_uri": "/api/v1/days/3/"}], "description": "Please enter the tour description here", "id": "2", "important": "ex. Please contact us to negotiate a price if you want to book the Fiat for 1 person only.", "location": [{"id": "2", "name": "Venice", "resource_uri": "/api/v1/location/2/"}], "name": "test Venice", "resource_uri": "/api/v1/tours/2/", "start_time": "23:09:01", "subtitle": "ex. These prices include... but not...", "teenager_student_price": "22", "under_6_price": "22"}, 

{"adult_price": "22", "child_price": "222", "currency": [{"abbrev": "USD", "id": "1", "name": "US Dollars", "resource_uri": "/api/v1/currency/1/", "symbol": "$"}], "day": [{"day_of_week": "MON", "id": "1", "resource_uri": "/api/v1/days/1/"}, {"day_of_week": "TUE", "id": "2", "resource_uri": "/api/v1/days/2/"}, {"day_of_week": "WED", "id": "3", "resource_uri": "/api/v1/days/3/"}], "description": "Please enter the tour description here", "id": "3", "important": "ex. Please contact us to negotiate a price if you want to book the Fiat for 1 person only.", "location": [{"id": "3", "name": "Rome", "resource_uri": "/api/v1/location/3/"}], "name": "test Rome", "resource_uri": "/api/v1/tours/3/", "start_time": "23:15:09", "subtitle": "ex. These prices include... but not...", "teenager_student_price": "22", "under_6_price": "222"}, 

{"adult_price": "22", "child_price": "222", "currency": [{"abbrev": "USD", "id": "1", "name": "US Dollars", "resource_uri": "/api/v1/currency/1/", "symbol": "$"}], "day": [{"day_of_week": "MON", "id": "1", "resource_uri": "/api/v1/days/1/"}, {"day_of_week": "WED", "id": "3", "resource_uri": "/api/v1/days/3/"}], "description": "Please enter the tour description here", "id": "4", "important": "ex. Please contact us to negotiate a price if you want to book the Fiat for 1 person only.", "location": [{"id": "3", "name": "Rome", "resource_uri": "/api/v1/location/3/"}], "name": "test Rome 2", "resource_uri": "/api/v1/tours/4/", "start_time": "01:01:11", "subtitle": "ex. These prices include... but not...", "teenager_student_price": "22", "under_6_price": "22"}, {"adult_price": "123", "child_price": "123", "currency": [{"abbrev": "USD", "id": "1", "name": "US Dollars", "resource_uri": "/api/v1/currency/1/", "symbol": "$"}], "day": [{"day_of_week": "TUE", "id": "2", "resource_uri": "/api/v1/days/2/"}, {"day_of_week": "THU", "id": "4", "resource_uri": "/api/v1/days/4/"}], "description": "Please enter the tour description here", "id": "5", "important": "ex. Please contact us to negotiate a price if you want to book the Fiat for 1 person only.", "location": [{"id": "2", "name": "Venice", "resource_uri": "/api/v1/location/2/"}], "name": "test Venice 2", "resource_uri": "/api/v1/tours/5/", "start_time": "01:03:27", "subtitle": "ex. These prices include... but not...", "teenager_student_price": "123", "under_6_price": "123"}

] 
```

我想执行一个 .groupBy 按 location[0].names 属性分组，它应该返回一个由 3 个数组组成的数组。这可能吗？

我怎样才能执行相当于：

```
_.groupBy(data, 'location[0].name'] 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-27T04:59:27.040

for 的第二个参数[`groupBy`](http://underscorejs.org/#groupBy)可以是函数或字符串：

> **通过...分组** `_.groupBy(list, iterator)`
> 
> 将集合拆分为集合，按通过**迭代器**运行每个值的结果进行分组。如果**迭代器**是字符串而不是函数，**则按迭代器**命名的属性对每个值进行分组。

您想使用函数表单，因为您没有对简单的顶级属性进行分组：

```
_(data).groupBy(function(o) {
    return o.location[0].name;
}); 
```

或者：

```
_(data).groupBy(o => o.location[0].name) 
```

演示：http: [//jsfiddle.net/ambiguous/YFKXC/](http://jsfiddle.net/ambiguous/YFKXC/)

# java - 在浏览器中运行小程序时出现 ClassNotFound 异常

> ID：13577588
> 
> 赞同：0
> 
> 时间：2012-11-27T04:49:52.887
> 
> 标签：java, wordpress, lwjgl, slick2d

所以我试图在我的网站上运行一个使用 Slick 2D 制作的小程序。我编写了以下 HTML 并将其放在我网站的新页面上

```
 <applet code="org.lwjgl.util.applet.AppletLoader" 
    archive="lwjgl_util_applet.jar" 
    codebase="." 
    width="800" height="600">

    <param name="al_title" value="myslickgame"> 
    <param name="al_main" value="org.newdawn.slick.AppletGameContainer"> 
    <param name="game" value="org.defaultpackage.main">

    <param name="al_jars" value="spacewalk.jar, lwjgl.jar, slick.jar"> 

    <param name="al_windows" value="windows_natives.jar"> 
    <param name="al_linux" value="linux_natives.jar"> 
    <param name="al_mac" value="macosx_natives.jar"> 

    <param name="separate_jvm" value="true"> 
    </applet> 
```

但是，每当我加载该页面时，我都会收到一个找不到类的错误。我已将 lwjgl.util.applet JAR 和我的 applet JAR 添加到 public_html 文件夹，但它似乎仍然没有读取它们。如果这很重要，它是一个 wordpress 网站。我试图找到 WordPress 将其页面数据存储在哪里，以便我可以将 JAR 粘贴在该文件夹中，但没有这样的运气。有帮助吗？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T14:05:57.500

我认为这可能是因为您还需要在网站上拥有本机 jar 文件（对于您正在使用的操作系统）。

确保您有 jar 文件（或至少有一个适用于您的操作系统的 jar 文件）：

```
<param name="al_windows" value="windows_natives.jar"> 
<param name="al_linux" value="linux_natives.jar"> 
<param name="al_mac" value="macosx_natives.jar"> 
```

在与 html 文件相同的目录中。

你可以在 lwjgl natives 文件夹中找到自己制作这个 jar 的文件，windows_natives.jar 应该包含这些文件：

```
jinput-dx8.dll
jinput-dx8_64.dll
jinput-raw.dll
jinput-raw_64.dll
lwjgl.dll
lwjgl64.dll
OpenAL32.dll
OpenAL64.dll 
```

只需将它们放入一个新的 .zip 文件夹，然后将其重命名为 .jar 扩展名。其他本地 jars（linux、mac、solaris）应该包含它们各自来自 lwjgl 发行版的本地文件。

我使用 lwjgl 的文件夹结构如下：

```
index.html
jinput.jar
linux_natives.jar
lwjgl.jar
lwjgl_util.jar
lwjgl_util_applet.jar
mjgame.jar (the java game jar)
slick-util.jar
windows_natives.jar 
```

如果这不是问题的答案，也许您可​​以发布您收到的异常的副本，我们可以进一步调试此问题。

此外，您无需将文件上传到网站上即可测试您是否正确设置了文件。您可以简单地在 Internet 浏览器中从本地磁盘打开 html 文件，它应该可以工作。

我知道弄清楚这是多么令人沮丧，我花了一周的时间才弄清楚为什么我第一次没有做对。

祝你好运！

* * *

## - 编辑 -

我很确定您还必须对 jar 文件进行签名，否则您可能会遇到黑屏。您需要使用 JavaSDK bin 文件夹中的 keytool 和 jarsigner，如下所示：

```
C:/Program Files/Java/jdk1.7.0_07/bin 
```

这是一个关于签署 jar 文件的教程页面：

```
https://www.owasp.org/index.php/Signing_jar_files_with_jarsigner 
```

您需要首先创建一个密钥库文件，以存储证书信息（据我了解）您可以使用以下命令执行此操作：

```
keytool -genkey -keystore testkeystore -alias bob 
```

^ testkeystore - 是存储证书信息的文件 ^ bob - 你决定的别名

然后你可以使用 jarsigner 工具对 jar 文件进行签名：

```
jarsigner -keystore testkeystore -signedjar mysignedjar.jar targetjar.jar bob 
```

^ targetjar.jar - 您要签名的 jarfile ^ mysignedjar.jar - 将成为 targetjar.jar 签名副本的输出 jarfile

在我从上面得到的文件结构中，我签署了所有的 jar 文件：

```
jinput.jar
linux_natives.jar
lwjgl.jar
lwjgl_util.jar
lwjgl_util_applet.jar
mjgame.jar (the java game jar)
slick-util.jar
windows_natives.jar 
```

这应该可以在签署所有 jar 文件后解决您的黑屏问题。如果它不适合你留下一些反馈，我们会解决这个问题，也许会写一个逐步的答案。

# objective-c - ios中多个人同时发短信？

> ID：13577591
> 
> 赞同：0
> 
> 时间：2012-11-27T04:50:10.643
> 
> 标签：objective-c, ios, xcode, ios5

我有一个要求，我需要同时向多个人发送 SMS 消息。我不知道有任何第三方 API 用于此。你有什么建议来完成这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T04:52:47.873

根据您所在的位置，[Twilio](http://www.twilio.com/docs/api/rest/sending-sms)是一个不错的选择。他们有大量的文档和很好的示例代码。

# php - 使用 MySQL PDO 时出现分段错误

> ID：13577596
> 
> 赞同：0
> 
> 时间：2012-11-27T04:50:43.737
> 
> 标签：php, mysql, pdo, laravel

我刚刚开始在 Laravel 的一个新站点上工作，但在连接到 MYSQL（版本 5.5.25a）数据库时遇到了问题。mysql 服务器在同一个本地网络上，但在与 Web 服务器（OSX 服务器）不同的机器上。长期以来，这种设置在 Codeigniter、YII、直接 PHP 等中对我来说运行良好。

我已经使用我的数据库凭据设置了 Laravel `/config/database.php`，但是只要它在使用 Laravel 的 PDO 数据库类建立数据库连接的页面上，该站点就会超时。它给了我可怕`Error 324 (net::ERR_EMPTY_RESPONSE): The server closed the connection without sending any data.`的 chrome 错误。

如果我输入的凭据不正确（密码/用户名/dbname 错误），Laravel 会给我一个真实的 MYSQL 错误消息`SQLSTATE[28000] [1045] Access denied for user...`，所以它似乎可以很好地与服务器通信。

如果我使用`mysqli`chromePHP 进行快速而肮脏的数据库调用并记录结果，一切似乎工作正常，并且它从数据库返回正确的行数，没有超时，没有问题。

```
$mysqli = new mysqli('192.168.1.178', 'username', 'password', 'dbname');

if ($mysqli->connect_error){
    die ("Connect error: " . $mysqli->connect_error );
}

if ($result = $mysqli->query("SELECT username FROM user LIMIT 10")) {
    ChromePhp::log($result->num_rows);
    /* free result set */
    $result->close();
} 
```

**更新**

我检查了日志，但没有从 mysql 得到任何信息，但是 apache 日志在超时时显示以下错误：

```
child pid 60418 exit signal Segmentation fault (11) 
```

我还注意到 phpinfo() 显示 PDO 客户端 API 版本设置为`mysqlnd 5.0.7-dev - 091210 - $Revision: 300533`，我想知道客户端版本和 MYSQL 服务器版本之间的这种不匹配是否会导致问题？

当我尝试将 PDO 与 mysql 一起使用时，为什么 php/mysql 会超时？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T05:06:59.240

您有 2 个环境 CLI 和浏览器。两者都应该与您的 ip 或“localhost”一起使用，但根据我的经验，一个环境在 DB 配置中与您的 IP 一起使用，而另一种环境在 DB 配置中与“localhost”一起使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T19:45:55.033

我在试用 Laravel 4 beta 时遇到了这个错误的问题。我会`Segmentation fault: 11`从命令行运行迁移时看到。

**事实证明，我的问题是安装了MAMP**的副作用。php **MAMP**的版本只提供在浏览器中运行。开箱即用，OS X 带有它自己的 php 版本。`php`这是您在命令行中使用时 OS X 将运行的版本。

一个快速的解决方法是将 MAMP php 目录添加到您的 .profile 或 .bash_profile 文件中。这里有一个更好的指南来说明如何做到这[一点](http://www.metaltoad.com/blog/getting-command-line-access-php-and-mysql-running-mamp-osx)。

# iphone - 来自用户先前文本字段输入的 UIPickerview 过滤器列表

> ID：13577597
> 
> 赞同：0
> 
> 时间：2012-11-27T04:51:17.100
> 
> 标签：iphone, ios

```
int variabla;

- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView {

return 1;
}

- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component {

if (variabla == 1)
    return list4.count;

else if(variabla == 2)
    return list3.count;

if (variabla == 3)
    return list1.count;

if (variabla == 4)
    return list2.count;

return YES;

[pickerView reloadAllComponents];
}

- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component {
if (variabla == 1) {
    subjectField.text = [list4 objectAtIndex:row];
}
else if  (variabla == 2) {
    gradeField.text = [list3 objectAtIndex:row];
}
else if (variabla == 3) {
    mathField.text = [list1 objectAtIndex:[pickerView selectedRowInComponent:0]];
    selectedRow = [pickerView selectedRowInComponent:0];
    coreTView.text = [mathMeaning objectAtIndex:selectedRow];
}
if (variabla == 4) {
    elaField.text = [list2 objectAtIndex:[pickerView selectedRowInComponent:0]];
    selectedRow = [pickerView selectedRowInComponent:0];
    coreTView.text = [elaMeaning objectAtIndex:selectedRow];
}

[pickerView reloadAllComponents];
NSLog(@"row selected is %d", selectedRow);

}

- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component  {

if (variabla == 1)
    return [list4 objectAtIndex:row];

if (variabla == 2)
    return [list3 objectAtIndex:row];

if (variabla == 3)
    return [list1 objectAtIndex:row];

if (variabla == 4)
    return [list2 objectAtIndex:row];

return NO;

[pickerView reloadAllComponents];
} 
```

我想知道或指出如何根据以前的`UIPickerView`用户输入**加载a****橙色**，我想看橙色，黄色。`UITextField`**`UIPickerView`**

 ***** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T05:07:03.690

听起来是使用多维数组的好时机：

```
NSArray *titles = [[NSArray alloc] initWithObjects:
 [[NSArray alloc] initWithObjects:@"Red",@"Green",@"Blue",nil],
 [[NSArray alloc] initWithObjects:@"Orange",@"Yellow",@"Grape",nil],
 nil]; 
```

现在您只需要一个`int`（看起来您正在使用`variabla`）代表输入 - 例如，如果用户输入“Apple”，那么您将设置`variabla`为 0；如果他们输入“橙色”，则设置`variabla`为 1；等等。

然后，您可以相应地设置相关功能：

```
- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component {
    return [[titles objectAtIndex:variabla] count];
}

- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component  {
    return [[titles objectAtIndex:variabla] objectAtIndex:row];
} 
```

您可以通过简单地将另一个添加`NSArray`到`titles`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T05:10:21.847

只需使用`BOOL`变量来检查用户单击哪个按钮，苹果或橙色...

这里取变量

```
BOOL isApple; 
```

当使用点击苹果按钮加载pickerview时，在方法中设置tru这个变量，如下所示..

```
-(IBAction)btnApple_Clicked(id)sender{
   isApple =TRUE;
   [pickerView reloadAllComponents];
}

-(IBAction)btnOrange_Clicked(id)sender{
   isApple =FALSE;
   [pickerView reloadAllComponents];
} 
```

然后在这个委托方法中像这样使用......

```
- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component {
   if(isApple){
       return [appleArray count];
   }
   else{
       return [orangeArray count];
   }
}

- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component  {
    if (isApple) {
        return [appleArray objectAtIndex:row];
    }
    else{
        return [appleArray objectAtIndex:row];
    }
}

- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component {
    if (isApple) {
        yourTextField.text = [appleArray objectAtIndex:row];
    }
    else{
        yourTextField.text = [appleArray objectAtIndex:row];
    }
} 
```****

# ruby-on-rails - 覆盖冲突app/controllers/static_pages_controller.rb？

> ID：13577598
> 
> 赞同：0
> 
> 时间：2012-11-27T04:51:24.023
> 
> 标签：ruby-on-rails, rake, static-pages

我正在尝试创建一个静态页面。我输入`$ rails generate controller StaticPages home help --no-test-framework`并得到下面的输出。

```
 conflict  app/controllers/static_pages_controller.rb
Overwrite   
/Users/themaktravels/rails_projects/sample_app/app/controllers/static_pages_controller.rb?   (enter "h" for help) [Ynaqdh] d
  class StaticPagesController < ApplicationController
-   def ...
+   def home
+   end
+ 
+   def help
    end
  end
Retrying... 
```

我试图看看有什么区别，但我不熟悉这个以了解区别是什么。当我尝试不覆盖文件然后测试 URL 时，我的页面上出现此错误。

```
Routing Error

No route matches [GET] "/static_pages/home"

Try running rake routes for more information on available routes. 
```

然后我尝试使用 GIT 检查我的更改，然后尝试运行 rake 路由

```
bundle update rake

bundle show rake 

require 'rake/dsl_definition' 
```

但我的静态页面仍然显示错误。有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T06:32:42.443

将此添加到您的路线文件中

*配置/路由.rb*

```
get "static_pages/home"
get "static_pages/help" 
```

高温高压

# javascript - 如何在准备好的文档中返回函数？

> ID：13577600
> 
> 赞同：2
> 
> 时间：2012-11-27T04:51:24.703
> 
> 标签：javascript, jquery, html

我不知道是否可以这样做，就像我有 2 个 js 文件一样。第一个 Js 文件：

```
var news_pos, about_pos, services_pos, clients_pos;

function define_pos() {

    var $top_slides=$('#top_slides'), 
        $mid_nav=$('#mid_nav'), 
        $news_section=$('#section-1');

    var fixed_height = $top_slides.height() + $mid_nav.height();

    news_pos = fixed_height - 20;
    about_pos = fixed_height + $news_section.height();
    services_pos = fixed_height + $news_section.height() * 2;
    clients_pos = fixed_height + $news_section.height() * 3;
}

$(document).ready(function() {

    var section_news = $('#section-1'),
        section_about = $('#section-2'),
        section_services = $('#section-3'),
        section_clients = $('#section-4');

    setheight();

    function setheight() {
        var section_height = $(window).height() + 200;
        $section_news.height(section_height);
        $section_about.height(section_height); 
        $section_services.height(section_height);
        $section_clients.height(section_height);
        define_pos();
    }
}); 
```

1.  第二个JS文件：

    $(文档).ready(函数() {

    ```
    var nav = {

        '$btn1': $('#btn1'),
        '$btn2': $('#btn2'),
        '$btn3': $('#btn3'),
        '$btn4': $('#btn4'),
        '$btn5': $('#btn5'), 

        myclick : function() {

            myclicked(nav.$btn1, 0);
            myclicked(nav.$btn2, news_pos);
            myclicked(nav.$btn3, about_pos);
            myclicked(nav.$btn4, services_pos);
            myclicked(nav.$btn5, clients_pos);

            function myclicked(j,k) {
                j.click(function(e) {    
                    e.preventDefault();
                    $('html,body').animate({scrollTop: k}, 1000);
                });
            }
            // Is it right to do return{'myclick':myclick}, 
            // how to call? seems not logical
        }
    };

    // Here will not work because it say news_pos is undefined.
    // If I use setTimeout(nav.myclick,1000), it will works but
    // I want to run it right the when position is caculated.
    nav.myclick(); 
    ```

    });

如何将 nav.myclick() 函数传递给第一个 js 文件并将其放入 setheight() 和 define_pos() 下？顺便说一句，在 stackoverflow 中编写代码很奇怪，按 tab 并没有真正给你任何间距。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T04:55:57.473

现在，`function setheight(){ }`是第一个内部函数`$(document).ready(function(){}`。它的“范围”（可见性）仅限于该功能内部。

要使其对所有人可见，您需要将其移到`$(document).ready(function(){}`.

*然后，在第二个文件之前*声明第一个文件，第二个文件中的函数现在可以使用`setheight()`.

* * *

要使用`myClick`：

您现在的功能是`myclicked()`，因此您需要将其更改为`myclick()`. 然后，您可以在全局范围内调用函数：

```
function myclick(j,k){            
    j.click(function(e) {   
    e.preventDefault();
    $('html,body').animate({scrollTop: k}, 1000);
    setheight();
    define_pos();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T05:25:42.127

这是根据评论中的“新”问题命名您的位置函数的一种方法。它是纯 JS，而不是 JQuery，但无论如何都是一样的：

```
var POSITIONING = {
    news_pos : 0,
    about_pos : 0,
    services_pos : 0,
    clients_pos : 0,

    define_pos : function() {
         var fixed_height = 100;

         POSITIONING.news_pos     = fixed_height; // + whatever
         POSITIONING.about_pos    = fixed_height; // + whatever
         POSITIONING.services_pos = fixed_height; // + whatever
         POSITIONING.clients_pos  = fixed_height; // + whatever
    },

    set_height : function() {
        alert(this.news_pos)
    }
}; 
```

把它放在一个 JS 文件中，在使用它的任何其他文件之前加载它，然后调用如下：

```
// For example, when the window loads...or document is ready, whatever
window.onload = function() {
    POSITIONING.define_pos();
    POSITIONING.set_height();
}; 
```

还值得注意的是，看起来这可以通过使用边距或填充或其他东西的 CSS 更有效地完成。应该会轻松很多。

# php - 从 jdoc 中删除 emulateIE7:include type = head in joomla 1.5

> ID：13577610
> 
> 赞同：0
> 
> 时间：2012-11-27T04:52:50.280
> 
> 标签：php, internet-explorer, cross-browser, joomla1.5

我正在调试我们网站的一个新部分，当我在 IE 中注意到它告诉它呈现为 ie7 时，我无法弄清楚为什么我会遇到一个奇怪的错误（只是一些空白问题不是大问题），因为我们正在尝试在网站上使用较新的代码，例如涉足 html5，并且我们的流量中只有不到 5% 的流量使用 ie7，我认为放弃它以支持 ie8/9 兼容性是安全的。我还注意到，当我将文档模式切换到 ie8 时，我正在处理的问题消失了。

我敢肯定，很多人都可以建立在除 IE 之外的所有内容中都能正常工作的新内容，所以我希望至少输出为最新版本，这样可以使其中一些更容易。问题是强制 ie7 的代码来自 jdoc:include type=head 而我不知道如何编辑它通过的内容。

网站[http://www.webchild.com.au](http://www.webchild.com.au)

引入头脑的代码

```
<jdoc:include type="head" /> 
```

通过的不需要的代码

```
<meta http-equiv="X-UA-Compatible" content="EmulateIE7"> 
```

我们正在使用经过大量修改的模板在 Joomla 1.5 上运行一个站点，我不知道以前的开发人员从哪里得到的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T14:17:00.940

这不是 Joomla 通常将其作为一部分加入的东西，`<jdoc:include type="head" />`但是在它是任何一种好的解决方案的那一天，有一些扩展产生了这个。如果您查看插件管理器，您可能会看到与“IE8”和/或“兼容性”或“标准”有关的内容。如果您找到可能的候选者，请将其禁用并查看 X-UA-Compatible 标头是否消失。

如果它不存在，也许它是模板的一个选项？从像这样的行

```
<link rel="stylesheet" href="/templates/yoo_mellow_Nov_2012/css/template.css" type="text/css" /> 
```

看起来您正在使用[YouTheme的“Mellow”主题](http://www.yootheme.com/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-27T14:31:51.090

如果该模板是由专业人员制作的，那么您应该检查类似`functions.php`或`someUnusualFile.php`在您的模板文件夹中的内容。当然之后`index.php`。据我所知，我会把它放进去，`index.php`但有人可以用另一种方式来做。

向我们展示您的 html 代码`index.php`- 只有 head 部分

# java - glDrawElements 没有绘制整个模型

> ID：13577612
> 
> 赞同：1
> 
> 时间：2012-11-27T04:53:02.793
> 
> 标签：java, opengl, lwjgl, vbo

我不明白这是怎么回事！我有这个网格加载器，当我用它加载小网格时，我的程序可以正常工作，绘制整个网格。但是现在我用一个大网格（超过 100,000 个顶点）测试了程序，它只绘制了一小部分！是不是我的显卡有什么问题，比如一些疯狂的小限制或什么？

使用 LWJGL，我从他们的教程中获取了一些代码：

```
private ByteBuffer indexBuffer;

...

// Create a new VBO for the indices and select it (bind)
indxBufId = glGenBuffers();
glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, indxBufId);
glBufferData(GL_ELEMENT_ARRAY_BUFFER, indexBuffer, GL_STATIC_DRAW);

...

// Bind to the index VBO that has all the information about the order of the vertices
glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, indxBufId);

// Draw the vertices
glDrawElements(GL_TRIANGLES, indexCount, GL_UNSIGNED_BYTE, 0);

// Put everything back to default (deselect)
glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, 0); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-27T04:53:02.793

不，过去的自己，这不是你的显卡或任何东西的问题，这是你的索引的问题。您正在使用 BYTES 作为索引缓冲区，在使用 12 三角形立方体等小型模型时，这非常好，并且可能由于它的小尺寸而更可取。

但是如果你的模型在你的顶点数组中运行超过 256 个索引，你就会得到环绕。很多。特别是当您要求索引 125,647 时。

如果您的模型大于 256 verts，则需要使用 short 或 int。请记住更改以下内容：

```
private ByteBuffer indexBuffer; //change to
private ShortBuffer indexBuffer; //or
private IntBuffer indexBuffer; 
```

还有这些：

```
glDrawElements(GL_TRIANGLES, indexCount, GL_UNSIGNED_BYTE, 0); //fine for up to 256
glDrawElements(GL_TRIANGLES, indexCount, GL_UNSIGNED_SHORT, 0); //up to 65535
glDrawElements(GL_TRIANGLES, indexCount, GL_UNSIGNED_INT, 0); //up to 4294967295 
```

请记住，尽管 Java 的整数、短裤和字节都是有符号的，但 OpenGL 使用的是无符号的，并且会相应地转换缓冲区中的内容。

（虽然这些示例是 LWJGL，但这也适用于 C 语言中的普通 OpenGL。）

# r - 在 RConsole 中找不到类异常

> ID：13577614
> 
> 赞同：0
> 
> 时间：2012-11-27T04:53:06.020
> 
> 标签：r, rjava

我有一个用 rJava 编写的 es.r 脚本。所以我的 R 脚本在内部调用我的 Java 函数。我创建了一个批处理文件，用于设置包含所有依赖项的 classPath。我可以使用 Rscript 在终端中运行脚本。但是当我尝试使用 source() 从 RConsole 运行脚本时，我得到了 Class Not Found Exception 。

任何的想法 ？

# 编辑

包括

```
#!/usr/bin/Rscript
library(rJava)
#.jclassPath()
.jinit()
.jaddClassPath(dir("E:\\Documents and Settings\\Admin\\My Documents\\Downloads\\OG-R\\target\\mavenLib", full.names=TRUE ))

.jclassPath() 
```

拿到

> .jcall(obj, "[[Ljava/lang/String;", "getAllContentFromKeyword", 中的错误：java.lang.NullPointerException

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T05:16:23.983

消息说找不到类路径，可能是因为您指定了绝对路径。

也许你可以试试这个：

```
library(rJava) 
.jinit() 
.jaddClassPath(yourclassPath) 
```

# php - 在输入必填字段之前限制字段的追加

> ID：13577615
> 
> 赞同：0
> 
> 时间：2012-11-27T04:53:24.097
> 
> 标签：php, jquery, forms

我有一个按钮，一旦单击它就会在我的表单上附加一组输入字段。它工作得很好，但我想限制附加按钮仅在第一个附加的必填字段得到回答之前工作。这是我的附加脚本：

```
<script type="text/javascript">
    var oncount = 0;
    $(function(){
    $('a#add_field_online').click(function(e){
    e.preventDefault();
    oncount += 1;

    $('#activation').append(    
        '<div class="row-fluid">'
        +'<div class="span12" style="border-bottom:1px #dddddd; background-color:#cac6c6; ">'  
                +'<div style="float:left; width:5%;">'
                +'<label>&nbsp;</label>'
                +'<input type="radio" id="oprocess_where' + oncount + '" name="oprocess_where' + oncount + '" value="Online" checked >Online'
                +'</div>'

                +'<div style="float:left; width:7%">'
                +'<label>&nbsp;</label>'                    
                +'<select name="ostatus' + oncount + '" id="ostatus' + oncount + '"  class="input-small">'
                +'<option value="Ghost">Ghost</option>'
                +'<option value="Actual">Actual</option>'
                +'</select>'
                +'</div>'

                +'<div style="float:left; width: 7%">'
                +'<label>Type</label>'
                +'<select id="oupg' + oncount + '" name="oupg' + oncount + '"  class="input-small" >'
                +'<option value="" selected="&nbsp;" >&nbsp;</option>'
                +'<option value="Exp" >Exp</option>'
                +'<option value="Post" >Post</option>'
                +'<option value="Upgrade" >Upg</option>'
                +'<option value="Retail" >Retail</option>'
                +'</select>'
                +'</div>'

                +'<div style="float:left; width: 8%">'
                +'<label>F.U.D</label>'
                +'<input id="oupg_date' + oncount + '" name="oupg_date' + oncount + '"  type="text" id="rate_1" class="input-small" />'
                +'</div> '

                +'<div style="float:left; width: 11%">'
                +'<label>Phone Used</label>'
                +'<select id="ophone_used' + oncount + '" name="ophone_used' + oncount + '" class="input-medium" >'
                    +'<option value="Basic" >Basic</option>'
                    +'<option value="LTE" >LTE</option>'
                    +'<option value="iPhone 4/4S" >iPhone 4/4S</option>'
                    +'<option value="iPhone LTE" >iPhone LTE</option>'
                    +'<option value="BlackBerry" >BlackBerry</option>'
                    +'<option value="3G/4G" >3G/4G</option>'
                    +'<option value="Data Block / Smartphone" >Data Block / Smartphone</option>'
                +'</select>'
                +'</div>'

                +'<div id="odataBasic' + oncount + '" style="float:left; width: 12%;">'
                +'<label>Data Plan</label>'
                +'<select id="odata' + oncount + '" name="odata' + oncount + '" class="input-medium" >'
                    +'<option value="DDL" >DDL</option>'
                    +'<option value="DPPU" >DPPU</option>'
                    +'<option value="Data Block" >Data Block</option>'
                    +'<option value="$10" >$10</option>'
                    +'<option value="$15" >$15</option>'                        
                +'</select>'
                +'</div>'

                +'<div id="odataSmart' + oncount + '" style="float:left; width: 12%; display: none;">'
                +'<label>Data Plan</label>'
                +'<select id="odata' + oncount + '" name="odata' + oncount + '" class="input-medium" >'
                    +'<option value="$15" >$15</option>'
                    +'<option value="$20" >$20</option>'
                    +'<option value="$25" >$25</option>'
                    +'<option value="$30" >$30</option>'
                +'</select>'
                +'</div>'

                +'<div id="odivmessaging' + count + '" style="float:left; width: 11%">'
                +'<label>Messaging</label>'
                +'<select id="omessaging' + oncount + '" name="omessaging' + oncount + '" class="input-medium" >'
                    +'<option value="" selected="&nbsp;" >&nbsp;</option>'
                    +'<option value="$5" >$5</option>'
                    +'<option value="$10" >$10</option>'
                    +'<option value="$15" >$15</option>'
                    +'<option value="$20" >$20</option>'
                    +'<option value="$30" >$30</option>'
                +'</select>'
                +'</div>'

                +'<div style="float:left; width: 8%">'
                +'<label>Rate Plan</label>'
                +'<input id="orate' + oncount + '" name="orate' + oncount + '"  type="text" id="rate_1" class="input-small" />'
                +'</div> '

                +'<div style="float:left; width: 8%">'
                +'<label>Phone Number</label>'
                +'<input id="onumber_act' + oncount + '" name="onumber_act' + oncount + '" type="text" id="number_act1" maxlength="10" class="input-small" />'
                +'</div>'

                +'<div style="float:left; width: 12%">'
                +'<label>Notes / Username </label>'
                +'<input id="onotes' + oncount + '" name="onotes' + oncount + '" type="text" id="notes" class="input-medium"/>'
                +'<input type="hidden" name="oncounter[]" value="1">'
                +'</div>'
        +'</div>'   
        +'</div>'   
         ); 
    $("#ophone_used"+ oncount).change(function(){
    if ($("#ophone_used"+ oncount).val() == "Basic") {
        ('#odataBasic'+ oncount).show();
        $('#odataSmart'+ oncount).hide();
        } else {
        $('#odataBasic'+ oncount).hide();
        $('#odataSmart'+ oncount).show();   
    }
    });
    });

}); 
```

这是html按钮：

```
<div class="row-fluid">
    <div class="span12">                                
        <div class="w-box-header">Activation Details
            <div class="pull-right">
            <a href="#" class="btn btn-mini btn-danger" id="add_field"><span>Add In-Store Activation</span></a> <a href="#" class="btn btn-mini btn-success" id="add_field_online"><span>Add Online Activation</span></a>
            </div>
        </div>
        <div id="activation">

        </div>                                  
    </div>       
</div> 
```

因此，基于附加脚本，直到输入字段 opg_date1，用户才能附加集 2，并且直到字段 oupg_date2 为空，他们才能附加集 3，依此类推。感谢您的阅读。

# sql-server-2012 - 使用 vfp 9.0 的网格中的日期选择器

> ID：13577617
> 
> 赞同：0
> 
> 时间：2012-11-27T04:53:41.810
> 
> 标签：sql-server-2012, visual-foxpro

我的工作项目是在视觉 fox-pro 9.0 上，所以我需要设计表格，我正在添加具有以下 2 列的网格，第一列是文本框控件，第二列是日期选择器控件

以下步骤我做到了：

1.  我创建了新表格
2.  添加了网格控制
3.  添加了活动 x Microsoft 日期选择器控件 6.0

但这是我的问题，

1.  只关注它显示的日期选择器，但我想在打开表单时一直显示。
2.  更改行日期也会影响其他行日期。
3.  带有空列或空列意味着需要显示空白。

请帮助我，我试图搜索日期选择器在网格中的工作方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T16:02:56.257

实际上，我会稍微替代您的建议。我会采用默认的网格文本框控件，并允许它始终显示给定的“值”现有的、null 等。然后，在列的文本框的双击事件中，让它调用一个具有日期选择器控件的独立表单，允许用户更改日期，并在返回时存储它（如果这样选择）。

否则，要正确显示日历控件，您可能需要非常大的行高，并将网格列的“SPARSE”属性更改为 FALSE（每次都显示）。

# php - 注销 facebook api 应用程序后出现错误，会话仍然有效吗？

> ID：13577619
> 
> 赞同：0
> 
> 时间：2012-11-27T04:54:16.097
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

所以我通过 facebook api 将 facebook 登录功能安装到我的网站，它工作正常，但是在使用 facebook 注销按钮注销后，我收到以下错误消息......我听说这是因为我的会话是仍然处于活动状态，但我从未使用过良好的会话功能，而是使用 getUser() 方法

```
FacebookApiException Object
(
    [result:protected] => Array
        (
            [error] => Array
                (
                    [message] => Error validating access token: The session is invalid because the user logged out.
                    [type] => OAuthException
                    [code] => 190
                    [error_subcode] => 467
                )

        )

    [message:protected] => Error validating access token: The session is invalid because the user logged out.
    [string:Exception:private] => 
    [code:protected] => 0
    [file:protected] => /home/content/72/9959172/html/madscore/facebook/facebook-sdk/src/base_facebook.php
    [line:protected] => 1238
    [trace:Exception:private] => Array
        (
            [0] => Array
                (
                    [file] => /home/content/72/9959172/html/madscore/facebook/facebook-sdk/src/base_facebook.php
                    [line] => 870
                    [function] => throwAPIException
                    [class] => BaseFacebook
                    [type] => ->
                    [args] => Array
                        (
                            [0] => Array
                                (
                                    [error] => Array
                                        (
                                            [message] => Error validating access token: The session is invalid because the user logged out.
                                            [type] => OAuthException
                                            [code] => 190
                                            [error_subcode] => 467
                                        )

                                )

                        )

                )

            [1] => Array
                (
                    [function] => _graph
                    [class] => BaseFacebook
                    [type] => ->
                    [args] => Array
                        (
                            [0] => /me
                        )

                )

            [2] => Array
                (
                    [file] => /home/content/72/9959172/html/madscore/facebook/facebook-sdk/src/base_facebook.php
                    [line] => 644
                    [function] => call_user_func_array
                    [args] => Array
                        (
                            [0] => Array
                                (
                                    [0] => Facebook Object
                                        (
                                            [sharedSessionID:protected] => 
                                            [appId:protected] => 314286708589099
                                            [appSecret:protected] => 8f803e0f9e9da4f2ba9f23ad3bd00ded
                                            [user:protected] => 
                                            [signedRequest:protected] => 
                                            [state:protected] => 
                                            [accessToken:protected] => 
                                            [fileUploadSupport:protected] => 
                                            [trustForwarded:protected] => 
                                        )

                                    [1] => _graph
                                )

                            [1] => Array
                                (
                                    [0] => /me
                                )

                        )

                )

            [3] => Array
                (
                    [file] => /home/content/72/9959172/html/madscore/authentication.php
                    [line] => 34
                    [function] => api
                    [class] => BaseFacebook
                    [type] => ->
                    [args] => Array
                        (
                            [0] => /me
                        )

                )

            [4] => Array
                (
                    [file] => /home/content/72/9959172/html/madscore/auth_output.php
                    [line] => 2
                    [args] => Array
                        (
                            [0] => /home/content/72/9959172/html/madscore/authentication.php
                        )

                    [function] => include_once
                )

        )

    [previous:Exception:private] => 
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T06:20:32.373

FB api 在内部使用 SESSIONS。

注销后，检查你的 $_SESSION 数组，你可能会在那里找到与 FB 相关的东西。

当我遇到类似问题时，我必须自己手动删除这些才能完成注销。

# gson - Gson 无法读取自己的日期格式

> ID：13577622
> 
> 赞同：4
> 
> 时间：2012-11-27T04:54:28.563
> 
> 标签：gson

我有一个具有 java.util.Date 字段的 Java 对象。当我对 Date 对象执行 System.out.println() 时，它会打印“2012-11-03”。然后，当我对 Java 对象执行 gson.toJson() 时，我可以看到 Date 字段的 Json 表示是“2012 年 11 月 3 日”。然后，当我尝试使用 gson.fromJson() 从 Json 字符串创建 Java 对象的另一个实例时，出现以下异常：

```
com.google.gson.JsonSyntaxException: Nov 3, 2012
    at com.google.gson.internal.bind.DateTypeAdapter.deserializeToDate(DateTypeAdapter.java:81)
    at com.google.gson.internal.bind.DateTypeAdapter.read(DateTypeAdapter.java:66)
    at com.google.gson.internal.bind.DateTypeAdapter.read(DateTypeAdapter.java:41)
    at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$1.read(ReflectiveTypeAdapterFactory.java:93)
    at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.read(ReflectiveTypeAdapterFactory.java:172)
    at com.google.gson.Gson.fromJson(Gson.java:795)
    at com.google.gson.Gson.fromJson(Gson.java:761)
    at com.google.gson.Gson.fromJson(Gson.java:710)
    at com.google.gson.Gson.fromJson(Gson.java:682) 
```

为什么 Gson 不能处理自己的日期格式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T09:42:40.873

使用 gsonbuilder 创建 gson 时必须使用 setDateFormat。

喜欢：

Gson gson = new GsonBuilder().setDateFormat("yyyy-MM-dd'T'HH:mm:ssZ").create();

# c# - 如何绑定到异步图像源

> ID：13577624
> 
> 赞同：2
> 
> 时间：2012-11-27T04:54:48.873
> 
> 标签：c#, windows-8, windows-store-apps

我希望不是将图像源绑定到`Image`我的绑定源的属性，而是指向一个远程获取图像的异步方法。我需要能够传入两个参数。

**图像提取**

```
class ConnectImage
{
    public static async Task<BitmapImage> GetImageAsync(Uri uri, String sid)
    {
        HttpClient httpClient = new HttpClient();
        httpClient.DefaultRequestHeaders.Add("Authorization", "OAuth " + sid); 

        HttpResponseMessage response = await httpClient.GetAsync(uri);

        BitmapImage bmp = new BitmapImage();
        byte[] byteArray = await response.Content.ReadAsByteArrayAsync();

        InMemoryRandomAccessStream ras = new InMemoryRandomAccessStream();
        DataWriter writer = new DataWriter(ras.GetOutputStreamAt(0));
        writer.WriteBytes(byteArray);
        BitmapImage image = new BitmapImage();
        image.SetSource(ras);
        return image;
    }
} 
```

**列表显示**

```
<ListView
        x:Name="itemListView"
        Grid.Row="1"
        ItemsSource="{Binding Source={StaticResource itemsViewSource}}"
        IsSwipeEnabled="False"
        ItemTemplate="{StaticResource FeedItemTemplate}"/> 
```

**饲料项目模板**

```
<DataTemplate x:Key="FeedItemTemplate">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <Border Width="110" Height="110">
            <Image Source="{Binding Image}" Stretch="UniformToFill" />
        </Border>
    </Grid>
</DataTemplate> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T13:51:11.740

属性不能是`async`，因此您需要一个`async`在完成时设置属性的初始化。

在您的虚拟机中：

```
public BitmapImage Image { get; private set; }

public async Task Load()
{
  Image = await ConnectImage.GetImageAsync(...);
  ... // other asynchronously-loaded properties
} 
```

然后让你的页面`Loaded`事件加载你的虚拟机：

```
public async void MainPage_Loaded(object sender, RoutedEventArgs e)
{
  await vm.Load();
} 
```

您的页面最初将`Image`设置为显示`null`，并且当加载图像时，它将显示在页面上。

# bash - 从 bash shell 脚本中隐藏错误语言

> ID：13577626
> 
> 赞同：0
> 
> 时间：2012-11-27T04:55:00.293
> 
> 标签：bash, shell

我有一个简单的 shell 脚本，可以针对 Apple Open Directory (LDAP) 服务器测试密码是否正确（或不正确）。

我想要的只是丢失 gobblygook 错误消息“节点/LDAPv3/1 的身份验证...”，而是插入我自己的语言，例如“密码不匹配”。

这是现在发生的事情：

```
bash-3.2# test-password 

Enter username you'd like to test password for:
jdoe

Enter Password to test for jdoe
asdasdasd
Authentication for node /LDAPv3/127.0.0.1 failed. (-14090, eDSAuthFailed)
<dscl_cmd> DS Error: -14090 (eDSAuthFailed) 
```

我更喜欢的是：

```
bash-3.2# test-password 

Enter username you'd like to test password for:
jdoe

Enter Password to test for jdoe
asdasdasd
 Password matches! 
```

所以我只需要知道一种方法，以便消除标准输出错误消息......

这是脚本：

```
#!/bin/bash
PATH=/bin:/usr/bin:/sbin:/usr/sbin export PATH
echo
echo Enter username you\'d like to test password for:
read USERNAME

echo
echo Enter Password to test for "$USERNAME"
read PASSWORD
/usr/bin/dscl /LDAPv3/127.0.0.1 auth $USERNAME $PASSWORD

if [ "$?" = "0" ]; then
       echo "Password is correct"
       exit 0

fi 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T04:57:37.657

这取决于写入错误消息的位置。表现良好的 UNIX 程序将它们的错误写入 stderr。

```
/usr/bin/dscl /LDAPv3/127.0.0.1 auth $USERNAME $PASSWORD 2> /dev/null  # stderr
/usr/bin/dscl /LDAPv3/127.0.0.1 auth $USERNAME $PASSWORD  > /dev/null  # stdout
/usr/bin/dscl /LDAPv3/127.0.0.1 auth $USERNAME $PASSWORD &> /dev/null  # both 
```

对于它的价值，您可以将它与`if`声明结合起来。此外，不需要`/usr/bin`前面的显式路径。

```
if dscl /LDAPv3/127.0.0.1 auth $USERNAME $PASSWORD 2> /dev/null; then
    : # success
else
    : # failure
fi 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T04:58:38.473

扔掉标准输出和错误：

```
/usr/bin/dscl /LDAPv3/127.0.0.1 auth $USERNAME $PASSWORD >/dev/null 2>&1 
```

除非`dscl`程序做一些狡猾的事情，比如打开你的`/dev/tty`设备进行写作，否则它应该会照顾好一切。

# google-maps - 在 Google 地图上报告地图错误

> ID：13577628
> 
> 赞同：2
> 
> 时间：2012-11-27T04:55:30.153
> 
> 标签：google-maps, google-maps-api-3

有人知道为什么*谷歌地图*在右下角显示**报告地图错误吗？**

并让我知道在初始化地图时是否可以将其删除。

![右下角错误 => 报告地图错误](../Images/48198c745aa709880c9db8710f36ef82.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-21T14:30:21.177

您可以使用 CSS 技巧隐藏它。它很脏但有效：

```
/* remove ugly google report-a-bug button from maps */
.gmnoprint:last-child {
    display: none !important;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T13:13:27.207

它非常简单，只需在 mapOptions 中传递参数**disableDefaultUI: true**即可将其删除。

然后，您可以通过将以下内容添加到 mapOptions 来添加您特别想要的元素（如缩放控件等）

**panControl：假，** **zoomControl：假，** ***scaleControl：真，***

您可以参考[Google Maps Controls](https://developers.google.com/maps/documentation/javascript/controls)进行参考。

希望这可以帮助。

# python - 在 Python 中使用 MPI 和 mpi4py 将各种进程上不同大小的数组收集到一个数组中

> ID：13577632
> 
> 赞同：1
> 
> 时间：2012-11-27T04:55:38.127
> 
> 标签：python, numpy, scipy, mpi, hpc

我在一堆不同的进程上有矩阵，但它们的大小不一定相同，所以我认为我不能使用 comm.gather() 或等价物。因此，我编写了自己的函数，但我遇到了非常奇怪的错误：

```
self.test_array_global[list_count:list_count+ count_symbol_list[count+1]] = temp_ar 
```

由于某种原因，我无法弄清楚这一行似乎没有正确访问 self.test_array_global 索引，因为我收到了这个错误。即使我手动尝试在上面设置 self.test_array_global 的形状，它似乎仍然不起作用..

```
Traceback (most recent call last):
  File "AudModMPI.py", line 183, in <module>
    aud.get_test_array()
  File "AudModMPI.py", line 149, in get_test_array
    self.test_array_global[list_count:list_count+ count_symbol_list[count+1]] = temp_ar
ValueError: could not broadcast input array from shape (82,300,50) into shape (0,300,50) 
```

这是整个功能：

```
def get_test_array(self, to_rank=0):
    if rank != to_rank:
                comm.send(self.test_symbol_list, dest=to_rank, tag=20)
    if (rank == to_rank):
        itera = range(num_proc)
        itera.remove(to_rank)
        self.test_symbol_list_global = []
        self.test_symbol_list_global.extend(self.test_symbol_list)
        count_symbol_list = [len(self.test_symbol_list)]
        temp_list = None
        for i in itera:
            temp_list = comm.recv(source=i, tag=20)
            count_symbol_list.append(len(temp_list))
            self.test_symbol_list_global.extend(temp_list)

    if rank != to_rank:
        comm.Send(self.test_array[0:len(self.test_symbol_list)], dest=to_rank, tag=21)
    if rank == to_rank and num_proc > 1:
        self.test_array_global = zeros((count_symbol_list[-1], self.test_array.shape[1], self.test_array.shape[2]))
        list_count = 0
        for count, i in enumerate(itera):
            list_count += count_symbol_list[count]
            temp_ar = empty((count_symbol_list[count+1], self.test_array.shape[1], self.test_array.shape[2]))
            comm.Recv(temp_ar, source=i, tag=21)
            print rank, list_count
            print rank, count_symbol_list[count+1]
            self.test_array_global[list_count:list_count+ count_symbol_list[count+1]] = temp_ar

        self.test_array_global[0:len(self.test_symbol_list)] = self.test_array[0:len(self.test_symbol_list)] 
```

# c++ - 使用 #pragma 和 #ifdef 的多行宏

> ID：13577636
> 
> 赞同：1
> 
> 时间：2012-11-27T04:55:57.597
> 
> 标签：c++, macros

我对宏有点陌生，所以很容易，但是我们有一个外部库，在 Windows 下编译时会生成大量警告（在 linux 上还不错）。它是一个只有标题的库，所以我不能只关闭整个库的警告，但我可以禁用生成警告的每个部分（这有点乏味）

所以我想知道是否可以创建一个宏，这样我就可以在几行中完成，而不是在下面输入以下内容。

```
#ifdef _WIN32
#pragma warning (push)
#pragma warning(disable : 4355) // 'this' used in base member initialize list
#endif
    code that generates warning
#ifdef _WIN32
#pragma warning (pop)
#endif 
```

但是，当我尝试创建如下宏时

```
// Disable a warning on win32 platform
// You must call DISABLE_WIN32_PRAGMA_WARN_END afterwards
#define DISABLE_WIN32_PRAGMA_WARN (nnn) \
#ifdef _WIN32 \
#pragma warning (push) \
#pragma warning(disable : nnn ) \
#endif

#define DISABLE_WIN32_PRAGMA_WARN_END \
#ifdef _WIN32 \
#pragma warning (pop) \
#endif 
```

但是使用 VS2012 编译时出现以下错误

```
error C2121: '#' : invalid character : possibly the result of a macro expansion
error C2065: 'nnn' : undeclared identifier
error C2351: obsolete C++ constructor initialization syntax
error C2612: trailing 'identifier' illegal in base/member initializer list 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T05:28:55.640

```
#ifdef _WIN32

// Disable a warning on win32 platform
// You must call DISABLE_WIN32_PRAGMA_WARN_END afterwards
#define DISABLE_WIN32_PRAGMA_WARN(nnn) \
__pragma (warning (push)) \
__pragma (warning(disable : nnn)) \

#define DISABLE_WIN32_PRAGMA_WARN_END \
__pragma (warning (pop)) \

#else

#define DISABLE_WIN32_PRAGMA_WARN(nnn)
#define DISABLE_WIN32_PRAGMA_WARN_END

#endif 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T05:13:57.643

您可以在头文件中定义序言和结尾，例如“warning_arrest_prologue.h”和“warning_arrest_epilogue.h”，其中将包含，

```
#ifdef _WIN32
#pragma warning (push)
#pragma warning(disable : 4355) // 'this' used in base member initialize list
#endif 
```

和

```
#ifdef _WIN32
#pragma warning (pop)
#endif 
```

分别。然后你可以通过以下方式使用它，

```
#include "warning_arrest_prologue"

// code that generates warning

#include "warning_arrest_epilogue" 
```

# c# - 如何过滤数据集中的多个表？

> ID：13577639
> 
> 赞同：1
> 
> 时间：2012-11-27T04:56:49.597
> 
> 标签：c#, ado.net, dataset, strongly-typed-dataset

我有一个强类型数据集，其中包含大约十几个表，所有表都通过关系链接。举个例子，一些主要的表是invoice、invoice_lines、invoice_journal、invoice_log、invoice_metadata；所有链接如您所期望的 invoice_id。还有一些第三级表挂在由它们各自的父行 ID 链接的子级上。

我希望根据顶级发票过滤我的整个数据集，为了示例的目的，我将保持简单，其中 invoice_id == 2265（只是一个示例），或 parent_invoice == null;

我希望在应用过滤器后只能看到每个表中与顶级表相对应的行。

谁能指出我正确的方向还是我必须手动执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T11:00:39.107

这听起来像你在找什么：

[http://msdn.microsoft.com/en-us/library/aa984340%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/aa984340%28v=vs.71%29.aspx)

# android - 如何识别布局中的视图？

> ID：13577642
> 
> 赞同：4
> 
> 时间：2012-11-27T04:57:23.310
> 
> 标签：android, view, android-relativelayout

我创建了一个*ImageView*

```
ImageView _view;
ViewGroup _root;
public void CreateImageView() {
    _root = (ViewGroup) findViewById(R.id.root);
    for (int i = 0; i < 5; i++) {
        _view = new ImageView(this);
        RelativeLayout.LayoutParams layoutParams = new RelativeLayout.LayoutParams(100, 100);
        layoutParams.leftMargin = 150;
        layoutParams.topMargin = 50;
        _view.setLayoutParams(layoutParams);
        _view.setId(i);
        _root.addView(_view);
    }
} 
```

当我单击 id = 3 的图像视图时，应该调用一个 Toast。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T05:10:13.440

取一个整型的 imageview 数组，`_view = new ImageView[size];`并在`forloop`initialize 中设置标签为 imageview，然后在处理点击事件时，像这样获取标签，`int k = (Integer) v.getTag();`这样你就可以准确地点击你的视图。

```
ImageView _view;
      ViewGroup _root;
      public void CreateImageView()
      {
          _root = (ViewGroup)findViewById(R.id.root);
_view = new ImageView[5];
            for ( int i = 0; i< 5;i++)
            {
                _view[i] = new RadioButton(this);
                _view[i].setTag(i);
                RelativeLayout.LayoutParams layoutParams = new RelativeLayout.LayoutParams(100, 100);
                layoutParams.leftMargin = 150;
                layoutParams.topMargin = 50;
                _view.setLayoutParams(layoutParams);
                _root.addView(_view[i]);
            }
      } 
```

点击事件#

```
 _view[j].setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
    // TODO Auto-generated method stub.
    int k = (Integer) v.getTag();

        if(k==3){
        Toast.makeText(this, "Your Message", Toast.LENGTH_LONG).show();
      }

    }
 } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T05:03:30.333

> 当我单击 imageview id = 3 时，将调用 Toast.maketext 我该怎么做？

将这样的内容添加到您的循环中：

```
if(i == 3) {
    _view.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            Toast.makeText(getBaseContext(), "Message", Toast.LENGTH_LONG).show();
        }
    });
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T05:23:31.387

不确定您到底想达到什么目的。但是您可以尝试以下代码段。

```
ImageView imgView = (ImageView) _root.findViewById(3);

imgView.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
        Toast.makeText(MainActivity.this, "Hello World from image 3",
        Toast.LENGTH_SHORT).show();

    }
}); 
```

# spring - 有人在 NETBEANS 上为 Struts2 和 Spring 使用过 struts2-spring-plugin-2.3.4.1.jar 吗？

> ID：13577645
> 
> 赞同：-2
> 
> 时间：2012-11-27T04:57:45.877
> 
> 标签：spring, plugins, struts2, netbeans-7

有没有人试过这个？你是怎么做到的？我的项目中没有 pom.xml。我可以在我的其他 xml（如 web.xml）上插入 pom.xml 的值吗？我想使用它，因为我试图将 spring3 库插入到我的 struts2 中，但它接缝它不起作用，除非我要使用 context.getbean("xxxxx")？我想再次使用该插件从这里开始。

我在网上搜索的 POM.xml 是针对 Maven 的吗？我不知道如何使用maven。我用的是普通的。我认为它是蚂蚁。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T06:37:57.367

我必须告诉你的一件事是不要尝试这样做，管理依赖关系太难了，可能会导致很多冲突。

您可以在插件中定义的[pom.xml](http://svn.apache.org/viewvc/struts/struts2/tags/STRUTS_2_3_4_1/plugins/spring/pom.xml?view=markup)中查看 Struts2 Spring 插件所需的依赖项。

您将找到一个占位符，即`<version>${struts2.springPlatformVersion}</version>`在核心[pom.xml中定义](http://svn.apache.org/viewvc/struts/struts2/tags/STRUTS_2_3_4_1/pom.xml?view=markup)

使用 maven 太容易了，你几乎不需要任何时间来开始，但它会为你省去很多手动工作

# google-drive-api - 为什么我删除应用程序的权限后仍然可以访问我的帐户？

> ID：13577646
> 
> 赞同：5
> 
> 时间：2012-11-27T04:58:15.023
> 
> 标签：google-drive-api

我正在尝试我的第一个 google drive 应用程序，并发现有关权限设置的问题。我的应用程序在 Android (ICS) 上运行，并使用 Google Play Service auth2.0 函数来获取访问令牌。

在我的应用程序中第一次调用 GoogleAuthUtil.getToken() 函数时，我收到一条消息，请求访问我的 google 帐户的权限。接受许可请求后，我可以访问我的谷歌驱动器上的文件。

一旦应用程序被允许，它就可以在需要时获取访问令牌，而无需与用户确认。但是，即使我在我的 google 帐户设置中删除了访问权限，应用程序仍然可以获得访问我的 google 帐户的可用令牌。我一周前删除了权限，应用程序仍然可以将文件上传到我的帐户。它不再要求访问权限。

我应该怎么做才能“完全”删除我的应用程序的访问权限？

# android - 在android中的地图上标记位置

> ID：13577648
> 
> 赞同：1
> 
> 时间：2012-11-27T04:58:44.823
> 
> 标签：android, android-mapview, android-maps

我有一个 android 程序，它将连续查找位置并显示带有地址的纬度和经度值。我需要通过标记路线在地图中显示这些值。怎么做。

以下是查找 lat 和 lon 值的代码。

```
protected void showCurrentLocation() 
    { 

    Location location = locationManager.getLastKnownLocation( LocationManager.NETWORK_PROVIDER);

    if (location != null) 
    {

   // double dd = location.getAltitude();
    String message = String.format( "Current Location \n Longitude: %1$s \n Latitude: %2$s  ",location.getLongitude(), location.getLatitude() );
    Toast.makeText(MainActivity.this, message,Toast.LENGTH_LONG).show();
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost("http://IP/YourPhpScript1.php");
    try {
       List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
       nameValuePairs.add(new BasicNameValuePair("id", "12345"));
       nameValuePairs.add(new BasicNameValuePair("message", message));
       httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
       httpclient.execute(httppost);

     } 
```

这是寻找地址：

```
try
        {
          Geocoder geocoder = new Geocoder(MainActivity.this, Locale.ENGLISH);
          List<Address> addresses = geocoder.getFromLocation(LATITUDE, LONGITUDE, 1);

          if(addresses != null) {
           Address returnedAddress = addresses.get(0);
           StringBuilder strReturnedAddress = new StringBuilder("Address:\n");
           for(int i=0; i<returnedAddress.getMaxAddressLineIndex(); i++) {
            strReturnedAddress.append(returnedAddress.getAddressLine(i)).append("\n");
            String add = strReturnedAddress.toString();
            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1);
           nameValuePairs.add(new BasicNameValuePair("id", "12345"));
           nameValuePairs.add(new BasicNameValuePair("message", add));
           httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
           httpclient.execute(httppost);
           }
          myAddress.setText(strReturnedAddress.toString());
          }

          else
          {
           myAddress.setText("No Address returned!");
          } 
```

我的程序会不断地查找位置信息并将其发送到服务器。我需要编写一个应用程序来从服务器检索这些位置信息并用它们标记路线。

# asp.net - 使用asp.net打印学生准考证

> ID：13577649
> 
> 赞同：0
> 
> 时间：2012-11-27T04:58:59.687
> 
> 标签：asp.net, html, css, printing

我有一个网络应用程序，我们在其中收集网页中的学生数据。这个 aspx 页面有一个“打印准考证”按钮，单击该按钮旨在打印准考证。我已经为卡片动态创建了一个 html 布局，并希望将其打印出来。怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T05:02:21.297

您可以`window.print()`在单击按钮时调用。

```
<input type="button" value="Print Admit Card" onClick="window.print();" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T05:18:38.977

最好的办法是保留会话中的值并在点击事件时打开一个新窗口。
并在页面加载时创建 html。
在 window.load 事件上调用 java-script 打印如下

```
body onload="window.print();" 
```

您的页面上可能有一些您不想打印的控件。
为此，您可以使用`css`类。[在 css 中的媒体类型](http://www.w3schools.com/css/css_mediatypes.asp)
中 有一个很好的选项，可以在打印页面时隐藏内容。 在同一个网站上有很好的帖子，您可以浏览它。 [设置打印 css 的好规则？](https://stackoverflow.com/questions/401623/good-rules-for-setting-up-print-css)`css`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T06:09:38.050

这段代码可以帮助你..

HTML 代码：

```
 <div id="printarea">

//content you want to print
</div>

<input id="btnprint" type="button" onclick="PrintDiv()" value="Print" /></center> 
```

Javascript函数：

```
 <script type="text/javascript">

        function PrintDiv() {
            var divToPrint = document.getElementById('printarea');
            var popupWin = window.open('', '_blank', 'width=300,height=400,location=no,left=200px');
            popupWin.document.open();
            popupWin.document.write('<html><body onload="window.print()">' + divToPrint.innerHTML + '</html>');
            popupWin.document.close();
        }
     </script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T05:20:02.943

使用 CSS，您可以指定 CSS 设计的媒体类型。这将做的是，当您要求打印时，页面的其余部分将被删除，并且只会打印看起来像卡片的部分。这是一个帮助您入门的链接。[CSS 媒体类型](http://www.w3schools.com/css/css_mediatypes.asp)。此外，您可以仅在打印 css 有效的情况下重新打开页面，并且如 Osiris 所示调用 Window.print(); 打印页面。

# onclick - 黑莓 10 级联 onclick

> ID：13577654
> 
> 赞同：1
> 
> 时间：2012-11-27T04:59:50.947
> 
> 标签：onclick, blackberry-10, blackberry-cascades

如何在 Blackberry 10 级联中单击按钮时调用屏幕？我已经尝试过这段代码，但它不工作，

```
Button {
  text: "Sign-in"
  onClicked: main.qml
} 
```

谁能给我一些示例代码，用于点击功能？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T22:33:15.433

要显示一个新的`Page`，您需要定义 a`NavigationPane`并将其推`Page`到上面。例子：

```
import bb.cascades 1.0

NavigationPane {
    id: navigationPane
    Page {
        Button {
            text: "Sign-in"
            onClicked: {
                var page = secondPageDefinition.createObject();
                navigationPane.push(page);
            }
            attachedObjects: [
                ComponentDefinition {
                    id: secondPageDefinition
                    source: "DetailsPage.qml"
                }
            ]
        }
    }
} 
```

这样做的好处是它`NavigationPane`会自动为您处理后退按钮。

当您在 Momentics 中创建一个新的 BlackBerry Cascades 项目时，请选择 NavigationPane 模板以获得与此非常相似的内容。

# java - HttpURLConnection 问题

> ID：13577656
> 
> 赞同：2
> 
> 时间：2012-11-27T05:00:03.210
> 
> 标签：java

我正在尝试连接一个 http url。但它显示“已连接”异常。还请发现我的基本身份验证有任何问题。

```
 HttpURLConnection conn = (HttpURLConnection) url
              .openConnection();
  conn.setRequestMethod("POST");

  BASE64Encoder enc = new sun.misc.BASE64Encoder();
  String userpassword = user + ":" + password;
  String encodedAuthorization = enc.encode(userpassword.getBytes() );
  conn.setRequestProperty("Authorization", "Basic "+ encodedAuthorization);
  conn.setDoInput(true);
  conn.setDoOutput(true);
  conn.setRequestMethod("POST");
  conn.setRequestProperty("Content-Length",
  String.valueOf(data.length()));
  conn.setRequestProperty("Content-Type","application/x-www- form-urlencoded");
  conn.setRequestProperty("User-Agent","Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1)"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T05:35:41.450

Use this

```
URLConnection conn = url.openConnection();
 if (conn instanceof HttpsURLConnection) {
 ((HttpsURLConnection) conn).setSSLSocketFactory(sslSocketFactory);
 ((HttpsURLConnection) conn).setRequestMethod(POST);
} 
```

You can get help from [here](http://www.imrantariq.com/blog/?p=853).

# groovy - Groovy 使用什么关系数据库

> ID：13577658
> 
> 赞同：0
> 
> 时间：2012-11-27T05:00:07.373
> 
> 标签：groovy, relational-database

我正在通过 Groovy in Action 工作。第 10 章数据库编程建议使用 Hypersonic 数据库系统，现在似乎已更改为 Hyper SQL 数据库。

这是一个很好的数据库，还是我应该考虑别的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T05:09:15.037

HSQL 很好，工作得很好。但是，您可以使用[Hibernate 支持的任何数据库](https://community.jboss.org/wiki/SupportedDatabases2#)。

# architecture - 在驱动层之上或之下定义 HAL？

> ID：13577660
> 
> 赞同：0
> 
> 时间：2012-11-27T05:00:14.280
> 
> 标签：architecture, embedded, driver, hal

在定义嵌入式系统架构时，在定义 HAL 时有两种选择 -

*   在驱动层之上定义 HAL（这意味着需要为移植到的每个平台重写驱动程序）
*   在驱动层下定义 HAL（这意味着需要为您移植到的每个平台重写 HAL）

哪个更好，为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T08:01:09.473

简短的回答：是的。

在驱动程序下方有一个 HAL（或稳定驱动程序 ABI 很好，特别是对于驱动程序编写者）在驱动程序上方有一个 HAL 对应用程序程序员来说很好。

你可以两者都做：查看 Unix 设备驱动程序；相当便携。[Endian-ness 仍然咬人]

哪个更好取决于嵌入式架构的产品开发路线图。

让我们尝试一些例子。

假设它是一种商业产品，您的公司认为不需要跨平台移植。在这种情况下，你不在乎。

如果您的公司正在使用它，例如电视机，并且预计平台会发生变化，但设备会保持不变（电视就是电视就是电视，但最便宜的微型电视会随着时间的推移而改变）那么你d 选择 hal-below-driver，并保持对驱动程序的投资。

例如，如果您的公司生产智能手机，则处理器会发生变化，设备也会发生变化，随着分辨率的变化，会添加额外的传感器......所以在这种情况下，您将使用 hal-above-driver，并保留很大一部分软件负载很常见。

如果你放入两个 HAL，用于嵌入式，你就有变成建筑宇航员的风险。如果两个 HAL（运行时间和设计时间）的成本超过了跨平台移植所节省的劳动力，那么这就是浪费时间和金钱。

为 HAL 付出多少努力同样需要权衡。在一个微型嵌入式系统中无法承受太多的抽象。

同样，这种权衡取决于一个微型平台是否是您应用程序的正确选择，这最终取决于上市时间和功能与每台设备成本的相对重要性。很多关于需要为批量市场降低成本的说法；提供的科学证据很少。最赚钱的嵌入式设备制造商之一是苹果公司，它不使用小型平台。（哎呀，他们不再在纳斯达克上，因为他们扭曲了太多）

如果您没有 HAL，并且您必须更改平台，例如您的处理器报废，您将面临很大的困难重写。

如果你在没有权衡研究的情况下尝试应用 YAGNI 规则（你不需要它），你可能会在以后花费公司一大笔钱。

现在，如果您因技术发生意想不到的转变而措手不及，那么您的权衡研究将是错误的，您的公司将遭受损失。

# html - 在所有浏览器中播放 mp4 文件

> ID：13577661
> 
> 赞同：0
> 
> 时间：2012-11-27T05:00:16.567
> 
> 标签：html, jsp, cross-browser

实际上，在我的项目中，我需要播放扩展名为 .mp4 的视频文件。有没有办法在所有浏览器中播放这个视频文件。我知道 Firefox 不支持 .mp4 格式并且

[在这里我发现哪个浏览器支持哪种格式。](http://www.w3schools.com/html/html5_video.asp)

但我想播放保存在我的服务器端的唯一 .mp4 文件，供每个浏览器播放。你能告诉我适用于所有浏览器的通用代码吗？我发现为同一文件提供了多个来源在不同的浏览器中播放。我认为他们正在保存具有多个扩展名的同一个文件。

请在这个问题上帮助我。我已经为这个问题花费了最后 2 天。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T07:35:28.790

通过在您的 jsp 中使用 jquery.fineuploader.js 并创建

```
var uploader = new qq.FineUploader({
//here you can write your uploading video code
element : document.getElementById('fine-uploader'),
        acceptFiles : 'video/mpeg',
        autoUpload: false,
        multiple: false,

});
// more code to write
// and for more details refer 
```

[http://fineuploader.com/fine-uploader-demo.html](http://fineuploader.com/fine-uploader-demo.html)

你的播放器 html 代码

```
<div id="player" style="display: inline-block; position:relative; margin-top:-25px;">
<a href="http://get.adobe.com/fr/flashplayer/">You need to install the Flash plugin</a>                         
</div>
<div id="fine-uploader"></div> 
```

您可以使用以下代码播放 .mp4 文件上传

```
function playVideo(videoUrl){
    $("#player").css('display', 'inline-block');
    $("#player > Object").remove();
    var flashvars= {};
    var video = {
            quality: "high",
            bgcolor: "#000000",
            allowScriptAccess: "always",
            allowFullScreen: "true",
            wmode: "transparent",               
            flashvars: "fichier="+videoUrl,
        };
    var attributes = {};
    flashObject("http://flash.webestools.com/flv_player/v1_27.swf", "player", "297", "180", "8", false, flashvars, video, attributes);
} 
```

这将提供播放器和播放 .mp4 文件。适用于Firefox，但不适用于iexplorer。

# android - 将位图图像从一个活动传递到另一个活动

> ID：13577664
> 
> 赞同：6
> 
> 时间：2012-11-27T05:00:30.703
> 
> 标签：android, android-intent, bitmap, bitmapimage

在我的应用程序中，我从图库中显示图像数量，只要我选择一张图像，图像就会被发送到新活动，在该活动中，所选图像将被设置为背景。但是，我能够获取图像从画廊，但只要我选择一个应用程序崩溃。提前致谢

Activity-1（图像显示在画廊中，选定的图像被发送到新的活动）

```
public class Gallery extends Activity {

private static int RESULT_LOAD_IMAGE = 1;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.gallery);

        Button buttonLoadImage = (Button) findViewById(R.id.buttonLoadPicture);

        buttonLoadImage.setOnClickListener(new View.OnClickListener() {

            public void onClick(View arg0) {

                Intent i = new Intent(Intent.ACTION_PICK,android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);

                startActivityForResult(i, RESULT_LOAD_IMAGE);
            }
        });
    }

    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);

        if (requestCode == RESULT_LOAD_IMAGE && resultCode == RESULT_OK && null != data) {

            Uri contentUri = data.getData();          
            String[] proj = { MediaStore.Images.Media.DATA };         
            Cursor cursor = managedQuery(contentUri, proj, null, null, null);         
            int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);         
            cursor.moveToFirst();         
            String tmppath = cursor.getString(column_index);           
            Bitmap croppedImage = BitmapFactory.decodeFile(tmppath);

            // Bitmap croppedImage = BitmapFactory.decodeFile(croppedImage);
            Intent intent = new Intent(Gallery.this,GesturesActivity.class);
            intent.putExtra("bmp",croppedImage);
            startActivity(intent);

            Log.v("sending image","sending image");

        }

    }
} 
```

活动一（XML）

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/background"
    >
    <ImageView
            android:id="@+id/imgView"
            android:layout_width="fill_parent"
            android:layout_weight="1" android:layout_height="wrap_content"></ImageView>
    <Button 
            android:layout_height="wrap_content" 
            android:text="Load Picture" 
            android:layout_width="wrap_content" 
            android:id="@+id/buttonLoadPicture" 
            android:layout_weight="0" 
            android:layout_gravity="center"></Button>
</LinearLayout> 
```

Activity-2（应将所选图像设置为屏幕背景图像的活动）

```
 public class GesturesActivity extends Activity {

        private final int MENU_CAMERA = Menu.FIRST;

        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            requestWindowFeature(Window.FEATURE_NO_TITLE);

            Bitmap bmp = (Bitmap)this.getIntent().getParcelableExtra("bmp");
            BitmapDrawable background = new BitmapDrawable(bmp);
            getWindow().setBackgroundDrawable(background);  //background image of the screen

            Bitmap bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.advert);
            View view = new SandboxView(this, bitmap);

            setContentView(view);
        }

        public boolean onPrepareOptionsMenu(Menu menu) {
            menu.clear();

                menu.add(0, 11, 0, "Take Snapshot");

                    return super.onPrepareOptionsMenu(menu);
        }

        public boolean onOptionsItemSelected(MenuItem item) {

            return super.onOptionsItemSelected(item);
        }

    } 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-27T05:08:44.467

有 3 个解决方案可以解决此问题。

1）首先将图像转换为字节数组，然后传递到意图，并在下一个活动中从捆绑中获取字节数组并转换为图像（位图）并设置为ImageView。

将位图转换为字节数组：-

```
Bitmap bmp = BitmapFactory.decodeResource(getResources(), R.drawable.ic_launcher);
ByteArrayOutputStream stream = new ByteArrayOutputStream();
bmp.compress(Bitmap.CompressFormat.PNG, 100, stream);
byte[] byteArray = stream.toByteArray(); 
```

将字节数组传递给意图：-

```
Intent intent = new Intent(this, NextActivity.class);
intent.putExtra("picture", byteArray);
startActivity(intent); 
```

从 Bundle 中获取字节数组并转换为位图图像：-

```
Bundle extras = getIntent().getExtras();
byte[] byteArray = extras.getByteArray("picture");

Bitmap bmp = BitmapFactory.decodeByteArray(byteArray, 0, byteArray.length);
ImageView image = (ImageView) findViewById(R.id.imageView1);

image.setImageBitmap(bmp); 
```

2）首先将图像保存到 SDCard 中，然后在下一个活动中将此图像设置为 ImageView。

3) 将位图传递给 Intent 并从捆绑包中获取下一个活动中的位图，但问题是如果您的位图/图像大小当时很大，则图像不会在下一个活动中加载。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-27T05:12:24.517

既然您正在从图库中检索图像，为什么不将 id 传递给下一个活动并在该活动中检索图像而不是传递图像？这将帮助您提高内存和性能。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-05-15T14:00:55.110

Bitmap 实现**Parcelable**，因此您始终可以在意图中传递它。试试下面的代码：

**第一个活动。**

```
Intent mIntent = new Intent(this, ActivityTwo.class);
mIntent.putExtra("bmp_img", bmp); 
```

要在目标活动中获得输出，请尝试：

**第二个活动。**

```
Bitmap mBitmap = (Bitmap) intent.getParcelableExtra("bmp_img"); 
```

您总是使用**getParcelableExtra("key")**来获取 Activity 中传递的位图。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-27T05:11:03.837

我认为您可以通过将您的位图定义为静态并通过调用**classname.bitmap**您可以获得位图..并在下一个活动中设置为背景

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-01-22T07:10:21.840

**活动**

***在 Activity 之间传递位图***

```
Intent intent = new Intent(this, Activity.class);
intent.putExtra("bitmap", bitmap); 
```

***在 Activity 类中***

```
Bitmap bitmap = getIntent().getParcelableExtra("bitmap"); 
```

**分段**

***在 Fragment 之间传递位图***

```
SecondFragment fragment = new SecondFragment();
Bundle bundle = new Bundle();
bundle.putParcelable("bitmap", bitmap);
fragment.setArguments(bundle); 
```

***在 SecondFragment 内接收***

```
Bitmap bitmap = getArguments().getParcelable("bitmap"); 
```

如果您遇到失败的活页夹事务，这意味着您通过将大元素从一个活动转移到另一个活动而超出了活页夹事务缓冲区。

**因此，在这种情况下，您必须将位图压缩为一个字节的数组，然后在另一个活动中解压缩它**，就像这样

***在第一个活动中***

```
Intent intent = new Intent(this, SecondActivity.class);

ByteArrayOutputStream stream = new ByteArrayOutputStream();
bitmap.compress(Bitmap.CompressFormat.JPG, 100, stream);
byte[] bytes = stream.toByteArray(); 
intent.putExtra("bitmapbytes",bytes); 
```

***而在 SecondActivity***

```
byte[] bytes = getIntent().getByteArrayExtra("bitmapbytes");
Bitmap bmp = BitmapFactory.decodeByteArray(bytes, 0, bytes.length); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-03T00:52:23.400

我发现最简单（但绝对不是最优雅）的方法是使用静态类成员。例如：

```
class PassedData
{
    public Bitmap bm1, bm2, etc;

    private PassedData current;

    public static PassedData getCurrent() {return current;}

    public PassedData()
    {
        current = this;
    }
} 
```

然后每个活动都可以引用 PassedData.getCurrent()。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-27T06:39:22.060

使用它，您可以将位图传递给另一个活动。

如果您使用的是drawable，则先将该drawable转换为位图。

```
Bitmap bitmap = ((BitmapDrawable)d).getBitmap(); 
```

要使用意图将该位图传递给另一个活动，请使用以下代码片段。

```
intent.putExtra("Bitmap", bitmap); 
```

对于在另一个活动中获取该位图意图，请使用此

```
Bitmap bitmap = (Bitmap)this.getIntent().getParcelableExtra("Bitmap"); 
```

点击此[链接了解更多详情。](http://glorious-arvind.blogspot.in/2012/11/convert-your-drawable-to-bitmap-and.html)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-27T05:19:38.807

IGP 总结得很清楚，但在我看来，最有效的方法是将图像的 URI 传递给下一个活动，而不是位图本身。我实际上不确定是否可以使用 Intents 将整个 Bitmaps（或转换后的 ByteArrays）从一个活动传递到另一个活动 - 我相信 Bundle 可以包含多少数据是有限制的。

而是传递您用来在第一个活动中显示图像的引用。我假设您正在使用某种延迟加载？如果没有，我强烈建议你这样做。这样，您可以简单地通过 URI 重新查询位图。

> 但是，我可以从图库中获取图像，但是一旦我选择了一个，应用程序就会崩溃

我仍然对这些问题如何达到 SO 感到困惑。检查日志，也许您可​​以自己弄清楚。

# android - 每次加载活动时，listview 都会加倍。

> ID：13577669
> 
> 赞同：2
> 
> 时间：2012-11-27T05:00:57.383
> 
> 标签：android, android-listview

每次加载活动时，listview 都会加倍（每次填充以前的数据，使数据出现两次）

```
public class FragmentActivity extends Activity implements OnItemClickListener{

    private ListView discrepancy_list;
    private DiscrepancyListAdapter list_adapter = null;
    private ArrayList<CommonEntity> discrepancyList = new ArrayList<CommonEntity>();
    private RelativeLayout objRelativeLayout;
    private static int X_CO_ordinate;
    private static int Y_CO_ordinate;
    private ArrayList<String> arrlstCo_ordinate;
    private ArrayList<String> arrlst_Count;
    private boolean touch = true,isOnLaunch = false;
    private int editText_ID=1,count=1;
    private EditText objEditText;
    private SortedMap<Integer,String> mapDefect=null;
    private int final_position; 
    private ImageButton objImageButton;
    private DatabaseHandler db;
    Bitmap StoredBitmap;
    Drawable StoredDrawable;
    private static int dataSet = 0;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState){

         super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        mapDefect=new TreeMap<Integer, String>();
        arrlstCo_ordinate=new ArrayList<String>();
        arrlst_Count=new ArrayList<String>();
        discrepancy_list = (ListView)findViewById(R.id.number_list);
        discrepancy_list.setOnItemClickListener(this);
        db = new DatabaseHandler(this);

        objRelativeLayout=(RelativeLayout) findViewById(R.id.RelativeLayout);
        objRelativeLayout.setOnTouchListener(new View.OnTouchListener(){
            public boolean onTouch(View v, MotionEvent event){
                String strEditText;
                if(!checkForDataSaved()){
                if(touch){
                    Log.d("ON", "onTouch called");
                    X_CO_ordinate=(int) event.getX() ; 
                    Y_CO_ordinate=(int) event.getY();

                    boolean isNotDuplicate=checkDuplicateElement(X_CO_ordinate,Y_CO_ordinate);
                    if(isNotDuplicate){
                        Log.d("TOUCH", "TOUCH"+X_CO_ordinate+"|"+Y_CO_ordinate+"|"+"Touch :");
                        if(objEditText != null){
                            strEditText=objEditText.getText().toString();
                            Log.d("Err", "EditText not null"+strEditText);

                            if(strEditText != null && strEditText.length() != 0){
//                              if(chekMapEntry(objEditText.getId(), objEditText.getText().toString(), ""+X_CO_ordinate+"|"+Y_CO_ordinate))
//                              {
                                arrlst_Count.add(""+X_CO_ordinate+"|"+Y_CO_ordinate);
                                arrlstCo_ordinate.add(""+X_CO_ordinate+"|"+Y_CO_ordinate);
                                mapDefect.put(objEditText.getId(),objEditText.getText().toString());
                                Log.d("Err", "In Touch Map Size :"+mapDefect.size() +"Arr List Size :"+arrlstCo_ordinate.size());
                                objEditText.setVisibility(View.INVISIBLE);
                                //}else{Toast.makeText(FragmentActivity.this, "Duplicate map entry", Toast.LENGTH_LONG).show();}
                                addEditText();
                                Log.d("Err", "String not null");
                            }else{
                                Log.d("Err", "String null");
                                Toast.makeText(FragmentActivity.this, "Please log the defect ::: in onTouch()", Toast.LENGTH_LONG).show();
                            }
                        }else{
                            Log.d("Err", "EditText  null");
                            arrlst_Count.add(""+X_CO_ordinate+"|"+Y_CO_ordinate);
                            arrlstCo_ordinate.add(""+X_CO_ordinate+"|"+Y_CO_ordinate);
                            Log.d("Err", "In Touch else Map Size :"+mapDefect.size() +"Arr List Size :"+arrlstCo_ordinate.size());
                            Drawable relative_image_bg = objRelativeLayout.getBackground();
                            Bitmap bitmap = ((BitmapDrawable)relative_image_bg).getBitmap();
                            Bitmap bitmap2 = ((BitmapDrawable)(getResources().getDrawable(R.drawable.no_image_screen_new))).getBitmap();

                            if(bitmap.sameAs(bitmap2)){
                                Toast.makeText(FragmentActivity.this, "Please capture the image", Toast.LENGTH_LONG).show();
                            }else{
                                Toast.makeText(FragmentActivity.this, "Not equal..", Toast.LENGTH_LONG).show();
                                addEditText();
                            }
                        }
                    }
                    touch=false;
                }else{
                    touch=true;
                }
            }
                return true;
            }

            private boolean checkDuplicateElement(int x_CO_ordinate,int y_CO_ordinate){
                String strX=String.valueOf(x_CO_ordinate);
                String strY=String.valueOf(y_CO_ordinate);

                for(int i=0;i<arrlstCo_ordinate.size();i++){
                    String strResult=arrlstCo_ordinate.get(i);
                    String []arrResult=StringUtils.split(strResult, "|");
                    String strTemp_X=arrResult[0];
                    String strTemp_Y=arrResult[1];
                    Log.d("CO", ""+strTemp_X+strTemp_Y+"|"+strX+strY);

                    if(strTemp_X.equalsIgnoreCase(strX) || strTemp_Y.equalsIgnoreCase(strY)){
                        Log.d("DUP", "Duplicate element is not allow");
                        Toast.makeText(FragmentActivity.this, "Duplicate element is not allow", Toast.LENGTH_SHORT).show();
                        return false;
                    }
                }
                return true;
            }
        });

        //add list in main.xml

        addList();
        getDefects();

    }

    private void addList(){

        discrepancyList = LocalDatabaseOperations.callDBToGetList(this);

        list_adapter = new DiscrepancyListAdapter(this, discrepancyList);
        discrepancy_list.setAdapter(list_adapter);
        isOnLaunch = true;
        discrepancy_list.performItemClick(null, 0, discrepancy_list.getFirstVisiblePosition());

    }

    private void getDefects(){

        if(LocalDatabaseOperations.callDBToGetDefects(this) == true){
            fechCoordinate();
            addViewEditText();

        }
    } 
```

因此，这是在 LHS 上加载“差异列表”的活动，并在片段的 RHS 上加载有关列表中第一项的信息。但是当我返回并返回此屏幕时，会加载相同的活动，使其加载活动。这应该发生。然而，先前的数据也存在，使整个数据翻倍。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T05:27:19.320

在您的 callDBToGetList() 函数中，我假设您正在返回一个列表（比如 myList）。将此行作为 callDBToGetList() 函数的第一行。

```
myList.clear(); 
```

将 myList 替换为您要返回的列表的名称。

# c++ - 无法调试 St9bad_alloc 错误。尝试减小数据结构的大小，错误仍然存 在

> ID：13577670
> 
> 赞同：0
> 
> 时间：2012-11-27T05:01:20.897
> 
> 标签：c++

我收到一个无法调试的 St9bad_alloc 错误。我尝试减小数据结构的大小以消除内存不足的可能性，但似乎并非如此。

这些是相关文件：-

*   gdb 回溯： http: [//pastebin.com/5hFhHXnL](http://pastebin.com/5hFhHXnL)
*   TraceCache.cc：http://pastebin.com/j8vK812j [_](http://pastebin.com/j8vK812j)

我不明白如何在回溯中从 TraceCache.cc:55 跳转到 TraceCache.cc:34 而在我的代码中我看不到任何这样的路径。

如果需要任何其他信息，请告诉我。

谢谢

# graph - Neo4j+Gremlin：T.gte 和浮点节点属性的问题

> ID：13577671
> 
> 赞同：0
> 
> 时间：2012-11-27T05:01:28.120
> 
> 标签：graph, neo4j, gremlin

对于我图中的一种节点，属性（名为“some_count”）的属性值要么丢失，要么是整数或浮点数。我正在尝试编写 gremlin 以根据此属性的最小值过滤这些节点。

我首先通过触发以下 gremlin 来验证这些值确实存在

```
g.v(XXX)._().in('category').hasNot('some_count', T.eq, null).back(1).some_count 
```

下一个，

我尝试按确切值进行过滤，并且可以向我显示匹配的节点，或者如果没有匹配则给出一个空数组

```
g.v(XXX)._().in('category').hasNot('some_count', T.eq, null).back(1).has('some_count', T.eq, 120000.0d) 
```

但是以下使用“大于或等于”比较器的查询不起作用。

`g.v(XXX)._().in('category').hasNot('some_count', T.eq, null).back(1).has('some_count', T.gte, 1.0d)`这将返回 nil（我正在使用[Neo4j AR Adapter](https://github.com/yournextleap/activerecord-neo4j-adapter)通过 ruby​​/rails 进行查询）

它不是返回一个空数组来表示不匹配，而是返回一个 nil，这告诉我查询本身可能有问题。我正在运行 neo4j 社区服务器 1.8。

有没有办法让 Neo4j 记录错误/查询，看看可能出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T21:58:45.563

Add **Tokens.** to your T.gte.

```
g.v(XXX)._().in('category').hasNot('some_count', Tokens.T.eq, null)
  .back(1).has('some_count', Tokens.T.gte, 1.0d) 
```

# ruby-on-rails - Factory.next 在 FactoryGirl 4.x 和 Rails 3.0 中不起作用。有谁知道换人吗？

> ID：13577673
> 
> 赞同：0
> 
> 时间：2012-11-27T05:01:33.723
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, factory-bot

我对 Rails 非常陌生，并且正在关注 Michael Hartl 的 Ruby on Rails 3 教程一书，并且在使用 factory_girl gem 时遇到了一些小问题。

具体来说，我不确定如何更新代码

```
Factory.next(...) 
```

在开始之前，我确实在书中使用的旧版 FactoryGirl 和我现在使用的当前 4.1 版本之间遇到了一个小问题，但能够解决它。

具体来说，编写代码的旧方式为

> 用户 = 工厂（：用户）

需要更新到

> 用户 = FactoryGirl.create(:user)

那很好，但是现在我要开始编写代码了（如书中所写）：

规格/控制器/users_controler_spec.rb

```
.    
@users << Factory(:user, :email => Factory.next(:email))
. 
```

我试过更新到

```
.
@users << FactoryGirl.create(:user, :email => FactoryGirl.next(:email))
. 
```

但得到错误：

```
Failure/Error: @users << FactoryGirl.create(:user, :email => FactoryGirl.next(:email))
 NoMethodError:
   undefined method `next' for FactoryGirl:Module 
```

我尝试了一些不同的变化，但仍然无法完全理解。是我在使用 FactoryGirl 时遇到的问题，只是没有正确使用 gem，还是与 Ruby 方法有关？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T05:08:31.957

看起来你必须使用`generate`序列的方法：

```
@users << Factory(:user, :email => FactoryGirl.generate(:email)) 
```

有关详细信息，请参阅有关序列和关联的[文档。](https://github.com/thoughtbot/factory_girl/wiki/Usage)

# xcode - 如何平滑绘图笔触？

> ID：13577674
> 
> 赞同：0
> 
> 时间：2012-11-27T05:01:33.590
> 
> 标签：xcode, paint

我正在创建绘图.. 我可以撤消并在其上添加颜色。但是当我用手指画画时，笔触不是那么光滑，而且有边缘线，，

这是我的代码。我可以在其上绘制视图、撤消、更改颜色和不透明度。

行程.h

```
#import <UIKit/UIKit.h>

@interface stroke : UIView{
    NSMutableArray *strokeArray;
    UIColor *strokeColor;
    int strokeSize;
    float strokeAlpha;
    int strokeAlpha2;
    IBOutlet UISlider *slides;
    float red;
    float green;
    float blue;
    CGPoint mid1;
    CGPoint mid2; 
    CGPoint endingPoint,previousPoint1,previousPoint2;
    CGPoint currentTouch;
}

@property (nonatomic, retain) UIColor *strokeColor;
@property (nonatomic) int strokeSize;
@property (nonatomic, retain) NSMutableArray *strokeArray;
- (IBAction)changeAlphaValue;
-(void)loadSLider;
-(void)blueColor;
-(void)darkvioletColor;
-(void)violetColor;
-(void)pinkColor;
-(void)darkbrownColor;
-(void)redColor;
-(void)magentaRedColor;
-(void)lightBrownColor;
-(void)lightOrangeColor;
-(void)OrangeColor;
-(void)YellowColor;
-(void)greenColor;
-(void)lightYellowColor;
-(void)darkGreenColor;
-(void)TurquioseColor;
-(void)PaleTurquioseColor;
-(void)skyBlueColor;
-(void)whiteColor;
-(void)DirtyWhiteColor;
-(void)SilverColor;
-(void)LightGrayColor;
-(void)GrayColor;
-(void)LightBlackColor;
-(void)BlackColor;
@end 
```

行程.m

```
#import "stroke.h"

@implementation stroke
@synthesize strokeColor;
@synthesize strokeSize;
@synthesize strokeArray;

- (void) awakeFromNib{
    self.strokeArray = [[NSMutableArray alloc] init];
    self.strokeColor = [UIColor colorWithRed:0 green:0 blue:232 alpha:1];
    self.strokeSize = 3;
}
- (void)drawRect:(CGRect)rect{
    NSMutableArray *stroke;
    for (stroke in strokeArray) {
        CGContextRef contextRef = UIGraphicsGetCurrentContext();
        CGContextSetLineWidth(contextRef, [[stroke objectAtIndex:1] intValue]);
        CGFloat *color = CGColorGetComponents([[stroke objectAtIndex:2] CGColor]);
        CGContextSetRGBStrokeColor(contextRef, color[0], color[1], color[2], color[3]);    
        CGContextBeginPath(contextRef);
        CGPoint points[[stroke count]];
        for (NSUInteger i = 3; i < [stroke count]; i++) {
            points[i-3] = [[stroke objectAtIndex:i] CGPointValue];
        }
        CGContextAddLines(contextRef, points, [stroke count]-3);
        CGContextStrokePath(contextRef);
    }

}
-(void)loadSLider{

}
- (IBAction)changeAlphaValue{
    strokeAlpha2 =((int)slides.value);
}
-(void)blueColor{
    red = 0/255.0;
    green = 0/255.0;
    blue = 255/255.0;
}
-(void)darkvioletColor{
    red = 75/255.0;
    green = 0/255.0;
    blue = 130/255.0;
}
-(void)violetColor{
    red = 128/255.0;
    green = 0/255.0;
    blue = 128/255.0;
}
-(void)pinkColor{
    red = 255/255.0;
    green = 0/255.0;
    blue = 255/255.0;
}
-(void)darkbrownColor{
    red = 0.200;
    green = 0.0;
    blue = 0.0;
}
-(void)redColor{
    red = 255/255.0;
    green = 0/255.0;
    blue = 0/255.0;
}
-(void)magentaRedColor{
    red = 0.350;
    green = 0.0;
    blue = 0.0;
}
-(void)lightBrownColor{
    red = 0.480;
    green = 0.0;
    blue = 0.0;
}
-(void)lightOrangeColor{
    red = 0.600;
    green = 0.200;
    blue = 0.0;
}
-(void)OrangeColor{
    red = 1.0;
    green = 0.300;
    blue = 0.0;
}
-(void)YellowColor{
    red = 0.950;
    green = 0.450;
    blue = 0.0;
}
-(void)greenColor{
    red = 0.0;
    green = 1.0;
    blue = 0.0;
}
-(void)lightYellowColor{
    red = 1.0;
    green = 1.0;
    blue = 0.0;

}
-(void)darkGreenColor{
    red = 0.0;
    green = 0.500;
    blue = 0.0;
}
-(void)TurquioseColor{
    red = 0.0;
    green = 0.700;
    blue = 0.200;
}
-(void)PaleTurquioseColor{
    red = 0.0;
    green = 0.700;
    blue = 0.600;
}
-(void)skyBlueColor{
    red = 0.0;
    green = 0.400;
    blue = 0.800;
}
-(void)whiteColor{
    red = 1.0;
    green = 1.0;
    blue = 1.0;
}
-(void)DirtyWhiteColor{
    red = 0.800;
    green = 0.800;
    blue = 0.800;
}
-(void)SilverColor{
    red = 0.600;
    green = 0.600;
    blue = 0.600;
}
-(void)LightGrayColor{
    red = 0.500;
    green = 0.500;
    blue = 0.500;
}
-(void)GrayColor{
    red = 0.300;
    green = 0.300;
    blue = 0.300;
}
-(void)LightBlackColor{
    red = 0.150;
    green = 0.150;
    blue = 0.150;
}
-(void)BlackColor{
    red = 0.0;
    green = 0.0;
    blue = 0.0;
}
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

    UITouch *touch;

    NSEnumerator *counter = [touches objectEnumerator];
    while ((touch = (UITouch *)[counter nextObject])) {
        switch (strokeAlpha2) {
            case 1:
                strokeAlpha = .1;
                break;
            case 2:
                strokeAlpha = .2;
                break;
            case 3:
                strokeAlpha = .3;
                break;
            case 4:
                strokeAlpha = .4;
                break;
            case 5:
                strokeAlpha = .5;
                break;
            case 6:
                strokeAlpha = .6;
                break;
            case 7:
                strokeAlpha = .7;
                break;
            case 8:
                strokeAlpha = .8;
                break;
            case 9:
                strokeAlpha = .9;
                break;
            case 10:
                strokeAlpha = 1;
                break;
            default:
                strokeAlpha = 1;
                break;
        }

        self.strokeColor = [UIColor colorWithRed:red green:green blue:blue alpha:strokeAlpha];
        NSValue *touchPos = [NSValue valueWithCGPoint:[touch locationInView:self]];
        UIColor *color = [UIColor colorWithCGColor:strokeColor.CGColor];
        NSNumber *size = [NSNumber numberWithInt:strokeSize]; 
        NSMutableArray *stroke = [NSMutableArray arrayWithObjects: touch, size, color, touchPos, nil];
        [strokeArray addObject:stroke];
    }
}
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {

    UITouch *touch;

    NSEnumerator *counter = [touches objectEnumerator];

    while ((touch = (UITouch *)[counter nextObject])) {
        NSMutableArray *stroke;
        for (stroke in strokeArray) {
            if ([stroke objectAtIndex:0] == touch) {
                [stroke addObject:[NSValue valueWithCGPoint:[touch locationInView:self]]];
            }
            [self setNeedsDisplay];
        }
    }
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T05:08:45.327

而不是使用`CGContextAddLines()`你应该使用`CGContextAddCurveToPoint()`. 你需要用 4 个点来构造它，所以你可能需要使用前两个点和下一个点，或者类似的东西。

# java - c:if 中的 JSTL 请求属性

> ID：13577684
> 
> 赞同：1
> 
> 时间：2012-11-27T05:02:55.587
> 
> 标签：java, jsp, jstl

我在我的操作类中设置了一个请求属性，如下所示：

```
request.setAttribute("xFg", Boolean.TRUE); 
```

我想在我的 JSP 中检索它。我想使用 JSTL 标签检索它们。我试过这个：

```
<c:if test="${requestScope.xFg}">
    <c:set var="showlist" value="true" />
</c:if> 
```

但是`c:if`没有用，我的意思是它没有去`c:set`。我尝试使用打印相同的内容，`c:out`但没有显示任何内容。出了什么问题或者我应该如何测试请求属性值？`requestScope`到目前为止我还没有使用过。是`requestScope`获取请求值的选项吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-03-25T23:59:50.043

确保通过在页面指令中指定属性 isELIgnored=”false” 来激活 JSP 页面中的 EL 评估，如下所示：

```
<%@ page isELIgnored="false" %> 
```

# php - 用php中的脚本替换图像路径

> ID：13577686
> 
> 赞同：1
> 
> 时间：2012-11-27T05:03:07.677
> 
> 标签：php, html

我有一个 wordpress 网站，它安装了一个插件来从外部网站抓取天气读数，但是，我不喜欢该网站在天气内容中使用的图形。

我想知道是否有一个脚本可以用来检测图形的路径并将其更改为我指定的路径。

例如：

如果图像源 ( `<img src="">`) 包含“http://resources.weatherzone.com.au/wz/images/icons/fcast_70/”，则将图像源替换为“http://mywebsite.com/images/”

问题是……内容会随着天气而变化，因此图形可能会动态更新。所以我只需要替换路径，保持图像名称相同。
或者……添加一个 else 部分以保持脚本运行，直到它检测到完整的 img src 并替换为我的完整图像源。

我希望这是有道理的，我期待一个可能的解决方案。

谢谢，里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T05:06:30.963

尝试这个

```
$("#imageId").attr("src", "your new url here"); 
```

给`id`图像一些东西，然后你可以用 jQuery 改变它的来源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T05:11:08.697

通常，我会通过将抓取的 HTML 加载到 PHP 中来处理类似的事情`DOMDocument`，在那里找到图像节点，对其进行修改，然后将修改后的`DOMDocument`. 有关如何使用的示例`DOMDocument`，请参见此处的第一个答案：[regexp to find image path file in an image tag](https://stackoverflow.com/questions/2889804/regexp-to-find-image-path-file-in-an-image-tag)

# java - Java Web 从 PHP 开始？

> ID：13577687
> 
> 赞同：1
> 
> 时间：2012-11-27T05:03:18.397
> 
> 标签：java, php, swing, user-interface, java-web-start

我是最后一年的软件专业学生，这些天我们正在创建一个仪表板软件。我们的主要目标是用 Java 创建软件，因为我们是一个“Java 团队”。但是，我们有一位了解 PHP 的新成员。现在的问题。

他说他可以在 PHP 中创建“检索数据和显示数据”部分。但是我们已经在 J​​avaSE 中创建了“数据输入向导”。我的问题是，可以将我们的 JavaSE 应用程序部署为“Java Web Start”吗？所以一切都可以在服务器上。但是这样好吗？我觉得一团糟，因为在 Java 网络启动中你必须下载软件（我对吗？）而且 PHP 在网络浏览器中，啊啊啊啊！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T06:06:08.043

可以将您的 javaSE 应用程序部署为 java-web-start 应用程序。顾名思义，该技术用于通过从 Web 服务器下载所需文件来在客户端计算机上启动应用程序。

在这种情况下，Web 服务器的任务是托管所需的文件并提供一个 .jnlp 类型的文件，该文件定义应该下载什么以及从哪里下载。

[这是一个示例 .jnlp 文件](http://docs.oracle.com/javase/1.5.0/docs/guide/javaws/developersguide/syntax.html)

附带说明：Java-web-start 需要在客户端计算机上安装 JRE，因此它使部署“复杂化”。有可能使用不同的技术来确保安装 jre[阅读有关部署 java 工具包的信息](http://docs.oracle.com/javase/6/docs/technotes/guides/jweb/deployment_advice.html)

但是根据要求，基于网页的输入表单可能比 javase-swing-gui 类型的应用程序更受欢迎。php（如您的朋友所建议的）或 java-webcontainer（如 tomcat 或 jetty）都可以用来实现这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T08:18:54.733

> ..可以将我们的 JavaSE 应用程序部署为“Java Web Start”吗？

当然。富客户端桌面应用程序。（例如基于 Swing 的）使用[Java Web Start 启动](https://stackoverflow.com/tags/java-web-start/info)，可以调用它来自的服务器（即使是沙盒），并充当使用 PHP、JSP、ASP 创建的 Web 服务的消费者。

正如@Aksel 所提到的，客户端上需要有一个 JRE，这是部署脚本旨在确保的。

# java - 为什么双加有时是对的，有时是错的？

> ID：13577689
> 
> 赞同：8
> 
> 时间：2012-11-27T05:03:24.293
> 
> 标签：java, double

我知道java有双精度陷阱，但为什么有时，近似结果是好的，但有时不是。

像这样的代码：

```
for ( float value = 0.0f; value < 1.0f; value += 0.1f )  
    System.out.println( value ); 
```

结果如下：

```
0.0
0.1
0.2
0.3
...
0.70000005
0.8000001
0.9000001 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-27T05:05:04.890

正如您所说，并非所有数字都可以在 IEEE754 中精确表示。结合 Java 用于打印这些数字的规则，这会影响您将看到的内容。

作为背景，我将简要介绍 IEEE754 的不准确之处。在这种特殊情况下，`0.1`无法准确表示，因此您经常会发现实际使用的数字类似于`0.100000001490116119384765625`.

请参阅[此处](https://stackoverflow.com/questions/3448777/how-to-represent-0-1-in-floating-point-arithmetic-and-decimal/3448855#3448855)以分析为什么会这样。您获得“不准确”值的原因是该错误 ( `0.000000001490116119384765625`) 逐渐增加。

* * *

or （`0.1`或`0.2`类似数字）并不总是*表明*错误与Java 中的*打印代码有关，而不是与实际值本身有关。*

尽管`0.1`实际上比您预期的要高一点，但打印出来的代码并没有给您所有的数字。您会发现，如果您将格式字符串设置为传递小数点后 50 位数字，您就会看到真实值。

[此处](http://docs.oracle.com/javase/6/docs/api/java/lang/Float.html#toString%28float%29)详细介绍了 Java 如何决定打印出浮点数（没有显式格式）的规则。数字计数的相关位是：

> 必须至少有一个数字来表示小数部分，除此之外，必须有尽可能多的数字，但仅能将参数值与浮点类型的相邻值唯一区分开来。

例如，这里有一些代码向您展示它是如何工作的：

```
public class testprog {
    public static void main (String s[]) {
        float n; int i, x;
        for (i = 0, n = 0.0f; i < 10; i++, n += 0.1f) {
            System.out.print( String.format("%30.29f %08x ",
                n, Float.floatToRawIntBits(n)));
            System.out.println (n);
        }
    }
} 
```

这个的输出是：

```
0.00000000000000000000000000000 00000000 0.0
0.10000000149011611938476562500 3dcccccd 0.1
0.20000000298023223876953125000 3e4ccccd 0.2
0.30000001192092895507812500000 3e99999a 0.3
0.40000000596046447753906250000 3ecccccd 0.4
0.50000000000000000000000000000 3f000000 0.5
0.60000002384185791015625000000 3f19999a 0.6
0.70000004768371582031250000000 3f333334 0.70000005
0.80000007152557373046875000000 3f4cccce 0.8000001
0.90000009536743164062500000000 3f666668 0.9000001 
```

第一列是浮点数的*实际*值，包括来自 IEEE754 限制的不准确性。

第二列是浮点值的 32 位整数表示（它在内存中的外观而不是其实际整数值），对于检查低级别位表示的值很有用。

最后一列是您在没有格式化的情况下打印出数字时看到的内容。

* * *

现在查看更多代码，它将向您展示连续添加不精确值的不准确性如何为您提供错误的数字，*以及*与周围值的差异如何控制打印的内容：

```
public class testprog {
    public static void outLines (float n) {
        int i, val = Float.floatToRawIntBits(n);
        for (i = -1; i < 2; i++) {
            n = Float.intBitsToFloat(val+i);
            System.out.print( String.format("%30.29f %.08f %08x ",
                n, n, Float.floatToRawIntBits(n)));
            System.out.println (n);
        }
        System.out.println();
    }
    public static void main (String s[]) {
        float n = 0.0f;
        for (int i = 0; i < 6; i++) n += 0.1f;
        outLines (n); n += 0.1f;
        outLines (n); n += 0.1f;
        outLines (n); n += 0.1f;
        outLines (0.7f);
    }
} 
```

此代码使用持续添加的`0.1`来获取`0.6`然后打印出该浮点数和相邻浮点数的值。它的输出是：

```
0.59999996423721310000000000000 0.59999996 3f199999 0.59999996
0.60000002384185790000000000000 0.60000002 3f19999a 0.6
0.60000008344650270000000000000 0.60000008 3f19999b 0.6000001

0.69999998807907100000000000000 0.69999999 3f333333 0.7
0.70000004768371580000000000000 0.70000005 3f333334 0.70000005
0.70000010728836060000000000000 0.70000011 3f333335 0.7000001

0.80000001192092900000000000000 0.80000001 3f4ccccd 0.8
0.80000007152557370000000000000 0.80000007 3f4cccce 0.8000001
0.80000013113021850000000000000 0.80000013 3f4ccccf 0.80000013

0.69999992847442630000000000000 0.69999993 3f333332 0.6999999
0.69999998807907100000000000000 0.69999999 3f333333 0.7
0.70000004768371580000000000000 0.70000005 3f333334 0.70000005 
```

首先要看的是最后一列在每个块的中间行中有足够的小数位，以将其与周围的行区分开来（根据前面提到的 Java 打印规范）。

例如，如果您只有小数点后三位，您将无法区分`0.6`和`0.6000001`（相邻的位模式`0x3f19999a`和`0x3f19999b`）。因此，它会根据需要打印尽可能多的内容。

您会注意到的第二件事是我们`0.7`在第二个块中的值*不是* `0.7`. 相反，`0.70000005` *尽管*有一个更接近该数字的位模式（在上一行）。

这是由逐渐累积的误差造成的`0.1`。您可以从最后一个块中看到，如果您直接使用`0.7`而不是连续添加`0.1`，您将获得正确的值。

因此，在您的特定情况下，是*后一个*问题导致您出现问题。你被`0.70000005`打印出来的事实并不是因为Java没有足够接近的近似值（它有），而是因为你首先得到的方式`0.7`。

如果您修改上面的代码以包含：

```
outLines (0.1f);
outLines (0.2f);
outLines (0.3f);
outLines (0.4f);
outLines (0.5f);
outLines (0.6f);
outLines (0.7f);
outLines (0.8f);
outLines (0.9f); 
```

您会发现它可以正确打印出该组中的*所有*数字。

# jquery - 响应式网站 - 移动大小 - jQuery 选项卡不起作用

> ID：13577693
> 
> 赞同：0
> 
> 时间：2012-11-27T05:03:46.873
> 
> 标签：jquery, tabs, accessible

[http://www.cheryldesign.com/category/portfolio/](http://www.cheryldesign.com/category/portfolio/)

在上面的页面上，当您将浏览器缩小到 475 像素以下时，选项卡不再可点击。我一直在看这个一个星期，无法弄清楚发生了什么。

```
jQuery(document).ready(function()
{
jQuery("#access").accessibleDropDown();
});

jQuery.fn.accessibleDropDown = function ()
{
var el = jQuery(this);

/* Setup dropdown menus for IE 6 */

jQuery("li", el).mouseover(function() {
    jQuery(this).addClass("hover");
}).mouseout(function() {
    jQuery(this).removeClass("hover");
});

/* Make dropdown menus keyboard accessible */

jQuery("a", el).focus(function() {
    jQuery(this).parents("li").addClass("hover");
}).blur(function() {
    jQuery(this).parents("li").removeClass("hover");
});
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T05:19:39.713

奇怪的是，带有品牌标识的标题元素有一组巨大的边距和填充。当显示缩小到足以使该元素位于页面其余部分之上时，这些巨大的边距和填充设置会阻止与页面的其余部分进行交互。本质上，该标题底部的填充覆盖了所有内容。

尝试删除这些，您将看到它按预期工作。

特别是在 style.css 的第 289 行，更改了 margin-bottom 和 padding-bottom 的值......实际上尝试简单地删除它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T05:31:55.130

通过萤火虫我发现了一些`big paddings and margins`在你的`style.css`：

```
#branding {
    background: url("images/mobile_header.png") no-repeat scroll left top transparent;
    height: auto;
    position: relative;
    top: 0;
    width: 100%;
    z-index: 10;
}

#branding {
    background-color: #55AEBB;
    background-image: url("images/pattern1.png");
    background-position: left top;
    background-repeat: repeat-x;
    box-shadow: 10px 0 5px 0 rgba(0, 0, 0, 0.25);
    float: left;
    margin-bottom: -99999px;    // i removed this from firebug and
    min-height: 100%;
    padding-bottom: 99999px;    // this one.
    position: fixed;
    top: 0;
    width: 20%;
    z-index: 10;
} 
```

当`i removed`所有的这几个css属性`#branding the 2nd one`都起作用时。

# php - 将 JSON 从本地发送到服务器

> ID：13577696
> 
> 赞同：0
> 
> 时间：2012-11-27T05:03:54.333
> 
> 标签：php, json

我的驱动器中有一个`.json`文件，`C://`我想将它发送到我的网络服务器。

`.json`已经生成的。

我搜索了很多文章，但没有从本地发送到网络服务器。

我的问题是：**如何将`.Json`文件从本地发送/解析到服务器？**

Json 文件包含我的本地主机记录，我想更新到我的 Web 数据库，所以我使用 json 来发送数据。

我们需要将 json 文件发送到 web-server，并在 web-server 中解析？或者只是在本地解析并将其发送到网络服务器？

我使用 PHP 处理 json 文件，因为我使用 PHP 连接数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T05:08:36.310

我现在正在使用这个：

```
wget -q -O - --header='Content-Type: application/json; charset=utf-8' \
    --post-file=postdata.json --user-agent=wget path-to-my-web-service 
```

一旦你在服务器上得到它，你可以使用

```
$my_data = json_decode($_POST['json-data']); 
```

假设你的文件中有类似的东西`{"json-data":{"fld1":"val1", "fld2":"val2"}}`。

# facebook-graph-api - 如何使用用户访问令牌获取 Facebook 帖子？

> ID：13577697
> 
> 赞同：-1
> 
> 时间：2012-11-27T05:03:54.420
> 
> 标签：facebook-graph-api

**问题：**我想获取我 Facebook 墙上的所有帖子。

**描述：**为此，我正在使用访问令牌。但我无法检索我 Facebook 墙上的帖子。以下是我使用过的代码。

```
<?php 

   $app_id = "xxxxxxxxxxxxxx";
   $app_secret = "  xxxxxxxxxxxxxxxxxxx ";
   $my_url = "http://localhost:8088/fb/testing.php";

   session_start();
     $code = $_REQUEST["code"];

   if(empty($code)) 
{
     $_SESSION['state'] = md5(uniqid(rand(), TRUE)); // CSRF protection
     $dialog_url = "https://www.facebook.com/dialog/oauth?client_id=" 
       . $app_id . "&redirect_uri=" . urlencode($my_url) . "&state="
       . $_SESSION['state']. "&scope=publish_stream,read_stream";

     echo("<script> top.location.href='" . $dialog_url . "'</script>");
   }

      if($_SESSION['state'] && ($_SESSION['state'] === $_REQUEST['state'])) 
      {

     $token_url = "https://graph.facebook.com/oauth/access_token?"
       . "client_id=" . $app_id . "&redirect_uri=" . urlencode($my_url)
       . "&client_secret=" . $app_secret . "&code=" . $code;

     $response = file_get_contents($token_url);
     $params = null;
     parse_str($response, $params);
     echo $response;
     $_SESSION['access_token'] = $params['access_token'];

     $graph_url = "https://graph.facebook.com/me/feed/?access_token=" 
       . $params['access_token'];

     $response = json_decode(file_get_contents($graph_url));
     if($response)
     echo $response;

     echo("Hello  " .$user );
   }
   else {
     echo("The state does not match. You may be a victim of CSRF.");
   }

?> 
```

在这里，当我打印 $user 参数时，它什么也不显示。我无法找出错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T07:00:59.457

这是通过 PHP API 获取 facebook 用户提要的代码，我使用 Facebook PHP SDK 获取提要：

```
 <?php 
require_once('src/facebook.php');

$facebook = new Facebook(array(
                'appId' => '304784726296644',
                'secret' => '0d68eaf6dfe5d99cec8f3559b1212b15',
                'cookie' => true,
            ));

$uid = $facebook->getUser();

$me = null;
if ($uid) {
  try {

    $me = $facebook->api('/me');
    $feed = $facebook->api('/me/feed/');
  } catch (FacebookApiException $e) {
    error_log($e);
  }
}

//4\. login or logout
if ($uid) {
    $logoutUrl = $facebook->getLogoutUrl();
} else {
    $loginUrl = $facebook->getLoginUrl();
}

?>
<!doctype html>
<html xmlns:fb="http://www.facebook.com/2008/fbml">
  <head>
    <title>php-sdk</title>
  </head>
  <body>
    <?php if($uid)

    {
    ?>
    <a href="<?php echo $logoutUrl; ?>">Logout</a>
    <?php
    }
else
{
?>
<a href="<?php echo $loginUrl; ?>">Login</a>
<?php
}   
     ?>

    <?php if ($me): ?>
    <?php
    echo "<pre>";
    print_r($feed);
    echo "</pre>";
    ?>
    <?php endif ?>

  </body>
</html> 
```

# kineticjs - Kinetic.js 从图层中删除图像并通过添加新图像进行重绘

> ID：13577703
> 
> 赞同：0
> 
> 时间：2012-11-27T05:04:34.313
> 
> 标签：kineticjs

我创建了一个 kinetic.js 层并在其上添加了一些图像。现在我想删除所有图像并通过添加一些新图像（如游戏的二级图像）来重绘图层。我试过使用 layer.remove(image) 函数。

但是在重绘之后，旧图像仍然显示，而新图像没有添加。

谁能帮我解决这个问题..？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T07:44:06.140

我用

```
layer.removeChildren();
layer.draw();
layer.add(newRectWhatever); 
```

这对我有用。

# delphi - Delphi Indy 验证服务器证书 SSL

> ID：13577706
> 
> 赞同：8
> 
> 时间：2012-11-27T05:05:16.473
> 
> 标签：delphi, ssl, indy

我已经搜索了互联网，但没有找到关于在使用 TIdHTTP 通过 HTTPS 连接时如何验证证书的解决方案或方法。

我已将 IdSSLIOHandlerSocketOpenSSL 组件连接为 IOHandler，设置 SSLModes 等，但是当我浏览到[https://s3.amazonaws.com](https://s3.amazonaws.com)时，它无法验证证书。

OpenSSL (Indy) 提供

“与 SSL 连接时出错。SSL3_GET_SERVER_CERTIFICATE：证书验证失败”

OpenSSL 库已成功加载（使用 WhichFailedToLoad 检查）。OnStatusInfo 事件写入以下内容：

SSL 状态：“之前/连接初始化”

SSL 状态：“之前/连接初始化”

SSL 状态：“SSLv2/v3 写入客户端 hello A”

SSL 状态：“SSLv3 读取服务器你好 A”

SSL 状态：“SSLv3 读取服务器证书 B”

SSL 状态：“SSLv3 读取服务器证书 B”

SSL 状态：“SSLv3 读取服务器证书 B”

和 OnVerifyPeer，AOk = False。

我怎样才能让它正确验证。这是怎么回事？

感谢阅读，阿德里安

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-27T06:17:08.790

您必须为您的 TIdSSLIOHandlerSocketOpenSSL 组件的 OnVerifyPeer 事件实现事件处理程序。

来自 IdSSLOpenSSL.pas：

> 请注意，您确实应该始终实现 OnVerifyPeer，否则不会检查您正在连接的对等方的证书以确保其有效。

如果您只想考虑有效的图书馆认为也有效的相同证书，您只需以这种方式实现它：

```
function TForm1.IdSSLIOHandlerSocketOpenSSL1VerifyPeer(Certificate: TIdX509;
  AOk: Boolean; ADepth, AError: Integer): Boolean;
begin
  Result := AOk;
end; 
```

由于 Indy 首先检查证书的有效性，并在 Aok 参数中将其传递给您。最后一句话在您的代码中，因为您可能希望通过一些*小的验证错误*，例如过期，或者甚至询问用户证书是否被接受以防出现任何错误（轻微或不） .

要了解它为什么会这样工作，您可能还需要阅读 IdSSLOpenSSL.pas 文件顶部的所有注释：

> {
> 
> 有关 OnVerifyPeer 的重要信息：2005 年 2 月的 Rev 1.39 故意破坏了 OnVerifyPeer 接口，它（显然？）只影响将回调作为 SSL 协商的一部分实现的程序。请注意，您确实应该始终实现 OnVerifyPeer，否则不会检查您正在连接的对等方的证书以确保其有效。
> 
> 在此之前，如果 SSL 库检测到证书有问题或深度不足（即 VerifyCallback 中的“Ok”参数为 0 / FALSE），那么无论您的 OnVerifyPeer 返回 True 还是 False，SSL 连接都会故意失败。
> 
> 这产生了一个问题，即即使链中的一个证书只有一个非常小的问题（对证书链中的每个证书调用一次 OnVerifyPeer），用户可能很乐意接受，SSL 协商会失败。但是，当用户为 OnVerifyPeer 返回 True 时更改代码以允许 SSL 连接将意味着依赖于自动拒绝无效证书的现有代码将接受无效证书，这将是不可接受的安全更改。
> 
> 因此，OnVerifyPeer 被更改为通过添加 AOk 参数来故意破坏现有代码。要保留以前的功能，您的 OnVerifyPeer 事件应该执行“Result := AOk;”。如果您希望考虑接受 SSL 库认为无效的证书，那么在您的 OnVerifyPeer 中，确保您确信证书确实有效，然后将 Result 设置为 True。实际上，除了检查 AOk 之外，您还应该始终实现代码以确保您只接受有效的证书（至少从您的角度来看）。
> 
> Ciaran Costelloe, ccostelloe[_a_t_]flogas.ie
> 
> }
> 
> {
> 
> RLebeau 1/12/2011：再次中断 OnVerifyPeer 事件，这次添加了一个额外的 AError 参数（补丁由“jvlad”提供，dmda@yandex.ru）。这有助于用户代码区分自签名证书和无效证书。
> 
> }

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-23T12:01:30.370

我知道这是一篇古老的帖子，但我只能找到解决问题的方法。所以我想补充一下 Marcus 对其他有同样问题的人的回答：当 OpenSSL 在 PC 上找不到根证书时，AError 将返回 #19 (X509_V_ERR_SELF_SIGNED_CERT_IN_CHAIN)，并且根证书的 AOK 将为 false。当您从文件手动加载根证书时，AOK 应该始终返回 true（并且您也实现了某种证书固定）：

FSSLIOHandlerSocketOpenSSL.SSLOptions.RootCertFile := 'MyRoot.cer';

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-25T15:02:29.367

如果您收到类似的错误`SSL3_GET_SERVER_CERTIFICATE:certificate verify failed`，请继续阅读：

似乎在 Indy 10 中，如果您设置 a `VerifyDepth`of `0`，则`0`实际上意味着`all`。

# java - java定时器更改延迟与按钮

> ID：13577707
> 
> 赞同：0
> 
> 时间：2012-11-27T05:05:34.973
> 
> 标签：java, timer, actionlistener

我有一个动画，我想通过单击按钮来加速和减速。我环顾四周，找不到解决方案。目前我有一个按钮的动作监听器，它改变延迟变量的值并重新启动计时器。

任何人都可以请建议。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T05:35:07.050

Rather then changing the timer, which other parts of your animation might rely on, I would change the speed of the object.

This is little subjective. My example has an object capable of changing speeds over the same period of time. You may actually be required to alter how long the animation plays for instead, which will require a change in the time. This brings up other issues.

One way to achieve this is, is to actually have a timer that ticks at a regular interval and a model that reacts to those ticks. This means that if you adjust the duration, the heart beat won't be effected, you'd just need to adjust the distance through the animation. This is how the [Timing Framework](http://java.net/projects/timingframework) works and I believe [Trident](http://kenai.com/projects/trident/pages/Home) follows a similar design

![enter image description here](../Images/ed8870a1d5756ae4bd5589ee937530d0.png)

```
public class TestAnimationSpeed {

    public static void main(String[] args) {
        new TestAnimationSpeed();
    }

    public TestAnimationSpeed() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new AnimationPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class AnimationPane extends JPanel {

        private JSlider slider;
        private BouncyPane bouncyPane;

        public AnimationPane() {
            setLayout(new BorderLayout());
            bouncyPane = new BouncyPane();
            add(bouncyPane, BorderLayout.CENTER);
            slider = new JSlider(1, 11);
            slider.setMajorTickSpacing(2);
            slider.setPaintTicks(true);
            add(slider, BorderLayout.SOUTH);
            slider.addChangeListener(new ChangeListener() {
                @Override
                public void stateChanged(ChangeEvent e) {
                    bouncyPane.setVerticalSpeed(slider.getValue());
                }
            });
            slider.setValue(4);
        }

    }

    public class BouncyPane extends JPanel {

        private int dy = 4;
        private Ellipse2D ball;

        public BouncyPane() {
            ball = new Ellipse2D.Float(100, 0, 10, 10);
            Timer timer = new Timer(1000/60, new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    double y = ball.getY();
                    y += dy;
                    if (y + ball.getHeight() > getHeight()) {
                        y = getHeight() - ball.getHeight();
                        dy *= -1;
                    } else if (y < 0) {
                        y = 0;
                        dy *= -1;
                    }
                    ball.setFrame(ball.getX(), y, ball.getWidth(), ball.getHeight());
                    repaint();
                }
            });
            timer.setRepeats(true);
            timer.setCoalesce(true);
            timer.start();
        }

        public void setVerticalSpeed(int speed) {
            if (dy < 0 && speed > 0) {
                dy = -speed;
            } else {
                dy = speed;
            }
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2d = (Graphics2D) g.create();
            g2d.setColor(Color.RED);
            g2d.fill(ball);
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }

    }

} 
```

# java - JPA inharit 字段不继承 id 字段

> ID：13577709
> 
> 赞同：0
> 
> 时间：2012-11-27T05:05:43.893
> 
> 标签：java, hibernate, jpa

**大家好**

我们通常在每个名为 CREATED_BY 、 LAST_UPDATED_BY 、 CREATION_DATE 、 LAST_UPDATED_DATE 的表中放置 4 个字段，所以我想为什么不把它放在单个类*BaseDo*中，而不是将它继承到像*EmployeeDo*这样的类中。问题是如果我用@Entity 注释这个BaseDo，我必须放置一个我不想要的@Id 字段。有没有办法做到这一点？

```
@Entity
@Inheritance(strategy=InheritanceType.TABLE_PER_CLASS)
public class BaseDo implements Serializable {
    private static final long serialVersionUID = 6685603264139140757L;
    @Column(name="CREATED_BY" , nullable =false )
    private String createdBy;
    @Column(name="LAST_UPDATED_BY", nullable =false )
    private String lastUpdatedBy;
    @Column(name="CREATION_DATE", nullable =false )
    private Date creationDate;
    @Column(name="LAST_UPDATED_DATE", nullable =false )
    private Date lastUpdationDate;
} 
```

* * *

```
@Entity
@Table(name="EMPLOYEE")
public class EmployeeDo extends BaseDo implements Serializable {

    private static final long serialVersionUID = 4465521188079217243L;
    @Id
    @Column(name="EMPLOYEE_ID" )
    private String employeeId ;
} 
```

**多谢**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T05:24:59.763

你应该使用@MappedSuperclass

请检查一下

[http://docs.oracle.com/javaee/5/api/javax/persistence/MappedSuperclass.html](http://docs.oracle.com/javaee/5/api/javax/persistence/MappedSuperclass.html)

# javascript - 在谷歌地图中列出从源到目的地的主要城市或地点

> ID：13577710
> 
> 赞同：3
> 
> 时间：2012-11-27T05:05:55.873
> 
> 标签：javascript, google-api

我正在使用谷歌地图 API 来查找来源和目的地并在地图中指出。我还需要找到我的来源和目的地之间的主要城市或地点。有人可以指导满足我的要求吗？

# c#-3.0 - c#中的层和层有什么区别

> ID：13577714
> 
> 赞同：1
> 
> 时间：2012-11-27T05:06:12.027
> 
> 标签：c#-3.0

我很难理解 C# 中层和层之间的区别。在我的项目中，我的团队负责人让我在 n 层架构中做这件事，我做了示例表格并展示给他，他说那是 3 层架构。层和层之间有什么区别我仍然很困惑。我上了两门课，一门用于业务逻辑，一门用于数据访问

```
class bll
{
   //code for business logic
}

class dll
{
   //code for connection string
} 
```

还有一个.cs

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T05:29:26.563

3-tier 和 3-layered 架构之间没有太大区别，但区别在于性能和放置组件，如 BL、DAL 和表示层。当我在我探索的 3 层开发项目时遇到疑问时，请参见下文。

应用程序层可以驻留在同一物理计算机（同一层）上，并且每一层中的组件通过明确定义的接口与其他层的组件进行通信。分层架构侧重于将应用程序内的相关功能分组到堆叠的不同层中层之间的通信是显式的且松耦合的。通过严格的分层，一层中的组件只能与同一层中的组件或与其直接下层的组件交互。

层架构通常具有至少三个独立的逻辑部分，每个位于单独的物理服务器上。每一层负责特定的功能。每一层完全独立于所有其他层，除了紧接其上方和下方的层。层之间的通信通常是异步的为了支持更好的可扩展性。这可能意味着在同一台服务器或多台服务器上使用不同的程序集，例如 DLL、EXE 等。

# dotnetnuke - DotNetNuke 缺少 FireFox 版本 17 的菜单导航

> ID：13577716
> 
> 赞同：1
> 
> 时间：2012-11-27T05:06:28.647
> 
> 标签：dotnetnuke

我们有一个带有 DNN 菜单的 DotNetNuke 应用程序。

最近，在更新到 FireFox 17 版后，我们发现整个 DNN 导航菜单是不可见的。在其他浏览器中很好，在 FireFox 16 和更早版本中也可以正常工作。

这和浏览器设置有关系吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T21:45:15.583

我们找到了可能有所帮助的解决方案。我们的菜单正在显示，但将整个内容扩展为无序列表。我们在 DNN 5.6.0 上并使用 DNNMenuNavigationProvider。

我们在这里安装了 DDRMenuNavigationProvider：http: [//dnnddrmenu.codeplex.com/](http://dnnddrmenu.codeplex.com/)

此处提供详细说明：http: [//www.dotnetnuke.com/Resources/Wiki/Page/DDRMenu-user-guide.aspx](http://www.dotnetnuke.com/Resources/Wiki/Page/DDRMenu-user-guide.aspx)

然后我们简单地进入皮肤并更新相同的 dnn:NAV 控件以使用 ProviderName="DDRMenuNavigationProvider" 并且菜单恢复原样，并带有额外的滑动弹出动画。

希望有帮助。

更新 除了如上所述更新导航提供程序和用户代理外，我们还根据以下说明更新了 \js\ClientAPICaps.config 文件：http: [//support.dotnetnuke.com/issue/ViewIssue.aspx ?ID =13964&PROJID=2](http://support.dotnetnuke.com/issue/ViewIssue.aspx?ID=13964&PROJID=2)

我们将 dnn:NAV 控件的更新恢复为 DNNMenuNavigationProvider，一切都恢复到以前的操作方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T15:46:57.770

Firefox 更改了他们的用户代理字符串。这是修复： http: [//www.dotnetnuke.com/Community/Community-Exchange/Question/2733/Firefox17-Bug-How-to-change-User-Agent-String.aspx](http://www.dotnetnuke.com/Community/Community-Exchange/Question/2733/Firefox17-Bug-How-to-change-User-Agent-String.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T08:05:24.807

Firefox 发布了一个补丁 17.0.1，它（暂时）针对我的情况修复了这个问题。[发行说明中的](http://www.mozilla.org/en-US/firefox/17.0.1/releasenotes/)​​这个项目符号是关于这个问题的：

> *   17.0.1：还原用户代理更改导致某些网站不兼容。

# python - 文本生成算法

> ID：13577721
> 
> 赞同：2
> 
> 时间：2012-11-27T05:06:49.423
> 
> 标签：python, algorithm

我正在寻找一种算法或一些建议来实现它。
输入：

```
"{1|2} word {3|4}" 
```

输出：

```
["1 word 3", "1 word 4", "2 word 3", "2 word 4"] 
```

另外，我想支持嵌套结构——`"{1|2{0|1}}" -> ["1", "20", "21"]`
我意识到这个问题太笼统了，但不想实现轮子。也许你看到了类似的事情。

**UPD**

```
from pyparsing import *
from collections import deque

s = u"{1|2} {3|4}"

deque = deque()

def mesh_lists(listOne, listTwo):
    result = []
    for l1 in listOne:
        for l2 in listTwo:
            firstWord = str(l1).strip()
            secondWord = str(l2).strip()
            result.append(" " + firstWord + " " + l2 + " ")
    return result

def action(string, pos, token):
    global deque
    deque.append(list(token[0]))

def processDeque():
    global deque
    while len(deque) > 1:
        l1 = deque.popleft()
        l2 = deque.popleft()
        res = mesh_lists(l1,l2)
        deque.appendleft(res)
    return [x.strip() for x in deque[0]]

_lcurl = Suppress('{')
_rcurl = Suppress('}')
_pipe = Suppress('|')
word = Regex("[^{|}]+")
varBlock = Forward()
entry = word | varBlock
varList = Group(entry + ZeroOrMore(_pipe + entry))
varBlock << (_lcurl + Optional(varList) + _rcurl).setParseAction(action)
template = ZeroOrMore(entry)

res = template.parseString(s)
print processDeque() 
```

它仅支持“{||}{||}”结构。没有空话，没有嵌套结构。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T05:17:01.907

这个项目看起来很适合你：[https ://github.com/asciimoo/exrex](https://github.com/asciimoo/exrex)

> Exrex 是一个工具，它可以为给定的正则表达式生成所有匹配的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-21T13:53:26.607

pyparsing 发布的示例包括一个正则表达式逆变器。

# perl - 使用 perl 的 hudson 单元测试配置

> ID：13577726
> 
> 赞同：1
> 
> 时间：2012-11-27T05:07:12.730
> 
> 标签：perl, junit, hudson

我设法设置了哈德逊。但是有几件事真的让我很困惑。Hudson 和 SVN 存储库都在我学习 Hudson 的同一台机器上。

在 Hudson 中配置的存储库 URL 是`file:///svnrepos/svnproj`

构建作业名称是`Unittest`

我的 svn 存储库结帐位于`/home/anand/svnprojcopy/svnproj`.

它有以下文件

```
./lib/operatingsystem.pm
./t/operatingsystem.t
./Build (generated from Build.PL script) 
```

我已经用 * * * * * 配置了 Poll SCM 选项

对于构建选项，我已经配置了执行 shell 选项

```
cd /home/anand/svnprojcopy/svnproj;prove -I ./lib -v --harness=TAP::Harness::JUnit 
```

这会产生`junit_output.xml`

我已经配置`Publish JUnit test result report`了测试报告 XML`junit_output.xml`

但是每次我强制构建它时都会报告“未配置测试结果”。我相信它不是在寻找`/home/anand/svnprojcopy/svnproj`，`junit_output.xml`而是在`/var/lib/hudson/jobs/Unittest/workspace`

我不确定我是否正确设置了 Hudson，因为我不确定如何配置路径。我手动将文件 junit_output.xml 复制到 var/lib/hudson/jobs/Unittest/workspace 并报告它找到了该文件，但结果不是最新的。我确定我在这里遗漏了一些基本的东西。有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T04:53:32.893

这是一个简单的错误。我没有将 testfolder 't' 添加到 svn。因此，当我尝试在 hudson shell 命令中运行 'prove -I ./lib -v --harness=TAP::Harness::JUnit' 时，该命令失败了。现在添加到 svn 后，路径 /var/lib/hudson/jobs/Unitest/workspace 将使用 svn 复制和证明命令成功生成 junit_output.xml 进行更新。

# google-apps-script - 无法使用 Google Apps 脚本中的 createAnnouncements 发布具有相同标题的公告

> ID：13577728
> 
> 赞同：2
> 
> 时间：2012-11-27T05:07:21.287
> 
> 标签：google-apps-script

我的目标是从特定帐户获取电子邮件并将其作为公告发布在网站上。我已经做到了这一点。但是，有一个独特的场景，带有附加信息的电子邮件将以相同的主题出现（主题是帖子的标题）。我也需要获取它并将其发布为公告。但是 createAnnouncements 会抛出一个错误，指出该帖子已经存在。但是我可以手动发布两个具有相同标题的帖子。

我已经尝试了很多东西，比如 getAnnouncements 和 getAllDecedents，但没有任何东西达到我的目的或接近它。

有没有办法可以删除旧帖子并创建新帖子或者有没有办法可以使用 createAnnouncements 发布具有相同标题的消息？在这方面的任何帮助将不胜感激。

我在下面包含了一部分我的代码。

```
 var pageTitlePattern = /^\[.*\] \[/;
      var pageTitleArray = pageTitlePattern.exec(messageSubject);
      var pageTitle = pageTitleArray[0].substr(1,pageTitleArray[0].length - 4);

      var messageIdPattern = /\] \[.*\]$/;
      var messageIdArray = messageIdPattern.exec(messageSubject);
      var messageId = messageIdArray[0].substr(3,messageIdArray[0].length - 4);
      var postBody = formatMessage(message, false) + "<br>" + "<font color=\"#ffffff\">" + messageId + "</font>";
      var newAccouncement = postPage.createAnnouncement(pageTitle, postBody);
      var files = message.getAttachments();
      for (var k = 0; k < files.length; k++) {
        newAccouncement.addHostedAttachment(files[k]);
        cabinetPage.addHostedAttachment(files[k]);
      }
      message.markRead(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T12:59:55.630

当您手动创建具有相同名称的多个公告帖子时，站点 UI 会通过附加连字符和整数自动使公告的路径唯一。

例如，如果您创建两个标题为“TestPost”的帖子，您会将这些页面添加到您的网站：

```
https://sites.google.com/site/--site-id--/announcements/testpost
https://sites.google.com/site/--site-id--/announcements/testpost-1 
```

我建议你让你的脚本执行类似的操作。

```
...
var pageTitlePattern = /^\[.*\] \[/;
var pageTitleArray = pageTitlePattern.exec(messageSubject);
var pageTitle = pageTitleArray[0].substr(1,pageTitleArray[0].length - 4);

// Check if this pageTitle already used
var announcements = page.getAnnouncements({ 
                                         includeDrafts: false,
                                         includeDeleted: false,
                                         search: pageTitle });
// If other announcements have already used this pageTitle,
// make ours unique by appending a hyphen and unique number
if (announcements.length > 0) {
  pageTitle += '-' + announcements.length;
}
... 
```

`page.getAnnouncements()`搜索不区分大小写，并`pageTitle`在标题或文本中的任意位置查找带有字符串的所有公告。这可能比您想要的更具包容性。`name`在这种情况下，另一种方法是使用[createAnnouncement() 的这个变体](https://developers.google.com/apps-script/reference/sites/page?hl=en#createAnnouncementsPage%28String,String,String%29)来接管公告页面的创建。

# java - 在 RxTx 中发送多个查询

> ID：13577732
> 
> 赞同：1
> 
> 时间：2012-11-27T05:08:15.327
> 
> 标签：java, scala, rxtx

我正在尝试通过 RxTx一次向设备（汽车的 ECU，特别是[ELM327 ）发送多个查询。](http://en.wikipedia.org/wiki/ELM327)这是使用 RxTx 的类：

```
import collection.JavaConversions._
import gnu.io._
import java.io._
import java.util.TooManyListenersException

class Serial private (portName: String, 
                      baudRate: Int, 
                      dataBits: Int, 
                      stopBits: Int, 
                      parity: Int, 
                      flowControl: Int) {

  private val portId = CommPortIdentifier.getPortIdentifier(portName)
  private val serial = portId.open("Serial Connection from OBDScan", 
                                   5000).asInstanceOf[SerialPort]
  setPortParameters(baudRate, dataBits, stopBits, parity, flowControl)

  private val istream = serial.getInputStream
  private val ostream = serial.getOutputStream

  def this(portName: String, baudRate: Int = 115200) = this(portName, baudRate,
    SerialPort.DATABITS_8,
    SerialPort.STOPBITS_1,
    SerialPort.PARITY_NONE,
    SerialPort.FLOWCONTROL_NONE)

  def close = {
    try {
      istream.close
      ostream.close
    } catch {
      case ioe: IOException => // don't care, it's ended already
    }

    serial.close
  }

  def query(command: String) = {
    ostream.write(command.getBytes)
    ostream.write("\r\n".getBytes) // neccessary for Serial port.
  }

  def queryResult: String = {
    try {
      val availableBytes = istream.available
      val buffer = new Array[Byte](availableBytes)

      if (availableBytes > 0) {
        istream.read(buffer, 0, availableBytes)
      }
      new String(buffer, 0, availableBytes)
    } catch {
      case ioe: IOException => "Something wrong! Please try again."
    }
  }

  def addListener(listener: SerialPortEventListener) = {
    try {
      serial.addEventListener(listener)
      serial.notifyOnDataAvailable(true)
    } catch {
      case tm: TooManyListenersException => println("Too many listener")
    }
  }

  def removeListener = {
    serial.removeEventListener
  }

  private def setPortParameters(br: Int, 
                                db: Int, 
                                sb: Int, 
                                p: Int, 
                                fc: Int) = {
    serial.setSerialPortParams(baudRate, dataBits, stopBits, parity)
    serial.setFlowControlMode(flowControl)
  }
}

object Serial {
  def connect(portName: String, baudRate: Int = 115200): Serial = {
    try {
      val ret = new Serial(portName, baudRate)
      ret
    } catch {
      // exception handling omitted.
    }
  }
} 
```

现在查询工作正常并给我正确的结果。当我一次发送多个查询时，问题就来了：

```
val serial = Serial.connect("COM34")
serial.query("AT Z")
serial.query("10 00") 
```

设备收到了两个查询，但只返回一个结果。如果我想获得下一个结果，我必须发送另一个查询，这将导致程序延迟一个查询。如果我`Thread.sleep`在每次查询后调用：

```
val serial = Serial.connect("COM34")
serial.query("AT Z")
Thread.sleep(500)
serial.query("10 00") 
```

问题解决了，当然整个应用程序在`Thread.sleep`被调用时都会停止。我不希望这样，因为应用程序会一直执行此查询（这意味着如果我这样做，它将一直挂起）。

由于我在 Scala 上，我正在考虑使用 Actors 或类似的东西，但我认为这对于桌面应用程序来说太过分了。没有演员有没有办法做到这一点？也许我读错了串口的响应？

**TL;DR：**我想通过 RxTx 对串行设备进行几次查询，而不锁定整个应用程序（当前的解决方案是通过 实现`Thread.sleep`的，这会阻止整个应用程序）。我怎样才能做到这一点？

# android - 是否为每个应用程序创建了一个 Dalvik 虚拟机实例？

> ID：13577733
> 
> 赞同：55
> 
> 时间：2012-11-27T05:08:27.243
> 
> 标签：android, dalvik

是为每个应用创建一个 Dalvik 虚拟机实例，还是所有 Android 应用共享同一个 Dalvik 虚拟机实例？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-11-27T05:34:21.483

每个 Android 应用程序都在自己的进程中运行，具有自己的 Dalvik 虚拟机实例。Dalvik 的编写使得一个设备可以高效地运行多个 VM。

Dalvik VM 以 Dalvik Executable ( `.dex`) 格式执行文件，该格式已针对最小内存占用进行了优化。

VM 是基于寄存器的，并运行由 Java 语言编译器编译的类，这些类已被包含的工具转换为`.dex`格式。`dx`

还可以查看[What is... The Dalvik Virtual Machine](http://www.electronicsweekly.com/blogs/eyes-on-android/what-is/the-dalvik-virtual-machine-2011-10/)，了解有关 DVM 的详细说明。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2014-09-14T06:05:17.693

1.  Dalvik 虚拟机是专门为 Android 构建的。它旨在解决*电池寿命*和*处理能力*问题，而且是*免费*的。

2.  我们使用 Dalvik VM 代替 Java 虚拟机 (JVM)，因为 Java 编译器、Java 工具是免费的，但 JVM 不是免费的，所以来自 Google 的 Android 开发人员制作了自己的虚拟机，并使其免费。

3.  虚拟机是必要的，因为虚拟机作为虚拟计算机有助于调试，因此我的应用程序可以以相同的方式运行不同的设备

### 图示

![IMG](../Images/ad5be1fcc52e200b9517b375b43cecf4.png)

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2014-09-04T06:08:43.607

将一个`.java`文件提供给 java 编译器 ( `javac`) 以生成该`.class`文件。

所有`.class`文件都提供给`dx`工具以生成单个`dex`文件。

该`dex`文件被提供给 Dalvik VM 以生成最终的机器代码。

最终的机器码交给 CPU 执行。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2012-12-12T14:57:12.920

所有apk的基本源代码都是java语言。当您构建这个项目时，所有 .java 文件都被转换为 .class 现在 adk 的 dx 工具将所有 .class 文件转换为 classes.dex 文件。这个 classes.dex 文件在 dalvik 虚拟机上执行。

有关 dalvik 虚拟机的更多信息：[http ://www.slideshare.net/jserv/understanding-the-dalvik-virtual-machine](http://www.slideshare.net/jserv/understanding-the-dalvik-virtual-machine)

Dalvik 虚拟机旨在一次运行多个 VM。因此，每个应用程序都在自己的进程中运行，并拥有自己的 Dalvik 虚拟机实例，正如 @sahilMahajanMj 所说。

并且这个 classes.dex 文件进一步优化为 odex 文件并保存在 /dalvik/dalvik-cache
要了解有关 odex的更多信息，[请单击此](https://stackoverflow.com/questions/9593527/what-are-odex-files-in-android)。

如果你想知道为什么 DVM for android 为什么不 JVM[点击这个](http://imsciences.edu.pk/serg/wp-content/uploads/2009/07/Analysis-of-Dalvik-VM.pdf)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-11-10T17:36:33.413

**Dalvik**是一个虚拟机，每个 android 应用程序都在其中运行。通过 Dalvik，设备能够通过更好的内存管理运行多个虚拟机，因为 Dalvik 虚拟机是基于寄存器的，因此内存高效

每个 android 应用程序都在自己的进程中运行，具有自己的 Dalvik VM 实例。首先，Java 文件通过 java 编译器转换为 .class 文件 .class 文件提供给“dx”工具，该工具将其转换为 .dex 格式 .dex 文件提供给 DVM 以生成机器代码 机器代码由 CPU 执行

.apk 文件包含 zip 格式的 .dex 文件，可以在 Dalvik VM 上运行

为什么是达尔维克？1\. DVM 专为电池寿命、处理能力及其免费而构建 2\. 我们使用 DVM 而不是 JVM，因为 JVM 不是免费的

# string - iOS删除字符串中最后一个句点之后的所有字符

> ID：13577737
> 
> 赞同：1
> 
> 时间：2012-11-27T05:08:37.243
> 
> 标签：string, truncate, strip, period

我有一个字符串，比如“www.vanityURL.myWebsitesURL.com”，我想去掉扩展名，不管它是“.com”、“.net”、“.ru”等等……那怎么能我在**最后**一个时期之后剥离所有东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T05:17:53.390

试试这种方式： -

```
NSString* sURL = @"www.vanityURL.myWebsitesURL.com";
NSRange lastDotRange = [sURL rangeOfString:@"." options:NSBackwardsSearch];
if (lastDotRange.location != NSNotFound) {
    return [sURL substringToIndex:lastDotRange.location];
} else {
    return sURL;
} 
```

# vpn - 如何防止 iPhone\iPad 上的 VPN 切换开关访问 – 适用于企业设备

> ID：13577741
> 
> 赞同：1
> 
> 时间：2012-11-27T05:09:06.653
> 
> 标签：vpn, enterprise, mdm

我想创建 iOS 设备配置文件，它应该强制用户访问 VPN，我能够成功创建配置文件并且能够通过 VPN 发送所有设备流量（通过选择“发送所有流量”复选框），但是设备仍然用户看到 VPN 的 On/Off 开关选项，换句话说，他们能够关闭 VPN，我的“通过 VPN 发送所有流量”设置只有在设备上的用户打开 VPN 切换开关时才有效。

我想禁用 VPN 切换按钮开关，因此在安装设备配置文件后，用户应该无法关闭 VPN，任何建议\输入我应该在 .mobileconfig 文件中写入的内容，以便设备禁用“VPN 切换”开关。

谢谢苏雷什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-27T11:20:17.320

请注意，iOS 8 中有一个名为“Always-on VPN”的新功能

摘自这里[https://www.apple.com/br/privacy/docs/iOS_Security_Guide_Oct_2014.pdf](https://www.apple.com/br/privacy/docs/iOS_Security_Guide_Oct_2014.pdf)

> iOS 8 引入了 Always-on VPN，可以为通过 MDM 管理并使用 Apple Configurator 或 Device Enrollment Program 监督的设备进行配置。这消除了用户在连接到 Wi-Fi 网络时打开 VPN 以启用保护的需要。Always-on VPN 通过将所有 IP 流量通过隧道传回组织，使组织能够完全控制设备流量。默认隧道协议 IKEv2 通过数据加密保护流量传输。该组织现在可以监控和过滤进出其设备的流量，保护其网络中的数据，并限制设备访问 Internet

请注意，被视为受管理的设备（实际上是管理应用程序和设置）与被视为受监督的设备之间存在差异。您在初始注册时监督设备，您只想对公司拥有的设备执行此操作，而不是 BYOD。

干杯詹斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T04:14:02.470

没有任何配置文件具有阻止用户关闭 VPN 的限制。

您可以获得的最接近的是配置“按需启用 VPN”。这样，如果某些应用程序尝试访问任何与 iOS 匹配的主机，将自动打开 VPN。

看看这个页面：[http ://www.enterpriseios.com/wiki/On_Demand_VPN_Explained](http://www.enterpriseios.com/wiki/On_Demand_VPN_Explained)

# php - 如果我的 Web 应用程序位于不知名的 URL，我是否需要对它进行密码保护？

> ID：13577745
> 
> 赞同：4
> 
> 时间：2012-11-27T05:10:06.730
> 
> 标签：php, security

如果我有一个脚本，我希望能够立即运行并将它放在 https 上服务器的公共端，并且只要我自己的个人缓存不被窥探，它是否像'在公共脚本后面，我必须使用用户名和密码登录才能实例化？

例如，考虑以下两种方法：

1）我使用用户名：xxxxxxxx，密码：yyyyyyyy登录（例如使用ssl或cpanel然后触发脚本）

2）我只是从我的iphone运行这条路径，[https://www.iamsilly.com/xxxxxxxx/yyyyyyyy/myscript.php](https://www.iamsilly.com/xxxxxxxx/yyyyyyyy/myscript.php)

消除有人可能会拿起我的 iPhone 并查看我的历史记录的可能性，这两个安全系统之间的安全级别之间是否存在任何实际差异？复杂度不完全一样吗？https 的加密程度是否不足以使 https 的复杂性与登录一样安全？

谢谢，如果这个话题被说死了，我很抱歉，但是在阅读了很多关于它的帖子后，我还是不太明白！

编辑：请记住，带有 8x8 随机双目录的路径有 7 quintillion（七十亿）组合，而且只有在我使用字母和数字字符的情况下。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-27T15:04:17.307

你是说“如果从街上看不到我的前门，我不需要锁上它，对吧？”

您假设您知道给定的入侵者将如何找到进入您网站的方式。你没有。

您假设一个人正试图进入您的网站。它可能不会是人类，也可能不仅仅是一个人。入侵尝试的规模非常大。

无论我要去哪里，我都会在车上系好安全带，即使我实际上是在四分之一英里之外开车。它更安全，我不会浪费脑力去想是否需要。将密码放在您的应用程序上，不要浪费时间试图弄清楚它是否值得。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T05:39:11.487

不，[通过默默无闻](http://en.wikipedia.org/wiki/Security_through_obscurity)的安全根本不是安全。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T01:32:11.620

我认为答案是“如果有人真的设法抓住了这个，那该有多糟糕？” 然后采取相应的行动。

“那永远不会发生”总是让我偏执。

# java - 使用 Eclipse 的布尔 Getter 和 Setter

> ID：13577746
> 
> 赞同：6
> 
> 时间：2012-11-27T05:10:09.397
> 
> 标签：java, eclipse

我想知道如果我使用以下布尔值，为什么 Eclipse 会产生以下 getter 和 setter：

```
boolean isLifeTimeMember 
```

![图片](../Images/74969b2c0087e878eae65efa1c1817b2.png)

getter 应该是 isIsLifeTimeMember() 而不是 isLifeTimeMember()

我认为它影响了在 JSP 中调用变量 isLifeTimeMember。因为它将查看 JSP 并将其映射到 isIsLifeTimeMember() getter 方法。

错误是因为没有 isIsLifeTimeMember() 方法但是eclipse生成的getter是isLifeTimeMember()

谢谢你。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-27T05:12:01.593

Eclipse 名称生成规则是布尔 getter 应该以`is`. 如果变量名已经以 开头`is`，那么它认为不需要额外的前缀。

Eclipse 有一个设置来控制`is`生成的布尔 getter 的使用。打开首选项并导航到`Java > Code Style`。在那里，您可以取消选中“对返回布尔值的 getter 使用 'is' 前缀”选项。然后，Eclipse 生成的布尔 getter 将以“get”开头，就像所有其他的一样。

顺便说一句，Java 在具有同名的字段和方法方面没有问题。

但是，属性名称以“is”开头可能会导致 jsp 出现问题。如[该线程](https://stackoverflow.com/questions/2945061/java-how-to-name-boolean-properties)中所述，最好避免使用类似问题的属性名称 (isLifeTimeMember)，而只使用属性本身作为属性名称 (lifeTimeMember)。

**代码示例：**

```
boolean lifeTimeMember;

public boolean isLifeTimeMember() {
   return lifeTimeMember;
}

public void setLifeTimeMember(boolean lifeTimeMember) {
   this.lifeTimeMember = lifeTimeMember;
} 
```

而在 JSP 中，如果您需要使用此变量，只需使用变量名“lifeTimeMember”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T05:27:45.547

在布尔变量的情况下，eclipse`is`会在变量名称前添加以形成 getter 名称。即，如果变量是`boolean present;`，则生成的 getter 将被命名`isPresent();`

不建议`is`在变量名中有一个。

如果变量名称是`ispresent`，在 jsp 上，您将通过变量名称查找，`ispresent`该变量名称又查找它的 getter，它是一个布尔值，因此它假定 getter 将`isispresemt();`是不存在的，因为 eclipse 中的 getter setter 生成器不添加一个`is`以防万一变量名中已经存在。

因此 `could not find the field ispresent`预计会抛出异常

有一个`is`in 字段名称，可能会导致问题，避免使用它们

# c# - C# .NET 动态表单控件或 wpf 模板

> ID：13577751
> 
> 赞同：0
> 
> 时间：2012-11-27T05:10:55.703
> 
> 标签：c#, .net, wpf, dynamic

在 WPF 应用程序中，我想使用来自文件夹位置的图像显示瓷砖网格（本质上是按钮）。文件夹中可能有任何不同数量的图像，因此需要动态生成图块/按钮并根据数量进行格式化。这些需要是可以触发鼠标点击事件的按钮。

我对 C# 和 .NET 很陌生，所以我想了解一下最好的方法是什么。我已将其作为 WPF 应用程序启动，所以使用模板是个好主意吗？或者，如果只是动态创建带有背景图像的表单按钮是一个简单的选择，那么我会试一试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T07:54:17.337

您可能需要一个 ItemsControl，例如 ListView。不幸的是，WPF 仅提供 GridView 实现，但 ListView 旨在支持您在 Windows 文件资源管理器中看到的所有视图。对于基于 Tiled 的视图，您需要重写 ViewBase 类并将其分配给 ListView 的 View 属性。

几年前，我有演示您想要什么的示例代码。

以下链接包含 MSDN 示例： [MSDN ListView.View 示例](http://go.microsoft.com/fwlink/?LinkID=160013)

[如何：创建自定义视图模式](http://msdn.microsoft.com/en-us/library/ms748859.aspx%5D%20%5B2%5D)

我知道 Xceed DataGrid 有一个内置的 CardView 模式。我不知道它是否在免费版本中可用：[Xceed WPF DataGrid 文档](http://doc.xceedsoft.com/products/XceedWpfDataGrid/)

**编辑**我刚刚检查了 MSDN 示例，我认为它们与您想要的很接近。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T09:45:01.197

我会去`ItemsControl`。您需要一个代表按钮的类，具有 X、Y、ImageUri 等属性。您通过公开生成的按钮`ObservableCollection`并将其绑定到`ItemsSource`您的`ItemsControl`. 然后你改变你`ItemsPanelTemplate`的网格：

```
 <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <Grid>                        
                    <!--Here go rows and columns definitions-->
                </Grid>
            </ItemsPanelTemplate>                
        </ItemsControl.ItemsPanel> 
```

如果您有固定数量的行和列，您可以直接在 XAML 中添加它们，否则在运行时在代码隐藏中生成它们。您添加`ItemsContainerStyle`定位：

```
 <ItemsControl.ItemContainerStyle>
            <Style>
                <Setter Property="Grid.Row" Value="{Binding Y}" />
                <Setter Property="Grid.Column" Value="{Binding X}" />
            </Style>
        </ItemsControl.ItemContainerStyle> 
```

此外，您还需要`ItemTemplate`使用图像覆盖显示按钮。其他选项是使用`Canvas`或`UniformGrid`作为`ItemsPanelTemplate`（各有优缺点）。

# image - Matlab SVM 用于以二进制形式获取输出

> ID：13577753
> 
> 赞同：-1
> 
> 时间：2012-11-27T05:10:59.083
> 
> 标签：image, matlab, svm, biometrics

我需要使用 SVM 提取图像特征。SVM 的输出应该是二进制的。如果有资源，请分享。实际上我正在研究巩膜检测。我从训练图像中手动获取巩膜区域，并以图像中每个子区域的直方图值的形式提取特征。现在我将从测试图像中提取相同的特征。在接收到来自测试图像的特征后，我需要将测试和训练特征与 SVM 进行比较，以确定该特定块是否对应于巩膜。如果我得到一个 0 和 1 形式的输出，那么我将使用代码以更简单的方式分割区域。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T05:21:00.983

查看 Matlab 的[libsvm](http://www.csie.ntu.edu.tw/~cjlin/libsvm/)，它可能是 Matlab 中使用最广泛的免费 SVM 工具箱。

Matlab 中有一篇关于 libsvm 的有用[帖子](https://stackoverflow.com/questions/8556410/how-to-use-libsvm-in-matlab)。当您下载 libsvm 时，它包含几个我能够在几分钟内运行的 Matlab 示例。您可以轻松修改其中一个示例以获得二进制输出。

# php - 将 JSON 对象中的数字（字符串）转换为 int

> ID：13577758
> 
> 赞同：0
> 
> 时间：2012-11-27T05:11:20.197
> 
> 标签：php, javascript, jquery, json, jsonp

这是PHP中的一行json_encode函数

```
echo $_GET['callback'].'('.json_encode($jsona).')'; 
```

那个回报

```
jQuery183022578700515441597_1353992348618([{"label":["done","open","pending","draft","cancel"],"values":[{"label":"August","values":["175","32","1","0","0"]},{"label":"September","values":["450","130","1","0","1"]},{"label":"October","values":["150","396","1","5","0"]},{"label":"November","values":["0","0","0","3","0"]}]}]) 
```

我通过 JS (jQuery) 得到它们

```
 $.ajax({
                url: 'ajax/_state.php',
                type: 'GET',
                dataType: 'jsonp',
                dataCharset: 'jsonp',
                success: function (data) {
console.log(data);
    }
}); 
```

但是返回的 JSON 中包含的所有数字都变成了字符串（不知道为什么？）。

例如，我如何将它们转换为整数；

```
{
      'label': ['done', 'open', 'pending', 'draft', 'cancel'],
      'values': [
      {
        'label': 'Sept',
        'values': [20, 40, 15, 5,2]
      }, 
      {
        'label': 'Oct',
        'values': [30, 10, 45, 10]
      }, 
      {
        'label': 'Nov',
        'values': [38, 20, 35, 17]
      }
      ]
      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T05:17:05.450

中的值`$jsona`必须是字符串。如果您使用的是 PHP 5.3，您可以将`JSON_NUMERIC_CHECK`其用作第二个参数，该参数将在适当的时候将字符串转换为整数，但请注意该选项。

# jquery - 在 JQuery addclass 之后启用 href 导航

> ID：13577759
> 
> 赞同：2
> 
> 时间：2012-11-27T05:11:27.127
> 
> 标签：jquery

我需要使用 jQuery`addClass`来更改所选锚标记的样式。它工作正常。但是在更改样式后，我想导航到`href`. 这不起作用，因为我正在使用`return false;`or `e.preventDefault()`。

请帮我。

我正在使用的代码是：

```
$("li").click(function (e) {
    e.preventDefault();
    $("li").removeClass("active");
    $(this).addClass("active");
});

<div id="navigation" class="right">
    <ul>
        <li id="nav1"><a href="../WebForm1.aspx"><span>Home</span></a></li>
        <li id="nav2"><a href="../AboutUs.aspx"><span>About Us</span></a></li>
    </ul>
</div> 
```

在单击主页链接后应用样式，但我希望它`webform1.aspx`在此之后导航到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T05:25:32.947

您需要检查您的`li`标签是否包含活动类，如果它已经转到指定的链接。

```
$("li").click(function (e) {
  if($(this).hasClass('active')){
      return true;
  }else{
    e.preventDefault();
    $("li").removeClass("active");
    $(this).addClass("active");
  }
}); 
```

[演示](http://jsfiddle.net/y7FTH/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T05:25:05.040

```
$("li a").click(function (e) {
    e.preventDefault();
    $(this).parent().parent().children("li").children("a").removeClass("active");
    $(this).addClass("active");
    document.location = $("a", this).attr("href");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T05:18:07.350

演示：http: [//jsfiddle.net/hBubq/1/](http://jsfiddle.net/hBubq/1/)

**编辑**`<a href=""`您可能需要在每个对象中使用绝对 URL

```
$("li").click(function (e) {
    e.preventDefault();
    $("li").removeClass("active");
    $(this).addClass("active");
    window.location.href =  $(this).find('a').attr('href');
}); 
```

​​​

```
<div id="navigation" class="right">
   <ul>
      <li id="nav1"><a href="../WebForm1.aspx"><span>Home</span></a></li>
      <li id="nav2"><a href="../AboutUs.aspx"><span>About Us</span></a></li>
   </ul>
</div> 
```

# objective-c - 显示 UITableViewCell 然后可以展开以显示更多数据

> ID：13577760
> 
> 赞同：1
> 
> 时间：2012-11-27T05:11:55.167
> 
> 标签：objective-c, ios, animation, uitableview

我有一个 UITableViewCell，它目前很混乱，并且一次在屏幕上显示了太多信息。我想做一个按钮，当按下时，一个小视图将向下滑动并显示剩余信息，然后再次按下时它将滑回原始大小。我想知道我如何去做这样的事情。我对这样做一无所知，所以在向我指出某个方向时请具体说明。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T06:03:30.690

您是否想要表格视图中所有单元格的单个按钮，或者您想在每个单元格上添加按钮作为子视图

1.如果你想在每个单元格上添加按钮作为子视图

a) 添加标签值等于的按钮，`indexPath.row`并将目标设置为每个按钮的单一方法。

前任

```
 -(void)infoButonTapped:(UIButton *)sender; 
```

现在单击按钮找到按钮的标记值并从用于填充`UITableViewCell`s 的数组中获取信息。

b) 现在创建一个 infoview 并在其上添加 textview 并将 info 设置为 text view 的 text prop 并使用`UIView`Animation 添加 infoview 作为 view 的子视图并在下次单击时隐藏

您可以在 .h 文件中使用布尔变量来了解隐藏或显示 infoView，或者您可以检查 infoview 是否具有超级视图，然后您必须隐藏 infoview 否则将 infoview 添加为 self.view 的子视图。

1.  如果您想要所有 Cell 的通用按钮

a) 现在单击按钮获取`indexPath`使用 tableview 方法的 tableview 的选定单元格

```
- (NSIndexPath *)indexPathForSelectedRow; 
```

此方法要么返回所选单元格的索引路径，要么返回 nil，以防未选择单元格

使用 indexpath 从数组中获取信息，并将 infoview 添加为子视图以使用上述步骤 1.b 进行查看。

您还可以通过 tableview 的方法获取所选行的矩形，用于设置信息视图的坐标

```
- (CGRect)rectForRowAtIndexPath:(NSIndexPath *)indexPath; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T05:45:03.940

In this case, you better use the following method: -

```
(void)reloadRowsAtIndexPaths:(NSArray *)indexPaths withRowAnimation:(UITableViewRowAnimation)animation{
} 
```

Make a call to above method in your `UITableView` `didselectRowAtIndexPath` method.

More explanation is given in below link

> [UITableViewCell expand and collapse](https://stackoverflow.com/questions/10985746/uitableviewcell-expand-and-collapse)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T07:01:32.653

这可能会帮助您[显示隐藏表格](https://developer.apple.com/library/ios/#samplecode/TableViewUpdates/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010139)

或者您可以使用 BOOL 作为单元格的属性并根据 bool 隐藏 UITableViewCell 的子视图也调整单元格的框架。

# ios - 无需登录即可从 Instagram 帐户获取公共照片

> ID：13577761
> 
> 赞同：2
> 
> 时间：2012-11-27T05:11:57.233
> 
> 标签：ios, instagram

我想在不登录的情况下从我的 Instagram 帐户中获取所有照片或公开照片。

Instagram 是否提供了 API 来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T19:18:09.883

抱歉不行。Instagram API 需要身份验证才能检索某些帐户图片。查看 Instagram 开发者网站上的[API 控制台](http://instagram.com/developer/api-console/)，了解哪些方法需要身份验证，哪些不需要。我知道你可以检索标签、热门图片和搜索用户。祝你好运！

# java - hdfs中的文件路径

> ID：13577767
> 
> 赞同：10
> 
> 时间：2012-11-27T05:12:52.577
> 
> 标签：java, hadoop, amazon-ec2, mapreduce, amazon-emr

我想从 Hadoop 文件系统中读取文件。

为了实现文件的正确路径，我需要`hdfs`.

所以最后我的文件路径看起来像

```
Path path = new Path("hdfs://123.23.12.4344:9000/user/filename.txt") 
```

现在我想知道提取 HostName = "123.23.12.4344" & port: 9000？

基本上，我想访问 Amazon EMR 上的文件系统，但是，当我使用

```
文件系统 fs = FileSystem.get(getConf());
```

我明白了

```

当您应该调用 FileSystem.get(uri, conf) 来获取支持您的路径的文件系统时，您可能会调用 FileSystem.get(conf)

```

所以我决定使用URI。（我必须使用 URI）但我不确定如何访问 URI。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-27T06:48:52.203

您可以使用这两种方法中的任何一种来解决您的错误。

**1.**

```
String infile = "file.txt";
Path ofile = new Path(infile);
FileSystem fs = ofile.getFileSystem(getConf()); 
```

**2.**

```
Configuration conf = getConf();
System.out.println("fs.default.name : - " + conf.get("fs.default.name"));
// It prints uri  as : hdfs://10.214.15.165:9000 or something
String uri = conf.get("fs.default.name");
FileSystem fs = FileSystem.get(uri,getConf()); 
```

# java - 需要有关在 JTextPane 上绘图的帮助

> ID：13577768
> 
> 赞同：2
> 
> 时间：2012-11-27T05:13:00.143
> 
> 标签：java, swing

我正在使用 JTextPane 和 JButton

如果我单击按钮，我希望 JTextPane 中的每个字符下面都有一个点

![例如](../Images/5bf629c53745b3ee80b1ed87dfd7729b.png)

有没有办法做到这一点？

最大的问题是如何在每个字符下添加点:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T06:13:01.073

[http://java-sl.com/tip_colored_strikethrough.html](http://java-sl.com/tip_colored_strikethrough.html)你可以使用彩色删除线的例子。

您所需要的只是在字母下画线。只需设置`Stroke`为您的`Graphics2D`实例。（见`BasicStroke`和破折号模式）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T05:30:16.537

您可以使用[`javax.swing.text.DefaultHighlighter`](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/DefaultHighlighter.html), 它处理文本组件的字符间距，以便在该组件上进行背景绘制。

```
public class DotHighlighter extends DefaultHighlighter {
    // implementation
} 
```

实现自定义荧光笔的工作量适中，但[这里有一个很好](http://www.java2s.com/Code/Java/Swing-JFC/JTextPaneHighlightExample.htm)的下划线荧光笔实现代码示例；你应该能够修改它来画点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T05:21:28.020

您使用的是[等宽字体](http://en.wikipedia.org/wiki/Monospaced_font)吗？如果是这样，则可以创建一个新标签并显示一个仅由句点组成的字符串（与原始标签中的字符串长度相同），并显示该标签比第一个标签低一点。

IE，如果你的标签上写着`2446`，那么你可以制作一个低 5 或 10 像素的第二个标签，上面写着`....`。

同样，这仅适用于等宽字体 - 对于任何其他字体，它仍然是可能的，但它会涉及更复杂的解决方案（循环遍历每个字符，找到它的位置，然后设法在它下面显示一个点） ， 我相信。

# sed - 从 find 创建符号链接

> ID：13577769
> 
> 赞同：6
> 
> 时间：2012-11-27T05:13:15.197
> 
> 标签：sed, find

我正在尝试从 find 命令的结果创建一个符号链接（软链接）。我正在使用 sed 删除文件名前面的 ./ 。我这样做是为了将文件名粘贴到将保存链接的路径的末尾。我正在使用 Ubuntu Server 8.04 来解决这个问题。

我从这篇文章中学到了，这是解决我的问题的一种方法，但并不完全-

[如何在 LINUX 的另一个目录中选择性地创建指向特定文件的符号链接？](https://stackoverflow.com/questions/10888105/how-do-i-selectively-create-symbolic-links-to-specific-files-in-another-director)

但是，生成的文件名不起作用，所以我开始尝试学习 awk，然后决定使用 sed。

我正在使用单行循环来完成此操作。问题是循环的结构是分隔文件名，为文件名中的每个单词创建一个链接。有很多文件，我想通过每个链接获取它链接到的文件的文件名来自动化这个过程。

我对基本的 bash 命令很熟悉，但我远非命令行专家。我从 ls 和 awk 开始，然后转向 find 和 sed。我的 sed 语法可能会更好，但我在两天内就学会了这一点，现在我有点卡住了。

对于 t`find -type f -name "*txt*" | sed -e 's/.//' -e 's$/$$'; do echo ln -s $t ../folder2/$t;`完成

任何帮助或提示将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-09-24T21:23:35.477

更轻松：

转到您要在其中包含文件的文件夹并执行以下操作：

```
find /path/with/files -type f -name "*txt*" -exec ln -s {} . ';' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T05:29:27.313

像这样执行你的 for 循环：

```
(IFS=$'\n'; for t in `find -type f -name "*txt*" | sed 's|.*/||'`; do ln -s $t ../folder2/$t; done) 
```

通过将 IFS 设置为仅换行符，您应该能够读取整个文件名而不会在空格处拆分。

括号是为了确保循环在子 shell 中执行，并且当前 shell 的 IFS 不会改变。

# python - 如何正确地将事件绑定到我的按钮？我的按钮似乎在单击之前执行了该功能

> ID：13577770
> 
> 赞同：0
> 
> 时间：2012-11-27T05:13:16.657
> 
> 标签：python, tkinter, mouseevent

我在网上看示例代码，好像我做的和他们一模一样。但是该事件似乎会在 ui 加载后立即加载。我究竟做错了什么？

从下面的代码中，加载 ui 时单击功能不会正确加载。但是当我单击按钮时，它会抛出：

```
Exception in Tkinter callback
Traceback (most recent call last):
  File "C:\Python27\lib\lib-tk\Tkinter.py", line 1410, in __call__
    return self.func(*args)
TypeError: clicky() takes no arguments (1 given)

class LogIn:
    def __init__(self):
        self.root = Tk();
        self.root.title("480 - Chat Project Login");
        self.root.geometry("275x125");
        self.username = Label(self.root, text="Username: ");
        self.username.pack(side=LEFT);
        self.username.place(x=40, y=20);
        self.u_entry = Entry(self.root, width=20);
        self.u_entry.pack(side=RIGHT, ipady=4, ipadx=4);
        self.u_entry.place(x=110, y=20);
        self.password= Label(self.root, text="Password: ");
        self.password.pack(side=LEFT);
        self.password.place(x=40, y=50);
        self.p_entry = Entry(self.root, width=20);
        self.p_entry.pack(side=RIGHT, ipady=4, ipadx=4);
        self.p_entry.place(x=110, y=50);
        self.button = Button(text="Send", width=8);
        self.button.pack(side=RIGHT, ipady=4, ipadx=4);
        self.button.place(x=168, y=80);
        self.button.bind("<Button-1>", clicky);
        self.root.mainloop();

def clicky():
    print "hello";

if __name__ == "__main__":
    LogIn();
#    Client(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T05:17:29.153

你需要`self.button = Button(text="Send",width=8,command=clicky)`.

`command`通过 注册的回调和通过 注册的回调是有区别的`bind`。使用`command`，回调不会传递任何其他参数。使用`bind`，回调会传递一个事件对象。

* * *

此外，如果不清楚，请注意`command`特定于`Button`对象，而`bind`可以应用于任何 Tkinter 小部件。

# php - firephp 输出中的彩色圆点是什么意思？

> ID：13577773
> 
> 赞同：3
> 
> 时间：2012-11-27T05:13:23.090
> 
> 标签：php, debugging, firephp

我见过绿色、橙色和灰色的点，它们似乎与变量类型不对应……有什么想法吗？

我在常见问题解答等中没有找到任何提及它们：[http ://www.firephp.org/Wiki/Reference/FAQ](http://www.firephp.org/Wiki/Reference/FAQ)

![firephp 输出的开头，左侧显示点](../Images/3945f9557caa67475f0485b0b14ee48d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T13:24:55.107

正如评论中的回答：这对我来说看起来像可见性指示器，在[changelog](http://www.firephp.org/Wiki/Development/Release02)中提到。

# compiler-errors - 我的部分产品生成器出了什么问题

> ID：13577780
> 
> 赞同：0
> 
> 时间：2012-11-27T05:14:29.690
> 
> 标签：compiler-errors, vhdl

我正在尝试为部分产品生成器编写 VHDL 代码。代码如下：

```
library IEEE;
use IEEE.std_logic_1164.all;
use IEEE.std_logic_signed.all;
use ieee.numeric_std.all;
entity boothencoder_ppg is
port(Y: in std_logic_vector(53 downto 1);
     X: in std_logic_vector(53 downto 1);
     PPG: out std_logic_vector(53 downto 1)
     );
end boothencoder_ppg;
architecture behavioral of boothencoder_ppg is
signal U, SFT, W, M, A: std_logic;
    begin
    for m in 1 to 53 loop
    U = Y(m+1) xnor Y(m);
    SFT = Y(m-1) xnor Y(m);
    W = U and SFT;
    M = SFT? X(m-1) : X(m);
    A = M xor Y(m+1);
    PPG = A nor W;
    end loop;
end behavioral; 
```

我在循环中的所有行中都出现错误。也许我错误地实现了循环？任何帮助都会很棒。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T08:11:59.420

VHDL 中的信号赋值运算符写为：

```
a <= b; 
```

此外，您需要将您`loop`的 a包装起来`process`或使用一个`for...generate`构造而不是 a `for...loop`，它是一个顺序语句。

# android - 监听 Android 发送的短信的变化而不是监听内容的变化：//短信

> ID：13577782
> 
> 赞同：0
> 
> 时间：2012-11-27T05:14:37.613
> 
> 标签：android, sms

我正在研究监视从设备发送的短信的可能性。

从阅读中，我发现其中一种方法是通过监视 content://sms 的变化。此方法按预期工作。

但是，通过实验发现，有些发送的短信没有自动保存在数据库中，导致上述方法无法使用。

有没有其他方法或示例可以查看，例如使用`android.provider.Telephony.SMS_SENT`?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T08:05:51.837

如果 android.provider.Telephony.SMS_SENT 是正确的意图，您应该能够设置类似于以下的广播接收器：

```
<receiver android:name="com.yourpackage.SomeClass"
    android:enabled="true">
  <intent-filter>
    <action android:name="android.provider.Telephony.SMS_SENT" />
  </intent-filter>
</receiver> 
```

编辑：在上面搜索了更多内容后可能不起作用，看起来可能没有做你想做的事情的好方法，请参阅[此](https://stackoverflow.com/questions/4116330/what-is-the-android-sent-sms-intent)以获得更多讨论。

# jquery-ui - 任何 jstree 插件可以实现更多定制和更好的性能？

> ID：13577785
> 
> 赞同：0
> 
> 时间：2012-11-27T05:14:43.900
> 
> 标签：jquery-ui, jstree

在我的网络应用程序中，我需要使用 jstree 结构，所以我研究了那个 jstree 插件，但我没有得到正确的插件，

我的要求是，如果我填写并提交表格，将创建第一个父节点，如果选择父节点添加子节点......

自定义排序顺序，拖放。

建议最好的插件，如果有的话，

```
 My question is whether there is any plugin best suits me or i may have to write new one? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T07:05:12.163

`jsTree 1.0-rc3`这个插件工作正常，它是开源的。

**文档**：http: [//jstree.com/](http://jstree.com/)

# android - Windows 8 - 运行 Eclipse（未找到 Java VM）

> ID：13577787
> 
> 赞同：8
> 
> 时间：2012-11-27T05:15:02.940
> 
> 标签：android, eclipse, windows-8, java

我刚刚下载了 Android 开发者工具包。我开始按照设置说明进行操作，并将文件提取到新位置（“开发”），正如它所说的那样。我尝试按照指示运行 Eclipse 应用程序，但弹出一个窗口说；

> Java 运行时环境 (JRT) 或 Java 开发工具包 (JDK) 必须可用才能运行 Eclipse。搜索以下位置后没有找到 Java 虚拟机：C:.........\Development\adt-bundle-windows\eclipse\jre\bin\javaw.exe javaw.exe in your current PATH"

我尝试了兼容性故障排除程序，它无法检测到某件事，是否采取了正确的行动。我查看了stackoverflow并尝试了一些没有改变的建议。我查看了 windows 站点和 android 站点，似乎没有任何区别，好或坏（好吧，我希望没有坏）。

我真的在 10 天前拿到了这台笔记本电脑，所有程序都是全新的，没有更新或重新安装等。

我正在运行 64 位的 Windows 8，这是我在下载 ADT Bundle 时选择的。

* * *

我下载了错误的java文件。为了解决问题，我去了；

[http://www.oracle.com/technetwork/java/javase/downloads/jdk7u7-downloads-1836413.html](http://www.oracle.com/technetwork/java/javase/downloads/jdk7u7-downloads-1836413.html)

并接受条款，然后下载我必须注册的相应文件；

Windows x64 90 MB jdk-7u7-windows-x64.exe

它在不更改任何 PATH 的情况下工作。

谢谢..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T05:20:09.743

首先下载 jdk(java development kit) 并安装。jdk 包括 jre（java 运行时环境）。也可以单独安装jre。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T19:23:22.907

谢谢它工作。只需在 PATH 控制面板中添加 C:\Program Files\Java\jdk1.7.0\bin 1\. 系统 2\. 高级设置 3\. 高级 4\. 环境变量 5\. 系统变量组 6\. 在列表中查找 PATH 7\. 编辑8.添加你的C:\Program Files\Java\jdk1.7.0\bin jdk安装路径并保存

请记住用 ; 分隔值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T05:31:33.277

您必须首先从 java.oracle.com 下载 JDK 或 JRE，并将安装文件夹添加到可用的 PATH 系统中。（控制面板 -- 系统 -- 高级设置 -- 高级 -- 环境）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-03T03:57:04.573

转到以下页面并在[java.com](http://www.java.com/en/download/windows_ie.jsp)上下载可执行文件 该可执行文件会安装最新的 JAVA 虚拟机。

注意：仅适用于 Windows 安装程序知道您当前的 Windows 版本。

# c# - 从文件读取错误 - 编码问题

> ID：13577791
> 
> 赞同：1
> 
> 时间：2012-11-27T05:15:18.223
> 
> 标签：c#, csv, encoding

**我正在阅读从MS Excel**创建的 CSV 文件。当我在记事本中打开它时，它看起来不错，但是在记事本++中，我将编码从`ANSI`to更改为，`UTF8`并且出现了一些未打印的字符。

特别**是 xFF**。-（十六进制值）

在我的 C# 应用程序中，这个字符在读取文件时会导致问题，所以有什么方法可以`String.replace('xFF', ' ');`解决这个问题吗？

# 更新

我在 SO 上找到了这个链接，事实证明这是我问题的答案，但不是我的问题。 [关联](https://stackoverflow.com/questions/4455218/remove-specific-character-from-a-string-based-on-hex-value-c-sharp)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T05:18:31.800

而不是[String.Replace](http://msdn.microsoft.com/en-us/library/fk49wtc1.aspx)，在读取文件时指定编码。

例子

```
File.ReadAllText("test.csv",System.Text.UTF8Encoding) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T05:36:12.997

猜猜你的 unicode 表示是错误的。试试这个

```
string foo = "foo\xff";
foo.Replace('\xff',' '); 
```

# xcode - 是 Xcode 的“向后删除单词”坏了还是我疯了？

> ID：13577794
> 
> 赞同：5
> 
> 时间：2012-11-27T05:15:41.767
> 
> 标签：xcode, keyboard, shortcuts

首先，这种类型的功能在 OSX 的其他文本编辑器中可以正常工作。

在 Xcode 中，大多数情况下，“向后删除单词”会正确删除前面的“单词”。它“中断”的地方是您要删除的单词是一行中的第一个单词。Xcode 将删除该单词和上一行中的前一个单词。如下图所示：

![Xcode 不仅会删除第 2 行的 //，还会删除前一行的 1](../Images/b530aa7ff3a49c9deb0fadb03a1dcb88.png)

以绿色突出显示的是被一个“向后删除单词”命令删除的文本。Xcode 不仅会删除第 2 行的“//”，还会删除前一行的“1”

我也尝试过“向后删除表达式”和“向后删除子词”，它们没有任何区别。

我对“向左移动单词扩展选择”有同样的问题。

我在 OSX 10.7.5 和 Xcode 4.5.2

# security - 是否应该对用户隐藏 OAuth 1.0 请求机密？

> ID：13577795
> 
> 赞同：1
> 
> 时间：2012-11-27T05:15:43.207
> 
> 标签：security, oauth, pki

> **可能重复：**
> [为什么 OAuth 同时提供访问令牌和访问令牌机密？为什么不只是一个值？](https://stackoverflow.com/questions/2740559/why-does-oauth-provide-both-an-access-token-and-an-access-token-secret-why-not)

我对为什么 OAuth 1.0 请求令牌被分成密钥和秘密感到困惑。我无法弄清楚消费者向用户透露秘密以及密钥会导致哪些攻击向量成为可能。中间人仍然没有消费者秘密，因此无法代表消费者伪造任何请求。此外，理论上，任何能够查看请求令牌秘密的中间人也有能力伪造用户的秘密，这样即使消费者对用户隐藏秘密，MITM 也会能够冒充用户并造成同样的损害。

似乎我在这里遗漏了一些东西......向用户隐藏秘密一定有某种优势，否则为什么甚至首先要有一个“秘密”？它是否与保持 OAuth 请求签名更难伪造有关？

# python - 使用python将向量值转换为矩阵的对角线

> ID：13577798
> 
> 赞同：-1
> 
> 时间：2012-11-27T05:15:59.470
> 
> 标签：python

如何从向量中获取值作为矩阵中对角线的值？我正在使用python。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T05:51:52.180

这是一个可以做到的列表理解：

```
[[v[i] if i==j else 0 for i in range(len(v))] for j in range(len(v))] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T05:25:54.810

如果您只想要一个列表列表来制作矩阵，例如：

```
values = [1,2,3]
matrix =[[1 0 0]
         [0 2 0]
         [0 0 3]] 
```

那么下面的代码应该可以工作

```
values = [1,2,3]
matrix=[]
size = len(values)
for i in range(size):
  tmp = []
  for j in range(size):
    if i == j:
      tmp.append(values[i])
    else:
      tmp.append(0)
  matrix.append(tmp)
print(matrix) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T05:22:23.653

你的意思是像：

```
vec = [1,2,3,4]
->
mat = [[1,0,0,0],
       [0,2,0,0],
       [0,0,3,0],
       [0,0,0,4]] 
```

那么一般的想法是使用计数器循环遍历 vec，并在生成该列表 vec[i] 的第 i 个元素后将 [0,0,0,0] 附加到 mat。

# jquery - ASP.NET WEBAPI 文件上传，IE9 的问题

> ID：13577799
> 
> 赞同：4
> 
> 时间：2012-11-27T05:16:19.243
> 
> 标签：jquery, internet-explorer-9, asp.net-web-api, jquery-forms-plugin, asyncfileupload

我使用 ASP.NET WEBAPI 创建了一个文件上传方法，代码如下：

```
[DataContract]
    public class FileDesc
    {
        [DataMember]
        public string name { get; set; }      

        [DataMember]
        public string url { get; set; }

        [DataMember]
        public long size { get; set; }

        [DataMember]
        public string UniqueFileName { get; set; }

        [DataMember]
        public int id { get; set; }

        [DataMember]
        public DateTime modifiedon { get; set; }

        [DataMember]
        public string description { get; set; }

        public FileDesc(string rootUrl, FileInfo f,int pId, string aFileName)
        {
            id = pId;
            name = aFileName;
            UniqueFileName = f.Name;
            url = rootUrl + "/Files/" + f.Name;
            size = f.Length / 1024;
            modifiedon = f.LastWriteTime;
            description = aFileName;
        }
    }

    public class CustomMultipartFormDataStreamProvider : MultipartFormDataStreamProvider
    {
        //string uniqueFileName = string.Empty;

        public string UniqueFileName
        {
            get;
            set;
        }
        public string ActualFileName
        {
            get;
            set;
        }

        public int TaskID { get; set; }
        private int UserID { get; set; }
        public CustomMultipartFormDataStreamProvider(string path, int ptaskID, int pUserID)
            : base(path)
        {
            TaskID = ptaskID;
            UserID = pUserID;
        }

        public override string GetLocalFileName(System.Net.Http.Headers.HttpContentHeaders headers)
        {
            var name = !string.IsNullOrWhiteSpace(headers.ContentDisposition.FileName) ? headers.ContentDisposition.FileName : "NoName";

            ActualFileName = name.Replace("\"", string.Empty);

            ActualFileName = Path.GetFileName(ActualFileName);

            UniqueFileName = Guid.NewGuid().ToString() + Path.GetExtension(ActualFileName);

            int id = SaveFileInfoIntoDatabase(ActualFileName, TaskID, UniqueFileName, UserID);

            headers.Add("ActualFileName", ActualFileName);
            headers.Add("id", id.ToString());

            return UniqueFileName;

        }   
    }
    [Authorize]
    public class FileUploadController : ApiController
    {

        private string StorageRoot
        {
            get { return Path.Combine(System.Web.HttpContext.Current.Server.MapPath("~/Files/")); } //Path should! always end with '/'
        }

        public Task<IEnumerable<FileDesc>> Post(int id)        
        {

            string folderName = "Files";
            string PATH = HttpContext.Current.Server.MapPath("~/" + folderName);
            string rootUrl = Request.RequestUri.AbsoluteUri.Replace(Request.RequestUri.AbsolutePath, String.Empty);
            HttpContext.Current.Response.BufferOutput = true;
            HttpContext.Current.Response.Buffer = true;
            HttpContext.Current.Response.ContentType = "text/html";

            if (Request.Content.IsMimeMultipartContent())
            {
                var streamProvider = new CustomMultipartFormDataStreamProvider(PATH, id, BEL_PMS.Utilities.FormsAuthenticationUtil.GetCurrentUserID);
                var task = Request.Content.ReadAsMultipartAsync(streamProvider).ContinueWith<IEnumerable<FileDesc>>(t =>
                {

                    if (t.IsFaulted || t.IsCanceled)
                    {
                        throw new HttpResponseException(HttpStatusCode.InternalServerError);
                    }

                    var fileInfo = streamProvider.FileData.Select(i =>
                    {

                        var info = new FileInfo(i.LocalFileName);
                        int FileID = Convert.ToInt32((from h in i.Headers where h.Key =="id" select h.Value.First()).FirstOrDefault());
                        string ActualFileName = (from h in i.Headers where h.Key =="ActualFileName" select h.Value.First()).FirstOrDefault();
                        return new FileDesc(rootUrl, info, FileID, ActualFileName);
                    });
                    return fileInfo;
                });

                //return new HttpResponseMessage { StatusCode = System.Net.HttpStatusCode.OK, Content = task};               
                return task;
            }
            else
            {
                throw new HttpResponseException(Request.CreateResponse(HttpStatusCode.NotAcceptable, "This request is not properly formatted"));
            }

        }
} 
```

并使用 jquery.form.js 插件通过 Ajax 上传文件，代码如下：

```
$('#frmmultiupload').ajaxForm({
            success: OnUploadedSuccessfully,            
            error: function (x, y) {
                mesg('Error occured while file upload! Please make sure that total file size is less than 4 MB and try again.',
                    'error', 'File upload failed.');
            }
        }); 
```

一切正常文件，但它在 IE9 中产生问题

IE 说“你想从本地主机打开还是保存？”

![在此处输入图像描述](../Images/953f3f4675367a05a737b2e7fc38a9f4.png) 下面是网络跟踪： 我在[这里](https://stackoverflow.com/questions/5388893/ie9-json-data-do-you-want-to-open-or-save-this-file)![在此处输入图像描述](../Images/22f738321e464f9109d4c0233f5ca70a.png) 发现了一些提示，不知道如何转换为.`Task<IEnumerable<FileDesc>>``Task<HttpResponseMessage>`

我在 ajaxSetup 中指定了 30 秒的超时时间，所以在 30 秒后它会产生错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T17:20:28.873

```
var task = Request.Content.ReadAsMultipartAsync(streamProvider).ContinueWith<HttpResponseMessage>(t =>
{
    if (t.IsFaulted || t.IsCanceled)
    {
        throw new HttpResponseException(HttpStatusCode.InternalServerError);
    }

    var fileInfo = streamProvider.FileData.Select(i =>
    {

        var info = new FileInfo(i.LocalFileName);
        int FileID = Convert.ToInt32((from h in i.Headers where h.Key =="id" select h.Value.First()).FirstOrDefault());
        string ActualFileName = (from h in i.Headers where h.Key =="ActualFileName" select h.Value.First()).FirstOrDefault();
        return new FileDesc(rootUrl, info, FileID, ActualFileName);
    });
    var response = Request.CreateResponse(HttpStatusCode.OK, fileInfo);
    response.Content.Headers.ContentType = new MediaTypeHeaderValue("text/html");
    return response;
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T05:41:09.753

IE 9 不支持新的 XMLHttpRequest Level 2（仅 IE10+），这意味着 jquery.form.js 插件使用 iframe 回退。阅读：[http](http://www.malsup.com/jquery/form/#file-upload) ://www.malsup.com/jquery/form/#file-upload由 jquery.form.js 插件的创建者发布。他在那里指出，如果返回数据是 JSON 或 Script，IE 将提示下载。如果您返回 JSON，Jou 必须将内容类型标头强制为“text/html”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T08:00:02.527

我也遇到过同样的问题，这个问题只会出现在 IE 中，当你提交一个表单并且它引用的 WebApi 函数返回一些值时。我们还没有一个理想的解决这个问题的方法。

在我们的例子中，我们所做的是将函数拆分为两个调用。第一个函数将详细信息保存在数据库中（假设上传成功），在回调中我们将提交表单以上传文件。webapi 上传函数的返回类型为`void`. 如果上传失败，我们将在错误回调中处理，然后从数据库中删除相应的条目。

我知道这根本不是一个好的解决方案，但我们已经同意了。

也检查这个[问题](https://stackoverflow.com/questions/8151138/ie-jquery-form-multipart-json-response-ie-tries-to-download-response)。

# directory - DOS 从 find 命令中提取目录

> ID：13577802
> 
> 赞同：1
> 
> 时间：2012-11-27T05:16:32.253
> 
> 标签：directory, find, dos

我正在编写一个dos脚本，我想获取一个已知文件的路径，以便可以在脚本中使用该路径来更改到该目录以使用指定的文件并将日志文件输出到同一目录。

该脚本将一些目录添加到路径并更改为使用同一目录中的输入文件执行命令所需的目录。该命令生成许多文件，这些文件保存在同一目录中。

这是我到目前为止所拥有的

```
@ECHO OFF

:: Check argument count
set argC=0
for %%x in (%*) do Set /A argC+=1

IF %argC% LSS 3 (echo WARNING must include the parent Directory, the filename and the timestep for the simulation)

:: Assign meaningfull names to the input arguments
set parentDirectory=%1
set filename=%2
set scenarioTimestep=%3

:: Check validaty of the input arguments
:: TODO: implement check for directory, filename exists, and possibly limits to the timestep 
IF "%parentDirectory%"=="" (
    set parentDirectory=P:Parent\Directory
) 
IF "%filename%"=="" (
    set filename=ship2.xmf
) 
IF "%scenarioTimestep%"=="" (
    set scenarioTimestep=0.1
) 

echo parent Directory: %parentDirectory%
echo filename: %filename%
echo timestep: %scenarioTimestep%

set MSTNFYURI=file:mst.log
set MSTNFYLEVEL=debug
set MSTNFYFLUSH=1

set XSFNFYURI=file:xsf.log
set XSFNFYLEVEL=debug
set XSFNFYFLUSH=1

set parentNFYURI=file:parent.log
set parentNFYLEVEL=debug
set parentNFYFLUSH=1

:: Add the parent directories to the path
set PATH=%parentDirectory%\bin\;%parentDirectory%\bin\ext\;%parentDirectory%\bin\gtkmm\;%parentDirectory%\bin\osg\;%PATH%

:: Change to the target directoy
set tagetDirectory=%parentDirectory%\examples\testing_inputs
cd %tagetDirectory%

echo command will be: ft -c %filename% -T %scenarioTimestep%
::ft -c %filename% -T %scenarioTimestep%

@ECHO ON 
```

我想要做的不是使用硬编码的目录路径examples\testing_inputs for targetDirectoy，而是希望能够搜索提供的文件名并将目录更改为该路径。

我知道我可以使用“dir filename.ext /s”获取显示的信息

DOS 输出

```
Volume in drive C is OS
Volume Serial Number is XXXX-XXXX

Directory of C:\Users\Me\parent\examples\testing_input

15/11/2012   02:51 PM    <size> filename
...
... 
```

如何从该信息中提取目录以在脚本中使用？另外，如果有多个同名文件，如何根据文件的时间戳选择路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T18:03:24.823

```
for /f %%F in ('dir /B /S /A:-D  filename.ext ') do set file_path=%%F
pushd  %file_path%\..
dir_path=%CD%
popd
echo %file_path%
echo %dir_path% 
```

这是你要找的吗？

编辑：检查 dbenham 的评论。

# objective-c - asihttprequest 第一次后自动登录

> ID：13577805
> 
> 赞同：1
> 
> 时间：2012-11-27T05:17:00.583
> 
> 标签：objective-c, ios, xcode, authentication, asihttprequest

我正在使用 asihttprequest 库向 php Web 服务发出异步请求。对于登录，我使用的是 php 登录 Web 服务。我的问题是每次启动应用程序时用户都必须登录。有什么方法可以检查用户之前是否登录过，如果是，那么他下次应该自动登录。我们可以将开关用于“保持登录”目的（打开“保持登录”，关闭“下次需要登录”）。

我认为默认必须是用户在使用应用程序时不应该登录......在第一次之后。也许当他们第一次登录时，我们注意到默认情况下他们已经登录，除非他们选中了他们每次使用时都想登录的框或开关？如果他们选择该选项并决定稍后更改它以保持打开状态，他们的用户应该有一个可以更改其偏好的位置。

我正在使用此代码进行登录：

```
-(void)callWebService
{

     NSURL *url = [NSURL URLWithString:@"My_Url"];
    ASIFormDataRequest *request=[ASIFormDataRequest requestWithURL:url];

    [request setPostValue:emailField.text forKey:@"email"];
    [request setPostValue:pwdField.text forKey:@"pass"];

    [request setDelegate:self];
    [request setTimeOutSeconds:100];
    [request setUseSessionPersistence:NO];
    [request setUseCookiePersistence:NO];
    [request startAsynchronous];

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T11:22:31.983

你应该看到这篇文章

[iOS：如何在应用程序中存储用户名/密码？](https://stackoverflow.com/questions/6972092/ios-how-to-store-username-password-within-an-app)

然后在调用服务器之前，检查钥匙串中是否存在这些值。

# android - 是否可以在锁定屏幕开启时在 Android 上录制音频？

> ID：13577810
> 
> 赞同：1
> 
> 时间：2012-11-27T05:17:11.313
> 
> 标签：android, audio, mediarecorder

我正在编写一个录音机应用程序，我想知道是否可以在手机锁定屏幕时激活 MediaRecorder。如果是这样，这只是特殊许可的问题还是其他问题？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T05:53:50.400

you should try using **PowerManager** class with permission **android.permission.WAKE_LOCK**.

you can find more [Here.](http://developer.android.com/reference/android/os/PowerManager.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T06:15:11.933

对的，这是可能的。锁定屏幕不会影响应用程序中服务的工作。因此，如果您使用的是服务，那么您的录制将继续进行。但是，如果您的手机处于待机状态，则可能无法正常工作。在这种情况下，只需抓住一个唤醒锁来保持 CPU 处于活动状态并满足您的需求。但是，抓取唤醒锁会影响电池，因此您必须明智地使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-08-27T08:38:14.600

如今（Android 11 或更高版本），这应该不再可能：

> 注意：在运行 Android 9（API 级别 28）或更高版本的设备上，**后台运行的应用程序无法访问麦克风**。因此，您的应用应仅在其位于前台或在前台服务中包含 MediaRecorder 实例时才录制音频。

[1] [https://developer.android.com/guide/topics/media/mediarecorder](https://developer.android.com/guide/topics/media/mediarecorder)

> 限制对位置、摄像头和麦克风的访问
> 为了帮助保护用户隐私，Android 11（API 级别 30）对前台服务何时可以访问设备的位置、摄像头或麦克风进行了限制。当您的应用在后台运行时启动前台服务时，前台服务有以下限制：
> ...
> 前台服务**无法访问麦克风**或摄像头。

[2] [https://developer.android.com/guide/components/foreground-services](https://developer.android.com/guide/components/foreground-services)

# c++ - 我收到“字符串下标超出范围错误”。我不知道为什么

> ID：13577820
> 
> 赞同：2
> 
> 时间：2012-11-27T05:18:00.877
> 
> 标签：c++, string, function, for-loop

我搜索了该站点，但找不到解决问题的方法。我尝试进行细微的更改，但没有任何解决方法。我不断收到“字符串下标超出范围”错误。我不知道为什么。也许我是盲人，我在某处遗漏了一个小错误。现在我在这里请求帮助。

程序信息：该程序将输入名字和姓氏，对其进行验证并应用大小写转换。用户输入名字和姓氏后，它将清除屏幕并显示用户输入的姓名。然后它将输入产品评级，对其进行验证并应用案例转换。显示一个标题，后跟对应于 5 个产品值的条形图。

编辑：我想对帮助过我的人说声谢谢。我终于解决了这个问题，感谢你们。我不得不说这里有一个很棒的社区，反应非常好。我现在要去上课，但我会为将来可能有同样问题的人发布我更新的代码。再次非常感谢你们。

```
#include <iostream>
#include <string>

using namespace std;

void Name (string, string&, const int);
void Rating (string&, int[], const int);

void main()
{
    const int MAX_FIRST_NAME = 20;
    const int MAX_LAST_NAME  = 25;
    const int MAX_PRODUCTS   =  5;

    string  firstNameQuestion = "First Name";
    string  lastNameQuestion  = "Last  Name";

    string    firstName;
    string     lastName;
    string ratingString;

    int ratingInt [MAX_PRODUCTS];

    while (true)
    {
        Name (firstNameQuestion, firstName, MAX_FIRST_NAME);

        if (firstName == "Quit")
            break;

        Name (lastNameQuestion, lastName, MAX_LAST_NAME);

        if (lastName == "Quit")
            break;

        system ("cls");

        cout << "First Name: "  << firstName;
        cout << endl;
        cout << "Last  Name: "  << lastName;
        cout << endl;
        cout << endl;

        Rating (ratingString, ratingInt, MAX_PRODUCTS);
    }   
}

void Name (string question, string& answer, const int MAX)
{
    int count;

    do
    {
        cout << question << " (" << MAX << " chars max. type \"quit\" to stop):     ";
        getline (cin, answer);
    }
    while (answer.empty() || answer.length() > MAX);

    answer[0] = toupper (answer[0]);

    for (count = 1; count < answer.length(); count++)
        answer[count] = tolower ( answer[count] );
}

void Rating (string& ratingString, int ratingInt[], const int MAX)
{
    int  count;
    int    who;

    for (count = 0; count < MAX; count++)
    {
        do
        {
            cout << "Rating for product no." << count + 1 << " (A to E): ";
            cin  >> ratingString[count];
            ratingString[count] = toupper (ratingString[count]);
        }   
        while (ratingString.empty() || ratingString.length() > 1 ||     ratingString[count] > 'E');
    }

    for (who = 0; who < MAX; who++)
    {
        if (ratingString[who] == 'A')
            ratingInt[who] = 10;

        if (ratingString[who] == 'B')
            ratingInt[who] = 8;

        if (ratingString[who] == 'C')
            ratingInt[who] = 6;

        if (ratingString[who] == 'D')
            ratingInt[who] = 4;

        else 
            ratingInt[who] = 2;
    }

    cout << endl;
    cout << endl;
    cout << "Consumer satisfaction bar chart: ";
    cout << endl;

    for (count = 0; count > MAX; count++)
    {
        cout << endl;
        cout << "Product #" << count + 1 << "      ";

        for (who = 0; who > ratingInt[count]; who++)

            cout << "*";
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:04:14.053

45号线

```
Rating (ratingString, ratingInt, MAX_PRODUCTS); 
```

ratingString 为空。当它运行到 Line76

```
 cin  >> ratingString[count]; 
```

您正在引用边界外的索引。

这个编辑怎么样：

```
 char cc;
    cin  >> cc;
    ratingString.push_back(cc); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T05:21:41.307

我相信下面的循环，计数达到`MAX`

```
 for (count = 0; count < MAX; count++) 
```

然后再次在下面的循环中，您正在使用`count++`并且它超出了字符串`ratingString`长度。

```
 for (who = 0; who < MAX; count++) 
```

**要解决此问题，请使用更正索引+增量或检查字符串长度。**

```
 for (who = 0; who < MAX && who < ratingString.length(); who++) 
```

**最好将字符串长度检查放在使用字符串索引处的字符的所有循环中。**

# sql - Hibernate HyperSQL - JDBCExceptionReporter [WARN] 没有数据

> ID：13577827
> 
> 赞同：2
> 
> 时间：2012-11-27T05:18:39.853
> 
> 标签：sql, hibernate

我正在尝试在 Web 应用程序中使用 Hibernate 和 HyperSQL。

这是服务器启动时的日志。

```
2012-11-27 09:59:46 SessionFactoryImpl [INFO] building session factory
2012-11-27 09:59:46 SessionFactoryObjectFactory [INFO] Not binding factory to JNDI, no JNDI name configured
2012-11-27 09:59:46 SchemaExport [INFO] Running hbm2ddl schema export
2012-11-27 09:59:46 SchemaExport [INFO] exporting generated schema to database
2012-11-27 09:59:46 SchemaExport [INFO] Executing import script: /import.sql
2012-11-27 09:59:46 SchemaExport [INFO] schema export complete
2012-11-27 09:59:46 JDBCExceptionReporter [WARN] SQL Warning: -1100, SQLState: 02000
2012-11-27 09:59:46 JDBCExceptionReporter [WARN] no data 
```

我使用 import.sql 自动导入表和数据。当服务器启动/停止时，我创建/删除表并使用休眠创建/删除数据。

虽然这个 Web 应用程序运行良好，但我仍然很好奇服务器启动日志中的警告是什么意思。

有人可以为我解释以下警告日志吗？

```
2012-11-27 09:59:46 JDBCExceptionReporter [WARN] SQL Warning: -1100, SQLState: 02000
2012-11-27 09:59:46 JDBCExceptionReporter [WARN] no data 
```

非常感谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-01T19:42:36.727

抱歉回答晚了，但我也遇到了这个问题。问题与从事务中删除表有关

我避免这些警告的方法是将我的命令更改为：

```
TRUNCATE TABLE <table> RESTART IDENTITY AND COMMIT 
```

`AND COMMIT`立即提交截断。这使错误消失了。

# version-control - 具有多个相关组件的项目的最佳实践

> ID：13577830
> 
> 赞同：0
> 
> 时间：2012-11-27T05:19:08.773
> 
> 标签：version-control, bug-tracking

背景：我`jira`用于错误跟踪和`git`源代码控制。我有一个完整的端到端系统，包括一个 iOS 前端和一个提供 Web 服务和 GUI 的 Java/Tomcat 后端。现在，我有一个 git 存储库，其中包含所有软件和一个用于整个系统的 jira 项目跟踪问题。

现在该软件已上线，我发现正在对 iOS 应用程序或服务器进行更改，但通常不会同时更改两者。这两个组件的版本号有所不同。

这个项目可能为时已晚，但在未来：

*   我是否应该追求将*所有*相关组件放在单个源存储库中并使用单个错误跟踪项目进行跟踪的路径？或者
*   每个组件是否应该位于单独的存储库中并由单独的错误跟踪项目管理？

我可以看到这两种方法的优缺点，而且我还可以看到答案很容易是“视情况而定”。

你会向哪个方向倾斜，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T05:28:40.727

出于几个原因，我会选择不同的源存储库

1.  从事这两种工作的开发人员可能具有不同的技能组合。此外，您可能出于管理原因想要隔离谁看到什么。

2.  它们不应该在协议级别紧密联系 - 不同的版本需要交互。

3.  当你做另一个前端时，第一点变得更加重要

第二个原因是我的主要原因。

但是，我会使用一个常见的错误数据库。缺陷/功能可能需要在两端进行更改。此外，您极有可能遇到被认为存在于一个组件中但实际上最终在另一个组件中修复的错误。如果您尝试跨数据库迁移，信息将会丢失。我见过太多次了。

# sql - 查询中的动态别名

> ID：13577834
> 
> 赞同：2
> 
> 时间：2012-11-27T05:19:59.207
> 
> 标签：sql

我有这样的场景，用户输入一个月，输出是那个月的销售额，然后是接下来 12 个月的销售额，我也写了这个查询

```
select 
sum(decode(month ,to_char(add_months(to_date(&m,'mon'),0),'mon'), sales))   "&m" ,
sum(decode(month ,to_char(add_months(to_date(&m,'mon'),1),'mon'), sales))   "&m" ,
sum(decode(month ,to_char(add_months(to_date(&m,'mon'),2),'mon'), sales))   "&m" ,
sum(decode(month ,to_char(add_months(to_date(&m,'mon'),3),'mon'), sales))   "&m" ,
sum(decode(month ,to_char(add_months(to_date(&m,'mon'),4),'mon'), sales))   "&m" ,
sum(decode(month ,to_char(add_months(to_date(&m,'mon'),5),'mon'), sales))   "&m" ,
sum(decode(month ,to_char(add_months(to_date(&m,'mon'),6),'mon'), sales))   "&m" ,
sum(decode(month ,to_char(add_months(to_date(&m,'mon'),7),'mon'), sales))   "&m" ,
sum(decode(month ,to_char(add_months(to_date(&m,'mon'),8),'mon'), sales))   "&m" ,
sum(decode(month ,to_char(add_months(to_date(&m,'mon'),9),'mon'), sales))   "&m" ,
sum(decode(month ,to_char(add_months(to_date(&m,'mon'),10),'mon'), sales))  "&m" ,
sum(decode(month ,to_char(add_months(to_date(&m,'mon'),11),'mon'), sales))  "&m" ,
sum(decode(month ,to_char(add_months(to_date(&m,'mon'),12),'mon'), sales))  "&m" 
from sales 
```

`m`是用户输入月份我希望别名也动态变化所以如何操作列别名任何帮助thanx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T06:30:56.513

看起来您使用的不是 MS SQL，但这在概念上可能会有所帮助

借助以下文章：[t-sql select get all Months in a range of years](https://stackoverflow.com/questions/4181286/t-sql-select-get-all-months-within-a-range-of-years)

```
DECLARE @StartDate DATETIME,
        @EndDate   DATETIME,
        @Sql VARCHAR(max)
SELECT @StartDate = '2012-01-01',
        @EndDate   = '2012-12-01',
        @Sql = 'select'

;WITH
cteDates AS
(
    SELECT TOP (DATEDIFF(mm,@StartDate,@EndDate) + 1)
            MonthDate = DATEADD(mm,DATEDIFF(mm,0,@StartDate) + (ROW_NUMBER() OVER
                (ORDER BY (SELECT NULL)) -1),0)
    FROM sys.all_columns ac1
    CROSS JOIN sys.all_columns ac2
)

SELECT @SQL = @Sql + '
sum(decode(month ,to_char(add_months(to_date(''' +  DateName(month, MonthDate)  + ''',''mon''),' + CAST(MONTH(MonthDate) AS VARCHAR) + '),''mon''), sales))   "' + DateName(month, MonthDate) + '" ,'
FROM cteDates

SELECT @Sql = SUBSTRING(@Sql, 0, LEN(@Sql) -1) + '
from sales'
print @Sql

EXEC(@Sql) 
```

# count - 如何在单个查询中查找多个字段的计数？

> ID：13577841
> 
> 赞同：0
> 
> 时间：2012-11-27T05:21:00.043
> 
> 标签：count

我想从包含动物类型字段中的多少只狗和猫的单个表中查找。

如何在单个查询中查找多个字段的计数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T05:29:06.130

你可以做这样的事情。我假设您的表名为“Animals”，而您所指的动物类型字段名为“AnimalType”。

```
SELECT AnimalType, COUNT(AnimalType) 
FROM Animals 
WHERE AnimalType IN ('Cats','Dogs')
GROUP BY AnimalType 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T05:23:21.267

```
select type, count(*) from the_table group by type; 
```

或者如果你只想要猫和狗（但没有鸟）：

```
select type, count(*) from the_table 
where type in ('cat', 'dog') 
group by type; 
```

# iphone - 从 iPhone 中的服务 URL 获取图像？

> ID：13577843
> 
> 赞同：0
> 
> 时间：2012-11-27T05:21:09.433
> 
> 标签：iphone, xcode, uiimageview, uiimage

我必须从休息服务 url 中检索图像。但我没有单独的图像 URL（图像的路径）。我在 XML 文件中获取它。我解析了 XML 并将其存储在一个数组中。现在我不明白如何从中检索图像。我的数组如下所示：

```
 (
    {
    Image = "

    9j/4AAQSkZJRgABAQAAAQABAAD//gA7Q1JFQVRPUjogZ2QtanBlZyB2MS4wICh1c2luZyBJSkcgSlBFRyB2NjIpLCBxdWFsaXR5ID0gODAK/9sAQwAGBAUGBQQGBgUGBwcGCAoQCgoJCQoUDg8MEB
    cUGBgXFBYWGh0lHxobIxwWFiAsICMmJykqKRkfLTAtKDAlKCko/9sAQwEHBwcKCAoTCgoTKBoWGigoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgo/8AAEQgEKwZAAwEiAAIRAQMR
    Af/EAB8AAAEFAQEBAQEBAAAAAAAAAAABAgMEBQYHCAkKC//EALUQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RV
    VldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+v/EAB8BAAMBAQEBAQEBAQEAAAAAAAABAgMEBQYHCAkKC//EALURAAIBAgQEAwQHBQQEAAECdwABAgMRBAUhMQYSQVEHYXETIjKBCBRCkaGxwQkjM1LwFWJy0QoWJDThJfEXGBkaJicoKSo1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoKDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uLj5OXm5+jp6vLz9PX29/j5+v/aAAwDAQACEQMRAD8A9bDUu6qwenB6y
NCyGpQ1Vg9OD0XAsbqA9QlqAeaALOaXNQbqUPQInBpQagDU4NQBMDS5qHdShqAJ80uah3UoagCbNLmod1LupgS5pc1Fupd1AEtLUW6l3UASUtR7qN1MCXNFR7qXdQBJRTN1LmgB9LUe6l3UAPopu6jdQA8UU3dRuoEOxS0zNLmgB1LTM0bqAH0U3dRuoAdRTd1LmgB2KMU3NGaAHYoxTc0u6gBcUYpM0ZoAWikzRmgBcUUmaM0ALRSZpc0AGKKM0ZoAKKM0ZoAKKM0ZoAKKM0ZoAKKM0ZFACUUtBNABSUUUAFFFGaAA0lLRQMSkpaKQCUlLRSATFJS0UAJRS0lABSUtFACUlLRQA2jFLRQA0
ikxTqSgY002n02kMAKkUUwVIopoTJFFPApoFSAVRICnCgUtMAopRRQAUUUUAFJS0UAJRS0lIAooooAKSlpKAFpKKKACilpKACiii
gAooooASiiigAooooASilpKACkpaKAEpKU0UAJRRRQAlIaWikMSkpaKQDaKWkoASilNJQAlJSmigBtJTqSkMaaSnUhoGNNJTjSUgEFPWminCmA4U4UgpwpoQopRSCnUCFFOFNpwpgxRS0UuKYhhqNhUpqNhQBXcVVlq3IKqy1LGVyOaeopAMmrEceaEhNkZ4FR5JNW3i4pscGWq7E3GRoTU6Rmp44farkdvkdKdgK0MXNXYoulSRwY7VajjwKkYxI6mRBT
1WngYpgN2UhWpKaapCIyKSnGkqhCUUtJigQlFLSUAFFFFAC0lFFABRS0lABRiiigBKKWkoAKSlopgJSUtBoASiiigBKDRRQBHJ0rOuh1rSk6VnXXQ0MDJlHzGoWFTyj5jURrFlohccVBjmrDjioSOaBk9qOT9K2tNrGtepra02miWcptNOANSCNvSnbG9KmxdyIA04A1IEb0pQp9KLBcYM0vNSBT6UoU+lFguR804Zp+0+lGPaiwXGgmlyacF9qXHtRYLjQTS5NOx7UuPaiwCZNKGpQPalA9qLAIGpQ1LgUYosAbqdupMUuBQFwDU7NJijFAXF3Uu6kxRigLjt1LupuKMUBceDRupuKMUwuSbqN1MxS4oEP3UbqZilwaAH5pc0zFGDQA/dRupmDRzQA/dS7qZzRzQA/dRupnNHNAEm6jdTOaM0ASbqN1R0ZoAk3UbqjzRmgCTdRuqPNGaAJN1G6o80ZoAk3UbqZmkzQBLuo3VFmlzQBJuo3VHmjNAEu6jdUWaM0AS7qN1RZo3UAS7qN1RbqTdQBNuo3VDuozQBNuo3VDmjdQBNuo3VDuo3Uhku6jdUO6jdQBNuo3VDupN1AE26jdUO6jdQBNuo3VDuo3Ug
         //big array </Image>
        }
        ) 
```

我不明白这是来自服务的什么格式（字节数组或base64？）？如何在 tableViewCell 中从中检索图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T05:32:59.003

If this is base64 string then You can decode base64 string to NSData using [this](https://github.com/mikeho/QSUtilities) and you can access UIImage from NSData.

```
+ (NSData *)decodeBase64WithString:(NSString *)strBase64; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T05:47:00.790

This format is base64 then you should decode this string into data and get image. Use [nsdata+ base64 class](https://github.com/kgn/NSData-Base64) and import those class in your project.

Use `+ (NSData *)decodeBase64WithString:(NSString *)strBase64;` method in your code. call like this

```
 NSData *imageData = [NSData decodeBase64WithString:strBase64]; 
```

**Edit:**

```
 NSString *yourBase64String = [yourDictionary valueForKey:@"Image"];
 NSData *imageData = [NSData decodeBase64WithString:yourBase64String];
 UIImage * image = [UIImage imageWithData:imageData]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-29T00:38:23.113

可能是因为对 NSData+Base64 文件进行了修改，但现在的方法是 dataFromBase64String 而不是 decodeBase64WithString

# asp.net-mvc - MVC4：获取 Active Directory 用户指南

> ID：13577848
> 
> 赞同：3
> 
> 时间：2012-11-27T05:21:38.690
> 
> 标签：asp.net-mvc

一旦用户登录到 Windows 身份验证站点，我如何从用户那里获取他们的 Active Directory 用户 guid。

例如在一个动作中：

```
ViewBag.Message = User.Identity.GUID???? 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T05:50:43.697

You should check out the `System.DirectoryServices.AccountManagement` (S.DS.AM) namespace. Read all about it here:

*   [Managing Directory Security Principals in the .NET Framework 3.5](http://msdn.microsoft.com/en-us/magazine/cc135979.aspx)
*   [MSDN docs on System.DirectoryServices.AccountManagement](http://msdn.microsoft.com/en-us/library/system.directoryservices.accountmanagement.aspx)

Basically, you can define a domain context and easily find users and/or groups in AD:

```
// set up domain context
PrincipalContext ctx = new PrincipalContext(ContextType.Domain);

// find the current user
UserPrincipal user = UserPrincipal.Current;

if(user != null)
{
   // get guid
   var userGuid = user.Guid;
} 
```

The new S.DS.AM makes it really easy to play around with users and groups in AD!

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-27T23:11:55.283

```
 string userName = user.Identity.Name.Split('\\')[1];

            using (var oRoot = new DirectoryEntry(ConfigurationManager.AppSettings["LDAPDomain"], null, null, AuthenticationTypes.Secure))
            {
                using (var deSearch = new DirectorySearcher(oRoot))
                {
                    deSearch.Filter = string.Format("(&(sAMAccountName={0}))", userName);
                    SearchResult searchResult = deSearch.FindOne();
                    if (searchResult != null)
                    {
                        DirectoryEntry de = searchResult.GetDirectoryEntry();

                    }
                }
            } 
```

# python - 当别名为同一路径时，如何指定绝对路径 $ /usr/bin/python 与 $ python 有不同的结果？

> ID：13577850
> 
> 赞同：1
> 
> 时间：2012-11-27T05:21:47.540
> 
> 标签：python, bash, alias, absolute-path, jcc

我正在尝试`make`具有所需依赖项 JCC 的 PyLucene。（JCC 是一个从 Python 调用 Java 的代码生成器。）

注意：操作系统为 Mac OS X 10.7.4。

包含的 make 脚本运行：

```
$ /usr/bin/python -m jcc 
```

输出：

```
/usr/bin/python: No module named jcc 
```

但运行以下是成功的：

```
$ python -m jcc 
```

即使 python 指向 /usr/bin/python：

```
$ whereis python 
```

输出：

```
/usr/bin/python 
```

当`python`别名指向 时`/usr/bin/python`，这些结果有何不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:32:21.143

您的问题可能是哈希表。Bash 保留了一张记住的命令表——它不会`$PATH`每次都搜索。如果在设置`python`之前被调用，`alias`那么哈希表将被使用。虽然我的理解是在搜索哈希表之前扩展了别名，但是手册页并不清楚这一点。

`hash`通过使用命令列出哈希表来检查这一点。使用 重置哈希表`hash -d python`。

但是，我注意到您正在使用`make`，尽管您的示例是命令行。别名不会被子进程继承（默认情况下），如果这样做的话，它可能会成为支持的噩梦。所以`make`不使用你的别名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T05:30:34.613

尝试`python --version`在两者上运行，看看它们是否相同。

# android - 无法让 RelativeLayout 在 Listview 中工作

> ID：13577851
> 
> 赞同：2
> 
> 时间：2012-11-27T05:21:57.510
> 
> 标签：android, android-layout

我在 ListView 中使用 RelativeLayout 时遇到问题。我想让两个 EditText 字段一个在另一个之上，而不是它们完全重叠。我有更多的文字要放在每一行，所以并排不是一个选项。

我尝试删除所有无关的代码以使其工作，所以这就是我所拥有的：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

<ListView android:id="@android:id/list" 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" />

</LinearLayout> 
```

这是我的相对布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content">

    <EditText
        android:id="@+id/time"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="20sp" />

    <EditText
        android:id="@+id/room"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/time"
        android:textSize="20sp" />

</RelativeLayout> 
```

任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T05:25:29.827

代替

```
android:layout_below="@id/subject" 
```

和

```
android:layout_below="@+id/time" 
```

> 因此，具有 id 空间的 EditText 将低于具有 id 时间的 EditText。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T05:30:15.767

您需要将 android:layout_below="@id/subject" 替换为 android:layout_below="@+id/time"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T05:26:48.000

在此用例中使用 LinearLayout

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:orientation="vertical>

<EditText
    android:id="@+id/time"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textSize="20sp" />

<EditText
    android:id="@+id/room"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textSize="20sp" />

</LinearLayout> 
```

# objective-c - 为什么 NSLog 显示不正确的 int 和 char？

> ID：13577855
> 
> 赞同：2
> 
> 时间：2012-11-27T05:22:35.303
> 
> 标签：objective-c, nslog

我认为我做的一切都是正确的，但是 NSLog 输出与悬停在变量上显示的正确值不匹配。合成和点符号工作正常。
将鼠标悬停在所有变量上会显示正确的值，如 // 注释中所示。但是 NSlog 在 Debugger 控制台中显示不正确；输出也显示在 // 注释中。

在测试中，屏幕类的一个实例：

```
{   int i;
    char j;
} 
```

在 AppDelegate 中：

```
test.i = 10;    // hover shows 10        OK
test.j = 'z';   // hover shows 122 'z'   OK
NSLog(@"i= %i, j= %c"),test.i, test.j;// hover shows 10,122 'z'OK  
but Debugger Console shows  i= 2097168, j= $  

int k = 10; // hover shows 10        OK
char l = 'z';   // hover shows 122 'z'   OK
NSLog(@"k= %i, l= %c"),k, l;          // hover shows 10,122 'z'OK  
but Debugger Console shows  k= 6055, l= , 
```

我错过了什么？或者这是 Xcode 3.2.4、OSX 10.6 中的真正错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T05:34:55.157

You've closed the parentheses for `NSlog()` before passing the format arguments. Change this:

```
NSLog(@"i= %i, j= %c"),test.i, test.j; 
```

to this:

```
NSLog(@"i= %i, j= %c",test.i, test.j); 
```

Aside from separating arguments in function calls, commas can also be used to separate statements. Your attempt is equivalent to:

```
NSLog(@"i= %i, j= %c"); // An NSLog with no args, will print garbage.
test.i; // A valid, though pointless, statement.
test.j; // A valid, though pointless, statement. 
```

# php - 使用 php curl 获取 Outlook 通讯录列表？

> ID：13577856
> 
> 赞同：2
> 
> 时间：2012-11-27T05:22:45.943
> 
> 标签：php, javascript, curl

我想从 Outlook 通讯录中导入所有联系人。我想知道有什么方法可以使用 php 从 Outlook 中获取所有联系人。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T21:47:43.483

您可以尝试将所有联系人导出到 csv 文件。

1.  文件 | 进出口...
2.  导出文件
3.  选择逗号分隔值
4.  选择联系人文件夹
5.  将文件保存到桌面

如果你这样做了，你可以将此文件上传到 php 并解析 csv 文件格式。可以[在 stackoverflow上找到 Outlook csv 格式的示例](https://stackoverflow.com/questions/4847596/what-are-the-csv-headers-in-outlook-contact-export)

您可以使用 php 函数[str_getcsv](http://php.net/manual/en/function.str-getcsv.php)将 csv 解析为数组。

# javascript - 如何为附加的 div 定义方法和属性？

> ID：13577857
> 
> 赞同：0
> 
> 时间：2012-11-27T05:22:48.630
> 
> 标签：javascript, jquery, object, constructor, initialization

我将 DIV 动态附加到 DOM。我希望他们每个人都有一些方法，比如当我单击 div 内的按钮时，div 将从 DOM 中删除；以及我可以从中读取的一些属性。

所以我想我需要一个对象，但这让我感到困惑：

```
var block = tmpl('added_video_thumb', data);
$('#wrapper').append(block); 
```

我希望块成为对象，所以我这样做了：

```
var blocks = function(id, data){
  this.block = tmpl('added_video_thumb', data);
} 
```

我将代码更改为：

```
var block = new blocks('added_video_thumb', data);
$('#wrapper').append(block); 
```

然后我不知道如何定义方法，我不想调用这样的函数：

```
$('#delete').click(function(){
  block.remove();
}) 
```

我想要的是当我这样做时：

```
var block = new blocks(); 
```

它照顾一切。请帮我构建这个块对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T05:43:22.660

您可以检查以下[小提琴](http://jsfiddle.net/Rrsmh/2/)

**HTML 代码**

```
<input type="text" placeholder="ID" id="id-input" />
<input type="text" placeholder="data" id="data-input" />
<button id="add-div">Add Div</button>

<div id="wrapper">

</div>​ 
```

**JS代码**

```
$(function(){
    var block = function(id, data) {
        this.id = id;
        this.data = data;
        $("#wrapper").append('<div id="' + id + '">'+ data +'<br /> <button id="del-' + id + '">Delete Me!</button> </div>');
        $("#del-"+id).click(function() {
            $("#"+id).remove();

        });
    }

    $("#add-div").click(function() {
      var newBlock = new block($("#id-input").val(), $("#data-input").val());
    });

});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T06:06:02.113

如果我理解您的问题，那是您想要动态创建一个元素并将方法分配给它自己的子元素。

**HTML**

```
<button id="add">Add</button>
<div class="container">
</div> 
```

**JS**

```
function addBlock() {

var div = $( '<div class="inner_div">
                 <button class="delete">Delete</button>
              </div>' );

div.children('button.delete').on( 'click', function() {
    $(this).parent().remove();
});

$('.container').append(div);
} 
```

小提琴示例：http: [//jsfiddle.net/wyXxn/1/](http://jsfiddle.net/wyXxn/1/) ​</p>

# c - strtok 基于 char * (string) 而不是单个 char

> ID：13577858
> 
> 赞同：1
> 
> 时间：2012-11-27T05:23:16.207
> 
> 标签：c, string, strtok

我试图在字符串中找到一个模式，如果它存在就将其删除。我一直在玩`strtok(aString, "$%");`

`aString`当它找到`$`or时，这将分解`%`。`"$%"`当它只在字符串中找到时，我如何让它分解？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T05:55:07.717

You can easily create this with strstr:

```
char *strtok2(char *str, const char *pattern) {
    static char *save = NULL;
    if(str == NULL)
        str = save;
    if(str == NULL)
        return NULL;
    if((save=strstr(str, pattern))) {
        save[0]=0;
        save += strlen(pattern);
    }
    return str;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T06:00:14.267

抱歉跑题了。

strtok 不是线程安全的。并且您不能将 strtok 用于同一部分中的其他值。所以你应该没有用。strtok 在你自己中编写并不难。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int
main(int argc, char* argv[]) {
  char* p = "$%";
  size_t pl = strlen(p);
  char* s = "hello$%C$%language$%world";
  char* pp = s;
  while (pp && *pp) {
    char* pn = strstr(pp, p);
    if (!pn) pn = pp + strlen(pp);
    size_t l = pn - pp;
    char* ss = malloc(l + 1);
    *(ss + l) = 0;
    memcpy(ss, pp, l);

    // do something with ss
    puts(ss);

    free(ss);
    pp = pn + pl;
  }
  return 0;
} 
```

# jquery - 带有 iframe 的 jquery 移动弹出窗口

> ID：13577861
> 
> 赞同：1
> 
> 时间：2012-11-27T05:23:28.657
> 
> 标签：jquery, iframe, mobile, popup

jquery mobile1.2 我使用以下代码弹出iframe，但点击外部页面，popupdiv无法关闭（不点击右上角的关闭按钮）

为什么？

html:

```
 <a href="javascript:popup()" data-role="button">pop</a>

    <div data-role="popup" id="popDiv" class="ui-content">
    <a href="#" data-rel="back" data-role="button" data-theme="a" data-icon="delete" 
    data-iconpos="notext" class="ui-btn-right">Close</a>
    <iframe id="dynaitcFrame" seamless></iframe>
    </div> 
```

js：

```
 function popup(){
        $("#dynaitcFrame").attr("src","aaa.html");
        $("#dynaitcFrame").attr("height","500");
        $("#dynaitcFrame").attr("width","500");
        $("#popDiv").popup("open",{transition:'pop',positionTo:'#popPosition'});
        } 
```

# c# - C# 从 csv 文件中读取数据，有 8 列，并对其进行排序

> ID：13577865
> 
> 赞同：-1
> 
> 时间：2012-11-27T05:23:37.707
> 
> 标签：c#

所以我试图读取一个 csv 文件，它本质上是一个由单词分隔的数据列表，而我到目前为止所做的是使用 ReadAllLines ，然后从那里用 text.Split(','); 分隔。唯一的问题是我只是阅读了这种列表/数组类方法，而不是创建一个实际的数组，所以我不知道如何调用它或使用它。这是我到目前为止所拥有的：

```
using System;
using System.IO;
public class Earthquake
{
    public double Magnitude { get; set; }
    public string Location { get; set; }
    public double Latitude { get; set; }
    public double Longitude { get; set; }
    public double depth { get; set; }
    public string date { get; set; }
    public string EventID { get; set; }
    public string URL { get; set; }
    public Earthquake(double magna, string locate, double lat, double longi, double dept, string dat, string Event, string website)
    {
        Magnitude = magna;
        Location = locate;
        Latitude = lat;
        Longitude= longi;
        depth = dept;
        date = dat;
        EventID = Event;
        URL = website;
    }

}
public class ManageData
{

    public int count;
    public void getData()
{
    string[] text = File.ReadAllLines(@"Earthquakes.csv");
    foreach (string word in text[count].Split(','))
    {
        //here i want to put each data in the Earthquake class
    }

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T05:43:36.230

你可以更换

```
foreach (string word in text[count].Split(','))
    {
        //here i want to put each data in the Earthquake class
    } 
```

使用以下代码行，看看它是否有帮助

```
foreach (string line in text)
{
  string[] myColumns = line.Split(',');

  EarthQuake eQ = new EarthQuake(myColumns[0],myColumns[1],myColumns[2],myColumns[3],myColumns[4],myColumns[5],myColumns[6],myColumns[7],myColumns[8]);
  //Add eQ into a list you want to save

} 
```

This assumes the columns are in same order. If the order is different than rather than using this constructor, use default constructor and then assign values to the properties of EarthQuake class accordingly.

Hope that helps.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T05:55:20.567

This Project helped me a lot when I needed to manage CSV files, [C# CSV Reader and Writer](http://www.codeproject.com/Articles/86973/C-CSV-Reader-and-Writer)

# java - 我应该如何中断和处理java中的一组线程？

> ID：13577866
> 
> 赞同：1
> 
> 时间：2012-11-27T05:23:45.273
> 
> 标签：java, multithreading

我正在编写一个在游戏状态下执行 alhpa-beta 搜索的游戏引擎，并且我正在尝试并行化它。到目前为止，我一开始是在工作，然后似乎慢慢停止了。我怀疑这是因为我没有正确处理我的线程。

与计算机对战时，游戏调用 MultiThreadedComputerPlayer 对象的 getMove() 函数。这是该方法的代码：

```
public void getMove(){
    int n = board.legalMoves.size();
    threadList = new ArrayList<WeightedMultiThread>();
    moveEvals = new HashMap<Tuple, Integer>();

    // Whenever a thread finishes its work at a given depth, it awaits() the other threads
    // When all threads are finished, the move evaluations are updated and the threads continue their work.
    CyclicBarrier barrier = new CyclicBarrier(n, new Runnable(){
        public void run() {
            for(WeightedMultiThread t : threadList){
                moveEvals.put(t.move, t.eval);
            }
        }
    });

    // Prepare and start the threads
    for (Tuple move : board.legalMoves) {
        MCBoard nextBoard = board.clone();
        nextBoard.move(move);
        threadList.add(new WeightedMultiThread(nextBoard, weights, barrier));
        moveEvals.put(move, 0);
    }
    for (WeightedMultiThread t : threadList) {t.start();}

    // Let the threads run for the maximum amount of time per move
    try {
        Thread.sleep(timePerMove);
    } catch (InterruptedException e) {System.out.println(e);}
    for (WeightedMultiThread t : threadList) {
        t.stop();
    }

    // Play the best move
    Integer best = infHolder.MIN;
    Tuple nextMove = board.legalMoves.get(0);
    for (Tuple m : board.legalMoves) {
        if (moveEvals.get(m) > best) {
            best = moveEvals.get(m);
            nextMove = m;
        }
    }
    System.out.println(nextMove + " is the choice of " + name + " given evals:");
    for (WeightedMultiThread t : threadList) {
        System.out.println(t);
    }
    board.move(nextMove);
} 
```

这里有问题线程的 run() 方法：

```
public void run() {
    startTime = System.currentTimeMillis();
    while(true) {
        int nextEval = alphabeta(0, infHolder.MIN, infHolder.MAX);
        try{barrier.await();} catch (Exception e) {}
        eval = nextEval;
        depth += 1;
    }
} 
```

我需要能够在时间到时中断所有线程——我应该如何实现这个？截至目前，我一直在捕捉（并忽略）InterruptedExceptions。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T07:02:45.957

Thread.stop 被弃用是有原因的。当您在中间中断一个线程时，该线程没有机会正确释放它正在使用的资源，并且不会通知其他线程它的完成......这在多线程应用程序中非常重要。我对你的性能坦克并不感到惊讶；我愿意打赌你的内存使用量会飙升。您也不会回收线程，您可以在不创建新对象的情况下启动和停止它们，这意味着变量留在的任何损坏状态可能仍在困扰它们。

更好的方法是设置一个标志，告诉线程它应该返回。因此，在您的 WeightedMultiThread 类中包含一个名为 shouldQuit 的布尔值，并在每次调用 start() 时将其设置为 false。然后，使用 t.shouldQuit = true 代替 while (true) 执行 while (!shouldQuit)，而不是 t.stop()。在对每个线程执行此操作后，再创建一个循环来检查每个线程的 t.isAlive()，一旦每个线程都返回，就可以开始您的业务了。这样你应该会有更好的结果。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-27T07:19:09.020

这看起来是使用`ExecutorService`. 您可以创建`Callable`实现并行任务的实例，将它们提交给`ExecutorService`，然后用于`awaitTermination`强制超时。

例如：

```
public void getMove() {
    ExecutorService service = Executors.newFixedThreadPool(board.legalMoves.size());
    List<Future<Something>> futures = new ArrayList<Future<Something>>(board.legalMoves.size());
    for (Tuple move : board.legalMoves) {
        futures.add(service.submit(new WeightedMultiThread(...)));
    }
    service.awaitTermination(timePerMove, TimeUnit.MILLISECONDS);
    service.shutdownNow(); // Terminate all still-running jobs
    for (Future<Something> future : futures) {
        if (future.isDone()) {
            Something something = future.get();
            // Add best move logic here
        }
    }
    ...
} 
```

替换`Something`为封装有关已评估移动的信息的内容。我建议`Something`成为一个拥有`Tuple`及其相关分数的类。你的`WeightedMultiThread`班级可以做这样的事情：

```
class WeightedMultiThread implements Callable<Something> {
    public Something call() {
        // Compute score
        ...
        // Return an appropriate data structure
        return new Something(tuple, score);
    }
} 
```

更好的是创建`ExecutorService`一次并在每次调用时重新使用它`getMove`。创建线程很昂贵，所以如果可以的话，最好只做一次。如果您采用这种方法，那么您不应该调用`shutdownNow`，而是使用该`Future.cancel`方法来终止未及时完成的​​作业。确保您的`WeightedMultiThread`实现检查线程中断并抛出`InterruptedException`. 这通常是编写需要可中断的长时间运行任务的好方法。

编辑：

由于您正在对游戏空间进行逐级探索，因此我建议您将其编码在`getMove`函数中而不是`Tuple`评估代码中，例如

```
public Tuple getMove() {
    ExecutorService service = ...
    Tuple best = null;
    long timeRemaining = MAX_TIME;
    for (int depth = 0; depth < MAX_DEPTH && timeRemaining > 0; ++depth) {
        long start = System.currentTimeMillis();
        best = evaluateMoves(depth, service, timeRemaining);
        long end = System.currentTimeMillis();
        timeRemaining -= (end - start);
    }
    return best;
}

private Tuple evaluateMoves(int depth, ExecutorService service, long timeRemaining) {
    List<Future<Whatever>> futures = service.submit(...); // Create all jobs at this depth
    service.awaitTermination(timeRemaining, TimeUnit.MILLISECONDS);
    // Find best move
    ...
    return best;
} 
```

那可能更干净，但你明白了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T13:32:04.027

最敏感的方式是使用中断机制。`Thread.interrupt()`和`Thread.isInterrupted()`方法。这确保您的消息将被传递到线程，即使它位于阻塞调用中（还记得某些方法声明 throwing`InterruptedException`吗？）

[PS 阅读 Brian Goetz 的“Java 并发实践”](https://rads.stackoverflow.com/amzn/click/com/0321349601)第 7 章：取消和关闭会很有用。

# javascript - 如何在 Google Maps API 上绘制复杂的透明圆

> ID：13577867
> 
> 赞同：1
> 
> 时间：2012-11-27T05:23:46.637
> 
> 标签：javascript, google-maps-api-3

最近我有一个任务是在我自己的网站上用 Google Maps API 画圆圈。复杂性是圆的中心代表一个“信号发射器”，我需要使圆透明，每个像素的不透明度代表确切位置的信号强度。

我的基本想法是扩展 Google Map API 的“覆盖”，所以我认为必须用 javascript 编写它。

关键部分是绘制一个不透明度逐渐变化的圆（内部更强，外部更轻），理想情况下，我可以指定每个像素的不透明度。

我一直在寻找 CSS3、SVG、VML 甚至 jquery 和 AJAX 之类的方法，但仍然不知道如何归档它。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T07:54:25.883

如果您想要对不透明度进行那种级别的控制，看起来您将不得不手动设置每个像素。我会使用这样的东西：

```
var centerX = 100 // Center X coordinate of the circle.
var centerY = 100 // Center Y coordinate of the circle.
var radius = 25 // Radius of circle.
//(var diameter = 2 * radius // Diameter of circle)

for(x = -radius; x < radius; x++){
    for(y = -radius; y < radius; y++){
        var hypotenuse = Math.sqrt((x * x) + (y * y)); // Line from point (x,y) to the center of the circle.
        if(hypotenuse < radius){ // If the point falls within the circle
            var opacity = hypotenuse / radius; // Should return a value between 0 and 1
            drawPointAt(x + centerX, y + centerY, colour, opacity); // You'll have to look up what function to use here, yourself.
        }
    }
} 
```

[这是此代码返回圆圈的一个小示例](http://jsfiddle.net/qBFgp/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T06:49:30.697

在这里，我得到了解决方案。它利用了 HTML5 的 Canvas 元素（被广泛支持）。

这是用于定位画布元素并绘制透明度逐渐变化的圆圈的javascript代码。关键部分是使用“渐变”。

```
//get a reference to the canvas
var ctx = $('#canvas')[0].getContext("2d");

//draw a circle
gradient = ctx.createRadialGradient(200, 200, 0, 200, 200, 200);
gradient.addColorStop("0", "blue");
gradient.addColorStop("1.0", "transparent");
ctx.fillStyle = gradient;

//ctx.beginPath();
ctx.arc(200, 200, 200, 0, Math.PI*2, true); 
//ctx.closePath();
ctx.fill(); 
```

# php - PHP OOP - 扩展类

> ID：13577871
> 
> 赞同：1
> 
> 时间：2012-11-27T05:24:19.827
> 
> 标签：php, wordpress, oop

我对 OOP 很陌生，有几件事我想问一下。

我正在使用 OOP 为 WordPress 编写插件，我想了解如何允许其他插件开发人员扩展和重新定义某些功能。

我将主要代码包装在一个类中，如下所示，该类在文件底部实例化：

```
class MyPlugin {

    // .. methods here ..

    public function myMethod(){
        // do something
    }

}

$myplugin = new MyPlugin; 
```

但是，我还希望另一个插件能够通过扩展类来重写 myMethod()。

```
class OtherPlugin extends MyPlugin {
    public function myMethod(){
        // do something else
    }
} 
```

但是为了`$myplugin->myMethod()`“做其他事情”，我应该这样做来覆盖`$myplugin`对象：

```
$myplugin = new OtherPlugin; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T05:27:32.427

是的，你会想用新的、修改过的类重新加载那个变量……除非你通过引用传递。看看...[这是一个巧妙的小技巧](http://php.net/manual/en/language.references.pass.php)。

快乐编码！=)

# prolog - 如何在没有高阶过程的情况下在 O(n) 时间内找到序言变量的最小值

> ID：13577872
> 
> 赞同：1
> 
> 时间：2012-11-27T05:24:39.577
> 
> 标签：prolog, minimum

所以我有一项任务要处理，但我对一件事感到困惑。这是与我要完成的任务类似的问题。假设我有这些规则：

```
size(3).
size(5).
size(7).
size(1).
size(2).
size(9). 
```

我想通过取值 3 并将其与 5 进行比较、存储 3 并将其与 7 进行比较、然后将其与 1 进行比较、存储 1 并将其与 2 进行比较...返回值 1 来找到最小的大小。

在没有高阶过程的情况下，我能看到的唯一方法是某种形式的回溯，同时仍然存在 size(X) 值并且每次都更改 size 变量。但是，我看不出您如何既可以回溯又可以保存新的最小值。我想知道是否有人可以帮助我走上正轨。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T07:41:23.407

你的作业旨在让你思考 Prolog 的特殊*控制流程*，事实上你现在已经到了重点。我已经对解决方案进行了编码并添加了一些解释性注释：填写省略号以完成代码

```
find_min_size(MinSize) :-
    size(Hypothesis),
    !,  % without this cut the minimum is obtained more times...
    find_min_size(Hypothesis, MinSize).

find_min_size(SoFar, MinSize) :-
    % when I should keep searching?
    ...

% the exhaustive search come to end!
find_min_size(MinSize, MinSize). 
```

我认为在 Prolog 中不可能获得 O(N) 性能，没有“高阶程序”（你的意思是 findall 等吗？）。上面的代码将以 O(N^2) 运行。索引无法发挥作用，因为 size/1 将使用未绑定的变量重新启动...

一个有趣的 O(N) 替代方案是使用故障驱动循环和 @false 在介绍[call_nth](https://stackoverflow.com/a/11400256/874024)时解释得很好的技术（另请参阅[此处](https://stackoverflow.com/questions/13390922/prolog-rulex-is-true-if-it-returns-two-or-more-results)的后续内容）。所有这些都在 Prolog 的“不纯”领域，虽然......

**在此处编辑**故障驱动循环

```
find_min_size(MinSize) :-
    State = (_, _),
    (   size(V),
        arg(1, State, C),
        ( ( var(C) ; V < C ) -> U = V ; U = C ),
        nb_setarg(1, State, U),
        fail
    ;   arg(1, State, MinSize)
    ). 
```

# iphone - ios中的InApp购买

> ID：13577873
> 
> 赞同：0
> 
> 时间：2012-11-27T05:24:51.620
> 
> 标签：iphone, ios, ios5, in-app-purchase

我在 itunesconnect.apple.com 中为 InAppPurchase 创建了新产品。

但显示以下警告消息“您的第一个应用内购买必须与新的应用版本一起提交。从版本详细信息页面的应用内购买部分中选择它们，然后单击准备上传二进制文件。”

并且“提交审核”按钮被禁用。

所以，请在我为 InAppPurchase 创建新产品时提出建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T05:31:55.100

我们有同样的问题。您在这里要做的是由于第一次在应用程序购买中提交应用程序，**将您的应用程序上传到 iTunes 并从二进制详细信息中拒绝它**。

在您再次准备上传时拒绝后，您将**在底部看到应用内购买列表**，您可以从中选择合适的应用内购买。

希望这可以帮助。

# c++ - C++11 是否改变了对 STL 容器元素的要求，以及如何改变？

> ID：13577881
> 
> 赞同：26
> 
> 时间：2012-11-27T05:25:23.673
> 
> 标签：c++, stl, c++11

最近我[`std::unique_ptr`对 STL 容器的元素可以接受](https://stackoverflow.com/questions/2876641/so-can-unique-ptr-be-used-safely-in-stl-collections)这一事实感到惊讶，因为我认为这些元素是提供以下功能所必需的（[此页面](http://www.processdoc.com/cppstl/objreq.html)也是如此）：

*   没有参数的公共默认构造函数
*   公共复制构造函数
*   公共拷贝赋值运算符函数
*   公共析构函数

但是`std::unique_ptr`不可复制以使其持有的指针归单个对象所有，这与上述要求相矛盾。

标准是否改变了要求？如果有，有哪些变化？也许可移动对象或可复制对象就足够了？我已经在网上搜索了自 C++11 以来要求是否发生了变化，但我找不到任何对我有帮助的页面......

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-27T06:13:15.893

是的，标准库容器的要求发生了重大变化。很难提供一个完整的列表（有*很多*），但这里有一些重要的：

`std::vector`通常只要求其成员为[MoveConstructible](http://en.cppreference.com/w/cpp/concept/MoveConstructible)和[MoveAssignable](http://en.cppreference.com/w/cpp/concept/MoveAssignable)。std::vector 的许多成员函数提出了更严格的要求。`vector::push_back`需要 Move*或* [CopyConstructible](http://en.cppreference.com/w/cpp/concept/CopyConstructible)（取决于您传递的是右值还是左值），但 new`vector::emplace_back`只要求有一个可访问的构造函数，该构造函数采用给定的参数（除了基线要求之外）。显然，任何调用`vector`' 的复制构造函数/赋值的尝试都需要类型是 CopyConstructible （即：您不能复制 a `std::vector<unique_ptr>`）。

同样，大多数其他容器都减少了对类型的限制。它们还具有`emplace`允许您就地构造成员的成员函数，以及 l/rvalue 插入函数。这意味着您不必复制值；您可以将它们移入或就地构建它们。

构造函数或析构函数都不*需要*是公共的；所有的构建都是通过调用调用来进行的`allocator_traits<Allocator>::construct`。因此，如果您提供分配器，您可以将构造函数/析构函数设为私有。好吧，当然，只要您的分配器类可以访问它们。

简而言之，要求不那么严格，但要复杂一些。如果你限制自己对容器执行某些操作，你可以逃脱很多事情。

# wcf - 如何使用 HTTPS 添加对 WCF 服务的服务引用？

> ID：13577885
> 
> 赞同：0
> 
> 时间：2012-11-27T05:25:35.710
> 
> 标签：wcf, https

我有一个使用 HTTP 与外部 WCF 服务一起工作的项目。我已经使用 VS2008 的“添加服务参考...”菜单选项添加了该服务。地址如下所示：

```
http://2.2.2.2:2222/bbbb/BBBB/Name.wsdl 
```

我现在有了新的服务地址，如下所示：

```
https://a.b.com/Services/BBBB/Name 
```

如您所见，第二个地址中没有 .wsdl 扩展名。我不确定这是否会成为某些问题的根源。

我无法通过使用“添加服务引用...”菜单选项以与添加第一个地址相同的方式添加具有新地址的服务引用。有一个错误。

我的问题是如何使用新地址的服务？我应该保留旧服务并更改通过先前使用“添加服务引用...”菜单选项或其他方式获得的文件中的一些设置吗？

先感谢您。

戈兰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T10:26:46.763

如果您在添加时遇到错误（什么错误？），那么您在使用时可能会遇到问题（例如，如果您手动更改参考文件）。您可以尝试菜单项“配置服务参考”，但我认为这无济于事。实现正常的“添加服务参考”完成。也许 datasvcutil 可以提供帮助（查看更多错误信息）

# spring - 用于 Spring MVC 应用程序中的 logback 的 Log4jConfigListener

> ID：13577889
> 
> 赞同：2
> 
> 时间：2012-11-27T05:25:45.467
> 
> 标签：spring, logback

我正在基于 Spring MVC 的 Web 应用程序中从 log4j 迁移到 logback。目前，Spring 的 Log4jConfigListener 配置在 web.xml 中，用于定位 log4j.xml 文件，如下图所示：

```
<context-param>
    <param-name>log4jConfigLocation</param-name>
    <param-value>WEB-INF/spring/log4j.xml</param-value>
</context-param>

<listener>
    <listener-class>org.springframework.web.util.Log4jConfigListener</listener-class>
</listener> 
```

现在，我在 WEB-INF/spring 文件夹下创建了 logback.xml 文件。web.xml 中是否也有类似的 logback 配置？

我在 Spring 3.1 的 org.springframework.web.util 包中找不到任何 LogbackConfigListener 类

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T05:54:14.743

从 Spring 3.1.x 开始，无法使用侦听器使用 Spring 配置 Logback。

[该博客](http://jnassef.blogspot.mx/2007/11/logback-web-configurer.html)提到有人[已将请愿书](http://jira.qos.ch/browse/LOGBACK-557)发送到邮件列表。

无论如何，qos-ch (Les Hazlewood) 已经为这种情况创建了一个工件（弹簧扩展）。检查[github 存储库。](https://github.com/qos-ch/logback-extensions/tree/master/spring/src/main/java/ch/qos/logback/ext/spring/web)

# node.js - 一侧是 Dojo JsonRest，另一侧是 Mongodb：分页/过滤？

> ID：13577891
> 
> 赞同：0
> 
> 时间：2012-11-27T05:25:51.237
> 
> 标签：node.js, mongodb, rest, dojo

我正在试验 Dojo 的 dgrid（太棒了！）。我在服务器端使用 Nodejs/Mongoose。我想写一个“日志浏览器”：我有一个包含大量日志条目的大 mongodb 表；使用 dgrid，我希望能够 1）按某些参数过滤 2）使用 dgrid 的本机分页进行分页。

因此出现了问题：dojo 的 JsonRest 存储将发送如下请求：

```
Accept:application/javascript, application/json
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
...
Host:localhost:3000
Range:items=0-24 
```

因此问题是：它会给出一个范围（这就是它所能做的，真的），并会根据它从服务器接收到的内容在客户端显示内容。期望客户端 JsonRest 对象发出“范围”以外的请求是不现实的。但是，我知道跳过/限制与 Mongoose 配合得不太好：

[使用 MongoDb 和 Nodejs 进行 ajax 分页的最佳方法是什么？](https://stackoverflow.com/questions/10072518/what-is-the-best-way-to-do-ajax-pagination-with-mongodb-and-nodejs/10072603#10072603)

我的想法是渲染 dgrid，允许用户选择过滤器，并让他们愉快地对日志进行分页。但是，跳过/限制是毫无疑问的，我有点担心......

除了完全抛弃 dgrid 并在不使用 Dojo 商店的情况下自行实现分页之外，还有什么智慧的珍珠？

默克。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T21:05:10.037

## 前端

dgrid 中的过滤功能不如 dojo EnhancedGrid 过滤器插件中的功能齐全，因此您可能需要自己实现该部分。

好消息是，您只需在创建网格时混入“dgrid/OnDemandGrid”即可获得分页。

## 后端

文档似乎表明，您对性能的最佳选择是对索引和查询进行一些技巧，以获取您的范围。

您可能已经在引用这些，但它们在这里；
[http://mongoosejs.com/docs/api.html#query_Query-skip](http://mongoosejs.com/docs/api.html#query_Query-skip)
[http://docs.mongodb.org/manual/reference/method/cursor.skip/](http://docs.mongodb.org/manual/reference/method/cursor.skip/)

由于日志数据通常是连续的并且很少修改，因此您可能只需为每行日志数据使用单调递增的索引，并使用这些索引来获取正确的偏移量和行数。

# java - String.valueOf(String Object) 的 null 和 "null" 有什么区别

> ID：13577892
> 
> 赞同：8
> 
> 时间：2012-11-27T05:25:51.137
> 
> 标签：java, string, object, if-statement, null

在我的项目中，我必须在某个地方使用 if n else 条件来检查空变量

```
String stringValue = null;
String valueOf = String.valueOf(stringValue); 
```

但是当我检查情况时

```
 if (valueOf == null) {
        System.out.println("in if");
    } else {
        System.out.println("in else");
    } 
```

那么输出是**“in else”**，为什么会这样？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-27T05:29:03.240

这是**源代码**：`String.valueOf`-

```
public static String valueOf(Object obj) {
    return (obj == null) ? "null" : obj.toString();
} 
```

如您所见，对于一个`null`值，它返回`"null"`字符串。

所以，

```
String stringValue = null;
String valueOf = String.valueOf(stringValue); 
```

给. `"null"`_`valueOf`

同样，如果你这样做： -

```
System.out.println(null + "Rohit"); 
```

你会得到： -

```
"nullRohit" 
```

* * *

**编辑**

另一个例子：

```
Integer nulInteger = null;
String valueOf = String.valueOf(nulInteger) // "null" 
```

但在这种情况下。

```
Integer integer = 10;
String valueOf = String.valueOf(integer) // "10" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T05:31:54.633

其实可以看一下方法的实现：valueOf()。你会知道那时发生了什么。

在 JDK 1.5 中，它的代码是这样的：

```
public static String valueOf(Object obj) {
return (obj == null) ? "null" : obj.toString();
} 
```

从代码中可以看出，如果对象为null，它将返回一个带有“null”值的非空字符串，这意味着valueOf对象不为null。

# javascript - Ember1.0版本，如何从事件点击中获取整个对象（类似于0.9版本的event.context）？

> ID：13577894
> 
> 赞同：3
> 
> 时间：2012-11-27T05:25:55.583
> 
> 标签：javascript, ember.js, dom-events

我是 emberjs 的新手，周围的文档似乎很少。最初我开始使用 ember0.9 版本，我有一组可以显示在 UI 上的患者对象，当我单击特定行时，（使用`event.context`）我能够检索整个对象，但使用 ember1.0（最新）版本事件对象中似乎缺少上下文本身，尽管我能够从服务器调用中获取 id 并检索完整对象（不推荐），但我真的很想知道是否有办法检索整个对象从事件。

```
 {{#each Em.App.patientsController}}
      <tr id="row">
        <td id="patient"><div {{action showPatient href=true}}>{{_id}}</div></td>
        <td id="account">{{name}}</td>
        <td id="location">{{name}}</td>

      </tr>
    {{/each}}
    //in ember0.9, whats the equivalent in ember1.0
    showPatient: function(event) {
    var patientObj = event.context;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T06:54:48.353

您需要像这样指定操作：

```
{{action showPatient this href=true}} 
```

第二个参数（`this`在我的示例中）将变为`event.context`.

# php - PHP上的JQuery模态框否则死

> ID：13577897
> 
> 赞同：0
> 
> 时间：2012-11-27T05:26:41.903
> 
> 标签：php, jquery

只是想知道是否有一种方法可以在 PHP else die 语句的事件中包含一个 JQuery 模式框/弹出窗口，例如：`else die("Invalid");`.

因此，else die 不会触发页面上显示的输出，而是`Invalid`触发包含 output 的 JQuery 模式弹出框`Invalid`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T05:37:37.677

您可以通过简单地跟踪 php 的成功输出来完成

```
<?php
if($logged) {
 echo "success";
} else {
 die("Sorry incorrect login information");
}
?> 
```

你可以用jquery跟踪它

```
$(#form).on("submit",function() {
var inputs = $(this).serialize();
var ulr = $(this).attr("action");
$.post(url, inputs, function(data) {
 if(data !="success") {
//display UI dialog or alert with data

} else {
//proceed
}
});
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T05:34:28.117

First better use exit() not die :) it's the standard.

You can write

```
else { exit("<script>alert('s');</script>"); } 
```

Inside it you can write in your script. It will run! But if you want jquery you must be sure that it has been loaded before this exit line. After it nothing more will be send to user browser.

# sql-server - 两个日期之间的 SQL 时间差导致 hh:mm:ss

> ID：13577898
> 
> 赞同：34
> 
> 时间：2012-11-27T05:26:43.567
> 
> 标签：sql-server, tsql

我在计算两个日期之间的时差时遇到了一些困难。

我想要的是，我有两个约会可以说

```
@StartDate = '10/01/2012 08:40:18.000'
@EndDate='10/04/2012 09:52:48.000' 
```

所以两个日期之间的差的形式`hh:mm:ss`是`72:42:30`。

如何在 T-SQL 查询中获得此结果？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-11-27T06:26:46.727

```
declare @StartDate datetime, @EndDate datetime

select @StartDate = '10/01/2012 08:40:18.000',@EndDate='10/04/2012 09:52:48.000'

select convert(varchar(5),DateDiff(s, @startDate, @EndDate)/3600)+':'+convert(varchar(5),DateDiff(s, @startDate, @EndDate)%3600/60)+':'+convert(varchar(5),(DateDiff(s, @startDate, @EndDate)%60)) as [hh:mm:ss] 
```

此查询将对您有所帮助。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2014-09-03T16:30:17.600

最短的代码是：

```
Select CAST((@EndDateTime-@StartDateTime) as time(0)) '[hh:mm:ss]' 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-11-27T06:00:07.480

虽然可能不是最有效的，但这会起作用：

```
declare @StartDate datetime, @EndDate datetime

select @StartDate = '10/01/2012 08:40:18.000',@EndDate='10/04/2012 09:52:48.000'

select convert(varchar(5),DateDiff(s, @startDate, @EndDate)/3600)+':'+convert(varchar(5),DateDiff(s, @startDate, @EndDate)%3600/60)+':'+convert(varchar(5),(DateDiff(s, @startDate, @EndDate)%60)) 
```

如果您可以运行两个选择，那么这会更好，因为您只执行一次 datediff：

```
declare @StartDate datetime, @EndDate datetime

select @StartDate = '10/01/2012 08:40:18.000',@EndDate='10/04/2012 09:52:48.000'
declare @Sec BIGINT

select @Sec = DateDiff(s, @startDate, @EndDate)

select convert(varchar(5),@sec/3600)+':'+convert(varchar(5),@sec%3600/60)+':'+convert(varchar(5),(@sec%60)) 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-01-09T16:49:44.927

我喜欢把它变成一个函数的想法，这样它就可以重复使用，并且你的查询变得更容易阅读：

```
--get the difference between two datetimes in the format: 'h:m:s'
CREATE FUNCTION getDateDiff(@startDate DATETIME, @endDate DATETIME)
RETURNS VARCHAR(10)
AS BEGIN
    DECLARE @seconds INT = DATEDIFF(s, @startDate, @endDate)
    DECLARE @difference VARCHAR(10) =
    CONVERT(VARCHAR(4), @seconds / 3600) + ':' +
    CONVERT(VARCHAR(2), @seconds % 3600 / 60) + ':' +
    CONVERT(VARCHAR(2), @seconds % 60)
    RETURN @difference
END 
```

用法：

```
DECLARE @StartDate DATETIME = '10/01/2012 08:40:18.000'
DECLARE @endDate DATETIME = '10/04/2012 09:52:48.000'

SELECT dbo.getDateDiff(@startDate, @endDate) AS DateDifference 
```

结果：

```
 DateDifference
1   73:12:30 
```

如果添加填充也更容易阅读结果，因此格式始终为`hh:mm:ss`. 例如，以下是在 SQL Server 2012 或更高版本中执行此操作的方法：

```
--get the difference between two datetimes in the format: 'hh:mm:ss'
CREATE FUNCTION getDateDiff(@startDate DATETIME, @endDate DATETIME)
RETURNS VARCHAR(10)
AS BEGIN
    DECLARE @seconds INT = DATEDIFF(s, @startDate, @endDate)
    DECLARE @difference VARCHAR(10) =
    FORMAT(@seconds / 3600, '00') + ':' +
    FORMAT(@seconds % 3600 / 60, '00') + ':' +
    FORMAT(@seconds % 60, '00')
    RETURN @difference
END 
```

请注意，如果小时数超过 2 位，这将不会缩短小时数。因此 1 小时将显示为`01:00:00`100 小时将显示为`100:00:00`

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-03-14T16:33:14.593

如果您不反对隐式类型转换，我将提供另一种解决方案。更好的格式是否更具可读性？你来做法官。

```
DECLARE  @StartDate datetime = '10/01/2012 08:40:18.000'
        ,@EndDate   datetime = '10/04/2012 09:52:48.000'

SELECT
    STR(ss/3600, 5) + ':' + RIGHT('0' + LTRIM(ss%3600/60), 2) + ':' + RIGHT('0' + LTRIM(ss%60), 2) AS [hh:mm:ss]
FROM (VALUES(DATEDIFF(s, @StartDate, @EndDate))) seconds (ss) 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-05-08T14:19:49.797

```
DECLARE @dt1 datetime='2012/06/13 08:11:12', @dt2 datetime='2012/06/12 02:11:12'

SELECT CAST((@dt2-@dt1) as time(0)) 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-07-11T12:07:40.167

如果您需要两个日期之间的零填充差异：

```
SELECT convert(varchar(2),FORMAT(DATEDIFF(s, @startDate, @endDate)/3600,'0#'))+':'    
   +convert(varchar(2),FORMAT(DATEDIFF(s, @startDate, @endDate)%3600/60,'0#'))+':'
   +convert(varchar(2),FORMAT(DATEDIFF(s, @startDate, @endDate)%60,'0#')) AS Duration 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-05-09T06:29:03.880

试试这个：

```
declare @StartDate datetime, @EndDate datetime

select @StartDate = '2016-05-04 10:23:41.083', @EndDate='2016-05-04 10:25:26.053'

select CAST(DateDiff(MI, @startDate, @EndDate)/60 AS varchar)+':'+Cast(DateDiff(MI, @startDate, @EndDate)%60 AS varchar)+':'+cast(DateDiff(s, @startDate, @EndDate)%60 AS varchar) as [hh:mm:ss] 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-11-27T07:05:01.447

看看这些。我没有使用更多的括号来保持可读性，所以请记住，乘法是在加法或减法之前完成的。

以下均返回：

```
hr  mins  sec   timediff
73   12    30   73:12:30 
```

这是为了不使用子查询而编写的，并且是最易读易懂的：

```
declare @StartDate datetime,
@EndDate datetime

set @StartDate = '10/01/2012 08:40:18.000'
set @EndDate =   '10/04/2012 09:52:48.000' 

select datediff(hour, @StartDate, @EndDate) hr,
   datediff(minute, @StartDate, @EndDate) 
   - datediff(hour, @StartDate, @EndDate) * 60 mins,
   datediff(second, @StartDate, @EndDate) 
   - (datediff(minute, @StartDate, @EndDate) * 60) sec,
   cast(datediff(hour, @StartDate, @EndDate) as varchar)+':'+ 
   cast(datediff(minute, @StartDate, @EndDate) 
   - datediff(hour, @StartDate, @EndDate) * 60 as varchar)+':'+ 
   cast(datediff(second, @StartDate, @EndDate) 
   - (datediff(minute, @StartDate, @EndDate) * 60) as varchar) timediff 
```

如果您有大量数据，此版本的性能会更好。它需要一个子查询。

```
declare @StartDate datetime,
@EndDate datetime

set @StartDate = '10/01/2012 08:40:18.000'
set @EndDate =   '10/04/2012 09:52:48.000' 

select s.seconds / 3600  hrs,
s.seconds / 60 - (seconds / 3600 ) * 60 mins,
s.seconds - (s.seconds / 60) * 60   seconds,
cast(s.seconds / 3600 as varchar) + ':' +
cast((s.seconds / 60 - (seconds / 3600 ) * 60) as varchar) + ':' +
cast((s.seconds - (s.seconds / 60) * 60) as varchar) timediff
from (select datediff(second, @StartDate, @EndDate) as seconds) s 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-05-22T00:11:09.493

我今天遇到了这篇文章，因为我试图收集位于不同表中的字段之间的时差，这些表在一​​个关键字段上连接在一起。这是这种努力的工作代码。（在 sql 2010 中测试）请记住，我的原始查询在一个公共键域上共同加入了 6 个表，在下面的代码中，我删除了其他表，以免给读者造成任何混淆。

查询的目的是计算变量 CreatedUTC 和 BackupUTC 之间的差异，其中差异以天数表示，该字段称为“DaysActive”。

```
declare @CreatedUTC datetime
declare @BackupUtc datetime

SELECT TOP 500

table02.Column_CreatedUTC AS DeviceCreated,
CAST(DATEDIFF(day, table02.Column_CreatedUTC, table03.Column_EndDateUTC) AS nvarchar(5))+ ' Days' As DaysActive,
table03.Column_EndDateUTC AS LastCompleteBackup

FROM

Operations.table01 AS table01

LEFT OUTER JOIN

    dbo.table02 AS table02
ON
    table02.Column_KeyField = table01.Column_KeyField

LEFT OUTER JOIN 

    dbo.table03 AS table03
ON
    table01.Column_KeyField = table03.Column_KeyField

Where table03.Column_EndDateUTC > dateadd(hour, -24, getutcdate()) --Gathers records with an end date in the last 24 hours
AND table02.[Column_CreatedUTC] = COALESCE(@CreatedUTC, table02.[Column_CreatedUTC])
AND table03.[Column_EndDateUTC] = COALESCE(@BackupUTC, table03.[Column_EndDateUTC])

GROUP BY table03.Column_EndDateUTC, table02.Column_CreatedUTC
ORDER BY table02.Column_CreatedUTC ASC, DaysActive, table03.Column_EndDateUTC DESC 
```

输出如下：

```
[DeviceCreated]..[DaysActive]..[LastCompleteBackup]
---------------------------------------------------------
[2/13/12 16:04]..[463 Days]....[5/21/13 12:14]
[2/12/13 22:37]..[97 Days].....[5/20/13 22:10] 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-10-31T18:41:17.267

```
declare @StartDate datetime,
@EndDate datetime
set @StartDate = '10/01/2012 08:40:18.000'
set @EndDate =   '10/01/2012 09:52:48.000'

SELECT CONVERT(CHAR(8), CAST(CONVERT(varchar(23),@EndDate,121) AS DATETIME)
-CAST(CONVERT(varchar(23),@StartDate,121)AS DATETIME),8) AS TimeDiff 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-03-06T10:36:42.810

这是一个脚本写入副本，然后写入您的脚本文件并更改您的请求字段并退出

```
DECLARE @Sdate DATETIME, @Edate DATETIME, @Timediff VARCHAR(100)
SELECT @Sdate = '02/12/2014 08:40:18.000',@Edate='02/13/2014 09:52:48.000'
SET @Timediff=DATEDIFF(s, @Sdate, @Edate)
SELECT CONVERT(VARCHAR(5),@Timediff/3600)+':'+convert(varchar(5),@Timediff%3600/60)+':'+convert(varchar(5),@Timediff%60) AS TimeDiff 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-03-26T14:07:18.357

```
DECLARE  @StartDate datetime = '10/01/2012 08:40:18.000'
        ,@EndDate   datetime = '10/10/2012 09:52:48.000'
        ,@DaysDifferent int = 0
        ,@Sec BIGINT

select @Sec = DateDiff(s, @StartDate, @EndDate)

IF (DATEDIFF(day, @StartDate, @EndDate) > 0)
    BEGIN
        select @DaysDifferent = DATEDIFF(day, @StartDate, @EndDate)
        select @Sec = @Sec - ( @DaysDifferent * 86400 )
        SELECT LTRIM(STR(@DaysDifferent,3)) +'d '+ LTRIM(STR(@Sec/3600, 5)) + ':' + RIGHT('0' + LTRIM(@Sec%3600/60), 2) + ':' + RIGHT('0' + LTRIM(@Sec%60), 2) AS [dd hh:mm:ss]
    END
ELSE
    BEGIN
        SELECT LTRIM(STR(@DaysDifferent,3)) +'d '+ LTRIM(STR(@Sec/3600, 5)) + ':' + RIGHT('0' + LTRIM(@Sec%3600/60), 2) + ':' + RIGHT('0' + LTRIM(@Sec%60), 2) AS [dd hh:mm:ss]
    END

----------------------------------------------------------------------------------
dd HH:MM:SS
9d 1:12:30 
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2017-04-27T01:23:28.740

```
declare @StartDate datetime;
declare @EndDate datetime;
select @StartDate = '10/01/2012 08:40:18.000';
select @EndDate='10/04/2012 09:52:48.000';
select  cast(datediff(hour,@StartDate,@EndDate) as varchar(10)) + left(right(cast(cast(cast((@EndDate-@StartDate) as datetime) as time) as varchar(16)),14),6) 
```

# json - 对于 JSON，在键名中使用像“-”这样的标点符号是不是很糟糕？

> ID：13577902
> 
> 赞同：4
> 
> 时间：2012-11-27T05:26:57.033
> 
> 标签：json, key

属性键中的标点符号是否真的会导致开发人员在使用符号哈希键的 Ruby 等语言中出现可用性问题，而在 Javascript 中，这些字符会阻止开发人员使用点符号进行属性访问。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T05:40:55.593

[JSON 规范](http://www.json.org/)没有明确禁止在对象的名称/值对中使用连字符或任何其他字符。

是否是一个好主意是另一回事，但大多数语言都可以轻松处理特殊字符作为键，例如 JavaScript：

```
var x = {"a-b": "hello"};
console.log(x['a-b']); // prints "hello" 
```

因为`a-b`is not a valid property name`x.a-b`不会按预期工作，但 JavaScript 有另一种语法，用于使用`[]`符号解引用对象。

另一个例子，PHP：

```
$x = json_decode('{"a-b": "hello"}');
echo $x->{'a-b'}; 
```

同样，`$x->a-b`它不起作用，因此 PHP 支持使用`->{}`符号解引用。

# groovy - soapUI中的附件

> ID：13577904
> 
> 赞同：1
> 
> 时间：2012-11-27T05:27:06.270
> 
> 标签：groovy, base64, soapui

我收到一个包含作为附件的文本文件的响应，但即使我将 MTOM 更改为 true，我也无法在soapUI 附件选项卡中看到该附件。我可以通过编写一些 groovy 来获取此附件吗？

```
<SOAP-ENV:Body>
  <ns1:getFileResponse xmlns:ns1="urn:getfile1">
     <return xsi:type="xsd:base64Binary">PD9waHANCiRoYW5kbGUgPSBmb3BlbigiQzovL3hhbXBwLy9odGRvY3MvL3JldGFpbC8vdGVzdC5waHAiLCAiciIpOw0KPz4NCg==</return>
  </ns1:getFileResponse> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T09:01:54.190

在 SoapUI 支持论坛上查看相同问题的答案： [https ://community.smartbear.com/t5/SoapUI-Open-Source/Saving-attachments-automatically/mp/880#U880](https://community.smartbear.com/t5/SoapUI-Open-Source/Saving-attachments-automatically/m-p/880#U880)

# reporting-services - SSRS 2008-R2 使用 RDL 作为 portlet\widget 生成器

> ID：13577905
> 
> 赞同：1
> 
> 时间：2012-11-27T05:27:07.377
> 
> 标签：reporting-services, ssrs-2008, rdlc, rdl

我是一家开发 Web 应用程序的公司的产品经理。该系统有一个数据仓库，用于使用 SSRS 2008-R2 创建不同的报告

该应用程序有一个门户基础结构，允许用户使用我们的“系统”项和他们自己的“报告”自定义他们的工作环境（非常类似于使用 SharePoint 和 WebPart，但目的完全不同）

我想知道是否有人有一套在实时网页上显示 RDL 报告的最佳实践，用户将能够（在某种程度上）使用不同的链接和查询字符串在报告和我们的系统之间提供一些交互的意图。

我一直在努力解决以下主题：

*   参数栏不允许增加下拉菜单的宽度，当过滤器包含长字符串时，这会提供糟糕的用户体验。

*   报告表格宽度不能设置为 100%，它只能指 px 宽度，这会导致黑色空白区域并且不允许良好的分辨率支持（门户看起来很难看）

*   本机 .Net 报表查看器控件不适用于 IE 以外的浏览器

*   下拉过滤器没有搜索\快速搜索选项。

*   从一个页面移动到另一个页面需要查看报表查看器控件的导航栏，当同一仪表板上有多个报表时，该导航栏看起来很古怪

*   本地化功能不佳 - 加载动画无法更改为使用本地化字符串。

有没有人尝试过这样的事情？报表查看器控件是否有其他替代方案可以提供更大的灵活性？是否有其他工具可以提供可以轻松插入现有系统的报告生成功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T10:42:30.387

物有所值。

我们已经成功地完成了这种场景。报告查看器控件在所有浏览器上都运行良好，因为它使用少量 javascript 生成纯 html。我们已经在 IE7-8、FF (2008-2009)、iPad 3.1、MacOs Safari 和 FF 上对其进行了测试，并且可以正常工作。

我们这样做的方式：

*   创建了单独的 web aspx 项目来托管报表查看器控件 (ReportViewer)。它实际上充当 SSRS 网站的反向代理，并提供查询字符串参数翻译。

*   主 Web 应用程序显示一个指向 ReportViewer 应用程序的 IFRAME，并提供其自己的导航和过滤控件。

*   ReportViewer 应用程序是一个简单的 aspx 页面，其中包含 Microsoft.Reporting.WebForms.ReportViewer ctlReportViewer 和一些用于从 url 到 MS ReportViewer、安全性和其他绒毛的参数转换的代码。

*   实际报表查看器已禁用其工具栏。我相信它的工具栏=假。（您可以通过查看实际报告区域的属性来查看所有查询字符串参数）。

*   大多数区域设置特定字符串需要在报告级别手动处理。

总体而言，它对大约 100 个客户来说工作得相当好，但除此之外，我会寻找不同的解决方案。也许是第 3 方报告控件或第 3 方仪表板控件。我们已经开始了 Silverlight 仪表板路线，但随后项目资金耗尽，我继续前进。

通过创建多个 SSRS Web 服务器并让您的 ReportViewer 应用程序选择负载最少的一个，您仍然可以为大量客户端关闭。

# asp.net-mvc - SQL Server 2008 中的 PWDENCRYPT 每次对相同的数据进行不同的结果加密，为什么？

> ID：13577914
> 
> 赞同：0
> 
> 时间：2012-11-27T05:27:54.677
> 
> 标签：asp.net-mvc, sql-server-2008

我使用 pwdencrypt 创建系统的用户 ii 通过在 sql server 2008 中加密保存密码。当我尝试登录时，我再次在 sql server 中使用 pwdencrypt 关键字加密了密码，发现 sql server 中的加密密码与最近输入密码不同. 确保我再次这样做并发现每个 tym 相同密码的加密结果是不同的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T06:55:42.400

它不会加密您的密码，它会返回密码哈希。

检查密码是否正确时应使用[pwdcompare 。](http://msdn.microsoft.com/en-us/library/dd822792.aspx)

试试这个：

```
declare @P varbinary(128)
set @P = pwdencrypt('PassWord')

if pwdcompare('PassWrod', @P) = 1
  print 'Yes'
else
  print 'No'

if pwdcompare('PassWord', @P) = 1
  print 'Yes'
else
  print 'No' 
```

# r - 围绕一组点绘制曲线

> ID：13577918
> 
> 赞同：28
> 
> 时间：2012-11-27T05:28:37.717
> 
> 标签：r, graphics2d, curve

我在飞机上有一组点。它们被划分为子集。我想在属于同一子集的点周围绘制一条闭合曲线，这样属于子集的点将在曲线内，而不属于子集的点将在曲线外。因此，简单的圆圈或凸包可能不起作用。

首先，假设我只想在一组点周围有一条平滑曲线（不要求它排除其他点）

任何想法如何在 R 中做到这一点？

---稍后添加---

我最终看到的是这里的图形精神：[https](https://tex.stackexchange.com/questions/1175/drawing-a-hypergraph) ://tex.stackexchange.com/questions/1175/drawing-a-hypergraph - 虽然上下文不是超图，而是给定的一组点和其中的一个分区。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-27T08:20:40.083

好的，这是我认为接近您所追求的答案的一个版本：它使用在 GIS 论坛上的`spline.poly`此答案（[https://gis.stackexchange.com/a/24929 ）上创建的函数。](https://gis.stackexchange.com/a/24929)

以下是一些示例点：

```
testpts <- 
structure(list(x = c(4.9, 4.2, 4, 4.1, 4.4, 5.8, 5.8, 5.8, 5.8, 
5.5, 4.9, 3.2, 3.2, 3.3, 5.4, 5.4, 5.7, 6.4, 6.7, 6.7, 6, 4.8, 
3.6, 2.8, 3.5, 4.4, 5.1, 4, 3.7, 4.5, 4.9, 5.7), y = c(6.9, 6.2, 
5.3, 4.1, 3.1, 2.9, 2.9, 3.5, 4.2, 4.9, 5.1, 4.9, 4.9, 5.2, 6.9, 
6.9, 5.3, 3.8, 4.2, 5.6, 6.9, 5.8, 1.2, 2.5, 5.3, 6.4, 6.8, 7.6, 
6.9, 5.4, 4.8, 4.4)), .Names = c("x", "y")) 
```

设置基本情节

```
plot(NA,xlim=c(0,10),ylim=c(0,10))
points(testpts,pch=19)
chuld <- lapply(testpts,"[",chull(testpts))
polygon(chuld,lty=2,border="gray")
polygon(spline.poly(as.matrix(as.data.frame(chuld)),100),border="red",lwd=2) 
```

结果：

![把它弄碎！](../Images/6029ec0c616df1da9e78da21db6f1c38.png)

**编辑以添加凹面示例**

这部分答案使用了`alphahull`库

```
# load the required library
library(alphahull)

plot(NA,xlim=c(0,10),ylim=c(0,10))
points(testpts,pch=19)
# remove duplicate points so the ahull function doesn't error out
testptsnodup <- lapply(testpts,"[",which(!duplicated(as.matrix(as.data.frame(testpts))))) 
```

生成并绘制 ahull 对象 - alpha 值似乎对于确定多边形与数据的拟合非常重要。

```
ahull.obj <- ahull(testptsnodup,alpha=2)
plot(ahull.obj,add=TRUE,col="red",wpoints=FALSE) 
```

结果：

![在此处输入图像描述](../Images/71d807a478bf6f3983f63a33921f1d01.png)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-12-09T03:36:02.650

`ggalt`包提供`geom_encircle`，它应该提供这样的东西 - 凸的，但平滑：

```
library(ggplot2)
library(ggalt)  ## v 0.4.0

df <- data.frame(x = rnorm(20), y = rnorm(20),
      z = sample(letters[1:5], 20, replace = TRUE))
ggplot(df, aes(x, y, colour = z)) + geom_point() +
     geom_encircle(aes(fill=z),alpha=0.3) 
```

[![在此处输入图像描述](../Images/99e3abc133b15ecd31bd1a55dfe567c1.png)](https://i.stack.imgur.com/G3OOW.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-27T06:36:18.553

经过一番谷歌搜索后，我对这个示例[Morota ggplot2稍作修改](http://www.ansci.wisc.edu/morota/R/ggplot2/ggplot2.html#section0010)

**编辑**

它使用带有**贝塞尔曲线的****chull**函数

 **```
library(ggplot2)
library(plyr)
library(Hmisc)

df <- data.frame(x = rnorm(20), y = rnorm(20),z = sample(letters[1:5], 20, rep = T))
ggplot(df, aes(x, y, colour = z)) + geom_point()

find_hull <- function(df) {
    res.ch <- df[chull(df$x, df$y), ]
    res <- bezier(res.ch)
    res <- data.frame(x=res$x,y=res$y)
    res$z <- res$z
    res
  }
hulls <- ddply(df, "z", find_hull)
ggplot(df, aes(x, y, colour = z,fill = z)) +
  geom_point() + geom_polygon(data = hulls,alpha = 0.4) 
```

![在此处输入图像描述](../Images/8c3e789e7f1ca9921a8266b4a60bc73c.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-23T21:53:51.410

简单地：

```
testpts <- structure(list(x = c(4.9, 4.2, 4, 4.1, 4.4, 5.8, 5.8, 5.8, 5.8, 
5.5, 4.9, 3.2, 3.2, 3.3, 5.4, 5.4, 5.7, 6.4, 6.7, 6.7, 6, 4.8, 
3.6, 2.8, 3.5, 4.4, 5.1, 4, 3.7, 4.5, 4.9, 5.7), y = c(6.9, 6.2, 
5.3, 4.1, 3.1, 2.9, 2.9, 3.5, 4.2, 4.9, 5.1, 4.9, 4.9, 5.2, 6.9, 
6.9, 5.3, 3.8, 4.2, 5.6, 6.9, 5.8, 1.2, 2.5, 5.3, 6.4, 6.8, 7.6, 
6.9, 5.4, 4.8, 4.4)), .Names = c("x", "y"))
x <- do.call('cbind',testpts)
ch<-chull(x)
x[c(ch,ch[1]),]
plot(x,pch=20)
points(x[ch,],pch=20,col='red')
lines(x[c(ch,ch[1]),],lwd=.5) 
```

阴谋：

![剧情](../Images/c50160cc1e9b19b2ac4b162bcae73d3b.png "阴谋")**

# android - 如何创建可以在线和离线工作的 Android 应用程序？

> ID：13577920
> 
> 赞同：-2
> 
> 时间：2012-11-27T05:28:40.370
> 
> 标签：android, database, web-services

我想创建一个可以在线和离线工作的应用程序。如果存在互联网连接，则应使用其他历史记录。

我对一些可能性感到困惑，例如：

如何管理图片、视频等物理资源。如何根据webservice更新本地数据库？本地数据库更新时如何从网络获取新的物理资源？

关于这一点，我做了一些工作，在下面解释。

我得到了网络服务器的所有数据库并将其转储到 sqlite 并存储在系统文件夹中。我在系统文件夹（如可绘制、评估和原始文件夹）中获取所有资源，如图像、字体和视频存储。

我的主要问题是当网络服务有任何更新时，我如何更新本地资源。

一个大问题是我如何管理和获取物理资源并将其存储在本地？

请给我一些想法我被卡住了提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T05:54:51.397

For the first start app without network you can put resources into assets folder. Then on the server you can store version of each category of data and increase it when data changed. In the app you can download all resources on the SD card and read it from there until version of data changed. If version of some category increased you update it during app starts and if you want to update data during app works you can use [Service](https://developer.android.com/reference/android/app/Service.html) which ckecks for updates (every period of time). You can work without database just save your xml (json) and images in special hidden folder.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T22:48:31.737

恕我直言 - 如果您将拥有大量数据并且每次都在变化，那么您可能需要使用数据库，这样您就可以拥有很多控制权来存储和检索您需要的数据。您可以在数据库本身中存储和检索图像。基本上，您必须检查他是否可以访问互联网，如果没有，则从数据库中获取数据并将其呈现给用户。当您将要使用 Web 服务时，我会说数据库是您开始实施之前考虑的一个不错的选择。

注意：您可以在不再需要时清除数据库中的旧数据。任何人都可能不小心从您的 sd 卡中删除您的数据，但使用数据库，用户可能无法...

# python - 如果我在 BeautifulSoup 上使用 lxml，我会更好地控制我的蜘蛛吗？

> ID：13577922
> 
> 赞同：1
> 
> 时间：2012-11-27T05:28:49.823
> 
> 标签：python, parsing, beautifulsoup, lxml

我正在学习制作蜘蛛和爬虫。这种爬虫是我的激情所在，我将长期这样做。对于解析，我正在考虑使用 BeautifulSoup。但是有人说如果我使用lxml，我将拥有更多的控制权。

现在我知道的不多。但即使使用 lxml 更难，我也准备好努力工作。但如果这能让我完全控制，那么我已经准备好了。

那么你的意见是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T05:41:50.957

我真的不认为这个问题有很大的意义。你需要更多地解释你的目标到底是什么。 `BeautifulSoup`并且`lxml`是两个在很大程度上做相同事情的工具，但具有不同的功能和 API 理念和结构。

这不是“哪个给你更多控制权”的问题，而是“哪个是适合工作的工具？” 我两个都用。我更喜欢这种`BeautifulSoup`语法，因为我发现它更自然，但是`lxml`当我尝试基于变量动态解析未知量时，我发现它会更好——例如，生成包含变量值的 XPath 字符串，然后我将使用它从不同的页面中提取特定元素。

所以真的，这取决于你想要做什么。

### TL;博士

我发现`BeautifulSoup`使用起来更容易、更自然，但`lxml`最终会变得更强大、更通用。此外，`lxml`赢得速度比赛，毫无疑问。

# sharepoint-2010 - Sys.InvalideOperationsExcetion

> ID：13577928
> 
> 赞同：4
> 
> 时间：2012-11-27T05:29:01.530
> 
> 标签：sharepoint-2010

当我单击“站点操作”并选择“编辑页面”选项时，我收到以下错误消息。

Sys.InvalideOperationsExcetion：找不到 ID 为“ctl00_panelZone”的 UpdatedPanel。如果它是动态更新的，那么它必须在另一个 UpdatePanel 中

我该如何纠正这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T07:03:51.853

最有可能的是，有人试图更新页面，并在完成之前将其取消。无论哪种方式，Edit Page 函数都无法识别 UpdatePanel 的唯一 ID。

> 解决此问题的最简单方法是进入 SharePoint Designer，打开网站，然后检查/查看该页面的历史记录。只需恢复到以前的版本，这应该可以解决它。

或第二种`Edit your Page`使用附加`?ToolPaneView=2`到您要编辑的页面的 url 末尾的方法。

即：如果您的页面是[http://contoso.com/Pages/default.aspx](http://contoso.com/Pages/default.aspx)将 ?ToolPaneView=2 附加到末尾，那么它将是[http://contoso.com/Pages/default.aspx?ToolPaneView=2](http://contoso.com/Pages/default.aspx?ToolPaneView=2)。这是进入编辑页面的另一种方式。

啤酒花它的帮助！

# asp.net - 从 CreateUserWizard asp.net 4.0 中删除用户名字段

> ID：13577930
> 
> 赞同：2
> 
> 时间：2012-11-27T05:29:05.330
> 
> 标签：asp.net, customization, createuserwizard

我正在开发一个应使用电子邮件地址作为登录名的网站。因此，我正在寻找从 CreateUserWizard 中删除“用户名”字段并在页面中仅保留电子邮件 ID、密码、确认密码的选项。当我刚刚从 ASP.Net 页面中删除用户名文本框时，它抛出了异常。CreateUserWizardStep.ContentTemplate 不包含 ID UserName 作为用户名的 IEditableTextControl。任何想法如何从 createuserwizard 中删除用户名文本框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T07:44:01.060

一种方法是，`email`从向导中删除该字段并将`username`标签修改为`email`. 放置验证器以将用户名验证为电子邮件。因此，当您单击创建用户按钮时，应该验证电子邮件。最后，底线是您的用户名是您的电子邮件，反之亦然。

看到这个 [链接](http://forums.asp.net/t/1841373.aspx/1/10)

# c++ - 将焦点转移到另一个程序 Windows API

> ID：13577943
> 
> 赞同：0
> 
> 时间：2012-11-27T05:30:37.843
> 
> 标签：c++, winapi

我试图让我的应用程序将焦点更改为鼠标悬停的任何其他窗口。我正在尝试实现一些拖放功能，而似乎缺少的只是当鼠标将我的应用程序移动到另一个时焦点的改变。

这是我当前的测试功能（我现在在主回调过程中的 WM_MOUSEMOVE 上执行此操作以供笑）

```
case WM_MOUSEMOVE:
{
    POINT pt;
    GetCursorPos(&pt);
    HWND newHwnd = WindowFromPoint(pt);

    if (newHwnd != g_hSelectedWindow)
    {
        cout << "changing windows" << endl;
        cout << SetWindowPos(newHwnd, HWND_TOP, 0,0,0,0, SWP_NOMOVE|SWP_NOSIZE) << endl;
        g_hSelectedWindow = newHwnd;
    }

    CallWindowProc(listproc, hwnd,message,wParam,lParam);
    break;
} 
```

我尝试使用 AllowSetForegroundWindow 但它帮助它在给定范围内找不到它，但我已经包含了 .

任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T05:36:30.953

`AllowSetForegroundWindow`不会有帮助，除非*另一个*窗口尝试通过调用`SetForegroundWindow`.

我很好奇，如果您需要将另一个窗口带到前台，为什么不直接调用`SetForegroundWindow`它呢？

*更新*：所以这是你需要让它正常工作的代码：

```
HWND ResolveWindow(HWND hWnd)
{ /* Given a particular HWND, if it's a child, return the parent. Otherwise, if
   * the window has an owner, return the owner. Otherwise, just return the window
   */
    HWND hWndRet = NULL;

    if(::GetWindowLong(hWnd, GWL_STYLE) & WS_CHILD)
        hWndRet = ::GetParent(hWnd);

    if(hWndRet == NULL)
        hWndRet = ::GetWindow(hWnd, GW_OWNER);

    if(hWndRet != NULL)
        return ResolveWindow(hWndRet);

    return hWnd;    
}

HWND GetTopLevelWindowFromPoint(POINT ptPoint)
{ /* Return the top-level window associated with the window under the mouse 
   * pointer (or NULL) 
   */
    HWND hWnd = WindowFromPoint(ptPoint);

    if(hWnd == NULL)
        return hWnd;    

    return ResolveWindow(hWnd);
} 
```

只需`GetTopLevelWindowFromPoint(pt)`从您的`WM_MOUSEMOVE`处理程序调用，如果您返回一个有效的 HWND，那么它将是一个顶级窗口，可以使用 SetForegroundWindow 将其带到前台。

我希望这有帮助。

# php - 使用 jQuery 清除表单会中断成功消息

> ID：13577945
> 
> 赞同：0
> 
> 时间：2012-11-27T05:30:46.203
> 
> 标签：php, jquery

我有一个简单的表格，您可以在其中输入电子邮件然后提交。表单通过 jquery 发送到 php 脚本，该脚本发送电子邮件（如果电子邮件有效）返回 JSON 响应，然后 jquery 根据响应在 div 中显示成功或失败消息。得到了所有的工作。

我想要做的是清除表单，如果它被验证为成功发送。我可以清除表单字段并毫无问题地显示成功/失败消息，但发现了一个错误。如果有人在表单中输入了另一封电子邮件，则不会出现成功（或失败）消息。但是，php 仍在正确执行数据（发送电子邮件）。仅缺少成功/失败消息。成功/失败消息在您第一次提交表单时有效，但在重置后无效。这是表格：

```
<form action="" id="emailsend" method="post" >
Email: <input type="text" name="email" /><br />
<input type="submit" name="submit" value="Submit" ; />
</form> 
```

出现成功/失败消息的 div：

```
<div id="formResponse"></div> 
```

jQuery

```
$(document).ready(function(){  

$("#emailsend").submit(function(){  

    $.ajax({  
        type: "POST",  
        url: "sendunit4.php",  
        data: $("#emailsend").serialize(),  
        dataType: "json",  

        success: function(msg){  
            $("#formResponse").removeClass('error');  
            $("#formResponse").removeClass('success');  
            $("#formResponse").addClass(msg.status);  
            $("#formResponse").html(msg.message);
            $('#formResponse').fadeOut(2000);
            $('#emailsend')[0].reset();

        },  
        error: function(){  
            $("#formResponse").removeClass('success');  
            $("#formResponse").addClass('error');  
            $("#formResponse").html("There was an error submitting the form. Please try again.");  
        }  
    });  

    return false;  

});  

}); 
```

PHP 脚本的相关部分（sendunit4.php）：

```
$to = $_POST['email'];
if ($recipients = $swift->send($message, $failures))
{
$response_array['status'] = 'success';  
$response_array['message'] = 'Email sent!';
}
else{
$response_array['status'] = 'error';  
$response_array['message'] = 'There was a problem sending';  
}
echo json_encode($response_array); 
```

任何想法，将不胜感激。谢谢！

# android - 如何在phonegap html文件中引用java类

> ID：13577946
> 
> 赞同：0
> 
> 时间：2012-11-27T05:31:06.563
> 
> 标签：android, cordova

> **可能重复：**
> [如何在android中使用phonegap将html连接到本机](https://stackoverflow.com/questions/4883373/how-to-connect-html-to-native-using-phonegap-in-android)

如何将 www 文件夹的 html 文件中的方法调用到 phonegap 中的 src 文件夹。我想在 phonegap 中使用本机方法。请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T05:35:30.303

You have to create a 'phonegap plugin' for this purpose. Here's a good tutorial on this:

[https://www.adobe.com/devnet/html5/articles/extending-phonegap-with-native-plugins-for-android.html](https://www.adobe.com/devnet/html5/articles/extending-phonegap-with-native-plugins-for-android.html)

# c - OpenMP 嵌套循环，代码在做什么？

> ID：13577949
> 
> 赞同：0
> 
> 时间：2012-11-27T05:31:30.387
> 
> 标签：c, loops, parallel-processing, openmp, nested-loops

我在理解 OpenMP 如何与嵌套循环一起工作时遇到问题。请帮忙！

我得到以下代码并行运行：

```
#pragma omp parallel private(i)
{
for(i=0; i<n; i++)
{
    #pragma omp for
    for(j=0; j<n; j++)
    {
        if(asubsref(seed,j) > 0)
            asubsref(bin,j) = asubsref(bin,j) + 1;
    }
    #pragma omp for
    for(j=0; j<n; j++)
        asubsref(seed,j) = asubsref(seed,j) - asubsref(w,i);
}
} 
```

但是，我不太确定这段代码是如何工作的（我只是运气好）。这就是我认为它正在做的事情......

所以`for(i=0; i<n; i++)`被分成不同的线程并并行运行。因为`i`被声明为`private`，所以循环的每个实例都是“沙盒”的；也就是说，任何更改都`j`保留在该线程中（至少在所有线程完成之前？）。我很困惑，因为不声明`#pragma omp for`会导致代码中断......我不确定为什么会这样。

如果有人可以指导我完成这段代码的工作，我将非常感激！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T09:53:27.057

这是一个典型的做法，以减少多个进入和存在于并行区域的开销。将您问题中的代码与以下等效代码进行比较：

```
for (i=0; i<n; i++)
{
    #pragma omp parallel for
    for (j=0; j<n; j++)
    {
        if (asubsref(seed,j) > 0)
            asubsref(bin,j) = asubsref(bin,j) + 1;
    }
    #pragma omp parallel for
    for (j=0; j<n; j++)
        asubsref(seed,j) = asubsref(seed,j) - asubsref(w,i);
} 
```

它随着时间的推移运行外循环`i` `n`。在外循环的每次迭代中，它运行两个并行循环，在线程之间`j`拆分迭代。`n`这里的问题是你里面有两个平行的区域，每个区域都是激活的`n`时间。这可能会为某个值的间隔增加显着的开销`n`（实际间隔将取决于许多因素）。

为了减少开销，将整个代码放在一个并行区域内。因此，每个线程将执行外部循环的所有迭代，而内部迭代仍将在线程之间拆分。如果您删除工作共享结构，则内部循环将不会分布在线程之间。相反，每个线程都将执行外部*和*内部迭代的全部范围，因此例如`asubsref(bin,j)`会增加最`num_threads`多次而不是一次（为什么“最多”？提示：不受保护的并发数据访问）。

大多数时候，当一个人在并行结构中运行一个外循环时，人们希望不同的线程在相同的迭代中保持滴答作响。这可以通过循环体末尾的屏障来实现：

```
#pragma omp parallel private(i)
{
    for (i = 0; i < n; i++)
    {
        ...
        #pragma omp barrier
    }
} 
```

在您的情况下，不需要显式障碍，因为`for`工作共享构造在其末端有一个隐式障碍。

# javascript - javascript让用户只输入单个字符

> ID：13577951
> 
> 赞同：1
> 
> 时间：2012-11-27T05:31:39.220
> 
> 标签：javascript, validation

我在 javascript 方面很弱，所以请帮助我提供一个 javascript 代码，它允许用户只输入单个字符，即 A、B、C、D、....、Z。但只有一个字符，也没有数字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T05:53:21.977

这一点 JavaScript 将在每次击键后进行测试。如果按下的键不是字母，则将其删除。如果它是一个字母，它会确保它是大写的。

```
<script type="text/javascript">
  function validate(input){
    input.value = input.value.replace(/\W|\d/g, '').substr(0, 1).toUpperCase();
  }
</script>
<input id="input" type="text" onkeyup="validate(this);"/>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T05:40:28.267

```
 <script type="text/javascript">
function fn()
{
    myString=document.getElementById("atext").value;
    patt=/[A-z]/g;
    x=patt.test(myString);
    alert(x);
}
</script>
<input type="text" id="atext" maxlength="1" />

<input type="button" id="btn" onclick="fn()" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T05:35:46.617

我猜你可以使用 html 5 模式属性。

```
<input type="text" pattern="[A-Za-z]{1}" title="Please enter only one letter"/> 
```

# html - HTML 元素：属性排序

> ID：13577953
> 
> 赞同：3
> 
> 时间：2012-11-27T05:31:49.747
> 
> 标签：html

分析几个页面并注意到不同的方法/写作风格，我想知道 HTML 元素属性的顺序是否影响：

*   浏览器性能
*   渲染（显眼与否）
*   客户端/服务器计算资源
*   任何事物？

他们是我应该考虑的订购标准吗？

我只能认为它会影响第 n 个属性的 JQuery 选择。

IE：

```
<div class="foo" id="bar"></div> 
```

对比

```
<div id="bar" class="foo"></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T05:41:41.693

在查询方面：

*   使用 O(1) 选择器的 ID，而不是按类 O(n) 选择
*   对多个元素的选择使用类，对只有一个元素的选择使用 ID（这将导致您只使用一个 id 或一个类，通常不会同时使用两者）

在渲染方面：

*   Minimize browser reflow ( [https://developers.google.com/speed/articles/reflow](https://developers.google.com/speed/articles/reflow) )
*   CSS: Use a declaration only once ( [https://developers.google.com/speed/articles/optimizing-css](https://developers.google.com/speed/articles/optimizing-css) )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T05:37:04.580

没关系，这通常是一个样式决定，或者您首先需要通过 js 或 css 进行格式设置。 [HTML 属性解释](http://multimedia.journalism.berkeley.edu/tutorials/html/attributes-basic/)

# c# - 求数平方的公式

> ID：13577958
> 
> 赞同：2
> 
> 时间：2012-11-27T05:32:02.997
> 
> 标签：c#, .net, for-loop, perfect-square

我需要使用 for 循环显示数字 1-10 的正方形。这就是我到目前为止所拥有的。我不知道我错过了什么。任何帮助将非常感激。

```
 for (int counter = 1; counter <= 10; counter++)
        {                          
            Console.WriteLine(counter * counter);                
        }
        Console.ReadLine(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T05:33:36.697

试试这个

```
 for (int counter = 1; counter <= 10; counter++)
    {          
            Console.WriteLine(counter*counter);
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T05:38:37.860

看看你的代码

```
for (int counter = 1; counter <= 10; counter++)
{
   if ((counter * counter) == 0) // this will never evaluate to true
   {
       Console.WriteLine(counter);
   }
} 
```

由于您从 1 开始，因此您的 if 条件永远不会为真，因此不会打印任何内容

你只需要`counter * counter`在你的 for 循环中使用 print

或者你可以`Math.Pow(counter, 2.0)`用来得到你的正方形

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-27T05:34:11.347

对于`counter`具有除 , 以外的任何值的整数`0`，`counter * counter`将*永远不会*计算为`0`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-27T05:34:49.927

if ((counter * counter) == 0) 这不会满足任何值..试试 if ((counter * counter) != 0) ..试试这个..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-08T11:10:46.340

由于您从 1 开始，因此 counter * counter 不能为 0。因此，考虑到这一点，这是整个代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace ConsoleApplication21
{
    class Program
    {
        static void Main(string[] args)
        {
            for (int i = 1; i <= 10; i++)
                Console.WriteLine(i * i);
        }
    }
} 
```

我确信这很有帮助。

# objective-c - 如何获取包含 WebView 的单元格的 NSTableView heightOfRow

> ID：13577965
> 
> 赞同：0
> 
> 时间：2012-11-27T05:33:21.597
> 
> 标签：objective-c, cocoa, webview, nstableview

我有一个具有单列的 NSTableView，其中的行包含 WebKit WebView。我遇到的问题是如何获取 WebView 的大小，以便可以在表格视图的`heightOfRow:`方法中设置高度。

以下是代码的相关部分：

```
// The only essential/required tableview dataSource method
- (NSInteger)numberOfRowsInTableView:(NSTableView *)tableView {
    return [self.messagesArray count];
}

// This method is optional if you use bindings to provide the data
- (NSView *)tableView:(NSTableView *)tableView viewForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row {

    NSString *identifier = [tableColumn identifier];
    if ([identifier isEqualToString:@"MainCell"]) {

        ChatTableViewCell *cellView = (ChatTableViewCell*)[tableView makeViewWithIdentifier:@"MainCell" owner:self];
        NSString *htmlString = [self.messagesArray objectAtIndex:row];
        [[cellView.webView mainFrame] loadHTMLString:htmlString baseURL:nil];
        [cellView.webView.mainFrame.frameView setAllowsScrolling:NO];

        return cellView;
    }

    return nil;
} 
```

我遇到的问题是如何在这种方法中获得大小。到目前为止，我所做的一切都给了我一个例外。我认为这是因为调用以下方法时单元格没有正确初始化，并且 WebView 方法`loadHTMLString`是异步的。

```
-(CGFloat) tableView:(NSTableView *)tableView heightOfRow:(NSInteger)row {
    //What can I put here?
} 
```

我希望能够将单元格调整为与 WebView 中的内容相同的大小。

编辑：我尝试将以下内容添加到`heightOfRow`方法中：

```
 WebView *webView = [((ChatTableViewCell*)[tableView viewAtColumn:0 row:row makeIfNecessary:YES]) webView];
    NSRect webViewRect = [webView frame];
    return webViewRect.size.height; 
```

它给了我以下信息：

`WARNING: NSTableView detected a rowView was requested from inside of the -heightOfRow delegate method. That is not supported!`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T05:43:25.123

试试这个，它会给你 webview 内容的高度..

用这样的html字符串加载webview..

```
embedHTML = [embedHTML stringByAppendingFormat:@"<body><div id='size_div'>%@</div></body></html>",YourString]; 
```

现在在 webViewDidFinishLoad 方法中保留此语句...

```
NSString *output = [webView stringByEvaluatingJavaScriptFromString:@"document.getElementById(\"size_div\").offsetHeight;"];  
NSLog(@"height: %@", output); 
```

# ruby-on-rails - How to change the default json response in devise to custom response?

> ID：13577969
> 
> 赞同：2
> 
> 时间：2012-11-27T05:33:45.770
> 
> 标签：ruby-on-rails, ruby-on-rails-3, json, devise

I use devise for authentication and in registration controller if user cannot be created due to some reason then it produces json response as

> {"email":["has already been taken"],"password":["doesn't match confirmation"],"username":["has already been taken"]}

but i want this to be changed to the following

> {"error":{"email":{"has already been taken"},"password":{"doesn't match confirmation"},"username":{"has already been taken"}}}

How can i do this?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-02-09T18:50:23.480

作为参考，以防其他人在使用 Devise 尝试登录失败时查找如何自定义 json 错误响应时偶然发现此问题，关键是使用您自己的自定义`FailureApp`实现。（您也可以使用这种方法来覆盖某些重定向行为。）

```
class CustomFailureApp < Devise::FailureApp
  def respond
    if request.format == :json
      json_error_response
    else
      super
    end
  end

  def json_error_response
    self.status = 401
    self.content_type = "application/json"
    self.response_body = [ { message: "Your email or password is incorrect."} ].to_json
  end
end 
```

在您的 中`devise.rb`，查找以下`config.warden`部分：

```
 config.warden do |manager|
    manager.failure_app = CustomFailureApp
  end 
```

一些相关信息：

起初我以为我必须重写[Devise::SessionsController](http://www.rubydoc.info/github/plataformatec/devise/master/Devise/SessionsController)，可能使用`recall`传递给的选项，但正如[这里](https://github.com/plataformatec/devise/issues/3142)`warden.authenticate!`提到的，“API 请求不会调用调用，仅用于导航请求。如果你想自定义 http 状态代码，在失败的应用程序级别这样做你会有更好的运气。”

也[https://github.com/plataformatec/devise/wiki/How-To%3a-Redirect-to-a-specific-page-when-the-user-can-not-be-authenticated](https://github.com/plataformatec/devise/wiki/How-To%3a-Redirect-to-a-specific-page-when-the-user-can-not-be-authenticated)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-11-16T08:17:32.693

从[@quix 答案](https://stackoverflow.com/a/35299895/877028)扩展（我不将其作为评论留下，因为它有格式问题）。

您也可以尽量减少重定义`http_auth_body`方法的覆盖：

```
class CustomFailureApp < Devise::FailureApp
  def http_auth_body
    return super unless request_format == :json
    {
      success: false,
      error: i18n_message
    }.to_json
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T06:19:06.383

您应该创建一个 json.erb 文件并将其呈现在该错误中。 [这个](https://stackoverflow.com/questions/2088280/in-rails-how-do-you-render-json-using-a-view)答案向您展示了如何做到这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T06:24:37.167

```
respond do |format|
    format.json { render json: {error: @your_model.errors }}
end 
```

或者你应该试试

```
respond do |format|
    format.json { render json: {error: Hash[@your_model.errors.map {|k, v| k, v[0]] } }}
end 
```

# java - 类似实用程序的活动 - SensorManager

> ID：13577977
> 
> 赞同：1
> 
> 时间：2012-11-27T05:34:33.587
> 
> 标签：java, android

我希望实现一个`SensorManager`可以处理所有与传感器相关的类，但这显然需要我启动一个新活动。

我不想这样做 - 只是运行计算。使用服务处理此问题的最佳方法是，您可以从服务中调用活动方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:02:40.490

绝对有可能创建一个类（不是活动）来管理传感器。你是对的，为了“订阅”一个传感器，你需要一个 SensorManager。但是任何类都可以实例化一个 SensorManager。

你可以想象一个类“mySensorClass”是这样开始的（想象你想从加速度计收集数据）：

```
public class mySensorClass implements SensorEventListener {
   public static final String TAG = "mySensorClass";

   private SensorManager mSensorManager;
   private Sensor mAccelerometer;

[...] 
```

然后，在构造函数中，您将实例化 SensorManager 并注册到它：

```
public DeviceOrientation(Context context) {
   mSensorManager = (SensorManager) context.getSystemService(Context.SENSOR_SERVICE);
   mAccelerometer = mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);

   mSensorManager.registerListener(this, mAccelerometer, SensorManager.SENSOR_DELAY_NORMAL);
} 
```

最后，您可以使用以下方法将从加速度计接收到的数据存储在类变量中：

```
@Override
public void onSensorChanged(SensorEvent event) { ... } 
```

最终，您的活动只需创建一个“mySensorClass”实例，并可以从加速度计获取最后一个测量值。

# visual-c++ - 如何获取 msvc 所需运行时库的位置

> ID：13577979
> 
> 赞同：0
> 
> 时间：2012-11-27T05:34:48.313
> 
> 标签：visual-c++, gcc, cmake, msvcrt, libstdc++

我有 CMake 的自定义包装器，它为各种平台（win32、SunOS 等）和不同的编译器执行配置、编译和创建分发。我需要将所有需要的运行时库（libgcc_s.so，libstdc++.so for *nix like OS.msvcr90.dll，msvcp100.dll for win32）放入分发中。例如，gcc 具有允许获取这些库的全名的机制：

```
# get location of libgcc_s of default compiler
bash-3.2$ g++ -print-file-name=libgcc_s.so
/usr/local/lib/gcc/sparc-sun-solaris2.10/3.4.6/../../../libgcc_s.so

# get location of libstdc++ of custom compiler
bash-3.2$ g++-4.5.3 -print-file-name=libstdc++.so
/u/gccbuild/installed/gcc-4.5.3/lib/gcc/sparc-sun-solaris2.10/4.5.3/../../../libstdc++.so 
```

所以我需要类似的 msvc 机制（2008、2010），这可能吗？（它可以是给定编译器的环境变量、注册表值或其他）。或者也许有一些 CMake 机制来获取这些信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T07:52:00.973

您可以使用[InstallRequiredSystemLibraries cmake 模块。](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#module%3aInstallRequiredSystemLibraries)对于 CMake，它将 msvc dll（和清单）添加到您的 cmake-install 目标。

作为替代方案，您可以编写自己的小 cmake 代码来检查注册表以查找已安装的 Visual Studio 版本并找到 vcredist。然后，您可以将 vcredist 软件包添加到您自己的发行版中，并在您自己的安装程序中“滑流”其安装。

例如，以下内容将搜索 vcredist_2010 并将其添加到 NSIS 安装程序中：

```
if(CMAKE_CL_64)
     set(CMAKE_MSVC_ARCH amd64)
   else(CMAKE_CL_64)
     set(CMAKE_MSVC_ARCH x86)
endif(CMAKE_CL_64)

# Try and find the vcredist_XX.exe, normally this is in the WindowsSDK folder.
if( MSVC10 )
    find_program(MSVC_REDIST NAMES VC/vcredist_${CMAKE_MSVC_ARCH}.exe
        PATHS
        "[HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Microsoft SDKs\\Windows\\v7.1;InstallationFolder]/Redist/"               
        )
        get_filename_component(vcredist_name "${MSVC_REDIST}" NAME)
endif( MSVC10 )

# If we found a vcredist-package, we add it simply to the 
# installation-folder and run it with NSis.
if( vcredist_name )
    message( STATUS "    Adding " ${vcredist_name} " to Install" )
    install(PROGRAMS ${MSVC_REDIST} COMPONENT System DESTINATION bin)
    # Add /q to make the vcredist install silent
    set(CPACK_NSIS_EXTRA_INSTALL_COMMANDS "ExecWait '\\\"$INSTDIR\\\\bin\\\\${vcredist_name}\\\" /q'" )
endif( vcredist_name ) 
```

# c# - 是否可以在 Lambda 表达式中包含 SqlFunctions.StringConvert？

> ID：13577981
> 
> 赞同：3
> 
> 时间：2012-11-27T05:34:52.827
> 
> 标签：c#, entity-framework-4, lambda, expression

我一直在学习表达式并使用下面的代码来添加针对数据库模型的表达式（EF4 - ORACLE 而不是 SQL！）

这对 Oracle 非常有效，并允许我动态构建谓词，例如`"CustomerId", "Contains", 2`into`f=>f.CustomerId.ToString().ToLower().Contains("2")`

但是，如果我尝试使用 SQL Server，它会失败，因为我需要调用`SqlFunctions.StringConvert`- 但我不知道如何将它包含在 Lambda 中？

我的最终结果将是这样的：

```
f=> SqlFunctions.StringConvert(f.CustomerId).ToLower().Contains("2") 
```

谢谢 ：）

* * *

**编辑：添加了我尝试过的示例**

这段代码看起来几乎可以工作，有点！但是，它会在线
上引发错误`var sqlExpression`

```
Expression of type 'System.Double' cannot be used for parameter of type 'System.Nullable`1[System.Double]' of method 'System.String StringConvert(System.Nullable`1[System.Double])' 
```

```
MethodInfo convertDouble = typeof(Convert).GetMethod("ToDouble",new Type[]{typeof(int)});
                    var cExp = Expression.Call(convertDouble, left.Body);

                    var entityParam = Expression.Parameter(typeof(TModel), "f");
                    MethodInfo sqlFunc = typeof(SqlFunctions).GetMethod("StringConvert", new Type[] { typeof(double) });
                    var sqlExpression = Expression.Call(sqlFunc, cExp);

                    MethodInfo contains = typeof(string).GetMethod("Contains", new[] { typeof(string) });
                    right = Expression.Constant(value.ToString(), typeof(string));

                    var result = left.AddToString().AddToLower().AddContains(value.ToString());
                    return result; 
```

* * *

```
public static Expression<Func<T, string>> AddToString<T, U>(this Expression<Func<T, U>> expression)
        {

            return Expression.Lambda<Func<T, string>>(
                Expression.Call(expression.Body,
                "ToString",
                null,
                null),
                expression.Parameters);
        }

        public static Expression<Func<T, string>> AddToLower<T>(this Expression<Func<T, string>> expression)
        {

            return Expression.Lambda<Func<T, string>>(
                Expression.Call(expression.Body,
                "ToLower",
                null,
                null),
                expression.Parameters);
        }

        public static Expression<Func<T, bool>> AddContains<T>(this Expression<Func<T, string>> expression, string searchValue)
        {
            return Expression.Lambda<Func<T, bool>>(
                Expression.Call(
                    expression.Body,
                    "Contains",
                    null,
                    Expression.Constant(searchValue)),
                expression.Parameters);
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T23:18:36.377

我相信您基本上需要构建以下 lambda 表达式的等效表达式：

```
e => SqlFunctions.StringConvert((double?) e.Number).Contains("6")) 
```

这是一个完整的复制粘贴示例。它使用 CodeFirst，因此无需创建数据库或类似的东西就可以工作。只需添加实体框架 nuget 包（我使用的是 EF6，但它也应该适用于 EF5）。构建 lambda 是您真正追求的。

```
namespace ConsoleApplication8
{
    public class MyEntity
    {
        public int Id { get; set; }
        public int Number { get; set; }
    }

    public class MyContext : DbContext
    {
        public DbSet<MyEntity> Entities { get; set; }
    }

    class Program
    {
        static void Main(string[] args)
        {
            using (var ctx = new MyContext())
            {
                if (!ctx.Entities.Any())
                {
                    ctx.Entities.Add(new MyEntity() {Number = 123});
                    ctx.Entities.Add(new MyEntity() {Number = 1893});
                    ctx.Entities.Add(new MyEntity() {Number = 46});
                    ctx.SaveChanges();
                }

                foreach(var entity in ctx.Entities.Where(e => SqlFunctions.StringConvert((double?) e.Number).Contains("6")))
                {
                    Console.WriteLine("{0} {1}", entity.Id, entity.Number);
                }

                foreach (var entity in ctx.Entities.Where(BuildLambda<MyEntity>("Number", "6")))
                {
                    Console.WriteLine("{0} {1}", entity.Id, entity.Number);
                }

            }
        }

        private static Expression<Func<T, bool>> BuildLambda<T>(string propertyName, string value)
        {
            var parameterExpression = Expression.Parameter(typeof(T), "e");

            var stringConvertMethodInfo = 
                typeof(SqlFunctions).GetMethod("StringConvert", new Type[] {typeof (double?)});

            var stringContainsMethodInfo =
                typeof (String).GetMethod("Contains");

            return 
                Expression.Lambda<Func<T, bool>>(
                Expression.Call(
                    Expression.Call(
                        stringConvertMethodInfo,
                        Expression.Convert(
                            Expression.Property(parameterExpression, "Number"),
                            typeof (double?))),
                    stringContainsMethodInfo,
                    Expression.Constant(value)),
                parameterExpression);
        }
    }
} 
```

# jquery - 将 jQuery 插件输入值推送到 AngularJS 中的模型

> ID：13577983
> 
> 赞同：4
> 
> 时间：2012-11-27T05:34:55.663
> 
> 标签：jquery, angularjs, angular-ui

**情况：** 我正在移植，或者我应该说*尝试*将 Lakshan Perera 的 Simple jQuery ColorPicker (https://github.com/laktek/really-simple-color-picker) 移植到 Angular。在查看了 SO 上的类似问题之后，似乎有些人通过控制器分配插件的范围，但正确的（Angular）方法是将插件包装在指令中。我越来越近了。我能够通过我的新自定义属性在我的视图中正确呈现插件，但我不确定如何设置指令以将输入值传递给属性的值（一个 ng 模型）。实际的输入更新，但 Angular 没有监听变化，因此实际上没有意识到输入值已经更新。官方文档在这里讨论了设置自定义属性（http://docs.angularjs.org/guide/directive），

**所需的功能 -**

```
<input my-widget="{{color}}" type="text"/> <!-- my-widget instantiates my directive -->
<h1 style="color:{{color}}"></h1>          <!-- I would like the input value to dump into the attribute's value, in this case {{color}} --> 
```

**这是我到目前为止所拥有的：**

```
app.directive('myWidget', function(){
    var myLink = function(scope, element, attr) {

        scope.$watch('element',function(){

            var value = element.val();

            element.change(function(){

             console.log(attr.ngModel); // This is currently logging undefined

                     // Push value to attr here? 

                console.log( value + ' was selected');
            });
        });

        var element = $(element).colorPicker();
    }

    return {
        restrict:'A',
        link: myLink
    }   

}); 
```

**问题：** 我该如何设置属性值来捕捉元素的更新值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T07:09:32.290

我会这样实现它：

```
app.directive('colorPicker', function() {
  return {
    scope: {
      color: '=colorPicker'
    },
    link: function(scope, element, attrs) {
      element.colorPicker({
        // initialize the color to the color on the scope
        pickerDefault: scope.color,
        // update the scope whenever we pick a new color
        onColorChange: function(id, newValue) {
          scope.$apply(function() {
            scope.color = newValue;
          });
        }
      });

      // update the color picker whenever the value on the scope changes
      scope.$watch('color', function(value) {
        element.val(value);
        element.change();                
      });
    }
  }
}); 
```

你会像这样使用它：

```
<input color-picker="color"> 
```

这是一个工作的 jsFiddle，有一些小部件可以玩：http: [//jsfiddle.net/BinaryMuse/x2uwQ/](http://jsfiddle.net/BinaryMuse/x2uwQ/)

jsFiddle 使用隔离范围将范围值绑定`color`到传入`color-picker`属性的任何内容。我们`$watch`用表达式`'color'`来查看这个值何时发生变化，并适当地更新颜色选择器。

# iphone - how can i set a alert when wrong username or password authentication on ASI Http Request?

> ID：13577990
> 
> 赞同：2
> 
> 时间：2012-11-27T05:35:34.307
> 
> 标签：iphone, ios, xcode, asihttprequest

for me i have done asi http request .but when i call this methode on login page.how can i set authentication alert view for false login the method of ASI HTTP Request is below

```
-(void) authenticate:(NSString*) uname password:(NSString*) pwd{

NSString *format = @"%s %d";
NSLog(format, __FUNCTION__);

myAppDelegate *appDelegate = (myAppDelegate *)   [[UIApplication sharedApplication]delegate];
appDelegate.HUD.progress = 0.1f;
appDelegate.HUD.labelText =  @"Authenticating...";

NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"http://%@/login",appDelegate.appData.server]];
ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
request.shouldPresentCredentialsBeforeChallenge = YES;
[request addBasicAuthenticationHeaderWithUsername:uname andPassword:pwd];

[request setDidFailSelector:@selector(authenticationFailed:)];

request.userInfo = [NSDictionary dictionaryWithObject:@"authenticate" forKey:@"type"];

[request setDelegate:self];
[request startAsynchronous];} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T05:57:27.667

```
- (IBAction)login_btn:(id)sender {
//    secondview *second=[[secondview alloc]initWithNibName:@"secondview" bundle:nil];
//    [self.navigationController pushViewController:second animated:YES];
//    [second release];

/*
 triangletechniqa.com/projects/funny/webservic/login.php?username=admin&password=123

 */
NSString *post =[NSString stringWithFormat:@"username=%@&password=%@",uesrname_text.text,password_text.text];

NSData *postData = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];

NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];

NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] init] autorelease];
[request setURL:[NSURL URLWithString:@"http://itriangletechniqa.com/projects/funny/webservic/login.php?"]];
[request setHTTPMethod:@"POST"];
[request setValue:postLength forHTTPHeaderField:@"Content-Length"];
[request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
[request setHTTPBody:postData];

NSError *error;
NSURLResponse *response;
NSData *urlData=[NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];
NSString *str=[[NSString alloc]initWithData:urlData encoding:NSUTF8StringEncoding];
NSLog(@"%@",str);
// NSMutableArray *tempArr = [str JSONValue];
// NSLog(@"%@",tempArr);

if([str isEqualToString:@"0"])
{
    UIAlertView *unsucess=[[UIAlertView alloc]initWithTitle:@"Sorrrrry" message:@"Incurrect username and password" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [unsucess show];
    [unsucess release];
}

else
{
    UIAlertView *success = [[[UIAlertView alloc]initWithTitle:@"successful" message:@"angry"
                                                     delegate:self cancelButtonTitle:@"ok" otherButtonTitles:nil] autorelease];

    [success show];
            secondview *view=[[secondview alloc]initWithNibName:@"secondview" bundle:nil];
    [self.navigationController pushViewController:view animated:YES];
    [view release];
}

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T07:01:11.407

我不太明白你。您找到放置 alertview 代码的正确位置了吗？

我有一些使用 asihttprequest 的经验，但我没有使用

`addBasicAuthenticationHeaderWithUsername:`

方法。

相反，我使用`setpostvalue`方法来发布用户帐户和密码。如果它们的方式相同，您可以添加另一个回调方法，就像

```
[request setDidSuccessSelector:@selector(resultProgress:)]; 
```

在`resultProgress:`方法中，您可以检查来自服务器的结果。

如果是错误登录，您可以显示警报视图。

# javascript - 为什么可以在全局范围内调用使用 var 定义的匿名函数？

> ID：13577991
> 
> 赞同：-3
> 
> 时间：2012-11-27T05:35:37.150
> 
> 标签：javascript

```
函数 setupSomeGlobals() {
  // 在闭包中结束的局部变量
  变量编号 = 666;
  // 将一些函数引用存储为全局变量
  var gAlertNumber = function() { console.log(num); }
}

setupSomeGlobals();

gAlertNumber(); //有效，为什么？！！

控制台.log(num); //不工作，好

```

我预计 gAlertNumber() 不能在 setupSomeGlobals() 函数之外工作......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T06:07:16.657

`var`声明的变量**总是**本地的，不能从外部访问。

如果您在控制台中运行它，您很可能已经通过较早的尝试污染了全局命名空间。打开一个新选项卡并再次运行代码。

# iphone - Apple LLVM 编译器 3.1 错误

> ID：13577993
> 
> 赞同：1
> 
> 时间：2012-11-27T05:35:42.207
> 
> 标签：iphone, objective-c, xcode, compiler-construction, clang

我开始遇到这个我似乎无法解决的特殊编译器错误。我浏览了互联网上的其他一些建议修复的帖子，但没有一个对我有用。我尝试更改构建设置并按照建议将所有“self.x”更改为“[self x]”；但没有帮助。

我的代码中有多级继承（即游戏-> 棋盘游戏-> tictactoegame），我猜，这种结构是问题的根源。编译器在合成名为“game”的 tictactoegame 实例后，似乎在 viewcontroller 的代码行中崩溃了。

我在做什么可能的错误？如果您需要更多信息来检测，请告诉我，任何帮助将不胜感激。这是错误日志：

```
CompileC "/Users/guvenis/Library/Developer/Xcode/DerivedData/AlDente_GameCenter-gnkchngrsovmqlbsdelpoqdyohyg/Build/Intermediates/AlDente GameCenter.build/Debug-iphonesimulator/AlDente GameCenter.build/Objects-normal/i386/TicTacToeViewController.o" "AlDente GameCenter/../TicTacToeViewController.m" normal i386 objective-c com.apple.compilers.llvm.clang.1_0.compiler
        cd "/Users/guvenis/Desktop/AlDente GameCenter"
        setenv LANG en_US.US-ASCII
        setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
        /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -x objective-c -arch i386 -fmessage-length=0 -std=gnu99 -fobjc-arc -Wno-trigraphs -fpascal-strings -O0 -Wno-missing-field-initializers -Wno-missing-prototypes -Wreturn-type -Wno-implicit-atomic-properties -Wformat -Wno-missing-braces -Wparentheses -Wswitch -Wno-unused-function -Wno-unused-label -Wno-unused-parameter -Wunused-variable -Wunused-value -Wuninitialized -Wno-unknown-pragmas -Wno-shadow -Wno-four-char-constants -Wno-sign-compare -Wno-shorten-64-to-32 -Wpointer-sign -Wno-newline-eof -Wno-selector -Wno-strict-selector-match -Wno-undeclared-selector -Wno-deprecated-implementations -DDEBUG=1 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk -fexceptions -fasm-blocks -Wprotocol -Wdeprecated-declarations -mmacosx-version-min=10.6 -g -Wno-conversion -Wno-sign-conversion -fobjc-abi-version=2 -fobjc-legacy-dispatch "-DIBOutlet=__attribute__((iboutlet))" "-DIBOutletCollection(ClassName)=__attribute__((iboutletcollection(ClassName)))" "-DIBAction=void)__attribute__((ibaction)" -D__IPHONE_OS_VERSION_MIN_REQUIRED=50100 -iquote "/Users/guvenis/Library/Developer/Xcode/DerivedData/AlDente_GameCenter-gnkchngrsovmqlbsdelpoqdyohyg/Build/Intermediates/AlDente GameCenter.build/Debug-iphonesimulator/AlDente GameCenter.build/AlDente GameCenter-generated-files.hmap" "-I/Users/guvenis/Library/Developer/Xcode/DerivedData/AlDente_GameCenter-gnkchngrsovmqlbsdelpoqdyohyg/Build/Intermediates/AlDente GameCenter.build/Debug-iphonesimulator/AlDente GameCenter.build/AlDente GameCenter-own-target-headers.hmap" "-I/Users/guvenis/Library/Developer/Xcode/DerivedData/AlDente_GameCenter-gnkchngrsovmqlbsdelpoqdyohyg/Build/Intermediates/AlDente GameCenter.build/Debug-iphonesimulator/AlDente GameCenter.build/AlDente GameCenter-all-target-headers.hmap" -iquote "/Users/guvenis/Library/Developer/Xcode/DerivedData/AlDente_GameCenter-gnkchngrsovmqlbsdelpoqdyohyg/Build/Intermediates/AlDente GameCenter.build/Debug-iphonesimulator/AlDente GameCenter.build/AlDente GameCenter-project-headers.hmap" -I/Users/guvenis/Library/Developer/Xcode/DerivedData/AlDente_GameCenter-gnkchngrsovmqlbsdelpoqdyohyg/Build/Products/Debug-iphonesimulator/include "-I/Users/guvenis/Library/Developer/Xcode/DerivedData/AlDente_GameCenter-gnkchngrsovmqlbsdelpoqdyohyg/Build/Intermediates/AlDente GameCenter.build/Debug-iphonesimulator/AlDente GameCenter.build/DerivedSources/i386" "-I/Users/guvenis/Library/Developer/Xcode/DerivedData/AlDente_GameCenter-gnkchngrsovmqlbsdelpoqdyohyg/Build/Intermediates/AlDente GameCenter.build/Debug-iphonesimulator/AlDente GameCenter.build/DerivedSources" -F/Users/guvenis/Library/Developer/Xcode/DerivedData/AlDente_GameCenter-gnkchngrsovmqlbsdelpoqdyohyg/Build/Products/Debug-iphonesimulator -include "/Users/guvenis/Library/Developer/Xcode/DerivedData/AlDente_GameCenter-gnkchngrsovmqlbsdelpoqdyohyg/Build/Intermediates/PrecompiledHeaders/AlDente GameCenter-Prefix-fegzlqlfizxpgwaenbkzicwpltxv/AlDente GameCenter-Prefix.pch" -MMD -MT dependencies -MF "/Users/guvenis/Library/Developer/Xcode/DerivedData/AlDente_GameCenter-gnkchngrsovmqlbsdelpoqdyohyg/Build/Intermediates/AlDente GameCenter.build/Debug-iphonesimulator/AlDente GameCenter.build/Objects-normal/i386/TicTacToeViewController.d" --serialize-diagnostics "/Users/guvenis/Library/Developer/Xcode/DerivedData/AlDente_GameCenter-gnkchngrsovmqlbsdelpoqdyohyg/Build/Intermediates/AlDente GameCenter.build/Debug-iphonesimulator/AlDente GameCenter.build/Objects-normal/i386/TicTacToeViewController.dia" -c "/Users/guvenis/Desktop/AlDente GameCenter/AlDente GameCenter/../TicTacToeViewController.m" -o "/Users/guvenis/Library/Developer/Xcode/DerivedData/AlDente_GameCenter-gnkchngrsovmqlbsdelpoqdyohyg/Build/Intermediates/AlDente GameCenter.build/Debug-iphonesimulator/AlDente GameCenter.build/Objects-normal/i386/TicTacToeViewController.o"

0  clang             0x000000010c381422 _ZL15PrintStackTracePv + 34
1  clang             0x000000010c3818a9 _ZL13SignalHandleri + 553
2  libsystem_c.dylib 0x00007fff86fb2cfa _sigtramp + 26
3  clang             0x000000010c72ec10 vtable for llvm::DIFile + 16
4  clang             0x000000010b4d736c clang::ASTContext::getTypeInfo(clang::Type const*) const + 1148
5  clang             0x000000010b4df7cc clang::ASTContext::getTypeInfoInChars(clang::QualType) const + 28
6  clang             0x000000010b4df291 (anonymous namespace)::RecordLayoutBuilder::LayoutField(clang::FieldDecl const*) + 1889
7  clang             0x000000010b5d8b1b clang::ASTContext::getObjCLayout(clang::ObjCInterfaceDecl const*, clang::ObjCImplementationDecl const*) const + 1003
8  clang             0x000000010bc30396 clang::CodeGen::CGDebugInfo::CreateType(clang::ObjCInterfaceType const*, llvm::DIFile) + 1526
9  clang             0x000000010bc31a5c clang::CodeGen::CGDebugInfo::CreateTypeNode(clang::QualType, llvm::DIFile) + 332
10 clang             0x000000010bc2a259 clang::CodeGen::CGDebugInfo::getOrCreateType(clang::QualType, llvm::DIFile) + 489
11 clang             0x000000010bc2bdde clang::CodeGen::CGDebugInfo::CreatePointeeType(clang::QualType, llvm::DIFile) + 894
12 clang             0x000000010bc2b9bd clang::CodeGen::CGDebugInfo::CreatePointerLikeType(unsigned int, clang::Type const*, clang::QualType, llvm::DIFile) + 285
13 clang             0x000000010bc319f5 clang::CodeGen::CGDebugInfo::CreateTypeNode(clang::QualType, llvm::DIFile) + 229
14 clang             0x000000010bc2a259 clang::CodeGen::CGDebugInfo::getOrCreateType(clang::QualType, llvm::DIFile) + 489
15 clang             0x000000010bc2b7d7 clang::CodeGen::CGDebugInfo::CreateQualifiedType(clang::QualType, llvm::DIFile) + 183
16 clang             0x000000010bc3195e clang::CodeGen::CGDebugInfo::CreateTypeNode(clang::QualType, llvm::DIFile) + 78
17 clang             0x000000010bc2a259 clang::CodeGen::CGDebugInfo::getOrCreateType(clang::QualType, llvm::DIFile) + 489
18 clang             0x000000010bc32431 clang::CodeGen::CGDebugInfo::getOrCreateFunctionType(clang::Decl const*, clang::QualType, llvm::DIFile) + 369
19 clang             0x000000010bc32e2a clang::CodeGen::CGDebugInfo::EmitFunctionStart(clang::GlobalDecl, clang::QualType, llvm::Function*, llvm::IRBuilder<false, llvm::ConstantFolder, llvm::IRBuilderDefaultInserter<false> >&) + 1866
20 clang             0x000000010b5ebc11 clang::CodeGen::CodeGenFunction::StartFunction(clang::GlobalDecl, clang::QualType, llvm::Function*, clang::CodeGen::CGFunctionInfo const&, clang::CodeGen::FunctionArgList const&, clang::SourceLocation) + 1073
21 clang             0x000000010bc48034 clang::CodeGen::CodeGenFunction::StartObjCMethod(clang::ObjCMethodDecl const*, clang::ObjCContainerDecl const*, clang::SourceLocation) + 548
22 clang             0x000000010bc481a6 clang::CodeGen::CodeGenFunction::GenerateObjCMethod(clang::ObjCMethodDecl const*) + 38
23 clang             0x000000010b4fe07c clang::CodeGen::CodeGenModule::EmitTopLevelDecl(clang::Decl*) + 876
24 clang             0x000000010b4fdcef (anonymous namespace)::CodeGeneratorImpl::HandleTopLevelDecl(clang::DeclGroupRef) + 95
25 clang             0x000000010b4fdc51 clang::BackendConsumer::HandleTopLevelDecl(clang::DeclGroupRef) + 161
26 clang             0x000000010b4c6092 clang::ParseAST(clang::Sema&, bool) + 306
27 clang             0x000000010b4c4bd7 clang::CodeGenAction::ExecuteAction() + 855
28 clang             0x000000010b49713f clang::CompilerInstance::ExecuteAction(clang::FrontendAction&) + 879
29 clang             0x000000010b495dcb clang::ExecuteCompilerInvocation(clang::CompilerInstance*) + 2683
30 clang             0x000000010b4885ce cc1_main(char const**, char const**, char const*, void*) + 5086
31 clang             0x000000010b462dd8 main + 648
32 clang             0x000000010b462b44 start + 52
33 clang             0x0000000000000070 start + 18446744069225436512
Stack dump:
0\.  Program arguments: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -cc1 -triple i386-apple-macosx10.6.0 -emit-obj -mrelax-all -disable-free -disable-llvm-verifier -main-file-name TicTacToeViewController.m -pic-level 1 -mdisable-fp-elim -relaxed-aliasing -masm-verbose -target-cpu yonah -target-linker-version 128.2 -g -coverage-file /Users/guvenis/Library/Developer/Xcode/DerivedData/AlDente_GameCenter-gnkchngrsovmqlbsdelpoqdyohyg/Build/Intermediates/AlDente GameCenter.build/Debug-iphonesimulator/AlDente GameCenter.build/Objects-normal/i386/TicTacToeViewController.o -resource-dir /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../lib/clang/3.1 -dependency-file /Users/guvenis/Library/Developer/Xcode/DerivedData/AlDente_GameCenter-gnkchngrsovmqlbsdelpoqdyohyg/Build/Intermediates/AlDente GameCenter.build/Debug-iphonesimulator/AlDente GameCenter.build/Objects-normal/i386/TicTacToeViewController.d -MT dependencies -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk -iquote /Users/guvenis/Library/Developer/Xcode/DerivedData/AlDente_GameCenter-gnkchngrsovmqlbsdelpoqdyohyg/Build/Intermediates/AlDente GameCenter.build/Debug-iphonesimulator/AlDente GameCenter.build/AlDente GameCenter-generated-files.hmap -iquote /Users/guvenis/Library/Developer/Xcode/DerivedData/AlDente_GameCenter-gnkchngrsovmqlbsdelpoqdyohyg/Build/Intermediates/AlDente GameCenter.build/Debug-iphonesimulator/AlDente GameCenter.build/AlDente GameCenter-project-headers.hmap -include-pch /Users/guvenis/Library/Developer/Xcode/DerivedData/AlDente_GameCenter-gnkchngrsovmqlbsdelpoqdyohyg/Build/Intermediates/PrecompiledHeaders/AlDente GameCenter-Prefix-fegzlqlfizxpgwaenbkzicwpltxv/AlDente GameCenter-Prefix.pch.pth -D DEBUG=1 -D IBOutlet=__attribute__((iboutlet)) -D IBOutletCollection(ClassName)=__attribute__((iboutletcollection(ClassName))) -D IBAction=void)__attribute__((ibaction) -D __IPHONE_OS_VERSION_MIN_REQUIRED=50100 -I /Users/guvenis/Library/Developer/Xcode/DerivedData/AlDente_GameCenter-gnkchngrsovmqlbsdelpoqdyohyg/Build/Intermediates/AlDente GameCenter.build/Debug-iphonesimulator/AlDente GameCenter.build/AlDente GameCenter-own-target-headers.hmap -I /Users/guvenis/Library/Developer/Xcode/DerivedData/AlDente_GameCenter-gnkchngrsovmqlbsdelpoqdyohyg/Build/Intermediates/AlDente GameCenter.build/Debug-iphonesimulator/AlDente GameCenter.build/AlDente GameCenter-all-target-headers.hmap -I /Users/guvenis/Library/Developer/Xcode/DerivedData/AlDente_GameCenter-gnkchngrsovmqlbsdelpoqdyohyg/Build/Products/Debug-iphonesimulator/include -I /Users/guvenis/Library/Developer/Xcode/DerivedData/AlDente_GameCenter-gnkchngrsovmqlbsdelpoqdyohyg/Build/Intermediates/AlDente GameCenter.build/Debug-iphonesimulator/AlDente GameCenter.build/DerivedSources/i386 -I /Users/guvenis/Library/Developer/Xcode/DerivedData/AlDente_GameCenter-gnkchngrsovmqlbsdelpoqdyohyg/Build/Intermediates/AlDente GameCenter.build/Debug-iphonesimulator/AlDente GameCenter.build/DerivedSources -F/Users/guvenis/Library/Developer/Xcode/DerivedData/AlDente_GameCenter-gnkchngrsovmqlbsdelpoqdyohyg/Build/Products/Debug-iphonesimulator -fmodule-cache-path /var/folders/4f/z2kfb3mj34qfy4jczzt7txr40000gn/T/clang-module-cache -O0 -Wno-trigraphs -Wno-missing-field-initializers -Wno-missing-prototypes -Wreturn-type -Wno-implicit-atomic-properties -Wformat -Wno-missing-braces -Wparentheses -Wswitch -Wno-unused-function -Wno-unused-label -Wno-unused-parameter -Wunused-variable -Wunused-value -Wuninitialized -Wno-unknown-pragmas -Wno-shadow -Wno-four-char-constants -Wno-sign-compare -Wno-shorten-64-to-32 -Wpointer-sign -Wno-newline-eof -Wno-selector -Wno-strict-selector-match -Wno-undeclared-selector -Wno-deprecated-implementations -Wprotocol -Wdeprecated-declarations -Wno-conversion -Wno-sign-conversion -std=gnu99 -ferror-limit 19 -fmessage-length 0 -stack-protector 1 -fblocks -fobjc-runtime-has-arc -fobjc-runtime-has-weak -fobjc-arc -fobjc-exceptions -fexceptions -fpascal-strings -fdiagnostics-show-option -serialize-diagnostic-file /Users/guvenis/Library/Developer/Xcode/DerivedData/AlDente_GameCenter-gnkchngrsovmqlbsdelpoqdyohyg/Build/Intermediates/AlDente GameCenter.build/Debug-iphonesimulator/AlDente GameCenter.build/Objects-normal/i386/TicTacToeViewController.dia -o /Users/guvenis/Library/Developer/Xcode/DerivedData/AlDente_GameCenter-gnkchngrsovmqlbsdelpoqdyohyg/Build/Intermediates/AlDente GameCenter.build/Debug-iphonesimulator/AlDente GameCenter.build/Objects-normal/i386/TicTacToeViewController.o -x objective-c /Users/guvenis/Desktop/AlDente GameCenter/AlDente GameCenter/../TicTacToeViewController.m 
1\.  <eof> parser at end of file
2\.  /Users/guvenis/Desktop/AlDente GameCenter/AlDente GameCenter/../TicTacToeViewController.m:25:1: LLVM IR generation of declaration 'TicTacToeViewController::checkLastMovesScore'
clang: error: unable to execute command: Segmentation fault: 11
clang: error: clang frontend command failed due to signal 2 (use -v to see invocation)
clang: note: diagnostic msg: Please submit a bug report to http://developer.apple.com/bugreporter/ and include command line arguments and all diagnostic information.
clang: note: diagnostic msg: Preprocessed source(s) and associated run script(s) are located at:
clang: note: diagnostic msg: /var/folders/4f/z2kfb3mj34qfy4jczzt7txr40000gn/T/TicTacToeViewController-bttija.mi
clang: note: diagnostic msg: /var/folders/4f/z2kfb3mj34qfy4jczzt7txr40000gn/T/TicTacToeViewController-bttija.sh
Command /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang failed with exit code 254 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T05:43:07.430

I was using an enum instance imported from the game class header in the viewcontroller, removing it fixed my problem. It compiles without errors now. Struggle for 2 hours, fix it yourself 5mins after posting it in stackoverflow.

# c# - 将属性添加到 DataList 控件内的 HyperLink 控件

> ID：13577997
> 
> 赞同：1
> 
> 时间：2012-11-27T05:36:03.807
> 
> 标签：c#, asp.net, repeater, datalist

我正在尝试将 GA 跟踪代码添加到 Datalist 控件内部的超链接中，使用以下代码我可以添加，但是所有 GA 跟踪事件将显示所有 pdf 文件将具有相同的名称。下面是代码

```
<asp:DataList ID="dlTournamentMenu" runat="server" RepeatColumns="4"  
    CellSpacing="5" RepeatLayout="Table" SeparatorStyle-Width="10" CellPadding="4" 
    BorderWidth="0"  >
    <ItemTemplate>
    <div class="uc4TournamentLinks" >
        <asp:HyperLink ID="hylMenuItem"  runat="server" NavigateUrl='<%# Eval("PageInternalLinkURL") %>' ToolTip='<%# Eval("PageName") %>' onclick="_gaq.push(['_trackEvent', 'Downloads', 'PDF', 'PDF File Downloaded']);" Target='<%# Eval("PageWindow") %>' BorderWidth="0px" Font-Underline="False" >
            <asp:Label ID="lblTourTitle" CssClass="uc4TournamentLinksColor" runat="server" Text='<%# Eval("PageName") %>'></asp:Label>
        </asp:HyperLink>
    </div>
    </ItemTemplate>
</asp:DataList> 
```

当我尝试添加如下代码时

`onclick="_gaq.push(['_trackEvent', 'Downloads', 'PDF', '<%# Eval("PageWindow") %>']);"`

它会产生错误，因为我无法将 Eval 绑定到此属性。

我怎样才能像我们为Repeater控件做的那样在语法上绑定它，如下例所示

```
 protected void gvUsers_RowDataBound(object sender, GridViewRowEventArgs e)
    {

        //LOCK USER
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            LinkButton lbLockUser = e.Row.FindControl("lnkBtnLockUser") as LinkButton;
            if (lbLockUser != null)
                ScriptManager.GetCurrent(this).RegisterAsyncPostBackControl(lbLockUser);

            lbLockUser.Attributes.Add("onclick", "javascript:return " +
            "confirm('Are you sure you want to lock this User ')");
        }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T06:10:09.900

更新：解决的解决方案我使用`OnItemDataBound`下面的事件完整工作代码完成了它

```
<asp:DataList ID="dlTournamentMenu" runat="server" OnItemDataBound="Item_Created" RepeatColumns="4" CellSpacing="5" RepeatLayout="Table" SeparatorStyle-Width="10" CellPadding="4" BorderWidth="0">
    <ItemTemplate>
    <div class="uc4TournamentLinks" >
        <asp:HyperLink ID="hylMenuItem"  runat="server" NavigateUrl='<%# Eval("PageInternalLinkURL") %>' ToolTip='<%# Eval("PageName") %>' Target='<%# Eval("PageWindow") %>' BorderWidth="0px" Font-Underline="False" >
            <asp:Label ID="lblTourTitle" CssClass="uc4TournamentLinksColor" runat="server" Text='<%# Eval("PageName") %>'></asp:Label>
        </asp:HyperLink>
    </div>
    </ItemTemplate>
</asp:DataList> 

   protected  void Item_Created(Object sender, DataListItemEventArgs e)
    {
    if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
    {

        // Retrieve the Hyperlink control in the current DataListItem.
        HyperLink Link = (HyperLink)e.Item.FindControl("hylMenuItem");
        string page = ((DataRowView)e.Item.DataItem).Row.ItemArray[1].ToString();
        string GATrakking = "_gaq.push(['_trackEvent', 'Downloads', 'PDF', '"+ page.Trim() +"']);";
        Link.Attributes.Add("onClick", GATrakking);
    }

    } 
```